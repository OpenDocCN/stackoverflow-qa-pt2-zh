# StackOverflow 问答 13944000-13944999

# c# - 使用 GetKeyState 和 Keyboard.KeyIsDown 按下另一个键时，修改键的状态会重置

> ID：13944000
> 
> 赞同：1
> 
> 时间：2012-12-19T00:56:42.817
> 
> 标签：c#, wpf, keyboard, key, modifier

这个问题让我一头雾水。

如果我按住`Ctrl`Key 并按任意键，程序会成功地将其记录在 WPF Window.KeyUp 事件中并按预期执行：

```
private void Window_KeyUp(object sender, KeyEventArgs e)
{
    if (e.Key == Key.S && Keyboard.IsKeyDown(Key.LeftCtrl))
    {
        ButtonSave_Click(sender, null);
    }
} 
```

然后事情变得有趣了。这仅适用于事件被触发的“第一次”。如果我继续按住 Left Ctrl 并`S`再次按下，则事件会在状态`LeftCtrl`为 up（而不是 down）时触发。

因此，ButtonSave_Click 仅`Ctrl`在按住键`S`并多次按下键时才会触发一次。我必须释放`Ctrl`并再次按下它才能检测到它的状态为关闭。

起初我以为这只是 C# 侥幸，但在使用来自 user32.dll 的 C/C++ GetKeyState 时我看到了同样的事情

```
[DllImport("user32.dll")]
private static extern short GetKeyState(int vKey); 
```

用以下代码替换上面的代码：

```
if (e.Key == Key.S && BitConverter.GetBytes(GetKeyState(0xA2))[1] > 0)
{
    ButtonSave_Click(sender, null);
} 
```

而且我得到相同的行为，无论我按下多少次`S`并按住`Ctrl`键，ButtonSave_Click 都只会触发一次。

我该如何解决这个问题以及发生了什么？

# c++ - 打开文件后程序崩溃

> ID：13944001
> 
> 赞同：4
> 
> 时间：2012-12-19T00:56:44.167
> 
> 标签：c++, ifstream

我需要将文件中的值读入我的程序。该文件已成功打开，但随后立即崩溃。我的代码有问题吗？

```
void createList(intNode*& intList)
{
    intNode* lastInt; //points to last integer in file
    lastInt = NULL;
    int fileInt; //int read from input file
    ifstream intInputFile;

    intInputFile.open("intInput.txt");
    if (intInputFile.is_open())
    {
        cout << "intInput.txt open successful" << endl;
    }
    else
    {
        cout << "intInput.txt open unsuccessful" << endl;
    }
    intInputFile >> fileInt;
    while(!intInputFile.eof())
    {
        intNode* anotherInt;
        anotherInt = new intNode;
        if(intList==NULL)
        {
            intList = anotherInt;
            lastInt = anotherInt;
        }
        else
        {
            lastInt->nextNode = anotherInt;
        }
        lastInt = lastInt->nextNode;
        lastInt->intValue = fileInt;
        lastInt->nextNode = NULL;
        intInputFile >> fileInt;
    }
    intInputFile.close();
    cout << "List created from input file" << endl;
} 
```

谢谢。

编辑：

检查后，我马上就有问题

```
else
    {
        lastInt->nextNode = anotherInt;
    } 
```

所以这段代码肯定有问题：

```
 lastInt = lastInt->nextNode;
    lastInt->intValue = fileInt;
    lastInt->nextNode = NULL;
    intInputFile >> fileInt; 
```

因为我在它之后直接有一个 cout 声明，但它没有用。

在进一步研究之后，问题出在这一行：

```
 intInputFile >> fileInt; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:13:26.917

假设`intList`is not `NULL`，那么您将`lastInt->nextNode = anotherInt;`在循环的第一次迭代期间调用 while`lastInt`仍然`NULL`导致程序崩溃（由于它遵循空指针）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:31:15.290

假设`intInput.txt`文件格式正确，您的`intInputFile >> fileInt;`行应该从中读取第一个整数就好了，所以`ifstream`. 的`is_open`成员函数`ifstream`只告诉您流是否有与之关联的文件。它不一定会告诉您打开文件是否有问题。您可以使用该`good`功能进行检查。例如：

```
if (intInputFile.good()) 
    cout << "intInputFile is good" << endl;
else 
    cout << "intInputFile is not good" << endl; 
```

根据您的系统，您可以使用以下方法找`strerror(errno)`出任​​何错误的原因：

```
#include <cstring>
#include <cerrno>

...

if (!intInputFile.good())
    cout << strerror(errno) << endl; 
```

这对我有用，但请参阅[此问题](https://stackoverflow.com/questions/960541/detecting-reason-for-failure-to-open-an-ofstream-when-fail-is-true)以获取更多信息，因为它可能不适用于所有地方。

# ruby-on-rails - 在 rails3 中注册 Devise 时，如何将值设置为嵌套列？

> ID：13944002
> 
> 赞同：0
> 
> 时间：2012-12-19T00:56:44.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用rails3。

用户模型有一个 user_profile。
我刚刚安装了设计并且工作正常。

我制作了registrations_controller.rb，它有“create”、“after_update_path_for(resource)”和“edit”操作。

如果我想让它在 user_profile 的嵌套列中输入“45”作为默认值，我该如何在注册控制器中编码？？？

我应该进行另一个名为“保存/或新建”的操作吗？，然后写这个？

> @user.user_profile.language_id = '45'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:42:00.407

如果您只想要特定字段的默认值，则可以将其添加到迁移文件中，例如...

```
create_table :user_profile do |t|
  ...
  t.integer :language_id, :default => 45
end 
```

...这将在创建关联时自动设置 lauguage_id 值。

# ssas - MDX 计算适用于所有暗淡属性

> ID：13944005
> 
> 赞同：1
> 
> 时间：2012-12-19T00:57:19.343
> 
> 标签：ssas, mdx

此计算适用于等级维度中的等级代码

```
CREATE MEMBER CURRENTCUBE.[Measures].[Daily Headcount Percentage by Grade]
AS [Measures].[Headcount]
/
([Grade].[Grade Code].[All], [Measures].[Headcount]), 
FORMAT_STRING = "Percent" 
```

我希望计算能够针对等级暗淡中的任何属性工作，因为目前除了等级代码之外的所有属性都返回 100%？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:35:42.800

对本地多维数据集进行快速测试，删除对我有用的属性对你有用吗？

```
CREATE MEMBER CURRENTCUBE.[Measures].[Daily Headcount Percentage by Grade]
AS [Measures].[Headcount]
/
([Grade].[All], [Measures].[Headcount]), 
FORMAT_STRING = "Percent" 
```

# sql-server - T-Sql 存储过程根据参数动态向表中添加列

> ID：13944006
> 
> 赞同：1
> 
> 时间：2012-12-19T00:57:25.973
> 
> 标签：sql-server, tsql, stored-procedures

> **可能重复：**
> [ALTER TABLE my_table ADD @column INT](https://stackoverflow.com/questions/2614101/alter-table-my-table-add-column-int)

谁能告诉我是否有可能有一个有效的存储过程：

```
USE [dbname]
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [Schema].[CreateColumn]
    @Table varchar(255),
    @ColumnName varchar(255)
AS
BEGIN
    BEGIN TRANSACTION
        SET QUOTED_IDENTIFIER ON
        SET ARITHABORT ON
        SET NUMERIC_ROUNDABORT OFF
        SET CONCAT_NULL_YIELDS_NULL ON
        SET ANSI_NULLS ON
        SET ANSI_PADDING ON
        SET ANSI_WARNINGS ON
    COMMIT

    BEGIN TRANSACTION
        ALTER TABLE [Schema].@Table ADD @ColumnName varchar(255) NULL
        ALTER TABLE [Schema].@Table SET (LOCK_ESCALATION = TABLE)
    COMMIT
END
GO 
```

基本上，我可以传入一个表名和列名，它会使用适当的事务在该表上创建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:45:18.810

> 对不起，这是不可能的。看到这个网站。

对不起，但这不是真的。

然而，它很笨拙。您几乎可以简单地执行内联 SQL（如果是表单客户端代码）或简单地编写一个 SQL 语句，因为您每次都需要定义表名、列名、列数据类型和默认值你执行（除非你硬编码其中的一些参数，即列数据类型总是 VarChar(255)。

玩这方面的变化，看看你是否找到你正在寻找的东西。但是，可能有更好的方法来实现您正在尝试做的事情：

```
DECLARE @sql NChar(4000);

SET @Sql = N'ALTER TABLE [Schema].' 
    + @TableName + ' ADD ' 
    + @ColumnName + ' ' 
    + @ColumnType + ' ' 
    + @InitialValue

EXECUTE sp_executesql @sql
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:12:43.667

对不起，这是不可能的。看到[这个网站](http://www.sqlservercentral.com/Forums/Topic484760-338-1.aspx)。

# neural-network - 是否有关于人工神经网络应该有多大的规则/好的建议？

> ID：13944011
> 
> 赞同：3
> 
> 时间：2012-12-19T00:58:11.267
> 
> 标签：neural-network

我上一次关于 ANN 的讲座是不久前，但我目前正面临一个我想使用的项目。

所以，基础知识——比如什么类型（多层前馈网络），由进化算法训练（这是项目给定的），有多少输入神经元（8）和多少输出神经元（7）——是放。但我目前正试图弄清楚我应该使用多少隐藏层以及每个层中有多少神经元（ea 不会修改网络本身，而只会修改权重）。

是否有一般规则或关于如何解决这个问题的指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:23:18.177

解决这个问题的最佳方法是实现级联相关算法，其中隐藏节点根据需要顺序添加以降低网络的错误率。这已被证明在实践中非常有用。

当然，另一种选择是对各种值进行蛮力测试。我认为“10 或 20 好”之类的简单答案没有意义，因为您是通过基函数直接解决高维空间中数据的可分离性问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T03:24:21.237

典型的神经网络依赖于隐藏层来收敛于特定的问题解决方案。大约 10 个神经元的隐藏层是输入和输出神经元很少的网络的标准。但是，试错法通常效果最好。由于神经网络将通过遗传算法进行训练，因此隐藏神经元的数量可能不会发挥重要作用，尤其是在训练中，因为其神经元上的权重和偏差会被反向传播等算法修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T22:46:56.440

正如 rcarter 建议的那样，反复试验可能会做得很好，但是您可以尝试另一件事。

您可以使用遗传算法来确定隐藏层的数量或其中的神经元数量。

我对一堆随机森林做了类似的事情，试图找到最佳数量的树、分支和给每棵树的参数等。

# java - 实现 ObservableList，扩展 ObservableListWrapper

> ID：13944013
> 
> 赞同：7
> 
> 时间：2012-12-19T00:58:20.470
> 
> 标签：java, javafx-2

我想创建一个与返回的对象几乎相同`FXCollections.observableArrayList()`但具有一些额外功能的类。我的第一个想法是

```
public class MyObservableList implements ObservableList
{
    private ObservableList list = FXCollections.observableArrayList();

    public functionWhatever()
    {
        // whatever
    }

} 
```

但这意味着覆盖附带的〜30个函数`ObservableList`（这似乎暗示我做错了什么）。

`FXCollections.observableArrayList()`返回一个类型的对象`com.sun.javafx.collections.ObservableListWrapper`，但是当我扩展时，`ObservableListWrapper`我需要创建一个构造函数，例如

```
MyObservableList( List arg0 ) 
```

或者

```
MyObservableList( List arg0, Callback arg1 ) 
```

这让我担心，因为`FXCollections.observableArrayList()`不接受任何论点。

我不知道如何`FXCollections`创建`ObservableListWrapper`它返回的对象，但我希望`MyObservableList`与返回的对象相同`FXCollections`（加上几个额外的函数）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T01:30:37.807

扩展**SimpleListProperty** [docs.oracle.com](http://docs.oracle.com/javafx/2/api/javafx/beans/property/SimpleListProperty.html)

*此类提供包装 ObservableList 的 Property 的完整实现。*

* * *

注意这个ctor：

*公共 SimpleListProperty(ObservableList 初始值)*

这样你就可以：

```
public class MyObservableList extends SimpleListProperty
{
    //constructor
    MyObservableList(){
        super(FXCollections.observableArrayList());
    }

    public functionWhatever()
    {
        // whatever
    } 

} 
```

这样，您的课程将基于 ArrayList。

# objective-c - 使用自定义 drawRect 方法的这个 UIView 的宽度是多少？

> ID：13944014
> 
> 赞同：1
> 
> 时间：2012-12-19T00:58:19.617
> 
> 标签：objective-c, ios, uiview

我有一个自定义的 UILabel 子类。我要覆盖的唯一方法是[此处概述](https://stackoverflow.com/questions/1063268/is-it-possible-to-alter-the-letter-spacing-kerning-of-a-font-with-cocoa-touch)`drawRect`的方法。

当我将 UILabel 的`bounds.size`或`frame.size`或传递`layer.bounds.size`给`- (CGSize)sizeThatFits:(CGSize)size`我时，如果不是自定义绘图，我*将返回 UILabel 的值。*也就是说，返回的 CGSize 的宽度太小，因为我正在增加字母之间的间距。

考虑到我的自定义绘图，获得正确宽度的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:21:28.993

正确的方法是覆盖`sizeThatFits:`自己以计算正确的大小。UIKit 不能为你做这件事。

# django - Django 表命名约定。我可以改变它的行为吗？

> ID：13944016
> 
> 赞同：9
> 
> 时间：2012-12-19T00:58:37.877
> 
> 标签：django, django-models

当 Django 创建表时，它会给它们以 app_class 形式的名称。我正在为 Django 安装改造一个不同的（但内容基本相似的）数据库。我的表名没有以 app_ 开头。

我可以相应地重新创建我的数据库及其表，但我想看看 Django 是否可以灵活地修改它处理表名的方式。

也就是说，我有一个表 coi_fs - 我想看看我是否可以更改 Django 安装，使其不引用 app_coi_fs 而只是引用 coi_fs？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T05:32:01.180

如果您已经有一个数据库，我建议您使用数据库自​​省选项。这将创建按原样使用当前数据库所需的模型。

```
$ django-admin.py inspectdb > models.py 
```

不过，要从文档（https://docs.djangoproject.com/en/dev/ref/models/options/#table-names）回答您的原始问题，您可以使用 db_table 元属性。

# 模型.py

```
class DjangoSite(models.Model):
    domain = models.CharField(max_length=100)
    name = models.CharField(max_length=50)
    class Meta:
        db_table = u'site' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T15:26:02.870

当然你可以在 Django 中完成，只需更改 Model 的元类：

```
from django.db.models.base import ModelBase

class ModelMetaClass(ModelBase):
    def __new__(cls, name, bases, attrs):
        new_class = super().__new__(cls, name, bases, attrs)

        new_class._meta.db_table = some_awesome_logic_implemented_by_you()

        return new_class 
```

然后在模型中：

```
class DjangoSite(models.Model, metaclass=ModelMetaClass):
    # __metaclass__ = ModelMetaClass  # Python 2.x

    class Meta:
        pass 
```

你就完成了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:30:09.000

如果要通用重命名所有表，请编辑 django 源。这似乎很危险，但如果您明确想要更改 Django 安装而不是它。[https://github.com/django/django/blob/master/django/db/models/options.py](https://github.com/django/django/blob/master/django/db/models/options.py)

# 旧选项.py

```
self.db_table = "%s_%s" % (self.app_label, self.model_name) 
```

# 新选项.py

```
self.db_table = self.model_name 
```

# javascript - document.getElementById 有两个值

> ID：13944018
> 
> 赞同：0
> 
> 时间：2012-12-19T00:58:47.787
> 
> 标签：javascript, getelementbyid

如何使用 document.getElementById 获得两个值？

我有这段代码，我试图从选择框中获取 kontypeID 和 kontypeTitel 以写入文本字段：

```
<select id="select" name="select" onchange="run()">                  
<?php
    $virksomhedsID = $_SESSION['virkID'];
    $sql = "SELECT * FROM konkurrenceType ORDER BY konkurrenceType.kontypeID";
    $result = mysql_query($sql) or die(mysql_error());                  

    echo '<option value="Vælg type">Vælg type</option>';

    while($rowSelect = mysql_fetch_assoc($result))
    { 
        $kontypeID = $rowSelect['kontypeID'];
        $kontypeTitel = $rowSelect['kontypeTitel'];             
        echo '<option value="' . $kontypeID . '">' . $kontypeTitel . '</option>';
    }
?>                    
</select>

<script>
    function run() {
        var select = document.getElementById("select");
        document.getElementById("valgtID").value = valgtTitel.options[select.selectedIndex].innerHTML;
        document.getElementById("valgtTitel").value = valgtTitel.options[select.selectedIndex].innerHTML;
    }
</script>

<input type="text" name="valgtID" id="valgtID"/>
<input type="text" name="valgtTitel" id="valgtTitel"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:14:18.303

使用 jQuery，您可以获得当前选定选项的值和文本：

```
$('#select').val();
$('#select').text(); 
```

或者您可以获取特定选项的值：

```
$("#select option[value='2']").val();
$("#select option[value='2']").text(); 
```

如果您真的想使用 getElementById 那么您必须执行两次才能获取选定的索引值并将其传递给自身，例如：

```
document.getElementById("select").options[document.getElementById("select").selectedIndex].value //accesses value attribute of selected option
document.getElementById("select").options[document.getElementById("select").selectedIndex].text //accesses text of selected option 
```

**更新：** 由于您不理解我发布的内容，因此我继续添加了完整且完全编码和测试的解决方案。通过在代码中而不是在选择框本身上添加事件监听器，这实际上又迈出了一步：

```
<html>
<body>
<select id="select">
     <option value="0" id="0">Select</option>
     <option value="1" id="titel 1">titel 1</option>
     <option value="2" id="titel 2">titel 2</option>
     <option value="3" id="titel 3">titel 3</option>     
</select><br><br>

ID<input type="text" id="id">
Titel<input type="text" id="titel">

<script type="text/javascript">
    document.getElementById("select").onchange = function () {

        document.getElementById("id").value = document.getElementById("select").options[document.getElementById("select").selectedIndex].value;

        document.getElementById("titel").value = document.getElementById("select").options[document.getElementById("select").selectedIndex].text;

    };
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T01:28:51.787

您正在使用`valgtTitel.options`，但我没有`valgtTitel`在任何地方看到声明或设置。你的意思是`select.options`？

试试下面的代码（[这里有一个 jsfiddle](http://jsfiddle.net/ErikE/wnmcL/41/)来试试）：

```
function run() {
   var select = document.getElementById("select"),
      option = select.options[select.selectedIndex];
   document.getElementById("id").value = option.id;
   document.getElementById("titel").value = option.innerHTML;
} 
```

如果您不熟悉 javascript 或不熟悉使用 javascript 进行网页操作，我建议您使用 jQuery 库。学习如何使用原始 javascript 来做所有这些事情是有价值的——你应该这样做*。**在*你开始使用 jQuery 之后。为什么？因为时间就是金钱，您的企业希望您尽快提高生产力，因此首先使用 jQuery 并没有什么坏处。有了这样的库，事情变得容易*多了。*

# windows-runtime - 如何解决 DownloadOperation 的 AttachAsync 没有立即返回？

> ID：13944019
> 
> 赞同：10
> 
> 时间：2012-12-19T00:58:55.957
> 
> 标签：windows-runtime, windows-store-apps

使用后台传输 API 时，我们必须遍历当前数据传输以在应用程序在终止（即系统关闭）后重新启动时再次启动它们。要获取进度信息并能够取消数据传输，必须使用 AttachAsync 附加它们。

我的问题是 AttachAsync 仅在数据传输完成时返回。这在某些情况下是有道理的。但是当有多个数据传输时，列表中的下一个传输将不会开始，直到当前附加完成。我对这个问题的解决方案是处理 AttachAsync().AsTask() 以经典方式返回的任务（不使用等待，而是继续）：

```
IReadOnlyList<DownloadOperation> currentDownloads =
   await BackgroundDownloader.GetCurrentDownloadsAsync();
foreach (var downloadOperation in currentDownloads)
{
   Task task = downloadOperation.AttachAsync().AsTask();

   DownloadOperation operation = downloadOperation;
   task.ContinueWith(_ =>
   {
      // Handle success
      ...
   }, CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion,
   TaskScheduler.FromCurrentSynchronizationContext());

   task.ContinueWith(_ =>
   {
      // Handle cancellation
      ...
  }, CancellationToken.None, TaskContinuationOptions.OnlyOnCanceled,
  TaskScheduler.FromCurrentSynchronizationContext());

  task.ContinueWith(t =>
  {
     // Handle errors
      ...

  }, CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted,
  TaskScheduler.FromCurrentSynchronizationContext());
} 
```

它有点工作（在实际代码中，我将下载添加到 ListBox）。该循环遍历所有下载并执行 StartAsync。但是下载并不是同时开始的。一次只有一个在运行，并且只有在它完成时才会继续下一个。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T00:13:07.627

的重点`Task`是让您可以选择并行操作。如果您`await`是在告诉代码序列化操作；如果您不等待，那么您就是在告诉代码并行化。

您可以做的是将每个下载任务添加到列表中，告诉代码并行化。然后，您可以一项一项地等待任务完成。

怎么样：

```
IReadOnlyList<DownloadOperation> currentDownloads = 
    await BackgroundDownloader.GetCurrentDownloadsAsync();
if (currentDownloads.Count > 0)
{
    List<Task<DownloadOperation>> tasks = new List<Task<DownloadOperation>>();
    foreach (DownloadOperation downloadOperation in currentDownloads)
    {
        // Attach progress and completion handlers without waiting for completion
        tasks.Add(downloadOperation.AttachAsync().AsTask());
    }

    while (tasks.Count > 0)
    {
        // wait for ANY download task to finish
        Task<DownloadOperation> task = await Task.WhenAny<DownloadOperation>(tasks);
        tasks.Remove(task);

        // process the completed task...
        if (task.IsCanceled)
        {
            // handle cancel
        }
        else if (task.IsFaulted)
        {
            // handle exception
        }
        else if (task.IsCompleted)
        {
            DownloadOperation dl = task.Result;
            // handle completion (e.g. add to your listbox)
        }
        else
        {
            // should never get here....
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-21T04:47:57.360

我希望这还不算晚，但我确切地知道你在说什么。我还尝试在应用程序启动时恢复所有下载。

经过数小时的尝试，这是可行的解决方案。

**诀窍是在攻击进度处理程序之前让下载操作首先恢复。**

```
downloadOperation.Resume();
await downloadOperation.AttachAsync().AsTask(cts.Token); 
```

# python - 如何从硬编码的 url 中获取解析后的 html

> ID：13944021
> 
> 赞同：1
> 
> 时间：2012-12-19T00:59:15.047
> 
> 标签：python, urllib2, scrapy

在我的scrapy中，我只想要来自自定义url的变量中的html响应。

假设我有网址

```
url = "http://www.example.com" 
```

现在我想获取该页面的 html 进行解析

```
pageHtml = scrapy.get(url) 
```

我想要这样的东西

```
page = urllib2.urlopen('http://yahoo.com').read() 
```

我无法在爬虫中使用上述行的唯一问题是因为我的会话已经通过scrapy 身份验证，所以我不能使用任何其他函数来获取该函数的 html

我不想在任何回调中响应，而只是直接在变量中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:06:45.123

基本上，您只需要为该问题中的代码添加相关导入即可工作。您还需要添加一个`link`在该示例代码中使用但未定义的变量。

```
import httplib
from scrapy.spider import BaseSpider
from scrapy.http import TextResponse

bs = BaseSpider('some')
# etc 
```

# graph - 如何找到分离一些节点对的整体最小切割

> ID：13944024
> 
> 赞同：0
> 
> 时间：2012-12-19T00:59:42.400
> 
> 标签：graph

众所周知，现在有有效的算法可以在有向图中找到整体最小割，例如 Hao 和 Orlin (1994)。

现在我的问题是找到一个整体最小切割，只分离一些给定的节点对，而不是所有的节点对。例如，我有一个 8 节点有向图，每个弧上都有容量，并且想要找到分隔 8 和 1、6 和 3、7 和 1 的最小割。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:03:31.510

您想解决*最小多割问题*，这是 NP-Hard，但在文献中也进行了广泛研究。例如[http://scholar.google.be/scholar?q=minimum+multicut+directed+graph&btnG=&lr=](http://scholar.google.be/scholar?q=minimum+multicut+directed+graph&btnG=&lr=)

# xamarin.ios - 在 Monotouch 中将参数传递给 SetAnimationDidStopSelector

> ID：13944026
> 
> 赞同：1
> 
> 时间：2012-12-19T00:59:48.967
> 
> 标签：xamarin.ios, core-animation

我正在使用一些动画并希望在动画完成后调用一个方法。如果我这样设置方法，一切都很好。但是如果我想传入一个参数，我应该如何设置选择器呢？：

```
UIView.SetAnimationDidStopSelector (new Selector("EndItAll")); 
```

IE：

```
[Export]
public void EndItAll(string myValue)
{
... 
```

如果使用块动画更容易做到这一点，我也很乐意使用它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T04:50:28.620

你试图达到什么目标？您可以将参数存储为局部变量吗？

或者您可以使用带闭包的块动画：

```
var myValue = "someValue";
UIView.Animate (
    duration,
    () => /* your animation code */,
    () => Console.WriteLine (myValue)
); 
```

# ruby-on-rails-3 - Rails如何在索引文件中编写Bootstrap popover

> ID：13944031
> 
> 赞同：0
> 
> 时间：2012-12-19T01:00:34.007
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我有一个以 Rails 形式工作的 Bootstrap 弹出窗口：

```
 <%= f.input :r_desc, :label => 'Description', :input_html => {:rows =>   '10', :class => "span8", "data-content" => 'Uses Textile styling', "data-title" =>   'TEXTILE'} %> 
```

它使用 :input_html 来放置弹出框内容。

但是，如何将一个写入 Rails 索引行？

```
 <td><%= screencast.desc  %></td> 
```

我想将此添加到 screencast.desc：

```
rel="popover" data-content="<%= screencast.desc %>" data-original-title="Description"> 
```

但是，我不确定如何将该代码放入 screencast.desc 显示代码中。

谢谢！

更新 ----- 这行得通 - 但是，这不是我想要的。它将数据字段变成一个按钮。

```
 <td><a href="#" class="btn btn-large" rel="popover" data-content="<%= screencast.desc %>" data-original-title="Description"><%= screencast.title %></a></td> 
```

更新 2 ---- 这有效！

```
 <td><a rel="popover" data-content="<%= screencast.desc %>" data-original-title="Description"><%= screencast.title %></a></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:54:11.147

这有效：

```
 <td><a rel="popover" data-content="<%= screencast.desc %>" data-original-title="Description"><%= screencast.title %></a></td> 
```

# javascript - 检查图像是否已完全加载

> ID：13944032
> 
> 赞同：18
> 
> 时间：2012-12-19T01:00:35.107
> 
> 标签：javascript, jquery

我在下面找到了这个方法，它可以很好地检查图像是否已完全加载：

```
var myimg = new Image();
myimg.onload = function(){
alert("The image is now loaded");
}
myimg.src = "image url"; 
```

我的问题是：

如果`alert("The image couldn't be loaded")`由于某种原因无法加载或找到图像（例如，如果图像 URL 已损坏，甚至提供的图像 URL 中的图像不再存在），我该如何处理？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T01:02:08.230

`image nodes`还允许使用*DOM 级别 1* `onerror`事件处理程序。

```
myimg.onerror = function() {
}; 
```

如果加载或加载图像时出现任何故障，则该处理程序将被执行。除此之外，检查*onload 事件中的维度也不是一个坏主意*

```
myimg.onload = function() {
    if( this.height && this.width ) {
    } else {
        // you might want to catch this case here too
    }
} 
```

# html - HTML：调整 br 元素之间的高度

> ID：13944037
> 
> 赞同：0
> 
> 时间：2012-12-19T01:01:31.007
> 
> 标签：html, css

在给定的小提琴中，我希望第一个单词与图像顶部对齐，第二个单词在图像底部对齐。 [http://jsfiddle.net/himanshuy/W6ATN/15/](http://jsfiddle.net/himanshuy/W6ATN/15/)

我已经尝试`line-height`了`span`and元素`margin`，`br`但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:20:39.133

我重新安排了一些你的html。首先，我将 img 元素和两个 span 元素放在各自的 div 中。所以有两个内联div。我还为其中一个跨度添加了一种样式。你可以在这里看到最终结果：http: [//jsfiddle.net/W6ATN/17/](http://jsfiddle.net/W6ATN/17/)

如果小提琴失败，这里是标记：

html

```
<div class="box">
 <div class="logo">
  <div class="inlineDiv">
   <img src="c:\work\img\logo3.jpg" width="80" height="80" />
  </div>
  <div class="inlineDiv">
      <span class="spanTop">YAD</span>
      <span>HIM</span>
  </div>
 </div>
</div>​ 
```

css

```
div.box {
  background-color: #000000;
  color: #FFFFFF;
  width: 300px;
  height: 400px;
  text-align: center;    
}

img {
margin-top:20px;
}

.inlineDiv
{
 display:inline;
}

.spanTop
{
 margin-top:10px;
 position:absolute;
}

span {
 font-size: 30px;
 color: red;
 clear:both;
 line-height:45px;
} 
```

# xpath - 简化 selenium 使用的 xpath 表达式

> ID：13944038
> 
> 赞同：4
> 
> 时间：2012-12-19T01:01:56.097
> 
> 标签：xpath, selenium

我有以下从 selenium 调用的 XPath 表达式（从技术上讲，来自 splinter，它调用 selenium）：

```
//label[text()="data"]/following-sibling::div/input|//label[text()="data"]/following-sibling::div/textarea 
```

有没有办法简化这个表达式？以下在 selenium 中不起作用，尽管它似乎在[AquaPath](http://ditchnet.org/aquapath/)中起作用：

```
//label[text()="data"]/following-sibling::div/(input|textarea) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T05:46:24.770

**尝试**：

```
//label[text()="data"]/following-sibling::div/*[self::input or self::textarea] 
```

**每当有很多（超过 3 个替代项）时，这样的表达式就会大大缩短：**

```
someExpr/*[contains('|name1|name2|name3|name4|', concat('|',name(), '|'))] 
```

# android - Android webview 页面不可用

> ID：13944041
> 
> 赞同：1
> 
> 时间：2012-12-19T01:02:15.780
> 
> 标签：android, webview, webviewclient

我开发了一个小型 android webview 应用程序来访问基于 PHP 的内部（本地网络）站点。

这是我的代码：

```
package com.CheckInventory;

import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.WindowManager;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebStorage;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

@SuppressWarnings("unused")
public class CheckInventoryActivity extends Activity {
    WebView webview;
    String username; 
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        setContentView(R.layout.main);
        webview = (WebView) findViewById(R.id.webview);
        WebView webView = (WebView) findViewById(R.id.webview);
        webView.setBackgroundColor(0);
        webView.setBackgroundResource(R.drawable.myimage);
        webView.addJavascriptInterface(new JavaScriptInterface(this), "Android");
        WebSettings webSettings = webview.getSettings();
        webSettings.setLoadWithOverviewMode(true);

        webview.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

        webSettings.setJavaScriptEnabled(true);
        webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
        webSettings.setDatabasePath("/data/data/"+this.getPackageName()+"/databases/");
        webSettings.setDomStorageEnabled(true);
        webview.setWebChromeClient(new WebChromeClient());
        webview.loadUrl("http://192.168.0.124/android");
        webview.setWebViewClient(new HelloWebViewClient());

    }
    private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

    @Override
    public boolean onKeyDown (int keyCode, KeyEvent event) {
        if((keyCode == KeyEvent.KEYCODE_BACK) && webview.canGoBack()){
            //webview.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

} 
```

该站点具有身份验证，但我想在应用程序和站点之间添加一些身份验证（我该怎么做？可能在调用 url 时传递一个参数），其次，更重要的是，我具体将 onReceivedError 放在哪里如果用户离开建筑物或连接松动，他们永远不会看到 url 或页面。

```
public void onReceivedError(WebView view, int errorCod,String description, String failingUrl) {
        Toast.makeText(Webform.this, "Your Internet Connection May not be active Or " + description , Toast.LENGTH_LONG).show();
    } 
```

[我在Detecting Webview Error and Show Message](https://stackoverflow.com/questions/6392318/detecting-webview-error-and-show-message)中看到了这个解释， 但我不知道在哪里实现它。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:04:30.107

您需要创建扩展 WebViewClient 并实现方法**OnReceivedError的类**

像这样

```
class myWebClient extends WebViewClient {

    @Override
    public void onReceivedError(WebView view, int errorCode,
            String description, String failingUrl) {
        Toast.makeText(Webform.this, "Your Internet Connection May not be active Or " + description , Toast.LENGTH_LONG).show();
        super.onReceivedError(view, errorCode, description, failingUrl);
    }

} 
```

然后您需要将新的 WebViewClient 设置为您的 WebView

```
 web = (WebView) findViewById(R.id.webview);
    web.setWebViewClient(new myWebClient()); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-25T12:46:57.187

您可以添加`onReceivedError`您的`HelloWebViewClient`课程并在遇到错误时处理您想要处理的内容。

```
private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }

        @Override
        public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error){
           //Your code to do
        Toast.makeText(getActivity(), "Your Internet Connection May not be active Or " + error , Toast.LENGTH_LONG).show();
        }
    } 
```

# legacy-code - 将 POST 请求从 HttpClient 升级到 HttpComponents。这里出了什么问题？

> ID：13944047
> 
> 赞同：2
> 
> 时间：2012-12-19T01:03:04.060
> 
> 标签：legacy-code, apache-httpcomponents

我继承了一些使用现已弃用的 Apache Commons HttpClient 的旧代码。我的任务是升级它以使用更新的 Apache HttpComponents。但是，我似乎无法让这个 POST 请求正常运行。服务器一直在抱怨`Content-Length = 0`。我相当确定这是我转换参数添加方式的问题。

旧的 HttpClient 代码如下所示：

```
PostMethod postMethod = null;
int responseCode = 0;
try{
    HttpClient httpClient = new HttpClient();
    postMethod = new PostMethod(getServiceUrl()); //The url, without a query.
    ...
    postMethod.addParameter(paramName, request);

    responseCode = httpClient.executeMethod(postMethod);
    ...
} 
```

这是我的 HttpComponents 替代品：

```
HttpPost postMethod = null;
int responseCode = 0;
HttpResponse httpResponse = null;
try{
    HttpClient httpClient = new DefaultHttpClient();
    postMethod = new HttpPost(getServiceUrl()); //The url, without a query.
    ...
    BasicHttpParams params = new BasicHttpParams();
    params.setParameter(paramName, request);
    postMethod.setParams(params);

    httpResponse = httpClient.execute(postMethod);
    responseCode = httpResponse.getStatusLine().getStatusCode();
    ...
} 
```

我与之交谈的代码的 servlet 正在使用 Apache Commons FileUpload。这是它收到我的请求时捕获的代码：

```
ServletRequestContext src = new ServletRequestContext(request);
if (src.getContentLength() == 0)
    throw new IOException("Could not construct ServletRequestContext object"); 
```

它曾经很好地通过了这个测试。现在没有了。我尝试了各种替代方法，例如使用标头或`request`作为 URLEncoded 查询传递。我在某个地方的升级中犯了错误吗？

注意：我不能只更改 servlet 接收我的请求的方式，因为那样我将不得不更改许多与之对话的其他应用程序，而这是一项太大的工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:41:58.470

要设置请求正文，可以使用 HttpPost 的 setEntity() 方法。[您可以在此处](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpEntity.html)探索可用的实体类型。这将替换 BasicHttpParams 代码。

发送表单实体，例如：

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("http://someurl");
List<NameValuePair> formParams = new ArrayList<NameValuePair>();
formParams.add(new BasicNameValuePair("name", "value"));
UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(formParams, "UTF-8");
httpPost.setEntity(formEntity);
HttpResponse httpResponse = client.execute(httpPost); 
```

# android - Android 九补丁绘图中红色的含义

> ID：13944050
> 
> 赞同：21
> 
> 时间：2012-12-19T01:03:09.980
> 
> 标签：android, nine-patch

根据[Android文档](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)，我们知道左上黑线定义了可拉伸区域，下黑线定义了内容区域。

这很容易理解，但我从 android-17 框架中找到了下面名为 textfield_activated_holo_dark.9.png 的图像。左下角、右下角和右上角的红色的用途是什么？

![在此处输入图像描述](../Images/96af3dc05964249900c230f7a68a17c9.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T17:11:47.667

它太支持布局边界。

有关详细信息，请参阅[https://groups.google.com/d/msg/adt-dev/z_iLJWyDQdo/lf4sR6CRl2cJ](https://groups.google.com/d/msg/adt-dev/z_iLJWyDQdo/lf4sR6CRl2cJ)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T01:35:21.960

我相信[这个](https://stackoverflow.com/questions/11406521/android-9-patch-tool-what-is-the-new-layout-bounds-feature/11854891#11854891)线程对同一主题有一些讨论。

这与设置布局边界有关，我相信它还没有记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-09T02:08:44.557

红线是您如何定义九个补丁上的光学边界。此功能已在 Android 4.3 中正式添加，但迄今为止，支持库中仍未提供此功能。在 4.3 发行说明中阅读更多关于它们的信息：

[http://developer.android.com/about/versions/android-4.3.html#UI](http://developer.android.com/about/versions/android-4.3.html#UI)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-22T16:22:56.357

如果您使用的是光学边界，您应该考虑到 gradle 0.9.1 插件引入的一个小错误，对于本问题报告中的第一个解决方法：[https ://code.google.com/p/android/issues /detail?id=67376](https://code.google.com/p/android/issues/detail?id=67376)在此您可以看到使用 gradle 插件 0.9.1 会使 PNG 在 GB 上崩溃，并且它指出解决方法是改用 0.9.0。但这也不是很好，在 0.9.1 的发行说明中，android 团队声明你应该使用旧的 PNG cruncher：[http ://tools.android.com/tech-docs/new-build-system](http://tools.android.com/tech-docs/new-build-system)

我已经测试了两种解决方案，并且都可以，我认为第二个更好，这是您的选择

# c - 带有 fork 的 IPC 消息队列，想知道进程是“共享”消息缓冲区还是只是复制并“显示”到另一个进程

> ID：13944055
> 
> 赞同：1
> 
> 时间：2012-12-19T01:03:50.130
> 
> 标签：c, fork, ipc, message-queue

我是学生，正在用 C 语言中的 fork() 进行多进程矩阵乘法编程。

但是当我这样做时，我对我们何时将 IPC 与 MESSAGE QUEUE 一起使用有疑问，然后，如果我把

```
struct message_buffer{
long mtype;
int result[100][100];
} 
```

像这样，我知道这效率不高，因为空间一直作为消息被复制但是......我认为这是所有进程可以共享结果表的唯一方法......（还有其他方法吗？）

无论如何，如果我这样放置结果数组表，那么在内存位置创建结果表？？...

他们在内核位置创建位置并真正“共享”该位置，但将抽象作为消息？

或者

消息缓冲区是在一个主进程中创建的，不共享，而只是复制并显示给另一个进程。

请给我一个小费:'(真的很想知道....

如果他们不共享消息缓冲区，那么我怎样才能让进程“共享”共同的地方？

谢谢你......

# jquery - 谷歌地图信息框和 jQuery

> ID：13944058
> 
> 赞同：0
> 
> 时间：2012-12-19T01:04:24.887
> 
> 标签：jquery, infobox

我正在使用信息框来显示一些与标记相关的数据。数据包含 html 代码，特别是带有 class 的 div `test`。

奇怪的是，我似乎无法访问此 html 代码，因为以下代码不起作用：

```
 $(".test").live("hover", function(){
      alert("hover");
  }); 
```

我要强调的是，确切的代码可以在 InfoWindow 中正常工作。我还可以确认显示了完整的 html，因为我可以使用 FireBug 看到它。

我知道它`live()`已经贬值了，但我正在使用旧的 jQuery 版本。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:10:49.837

知道了！

我必须在 InfoBox 选项中设置 enableEventPropagation: true 。

谢谢！

# c++ - 如何检查多维数组中的char是否等于const char？

> ID：13944063
> 
> 赞同：-2
> 
> 时间：2012-12-19T01:04:47.383
> 
> 标签：c++, arrays, char

我认为标题使其不言自明。实际的代码很长，但这里有一个我认为与问题相匹配的例子。

```
#include <iostream>
 using namespace std;

 char multiDArray [5][5];
 multiDarray[1][2] = 'x';
 char barrier = 'x';
 int main () {
  if (multiDArray[1][2] == barrier) {
    cout << "It works". }
  } 
```

这不会给我一个错误，但是当我运行程序时没有任何反应。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:12:50.423

我已经修改了您提供的代码，以便它编译：

```
#include <iostream>
using namespace std;

char multiDArray [5][5];
char barrier = 'x';

int main ()
{
    multiDArray[1][2] = 'x';
    if (multiDArray[1][2] == barrier) {
        cout << "It works";
    }
    return 0;
} 
```

您会在此处 ( [http://ideone.com/MFn9yM](http://ideone.com/MFn9yM) ) 看到它确实有效。

**输出：**

> 有用

您可能在较大的程序中看不到任何输出，因为您没有刷新输出缓冲区（使用`std::flush`或包含换行符）。

# python - 通过 os.system 将变量从 python 传递到 bash shell 脚本

> ID：13944076
> 
> 赞同：8
> 
> 时间：2012-12-19T01:06:58.543
> 
> 标签：python, bash

在以下代码中，我构造了一个变量 $probe1，然后将其传递给 bash 脚本。在下面的玩具示例中，输出为空白，即 $probe1 无法识别 os.system 调用中的 bash shell 脚本。需要做什么？

```
for line1 in datfile:
    datmat=datmat+[line1.rstrip('\n').split('\t')]
        probe=datmat[i][0]
        snp1=datmat[i][2]
    probe1='permprobes'+probe+'pheno.pphe'
    os.system('echo $probe1') 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T01:14:01.743

似乎这就是你想要做的：

```
In [2]: os.environ['probe1'] = 'hello'

In [3]: os.system('echo $probe1')
hello 
```

但我不知道你为什么要这样做......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T01:09:30.187

```
os.system('echo {0}'.format(probe1)) 
```

probe1 是一个 python 变量，而不是一个 shell 变量。

```
os.environ['probe1'] = probe1 
```

将 bash 环境变量设置为 python 变量内容。但是，一旦 python 脚本退出，环境变量就会消失。

# r - 连接数据框的行

> ID：13944078
> 
> 赞同：43
> 
> 时间：2012-12-19T01:07:34.680
> 
> 标签：r, vector, concatenation, paste, r-factor

我想获取一个带有字符和数字的数据框，并将每一行的所有元素连接成一个字符串，该字符串将作为单个元素存储在向量中。例如，我制作了一个字母和数字的数据框，然后我想通过粘贴函数连接第一行，并希望返回值“A1”

```
df <- data.frame(letters = LETTERS[1:5], numbers = 1:5)
df

##   letters numbers
## 1       A       1
## 2       B       2
## 3       C       3
## 4       D       4
## 5       E       5

paste(df[1,], sep =".")
## [1] "1" "1" 
```

因此 paste 将行中的每个元素转换为与“相应级别的索引”相对应的整数，就好像它是一个因子一样，并将其保持为长度为 2 的向量。（我知道/相信被强制为字符的因素以这种方式表现，但由于 R 根本没有将 df[1,] 存储为一个因素（由 is.factor() 测试，我无法验证它实际上是一个级别的索引）

```
is.factor(df[1,])
## [1] FALSE
is.vector(df[1,])
## [1] FALSE 
```

因此，如果它不是向量，那么它的行为很奇怪是有道理的，但我不能将它强制转换为向量

```
> is.vector(as.vector(df[1,]))
[1] FALSE 
```

使用`as.character`似乎对我的尝试没有帮助

谁能解释这种行为？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-19T01:32:54.033

当其他人专注于为什么您的代码不起作用以及如何改进它时，我将尝试更多地关注获得您想要的结果。根据您的描述，您似乎可以使用粘贴轻松实现您想要的效果：

```
df <- data.frame(letters = LETTERS[1:5], numbers = 1:5, stringsAsFactors=FALSE)
paste(df$letters, df$numbers, sep=""))

## [1] "A1" "B2" "C3" "D4" "E5" 
```

如果您不想使用该参数，您可以更改`df$letters`为使用字符。`df$letters <- as.character(df$letters)``stringsAsFactors`

但是让我们假设这不是你想要的。假设您有数百列，并且您想将它们全部粘贴在一起。我们也可以使用您的最小示例来做到这一点：

```
df_args <- c(df, sep="")
do.call(paste, df_args)

## [1] "A1" "B2" "C3" "D4" "E5" 
```

### 编辑：替代方法和解释：

我意识到您遇到的问题是您正在使用一个因素和您正在使用`sep`参数而不是`collapse`（正如@adibender 拾取的那样）这一事实的组合。不同之处在于`sep`给出两个独立向量之间的分隔符并`collapse`给出向量内的分隔符。当你使用 时`df[1,]`，你提供了一个向量`paste`，因此你必须使用`collapse`参数。使用您获取每一行并将它们连接起来的想法，以下代码行将完全符合您的要求：

```
apply(df, 1, paste, collapse="") 
```

好的，现在进行解释：

**为什么`as.list`行不通？**

`as.list`将对象转换为列表。所以它确实有效。它会将您的数据框转换为列表，然后忽略该`sep=""`参数。`c`将对象组合在一起。从技术上讲，数据框只是一个列表，其中每一列都是一个元素，所有元素必须具有相同的长度。因此，当我将它与 结合使用时`sep=""`，它就变成了一个常规列表，其中数据框的列作为元素。

**为什么使用`do.call`？**

`do.call`允许您使用命名列表作为其参数调用函数。您不能直接将列表放入`paste`，因为它不喜欢数据框。它是为连接向量而设计的。所以请记住，这`dfargs`是一个包含字母向量、数字向量和 sep 的列表，它是一个长度为 1 的向量，仅包含“”。当我使用`do.call`时，产生的粘贴功能本质上是`paste(letters, numbers, sep)`.
但是，如果我的原始数据框有列`"letters", "numbers", "squigs", "blargs"`，然后我像以前一样添加分隔符怎么办？然后粘贴功能`do.call`看起来像：

```
paste(letters, numbers, squigs, blargs, sep) 
```

所以你看到它适用于任意数量的列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-11T19:04:28.873

对于那些使用`library(tidyverse)`，您可以简单地使用该`unite`功能。

```
 new.df <- df%>%
 unite(together, letters, numbers, sep="") 
```

这将为您提供一个名为`together`A1、B2 等的新列。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T01:28:41.200

这确实有点奇怪，但这也是应该发生的事情。当您像以前一样创建`data.frame`时，列`letters`存储为`factor`. 自然因素没有排序，因此当`as.numeric()`应用于一个因素时，它返回因素的排序。例如：

```
> df[, 1]
[1] A B C D E
Levels: A B C D E
> as.numeric(df[, 1])
[1] 1 2 3 4 5 
```

`A`是因子的第一级，`df[, 1]`因此在应用时`A`转换为值。这就是你打电话时发生的事情。由于第 1 列和第 2 列属于不同的类别，因此 paste 首先将第 1 行的两个元素转换为数字，然后再转换为字符。`1``as.numeric``paste(df[1, ])`

当您想连接两列时，您首先需要将第一行转换为字符：

```
df[, 1] <- as.character(df[, 1])
paste(df[1,], collapse = "") 
```

正如@sebastian-c 指出的那样，您也可以`stringsAsFactors = FALSE`在创建data.frame 时使用，然后您可以省略该`as.character()`步骤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-19T09:36:48.597

如果你想开始

```
df <- data.frame(letters = LETTERS[1:5], numbers = 1:5, stringsAsFactors=TRUE) 
```

..那么没有关于 `df$letters`任何给定函数将如何解释的一般规则。它是建模函数的一个因素，一些是字符，另一些是整数。即使是相同的函数（例如 paste）也可能会根据您的使用方式对它进行不同的解释：

```
paste(df[1,], collapse="") # "11"
apply(df, 1, paste, collapse="") # "A1" "B2" "C3" "D4" "E5" 
```

它没有任何逻辑，只是一旦你了解了每个函数的内部结构，它可能就会有意义。

当参数转换为向量时，因子似乎被转换为整数（如您所知，数据帧是等长向量的列表，因此数据帧的第一行也是一个列表，并且当它被强制为一个向量，会发生这样的事情:)

```
df[1,]
#    letters numbers
# 1       A       1
unlist(df[1,])
# letters numbers 
#  1       1 
```

我不知道`apply`它是如何实现的（即，因子由字符值表示）——如果您有兴趣，请查看它的源代码。但是，知道您可以信任（在这个特定的意义上）`apply`（在这个特定的场合）可能会很有用。更一般地说，以合理的格式存储每条数据是有用的，包括将字符串存储为字符串，即使用`stringsAsFactors=FALSE`.

顺便说一句，每本介绍性的 R 书都应该在副标题中包含这个想法。例如，我的退休计划是写“用 R，stringsAsFactors=FALSE 方式对数据渔业禅宗的一个（不是那么）温和的介绍”。

# php - 当 sql 查询不返回任何内容时，Codeigniter 活动记录语句未运行

> ID：13944081
> 
> 赞同：7
> 
> 时间：2012-12-19T01:07:43.273
> 
> 标签：php, mysql, codeigniter, activerecord

我似乎对下面的代码有问题。当查询不返回任何内容时，我无法运行插入查询。但是当db中有一行时，else语句运行正确。有谁知道为什么会发生这种情况？

```
$query5 = $this->db->get_where('loggedstatus', array('userid_loggedstatus' => $userid));

if ($query5->num_rows() < 0) {
    $data1 = array('isLoggedIn_loggedstatus' => 'yes', 'userid_loggedstatus' => $userid);
    $this->db->insert('loggedstatus', $data1);
} else {
    $data = array('isLoggedIn_loggedstatus' => 'yes');
    $this->db->where('userid_loggedstatus', $userid);
    $this->db->update('loggedstatus', $data);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T01:11:41.747

您是否尝试过将其更改`if ($query5->num_rows() < 0) {`为类似的东西`if ($query5->num_rows() <= 0) {`，只是一个想法。这会有所作为，因为您告诉它仅在`less than zero`它可能执行的情况下才执行，`equal to zero`并且您将跳到 else 语句。

仅供`CodeIgniter` `num_rows()`参考：

```
/**
 * Number of rows in the result set
 *
 * @return  int
 */
public function num_rows()
{
    if (is_int($this->num_rows))
    {
        return $this->num_rows;
    }
    elseif (count($this->result_array) > 0)
    {
        return $this->num_rows = count($this->result_array);
    }
    elseif (count($this->result_object) > 0)
    {
        return $this->num_rows = count($this->result_object);
    }

    return $this->num_rows = count($this->result_array());
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T01:13:52.360

更改下面显示的 if 条件应该可以解决问题。

```
if ($query5->num_rows() == 0) 
```

# objective-c - UIViewcornerRadius - 什么？

> ID：13944083
> 
> 赞同：0
> 
> 时间：2012-12-19T01:08:01.607
> 
> 标签：objective-c, quartz-core, cornerradius

我熟悉层的`cornerRadius`属性`UIView`，暴露在`QuartzCore`框架中。当然，一般的经验法则是，较大的值会创建更多的圆角边缘，而较小的值会创建更少的圆角边缘。不过我很好奇，该属性被称为`cornerRadius`，我经常发现自己在问，半径是什么？我要改变半径的这个圆是什么，在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:10:35.027

想象在矩形的每个角上都有一个圆圈来构成视图。拐角的圆边沿圆弧。`cornerRadius`是那个圆的半径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:11:08.227

取矩形的 4 个角。

从角点开始，您将其传递给圆角应延伸到的长度。

这是拐角的半径，或cornerRadius。

我就是这么解释的。不知道对不对:P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T01:32:00.883

这更像是一道数学题，但上面的答案大多是正确的，只是线条不是圆形的。半径为：

> 从焦点到曲线任意点的径向线。

（来源：[牛津](http://oxforddictionaries.com/us/definition/american_english/radius)）

例如，注意一些[非圆齿轮](http://en.wikipedia.org/wiki/Non-circular_gear)的非圆曲率，它们仍然有半径。

因此，它类似于其他答案中描述的内容，但角曲线不是圆形的。如果您对曲线的方程感到好奇，只需向后做[半径方程即可。](http://en.wikipedia.org/wiki/Radius):-)

# php - 错误：文档末尾的额外内容下面是页面的呈现，直到第一个错误

> ID：13944085
> 
> 赞同：0
> 
> 时间：2012-12-19T01:08:23.370
> 
> 标签：php, html, mysql

### 确切的错误

```
This page contains the following errors:
error on line 3 at column 1: Extra content at the end of the document
Below is a rendering of the page up to the first error. 
```

### 我的 PHP 文件

```
 <?php
 header( 'Content-type: text/xml' );
 mysql_connect( "mysql3.000webhost.com", "Username", "Password" );
 mysql_select_db( 'Ddb' );
 mysql_query( "INSERT INTO items VALUES ( null, null, '".
 mysql_real_escape_string( $_REQUEST['user'] ).
 "', '".
 mysql_real_escape_string( $_REQUEST['message'] ).
 "')" );
?>
<success/> 
```

### 我的 HTML 文件（我认为这与错误无关。）

```
<html>
 <head>
  <title>Add Definition Form</title>
 </head>
 <body>
  <form action="add.php" method="POST">
    User: <input name="user" /><br />
    Message: <input name="message" /><br />
    <input type="submit" />
  </form>
 </body>
</html> 
```

### chmod 777 所有文件（我知道那很糟糕，但该网站尚未公开）。

### 如果您需要更多信息，请发表评论。

教程我正在关注[http://www.ibm.com/developerworks/library/x-ioschat/index.html#l3ioschat/index.html#l3](http://www.ibm.com/developerworks/library/x-ioschat/index.html#l3ioschat/index.html#l3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:11:00.147

完全遵循 IBM 文档中提到的要点。我在[http://nixblog.webatu.com/test.html](http://nixblog.webatu.com/test.html)上上传了一个测试页面，它可以工作。

所以不确定你做错了什么。

根据示例，数据库表插入用于表“chatitems”，您似乎正在使用“项目”。只需确保您插入的内容是正确的并且它不会显示任何数据库错误。为此，将“内容类型：文本/xml”更改为“内容类型：文本”

# jquery - 你如何使用 yii 以持久的方式显示基于下拉列表的动态代码？

> ID：13944086
> 
> 赞同：9
> 
> 时间：2012-12-19T01:08:24.530
> 
> 标签：jquery, ajax, yii

当在 yii 中更改下拉菜单时，我会渲染一些表单元素，如下所示：

```
$form->dropdownListRow($model, 'type', array('item1','item2','etc') ,
    array('ajax'=>array(
        'type'=>'POST',
        'url'=>CController::createUrl('ProfileFieldRule/showAttributes'),
        'update'=>'#showAttributes',                        
    ))
)); 
```

ProfileFieldRule/showAttributes 使用 CHtml 来呈现表单元素，这导致了我的第一个问题 - 我必须使用 opentag 等并重复在表单中完成的工作。

```
echo CHtml::openTag('div', array('class' => 'control-group '));
echo CHtml::activeLabel($attr, $name, array('class' => 'control-label'));
etc 
```

第二个问题是：如果没有更改事件（例如提交错误的表单），则不会加载动态内容。

我目前正在传递一个模型并检查它是否为空，否则执行与 ProfileFieldRule/showAttributes 中相同的渲染，例如：

```
 <div id="showAttributes">
    <?php if (isset($attr)) {
        //do the same rendering as in showAttributes
        $vars = get_class_vars(get_class($attr));
             foreach ($vars as $name => $value) {
                 //etc...
    ?>
    </div> 
```

如果我可以只调用上面的代码 onload、onchange 并且仍然可以访问 $form， 那将是*理想的。*

我对任何事情都持开放态度，那么如上所述显示和保留动态内容的最佳（或好的）解决方案是什么？

提前感谢您的任何建议。

## 编辑

这是正在发生的事情的图像[http://imgur.com/cZjRZ](http://imgur.com/cZjRZ) *注意，渲染的元素没有显示 ajax 验证（以红色/绿色突出显示），因为我对 ajax 不满意并且仍在计算*

我应该注意，我考虑过的另一个解决方案是摆脱 showAttributes，继续将两个模型传递给表单，并在更改时再次调用 create 操作。然而，当下拉列表更改时，这摆脱了以前的 ajax 验证，因为整个表单被重绘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:28:30.407

我之前也遇到过这个问题。

问题出在 .bind('change') 中，你应该使用 .live('change') 代替，在 jQuery 1.7 中，通过使用同时进行实时绑定和正常绑定的 .on() 函数解决了这个问题。令人难忘的是 Yii 没有最新的 jQuery。对于某些项目，我手动更新了 jQuery，但在中间你将不得不扩展基类来修复你会得到的 jQuery 错误。对于更直接和一次性的解决方案，您可以编写一些 js，将您的事件与元素解除绑定，然后使用 .live() 函数重新绑定它们。但至少可以说，这有点骇人听闻。

# linux - 在红帽企业服务器 6 中运行 Firefox

> ID：13944087
> 
> 赞同：1
> 
> 时间：2012-12-19T01:08:42.400
> 
> 标签：linux, firefox

我的盒子是 redhat 64bit，我下载了 firefox-17.0.1.tar.bz2，然后尝试 rpm 并运行它。我停止这样的错误，

```
"XPCOMGlueLoad error for file /opt/firefox/libxpcom.so:
libxul.so: cannot open shared object file: No such file or directory
Couldn't load XPCOM." 
```

我寻找解决方案并学习 LD_DEBUG 是一个很棒的工具，但我无法处理结果并希望有人可以帮助我运行 firefox。

```
 [root@sun firefox]#LD_DEBUG=libs ./firefox
      5280:     find library=libpthread.so.0 [0]; searching
      5280:      search cache=/etc/ld.so.cache
      5280:       trying file=/lib/libpthread.so.0
      5280:
      5280:     find library=libdl.so.2 [0]; searching
      5280:      search cache=/etc/ld.so.cache
      5280:       trying file=/lib/libdl.so.2
      5280:
      5280:     find library=libstdc++.so.6 [0]; searching
      5280:      search cache=/etc/ld.so.cache
      5280:       trying file=/usr/lib/libstdc++.so.6
      5280:
      5280:     find library=libm.so.6 [0]; searching
      5280:      search cache=/etc/ld.so.cache
      5280:       trying file=/lib/libm.so.6
      5280:
      5280:     find library=libgcc_s.so.1 [0]; searching
      5280:      search cache=/etc/ld.so.cache
      5280:       trying file=/lib/libgcc_s.so.1
      5280:
      5280:     find library=libc.so.6 [0]; searching
      5280:      search cache=/etc/ld.so.cache
      5280:       trying file=/lib/libc.so.6
      5280:
      5280:
      5280:     calling init: /lib/libpthread.so.0
      5280:
      5280:
      5280:     calling init: /lib/libc.so.6
      5280:
      5280:
      5280:     calling init: /lib/libgcc_s.so.1
      5280:
      5280:
      5280:     calling init: /lib/libm.so.6
      5280:
      5280:
      5280:     calling init: /usr/lib/libstdc++.so.6
      5280:
      5280:
      5280:     calling init: /lib/libdl.so.2
      5280:
      5280:
      5280:     initialize program: ./firefox
      5280:
      5280:
      5280:     transferring control: ./firefox
      5280:
      5280:
      5280:     calling init: /opt/firefox/libnspr4.so
      5280:
      5280:
      5280:     calling init: /opt/firefox/libplc4.so
      5280:
      5280:
      5280:     calling init: /opt/firefox/libplds4.so
      5280:
      5280:
      5280:     calling init: /opt/firefox/libnssutil3.so
      5280:
      5280:
      5280:     calling init: /opt/firefox/libnss3.so
      5280:
      5280:
      5280:     calling init: /opt/firefox/libsmime3.so
      5280:
      5280:
      5280:     calling init: /opt/firefox/libssl3.so
      5280:
      5280:
      5280:     calling init: /opt/firefox/libmozsqlite3.so
      5280:
      5280:
      5280:     calling init: /opt/firefox/libmozalloc.so
      5280:
      5280:     find library=libXrender.so.1 [0]; searching
      5280:      search cache=/etc/ld.so.cache
      5280:      search path=/lib/tls/i686/sse2:/lib/tls/i686:/lib/tls/sse2:/lib/tls:/lib/i686/sse2:/lib/i686:/lib/sse2:/lib:/usr/lib/tls/i686/sse2:/usr/lib/tls/i686:/usr/lib/tls/sse2:/usr/lib/tls:/usr/lib/i686/sse2:/usr/lib/i686:/usr/lib/sse2:/usr/lib                (system search path)
      5280:       trying file=/lib/tls/i686/sse2/libXrender.so.1
      5280:       trying file=/lib/tls/i686/libXrender.so.1
      5280:       trying file=/lib/tls/sse2/libXrender.so.1
      5280:       trying file=/lib/tls/libXrender.so.1
      5280:       trying file=/lib/i686/sse2/libXrender.so.1
      5280:       trying file=/lib/i686/libXrender.so.1
      5280:       trying file=/lib/sse2/libXrender.so.1
      5280:       trying file=/lib/libXrender.so.1
      5280:       trying file=/usr/lib/tls/i686/sse2/libXrender.so.1
      5280:       trying file=/usr/lib/tls/i686/libXrender.so.1
      5280:       trying file=/usr/lib/tls/sse2/libXrender.so.1
      5280:       trying file=/usr/lib/tls/libXrender.so.1
      5280:       trying file=/usr/lib/i686/sse2/libXrender.so.1
      5280:       trying file=/usr/lib/i686/libXrender.so.1
      5280:       trying file=/usr/lib/sse2/libXrender.so.1
      5280:       trying file=/usr/lib/libXrender.so.1
      5280:
      5280:     find library=libxul.so [0]; searching
      5280:      search cache=/etc/ld.so.cache
      5280:      search path=/lib/i686:/lib:/usr/lib            (system search path)
      5280:       trying file=/lib/i686/libxul.so
      5280:       trying file=/lib/libxul.so
      5280:       trying file=/usr/lib/libxul.so
      5280:
      5280:     find library=libxul.so [0]; searching
      5280:      search cache=/etc/ld.so.cache
      5280:      search path=/lib/i686:/lib:/usr/lib            (system search path)
      5280:       trying file=/lib/i686/libxul.so
      5280:       trying file=/lib/libxul.so
      5280:       trying file=/usr/lib/libxul.so
      5280:
XPCOMGlueLoad error for file /opt/firefox/libxpcom.so:
libxul.so: cannot open shared object file: No such file or directory
      5280:     ./firefox: error: symbol lookup error: undefined symbol: NS_GetFrozenFunctions (fatal)
      5280:
      5280:     calling fini: /opt/firefox/libmozalloc.so [0]
      5280:
      5280:
      5280:     calling fini: /opt/firefox/libmozsqlite3.so [0]
      5280:
      5280:
      5280:     calling fini: /opt/firefox/libssl3.so [0]
      5280:
      5280:
      5280:     calling fini: /opt/firefox/libsmime3.so [0]
      5280:
      5280:
      5280:     calling fini: /opt/firefox/libnss3.so [0]
      5280:
      5280:
      5280:     calling fini: /opt/firefox/libnssutil3.so [0]
      5280:
      5280:
      5280:     calling fini: /opt/firefox/libplds4.so [0]
      5280:
      5280:
      5280:     calling fini: /opt/firefox/libplc4.so [0]
      5280:
      5280:
      5280:     calling fini: /opt/firefox/libnspr4.so [0]
      5280:
Couldn't load XPCOM.
      5280:
      5280:     calling fini: ./firefox [0]
      5280:
      5280:
      5280:     calling fini: /lib/libpthread.so.0 [0]
      5280:
      5280:
      5280:     calling fini: /lib/libdl.so.2 [0]
      5280:
      5280:
      5280:     calling fini: /usr/lib/libstdc++.so.6 [0]
      5280:
      5280:
      5280:     calling fini: /lib/libm.so.6 [0]
      5280:
      5280:
      5280:     calling fini: /lib/libgcc_s.so.1 [0]
      5280:
      5280:
      5280:     calling fini: /lib/libc.so.6 [0]
      5280: 
```

那么我的问题是什么以及如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-04T10:01:51.067

我们需要安装*libdbus-glib-1-2*包。

`yum install libdbus-glib-1-2 -y`

完毕。我再次尝试重新启动 Mozilla Firefox

# game-maker - 游戏窗口中的多个“窗格”

> ID：13944096
> 
> 赞同：0
> 
> 时间：2012-12-19T01:09:50.823
> 
> 标签：game-maker

我想有多个“窗格”或我的游戏窗口的部分。第 1 部分将是跟随玩家的视图。我玩过视图，当然，它们是同一个“房间”的不同视图。我可以使用视图然后用精灵或矩形覆盖视图 2,3 和 4，但似乎应该有一种更有效的方法来做到这一点。

想法或建议？

![布局](../Images/8dec79fbb1248a845b9d82d49f9af579.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T18:10:33.250

啊，我们在游戏开发的某个阶段都会遇到的问题。如何制作HUD？

这是我的窍门：

*   例如，创建一个对象，`obj_HUD`其唯一功能是绘制 HUD
*   将深度设置为 -100 之类的值，以便将 HUD 绘制在其他所有内容**之上**
*   在房间中放置一个实例

**让我们首先在create 事件**中初始化一些变量：

```
//CREATE EVENT
depth = -100;
width_pane2 = 150;
height_pane2 = 300;
width_pane3 = 500;
height_pane3 = 120;
width_pane4 = 120;
// Set the above values according to your needs 
```

现在，对于**step 事件**：

```
//STEP EVENT
x = view_xview;
y = view_yview;  //Just for simplifying the code in draw event 
```

这是您需要添加到**draw 事件**的代码`obj_HUD`：

```
//DRAW EVENT
draw_rectangle(x , y , x+width_pane2 , y+height_pane2 , false);
draw_rectangle(x , y+view_hview-height_pane3 , x+width_pane3 , y+view_hview , false);
draw_rectangle(x+view_wview-width_pane4 , y , x+view_wview , y+view_hview , false); 
```

如果您需要使这些透明，请在绘制任何内容之前将 alpha 的值设置为小于 1，然后在绘制完所有内容后将其恢复为 1。

```
//DRAW EVENT (TRANSPARENT HUD)    
draw_set_alpha(0.6);
draw_set_color(c_black);
draw_rectangle(x , y , x+width_pane2 , y+height_pane2 , false);
draw_rectangle(x , y+view_hview-height_pane3 , x+width_pane3 , y+view_hview , false);
draw_rectangle(x+view_wview-width_pane4 , y , x+view_wview , y+view_hview , false);
draw_set_alpha(1); 
```

那应该可以解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:38:03.087

如果您使用 Game Maker: Studio

您可以使用 (Draw GUI) 事件，它会在所有内容之上绘制，但按钮可能不会与此

如果您不使用 Game Maker: Studio

视图很可能是您最好的选择。

# git - Git rebase - 删除一些已推送到远程存储库的提交

> ID：13944097
> 
> 赞同：0
> 
> 时间：2012-12-19T01:10:05.870
> 
> 标签：git, git-rebase, git-remote

我编写了一个限时功能，该功能已合并到 master 并交付生产。现在时间到了，我想从代码库中删除包含该功能的提交。

通常我会做一个`git rebase -i`并删除提交。

但是，这些提交已经被推送到远程存储库，所以当我在本地 rebase 并尝试推送分支时，我会抱怨我的分支的尖端是如何落后的，并且可以快速转发。

有没有办法从变基生成“新提交”，以撤消我不想要的提交？我并不真正关心拥有“干净”的提交历史，任何撤销这些提交的方法都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:12:41.500

您必须将`git push --force`您的分支转移到任何远程，因为默认情况下`push`拒绝重写历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:34:19.693

如果您只是想摆脱功能（而不是功能的历史）并且它都包含在一些特定的提交中（不影响其他功能），那么[`git revert`](http://schacon.github.com/git/git-revert.html)可能是您的答案。

这并不总是一个很好用的选项（例如，提交可能包含您不想删除的其他功能），或者您可能有一些令人信服的理由想要删除任何功能的痕迹，但这是一个方便的命令意识到。

# oracle - 如何从多条记录和表中选择结果到一行

> ID：13944099
> 
> 赞同：0
> 
> 时间：2012-12-19T01:10:11.663
> 
> 标签：oracle, select, plsql, oracle11g

我有一个包含多个代码和 ID 值的特征表，以及一个查找表，其中包含每个代码和值的相应描述。我想从两个表中选择一个 ID、descr1、descr2，其中第一个 descr 用于一个查找代码/值对，而 descr 用于另一个。例如：

```
Table1
ID   Code    Value
1    Color   1
1    Tone    4
1    Type    Poor
2    Color   3
2    Tone    4

Table2
Code   Value  Descr
Color  1      Red
Color  2      Blue
Color  3      Yellow
Tone   4      Clear
Type   Good   Used, but good condition
Type   New    New
Type   Poor   Used, poor condition 
```

我希望能够查询 ID 1 并获取颜色和类型，因此获得类似的记录

```
ID   Color   Type
1    Red     Used, poor condition 
```

我可以得到其中一个，但我未能在同一行中获得第二个

```
select t1.ID, t2.Descr as Color
from Table1 t1
join Table2 t2
  on t1.Code = t2.Code
 and t1.Value = t2.Value
where t1.ID = 1
and t1.Code = (select t2b.Code
                 from Table2 t2b
                where t1.Code = t2b.Code
                  and t1.Value = t2b.Value
                  and t1.Value = 'Color') 
```

我想我做错了，我一直在寻找——我确定这个问题已经被问过了，但我没有找到。有时，您需要知道查询类型中使用的单词才能找到有关您尝试执行的操作的帮助。

**更新** 我结合了 GKV 和 knagaev 的答案，因为 max 和 case 一起给了我想要的东西。这给了我想要的东西：

```
select t1.ID
      ,max((case when t1.Code='Color' then t2.Descr else null end)) as Color
      ,max((case when t1.Code='Type' then t2.Descr else null end)) as Type
from Table1 t1,Table2 t2
where t1.Code = t2.Code and t1.Value = t2.Value
  and   t1.ID = 1
group by t1.ID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:24:08.680

只需简单的连接和字符串连接就可以完成这项工作。有点像这样

```
 select t1.ID
    ,wm_concat(case when t1.Code='Color' then t2.Descr else null end) as Color
    ,wm_concat(case when t1.Code='Type' then t2.Descr else null end) as Type
    from Table1 t1,Table2 t2
    where t1.Code = t2.Code and t1.Value = t2.Value
      and   t1.ID = 1
    group by t1.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:07:55.640

仅使用“标准”oracle SQL

```
select t1.id,
  max(decode (t1.code, 'Color', t2.descr, null)) color,
  max(decode (t1.code, 'Tone', t2.descr, null)) tone,
  max(decode (t1.code, 'Type', t2.descr, null)) type
from table1 t1, table2 t2
where t1.code = t2.code
  and t1.value = t2.value
  and t1.id = 1
group by t1.id 
```

[SQLFiddle](http://www.sqlfiddle.com/#!4/f016e/3)

# javascript - JQuery/Javascript：检查 var 是否存在

> ID：13944100
> 
> 赞同：76
> 
> 时间：2012-12-19T01:10:32.280
> 
> 标签：javascript, jquery, variables

> **可能重复：**
> [如何检查变量是否在 JavaScript 中定义？](https://stackoverflow.com/questions/519145/how-can-i-check-whether-a-variable-is-defined-in-javascript)
> [是否有标准函数来检查 JavaScript 中的 null、未定义或空白变量？](https://stackoverflow.com/questions/5515310/is-there-a-standard-function-to-check-for-null-undefined-or-blank-variables-in)

我有一个分为两部分的脚本。

第一部分设置一个 var：

```
var pagetype = "textpage"; 
```

第二部分是一个简单的 if 语句：

```
if(pagetype == "textpage") {
//do something
}; 
```

现在第二部分 if 语句出现在我网站的所有页面上。但是声明 var 的第一部分仅出现在我的某些页面上。

在没有 var 的页面上，我自然会收到此错误：

```
Uncaught ReferenceError: pagetype is not defined 
```

所以我的问题是：有没有办法用 JavaScript 或 JQ 来检测一个 var 是否存在（不仅仅是它是否有数据分配给它）？

我想我会使用另一个 if 语句，例如：

```
if ("a var called pagetypes exists").... 
```

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-12-19T01:11:40.170

我怀疑SO上有很多这样的答案，但你去吧：

```
if ( typeof pagetype !== 'undefined' && pagetype == 'textpage' ) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-19T01:11:47.310

您可以使用`typeof`：

```
if (typeof pagetype === 'undefined') {
    // pagetype doesn't exist
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-19T01:42:29.123

对于您的情况，99.9% 的其他`elclanrs`答案都是正确的。

但是因为`undefined`是一个有效值，如果有人要测试一个未初始化的变量

```
var pagetype; //== undefined
if (typeof pagetype === 'undefined') //true 
```

确定 var 是否存在的唯一 100% 可靠方法是捕获异常；

```
var exists = false;
try { pagetype; exists = true;} catch(e) {}
if (exists && ...) {} 
```

但我永远不会这样写

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-19T01:22:52.193

要测试是否存在，有两种方法。

一种。`"property" in object`

此方法检查原型链是否存在属性。

湾。`object.hasOwnProperty( "property" )`

此方法不会沿着原型链检查属性是否存在，它必须存在于您正在调用该方法的对象中。

```
var x; // variable declared in global scope and now exists

"x" in window; // true
window.hasOwnProperty( "x" ); //true 
```

如果我们使用以下表达式进行测试，那么它将返回 false

```
typeof x !== 'undefined'; // false 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-19T01:25:17.047

在每个条件语句之前，您可以执行以下操作：

```
var pagetype = pagetype || false;
if (pagetype === 'something') {
    //do stuff
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-19T01:32:00.463

除了使用 try..catch 如果尚未声明变量，则无法确定变量是否已声明。测试如下：

```
if (typeof varName == 'undefined') 
```

不要告诉你是否`varName`是范围内的变量，只有使用 typeof 的测试返回未定义。例如

```
var foo;
typeof foo == 'undefined'; // true
typeof bar == 'undefined'; // true 
```

在上面，你不能说 foo 被声明但 bar 没有。您可以使用以下方法测试全局变量`in`：

```
var global = this;
...
'bar' in global;  // false 
```

但是全局对象是您可以访问的唯一变量对象*，您无法访问任何其他执行上下文的变量对象。

解决方案是始终在适当的上下文中声明变量。

*   全局对象并不是真正的变量对象，它只是具有匹配全局变量并提供对它们的访问的属性，因此它看起来就是一个。

# user-controls - 使用 winrt 用户控件如何根据依赖属性动态创建控件

> ID：13944102
> 
> 赞同：0
> 
> 时间：2012-12-19T01:10:39.867
> 
> 标签：user-controls, windows-runtime, custom-controls, dependency-properties

我正在尝试创建一个显示图像集合的用户控件。我使用图像集合的依赖属性创建了用户控件。我可以将数据绑定到该属性并很好地显示图像。

但是，我对集合的大小进行了硬编码，我希望它能够接收任意数量的图像并显示它们。

我不确定如何根据图像集合动态创建图像。我确定有一些事件我想响应并根据依赖属性的内容创建我的图像。

```
public sealed partial class ImageView : UserControl
    {

        public ImageView()
        {
            this.InitializeComponent();

            scrollViewer.ZoomSnapPoints.Clear();
            scrollViewer.ZoomSnapPoints.Add(0.2f);
            scrollViewer.ZoomSnapPoints.Add(0.6f);
            scrollViewer.ZoomSnapPoints.Add(1.0f);
            scrollViewer.ZoomSnapPoints.Add(1.4f);
            scrollViewer.ZoomToFactor(0.4f);

        }

        public static readonly DependencyProperty ImagesProperty = DependencyProperty.Register("Images",
            typeof(List<VMImage>), typeof(ImageView), new PropertyMetadata(new List<VMImage>(12)));

        public List<VMImage> Images
        {
            get { return (List<VMImage>)GetValue(ImagesProperty); }
            set { SetValue(ImagesProperty, value); }
        }

    }

<ScrollViewer Height="700" Width="700"
                      x:Name="scrollViewer"
                      MinZoomFactor="0.2"
                      MaxZoomFactor="5.0"
                      ZoomSnapPointsType="Mandatory">

        <Canvas Background="Black" Width="2000" Height="2000" >

            <Image Canvas.Left="{Binding Images[0].Location.X}" 
                   Canvas.Top="{Binding Images[0].Location.Y}"
                   Source="{Binding Images[0].Source}" ></Image>
            <Image Canvas.Left="{Binding Images[1].Location.X}" 
                   Canvas.Top="{Binding Images[1].Location.Y}"
                   Source="{Binding Images[1].Source}" ></Image>
        </Canvas>

    </ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:09:46.360

您应该使您的依赖项属性成为`ObservableCollection<VMImage>`. 这样，您可以将处理程序附加到其`CollectionChanged`事件并获得更改通知。只需确保在依赖属性的属性更改回调中将事件处理程序添加到新值并将其从旧值中删除。

```
public static readonly DependencyProperty ImagesProperty = DependencyProperty.Register("Images",
    typeof(ObservableCollection<VMImage>), typeof(ImageView), new PropertyMetadata(null, OnImagesChanged));

public ObservableCollection<VMImage> Images
{
    get { return (ObservableCollection<VMImage>)GetValue(ImagesProperty); }
    set { SetValue(ImagesProperty, value); }
}

private static void OnImagesChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
{
    // use wrapper to pass DependencyObject to handler
    NotifyCollectionChangedEventHandler handler = (s, args) => OnCollectionChanged(target, args);
    if (e.OldValue is ObservableCollection<object>)
        (e.OldValue as ObservableCollection<object>).CollectionChanged -= handler;
    if (e.NewValue is ObservableCollection<object>)
        (e.NewValue as ObservableCollection<object>).CollectionChanged += handler;

    var imageView = target as ImageView
    if (imageView != null)
    {
        // collection has changed completely, replace all images
    }
}

static void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    var imageView = sender as ImageView;
    if (imageView != null)
    {
        if (e.OldItems != null)
        {
            // remove images
        }
        if (e.NewItems != null)
        {
            // add images
        }
    }
} 
```

# html - 骨干js追加视图

> ID：13944104
> 
> 赞同：0
> 
> 时间：2012-12-19T01:10:51.943
> 
> 标签：html, templates, view, backbone.js, render

> **可能重复：**
> [Backbone js：如何删除视图中的额外标签？](https://stackoverflow.com/questions/7663895/backbone-js-how-to-remove-extra-tag-in-view)

为什么每当我将新的主干视图附加到 HTML 元素时，它会自动用`<div> </div>`?

例如，我的 HTML 页面中有一个表格

```
<table class="table table-hover">

    <thead>
        <tr>
        <th>Column1</th>
        <th>Column2</th>
        </tr>
    </thead>

    <tbody id="tbl">    
    </tbody>

</table> 
```

现在在我的主干控制器中，我执行以下操作

```
$("#tbl").append(new tblview().render().el); 
```

在实际视图的 HTML 模板中，我有

tblview.html

```
<tr>
    <td>entry3</td>
    <td>entry4</td>
</tr> 
```

现在，当我在浏览器中查看它并检查 html 元素时，它呈现如下：

```
<table class="table table-hover">

    <thead>
        <tr>
        <th>Column1</th>
        <th>Column2</th>
        </tr>
    </thead>

    <tbody id="tbl">
        <div>
              <tr>
                <td>entry3</td>
                <td>entry4</td>
              </tr>

        </div>  
    </tbody>

</table> 
```

因此变得完全不合时宜？我该如何解决这个问题？`<div> </div>`我希望它在表格中呈现没有这些额外内容的视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:14:35.490

Backbone 自动创建一个`div`包围任何视图。要覆盖默认值，您需要`tagName`在扩展视图时设置属性。[http://backbonejs.org/#View-extend](http://backbonejs.org/#View-extend)

```
Backbone.View.extend({
  tagName: "tr"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T01:14:32.343

您的模板不需要包含`tr`标签。`tblView`应该`tagName`设置为`tr`.

# ruby-on-rails - 在 CSS 中访问 Rails 控制器实例变量

> ID：13944107
> 
> 赞同：7
> 
> 时间：2012-12-19T01:11:19.260
> 
> 标签：ruby-on-rails, ruby, erb, instance-variables, scoping

所以我看到很多关于在你的 CSS 文件中使用 erb 的讨论。我可以让 ERB 通过使用 <%= %> 语法并将 .erb 添加到文件中来处理 CSS 文件，但我真正需要的是访问控制器中的实例变量。

**search_controller.rb**

```
def new
  @search = Search.new
  @school = School.find(params[:school])
end 
```

我真正想做的是：

**搜索.css.scss.erb**

```
h1.logo {
  color: <%= @school.primary_color %>;
} 
```

但是 ERB 会抛出一个错误，因为 @school 是 nil。有没有办法要求控制器访问这些实例变量？

我能想到的唯一另一种方法是将其作为数据属性嵌入到视图中，然后使用 JS 在前端进行更改。这让我觉得可能更好，因为 CSS 文件不会更改并且每次都需要重新发送，但它也不会那么优雅。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T01:28:09.127

您还需要考虑在预编译资产场景中，CSS 将在编译期间通过 Sprockets 运行，因此您最终会得到静态颜色（假设`@school`实际实例化了它不会是）。这是不可取的，因为每个学校都会有相同的颜色（无论在编译阶段发生了什么）。

对于像这样的自定义品牌，我们让我们的用户指定他们的颜色，并在布局中包含一个 CSS 块：

```
:css
    h1.logo {
        color: <%= @school.primary_color %>;
    } 
```

这并不理想，但如果你有少量的定制似乎工作得相当好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T01:31:22.227

我宁愿`@school.primary_color`在你的观点中使用。这应该有效：

```
<h1 style="color:#{@school.primary_color}">@school.name</h1> 
```

请记住使用双引号进行插值。

# objective-c - 如何从当前动画视图中获取当前 CGAffineTransform？

> ID：13944108
> 
> 赞同：1
> 
> 时间：2012-12-19T01:11:19.390
> 
> 标签：objective-c, ios6, core-graphics

我想从使用 CGAffineTransformScale 动画的 uiview 中获取当前的 CGAffineTransform。我正在尝试这条线，但它不断使我的应用程序崩溃：

```
CGAffineTransform currentTransform = [[[self.layer presentationLayer] 
                        valueForKeyPath:@"transform"] CGAffineTransformValue]; 
```

我在这里做错了什么？基本上，我试图通过首先获取准确的变换值，然后删除所有动画，然后将状态应用于视图来“暂停”动画，使其看起来在动画中间暂停。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:17:34.137

a的`transform`属性`CALayer`是 a `CATransform3D`。尝试获得`affineTransform`财产。

# sql-server - 导入后我的 SQL Server 损坏了 information_schema

> ID：13944109
> 
> 赞同：0
> 
> 时间：2012-12-19T01:11:20.800
> 
> 标签：sql-server, database, sql-server-2008, sql-server-2008-r2

我正在使用 SQL Server 2008 R2 并使用`aspnet_regsql`.

我相信我的数据库在导入后已损坏。我有存储过程，`INFORMATION_SCHEMA`并且只有很少的存储过程`Programmability > Stored Procedures`，这些是使用创建的 asp net 过程`aspnet_regsql`，现在我无法重新创建，因为 SQL Server 说该对象已经存在。

我该如何解决？

谢谢

PS 我已经执行了从一个远程数据库到另一个数据库的自动导出/导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:17:47.017

Problem solved. I had a backup I just had my database imported again.

thanks

# ruby-on-rails - 在 has_many 中创建和更新多条记录：通过关系

> ID：13944110
> 
> 赞同：1
> 
> 时间：2012-12-19T01:11:34.043
> 
> 标签：ruby-on-rails, activerecord, has-many-through

不知道我是否朝着正确的方向前进，但缺乏网络开发知识使我无法完成以下任务：

```
在应用程序中，用户可以设置作为对象的设置。在设置组件中
我们可以订阅或取消订阅用户的通知来简化用户的任务
并增加用户体验，我们决定将所有通知放在一个表单上。

```

我相信这应该是可能的`Rails-3.2.8`。

所以我们有

```
班级设置

  has_many :notifications, :through => :email_notifications
  has_many :email_notifications

```

```
类通知
  attr_accessible :name, :primary, :secondary

  has_many :settings, :through => :email_notifications
  has_many :email_notifications

```

```
类电子邮件通知
  attr_accessible :notification_id, :setting_id, :primary, :secondary
  属于_to：通知
  属于_to：设置

```

在`settings_controller`实例化所有通知并将 id 传递给丰富的加入关联：

```
定义新
  @setting = Setting.new
  @notifications = Notification.all
  @notifications.each 做 |n|
    @setting.email_notifications.build(:notification_id => n.id)
  结尾

```

然后我停留在视图中（所有解决方案都不可行，但我还是列出了它们，因此您可以评论解决方案及其出错的地方）：

**解决方案#1**

```
<%= form_for @setting, :html => { :class => 'form-horizontal' } do |f| %>
<div class="control-group">
    <%= f.label :email_periods, :class => 'control-label' %>
    <div class="controls">
        <%= f.select :email_periods, ["Daily", "Weekly", "Tuesdays & Thursdays"], :class => 'text_field' %>
    </div>
</div>
<table class="table table-striped">
    <thead>
        <tr>
            <th><%= 'Notification' %></th>
            <th><%= 'Primary' %></th>
            <th><%= 'Secondary' %></th>
            <th><%= 'Reminder interval' %></th>
        </tr>
    </thead>
    <tbody>
        <% @setting.email_notifications.each do |s| %>
        <tr>
            <td><%= s.notification.name.to_s.humanize %></td>
            <td><%= check_box 'setting[notification_ids]', :primary %></td>
            <td><%= check_box 'setting[notification_ids]', :secondary %></td>
            <td><%= 'possible ddl' %></td>
        </tr>
        <% end %>
    </tbody>
</table>

<div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
    settings_path, :class => 'btn' %>
</div>
<% end %> 
```

但它给了我一个名为 setting[notification_ids] 的复选框，实际上它是不可用的。

然后我想为 email_notifications 创建一个表单：

**解决方案#2**

```
<%= form_for @setting.email_notifications do |s| %>
<table class="table table-striped">
    <thead>
        <tr>
            <th><%= 'Notification' %></th>
            <th><%= 'Primary' %></th>
            <th><%= 'Secondary' %></th>
            <th><%= 'Reminder interval' %></th>
        </tr>
    </thead>
    <tbody>
        <% @setting.email_notifications.each do |s| %>
        <tr>
            <td><%= s.notification.name.to_s.humanize %></td>
            <td><%= f.check_box s.primary %></td>
            <td><%= f.check_box s.secondary %></td>
            <td><%= 'possible ddl' %></td>
        </tr>
        <% end %>
    </tbody>
</table>
<%= f.submit nil, :class => 'btn btn-primary' %></br>
<% end %> 
```

但它又一次向我抛出了一个错误： `undefined method email_notification_..._email_notification_email_notification_email_notifications_path for #<#<Class:0x007f86942d16e0>:0x007f86979e02d0>`

然后我决定有一个 form_for 并`email_notification`在该表单中构建每个：

```
<%= form_for @setting.email_notifications.build do |s| %>
<table class="table table-striped">
    <thead>
        <tr>
            <th><%= 'Notification' %></th>
            <th><%= 'Primary' %></th>
            <th><%= 'Secondary' %></th>
            <th><%= 'Reminder interval' %></th>
        </tr>
    </thead>
    <tbody>
        <% @setting.email_notifications.each do |s| %>
        <tr>
            <td><%= s.notification.name.to_s.humanize %></td>
            <td><%= f.check_box s.primary %></td>
            <td><%= f.check_box s.secondary %></td>
            <td><%= 'possible ddl' %></td>
        </tr>
        <% end %>
    </tbody>
</table>
<%= f.submit nil, :class => 'btn btn-primary' %></br>
<% end %> 
```

但是又报错了：

```
#:0x007f86979e02d0> 的未定义方法 `email_notifications_path'
```

任何帮助，将不胜感激。谢谢

PS 由于某种原因，StackOverflow 无法识别 ruby​​ 样式继承`<`，这就是我必须从示例中删除的原因。

# c# - Sitecore 发布：结束与用户的事件交互

> ID：13944113
> 
> 赞同：4
> 
> 时间：2012-12-19T01:11:40.643
> 
> 标签：c#, asp.net, content-management-system, sitecore, sitecore6

我有一个 publish:end 事件处理程序，如果它有任何错误，我想将它展示给用户。有没有办法做到这一点？我可以连接一些东西以在发布结束屏幕上（或任何地方之前）显示消息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:08:24.653

您的问题引起了我的兴趣，因为这是我希望通过 Sitecore 实现的那些事情之一，但没有人真正花时间去了解如何去做。所以我一头扎进了它，我很高兴地说这是可能的，达到一定的目的！

在您调用的事件处理程序中，`publish:end`您可以查找当前正在运行的发布作业。获得作业后，您可以修改其状态消息：

```
var publishJobs = Sitecore.Jobs.JobManager
    .GetJobs().Where(x => x.Category.Equals("publish"))
    .ToList();

publishJobs.ForEach(x => x.Status.Messages.Add("This is a message inserted by the publish:end event")); 
```

结果将显示在结果文本框中发布对话框的最后一页。

![在此处输入图像描述](../Images/fb30af4cbd10e28f5fd771b849b65b20.png)

结果文本区域的问题是，您只有在单击“单击此处查看其他信息”链接时才能看到。

要更改该行为，您需要修改位于`/sitecore/shell/Applications/Dialogs/Publish/Publish.xml`. 在那里，您可以将结果文本区域设置为始终可见。

但是有一个缺点：你不知道哪个工作是你的出版工作......

每个作业都有一个分配给它的句柄，它基本上是一个 Guid 和一些关于服务器和站点的信息，但是在你的事件处理程序中你没有这个信息（*或者至少我找不到它*）。

我认为在大多数情况下，将消息简单地添加到所有正在运行的发布作业（在检查它是否已经存在之后）是没有问题的，但这是需要考虑的事情。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:50:25.480

我认为您不能直接通知用户，因为`publish:end`它是在另一个不知道 Sitecore 接口的线程上执行的。您可以向用户发送电子邮件。

您还可以添加[发布状态内容编辑器警告](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/Content-Editor-Warning-to-Display-Publishing-Status.aspx)，让编辑器知道发布是否成功完成。

我已经在我合作过的所有 sitecore 网站上安装了发布状态，用户发现它非常有用。

# android - Android：尝试使用 RingtunesstarwarsActivity 类时无法将获取解析为类型

> ID：13944121
> 
> 赞同：0
> 
> 时间：2012-12-19T01:12:40.657
> 
> 标签：android

我使用名为 testringtone() 的方法创建了一个测试项目，用于设置铃声。它运行良好。当我在另一个项目中复制此方法时，我收到一条错误消息，说 RingtunesstarwarsActivity 无法解析为类型，该行是 `RingtunesstarwarsActivity.this.getPackageName()+ "/" + "raw/blasters"; Uri mUri = Uri.parse(strUri);`.

这在我的测试项目中运行良好。完全的

> 方法 void testringtone() { File newSoundFile = new File("/sdcard/", "myringtone.oog");

```
ERROR HERE /////////////////////////////////////////////////// 

String strUri = "android.resource://"+

 RingtunesstarwarsActivity.this.getPackageName()+  "/" + "raw/blasters";
Uri mUri = Uri.parse(strUri);
/////////////////////////////

ContentResolver mCr = getContentResolver();
AssetFileDescriptor soundFile;
try {
       soundFile= mCr.openAssetFileDescriptor(mUri, "r");
   } catch (FileNotFoundException e) {
       soundFile=null;   
   }

   try {
      byte[] readData = new byte[1024];
      FileInputStream fis = soundFile.createInputStream();
      FileOutputStream fos = new FileOutputStream(newSoundFile);
      int i = fis.read(readData);

      while (i != -1) {
        fos.write(readData, 0, i);
        i = fis.read(readData);
      }

      fos.close();
   } catch (IOException io) {
   }

//////////////////////////////////////////

  ContentValues values = new ContentValues();
       values.put(MediaStore.MediaColumns.DATA, newSoundFile.getAbsolutePath());
       values.put(MediaStore.MediaColumns.TITLE, "my ringtone");
       values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/oog");
       values.put(MediaStore.MediaColumns.SIZE, newSoundFile.length());
       values.put(MediaStore.Audio.Media.ARTIST, R.string.app_name);
       values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
       values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);
       values.put(MediaStore.Audio.Media.IS_ALARM, true);
       values.put(MediaStore.Audio.Media.IS_MUSIC, false);

   Uri uri = MediaStore.Audio.Media.getContentUriForPath(newSoundFile.getAbsolutePath());
   Uri newUri = mCr.insert(uri, values);

   try {
       RingtoneManager.setActualDefaultRingtoneUri(this, RingtoneManager.TYPE_RINGTONE, newUri);
   } catch (Throwable t) {
    //   Log.d(TAG, "catch exception");
   }

///////////////////////////////////////   

} // end methed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:22:03.767

您似乎忘记重命名代码以引用您的**新**活动。听起来像是`RingtunesstarwarsActivity`旧代码的一部分，您还没有完成使所有内容保持最新所需的重构。

Either way, I don't even think you need the `ClassName.this` prefacing `getPackageName()` unless `testringtone()` is inside an inner class of some sort, such as an onClickListener.

# python - 向 Django Web 应用程序提交数据？

> ID：13944122
> 
> 赞同：1
> 
> 时间：2012-12-19T01:12:42.640
> 
> 标签：python, django, http, web-applications, web

我有兴趣开始一个新项目来学习 Django。基本思想：我希望能够编写用 Markdown 装饰的通用内容（博客文章等），并使用某种脚本自动将其发布到网站。

我是网络编程的新手，所以我想知道应该使用什么机制来促进降价文本的传输。什么样的 HTTP 操作应该用于这样的事情（POST 或 GET）？如何在发布之前使用 Django 应用程序进行身份验证（希望某种公钥/私钥身份验证）？你会推荐我使用什么命令行工具来提交数据，curl，wget，magic？我应该注意哪些安全问题？

寻找有人指出我正确的方向。谢谢。

编辑：我知道管理站点，特别不想使用它。我有兴趣使用 api 作为通信层，并使用博客作为一个简单的示例来理解协议。它更像是一个学习实验，而不是一个功能性网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:43:14.307

Django 提供了一个易于创建的管理站点。您可以通过取消注释 urls.py 中的相应行来启用它。

还要检查这些链接。在 django 中开始使用管理站点会很有帮助。 [https://docs.djangoproject.com/en/1.2/intro/tutorial01/#intro-tutorial01](https://docs.djangoproject.com/en/1.2/intro/tutorial01/#intro-tutorial01)

一个简单的博客应用程序示例在这里 [http://lightbird.net/dbe/](http://lightbird.net/dbe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T01:17:42.433

我只会对自动管理界面感到满意并在那里添加您的内容。然后就可以使用[`django.contrib.markup`](https://docs.djangoproject.com/en/dev/ref/contrib/markup/)Markdown 来解析了。

管理员是 Django 最好的部分之一。一旦你对它有经验，你就可以在几个小时或更短的时间内完成上面提到的东西。

# c++ - cin 在我的代码中不起作用

> ID：13944127
> 
> 赞同：1
> 
> 时间：2012-12-19T01:12:58.830
> 
> 标签：c++

第 9、10 和 13 行中的错误“未找到采用 'std:istream' 类型的左侧操作数的运算符（或没有可接受的转换'”

```
#include <stdafx.h>  // I should have put #include "stdafx.h" instead
#include <iostream>  // My mistake was I didn't #include <string>

using namespace std;
    int main()
{
    cout << "This is the left step bitwise operation\n";
    string x;
    cin >> x;  // line 9
    cout << "You typed" << x;  //line 10
    string y;
    cout << "Enter second number please!"; 
    cin >> y; // line 13
    cin.get();
    return 0;
} // line 
```

我的模糊猜测是我没有#include 某些东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:24:10.537

你忘了`#include <string>`。您的代码在输入字符串、声明字符串以及输出字符串时都依赖于它。

```
#include "stdafx.h"
#include <iostream>
#include <string> <------ 
```

我不能为此付出太多的努力，所以它是一个社区 wiki。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:21:16.957

```
#include "stdafx.h"  
or move 
#include <stdafx.h>
add 
#include <string> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T01:25:06.393

如果您包含来自同一目录的文件，请不要使用带角度的引号，而是使用双引号。

`#include "stdafx.h"`

此外，包括`<string>`.

# php - 如果在表中找不到条目， 则回显“x”？

> ID：13944128
> 
> 赞同：3
> 
> 时间：2012-12-19T01:13:02.250
> 
> 标签：php, mysql, if-statement

有人可以告诉我，当我有一个 mysql 查询从我的表中获取用户照片并且我想要它时我会使用什么类型的语句，这样如果用户没有照片或表中不存在该条目，它应该回显一些东西别的？

我是 php 和 mysql 的新手，所以如果有人能给我一个例子，这将非常有帮助。谢谢你。

我获取用户照片的查询如下，如果已登录以显示更大的图像，如果已注销则没有指向更大图像的链接。请注意，我尝试了 else 语句，但这只会导致我的 else 回显文本与用户照片一起显示。

```
 <?php
        $get_photos_set = get_photos();
        while ($photos = mysql_fetch_array($get_photos_set)) {
            if (logged_in()) {
              echo "<li><a href=\"data/photos/{$photos['user_id']}/{$photos['file_name']}\" rel=\"prettyPhoto[pp_gal]\"><img src=\"data/photos/{$photos['user_id']}/thumb_{$photos['file_name']}\" alt=\"{$profile[2]}'s Photos\"  /></a></li>";
            } else {
              echo "<li><a href=\"login.php\"><img src=\"data/photos/{$photos['user_id']}/thumb_{$photos['file_name']}\" alt=\"{$profile[2]}'s Photos\"  /></a></li>";
            }
        }
    ?> 
```

编辑：

当我将其编辑为此时，如果结果 = false，我仍然没有得到任何回显：

```
 <?php
$get_photos_set = get_photos();
while ($photos = mysql_fetch_array($get_photos_set)) {
    if(!isset($get_photos_set) || $get_photos_set===false)
//Echo something else
echo "no results found";
else

//Do what you were normally doing
    if (logged_in()) {

echo
"<li><a href=\"data/photos/{$photos['user_id']}/{$photos['file_name']}\" rel=\"prettyPhoto[pp_gal]\"><img src=\"data/photos/{$photos['user_id']}/thumb_{$photos['file_name']}\" alt=\"{$profile[2]}'s Photos\"  /></a></li>";
    }

    if (!logged_in()) {
echo
"<li><a href=\"login.php\"><img src=\"data/photos/{$photos['user_id']}/thumb_{$photos['file_name']}\" alt=\"{$profile[2]}'s Photos\"  /></a></li>";

 }

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:30:00.793

您可以检查返回的行数以查看是否找到照片：

```
$get_photos_set = get_photos();
if (mysql_num_rows($get_photos_set) > 0) {
  // do loop
} else {
  echo 'x';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T01:26:04.960

您可以通过几种方法来解决此问题，但是一种简单的方法涉及在循环中实现一个计数器。之后，在 while 循环完成后检查计数器并输出您可能想要的任何“空结果”。例如

```
$results = 0;
$get_photos_set = get_photos();
while ($photos = mysql_fetch_array($get_photos_set)){
  // output
  $results++;
}
if ($results == 0){
  // no results output
} 
```

# entity-framework - 实体框架 5 .net 4 - 数据库第一个自引用实体

> ID：13944129
> 
> 赞同：3
> 
> 时间：2012-12-19T01:13:15.017
> 
> 标签：entity-framework

试图完成与[http://www.codeproject.com/Articles/206410/How-to-Configure-a-Self-Referencing-Entity-in-Code](http://www.codeproject.com/Articles/206410/How-to-Configure-a-Self-Referencing-Entity-in-Code)类似的事情，但在我的情况下，我不是首先使用代码，而是使用 db第一的。我收到此错误{“违反 PRIMARY KEY 约束 'pk_employee'。无法在对象 'dbo.Employee' 中插入重复键。\r\n语句已终止。”}。

```
 EmployeeEntity employeeEntity = null;
        EmployeeEntity employeeDelegate = null;

            // already EXISTS in table
            employeeDelegate = new EmployeeEntity
            {
                EMPL_UNO = 1,
                FULLNAME = "manager, name"
            };

        employeeEntity = new EmployeeEntity
        {
            EMPL_UNO = 2,
            FULLNAME = "employee, name",
            DELEGATE_EMPL_UNO = 1,
            Delegate = employeeDelegate
        };

MyContext.EmployeeEntities.Add(Employee);
    // throws error
MyContext.SaveChanges(); 
```

// 桌子

```
 CREATE TABLE [dbo].[Employee](
    [EMPL_UNO] [int] NOT NULL,
    [FULLNAME] [varchar](255) NULL,
    [DELEGATE_EMPL_UNO] [int] NULL,
 CONSTRAINT [pk_employee] PRIMARY KEY CLUSTERED 
(
    [EMPL_UNO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[Employee]  WITH CHECK ADD  CONSTRAINT [FK_Employee_Delegate] FOREIGN KEY([DELEGATE_EMPL_UNO])
REFERENCES [dbo].[Employee] ([EMPL_UNO])
GO

ALTER TABLE [dbo].[Employee] CHECK CONSTRAINT [FK_Employee_Delegate]
GO 
```

// 实体

```
 public partial class EmployeeEntity
{
    public EmployeeEntity()
    {
        this.SubOrdinates = new HashSet<EmployeeEntity>();
    }

    public int EMPL_UNO { get; set; }
    public string FULLNAME { get; set; }
    public Nullable<int> DELEGATE_EMPL_UNO { get; set; }

    public virtual ICollection<EmployeeEntity> SubOrdinates { get; set; }
    public virtual EmployeeEntity Delegate { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:14:57.070

您的代码失败，因为`Add`方法将从对象图中插入所有未知实体，并且在您的情况下，EF 上下文不知道新员工和现有员工，因为您没有通知上下文有关第一个实体的存在（设置 id 是不够的）。例如，您可以使用：

```
var employeeDelegate  = new EmployeeEntity {
    EMPL_UNO = 1,
    FULLNAME = "manager, name"
};

MyContext.EmployeeEntities.Attach(employeeDelegate);

var employeeEntity = new EmployeeEntity {
    EMPL_UNO = 2,
    FULLNAME = "employee, name",
    DELEGATE_EMPL_UNO = 1,
    Delegate = employeeDelegate
};

MyContext.EmployeeEntities.Add(Employee);
MyContext.SaveChanges(); 
```

但在您的特定情况下，这也应该有效：

```
var employeeEntity = new EmployeeEntity {
    EMPL_UNO = 2,
    FULLNAME = "employee, name",
    DELEGATE_EMPL_UNO = 1 // Just set the FK, you don't need a reference if you don't want to modify the delegate as well
};

MyContext.EmployeeEntities.Add(Employee);
MyContext.SaveChanges(); 
```

# jquery - 花式盒子；如何设置 fancybox-inner 属性的样式？看起来它已经以某种方式设计了

> ID：13944130
> 
> 赞同：0
> 
> 时间：2012-12-19T01:13:23.310
> 
> 标签：jquery, fancybox

这是我所看到的图像，可能会很清楚发生了什么：

[http://i.imgur.com/bMFrJ.jpg](http://i.imgur.com/bMFrJ.jpg)

（点击放大）

基本上，查看 fancybox-inner 属性，并希望对其进行样式设置以减小 fancybox 内图像的大小，而不是调整图像本身的大小。

然后，我将尝试在幻想框右侧添加一个侧边栏区域，用户可以在其中单击“下载高分辨率图像”，并下载高分辨率版本，但这是下一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:10:18.713

您可以使用`beforeShow`回调来动态设置图像的新大小，例如：

```
$(".fancybox").fancybox({
    beforeShow: function() {
        var newWidth = 250; // set new image display width
        $(".fancybox-inner img").css({
            width  : newWidth,
            height : "auto"
        }); // apply new size to img
        // optionally :
        // set new values for parent container IF you want to match the image size
        // this.width  = newWidth;
        // this.height = $(".fancybox-inner img").innerHeight();
    }
}); // fancybox​ 
```

**注意**：这是为 fancybox v2.1.3+

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T01:35:40.337

一个快速的“hack”似乎可以让它工作，虽然不是完整的解决方案，但它应该是你的一个很好的起点。

在 jquery.fancybox.css 文件中，在文件底部添加以下内容以将图像宽度限制为 300px..

```
.fancybox-skin,
.fancybox-outer,
.fancybox-inner{max-width:300px;margin:0 auto;} 
```

# r - R中带有向量的圆形图

> ID：13944133
> 
> 赞同：15
> 
> 时间：2012-12-19T01:13:28.083
> 
> 标签：r, plot

我正在尝试创建一个圆形图，其中包含来自不同角度的原点的各种大小的向量：类似于下图，尽管它不必相同。我已经仔细研究`circular`并`circstats`学到了很多关于圆形图的知识，但没有找到与我正在寻找的东西完全一样的东西。我想如果必须的话，我可以手工编写一些东西，但似乎比我更有经验的人已经编写了一些代码来做到这一点。

![](../Images/30da73589c39c53a18e4c9c9f6765273.png)

该图来自[Schmidt，2007，Ecology 88(11):2793-2802](http://depts.washington.edu/oldenlab/wordpress/wp-content/uploads/2013/03/Ecology_2007.pdf)，图 2C。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T04:39:37.077

网格包对于组合和排列图形元素非常强大。

```
library(grid) 
```

结果如下： ![在此处输入图像描述](../Images/a007885b91930ea79e7c784f8545f075.png) 一些数据，我想剩下的就是你的值 < 1

```
polar <- read.table(text ='
degree value
1    120  0.50
2     30  0.20
3   160  0.20
4     35  0.50
5    150  0.40
6    90  0.14
7    70  0.50
8      20  0.60',header=T)

## function to create axis label
axis.text <- function(col,row,text,angle){
  pushViewport(viewport(layout.pos.col=col,layout.pos.row=row,just=c('top')))
  grid.text(angle,vjust=0) 
  grid.text(text,vjust=2)         
  popViewport()
}

## function to create the arrows, Here I use the data
arrow.custom <- function(polar){
  pushViewport(viewport(layout.pos.col=2,layout.pos.row=2))
  apply(polar,1,function(x){
       pushViewport(viewport(angle=x['degree']))  
          grid.segments(x0=0.5,y0=0.5,x1=0.5+x['value']*0.8,y1=0.5,
          arrow=arrow(type='closed'),gp=gpar(fill='grey'))
       popViewport()
  })
  popViewport()
}

## The global layout 3*3 matrix
lyt=grid.layout(3, 3, 
                   widths= unit(c(4,15,4), "lines"),
                   heights=unit(c(4,15,4), "lines"),
                   just='center')
pushViewport(viewport(layout=lyt,xscale=2*extendrange(polar$value)))
 ## the central part : circles , arrows and axes
pushViewport(viewport(layout.pos.col=2,layout.pos.row=2))
grid.circle(r=c(0.5,0.3),gp = gpar(ltw=c(3,2),col=c('black','grey')))
arrow.custom(polar)
grid.segments(x0=0.5,y0=0,x1=0.5,y=1,gp=gpar(col='grey'))
grid.segments(x0=0,y0=0.5,x1=1,y=0.5,gp=gpar(col='grey'))
popViewport()

## the axis labels 
axis.text(1,2,'Phragmites',expression(270 * degree))
axis.text(3,2,'Spartina',expression(90 * degree))
axis.text(2,1,'Increasing tropic position',expression(0 * degree))
axis.text(2,3,'Decreasing tropic position',expression(180 * degree)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T09:26:08.123

`plotrix`包 hal 一个`polar.plot`似乎可以做你想做的事情的功能。但是，我还没有弄清楚如何沿着其中一条边的弧线添加虚线。

**例子：**

```
library(plotrix)

testlen<-c(rnorm(36)*2+5)
testpos<-seq(0,350,by=10)
polar.plot(testlen,testpos,main="Test Polar Plot",lwd=3,line.col=4)

#rotate degree
oldpar<-polar.plot(testlen,testpos,main="Test Clockwise Polar Plot",
start=180,clockwise=TRUE,lwd=3,line.col=4)

# reset everything
par(oldpar) 
```

![在此处输入图像描述](../Images/75c8a793fd5c3dcaefc0a8a742502ff9.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T22:07:28.210

我最终选择了`radial.plot`in `plotrix`（尽管事实证明它`polar.plot`具有所有相同的功能 - 在我弄清楚它时它没有得到很好的记录）。我不知道如何做箭头，或沿圆周的部分虚线，但对我的目的来说都不重要。出于某种原因，我无法绘制第一个数据点，所以我插入了一个虚拟点。谢谢大家的帮助！

```
library(plotrix)

magnitude <- c(2.1, 2.3, 2.5, 1.5, 2.8, 2.7)
angle <- c(2.1, 2.6, -0.1, -2.6, 0.1, 0.4)
directionlabels <- c("more\nbenthic", "higher trophic", 
                     "more\npelagic", "lower trophic")
colors <- c("black", "red", "green", "blue", "orange", "purple", "pink")
par(cex.axis=0.7)
par(cex.lab=0.5)

radial.plot(c(0, magnitude), 
            c(0, angle), 
            lwd=4, line.col=,
            labels=directionlabels,
            radial.lim = c(0,3), #range of grid circle
            main="circular diagram!",
            show.grid.label=1, #put the concentric circle labels going down
            show.radial.grid=TRUE
) 
```

![圆形图！](../Images/08612a048f64bf085606e03117ed6930.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T17:50:24.043

这是一种与TeachingDemos 包`my.symbols`一起使用的方法：`ms.polygon``ms.arrows`

```
plot(c(-2,2),c(-2,2), axes=FALSE, xlab='', ylab='', type='n', asp=1)
abline(v=0, col='lightgrey')
abline(h=0, col='lightgrey')
my.symbols(c(0,0),c(0,0),ms.polygon, xsize=c(2,4), lwd=c(1,2), n=360)

theta <- seq(pi/4, 3*pi/4, length=250)
lines( 2.03*cos(theta), 2.03*sin(theta), lwd=2, lty='dashed' )
lines( c(0,0), c(0,2), lty='dashed', lwd=2 )

a <- c(300,305,355,0,5,45,65)
l <- c(1.1, .5, .4,1,.6,.7,1.25)

my.symbols( rep(0,7), rep(0,7), ms.arrows, xsize=2, r=l, adj=0, 
        angle=pi/2 - pi/180*a ) 
```

# wpf - 当 CanUserAddRows=true 时，WPF 控制 DataGrid 新项目行上的对象

> ID：13944134
> 
> 赞同：1
> 
> 时间：2012-12-19T01:13:29.003
> 
> 标签：wpf, datagrid

我正在使用一个 WPF DataGrid 绑定到`ObservableCollection<T>`其中每一行（又名 T 的实例）包含一个浏览和一个删除按钮，这些按钮作为命令绑定到 T 的方法。

问题是我正在使用`CanUserAddRows=true`数据输入并且无法禁用新行的删除按钮（因为该 T 的实例尚未实例化）

有谁知道解决方法？有没有办法控制新项目行上的对象？代码隐藏或通过绑定在这一点上很好 - 我很绝望！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:16:45.573

如果我理解正确，您希望将新行中按钮的 IsEnabled 属性设置为 false；

如果*新行*是指尚未编辑的行，那么我认为最好先将该按钮的 IsEnabled 属性设置为 false，然后在进行编辑时将其更改为 true。处理[RowEditEnding 事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.roweditending%28v=vs.100%29.aspx)。

如果不是这种情况，并且您希望能够在将行添加到数据网格后设置此属性，因为您的数据网格绑定到可观察集合，您可能希望处理[ObservableCollection.CollectionChanged 事件](http://msdn.microsoft.com/en-us/library/ms653375%28v=vs.95%29.aspx)。

# flash - RED5 1.0 录制问题 NetStream.Buffer.Empty

> ID：13944136
> 
> 赞同：4
> 
> 时间：2012-12-19T01:13:44.950
> 
> 标签：flash, red5, recording

我已经在我的 Windows 8 系统上设置了 RED5 1.0 Final，我正在尝试让录制正常工作。我读过的一个教程说要在客户端（在 Flash 中）缓冲数据，然后一旦缓冲区为空，就关闭连接。

我遇到的问题是，当我开始记录缓冲区时，立即报告它是空的（NetStream.Buffer.Empty）。我已经让它在缓冲区实际填满的地方工作了一两次，但由于某种原因它停止了这种工作。

我可以看到即使在我将相机从网络流中分离后，客户端仍在向服务器发送数据，因为服务器端的文件继续增长。我目前的解决方案是在录制停止后等待 60 秒，然后再关闭连接。

有趣的一件事是，当没有更多数据包要发送时，我在服务器端看到文件从 mystream.ser 切换到 mystream.flv 并且大小停止增长。我正在考虑在服务器端编写一些代码来等待这个事件发生，然后让客户端知道它可以关闭流。

这是我第一次涉足动作脚本，所以我可能在这里做了一些完全错误的事情。请告诉我。

**编辑**这是客户端代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               xmlns:ns1="*"
               minWidth="955" minHeight="600" applicationComplete="init()" >

    <fx:Script>
        <![CDATA[

            import flash.display.DisplayObject;
            import flash.display.Sprite;
            import flash.events.NetStatusEvent;
            import flash.media.Camera;
            import flash.media.H264Level;
            import flash.media.H264Profile;
            import flash.media.H264VideoStreamSettings;
            import flash.media.Video;
            import flash.net.NetConnection;
            import flash.net.NetStream;

            var cam:Camera = Camera.getCamera();
            var mic:Microphone = Microphone.getMicrophone();
            var nc:NetConnection = new NetConnection();
            var activeStream:NetStream;
            private var bufferCheckTimer:Timer;
            var recordHalted:Boolean = false;

            protected function init(): void{
                recordButton.enabled = false;
                stopButton.enabled = false;
                nc.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);            
                nc.connect("rtmp://localhost/oflaDemo");
                nc.client = this;
            }

            public function onMetaData(info:Object):void {

                trace("playback called onMetaData");        
            }

            public function onBWDone(... rest) : void {
                // have to have this for an RTMP connection
                trace('onBWDone');
            }

            public function onBWCheck(... rest) : uint {
                trace('onBWCheck');
                //have to return something, so returning anything :)
                return 0;
            }

            protected function onNetStatus(event:NetStatusEvent):void{
                trace(event.info.code);
                if(nc.connected)
                {
                    SetupCameraAndMic();
                    recordButton.enabled = true;
                    stopButton.enabled = true;
                }           
            }

            protected function SetupCameraAndMic(): void{
                activeStream = new NetStream(nc);
                activeStream.bufferTime = 60;   
                activeStream.client = this;
                activeStream.addEventListener(NetStatusEvent.NET_STATUS, handleStreamStatus,false,0,true);

                var h264Settings:H264VideoStreamSettings = new H264VideoStreamSettings();
                h264Settings.setProfileLevel(H264Profile.BASELINE, H264Level.LEVEL_2);
                activeStream.videoStreamSettings = h264Settings;

                cam.addEventListener(StatusEvent.STATUS, handleCameraStatus, false, 0, true);
                mic.addEventListener(StatusEvent.STATUS, handleMicrophoneStatus, false, 0, true);

                cam.setMode(320,240, 15);
                cam.setQuality(0, 80);
                cam.setKeyFrameInterval(7);

                mic.rate = 44;
                mic.gain = 75;
                mic.setSilenceLevel(0);
                mic.setUseEchoSuppression(true);

                activeStream.attachCamera(cam);
                activeStream.attachAudio(mic);  
                videoContainer.attachCamera(cam);

            }

            private function handleCameraStatus(e:StatusEvent):void {
                trace("handleCameraStatus - " + e.code);
                switch(e.code) {
                    case 'Camera.muted':
                        // Show a message
                        break;
                    case 'Camera.Unmuted':              
                        //finishCamAndMicSetup();
                        break;
                }
            }

            private function handleMicrophoneStatus(e:StatusEvent):void {
                trace("handleMicrophoneStatus - " + e.code);
                switch(e.code) {
                    case 'Microphone.Muted':
                        // Show a message
                        break;
                    case 'Microphone.Unmuted':              
                        //finishCamAndMicSetup();
                        break;
                }
            }

            private function handleStreamStatus(e:NetStatusEvent):void {
                switch(e.info.code) {
                    case 'NetStream.Buffer.Empty':
                        trace("NetStream.Buffer.Empty");
                        break;
                    case 'NetStream.Buffer.Full':
                        trace("NetStream.Buffer.Full");
                        break;
                    case 'NetStream.Buffer.Flush':
                        trace("NetStream.Buffer.Flush");
                        break;
                }
            }

            protected function recordButton_clickHandler(event:MouseEvent):void
            {
                if(activeStream == null)
                {
                    SetupCameraAndMic();
                }
                if(activeStream != null){
                    var tempDate:Date = new Date();
                    var uniqueFileName:String = "RecordME_" + String(tempDate.getMinutes()) + String(tempDate.getMilliseconds());

                    bufferLabel.text = ""+ activeStream.bufferTime;
                    activeStream.publish(uniqueFileName, "record");
                    bufferCheckTimer = new Timer(100);
                    bufferCheckTimer.addEventListener(TimerEvent.TIMER, handleBufferCheck, false, 0, true);
                    bufferCheckTimer.start();

                }

            }

            private function handleBufferCheck(e:TimerEvent):void {
                if(activeStream != null) {
                    trace("Buffer: " + activeStream.bufferLength);
                    statusLabel.text = "Buffer: " + activeStream.bufferLength;
                    if (recordHalted == true) {
                        if ( activeStream.bufferLength == 0 ) {
                            activeStream.close();
                            activeStream = null;

                            bufferCheckTimer.stop();
                            bufferCheckTimer.removeEventListener(TimerEvent.TIMER, handleBufferCheck);
                            bufferCheckTimer = null;

                            // OK - playback time
                            //doRecordingPlayback();
                        }
                    }

                if (bufferCheckTimer != null) {
                    bufferCheckTimer.reset();
                    bufferCheckTimer.start();
                }
            }
            }

            protected function stopButton_clickHandler(event:MouseEvent):void
            {

                activeStream.attachCamera(null);
                activeStream.attachAudio(null); 
                videoContainer.attachCamera(null);                      
                recordHalted = true;

            }

        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <mx:VideoDisplay id="videoContainer" x="158" y="53" width="640" height="480"
                    chromeColor="#3C2020" />
    <s:Button id="recordButton" x="396" y="546" label="Record"
              click="recordButton_clickHandler(event)"/>
    <s:Button id="stopButton" x="491" y="546" label="Stop Recording"
              click="stopButton_clickHandler(event)"/>
    <s:Label id="statusLabel" x="158" y="555" width="207"/>
    <s:Label x="14" y="408" text="Buffer Set to:"/>
    <s:Label id="bufferLabel" x="91" y="408" text="0"/>
</s:Application> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:34:58.400

我现在没有正在运行的 RTMP 服务器，所以我只是评论我在您的代码中看到的内容。

我认为在发布（录制）流时，您首先获得的关于缓冲内容的建议可能不是一个好主意。也许本教程不是关于发布，而是订阅现有流，在这种情况下，缓冲是个好主意。

您将 设置`bufferTime`为 60 秒。[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#bufferTime)说你应该设置为`bufferTime`0 进行现场录制。也就是说，您希望在摄像头/麦克风生成数据后立即发送数据。

接下来是`Timer`你正在使用的。这似乎是在检查缓冲区长度，以检测记录是否已停止。实际上只有两种情况会停止录制：

*   当用户单击“停止”按钮时，您的代码会停止它
*   服务器或其他原因导致其停止的任何情况（网络问题等）

我建议使用您的`NetStatusEvent`处理程序方法 ( `handleStreamStatus()`) 来检查消息“NetStream.Record.Stop”，而不是使用计时器来检查`bufferLength`. 这允许您的代码检测录制何时因用户单击“停止”以外的其他原因而停止。

计时器是问题的可能原因。即使您设置了一个很大的`bufferTime`值，它也可能无法在 Red 5 服务器上工作或表现不同，或者它可能会被服务器端设置覆盖。无论如何，关键是不要`bufferLength`用于检测记录是否已停止。

有很多[有用的消息](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/NetStatusEvent.html#info)与 一起发送`NetStatusEvent`，我建议仔细阅读它们，看看它们中的任何一个在您的场景中是否有用。它们非常可靠，似乎可以处理几乎所有可能出现的情况。

我注意到的最后一件事（不是问题，但值得纠正）：您在麦克风上启用回声抑制，但除非您获得增强型麦克风，否则这将不起作用：

```
var mic:Microphone = Microphone.getEnhancedMicrophone(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T04:06:27.950

我认为这是 RED5 最终 V1.0 版本中的一个错误造成的。我恢复到 0.80 版本，我可以很好地录制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T14:08:08.857

通过更改队列阈值，录制与 Red5 V1.0.2 配合得很好。我看过一个叫jobma的[视频简历网站](http://www.jobma.com)，视频录得很好。似乎他们正在使用red5

# twitter-bootstrap - 引导模式不起作用

> ID：13944145
> 
> 赞同：0
> 
> 时间：2012-12-19T01:14:33.397
> 
> 标签：twitter-bootstrap

我正在尝试使用 Bootstrap 模式。我已经导入了 bootstrap-modal.js

我需要使用按钮属性而不是 JS 来触发模式。

这是我的代码，它不允许模态工作！

```
<!-- Button to trigger modal -->
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T01:51:34.937

您的代码运行良好。您还应该将 Jquery 包含到您的页面中。在导入 bootstrap.js 之前添加这个

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

也不要忘记在 head 部分链接引导 css 文件。

```
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen"> 
```

# mysql - mysql 行到列与group_concat 和计数？

> ID：13944147
> 
> 赞同：3
> 
> 时间：2012-12-19T01:14:34.917
> 
> 标签：mysql, count, group-concat

我有 2 个表，用户和关注。下面的表有一个名为 status 的列。我想计算每个用户按状态分组的关注次数。

下面的查询为每个用户返回每个状态类型的记录。

```
SELECT users.name as user_name, f.status, count(f.id) 
FROM users
JOIN application_follows f ON f.user_id = users.id
GROUP BY users.id, f.status
ORDER BY users.id 
```

返回类似：

```
user_name     status     count

mike          new         10
mike          old         5
tom           new         8
tom           old         9 
```

但我想要更友好的东西，比如：

```
user_name     new    old

mike          10      5
tom           8       9 
```

尝试使用 group_concat 和 count 但没有用。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:18:00.390

```
SELECT  user_name, 
        MAX(CASE WHEN status = 'new' THEN totalFollowers ELSE NULL END) `NEW`,
        MAX(CASE WHEN status = 'old' THEN totalFollowers ELSE NULL END) `OLD`
FROM
    (
        SELECT  users.name as user_name, 
                f.status, 
                count(f.id) totalFollowers 
        FROM    users
                LEFT JOIN application_follows f 
                    ON f.user_id = users.id
        GROUP BY users.id, f.status
    ) derivedTable
GROUP BY user_name 
```

 ~~或者也许（*不确定这个*）

```
SELECT  users.name as user_name, 
        MAX(CASE WHEN f.status = 'new' THEN count(f.id) ELSE NULL END) `NEW`, 
        MAX(CASE WHEN f.status = 'old' THEN count(f.id) ELSE NULL END) `OLD`
FROM    users
        LEFT JOIN application_follows f 
            ON f.user_id = users.id
GROUP BY users.id, f.status 
```~~

# git - 将子模块克隆到目录中

> ID：13944153
> 
> 赞同：4
> 
> 时间：2012-12-19T01:15:34.250
> 
> 标签：git, git-submodules

我在项目中创建子模块时遇到问题。如果我直接在存储库根目录中创建子模块，一切正常。如果子模块更深，则不会克隆存储库。

例如，这按预期工作：

```
git submodule add git://someproject.com/.git someproject 
```

但是，当我运行以下命令时，项目被添加到`.gitmodules`并创建了一个*空*存储库，但没有代码被拉下（即使在 a 之后`git submodule update --init`）。该命令不产生任何输出。

```
git submodule add git://someproject.com/.git lib/someproject 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:26:14.657

尝试运行

```
git submodule init
git submodule update 
```

添加子模块后。

**更新 1**

试试这个：

```
cd lib/someproject
git status 
```

你应该看到类似的东西`# Not currently on any branch.`

如果没有，则不存在 git repo，并且您可能偶然发现了 git 错误，如果您看到上述消息，请执行以下操作：

```
git checkout master
git pull 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T05:01:34.497

您需要运行以下命令

```
git submodule update --init lib/someproject 
```

出于某种原因，git 在子模块上运行和更新时只查看根目录，而不是查看整个工作副本。

还要确保您的`.gitmodules`文件包含这样的条目：

```
[submodule "someproject"]
    path = lib/someproject
    url = git://someproject.com/.git 
```

您的`.git/config`文件包含：

```
[submodule "someproject"]
    url = git://someproject.com/.git 
```

文件：

[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T01:35:14.650

之前添加子模块的尝试似乎使我的存储库处于错误状态。执行以下步骤后，我能够正确克隆子模块：

1.  删除子模块：`rm -rf lib/someproject`
2.  从`.gitmodules`文件中删除子模块
3.  从`.git/config`文件中删除子模块
4.  消除`.git/modules/someproject`

然后`git add submodule`再次运行该命令。非常感谢所有将我推向正确方向的回答者！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T06:53:41.607

我刚刚阅读了 O'Reilly 书的子模块部分，作者在添加子模块时提到（在他的示例中手动使用 git add 到项目根目录的克隆存储库），包括尾部斜杠会导致它将文件夹添加到索引与创建 gitlink。这听起来很傻，但也许在添加之前尝试将目录更改为 lib 以确保由于子模块路径中的斜杠而不会发生这种情况。

这也可能是“子模块添加”仅接收路径和远程 url 并在写入配置时从路径推断子模块名称的特性。也许手动编辑 gitmodules 和配置条目以确保子模块的命名没有“lib/”，但路径包含它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-22T21:41:06.527

我不得不删除内容`.gitmodules`并再次使用`--force`选项添加子模块，例如`git submodule --force add git://someproject.com/.git`。另外，由于我使用 Dockerfile 来安装 .gitmodules 的特定子模块，因此我也强制在那里进行更新`RUN git submodule update --init -f someproject`。但是，我认为再次强制添加解决了这个问题。

# jenkins - Jenkins CI：我应该有一个 Jenkins 的服务器和一个专门的从站来构建吗？

> ID：13944154
> 
> 赞同：2
> 
> 时间：2012-12-19T01:15:42.467
> 
> 标签：jenkins, continuous-integration

我正在使用 Jenkins 进行 CI，
我听说我应该有一个专用的服务器和从属服务器分别用于运行 Jenkins 和构建任务 -
这是真的吗？

我可以理解这一点，因为服务器可能不够强大，无法处理服务器本身和运行构建任务，
但是有任何明确的技术原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:40:22.493

最佳实践是为 Jenkins-Server配备一台**单独**
的机器， 并且*根本不将其用于构建*。

这与 CPU 功率或内存资源无关 -

*   构建机器应该有一个**预定义的配置**，
    而 Jenkins 不应该是其中的一部分。
    （Jenkins 的要求甚至可能与构建机器的要求相冲突）

*   您应该能够启动/克隆/升级/恢复/丢弃构建机器
    ，而不会对 Jenkins 产生任何影响。

当然，如果您的资源有限，您可以选择一台机器，
但如果您对构建自动化很认真 - Jenkins 应该有自己的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T03:07:25.170

您可能不需要专用硬件/VM 来运行 Jenkins 服务器，因为实际的 Jenkins 进程（没有运行构建）使用的资源非常少。但这一切都取决于你想用你的 Jenkins 设置完成什么。

您想跨多个平台为多个项目运行连续构建吗？那么使用master和slave是唯一的方法。另一方面，如果您只为几个项目运行相当简单的构建，那么您只需要一台机器来运行构建和 Jenkins 进程。

您可以将 Jenkins 配置为同时运行多个构建，因此如果您有一台四核机器，您可以安全地运行 2 个构建，并且在分析资源使用情况后可能会运行第三个构建。

在我的最后一次演出中，我使用了一台 8GB RAM 的四核机器来运行：

*   Jenkins 运行 Selenium 构建
*   带有 Windows XP 的 VirtualBox 虚拟机
*   Tomcat 的两个实例，每个实例都部署了两个应用程序。

而且这台机器还有更多的余地。

# java - 返回 ArrayList 并在另一个方法中使用它

> ID：13944155
> 
> 赞同：0
> 
> 时间：2012-12-19T01:16:03.247
> 
> 标签：java, methods, arraylist, return

我有一个返回对象的 ArrayList 的方法。我返回创建的arraylist，它填充了许多对象，我通过以相同的方法打印它们来检查它们是否存在。当我在另一种方法中使用该 Arraylist 作为参数时，它会给我一个错误，就像 Arraylist 为空一样。

让我们用 getFila 和 getColumna 方法说对象的 Position(y,x)。而失败的方法（实际上什么都不做）：

```
public static ArrayList<Position> getTrayectory (ArrayList<Position> aListPos){
        for (int ii = 0; ii < aListPos.size();ii++ ) {
            System.out.println("(" +  aListPos.get(ii).getFila() + "," + aListPos.get(ii).getColumna()+")");
        }
        return aListPos;
    } 
```

我返回包含许多对象的 Arraylist，但我不知道发生了什么。

概括：

```
1- I have a method that returns an ArryList
2- I create a new Arraylist with method in 1
3- I use new method with Arraylist in 2 as parameter.

(4-) Nothing happens, because new arraylist in 2 look empty. 
```

任何人都可以在这个过程中帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:22:43.233

如果您使用 Eclipse 之类的 IDE，您可以轻松地在有问题的代码中插入断点，并且可以“观察”每个变量的内容。

所以你可以找出你的数组列表变空的确切点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:32:22.010

我认为您的 ArryList 包含 Position 对象。我不知道具体所以这只是我的猜测。

```
 System.out.println("(" +  aListPos.get(ii).getFila() + "," 
       + ListPos.get(ii).getColumna()+")"); 
```

反而。尝试这个

```
 System.out.println("(" +  (aListPos.get(ii)).getFila() + "," 
       + (ListPos.get(ii)).getColumna()+")"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T02:46:50.443

如果您在提供它的（看不见的）方法中创建 ArrayList，您会返回它吗？还是您正在修改参数？

换句话说，您是否这样做：

```
ArrayList<Position> myArrayList = generateArrayList(); // or whatever you call it 
```

或者你正在这样做：

```
ArrayList<Position> myArrayList;
generateArrayList(myArrayList);
ArrayList<Position> result = getTrayjectory(myArrayList); 
```

第二个版本不起作用，因为当您在方法内创建对象时，它可以逃脱方法边界的唯一方法是由该方法返回。否则，当方法结束时，它会超出范围。

# php - json_decode 从 iOS 应用程序返回空值

> ID：13944156
> 
> 赞同：2
> 
> 时间：2012-12-19T01:16:09.143
> 
> 标签：php, ios, json

我无法解析发送到 php web 服务的数据。我正在使用以下代码来获取 json：

```
$decoded = json_decode(file_get_contents('php://input'));
if(is_null($decoded) == NULL)
    {
        $body = "Data was not successfully received";
        $body = $body . "      " . $jsonInput;
    } 
```

json 是从 iOS 应用程序发送的，如下所示：

```
{
  "water" : "YES",
  "int_clean" : "YES",
  "ceiling_stains" : "YES",
  "additional_comments" : "not entered",
  "roof_cond" : "YES",
  "e_clean" : "YES",
  "interior_cond" : "not entered",
  "no_exp" : "not entered",
  "addr" : "YES",
  "roof_leak" : "YES",
  "doors_sec" : "YES",
  "elec" : "YES",
  "ceiling_exp" : "not entered",
  "repaired" : "YES",
  "o_desc" : "not entered",
  "w_sign" : "YES",
  "o_cond" : "not entered",
  "int_cond" : "YES",
  "gas" : "YES",
  "for_sale_sign" : "YES",
  "sold_as_is" : "YES",
  "mb_sign" : "YES",
  "graffiti" : "YES",
  "date" : "18-12-2012 18:58",
  "dewinterized" : "YES",
  "HVAC" : "YES",
  "why_no_mat" : "not entered",
  "is_lockbox" : "YES",
  "financing_mat" : "YES",
  "yard_cond" : "YES",
  "marketing_mat" : "YES",
  "HVAC_missing" : "not entered",
  "agent_info" : "YES",
  "e_cond" : "YES",
  "e_key" : "YES",
  "pool_sec" : "YES",
  "pool_clean" : "YES"
} 
```

并使用以下代码发送：

```
 NSDictionary * info = [NSDictionary dictionaryWithObjects:values forKeys:keys];
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:info options:NSJSONWritingPrettyPrinted error:&error];

NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://uofi-bars.com/sendEmail.php"]];
[req addValue:@"Content-Type: application/json" forHTTPHeaderField: @"Content-Type"];
[req setHTTPMethod:@"POST"];
[req setHTTPBody:jsonData];

[NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&error]; 
```

我对php完全陌生，这让我头疼了很长一段时间。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:22:22.863

这是不正确的`if(is_null($decoded) == NULL)`。`PHP is_null`返回一个`boolean`值。所以你需要使用`if(is_null($decoded) === FALSE)`or `if(is_null($decoded) === TRUE)`。

# data-binding - C# 错误：无法从已关闭的阅读器中读取...？

> ID：13944157
> 
> 赞同：1
> 
> 时间：2012-12-19T01:16:11.610
> 
> 标签：data-binding

我在下面有这段代码。获取数据并将数据属性设置为收集的值。

```
public struct TrblShootData
    {
       public List<string> Logins;
       public IEnumerable<Hieracrhy> Hierarchy;
       public IEnumerable<EmployeeTeam> EmpTeam; 
    }

  public TrblShootData TroubleShootData
   {
       get;
       private set;
   }

 class DataGetter
 { 
 public void GetData(string FirstName, string LastName, string Login, string Email, bool isFirstName, bool isLastName, bool isLogin, bool isEmail)
    {         
        List<string> logins = null;
        IEnumerable<Hieracrhy> hier = null;
        IEnumerable<EmployeeTeam> tmemp = null;

        TrblShootData tsData = new TrblShootData();

        queries q = BuildQuery(FirstName, LastName, Login, Email, isFirstName, isLastName, isLogin, isEmail);

        if (q.isValidQueries)
        {
            DataContext1 mscDB = new DataContext1 ();

            using (DataContext2 opsDB = new DataContext2 ())
            {                    
                tmemp = opsDB.ExecuteQuery<EmployeeTeam>(q.qryEmployeeTeam);

            }

            using (DataContext3 rptDB = new DataContext3 ())
            {                    
                hier = rptDB.ExecuteQuery<Hieracrhy>(q.qryHierarchy);

                if (hier != null)
                {
                    logins = hier.Select(s => s.SalesRepLogin).Distinct().ToList();
                }

            }

            tsData.EmpTeam = tmemp.Select(r=>r);
            tsData.Hierarchy = hier.Select(r => r);
            tsData.Logins = logins.Select(r => r).ToList();

            TroubleShootData = tsData;

        }//if                  
    }
  } 
```

从另一个班级我尝试这样做：

```
 tshtr.GetData(txtFirstName.Text, txtLastName.Text, txtLogin.Text, txtEmail.Text, chkFirstName.Checked, chkLastName.Checked, chkLogin.Checked, chkEmail.Checked);

        gvEmpTeams.DataSource = tshtr.TroubleShootData.EmpTeam;
        gvHierarchy.DataSource = tshtr.TroubleShootData.Hierarchy;

        gvEmpTeams.DataBind();
        gvHierarchy.DataBind(); 
```

但是在 DataBind() 我收到一个错误，说我无法从封闭的阅读器中阅读。

我不明白为什么在我在 usings 中分配值后按上述设置属性时会引发此错误。所以我没有看到这是如何尝试使用封闭式阅读器。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:19:22.983

由于延迟执行，您的查询仅在您关闭 DataContext 后数据绑定引擎枚举其结果时执行。

您需要`.ToList()`在关闭 DataContext 之前调用以强制立即对其进行评估。

# jquery - Jquery Mobile Div 的高度不会自动调整（或滚动）

> ID：13944159
> 
> 赞同：1
> 
> 时间：2012-12-19T01:16:15.960
> 
> 标签：jquery, css, html, jquery-mobile

您好，这是我的 html 代码。我基本上尝试的是：

1-用户在 textaea id="tArea" 中粘贴一些内容

2-当他点击一个名为“完成”的按钮时，textarea 的内容被分配给具有 id="tDiv" 的 div 的内部 html

3-讨论的 Div 对其内容应用了不同的字体系列（使用 css3 并且它工作得很好），但是当用户的数据变大时，**div 既不能提供滚动条也不能自动调整它的高度。**

请帮助，我已经消耗了很多小时，但我仍然迷路了！

```
<!DOCTYPE html>
<html>
<head>
<meta name=viewport content="user-scalable=no,width=device-width" />
<link rel=stylesheet href="resources/jquery.mobile.css" />
<script src="resources/jquery.js"></script>
<script src="resources/jquery.mobile.js"></script>
<style>
@font-face {
  font-family: 'Donegal One';
  font-style: normal;
  font-weight: 400;
  src: url(fontfile.ttf) format('truetype');
}
.hindi, textarea {

font-family: 'Donegal One', serif !important;
overflow:auto;
-webkit-overflow-scrolling:touch;
}
</style>
<script>

</script>
</head>
<body>
<div data-role=page id=sendMoneyWin data-add-back-btn=true>
        <div data-role=header data-theme="c" >
            <h1>Font Changer</h1>
        </div>      
        <div data-role=content>
        <script>

            function transformFont(){
                $("#tDiv").html($("#tArea").attr("value"));
                //$("#tArea").css("display","none");
                $("#tArea").prop("readonly",true);
                $("#tDiv").css("display","block");
                $("#doneBtn").css("display","none");
                $("#reloadBtn").css("display","inline");
            }
            function clearAllAndReload(){
                $("#tDiv").html("");
                $("#tArea").attr("value","")
                //$("#tArea").css("display","block");
                //$("#tDiv").css("display","none");
                $("#tArea").prop("readonly",false);
                $("#doneBtn").css("display","inline");
                $("#reloadBtn").css("display","none");
            }
        </script>
        <b>Please paste the contents here, in the below text box :</b><br />
        <span id="reloadBtn" style="display:none;"><input type="button" value=" Reload " onClick="clearAllAndReload()" data-inline=true/></span>
        <span id="doneBtn" ><input type="button" value=" Done " onClick="transformFont()"  data-inline=true /></span>

        <textarea id="tArea" class="hindi" style="" ></textarea>
        <div id="tDiv" class="hindi" data-scroll='true' style="white-space: pre-wrap;overflow:visible;-webkit-overflow-scrolling:touch;display:none;"></div>
        </div>

        <div data-role=footer data-theme="c">
            <span style="float:right;"><small>Created & Maintained by TechBhardwaj, 2012&nbsp;&nbsp;&nbsp;</small></span>
        </div>  
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:49:50.957

这是一个基本的 css，div 想要表现得像一个可调整大小的容器，除非你给它它的尺寸。

这对您有用，删除所有 div 样式并将其添加到样式块中：

I. 添加一个溢出：滚动到 div 并将其从样式中删除：

```
#tDiv {
    /* SCROLL FIX */
    width: 100%;
    height: 200px;   
    overflow:scroll;
    /* END FIX */
    background: #aabbcc;
    white-space:
    pre-wrap;
    -webkit-overflow-scrolling:touch;
    display:none;        
} 
```

这会给你一个滚动条。示例：http: [//jsfiddle.net/Gajotres/DMqX7/](http://jsfiddle.net/Gajotres/DMqX7/)

二、使其可调整大小：

```
#tDiv {
    /* RESIZE FIX */
    width: 100%;
    height: 200px;   
    min-height: 200px;
    height:auto !important;        
    /* END FIX */
    background: #aabbcc;
    white-space:
    pre-wrap;
    -webkit-overflow-scrolling:touch;
    display:none;        
} 
```

示例：http: [//jsfiddle.net/Gajotres/aq8K3/](http://jsfiddle.net/Gajotres/aq8K3/)

# php - 强化 php 会话 - 比较错误

> ID：13944160
> 
> 赞同：5
> 
> 时间：2012-12-19T01:16:22.390
> 
> 标签：php, session

我正在努力加强我的会话并找到下面的代码。我的问题是这条线`isset($_SESSION['last_ip']) !== $_SERVER['REMOTE_ADDR']`。

当我回显比较时，IP 编号是相同的，但那行代码将两者进行比较是不同的。如果我比较它，`!=`那么比较有效。这是为什么？两个值不应该完全相同吗？有什么建议可以解决`===`吗？

```
ini_set('session.cookie_httponly', true);
session_start();
if ( isset($_SESSION['last_ip']) === false ) {
    $_SESSION['last_ip'] = $_SERVER['REMOTE_ADDR'];
}
if ( isset($_SESSION['last_ip']) !== $_SERVER['REMOTE_ADDR'] ) {
    echo $_SESSION['last_ip'] . ' / ' . $_SERVER['REMOTE_ADDR']; // the output is identical
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T01:20:16.850

```
if ( isset($_SESSION['last_ip']) !== $_SERVER['REMOTE_ADDR'] ) { 
```

您正在检查是否设置了一个，而另一个与该布尔值匹配。删除`isset`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T01:32:16.547

就个人而言，我将在 IF 序列中使用 AND 运算符解决这个问题，例如：

```
if ( isset($_SESSION['last_ip']) && $_SESSIOn['last_ip'] != $_SERVER['REMOTE_ADDR'] ) { 
```

这有帮助吗？

# ruby-on-rails - 当您可以只使用“=”（来自 Hartl 的教程）时，为什么需要分配方法？

> ID：13944163
> 
> 赞同：4
> 
> 时间：2012-12-19T01:16:32.763
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

[如第 8.2.3 章](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-current_user)所述，我很难理解所需的分配功能。Hartl 的教程。

作为上下文，他专注于以下`sign_in`函数的第二行：

```
 def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user #<-- this line
  end 
```

在他提到因为它是一项*任务*的地方，它必须单独定义为

```
def current_user=(user)
    @current_user = user
end 
```

其中方法`current_user=`明确设计用于处理**分配**给`current_user`. 我的困惑是：

1.  为什么这甚至是必要的？我认为一个简单的`=`可以让你分配东西。例如`user.email = hello@kitty.com`

2.  此外，当他最终将编码时`redirect_to current_user`，如何将属于的东西`SessionsController`翻译成由 控制的视图`UsersController`？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T01:27:09.340

原因是需要避免方法调用和变量赋值之间的混淆（对于解释器/VM）

```
def foo
  # Two completely different things!
  bar = "baz" # assigns baz to local variable bar
  self.bar = "baz" # invokes the bar= method with parameter of baz
end 
```

那里发生的事情是他正在做两件事，首先`current_user=`使用用户对象调用方法，其次，将其设置为`@current_user`（这不是一个很好的例子 - 如果你要在现实生活中做一种`current_user=`方法，例如设置会话变量）。

其次`redirect_to current_user`相当于`redirect_to user_path(current_user)`- 查看[http://api.rubyonrails.org/classes/ActionController/Redirecting.html](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)了解更多详细信息，其中解释了 redirect_to 可以采用的不同参数类型。请注意，这是一个重定向，而不是渲染 - 所以这里发生了第二个 HTTP 请求。

# asp.net - 新处理程序触发 Visual Studio 中的调试失败

> ID：13944166
> 
> 赞同：2
> 
> 时间：2012-12-19T01:16:56.023
> 
> 标签：asp.net, visual-studio, iis, visual-studio-debugging

我有一个可用的现有 asp.net 网站。当我（F5）调试它工作。但是，我正在为该站点开发一个新的 IHttpHandler。一旦我将该`<system.webServer><handler></handler></system.webServer>`部分添加到 web.config 视觉工作室拒绝 F5 调试并出现错误：

> 无法在 Web 服务器上开始调试。Web 服务器找不到请求的资源。

处理程序到位后，如果我附加到进程，那么我可以成功附加到进程（并且使用该`System.Diagnostics.Debugger.Break();`行我可以单步执行处理程序的代码）。我还将我的处理程序添加到另一个网站，并且能够重现此问题。

我的环境：.NET 4.0，Visual Studio 2012，在 Windows 7 上以集成模式使用本地 IIS。

在尝试清理要粘贴到此处的代码时，我最终注释掉了处理程序中除样板之外的所有内容，但问题仍然存在。以下是代码片段：

处理程序类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MySvc
{
    public class MyServiceHandler : IHttpHandler
    {
        public bool IsReusable
        {
            get { return false; }
        }

        public void ProcessRequest(HttpContext context)
        {
//#if DEBUG
//            System.Diagnostics.Debugger.Break();
//#endif
        }
    }
} 
```

和 web.config：

```
<?xml version="1.0"?>
<configuration>
    <appSettings>
        <clear/>
        <add key="A1" value="sanitized"/>
        <add key="A2" value="sanitized"/>
    </appSettings>
    <connectionStrings>
        <clear/>
        <add name="MyDatabase" connectionString="sanitized"/>
    </connectionStrings>
    <system.web>
        <compilation debug="true"/>
        <httpRuntime maxRequestLength="1048576" executionTimeout="3600"/>
        <sessionState mode="SQLServer" cookieless="false" timeout="5" allowCustomSqlDatabase="true" cookieName="My.Session"
                      sqlConnectionString="sanitized" />
        <machineKey
            validationKey="sanitized"
            decryptionKey="sanitized"
            validation="sanitized" decryption="sanitized" />
    </system.web>
    <system.webServer>
        <handlers>
            <clear />
            <add name="MyHandler" path="*.bwsvc" verb="*" type="MySvc.MyServiceHandler, MySvc" />
        </handlers>
    </system.webServer>
</configuration> 
```

我已经阅读了[Web 服务器找不到请求的资源](https://stackoverflow.com/questions/287897/the-web-server-could-not-find-the-requested-resource)和许多其他类似的文章。它似乎都不适用于这种情况，没有提到导致问题的处理程序。

我的处理程序中是否缺少某些内容，或者这是 Visual Studio 不支持的内容或其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:22:47.220

我发现了问题。事实证明`<clear />`，该`<handlers>`部分是导致问题的原因。一旦删除该行，调试器就会再次工作（以及许多其他事情）。

由于我的应用程序池处于集成管道模式，处理程序部分实际上继承自服务器设置，这些设置指定处理诸如 *.aspx 等核心事物的内容，因此明确它意味着 IIS 不知道如何处理我的应用程序中的*任何内容*。

# matlab - 在图像上写入字符串

> ID：13944169
> 
> 赞同：1
> 
> 时间：2012-12-19T01:17:24.097
> 
> 标签：matlab, image-processing, sift

我正在尝试使用 sift 在 2 个不同的图像之间进行匹配，我想要做的是在图像上写一个文本（数字）。

```
hold on;
cols1 = size(im1,2);
for i = 1:1: size(des1,1)
  if (match(i) > 0)
    line([loc1(i,2) loc2(match(i),2)+cols1], [loc1(i,1) loc2(match(i),1)], 'Color', 'b');
    s = int2str(i);
    text (loc1(1,2), loc2(match(1),2)+cols1,s,...
    'FontSize',14,...
    'HorizontalAlignment','center');  
  end
end

hold off; 
```

我收到一个错误下标索引必须是真正的正整数或逻辑。在 `text (loc1(1,2), loc2(match(1),2)+cols1,s,...`

我不知道出了什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:02:10.080

`match(1)`在该行中可能为零（或至少不是正整数）。我注意到你检查了`match(i)`，但没有`match(1)`。你的意思是使用`match(i)`？那是，

```
text (loc1(1,2), loc2(match(i),2)+cols1,s,... 
```

# c# - 如何使用模型属性作为接口在 ASP.NET Web API 中发布

> ID：13944176
> 
> 赞同：6
> 
> 时间：2012-12-19T01:17:56.397
> 
> 标签：c#, json, asp.net-web-api, model-binding

假设我有一个模型：

```
public class Menu
{
    public string Name { get; set; }
    public IMenuCommand Next { get; set; }
} 
```

`IMenuCommand`可能有不同的实现，例如：

```
public class NextStepCommand : IMenuCommand
{
    public int Step { get; set; }
}

public class VoiceCommand : IMenuCommand
{
    public string Message { get; set; }
} 
```

我想将带有不同命令的菜单发布到 ASP.NET Web API 服务。我怎样才能做到这一点？

下面的请求将创建一个指定的对象`Name`，但`Next`命令将为空：

```
POST http://localhost/api/menus: {"name":"bob","next":{"step":1}}
Returns 201: {"Name":"bob","Next":null} 
```

默认 Web API 绑定程序无法将我的请求参数映射到所需的 C# 类型——当然这是一个棘手的部分。我可以为基于接口的属性使用一些“已知类型”属性，还是有任何其他方法来处理这种情况，可能是自定义模型绑定器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T03:23:34.640

我认为您正在寻找的是 Json.NET 对类型名称处理的支持。它允许您通过添加“$type” json 标记来指定要反序列化的类型。你可以试试这段代码，看看它是如何工作的：

```
Console.WriteLine(JsonConvert.DeserializeObject<Menu>(
    @"{
         ""name"":""bob"",
         ""next"":
         {
           ""$type"" : ""ConsoleApplication.NextStepCommand,ConsoleApplication"",
           ""step"" : 1
         }
    }",
    new JsonSerializerSettings() { TypeNameHandling = TypeNameHandling.Auto }).Next); 
```

您必须用自己的名称替换名称空间和程序集名称，但您应该看到 NextStepCommand 被正确反序列化。

在 WebAPI 中，您需要调整您的请求以添加“$type”类型信息，并且您需要像这样启用 TypeNameHandling：

```
config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.Auto; 
```

# plone - 如何向 Plone 添加新语言

> ID：13944181
> 
> 赞同：1
> 
> 时间：2012-12-19T01:18:28.060
> 
> 标签：plone

我们需要一种方法来将页面或文件分类为 Plone/Zope 标准语言列表中未知的语言。我们不需要任何翻译或其他功能，只需将项目分类为这些新语言。处理此问题的最佳实践方法是什么？我们目前正在考虑使用 ATVOCabularyManager 导入新的语言列表，然后创建一个插件，该插件使用 schemaextender 来调整所有 Plone 内容上 DC 元数据语言字段使用的词汇表。是否有更多开箱即用的方法来做到这一点？

我们要添加的一些语言没有标准语言代码，例如 Koori、Assyrian、Soranî、Tetum、Dari 和 Karen。我们也有类似但相关的需求，即使用这些名称显示繁体中文和简体中文，而不是使用中文 China 和 Chinese HongKong。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:25:44.453

与[在 Plone 中添加新语言](https://stackoverflow.com/questions/13944285/add-new-language-in-plone)类似，最好的方法是联系 i18n 团队以添加新语言，即使您还没有翻译字符串。它们可以逐步提供，以防万一也可以出于个人目的而被覆盖。

# asp.net-mvc - ASP.net VB Gridview 更新转换值

> ID：13944184
> 
> 赞同：1
> 
> 时间：2012-12-19T01:18:49.427
> 
> 标签：asp.net-mvc, gridview

我有一个带有 MS Access 数据库数据源的 GridView。这是

> SELECT * FROM [TODO] ORDER BY [Name]

更新查询是

> UPDATE [TODO] SET [Staff] = CInt(@Staff), [Title] = @Title, [Deadline] = @Deadline, [Status] = CInt(@Status) WHERE [todoID] = @ID

返回的两个值是另一个表的外键（整数） - Status 和 Staff 所以我用 DropDownLists 替换了两个 EditItemTemplates，为它们分配了其他 DataSources 并将所选索引绑定到外键。

这导致 GridView 生成此 HTML：

```
<select name="ctl00$ContentPlaceHolder1$GridView1$ctl02$DropDownList1" id="ContentPlaceHolder1_GridView1_DropDownList1_0">
                <option value="1">John Doe</option>
                <option value="2">William Jenkins</option>
                <option value="3">Kate Piper</option>
                <option selected="selected" value="4">Alison Fisher</option>

</select> 
```

这会在更新记录时导致以下 ASP.NET 错误

> 异常详细信息：System.Data.OleDb.OleDbException：无效使用 Null

我还尝试不在查询中强制转换值 - 仍然没有成功，但抛出了另一个错误：

> 从“DBNull”类型到“Integer”类型的转换无效。

我是 ASP.NET 的新手，我所有的经验都是基于其他语言的。我将非常感谢任何帮助

# asynchronous - VB Async/await 不适用于数据表

> ID：13944190
> 
> 赞同：4
> 
> 时间：2012-12-19T01:19:27.040
> 
> 标签：asynchronous, async-await

我在将此方法从 c# 转换为 VB 时遇到一些问题，它在 C# 中运行完美：

```
 private async void Test()
    {
        DataSet dt;
        var client = new xxxSoapClient();

        dt = await client.ToDoAsync();
    } 
```

我在 VS 2012 中使用 Async/await，在 c# 中一切正常，但是当尝试在 VB 中执行完全相同的操作时，它返回一个错误，表明 system.void 不可等待！！！

```
Private Async Sub Test()
    Dim dt As DataTable

    Dim Client As New xxxSoapClient
    dt = Await Client.ToDoAsync()
End Sub 
```

网络服务只是返回一个简单的数据表，有人想吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:12:51.853

VS2012 之前的 WCF 代理生成器将生成`*Async`方法，这些方法使用事件返回`void`并指示它们的完成。从 VS2012 开始，默认情况下 WCF 代理生成器将生成`*Async`返回`Task<T>`.

尝试重新生成代理。

如果这不起作用，请检查您的“高级”选项以了解要创建的异步方法的样式。共有[三种风格](http://msdn.microsoft.com/en-us/library/jj152938.aspx)： 异步编程模型（APM）使用`Begin*`// `End*`；`IAsyncResult`基于事件的异步模式 (EAP)使用`*Async`// `*Completed`; `AsyncCompletedEventArgs`基于任务的异步模式 (TAP) 使用`*Async`/ `Task`。

TAP 自然地与`async`/一起工作`await`，所以这就是你想要的。

# python - python从多维数组中选择除一列之外的所有列

> ID：13944193
> 
> 赞同：1
> 
> 时间：2012-12-19T01:19:49.000
> 
> 标签：python, arrays, numpy

我正在尝试从多维数组中选择除一列之外的所有元素。

我认为它是这样的：blah[:,[1,]]

所以如果数组是：[[1,2,3],[4,5,6]]

我想得到：[[2,3],[5,6]]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:24:49.200

```
In [8]: ar = np.array([[1,2,3], [4,5,6]])

In [9]: ar
Out[9]: 
array([[1, 2, 3],
       [4, 5, 6]])

In [11]: ar[:, 1:]
Out[11]: 
array([[2, 3],
       [5, 6]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T01:28:09.010

我建议你使用这个：

```
a = [[1,2,3],[4,5,6]]
res = [sub[1:] for sub in a] 
```

希望它有效！

# php - PHP：处理数千个条目，脚本在一定数量后死亡

> ID：13944194
> 
> 赞同：2
> 
> 时间：2012-12-19T01:19:50.940
> 
> 标签：php, .htaccess, rets

我正在调用一个响应 4000 多条记录的 MLS 服务……我需要处理每一条记录，并在每个列表中插入所有元数据。

我能够获得大约 135 条（* 150 条元记录），然后脚本显然停止响应，或者至少停止处理其余数据。

我已将以下内容添加到我的`.htaccess`文件中：

```
php_value memory_limit 128M 
```

但这似乎对我没有任何帮助。我是否需要一次处理大块数据，还是有其他方法可以确保脚本确实完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:21:41.337

您可能应该启用`display_errors`并`error_reporting`更好地分析脚本未处理的原因。

但是，您还应该考虑确保调用不会达到时间限制：

```
set_time_limit( 0 ); 
```

这将为您提供无限的时间段。您也可以将其设置为相对较高的值，例如`600`（10 分钟）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:22:28.193

这不是内存 - 它很可能是脚本执行时间。

尝试将此添加到您的 htaccess，然后重新启动 apache：

```
php_value max_execution_time 259200 
```

# java - Java xpath以字符串形式返回整个元素

> ID：13944197
> 
> 赞同：6
> 
> 时间：2012-12-19T01:20:17.563
> 
> 标签：java, xml, xpath

我需要使用 java xpath 通过 id 将 xml 元素作为字符串返回。

给...

```
<svg>
    <g id="Background">
    </g>
    <g id="Outline">
        <polygon fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"     stroke-miterlimit="10" points=" 119.813,57.875 119.188,57.87" />
    </g>
    <g id="Base_Colour" transform="matrix(0.25 0 0 0.25 0 0)">
        <path fill="#ADB1AF" d="M112.25,208l-8,20.25l-0.5-1.75l0.75-0.5v-1.5l0.75-0.5v-1.5L106,222v-1.5l0.75-0.5v-1.5l0.75-0.5v-1.5"/>
        <path fill="#625595" d="M112.25,208l5.25-14.5l30-30.25l2.25-1.5l41.5-20.5l49.75-9.5h4.25l49,3l48.75"/>
    </g>
</svg> 
```

返回的值必须是...

```
<g id="Outline">
    <polygon fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"     stroke-miterlimit="10" points=" 119.813,57.875 119.188,57.87" />
</g> 
```

我已经广泛搜索，但我尝试过的任何东西都无法返回整个元素。需要 Xpath，因为我想通过 id 查询任何级别的 g 标签。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T22:18:20.797

我找到的解决方案是使用 xpath 获取 org.w3c.dom.Node（DOM 也可以）。然后，我从节点创建了一个 javax.xml.transform.dom.DOMSource，并使用 javax.xml.transform.TransformerFactory 将其转换为字符串。

```
Node node = // the node you want to serialize
xmlOutput = new StreamResult(new StringWriter());
transformer = TransformerFactory.newInstance().newTransformer();
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
transformer.transform(new DOMSource(node), xmlOutput);
String nodeAsAString = xmlOutput.getWriter().toString(); 
```

这很容易被分解为一个类以供重用。不幸的是，Java 中没有 .OuterXml 属性，而 .NET 中没有。现在所有的.NETer 都可以傻笑了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:27:24.767

xpath 永远不会返回包含 XML 语法的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-26T22:02:17.460

有时您必须在没有 Java 中的 xml 文档的情况下执行此操作；我发现下面的代码非常使用完整

```
import java.io.IOException;
import java.io.StringReader;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

String responseMsg = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><YourMessage><MyTag>MyTagValue</MyTag></YourMessage>";
String expressionToExract = "/YourMessage/MyTag";
String xmlNodeWithData = xpathTester.getXmlNode(responseMsg, expressionToExract);
//above xmlNodeWithData will have this value '<MyTag>MyTagValue</MyTag>'

private String getXmlNode(String resultMsg, String expression)
        throws ParserConfigurationException, SAXException, IOException, XPathExpressionException {
    String xmlNodeWithData="";
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    InputSource is = null;
    StringReader sr = null;
    sr = new StringReader(resultMsg);
    is = new InputSource(sr);

    Document doc = builder.parse(is);
    XPathFactory xPathfactory = XPathFactory.newInstance();
    XPath xpath = xPathfactory.newXPath();
    XPathExpression expr = xpath.compile(expression);

    Node node = (Node)expr.evaluate(doc, XPathConstants.NODE);      
    xmlNodeWithData += "<" + node.getNodeName() + ">";
    NodeList nodeList = node.getChildNodes();

    for (int nodeIndex=0; nodeIndex < nodeList.getLength(); nodeIndex++) {
        Node nodeChild = nodeList.item(nodeIndex);          
        if (nodeChild.getNodeName().contains("#text")) {
            xmlNodeWithData += nodeChild.getTextContent();
            continue;
        }
        xmlNodeWithData += "<" + nodeChild.getNodeName() + ">";         
        xmlNodeWithData += nodeChild.getTextContent();
        xmlNodeWithData += "</" + nodeChild.getNodeName() + ">";
    }
    xmlNodeWithData += "</" + node.getNodeName() + ">";
    if (sr != null) {
        sr.close();
    }
    return xmlNodeWithData;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T19:03:01.433

我用这段代码解决了我的问题：

```
public static String getOuterXml(Node node)
    throws TransformerConfigurationException, TransformerException {
    Transformer transformer = TransformerFactory.newInstance().newTransformer();
    transformer.setOutputProperty("omit-xml-declaration", "yes");

    StringWriter writer = new StringWriter();
    transformer.transform(new DOMSource(node), new StreamResult(writer));
    return writer.toString();         
} 
```

致谢：[chick.Net](http://chicknet.blogspot.cl/2007/05/outerxml-for-java.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-19T05:38:22.070

**我不了解 Java，但在 .NET 世界中，人们会使用**：

```
doc.DocumentElement.SelectSingleNode("/*/g[@id='Outline']").OuterXml 
```

# javascript - AngularJS：从 ng-repeat 动态分配控制器

> ID：13944207
> 
> 赞同：23
> 
> 时间：2012-12-19T01:21:03.500
> 
> 标签：javascript, dynamic, controller, angularjs, assign

我正在尝试为包含的模板动态分配一个控制器，如下所示：

```
<section ng-repeat="panel in panels">
    <div ng-include="'path/to/file.html'" ng-controller="{{panel}}"></div>
</section> 
```

但 Angular 抱怨这`{{panel}}`是未定义的。

我猜这还*没有*`{{panel}}`定义（因为我可以在模板内回显）。*`{{panel}}`*

 *我已经看到很多人设置`ng-controller`等于这样的变量的例子：`ng-controller="template.ctrlr"`. 但是，如果不创建重复的并发循环，我无法弄清楚如何在需要`{{panel}}`时获得可用的价值`ng-controller`。

PS我也尝试`ng-controller="{{panel}}"`在我的模板中设置（认为到那时它一定已经解决了），但没有骰子。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T04:18:38.370

您的问题是 ng-controller 应该指向控制器本身，而不仅仅是带有控制器名称的字符串。

因此，您可能希望将 $scope.sidepanels 定义为带有指向控制器的指针的数组，可能是这样的：

```
$scope.sidepanels = [Alerts, Subscriptions]; 
```

这是关于 js fiddle [http://jsfiddle.net/ADukg/1559/的工作示例](http://jsfiddle.net/ADukg/1559/)

但是，当您可能想在 ngRepeat 中设置控制器时，我发现所有这些情况都很奇怪。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-08T07:52:04.793

*要在模板中动态设置控制器，有对与控制器关联的构造*函数的引用会有所帮助。控制器的构造函数是传递给`controller()`Angular[模块 API](https://docs.angularjs.org/api/ng/type/angular.Module)方法的函数。

这样做会有所帮助，因为如果传递给[`ngController`](https://docs.angularjs.org/api/ng/directive/ngController)指令的字符串不是注册控制器的名称，则将`ngController`字符串视为要在当前范围内评估的表达式。此范围表达式需要评估为控制器*构造函数*。

例如，假设 Angular 在模板中遇到以下情况：

```
ng-controller="myController" 
```

如果没有`myController`注册该名称的控制器，那么 Angular 将查看`$scope.myController`当前包含的控制器。如果这个键存在于作用域中并且对应的值是控制器*构造函数*，那么将使用控制器。

这在[`ngController`](https://docs.angularjs.org/api/ng/directive/ngController)文档中对参数值的描述中提到：“全局可访问构造函数的名称或在当前范围内计算为构造函数的表达式的名称。” Angular 源代码中的代码注释在[此处`src/ng/controller.js`](https://github.com/angular/angular.js/blob/02354201963dc455c6435446cdd321b7517732a8/src/ng/controller.js#L43)更详细地说明了这一点。

默认情况下，Angular 无法轻松访问与控制器关联的构造函数。`controller()`这是因为当您使用Angular 的[模块 API](https://docs.angularjs.org/api/ng/type/angular.Module)方法注册控制器时，它会将您传递给私有变量的构造函数隐藏起来。[您可以在$ControllerProvider 源代码](https://github.com/angular/angular.js/blob/02354201963dc455c6435446cdd321b7517732a8/src/ng/controller.js#L31)中看到这一点。（`controllers`此代码中的变量是私有变量`$ControllerProvider`。）

我对这个问题的解决方案是创建一个名为`registerController`注册控制器的通用帮助服务。此服务在注册控制器时公开控制器*和*控制器构造函数。这允许控制器以正常方式和动态方式使用。

`registerController`这是我为执行此操作的服务编写的代码：

```
var appServices = angular.module('app.services', []);

// Define a registerController service that creates a new controller
// in the usual way.  In addition, the service registers the
// controller's constructor as a service.  This allows the controller
// to be set dynamically within a template.
appServices.config(['$controllerProvider', '$injector', '$provide',
  function ($controllerProvider, $injector, $provide) {
    $provide.factory('registerController',
      function registerControllerFactory() {
        // Params:
        //   constructor: controller constructor function, optionally
        //     in the annotated array form.
        return function registerController(name, constructor) {
            // Register the controller constructor as a service.
            $provide.factory(name + 'Factory', function () {
                return constructor;
            });
            // Register the controller itself.
            $controllerProvider.register(name, constructor);
        };
    });
}]); 
```

以下是使用服务注册控制器的示例：

```
appServices.run(['registerController',
  function (registerController) {

    registerController('testCtrl', ['$scope',
      function testCtrl($scope) {
        $scope.foo = 'bar';
    }]);

}]); 
```

上面的代码在 name 下注册了控制器`testCtrl`，它还将控制器的构造函数公开为一个名为 的服务`testCtrlFactory`。

现在您可以以通常的方式在模板中使用控制器——

```
ng-controller="testCtrl" 
```

或动态地——

```
ng-controller="templateController" 
```

要使后者工作，您必须在当前范围内具有以下内容：

```
$scope.templateController = testCtrlFactory 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T15:12:03.270

我相信你有这个问题，因为你定义你的控制器是这样的（就像我习惯做的那样）：

```
app.controller('ControllerX', function() {
    // your controller implementation        
}); 
```

如果是这种情况，您不能简单地使用对`ControllerX`的引用，因为控制器实现（或“类”，如果您想这样称呼它）不在全局范围内（而是存储在应用程序上`$controllerProvider`）。

我建议您使用模板而不是动态分配控制器引用（甚至手动创建它们）。

**控制器**

```
var app = angular.module('app', []);    
app.controller('Ctrl', function($scope, $controller) {
    $scope.panels = [{template: 'panel1.html'}, {template: 'panel2.html'}];        
});

app.controller("Panel1Ctrl", function($scope) {
    $scope.id = 1;
});
app.controller("Panel2Ctrl", function($scope) {
    $scope.id = 2;
}); 
```

**模板（模拟）**

```
<!-- panel1.html -->
<script type="text/ng-template" id="panel1.html">
  <div ng-controller="Panel1Ctrl">
    Content of panel {{id}}
  </div>
</script>

<!-- panel2.html -->
<script type="text/ng-template" id="panel2.html">
  <div ng-controller="Panel2Ctrl">
    Content of panel {{id}}
  </div>
</script> 
```

**看法**

```
<div ng-controller="Ctrl">
    <div ng-repeat="panel in panels">
        <div ng-include src="panel.template"></div>        
    </div>
</div> 
```

jsfiddle：http: [//jsfiddle.net/Xn4H8/](http://jsfiddle.net/Xn4H8/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-22T10:24:15.000

另一种方法是不使用 ng-repeat，而是使用指令将它们编译成存在。

**HTML**

```
<mysections></mysections> 
```

**指示**

```
angular.module('app.directives', [])
    .directive('mysections', ['$compile', function(compile){
        return {
            restrict: 'E',
            link: function(scope, element, attrs) {
                for(var i=0; i<panels.length; i++) {
                    var template = '<section><div ng-include="path/to/file.html" ng-controller="'+panels[i]+'"></div></section>';
                    var cTemplate = compile(template)(scope);

                    element.append(cTemplate);
                }
            }
        }
    }]); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-05T11:21:02.230

好的，我认为这里最简单的解决方案是在文件模板上明确定义控制器。假设你有一个数组：

```
$scope.widgets = [
      {templateUrl: 'templates/widgets/aWidget.html'},
      {templateUrl: 'templates/widgets/bWidget.html'},
]; 
```

然后在你的 html 文件上：

```
<div ng-repeat="widget in widgets">
    <div ng-include="widget.templateUrl"></div>
</div> 
```

和解决方案aWidget.html：

```
<div ng-controller="aWidgetCtrl">
   aWidget
</div> 
```

bWidget.html：

```
<div ng-controller="bWidgetCtrl">
   bWidget
</div> 
```

就那么简单！您只需在模板中定义控制器名称。由于您将控制器定义为 bmleite 说：

```
app.controller('ControllerX', function() {
// your controller implementation        
}); 
```

那么这是我能想到的最好的解决方法。这里唯一的问题是如果你有 50 个控制器，你必须在每个模板上明确定义它们，但我想你无论如何都必须这样做，因为你有一个手动设置控制器的 ng-repeat。*

# mysql - MySQL 查询 - 仅使用最新版本的条目进行内部连接

> ID：13944208
> 
> 赞同：4
> 
> 时间：2012-12-19T01:21:11.310
> 
> 标签：mysql, sql, inner-join

我有一张桌子，`jobs`用各种信息命名。每个作业都有一个作业编号（唯一 ID）。

然后是另一个表，命名为`purchaseOrders`具有 jobID 的 FK 和 poID 的 PK。

编辑采购订单条目时，会保存旧信息……意思是，我创建了一个新的采购订单条目（新的唯一 ID）。

我要做的是编写一个查询，**从“jobs”中选择所有字段，从“purchaseOrders”中选择所有字段，但只选择该作业的最新 poID**。

例如：

```
jobID      Name      State            poID      time      jobID
==========================            ==========================
1          foo       fl               1         1:00      1
2          bar       ga               2         1:10      1
3          zzz       ny               3         1:20      1
                                      4         2:00      2
                                      5         2:01      2
                                      6         2:30      2
                                      7         3:00      3
                                      8         3:40      3
                                      9         3:15      3 
```

如何运行一个查询，从两个表中选择所有列，但只包含特定 jobID 的最高 poID 信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T01:24:28.930

```
SELECT  a.*, c.*
FROM    jobs a
        INNER JOIN
        (
            SELECT jobID, MAX(time) maxVal
            FROM purchaseOrders
            GROUP BY jobID
        ) b ON a.jobID = b.jobID
        INNER JOIN purchaseOrders c
            ON c.jobID = b.JobID AND
                c.time = b.maxVal 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/c67d2/2)

# sql - 来自同一张表的多个总和

> ID：13944214
> 
> 赞同：1
> 
> 时间：2012-12-19T01:21:54.953
> 
> 标签：sql

我什至不确定 SUM 是否是正确使用的函数。这是我的用户视图的样子，它将用户与积分连接起来，并根据团队 ID 从团队表中获取他们的团队名称：

```
Person  TeamName    Points
10      Team A          500
20      A-Team           20
30      Party People    100 
40      Test!           150
50      WhooHoo         200
60      Party People    750
70      Test!            14 
```

如您所见，有两个人具有相同的团队名称，我想按团队分组显示结果如下：

```
TeamName        Points
Team A          500
A-Team           20
Party People    850
Test!           164
WhooHoo         200 
```

也许我需要重新开始......这是我必须处理的：

```
Users           teams
user-id         team-id
name            teamName
points
teamid 
```

任何帮助将非常感激！！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:28:46.763

```
Select teamName, sum(Points) from users, teams 
on user.team-id = team.team-id
group by teamName 
```

# javascript - 具有多个允许条件的 Javascript if 语句

> ID：13944216
> 
> 赞同：11
> 
> 时间：2012-12-19T01:22:03.333
> 
> 标签：javascript

> **可能重复：**
> [Javascript：将一个值与多个值进行比较的最漂亮方法](https://stackoverflow.com/questions/9121395/javascript-the-prettiest-way-to-compare-one-value-against-multiple-values)
> [Javascript If 语句用于检查文件扩展名不起作用](https://stackoverflow.com/questions/11836081/javascript-if-statement-used-to-check-file-extensions-not-working)

在 JS 中，我试图检查扩展名是否以“png”、“jpg”或“gif”结尾。我知道这可以通过 switch 语句来完成，但我想知道是否有更简单的方法可以将它全部放入`if`条件语句中。喜欢：

```
 if (aExtensions[i].toLowerCase() == ('jpg' || 'png' || 'gif')) {} 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T01:22:53.133

你可以使用这样的数组：

```
var extensions = ["jpg", "png", "gif"];

if (extensions.indexOf(aExtensions[i].toLowerCase()) > -1) {
    // match
} 
```

在这种情况下，您存储“有效”扩展名。然后，您可以使用 的`indexOf`方法`Array`来查找数组中的任何项目是否与您正在查看的特定扩展名匹配 - 检查是否有`0`大于或等于的值。

`indexOf`旧浏览器不支持，因此您需要包含一个[polyfill](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf#Polyfill)来备份它。有几种解决方案。

当然，如果你只想使用`if`语句，你可以使用这种格式：

```
var ext = aExtensions[i].toLowerCase();
if (ext == "jpg" || ext == "png" || ext == "gif") {
    // match
} 
```

我能想到的另一种可能性是`switch`声明，例如：

```
var ext = aExtensions[i].toLowerCase();

switch (ext) {
    case "jpg":
    case "png":
    case "gif":
        // match
        break;
    case default:
        // No match
} 
```

我也可以包括它（其他答案肯定是第一个），但我能想到的另一个是使用正则表达式，例如：

```
if (/jpg|png|gif/i.test(aExtensions[i])) {
    // match
} 
```

但请注意，您将永远无法单独取回扩展，这就是为什么我更喜欢我给出的前两个选项之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T01:26:01.337

正则表达式呢？

```
if ( /jpg|png|gif/i.test( aExtensions[i] ) ) {
  ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T01:27:34.433

另一种方法是使用这样的对象字面量，

```
if ({'jpg':1,'png':1,'gif':1}[aExtensions[i].toLowerCase()]) {
    // ...
} 
```

通过这种方式，您可以查看匿名对象`{'jpg':1,'png':1,'gif':1}`是否具有由`if`. `1`符合这个，`undefined`没有。

* * *

如果您使用的是对象，您还可以使用[`in`运算符（如](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)[Ian](https://stackoverflow.com/users/1317927/ian)所指出的那样），`true`如果对象具有与其值无关的键，则该运算符会给出。

```
if (aExtensions[i].toLowerCase() in {'jpg':0,'png':1,'gif':2}) {
    // ...
} 
```

请注意这次`'jpg'`仍然如何通过`'jpg':0`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T01:26:40.767

您可以使用变量和三元比较，但这很难看。

或者您可以只使用一个数组并检查字符串是否包含在其中。

```
if (~ ["jpg", "png", "gif"].indexOf(aExtensions[i].toLowerCase()) … 
```

然而，对于复杂的`!= -1`比较和旧 IE 中缺乏原生[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)的情况，人们倾向于使用正则表达式：

```
if (/jpg|png|gif/i.test(aExtensions[i])) … 
```

# svn - 更改 SVN 存储库 URL

> ID：13944222
> 
> 赞同：133
> 
> 时间：2012-12-19T01:22:32.783
> 
> 标签：svn, svn-repository

我目前的SVN结构：

```
Path: .
URL: svn://someaddress.com.tr/project
Repository Root: svn://someaddress.com.tr
Repository UUID: -------------------------------------
Revision: 10297
Node Kind: directory
Schedule: normal
Last Changed Author: ----
Last Changed Rev: 9812
Last Changed Date: 2010-12-20 17:38:48 +0100 (Mon, 20 Dec 2010) 
```

但是我们的项目（因此是 SVN 服务）将继续运行，`sub.someaddress.com.tr`而不是`someaddress.com.tr`（someaddress.com.tr 将很快被重定向到其他地方）。

由于它是开发服务器，我不确定该怎么做。我需要使用`svn switch`or`svn switch --relocate`吗？另外，我需要切换 svn root **someaddress.com.tr**还是项目分支**someaddress.com.tr/project**？

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2012-12-19T01:38:20.533

鉴于 Apache Subversion 服务器将被移动到这个新的 DNS 别名`sub.someaddress.com.tr`：

*   对于 Subversion 1.7 或更高版本，使用[`svn relocate`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.relocate.html). 当 SVN 服务器的位置发生变化时使用重定位。`switch`仅当您要将本地工作副本更改为另一个分支或另一个路径时才使用。如果使用 TortoiseSVN，您可以按照[TortoiseSVN 手册](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-relocate.html)中的说明进行操作。如果使用 SVN 命令行界面，请参阅[SVN 文档的这一部分](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.relocate.html)。该命令应如下所示：

    `svn relocate svn://sub.someaddress.com.tr/project`

*   `/project`考虑到存储库的实际内容可能不会改变，请继续使用。

注意：`svn relocate`在 1.7 版之前不可用（感谢 ColinM 提供信息）。在旧版本中，您将使用：

```
 svn switch --relocate OLD NEW 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-01-02T13:31:45.670

Grepping URL 之前和之后可能会让您高枕无忧：

```
svn info | grep URL

  URL: svn://svnrepo.rz.mycompany.org/repos/trunk/DataPortal
  Relative URL: (...doesn't matter...) 
```

并检查您的版本（> 1.7）以确保`svn relocate`使用正确：

```
svn --version 
```

**最后，添加到上述内容中，如果您的存储库 url 更改还涉及协议更改，您可能需要说明之前*和*之后的 url**（另[见此处](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.relocate.html)）

```
svn relocate svn://svnrepo.rz.mycompany.org/repos/trunk/DataPortal
    https://svngate.mycompany.org/svn/repos/trunk/DataPortal 
```

当然都在一行中。之后，感觉很好，一切都很顺利：

```
svn info | grep URL: 
```

如果您愿意，多一点自信，新的 svn repo URL 已连接并可以正常工作：

```
svn status --show-updates
svn diff 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-02-15T04:58:47.517

如果您使用的是 TortoiseSVN 客户端，那么您可以按照以下步骤操作

右键单击源目录，然后单击**SVN Relocate** [![图片#1](../Images/453b0c8b4f5bd222a4c52337c03cb5ad.png)](https://i.stack.imgur.com/Mb9z7.png)

之后，您需要将 URL 更改为您想要的，单击确定，这将需要几秒钟。[![图片#2](../Images/4e5d6536189b71e8d9ee2aa1fa423956.png)](https://i.stack.imgur.com/rm3WY.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-17T19:25:30.187

就我而言，该`svn relocate`命令（以及`svn switch --relocate`）由于某种原因而失败（可能是存储库未正确移动，或者其他原因）。我遇到了这个错误：

```
$ svn relocate NEW_SERVER
svn: E195009: The repository at 'NEW_SERVER' has uuid 'e7500204-160a-403c-b4b6-6bc4f25883ea', but the WC has '3a8c444c-5998-40fb-8cb3-409b74712e46' 
```

我不想重新下载整个存储库，所以我找到了一种解决方法。它适用于我的情况，但通常我可以想象很多事情都会被破坏（所以要么备份你的工作副本，要么准备好在出现问题时重新检查整个仓库）。

存储库地址及其 UUID 保存在`.svn/wc.db`工作副本的 SQLite 数据库文件中。只需打开数据库（例如在 SQLite 浏览器中），浏览表 REPOSITORY，`root`并将`uuid`列值更改为新值。您可以通过发出 找到新 repo 的 UUID `svn info NEW_SERVER`。

同样，将此视为最后的手段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-27T23:41:35.767

在 Eclipse 中，断开项目（Team > Disconnect）并删除元数据，然后将项目连接到新存储库。 [在项目上，右键单击，团队，断开连接](https://i.stack.imgur.com/GnUUc.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-25T06:28:22.187

如果你想提交一个新的空仓库，你可以签出新的空仓库并提交到新的远程仓库。
**签出一个新的空 Repo 不会删除您的本地文件。**
**试试这个：** 例如，远程回购网址：[https ://example.com/SVNTest](https://example.com/SVNTest) `cd [YOUR PROJECT PATH] rm -rf .svn svn co https://example.com/SVNTest ../[YOUR PROJECT DIR NAME] svn add ./* svn ci -m"changed repo url"`

# python - TypeError 引用类方法

> ID：13944228
> 
> 赞同：0
> 
> 时间：2012-12-19T01:23:13.033
> 
> 标签：python, class, methods, python-2.7, typeerror

第一次在我的一个项目中使用类，我似乎在我无法选择的地方犯了一个错误。

```
class aiRespond:
    def generateResponse( self, external_input ):
        return external_input

    def giveResponse( self, external_input ):
        self.generateResponse(self, external_input)

aiResponder = aiRespond()
retrieve_ai_response = aiResponder.giveResponse()

while 1:
    external_input = raw_input("> ")
    print retrieve_ai_response(external_input) 
```

错误：

```
TypeError: unbound method giveResponse() must be called with aiRespond instance as first argument (got str instance instead) 
```

我尝试了许多不同的结构方式。我宁愿`retrieve_ai_response = aiRespond.giveResponse`排成一行，因为我会有很多类似的事情。

有人介意指出我要去哪里以及为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:25:17.867

您将函数 giveResponse 的结果分配给retrieve_ai_response。

尝试：

```
retrieve_ai_response = aiResponder.giveResponse 
```

还要去掉“self”作为 giveResponse 函数体中的第一个参数。当您调用 self.generateResponse 时，您不需要它：

```
def giveResponse( self, external_input ):
    return self.generateResponse(external_input) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:38:33.330

```
class aiRespond:
    def generateResponse( self, external_input ):
        return external_input

    def giveResponse( self, external_input ):
        return self.generateResponse( external_input) #remove self as parameter,add return

aiResponder = aiRespond()
retrieve_ai_response = aiResponder.giveResponse #remove "()"

while 1:
    external_input = raw_input("> ")
    print retrieve_ai_response(external_input) 
```

我已经修改了你的代码，希望它有效！

# c# - 是否可以从另一个类中引用 MainWindow.cs？

> ID：13944229
> 
> 赞同：4
> 
> 时间：2012-12-19T01:23:27.403
> 
> 标签：c#, wpf

我有一个包含多个类的 WPF/C# 程序，并且 MainWindow.cs 类具有用户控件，我想使用其他类中发生的计算状态来更新这些控件。在谷歌搜索并借鉴示例之后，我想出了如何在另一个类中设置一个事件，并在发生变化时调用它。然后，只要主类有一个绑定该事件的处理程序，我就可以适当地更新 UI 内容（状态栏等）。以下是我正在做的精简版：

```
 namespace Program
     {
     public partial class MainWindow : Window
     {
          public void SetUpHandler()
          {
               TestA.WorkerProgressThingie += new    ProgressChangedEventHandler(TestA_ProgressChanged);
          }
          void TestA_ProgressChanged(object sender, ProgressChangedEventArgs e)
          {
               progressBar1.Value = e.ProgressPercentage
          }

     }

    public class TestA    
{
    public static event ProgressChangedEventHandler WorkerProgressThingie;

    public static void SomeFunction()
    {   
        int value = 0;         

        //...(some boring code that does something here)

        ProgressChangedEventArgs e = new ProgressChangedEventArgs(value, null);            

        if (WorkerProgressThingie != null)
            WorkerProgressThingie.Invoke(null, e)
    }

}
} 
```

*   有没有办法简单地从另一个类调用 progressBar 属性？（即 MainWindow.progressBar.Value）？
*   当我调用事件时，“对象发送者”参数的目的是什么，它应该如何正常使用？我看到的例子总是使用'​​null'。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:47:45.500

1) 是的，如果已声明，您可以访问任何类的任何部分`public`。在这种情况下，您可以将 progressBar 控件声明为公共的，并且任何有引用的东西都`class MainWindow`可以摆弄它。但是，这将是非常糟糕的做法。相反，您可以绑定到一些与活动的当前进度相关的更新的“值”，并让 MainWindow 类担心它如何表示该更改（在这种情况下通过更新 ProgressBar），

2)`object sender`在所有事件中都是对引发事件的对象的引用，因此事件消费者知道事件来自哪里。使用 null 也是 IMO 的不良做法，一般来说，引发事件的对象应该这样做；

```
SomeEvent(this, someEventArgs); 
```

# javascript - 表单提交时的jQuery textarea字数

> ID：13944230
> 
> 赞同：3
> 
> 时间：2012-12-19T01:23:28.320
> 
> 标签：javascript, jquery

当我单击表单提交按钮时，我一直在寻找一个计算文本区域中单词数的函数。

我正在尝试向用户显示一条消息，如果他们单击提交并且只输入了 50 个或更少的单词。这将是一条确认消息，基本上是说“您输入的字数少于 50 个，您确定要继续吗？”...或其他内容。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:27:03.807

您应该使用`split`使用空格作为分隔符的方法，然后获取数组的长度。

```
var wordCount = $('textarea').val().split(' ').length 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T01:28:26.273

另一种方法，您可以使用正则表达式并使用以下方法计算“单词” `\b`：

```
var words = $('#textareaid').val().match(/\b(\w+)\b)/g).length; 
```

**Ninja-Edit**哎呀，应该`.val`不是`.text`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T01:29:55.333

HTML：

```
<form id="confirmForm">
    <textarea id="moreThan50"></textarea>
    <button type="submit">Submit</button>
</form>​ 
```

JS：

```
$('#confirmForm').submit(function(ev){
    var wordCount = $('#moreThan50').val().split(/\s/g).length;

    if (wordCount < 50) {
        if (!confirm('Less than 50 words, are you sure you want to submit?')) {
            ev.preventDefault();
        }
    }
});​ 
```

## [看演示](http://jsfiddle.net/S26CF/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T01:33:50.790

您可以使用正则表达式在单词边界处拆分..

```
$('form').submit(function(){
   var words = $('textarea', this).val().split(/\b\W/);
   if (words.length < 50){
     // propmpt here.. and allow or cancel the submit..
   }
}); 
```

# css - 可查看的文本和图像网站导航菜单 - CSS

> ID：13944232
> 
> 赞同：0
> 
> 时间：2012-12-19T01:23:43.420
> 
> 标签：css, image, text, menu, navigation

我的问题是一个我确信会很常见的问题，但尽我所能，我根本找不到任何关于这个的教程。

我正在寻找为网站构建文本和图像导航菜单。在我看来，很多人都想做这样的事情，但要么我完全错过了一个简单的概念，要么很多人不想做这样的事情。

我的确切目标：创建一个导航菜单，顶部有图片，底部有 CSS 样式的文本。当您聚焦或悬停在图片上时，图像会发生变化，文本也会发生变化，就好像它们是一个项目一样。

我的问题：在我的按钮上，如果将鼠标悬停在文本上，图像和文本会发生变化。如果您将鼠标悬停在图像上，则只有图像会发生变化，就好像它们是两个独立的实体一样。

我的 HTML：

```
 <!DOCTYPE HTML>
    <html>
    <head>

      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta charset="UTF-8" />

      <link rel="stylesheet" type="text/css" href="test2.css" />

    </head>

    <body>

        <ul>
        <li id="onlineRugStore"><a href="#"id="test"><b>Button</b></a></li> 
        </ul> 
```

​​​

CSS：

```
 body{
    background-color:#e8f1c4;  
    }

    #onlineRugStore a{
    display:block;
    width:191px;
    height:107px;
    background:url('bestimages/test/worktest.gif') 0 0;
    }

    #onlineRugStore a:hover{
    background:url('bestimages/test/worktest.gif') 0 -107px;
    }

    #test b{
    position:absolute;
    text-align:center;
    margin:110px 0 0 0;
    font-size:18px;
    color:white;
    text-decoration:none;
    border-bottom-left-radius:15px;
    border-bottom-right-radius:15px;
    width:191px;
    height:24px;
    background-color:#cc7bd6;
    opacity:0.45;
    filter:alpha(opacity=45);
    padding:4px 0 0 0;
    }

    #test b:hover{
    opacity:1.0;
    }

    ul{
    list-style-type:none;
    } 
```

我正在谈论的一个例子可以在以下位置查看：http: [//kokorugs.com/test2.php](http://kokorugs.com/test2.php)

在用尽所有努力后，我认为这可能是不可能的，然后我在以下网站上找到了一个工作示例：http: [//www.amazeelabs.com/en](http://www.amazeelabs.com/en) （注意导航菜单）。

我感谢任何和所有的帮助。

节日快乐，拉斐尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:38:24.057

我为你创建了一个 JSfiddle：http: [//jsfiddle.net/drXng/](http://jsfiddle.net/drXng/)

您在 CSS 中看到的代码应该清楚地解释发生了什么。

```
/*CSS you want to apply to the element wrapping both the text and picture*/
.both {
 opacity: 0.5;
width: 200px;
height: 200px;
display: block;
}

/*CSS you want to apply to the text only before it is hovered*/
.text {
background-color: green;
}

/*CSS you want to apply to the picture only before it is hovered*/
.picture {
  width: 50px;
  height: 50px;
}

/*CSS you want to apply to the element wrapping both both the text and picture after hovered*/
.both:hover {
opacity: 1;
}

/*CSS you want to apply to text when both are hovered*/
.both:hover .text {
  background-color: blue;
}

/*CSS you want to apply to picture when both are hovered*/
.both:hover .picture {
background-color: red;
}​ 
```

在您的情况下，可以通过更改`.both`为`ul`. 例如，`#test b`只要将里面`ul`的任何东西悬停，下面的 css 就会改变 's opacity。

```
ul:hover #test b{
opacity:1.0;
} 
```

PS 作为一个忠告，如果可以的话，尽量[避免在 CSS 中使用 ID 选择器。](http://csswizardry.com/2012/11/code-smells-in-css/):)

# java - 为什么我得到一个变量未声明的错误？

> ID：13944233
> 
> 赞同：0
> 
> 时间：2012-12-19T01:23:45.963
> 
> 标签：java, variables

`cannot find symbol - variable minDist`即使我知道它已被声明和初始化，我也会不断收到此错误。我觉得它正直直地盯着我的脸。有谁知道为什么会这样？

还有另一个类文件与此相关，但我认为错误不在其中。

当我到达时，我在倒数第三行得到它`minDist`，但如果我删除它，`minDist`我也会得到它。`minCost``minMPG`

```
public class AnnualFuelUseTester
{
    public static void main(String[] args)
    {
    int sMiles1, sMiles2, sMiles3, sMiles4;
    int eMiles1, eMiles2, eMiles3, eMiles4;
    int[] dist = new int[4];
    double gals1, gals2, gals3, gals4;
    double[] MPG = new double[4];
    double price1, price2, price3, price4;
    double[] cost = new double[4];

    AnnualFuelUse[] fillUps = {new AnnualFuelUse(108438, 108725, 13.9, 2.98),
                               new AnnualFuelUse(108738, 109023, 15.3, 3.02),
                               new AnnualFuelUse(109023, 109232, 10.3, 3.05),
                               new AnnualFuelUse(109564, 109854, 13.1, 3.03)};

    for(int i = 0; i < fillUps.length; i++)
    {
        dist[i] = fillUps[i].calcDistance();
        MPG[i] = fillUps[i].calcMPG();
        cost[i] = fillUps[i].calcCost();
    }
    for (int i = 0; i < dist.length; i++)
    {
        int maxDist = 0;
        int minDist = dist[0];
        if (dist[i] > maxDist)
        {
            maxDist = dist[i];
        }
        if (dist[i] < minDist)
        {
            minDist = dist[i];
        }
    }
    for (int i = 0; i < dist.length; i++)
    {
        double maxMPG = 0;
        double minMPG = MPG[0];
        if (MPG[i] > maxMPG)
        {
            maxMPG = MPG[i];
        }
        if (MPG[i] < minMPG)
        {
            minMPG = MPG[i];
        }
    }
    for (int i = 0; i < dist.length; i++)
    {
        double maxCost = 0;
        double minCost = cost[0];
        if (cost[i] > maxCost)
        {
            maxCost = cost[i];
        }
        if (cost[i] < minCost)
        {
            minCost = dist[i];
        }
    }

    System.out.printf("%15s%15s%15s%15s%15s%15s%15s%15s%15s\n\n"
                       ,"Fill Up", "Days", "Start Miles", "End Miles"
                       ,"Distance", "Gallons Used", "MPG", "Price", "Cost");
    for(int i = 0; i < fillUps.length; i++)
    {
        System.out.printf("%15s%15s%15s%15s%15s%15s%15.2f%15s%15.2f\n"
                          ,(i+1),(int)(1 + i *(i*1.1)), fillUps[i].getmySMiles()
                          ,fillUps[i].getmyEMiles(), dist[i]
                          ,fillUps[i].getmyGals(), MPG[i]
                          ,fillUps[i].getmyPrice(), cost[i]);
    }
    System.out.printf("%10s%10s%30s%30s","Minimum",minDist,minMPG,minCost);
}                        
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T01:26:21.653

您在循环`minDist`内声明`for`，因此它只存在于其中，您不能在循环外使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T01:26:21.010

您在 for 循环的范围内声明它。您需要将声明移到该`int minDist`循环之外，与您正在执行 printf 的级别相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T01:29:34.753

始终考虑声明变量的范围，因为它决定了变量的可见性。

您在作为范围的 for 块中声明您的变量。然后你试图从你声明它们的范围之外引用这些变量。那是行不通的。

```
public void foo () {

    while (someBool) {

        int someVariable = 0;

        someVariable = 1  // works because using and declaring takes place in the same scope.

    }

 someVariable = 2; // that won't work because variable is not existent in this scope.

} 
```

还要考虑范围可以是分层结构的，这意味着在某个范围内声明的变量在所有嵌套范围内也是可见的：

```
public void foo () {

    while (someBool) {

        int aVariable = 0;

        if (anotherBool) {

            aVariable = 1; // works because this scope is a nested scope inside the scope where the variable has been declared.

        }
    }
} 
```

您会发现大量有关广为人知的作用域概念的信息，该概念不仅用于 C#，而且用于大多数编程语言。

开始研究的一个点可能是 MSDN 文档：

[http://msdn.microsoft.com/en-us/library/aa691132(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691132%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T01:46:58.883

您`minDist`在循环内声明了变量，因此该变量的范围仅限于该特定的 for 循环。

所以你不能在外面访问那个变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T02:10:06.920

基本上，既然你说

```
int minDist = dist[0]; 
```

在你的**for**循环中，它只存在于你的循环中。例如，

```
for(int i = 0; i < 10; i++) {
    int x = 0;
}
System.out.println(x); 
```

将返回错误，因为 x 不在该循环之外。它被称为范围，基本上是不同级别的不可见性。像电影《盗梦空间》一样思考——梦境第二关的人知道第一关的梦想是什么，但第一关看不到第二关。所以 ：

```
int x = 5;
for(int i = 0; i < 1; i++) {
   x = 3; 
   int y = 10;
}
System.out.println(x);
System.out.println(y); 
```

将成功打印 3 但在尝试打印 y 时崩溃，因为简单地说，他们在 for 循环之外看不到 y 。

要解决您的问题：只需在循环之外声明 minDist ，靠近开始的某个地方，它应该可以工作。

# python - 如何在 Eclipse/PyDev 中抑制“未使用的变量”警告

> ID：13944234
> 
> 赞同：25
> 
> 时间：2012-12-19T01:24:00.217
> 
> 标签：python, eclipse, variable-assignment, pydev

如何在 Eclipse/PyDev 中抑制“未使用的变量”警告

当我使用返回元组的函数时，我通常只需要其中一个值，但仍想分配给多个变量。我希望能够暂时关闭此警告，以便在更严重的问题上归零。然后，我可以在进行更多最终检查时重新打开它。

如果您想知道我为什么要故意这样做，那只是为了便于阅读。假设一个函数返回一个元组的元组，我的代码的几个部分可能与第三个值一起使用，如下所示：

```
label, content = myfunc()[2] 
```

有时，我可能只对“内容”部分感兴趣，但我发现这个......

```
tmp, content = myfunc()[2] 
```

...比这更并行（因此更具可读性）：

```
content = myfunc()[2][1] 
```

如果有更好的方法可以简单地做到这一点，而无需分配给一次性未使用的变量，请随时提供它作为答案。

```
>>> myfunc()[2]
('lab', 'val')
>>> , v = myfunc()[2]
SyntaxError: invalid syntax
>>> tmp, v = myfunc()[2]
>>> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-19T01:32:51.210

如果您不需要变量的值，请将其分配给特殊变量`_`。

就 Python 而言，其实 ; 并没有什么特别之处`_`。它只是另一个合法的标识符名称，就像其他任何名称一样。

然而，对于大多数“lint”风格的工具（希望包括 PyDev）——更重要的是，人类读者——它具有特殊的含义，“我不需要这个变量，我只是在这里放一些东西，因为 API/语法/任何需要它的东西”。这意味着他们不会警告您不使用它。

所以：

```
_, content = myfunc()[2] 
```

是的，你说得对，这通常比`myfunc()[2][1]`. 不仅如此，它还可以帮助您捕获更多错误——如果`myfunc()[2]`没有恰好两个成员，则元组赋值将抛出，但`[1]`不会。

非常非常罕见地，这不是一个好主意，因为该值是您希望尽快被垃圾收集的东西，并且将其绑定到`_`而不是根本不绑定它（例如， via `[2][1]`）会延迟该值。

更严重的是，这确实与一个不同的习语冲突，该习语也特别使用`_`:`gettext`用于国际化的代码通常会：

```
import gettext
_ = gettext.gettext 
```

或者，等效地：

```
from gettext import gettext as _ 
```

显然，您不能`_`同时用作 gettext 快捷方式和无意义的标识符。（你实际上*可以*侥幸逃脱，因为`gettext`含义是在模块全局级别绑定的，并且无意义的标识符应该只在函数体内使用......但是，尝试它仍然是一个非常糟糕的主意，因为在某些时候你会结束`gettext` `_`在你分配了一个隐藏它的本地值之后使用in 函数。）没有什么会强迫你`_`在任何一种情况下都使用 - 但如果你使用其他任何东西，你可能会混淆读者（并且可能与你相同的 linting 工具）重新寻求安抚首先）。因此，您必须决定在任何给定项目中哪个对您更重要。（通常，如果您使用`gettext`的是 ，那

如果您反复调用`myfunc`和处理某些值，您可能需要考虑编写一个包装函数：

```
def mywrapperfunc():
    _, content = myfunc()[2]
    return content 
```

然后你的代码可以做：

```
content = mywrapperfunc() 
```

这有很多优点：

*   它显然比任何需要你记住你想要一个元组的后半部分的东西更容易阅读，它位于返回的序列的索引 2 中`myfunc`。
*   它为您提供了一个放置好名字（希望比 更好`mywrapperfunc`）和/或注释/文档字符串的地方，以防万一。
*   这意味着如果您稍后更改`myfunc`因此您想要的值现在在索引 3 而不是 2 中，并且 3 元素元组的第二个成员而不是 2 元素元组，您只需要更改`mywrapperfunc`而不是 20 行代码。
*   这也意味着，如果您以后想使用冲突的`_`习惯用法（例如，将您的代码与`gettext`.

附注：在交互式解释器中，`_` *确实*有一个特殊的含义：它绑定到最后一个交互式命令的结果。但这并不意味着您不能`_`在交互式解释器中使用。（事实上​​，那里更好，因为你存储在那里的任何东西都会立即被覆盖，所以不会出现非常罕见的 GC 问题。）

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-29T20:45:42.617

将注释添加`#@UnusedVariable`到行尾。

PyDev 中的每个警告都有类似的停用注释。使用 Quick Fix 发现它们（将光标放在警告中并按 Ctrl+1），或参考[PyDev 源代码](https://github.com/fabioz/Pydev/blob/master/plugins/org.python.pydev.ast/src/org/python/pydev/ast/analysis/IAnalysisPreferences.java)中的这些行：

```
public static final String MSG_TO_IGNORE_TYPE_UNUSED_IMPORT = "@UnusedImport";
public static final String MSG_TO_IGNORE_TYPE_UNUSED_WILD_IMPORT = "@UnusedWildImport";
public static final String MSG_TO_IGNORE_TYPE_UNUSED_VARIABLE = "@UnusedVariable";
public static final String MSG_TO_IGNORE_TYPE_UNDEFINED_VARIABLE = "@UndefinedVariable";
public static final String MSG_TO_IGNORE_TYPE_DUPLICATED_SIGNATURE = "@DuplicatedSignature";
public static final String MSG_TO_IGNORE_TYPE_REIMPORT = "@Reimport";
public static final String MSG_TO_IGNORE_TYPE_UNRESOLVED_IMPORT = "@UnresolvedImport";
public static final String MSG_TO_IGNORE_TYPE_NO_SELF = "@NoSelf";
public static final String MSG_TO_IGNORE_TYPE_UNDEFINED_IMPORT_VARIABLE = "@UndefinedVariable";
public static final String MSG_TO_IGNORE_TYPE_UNUSED_PARAMETER = "@UnusedVariable";
public static final String MSG_TO_IGNORE_TYPE_NO_EFFECT_STMT = "@NoEffect";
public static final String MSG_TO_IGNORE_TYPE_INDENTATION_PROBLEM = "@IndentOk";
public static final String MSG_TO_IGNORE_TYPE_ASSIGNMENT_TO_BUILT_IN_SYMBOL = "@ReservedAssignment";
public static final String MSG_TO_IGNORE_TYPE_PEP8 = "@IgnorePep8";
public static final String MSG_TO_IGNORE_TYPE_ARGUMENTS_MISATCH = "@ArgumentMismatch"; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-25T17:47:22.507

首选项 -> PyDev -> 编辑器 -> 代码分析，“未使用”选项卡

找到设置

*如果名称以：（逗号分隔）开头，则不要报告未使用的变量*

然后使用此列表中的一个前缀，或添加另一个前缀。

例如，如果您在以下代码中有一个一次性变量“tmp”：

```
tmp, content = myfunc()[2] 
```

并且您的前缀列表中有“_”要忽略，然后将“tmp”转换为“_tmp”，如下所示：

```
_tmp, content = myfunc()[2] 
```

你的错误会消失。我认为这是一个比@abarnert 建议的仅使用“_”更具可读性的解决方案，它还避免了与翻译冲突的复杂性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T01:38:11.913

当我使用类似于您在返回元组时描述的功能时，我有时会遇到这种情况。您可以在 Preferences -> PyDev -> Editor -> Code Analysis 部分中全局设置 PyDev 代码分析的警告级别。在未使用选项卡的代码分析中，有一个选项可以设置“未使用变量”以及其他事件的警告级别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-29T14:49:37.103

或者，您可以使用额外的插件 以*任何*语言（包括 Python）抑制 Eclipse 中的给定警告。[http://suppresswarnings.drupalgardens.com](http://suppresswarnings.drupalgardens.com)

也可在市场上购买：

[https://marketplace.eclipse.org/content/marker-manager](https://marketplace.eclipse.org/content/marker-manager)

# php - 从 CMS 将产品添加到购物车仅会提交一个来自选择的产品

> ID：13944242
> 
> 赞同：0
> 
> 时间：2012-12-19T01:24:55.967
> 
> 标签：php, magento, magento-1.7

我正在使用 CMS 页面来展示一个主要产品和一系列配件。我遇到的问题是，当我从配件部分将产品添加到购物车时，它没有被添加。相反，主要产品被添加到购物车中。

我已设法将问题隔离到主要产品的添加到表单中：

```
<?php
    $_product = $this->getProduct();
    $_helper = $this->helper('catalog/output');
?>
<div class="pull-right">
<form action="<?php echo $this->getSubmitUrl($_product) ?>" method="post" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?> class="form">
 <h2 class="product-name"><?php echo $this->__('Price:'); ?> <?php echo Mage::helper('core')->currency($_product->getPrice());; ?></h2>
         <?php if($_product->isSaleable()): ?>
    <p class="product-name"><?php echo $this->__('Quantity:'); ?></p>      
   <select name="qty" class="span1">
  <?php $i = 1 ?>
  <?php do { ?>
    <option value="<?php echo $i?>">
      <?php echo $i?>
      <?php $i++ ?>
    </option>
    <?php } while ($i <= (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getMaxSaleQty()) ?>
</select>
            <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="btn btn-danger" onclick="productAddToCartForm.submit(this)"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
            <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
        <?php endif; ?> 
</form></div>
<script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script> 
```

这是配件的代码 - 提交表单与上面的相同：

```
<?php 
$category_id = "49"; // category_id for "Accessories"
$_productCollection = Mage::getResourceModel('catalog/product_collection')
->addAttributeToSelect(array('name', 'price', 'small_image', 'short_description'), 'inner')
->addCategoryFilter(Mage::getModel('catalog/category')->load($category_id));
?>
<?php if($_productCollection->count()): ?>

       <?php 
       $products = array();
       foreach ($_productCollection as $_product) { 
        ?>
<form action="<?php echo $this->getSubmitUrl($_product) ?>" method="post" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?> class="form">
    <div class="media">
          <a class="fancybox static-thumbs pull-left" href="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(500, 450); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>">
            <img class="media-object" src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(150, 125); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" />
          </a>
    <div class="media-body span6">
       <h4 class="media-heading"><a class="view-item-button" href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->__('Order'); ?> <?php echo $this->htmlEscape($_product->getName())?><?php echo $this->__('&#8482;'); ?></a></h4>

        <p>
            <?php echo $_product->_data['short_description']; ?>
        </p>
      </div>
      </div>
      <div class="media pull-right"> 
        <h2 class="product-name"><?php echo $this->__('Price:'); ?> <?php echo Mage::helper('core')->currency($_product->getPrice()); ?></h2><?php if($_product->isSaleable()): ?>

  <p class="product-name"><?php echo $this->__('Quantity:'); ?></p>
   <select name="qty" class="span1">
  <?php $i = 1 ?>
  <?php do { ?>
    <option value="<?php echo $i?>">
      <?php echo $i?>
      <?php $i++ ?>
    </option>
    <?php } while ($i <= (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getMaxSaleQty()) ?>
</select>

            <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="btn btn-danger" onclick="productAddToCartForm.submit(this)"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
            <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
        <?php endif; ?> 
        <?php } ?>

    </div></form>

<?php endif; ?>
<hr />
<script type="text/javascript">
    $j(document).ready(function() {
        $j(".fancybox").fancybox();
    });
</script>

 <script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script> 
```

如果我删除主要产品添加到购物车的表格，则附件已成功添加。我不知道如何调试这个，请给一些建议！？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:50:27.547

不得不求助于使用立即订购按钮将客户带到产品视图页面。这意味着他们也可以在该页面上配置产品！

# java - Spring controller(A).method 调用了 controller(B).method 但找到了空模型

> ID：13944250
> 
> 赞同：3
> 
> 时间：2012-12-19T01:25:26.690
> 
> 标签：java, spring, spring-mvc

LoginFormController-->Post 在表单提交/发布后调用。最后，它调用另一个名为 LandingFormController-->loadForm 的控制器。

好吧，在 loadForm 中，模型中的值似乎是空的。有没有办法可以在会话或请求中保留一个 Bean 并在 loadForm 方法中获取它？奖励积分：如果您可以指出一些文件以供参考:)

谢谢

```
@Controller
@RequestMapping(value="/login")
public class LoginFormController {  

@RequestMapping(method=RequestMethod.POST)
public ModelAndView post(@ModelAttribute User user, BindingResult result, SessionStatus status) {
    logger.info("post");
    new ReceiptUserValidator().validate(user, result);
    if (result.hasErrors()) {
        return new ModelAndView("login");
    }
    else {
        logger.info("Email Id: " + user.getEmailId());
        //status.setComplete();         

        Map<String, Object> model = new HashMap<String, Object>();
        model.put("userId", user.getEmailId());
        model.put("now", new Date().toString());

        return new ModelAndView("redirect:/landing.htm", "model", model);
    }
} 
```

下面的控制器 B 被调用

```
@Controller
@RequestMapping(value="/landing")
public class LandingFormController {    
    protected final Log logger = LogFactory.getLog(getClass());

    @RequestMapping(method=RequestMethod.GET)
    public String loadForm(Model model) {
        logger.info("LandingFormController loadForm: " + model.asMap().keySet());       
        return "landing";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:38:09.343

代码正在执行重定向，这会导致放置在模型中的属性丢失。使用 flash 属性将属性传递给下一个控制器。

> Flash 属性为一个请求提供了一种方法来存储打算在另一个请求中使用的属性。这在重定向时最常用——例如，Post/Redirect/Get 模式。Flash 属性在重定向之前（通常在会话中）临时保存，以便在重定向之后对请求可用并立即删除。

**登录表单控制器**

```
@Controller
@RequestMapping(value="/login")
public class LoginFormController {  

@RequestMapping(method=RequestMethod.POST)
public ModelAndView post(@ModelAttribute User user, BindingResult result,
      SessionStatus status, final RedirectAttributes redirectAttrs) {

    logger.info("post");
    new ReceiptUserValidator().validate(user, result);
    if (result.hasErrors()) {
        return new ModelAndView("login");
    }
    else {
        logger.info("Email Id: " + user.getEmailId());
        //status.setComplete();         

        redirectAttrs.addFlashAttribute("userId", user.getEmailId());
        redirectAttrs.addFlashAttribute("now", new Date().toString());

        return new ModelAndView("redirect:/landing.htm", "model", model);
    }
} 
```

[文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-flash-attributes)

作为替代解决方案，您可以简单地不从控制器执行重定向。

附加检索解决方案。

修改 loadForm

```
 public String loadForm(@ModelAttribute("user") User user) {
        logger.info("LandingFormController loadForm: " + user.getEmailId());        
        return "landing";
    } 
```

# r - 从 R 主题模型中的 DocumentTermMatrix 中删除空文档？

> ID：13944252
> 
> 赞同：42
> 
> 时间：2012-12-19T01:25:43.583
> 
> 标签：r, lda, topic-modeling, topicmodels

我正在使用 R 中的 topicmodels 包进行主题建模。我正在创建一个语料库对象，进行一些基本的预处理，然后创建一个 DocumentTermMatrix：

```
corpus <- Corpus(VectorSource(vec), readerControl=list(language="en")) 
corpus <- tm_map(corpus, tolower)
corpus <- tm_map(corpus, removePunctuation)
corpus <- tm_map(corpus, removeWords, stopwords("english"))
corpus <- tm_map(corpus, stripWhitespace)
corpus <- tm_map(corpus, removeNumbers)
...snip removing several custom lists of stopwords...
corpus <- tm_map(corpus, stemDocument)
dtm <- DocumentTermMatrix(corpus, control=list(minDocFreq=2, minWordLength=2)) 
```

然后执行 LDA：

```
LDA(dtm, 30) 
```

对 LDA() 的最终调用返回错误

```
 "Each row of the input matrix needs to contain at least one non-zero entry". 
```

我假设这意味着至少有一个文档在预处理后没有术语。有没有一种简单的方法可以从 DocumentTermMatrix 中删除不包含任何术语的文档？

我查看了 topicmodels 包的文档，发现了 removeSparseTerms 函数，该函数删除了未出现在任何文档中的术语，但没有类似的删除文档。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-19T21:14:13.343

```
"Each row of the input matrix needs to contain at least one non-zero entry" 
```

该错误意味着稀疏矩阵包含一行没有条目（单词）。一个想法是逐行计算单词的总和

```
rowTotals <- apply(dtm , 1, sum) #Find the sum of words in each Document
dtm.new   <- dtm[rowTotals> 0, ]           #remove all docs without words 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-06-14T22:46:54.830

agstudy 的答案效果很好，但在速度较慢的计算机上使用它被证明存在轻微问题。

```
tic()
row_total = apply(dtm, 1, sum)
dtm.new = dtm[row_total>0,]
toc()
4.859 sec elapsed 
```

（这是用 4000x15000 dtm 完成的）

瓶颈似乎适用`sum()`于稀疏矩阵。

由`tm`包创建的文档术语矩阵包含名称 i 和 j ，它们是稀疏矩阵中条目所在位置的索引。如果`dtm$i`不包含特定的行索引`p`，则行为`p`空。

```
tic()
ui = unique(dtm$i)
dtm.new = dtm[ui,]
toc()
0.121 sec elapsed 
```

`ui`包含所有非零索引，并且由于`dtm$i`已经排序，`dtm.new`因此将与`dtm`. 性能增益对​​于较小的文档术语矩阵可能无关紧要，但对于较大的矩阵可能会变得很重要。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-01-31T10:22:50.143

这只是为了详细说明agstudy给出的答案。

代替从 dtm 矩阵中删除空行，我们可以识别我们的语料库中长度为零的文档并直接从语料库中删除文档，然后再执行仅包含非空文档的第二个 dtm。

这对于保持 dtm 和语料库之间的 1:1 对应关系很有用。

`empty.rows <- dtm[rowTotals == 0, ]$dimnames[1][[1]] corpus <- corpus[-as.numeric(empty.rows)]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-16T11:33:28.823

只需从 DTM 中删除稀疏术语，一切都会正常工作。

```
dtm <- DocumentTermMatrix(crude, sparse=TRUE) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-29T05:03:15.047

只是对达里奥·拉康的回答的一个小补充：

```
empty.rows <- dtm[rowTotals == 0, ]$dimnames[1][[1]] 
```

将收集记录`id`，而不是订单号。试试这个：

```
library(tm)
data("crude")
dtm <- DocumentTermMatrix(crude)
dtm[1, ]$dimnames[1][[1]] # return "127", not "1" 
```

如果用连续编号构建自己的语料库，数据清洗后，一些文档会被删除，编号也会被破坏。所以，最好`id`直接使用：

```
corpus <- tm_filter(
  corpus,
  FUN = function(doc) !is.element(meta(doc)$id, empty.rows))
  # !( meta(doc)$id %in% emptyRows )
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-22T15:53:19.523

`lt$title`我在包含字符串的数据框中有一列。我在此列中没有“空”行，但仍然出现错误：

> LDA(dtm, k = 20, control = list(seed = 813)) 中的错误：输入矩阵的每一行都需要包含至少一个非零条目

上面的一些解决方案对我不起作用，因为我需要将预测主题的向量加入到我的原始数据框中。因此，从文档术语矩阵中删除非零条目是没有选择的。

问题是，其中的一些（非常短的）字符串`lt$title`包含无法由`Corpus()`和/或处理的特殊字符`DocumentTermMatrix()`。

我的解决方案是删除无论如何都不包含太多信息的“短”字符串（最多一个或两个单词）。

```
# Clean up text data
lt$test=nchar(lt$title)
lt = lt[!lt$test<10,]
lt$test<-NULL

# Topic modeling
corpus <- Corpus(VectorSource(lt$title))
dtm = DocumentTermMatrix(corpus)
tm = LDA(dtm, k = 20, control = list(seed = 813))

# Add "topics" to original DF
lt$topic = topics(tm) 
```

# java - Java - NullPoinerException 对象数组

> ID：13944261
> 
> 赞同：-1
> 
> 时间：2012-12-19T01:26:37.297
> 
> 标签：java, arrays, object, nullpointerexception

想不通，我创建了一个简单的坐标类来保存 x 和 y 整数。在另一个类中，我有一个声明为“ords”的全局坐标数组。在我的循环中，我添加了坐标。在我的 getaction 方法中尝试使用 Coordinates 类中的方法 getX() 和 getY() 时，我得到一个空指针异常。我确定这些对象不为空，但我仍然无法弄清楚出了什么问题。任何帮助表示赞赏。

```
 import java.util.*;

   import org.w2mind.net.*;

   import java.io.Serializable;

   public class ConorsMind  implements Mind 
  {
     int [][] surroundings = new int [12][16];
     Coordinates [] ords = new Coordinates [192];

int currentX;
int currentY;

//====== Mind must respond to these methods: ==========================================================
//  newrun(), endrun()
//  getaction()
//======================================================================================================

public void newrun()  throws RunError 
{
}

public void endrun()  throws RunError
{
}

private void formTwoDimmensional(int [] someArray)
{
int counter = 0;
int n=0;
for(int i = 0; i < 15; i++)
    {
    for(int z = 0; z < 12; z++)
        {
            surroundings[z][i] = someArray[counter];
            if(surroundings[z][i] ==0) {
                currentX=z;
                currentY=i;
            }
            else if(surroundings[z][i]==4){
                ords[n]= new Coordinates(z,i);
                n++;
            }

            System.out.print(z+" , "+i+": "+surroundings[z][i]);
            System.out.println();
            counter++;
        }
    }
}

public Action getaction ( State state )
{ 
String  s = state.toString();        
String[]    x = s.split(",");
int act =MinerWorldUpdated.NO_ACTIONS;
int counter = 0;
int [] surround = new int [192]; 
//in this way user will have ability to see what surrounds him
for(int i = 11; i < 203; i++)
    {
    surround[counter] = Integer.parseInt(x[i]);
    counter++;
    }
    formTwoDimmensional(surround);

int [] response = new int [x.length];
for(int i = 0; i < x.length; i++)
    {
    response[i] = Integer.parseInt ( x[i] );
    }

    System.out.println("Current position: "+currentX+" ,"+currentY);

    int coalX=ords[0].getX();
    int coalY=ords[0].getY();

    System.out.println("Coal position: "+coalX+" ,"+coalY);

    if(coalX != 0 && coalY !=0)
    {
        if(coalX>currentX)
        {
            act=MinerWorldUpdated.ACTION_DOWN;
        }
        else if(coalY<currentY)
        {
            act=MinerWorldUpdated.ACTION_LEFT;
        }
        else if(coalX<currentX)
        {
            act=MinerWorldUpdated.ACTION_DOWN;
        }
        else if(coalY<currentY)
        {
            act=MinerWorldUpdated.ACTION_LEFT;
        }

    }

String a = String.format ( "%d", act );

return new Action ( a );         
}

    }

    class Coordinates implements Serializable 
    {
private int x;
private int y;

public Coordinates(int x1, int y1)
{
    x=x1;
    y=y1;
}

public int getX(){
    return x;
}

public int getY(){
    return y;
} 
```

}

错误如下： java.lang.NullPointerException at ConorsMind.getaction(ConorsMind.java:146)

该错误源于以下两行：

```
int coalX=ords[0].getX();
int coalY=ords[0].getY(); 
```

我正在调用 formTwoDimensional() 并且它工作得很好， ords 对象正在成功创建并且不为空，因为使用 System.out.println(ords[n].getX()) 进行测试时在我的 else 中打印预期结果if(环境[z][i]==4) 块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:31:26.640

您需要确保您正在调用 formTwoDimensional()。如果确实如此，那么您可能永远不会进入嵌套 for 循环中的 else if 块，因此 ords[0] 实际上从未被设置，因此当您尝试访问它时，它为空。

如果您不想发布其余代码，则要做的另一件事是添加更多调试代码。请参阅下面的布尔 zero_pos_set。但请确保在程序崩溃之前看到打印“Zero pos set”。我敢打赌，你不会。

```
public class ConorsMind  implements Mind 
{
    int [][] surroundings = new int [12][16];
    Coordinates [] ords = new Coordinates [192];
    boolean zero_pos_set = false;

    private void formTwoDimmensional(int [] someArray)
    {
        int counter = 0;
        int n=0;
        for(int i = 0; i < 15; i++) {
            for(int z = 0; z < 12; z++) {
                surroundings[z][i] = someArray[counter];
                if(surroundings[z][i] ==0) {
                    currentX=z;
                    currentY=i;
                } else if(surroundings[z][i]==4) {
                    zero_pos_set = true;
                    ords[n]= new Coordinates(z,i);
                    n++;
                }
                counter++;
            }
        }
    }

    public Action getaction ( State state ) {
        if(zero_pos_set) {
            System.out.println("Zero pos set!");
        }
        int coalX=ords[0].getX();
        int coalY=ords[0].getY();
        System.out.println("Coal position: "+coalX+" ,"+coalY);
        return new Action ( a );         
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:29:42.103

根据此线程中发布的所有调试信息，似乎在您的 getaction() 函数中，您正在传递一些不包含 4 的状态。

当您解析此信息并将其传递给 formTwoDimensional() 时，您将永远不会到达 else if 块，因此永远不会设置 ords[0] 或任何其他 ords[n]。

结果，当您尝试在 getaction() 函数中重新访问 ords[0] 时，您实际上会得到 null，因此会得到 NullReferenceException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T01:35:19.447

这是操作顺序问题。

如果您从不调用`formTwoDimmensional()`，则永远不会初始化数组中的任何内容。确保您首先调用它。

当您尝试调用时，实际的 NPE 会发生，如果是`coalX=ords[0].getX();`，这将不起作用。`ords[0]``null`

# scala - 是否有不使用 Wrappers 的 Scala 的 JavaConverters 等效的 Scala 库（即开源）？

> ID：13944266
> 
> 赞同：2
> 
> 时间：2012-12-19T01:27:22.223
> 
> 标签：scala, jsf

我目前正在将 Scala 与 JSF 一起使用，这两者配合得很好。但是有时 JSF 需要重新实例化（通过 Class.newInstance）一个数据结构，比如一个列表。例如，在托管 bean 中，我有：

```
@BeanProperty
var countries: java.util.List[String] = List("US").asJava 
```

直到你进入 JSF 的流程验证阶段，它运行到 java.lang.InstantiationException：

```
java.lang.InstantiationException: scala.collection.JavaConversions$SeqWrapper
at java.lang.Class.newInstance0(Class.java:340)
at java.lang.Class.newInstance(Class.java:308)
at com.sun.faces.renderkit.html_basic.MenuRenderer.createCollection(MenuRenderer.java:906)
at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValuesForModel(MenuRenderer.java:366)
at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValue(MenuRenderer.java:128)
at com.sun.faces.renderkit.html_basic.MenuRenderer.getConvertedValue(MenuRenderer.java:314)
at org.primefaces.component.selectcheckboxmenu.SelectCheckboxMenuRenderer.getConvertedValue(SelectCheckboxMenuRenderer.java:34)
... 
```

从根本上讲，Wrapper 可能不会从头开始重新实例化是有道理的，因此在这里使用 JavaConverters 将无法正常工作。我的问题是有没有包装器已经提供完整的数据结构映射/转换的库？如果没有，我只会写我自己的内部的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:45:10.497

使用Java`ArrayList`作为`var`，然后在您的代码中使用`JavaConverters`/`JavaConversions`来操作。这是我用于需要 Java 集合的 API（如 Hibernate、JAX-WS、JSR-303 等）的常用方法。

```
import collection.JavaConversions._

@BeanProperty
var countries: java.util.List[String] = new java.util.ArrayList[String] += "US" 
```

或者

```
import collection.JavaConverters._

@BeanProperty
var countries: java.util.List[String] = new java.util.ArrayList[String]
countries.asScala += "US"
countries.asScala ++= List("US", "MX") 
```

如果您真的只想来回转换而不是包装它很容易，而无需创建自己的类：

```
import collection.JavaConverters._
import collection.mutable.ArrayBuffer

@BeanProperty
var countries: java.util.List[String] = new java.util.ArrayList[String]

val countriesBuff = new ArrayBuffer.empty[String]
countriesBuff ++= countries.asScala     // Convert from ArrayList to ArrayBuffer
// ...
countries.addAll(countriesBuff.asJava)  // Convert the other direction 
```

但是您必须担心复制成本以及何时需要进行同步。包装/装饰更方便。

# c++ - Clang 前端 API 的所有权问题

> ID：13944270
> 
> 赞同：4
> 
> 时间：2012-12-19T01:27:36.030
> 
> 标签：c++, clang

我正在使用 Clang C++ API。由于 API 没有正确使用智能指针，我一直在为所有权而苦苦挣扎。到目前为止，我自己发现了所有问题，但这个问题让我很烦恼。当代码执行时，我遇到了访问冲突。我相当肯定这是一个双重删除，但由于文档不存在，我不知道去哪里看。幸运的是，复制程序相当短。有什么建议么？

```
#define _SCL_SECURE_NO_WARNINGS

#pragma warning(push, 0)

#include <clang/CodeGen/CodeGenAction.h>
#include <clang/Frontend/CompilerInstance.h>
#include <clang/Sema/Lookup.h>
#include <clang/Lex/Preprocessor.h>
#include <clang/AST/ASTContext.h>
#include <clang/AST/Mangle.h>
#include <clang/Frontend/TextDiagnosticPrinter.h>
#include <clang/Basic/TargetInfo.h>
#include <clang/Sema/Sema.h>
#include <clang/Sema/SemaConsumer.h>
#include <clang/Sema/CodeCompleteConsumer.h>
#include <llvm/LLVMContext.h>
#include <llvm/Support/DataTypes.h>
#include <llvm/Module.h>
#include <llvm/Support/Host.h>

#pragma warning(pop)

#include <string>
#include <iostream>

int main(int argc, char* argv[])
{
    llvm::LLVMContext c;
    llvm::Module m("", c);
    clang::EmitLLVMOnlyAction emit(&c);
    emit.setLinkModule(&m);
    clang::CompilerInstance CI;

    std::string errors;
    llvm::raw_string_ostream error_stream(errors);
    clang::DiagnosticOptions diagopts;
    clang::TextDiagnosticPrinter printer(error_stream, &diagopts);
    llvm::IntrusiveRefCntPtr<clang::DiagnosticIDs> diagids(new clang::DiagnosticIDs);
    clang::DiagnosticsEngine engine(diagids, &diagopts, &printer, false);
    CI.setDiagnostics(&engine);

    CI.createFileManager();
    CI.createSourceManager(CI.getFileManager());

    llvm::raw_null_ostream empty;
    clang::PrintingCodeCompleteConsumer print(CodeCompleteOptions(), empty);        

    clang::TargetOptions target;
    target.Triple = llvm::sys::getDefaultTargetTriple();
    CI.setTarget(clang::TargetInfo::CreateTargetInfo(engine, &target));

    CI.createPreprocessor();
    CI.createASTContext();

    clang::SemaConsumer* cons = new clang::SemaConsumer();

    CI.setASTConsumer(cons);    
    CI.createSema(clang::TranslationUnitKind::TU_Complete, &print);
    cons->InitializeSema(CI.getSema());

    clang::FrontendInputFile f("header", clang::InputKind::IK_CXX, true);
    emit.BeginSourceFile(CI, f);
    emit.Execute();
    emit.EndSourceFile();
    emit.takeModule();
    clang::LookupResult lr(CI.getSema(), clang::DeclarationName(CI.getPreprocessor().getIdentifierInfo("function")), clang::SourceLocation(), clang::Sema::LookupNameKind::LookupOrdinaryName);
    auto result = CI.getSema().LookupName(lr, CI.getSema().TUScope);

    std::string temp;
    llvm::raw_string_ostream out(temp);
    CI.getASTContext().createMangleContext()->mangleName(lr.getFoundDecl(), out);
    auto fun = m.getFunction(temp);

    std::cout << fun->getName().str();

    return 0;
} 
```

编辑：另外，我是否提到过，如果我更改它以使文件实际存在，即使它是一个微不足道的程序，Clang 在执行操作时也会因访问冲突而失败，甚至在`EndSourceFile`. 为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:33:39.353

我最终通过跳过整个前端解决了这个问题，因为这主要是所有狡猾的所有权所在，并且只是调用我自己需要的函数。

# c# - 通用接口重载。有效的术语？

> ID：13944271
> 
> 赞同：12
> 
> 时间：2012-12-19T01:27:38.793
> 
> 标签：c#, overloading, terminology, generic-interface

这是一个非常基本的方法重载示例，两个方法名称相同但签名不同：

```
int MyMethod(int a)
int MyMethod(int a, string b) 
```

现在假设我定义了两个通用接口，共享完全相同的名称但类型参数数量不同，例如：

```
IMyInterface<T>
IMyInterface<T1,T2> 
```

我可以说这代表“通用接口重载”吗？还是“重载”术语仅适用于这种情况下的方法？它看起来仍然与方法重载非常相似，因为我们保持完全相同的名称但改变了参数。

如果我不能说“通用接口重载/重载”，对于这两个共享相同名称的不同接口我能说什么？

谢谢和抱歉，如果这是一个愚蠢的问题，但是谷歌搜索“通用接口重载”或“通用接口重载”并没有给我太多，而是关于接口方法重载的结果，这不是我感兴趣的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T02:12:41.187

具有相同名称但具有不同数量的泛型类型参数（包括零）的类型只是不同的类型。术语“重载”在这里不适用。重载实际上只适用于属于同一类型且具有相同名称但不同签名的方法。

* * *

具有同名的泛型和非泛型接口是很常见的（来自 .NET 库的示例）：

```
public interface IList : ICollection, IEnumerable

public interface IList<T> : ICollection<T>, IEnumerable<T>, IEnumerable 
```

它们只是被称为泛型和非泛型。

* * *

泛型类型的 .NET 名称是以重音符 (`) 结尾的类型名称和类型参数的数量。例如`IMyType<T>`C# 或`IMyType(Of T)`VB 中的类型被翻译为

> IMyType`1

内部。这`<T>`实际上只是一个 C# 语法结构，它被转换为 CLR 使用的内部 .NET 名称。

`IMyType<T,U>`将被翻译成

> IMyType`2

这清楚地表明，在 C# 中具有相同名称的类型仅在其泛型类型参数的数量上有所不同，它们位于具有不同名称的 (CLR-) 现实类型中。

# c++ - 第一次使用数组，得到一个错误，“x 没有在这个范围内声明”但是我确实声明了它？

> ID：13944273
> 
> 赞同：0
> 
> 时间：2012-12-19T01:27:59.557
> 
> 标签：c++, arrays

我的编译器一直说 'small' 和 'x' 没有在这个范围内声明，我该如何修复我的数组以便准确显示它们？总体而言，代码应该找到存储在数组中的最小正非零值。

```
#include <iostream>
#include <string>
using namespace std;

int findthesmall( int small[x], int y) 
{
  for(int i=0; i< y; i++){
    for(int j=0; j< y; j++){
      int temp = small[i];
      if( small[i] > small[j] )
      small[i] = small[j];
      small[j] = temp;
    }
  }
  return small[0];

}

int main(){
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:29:47.543

我认为你需要：

```
int findthesmall( int* small, int y) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T01:31:42.377

尝试这个：

```
int findthesmall( int small[], int y) {
   for(int i=0; i< y; i++){
      for(int j=0; j< y; j++){
         int temp = small[i];

         if( small[i] > small[j] )
            small[i] = small[j];
         small[j] = temp;
      }
   }
   return small[0];

}

int main(){
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T01:35:52.710

除了其他答案外，逻辑中也存在错误。如果您的函数只是查找函数名称所示的最小元素，那么一个 for 循环就足够了。示例代码如下：

```
int findthesmall( int small[], int y) 
{
  int temp = small[0];
  for(int i=1; i< y; i++)
  {
  if( temp > small[i] )
      temp = small[i];
  }
  return temp; 
} 
```

或者你也可以使用 std::min_element 算法

```
std::cout << *std::min_element(small, small+y) << std::endl; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T01:30:10.120

```
int small[x] 
```

这是非法的，原因有两个。

*   就像你的编译器说的那样，X 是未定义的
*   数组的大小不能设置为非编译时常量的值。

要解决此问题，您可以执行@ajon 建议的操作（将数组作为指针 + 长度传递），它在历史上是传递数组的方式。

不过，C++ 中还有其他更好的方法。

*   您可以考虑使用[`std::array`](http://en.cppreference.com/w/cpp/container/array)or [`std::vector`](http://en.cppreference.com/w/cpp/container/vector)。它们都可以像传递任何其他变量一样传递，知道它们自己的大小，并且可以像普通数组一样访问
*   或者您可以使用`template`代码自动捕获数组的大小。

    `template<int len>`
    `int findthesmall(int (&small)[len]){`

第二个选项可能比其他选项有点复杂，尤其是现在你已经得到了答案，我只是为了完整起见把它包括在这里。

# mongodb - MongoDB/Mongoid，移除文档版本控制

> ID：13944276
> 
> 赞同：1
> 
> 时间：2012-12-19T01:28:12.233
> 
> 标签：mongodb, mongoid

我的 MongoDB 数据库中有一个集合，很久以前就启用了 Mongoid::Versioning。不幸的是，它使我的一些文档变得非常大。我看到一些超过 711K。这导致昂贵的磁盘 i/o 和昂贵的读/写时间。我正在寻找一个解决方案来遍历这个集合（它有近 200 万个文档），并尽可能安全地删除所有 mongoid 版本控制。据我所知，Mongoid 只是将版本存储在一个名为 that, 的数组属性中`versions`。如果有一种方法可以从我的所有文档中获取它，并且不会完全使数据库无法使用（在我执行整个磁盘扫描 + 写入/更新时的性能方面），那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:50:38.897

有很多方法可以处理这种情况。我已经尝试了几种不同的方法，并且对于一万条记录的试用，它们具有相似的处理时间。我试过另一个，发现它更糟。我会把它们贴在这里以防万一。

在这里，我正在研究这样一个假设，即批处理过程将有助于减轻对数据库的影响。

第一种方法是对集合进行查找，并限制处理批次。

```
var batchsize = 50
var c = db.collection.count()
for(x=0;x<Math.floor(c/batchsize);x++){
    db.collection.find({versions: {$exists:true}}).limit(batchsize).forEach(function(cur){
        db.collection.update({_id:cur._id},{$unset:{versions:""}})
    })
} 
```

这里的问题是每个新批次都需要收集扫描。限制将有助于产生影响，但收集成本仍然很高。

第二种方法是用`_id`所有具有数组的文档的 s填充一个`versions`数组，然后遍历数组并更新：

```
var arr = db.collection.find({versions:{$exists:true}},{_id:1}).toArray()
while(arr.length>0){
    for(x=0;x<batchsize;x++){
        var curId = arr.pop();
        db.collection.update(curId,{$unset:{versions:""}})
    }
} 
```

这将意味着初始的完整集合扫描，但在此之后，它会遍历数组并批量更新。

我尝试了第三种方法，在该方法中，我通过集合找到`_id`比前一个更大的值并进行更新，但发现这要贵得多（即使它能够在 上使用索引`_id`）。我在这里添加它以防它有用。

```
var curid = db.collection.find({_id:{$gt:MinKey}},{_id:1}).sort({_id:1}).limit(1).next()._id;
while(curid < MaxKey){
    db.collection.update({_id:curid},{$unset:{versions:""}});
    curid = db.collection.find({_id:{$gt:curid}},{_id:1}).sort({_id:1}).limit(1).next()._id;
} 
```

# plone - 在 Plone 中添加新语言

> ID：13944285
> 
> 赞同：1
> 
> 时间：2012-12-19T01:29:20.930
> 
> 标签：plone

如何在 Plone 4.2 中添加新语言？我查看了 plone.i18n.locales.languages.py 上的代码。语言在代码中是硬编码的。无论如何，我们可以在不修改核心代码的情况下扩展语言列表。有什么插件可以吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:18:01.663

受益于开源的优势，并将其贡献给核心。

i18n 团队将很乐意为您提供进一步的帮助，只需在论坛中留言：

[http://plone.org/support/forums/i18n](http://plone.org/support/forums/i18n)

# android - 使用 Android 工具项目构建系统时遇到问题

> ID：13944290
> 
> 赞同：1
> 
> 时间：2012-12-19T01:29:49.120
> 
> 标签：android, gradle

因此，我一直在尝试使用[http://tools.android.com/tech-docs/new-build-system](http://tools.android.com/tech-docs/new-build-system)自动化 Android 构建。

我仍然不清楚如何准确地使用构建系统，所以如果有人有这方面的经验或一般的 Gradle 可能能够为我回答以下问题。

使用此构建文件作为参考。

```
//
// A basic Android application that follows all the conventions
//
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.2'
    }
}
apply plugin: 'android'

android {
    target = "android-15"
    testBuildType = "debug"

    defaultConfig {
        versionCode = 12
        versionName = "2.0"
        minSdkVersion = 16
        targetSdkVersion = 16

        signingStoreLocation = "debug.keystore"
        signingStorePassword = "android"
        signingKeyAlias = "androiddebugkey"
        signingKeyPassword = "android"

        buildConfig "private final static boolean DEFAULT = true;", \
                    "private final static String FOO = \"foo\";"
    }

    buildTypes {
        debug {
            packageNameSuffix = ".debug"

            buildConfig "private final static boolean DEBUG2 = false;"
        }
    }

    sourceSets {

       main {}
       test {}
    }

    aaptOptions {
        noCompress "txt"
    }
} 
```

1.  您究竟是如何向它添加依赖项以进行构建的？使用 Gradle 的依赖项会给我带来构建错误。
2.  您将如何创建不同的构建环境？然后从命令行运行这些？
3.  在 main 和 test 之外的 sourceSets 有什么意义？

感谢您的帮助，除了上述问题之外的任何一般指南将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:47:05.800

1- 依赖项以常规 gradle 方式添加，例如：

依赖项 { 编译 'com.google.android:support-v4:r7' }

更多信息： http: [//gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html](http://gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html)

2-不确定你的意思。如果您指的是不同的构建变体，则必须创建产品风格（请参阅[http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system](http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system)）。

从命令行构建，您只需运行“gradle assemble”。请参阅上面的文档。

3- SourceSets 是配置默认配置（main/test）、flavors 和构建类型的源集。与 Java gradle 构建不同，您不能只添加新的源集并让它们自动编译。这就是为什么它位于 android 命名空间 (android.sourcesets) 中，而不是像默认 Java 插件提供的 sourceSets 对象那样位于顶层。

# delphi - 一键式计时器

> ID：13944301
> 
> 赞同：8
> 
> 时间：2012-12-19T01:31:29.880
> 
> 标签：delphi, timer, serial-port, command-line-interface

亲爱的德尔福程序员，

我正在寻求如何编写一次性计时器的帮助（没有 GUI，所以 VCL 计时器没有问题）......

让我再解释一下。

在我的代码中（用 VCL 计时器解释，但在这个特定项目中我没有表格）：

1.  调用`procedure`通过串口发送字符的 a
2.  启用具有 X 数量的计时器`Interval`

在`OnTimer`事件中：

我有一个代码，它发送一个字符然后禁用计时器本身不再被执行。

问题是我需要动态创建这些计时器。`SetTimer()`然后我想到了`KillTimer()`在“OnTimer 事件”中禁用它（释放它）的功能。

这是一种好的（安全）方式吗？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T01:57:03.347

***从计时器事件内部杀死计时器是否安全？***

是的，那是绝对安全的。

***如何实现最简单的一次计时器？***

1 秒一次性计时器的最简单实现是这样，但请注意，如果您启动更多计时器，您将无法区分其中哪个计时器经过了其间隔：

```
procedure TimerProc(hwnd: HWND; uMsg: UINT; idEvent: UINT_PTR;
  dwTime: DWORD); stdcall;
begin
  KillTimer(0, idEvent);
  ShowMessage('I''m done!');
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  SetTimer(0, 0, 1000, @TimerProc);
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:39:28.550

多媒体计时器 API 提供对一次性计时器的支持。好处是，计时比 SetTimer/KillTimer 解决方案要精确得多，您可以在间隔小于 50 毫秒的情况下使用它。这是有代价的，因为回调不会在主线程的上下文中返回。这是我使用多媒体定时器 API 实现的一次性定时器：

```
unit MMTimer;

interface
uses windows, Classes, mmsystem, SysUtils;
TOneShotCallbackEvent = procedure (const UserData: Pointer) of object;

(*
  The MMOneShotCallback function calls the Callback after the Interval passed.
  ** Attention: **
  The Callback is not called within the context of the main thread.
*)

type TMMOneShotTimer = class(TObject)
  private
    FTimeCaps: TTimeCaps;
    FResult: Integer;
    FResolution: Cardinal;
  public
    constructor Create;
    function MMOneShotCallback(const Interval: Cardinal; UserData: Pointer; Callback: TOneShotCallbackEvent): Boolean;
    property Result: Integer read FResult;
    property Resolution: Cardinal read FResolution;
end;
implementation
type
  TOneShotCallbackData = record
    Callback: TOneShotCallbackEvent;
   UserData: Pointer;
  end;
  POneShotCallbackData = ^TOneShotCallbackData;

procedure OneShotCallback(TimerID, Msg: UINT;
                    dwUser, dw1, dw2: DWord); pascal;
var pdata: POneShotCallbackData;
begin
  pdata := Pointer(dwUser);
  pdata.Callback(pdata.UserData);
  FreeMemory(pdata);
end;

constructor TMMOneShotTimer.Create;
begin
  FResult := timeGetDevCaps(@FTimeCaps, SizeOF(FTimeCaps));
  Assert(FResult=TIMERR_NOERROR, 'Call to timeGetDevCaps failed');
  FResolution := FTimeCaps.wPeriodMin;
  FResult := timeBeginPeriod(FResolution);
  Assert(FResult=TIMERR_NOERROR, 'Call to timeBeginPeriod failed');
end;

function TMMOneShotTimer.MMOneShotCallback(const Interval: Cardinal; UserData: Pointer; Callback: TOneShotCallbackEvent): Boolean;
var pdata: POneShotCallbackData;
begin
  GetMem(pdata, SizeOf(TOneShotCallbackData));
  pdata.Callback := Callback;
  pdata.UserData := UserData;
  result := (0 <> timeSetEvent(Interval, FResolution, @OneShotCallback, DWord(pdata), TIME_ONESHOT));
  if not result then
    FreeMemory(pdata);
  end;
end. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T14:08:52.197

你是否意识到，只要你有一个窗口句柄，你就不必有一个 GUI 来使用 VCL 计时器吗？您可以简单地通过以下方式从代码中实例化一个

```
fTimer := TTimer.Create(hWindowHandle); 
```

即使您没有窗口句柄，您也可以通过调用创建一个

```
fVirtualWindowHWND := AllocateHWnd(WndMethod); 
```

但在这种情况下，您还必须编写自己的消息循环。我知道调用 Windows API 似乎是一个更简单的解决方案，但它也有它自己的警告（就像你不能将类方法传递给它......），我坚持，你可能想知道这个。

# web-services - API数据服务层最佳解决方案

> ID：13944307
> 
> 赞同：0
> 
> 时间：2012-12-19T01:32:09.990
> 
> 标签：web-services, entity-framework, api, architecture, data-access-layer

因此，在过去，我工作的网站依赖于将数据访问直接与应用程序和视图代码混合在一起的单层架构。我最近让团队相信实现数据访问服务层 (API) 的优势；尤其是最近关于水平扩展的讨论（本机移动应用程序等）。

现在想到的实现是使用`Entity Framework`将数据库映射到 `Data Contract`客户端将使用`WCF`服务请求的类。
我过去在较小的规模上使用过这种方法，但现在有大量数据对象的范围，每个对象都有许多可能被查询的标准，我在设想如何构建 API 时遇到了问题。

**数据类示例列表：**

*   产品
*   商人
*   牌
*   分类
*   优惠券
*   用户
*   评论
*   问题
*   答案
*   ETC

*（希望这些对象相关的方式足以说明我的观点）*

**服务要求**

*   服务必须与语言无关（.net、php、java、objective c）
*   模式必须允许多个不同的数据源充当一个 api（比如我们的用户存储在 MSSQL 服务器中，我们的评论系统存储在 MySQL 中，我们的产品来自 XML 提要）
*   必须能够从 API 端实现对象缓存

这些数据对象中的每一个本质上都需要基于它的几个列进行查询（返回单个对象或集合）。虽然我可以为每个不同的场景编写一个新的 API 方法，但我认为必须有一种更优雅的方法来做到这一点。

**示例请求：**

*   通过 id 获取单个产品。
*   获取按“创建日期”、“价格”或“折扣”排序的特定商家、品牌或分类的产品列表。
*   获取用户提交的所有评论
*   获取产品的所有评论
*   ...

在我的研究中，我遇到了这篇[MSDN 文章](http://msdn.microsoft.com/en-us/data/jj613668.aspx)，其中概述了创建 API 的几种标准方法。我很想听听每种方法的优缺点，以及哪种方法似乎最适合我上面描述的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:41:51.240

本质上，有很多模式可以做到这一点。UI 层 => 数据访问层 => DAL 中使用的核心层 EF，CORE 中的模型和逻辑。核心声明接口和模型供其他其他层使用。

[阅读“存储库模式”单元的工作模式“控制反转可选额外。如果你准备把 50 美元放在桌面上，http: //Pluralsight.com](http://Pluralsight.com)上有一些优秀的视频教程来引导 你了解这些概念. 甚至是示例应用程序等。在我看来，这 50 美元是物有所值的（订阅 1 个月）。

我特别推荐 Julie Lerman 的关于 EF 和企业架构的复数视觉视频。那里有一些非常好的提示。

我使用这样的模式。而且效果很好。

# arduino - 使用 WiFlyHQ 库在发布请求期间未提交请求标头

> ID：13944312
> 
> 赞同：-1
> 
> 时间：2012-12-19T01:32:44.550
> 
> 标签：arduino

使用 WiFlyHQ 库我尝试发送 POST 请求，似乎请求标头被裁剪，如果我检查服务器上的请求，我可以看到以下内容：

```
headers: { host: 'localhost:3000', 'content-type': 'application' }, 
```

使用此设置；

```
void SendJasonPacket()
  {
    wifly.open(Server, ServerPort);
    wifly.println("POST / HTTP/1.1");
    wifly.println("Host: localhost:3000");
    wifly.println("Content-type: application/json");
    wifly.println("Accept: application/json");
    wifly.println("Content-Length: 93");
    wifly.println("User-Agent: easyNAM/0.0.1");
    wifly.println("{'checkin':{'device_token': '122','card_token': '12312', 'timestamp': '2012-10-29T14:31:03'}}");
    wifly.close();
  } 
```

我尝试了几个不同的标题，这就是我得到的：

```
 headers: { 'user-agent': 'easyNAM/0.0.1', accept: 'application/j' },
  headers: { accept: 'application/json', 'user-agent': 'easyNAM/0' },
  headers: { host: 'localhost:3000', 'content-type': 'application' }, 
```

看来，它在特定字符计数后被裁剪，不确定我在这里做错了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:42:31.170

我相信记忆是问题，我遇到了同样的问题。我正在使用 VS 2012 构建我的应用程序，当它达到 60% 时，它往往会偶尔出现。

# c++ - 什么时候不能通过引用传递

> ID：13944318
> 
> 赞同：2
> 
> 时间：2012-12-19T01:33:12.647
> 
> 标签：c++, pass-by-reference

我正在阅读关于[为什么使用指针的讨论？](https://stackoverflow.com/questions/162941/why-use-pointers)并遇到了 Tooony（大多数投票）的回答，其中指出使用指针的一个原因是“当无法通过引用”将变量传递给函数时“。

当我们不能通过引用传递变量时，可能的情况是什么？

还有其他不能通过引用传递的情况吗？

请赐教，我想不出任何情况

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T02:01:43.743

你问，

> “当我们不能通过引用传递变量时，可能的情况是什么？”

对于 C++11，有两种主要的此类情况（可能还有一些我没有想到的情况）：

*   当函数声明也用于 C 语言绑定时。

*   当对象是一个未知边界的数组时。

在后一种情况下，可以想象，传递对数组第一项的引用，但是在函数内部，代码只需要获取地址即可返回数组，并且正式类型不仅仅是这种方式不切实际，而且极具误导性。

此外，令我惊讶的是，Visual C++ 11.0（Visual Studio 2012 附带的编译器）编译以下内容：

```
#include <iostream>
using namespace std;

void foo( int const (&a)[] )
{
    for( auto p = &a[0]; *p != 0; ++p )
    {
        wcout << *p << endl;
    }
}

extern int const data[];

int main( int argc )
{
    foo( data );
}

int const data[] = {1, 2, 3, 4, 5, 0}; 
```

但是，MinGW g++ 4.7.1 拒绝它，因为它应该！

* * *

在 C++03 中确实存在但在 C++11 中不再存在的一种情况是，在 C++03 中，传递给引用的临时对象`const`必须具有可访问的复制构造函数。那是因为在 C++03 中，编译器可以制作任意数量的副本。在 C++11 中，如果可能，必须直接绑定引用。

* * *

仔细检查是非情况的一种情况是，当您需要像空指针一样表达“不引用对象”的可能性时。

例如，

```
void foo( int const* pValue = 0 ) { if( pValue != 0 ) { ... } } 
```

但是有一些解决方法，包括重载之一`foo`：

```
void foo( int const& value ) { ... }
void foo() {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T01:41:04.083

引用必须指向已初始化的内存，也就是说，它们不允许是`NULL`. 如果要允许在函数中不引用对象的参数，则必须使用指针。

但是，您似乎误读了所写的内容：

*在 C 中，您不支持诸如字符串之类的复杂数据类型。也无法将变量“通过引用”传递给函数。*

**具体来说，在C**中没有引用这样的概念。因此，您必须使用指针。然而，在 C++ 中，实际上没有任何地方不能使用引用，而您可以在函数参数列表中使用指针。

# wpf - 如何垂直制作统一网格

> ID：13944322
> 
> 赞同：18
> 
> 时间：2012-12-19T01:33:34.533
> 
> 标签：wpf, xaml, listview, itemspanel, uniformgrid

我正在使用`UniformGrid`它使项目水平显示。有没有办法让它垂直显示？

```
<ListView.ItemsPanel>
    <ItemsPanelTemplate>
        <UniformGrid Columns="3" />
    </ItemsPanelTemplate>
</ListView.ItemsPanel> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T02:08:28.003

WPF`UniformGrid`布局仅是水平的，例如：

```
1 2 3
4 5 6
7 8 9 
```

也许您可以改用 a`WrapPanel`并将 and 设置`ItemHeight`为`ItemWidth`您想要的网格大小，然后将 设置`Orientation`为`Orientation.Vertical`.

或者你可以创建一个派生`UniformGrid`来处理， [MSDN 上](http://social.msdn.microsoft.com/Forums/en/wpf/thread/104b9cb8-3e1a-4e2e-ac62-4f9b32cc21f0)`Orientation`有一个很好的例子。

这将显示：

```
1 4 7
2 5 8
3 6 9 
```

你是这个意思吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-02T09:28:38.350

我参加聚会有点晚了 - 但对于其他寻找解决方案的人来说，以下工作。

```
<UniformGrid Columns="1" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-07T19:27:33.320

我参加聚会有点晚了，但为了后代：

我刚开始使用 xaml，今天遇到了这个问题。为简单起见，我最终将单列 UniformGrid 包装在一个多列、单行的 UniformGrid 中：

```
<UniformGrid Columns="3">
    <UniformGrid Columns="1">
        <!--multiple child elements-->
    </UniformGrid>
    <UniformGrid Columns="1">
        <!--multiple child elements-->
    </UniformGrid>
    <UniformGrid Columns="1">
        <!--multiple child elements-->
    </UniformGrid>
</UniformGrid> 
```

# linux - Linux 内核 Rootkit 示例

> ID：13944326
> 
> 赞同：14
> 
> 时间：2012-12-19T01:34:03.973
> 
> 标签：linux, linux-kernel, detection, malware-detection, rootkit

作为我的论文，我正在研究一些用于 Linux 内核 Rootkit 检测的新技术。我需要一些 rootkit 样本来测试我的方法并进行一些机器学习测试。但不是在计算机历史书籍中也可以找到的 packetstorm 中尘土飞扬的旧版本。我已经阅读了很多关于它的内容，并且在 phrack 和其他一些资源中看到了一些 rootkit 实现的新方法。为我实现 PoC rootkit 将花费大量时间，届时我将开始我的项目。

如果有人可以帮助我，将不胜感激。任何站点、ftp、受感染的系统、未知的 rootkit 库，任何可能作为我工作样本的东西都将受到赞赏。但考虑到这一点，我需要的是**Linux 内核 Rootkits**。任何类型，LKM，系统调用挂钩，对象挂钩，system.map /dev/mem 工作的东西

谢谢

ps 新的 rootkit 我并不是说像未报道或全新闻的 rootkit，适用于 ubuntu 10.04 或更高版本的东西会很棒（内核版本 2.6.32+）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:06:56.093

出于显而易见的原因，您不会在公共互联网上找到任何可供下载的 rootkit。这样做将对托管它们的任何人造成巨大的责任风险。您的选择是：在安全研究或黑帽社区中结交一些朋友，或者运行一些蜜罐并自己捕获它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-02T13:55:35.220

您可以从以下链接 [http://www.ussrback.com/UNIX/penetration/rootkits/获得一些内核 rk](http://www.ussrback.com/UNIX/penetration/rootkits/)

# php - 限制内容的字符

> ID：13944332
> 
> 赞同：3
> 
> 时间：2012-12-19T01:35:19.260
> 
> 标签：php

我有内容，我试图限制使用此查询：

```
if(strlen($news_content < 35)){
         $news_content = substr($news_content, 0, 30) . "";
    } 
```

但是由于某种原因，它并没有限制字符。或者是我的编码（我确定这就是为什么它不起作用）有点偏离。

这是完整的代码：

```
<?php

    $amount_get = mysql_query("SELECT * FROM comment WHERE articleid='" . mysql_real_escape_string($_GET['id']) . "'"); 
    $comments = mysql_num_rows($amount_get);            

    $grab = mysql_query("SELECT * FROM articles WHERE id='" . mysql_real_escape_string($_GET['id']) . "' LIMIT 1");    
    $grab = mysql_query("SELECT id, news_title, news_content, news_author, news_day, news_month, news_year, news_date FROM articles ORDER BY id DESC limit 3"); 
    $news_day =$row['news_day'];
    $news_month =$row['news_month'];
    $news_year =$row['news_year'];
    $news_content =$row['news_content'];

    if(strlen($news_content < 35)){
                        $news_content = substr($news_content, 0, 30) . "";
                    } 

    elseif (mysql_num_rows($grab)==0) {
    echo "<div class='alert alert-note-x'>Sorry, it looks like their are no articles posted!</div>";
}
    while($row = mysql_fetch_array($grab)){

?>

<div class="post-container">
    <div class="post">
    <div class="left">
    <div class="date"><span class="day"><?php echo $row['news_day'] ?></span> <span class="month"><?php echo $row['news_month'] ?></span> <span class="year"><?php echo $row['news_year'] ?></span></div></div>
    <div class="postcontent"><h5 class="posttitle"><a href="#/media/<?php echo $row['id'] ?>.<?php echo stripslashes(str_replace(" ", "-", $row['news_title'])); ?>"><?php echo stripslashes($row['news_title']); ?></a></h5>                       

        <?php echo $row['news_content'] ?>
        <p> (READ MORE)</p>
        <p>Comments (<?php echo $comments ?>)</p>
        </div>
</div>​
</div> 
```

我只是想限制“news_content”，但我不知道我在哪里搞砸了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:40:01.077

尝试更改第一行：

```
if(strlen($news_content < 35)) {...} 
```

至：

```
if(strlen($news_content) > 35) { 
```

这包括切换`<`to `>`，因为如果它的长度超过 35 个字符而不是少于 35 个字符，大概你想截断它？

我认为通常有更好的截断方法。您的方法可能会在一个单词中间突然切断文本。看看[http://www.the-art-of-web.com/php/truncate/#.UNEbnmdaerI](http://www.the-art-of-web.com/php/truncate/#.UNEbnmdaerI)或[http://www.ambrosite.com/blog/truncate-long-titles-to-the-最近的整个单词使用 php-strrpos](http://www.ambrosite.com/blog/truncate-long-titles-to-the-nearest-whole-word-using-php-strrpos)以获得其他想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:03:48.940

在您不引用的 html 代码中`<?php echo $news_content?>`，但是`<?php echo $row['news_content']?>`，因此忽略了缩短的版本。

将其与建议的更改相结合以更改`strlen($row['news_content']) < 35`以`> 35`使其正常工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T01:41:26.817

以下应该工作：

```
if (strlen($news_content) < 35)) 
```

# javascript - 响应式 jQuery 菜单

> ID：13944334
> 
> 赞同：3
> 
> 时间：2012-12-19T01:35:24.567
> 
> 标签：javascript, jquery, html, responsive-design

我创建了一个响应式菜单，它在 480 像素及以下中断。如果出现以下情况，我有以下反应：

1.  用户点击“菜单”链接。
2.  菜单滑出。
3.  子菜单幻灯片也可以在 onClick 上切换。
4.  但是您不能单击任何页面。

这与返回false有关吗？

您可以在此处查看示例：http: [//www.stlredtails.com/construction/](http://www.stlredtails.com/construction/)

您可能需要将浏览器的大小调整为 480 像素或以下，以查看响应式导航的实际效果。

这是导航的jQuery：

```
jQuery(".navigation ul").hide();
jQuery("#navigation").click(
    function() {
       jQuery(this).siblings("ul").slideToggle(150, "swing");
       return false;
    }
);
jQuery(".navigation > ul > li").click(
    function() {
       jQuery(this).children("ul").slideToggle(150, "swing");
       return false;
    }
); 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T02:15:52.710

问题来自`return false`. 当您单击链接时，您也在单击祖先`li`和`ul`. 在链接“激活”之前，绑定到祖先单击事件的函数会执行。由于它们`return false`阻止了默认浏览器行为（导航离开）。

对于这种菜单行为有更好的解决方案，但是使用你已经拥有的（并且假设你不会更改你的 html）你可以简单地将以下内容添加到你的 javascript 中：

```
$('.navigation').on('click', 'a:only-child', function(e) {
    e.stopPropagation();
}); 
```

这将搜索导航菜单中所有作为其父级唯一子级的链接（在这种情况下，恰好是您想要继续作为链接工作的链接）并阻止祖先单击事件执行 - 不`return false`应该发生了。

# c++ - LLVM & Clang 无法编译支持的架构

> ID：13944340
> 
> 赞同：10
> 
> 时间：2012-12-19T01:35:56.063
> 
> 标签：c++, architecture, arm, llvm, clang

在 Ubuntu 64 位下我得到了

```
llc --version
LLVM (http://llvm.org/):
  LLVM version 3.1
  Optimized build with assertions.
  Built Oct 15 2012 (18:15:59).
  Default target: x86_64-pc-linux-gnu
  Host CPU: btver1

  Registered Targets:
    arm      - ARM
    mips     - Mips
    mips64   - Mips64 [experimental]
    mips64el - Mips64el [experimental]
    mipsel   - Mipsel
    thumb    - Thumb
    x86      - 32-bit X86: Pentium-Pro and above
    x86-64   - 64-bit X86: EM64T and AMD64 
```

我不能这样做

```
clang -march=arm -x c++ /tmp/cpp.cpp 
error: unknown target CPU 'arm' 
```

我在这里遗漏了什么？为什么我不能为 ARM 编译？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T17:26:38.073

-march 是 LLVM 的内部工具命令行选项，根本与 clang 无关。如果需要为其他目标编译，则需要指定目标三元组。这可以通过多种方式完成（我不记得它们是否适用于 3.1，但它们肯定适用于 3.2）：

*   创建一个从 clang 到 your-target-triple-clang 的链接，例如 arm-none-linux-gnueabi-clang 并通过它编译所有内容
*   提供`-target`选项，例如`clang -target arm-none-linux-gnueabi`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T02:29:53.353

要获取 clang 编译器的选项列表，请使用：

> 铿锵声 -cc1 -help

要指定目标，请使用`-triple`：

> clang -cc1 -triple "arm-vendor-os" 文件名

其中“供应商”和“操作系统”应替换为实际的供应商和操作系统名称。它也可以替换为`unknown`.

`-triple`是一个形式为`ARCHITECTURE-VENDOR-OS`or的字符串`ARCHITECTURE-VENDOR-OS-ENVIRONMENT`。例如：`x86_64-apple-darwin10`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-19T02:15:18.313

主机的 llvm 链接器链接，它只是目标之一，它不会链接到列表中的每个目标。它肯定会为任何目标编译。基本上clang从C / C ++到字节码，然后llc获取字节码并为特定目标进行组装（新的实验选项将字节码直接获取到目标文件）然后你需要一个交叉汇编器和一个交叉链接器来获取它最后一英里（我使用 gnu binutils）。不幸的是，我发现 clang 到字节码并不完全通用（我曾希望并期望它会如此），它实际上确实根据目标改变了与目标无关的输出。下面使用主机三元组而不是使用 -march 的示例允许我的示例在更多主机上正确构建。

```
ARMGNU?=arm-none-eabi
LOPS = -Wall -m32 -emit-llvm -ccc-host-triple $(ARMGNU)
OOPS = -std-compile-opts
LLCOPS = -march=thumb -mtriple=$(ARMGNU)

    clang $(LOPS) -c blinker03.c -o blinker03.clang.bc
    opt $(OOPS) blinker03.clang.bc -o blinker03.clang.thumb.opt.bc
    llc $(LLCOPS) blinker03.clang.thumb.opt.bc -o blinker03.clang.thumb.opt.s
    $(ARMGNU)-as blinker03.clang.thumb.opt.s -o blinker03.clang.thumb.opt.o
    $(ARMGNU)-ld -o blinker03.clang.thumb.opt.elf -T memmap vectors.o blinker03.clang.thumb.opt.o 
```

我没有，但不久将尝试直接使用 llc 来反对（实际上我在一个简单的测试中尝试过它，但没有在任何更大的东西上使用它或将它张贴在任何地方）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T01:51:49.733

你混淆了你的旗帜。clang`-march=`想要一个处理器系列。您可能打算`clang -arch arm`改用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-22T06:41:22.900

正如此[评论](https://stackoverflow.com/questions/13944340/llvm-clang-cant-compile-for-a-supported-arch#comment19251965_13944433)所说，此选项目前在 linux 下尚不支持。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-29T09:40:41.580

“-arch arm”相当于clang中的“-arch armv4t”。我想“-march =”不允许使用通用的“arm”目标，这应该需要更精确的东西，例如“armv6”、“thumbv7”、“armv4t”……

尝试选择特定的子架构。

# android - Gson 解析 JSON 中的 RuntimeException：无法在没有参数的情况下调用受保护的 java.lang.ClassLoader()

> ID：13944346
> 
> 赞同：8
> 
> 时间：2012-12-19T01:38:47.857
> 
> 标签：android, location, gson

我继承了一些使用 Gson 将我们的应用程序状态保存为 JSON 的代码，然后使用[fromJson](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/Gson.html#fromJson%28java.lang.String,%20java.lang.Class%29)读取它。

```
Gson gson = createGson();
gson.fromJson(objString, myClass); 
```

正在保存的字段之一是[Location](http://developer.android.com/reference/android/location/Location.html)。不幸的是，由于我保存的位置在其 mExtras 中包含一个 mClassLoader，并且 Gson 库无法创建该 ClassLoader 并出现此错误，因此该保存数据的解析偶尔会失败：

> RuntimeException：无法在没有参数的情况下调用受保护的 java.lang.ClassLoader()

有谁知道为什么 ClassLoader 被包含在我的位置的附加内容中，以及它是否应该以 JSON 表示形式结束？

我假设我可以通过单独保存 Location 对象中的关键字段（例如，经度、纬度、高度、时间、准确性）来解决此问题，但如果可能的话，最好保存 Location 对象。

我看到有一个[ExclusionStrategy](https://stackoverflow.com/questions/4802887/gson-how-to-exclude-specific-fields-from-serialization-without-annotations)对象我可以用来排除字段，但我不确定我是否可以/应该使用它来排除我位置内部的额外内容......

仅供参考，这是我的 Location 对象的 JSON 数据（更改了经度和纬度以隐藏我）：

```
{
    <snip>
    "lastKnownLocation": {
        "mResults": [
            0,
            0
        ],
        "mProvider": "gps",
        "mExtras": {
            "mParcelledData": {
                "mOwnObject": 1,
                "mObject": 5525040
            },
            "mClassLoader": {
                "packages": {}
            },
            "mMap": {},
            "mHasFds": false,
            "mFdsKnown": true,
            "mAllowFds": true
        },
        "mDistance": 0,
        "mTime": 1354658984849,
        "mAltitude": 5.199999809265137,
        "mLongitude": -122.4376,
        "mLon2": 0,
        "mLon1": 0,
        "mLatitude": 37.7577,
        "mLat1": 0,
        "mLat2": 0,
        "mInitialBearing": 0,
        "mHasSpeed": true,
        "mHasBearing": false,
        "mHasAltitude": true,
        "mHasAccuracy": true,
        "mAccuracy": 16,
        "mSpeed": 0,
        "mBearing": 0
    },
    <snip>
} 
```

以下是代码不崩溃时 mExtras 包含的示例：

```
"mExtras": {
    "mParcelledData": {
        "mOwnsNativeParcelObject": true,
        "mNativePtr": 1544474480
    },
    "mHasFds": false,
    "mFdsKnown": true,
    "mAllowFds": true
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-21T22:19:33.630

问题是您试图直接将系统提供的类 ( `Location`) 转换为 JSON。而且，正如您所见，您在序列化内部状态/Java 特定事物时遇到了问题。JSON 是一种传递信息的半通用方式。

您不能轻易使用`@Expose`注释，因为它不是您的班级；这将需要修改源代码`Location`或通过相当广泛的过程在运行时使用[jassist](http://www.jboss.org/javassist)添加它们（请参阅：[http ://ayoubelabbassi.blogspot.com/2011/01/how-to-add-annotations-at-runtime- to.html](http://ayoubelabbassi.blogspot.com/2011/01/how-to-add-annotations-at-runtime-to.html) )

查看`Location`课程，我只需创建一个自定义 Gson 序列化器和反序列化器并完成它。您真正感兴趣的是 GPS 数据，而不是课程本身的内部结构。您只需使用 getter 在序列化程序中构造包含所需信息的 JSON，然后在反序列化程序中创建一个新实例`Location`并使用公共 setter 使用提供的 JSON 中的信息填充它。

```
class LocationSerializer implements JsonSerializer<Location>
{
    public JsonElement serialize(Location t, Type type, 
                                 JsonSerializationContext jsc)
    {
        JsonObject jo = new JsonObject();
        jo.addProperty("mProvider", t.getProvider());
        jo.addProperty("mAccuracy", t.getAccuracy());
        // etc for all the publicly available getters
        // for the information you're interested in
        // ...
        return jo;
    }

}

class LocationDeserializer implements JsonDeserializer<Location>
{
    public Location deserialize(JsonElement je, Type type, 
                                JsonDeserializationContext jdc)
                           throws JsonParseException
    {
        JsonObject jo = je.getAsJsonObject();
        Location l = new Location(jo.getAsJsonPrimitive("mProvider").getAsString());
        l.setAccuracy(jo.getAsJsonPrimitive("mAccuracy").getAsFloat());
        // etc, getting and setting all the data
        return l;
    }
} 
```

现在在您的代码中使用`GsonBuilder`并注册类：

```
...
GsonBuilder gsonBuilder = new GsonBuilder();
gsonBuilder.registerTypeAdapter(Location.class, new LocationDeserializer());
gsonBuilder.registerTypeAdapter(Location.class, new LocationSerializer());
Gson gson = gsonBuilder.create(); 
... 
```

那应该很照顾它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T01:27:22.877

考虑创建一个自定义对象来模拟您的 GSON，解析每个对象的内容对象和每个字段的字段

就像是

```
JSONObject lastKnownLocation = obj.getJSONObject("lastKnownLocation");
JSONArray mResults = lastKnownLocation.getJSONArray("mResults");

etc...
MyGSON mg=new MyGSON(lastKnownLocation, mResults etc....); 
```

因此，您可以获得对解析的完全控制，并在关键的 mExtra 部分添加 try\catch 块，您可以轻松地排除该块，或根据需要管理异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-30T19:20:10.327

我想有更简单的方法，但可能是错误的。

您可以通过以下方式删除有问题的 Extras：

myClass.loc。**setExtras(null)** ;

*   其中*myClass.loc*是**Location**。

当我保存位置时它确实有效：

```
initPrefs(); 
mPrefs.edit().putFloat(PARAM_DISTANCE, mOdometer.getDistance()).apply();
Location loc = mOdometer.getOrigLocation(); 
loc.setExtras(null); 
Gson gson = new Gson(); 
String json = gson.toJson(loc); 
mPrefs.edit().putString(PARAM_ORIG_LOCATION, json).apply(); 
```

没有它，我在阅读**Location**时遇到了与您相同的错误。

# php - FPDF-合并错误：在使用 fpdm.php 填写表单数据的 pdf 模板中找不到字段

> ID：13944347
> 
> 赞同：1
> 
> 时间：2012-12-19T01:38:48.717
> 
> 标签：php, pdf, fpdf, acrobat, pdf-form

我正在使用来自[http://www.fpdf.org/en/script/script93.php](http://www.fpdf.org/en/script/script93.php)的这个 FPDF 脚本将 html 表单数据填充到模板中的 pdf 字段中。这个：

```
require('fpdm/fpdm.php');

$fields = array(
    'name'  => $_POST['_fid_6'],
    'address'  => $_POST['_fid_7'],
    'city'  => $_POST['_fid_8'],
);

$pdf = new FPDM('template.pdf');
$pdf->Load($fields, false); // second parameter: false if field values are in ISO-8859-1, true if UTF-8
$pdf->Merge();
$pdf->Output('qaf.pdf', 'F'); 
```

当我使用 zip 中提供的示例 template.pdf 时工作正常。但是当我使用自己的 pdf 模板（template3.pdf）时，这是：

```
require('fpdm/fpdm.php');

$fields = array(
    'cascade'  => $_POST['_fid_6'],
    'structuretype'  => $_POST['_fid_7'],
    'marketmanager'  => $_POST['_fid_8'],
);

$pdf = new FPDM('template3.pdf');
$pdf->Load($fields, false); // second parameter: false if field values are in ISO-8859-1, true if UTF-8
$pdf->Merge();
$pdf->Output('qaf.pdf', 'F'); 
```

我收到错误**FPDF-Merge Error: field cascade not found**

我正在使用 Acrobat XI Pro。我已经三次检查了我的 pdf 模板和 html 表单中的字段名称。我优化了 pdf 以消除压缩和快速 Web 视图，并使其与 Acrobat 5.0 及更高版本兼容。我的模板是 7 页，但我只尝试了 1 页，结果相同。我已经尝试丢弃其他数据和对象，但仍然得到相同的错误。

我的 pdf 模板中一定有与示例中的 template.pdf 不同的东西，并且导致了错误。但我不知道它可能是什么。我不能在此处包含我的实际模板 pdf，因为它是专有的。

关于可能导致错误的任何想法？谢谢！

*   在这里交叉发布：[http ://www.fpdf.org/phorum/read.php?f=1&i=60387&t=60387](http://www.fpdf.org/phorum/read.php?f=1&i=60387&t=60387)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-30T12:42:31.957

为此，您必须压缩您的 pdf
然后运行以压缩您的 fdf 您需要安装 pdfftk
然后设置环境并使用 pdftk 使用以下命令行过程进行压缩

```
C:\Users\Deepak\Desktop>pdftk template_3.pdf output template3_o.pdf 
```

然后使用

```
template3_o.pdf 
```

代替

```
template_3.pdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T18:50:25.997

您应该使用 PDFtk ( [http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/) ) 将模板转换为与脚本兼容的版本！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-02T13:23:41.637

当我在 pdf 中有多个具有相同名称的字段时出现此错误。尽管它们在 Adob​​e Reader 中显示为 BuyerEmail，但在字段列表的右侧，它们被引用为 BuyerEmail#0、BuyerEmail#1 等，但即使添加 #0、#1，我也无法在 FPDF 中引用它们，等。解决方案是重命名文档中的字段，然后再次通过 pdftk 运行它。然后它确实起作用了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-02T06:48:24.500

为了使您的 pdf 适用于此代码，您的 pdf 必须具有您在 $fields 数组中指定的字段。所以要做到这一点，我有一个简单的解决方案。

1.  打开 LibreOffice Writer 并使用表单控件创建一个表单。
2.  双击该字段（将打开一个包含所有属性的窗口）并为该字段命名。
3.  使用此名称作为 $field 数组中的键来设置值并在 pdf 文档中显示该值。
4.  一旦您设计了表单并完成了所有表单控件的命名。
5.  使用 LibreOffice 的导出到 pdf 功能，并使用这个导出的 pdf 为您的代码查看可编辑的 pdf。

# java - 为 Android 命名主类

> ID：13944348
> 
> 赞同：1
> 
> 时间：2012-12-19T01:38:52.870
> 
> 标签：java, android, eclipse, class

只是一个真正快速而简单的问题：

制作 android 应用程序时的原始类称为“MainActivity”。如果我将其重命名为“Main”，我会有什么问题吗？

（在我的研究中，我看到它可以重命名，但我不确定这是否会造成复杂性，将其命名为“Main”。我想在弄乱我的程序并将自己挖到一个洞之前先问一下。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T01:41:45.163

不，没问题。不过，有几点需要记住：

*   所有对 的引用`MainActivity`必须重新路由到`Main`。
*   主要活动（要启动的活动）的清单中的所有引用都必须更改为`Main`. （重点关注`<activity android:name="..." .../>`。）
*   如果您更改主要活动类名称，则当前使用您的应用程序的任何人都将丢失其启动器中的快捷方式。
*   `MainActivity`更具描述性-老实说，我会保持这种状态。

我建议您阅读[有关“您无法更改的内容”的 Google 开发人员博客](http://android-developers.blogspot.ca/2011/06/things-that-cannot-change.html)。

# sql - Nhibernate 在 Castle.Proxies.UserProxy 中传递位置参数？

> ID：13944350
> 
> 赞同：0
> 
> 时间：2012-12-19T01:39:14.613
> 
> 标签：sql, sql-server, nhibernate, parameters

我知道我正在失去理智。我已经做了一些事情，现在当我的应用程序访问数据库时，我收到一个错误“无法执行查询......等等等等”

内部消息显示“超时已过期。在操作完成之前超时时间已过或服务器未响应。”

当我查看异常中的 sql 时，它会说 blah blah blah blah`@p0`等等`@p1`。 `@p1`to`@p3`被定义为我期望的那样，但`@p0`被定义为`Castle.Proxies.UserProxy`. 好的，所以如果我将 sql 放入 ssms 查询中，然后将属性子化为`@p1`to `@p3`，然后再将我期望的属性子化，`@p0`那么它会立即返回。

所以让我看看我是否可以简洁。

1.  我的错误是无法执行 sql 并且 sql 超时。
2.  我的错误信息有 SQL。
3.  SQL 有 4 个参数`@p0,@p1,@p2,@p3`。
4.  错误显示参数定义为

    ```
    \r\nPositional parameters:  #0>Castle.Proxies.UserProxy #1>2 #2>2 #3>/MenuItem/Calendar #4>/MenuItem\r\n 
    ```

5.  如果我将 sql 复制到 ssms 查询中并替换 1（我期望的值）、2、2、'/MenuItem/Calendar'、'MenuItem'，那么 sql 会立即返回。

tarnation 中发生了什么。

请帮忙

拉伊夫

* * *

编辑

* * *

上帝保佑，我发现了错误，我在 global.asax 中有一个 onRequestEnd （或其他东西）。在那个事件处理程序中，我已经注释掉了关闭交易。登录时，我正在更新 user.lastlogindate，然后在下一页尝试加载同一用户。我认为由于事务没有关闭，它被锁定了。此外，因为我没有在部署时推送 global.asax，这解释了为什么它在产品中而不是在本地工作。

* * *

地狱对产品没有任何意义，因为它是编译的。任何。忘掉它

* * *

抱歉存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:51:41.647

关于简单查询的超时（特别是因为您说它在运行 SQL 本身时立即返回），要么是数据库服务器没有响应，要么是事务和锁定存在问题。你在使用 TransactionScope 吗？

至于参数，这可能只是在代理的身份被提取之前显示值的情况。

您必须展示您正在做什么才能获得更准确的回复。

# arduino - Arduino二进制串行数据输入

> ID：13944352
> 
> 赞同：3
> 
> 时间：2012-12-19T01:39:21.157
> 
> 标签：arduino

我有一个串行流，我正在尝试读取并从中获取一些变量。输入是串行的，9600，8 个数据位，无奇偶校验，有两个停止位。数据是二进制的。

所以传入的字节可能看起来像`00001001`. 其中包含三个变量。0 是第一个，000 是第二个，1001 是第三个。

第一个解决这个消息是否是给我们的（它是一个 ID，只有两个 ID）。第二个告诉我们数据的位置（我们正在构建一个四位十进制数）。第三个告诉我们该位置的十六进制数据是什么。

所以，00001001 = 9xxx

要为 ID#1 制作 9999，二进制流看起来像这样 00001001000110010010100100111001

我从哪说起呢？如何将数据存储到变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:12:36.707

假设您想无休止地这样做：

```
byte id         = 0;
byte digit      = 0;
char data[2][4] = { { -1, -1, -1, -1 },        // data[id][digit]
                    { -1, -1, -1, -1 } };      // -1 means has yet to be set

while (true)                                   // endless read loop
{
  if (Serial.available())                      // check if it is for us
  {
    id = Serial.peek() >> 7;
    digit = (Serial.peek() & 0x7F) >> 4;       // get data position
    if (digit < 4) 
    {
      data[id][digit] = Serial.read() & 0x0F;  // store data
    }
  }

  // Do your stuff with the data here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:23:15.037

您可能可以在结构中设置位域。

```
struct Packet {
   unsigned short nId       : 1;    // 1 bit
   unsigned short nPosition : 3;    // 3 bits
   unsigned short nData     : 4;    // 4 bits
}; 
```

然后你可以使用结构访问它

```
struct Packet pac;

pac = Serial.Read(); // However you get your serial packet

print(pac.nId);      // A printout of ID 
```

# java - 如何按值而不是键对 TreeMap 进行排序

> ID：13944353
> 
> 赞同：0
> 
> 时间：2012-12-19T01:39:36.787
> 
> 标签：java, treemap

> **可能重复：**
> [TreeMap 按值排序](https://stackoverflow.com/questions/2864840/treemap-sort-by-value)

嗨，我想按值而不是键对 TreeMap 集合进行排序。例如，

```
 TreeMap map=new TreeMap();
    map.put(new Integer(100),"ccc");
    map.put(new Integer(300),"bbb");
    map.put(new Integer(200),"ddd");
    map.put(new Integer(400),"aaa"); 
```

它应该被订购为，

```
1) 400 -> aaa
2) 300 -> bbb
3) 100 -> ccc
4) 200 -> ddd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:02:58.790

你需要一个特殊的迭代器，试试这个

```
...
    Iterator i = valueIterator(map);
    while(i.hasNext()) {
        System.out.println(i.next());
    }
...
    Iterator valueIterator(TreeMap map) {
        Set set = new TreeSet(new Comparator<Map.Entry<Integer, String>>() {
            @Override
            public int compare(Entry<Integer, String> o1, Entry<Integer, String> o2) {
                return  o1.getValue().compareTo(o2.getValue()) > 0 ? 1 : -1;
            }
        });
        set.addAll(map.entrySet());
        return set.iterator();
    } 
```

输出

```
400=aaa
300=bbb
100=ccc
200=ddd 
```

您可以扩展 TreeMap 并将此方法添加到其中。请注意，比较器允许重复值，因为它从不返回 0。

# google-app-engine - 从 GAE 应用程序管理 Google Apps 域中的组

> ID：13944355
> 
> 赞同：2
> 
> 时间：2012-12-19T01:39:52.153
> 
> 标签：google-app-engine, google-groups

我正在使用 Python 和 Google App Engine 开发应用程序。这是一个在由 Google Apps for Business 提供支持的域中执行的应用程序。

我必须考虑的最重要的事情之一是 ACL（访问控制列表）。我的意思是，如果登录的用户是部门主管，例如，他/她可以看到比普通员工“更多的东西”。

管理它的最佳方法是什么？谷歌网上论坛？我应该检查哪个 API？

**更新**：也许不是编程解决的问题，而是配置参数。我对吗？[http://support.google.com/a/bin/answer.py?hl=en&answer=2370108](http://support.google.com/a/bin/answer.py?hl=en&answer=2370108)

提前致谢

# java - 如何在 Oracle regexp_replace 中使用 Java 正则表达式

> ID：13944356
> 
> 赞同：0
> 
> 时间：2012-12-19T01:39:57.753
> 
> 标签：java, sql, regex, oracle

如何`("\\d+\\.*\\d+");`在 Oracle`regexp_replace`函数中使用这个 Java 正则表达式。这在 Java 中运行良好，但在 Oracle 中，它不起作用。

示例数据：

```
<Tier><grade><><sdlc><17,10><> : result should be 17.10
<><sdlc><16,909312> : 16.909312
<><sdlc><11396,87> : 11396.87
<20121217> : 20121217
<UNIT><6086> : 6086
<Tier1><><sdlc><0,47> : 0.47 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:49:16.217

Oracle 中的正则表达式应该是`\d+?\.*\d+?`. 如果您只想要该期间一次，如果有的话，请`\d+?\.?\d+?`改用。[在这里](http://www.java2s.com/Book/Oracle/String_Functions/REGEXP_REPLACE_function.htm)您可以看到更多关于 Oracle 正则表达式的信息。

编辑：每一行的完整正则表达式，只是得到最后的数字，应该是`.*?<\d+?,?\d+?>.*?(\d+?\.?\d+?)`（我在正则表达式的末尾对你需要的东西进行分组）。

编辑 2：如果由于某种原因限定符似乎不起作用，请忽略`*?`两者。我发现 Oracle 使用这种语法而其他语言使用普通的和.`+?``?``*``+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:35:34.910

使用`replace`then`regexp_substr`而`translate`不是使用`regexp_replace`：

```
select translate(regexp_substr(replace(str, ',>', '>')
        , '<[[:digit:]]+(,[[:digit:]]*)?>')
    , ',<>', '.')
from so 
```

[sqlfiddle](http://www.sqlfiddle.com/#!4/795b8/6)

来自[Oracle 数据库 SQL 语言参考 11g 第 2 版 (11.2)](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions150.htm#i1239858)：

*   [翻译](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions216.htm#i1501659)
*   [代替](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions153.htm#i78608)
*   [REGEXP_SUBSTR](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions150.htm#i1239858)
*   [Oracle 正则表达式支持](http://docs.oracle.com/cd/E11882_01/server.112/e26088/ap_posix.htm#g693775)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T03:51:22.330

请注意，Java 的正则表达式风格与 Oracle 的 REGEXP_whatever 函数中使用的风格不同。Java 风格支持更多功能，但它容易受到编写错误的正则表达式的影响，从而导致性能极差。语法也可以有很大不同。换句话说，您不能仅仅因为它在 Java 中工作而期望正则表达式在 Oracle 中工作。从好的方面来说，您不必在 Oracle 中使用那么多反斜杠。

我不精通甲骨文，但我认为这就是你要找的：

```
SELECT REGEXP_REPLACE(mycolumn, '([[:digit:]]+),([[:digit:]]+)', '\1.\2', 1, 0, 'c') FROM mytable; 
```

# android - Android AsyncTask 在执行它的 Activity... 消失时返回

> ID：13944359
> 
> 赞同：2
> 
> 时间：2012-12-19T01:40:01.250
> 
> 标签：android

这是场景：

*   活动“A”创建并执行 AsyncTask“T”
*   当“T”在后台运行时，用户离开“A”
    *   用户如何远离“A”的示例：
        *   按“go”并启动 Intent 启动 Activity“B”（在我的应用中最常见）
        *   按下“返回”按钮（在我的应用中也很常见）
        *   旋转屏幕，没有 android:configChanges="orientation|keyboardHidden"
        *   等等
*   “T”完成了它的工作并返回，试图在“A”上调用函数“F”来更新“A”的用户界面，但是“A”……“走了”？！

我如何确保上述内容不会“炸弹”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:52:40.693

Android 开发中一个非常常见的障碍。当我第一次偶然发现这个问题时，我发现这个 Q 有很多精彩的讨论，为我阐明了一些事情：

[AsyncTask 真的在概念上存在缺陷还是我只是遗漏了什么？](https://stackoverflow.com/questions/3357477/is-asynctask-really-conceptually-flawed-or-am-i-just-missing-something)

作为 AsyncTask 的作者，您必须确保它的孤立完成是“安全的”，否则必须取消/中止。传统的智慧是从你的Activity的onPause或onDestroy中取消（或至少通过你自己的滚动机制在逻辑上分离，正如@iagreen建议的那样）Task实例。

[取消正在执行的 AsyncTask 的理想方法](https://stackoverflow.com/questions/2735102/ideal-way-to-cancel-an-executing-asynctask)

Android 团队成员在网络上经常提供指导，即 AsyncTask 旨在用于生命周期与其父活动的“预期”生命周期密切匹配的短期操作，因此，如果您发现自己在执行长时间运行的操作并且必须恢复部分进度等您可能想查看显式线程管理或对服务进行编码等：

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:53:16.080

主要问题是“AsyncTask”通常被定义为非静态内部类`Activity`。这意味着它包含对`Activity`. 如果 your`Activity`因任何原因被销毁或销毁并重新创建，则 your`AsyncTask`仍在引用您的 'old' `Activity`。由于该活动不再附加到 UI，如果您尝试修改 UI 组件，则会出现异常。

一种选择是在 onStop() 中设置 Activity 的状态——有一个布尔变量指示进程是否停止。在更新 UI 之前检查。

# log4cplus - 如何减小log4cplus的静态库大小

> ID：13944360
> 
> 赞同：0
> 
> 时间：2012-12-19T01:40:01.820
> 
> 标签：log4cplus

我试过log4cplus。它非常方便，符合我们的要求。它唯一的问题是它太大了。编译后，它的静态库在Linux（64位）上大约有11M大。

是否可以通过在构建时指定一些参数来减小其静态库的大小？

我尝试了“strip --strip-all”，但是在将库链接到我的程序时出现了一些未定义的引用错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:03:43.833

您可以手动编辑源并删除您不会使用的 Appender。还要意识到默认情况下，编译的库确实包含调试信息。第三，11 MiB 真的不算什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T05:07:11.473

“是否可以通过在构建时指定一些参数来减小其静态库的大小？”
是 - 构建库作为发布
外观：
Linux（32 位）
7,5 M - 调试构建（-O0 -g3）
~700 K - 发布构建（-O3）

# java - AlarmManager android调用具体方法

> ID：13944365
> 
> 赞同：1
> 
> 时间：2012-12-19T01:41:26.877
> 
> 标签：java, android, eclipse, events, sdk

我目前正在开发一个应用程序，我正在使用这个邮政编码来获取 GPS 锁定。 [在 Android 上获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)

它就像一个魅力！它非常适合我的要求。我现在要做的是每 10 分钟触发一次此方法以获取 gps 信号并将其保存在 txt 文件中。我的问题是我一直无法理解 AlarmManager 是如何工作的，因为它调用 AFAIK 活动的 onCreate() 方法。即使电话处于睡眠状态，如何让 AlarmManager 在后台每 10 分钟调用一次特定方法？

编辑 2：我使用了 A--C 提供的代码，但由于某种原因，警报没有调用我的类 AlarmBroadcastReceiver 上的方法。这是我在 MainActivity 中的方法。

```
 Intent intent = new Intent (this, AlarmBroadcastReceiver.class);
    PendingIntent pendIntent = PendingIntent.getBroadcast(this, 1,  intent, PendingIntent.FLAG_UPDATE_CURRENT);
    AlarmManager alarmManager = (AlarmManager) getSystemService (Context.ALARM_SERVICE);
    alarmManager.cancel(pendIntent); //cancel if active already

    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, Calendar.getInstance().getTimeInMillis()+4000,
            4000, pendIntent); 
```

在 AlarmBroadcastReceiver 类中。

```
 public class AlarmBroadcastReceiver extends BroadcastReceiver{
public float accuracy;
public double latitude;
public double longitud;
public static boolean Activado=false;
public void onReceive(Context context, Intent intent) {
Log.d("AlarmManager", "Method onReceiveCalled");
    } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:48:56.490

除非`Activity`' 方法是静态的并且在同一个进程中运行，否则您不会通过 Intents 运行单个方法。

您可以通过它的 Intent 将额外内容传递给您的 Activity ，该 Intent 指定它应该做什么并`onCreate()`处理其逻辑。

您也可以尝试将功能直接放在 AlarmReceiver 中，因为您可以在该类中使用该功能。

因此，当然，您可以将 Activity 替换为处理此问题的后台服务。

最后，由于您每 10 分钟保存到一个文本文件，您可能会创建一个专门用于保存的类。`String`您所做的就是从您需要的任何地方使用and `Context`（我假设文件操作需要 a ）调用该类`Context`。这可以与您的 GPS 代码集成，很可能与另一个构造函数集成，因此 GPS 类知道它专门获取位置并保存它。

以下是警报设置的示例：

```
 Intent intent = new Intent (this, AlarmBroadcastReceiver.class);
    PendingIntent pendIntent = PendingIntent.getBroadcast(this, 1,  intent, PendingIntent.FLAG_UPDATE_CURRENT);
    AlarmManager alarmManager = (AlarmManager) getSystemService (Context.ALARM_SERVICE);
    alarmManager.cancel(pendIntent); //cancel if active already
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, Calendar.getInstance().getTimeInMillis()+600000,
            600000, pendIntent); 
```

所以你需要一个 Intent，它会变成一个 PendingIntent。然后你需要获取一个 AlarmManager 实例。我的代码的最后一行提前 10 分钟注册警报，重复 10 分钟。`AlarmManager.RTC_WAKEUP`强制手机唤醒以执行闹钟。

# c++ - 在eclipse（ubuntu）中创建C++ Makefile项目时如何生成.bin（可执行文件）？

> ID：13944371
> 
> 赞同：0
> 
> 时间：2012-12-19T01:42:12.010
> 
> 标签：c++, eclipse, makefile, eclipse-cdt, ubuntu-12.04

我已经在我遇到的问题附近看到了答案，但实际上任何人都有用。我刚刚在 Eclipse 中创建了一个 C++ Makefile 项目。我只添加了一个 main.cpp 文件，里面有一些小代码，并手动创建了如下的 make 文件：

```
LINK_TARGET = helloworld

OBJS = \
    main.o

REBUILDABLES = $(OBJS) $(LINK_TARGET)

clean :
    rm -f $(REBUILDABLES)
    @echo Clean done

all : $(LINK_TARGET)
    @echo All done

$(LINK_TARGET) : $(OBJS)
    g++ -g -o $@ $^

%.o : %.cpp
    g++ -g -o $@ -c $< 
```

一切编译正常，我可以看到项目资源管理器窗格中生成了两个文件。生成 main.o 并创建文件**helloworld**但只是一个没有扩展名的文件，我认为这是应该是 bin 的文件。但它不是，只是一个文件。当我尝试将调试中的代码**作为**选项进行调试时，没有可调试的可执行文件。

我需要做一些额外的事情来生成 .bin 吗？我在ubuntu中做这一切。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:44:32.680

在 linux 可执行文件中通常没有扩展名。事实上，扩展作为一个整体在很大程度上是可选的。您应该可以`./helloworld`在`bin`文件夹中运行您的 exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:09:33.327

我明白发生了什么。

生成的这个文件，我认为没有扩展名，实际上是可执行文件。What I just had to do is that when choosing "Debug as..." is just click "Browse..." button and select this "helloworld" in my application root folder. 实际上，在应用程序选择窗口中，该文件可以被视为可执行文件。

因此，在选择它之后，“调试配置”对话框底部的“调试”按钮被启用，它允许我调试和运行应用程序。

# c - 如何找到堆栈深度？

> ID：13944372
> 
> 赞同：3
> 
> 时间：2012-12-19T01:42:19.110
> 
> 标签：c, debugging

我想用 callb 替换以下函数 calla （参考：[从 C 中的任何线程获取调用堆栈](https://stackoverflow.com/questions/1310669/get-call-stack-from-any-thread-within-c)）

```
int calla()
{
   printf("Inside calla\n");
   printf("A1=%x\n",__builtin_return_address (0));
   printf("A2=%x\n",__builtin_return_address (1) );
   printf("A3=%x\n",__builtin_return_address (2) );
}

int callb()
{
   int i,j;
   j = stackdepth(); 
   for (i=0 ; i<j ;i++) 
   printf("%x\n",__builtin_return_address (i));
} 
```

如何找到堆栈深度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:32:12.787

这仅适用于`gcc`, 和某些平台。我可以在这里重新输入所有文档，但是很容易获得：`info gcc`如果您至少有 4.7.2 版本，它是 gcc 手册 () 的第 6.48 节，并且它在[此处](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Return-Address.html)在线。

请注意“级别参数必须是一个常量整数”这句话。这将使循环变得棘手。

您无法可靠地从中获取堆栈高度`__builtin_return_address`，但根据文档，`__builtin_frame_address`当您到达堆栈顶部时将返回 0。

# .net - 在 GAC 之外的 COM+ 应用程序中注册 .NET 程序集

> ID：13944373
> 
> 赞同：7
> 
> 时间：2012-12-19T01:42:24.600
> 
> 标签：.net, wix, windows-installer, com+, servicedcomponent

我开发了一个 .NET 程序集（.NET 4.0，强命名），它公开了两个服务组件。程序集 (dll) 应该托管在 COM+ 应用程序中，并使用 COM+ 属性（程序集和组件级别）进行修饰。例如，装配级属性：

```
//COM+ Attributes
[assembly: ApplicationID("MY_APP_GUID")] //GUID of the COM+ app
[assembly: ApplicationName("MyComPlusAppName")] //Name of the COM+ app
[assembly: ApplicationActivation(ActivationOption.Server)] //The app is hosted in it own dllhost process (out-of-process)
[assembly: ApplicationAccessControl(AccessChecksLevel = AccessChecksLevelOption.ApplicationComponent, Authentication = AuthenticationOption.None, ImpersonationLevel = ImpersonationLevelOption.Delegate, Value = false)]
[assembly: Description("COM+ app description")] 
```

目前（开发原因），我一直在运行以下脚本来创建 COM+ 应用程序并注册程序集（及其所有组件）：

```
%windir%\Microsoft.NET\Framework\v4.0.30319\RegSvcs.exe /appdir:"%CD%" MyComPlusAssembly.dll 
```

上面的批处理文件将根据程序集装饰属性创建（在单次运行中）COM+ 应用程序，在 COM+ 应用程序中注册 MyComPlusAssembly.dll 文件并在其中注册所有 ComVisible 组件，因此在 dcomcnfg 中一切都可见并按预期配置. 此命令还将生成一个全新的 TLB 文件。该程序集是使用 AnyCPU 构建的，因此在 x64 版本的 Windows 上，dllhost.exe 进程将以 64 位运行，而在 x86 版本的 Windows 上，它将以 32 位运行。此外，我的 dll 文件**不**应该放在 GAC 中（这就是我使用 RegSvcs.exe 命令行实用程序的 /appdir 开关的原因）。使用上述批处理文件安装 COM+ 程序集时，一切正常。

我开始为我的应用程序编写一个 Wix (v3.6) 部署项目，它应该做同样的事情，即：创建 COM+ 应用程序，注册 .NET 程序集和所有 ComVisible 组件。请注意，这一次我依赖于 TLB 文件随安装程序 (*.msi) 一起提供的事实。TLB 由构建过程（VS 2010）生成。为了实现上述目标，我添加了以下 Wix 组件（受 Wix COM+ 扩展文档 - WixComPlusExtension 启发）：

```
 <DirectoryRef Id="INSTALLDIR_SERVER">
      <Component Id="cmp_MyComPlusAssembly.dll" Guid="COMPONENT_DLL_GUID">
        <File Id="MyComPlusAssembly.dll" Name="MyComPlusAssembly.dll" DiskId="1" Source="..\install\$(var.Configuration)\Server\MyComPlusAssembly.dll" KeyPath="yes"/>
        <CreateFolder>
          <util:PermissionEx GenericAll="yes" User="NT AUTHORITY\LocalService"/>
        </CreateFolder>
        <complus:ComPlusApplication Id="ComPlusServerApp"
                                    AccessChecksLevel="applicationComponentLevel"
                                    Activation="local"
                                    ApplicationAccessChecksEnabled="no"
                                    ApplicationDirectory="[INSTALLDIR_SERVER]"
                                    ApplicationId="MyComPlusAssembly.dll"
                                    Authentication="none"
                                    Description="MyComPlusAssembly.dll"
                                    Identity="NT AUTHORITY\LocalService"
                                    ImpersonationLevel="delegate"
                                    IsEnabled="yes"
                                    RunForever="yes"
                                    Name="MyComPlusApp"
                                    Deleteable="yes">
          <complus:ComPlusAssembly Id="ComPlusServerAssembley"
                                   DllPath="[#MyComPlusAssembly.dll]"
                                   TlbPath="[#MyComPlusAssembly.tlb]"
                                   Type=".net"
                                   DllPathFromGAC="no">

            <complus:ComPlusComponent Id="COMObject_1"
                                      CLSID="COM_OBJ_1_GUID"
                                      Description="Object 1"
                                      IsEnabled="yes"/>

            <complus:ComPlusComponent Id="COMObject_2"
                                      CLSID="COM_OBJ_2_GUID"
                                      Description="Object 2"
                                      IsEnabled="yes"/>

          </complus:ComPlusAssembly>
        </complus:ComPlusApplication>        

      </Component>
      </Component>

      <Component Id="cmp_MyComPlusAssembly.tlb" Guid="COMPONENT_TLB_GUID">
        <File Id="cmp_MyComPlusAssembly.tlb" Name="cmp_MyComPlusAssembly.tlb" DiskId="1" Source="..\install\$(var.Configuration)\Server\cmp_MyComPlusAssembly.tlb" KeyPath="yes"/>
      </Component>

    </DirectoryRef> 
```

MSI 项目构建成功，但安装过程失败，并在尝试注册 dll 后立即回滚。可以在日志中找到以下错误（对于**x86**和 x64 版本）：

```
Action 16:33:37: RegisterComPlusAssemblies. Registering COM+ components
RegisterComPlusAssemblies: DLL: C:\Program Files\MyApp\Server\MyComPlusAssembly.dll
ComPlusInstallExecute:  Registering assembly, key: ComPlusServerAssembley
ComPlusInstallExecute:  ExceptionInfo: Code='0', Source='System.EnterpriseServices', Description='Failed to load assembly 'c:\program files\myapp\server\MyComPlusAssembly.dll'.', HelpFile='', HelpContext='0'
ComPlusInstallExecute:  Error 0x80020009: Failed to invoke RegistrationHelper.InstallAssembly() method
ComPlusInstallExecute:  Error 0x80020009: Failed to register .NET assembly
ComPlusInstallExecute:  Error 0x80020009: Failed to register assembly, key: ComPlusServerAssembley
ComPlusInstallExecute:  Error 0x80020009: Failed to register assemblies 
```

上述错误可能表示COM+应用程序中正在注册的dll丢失，即文件不在磁盘上。尽管安装过程很快，但我从未见过将 MyComPlusAssembly.dll 文件复制到磁盘（到 [INSTALLDIR_SERVER]），当安装开始回滚时，所有​​其他文件都在磁盘上（包括 TLB）。这是时间问题吗？

观察：

1.  安装程序的两个版本（x64 和 x86）都会发生这种情况。
2.  删除“ `<complus:ComPlusAssembly...>`”标签（包括嵌套组件）时，安装成功并创建（空）应用程序，即 - 只有容器”，没有任何程序集或 COM+ 托管组件。
3.  我尝试添加第三个“ `<Component.../>`”，它创建一个简单的注册表项并将所有“ `<complus:ComPlusApplication.../>`”代码移至其中。该组件将在所有文件被复制后执行。与上面的日志相同的结果（错误）。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:08:13.617

这对我有用：

```
<Component Id="cmp502C27298171EA4E966A386B188D734C" Guid="{7A5ADAA7-8D43-4E91-80DB-764BB1E13887}">
    <File Id="filB4BA1D295EA5EC7D92FD7FEFDD1251C2" KeyPath="yes" Source="$(var.BinComPlusFolder)\MyComponent.dll" />
    <complus:ComPlusApplication Id="MyApp" Name="MyApp" Description="My App" ApplicationAccessChecksEnabled="no" AccessChecksLevel="applicationComponentLevel" Authentication="packet" ImpersonationLevel="impersonate" Activation="local" ApplicationDirectory="[ServicesBinFolder]" Identity="[SERVICE_USERNAME]" Password="[SERVICE_PASSWORD]" ShutdownAfter="3" Deleteable="yes" CRMEnabled="yes" ThreeGigSupportEnabled="no" ConcurrentApps="3" RecycleLifetimeLimit="60" RecycleMemoryLimit="500000" RecycleExpirationTimeout="15" RecycleCallLimit="0" RecycleActivationLimit="0" DumpEnabled="no" DumpOnException="no" DumpOnFailfast="no" DumpPath="%systemroot%\system32\com\dmp" QueuingEnabled="no" />
    <complus:ComPlusAssembly Id="filB4BA1D295EA5EC7D92FD7FEFDD1251C2" Application="MyApp" DllPath="[#filB4BA1D295EA5EC7D92FD7FEFDD1251C2]" TlbPath="[#fil447CD49CDBE45EACEE125A362902CF2F]" Type=".net" RegisterInCommit="yes" />
</Component> 
```

也许您应该省略 DllPathFromGAC 属性？

编辑：这是在 Windows XP 和 Windows 2008 32 位上的 Wix v3.6 上。要确保的另一件事是您还安装了 COM+ 组件所需的所有依赖项。在安装过程中使用[Assembly Binding Log Viewer 查看](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.90%29.aspx)您的组件是否由于缺少或不正确（错误的版本）依赖关系而无法加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T07:52:11.217

似乎有很多这样的例子，但即使你遵循它们，你也可能不会成功。

我是这样做的：

编译链接后，cl *.cs -o foo.dll

```
tlbexp foo.dll
heat file foo.dll -o foodll.wxs
heat file foo.tlb -o foodlltlb.wxs 
```

一些手动编辑 foodlltlb.wxs 文件，因为从热量生成的 wxs 将使用蜡烛 (3.8) 生成警告/错误（基本，TypeLib 必须是 File 的子级）

修复您的 guid 和组件 ID，在您的主 wxs 中引用它们，瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T16:04:29.330

我将 COM+ 程序集的目标平台更改为 3.5，它工作正常。

问题在于从 WixComPlusExtension 调用的 System.EnterpriseServices.dll 版本。该库有多个版本，至少：2.0.xxxx 和 4.0.xxxx。WixComPlusExtension 调用使用 System.EnterpriseServices.RegistrationHelper 类注册程序集的 RegisterDotNetAssembly (cpasmexec.cpp) 方法。事实是，当您针对为框架 4 或更高版本构建的 .net COM+ 库从版本 2.0.xxxx 的 System.EnterpriseServices 调用 RegistrationHelper.InstallAssembly 时，您会收到“加载程序集失败”错误。

任何想法如何调整 WixComPlusExtension （它是开源的）以使其为框架 4 调用 System.EnterpriseServices？

# joomla - 防止在指定页面joomla 2.5中加载代码

> ID：13944375
> 
> 赞同：-1
> 
> 时间：2012-12-19T01:42:25.973
> 
> 标签：joomla, joomla2.5

我是 Joomla 和 Virtuemart 的新手，我在 index.php 中添加了一些代码，我想防止在指定页面中加载这些代码，例如“Virtuemart 购物车视图”，我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:38:18.863

首先，直接在 index.php 中的代码是不好的做法，如果您需要执行类似尝试模块概念的操作，那么您将可以选择在菜单中显示它。

在这里，您正在使用 index.php 中的代码，您应该使用 if(){} 检查页面，例如

```
$task = JRequest::getVar('task');
$option= JRequest::getVar('option');
$view = JRequest::getVar('view');

if($view == "cart" && $option == "com_virtuemart" && $task== "somthing") :
// your code section.
endif; 
```

希望对你有帮助..

# android - 返回检测到的车牌号

> ID：13944378
> 
> 赞同：1
> 
> 时间：2012-12-19T01:43:01.680
> 
> 标签：android, opencv, tesseract

我根据这个博客完成了我的应用程序： [Tracking pin pong ball](http://projectproto.blogspot.co.uk/search/label/OpenCV)

尽管我的程序跟踪正方形/矩形，因为它必须从骑自行车的人那里找到并提取车牌号码。问题是我如何将图片（检测到和裁剪的数字）传回 android 代码以将其传递给 tesseract？任何帮助，将不胜感激。请宽容，我是这个话题的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:53:38.170

搜索名为 faceview.java 的 opencv 示例。

您将获得一个包含原始图像数据的数组，供您随意使用

```
 onPreviewFrame(final byte[] data, final Camera camera) 
```

...如果我不明白确切的问题，请原谅我，但请告诉我，我可以澄清

# xslt - 使用 xslt 1.0 排序

> ID：13944380
> 
> 赞同：4
> 
> 时间：2012-12-19T01:43:14.443
> 
> 标签：xslt, xslt-1.0

我正在尝试使用 XSLT 1.0 版对 xml 文档进行排序。

我的 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<testMain>
<test name="test1" enabled="false">
<field name="abc" enabled="false" description="test1">
</field>
<field name="dac" enabled="false" description="test2">
</field>
<field name="aaa" enabled="false" description="test4">
</field>
<field name="cat" enabled="false" description="test3">
</field>
</test>
</testMain> 
```

结果应采用以下格式，按名称排序：

```
<?xml version="1.0" encoding="UTF-8"?>
<testMain>
<test name="test1" enabled="false">
<field name="aaa" enabled="false" description="test4">
</field>
<field name="abc" enabled="false" description="test1">
</field>
<field name="cat" enabled="false" description="test3">
</field>
<field name="dac" enabled="false" description="test2">
</field>
</test>
</testMain> 
```

我在 xslt 中的代码如下：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="node()|@*">
<xsl:copy>
<xsl:apply-templates select="node()|@*"/>
</xsl:copy>
  </xsl:template>

  <xsl:template match="test">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="field">
        <xsl:sort select="name" data-type="text"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

我不确定为什么没有生成所需的输出。非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:48:44.003

由于`name`是一个属性，您需要使用它来访问它`@`

```
<xsl:sort select="@name" data-type="text"/> 
```

# html - 滑块革命与引导程序冲突

> ID：13944382
> 
> 赞同：0
> 
> 时间：2012-12-19T01:44:08.627
> 
> 标签：html, css, twitter-bootstrap, slider, conflict

我正在尝试将 Slider Revolution 与 Twitter 的 Bootstrap 框架一起使用，并且几乎一切正常。但在 IE9 上，滑块无法正确显示；背景不显示。我发现 Boostrap 的 img max-width 与 Slider Revolution 冲突。

这是冲突代码：

```
 img {
  width: auto\9;
  height: auto;
  max-width: 100%;
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic;

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T10:10:41.133

这`max-width: 100%`是导致问题的属性。

您需要为革命**容器**div 添加特定的 css 规则。

HTML

```
<div id="rs-container">
   <revolution slider>
</div> 
```

模板 CSS

```
#rs-container img {
   max-width:none; 
} 
```

# python - 为什么在字符串连接上使用 os.path.join？

> ID：13944387
> 
> 赞同：102
> 
> 时间：2012-12-19T01:44:39.347
> 
> 标签：python, filepath

我认为我无法在这里看到更大的图景；但基本上我不知道你为什么要使用`os.path.join`而不是普通的字符串连接？

我主要使用VBScript，所以我不明白这个函数的意义。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-12-19T02:59:27.603

## 便携的

*一次*编写文件路径操作，它可以在许多不同的平台上免费工作。分隔字符被抽象掉，使您的工作更轻松。

## 聪明的

您不再需要担心该目录路径是否有[斜杠](https://stackoverflow.com/questions/980255/should-a-directory-path-variable-end-with-a-trailing-slash)。`os.path.join`如果需要，将添加它。

## 清除

Using`os.path.join`使其他阅读您的代码的人清楚您正在使用文件路径。人们可以快速浏览代码并发现它本质上是一个文件路径。如果您决定自己构建它，您可能会分散读者发现代码实际问题的注意力：“嗯，一些字符串连接，一个替换。这是文件路径还是什么？啊！他为什么不使用`os.path.join`？” :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T01:46:28.870

将在带有 '\' 的 Windows 和带有 '/' 的 Unix（包括 Mac OS X）上工作。

对于posixpath，这是简单的代码

```
In [22]: os.path.join??
Type:       function
String Form:<function join at 0x107c28ed8>
File:       /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.py
Definition: os.path.join(a, *p)
Source:
def join(a, *p):
    """Join two or more pathname components, inserting '/' as needed.
    If any component is an absolute path, all previous path components
    will be discarded."""
    path = a
    for b in p:
        if b.startswith('/'):
            path = b
        elif path == '' or path.endswith('/'):
            path +=  b
        else:
            path += '/' + b
    return path 
```

没有窗户，但应该有 '\'

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T02:02:43.303

它独立于操作系统。如果您将路径硬编码为 C:\Whatever，它们将仅适用于 Windows。如果您使用 Unix 标准“/”对它们进行硬编码，它们将仅适用于 Unix。os.path.join 检测它正在运行的操作系统并使用正确的符号连接路径。

# iphone - Facebook iOS SDK 3.1：上传图片/视频时显示进度条

> ID：13944388
> 
> 赞同：0
> 
> 时间：2012-12-19T01:44:53.573
> 
> 标签：iphone, objective-c, facebook, ipad, ios5

我想在我的 iOS 应用程序将视频上​​传到 Facebook 时显示进度条。我尝试了这个问题中显示的方法：

[Facebook iPhone SDK：上传图片时显示进度条](https://stackoverflow.com/questions/2713841/facebook-iphone-sdk-show-a-progress-bar-while-uploading-an-image)

但它不适用于新的 Facebook SDK 3.1。有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:47:07.573

我不知道如何破解 Facebook 源。我只是将 MBProgressBar 添加到视图的中心并将其变暗，以便用户知道他们必须等待。在 Facebook 完成委托中，我删除了所有视觉效果。这一切都非常简单且有效。

# ruby - 在 Ruby for ERB 中转义字符的快速方法

> ID：13944390
> 
> 赞同：2
> 
> 时间：2012-12-19T01:45:05.650
> 
> 标签：ruby, escaping, erb

我正在使用 ERB 并尝试包含许多字符串。`"`当字符串开始包含有问题的字符（如or ）时，我遇到了问题`\`。

我看了这个 SO 的帖子： [Ruby: Escaping special characters in a string](https://stackoverflow.com/questions/4140582/ruby-escaping-special-characters-in-a-string)

这可以解决我的问题，但是我有大约十几个要模板化的变量，并且对每个变量调用该方法似乎有点乏味。所以，在我继续打电话之前`escape`，我想知道是否有更短的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:43:14.407

%q 似乎可以很好地处理[JSON 语法：](http://www.json.org/)

```
ruby-1.9.2-p290 :089 > %q{ ' " \ \\ \/ \b \f \n \r \t \u ^F}
# => " ' \" \\ \\ \\/ \\b \\f \\n \\r \\t \\u \u0006" 
```

# angularjs - 当 runner.html 执行 E2E 测试时，动态配置模块的最佳实践方法是什么？

> ID：13944393
> 
> 赞同：1
> 
> 时间：2012-12-19T01:45:28.277
> 
> 标签：angularjs

我正在开发一个 Angularjs 应用程序并使用不同的模块通过 ngMockE2E 运行 E2E 测试。我目前正在手动更改 app.js 文件中的布尔变量，以将应用程序配置为使用 ngMockE2E 进行测试，然后返回不使用它进行正常操作。

当 runner.html 执行 E2E 测试时，动态配置模块的最佳方法是什么？

```
var testing = 'false';

var myApp = angular.module('myApp', ['ngResource']);

if (testing=='true') {
    var myAppDev = angular.module('myApp', ['ngResource','ngMockE2E']);

    myAppDev.run(function($httpBackend) {
        var player = {name: 'Sandra'};
        $httpBackend.whenGET('player.json').respond(player); 
    });
} 
```

# hibernate - Hibernate 在运行时是否支持混合实体模式？

> ID：13944396
> 
> 赞同：2
> 
> 时间：2012-12-19T01:46:12.670
> 
> 标签：hibernate, hibernate-mapping

只是想知道 Hibernate 是否支持实体中静态属性和动态属性的组合。例如

```
public class User
{  
  private Long id;  
  private String first_name;  
  private String last_name;  
  private Map<String,Object> dynamicProperties;  
} 
```

我可以通过在运行时从 Db 读取用户表的元数据来获取动态属性。基本上我正在开发一种支持多个客户端的产品。

对于一个客户端，用户表只能有像`id`,这样的列`first_name`，`last_name`而对于另一个客户端，用户表需要存储两个附加列，比如`DOB`和`Title`。

考虑到所有客户端`id`之间`first_name`的`last_name`通用属性集，我将它们用作静态属性和休息，我计划将其作为地图存储在实体中。不确定冬眠是否支持这一点。

约束是代码只在运行时知道动态属性列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:57:42.923

我认为您的映射策略需要考虑。在休眠中，您希望您的架构是静态的。我建议将 dynamicProperties 重命名为 metaData 并使映射具有字符串键和字符串值，然后将其作为映射属性包含在您的休眠映射文件中。在hibernate中拥有一个映射的通用对象值的映射没有意义。另一种选择是将地图标记为@transient，但我认为第一个建议更有意义。您需要特定于客户端的元数据，因此将其映射为架构的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:15:09.410

我正在从事的项目正是这样做的（动态的，每个客户端的模型）。但是，我们不会尝试在同一行上混合静态（基于类）和动态实体。您可以通过将模型的静态部分与动态部分分开并将静态部分与类和动态部分映射到 EntityMode.MAP 实体来轻松地做您想做的事情。我已经[为 Hibernate 4.1 提交了一个补丁，](https://github.com/hibernate/hibernate-orm/pull/455)它允许您将 JPA 条件查询与 EntityMode.MAP 一起使用。这使得动态查询生成更加简单。

# ruby - rb-fsevent 有什么作用？

> ID：13944398
> 
> 赞同：11
> 
> 时间：2012-12-19T01:46:34.470
> 
> 标签：ruby, rubygems

最近将 OSX Lion 上的 Ruby 从 1.8.7 更新到 1.9.3。在此过程中，我丢失了安装在 1.8.7 上的 Ruby Gem，因此尝试重新安装它们。

遇到了 rb-fsevent 宝石。文档说：

> 带有信号捕获的 FSEvents API（没有 RubyCocoa）

它究竟是做什么的？

其他宝石都不依赖于它。所以我想知道是否需要在 1.9.3 上安装它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-19T02:32:06.443

rb-fsevent 是一个高效的 OSX 文件系统轮询解决方案。它使用 OSX 的底层“fsevent”api 来侦听文件系统事件（更新的文件等），然后在发生时执行某些操作。与抓取文件系统以查找更新文件的其他解决方案相比，您的硬盘驱动器磨损更少，CPU 密集度更低。

很多 gem 不依赖它，但如果安装了它就会使用它......

# java - 在eclipse中运行时关闭已经运行的东西

> ID：13944402
> 
> 赞同：7
> 
> 时间：2012-12-19T01:46:51.133
> 
> 标签：java, eclipse, drjava

我想知道在 eclipse 中是否有 eclipse 的方法，当你按下播放按钮（运行）时，它会关闭已经运行的程序。例如，如果任何人都使用过 Dr. Java，当您单击运行时，它基本上会关闭所有正在运行的、已编译的程序并打开您想要运行的任何内容。我希望在 Eclipse 中有一种方法可以做到这一点，因为我经常忘记在运行修改版本之前关闭程序。

同样在 Java 博士中，它围绕“重置交互窗格”的行说了一些话，如果这有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:12:19.297

打开调试视图，您可以终止所有从 Eclipse 启动的正在运行的进程。 ![Debug **Perspective** 的图片，但您可以从任何地方打开视图](../Images/864c08e289aa1590569d7eef984e0829.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-18T18:51:53.737

转到 Window->Preferences->Run/Debug->Launching，然后检查“启动时终止并重新启动”。

[![终止并重新启动 Eclipse 可视化](../Images/ea5fca2bf27f247efc3ecc6b9f7ff2b4.png)](https://i.stack.imgur.com/LMAJX.png)

# facebook-graph-api - Facebook API 不支持获取请求

> ID：13944405
> 
> 赞同：4
> 
> 时间：2012-12-19T01:47:13.017
> 
> 标签：facebook-graph-api, access-token

我正在使用 PHP SDK 发布 Open Graph 操作。这些动作中，大约有 20 次随机出现在墙上，但我无法通过 API 访问或删除它。尝试这样做会出现“不支持的 GET 请求”或“不支持的删除请求”的错误。因此，除非用户使用 Facebook 将其删除，否则这些操作将永远停留在时间线上。

我的猜测是这是一个访问令牌问题，但是什么原因和解决方案？

更新

我在我的代码中发现了一个错误，其中一个操作有时会被删除两次，因此出现了异常。然而，我对错误代码提出了质疑，这与为许多事情返回的代码相同，其中大多数与访问令牌相关。一个简单的“别名不存在”会为我省去很多麻烦。

# c++ - 编译器生成的默认构造函数工作 - C++

> ID：13944408
> 
> 赞同：4
> 
> 时间：2012-12-19T01:47:51.167
> 
> 标签：c++, default-constructor

我正在尝试了解类的默认构造函数的工作，但无法弄清楚这种情况：

情况1：

```
class A  
{  
  public:
     int m;
     string s;
}; 
```

然后我创建这个类的对象：
a）`A a; // Result: compiler initializing m with garbage value`
b）`A a = A(); // Result : compiler initializing m with garbage value`

案例 2：现在我`s`从班级中删除了字符串：

```
class A
{
  public:
    int m;
}; 
```

一）`A a; // Result: when try to access m I get run time error`
二）`A a = A(); //Result: m is initialized to zero`

Q1) 为什么案例 1 和案例 2 存在差异？
Q2) 如果我在这两种情况下都为我的类提供默认构造函数，那么 a) 和 b) 会是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:51:30.833

因为在这两种情况下，整数都未初始化。这意味着它的值是未定义的。它可以为零，也可以是整数可以包含的任何其他值。

如果要在默认构造函数中将其初始化为零，可以这样做：

```
class A
{
  public:
    A::A();
    int m;
};

A::A()
  : m( 0 )
{} 
```

请注意，您不必为 a 提供显式构造函数，`string`因为它是一个类，并且有自己的默认构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T02:03:11.860

案例 1：类`A`是非 POD。
案例 2：类`A`是一个 POD。

```
a) A a; //This is default initialization
b) A a = A(); // This is value initialization 
```

案例'1'：`m`将由编译器生成的默认构造函数初始化为一些垃圾值。

案例“2”：`m`将被零初始化，因为`A`是 POD。

在任何情况下，您都不应该发生崩溃。如果你这样做，你可能正在使用一个损坏的编译器。

有关默认初始化和值初始化的更多详细信息，请参阅[此链接](https://stackoverflow.com/questions/1613341/what-do-the-following-phrases-mean-in-c-zero-default-and-value-initializat)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T01:59:48.717

`class A`案例 1 和案例 2 之间的唯一区别是，在案例 1 中，编译器将综合一个[非平凡的默认构造函数](http://en.cppreference.com/w/cpp/language/default_constructor#Trivial_default_constructor)，因为`s`in`class A`是一个非原始类型。但是，在这两种情况下，`m`都没有被初始化。

# ruby - 如何屏蔽与预期不符的字母？

> ID：13944411
> 
> 赞同：0
> 
> 时间：2012-12-19T01:48:10.820
> 
> 标签：ruby, restrictions

我的目标是创造一个刽子手游戏。我写了类似这样的代码：

```
c = []
players_guess = gets
b = "example"
b.scan(/./) {|letter| c << letter}

c.each do |letter|
  if letter == players_guess
    puts letter
  else
    puts "*"
  end
end 
```

该代码检查玩家是否从隐藏在变量中的密码中猜对了字母`c`，然后显示隐藏在`*`s 后面的密码，只显示猜到的字母。但是当我运行程序时，结果总是一样的，它显示`players_guess`，然后给出 7 `*`。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:24:33.097

这是一个简单的方法来做你想做的事：

```
word = "example"
puts "Type a letter: "
guess = gets.chomp
puts word.tr("^#{guess}", "*") 
```

这使用该`String#tr`方法将除猜测之外的所有内容替换为`*`.

如果您键入，输出`e`将是`e*****e`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:15:00.700

### 你的如果/那么逻辑是错误的

您的代码如下：

```
c.each do |letter|
  if letter == players_guess
    puts letter
  else
    puts "*"
  end
end 
```

条件通常为假，因为没有单个字母可能与 检索的整行匹配`gets`。结果，您会为*c*中的每个字母打印一个星号。

### 修复代码的一些选项

你可以在这里做几件事。

1.  如果字符串相等，只需显示字符串。

    ```
    puts players_guess if b == players_guess.chomp 
    ```

2.  在你的循环中使用一个计数器来索引你的数组或字符串。

    *   [http://www.ruby-doc.org/core-1.9.3/String.html#method-i-index](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-index)
    *   [http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D)
3.  将两个字符串拆分为一个数组，然后比较数组，打印匹配的字母或不匹配的星号。

    ```
    c.each_with_index do |char, idx|
      puts char == players_guess.scan(/./)[idx] ? char : '*'
    end 
    ```

# php - 使用 cURL 从我的站点登录 HTTPS 站点

> ID：13944415
> 
> 赞同：0
> 
> 时间：2012-12-19T01:49:07.257
> 
> 标签：php, curl, https

我尝试使用以下代码登录网站。它有一个弹出消息

“虽然此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取。您确定要继续发送此信息吗？”

在授予访问权限之前，需要单击“继续”按钮。

代码不起作用，我不确定它是否与消息有关，或者我没有做对什么？

```
$url = "https://anothersite.com/login.php";
$agent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/A.B (KHTML, like Gecko) Chrome/X.Y.Z.W Safari/A.B.";
$username = "xxxx";
$password = "1234";
$postfields = "username=".$username."&password=".$password;
$cookie_file_path = getcwd().'/cookie.txt';

$ch = curl_init();

curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC); 
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERAGENT, $agent);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_SSLVERSION, 3); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
curl_setopt($ch, CURLOPT_POST, 1);

echo curl_exec($ch);

curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:56:20.147

您似乎没有使用授权 CA 颁发的证书。

尝试将以下设置为 false。它应该工作。

```
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

# mysql - Mysql将列转换为行（数据透视表）

> ID：13944417
> 
> 赞同：27
> 
> 时间：2012-12-19T01:49:12.403
> 
> 标签：mysql, sql, pivot, unpivot

我有一张这样的桌子

```
+---+-----+----+----+----+----+
|id |month|col1|col2|col3|col4|
+---+-----+----+----+----+----+
|101|Jan  |A   |B   |NULL|B   |
+---+-----+----+----+----+----+
|102|feb  |C   |A   |G   |E   |
+---+-----+----+----+----+----+ 
```

然后我想创建这样的报告

```
+----+---+---+
|desc|jan|feb|
+----+---+---+
|col1|A  |C  |
+----+---+---+
|col2|B  |A  |
+----+---+---+
|col3|0  |G  |
+----+---+---+
|Col4|B  |E  |
+----+---+---+ 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-19T01:54:08.683

您需要做的是首先取消透视数据，然后对其进行透视。但不幸的是，MySQL 没有这些函数，因此您需要使用对 unpivot 的查询和对枢轴`UNION ALL`使用 a 的聚合函数来复制它们。`CASE`

unpivot 或`UNION ALL`片段从您的 col1、col2 等获取数据并将其转换为多行：

```
select id, month, col1 value, 'col1' descrip
from yourtable
union all
select id, month, col2 value, 'col2' descrip
from yourtable
union all
select id, month, col3 value, 'col3' descrip
from yourtable
union all
select id, month, col4 value, 'col4' descrip
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/7b655/4)。

结果：

```
|  ID | MONTH |  VALUE | DESCRIP |
----------------------------------
| 101 |   Jan |      A |    col1 |
| 102 |   feb |      C |    col1 |
| 101 |   Jan |      B |    col2 |
| 102 |   feb |      A |    col2 |
| 101 |   Jan | (null) |    col3 |
| 102 |   feb |      G |    col3 |
| 101 |   Jan |      B |    col4 |
| 102 |   feb |      E |    col4 | 
```

然后将其包装在子查询中以应用聚合并将其`CASE`转换为您想要的格式：

```
select descrip, 
  max(case when month = 'jan' then value else 0 end) jan,
  max(case when month = 'feb' then value else 0 end) feb
from
(
  select id, month, col1 value, 'col1' descrip
  from yourtable
  union all
  select id, month, col2 value, 'col2' descrip
  from yourtable
  union all
  select id, month, col3 value, 'col3' descrip
  from yourtable
  union all
  select id, month, col4 value, 'col4' descrip
  from yourtable
) src
group by descrip 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7b655/3)

结果是：

```
| DESCRIP | JAN | FEB |
-----------------------
|    col1 |   A |   C |
|    col2 |   B |   A |
|    col3 |   0 |   G |
|    col4 |   B |   E | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-11T07:30:40.100

尽管这个问题已经过时并且有人将其标记为“非常常见”，但人们似乎仍然发现它（包括我在内）并发现它很有帮助。我开发了一个更通用的版本来取消旋转一行，并认为它可能对某人有所帮助。

```
SET @target_schema='schema';
SET @target_table='table';
SET @target_where='`id`=1';
SELECT
    GROUP_CONCAT(qry SEPARATOR ' UNION ALL ')
    INTO @sql
FROM (
    SELECT
        CONCAT('SELECT `id`,', QUOTE(COLUMN_NAME), ' AS `key`,`', COLUMN_NAME, '` AS `value` FROM `', @target_table, '` WHERE ', @target_where) qry
    FROM (
        SELECT `COLUMN_NAME` 
        FROM `INFORMATION_SCHEMA`.`COLUMNS` 
        WHERE `TABLE_SCHEMA`=@target_schema 
            AND `TABLE_NAME`=@target_table
    ) AS `A`
) AS `B`;
PREPARE s FROM @sql; EXECUTE s; DEALLOCATE PREPARE s; 
```

我在 MySQL 8.x 服务器上使用此查询并将其聚合到那里的 JSON 对象，因此是`id, key, value`结果结构。

# c# - 如何将我的组合框值设置为它们包含的默认值？

> ID：13944422
> 
> 赞同：0
> 
> 时间：2012-12-19T01:50:16.670
> 
> 标签：c#, windows-store-apps

这两个我都试过了：

```
comboBoxToHour.SelectedValue = comboBoxToHour.Items.IndexOf("11");
comboBoxToHour.SelectedIndex = comboBoxToHour.Items.IndexOf("11"); 
```

...而且没有一个工作，事实上，这也没有：

```
comboBoxFromHour.SelectedValue = "11"; 
```

...也不是这个：

```
comboBoxFromHour.SelectedIndex = 12; 
```

...我觉得很奇怪。

## 更新

我尝试了罗斯建议的修复，但是这样：

```
if (App.roamingSettings.Values.ContainsKey("FromMonthSection1"))
{
    if (comboBoxFromMonth.Items != null)
    {
        var item = comboBoxFromMonth.Items.FirstOrDefault(p => (p as ComboBoxItem).Content.ToString() == App.roamingSettings.Values["FromMonthSection1"].ToString()); 
```

...我得到，“对象引用未设置为对象的实例。” 在最后一行。

## 更新 2

事实证明，一个简单的方法毕竟是有效的。事实证明：

```
if (App.roamingSettings.Values.ContainsKey("FromMonthSection1"))
{
    if (comboBoxFromMonth != null)
    {
        var item = comboBoxFromMonth.Items.FirstOrDefault(p => (p as ComboBoxItem).Content.ToString() == App.roamingSettings.Values["FromMonthSection1"].ToString());
        if (item != null)
        {
            comboBoxFromMonth.SelectedItem = item;
        }
    }
} 
```

...失败，“ *System.NullReferenceException 未由用户代码 HResult=-2147467261 处理消息=对象引用未设置为对象的实例。* ”

...在分配给项目的行上。

然而，这：

```
if ((App.roamingSettings.Values.ContainsKey("FromMonthSection1")) &&
    (!string.IsNullOrWhiteSpace(App.roamingSettings.Values["FromMonthSection1"].ToString())))
{
    comboBoxFromMonth.SelectedItem = App.roamingSettings.Values["FromMonthSection1"].ToString();
} 
```

...作品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:54:12.367

也许您想用来`FindString`锻炼索引：

```
comboBoxToHour.FindString("Name of a item") 
```

例如

```
comboBoxToHour.DisplayMember = "Name";
comboBoxToHour.ValueMember = "Value";
comboBoxToHour.DataSource = aList; 
comboBoxToHour.SelectedIndex = comboBoxToHour.FindString("Name of a item") 
```

或者因为我已将组合框绑定到数据源，所以我可以使用 SelectedValue：

```
comboBoxToHour.SelectedValue = "5"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:26:21.130

看起来您没有使用视图模型，因此 .Items 是 ComboBoxItem 的列表。您基本上要求将组合框项与找不到的字符串进行比较，因此将所选索引选择为-1；

此代码可以实现您想要的：-

```
var item = comboBoxToHour.Items.FirstOrDefault(p => (p as ComboBoxItem).Content.ToString() == "4");
if (item != null)
{
    comboBoxToHour.SelectedItem = item;
} 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-02T17:55:58.453

要显示组合框的第一项：

List ModeOptions=new List() {"--选择模式--","Driving","Walking","Transit"};

comboBoxOptions.ItemsSource = ModeOptions;

comboBoxOptions.SelectedItem = ModeOptions[0];

# java - java fileIO运行时错误

> ID：13944423
> 
> 赞同：-1
> 
> 时间：2012-12-19T01:50:27.513
> 
> 标签：java, file, file-io, runtime-error

# 信息：

所以我做了一个简单的类来保存某个俄罗斯方块游戏的高分。

当我的整个游戏都以.JAR 形式保存时，我需要该文件可以访问，因此我需要将文件位置设置为外部。

所以现在我使用“c：//”位置，因为我确定所有计算机都有。但我不确定所有计算机都有 LineHighscores.txt 和 TimeHighscores.txt 文件，因此需要创建它们。

# 问题：

每当我运行我的代码时，我都会收到一个错误：

```
 c:/TimeHighscores.txt
  c:/TimeHighscores.txt
  dec 19, 2012 2:26:35 AM tetris.FileIO loadHighscores
  SEVERE: null
  java.io.IOException: Toegang geweigerd
at java.io.WinNTFileSystem.createFileExclusively(Native Method)
at java.io.File.createNewFile(File.java:947)
at tetris.FileIO.loadHighscores(FileIO.java:75)
at tetris.FileIO.getTimeScores(FileIO.java:37)
at tetris.HighScores.<init>(HighScores.java:41)
at tetris.Menu$2.actionPerformed(Menu.java:75)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased
            (BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:682)
at java.awt.EventQueue$3.run(EventQueue.java:680)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege
            (ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege
            (ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:696)
at java.awt.EventQueue$4.run(EventQueue.java:694)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege
            (ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
at java.awt.EventDispatchThread.pumpOneEventForFilters
            (EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarchy
            (EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)

    java.io.FileNotFoundException: c:\TimeHighscores.txt 
   (Het systeem kan het    opgegeven bestand niet vinden)
    Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at tetris.FileIO.loadHighscores(FileIO.java:84)
at tetris.FileIO.getTimeScores(FileIO.java:37)
at tetris.HighScores.<init>(HighScores.java:41)
at tetris.Menu$2.actionPerformed(Menu.java:75)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased
           (BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:682)
at java.awt.EventQueue$3.run(EventQueue.java:680)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege
              (ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege
              (ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:696)
at java.awt.EventQueue$4.run(EventQueue.java:694)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege
              (ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
at java.awt.EventDispatchThread.pumpOneEventForFilters
              (EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter
              (EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarchy
               (EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

# 代码：

```
 public class FileIO   {
private File file;
private Scanner filescScanner, lineScanner;
private PrintWriter fileWriter;
private String[][] data;
static final String lineHighscoreTXT = "c://LineHighscores.txt", timeHighscoreTXT = "c://TimeHighscores.txt";

public FileIO () {
    data = new String[100][2];
}
public String[][] getLineScores(){
    System.out.println(lineHighscoreTXT);
    return this.loadHighscores(lineHighscoreTXT);
}
public String[][] getTimeScores(){
    System.out.println(timeHighscoreTXT);
    return this.loadHighscores(timeHighscoreTXT);
}

public void setLineScores( String name,String lines ){
    boolean found= false;
    data = this.getLineScores();
    for(int i = 0; i<data.length && !found ; i++){
        if(data[i][0] == null || "Niemand".equals(data[i][0])){
            data[i][0]=name;
            data[i][1]=lines;
            found=true;
        }

    }
    this.saveHighscores(lineHighscoreTXT,data);
}
public void setTimeScores(String time, String name){
    boolean found= false;
    data = this.getLineScores();
    for(int i = 0; i<data.length && !found ; i++){
        if(data[i][0] == null || "Niemand".equals(data[i][0])){
            data[i][0]=name;
            data[i][1]=time;
            found=true;
        }

    }
    this.saveHighscores(timeHighscoreTXT,data);
}

private String[][] loadHighscores( String fileLocation){

int x=0;
String test = "";
System.out.println(fileLocation.toString());
File file = new File(fileLocation);
if (!file.exists()){
    try {
            file.createNewFile();
        } catch (IOException ex) {
            Logger.getLogger(FileIO.class.getName()).log(Level.SEVERE, null, ex);
        }
}
try{
    filescScanner = new Scanner(file);}
catch(Exception ioe){System.err.println(ioe);}

   if (filescScanner.hasNext()){

        while(filescScanner.hasNextLine()&& x<100) {

            lineScanner = new Scanner(filescScanner.nextLine());
            lineScanner.useDelimiter("-/-");

            data[x][0]=lineScanner.next();//name    
            data[x][1]=lineScanner.next();//data   
            x++;

        }
        lineScanner.close();
        filescScanner.close();
   }
   else{
       data[0][0] = "Niemand";
       data[0][1] = "0";
   }
    return data;

}
private void saveHighscores( String fileLocation, String[][] data){
    int x=0;
        file = new File(fileLocation);  
        if (!file.exists()){try {
            file.createNewFile();
        } catch (IOException ex) {
            Logger.getLogger(FileIO.class.getName()).log(Level.SEVERE, null, ex);
        }
  }
    try {
        fileWriter = new PrintWriter(file);
    } catch (FileNotFoundException ex) {
        Logger.getLogger(FileIO.class.getName()).log(Level.SEVERE, null, ex);
    }

    if(data.length>x){
        while(data.length>x && data[x][0] != null ){
            fileWriter.println(data[x][0]+"-/-"+data[x][1]);
            x++;
        }
        fileWriter.close();
    }
}

 public static void main(String[] args){
    FileIO file = new FileIO();
    file.setLineScores("55555555", "KoenKevin");      
}

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:52:43.040

我不懂荷兰语，但我假设这意味着“访问被拒绝”？

java.io.IOException：Toegang geweigerd

如果是这样，这可能是由于 Windows 出于安全目的限制文件写入 C:\ 造成的。

您必须写入其他位置，或以管理员身份运行您的应用程序

# python - 尝试在 Python 中将 dbf 转换为 csv 时出错

> ID：13944427
> 
> 赞同：3
> 
> 时间：2012-12-19T01:51:15.343
> 
> 标签：python, dbf

Python新手在这里，所以请温柔。

我正在尝试将 dbf 文件转换为 csv。我偶然发现了一个[以前的类似](https://stackoverflow.com/questions/4440791/convert-csv-file-into-dbf-using-python)问题（虽然有相反的转换）并且正在考虑使用[dbf](http://pypi.python.org/pypi/dbf/)模块。

使用[文档](http://packages.python.org/dbf/)中的示例，我尝试了此代码：

```
import dbf

dbf_fn = r'_PATH_HERE_\dbffile.dbf'
csv_fn = r'_PATH_HERE_\csvfile.csv'

in_db = dbf.Table(dbf_fn)

in_db.export(filename=csv_fn, header=True) 
```

当我尝试运行它时，我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#24>", line 1, in <module>
    in_db.export(filename=csv_fn, header=True)
  File "C:\Python27\ArcGIS10.1\lib\site-packages\dbf.py", line 3379, in __getattr__
    return object.__getattribute__(self, name)
AttributeError: 'Db3Table' object has no attribute 'export' 
```

为什么导出失败？

* * *

**更新：**

正如[chm](https://stackoverflow.com/users/1292791/chm)所建议的，我现在使用：

```
dbf.export(in_db, csv_fn, header=True) 
```

这仍然会导致问题：

```
Traceback (most recent call last):
  File "D:\Data_RP\data\projects\kN\GIS\python\04_convert_dbf_ALT.py", line 31, in <module>
    dbf.export(in_db, filename=csv_fn, header=True)
  File "C:\Python27\ArcGIS10.1\lib\site-packages\dbf.py", line 5670, in export
    table = source_table(table_or_records[0])
  File "C:\Python27\ArcGIS10.1\lib\site-packages\dbf.py", line 3384, in __getitem__
    return self._table[value]
  File "C:\Python27\ArcGIS10.1\lib\site-packages\dbf.py", line 3175, in __getitem__
    raise DbfError("%s is closed; record %d is unavailable" % (meta.filename, index))
DbfError: D:\Data_RP\data\projects\kN\GIS\shapes\SWM_4N.dbf is closed; record 0 is unavailable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:05:56.790

我发现网站上的文档是错误的。如果您在代码中使用帮助，您可以看到正确的文档，如下所示：

```
export(table_or_records, filename, field_names=None,
format='csv', header=True, codepage=None)
writes the records using CSV or tab-delimited format, using the filename
given if specified, otherwise the table name
if table_or_records is a collection of records (not an actual table) they
should all be of the same format 
```

1.`export`现在不是班级成员`Table`。只需使用 `dbf.export(in_db, csv_fn, header=True)` 而不是 `in_db.export(filename=csv_fn, header=True)`

2.`open`创建表后使用（代码示例：）

```
import dbf

csv_fn = r'sdv.csv'

table = dbf.Table('temptable.dbf')
table.open()

dat=('John Doe', 31)
table.append(dat)
dbf.export(table, csv_fn, header = True) 
```

# objective-c - 为什么 UIAlertView 添加 UISearchBar 时 UISearchBar 不调用 UISearchBarDelegate？

> ID：13944431
> 
> 赞同：1
> 
> 时间：2012-12-19T01:51:43.510
> 
> 标签：objective-c, ios

我已经设置了 UISearchBar 的委托，但是为什么`UISearchBarDelegate`在操作 hospitalSearchBar 时它没有调用。

* * *

测试视图控制器.h

```
#import "TestViewController.h"

@interface TestViewController : UIViewController<UISearchBarDelegate>

- (IBAction)buttonClick:(id)sender;

@end 
```

* * *

测试视图控制器.m

```
#import "TestViewController.h"

@implementation TestViewController

- (IBAction)buttonClick:(id)sender
{
        UISearchBar *hospitalSearchBar = [[UISearchBar alloc] init];
        [hospitalSearchBar setDelegate:self];
        [hospitalSearchBar setShowsSearchResultsButton:YES];
        UIPickerView *hospitalPickerview = [[UIPickerView alloc] init];
        MAlertView *alert = [[MAlertView alloc] initWithTitle:@"" message:nil delegate:self cancelButtonTitle:@"提交" otherButtonTitles:@"cancel", nil];
        [alert addSearchBar:hospitalSearchBar placeHolder:@"Key Word"];
        [alert addPickerView:hospitalPickerView];
        [alert setDelegate:self];
        [alert show];
}

- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar{return YES;}

- (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text{return YES;}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar{[self endEditing:YES];}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:21:52.297

你的代码给了我错误:)

然而我的观点是，你在`UISearchBar`里面添加了一个`MAlertView`（**子类**）**`delegate self`**。

所以在里面实现委托，你可以在类`MAlertView`中检测到`UISearchBar`委托。`MAlertView`

如果它没有修复，请向我提供课程的完整实施细节`MAlertView`。

# java - URL 内参数和 ForwardResolution 映射

> ID：13944432
> 
> 赞同：0
> 
> 时间：2012-12-19T01:51:45.053
> 
> 标签：java, servlets, parameters, stripes

当我有一个带有 UrlBinding 的 ActionBean 时

```
@UrlBinding("/whatever/{foo}/{bar}") 
```

那么如果在其他一些操作中我创建一个 ForwardResolution 并将其返回到“/whatever/hello/world”，我会有点喜欢它，如果在目标 ActionBean 中，“foo”参数设置为“hello”并且“bar”参数设置为“world”。据我在 Stripes 1.5.3 中所知，这不会发生。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:12:09.393

这个答案归功于 Stripes 用户邮件列表中的 Matthijs Laan。我只需要在我的 web.xml 文件中为 Stripes添加一个`<dispatcher>`元素。`<filter-mapping>`以前它看起来像这样：

```
 <filter-mapping>
    <filter-name>StripesFilter</filter-name>
    <servlet-name>StripesDispatcher</servlet-name>
    <dispatcher>REQUEST</dispatcher>
  </filter-mapping> 
```

我刚刚补充说：

```
 <dispatcher>FORWARD</dispatcher> 
```

现在它（似乎）工作正常:-)

# java - 生成类图的工具

> ID：13944436
> 
> 赞同：3
> 
> 时间：2012-12-19T01:52:26.423
> 
> 标签：java, uml

我有许多 java 文件，并想生成显示其中方法和成员的类图。哪一个是执行此操作的最佳工具？您能否提供免费和商业工具的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:00:55.507

[BOUML](http://www.bouml.fr/index.html)可以解决问题……但要小心！它曾经是开源的，直到 5.0 版。但现在不是了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:02:25.147

[Enterprise Architect](http://www.sparxsystems.com/products/ea/index.html)是一个商业工具。

我最喜欢的曾经是 JUDE，现在是[Astah](http://astah.net/download#community)。

UML 非常没用。当我需要图表时，我通常使用[IntelliJ](http://www.jetbrains.com/idea/)从我的代码中生成它们。它有社区版和企业版。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T01:56:00.147

Eclipse的[eUML2](http://www.soyatec.com/euml2/com.soyatec.uml.doc/)插件运行良好。

# sql - sql查询删除

> ID：13944440
> 
> 赞同：2
> 
> 时间：2012-12-19T01:52:42.667
> 
> 标签：sql

```
delete  a.Employee_LastName, a.Employee_Firstname 
FROM    EMPLOYEE a JOIN DEPARTMENT b on a.Department_ID = b.Department_ID 
where b.Department_Name='Sales' 
Group by a.Employee_LastName, a.Employee_Firstname, b.Department_Name 
```

你能解释一下我做错了什么吗？错误（在 sql server 2008 中）：消息 102，级别 15，状态 1，第 1 行“，”附近的语法不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T01:58:53.280

删除用于删除整行..不清空字段（*因此不支持列名，也不支持分组*）

所以

```
DELETE EMPLOYEE
FROM   EMPLOYEE a JOIN DEPARTMENT b ON a.Department_ID = b.Department_ID 
WHERE  b.Department_Name = 'Sales' 
```

* * *

如果您想编辑记录，那么我们`UPDATE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:58:42.673

“删除”后面应该跟行，而不是单个列。你应该做：

```
delete a 
FROM    EMPLOYEE a JOIN DEPARTMENT b on a.Department_ID = b.Department_ID 
where b.Department_Name='Sales' 
Group by a.Employee_LastName, a.Employee_Firstname, b.Department_Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T01:59:38.867

您不能在删除语句中指定列。应该是`DELETE FROM <tablename>`。此外，如果要使用 Join 删除，则需要指定要从哪个表中删除。所以，像：

`DELETE FROM a FROM <tablename> a JOIN <othertable> b ON a.<col> = b.<col>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T02:01:13.837

DELETE 在行级别上工作，因此 SQL Server 抱怨您指定了列。

这是 DELETE 的语法页面：http: [//msdn.microsoft.com/en-us/library/ms189835.aspx](http://msdn.microsoft.com/en-us/library/ms189835.aspx)

如果您只是想清除这些列中的值，则应使用 UPDATE 语句： http: [//msdn.microsoft.com/en-us/library/aa260662 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa260662(v=sql.80).aspx)

如果您确实要删除基于该 JOIN 和 WHERE 子句的行，则需要编写带有子查询的 DELETE 语句来检索您想要的所有行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-27T11:50:05.040

基本语法是 delete from where 条件

from table_name 是您可以根据您的要求创建任何子查询的地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T02:06:15.400

`update`我相信您正在尝试从非列中删除值`delete`。使用如下`update`查询：

```
 update a
    set a.Employee_LastName = null,
          a.Employee_Firstname = null
    from EMPLOYEE a INNER JOIN DEPARTMENT b
    ON a.Department_ID = b.Department_ID
    where b.Department_Name='Sales' 
```

此查询将从部门中所有员工`Employee_Firstname`的`Employee_LastName` 列中删除值（设置为空）。`Sales`

# java - 未知的sqlite错误-java mac os 10.5-不满意的链接错误

> ID：13944454
> 
> 赞同：0
> 
> 时间：2012-12-19T01:54:23.750
> 
> 标签：java, sqlite

由于完全未知的原因，我最近才开始收到此错误。

自上次运行以来，代码没有更改。

有任何想法吗？

`java.lang.UnsatisfiedLinkError: /private/var/folders/l8/l8xdyr88GEO5adGKtmu9XU+++TI/-Tmp-/sqlite-3.7.2-libsqlitejdbc.jnilib: no suitable image found. Did find: /private/var/folders/l8/l8xdyr88GEO5adGKtmu9XU+++TI/-Tmp-/sqlite-3.7.2-libsqlitejdbc.jnilib: unknown required load command 0x80000022`

更新根本原因：

`java.sql.Connection conn = DriverManager.getConnection(mySQL);`

其中mysql =“jdbc：sqlite：/Users/Jason/seeking.db”

该文件 100% 存在。此连接尝试导致错误。

//////////////解决方案：

我已将我的 java（Java 的 Mac 系统首选项）首选项切换为优先加载 Java SE 6。这不适用于 SQLite jdbc 库。

这个库需要 J2SE 5.0 才能正常运行（看起来）。

希望这可以帮助其他人！

# java - 从 Android 中编码的 EditText 获取源 HTML

> ID：13944456
> 
> 赞同：6
> 
> 时间：2012-12-19T01:54:38.517
> 
> 标签：java, android, android-edittext

我在 EditText 中显示格式化文本，如下所示：

```
String msg = <b>Some text here</b>;
EditText txtMsg = (EditText) findViewById(R.id.txtMessage);
txtMsg.setText(Html.fromHtml(msg)); 
```

这在 EditText 中显示为“ **Some text here** ”。然后，稍后，我想从该 EditText 中提取带有标签的文本。但是，当我使用：

```
txtMsg.getText().toString(); 
```

它只是给了我“这里有一些文字”，没有格式。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T02:00:41.770

尝试从 EditText 中获取具有 HTML 格式的文本：

```
String msgtext=Html.toHtml(txtMsg.getText()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-22T02:59:25.857

Html.toHtml 在 Java 和 Android N 中已弃用

你最好用

```
HtmlCompat.toHtml(
                        txtMsg.text,
                        HtmlCompat.TO_HTML_PARAGRAPH_LINES_INDIVIDUAL
                    ) 
```

有关更多信息[https://developer.android.com/reference/androidx/core/text/HtmlCompat.html](https://developer.android.com/reference/androidx/core/text/HtmlCompat.html)？

# java - 如何在查询中发送带有“/”的 GET 请求

> ID：13944458
> 
> 赞同：2
> 
> 时间：2012-12-19T01:54:51.133
> 
> 标签：java, web-services, rest, get

我正在尝试编写一个测试程序来测试我的网络服务。我正在通过 GET 方法向我的 Web 服务发送一个 JSON 对象，但它不起作用。我的测试网址如下所示：

```
http://testserver:8080/mydir/{"filename":"test.jpg", "Path":"test/2/2"} 
```

我认为路径中的“/”会给我带来问题，因为一旦我删除它们，程序就可以正常工作。

每个[REST 如何将包含“/”的值作为 URI 中的路径参数传递？](https://stackoverflow.com/questions/12350768/rest-how-to-pass-values-containing-as-path-parameter-in-the-uri)，我尝试使用 java.net.URLEncoder.encode 但这没有帮助。这是我的测试程序的片段：

```
// some code from main method
<snip snip>
String url = "http://testserver:8080/mydir/";
String JSON = "{\"filename\":\"test.jpg\",\"Path\":\"test/2/2\"}";
String enc_JSON = URLEncoder.encode(JSON,"UTF-8");
String testGet = url + enc_JSON;
String out2 = TestCode.httpGet(testGet);
<snip snip>

// code from httpGet method
public static String httpGet(String serverURL) {
  URL url;
  HttpURLConnection conn;

  try {
      url = new URL (serverURL);
      conn = (HttpURLConnection) url.openConnection();
      conn.setRequestMethod("GET");
      conn.setUseCaches(false);
      conn.setDoInput(true);
      conn.setDoOutput(true);
      conn.connect();
// failing at line below
      InputStream input = conn.getInputStream();
<snip snip> 
```

我的程序的结果是我得到一个 HTTP 响应代码：400。我是否忘记在 httpGet() 方法中的代码中添加一些导致它失败的内容，或者我是否因为 JSON 对象而在我的 URL 中做了一些非法的事情最后在路径位置加上“/”？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T02:05:42.487

对于 REST API，JSON 对象通常在请求正文中发送 (POST) 或返回。它们通常不被编码为 URL 的一部分。

对于 GET 请求，您可以将信息作为 url 中的段或查询字符串参数传递。

作为 url 中的段：

```
/resourcetype/{path}/{filename}
http://testserver:8080/resourcetype/test/2/2/test.jpg 
```

作为查询字符串参数：

```
/resourcetype?path={path}&file={filename}
http://testserver:8080/resourcetype?path=test/2/2&filename=test.jpg 
```

# java - 继承和泛型

> ID：13944465
> 
> 赞同：5
> 
> 时间：2012-12-19T01:56:05.093
> 
> 标签：java, generics, inheritance

我有一个应用程序可以对节点和边 G(N,E) 的图执行各种分析算法。节点和边的属性因应用程序而异，并根据图的类型和属性的性质形成继承层次结构。例如，节点层次结构的根可以表示最一般的无向循环图（NcgNode）。NcgNode 的一个子类可能代表有向循环图（DcgNode），其次是 DagNode 等。可应用于 DAG 的算法与 NCG 的算法不同，但反之亦然。树根的一个关键行为是添加和检索图的相邻节点。问题是如何在不创建“未经检查”的异常的情况下做到这一点？

代码的简洁版本可能如下所示：

```
import java.util.ArrayList;
import java.util.List;

public class NcgNode {
    private List<NcgNode> nodeList_ = null;
    private List<? extends NcgNode> nodeListSrc_ = null;
    private List<? super NcgNode> nodeListSink_ = null;

    public <N extends NcgNode> void addNode(N node) {
        if (nodeList_ == null) {
            nodeList_ = new ArrayList<NcgNode>();
            nodeListSrc_ = nodeList_;
            nodeListSink_ = nodeList_;
        }
        nodeListSink_.add(node);
    }

    @SuppressWarnings("unchecked")
    // Any way to avoid this?
    public <N extends NcgNode> N getNode(int n) {
        if ((nodeList_ == null) || (n >= nodeList_.size()))
            return null;
        // causes unchecked warning:
        return (N) nodeListSrc_.get(n);
    }
}

class DcgNode extends NcgNode {
    // enables DCG algorithms, etc
}

class DagNode extends DcgNode {
    // enables DAG algorithms, etc.
} 
```

有没有更好的方法来设计这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:22:29.073

只需让您的列表具有 NcgNode 类型，例如

```
private List<NcgNode> nodeListSrc_ = null; 
```

您仍然可以将 NcgNode 的子类放入这些列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:31:15.940

您应该执行以下操作。将方法定义在抽象类 ( `NcgNode`) 中，根据子类的类型进行参数化。因此，`addNode`并且`getNode`可以很容易地编写。然后，您将拥有特定的实现（我使用`DcgNode`and `DagNode`；不确定这是否是您想要的）成为 this 的子类，对其自身进行参数化。这允许您稍后（见下文）算法要求节点的子节点与节点的类型相同。

```
public abstract class NcgNode<N> {
    private List<N> nodeList_ = null;

    public void addNode(N node) {
        if (nodeList_ == null) {
            nodeList_ = new ArrayList<N>();
        }
        nodeList_.add(node);
    }

    // Any way to avoid this?
    public N getNode(int n) {
        if ((nodeList_ == null) || (n >= nodeList_.size()))
            return null;
        return nodeList_.get(n);
    }
}

class DcgNode extends NcgNode<DcgNode> {
    // enables DCG algorithms, etc
}

class DagNode extends NcgNode<DagNode> {
    // enables DAG algorithms, etc.
}

//...
static <N extends NcgNode<N>> void someAlgorithm(N node) { } 
```

`DagNode`您成为的子类的想法`DcgNode`是不安全的，因为如果`DagNode`"is-a" `DcgNode`，那么这意味着您可以将任何`DcgNode`作为它的子类放入其中，这不是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T01:59:45.680

如下修改您的方法：

```
public NcgNode getNode(int n) {
  if ((nodeList_ == null) || (n >= nodeList_.size())) {
  return null;
}

return (NcgNode) nodeListSrc_.get(n);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T02:12:32.293

查看“自界类型”。（编辑：不确定我是否理解这里的反对票）

您的根类应该是抽象的，并且实际的节点类型`N`应该是该类的类型参数，如

```
public abstract class AbstractNode< N extends AbstractNode< N > > {
    private List< N > nodeList_ = null;

    public synchronized void addNode( N node ) {
        if ( nodeList_ == null )
            nodeList_ = new ArrayList< N >();
        nodeList_.add(node);
    }

    public N getNode( int n ) {
        if ( nodeList_ == null || n >= nodeList_.size() )
            throw new NoSuchElementException();
        return nodeList_.get( n );
    }
} 
```

然后具体的子类可以提供它们自己的类型作为 N。对于深度继承层次结构，使用另一个抽象类保持“我的类型”。

```
class NcgNode extends AbstractNode< NcgNode > {
}

abstract class AbstractDcgNode< N extends AbstractDcgNode< N > > extends AbstractNode< N > {
    // enables DCG algorithms, etc
}

class DcgNode extends AbstractDcgNode< DcgNode > {
}

class DagNode extends AbstractDcgNode< DagNode > {
    // enables DAG algorithms, etc
} 
```

# mysql - 不使用子查询重写查询

> ID：13944466
> 
> 赞同：0
> 
> 时间：2012-12-19T01:56:12.597
> 
> 标签：mysql, count

所以我正在优化 SQL 查询。我已经清理了很多，但仍有一些工作要做。请参阅下面的查询：

比赛tbl：ID，fb_share_points，tw_share_points

comp_mapper tbl：id、referrer_user_id、user_subscription_id、has_fb_shared、has_tw_shared、competition_id

```
SELECT 
    IF (cm.has_fb_shared = 1, IFNULL(c.fb_share_points,0), 0) 
    + IF (cm.has_tw_shared = 1, IFNULL(c.tw_share_points,0), 0) 
    + (SELECT count(*) FROM comp_mapper as cm2
        WHERE cm2.comp_id = cm.comp_id 
        AND cm2.referrer_user_id = us.user_id)
    as shares
FROM competitions AS c
JOIN comp_mapper as cm ON cm.competition_id = c.id
JOIN user_subscription as us on cm.user_subscription_id = us.id
WHERE c.id = :id
ORDER BY shares DESC
LIMIT :limit 
```

当一个用户被推荐时，推荐用户的 ID 被放置到参赛者的referrer_user_id 列中。子查询计算有多少参赛者推荐了其他用户。我目前正在尝试找到另一种在没有子查询的情况下编写它的方法，因为查询本身需要很长时间才能运行。如果有人有任何建议或建议，请分享！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:14:53.633

这应该返回一个等效的结果。这里的区别在于，我们有一个内联视图（MySQL 将其称为*派生表*），而不是相关子查询，它的别名为`rf`.

```
SELECT IF(cm.has_fb_shared = 1, IFNULL(c.fb_share_points,0), 0) 
     + IF(cm.has_tw_shared = 1, IFNULL(c.tw_share_points,0), 0) 
     + IFNULL(rf.ref_count,0) AS shares
  FROM competitions c
  JOIN comp_mapper cm 
    ON cm.competition_id = c.id
  JOIN user_subscription us
    ON us.id = cm.user_subscription_id
  LEFT
  JOIN (  
         SELECT cm2.referrer_user_id 
              , COUNT(1) AS ref_count
           FROM comp_mapper cm2
          WHERE cm2.comp_id = :id
          GROUP BY cm2.referrer_user_id
       ) rf
    ON rf.referrer_user_id = us.user_id
 WHERE c.id = :id
 ORDER BY shares DESC
 LIMIT :limit 
```

* * *

让我感到有点奇怪的是，查询返回的一组行只有一个列 ( `shares`)，没有其他列。如果意图是返回单个值，则选择列表中需要有一个聚合函数（即`SUM()`）。

# php - PHP SQL ON DUPLICATE KEY 没有影响

> ID：13944468
> 
> 赞同：1
> 
> 时间：2012-12-19T01:56:16.997
> 
> 标签：php, mysql, sql

如果没有“名称”和“电子邮件”同时存在的条目，我只想插入。

因此，如果“名称”存在于不同的电子邮件中，反之亦然。

```
mysql_query("INSERT INTO 
             list (name,email) 
             VALUES ('$name','$email') 
             ON DUPLICATE KEY 
             UPDATE name='$name',email='$email'"); 
```

我已经创建了 name 和 email 主键，但是 ON DUPLICATE 语句没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:00:37.210

如果 name 和 email 是您的组合唯一键，则如果数据集已存在，则触发更新语句（使用完全相同的值覆盖）是没有意义的。在这种情况下，我真的只会插入然后检查数据库是否以违反键约束的方式响应。这是随后被忽略的预期错误。其他任何事情仍然是错误。

我不会用这个 NO-OP 更新来保持沉默。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T01:57:21.457

您需要有一个复合唯一键才能`ON DUPLICATE KEY UPDATE`工作：

```
CREATE UNIQUE INDEX name_email ON list (name, email); 
```

这就是为什么它叫`ON DUPLICATE **KEY** UPDATE`

# jquery - 通过数据表中 td 内的 span 标签过滤 html

> ID：13944472
> 
> 赞同：2
> 
> 时间：2012-12-19T01:56:36.967
> 
> 标签：jquery, datatables

我有一个外部下拉表单，其中包含正确和不正确的值，只要选择不正确，ajax 帖子就会运行，并会在 td 内为不正确的值生成一个跨度。我需要的是数据表应该通过检查 td 中的 span 来过滤掉不正确的数据。

HTML：

```
<select id="filter">
 <option value="correct">Correct</option>
 <option value="incorrect">Incorrect</option>
</select>

//Data Tables
<table id="data">
   <thead>
      <tr>Word</tr>
   </thead>
   <tbody>
      <tr><td>Cat</td></tr>
      <tr><td>Dog</td></tr>
      <tr><td><span="wrong-spelling">Dogr<td></tr>
   </tbody>
</table> 
```

JS：

```
$(document).ready(function(){
   var dtTable = $('#data').dataTable( {
    "sDom": '<"H"lr>t<"F"ip>',
    "bSort": false,
    "bAutoWidth": false,
    "iDisplayStart": 0,
    "iDisplayLength": 25,
    "bProcessing": true,
    "sPaginationType": "full_numbers",
    "bJQueryUI": true,
            "aoColumns": [
                     {"sType": "string"},
         {"sType": "string"},
                     {"sType": "string"}
        ]       
});      

  $("#filter").change(function(){
     //Ajax Post request to check spelling and will insert span on misspelled words
     dtTable.fnFilter('span');
  });
}); 
```

On #filter change, when incorrect is chosen it should only filter rows with span class wrong-spelling

# c# - 利用带有自定义可枚举扩展的 PLINQ

> ID：13944473
> 
> 赞同：7
> 
> 时间：2012-12-19T01:56:41.877
> 
> 标签：c#, linq, plinq

许多自定义 Enumerable 扩展可以根据其他内置操作来实现 - 例如这个简单的方便方法：

```
public static bool AnyOf<TElement>(this TElement item, IEnumerable<TElement> items)
{
    return items.Any(a => EqualityComparer<TElement>.Default.Equals(a, item));
} 
```

现在这将强制任何 PLINQ 查询返回到顺序操作，即使 PLINQ 也有 Any - 并且仅与签名更改等效：

```
public static bool AnyOf<T>(this T item, ParallelQuery<T> items)
{
    return items.Any(a => EqualityComparer<T>.Default.Equals(a, item));
} 
```

但是像这样复制它对我来说似乎很乱。

起初我认为像下面这样的东西可能会起作用，但它当然不会，因为扩展方法是静态方法，因此调用`Enumerable.Any`而不是调用的决定`ParallelQuery.Any`是在编译时根据签名做出的。

```
public static bool AnyOf<TElement, TEnumerable>(this TElement item, TEnumerable items)
    where TEnumerable : class, IEnumerable<TElement>
{
    return items.Any(a => EqualityComparer<TElement>.Default.Equals(a, item));
} 
```

我得出的结论是，如果不创建具有不同签名的每种方法的副本，这是不可能的，但也许我错过了一些东西。（总是遇到不可能的问题！）

* * *

也许可以从并行化（显然可以被链接等）中受益的助手的一个更好的例子是这样的。

```
public static IEnumerable<string> ToStrings(this IEnumerable<object> ienum)
{
    return ienum.Select(a=> a.ToString());
} 
```

* * *

^ 编译器错误：

```
 The type 'ParallelQuery<TElement>' cannot be used as type parameter
 'TEnumerable' in the generic type or method
 'AnyOf<TElement,TEnumerable>(TElement, TEnumerable)'. There is no
 implicit reference conversion from 'ParallelQuery<TElement>' to
 'IEnumerable<TElement>' 
```

* * *

同样值得考虑的是，并非所有的 ParallelQuery/Enumerable 方法都是等效的，即使它们可以编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:54:19.037

您可以通过在方法中使用检查转换（即运行时切换）来做到这一点，如下所示：

```
public static bool AnyOf<TElement>(this TElement item, IEnumerable<TElement> items)
{
    var parallelItems = items as ParallelQuery<TElement>
    if(parallelItems != null)
    {
         return parallelItems.Any(a => EqualityComparer<TElement>.Default.Equals(a, item))
    }
    //other runtime checks
    ....
    //else return default IEnumerable implementation
    return items.Any(a => EqualityComparer<TElement>.Default.Equals(a, item));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:53:51.480

I have done similar for writing IQueryable/IEnumerable extensions. Trying to factor out the common bits involved declaring static variable holding an Expression, and then referencing that expression from the two different versions of the function. I don't have the code anymore, and when I was done, it was very ugly and I wasn't satisfied with it. Here is a trivial example.

```
Expression<Func<PersonHistory, bool>> IsCurrent = (p) => p.Ends > DateTime.Now && p.Starts <= DateTime.Now;

//Then in each Extension method:
var query = db.PersonHistories.Where(IsCurrent); 
```

Ultimately the level of de-duplication was not good at all, and would be made more complicated by generic parameters. Maybe this will give you an idea though.

Looking forward to seeing others ideas.

# objective-c - CoreGraphics - CGImage：获取特定像素的颜色

> ID：13944477
> 
> 赞同：1
> 
> 时间：2012-12-19T01:57:05.343
> 
> 标签：objective-c, core-graphics, cgcontext, cgimage

我尝试计算图像的黑白部分的百分比。但是，我得到的结果不是逻辑。看一看：

```
unsigned char *data = CGBitmapContextGetData(contextMask);
int offset = 0;

if (data == NULL)
{
    return 0.0;
}

float sum = 0.0;

for (int x = 0; x < CGImageGetWidth(scratchImage); x++)
{
    for (int y = 0; y < CGImageGetHeight(scratchImage); y++)
    {
        NSLog(@"Offset %d,%d: %hhu", x, y, data[offset+1]);
        if (data[offset+1] == 0)
        {
           sum = sum + 1;
        }

        offset += 4;
    }
} 
```

图像只有黑白，有时我有一个介于 0 和 255 之间的数字。你有什么想法吗？太感谢了。

这`CGImage`是创建的方式：

```
CFMutableDataRef pixels = CFDataCreateMutable(NULL, imageWidth * imageHeight);
contextMask = CGBitmapContextCreate(CFDataGetMutableBytePtr(pixels),
         imageWidth, imageHeight, 8, imageWidth, colorspace, kCGImageAlphaNone);

CGDataProviderRef dataProvider = CGDataProviderCreateWithCFData(pixels);

CGContextSetFillColorWithColor(contextMask, [UIColor blackColor].CGColor);
CGContextFillRect(contextMask, self.frame);

CGContextSetStrokeColorWithColor(contextMask, [UIColor whiteColor].CGColor);
CGContextSetLineWidth(contextMask, _sizeBrush);
CGContextSetLineCap(contextMask, kCGLineCapRound);

CGImageRef mask = CGImageMaskCreate(imageWidth, imageHeight, 8, 8, imageWidth,
                                                       dataProvider, nil, NO);
scratchImage = CGImageCreateWithMask(hideImage, mask); 
```

# asp.net - Attributes.add 和 onmouseover

> ID：13944478
> 
> 赞同：0
> 
> 时间：2012-12-19T01:57:15.747
> 
> 标签：asp.net, vb.net, attributes, onmouseover, flyout

我有一个数据绑定网格视图，用于显示我从服务器获取的图片。当我将鼠标悬停在放大图像的图像之一上时，我试图将其设置为创建弹出窗口。我在将属性添加到数据绑定行时遇到了问题。我目前有代码

```
e.Row.Cells(2).Attributes.Add("onmouseover", "flyoutimg.ImageUrl=""" + imgstr + """;") 
```

但是，这行代码导致我遇到一个问题，即 imgstr（其中包含服务器上图像的 url）没有传递到页面的 javascript/aspx 中。当我启动页面时，我可以尝试将鼠标悬停在某些东西上，但它根本不起作用。

我试图将 flyout.ImageUrl 放在它自己的字符串中并将其传递给属性，但这也不起作用。我能找到的唯一研究是从两年前开始的，指出 Attributes.Add 编码的撇号而不是引号。

有什么建议么？

```
imgstr = dsMyName.Tables(0).Rows(0).Item("Photo").ToString 
```

我从服务器中提取 imgstr 并执行 .ToString ，我认为这是多余的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:11:14.120

用单引号试试，如：

```
e.Row.Cells(2).Attributes.Add("onmouseover", "flyoutimg.ImageUrl='" + imgstr + "';") 
```

这是因为我认为 .NET 所做的就是渲染：

```
onmouseover="flyoutimg.ImageUrl='XYZ'" 
```

如果你有双引号，它会因为认为它位于属性的末尾而变得一团糟，并可能截断值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:14:20.543

你的意思是有双引号？

尝试这个：

```
e.Row.Cells(2).Attributes.Add("onmouseover", "flyoutimg.ImageUrl='" + imgstr + " ';") 
```

请注意，我使用了一个合法的 HTML 单引号。

或尝试逃避它：

```
e.Row.Cells(2).Attributes.Add("onmouseover", "flyoutimg.ImageUrl=\"" + imgstr + "\";") 
```

# c++ - 在 C++ 中比较两个 ISO 8601

> ID：13944479
> 
> 赞同：2
> 
> 时间：2012-12-19T01:57:16.307
> 
> 标签：c++, c++11

我想纠正一个比较两个 ISO 6801 时间戳并返回最新时间戳的函数。我无法找到创建函数的简单方法

例如给定`string s1 = 2012-10-10 09:42:00;` 和`string s2 = 2012-10-10 09:52:00;`

compare_timestamp(s1,s2) 将返回 s2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T02:13:56.957

如果您只需要查找最新的，则字符串比较就足够了。

```
string &compare_timestamp(string &s1, string &s2) {
    return s1.compare(s2) > 0 ? s1 : s2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T04:20:05.873

```
std::string & compare_timestamp(std::string & lhs, std::string & rhs) {
    return std::max(lhs, rhs);
}
std::string const & compare_timestamp(std::string const & lhs, std::string const & rhs) {
    return std::max(lhs, rhs);
} 
```

现在，一个更好的解决方案是创建一个`TimeStamp`类而不是`std::string`直接使用一个类。可以在`TimeStamp`内部保持 a`std::string`和重载`operator<`以仅推迟到`std::string::operator<`，但您将使用[强类型](https://stackoverflow.com/questions/2963019/how-to-learn-proper-c/11926698#11926698)

# iphone - 为 IOS 编译 ffmpeg（R_ABS reloc 错误）

> ID：13944482
> 
> 赞同：0
> 
> 时间：2012-12-19T01:57:23.327
> 
> 标签：iphone, ios, compiler-construction, linker, ffmpeg

我一直在尝试为 IOS 编译 ffmpeg 库。如果我使用--disable-asm，我可以让它工作，但为了性能，我想在启用它们的情况下构建。

这是我使用过的许多配置命令之一。

`./configure --prefix=armv7 --disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver --enable-avresample --enable-cross-compile --sysroot="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk" --target-os=darwin --cc="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc" --extra-cflags="-arch armv7 -miphoneos-version-min=5.0" --extra-ldflags="-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -miphoneos-version-min=6.0" --arch=arm --cpu=cortex-a9 --disable-everything --enable-pic --enable-static --disable-shared`

它编译得很好，但是当我尝试在我的项目中链接它时，我得到：

ld：在 /ffmpeg/libavcodec/libavcodec.a(simple_idct_armv5te.o) 中，在 _TEXT *、* _text reloc 0 节中：R_ABS reloc 但在架构 armv7 的目标地址处没有绝对符号

我错过了一些关键选项吗？我试过使用 1.0 版本和最新的 git 版本的 ffmpeg。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:43:04.483

我遇到了同样的问题。我的解决方案是切换到更新的 gas-preprocessor.pl，可以在这里找到：[https ://github.com/mansr/gas-preprocessor](https://github.com/mansr/gas-preprocessor)

只需安装它来代替您当前使用的旧版本。

# c# - 在 Metro 中，FolderInformation 和 StorageFolder 有什么区别

> ID：13944488
> 
> 赞同：2
> 
> 时间：2012-12-19T01:58:02.727
> 
> 标签：c#, .net, mvvm, microsoft-metro, windows-runtime

`FolderInformation`的方法/属性与 's 几乎相同`StorageFolder`。我不知道为什么 WinRT api`FolderInformation`也提供`StorageFolder`。如果我将创建的列表分配`FileInformationFactory.GetFoldersAsync()`给一个`ItemsControl`，它与创建的列表有什么不同`StorageFolder.CreateFolderAsync()`吗？该文件说`FolderInformation`提供同步访问，但我不知道问题何时会发生。

我发现的一个缺点`FolderInformation`是它只能从`FileInformationFactory`. 所以我认为不可能`FolderInformation`为`KnownFolders.PicturesLibrary`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:31:37.947

FolderInformation 允许您对文件夹本身进行操作（如移动、删除、重命名等） [http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.bulkaccess.folderinformation。 aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.bulkaccess.folderinformation.aspx)

而 StorageFolder 允许您对文件夹的内容进行操作（如在文件夹中创建新文件、在文件夹中创建新子文件夹、从文件夹中获取所有文件等） [http://msdn.microsoft。 com/en-us/library/windows/apps/windows.storage.storagefolder.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefolder.aspx)

# css - CSS：选择一个元素及其所有后代元素

> ID：13944489
> 
> 赞同：3
> 
> 时间：2012-12-19T01:58:11.860
> 
> 标签：css, css-selectors, descendant

选择一个元素*及其*所有后代元素：

```
.media, .media * {color: #f00;} 
```

我只能使用一个选择器而不是用逗号分隔的两个选择器吗？我正在寻找一种更有效的方式来输入这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T02:03:59.823

使用[XPath](https://www.w3schools.com/xml/xpath_intro.asp)，您拥有`descendant-or-self` [轴](https://www.w3schools.com/xml/xpath_axes.asp)

但是 CSS 中没有这样的选择器。

# objective-c - 在 UITableView 中相互显示 UIButton

> ID：13944490
> 
> 赞同：0
> 
> 时间：2012-12-19T01:58:38.090
> 
> 标签：objective-c, uitableview

我想仅在 indexPath.row 的 UITableView 中显示 UIButton。

但是，UIButton 出现在所有单元格中。

```
if (indexPath.row % 2 == 0) {
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(160, 140, 80, 40);
    [button setTitle:@"button" forState:UIControlStateNormal];
    [cell addSubview:button];
} 
```

我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:48:20.547

**首先确定单元格的高度是多少：**

由于按钮的高度，您可能会遇到问题。它应该大于或等于按钮的高度。另外用这个替换你的代码。

```
if (indexPath.row % 2 == 0) {
        UIButton *button = [[UIButton alloc]initWithFrame:CGRectMake(160, 4, 80, 40)];
        [button setTitle:@"BtnName" forState:UIControlStateNormal];
        [cell.contentView addSubview:button];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:21:24.043

您的代码是正确的，但您在其中犯了一个非常小的错误。您正在尝试在 上添加按钮，`cell`而不是这样做，尝试在 上添加按钮，`contentView`如下`cell`所示。

```
[cell.contentView addSubview:button]; 
```

# c++ - “新类名* []”是什么意思？

> ID：13944492
> 
> 赞同：0
> 
> 时间：2012-12-19T01:58:39.067
> 
> 标签：c++, arrays, pointers

我有一堂课：

```
class WorkerThread
{
public:
    unsigned virtual run()
    {
        return 0;
    }
}; 
```

在标题中定义。现在在另一个类中，我创建了一个这种类型的对象：

```
WorkerThread **workerQueue; 
```

这实际上是一个指向指针的指针......好吧，到目前为止一切都很好。
现在，我应该如何阅读：

```
workerQueue = new WorkerThread*[maxThreads]; 
```

`*`ClassName( `WorkerThread`)后面的和数组格式是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T01:59:53.750

`WorkerThread`这是一个指针数组的分配。

例如：

```
size_t maxThreads = 3;
WorkerThread** workerQueue = new WorkerThread*[maxThreads]; 
```

`workerQueue[0]`是`WorkerThread*`,`WorkerThread[1]`和一样`WorkerThread[2]`。

这些指针，目前还没有被初始化。

稍后您可能会看到如下内容：

```
for(size_t x = 0; x < maxThreads; ++x)
{
   workerQueue[x] = new WorkerThread(...);

   //beginthreadex_, CreateThread, something....
} 
```

我会告诉你，除非小心处理，否则所有这些原始指针都只是等待发生的内存泄漏。首选方法是使用对象的`std::vector`某个智能指针`WorkerThread`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T02:30:12.603

也许这会让它更清楚地理解：

```
typedef WorkerThread* PointerToWorkerThread;

PointerToWorkerThread *workerQueue;

workerQueue = new PointerToWorkerThread[maxThreads]; 
```

# jquery - jQuery过滤结果灰色未使用的字母AZ

> ID：13944495
> 
> 赞同：3
> 
> 时间：2012-12-19T01:58:55.763
> 
> 标签：jquery, filter

如果我从一个包含 10 个名称的 mySQL 数据库中获得一个记录集，我可以使用 jquery 按首字母过滤它们。但是，如果我在页面上为字母表中的每个字母都有一个链接，并且想将那些没有任何“结果”的链接灰显，我该怎么做？

这是我目前过滤结果的方式：

```
$(document).ready(function() {
    function filterResults(letter){
        $('p').hide();
        $('p').filter(function() {
            return $(this).text().charAt(0).toUpperCase() === letter;
        }).show();
    };
    filterResults('A');
    $('a').on('click',function(){
        var letter = $(this).html();            
        filterResults(letter);        
    });
}); 
```

示例的小提琴在这里：http: [//jsfiddle.net/livinzlife/8UE6m/](http://jsfiddle.net/livinzlife/8UE6m/)

我想要的是所有下落不明的字母都是灰色的。我不知道如何选择那些下落不明的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:20:52.900

你可以使用这样的方法

```
function showSupported(){
    // get the first letter of each p element in an array
    var supported = $('p').hide().map(function() {
        return $(this).text().charAt(0).toUpperCase();
    }).get(); 

    // make array unique;
    supported = $.grep(supported, function(v, k) {
        return $.inArray(v, supported) === k;
    });

    // find all a elements whose letter is not in the supported array
    $('a').filter(function(){
        return $.inArray($(this).text(), supported) === -1;
    }).addClass('grey'); // adding a class that makes them grey or whatever..
} 
```

演示在[http://jsfiddle.net/gaby/8UE6m/1/](http://jsfiddle.net/gaby/8UE6m/1/)

（*它不处理`0-9`数字场景，但你应该能够处理它*）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T02:21:01.630

```
var $p = $('p');
$('a').addClass(function(){
    var a = this.textContent;
    return $p.filter(function(){
       return this.textContent.charAt(0) === a
    }).length ? 'green' : 'grey';
}); 
```

[http://jsfiddle.net/zLxKU/](http://jsfiddle.net/zLxKU/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T02:19:14.423

一种快速（不是最有效）的方式，就像......

```
var letters = "";
//Change the selector below to be more specific
//Go through <p>'s and get first letter
$('p').each(function() { 
var aText = $(this).text().toUpperCase();
  //Guard against empty
  letters += aText ? aText.substring(0,1) : '';
});
//Loop through the A's
$('a').each(function() {
  if(letters.indexOf($(this).text().toUpperCase()) < 1) {
     //One way is to replace the anchor tag with a span, which can't be clicked
     $(this).replaceWith('<span style="color:grey;">' + $(this).text() + '</span>');
  }
}); 
```

不确定那里的代码段中是否有任何错误，因为我只是把它敲出来了。希望你明白这一点。抓取每个段落标签的第一个字母并放入一个字符串中。循环遍历每个锚标记，获取文本，并查看它是否出现在我们创建的字符串中。如果不是，请将其替换为跨度，这样用户就无法单击它并将其涂成灰色。如果您真的只希望锚标记为灰色，请更改上述内容并为其应用一个类或其他内容（即：）`$('a').addClass(...)`。

或许值得注意的是，那里有 JavaScript/LINQ 脚本（即执行“不包含”或“where”子句），但使用它们可能会导致性能损失。

# php - PHP mysqli_fetch_assoc 将数据存储在数组中

> ID：13944499
> 
> 赞同：2
> 
> 时间：2012-12-19T01:59:36.367
> 
> 标签：php, mysql, arrays, simple-html-dom

我的数据库中有一个 url（链接）列表，可以将数据很好地回显到页面，但不是输出它，我需要将该信息（我在想一个数组）存储到一个变量中，以使用提供的执行 php 任务链接。我还没有弄清楚如何做到这一点。

**代码已经更新**，我删除了任何关于使用即将被弃用的 mysql_* 函数的引用，并选择了 mysqli 版本。

**这是我的代码**

```
$query = "SELECT `Link` FROM `Table1` WHERE `Image` ='' AND `Source`='blah'";

if ($result = mysqli_query($dblink, $query)) {

while ($row = mysqli_fetch_assoc($result)) {  
    $link = $row['Link'];
    // echo ''.$link.'<br>';
        $html = file_get_html($link);
        foreach ($html->find('div.article') as $e) {
            $result = $e->find('img', 0);
            $imgsrc = $result->src . '<br>';
            echo $imgsrc;
        }
    }
} 
```

**此代码正在执行一次迭代：**它将找到存储在 DB 中的第一个链接，`$link`在底部`foreach()`语句中使用它并输出所需的结果。在循环的第一次迭代之后，出现错误，说明：

**“mysqli_fetch_assoc() 期望参数 1 是 mysql 结果”**

我想我理解为什么会出现问题 - 由于 $result 在 while 循环之外声明，因此在第一次迭代/或以某种方式更改后永远不会再次设置它。

或者

我应该使用`mysqli_free_result()`可能，如果是这种情况，我不确定它会在代码中的位置。

**谢谢你尽你所能的帮助！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:15:12.847

当你这样做时：

```
$result = mysqli_query($dblink, $query); 
```

这些函数返回您存储在 中的链接标识符`$result`。我们需要将此标识符传递给 fetch 函数，以便能够显示从哪个结果中获取。在您完成获取所需的所有结果之前，不应更改它。

这是第一次正确：

```
$row = mysqli_fetch_assoc($result) 
```

但是，在 foreach 中，您使用其他信息覆盖该变量：

```
$result = $e->find('img', 0); 
```

因此，当下一次迭代到来时，它不再是一个有效的结果标识符，所以 MySQL 不知道如何处理它。

修复实际上相当简单，您需要更改您在 foreach 中使用的变量的名称：

```
$result = $e->find('img', 0);
$imgsrc = $result->src . '<br>'; 
```

变成：

```
$found= $e->find('img', 0);
$imgsrc = $found->src . '<br>'; 
```

瞧，它应该工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:14:17.783

您的代码段充满了潜在的错误：

**1) 不检查查询是否成功**

```
$query_run = mysql_query($query) 
```

`$query_run`您执行查询，但您永远不会通过验证是否是实际资源而不是 FALSE来检查您的查询是否成功。

**2) 验证返回的行**

您对查询返回的行数的验证是无用的：

```
if (mysql_num_rows($query_run)==NULL) { 
    echo 'No results found.';
} 
```

这绝不是真的，因为它`mysql_num_rows()`返回一个整数或 FALSE，绝不是 NULL。

**3) 使用具有潜在无效值的变量**

使用

```
while ($query_row = mysql_fetch_assoc($query_run)) { ... } 
```

是有风险的，因为您从不检查是否`$query_run`是实际资源，而`mysql_fetch_assoc()`.

**4）对while循环的误解**

以下几行也可能是错误的：

```
while ($query_row = mysql_fetch_assoc($query_run)) {
    $link = $query_row['Link'];
    // echo ''.$link.'<br>';

}
$html = file_get_html($link); 
```

您遍历查询返回的所有行。while 循环退出后，$link 只包含最后一行的值，因为单个变量不能包含多行的值。

**结论**

我强烈建议您改进错误检查并提高代码的整体质量。还可以考虑使用较新的扩展之一，如 mysqli 或 PDO，不推荐使用 mysql 扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T02:29:07.817

您应该重新访问[PHP 语言参考](http://php.net/manual/en/langref.php)。

`foreach`循环语法是

```
foreach($array as $element) 
```

或者

```
foreach($array as $key=>$value) 
```

但是您似乎还有其他弱点，我担心不在 Stackoverflow 的范围内修补。例如，您自己的代码只需将`}`第 11 行中的一个代码向下移动几行即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T02:13:55.453

如果要将所有链接添加到数组，请尝试以下操作：

```
$link[] = $query_row['Link']; 
```

代替：

```
$link = $query_row['Link']; 
```

您很接近，但您没有使用方括号，而是使用括号，如下所示：

```
$link = $query_row($link); 
```

另外，尝试去掉`$query_run`if 语句。它应该看起来像这样：

```
$query = "SELECT `Link` FROM `Table1` WHERE `Value1` ='' AND `Source`='blah'";
$query_run = mysql_query($query);
if ($query_run) {
    echo 'Query Success!<br><br>';
    if (mysql_num_rows($query_run) == NULL) {
        echo 'No results found.';
    }
    while ($query_row = mysql_fetch_assoc($query_run)) {
        $link[] = $query_row['Link'];
        // echo ''.$link.'<br>';

    }
    $html = file_get_html($link);
    foreach ($html->find('div.article') as $e) {
        $result = $e->find('img', 0);
        $imgsrc = $result->src . '<br>';
        echo $imgsrc;
    }
} 
```

# vba - 将 Outlook AppointmentItem 设为只读

> ID：13944506
> 
> 赞同：0
> 
> 时间：2012-12-19T02:00:06.463
> 
> 标签：vba, ms-access, outlook, exchange-server

我正在使用 MS Access 和 Outlook 对象模型中的 VBA 以编程方式创建 Outlook 约会项目（尽管语言无关紧要）。

项目被添加到属于单个用户的多个日历，其他用户被授予读/写权限。用户没有理由使用 Outlook 在日历上创建或编辑约会。然后约会数据存储在后端表中。从本质上讲，Outlook 被用作我的“日历视图”。

但是，我遇到了重大问题，用户直接在 Outlook 中更改约会项目，而这些约会项目又不会在我的后端更新。

我想要一个可更新的“ReadOnly”属性，它可以为每个约会项目设置，并且除非设置回 False，否则不允许更改……但不认为存在。有什么建议么？

我作为解决方案尝试或拒绝的事情：

*   提醒用户注意规则。
*   查找所有不匹配项的脚本 - 这可行但不实用。
*   不允许编辑的自定义 Outlook 表单 - 不会阻止用户拖动约会。

更新：使用下面 nemmy 的建议，我已经做到了这一点。这仅适用于用户在更改任何内容之前选择约会。如果在同一次单击中选择并拖动约会，则它不起作用。

```
Private WithEvents objExplorer As Outlook.Explorer
Private WithEvents appt As Outlook.AppointmentItem

Public Sub Application_Startup()
Set objExplorer = Application.ActiveExplorer
End Sub

Private Sub objExplorer_SelectionChange()
 If objExplorer.CurrentFolder.DefaultItemType = olAppointmentItem Then
    If objExplorer.Selection.Count > 0 Then
      Set appt = objExplorer.Selection(1)
    End If
  End If
End Sub

Private Sub appt_Write(Cancel As Boolean)
If Not appt.Mileage = "" Then 'This appointment was added by my program
    MsgBox ("Do not change appointments directly in Outlook!")
    Cancel = True
    appt.Close (olDiscard)
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:23:13.750

你能挂钩约会项目的写事件吗？您可以防止以这种方式进行更改。像下面这样的东西可能会起作用（免责声明未经测试）：

```
Public WithEvents myItem As Outlook.AppointmentItem 

Sub Initialize_handler() 

 Set myItem = Application.GetNamespace("MAPI").GetDefaultFolder(olFolderCalendar).Items("Your Appointment") 

End Sub 

Private Sub myItem_Write(Cancel as boolean) 

  Cancel=true 

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:10:20.413

您遇到的问题是人们具有写入权限，您是否可以或者是否可以只授予他们读取权限？如果这是不可接受的，那么我的回答是您不能或不应该阻止他们更改项目。你需要处理它。这就是我所做的。

因此，当您创建日历项目时，请为其提供一个唯一 ID，例如后端表格行中的 ID。将此添加到日历项目的属性中，例如里程属性。

现在只需创建一个更新方法，该方法循环遍历表中所有当前的日历项目，并使用 ID 从 Outlook 获取它们，检查它是否未更改以及是否更新了您的表。

***或者并在下面给出您的评论；***

在我看来，你必须控制前景。因此，敌人走在正确的轨道上，您可能需要使用 Outlook 插件连接到 Outlook 对象。然后你需要获取用户打开的每个约会项目，并检查它是否有里程ID。如果是这样，您要么需要告诉他们在您的数据库而不是 Outlook 中进行更改，要么您需要获取指示约会项目更改的相关事件并等待它被更改。然后将这些更改从 Outlook 发送到您的数据库。

# opencv - goodFeaturesToTrack 给出零大小的向量

> ID：13944508
> 
> 赞同：2
> 
> 时间：2012-12-19T02:00:27.807
> 
> 标签：opencv, stl

我正在尝试在`goodFeatureToTrack()`lena 的灰色图像上使用 opencv 2.4.3 的函数......但是我总是得到存储特征的向量的零大小`cv::Point2f`......我也尝试使用零掩码，但在那种情况下应用程序挂断了..我尝试使用从 0.01 到 0.001 的质量级别值。但是向量的大小仍然为零..有什么想法吗？...以下是我的代码..

```
#include <iostream>
#include <opencv2/core/core.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <opencv2/video/tracking.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <vector>

using namespace cv;
using namespace std;

int main()
{
    Mat frameROI;
    frameROI = imread("C:\\lena.jpg");
    std::vector<cv::Point2f> corners;
    cvtColor(frameROI,frameROI,CV_RGB2GRAY);

    //Mat mask(frameROI.size(), CV_8UC1);
    //mask.setTo(Scalar::all(0));

    //goodFeaturesToTrack(frameROI,corners,10,0.001,10,mask,3,false,0.04);
    goodFeaturesToTrack(frameROI,corners,10,0.001,10);//AFTER EDIT
    cout<<"SIZE OF FEATURE VECTOR = "<<corners.size()<<endl;

    imshow("VIDEO ROI",frameROI);
    waitKey();

    return 0;
} 
```

输出：

```
SIZE OF FEATURE VECTOR = 0 
```

**编辑：**在 Bob 的建议之后，我省略了掩码行并修改了函数..但是现在应用程序在调用 goodFeaturesToTrack 函数后挂断了......知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:48:34.320

通过将掩码设置为全零，您基本上将整个图像排除在搜索之外。您应该`mask.setTo(Scalar::all(0));`完全删除（从而将矩阵留空）或将其替换为`mask.setTo(Scalar::all(1));`（即在整个图像中搜索特征；否则，您应该在感兴趣的区域中将掩码设置为 1，否则设置为 0）。

`mask.setTo(Scalar::all(0));`如果我完全删除并绘制点，下图是您的代码为我返回的内容：

![在此处输入图像描述](../Images/2210d46f8d9ebbc9ed97a3f3a9bc310c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:04:39.543

刚刚解决了这个问题....而不是使用预构建库 n dll ....使用 MSVC2008 构建它，现在它工作正常...检测到 Bob 指出的相同点..

# c - 在 MPI 中的所有节点之间同时传递消息

> ID：13944509
> 
> 赞同：2
> 
> 时间：2012-12-19T02:00:36.550
> 
> 标签：c, algorithm, mpi

我似乎无法弄清楚如何在节点之间发送数据，而不是将其发送到根节点，然后将其发送到所有其他节点。

如果我的`N`每个节点都有一个这样创建的数组，那么`SIZE`节点的总数在哪里，目前假设它是一个预处理器常量（如果可能，避免`malloc`像瘟疫一样）。另外，不言而喻的`rank`是当前节点的排名。

```
int dummy [SIZE][5];
int i, n;

for (n = 0; n < SIZE; n++){
  for (i = 0; i <5; i++){
    if ( n == rank ){
      dummy [ n ][ i ] = 123; 
```

这为每个节点提供了一个几乎为空的维度数组`SIZE * 5`，其中只有一行数字`123`。现在我想获取所有这些单独的数组并“合并”它们。我唯一能想到的是以下内容，但我确信这会导致死锁，即使我确实费心检查我的源节点是否不等于目标节点：

```
for ( i = 0; i < SIZE; i++ ){
  for ( j = 0; j < SIZE; j++ ){
     MPI_Send ( &dummy [ i ], 5, MPI_INT, j, 123, MPI_COMM_WORLD );
  }
}

for ( i = 0; i < SIZE; i++ ){
  for ( j = 0; j < SIZE; j++ ){
     MPI_Recv ( &dummy [ j ], 5, MPI_INT, i, 123, MPI_COMM_WORLD );
  }
} 
```

有人可以为我提供一些关于如何解决这个问题的伪代码。干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:01:03.170

这是一个“收集”操作，并且有一个 MPI 集合，[`MPI_Gather()`](http://www.open-mpi.org/doc/v1.5/man3/MPI_Gather.3.php)如果您想将所有数据收集到一个处理器上，它会实现它，并将数据[`MPI_Allgather()`](http://www.open-mpi.org/doc/v1.5/man3/MPI_Allgather.3.php)收集到所有处理器。

在这种情况下，我们想做一个“就地”聚集——聚集到我们发送的同一个数组中。所以这将起作用：

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

#define SIZE 5

int main(int argc, char **argv) {

    int size, rank;
    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    if (size != SIZE) {
        if (rank == 0) {
            fprintf(stderr,"Must run with %d ranks\n", SIZE);
        }
        MPI_Finalize();
        exit(1);
    }

    int dummy [SIZE][5];

    for (int i = 0; i <5; i++){
          dummy [ rank ][ i ] = 100 * rank;
    }

    MPI_Allgather(MPI_IN_PLACE, 5, MPI_INT,
                  dummy, 5, MPI_INT,
                  MPI_COMM_WORLD);

    if (rank == SIZE-1) {
        printf("Rank %d has dummy:\n", rank);
        for (int i=0; i<size; i++) {
            for (int j=0; j<5; j++) {
                printf("%3d ", dummy[i][j]);
            }
            printf("\n");
        }
    }

    MPI_Finalize();
    return 0;
} 
```

运行给出：

```
$ mpicc -o allgather allgather.c -std=c99
$ mpirun -np 5 ./allgather
Rank 4 has dummy:
  0   0   0   0   0 
100 100 100 100 100 
200 200 200 200 200 
300 300 300 300 300 
400 400 400 400 400 
```

# asp.net - 使用 asp.net 或 mvc 的困惑

> ID：13944512
> 
> 赞同：11
> 
> 时间：2012-12-19T02:00:42.587
> 
> 标签：asp.net, .net, asp.net-mvc

我一直对 ASP.NET MVC 感到困惑。

正如一些人所说，MVC 比 ASP.NET 更好。正如一些人所说，它们是完全一样的。我的大学争论说 MVC 只是 asp.net 的扩展，而 asp.net 已经是 MVC 的形式。

事实上，我是从头开始开发网络的。如果有人可以帮助清除我面前的迷雾，那将有很大帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T02:12:20.583

所有**ASP.NET Web 框架**都建立在 Microsoft ASP.NET Framework 之上。Web API的**独特之**处在于它可以与 MVC 和 WebForms 应用程序一起使用，以提供真正宁静的 HTTP 服务。

关于选择合适的 Asp.NET 框架：您可以从官方来源 - **[www.asp.net](http://asp.net)**获得更多信息。

![在此处输入图像描述](../Images/0d62f7b93574e674e8d714fdaa033c7b.png)

一般**的经验法则**是您希望如何构建应用程序的**架构设计。**

**ASP.NET MVC**促进了更清晰的分离，这使开发人员比传统的 Web 表单更深入地思考设计和代码分离。

关于什么是 ASP.NET MVC 更好但真正的好处，存在无休止的争论

1.  可测试性
2.  对呈现的 HTML 进行更多控制
3.  关注点分离。然而，对于 MVC，开发人员还有很多东西需要学习。

**ASP.NET WebForms** - 将永远存在，因为有些人认为它是一种快速的应用程序开发工具。只需拖放，让 ASP.NET 处理发布、状态等

**ASP.NET Web API** - 是一个框架，可以轻松构建覆盖广泛客户端（包括浏览器和移动设备）的 HTTP 服务。ASP.NET Web API 是在 .NET Framework 上构建 RESTful 应用程序的理想平台。

总而言之，他们每个人都有一些需要考虑的业务解决方案。

**寻找比较的参考：**

*   [ASP.NET MVC 与 WebForms：速度和架构比较](https://stackoverflow.com/q/1035642/1437962)
*   [ASP.NET 路线图：一个 ASP.NET——Web 窗体、MVC、Web API 等](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV301)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-19T02:07:12.980

ASP.NET 是整个 Web 框架的名称。在 ASP.NET 上构建了几种不同的技术。这些技术的两个流行示例是 WebForms 和 MVC。

WebForms 促进了一种看起来更像 Windows 窗体的编程模型。它试图抽象出 Web 的无状态特性，并鼓励您使用服务器端控件而不是 HTML。因为在 MVC 出现之前很长一段时间，WebForms 是在 ASP.NET 上编写 Web 应用程序的主要方式，所以您经常会看到人们将“ASP.NET”与 WebForms 说成是同一个东西。这是您感到困惑的部分原因。ASP.NET WebForms 与 ASP.NET MVC 非常不同，但它们都是基于 ASP.NET 构建的。

ASP.NET MVC 摆脱了服务器端控件。它消除了抽象，使您可以更密切地控制生成的实际 HTML。对于现代应用程序的开发人员来说，这非常有用，因为它使使用 AJAX 和富客户端 JavaScript 变得更加容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T02:05:53.140

（卑微的意见传入）

ASP.NET（就使用 Webforms 而言）正在为 WinForms 开发人员编写 Web。您“绑定”事件，您拥有“控件”，并且所有内容（会话状态）都存储在页面内的一个巨大的隐藏字段中，因此它知道它从上一次调用中中断的位置。您严重依赖这些信息，这就是为什么您所做的一切都需要驻留在包含整个页面的主表单中。

另一方面，MVC 正在将~~C#~~ .NET 编程以 Web 的预期方式带回 Web。没有臃肿，没有隐藏字段，没有繁重的绑定。它让一切都回到了经典的“我有这个表格，现在我需要处理它”。可以说，真正的魔力在于路由方法和提交字段到对象的“自动绑定”。（如果 fields `x`, `y`&`z`已提交并且您的操作正在查找`FooBar`properties `x`，`y`&`z`它会自动为您转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T02:09:52.697

ASP.NET 对 WEB-API 和 ASP.NET MVC 都是通用的。我假设您想知道 MVC 或 WEB-API。MVC 是基于视图的控制器/模型。尽管控制器可用于 AJAX json 目的。MVC 是构建严肃的基于浏览器的应用程序的好方法。WEB-API 允许您构建简单的 http 服务器功能，不一定与浏览器相关。适合 REST 风格的编程。非常灵活，是 WCF 服务的良好替代品。这是官方 ASP.NET 网站上关于两者的很好的教程。从这里开始[http://www.asp.net/get-started](http://www.asp.net/get-started)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T08:18:58.750

选择取决于您的项目。我建议您选择 MVC，因为它的生产力非常高，我们使用它 1 年以来发现它比 webforms 更好。

更多知识请访问[http://www.asp.net/mvc](http://www.asp.net/mvc)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T18:39:48.163

选择完全取决于你，我从 2010 年开始开发 MVC 应用程序，现在已经使用了 2 年多，几乎所有版本的 MVC 都使用 Razor 和 aspx 视图。我还研究过基于 ASP.Net webform 的应用程序。

使用 MVC，您将不会获得内置控件，您必须开发每个想要使用的控件，您将不得不主要依赖 html 控件，而使用 Web 表单，您将获得使用内置控件的优势，甚至可以从您周围的其他开发人员可能很容易使用 Web 表单，因为您可以轻松获得 Web 表单开发人员。

但另一方面，MVC 的可维护性非常高。至于生产力，一旦你习惯了它就会非常高，最初它会很低，因为你将处于学习阶段。不要忘记使用实体框架。

如果适合您的场景，您也可以考虑使用 WebAPI 开发您的应用程序。

# javascript - 如何使用 phantomjs 抓取链接

> ID：13944518
> 
> 赞同：14
> 
> 时间：2012-12-19T02:01:40.547
> 
> 标签：javascript, beautifulsoup, phantomjs, casperjs

[PhantomJS](http://phantomjs.org/)可以用作[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)的替代品吗？

我正在尝试在 Etsy 上搜索并访问术语中的所有链接。在 Python 中，我知道如何做到这一点（使用 BeautifulSoup），但今天我想看看我是否可以使用 PhantomJS 做到这一点。我不会走得很远。

该脚本应在 Etsy 上搜索“hello kitty”并返回所有产品 `<a class="listing-thumb" href=...></a>`并在控制台中打印它们。理想情况下，我稍后会访问他们并获取我需要的信息。现在它只是冻结。有任何想法吗？

```
var page = require('webpage').create();
var url = 'http://www.etsy.com/search?q=hello%20kitty';

page.open(url, function(status){
    // list all the a.href links in the hello kitty etsy page
    var link = page.evaluate(function() {
        return document.querySelectorAll('a.listing-thumb');
    });
    for(var i = 0; i < link.length; i++){ console.log(link[i].href); }
    phantom.exit();
}); 
```

我玩过使用[CasperJS](http://casperjs.org/)，它可能为此设计得更好。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-19T09:06:45.937

PhantomJS`evaluate()`不能序列化和返回复杂的对象，如 HTMLElements 或 NodeLists，所以你必须先将它们映射到可序列化的东西：

```
var page = require('webpage').create();
var url = 'http://www.etsy.com/search?q=hello%20kitty';

page.open(url, function(status) {
    // list all the a.href links in the hello kitty etsy page
    var links = page.evaluate(function() {
        return [].map.call(document.querySelectorAll('a.listing-thumb'), function(link) {
            return link.getAttribute('href');
        });
    });
    console.log(links.join('\n'));
    phantom.exit();
}); 
```

注意：这里我们使用`[].map.call()`是为了将 a`NodeList`视为标准`Array`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T09:04:37.650

您的代码的唯一问题是您不了解 phantomjs 范围。您有幻像和页面范围。您尝试将 JavaScript DOM 对象引用（无法序列化）从页面范围（page.evaluate 在页面范围内运行）返回到幻像主范围。我认为这是不可能的。下面是有效的代码：

```
var page = require('webpage').create();
var url = 'http://www.etsy.com/search?q=hello%20kitty';

// for debug (to see if page returns status code 200)
page.onResourceReceived = function(response) {
    if (response.url === url) {
        console.log('Resorce: "' + response.url + '" status: '  + response.status);

        if (response.status === 200) {
            console.log(response.url);
            for (var i = 0; i < response.headers.length; i++) {
                console.log(response.headers[i].name + ': ' + response.headers[i].value);
            }
        }
    }
};

page.onLoadFinished = function(status){
    console.log('Status: ' + status);

    console.log('Starting evaluate...');
    var links = page.evaluate(function() {
        var nodes = [],
            matches = document.querySelectorAll("a.listing-thumb");

            for(var i = 0; i < matches.length; ++i) {
                nodes.push(matches[i].href);
            }

            return nodes;
    });
    console.log('Done evaluate... count: ' + links.length);

    if (links && links.length > 0) {
        for(var i = 0; i < links.length; ++i) {
            console.log('(' + i + ') ' + links[i]);
        }
    } else {
        console.log("No match found!");
    }

    phantom.exit(0);
};

page.open(url); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-02T07:50:16.063

这是我最近编写的一些使用 PhantomJs 抓取 url 的代码，如果您仅提供一个 URL，它将显示页面上的所有 URL，如果您提供一个参数，`class|id`后跟一个“类/id 名称”，它将显示仅限类/ID。

```
////////////////////////////////////////////////////////// 
/////  PhantomJS URL Scraper v.1.3 ///// 
// 
// Copyrighted by +A.M.Danischewski  2016+ (c)
// This program may be reutilized without limits, provided this 
// notice remain intact. 
// 
// Usage: phantomjs phantom_urls.js <URL> [["class"|"id"] [<query id/class name>]]
//
//   Argument 1: URL -- "https://www.youtube.com/watch?v=8TniRMwL2Vg" 
//   Argument 2: "class" or "id" 
//   Argument 3: If Argument 2 was provided, "class name" or "id name" 
// 
// By default this program will display ALL urls from a user supplied URL.  
// If a class name or id name is provided then only URL's from the class 
// or id are displayed.  
//  
/////////////////////////////////// 

var page = require('webpage').create(), 
    system = require('system'),
    address;

if (system.args.length === 1) {
  console.log(' Usage: phantomjs phantom_urls.js <URL> [["class"|"id"] [<query id/class name>]]');
  phantom.exit();
}

address = system.args[1];
querytype= system.args[2];
queryclass = system.args[3];
page.open(address, function(status) {
  if (status !== 'success') {
    console.log('Error loading address: '+address);
  } else {
   //console.log('Success! In loading address: '+address);   
  }
});

page.onConsoleMessage = function(msg) {
  console.log(msg);
}

page.onLoadFinished = function(status) {
   var dynclass="function() { window.class_urls = new Array(); window.class_urls_next=0; var listings = document.getElementsByClassName('"+queryclass+"'); for (var i=0; i < listings.length; i++) { var el = listings[i]; var ellnks=[].map.call(el.querySelectorAll('a'),function(link) {return link.getAttribute('href');}); var elhtml=el.innerHTML; window.class_urls.push(ellnks.join('\\n')); }; return window.class_urls;}"; 
   var    dynid="function() { window.id_urls = new Array(); window.id_urls_next=0; var listings = document.getElementById('"+queryclass+"'); var ellnks=[].map.call(listings.querySelectorAll('a'),function(link) {return link.getAttribute('href');}); var elhtml=listings.innerHTML; window.id_urls.push(ellnks.join('\\n'));  return window.id_urls;}";  
   var  allurls="function() { var links = page.evaluate(function() { return [].map.call(document.querySelectorAll('a'), function(link) { return link.getAttribute('href'); };); };); console.log(links.join('\\n')); }"; 
   var page_eval_function="";  
   if (querytype === "class") {
   console.log(page.evaluate(dynclass).toString().replace(/,/g, "\n")); 
   } else if (querytype === "id") {
   console.log(page.evaluate(dynid).toString().replace(/,/g, "\n")); 
   } else { 
   var links = page.evaluate(function() {
        return [].map.call(document.querySelectorAll('a'), function(link) {
            return link.getAttribute('href');
        });
    });    
       console.log(links.join('\n'));
   }             
   phantom.exit();
}; 
```

# javascript - 将公告栏添加到 Wordpress

> ID：13944524
> 
> 赞同：0
> 
> 时间：2012-12-19T02:02:05.820
> 
> 标签：javascript, wordpress

我正在尝试将公告栏添加到 wordpress 页面。我知道如何添加栏，但我也希望它在用户单击栏上的“x”时消失。

我到目前为止的代码：

CSS

```
#message_box {
position: absolute;
top: 0; left: 0;
z-index: 10;
background:#ffc;
padding:5px;
border:1px solid #CCCCCC;
text-align:center;
font-weight:bold;
width:99%;
} 
```

html

```
<div id="message_box">
    <img id="close_message" style="float:right;cursor:pointer" src="...." />
    TEXT HERE
</div> 
```

现在我如何将 JS 实现到 wordpress 中，以便在用户单击“x”图像时通知消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:34:47.560

当您还没有使用 jQuery 时，您可以只使用纯 Javascript。只为 4 行代码加载 jQuery 有点过头了。

```
document.getElementById("close_message").onclick = function() {
    document.getElementById("message_box").style.display = 'none';
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:16:25.660

你可以使用一个简单的 jQuery 函数

```
$(function(){
    $('#close_message').click(function(){
        $('#message_box').remove();
    });
}); 
```

示例：http: [//jsfiddle.net/qsfjC/](http://jsfiddle.net/qsfjC/)

# ios - NSURLConnection 重试 401 状态

> ID：13944527
> 
> 赞同：2
> 
> 时间：2012-12-19T02:02:18.287
> 
> 标签：ios, nsurlconnection, nsurlconnectiondelegate

我正在与验证密码的服务器通信，并在密码无效时返回 401 错误，以及指定失败尝试次数的 json 正文。每次验证失败时，服务器都会增加该数字。

我面临的问题是，当 NSURLConnection 收到 401 响应时，它会启动涉及这些委托方法的身份验证机制：

> **连接：canAuthenticateAgainstProtectionSpace：**
> 
> **连接：didReceiveAuthenticationChallenge：**

如果我在*canAuthenticate*方法中返回 NO，则会发出一个新的相同请求。这将导致服务器第二次增加失败的尝试（这显然是不希望的），我会得到一个 401 响应（*connection:didReceiveResponse:*）

如果我在*canAuthenticate*方法中返回 YES，则调用*didReceiveAuthenticationChallenge*方法。如果我想停止第二个请求，我可以调用*[challenge.sender cancelAuthenticationChallenge:challenge]*。但是如果我这样做，我不会得到 401 响应，而是一个错误。

我发现无法捕获第一个 401 响应。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T23:05:47.113

1) 对于没有客户端证书的普通 SSL，您不需要实现这两种方法

2）如果你仍然想，你应该检查 [challenge failureResponse] 对象中的 HTTP 响应代码：

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSURLCredential *urlCredential = [challenge proposedCredential];
    NSURLResponse *response = [challenge failureResponse];
    int httpStatusCode = -1;
    if(response != nil) {
        NSHTTPURLResponse* httpResponse = (NSHTTPURLResponse*)response;
        httpStatusCode = [httpResponse statusCode];
    }    
    if(urlCredential != nil || httpStatusCode == 401) {
        //wrong username or more precisely password, call this to create 401 error
        [[challenge sender] cancelAuthenticationChallenge:challenge];
    }
    else {
        //go ahead, load SSL client certificate or do other things to proceed
    }    
}

- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{       

 return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:27:49.387

如果一切都失败了，试试这个：一个很棒的库，叫做[AFNetworking](https://github.com/AFNetworking/AFNetworking)，它很容易实现。

它使用块，这极大地简化了类之间的数据通信（取消了委托），并且是异步的。

示例用法如下：

```
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:"www.yourwebsite.com/api"]];

NSDictionary *params = @{
    @"position": [NSString stringWithFormat:@"%g", position]
};

[client postPath:@"/api" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

}]; 
```

就如此容易！Result 在调用 HTTP Post 或 Get 方法的类中直接可用。

它甚至包括图像和 JSON 请求、JSON 反序列化、带有进度回调的文件下载等等。

# android - 在虚拟主机上通过平板电脑访问我在 Xampp 上的网站

> ID：13944529
> 
> 赞同：4
> 
> 时间：2012-12-19T02:02:35.630
> 
> 标签：android, xampp, tablet, virtualhost

我正在我的机器上开发一个站点。我正在使用虚拟主机，因此我的项目站点地址是 mysite.local。

通常，我可以通过键入`http://ipaddress/projectfolder`（在 htdocs 中）在网络上的其他机器上访问我的站点。但是因为我在虚拟主机上，所以我“可以”通过将主机文件指向 xampp 主机来在任何计算机上访问它。但我不认为我可以在我的 android 平板电脑上这样做，因为没有主机文件可以说出来。

对此有何建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:13:08.560

一种可能的解决方案是使用 localhost 隧道工具之一来临时使您的站点对公共 Internet 可见 - 这将允许您从任何具有 Internet 访问权限的设备对其进行测试，因此您可以执行诸如测试其在 3G 上的性能之类的事情或者请朋友也来看看。

两个这样的工具包括：

*   PageKite - [https://pagekite.net/](https://pagekite.net/)（免责声明：我写了这个）
*   本地隧道 - [http://progrium.com/localtunnel/](http://progrium.com/localtunnel/)

还有其他的，但这两个都是开源的，带有可选的在线服务组件，因此您可以选择是要在云中运行自己的中继还是使用工具作者提供的中继。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T14:04:02.740

即使这个问题可能不是最新的，我也遇到了同样的问题并找到了另一种可能的解决方案。

如果你想从你的局域网中访问一个站点，你可以添加另一个虚拟主机来监听你的本地 IP，如下所示：

```
<VirtualHost 192.168.0.100:80>
  ServerName loc.al
  DocumentRoot "/path/to/project/"
  DirectoryIndex index.php
  <Directory "/path/to/project/">
      Options -Indexes +FollowSymLinks
      AllowOverride All
      Order allow,deny
      Allow from all
  </Directory>
</VirtualHost> 
```

这会将来自本地 IP 的任何传入请求转发到`DocumentRoot`该虚拟主机内指定的请求。

# java - 在链接列表java中搜索节点时出错？

> ID：13944533
> 
> 赞同：-3
> 
> 时间：2012-12-19T02:03:35.527
> 
> 标签：java, linked-list

我认为这很容易，但我在从文本文件中搜索节点时遇到问题。

文本文件中的数据如下：

1

2

3

4

5

数据存储在字符串“word”中。它们是避免复杂性的数字。

问题是 - 在调用搜索方法时它一直返回 false。

```
public class Search
    {

        static int count;  // number of elements
        Search ()
    {
        count = 0;
    }

    static void inputdata (Node head, Node node) throws IOException
    {
        BufferedReader stdin = new BufferedReader (new InputStreamReader (System.in));
        BufferedReader reader = new BufferedReader (new FileReader ("Words.txt"));

        String word;
        String line = null;

        while ((line = reader.readLine ()) != null)
        {
            word = (line);
            node = new Node (word);
            node.next = head;
            head = node; // need to set the new head of the list to the node that was just inserted
            count++;
        }

        reader.close ();

        node = head;
        System.out.println ("Here is the list:");
        System.out.println ();
        do
        {
            System.out.println (node.data);
            node = node.next;
        }
        while (node != null);
        System.out.println ();
        System.out.println ();
    }

    static boolean Found (String search, Node head, Node node)  // recursive search method
    {
        boolean found;

        Node temp; // sets a termpoary node to the head
        node = head;
        temp = head;

        while (temp != null)
        {
            if (temp.data.equals (search))
                return true;
            temp = temp.next;

        }
        return false;
    }

    public static void main (String str[]) throws IOException
    {
        BufferedReader stdin = new BufferedReader (new InputStreamReader (System.in));
        DecimalFormat df = new DecimalFormat ("#");

        //Search list = new Search (); //calls list via constructor
        Node head = null;
        Node node = null;

        inputdata (head, node);

        System.out.println (count + " entries");

        String search, repeat;

        System.out.println ();
        System.out.println ("Which word do you want to search within the linked list?"); // returns true/false from a method
        search = stdin.readLine ();

        System.out.println (Found (search, head, node));

    }
} 
```

其他文件（类）：

```
public class Node
{
    Node next, prev;
    String data;

    public Node (String data)
    {
        this.data = data;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:21:46.000

您的问题是您的链表一次只有一个对象，因为您总是将 node.next 设置为 head，并将 head 设置为 node。因此，您将始终只打印相同的数字（我猜，这正是您所看到的）。

您需要做的是修复您的插入程序。这样的事情应该做（请注意，它未经测试）

```
Node prev;

while((line = reader.readLine()) != null) 
{
    word = line;
    node = new Node(word);
    node.next = null;

    if(head == null) {
        head = node;
    } 

    if(prev != null) {
        prev.next = node;
    }
    prev = node;

} 
```

# java - 将 onclick 侦听器添加到 FrameLayout 中的重叠小部件不起作用

> ID：13944535
> 
> 赞同：0
> 
> 时间：2012-12-19T02:03:55.960
> 
> 标签：java, android, xml, android-layout, android-widget

如图所示，我有一个带有多个 ImageView 的 FrameLayout。![在此处输入图像描述](../Images/705e2d40c1ebc9a095eb5ba19c5dbc27.png)

我已经注册了所有这些 Imageviews 的听众。我已经使用 android:layout_gravity、android:paddingLeft 和 android:paddingRight 定位了 ImageViews，因此`images are overlapping`.

我的活动课程如下：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ivbglogin = (ImageView) findViewById(R.id.bglogin);
    ivlogin = (ImageView) findViewById(R.id.login);
    tvlogin = (TextView) findViewById(R.id.tvlogin);

    ivbgsignup = (ImageView) findViewById(R.id.bgsignup);
    ivsignup = (ImageView) findViewById(R.id.signup);
    tvsignup = (TextView) findViewById(R.id.tvsignup);

    ivbglogin.setOnClickListener(this);
    ivlogin.setOnClickListener(this);
    tvlogin.setOnClickListener(this);
    ivbgsignup.setOnClickListener(this);
    ivsignup.setOnClickListener(this);
    tvsignup.setOnClickListener(this);
} 
```

和

```
@Override
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.bglogin:
        Toast.makeText(AstralPadActivity.this, "bglogin", Toast.LENGTH_SHORT).show();
        break;
    case R.id.login:
        Toast.makeText(AstralPadActivity.this, "login", Toast.LENGTH_SHORT).show();
        break;
    case R.id.tvlogin:
        Toast.makeText(AstralPadActivity.this, "tvlogin", Toast.LENGTH_SHORT).show();
        openLoginDialog();

        break;

    case R.id.bgsignup:
        Toast.makeText(AstralPadActivity.this, "bgsignup", Toast.LENGTH_SHORT).show();
        break;
    case R.id.signup:
        Toast.makeText(AstralPadActivity.this, "signup", Toast.LENGTH_SHORT).show();
        break;
    case R.id.tvsignup:
        Toast.makeText(AstralPadActivity.this, "tvsignup", Toast.LENGTH_SHORT).show();
        break;

    }
} 
```

框架布局是

```
<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="40"
    android:background="@drawable/start_bottombg" >

    <ImageView
        android:id="@+id/bglogin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:paddingRight="194dp"
        android:paddingBottom="8dp"
        android:paddingTop="8dp"
        android:src="@drawable/start_loginbg" />

    <ImageView
        android:id="@+id/login"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:paddingBottom="15dp"
        android:paddingRight="200dp"
        android:paddingTop="15dp"
        android:src="@drawable/icon_login" />

    <TextView
        android:id="@+id/tvlogin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:paddingRight="120dp"
        android:text="Log In"
        android:textSize="15dp"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/bgor"
        android:layout_width="25dp"
        android:layout_height="25dp"
        android:layout_gravity="center"
        android:src="@drawable/start_or" />

    <ImageView
        android:id="@+id/bgsignup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:paddingLeft="190dp"
        android:paddingBottom="8dp"
        android:paddingTop="8dp"
        android:src="@drawable/start_signupbg" />

    <ImageView
        android:id="@+id/signup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:paddingBottom="15dp"
        android:paddingLeft="100dp"
        android:paddingTop="15dp"
        android:src="@drawable/icon_signup" />

    <TextView
        android:id="@+id/tvsignup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:paddingLeft="200dp"
        android:text="Sign Up"
        android:textSize="15dp"
        android:textStyle="bold" />
</FrameLayout> 
```

所以当我点击棕色的 ImageView 时，它调用的是绿色的。我想知道如何为这些元素中的每一个注册侦听器，并在单击相应的小部件时调用这些特定的侦听器。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:09:19.793

以前没有遇到过这种情况，但听起来你遇到了（因为没有更好的术语）未定义的行为。是否使用`RelativeLayout`选项？如果不是，那么调整尺寸以防止重叠？除此以外 - 尝试分配单独的匿名侦听器而不是一个检查小部件 ID 的侦听器。

请记住，在每一步中，在调试器/跟踪文件中爬行，以验证您认为正在发生的事情是否真的发生了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:15:45.323

问题是因为我使用`android:paddingLeft="200dp"`的是`android:layout_marginLeft="100dp"`. 由于填充，图像重叠。现在它工作正常。

# html - 使用 Safari 在 css 中发出“宽度”，我该怎么做？

> ID：13944539
> 
> 赞同：0
> 
> 时间：2012-12-19T02:04:41.943
> 
> 标签：html, css, safari

我的网站是：kienanh.vn

当我测试跨浏览器时，我遇到了 Safari 的问题。

我设置的任何位置：`width: abc px;`不在 Safari 中工作？我如何解决它？

您可以使用 safari 访问我的网站以查看它！

### 我的标记是：

```
<div id="wak">
<div id="quangcao1">  
<div id="slider1"></div> 
 <div id="slider2"><div> 
 <div id="slider3"><div>  
</div>
</div> 
```

### CSS：

```
#wak {
    background-color: #FFFFFF;
    margin: 0 auto;
    max-width: 1000px;
}
#quangcao1 {
    height: 345px; // i don't set width for this elem
}
#slider1, #slider2, #slider3 {
    background-color: #F5F5F5;
    float: left;
    height: 335px;
    padding: 5px;
}
#slider1 {
    margin-top: 3px;
    width: 490px;
}
#slider2, #slider3 {
    width: 240px;
} 
```

**现在我的问题是：将 px 转换为 em`http://pxtoem.com/`我正在尝试这样做。我觉得行得通！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:27:43.760

您应该验证您的 HTML - [http://validator.w3.org/](http://validator.w3.org/) - 并修复发现的任何错误。例如，id 需要是唯一的。您有多个 id=wak 的元素。考虑将其更改为一个类。这可能会解决您的问题。

# google-chrome - Chrome，使用 width="100%" 时，图像变得模糊？

> ID：13944540
> 
> 赞同：2
> 
> 时间：2012-12-19T02:05:01.230
> 
> 标签：google-chrome, tags, width, image

我正在使用谷歌浏览器，并有一个 1440 像素宽的显示屏。我制作了大约那么宽的图像，每当我将属性 width="100%" 与 img 标签一起使用时，它都会使图像模糊。

但是，当我添加它时，它会将图像缩小到确切的屏幕尺寸。

不确定这是 Chrome 问题，还是有其他方法可以解决。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:37:21.947

您可能误解了 100% 的含义。width 的值不是针对图像本身，而是针对父级的宽度。因此，您可能需要指定宽度为`width="1440"`或使用 css 样式`width:1440px`或不设置以保持原始大小（不推荐，因为它有时可能会在加载期间导致布局错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-17T16:50:48.683

我遇到了同样的问题，只在 chrome 上。我使用带有背景图像的 div 的解决方法，模糊消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-06T15:01:37.707

试试这个 CSS：

```
image-rendering: -moz-crisp-edges;         /* Firefox */
image-rendering:   -o-crisp-edges;         /* Opera */
image-rendering: -webkit-optimize-contrast;/* Webkit (non-standard naming) */
image-rendering: crisp-edges;
-ms-interpolation-mode: nearest-neighbor;  /* IE (non-standard property) */ 
```

| [https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering](https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering)

# android - 允许以样式为主题

> ID：13944544
> 
> 赞同：4
> 
> 时间：2012-12-19T02:05:29.500
> 
> 标签：android

我有一个简单的问题。我想为我的 UI 提供多个主题，用户可以在它们之间切换

问题是我可以使用设置原始 UI 类样式的主题，或者我可以直接在 XML 布局元素上使用样式，但是我无法定义一种样式，该样式随后会根据我应用的主题进行更改。并非我想做的所有样式都基于原始类型。

我想说我想做的类似于使用 CSS 选择器来设置类或 ID 的样式，但主题只允许您设置元素名称的样式。

* * *

我现在能做的最好的事情是有一个从我构建的实际样式中继承的基本样式，如下所示：

我的 res/values/style.xml

```
// All styles have to be subclassed here to be made generic, and only one
// can be displayed at a time. Essentially, I'm doing the same thing as setting
// a theme does, but for styles. If I have 50 styles, I have to have 50 of
// these for each theme, and that's not DRY at all!
<style name="MyHeaderStyle" parent="MyHeaderStyle.Default"/>
<!--
    <style name="MyHeaderStyle" parent="MyHeaderStyle.Textures"/>
-->

<style name="MyHeaderStyle.Default">
    <item name="android:background">@android:color/background_dark</item>
</style>

<style name="MyHeaderStyle.Textures">
    <item name="android:background">@drawable/header_texture</item>
</style> 
```

我的 layout.xml 中的用法：

```
<!-- Note that I can't use a theme here, because I only want to style a
     SPECIFIC element -->
<LinearLayout android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              style="@style/MyHeaderStyle"
              android:gravity="center">
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T23:17:02.377

试试这个方法：

1）定义自己的`res/values/attrs.xml`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <declare-styleable name="AppTheme">
        <attr name="myLinearLayoutStyle" format="reference" />
    </declare-styleable>

</resources> 
```

2）将上述属性分配给您 LinearLayout

```
<LinearLayout android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              style="?attr/myLinearLayoutStyle"
              android:gravity="center">
</LinearLayout> 
```

3) 为这个属性分配一个具体的样式：

```
<style name="AppLightTheme" parent="android:Theme.Holo.Light">
    <item name="@attr/myLinearLayoutStyle">@style/lightBackground</item>
</style>

<style name="AppTheme" parent="android:Theme.Holo">
    <item name="@attr/myLinearLayoutStyle">@style/darkBackground</item>
</style>

<style name="lightBackground">
    <item name="android:background">#D1CBF5</item>
</style>

<style name="darkBackground">
    <item name="android:background">#351BE0</item>
</style> 
```

希望我正确理解了你的问题。

# javascript - 从列表中删除/隐藏大量元素的最快方法

> ID：13944550
> 
> 赞同：9
> 
> 时间：2012-12-19T02:06:07.590
> 
> 标签：javascript

我有一个下拉列表，其中包含大约 100,000 行组成一个列表。

```
<input id="search" type="text" />
<ul>
    <li>item 1</li>
    <li>item 2</li>
        ...
    <li>item 100,000</li>
</ul> 
```

我有一个用作搜索的文本框，因此当您键入它时，它会匹配列表中项目的输入，删除不匹配的内容。这是我编写的用于删除列表元素的类。

[见小提琴（列表有大约 2000 项）](http://jsfiddle.net/bWtpy/10/)

```
// requires jQuery
var Search = (function(){

    var cls = function (name) {
        var self = this;

        self.elem = $('#' + name);
        self.list = $('#' + name).next('ul').children();
        self.elem.bind('keyup', function () { self.change(); }); 
    };

    cls.prototype = {
        change: function () {
            var self = this;
            // gets the closest ul list
            var typed = self.elem.val();

            // only do something if there is something typed
            if (typed !== '') {
                // remove irrelevent items from the list
                self.list.each(function () {
                    var item = $(this).html();
                    if (item.indexOf(typed) === -1)  {
                        $(this).addClass('zero');
                        // tried using a class with visibility hidden
                    } else {
                        $(this).removeClass('zero');
                    }
                });
            } else {
                // check what list items are 'hidden' and unhide them
                self.list.each(function () {
                    if ($(this).hasClass('zero')) {
                        $(this).removeClass('zero');
                    }
                });
            }
        }
    };
    return cls;
}()); 
```

我只是添加一个添加高度为 0 的类，并且没有边距、填充等，但我也尝试过使用可见性：隐藏。我也尝试过在 jQuery 中使用 detach 方法，但这在速度方面大致相同。

他们是否有任何 JavaScript 专家可以看到代码中的任何问题，或者提供一些优化技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T02:20:06.183

当人们总是只使用一小部分时，保留 40k 行并不是一个现实的解决方案。你可以做的是缓存它。

1.  只保留那些最常用的。
2.  它使用得越多，它就会出现在顶部。
3.  如果它从未使用过，它将永远不会出现。针对这种情况启动 ajax 请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T02:32:59.457

即使有大量项目，这也可以“相对较好”（无论如何在桌面浏览器中）完成 - 尽管实际性能会根据其他因素而有所不同。

保持 UI 响应的“技巧”是随着时间的推移处理搜索/过滤，`setTimeout`或者`setInterval`只“一次做很多工作”。我发现，至少在 IE7/8 中，当我在侧边栏小工具中使用它时，20ms/30ms 的工作/休息时间效果很好。YMMV。

如果可以完全*避免使用 DOM 进行搜索*（例如，使用缓存从数组或其他可搜索结构中即时重新创建 n 项），那么这也可能会带来回报 - 运行一些基准测试！- 并使搜索更简单。

当然，至少对于“粗粒度结果”，利用服务器端解决方案（例如 AJAX）也可能更合适，具体取决于用例..

# java - JButton 不会显示 SHORT_DESCRIPTION，setEnabled 也不会工作

> ID：13944553
> 
> 赞同：1
> 
> 时间：2012-12-19T02:06:18.410
> 
> 标签：java, swing, action, jbutton

`JButton`不会显示 SHORT_DESCRIPTION，`setEnabled`工作也不会。

```
...
ButtonAction action = new ButtonAction();
command.addActionListener(action);

class ButtonAction extends AbstractAction{

    public ButtonAction(){
        putValue(Action.SHORT_DESCRIPTION, "Comnine the two value");
        setEnabled(false);
    }
    public void actionPerformed(ActionEvent event){

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:26:07.207

您必须使用`Action`或使用创建按钮`setAction()`；`addActionListener()`光靠自己是不够的。这是一个完整的例子；有关示例和有关绑定属性的更多信息，请参阅[*如何使用操作。*](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)[`Action`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html)

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;

/** @see http://stackoverflow.com/a/13944679/230513 */
public class ActionTest {

    private void display() {
        JFrame f = new JFrame("ActionTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JButton(new ButtonAction()));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    class ButtonAction extends AbstractAction {

        public ButtonAction() {
            putValue(NAME, "Button");
            putValue(SHORT_DESCRIPTION, "Combine the two values");
            setEnabled(false);
        }

        @Override
        public void actionPerformed(ActionEvent event) {
            System.out.println(event);
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ActionTest().display();
            }
        });
    }
} 
```

# c# - 更改流程优先级不起作用

> ID：13944554
> 
> 赞同：16
> 
> 时间：2012-12-19T02:06:24.057
> 
> 标签：c#, windows

我运行一个音频中继器应用程序，它允许我同时通过耳机和扬声器播放声音。应用程序本身有能力将自己设置为“实时”，但它只设置为高，所以目前我必须自己在任务管理器中设置它。

我决定自动化这个，所以我用 C# 写了一个小脚本，它会改变我的进程优先级（我会在完成后添加启动）

```
namespace ProcessRealtime
{
    class Program
    {
        static void Main(string[] args)
        {
            Process[] processes = Process.GetProcessesByName("audiorepeater");
            foreach (Process proc in processes)
            {
                Console.WriteLine("Changing Priority for: "+proc.Id+" To RealTime");
                proc.PriorityClass = ProcessPriorityClass.RealTime;
                if (proc.PriorityClass == ProcessPriorityClass.RealTime)
                {
                    Console.WriteLine("Worked");
                }
            }
            Console.ReadLine();
        }
    }
} 
```

问题是它不应用更改。 ![桌面截图](../Images/623aa2310753e484c3d85b9f137559bc.png)

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T13:01:20.367

尝试这个 ：

```
using (Process p = Process.GetCurrentProcess())
    p.PriorityClass = ProcessPriorityClass.High; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-19T03:24:31.990

您需要以管理权限运行您的脚本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-13T19:30:56.017

您可以以管理员身份运行或删除 UAC，因为您需要访问您未运行的进程的权限。

这对我有用：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

// #define DEBUG

namespace ProcessRealtime
{
    class PUBG_RealTime
    {
        static string processName = "TslGame";
        static ProcessPriorityClass newPriority = ProcessPriorityClass.High;

        static void Main(string[] args)
        {
#if DEBUG
            PutDebug("Start!");
#endif
            Process[] processes = Process.GetProcessesByName(processName);
#if DEBUG
            PutDebug(processes.Length + " processed found");
#endif
            foreach (Process proc in processes)
            {
#if DEBUG
                PutDebug("New process found");
#endif
                Console.WriteLine("Changing Priority for id:" + proc.Id + " to " + newPriority.ToString());
                proc.PriorityClass = newPriority;
#if DEBUG
                PutDebug("Changed priority for " + proc.Id);
#endif
            }
#if DEBUG
            PutDebug("No more processes..");
#endif
            Console.Write("Press a key, it's over !");
            Console.ReadLine();
        }

#if DEBUG
        static bool debug = true;
        static int debugInc = 1;
        static void PutDebug(string info = "")
        {
            if(debug){
                Console.WriteLine("Debug" + debugInc + ": " + info);
                debugInc++;
            }
        }
#endif
    }
} 
```

# plone - 未设置 SimpleTerm 标题

> ID：13944555
> 
> 赞同：2
> 
> 时间：2012-12-19T02:06:24.877
> 
> 标签：plone, vocabulary, z3c.form

我有一个带有 a 的表单`SelectFieldWidget`，它目前正在使用静态词汇，基本上是这样的：

```
from zope.schema.vocabulary import SimpleVocabulary, SimpleTerm

primary_contacts = SimpleVocabulary([
    SimpleTerm( unicode(token), title=unicode(token.upper()), token=token ) for token in [
        'one','two','three','four','five','six','seven','eight','nine','ten',
    ]
]) 
```

词汇表被分配给表单模式中的字段：

```
form.widget( primary_contact_person=SelectFieldWidget )
primary_contact_person = schema.List(
    title = u'Nominate Primary Contact',
    required = False,
    value_type = schema.Choice(
        vocabulary=primary_contacts,
    )
) 
```

然后使用 & 对模式进行序列化`plone.supermodel`，然后在表单需要时反序列化（这是为了另一个要求）。

该表单使用自定义的手写模板，我正在添加`tal`语句以生成选择字段选项。我原以为我可以通过引用表单上的小部件来做到这一点，但是当我这样做时，我遇到了一个问题：

```
(Pdb) self # break point in form
<Products.Five.metaclass.edit_metadata object at 0xc1ce450>
(Pdb) select = self.widgets['primary_contact_person']
(Pdb) first = [t for t in select.terms][0]
(Pdb) first.token
'one'
(Pdb) first.value
u'one'
(Pdb) first.title
(Pdb) 
```

`None`当通过小部件访问时，标题就在术语上。我试过通过词汇表来查找它：

```
(Pdb) select.terms.getTermByToken('one').title
(Pdb) 
```

但同样，它是`None`。但是，它*存在*于原始词汇对象中的术语：

```
(Pdb) from my.package import primary_contacts
(Pdb) [t for t in primary_contacts][0].title
u'ONE' 
```

因此，虽然我*可以*直接使用源词汇对象来提供模板所需的值，但计划是让这个词汇最终成为动态的，此时我希望我需要询问小部件本身。

我在这里做错了什么，为什么没有定义标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:26:03.067

问题出在`plone.supermodel`. 我应该更清楚地提到我正在使用序列化模式来生成表单，对此我深表歉意。

基本上，`plone.supermodel`提供了一个导出/导入过程，它只能处理简单的值列表。

```
# line 263 in plone.supermodel.exportimport
term = SimpleTerm(token = encoded, value = value, title = value) 
```

解决方案是使用[命名词汇表](http://dexterity-developer-manual.readthedocs.org/en/latest/advanced/vocabularies.html#named-vocabularies)，它将对词汇表的引用序列化，而不是对词汇表本身进行序列化。

再次抱歉，由于缺少信息使调试变得更加困难。

# ruby-on-rails-3 - Rails link_to_add 在生产中失败

> ID：13944556
> 
> 赞同：4
> 
> 时间：2012-12-19T02:06:28.110
> 
> 标签：ruby-on-rails-3

link_to_add 生成的按钮是可点击的，但点击后不会在屏幕上为它们生成部分表单。从引导程序添加 modal.js 后，问题就开始了。目前，javascript 是使用以下方式加载的：

在布局中，还有：

```
gem 'jquery-rails', '~> 2.1.4' 
gem 'nested_form' 
```

在 gem 文件中，使用 rails 3.0.9。

本地使用开发模式没有问题，只有推送到 Heroku 才会出现问题。

跟踪正在发生的事情，我发现任何 javascript 中都没有发生错误，但我确实注意到这发生在涉及 add_to_link 的任何源的底部：

```
<div data-blueprint="&lt;div class=&quot;fields&quot;&gt;   &lt;div class=&quot;w450 eboxw&quot;&gt;
    &lt;table style=&quot;width:100%;&quot; class=&quot;copy reg&quot;&gt;
     &lt;tr&gt;
        &lt;td&gt;&lt;label class=&quot;copy 
```

我相信这应该是 link_to_add 操作的目标，而且它包含这么多看似不正确的字符的事实让我感到不安。

我已经阅读了关于我认为我没有为应用程序设置的资产管道，任何配置提示或可能发生这种情况的可能原因都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:13:04.890

我认为您需要在上传到 Heroku 之前预编译资产。是你做的吗？你可以使用 Rails 3.2，然后预编译，然后上传吗？

# java - Java 初学者：这是最佳实践（随机和条件）吗？

> ID：13944560
> 
> 赞同：0
> 
> 时间：2012-12-19T02:07:17.037
> 
> 标签：java, string, if-statement, random

我刚刚开始学习 Java，并且一直在尝试一些想法。我编写了以下一小段代码，运行时会输出房屋中的不同房间。房间由一个介于 1 和 3 之间的随机整数决定。代码似乎工作得很好。然而，由于我是编程新手，我担心的是我可能误解了其中一个指导我工作的教程，并使用了一种低效的方式来完成它。

谁能告诉我我是否使用最佳实践来实现我想要的结果并解释我可以做出的任何更改以使代码更好？

```
import java.util.Random;

public class Rooms {

  public static void main(String[] args) {

  Random random = new Random();
  int roomNumber = random.nextInt(3) + 1;
  String getRoom = "";

  if (roomNumber == 1) {
    getRoom = "Living Room";
  } else if (roomNumber == 2) {
    getRoom = "Kitchen";
  } else if (roomNumber == 3) {
    getRoom = "Bathroom";
  }

  System.out.println(getRoom);

  }
} 
```

感谢您阅读本文。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T02:11:05.373

您可以简单地将其`rooms`放入一个数组中：

```
String[] rooms = { "Living Room", "Kitchen", "Bathroom" };
int roomNumber = random.nextInt(rooms.length);
System.out.println(rooms[roomNumber]); 
```

**背景：** [Random.nextInt(n)](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)将`int`参数作为上限，它返回`0`和（但不包括）*n*之间的整数。使用`rooms.length`此处将允许您从数组中选择一个随机索引，而不会导致`ArrayIndexOutOfBoundsException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:12:16.973

你的代码很好。我唯一可以推荐的是：使用switch而不是multiple-if和else更快，但是当你随机运行一次时，这并不重要。如果您需要，该开关：

```
switch (roomNumber) {
    case 1:  getRoom = "Living Room";
             break;
    case 2:  getRoom = "Kitchen";
             break;
    case 3:  getRoom = "Bathroom";
             break;   
    default: getRoom = "Error!";
             break;
} 
```

您也可以使用列表或数组。数组也会加快你的速度，如果你定义了元素的数量，总是使用数组。

```
String[] rooms = new String[]{"Living Room", "Kitchen", "Bathroom"};
getRoom = rooms[random.nextInt(rooms.length)]; 
```

# android - 片段中的活动为空，因为 recreate()

> ID：13944561
> 
> 赞同：3
> 
> 时间：2012-12-19T02:07:45.717
> 
> 标签：android, android-activity, android-viewpager, fragment

我的应用程序正在使用`fragments`handle by创建`ViewPager`。我使用第 2 页`ViewPager`作为主题菜单。

`sharedPreference`我使用第 2 页中`recreate();`的片段更改主题。

我的问题是，第 2 页有，从第 2 页`animation`更改后，将无法正常工作，因为需要显示它。`recreate();``animation``animation``activity`

我试过用`startActivity()`，页面回到第1页（指第一页）

有没有办法恢复活动？

或者无论如何要实现**更改主题**页面`animation`？

# yahoo-api - 从 yahoo 邮件 api 下载附件

> ID：13944563
> 
> 赞同：1
> 
> 时间：2012-12-19T02:08:18.850
> 
> 标签：yahoo-api, yahoo-mail

我应该如何**构建和组合 oauth 令牌以**从[Yahoo Mail API](http://developer.yahoo.com/mail/docs/user_guide/DownloadAttachment.html#)下载附件？任何 java 示例或链接都会有很大帮助。

对于列表消息等其他命令，我可以构造为 JSON。

```
{
  "method": "ListMessages",
  "params":
  [
    {
      "fid": "Inbox",
      "startMid": 0,
      "numMid": 10,
      "startInfo": 0,
      "numInfo": 1
    }
  ],
  "id": 1234567890
} 
```

# java - 使用 SolrJ 查询 Solr 服务器

> ID：13944567
> 
> 赞同：4
> 
> 时间：2012-12-19T02:09:05.480
> 
> 标签：java, solr, solrj

我正在尝试使用 SolrJ 根据[此问题](https://stackoverflow.com/questions/11143188/solrj-select-all)中提供的代码查询我的 solr 数据库，但它不断抛出空指针异常。

我的代码是：

```
@PUT
@Produces(MediaType.TEXT_PLAIN)
public String returnText(String url) throws MalformedURLException, SolrServerException{
    SolrServer server = new HttpSolrServer("http://localhost:8080/apache-solr-1.4.0");

    ModifiableSolrParams params = new ModifiableSolrParams();
    params.set("?q", "*:*");
    params.set("facet", true);
    params.set("rows", 5);

    QueryResponse response = server.query(params);
    System.out.println(response);
    return "success";
} 
```

如果我在浏览器中运行这个 url:`http://localhost:8080/apache-solr-1.4.0/select/?q=*:*&facet=true&rows=5`那么它会返回正确的值但是如果我输入:`http://localhost:8080/apache-solr-1.4.0/select/q=*:*&facet=true&rows=5`那么我会得到与在 eclipse 中运行它时完全相同的错误，错误是：

```
19/12/2012 1:09:01 PM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
org.apache.solr.client.solrj.SolrServerException: Server at http://localhost:8080/apache-solr-1.4.0 returned non ok status:500, message:null  java.lang.NullPointerException    at java.io.StringReader.<init>(StringReader.java:33)    at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:197)    at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:78)  at org.apache.solr.search.QParser.getQuery(QParser.java:131)    at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:89)     at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:174)    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:338)  at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:241)     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:277)  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)  at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)  at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)   at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:332)    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:233)  at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)     at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:693)     at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:954)   at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:170)   at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:135)    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:102)  at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88)   at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76)    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53)    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57)    at com.sun.grizzly.ContextTask.run(ContextTask.java:69)     at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)   at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)  at java.lang.Thread.run(Thread.java:619)
    at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:328)
    at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:211)
    at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:89)
    at org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:311)
    at geoportal.webservice.download.returnText(download.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    ....... 
```

如果我将代码更改为，`params.set("q","*:*");`则会收到此错误：

```
19/12/2012 1:13:30 PM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
org.apache.solr.client.solrj.SolrServerException: Error executing query
    at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:95)
    at org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:311)
    at geoportal.webservice.download.returnText(download.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      ....... 
```

关于我做错了什么有什么想法吗？

非常感谢

**编辑**

[这是我基于此](http://wiki.constellio.com/index.php/Solrj_example)的 solrQuery 的新代码：

```
@PUT
@Produces(MediaType.TEXT_PLAIN)
public String returnText(String url) throws MalformedURLException, SolrServerException{
    SolrServer server = new HttpSolrServer("http://localhost:8080/apache-solr-1.4.0");
    SolrQuery query = new SolrQuery();

    query.setQuery("*:*");
    query.setFacet(true);
    query.set("wt", "json");
    query.setRows(5);
    query.setStart(0);

    QueryResponse response = server.query(query);

    System.out.println(response);
    return "success";
} 
```

但它仍然无法正常工作:(控制台输出：

```
19/12/2012 2:24:33 PM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
org.apache.solr.client.solrj.SolrServerException: Error executing query
    at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:95)
    at org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:311)
    at geoportal.webservice.download.returnText(download.java:39)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
          ...... 
```

**编辑**

我在我的代码中放了一个`System.out.println(query.toString());`，它输出：

```
q=*%3A*&facet=true&wt=json&rows=5&start=0 
```

如果我在我的浏览器中输入这个

```
http://localhost:8080/apache-solr-1.4.0/select/q=*%3A*&facet=true&wt=json&rows=5&start=0 
```

然后它再次抛出一个空指针异常。`?`但是，如果我在前面手动输入 a ，`q=*%3A*...`它就可以工作。所以我假设我的 solr 服务器需要这个`?`（这是因为它太旧了吗？），有没有办法硬编码一个？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T02:17:09.980

尝试使用[SolrQuery](http://lucene.apache.org/solr/4_5_0/solr-solrj/org/apache/solr/client/solrj/SolrQuery.html)对象而不是 ModifiableSolrParams。也许会有所帮助。

如果您因任何原因无法使用 SolrQuery，请尝试使用静态名称，例如“CommonParams.Q”，而不是硬编码的名称，例如“?q”

已编辑

我测试了您的问题，我认为您的应用程序服务器缺少配置。

您使用的是 JBoss 7.1 吗？您需要在 .standalone.sh 或 Standalone.bat 中添加一行，告诉您 solr 在哪里。例如，在 Jboss 7.1 中，在默认配置中，您必须将 \"-Dsolr.solr.home=$SOLR_HOME/example/solr\" \ 添加到standalone.sh

我不知道其他应用服务器，但你可以搜索一下，看看你如何在另一个 AS 中做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-06T13:48:43.403

尝试使用 SolrQuery，您可以选择设置查询、过滤器、构面、开始、行等所有内容。下面是示例代码

在最新的 solr 6.2.1 上，您可以创建如下所示的 solr 客户端：

```
SolrClient solr = new HttpSolrClient.Builder("<url>").build();

SolrQuery query = new SolrQuery();
query.setQuery("collector:" + input);
query.addFilterQuery("(doc_type:" + entity + ")");
query.addSort("lastUpdatedAt", ORDER.desc);
query.setFacet(true);
query.setStart(pagenumber);
query.setRows(pagesize);
QueryResponse response = solr.query(query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T02:18:14.203

您可能没有相同版本的 Solr 和 SolrJ。

使用如此古老的 Solr 版本可能会让您做出错误的决定。

您未能检查 Solr 日志以找出 500 的来源。

您正在使用 ModifiableSolrParams 而不是 SolrQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-16T08:57:07.730

正如前面的评论建议尝试使用 SolrQuery。这是可能有助于[solrj示例的链接](https://prismoskills.appspot.com/lessons/Solr/Chapter_04_-_Solrj_Example.jsp)

我认为你错过了`response.getResults();` 这将返回一个`SolrDocumentList`你可以使用 Iterator 处理的并循环遍历结果，例如：

```
SolrDocumentList docs = response.getResults();

Iterator<SolrDocument> iter = docs.iterator();
while (iter.hasNext())
{
// handle results
} 
```

# jquery - 我可以将我的主页用于带有条件弹出 div 的 404 页面吗？

> ID：13944572
> 
> 赞同：3
> 
> 时间：2012-12-19T02:10:12.317
> 
> 标签：jquery, http-status-code-404

我刚刚在 htaccess 中做了以下操作：

```
ErrorDocument 404 http://www.website.com 
```

我的第一个问题是，我可以这样做吗？

如果将 404 重定向到主页有任何 SEO/等问题，请告诉我。

**第二个问题：**

问题是我有一个单页网站，我想保持这种状态。

我想做的是`div`显示一个弹出窗口，作为 404 页面的替代品。

所以基本上 404 被重定向到主页，然后弹出一个弹出窗口，其中包含任何 404 消息。

我怎么能触发弹出窗口？jquery 代码必须以某种方式知道用户由于 404 而最终到达这里。这甚至可行吗？

（我可以管理弹出窗口本身，但如何告诉它在 404 发生后显示。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T02:19:05.580

您可以将查询字符串添加到用作 404 页面的 URL。

### .htaccess

```
ErrorDocument 404 http://www.website.com?page=fourOhFour 
```

然后，检查变量是否设置为正确的值，如果是，请在 javascript 中创建一个变量。

### Javascript/PHP

```
<script>
  is404 = "<?php echo $_GET['page'] ?>";
  if (is404 === "fourOhFour"){
    // jQuery popup code here
  }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T02:44:09.727

扩展[克里斯赫伯特的答案](https://stackoverflow.com/a/13944632/887539)。

仅使用 JS：

```
<script>
  var is404 = location.href.search(/(\?|&)page=fourOhFour(\&|$)/g) =! -1;
  if ( is404 ) {
      // jQuery popup code here
  }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:16:06.367

谢谢各位，非常感谢。

我最终这样做略有不同。为了有用，我会在这里发布。

访问：

```
 ErrorDocument 404 http://www.website.com/#404-not-found 
```

查询：

```
 if (window.location.hash == '#404-not-found') {
 setTimeout(function () { 
 $("#pageNotFound").slideDown(2222, 'easeOutBounce'); 
 }, 2888);  //delay
 } 
```

所以现在只要出现 404 错误，一个漂亮的 div 就会向下滑动。

# google-bigquery - BigQuery 对整个数据集给出响应太大错误，但对等效子查询没有

> ID：13944573
> 
> 赞同：1
> 
> 时间：2012-12-19T02:10:13.680
> 
> 标签：google-bigquery

我在 BigQuery 中有一个包含以下字段的表：

```
time,a,b,c,d 
```

`time`是一个 ISO8601 格式的字符串，但是有一个空格，`a`是一个从 1 到 16000 的整数，其他列是字符串。该表包含一个月的数据，每天有几百万条记录。

以下查询因“响应太大”而失败：

```
select UTC_USEC_TO_DAY(PARSE_UTC_USEC(time)) as day,b,c,d,count(a),count(distinct a, 1000000)
from [myproject.mytable]
group by day,b,c,d
order by day,b,c,d asc 
```

但是，此查询有效（数据从 2012-01-01 开始）

```
select UTC_USEC_TO_DAY(PARSE_UTC_USEC(time)) as day,
  b,c,d,count(a),count(distinct a)
from [myproject.mytable]
where UTC_USEC_TO_DAY(PARSE_UTC_USEC(time)) = UTC_USEC_TO_DAY(PARSE_UTC_USEC('2012-01-01 00:00:00'))
group by day,b,c,d
order by day,b,c,d asc 
```

这看起来可能与[这个问题](https://stackoverflow.com/questions/11022256/bigquery-error-response-too-large-to-return-when-using-countdistinct)有关。但是，由于该`group by`子句，顶部查询相当于重复调用第二个查询。查询规划器无法处理这个问题吗？

**编辑：**澄清我的测试数据：

我正在使用我生成的假测试数据。我最初使用了几个字段并尝试获取一个月的每小时摘要（`group by hour`，其中小时是在查询部分中定义`as`的`select`）。当失败时，我尝试切换到每日。当失败时，我减少了所涉及的列。使用 a 时也失败了`count (distinct xxx, 1000000)`，但是当我只做了一天的工作时它就起作用了。（如果我删除`1000000`参数，它也可以工作，但由于这*确实*适用于一日查询，因此查询计划程序似乎没有像我预期的那样分离事物。）

检查的`count (distinct)`基数为 16,000，按列分组的基数为 2 和 20，总共只有 1200 行。列值很短，大约十个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:49:45.087

你期望有多少结果？当前允许的结果总大小限制为大约 64MB。如果您期望结果有数百万行，那么这可能是预期的错误。

如果结果的数量不是很大，可能是大小问题不是最终响应，而是内部计算。具体来说，如果 GROUP BY 的结果过多，则查询可能会耗尽内存。一种可能的解决方案是将“GROUP BY”更改为“GOUP EACH BY”，这会改变查询的执行方式。这是目前处于试验阶段的功能，因此尚未记录在案。

对于您的查询，由于您引用了 group by 中 select 中命名的字段，因此您可能需要执行以下操作：

```
select day, b,c,d,day,count(a),count(distinct a, 1000000) 
FROM (
    select UTC_USEC_TO_DAY(PARSE_UTC_USEC(time)) as day, b, c, d
    from [myproject.mytable]
)
group EACH by day,b,c,d
order by day,b,c,d asc 
```

# java - 将项目导出到 jar 文件时如何包含我的图标

> ID：13944574
> 
> 赞同：8
> 
> 时间：2012-12-19T02:10:20.597
> 
> 标签：java, swing, jar, embedded-resource

我开发了一个桌面应用程序。问题是当我将应用程序导出到 jar 文件时，应用程序中未显示图标。当我从 Eclipse 运行它时，所有图标都显示在那里。

我的项目中的一个例子：

```
package net.ebank.gui;

import java.awt.*;
import javax.swing.*;

public class EBank extends JFrame {

    protected Start s;

    public EBank() {

        setTitle("Welcome To EBank");

        setBackground(Color.white);

        Image img = new ImageIcon("../EBank/res/bank.jpg").getImage();
        this.setIconImage(img);

        /*"com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel"
        "com.sun.java.swing.plaf.windows.WindowsLookAndFeel"*/

        setVisible(false);

        setSize(1350,700);

        setDefaultCloseOperation(this.EXIT_ON_CLOSE);

        try {

            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException e) {

            // TODO Auto-generated catch block

            e.printStackTrace();
        } catch (InstantiationException e) {

            // TODO Auto-generated catch block

            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block

            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        s= new Start(this);

        s.setLocation(getWidth()/2, getHeight()/4);

    }

    public static void main(String[] args){
        new EBank();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T04:42:55.677

为了使其工作，请按照下列步骤操作：

*   在项目资源管理器树中右键单击您的项目。
*   转到新建 -> 源文件夹，然后为源文件夹提供任何名称。
*   现在手动将你的东西添加到你创建的这个源文件夹中，就像如果你想添加图像然后创建一个新文件夹，通过文件系统手动访问这个源文件夹。
*   将此新文件夹命名为图像并将您的图像复制到此文件夹。
*   现在回到您的 Eclipse IDE 并从 Project Explorer 中刷新您的项目，方法是右键单击您的项目，在这里您现在可以在刷新后看到您添加的内容。
*   现在为了访问，说任何图像，你将使用。

    ```
    getClass().getResource("/images/yourImageName.extension"); 
    ```

这将返回一个 URL 对象。请记住第**一个正斜杠**，在这种情况下，因为您的**源文件夹**中的任何内容都可以在此帮助下访问，用更简单的术语来说。现在，当您运行您的项目时，此 Source 文件夹的内容将自动添加到 bin 文件夹中，当您创建一个**Runnable Jar**时，您的**Source 文件夹**中的内容可以按原样访问。

在这个链接上，我试图用图像来解释[如何将图像添加到您的 Eclipse 项目中](http://gagandeepbali.uk.to/gaganisonline/webpages/makejareclipse.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T02:17:03.243

使用[`Class#getResource()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)而不是将相对路径传递给`ImageIcon`构造函数。

还要确保图像文件实际上是生成的 JAR 的一部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T02:32:57.017

您可以修复 JAR 文件的布局，也就是像在 Eclipse 中一样相应地排列文件夹，或者按照 Matt Ball 所说的那样使用`[Class#getResource](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29 "Class#getResource")`or `[Class#getResourceAsStream](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29 "Class#getResourceAsStream")`.

# html - 保持绝对定位的 DIV 内的内容居中（在父容器内）

> ID：13944575
> 
> 赞同：3
> 
> 时间：2012-12-19T02:10:31.853
> 
> 标签：html, css, css-position

我有一个固定宽度和居中的容器。在容器内部，我有两个相对于窗口并排的 DIV 位置。在这些 Div 中，我还有其他想要居中的内容（最好是容器）。

这是简化的代码：http: [//jsfiddle.net/jTpGs/](http://jsfiddle.net/jTpGs/)

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<style>
 #container {
 width: 960px;
 height: 1000px;
 background: red;
 margin: 0 auto;
 }  

#windowdiv {
height: 200px;
background: purple;
padding-top: 20px;
position: absolute;
left: 0;
right: 30%;
top: 25px;
}
#windowdiv2 {
height: 200px;
background: blue;
padding-top: 20px;
position: absolute;
left: 60%;
right: 0;
top: 10px;

}

</style>
</head>
<body>
  <div id='container'>

     <div id='windowdiv'>
        <p>some content</p>
     </div>
     <div id='windowdiv2'>
       <p>some content</p>
     </div>
 </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:29:42.600

将此添加到您的 CSS 以使您的文本在这些框的中间居中：

```
​#windowdiv p, #windowdiv2 p {
    ​text-align: center;
    ​height: 100%;
    ​line-height: 180px;   
}​ 
```

这是假设您的盒子是固定高度的，因为我们设置了行高。(200px - 20px (padding-top) = 180px)

# python - 如何捕捉窗口照片（缩略图）？

> ID：13944581
> 
> 赞同：2
> 
> 时间：2012-12-19T02:11:28.567
> 
> 标签：python, windows

我想在 windows os 中使用 python 获取我已经拥有它的句柄（hwnd）的窗口的照片（缩略图）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:28:48.500

从[我在您的问题评论中发布的链接中，](https://stackoverflow.com/questions/3260559/how-to-get-a-window-or-fullscreen-screenshot-in-python-3k-without-pil)我能够获得一个示例，该示例可以缩略图我的 python 解释器窗口。

```
from PIL import ImageGrab, Image
import win32gui

hwnd = 2622054 # My python intepreter window
thumbnailsize = 128, 128

# Set the current window to your window
win32gui.SetForegroundWindow(hwnd)
# Get the size of the window rect.
bbox = win32gui.GetWindowRect(hwnd)
# Grab the image using PIL and thumbnail.
img = ImageGrab.grab(bbox)
img.thumbnail(thumbnailsize, Image.ANTIALIAS)
# Save.
img.save('c:/test/test.png') 
```

# php - 将变量添加到 Flash 播放嵌入的视频代码中

> ID：13944583
> 
> 赞同：0
> 
> 时间：2012-12-19T02:11:56.210
> 
> 标签：php, javascript, html, flash

它实际上适用于 Chrome 和 Safari，但是 ie8 和 firefox 无法识别该`$video`变量。是否有不同的语法使它们更有可能与这些浏览器一起使用。

```
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="swfobject/swfobject.js"></script>
    <script type="text/javascript">

            swfobject.registerObject("myFlashContent", "9.0.0");

    </script>
 </head>
   <?php $video="monday.mp4"; ?>
<body>
   <div>
<object width="600" height="409">
<param name="movie"value="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf">              
</param>
<param name="flashvars" value="src=http%3A%2F%2F81.107.65.42%2Fmonday.mp4"></param>
 <param name="allowFullScreen" value="true"></param><param name="allowscriptaccess"  
              value="always"></param> 
  <embed src="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf"    
              type="application/x-shockwave-flash" allowscriptaccess="always"
              allowfullscreen="true"    
              width="600" height="409" flashvars="src=http%3A%2F%2Fmydomain%2F"
              <?php $video; ?></embed></object>
     </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:24:01.623

既然它看起来是硬编码的，为什么不试试 html5 视频标签呢？

```
<video width="320" height="240" controls>
  <source src="monday.mp4" type="video/mp4">
Your browser does not support the video tag.
</video> 
```

# php - 比较两个数组PHP中的多个值

> ID：13944592
> 
> 赞同：3
> 
> 时间：2012-12-19T02:13:44.657
> 
> 标签：php, arrays, foreach, nested, nested-loops

我有两个 MySQL 数据库，并想使用 PHP 变量比较数据。我连接到数据库并使用 PDO 分配变量：

```
//Database 1
include_once('client-config.php');
try {
    $conn = new PDO(DB_HOST, DB_USER, DB_PASSWORD, array(PDO::ATTR_PERSISTENT => TRUE));
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$DB_Name = "pencuy204";
$login = $_SESSION['SESS_login'];
$qry = "SELECT `BetType`, `RiskAmount`, `WinAmount`, `BetDate`, `GameDate`, `BetRotation`, `TeamParticipant`, `MoneyLine`, `Spread`, `OverUnder`
        FROM `{$login}_bet`"; 
$result = $conn->query($qry);

// If the SQL query is succesfully performed ($result not false)
if ($result !== false) {
// Parse the result set, and adds each row and colums in HTML table
    foreach ($result as $row) {
        $BetType[] = $row['BetType'];
        $BetRiskAmount[] = $row['RiskAmount'];
        $BetWinAmount[] = $row['WinAmount'];
        $BetGameDate[] = strtotime($row['GameDate']);
        $BetTeamParticipant[] = $row['TeamParticipant'];
        $BetMoneyLine[] = $row['MoneyLine'];
        $BetSpread[] = $row['Spread'];
        $BetOverUnder[] = $row['OverUnder'];
    }
}

//Database 2
try {
    require_once('bet-config.php'); 
    $conn1 = new PDO(B_DB_HOST, B_DB_USER, B_DB_PASSWORD);
    $conn1->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}   

date_default_timezone_set('CST');
$today = date("Y-m-d"); 
$qry = "SELECT `AwayTeam`, `AwayScore`, `HomeTeam`, `HomeScore`, `FeedDate` FROM games";
$checkit = $conn1->query($qry);

if ($checkit !== false) {
    foreach($checkit as $row1) {
        $AwayTeam[] = $row1['AwayTeam'];
        $HomeTeam[] = $row1['HomeTeam'];
        $AwayScoreData[] = $row1['AwayScore'];
        $HomeScoreData[] = $row1['HomeScore'];
        $FeedDate[] = strtotime($row1['FeedDate']);
    }
} 
```

我想做的是遍历数据库 1 中某些 PHP 数组中的每个值，比较它们在数据库 2 中某些数组中的每个值。这是我正在处理的循环示例：

```
for ($i = 0; $i <= $count; $i++) { 
    foreach ($BetGameDate as $b) {
        if (($b == $FeedDate[$i])) {
            foreach ($BetTeamParticipant as $team) {
                if (($team == $AwayTeam[$i])) {
                    foreach ($BetType as $type) {
                        if (($type == "Money Line")) {
                            if ($AwayScoreData[$i] < $HomeScoreData[$i]) {
                                $BetV[] = "-" . $BetRiskAmount[$i];
                                $BetC[] = intval('$BetV');
                            }

                            if ($AwayScoreData[$i] > $HomeScoreData[$i]) {
                                $BetV[] = "+" . $BetWinAmount[$i];
                                $BetC[] = intval('$BetV');
                            }

                            if ($AwayScoreData[$i] == $HomeScoreData[$i]) {
                                $BetV[] = 0;
                                $BetC[] = intval('$BetV');
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

在此特定示例中，如果`$GameBetDate`等于`$FeedDate`，则投注球队名称等于客队名称，并且投注类型等于某个字符串，然后根据该特定投注的风险金额或获胜金额计算投注（行）在数据库 1 中。我觉得我对 foreach 的使用是正确的，但是如何正确使用迭代的 for 循环来循环遍历数据库 2 中的所有值与数据库 1 中的特定值，如果条件匹配，使用数据库 1 中的值来计算`$BetC`和`BetV`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:57:18.277

我认为您可以在代码中使用一些重构。要比较值，您可以使用 array_diff 方法。您从第一个表中选择值，（PDO 可以返回数组）选择第二个值并比较...

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

# syntax - 使用 RemoveAll() 释放嵌套的 Scripting.Dictionary

> ID：13944597
> 
> 赞同：2
> 
> 时间：2012-12-19T02:14:01.153
> 
> 标签：syntax, dictionary, vb6, removeall

我发现这里的主题回答了一半的问题： [Scripting.Dictionary 的 RemoveAll() 方法是否首先释放其所有元素？](https://stackoverflow.com/questions/75011/does-scripting-dictionarys-removeall-method-release-all-of-its-elements-first)

在我的例子中，值是 Dictionary 的实例，所以我有 Dictionary 对象的嵌套层次结构。

我的问题是我是否需要在每个子词典上调用 RemoveAll ？

```
' just for illustration
Dim d As Dictionary
Set d = New Dictionary

Set d("a") = New Dictionary
Set d("b") = New Dictionary

' Are the next section of code necessary?
' -------------------- section start
Dim key As Variant
For Each key In d
    d.Item(key).RemoveAll
Next
' -------------------- section end

d.RemoveAll
Set d = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:17:36.703

Consider this code

```
Option Explicit

Private m_cCache As Collection

Private Sub Form_Load()
    ' just for illustration
    Dim d As Dictionary
    Set d = New Dictionary

    Set d("a") = New Dictionary
    Set d("b") = New Dictionary

    d("b").Add "c", 123
    SomeMethod d

    ' Are the next section of code necessary?
    ' -------------------- section start
    Dim key As Variant
    For Each key In d
        d.Item(key).RemoveAll
    Next
    ' -------------------- section end

    d.RemoveAll             '--- d("b") survives
    Set d = Nothing         '--- d survives

    Debug.Print "main="; m_cCache("main").Count, "child="; m_cCache("child").Count
End Sub

Private Sub SomeMethod(d As Dictionary)
    Set m_cCache = New Collection

    m_cCache.Add d, "main"
    m_cCache.Add d("b"), "child"
End Sub 
```

Without cleanup section d("b") will be virtually untouched -- neither children removed, nor instance terminated.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T07:06:36.947

在 VB6 中，所有对象（通过 COM）都受到引用计数，因此，除非有循环，否则您不需要手动处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T21:35:24.773

好的，我想我可以用我做的下一个测试来回答自己。

```
Sub Main()
  Dim d As Dictionary
  Dim i, j As Integer
  Dim sDummy As String * 10000
  For i = 1 To 1000
    Set d = New Dictionary      ' root dict.
    Set d("a") = New Dictionary ' child dict.
    For j = 1 To 1000
      d("a").Add j, sDummy
    Next j
    'd("a").RemoveAll
    d.RemoveAll
    Set d = Nothing
  Next i
End Sub 
```

我注释掉`d("a").RemoveAll`（我的子字典）并且没有任何内存泄漏。这意味着调用`RemoveAll`根 ( `d`) 就足够了，这就是我需要知道的全部内容。

# ruby - Webrick 和 Apache 在一台服务器中

> ID：13944598
> 
> 赞同：3
> 
> 时间：2012-12-19T02:14:02.880
> 
> 标签：ruby, apache, http, webrick

我有一个在端口 80 上运行 Apache 服务器和在端口 9090 上运行 Webrick Web 应用程序的服务器。每当我通过使用 终止进程来停止 Webrick 服务器时，`kill -9 12345`Webrick`12345`的 PID 在哪里，我无法再次重新启动 Web 应用程序，因为端口 9090 被另一个进程“自动”使用，这令人惊讶的是 Apache 服务器。

目前，我必须先停止并重新启动 Apache 服务器，然后才能重新启动我的 Webrick 网络应用程序，这非常烦人。这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T02:20:41.490

切换 webrick 或 apache 的端口。Apache Tomcat 默认使用端口 9090。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T19:04:48.943

和`kill -9 id`你一起真的杀死了这个过程......所以它没有机会说“再见”。所以apache没有机会意识到连接的另一端已经消失（或者需要一段时间）

尝试一个简单的`kill id`之前，仅`kill -9`在进程挂起时 使用

# ios - UISearchBar 没有从 UITableView 过滤自定义单元格图像

> ID：13944599
> 
> 赞同：4
> 
> 时间：2012-12-19T02:14:09.640
> 
> 标签：ios, xcode, uitableview, uisearchbar

我正在尝试使用搜索栏过滤 TableView。TableView 有一个自定义原型单元格，该单元格有一个 Imageview 和一个标签，因此可以调用它。标签隐藏在图像下方。

我有两个数组，每个数组有 94 个项目。当没有搜索任何内容时，它工作正常。表格视图以完美的顺序显示图像/单元格。

当我搜索某些东西时，结果总是会返回适当数量的单元格。但是，图像本身没有被过滤。这意味着无论标签过滤了哪些单元格，图像都将始终相同。

这是我的 UISearchBar 代码的问题吗？

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {    
    if (searchText.length == 0) {
       isFiltered = NO;    
     }    else    {
       isFiltered = YES;
       filteredHeroes = [[NSMutableArray alloc]init];

       for (NSString *str in totalHeroData)    {

           NSRange heroRange = [str rangeOfString:searchText  options:NSCaseInsensitiveSearch];

           if (heroRange.location != NSNotFound) {
               [filteredHeroes addObject:str];

           }
       }    }    [self.HeroTableView reloadData]; } 
```

我很乐意提供任何其他资源。请记住，我有两个 94 项数组。如果我需要链接它们，我也想知道如何做到这一点。

谢谢你。

编辑：这是 Cellforrowatindexpath 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath 
*)indexPath {    
       static NSString *CellIdentifier = @"heroTableCell";
       HeroTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];    
       if (cell == nil) {
       cell = [[HeroTableViewCell alloc]
               initWithStyle:UITableViewCellStyleDefault
               reuseIdentifier: CellIdentifier];    
       }
       // Configure the cell...
       cell.textLabel.text = [self.heroNames objectAtIndex:indexPath.row];            
       cell.imageView.image = [UIImage imageNamed:[self.heroImages objectAtIndex:indexPath.row]];

       return cell; 
   } 
```

感谢您的提问-让我知道您的想法：）我花了大约 10 个小时在网上搜索：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:30:45.267

您应该使用一个 nsmutuable 数组并添加包含一个键 imagename 和一个键 Name 作为字符串的 nsdictionary

[filteredHeroes addObject:[NSDictionary dictionaryWithObjectsAndKeys:name,@"Name",ImageName,@"Image", nil]];
在 cellForRowAtIndexPath 中使用相同的 filteredHeroes 并使用键 Name 过滤相同的数组并重新加载 TableData 并完成。

# r - R中未知的非线性项

> ID：13944606
> 
> 赞同：6
> 
> 时间：2012-12-19T02:15:43.023
> 
> 标签：r, regression, gnm

我有一个逻辑回归使用`glm`，我想添加一个形式的术语

c [1] (k+ac [2] )/(t+c [2] )

其中 k 和 t 是数据框中的列，a 是常数。我希望 R 找到 c [1]和 c [2]的最佳拟合值。这可能吗？

如果我只想要一个固定值，比如 c [2] = 2，

c [1] (k+2a)/(t+2)

我可以写

```
glm( model$y ~ I((model$k + 2*a)/(model$t + 2)) + model$otherterms,
  family = binomial(logit) ) 
```

这类似于我现在正在做的事情。但我不认为 2 是最优的，并且“手动”迭代非常耗时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:38:02.923

您可以使用包 gnm 中的函数**gnm**。

```
gnm(y~Mult(1, # c1
           offset(k)+1,# c3=a*c2 
           Inv(offset(t)+1)) # c2
           +other terms, 
    family=binomial, 
    data=models) 
```

编辑（约束系数的解决方案）

```
term_fun <- function(predLabels, varLabels){
                     paste0(predLabels[1],"*(",varLabels[1],
                            "+",predLabels[2],"*3)/(", # a=3 for example
                            varLabels[2],"+", predLabels[3],")")}

  Ratio <- function(t,x){
   list(predictors = list(C1 = 1, C2 = 1),
        variables = list(substitute(t), substitute(x)),
        term = term_fun)
  }
  class(Ratio) <- "nonlin"

  fit <- gnm(Y~Ratio(k,t), data=models, family=binomial) 
```

# php - SQL中if条件内的WHERE语句

> ID：13944608
> 
> 赞同：1
> 
> 时间：2012-12-19T02:15:46.453
> 
> 标签：php, sql

我可以在 IF 语句中执行 WHERE 子句吗？

就像我想要这样的东西：

```
 $SQL = mysql_query("SELECT * FROM `table` ORDER BY `row` DESC");
     $rows = mysql_fetch_array($SQL);
     $email = $_SESSION['email_of_user'];

        if($rows["row"] == "1" WHERE `row`='$email' : ?> (Pulls the logged in user's email)
        Edit Server
        <?php  else : ?>
        Add Server
        <?php endif; ?> 
```

我需要 (" WHERE 语句在哪里吗？因为我试过了，但它似乎没有用......

或者我可以在 where 子句中使用 if 条件吗？不确定所有这些术语，如果我错了，请纠正我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:21:00.503

您不能将**查询语句与 PHP 的语句**混淆。而是编写一个提取所需结果的查询，并检查该查询中是否有任何行。

我将向您展示一个示例：

```
$query = "SELECT * FROM `TABLE_NAME` WHERE `field` = '1' && `email`='$email'"; //Create similar query
$result = mysqli_query($query, $link); //Query the server
if(mysqli_num_rows($result)) { //Check if there are rows
    $authenticated = true; //if there is, set a boolean variable to denote the authentication
}

//Then do what you want
if($authenticated) {
     echo "Edit Server";
} else {
     echo "Add Server";
} 
```

由于 Aaron 在我的示例中表现出鼓励安全代码的努力。以下是您可以安全地执行此操作的方法。PDO 库提供了以安全方式将参数绑定到查询语句的选项。所以，这里是如何做到这一点。

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass); //Create the connection

//Create the Query Statemetn
$sth = $dbh->prepare('SELECT * FROM `TABLE_NAME` WHERE field = :field AND email = :email');

//Binds Parameters in the safe way
$sth -> bindParam(':field', 1, PDO::PARAM_INT);
$sth -> bindParam(':email', $email, PDO::PARAM_STRING);

//Then Execute the statement
$sth->execute();

$result = $sth->fetchAll(); //This returns the result set as an associative array 
```

# xcode - 回去后的空白放映

> ID：13944616
> 
> 赞同：0
> 
> 时间：2012-12-19T02:16:39.060
> 
> 标签：xcode, image, screen, collision

我最近用 Xcode 创建了一个应用程序。当 2 个图像发生碰撞时，它会将我发送到一个新屏幕（这很好）。但是，当我按下按钮返回原始视图时，它变为空白。你能告诉我为什么吗？任何反馈表示赞赏。

这是来自第一个 .h 文件的代码：

# 进口

@接口视图控制器：UIViewController {

```
IBOutlet UIImageView *image1;
IBOutlet UIImageView *image2; 
```

}

@property (nonatomic, 保留) UIImageView *image1; @property (nonatomic, 保留) UIImageView *image2;

-（无效）碰撞；

@结尾

从.m：

# 导入“ViewController.h”

# 导入“newview.h”

@interface 视图控制器 ()

@结尾

@implementation 视图控制器

@合成图像1，图像2；

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

```
UITouch *mytouch = [[event allTouches] anyObject];
image1.center = [mytouch locationInView:self.view];

[self collision]; 
```

}

-（无效）碰撞{

```
if (CGRectIntersectsRect(image1.frame, image2.frame)) {
    newview *second = [[newview alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:second animated:YES];

} 
```

}

这是来自第二个 .h 的代码（带有返回按钮的那个）：

*   （IBAction）重试：（id）发件人；

并从.m：

# 导入“newview.h”

# 导入“ViewController.h”

@interface 新视图 ()

@结尾

@实现新视图

*   （IBAction）重试：（id）发件人{

    ViewController *second = [[ViewController alloc] initWithNibName:nil bundle:nil]; [self presentModalViewController：第二个动画：YES]；

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:20:33.360

空白屏幕是 (IBAction)retry:(id)sender 的另一个模式视图。

你应该使用 [self dismissModalViewControllerAnimated:YES]; 在 (IBAction)retry:(id)sender 中返回上一个屏幕，而不是呈现另一个模态视图。

# msgbox - 在 C# 中，msgbox 没有显示

> ID：13944618
> 
> 赞同：-1
> 
> 时间：2012-12-19T02:17:01.867
> 
> 标签：msgbox

下面是我在 C# 中的部分代码，它假设发送电子邮件，显示 msg 框，然后直接到“Multihotelbook.aspx”页面，但直接到页面而不显示 msgbox。我不知道为什么。需要帮忙

emailClient.Send(消息);

```
 // Response.Write("<script>window.alert('Email sent')</script>");
                //ClientScript.RegisterStartupScript(typeof(Page), "myscript", "<script>alert('Email sent');</script>");
                // System.Windows.Forms.MessageBox.Show("Email sent");
               // MessageBox.Show("Email sent");
               // MessageBoxResult result = MessageBox.Show("Email sent", "Confirmation");

            //ClientScript.RegisterStartupScript(typeof(Page), "myscript", "<script>alert('Email sent');</script>");
            //ScriptManager.RegisterStartupScript(this, typeof(string), "Message", "confirm('Email sent');", true);
            //ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "KEY", "alert('Email sent')", true);
            Page.ClientScript.RegisterStartupScript(typeof(string), "alert", "<script>alert('Email sent')</script>");
            Response.Redirect("Multihotelbook.aspx"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:27:11.400

这...看起来像 ASP.NET 代码。ASP.NET中没有`MessageBox`。请注意，您必须完全引用`System.Windows.Forms`，我想您还必须将其添加为引用。Windows 窗体和 ASP.NET 是两个*非常*不同的东西。

你到底想完成什么？显示一个 JavaScript `alert()`？如果是这种情况，那么您可以在响应中包含一些额外的 JavaScript 代码。

除了......你也在这样做：

```
Response.Redirect("Multihotelbook.aspx"); 
```

这意味着对客户端的响应被一个告诉客户端转到`Multihotelbook.aspx`. 因此，客户永远不会看到您在响应中包含的任何其他内容，基本上是`RegisterStartupScript`.

执行此代码后，客户端将在`Multihotelbook.aspx`. 除非该页面上有 JavaScript ，否则`alert()`浏览器不会显示 JavaScript。

您可以尝试的一种方法是将标志传递给`Multihotelbook.aspx`，类似于`Multihotelbook.aspx?emailSent=true`和 在该`Page_Load`页面检查该值，如果设置为 true，则在页面中包含 JavaScript 代码以显示`alert()`（可能`RegisterStartupScript`像您已经尝试过的那样使用）。

# python-2.7 - 向 PyInstaller 生成的 exe 添加文本文件

> ID：13944620
> 
> 赞同：2
> 
> 时间：2012-12-19T02:17:02.163
> 
> 标签：python-2.7, pyinstaller

我有一个相当有趣的问题，我一直在尝试寻找解决方法，但到目前为止，我还没有找到解决方案。我目前已经使用 Python 构建了一个 GUI 程序，更具体地说是使用 Tkinter，它将生成一个文件，其中包含我的程序按指定顺序重复的命令列表，同时等待指定的时间长短。它基本上用于创建一个宏，该宏记录在一个文件中，以后可以使用程序中的另一个函数运行。

我想添加到我的程序中的是一种创建 .exe 文件的方式，该文件是一个独立文件，可以在其中运行脚本。不过，我找不到这样做的好方法的原因是我需要动态创建它。我想我想做的是提前使用 PyInstaller 生成一个 .exe（独立宏 exe），然后也使用 PyInstaller 将它打包到我的主 .exe 中。当您选择创建独立宏的选项时，它将继续从解压缩到程序运行时的目录中将我打包到主 .exe 中的 .exe（独立宏 exe）获取，将其复制到要保存独立 exe 的所需位置，然后复制用户希望作为独立运行的脚本并将其打包到独立 exe 中。

我不知道该怎么做，因为我不确定 PyInstaller 在打包文件时究竟是如何将文件放入 .exe 的。因此，我不知道如何使用 python 将文件添加到现有的 .exe 中。

基本上我需要帮助的是如何将文本文件添加到由 PyInstaller 生成的 .exe 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:00:43.830

嗯，

你能澄清一下……你在想像 Perl 的东西吗（今天 25 岁生日）*（Larry Wall 的骆驼书，p44）句柄还是 Bash *HERE*文档？*

 ***更新**（基于下面的讨论）：这会将 python 文件和其他外部性集成到一个可安装的文件中：

[http://www.pyinstaller.org/export/d3398dd79b68901ae1edd761f3fe0f4ff19cfb1a/project/doc/Manual.html?format=raw#create-a-spec-file-for-your-project](http://www.pyinstaller.org/export/d3398dd79b68901ae1edd761f3fe0f4ff19cfb1a/project/doc/Manual.html?format=raw#create-a-spec-file-for-your-project)

[http://www.pyinstaller.org/export/d3398dd79b68901ae1edd761f3fe0f4ff19cfb1a/project/doc/images/SE_exe.png](http://www.pyinstaller.org/export/d3398dd79b68901ae1edd761f3fe0f4ff19cfb1a/project/doc/images/SE_exe.png)*

# javascript - 在 Mustache 模板中转义双括号 {{ ... }}。（在 NodeJS 中模板化模板）

> ID：13944623
> 
> 赞同：36
> 
> 时间：2012-12-19T02:17:32.430
> 
> 标签：javascript, node.js, template-engine, mustache

我正在尝试模板模板，如下所示：

```
{{{
{
  "name" : "{{name}}",
  "description" : "{{description}}"
}
}}}

{{{debug this}}} 
```

```
<h1>{{name}}</h1> 
```

我想保留三重括号，但要用传入的 JSON 替换双括号。任何人都知道在不编写后处理 JS 代码的情况下执行此操作的最佳方法，如果没有，是否有一个好的 nodeJS 模板引擎用于此场景类型？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-12-13T16:01:30.170

如[本问题](https://stackoverflow.com/questions/14324850/how-to-change-the-default-delimiter-of-handlebars-js)中所述，车把不支持更改分隔符。但是你**可以**用这样的反斜杠来转义双括号：

HTML：

```
... \{{ myHandlbarsVar }} ... 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-12-19T08:33:53.567

您可以将分隔符切换为不会与三重胡须冲突的内容，例如 erb 样式标签：

```
{{=<% %>=}}
{{{
{
  "name": "<% name %>",
  "description": "<% description %>"
}
}}}
{{{debug this}}}
<%={{ }}=%> 
```

请注意，您可以在整个模板中多次执行此操作。每当您遇到冲突时，请选择一组新的分隔符:)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-02-10T20:54:59.410

您也可以`Mustache.tags = ["[[", "]]"];`在模板编译之前进行分配。

[http://jsfiddle.net/fhwe4o8k/1/](http://jsfiddle.net/fhwe4o8k/1/)

例如

```
 $(function () {
        Mustache.tags = ["[[", "]]"];
        var template = $('#test').html();
        Mustache.parse(template);
        var rendered = Mustache.render(template, {test: "Chris"});
        $('#content-placeholder').html(rendered);
    }); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-10-26T20:37:21.987

另一种选择是创建一个用于输出大括号的助手。

```
Handlebars.registerHelper('curly', function(object, open) {
    return open ? '{' : '}';
}); 
```

然后像这样在模板中使用它：

```
<script id="template" type="text/x-handlebars-template">
    {{curly true}}{{name}}{{curly}}
</script> 
```

然后输出：

```
{Stack Over Flow Rocks} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-08T16:21:57.060

该模板包含 HTML，因此您可以使用 HTML 实体，例如用于大括号的 ASCII 代码 123 和 125：{{{myValue}}}

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-05-17T10:17:40.533

我只是想要稍微不同的方法。我尝试了其他一些方法，这里有一些我不喜欢它们的地方：

1.  将 Angular 默认`{{obj.property}}`括号更改为其他内容是个坏主意。主要是因为一旦您开始使用不知道您的非标准角度配置的第三方组件，这些第三方组件中的绑定将停止工作。还值得一提的是，AngularJS 团队似乎不想走允许多个绑定符号的路线，检查[这个问题](https://github.com/angular/angular.js/pull/1256)
2.  我非常喜欢 Mustache 模板，并且不想因为这个小问题而将整个项目切换到其他东西。
3.  相当多的人建议不要混合客户端和服务器端渲染。我不完全同意，我相信如果您正在构建一个多页网站，其中只有很少的有角度页面和其他一些静态页面（例如关于我们或条款和条件页面），使用服务器端模板制作是完全可以的更容易维护这些页面。但话虽如此，对于 Angular 的部分，您不应该混合服务器端渲染。

好的，不，我的回答：如果你使用的是 NodeJS 和 Express，你应该做到以下几点：

用类似（或完全独特`{{}}`的东西）替换角部分中的绑定`{[{}]}`

现在在你的路由中添加一个回调到你的渲染方法：

```
app.get('/', function(req, res){
  res.render('home', {
    title: 'Awesome Website',
    description: 'Uber Awesome Website'
  }, function(err, html){
    var htmlWithReplacedLeftBracket = html.replace(/{\[{/g, '{{');
    var finalHtml = htmlWithReplacedLeftBracket.replace(/}\]}/g, '}}');
    res.send(finalHtml);
  });
}); 
```

这应该允许您将 Mustache 与 AngularJS 一起使用。您可以做的一项改进是将该方法提取到一个单独的模块中，以便在所有路由中重用。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-12-24T20:33:21.770

这是我为此类问题找到的一个很好的解决方案，您可以在运行时轻松切换模板设置中的分隔符：

[http://olado.github.com/doT/](http://olado.github.com/doT/)

您可以像这样进行 RegEx 设置：

```
doT.templateSettings = {
  evaluate:    /\{\{([\s\S]+?)\}\}/g,
  interpolate: /\{\{=([\s\S]+?)\}\}/g,
  encode:      /\{\{!([\s\S]+?)\}\}/g,
  use:         /\{\{#([\s\S]+?)\}\}/g,
  define:      /\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,
  conditional: /\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,
  iterate:     /\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,
  varname: 'it',
  strip: true,
  append: true,
  selfcontained: false
}; 
```

# iphone - VMPinterest 不适用于 Ipad

> ID：13944626
> 
> 赞同：2
> 
> 时间：2012-12-19T02:18:18.730
> 
> 标签：iphone, objective-c, xcode, ipad, pinterest

我想将 Pinterest 集成到我的 ipad 和 iphone 版本的应用程序中。为此，我做了一些谷歌搜索并找到[了 VMPinterest](http://www.varshylmobile.com/pinterest-framework-for-ios#comment-4)框架。我下载了它的演示，它在 iphone 上运行良好，但不适用于 ipad 版本。

以下问题我找到了

**虽然我通过错误的电子邮件或通过，但它没有正确验证它每次都显示签名成功。**

**它无法获得董事会名称**

如果有人使用此框架用于 ipad，或者如果您有其他方式来集成 Pinterest，请帮助我而不是回答或评论。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:44:28.137

尝试从此链接下载此 API：[https ://github.com/Lascorbe/LASharekit](https://github.com/Lascorbe/LASharekit)

它对我来说工作正常。将其合并到您的应用程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:38:50.547

我下载了最新版本的 VMPinterest 框架（他们已经发布了一个新版本），它与 iPad 完美配合（我已经为 ipad mini 测试过）。

我会推荐 VMPinterest 框架。与其他人不同，它不会带您进入网页，而是直接让您远程发布图像。

他们还使用此框架发布了一个演示应用程序 - 在 appstore 上运行。应用程序链接[https://itunes.apple.com/us/app/vmpinterest/id607998053?ls=1&mt=8](https://itunes.apple.com/us/app/vmpinterest/id607998053?ls=1&mt=8)

所以该框架是应用商店批准的。

它兼容 iOS 4.3 及更高版本，可在 iPod touch/iPhone/iPhone5/iPad/iPad mini 上运行

有关功能的完整列表，请访问[Varshyl 移动](http://www.varshylmobile.com/pinterest-framework-for-ios/)网站

# javascript - 如何将 JSON 拆分为 2 个数组，然后将其传递给 getJSON 以供以后操作？

> ID：13944628
> 
> 赞同：1
> 
> 时间：2012-12-19T02:18:51.397
> 
> 标签：javascript, jquery, json

我有一个 json 数据，我正在尝试将其拆分为 2 组数据数组 一个 json 数据将保存“构造”数据值中的所有值，第二个 json 数据将保存数组的其余部分和产品、系统的值等等等等

在将其传递给 getJSON 之前，我想将其拆分为 2 个数组。一旦我将它们分成 2，然后将 restofJSONdata 传递给 getJSON，反之亦然

在将它们传递给 getJSON 之前，如何将它们拆分为 2 个数组？我当前的代码

```
 <script type="text/javascript">

    $(document).ready(function () // don't do anything until the document is loaded.
   {

           var baseUrl = "config.json";

           console.log(baseUrl.html.splice(3)); // remove and log the empty fieldset
                var constructgrp = baseUrl.html.shift(); // remove the first item (caption: "Construct")

                var restofJSONdata = baseUrl.html; 
               alert(constructgrp);

           $.getJSON(restofJSONdata, function (data) // call getJSON providing the complete url with search term and a JSONP callback
           {
               // console.log(data.html.splice(2,3));
              // console.log("data " +data);
              /*
               console.log(data.html.splice(3,0)); // remove and log the empty fieldset
                var constructgrp = data.html.shift(); // remove the first item (caption: "Construct")

                var restofJSONdata = data.html; 
               alert(constructgrp); :*/

               $("#demo-3-form").empty(); // clear out any previous results.
               if (data.html.length < 1) $('#demo-3-forms').html("No results. Nada. Nuttin. Zippo.");

               //$("#demo-3-form").empty(); // clear out any previous results.
              // if (data.html.length < 1) $('#demo-3-forms').html("No results. Nada. Nuttin. Zippo.");
            //   $.each(this.constructgrp, function () // iterate over the results, constructing the HTML for the display.
              // {
                /*
                     var html =constructgrp.type +' :';
                     html += '<b>'+constructgrp.caption +'</b><br>';

                     html += ' <br>';
                       $.each(constructgrp.html, function() {
                         //  alert(this.name);
                          html +='Title :' +this.title +'<br>';
                           html +='Name :' +this.name +'<br>';
                           html +='Value :' +this.value +'<br> ';
                           html +='Caption :' +this.caption +'<br><br> ';
                          // html += this.type +'<br><br> ';
                       });  
                   $('#demo-3-form').hide().append(html).fadeIn(800); // fade in the results over 2 seconds.
                   */
              // });

                $.each(restofJSONdata, function () // iterate over the results, constructing the HTML for the display.
               {

                     var html =this.type +' :';
                     html += '<b>'+this.caption +'</b><br>';

                     html += ' <br>';
                       $.each(this.html, function() {
                         //  alert(this.name);
                          html +='Title :' +this.title +'<br>';
                           html +='Name :' +this.name +'<br>';
                           html +='Value :' +this.value +'<br> ';
                           html +='Caption :' +this.caption +'<br><br> ';
                          // html += this.type +'<br><br> ';
                       });  
                   $('#demo-3-form').hide().append(html).fadeIn(800); // fade in the results over 2 seconds.
               });

           });
       //});
   });

    </script> 
```

JSON 代码 config.json

```
{
    "html": [{
        "type": "fieldset",
        "caption": "Construct",
        "html": [{
            "title": "tooltip data for rk",
            "name": "rk_",
            "value": "24",
            "caption": "DNS Servers (a list of IP addresses separated by comas)",
            "type": "textarea"
        }, {
            "title": "tooltip data for rk_ntpservers",
            "name": "rk_ntpservers",
            "value": "111.11.11.11",
            "caption": " separated by comas",
            "type": "textarea"
        }, {
            "title": "tooltip data for ff_eth0_ff",
            "name": "ff_eth0_ff",
            "value": "18",
            "caption": "Public  Address (0.0.0.0 to disable)",
            "type": "text"
        }, {
            "title": "tooltip data for ff_eth0_netmask",
            "name": "ff_eth0_netmask",
            "value": "2.2.2.0",
            "caption": "Public rk Netmask",
            "type": "text"
        }, {
            "title": "tooltip data for ff_eth1_ff",
            "name": "ff_eth1_ff",
            "value": "0.0.0.0",
            "caption": "MG Device rk (0.0.0.0 to disable)",
            "type": "text"
        }, {
            "title": "tooltip data for ff_eth1_netmask",
            "name": "ff_eth1_netmask",
            "value": "2.2.2.0",
            "caption": "MG Device rk Netmask",
            "type": "text"
        }, {
            "title": "tooltip data for ff",
            "name": "ff_gateway",
            "value": "1",
            "caption": "Gateway",
            "type": "text"
        }]
    }, {
        "type": "fieldset",
        "caption": "Product",
        "html": [{
            "title": "tooltip data for product_ident",
            "name": "product_ident",
            "value": "78",
            "caption": "Product Name",
            "type": "text",
            "disabled": "disabled"
        }, {
            "title": "tooltip data for product_svnversion",
            "name": "product_svnversion",
            "value": "7916",
            "caption": "Revision",
            "type": "text",
            "disabled": "disabled"
        }]
    }, {
        "type": "fieldset",
        "caption": "System ",
        "html": [{
            "title": "tooltip data for system_license",
            "name": "system_license",
            "value": "HH",
            "caption": "License",
            "type": "text"
        }, {
            "title": "tooltip data for system_variant",
            "name": "system_variant",
            "value": "normal",
            "caption": "Variant",
            "type": "text"
        }]
    }, {
        "type": "fieldset",
        "class": "btn-fieldset",
        "caption": "",
        "html": [{
            "type": "submit",
            "id": "submitbtn",
            "class": "btn btn-primary",
            "value": "Save"
        }]
    }]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:49:52.390

要将它们拆分为 2 个数组，然后再将其传递给 getJSON，您需要：

1.  获取 JSON
2.  将数据分成两部分

    ```
    var construct;

    $.getJSON('PATH_TO_config.json', function(data) {

        // splice will return first array and leaves rest in original data
        construct = data.html.splice(0, 1);

        // in the first parameter you have data.html[0] in the second
        // data.html[1..3] from the original JSON
        doSomethingWithData(construct, data.html);
    } 
    ```

# php - 从一组十六进制颜色中获取基色

> ID：13944629
> 
> 赞同：12
> 
> 时间：2012-12-19T02:18:54.280
> 
> 标签：php, colors

我有一套颜色，想把它们分解成 10 到 20种*基色*。

这不应该是传入的内容的托盘，而是独立于传入的内容。因此，如果使用的图像只是各种红色阴影，它将仅返回红色，可能带有浅/深红色。

EG：我的颜色是下面的框，输出示例为线条。所以在这个例子中，列表从 21 种颜色减少到 8 种。

![在此处输入图像描述](../Images/1edf315f4668dd63025beffb68bc17b1.png)

上面的十六进制值：

```
#000000
#ffffff
#003e9f
#d61517
#00a7bd
#001070
#a0210c
#dc9103
#e6151e
#fdfdfd
#011171
#fbfd10
#ffc500
#fdc605
#e6141d
#faf703
#544b20
#796a3a
#7a6b3a 
```

最终输出可能类似于此色轮的外环![在此处输入图像描述](../Images/e78a2002fda07e3b2991848fd0f902f7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T02:47:59.150

提前选择你的`base`颜色并制作一个数组 - 你可以使用色轮外圈的 12 个。使用关联数组作为输出的集合：对于每种输入颜色，找到最接近的基色并将其作为键添加到输出数组。然后返回该数组的键。

要找到颜色距离，您可以将颜色视为三维空间中的点，(x,y,z) = (r,g,b)，并使用欧几里得距离。从十六进制字符串中提取组件后，就像这样：

```
$dr = $r2 - $r1; 
$dg = $g2 - $g1; 
$db = $b2 - $b1; 
$dist = sqrt($dr * $dr + $dg * $dg + $db * $db); 
```

如果你愿意的话，你可以用八叉树做一些花哨的事情，但是用一小部分颜色循环它们并找到最小的距离就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:18:55.857

我认为如果您使用 hsla 表示法，这样做（和理解）会容易得多。

如果您的基色始终相同，您可以为色调参数定义 20 个值（基本上是从 0° 到 360° 的角度），并将所有不同的颜色分组为最接近的“基色”，仅使用色调。

如果您的基色取决于输入（在您的问题中不清楚），那么@Mark Reed 查找颜色距离的选项也可以在 hsl 中完成，仅使用色调，这将更准确的概念'颜色深浅'恕我直言。

> 注意：hsl 的便捷工具：http: [//mothereffehsl.com/](http://mothereffinghsl.com/)

# java - Java 反射 - 获取包列表

> ID：13944633
> 
> 赞同：14
> 
> 时间：2012-12-19T02:19:05.280
> 
> 标签：java, reflection

我正在构建一个包含许多不同包的 Java 应用程序。我希望能够以编程方式告诉应用程序中存在哪些以特定前缀开头的包。无论如何使用Java反射API来做到这一点？我没有看到与反射api相关的任何东西。

例子：

```
com.app.controls.text
com.app.controls.picker
com.app.controls.date
etc 
```

我想通过了解前缀“com.app.controls”来列举所有这些，并了解未来可能会集成一个新包。

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-19T02:25:46.490

您可以使用[Package.getPackages()](http://docs.oracle.com/javase/7/docs/api/java/lang/Package.html#getPackages%28%29)来做到这一点，它返回当前类加载器已知的所有包的数组。您必须手动遍历数组并使用[getName()](http://docs.oracle.com/javase/7/docs/api/java/lang/Package.html#getName%28%29)找到具有适当前缀的数组。

这是一个简单的例子：

```
public List<String> findPackageNamesStartingWith(String prefix) {
    return Package.getPackages().stream()
        .map(Package::getName)
        .filter(n -> n.startsWith(prefix))
        .collect(toList());
} 
```

请注意，此技术将仅返回当前类加载器中定义的包。如果您需要来自不同类加载器的包，有一些选项：

1.  安排一些事情，以便您的程序可以从该类加载器内部运行上述代码。这需要对您的代码库进行特定组织，这可能可行，也可能不可行。

2.  使用反射在适当的类加载器上调用（通常受保护的）方法[getPackages() 。](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getPackages%28%29)如果程序在安全管理器下运行，这将不起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-27T12:41:31.960

根据[Sean 的回答](https://stackoverflow.com/a/13944677/853744)并使用反射来获取包列表 - 可能忽略空包：

```
/**
 * Finds all package names starting with prefix
 * @return Set of package names
 */
public Set<String> findAllPackagesStartingWith(String prefix) {
    List<ClassLoader> classLoadersList = new LinkedList<ClassLoader>();
    classLoadersList.add(ClasspathHelper.contextClassLoader());
    classLoadersList.add(ClasspathHelper.staticClassLoader());
    Reflections reflections = new Reflections(new ConfigurationBuilder()
            .setScanners(new SubTypesScanner(false), new ResourcesScanner())
            .setUrls(ClasspathHelper.forClassLoader(classLoadersList.toArray(new ClassLoader[0])))
            .filterInputsBy(new FilterBuilder().include(FilterBuilder.prefix("my.base.package"))));
    Set<Class<? extends Object>> classes = reflections.getSubTypesOf(Object.class);

    Set<String> packageNameSet = new TreeSet<String>();
    for (Class classInstance : classes) {
        String packageName = classInstance.getPackage().getName();
        if (packageName.startsWith(prefix)) {
            packageNameSet.add(packageName);
        }
    }
    return packageNameSet;
} 
```

# c - 在 C 中是 & 逻辑与 (&&) 的简写？

> ID：13944637
> 
> 赞同：4
> 
> 时间：2012-12-19T02:19:26.100
> 
> 标签：c, logical-operators

有时我想做这样的事情（i 和 j 是整数）。

```
(if i==4 && j==9)
{
   ...
} 
```

如果 i 等于 4 且 j 等于 9，它将通过方括号。我一直在使用单与号 (&) 而不是双一，并且我的代码一直在编译和运行。

它是否与双 && 做同样的事情，如果不是，它一直在做什么？

编辑：哦，我一直在用 or 做同样的事情，使用 '|' 而不是'||'

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T02:25:49.230

Presumably you mean `if (i==4 && j==9)`.

Under the circumstances, changing this from `&&` to `&` shouldn't change *much*. The big thing that'll change is that with `&&`, the `j==9` would only be evaluated if the `i==4` part was true, but with `&`, they'll both be evaluated regardless.

When you have something like `if (x != NULL && x->whatever ...)` you want to ensure that the second part (that dereferences `x`) is only evaluated if `x` is not a null pointer. In your case, however, comparing what appear to be `int`s is unlikely to produce any problems.

It's also possible to run into a problem when you're dealing with something that may produce a value other than `1` to signal `true`. Again, it's not a problem here because `==` will always produce either `0` or `1`. If (for example) you were using `isalpha`, `islower`, etc., from `<ctype.h>`, they're only required to produce `0` or non-zero values. If you combined those with a `&`, you'd get a bit-wise `or` which could produce 0 for two non-zero inputs (e.g., `1 & 2 == 0`, but `1 && 2 == 1`).

When you use bitwise `and` on the results from `==`, you're going to get `0 & 0` or `0 & 1` or `1 & 0` or `1 & 1`. `1 & 1` will yield `1` (true). All the others will yield 0 (false) --- just like `&&` would have.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T02:21:08.583

它正在执行[按位 AND](http://en.wikipedia.org/wiki/Bitwise_operations_in_C)。

它所做的是表达式`i == 4`等价于`1`if `i`is`4`并且对于 RHS 相同（显然带有`j`and `9`）。`&`运算符返回两个操作数都有该位的数字。

它的工作原理与`&&`因为`00000001 & 00000001`（例如缩小到一个字节）相同。如果一个是`0`（条件为假），则`&`不会看到两个操作数都打开了两个位，并且`00000000`is `0`，这是*falsey*。

**但是**，不要简单地使用`&`，因为它*比一个字符短*或相似。使用它，因为它表达了您想要实现的目标。如果它是您想要的逻辑 AND，请使用`&&`.

同样的事情适用于`|`，除了如果每个操作数都打开它而不是结果位，它会在任一操作数打开该位时打开它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T02:22:20.240

单个 & 符号执行按位与。仅当两个操作数在该位置都为 1 时，才会设置结果的每一位。

Since comparisons in C return 1 for true and 0 for false, `&` will give the same results as `&&` as long as both operands are comparisons. But for arbitrary values, it will return seemingly random results. `1 && 2` is true, but `1 & 2` is false because the binary representations of 1 and 2 have no bits in common.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T02:21:33.297

单个＆符号称为按位与。它是一个二进制运算符，逐位“与”两个数字。

例如，如果你有两个二进制数，01100010 和 00011111，你的按位和将导致 00000010

i==4 返回 1（真），j==9 也是如此。因此，i==4 & j==9 实际上只是 1 & 1，其计算结果为 1（真）。

试试这些例子看看有什么不同

1) 整数 k = 4 & 6; vs int k = 4 && 6;

2) if(i==4 && 2) 与 if(i==4 & 2)

# jquery - JQuery Mobile 列表视图中的动态项 - data.prevPage.attr

> ID：13944638
> 
> 赞同：1
> 
> 时间：2012-12-19T02:19:35.543
> 
> 标签：jquery, listview, jquery-mobile

向 JQM 列表视图添加动态选项在`page1`. 添加后，listview被刷新：

```
$('#list').listview('refresh'); 
```

选项链接到`page2`。在`page2`我有`pagebeforeshow`事件：

```
$('#page2').live('pagebeforeshow', function (e, data) {
    alert(data.prevPage.attr('id'));
}); 
```

`data.prevPage.attr('id')`is undefined when the option selected was the one added dynamically. 但对于另一种选择，完全没有问题。

`page1`为什么在列表视图中选择动态添加的选项时无法获取id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:50:40.793

您的代码应该可以工作，看看这个例子：http: [//jsfiddle.net/Gajotres/c2dU4/](http://jsfiddle.net/Gajotres/c2dU4/)。我已经重新创建了您的案例，一切正常。

例子：

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#custom-list').append('<li><a href="#second">Link 4</a></li>');
    $('#custom-list').listview('refresh');
});

$("#second").live('pagebeforeshow', function (e,data) {
    alert(data.prevPage.attr('id'));
}); 
```

您是否可能试图通过 href 传递一些额外的数据？你能告诉我们更多你的代码吗？

# logback - Logback AyncAppender 不打印文件和行号

> ID：13944641
> 
> 赞同：12
> 
> 时间：2012-12-19T02:20:05.283
> 
> 标签：logback, fileappender

我有以下配置文件，它与 Logback 手册中的标准示例非常相似。唯一的区别是添加了 [%F:%L]。虽然一切正常，但 %F 和 %L 不起作用。如果我删除异步附加程序并直接使用文件附加程序记录，一切都会很好。

有人可以解释发生了什么吗？以及如何打印这两个参数应该的文件名和行号？

```
<configuration>
  <appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>myapp.log</file>
    <encoder><pattern>%logger{35} - [%F:%L] - %msg%n</pattern></encoder>
    </appender>
    <appender name="ASYNC" class="ch.qos.logback.classic.AsyncAppender">
         <appender-ref ref="FILE" />
    </appender>
   <root level="DEBUG"><appender-ref ref="ASYNC" /></root>
 </configuration> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-19T09:18:56.223

您需要将 AsyncAppender 的[includeCallerData](http://logback.qos.ch/manual/appenders.html#asyncIncludeCallerData)属性设置为 true。这是修改后的配置文件：

```
<configuration>
    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
      <file>myapp.log</file>
      <encoder><pattern>%logger{35} - [%F:%L] - %msg%n</pattern></encoder>
    </appender>

    <appender name="ASYNC" class="ch.qos.logback.classic.AsyncAppender">
      <appender-ref ref="FILE" />
      <!-- add the following line -->
      <includeCallerData>true</includeCallerData>
    </appender>

    <root level="DEBUG"><appender-ref ref="ASYNC" /></root>
 </configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T02:24:08.733

对于像我这样想要 groovy 风格的人，我以 groovy 格式发布相同的答案。

```
appender('FILE', ch.qos.logback.core.FileAppender) {
    file = 'myapp.log'
    encoder(PatternLayoutEncoder) {
        pattern = '%logger{35} - [%F:%L] - %msg%n'
    }
}
appender('ASYNC', ch.qos.logback.classic.AsyncAppender) {
    appenderRef('FILE')
    //add the following line
    includeCallerData = true
}

root(DEBUG, ['ASYNC']) 
```

# objective-c - 如何在objective-c中找出输入是数字还是文本？

> ID：13944643
> 
> 赞同：5
> 
> 时间：2012-12-19T02:20:20.633
> 
> 标签：objective-c, ios, exception, numbers, identification

我试过搜索，但我认为我的谷歌技术不够好，所以我正在寻求人们的帮助。我正在扫描一个字符串并获取每个元素。我需要找出它是数字还是文本。我以这种方式进行了检查：

```
// Try to convert to double
@try{
double whatever=[myString doubleValue];

// If text is stored in myString, then it should throw an exception
} @catch (NSException *e){

// Do whatever I need, but here I know that it's text, not a number

} 
```

但是我发现Objective-C不会抛出异常，它只是返回0。我不能依赖用户不会使用零作为输入这一事实，我该怎么办？

提前谢谢，我很确定有这样的踏板，我只是没有找到它们......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:23:31.857

转换为双精度并返回字符串。如果它匹配源，那么它是一个双。小心前导和尾随空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T03:57:10.390

尝试这个：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];

NSNumber *number = [formatter numberFromString:myString];

if (number) {
  // it's a number
} else {
  // it's not a number
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T02:27:16.200

您可以使用[NSScanner](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)类来确定您是否`double`使用此方法有效：

```
- (BOOL)scanDouble:(double *)doubleValue 
```

一旦你用你的字符串初始化了你的扫描仪。

* * *

为什么`(double *)`？
因为您希望该方法向您返回 2 个信息，`the doubleValue`并且`is it a valid double`. 后者由 BOOL 给出，对于前者，只有指针可以从方法调用中获取值（除了返回值）

> **参数**
> doubleValue
> 返回时，包含扫描的值。上溢时包含 HUGE_VAL 或 –HUGE_VAL，下溢时包含 0.0。
> **返回值**
> 如果接收方找到有效的浮点表示，则返回 YES，否则返回 NO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T02:50:56.107

**例子：**

```
NSError* error;
NSString* string=@"10";
NSNumberFormatter* formatter=[NSNumberFormatter new];
formatter.numberStyle= NSNumberFormatterDecimalStyle; // set whatever style you need
NSNumber* number;
if([formatter getObjectValue: &number forString: string errorDescription: &error])
{
    // You got the number
    NSLog(@"%@",number);
}
else
{
    // haven't got the number, the string is invalid
    NSLog(@"%@",error);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T02:33:36.683

```
NSMutableString *stringElement = [NSMutableString stringWithCapacity:[yourString length]];
for (int i=0; i<[yourString length]; i++) {
    if (isdigit([stringElement characterAtIndex:i])) {
      //is digit
    }
} 
```

# dapper - 让 Dapper 返回一个空字符串而不是一个空字符串

> ID：13944651
> 
> 赞同：7
> 
> 时间：2012-12-19T02:21:04.577
> 
> 标签：dapper

我知道这是一种错误的做法，但我正在处理具有 NULLS 的遗留代码库，当它表示空字符串时，反之亦然。

我无法立即看到它是如何可能的，但是当从数据库映射回来时，是否有可能获取（或修改 dapper 以便它会）返回一个空字符串而不是空字符串。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T07:41:45.900

*Dapper 在看到null*时不会调用任何 setter ，因此选项可能包括：

*   `""`在构造函数中设置默认值
*   `null`在访问器中检查

所以：

```
public class SomeDto
{
    public SomeDto()
    {
        Name = "";
    }
    public string Name {get;set;}
} 
```

或者：

```
public class SomeDto
{
    private string name;
    public string Name { get {return name ?? "";} set {name = value;} }
} 
```

但是，这只适用于*读取*值；当将 dto 作为参数对象传递时，我想不出一种让 dapper 变成的*好方法；*选项包括：`""``null`

*   创建一个匿名类型，替换`""`为`null`（也许写一个`string NullIfBlank(this string s)`扩展方法）
*   `null`在返回的类型上有一个 shim 属性`""`，并让您的数据库查询绑定到`@NameOrNull`而不是`@Name`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T05:48:56.810

您可以通过查询来控制它，例如：

```
 public class Data
    {
        public string Foo { get; set; }
    }

    var result = conn.Query<Data>("select Foo = coalesce(Foo, '') from MyTable"); 
```

所以在上面的例子中，当 Foo 为 null 时，coalesce 将返回一个空字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T02:28:25.600

**简而言之：**根据您将数据加载到 dapper 的方式，您可能会遇到两种不同的情况。

**首先：**打开您的数据提供者层，例如在这篇文章中 -[如何从 Dapper 查询中返回 null 而不是 default(T)？](https://stackoverflow.com/q/11720611/1437962).

**第二种**尝试方法：您可以`GetTypeDeserializer`在以下帖子中修改您的喜欢 -[更改 Dapper 以便将数据库空值映射到 double.NaN](https://stackoverflow.com/q/9334365/1437962)

**第三个**也是最后一个：我的友好建议是提高您以前的问题接受率。通过这种方式，您可以增加回答您的问题的机会。

希望这一切都会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T08:43:34.797

我倾向于在名为 ConvertNull() 的**字符串**上使用全局扩展方法，它将任何空值转换为空字符串。然后，您可以在任何地方调用它，而不会让您的代码看起来杂乱无章。如果您直接在 aspx 页面上使用它，只需确保您已导入扩展方法的命名空间，然后该方法将可供您使用：

```
namespace ExtensionMethods
{
    using System;

    public static class StringExtensionsClass
    {
        /// <summary>Converts null strings to empty strings</summary>
        /// <param name="s">Input string</param>
        /// <returns>Original string, or empty string if original string was null</returns>
        public static string ConvertNull(this string s)
        {
            return s ?? "";
        }
    }
} 
```

然后在一个字符串的**实例上调用它。**

用法：

`myStringInstance.ConvertNull().Replace("\r\n", "<br />");`

# django - django：为什么我不能将 twitter.Twitter 对象存储到会话中

> ID：13944655
> 
> 赞同：1
> 
> 时间：2012-12-19T02:21:24.563
> 
> 标签：django, session, object, twitter

我创建了一个 twitter.Twitter 对象，但无法将其存储到会话中。以下是我的代码。

```
t = twitter.Twitter(auth=twitter.OAuth(consumer_key, consumer_secret, 
    oauth_token, oauth_secret))    
request.session['t'] = t 
```

但是如果我存储一个字符串

```
request.session['t'] = 't' 
```

它有效，为什么？因为 twitter#Twitter 对象不是可序列化的对象？当我需要 twitter#Twitter 对象时，如何避免每次都进行身份验证？以下是 django 跟踪。

```
Django Version: 1.3.1
Python Version: 2.6.6
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'myproj.myapp']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  178\.                 response = middleware_method(request, response)
File "/usr/lib/python2.6/site-packages/django/contrib/sessions/middleware.py" in process_response
  36\.                 request.session.save()
File "/usr/lib/python2.6/site-packages/django/contrib/sessions/backends/file.py" in save
  121\.                     os.write(output_file_fd, self.encode(session_data))
File "/usr/lib/python2.6/site-packages/django/contrib/sessions/backends/base.py" in encode
  93\.         pickled = pickle.dumps(session_dict, pickle.HIGHEST_PROTOCOL)
File "/usr/lib/python2.6/site-packages/twitter-1.9.0-py2.6.egg/twitter/api.py" in __call__
  173\.         return self._handle_response(req, uri, arg_data)
File "/usr/lib/python2.6/site-packages/twitter-1.9.0-py2.6.egg/twitter/api.py" in _handle_response
  198\.                 raise TwitterHTTPError(e, uri, self.format, arg_data)

Exception Type: TwitterHTTPError at /tool/log_in/
Exception Value: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:31:14.023

正如您所猜测的那样，您只能存储可[腌制](http://docs.python.org/2.7/library/pickle.html#pickle)对象。

从[文档](https://docs.djangoproject.com/en/1.4/topics/http/sessions/#technical-details)

> 会话字典应该接受任何可腌制的 Python 对象。有关更多信息，请参阅 pickle 模块。

# iphone - 将 ZXing 连接到 xcode 中的按钮

> ID：13944658
> 
> 赞同：8
> 
> 时间：2012-12-19T02:21:55.800
> 
> 标签：iphone, ios, xcode, button, zxing

我是编程新手，所以我敢肯定这个问题非常基本（请耐心等待！）

我刚刚将 zxing 安装到我当前的 xcode 4.5 项目中。我花了一段时间来解决这些错误，但我终于明白了。

我创建了一个名为“scan”的按钮，我希望在其中调用 zxing。我怎样才能做到这一点？

我尝试查看我在源文件中实现的文件，但无法确定要使用哪些类和方法。

是的，我尝试用谷歌搜索这个非常基本的概念，但什么也没找到:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:48:30.727

这是您需要在扫描按钮操作中添加的代码。

```
- (IBAction)scanPressed:(id)sender
 {

            ZXingWidgetController *widController = [[ZXingWidgetController alloc]  initWithDelegate:self showCancel:YES OneDMode:NO];

            NSMutableSet *readers = [[NSMutableSet alloc ] init];

            <#if ZXQR>

                QRCodeReader* qrcodeReader = [[QRCodeReader alloc] init];
                [readers addObject:qrcodeReader];

           <#endif>

           <#if ZXAZ>
                AztecReader *aztecReader = [[AztecReader alloc] init];
                [readers addObject:aztecReader];

           <#endif>

                widController.readers = readers;

                [self presentModalViewController:widController animated:YES];

} 
```

在您的应用中使用此代码之前，请删除“<>”符号。

# boolean - UpdateNonDefaults 忽略设置为 false 的布尔参数

> ID：13944659
> 
> 赞同：4
> 
> 时间：2012-12-19T02:22:06.040
> 
> 标签：boolean, ormlite-servicestack

我正在尝试使用 UpdateNonDefaults 更新我的 SQL Server 2012 Express DB 中的记录。从 SQL 语句中可以看出，设置为 false 的布尔字段将被忽略。

如何使用 UpdateNonDefaults 将布尔字段的 DB 值设置为 false？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T13:35:30.950

请发布您的代码，否则我们无法判断出什么问题...

尝试：

```
[Default(typeof(bool?), null)] 
public bool? Foo {get;set;} 
```

或尝试：

```
[Default(typeof(int?), null)] 
public int? Foo {get; set;} 
```

看看有没有效果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T16:39:39.157

作为一种解决方法，我已将“bool”数据类型更改为“string”，并使用 bool.FalseString 和 bool.TrueString 来设置我的值。不太好...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T17:10:58.067

当您调用 UpdateNonDefaults 方法时，它会通过 SqlExpression.cs 中的 ToUpdateStatement 方法生成 sql

```
public virtual string ToUpdateStatement(T item, bool excludeDefaults = false)
{
    var setFields = new StringBuilder();

    foreach (var fieldDef in modelDef.FieldDefinitions)
    {
        if (fieldDef.ShouldSkipUpdate()) continue;
        if (fieldDef.IsRowVersion) continue;
        if (updateFields.Count > 0 && !updateFields.Contains(fieldDef.Name)) continue; // added

        var value = fieldDef.GetValue(item);
        if (excludeDefaults && (value == null || value.Equals(value.GetType().GetDefaultValue()))) continue; //GetDefaultValue?

        fieldDef.GetQuotedValue(item, DialectProvider);

        if (setFields.Length > 0)
            setFields.Append(", ");

        setFields
            .Append(DialectProvider.GetQuotedColumnName(fieldDef.FieldName))
            .Append("=")
            .Append(DialectProvider.GetQuotedValue(value, fieldDef.FieldType));
    }

    return string.Format("UPDATE {0} SET {1} {2}",
        DialectProvider.GetQuotedTableName(modelDef), setFields, WhereExpression);
} 
```

请注意以下行：

```
if (excludeDefaults && (value == null || value.Equals(value.GetType().GetDefaultValue()))) continue; //GetDefaultValue? 
```

当您将可为空的布尔值从 true 更新为 false 时，这里的值为**fasle** **，**并且**value.GetType()**实际上是**typeof(bool)**而**不是 typeof(bool?)**，所以 value.GetType().GetDefaultValue() 总是错误的。然后，忽略此列...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T00:20:52.113

这不是理想的解决方案，但我使用[此处](https://github.com/ServiceStack/ServiceStack.OrmLite#update)提到的匿名类型来更新可为空的布尔字段并且它有效。

> 限制更新字段的一种方法是使用匿名类型：
> 
> ```
> db.Update<Person>(new { FirstName = "JJ" }, p => p.LastName == "Hendrix"); 
> ```

有谁知道为什么 UpdateNonDefaults 不会将布尔值更新为 false？

# javascript - 读起来像 javascript 对象 attr:val 对的 CSS 类

> ID：13944667
> 
> 赞同：-1
> 
> 时间：2012-12-19T02:23:26.723
> 
> 标签：javascript, css

我遇到了一些独特的 css 类属性：HTML 标记中的值对。看起来一些自定义 JavaScript 正在解释这个，但我以前从未见过这个。我在[www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)上看到了这个（你必须查看源代码才能看到以下内容）

```
 <pre class="brush: js; toolbar: false; gutter: false;"> 
```

这是一个可以自由使用的自定义库或 javascript 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:48:11.367

显然它来自那里使用的语法荧光笔。所以是的，一些 JavaScript 正在解释它。实际上，在属性中编码键/值对在`class`HTML5 属性之前非常普遍`data-`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:49:56.480

正如您在源代码中看到的那样，使用这些类的是[http://alexgorbatchev.com/SyntaxHighlighter 。](http://alexgorbatchev.com/SyntaxHighlighter)

# java - Setter 和 Getter 函数。在安卓中。性能开销？

> ID：13944669
> 
> 赞同：13
> 
> 时间：2012-12-19T02:23:57.183
> 
> 标签：java, android, setter, getter

在我学习 Java 标准版的时候，getter 和 setter 函数经常被用来隐藏变量并减少对它们的直接访问。有几个消息来源告诉我，在 Android 中你不应该使用这些函数，而只能直接修改变量。原因是在 Android 中使用 getter 和 setter 时会因开销而导致性能损失。导致更多的内存使用并减慢系统速度。

有没有道理呢？如果有，为什么使用 getter 和 setter 会造成性能损失？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T02:33:06.190

[在此处](http://developer.android.com/training/articles/perf-tips.html#GettersSetters)找到的文档中，使用 getter 和 setter 在 android 中是一个坏主意。正如它所说，

> 这在 Android 上是个坏主意。虚拟方法调用很昂贵，比实例字段查找要贵得多。遵循常见的面向对象编程实践并在公共接口中使用 getter 和 setter 是合理的，但在类中，您应该始终直接访问字段。

[在此处](http://developer.android.com/training/articles/perf-tips.html#internal_get_set)查找有关性能的更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T02:35:40.187

根据 Google android 团队提供的性能提示：

> 如果没有 JIT，直接字段访问比调用普通 getter 快大约 3 倍。使用 JIT（直接字段访问与访问本地一样便宜），直接字段访问比调用普通 getter 快约 7 倍。

但是，我确实同意良好的编码实践更为重要，并且团队还提到：

> 请注意，如果您使用 ProGuard，则可以两全其美，因为 ProGuard 可以为您内联访问器。

因此我认为可以使用 getter 和 setter ;)

[参考](http://developer.android.com/training/articles/perf-tips.html#GettersSetters)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T02:30:53.163

setter 和 getter 的性能损失可以忽略不计。公共字段是不好的做法，违反了数据封装和信息隐藏的面向对象原则。

使用 setter 或 getter 需要一个属性调用，而不是直接访问该字段。这没什么，所以不用担心——专注于编写好的代码。

编辑：

为了澄清，这是来自其他海报引用的同一个 android 文档：

> 遵循常见的面向对象编程实践并在公共接口中使用 getter 和 setter 是合理的，但在类中，您应该始终直接访问字段。

换句话说，您仍然需要 getter 和 setter。您应该尽量避免从包含这些方法的类中调用它们，因为您可以直接访问该字段。

# javascript - 当 onclick 返回 false 时触发谷歌地图点击事件

> ID：13944671
> 
> 赞同：0
> 
> 时间：2012-12-19T02:24:08.620
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我正在为 api v3 使用 Redfin 的快速标记覆盖。

以他们的可点击示例为例，

[https://code.google.com/p/multimarker/source/browse/trunk/fast-marker-overlay/maps-v3/example/clickable.html?r=22](https://code.google.com/p/multimarker/source/browse/trunk/fast-marker-overlay/maps-v3/example/clickable.html?r=22)

我像这样向 initialize() 函数添加了一个点击监听器，

```
function initialize() {
  var latlng = new google.maps.LatLng(37.4419, -122.1419);
  var myOptions = {
    zoom: 4,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = window.map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  google.maps.event.addListener(map, 'click', function() {
      alert('map click'); 
  });
} 
```

并通过在 addInfoWindow 调用后添加 return false 来修改标记模板，

```
var marker = new com.redfin.FastMarker(/*id*/i, latlng, ["<div class='marker' onclick='addInfoWindow(", i,"); return false;'>&nbsp;</div>"], null); 
```

如果我在 chrome 中运行它，它会按预期工作。addInfoWindow 被调用，信息窗口弹出，返回 false 被击中，没有其他反应。然而，在 Firefox 和 IE 中，返回 false 似乎被忽略了，并且地图点击事件被触发，提醒“地图点击”。

在我的真实世界应用程序中，地图点击事件会触发信息窗口关闭事件。因此，在 chrome 中显示信息窗口，单击地图并关闭。在 firefox/IE 中单击标记，会构建信息窗口，但会触发地图单击并立即关闭。

任何人都可以看到问题吗？chrome 是否跳过了一个 bug，firefox 和 IE 不喜欢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:28:31.813

将此添加到 onclick 属性的开头：

```
try{event.stopPropagation();}catch(e){event.cancelBubble=true;} 
```

# javascript - 无法读取未定义的属性“视图”

> ID：13944672
> 
> 赞同：8
> 
> 时间：2012-12-19T02:24:11.763
> 
> 标签：javascript, backbone.js, requirejs

这是我第一次将 require.js 与骨干一起使用，我正在努力寻找我的观点的问题：

```
Cannot read property 'View' of undefined // search.js:8 
```

我的目录结构是：

```
.
├── index.php
└── js
    ├── app.js
    ├── lib
    │   ├── backbone.js
    │   ├── backbone-min.js
    │   ├── jquery-min.js
    │   ├── require.js
    │   └── underscore-min.js
    ├── main.js
    ├── model
    ├── router.js
    ├── text.js
    └── view
        ├── error.js
        └── search.js 
```

我的`main.js`：

```
require.config({
  paths: {
    jquery: 'lib/jquery-min',
    underscore: 'lib/underscore-min',
    backbone: 'lib/backbone-min',
    templates: '../templates'
  }

});

require([
  'app'
], function(App){
  App.initialize();
}); 
```

我的`app.js`：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'router', // Request router.js
], function($, _, Backbone, Router){

  var initialize = function(){
    // Pass in our Router module and call it's initialize function
    Router.initialize();
  }

  return {
    initialize: initialize
  };
}); 
```

我的`router.js`：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'view/search', // requests view/search.js
], function($, _, Backbone, SearchView){

  var AppRouter = Backbone.Router.extend({
    routes: {
      "": "home"
    }
  });

  var initialize = function(){
    var app_router = new AppRouter;
    app_router.on('route:home', function(){
      var homeView = new SearchView();
      homeView.render();
    });
    Backbone.history.start();
  };
  return {
    initialize: initialize
  };
}); 
```

我的`view/search.js`：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'text!templates/search.html'
], function($, _, Backbone, searchTemplate){

  // console.log($,_,Backbone);

  var SearchView = Backbone.View.extend({
    ...
  });

  return SearchView;
}); 
```

当我取消注释上面的 console.log 时，两者都是，`_`但不是。我错过了什么？我所有的 lib 文件都是最新版本。`Backbone``undefined``$`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T02:31:23.360

Backbone 和 Underscore 不符合 AMD 标准。默认情况下，它们不提供与 RequireJS 兼容的接口。

在上一个版本中，RequireJS[提供了一个有用的方法来解决这个问题](http://requirejs.org/docs/api.html#config-shim)：

你的 main.js：

```
require.config({
  shim: {
    underscore: {
      exports: '_'
    },
    backbone: {
      deps: ['underscore', 'jquery'],
      exports: 'Backbone'
    }
  },
  paths: {
    jquery: 'lib/jquery-min',
    underscore: 'lib/underscore-min',
    backbone: 'lib/backbone-min',
    templates: '../templates'
  }

});

require([
  'app'
], function(App){
  App.initialize();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:27:57.163

要扩展 BAK 的答案，您还需要提供一个 baseUrl：

```
require.config({
  baseUrl: 'js',
...
}); 
```

# css - CSS在chrome和firefox中呈现不同

> ID：13944673
> 
> 赞同：4
> 
> 时间：2012-12-19T02:24:16.590
> 
> 标签：css, google-chrome, firefox

在 chrome 中（注意统计数据正确显示在灰色框中（左下角））

![在此处输入图像描述](../Images/22128ba14e9bb69919b4d208560880a7.png)

然而在火狐中，统计数据位于框下方（下半部分隐藏）

![在此处输入图像描述](../Images/5f8e9f127e293c23587d58564f1edac3.png)

我的CSS代码如下

```
.stats_section {
  position: relative;
  opacity: 0.7;
  height: 20px;
  margin-top: -31px;
  margin-left: 76px;
  margin-bottom: 10px;
  width: 24%;
} 
```

如何修复 CSS 使其适用于两种浏览器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T02:29:42.433

相对定位有时会非常棘手，所以在这种情况下，我肯定会在明确设置定位的容器内使用绝对定位。

为此，您需要为包含`.stats_section`(`relative`在这种情况下可能没问题的父容器设置显式定位，但如果它已经设置为`absolute`它也可以工作)。

```
.parent_container {
    position:relative;
}

.stats_section {
   position: absolute;
   opacity: 0.7;
   height: 20px;
   bottom: -22px;
   left: 4px  
   width: 24%; /* You might want to use fixed width in pixels here */
} 
```

# arrays - 在 OpenCV 中初始化 3D 复数值矩阵

> ID：13944674
> 
> 赞同：1
> 
> 时间：2012-12-19T02:24:16.793
> 
> 标签：arrays, opencv

我尝试了以下代码进行初始化，但它不起作用。

```
int size[] = {2,3,2};
Mat matA;
matA.create(3, size, CV_32FC2,Scalar::all(0)); 
```

你能告诉我正确的方法是什么吗？

# php - PHP 'else return' VS 自动返回

> ID：13944676
> 
> 赞同：14
> 
> 时间：2012-12-19T02:24:34.097
> 
> 标签：php, function, return

关于 PHP 函数，如果您不需要函数返回 BOOLEAN 或 STRING，那么`return`在条件失败时声明 a 与让函数自动返回之间有区别吗？

例如，

两者之间是否有任何内部差异：

```
function check() {
    if( 5 > $v ) {
        die('yes');
    }
}

function check() {
    if( 5 > $v ) {
        die('yes');
    }
    else {
        return;
    }
} 
```

显然，他们*似乎*在“IF”条件失败时做同样的事情，但在内部，为了内存、安全性、可用性或整体最佳实践，一个比另一个更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T02:30:47.983

这些陈述在内存或安全性方面没有有效的、真实的差异。无，nada，zip，零。它们完全相同。保存额外操作码所需的几个字节无关紧要，如果您关心解析、标记和解释操作码所花费的时间，那么您就是在进行*微优化*。

在“可用性”方面，前者更为清晰。`else`从那里回来*很傻*。如果我在实时代码中看到这一点，我会假设编写它的人在这样做时分心并清理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:40:35.030

return 在你的第二个例子中什么都不做，而不是**增加解析器和编译器的工作**，**让你的读者困惑它的规则是什么**，**在代码中添加不必要的行并增加应用程序**的总大小，最后它没有任何价值！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T02:30:37.270

我更喜欢第一个。它的装配线更少，因此效率略高（二进制大小而不是速度）。无论函数中包含什么，所有函数都会在函数完成时定义一个返回地址，因此添加额外的 return 只会导致它添加额外的指令。

我发现它更易读，也更常见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T02:31:50.617

我认为前者更容易*阅读*，而后者只是增加了预处理器的开销（并且文件大小膨胀）。然而，它也清楚地表明该函数不会返回任何特定的东西（尽管函数名称或注释可以比仅用于此目的的逻辑分支更容易做到这一点。

我意识到并欣赏这些例子，但我会坚持简短而简洁。

[/恕我直言]

# java - 小程序不显示字符串数组

> ID：13944682
> 
> 赞同：0
> 
> 时间：2012-12-19T02:26:34.263
> 
> 标签：java, fonts, applet, awt

我想将小程序内的字符串数组的内容打印为列表，但是当小程序启动时什么都没有出现，只出现了一些东西，它似乎是数组内的字符串，但它们之间需要一个空格，这是小程序：

```
import java.applet.Applet;
import java.awt.*;
import java.net.*;
import java.io.*;
import javax.swing.JFrame;

public class FontApplet extends Applet{
String[] fonts;

public void init() {

fonts =GraphicsEnvironment.getLocalGraphicsEnvironment().getAvailableFontFamilyNames();

}
public void update(Graphics g){paint(g);}
public void paint(Graphics g) {

for(String str:fonts)
     g.drawString(str, 100, 125);
   }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:31:32.243

尝试这个：

```
int x = 100;
for(String str:fonts)
 g.drawString(str, x, 125);
 x += 20;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:27:52.603

您将它们全部绘制在位置 (100, 125)。

# python - dateutil 和 pytz 给出不同的结果

> ID：13944688
> 
> 赞同：18
> 
> 时间：2012-12-19T02:27:42.927
> 
> 标签：python, datetime, timezone

我在将输出与`dateutil`和进行比较时遇到问题`pytz`。我正在创建一个感知日期时间对象 (UTC)，然后转换为给定的时区，但我得到了不同的答案。我怀疑 dateutil 有时会给出错误的结果，因为它在考虑夏令时时存在问题（至少，我阅读了关于它的评论），但我找不到对该问题的确认或修复。这是代码：

```
import dateutil

u = dateutil.tz.tzutc()
date1 = datetime.datetime(2010, 5, 2, 11, 10, tzinfo=u)
# 2010-05-02 11:10:00+00:00

u2 = dateutil.tz.gettz('America/Chicago')
date2 = datetime.datetime(2010, 5, 2, 11, 10, tzinfo=u2)
# 2010-05-02 11:10:00-05:00

import pytz
u = pytz.timezone('UTC')
date1 = datetime.datetime(2010, 5, 2, 11, 10, tzinfo=u)

# 2010-05-02 11:10:00+00:00
u2 = pytz.timezone('America/Chicago')
date2 = datetime.datetime(2010, 5, 2, 11, 10, tzinfo=u2)

# 2010-05-02 11:10:00-06:00 
```

那么，这可能是什么问题？

### 更新：

我刚试过这个：

```
print u2.normalize(date1.astimezone(u2))
# 2010-05-02 06:10:00-05:00 
```

那么pytz需要`normalize`考虑夏令时吗？

### 更新 2：

似乎 pytz 和 dateutil 没有给出 America/Argentina/San_Luis 的答案，但这有效：

```
import pytz, dateutil, datetime

now = datetime.datetime.now() 

for zone in pytz.all_timezones:
    utc_dateutil = dateutil.tz.tzutc()
    utcdate_dateutil = datetime.datetime(now.year, now.month, now.day, now.hour, now.minute, tzinfo=utc_dateutil)
    zone_dateutil = dateutil.tz.gettz(zone)
    newzone_dateutil = utcdate_dateutil.astimezone(zone_dateutil)

    utc_pytz = pytz.timezone('UTC')
    utcdate_pytz = datetime.datetime(now.year, now.month, now.day, now.hour, now.minute, tzinfo=utc_pytz)
    zone_pytz = pytz.timezone(zone)
    newzone_pytz = utcdate_pytz.astimezone(zone_pytz)
    assert newzone_dateutil == newzone_pytz 
```

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T02:49:18.310

**编辑：**下面讨论的差异在使用时不再存在

```
>>> dateutil.__version__
'1.5'

>>> pytz.__version__
'2012c' 
```

* * *

pytz 模块[警告](http://pytz.sourceforge.net/#introduction)，

> 这个库不同于记录在案的用于 tzinfo 实现的 Python API；如果要创建本地挂钟时间，则需要使用 localize() 方法

并[进一步](http://pytz.sourceforge.net/#localized-times-and-date-arithmetic)

> 该库仅支持两种构建本地化时间的方式。第一种是使用pytz库提供的localize()方法。

```
In [61]: u4 = pytz.timezone('America/Chicago')
In [62]: print(u4.localize(datetime.datetime(2010, 5, 2, 11, 10)))
2010-05-02 11:10:00-05:00 
```

另一种方法是使用该`astimezone`方法，该方法用于将一个时区感知日期时间转换为另一个时区感知日期时间。

为了完全明确，它[警告不要](http://pytz.sourceforge.net/#localized-times-and-date-arithmetic)`tzinfo`使用以下参数构造一个时区感知的日期时间：

> 不幸的是，对于许多时区，使用标准日期时间构造函数的 tzinfo 参数对 pytz “不起作用”。

* * *

让我们检验一下假设

```
datetime.datetime(year, month, day, hour, minute, tzinfo = dateutil_tz) 
```

等于

```
pytz_tz.localize(datetime.datetime(year, month, day, hour, minute)) 
```

使用此代码：

```
import dateutil.tz
import datetime
import pytz

now  = datetime.datetime.now()

for name in pytz.all_timezones:
    dateutil_tz = dateutil.tz.gettz(name)
    pytz_tz = pytz.timezone(name)
    dateutil_date = datetime.datetime(
        now.year, now.month, now.day, now.hour, now.minute, tzinfo = dateutil_tz)
    pytz_date = pytz_tz.localize(datetime.datetime(
        now.year, now.month, now.day, now.hour, now.minute))

    try:
        assert dateutil_date.isoformat() == pytz_date.isoformat()
    except AssertionError:
        print(name)
        print(dateutil_date.isoformat())
        print(pytz_date.isoformat()) 
```

代码产生：

```
America/Argentina/San_Luis
2012-12-18T22:32:00-04:00 <-- dateutil datetime
2012-12-18T22:32:00-03:00 <-- pytz's datetime 
```

所以我的假设是错误的： dateutil 和 pytz 返回不同的结果。

那么哪一个是正确的呢？我不太确定，但根据[这个网站](http://www.prokerala.com/travel/timezones/America/Argentina/San_Luis)，目前，

```
America/Argentina/San_Luis time zone offset is: 
UTC / GMT -03:00 hours 
```

所以看起来 pytz 是正确的。

# php - 如何在最新的 XAMPP 上运行已弃用的 php 代码

> ID：13944694
> 
> 赞同：-5
> 
> 时间：2012-12-19T02:28:39.743
> 
> 标签：php, mysql, xampp

> **可能重复：**
> [PHP 对不推荐使用的函数做了什么？](https://stackoverflow.com/questions/6822446/what-does-php-do-with-deprecated-functions)

我的队友在 1.7.4 Xampp 上编写了代码，它在她这边运行顺利，但是当我在我的电脑上运行它时，它没有运行，因为我使用了最新的 XAMPP。我安装了一个旧版本的 xampp，但它的脖子很痛苦，因为 apache 和 mysql 甚至无法启动。看起来它不稳定或什么的。所以我最后的手段是希望有一种方法可以在我当前的 xampp 上运行已弃用的代码。

索引.php

```
<?PHP

session_start();

include('inc/config.php');
?>

<html>
<title>Login</title>
<head>

<link rel="stylesheet" type="text/css" href="style.css">

<style TYPE="text/css">
      <!--
    a {text-decoration: none;}
      -->
</style>

<script language="Javascript">

function validate()
{
  susername=document.myform.susername.value;
  if (susername == "" || susername == null || susername.charAt(0) == ' ')
  {
    alert("Please enter your username")
    document.myform.susername.focus();
    return false;
  }
  else
    {
    password=document.myform.password.value;

    if (password == "" || password == null || password.charAt(0) == ' ')
    {
        alert("Password cannot be blank")
        document.myform.password.focus();
        return false;
    }

    }
}

</script>

</head>

<body bgcolor="white" topmargin="0" leftmargin="0" marginwidth="0" marginheight="0">

<div align="center">
  <center>
  <table border="0" cellpadding="0" cellspacing="0" width="760" height="350">
    <tr>
      <td width="1" height="2" class=outline></td>
      <td width="162" height="2" class=blue valign="top"></td>
      <td width="8" height="2"></td>
      <td width="580" height="2" valign="top">

<!---------------------------------Center panel starts here------------------------------->
<!---------------------main table starts------------------->
<div align="center">
  <center>
  <table border="0" cellpadding="0" cellspacing="0" width="580" height="200">

<!-----------------------main table ends----------------------->
    <tr>
      <td width="580" height="200">

<!------------------------- susername password table starts--------------------->

<form name=myform method="post" action="login.php" onSubmit="return validate()">

<div align="center">
  <table border="0" cellpadding="3" cellspacing="1" width="350" height="11">
  <tr>
  <br>
  <br>
    <br>
      <br>
  </tr>
  <tr>
              <td width="350" colspan="3" height="34"><font class=tablackb>Please Enter Your Username and Password:</font></td>
            </tr>

    <tr>
      <td width="90" height="21" valign="middle" align="left"><font class=tablack>Username</font></td>
      <td width="10" height="21" valign="middle" align="center"><font class=tablack>:</font></td>
      <td width="250" height="21" valign="middle" align="left"><font class=tablack><input id="username" class=ainput type="text" name="name" placeholder="Username" size="30"></font></td>      
    </tr> 

    <tr>
      <td width="90" height="21" valign="middle" align="left"><font class=tablack>Password</font></td>
      <td width="10" height="21" valign="middle" align="center"><font class=tablack>:</font></td>
      <td width="250" height="21" valign="middle" align="left"><font class=tablack><input id="password" class=ainput type="password" name="password" placeholder="Password" size="30"></font></td>      
        </tr> 
    <tr>
    <td width="350" height="21" valign="middle" align="center" colspan="3"><font class=tablack>password must be 6-18 characters</font></td>
    </tr>
    <tr>

      <td width="350" colspan="3" height="21" class=white valign="middle" align="center" colspan="3"><font class=tablack> <input  type="submit" value="Submit" name="Submit">&nbsp; &nbsp; &nbsp; &nbsp; <input type="reset" value="Reset" name="Reset"></font></td>      
    </tr> 

  </table>
</div>
</form>
<center>
</center>
<!-------------------------------susername password table ends------------------------->
</td>
    </tr>

<!----------------------------------copy this for more cells start---------------------------->
    <tr>
      <td width="580" height="1"></td>
    </tr>
<!----------------------------------copy this for more cells ends---------------------------->

<!-------------------------------main table starts-------------------------->

  </table>
  </center>
</div>
<!--------------------------------main table ends------------------------------>

<!---------------------------------Center panel ends here---------------------------------></td>
      <td width="8" height="2"></td>
      <td width="1" height="2" class=outline></td>
    </tr>
  </table>
  </center>
</div>

</body>

</html> 
```

登录.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:50:17.123

您可以更改错误报告以停止报告弃用警告。[见这里](http://nz1.php.net/manual/en/function.error-reporting.php)。

但是，您应该非常认真地考虑更新代码以使用未弃用的扩展，例如 MySQLi 或 PDO_MySQL。

编辑：您提供的图像还表明您没有提供连接到数据库的参数。

# javascript - 我可以为 highchart 工具提示使用两种不同的格式化程序吗？

> ID：13944699
> 
> 赞同：15
> 
> 时间：2012-12-19T02:29:31.690
> 
> 标签：javascript, highcharts

我有一个 highcharts 表，其中包含两个使用命名值的数据系列。在我的一个系列的工具提示中，我想引用该系列中的一个数据点。所以这个答案中的解决方案：[如何在同一图形的每条曲线中在 Highcharts 上使用不同的格式化程序？](https://stackoverflow.com/questions/11325638/how-to-use-a-different-formatter-on-highcharts-in-each-curve-of-the-same-graphic)对我没有帮助。我需要的不仅仅是 tooltipText，我还需要一个格式化程序：

对于一个：

```
formatter: function() {
    return this.x + ': ' + this.series.name +
    '<br> $' + Highcharts.numberFormat(this.y, 0);
     } 
```

对于另一个：

```
formatter: function() {
    return 'In ' + this.x + ' the median value was' + this.median + 
    'and the total $' + Highcharts.numberFormat(this.y, 0);                        
 } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-19T03:19:55.257

内部格式化程序`this`指的是焦点系列，您可以`if/else`在格式化程序内部添加一个并为每个格式化程序返回一个字符串，如下所示。

```
tooltip: {
    shared: false,
    formatter: function() {
        var text = '';
        if(this.series.name == 'MSFT') {
            text = this.x + ': ' + this.series.name +
                   '<br> $' + Highcharts.numberFormat(this.y, 0);
        } else {
            text = 'In ' + this.x + ' the median value was' + this.median +
                   'and the total $' + Highcharts.numberFormat(this.y, 0);
        }
        return text;
    }
} 
```

[**演示**](http://jsfiddle.net/PtYtf/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-25T14:25:38.483

您可以轻松地为每个系列定义工具格式器 - 请参见此处：[http ://api.highcharts.com/highcharts/plotOptions.series.tooltip](http://api.highcharts.com/highcharts/plotOptions.series.tooltip)

```
{
  tooltip: {
          shared: true
  },
  series: {
     name: 'some series name',
     data: mydata,
     tooltip: {
        valueSuffix: ' bar'
     }
  }
} 
```

示例：http: [//jsfiddle.net/28qzg5gq/](http://jsfiddle.net/28qzg5gq/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-09T10:28:50.727

这是一个例子。小提琴示例在[这里](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/tooltip/formatter/)：

```
tooltip: {
            formatter: function () {
                var s = '<b>' + Highcharts.dateFormat('%A, %b %e, %Y', this.x) + '</b>';

                $.each(this.points, function () {
                    s += '<br/>1 USD = ' + this.y + ' EUR';
                });

                return s;
            }
        }, 
```

# javascript - d3.js geoJSON 和边界

> ID：13944704
> 
> 赞同：7
> 
> 时间：2012-12-19T02:30:11.990
> 
> 标签：javascript, d3.js, bounds, geojson

我已成功加载 geoJSON 文件，将特征集合加载到

```
d3.geo.path() 
```

我当前实现的问题是它开始缩放，使得路径是一个点，我每次都必须放大。现在我知道有很多方法可以正确设置缩放级别，但我希望使用

```
d3.geo.bounds() 
```

鉴于以下 geoJSON 功能：

```
json.features[0]:

Object
geometry: Object
coordinates: Array[2]
0: -71.248913
1: 44.078426
length: 2
__proto__: Array[0]
type: "Point"
__proto__: Object
id: 2
type: "Feature"
__proto__: Object 
```

和

```
json.features[1]:

Object
geometry: Object
coordinates: Array[2]
0: -71.249021
1: 44.078387
length: 2
__proto__: Array[0]
type: "Point"
__proto__: Object
id: 3
type: "Feature"
__proto__: Object 
```

如果我执行

```
d3.geo.bounds(json.features) 
```

我得到无限的界限：

```
d3.geo.bounds(json.features)
[
Array[2]
0: Infinity
1: Infinity
length: 2
__proto__: Array[0]
, 
Array[2]
0: -Infinity
1: -Infinity
length: 2
__proto__: Array[0]
] 
```

我不确定出了什么问题，显然我的数据集比上面大得多，但我只是想了解输出。这个输出对我来说没有意义，并且显然遗漏了一些关于 d3 处理 geoJSON 数据的简单内容。任何有助于获得工作界限的帮助都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T05:22:47.930

`d3.geo.bounds`将单个 Feature 或 FeatureCollection 作为参数，而不是特征数组。请参阅[文档](https://github.com/mbostock/d3/wiki/Geo-Paths#wiki-bounds)。你需要打电话给例如

```
d3.geo.bounds(json.features[0]) 
```

如果你想要一个包含所有特征的边界框，则需要依次获取每个特征的边界框，然后计算它们的并集。

# drupal - 推荐一个用于为网站创建设置页面的drupal模块

> ID：13944708
> 
> 赞同：1
> 
> 时间：2012-12-19T02:30:30.920
> 
> 标签：drupal, drupal-modules

请向我推荐一个 Drupal 模块，以便我可以创建一个设置页面（用于配置网站的不同字段的页面，例如主页中的文本、块的大小等，以便简单的用户可以更改它们）？

我认为 CCK 可能很好，但 CCK 的问题在于结果是我们可以创建无限数量的设置页面，其中只有一个有用，这是一种方式，但不是一个干净完美的方式。请帮助我提出您的建议。

**我也知道我可以编写一个自定义模块并使用表单 api！**

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:24:31.697

最后我找到了解决问题的方法，这是食谱：

1) 创建所需的 CCK 内容类型。（我们称之为 Home-Page-Settings 并将您想要的字段添加到其中）。

2）然后从该内容类型创建一个节点。

3) 最后，对于目标角色，只需删除**添加**和**删除**新主页设置的权限，并授予该角色的编辑权限。

如果你有同样的情况，这就是你需要做的。如果您有更好的解决方案，请在此处分享并让我和其他人知道。

问候

# ruby-on-rails - 尝试在 EC2 部署上启动脚本 - /usr/bin/bundle: /usr/bin/ruby: bad interpreter error

> ID：13944720
> 
> 赞同：-1
> 
> 时间：2012-12-19T02:31:55.693
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, amazon-ec2, rvm

我想在我的 Amazon 服务器部署时自动运行脚本。但是，我的日志中不断出现以下错误：

```
/root/start.sh: /usr/bin/bundle: /usr/bin/ruby: bad interpreter: No such file or directory 
```

我试过按摩我的启动脚本，但还没有找到解决方案。我可以手动加载上帝文件，但是当我启动我的机器时，我收到以下错误。**如何设置它以便在我的脚本运行时检测到我的 bundler/ruby？**

`which ruby`=>`/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby`

这是我应该自动运行的脚本（start.sh）

```
cat /dev/null > /root/log
echo "Starting environment for $(whoami) at $(date)" >> /root/log

export RAILS_ENV=production
export RAILS_ROOT=/root/Rails3/www_rails
export QUEUE_NAME=place_matching

export HOME=/root
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function

cd /root/Rails3/www_rails
RAILS_ENV=production bundle exec god -c /root/Rails3/www_rails/god/resque_generic.god >> /root/log 2>&1
echo "Environment running at $(date)" >> /root/log 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:51:59.177

RVM 为您的问题提供文档[https://rvm.io/integration/god/](https://rvm.io/integration/god/)

另外你可以试试这个脚本：

```
cat /dev/null > /root/log
echo "Starting environment for $(whoami) at $(date)" >> /root/log

export RAILS_ENV=production
export RAILS_ROOT=/root/Rails3/www_rails
export QUEUE_NAME=place_matching

export HOME=/root

"$HOME/.rvm/bin/rvm" in $RAILS_ROOT do bundle exec god -c $RAILS_ROOT/god/resque_generic.god >> /root/log 2>&1
echo "Environment running at $(date)" >> /root/log 
```

这是 rvm 的新符号，基本上可以写成：

```
rvm in /path/to/project do <command> ... 
```

并且等同于您尝试做的事情。

更重要的一件事是，如果您以与拥有 RVM 的用户不同的用户身份运行它，那么您的项目`.rvmrc`也需要被该新用户信任。或者，您可以使用不需要信任的新项目文件之一：

*   `.ruby-version`=>`1.9.3@project`
*   `Gemfile`=> `#ruby=1.9.3@project`/`ruby="1.9.3"`
*   `.versions.conf`=>`ruby=1.9.3@project`

请注意，第二种形式也进行捆绑验证，并且不允许补丁级别或 gemset 名称。

# mysql - 哪个更好的mysql group count或count

> ID：13944725
> 
> 赞同：1
> 
> 时间：2012-12-19T02:32:19.060
> 
> 标签：mysql, count

多选

```
select count(id) from table where name='a'
select count(id) from table where name='b' 
```

与组一选

```
select name,count(id) from table where name in('a','b') group by name; 
```

哪一个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:37:10.250

我说在这样一个简单示例中的 group by 语句会执行相同或更好，并且可能会更好，因为如果您正在运行需要分组的两个不同的 select 语句，那么发布处理您的信息的性能将会受到影响也是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:46:34.420

一般来说，准备和执行一条 SQL 语句比两条语句要好。

它在资源方面“更好”，因为将语句发送到 MySQL 服务器、MySQL 服务器解析语句、准备执行计划、然后执行计划、然后返回结果集所涉及的开销。在客户端，也有一些管理开销。

虽然它不会对应用程序对单个请求的整体响应时间产生任何影响，但真正的问题是 MySQL 服务器上的可伸缩性。

另一方面，如果单个语句比两个单独的语句占用更多的资源，那么最好运行两个单独的语句。

在您的情况下，缺少有关架构和行分布的任何信息，很可能获得两个计数的一个语句是“更好”的方法。

（一个语句的问题是它可能返回零、一或两行；而两个单独的语句将分别返回 1 行。（因此在客户端处理结果集会有点不同。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T05:18:52.933

在这种情况下使用 GROUP BY 总是更好，如果您只想将它​​用于特定名称，请选择个人，即**第一个**。

但是，如果您想获得所有名称的计数，您必须选择**GROUP BY**，因为它可以简化您的代码以及对服务器的性能影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T02:33:38.343

我更喜欢第二个，`GROUP`因为您只需要对服务器执行一次。

# sql - 将启用 TDE 的 .mdf 附加到 SqlLocalDb 的优缺点是什么？

> ID：13944728
> 
> 赞同：0
> 
> 时间：2012-12-19T02:32:46.690
> 
> 标签：sql, sql-server, localdb, tde

我正在考虑将启用 TDE 的`.mdf`文件附加到`SqlLocalDb`. 在投入时间之前，我想知道这样做是否值得？所以需要一些有用的建议。

# css - 小屏幕笔记本电脑正在使用适用于 iPad/Safari 的 CSS

> ID：13944729
> 
> 赞同：1
> 
> 时间：2012-12-19T02:32:48.733
> 
> 标签：css, ipad, safari

我们使用以下 HTML 元标记和样式查询来允许我们定位 iPad/Safari 浏览器（与 windows/linux 浏览器相比，iPad 的一些细微变化）：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="style/tablet.css" /> 
```

但是，tablet.css 文件也被加载到较小的笔记本电脑上（即那些小于 1024 像素的笔记本电脑）——而且在放大更大的屏幕时似乎也发挥了作用。

使用设备宽度不是区分实际设备/浏览器的好方法，但我在互联网上的所有搜索都表明这是最好的方法。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:29:30.367

为此，您必须恢复为 javascript

您可以使用modernizr 来检测触摸事件支持

[http://modernizr.github.com/Modernizr/touch.html](http://modernizr.github.com/Modernizr/touch.html)

Modernizr 将向`<html>`标签添加一个类，因此您可以非常轻松地定位支持触摸的设备。

如果您想要更准确，或者使用 javascript 检测用户代理，但它需要定期更新以进行更新和新的平板电脑操作系统版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:02:00.903

使您的@media 查询更细粒度将有助于更好地清除不需要的设备/浏览器：

```
<link rel="stylesheet" media="only screen and (max-device-width: 1024px) and (orientation : portrait)
and (-webkit-min-device-pixel-ratio: 2)" href="style/tablet.css" /> 
```

使用`-webkit-min-device-pixel-ratio:`and`orientation`比屏幕尺寸更具体到 iPad/Phone。

# google-chrome - 在加载之前将 url 替换为不同的

> ID：13944730
> 
> 赞同：6
> 
> 时间：2012-12-19T02:32:55.397
> 
> 标签：google-chrome, google-chrome-extension

**在谷歌浏览器扩展中，如何在加载之前将**请求 URL 替换为不同的 URL ？

我看了一下[chrome.webRequest](https://developer.chrome.com/extensions/webRequest.html)，我认为其中一个就是我要找的，我不知道到底是哪一个。
我相信谷歌限制了某种东西，不确定这是否是其中之一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T02:59:41.380

我找到了一个这样做的例子：

```
chrome.webRequest.onBeforeRequest.addListener(
  function(info) {
    // Redirect the original request to a given URL.
    var url = "http://site.com/image.png";
    return {redirectUrl: url};
  },
  // filters
  {
    urls: [
      "http://original.com/*"
    ],
    types: ["image"]
  },
  // extraInfoSpec
  ["blocking"]); 
```

# ios - 使用 NSDate 将当前日期转换为 UILabel

> ID：13944733
> 
> 赞同：-1
> 
> 时间：2012-12-19T02:32:58.953
> 
> 标签：ios, date, uilabel, nsdate, nsdateformatter

我只是想获取当前年份，并显示为文本。出于版权原因，我想这样做，例如：将在 1 月 1 日`©2012`自动成为。`©2013`

```
-(void)getYear {

    NSDate *date = [NSDate date];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"YYYY"];
    copyrightDate.text = [dateFormat stringFromDate:date];
} 
```

但是，当“copyrightDate”设置为 a`IBOutlet`并连接到`UILabel`Interface Builder 中的 a 时，这不起作用。我的代码是否签出，还是 iOS 6.0 中关于标签等的新内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:41:48.157

如果`copyrightDate`是指向`UILabel`您的代码的 IBOutlet 看起来没问题。
可能的错误来源
1\. 当你在做时`copyrightDate.text`-> `copyrightDate == nil`如果你试图`viewDidLoad`在视图控制器上调用之前设置日期，就会出现这种情况。
2.`copyrightDate`目前没有与您的 IBOutlet 连接
3\. 您的 iVar 名称`_copyrightDate`不是`copyrightDate`，但此时我建议您这样做`self.copyrightDate.text = @"some text";`

# haskell - 这些函数是尾递归的吗？

> ID：13944739
> 
> 赞同：4
> 
> 时间：2012-12-19T02:33:47.860
> 
> 标签：haskell, recursion, tail-recursion

我正在学习尾递归，并且在确定我的函数是否是尾递归时遇到了一些困难（主要是在我使用另一个函数的函数上）。

我已经实现了以下两个函数，但我不确定它们是否是尾递归的。

第一个是连接两个列表的函数。

```
conca list [] = list
conca [] result = result
conca (h:t) result = conca (init (h:t)) ( last(h:t):result ) 

concatenate::[a]->[a]->[a]
concatenate list1 list2 = conca list1 list2 
```

函数中的计算在递归调用之前处理，但它使用 last 和 init，它们不是尾递归（我在[http://ww2.cs.mu.oz.au/172/Haskell/tourofprelude中检查了它们的定义.html](http://ww2.cs.mu.oz.au/172/Haskell/tourofprelude.html) )

第二个功能是删除给定列表中给定数字的第一次出现。

```
invert [] result = result
invert (h:t) result = invert t (h:result)

remov n [] aux result = invert result []
remov n (h:t) aux result
        | aux==1 = remov n t 1 (h:result)
        | n==h = remov n t 1 (result)
        | otherwise = remov n t 0 (h:result)

remove n list = remov n list 0 [] 
```

参数 aux （可以假定 0 或 1 作为值）用于标记是否已删除出现。

在 remove 函数中，当部分结果通过递归调用向下传递时，列表被反转，最后列表没有第一次出现而是倒置，因此它必须被反转才能作为结果返回。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T02:55:56.843

```
conca (h:t) result = conca (init (h:t)) ( last(h:t):result ) 
```

是一个尾调用，但`last(h:t):result`作为一个未评估的重击开始生命，所以它有点像这些嵌套函数调用仍然在堆栈上。

`conca`模式匹配其第一个参数，因此`init`将在递归调用中进行评估。

`conca`在其第二个参数中是非严格的，因此在应用`conca`.

* * *

`remov`是尾递归的，是的，但是....

使用`True`and`False`而不是`0`and`1`使您的代码更清晰：

```
remov n [] found result = invert result []
remov n (h:t) found result
        | found = remov n t True (h:result)
        | n==h = remov n t True (result)
        | otherwise = remov n t False (h:result)

remove n list = remov n list False [] 
```

最好不要传递这么多数据，减少复制`n`和使用两个函数，而不是测试布尔参数的单个函数：

```
remove' n list = seek list [] where
   seek []     result = invert result []
   seek (h:t) result | h == n    = got t result
                     | otherwise = seek t (h:result)
   got []    result = invert result []
   got (h:t) result = got t (h:result) 
```

但`got a result`只是计算`reverse result ++ a`，所以你可以写

```
remove'' n list = seek list [] where
   seek []     result = invert result []
   seek (h:t) result | h == n    = invert result [] ++ t
                     | otherwise = seek t (h:result) 
```

然而，这一切似乎相当费劲，并且仍然遍历列表两次。为什么不进行非尾调用：

```
removeFast n [] = []
removeFast n (h:t) | h == n = t
                   | otherwise = h:removeFast n t 
```

`t`这样做的好处是立即生成其第一个元素，而不是运行整个列表，并且一旦找到要删除的元素，快捷方式无需进一步计算即可返回。尝试比赛`length (removeFast 1 [1..100000])`（`length (remove 1 [1..100000])`根据您的处理器速度改变零的数量）。

* * *

如果您想进行更有效的尾递归`conca`，可以使用以下技巧`remove`：

```
conc this result = prepend (invert this []) result

prepend [] result = result
prepend (h:t) result = prepend t (h:result) 
```

和以前一样，您要遍历`this`两次，一次遍历`invert`它，另一次遍历它，但这仍然是一种线性算法，并且比对每个元素使用和`prepending`要好得多，后者是二次的。`init``last`

# .net - 使用 .net 连接表时没有响应

> ID：13944744
> 
> 赞同：1
> 
> 时间：2012-12-19T02:34:39.483
> 
> 标签：.net, mysql, join

我有两个要加入的查询

```
SELECT b.nickname,count(a.doctor_id) 
FROM a_table a 
join b_table b 
on (a.doctor_id=b.id_user) 
GROUP BY a.doctor_id 
```

和

```
SELECT   doctor_id, SUM(medicine) medicine, SUM(radiology) radiology,sum(lab) lab, sum(act) act
FROM     (
  SELECT   MAX(doctor_id) doctor_id,
           SUM(IF(pm='F', cost, NULL)) medicine,
           SUM(IF(pm='R', cost, NULL)) radiology,
           SUM(IF(pm='L', cost, NULL)) lab,
           SUM(IF(pm='P', cost, NULL)) act
  FROM     c_table
  GROUP BY Trans_No
) t
GROUP BY doctor_id 
```

我已经尝试加入

```
SELECT   b.nickname, count(a.doctor_id), SUM(medicine) medicine, SUM(radiology) radiology,sum(lab) lab, sum(act) act
FROM     (
  SELECT   MAX(doctor_id) doctor_id,
           SUM(IF(pm='F', cost, NULL)) medicine,
           SUM(IF(pm='R', cost, NULL)) radiology,
           SUM(IF(pm='L', cost, NULL)) lab,
           SUM(IF(pm='P', cost, NULL)) act
  FROM     c_table
  GROUP BY Trans_No
) t
join a_table a on (a.doctor_id=t.doctor_id)
join b_table b on (a.doctor_id=b.id_user)
GROUP BY a.doctor_id 
```

所有这些表都有大量数据（超过 200 万条数据），我已经设置了我的 CommandTimeout = 600 但它仍然没有响应

我是不是加入错了，还是只是对很多数据？我该怎么做才能得到结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:00:55.273

这不是答案，但评论太长了。

您的查询没有意义。我认为你需要重新审视这个问题。第一个查询：

```
SELECT b.nickname,count(a.doctor_id) 
FROM a_table a 
join b_table b 
on (a.doctor_id=b.id_user) 
GROUP BY a.doctor_id 
```

总是*会*返回 1 `count(a.doctor_id)`，除非医生 ID 为 NULL。这是因为您正在对该列进行分组。您是要获取每个昵称的医生数还是每个医生的昵称数？

第二个查询中的子查询也没有多大意义：

```
SELECT   MAX(doctor_id) doctor_id,
         SUM(IF(pm='F', cost, NULL)) medicine,
         SUM(IF(pm='R', cost, NULL)) radiology,
         SUM(IF(pm='L', cost, NULL)) lab,
         SUM(IF(pm='P', cost, NULL)) act
FROM     c_table
GROUP BY Trans_No 
```

为什么要对 trans_no 进行分组？您为什么不将其用作索引？

也许你应该写另一个问题，解释你想要完成的事情。

# c# - MusicStore 'System.Data.Objects.ObjectSet<....>' 不包含 'Add' 的定义，并且没有扩展方法 'Add' 接受第一个参数

> ID：13944746
> 
> 赞同：3
> 
> 时间：2012-12-19T02:35:04.270
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, objectset

我正在关注 MusicStore 教程，我已经在教程的[第 8 部分](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-8)。当我尝试添加 ShoppingCart 类时出现此错误。我尝试用谷歌搜索可能的解决方案，但未能找到干净的 T_T .. 根据我的研究，我收到此错误，因为我使用的是 edmx数据库优先而不是教程中的代码优先。

我添加了这些代码，并且在 Add() 和 Remove() 上出现错误

```
namespace Project.Models 
{ 
    public partial class ShoppingCart 
    {  
        ProjectEntities db = new ProjectEntities();  

        string ShoppingCartId { get; set; }

        public const string CartSessionKey = "cart_ID";
        public static ShoppingCart GetCart(HttpContextBase context)
        {
            var cart = new ShoppingCart();
            cart.ShoppingCartId = cart.GetCartId(context);
            return cart;
        }
        // Helper method to simplify shopping cart calls
        public static ShoppingCart GetCart(Controller controller)
        {
            return GetCart(controller.HttpContext);
        }
        public void AddToCart(Product product)
        {
            // Get the matching cart and album instances
            var cartItem = db.Carts.SingleOrDefault(c => c.cart_ID == ShoppingCartId && c.product_ID == product.product_ID);

            if (cartItem == null)
            {
                // Create a new cart item if no cart item exists
                cartItem = new Cart
                {
                    product_ID = product.product_ID,
                    cart_ID = ShoppingCartId,
                    Count = 1,
                    DateCreated = DateTime.Now
                };
                db.Carts.Add(cartItem);
            }
            else
            {
                // If the item does exist in the cart,  then add one to the quantity
                cartItem.Count++;
            }
            // Save changes
            db.SaveChanges();
        }
        public int RemoveFromCart(int id)
        {
            // Get the cart
            var cartItem = db.Carts.Single(cart => cart.cart_ID == ShoppingCartId && cart.record_ID == id);

            int itemCount = 0;

            if (cartItem != null)
            {
                if (cartItem.Count > 1)
                {
                    cartItem.Count--;
                    itemCount = cartItem.Count;
                }
                else
                {
                    db.Carts.Remove(cartItem);
                }
                // Save changes
                db.SaveChanges();
            }
            return itemCount;
        }
        public void EmptyCart()
        {
            var cartItems = db.Carts.Where(cart => cart.cart_ID == ShoppingCartId);

            foreach (var cartItem in cartItems)
            {
                db.Carts.Remove(cartItem);
            }
            // Save changes
            db.SaveChanges();
        }
        public List<Cart> GetCartItems()
        {
            return db.Carts.Where(cart => cart.cart_ID == ShoppingCartId).ToList();
        }
        public int GetCount()
        {
            // Get the count of each item in the cart and sum them up
            int? count = (from cartItems in db.Carts
                          where cartItems.cart_ID == ShoppingCartId
                          select (int?)cartItems.Count).Sum();
            // Return 0 if all entries are null
            return count ?? 0;
        }
        public decimal GetTotal()
        {
            // Multiply album price by count of that album to get 
            // the current price for each of those albums in the cart
            // sum all album price totals to get the cart total
            decimal? total = (from cartItems in db.Carts
                              where cartItems.cart_ID == ShoppingCartId
                              select (int?)cartItems.Count * cartItems.Product.Price).Sum();

            return total ?? decimal.Zero;
        }
        public int CreateOrder(Order order)
        {
            decimal orderTotal = 0;

            var cartItems = GetCartItems();
            // Iterate over the items in the cart, adding the order details for each
            foreach (var item in cartItems)
            {
                var orderDetail = new OrderDetail
                {
                    product_ID = item.product_ID,
                    order_ID = order.order_ID,
                    UnitPrice = item.Product.Price,
                    Quantity = item.Count
                };
                // Set the order total of the shopping cart
                orderTotal += (item.Count * item.Product.Price);

                db.OrderDetails.Add(orderDetail);

            }
            // Set the order's total to the orderTotal count
            order.Total = orderTotal;

            // Save the order
            db.SaveChanges();
            // Empty the shopping cart
            EmptyCart();
            // Return the OrderId as the confirmation number
            return order.order_ID;
        }
        // We're using HttpContextBase to allow access to cookies.
        public string GetCartId(HttpContextBase context)
        {
            if (context.Session[CartSessionKey] == null)
            {
                if (!string.IsNullOrWhiteSpace(context.User.Identity.Name))
                {
                    context.Session[CartSessionKey] = context.User.Identity.Name;
                }
                else
                {
                    // Generate a new random GUID using System.Guid class
                    Guid tempCartId = Guid.NewGuid();
                    // Send tempCartId back to client as a cookie
                    context.Session[CartSessionKey] = tempCartId.ToString();
                }
            }
            return context.Session[CartSessionKey].ToString();
        }
        // When a user has logged in, migrate their shopping cart to
        // be associated with their username
        public void MigrateCart(string userName)
        {
            var shoppingCart = db.Carts.Where(c => c.cart_ID == ShoppingCartId);
            foreach (Cart item in shoppingCart)
            {
                item.cart_ID = userName;
            }
            db.SaveChanges();
        }
    }
} 
```

我是 MVC 的初学者，希望有人能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:23:39.670

好的，我做了什么来使它工作..而不是使用 .Add() 我使用 .AddObject() 而不是使用 .Remove 我使用 .DeleteObject() .. 我不知道这件事背后的原因，但是至少它不再显示错误消息了.. :P 感谢所有帮助我的人.. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T03:04:20.833

添加和删​​除来自 EntityFrame 命名空间 System.Data.Entity

所以我的猜测是**使用 System.Data.Entity**缺失？还要检查项目中添加的参考 EntityFramework.dll 吗？或者使用包管理器（nuget）在项目中添加 EF？，您的上下文是否来自 DBContext？如果不是没有添加。如果您看到 AddObject，您很可能是从 ObjectContext 派生的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-19T12:20:18.917

```
public JsonResult getEmployeeByNo(string EmpNo)
        {
            using (SampleDBangularEntities dataContext = new SampleDBangularEntities())
            {
                int no = Convert.ToInt32(EmpNo);
                var employeeList = dataContext.Employees.Find(no);
                return Json(employeeList, JsonRequestBehavior.AllowGet);
            }
        } 
```

冷没有得到 Find 的定义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T15:53:22.920

尝试这个。它将消除您的错误并且运行良好。

而不是使用`DeleteObject`方法尝试这个

```
Employee emp = new Employee();
foreach (int id in employeeIdsToDelete)
{
    emp = db.Employees.Find(id);
    db.Employees.Remove(emp);
    db.SaveChanges();
} 
```

# iphone - 看到多个同类型的ios模拟器

> ID：13944747
> 
> 赞同：0
> 
> 时间：2012-12-19T02:35:36.400
> 
> 标签：iphone, ios, ios-simulator

我在运行我的项目时遇到问题。我看到两个模拟器都是相同类型的。

就像我有两个 iPad 4.1、两个 iphone 4.1 等等。我认为这在我的手机上测试应用程序时引起了问题。

我尝试重新启动 xcode 并终止所有进程并重新启动计算机。

我试图创建一个新方案，但没有奏效。

我试图从组织者中删除该项目，但也无济于事。

有没有人遇到这个问题并设法解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:40:42.980

您是说在您的 Scheme 下拉列表中看到 2 个相同类型的模拟器吗？

如果是这样，请尝试以下操作（确保 xcode 当前未运行）

1.  cd 进入你的 .xcodeproj 目录。
2.  删除 xcuserdata 目录
3.  cd 进入 project.xcworkspace
4.  删除 xcuserdata 目录
5.  启动 xcode 项目

当我在 xcode 的下拉列表中出现多个或旧目标时，有时我已经解决了问题。

# dialog - 双击调用插件属性

> ID：13944748
> 
> 赞同：0
> 
> 时间：2012-12-19T02:35:37.150
> 
> 标签：dialog, ckeditor

我正在使用 CKEditor 3.6.4

默认情况下，CKEditor 在双击时调用对话框属性，但在我正在工作的 CKEditor 上没有调用对话框属性。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:02:30.260

双击属性在 plugin.js 文件中定义

```
editor.on( 'doubleclick', function( evt )
        {
            var element = evt.data.element;

            if ( element.is( 'typeOfElement' ) )
                evt.data.dialog = 'commandName';

        });
}, 
```

# python - *args, **kwargs 在 jinja2 宏中

> ID：13944751
> 
> 赞同：65
> 
> 时间：2012-12-19T02:35:51.297
> 
> 标签：python, macros, jinja2

Jinja2 宏如何处理额外的 args 和 kwargs？文档并不完全清楚。

例如，这显然是错误的：

```
{% macro example_1(one, two, **kwargs) %}
    do macro stuff
{% endmacro %} 
```

这导致

```
jinja2.exceptions.TemplateSyntaxError

TemplateSyntaxError: expected token 'name', got '**' 
```

[文档](http://jinja.pocoo.org/docs/templates/#macros)说：

> *夸格斯*
> 
> 与*varargs*类似，但用于关键字参数。所有未使用的关键字参数都存储在这个特殊变量中。

不幸的是，任何额外关键字参数的组合都是错误的，

```
{% macro example_2(one, two) %}
    do macro stuff
{% endmacro %}

{{ example_2(one, two, test='test') }}

TypeError: macro 'example_2' takes no keyword keyword argument 'test' 
```

我没有示例，也没有在 Jinja2 源代码 atm 中讨论。目前我还不清楚文档。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-19T03:05:18.680

诀窍是`kwargs`必须在任何应该接受它们的宏中**至少访问一次。**也就是说，你必须`{{ kwargs }}`在宏体中调用一次，*而不*在宏参数列表中声明它。对于`{{ varargs }}`.

这行不通

```
{% macro example_2(one, two) %}
    * {{one}} - {{two}}
{% endmacro %}
{{example_2(1, 2, test="Hello")}} 
```

这会

```
{% macro example_2(one, two) %}
    * {{one}} - {{two}}
    * {{kwargs}}
{% endmacro %}
{{example_2(1, 2, test="Hello")}} 
```

# python-2.7 - 在 python 的同一行上打印

> ID：13944754
> 
> 赞同：0
> 
> 时间：2012-12-19T02:36:12.413
> 
> 标签：python-2.7, terminal

我有一个基本代码，它只是简单地循环并在 python 中打印一些数字。我的问题是我需要一种不同的方式来打印我的输出，因为我希望它们在同一行。（标准的python print 语句只是在新行上打印东西）。在做了一些研究之后，我发现我可以做这样的事情

```
 import random
from sys import stdout
    i= 0
    while i < 100:
        j = 0
        while j < 4:
            k =0
            while k < 4:
                sys.stdout.write(random.randint(0, 9))
                k += 1
            sys.stdout.write(" ") 
            j += 1   
        i += 1
        print "\n" 
```

当我使用 IDLE 运行它时，这就像魅力一样——python 的 ide，我唯一的问题是，每当我尝试从终端运行它时，它都会抱怨这个

```
 CallingCard $ python numGenerator.py 
Traceback (most recent call last):
  File "numGenerator.py", line 13, in <module>
    sys.stdout.write(random.randint(0, 9))
NameError: name 'sys' is not defined
CallingCard $ 
```

想知道从 IDLE 运行它可能是什么问题，仅供参考我使用的是 python 2.7.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:39:43.103

您需要导入 sys 模块而不仅仅是 stdout 对象，因为您从 sys 名称中引用它：

```
import sys 
```

否则，您将不得不修改您的调用，例如：

```
stdout.write("foo") 
```

或者只是使用带有逗号的打印命令来抑制换行符。

```
print "foo", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:26:09.350

找到了解决方案。深入思考有时会有所帮助 下面是代码

```
 i= 0
while i < 100:
    j = 0
    while j < 4:
        k =0
        while k < 4:
            sys.stdout.write("%s" % random.randint(0, 9))
            k += 1  
        sys.stdout.write(" ") 
        j += 1   
    i += 1
    print "\n" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T03:11:01.680

如果您确实打算打印 100 行每行四个 4 位数字，您可以使用

```
from sys import stdout
....
stdout.write(str(random.randint(0, 9))) 
```

虽然你真的仍然可以使用 print 并使用类似的东西使它更整洁

```
import random
from sys import stdout
i= 0
while i < 100:
    for j in range(4):
        print '%04d' % random.randint(0,10000),
   i += 1
   print "\n" 
```

# java - 为什么 MyEclipse 在编译时显示 join_table not found 错误

> ID：13944757
> 
> 赞同：0
> 
> 时间：2012-12-19T02:37:17.303
> 
> 标签：java, hibernate, myeclipse

我有以下两个实体。但是在 oneToMany 关系行的 Trainer 中，它显示错误消息“无法找到加入表 trainer_batch”，而我正在使用 @JoinColumn 注释。Plggrams如下...

```
@实体
@Table(name="培训师")
公共类培训师{

    @ID
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    内部标识；
    字符串名称；
    @OneToMany（级联=CascadeType.ALL）
    @JoinColumn(name="trainerid")
    设置批次=new HashSet();
    公共字符串 getName() {
        返回名称；
    }
    公共无效集合名称（字符串名称）{
        this.name = 名称；
    }
    公共设置 getBatches() {
        退货批次；
    }
    公共无效setBatches（批量）{
        批次。添加（批次）；
    }

}

@实体
@Table(name="批次")
公共类批次{

    公共字符串 getSlot() {
        返回槽；
    }
    公共无效setSlot（字符串槽）{
        this.slot = 插槽；
    }
    公共字符串 getTopic() {
        返回主题；
    }
    公共无效 setTopic（字符串主题）{
        this.topic = 主题；
    }
    @ID
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    内部标识；
    字符串槽；
    字符串主题；

}

```

persistance.xml 如下

```
<?xml 版本="1.0" 编码="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">

    <persistence-unit name="one_to_many_pk_fkPU" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <属性>
            <属性名称=“hibernate.connection.driver_class”值=“com.microsoft.sqlserver.jdbc.SQLServerDriver”/>
            <property name = "hibernate.connection.url" value = "jdbc:sqlserver://localhost:1433;DatabaseName=test; MARS_Connection=yes;"/>
            <属性名称=“hibernate.connection.username”值=“sa”/>
            <属性名称=“hibernate.connection.password”值=“测试”/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServerDialect"/>
        </属性>
    </persistence-unit>

</持久性>

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:16:22.870

你应该使用泛型作为 Batch 。像这样使用您的关系： Set<Batch> batches=new HashSet<Batch>();

# node.js - Node.js 分析：“（程序）”部分的高使用率

> ID：13944761
> 
> 赞同：4
> 
> 时间：2012-12-19T02:38:12.210
> 
> 标签：node.js, profiling, google-chrome-devtools, v8

配置：

*   Node.js 0.8.15
*   Mac OSX 10.7.5
*   [Webkit Devtools 代理](https://github.com/c4milo/node-webkit-agent)节点模块

在进行分析时，我注意到配置文件的“（程序）”部分的利用率非常高。`___psynch_rw_unlock`“手动”分析（使用 node --prof 和 mac-tick-processor）显示在 C++ 部分中花费的百分比同样高。

分析期间程序的主要用途是：

*   libxml处理
*   tls socket 读/写
*   mongodb写法

![截屏](../Images/1c5b4bc82215d0e12aab6b1488bab061.png)

这是正常行为，还是这是更深层次问题的征兆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:51:35.273

截至目前，Chrome 将原生代码和空闲时间都归类为`(program)`. 现在[http://trac.webkit.org/changeset/138004](http://trac.webkit.org/changeset/138004)已经登陆，让我们看看它是否会进入下一个 Chrome 版本......

# git - 在哪里输入 git 命令？

> ID：13944762
> 
> 赞同：9
> 
> 时间：2012-12-19T02:38:20.787
> 
> 标签：git, command-line

我很确定这对很多人来说都是一个基本问题，但这里有：

我开始阅读“Pro Git”一书，它说首先使用以下几行设置我的用户名和电子邮件：

`$ git config --global user.name "John Doe"`

`$ git config --global user.email johndoe@example.com`

我在哪里输入这些行？我尝试将它们输入命令提示符和 git GUI，但没有成功。我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T03:02:27.980

我假设你可能已经从[http://git-scm.com/download/win安装了 windows git](http://git-scm.com/download/win)

使用不会将 git 放在命令提示符下的默认设置。

通过开始菜单或右键单击文件夹使用“git bash”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T02:52:27.107

在 Windows 中按“开始”按钮，在菜单底部的搜索字段中输入“cmd”。那里有命令行控制台。尝试输入`git --version`，如果显示类似 'git version 1.8.0.2' 的内容，您就可以在此处输入所有命令了。

对于你写的那些命令`$ git xxxxxx`，只需忽略`$`开始的符号，这就像`C:\>`像操作系统一样的 unix。

# python - 什么决定了 Reportlab 表格中的垂直空间？

> ID：13944765
> 
> 赞同：10
> 
> 时间：2012-12-19T02:38:43.460
> 
> 标签：python, reportlab

我在文档中定义了这种风格：

```
styles.add(ParagraphStyle(name='Table Header', font ='Helvetica-Bold',fontSize=16, alignment=TA_CENTER)) 
```

我使用它来定义文本段落以进入每个表格的第一行（以便它们正确换行）：

```
L2sub = [(Paragraph(L[0][0], styles['Table Header']))] 
```

后来我添加表格的时候，还有一个定义样式的地方：

```
report.append(Table(data,style=[
                ('GRID',(0,0),(len(topiclist)-1,-1),0.5,colors.grey),
                ('FONT', (0,0),(len(topiclist)-1,0),'Helvetica-Bold',16),
                ('FONT', (0,1),(len(topiclist)-1,1),'Helvetica-Bold',12),
                ('ALIGN',(0,0),(-1,-1),'CENTER'),
                ('VALIGN',(0,0),(-1,-1),'MIDDLE'),
                ('SPAN',(0,0),(len(topiclist)-1,0)),
                ])) 
```

**我的问题是：**定义第一行单元格垂直高度的设置在哪里？我遇到了一些问题，即文本对于单元格来说太大和/或在单元格中设置得太低，但我无法确定是什么原因导致它或如何解决它。我已经改变了这两种尺寸，但我不能让单元格的高度都一样。当我只是将文本而不是段落放入单元格时，表格 def'n 工作得很好，但是段落引起了问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T15:24:56.257

我不相信有一个设置`TableStyle`可以让你改变行高。`Table`创建新对象时会给出该测量值：

```
Table(data, colwidths, rowheights) 
```

其中`colwidths`和`rowheights`是测量值列表，如下所示：

```
from reportlab.lib.units import inch
from reportlab.lib.styles import getSampleStyleSheet
from reportlab.platypus import Paragraph
from reportlab.platypus import Table
from reportlab.lib import colors

# Creates a table with 2 columns, variable width
colwidths = [2.5*inch, .8*inch]

# Two rows with variable height
rowheights = [.4*inch, .2*inch]

table_style = [
    ('GRID', (0, 1), (-1, -1), 1, colors.black),
    ('VALIGN', (0, 0), (-1, -1), 'MIDDLE'),
    ('ALIGN', (1, 1), (1, -1), 'RIGHT')
]

style = getSampleStyleSheet()

title_paragraph = Paragraph(
    "<font size=13><b>My Title Here</b></font>",
    style["Normal"]
)
# Just filling in the first row
data = [[title_paragraph, 'Random text string']]

# Now we can create the table with our data, and column/row measurements
table = Table(data, colwidths, rowheights)

# Another way of setting table style, using the setStyle method.
table.setStyle(tbl_style)

report.append(table) 
```

`colwidths`并且`rowheights`可以更改为适合内容所需的任何测量值。`colwidths`从左到右`rowheights`读取，从上到下读取。

如果您知道所有表格行的高度相同，则可以使用这个不错的快捷方式：

```
rowheights = [.2*inch] * len(data) 
```

这为您提供了一个列表，例如变量`[.2*inch, .2*inch, ...]`中的每一行。`data`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-21T09:19:30.157

（没有足够的声誉来评论其他答案）

关于最后一个快捷方式，只需“ROW_HEIGHT = 5 * mm”即可。无需将行高乘以表中的行数。

```
ROW_HEIGHT = 5 * mm
curr_table = Table(data, COL_WIDTHS, rowHeights=ROW_HEIGH ) 
```

节省一点内存。:)

# ruby-on-rails - 在数据库中搜索地址的用户查询字符串

> ID：13944766
> 
> 赞同：0
> 
> 时间：2012-12-19T02:39:19.680
> 
> 标签：ruby-on-rails, postgresql, geocoding

我在 Postgres 数据库上有一个 Rails 应用程序，我需要有一个搜索字段供用户输入字符串并在数据库中查找可能的地址匹配项（在城市内）。在数据库中，我有一列包含完整地址。

我不能对输入做出假设，所以我想我应该首先尝试以某种方式直接在数据库上查找地址（可能使用 LIKE 查询？），如果失败，请求地理编码 API（即谷歌）返回与查询匹配的格式良好的地址列表并在我的数据库中搜索这些地址列表。

我将不胜感激有关如何执行此操作的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:44:50.787

我不认为 FTS（全文搜索）是你想要的。您必须使用可以匹配地址的地址 API。

我已经成功且轻松地将 SmartyStreets 用于此类事情。他们有一个您可以使用的免费帐户。 [http://smartystreets.com](http://smartystreets.com)

此外，如果您确实想尝试沿着 FTS 路线走，这里有一个 Gist 解释了如何做到这一点。 [https://gist.github.com/4365593](https://gist.github.com/4365593)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:01:39.260

您可能已经知道它，但是 postresql 集成了全文搜索引擎，因此现在是利用它的好时机。我建议观看那出色[的 railscast](http://railscasts.com/episodes/343-full-text-search-in-postgresql)。

然后一旦实施：

```
class Place < AR
  def search_db_or_geokit(query)
    res = db_search()
    if res.empty?
      res = geokit_search(query)
    else
      res
    end
  end

  def geokit_search(query)
    # ...
  end

  def db_search(query)
    # ...
  end
end 
```

对于地理编码谷歌搜索 api，可能有一个很好的 gem，比如[geokit](https://github.com/imajes/geokit)

# php - Azure MySQL 错误

> ID：13944769
> 
> 赞同：0
> 
> 时间：2012-12-19T02:39:51.000
> 
> 标签：php, mysql, sql, azure

我正在尝试安装[http://prosper202.com](http://prosper202.com)（Azure 上的自托管脚本）

**这是我所做的。**

使用 MySQL 数据库创建了一个 Azure 网站。

配置的数据库登录凭据。

**现在我收到此错误**

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 12 行的“AND 202_summary_overview.click_time < ANDlanding_page_id=0”附近使用正确的语法

```
SELECT 202_aff_campaigns.aff_campaign_id
    , aff_campaign_name
    , aff_campaign_payout
    , aff_network_name
FROM 202_summary_overview
LEFT JOIN 202_aff_campaigns USING (aff_campaign_id)
LEFT JOIN 202_aff_networks USING (aff_network_id)
WHERE 202_aff_networks.user_id = '1'
    AND 202_aff_networks.aff_network_deleted = 0
    AND 202_aff_campaigns.aff_campaign_deleted = 0
    AND 202_summary_overview.click_time >=
    AND 202_summary_overview.click_time <
    AND landing_page_id = 0
GROUP BY aff_campaign_id
ORDER BY 202_aff_networks.aff_network_name ASC
    , 202_aff_campaigns.aff_campaign_name ASC

Warning: Division by zero in C:\DWASFiles\Sites\click\VirtualDirectory0\site\wwwroot\202-config\functions-tracking202.php on line 1048 SELECT * FROM 202_sort_keywords LEFT JOIN 202_keywords ON (202_sort_keywords.keyword_id = 202_keywords.keyword_id) WHERE 202_sort_keywords.user_id='1' ORDER BY 202_sort_keywords.sort_keyword_clicks DESC LIMIT

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 
```

我不知道解决这个问题。

我可以在不修改脚本的情况下使用 Azure SQL 代替 os MySQL 吗？

更远`http://click.azurewebsites.net/tracking202/setup/aff_campaigns.php`

**给我这些错误**

```
INSERT INTO `202_aff_campaigns` SET`aff_network_id`='1', `user_id`='1', `aff_campaign_name`='eDates', `aff_campaign_url`='http://googl.com', `aff_campaign_url_2`='', `aff_campaign_url_3`='', `aff_campaign_url_4`='', `aff_campaign_url_5`='', `aff_campaign_rotate`='0', `aff_campaign_payout`='0.9', `aff_campaign_cloaking`='1', `aff_campaign_time`='1355885344'

Field 'aff_campaign_id_public' doesn't have a default value 
```

托管在这里[http://prosper202.com/](http://prosper202.com/)的相同脚本正在服务器上运行数千个。但它不适用于 Azure MySQL。

**更多细节**

```
 http://i.stack.imgur.com/SfhPs.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:28:16.353

您需要为新用户在 user_pref 中添加一条记录...所以我只是将第一个用户记录复制到第二个并相应地更新 user_id。

```
CREATE TEMPORARY TABLE tmp SELECT * FROM 202_users_pref WHERE user_id = 1;
UPDATE tmp SET user_id=2 WHERE user_id = 1;
INSERT INTO 202_users_pref SELECT * FROM tmp WHERE user_id = 2;
DROP TABLE tmp; 
```

希望这可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:43:15.710

您没有提供与该列进行比较的值，

```
SELECT  ....
FROM    ....
WHERE   ....
    AND 202_aff_campaigns.aff_campaign_deleted = 0
    AND 202_summary_overview.click_time >=    // << error on this line
    AND 202_summary_overview.click_time <     // << also here
    AND landing_page_id = 0 
```

# java - 在 setter 和 getter 中获取 NULL - JAVA

> ID：13944771
> 
> 赞同：-1
> 
> 时间：2012-12-19T02:40:17.817
> 
> 标签：java

当我运行我的程序时，我总是遇到这个错误“线程“AWT-EventQueue-0”java.lang.NullPointerException中的异常”。我有成员类，我在其中编写我的 setter 和 getter。我需要的所有实体都在那里。现在我在“管理类”中有另一种方法

```
 public class Admin {
     private ArrayList<Member> members;
     private String AccessName;
     private String username;
     private String password;

     public Admin(){
        this.AccessName="Ms. April Santos";
        this.username = "estella";
        this.password = "teller";
        this.members = new ArrayList<Member>();
    }

    public ArrayList<Member> getMembers() {
        return members;
    }

    public void setMembers(ArrayList<Member> members) {
        this.members = members;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getAccessName() {
        return AccessName;
    }

    public void setAccessName(String AccessName) {
        this.AccessName=AccessName;;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Admin other = (Admin) obj;
        if ((this.username == null) ? (other.username != null) : !this.username.equals(other.username)) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 7;
        hash = 97 * hash + (this.username != null ? this.username.hashCode() : 0);
        return hash;
    }

    @Override
    public String toString() {
        return "Admin{" + "members=" + members + ", AccessName;=" + AccessName + ", username=" + username + ", password=" + password + '}';
    }

       public Member searchMember(Member member){
        return this.searchMember(member.getMemberId());
    }

         public Member searchMember(String memberId){
          for(Member member : this.members){
            if(member.getMemberId().equals(memberId)){
                return member;
            }
          }
          return null;
    }

    public Member addMember(Member member){
        if (this.searchMember(member) == null){
            this.members.add(member);
            return member;
        }
        return null;
    }

    public Member addMember(String memberId, String firstName,String middleName, String lastName){
        if (this.searchMember(memberId) == null){
            Member member = new Member(memberId, firstName,middleName, lastName);
            this.members.add(member);
            return member;
        }
        return null;
    }

    public boolean validateLogin(String username, String password){
        boolean valid = false;
        valid = this.username.equals(username) && this.password.equals(password);
        return valid;
    }

   } 
```

现在我在我的 AddMemberView(GUI) 中调用 public addMember(String memberId, String firstName,String middleName, String lastName)。我试图获取文本字段/组合框中的所有文本并进行设置，以便在我编写 DAO 代码时将其临时保存并准备好保存在数据库中。这是我的 AddMemberView btnSave 动作外观：

```
 import java.sql.SQLException;
 import java.text.*;
 import java.util.*;
 import java.util.logging.Level;
 import java.util.logging.Logger;
 import javax.swing.JOptionPane;
 import rtu.tomis.bom.Admin;
 import rtu.tomis.bom.Member;
 import rtu.tomis.dao.MemberDao;

 public class AddMemberView extends javax.swing.JPanel {

 private MainFrameView mainFrameView;
 private Member member;
  private Admin admin;

  AddMemberView(Member memb, Admin admin){

    this.member= memb;
    this.admin= admin;

}

public AddMemberView() {
    initComponents();
}

  public AddMemberView(MainFrameView mf) {
    this.mainFrameView = mf;
    initComponents();
}

    public AddMemberView(Member m) {
    this.member = m;
    initComponents();
}

  private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {                                        
    String memberid = (this.txtMembersID.getText());
    String fname= (this.txtFirstName.getText());
    String mname=(this.txtMiddleName.getText());
    String lname=(this.txtLastName.getText());
    if(this.admin.addMember(memberid, fname,mname, lname) != null)//im having null here
    {
       try{
            member = this.admin.searchMember(memberid);// and if i remove that 1st line of null. the next null pointer is here
            String month = (String)cmbMonth.getSelectedItem();
            Integer day = (Integer) cmbDay.getSelectedItem();
            Integer year = (Integer)cmbYear.getSelectedItem();
            String bday = month + " " + day + ", " + year;
            DateFormat df = DateFormat.getDateInstance(DateFormat.MEDIUM, Locale.US);
            Date dateBday = df.parse(bday);
            String Block = this.txtBlkLotNo.getText();
            String Street = (String)this.cmbStreet.getSelectedItem();
            String Brgy=(String)this.cmbBarangay.getSelectedItem();
            String City= (String)this.cmbCity.getSelectedItem();
            String Address = Block + " " + "" + Street + " ," +  Brgy + " ," + City;
            String Full = fname + " " + mname + " " + lname;
            int age= Integer.parseInt(this.txtAge.getText());
            int contact = Integer.parseInt(this.txtContact.getText());
            String region =(String) this.cmbRegion.getSelectedItem();

            this.member.setFirstName(fname);// then if i remove the two my next null line is here and those who have this.**member**.setblabla.
            this.member.setMiddleName(mname);
            this.member.setLastName(lname);
            this.member.setFullname(Full);
            this.member.setLotNo(Block);
            this.member.setBarangay(Brgy);
            this.member.setCity(City);
            this.member.setFulladdress(Address);
            this.member.setBirthday(dateBday);
            this.member.setAge(age);
            this.member.setEmailAddress(this.txtEadd.getText());
            this.member.setVotersId(this.txtVotersID.getText());
            this.member.setContactNo(contact);
            this.member.setRegion(region);
            this.member.setMemberId(memberid);
           if(this.rbtnFemale != null){
               this.member.setGender(this.rbtnFemale.getLabel());
           }
               else{
               this.member.setGender(this.rbtnFemale.getLabel());
           }

       }catch (ParseException ex) {
            System.out.println("Exception: "+ ex.getMessage());
        }
        JOptionPane.showMessageDialog(this, "Info saved!");
        JOptionPane.showMessageDialog(this,"Name" + this.member.getFirstName());

    }

} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:46:34.973

我认为您的“管理员”变量为空。你打电话给你的构造函数吗？如果是，参数是否正确？

只需写“私人管理员管理员”不要将管理员变量设为管理员对象。尝试初始化它或正确调用构造函数。

# javascript - 在选择输入上触发更改以更新其他输入

> ID：13944772
> 
> 赞同：0
> 
> 时间：2012-12-19T02:40:32.677
> 
> 标签：javascript, jquery, asp.net, html-select, casperjs

我正在研究一个刮板，只是为了从在 ASP.NET 上运行的第三方网站中的 3 个选择框中取出数据，但这里的问题是它们是级联的（不确定这是否是这样调用的）。因此，第二个选择输入中出现的内容取决于第一个选择输入中选择的内容，我想获得所有可能性，以便可以存储它们。

### 我的问题：

我很难弄清楚如何触发更改（或其他）事件，以便更新第二个输入。我该怎么做？

我正在使用 casperjs 来做这个顺便说一句，但这没关系，我只需要一种从前端 javascript 以编程方式完成它的方法。

### 所以，如果它在 chrome 控制台中工作，它将对我有用。

该表格在此页面[http://www.tuti.pt/contrat/net/default.aspx](http://www.tuti.pt/contrat/net/default.aspx)中，我所说的输入是“Distrito”和“Concelho”。

抱歉读了很久，但我想我无法隐藏更多细节。

### 我试过什么？

通常的事情，我真的认为 .click() 会起作用，但它没有，所以它应该是一些 asp.net 特殊事件。

然后我休息了一下，似乎这种特殊的堆栈和平似乎很有趣，可以找到我需要的东西。

```
Sys.Extended.UI.CascadingDropDownBehavior._clearItems (default.aspx:13)
Sys.Extended.UI.CascadingDropDownBehavior._setOptions (default.aspx:13)
Sys.Extended.UI.CascadingDropDownBehavior._onParentChange (default.aspx:13)
w.createDelegate (ScriptResource.axd:2)
w.addHandler.b.query.each.g (ScriptResource.axd:2) 
```

如果有人对此有所了解，我将不胜感激。

我刚刚看到似乎有一种方法可能是我正在寻找的方法：`raiseSelectionChanged(eventArgs)`. 我只是不知道我应该在什么对象中调用它以及我应该传递什么参数：s

最后一条信息来自[http://www.asp.net/ajaxlibrary/act_CascadingDropdown.ashx](http://www.asp.net/ajaxlibrary/act_CascadingDropdown.ashx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:42:39.303

我编写了一些代码来完全从 Chrome 的控制台中执行此操作。以下是步骤：

1.  在控制台上运行它以包含 jQuery，因为该页面似乎没有使用 jQuery：

    ```
    var jq = document.createElement('script');
    jq.src = "http://code.jquery.com/jquery-latest.min.js";
    document.getElementsByTagName('head')[0].appendChild(jq);
    jQuery.noConflict(); 
    ```

2.  现在您需要做的就是遍历选择框中的选项，`Distrito`并在请求有效负载中使用以下内容发出 POST ajax 请求：

`{'knownCategoryValues':'Distrito:1;','category':'Concelho','contextKey':''}`其中`1`是 的 ID `Distrito`，它来自 select 元素中相应选项中的值。因此，遍历它们的函数应该如下：

```
$.each( $('#ctl00_ContentPlaceHolderMain_SigaWeb_ContrataWizardNet_SigaWeb_BookMetaDadosVeiculos1_Meta_Auto_23 > option')
      , function(index,value) {   
        $.ajax({
                 url:'http://www.tuti.pt/wsSigaWebSearchContrata/wsSigaWebSearch.asmx/GetConcelhosPorDistrito'
                ,type:'POST'
                ,contentType: 'application/json; charset=UTF-8' 
                ,data: "{'knownCategoryValues':'Distrito:"+$(value).val()+";','category':'Concelho','contextKey':''}"
                ,success: function(data){
                            console.log(data);}
                          }); 
       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:13:44.633

所以，仍然没有找到如何触发事件，实际上现在我怀疑它甚至可能......也许如果有办法让对象 Sys.Extended.UI.CascadingDropDownBehavior 负责该选择输入，但我不知道如何要做到这一点。

我现在的解决方案是使用那个“库”使用的 Web 服务？更新输入。我在 Chrome 控制台中找到了用于检查他的对象的 url。刚刚创建了一个断点，用于更改第二个输入时以及更改第一个选择时它停在那里。然后我检查了本地的 CascadingDropDownBehavior 对象，并在 _serviceMethod 中找到了 Web 服务 url：D

### 更新：

好的，所以最后我只编写了一个 lil ruby​​ 脚本来从 API/WS 获取，这非常简单易行，因为似乎没有办法从 javascript 浏览器运行时触发事件。

# xcode - iphone应用程序的cocos2d json解析

> ID：13944774
> 
> 赞同：1
> 
> 时间：2012-12-19T02:40:53.160
> 
> 标签：xcode, json, cocos2d-iphone

有没有好的教程/源代码可以将json数据解析到cocos2d项目中？我知道如何将 jSon（也是 XML）解析到 xcode 中并显示到 tableview 中，但我需要为我的 cocos2d 项目这样做。这是我想做的事情：

```
#import "Eighties.h"
#import "HelloWorldLayer.h"
#import "GameScene.h"
#import "JSON.h"
#define kLatestKivaLoansURL @"http://api.kivaws.org/v1/loans/search.json?status=fundraising"
@implementation Eighties
@synthesize responseData;
+(CCScene *) scene
{
  // 'scene' is an autorelease object.
  CCScene *scene = [CCScene node];

  // 'layer' is an autorelease object.
  Eighties *layer = [Eighties node];

  // add layer as a child to scene
  [scene addChild: layer];

  // return the scene
  return scene;
}

-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super's" return value
if( (self=[super init]) ) {

    CGSize winSize = [[CCDirector sharedDirector] winSize];

    CCSprite *bg = [CCSprite spriteWithFile:@"bg.jpg"];
    [bg setPosition:ccp(winSize.width/2, winSize.height/2)];
    [self addChild:bg z:0];

    /*
    CCMenuItem *menuItems = [CCMenuItemImage itemWithNormalImage:@"back_pink.png" selectedImage:@"back_blue.png" block:^(id sender) {
        NSLog(@"Pressed");
        [[SimpleAudioEngine sharedEngine] playEffect:@"tongue-clap.wav"];
        [[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[GameScene scene] withColor:ccWHITE]];
    }];
     */

    CCMenuItem *menuItems2 = [CCMenuItemImage itemWithNormalImage:@"back_pink.png" selectedImage:@"back_blue.png" target:self selector:@selector(loadData)];

    menuItems2.position = ccp(winSize.width/2-50, winSize.height/2-50);

    CCMenu *menu = [CCMenu menuWithItems:menuItems2, nil];
    menu.position = ccp(winSize.width/2, winSize.height/2);
    [self addChild:menu];

}
return self;
}

-(void)test {
NSLog(@"Success");
UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Success"
                                                  message:@"Test Method Called"
                                                 delegate:nil
                                        cancelButtonTitle:@"OK"
                                        otherButtonTitles:nil];
[message show];
}

-(void)loadData
{
self.responseData = [NSMutableData data];

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:kLatestKivaLoansURL]];
[[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
[responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
[connection release];
self.responseData = nil;
}

#pragma mark -
#pragma mark Process loan data
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
[connection release];

NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
self.responseData = nil;

NSArray* latestLoans = [(NSDictionary*)[responseString JSONValue] objectForKey:@"loans"];
[responseString release];

//choose a random loan
for (int i=0; i<=18; i++) {
    NSDictionary* loan = [latestLoans objectAtIndex:i];

    //fetch the data
    NSNumber* fundedAmount = [loan objectForKey:@"funded_amount"];
    NSNumber* loanAmount = [loan objectForKey:@"loan_amount"];
    //float outstandingAmount = [loanAmount floatValue] - [fundedAmount floatValue];

    //NSString* name = [loan objectForKey:@"name"];
    //NSString* country = [(NSDictionary*)[loan objectForKey:@"location"] objectForKey:@"country"];

    //set the text to the label
    /*
    label.text = [NSString stringWithFormat:@"Latest loan: %@ from %@ needs another $%.2f, please help",
                  name,country,outstandingAmount
                  ];
     */

    NSLog(@"%d",i);
    //NSLog(@"%@",label.text);
    NSLog(@"\n");
    /*
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:name
                                                      message:country
                                                     delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];
    [message show];
     */
}

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:50:25.733

有很多方法可以反序列化 JSON 对象，有些方法甚至被嵌入到 SDK 中。

这个[问题](https://stackoverflow.com/questions/5813077/iphone-ios-json-parsing-tutorial/5813223#5813223)详细介绍了解决问题的几种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T03:13:00.253

或者您可以使用 JSON 并让此实用程序为您生成解析代码 [https://itunes.apple.com/us/app/json-accelerator/id511324989?mt=12](https://itunes.apple.com/us/app/json-accelerator/id511324989?mt=12)

# ruby-on-rails - 运行 rspec spec/ 不会产生正确的输出

> ID：13944777
> 
> 赞同：0
> 
> 时间：2012-12-19T02:41:29.230
> 
> 标签：ruby-on-rails, ruby, rspec

我正在编写 Michael Hartl 的 Ruby On Rails 3 教程（通过示例学习 Rails）一书。

我在第 3 章，我的输出不是迈克尔在书中的内容。有人可以帮忙吗？

```
admin@new-host:~/Desktop/sample_app$ rspec spec/
Exception encountered: #<NameError: uninitialized constant PagesController>
backtrace:
/Users/admin/Desktop/sample_app/spec/controllers/pages_controller_spec.rb:3:in `<top (required)>'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `block in load_spec_files'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `each'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load_spec_files'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:22:in `run'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/test_framework/rspec.rb:11:in `run_tests'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:13:in `block in run'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/forker.rb:21:in `block in initialize'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/forker.rb:18:in `fork'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/forker.rb:18:in `initialize'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `new'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `run'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/server.rb:48:in `run'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1548:in `perform_without_block'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1508:in `perform'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1586:in `block (2 levels) in main_loop'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1582:in `loop'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1582:in `block in main_loop' 
```

**spec_helper.rb：**

```
require 'rubygems'
require 'spork'
#uncomment the following line to use spork with the debugger
#require 'spork/ext/ruby-debug'

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However,
  # if you change any configuration or code from libraries loaded here, you'll
  # need to restart spork for it take effect.
  ENV["RAILS_ENV"] ||= 'test'
  unless defined?(Rails)
    require File.dirname(__FILE__) + "/../config/environment"
  end

  require 'rspec/rails'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir["#{File.dirname(__FILE__)}/support/**/*.rb"].each {|f| require f}

  RSpec.configure do |config|
    # == Mock Framework
    #
    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
    #
    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr
    config.mock_with :rspec

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    ActiveSupport::Dependencies.clear

  end

end

Spork.each_run do
  # This code will be run each time you run your specs.

end 
```

**根据伊斯梅尔的建议。我这样做并得到以下输出：**

```
admin@new-host:~/Desktop/sample_app$ rspec --pattern spec/*_spec.rb
Exception encountered: #<NameError: uninitialized constant PagesController>
backtrace:
/Users/admin/Desktop/sample_app/spec/controllers/pages_controller_spec.rb:3:in `<top (required)>'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `block in load_spec_files'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `each'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load_spec_files'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:22:in `run'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/test_framework/rspec.rb:11:in `run_tests'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:13:in `block in run'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/forker.rb:21:in `block in initialize'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/forker.rb:18:in `fork'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/forker.rb:18:in `initialize'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `new'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `run'
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork/server.rb:48:in `run'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1548:in `perform_without_block'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1508:in `perform'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1586:in `block (2 levels) in main_loop'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1582:in `loop'
/Users/admin/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/drb/drb.rb:1582:in `block in main_loop'

admin@new-host:~/Desktop/sample_app$ autotest
loading autotest/rails_rspec2
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/ZenTest-4.8.3/lib/autotest.rb:315:in `load': /Users/admin/Desktop/sample_app/.autotest:3: unterminated string meets end of file (SyntaxError)
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/ZenTest-4.8.3/lib/autotest.rb:315:in `block in initialize'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/ZenTest-4.8.3/lib/autotest.rb:314:in `each'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/ZenTest-4.8.3/lib/autotest.rb:314:in `initialize'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/autotest/rspec2.rb:13:in `initialize'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-rails-2.12.0/lib/autotest/rails_rspec2.rb:31:in `initialize'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/ZenTest-4.8.3/lib/autotest.rb:244:in `new'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/ZenTest-4.8.3/lib/autotest.rb:244:in `run'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/ZenTest-4.8.3/bin/autotest:6:in `<top (required)>'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/bin/autotest:19:in `load'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/bin/autotest:19:in `<main>'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:46:05.910

首先，您需要在项目目录中。

如果仍然不起作用，请尝试以这种方式运行：

```
rspec --pattern spec/*_spec.rb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:37:39.037

用以下代码替换 spec_helper 中的代码：[https ://raw.github.com/railstutorial/sample_app/master/spec/spec_helper.rb](https://raw.github.com/railstutorial/sample_app/master/spec/spec_helper.rb)

# javascript - Ajax 刷新 Yii Listview 中的空白 Javascript 警报

> ID：13944784
> 
> 赞同：4
> 
> 时间：2012-12-19T02:42:33.917
> 
> 标签：javascript, jquery, yii, alert

我在 Yii 中做了一个基本的喊话箱，一切都很好。它设置为通过 ajax 每 10 秒刷新一次，这也很有效，但是如果我在加载时单击另一个页面（当小微调器在那里时），则会出现一个空白的 javascript 警报，另一个页面加载并且警报消失，但是我不知道它来自哪里，它不在我的代码中。Firebug 没有给出任何错误，任何帮助将不胜感激。

这是刷新代码：

```
<script type="text/javascript">

$(function() {
function callAjax(){
    $.fn.yiiListView.update('Shoutbox');
    return false;
}
setInterval(callAjax, 10000 );
});
</script> 
```

这是列表视图：

```
<?php $this->widget('zii.widgets.CListView', array(
'id' => 'Shoutbox',
'dataProvider'=>$dataProvider,
'itemView'=>'shoutbox.views.shoutbox._view',
#'afterAjaxUpdate'=>'js:function(id, data) {$("abbr.timeago").timeago();}', //for ajax update
'summaryText' => '',
'emptyText' => '',
)); ?> 
```

我试过把 return: false; 在刷新但它没有工作，我注释掉了 afterAjaxUpdate 但它仍然发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:28:18.913

好的，希望这最终会对其他人有所帮助。

在 Yii 框架（版本 1.1.12）中打开文件：

> \yii\zii\widgets\assets\listview\jquery.listview.js

找到第 117 行：

```
error: function(XMLHttpRequest, textStatus, errorThrown) {
            $('#'+id).removeClass(settings.loadingClass);
            //alert(XMLHttpRequest.responseText);
        } 
```

注释掉警报，问题解决！

看起来是因为请求被打断了 Yii 抛出了一个非常有意义的错误，但是空白警报很烦人。

还记得在更改文件后清除您的资产文件夹和浏览器缓存。

# attributes - 在前端隐藏一些可配置的属性 - magento

> ID：13944785
> 
> 赞同：2
> 
> 时间：2012-12-19T02:42:37.330
> 
> 标签：attributes, hide, magento-1.7, configurable-product

请帮助...任何人

我有隐藏一些可配置属性的问题：

这些是我在后端的可配置属性：

*   形状/类型
*   砂砾和颜色
*   柄
*   物品包
*   直径
*   供应商

我的客户想在前端隐藏“制造商”属性，但想在后端导入供应商。

请查看我正在工作的网站：

[http://ridental.com.au/newsite/polishers.html/](http://ridental.com.au/newsite/polishers.html/)

我设法通过添加一些这样的 if 语句从前端隐藏它：在`app\design\frontend\default\MYTEMPLATE\template\catalog\product\view\type\options\configurable.phtml`

```
<?php
$_product    = $this->getProduct();
$_attributes = Mage::helper('core')->decorateArray($this->getAllowAttributes());
?>
<?php if ($_product->isSaleable() && count($_attributes)):?>
<dl class="outer">
<dl class="inner">
<?php foreach($_attributes as $_attribute): ?>
<?php $attCode =   $_attribute->getProductAttribute()->getFrontend()->getAttribute()->getAttributeCode(); ?>

   <?php if($attCode != "manufacturer"):?>
    <div class="dtdd-wrapper<?php if ($_attribute->decoratedIsLast){echo " last";}?>">
    <dt><label class="required"><em>*</em><?php echo $_attribute->getLabel() ?></label></dt>
    <dd<?php if ($_attribute->decoratedIsLast){?> class="last"<?php }?>>
        <div class="input-box">
            <select name="super_attribute[<?php echo $_attribute->getAttributeId() ?>]" id="attribute<?php echo $_attribute->getAttributeId() ?>" class="required-entry super-attribute-select">
                <option><?php echo $this->__('Choose an Option...') ?></option>
              </select>
    </div>
    </dd>
    </div>
  <?php endif; ?>
<?php endforeach; ?>
</dl>
</dl>
<script type="text/javascript">
    [b]var spConfig = new Product.Config(<?php echo $this->getJsonConfig() ?>);[/b]
</script> 
```

制造商不会显示在前端。

但是当我单击添加到购物车按钮时，我收到了错误：

*请指定产品的选项。*

我注意到：

`var spConfig = new Product.Config(<?php echo $this->getJsonConfig()`

它仍然引用属性“供应商”并等待用户响应在下拉列表中选择制造商。

这就是我收到错误消息的原因：请指定产品的选项。

**我的问题：**

是否可以过滤功能`getJsonConfig()`？假设不包括：

if ($attributecode != 'manufacturer'){ 做一些事情.....}

我复制了这个函数的本地版本，现在在：`app\code\local\Mage\Catalog\Block\Product\View\Type\Configurable.php`

请帮助...如果有人解决了这种问题。我尝试扩展`getJsonConfig()`以过滤某些属性，例如“供应商”，但无济于事。

我在做正确的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T17:28:10.680

根据您的描述，您可能应该在不使用“供应商”属性的情况下重新制作可配置产品。

当您制作可配置产品时，允许您使用复选框标记属性的第一个屏幕旨在定义可配置产品将*过滤*的内容，属性仍将附加到产品信息。

# jquery - 为什么我第一次点击后下拉菜单突然消失？

> ID：13944787
> 
> 赞同：2
> 
> 时间：2012-12-19T02:43:07.627
> 
> 标签：jquery, css, drop-down-menu, slidetoggle

你可以在这里看到我的现场演示[。](http://d3sine.com/demo/nana/index_mobile.html)我希望下拉菜单正确显示。现在它在第一次点击时突然隐藏了。当单击当前显示的下拉菜单之外的任何位置时，我想让下拉菜单消失。我该怎么做？

这是我的 jQuery 代码

```
$(document).ready(function () { 
    $('#jsddm > li').click(function(e){
        e.preventDefault();
        $(this).find('ul').eq(0).css('visibility', 'visible').slideToggle();
    });
}); 
```

我注意到如果`.css('visibility', 'visible')`被删除，下拉菜单将不再起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:09:21.517

由于仅在单击“li”元素时才调用您的函数，因此单击文档中的其他任何位置都不会产生任何效果。您可以向隐藏菜单的整个主体添加单击事件。为此，您还需要阻止菜单中的单击事件冒泡到文档，否则它将立即显示然后隐藏。

尝试这样的事情：

```
$(document).ready(function () {

$('#jsddm > li').click(function(e){
      e.stopPropagation();
      e.preventDefault();
      $(this).find('ul').eq(0).slideToggle();
});

$(document).click(function (e) {
    $('#jsddm > li').find('ul').eq(0).slideUp();
}); 
```

});

你也不需要使用可见性：隐藏，它只是让你做更多的工作。这是我对 CSS 所做的编辑以及上面的编辑代码，它似乎在我制作的本地副本中工作：

代替

```
#menu #jsddm li ul{margin: 0; padding: 0; position: absolute; visibility: hidden; width:220px; z-index:9999;} 
```

和

```
#menu #jsddm li ul{margin: 0; padding: 0; position: absolute; display:none; width:220px; z-index:9999;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:59:39.753

尝试一开始就将所有标签的“显示”设置为“无”。

```
$(document).ready(function () { 
   $('#jsddm > li > ul').css("display", "none");
   // ur code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T02:49:26.377

也许你应该先检查它是否已经可见，然后再做你的代码。就像是：

```
$(document).ready(function () { 
    $('#jsddm > li').click(function (e) {
        e.preventDefault();
        if ($(this).find('ul').eq(0).is(':visible')) {
            $(this).find('ul').eq(0).slideUp();
        } else {
            $(this).find('ul').eq(0).slideDown();
        }
    });
}); 
```

# regex - Perl，如何从这个完整路径中获取目录路径？

> ID：13944788
> 
> 赞同：0
> 
> 时间：2012-12-19T02:43:07.423
> 
> 标签：regex, perl

> **可能重复：**
> [给定文件的完整路径，我如何只获取没有文件名的路径？](https://stackoverflow.com/questions/2582132/given-the-full-path-to-a-file-how-do-i-get-just-the-path-without-the-filename)

我的完整路径可以有这些类型的模式。如何获取目录路径？

```
file=M:\ccadm01_IACB_DEV\Informatica_AVOB\IACB_src\parm\d_param_ZRK176E
file=M:\ccadm01_IACB_DEV\Informatica_AVOB\IACB_src\parm\p_param_HCB@002.txt
file=M:\ccadm01_IACB_DEV\Informatica_AVOB\IACB_src\parm\p_param_QCB@B006.1.txt 
```

谢谢吉荣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:43:10.420

如前所述，您可以使用许多 CPAN 模块，这意味着您可以避免进行字符串操作。例如

```
use File::Basename 'fileparse';

my @files = qw(
    file=M:\ccadm01_IACB_DEV\Informatica_AVOB\IACB_src\parm\d_param_ZRK176E
    file=M:\ccadm01_IACB_DEV\Informatica_AVOB\IACB_src\parm\p_param_HCB@002.txt
    file=M:\ccadm01_IACB_DEV\Informatica_AVOB\IACB_src\parm\p_param_QCB@B006.1.txt
);

my @dirs = map { (fileparse($_))[1] } grep { s/^file=// } @files;
print join "\n", @dirs; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:01:58.950

这能解决你的问题吗

```
my @list = qw(
  file=M:\ccadm01_IACB_DEV\Informatica_AVOB\IACB_src\parm\d_param_ZRK176E
  file=M:\ccadm01_IACB_DEV\Informatica_AVOB\IACB_src\parm\p_param_HCB@002.txt
  file=M:\ccadm01_IACB_DEV\Informatica_AVOB\IACB_src\parm\p_param_QCB@B006.1.txt
);

for my $line (@list) {
  my @split_path =  split(/\\/, $line);
  for my $i (1..$#split_path) {
    print @split_path[$i], "/";
  }
  print "\n";
} 
```

# ruby-on-rails - Rails“update_attributes”跳过验证？

> ID：13944790
> 
> 赞同：1
> 
> 时间：2012-12-19T02:43:41.957
> 
> 标签：ruby-on-rails, rspec

我有以下简化模型：

```
class User
  attr_accessible :password
  validates :password, :presence => true
  validates_confirmation_of :password, :length => { :minimum => 4 }
end 
```

这很简单。我正在使用 RSpec/FactoryGirl 对其进行测试，并进行了以下测试：

```
it "cannot create with password < 4 characters" do
  expect{ model = FactoryGirl.create(:user, :password => "12", :password_confirmation => "12") }.to raise_error
end

it "cannot update to password < 4 characters" do
  model = FactoryGirl.create(:user)
  model.should be_valid
  model.update_attributes({:password => "12", :password_confirmation => "12"})
  model.reload
  model.password.should_not eq("12")
end 
```

但是，第二次测试失败。由于某种原因，“12”似乎可以作为有效密码保存到数据库中。为什么？API 声明`update_attributes`不应绕过任何验证！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T02:57:20.120

I don't think it is skipping validations.

I suspect this:

```
model.update_attributes({:password => "12", :password_confirmation => "12"}) 
```

is returning false. Password is probably not a column in your database, rather you probably have crypted_password and password_salt so reloading it does not read the password from the database (this would be bad)

Also, you probably want :

```
attr_accessible :password, :password_confirmation 
```

# winforms - C++/CLI Timer 冻结应用程序

> ID：13944791
> 
> 赞同：1
> 
> 时间：2012-12-19T02:43:54.173
> 
> 标签：winforms, timer, c++-cli

我在 C++ Windows 窗体应用程序中使用计时器。使用 WinSock2 处理从服务器发送的接收消息。我的计时器的当前代码是，

```
private: System::Void tmrMessages_Tick(System::Object^  sender, System::EventArgs^  e) {

int ID;
char* cID = new char[64];
char* message = new char[256];

ZeroMemory(cID, 64);
ZeroMemory(message, 256);
if(recv(sConnect, message, 256, NULL) != SOCKET_ERROR && recv(sConnect, cID, 64, NULL) != SOCKET_ERROR)
{
    ID = atoi(cID);
    if (ID == 1)
    {
        lbxMessages->Items->Add("hello");
    }
    }
} 
```

我没有让它将变量添加到列表框中，因为我想测试并确保它首先工作。它确实有效，但是它使应用程序变得如此缓慢，以至于根本不允许任何用户输入。它确实显示了正在更新的列表框，但就像我说的那样，不允许我移动窗口、单击文本框或任何东西。如果您知道为什么会发生这种情况，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:51:47.810

如果这些正在阻塞读取，它们将冻结 UI 线程，直到您获得数据。

你应该做的是设置非阻塞模式并读取直到你填满你的缓冲区，这可能需要多次`recv`调用，处理它。

我真的很喜欢`WSAAsyncSelect`这个......它会自动将套接字置于非阻塞模式，并在数据可用时向您的窗口发送一条消息。您可以通过覆盖轻松处理该消息`WndProc`。

它应该非常简单：

```
#include <winsock2.h>
#include <windows.h>

const unsigned WM_SOCKETREADY = WM_USER + 100; 
```

...

当您打开套接字时（假设这是表单的成员函数），调用

```
WSAAsyncSelect(sConnect, HWND(Handle.ToPointer()), WM_SOCKETREADY, FD_READ); 
```

然后`WndProc`（您应该覆盖）将消息传递给它

```
virtual void WndProc( Message% m ) override
{
    switch (m.Msg) {
        case WM_SOCKETREADY:
            ReadSocketHandler();
            return;

        default:
            Form::WndProc(m);
            return;
    }
} 
```

# java - 无法弄清楚如何设置背景图像

> ID：13944795
> 
> 赞同：1
> 
> 时间：2012-12-19T02:44:30.683
> 
> 标签：java, user-interface, background

> **可能重复：**
> [如何在 java 的 Swing GUI 中将图像设置为 Frame 的背景？](https://stackoverflow.com/questions/1466240/how-to-set-an-image-as-a-background-for-frame-in-swing-gui-of-java)

我无法弄清楚如何在我的窗口上设置背景图像。我不确定我的代码有什么问题。该图像称为 Background.jpg
有谁知道我的代码做错了什么以及如何修复它

```
//apples code  

import javax.swing.JFrame;
import java.applet.*;
import javax.swing.*;
import java.awt.*;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JPanel;
import java.awt.*;
import javax.swing.*;

class  Apples{

public static void main(String[] args) {
  gui go = new gui();
  go.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  go.setSize(200,290);
  go.setVisible(true);

 }
}

 //Gui Code

    import java.awt.FlowLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.*;
import java.awt.Color;
import java.awt.Font;
import javax.swing.JFrame;
import javax.swing.JTextArea;

public class gui extends JFrame{
     private JButton A;
     private JButton B;
     private JButton C;
     private JButton D;
     private JButton E;
     private JButton F;
     private JButton G;
     private JButton H;
     private JButton I;
     private JButton J;
     private JButton K;
     private JButton L;
     private JButton M;
     private JButton N;
     private JButton O;
     private JButton P;
     private JButton Q;
     private JButton R;
     private JButton S;
     private JButton T;
     private JButton U;
     private JButton V;
     private JButton W;
     private JButton X;
     private JButton Y;
     private JButton Z;

     public gui(){
        super("APUSH ABCs");
        setLayout(new FlowLayout());

        A = new JButton("A");
        add(A);
        B = new JButton("B");
        add(B);
        C = new JButton("C");
        add(C);
        D = new JButton("D");
        add(D);
        E = new JButton("E");
        add(E);
        F = new JButton("F");
        add(F);
        G = new JButton("G");
        add(G);
        H = new JButton("H");
        add(H);
        I = new JButton("I");
        add(I);
        J = new JButton("J");
        add(J);
        K = new JButton("K");
        add(K);
        L = new JButton("L");
        add(L);
        M = new JButton("M");
        add(M);
        N = new JButton("N");
        add(N);
        O = new JButton("O");
        add(O);
        P = new JButton("P");
        add(P);
        Q = new JButton("Q");
        add(Q);
        R = new JButton("R");
        add(R);
        S = new JButton("S");
        add(S);
        T = new JButton("T");
        add(T);
        U = new JButton("U");
        add(U);
        V = new JButton("V");
        add(V);
        W = new JButton("W");
        add(W);
        X = new JButton("X");
        add(X);
        Y = new JButton("Y");
        add(Y);
        Z = new JButton("Z");
        add(Z);

        HandlerClass handler = new HandlerClass();
        A.addActionListener(handler);
        B.addActionListener(handler);
        C.addActionListener(handler);
        D.addActionListener(handler);
        E.addActionListener(handler);
        F.addActionListener(handler);
        G.addActionListener(handler);
        H.addActionListener(handler);
        I.addActionListener(handler);
        J.addActionListener(handler);
        K.addActionListener(handler);
        L.addActionListener(handler);
        M.addActionListener(handler);
        N.addActionListener(handler);
        O.addActionListener(handler);
        P.addActionListener(handler);
        Q.addActionListener(handler);
        R.addActionListener(handler);
        S.addActionListener(handler);
        T.addActionListener(handler);
        U.addActionListener(handler);
        V.addActionListener(handler);
        W.addActionListener(handler);
        X.addActionListener(handler);
        Y.addActionListener(handler);
        Z.addActionListener(handler);
    }
      private class HandlerClass implements ActionListener{
  public void actionPerformed(ActionEvent event){

     Object button = event.getSource();

     if(button == A){
String text = "asaasas ";
  JTextArea textArea = new JTextArea(text);

  textArea.setColumns(30);
  textArea.setLineWrap( true );
  textArea.setWrapStyleWord( true );
  textArea.setSize(textArea.getPreferredSize().width, 1);
Font font = new Font("Verdana", Font.BOLD, 12);
textArea.setFont(font);
textArea.setForeground(Color.BLUE);
  JOptionPane.showMessageDialog(
   null, textArea, "Appomattox Court House", JOptionPane.PLAIN_MESSAGE);

     }else if(button == B){
     String text = "Duriing the last days of the Civil War, Robert E. Lee had abandoned the Confederate capital of Richmond and city of Petersburg, hoping to escape with the remnants of his Army of Northern Virginia to meet up with additional Confederate forces in North Carolina and resume fighting. Union Forces cut him off and finally the Continental army had to surrender. The Appomattox Courthouse is the locaiton where General Robert E. Lee of the Confederate Army surrendered his approximately 28,000 troops to Ulysses S. Grant and the Union Army on April 9, 1865, ending the American Civil War. ";
  JTextArea textArea = new JTextArea(text);

  textArea.setColumns(30);
  textArea.setLineWrap( true );
  textArea.setWrapStyleWord( true );
  textArea.setSize(textArea.getPreferredSize().width, 1);
Font font = new Font("Verdana", Font.BOLD, 12);
textArea.setFont(font);
textArea.setForeground(Color.BLUE);
  JOptionPane.showMessageDialog(
   null, textArea, "Appomattox Court House", JOptionPane.PLAIN_MESSAGE);
     } else if(button == C){

String text = "Duriing the last days of the Civil War, Robert E. Lee had abandoned the Confederate capital of Richmond and city of Petersburg, hoping to escape with the remnants of his Army of Northern Virginia to meet up with additional Confederate forces in North Carolina and resume fighting. Union Forces cut him off and finally the Continental army had to surrender. The Appomattox Courthouse is the locaiton where General Robert E. Lee of the Confederate Army surrendered his approximately 28,000 troops to Ulysses S. Grant and the Union Army on April 9, 1865, ending the American Civil War. ";
  JTextArea textArea = new JTextArea(text);

  textArea.setColumns(30);
  textArea.setLineWrap( true );
  textArea.setWrapStyleWord( true );
  textArea.setSize(textArea.getPreferredSize().width, 1);
Font font = new Font("Verdana", Font.BOLD, 12);
textArea.setFont(font);
textArea.setForeground(Color.BLUE);
  JOptionPane.showMessageDialog(
   null, textArea, "Appomattox Court House", JOptionPane.PLAIN_MESSAGE);     
       }

      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:37:53.070

这个...

```
public void paint(Graphics g)
{
    // Draws the img to the BackgroundPanel.
    g.drawImage(img, 0, 0, null);
} 
```

从来都不是一个好主意。你没有尊重油漆链。油漆链是一组复杂的方法，可以完成很多重要的工作。

一个更好的主意是使用`paintComponent`

```
protected void paintComponent(Graphics g)
{
    super.paintComponent(g);
    // Draws the img to the BackgroundPanel.
    g.drawImage(img, 0, 0, null);
} 
```

您将遇到的另一个问题是您没有让组件有机会监视图像的状态。因为您正在使用`Toolkit.getDefaultToolkit().createImage("Background.jpg")`它，所以方法可能会使用后台线程来加载图像。您需要一些方法来告诉组件图像已完成加载并准备好绘画......

```
g.drawImage(img, 0, 0, this); 
```

这将让组件监控图像的状态并根据需要更新自身。

`Toolkit#createImage`可能不是加载图像的最佳选择。如果无法加载图像，该方法不会抛出异常。

更好用`ImageIO#read`。如果类无法加载图像，这不仅会抛出异常，而且还保证返回完全限定的图像（也就是说，它会阻塞直到图像被实际加载）。

你还没有告诉我们 的位置`Background.jpg`。图片是否为嵌入式资源。如果图像只是一个文件（在应用程序的执行上下文中），那么您尝试加载文件就可以了，如果它是嵌入式资源（包含在应用程序 Jar 中），那么您需要使用`Class#getResource`...

```
img = ImageIO.read(getClass().getResource("/Background.jpg")); 
```

您没有为`BackgroundPanel`. 一些布局管理器将无法按照您期望的方式布局此容器。

```
public Dimension getPreferredSize() {
    return img == null ? super.getPreferredSize() : new Dimension(img.getWidth(this), img.getHeight(this));
} 
```

此外，正如已经开始提到的，不要忘记将面板添加到您的 UI ;)

**更新了示例**

我还注意到您似乎在混合 Swing 和 AWT 组件，这绝不是一个好主意，如果可以避免，请这样做（`Panel`是 AWT/重量级组件）。

![在此处输入图像描述](../Images/f3b4c67ded032fbb8e7d9223d0428895.png)

```
public class Apples {

    public static void main(String[] args) {
        new Apples();
    }

    public Apples() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new BackgroundPanel());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class BackgroundPanel extends JPanel {

        Image img;

        public BackgroundPanel() {
            try {
                img = ImageIO.read(getClass().getResource("/Background.jpg"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            // Draws the img to the BackgroundPanel.
            if (img != null) {
                g.drawImage(img, 0, 0, null);
            }
        }

        public Dimension getPreferredSize() {
            return img == null ? super.getPreferredSize() : new Dimension(img.getWidth(this), img.getHeight(this));
        }
    }
} 
```

# python - 即使文件不存在，如何将文件上传到子文件夹

> ID：13944798
> 
> 赞同：2
> 
> 时间：2012-12-19T02:45:28.873
> 
> 标签：python, google-drive-api

我有一个 Django 应用程序需要在 google 驱动器中创建一个文件：在 FolderB/Sub1/Sub2/file.pdf 中。我有 FolderB 的 ID，但我不知道 Sub1 或 Sub2 是否存在。如果不是，则应创建它并将 file.pdf 放入其中。

我想我可以查看每个级别的孩子并在每个级别创建文件夹（如果它不存在），但这似乎只是为了创建一个文件而进行的大量检查和 api 调用。尝试容纳多个文件夹结构也是一项艰巨的任务（即，一个可以接受任何深度的路径并在那里上传文件的python函数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:12:38.173

您提出的解决方案是正确的。正如您所意识到的，Drive 文件系统与分层文件系统并不完全一样，因此您必须执行这些检查。

您可以执行的一项优化是首先尝试找到孙文件夹 (Sub2)，这样您将节省大量调用。

# java - if语句比较java android中的字符串

> ID：13944799
> 
> 赞同：9
> 
> 时间：2012-12-19T02:45:36.103
> 
> 标签：java, android, eclipse, string, if-statement

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我正在尝试在 az DBOpenHelper extends SQLOpenHelper 类中编写一个方法。它应该评估数据库中是否有同名的条目。

```
public boolean existsContact(Contact contact) {

    SQLiteDatabase db = this.getReadableDatabase();
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;
    Cursor cursor = db.rawQuery(selectQuery, null);
    if (cursor.moveToFirst()) {
        do {

            String name = cursor.getString(1);
            String cname = contact.getName();
            if (name == cname) {

                cursor.close();
                db.close();
                return true;
            }

        } while (cursor.moveToNext());
    }

    db.close();

    return false;
} 
```

这是 Contact 类的相关部分：

```
 public class Contact {

    String _name;
    public String getName(){
        return this._name;
    }
    } 
```

现在奇怪的是：

场景 A：`if (name == cname)`其中`name = "foo"`和`cname = "foo"` 等于假。Eclipse 调试器显示名称的 foo 和 cname 的 foo 具有不同的 id。如之前在代码中看到的那样填充两个变量。

场景 B：`if(name == cname)`变量的加载方式如下：

```
String name = "foo";
String cname = "foo";
         statement equals true as it's supposed to. 
```

场景 C：`if("foo" == "foo")`等于 true...但是...调试器退出窗口。LogCat 显示调试器已连接，但 Eclipse 的调试透视图中没有任何活动。断点没有影响。没有显示线程。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-19T02:47:28.190

在 java 中，`==`在两个对象上使用时，实际上并没有比较字符串本身。您将需要使用`.equals(String)`.

`==`实际上比较两个对象的引用，而不是它们的值。

`string1.equals(String target)`根据字符串中的实际字符比较两个字符串。

见： http: [//www.leepoint.net/notes-java/data/expressions/22compareobjects.html](http://www.leepoint.net/notes-java/data/expressions/22compareobjects.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T02:49:02.933

**== 运算符检查对象引用是否相等但 equals() 方法检查值是否相同**

```
 if (name == cname) 
   {    
    cursor.close();
    db.close();
    return true;
  } 
```

**随之改变**

```
 if (name.equals(cname)){        
    cursor.close();
    db.close();
   return true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T02:56:27.800

在比较 Java 中非原始数据类型的对象时 ( `int, char, boolean, etc...`)，您必须使用方法`[Object#equals(Object)](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29 "Object.equals(Object)")`，该方法返回一个布尔值。

因此，当您比较两个字符串时，您实际上是在检查两个对象是否是同一个实例，而不是实际值。

您所要做的就是更改`name == cname`为`name.equals(cname)`.

# jquery - 在 mouseenter 和 mouseleave 上与 HTML 交互

> ID：13944800
> 
> 赞同：0
> 
> 时间：2012-12-19T02:45:36.767
> 
> 标签：jquery, html, css

[这](http://jsfiddle.net/DnNkk/)是我的代码；我试图让按钮在悬停时变黑。

我目前的 jQuery （同样我不知道多少还在学习）：

```
$(document).ready(function() {
    $('div').mouseenter(function() {
        $('div').fadeTo('fast', 1);
    });
    $('div').mouseleave(function() {
        $('div').fadeTo('fast', 0.5);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:48:09.447

jsfiddle 中的问题是您没有从左侧包含 jquery ..

同样在事件处理程序中，您可能希望使用它`this`来定位特定元素，而不是使用`$('div')`它将定位页面中的所有 div。

```
$(document).ready(function() {
    $('div').mouseenter(function() {
        $(this).fadeTo('fast', 1);
    });
    $('div').mouseleave(function() {
        $(this).fadeTo('fast', 0.5);
    });
}); 
```

* * *

但是，您可以在不使用任何 javascript/jquery 的情况下执行相同的操作。但只需使用 CSS 过渡

```
div {
    opacity:0.5;
    border-radius:5px;
    width:20%;
    height:100%;
    background-color:black;
    text-align:center;
    border-color:blue;
    float:left;
    color:#FFFFFF;

    transition:opacity 1s; /*added this to enable transitions on opacity of divs*/
}
div:hover{
    opacity:1;
} 
```

演示在[http://jsfiddle.net/gaby/DnNkk/2/](http://jsfiddle.net/gaby/DnNkk/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T02:48:00.303

在左侧菜单中，您有一个选项`Chose Framework`，您必须添加`jQuery`，而您忘记了。

[**演示**](http://jsfiddle.net/DnNkk/1/)

# android - 为什么链接元素的 onload 属性对于 android 股票浏览器不可靠？

> ID：13944802
> 
> 赞同：6
> 
> 时间：2012-12-19T02:46:07.103
> 
> 标签：android, stylesheet, onload

```
 var style1 = document.createElement("link");
       style1.id = "rel";
       style1.rel = "stylesheet";
       style1.href = "http://www.mysite.com/css.css";
       style1.onload = function(){document.body.innerHTML+="fffffff";};
       document.getElementsByTagName("head")[0].appendChild(style1); 
```

此代码适用于 Chrome/Firefox，但我的 Froyo (2.3) 和 Jellybean (4.1) Android 设备上的普通浏览器不会打印任何内容。有什么问题？我想如果我可以执行一些链接的 js onload。在我的情况下，其他任何事情都会构成黑客攻击。：/

问题不在于innerHTML。如果需要，请尝试使用警报（后果自负）。

另一个答案提到通过执行检查此功能

```
var huh = 'onload' in document.createElement('link'); 
```

..但这在两种股票浏览器中都是如此！伙计们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-21T09:28:13.060

Android 浏览器不支持元素的“onload”/“onreadystatechange”事件：http: [//pieisgood.org/test/script-link-events/](http://pieisgood.org/test/script-link-events/)
但它返回：

```
"onload" in link === true 
```

因此，我的解决方案是从 userAgent 检测 Android 浏览器，然后在样式表中等待一些特殊的 css 规则（例如，重置“body”边距）。
如果它不是 Android 浏览器并且它支持“onload”事件——我们将使用它：

```
var userAgent = navigator.userAgent,
    iChromeBrowser = /CriOS|Chrome/.test(userAgent),
    isAndroidBrowser = /Mozilla\/5.0/.test(userAgent) && /Android/.test(userAgent) && /AppleWebKit/.test(userAgent) && !iChromeBrowser; 

addCssLink('PATH/NAME.css', function(){
    console.log('css is loaded');
});

function addCssLink(href, onload) {
    var css = document.createElement("link");
    css.setAttribute("rel", "stylesheet");
    css.setAttribute("type", "text/css");
    css.setAttribute("href", href);
    document.head.appendChild(css);
    if (onload) {
        if (isAndroidBrowser || !("onload" in css)) {
            waitForCss({
                success: onload
            });
        } else {
            css.onload = onload;
        }
    }
}

// We will check for css reset for "body" element- if success-> than css is loaded
function waitForCss(params) {
    var maxWaitTime = 1000,
        stepTime = 50,
        alreadyWaitedTime = 0;

    function nextStep() {
        var startTime = +new Date(),
            endTime;

        setTimeout(function () {
            endTime = +new Date();
            alreadyWaitedTime += (endTime - startTime);
            if (alreadyWaitedTime >= maxWaitTime) {
                params.fail && params.fail();
            } else {
                // check for style- if no- revoke timer
                if (window.getComputedStyle(document.body).marginTop === '0px') {
                    params.success();
                } else {
                    nextStep();
                }
            }
        }, stepTime);
    }

    nextStep();
} 
```

演示：[http ://codepen.io/malyw/pen/AuCtH](http://codepen.io/malyw/pen/AuCtH)

# delphi - 如何为某种类型的所有实例实现我自己的自定义属性编辑器？

> ID：13944810
> 
> 赞同：10
> 
> 时间：2012-12-19T02:47:03.350
> 
> 标签：delphi, ide, delphi-xe2, custom-component, propertyeditor

我已经遵循了一些关于创建自定义属性编辑器对话框的教程，但是涉及的东西太多，我无法让它正常工作。我想要完成的是一个带有日期选择器（日历）、时间选择器以及确定和取消按钮的自定义表单。表单完全没有问题，但是我将如何实现它，以便我可以使用按钮在某种类型的任何组件中发布属性以启动属性编辑器？

我想完全覆盖该`TDateTime`类型并将我的自定义编辑器放在它的位置，因此无论`TDateTime`在对象检查器中发布并显示 a 的任何地方，我都可以使用此编辑器在同一个窗口中同时修改日期和时间。

问题是关于创建自定义属性编辑器的文档很差，尽管一些资源非常详尽，但它们涉及的功能过于详细，并且缺乏对最常见场景的理解。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T02:47:03.350

我不想在这里问这个问题并期望任何人为我回答，所以我自己做了研究来解决我的问题，我想分享这个迷你项目所涉及的独特经验，因为我相信其他人是对同样的事情感到沮丧。

自定义属性编辑器、对话框和组件编辑器有许多不同的可能性。这尤其需要`TDateTimeProperty`后代。这将允许您能够直接在对象检查器中以纯文本 (String) 形式编辑属性的值，同时保持 DateTime 格式。

我假设您已经具备创建自定义组件和可以从中发布此属性编辑器的包的一般知识，因为这本身就是一堂课，我不会介绍。这只需要在过程中放置​​一行代码`Register`，但我们稍后会谈到。

首先，您需要在您的`Design-Time`包中创建一个新表单，您的组件已在其中注册。命名单元`DateTimeProperty.pas`，并命名表单`DateTimeDialog`（从而制作表单的类`TDateTimeDialog`）。放置您需要的任何控件，在本例中为`TMonthCalendar`, `TDateTimePicker`（`Kind`设置为`dtkTime`）和 2 个`TBitBtn`控件，一个标`OK`有`ModalResult`of `mrOK`，另一个标`Cancel`有`ModalResult`of `mrCancel`。

你的单位应该是这样的：

```
unit DateTimeProperty;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs,
  Vcl.ComCtrls, Vcl.StdCtrls, Vcl.Buttons;

type
  TDateTimeDialog = class(TForm)
    dtDate: TMonthCalendar;
    dtTime: TDateTimePicker;
    BitBtn1: TBitBtn;
    BitBtn2: TBitBtn;
  private

  public

  end;         

var
  DateTimeDialog: TDateTimeDialog;

implementation

{$R *.dfm}

end. 
```

这是`DFM`此表单背后的代码：

```
object DateTimeDialog: TDateTimeDialog
  Left = 591
  Top = 158
  BorderIcons = [biSystemMenu]
  BorderStyle = bsToolWindow
  Caption = 'Pick Date/Time'
  ClientHeight = 231
  ClientWidth = 241
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  Position = poScreenCenter
  DesignSize = (
    241
    231)
  PixelsPerInch = 96
  TextHeight = 13
  object dtDate: TMonthCalendar
    Left = 8
    Top = 31
    Width = 225
    Height = 166
    Anchors = [akLeft, akRight, akBottom]
    Date = 41261.901190613430000000
    TabOrder = 1
  end
  object dtTime: TDateTimePicker
    Left = 8
    Top = 8
    Width = 113
    Height = 21
    Date = 41261.000000000000000000
    Time = 41261.000000000000000000
    Kind = dtkTime
    TabOrder = 2
  end
  object BitBtn1: TBitBtn
    Left = 158
    Top = 200
    Width = 75
    Height = 25
    Caption = 'OK'
    Default = True
    ModalResult = 1
    TabOrder = 0
  end
  object BitBtn2: TBitBtn
    Left = 77
    Top = 200
    Width = 75
    Height = 25
    Caption = 'Cancel'
    ModalResult = 2
    TabOrder = 3
  end
end 
```

现在，将`DesignEditors`and添加`DesignIntf`到您的`uses`子句中。确保您已`DesignIDE`在`Requires`此`Design-Time`包中声明。这是发布任何属性编辑器所必需的。

在表单中，使用属性 getter 和 setter创建一个名为`DateTime`type的新公共属性。`TDateTime`此属性将允许您轻松读取/写入`TDateTime`选择实际代表的完整值。所以你应该在你的表格中有这个：

```
private
  function GetDateTime: TDateTime;
  procedure SetDateTime(const Value: TDateTime);
public
  property DateTime: TDateTime read GetDateTime write SetDateTime;

....

function TDateTimeDialog.GetDateTime: TDateTime;
begin
  Result:= Int(dtDate.Date) + Frac(dtTime.Time);
end;

procedure TDateTimeDialog.SetDateTime(const Value: TDateTime);
begin
  dtDate.Date:= Value;
  dtTime.DateTime:= Value;
end; 
```

接下来我们需要添加实际的属性编辑器类。在下面创建这个`{$R *.dfm}`类`implementation`：

```
type
  TDateTimeEditor = class(TDateTimeProperty)
  public
    procedure Edit; override;
    function GetAttributes: TPropertyAttributes; override;
    function GetValue: String; override;
    procedure SetValue(const Value: String); override;
  end;

procedure TDateTimeEditor.Edit;
var
  F: TDateTimeDialog;
begin
  //Initialize the property editor window
  F:= TDateTimeDialog.Create(Application);
  try
    F.DateTime:= GetFloatValue;
    if F.ShowModal = mrOK then begin
      SetFloatValue(F.DateTime);
    end;
  finally
    F.Free;
  end;
end;

function TDateTimeEditor.GetAttributes: TPropertyAttributes;
begin
  //Makes the small button show to the right of the property
  Result := inherited GetAttributes + [paDialog];
end;

function TDateTimeEditor.GetValue: String;
begin
  //Returns the string which should show in Object Inspector
  Result:= FormatDateTime('m/d/yy h:nn:ss ampm', GetFloatValue);
end;

procedure TDateTimeEditor.SetValue(const Value: String);
begin
  //Assigns the string typed in Object Inspector to the property
  inherited;
end; 
```

最后，我们需要添加一个`Register`过程来执行这个新属性编辑器的实际注册：

```
procedure Register;
begin
  RegisterPropertyEditor(TypeInfo(TDateTime), nil, '', TDateTimeEditor);
end; 
```

现在，在调用`RegisterPropertyEditor`. 由于第二个和第三个参数是`nil`一个空字符串，这意味着编辑器将应用于`TDateTime`. 查看此过程以获取有关使其特定于某些组件和属性实例的更多信息。

这是安装后的最终结果...

![最终属性编辑器示例](../Images/c772cc7727f98af23b70379531a28ca1.png)

贡献的自定义属性编辑器的一些好的资源如下：

1.  [如何制作自定义组件属性？](https://stackoverflow.com/questions/8953083/how-to-make-custom-component-property)
2.  [http://delphi.about.com/library/bluc/text/uc092501d.htm](http://delphi.about.com/library/bluc/text/uc092501d.htm)
3.  [http://www.sandownet.com/propedit.html](http://www.sandownet.com/propedit.html)

# c# - 将类转换为数组

> ID：13944816
> 
> 赞同：12
> 
> 时间：2012-12-19T02:47:53.880
> 
> 标签：c#, arrays, class

我有一个*DisplayedData*类...

```
 public class DisplayedData
  {
    private int _key;
    private String _username;
    private String _fullName;
    private string _activated;
    private string _suspended;

    public int key { get { return _key; } set { _key = value; } }
    public string username { get { return _username; } set { _username = value; } }
    public string fullname { get { return _fullName; } set { _fullName = value; } }
    public string activated { get { return _activated; } set { _activated = value; } }
    public string suspended { get { return _suspended; } set { _suspended = value; } }
  } 
```

我想将此类中的对象放入一个数组中，该类中的所有对象都应转换为 String[]

我有..

```
DisplayedData _user = new DisplayedData();
String[] _chosenUser = _user. /* Im stuck here :) 
```

或者我可以创建一个数组，其中所有项目都由不同数据类型的变量组成，这样整数仍然是整数，所以字符串也是？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-19T03:04:21.407

您可以“用自己的双手”创建一个数组（请参阅[数组教程](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)）：

```
String[] _chosenUser = new string[] 
{ 
    _user.key.ToString(), 
    _user.fullname,
    _user.username,
    _user.activated,
    _user.suspended
}; 
```

或者您可以使用[反射（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)：

```
_chosenUser = _user.GetType()
                    .GetProperties()
                    .Select(p =>
                        {
                            object value = p.GetValue(_user, null);
                            return value == null ? null : value.ToString();
                        })
                    .ToArray(); 
```

# java - 你如何让java方法注释在scala中工作

> ID：13944819
> 
> 赞同：8
> 
> 时间：2012-12-19T02:48:06.890
> 
> 标签：java, scala, reflection, scala-java-interop

我有两个项目，一个 scala 项目和一个 java 项目。我的 scala 项目在构建路径中引用了 java 项目。在我的 java 项目中，我声明了以下注释：

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface MyAnnotation {
    public String Name();
} 
```

在我的 scala 项目中，我正在注释一些方法。IE

```
class MyClass {
    ...
    @MyAnnotation(Name="Blah")
    def myMethod() {
        ...
    }
} 
```

在某个地方的另一个文件中，我试图提取注释。

```
var methods = myClassInstance.getClass().getDeclaredMethods()
var myMethod : Method = null
for (method <- methods) {
  if (method.getName().equals("myMethod")) {
    myMethod = method
  }
}
var annotations = myMethod.getDeclaredAnnotations() 
```

不幸的是，`annotations`总是一个空数组。我是在做一些根本错误的事情，还是我只是错过了一些小事？谢谢！

**编辑** 最初，我用 myAnnotation 两次注释 myMethod ，正如有人指出的那样，这是不正确的。事实证明这不是问题所在。我仍然得到一个空数组`annotations`。没有异常被抛出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T03:30:53.083

我尝试了您的代码，问题是您对 myMethod 使用了两次@MyAnnotation，这应该引发 AnnotationFormatError: Duplicate annotation for class

当我更改为使用一次时，反射只会检索注释。

# html - 如何防止 IE 阻止带有子元素的悬停触发器？

> ID：13944822
> 
> 赞同：0
> 
> 时间：2012-12-19T02:48:15.127
> 
> 标签：html, css, internet-explorer, browser

我有一些 HTML 和 CSS 代码，它们在除 IE10 及以下版本之外的所有其他浏览器中都运行良好，令人惊讶。基本上，有一个用户个人资料页面，其中包含他们的个人资料图片（头像）。

当您将鼠标悬停在头像上时，一些 CSS 会告诉头像 div 内的 div 将不透明度从 0 更改为不透明度 1。在该 div 内，有一个 Tweet 按钮 - 使用 iframe 和[社交名流嵌入，](http://socialitejs.com/)但这无关紧要。

在 IE 中发生的情况是，您将鼠标悬停在头像上，该按钮将按原样显示，除非您将鼠标悬停在 Tweet 按钮上，否则它会“阻止”光标位于头像 div 的顶部，从而导致它消失。这是一个 IE 怪癖，它不应该这样，因为外部触发器 div 是其中所有内容的父级。

[这是使用Handlebars](http://handlebarsjs.com/)的 HTML ：

```
<div class="profile-avatar" style="background-image:url({{avatar_url}})">
  <div class="avatar-overlay">
    <div class="tweet-profile">
      <a href="//twitter.com/share" class="socialite twitter-share" data-count="none" data-text="Check out my profile!" data-url="{{url}}" rel="nofollow" target="_blank"></a>
    </div>
  </div>
</div> 
```

这里是 CSS（它是[Stylus，](http://learnboost.github.com/stylus/)所以稍微精简了语法）：

```
.profile-avatar
  @extend .background-cover
  height 120px
  margin-bottom 10px
  position relative

  &:hover
    .avatar-overlay
      opacity 1

.tweet-profile
  position absolute
  top 50px
  left 32px

  &:hover
    opacity 1

.avatar-overlay
  position absolute
  left 0px
  top 0px
  width 100%
  height 100%
  background-color rgba(0,0,0,0.5)
  opacity 0
  transition opacity 250ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:50:19.590

你试过了吗：

```
 .profile-avatar .tweet-profile
    position absolute
    top 50px
    left 32px
    z-index 999999999

    &:hover
      opacity 1 
```

此外，悬停在：

```
.profile-avatar
  @extend .background-cover
  height 120px
  margin-bottom 10px
  position relative

  &:hover
    .avatar-overlay
      opacity 1 
```

看起来不对，因为它在悬停中有一个类？我必须自己尝试使用手写笔，但我猜它会是：

```
 &:hover .avatar-overlay
   opacity 1 
```

# php - 跨数组添加

> ID：13944828
> 
> 赞同：-2
> 
> 时间：2012-12-19T02:50:05.483
> 
> 标签：php

我以一种非正统的方式构造了 item 信息，它存储在三个不同的数组中，并通过 key 关联。我希望按 ItemID 对数量求和。

```
 1\. Array #1 ItemID
        $_SESSION["item_id"][] 
             1 => 1, 2 => 1, 3 =>2
   2\. Array #2 Size 
        $_SESSION["size"][]   
             1 => S, 2 => L, 3 =>S
   3\. Array #3 Quantity 
        $_SESSION["count"][]
             1 => 250, 2 =>750, 3=>250 
```

结果应如下所示：

ItemID # 1 --> 数量 1000

ItemID # 2 --> 数量 250

有人可以帮我一个功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:22:55.330

比方说，你有以下数组`$_SESSION`：

```
$_SESSION['item_id'] = array(1, 1, 2);
$_SESSION['size'] = array('S', 'L', 'S');
$_SESSION['count'] = array(250, 750, 250); 
```

> 注意：以下答案假设这 3 个 SESSION 值中的数组长度相等。

您将需要创建新数组来存储结果：

```
$newArrayResult = array(); 
```

之后，您将需要执行`for...each`循环以提取当前访问的密钥：

```
foreach($_SESSION['item_id'] as $key => $value){
    //the logic goes here
} 
```

接下来，我们将使用 item_id 作为 $newArrayResult 中的数组键。为此，我们需要先检查它是否已经定义。如果没有，则使用默认值创建密钥`0`。我们使用名为的内置函数进行检查`array_key_exists`。这样，我们将避免遇到未定义的键索引错误。

```
if(!array_key_exists($value, $newArrayResult)){
    $newArrayResult[$value] = 0;
} 
```

在我们获得 $newArrayResult 的键之后，下一步就是简单地将计数值存储到其中：

```
$newArrayResult[$value] += $_SESSION['count'][$key]; 
```

完毕。打印结果进行测试：

```
print_r($newArrayResult); 
```

这是整个代码，供您复制粘贴。不要忘记先阅读并理解上述流程：

```
$_SESSION['item_id'] = array(1, 1, 2);
$_SESSION['size'] = array('S', 'L', 'S');
$_SESSION['count'] = array(250, 750, 250);

$newArrayResult = array();
foreach($_SESSION['item_id'] as $key => $value){
    if(!array_key_exists($value, $newArrayResult)){
        $newArrayResult[$value] = 0;
    }
    $newArrayResult[$value] += $_SESSION['count'][$key];
}

print_r($newArrayResult); 
```

# c# - 在 Windows 8 中重用动画

> ID：13944834
> 
> 赞同：3
> 
> 时间：2012-12-19T02:51:08.477
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我正在构建 Windows 应用商店应用程序（Winrt、Metro、Windows 8 应用程序）。我尝试在 gridview 动画中给出图像：从网络加载图像并打开后，它会填充其单元格。

我有故事板：

```
 <Storyboard x:Name="PopupImageStoryboard">
                <DoubleAnimationUsingKeyFrames EnableDependentAnimation="True" Storyboard.TargetProperty="(FrameworkElement.Width)" Storyboard.TargetName="image">
                    <EasingDoubleKeyFrame KeyTime="0" Value="100"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="240"/>
                </DoubleAnimationUsingKeyFrames>
                <DoubleAnimationUsingKeyFrames EnableDependentAnimation="True" Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="image">
                    <EasingDoubleKeyFrame KeyTime="0" Value="100"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="240"/>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard> 
```

我有这样的 C# 代码来处理图像加载和打开的事件：

```
 private void Image_ImageOpened(object sender, RoutedEventArgs e)
    {
        Storyboard.SetTarget(PopupImageStoryboard, sender as Image);
        PopupImageStoryboard.Begin();
    } 
```

它不起作用，我无法在运行时更改目标并重新运行相同的故事板。但我希望多个图像同时运行此动画。你能推荐任何动画重用的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:59:35.583

您应该从每个子动画中删除它：

```
Storyboard.TargetName="image" 
```

然后我也认为单个故事板可能无法同时用于两个目标元素，因此解决方案是将其放在 DataTemplate 中，例如

```
<Page.Resources>
    <DataTemplate
        x:Name="myStoryboard">
        <Storyboard ... />
    </DataTemplate>
</Page.Resources> 
```

然后在代码中你会说

```
var sb = (Storyboard)myStoryboard.LoadContent();
Storyboard.SetTarget(sb, sender as Image);
sb.Begin(); 
```

顺便说一句 - 不要为 Width 和 Height 属性设置动画。在您的情况下，这几乎肯定不是最好的主意。您应该为您的 RenderTransform 属性设置动画，例如针对 ScaleTransform 的 ScaleX 和 ScaleY 属性。如果动画是依赖的 - 它会导致每一帧中的布局更新，效率非常低，并且会降低动画帧速率。

*编辑

那么更好的解决方案如下所示：

```
<Page.Resources>
    <DataTemplate
        x:Name="myStoryboardTemplate">
        <Storyboard>
            <DoubleAnimation
                Storyboard.TargetProperty="ScaleX"
                From="0.5"
                To="1.0"
                Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <BackEase
                        Amplitude="2"
                        EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation
                Storyboard.TargetProperty="ScaleY"
                From="0.5"
                To="1.0"
                Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <BackEase
                        Amplitude="2"
                        EasingMode="EaseOut" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </DataTemplate>
</Page.Resources> 
```

...

```
<Image
    HorizontalAlignment="Center"
    VerticalAlignment="Center"
    Width="620"
    Height="300"
    Source="Assets/SplashScreen.png"
    RenderTransformOrigin="0.5,0.5"
    Stretch="Fill">
    <Image.RenderTransform>
        <ScaleTransform
            x:Name="imageScaleTransform" />
    </Image.RenderTransform>
</Image> 
```

...

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    var sb = (Storyboard)myStoryboardTemplate.LoadContent();
    Storyboard.SetTarget(sb, imageScaleTransform);
    sb.Begin();
} 
```

# javascript - 如何使用 jQuery 在输入字段中模拟输入？

> ID：13944835
> 
> 赞同：47
> 
> 时间：2012-12-19T02:51:25.317
> 
> 标签：javascript, jquery, greasemonkey, keyboard-events, textinput

我想要的是`<input>`使用javascript模拟输入字段。

我有以下代码：

```
var press = jQuery.Event("keydown");
press.ctrlKey = false;
press.which = 65;
$("#test").trigger(press); 
```

但是当我加载页面时，`#test`输入字段没有输入字符，'65'的键码代表'A'，但没有'A'输入。

基本上我想要的是使用 Greasemonkey 自动输入网站。

请给我一些想法或一些我可以用来执行此操作的库。
非常感谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-19T06:09:34.433

你可以发送关键事件，任何监听它们的东西都会得到它们，**但它们不会改变输入**，所以你不会看到字母`A`出现，例如。这主要是安全问题；有关该问题的讨论，请参阅[“手动触发事件” 。](http://www.howtocreate.co.uk/tutorials/javascript/domevents#domevld1)

因此，如果您希望字母出现，您必须在发送按键事件时更改输入的值。有一个 jQuery 插件，请参阅[“`$.fn.sendkeys`插件”](http://bililite.com/blog/2011/01/23/improved-sendkeys/)。

您可以在[**这个 jsFiddle**](http://jsfiddle.net/DxER9/)`<input>`中查看 an 如何对用户应用的键、键事件和该插件做出反应。[](http://jsfiddle.net/DxER9/)

 **作为参考，这是来自 jsFiddle 的关键代码：

```
$("button").click ( function (zEvent) {
    if (zEvent.target.id == "simA_plain") {
        console.log ("Send Plain key event");
        var keyVal = 65;
        $("#eventTarg").trigger ( {
            type: 'keypress', keyCode: keyVal, which: keyVal, charCode: keyVal
        } );
    }
    else {
        console.log ("Use the Plugin to simulate a keystroke");
        $("#eventTarg").sendkeys ("B") ;
    }
} ); 
```

* * *

* * *

如果您只是想“模拟在`<input>`”上打字，该插件应该就足够了。但是，根据您*真正*想要做的事情，您可能需要执行以下一项或多项操作：

1.  只需将文本设置为您想要的。
2.  发送一个`keydown`事件，如果页面的 javascript 触发了该事件。
3.  `change`同样，如果页面的 javascript 触发了该事件，则发送事件等。
4.  只需找到并直接调用页面的javascript。使用*script injection*、*location hack*、`unsafeWindow`和/或`@grant none`mode 来做到这一点。
5.  还有什么？陈述您的真实目标并链接到目标页面。**

# jquery - 删除来自嵌入 YouTube 视频的 CSS 样式

> ID：13944837
> 
> 赞同：6
> 
> 时间：2012-12-19T02:51:49.463
> 
> 标签：jquery, html, css, youtube

```
<div id="videos">
   <div id="channel_div" style="display: block;">
      <div style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans-serif; font-size: 12px; width: 555px;" class="firstVideo">
      .. trimmed <table here> 

      </div>
      <div style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans-serif; font-size: 12px; width: 555px;">
       .. trimmed <table here>
      </div>
   </div>
</div> 
```

我有上面的片段，并且`div`channel_div 里面的 s 来自 youtube，带有样式，宽度限制会破坏 UI。

如何使用 jquery 删除这些样式？

我尝试了[这个](https://stackoverflow.com/questions/1229688/how-can-i-erase-all-inline-styles-with-javascript-and-leave-only-the-styles-spec)问题的建议如下：

```
$('#channel_div div').removeAttr('style'); 
```

也试过这个：

```
$('#channel_div > div').removeAttr('style'); 
```

但这些都不起作用。我只想将我的宽度添加为 300 像素。

有人可以提供这方面的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:46:50.173

您不能对来自远程域的 iframe 执行此操作。

但是，您可能可以使用 php 并在内部获取远程文件以删除服务器端的这些参数，或者甚至使用 jquery 通过加载该获取的文件并使其成为内部嵌入。

另外，如果只是宽度问题，您是否尝试添加 CSS 规则？

```
.firstVideo { max-width: 300px !important; } 
```

我在我的手机上，所以我现在真的无法确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:14:54.377

嵌入的 youtube 视频将在 iframe 中，如下所示：

```
 <iframe width="570" height="321" 
           src="http://www.youtube.com/embed/L5ZGU1Qkx8?
           wmode=opaque&showinfo=0&autohide=1" frameborder="0"> 
    </iframe> 
```

所以在这里你可以使用它自己的属性来设置高度和宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T03:18:03.473

我认为你可以在 iframe 中操作 html，试试这个：

```
$('#iframeID').contents().find('#someID').html(); 
```

# r - 用 apply.weekly() 强制整周

> ID：13944838
> 
> 赞同：6
> 
> 时间：2012-12-19T02:52:01.970
> 
> 标签：r, xts, zoo

我试图弄清楚`xts`在执行 apply.period 后使用什么（或动物园）作为时间。考虑以下：

```
> myTs = xts(1:10, as.Date(1:10, origin = '2012-12-1'))
> apply.weekly(myTs, colSums)
           [,1]
2012-12-02    1
2012-12-09   35
2012-12-11   19 
```

我认为“2012-12-02”的意思是“在 2012-12-02 结束的那一周，总和为 1”。所以基本上时间是周末。

但问题在于“2012-12-11”——我*认为*它在说 11 号是一周的最后一天*，*所以它把它作为时间。

有没有办法强制它给出它结束的星期天，即使那一天不包括在数据集中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:53:28.727

尝试这个：

```
nextsun <- function(x) 7 * ceiling(as.numeric(x-0+4) / 7) + as.Date(0-4)
aggregate(myTs, nextsun, sum) 
```

where`nextsun`源自[动物园快速参考](http://cran.r-project.org/web/packages/zoo/vignettes/zoo-quickref.pdf)`nextfri`中给出的代码，将 5（周五）替换为 0（周日）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T06:18:05.860

那是整整几周。它只向您显示最后一次观察的日期。请参阅`?endpoints`( `apply.weekly`, 本质上是端点的薄包装器)。

```
apply.weekly
function (x, FUN, ...) 
{
    ep <- endpoints(x, "weeks")
    period.apply(x, ep, FUN, ...)
}
<environment: namespace:xts> 
```

从?端点

> endpoints 返回一个数字向量，对应于 on 指定的每个周期中的最后一个观测值，向量的开头添加一个零，最后一个观测值在 x 中的索引位于末尾。
> 
> 参数的有效值包括：“us”（微秒）、“微秒”、“ms”（毫秒）、“毫秒”、“秒”（秒）、“秒”、“分钟”（分钟）、“分钟” ”、“小时”、“天”、“周”、“月”、“季度”和“年”。

你的第二个问题的答案是否定的，没有选择这样做。但是你总是可以手动编辑最后一个日期，如果你无论如何都要展示所有数据，我认为它没有任何害处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T07:53:00.013

不，你不能强迫它给你星期天。

因为 period.apply 结果的索引由下式给出

```
ep <- endpoints(myTs,'weeks') 

myTs[ep]
           [,1]
2012-12-02    2
2012-12-09    9
2012-12-10   10 
```

所以你需要改变最后一个日期。不幸的是 xts 不提供此选项，您不能移动索引的单个值。我不知道为什么（也许设计选择获得唯一索引）

例如，您可以进行流动：

```
ts.weeks <- apply.weekly(myTs, colSums)
ts.weeks[length(ts.weeks)] <- last(index(myTs)) + 7-last(floor(diff(ep))) 
```

# c++ - 如何增加在堆栈/堆上分配的最大内存

> ID：13944841
> 
> 赞同：22
> 
> 时间：2012-12-19T02:52:39.503
> 
> 标签：c++, memory

*   如何增加 C++ 程序在堆栈/堆上分配的最大内存？

*   增加计算机的 RAM 会自动增加计算机程序的堆栈/堆内存吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-23T17:22:40.837

在 Visual C++ 中，您可以使用指令`#pragma`。例如：

```
#pragma comment(linker, "/STACK:2000000")
#pragma comment(linker, "/HEAP:2000000") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T02:58:52.597

*第二次编辑：*我从您的评论中看到您在 Windows 中工作，因此我在下面的 Unix 答案对您没有太大帮助。但请参阅[Determining Stack Space with Visual Studio](https://stackoverflow.com/q/1740888/318716)和[C/C++ maximum stack size of program](https://stackoverflow.com/q/1825964/318716)。

Linux 中的***堆栈***大小经常受到限制。命令 ulimit -s 将给出当前值，以千字节为单位。您可以（通常）更改文件 /etc/security/limits.conf 中的默认值。

您还可以根据权限使用`setrlimit()`. 例如，请参阅我对Segmentation fault[的回答](https://stackoverflow.com/a/13908277/318716)[： Stack allocation in a C program in Ubuntu when bufffer>4M](https://stackoverflow.com/q/13908033/318716)。

对于***堆***，请参见例如[C 中的堆大小限制](https://stackoverflow.com/q/1886802/318716)。但我不相信你可以增加或减少最大尺寸。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T03:01:44.020

您可以使用 Visual Studio 中的链接选项 /Heap 和 /Stack 指定保留堆大小和堆栈大小。有关详细信息，请查看以下 MSDN 文章：

1.  [堆分配](http://msdn.microsoft.com/en-us/library/f90ybzkh%28v=vs.80%29.aspx)
2.  [堆栈分配](http://msdn.microsoft.com/en-US/library/8cxs58a6%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T04:14:10.413

进程的堆大小通常受进程可以分配的最大内存限制。堆不需要是连续的（除非您正在执行类似 malloc(1000000000) 的操作），因此堆可以使用大部分可用地址空间。

在 Windows 下，最大进程大小因几个因素而异。

使用 32 位 Windows，32 位进程可以默认分配 2 GB。如果使用 /3GB 开关启动 Windows 并且使用“启用大地址”链接器标志编译进程，则进程可以分配 3 GB。

使用 64 位 Windows，默认情况下 32 位进程可以分配 2 GB。如果进程与“启用大地址”链接，则 64 位 Windows 允许 32 位进程分配 4 GB。

一个 64 位进程（在 64 位 Windows 上）可以分配大约 16,000 GB。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-05T06:26:48.727

我遇到了一些内存问题，默认堆和堆栈保留大小为 1 MB。但是当我将上述属性设置为 2 MB (2000000) 时，它工作正常。

要在 Visual Studio 开发环境中设置这些属性，请按照以下步骤操作。

*   打开项目的“属性页”对话框。
*   单击链接器文件夹。
*   单击系统属性页。
*   修改`Heap Reserve Size`和`Stack Reserve Size`。

# php - php邮件未发送

> ID：13944842
> 
> 赞同：3
> 
> 时间：2012-12-19T02:52:59.947
> 
> 标签：php, email

这是我的代码

```
$subject = "Welcome to Last Alliance Standing";
$message = "$name Welcome to Last Alliance Standing, Your account has been registered and you are now able to login and play";
$headers  = "From: Team Laser<noreply@lastalliancestanding.com>\r\n";
$headers .= "X-Mailer: Drupal\n";
$headers .= 'MIME-Version: 1.0' . "\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

if (mail($email, $subject, $message, $headers)) {   
    header("location: passwordrequest-success.php");
    exit();
} else {
    echo "Not Sent";    
} 
```

电子邮件并不总是发送，尽管有时会发送，但有时我会收到“未发送”错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:03:39.297

如果您的主机使用 Windows 系统，更改此行可能会有所帮助

```
$headers  = "From: Team Laser<noreply@lastalliancestanding.com>\r\n";
$headers  = "From: noreply@lastalliancestanding.com\r\n"; 
```

你**也不**`$email`应该是这种形式。**`Alias <mail@ress.com>`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:57:33.583

The first thing you have to do is check does your server support mail function. After that, you can put mail() into try{}catch(){} to catch error code :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T04:39:46.957

感谢那些有提示的人，我联系了帮助台（今天第四次）并最终到达了某个地方，因为它是一个共享帐户，其他帐户之一发送了大量垃圾邮件，现在已经修复，不过谢谢大家的帮助**

# ruby - 告诉 Markdown 忽略 block?

> ID：13944843
> 
> 赞同：3
> 
> 时间：2012-12-19T02:53:04.073
> 
> 标签：ruby, markdown, bluecloth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:18:24.280

这是[Markdown 语法](http://daringfireball.net/projects/markdown/syntax#html)页面。

我不完全确定你想要实现什么。

你有类似以下的东西吗？

```
#Heading

<code>
    $my = 'php code here';
</code>

Other text 
```

你想让你的输出像下面的那样吗？

```
<h1>Heading</h1>

<code>
    $my = 'php code here';
</code>

<p>Other text</p> 
```

对于 markdown 中的代码，您必须将代码缩进四个空格，因此您应该在 markdown 源文件中执行以下操作。

```
#Heading

    $my = 'php code here';

Other text 
```

代码缩进四个空格，markdown 会自动用 和 标记包围它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T01:23:36.593

Markdown[规范](http://daringfireball.net/projects/markdown/syntax#precode)没有指定`<code>`应该如何处理块。您试图让 Markdown 处理器忽略什么类型的标记？

# python - Trying to converting a matrix 1*3 into a list

> ID：13944844
> 
> 赞同：6
> 
> 时间：2012-12-19T02:53:34.270
> 
> 标签：python, numpy

I am currently getting:

```
y=[[ 0.16666667]
[-0.16666667]
[ 0.16666667]] 
```

This comes out of a function im using and i need to turn the above into a list in the format below:

```
x= [0.16666667,-0.16666667,0.16666667] 
```

I tried list(y) but this does not work, because it returns:

```
[array([ 0.16666667]), array([-0.16666667]), array([ 0.16666667])] 
```

How exactly would I do this??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T02:56:28.700

```
my_list = [col for row in matrix for col in row] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T11:21:47.710

您可以使用 numpy`.tolist()`方法：

```
array.tolist() 
```

它还有一个优点......它适用于`matrix`对象，列表推导不适用。如果要先删除维度，可以使用 numpy 方法来执行此操作，例如`array.squeeze()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T02:57:03.773

Grabs the first element from each sublist, using a [list comprehension](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions):

```
x = [elt[0] for elt in y] 
```

# c# - InvalidOperationException on Winforms Calling Base.Dispose() when closing window

> ID：13944846
> 
> 赞同：1
> 
> 时间：2012-12-19T02:53:53.283
> 
> 标签：c#, .net, winforms, invalidoperationexception

Hello im pretty new to c# just downloaded VS2012 and created my new Application, but im getting a really strange Exception, I guess its my fault but again im really new to this

the exception occours when closing form2 that form1 created. this only occurs when an object its placed on form2.

I just got `2 forms` with a button on each, button on form1 calls form2, when form2 is closed I show again form1, after a few seconds it throws `InvalidOperationException` on line base.Dispose

here is the code that trhows the exception

```
protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing); // here is the exceptjion
        } 
```

Here is form1

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            var frm = new Form2(this);
            frm.Show(this);
            this.Hide();
        }
    } 
```

Here is form2

```
public partial class Form2 : Form
{
    private Form frm;

    public Form2(Form frm) : this()
    {
        this.frm = frm;
    }

    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_FormClosing(object sender, FormClosingEventArgs e)
    {
        frm.Show();
        this.Close();
    }
} 
```

Here is the stacktrace

```
No se controló System.InvalidOperationException
  HResult=-2146233079
  Message=Operación no válida a través de subprocesos: Se tuvo acceso al control 'button1' desde un subproceso distinto a aquel en que lo creó.
  Source=System.Windows.Forms
  StackTrace:
       en System.Windows.Forms.Control.get_Handle()
       en System.Windows.Forms.Control.get_InternalHandle()
       en System.Windows.Forms.Control.DestroyHandle()
       en System.Windows.Forms.Control.Dispose(Boolean disposing)
       en System.Windows.Forms.ButtonBase.Dispose(Boolean disposing)
       en System.ComponentModel.Component.Dispose()
       en System.Windows.Forms.Control.Dispose(Boolean disposing)
       en System.Windows.Forms.Form.Dispose(Boolean disposing)
       en PruebaExceocion.Form2.Dispose(Boolean disposing) en c:\Users\Alex\Documents\Visual Studio 2012\Projects\PruebaExceocion\PruebaExceocion\Form2.Designer.cs:línea 20
       en System.ComponentModel.Component.Dispose()
       en System.Windows.Forms.Form.WmClose(Message& m)
       en System.Windows.Forms.Form.WndProc(Message& m)
       en System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       en System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       en System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:07:23.377

取消它并隐藏它..像这样：

```
private void Form2_FormClosing(object sender, FormClosingEventArgs e) {
    e.Cancel = true;
    this.Hide();
    frm.Show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:14:23.697

如果您只是简单地使用 2 个表单进行编程，那么从另一个按钮调用一个也可以像

```
 //On form1
    private void button1_Click(object sender, EventArgs e)
    {
        Form2 f2 = new Form2();
        f2.Show();
    } 
```

仅此而已，您可以随时关闭第二个表单而不会出现任何错误（我在 vs12 上对此进行了测试）。每次单击按钮时，它将创建一个新的 Form2 实例。因此，如果您只希望每次单击都显示一个相同的 form2 实例，这会变得有点棘手。

# sharepoint - Does Content Query Webpart make the server become slow?

> ID：13944848
> 
> 赞同：1
> 
> 时间：2012-12-19T02:53:57.067
> 
> 标签：sharepoint, sharepoint-2010

In my new project, I have used a lot of Content Query Webparts (CQWP) and then I found that the site was becoming slower and slower when visited with the increasing number of CQWPs.The question I want to ask is:

1.  Does a CQWP take a lot of server resources that make the site slow for visitors?
2.  If I want to query the lists and customize the style of output then can I do it without a CQWP?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:35:41.557

看看这个链接可能你必须使用自定义 XSLT 和函数来过滤 CQWP 的输出。

> [http://blog.mastykarz.nl/extending-content-query-web-part-xslt-custom-functions/](http://blog.mastykarz.nl/extending-content-query-web-part-xslt-custom-functions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:00:02.763

## 对于你的第一个问题

我的回答是：这不仅取决于页面上 CQWP 的数量，还取决于几件事。

让我解释 ：

CQWP 有很多事情要做，比如从可能是 Sharepoint 列表或自定义列表的 List 中获取数据，资源利用率取决于从列表中获取数据所应用的逻辑，我的意思是说数据量是fetched 和获取该数据的逻辑复杂性对于服务器资源利用率也很有意义。

例如，如果您有执行复杂逻辑来获取数据的类，例如comaprision、if else 条件和 ForEach 循环，并且列表中可用的数据量很大，那么很明显它将占用服务器的更多资源。

我希望你明白我的意思

## 对于第二个问题

我的回答是：您可以使用 CQWp 或 DVWP（数据视图 Web 部件），但要确定何时使用哪一个。

要获得有关这两者的更多想法，请查看此链接

> [http://www.sharepointblog.co.uk/2012/06/data-view-web-part-vs-content-query-web-part/](http://www.sharepointblog.co.uk/2012/06/data-view-web-part-vs-content-query-web-part/)

# javascript - Preventing second static HTML page from loading

> ID：13944849
> 
> 赞同：4
> 
> 时间：2012-12-19T02:54:00.187
> 
> 标签：javascript

I have a link on a page. When the user clicks the link a static HTML page loads. I would like to prevent the user from launching a second instance of the same static HTML document.

I'm thinking some javascript up front in the static HTML page might do. Basically if the script detects that there is already an instance of the static HTML document loaded then a Javascript pop-up would indicate to the user that 'document is already loaded" (something like that).

Anyhow, Java script is not my strong point so wondering if someone can please shed some light on this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:35:15.337

您可以实现一个日志记录功能，跟踪每个被点击的链接并为当前用户维护一个会话。如果该链接已被单击，则您可以显示防火墙窗口，显示“抱歉，此链接已被访问”。

因此，用户单击的超链接将首先点击跟踪机制，然后才被允许（或不允许）继续访问相关 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:22:51.080

我不确定这是否是跨浏览器，但可以在 Chrome 中使用：

```
var wins = {};
var anchors = document.getElementsByTagName('a');
for(var i=0, len=anchors.length; i<len; i++) {
    anchors[i].onclick = function(e) {
        e.preventDefault();
        var href = this.href;
        if(wins[href]) {
            wins[href].focus();
        } else {
            wins[href] = window.open(href);
        }

    }
} 
```

[http://jsbin.com/ivabax/1/edit](http://jsbin.com/ivabax/1/edit)

# jquery - jquery mobile 'tap' 工作但' doubletap' 不工作

> ID：13944850
> 
> 赞同：2
> 
> 时间：2012-12-19T02:54:02.577
> 
> 标签：jquery, jquery-mobile, click, mouseevent, double-click

我正在使用ipad检查功能，问题是双击不起作用。而且我已经禁用了双击缩放和触摸移动，如何解决这个问题？谢谢

```
$('#page').bind('tap', function(){
        alert('test');
        }); 

$('#page').bind('doubletap', function(){
        alert('test');
        });

addEventListener('touchmove', function(e) { e.preventDefault(); }, true);

<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:21:23.837

使用 jquery mobile 事件而不是 jquery mobile 。有用

# actionscript-3 - How to navigate to another file through combo box?

> ID：13944851
> 
> 赞同：2
> 
> 时间：2012-12-19T02:54:37.280
> 
> 标签：actionscript-3, flash, combobox

I have created a lesson book using flash where every unit has many chapters. Their is a combo box to navigate in between the chapter. Those chapters are placed into individual frame. Now, if each chapter is a different .swf file (or HTML flash file if the publish preview is HTML), how can i access them through combo box? here is my code for combo box to navigate in between frame:

```
stop();

combobox.addItem( {label: "Chapter 1" } );
combobox.addItem( {label: "Chapter 2" } );
combobox.addItem( {label: "Chapter 3" } );

combobox.addEventListener(Event.CHANGE, changeFrame);

function changeFrame (event:Event):void{

    if (combobox.selectedItem.label == "Chapter 1")
    gotoAndStop ("chap1");
    else if (combobox.selectedItem.label == "Chapter 2")
    gotoAndStop ("chap2");
    else if (combobox.selectedItem.label == "Chapter 3")
    gotoAndStop ("chap3");
} 
```

any help please? thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:57:37.910

制作一个将加载 swf 的函数，并将其显示在屏幕上。

```
import flash.display.Loader;
import flash.net.URLRequest;
import flash.events.Event;
import flash.display.MovieClip;

function loadSwf(swfURL:String):void
{
    var loader:Loader = new Loader();
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
    loader.load(new URLRequest(swfURL);                                           
}

function onComplete(e:Event)
{
    var swf:MovieClip = new MovieClip();
    swf.addChild(e.currentTarget.content);
    addChild(swf);
} 
```

然后使用 change 事件调用函数

```
function changeFrame (event:Event):void
{
    if (combobox.selectedItem.label == "Chapter 1")
    loadSwf("chap1.swf");
    else if (combobox.selectedItem.label == "Chapter 2")
    loadSwf("chap2.swf");
    else if (combobox.selectedItem.label == "Chapter 3")
    loadSwf("chap3.swf");
} 
```

然后，您需要添加 if 语句或其他内容来检查是否需要删除已加载的章节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T04:28:24.570

您想要执行以下操作，而不是 gotoAndStop：

```
ExternalInterface.call('yourJavascriptFunction', combobox.selectedItem.label); 
```

然后，在 Javascript 中，类似：

```
function yourJavascriptFunction(chapterName) {
  //set source of frame here
} 
```

# python - Pyramid catch-all friendly exception handling

> ID：13944852
> 
> 赞同：11
> 
> 时间：2012-12-19T02:55:10.857
> 
> 标签：python, exception-handling, pyramid

Is there a way that I can handle some sort of "catch-all" error handling in a Pyramid web app? I currently have implemented exception logging to a database (via the docs at [http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/logging/sqlalchemy_logger.html](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/logging/sqlalchemy_logger.html)) and I'll return messages to my views to put a "friendly" face on what happened.

But is there something I can implement that would show some sort of generic "Oops, you ran into a problem and we're looking into it" for anything else I'm not explicitly catching, and I could use the above error handler behind the scenes to log whatever to the database? Or, what sort of thing should I be looking for in searches?

Thanks,

edit, since I can't fit it all into a comment: . Thanks, that seems to be exactly what I'm looking for!

One thing I'm running into, I don't know if it's related or not....

So I'm implementing the SQL logger as above like so:

```
class SQLAlchemyHandler(logging.Handler):
    # A very basic logger that commits a LogRecord to the SQL Db
    def emit(self, record):
        trace = None
        exc = record.__dict__['exc_info']
        if exc:
            trace = traceback.format_exc(exc)
        log = Log(
            logger=record.__dict__['name'],
            level=record.__dict__['levelname'],
            trace=trace,
            msg=record.__dict__['msg'],)
        DBSession.add(log)
        DBSession.flush()
        #transaction.commit() 
```

I had to take out the 'transaction.commit()' call and instead use .flush() because I was getting a SQLAlchemy DetachedInstanceError exception when using transaction. I think it's because I'm playing some games with passing a request to a helper function and that's where it seems to be throwing it. So it works by flushing the session. Buuuut, what happens is if I have a log.error() statement in my exception view, if an exception is actually thrown the view catches it (great!) but the log statement in the view doesn't get committed. The debugging logs in Pyramid show it being written, but never committed.

If I change the logging handler back to transaction.commit then the exceptions *do* get committed, but I'm back at my original problem. I think I need to focus back on what I'm doing in my helper function that's causing it in the first place, but I'm still learning SQLAlchemy in general, too. Sometimes it can be a little strange.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T03:35:54.027

您可以设置[异常视图](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/pylons/exceptions.html)。例如：

```
@view_config(context=Exception)
def error_view(exc, request):
    #log or do other stuff to exc...
    return Response("Sorry there was an error") 
```

# ios - Tool for creating resizable images

> ID：13944853
> 
> 赞同：4
> 
> 时间：2012-12-19T02:55:31.493
> 
> 标签：ios, photoshop, nine-patch

I'm working with a designer generated photoshop psd that contains various UI elements for an iOS app, and I'm slicing their backgrounds into smaller images and using resizableImageWithCapInsets for efficiency. There are a lot of them, and it's quite tedious work.

What I'm looking for is a tool that will help with this process, something like [Draw NinePatch](http://developer.android.com/tools/help/draw9patch.html) that will take a .png file, and a list of cap insets, and then spit out a smaller .png.

Anyone heard of such a thing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:19:26.270

我找不到任何东西，所以我写了一个简单的工具。如果其他人有这个问题，你去：

[https://github.com/kcoop/CapInsetImageGenerator](https://github.com/kcoop/CapInsetImageGenerator)

# vb.net - How do I search through a string for a particular hyperlink in Visualbasic.net?

> ID：13944854
> 
> 赞同：2
> 
> 时间：2012-12-19T02:55:34.757
> 
> 标签：vb.net, string

I have a written a program which downloads a webpage's source but now I want to search the source for a particular link I know the link is written like this:

```
<a href="/internet/A2/"><b>Geographical Survey Work</b></a> 
```

Is there anyway of using "Geographical Survey Work" as criteria to retrieve the link? The code I am using to download the source to a string is this:

```
Dim sourcecode As String = ((New Net.WebClient).DownloadString("http://examplesite.com")) 
```

So just to clarify I want to type into an input box "Geographical Survey Work" for instance and "/internet/A2" to popup in a messagebox? I think it can be done using a regex, but that's a bit beyond me. Any help would be great.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:42:21.363

使用 HTMLAgilityPack：

```
Dim vsPageHTML As String = "<html>... your webpage HTML code ...</html>"
Dim voHTMLDoc.LoadHtml(vsPageHTML) : vsPageHTML = ""
Dim vsURI As String = ""
Dim voNodes As HtmlAgilityPack.HtmlNodeCollection = voHTMLDoc.SelectNodes("//a[@href]")
If Not IsNothing(voNodes) Then
    For Each voNode As HtmlAgilityPack.HtmlNode In voNodes
        If voNode.innerHTML.toLower() = "<b>geographical survey work</b>" Then
            vsURI = voNode.GetAttributeValue("href", "")
            Exit For
        End If
    Next
End If
voNodes = Nothing : voHTMLDoc = Nothing 
```

用 vsURI 做任何你想做的事。当我徒手编写时，您可能需要稍微调整一下代码。

# c++ - I need to access a completely random line of a small text file, and import the same line in another text file in C++

> ID：13944857
> 
> 赞同：2
> 
> 时间：2012-12-19T02:56:11.103
> 
> 标签：c++, random

I am looking to access a completely random line of a small text file, and import the same line in another text file in a C++ program. I need to do this fairly simply, I am a beginner to C++ programming. I will include `main.cpp`. If you need the other `.cpp` or the `.h`, just let me know, I will post it.

Main.cpp:

```
#include <fstream>
#include <iomanip>
#include <iostream>
#include <cmath>
#include <ctime>
#include <string>
#include <vector>

#include "getQuestion.h"

using namespace std;

int main() {
    int mainMenuChoice;
    ifstream Bibliography;
    //string easyBib;
    string easyBib;
    ifstream inputFile;

    cout << "Quiz Menu\n\n";
    cout << "1\. Play Game!\n";
    cout << "2\. Bibliography\n";
    cout << "3\. Developer Info\n";
    //cout << "4\. Admin Menu\n";
    cout << "4\. Exit\n";
    cout << "Menu Choice: ";
    cin >> mainMenuChoice;

    switch (mainMenuChoice) {
    case 1:
        //int getQuestion(string Q,A);
        //cout << Q;
        break;
    case 2:
        inputFile.open("Bib.rtf");
        inputFile >> easyBib;
        cout << easyBib << endl;
        break;
    case 3:
        cout << "Program made by: XXXX XXXXXXXX" << endl;
        cout << "XXX. XXXXXXX'X Period 4 Social Studies Class" << endl;
        break;
    /*case 4:
        break;*/
    case 4:
        cout << "Thank you for playing!" << endl;
        return(0);
    default:
        cout << "Sorry, Invalid Choice!\n";
        return(0);
    }
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T03:13:31.460

最简单的解决方案是逐行（使用`getline`）将整个文件读取到`vector<string>`. 然后从该向量中选择一个随机元素是微不足道的。

您可以像这样从输入流中读取一行：

```
string line;
getline( inputFile, line ); 
```

它返回对流的引用，可以直接测试错误。所以这很容易变成这样的循环：

```
vector<string> lines;
for( string line; getline(inputFile,line); )
{
    lines.push_back(line);
} 
```

现在您可以使用 的`size`功能`vector`来确定您阅读了多少行，然后随机选择一个。

```
size_t iRandLine = rand() % lines.size();
string randomLine = lines[iRandLine];
cout << "Line " << (iRandLine+1) << ": " << randomLine << endl; 
```

当然，您需要知道`RAND_MAX`文件中的行数将少于行数。否则，您必须将多个调用组合起来`rand`才能覆盖范围。

# php - How create Json by PHP

> ID：13944859
> 
> 赞同：-4
> 
> 时间：2012-12-19T02:56:15.970
> 
> 标签：php, mysql

> **Possible Duplicate:**
> [How to generate .json file with PHP?](https://stackoverflow.com/questions/2467945/how-to-generate-json-file-with-php)

I want to use php to create a json like below. it will return a string json as a response from result sql query. How do I do?

```
{"Orders":[  
            {"DeliveryId":"DeliveryId","CustomerName":"CustomerName","PhoneNumber":"PhoneNumber","Address":"Address"},  
            {"DeliveryId":"DeliveryId","CustomerName":"CustomerName","PhoneNumber":"PhoneNumber","Address":"Address"}               
]
} 
```

my code

```
<?php
mysql_connect("mysql12.000webhost.com","a4602996_longvan","longvan2012");
mysql_select_db("a4602996_lv"); 
$id=$_POST[user];
$sql=mysql_query("select * from testlongvan where Status = 'PACKED'" ); 

$json = array();
if(mysql_num_rows($sql)){
while($row=mysql_fetch_row($sql)){
$json['Orders'][]=$row;
}
}

//while($row=mysql_fetch_assoc($sql))
//$output[]=$row;
print(json_encode($json)); 
mysql_close(); 
?> 
```

But when use my code i recieve result, don't result i want:

> {"Orders":[ ["longvan","10/12/2012","Be34433jh","Long Van","115 Pham Viet Chanh, quan Binh Thanh","http://longvansolution.tk/image/sample.jpg","PACKED","0909056788"], ["takeshi","24/12/2012","BF6464633","Vn-zoom","16 nguyen cuu van, quan binh thanh","http://longvansolution.tk/image/hoadon3.jpg","PACKED","098897657"] ]} Can you help me!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:00:44.797

您可以使用[json_encode()](http://php.net/manual/en/function.json-encode.php)函数来做到这一点。

而且您的 JSON 格式无效。使用`:`代替`=`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:59:59.397

```
// SERVER SIDE
<?php
    //... create array
    //....Obviously you would use your own SQL link and query
    $animals = array();
    $result = @mysqli_query('YOUR DB LINK', 'YOUR QUERY');

    while ($row = mysqli_fetch_array($result, MYSQLI_BOTH)) {
        array_push($animals, array(
            'animal' => $row['animal'],
            'sound'  => $row['sound']
    ));
    }
?>

// CLIENT SIDE
<html>
<script>
    // RETURN FROM PHP PAGE ECHO VIA AJAX PERHAPS //
    var animals = <?php echo json_encode($animals) ?>;

    $.each(animals, function (i, elem) {
        console.log(elem.animal + " makes a " + elem.sound);
    });
</script>
</html> 
```

# drupal - How to display additional form during views bulk operation?

> ID：13944862
> 
> 赞同：4
> 
> 时间：2012-12-19T02:57:02.077
> 
> 标签：drupal, drupal-7, drupal-views, drupal-forms

I want to use the **Views Bulk Operations (VBO)** module to get the possibility to select nodes from a view and then do an action on each of them. However, this action requires additional data to be supplied by user, so what I need is to put another form in between VBO submit and the actual action processing.

I am using the *hook_action_info* hook to define my action. However, as I went through the *hook_action_info* [documentation](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_action_info/7) it seems to me that this is not doable using this hook as there is no configuration option to suppress the action bulk ajax update.

Can somebody confirm and/or propose better solution?

In short: User selects nodes from a view using checkboxes, after submitting the form another form appears asking for some more details (having list of nodes as hidden elements in it) and after submitting this one, e-mail is sent per every node. The body of the e-mails is always a combination of node data and the second form data.

Thanks a lot. Petiar.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:43:02.497

因此，我决定忘记 Views 和 VBO（没有难过的感觉）并创建自己的自定义表单。实际上让我相信这不会成为大问题的主要事情是**tableselect**表单元素类型。我认为这已在 Drupal 7 中被调用，它很神奇。至少值得一看：

[http://api.drupal.org/api/drupal/developer%21topics%21forms_api_reference.html/7#tableselect](http://api.drupal.org/api/drupal/developer%21topics%21forms_api_reference.html/7#tableselect)

感谢大家停下来愿意提供帮助。

# logging - Why logging.handlers.TimedRotatingFileHandler creates new log files owned by root?

> ID：13944864
> 
> 赞同：3
> 
> 时间：2012-12-19T02:57:14.363
> 
> 标签：logging, mod-wsgi

I want to rotate the logs of a Django / apache2 / wsgi website. But sometimes (not always, which is even more strange) logging.handlers.TimedRotatingFileHandler creates new log files owned by root! So my application doesn't have write access any more to the log, and gives me a server error.

I have specified umask=0007 in my WSGIDaemonProcess setting, but that doesn't help either.

How can that happen? and how to fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:05:36.367

即使您使用的是 mod_wsgi 嵌入式模式，也不应该发生这种情况，因为没有 Python 应用程序代码会以 root 身份运行，除非您破解了 Apache 源代码以禁用其中的安全保护，从而阻止您将用户/组设置为根。

首先建议您验证您是否在守护程序模式下运行，因此是否正在使用 WSGIDaemonProcess 定义。

*   [http://code.google.com/p/modwsgi/wiki/CheckingYourInstallation#Embedded_Or_Daemon_Mode](http://code.google.com/p/modwsgi/wiki/CheckingYourInstallation#Embedded_Or_Daemon_Mode)
*   [http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html](http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html)

还要确保您没有使用旧版本的 mod_wsgi。在 3.0 之前的 mod_wsgi 中，解释器本身会在以 root 身份运行时在 Apache 父级中初始化，但在创建子进程后，您的应用程序的任何代码仍将作为普通用户运行。但是，如果使用这样一个较旧的 mod_wsgi 版本并且您正在做一些非常奇怪的事情，例如使用本地“sitecustomize.py”或加载“.pth”文件以设置日志记录的副作用，那么您可能会设法以 root 身份运行东西你不应该。

# java - 首次使用后保持 Classloader 打开

> ID：13944868
> 
> 赞同：9
> 
> 时间：2012-12-19T02:57:45.287
> 
> 标签：java, classloader

我正在创建一个 URLClassloader 来加载一些罐子。每个 jar 都从不同的类加载器正确加载，每个 jar 都包含一个带有方法 run() 的类。现在这个 run() 的主体可以在其中创建一个匿名内部类。但是，因为我在 try-with-resources 块中创建了我的 URLClassloader，所以它会自动关闭，并且在运行时当它尝试加载匿名内部类时，它会抛出 NoClassDefFoundError，因为类加载器已经关闭。

现在我的问题是，*这些情况的正常做法是什么？*可以让类加载器保持打开状态，以便以后需要加载其他东西时，它可以吗？有没有办法重新打开一个封闭的类加载器？
如果我让类加载器保持打开状态，编译器会向我发出有关潜在资源泄漏的警告~~所以我有一种感觉，这就像溪流，你不应该让它们无限期地打开~~. 但是由于类加载器的性质，如果加载匿名类的不是同一个类加载器，则不能在外部类中使用

这是创建类加载器的代码

```
public Player(File codePath) throws PlayerException {

   try (URLClassLoader loader = new URLClassLoader(new URL[] { codePath.toURI().toURL() })) {

   //load class from Jar where run() method creates anonymous class that comes in the jar too

   } catch (ClassCastException | IOException | ClassNotFoundException | InstantiationException
| IllegalAccessException | IllegalArgumentException | InvocationTargetException
| SecurityException exc) {
throw new PlayerException("Error loading player's code", exc);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:50:45.927

类加载器的生命周期至少应该是加载它的类实例的生命周期。只要他们和他们的类不符合垃圾回收的条件，他们的类加载器也不是。如果他们需要加载额外的代码或资源，您需要打开类加载器。

因此，当您完成播放器时，您应该关闭类加载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:36:27.320

您可以使用工厂模式（或类似的东西），而不是为每个玩家创建一个新的类加载器：

```
URLClassLoader loader = PlayerClassLoaderFactory.getInstance().getClassLoader(codePath.toURI()) 
```

工厂维护对类加载器的引用（因此这些类不是孤立的）。然后，如果需要关闭类加载器，您就可以“关闭”工厂。

# php - 初始化视图、模板和控制器和模型是可选的

> ID：13944873
> 
> 赞同：10
> 
> 时间：2012-12-19T02:59:20.367
> 
> 标签：php, model-view-controller, view, controller, initialization

> *当我问这个问题时，我太困了，很抱歉，无论如何，为了让事情清楚，我准备了 2 个小时的问题。*

我正在尝试组织我的代码并决定组织它 mvc'ish(mvc-like)，我不知道我是否可以遵循所有原则，但我想至少接近这一点。

我的应用程序有一个前端控制器（不知道我的定义是否正确），因此我的应用程序的所有 http 请求都将通过一个点，在我的情况下是`index.php`在我的应用程序的根目录中。

话虽如此，我已经这样设置了，您可以想象我曾经`.htaccess`将所有请求定向到`index.php`.

我爆炸`url`并从中创建了一个数组，`$url[]`就像这样。所以每当我像这样访问我的应用程序时，`http://localhost/app/pagename`它都会访问一个控制器（`pagename_controller`）

我是这样做的：

```
$file = $controller_path . $page . '_controller.php';

if (file_exists($file)) {
    require $file;
    $class_name = ucfirst($page) . '_controller';
    $target = new $class_name();
} 
```

我也将它包装在一个容器中，即“装饰器模式”，以备将来使用，也许是验证。像这样 ：

```
$controller = new Wrap($target);
$controller->index(); 
```

我不知道`$controller`变量名的使用是否合适，所以如果一切都错了，请原谅我。

我有点认为我可以像这样设置我的应用程序：

1.  用户发送请求，如何？通过使用应用程序意味着他/她发出一个http请求，这将加载应用程序的初始状态

    ![信用：phparchitect 设计模式](../Images/20b97719117afc29799b217d3db7c228.png)

正如您在我想要的应用程序结构图中看到的那样，我只能做第一部分，即将请求定向到单个条目 ( `index.php`)

现在的问题是应用程序其他部分的初始化。

到目前为止，我有 3 个文件要设置，但我对如何设置感到困惑。

`index_controller`, `index_view`,`Template`

```
class Index_controller {
    private $model;
    private $view;

    public function __construct(){
        // optional model -> $this->model = 'index' 
        $this->view = 'index'  // 
    }

    public function index(){
        $this->load->view($this->view)
    }
}

class Index_view {
    private $model;
    private $template;

    public function __construct(Model $model = null){
         $this->template = new Template('default');
    }

    public function view() {
         $this->template->assign('css', 'default_css'); // don't know if this is efficient
         // or $this->template->assign('header', 'default_header');
         // or $this->template->assign('sidebar', 'default_sidebar');
         // or $this->template->assign('footer', 'default_footer');
         // or any other things I want to use in the template
    }
}

class Template {

    public $data = array();
    private $tmpl;

    public function __construct($template) {
         $this->tmpl = $template . '_tmpl.php';
    }

    public function assign($name, $value){
        $this->data[$name] = $value;
    }

    // public function output
    // function that will explode the data array and render it out as a webpage
    // I'll create templates and
} 
```

有了这些，我现在想知道如何将这些东西联系在一起。目前我有一个`system`可以包含类的文件夹，我为该文件夹设置了一个自动加载器。

我正在考虑创建一个`Controller`类和`View`充当如图所示的 ActionFactory 和 ViewFactory 的类，尽管我知道这些不是他们的职责。

我在想这个：

```
class Controller {

    protected $load;
    public function __construct() {
        $this->load = new View();
    }
}

class View {
    public function __construct() {
    // some things i don't know
    }

    public function view() {
    // some things i don't know
    }
} 
```

您对我的设置有什么建议和意见。如何启动三合会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:54:28.017

好吧，我们不要过多地纠结于您的实现细节。您可以在其他时间阅读有关保护您的框架的信息。让我们来处理你的问题...

我实际上创建了一个框架，该框架可以按照您尝试实现的方式工作。我认为您缺少的是 RoutingHandler 类。路由是对 URL 的物理操作，它告诉您的应用程序要加载哪个 Controller 以及要运行哪个 Action。

在我的世界里我也有模块，所以基本的路由方案是

```
Module -> Controller -> Action 
```

这三个项目以这种方式映射到我的 URI 方案。变量也可以像这样附加......

[http://www.domain.com/module/controller/action/var1/val1/var2/val2](http://www.domain.com/module/controller/action/var1/val1/var2/val2)

那么，在解析 URI 并将控制权传递给适当的控制器和操作之后会发生什么？让我们编写一些代码来演示一个简单的示例......

```
<?php    
    class indexController extends Controller {

        protected function Initialize() {
            $this->objHomeModel = new HomeModel;

            $this->objHeader = new Header();
            $this->objFooter = new Footer();

            $this->objHeader
                ->SetPageId('home');
        }

        public function indexAction() {
            $this->objHeader->SetPageTitle('This is my page title.');
        }
    }
?> 
```

在该`Initialize`方法中，我设置了一些控制器范围的东西，并获取我的模型实例以供以后使用。真正的肉在`indexAction`方法。您可以在此处设置要在视图中使用的内容。例如...

```
public function randomAction() {
    $this->_CONTROL->Append($intSomeVar, 42);
} 
```

`_CONTROL`是我操作并传递给视图的一组值。该类`Controller`知道如何为 View 找到正确的模板，因为它以 Action 命名（并且在同级目录中）。

`Controller`父类采用动作方法的名称并像这样解析它......

```
indexAction -> index.tpl.php 
```

您还可以在这里做一些其他有趣的事情，例如...

```
Application::SetNoRender(); 
```

...会告诉控制器不要在模板内渲染，而只是完成该方法。这对于您实际上不想输出任何内容的情况很有用。

最后，所有的控制器、模型和视图都存在于它们自己的目录中，就像这样......

```
my_module
    controllers
        indexController.class.php
        someotherController.class.php
        :
        :
    models
        HomeModel.class.php
        :
        :
    templates
        index.tpl.php
        someother.tpl.php
        :
        : 
```

我可以继续，但我是凭记忆写的，这里和那里都有一些皱纹，但希望这能让你深思。

# linux - 在 Linux 上使用 Cocos2dx 制作游戏

> ID：13944875
> 
> 赞同：7
> 
> 时间：2012-12-19T02:59:36.213
> 
> 标签：linux, cocos2d-iphone, game-engine, cocos2d-x, multiplatform

我对 Cocos2d 和 Cocos2dx 比较熟悉。但只有我在 Mac 上工作，我知道在 Windows 中可以使用这个引擎（Cocos2dx），但我不知道是否可以在 Linux 上开发游戏。

顺便说一句：我不是在谈论端口，我想在 Linux 上开发视频游戏多平台。很高兴知道如何在 Linux 上开始我的游戏。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:49:05.147

虽然我没有尝试过，但根据他们的文档，cocos-2dx[可以在 Linux 上使用，](https://github.com/cocos2d/cocos2d-x)尽管我的理解是这意味着可以在 Linux 上使用 cocos2d 构建 android 项目。

至于从哪里开始，我使用了[SFML](http://www.sfml-dev.org/)和[SDL](http://www.libsdl.org/)，因为它们都在 Linux 上得到了很好的支持。两者都是跨平台的，尽管 SDL 支持更广泛的平台 - 例如，我有一个 SDL2 游戏正在进行中，可以在 Linux 和 android 上运行，而 SFML 尚不支持 android 或 iOS。来自 cocos2d，但我认为您会发现 SFML API 最容易上手。

作为一个公平的警告，目前的情况有点令人困惑，因为 SFML 和 SDL 都有一个流行的稳定版本（SFML 1.6 和 SDL 1.2），一个 API 和一个流行的开发版本（SFML 2.0 和 1.3/2.0 SDL) 具有相似但不相同的 API。这在 SDL 中尤为明显，其中 1.2 的文档比开发 API 的文档好得多。在选择一个而不是另一个方面，稳定版本正是如此 - 稳定。在这两种情况下，开发版本已经进行了一段时间，所以如果你愿意挖掘一下文档并提出问题，那么值得获得新功能。

[有一本书很好地介绍了 Linux 游戏开发，虽然已经过时，但如果这是您第一次在 Linux 上玩游戏，尤其是如果您决定使用 SDL Programming Linux Games](https://rads.stackoverflow.com/amzn/click/com/1886411492)时，这可能是一个很好的第一步。

**更新**：

[我在这里](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/How_to_run_HelloWorld_and_tests_on_linux)和之后（大致）看到了方向，cocos2dx 确实建立在我的 Ubuntu 12.04 x64 机器上。“设置环境”的指示似乎很合理，但 makefile 信息似乎已经过时，因为没有*build_linux.sh*而是有一个*make-all-linux-project.sh*。在完成提取缺失的 deps 并构建之后，我更改为**samples/HelloCpp/proj.linux**目录并运行*make*。**这在samples/HelloCpp/proj.linux/bin/debug**中创建了一个 HelloCpp 二进制文件。运行它会弹出一个 HelloWorld cocos2d 屏幕。根据输出，版本是：

> cocos2d-x 调试信息 [cocos2d: cocos2d-2.1beta3-x-2.1.0]

也就是说，我没有看到很多关于 linux 端口的文档，而且大多数相关的社区条目似乎都已过时，因此您可能会从使用我已经提到的库之一中获得更多支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:00:29.707

下载 cocos2d-x 项目有一个测试示例游戏，可以在所有平台上编译 android、windows、iOS、Windows Phone ...看你要用 c++ 编写代码，然后不管你是在 linux 还是任何其他平台上构建它都没有关系用于 cocos2d-x 类的引擎

所以我建议从 cocos2d-x 的示例项目开始 .... 就像你想在 linux 中做的那样......做一些东西然后像我一样在 linux 中编译它......

# html - 滚动时引导词缀一直向左浮动

> ID：13944879
> 
> 赞同：10
> 
> 时间：2012-12-19T02:59:45.247
> 
> 标签：html, css, twitter-bootstrap

我在一个容器中有一个 div，我想将它固定在屏幕的右侧。但是当用户开始滚动时，它只是一直向左移动。谢谢你的帮助。

[http://jsfiddle.net/kbLak/](http://jsfiddle.net/kbLak/)

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap.min.css" rel="stylesheet"> 
```

最近的事情：

```
 </div>
    </div>
</div>
<div class="explore_recentAlbums" data-spy="affix" data-offset-top="20">
    <div class="ex_recentBar">
        <div class="ex_titleDetails">
            <span>recent stuff: </span>
        </div>
    </div>
    <table>
        <tr>
            <td>

                    <div class="well well-small" style="margin-bottom: 1px;">
                        <span>Recent</span>
                    </div>

                    <span class="NoDataFound">No Photo.</span>

                    <div class="smallalbumcover">
                        <div class="mosaic-blocksmall mofade">
                            <div class="mosaic-overlay">
                                <div class="details">
                                    <p>
                                        <a href="#">xzxz</a>
                                    </p>
                                </div>
                            </div>
                            <div class="mosaic-backdrop">
                                <img src=""/>
                            </div>
                        </div>
                        <div class="clearfix">
                        </div>
                    </div>

                    <div style="margin-bottom: 1em; text-align: center; margin-top: 10px;">
                        <a style="text-decoration: none;" href="/pics"><span class="label label-info">View More</span></a>
                    </div>

            </td>
        </tr>
        <tr>
            <td>

                    <div class="well well-small" style="margin-bottom: 1px;">
                        <span>Recent Video Albums</span>
                    </div>

                    <span class="NoDataFound">No Video.</span>

                    <div class="smallalbumcover">
                        <div class="mosaic-blocksmall mofade">
                            <div class="mosaic-overlay">
                                <div class="details">
                                    <p>
                                        <a href="/">test</a>
                                    </p>
                                </div>
                            </div>
                            <div class="mosaic-backdrop">
                                <img src="#"/>
                            </div>
                        </div>
                        <div class="clearfix">
                        </div>
                    </div>

                    <div style="margin-bottom: 1em; text-align: center; margin-top: 10px;">
                        <a style="text-decoration: none;" href="/vids"><span class="label label-info">View More</span></a>
                    </div>

            </td>
        </tr>
        <tr>
            <td>

                    <div class="well well-small" style="margin-bottom: 1px;">
                        <span>Recent P</span>
                    </div>

                    <span class="NoDataFound">No.</span>

                    <div class="smallalbumcover">
                        <div class="mosaic-blocksmall mofade">
                            <div class="mosaic-overlay">
                                <div class="details">
                                    <p>
                                        <a href="/">test</a>
                                    </p>
                                </div>
                            </div>
                            <div class="mosaic-backdrop">
                                <img src=""/>
                            </div>
                        </div>
                        <div class="clearfix">
                        </div>
                    </div>

                    <div style="margin-bottom: 1em; text-align: center; margin-top: 10px;">
                        <a style="text-decoration: none;" href="/aio"><span class="label label-info">View More</span></a>
                    </div>

            </td>
        </tr>
    </table>
</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T03:19:40.773

将此添加到您的 css 中，它将保持在右侧：

```
.explore_recentAlbums {
    right: 0;     
} 
```

# php - PHP cron 作业期间 mysqldump 的 MySQL 重新加载权限：使用 MySQL 管理员帐户还是创建唯一用户？安全？

> ID：13944882
> 
> 赞同：9
> 
> 时间：2012-12-19T03:00:24.237
> 
> 标签：php, mysql, cron, innodb, mysqldump

我正在运行一个通过 PHP 脚本执行 mysqldump 的 cron 作业，转储需要 RELOAD 权限。使用 MySQL 管理员帐户感觉不对，但创建具有管理员权限的用户也不正确。

我主要关心的是安全方面，我正在将数据库属性（用户名、密码等）加载到我正在使用的类的受保护数组“属性”中。

我想知道哪种方法更有意义，或者是否有另一种方法可以达到相同的结果。

* * *

**概述：**
LAMP 服务器：CENTOS 5.8、Apache 2.2.3、MySQL 5.0.95、PHP 5.3.3

Cron 工作大纲：

1.  从网站数据库中的两个 InnoDB 表中转储原始统计数据，它们具有外键关系。
2.  将数据加载到统计数据库中的表中
3.  获取传输的自增主键的最后一个值
4.  在从网站数据库中删除复制数据的查询中使用主键值
5.  在 stats db 中处理传输的数据以填充报告表
6.  处理完成后，从 stats db 中删除原始统计数据

网站数据库配置为带有二进制日志记录的主数据库，一旦统计数据不再在网站数据库中存储和处理，将设置复制服务器（复制网站数据库是将统计数据移动到自己的数据库的动力） ）。

在 cron 作业期间访问的所有文件都位于 DocumentRoot 目录之外。

* * *

**细节：**
第一步执行的 mysqldump 需要 RELOAD 权限，命令如下：

```
<?php
$SQL1 = "--no-create-info --routines --triggers --master-data ";
$SQL1 .= "--single-transaction --quick --add-locks --default-character-set=utf8 ";
$SQL1 .= "--compress --tables stats_event stats_event_attributes";

$OUTPUT_FILENAME = "/var/stats/daily/daily-stats-18.tar.gz";

$cmd1 = "/usr/bin/mysqldump -u website_user -pXXXXXX website_db $SQL1 | gzip -9 > $OUTPUT_FILENAME";

exec( $cmd1 );
?> 
```

错误信息：

```
mysqldump: Couldn't execute 'FLUSH TABLES': Access denied; you need the RELOAD privilege for this operation (1227) 
```

如果我使用 mysql 管理员凭据，则可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T04:37:32.323

> 我想知道哪种方法更有意义，或者是否有另一种方法可以达到相同的结果。

底线是您需要具有特定权限的用户才能运行该`mysqldump`命令。*虽然仅为*这个 cron 作业创建一个新用户似乎很愚蠢，但这是您可以采用的最直接和最简单的方法，至少可以提供 lolsecurity 的外观。

鉴于这是一种权宜之计，直到您可以启动并运行复制，所以这里没有真正的危害。通过复制来做到这一点是完全可行的，权宜之计似乎是明智的。

此外，当需要进行复制时，[xtrabackup](http://www.percona.com/doc/percona-xtrabackup/)是您的朋友。它包含二进制日志命名和位置信息以及它所拍摄的快照，这使得设置新的从站变得*轻而易举*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-19T05:29:24.873

我刚刚遇到了同样的错误（可能在您正在处理的同一站点上:)），即使以 MySQL root 用户身份运行也是如此。我设法通过*不*指定 --skip-add-locks 来解决它，例如这有效：

```
/usr/bin/mysqldump -u USERNAME -pPW DATABASE_NAME --skip-lock-tables --single-transaction --flush-logs --hex-blob 
```

# java - 无法在 public() 中访问 JPanel

> ID：13944883
> 
> 赞同：4
> 
> 时间：2012-12-19T03:00:35.033
> 
> 标签：java, swing, variables, jpanel, jbutton

最近我试图制作一个简单的程序，需要在屏幕上多次移动一个按钮，但为了做到这一点，我必须能够从我似乎没有的代码的某些部分访问 JPanel能不能做，或者找个替代方法。这是一个小程序，可以查明我遇到的问题。

```
public class ButtonMover extends JFrame
{

    public static void main(String[] args) {

        new ButtonMover();
    }
        JButton actionButton;

        public ButtonMover() {
            JPanel buttonMoverPanel = new JPanel();
            buttonMoverPanel.setLayout(new GridBagLayout());
            this.add(buttonMoverPanel);
            this.setSize(500,500);
            this.setResizable(true);
            this.setVisible(true);

            JButton actionButton = new JButton("Testing Button");
            buttonMoverPanel.add(actionButton);

            ClickListener c = new ClickListener();

            actionButton.addActionListener(c);

        }

        private class ClickListener
                    implements ActionListener
           {
               public void actionPerformed(ActionEvent e)
               {

                       if (e.getSource() == actionButton)
                            buttonMoverPanel.add(new JLabel("Testing Label"));
                            //insert code to move button here
               }
           }
} 
```

|buttonMoverPanel.add(new JLabel("Testing Label"));| line 是唯一不起作用的部分，因为我似乎无法从该区域引用 buttonMoverPanel。虽然它实际上不会导致任何错误，但它会阻止 actionButton 执行任何操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T03:02:31.960

如果您需要访问一个变量，这里是您的 buttonMoverPanel，则不要通过在方法或构造函数中声明它来隐藏它，使其仅在该方法或构造函数中可见。不，在类中声明它，以便它在整个类中可见。

同样，此代码的一项改进是在类中声明 buttonMoverPanel，就像您当前对 actionButton JButton 所做的一样。

编辑：您正在隐藏您的 actionButton 变量——您在构造函数中重新声明它，以便添加到 GUI 的按钮不会被 actionButton 类字段引用。不要在课堂上重新声明它。

换句话说，指示的行创建了一个全新的 actionButton 变量，该变量仅在构造函数中可见：

```
JButton actionButton;
JPanel buttonMoverPanel = new JPanel();

public ButtonMover() {
  buttonMoverPanel.setLayout(new GridBagLayout());
  this.add(buttonMoverPanel);
  this.setSize(500, 500);
  this.setResizable(true);
  this.setVisible(true);

  JButton actionButton = new JButton("Testing Button"); // ****** here 
```

解决方案是不重新声明变量而是使用类字段：

```
JButton actionButton;
JPanel buttonMoverPanel = new JPanel();

public ButtonMover() {
  buttonMoverPanel.setLayout(new GridBagLayout());
  this.add(buttonMoverPanel);
  this.setSize(500, 500);
  this.setResizable(true);
  this.setVisible(true);

  actionButton = new JButton("Testing Button"); // ****** Note the difference??? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:09:46.357

将 buttonMoverPanel 作为类 lavel 变量，如下所示..

```
公共类 ButtonMover 扩展 JFrame
{

    公共静态无效主要（字符串[]参数）{

        新的按钮移动器（）；
    }
        JButton 动作按钮；
        JPanel buttonMoverPanel ;

        公共 ButtonMover() {
            buttonMoverPanel = new JPanel();
            buttonMoverPanel.setLayout(new GridBagLayout());
            this.add(buttonMoverPanel);
            this.setSize(500,500);
            this.setResizable(true);
            this.setVisible(true);

            JButton actionButton = new JButton("测试按钮");
            buttonMoverPanel.add(actionButton);

            ClickListener c = new ClickListener();

            actionButton.addActionListener(c);

        }

        私有类 ClickListener
                    实现 ActionListener
           {
               公共无效actionPerformed（ActionEvent e）
               {

                       if (e.getSource() == actionButton)
                            buttonMoverPanel.add(new JLabel("测试标签"));
                            //在此处插入移动按钮的代码
               }
           }
}
```

# c++ - 清除后是否释放了 std::vector 内存？

> ID：13944886
> 
> 赞同：58
> 
> 时间：2012-12-19T03:00:46.793
> 
> 标签：c++, optimization, memory, vector

假设我有一个结构的 std::vector。如果向量是 clear()'d，内存会发生什么？

```
std::vector<myStruct> vecs;
vecs.resize(10000);
vecs.clear(); 
```

内存会被释放，还是仍作为可重用缓冲区附加到 vecs 变量？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-19T03:03:14.740

内存仍然连接到向量。这也不仅仅是可能的。这是必需的。特别是，如果您在调用 之后再次向向量添加元素`clear()`，则向量不得重新分配，直到您添加的元素数量超过了之前设置的 1000 个元素。

如果要释放内存，通常是与空向量交换。C++11 还添加了一个[`shrink_to_fit`](http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit)成员函数，旨在更直接地提供大致相同的功能，但它是非绑定的（换句话说，它可能会释放额外的内存，但仍然不需要这样做）。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-12-19T03:03:52.653

向量的内存不能保证被清除。清除后您无法安全地访问元素。为了确保内存被释放，Scott Meyers 建议这样做：

```
vector<myStruct>().swap( vecs ); 
```

[Cplusplus.com](http://www.cplusplus.com/reference/vector/vector/clear/)对此有以下说法：

> 从向量中删除所有元素，调用它们各自的析构函数，使容器的大小为 0。
> 
> 向量容量不会改变，并且不会由于调用此函数而发生重新分配。强制重新分配的典型替代方法是使用交换：...

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-19T03:02:54.753

在对象上调用析构函数，但内存仍然分配。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-19T03:06:40.717

不，内存没有被释放。

在 C++11 中，您可以使用`shrink_to_fit`强制向量释放内存的方法。

[http://www.cplusplus.com/reference/vector/vector/](http://www.cplusplus.com/reference/vector/vector/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-03T10:08:39.570

`.resize(0)`并且`.clear()`不释放或重新分配分配的内存，它们只是将向量的大小调整为零，使容量保持不变。

如果我们需要通过释放（释放）内存来清除以下工作：

[在线尝试！](https://godbolt.org/z/frbedd1fd)

```
v = std::vector<T>(); 
```

它调用运算符`&&`的重载`=`，它执行与`swap()`解决方案类似的移动行为。

这种分配技术在运算符`&&`重载时有效`=`，并且保证存在于所有 C++11 STD 库中，[请参见此处](https://en.cppreference.com/w/cpp/container/vector/operator%3D)。因此，如果您使用`-std=c++11`(gcc/clang) 或`/std:c++11`(msvc) 开关（或更高版本）进行编译，我的解决方案可以保证工作。

# r - 在源代码中运行的代码不会改变情节

> ID：13944895
> 
> 赞同：1
> 
> 时间：2012-12-19T03:02:00.910
> 
> 标签：r

我在源代码中运行这些代码行，然后在 Rstudio 中单击“运行”。

```
fill_colors <- c()
for(i in 1:length(hotdogs$Country) ) {
  if (hotdogs$Country[i] == "United States") {
    fill_colors <- c(fill_colors, "#821122")
  } else {
    fill_colors <- c(fill_colors, "cccccc")
  }
} 
```

代码被传递到控制台，但由于某种原因，情节没有改变。

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:14:19.983

如果您关注[http://www.cs.odu.edu/~mweigle/cs795/barchart-r.html](http://www.cs.odu.edu/~mweigle/cs795/barchart-r.html)：

我怀疑您没有直接在它之后运行该行，即：

```
barplot(hotdogs$Dogs.eaten, names.arg=hotdogs$Year, col=fill_colors, 
        border=NA, xlab="Year", ylab="Hot dogs and buns (HDB) eaten") 
```

仅运行您给出的行将生成一个 vector `fill_colors`，但您需要将其用作`fill`in的参数`barplot`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:15:02.507

我假设您`fill_colors`之前在创建绘图时使用过，现在您正在重新定义`fill_colors`向量。

R 中的绘图不会像在 Excel 等其他应用程序中那样动态链接到数据（在自动调用模式下）。因此，您需要使用新的情节重新创建情节，`fill_colors`因为它不会自行更新。

此外，您可能会发现`ifelse`有用。上面的代码可以写成：

```
fill_colors <- ifelse(hotdogs$Country == "United States", "#821122", "cccccc") 
```

# rendering - 为什么使用 TextureObj.Sample 和 SampleLevel 对只有 1 个 mipmap 级别的纹理进行采样，结果会有所不同？

> ID：13944896
> 
> 赞同：2
> 
> 时间：2012-12-19T03:02:14.850
> 
> 标签：rendering, gpu, direct3d, hlsl, graphic

根据 Crytek 的这篇论文，我实现了一种称为最佳拟合法线的 GBuffer 法线存储优化算法：[http](http://www.crytek.com/cryengine/presentations/CryENGINE3-reaching-the-speed-of-light) ://www.crytek.com/cryengine/presentations/CryENGINE3-reaching-the-speed-of-light 。它是由 D3D11 实现的，但使用的是 Shader Model 4.0。

由于使用此算法，我需要对最适合的正常查找纹理进行采样。实际上这是一个屏幕空间操作，并且这个纹理只有一个级别的mipmap，所以我应该使用TextureObject.SampleLevel( texcoord, 0.0f ) 只对这个纹理的级别0 进行采样。但是当我只用 0 级对其进行采样时，最终图像会出现一些黑白噪声像素。如果我改用 TexObj.Sample( texcoord )，这些噪音就消失了。据我所知，这两个函数在这种情况下应该完全一样，但为什么结果不同呢？当 GPU 执行这些指令时有什么魔法吗？

顺便说一句，当我使用 SampleLevel 对纹理进行采样时，最终质量看起来比使用 Sample 更好。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:48:29.827

您是否尝试过使用 PIX（或 VS2012 图形调试器）分析问题以确保您的源纹理在两种情况下都相同？此外，如果您可以使用两种方法发布两个比较屏幕截图，这可能会有所帮助。

# c - 从 C 中的子线程中杀死另一个线程

> ID：13944898
> 
> 赞同：3
> 
> 时间：2012-12-19T03:02:18.863
> 
> 标签：c, curl, pthreads

我想从另一个线程中杀死一个线程，并且我想在它运行时执行此操作，所以它不会像将循环变量更改为某些东西。最合适的方法是什么？

更清楚地说，我正在使用 cURL 并且在某些时候我不希望 curl 执行下载。curl API 不提供类似的东西。所以我必须取消线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T03:08:48.397

杀死线程很少是一个好主意，因为它很容易导致内存/资源泄漏。被杀死的线程只清理它的堆栈和线程本身使用的内存，没有通过 new/malloc 等分配。

但是，如果你真的想杀死线程，使用 pthreads 的正确方法是调用`pthread_cancel`.

另外：看这里：

[使用 pthread_cancel 取消线程：好的做法或坏的做法](https://stackoverflow.com/questions/4760687/cancelling-a-thread-using-pthread-cancel-good-practice-or-bad)

# drupal - Drupal 从 6 个升级到 7 个未定义变量

> ID：13944904
> 
> 赞同：-1
> 
> 时间：2012-12-19T03:02:54.717
> 
> 标签：drupal, drupal-7

当我尝试按照[http://www.siteground.com/tutorials/drupal-tutorial/drupal_upgrade.htm](http://www.siteground.com/tutorials/drupal-tutorial/drupal_upgrade.htm)上的说明运行 update.php 时，一长串错误开始出现。

> 注意：未定义变量：include() 中的头（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 8 行）。注意：未定义变量：include() 中的 head_title（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 9 行）。注意：未定义变量：include() 中的样式（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 10 行）。注意：未定义变量：include() 中的脚本（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 11 行）。注意：未定义的变量：留在 include() 中（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 16 行）。注意：未定义的变量：就在 include() 中（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 16 行）。注意：未定义变量：include() 中的标头（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 19 行）。注意：未定义变量：留在 include() 中（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 60 行）。注意：未定义变量：include() 中的任务（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 69 行）。注意：未定义变量：include() 中的 tabs2（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 73 行）。注意：未定义的变量：include() 中的帮助（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 75 行）。注意：未定义变量：include() 中的内容（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 77 行）。注意：未定义变量：include() 中的页脚（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 80 行）。注意：未定义变量：include() 中的 footer_message（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 80 行）。注意：未定义变量：就在 include() 中（/home/content/66/9070466/html/ehapsa/ehapsa/sites/all/themes/garlandcustom/page.tpl.php 的第 83 行）。注意：未定义的变量：

我试图在当前站点的子目录下升级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T21:26:15.057

这是解决方案。必须在 page.tpl.php 中以不同方式打印自定义区域

在 Drupal 6 中，当您想要打印刚刚创建的区域时，只需将其放入 page.tpl.php 中：

打印 $foo_sidebar;

在 Drupal 7 中，您希望添加的所有区域都必须使用 render 和 page 变量进行打印：

打印渲染($page['foo_sidebar']);

# java - 套接字连接请求被拒绝

> ID：13944907
> 
> 赞同：4
> 
> 时间：2012-12-19T03:03:21.637
> 
> 标签：java, sockets

我正在尝试在我的笔记本电脑和我的 Android 之间建立一个 Socket 连接。

我正在将笔记本电脑作为服务器。为了建立连接，我使用的是笔记本电脑的 IP，如`ipconfig`（运行 Windows 7）所示（此地址与“whatismyip”等网站显示的地址不同）。

当我将笔记本电脑和 Android 连接到同一个无线路由器并使用 ipconfig 提供的地址时，一切正常。

但是，当我使用我的 Android 的 EDGE 连接并访问相同的 IP 地址时，Socket 连接请求被拒绝。此外，whatismyip 提供的 IP 不适用于 WLAN 或 EDGE。

我听说有两个IP地址，内部和外部。而且我认为ipconfig给出的地址是内部地址。此外，还有一些称为端口转发的过程。

有人可以帮我通过 EDGE 连接访问 ServerSocket 吗？我应该使用哪个IP，如果我需要做端口转发，怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:18:27.443

在您的笔记本电脑上，当您运行 ipconfig 命令时，它在您连接到路由器的任何接口上显示的 IP 地址是私有地址（不是可路由地址）。whatismyip 显示的 IP 地址是分配给调制解调器的 IP 地址。当您的手机通过 Wi-Fi 连接到路由器时，您与笔记本电脑位于同一子网中，并且能够创建连接。当您在 EDGE 网络上时，您在不同的子网中，并且由于您的笔记本电脑的 IP 不可路由，因此您无法连接到它。在大多数路由器上，您可以将目标端口的所有入口流量配置为发送到您的笔记本电脑。每个路由器的配置各不相同，但想法是相同的。您想要将此流量转发到的 IP 地址是您的笔记本电脑的私有 IP 地址（由 ipconfig 显示的地址），

# emacs - 在 elisp 中混合使用函数、宏和 bash 调用来调试代码

> ID：13944910
> 
> 赞同：1
> 
> 时间：2012-12-19T03:03:41.860
> 
> 标签：emacs, elisp

我正在尝试通过[process-lines](http://www.gnu.org/software/emacs/manual/html_node/elisp/Synchronous-Processes.html)从 Emacs调用 bash 程序[herbstclient](http://wwwcip.cs.fau.de/~re06huxa/herbstluftwm/herbstclient.html)。我创建了一个宏 hc-call，它实际上调用了由函数 hc 调用的herbstclient，该函数应该通过 stringify-numbers 将其数字参数转换为字符串。

不用说它不起作用。用 "keybind" "Mod4-Shift-r" "reload" 调用 hc 会出现错误：

```
 *** Eval error ***  Wrong type argument: listp, stringified-args 
```

我尝试在 hc 上使用 edebug 并且输出建议 stringify-numbers 工作正常。该函数在 hc 调用时立即出错。然而，当我运行时：

```
(hc-call ("keybind" "Mod4-Shift-r" "reload")) 
```

它按预期工作。然后我尝试了：

```
(setq sargs (list "keybind" "Mod4-Shift-r" "reload"))
(hc-call sargs) 
```

我得到了同样的错误。我不知道如何进一步调试。以下是所有代码：

```
(defmacro hc-call (args)
  "Call herbstclient to with the given arguments."
   `(process-lines "herbstclient" ,@args))

(defun stringify-numbers (args)
  "Take a list of random arguments with a mix of numbers and
  strings and convert just the numbers to strings."
  (let (stringified-args)
    (dolist (arg args)
      (if (numberp arg)
          (setq stringified-args (cons (number-to-string arg) stringified-args))
        (setq stringified-args (cons arg stringified-args))))
    (nreverse stringified-args)))

(defun hc (&rest args)
  "Pass arguments to herbstclient in a bash process."
  (let ((stringified-args (stringify-numbers args)))
    (hc-call stringified-args))) 
```

为什么它会抱怨 stringified-args 不是列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T04:52:35.037

你`hc-call`应该是一个函数，沿着

```
(defun hc-call (args)
  "Call herbstclient to with the given arguments."
  (apply #'process-lines "herbstclient" args)) 
```

顺便说一句，当我在这里时：

```
 (if (numberp arg)
      (setq stringified-args (cons (number-to-string arg) stringified-args))
    (setq stringified-args (cons arg stringified-args)))) 
```

写得更好

```
 (setq stringified-args (cons (if (numberp arg) (number-to-string arg) arg) stringified-args)))) 
```

或者

```
 (push (if (numberp arg) (number-to-string arg) arg) stringified-args))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:47:31.443

与大多数表达式不同，宏参数是通过*unevaluate*传递的。

这就是为什么`(hc-call ("keybind" "Mod4-Shift-r" "reload"))`不会导致错误！

因此，`(hc-call sargs)`将符号传递`sargs`给宏，而不是它将评估的列表。

如果您希望您的宏以这种方式处理变量，您可以更改`,@args`为`,@(eval args)`，或者有条件地处理`args`任何一种方式，具体取决于实际结果。

# c# - 应用程序购买中 Windows 商店应用程序中的动态价格

> ID：13944913
> 
> 赞同：0
> 
> 时间：2012-12-19T03:03:59.970
> 
> 标签：c#, microsoft-metro, in-app-purchase

我想在我的应用程序（Windows 8 商店应用程序）中销售一些产品，问题是我从服务器检索价格并且它可以不时更改，我可以更改代表代码中价格的 xml 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:12:48.740

您可以将 XAML 文件中描述的控件绑定到 C# 或 VB.NET 代码中的数据结构。阅读有关数据绑定的信息。

一些链接：[WPF 中的数据绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)、[Windows Store Apps 中的](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh758320.aspx)数据绑定、[MVVM 模式](http://en.wikipedia.org/wiki/Model_View_ViewModel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:46:10.313

对不起。不，（还没有）任何 API 可以与您的持久应用内购买目录进行交互。但是，您可以做的是为不同的价格创建多个条目。例如：

1.  Id=1 LevelOne $1.00
2.  Id=2 LevelOne $2.00

如果您检测到变量以较低的价格出售是正确的，您可以显示 Id=1，如果您确定较高的价格，则 Id=2。您在“技术上”销售两种不同的“一级”产品，但您的用户没有理由需要知道这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T16:24:48.230

我现在知道解决方案，Sample 中的 XML 文件仅用于模拟购买，它不会在真实商店中为您做任何事情，当您想在 Windows 商店中提交您的应用程序时，您在那里定义产品和价格，它是静态的，我建议您开始在 windows 商店中提交一个虚拟项目，然后您可以以完美的视图进行开发。

# python - 无法在 Python 中捕获异常 IndexError？

> ID：13944923
> 
> 赞同：3
> 
> 时间：2012-12-19T03:05:35.493
> 
> 标签：python, exception

这是我想捕捉的错误：

```
 Traceback:
    File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
      111\.                         response = callback(request, *callback_args, **callback_kwargs)
    File "/opt/django/fileupload/views.py" in upload_file
      56\.         folder_info = url.split(':')[1] #Extracts folder info to use in the header

    Exception Type: IndexError at /upload_file/
    Exception Value: list index out of range 
```

尝试使用：

```
except (socket.error, paramiko.AuthenticationException, IndexError):
            return render_to_response('reform.html', context_instance=RequestContext(request)) 
```

但它不起作用。

我能够捕获`socket.error`and`paramiko.Authentication`异常，但不能捕获`IndexError`. 我试图在 Django 中捕获异常。谢谢。

**编辑**：整个 try 和 except 块：

```
try:        
    source = str(username) + "@" + url #Source to list all the files
    add_key = str(username) + "@" + test_url
    add_known_hosts(password, add_key) #Add to the known hosts
    test_ssh(test_url, username, password) #Test Host_name, username and password
    destination = '/home/sachet/files'    
    command = subprocess.Popen(['sshpass', '-p', password, 'rsync', '--recursive', source],
                   stdout=subprocess.PIPE).communicate()[0] #sshpass needs to be installed into the server
    lines = (x.strip() for x in command.split('\n'))
    remote = [x.split(None, 4)[-1] for x in lines if x] #Removes permission from the file listing
    base_name = [os.path.basename(ok) for ok in remote]
    result = subprocess.Popen(['ls', destination], stdout=subprocess.PIPE).communicate()[0].splitlines()

    return render_to_response('thanks.html', {'res1': remote, 'res': result, 'folder': folder_info}, context_instance=RequestContext(request))
except (socket.error, paramiko.AuthenticationException, IndexError):
    return render_to_response('reform.html', context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:51:16.960

IndexError 不会在您发布的 try/except 块中引发。IndexError 在 folder_info 分配到的行（views.py 中的第 56 行）引发。您需要将该行代码移动到您的 try/except 块中以捕获该错误。

```
File "/opt/django/fileupload/views.py" in upload_file
    56\.         folder_info = url.split(':')[1]  <-- This line 
```

或者，更好的是，在“folder = ...”行周围放置一个单独的try/except，仅针对IndexError，以使您的代码意图更清晰。

# asp.net-mvc-3 - 实体框架、ASP.NET 和 SQL Server CE

> ID：13944930
> 
> 赞同：3
> 
> 时间：2012-12-19T03:06:37.320
> 
> 标签：asp.net-mvc-3, authentication, asp.net-mvc-4, sql-server-ce-4, simplemembership

使用 VS 2010 SP1，我从“internet”模板创建了一个 ASP.NET MVC4 项目。然后我为 SQL Server CE 4.0 创建了一个连接字符串：

```
<add name="DefaultConnection"
     connectionString="Data Source=|DataDirectory|MyDatabase.sdf;Password=123456" 
     providerName="System.Data.SqlServerCe" /> 
```

在 cassini 中成功调试启动 Web 应用程序后，我选择“注册”用户选项。这会立即导致`InitializeSimpleMembershipAttribute`过滤器执行。过滤器在到达此代码时使站点崩溃：

```
Database.SetInitializer<UsersContext>(null);
using (var context = new UsersContext())
{
    if (!context.Database.Exists())
    {
        // Create the SimpleMembership database without Entity Framework migration schema
        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
    }
}
//This line never executes.  It is meant to configure my custom user table.
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "Users", "ID", "UserName", true); 
```

`Exists()`检查抛出一个`ArgumentException`说明：

> *找不到请求的 .Net Framework 数据提供程序。它可能没有安装。*

现在我想确定（1）我的连接字符串没有问题，（2）我的提供程序没有问题。为此，我在`Exists()`检查之前插入了一段代码。该片段使用 new`SqlCeEngine`创建数据库，并调用 Dapper 来设置用户表。该代码工作得很好，就在`Exists()`支票再次爆炸之前。

然后我认为 EF 可能需要一些额外的设置帮助。我尝试替换我的 EF defaultConnectionFactory `web.config`：

```
<entityFramework>
  <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
    <parameters>
      <parameter value="System.Data.SqlServerCe.4.0" />
    </parameters>
  </defaultConnectionFactory>
</entityFramework> 
```

我收到的异常仍然没有改变。

我现在想知道 EF 是否需要一个“特殊”连接字符串才能与 SQL Server CE 一起使用。我会在[这里](https://stackoverflow.com/questions/6947325/connection-string-for-using-sql-server-compact-with-entity-framework)和[这里](http://erikej.blogspot.com/2011/04/saving-images-to-sql-server-compact.html)检查。但乍一看，我不确定这是问题所在。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:10:09.373

您需要安装 Sql Server Compact 版本。你可以从[这里](http://www.microsoft.com/en-us/download/details.aspx?id=17876)下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:25:13.020

EF 要求安装提供程序。使用连接到数据库选项之一进行检查。例如，将实体数据模型添加到项目中。只是提供给它的提供者。你看到你的首选连接客户端了吗？ ![在此处输入图像描述](../Images/4504ad5a43dcbb5e1deac16c1413a836.png)

似乎精简版应该有一些限制...... [http://technet.microsoft.com/en-us/library/cc835494.aspx](http://technet.microsoft.com/en-us/library/cc835494.aspx)

那么我认为它的“默认连接”问题参见上下文构造函数。除非您传入替代名称，否则 EF 会查找该名称的连接。尝试...

```
<connectionStrings>
    <add name="MyContextName" connectionString="bla";App=EntityFramework"
       providerName="System.Data.SqlServerCe.4.0" /> 
```

# ruby-on-rails - 一次将 CSV 文件导入多个模型

> ID：13944931
> 
> 赞同：6
> 
> 时间：2012-12-19T03:06:39.333
> 
> 标签：ruby-on-rails, activerecord, csv

我有 3 个模型，Church，有很多地点，有很多牧师。

```
require 'csv'  
csvfile = File.read("testimport.csv")
csv = CSV.parse(csvfile, :headers => false)
csv.each do |row|
  c = Church.new
     c.name = row[0]
     c.url = row[10]
   c.locations.build(:address => row[3], :zipcode => row[5], :phone => row[6], :email => row[2], :city => row[4])
   c.save
end 
```

正如您在我的一小段代码中看到的那样，我正在创建一个教堂及其第一个位置。我怎么会添加一个牧师呢？

例如，这会起作用吗？

```
require 'csv'  
csvfile = File.read("testimport.csv")
csv = CSV.parse(csvfile, :headers => false)
csv.each do |row|
  c = Church.new
     c.name = row[0]
     c.url = row[10]
     location = c.locations.build(:address => row[3], :zipcode => row[5], :phone => row[6], :email => row[2], :city => row[4])
     location.pastors.build(:name => row[10])
     location.save
   c.save
end 
```

我还有其他方法吗？试图将数千条记录从一个 Rails 应用程序移动到另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:45:28.460

我对此采取了稍微不同的方法，我发现两步过程更易于使用和构建。

第一步是加载数据。

我使用两个“分期”表。
就像是：

```
staging_header
id           Integer  Unique  Primary Key
run_number   Integer  Unique
run_name     String

staging_data:
id                 Integer  Unique  Primary Key
staging_header_id  Integer
element1           String
element2           String
element3           String
uploaded?          Boolean  # Placed on the individual records allows restarts. 
... 
```

所以我将 testimport.csv 直接加载到这些加载表中——如果你使 run_number 唯一（序列等），它支持多次运行

现在您拥有 sql 中的数据并在 rails 中可用。

现在编写代码以从这个加载区域实际填充应用程序表。

这也将帮助您解决速度问题。Rails 每秒只会插入几条记录，因此您希望能够重新启动、暂停等。

这也将有助于验证。最初，您只想加载数据，而不考虑任何约束（非空、唯一等）。

一旦加载到暂存中，您就可以更具选择性并根据需要应用验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:41:14.813

我能够让它工作，以下是我使用的。让我知道是否有更聪明的方法可以做到这一点。注意：如果您尝试这样做，请将 csv 文件放在 rails 目录的根目录中，然后在控制台中逐行执行此脚本。至少我是这样让它工作的。

```
require 'csv'  
csvfile = File.read("testimport.csv")
csv = CSV.parse(csvfile, :headers => false)
csv.each do |row|
   c = Church.new
     c.name = row[0]
     c.url = row[10]
   c.locations.build(:title => "Sanctuary", :address => row[3], :zipcode => row[5],     :phone => row[6], :email => row[2], :city => row[4])
   c.save
loc = c.locations.first
loc.pastors.build(:firstname => row[1])
loc.save

end 
```

# android - 主屏幕按钮禁用在 4.1.2 的 Google Nexus S 中不起作用

> ID：13944936
> 
> 赞同：2
> 
> 时间：2012-12-19T03:07:27.563
> 
> 标签：android

我正在开发一个需要禁用主屏幕按钮的应用程序。但它不适用于我的带有 Android 4.1.2 的 Nexus S。

下面是我用来禁用主屏幕按钮的代码

```
@Override 
public void onAttachedToWindow() {
 this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
 super.onAttachedToWindow(); 
} 
```

# c# - NUnit 的 VCR 等效项

> ID：13944937
> 
> 赞同：8
> 
> 时间：2012-12-19T03:07:31.893
> 
> 标签：c#, .net, nunit, vcr

我们使用 C# 和 .net 编写了一个基本的网络应用程序。对于测试，我们喜欢使用类似于[Ruby 的 VCR 的](https://www.ruby-toolbox.com/projects/vcr)东西。C#/.net 是否存在这样的事情？

# sql - Excel 汇总函数

> ID：13944939
> 
> 赞同：7
> 
> 时间：2012-12-19T03:07:56.733
> 
> 标签：sql, excel, oracle11g

我有一个带有列的excel文件，

```
C_IP
SESSION_ID
CS_USER_AGENT
CS_URI_STEM
CS_URI_QUERY
WEB_LINK 
```

由于 Oracle (11g) 中允许的字符串大小的限制，我无法聚合上述属性。我尝试使用用户定义的聚合函数。我想聚合“WEB_LINK”列，并按 C_IP 分组。是否可以在 Excel 中执行此操作？

我尝试使用的 SQL 查询是，

```
CREATE TABLE WEBLOG_AGG AS
SELECT C_IP,
tab_to_string(CAST(COLLECT(WEB_LINK) AS T_VARCHAR2_TAB)) AS WEBLINKS
FROM WEBLOG_SESSION
GROUP BY C_IP; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:48:31.067

我想执行连接`clob`比编写 VBA 代码更容易。

```
15:34:36 SYSTEM@dwal> create table t1 ( group_col number, value varchar2(1 byte) );

Table created.

Elapsed: 00:00:00.10
15:34:38 SYSTEM@dwal> insert into t1
15:35:34   2  select 1, decode(mod(rownum,5), 0,0,1) from dual connect by rownum <= 4001
15:36:20   3  union all
15:36:22   4  select 2, decode(mod(rownum,5), 0,0,1) from dual connect by rownum <= 4001
15:36:27   5  ;

8002 rows created.

Elapsed: 00:00:00.05
15:36:28 SYSTEM@dwal> commit;

Commit complete.

Elapsed: 00:00:00.02
15:36:31 SYSTEM@dwal> create type t_varchar2_tab is table of varchar2(1);
15:37:11   2  /

Type created.

Elapsed: 00:00:00.50
15:38:15 SYSTEM@dwal> ed
Wrote file S:\tools\buffer.sql

  1  create function tab_to_str(tab in t_varchar2_tab) return clob
  2  as
  3    result clob;
  4  begin
  5    for i in tab.first .. tab.last loop
  6      result := result || tab(i);
  7    end loop;
  8    return result;
  9* end;
15:38:46 SYSTEM@dwal> /

Function created.

Elapsed: 00:00:00.19
15:46:01 SYSTEM@dwal> select group_col
15:46:04   2  ,length(tab_to_str(cast(collect(value) as t_varchar2_tab))) len
15:46:10   3  ,substr(tab_to_str(cast(collect(value) as t_varchar2_tab)), 1, 20) val
15:46:12   4  from t1 group by group_col;

 GROUP_COL    LEN VAL
---------- ------ --------------------
         1   4001 11011110111101111011
         2   4001 11011110111101111011

Elapsed: 00:00:01.13 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:22:03.430

`COLLECT()`在我在这个问题中看到它之前，我什至没有听说过这个功能，但它看起来非常有用。根据我所阅读的内容，我认为以下内容应该在聚合 web_link 列时将您的 Excel 工作表减少为唯一行。它不会即时执行（这可能是您正在寻找的），但是一旦数据在那里，您就可以在整个工作表上运行它。

```
Public Type Entry
    C_IP As String
    rowNum As Integer
End Type

Public entryList() As Entry

Sub AggregateRows()

    Dim lastRow As Integer
    Dim i As Integer
    Dim webLinks As String
    Dim entryItem As Entry
    Const C_IPColumn As Integer = 1         ' This is the column number of the C_IP column
    Const WEB_LINKColumn As Integer = 6     ' This is the column number of the WEB_LINK column

    ReDim entryList(0)

    ' Get the last used row on the sheet

    lastRow = ActiveSheet.Cells.Find("*", SearchOrder:=xlByRows, LookIn:=xlValues, SearchDirection:=xlPrevious).Row

    ' Loop through all of the rows

    For i = 1 To lastRow

        ' See if we've already encountered the C_IP in this row

        entryItem = GetEntry(ActiveSheet.Cells(i, C_IPColumn).Value)

        If Not entryItem.C_IP = "" Then

            ' We have, so add the current web link to the list for the row associated with this C_IP

            webLinks = ActiveSheet.Cells(entryItem.rowNum, WEB_LINKColumn).Value
            webLinks = webLinks & ", " & ActiveSheet.Cells(i, WEB_LINKColumn).Value
            ActiveSheet.Cells(entryItem.rowNum, WEB_LINKColumn).Value = webLinks

            ' Now remove this row (since it has been grouped with row with the same C_IP)

            ActiveSheet.Rows(i).Delete

            ' Decrement our counters by 1 since we have 1 fewer rows (assuming we're not on the last row already)

            If Not i = lastRow Then

                i = i - 1
                lastRow = lastRow - 1

            End If

        Else

            ' We've not encountered this C_IP yet, so add it to the list

            ReDim Preserve entryList(UBound(entryList) + 1)
            entryList(UBound(entryList)).C_IP = ActiveSheet.Cells(i, C_IPColumn).Value
            entryList(UBound(entryList)).rowNum = i

        End If

    Next i

End Sub

' Returns the Entry matching the passed-in C_IP
Function GetEntry(C_IP As String) As Entry

    Dim i As Integer

    ' Loop through all stored entries and return the first whose C_IP matches that passed in

    For i = 0 To UBound(entryList)
        If entryList(i).C_IP = C_IP Then
            GetEntry = entryList(i)
        End If
    Next i

End Function

' A quick and dirty way to get an empty Entry
Function GetEmptyEntry() As Entry

End Function 
```

# javascript - Facebook Javascript SDK 未捕获类型错误：无法读取未定义的属性“用户 ID”

> ID：13944940
> 
> 赞同：8
> 
> 时间：2012-12-19T03:07:59.603
> 
> 标签：javascript, facebook-javascript-sdk

我正在尝试使用 Facebook JavaScript SDK 实现授权功能。当我运行它并检查控制台时，我看到了错误。

```
uncaught TypeError: Cannot read property 'userID' of undefined 
```

代码片段

```
<div id="fb-root"></div>
<!-- Load the Facebook JavaScript SDK -->
<script src="//connect.facebook.net/en_US/all.js"></script>
<script>
var appId = 'APP_ID';
var uid;

// Initialize the JS SDK
FB.init({
 appId: '413026618765431',
 cookie: true,
});

// Get the user's UID
FB.getLoginStatus(function(response) {
 uid = response.authResponse.userID ? response.authResponse.userID : null;
});

function authUser() {
 FB.login(function(response) {
   uid = response.authResponse.userID ? response.authResponse.userID : null;
 }, {scope:'email,publish_actions'});
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T04:07:39.023

如果应用程序未经授权，则响应对象将*不*包含`authResponse`属性 - 因此您会看到错误。

你想要的是

```
uid = response.authResponse 
  ? response.authResponse.userID 
  : null; 
```

或者干脆

```
uid = response.authResponse && response.authResponse.userID || null; 
```

或者干脆

```
uid = response.authResponse && response.authResponse.userID; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-21T03:18:41.367

这是适用于我的代码行（iOS和Android）：

`var uid = response.authResponse.userID || response.authResponse.userId;`

android 的 userID 未定义，但 iOS 的 userId 未定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T20:31:17.587

您是否尝试过 response.authResponse.userId？

# mysql - 标记系统和评分系统

> ID：13944942
> 
> 赞同：2
> 
> 时间：2012-12-19T03:08:25.017
> 
> 标签：mysql, database, database-design, database-schema, tagging

我想跟踪关键字并在我的数据库中为每个用户建立一个评分系统。

我要一张`user`桌子和他们的`website`桌子。

用户表将包含基本的用户 ID、电子邮件、密码等网站表将包含 id、user_id、关键字和分数。

因此，我会将他们所有的关键字（最多 5 个关键字）保存在实施 MySQLicious 标记解决方案的网站表中。

我的问题是，我会不断更新分数，所以我应该在网站表中保留“分数”字段还是创建一个全新的表并根据网站的 id 字段链接所有分数？

编辑：我还应该将关键字保留在同一个表中还是将它们分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:16:56.860

如果您只有一个分数，最好将其添加到网站表中。在大多数情况下，制作一个单独的表格会使事情变得复杂，而且几乎没有什么优势。但是，在某些情况下，您可能需要创建一个单独的表：

*   您有许多网站，但其中只有一些有分数。您无需为大多数网站存储 NULL 分数，而是添加一个单独的表，该表仅存储拥有它们的网站的分数。
*   网站和分数没有一对一的关系，或者该关系本身具有属性（在您的场景中不太可能）。
*   您已经有很多网站，现在正在添加评分功能。您可能不想更改数据库架构，因为在部署新版本的应用程序时这需要很长时间。您无需更改可能需要很长时间的网站表，而是添加一个新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:55:45.710

只需将分数保持在同一张表中即可。如果将其保存在单独的表中，则没有任何好处。如果要更新，可以直接用新分数更新表，如果将这些表分开，除了一些外键负担外，没有其他好处。

# mysql - 如何让 MySQL 使用 INDEX 进行视图查询？

> ID：13944946
> 
> 赞同：70
> 
> 时间：2012-12-19T03:09:10.710
> 
> 标签：mysql, indexing

我正在使用 Java EE 上的 MySql 数据库开发一个 Web 项目。我们需要一个视图来汇总 3 个表中的数据，总共超过 300 万行。每个表都是用索引创建的。但是我还没有找到一种方法来利用我们使用 [group by] 创建的视图中的条件选择语句检索中的索引。

我从人们那里得到建议，**在 MySql 中使用视图不是一个好主意**。因为您不能像在 oracle 中那样为 mysql 中的视图创建索引。但是在我进行的一些测试中，索引可以在视图选择语句中使用。也许我以错误的方式创建了这些视图。

我将用一个例子来描述我的问题。

我们有一个记录 NBA 比赛中高分数据的表，在列 [happend_in] 上有索引

```
CREATE  TABLE `highscores` (
   `tbl_id` int(11) NOT NULL auto_increment,
   `happened_in` int(4) default NULL,
   `player` int(3) default NULL,
   `score` int(3) default NULL,
   PRIMARY KEY  (`tbl_id`),
   KEY `index_happened_in` (`happened_in`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

插入数据（8行）

```
INSERT INTO highscores(happened_in, player, score)
VALUES (2006, 24, 61),(2006, 24, 44),(2006, 24, 81),
(1998, 23, 51),(1997, 23, 46),(2006, 3, 55),(2007, 24, 34), (2008, 24, 37); 
```

然后我创建一个视图来查看科比·布莱恩特每年的最高得分

```
CREATE OR REPLACE VIEW v_kobe_highScores
AS
   SELECT player, max(score) AS highest_score, happened_in
   FROM highscores
   WHERE player = 24
   GROUP BY happened_in; 
```

我写了一个条件语句，看看**科比**在**2006年**得到的最高分；

```
select * from v_kobe_highscores where happened_in = 2006; 
```

当我在 toad for mysql 中解释它时，我发现 mysql 已经扫描**所有行**以形成视图，然后在其中查找具有条件的数据，而不使用 [happened_in] 上的索引。

```
explain select * from v_kobe_highscores where happened_in = 2006; 
```

![解释结果](../Images/ebde22628edbe6c89c4e5cf1f23cd4a8.png)

我们在项目中使用的视图是在具有数百万行的表中构建的。在每次视图数据检索中扫描表中的所有行是不可接受的。请帮忙！谢谢！

@zerkms 这是我在现实生活中测试的结果。我看不出有太大的区别。我认为@spencer7593 有正确的观点。**MySQL 优化器不会在视图查询中“下推”谓词。** ![实际测试](../Images/0b96c1fe6aae056b48b46f5f62d28d0b.png)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-19T03:27:22.300

如何让 MySQL 使用索引进行视图查询？简短的回答是提供 MySQL 可以使用的索引。

在这种情况下，最佳索引可能是“覆盖”索引：

```
... ON highscores (player, happened_in, score) 
```

MySQL 很可能会使用该索引，并且 EXPLAIN 将显示：`"Using index"`由于`WHERE player = 24` （索引中前导列上的相等谓词。`GROUP BY happened_id`（索引中的第二列），可能允许 MySQL 使用索引优化该索引以避免排序操作。`score`在索引中包含列将允许完全从索引中满足查询，而无需访问（查找）索引所引用的数据页。

这就是快速的答案。更长的答案是 MySQL 不太可能使用具有前导列的索引来`happened_id`进行视图查询。

* * *

**为什么视图会导致性能问题**

MySQL 视图的问题之一是 MySQL 不会将谓词从外部查询“推”到视图查询中。

您的外部查询指定`WHERE happened_in = 2006`. MySQL 优化器在运行内部“视图查询”时不考虑谓词。该视图的查询在外部查询之前单独执行。执行该查询的结果集被“物化”；也就是说，结果存储为中间 MyISAM 表。（MySQL 将其称为“派生表”，当您了解 MySQL 执行的操作时，它们使用的名称是有意义的。）

最重要的是，当 MySQL 运行形成视图定义的查询时，您定义的索引`happened_in`没有被 MySQL 使用。

创建中间“派生表”后，执行外部查询，使用该“派生表”作为行源。当外部查询运行时，`happened_in = 2006`谓词被评估。

请注意，视图查询中的所有行都已存储，这（在您的情况下）是每个值的行`happened_in`，而不仅仅是您在外部查询中指定相等谓词的行。

处理视图查询的方式可能有些人“出乎意料”，这是在 MySQL 中使用“视图”会导致性能问题的原因之一，与其他关系数据库处理视图查询的方式相比。

* * *

**使用合适的覆盖索引提高视图查询的性能**

鉴于您的视图定义和查询，您将获得的最佳结果将是视图查询的“使用索引”访问方法。为此，您需要一个覆盖索引，例如

```
... ON highscores (player, happened_in, score). 
```

对于您现有的视图定义和现有查询，这可能是最有益的索引（性能方面）。该`player`列是前导列，因为您在视图查询中的该列上有一个相等谓词。接下来是该`happened_in`列，因为您对该列进行了 GROUP BY 操作，并且 MySQL 将能够使用该索引来优化 GROUP BY 操作。我们还包括该`score`列，因为这是您的查询中唯一引用的其他列。这使得索引成为“覆盖”索引，因为 MySQL 可以直接从索引页面满足该查询，而无需访问基础表中的任何页面。这和我们要摆脱那个查询计划一样好：“​​使用索引”而不是“使用文件排序”。

* * *

**将性能与没有派生表的独立查询进行比较**

您可以将查询的执行计划与视图与等效的独立查询进行比较：

```
SELECT player
     , MAX(score) AS highest_score
     , happened_in
 FROM highscores
WHERE player = 24
  AND happened_in = 2006
GROUP
   BY player
    , happened_in 
```

独立查询也可以使用覆盖索引，例如

```
... ON highscores (player, happened_in, score) 
```

但无需具体化中间 MyISAM 表。

* * *

我不确定前面的任何内容是否都能直接回答您所问的问题。

**问：如何让 MySQL 使用 INDEX 进行视图查询？**

**A：定义视图查询可以使用的合适的INDEX。**

简短的回答是提供一个“覆盖索引”（索引包括视图查询中引用的所有列）。该索引中的前导列应该是用相等谓词引用的列（在您的情况下，该列`player`将是前导列，因为您`player = 24`在查询中有一个谓词。此外，GROUP BY 中引用的列应该是前导列在索引中，它允许 MySQL`GROUP BY`通过使用索引而不是使用排序操作来优化操作。

这里的重点是视图查询基本上是一个独立的查询；该查询的结果存储在一个中间“派生”表中（一个 MyISAM 表，在运行针对视图的查询时创建。

在 MySQL 中使用视图不一定是一个“坏主意”，但我强烈提醒那些选择在 MySQL 中使用视图的人要注意 MySQL 如何处理引用这些视图的查询。MySQL 处理视图查询的方式（显着）不同于其他数据库（例如 Oracle、SQL Server）处理视图查询的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T03:11:15.003

在这种情况下，使用（按此特定顺序）列创建**复合**索引`player + happened_in`是您可以做的最好的事情。

PS：不要在这么少的行上测试mysql优化器的行为，因为它可能更喜欢全扫描而不是索引。如果你想看看现实生活中会发生什么 - 用与现实生活相似的数据量填充它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-11T06:08:17.933

这并不能直接回答问题，但对于遇到此问题的其他人来说，这是一个直接相关的解决方法。这实现了与使用视图相同的好处，同时最大限度地减少了缺点。

我设置了一个 PHP 函数，我可以向该函数发送参数，将其推送到内部以最大化索引使用率，而不是在视图外的连接或 where 子句中使用它们。在函数中，您可以制定派生表的 SQL 语法，并返回该语法。然后在调用程序中，您可以执行以下操作：

```
$table = tablesyntax(parameters);
select field1, field2 from {$table} as x... + other SQL 
```

因此，您获得了视图的封装优势，能够像调用视图一样调用它，但不受索引限制。

# java - java.sql.SQLException：无效状态，CallableStatement 对象已关闭

> ID：13944954
> 
> 赞同：0
> 
> 时间：2012-12-19T03:11:11.677
> 
> 标签：java, sql, servlets, jdbc

下面的代码会生成此异常：

```
java.sql.SQLException: Invalid state, the CallableStatement object is closed.
    at net.sourceforge.jtds.jdbc.JtdsCallableStatement.checkOpen(JtdsCallableStatement.java:120)
    at net.sourceforge.jtds.jdbc.JtdsStatement.getConnection(JtdsStatement.java:1207)
    at net.sourceforge.jtds.jdbc.JtdsResultSet.getConnection(JtdsResultSet.java:409)
    at net.sourceforge.jtds.jdbc.JtdsResultSet.close(JtdsResultSet.java:470)
    at org.apache.tomcat.dbcp.dbcp.DelegatingResultSet.close(DelegatingResultSet.java:152)
    at 
```

下面的这段代码有时会产生上面的错误，但有时不会：

```
 private void doRequest(HttpServletRequest request) throws IOException, ServletException {
        CallableStatement stmt = null;
        ResultSet rs = null;
        String someString;
        try {
            this.connectDB();
            stmt = this.conn.prepareCall("{call sp_SomeSP1(?)}");
            stmt.setLong(1, someFunc());

            rs = stmt.executeQuery();

            while (rs.next()) {
                if (rs.getInt(1)==someOtherFunc()) {
                    someString = rs.getString(2);
                    break;
                }
            }

            stmt = conn.prepareCall("{call sp_someSP(?, ?)}");
            stmt.setLong(1, someFunc());
            stmt.setTimestamp(2, new Timestamp(getFrom().getTime()));

            rs = stmt.executeQuery();
            if (rs.next()) {
                lastUpdated = rs.getTimestamp("LastUpdated");
            }

            request.setAttribute("lastUpdated", lastUpdated);

            LOGGER.debug("Forwarding to view...");
            getServletContext().getRequestDispatcher("/SomeJSP.jsp").forward(this.request, this.response);

        } catch (NamingException e) {
            LOGGER.error("Database connection lookup failed", e);
            sendError("Server Error");
        } catch (SQLException e) {
            LOGGER.error("Query failed", e);
            sendError("Server Error");
        } catch (IllegalStateException e) {
            LOGGER.error("View failed", e);
        } finally {
            try {
                if (rs!=null) rs.close(); 
            } catch (NullPointerException e) {
                LOGGER.error("Result set closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Result set closing failed", e);
            }
            try {
                if (stmt!=null) stmt.close();
            } catch (NullPointerException e) {
                LOGGER.error("Statement closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Statement closing failed", e);
            }
            try {
                this.closeDB();
            } catch (NullPointerException e) {
                LOGGER.error("Database connection closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Database connection closing failed", e);
            }
        } 
```

这意味着`doRequest()`大部分时间都可以正常工作，但有时我们会收到**HTTP 错误 500**，如果我们检查 tomcat 日志，我们会看到：

```
java.sql.SQLException: Invalid state, the CallableStatement object is closed. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:23:43.047

您似乎正在使用带有 Servlet（`conn`变量）的成员变量。但是，Servlet 通常可以由多个线程同时调用。你如何确保多个线程不会意外使用/关闭同一个连接？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:17:15.733

```
stmt.setLong(1, someFunc());
stmt.setTimestamp(3, new Timestamp(getFrom().getTime())); 
```

这将是

```
stmt.setLong(1, someFunc());
stmt.setTimestamp(2, new Timestamp(getFrom().getTime())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T03:24:06.150

在堆栈跟踪中看到此错误消息`org.apache.tomcat.dbcp.dbcp.DelegatingResultSet.close`，看起来**您在关闭 resultset 时遇到了错误**。

我建议您更改结果集检查条件以在关闭结果集之前检查结果集是否仍然打开：

```
 if (rs!=null && ! rs.isClosed()){
        //resultset is there and not in closed state
        rs.close(); 
    } 
```

# mysql - 不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO

> ID：13944956
> 
> 赞同：169
> 
> 时间：2012-12-19T03:11:43.407
> 
> 标签：mysql, deprecated, php

当我尝试从 PHP 连接到 MySQL 服务器时，我看到以下错误：

> 不推荐使用：不推荐使用 mysql 扩展并将在将来删除：在第 123 行的 /path/to/filename.php 中使用 mysqli 或 PDO 代替

引用行上的代码是：

```
mysql_connect($server, $username, $password); 
```

我确信这些论点是正确的，并且这个确切的代码已经运行了多年而没有问题。事实上，我是从一个资源丰富的 PHP 教程中获得它的。

1.  为什么会这样？

2.  我该如何解决？

3.  我知道可以通过设置exclude`error_reporting`来抑制弃用错误：`php.ini``E_DEPRECATED`

    ```
    error_reporting = E_ALL ^ E_DEPRECATED 
    ```

    如果我这样做会发生什么？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-12-19T03:11:43.407

1.  > 为什么会这样？

    `ext/mysql`提供所有以前缀命名的函数的整个PHP 扩展在 PHP v5.5.0 中`mysql_`被[正式弃用，](http://php.net/manual/en/changelog.mysql.php)并[在 PHP v7 中被删除](https://secure.php.net/manual/en/migration70.removed-exts-sapis.php)。

    它最初是在 MySQL v3.20 的 PHP v2.0（1997 年 11 月）中引入的，自 2006 年以来没有添加任何新功能。再加上缺乏新功能，在复杂的安全漏洞中难以维护这些旧代码。

    自 2011 年 6 月以来，该手册已包含针对其在新代码中使用的警告。

2.  > 我该如何解决？

    正如错误消息所暗示的那样，您可以考虑另外两个 MySQL 扩展：[MySQLi](http://php.net/manual/en/book.mysqli.php)和[PDO_MySQL](http://php.net/manual/en/ref.pdo-mysql.php)，其中任何一个都可以用来代替`ext/mysql`. 自 v5.0 以来，两者都在 PHP 核心中，因此如果您使用的版本会引发这些弃用错误，那么您几乎可以肯定地立即开始使用它们 — 即无需任何安装工作。

    它们略有不同，但与旧扩展相比具有许多优势，包括对事务、存储过程和预准备语句的 API 支持（从而提供了击败[SQL 注入攻击](https://stackoverflow.com/q/332365)[的最佳方法](https://stackoverflow.com/a/60496)）。PHP 开发人员 Ulf Wendel[对这些特性进行了彻底的比较](http://blog.ulf-wendel.de/2012/php-mysql-why-to-upgrade-extmysql/)。

    Hashphp.org 有一个关于从[PDO](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)[迁移的优秀教程`ext/mysql`](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

3.  > 我知道可以通过设置exclude`error_reporting`来抑制弃用错误：`php.ini``E_DEPRECATED`
    > 
    > ```
    > error_reporting = E_ALL ^ E_DEPRECATED 
    > ```
    > 
    > 如果我这样做会发生什么？

    是的，可以抑制此类错误消息并`ext/mysql`暂时继续使用旧扩展。但是**你真的不应该这样做**——这是来自开发人员的最后警告，该扩展可能不会与 PHP 的未来版本捆绑在一起（事实上，如前所述，它已从 PHP v7 中删除）。相反，您应该借此机会立即迁移您的应用程序*，*以免为时已晚。

    另请注意，此技术将抑制*所有* `E_DEPRECATED`消息，而不仅仅是与`ext/mysql`扩展有关的消息：因此，您可能不知道即将对 PHP 进行的其他更改会影响您的应用程序代码。当然，可以通过使用 PHP 的[错误控制运算符](http://php.net/manual/en/language.operators.errorcontrol.php)（即在相关行前面加上-）来抑制相关表达式中出现的错误，`@`但是这将抑制该表达式引发的*所有*错误，而不仅仅是错误`E_DEPRECATED`。

* * *

### 你该怎么办？

*   **您正在开始一个新项目。**

    绝对*没有理由*使用`ext/mysql`- 选择其他更现代的扩展程序之一，并从它们提供的好处中获得回报。

*   **你有（你自己的）遗留代码库，目前依赖于`ext/mysql`.**

    执行回归测试是明智的：在您确定所有潜在的影响领域，围绕每个领域进行计划并在暂存环境中彻底测试您的解决方案之前，您真的不应该更改*任何内容（尤其是升级 PHP）。*

    *   **遵循良好的编码实践，您的应用程序是以松散集成/模块化的方式开发的，并且数据库访问方法都是自包含的，可以很容易地替换为新扩展之一。**

        花半个小时重写这个模块以使用另一个更现代的扩展；彻底测试。您可以稍后引入进一步的改进，以获得它们提供的好处的回报。

    *   **数据库访问方法分散在各处，不能轻易地换成新的扩展之一。**

        考虑此时是否真的需要升级到 PHP v5.5。

        您应该开始计划`ext/mysql`用其他更现代的扩展来替换，以便您可以从它们提供的好处中获得回报；您也可以将其作为一个机会，将您的数据库访问方法重构为更加模块化的结构。

        但是，如果您*迫切*需要立即升级 PHP，您可能会考虑暂时抑制弃用错误：但首先要确保识别出任何其他也被抛出的弃用错误。

*   **您正在使用依赖于`ext/mysql`.**

    考虑此时是否真的需要升级到 PHP v5.5。

    检查开发人员是否发布了与此特定问题相关的任何修复、解决方法或指南；或者，如果没有，通过提请他们注意这件事来迫使他们这样做。如果您*迫切*需要立即升级 PHP，您可能会考虑暂时抑制弃用错误：但首先要确保识别出任何其他也被抛出的弃用错误。

    执行回归测试是绝对必要的。

# python - Python中多处理或多线程的动态刷新打印

> ID：13944959
> 
> 赞同：8
> 
> 时间：2012-12-19T03:11:57.983
> 
> 标签：python, multithreading, download

我已经实现了一个多处理下载器。如何打印可以在终端的不同部分自动刷新的状态栏（完成率，下载速度）。

像这样：

```
 499712  [6.79%]   68k/s     // keep refreshing
    122712  [16.79%]   42k/s    // different process/thread
     99712  [56.32%]   10k/s 
```

代码：

```
download(...)
...
    f = open(tmp_file_path, 'wb')
    print "Downloading: %s Bytes: %s" % (self.file_name, self.file_size)
    file_size_dl = 0
    block_sz = 8192
    start_time = time.time()
    while True:
        buffer = self.opening.read(block_sz)
        if not buffer:
            break

        file_size_dl += len(buffer)
        f.write(buffer)
        end_time = time.time()
        cost_time = end_time - start_time
        if cost_time == 0:
            cost_time = 1
        status = "\r%10d  [%3.2f%%]  %3dk/s" % (file_size_dl,
                file_size_dl * 100\. / self.file_size,
                file_size_dl * 100\. / 1024 / 1024 / cost_time)
        print status,
        sys.stdout.flush()
    f.close() 
```

DownloadProcess 继承 Process 类并触发下载方法。

我使用队列来存储网址。这是启动过程

```
 ...
  for i in range(3):
    t = DownloadProcess(queue)
    t.start()
    for url in urls:
        queue.put(url)
  queue.join() 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-19T06:41:18.640

下面是一个同时实现了多处理和多线程的演示。要尝试其中一个，只需取消注释代码顶部的导入行。如果您在一行上有一个进度条，那么您可以使用打印 '\r' 的技术将光标移回行首。但是，如果您想要多行进度条，那么您将不得不变得更花哨。每次我想打印进度条时，我都会清空屏幕。查看文章[Python 中的 Unix 上的控制台输出，](http://www.darkcoding.net/software/pretty-command-line-console-output-on-unix-in-python-and-go-lang/)它对我生成下面的代码有很大帮助。他展示了这两种技术。您还可以试一试作为 python 标准库一部分的 curses 库。问题[多行进度条](https://stackoverflow.com/questions/1727155/multiline-progress-bars)问了一个类似的问题。主线程/进程产生子线程来完成工作并使用队列将它们的进度传回主线程。我强烈建议使用队列进行进程间/线程通信。然后主线程显示进度并等待所有子线程结束执行，然后再退出。

**代码**

```
import time, random, sys, collections
from multiprocessing import Process as Task, Queue
#from threading import Thread as Task
#from Queue import Queue

def download(status, filename):
    count = random.randint(5, 30)
    for i in range(count):
        status.put([filename, (i+1.0)/count])
        time.sleep(0.1)

def print_progress(progress):
    sys.stdout.write('\033[2J\033[H') #clear screen
    for filename, percent in progress.items():
        bar = ('=' * int(percent * 20)).ljust(20)
        percent = int(percent * 100)
        sys.stdout.write("%s [%s] %s%%\n" % (filename, bar, percent))
    sys.stdout.flush()

def main():
    status = Queue()
    progress = collections.OrderedDict()
    workers = []
    for filename in ['test1.txt', 'test2.txt', 'test3.txt']:
        child = Task(target=download, args=(status, filename))
        child.start()
        workers.append(child)
        progress[filename] = 0.0
    while any(i.is_alive() for i in workers):
        time.sleep(0.1)
        while not status.empty():
            filename, percent = status.get()
            progress[filename] = percent
            print_progress(progress)
    print 'all downloads complete'

main() 
```

**演示**

![在此处输入图像描述](../Images/202a5d65c6c7e8a721f29b7b249393c1.png)

# search - Filemaker主概览表记录

> ID：13944961
> 
> 赞同：0
> 
> 时间：2012-12-19T03:12:03.427
> 
> 标签：search, layout, datatable, filemaker, relationships

我有两张桌子：`businesses`和`leads`。`businesses`是父表；一个记录中`businesses`可能有很多`leads`。

我的`leads`表格包含诸如“电话、约会等”之类的数据——所有这些都是可搜索的。

我正在尝试使用门户过滤器或列表视图创建一个布局，以按我的潜在客户信息对我的所有业务进行排序。

目标是帮助我弄清楚我今天需要给谁打电话或见谁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:43:02.830

进入管理数据库并确保您在企业和潜在客户之间建立了实际的关系。

然后根据业务表进行布局，并根据潜在客户向该布局添加一个门户，由于关系，该门户将显示在下拉列表中。您还将在门户属性中看到按您想要的任何列进行排序的选项。

# java - 如何从 javascript 调用容器管理的安全检查？

> ID：13944962
> 
> 赞同：0
> 
> 时间：2012-12-19T03:12:12.600
> 
> 标签：java, javascript, servlets, jsf-2, security

我有一个奇怪的案例，我不知道如何解决。

**用例：** 我有一个使用普通旧 servlet 和 jsp 构建的遗留应用程序，它需要调用另一个使用 JSF 2 构建的应用程序。JSF 2 使用基于表单的身份验证的容器管理安全性。

在遗留应用程序中，它有一个页面允许用户自动验证进入 JSF 2 应用程序。

```
<HTML>
    <HEAD>
       <script>
          function doLogin() {
             document.loginform.action="http://localhost:6060/MyApp/faces/j_security_check";
             document.loginform.submit();
          }
       </script>
    </HEAD>
    <BODY>
       <FORM id="loginform" name="loginform" method="POST">
          <input type="text" id="j_username" name="j_username">
          <input type="password" id="j_password" name="j_password">
          <input type="button" onClick="doLogin()">
       </FORM>
    </BODY>
</HTML> 
```

我的问题是，如何以编程方式调用身份验证机制？旧版和 JSF 2 应用程序都具有不同的身份验证机制，因此我需要进行两次身份验证。

我尝试使用上面的代码，它可以成功登录。但是，如果用户记录了无效的用户 ID 和密码，它会重置回登录页面，而不是转发到 jsf2 应用程序的无效用户 ID/密码页面。有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:38:46.127

您的 web.xml 中必须有如下配置的错误页面：

```
<form-error-page>/fail_login.html</form-error-page> 
```

您可以在您的网页中添加一个重定向`<form-error-page>`，将您带到相应的网页。

# mysql - 重复的键名“unique_id”

> ID：13944963
> 
> 赞同：3
> 
> 时间：2012-12-19T03:12:17.437
> 
> 标签：mysql, sql, phpmyadmin

这是sql，但是，有一个错误说“ ***#1061 - Duplicate key name 'unique_id'*** ”，这是什么问题。

```
create table `users`(
   uid int(11) auto_increment,
   unique_id varchar(23) not null unique,
   name varchar(50) not null,
   email varchar(100) not null unique,
   encrypted_password varchar(80) not null,
   salt varchar(10) not null,
   created_at datetime,
   updated_at datetime null,
  PRIMARY KEY (`unique_id`),
  UNIQUE KEY `uid` (`uid`),
  UNIQUE KEY `unique_id` (`unique_id`),
  UNIQUE KEY `email` (`email`)
)ENGINE=InnoDB AUTO_INCREMENT=877888 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T03:13:42.013

删除此行

```
UNIQUE KEY `unique_id` (`unique_id`), 
```

因为`unique_id`已经是`Primary Key`。并且`Primary Keys`是**独一无二的**。

完整`CREATE TABLE`的声明

```
create table `users`
(
   uid int(11) auto_increment,
   unique_id varchar(23) not null,
   name varchar(50) not null,
   email varchar(100) not null unique,   -- specified here
   encrypted_password varchar(80) not null,
   salt varchar(10) not null,
   created_at datetime,
   updated_at datetime null,
   PRIMARY KEY (`unique_id`),
   UNIQUE KEY `uid` (`uid`)
)  ENGINE=InnoDB AUTO_INCREMENT=877888 
DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/db9d4)

# c# - 处理组合

> ID：13944965
> 
> 赞同：3
> 
> 时间：2012-12-19T03:12:32.007
> 
> 标签：c#, combinations, binomial-coefficients

在 C# 中，我创建了一个包含各种索引列表的列表数组。我想显示 2 种不同索引组合的 1 种组合。一个里面的2个组合不能重复。

我正在尝试编写一个有 14 名配对球员的网球锦标赛。每个玩家不得与另一位玩家配对两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:05:05.797

您的问题属于二项式系数的范围。二项式系数处理在总共有 N 个项目的 K 组中选择唯一组合的问题。

我用 C# 编写了一个类来处理处理二项式系数的常用函数。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形中固有的数学属性来做到这一点，并且与迭代集合相比非常有效。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。我相信它也比旧的迭代解决方案更快。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可使用上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

有两种不同的方式来解释您的问题。在网球比赛中，锦标赛通常安排为使用单次淘汰，每场比赛的获胜者晋级。但是，一些本地俱乐部也使用循环赛，每个球员只与其他球员比赛一次，这似乎是您正在寻找的问题。

所以，问题是 - 如何计算可以与 14 名玩家（N = 14）一起玩的独特比赛的总数，其中每个玩家只玩另一个玩家（因此 K = 2）。二项式系数计算如下：

唯一组合的总数 = N！/（K！*（N - K）！）。这 ！字符称为阶乘，表示 N * (N-1) * (N-2) ... * 1。当 K 为 2 时，二项式系数减少为：N * (N - 1) / 2。所以，N 代入 14，K 代入 2，我们发现组合的总数为 91。

以下代码将遍历每个 uniue 组合：

```
int N = 14;  // Total number of elements in the set.
int K = 2;  // Total number of elements in each group.
// Create the bin coeff object required to get all
// the combos for this N choose K combination.
BinCoeff<int> BC = new BinCoeff<int>(N, K, false);
int NumCombos = BinCoeff<int>.GetBinCoeff(N, K);
// The Kindexes array specifies the 2 players, starting with index 0.
int[] KIndexes = new int[K];
// Loop thru all the combinations for this N choose K case.
for (int Combo = 0; Combo < NumCombos; Combo++)
{
   // Get the k-indexes for this combination.  
   BC.GetKIndexes(Loop, KIndexes);
   // KIndex[0] is the first player & Kindex[2] is the 2nd player.
   // Print out the indexes for both players.
   String S = "Player1 = Kindexes[0].ToString() + ", " +
      "Player2 = Kindexes[1].ToString();
   Console.WriteLine(S};
} 
```

你应该能够很容易地将这个类移植到你选择的语言上。您可能不必移植类的通用部分来实现您的目标。根据您使用的组合数量，您可能需要使用比 4 字节整数更大的字长。

我还应该提到，由于这是一个课堂项目，您的老师可能不会接受上述答案，因为他可能正在寻找更多原创作品。在这种情况下，您可能需要考虑使用循环。在提交解决方案之前，您应该与他核实。

# windows - 有没有办法在宏中“有条件地”使用 _T/TEXT？

> ID：13944969
> 
> 赞同：1
> 
> 时间：2012-12-19T03:12:47.017
> 
> 标签：windows, visual-c++, unicode, wchar-t, tchar

这个问题特定于 Visual C++（您可以假设 Visual C++ 2005 及更高版本）。

我想为来自 unixoid 系统（特别是 FreeBSD）的程序创建粘合代码，以便在 Win32 上构建和运行，而对原始`.c`文件的更改最少。现在，大部分内容都很简单，但现在我遇到了一个问题。我正在使用`tchar.h`标头和`TCHAR`/ `_TCHAR`，并且需要在原始代码中为`err`and`errx`调用创建粘合代码（请参阅 参考资料）。[`err(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/err.3.html)请耐心等待，即使您不同意`tchar.h`仍应编写代码 using。

调用`err`和`errx`大致采取两种形式，这就是问题发生的地方：

```
err(1, "some string with %d format specifiers and %s such", ...)
/* or */
err(1, NULL, ...) 
```

后者将输出存储在`errno`（使用`strerror`）中的错误。

现在，问题是，有没有办法编写一个可以同时`NULL`接受字符串文字的通用宏？我不必（*也不会*）关心作为第二个参数传递的*变量*`NULL`，只有和文字字符串。

当然，我天真的初始方法没有考虑`fmt`传递为`NULL`（使用可变参数宏！）：

```
#define err(eval, fmt, ...) my_err(eval, _T(fmt), __VA_ARGS__) 
```

现在我不知道如何使用宏来实现这一点，因为它需要一种我目前无法想象的编译时和运行时条件的混合。因此，我正在寻找一个权威的答案，无论这是否可以想象。

我现在采用的方法 - 缺乏更好的方法 - 是编写一个接受的包装函数，就像`err`and `errx`， a ( `const`)`char *`然后将其转换为`wchar_t *`if 编译时`_UNICODE`定义。这应该可以工作，假设调用者在后面传递了一个`_TCHAR*`变量参数的字符串`fmt`（在我的上下文中这是一个理智的假设）。否则，我还必须转换`%s`为`%hs`格式字符串内部，以处理 MS 所称的“ANSI”字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:09:44.543

这是一个解决方案：

```
#define _WIN32_WINNT 0x0502

#include <windows.h>
#include <stdio.h>
#include <tchar.h>

#ifdef _UNICODE

#define LNULL NULL
#define fn(x) myfn(L ## x)

#else

#define fn(x) myfn(x)

#endif

void myfn(TCHAR * str)
{
    if (str == NULL) _tprintf(_T("<NULL>")); else _tprintf(str);
    _tprintf(_T("\n"));
}

int main(int argc, char ** argv)
{
    fn("hello");
    fn(NULL);
    return 0;
} 
```

# ruby-on-rails-3 - 如何批量更新我的应用数据库？

> ID：13944973
> 
> 赞同：0
> 
> 时间：2012-12-19T03:13:21.357
> 
> 标签：ruby-on-rails-3, model-view-controller, model

刚接触 MVC 和 RoR，很难掌握一些概念。其中之一是对数据库的批量更新。

假设我有一组数据，例如学生列表及其属性，如下所示

```
学生证：1
姓名：爱丽丝
电子邮件：alice@alice.com
属性：随便
属性2：任何东西2

```

```
学生证：2
姓名：凯特
电子邮件：kate@kate.com
属性：随便
属性2：任何东西2

```

ETC..

我从 API 调用中获得了列表。

我不希望它们是可编辑的，也不希望这些属性对用户可见。

问题是，我该如何将它们保存到我的数据库中？似乎在MVC方式中，每个动作都需要一个视图？我可以将其作为后台进程吗？

谢谢瑞恩

p / s-也欢迎指向正确资源的指针

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:17:58.030

您可以将固定装置用于此类事情。或者，只需使用 SQL 在 Rails 之外插入数据库。

[http://api.rubyonrails.org/classes/ActiveRecord/Fixtures.html](http://api.rubyonrails.org/classes/ActiveRecord/Fixtures.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:22:53.300

所以您只想从 API 获取记录并从中创建模型？

您可能会考虑的一种选择是编写 rake 任务来获取数据并创建相应的模型（没有 railscast 链接，没有 rails 答案是完整的，所以[这里有一个](http://railscasts.com/episodes/66-custom-rake-tasks)它很旧，但讲述了基础知识）

走这条路，您可以避免使数据可公开编辑，而只需将其放入模型/数据库中

# bash - 如何在预定的“at”作业中找到命令？

> ID：13944977
> 
> 赞同：1
> 
> 时间：2012-12-19T03:13:44.877
> 
> 标签：bash, scheduled-tasks

我有一个 linux 服务器，`at`上面安排了几个作业。
当我这样做时`atq`，我会看到已安排作业的用户名以及这些作业已安排运行的时间。但是，我没有看到实际的工作是什么（正在运行什么脚本/参数？）

有没有办法让我查看实际计划在计划时间运行的内容，而不必等到那个时间并运行`ps aux | grep username`？理想情况下，我想在不记录的情况下进行查找

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T03:24:01.427

跑步`atq`会给你这样的东西。

```
$ atq
job 1072250520.a at Wed Dec 24 00:22:00 2003 
```

这`1072250520.a`是工作编号。`at -c`使用此作业 ID运行

```
at -c 1072250520.a 
```

在我的`Ubuntu 12.10`, `at -c 1`(job id `1`) 中，首先给我所有环境变量，然后在最后给我命令。

# javascript - javascript动态创建脚本块

> ID：13944987
> 
> 赞同：2
> 
> 时间：2012-12-19T03:15:25.993
> 
> 标签：javascript, client-side

我有一个关于使用 JavaScript 插入动态创建的脚本的问题。

这是我正在使用的代码：

```
 var body = document.getElementsByTagName('body')[0];
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src = 'code.js';
  body.appendChild(script); 
```

我一般是把脚本放在页面底部，但是如果像这样动态插入，有没有办法保证脚本放在页面底部呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:53:52.003

> 如果像这样动态插入，有没有办法确保脚本放在页面底部？

你已经这样做了`body.appendChild(script)`；当然，稍后可能会插入其他元素。

但是，当您动态插入脚本时，绝对不需要*确保*将其放置在任何特定位置 - 它是异步加载和执行的（既不阻塞也不等待）。您可以将它*放在*文档中的任何位置，甚至可以立即将其删除，它不会影响任何加载或执行行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:08:25.170

有一种方法可以确保使用 Jquery。将`code.js`在 DOM 加载并放在`</body>`标签之前调用：

```
$(function() {
var body = document.getElementsByTagName('body')[0];
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src = 'code.js';
  body.appendChild(script);
}); 
```

# sql - 如何使用 T-SQL 编写传输

> ID：13944989
> 
> 赞同：5
> 
> 时间：2012-12-19T03:15:50.860
> 
> 标签：sql, sql-server, tsql

如果我需要通过 t-sql 语法转置数据我该怎么办？

```
BID
-----------------
ID.B1211
50332
50333
50922
50420
50421
50326
50327 
```

我想转置到

```
AID BID
----------
ID.B1211
ID.B1211  50332
ID.B1211  50333
ID.B1211  50922
ID.B1211  50420
ID.B1211  50421
ID.B1211  50326
ID.B1211  50327 
```

真实的数据是这样的。每个BatchID的ID都在第一位。我想把ID放到另一列。uid是标识和连续的。

```
uid BatchID
---------------
32  ID.B121129029-14
33  P3YDCS50332
34  P3YDCS50333
35  P3YDCS50922
36  P3YDCS50420
37  P3YDCS50421
38  P3YDCS50326
39  P3YDCS50327
40  P3YDCS50329
41  P3YDCS50328
42  P3YDCS50423
43  P3YDCS50422
44  P3YDCS50921
45  P3YDCS50334
46  P3YDCS50337
47  ID.B121115009-14
48  P3YDCSO0206
49  P3YDCSO0215
50  P3YDCSO0201
51  P3YDCSO0205
52  P3YDCSO0204
53  P3YDCSO0214
54  P3YDCSO0198
55  P3YDCSO0197
56  P3YDCSO0213
57  P3YDCSO0212
58  P3YDCSO0211
59  P3YDCSO0202
60  P3YDCSO0200
61  P3YDCSO0199 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:33:53.623

```
select t.uid, a.batchid bid1, nullif(t.batchid, a.batchid) bid22
from <table> t
cross apply
(select top 1 batchid from <table> where uid <= t.uid and batchid like 'id%' 
  order by uid desc) a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:45:59.747

我对您的数据做了一些假设（id 总是有序的，BatchID 总是以'ID'开头）但这是我想出的......

```
CREATE TABLE #Batch (id INT IDENTITY, BatchID VARCHAR(20));

INSERT INTO #Batch (BatchID) VALUES ('ID.B121129029-14')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCS50332')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCS50333')
INSERT INTO #Batch (BatchID) VALUES ('ID.B121115019-14')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCS50329')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCS50328')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCS50423')
INSERT INTO #Batch (BatchID) VALUES ('ID.B121115009-14')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCSO0206')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCSO0215')
INSERT INTO #Batch (BatchID) VALUES ('ID.B121115049-14')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCSO0211')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCSO0202')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCSO0200')
INSERT INTO #Batch (BatchID) VALUES ('P3YDCSO0199')

; 
WITH    MainBatchIDs
          AS (SELECT    ROW_NUMBER() OVER (ORDER BY id) rownum
                       ,id
                       ,BatchID
              FROM      #Batch b1
              WHERE     BatchID LIKE 'ID.%'
             ),
        IDGroups
          AS (SELECT    A1.id AS FirstID
                       ,A2.id AS NextID
                       ,A1.BatchID
              FROM      MainBatchIDs A1
              LEFT JOIN MainBatchIDs A2
                        ON A1.rownum = A2.rownum - 1
             )
     SELECT G.BatchID AID
           ,CASE WHEN G.BatchID = B.BatchID THEN NULL
                 ELSE B.BatchID
            END BID
     FROM   #Batch B
     INNER JOIN IDGroups G
            ON B.id >= G.FirstID
               AND B.id < G.NextID

DROP TABLE #Batch 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:55:45.717

```
declare @t table (uid int,BatchID varchar(30))
insert into @t Values 

(32,'ID.B121129029-14'),
(33,'P3YDCS50332'),
(34,'P3YDCS50333'),
(35,'P3YDCS50922'),
(36,'P3YDCS50420'),
(37,'P3YDCS50421'),
(38,'P3YDCS50326'),
(39,'P3YDCS50327'),
(40,'P3YDCS50329'),
(41,'P3YDCS50328'),
(42,'P3YDCS50423'),
(43,'P3YDCS50422'),
(44,'P3YDCS50921'),
(45,'P3YDCS50334'),
(46,'P3YDCS50337'),
(47,'ID.B121115009-14'),
(48,'P3YDCSO0206');   

Select (Select BatchID from @t where BatchID like ('ID.%') and uid=
  (select MAX(uid) from @t t where  BatchID like ('ID.%') and t.uid<o.uid) ) as AID
,BatchID as BID from @t o where not BatchID like ('ID.%')
order by uid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:19:55.570

```
;WITH cte AS
 (
  SELECT uid, BatchID, CAST('' AS nvarchar(30)) AS BatchID
  FROM dbo.test60
  WHERE uid = 32 --initial ID
  UNION ALL
  SELECT t.uid, CASE WHEN t.BatchID NOT LIKE 'ID.%' THEN c.BatchID ELSE t.BatchID END,
                CASE WHEN t.BatchID LIKE 'ID.%' THEN '' ELSE t.BatchID END
  FROM dbo.test60 t JOIN cte c ON t.uid = c.uid + 1
  )
  SELECT *
  FROM cte 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/caea1/1/0)上的演示[](http://sqlfiddle.com/#!3/caea1/1/0)

# php - 解释 PHP 中的字符串类型

> ID：13944990
> 
> 赞同：1
> 
> 时间：2012-12-19T03:16:06.743
> 
> 标签：php

> **可能重复：**
> [php中单引号和双引号字符串的区别](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php)

我是 PHP 的新手，我对如何指定字符串有点困惑。

似乎有 4 种方法来指定字符串

1.  单引号字符串
2.  双引号字符串
3.  赫雷多克
4.  Nowdoc (PHP 5.3.0 起)

我想知道为什么有这么多类型的规范以及指定字符串的最佳方法是什么？

因为在[这篇](http://phplens.com/lens/php-book/optimizing-debugging-php.php)文章中它再次说单引号和双引号同样快，但还有其他人不同意。

为什么还要有单引号和双引号？在某些条件下，它是否会增加速度和准确性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:19:27.147

单引号字符串比双引号字符串注意更少的转义序列。比较：

```
echo "one\ntwo";
# one
# two 
```

和：

```
echo 'one\ntwo';
# one\ntwo 
```

另一个关键区别是双引号字符串插入变量。单引号字符串不会。

至于heredoc 和nowdoc，它们只是以更好的方式指定长字符串（可能包含引号- 如果包含引号，您不必转义它们）的方法。为什么有两个？好吧，heredoc 是双引号字符串，就像 nowdoc 是单引号字符串一样。

（顺便说一下，所有这些信息和更多信息都可以[在 PHP 文档](http://ca1.php.net/manual/en/language.types.string.php)中找到。）

因此，有很多不同类型的字符串文字，因为字符串文字有很多不同的用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T03:21:38.800

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

*   **单引号字符串**基本上是普通字符串。它们仅在编译脚本时被解析
*   **双引号**字符串*在运行时解析*
*   **Heredocs**是一种在多行上定义双引号字符串的方法，它使用特殊的开头和结尾序列
*   **Nowdocs**就是 Heredocs，只是像单引号字符串一样未解析

在性能方面，单引号字符串通常比双引号字符串更可取，因为它们基本上表示常量。因此，在大多数情况下，您将希望使用单引号字符串。

但是，在准备输出时，双引号字符串通常非常实用

```
$combined = "An $a and $b plus $c";
$combined = 'An '.$a.' and '.$b.' plus '.$c; 
```

这些行是相等的，但您可能会猜到哪个更容易编写和维护。

您可能应该记住，虽然这对 PHP 来说是相当特定的，但大多数其他编程语言都支持类似的语法，但处理它们的方式相同。因此，对于那些真正存在的人来说，它们的存在只是为了让在字符串中写引号更容易（考虑`"Someone can't handle an apostrophe, but it's not me."`或`'<p class="some">Text.</p>'`），而不必逃避每一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T04:45:56.003

单引号内的每个字符和变量都按字面意思处理（一个例外是 \' 的组合，请参阅下面的“转义字符”）。以下代码不会产生打印变量值的预期结果：

```
 $name = 'Jon'; 
  echo 'Hello, $name'; 
```

**该代码将按字面意思打印“Hello, $name”。**

相反，双引号内的字符和变量将被解释。**此代码将打印“你好，乔恩”：**

```
$name = 'Jon'; 
echo "Hello, $name"; 
```

几乎所有的特殊转义序列也需要在双引号内使用。由于双引号字符串的解释，可以说它们的效率低于单引号字符串。但是，对于大多数应用程序，效率差异无关紧要。

# ruby-on-rails - 辅助测试中未定义的局部变量或方法“main_app”

> ID：13944991
> 
> 赞同：7
> 
> 时间：2012-12-19T03:16:32.097
> 
> 标签：ruby-on-rails, rspec, rails-engines

我在 RSpec 上运行我在 Rails 主应用程序上的帮助程序测试时出错（带有更多插件）

```
 1) MenuHelper maintence menu 
   Failure/Error: before { menu = build_menu_maintence() }
 NameError:
   undefined local variable or method `main_app' for #<RSpec::Core::ExampleGroup::Nested_3::Nested_1:0x007f92f561f280>
 # ./app/helpers/menu_helper.rb:37:in `eval'
 # (eval):1:in `block in build_menu_items'
 # ./app/helpers/menu_helper.rb:37:in `eval'
 # ./app/helpers/menu_helper.rb:37:in `block in build_menu_items'
 # ./app/helpers/menu_helper.rb:23:in `each'
 # ./app/helpers/menu_helper.rb:23:in `build_menu_items'
 # ./app/helpers/menu_helper.rb:15:in `build_menu'
 # ./app/helpers/menu_helper.rb:48:in `build_menu_maintence'
 # ./spec/helpers/menu_helper_spec.rb:11:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T20:02:42.943

我在可安装的引擎中取得了以下成功：

```
def main_app
  Rails.application.class.routes.url_helpers
end

main_app.root_path 
```

# ruby-on-rails-3 - Rspec factory_girl ActiveMerchant 未定义方法`credit_card='

> ID：13944993
> 
> 赞同：0
> 
> 时间：2012-12-19T03:16:34.080
> 
> 标签：ruby-on-rails-3, rspec, factory-bot, activemerchant

我正在尝试测试 Reservation 模型的创建，该模型涉及在创建时使用 ActiveMerchant 处理付款。

支付处理的初始设置涉及 ActiveMerchant Railscasts。付款在应用程序中运行良好。（[http://railscasts.com/episodes/145-integrating-active-merchant](http://railscasts.com/episodes/145-integrating-active-merchant)）

我已经尝试在工厂和它自己的“：valid_credit_card”工厂内创建`credit_card`对象......`Reservation`

基本测试只是尝试验证可以创建预留。测试结果：

```
1) Reservation should have a valid factory
 Failure/Error: @current_reservation = Factory.create(:reservation)
 NoMethodError:
 undefined method `credit_card=' for #<Reservation:0xb5f6173c>
 # ./spec/models/reservation_spec.rb:11 
```

Reservation 属于_to a user 并通过reservation_sets 拥有_many 个房间

```
Factory.define :reservation do |f|
  f.association :user
  f.rooms { |a| [a.association(:room)] }
  f.arrival Time.now + 2.weeks
  f.nights  2
  f.phone "555-123-1234"
  f.credit_card :valid_credit_card
end

Factory.define :valid_credit_card, :class => ActiveMerchant::Billing::CreditCard do |f|
  expiration_date = Time.zone.now + 1.year  
  f.type "visa"
  f.number "4111111111111111"
  f.verification_value "333"
  f.month expiration_date.strftime("%m")
  f.year expiration_date.strftime("%y")
  f.first_name "Bob"
  f.last_name "Smith"
end 
```

还有spec/models/reservation_spec.rb。使用 @credit_card Factory.build 会导致有关“保存”credit_card 的错误。

如果我删除 f.credit_card :valid_credit_card 行，`:month` 即使在 .credit_card`:month`中列出，我也会得到 NoMethodError `attr_accessor`。在应用程序中创建预订确实有效。

```
 1) Reservation should have a valid factory
     Failure/Error: @current_reservation = Factory.create(:reservation)
     NoMethodError:
       undefined method `month' for nil:NilClass

describe Reservation do
  before :each do
    @smith = Factory.create(:user)
    @room = Factory.create(:room)
    #@credit_card = Factory.build(:valid_credit_card) 
  end
  it "should have a valid factory" do
    @current_reservation = Factory.create(:reservation)
    @current_reservation.should be_valid
  end
end 
```

我忽略了什么/做错了什么......？

预订模型摘录

```
class Reservation < ActiveRecord::Base
  # relationships
  belongs_to :user
  has_many :reservation_sets, 
       :dependent => :destroy
  has_many :rooms, 
           :through => :reservation_sets
  has_many :transactions,
           :class_name => 'ReservationTransaction',
           :dependent => :destroy

  attr_accessor :card_number, :card_verification, :card_expires_on, :card_type, :ip_address, :rtype, :month, :year
  # other standard validations
  validate :validate_card, :on => :create

  # other reservation methods...
  # gets paid upon reservation creation
  def pay_deposit
    # Generate active merchant object

    ReservationTransaction.gateway = 
      ActiveMerchant::Billing::AuthorizeNetGateway.new({
        :login => rooms[0].user.gateway_login,
        :password => rooms[0].user.gateway_password
      }) 

    response = ReservationTransaction.gateway.purchase(deposit_price_in_cents, credit_card, purchase_options)
    t = transactions.create!(:action => "purchase", :amount => deposit_price_in_cents, :response => response)
    if response.success?
      update_attribute(:reserved_at, Time.now)
      # update state
      payment_captured!
    else
      transaction_declined!
      errors.add :base, response.message
    end
    t.card_number = credit_card.display_number
    t.save!
    response.success?
  end

  def validate_card
    unless credit_card.valid?
      credit_card.errors.full_messages.each do |message|
        errors.add :base, message #_to_base message
      end
    end
  end

  def credit_card
    @credit_card ||= ActiveMerchant::Billing::CreditCard.new(
      :type               => card_type,
      :number             => card_number,
      :verification_value => card_verification,
      :month              => card_expires_on.month,
      :year               => card_expires_on.year,
      :first_name         => first_name,
      :last_name          => last_name
    )
  end 
```

以及来自预订控制器的创建操作

```
 def create
    @reservation = Reservation.new(params[:reservation])
    @reservation.arrival = session[:arrival]
    @reservation.nights = session[:nights]
    @reservation.number_kids = session[:number_kids]
    @reservation.number_adults = session[:number_adults]
    session[:creating_reservation] = 1
    @reservation.user_id = @reservation.rooms[0].user_id
    session[:owner] = @reservation.user_id
    @rooms = Room.all
    @reservation.ip_address = request.remote_ip         

    # get room owner...
    @owner = User.find(@reservation.user_id) 
    respond_to do |format|
      if @reservation.save
        if @reservation.pay_deposit
          #set cc...
          @reservation.transactions[0].card_number = @reservation.send(:credit_card).display_number
          ReservationMailer.reservation_created(@reservation).deliver
          ReservationMailer.reservation_notice(@reservation).deliver
          session[:arrival] = nil
          session[:reservation_id] = @reservation.id
          if @owner 
            thanks_path = "#{@owner.permalink}/reservations/#{@reservation.id}" 
          else
            thanks_path = @reservation
          end
          format.html { redirect_to @reservation, :notice => 'Reservation was successfully created.' }
          format.json { render :json => @reservation, :status => :created, :location => @reservation }
          # also trigger email sending or wherever that is 
          # receipt email and order notification
          # 
        else
           # set flash or show message problem w/ transaction 

           format.html { render :action => "new" }
        end
      else
        format.html { render :action => "new" }
        format.json { render :json => @reservation.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:38:58.823

看起来您正在尝试分配`credit_card`一个值，但您并没有真正的[类访问器](http://www.java2s.com/Code/Ruby/Class/Accessors.htm)。所以你试图打电话的地方`f.credit_card :valid_credit_card`是行不通的。

我会`f.credit_card :valid_credit_card`从您的工厂中删除并研​​究使用[rspec stubs](http://rubydoc.info/gems/rspec-mocks/frames)，然后您可以在您的 rspec 测试中执行以下操作：

```
mock_cc = ActiveMerchant::Billing::CreditCard.new(
      :type               => card_type,
      :number             => card_number,
      :verification_value => card_verification,
      :month              => card_expires_on.month,
      :year               => card_expires_on.year,
      :first_name         => first_name,
      :last_name          => last_name
    )

Reservation.stub(:credit_card).and_return(mock_cc) 
```

这样当您的模型调用`credit_card`它时，它会返回一个模拟对象。