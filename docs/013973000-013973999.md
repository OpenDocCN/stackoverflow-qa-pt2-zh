# StackOverflow 问答 13973000-13973999

# c# - 如何使用 C# 使用 PPK 文件连接到 SFTP 服务器

> ID：13973008
> 
> 赞同：1
> 
> 时间：2012-12-20T13:14:50.377
> 
> 标签：c#, .net, c#-4.0, sftp

我之前实现了一个连接到 FTP 服务器并下载/上传文件的应用程序。这次我需要创建相同类型的应用程序，但我遇到了问题。我不知道如何使用 PPK（私钥）文件连接到服务器。

应用规格：

*   **使用 SFTP 和 PPK 连接到服务器**（不知道如何执行此操作。）。

*   **从服务器下载文件并在本地写入**（这部分我知道怎么做）。

如果您需要更多信息，您可以将它们写在评论中。

先谢谢了。

# templates - 使用 Scala Play 在模板上进行复杂模式匹配

> ID：13973009
> 
> 赞同：2
> 
> 时间：2012-12-20T13:14:55.703
> 
> 标签：templates, scala, view, playframework-2.0, matching

我正在尝试使用 Scala Play 框架 2 迭代模板内的复杂值。

我的变量如下：`tests: List[(String,Option[List[String]])]`

我像这样迭代它：

```
@if(!tests.isEmpty) {
<h3>Tests results</h3>
@tests.map(t => {

<h4>@t._1</h4>

@t._2 match {
case None => {
<p>
  <span>
    [WARNING] Test failed
  </span>
</p>
}
case Some(res) {
@res.map(r => {
<p>
  <span>
    @r
  </span>
</p>
})}
}

})} 
```

但我收到以下错误：`expected start of definition`on `@t._2 match {`.

我猜这个问题来自我在地图中使用元组的事实。但为什么？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:23:06.120

问题在于您使用花括号和括号的方式`map`。括号内的所有内容都将被视为 scala 代码。您将无法使用 html 并按`@`预期使用它。在花括号内，您可以使用所需的`@`方式。

例如，这不会编译并会引发`expected start of definition`：

```
@(tests: List[(String,Option[List[String]])])

<h3>Tests results</h3>

@tests.map( t => {  
  <h4>@t._1</h4>
  @t._2
}) 
```

另一方面，这将按照预期的方式编译和工作：

```
@(tests: List[(String,Option[List[String]])])

<h3>Tests results</h3>

@tests.map{ t =>   
  <h4>@t._1</h4>
  @t._2
} 
```

我在模板解析 scala 代码的方式上遇到了问题。我不完全确定他们是否按照 scala 编译器解析 scala 代码的方式解析它。我之前读过，有一些限制。我稍后会向您展示一个。如果您切换花括号，您的解决方案可以编译并正常工作。你最终会得到类似的东西：

```
@(tests: List[(String,Option[List[String]])])

<h3>Tests results</h3>

@tests.map{  t =>  
<h4>@t._1</h4>

@defining(t._2) { optLst => 
  @optLst match {
    case None => {
        <p>
          <span>
            [WARNING] Test failed
          </span>
        </p>
    }
    case Some(res) => {
        @res.map{r => 
        <p>
          <span>
            @r
          </span>
        </p>
        }
    }
  }
}

} 
```

这不是最惯用的方法。我可能会在那里使用地图而不是模式匹配。但是使用适合你的东西。这里的重点是`@defining`那里。你注意到了吗？如果您尝试直接与 t._2 匹配，则会出现`')' expected but 'case' found.`异常。对我来说有什么奇怪的。而且我之前发现过，并且我在谷歌上搜索了很多，发现这是当前引擎中的一个问题，你必须定义值，然后按照你想要的方式匹配它。

干杯!

# javascript - 是否可以从地址栏中使用注入 $.post() ？

> ID：13973010
> 
> 赞同：0
> 
> 时间：2012-12-20T13:14:59.550
> 
> 标签：javascript, post, code-injection, address-bar

我有一个 javascript，在其中我使用 $.post() 命令将变量发布到 php 文件，我将 php 文件的 URL 硬编码在同一个 .js 文件中。

我只想知道是否有人可以从地址栏中注入 $.post() 命令并将无效数据发送到 PHP 文件？

如果是，如何防止或如何检测这些无效数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:17:29.877

是的，任何知道如何用 JavaScript 编码的人都可以向您的 PHP 文件发送 AJAX POST 请求。

至于如何检测无效数据，这完全取决于*使*数据无效的原因。您只需根据您期望有效数据满足的任何标准检查 POST 值，然后忽略任何不符合这些标准的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:18:31.317

是的，这很简单。攻击者可以修改、添加或删除浏览器中运行的任何 JavaScript，修改 DOM 等。Firebug 等工具允许任何人从控制台调用任意 JavaScript。此外，您可以简单地使用它`curl`来运行您的服务器并发送任意数据。

> 如果是，如何防止或如何检测这些无效数据？

您必须确保服务器端的数据有效性和完整性。此外，您可能希望在服务器端添加一些安全性，而不是依赖于“隐藏”的某些 JavaScript 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:21:13.257

当然，通过在脚本前面加上`javascript:`方案，您几乎可以对站点执行任何操作：

```
javascript:$.post(/* stuff here */) 
```

您应该始终在服务器端验证您的传入数据，因为不仅有人可能使用您网站上的 javascript 来执行此操作，而且他们可能使用其他工具，例如 curl 或其他任何可以让您发出 http 请求的工具。

# algorithm - 将一组唯一数字转换为范围（0 到 25）内的另一组唯一数字

> ID：13973016
> 
> 赞同：-3
> 
> 时间：2012-12-20T13:15:11.333
> 
> 标签：algorithm, math, numbers, scaling, sampling

假设我有一组唯一数字 [5, 123, 49176, 30982, 542] 现在我想转换数字并获得另一组唯一数字（整数），范围在 0 到 25 之间

任何人都可以建议任何可以帮助我解决这个问题的算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:21:02.470

你要把它们标准化吗？

```
raw =  [5, 123, 49176, 30982, 542] 

normalization = [(i-min(raw))/(max(raw)-min(raw))*25 for i in raw]
print(normalization) 
```

它会给你：（所有元素都保证是唯一的）

```
[0.0, 0.059994712330438675, 25.0, 15.749628846271177, 0.2730267840800472] 
```

* * *

如果 result 的元素被限制为整数：

```
import random
raw =  [5, 1, 23, 49176, 30982, 542] 

if len(raw) > 26: #there's no way to get more than 26 unique elements from 0~25 integers 
    print("mission impossible")
else:
    print(random.sample(range(26), len(raw))) 
```

它会给你（例如）：

```
[23, 4, 13, 10, 18, 24] 
```

* * *

这对你来说是两种妥协的方式。但是根据您的评论，您实际上需要一个单**射函数，其域都是整数，而余域是 [0,25] 中的整数**。不幸的是，这是一项不可能完成的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:16:18.917

（假设整数）

您可以**对元素进行排序，并为每个元素指定其索引**（在排序列表中）。假设您的数字少于（或正好）26 个，您将获得所需的范围。如果您可以通过仅将数字设置为集合的当前顺序（例如迭代顺序）来允许同一集合的不确定结果，您也可以避免排序。

请注意，如果您想要一些一般大小写哈希，则无法完成 - 如果您的*范围*大于 26 - 您将有重复。这直接来自[鸽笼原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)，其中范围是鸽子，范围 [0,25] 是鸽笼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:19:08.590

将每个数字用作随机函数的种子，然后检查并确保没有任何重复项。
如果你有一个大于 25 的集合，这也会崩溃，就像 Amit 说的那样。

# php - 保存的CC在magento中不起作用

> ID：13973017
> 
> 赞同：0
> 
> 时间：2012-12-20T13:15:12.327
> 
> 标签：php, javascript, magento

我保存的信用卡付款选项在默认的 magento 主题中运行良好，但在自定义主题中不起作用。当我们单击“信用卡（已保存）”选项时，没有任何反应。没有文本框或下拉菜单显示输入卡详细信息的选项。

当我们单击继续下一步时，验证错误照常弹出。

我认为有些地方 javascript 正在崩溃。但是错误控制台也没有显示错误！谁能指出这个错误的可能原因是什么？需要什么 js 才能使已保存的信用卡选项起作用？

我在 jquery-mobile 主题中收到此错误，并且我的标题具有以下参数..

```
<script type="text/javascript" src="js/prototype/prototype.js"></script>
<script type="text/javascript" src="js/lib/ccard.js"></script>
<script type="text/javascript" src="js/prototype/validation.js"></script>
<script type="text/javascript" src="js/scriptaculous/builder.js"></script>
<script type="text/javascript" src="js/scriptaculous/effects.js"></script>
<script type="text/javascript" src="js/scriptaculous/dragdrop.js"></script>
<script type="text/javascript" src="js/scriptaculous/controls.js"></script>
<script type="text/javascript" src="js/scriptaculous/slider.js"></script>
<script type="text/javascript" src="js/varien/js.js"></script>
<script type="text/javascript" src="js/varien/form.js"></script>
<script type="text/javascript" src="js/varien/menu.js"></script>
<script type="text/javascript" src="js/varien/payment.js"></script>
<script type="text/javascript" src="js/varien/product.js"></script>
<script type="text/javascript" src="js/mage/translate.js"></script>
<script type="text/javascript" src="js/mage/cookies.js"></script>
<script type="text/javascript" src="js/mage/directpost.js"></script>
<script type="text/javascript" src="js/mage/captcha.js"></script>
<script type="text/javascript" src="js/mage/centinel.js"></script>
<script type="text/javascript" src="js/varien/weee.js"></script>
<link rel="stylesheet" type="text/css" href="skin/frontend/mytheme/default/jquery.mobile-1.0b3.min.css" media="all" />
<script type="text/javascript" src="skin/frontend/mytheme/default/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="skin/frontend/mytheme/default/main.js"></script>
<script type="text/javascript" src="skin/frontend/mytheme/default/jquery.mobile-1.0b3.min.js"></script>
<script type="text/javascript" src="skin/frontend/mytheme/default/additional.js"></script>
<link rel="stylesheet" type="text/css" href="skin/frontend/mytheme/default/mobilephone.css" media="all" />
<link rel="stylesheet" type="text/css" href="skin/frontend/mytheme/default/mobiletheme.css" media="all" /> 
```

这里additional.js 是`Jquery.noConflict();`文件。

我错过了什么吗？

如果有人能指出什么，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:22:20.087

我发现了为什么会发生。

页面中缺少 jquery 样式。所以我在 checkout/onepage/payment/methods.phtml 中给出了一个创建事件`jQuery('#co-payment-form').trigger("create");`，它与信用卡的 javascript 冲突。

当我删除创建事件时。代码运行良好但是仍然缺少 Jquery-mobile 样式。我也需要样式。

如果有人知道如何克服这种情况，请分享。

# kinect - Kinect + Windows + OpenNI +OpenCV（手指检测）

> ID：13973018
> 
> 赞同：1
> 
> 时间：2012-12-20T13:15:16.057
> 
> 标签：kinect, kinect-sdk, ofxkinect

我有一个关于 Kinect 的问题。我正在尝试从[这里](http://www.youtube.com/watch?v=lCuItHQEgEQ&feature=player_embedded#)运行代码！，代码在视频下，第二个使用 OpenNI。

问题是我有 Windows 和 OpenNI，而这段代码在 Linux 上运行。我无法将其转换为 Windows。你知道如何？或者如果Windows上有另一个用于手指检测的代码？

当我运行它时，我会收到以下错误：

> (unsigned int 没有变量声明为 =) unsigned short near = depth - 100; // 剪裁平面附近

注意我尝试为 Windows 运行第一个代码，但它需要我没有安装的 CL NUI，因为我更喜欢 OpenNI。

# grails - 如何减少 Grails 中 PermGen 空间的使用

> ID：13973019
> 
> 赞同：2
> 
> 时间：2012-12-20T13:15:18.693
> 
> 标签：grails, memory-management, groovy, spring-security, grails-plugin

在我的 Grails 应用程序中使用 Spring Security Core 插件进行身份验证。我面临一个严重的问题，因为我的应用程序在安装后花了 21 秒来提升 Tomcat 的 43/2。

到目前为止一切顺利，但Tomcat服务器开始出现错误'PermGen Error'内存错误。在它是 64 之前，八月是 256，因此该错误不会经常使我的应用程序崩溃。

我想知道您是否知道一些插件配置以减少此错误的发生率或某些方法来影响此缓存的释放，因为用户数量正在增加，如果您无法解决它很遗憾不得不离开插件我似乎是应用安全的绝佳选择。

有人可以告诉我应用程序干扰中使用的插件数量是否具有此内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T06:46:48.507

PermGen 是内存的一部分，用于存储应用程序的静态组件，主要是类。从字面上看，它不会受到用户数量或与用户活动相关的日志的影响，而是会消耗堆空间。

为了减少 PermGen 存储，您必须检查您的代码，重新设计那些包含不必要/冗余对象和操作的算法，并在可能的情况下合并变量和函数。一般来说，简化的代码会产生更小的可执行文件。这就是您保存 PermGen 空间的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:42:13.950

某些版本的 Tomcat permgen 比其他版本更多。在第 6 行中有一个次要版本，我不能每个人都能可靠地保持运行。即使使用最新版本，您仍然需要调整内存设置。我使用以下内容，它最适合我。我仍然时不时地得到它们，特别是如果我正在进行大量运行时编译。在生产中，这不是问题，因为 grails 的所有开发开销都不存在。

> -XX:MaxPermSize=512m -XX:PermSize=512m -Xms256m -Xmx1024m

# php - php include for images 将图像解析为 php 代码并给出语法错误

> ID：13973020
> 
> 赞同：1
> 
> 时间：2012-12-20T13:15:19.940
> 
> 标签：php, image, parsing, web, gd

我创建了一个脚本来调整图像大小并在`<img>`标签中动态插入，例如：

```
<img src="includes/thumb.php?src=<?=$filename;?>&w=389&q=100&f=jpg" /> 
```

在 thumb.php 中，我使用 php gd 函数调整图像大小，最后`include`它显示调整大小的图像，其中 thumb.php 在内部`<img>`标记中被调用。

这就是我包含来自 thumb.php 的图像的方式：

```
//header('Content-Type: image/' . $format);
//header('Content-Disposition: inline;');
include $resized_image; // which is now resized and saved 
```

但是它并不总是适用于所有图像，有时我会收到以下消息：

```
Parse error: syntax error, unexpected ']' in xxxxx\thumbs\
e58b3c96d4f2ccc298d68cbac7cd97a0.jpg on line 326 
```

因此可以看出，当我尝试解析错误时，解析错误出现在新调整大小的图像中`include`。但是当我通过双击直接打开图像时，它显示得很好并且是一个有效的图像。

谁能告诉我为什么 PHP 像 php 代码一样解析图像文件，我想避免这种情况并改为显示图像？

我想要做的只是显示调整大小的图像，如下所示：

```
<img src="includes/thumb.php?src=<?=$filename;?>&w=389&q=100&f=jpg" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:17:35.267

要将文件发送到您需要使用的浏览器`readfile($resized_image)`，因为`include $resized_image`会尝试将文件解析为 PHP 脚本，这实际上是相当危险的！

也可以看看：[`readfile()`](http://www.php.net/readfile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:17:50.893

改为使用`readfile()`。`include`是错误的工具，也可能导致安全问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:29:06.750

用 php 将图像发送到浏览器我想：

```
header("Content-Type: image/jpeg");
try
{
    $image = fopen('imagepath', "rb");
}
catch (Exception $e)
{
    //foobar
}
fpassthru($image);
fclose($image);
exit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:19:34.697

我认为它应该更像 -> echo $resized_image; 在 thumb.php

# java - 骆驼拆分xml保留一些节点

> ID：13973028
> 
> 赞同：2
> 
> 时间：2012-12-20T13:15:36.180
> 
> 标签：java, apache, apache-camel, splitter

我有：

```
<Message>
    <Header>
    .....some more nodes.....
    </Header>

    <Element>
   .....some more nodes.....
    </Element>

    <Element>
   .....some more nodes.....
    </Element>
   .....more Element nodes......
</Message> 
```

我想按节点元素拆分，但保留消息的其余部分（标题）包含在每条消息中。例如使用这个 xml 我想得到另外 2 个，它看起来像：

```
<Message>  <!--root node is alive -->
    <Header> <!--header included in every message -->
    .....some more nodes.....
    </Header>

    <Element> <!--only one -->
   .....some more nodes.....
    </Element>
</Message> 
```

使用拆分器我只能得到：

```
 <Element>
   .....some more nodes.....
    </Element> 
```

我试图使用 jaxb marshaler 来迭代 Element 节点，但由于缺少 @XmlRootElement 注释，无法将类型“java.lang.String”编组为元素，因此这个想法失败了

另外，我试图使用

```
.split(xpath("//Element"), new MyAgreggatorStrategy()) 
```

希望我可以自己处理消息，但是每次收到的 oldMessage 都为空。

你能分享你的想法吗。

如果我将“in”消息存储为某个属性，然后进行拆分，然后通过自定义处理器将构建我需要的所有内容，该怎么办？我希望，骆驼有更好的解决方案。谢谢

更新。现在我已经实现了这个功能，就像我之前问的那样。（将 header 存储为属性，进行拆分，恢复消息：like concatenation " + header + transformationBody +

但我必须用我的附加处理器（在拆分之前和之后）包装我的所有路线。仍然认为我的问题应该是典型和普遍的，认为我错过了一些东西。

更新2。用 1 个 splitter bean 替换了 2 个处理器

```
public String[] splitBody(Exchange exchange) {
    String header = XPathBuilder.xpath("//Header").evaluate(exchange, String.class);
    String element = XPathBuilder.xpath("//Element").evaluate(exchange, String.class);

    String[] arr = element.split("</Element>");
    for (int i = 0; i < arr.length; i++) {
        arr[i] = "<Message>" + header + arr[i] + "</Message>";
    }
    return arr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-07T01:37:28.130

简单的方法是使用 xslt 转换您的 xml，然后可以使用带有 tokenizeXML 的骆驼拆分，例如 .to("xslt:").split().tokenizeXML("Message")

适用于您的情况的 XSL：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" indent="yes" />
    <xsl:template match="/">
        <Messages>
            <xsl:call-template name="Message" />
        </Messages>
    </xsl:template>
    <xsl:template name="Message" match="/Message">
        <xsl:for-each select="/Message/Element">
            <Message>
                <xsl:copy-of select="/Message/Header"></xsl:copy-of>
                <xsl:copy-of select="."></xsl:copy-of>
            </Message>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:46:29.290

您只需将属性添加到将链接到您的标题映射的交换。此属性将在拆分器内可用。像这样的东西：

```
 <setProperty propertyName="parentHeaders">
            <simple>${headers}</simple>
        </setProperty> 
```

在拆分器内部，您可以通过键“parentHeaders”引用标题。

希望对你有帮助

# android - 如何更改定义的设备屏幕尺寸？

> ID：13973029
> 
> 赞同：0
> 
> 时间：2012-12-20T13:15:36.513
> 
> 标签：android

我有一个带有 7 英寸显示屏的无名 Android 选项卡，但在固件中它被定义为 9 英寸，因此 dpi 计算不正确。如果我有 root，如何将定义的显示尺寸更改为正确的 7 英寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:20:37.740

编辑您的 build.prop 文件：

```
ro.sf.lcd_density = $desired_value 
```

请参阅[http://www.freeyourandroid.com/guide/how-to-edit-build-prop](http://www.freeyourandroid.com/guide/how-to-edit-build-prop)以了解如何使用文件管理器执行此操作。

# java - 进行 JNI 调用的定量开销是多少？

> ID：13973035
> 
> 赞同：63
> 
> 时间：2012-12-20T13:15:57.850
> 
> 标签：java, performance, java-native-interface

仅基于性能，大约有多少“简单”的 java 行相当于进行 JNI 调用的性能损失？

或者尝试用更具体的方式表达这个问题，如果一个简单的java操作比如

```
someIntVar1 = someIntVar2 + someIntVar3; 
```

给定一个“CPU 工作”指数`1`，那么进行 JNI 调用的开销的典型（大致）“CPU 工作”指数是多少？

这个问题忽略了等待本机代码执行所花费的时间。在电话用语中，它是严格关于通话的“降旗”部分，而不是“通话率”。

问这个问题的原因是当您知道本机成本（来自直接测试）和给定操作的 java 成本时，有一个“经验法则”来知道何时尝试编写 JNI 调用。它可以帮助您快速避免编码 JNI 调用的麻烦，结果发现调用开销消耗了使用本机代码的任何好处。

### 编辑：

有些人对 CPU、RAM 等方面的变化感到困惑。这些几乎都与问题无关——我问的是 java 代码行的*相对*成本。如果 CPU 和 RAM 很差，那么它们对于 java 和 JNI 来说都很差，所以环境因素应该平衡。JVM 版本也属于“无关”类别。

这个问题不是要求以纳秒为单位的绝对时间，而是要求以“简单的 Java 代码行”为单位的球场“工作量”。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-20T18:02:29.040

快速探查器测试产生：

*Java类：*

```
public class Main {
    private static native int zero();

    private static int testNative() {
        return Main.zero();
    }

    private static int test() {
        return 0;
    }

    public static void main(String[] args) {
        testNative();
        test();
    }

    static {
         System.loadLibrary("foo");
    }
} 
```

*C 库：*

```
#include <jni.h>
#include "Main.h"

JNIEXPORT int JNICALL 
Java_Main_zero(JNIEnv *env, jobject obj)
{
    return 0;
} 
```

*结果：*

![单次调用](../Images/dd1b9f0340a25b3490cc3f07b9c07266.png) ![循环调用 10 次](../Images/1d63ff497613ed0ef4457c2593dacf09.png) ![循环调用 100 次](../Images/880b414775e58098663b50f28fb103ff.png)

*系统详情：*

```
java version "1.7.0_09"
OpenJDK Runtime Environment (IcedTea7 2.3.3) (7u9-2.3.3-1)
OpenJDK Server VM (build 23.2-b09, mixed mode)
Linux visor 3.2.0-4-686-pae #1 SMP Debian 3.2.32-1 i686 GNU/Linux 
```

* * *

**更新：***x86*（32/64 位）和*ARMv6*的Caliper 微基准测试如下：

*Java类：*

```
public class Main extends SimpleBenchmark {
    private static native int zero();
    private Random random;
    private int[] primes;

    public int timeJniCall(int reps) {
        int r = 0;
        for (int i = 0; i < reps; i++) r += Main.zero();
        return r;
    }

    public int timeAddIntOperation(int reps) {
        int p = primes[random.nextInt(1) + 54];   // >= 257
        for (int i = 0; i < reps; i++) p += i;
        return p;
    }

    public long timeAddLongOperation(int reps) {
        long p = primes[random.nextInt(3) + 54];  // >= 257
        long inc = primes[random.nextInt(3) + 4]; // >= 11
        for (int i = 0; i < reps; i++) p += inc;
        return p;
    }

    @Override
    protected void setUp() throws Exception {
        random = new Random();
        primes = getPrimes(1000);
    }

    public static void main(String[] args) {
        Runner.main(Main.class, args);        
    }

    public static int[] getPrimes(int limit) {
        // returns array of primes under $limit, off-topic here
    }

    static {
        System.loadLibrary("foo");
    }
} 
```

*结果（x86/i7500/热点/Linux）：*

```
Scenario{benchmark=JniCall} 11.34 ns; σ=0.02 ns @ 3 trials
Scenario{benchmark=AddIntOperation} 0.47 ns; σ=0.02 ns @ 10 trials
Scenario{benchmark=AddLongOperation} 0.92 ns; σ=0.02 ns @ 10 trials

       benchmark     ns linear runtime
         JniCall 11.335 ==============================
 AddIntOperation  0.466 =
AddLongOperation  0.921 == 
```

*结果（amd64/phenom 960T/Hostspot/Linux）：*

```
Scenario{benchmark=JniCall} 6.66 ns; σ=0.22 ns @ 10 trials
Scenario{benchmark=AddIntOperation} 0.29 ns; σ=0.00 ns @ 3 trials
Scenario{benchmark=AddLongOperation} 0.26 ns; σ=0.00 ns @ 3 trials

   benchmark    ns linear runtime
         JniCall 6.657 ==============================
 AddIntOperation 0.291 =
AddLongOperation 0.259 = 
```

*结果（armv6/BCM2708/Zero/Linux）：*

```
Scenario{benchmark=JniCall} 678.59 ns; σ=1.44 ns @ 3 trials
Scenario{benchmark=AddIntOperation} 183.46 ns; σ=0.54 ns @ 3 trials
Scenario{benchmark=AddLongOperation} 199.36 ns; σ=0.65 ns @ 3 trials

   benchmark  ns linear runtime
         JniCall 679 ==============================
 AddIntOperation 183 ========
AddLongOperation 199 ======== 
```

* * *

总结一下，似乎*JNI*调用大致相当于典型（*x86*）硬件和*Hotspot VM*上的 10-25 个 java 操作。毫不奇怪，在优化程度较低的*Zero VM*下，结果大不相同（3-4 次操作）。

* * *

感谢@Giovanni [Azua](https://stackoverflow.com/users/1142881/giovanni-azua)和[@Marko Topolnik](https://stackoverflow.com/users/1103872/marko-topolnik)的参与和提示。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-21T20:42:20.113

因此，我刚刚使用带有 Profile Startup 附加组件的 Eclipse Mars IDE、JDK 1.8.0_74 和 VirtualVM profiler 1.3.8 在 Windows 8.1、64 位上测试了对 C 的 JNI 调用的“延迟”。

设置：（两种方法）
SOMETHING() 传递参数、执行操作并返回参数
NOTHING() 传入相同的参数，不对其执行任何操作，并返回相同的参数。

（每个被调用 270 次）
SOMETHING()的总运行时间： **6523**
毫秒 NOTHING() 的总运行时间：**0.102 毫秒**

因此，在我的情况下，JNI 调用可以忽略不计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T13:25:07.790

您实际上应该自己测试一下“延迟”是什么。延迟在工程中被定义为发送零长度消息所需的时间。在这种情况下，它对应于编写最小的 Java 程序，该程序调用一个`do_nothing`空的 C++ 函数并计算超过 30 次测量的经过时间的平均值和标准差（做几个额外的预热调用）。对于不同的 JDK 版本和平台，您可能会惊讶于不同的平均结果。

只有这样做才能为您提供使用 JNI 是否对您的目标环境有意义的最终答案。

# ios - 当我将条形码阅读器放在实时物体上时，条形码阅读器未检测到

> ID：13973043
> 
> 赞同：1
> 
> 时间：2012-12-20T13:16:30.430
> 
> 标签：ios, xcode, zbar-sdk

我正在使用此代码来检测条形码。代码是

```
- (IBAction) scanButtonTapped
{
    NSLog(@"TBD: scan barcode here...");
// ADD: present a barcode reader that scans from the camera feed
    ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;
    reader.supportedOrientationsMask = ZBarOrientationMaskAll;

    ZBarImageScanner *scanner = reader.scanner;
    // TODO: (optional) additional reader configuration here

    // EXAMPLE: disable rarely used I2/5 to improve performance
    [scanner setSymbology: ZBAR_I25
                   config: ZBAR_CFG_ENABLE
                       to: 0];

    // present and release the controller
    [self presentModalViewController: reader
                            animated: YES];
    [reader release];
}

- (void) imagePickerController: (UIImagePickerController*) reader
 didFinishPickingMediaWithInfo: (NSDictionary*) info
{
    // ADD: get the decode results
    id<NSFastEnumeration> results =
    [info objectForKey: ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;
    for(symbol in results)
        // EXAMPLE: just grab the first barcode
        break;

    // EXAMPLE: do something useful with the barcode data
    resultText.text = symbol.data;

    // EXAMPLE: do something useful with the barcode image
    resultImage.image =
    [info objectForKey: UIImagePickerControllerOriginalImage];

    // ADD: dismiss the controller (NB dismiss from the *reader*!)

    [reader dismissViewControllerAnimated:YES completion:nil];
} 
```

它在这些[链接](http://www.google.co.in/search?q=barcode%20image&hl=en&client=safari&tbo=u&rls=en&tbm=isch&source=univ&sa=X&ei=VgXTUJqJF43IrQeny4DIDA&ved=0CDIQsAQ&biw=1362&bih=578)上工作正常，但如果我将我的 ipod touch 摄像头放在诸如放置数据包、iPhone 保护壳之类的真实条形码上......它不会检测到。请告诉我如何解决这个问题。在此先感谢。任何想法，将不胜感激 。如果我的问题不清楚，请告诉我。

# puppet - Puppet 的 Ruby DSL 执行在哪里发生？

> ID：13973049
> 
> 赞同：1
> 
> 时间：2012-12-20T13:16:49.880
> 
> 标签：puppet

Puppet 中的 Ruby DSL 在 puppet master 或客户端上执行？

我问这个是因为据我了解，当在普通 Puppet DSL 中使用模板时，模板是在 master 上评估的。**在 Ruby DSL 中**是否相同？

# iphone - 从 Iphone SDK 中的字符串中删除最后一个“/”

> ID：13973056
> 
> 赞同：1
> 
> 时间：2012-12-20T13:17:17.780
> 
> 标签：iphone, objective-c, ios, xcode, nsstring

我有一个像这样的字符串：

**http://feedproxy.google.com/~r/MakePartsFast/~3/1dZEOLADapg/**

我想用这个字符串来加载 html 页面。但是因为最后在字符串中的“/”，我得到的 URL 是空的。

我的代码如下：

```
NSURL *ur=[NSURL URLWithString:Mystring];
        NSLog(@"%@",ur); //getting null value

    NSURLRequest *requestObj = [NSURLRequest requestWithURL:ur];

        NSLog(@"%@",requestObj); 
```

那么，**如何从字符串中删除最后一个“/”？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T13:19:47.410

你确定是因为最后一个`'/'`？会不会是因为`'~'`中间的人物？

无论哪种方式，要检查最后一个字符，只需执行

```
unichar last = [urlString characterAtIndex:urlString.length - 1];
if (last == '/')
    urlString = [urlString substringToIndex:urlString.length - 1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T13:29:12.963

试试这个代码...

```
 NSString *Mystring = @"http://feedproxy.google.com/~r/MakePartsFast/~3/1dZEOLADapg/";
    if ([Mystring isEqualToString:@""]||[Mystring isEqual:nil]) {

        NSLog(@"\n\n String is NULL");
    }
    else {
        NSString *TempURl = [Mystring substringToIndex:[Mystring length]-1];

        NSString *urlstr =[TempURl stringByReplacingOccurrencesOfString:@" " withString:@""];
        urlstr =[urlstr stringByReplacingOccurrencesOfString:@"\n" withString:@""];

        urlstr =[urlstr stringByReplacingOccurrencesOfString:@"\t" withString:@""];
        [urlstr retain];

        NSURL *ur=[NSURL URLWithString:urlstr];
        NSLog(@"%@",ur); //now get string value here

        //        NSURLRequest *requestObj = [NSURLRequest requestWithURL:ur];
        //        
        //        NSLog(@"%@",requestObj);
    } 
```

我得到了 Log OutPut：**http ://feedproxy.google.com/~r/MakePartsFast/~3/1dZEOLADapg**

希望这可以帮助你...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:21:01.057

我认为您需要对字符串进行编码，例如：

```
NSString *encodedString = [Mystring stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T13:23:46.767

如果您确定在每种情况下都需要从字符串中删除最后一个字符，那么您可以获得一个 newString 作为

```
NSString *newString = [oldString substringToIndex:[oldString length]-1]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T13:21:56.580

试试这个可能对你有帮助

```
NSString * Mystring=@"http://feedproxy.google.com/~r/MakePartsFast/~3/1dZEOLADapg/";
[alfa substringToIndex:alfa.length-1]; 
```

# jquery - 如何确定从 RadListBox 中拖动了哪个 Telerik RadListBoxItem？

> ID：13973059
> 
> 赞同：1
> 
> 时间：2012-12-20T13:17:28.057
> 
> 标签：jquery, jquery-ui, telerik, radlistbox

我有一个telerik `radlistbox`，里面有几个列表项。它们每个都有自己的文本并且是可拖动的。我使用了 radlistbox`OnClientDropped`方法并想要获取`radlistboxitem`被删除的文本。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:51:44.883

了解如何做到这一点。经过考虑后，我决定采取一些不同的方法，但同样的基本解决方案也适用。您可以通过客户端方法中的事件参数获取源项目（您正在拖放的项目）。此时，您需要做的就是获取相关信息（在我的例子中，是被拖放的项目的文本）。

涉及的javascript：

```
function OnClientDragStartHandler(sender, e) {    
    var objType = e.get_sourceItem().get_text();
} 
```

谢谢

# c - 读取 Txt 文件语言 C

> ID：13973068
> 
> 赞同：0
> 
> 时间：2012-12-20T13:17:38.053
> 
> 标签：c, file, text

大家好，我有这个文件结构：

```
0
2 4
0: 1(ab) 5(b)
1: 2(b) 6(a)
2: 0(a) 2(b)
3: 2(a) 6(b)
4: 5(ab)
5: 2(a) 6(b)
6: 4(b) 6(ab) 
```

每行都将提供一个结构及其数据（数字+字母）。
阅读该行并获得我想要的字符串的最佳方法是什么？

例子：

```
0
2 4
0,1,ab,5,b
1,2,b,5,a
... 
```

这些线的大小可能会有所不同，因为我们可以有 1、2、3、.... 数字。

我已经做到了：

```
//struct 
#define MAX_ 20

struct otherstats{ //struct otherStats
  int conectstat[MAX_];//conection with others stats
  int transitions[MAX_];//Symbols betwen conection ASCI
}tableStats[MAX_];

struct sAutomate{
 int stat_initial; //initial
 int stats_finals[MAX_]; //final orfinals
 struct otherstats tableStats[MAX_]; //otherStats 0 1 2 3 4 5 6
};

/* eXample that what i want ..using the example 
sAutomate.stat_initial=0
sAutomate.stats_finals[0]=2
sAutomate.stats_finals[1]=4

Others Stats table
//0
sAutomate.tableStats[0].conectstat[0]=1;
sAutomate.tableStats[0].conectstat[1]=5;
sAutomate.tableStats[0].transitions[0]=ab;
sAutomate.tableStats[0].transitions[1]=b; 
//1
sAutomate.tableStats[1].conectstat[0]=2;
sAutomate.tableStats[1].conectstat[1]=6;
sAutomate.tableStats[1].transitions[0]=b;
sAutomate.tableStats[1].transitions[1]=a;
///etc
 */

void scanfile(){ //function to read the file

struct sAutomate st; //initialize st struct

char filename[] = "txe.txt";
FILE *file = fopen ( filename, "r" );
char buf[81];       
char parts[5][11];  

fscanf(file,"%d", &st.stat_initial);//read first line
printf("initial state : %d \n", st.stat_initial);
fscanf(file,"%d",&st.stats_finals);
fscanf(file,"%d",&st.stats_finals);

while (fgets(buf, sizeof(buf), stdin) != NULL)
{
if (sscanf(buf, "%10[^:]: (%10[^(], %10[^)]), (%10[^(], %10[^)])",
           parts[0], parts[1], parts[2], parts[3], parts[4]) == 5)
{
  printf("parts: %s, %s, %s, %s, %s\n",
         parts[0], parts[1], parts[2], parts[3], parts[4]);
}
else
{
  printf("Invalid input: %s", buf);
}
}
//fclose 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:31:08.657

我看到的第一个问题是你正在覆盖`stats_finals`：

```
fscanf(file,"%d",&st.stats_finals);
fscanf(file,"%d",&st.stats_finals); 
```

你想在这里做的是：

```
fscanf(file,"%d",&st.stats_finals[0]);
fscanf(file,"%d",&st.stats_finals[1]); 
```

从文本文件中保存“2”和“4”。

第二个主要问题是您正在阅读`stdin`：

```
while (fgets(buf, sizeof(buf), stdin) != NULL) 
```

那不会读取您的文本文件，而是从键盘读取输入...所以您希望它是：

```
while (fgets(buf, sizeof(buf), file) != NULL) 
```

第三个（次要）问题是`fscanf()`不会读取换行符，并且`fgets()`会。这意味着当您`stats_finals`在 while 循环中从第二次读取到第一次读取时，您的第一个输入将只是剩下的换行符。这没什么大不了的，因为您检查“无效输入”，但值得注意。

最后，您的 sscanf 在我看来是错误的：

```
sscanf(buf, "%10[^:]: (%10[^(], %10[^)]), (%10[^(], %10[^)])",
               ^                        ^
              That's a width of 10,     Why are you checking for commas? You didn't
              I don't think that's      have any in your text file
              what you wanted... 
```

我认为这更符合您的要求：

```
sscanf(buf, "%[0-9]: %[0-9](%[^)]) %[0-9](%[^)])",
                ^
             takes a digit (0 to 9) 
```

* * *

**编辑** 错过了你原来的观点。如果您不知道要阅读的字符串有多长，则不能使用`sscanf()`. 就是这么简单。:)

scanf 系列假设您知道要解析的对象数量以及格式字符串接受的数量。然而，还有其他选择。

在你做的时候用 fgets 读一行，然后你可以标记它。可以使用 C 函数`strtok`，也可以自己使用 for 循环。

然而，请注意：

由于您不知道它有多长，因此：这`char parts[5][11];`不是您最好的选择。这将您限制为 2 个条目......可能最好动态地执行此操作（读取该行然后分配正确的大小以存储您的令牌。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:52:35.087

如果您真的不知道该行将包含多少个数字和字母，为什么要读取固定数量的数字和字母？

您可以阅读整行，`fgets`然后使用类似[`strtok`](http://www.cplusplus.com/reference/cstring/strtok/)这样的标记器对其进行解析，如下所示：

```
const char* const DELIMITERS = " ";

int i;  // index for tableStats
char* token;

token = strtok(line, DELIMITERS);

// first integer
if (token == NULL || sscanf(token, "%d:", &i) < 1)
  // error

/* it seems like you should have at least one element in your "list",
 * otherwise this is not necessary
 */

token = strtok(NULL, DELIMITERS);

if (token == NULL || sscanf(token, "%d(%[^)])",
    &(tableStats[i].connectstat[0]),
    &(tableStats[i].transitions[0])) < 2)
  // error

// read optional part
for (int j = 1; (token = strtok(NULL, DELIMITERS)) != NULL; ++j)      
  if (sscanf(token, "%d(%[^)])", &(tableStats[i].connectstat[j]),
      &(tableStats[i].transitions[j])) < 3)
    break; 
```

请记住，`strtok`更改字符串，如果您仍然需要它，请复制它。

显然代码是针对任意长行的，阅读前两行是微不足道的。

# c++ - C++ 的优化技术

> ID：13973070
> 
> 赞同：27
> 
> 时间：2012-12-20T13:17:52.647
> 
> 标签：c++, algorithm, optimization

几天前，在 Facebook 的演讲中——[幻灯片](http://www.slideshare.net/andreialexandrescu1/three-optimization-tips-for-c-15708507#btnNext)、[视频](http://vimeo.com/55639112)，Andrei Alexandrescu 谈到了可能证明我们错了的常见直觉。对我来说，幻灯片 7 上出现了一个非常有趣的观点，他指出**“更少的指令 = 更快的代码”**的假设是不正确的，更多的指令不一定意味着更慢的代码。

我的问题来了：他的演讲（大约 6 分 20 秒）的音频质量不太好，我不太理解解释，但据我所知，他正在将退休指令与算法的最优性进行比较一个性能水平。

但是，据我了解，这是无法做到的，因为这是两个独立的结构级别。指令（尤其是实际停用的指令）是一项非常重要的衡量标准，基本上，它可以让您了解实现目标的性能。如果我们忽略一条指令的延迟，我们可以概括出更少的退役指令 = 更快的代码。当然，在某些情况下，即使在循环内执行复杂计算的算法也会产生更好的性能，因为它会更早地中断循环（想想图遍历）。但是，在复杂性级别上与算法进行比较，而不是说这个循环有更多指令并且比另一个更好，难道不是更有用吗？从我的角度来看，

有人可以帮助我了解他的示例将走向何方，以及如何（显着）更多退休指令导致更好的性能？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T13:27:35.267

质量确实很差，但我认为他导致了这样一个事实，即 CPU 对计算有好处，但在内存寻道（RAM 比 CPU 慢得多）和分支（因为 CPU 用作管道和分支）方面表现不佳可能导致管道破裂）。

以下是更多指令更快的一些情况：

1.  [**分支预测**](http://en.wikipedia.org/wiki/Branch_predictor)- 即使我们需要执行更多指令，但它会导致更好的分支预测，CPU 的管道将有更多时间充满，并且会“抛出”更少的操作，最终导致更好的性能. 例如，[这个线程显示了如何做同样的事情，但首先排序 - 提高性能。](https://stackoverflow.com/q/11227809/572670)

2.  [**CPU 缓存**](http://en.wikipedia.org/wiki/CPU_cache)- 如果您的代码对缓存进行了更多优化，并遵循[局部性原则](http://en.wikipedia.org/wiki/Principle_of_locality)- 它更有可能比没有的代码更快，即使代码没有执行一半的指令。[这个线程](https://stackoverflow.com/q/9888154/572670)给出了一个小缓存优化的例子——如果没有缓存优化，相同数量的指令可能会导致代码慢得多。

3.  *执行哪些*指令也很重要。有时 - 某些指令的执行速度可能比其他指令慢，例如 -**除法**可能比整数加法慢。

**注意**：以上所有内容都取决于机器，并且它们如何/是否实际改变性能可能因一种架构而异。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T13:36:10.613

指令数量本身并不是一个好的衡量标准。

更少的退役指令（因为没有更多的事情要做）=更快的代码。

更少的退役指令（因为它们必须等待依赖）= 更慢的代码。

有时，代码中的更多指令也意味着更多的退役指令，因为它们可能会用完在情况 2 中会被浪费的执行槽。

# diff - 我如何知道两个相似文件的行等价性？

> ID：13973073
> 
> 赞同：0
> 
> 时间：2012-12-20T13:17:57.007
> 
> 标签：diff, dynamic-programming, utility

当我在文件中间添加一行时，以下所有行的编号都会增加。

是否有一个实用程序可以生成两个文件之间的等效行号列表？

输出将类似于：

```
1 1
2 2
3 4 (line added)
4 5 
```

可以通过以类似于 diff 算法的方式使用动态编程来创建这样的实用程序。好像有用，还没做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:46:09.170

我发现使用 python 的 difflib 很容易做到：

```
import difflib

def seq_equivs(s1, s2):
    equiv = []
    s = difflib.SequenceMatcher(a=s1, b=s2)
    for m in s.get_matching_blocks():
        if m[2] == 0:
            break
        for n in range(1, 1+m[2]):
            equiv.append((m[0]+n, m[1]+n))
    return equiv 
```

示例用法：

```
f1 = open('file1.txt').read().split('\n')
f2 = open('file2.txt').read().split('\n')

for equivs in seq_equivs(f1, f2):
    print('%d %d' % equivs) 
```

# google-app-engine - 谷歌应用引擎错误“这个网页有一个重定向循环”

> ID：13973084
> 
> 赞同：0
> 
> 时间：2012-12-20T13:18:21.517
> 
> 标签：google-app-engine

我正在尝试从我新创建的谷歌应用帐户访问谷歌应用引擎[https://appengine.google.com/ 。](https://appengine.google.com/)

登录到我的新谷歌应用程序帐户后，它显示错误“此网页有重定向循环”。我不知道如何解决这个问题，我尝试清除缓存和 cookie，但它重复相同。

我不确定这是否是问这个问题的正确地方。请让我知道是否有任何其他论坛可以发布此问题。

如果您需要我的电子邮件地址，请告诉我。

谢谢，

拉梅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:44:13.677

也许是浏览器。您是否尝试过在其他浏览器中进行身份验证？或者您是否有一个自动登录插件作为导致循环的最后一次通过 fe？还有其他人有这个问题[1]。

[1] [http://code.google.com/p/googleappengine/issues/detail?id=8142](http://code.google.com/p/googleappengine/issues/detail?id=8142)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:21:54.857

我有同样的问题。这似乎是联合登录的问题。当我将应用程序从联合登录切换到 Google 帐户 API 时，一切正常。

联合登录仍处于试验阶段，在我看来不应在生产环境中使用。

干杯，Kjartan S。

# sql - postgresql :: 检索匹配精确条件的行或匹配部分条件的行数

> ID：13973085
> 
> 赞同：3
> 
> 时间：2012-12-20T13:18:23.577
> 
> 标签：sql, postgresql, lazy-evaluation

我有表“权限”

```
| user_id | object_id | readable | writable | 
```

我需要通过以下规则确定当前**user_id**是否可以访问给定的**object_id ：**

 ***   **如果object_id**根本没有记录，则返回 true
*   **如果object_id**有记录但**user_id不同，而给定****user_id**没有记录，则返回 false
*   **如果给定user_id**和**object_id**有记录，则再次检查提供的可读和可写条件

我不确定是否可以构建不涉及嵌套查询的 SQL 查询，现在我提出了

```
select (
    select count(*) 
    from permission 
    where 
        object_id = 123456
    ) == 0 OR (
        select readable=true, writable=false 
        from permission 
        where user_id=1 and object_id=123456
    ) 
```

有没有更优雅的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:06:51.257

尝试：

```
SELECT count(*) as total_count, --count of permission records for object
       bool_or(user_id = 1 AND readable) as user_readable, -- user has read permission, null if no permission record
       bool_or(user_id = 1 AND writable) as user_writable, -- user has write permission, null if no permission record
FROM permission
WHERE object_id = 123456 
```

然后从此查询构建您的逻辑案例，例如：

```
SELECT total_count = 0 OR user_readable as readable,
       total_count = 0 OR user_writable as writable
FROM (first select here) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:40:01.070

你可以这样做：

```
select 
  case 
    when (not exists (select object_id from permissions where object_id=123456)) then true
    when (not exists (select * from permissions where object_id=123456 and id=1)) then false
    else <check your conditions here> 
  end; 
```

araqnid 的查询效率略低，但可读性更强。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:40:29.233

```
select true as readable, true as writable
where not exists (select 1 permission where object_id = 123456)
union all
select readable, writable
from permission
where user_id = 1 and object_id = 123456 
```

请注意，您有不相交的可能性：

*   对象没有权限
*   对象存在权限
    *   用户存在权限
    *   用户没有权限

也就是说，如果不存在权限，则返回 true。否则返回用户的权限。如果存在该用户但不存在的权限，则不返回任何内容（在这种情况下，您可以使查询显式返回“false，false”，但为什么要浪费精力？）

此外，这假定这`(object_id, user_id)`是`permission`表的唯一键。**

# cordova - 在 Bada IDE 模拟器上运行示例 PhoneGap 应用程序“cordova-bada-wac”

> ID：13973092
> 
> 赞同：0
> 
> 时间：2012-12-20T13:18:50.580
> 
> 标签：cordova, ide, emulation, bada

我已经从[https://github.com/apache/cordova-bada-wac](https://github.com/apache/cordova-bada-wac)下载了示例项目，并尝试在 Bada IDE 上使用 PhoneGap 运行应用程序。我已经正确配置了 Bada IDE v.2.0.5 (WVGA) 和 API 版本 2.0。当将此项目导入为“Bada Flash / C++ 项目”并在“bada 模拟器 Web 应用程序”中运行时，出现此错误：

信息，安装完成。0027.312,INFO,P32,T00,A121,OspMain (26) > 应用程序已启动。0034.505,INFO,P32,T00,A126,Osp::Web::Controls::_ *WebService::AddMessageToConsole (3938) > 设备蜂窝网络状态：从文件 osp://www.texp59v0qj.com/ 加载的第 4195 行的 0 Res/js/cordova.js 0034.522,INFO,P32,T00,A126,Osp::Web::Controls::* _WebService::AddMessageToConsole (3938) > 从文件 osp://www.texp59v0qj 加载的第 4191 行的错误 NOT_AVAILABLE_ERR。 com/Res/js/cordova.js

当“texp59v0qj”是 manifest.xml 中的应用程序 ID 时。我也尝试过使用从 bada 开发人员站点生成的自己的 manifest.xml。

从 IDE 生成的示例“bada Web 应用程序项目”正常运行。那么这个示例项目“cordova-bada-wac”中可能有一些错误吗？

是同一个人尝试运行此应用程序吗？

```
This is full log on running this application:

6,0,0,1,2012-12-20,14:09:17.019,9|10|bada Broker 2.0.3.20111121

Connected to the bada IDE!

8,0,0,1,2012-12-20,14:09:17.031,AT+CGMM

8,0,0,1,2012-12-20,14:09:17.031,Wave-E

8,0,0,1,2012-12-20,14:09:17.031,OK

8,0,0,1,2012-12-20,14:09:17.032,AT+LCDINFO=MAIN

8,0,0,1,2012-12-20,14:09:17.033,+LCDINFO: 480,800

8,0,0,1,2012-12-20,14:09:17.033,OK

8,0,0,1,2012-12-20,14:09:17.034,AT+LCDINFO

8,0,0,1,2012-12-20,14:09:17.035,ERROR

8,0,0,1,2012-12-20,14:09:17.036,AT+GETDPIMG=0

3,0,0,1,2012-12-20,14:09:17.049,00002|78:62:111|PHONESTATUS:00>  Launch Is Ready

8,0,0,1,2012-12-20,14:09:20.567,OK

[SM]:Command message:[[1600:1601]GetAppInstallCondition texp59v0qj 1425169]

3,0,0,1,2012-12-20,14:09:20.570,00003|10:52:90|PHONESTATUS:12> errType=0, install is possible

[SM]:Command message:[[1600:1601]TerminateProcessEx texp59v0qj 0]

[SM]:Command message:[[1600:1601]UseDrmWrite webapp]

Creating an application folder on target device...

Creating application sub-folders on target device...

6,0,0,1,2012-12-20,14:09:22.095,1|1|30|1425169

6,0,0,1,2012-12-20,14:09:22.096,1|2|0|0|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Bin\WebAppLoader.exe|/Osp/Applications/texp59v0qj/Bin/WebAppLoader.exe

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Bin\WebAppLoader.exe
  ->  /Osp/Applications/texp59v0qj/Bin/WebAppLoader.exe  ( 0.000 sec)

6,0,0,1,2012-12-20,14:09:22.099,1|2|1|1810|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Info\application.xml|/Osp/Applications/texp59v0qj/Info/application.xml

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Info\application.xml
  ->  /Osp/Applications/texp59v0qj/Info/application.xml  ( 0.002 sec)

6,0,0,1,2012-12-20,14:09:22.114,1|2|2|1795|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Info\manifest.xml|/Osp/Applications/texp59v0qj/Info/manifest.xml

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Info\manifest.xml
  ->  /Osp/Applications/texp59v0qj/Info/manifest.xml  ( 0.002 sec)

6,0,0,1,2012-12-20,14:09:22.126,1|2|3|222148|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\codova_bada_wac_splash_type4.png|/Osp/Applications/texp59v0qj/Res/codova_bada_wac_splash_type4.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\codova_bada_wac_splash_type4.png
  ->  /Osp/Applications/texp59v0qj/Res/codova_bada_wac_splash_type4.png  ( 0.151 sec)

6,0,0,1,2012-12-20,14:09:22.283,1|2|4|107580|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\codova_bada_wac_splash_type5.png|/Osp/Applications/texp59v0qj/Res/codova_bada_wac_splash_type5.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\codova_bada_wac_splash_type5.png
  ->  /Osp/Applications/texp59v0qj/Res/codova_bada_wac_splash_type5.png  ( 0.072 sec)

6,0,0,1,2012-12-20,14:09:22.361,1|2|5|4111|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\cordova_bada_icon_type5.png|/Osp/Applications/texp59v0qj/Res/cordova_bada_icon_type5.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\cordova_bada_icon_type5.png
  ->  /Osp/Applications/texp59v0qj/Res/cordova_bada_icon_type5.png  ( 0.003 sec)

6,0,0,1,2012-12-20,14:09:22.367,1|2|6|5758|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\cordova_bada_wac_icon_type3.png|/Osp/Applications/texp59v0qj/Res/cordova_bada_wac_icon_type3.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\cordova_bada_wac_icon_type3.png
  ->  /Osp/Applications/texp59v0qj/Res/cordova_bada_wac_icon_type3.png  ( 0.004 sec)

6,0,0,1,2012-12-20,14:09:22.376,1|2|7|7287|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\cordova_bada_wac_icon_type4.png|/Osp/Applications/texp59v0qj/Res/cordova_bada_wac_icon_type4.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\cordova_bada_wac_icon_type4.png
  ->  /Osp/Applications/texp59v0qj/Res/cordova_bada_wac_icon_type4.png  ( 0.005 sec)

6,0,0,1,2012-12-20,14:09:22.385,1|2|8|90555|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\cordova_bada_wac_splash_type3.png|/Osp/Applications/texp59v0qj/Res/cordova_bada_wac_splash_type3.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\cordova_bada_wac_splash_type3.png
  ->  /Osp/Applications/texp59v0qj/Res/cordova_bada_wac_splash_type3.png  ( 0.061 sec)

6,0,0,1,2012-12-20,14:09:22.452,1|2|9|3834|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\css\index.css|/Osp/Applications/texp59v0qj/Res/css/index.css

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\css\index.css
  ->  /Osp/Applications/texp59v0qj/Res/css/index.css  ( 0.003 sec)

6,0,0,1,2012-12-20,14:09:22.465,1|2|10|21814|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\img\logo.png|/Osp/Applications/texp59v0qj/Res/img/logo.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\img\logo.png
  ->  /Osp/Applications/texp59v0qj/Res/img/logo.png  ( 0.015 sec)

6,0,0,1,2012-12-20,14:09:22.484,1|2|11|1868|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\index.html|/Osp/Applications/texp59v0qj/Res/index.html

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\index.html
  ->  /Osp/Applications/texp59v0qj/Res/index.html  ( 0.002 sec)

6,0,0,1,2012-12-20,14:09:22.495,1|2|12|208656|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\js\cordova.js|/Osp/Applications/texp59v0qj/Res/js/cordova.js

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\js\cordova.js
  ->  /Osp/Applications/texp59v0qj/Res/js/cordova.js  ( 0.196 sec)

6,0,0,1,2012-12-20,14:09:22.734,1|2|13|1963|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\js\index.js|/Osp/Applications/texp59v0qj/Res/js/index.js

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\js\index.js
  ->  /Osp/Applications/texp59v0qj/Res/js/index.js  ( 0.002 sec)

6,0,0,1,2012-12-20,14:09:22.745,1|2|14|4111|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\icon\bada-wac\icon-48-type5.png|/Osp/Applications/texp59v0qj/Res/res/icon/bada-wac/icon-48-type5.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\icon\bada-wac\icon-48-type5.png
  ->  /Osp/Applications/texp59v0qj/Res/res/icon/bada-wac/icon-48-type5.png  ( 0.006 sec)

6,0,0,1,2012-12-20,14:09:22.755,1|2|15|5758|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\icon\bada-wac\icon-50-type3.png|/Osp/Applications/texp59v0qj/Res/res/icon/bada-wac/icon-50-type3.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\icon\bada-wac\icon-50-type3.png
  ->  /Osp/Applications/texp59v0qj/Res/res/icon/bada-wac/icon-50-type3.png  ( 0.004 sec)

6,0,0,1,2012-12-20,14:09:22.762,1|2|16|7287|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\icon\bada-wac\icon-80-type4.png|/Osp/Applications/texp59v0qj/Res/res/icon/bada-wac/icon-80-type4.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\icon\bada-wac\icon-80-type4.png
  ->  /Osp/Applications/texp59v0qj/Res/res/icon/bada-wac/icon-80-type4.png  ( 0.005 sec)

6,0,0,1,2012-12-20,14:09:22.771,1|2|17|90555|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\screen\bada-wac\screen-type3.png|/Osp/Applications/texp59v0qj/Res/res/screen/bada-wac/screen-type3.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\screen\bada-wac\screen-type3.png
  ->  /Osp/Applications/texp59v0qj/Res/res/screen/bada-wac/screen-type3.png  ( 0.061 sec)

6,0,0,1,2012-12-20,14:09:22.838,1|2|18|222148|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\screen\bada-wac\screen-type4.png|/Osp/Applications/texp59v0qj/Res/res/screen/bada-wac/screen-type4.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\screen\bada-wac\screen-type4.png
  ->  /Osp/Applications/texp59v0qj/Res/res/screen/bada-wac/screen-type4.png  ( 0.153 sec)

6,0,0,1,2012-12-20,14:09:22.997,1|2|19|107580|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\screen\bada-wac\screen-type5.png|/Osp/Applications/texp59v0qj/Res/res/screen/bada-wac/screen-type5.png

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\res\screen\bada-wac\screen-type5.png
  ->  /Osp/Applications/texp59v0qj/Res/res/screen/bada-wac/screen-type5.png  ( 0.072 sec)

6,0,0,1,2012-12-20,14:09:23.075,1|2|20|6915|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\sample\index.html|/Osp/Applications/texp59v0qj/Res/sample/index.html

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\sample\index.html
  ->  /Osp/Applications/texp59v0qj/Res/sample/index.html  ( 0.005 sec)

6,0,0,1,2012-12-20,14:09:23.091,1|2|21|184903|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\sample\js\cordova.js|/Osp/Applications/texp59v0qj/Res/sample/js/cordova.js

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\sample\js\cordova.js
  ->  /Osp/Applications/texp59v0qj/Res/sample/js/cordova.js  ( 0.184 sec)

6,0,0,1,2012-12-20,14:09:23.310,1|2|22|11708|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\sample\js\sample.js|/Osp/Applications/texp59v0qj/Res/sample/js/sample.js

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\sample\js\sample.js
  ->  /Osp/Applications/texp59v0qj/Res/sample/js/sample.js  ( 0.008 sec)

6,0,0,1,2012-12-20,14:09:23.331,1|2|23|1297|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\helper.js|/Osp/Applications/texp59v0qj/Res/spec/helper.js

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\helper.js
  ->  /Osp/Applications/texp59v0qj/Res/spec/helper.js  ( 0.001 sec)

6,0,0,1,2012-12-20,14:09:23.340,1|2|24|2671|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\index.js|/Osp/Applications/texp59v0qj/Res/spec/index.js

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\index.js
  ->  /Osp/Applications/texp59v0qj/Res/spec/index.js  ( 0.002 sec)

6,0,0,1,2012-12-20,14:09:23.351,1|2|25|19681|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\lib\jasmine-1.2.0\jasmine-html.js|/Osp/Applications/texp59v0qj/Res/spec/lib/jasmine-1.2.0/jasmine-html.js

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\lib\jasmine-1.2.0\jasmine-html.js
  ->  /Osp/Applications/texp59v0qj/Res/spec/lib/jasmine-1.2.0/jasmine-html.js  ( 0.014 sec)

6,0,0,1,2012-12-20,14:09:23.383,1|2|26|6525|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\lib\jasmine-1.2.0\jasmine.css|/Osp/Applications/texp59v0qj/Res/spec/lib/jasmine-1.2.0/jasmine.css

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\lib\jasmine-1.2.0\jasmine.css
  ->  /Osp/Applications/texp59v0qj/Res/spec/lib/jasmine-1.2.0/jasmine.css  ( 0.005 sec)

6,0,0,1,2012-12-20,14:09:23.402,1|2|27|71170|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\lib\jasmine-1.2.0\jasmine.js|/Osp/Applications/texp59v0qj/Res/spec/lib/jasmine-1.2.0/jasmine.js

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\lib\jasmine-1.2.0\jasmine.js
  ->  /Osp/Applications/texp59v0qj/Res/spec/lib/jasmine-1.2.0/jasmine.js  ( 0.048 sec)

6,0,0,1,2012-12-20,14:09:23.497,1|2|28|1081|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\lib\jasmine-1.2.0\MIT.LICENSE|/Osp/Applications/texp59v0qj/Res/spec/lib/jasmine-1.2.0/MIT.LICENSE

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec\lib\jasmine-1.2.0\MIT.LICENSE
  ->  /Osp/Applications/texp59v0qj/Res/spec/lib/jasmine-1.2.0/MIT.LICENSE  ( 0.001 sec)

6,0,0,1,2012-12-20,14:09:23.501,1|2|29|2600|s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec.html|/Osp/Applications/texp59v0qj/Res/spec.html

Transferred: s:\mobile\bada\2.0.5\Temp\texp59v0qj\Res\spec.html
  ->  /Osp/Applications/texp59v0qj/Res/spec.html  ( 0.002 sec)

6,0,0,1,2012-12-20,14:09:23.512,1|5

Transfer completed.

[SM]:Command message:[[1600:1601]EnableDiagWrite]

[SM]:Command message:[[1600:1601]AppPkgInstall /Osp/Applications/texp59v0qj]

[SM]:Command message:[[0:2]MID_PROCESSMGR,0xFF]

[SM]:Command message:[[0:2]MID_DIAGMGR,0xFF]

[SM]:Command message:[[0:2]MID_DIAGMGR,0xFF]

3,0,0,1,2012-12-20,14:09:24.102,00004|10:52:90|PHONESTATUS:04> app installed, errType=0

Installation completed.

2,0,0,1,2012-12-20,14:09:24.102,Info, Installation completed.

[SM]:Command message:[[1400:1400]/Osp/Applications/texp59v0qj/Bin/WebAppLoader.exe,/Osp/Applications/texp59v0qj/Bin]

3,0,0,1,2012-12-20,14:09:24.173,00005|78:62:111|PROCESSMGR:00> 32,/Osp/Applications/texp59v0qj/Bin/WebAppLoader.exe

2,0,0,1,2012-12-20,14:09:24.842,0027.312,INFO,P32,T00,A121,OspMain (26) > Application started.

3,0,0,1,2012-12-20,14:09:24.964,[10800:10800]0027:432,texp59v0qj,/Home/texp59v0qj

3,0,0,1,2012-12-20,14:09:24.987,[11100:11100]0027:458,texp59v0qj,cordova-bada-wac

3,0,0,1,2012-12-20,14:09:25.888,[11000:11000]0028:358,texp59v0qj,,536870915

3,0,0,1,2012-12-20,14:09:27.556,[10400:10400]0030:026,texp59v0qj,

3,0,0,1,2012-12-20,14:09:31.155,[10400:10400]0033:624,texp59v0qj,

2,0,0,1,2012-12-20,14:09:32.034,0034.505,INFO,P32,T00,A126,Osp::Web::Controls::__WebService::AddMessageToConsole (3938) > Device Cellular network status: 0 at line 4195 loaded from file osp://www.texp59v0qj.com/Res/js/cordova.js

2,0,0,1,2012-12-20,14:09:32.052,0034.522,INFO,P32,T00,A126,Osp::Web::Controls::__WebService::AddMessageToConsole (3938) > Error NOT_AVAILABLE_ERR at line 4191 loaded from file osp://www.texp59v0qj.com/Res/js/cordova.js

3,0,0,1,2012-12-20,14:11:03.266,00006|117:-1:-1|PROCESSMGR:04> 32,0 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T21:11:58.817

错误消息指向第 4191 行，其中检查 wifi 状态，如果未连接值，则显示错误。您是否尝试过通过打开 wifi 来运行此应用程序？因为通过查看给出错误[的文件的源代码](https://github.com/apache/cordova-bada-wac/blob/master/Res/js/cordova.js)，它似乎无法解释 wifi 是否已连接。可能你应该尝试在连接和工作状态的 wifi 的 bada 手机上运行这个应用程序。

# javascript - 未捕获的类型错误：无法调用 null 的方法“toString”

> ID：13973094
> 
> 赞同：2
> 
> 时间：2012-12-20T13:18:51.610
> 
> 标签：javascript, getelementbyid, getattribute

我正在尝试在 JavaScript 中创建一个类来验证表单。这将检查表单元素并验证字段是否具有特定属性。

但是，调用`getAttribute`没有返回值。它不会在另一个变量中获取值，但是，如果我打印，它工作得很好。

这是我的课程的代码：

```
function valida() {
    document.getElementById("msgDiv").innerHTML="";
    var totalErros=0; 
    var x=document.getElementById("frm1");
    for (var i=0;i<x.length;i++){
        var input=document.getElementsByTagName("input")[i];
        var campo=input.getAttribute("id");
        var tipo=input.getAttribute("tipo");
        var nome=input.getAttribute("nome");
        var id=campo.toString(); //the error goes here
        //var valor=_$(id).value;
        alert(campo);

        switch (tipo) {
            case "obrigatorio":
                if(document.getElementById(id).value==""){
                    document.getElementById("msgDiv").innerHTML+="Deu erro no campo "+nome+"<br />"; 
                    totalErros++;}
                    break
            case "oemail":
                if(document.getElementById(id).value==""){
                    document.getElementById("msgDiv").innerHTML+="Deu erro no campo "+nome+"<br />"; 
                    totalErros++;}
                    break
            case "email":
                if(!ValidaEmail(document.getElementById(id).value)){
                    document.getElementById("msgDiv").innerHTML+="O "+nome+" que você informou é inválido "+document.getElementById(id).value+"  <br />"; 
                    totalErros++;}
                    break
            default:
                document.getElementById("msgDiv").innerHTML+="<br />";
        }            
    }
    if(totalErros==0) {  
        document.getElementById("msgDiv").innerHTML="Agora foi "+ totalErros;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:26:11.910

你的问题是这样的：

```
var input=document.getElementsByTagName("input")[i];
var campo=input.getAttribute("id");
//...
var id=campo.toString(); //the error goes here 
```

您正在获取给定的输入元素并将其存储在变量中`input`。然后，您将获取该元素的 ID 并将其存储在变量中`campo`。然后你`campo`在它上面调用并调用 toString() 。

问题是至少一个输入元素没有 ID。因为你不能调用`toString`on `null`，所以你会得到一个错误。

你实际上并不需要首先打电话`toString()`。只需`campo`按原样使用。它将为空（如果没有 ID）或字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:32:52.900

你的这部分代码激起了我的好奇心：

```
var x=document.getElementById("frm1");
for (var i=0;i<x.length;i++){
    var input=document.getElementsByTagName("input")[i]; 
```

这会收集您页面上**所有** `<input>`元素的集合，并且每次都取*第*`i`一个；谁知道你会得到什么输入元素。

 *如果您只想遍历您感兴趣的表单元素，这会更容易和更快：

```
var x = document.getElementById('frm1'),
input,
campo;

for (var i = 0, n = x.length; i != n; ++i) {
    input = x.elements[i];
    if (campo = input.id) {
        // rest of your code
    }
} 
```

如您所见，我采用的是`id`属性而不是`id`属性；这通常是更好的做法，因为属性的变化可能并不总是反映在相应的属性中。

此外，`.toString()`是多余的，如果不为空，它已经是一个字符串。

**更新**

正如@bfavaretto 在评论部分指出的那样，这部分代码也可以简化：

```
if(document.getElementById(id).value==""){ 
```

对此：

```
if (input.value == '') { 
```

*无论输入元素是否有 id 都可以**

# python - 如何在 scikit-learn 中获取 LDA 的组件？

> ID：13973096
> 
> 赞同：20
> 
> 时间：2012-12-20T13:19:01.860
> 
> 标签：python, machine-learning, scikit-learn

在 sklearn 中使用 PCA 时，很容易取出组件：

```
from sklearn import decomposition
pca = decomposition.PCA(n_components=n_components)
pca_data = pca.fit(input_data)
pca_components = pca.components_ 
```

但是我一生都无法弄清楚如何从 LDA 中取出组件，因为没有 components_ 属性。sklearn lda中是否有类似的属性？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-10-17T17:52:57.520

**在 PCA 的情况下**，文档很清楚。**是`pca.components_`特征向量。**

**在 LDA 的情况下****，**我们需要**属性。****`lda.scalings_`**

* * *

**使用 iris 数据和 sklearn 的可视化示例：**

```
import numpy as np
import matplotlib.pyplot as plt
from sklearn import datasets
import pandas as pd
from sklearn.preprocessing import StandardScaler
from sklearn.discriminant_analysis import LinearDiscriminantAnalysis

iris = datasets.load_iris()
X = iris.data
y = iris.target
#In general it is a good idea to scale the data
scaler = StandardScaler()
scaler.fit(X)
X=scaler.transform(X)

lda = LinearDiscriminantAnalysis()
lda.fit(X,y)
x_new = lda.transform(X) 
```

* * *

**验证 lda.scalings_ 是特征向量：**

```
print(lda.scalings_)
print(lda.transform(np.identity(4)))

[[-0.67614337  0.0271192 ]
 [-0.66890811  0.93115101]
 [ 3.84228173 -1.63586613]
 [ 2.17067434  2.13428251]]

[[-0.67614337  0.0271192 ]
 [-0.66890811  0.93115101]
 [ 3.84228173 -1.63586613]
 [ 2.17067434  2.13428251]] 
```

* * *

**此外，这里有一个有用的功能来绘制双标图并进行视觉验证：**

```
def myplot(score,coeff,labels=None):
    xs = score[:,0]
    ys = score[:,1]
    n = coeff.shape[0]

    plt.scatter(xs ,ys, c = y) #without scaling
    for i in range(n):
        plt.arrow(0, 0, coeff[i,0], coeff[i,1],color = 'r',alpha = 0.5)
        if labels is None:
            plt.text(coeff[i,0]* 1.15, coeff[i,1] * 1.15, "Var"+str(i+1), color = 'g', ha = 'center', va = 'center')
        else:
            plt.text(coeff[i,0]* 1.15, coeff[i,1] * 1.15, labels[i], color = 'g', ha = 'center', va = 'center')

plt.xlabel("LD{}".format(1))
plt.ylabel("LD{}".format(2))
plt.grid()

#Call the function. 
myplot(x_new[:,0:2], lda.scalings_) 
plt.show() 
```

**结果**

[![结果](../Images/e4ec27069334e548f218dae44c13526c.png)](https://i.stack.imgur.com/CL8ss.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-27T14:17:14.110

我对代码的阅读是，在`coef_`针对不同类别对样本的特征进行评分时，该属性用于对每个组件进行加权。`scaling`是特征向量，`xbar_`是均值。本着 UTSL 的精神，这里是决策函数的来源： [https ://github.com/scikit-learn/scikit-learn/blob/6f32544c51b43d122dfbed8feff5cd2887bcac80/sklearn/discriminant_analysis.py#L166](https://github.com/scikit-learn/scikit-learn/blob/6f32544c51b43d122dfbed8feff5cd2887bcac80/sklearn/discriminant_analysis.py#L166)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-18T09:04:55.143

在 PCA 中，变换操作使用`self.components_.T`（参见[代码](https://github.com/scikit-learn/scikit-learn/blob/ef5cb84a/sklearn/decomposition/base.py#L131)）：

```
 X_transformed = np.dot(X, self.components_.T) 
```

在 LDA 中，变换操作使用`self.scalings_`（参见[代码](https://github.com/scikit-learn/scikit-learn/blob/ef5cb84a/sklearn/discriminant_analysis.py#L491)）：

```
 X_new = np.dot(X, self.scalings_) 
```

* * *

请注意`.T`在 PCA 中转置数组，而不是在 LDA 中转置：

*   主成分分析：`components_ : array, shape (n_components, n_features)`
*   低密度脂蛋白：`scalings_ : array, shape (n_features, n_classes - 1)`

# php - 使用正则表达式分解单词/字符串中的值

> ID：13973099
> 
> 赞同：1
> 
> 时间：2012-12-20T13:19:09.990
> 
> 标签：php, regex

我有这个示例字符串，我想用正则表达式分解日、月、小时、分钟、（上午/下午）：

```
SunDec 16 00:00am 
```

使用这个：

```
(\w+)\s+(\w+)\s+(\d+)\:(\d+)(..) 
```

但它给了我：

```
Array
(
    [0] => SunDec 16 00:00am
    [1] => SunDec
    [2] => 16
    [3] => 00
    [4] => 00
    [5] => am
) 
```

我想不通..我可以把 SubDec 炸成两半吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:31:58.810

你可以试试这个：

```
$str = 'SunDec 16 00:00am';

preg_match('/([A-Z]{1}\w+)([A-Z]{1}\w+)\s+(\w+)\s+(\d+):(\d+)(..)/', $str, $ret);

print_r($ret); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:26:56.650

如果您的字符串始终遵循该示例，则可以使用：

```
$string = 'SunDec 16 00:00am';
$pattern = '!([a-zA-Z]{3})([a-zA-Z]{3})\s+(\w+)\s+(\d+)\:(\d+)(..)!';
preg_match($pattern, $string, $chunks);
print_r($chunks); 
```

哪个输出：

```
Array
(
    [0] => SunDec 16 00:00am
    [1] => Sun
    [2] => Dec
    [3] => 16
    [4] => 00
    [5] => 00
    [6] => am
) 
```

你也可以使用这个稍微小一点的模式

```
'!([a-z]{3})([a-z]{3})\s+(\w+)\s+(\d+)\:(\d+)(..)!i' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:31:44.240

你可以试试这个正则表达式，这可能对你有帮助

```
([A-Z][a-z]+)+\s(\d+)?\s?(\d+)\:(\d+)([a-z]+) 
```

# nhibernate - NHibernate.Engine.ForeignKeys - 无法确定实体是暂时的还是分离的

> ID：13973103
> 
> 赞同：1
> 
> 时间：2012-12-20T13:19:28.567
> 
> 标签：nhibernate

我有这个**仪器**实体：

```
<class name="Instrument" table="Instruments" mutable="false">
    <id name="ID" column="INSTRUMENT_ID" unsaved-value="0">
        <generator class="assigned" />
    </id>
    <property name="....." />
    <property name="....." />
</class> 
```

**该实体用于其他实体（ InstrumentSelection**）中的多对一关系。这是多对一的映射信息：

```
<many-to-one name="Instrument" access="field.camelcase" column="Instrument_ID" update="false" class="Instrument" not-null="true" fetch="join" lazy="false" /> 
```

**当我使用Save保存****InstrumentSelection**实体时，我遇到的问题是：

 **```
Transact(() => session.Save(entity)); 
```

我在日志中收到错误：

> 2012-12-20 14:09:54,607 WARN 12 NHibernate.Engine.ForeignKeys - 无法确定分配标识符为 11457 的仪器是暂时的还是分离的；查询数据库。在会话中使用显式 Save() 或 Update() 来防止这种情况。

**关于 Instrument 实体的一些事实：**

*   它只是一个参考实体
*   它是不可变的实体
*   它不能通过应用程序添加/插入。我从外部提要获取数据库中的行。

**问题（版本 1）**：我的问题是：有没有办法指示 NHibernate 始终将 Instrument 实体视为分离的？我的意思是-如果应用程序中存在 Instrument 的实例，则意味着它存在于数据库中。所以查询数据库没有太大意义。

### 编辑 1：因为**问题（版本 1）**还没有回答，让我稍微改变一下：

**问题（第 2 版）**：NHibernate 仍在尝试确定实体是否分离/瞬态的行为可能是什么？我想我的映射配置正确（**unsaved-value**，**generator**）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T02:03:14.273

问题是当您保存 InstrumentSelection 时，NHibernate 会级联操作以保存子 Instruments。我的第一个建议是在关系的 InstrumentSelect 端将级联设置为无。

我的第二个建议是使用拦截器，如[this answer](https://stackoverflow.com/a/1075232/12752)所示。**

# javascript - 如何在requireJS中回退到整个文件夹

> ID：13973105
> 
> 赞同：0
> 
> 时间：2012-12-20T13:19:34.840
> 
> 标签：javascript, requirejs, dynamic-script-loading

我了解如何在 requireJS 中为单个文件配置后备，如下所示：

```
 var skin = "christmas";

    requirejs.config({

    paths: {
        languagesLocal : [
            BaseUrl +  skin + '/js/languagesLocal',
            BaseUrl +  "default" + '/js/languagesLocal'

        ]
    }
}); 
```

因此，如果没有“圣诞节”皮肤，我会使用默认脚本。

**现在-我的问题是-如何将完整的文件夹作为后备文件夹？因此，如果皮肤文件夹中不存在一个文件 - 它将在另一个文件夹中回退。**我需要检查**每个文件**是否存在，如果不存在，则应在默认文件夹中进行后备

我试图这样做`baseUrl`：

```
 var skin = "christmas";

        requirejs.config({

       baseUrl: [
        BaseUrl +  skin + '/js/',
        BaseUrl +  'default' + '/js/'
        ],
    }); 
```

但它失败并将 baseUrl 呈现为一个与 2 个字符串组合的巨大 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:24:36.320

编辑：我误解了你的问题。我知道单个模块是可能的：

[http://requirejs.org/docs/api.html#errbacks](http://requirejs.org/docs/api.html#errbacks)

使用这种技术，您可以创建一个模块来验证每个模块的存在：

**加载器.js**

```
define(['a', 'b'], function(a, b) {}, 
   function(err) {
      if (err.requireModules) {
         for(var i = 0; i < err.requireModules.length; i++) {
            requirejs.undef(requireModules[i]);

            requirejs.config({
               baseUrl: BaseUrl +  'default' + '/js/'
            });
            require([requireModules[i]], function () {});
         }
      }
}); 
```

# unicode - 8个方向的Unicode / ASCII箭头？

> ID：13973106
> 
> 赞同：14
> 
> 时间：2012-12-20T13:19:36.367
> 
> 标签：unicode, ascii

我正在寻找所有 8 个方向（上、下、左、右、右下、左下……）的 Unicode / ASCII 箭头。我更喜欢`< >`. 但我还没有找到它们。它们存在吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-11-05T20:04:01.937

他们来了：

```
↖ ↑ ↗
← · →
↙ ↓ ↘ 
```

对于正交箭头（左、上、右、下），它们的代码点是 U+2190 到 U+2193，而对角箭头（左上、右上、右下、下-）的代码点是 U+2196 到 U+2199。剩下）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-03T22:04:16.570

作为已经建议用户 Lynn 的替代方案，在代码点 U+27A1 和 U+2B05 到 U+2B0B 处有更宽的箭头：

```
⬉ ⬆ ⬈
⬅ ⊙ ➡
⬋ ⬇ ⬊ 
```

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-12-20T13:22:50.067

wingdings 字体的箭头从 0xE7 到 0xEE。

您是否检查过“charmap”（在 Windows 上，开始，运行，charmap）？

# primefaces - 如何在 portlet 项目中设置 primefaces 主题

> ID：13973107
> 
> 赞同：0
> 
> 时间：2012-12-20T13:19:38.053
> 
> 标签：primefaces, liferay, portlet

我正在使用 primefaces 开发一个 portlet 项目，并且我想更改默认主题。我使用 jquery themeRoller 制作了一个自定义主题，并制作了一个包含主题的 jar 文件，如官方文档中所述。

问题是找不到css资源：

```
Unable to find or serve resource, myTheme.css, from library, primefaces-myTheme. 
```

注意：在 web.xml 我放：

```
 <context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>myTheme</param-value>
  </context-param> 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:51:53.377

你把你的jar文件放在'lib'文件夹中了吗？您是否正确遵循了主题目录结构？看看这个链接。

> [http://chawi3.com/2012/05/18/add-custom-theme-primefaces/](http://chawi3.com/2012/05/18/add-custom-theme-primefaces/)

# ios - alasset 显示错误的时间

> ID：13973113
> 
> 赞同：0
> 
> 时间：2012-12-20T13:19:50.807
> 
> 标签：ios, alassetslibrary

```
[asset valueForProperty:ALAssetPropertyDate]); 
```

显示错误的时间，它正确显示分钟，但小时比当前少 5。

但我的设备在状态栏中显示正确的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:15:42.330

调用`[asset valueForProperty:ALAssetPropertyDate]`在 NSDate 中返回。NSDate 对象具有编码在其中的 timeZone。要将 NSDate 显示为 NSString，您应该使用 NSDateFormatter。

```
NSDate *date = [asset valueForProperty:ALAssetPropertyDate];

NSDateFormatter *dateFormatter = [NSDateFormatter new];
[dateFormatter setDateStyle:NSDateFormatterShortStyle];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];
NSString *dateString = [dateFormatter stringFromDate:date];

[dateFormatter setDateStyle:NSDateFormatterNoStyle];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
NSString *timeString = [dateFormatter stringFromDate:date]; 
```

# jquery - jqueryUI - 幻灯片处理程序的位置错误..

> ID：13973115
> 
> 赞同：1
> 
> 时间：2012-12-20T13:19:57.910
> 
> 标签：jquery, jquery-ui

在我制作了一个示例滑块后，我将处理程序设置为自定义高度。但在顶部，它会隐藏起来，而在底部，它会移出。

任何人都可以帮助“重新调整处理程序大小的正确方法是什么？”

我的代码：

```
$(function() {
    $('#sample').slider({orientation:'vertical'});
});​ 
```

CSS：

```
.ui-slider {
    position: relative;
    height: 300px;
    width: 20px;
    line-height: 20px;
    border-radius: 2em;
    background: #CCC;
    margin-left:50px;
}
.ui-slider-handle.ui-state-default {
    display: block;
    cursor: move;
    height:100px;
    margin-left:4px;
    margin-top:0.2em;
    background: #333
}​ 
```

[jsfiddle在这里](http://jsfiddle.net/Erugp/93/)

# string - 将 R 向量转换为 1 个元素的字符串向量

> ID：13973116
> 
> 赞同：75
> 
> 时间：2012-12-20T13:20:07.177
> 
> 标签：string, r, vector, arguments, system

我现在正在使用编程语言 R。我有一个向量：

```
a <- c("aa", "bb", "cc") 
```

我想将这些粘贴到系统命令中，我现在正在尝试这种方式：

```
args <- paste(a, sep=" ")
system(paste("command",args, sep=" ")) 
```

但现在我只得到参数 aa，我想要参数 aa、bb 和 cc ......

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-12-20T13:32:34.597

使用`collapse`参数`paste`：

```
paste(a,collapse=" ")
[1] "aa bb cc" 
```

# php - MySQL将HTML表中的行插入到db表中

> ID：13973118
> 
> 赞同：1
> 
> 时间：2012-12-20T13:20:09.527
> 
> 标签：php, html, mysql, html-table, insert

我正在使用`for`循环从 MySQL 表选择查询的内容构造一个 HTML 表。我在每一行的末尾都有一个链接，可以将该行复制到另一个表中。

我不确定如何从 MySQL 插入查询的表行中获取数据 - 我已经标记了我正在努力解决的地方`XXX`。

```
<?php

mysql_select_db("cardatabase");

$link = mysql_connect("localhost", "root", "password");
$query = "SELECT * from cars";
$result = mysql_query($query);

if($_GET['rent']) {
    $rent = "INSERT INTO rentedcars VALUES('XXX','XXX','XXX','XXX','XXX','XXX','XXX','XXX','XXX','XXX')";
    mysql_query($rent);
    echo "<meta http-equiv='refresh' content='0;url=rent.php'/>";
}

echo "<table>";
echo "<tr><td>ID</td><td>Make</td><td>Model</td><td>Fuel Type</td><td>Transmission</td><td>Engine Size</td><td>Doors</td><td>Amount</td><td>Available</td><td>Date Added</td><td>Remove</td></tr>";

for ($i = 0; $i < mysql_num_rows($result); $i++) {
    $row = mysql_fetch_object($result);
    echo "<tr>
        <td>$row->ID</td>
        <td>$row->CARMAKE</td>
        <td>$row->CARMODEL</td>
        <td>$row->FUELTYPE</td>
        <td>$row->TRANSMISSION</td>
        <td>$row->ENGINESIZE</td>
        <td>$row->DOORS</td>
        <td>$row->AMOUNT</td>
        <td>$row->AVAILABLE</td>
        <td>$row->DATEADDED</td>
        <td><a href='?rent=$row->ID'>Rent</a></td>
        </tr>";
}
echo "</table>"; 
```

*编辑（更新代码）：*

```
<?php

mysql_select_db ("cardatabase");

$link   = mysql_connect ("localhost", "root", "password");
$query  = "SELECT * from cars";
$result = mysql_query ($query);

if($_GET['rent']) {
    $query_car = sprintf("SELECT * from cars WHERE ID=%s",$_GET['rent']);
    $rslt      = mysql_query($query_car);
    $car       = mysql_fetch_object ($rslt);
    $rent      = "INSERT INTO rentedcars VALUES('$car->ID','$car->CARMAKE','$car->CARMODEL','$car->FUELTYPE','$car->TRANSMISSION','$car->ENGINESIZE','$car->DOORS','$car->AMOUNT','$car->AVAILABLE','$car->DATEADDED')";
    mysql_query($rent);
    echo "<meta http-equiv='refresh' content='0;url=rent.php'/>";
}

echo "<table>";
echo "<tr>";
echo "<td>ID</td><td>Make</td><td>Model</td><td>Fuel Type</td><td>Transmission</td><td>Engine Size</td><td>Doors</td><td>Amount</td><td>Available</td><td>Date Added</td><td>Remove</td>";
echo "</tr>";

while ($row = mysql_fetch_object($result)) {
    echo "<tr>
        <td>$row->ID</td>
        <td>$row->CARMAKE</td>
        <td>$row->CARMODEL</td>
        <td>$row->FUELTYPE</td>
        <td>$row->TRANSMISSION</td>
        <td>$row->ENGINESIZE</td>
        <td>$row->DOORS</td>
        <td>$row->AMOUNT</td>
        <td>$row->AVAILABLE</td>
        <td>$row->DATEADDED</td>
        <td><a href='?rent=$row->ID'>Rent</a></td>
        </tr>";
}
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:38:55.107

mysql_* 自 PHP 5.5.0 起已弃用，您应该使用 PDO 之类的东西。

```
try {
    $DBH = new PDO('mysql:dbname=cardatabase;host=localhost', 'root', 'password');
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$STH = $DBH->query("SELECT * FROM cars")->execute();

while ($row = $STH->fetch(PDO::FETCH_OBJ)) {
      echo "<tr>
<td>$row->ID</td>
<td>$row->CARMAKE</td>
<td>$row->CARMODEL</td>
<td>$row->FUELTYPE</td>
<td>$row->TRANSMISSION</td>
<td>$row->ENGINESIZE</td>
<td>$row->DOORS</td>
<td>$row->AMOUNT</td>
<td>$row->AVAILABLE</td>
<td>$row->DATEADDED</td>
<td><a href='?rent=".$row->ID."'>Rent</a></td>
</tr>";
    } 
```

编辑：就像@Skatox 说的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:31:34.347

我会这样做：

```
<?php
$link = mysql_connect ("localhost", "root", "password");
mysql_select_db ("cardatabase");
$query = "SELECT * from cars";
$result = mysql_query ($query); 
```

获取汽车信息并存储

```
if($_GET['rent'])
{
$query_car = sprintf("SELECT * from cars WHERE ID=%s",$_GET['rent']); //Avoids sql injection
$rslt = mysql_query($query_car);
$car = mysql_fetch_object ($rslt) 
```

这里需要验证是否有车

```
$rent = "INSERT INTO rentedcars VALUES('$car->ID','$car->CARMAKE','$car->CARMODEL','$car->FUELTYPE','$car->TRANSMISSION','$car->ENGINESIZE','$car->DOORS','$car->AMOUNT','$car->AVAILABLE','$car->DATEADDED')";
mysql_query($rent);
echo "<meta http-equiv='refresh' content='0;url=rent.php'/>";
} 
```

像@Vinoth Babu 说的那样将其更改为：

```
while   ($row = mysql_fetch_object ($result)) 
{        
$row = mysql_fetch_object ($result);
echo "<tr>
<td>$row->ID</td>
<td>$row->CARMAKE</td>
<td>$row->CARMODEL</td>
<td>$row->FUELTYPE</td>
<td>$row->TRANSMISSION</td>
<td>$row->ENGINESIZE</td>
<td>$row->DOORS</td>
<td>$row->AMOUNT</td>
<td>$row->AVAILABLE</td>
<td>$row->DATEADDED</td>
<td><a href='?rent=$row->ID'>Rent</a></td>
</tr>";
}
print "</table>";
?> 
```

我建议您切换到 MySQL PDO，它更安全，您将获得更好、更安全的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:33:19.213

您在插入查询中缺少列名

```
 $rent = "INSERT INTO rentedcars (id ,carmake, carmodel,fueltype,transmission, enginesize,doors,amount ,available, dateadded) 
           VALUES('xxx','xxx','".$carmodel."','XXX','XXX','XXX','XXX','XXX','XXX','XXX')"; 

                                   ^^^^^-------------i showed u exempel under 
```

那些 XXX 是您从输入值中获得的值

例子

```
 <input  name= "car_model" id= "car_model" value="mercedes" > 
```

然后你得到这个值

```
 if (isset($_POST['car_model'])){ $carmodel = $_POST['car_model']} 
```

然后`$carmodel`在你的 sql 中使用这个值

# uml - 如何绘制显示对另一个类的静态方法的调用的类图

> ID：13973119
> 
> 赞同：2
> 
> 时间：2012-12-20T13:20:24.883
> 
> 标签：uml, modeling, class-diagram

如何在图表中建模对`static`方法的调用？`class`有人可以给我一个链接到`class`已经完成的图表吗？

例如，有一个名为 Animal 的类。我有另一个名为 Vertibrates 的类，它有一个静态方法（这是该类中唯一的方法）。我的 Animal 类将使用 Vertibrate 类的这个静态方法。因此，我如何在类图中对其进行建模？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T13:32:39.497

你没有。好吧，至少不在类图中。相反，您应该使用时序图来表达方法调用（无论是静态的还是动态的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-12T10:49:45.927

您不能直接在类图中对**调用进行建模（如@Imontrieux 所说），但您可以对****关系**进行建模（即 Animal 在 Vertibrate 中使用（调用）静态方法；顺便说一句，正确的拼写是 Vertebrate），我怀疑实际上是你的意思。

为此，您使用 UML 依赖项，而不是关联（因为后者用于每一端的类**实例之间的关联）---请参阅**[如何显示静态方法 UML Classdiagram 的用法](https://stackoverflow.com/questions/11209240)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-02T22:12:16.030

好问题。GoF 在设计模式中所做的一件事是使用注释来演示预期用途。例如，从关于 的部分`Command Pattern`：

[命令模式](https://i.stack.imgur.com/VtTqE.png)

虽然@user1315906 在技术上是正确的，即您不在类图中建模此类事物，而是在用例或序列图中建模，但如果注意在类图中打算如何使用某些东西是有意义的，您可以使用注释:)

# c# - SJF 算法排序 C#

> ID：13973128
> 
> 赞同：-1
> 
> 时间：2012-12-20T13:20:46.710
> 
> 标签：c#

那是我的代码。我想使用更快的排序算法，可能是快速排序或梳状排序。
我先根据到达时间对列表进行了两次排序，然后再根据时间排序。
我需要帮助实现更快的排序算法
我的主要 mwthod

```
static void Main(string[] args)
        {
            //----------------------------------------Reading I/O File--------------------------------------
            string s = Environment.CurrentDirectory.ToString();   // returns the directory of the exe file
            if (File.Exists(s + @"\input.txt"))  //checking if the input files exists
                Console.WriteLine("File Exists");
            else
            {
                Console.WriteLine("File Not Found");
                Console.WriteLine("-----------------------------------------------------");
                return;
            }
            Console.WriteLine("-----------------------------------------------------");
            //----------------------------------------Data Into List--------------------------------------
            string FileText = File.ReadAllText(s + @"\input.txt"); //reading all the text in the input file
            string[] lines = FileText.Split('\n'); //splitting the lines
            List<Process> processes = new List<Process>();
            for (int i = 1; i < lines.Length; i++)
            {
                string[] tabs = lines[i].Split('\t');//splitting the tabs to get objects' variables
                Process x = new Process(tabs[0], int.Parse(tabs[1]), int.Parse(tabs[2]), int.Parse(tabs[3]));//creating object
                processes.Add(x);//adding object to the list
            }
            //   ----------------------------------------Sorting The List--------------------------------------
            Process temp;
            for (int k = 0; k < processes.Count; k++)
            {
                for (int i = k + 1; i < processes.Count; i++)
                {
                    if (processes[k].arrivalTime > processes[i].arrivalTime)
                    {
                        temp = processes[i];
                        processes[i] = processes[k];
                        processes[k] = temp;
                    }
                }
            }
            int tempClock = 0;
            for (int i = 0; i < processes.Count; i++)
            {
                if (processes[i].arrivalTime > tempClock)
                    tempClock = processes[i].arrivalTime;
                for (int k = i + 1; k < processes.Count; k++)
                {
                    if (processes[k].arrivalTime <= tempClock && processes[k].brust < processes[i].brust)
                    {
                        temp = processes[i];
                        processes[i] = processes[k];
                        processes[k] = temp;
                    }
                }
                tempClock += processes[i].brust;
            }
            Console.WriteLine("Processes After Sorting");
            Console.WriteLine("-----------------------------------------------------");
            Console.WriteLine("Name\tArrival\tBrust\tPriority");
            for (int i = 0; i < processes.Count; i++)
            {
                Console.Write(processes[i].name + "\t" + processes[i].arrivalTime + "\t" + processes[i].brust + "\t" + processes[i].priority);
                Console.WriteLine();
            }
            Console.WriteLine("-----------------------------------------------------");
            //----------------------------------------Gantt Chart--------------------------------------
            Console.WriteLine("Gantt Chart");
            Console.WriteLine("-----------------------------------------------------");
            int counter = 0;
            for (int i = 0; i < processes.Count; i++)
            {
                Console.Write(processes[i].name + "\t");
               if (processes[i].arrivalTime < counter)
                    printSpaces(counter);
               else
               {
                   printSpaces(processes[i].arrivalTime);
                   counter = processes[i].arrivalTime;
               }
                printHashes(processes[i].brust);
                counter += processes[i].brust;
                Console.WriteLine();
            }
            Console.WriteLine("-----------------------------------------------------");
            //-----------------------------------Completing Data And final Table-------------------------
            int clock = 0, totalwait = 0, totalturnAround = 0;
            for (int i = 0; i < processes.Count; i++)
            {
                if (processes[i].arrivalTime > clock)
                {
                    processes[i].start = processes[i].arrivalTime;
                    clock += processes[i].start - processes[i].arrivalTime;
                    clock += processes[i].brust;

                }
                else
                {
                    if (i > 0)
                        processes[i].start = processes[i - 1].end;
                    clock += processes[i].brust;
                }
                if (processes[i].start > processes[i].arrivalTime)
                    processes[i].wait = processes[i].start - processes[i].arrivalTime;
                else processes[i].wait = 0;
                processes[i].end = processes[i].start + processes[i].brust;
                processes[i].turnAround = processes[i].wait + processes[i].brust;
                totalwait += processes[i].wait;
                totalturnAround += processes[i].turnAround;
            }
            Console.WriteLine("Name\tArrival\tBrust\tStart\tEnd\tWait\tturnaround");
            for (int i = 0; i < processes.Count; i++)
            {
                Console.Write(processes[i].name + "\t" + processes[i].arrivalTime + "\t" + processes[i].brust + "\t" + processes[i].start + "\t" + processes[i].end + "\t" + processes[i].wait + "\t" + processes[i].turnAround);
                Console.WriteLine();
            }
            double att = 0, awt = 0;
            awt = (double)totalwait / (double)processes.Count;
            att = (double)totalturnAround / (double)processes.Count;
            Console.WriteLine("A.W.T= {0}", awt + "\t A.T.T= " + att);
            Console.ReadKey();
        } 
```

上课过程

```
class Process
    {
        public Process(string name, int arrivalTime, int brust, int priority)
        {
            this.name = name;
            this.arrivalTime = arrivalTime;
            this.brust = brust;
            this.priority = priority;
        }
        public Process()
        {

        }
        public string name;
        public int arrivalTime;
        public int brust;
        public int priority;
        public int wait;
        public int end;
        public int start;
        public int turnAround;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:29:27.220

我建议您查看[并行排序算法](https://stackoverflow.com/questions/1897458/parallel-sort-algorithm)以获取灵感。

我还假设您需要某种帮助来实现它，使用上述解决方案将类似于

```
// The contents of processes must implement IComparable<T>
QuicksortParallelOptimised(processes, 0, processes.Count); 
```

但是请尝试提出一个明确的问题:)

将 IComparable 接口的定义添加到您的流程类中；

```
partial class Process : IComparable<Process>
{
  public override int CompareTo(Process otherProcess) 
  {
    if (this.arrivalTime == otherProcess.arrivalTime)
      return this.brust.CompareTo(otherProcess.brust);
    return this.arrivalTime.CompareTo(otherProcess.brust);
  }
} 
```

做我到目前为止所说的会给你一轮排序，它也会让你的代码更具可读性:)

如果你有问题，就问吧 ：）

# sed - sed 处理多个目录中的多个文件

> ID：13973129
> 
> 赞同：3
> 
> 时间：2012-12-20T13:20:54.290
> 
> 标签：sed

我有以下目录树：

```
books>book(i)>cluster.pir 
```

其中 book(i) 是一组从 1 到 1023 的子目录，每个子目录都包含一个名为 cluster.pir 的文件夹。

以下 sed 命令：

```
sed -i '/>/d' ./*.pir 
```

将删除文件中包含 '>' 的任何行，用于带有 .pir 分机的任何文件，这很好，但我的各种 .pir 文件位于它们自己的 book(i) 目录中。如何让命令跨越所有目录？我试过了：

```
find ./*.pir -type f -exec sed -i '/>/d' ./*.pir 
```

在“书”父目录中开始时，但我得到：

```
find: missing argument to `-exec' 
```

有人对此有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T13:25:20.660

查找的格式为：

```
find -exec command {} \; 
```

其中 {} 替换为文件名。

编辑：在您的情况下，这将变为：

```
find ./*.pir -type f -exec sed -i '/>/d' {} \; 
```

这将在每个文件上调用 sed。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T13:58:07.600

您可以添加通配符以跨越所有目录：

```
sed -i '/>/d' ./book*/*.pir 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-27T15:30:04.683

我在我的 Mac 上使用文件通配符和 sed 时遇到了问题，这种方法效果很好：

```
FILE_PATH="/some/path/"
sed -i '' "s|search|replace|g"  $(find ${FILE_PATH} -name '*.ext') 
```

# mongodb - morphia 支持自动时间戳吗？

> ID：13973130
> 
> 赞同：1
> 
> 时间：2012-12-20T13:20:55.867
> 
> 标签：mongodb, morphia

有谁知道 morphia 在创建/修改操作期间是否支持在 mongodb 的集合中创建/更新文档的自动时间戳。

我已经知道这种支持在 mongodb 中不可用。我想知道是否有任何方法可以获取 morphia 驱动程序中数据或文档的最后访问/更新时间。

谢谢，伤心

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T14:51:17.260

我通常使用所有其他实体扩展的基本实体。它提供 ObjectId、创建日期、最后更改日期、禁用标志、...

相关的代码片段如下所示：

```
protected Date creationDate;
protected Date lastChange;

// Getters and setters or final setters which don't do anything,
// if you only want to allow the entity to update the values

@PrePersist
public void prePersist() {
    creationDate = (creationDate == null) ? new Date() : creationDate;
    lastChange = (lastChange == null) ? creationDate : new Date();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-27T19:27:03.883

如果这不是您正在寻找的确切答案，请提前抱歉。但简短的回答是否定的。

**最新的Morphia**中似乎没有支持该操作的 API。也许有一个错误打开来支持这一点。同时，您应该为 java.util.Date 或 java.sql.Timestamp 使用您最喜欢的构造函数。

**Morphia**的源代码内置了适当的转换器来处理此[TimestampConverter.java](https://github.com/mongodb/morphia/blob/master/morphia/src/main/java/org/mongodb/morphia/converters/TimestampConverter.java)。

只是切线相关。如果您使用的原因`$currentDate`是为了避免多个主机之间的时钟偏差问题，那么您就找错了树。尽管文档中没有明确说明`$currentDate`，但据记录，**MongoDB**没有解决各种主机之间的时钟偏差。这可以在[ObjectId.getTimestamp() 的文档中](https://docs.mongodb.com/manual/reference/bson-types/)找到。因此，`$currentDate`与客户端的时间戳相比，使用 将提供很少的好处。

# java - 在 eclipse-rcp/swt 中创建多个相同的文本验证侦听器

> ID：13973133
> 
> 赞同：4
> 
> 时间：2012-12-20T13:21:00.203
> 
> 标签：java, text, swt, eclipse-rcp, validation

我正在尝试验证多个文本框的输入（即它们应该是一个数字），并在下面找到了有用的代码[片段](https://stackoverflow.com/questions/6451894/problem-with-validating-the-integer-value-in-java)。

但是，如果我有三个文本框（和），如何将具有相同功能的验证侦听器应用于每个文本框，而不必重复 ( `text`)代码三次？`moreText``evenMoreText``.addVerifyListener(new VerifyListener() {...`

我不想实现 switch 语句或类似语句（以决定将其应用到哪个文本框），我想要更通用的东西（我也许可以让其他类在将来使用）。

```
text.addVerifyListener(new VerifyListener() {
  @Override
  public void verifyText(VerifyEvent e) {
    final String oldS = text.getText();
    final String newS = oldS.substring(0, e.start) + e.text + oldS.substring(e.end);

    try {
      BigDecimal bd = new BigDecimal(newS);
      // value is decimal
      // Test value range
    } catch (final NumberFormatException numberFormatException) {
      // value is not decimal
      e.doit = false;
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:29:15.763

`VerifyListener`预先定义并`Text`从中获取实际值`VerifyEvent`：

```
VerifyListener listener = new VerifyListener()
{
    @Override
    public void verifyText(VerifyEvent e)
    {
        // Get the source widget
        Text source = (Text) e.getSource();

        // Get the text
        final String oldS = source.getText();
        final String newS = oldS.substring(0, e.start) + e.text + oldS.substring(e.end);

        try
        {
            BigDecimal bd = new BigDecimal(newS);
            // value is decimal
            // Test value range
        }
        catch (final NumberFormatException numberFormatException)
        {
            // value is not decimal
            e.doit = false;
        }
    }
};

// Add listener to both texts
text.addVerifyListener(listener);
anotherText.addVerifyListener(listener); 
```

* * *

如果您也想在其他地方使用它，请创建一个新类：

```
public class MyVerifyListener implements VerifyListener
{
    // The above code in here
} 
```

然后使用：

```
MyVerifyListener listener = new MyVerifyListener();

text.addVerifyListener(listener);
anotherText.addVerifyListener(listener); 
```

# matlab - XLSREAD 无法在 MATLAB R2012 中读取文件

> ID：13973135
> 
> 赞同：3
> 
> 时间：2012-12-20T13:21:02.050
> 
> 标签：matlab, ubuntu

我有一个 excel 文件，它包含大约 10,000 行，大小约为 800KB

当我尝试使用 GUI 导入工具或使用 XLSREAD 将数据导入 MATLAB 时，我收到以下消息：

```
Could not open the spreadsheet. MATLAB reported the following error:
XLSREAD unable to read sheet "Sheet1"
File contains unexpected record length. Try saving as Excel 98 
```

我尝试保存为 excel 98，但没有帮助？...有趣的是，我可以导入其他大于 10,000 行和 800KB 大小的 excel 文件？！...

想法？=) 我的 excel 文件不应该包含任何特殊的东西，只是数字数据列，标题由文本组成......

**更新 ！**

似乎只有当我在 Ubuntu 12.10 中使用 MATLAB 时才会出现这种情况......当我在 Windows XP 中尝试它时它工作得很好......？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-18T20:33:41.080

我知道已经过去了一段时间，但我在 Ubuntu 16.04 和 MATLAB R2016a 上遇到了同样的问题。就我而言，删除列没有用。

我的解决方案是将 excel 文件从 .xls 更改为 .xlsx 并再次使用 xlsread 尝试（当然要更改路径）。如果它以 Microsoft 格式保存，请不要问我为什么它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:47:11.583

尝试删除工作表中的所有空列/行，并在数据**后**显式删除几列/行。Matlab 似乎对“空”列/行有[问题。](http://www.mathworks.com/matlabcentral/newsreader/view_thread/59269)

# javascript - 如何摆脱“您确定要离开此页面”的消息？

> ID：13973136
> 
> 赞同：7
> 
> 时间：2012-12-20T13:21:00.723
> 
> 标签：javascript, internet-explorer, firefox, opera

如何摆脱“您确定要离开此页面”的消息？

我尝试使用`window.onBeforeunload=null`它，它适用于 Chrome，但不适用于 Firefox、Internet Explorer 和 Opera。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T18:46:25.990

我不确定为什么您的脚本在 Chrome 中运行，所有浏览器的行为都应该与此相同。是否有可能，您删除事件侦听器的代码块出于某种原因仅在 Chrome 中执行？

无论如何，如果你设置`window.onbeforeunload = someFunction;`了，你可以用`window.onbeforeunload = null`. 但是，如果您设置`window.addEventListener('beforeunload', someFunction);`，则无法使用 删除此事件侦听器`window.onbeforeunload = null`。它只能用 删除`removeEventListener('beforeunload', someFunction);`。

如果此答案没有帮助，请发布所有相关代码，例如分配事件侦听器时的代码片段，以及尝试删除它时的代码片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-21T15:30:36.910

使用 jQuery

```
$(window).off('beforeunload'); // tested in IE 11 and Chrome 62 
```

* * *

## 回答 #3

> 赞同：-11
> 
> 时间：2014-01-22T07:06:41.343

清除我的浏览历史，似乎有帮助。

# java - 以 dd.mm.yyyy 格式从 ms 访问中选择日期

> ID：13973144
> 
> 赞同：3
> 
> 时间：2012-12-20T13:21:32.310
> 
> 标签：java, sql, ms-access, ms-access-2003

我想使用 select 命令从数据库中选择数据，但结果以 yy.mm.dd 格式显示，而我想要 dd mm yy 格式的结果我使用以下逗号

```
 select  date from table1 order by date desc; 
```

我怎样才能得到 dd mm yyyy 格式的日期请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:24:00.927

您需要[为 date 用户格式化功能](http://www.techonthenet.com/access/functions/date/format.php)。

`select format([date], "dd.mm.yyyy") from table1 order by [date] desc;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T13:24:17.440

您应该避免将日期作为字段名称，因为它是保留字。

```
select  Format([date],"dd/mm/yyyy") as Dt from table1 order by [date] desc; 
```

我的感觉是，您应该将该字段作为日期保存到最后，并将其呈现为最终形式/报告/任何内容。使用 Format() 会将其更改为字符串，并且不再正确排序或添加。例如，在 Access 中，可以保持原样，而是修改绑定到该字段的 Control 的 Format 属性。既然你用 [Java] 标记了你的问题，我不能告诉你更多......

# performance - 使用 INDEX 滚动光标到第一个搜索结果

> ID：13973147
> 
> 赞同：1
> 
> 时间：2012-12-20T13:21:35.023
> 
> 标签：performance, postgresql, indexing, cursor

**问题：** *我想为我的用户提供一个类似 Excel 网格的客户端应用程序。该客户端通过网络连接访问 PostgreSQL 服务器。客户端提供“查找”功能。“查找”功能不是过滤并仅显示匹配结果，而是跳转到网格中的第一个匹配行。（如 Excel 中的“查找”功能）*

为了减少带宽使用并防止蹩脚的 LIMIT/OFFSET-Selects，我将 PostgreSQL 与服务器端游标一起使用以允许滚动排序表：

```
BEGIN WORK; 
DECLARE mCursor SCROLL CURSOR FOR 
    SELECT * 
    FROM table 
    ORDER BY xyz 
```

每次客户端在网格中滚动时，通过调用 Move/Fetch 来处理结果数据的滚动和检索：

```
MOVE FORWARD/BACKWARD <offset> IN mCursor; FETCH 40 FROM mCursor; 
```

现在我想添加“查找”功能女巫使用索引来查找第一个匹配的结果偏移量。我知道集成此功能的唯一方法是打开一个新连接并运行以下查询，然后将光标移动到返回的 rowNo：

```
SELECT t.rowNo 
FROM (
    SELECT ROW_NUMBER() OVER (ORDER BY ColumnName ASC) AS rowNo 
    FROM table
) t 
WHERE t.ColumnName LIKE 'xyz%' 
LIMIT 1 
```

问题：这个查询非常慢，因为它不能使用索引（大约 300k 行需要 2-3 秒）。

还有其他方法可以更有效地集成此任务吗？

也许通过直接从索引数据中读取偏移量？或者通过在光标中启动查询？或者是否有允许此功能的数据库系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:53:44.000

仅当模式以 . 开头时，才可能使用索引`%`。

我想问题不在于它不能使用索引，而是它必须扫描整个索引以枚举所有表行。显示解释。

这会将索引扫描限制为搜索到的模式

```
SELECT min(t.rowNo)
FROM (
    SELECT 
        ROW_NUMBER() OVER (ORDER BY ColumnName ASC) AS rowNo, 
        ColumnName 
    FROM table
    where ColumnName <= 'xyz' || repeat('z', 100) -- Get all possible like 'xyz%'
) t 
WHERE t.ColumnName LIKE 'xyz%' 
```

# spring - 程序化身份验证

> ID：13973148
> 
> 赞同：0
> 
> 时间：2012-12-20T13:21:39.333
> 
> 标签：spring, spring-security

我在我的应用程序中使用 Spring Security。

我已经保护了所有页面。但是系统用户和匿名用户都需要有几个 URL。

但匿名用户不应直接访问这些 URL。他得到一个带有唯一令牌的链接，如果这个令牌是有效的，他就可以访问一些 URL。我想做的是：

1.  在控制器中检查 URL 中的令牌是否有效
2.  如果是 - 使用一些预定义的登录名和密码以编程方式验证系统中的用户。此用户将被配置为有权访问必要的 URL。

问题是：如果令牌有效，这是一种以编程方式在控制器中使用某些角色执行用户身份验证的正确方法吗？这是安全的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:43:02.987

安全是一个方面。一个切面可以从你的主代码（控制器）中解耦，以减少代码重复并提高灵活性。将身份验证代码从控制器移动到新过滤器（确保此过滤器在弹簧安全过滤器链之后执行）。您将能够通过 web.xml（零行代码）保护新 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:14:14.450

我认为更好的方法是：

*   将共享操作移至服务层
*   为这些匿名用户定义一个控制器并将其权限设为匿名
*   检查此控制器中令牌的有效性
*   如果有效，则调用一些服务方法来执行操作。
*   在这个控制器中渲染结果

# c++ - 在模板中发现对象的类型

> ID：13973149
> 
> 赞同：1
> 
> 时间：2012-12-20T13:21:43.040
> 
> 标签：c++, templates

有没有比使用 dynamic_cast 更优雅的方法来发现模板参数的类型。前任

```
template< typename TypeA, typename TypeB >
bool foo( TypeA* x, TypeB* y )

if( dynamic_cast< WantedType* >( x ) != NULL ) // More ellegant way of doing this
   // found specific type, setting its stuff 
```

也许是一种专业化`template< WantedType TypeA, ... >`，但这会导致重复的代码来做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:38:56.110

`std::is_same<A,B>::value`告诉你 A 和 B 是否是同一类型。

但是，您很可能犯了错误。

`dynamic_cast`用于检查实例的运行时类型，这与许多上下文中同一变量的编译时类型不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:42:23.210

这是另一种选择，它可能更符合您最初的思路（并不是说这是最好的方法）：

尝试使用方法`typeid()`, ( `#include <typeinfo>`)。

鉴于您的代码，您可以这样做

```
if ( typeid( x ).name() == typeid( wantedType ).name() ) { ... 
```

WantType 是`int`，`char`或者其他什么。

**编辑**

看看：http: [//msdn.microsoft.com/en-us/library/fyf39xec%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/fyf39xec%28v=vs.80%29.aspx)

似乎参数`typeid`可以是任何对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:26:31.660

> 也许是一个专业化模板< WantedType TypeA, ... >

重载或专业化绝对是要走的路。其他一切都是hacky，使代码更加复杂。

> 但这会导致重复的代码做同样的事情。

理想情况下不应该。如果您已经正确分解了函数，那么只有最少的代码重复（= 函数头）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T13:32:32.283

您可以使用模板专业化进行编译时检查：

```
template <typename A>
class IsClassWantedType 
{
  public:
    static const bool value = false;
}

template <>
class IsClassWantedType <WantedType>
{
  public:
    static const bool value = true;
}

template< typename TypeA, typename TypeB >
bool foo( TypeA* x, TypeB* y )
{

  if( IsClassWantedType<TypeA>::value == true )
  {
    //Do Stuff
  }

} 
```

请注意，这里没有多态性......它不会检查派生类型。
对于派生类型，您必须使用更复杂的**[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)**技巧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T13:57:19.870

你可以用它`typeid(t).name()`来做到这一点。

示例代码：

```
#include <string>
#include <sstream>
#include <iostream>
#include <typeinfo>
using namespace std;

template <class T>
string toString(const T& t)
{
    std::stringstream ss;
    ss << t;

    cout<<"The Datatype is a "<< typeid(t).name()  <<" \n";

    return ss.str();
}

int main(void)
{

    string str;

    char c=123;
    str=toString(c );

    int i=1234;
    str=toString(i );

    double d=1234;
    str=toString(d );

  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
} 
```

输出：

```
The Datatype is a char
The Datatype is a int
The Datatype is a double 
```

# asp.net - 在 linq 查询“where”关键字中使用 ArrayList 作为过滤器

> ID：13973150
> 
> 赞同：3
> 
> 时间：2012-12-20T13:21:49.787
> 
> 标签：asp.net, linq

我在 ArrayList 中有一些数据，我想使用 where 子句过滤我的 Linq 查询。

下面我的 Linq 代码连接了两个表，然后我使用 Where 子句过滤它们。现在我想通过使用 Arraylist 作为过滤器来进一步过滤这个查询。所以值来自arraylist

我希望“where”子句再进行一次比较，值来自一个数组列表：

```
where rType.Field<string>("ProfSSCMName") == lbProfiles.SelectedValue && rType.Field<string>("Name") == lbHWTypes.SelectedValue && **arrayList.Tostring()** 
```

这是我正在使用的代码。

谁能告诉我如何使用 arraylist 中的值进一步过滤我的 Linq 查询？

```
joined = from rType in ds.Tables["HWTypes"].AsEnumerable()
         join rStock in ds.Tables["Stock"].AsEnumerable()
         on rType.Field<string>("ProductID") equals rStock.Field<string>("Partno")
         where rType.Field<string>("ProfSSCMName") == lbProfiles.SelectedValue && rType.Field<string>("Name") == lbHWTypes.SelectedValue
         select new
         {
             TagNumber = rStock.Field<string>("TagNumber"),
             SerialNumber = rStock.Field<string>("SerialNumber"),
             Partno = rStock.Field<string>("Partno"),
             PartType = rStock.Field<string>("PartType"),
             EcopartSubtype = rStock.Field<string>("EcopartSubtype"),
             AzertyQuerty = rStock.Field<string>("Azerty/Querty"),
             ProductID = rType.Field<string>("ProductID"),
             Name = rType.Field<string>("Name"),
             SCCMKeyboard = rType.Field<string>("SCCMKeyboard"),
             DisplayName = rType.Field<string>("DisplayName"),
             ProfSSCMName = rType.Field<string>("ProfSSCMName"),
             TagNameDisplayName = rStock.Field<string>("TagNumber") + " " + rType.Field<string>("DisplayName")

             // add the other columns you need here
         }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:33:56.660

您似乎正在使用 Linq-To-Objects。所以你可以在 arraylist 上使用 contains

```
where rType.Field<string>("ProfSSCMName") == lbProfiles.SelectedValue 
&& rType.Field<string>("Name") == lbHWTypes.SelectedValue 
&& arrayList.Contains( rType.Field<string>("Name") ) 
```

# blackberry - 专注于整个屏幕的位图字段

> ID：13973155
> 
> 赞同：0
> 
> 时间：2012-12-20T13:22:28.117
> 
> 标签：blackberry, bitmap, focus

我`BitmapFields`在 one 上添加了 2（左右箭头）`HorizontalFieldManager`，但是当我单击 HFM 上的任意位置时，BitmapFields 获得焦点并显示它已被选中。

我不想在任何地方显示焦点，直到它没有点击`BitmapFields`。

以下是它的代码：

```
bmfBottomRight = new BitmapField(bmpBottomRightFocused, FOCUSABLE) {
                protected boolean navigationClick(int status, int time) {
                    int fieldIndex = getCurrentFieldIndex();
                    if (fieldIndex < (surveyList.size() - 1))
                        updateIncrField(fieldIndex);
                    return super.navigationClick(status, time);
                }
            };

            bmfBottomLeft.setPadding(5, 0, 5, ((Display.getWidth() - bmfBottomRight.getPreferredWidth()) >> 1) - bmfBottomRight.getPreferredWidth()); 
```

我正在为它设置填充..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:09:36.613

已添加空字段`new NullField(Field.NON_FOCUSABLE)`。并在左右两边添加了两个不同的空域`bitmap field`。因此，仅在点击位图字段时，我就可以将注意力集中在位图字段上。

# javascript - 如何将 javascript 对象数组转换为我想要的对象属性的字符串数组？

> ID：13973158
> 
> 赞同：106
> 
> 时间：2012-12-20T13:22:47.957
> 
> 标签：javascript

> **可能重复：**
> [访问对象数组的属性](https://stackoverflow.com/questions/8281824/accessing-properties-of-an-array-of-objects)

鉴于：

```
[{
    'id':1,
    'name':'john'
},{
    'id':2,
    'name':'jane'
}........,{
    'id':2000,
    'name':'zack'
}] 
```

什么是最好的获得方式：

```
['john', 'jane', ...... 'zack'] 
```

我必须循环并推`item.name`送到另一个数组，还是有一个简单的函数可以做到这一点？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-12-20T13:25:09.693

如果您的对象数组是`items`，您可以执行以下操作：

```
var items = [{
  id: 1,
  name: 'john'
}, {
  id: 2,
  name: 'jane'
}, {
  id: 2000,
  name: 'zack'
}];

var names = items.map(function(item) {
  return item['name'];
});

console.log(names);
console.log(items);
```

文档：**[`map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-20T13:25:13.687

在 JavaScript 数组上使用[`map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)native 函数：

```
var yourArray = [ {
    'id':1,
    'name':'john'
},{
    'id':2,
    'name':'jane'
}........,{
    'id':2000,
    'name':'zack'
}];

var newArray = yourArray.map( function( el ){ 
                                return el.name; 
                               }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T13:30:27.563

您可以这样做以仅监视对象的自身属性：

```
var arr = [];

for (var key in p) {
    if (p.hasOwnProperty(key)) {
        arr.push(p[key]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:25:19.100

您可以使用此功能：

```
function createStringArray(arr, prop) {
   var result = [];
   for (var i = 0; i < arr.length; i += 1) {
      result.push(arr[i][prop]);
   }
   return result;
} 
```

只需传递对象数组和您需要的属性。上面的脚本甚至可以在旧的 EcmaScript 实现中工作。

# java - jsf数据表分页器和过滤器冲突

> ID：13973160
> 
> 赞同：0
> 
> 时间：2012-12-20T13:22:56.940
> 
> 标签：java, ajax, jsf, primefaces

我有数据表过滤器和分页器的问题。这是我的数据表：

```
<p:layoutUnit position="center">
            <h:form>  
                <p:dataTable id="dataTable" var="car" value="#{myProjects.projects}" widgetVar="carsTable" emptyMessage="Eşleşme Yok." filteredValue="#{myProjects.filteredProjects}" >  

                    <f:facet name="header">  
                        <p:outputPanel>  
                            <h:outputText value="Dahil Olduğunuz Projeler" />
                            <p:inputText id="globalFilter" onkeyup="carsTable.filter()" style="float: right" />
                                <h:outputText value="Tümünde Ara:" style="font-size: 18px; float: right; height: 28px; margin-top: 5px; margin-right: 5px;"/>  
                        </p:outputPanel>  
                    </f:facet>  

                    <p:column id="sectorColumn" filterBy="#{car.sector}"   
                              headerText="Sektör" footerText="Sektör"  
                              filterMatchMode="contains">  
                        <h:outputText value="#{car.sector}" />  
                    </p:column>

                    <p:column id="projectNameColumn" filterBy="#{car.projectName}"   
                              headerText="Proje Adı" footerText="Proje Adı"  
                              filterMatchMode="contains">  
                        <h:outputText value="#{car.projectName}" />  
                    </p:column>

                    <p:column id="startDateColumn" filterBy="#{car.startDate}"   
                              headerText="Başlangıç Tarihi" footerText="Başlangıç Tarihi"  
                              filterMatchMode="contains">  
                        <h:outputText value="#{car.startDate}" />  
                    </p:column>

                    <p:column id="endDateColumn" filterBy="#{car.endDate}"   
                              headerText="Bitiş Tarihi" footerText="Bitiş Tarihi"  
                              filterMatchMode="contains">  
                        <h:outputText value="#{car.endDate}" />  
                    </p:column>

                    <p:column id="lastStatsColumn"  
                              headerText="Bitiş Tarihi" footerText="Bitiş Tarihi"  
                              >  
                        <h:outputText value="#{car.lastStats}" />  
                    </p:column>

                </p:dataTable>  

            </h:form>  
        </p:layoutUnit> 
```

当我将 paginator="true" 添加到我的 p:datatable 时，它​​在开头显示，并且过滤也可以。但是，当我开始删除字母时，它不会回滚到它的第一个状态。

它在没有分页器的情况下工作。但我需要分页器。

# objective-c - 如何通过触摸 UIView 来降低旋转图像的速度？

> ID：13973164
> 
> 赞同：3
> 
> 时间：2012-12-20T13:23:19.237
> 
> 标签：objective-c, ios, cocoa-touch, cabasicanimation

嗨，我是`Iphone`开发新手。我正在创建一个可变速度的旋转图像动画。我如何获得变速但现在我想通过触摸保持来降低速度`UIView`。我没有任何想法。那么，有人可以帮助我吗？我可以得到一些代码片段吗？

我在下面添加了一些代码片段

```
CABasicAnimation* rotationAnimation;

    rotationAnimation =
    [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    rotationAnimation.fromValue = [NSNumber numberWithFloat: M_PI *2.0 * appDelegate.direction];
    rotationAnimation.repeatCount = 1;
    rotationAnimation.duration = interval;
    rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    rotationAnimation.fillMode = kCAFillModeForwards;
    rotationAnimation.removedOnCompletion = YES;
    [imgv.layer addAnimation:rotationAnimation forKey:@"rotation"];

    if(count<=repeatcount)
    {
        [self performSelector:@selector(funTime) withObject:nil afterDelay:interval];
        isNotRotating = TRUE;
        interval = interval + addTime;
        addTime = addTime+0.001;
        lblCount.text = [NSString stringWithFormat:@"%d",count];
        count++;
        NSLog(@"duration to rotate a single rotation %f",(interval+((repeat-1) *0.10)/repeat));
    }
    else
    {
        tap=0;
        isNotRotating= TRUE;
        [imgv.layer removeAllAnimations];
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:54:12.753

我认为您在检测 UIView 上的长时间触摸时遇到问题？尝试自定义你自己的 UIView 的这些方法

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event

- (void) touchesEnded... 
```

...ETC

# c++ - Mac OS X 上的 Qt：如何摆脱 QListView 的蓝色轮廓？

> ID：13973165
> 
> 赞同：3
> 
> 时间：2012-12-20T13:23:20.550
> 
> 标签：c++, python, css, macos, qt

我正在使用`QListView`带有自定义背景图像的图像，并且我想摆脱 OS X 上 QListView 周围出现的蓝色轮廓边框。

我尝试使用以下方式对其进行样式设置：

```
border: 0 none;
outline: 0 none;
border-collapse: collapse; 
```

但它仍然出现。

我需要做什么才能摆脱这种蓝色色调？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T18:54:57.120

这应该有效：

```
yourListView->setAttribute(Qt::WA_MacShowFocusRect, false); 
```

# java - 将用户定义的列表从休眠传递到 oracle 存储过程

> ID：13973167
> 
> 赞同：0
> 
> 时间：2012-12-20T13:23:29.817
> 
> 标签：java, oracle, hibernate, stored-procedures, orm

我想从我的休眠类传递一个用户定义的对象并将其传递给一个存储过程，该过程读​​取这个对象列表并进行处理。我该怎么做？

类如下。

```
public class ExcelListenerBean {
    private int id;
    private String shortName;
    private String fmrCusip;
    private Double incorrectTrdShares;
    private Double incorrectTrdPrice;
    private String incorrectTrdBuySell;
    private Double incorrectTrdCommRate;
    private Double incorrectTrdCommission;
    private Double incorrectTrdFees;
    private Double incorrectTrdNet;
    private Double correctionTrdShares;
    private Double correctionTrdPrice;
    private String correctionTrdBuySell;
    private Double correctionTrdCommRate;
    private Double correctionTrdCommission;
    private Double correctionTrdFees;
    private Double correctionTrdNet;
    private String currency;
    private String fx;
    private Double netUSD;
    private String notes;
} 
```

任何人都可以让我知道如何起草程序以及如何遍历 ExcelListenerBean 对象列表并将它们保存到表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:35:24.297

1.  创建 OBJECT 类型，例如`MyType is OBJECT ....`在 Oracle 中具有您需要的所有字段
2.  创建集合类型，`TableOfMyObject IS TABLE OF MyObjectType`
3.  创建`TableOfMyObject`作为参数的过程。

您可以在存储过程中的 SQL 语句中使用集合变量，例如 `SELECT * FROM TABLE(collection_variable)`

我也这样做了，但最大的挑战是使用 hibernate 从应用程序中调用它——[我终于找到了这样做的方法。](http://stackoverflow.com/questions/10819104/call-oracle-stored-procedure-from-java-app-using-hibernate-and-c3p0-connection-p)

**更新** 可从 Toad 运行的 SQL。

```
set serveroutput on; -- for debugging, 
-- it makes sense if your procedure outputs anything
declare my_list TableOfMyObject  := TableOfMyObject ();
begin 
  my_list.extend;
  my_list(1) := MyType([MyType constructor parameters]);

  my_list.extend;
  my_list(2) := MyType([MyType constructor parameters]);
  your_procedure(my_list);
end; 
```

# asp.net - 无法在 IE 中下载 base64 编码文件

> ID：13973174
> 
> 赞同：1
> 
> 时间：2012-12-20T13:24:01.040
> 
> 标签：asp.net, ajax, internet-explorer, download

我有以下 Ajax 调用：

```
 $.ajax({
    type: 'POST',
    url: 'AJAX.aspx/DownloadFile',
    data: {},
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data)
    {
        window.location.href = 'data:txt/octet-stream;base64, ' + data.d;
    },
    error: function (x, e)
    {
        alert("The call to the server side failed. " + x.responseText);
    }
}); 
```

这是我的服务器端代码：

```
[WebMethod]
public static string DownloadFile(){
    HttpResponse response = HttpContext.Current.Response;
    response.AppendHeader("Content-Disposition", "attachment;filename=b.txt");
    FileStream fs = new FileStream("C:/b.txt", FileMode.OpenOrCreate);
    byte[] data=new byte[fs.Length];
    fs.Read(data, 0, (int)fs.Length);        
    fs.Close();
    return Convert.ToBase64String(data);
} 
```

我这里有两个问题：

1.  在 Opera、Firefox 和 Chrome 中，我可以下载由服务器发送的 base64 二进制数据组成的文件。它们唯一的问题是文件名是浏览器默认的。在 Opera 中是“默认”，在 Chrome 中是“下载”，在 Firefox 中是这样的：“lpyQswKF.part”。如何手动分配名称？

2.  在 IE 中我收到以下错误：“无法显示网页。此网页上的某些内容或文件需要您未安装的程序。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:12:05.627

您可以像这样分配文件名：

```
var a = document.createElement("a");

a.download = "file name";

a.href = 'data:txt/octet-stream;base64,' + data.d;

document.body.appendChild(a);

a.click(); 
```

我仍在寻找如何让它在 IE 中工作

# css - 带有参数语法错误的 LESS mixin

> ID：13973179
> 
> 赞同：0
> 
> 时间：2012-12-20T13:24:26.120
> 
> 标签：css, internet-explorer-7, less

我有以下 mixin 可以调整项目的宽度和填充，以应对 IE7 缺乏对 box-sizing:border-box 的支持。它给了我一个关于 & .width(@width: 100, @paddinglr: 0) 的语法

我很欣赏这缺少一个 % 但任何想法为什么它会破坏？

```
.width(@width: 100, @paddinglr: 0) {
  width: @width;
  padding: @paddinglr;
}

body {
&.lt-ie8 {
    & .width(@width: 100, @paddinglr: 0) {
        width: @width-@paddinglr;
        padding: @paddinglr;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:28:45.847

您不能将 mixin 定义为选择器字符串，因此`& .width()`对于您的嵌套部分不能是 mixin 定义（这是您尝试做的）。

我认为您要做的是制作一个通用的`.width()`mixin 以在任何特定元素上使用。看来您打算只为 设置一个数字`padding`，这很好。

***但是***，似乎（根据您的`%`评论），您希望此代码产生一个`width`值，该值是`100%`父级减去`padding`. 这也没关系，假设您也使用*百分比*。`padding`如果您不是，而是打算将其`padding`设为像素值，*则 LESS 无法*像您预期的那样完成混合单元，因为 LESS 是一个*预处理器*，因此从能够检测`width`到父级基于运行时的百分比，然后减去`padding`像素值。

*现在，如果您的意图是百分比，或者两者* 的任何相等的测量值`width`和`padding`（无论是两者`px`，两个`em`单位等），那么您可以通过各种方式得到您想要的。许多解决方案之一是覆盖嵌套中的`.width()`mixin `.lt-ie8`，例如：

```
.width(@width: 100%, @paddinglr: 0) {
  width: @width;
  padding: @paddinglr;
}

body {

.someDiv {
   .width(100%, 10%);
}

&.lt-ie8 {
    /* here is the override of the mixin */
    .width(@width: 100%, @paddinglr: 0) {
    /* note, I believe you will want to multiply the padding by 2 for the width change due to left and right padding */
        width: @width - (2 * @paddinglr);
        padding: @paddinglr;
    }
    /* and here is the override of the actual css */
    .someDiv {
        .width(100%, 10%);
    }
  }
} 
```

这会产生这个 CSS（减去上面只是为了与您交流的评论）：

```
body .someDiv {
  width: 100%;
  padding: 10%;
}
body.lt-ie8 .someDiv {
  width: 80%;
  padding: 10%;
} 
```

# c# - 通过 Rally Web 服务将 TestCases 分配给 TestFolders

> ID：13973182
> 
> 赞同：1
> 
> 时间：2012-12-20T13:24:34.620
> 
> 标签：c#, web-services, soap, rally

我有很多不属于测试文件夹的测试用例的情况。这很好，但我想编写一个应用程序来将这些“孤立”测试用例移动到一个测试文件夹中（主要是为了很容易看到测试是如何进行的）我创建的所有测试用例和测试文件夹在同一个项目中，但出现以下错误；

**验证错误：TestFolder.TestCases 是无效关系。一个或多个工件位于不同的项目中。**

**验证错误：TestCase.TestFolder 是无效关系。一个或多个工件位于不同的项目中。**

这些似乎告诉我，我正在将测试用例分配给不同项目中的测试文件夹 - 但事实并非如此。这是代码片段 - m_currentRallyProject 和 m_workspace 已经通过不同的方法设置

有什么想法吗？

```
public void CreateTestFolderForOrphanedTestCases(HierarchicalRequirement aUserStory, List<TestCase> testCases)
    {
        TestFolder myNewTestFolder = createTestFolder(aUserStory.Name);
        for (int i = 0; i < testCases.Count; i++)
        {
            TestCase myTestCase = (TestCase)testCases[i];
            myTestCase.TestFolder = myNewTestFolder;
            OperationResult myResult =  m_rallyService.update(myTestCase);
            if (hasErrors(myResult))
            {
                updateStatus("Could not set Test Folder for " + myTestCase.FormattedID);
                printWarningsErrors(myResult);
            }
            else
            {
                updateStatus("updated test case " + myTestCase.FormattedID);
            }
        }
    }

    private TestFolder createTestFolder(String testFolderName, TestFolder aParentTestFolder = null)
    {
        TestFolder myNewTestFolder = new TestFolder();
        myNewTestFolder.Name = testFolderName;
        myNewTestFolder.Project = m_currentRallyProject;
        myNewTestFolder.Workspace = m_workspace;

        CreateResult createTestFolderResult = m_rallyService.create(myNewTestFolder);
        if (hasErrors(createTestFolderResult))
        {
            // something went wrong
            Console.WriteLine("Could not create Test Folder");
            printWarningsErrors(createTestFolderResult);
        }
        else
        {
            myNewTestFolder = (TestFolder)m_rallyService.read(createTestFolderResult.Object);
            return myNewTestFolder;
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:32:35.687

从上面的评论中删除答案:)

确保他们在同一个项目中——如果他们在，你不应该收到这个消息。在同一个项目层次结构中不算数。IE 位于当前项目的子项目中的测试文件夹，即使子范围缩小 = true，也算作在不同的项目中。尝试为测试用例和目标测试文件夹添加一些输出项目名称或引用的日志记录。

如果您添加一些日志记录来输出 TestCase 和目标 TestFolder 的项目元数据，请确保同时输出 Name 和 ref - 因为项目名称不能保证是唯一的（不同的 Rally 项目可以具有相同的名称）。

# performance - 外部函数的问题

> ID：13973185
> 
> 赞同：2
> 
> 时间：2012-12-20T13:24:37.310
> 
> 标签：performance, r

我在使用 R 方面很新。我正在尝试按函数`dcor`对矩阵的行对使用（距离相关） 。`outer`我的代码适用于小型测试矩阵（100x100），但我尝试将它应用到真正的测试矩阵（5000 x 700）上，并且花了一个多星期才给我结果。正常吗？有什么建议可以更快地获得结果吗？

代码是：

```
library(energy)
outer (1:n, 1:n, FUN=Vectorize (function (i,j) dcor (a[i,], a[j,]))) 
```

`n`是矩阵的行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:02:02.087

看看数学：`dcor(X, Y)`确实

1.  `X`单独（那些`A_kl`）和`Y`单独（那些`B_kl`）计算昂贵的东西
2.  用 1) 和 2) 的结果做一些便宜的事情

当您`dcor`使用数据中的每个组合（对）行进行调用时，第一个昂贵的步骤将被一遍又一遍地调用：对于每一行，`A_kn`计算相同的总`2*n`次数（或者`n`如果您按照建议使用更智能的双循环，则为次数.) 虽然你真的需要它来计算一次。

结论：编写自己的算法会*更好：*

1.  对于每一行数据，计算`A_kl`
2.  编写一个执行函数最后一步的`dcor`函数：将`A_kl`和`B_kl`作为输入并返回距离相关性，
3.  `outer`按照建议通过或双循环调用该函数。

请注意，每个`A_kn`都是 700×700 维度的矩阵，您将拥有 5000 个矩阵，因此您可能必须选择在速度和内存使用之间取得平衡的次优算法。

# javascript - 是什么导致 /*global module: false*/ 在 grunt.js

> ID：13973186
> 
> 赞同：9
> 
> 时间：2012-12-20T13:24:43.140
> 
> 标签：javascript, node.js, gruntjs

许多 grunt.js-script 以：

```
/*global module:false*/
module.exports = function(grunt) { 
```

但是第一行评论的原因是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T13:26:42.317

它是 JSLint 或 JSHint 的指令。它告诉 JSLint/JSHint 解析器该标识符`module`是在别处定义的，因此它不会抛出错误，告诉您`module`未定义。没有它，解析器将遇到对的引用`module`并认为您正在尝试引用未定义的变量。

来自[JSLint 文档](http://www.jslint.com/lint.html)：

> JSLint 还识别一个`/*global*/`指令，该指令可以向 JSLint 指示此文件中使用的变量是在其他文件中定义的。该指令可以包含一个逗号分隔的名称列表。

和[JSHint 文档](http://jshint.com/docs/)：

> 除了选项之外，您还可以让 JSHint 知道它应该期望哪些全局变量：
> 
> ```
>  /*global DISQUS:true, jQuery:false */ 
> ```
> 
> 在上面的示例中，JSHint 将允许您覆盖`DISQUS`，但如果您尝试覆盖，则会抱怨`jQuery`。

# android - OnClick 带有子项的 LinearLayout（具有 android:duplicateParentState="true"）不会触发该功能

> ID：13973187
> 
> 赞同：4
> 
> 时间：2012-12-20T13:24:44.890
> 
> 标签：android, android-layout

我的布局 XML 如下：

```
<LinearLayout 
        android:id="@+id/leftBtnWrapper"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:paddingRight="25dp"
        android:clickable="true"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true">

        <LinearLayout 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:orientation="vertical"
            android:gravity="center"
            android:duplicateParentState="true">

        <ImageView 
            android:id="@+id/leftImageBtn"
            android:layout_width="wrap_content"         
            android:layout_height="wrap_content"
            android:background="@drawable/btn_navbar"
            android:layout_gravity="center_vertical"
            android:padding="0dp"
            android:clickable="true"
            android:duplicateParentState="true"/>

        </LinearLayout>

         <View 
            android:layout_width="1.5dp"
            android:layout_height="match_parent"
            android:background="@drawable/ver_separator"
            android:layout_marginLeft="1dip"
            android:duplicateParentState="true"/> 
```

我想在点击时触发一个功能`leftBtnWrapper`。但是当我触摸 ImageView 的任何部分时`leftImageBtn`，它不会触发我的功能。任何线索我错过了什么？

编辑：：

通过在左上角采用 framelayout 并应用 frameLayout 的 onClick 来解决。布局如下::

```
<LinearLayout
        android:id="@+id/leftBtnWrapper"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:clickable="true"
        android:gravity="center_vertical"
        android:orientation="horizontal" >

            <ImageView
                android:id="@+id/leftImageBtn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:background="@drawable/btn_navbar"
                android:clickable="true"
                android:duplicateParentState="true"
                android:layout_margin="8dp" />

        <View
            android:layout_width="1.5dp"
            android:layout_height="match_parent"
            android:background="@drawable/ver_separator"
            android:duplicateParentState="true" />
    </LinearLayout>

    <FrameLayout
        android:id="@+id/leftBtnLayer"
        android:layout_width="70dp"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:background="@android:color/transparent"
        android:clickable="true" >
    </FrameLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:36:27.170

如果你想完全点击 leftBtnWrapper 来触发一个函数，为什么不把以下内容添加到你的 leftBtnWrapper

```
android:clickable="true"
android:onClick="functionName" 
```

并删除

```
android:clickable="true" 
```

从所有子布局中。

# python - 具有多个连接的请求

> ID：13973188
> 
> 赞同：14
> 
> 时间：2012-12-20T13:24:47.807
> 
> 标签：python, networking, download, python-requests

我使用 Python Requests 库来下载一个大文件，例如：

```
r = requests.get("http://bigfile.com/bigfile.bin")
content = r.content 
```

大文件以每秒 +- 30 Kb 的速度下载，这有点慢。到大文件服务器的每个连接都受到限制，所以我想建立多个连接。

有没有办法同时进行多个连接来下载一个文件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T13:44:54.690

您可以使用 HTTP[`Range`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)标头仅获取文件的一部分（[此处已针对 python 进行了介绍](https://stackoverflow.com/questions/1798879/download-file-using-partial-download-http)）。

只需启动几个线程并使用每个线程获取不同的范围，您就完成了；）

```
def download(url,start):
    req = urllib2.Request('http://www.python.org/')
    req.headers['Range'] = 'bytes=%s-%s' % (start, start+chunk_size)
    f = urllib2.urlopen(req)
    parts[start] = f.read()

threads = []
parts = {}

# Initialize threads
for i in range(0,10):
    t = threading.Thread(target=download, i*chunk_size)
    t.start()
    threads.append(t)

# Join threads back (order doesn't matter, you just want them all)
for i in threads:
    i.join()

# Sort parts and you're done
result = ''.join(parts[i] for i in sorted(parts.keys())) 
```

另请注意，并非每个服务器都支持`Range`标头（尤其是具有[负责数据获取的 php 脚本的](https://stackoverflow.com/questions/2209204/parsing-http-range-header-in-php)服务器通常不实现对其的处理）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T12:14:12.403

这是一个 Python 脚本，它将给定的 url 保存到一个文件中并使用多个线程来下载它：

```
#!/usr/bin/env python
import sys
from functools import partial
from itertools import count, izip
from multiprocessing.dummy import Pool # use threads
from urllib2 import HTTPError, Request, urlopen

def download_chunk(url, byterange):
    req = Request(url, headers=dict(Range='bytes=%d-%d' % byterange))
    try:
        return urlopen(req).read()
    except HTTPError as e:
        return b''  if e.code == 416 else None  # treat range error as EOF
    except EnvironmentError:
        return None

def main():
    url, filename = sys.argv[1:]
    pool = Pool(4) # define number of concurrent connections
    chunksize = 1 << 16
    ranges = izip(count(0, chunksize), count(chunksize - 1, chunksize))
    with open(filename, 'wb') as file:
        for s in pool.imap(partial(download_part, url), ranges):
            if not s:
                break # error or EOF
            file.write(s)
            if len(s) != chunksize:
                break  # EOF (servers with no Range support end up here)

if __name__ == "__main__":
    main() 
```

如果服务器返回空正文或 416 http 代码，或者响应大小不`chunksize`准确，则检测到文件结尾。

它支持不理解`Range`标头的服务器（在这种情况下，所有内容都在单个请求中下载；为了支持大文件，更改`download_chunk()`为保存到临时文件并返回要在主线程中读取的文件名而不是文件内容本身）。

它允许在单个 http 请求中独立更改并发连接数（池大小）和请求的字节数。

要使用多个进程而不是线程，请更改导入：

```
from multiprocessing.pool import Pool # use processes (other code unchanged) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-28T05:33:30.890

此解决方案需要名为“aria2c”的 linux 实用程序，但它具有轻松恢复下载的优点。

它还假定您要下载的所有文件都列在 location 的 http 目录列表中`MY_HTTP_LOC`。我在一个 lighttpd/1.4.26 http 服务器的实例上测试了这个脚本。但是，您可以轻松修改此脚本，使其适用于其他设置。

```
#!/usr/bin/python

import os
import urllib
import re
import subprocess

MY_HTTP_LOC = "http://AAA.BBB.CCC.DDD/"

# retrieve webpage source code
f = urllib.urlopen(MY_HTTP_LOC)
page = f.read()
f.close

# extract relevant URL segments from source code
rgxp = '(\<td\ class="n"\>\<a\ href=")([0-9a-zA-Z\(\)\-\_\.]+)(")'
results =  re.findall(rgxp,str(page))
files = []
for match in results:
    files.append(match[1])

# download (using aria2c) files
for afile in files:
    if os.path.exists(afile) and not os.path.exists(afile+'.aria2'):
        print 'Skipping already-retrieved file: ' + afile
    else:
        print 'Downloading file: ' + afile          
        subprocess.Popen(["aria2c", "-x", "16", "-s", "20", MY_HTTP_LOC+str(afile)]).wait() 
```

# android - ListView 项在垂直方向上占用剩余空间

> ID：13973191
> 
> 赞同：0
> 
> 时间：2012-12-20T13:24:59.530
> 
> 标签：android

大家好，这里有个小问题。我在 RelativeLayout 中有一个 EditText 和一个 ListView。ListView 由使用 ArrayAdapter 的字符串数组中的项目填充。thr 数组的大小为 5，ListView Items 是一个表格布局，表格行布局参数设置为与 ListView Widget 相同的 Fill_Parent。现在我希望 Listview Items 填满并占用剩余的屏幕空间。但由于它们只是少数项目，它的行为就像使用 wrap_content。任何想法如何伸展这个 ListView 项目？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:05:58.183

试试这个：

```
<ListView
    android:id="@+id/yourListView"
    android:layout_width="fill_parent"
    android:layout_height="match_parent">
</ListView> 
```

# regex - 允许数字和空格的字段的正则表达式

> ID：13973206
> 
> 赞同：34
> 
> 时间：2012-12-20T13:25:31.360
> 
> 标签：regex

我希望文本字段只接受数值和空格。什么是正则表达式？我正在尝试`\d+$` 谢谢

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-20T13:27:13.677

这个应该工作：

```
[0-9 ]+ 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-20T13:28:08.347

`^`为字符串的开头。 `[\d ]*`对于此符号的任何组合。 `$`为字符串的结尾。

`^[\d ]*$`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T13:27:48.730

你会想要使用`[0-9 ]+`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-28T17:06:56.353

如果您只想匹配数字，请使用：

> `(\b\d+)/g`或者`(\b[0-9]+)/g`

其中：
`\b`将匹配边界
`\d`或`[0-9]`匹配数字
`+`将匹配 1 次或多次`\d`（或`[0-9]`）
`/g`打开全局模式，以多次匹配正则表达式

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-09T18:10:36.227

这应该有效。

```
/^[0-9\s]*$/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-16T01:32:14.197

这个正则表达式匹配带空格的数字，不带空格的数字，但不匹配所有数字后面的空格

```
(\s*[0-9]+)+ 
```

# c# - 在分辨率被冻结之前无法返回值（将 Umbraco 版本 4.9.1 升级到 4.11.1）

> ID：13973207
> 
> 赞同：4
> 
> 时间：2012-12-20T13:25:35.547
> 
> 标签：c#, asp.net, umbraco, upgrade

当我将 umbraco V4.9.1 升级到 V4.11.1 时，在最后一步我遇到了问题。我只是覆盖 /bin、/install、/umbraco 和 /umbraco_client 文件夹并运行它。问题是“在分辨率被冻结之前无法返回值”。

请帮我。

![在此处输入图像描述](../Images/54162a1a5b8abc1eaf7bec70f0b53dbc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T05:34:45.657

正如@Dave 链接的那样，问题的实际根源来自 Global.asax.cs 没有从 Umbraco.Web.UmbracoApplication 类继承。

我知道这是一篇旧帖子，但没有得到答复，此时的解决方案（评论）并不能解决每个人的问题，因为它甚至不是许多升级用户的选择，因为提到的路线会覆盖那些 global.asax . - 只是想给后代快速标记，所以这个问题可以用一个通用的解决方案来回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T09:20:05.777

尝试以下步骤。，

1.  从服务器中删除 global.asax

2.  刷新站点

3.  在服务器上再次复制 global.asax

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T00:59:38.583

`enter code here`如果您有 Global.asax 文件，如下所示

```
<%@ Application Codebehind="Global.asax.cs" Inherits="Umbraco.Web.UmbracoApplication" Language="C#" %> 
```

![在此处输入图像描述](../Images/a47ab192254b8a270421d548eb586c41.png)

删除您的 Global.asax 并添加全局应用程序类

![在此处输入图像描述](../Images/6d58ceef2b17c42330313febd4c9f436.png)

然后在你后面的代码中，将 System.Web.HttpApplication 更改为 UmbracoApplication

```
 public partial class Global : UmbracoApplication
    {

    } 
```

# python - 焦点事件发生了变化？

> ID：13973211
> 
> 赞同：2
> 
> 时间：2012-12-20T13:25:48.273
> 
> 标签：python, qt, user-interface, pyqt, pyqt4

我正在将我的 Visual Basic 6 程序移植到 PyQt。

我需要一直调用一个函数来设置一些小部件的启用/禁用，我不想调用一个函数太多次，所以我找到了一个事件，当焦点从一个小部件更改为另一个小部件时，我可以调用我的小部件管理器功能。

我在 PyQt 中寻找同样的东西，但没有成功。任何的想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T14:06:44.337

不确定您是在谈论小部件的窗口获得/失去焦点还是嵌入在另一个获得/失去键盘焦点的小部件，但这两种情况都适用

```
class MyWidget(QtGui.QWidget):

    def __init__(self, parent = None):
        super(MyWidget, self).__init__(parent)
        self.installEventFilter(self)

    def eventFilter(self, object, event):
        if event.type() == QtCore.QEvent.WindowActivate:
            print "widget window has gained focus"
        elif event.type()== QtCore.QEvent.WindowDeactivate:
            print "widget window has lost focus"
        elif event.type()== QtCore.QEvent.FocusIn:
            print "widget has gained keyboard focus"
        elif event.type()== QtCore.QEvent.FocusOut:
            print "widget has lost keyboard focus"

        return False 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T14:01:20.563

信号[`QApplication::focusChanged(QWidget * old, QWidget * now)`](http://qt-project.org/doc/qt-4.8/qapplication.html#focusChanged)就是你想要的。

# java - 如何为字符数组传递 PreparedStatement setArray

> ID：13973212
> 
> 赞同：7
> 
> 时间：2012-12-20T13:25:57.790
> 
> 标签：java, jdbc

我有一些JDBC代码如下：

```
String selectSQL = "SELECT * FROM DBUSER WHERE USER_ID = ? and PASSWORD = ?";

Integer userId = 1000;
char[] passwordString = new char[] { 't', 'e', 's', 't' };

PreparedStatement preparedStatement = dbConnection.prepareStatement(selectSQL);
preparedStatement.setInt(1, 1001);
preparedStatement.setArray(2,... ??? // how to do this part?

// execute select SQL statement
ResultSet rs = preparedStatement.executeQuery(); 
```

如何调用`preparedStatement.setArray`设置查询中的第二个参数？我不想在这里使用字符串参数来保护密码。

注意我正在使用 Hypersonic DB，但如果有用的话，我计划转移到 MySql。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T13:30:42.813

[PreparedStatement#setArray](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setArray%28int,%20java.sql.Array%29)收到一个[java.sql.Array](http://docs.oracle.com/javase/7/docs/api/java/sql/Array.html) 首先你应该使用 JDBC Conncetion 的[createArrayOf](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#createArrayOf%28java.lang.String,%20java.lang.Object%5B%5D%29)方法来创建数组，然后你才能将它传递给`setArray`.

由于该方法只接受`Object[]`您应该创建一个数组`Character`而不是 char。

例如：

```
Character[] passwordString = new Character[] { 't', 'e', 's', 't' };
Array sqlArray = con.createArrayOf("CHAR", passwordString);
preparedStatement.setArray(2, sqlArray); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T13:55:57.880

If you want to pass an array in prepared statement just call

`preparedStatemtn.setArray(index,array);`

But what you must assure first is that in your DB the column is also a [ARRAY](http://hsqldb.org/doc/2.0/guide/sqlgeneral-chapt.html#sgc_array). For more detail please see Aviram Sagal answer.

* * *

But your base idead it to protect the password.

This solution will protect only from reading the passoword from Java string pool. This is very ratre type of attact anyway. Ans passoword is transmited as plain text.

My sugestion is that instead of complicating the db schema, you should use some benefits of cryptography. Instaed of passing the password value, you should pass [password digest](http://en.wikipedia.org/wiki/Hash_function).

A simplyfied example of digest function.

```
public static String getDigest(byte[] password) {

  return new String(Hex.encodeHex(new MessageDigest.getInstance("SHA").digest(password)));

} 
```

Then you store in db the digest with is safe and you use simple string in queries.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:30:02.040

看看这段代码

```
final PreparedStatement statement = connection.prepareStatement(
        "SELECT my_column FROM my_table " + 
        "where search_column IN (SELECT * FROM unnest(?))"
);
final String[] values = getValues();
statement.setArray(1, connection.createArrayOf("text", values));
final ResultSet rs = statement.executeQuery();
try {
    while(rs.next()) {
        // do some...
    }
} finally {
    rs.close();
} 
```

也请看这篇文章以供参考[http://people.apache.org/~djd/derby/publishedapi/java/sql/PreparedStatement.html](http://people.apache.org/~djd/derby/publishedapi/java/sql/PreparedStatement.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T13:26:51.093

另一种选择是使用 a[`CharArrayReader`](http://docs.oracle.com/javase/7/docs/api/java/io/CharArrayReader.html)并调用[`statement.setCharacterStream`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html).

```
char[] passwordString = new char[] { 't', 'e', 's', 't' };
statement.setCharacterStream(1, new CharArrayReader(passwordString)); 
```

# php - 从 AJAX 调用的文件中使用 shell_exec 运行 ffmpeg

> ID：13973214
> 
> 赞同：2
> 
> 时间：2012-12-20T13:26:05.363
> 
> 标签：php, ajax, ffmpeg, shell-exec

早上好，

我将尽我所能为所有关于使用 shell_exec 从 AJAX 调用的文件运行 FFMPEG 提出一个“深思熟虑”和“有用”的问题。首先，我将从列出我当前的代码开始。

AJAX 脚本

```
 <script>
            var xmlhttp;
            if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
            }else{// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function(){
              if (xmlhttp.readyState==4 && xmlhttp.status==200){
                  //Do something
              }
            }
            xmlhttp.open("GET","video_convert.php",true);
            xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xmlhttp.send(id=<?php echo $video_upload_result; ?>);
        </script> 
```

PHP 代码

```
$destination = "files/videos/";
$ffmpeg = '/ffmpeg/ffmpeg';
$videoid = mysql_clean($_GET['id']);

$sql = "SELECT file_name FROM cb_video WHERE videoid = '$videoid' ";
$result = mysql_query($sql);
$row = mysql_fetch_assoc($result);

$file_old = glob('files/videos/'.$file_name.'.*');

shell_exec($ffmpeg." -i '/var/www/html/".$file_old[0]."' -ar 44100 /var/www/html/".$destination.$file_name.".flv"); 
```

FFMPEG 已安装并正常工作，因为我在网站的其他地方使用过它并尝试使用 PuTTY 进行文件转换。我能够运行由 AJAX 调用的 PHP 文件，因为我在此站点上的单独实例中完成了它。我唯一能想到的是 shell_exec 没有正常运行，我在其他地方使用过，因为它位于一个由 ajax 调用的单独文件中，否则它会过早关闭。我还在一个主文件中测试了这段代码，它可以正常工作，直到我尝试在其中调用单独的文件。

所以，我的问题是这段代码真的可以工作吗？如果可以，我应该采取哪些步骤来让它工作？

此外，如果我在结束我的问题之前有机会捍卫或改写它们以适当地适应这个委员会的高标准问题，如果我以任何方式失败了，我将不胜感激。

谢谢你。

# visual-studio-2008 - 构建网站时未创建用户控制页面

> ID：13973216
> 
> 赞同：1
> 
> 时间：2012-12-20T13:26:12.877
> 
> 标签：visual-studio-2008

当我构建网站时，我看到除了用户控制文件 usGridview.ascx 之外的所有文件都生成了。

因此，在构建网站后，我手动复制了这个文件并将其放在名为 usercontrol 的控件下，我不确定是什么导致了问题。

我使用 VS 2008, C# 作为平台

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:21:34.633

如果您只是构建该用户控件，您会在 Visual Studio 的输出窗口中看到任何错误吗？

有时，如果一个用户控件的代码是从另一个控件复制而来的，那么 .aspx 页面标记或隐藏代码中的文件类型就会不匹配。尝试以下操作：

1) 确保所有类名、母版页类型正确

2）尝试发布网站而不是构建它。

3) 检查 Build --> Configuration Manager 中的 Build settings 并确保选择了适当的平台设置。

# android - 在 ImageView 上绘制文本不起作用

> ID：13973227
> 
> 赞同：0
> 
> 时间：2012-12-20T13:26:41.753
> 
> 标签：android

我已经扩展了课程`ImageView`并希望在其上绘制一些文本。这不起作用，你知道为什么吗？谢谢你。

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas); 
    int imgWidth = getMeasuredWidth();
    int imgHeight = getMeasuredHeight();
    float txtWidth = mTextPaint.measureText("your text");
    int x = Math.round(imgWidth/2 - txtWidth/2);
    int y = imgHeight/2 - 6; // 6 is half of the text size
    canvas.drawText("your text", x, y, mTextPaint);
}

private void init(Context context, AttributeSet attrs, int defStyle) {
    mTextPaint = new Paint();
    mTextPaint.setColor(android.R.color.black);
    mTextPaint.setTextSize(12);
    mTextPaint.setTextAlign(Paint.Align.LEFT);} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:19:41.400

我运行了您的代码，然后立即出现`Lint`错误。在`init()`你设置你的`mTextPaint`to `android.R.color.black`。因为它是一个静态值，我可以立即看到该`int`变量的实际值为`0x0106000c`，这*几乎*是完全透明的。你应该使用`getResources().getColor(android.R.color.black)`or plain ol' `Color.BLACK`。

请注意，`textSize`12 的 a 非常非常小。此代码显示 12（尽管非常小）。

```
public class MyImageView extends ImageView {
    public MyImageView(Context context, AttributeSet attributeSet, int defStyle) {
        super(context, attributeSet, defStyle);
        init();
    }

    public MyImageView(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
        init();
    }

    public MyImageView(Context context) {
        super(context);
        init();
    }

    Paint mTextPaint;

    private void init() {
        mTextPaint = new Paint();
        mTextPaint.setColor(Color.BLACK);
        mTextPaint.setTextSize(12);
        mTextPaint.setTextAlign(Paint.Align.LEFT);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas); 
        int imgWidth = getMeasuredWidth();
        int imgHeight = getMeasuredHeight();
        float txtWidth = mTextPaint.measureText("your text");
        int x = Math.round(imgWidth/2 - txtWidth/2);
        int y = imgHeight/2 - 6;
        canvas.drawText("12", x, y, mTextPaint);
    }
} 
```

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <com.example.mytest.MyImageView
        android:layout_width="100dp" 
        android:layout_height="100dp"/>
</RelativeLayout> 
```

复制/粘贴，如果问题仍然存在，请开始记录。同样，这段代码有效，我`12`在我的屏幕上看到了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T13:54:08.533

您应该能够在不创建自己的类的情况下实现期望的效果。只需使用可绘制的图像设置 TextView 的背景。请参阅我的示例，其中包含语音气泡中的文本。

```
<TextView
    android:id="@+id/textOverImage"
    android:background="@drawable/speech_bubble"
    android:text="@string/hello_world"
    android:gravity="center"
    android:layout_width="..."
    android:layout_height="..."
    /> 
```

# azure - Windows Azure 支付

> ID：13973231
> 
> 赞同：1
> 
> 时间：2012-12-20T13:26:53.950
> 
> 标签：azure, payment

> **可能重复：**
> [如何设置 Azure Max Spending Limit 或 Cost CAP $ 金额？](https://stackoverflow.com/questions/12787789/how-to-set-azure-max-spending-limit-or-cost-cap-amount)

我有“Windows Azure para Visual Studio Ultimate com MSDN”帐户，是否可以在免费服务后启用限制？示例我希望不使用超过 400 美元/月？当超出免费金额...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:35:36.640

遗憾的是，您无法在 Azure 上重新启用每月支出限制：

> 您可以随时取消支出限额。但是，一旦删除，支出限制功能将无法重新启用

[https://www.windowsazure.com/en-us/pricing/spending-limits/](https://www.windowsazure.com/en-us/pricing/spending-limits/)

# java - 将空对象转换为字符串

> ID：13973233
> 
> 赞同：16
> 
> 时间：2012-12-20T13:27:01.770
> 
> 标签：java, android, string, nullpointerexception, type-conversion

我编写了一个 android 程序来将值从 web 服务加载到表行。但是 value 为 null 所以我需要将其转换为字符串。有人可以告诉我这样做的方法吗？

```
try{                    

    SoapObject request = service.getRequest();
    SoapSerializationEnvelope envelope = service.getEnvelope(request);
    SoapObject response = service.getResponse(envelope);
    Log.i("Service Master", response.toString());
    int count = response.getPropertyCount();
    for (int i = 0; i < count; i++) {
        SoapObject result = (SoapObject) response.getProperty(i);
        DeleteuserDetails deleteuserDetails=new DeleteuserDetails();
        deleteuserDetails.setUserId(result.getPropertyAsString(4));
        deleteuserDetails.setUserName(result.getPropertyAsString(2));
        deleteuserDetails.setUserRole(result.getPropertyAsString(3));
        deleteuserDetails.setCreatedDate(result.getPropertyAsString(1));
        deleteuserDetails.setCreatedBy(result.getPropertyAsString(0));
        userdetail.add(deleteuserDetails);
    } 
```

现在`deleteuserDetails.setCreatedBy(result.getPropertyAsString(0));`从 webservice 获取 null 值，所以我需要将其转换为 string `"null"`。

**日志猫：**

```
12-20 18:48:52.608: W/System.err(2174): java.lang.NullPointerException
12-20 18:48:52.608: W/System.err(2174):     at org.ksoap2.serialization.SoapObject.getPropertyAsString(SoapObject.java:165)
12-20 18:48:52.608: W/System.err(2174):     at com.mvss.admin.Deleteuser$deteUserIdLoad.doInBackground(Deleteuser.java:81)
12-20 18:48:52.608: W/System.err(2174):     at com.mvss.admin.Deleteuser$deteUserIdLoad.doInBackground(Deleteuser.java:1)
12-20 18:48:52.608: W/System.err(2174):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
12-20 18:48:52.608: W/System.err(2174):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-20 18:48:52.608: W/System.err(2174):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-20 18:48:52.608: W/System.err(2174):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
12-20 18:48:52.608: W/System.err(2174):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
12-20 18:48:52.608: W/System.err(2174):     at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-01-08T06:10:12.430

Instead of catching the exception or putting conditions, use `String.valueOf(result.getPropertyAsString(0));`

It will call **toString()** method of the argument and will convert it to String and if result.getPropertyAsString(0) is null, then it will change it to **"null"**.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T13:33:56.487

虽然这不是一个好习惯，但您可以将 null 值与 "" 连接以使其成为字符串。

例如：

```
String str=null;
System.out.println((str+"").length()); /// prints 4 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-20T14:05:17.183

`result.getPropertyAsString(0)`当属性在内部为空时，单独会导致 NPE。您的堆栈跟踪指向的`SoapObject.getPropertyAsString(SoapObject.java:165)`应该是

```
public String getPropertyAsString(int index) {
    PropertyInfo propertyInfo = (PropertyInfo) properties.elementAt(index);
    return propertyInfo.getValue().toString();
} 
```

[source](https://github.com/mosabua/ksoap2-android/blob/master/ksoap2-base/src/main/java/org/ksoap2/serialization/SoapObject.java#L163)`propertyInfo` - 它会在或 `propertyInfo.getValue()`is 时崩溃`null`。

为防止这种情况发生，您需要获取属性，而不是通过`getPropertyAsString`，`getProperty`然后手动将其转换为`String`.

您可以将其封装到一些实用方法中

```
public static String getPropertyAsString(SoapObject object, int index) {
    Object prop = object.getProperty(index);
    if(prop instanceof PropertyInfo) {
        prop = ((PropertyInfo)prop).getValue();
    }
    return String.valueOf(prop); // will make it "null" if it is null
} 
```

然后做

```
deleteuserDetails.setUserId(getPropertyAsString(result, getPropertyAsString(4)));
deleteuserDetails.setUserName(getPropertyAsString(result, getPropertyAsString(2)));
deleteuserDetails.setUserRole(getPropertyAsString(result, getPropertyAsString(3))); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-20T13:29:42.600

尝试这个：

```
deleteuserDetails.setCreatedBy(result.getPropertyAsString(0) == null ? "null": result.getPropertyAsString(0)); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-20T13:34:04.953

用这个，

```
try {
    deleteuserDetails.setCreatedBy(result.getPropertyAsString(0).toString());
}
catch(Exception e) {
    deleteuserDetails.setCreatedBy("null");
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-20T13:29:31.697

```
if(result.getPropertyAsString(0)==null)
{
deleteuserDetails.setCreatedBy("");
}
else
{
deleteuserDetails.setCreatedBy(result.getPropertyAsString(0).toString());
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-12-20T13:29:52.677

您可以简单地检查它是否为空，然后为它设置一个字符串。

```
if(result.getPropertyAsString(0) == null){
 deleteuserDetails.setCreatedBy("NULL");
}else{
 deleteuserDetails.setCreatedBy(result.getPropertyAsString(0));
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-07-16T13:04:50.063

`"Hi this will be " + null;`

在 String 中打印出“Hi this will be null”

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-20T13:29:23.050

取而代之的是，放置条件`if(String!=null)`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-09T08:03:00.447

当您尝试将空值转换为字符串时出现错误（主要是 BigDecimal）

因此，您要做的就是在程序尝试将 null 转换为 String 并为 String 变量手动设置 null 值时捕获异常。

```
try{
    deleteuserDetails.setUserId(result.getPropertyAsString(4));
}catch (Exception e){
    deleteuserDetails.setUserId(null);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-16T12:20:08.313

去 Piggybag 骑@prateek 所说的话。

```
 String str=null;
    System.out.println((str+"")); 
```

不使用 .length 进行操作，这样您实际上就可以打印出字符串

# eclipse - Eclipse CODAN 静态代码分析

> ID：13973234
> 
> 赞同：1
> 
> 时间：2012-12-20T13:27:07.683
> 
> 标签：eclipse, codan

我在 Eclipse CDT 中使用集成的 CODAN 静态代码分析工具。有没有办法将此分析的输出存储在 Eclipse 的“问题”窗口中显示的文件中，该文件存储其格式并存储列，如 Eclipse 问题窗口中所示。

我做了一个“全选”->“复制”和“粘贴”到一个文本文件，但它丢失了所有的列和格式并且难以阅读。

Eclipse 是否有任何选项/设置可以将此静态代码分析输出存储到文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:59:48.710

经过大量搜索后，我发现 Eclipse 没有我在 OP 中要求的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:23:01.730

您必须粘贴到 OpenOffice Calc/Microsoft Excel 和 vola 等程序中！

# winforms - MVP模式中使用Windsor castle进行依赖注入的循环引用问题

> ID：13973238
> 
> 赞同：6
> 
> 时间：2012-12-20T13:27:14.980
> 
> 标签：winforms, dependency-injection, castle-windsor, mvp

使用 Windsor 容器创建以下 MVP 设计（用于 winforms）时，我面临循环依赖问题。

我的演示者取决于视图和模型：

```
ConcretePresenter(IView view, IModel model)
{
    this.view = view;
    this.model = model;
} 
```

我的观点取决于主持人：

```
ConcreteView(ConcretePresenter presenter)
{
    //actual requirement that the presenter use the current instance of the view and a model object 
    //new presenter(this, new model()) 
    this.presenter = presenter;
} 
```

我正在使用温莎城堡（在单独的组合根类中）注册所有组件，如下所示：

```
IWindsorContainer container;
container = new WindsorContainer();
container.Register(Component.For<ConcretePresenter>().ImplementedBy<ConcretePresenter>());
container.Register(Component.For<IModel>().ImplementedBy<ConcreteModel>());                      
container.Register(Component.For<IView>().ImplementedBy<ConcreteView>()); 
```

解决视图带来了循环引用问题：

```
container.Resolve<ConcreteView>(); //doesn't resolve because of cyclic dependency 
```

一种可能的解决方案是从视图中删除构造函数注入并单独解析演示者。 **但这导致我在两个我不想做的地方使用容器，并且可能是错误的。**

```
ConcreteView()
{
    container.Resolve<ConcretePresenter>(); //resolving at 2 different points       
} 
```

有没有更好的解决方案。我在 MVP 本身做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:26:39.497

这个问题有几种解决方案，但它们都通过从构造函数依赖中删除演示者或视图来打破依赖循环。

最简单的解决方案是将视图作为演示者的属性引入：

```
// Presenter
ConcretePresenter(IModel model)
{
    this.model = model;
}

public IView View { get; set; }

// View
ConcreteView(ConcretePresenter presenter)
{
    this.presenter = presenter;
    this.presenter.View = this;
} 
```

这样做的缺点是您需要在将每个演示者注入视图时对其进行配置，因此您也可以将其移至基类：

```
// View
ConcreteView(ConcretePresenter presenter) : base(presenter)
{
}

BaseView(IPresenter presenter)
{
    Contract.Requires(presenter != null);
    presenter.View = this;
    this.Presenter = presenter;
} 
```

另一种选择是将演示者工厂注入视图并从那里请求它：

```
// View
ConcreteView(IPresenterFactory factory)
{
    this.presenter = factory.CreatePresenterFor(this);
} 
```

缺点是这个构造函数调用了一个工厂，这不是最干净的事情，但可以管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:46:59.203

创建一个工厂来实例化您的演示者。您的视图（WinForm）将使用构造函数中的工厂。您可能可以使用 Typed Factory Facility ——这意味着您只需为 Presenter 工厂定义接口，并让该设施完成其余的工作。

# wpf - WPF Datagrid IsReadOnly 绑定到当前行 Item 的属性

> ID：13973247
> 
> 赞同：1
> 
> 时间：2012-12-20T13:28:05.780
> 
> 标签：wpf, mvvm, binding, datagrid

我需要一些可编辑的 DataGrid 行，而另一些则不需要。

```
<DataGrid ItemsSource="{Binding Items.View}" AutoGenerateColumns="False" CanUserAddRows="False" >
    <DataGrid.Columns>
        <DataGridTextColumn IsReadOnly="True" Binding="{Binding Timestamp}" Width="Auto" >
            <DataGridTextColumn.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="{lex:Loc DateTime}" />
                </DataTemplate>
            </DataGridTextColumn.HeaderTemplate>
        </DataGridTextColumn>
        <DataGridTextColumn Binding="{Binding Value}" Width="Auto" >
            <DataGridTextColumn.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="{lex:Loc Value}" />
                </DataTemplate>
            </DataGridTextColumn.HeaderTemplate>
        </DataGridTextColumn> 
```

我的项目中有一个属性 IsEditable。我喜欢这样的东西：

```
<DataGridTextColumn IsReadOnly="{Binding IsEditable, Converter={StaticResource InverseBooleanConverter}}" Binding="{Binding Value}" Width="Auto" > 
```

与此同时，我知道这不可能那么容易。虽然我找不到适合我的问题的解决方案。

**更新**

不是那么重要，但为了更好地理解，我将从视图模型中添加更多数据。

```
private ObservableCollection<MeasuredValue> _last60values;
public ObservableCollection<MeasuredValue> Last60Values
{
    get { return _last60values; }
    set { _last60values = value; }
}

Items = new CollectionViewSource();
Items.Source = Last60Values; 
```

和我的“测量值”

```
 namespace PQS.Model
    {
        public class MeasuredValue : CloneableBaseEntity<MeasuredValue>
        {

        public DateTime Timestamp { get; set; }

        .
        .
        .

        private double _value;
        [Range(0.0, double.MaxValue)]
        public double Value
        {
            get { return _value; }
            set
            {
                _value = value;
                RaisePropertyChanged("Value");
            }
        }

        private bool _isEditable;
        public bool IsEditable
        {
            get { return _isEditable; }
            set 
            {
                _isEditable = value;
                RaisePropertyChanged(() => IsEditable);
            }
        }

    }
} 
```

# php - 带有 IN 子句的 SQL 查询

> ID：13973252
> 
> 赞同：0
> 
> 时间：2012-12-20T13:28:16.950
> 
> 标签：php, mysql, sql, database

我正在处理一个页面，就像 facebook 提要页面一样。所以，我的查询现在看起来像这样：

```
$sql = "SELECT * 
        FROM event 
        WHERE id_user IN (
              SELECT a.id_user_stalkers 
              FROM stalkers a 
              WHERE a.id_user = ".$id_profile.")  
        ORDER by date DESC 
        LIMIT 0, 10"; 
```

潜行者 - 朋友

表跟踪者：

```
id  id_user  id_user_friend 
```

我需要将我的个人 ID 附加到那个 IN 子句，所以我的 qyery 返回我的事件和我的朋友事件。

有谁能够帮我 ？

我试过的

```
 $sql = "SELECT * 
         FROM event 
         WHERE id_user IN (
               SELECT a.id_user_stalkers 
               FROM stalkers a  
               WHERE a.id_user = ".$id_profile.") 
        OR id_user = ".$id_profile."  
        ORDER by date DESC 
        LIMIT 0, 10"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:43:58.060

它在你的 sql 和你的表中看起来有问题

1-在你的表`id_user_friend`和你正在制作的 sql 中`id_user_stalkers`。

2-我不知道你的第一张桌子上是否有日期，或者你的意思是`NOW()`.? 因为你没有分享第一张桌子。

尝试这个

```
 $sql = "SELECT * FROM event e WHERE id_user 
           IN (SELECT a.id_user_friend FROM stalkers a  
           WHERE a.id_user = ".$id_profile.")
            OR e.id_user = ".$id_user." 
          ORDER by e.date DESC LIMIT 0, 10"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:27:11.423

什么是 $id_user ？原始查询只有一个变量。我不明白你为什么需要另一个。换句话说，试试这个：

```
SELECT *
FROM event e
WHERE id_user IN (SELECT a.id_user_friend
                  FROM stalkers a  
                  WHERE a.id_user = ".$id_profile."
                 ) OR
     e.id_user = ".$id_profile." 
ORDER by e.date DESC LIMIT 0, 10 
```

# html - 当我单击它时，有没有办法防止按钮“向下”移动？

> ID：13973253
> 
> 赞同：0
> 
> 时间：2012-12-20T13:28:26.857
> 
> 标签：html, button, move

当您按下按钮使用 HTML`<button>`时，它会移动一点。一个小动画来显示它实际上是一个按钮。

我正在寻找一种让它保持原样的方法，并使用鼠标事件强制我的动画。

我开始只是放置一个`<img>`并使用`mouse events`来交换图片。这很好用，除了它有一些我似乎无法摆脱的副作用。对于初学者，可以拖动图片，如果只是按下按钮 - 按住 - 并决定要离开按钮，这看起来很奇怪。我可以关闭“可拖动”，但它会显示一个蓝色方形选择框，这是非常不需要的。

我的解决方案是把它放在一个`<button>`元素上（隐藏背景和边框）。这解决了所有问题，除了它稍微向一边摆动。我尝试禁用它，但这也禁用了 javascript 事件。

即使单击按钮，如何强制按钮保持原位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:39:12.973

因此，您必须使用按钮以外的其他标签（例如 span）并使用 javascript 操作它的行为。

# notepad++ - Notepad ++在缩进中保持空格

> ID：13973255
> 
> 赞同：6
> 
> 时间：2012-12-20T13:28:36.703
> 
> 标签：notepad++, indentation

在记事本++中按回车键创建新行时，是否可以获得新行的前一行的确切缩进？无论我尝试过什么，Notepad++ 总是会用制表符替换尽可能多的空格。

例如，假设我有以下内容（---> 是制表符，. 是空格，| 是光标）：

```
--->--->a_very_long_variable_name = another_long_name
--->--->..........................+ yet_another_variable|; 
```

假设我想在新行上添加第三个操作数。按 Enter 后，我会期待以下内容：

```
--->--->a_very_long_variable_name = another_long_name
--->--->..........................+ yet_another_variable
--->--->..........................|; 
```

不幸的是，Notepad++ 实际产生的是这样的：

```
--->--->a_very_long_variable_name = another_long_name
--->--->..........................+ yet_another_variable
--->--->--->--->--->--->--->--->..|; 
```

有谁知道可用于获取缩进的精确副本而不是用制表符替换空格的设置或插件？

如果块缩进/取消缩进只会影响前导制表符的数量，而不是再次将空格更改为制表符，那也很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-19T00:55:12.490

我遇到了这个问题，正在寻找类似的东西（在具有不同缩进样式的多个项目上工作），并认为我会为遇到此问题的其他人提供答案。

有一个很好的插件可以让 Notepad++ 保持缩进而不做任何转换，“TabIndentSpaceAlign”： [http ://code.google.com/p/kereds-notepad-plus-plus-plugins/](http://code.google.com/p/kereds-notepad-plus-plus-plugins/)

也可从 Notepad++ 插件管理器获得。安装后不要忘记启用插件！（见插件菜单）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:40:23.523

我不知道有任何设置会从上一行复制确切的缩进样式（制表符和空格的组合）。您可以在设置对话框中选择将所有制表符转换为空格以及每个制表符（制表位）的空格数，但我认为这是您的选项的限制。之后应该可以开发一个插件来执行此操作，但我不知道目前有一个插件可以执行此操作。

# linux - 网络脚本不起作用。CentOS 2.6

> ID：13973258
> 
> 赞同：0
> 
> 时间：2012-12-20T13:28:47.063
> 
> 标签：linux, bash, shell, centos

Centos 2.6.32-179.9.1.el6.i686

您好，我的 noowbie 脚本有问题。这没用。当我尝试使用它时（例如，/etc/init.d/myscript start）什么也没发生。在此之前，我在其上制作 chkconfig --add myscript 和 chmod 777 。你能帮助我吗？

```
#!/bin/bash
#chkconfig: 2345 10 90
#description test

. /etc/init.d/functions

if [ ! -f /etc/sysconfig/network ]; then
    exit 0
fi

. /etc/sysconfig/network

if [ -f /etc/sysconfig/network-scripts/ifcfg-eth1 ]; then
    . /etc/sysconfig/network-scripts/ifcfg-eth1
fi

[ "${NETWORKING}"="no" ] && exit 0
[ -x -a /sbin/ifconfig ] || exit 1

case "$1" in
    start)
        echo "started"
        ifconfig eth1 ${IPADDR} netmask ${NETMASK} up
        echo 1 > /proc/sys/net/ipv4/ip_forward
        ;;
    stop)
        echo "stopping"
        ifconfig eth1 ${IPADDR} netmask ${NETMASK} down
        echo 0 > /proc/sys/net/ipv4/ip_forward
        ;;
    status)
        echo "showing status"
        ifconfig
        cat /proc/sys/net/ipv4/ip_forward
        route -n
        ;;
esac

exit 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:08:31.887

这一行：

```
[ -x -a /sbin/ifconfig ] || exit 1 
```

是语法错误，您应该`bash`在尝试运行脚本时得到诊断。假设 , 或 中的某些`/etc/init.d/functions`内容`/etc/sysconfig/network`尚未 `/etc/sysconfig/network-scripts/ifcfg-eth1`导致脚本终止，则该行将终止。

而且，实际上，`/etc/sysconfig/network`通常不是目录吗？如果是这样，这将导致您的脚本退出，因为它不是文件：

```
if [ ! -f /etc/sysconfig/network ]; then
  exit 0
fi 
```

编辑：您可能希望更改脚本的第一行`#!/bin/bash -x`以帮助调试。这将向您显示它在运行时所做的事情的踪迹。

# ruby-on-rails - 在 Rails 中使用 Masonry - 框在窗口调整大小时不移动

> ID：13973261
> 
> 赞同：0
> 
> 时间：2012-12-20T13:28:59.153
> 
> 标签：ruby-on-rails, jquery-masonry

我已经尝试使用 Masonry 网站上的两个文件以及 masonry-rails gem，但遇到了同样的问题。

基本上，当我调整浏览器窗口的大小时，框不会移动以适应新的页面大小。相反，我只是让滚动条出现在浏览器中。

我知道文件加载正常，并且选择了正确的选择器，因为如果我改变了 masonry() 参数中的列宽，当我加载页面时，这些框会出现在不同的位置。

另外，如果相关的话，我正在使用 Bootstrap，但我已经命名了选择器，因此它们不会与为引导程序保留的选择器发生冲突 - 例如使用#masonry-container 而不是#container。

任何帮助将不胜感激，谢谢！

应用程序.js：

```
//= require masonry/jquery.masonry 
```

留言板/显示：

```
<div id="show-message-board">
    <%= render :partial => "show_message_board", :locals => { :messages => current_user.messages }, :remote => true %>  
</div>

<script>
$(function(){
  $('#masonry-container').masonry({
    // options
    itemSelector : '.item',
    columnWidth : 50,
    isAnimated: true
  });
});

</script> 
```

_show_message_board.html.erb：

```
<div id="masonry-container" class="transitions-enabled infinite-scroll clearfix">
<% messages.each do |message| %>
  <div class="item">
    <p class="message_from"><%= message.user.first_name %> <%= message.user.last_name %>:</p>
    <p class="message_content"><%= message.content %></p>
  </div>
<% end %> 
```

编辑：

我已经尝试按照其他地方的建议使用以下内容，但这仍然不起作用！：

```
$(function(){
    var $container = $('#masonry-container');
    $container.imagesLoaded( function(){
        $container.masonry({
            itemSelector : '.item'
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T01:41:12.940

这是我为让 Masonry 在我的 Rails 项目中工作所做的工作。也许这会帮助你...

1.  我从该站点下载了“jquery.masonry.min.js”文件并将其放在我的 app\assets\javascripts 目录中。

2.  我添加了

    ```
    `//= require jquery.masonry.min`
    ```

    `到我的 application.js 文件`
`*   我在我的 app\assets\stylesheets 目录下为砌体创建了一个单独的 css 文件（只是为了保持整洁），名为“masonry.css.scss”。这是我拥有的 CSS（我使用的是“box”而不是你的“item”）：

    ```
    `.box {
      margin: 5px;
      padding: 5px;
      background: #D8D5D2;
      font-size: 11px;
      line-height: 1.4em;
      float: left;
      -webkit-border-radius: 5px;
      -moz-border-radius: 5px;
      border-radius: 5px;
      display: inline;
      width: 260px;
    }

    .box img {
      width: 100%;
    }` 
    ```

    `*   由于我使用的是“home\index.html.erb”文件中的代码，因此我在 app\assets\javascripts”目录下创建了一个“home.js”文件。这是我拥有的 js 代码：`` 

 `````
`jQuery(document).ready(function () {
        var $container = $('#UserShoppingRequestsContainer');
        $container.imagesLoaded(function () {
            $container.masonry({
                itemSelector:'.box',
                isAnimated:true,
                animationOptions:{
                    duration:750,
                    easing:'linear',
                    queue:false
                }
            });
        });
    })` 
```

`*   最后，在我的“home\index.html.erb”文件中，我有这样的内容：

    ```
     <div id="UserShoppingRequestsContainer">
        <% @shopping_requests.each do |shopping_request| %>
           <div class="box col3" id="<%= shopping_request.id.to_s %>">
              <%= link_to image_tag(shopping_request.request_picture.url(:medium)),                    user_shopping_request_path(shopping_request.user, shopping_request) %>
              <p class="serif1_no_padding"><%= shopping_request.category.name %></p>
           </div>
        <% end %>
     </div> 
    ```` 

 `我想就是这样。```

# struts2 - 使用注解在 Struts 2 中下载文件

> ID：13973264
> 
> 赞同：0
> 
> 时间：2012-12-20T13:29:08.200
> 
> 标签：struts2, annotations, download

我想问是否有人可以帮助我举个例子来使用 Struts 2 注释下载文件

我在我的动作课上试过这个

```
public class MyClass {
private InputStream       fileInputStream;

    private String      fileName;

    @Override
    @Action(AbstractBasisAction.VIEW)
    public String view() {
    System.out.println("HoursCycleDownloadFrameAction: view");
    super.view();
    return SUCCESS;
    }

    public InputStream getFileInputStream() {
    return fileInputStream;
    }

    @Action(value = "downloadFile", results = { @Result(name = "success", type = "stream", params = { "contentType", "application/octet-stream", "inputName", "fileInputStream", "contentDisposition", "filename=\"${fileName}\"", "bufferSize", "1024" }) })
    public String downloadFile() throws Exception {
    fileName = "license.txt";
    fileInputStream = new FileInputStream(new File("C:\\", fileName));
    return SUCCESS;
    }
} 
```

这就是我的页面包含的内容

```
<s:url id="fileInputStream" namespace="/myClass" action="downloadFile" ></s:url>

Download file - <s:a href="%{fileInputStream}">lisence.txt</s:a> 
```

但现在的问题是它下载了带有操作方法名称的文件。表示文件名为downloadFile.action。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:27:26.177

1) 如果是 .txt 文件，`"contentType", "application/octet-stream"` 则应改为`"contentType", "plain/text"`;

2）你的`private String fileName;`变量需要一个吸气剂；

3)`"contentDisposition", "filename=\"${fileName}\""`应该包含扩展，最终`inline`（默认，在浏览器中打开）或`attachment`（询问是否下载或使用客户端应用程序打开），例如

`"contentDisposition", "attachment; filename=\"${fileName}.txt\""`

# svg - 如何使用 d3.js 为线条制作动画？

> ID：13973267
> 
> 赞同：4
> 
> 时间：2012-12-20T13:29:15.623
> 
> 标签：svg, line, d3.js

所以我的线从图表的一侧延伸到另一侧，但它并没有真正通过每个数据点进行动画处理，我假设我必须在某处添加一个循环。

这是相关代码。任何帮助将不胜感激！！！

```
//assign start coordinates for each piece of data   
var startValueline = d3.svg.line()
    .x(0)
    .y(0);

//assigns coordinates for each piece of data    
var valueline = d3.svg.line()
    .interpolate("interpolation")
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.close); });

// csv callback function
d3.csv("myData2.csv", function(data) {
    data.forEach(function(d) {
    d.date = parseDate(d.date);
    d.close = +d.close;});

//CLIKC FUNCTION WHICH SHOULD ANIMATE LINE      
button.on("click", function() { 
    svg.append("path")                     // Add the valueline path. 
        .attr("class", "line")
        .attr("d", startValueline(data)) // set starting position
      .transition()
        .duration(2000)
        .ease("linear")
        .attr("d", valueline(data));    // set end position;
});

  //myData.csv STORED IN A SEPERATE .CSV FILE
  myData.csv
  date,close
  1-May-12,58.13
  30-Apr-12,53.98
  27-Apr-12,67.00
  26-Apr-12,89.70
  25-Apr-12,99.00
  24-Apr-12,130.28
  23-Apr-12,166.70
  20-Apr-12,234.98
  19-Apr-12,345.44
  18-Apr-12,443.34
  17-Apr-12,543.70
  16-Apr-12,580.13
  13-Apr-12,605.23
  12-Apr-12,622.77
  11-Apr-12,626.20
  10-Apr-12,628.44
  9-Apr-12,636.23
  5-Apr-12,633.68
  4-Apr-12,624.31
  3-Apr-12,629.32
  2-Apr-12,618.63
  30-Mar-12,599.55
  29-Mar-12,609.86
  28-Mar-12,617.62
  27-Mar-12,614.48
  26-Mar-12,606.98 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-28T11:05:38.563

请参阅[如何在 D3.js 中平滑地绘制从起点到终点的路径](https://stackoverflow.com/questions/13893127/)

您可以使用`stroke-dasharray`. 原理是有一条虚线，其中一部分着色，另一部分不着色，并且这两个部分的总和等于路径长度（又名 100%）。

```
dashed value = ((vertical offset of the map - top of the map) / height of the map) * path length 
```

请参阅[此页面](https://source.opennews.org/en-US/articles/animating-maps-d3-and-topojson/)和[此图像](http://cl.ly/012C3K3J1y0H/dynmaps_dasharray_percentage.svg)

在实践中，它变成了这样：

```
var totalLength = path.node().getTotalLength();

path
  .attr("stroke-dasharray", totalLength + " " + totalLength)
  .attr("stroke-dashoffset", totalLength)
  .transition()
    .duration(2000)
    .ease("linear")
    .attr("stroke-dashoffset", 0); 
```

[http://bl.ocks.org/4063326](http://bl.ocks.org/4063326)

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="400px" height="300px">
    <style type="text/css">
        <![CDATA[
            text {
                font-size: 14px;
            }
            .back {
                stroke: #ccc;
                stroke-width: 1px;
                fill:none;
            }
            .front {
                stroke: #800;
                stroke-width: 3px;
                fill:none;
            }
        ]]>
    </style>
    <g transform="translate(10, 10)">
        <g>
            <path d="M0,30 L30,0 L60,30 S70,20 90,7 S120,10 120,30" class="back"></path>
            <path d="M0,30 L30,0 L60,30 S70,20 90,7 S120,10 120,30" class="front" style="stroke-dasharray: 57, 173;"></path>
            <text transform="translate(130, 20)">30% stroke-dasharray: 57, 173;</text>
        </g>
        <g transform="translate(0, 60)">
            <path d="M0,30 L30,0 L60,30 S70,20 90,7 S120,10 120,30" class="back"></path>
            <path d="M0,30 L30,0 L60,30 S70,20 90,7 S120,10 120,30" class="front" style="stroke-dasharray: 86.5, 173;"></path>
            <text transform="translate(130, 20)">50% stroke-dasharray: 86.5, 173;</text>
        </g>
        <g transform="translate(0, 120)">
            <path d="M0,30 L30,0 L60,30 S70,20 90,7 S120,10 120,30" class="back"></path>
            <path d="M0,30 L30,0 L60,30 S70,20 90,7 S120,10 120,30" class="front" style="stroke-dasharray: 173, 173;"></path>
            <text transform="translate(130, 20)">100% stroke-dasharray: 173, 173;</text>
        </g>
        <g transform="translate(0, 180)">
            <path d="M0,30 L30,0 L60,30 S70,20 90,7 S120,10 120,30" class="back"></path>
            <path d="M0,30 L30,0 L60,30 S70,20 90,7 S120,10 120,30" class="front" style="stroke-dasharray: 0, 173;">
                <animate
                    attributeName="stroke-dasharray"
                    from="0, 173" to="173, 173"
                    dur="3s"
                    repeatCount="indefinite"/>
            </path>
        </g>
    </g>
</svg>
```

# asp.net - 无论处理时间如何，都会触发 updateprogress

> ID：13973272
> 
> 赞同：1
> 
> 时间：2012-12-20T13:29:28.873
> 
> 标签：asp.net, ajax, updatepanel, updateprogress

是否可以触发我的`UpdateProgress`，这样即使处理完成得更快，我也可以让我的加载动画出现一段时间？

我有一个下拉列表，可以更改所选索引更改表中的结果，并且处理速度太快，因此用户很难判断是否发生了任何事情。

我希望我的加载 gif 显示半秒钟只是为了显示发生了一些事情。这可以通过更新面板控件实现，还是我必须编写一些 JavaScript 才能做到这一点？

除此之外，我真的不想在按钮点击时做一些事情，比如：

```
System.Threading.Thread.Sleep(1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:51:20.423

根据[文件](http://msdn.microsoft.com/en-us/library/system.web.ui.updateprogress.aspx)：

> 默认情况下，控件在显示其内容之前会`UpdateProgress`等待`.5`几秒钟 ( )。`500 milliseconds`如果异步回发非常快，这有助于防止控件闪烁。`DisplayAfter`您可以通过设置属性来指定延迟。

因此，您可以将此值设置为其他值，以使您`UpdateProgress`的显示速度更快。但我认为这不能解决你的问题，所以试试这个：

> 如果您需要更好地控制何时显示控件，您可以为类的和事件`UpdateProgress`提供客户端脚本。在事件处理程序中，您可以显示代表控件的 DOM 元素。在事件处理程序中，您可以隐藏它。[`beginRequest`](http://msdn.microsoft.com/en-us/library/bb397432.aspx)[`endRequest`](http://msdn.microsoft.com/en-us/library/bb383810.aspx)[`PageRequestManager`](http://msdn.microsoft.com/en-us/library/bb311028.aspx)`beginRequest``UpdateProgress``endRequest`

您可以存储回调的开始日期和时间，并在请求结束时检查此值。

# java - 从麦克风捕捉声音

> ID：13973276
> 
> 赞同：3
> 
> 时间：2012-12-20T13:29:38.783
> 
> 标签：java, audio, port, javasound, jmf

因此，我查看了 Java 的声音教程，但并没有发现它很有帮助。无论如何，我从使用麦克风录制声音的教程中了解到的是：
![声音](../Images/9b1f81cf0cd10a0db0896edca61b00d7.png)

尽管它们确实展示了如何获取目标数据线等，但它们并没有说明您如何实际录制声音[或者我可能没有完全掌握]。
到目前为止，我的理解是这样的：

*   `Mixer`可以是您的声卡或可用于处理声音（无论是输入还是输出）的声音软件驱动程序*   `TargetDataLine`当您想将声音输出**到**计算机时使用。喜欢保存到磁盘*   `Port`是连接麦克风等外部设备的位置

## 遗留问题

*   如何选择合适的混音器？Java 的 tut 说您可以获得所有可用的混音器并查询每个混音器以查看它是否具有您想要的。这对于初学者来说非常模糊*   如何获取集成麦克风所在的端口？具体来说，我如何将其输入到混音器中？*   如何将其输出到磁盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:50:27.583

使用[AudioSystem.getTargetDataLine(AudioFormat format)](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/AudioSystem.html#getTargetDataLine%28javax.sound.sampled.AudioFormat%29)方法你会得到

> ... 一个目标数据线，可用于以 AudioFormat 对象指定的格式记录音频数据。返回的行将由默认系统混音器提供，或者，如果不可能，由系统中安装的任何其他支持匹配 TargetDataLine 对象的混音器提供。

有关此示例，请参阅[Java Sound API 的公认答案 - 捕获麦克风。](https://stackoverflow.com/questions/3705581/java-sound-api-capturing-microphone)
如果您想更好地控制使用哪条数据线，您可以枚举所有混音器及其支持的数据线，然后选择您想要的。以下是有关如何执行此操作的更多信息：[Java - 从混音器录制](https://stackoverflow.com/questions/6002444/java-recording-from-mixer)

一旦你获得了 TargetDataLine，你应该得到`open()`它，然后重复调用[read()](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/TargetDataLine.html#read%28byte%5B%5D,%20int,%20int%29)以从该数据行获取数据。您在`byte[]`每次调用时填充的数据`read()`可以写入磁盘，例如通过[FileOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html)。

# asp.net - asp.net 大量请求排队和上下文切换

> ID：13973278
> 
> 赞同：3
> 
> 时间：2012-12-20T13:29:44.070
> 
> 标签：asp.net, performance

我们有一个相当受欢迎的网站，每月有大约 400 万用户。它托管在具有 16 GB RAM、2 个具有 24 个内核的 procc 的专用盒上。

在任何给定时间，CPU 始终低于 40%，内存低于 12 GB，但在最高流量时，我们看到性能非常差。该网站非常非常慢。我们有 2 个应用程序池，一个用于我们的主站点，一个用于我们的论坛。只有网站速度很慢。我们对每个应用程序池的 CPU 或内存没有任何限制。

我查看了他的性能计数器，发现了一些非常有趣的东西。在我们的窥视时间，出于某种原因，请求正在排队。总体上下文切换数量非常高，约为 30 - 110 000 k。

据我了解，高上下文切换是由锁引起的。谁能给我一个会导致大量上下文切换的示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T21:28:53.530

我不太关心上下文切换，我不认为这个数字很大。您有很多线程在 IIS 中运行（因为它是 24 核机器），并且预计会有更高的上下文切换数量。但是，我绝对关心请求排队。

我会做几件事，看看它如何影响你的性能计数器：

1.  您的服务器 CPU 显然没有得到充分利用，因为您的运行时间一直低于 40%。您可以尝试在 IIS 中设置更高的“每个处理器的线程数限制”值，直到达到 50-60% 的利用率。书籍中每个核心线程的最佳值是 20，但这取决于场景，您可以尝试更高或更低的值。我建议尝试设置一个 >=30 的值。低 CPU 利用率也可能是阻塞 IO 操作的标志。
2.  调整 IIS 属性中的“队列长度”设置。如果您已将“每个处理器的线程数限制”配置为 20，那么您应该将队列长度配置为 20 x 24 核心 = 480。同样，如果请求正在排队，这可能表明您的所有线程都在阻止服务其他请求或阻止等待 IO 响应。
3.  不要从 IIS 提供静态文件。将它们移动到 CDN、亚马逊 S3 或其他任何地方。这将显着提高您的服务器性能，因为 1,000 多个服务器请求将转到其他地方！如果您必须从 IIS 提供文件，则配置 IIS 文件压缩。此外，对静态内容使用过期标头，因此它们会缓存在客户端上，这将节省大量带宽。
4.  在您的 ASP.NET 控制器、处理程序等中尽可能使用异步 IO（从磁盘、数据库、网络等读取/写入），以确保您以最佳方式使用线程。使用阻塞 IO 阻塞可用线程（这在我见过的 95% 的 ASP.NET 应用程序中完成）很容易导致线程池在重负载下被充分利用，并且会发生排队。
5.  做一个一般性的优化，以防止命中服务器的请求数量，以及单个请求的处理时间。这可以包括缩小和捆绑您的 CSS/JS 文件，重构您的 Javascript 以减少与服务器的往返次数，重构您的控制器/处理程序方法以更快等。我在下面添加了指向 Google 和 Yahoo 推荐的链接。
6.  在 IIS 中禁用 ASP.NET 调试。

谷歌和雅虎推荐：

[https://developers.google.com/speed/docs/insights/rules](https://developers.google.com/speed/docs/insights/rules)

[https://developer.yahoo.com/performance/rules.html](https://developer.yahoo.com/performance/rules.html)

如果您遵循所有这些建议，我相信您会得到一些改进！

# c# - Workflow Foundation：如何实现排队？

> ID：13973280
> 
> 赞同：1
> 
> 时间：2012-12-20T13:29:45.830
> 
> 标签：c#, asp.net, workflow-foundation-4

我已经在我的网络应用程序中实现了 WF，它正在异步工作。这是示例

```
 public Guid Something(string somVar)
    {
            WorkflowApplication i = new WorkflowApplication(SomeWF.Some(somVar));
            SetupWorkflowCallbacks(ref i);
            i.Run();
            return i.Id;

    } 
```

现在，当我需要调用一个只能为用户接收一个请求的外部 api 时，问题就开始了。例如 10 个网页用户可以运行这个 WF，一切都会好起来的。但是当一个用户在短时间内运行 WF 2 次时，我收到了来自 api 的错误。我需要某种排队来避免这种类型的错误。

# java - 我需要将 JBoss 工具添加到我的 Eclipse，但我使用的是 springtoolsuite (STS)

> ID：13973284
> 
> 赞同：0
> 
> 时间：2012-12-20T13:30:02.213
> 
> 标签：java, eclipse, spring, jboss

我需要将 JBoss 工具添加到我的 Eclipse，但我使用的是 springtoolsuite (STS)。

如何找到 Spring tool Suite STS 正在使用的 Eclipse 版本名称。我需要向其中添加 JBoss 工具，但我不知道我使用的是哪一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:38:01.047

![在此处输入图像描述](../Images/6d1425e53a95dde6d6a4c0505e17d13f.png)看着

`Help/About SpringSource Tool Suite/`点击`Eclipse.org`符号

# perl - 如何将 Shell 参数传递给 Perl 脚本？

> ID：13973285
> 
> 赞同：1
> 
> 时间：2012-12-20T13:30:03.113
> 
> 标签：perl, shell, unix, strftime

我正在尝试以某种格式查找日期，我之前使用 perl( `strftime`) 做过，但那次我提到了静态时间，这次我需要一个变量 $CURRENT_DAY 这里。

下面是问题，当将`CURRENT_DAY`by using`DAYHOUR=86400`和一个整数相等时，变量给出了正确的时间，但是一旦我将`$CURRENT_DAY`变量放入语句中，日期就不会减少。

```
$ DAYHOUR=86400
$ DAY=1
$ CURRENT_DAY=`echo $(($DAYHOUR*$DAY))`
$ DD=`perl -e 'use POSIX; print strftime "%d", localtime time - $CURRENT_DAY;'`
$ echo $DD
20
$ DAY=`echo $(($DAY+1))`
$ CURRENT_DAY=`echo $(($DAYHOUR*$DAY))`
$ DD=`perl -e 'use POSIX; print strftime "%d", localtime time - $CURRENT_DAY;'`
$ echo $DD
20
$ DAY=`echo $(($DAY+1))`
$ echo $DAY
3
$ CURRENT_DAY=`echo $(($DAYHOUR*$DAY))`
$ echo $CURRENT_DAY
259200
$ echo `perl -e 'use POSIX; print strftime "%d", localtime time - 259200;'`
17 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:54:29.340

您的主要问题是这`$CURRENT_DAY`是一个 Perl 脚本变量。通过将您的 Perl 脚本用单引号括起来，就无法看到 shell 的同名变量。如果您启用警告（例如使用`-w`），您会看到这一点。

有几种方法可以规避您的问题。一种是使用双引号来封装您的 Perl，从而允许 shell 在 Perl 运行之前首先扩展其变量的值：

```
CURRENT_DAY=3
perl -MPOSIX -wle "print strftime qq(%d),localtime time-(86400*$CURRENT_DAY);print $CURRENT_DAY" 
17 
```

另一个是：

```
export CURRENT_DAY=3
perl -MPOSIX -wle 'print strftime qq(%d),localtime time-(86400*$ENV{CURRENT_DAY})' 
```

请注意，在计算昨天或明天的时间中添加或减去 24 小时将无法正确计算夏令时更改。查看[此常见问题解答](http://perldoc.perl.org/perlfaq4.html#How-do-I-find-yesterday%27s-date%3F)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:07:01.963

您可以在@ARGV 中将它们作为参数传递：

```
$ dd_seconds_ago () { perl -MPOSIX -e 'print strftime q(%d), localtime(time - shift)' "$@"; }

$ DD=$(dd_seconds_ago 86400) 
```

在没有参数的情况下，在上述上下文中，`shift`转移@ARGV，这对于像这样的 shell 单行来说很方便

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T18:24:24.097

与 Perl 一样，`sh`它不会在单引号字符串中进行插值，因此 Perl 看到`$CURRENT_DAY`的不是实际数字，而且您从未为该 Perl 变量分配任何内容。您可以切换到双引号字符串。

```
perl -MPOSIX -e"print strftime '%d', localtime time-$CURRENT_DAY;" 
```

这很好，因为`$CURRENT_DAY`它是一个数字，但如果你想传递一个任意字符串，你会使用一个 env var 或一个参数。

```
export CURRENT_DAY
perl -MPOSIX -e'print strftime "%d", localtime time-$ENV{CURRENT_DAY};' 
```

或者

```
perl -MPOSIX -e'print strftime "%d", localtime time-$ARGV[0];' -- "$CURRENT_DAY" 
```

但是请注意，您的代码有问题。每年有两个小时您的代码会给出错误答案，因为并非所有日子都有 86400 秒。有些有 82800，而另一些有 90000。（这是假设闰秒不考虑在内。）一个不受该问题困扰的 Perl 解决方案如下：

```
perl -MDateTime -e'print
   DateTime->today(time_zone=>"local")
    ->subtract(days=>$ARGV[0])
     ->strftime("%d")' -- "$DAY" 
```

或者你可以使用`date`.

```
date -d "$DAY days ago" +%d 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:57:44.197

I am assuming you want to pass the number of days in the past in the shell variable `DAY` and that you want the answer in the shell variable DD

So if it is the 20th of the month and the `DAY` is 1, then DD should be set to 19

You could modify your Perl command as follows:

```
 DD=`perl -e 'use POSIX; print strftime "%d", localtime( time - ($ENV{DAY}* 86400))'; 
```

Alternatively, you could use the GNU `date` command that is widely available

```
 DD=`date -d "$DAY days ago" +%d` 
```

Using `date` is probably better at dealing with leap days, etc

# python - 无法在安装目录中创建或删除文件：安装 pip 困难

> ID：13973287
> 
> 赞同：7
> 
> 时间：2012-12-20T13:30:09.420
> 
> 标签：python, pip

我在 Mac 上以 32 位模式运行 Enthought python

我的 PATH 变量设置在 PATH=/Library/Frameworks/Python.framework/Versions/Current/bin:/Library/Frameworks/Python.framework/Versions/Current/bin:/usr/bin:/bin:/usr/sbin :/sbin:/usr/local/bin

当我尝试安装或 easy_install 时，我得到“无法在安装目录中创建或删除文件”

这是跟踪（目录的 ls -l 也是如此）

Johns-MacBook-Pro:bin jc_macpro$ easy_install pip 错误：无法在安装目录中创建或删除文件

尝试在安装目录中添加或删除文件时发生以下错误：

```
[Errno 13] Permission denied: '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/test-easy-install-516.write-test' 
```

您指定的安装目录（通过 --install-dir、--prefix 或 distutils 默认设置）是：

```
/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/ 
```

也许您的帐户没有对该目录的写入权限？如果安装目录是系统拥有的目录，您可能需要以管理员或“root”帐户登录。如果您没有对这台机器的管理访问权限，您可能希望选择一个不同的安装目录，最好是 PYTHONPATH 环境变量中列出的一个。

有关其他选项的信息，您可能希望在以下位置查阅文档：

[http://packages.python.org/distribute/easy_install.html](http://packages.python.org/distribute/easy_install.html)

请对您的系统进行适当的更改，然后重试。

============================ 当我查看站点包时，它具有以下访问权限。我是管理员帐户。

drwxrwxr-x 107 根轮 3638 Oct 21 09:55 站点包

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T13:34:15.500

您需要运行，`sudo easy_install`否则您将无权写入安装目录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T13:33:06.217

您是否尝试过 sudo 进行安装？它应该赋予您“创建或删除”文件的权利。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2021-04-15T06:14:47.177

每当权限被拒绝时使用“sudo”

# android - 如何手动或动态调整布局/视图大小

> ID：13973294
> 
> 赞同：0
> 
> 时间：2012-12-20T13:30:48.927
> 
> 标签：android, android-layout

我已经使用此链接的参考实现了一个可拖动的视图，它工作正常。

[http://blahti.wordpress.com/2011/01/17/moving-views-part-2/](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)

但是，现在这个视图有问题，我需要在运行时手动调整这个视图的大小。

请建议我如何执行此任务。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:33:26.737

```
View view = ... some view (ImageView, View etc etc)
view.getLayoutParams().height = newHeight;
view.getLayoutParams().width = newWidth; 
```

# c# - 在 Windows C# 应用程序安装期间动态获取信息并将其保存在配置文件中

> ID：13973302
> 
> 赞同：1
> 
> 时间：2012-12-20T13:31:23.583
> 
> 标签：c#, windows, installation

如何创建一个设置，在安装时在配置文件中动态获取和保存信息。保存的信息在应用程序中使用。例如：在安装应用程序时获取数据库名称或 FTP 详细信息作为用户输入。

使用的工具：Visual Studio 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:32:51.250

我已经非常成功地使用了自定义操作 dll 来完成您所说的事情。

[如果你用谷歌搜索这个，你会发现很多热门，这里](http://ronniediaz.com/2011/06/20/c-create-a-windows-installer-class-custom-action-bootstrap-dll-in-net/)就是这些工作方式的一个例子（在向你展示结构方面似乎相当不错）。

您的 dll 中的代码只是 c#，因此它几乎可以做任何您想做的事情，动态写入配置文件等。但是，您可能会受到限制，但是，基于运行设置的帐户的权限 - 例如大多数“用户”帐户将无法写入 c:\program 文件..... - 这就是为什么许多安装程序需要以管理员身份运行的原因。

使用 VS Setup 项目设置，您可以将设置中的信息传递到 Dll（请注意安装覆盖上的入站参数），尽管您可以传递的数据量是有限的。我通常传入安装文件夹（所以我的 dll 知道要修改文件的位置）和“环境”设置，还有用户名密码等，所以我知道要访问哪个数据库（以及使用什么帐户来访问它），在什么帐户下运行某某服务等。这些可以通过您可以引入安装项目本身的有限范围的对话框来捕获。

这种方法还意味着在开发过程中我们不必过多担心配置文件中的值，因为我们知道它们会在安装过程中正确设置。特别是对于用户名和密码，这意味着开发人员不需要知道它们（执行安装的操作员是唯一知道它们的人），从安全角度来看这很好。

最后请注意，这里还有一个用于卸载的钩子，因此如果您可能需要撤消某些操作，则可以在此处进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:39:09.107

您可以在运行时修改 app.config 文件中的设置，并将这些更改永久保存。例如，如果要连接到数据库，则在应用程序启动时提供服务器名称和数据库名称。请参阅这篇文章 [在运行时更新 app.config system.net 设置](https://stackoverflow.com/questions/980440/update-app-config-system-net-setting-at-runtime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:03:05.420

我们已经成功地使用 xslt 将我们的 Web.Config 文件转换为 xml 文件中的适当设置。你可以看看下面的线程

[使用版本控制时处理跨多台机器的 web.config 差异](https://stackoverflow.com/questions/1017240/handling-web-config-differences-across-multiple-machines-when-using-version-cont)

它详细说明了这一点。会认为你可以用windows做类似的事情。

像这样，将此文件命名为**App.Config.xslt**并调用它，传入您的设置，这将生成和 App.Config 具有正确的替换。

**C＃**

```
 class Program
    {
        static void Main(string[] args)
        {
            XPathDocument xPathDocument = new XPathDocument(@"..\..\YourSettings.xml");
            XslCompiledTransform xslCompiledTransform = new XslCompiledTransform();
            xslCompiledTransform.Load(@"..\..\App.Config.xslt");
            XmlTextWriter writer = new XmlTextWriter(@"..\..\App.Config", null);
            xslCompiledTransform.Transform(xPathDocument, null, writer);
        }
    } 
```

**应用程序.Config.xslt**

```
<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
<xsl:template match="YourSettings">
    <configuration>
      <connectionStrings>
        <add name="YourApp" connectionString="User Id={YourAppId};Password=&quot;{YourAppPassword}&quot;;Data Source={YourAppName}" />
      </connectionStrings>
</configuration>
</xsl:template>
</xsl:stylesheet> 
```

并且您的配置设置位于另一个文件中

**你的设置.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<YourSettings>
  <YourAppId>localhost</YourAppId>
  <YourAppPassword>password1234</YourAppPassword>
  <YourAppName>username</YourAppName>
</YourSettings> 
```

# android - 无法从加载器 findLibrary 加载 lept 返回 null？

> ID：13973305
> 
> 赞同：12
> 
> 时间：2012-12-20T13:31:29.887
> 
> 标签：android, ocr

嗨，我正在研究**OCR**（光学字符识别），我从 github 获得了一个示例项目。对于这个项目，我正在使用 tess-test 库项目，项目构建并成功执行，但是每当调用 TessBaseAPI 时，应用程序就会不幸停止......它显示以下日志错误

```
12-20 18:27:18.791: E/AndroidRuntime(24466): java.lang.ExceptionInInitializerError
12-20 18:27:18.791: E/AndroidRuntime(24466):    at com.datumdroid.android.ocr.simple.SimpleAndroidOCRActivity.onPhotoTaken(SimpleAndroidOCRActivity.java:211)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at com.datumdroid.android.ocr.simple.SimpleAndroidOCRActivity.onActivityResult(SimpleAndroidOCRActivity.java:135)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at android.app.Activity.dispatchActivityResult(Activity.java:5293)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3315)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3362)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at android.app.ActivityThread.access$1100(ActivityThread.java:141)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1282)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at android.os.Looper.loop(Looper.java:137)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at java.lang.reflect.Method.invokeNative(Native Method)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at java.lang.reflect.Method.invoke(Method.java:511)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at dalvik.system.NativeStart.main(Native Method)
12-20 18:27:18.791: E/AndroidRuntime(24466): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load lept from loader dalvik.system.PathClassLoader[dexPath=/data/app/com.datumdroid.android.ocr.simple-1.apk,libraryPath=/data/app-lib/com.datumdroid.android.ocr.simple-1]: findLibrary returned null
12-20 18:27:18.791: E/AndroidRuntime(24466):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at java.lang.System.loadLibrary(System.java:535)
12-20 18:27:18.791: E/AndroidRuntime(24466):    at com.googlecode.tesseract.android.TessBaseAPI.<clinit>(TessBaseAPI.java:47) 
```

请解决我的问题，因为我的申请需要 5 天。

我google了很多没有找到任何解决方案..谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T14:10:08.107

确保库文件*“liblept.so”*存在于*libs/armeabi*或*libs/armeabi-v7a*中，如果存在，请使用 7Zip/WinRAR 打开生成的 APK 文件并确保它也存在于 APK 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:13:50.440

[在 tesseract 中找不到 Lib](https://stackoverflow.com/questions/11516440/lib-not-found-error-in-tesseract)的副本错误

问题是在特定库路径上找不到 liblept.so（共享库）文件。在没有看到您的代码的情况下，仅假设您的代码尝试加载共享库 liblept.so 并且该库在该路径上不可用。

此外，您使用的代码要么在任何 lib 或内部包目录中包含该 liblept.so 文件，要么您必须使用 Android-NDK 生成（构建）该共享库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T00:39:49.330

我不确定您是否找到了问题的答案，但我的答案来自我项目中的 libs 文件夹，但名称不正确（是 lib 而不是 libs）。我的问题是意外删除我的项目并不得不通过从手机中提取 APK 来恢复它的结果。重命名文件夹后，我的问题就解决了。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-16T06:47:50.317

Ppl，经过一天的努力..终于找到了解决方案

在 tess-two 模块的 build.gradle 中添加以下代码：

```
 sourceSets.main {
    manifest.srcFile 'src/main/AndroidManifest.xml'
    java.srcDirs = ['src/main/java']
    resources.srcDirs = ['src/main/java']
    res.srcDirs = ['src/main/res']
    jni.srcDirs = []
    jniLibs.srcDirs = ['src/main/jniLibs']
} 
```

主要是请手动检查上面代码中指定的所有文件路径是否存在！

来到这个问题，检查“ **liblept.so** ”在 tess-two 库中的位置。对我来说，它在*/tesstwo/src/main/jniLibs/armeabi-v7a 里面*。因此我在上面的代码中制作了**jniLibs.srcDirs = ['src/main/jniLibs'] 。**希望能帮助到你 ！！

# python - 大型实体组（python、NDB、Master/Slave）上事务的性能影响

> ID：13973309
> 
> 赞同：0
> 
> 时间：2012-12-20T13:31:40.730
> 
> 标签：python, google-app-engine, transactions, google-cloud-datastore, app-engine-ndb

我有数以万计的相关小实体（主从之上的 NDB，有一天将不得不转移到 HRD ..），我想将它们放在同一个实体组中以启用事务。

这些实体的一小部分将通过交易进行更新。

此设置对性能有何影响？

这是否意味着整个组在更新期间被锁定？即一次一笔交易。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:20:12.110

一个实体组的近似性能限制为每秒 1 个写入事务。整个组确实被锁定以进行更新。随后的事务将失败并重试。

一个实体组中的 10k 个实体听起来很多，但这实际上取决于您的写入模式。例如，如果组中只有少数实体被更新，这可能不是一个大问题。但是，如果随机用户不断更新组中的随机实体，您需要将其拆分为更多实体组。

# c# - 密码正则表达式验证

> ID：13973310
> 
> 赞同：2
> 
> 时间：2012-12-20T13:31:43.240
> 
> 标签：c#, asp.net

我正在尝试获得一个可以执行以下操作的正则表达式：

*   最小长度为 6 和最大。长度 8

*   没有空白字符

*   至少有一个字母字符和数字字符

*   不包含土耳其字符 (ı,ö,ğ,ç,ş,ü)

Exp（有效通行证）；tester1, TESTER1, 12345a, 无效通过；测试员*,测试员%

我有这个正则表达式：`^.*(?=^.{6,8}$)(?=.*[a-z])((?=.*\d)|(?=.*[A-Z])|(?=.*[\W])).*$`

有人可以展示并教我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:32:36.643

开始了：

```
^(?=.*\d)(?=.*[a-zA-Z])[^öÖşŞıİğĞ]{6,8}$ 
```

```
(?=.*\d)    # must contains one digit from 0-9
(?=.*[a-z]) # must contains one lowercase characters or one uppercase characters
.{6,8}       # length at least 6 characters and maximum of 8 
```

`|`= OR 示例：`(?=.*\d)|(?=.*[A-Z])`= 必须包含 0-9 的一位数字或必须包含一个大写字符

谢谢@Özkan

`[^öÖşŞıİğĞ]`不允许使用以下字符 öÖşŞıİğĞ

你可以[在这里测试](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

# java - 如何使用 Spring jdbc 模板（jdbcTemplate 或 namedParameterJDBCTem）从数据库中检索值

> ID：13973313
> 
> 赞同：3
> 
> 时间：2012-12-20T13:31:46.480
> 
> 标签：java, spring, spring-jdbc

离春天还有几天。将 Spring-JDBC 集成到我的 Web 应用程序中。我成功地在我的数据库上执行了 CRUD 操作，对样板代码减少印象深刻。但我没有`query*()`使用`NamedParameterJDBCTemplate`. 互联网上的大多数示例都提供了`RowMapper`or 或`ResultSetExtractor`. 虽然这两种用途都很好，但它迫使我创建必须实现这些接口的类。我必须为我为数据库加载的每种类型的数据创建 bean（或者我可能弄错了）。

问题出现在我使用过这样的代码部分：

```
String query="select username, password from usertable where username=?"
ps=conn.prepareStatement(query);
ps.setString(username);
rs=ps.executeQuery();

if(rs.next()){
    String username=rs.getString("username");
    String password=rs.getString("password")

    //Performs operation on them
} 
```

由于这些值没有存储在任何 bean 中并直接使用，因此我无法在这种情况下集成 jdbcTemplate。当我从数据库中仅提取 bean 中存在的部分属性时，会出现另一种情况。例子：

```
public class MangaBean{
    private String author;
    private String title;
    private String isbn;
    private String releaseDate;
    private String rating;

    //getters and setters

} 
```

映射器：

```
public class MangaBeanMapper implements RowMapper<MangaBean>{

    @Override
    public MangaBean mapRow(ResultSet rs, int arg1) throws SQLException {
        MangaBean mb=new MangaBean();
        mb.setAuthor(rs.getString("author"));
        mb.setTitle(rs.getString("title"));
        mb.setIsbn(rs.getString("isbn"));
        mb.setReleaseDate(rs.getString("releaseDate"));
        mb.setRating(rs.getString("rating"));
        return mb;
    }
} 
```

上述安排运行良好，如下所示：

```
String query="select * from manga_data where isbn=:isbn"
Map<String, String> paramMap=new HashMap<String, String>();
paramMap.put("isbn", someBean.getIsbn());
return template.query(query, paramMap, new MangaBeanMapper()); 
```

但是，如果我只想从我的数据库中检索两个/三个值，我不能使用上面的模式，因为它会生成一个`BadSqlGrammarException: releaseDate does not exist in ResultSet`. 例子 ：

```
String query="select title, author where isbn=:isbn"
Map<String, String> paramMap=new HashMap<String, String>();
paramMap.put("isbn", someBean.getIsbn());
return template.query(query, paramMap, new MangaBeanMapper()); 
```

模板是`NamedParameterJDBCTemplate`. 请为我提供这些情况的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:31:26.923

其他答案是明智的：您应该创建一个 DTO bean，或者使用`BeanPropertyRowMapper`.

但是如果你希望能够拥有比 BeanPropertyRowMapper 更多的控制权，（或者反射让它太慢），你可以使用

`queryForMap`

方法，它将返回一个 Maps 列表（每行一个），返回的列作为键。因为您可以`get(/* key that is not there */)`在不引发异常的情况下调用 Map（它只会返回 null），所以您可以使用相同的代码来填充您的对象，而不管您选择了哪些列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:09:38.180

你甚至不需要编写自己的 RowMapper，只需使用spring 提供的**BeanPropertyRowMapper即可。**它的工作方式是匹配返回到 bean 属性的列名。您的查询具有与您的 bean 完全匹配的列，如果不是，您将在 select 中使用 as ，如下所示...

```
-- This query matches a property named matchingName in the bean
select my_column_that doesnt_match as matching_name from mytable; 
```

**BeanPropertyRowMapper**应该适用于您列出的两个查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:45:24.137

在您的第一个示例中，我将创建一个 DTO Bean/Value 对象来存储它们。它是一种普遍实现的模式是有原因的，它需要几分钟的时间来编写代码并提供许多长期的好处。

在您的第二个示例中，在您不设置字段的地方创建 rowmapper 的第二个实现，或在必要时向 mangabean 提供空值/替代值：

```
 @Override
    public MangaBean mapRow(ResultSet rs, int arg1) throws SQLException {
    MangaBean mb=new MangaBean();
    mb.setAuthor(rs.getString("author"));
    mb.setTitle(rs.getString("title"));
   /* mb.setIsbn("unknown");*/
    mb.setReleaseDate("unknown");
    mb.setRating(null);
    return mb;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T13:48:06.800

通常，是的：对于大多数查询，您将创建一个 bean 或对象来将结果转换为。我建议在*大多数*情况下，这是您想要做的。

但是，您可以创建一个将结果集映射到映射而不是 bean 的 RowMapper，就像这样。缺点是会丢失 bean 的类型管理，并且您将依赖 jdbc 驱动程序为每列返回正确的类型。

正如@NimChimpskey 刚刚发布的那样，最好创建一个小 bean 对象：但如果您真的不想这样做，这是另一种选择。

```
 class SimpleRowMapper implements RowMapper<Map<String, Object>> {
    String[] columns;

    SimpleRowMapper(String[] columns) {
      this.columns = columns;
    }

    @Override
    public Map<String, Object> mapRow(ResultSet resultSet, int i) throws SQLException {
      Map<String, Object> rowAsMap = new HashMap<String, Object>();
      for (String column : columns) {
        rowAsMap.put(column, resultSet.getObject(column));
      }
      return rowAsMap;
    }
  } 
```

# javascript - 获取浏览器中显示的 iframe 正文的 innerHTML

> ID：13973315
> 
> 赞同：2
> 
> 时间：2012-12-20T13:31:54.643
> 
> 标签：javascript, jquery, iframe, innerhtml, innertext

我有一个变量

```
var s="<p>long content.....</p><p>long content....</p>" 
```

我把它放在一个 iframe 中

```
$('#iframeid').contents().find('html').html(s); 
```

我根据浏览器大小动态设置了 iframeid 的 translateX。因此，当浏览器很大时，都会显示两个段落。当浏览器很小时，第一段会显示在浏览器上。

现在当浏览器很小时，我使用

```
document.getElementById('iframeid').contentWindow.document.body.innerText 
```

我得到“**长内容......** ”当我使用

```
document.getElementById('iframeid').contentWindow.document.body.innerHTML 
```

我完全得到了变量的值。我只想获取显示位置的html内容

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:12:10.137

我认为这是不可能的...

我只能向您建议一些可以让您开始使用它的东西。

[Jquery，在带有滚动的大 HTML 上，如何仅捕获 HTML 的可见部分？](https://stackoverflow.com/questions/4742477/jquery-on-a-big-html-with-scroll-how-to-capture-only-the-visible-part-of-the-h)

或者你可以使用这个插件：

[jQuery.fracs](http://larsjung.de/fracs/)，见演示：[demo](http://larsjung.de/fracs/0.11/demo/)

可能如果你想显示 HTML 的一部分并且只得到这个可见的部分，你必须想出一些东西，并且可能你不能使用 iFrame。

# wordpress - 替换数据库上的元值

> ID：13973320
> 
> 赞同：0
> 
> 时间：2012-12-20T13:32:03.537
> 
> 标签：wordpress, replace, locking, edit

我需要将我的 wordpress 网站从本地迁移到在线。我正在使用自定义帖子元上传文件，所以我需要将字符串从“http://localhost/site”更改为“http://www.site.com/”但是当我使用一些搜索和更换插件，价值消失。我认为是因为新的编辑锁定功能。现在如何搜索和替换 meta_value 上的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:57:53.377

尝试使用“WordPress 搜索和替换工具” - [http://interconnectit.com/products/search-and-replace-for-wordpress-databases/](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)此脚本允许搜索/替换序列化数组中的值。

# javascript - 使用 Javascript 捕获反应时间，准确性问题

> ID：13973321
> 
> 赞同：5
> 
> 时间：2012-12-20T13:32:06.983
> 
> 标签：javascript, time

我正在构建一个点探测任务（人们必须在图像消失后对一个点做出快速反应），我们需要测量反应时间并显示预定义间隔的刺激，以便在在线治疗研究中使用。

我们已经决定使用 Javascript，我们愿意对用户施加一些限制，即排除 IE 等。但我们不能完全禁止 Windows。

我阅读了[John Resig](http://ejohn.org/blog/accuracy-of-javascript-time/)关于该主题的帖子，据此我们将不得不禁止 Windows 上的所有浏览器，除了 Firefox 和 Chrome。

此外[，此答案](https://stackoverflow.com/questions/313893/how-to-measure-time-taken-by-a-function-to-execute/1975103#1975103)建议将`console.time();`FF 和 Chrome 用作最佳实践。

我有一些后续问题，考虑到 Resig 的帖子已经 4 年了，并且上面的问题是关于测量函数执行时间（这意味着执行代码倾斜计时器是好的，在我们的例子中还不错）而不是关于反应时间研究。

[以下类似问题](https://stackoverflow.com/questions/13637527/what-is-the-best-web-language-to-use-for-reaction-time-data)只是询问“最佳网络语言”，并且只收到了使用 JS 的全面推荐（这是一些已发表的研究所做的，但他们没有公布技术细节）。

1.  我们能以某种方式使用更好的准确性`console.time()`吗？我认为不会，因为它只返回到控制台，即不能在变量中捕获。
2.  在过去 4 年中，计时精度是否发生了重大变化？出于多种原因，我很乐意禁止 IE，但 Windows 上的 Safari 和 Opera 可能发生了变化？
3.  我是否应该使用[与执行过程相关](http://ejohn.org/blog/how-javascript-timers-work/#postcomment)的第二种方法来获得另一组时间进行比较/交叉验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:38:16.597

ObDisclaimer - 我曾经为大学研究部门编写过这样的软件。

您可以使用`performance.now()`（或`performance.webkitNow()`，取决于浏览器版本）获得比`Date.now()`. [浏览此处获取更多信息。](http://updates.html5rocks.com/2012/08/When-milliseconds-are-not-enough-performance-now)

然而，需要考虑的一个问题是屏幕刷新。假设刷新率为 60 Hz，则图像实际出现在屏幕上的时间可能会有 16 ms 的差异，具体取决于：

1.  软件是否与屏幕刷新率同步（在 JS、AFAIK 中不可能），以及
2.  其中图像和点探针相对于屏幕顶部 - 在屏幕顶部绘制的像素在它们下方的像素之前绘制。

您还应该考虑键盘扫描间隔等因素造成的影响。在一个项目中，研究人员发现了（根据记忆，这是 20 年前）大约 30 毫秒的倍数的重要分组，这似乎是由于在 Psion PDA 上扫描键盘以查找按键的频率是用于测试。

在这种情况下，我通过使用 PIC 微控制器构建硬件“按钮盒”解决了这个问题，该微控制器可以以 9600 bps 的速度发送串行字节，没有扫描延迟，并且 <2ms 可以将按键从盒子传递到 PDA。

我正在考虑写一篇关于屏幕刷新问题的论文。然后我得到了一份真正的工作;-) 我不知道是否有其他人研究过它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-29T11:27:48.100

最近有一篇来自 Stian Reimers 和 Neil Stewart 的关于这个主题的好文章。

Adobe Flash 和 HTML5/JavaScript Web 实验中的演示和响应时间准确性 [http://www.ncbi.nlm.nih.gov/pubmed/24903687](http://www.ncbi.nlm.nih.gov/pubmed/24903687)

# php - 在 Javascript If else 语句中显示 HTML

> ID：13973324
> 
> 赞同：0
> 
> 时间：2012-12-20T13:32:19.170
> 
> 标签：php, javascript, html, css, document.write

> **可能重复：**
> [javascript - document.write 错误？](https://stackoverflow.com/questions/3236353/javascript-document-write-error)

我有一段 Javascript，我正在使用它检查 div 是否是某种样式，然后运行 ​​if else 语句：

```
window.onload = function () {
    if (document.getElementById('slidingDiv').style.display == 'none') {
        document.write('<a href="#show" class="show_hide"><img src="images/show-more-arrow.jpg" width="61" height="45"></a>');
    } else {
        document.write('<a href="#show" class="show_hide"><img src="images/show-less-arrow.jpg" width="61" height="45"></a>');
    }
}; 
```

这工作正常，但它只在屏幕上显示此 HTML 图像。我需要它将 HTML 添加到页面上的现有代码中。

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T13:34:42.213

使用`appendChild`或`innerHTML`

例子：

```
document.getElementById("elemId").innerHTML = '<a href="#show" class="show_hide"><img src="images/show-less-arrow.jpg" width="61" height="45"></a>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:38:27.820

```
var wrapper = document.createElement('div');
var image = document.createElement('img');
image.src='images/show-more-arrow.jpg';
wrapper.appendChild(image); 
```

像这样的东西。

# ajax - 在特定视图页面上显示块

> ID：13973333
> 
> 赞同：0
> 
> 时间：2012-12-20T13:32:46.043
> 
> 标签：ajax, drupal, views, pager

我使用视图来显示内容，如何仅在视图的第一页中显示块并在视图中启用 ajax ..

我在 Block 可见性中尝试使用 PHP，但我不知道如何获取视图中的第一页... Portfolio = 视图名称

```
<?php
  $url = request_uri();
  $pos = strpos($url, "page");
  if ($pos === false && arg(0) =='portfolio') {
    return TRUE;
   }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:07:18.433

您的页面应该有不同的页面文件，例如“node--product_page.tpl.php”，您可以在页面中添加视图块，只要您想使用以下代码：

```
<?php echo views_embed_view('YourViewName[ex:product_list]', $display_id ='yourBlockViewName[ex:block_1]'); ?> 
```

# groovy - 如何使用 groovy builder 生成数组类型的 json？

> ID：13973342
> 
> 赞同：15
> 
> 时间：2012-12-20T13:33:26.450
> 
> 标签：groovy, jsonbuilder

我们可以通过 groovy 的 json builder 生成一个对象类型的 json：

```
def builder = new groovy.json.JsonBuilder()
def root = builder.people {
    person {
        firstName 'Guillame'
        lastName 'Laforge'
        // Named arguments are valid values for objects too
        address(
               city: 'Paris',
               country: 'France',
               zip: 12345,
        )
        married true
        // a list of values
        conferences 'JavaOne', 'Gr8conf'
    }
}
def jsonStr = builder.toString() 
```

我喜欢这种类型的语法，但是如何构建一个数组类型的 json？

例如

```
[
    {"code": "111", "value":"222"},
    {"code": "222", "value":"444"}
] 
```

我发现一些文件说我们应该使用`JsonBuilder()`构造函数：

```
def mydata = [ ["code": "111", "value":"222"],["code": "222", "value":"444"] ]
def builder = new groovy.json.JsonBuilder(mydata)
def jsonStr = builder.toString() 
```

但我更喜欢第一种语法。是否能够使用它生成数组类型的 json？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T16:08:58.573

您提出的语法看起来不可能，因为我不相信它是有效的 groovy。诸如此类的闭包`{"blah":"foo"}`对 groovy 没有意义，并且您将受到语法限制的约束。我认为你能做的最好的事情是在以下范围内：

```
def root = builder.call (
   [
      {
        code "111"
        value "222"
      },
      {code "222"; value "444"}, //note these are statements within a closure, so ';' separates instead of ',', and no ':' used
      [code: "333", value:"555"], //map also allowed
      [1,5,7]                     //as are nested lists
   ]
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-07T06:32:04.530

也可以创建闭包列表并将其传递给构建器

```
import groovy.json.*

dataList = [
    [a:3, b:4],
    [a:43, b:3, c:32]
]
builder = new JsonBuilder()
builder {
    items dataList.collect {data ->
        return {
            my_new_key ''
            data.each {key, value ->
                "$key" value
            }
        }
    }
}
println builder.toPrettyString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T02:09:42.963

我最终比建造者更喜欢转换，

```
def json = [ 
            profile: [
                      _id: profile._id,
                      fullName: profile.fullName,
                      picture: profile.picture
                     ]
            ,title: title
            ,details: details
            ,tags: ["tag1","tag2"]
            ,internalTags: ["test"]
            ,taggedProfiles: []
           ] as JSON 
```

# android - 打开默认联系人应用程序，而不是我修改后的联系人应用程序

> ID：13973344
> 
> 赞同：1
> 
> 时间：2012-12-20T13:33:35.187
> 
> 标签：android, contacts

我修改了联系人应用程序（android 4.0.3 源），将其安装在我的手机（android 4.0.3）上，然后打开它。但是，当我选择一个联系人项目时，手机会自动调用联系人详细信息，而不是我自己修改的代码。为什么？它是否与 android:taskAffinity 相关联？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:51:10.987

如果要确保意图由修改后的应用程序处理，请在意图中指定包名称。或者使用选择器。

# jquery - 在jQuery中更改复选框图标类onclick

> ID：13973345
> 
> 赞同：5
> 
> 时间：2012-12-20T13:33:40.640
> 
> 标签：jquery, html

我有一些来自我的数据库的复选框，如下所示：

```
<input type="checkbox" class="hidden chkbox" id="single_checkbox_<?php echo $page->ID; ?>"    name="pages[]" value="<?php echo $page->ID; ?>"/>
<label rel="tooltip" data-original-title="Selecteer" class="btn" for="single_checkbox_<?php echo $page->ID; ?>"><i class="icon-check-empty"></i> Selecteer</label> 
```

现在复选框被隐藏了，因为我希望标签类充当复选框。

它实际上正在工作，但问题是`<i class="icon-check-empty"></i>`在单击复选框后想要更改`<i class="icon-check"></i>`并在未选中后返回 icon-check-empty。

我到目前为止的jquery是

```
$('.chkbox').click(function(){

        if($(this).is(':checked')){
            $('i.icon-check-empty').replaceWith('<i class="icon-check"></i>');

        }else{

            $('i.icon-check').replaceWith('<i class="icon-check-empty"></i>');

        }

    }); 
```

它确实改变了，但是它改变了所有的复选框，这不是我想要的。

如果有人知道如何帮助我，那就太好了。

亲切的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:34:42.527

你可以这样做

```
$("selector ").attr('class', 'newClass'); //set class (regardless of what it was) 
```

或通过

```
 $("selector ").addClass('newClass'); //add a class
 $("selector ").removeClass("second"); //remove class 
```

[**专门用于类属性的 jQuery 方法列表。**](http://api.jquery.com/category/manipulation/class-attribute/)

* * *

尝试

```
$('.chkbox').click(function () {
    var $this = $(this);
    if ($this.is(':checked')) {
        $this.next().find('i.icon-check-empty').replaceWith('<i class="icon-check"></i>');
    } else {
        $this.next().find('i.icon-check').replaceWith('<i class="icon-check-empty"></i>');
    }
}); 
```

更好的方法是使用工具

```
$('.chkbox').click(function(){
     var $ico = $(this).next().find('i');
     $ico.toggleClass('icon-check icon-check-empty');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:37:47.913

尝试

```
$('.chkbox').click(function(){
     var $this = $(this);
     if($this.is(':checked')){
         $this.next().find('i.icon-check-empty').replaceWith('<i class="icon-check"></i>');    
     } else {
         $this.next().find('i.icon-check').replaceWith('<i class="icon-check-empty"></i>');
     }
 }); 
```

或者更好地简单地切换类

```
$('.chkbox').click(function () {
    var $this = $(this),
        isChecked = $this.is(':checked');
    $this.next().find('i')
        .toggleClass('icon-check-empty', !isChecked)
        .toggleClass('icon-check', isChecked);

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T13:43:53.150

***[jsBin 演示](http://jsbin.com/efufiv/5/edit)***

```
$('.chkbox').click(function(){
     var $ico = $(this).next('label').find('i');
     $ico.toggleClass('icon-check icon-check-empty');
}); 
```

或者像：

***[jsBin 演示](http://jsbin.com/efufiv/10/edit)***

```
function checkTest( chkbx ) {

    var $ico     = $(chkbx).next('label').find('i'),
        icoClass = ['icon-check', 'icon-check-empty'],
        io       = $(chkbx).is(':checked') ? 0 : 1 ;

    $ico.removeClass().addClass( icoClass[io] );

}

$('.chkbox').each(function(){
    checkTest( this );  // Test all on page load
}).click(function(){
    checkTest( this );  // Test on click
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T13:38:02.253

也看看[.addClass()](http://api.jquery.com/addClass/) , [.removeClass()](http://api.jquery.com/removeClass/) , [.toggleClass()](http://api.jquery.com/toggleClass/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T13:39:28.697

你可以试试这个：

```
$('.chkbox').click(function(){

        if($(this).is(':checked')){
            $(this).next().find('i.icon-check-empty')attr("class",icon-check);

        }别的{

            $(this).next().find('i.icon-check').attr("class",icon-check-empty);

        }

    });

```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T13:41:12.820

你可以做：

```
$('.chkbox').click(function(){
    var i = $(this).next().find("i");

    if($(this).is(':checked')) {
        i.removeClass("icon-check-empty");
        i.addClass("icon-check");
    }
    else {
        i.removeClass("icon-check");
        i.addClass("icon-check-empty");
    }
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-20T13:42:25.707

尝试这样的事情

HTML

```
<input type="checkbox" class="chkbox" id="chkbox"  name="chkbox" value="value"/> 
```

jQuery

```
$('.chkbox').click(function(){

    console.log('click');

    if($(this).is(':checked')){
        console.log('checked');
        $("#id").addClass('icon-check');
        $("#id").removeClass('icon-check-empty');
    }
    else{
        console.log('unchecked');
        $("#id").addClass('icon-check-empty');
        $("#id").removeClass('icon-check');
    }

});​ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-20T13:43:01.400

你可以使用 removeClass 和 addClass 做你想做的事

```
$('.chkbox').click(function(){

        if($(this).is(':checked')){
           $(this).removeClass("icon-check-empty");
           $(this).addClass("icon-check");
        }else{
           $(this).removeClass("icon-check");
           $(this).addClass("icon-check-empty");

        }

    }); 
```

# macos - AppleScript 如何在代码中获取 STDIN？

> ID：13973347
> 
> 赞同：4
> 
> 时间：2012-12-20T13:33:43.507
> 
> 标签：macos, applescript, osx-mountain-lion

谷歌建议

```
echo "input" | osascript filename.scpt 
```

和`filename.scpt`

```
set stdin to do shell script "cat"
display dialog stdin 
```

但是，我只能得到空白对话框：它没有文本。如何从 AppleScript 的版本中获取标准输入？

我的操作系统版本是 OSX 10.8 Mountain Lion。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-11T04:39:16.050

根据[这个线程](https://groups.google.com/forum/#!msg/alt.comp.lang.applescript/1v0s0Tkn1bM/UBdqNBNoulwJ)，从 10.8 开始，AppleScript 现在积极关闭标准输入。通过将其滑到未使用的文件描述符，它可以被保存。这是在 bash 中执行此操作的示例。

在这里，我们再次使用`cat`从 magic 读取的子进程来处理它`fd`。

```
$ echo world | osascript 3<&0 <<'APPLESCRIPT'
>   on run argv
>     set stdin to do shell script "cat 0<&3"
>     return "hello, " & stdin
>   end run
> APPLESCRIPT
hello, world
$ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-28T16:15:47.533

抱歉，没有足够的声誉来评论答案，但我认为这里有一些重要的事情值得指出......

[@regulus6633 的答案](https://stackoverflow.com/a/13975766/365498)中***的***解决方案与将数据管道传输到`osascript`. 它只是将整个管道内容（在本例中`echo`为输出）填充到一个变量中，并将其作为命令行参数传递给 osascript。

此解决方案可能无法按预期工作，具体取决于您的管道中的内容（也许您的外壳也起作用？）......例如，如果那里有 null ( `\0`) 字符：

```
$ var=$(echo -en 'ABC\0DEF') 
```

现在您可能认为`var`包含由字符分隔的字符串“ABC”和“DEF” `null`，但事实并非如此。空字符消失了：

```
$ echo -n "$var" | wc -c
    6 
```

然而，使用[@phs 的答案](https://stackoverflow.com/a/18732806/365498)（一个真正的管道），你得到你的零：

```
$ echo -en 'ABC\0DEF' | osascript 3<&0 <<EOF
>   on run argv
>     return length of (do shell script "cat 0<&3")
>   end run
>EOF
7 
```

但这只是使用零。尝试将一些随机二进制数据`osascript`作为命令行参数传递：

```
$ var=$(head -c8 /dev/random)
$ osascript - "$var" <<EOF
>   on run argv
>     return length of (item 1 of argv)
>   end run
>EOF
execution error: Can’t make some data into the expected type. (-1700) 
```

再一次，@phs 的回答会很好地处理这个问题：

```
$ head -c8 /dev/random | osascript 3<&0 <<EOF
>  on run argv
>    return length of (do shell script "cat 0<&3")
>  end run
>EOF
8 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T15:48:56.187

我知道“将标准输入设置为执行 shell 脚本“cat””曾经有效。我无法让它在 10.8 中工作，而且我不确定它什么时候停止工作。无论如何，您基本上需要将 echo 命令输出放入一个变量中，然后该变量可以用作 osascript 命令中的参数。您的 applescript 也需要处理参数（在运行 argv 上）。最后，当您使用 osascript 时，您必须告诉应用程序“显示对话框”，否则会出错。

综上所述，这里有一个处理参数的简单applescript。将此作为 filename.scpt 的代码。

```
on run argv
    repeat with i from 1 to count of argv
        tell application "Finder"
            activate
            display dialog (item i of argv)
        end tell
    end repeat
end run 
```

这是要运行的shell命令...

```
var=$(echo "sending some text to an applescript"); osascript ~/Desktop/filename.scpt "$var" 
```

我希望这会有所帮助。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T19:28:46.470

迟到了，但最初的 AppleScript 似乎试图做一些 osascript 不允许的事情。

如果在原始 filename.scpt 这一行：

```
display dialog stdin 
```

改为：

```
tell application "System Events" to display dialog stdin 
```

然后通过标准输入（而不是命令行参数）传递一个值肯定仍然适用于 10.7.5 Lion，也许 10.8 Mountain Lion 也是如此。

# ide - Borland C++ 生成器 5.0

> ID：13973349
> 
> 赞同：2
> 
> 时间：2012-12-20T13:33:55.923
> 
> 标签：ide, c++builder-5

我在哪里可以获得 Borland C++ Builder 5.0 试用版？

我试过用谷歌搜索，但很难找到合适的合法链接:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:47:38.040

C++ Builder 5.0 于 1996 年发布并于 1997 年被取代。我怀疑你会发现最近的产品的最接近的法律试验是来自 Embarcadero 的 C++Builder XE3，它接管了 Borland 产品：

[http://www.embarcadero.com/products/cbuilder](http://www.embarcadero.com/products/cbuilder)

或者如果 Builder 5.5 是合适的，试试这里：

[https://downloads.embarcadero.com/free/c_builder](https://downloads.embarcadero.com/free/c_builder)

# google-sheets - 逐行求和导入的范围

> ID：13973354
> 
> 赞同：0
> 
> 时间：2012-12-20T13:34:05.950
> 
> 标签：google-sheets

我有一个包含三列数据的表格，比如说从 E26 到 G47。我想要的是在另一个电子表格中显示此数据的逐行总和，因此另一个电子表格的单元格 E26 包含第一张表中 E26 到 G26 的总和。我试图在代码中实现它，但我没有成功：

```
=SUM(ImportRange("key"; "sheet!E26:G47")) 
```

这将汇总一个单元格中的行和列的全部数据。

```
=SUM(ImportRange("key"; "sheet!E26:G26")) 
```

这无济于事。

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:16:12.400

单程：

`=ArrayFormula(MMULT(ImportRange("key";"sheet!E26:G47");{1;1;1}))`

# php - 来自 php 服务器的 Json 数据不起作用。

> ID：13973355
> 
> 赞同：2
> 
> 时间：2012-12-20T13:34:07.583
> 
> 标签：php, android, mysql, json

我正在 MYSQL 数据库中上传数据，同时我想检索我插入的属性之一，以满足我成功上传的需求。当我第一次按下按钮时，它只将数据上传到服务器，并没有返回任何内容。当我再次按下按钮时，它会同时执行两个过程（插入和检索数据），所以我不能第一次以 json 对象的形式返回值。

这是我的php代码`engrdatainsert.php`

```
 <?php  
$sqlCon=mysql_connect("localhost","root","");
mysql_select_db("PeopleData");
 //Retrieve the data from the Android Post done by and Engr...
 $adp_no = $_REQUEST['adp_no'];
 $building_no = $_POST['building_no'];
 $contractor_name = $_POST['contractor_name'];
 $officer_name = $_POST['officer_name'];
  $area = $_POST['area']; 
```

--------插入从Android接收到的值----------||

```
 $sql = "INSERT INTO engrdata (adp_no, building_no,area,contractor_name,officer_name)     VALUES('$adp_no', '$building_no', '$are',  '$contractor_name', '$officer_name')"; 
```

//--------现在检查插入数据的事务状态---------||

```
 $q=mysql_query("SELECT adp_no FROM engrdata WHERE adp_no='$adp_no'");
   while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output));//conveting into json array
   mysql_close();
     ?> 
```

**我的安卓代码**

```
 public void insertdata()
   {
 InputStream is=null;
 String result=null;
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
        nameValuePairs.add(new BasicNameValuePair("adp_no",adp));//"34")); 
    nameValuePairs.add(new BasicNameValuePair("building_no",bldng));//"72"));
    nameValuePairs.add(new BasicNameValuePair("area",myarea));//"72"));
    nameValuePairs.add(new BasicNameValuePair("contractor_name",cntrct));//"72"));
    nameValuePairs.add(new BasicNameValuePair("officer_name",ofcr));//"72"));
    //http post
       try{
          HttpClient httpclient = new DefaultHttpClient();
          HttpPost httppost = new   HttpPost("http://10.0.2.2/androidconnection/engrdatainsert.php"); 
               httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
           HttpEntity entity = response.getEntity();
        is = entity.getContent();
        Log.i("postData", response.getStatusLine().toString());
    }

    catch(Exception e)
    {
        Log.e("log_tag", "Error in http connection "+e.toString());
    }   
 //convert the input strem into a string value
    try
      {
            BufferedReader reader = new BufferedReader(new    InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) 
            {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }
    catch(Exception e)
    {   Log.e("log_tag", "Error converting result "+e.toString());   }
    try
    {
        JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++)
        {
            JSONObject json_data = jArray.getJSONObject(i);
           Toast.makeText(this, "data is "+json_data.getString("adp_no")+"\n",   Toast.LENGTH_LONG).show();
           String return_val = json_data.getString("adp_no");
           if(return_val!=null)
           {
             Intent offff=new Intent(this,MainActivity.class);
              offff.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
              offff.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
              //startActivity(offff);
           }
        }
    }
    //}
    catch(JSONException e)
    {      Log.e("log_tag", "Error parsing data "+e.toString());        }
   // return returnString;//*/
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T07:53:49.487

如果您想在 android 中将 JSON 用于服务器目的。就像如果您想发送数据并从服务器检索响应，那么您必须以准确的方式使用 JSON，该方式已在此链接[Json in Android 中定义](https://stackoverflow.com/questions/2818697/sending-and-parsing-json-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:40:50.630

在您的 PHP 代码中，您没有执行 INSERT 查询。你需要做这样的事情：

--------插入从Android接收到的值----------||

```
$sql = "INSERT INTO engrdata (adp_no, building_no,area,contractor_name,officer_name)     VALUES('$adp_no', '$building_no', '$are',  '$contractor_name', '$officer_name')";
mysql_query($sql) or die(mysql_error()); 
```

//--------现在检查插入数据的事务状态---------||

请注意我添加的行，它实际执行查询。

现在，您当然应该将代码升级到[mysqli](http://php.net/manual/en/book.mysqli.php)或[mysqlPDO](http://php.net/manual/es/ref.pdo-mysql.php)，因为不再支持 PHP mysql 包。

# java - 将repast simphony 1.2版升级到repast 2.0

> ID：13973356
> 
> 赞同：1
> 
> 时间：2012-12-20T13:34:11.887
> 
> 标签：java, simulation, repast-simphony

我需要你的帮助。我正在从另一个 Java 应用程序运行一个用餐模拟。我打算做的是将repast 1.2版升级到repast 2.0版。

我怎样才能做到这一点？

我试图用它的最新版本（repast 2.0）替换repast.simpony.bin_and_src.jar，但出现这样的错误：

```
repast.simphony.scenario.ScenarioLoadException: C:\workspace\.metadata\.plugins\...\score.rs\user_path.xml (The system cannot find the file specified)
at repast.simphony.scenario.ScenarioLoader.load(ScenarioLoader.java:219)
at lab.MyRunner.load(MyRunner.java:45)
at lab.MyExperiment.<init>(MyExperiment.java:39)
at servlets.SimServlet.doPost(SimServlet.java:126)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run (Unknown Source)
Caused by: java.io.FileNotFoundException: C:\workspace\.metadata\.plugins\...\score.rs\user_path.xml (The system cannot find the file specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileReader.<init>(Unknown Source)
at repast.simphony.scenario.data.UserPathFileReader.read(UserPathFileReader.java:43)
at repast.simphony.scenario.ScenarioLoader.load(ScenarioLoader.java:108) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T19:32:34.750

我看到你的问题，因为我也有这个问题。[我在此电子邮件组](http://repast.10935.n7.nabble.com/repast-model-that-ran-last-year-won-t-run-now-td8080.html)中找到了问题的原因 。对于那些对单击链接不感兴趣的人，问题出现是因为`user_path.xml`文件是在 Repast Simphony 2.0 中引入的，而早期版本不使用此文件。

显然有一种自动更新旧软件包的方法，请参阅[此处的第 2.5 节](http://repast.sourceforge.net/docs/RepastSimphonyFAQ.pdf)。但是代码仍然可能存在问题。

我将尝试在最新版本中重建我尝试使用的程序。正如尼克在该存档中的回复中所说，替代方法是安装没有`user_path.xml`文件的早期版本的 RS。

# ibm-connections - 检索博客条目的推荐：不允许的方法

> ID：13973363
> 
> 赞同：1
> 
> 时间：2012-12-20T13:34:20.233
> 
> 标签：ibm-connections, ibm-sbt

我正在尝试检索博客条目的推荐者提要，如此处 API 文档中所述：

[http://www-0.lotus.com/ldd/appdevwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+API+Documentation#action=openDocument&res_title=Getting_a_list_of_recommenders_ic40a&content=pdcontent](http://www-0.lotus.com/ldd/appdevwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+API+Documentation#action=openDocument&res_title=Getting_a_list_of_recommenders_ic40a&content=pdcontent)

问题是，我总是得到一个 http 405: method not allowed。这是一个已知问题吗？我做错什么了吗？更准确地说，我在这里处理一个构思博客的条目。我的请求已通过社区和创意博客的所有者的身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:00:12.913

答案是 Benny 和我的评论组成 - https:///blogs//api/recommend/entries/ 使人们能够找到博客投票的详细信息。

# liferay - Liferay 6.1 组织的访问页面

> ID：13973364
> 
> 赞同：1
> 
> 时间：2012-12-20T13:34:21.413
> 
> 标签：liferay

我对 Liferay 很陌生。我必须制作一个包含 3 个页面的门户：主页、Restau1 和 Restau2。我还需要指定 3 个管理员：主管理员、Restau1 页面的管理员和 Restau2 页面。他们将更改这些页面的内容。我创建了两个组织 org1 和 org2 并向它们添加用户。而且我不知道如何将这些用户“绑定”到特定页面。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:14:48.947

阅读用户指南对于每个涉足 Liferay 的人来说都是不可避免的。角色、权限、用户组更为基础。读完本章，你不仅会知道该怎么做，还会了解函数背后的原理和机制。

[http://www.liferay.com/hu/documentation/liferay-portal/6.1/user-guide/-/ai/administering-liferay-portal](http://www.liferay.com/hu/documentation/liferay-portal/6.1/user-guide/-/ai/administering-liferay-portal)

# windows - 将特定列从一个文本文件复制到另一个

> ID：13973367
> 
> 赞同：4
> 
> 时间：2012-12-20T13:34:34.767
> 
> 标签：windows, batch-file

我有一堆 .txt 文件，我想将特定列（从所有这些列）复制到一个 .txt 文件中。需要创建 output.txt 文件

例如

```
file1.txt
a b c
j k l

file2.txt
d e f
m n o

file3.txt
g h i
p q r

output.txt
b e h
k n q 
```

同样，我正在寻找可以帮助我实现这一目标的 Windows 批处理文件。任何形式的帮助将非常感激 ：）。我只是批处理脚本的新手，因此如果这听起来是一个非常基本的问题，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:13:01.420

这可能不是您要寻找的答案，但是在处理批处理文件中的字符串时，我遇到了类似但不完全的问题。我变得非常沮丧，最终学习并使用了python。

在 Python 中，这很简单：

```
for i in range(1,4): 
    f='c:\\file'+str(i)+'.txt' # Creates a variable for file1.txt, file2.txt formatted  as c:\file1.txt. Path can be changed as needed. 
    f = open(f) # Opens the file 
    string=f.read() # Adds the contents of the file to a string
    print(string.split('\t')[1]+'\t'+string.split('\t')[4]) # splits the string by tabs, and returns the 2nd and 5th item. 
```

这会将其打印到屏幕上，从这里将其写入文件是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:24:20.920

这个批处理解决方案将从文件夹中每个文件的所有行中取出第二个字符并将它们输出到`output.txt`，哇，真是一口！:)

```
for %%a in (file*.txt) do (
for /f "tokens=2 delims= " %%b in (%%a) do echo %%b >>output.txt
) 
```

让他们排队会更加困难，这是绝对必要的，还是他们可以在列表中，每行一个字符？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T21:12:54.313

**编辑：这样**做的不同方式（可能更直接），这个有另一个限制 - 可用变量/环境的大小。空间（对于 XP，大约为 32kB，不限于 Vista 向上 - 至少每个 MS 文档）。它创建*一种*数组变量来保存你的转置行，然后输出它们：

```
@echo off
setlocal enabledelayedexpansion

set "tab=   "

for %%F in (file*.txt) do (
  set /a count=0
  for /f "tokens=2 delims=%tab%" %%L in (%%F) do (
    set /a count+=1
    for /L %%T in (!count!,1,!count!) do (
       set L[!count!]=!L[%%T]!%%L%tab%
    )
  )
)
for /L %%L in (1,1,%count%) do echo !L[%%L]! 
```

首先，让我说这`batch`不是最适合这项任务（这本来是微不足道的，在 中说`C`），但如果你必须使用它，这里有一种方法：

```
 @echo off
    setlocal enabledelayedexpansion
    set "tab=   "

    for /f %%C in ('dir /b file*.txt') do set /a count+=1

    (for %%F in (file*.txt) do (
      set line=0
      for /f "tokens=2 delims=%tab%" %%V in (%%F) do (
        set "outline=%%F"
        for /l %%N in (1,1,!line!) do (set "outline=%tab%!outline!")
        set outline=!outline!%tab%%%V
        set /a line+=1
        echo !outline!
      )

    )) >presorted.txt

    set /a cutoff=%count%-1

    set line=0
    for /f "tokens=2 delims=%tab%" %%O in ('sort /r presorted.txt') do (
      set outp=%%O%tab%!outp!
      set /a lc=!line!^%%count%
      if !lc!==%cutoff% (
        echo !outp!
        set  "outp="
      )
      set /a line+=1
    ) 
```

这个怎么运作：

*   首先，检查将处理多少个文件。这给出了列数。（第一`for`和`count`可变）
*   读取每个输入文件，修改输出请求列，使其前面有等于行号的制表符和中间文件的文件名。（由 分隔的第二个块`()`）
*   对该文件进行排序，使连续的行对应于最终输出中的连续列 ( `sort /r presorted.txt`)
*   `modulo count`使用开始新行（最后一个`for`块）将行块转置为列

笔记：

*   列的顺序取决于文件名的排序顺序。
*   所有文件的行数必须相同
*   `"tab= "`（在第 3 行）必须包含实际选项卡
*   它采用 ascii-ish 编码（`tab`在任何可打印字符之前排序）。
*   它假定`!`输入中没有字符（当延迟扩展打开时，它们需要特殊处理）
*   输出到屏幕。如果需要文件输出，将代码放入批处理文件，然后运行`mybatchfile.bat >output.txt`

# android - 如何在 LinearLayout 中对齐视图

> ID：13973368
> 
> 赞同：0
> 
> 时间：2012-12-20T13:34:36.710
> 
> 标签：android, android-linearlayout

我试图将一个`edittext`和一个带有图像作为背景的按钮水平放置在 a 内，`linearlayout`但我的按钮碰巧移动了一点，看起来很奇怪。我想让`edittext`and`button`从顶部和底部对齐。

```
 <LinearLayout
    android:id="@+id/footerlayout"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:gravity="center_horizontal"
    android:orientation="horizontal" 
    android:weightSum="3">

<EditText
    android:id="@+id/textbox"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:background="@drawable/textbox2"
    android:gravity="top|left"
    android:hint="Type to text"
    android:layout_weight="2.5" />

    <Button
        android:id="@+id/sendbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/send2323"
        android:gravity="center" 
        android:layout_weight="0.5"/>

    <requestFocus />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:37:44.120

尝试

```
android:layout_height="fill_parent" 
```

对于按钮和编辑文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:46:47.570

这是因为你让 EditText: android:layout_height="50dp", 和 Button: android:layout_height="wrap_content"

还要注意 parent align 仅对 RelativeLayout 有用试试这个：

```
<LinearLayout
    android:id="@+id/footerlayout"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:gravity="center_horizontal"
    android:orientation="horizontal" 
    android:weightSum="3">

<EditText
    android:id="@+id/textbox"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:background="@drawable/textbox2"
    android:gravity="top|left"
    android:hint="Type to text"
    android:layout_weight="2.5" />

    <Button
        android:id="@+id/sendbutton"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:background="@drawable/send2323"
        android:gravity="center" 
        android:layout_weight="0.5"/>

</LinearLayout> 
```

# iis-7 - iis服务器解析错误？

> ID：13973373
> 
> 赞同：0
> 
> 时间：2012-12-20T13:35:05.203
> 
> 标签：iis-7

我正在尝试在本地将我的项目上传到 IIS 7 服务器中。我的页面中有一个解析器错误。

```
 Parser Error Message: Could not load the assembly 'App_Web_jscjs6lb'. Make sure that it is compiled before accessing the page. 
```

![在此处输入图像描述](../Images/42d856c14caeee6fb7dd36d982b1cfea.png)

# sql - SAS SQL vs Oracle Query 没有根据日期返回相同的结果

> ID：13973376
> 
> 赞同：1
> 
> 时间：2012-12-20T13:35:18.693
> 
> 标签：sql, oracle, tsql, sas

我希望这个问题是有道理的。我在 SAS 中使用 SQL 来查询 Oracle 数据库。我也使用 SQL Developer。我有一个我知道有效的 SQL 查询，但是当我尝试修改它以在 SAS(T/SQL) 中工作时，结果不一样。

我正在尝试返回结束日期在 2012 年 3 月之内的活动的客户。谁能告诉我我做错了什么？

**工作查询：**

```
select distinct customer_key
from edw.customer_product_fact
where time_key = '31-jan-12'
and campaign_active = 'Y'
and campaign_cd is not null 
and last_day(campaign_end_date) = add_months(time_key,2) 
```

**SAS查询：**

```
select distinct customer_key
from edw.customer_product_fact
where time_key = '31-jan-12'd
and campaign_active = 'Y'
and campaign_cd is not null
and intnx('month',campaign_end_date, 0, 'end') =intnx('month', time_key, 2, 'end'); 
```

我尝试使用`dateadd`，`intnx`但 SAS 不支持它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:13:36.560

我假设显示为**WORKING QUERY**的代码示例是您可以在 Oracle 工具中运行的东西，而**SAS QUERY**是您使用的东西`PROC SQL`（其中 EDW 指的是先前分配的`LIBNAME`语句）。在 SAS 世界中，后一个示例使用“隐式传递”，这意味着您的 SAS 代码被尽可能地转换为 Oracle 代码。这就是为什么`dateadd`（Oracle 函数）在 SAS 中不起作用的原因。

如果您习惯编写本机 Oracle SQL，您可能会发现使用`PROC SQL`. 一个优点是您可以在查询中使用 SAS 宏变量；当 Oracle 处理它们时，它们将被“扩展”。

换句话说，要创建一个名为**RESULTS**的包含查询结果的 SAS 数据集，请尝试以下操作：

```
%let MY_PARM = '31-jan-12';
proc sql;
   connect to oracle (user="userid" password="password");
   create table RESULTS as
   select * from connection to oracle (

      select distinct customer_key
      from edw.customer_product_fact
      where time_key = &MY_PARM
        and campaign_active = 'Y'
        and campaign_cd is not null 
        and last_day(campaign_end_date) = add_months(time_key,2)

    );
quit; 
```

括号之间的所有内容都按照书面形式直接提交给 Oracle，这意味着您可以利用任何特定于 Oracle 的语法。我正在展示如何使用 SAS 宏变量 (&MY_PARM) 来说明该功能；你可能不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:48:54.753

如果我没记错的话，存储在 Oracle 中的日期应该始终在 SAS 中作为日期时间来处理。尝试将日期更改为日期时间格式或使用 datepart 函数从日期时间字段中提取日期部分。

```
select distinct customer_key
from edw.customer_product_fact
where datepart(time_key) = '31jan12'd
and campaign_active = 'Y'
and campaign_cd is not null
and intnx('month',datepart(campaign_end_date), 0, 'end') =intnx('month', datepart(time_key), 2, 'end'); 
```

# java - DB命中比访问Java中的集合更昂贵吗？

> ID：13973378
> 
> 赞同：4
> 
> 时间：2012-12-20T13:35:29.270
> 
> 标签：java, database, performance, collections

刚刚实现了一个设计，我在 hashmap 中缓存了一些数据并从中检索数据，而不是从 DB 中查询相同的数据。

我的想法正确吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T13:37:54.863

将数据副本保存在内存中几乎肯定会比从数据库中获取数据要快。

也就是说，还需要进一步考虑：

1.  当您持有内存副本时，数据库中的数据可以更改吗？如果是这样，您将如何处理？
2.  内存消耗会成为问题吗？
3.  你确定你正在优化一个真实的而不是想象的瓶颈吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T13:38:14.110

点击一个集合将比点击一个数据库快几个数量级，尤其是在另一台服务器上（由于通信滞后）

那说：

*   数据库可以自己缓存数据，因此这种优化可能不是必需的
*   如果数据非常大，您将不得不处理内存消耗
*   必须处理对数据的更新，例如使缓存无效

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T15:43:44.230

如果您仔细考虑与数据库交谈时会发生什么，您可以自己回答这个问题：

1.  您的程序必须将查询发送到数据库。根据数据库服务器是在进程内运行还是在网络上的其他位置运行，这可能需要几微秒到几毫秒不等。
2.  数据库服务器必须解析您的查询并生成执行计划。根据服务器的不同，它可能会为频繁执行的查询缓存一个执行计划。如果没有，请再计划几微秒以生成计划。
3.  数据库服务器必须执行您的计划，读取访问数据所需的任何磁盘块。每次磁盘访问将花费数十毫秒。根据表的大小以及索引的好坏，您的查询可能需要几秒钟的时间。
4.  数据库服务器必须打包数据并将其发送回应用程序。同样，取决于它是在进程中还是通过网络，这将需要几微秒到几毫秒，并且会根据发回的数据量而有所不同。
5.  您的应用程序必须将检索到的数据转换为有用的形式。这可能是一微秒或更短。

相比之下，查找散列数据结构需要几次内存访问，每次可能需要几纳秒。相差[几个数量级](http://en.wikipedia.org/wiki/Orders_of_magnitude_%28time%29)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T13:42:57.453

要考虑的主要问题是缓存的**大小**：在某个阈值之后，您造成的损害多于好处。例如，如果缓存有一百万个条目，并且每个条目是 1 KB（考虑到每个对象的开销，访问并不难），那么您已经占用了整整 GB 的堆。在这种情况下，major GC 的性能也会很糟糕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T13:39:03.037

总是比你在代码级别做的任何事情都更昂贵。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T13:39:06.050

*这样看：要查询数据库，无论如何*都必须将字节复制到内存中。因此，仅仅访问内存总是比访问数据库要快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T13:39:09.210

如果计算哈希码的成本很低，应该会快得多，它还取决于条目的数量（因为会有更多的冲突）

# html - 在页面中嵌入带有css的html字符串而不影响页面的样式

> ID：13973381
> 
> 赞同：2
> 
> 时间：2012-12-20T13:35:36.383
> 
> 标签：html, css, iframe, embed

我有一些用于页面的 CSS。我有一个字符串形式的 html 代码块，我只是在页面上编写。

问题是 html 字符串中包含自己的 css，它覆盖了页面的 css。我只需要将该css应用于字符串变量中的html，而不是整个页面。

我怎样才能做到这一点？我知道我可以使用 iframe，但它需要“源”属性。我拥有的 html 不是一个不同的页面，而只是一个简单的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:52:39.527

HTML 字符串的片段可能会有所帮助，但如果我正确理解了您的问题，则无法阻止新的 CSS 影响整个页面。但是，如果您可以根据需要修改 HTML 字符串，那么您只需正确设置样式即可。

假设您的字符串类似于

```
<style type="text/css">
    h1 {color:red;}
    p {color:blue;}
</style>
<div>Some HTML inside</div> 
```

然后你将不得不相应地更改*div*的类和 CSS，例如：

```
<style type="text/css">
    .myclass h1 {color:red;}
    .myclass p {color:blue;}
</style>
<div class="myclass">Some HTML inside</div> 
```

这样，新的 CSS 只会影响新的内容。

# android - Intent 额外字段未更新

> ID：13973383
> 
> 赞同：1
> 
> 时间：2012-12-20T13:35:41.973
> 
> 标签：android, android-intent, notifications

我用这样的活动创建一个通知，

```
 public static void buildNotification(Context context, int id, String notiContent){
          NotificationManager notificationManager 
          = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
          NotificationCompat.Builder builder = new NotificationCompat.Builder(context);

          Intent intent = new Intent(context, NotifyActivity.class);
          intent.putExtra("notiContent", notiContent);
          intent.putExtra("notiId", id);
          intent.setFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);

          PendingIntent pendingIntent 
          = PendingIntent.getActivity(context, 0, intent, 0);

          builder
          .setSmallIcon(R.drawable.ic_launcher)
          .setContentTitle("")
          .setContentText(notiContent)
          .setContentInfo(""+Math.random())
          .setTicker("!")
          .setLights(0xFFFF0000, 500, 500) //setLights (int argb, int onMs, int offMs)
          .setContentIntent(pendingIntent)
          .setAutoCancel(true);

          Notification notification = builder.build();
          nc++;
          notificationManager.notify(nc, notification);
 } 
```

但是该`onCreate`方法总是获得相同的额外数据（`notiId`）。

如何强制重新创建 Intent ？还是有其他方法可以将额外数据传递给活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:41:24.130

您可以使用`onResume()`方法并使用`intent.setAction("intentAction");`并获取它`onResume()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:42:24.220

`SharedPreferences`在`onPause()`您想要获取以下更新值的活动中使用`notid`：

```
 @Override
protected void onPause() 
{
  super.onPause(); 
  SharedPreferences preferences = getSharedPreferences("sharedPrefs", 0);
  SharedPreferences.Editor editor = preferences.edit();
  editor.putString("notid", "Your notid value"); // value to store
  editor.commit();    
} 
```

并得到notid的值如下：

```
 SharedPreferences preferences = getSharedPreferences("sharedPrefs", 0);
  String notid= preferences.getString("notid"); 
```

# io - 如何在 Windows Store App Testproject 中使用文件？

> ID：13973384
> 
> 赞同：1
> 
> 时间：2012-12-20T13:35:44.800
> 
> 标签：io, visual-studio-2012, windows-store-apps, file-access

制作 Windows 应用商店应用程序让我感到手足无措。它将基于文本的文件转换为类。为此，应用程序需要文件访问。我能做到的。但我创建了一个 Windows Store App Testproject，其中包含我希望应用程序解析的基于文本的示例文件。我尝试为测试项目添加对 Documents 文件夹的访问权限，但我似乎无法获得文件访问权限。它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:23:21.260

可以，但是真的不推荐。首先我会告诉你怎么做：-

转到 package.appxmanifest 和功能。然后勾选“文档库”

然后，您可以执行以下操作：-

```
StorageFolder storageFolder = KnownFolders.DocumentsLibrary;
StorageFile file = await storageFolder.GetFileAsync("filename.txt"); 
```

请注意，如果文件不存在，它将引发 IOException - 无法事先检查:-(

但是，这不会被商店接受。推荐的方法是使用文件选择器。代码非常简单，我在下面展示了它：-

```
FileOpenPicker openPicker = new FileOpenPicker(); 
openPicker.ViewMode = PickerViewMode.Thumbnail; 
openPicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary; 
openPicker.FileTypeFilter.Add(".txt");  
StorageFile file = await openPicker.PickSingleFileAsync(); 
```

这将很好地进入商店。

# c# - EntityFramework 和没有基类的 TPT

> ID：13973385
> 
> 赞同：2
> 
> 时间：2012-12-20T13:35:57.107
> 
> 标签：c#, entity-framework

我们正在使用 C# MVC .NET4。EF5（代码优先）。

我们正在尝试构建一个系统，该系统应该动态地允许用户将额外的属性“附加”到任何实体。

假设我们有 ProductClass 和 Products。每个实体都有一些“标准”字段，但用户可能决定将任意属性添加到任何记录，作为键值对，例如说 Product 123 有“StockMax”=“10”。

由于我们有许多可能具有“附加”属性的实体（+10），我们将创建单个“附加属性”实体/类（在 SQL 中，它将转换为具有 PK={ParentTable、ParentId、PropertyKey} 的表）。这样，我们将为所有实体的附加属性保留一个类（这将有利于构建用户界面）。

我看到我可以通过拥有一个基类在 EF 中实现这一点：

```
class EntityWithAttachableProperty { 
          public System.Guid Id {get;set;}
          public ICollection<MyProperty> MyProperties {get;set;} 
} 
```

然后从该类继承到我的实体，例如：

```
 class Product : EntityWithAttachableProperties { 
      public string name {get;set;} 
     etc
 } 
```

我的问题是我不想为此使用继承。我将被迫在逻辑上对不相关的事物进行分组。我还将在 SQL 中获得一个我不需要的巨大 EntityWithAttachableProperties 表。

那么，有没有办法在没有基类的情况下完成 TPT 呢？（也许通过模型构建器）。这样我就会得到这样的课程：

```
class Product { 
     public System.Guid Id {get;set;} 
     public string name {get;set;}
     public ICollection<MyProperty> MyProperties {get;set;}
     etc
}

class ProductClass { 
     public System.Guid Id {get;set;} 
     public string Classname {get;set;}
     public ICollection<MyProperty> MyProperties {get;set;}
     etc
} 
```

请注意，当我这样做时，EF 会尝试将 Product_Id 和 ProductClass_Id 添加到 MyProperties 表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:45:01.513

如果您使用 Fluent 定义 ID 列的映射，它是否有效？我怀疑 EF 是否允许您定义它，但由于它是一种非标准方法，它不会假设您在这里尝试做什么（因此尝试映射到单独的 ID 列）。在你的 DbContext 类中这样的东西（我知道这是不正确的，有人可能会改进）：

```
modelBuilder.Entity<Product>()
            .HasMany(o=>o.MyProperty)
            .Map(o=>o.MapKey("Id")); 
```

# security - Symfony2 登录事件监听器和 security.interactive_login 事件从未使用 FOSUser 触发

> ID：13973389
> 
> 赞同：7
> 
> 时间：2012-12-20T13:36:14.260
> 
> 标签：security, events, symfony, login, fosuserbundle

我正在尝试添加一个 Symfony2 登录事件侦听器，目标是在用户登录时设置数据库存储的区域设置，在每个请求上，并回退到没有用户登录的默认设置。我使用 FOSUserBundle，并试图让 security.interactive_login 事件起作用。我在互联网上找到了很多这样的代码：http: [//dev.dbl-a.com/symfony-2-0/how-to-add-a-symfony2-login-event-listener/](http://dev.dbl-a.com/symfony-2-0/how-to-add-a-symfony2-login-event-listener/)

我有自己的 FOSUserBundle 子包和 services.yml 中的这个实现：

```
my_user.security.interactive_login_listener:
        class: My\UserBundle\EventListener\UserListener
        arguments: [@security.context, @doctrine]
        tags:
            - { name: kernel.event_listener, event: security.interactive_login, method: setLocaleForAuthenticatedUser }

my_user.security.kernel_request_listener:
        class: My\UserBundle\EventListener\UserListener
        arguments: [@security.context, @doctrine]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: setLocaleForUnauthenticatedUser } 
```

问题是，security.interactive_login 事件永远不会被触发，即使在记录时，即使在记录时也是如此。相反，我的 setLocaleForUnauthenticatedUser 总是被触发。我发现的每个代码示例似乎都能流畅运行，我的应用程序有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:51:16.873

也想通了，并且或多或少做了相同的工作：确实没有问题，但是登录后有某种重定向，因此分析器永远不会显示触发交互式登录侦听器的实际请求。

```
use Symfony\Component\Security\Http\Event\InteractiveLoginEvent,
    Symfony\Component\Security\Http\Event\FilterControllerEvent,
    Symfony\Component\HttpKernel\Event\GetResponseEvent,
    Symfony\Component\HttpKernel\HttpKernelInterface;
use FOS\UserBundle\Entity\User as BaseUser;

class LocaleListener {

    protected $container;
    protected $availableLocales;

    public function __construct(\Symfony\Component\DependencyInjection\Container $container, $availableLocales) {
        $this->container = $container;
        $this->availableLocales = $availableLocales;
    }

    public function onKernelRequest(GetResponseEvent $event) {
        $request = $event->getRequest();
        $locale = $request->getPreferredLanguage($this->availableLocales);
        $session = $request->getSession();

        $token = $this->container->get('security.context')->getToken();
        if( is_object( $token ) ) {
            $user = $token->getUser();
            if ($user instanceof BaseUser) {
                $locale = $user->getLocale();
            }
        }

        $session = $this->container->get('session');
        $session->set('_locale', $locale);
        $request->setLocale($locale);
    }
 } 
```

在 services.yml 中：

```
user.locales.kernel_request_listener:
        class: Acme\UserBundle\EventListener\LocaleListener
        arguments: [ @service_container, [ 'en', 'fr', 'ru' ] ]
        tags: [{ name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: -255 }] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T03:20:08.500

同样的问题。但问题不在于没有触发事件。问题是重定向后，请求语言环境丢失了。在此链接的帮助下：

[使用 symfony 2.1 更改语言环境](https://stackoverflow.com/questions/12146282/changing-locale-with-symfony-2-1)

（并基于[此](https://gist.github.com/1670163)）

我想出了如何解决它。在用户监听器中：

```
class UserListener
{
    private $session;

    public function setSession($session) {
        $this->session = $session;
    }    

    public function setLocaleForUnauthenticatedUser(GetResponseEvent $event)
    {
        if (HttpKernelInterface::MASTER_REQUEST !== $event->getRequestType()) {
            return;
        }
        $request = $event->getRequest();
        if ('undefined' == $request->getLocale()) {
            if($locale = $request->getSession()->get('_locale')) {
                $request->setLocale($locale);
            } else {
                $request->setLocale($request->getPreferredLanguage());
            }
        }
    }

    public function setLocaleForAuthenticatedUser(InteractiveLoginEvent $event)
    {
        $user = $event->getAuthenticationToken()->getUser();

        if ($locale = $user->getLocale()) {
//            $event->getRequest()->setLocale($user->getLocale());
            $this->session->set('_locale', $locale);
        }
    }
} 
```

在 services.yml 中，您应该声明：

```
your_listener_name:
    class: ...\UserBundle\EventListener\UserListener
    calls:
        - [ setSession, ['@session'] ]
    tags:
        - { name: kernel.event_listener, event: security.interactive_login, method: setLocaleForAuthenticatedUser } 
```

希望这可以帮助。

# asp.net-mvc-3 - 如何从我的 NopCommerce 插件添加视图？

> ID：13973390
> 
> 赞同：0
> 
> 时间：2012-12-20T13:36:14.767
> 
> 标签：asp.net-mvc-3, nopcommerce

我正在 NopCommerce 中进行定制。我必须创建类别页面的自定义视图。我正在通过我的插件管理它。我已经从我的插件中覆盖了 Category Action 方法，但需要调用视图文件。

我怎样才能调用视图？我不想使用嵌入式资源类型视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:50:49.250

简短的回答。你不能按照你想要的方式去做。

最简单的解决方案是创建一个新主题（或使用现有主题）。然后将要更改的视图复制到此主题，它将使用此主题而不是核心主题。

*下面的一般建议，不是下面解决方案的一部分*

* * *

如果你这样做，你将不得不手动将其余的方式与官方的 nop-solution 合并。如果您的更改不是极端的，我建议更改现有视图和方法（您正在编辑核心），并继续与官方解决方案合并。否则你会给自己制造问题。

相反，我会利用 Mercury Synchronize 选项，您可以在其中同步自己的代表和官方 nop。

另外，您为什么不利用 NOP 中的类别模板系统？既然您说您正在管理类别视图？

我基本上认为你一开始就走错了路……

# audio - youtube音频的实时处理

> ID：13973392
> 
> 赞同：0
> 
> 时间：2012-12-20T13:36:34.560
> 
> 标签：audio, youtube, youtube-api, web-audio-api

是否可以使用 youtube api 将音频流重定向到可以实时处理的位置？

[我知道](https://stackoverflow.com/questions/13826330/audio-effects-with-nacl-extension)如果我能以某种方式将音频数据输入 ScriptProcessorNode，它可以被转发到在后台等待执行重型 DSP 的 NaCl 模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:45:16.020

如果您使用的是 YouTube HTML5 体验，那么您应该能够通过 createMediaElementSource() 从元素中挂钩音频。您无法从基于 Flash（或其他基于对象）的体验中做到这一点 - 因此，不要使用受保护的内容。

顺便说一句 - 为什么使用 ScriptProcessor 转发到 NaCl 来做繁重的 DSP？使用 Web 音频 API 本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:36:17.773

请在此处查看我的回复：

[有没有办法使用 Javascript 获取/设置视频或 Flash 对象的低音和高音？](https://stackoverflow.com/questions/13419153/is-there-any-way-to-get-set-the-bass-and-treble-of-a-video-or-flash-object-with/13460016#13460016)

此外，虽然理论上可以通过 C++ 应用程序实现，但我还建议您仔细阅读 YouTube 服务条款 - 特别是您不能分离音频或视频流，或修改它们。

[https://developers.google.com/youtube/terms](https://developers.google.com/youtube/terms)

# sql - SQL 获取所有列的分隔结果

> ID：13973396
> 
> 赞同：5
> 
> 时间：2012-12-20T13:37:09.723
> 
> 标签：sql, sybase

我正在编写一个简单的 SQL 语句来生成要加载到数据库中的 BCP 文件。

这些 BCP 文件采用以下格式：

```
1|name|otherfield|otherfield1 
```

要构建这样的文件，我目前正在做：

```
SELECT id+"|"+name+"|"+otherfield+"|"+otherfield1+"\n" FROM table 
```

是否有一个 select 语句可以选择`every column`而不必命名它们？

就像是

```
SELECT * with "|" from Table 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:40:12.203

你可以使用[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/refman/5.6/en/select-into.html).

```
SELECT * INTO OUTFILE 'filename'
FIELDS TERMINATED BY '|'
LINES TERMINATED BY '\n'
FROM yourtable; 
```

[http://dev.mysql.com/doc/refman/5.6/en/select-into.html](http://dev.mysql.com/doc/refman/5.6/en/select-into.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:28:16.167

对于 Sybase ASE，为什么不使用内置的**bcp**实用程序更改分隔符。默认情况下它将捕获所有列。

```
bcp MYDATABASE..MYTABLE out MYTABLEFILE.bcp -Uusername -Ppassword -SMYSERVER -c -t| 
```

您必须使用**-t**选项来设置列分隔符，它只能与指定基于“字符”（人类可读）的 bcp 输出的**-c选项一起使用。**如果您在基于 Unix/Linux 的系统上，您可能需要转义管道，例如**-\t**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:42:20.493

如果你想在文件中输出，那么你可以试试这个

```
SELECT *
INTO OUTFILE 'D://abc.txt'
FIELDS TERMINATED BY '|' LINES TERMINATED BY '\r\n'
FROM table 
```

在这里，我用于`\r\n`在新行上输出每一行（在窗口上）

# ruby-on-rails-3 - Rails 方法运行设置超时 - 确定线程在方法中“停留”多长时间

> ID：13973411
> 
> 赞同：3
> 
> 时间：2012-12-20T13:37:59.597
> 
> 标签：ruby-on-rails-3, methods, timeout

我有一个任务可以做很多事情，其中​​一些可能会“阻塞”，因为它调用了外部 API。

我的问题：是否可以确定 RailsThread 在方法中“停留”多长时间？依此类推，如果花费太长时间，则会中断它或重新加载。问题是没有错误，所以我不能做救援之类的事情。

我想做的伪代码：

```
def aMethod
  #doSomethingThatCanBlock
  if takeMoreThan1000ms
    #reloadMethod or break
  end
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T15:30:32.870

```
require 'timeout'

def a_method(iterations)
  Timeout::timeout(1) do # 1 second
    iterations.times { |i| print("#{i} "); sleep(0.1) }
  end
rescue Timeout::Error
  print("TIMEOUT")
ensure
  puts
end 
```

还有一个例子：

```
irb(main):012:0> a_method(3)
0 1 2 
=> 3
irb(main):013:0> a_method(30)
0 1 2 3 4 5 6 7 8 9 TIMEOUT
=> nil 
```

# ios - 按下 UIbutton 显示 UITextView 频繁

> ID：13973420
> 
> 赞同：0
> 
> 时间：2012-12-20T13:38:18.900
> 
> 标签：ios, iphone

如果您按下 UIbutton 显示 UITextView Ô 再次按下 UIbutton 再次显示 UITextView 将请求代码：/

![在此处输入图像描述](../Images/bdbe2e28de4c9992434c558aa830167a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:46:56.373

文件中只有一个 int 变量，`.h`如下所示。

```
int AddNote; 
```

在`viewDidLoad:`方法中分配 0 之后，例如..

```
AddNote = 0; 
```

然后在下面的方法中创建它..

```
-(IBAction)btnAddTextView:(id)sender
{

    UITextView *txtAddNote=[[UITextView alloc]initWithFrame:CGRectMake(AddNote * 180,20, 180, 44)];
    [txtAddNote setBackgroundColor:[UIColor scrollViewTexturedBackgroundColor]];
    [txtAddNote setFont:[UIFont fontWithName:@"Helvetica-Bold" size:15]];
    txtAddNote.layer.borderWidth = 2.0;
    txtAddNote.layer.borderColor= [UIColor redColor].CGColor;
    AddNote++;

    txtAddNote.tag = AddNote;
    txtAddNote.userInteractionEnabled= YES;
    txtAddNote.delegate = self;
    txtAddNote.textColor = [UIColor whiteColor];
    //    [txtAddNote sizeToFit];
    //    [txtAddNote setClipsToBounds:YES];
    //    [viewTxt setClipsToBounds:YES];
    [self.view addSubview:txtAddNote];

    [txtAddNote release];
} 
```

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:42:49.927

您可以使用`UITextView`.

这将显示第一个，然后是第二个，然后隐藏两者，然后重新开始。

```
if (myTextView2.hidden) {
    if (myTextView1.hidden) {
        myTextView1.hidden = NO;
    }
    else {
        myTextView2.hidden = NO;
    }
}
else {
    myTextView1.hidden = YES;
    myTextView2.hidden = YES;
} 
```

如果你只想在第一个和第二个之间切换，你可以这样做：

```
if (myTextView1.hidden) {
    myTextView1.hidden = NO;
    myTextView2.hidden = YES;
}
else {
    myTextView1.hidden = YES;
    myTextView2.hidden = NO;
} 
```

# django - django 我们可以在预取相关模型上选择相关字段吗？

> ID：13973422
> 
> 赞同：39
> 
> 时间：2012-12-20T13:38:21.527
> 
> 标签：django

为了简单起见，假设这些是 django 模型：

```
class A():

    a = manytomany('B')

class B():

    b = charfield()
    z = foreignkey('C')

class C():

    c = charfield() 
```

我们可以做这样的事情来获取`z`也：

```
foo = A.objects.get(pk = 1).prefetch_related('a').select_related('a__z') 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2014-10-19T15:08:19.723

[这个答案](https://stackoverflow.com/a/13973771/687488)对于 1.7 之前的 Django 版本是正确的。它产生三个查询：首先，获取 的实例`A`，然后获取其相关的实例，`B`最后获取与第二个查询中获取的实例`C`相关的实例。`B`

在 Django 1.7 之前，这是您能做的最好的事情，尽管理论上第二个查询可以选择所有`B`对象以及`C`通过`z` `ForeignKey`.

从 Django 1.7 开始，有一个更高级的[`django.db.models.Prefetch`](https://docs.djangoproject.com/en/stable/ref/models/querysets/#prefetch-objects)类可以让你做到这一点。您可以自`Prefetch`定义用于预取相关对象的查询集，如下所示：

```
foo = A.objects.prefetch_related(
    Prefetch('a', queryset=B.objects.select_related('z'))
).get(pk=1) 
```

这只会产生两个查询（而不是使用 时的三个`prefetch_related('a__z')`），并让数据库处理第二个连接，理论上这应该会带来更好的性能。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-20T13:57:50.680

您只需要一个`prefetch_related`电话：

```
foo = A.objects.prefetch_related('a__z').get(pk=1) 
```

这将预取两个表。在 Django 1.7+ 中，您可以通过使用`Prefetch`对象来提高性能，如[koniiiik 的回答](https://stackoverflow.com/a/26451891/113962)。

# asp.net - SignalR 方法访问异常

> ID：13973425
> 
> 赞同：5
> 
> 时间：2012-12-20T13:38:37.983
> 
> 标签：asp.net, signalr

当我尝试调试一个简单的信号器应用程序时出现此错误

> 尝试通过方法 'Microsoft.AspNet.SignalR.RouteExtensions.MapHubs(System .Web.Routing.RouteCollection、System.String、Microsoft.AspNet.SignalR.IDependencyResolver)' 失败

=== 已编辑 [添加更多信息] ===

好的，通过在 Nuget 控制台上键入这个添加 SignalR

```
Install-Package Microsoft.AspNet.SignalR -pre 
```

[我在这里](https://github.com/whebz/SignalRTest)添加了一个回购

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:29:11.177

```
<?xml version="1.0" encoding="utf-8"?>
  <packages>
    <package id="jQuery" version="1.6.4" targetFramework="net45" />
    <package id="Microsoft.AspNet.SignalR.Core" version="1.0.0-rc1" targetFramework="net45" />
    <package id="Microsoft.AspNet.SignalR.Hosting.AspNet" version="1.0.0-alpha2" targetFramework="net45" />
    <package id="Microsoft.AspNet.SignalR.Hosting.Common" version="1.0.0-alpha2" targetFramework="net45" />
    <package id="Microsoft.AspNet.SignalR.JS" version="1.0.0-rc1" targetFramework="net45" />
    <package id="Newtonsoft.Json" version="4.5.11" targetFramework="net45" />
  </packages> 
```

安装的版本混合在 alpha 和 rc1 之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:49:38.877

我通过更改 .csproj 文件解决了错误...

它有（可能是 MVC 3 左右）：

```
<ProjectTypeGuids>{E53F8FEA-EAE0-44A6-8774-FFD645390401}; 
```

进入 MVC 4 项目：

```
<ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47}; 
```

# algorithm - 如何重新排列不同种类的物品，使同类物品之间的距离最大？

> ID：13973437
> 
> 赞同：1
> 
> 时间：2012-12-20T13:39:15.883
> 
> 标签：algorithm, optimization

> **可能重复：**
> [分离相同类型项目的算法](https://stackoverflow.com/questions/12375831/algorithm-to-separate-items-of-the-same-type)

我朋友的项目中有一个有趣的问题。他从事电视广告投放工作。广告属于不同类型：移动、食品、银行等。他需要重新排列广告列表，以便将相似类型的广告放置在彼此之间的最大距离处。一个广告块中大约有 100 个广告，因此暴力解决方案是不可行的。是否有可能提出一个相当快的解决方案（<30 秒）？最快的方法是什么？

假设每个广告的长度相同。

示例：
`[M, M, F, B, F, B]`。在这种特殊情况下，输出可能是：`[M, F, B, M, F, B]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:22:04.733

假设您想最大化最小距离。首先，计算您拥有的每种类型项目的数量（所有这些项目的总和应该是`n`列表中的项目数 , ）。根据频率对唯一种类的项目列表进行排序。然后，准备一个带有`n`单元格的输出磁带。从最频繁的元素开始，定期将元素均匀地放置在输出磁带中。继续按项目频率的降序排列，只考虑磁带上的空单元格。这是`O(n + m log m)`，其中`n`是项目的总数，`m`是唯一项目的数量（即项目的种类）。请注意，在这种情况下，您可能无法对项目种类使用线性排序算法，因此您可能会丢失`log m`因素，虽然在实践中（对于 100 个项目，并且可能是更少种类的项目）我不知道这是否值得。

在您的示例中：[M，M，F，B，F，B]。我们有 (M, 2), (F, 2), (B, 2)。第一遍后我们得到 [M, _, _, M, _, _]，第二遍后得到 [M, F, _, M, F, _] 和 [M, F, B, M, F, B]第三次之后。

请注意，这是一种启发式方法，我怀疑它可能是最优的，但我并没有试图证明这是最优的，甚至对我自己也没有。但是，如果您有`n`元素并且最频繁的元素出现`x`次数，那么最小距离可能是`floor(n/x)`（编辑：这实际上不是真的，请参阅我的评论）......这就是这个启发式的目标。我想有一个问题，如果数字甚至不是除数，如何“均匀地”间隔项目......但即使对于我尝试发生这种情况的示例，几乎任何选择都是可以的，我们正在优化的标准. 一个稍微难一点的例子：

[A, A, A, A, A, B, B, B, C, C, D] 给我们 (A, 5), (B, 3), (C, 2), (D, 1)；第一遍后我们得到[A,_,A,_,A,_,A,_,A,_,_]，[A,B,A,_,A,B,A,_,A,B , _] 在第二遍之后， [A, B, A, C, A, B, A, C, A, B, _] 在第三遍之后得到 [A, B, A, C, A ，B，A，C，A，B，D]。对于政府工作来说已经足够了。

事实上，我想不出比这更好的简单方法来最小化平均距离。这应该很快......它是否足以满足您朋友的需求？

# c# - c# 是否具有类似于 {"string1","string2"} 的速记数组声明的 VB.NET 等效项？

> ID：13973438
> 
> 赞同：6
> 
> 时间：2012-12-20T13:39:27.067
> 
> 标签：c#, .net, arrays, types, type-inference

在 VB.NET 中，您可以实例化并立即使用这样的数组：

`Dim b as Boolean = {"string1", "string2"}.Contains("string1")`

但是，在 c# 中，您似乎必须这样做：

`bool b = new string[] { "string1", "string2" }.Contains("string1");`

c# 是否具有等效的速记语法，它使用类型推断来确定数组的类型，而不必显式声明它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T13:41:09.983

[隐式类型数组](http://msdn.microsoft.com/en-us/library/bb384090.aspx)不必包含它们的类型，只要它可以被[推断](http://msdn.microsoft.com/en-us/library/bb384061.aspx)：

```
bool b = new [] { "string1", "string2" }.Contains("string1"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T13:46:48.807

它叫[`Implicitly Typed Arrays`](http://msdn.microsoft.com/en-us/library/bb384090.aspx)

> 您可以创建一个隐式类型数组，其中数组实例的类型是从数组初始值设定项中指定的元素推断出来的。任何隐式类型变量的规则也适用于隐式类型数组。

```
static void Main()
    {
        var a = new[] { 1, 10, 100, 1000 }; // int[] 
        var b = new[] { "hello", null, "world" }; // string[] 
    } 
```

您也可以将它用于*锯齿状阵列。*

# mysql - 单个查询中来自多个基数的计数

> ID：13973444
> 
> 赞同：3
> 
> 时间：2012-12-20T13:39:52.580
> 
> 标签：mysql

我有 2 个 MySQL 数据库，我想计算每个数据库上两个表中的行数并组合结果。

```
SELECT count(*) FROM base_1.users;
+----------+
| count(*) |
+----------+
|       15 |
+----------+
SELECT count(*) FROM base_2.users;
+----------+
| count(*) |
+----------+
|       75 |
+----------+ 
```

此查询返回第一个计数的结果。

```
SELECT count(*) FROM base_1.users, base_2.users;
+----------+
| count(*) |
+----------+
|       15 |
+----------+ 
```

我可以在单个查询中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:42:31.847

怎么样

```
SELECT SUM(c)
FROM 
(
   SELECT count(*) as c FROM base_1.users;
) x
UNION
(
   SELECT count(*) as c FROM base_2.users;
) y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:44:58.393

您可以`UNION ALL`在两个查询之间使用 a ，然后使用`SUM()`来获取总数：

```
select sum(total) as TotalCount
from
(
  SELECT count(*) Total
  FROM base_1.users
  UNION ALL
  SELECT count(*) 
  FROM base_2.users
) src 
```

# c# - 通过名单 * 到 C# 中的 EnumWindows 的 lParam

> ID：13973452
> 
> 赞同：1
> 
> 时间：2012-12-20T13:40:18.103
> 
> 标签：c#, winapi, interop, marshalling, fixed

我正在尝试编写一个函数，该函数在顶级窗口上进行迭代，如果它们满足一组标准，则将它们放入列表中。目前，我可以通过将窗口添加到静态`List<IntPtr> instances`变量中来使其工作，但我想改为将指针传递给`EnumWindowsProc`'s`lParam`中的列表以避免此静态变量。

我想我必须用它`fixed`来修复列表在内存中的位置，但我不确定如何做到这一点。我尝试将列表传递给我的回调函数：

```
unsafe
{
    fixed (void* dp = &instances)
    {
        WinApi.EnumWindows(new WinApi.EnumWindowsProc(FindPPWindows), dp);
    }
} 
```

但我明白了

```
Cannot take the address of, get the size of, or declare a pointer to a managed type ('System.Collections.GenericList<IntPtr>') 
```

我对 c# 很陌生，所以我真的不知道该怎么做 - 或者即使有可能，我也读过编组包含引用的托管类型是不可能的，但我只需要在内存中修复它并创建一个指针到它，然后将指针投射回去并使用它。如果有的话，我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:52:48.653

You could call the EnumWindows function with an lambda expression. Then the EnumWindowsProc Callback would be inline and you can access to local variables:

```
List<IntPtr> list = new List<IntPtr>();            

WinApi.EnumWindows((hWnd, lParam) =>
{
      //check conditions
      list.Add(hWnd);

      return true;

}, IntPtr.Zero); 
```

You could capsulate this inline call in an extra function, e.g.:

```
List<IntPtr> GetMatchingHWnds()
{
    List<IntPtr> list = new List<IntPtr>();            

    WinApi.EnumWindows((hWnd, lParam) =>
    {
          //check conditions
          list.Add(hWnd);

          return true;

    }, IntPtr.Zero);

    return list;        
} 
```

# java - 更换开关结构的优雅方式

> ID：13973456
> 
> 赞同：2
> 
> 时间：2012-12-20T13:40:27.807
> 
> 标签：java, if-statement, switch-statement

我生成了简单的随机数，我想根据生成的值执行不同的操作。我有 9 种不同的动作。我不能`switch`在值上使用结构，`double`也不能从`double`to`int`使用`switch`，所以我注定要使用`if`结构吗？

```
if((rand > 0.0) && (rand < 1.0))
   // case 1
else if...
   // case 2
else if
   // case 9 
```

**编辑：**请注意，我的行为不是等概率的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:45:06.273

创建一个`static TreeMap<Double,Integer>`带有间隔限制的映射到整​​数“案例标签”。使用该[`higerEntry`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#higherEntry%28K%29)方法获取最接近您随机生成的值的条目，并在您的语句`double`中使用结果值。`switch`

```
static final TreeMap<Double,Integer> limits = new TreeMap<Double,Integer>();
static {
    limits.put(1.0, 0);
    limits.put(3.5, 1);
    limits.put(8.0, 2);
    limits.put(10.3, 3);
} 
```

这张地图设置了五个区间：

*   -inf..1.0
*   1.0..3.5
*   3.5..8.0
*   8.0..10.3
*   10.3..+inf

现在在您的代码中，您可以这样做：

```
double someNumber = ... // Obtain a random double
Map<Double,Integer> entry = higerEntry(someNumber);
switch (entry.getValue()) {
    case 0: ... break;
    case 1: ... break;
    case 2: ... break;
    case 3: ... break;
    default: ... break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:49:33.623

给你，一些代码：

```
 switch ((int) (rand * 10)) {
    case 0:
    case 1:
    case 2:
    case 3:
        System.out.println("Between 0 and 3");
        break;
    case 4:
        System.out.println("4");
        break;
    case 5:
        System.out.println("5");
        break;
    case 6:
        System.out.println("6");
        break;
    default:
        System.out.println("More then 6");
        break;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:45:05.463

如果动作是等概率的，您可以只使用`Random.nextInt()`上限和 a `switch`：

```
 Random rand = new Random();
      ...
      switch (rand.nextInt(10)) {
      case 0: ...; break;
      case 1: ...; break;
      case 9: ...; break;
      } 
```

`[0, 1)`您可以对浮点随机数使用相同的技术。只需将其乘以`10`并转换为`int`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:51:28.980

好的，感谢您的回答和@dasblinkenlight，我找到了解决问题的自定义解决方案：

```
static final Map<Integer, Double> cases = new HashMap<Integer, Double>(9);

static{             
    cases.put(1, 30.0);
    cases.put(2, 55.0);     
    cases.put(3, 70.0);     
    cases.put(4, 80.0);     
    cases.put(5, 84.0);     
    cases.put(6, 88.0);     
    cases.put(7, 92.0);     
    cases.put(8, 96.0);     
    cases.put(9, 100.0);
}

switch (getIntFromDouble(Math.random()*100)) {
    case 0 : ...
        break;

    case 1 : ...
        break;

    ...     

    case 9 : ...
        break;

}

private int getIntFromDouble(double rand){

    for(Map.Entry<Integer, Double> entry : cases.entrySet()){
        if(rand <= entry.getValue())
            return entry.getKey();
    }

    return Integer.MAX_VALUE;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T13:46:48.630

你不能用四舍五入吗？

```
int value=Math.round(yourDouble) 
```

# mybatis - mybatis select中作为hashmap key的列号

> ID：13973459
> 
> 赞同：0
> 
> 时间：2012-12-20T13:40:40.380
> 
> 标签：mybatis

我在 mybatis 中有动态选择查询，如下所示：

```
<select id="genericSelect" parameterType="GenericQueryParameter" resultType="hashmap">
  SELECT <if test="selectMode != null">${selectMode}</if> ${selectPart}
  FROM ${fromPart}
  <where>
    <if test="fixedWherePart != null">${fixedWherePart}</if>
    <if test="wherePart != null">AND ${wherePart}</if>
    <if test="initialCondition != null and wherePart == null">AND ${initialCondition}</if>
  </where>
  <if test="groupByPart != null"> GROUP BY ${groupByPart}</if>
  <if test="havingPart != null"> HAVING ${havingPart}</if>
  <if test="order != null"> ORDER BY ${order}</if>
</select> 
```

对我来说，在结果中对键进行哈希映射很重要，填充的是列号，而不是列名。是否有可能制作一些自定义处理程序或其他任何东西来做到这一点？

Mybatis 版本是 3.1.1，我正在使用映射器接口来处理查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:03:00.890

这在我想要的方式上是不可能的，所以我稍微改变了查询。首先，我`selectPart`改为**array**。现在我将查询的选择部分更改为：

```
<foreach collection="selectArray" item="selectElement" index="index" separator=", ">
  ${selectElement} COL${index+1}
</foreach> 
```

现在我只是使用 alias 和`index`var 将元素放入 hashmap 中，并将 order 信息保留在查询的 select 部分中。

# spring-data - spring-data 规范 - 返回 id 列表而不是对象

> ID：13973462
> 
> 赞同：4
> 
> 时间：2012-12-20T13:40:48.017
> 
> 标签：spring-data

我正在寻找所有订阅用户的所有 ID。这是我的谓词：

```
public static Specification<User> userSubscribed(){
  return new Specification<User>() {
    public Predicate toPredicate(Root<User> root, CriteriaQuery<?> query, CriteriaBuilder builder) {
      return builder.equal(root.get("status"), 1 /* 1 = subscribed */);
    }
  };
} 
```

然而，我的存储库只允许 count、findAll 和 findOne。有没有办法让它返回某个字段的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:15:42.157

据我所知，Spring-Data 还不支持这一点。阅读[Oliver Gierke](http://forum.springsource.org/showthread.php?117577-Spring-Data-JPA-Return-Multiple-entities-or-user-defined-object)对相关问题的回复。那里提到的那些问题仍然存在。

作为替代方案，您可以创建[自定义存储库](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.custom-behaviour-for-all-repositories)并使用 TypedQuery 来实现您想要的。以下是 TypedQuery 的一些示例： [http ://www.objectdb.com/java/jpa/query/jpql/select](http://www.objectdb.com/java/jpa/query/jpql/select)

TypedQuery 示例：

```
TypedQuery<Integer> query = em.createQuery(
    "SELECT u.id FROM User AS u", Integer.class);
// ... Some predicates
List<Integer> results = query.getResultList(); 
```

# c# - c# 多线程应用程序

> ID：13973465
> 
> 赞同：0
> 
> 时间：2012-12-20T13:41:01.417
> 
> 标签：c#, multithreading

我对 c# 和多线程有点陌生，所以我可能在这里犯了一个愚蠢的错误，但我似乎无法弄清楚这一点。我有一个应用程序，它根据在我的网络上发现的机器数量创建线程数组，然后为每台机器创建一个执行我创建的函数的线程。退出 for 循环后，我创建了另一个运行另一个函数的线程。我的函数工作得很好，那里没有问题，问题是由于某种原因在退出 for 循环并继续创建下一个线程后，我的应用程序跳回 for 循环，索引现在超出范围并导致要抛出的异常。我希望我能清楚地解释这一点，我对为什么会发生这种情况感到困惑，因为我不知道为什么在完成 for 循环后它会执行一行代码并跳回。

```
 smThread = new Thread[networkedComputers.Count];

        for (UInt16 i = 0; i < networkedComputers.Count; i++)
        {
            smThread[i] = new Thread(delegate() { sm.RunServerMonitorPerMachine(networkedComputers[i].ToString()); });
            smThread[i].Start();
        }

        dailyThread = new Thread(dailyEvents);
        dailyThread.Start(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:50:26.960

我认为你的问题就在这里：

```
networkedComputers[i].ToString()
                   ^ 
```

执行此操作时，您可能希望将 的值传递`i`给线程，但实际上，您传递了对 . 的引用`i`。此引用会在您循环时更新，因此当线程实际执行时，它很可能不是您期望的值。（谷歌关键字：捕获的变量）

解决方案是在将值传递到线程之前对其进行复制。此副本不会更新。

```
for (int i = 0; i < networkedComputers.Count; i++)
{
    int tmp = i;
    smThread[i] = new Thread(delegate() { sm.RunServerMonitorPerMachine(networkedComputers[tmp].ToString()); });
    smThread[i].Start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:04:28.587

正如 Kendall Frey 指出的那样，捕获的循环变量的问题很可能是您的问题。但是，正如您帖子中的其他一些评论者所建议的那样，这可能是研究 C#s 任务并行库的一个很好的案例，它为您处理了很多这些事情。您的代码将如下所示：

```
for (UInt16 i = 0; i < networkedComputers.Count; i++) {
    int count = i;
    Task.Factory.StartNew(() => sm.RunServerMonitorPerMachine(networkedComputers[count].ToString());
}

Task.Factory.StartNew(() => dailyEvents()); 
```

这样做的好处是您不必担心管理线程池，因为一旦有线程可用于执行任务，任务就会排队并被拾取。要考虑的另一件事是，在 for 循环中的所有任务完成之前，强制执行 dailyEvents 任务不会执行更多工作。这是您在当前解决方案中没有实现的东西（但从外观上看，我认为它是您想要的）；

# php - Yii 框架中的关联表需要模型吗？

> ID：13973466
> 
> 赞同：3
> 
> 时间：2012-12-20T13:41:04.553
> 
> 标签：php, yii, model, many-to-many

`relation()`我有多对多关系，在 MYSQL 数据库中我有一个关联表，现在我需要该表的模型还是在函数中声明它就足够了

```
public function relations()
{
return array(
'store'=>array(self::MANY_MANY, 'store',
                   'medinventory(MedID_FK, StoreID_FK)'));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:48:43.693

如果仅将中间表用于映射，则不需要模型。

如果此表包含需要访问的其他属性，您将需要一个模型。

例如，考虑商店和库存之间的多对多关系。

如果您需要向 medinventory 表添加一个属性，以告诉应用程序何时创建关系（created_time），然后您需要访问该属性，那么是的，需要创建一个模型。

# java - 计算并显示游戏的每秒帧数

> ID：13973470
> 
> 赞同：-2
> 
> 时间：2012-12-20T13:41:14.703
> 
> 标签：java, algorithm

有人去过这个网站吗？

[http://www.cokeandcode.com/info/tut2d.html](http://www.cokeandcode.com/info/tut2d.html)

它有一个很棒的基于 Java 的游戏，叫做 Space Invaders，我喜欢到目前为止制作游戏的教程。

教程问题之一是要求读者在游戏运行时计算游戏中的每秒帧数？

我真的很难完成这项工作。

谁能帮我解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:47:00.913

看看下面的代码片段（来自 Game.java）

```
public void gameLoop() {
        long lastLoopTime = System.currentTimeMillis();

    // keep looping round til the game ends
        while (gameRunning) {
            // work out how long its been since the last update, this
            // will be used to calculate how far the entities should
            // move this loop
            long delta = System.currentTimeMillis() - lastLoopTime;
            lastLoopTime = System.currentTimeMillis(); 
```

这应该是您找出解决方案的一个很好的起点。

# ios - 滚动后 UICollectionViewCells 子视图呈现错误

> ID：13973476
> 
> 赞同：2
> 
> 时间：2012-12-20T13:41:50.663
> 
> 标签：ios, ipad, uicollectionview, uicollectionviewcell

我子类化的 CollectionViewCell 只包含一个 UILabel。为了获得网格，我将带有 CGRectInset 的 UILabel 添加到单元格中。

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        self.backgroundColor = [UIColor orangeColor];
        self.label = [[UILabel alloc] initWithFrame:CGRectInset(self.bounds, 1.0, 1.0)];
        self.label.numberOfLines = 0;
        self.label.layer.shouldRasterize = true;
        [self addSubview:self.label];
    }
    return self;
} 
```

按照要求

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"indexPathSection: %i in row: %i", indexPath.section, indexPath.row);
    MyCVCell *cell = (MyCVCell*)[collectionView dequeueReusableCellWithReuseIdentifier:@"cell" forIndexPath:indexPath];

    NSString *str = [NSString stringWithFormat:@"%@", [[self.cData objectAtIndex:indexPath.section] objectAtIndex:indexPath.row]];
    cell.label.text = str;

    return cell;
} 
```

在我滚动之前，一切看起来都很好。任何想法可能是什么原因？

滚动之前 向下 ![正确呈现的视图](../Images/3d39ba1464391def9e82cf2ef7fcaab0.png) 滚动 向上 ![向下滚动](../Images/e28fb86a2aa7258e135f8285ea8b07d9.png) 滚动 ![向上滚动](../Images/56e950940b147bec34274f7ac024cace.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:00:51.887

问题是单元格中的子视图没有调整大小。最简单的解决方案（至少对于 UILabels）是将 autoresizingmask 设置为： UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight。

# javascript - 从原型函数更新对象值

> ID：13973481
> 
> 赞同：2
> 
> 时间：2012-12-20T13:42:03.883
> 
> 标签：javascript, object, prototype

我正在尝试这样做：

```
String.prototype.clear = function(){
    alert(this.value);
    this = ''; // I want to set value to '' here
}

var temp = 'Hello';
temp.clear();// After this step temp should be '' 
```

但我得到无效的左手分配错误。我发现这个问题可以作为参考，但这并不是我真正想要的。我还发现“this”是不可变的。

那么，有什么办法可以完成我的任务吗？我没有在任何地方使用它。只是在玩。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:47:22.843

您可以创建一个名为 MyMutableString 的类，例如：

```
function MyMutableString(s) {
   this.string = s;
   this.clear = function() {
      this.string = "";
   }
} 
```

现在您创建一个实例并像这样使用它：

```
var s = new MyMutableString("my str");
s.clear(); // makes string stored inside object `s` empty
console.log(s.string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:59:19.297

简而言之：

你不能。

字符串是不可变的。一旦制作完成，就永远无法更改字符串。

您必须将字符串设置为空字符串才能“清除”它

```
var str = "String";
str=''; 
```

*请注意，这不会更改字符串，而是设置`str`为字符串的新实例，旧的实例会被垃圾收集*

它甚至比调用 Object 的 Prototypes 方法更短，它的作用完全相同。*而且*您不必对原生 Objects 原型进行调整

* * *

[编辑 - 感谢Florian Margaine](https://stackoverflow.com/a/13973642/1487756)指出这一点

如果您经常设置空字符串并且可能会更改您未来的清除“定义”，您可以使用返回 `` 或空字符串的函数

```
function clearString () {
    return ''
}
var str = "Asd"
var str = clearString() 
```

或者只是将变量设置为空字符串

```
var emptyString = ''
var str = "Asd"
str = emptyString //'' 
```

现在，如果您想更改`''`为`null`或`undefined`

`var emptyString = null`

这也可以，因为原始数据类型是作为值而不是通过引用传递的

但我建议不要为这样的东西修改对象原型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:50:17.223

像这样的对象副本呢？

```
String.prototype.clear = function(){
    alert(this);
    return '';
}

var temp = 'Hello';
var newTemp = temp.clear();
alert(newTemp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:50:34.870

除了创建包装器之外，最好的方法是使用函数式方法。

```
String.prototype.clear = function() {
    return '';
};

var t = 'hello';
t = t.clear(); 
```

为什么不只是做`t = '';`，你说？好吧，今天清算可能意味着投入`''`，但它可能意味着明天投入`null`。有一个点来改变它可能是值得的。或者根本没有。

# java - 获取网格视图项目的标签？按网格视图项的位置查找标签？

> ID：13973484
> 
> 赞同：1
> 
> 时间：2012-12-20T13:42:11.957
> 
> 标签：java, android, android-gridview

我有两个 Gridview，Gridview1 和 Gridview2。gridview1 包含可绘制的图像，而 gridview2 不包含任何内容。

每当用户从 gridview1 中拾取图像并将图像放入 gridview2 时，图像就会被放入 gridview2。

我想用已经放置的项目的标签检查当前放置的项目的标签（如果图像已经存在于 gridview2 中）。

如何找到其他图像的标签？在 gridview2 OnItemClickListener 中，我们有视图，但它仅指当前单击的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:24:32.543

从 gridview 中，您可以通过调用来获取其背后的适配器`getAdapter()`，然后从您的适配器中，您应该能够迭代 itmes 并读取标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:44:19.747

最后我自己得到了我的问题的答案。感谢所有提出宝贵建议的人。

> 我将grid-view1项目的标签保存在一个变量中，并在grid-view2中使用了相同的变量，并将该标签设置为当前grid-view2的项目。所以我的问题解决了。

# java - How to find Mid Point/Coordinates of some number of GPS points?

> ID：13973485
> 
> 赞同：4
> 
> 时间：2012-12-20T13:42:11.583
> 
> 标签：java, google-maps, map, gps, gis

In my application i need to find mid point of some number(3 or more) of GPS points.

i have find the distance between the two points as below

```
public class DistanceOfGeoPoints {
     public static long distanceinKMeters(double dblLat, double dblNewLat, double dblLong, double dblNewLong)
     {
         try
         {
             //double dblDistance = 180 / (dblPI * Math.Acos(Math.Sin(dblLat) * Math.Sin(dblNewLat) + Math.Cos(dblLat) * Math.Cos(dblNewLat) * Math.Cos(dblLong - dblNewLong)));

             double dblDegree2Radius = Math.PI / 180;
             double dbllongdiff = (dblNewLong - dblLong) * dblDegree2Radius;
             double dbllatdiff = (dblNewLat - dblLat) * dblDegree2Radius;
             double a = Math.pow(Math.sin(dbllatdiff / 2.0), 2) + Math.cos(dblNewLat * dblDegree2Radius) * Math.cos(dblLat * dblDegree2Radius) * Math.pow(Math.sin(dbllongdiff / 2.0), 2);
             double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
             double dblDistance = 6367 * c; //Earth Radius * value (result in KM)

             // return dblDistance;
             long intdistance = (Math.round(dblDistance * 1000));

             return intdistance;
         }
         catch (Exception ex)
         {
             return 0;
         }
     }
} 
```

Now i want the mid point of the N number of GPS points

Please help me out.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:06:10.667

The midpoint of two points in Euclidean distance is just the average of the x and y coordinates. If we just average the Latitude and Longitude of points A and B, this gives us a point between A and B, but it need not be equidistant.

What you probably want is to convert the spherical coordinates to euclidean coordinates, find the midpoint by averaging x and y, then convert back to latitude, longitude.

If we do this with more than 2 points, we need to clarify what is meant by "midpoint."

If we wish to find the midpoint of N points in Euclidean geometry, we just average all of the x-values and average all the y-values. This gives us a reasonable "middle," but this average point is usually not equidistant to all three points. Given three points, we can calculate a unique point equidistant to those three; this point is the circumcenter of the triangle defined by the three points. But since three points define a circle, this process does not generalize to n-points. Given 4 or more point, there is probably no point equidistant to all 4\. This is true whether we are working with eculidean distance or spherical geometry distance.

In the diagram below, we can see that the circumcenter point is exactly 5 units from points A, B, and C. Yet this point does not really feel like the "middle." The midpoint defined by average, on the other hand, does look like it's in the middle even though it is closer to A than to B or C.

![Midpoint of three points](../Images/73260a922d8cd88437af2156e720ccf5.png)

For n points defined by (lattitude, longitude), the best method is probably to convert all of these points to Euclidean points, computer the average, then convert back to (lattitude,longitude.) Some code for doing this conversion can be found here: [Processing Forum](http://forum.processing.org/topic/geolocation) And there is a good [wikipedia page](http://en.wikipedia.org/wiki/Spherical_coordinate_system) explain the background math that you need to understand.

# python - 在使用 PyQt 捕获网站图像之前等待延迟

> ID：13973488
> 
> 赞同：4
> 
> 时间：2012-12-20T13:42:20.260
> 
> 标签：python, macos, flash, qt, pyqt

我正在使用 PyQt（作为 Python 初学者）。我需要能够在无头系统上截取网站的屏幕截图。我之前在另一个项目中使用 PhantomJS，但他们在 1.5 中放弃了 Flash 支持，我不想在我的新项目中依赖已弃用的 1.4 版本。

所以我使用 PyQt 自己做我的事情。我可以截取具有给定网址的网站的屏幕截图，没问题。

但我一直在 Flash 占位符上显示“蓝色骰子”Flash 插件图标（是的，javascript 和插件已激活）

```
self.settings.setAttribute(QtWebKit.QWebSettings.PluginsEnabled,True) 
self.settings.setAttribute(QtWebKit.QWebSettings.JavascriptEnabled,True) 
```

我正在 Youtube 视频页面上进行一些测试，这是我的问题的一个示例：

![图片](../Images/1b549ee71b135da10b5ce6257c29e2b5.png)

第二部分，可能与第一部分有关：如何告诉 PyQt 在截屏前等待几秒钟？正如您在示例中看到的，右侧的图像仍然未加载，因为它们是使用 javascript 和 data 属性加载的，在我的脚本中，我截取了**loadFinished**信号（onLoad() javascript 等效项））。

我的第一个猜测是

```
time.sleep(2) 
```

在调用我的捕获方法之前，它不起作用。我假设 Webkit 加载在此睡眠时间内也处于睡眠状态，从而防止页面上加载任何内容。

我试图创建一个自定义信号，但是我仍然不知道如何在不睡觉的情况下触发它。

我最后的猜测是我需要线程化我的应用程序。我对吗？

如果您有任何提示/脚本来帮助我显示 Flash 内容和/或添加类似 setTimeout 的信号，我将不胜感激！

提前感谢您的帮助。

**编辑：** 只需快速编辑即可添加我的解决方案：

```
timeoutTimer = QTimer()
timeoutTimer.setInterval(3000) # wait for 3secs
timeoutTimer.setSingleShot(True)
timeoutTimer.timeout.connect(theMethodToCallOnTimeout) 
```

关于 flash 的事情：看起来 flash 播放器在 OSX 上坏了（可能与 32/64 位问题有关）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T18:53:37.040

如果您`time.sleep`要冻结整个应用程序，则可以使用`QTimer`, `QEventLoop`,`QThread`等。这是 PyQt4 版本：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *

class browser(QWebView):
    def __init__(self, parent=None):
        super(browser, self).__init__(parent)

        self.timerScreen = QTimer()
        self.timerScreen.setInterval(2000)
        self.timerScreen.setSingleShot(True)
        self.timerScreen.timeout.connect(self.takeScreenshot)

        self.loadFinished.connect(self.timerScreen.start)
        self.load(QUrl("http://www.google.com/ncr"))    

    def takeScreenshot(self):    
        image   = QImage(self.page().mainFrame().contentsSize(), QImage.Format_ARGB32)
        painter = QPainter(image)

        self.page().mainFrame().render(painter)

        painter.end()
        image.save(self.title() + ".png")

        sys.exit()

if __name__ == "__main__":
    import  sys        
    app  = QApplication(sys.argv)
    main = browser()
    app.exec_() 
```

![QWebView 截图](../Images/cfe18928d0c5fc68b61baa9796f840c5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T16:05:53.910

我建议使用[selenium](http://selenium-python.readthedocs.org/en/latest/)。它是为进行 Web 自动化、屏幕截图和测试而设计的。因为它使用 Firefox，所以很容易获得完整的 Flash 支持。它也可以在无头模式下运行。下面的代码可用于使用 Flash 截取网页的屏幕截图，例如您拥有的 youtube 视频。您可以在下面看到它拍摄的屏幕截图。有几件事要记住。selenium 有一个 save_screenshot 方法，你可以看到它在代码中被注释掉了。我没有使用它，因为它没有正确截取 flash 组件的截图，您可以使用[使用 Selenium 和 Webdriver 截取 flash 对象中的技术来纠正这个问题](https://stackoverflow.com/questions/7642519/taking-screenshot-of-flash-object-using-selenium-with-webdriver). 我选择使用 imagemagic import 命令截取屏幕截图。这是一个适用于 Linux 的屏幕截图工具。您可以查看[通过 python 脚本截取屏幕截图。[Linux]](https://stackoverflow.com/questions/69645/take-a-screenshot-via-a-python-script-linux)并[使用 Python 在 Windows 上获取屏幕截图？](https://stackoverflow.com/questions/2846947/get-screenshot-on-windows-with-python)对于其他截屏方法。

**代码**

```
import time, selenium.webdriver, subprocess
browser = selenium.webdriver.Firefox()
browser.get('http://www.youtube.com/watch?v=bFEoMO0pc7k')
time.sleep(6)
#browser.save_screenshot('test.png')
subprocess.check_output('import -window root screen.png', shell=True)
browser.quit() 
```

**截屏**

![在此处输入图像描述](../Images/81654f3615d022e52a1043053ed654c7.png)

# javascript - 单击图像以选择多个单选按钮

> ID：13973490
> 
> 赞同：0
> 
> 时间：2012-12-20T13:42:22.180
> 
> 标签：javascript

感谢您的快速回复。我想检查所有这些单选按钮

```
<input type=radio name=aid value=".$row->aid."id=".$row->id.">  
<input type=radio name=qid value=".$row->qid." id=".$row->id.">
<input type=radio name=id value=".$row->id." id=".$row->id.">
<input type=radio name=id2 value=".$row->id2." id=".$row->id."> 
```

通过单击此图像

```
<img id=".$row->id1." src=images/btn.png width=50 height=50 
 onclick=RadioClicked('".$row->id."','aid','MyFormID') style=cursor:pointer;>
</input></input></input></input> 
```

再次感谢我非常感谢您的帮助。注意：我将图像用于单选按钮界面并隐藏单选按钮的可见性。

这是Javascript代码：

```
<script type="text/javascript">
var RadioCheckedImage = new Image();
var RadioUncheckedImage = new Image();

RadioCheckedImage.src = "images/btn1.png";
RadioUncheckedImage.src = "images/btn.png";

function RadioClicked(radioid,radiosetname,formid) {

var form = document.getElementById(formid);
for( var i = 0; i < form.length; i++ ) {
   if(form[i].name == radiosetname) {
      document.getElementById(form[i].id).checked = false;
      document.getElementById("Image"+form[i].id).src = RadioUncheckedImage.src;
      }
      }
document.getElementById(radioid).checked = true;
document.getElementById("Image"+radioid).src = RadioCheckedImage.src;          

return false;
}
</script> 
```

这是PHP代码：

下面的这些代码很好，我可以通过单击图像来检查这个单选按钮。

```
'while ($row = mysql_fetch_object($result)) {
echo "<table><tr><td>   

<input type=radio name=aid value=".$row->aid." id=".$row->id." checked>

<img id=".$row->id1." src=images/btn.png width=50 height=50 
onclick=RadioClicked('".$row->id."','aid','MyFormID') style=cursor:pointer;>
</input></td>' 
```

但我需要添加另一个单选按钮（下）也检查如上图点击

```
<input type=radio name=id value=".$row->id." id=".$row->id.">id</input>
<input type=radio name=qid value=".$row->qid." id=".$row->id.">qid</input>
<input type=radio name=id2 value=".$row->id2." id=".$row->id.">id2</input>

    } } 
```

这是我想要的屏幕截图。当我单击按钮图像时，我想检查 4 个单选按钮。注意：在这个屏幕截图中，我必须手动单击 3 个单选按钮。

oooo 推送图片

oooo 推送图片

*   *   *   *   推送图片

oooo 推送图片

oooo 推送图片

-发送按钮-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:26:04.783

由于您似乎只想单击几个单选按钮，因此我建议您将它们及其各自的图像放在一个 div 中，如下所示：

```
$(document).ready(function (){
    $('.image').click(function (){
        $(this).parent('div').children('input[type=radio]').click();
    });​
}); 
```

使用以下 HTML：

```
<div id="radioButtonsDiv1">
    <input type=radio name="id" value="1" id="1">id</input>
    <input type=radio name="qid" value="1" id="2">qid</input>
    <input type=radio name="id2" value="1" id="3">id2</input>
    <button class="image">This is a CLICK image</button>
</div>

<div id="radioButtonsDiv2">
    <input type=radio name="id" value="2" id="4">id</input>
    <input type=radio name="qid" value="2" id="5">qid</input>
    <input type=radio name="id2" value="2" id="6">id2</input>
    <button class="image">This is a CLICK image</button>
</div>​ 
```

这是相关的[jsFiddle](http://jsfiddle.net/whry2/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:59:25.313

这是一个在单击图像时选择所有单选按钮的示例。

## [JSFiddle](http://jsfiddle.net/WYUYK/2/)

**JS**

```
window.onload = function(){
    document.getElementById('testImg').onclick = function(){
        var radios = document.getElementsByClassName('rdo');
        for(var i = 0; i < radios.length; i++){
            radios[i].checked = true;    
        }
    }
}; ​​ 
```

**HTML**

```
<input class='rdo' type="radio" id='rdo1' /><label for="rdo1">Radio 1</label>
<input class='rdo' type="radio" id='rdo2' /><label for="rdo2">Radio 2</label>
<input class='rdo' type="radio" id='rdo3' /><label for="rdo3">Radio 3</label>

<img id='testImg' src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQ8Zwmk3K2Nu0ZpxvE0SrQOOKno_ssbEsdX7MuA_HRP0AovfpN06g" /> 
```

# autohotkey - AutoHotkey + 魔兽世界：反复跳跃

> ID：13973501
> 
> 赞同：0
> 
> 时间：2012-12-20T13:43:06.360
> 
> 标签：autohotkey, world-of-warcraft

我实际上是在玩`AutoHotkey`：我阅读[了本教程](http://www.autohotkey.com/docs/Tutorial.htm#Create)并创建了我的第一个脚本。

它应该让我的角色每 1 秒按一次空格键跳跃：

```
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
#Warn  ; Recommended for catching common errors.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

#ifWinActive World of Warcraft
{
    Loop
    {
        Send {Space}
        Sleep 1000
    }
}
return 
```

它不起作用：当我在游戏中时，什么也没有发生；当我**退出**游戏时（如在记事本中），它工作正常。

那有什么问题？

**编辑**：解决了。如果您使用的是 Windows 7，则必须以管理员权限运行脚本。

请版主：删除这个问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:45:27.267

不要成为一个湿毯子，但就WoW的用户条款而言，这种事情违反了TOS，也就是他们的机器人偏执狂，这确实给其他人搞砸了游戏。

# google-maps-android-api-2 - 我可以使用我的 Android 应用程序 + Google Maps Android API 进行多少次免费地图查看？

> ID：13973502
> 
> 赞同：0
> 
> 时间：2012-12-20T13:43:12.430
> 
> 标签：google-maps-android-api-2

使用 Google Maps API，在您开始付费（每天 0.5 美元/1000 次地图浏览）或购买高级许可证（每年 100 万次地图浏览）之前，您只有有限的免费地图浏览次数（每天 25000 次）。

但我的问题是：

我想在我的 Android 应用程序中附加一个谷歌地图，但我想知道我可以做多少免费地图视图？它是否像 Google Maps API 一样工作？我们的地图视图数量不是有限的吗？

我问这个的原因是因为我想对我的初始坐标进行地理定位，然后“绘制”我在谷歌地图中遵循的路径（取决于地图视图的数量..或多或少地刷新它）。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:38:02.507

它是无限的。适用于 Android 的本机地图 API 不受限制的影响。请参阅[https://developers.google.com/maps/faq#usagelimits](https://developers.google.com/maps/faq#usagelimits)

# java - 在Java中对包含数字的字符串进行排序

> ID：13973503
> 
> 赞同：32
> 
> 时间：2012-12-20T13:43:19.417
> 
> 标签：java, sorting

我对字符串的默认比较器（在 SortedSet 中）有疑问。问题是默认比较器不会对包含数字的良好字符串进行排序，即：在集合中我有：

```
room1, room2, room100 
```

自然排序应该像上面一样，但在集合中我有：

```
room1, room100, room2 
```

我知道为什么会这样，但我不知道如何改变它。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-20T13:51:32.607

试试这个比较器，它会删除所有非数字字符，然后将剩余的字符作为数字进行比较：

```
Collections.sort(strings, new Comparator<String>() {
    public int compare(String o1, String o2) {
        return extractInt(o1) - extractInt(o2);
    }

    int extractInt(String s) {
        String num = s.replaceAll("\\D", "");
        // return 0 if no digits found
        return num.isEmpty() ? 0 : Integer.parseInt(num);
    }
}); 
```

这是一个测试：

```
public static void main(String[] args) throws IOException {
    List<String> strings = Arrays.asList("room1.2", "foo1.1", "foo", "room2.3", "room100.999", "room10", "room.3");

    Collections.sort(strings, new Comparator<String>() {
        public int compare(String o1, String o2) {
            return extractInt(o1) - extractInt(o2);
        }

        int extractInt(String s) {
            String num = s.replaceAll("\\D", "");
            // return 0 if no digits found
            return num.isEmpty() ? 0 : Integer.parseInt(num);
        }
    });
    System.out.println(strings);
} 
```

输出：

```
[foo, room1, room2, room10, room100] 
```

* * *

当数字是小数时（也展示了 Java 8+ 风格）：

```
public static void main(String[] args) {
    List<String> strings = Arrays.asList("room1.2", "foo1.1", "room2.3", "room100.999", "room10", "room.3");
    Collections.sort(strings, Comparator.comparing(Application::extractDouble));
    System.out.println(strings);
}

static double extractDouble(String s) {
    String num = s.replaceAll("[^\\d.]", "");
    // return 0 if no digits found
    return num.isEmpty() ? 0 : Double.parseDouble(num);
} 
```

结果：

```
[foo, room.3, foo1.1, room1.2, room2.3, room10, room100.999] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-13T17:11:46.527

使用@bohemian 答案。只是改善了一点。这对我很有用..

```
 Collections.sort(asdf, new Comparator<String>() {
            public int compare(String o1, String o2) {

                String o1StringPart = o1.replaceAll("\\d", "");
                String o2StringPart = o2.replaceAll("\\d", "");

                if(o1StringPart.equalsIgnoreCase(o2StringPart))
                {
                    return extractInt(o1) - extractInt(o2);
                }
                return o1.compareTo(o2);
            }

            int extractInt(String s) {
                String num = s.replaceAll("\\D", "");
                // return 0 if no digits found
                return num.isEmpty() ? 0 : Integer.parseInt(num);
            }
        }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-20T13:47:13.003

试试这个。我假设你的字符串开头总是有“房间”。

```
 List<String> list = Arrays.asList("room1", "room100", "room2");
    Collections.sort(list, new Comparator<String>()
    {
        @Override
        public int compare(String o1, String o2)
        {
            return new Integer(o1.replaceAll("room", ""))
                .compareTo(new Integer(o2.replaceAll("room", "")));
        }

    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T13:47:42.547

这是我`Comparator`对这种排序的实现：（字符串可以从任何字符开始）

```
public class StringNumberComparator implements Comparator<String>{

    @Override
    public int compare(String o1, String o2) {
    int i1 = this.getRearInt(o1);
    int i2 = getLeadingInt(o2);
    String s1 = getTrailingString(o1);
    String s2 = getTrailingString(o2);

    if(i1==i2)
         return s1.compareTo(s2);
    if(i1>i2)
         return 1;
    else if(i1<i2)
            return -1;
    return 0;
    }

    private int getRearInt(String s) {
    s=s.trim();
    int i=Integer.MAX_VALUE;
    try {
             i = Integer.parseInt(s.split("[^0-9]+")[1]);
    } catch(ArrayIndexOutOfBoundsException e) {

    } catch(NumberFormatException f) {
            return i;
    }

    return i;
    }

    private String getTrailingString(String s) {
        return  s.replaceFirst("[0-9]", "");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T13:46:05.697

您可以实现一个比较器并将其传递给 set 构造函数。请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html)。

如果您所有的字符串都采用 room[number] 的形式，您可以剥离“room”解析数字并进行比较。
或者 - 您可以将整数存储在您的设置中并使用“房间”前缀打印它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T13:56:01.497

一个懒惰的选择是让字符串比较器工作而不做任何额外的事情（定义你自己的比较器）。您可以通过用零填充字符串中的数字来实现这一点：`room0001, room0002, room0100`然后默认的字符串比较器将起作用。但是，您确实需要知道最大数值，以便您可以相应地调整填充。

# http-headers - 使用 squid 删除“范围”HTTP 标头

> ID：13973505
> 
> 赞同：1
> 
> 时间：2012-12-20T13:43:33.493
> 
> 标签：http-headers, squid

我正在使用 squid 3.2.5，我想对其进行配置，使其从所有传入的 GET 请求中删除“Range”HTTP 标头。从[这篇](http://www.squid-cache.org/mail-archive/squid-users/201205/0016.html)文章中，我了解到这可以使用“range_offset_limit”选项来完成。我尝试将以下内容添加到 squid 配置文件中：

```
acl GET method GET
range_offset_limit none GET 
```

我也尝试过：

```
range_offset_limit none 
```

，但所有配置似乎都不起作用。

关于我如何做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:20:24.637

似乎“request_header_access”指令可以解决问题：

```
request_header_access Range deny all 
```

这也有一个优点，它适用于旧版本的 squid。

# android - 如何为切换按钮选择器使用颜色而不是可绘制

> ID：13973506
> 
> 赞同：0
> 
> 时间：2012-12-20T13:43:38.730
> 
> 标签：android, xml, android-layout, selector, togglebutton

```
<ToggleButton 
        android:id="@+id/toggle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/check"   
        android:layout_margin="10dp"
        android:textOn=""
        android:textOff=""
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:layout_centerVertical="true"/>

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/selected_image"
          android:state_checked="true" />
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/unselected_image"
        android:state_checked="false"/>

 </selector> 
```

如何使用**颜色**而不是**可绘制对象**？

我试过这个：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_checked="true" android:color="@color/bg_blue"/>
    <item android:state_checked="false" android:color="@color/bg_light_grey"/>

</selector> 
```

**在名为bg_toggle.xml**的颜色文件夹中定义了上述选择器

 **和

```
android:background="@color/bg_toggle" 
```

这给出了一个例外：

**android.view.InflateException: Binary XML file line #50: Error inflating class android.widget.ToggleButton**

**org.xmlpull.v1.XmlPullParserException: Binary XML file line #4: tag requires a 'drawable' attribute or child tag defined a drawable**

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:49:36.583

尝试这个

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_checked="true" android:drawable="@color/bg_blue"/>
    <item android:state_checked="false" android:drawable="@color/bg_light_grey"/>

 </selector> 
```

**编辑**

来自安卓[文档](http://developer.android.com/guide/topics/resources/drawable-resource.html)

> 注意：颜色资源也可以用作 XML 中的可绘制对象。例如，在创建状态列表可绘制对象时，您可以为 android:drawable 属性 (android:drawable="@color/green") 引用颜色资源。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-20T13:53:16.820

而不是像这样尝试：

```
 ToggleButton btnToggle=(ToggleButton) findViewById(R.id.<Your ToggleButtonId>);
    btnToggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if(isChecked)
                buttonView.setBackgroundColor(Color.RED);
            else buttonView.setBackgroundColor(Color.GREEN);
        }
    }); 
```**

# python - 计算多个文件中的行数并与文件名一起输出

> ID：13973508
> 
> 赞同：3
> 
> 时间：2012-12-20T13:43:43.213
> 
> 标签：python, count

我想获取文件夹中每个文件的行数，并将行数与文件名相邻打印出来。刚刚进入编程世界，我设法编写了这段简短的代码，到处借用它们。

```
#count the number of lines in all files and output both count number and file name
import glob
list_of_files = glob.glob('./*.linear')
for file_name in list_of_files:
    with open (file_name) as f, open ('countfile' , 'w') as out :
        count = sum (1 for line in f)
        print >> out, count, f.name 
```

但这只会输出其中一个文件。

这可以很容易地`wc -l *`在 shell 中使用 .linear 来完成，但我想知道如何在 python 中做到这一点。

PS：我真诚地希望我不是重复问题！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T13:47:09.600

你真的很亲近！只需打开一次计数文件，而不是在循环内：

```
import glob
with open('countfile' , 'w') as out:
    list_of_files = glob.glob('./*.linear')
    for file_name in list_of_files:
        with open(file_name, 'r') as f:
            count = sum(1 for line in f)
            out.write('{c} {f}\n'.format(c = count, f = file_name)) 
```

每次以`w`模式（例如`open('countfile', 'w')`）打开文件时，`countfile`（如果已存在）的内容将被删除。这就是为什么你只需要调用一次。

# mysql - 与 MySQL 配对

> ID：13973509
> 
> 赞同：1
> 
> 时间：2012-12-20T13:43:44.443
> 
> 标签：mysql

我有一个与此类似的问题 --> [Match pairs in a MySQL database](https://stackoverflow.com/questions/9026049/match-pairs-in-a-mysql-database)，但还是有点不同。

考虑两组学生，新生和高中的所有其他学生（大二、大三和大四）。您希望将即将到来的新生与更有经验的学生配对。所有学生都填写了一份问卷，其中包含您希望用作匹配标准的分数。匹配对的分数可能相差高达 10%，但应尽可能接近。最后，如果分数根本不匹配，可能会有没有朋友的新生，而且由于非新生比新生多，当然不是每个学生都会匹配。

您的源表如下所示：

```
 Student ID | Group        | Score
    1        | Freshman     | 10
    2        | Freshman     | 15
    3        | Non-Freshman | 11
    4        | Non-Freshman | 16
    5        | Non-Freshman | 30
    ... 
```

在这种情况下，`1+3`and`2+4`将是匹配的。一个完美的输出应该是这样的：

```
 Student ID    | Group        | Score | Matched Pair ID
     1         | Freshman     | 10    | 1
     3         | Non-Freshman | 11    | 1
     2         | Freshman     | 15    | 2
     4         | Non-Freshman | 16    | 2 
```

给定场景的两个特征使问题变得棘手：

1.  即使有多个可能的组合，每个新生也只能与其他（**非新生）学生匹配。**

2.  一旦创建了好友配对匹配，这些学生将不再可用于其他匹配。

与此同时，我用一个 php 脚本解决了我的问题，但必须有一种方法可以用 mysql 来解决。

当我尝试...

```
select a.id, a.score, b.id, b.score from table t1 
join table t2 on t1.score between t2.score*0.9 and t2.score*1.1 and t1.id<>t2.id
group by a.id; 
```

... 表 t2 中的同一个学生可能会匹配多次。但是，每个学生可能只有一个伴侣。其次，选择随机匹配。我想要的是分数差异最小的比赛。

任何帮助表示赞赏

# authentication - Google OAuth2 Authentication Mechaniszm 每次都需要用户登录

> ID：13973515
> 
> 赞同：2
> 
> 时间：2012-12-20T13:44:01.753
> 
> 标签：authentication, google-api

我们正在构建一个集成了 Google API（如驱动器、日历和邮件）的应用程序。我正在寻找一种方法来验证用户并获取他们的数据。我的困惑是不推荐使用用户名和密码登录，这称为客户端登录和称为 OAuth2 的新机制。但是OAuth2如果用户没有登录，每次都需要登录才能显示用户文件。而且我不明白如果用户每次都写用户名，密码是什么想法。我们正在寻找一种在不离开我们基于 html5-jquery-php 的应用程序的情况下显示用户文件、事件、邮件的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:15:28.707

请参阅[我](https://stackoverflow.com/questions/9809742/how-to-automate-login-to-google-api-to-get-oauth-2-0-token-to-access-known-user/9857988#9857988)对上一个问题的回答。您需要使用 access_token 和 refresh_token。

当用户第一次进行身份验证时，您会得到一个`authorization_token`. 然后你用它来得到一个`access_token`和一个`refresh_token`。现在，每次您的应用使用用户的 Google 帐户进行身份验证时，您都可以检查 是否`access_token`已过期 - 如果是，请使用`refresh_token`获取另一个`access_token`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:36:01.767

我真的认为跟踪令牌过期并不重要。如果您在每次查询之前刷新，一切似乎都可以正常工作。

我对 Google 的文档感到非常沮丧，以至于我自己编写了自己的文档：

[http://www.tqis.com/eloquency/googlecalendar.htm](http://www.tqis.com/eloquency/googlecalendar.htm)

# html - 我可以在我的网站上运行 MP4 而不使用计算机上的程序吗？

> ID：13973518
> 
> 赞同：-2
> 
> 时间：2012-12-20T13:44:16.857
> 
> 标签：html, embed, mp4

我有一个想要嵌入到我的网站的 MP4 文件。我不想依赖用户在他们的计算机上安装任何软件或没有插件或没有激活扩展。如何在没有本地要求的情况下自动运行此文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:53:10.307

您可以将其上传到 youtube，将其转换为 .ogg 和 .webm 以获得跨浏览器的兼容性。或者使用 Flash。在网站上播放视频并不容易。通过询问谷歌你会发现[这个](http://www.w3schools.com/html/html_videos.asp)。

# iphone - YouTube API 提取会暂时冻结 UITableView

> ID：13973521
> 
> 赞同：0
> 
> 时间：2012-12-20T13:44:26.053
> 
> 标签：iphone, objective-c, performance, uitableview, youtube-api

我正在使用 YouTube API 非常简单地获取一些视频并将它们显示在我的 iPhone 应用程序的 UITableView 中，但是它会导致我的表格在获取视频时暂时冻结。

我可以调用下面的代码来获取接下来的 25 个视频，它工作得很好，但是在获取过程中的某个时刻，我的 UITableView 冻结，然后在几秒钟后，一旦获取完成，它就会再次启动。您对我如何阻止这种情况有任何想法吗？

```
NSURL *url = [[[feeds lastObject] nextLink] URL];
        GDataQueryYouTube* query = [GDataQueryYouTube  youTubeQueryWithFeedURL:url];
        ticket = [service fetchFeedWithQuery:query delegate:self didFinishSelector:@selector(requestAdditional:finishedWithFeed:error:)];

- (void)requestAdditional:(GDataServiceTicket *)ticket finishedWithFeed:(GDataFeedBase *)aFeed error:(NSError *)error
{
    [feeds addObject:aFeed];

    NSArray *newEntries = [aFeed entries];

    for (GDataEntryBase *entry in newEntries)
    {
        [entry setParent:nil];
        [feed addEntry:entry];
    }

    [self fetchVideoData];

    [self dismissViewControllerAnimated:YES completion:^{}];

    [self.tableView reloadData];
} 
```

## 编辑

我认为导致速度变慢的原因是我打电话时`[self fetchVideoData];`。在这个方法中，我调用了一堆其他方法来获取所有不同的数据位、视频标题、观看次数、缩略图等。

我尝试将此方法的大部分内容放在 GCD 方法的第一部分，然后在后半部分将我的图像对象添加到我的数组中，但我的数组只是空的。

这是一个特别缓慢的方法的示例，获取缩略图。我已经看到并尝试过但未能将 GCD 方法应用于此。

```
-(void)setThumbnailsArray
{
    for (int i = 0; i < [[feed entries] count]; i++)
    {
        GDataEntryBase *entry = [[feed entries] objectAtIndex:i];
        NSArray *thumbnails = [[(GDataEntryYouTubeVideo *)entry mediaGroup] mediaThumbnails];
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[thumbnails objectAtIndex:1] URLString]]];
        UIImage *image = [UIImage imageWithData:data];

        //No thumbnail, create placeholder using avatar
        if (image == nil)
        {
            UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 110, 64)];
            [view setBackgroundColor:[UIColor whiteColor]];
            UIImageView *avatar = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[NSString stringWithFormat:@"%@Avatar.png", memberName]]];
            [avatar setFrame:CGRectMake(0, 0, avatar.frame.size.width - 10, avatar.frame.size.height - 10)];
            avatar.center = view.center;
            [view addSubview:avatar];

            //Create UIImage from the view with the avatar
            UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
            [view.layer renderInContext:UIGraphicsGetCurrentContext()];
            UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext();

            image = img;
        }

        [feedThumbnails addObject:image];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:47:28.853

使用 Instruments 中的 Time Profiler 分析您的应用程序，并找出冻结期间发生的情况。代码看起来好像没有做任何会阻塞的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:54:16.210

你是在主线程上调用 youtube 吗？如果是这样，这将导致 UI 在执行该调用时变得无响应。

通常，您永远不想在主线程上执行时间密集型操作。使用 Grand Central Dispatch，它看起来像这样：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    //Time consuming operations go here

    //When finished call back on the main thread:
    dispatch_async(dispatch_get_main_queue(), ^{
        //Return results and update data back on main thread 
    });
}); 
```

# javascript - ExtJS XTemplates：从另一个模板调用模板

> ID：13973524
> 
> 赞同：1
> 
> 时间：2012-12-20T13:44:30.750
> 
> 标签：javascript, templates, extjs, extjs4

我试图避免冗余并调用通用 XTemplate 以根据时间戳格式化 GMT 中的日期和时间。

这不会输出我期望的字符串，而只是在 UI 中输出 [Object object]。

```
SCB.RMWB.templates = {
    timeStamp: function(stamp) {
        return new Ext.XTemplate(   
            '<span class="time-frame">{[ this.dateRangeMsg(stamp) ]}</span>',   
            {
                dateRangeMsg: function(stamp) {

                    console.log('stamp', stamp);    

                    var dateTime = new Date(),
                        now = Ext.Date.format(dateTime, 'U'),           // gives us seconds since the UNIX Epoch from Ext.Date class
                        offset = Ext.Date.format(dateTime, 'Z'),        // gives us GMT offset from Ext.Date class
                        minutesAgo = (now - 300),                       // 5 minutes ago
                        hourAgo = (now - 3600),                         // one hour ago
                        msg = '';

                    if (stamp >= minutesAgo && stamp <= now) {
                        msg = 'Moments ago';
                    } else if (stamp >= hourAgo && stamp <= now){
                        msg = '1 hour ago';
                    } else {
                        msg = this.formatGMT(stamp, offset).toString();
                    }   

                    return msg;

                },
                formatGMT: function(stamp, offset){

                    var time;

                    // * 1000 gives us date string to format in Ext.Date class
                    if (offset > 0){
                        time = new Date((stamp - offset) * 1000);    
                    } else {
                        time = new Date((stamp + offset) * 1000); 
                    } 

                    return Ext.Date.format(time, 'd-M-y, H:i \\G\\M\\T');

                }                   
            }
        );
    },
    notifications: {
        flyout: function(){
            return new Ext.XTemplate(
                '<tpl for=".">',    
                    '<li id="notification-flyout-{id}">',
                        '<div class="data-details">',
                            '<p>{message}</p>',
                            '{[ this.renderTimeStamp(values.sentDate) ]}',   
                        '</div>',   
                    '</li>',   
                '</tpl>',
                {
                    renderTimeStamp: function(stamp) {
                        return SCB.RMWB.templates.timeStamp(stamp);
                    }               
                }
            );
        }
    }
}; 
```

如果我将时间戳功能保留在原始模板中，它可以正常工作，但此功能将在不同模板的多个地方使用，所以我想要更通用的东西，我可以重复使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:54:58.957

Well I have some difficulties to follow you within your code example but it should work for you when you call `apply` on your template instance.

In detail:

Create the template you want to reuse once within a helper-namespace. To reuse it provide a method that get's that instance along with provided data.

```
var tpl = new Ext.Template('Name: {name}, Age: {age}');
tpl.apply({name: 'John', age: 25}); // returns a html string 
```

Here a (more detailed) **[JSFiddle](http://jsfiddle.net/sran/czrt6/15/)**

# java - 在递归中使用相同的变量

> ID：13973526
> 
> 赞同：-1
> 
> 时间：2012-12-20T13:44:34.697
> 
> 标签：java

我正在尝试将洪水填充应用于特定问题。我很难理解如何使用帮助函数创建变量，所以我在整个递归过程中都保留了它。
我已经看到有一个关于它的线程，虽然我不知道如何应用它以供我自己使用。

这是我到目前为止写的代码：

如何创建 k 变量以保持不变？

```
public static int[][] fill(int[][] map, int i, int j, int color) {
    int[][] ans = null;

    if ((i<map.length)&&(i>0)&&(j<map.length)&&(j>0))
    {
        if ((k!=map[i][j]))
        {
            map[i][j]=color;    
        }
    }
    fill(map,i-1,j,color);
    fill(map,i+1,j,color);
    fill(map,i,j-1,color);
    fill(map,i,j+1,color);
    return ans;
}

public static void fill(int[][] map, int i, int j, int color,int k)

k=map[i][j] 
```

可以说这是我的数组：

4, 1, 2, 2
4, 4, 3, 1
1, 4, 4, 4

1, 4, 0, 2

并且我希望填充所有值为 4 的索引。我希望 k 获得 4 的值，因此我可以使用 k 在每个索引中进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:36:45.633

您将使用获取 k 值的新函数（我在示例中将其称为 origColor），然后将其传递给需要它的函数。除非您也愿意，否则使用 k 的函数不需要从外部可见，因此我在下面将其设为私有。

```
public static void fill(int[][] map, int i, int j, int color) {
  int origColor = map[i][j];
  fill(map, i, j, color, origColor);
}

private static void fill(int[][] map, int i, int j, int color, int origColor) {
  // actual fill method with recursive calls.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:38:12.003

我除了你的问题我注意到你的功能不会工作，因为你检查边界，你检查行或列是否等于板长度，没关系，但你需要将它更改为 <，而不是 <=。无论如何，您可以像这样使用您的代码：

```
public static int[][] fill(int[][] map, int i, int j, int color) {

    int origColor = map[i][j];
    fill(map, i, j, color, origColor);

    return map;

    }

private static void fill(int[][] map, int i, int j,int color, int   origColor) {

    //checks if index is inside matrix and if the index is equal to original   number.

    if ((i<map.length)&&(i>=0)&&(j<map.length)&&(j>=0)&&(origColor==map[i][j]))

    {

    map[i][j]=color;

    //recursive call for north east west south.

    fill(map,i-1,j,color,origColor);

    fill(map,i+1,j,color,origColor);

    fill(map,i,j-1,color,origColor);

    fill(map,i,j+1,color,origColor);
    }

    }
 public static void printBoard(int[][] board) {
if (board == null)
    System.out.println("null");
else for (int i=0; i<board.length; i++) {
    if (board[i] == null)
        System.out.println("null");
    else
        for (int j=0; j<board[i].length; j++) 
            System.out.print(board[i][j]);
    System.out.println();
}
} 
```

检查：

```
fill(map,1,1,9);
    printBoard(map); 
```

祝你好运！

# c++ - 对“for”语句如何工作的怀疑

> ID：13973529
> 
> 赞同：2
> 
> 时间：2012-12-20T13:44:36.970
> 
> 标签：c++, for-loop, declaration

对于 for 语句，我有一些不明白的地方，在下面的代码块中，请专注于 ??? 评论：

```
void user_interface::execute_a_command( const string& cmd, command cmd_table[] )
{
    LOG("user_interface::execute_a_command(): Executing \"",cmd,"\"");
    bool command_executed = false;
    //Exist any operation for this command?
    command* elem = &cmd_table[ 0 ]; //???
    for( int i = 0 ; cmd_table[ i ].function != nullptr ; i++, elem = &cmd_table[ i ] )
    {
        if( cmd == elem->name )
        {
            //Call the function
            (this->*(elem->function))();
            command_executed = true;
            break;
        }
    } 
```

好吧，这段代码编译得很好，没有具体的警告。但是，如果我将“elem”的声明和初始化放在“for”语句中，如下所示：

```
for( int i = 0 , command* elem = &cmd_table[ 0 ] ; cmd_table[ i ].function != nullptr ; i++, elem = &cmd_table[ i ] ) 
```

g++ 4.7.2 不编译此代码并出现此错误：

game.cpp:834:27：错误：''令牌之前的预期初始化程序*game.cpp:834:27：错误：预期';' '* ' 标记之前

我不清楚为什么。有人可以帮我理解这里的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T13:50:01.310

您不能在初始化程序中声明不同类型的变量。如果它们属于同一类型，它将起作用：

```
for (int ii = 0, jj = 1, kk = 2; ii < count; ++ii, --jj, kk += 15) {
    // ... 
```

进一步，多个变量声明要求它们是相同的类型：

```
int a, b = 2, *c; // Yes
float x, double y, std::string z = "no"; // no 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:53:36.313

语句中的初始化`for`可以定义多个变量，但所有变量需要具有相同的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:58:19.837

之前的两个答案都是正确的，并且直接解决了您的问题，但是我将提供我喜欢的样式，即直接在循环内声明这样的“便利变量”：

```
for( int i = 0 ; cmd_table[ i ].function != nullptr ; i++ )
{
    command* elem = &cmd_table[ i ];
    if( cmd == elem->name )
    {
        //Call the function
        (this->*(elem->function))();
        command_executed = true;
        break;
    }
} 
```

这提供了对 的“干净”访问，并且在循环结束后`cmd_table`不会让您无效。`elem`此外，这样做不会影响性能，因为它只是编译器无论如何都会优化的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T13:51:07.960

您不能使用逗号运算符进行 2 个**不同类型的声明。**

# c# - 使用 iTextsharp 获取 pdf 嵌入图像宽度

> ID：13973534
> 
> 赞同：0
> 
> 时间：2012-12-20T13:45:01.077
> 
> 标签：c#, image, pdf, itextsharp

我在 c# 中使用 iTextshrp 获取嵌入的图像（在 pdf 中）以与 pdf 页面进行比较，以检查图像在 pdf 页面中覆盖了多少区域。

但我得到了嵌入图像的实际宽度（以像素为单位）。有什么办法可以得到嵌入的尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:52:03.370

你可以看看我的程序的源代码

[http://pdfebookcutter.codeplex.com/](http://pdfebookcutter.codeplex.com/)

在paint函数中，应该有一个检索图像大小的函数。

# c# - 从集合中删除的项目仍然有效？

> ID：13973537
> 
> 赞同：-2
> 
> 时间：2012-12-20T13:45:05.950
> 
> 标签：c#, collections, observablecollection

当我从集合中删除项目时，.net 端发生了什么？对删除项目的引用仍然有效吗？

```
class myObject
{
    int i = 1;
}
...
public ObservableCollection<myObject> myObjects = new ObservableCollection<myObject>();
...
myObjects.Add(new myObject());
myObjects.Add(new myObject());

myObject removedItem = myObjects[1];
myObjects.RemoveAt(1);

// removedItem still valid ? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:46:37.320

是的，垃圾收集不会使用它，因为它仍然被应用程序中的另一个变量引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:47:38.133

是的，在 C# 中，只要您持有对对象的引用，该对象就在那里，垃圾收集器不会释放其内存。`removedItem`是对对象的引用。`removedItem`所以是的，您可以毫无问题地使用引用的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:27:15.797

`myObject`是一个引用类型，所以集合只包含对实际对象 的**引用。**

当你这样做时，`myObject removedItem = myObjects[1];`你现在有 2 个对 1 个对象的引用。

从集合中移除一个项目只会移除集合中的引用，而不是对象。这是一个重要的概念。

因此，当您这样做时，`myObjects.RemoveAt(1);`您只能对 1 个对象进行 1 次引用。重要的是，该对象仍然有`removedItem`引用它的变量

当有对象的引用时，垃圾收集器不会尝试释放内存。

一旦`removedItem`被分配了一个不同的值，null，或者超出范围`myObject`将没有引用（假设您不再创建）并被标记为垃圾收集，它将不再有效。

然而，实际上，它可能会在内存中停留更长时间，因为垃圾收集器保证内存将被释放，但不保证*何时*释放。（这最后一部分可能对你的目的并不重要，但同样值得一提。）

# javascript - IE9 中的 jQuery 选择器 ':not()' 或方法 '.not()' 行为

> ID：13973538
> 
> 赞同：3
> 
> 时间：2012-12-20T13:45:08.550
> 
> 标签：javascript, jquery, internet-explorer-9

以下代码段已使用 chrome 23、firefox 3.5 和 IE9 进行了测试：

```
<!DOCTYPE html>
<html><head>
      <title>test</title>
      <script src="jquery-1.7.2.min.js"></script>
      <script>
          $(function() {
              $('#id1 *').not('.c1 *').attr('disabled', true);
          });
      </script>
</head><body>
      <div id="id1">
            <div class="c1">
                <input type=radio>td1</input>
            </div>
            <div class="c2">
                <input type=radio>td2</input>
            </div>
      </div>
</body></html> 
```

只有 td2 应该被禁用，但是通常的嫌疑人 (IE9) 会禁用 td1 和 td2。
你将如何解决这个问题？

**回答**
实际上问题不是由于 jquery 选择器，而是当一个元素在 IE9 中获得“禁用”属性时，所有子元素都被禁用。然而，这在 Chrome 和 FF 中不会发生（至少对于上述版本）。
更多信息在这里： [禁用的“div”应该如何行动？](https://stackoverflow.com/q/6307586/400925)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:47:52.533

试试这个选择器：

```
$('#id1 :not(.c1) input').attr('disabled', true); 
```

[http://jsfiddle.net/QTG7S/](http://jsfiddle.net/QTG7S/)

* * *

您写的内容可能应该像这样重写：

```
$('#id1 *').not('.c1').find("*").attr('disabled', true); 
```

[http://jsfiddle.net/QTG7S/2/](http://jsfiddle.net/QTG7S/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:00:37.830

IE 可能正在做正确的事情：

*   `$('#id1 *')`选择里面的所有标签`#id1`，给你两个 div 和两个输入标签
*   `.not('.c1 *')`从上面的列表中删除输入标签`.c1`，你最终得到三个元素：两个 div 和一个输入
*   你申请`disabled=disabled`的结果。在 IE 中，`<div disabled=disabled>...</div>`禁用 div 标签和其中的所有内容。

我相信你可以达到这样的预期结果：

```
$('#id1 div:not(.c1) :radio').prop('disabled', true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:49:29.930

```
$('#id1 div').each(function (){
    $(this).children('input').attr('disabled', !$(this).hasClass("c1"));
}); 
```

[http://jsfiddle.net/hJTzW/4/](http://jsfiddle.net/hJTzW/4/)

# sql - 无法使用 MVVM 模式从数据库中显示 WPF 中的表

> ID：13973540
> 
> 赞同：1
> 
> 时间：2012-12-20T13:45:10.627
> 
> 标签：sql, wpf, mvvm, binding

该程序运行良好，不会崩溃或其他什么。但是数据没有显示在表格上（datagrid）

更新后的版本：

**查看：** Userperspective.xaml

我在 xaml 文件中遇到错误，因为绑定路径“产品”是未知的数据上下文

```
 <Grid Margin="0,0,0,-20">
        <DataGrid Name="Producttable" ItemsSource="{Binding Path=Products}"                 
                  HorizontalAlignment="Left" Height="200" Margin="10,44,0,0"  
                  VerticalAlignment="Top" Width="972"  /> 
```

**查看：** Userperspective.xaml.cs

```
public partial class Userperspective : Window
{
    public Userperspective()
    {
        InitializeComponent();
        DataContext = new ProductViewModel();
    }
} 
```

**产品视图模型**

```
 private readonly Product _product;
    private IBackend _backend;
    public ICommand ProductCommand { get; set; }
    public IList<Product> Products { get; set; }

    public ProductViewModel()
    {
        _backend = new BackendService();
        _product = new Product();
        ProductCommand = new ProductCommand(this);
    }

    public Product Product()
    {
        return _product;
    }

    public void LoadProducts()
    {
        Products = _backend.GetProducts();
        RaisePropertyChanged("Products");
    } 
```

**产品指令**

```
 private readonly ProductViewModel _vm;

    public ProductCommand(ProductViewModel vm)
    {
        this._vm = vm;
    }      

    public void Execute(object parameter)
    {
        _vm.LoadProducts();
    } 
```

**后端服务**

```
namespace _blabla
{
    class BackendService : IBackend
    {
        public IList<Product> GetProducts()
        {
            using (var db = new NORTHWNDEntities())
            {
                var query = from p in db.Products
                            select new Product
                            {
                                Name = p.ProductName,
                            };

                return query.ToList();
            }
        }
    }
} 
```

**后端**

```
namespace _blabla.Commands
{
    public interface IBackend
    {
        IList<Product> GetProducts();    
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:22:58.273

鉴于您是 WPF 和 MVVM 的新手，您应该将问题分解为更易于管理的问题。您的代码中发生了很多事情；MVVM、命令、数据库访问和一些抽象。你的意图是正确的，但它并不容易解决这个问题。

根据您提供的信息，我什至不能 100% 确定问题出在哪里，但我怀疑它要么是绑定，要么是数据库访问。我将专注于向您展示绑定方面。

看到我无权访问您的数据库代码，我已经模拟了一些类来帮助我解决这个问题。

**注意：**命令代码是噪音，所以我将从我的答案中删除它并专注于绑定到产品列表（一旦它工作，你可以将它与你的命令解决方案集成）。

**产品**

```
public class Product
{
    public string Name { get; set; }
    public string Description { get; set; }

    public override string ToString()
    {
        return string.Format("Product: ({0}), {1}", Name, Description);
    }
} 
```

**BackendService**：这基本上返回一个产品数组，而不是能够访问数据库。

```
class BackendService : IBackend
{
    public IList<Product> GetProducts()
    {
        return new Product[]
        {
            new Product{ Name = "Laptop", Description = "Dell 17inch laptop" },
            new Product{ Name = "Mobile Phone", Description = "iPhone" },
            new Product{ Name = "Television", Description = "Samsung 32 inch plasma" },
            new Product{ Name = "Car", Description = "Gran Torino" },
            new Product{ Name = "Book", Description = "Effective C#" },
        };
    }
} 
```

我已将 viewModel 中的产品列表绑定到 a `Listbox`，因为我无权访问，`DataGrid`否则我没有修改主窗口代码。

**主窗口.xaml**

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <ListBox Margin="5"
             ItemsSource="{Binding Path=GetProducts}"/>
</Grid> 
```

**主窗口.cs**

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ProductViewModel();
    }
} 
```

现在如果我使用**你的 viewModel**，我会得到一个`NullReferenceException`源自你的调用的，`_backend.GetProducts()`因为你没有实例化你的`BackendService`. 如果我像这样更新构造函数：

```
public ProductViewModel()
{
    _backend = new BackendService();
    _product = new Product();
    ProductCommand = new ProductCommand(this);
} 
```

并运行应用程序，产品列表正确显示。

![在此处输入图像描述](../Images/fa192a45d825123764dfa3704206bd34.png)

您应该能够将我提供的代码集成到您的项目中并证明它正在工作。当您对此感到满意时，您应该更新`BackendService`该类以调用数据库中的产品列表。我建议您理所当然地对所有绑定执行此操作，这样您就知道是绑定不起作用还是数据库调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:16:38.990

您正在尝试执行`GetProducts`，但这是一个属性而不是方法 - 创建一个单独的方法来加载产品并将您的属性名称更改为更有意义的名称

```
public IList<Product> Products {get;set;} 
```

然后创建一种方法来加载您的产品

```
public void LoadProducts()
{
    Products = _backend.GetProducts();
    //You will need to notify of property change here
    OnPropertyChanged("Products");
} 
```

然后绑定到`Products`你的 xaml

```
 <Window x:Class="_blabla.View.Userperspective"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="UserPerspective" Height="500" Width="1000">

    <Grid Margin="0,0,0,-20">
        <DataGrid Name="Producttable" ItemsSource="{Binding Path=Products}"                 
                  HorizontalAlignment="Left" Height="200" Margin="10,44,0,0"  
                  VerticalAlignment="Top" Width="972"  />
    </Grid>
</Window> 
```

然后在你的命令调用中`LoadProducts`

```
public void Execute(object parameter)
{
    _vm.LoadProducts();
} 
```

您将需要实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)以便 UI 知道您已更改`Products`属性

# gwt - org.w3c.dom.Document gwt 转换器到 GWT 中的字符串

> ID：13973543
> 
> 赞同：1
> 
> 时间：2012-12-20T13:45:15.740
> 
> 标签：gwt, dom

当我尝试将文档 (org.w3c.dom.Document) 转换为 GWT 的字符串时遇到问题。

Bofer 我在没有使用 GWT 的情况下开发了它，我是这样制作的：

```
 XMLSerializer xmlSerializer = new XMLSerializer();
        StringWriter strWriter = new StringWriter();
        OutputFormat outFormat1 = new OutputFormat();

        outFormat1.setEncoding("UTF-8");
        //outFormat1.setEncoding("ISO-8859-1");
        outFormat1.setVersion("1.0");
        outFormat1.setIndenting(true);

        outFormat1.setIndent(4);
        //outFormat1.setIndent(2);
        outFormat1.setOmitXMLDeclaration(false);

        outFormat1.setMethod("xml");

        xmlSerializer.setOutputCharStream(strWriter);
        xmlSerializer.setOutputFormat(outFormat1);
        xmlSerializer.serialize(xmlDoc);
        strWriter.close(); 
```

但是应用程序出错了，因为 GWT 不接受它。

有人知道其他解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:14:09.510

我猜您正在尝试在客户端处理 xml 文档，对吗？

如果是这样，则不能使用 org.w3c.dom，因为它不是[gwt 模拟的 java 运行时库](https://developers.google.com/web-toolkit/doc/1.6/RefJreEmulation)子集的一部分。

要在客户端处理 xml，您必须使用[GWT XML 解析器](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsXML)或其他客户端库，我个人更喜欢[gwtquery XML 数据绑定](http://code.google.com/p/gwtquery/wiki/DataBinding#XML)方式。

# algorithm - 如何从未排序的正整数流中找到最小的缺失正整数？

> ID：13973550
> 
> 赞同：1
> 
> 时间：2012-12-20T13:45:46.503
> 
> 标签：algorithm

> **可能重复：**
> [查找不在列表中的最小整数](https://stackoverflow.com/questions/1586858/find-the-smallest-integer-not-in-a-list)

你有一个未排序的正整数流。从流中读取所有数字后，您必须确定流中缺少的最小正整数。

**示例：** 正整数流：6 7 8 9 1 2

答：3

正整数流：1 2 3 4 5

和：6

正整数流：12 87 899

答：1

我想在不采用任何额外数据结构的情况下解决问题。可能吗？

我被困在这个问题上。我在互联网上做了所有的研究，但是，没有运气。谁能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:48:19.440

您可以在读取数组时使用插入排序对数组进行排序（查看数据如何来自流，这应该很有效），然后遍历它。如果`1`缺少，这就是你的答案。如果它在那里，您可以迭代检查下一个整数是否是数组中的下一个数字，否则下一个整数是缺少的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:30:09.473

在满足以下两个约束的情况下，存在一种方法。该算法将扫描流两次并需要 256KB 内存。

1.  每个元素都小于或等于`0xFFFFFFFF`。
2.  流中的所有元素都是不同的。

下面展示了这个算法。

1.  分配一个数组：`unsigned int bucket[2^16]`.
2.  扫描此流数据。如果当前数据是`a`，那么`bucket[a>>16]++`;
3.  扫描完这个流后，找到第一个值小于 的桶`2^16`。第一个丢失的无符号整数在这个桶中。设这个桶的索引是`k`，剩下的第一个无符号整数是`n`。然后`k*(2^16) <= n < (k+1)*(2^16)`。
4.  将所有存储桶的值重置为零。
5.  再次扫描此流数据。如果当前数据是`a`和`k*(2^16) <= a < (k+1)*(2^16)`，那么`bucket[a&0xFFFF]++`。
6.  再次扫描该流后，找到第一个值为 0 的存储桶。设这个桶的索引为`h`。
7.  这个答案`n = k*(2^16) + h`。

    **注意：**第三步的bucket[0]应该最多`2^16 - 1`而不是`2^16`因为无符号整数集合不包含0。

    　　ˊ

# extjs - ExtJs - 使文本区域始终适合父面板

> ID：13973555
> 
> 赞同：3
> 
> 时间：2012-12-20T13:46:06.243
> 
> 标签：extjs, extjs4.1

如何将 textarea 设置为始终具有添加到的父面板的宽度和高度？

我尝试了什么：

```
layout      : 'fit',
items       : [
{
                  xtype    : 'panel',
                  title    : 'XML definition',
                  lid      : 'paneltextarea',
                  autoScroll: true,
                  autoWidth: true,
                  flex     : 1
               }
] 
```

进入'paneltextarea'，这个textarea将被添加：

```
oTextarea = [{
               xtype : 'textareafield',
               name  : 'message',
               // value: strValue,
               flex: 1,
               border: 0,
               style : { border: 0 },
               lid: 'ietextarea'
            }]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T13:53:34.057

我忘了`layout : 'fit'`在父项中设置。

# excel - VBA：从服务器获取/下载 Excel 文件并将内容复制到新工作表中

> ID：13973556
> 
> 赞同：1
> 
> 时间：2012-12-20T13:46:07.937
> 
> 标签：excel, vba, copy, worksheet

由于某种原因，以下宏不起作用：

```
Sub ExtractDataTest()

    Dim FilePath$, Row&, Column&, Address$

 'change constants & FilePath below to suit
     '***************************************
    Const FileName$ = "Dxo.xlsx"
    Const SheetName$ = "Open"
    Const NumRows& = 50
    Const NumColumns& = 20
    FilePath = ("http://enhanced1.sharepoint.hx.com/teams/")
     '***************************************

    DoEvents
    Application.ScreenUpdating = False
        If Dir(FilePath & FileName) = Empty Then
        MsgBox "The file " & FileName & " was not found", , "File Doesn't Exist"
        Exit Sub
    End If
    For Row = 1 To NumRows
        For Column = 1 To NumColumns
            Address = Cells(Row, Column).Address
            Cells(Row, Column) = GetData(FilePath, FileName, SheetName, Address)
            Columns.AutoFit
        Next Column
    Next Row
    ActiveWindow.DisplayZeros = False
End Sub

Private Function GetData(Path, File, Sheet, Address)
    Dim Data$
    Data = "'" & Path & "[" & File & "]" & Sheet & "'!" & _
    Range(Address).Range("A1").Address(, , xlR1C1)
    GetData = ExecuteExcel4Macro(Data)
End Function 
```

我在线收到运行时错误“52”（“错误的文件名或编号”）：

```
If Dir(FilePath & FileName) = Empty Then 
```

有趣的是它确实工作过一次。当位置为“C:\”时，它可以工作并且我没有收到错误。奇怪的东西家伙。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:56:23.210

从文件系统打开文件与通过 HTTP 下载文件完全不同。最简单的不可知论方法是简单地使用`Workbooks.Open`允许 HTTP URI 的方法；

```
Set wb = Workbooks.Open(FilePath & FileName) 
```

（您只需要删除`Dir()`文件系统）

# java - 双散列常数 5？

> ID：13973558
> 
> 赞同：1
> 
> 时间：2012-12-20T13:46:12.040
> 
> 标签：java, hash, hashcode, double-hashing

我发现了大量的双散列示例，所有示例都告诉我，当你第二次散列时，你必须使用 %5。

我的问题是为什么是5？是您始终使用 5 的协议还是它是如何工作的？

一个例子：[https ://www.cs.washington.edu/education/courses/326/00wi/handouts/lecture16/sld025.htm](https://www.cs.washington.edu/education/courses/326/00wi/handouts/lecture16/sld025.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:53:15.437

不，第二个散列函数可以是任何你想要的。理想情况下，它应该有平等的机会到达哈希数组的每个单元格。

我的猜测是您没有从其他来源查找任何双重哈希示例。为简单起见，您使用的源决定`% 5`多次使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:04:42.190

在有 N 个位置的哈希表中，想法是使用两个独立的哈希函数 h1(key) 和 h2(key)，然后使用探测序列

h1 % N, (h1 + h2) % N, (h1 + 2*h2) % N, (h1 + 3*h2) % N, ...

您要确保 h2 和 N 的最大公约数为 1，否则您无法到达表中的所有位置。

有几种方案可以实现，例如：

*   选择 N 作为素数，让 h2 在区间 [1, N-1] 内给出结果
*   选择 N 作为 2 的幂，让 h2 在区间 [1, N-1] 中给出一个奇数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:58:44.027

您并不总是使用 5，甚至也不总是使用 %。

在你的例子中。%7 和 %5 是您的散列函数。然而，实际上，它们可能是完全不同的功能。

此示例使用 %5，因为它对于示例来说足够简单。唯一真正的要求是这两个功能是独立的。

请参阅[http://en.wikipedia.org/wiki/Double_hashing](http://en.wikipedia.org/wiki/Double_hashing)。

# silverlight - Silverlight 将值转换器实现为组合框

> ID：13973561
> 
> 赞同：0
> 
> 时间：2012-12-20T13:46:20.347
> 
> 标签：silverlight, xaml, combobox, valueconverter

我有以下情况

1- xaml 中的组合框

```
<ComboBox 
x:Name="PublishableCbo" Width="150" IsEnabled="True" HorizontalAlignment="Left" Height="20" 
SelectedValue="{Binding Path=Published, Mode=TwoWay}"
Grid.Column="6" Grid.Row="0">
<ComboBox.Items>
    <ComboBoxItem Content="All"  IsSelected="True" />
    <ComboBoxItem Content="Yes"  />
    <ComboBoxItem Content="No"  />
</ComboBox.Items> 
```

2- 在模型类中，我定义了一个属性并绑定到组合框中的选定值

```
 public bool Published
    {
      get
      {
        return _published;
      }
      set
      {
        _published = value;
        OnPropertyChanged("Published");
      }
    } 
```

我知道我必须实现一个转换器，但不知道具体如何。What I want is when a select Yes/No, in the model get a True/false value, when "all" is selected, to get null value.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:41:06.543

为了能够分配`null`给`Published`属性，您必须将其类型更改为[Nullable<bool>](http://msdn.microsoft.com/en-us/library/b3h38hb0%28v=vs.95%29.aspx)（您可以用`bool?`C# 编写）。

```
public bool? Published
{
    ...
} 
```

可以实现转换器，以便它从`string`到转换，`bool`反之亦然，可能如下所示。请注意，转换器使用`bool`，而不是`bool?`因为该值是作为 传入和传出转换器的`object`，因此无论如何都要装箱。

```
public class YesNoAllConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        object result = "All";

        if (value is bool)
        {
            result = (bool)value ? "Yes" : "No";
        }

        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        object result = null;

        switch ((string)value)
        {
            case "Yes":
                result = true;
                break;
            case "No":
                result = false;
                break;
        }

        return result;
    }
} 
```

要启用此转换器，您必须将 ComboBox 项目类型更改为`string`，并绑定到[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem%28v=vs.95%29.aspx)属性，而不是 SelectedValue。

```
<ComboBox SelectedItem="{Binding Path=Published, Mode=TwoWay,
                         Converter={StaticResource YesNoAllConverter}}">
    <sys:String>All</sys:String>
    <sys:String>Yes</sys:String>
    <sys:String>No</sys:String>
</ComboBox> 
```

`sys`以下 xml 命名空间声明在哪里：

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

# javascript - 如何隐藏旧样式的选择选项？

> ID：13973563
> 
> 赞同：2
> 
> 时间：2012-12-20T13:46:24.043
> 
> 标签：javascript, jquery, html, css

> **可能重复：**
> [如何使用 CSS 在 <select> 菜单中隐藏 <option>？](https://stackoverflow.com/questions/9234830/how-to-hide-a-option-in-a-select-menu-with-css)

我已经使用 jquery 设置了选择选项菜单的样式，`.customSelect()`但无论如何在页面加载时会出现旧样式版本（[见图](https://imgur.com/JCsE3)）。正如我所见，此脚本将旧选择选项的不透明度设置为“0”，这就是页面完全加载后它消失（进入背景）的原因。任何想法如何使旧样式始终不可见（或隐藏）？

我做了一个截图[Screenshot](https://imgur.com/JCsE3)

**解决方案：**将不透明度设置为“0”，以便它们在 javascript 之前已经隐藏，然后添加该样式谢谢皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:12:51.210

如果我正确理解了这个问题，那么您正试图在设置样式之前隐藏下拉列表。在这种情况下，您可以通过以下几种方式执行此操作：

将它们绝对定位并将它们的左侧放置到 -9999px 或只是在样式表中将它们的不透明度设为 0，以便它们在 javascript 然后添加该样式之前已经隐藏

您不应该真正使用 display:none 或 visiblity:hidden 作为输入，因为某些浏览器不会发布它们的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:49:17.457

如何`visibility:hidden`在css中设置它？假设这不会中断生成的 jQuery 菜单。

# java - 隐藏 JTable 中的列

> ID：13973572
> 
> 赞同：10
> 
> 时间：2012-12-20T13:46:52.770
> 
> 标签：java, swing, jtable, jscrollpane

> **可能重复：**
> [如何使 JTable 中的列对 Swing Java 不可见](https://stackoverflow.com/questions/1492217/how-to-make-a-columns-in-jtable-invisible-for-swing-java)
> [如何隐藏 DefaultTableModel 中的特定列以使其在表中显示？](https://stackoverflow.com/questions/12195973/how-to-hide-a-particlar-column-in-defaulttablemodel-from-displaying-it-in-table)

我正在尝试将数据输入到 JTable 中的三列，但我只想显示两列。实际上，我想隐藏第三列，不是通过将宽度设置为 0，而是通过任何其他可以在单击事件上从隐藏列中获取数据的方法。

如何以这种方式隐藏列？

我正在使用以下代码：

```
 try {
     String Title[]= new String{"a","b","c"};
     Object obj= new Object[50][3];
     JTable table= new JTable(obj,title);
     JScrollPane jsp= new JScrollPane(table); 
     add(jsp);
 } catch(Exception ex) {
     ex.printStackTrace();
 } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-20T13:58:02.743

将列最小和最大宽度设置为零。

```
table.getColumnModel().getColumn(columnIndex).setMinWidth(0);
table.getColumnModel().getColumn(columnIndex).setMaxWidth(0); 
```

正如 Andrew Thomson 在评论部分所建议的那样，您也可以使用[removeColumn](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#removeColumn%28javax.swing.table.TableColumn%29)。

来自javaDoc；

> **删除列**

```
public void removeColumn(TableColumn aColumn) 
```

> 从此 JTable 的列数组中删除 aColumn。注意：此方法不会从模型中删除数据列；它只是删除了负责显示它的 TableColumn。参数：aColumn - 要删除的 TableColumn

**PS：**但我个人使用第一种方法在`JTable`. 感谢您的`removeColumn`方法，我将从现在开始尝试使用它。

# php - PHP 包含结合“回显日期”在本地主机中不起作用？

> ID：13973575
> 
> 赞同：0
> 
> 时间：2012-12-20T13:47:04.433
> 
> 标签：php, date, localhost, echo, coda

我在所有`index.php`文件中使用以下内容来包含全局页脚：

```
<?php include($_SERVER['DOCUMENT_ROOT'].'/_footer.php'); ?> 
```

_footer.php 文件本身除了返回当前年份的 PHP 没有太多内容：

```
 <div class="footer">
        <p id="left">Company Address</p>
        <p id="right">Copyright <?php echo date("Y"); ?> Company Incorporated</p>
    </div>

</div> <!-- end .wrapper -->

</body>
</html> 
```

虽然上面的代码在上传到 Web 服务器时有效，但它在我的本地主机（带有 Coda 2 的 Mac OS X）中不起作用，并且我收到错误消息：

> **警告：** DATE() [ **FUNCTION.DATE** ]：依赖系统的时区设置是不安全的。您*需要*使用 DATE.TIMEZONE 设置或 DATE_DEFAULT_TIMEZONE_SET() 函数。如果您使用了这些方法中的任何一种，但您仍然收到此警告，您很可能拼错了时区标识符。我们在第**3行的****/USERS/USER/SITES/COMPANY/EXAMPLE.COM/_FOOTER.PHP 中**为“GMT/0.0/NO DST”选择了“UTC”

 **我认为设置或不设置时区不会是一个问题（因为它是一个简单的功能，旨在仅显示年份），但是在本地测试时它会破坏页脚的设计：

![在此处输入图像描述](../Images/19e56ccab4039185794aaf9ba5674a16.png)

所有文本（例如“COPYRIGHT”）都应位于该黄色框内。

**在这种情况下我该怎么办？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:50:07.927

你读过错误信息吗？它非常清楚地表明依赖系统的时区设置是不安全的，并且您需要使用`Date.Timezone`设置或`date_default_timezone_set()`功能。

所以，做一个或另一个。

要么a）修改你`php.ini`有这个：

```
 date.timezone=Europe/London 
```

或 b) 在您的调用之上调用它`date()`（或在全局包含的脚本中）：

```
date_default_timezone_set('Europe/London'); 
```

显然，`Europe/London`应替换为您的实际时区标识符，该列表可在此处获得：http: [//php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

只是一个额外的说明，如果它没有显示在您的服务器上，那是因为要么`display_errors`被禁用，要么您的错误报告级别低于它在您的开发机器中的级别，这当然应该是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:50:38.527

1.  阅读并了解错误在 php 中的工作方式：http: [//php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)。让自己成为一种错误方法，不包括在页面上显示它，而是将其发送到文件中。

2.  通过执行警告内容来解决问题：请参阅[http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

3.  如果您想粗暴，`@`请在产生警告的调用前面加上一个。它抑制错误/警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:57:00.887

我会将您的 html “由内而外”以这种方式解决您的问题：

```
<?php
   date_default_timezone_set('America/Chicago');
   $displayDate = date("Y");
   print <<<HERE
     <div class="footer">
        <p id="left">Company Address</p>
        <p id="right">Copyright $displayDate Company Incorporated</p>
     </div>
HERE;
?> 
```

您可以做更复杂的事情来设置日期文本并使其“恰到好处”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:49:17.963

放`date_default_timezone_set`

[http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T13:50:48.163

**请在 php.ini date.timezone**中设置默认时区

 **```
eg: date.timezone =  = America/Los_Angeles 
```****

# asp.net-mvc - 如何测试只能通过 HTTP POST 访问 MVC 操作？

> ID：13973579
> 
> 赞同：1
> 
> 时间：2012-12-20T13:47:08.573
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvccontrib, mvccontrib-testhelper

我正在使用 MvcContrib-TestHelper 来测试我的应用程序上的路由。我有一个仅限于 HTTP POST 的操作：

```
公共测试控制器
{
    [HttpPost]
    公共动作结果示例（）
    {
        返回视图（）；
    }
}

```

这是一个应该失败的测试示例：

```
[测试夹具]
公共类路由测试
{
    [TestFixtureSetUp]
    公共无效TestFixtureSetUp（）
    {
        RouteTable.Routes.Clear();
        Application.RegisterRoutes(RouteTable.Routes);
    }

    [测试]
    公共无效TestWithGet（）
    {
        var route = "~/Test/Example".WithMethod(HttpVerbs.Get);
        route.ShouldMapTo(r => r.Example());
    }
}

```

但是，测试通过了！我还看到了另一个未回答的问题（对不起，错误的链接），其中也提出了这个问题，而且似乎功能被破坏了。测试这条路线是否只能通过 POST 访问的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:59:26.683

看起来您只是想在那里测试 ASP.NET MVC 框架。我不认为这样的测试会带来价值......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:33:23.557

使用此代码：

```
var controller = new HomeController();
var methodInfo = controller.GetType().GetMethod("MrthodName");
var attributes = methodInfo.GetCustomAttributes(typeof(ActionMethodSelectorAttribute), true).Cast<ActionMethodSelectorAttribute>().ToList(); 
```

属性 - 这是列表接受动词

# css - Twitter Bootstrap Fluid 行水平对齐

> ID：13973589
> 
> 赞同：4
> 
> 时间：2012-12-20T13:47:40.643
> 
> 标签：css, html, twitter-bootstrap

我有一个流畅的行，其中有一个项目（非文本），我想将它水平居中对齐

文本

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12" style="text-align: center">
            <img src="@Url.Content("~/Images/Domain/IMG_1710.jpg")" />
        </div>
    </div>
</div> 
```

这很好用

但是一旦我添加了**最大宽度**和**最大高度**，对齐就不再起作用了。

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12"  style="text-align: center;max-height: 300px; max-width: 400px" >
            <img src="@Url.Content("~/Images/Domain/IMG_1710.jpg")" />

    </div>
</div> 
```

我究竟做错了什么 ？如何设置最大宽度和高度并居中对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:31:43.273

要遵循引导规则，请尝试以`offset`类为中心

```
<div class="row-fluid">
    <div class="span4 offset4">
        <img src="yourimage" />
    </div>
</div> 
```

[见文档](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:58:27.567

在 Bootstrap 的一个类上应用`max-height`和将覆盖网格样式。我建议在图像上添加高度/宽度（如果文本对齐不起作用，您可以在图像上尝试。`max-width``span#``margin: 0 auto`

# javascript - 使用单个 ajax() 调用填充多个 div，表单提交按钮失败

> ID：13973591
> 
> 赞同：4
> 
> 时间：2012-12-20T13:47:48.663
> 
> 标签：javascript, jquery, ajax

简短的问题是，当我填写`<div>`包含`type=submit`按钮时，`.click(function(){...}`功能失败。

我正在做的是这个，`#formDialogButton`通过`#accordion`包含一个. 当客户端单击提交时，它应该在 php 执行数据库内容的地方触发并返回. `.ajax()``#userForm``input type=submit``.ajax()``#userform`

```
 $(".formDialogButton").click(function(){
            var userDialog = "#" + this.id + "Dialog";
            $("#userForm, #siteForm, #limitForm").html("<img src='ajax-loader.gif' />");
            $("#userForm, #siteForm, #limitForm").load("ajax.php", {op: "forms"}, function(responseTxt,statusTxt,xhr){
                $("#userForm").html($("#user").html());
                $("#siteForm").html($("#site").html());
                $("#limitForm").html($("#limit").html());
                if(statusTxt=="success") {
                    $(userDialog).dialog({
                        autoOpen: false,
                        draggable: true,
                        modal: true,
                        resizable: true,
                        width: 700,
                        position: { within: "#mainContent" }
                    });
                    $(userDialog).dialog("open");
                    $( "#accordion").accordion({ 
                        collapsible: true,
                        heightStyle: "content",
                    });
                };
                if(statusTxt =="error")
                    alert("Error: "+xhr.status+": "+xhr.statusText);
            });
        }); 
```

这是有效的，并`<input class="submitAndReturn" type="submit" value="Submit" />`以形式返回 a 。但我无法“找到”它做任何事情。

```
 $(".submitAndReturn").click(function() {
        alert ('this is where I call my regular .formSubmitButton and let  success: function() do a .formDialogButton ');
        }); 
```

我是一个完全自学成才的业余爱好者，所以请原谅我并尽力提供帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:19:05.643

听起来您正试图在页面上加载元素之前添加点击事件。改变

```
$(".submitAndReturn").on("click", function() {
    alert ('as .submit and return is dynamically loaded. so, use on function');
}); 
```

至

```
$(document).on("click", ".submitAndReturn", function(e) {
    e.preventDefault(); //cancel the click action if needed
    alert ('as .submit and return is dynamically loaded. so, use on function');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:50:27.133

```
 $(".submitAndReturn").on("click", function() {
    alert ('as .submit and return is dynamically loaded. so, use on function');
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:31:04.257

> 我正在做的是，#formDialogBu​​tton 打开由.ajax() 填充的#accordion，其中包含#userForm，输入类型=submit

如果我理解正确的`.formDialogButton`DOM 元素正在`.ajax()`回调事件中加载。

如果您在页眉或页面末尾加载上述有问题的 javascript，则该`$(".formDialogButton").click(function()`事件很可能没有附加到 DOM。

发生这种情况是因为在 AJAX 获取必须附加事件的所需 DOM 之前脚本已经触发。您需要在`.ajax()`成功回调中附加事件。就像是

```
$.ajax({
  url: 'YOUR_URL_TO_FETCH_FORM',
  success: function(data) {
    // associate click
    $(".formDialogButton").click(function() // rest of the code
  }
}); 
```

# java - 最流行的搭配

> ID：13973595
> 
> 赞同：0
> 
> 时间：2012-12-20T13:48:04.867
> 
> 标签：java, erlang, mapreduce, data-mining, text-extraction

任何人都可以帮助在 K 文件集中找到最流行的 N 搭配。我已经实现了基本的 Map Reduce 来查找最流行的单词（单词计数器）。但是我该如何处理搭配呢？任何片段都会受到赞赏（Erlang、Python、Java、C++）。

为简单起见，假设搭配是一个包含两个单词的表达式。例如“美少女”、“黑暗乘客”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:57:57.560

好吧，这个想法与字数统计相同，但您必须为每个地图操作将前一个单词存储在某个地方。或者，您可以用成对的单词填充集合，并使用与简单单词相同的操作。

所以，我们有由句子组成的文本，每个句子都由单词组成。如果搭配是句子中的几个连续单词，那么代码可能如下所示：

```
calc(Text) ->
   calc(undefined, [], Text, dict:new()).

calc(W1, [W2 | Sentence], Text, Dict) ->
   NewDict = dict:update_counter({W1, W2}, -1, Dict),
   calc(W2, Sentence, Text, NewDict);
calc(_, [], [[Word | Sentence] | Text], Dict) ->
   calc(Word, Sentence, Text, Dict);
calc(_, _, [], Dict) ->
   List = dict:to_list(Dict),
   Sorted = lists:keysort(2, List),
   {Result, _} = lists:split(50, Sorted),
   [{Key, -Value} || Value <- Result]. 
```

当然，您需要确保您有足够的内存来使用此方法，因为它最终会生成许多数据副本。

# git - git pull：更新 repo 而不更改特定目录的内容

> ID：13973599
> 
> 赞同：2
> 
> 时间：2012-12-20T13:48:14.170
> 
> 标签：git, git-pull

我想用远程更新我的本地系统 repo，但我不想触及一个特定目录 myDir 的内容。请注意，此目录稍后在 master 分支中更新，但我想保留它的旧版本。

最好的方法是什么？

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:49:25.080

`git pull`只是`git fetch`和`git merge`包装成一个。

如果您只想在不合并的情况下更新您的存储库，那么一个简单的`git fetch`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:48:15.407

如果您不希望从远程拉取来覆盖您尚未提交的工作，请使用`stash`临时保存您的工作。从您的工作目录：

1.  `git stash`将所有未提交的更改保存到外部堆栈中
2.  您现在可以`git pull`使用远程更改来更新本地存储库
3.  现在使用`git stash pop`或`git stash apply`将您隐藏的更改带回工作目录`pull`

另一个提示：您可以存储多个工作块，并且它们都可以堆叠；用于`git stash list`查看您当前藏匿的所有物品。

# grails - Grails Mail 插件 - 发送空邮件时使用默认内容的正确方法是什么？

> ID：13973606
> 
> 赞同：2
> 
> 时间：2012-12-20T13:48:34.840
> 
> 标签：grails

我通过添加以下行添加到 Config.groovy 默认邮件正文：

```
 grails.mail.default.body = "Test body" 
```

然后我在 sendMail 方法中通过参数从表单中传递地址、主题和正文：

```
sendMail {
    to params.adress
    subject params.title
    body params.body
} 
```

如果 params.body 不为空，它可以正常工作，但是当用户忽略此字段时，默认正文不会添加到邮件中 - 没有正文就无法发送邮件。

```
Class
grails.plugin.mail.GrailsMailException
Message
message has no content, use text(), html() or body() methods to set content 
```

我在这里犯了什么错误？我是否需要一些特殊的方式来处理邮件正文、主题或其他字段的默认内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:13:17.443

邮件插件对and但不是（或主题，或其他任何东西）有[特殊支持。](https://github.com/gpc/grails-mail/blob/master/src/groovy/grails/plugin/mail/MailMessageBuilder.groovy#L68)你可以自己处理：`default.to``default.from``default.body`

```
sendMail {
    to params.adress
    subject params.title
    body(params.body ?: grailsApplication.config.grails.mail.default.body)
} 
```

但插件不会为你做。

# android - 如何获取在 TextView Android 中呈现的文本的实际帧大小

> ID：13973608
> 
> 赞同：0
> 
> 时间：2012-12-20T13:48:35.060
> 
> 标签：android, android-layout, android-widget

我在 android 中使用 TextView，附在快照中，您可以在右侧看到呈现的文本，每行留有一些空间。

实际上，我的框架宽度等于全屏宽度，但文本被包裹而没有完全呈现在留下空格的行上。

我真正需要的是渲染文本的实际帧大小，不包括每行末尾的这些空格。我希望它可以清除我自己，如果您仍然了解情况，请告诉我。感谢你的帮助。

![在此处输入图像描述](../Images/a5042ff071b60d46d64253125eb5d679.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:54:06.737

也许这会帮助你：

```
 Rect bounds = new Rect();
        textView.getPaint().getTextBounds(textView.getText().toString(), 0,
                textView.length(), bounds); 
```

没有，`bounds rect`你有绘制的文本大小。

# jquery - 获取具有特定 css 类的唯一元素的更有效方法？

> ID：13973609
> 
> 赞同：1
> 
> 时间：2012-12-20T13:48:38.430
> 
> 标签：jquery, jquery-selectors

我有一个带有几个**链接按钮** `<a class="selected">`的菜单。当我点击一个类时，我应用一个类`selected`，当我点击另一个类时，我必须删除它的类并将这个类分配给新点击的链接按钮。

**因此，同时**只有一个具有某个类名的元素，我想选择它以删除该类。

我知道：

`$('.myclass').removeClass('myclass');`

我认为效率不高，因为它必须检查 DOM 的所有元素

获取此元素的更有效方法是：`<a class="selected">`并删除其类`selected`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T13:49:44.917

不，它不会检查所有元素：它使用优化的[getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)函数。

因此，无论使用 jQuery 还是 Vanilla JS，通过类查找元素，即使不如通过 id 查找快，也足够快。

话虽这么说，因为只有一个元素（并且假设您的元素没有其他类），您可以避免 jQuery 进行的解析，如果它对您来说非常重要，那么让它更快：

```
document.getElementsByClassName('myclass')[0].className = ''; 
```

* * *

对于想要查看[代码](http://code.jquery.com/jquery-latest.js)的人来说，这是 jQuery 搜索 element 时可能的“加速”之一：

```
// Speed-up: Sizzle(".CLASS")
} else if ( (m = match[3]) && assertUsableClassName && context.getElementsByClassName ) {
    push.apply( results, slice.call(context.getElementsByClassName( m ), 0) );
    return results;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:49:52.047

没有更有效的方法可以做到这一点。如果它只有一个类，而不是你可以存储的 ID，那么你最好的选择**是**类选择器。

# android - 如何在 FragmentActivity 中膨胀不同的片段

> ID：13973614
> 
> 赞同：2
> 
> 时间：2012-12-20T13:49:14.953
> 
> 标签：android, android-fragments

我已经为 android 编程了大约七个星期。我已经开始使用模板“Tabs + Swipe”的应用程序，该模板是在“IceCreamSandwich”（API 级别 14）中引入的。

关于片段的堆栈溢出有很多问题，但我无法为我的具体问题找到解决方案。

我的问题是模板“Tabs + Swipe”有 1 个 FragmentActivity 实例化 3 个选项卡，自动生成的 onCreate 方法如下所示：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // Create the adapter that will return a fragment for each of the three primary sections
    // of the app.

    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding tab.
    // We can also use ActionBar.Tab#select() to do this if we have a reference to the tab.
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
        }
    });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by the adapter.
        // Also specify this Activity object, which implements the TabListener interface, as the
        // listener for when this tab is selected.
        actionBar.addTab(actionBar.newTab().setText(mSectionsPagerAdapter.getPageTitle(i)).setTabListener(this));
    }

} 
```

我想制作 3 个片段，每个选项卡 1 个。我应该如何从不同的片段类中扩展我的 tab1.xml、tab2.xml 和 tab3.xml 布局？我应该使用“PagerAdapter 扩展 FragmentPagerAdapter”类中的 getItem 方法吗？

```
 @Override
    public Fragment getItem(int i) {
       // pseudo-code explanation
       switch (i) {
       case 0:
            inflate tab1.xml;
       case 1:
            inflate tab2.xml;
       case 2:
           inflate tab3.xml;
       }
       return fragment;
    } 
```

这是我在这里的第一个问题，所以希望它能够理解。

感谢迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:57:19.890

getItem() 方法应该返回片段。所以它应该是这样的：

```
@Override
    public Fragment getItem(int i) {
       // pseudo-code explanation
       Fragment fragment;
       switch (i) {
       case 0:
            fragment = new FragmentTab1() // which inflates tab1.xml in its onCreateView() method;
       case 1:
            fragment = new FragmentTab2(); //etc.
       case 2:
            fragment = new FragmentTab3();
       }
       return fragment;
    } 
```

# php - print_r 语句似乎不起作用

> ID：13973618
> 
> 赞同：0
> 
> 时间：2012-12-20T13:49:17.260
> 
> 标签：php

我正在构建一个网络爬虫。它找到页面上的所有链接及其标题和元描述等。它做得很好。然后我写了一个数组，它给出了我想要的链接的所有起始 url。因此，如果它抓取一个链接并且它的 url 以数组中给出起始 url 的任何值开头，则插入到 $news_stories 中。

唯一的问题是它似乎没有插入它们。页面返回空白，现在它说 array_intersect 语句需要一个数组，而我没有指定我拥有的数组。

总之，我很难理解我的代码在哪里不起作用以及为什么没有插入想要的网址。

```
$bbc_values = array(
    'http://www.bbc.co.uk/news/health-', 
    'http://www.bbc.co.uk/news/politics-', 
    'http://www.bbc.co.uk/news/uk-', 
    'http://www.bbc.co.uk/news/technology-',  
    'http://www.bbc.co.uk/news/england-', 
    'http://www.bbc.co.uk/news/northern_ireland-', 
    'http://www.bbc.co.uk/news/scotland-', 
    'http://www.bbc.co.uk/news/wales-', 
    'http://www.bbc.co.uk/news/business-', 
    'http://www.bbc.co.uk/news/education-', 
    'http://www.bbc.co.uk/news/science_and_enviroment-',         
    'http://www.bbc.co.uk/news/entertainment_and_arts-', 
    'http://edition.cnn.com/'
);

// BBC Algorithm
foreach ($links as $link) {
    $output = array(
        "title"       => Titles($link), //dont know what Titles is, variable or string?
        "description" => getMetas($link),
        "keywords" => getKeywords($link), 
        "link"        => $link                 
    );

    if (empty($output["description"])) {
        $output["description"] = getWord($link);
    }
}

$new_stories = array();

foreach ($output as $new_array) {
    if (array_intersect($output['link'], $bbc_values) == true) {
        $news_stories[] = $new_array;
    }

    print_r($news_stories);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:54:50.780

Hmm i don't think array_intersect is what you need for a comparison [http://php.net/manual/en/function.array-intersect.php](http://php.net/manual/en/function.array-intersect.php)

Maybe you want to look for in_array [http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:52:15.963

**您将数组标记为 $new_stories 并打印 $news_stories..... diff is 'S'**

检查代码是否进入这个循环，我认为不是......

```
if (array_intersect($output['link'], $bbc_values) == true) {
    echo 'here';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-03T13:46:51.003

当使用返回参数时，**此函数使用内部输出缓冲，因此不能在 ob_start() 回调函数中使用**。

# java - split("[^0-9a-zA-Z]+") 在结果中显示空字符串

> ID：13973622
> 
> 赞同：1
> 
> 时间：2012-12-20T13:49:30.860
> 
> 标签：java, regex, split

我正在尝试将文本从文件拆分为单词

```
split("[^0-9a-zA-Z]+") 
```

但结果有空字符串。我该如何解决这个问题？

长度 | 数组中的数字| 词 | 计数 | %

```
2   [  1]  to       9   5.56 %
0   [  2]           6   3.70 %
5   [  3]  there        6   3.70 %
6   [  4]  result       3   1.85 %
4   [  5]  text         3   1.85 %
3   [  6]  but      3   1.85 % 
```

输出是：

```
I'm trying to split text from file to words

split("[^0-9a-zA-Z]+") 
but there are result empty strings too. Is there any solutions to solve this problem? 
```

3次粘贴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:11:17.757

对于`String.split`，您传递的参数是匹配术语*分隔符*的正则表达式。分隔符本身被移除。

由于您的正则表达式匹配单词，因此您实际上是在删除单词并将空格作为术语。

例如：

敏捷的棕色狐狸

将被拆分如下

```
[The][ ][quick][ ][brown][ ][fox]
 Sep  0   Sep   1   Sep   2  Sep 
```

产生一个由三个单空格字符串组成的数组。

我猜你的一些词与正则表达式不完全匹配，这就是为什么你的结果中也有一些词。

解决方案：要么反过来做（`myString.split('\\s')`似乎是一个好的开始），要么使用匹配器并迭代直到它找不到任何东西。

请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)

# java - FocusPanel 事件仅在边缘？

> ID：13973625
> 
> 赞同：1
> 
> 时间：2012-12-20T13:49:39.317
> 
> 标签：java, gwt

是否可以将 FocusPanel 划分为多个段，并让每个段响应不同的地理方向？而这只是在 FocusPanel 的边缘？

我想在整个页面上拉伸 FocusPanel，并且只需要当鼠标触摸面板边缘之一时的 mousOver 响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:38:37.217

据我所知，您不能将焦点面板分成多个部分。但是你可以模拟你自己的，像这样。

```
public class MyFocusPanel extends DockLayoutPanel
{
      private FocusPanel f1 = new FocusPanel();
      private FocusPanel f2 = new FocusPanel();
      private FocusPanel f3= new FocusPanel();
      private FocusPanel f4 = new FocusPanel();

      public MyFocusPanel ()
      {
           super(Unit.PX);
           f1.addClickHandler ( new ClickHandler() 
           {
               public void OnClick()
               {
                     onFocusPanelClick();
               }
           });
           f2.addClickHandler ( new ClickHandler() 
           {
               public void OnClick()
               {
                     onFocusPanelClick();
               }
           });
           f3.addClickHandler ( new ClickHandler() 
           {
               public void OnClick()
               {
                     onFocusPanelClick();
               }
           });
           f4.addClickHandler ( new ClickHandler() 
           {
               public void OnClick()
               {
                     onFocusPanelClick();
               }
           });

           addNorth( f1, 5.0 );
           addWest( f2, 5.0 );
           addEast( f3, 5.0 );
           addWest( f4, 5.0 );
} 
```

现在使用`add( Widget );`API将您的小部件添加到其中

# javascript - 如何创建非图像跨浏览器圈子

> ID：13973626
> 
> 赞同：-2
> 
> 时间：2012-12-20T13:49:41.500
> 
> 标签：javascript, jquery, html, css

如何创建跨浏览器、JS 或 CSS、简单的圆和能够改变其半径和颜色的蜜蜂。

我不排除 .png 解决方案，但它必须是可定制的（尺寸为`pixels`，颜色为`hex`）。

IE7,8必须，IE6可选。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:59:48.957

使用像[Raphael](http://raphaeljs.com/)这样的库来制作圆圈怎么样。它是跨浏览器的，非常轻巧@ 89Kb。它对兼容的浏览器使用 SVG，对 IE 使用 VML。

> Raphaël 目前支持 Firefox 3.0+、Safari 3.0+、Chrome 5.0+、Opera 9.5+ 和 Internet Explorer 6.0+。

这是主页上的[一个简单的圆圈示例：](http://jsfiddle.net/DA3GP/)

```
// Creates canvas 320 × 200 at 10, 50
var paper = Raphael(10, 50, 320, 200);

// Creates circle at x = 50, y = 40, with radius 10
var circle = paper.circle(50, 40, 10);
// Sets the fill attribute of the circle to red (#f00)
circle.attr("fill", "#f00");

// Sets the stroke attribute of the circle to white
circle.attr("stroke", "#fff"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:52:12.653

[使用 SVG](http://www.w3.org/TR/SVG/shapes.html#CircleElement)：

```
<svg width="200" height="200" viewBox="0 0 200 200"
    xmlns="http://www.w3.org/2000/svg" version="1.1">
    <desc>Example circle01 - circle filled with red and stroked with blue</desc>

    <!-- Show outline of canvas using 'rect' element -->
    <rect x="1" y="1" width="198" height="198"
        fill="none" stroke="blue" stroke-width="2"/>

    <circle cx="100" cy="100" r="50"
        fill="red" stroke="blue" stroke-width="10"  />
</svg> 
```

或使用 HTML5 的`canvas`：

```
<canvas id="canvas" width="400" height="400"></canvas> 
```

```
//get the canvas' context.
var c = document.getElementById('canvas').getContext("2d");

// Draw canvas outline
c.fillStyle="blue";
c.fillRect(0,0,200,200);
c.fillStyle="#fff";
c.fillRect(2,2,200- 4,200- 4);

//draw the circle
c.fillStyle="#f00";
c.beginPath();
c.arc(100, 100, 50, 0, Math.PI*2, true); 
c.closePath();
c.fill();

c.lineWidth = 10;
c.strokeStyle = '#00f';
c.stroke(); 
```

但是请注意，IE 8 或更低版本不支持这两种技术。

**[工作样本](http://fiddle.jshell.net/edqss/2/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:27:43.597

这是老歌，但很好。完全跨浏览器兼容，无需 SVG、Canvas 等：

[http://codecorner.galanter.net/2008/01/16/dhtml-javascript-graphics-draw-without-flash/](http://codecorner.galanter.net/2008/01/16/dhtml-javascript-graphics-draw-without-flash/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-20T14:07:27.483

您还可以使用 font-face 创建任何形状：
此字体有一个圆圈：[http](http://www.fontriver.com/font/fnt_basic_shapes_1/)
://www.fontriver.com/font/fnt_basic_shapes_1/ 如果您希望它有边框，您可以将一个叠加在另一个之上。

[http://caniuse.com/fontface](http://caniuse.com/fontface)

# c++ - 如何将一个字符串放在另一个字符串中，而不是某个索引处的字符

> ID：13973628
> 
> 赞同：0
> 
> 时间：2012-12-20T13:49:49.860
> 
> 标签：c++, string, insert

如果我有 ： `Enter(x)`

我想放在`(`word之后`room2`，但没有`x`, 那么 std::insert 没有帮助，因为 if ：

```
std::string myString = "Enter(x)";
std::string placeMe = "room2";
myString.insert(myString.find_first_of("(") + 1 , placeMe); 
```

然后我会得到：`Enter(room2x)`。

如何放置`placeMe` **而不是**某个索引？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:52:28.043

我相信您正在寻找的功能是替换而不是插入。

[http://www.cplusplus.com/reference/string/string/replace/](http://www.cplusplus.com/reference/string/string/replace/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T13:57:45.023

首先，您可能想要`find`代替`find_first_of`，因为您只想匹配一个可能的子字符串。其次，你想要的`std::string::replace`功能：

```
myString.replace(myString.find("(") + 1, 1, placeMe); 
```

# javascript - ajax POST 调用不同域上的 webAPI

> ID：13973633
> 
> 赞同：3
> 
> 时间：2012-12-20T13:50:05.157
> 
> 标签：javascript, asp.net, ajax, xmlhttprequest, cross-domain

我已经阅读了许多关于“在不同域上发布请求”问题的“解决方案”，也称为“跨域发布”，但我仍然无法像他们说他们修复它那样工作。

通过阅读所有关于这个问题的文章，我现在知道为什么会这样，但我仍然需要它以安全的方式在我的项目中工作，而不使用黑客动作或类似的东西。我想如果有人知道如何使它起作用，来帮助我们，我的意思是“我们”，因为我相信仍然有些人没有弥补。

我的情况：我有一个托管在 domainA 上的 webapp，它对 domainB（mvc4 webAPI）进行 ajax post 调用。ajax post 调用如下所示：

```
var profile = { Id:"1234567890", Name:"Name_01"}
$.ajax({
  type: "POST",
  url: 'http://domainB/api/Profile',
  data: JSON.stringify(profile)
}); 
```

@domainB 我用来设置自定义响应标头：

```
<system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*"/>
        <add name="Access-Control-Allow-Headers" value="X-Requested-With" />
        <add name="Access-Control-Allow-Methods" value="POST, GET, OPTIONS"/>
      </customHeaders>
    </httpProtocol>
</system.webServer> 
```

@domainB webAPI 发布方法我有这个：

```
public void Post(dynamic newProfile)
{
...
} 
```

因此，在激活/启动 ajax 调用时，在 webAPI 项目的调试模式下，我`Operation could destabilize the runtime`在 webAPI 中的 JsonFX.Serilization.DataWriter 处收到 SerializationException，并且在浏览器中出现错误，我得到

`XMLHttpRequest cannot load http://domainA/api/Profile. Origin http://domainB is not allowed by Access-Control-Allow-Origin.`

我正在 Fiddler 上捕获请求并响应，我看到`Access-Control-Allow`响应端根本没有标头。

我写了我正在使用的东西，现在因为这还没有弄清楚我应该怎么做才能使ajax post调用从domainA工作到domainB，或者什么是真正的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:22:47.117

与其尝试依赖各种可用的脚本/解决方法来执行跨域调用，不如在您自己的域上创建一个 Web 方法。

你可以用你的 AJAX 调用它。

然后让您自己的 Web 方法执行对另一个域的调用 - 这与让您的浏览器执行调用不会遇到相同的安全问题。

所以你的电话会是这样的：

浏览器 AJAX 调用 --> 您自己的 web 方法 --> 调用其他域服务 --> 结果返回给您的方法 --> 您的方法返回给您的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:47:22.287

听起来这可能是 CORS 预检请求的问题。尝试阅读以下内容：[http](http://www.html5rocks.com/en/tutorials/cors/) : //www.html5rocks.com/en/tutorials/cors/、http: [//remysharp.com/2011/04/21/getting-cors-working/](http://remysharp.com/2011/04/21/getting-cors-working/)和[http://www .w3.org/TR/cors/](http://www.w3.org/TR/cors/)

无论如何...在非简单的 AJAX 请求的情况下，浏览器首先向您的 URL 发出 OPTIONS 请求，您需要处理并返回预期的结果。如果浏览器的 OPTIONS 响应正常，它就会发送您希望它首先发送的实际 POST 请求。因此，如果您只有 POST 而不是 OPTIONS（在您的服务器上）的处理程序，那么您可能无法正确处理预检请求（OPTIONS）并且一切都崩溃了。

# iphone - iPhone 应用程序中的 Facebook

> ID：13973635
> 
> 赞同：-1
> 
> 时间：2012-12-20T13:50:10.600
> 
> 标签：iphone, objective-c, ios, facebook-graph-api

我正在开发一个 iPhone 应用程序，在这个应用程序中，我可以选择与 Facebook 分享我的帖子（我只是传递 facebook 用户的用户 ID，而我的服务器端开发人员负责发布部分）我可以获取用户 ID虽然登录脸书但问题是 - 在用户从 facebook 进行身份验证后，“代表您发布”没有进入应用程序（我正在使用 ios6 SDK）（我已经在 facebook 中创建了我的应用程序并检查了来自图表的 public_action ) 我已经浏览了 facebook 开发者页面中给出的教程（美味），但无法做到

这是我的代码-如果有人发现错误或缺少的部分，请帮我清除

**AppDelegate.h**

```
#import <FacebookSDK/FacebookSDK.h>

@class ViewController;

@interface AppDelegate : UIResponder

@property (strong, nonatomic) FBSession *session;
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *viewController;
@property (strong,nonatomic) IBOutlet UINavigationController *navBar;
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI;
@end 
```

**AppDelegate.m**

```
#import "AppDelegate.h"
#import "ViewController.h"
#define APP_ID @"fd725FDE45a44198a5b8ad3f7a0ffa09"

@implementation AppDelegate
@synthesize session = _session;

- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url
 sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation {

     return [self.session handleOpenURL:url];

 }

 - (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

   NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_location",
                        @"user_birthday",
                        @"user_likes",
                        @"email",
                        @"publish_action",
                        nil];
   return [FBSession openActiveSessionWithPermissions:permissions
                                      allowLoginUI:allowLoginUI
                                 completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [self sessionStateChanged:session
                                                         state:state error:error];
                                 }];

      }

     - (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState)state
                  error:(NSError *)error
     {

    switch (state) {
        case FBSessionStateOpen: {
             FBCacheDescriptor *cacheDescriptor = [FBFriendPickerViewController    cacheDescriptor];
        [cacheDescriptor prefetchAndCacheForSession:session];
       }
        break;
        case FBSessionStateClosed: {
                    [FBSession.activeSession closeAndClearTokenInformation];

        [self performSelector:@selector(showLoginView)
                   withObject:nil
                   afterDelay:0.5f];
       }
        break;
        case FBSessionStateClosedLoginFailed: {
                    [self performSelector:@selector(showLoginView)
                   withObject:nil
                   afterDelay:0.5f];
        }
        break;
        default:
        break;
        }

        }

   @end 
```

**邀请朋友ViewController.h**

```
 @interface InviteFriendViewController : 
    -(IBAction)fbfrnds:(id)sender;
    - (void)updateView;
    @end 
```

**邀请朋友视图控制器.m**

```
 - (void)viewDidLoad
  {
   [super viewDidLoad];
    [self.navigationController setNavigationBarHidden:YES];
     NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

     userid = [defaults objectForKey:@"userid"];

      AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

     if (!appDelegate.session.isOpen) {
      appDelegate.session = [[FBSession alloc] init];

       if (appDelegate.session.state == FBSessionStateCreatedTokenLoaded) {
        [appDelegate.session openWithCompletionHandler:^(FBSession *session,
                                                         FBSessionState status,
                                                         NSError *error) {
            [self updateView];
        }
         ];
         }
         }
         }

     -(void)facebookReteriveInformation:(NSDictionary *)dictnry{

       FriendlistViewController *friends = [[FriendlistViewController      alloc]initWithNibName:@"FriendlistViewController" bundle:nil];

           friends.token = string;

      [self.navigationController pushViewController:friends animated:YES];

       }

     -(IBAction)fbfrnds:(id)sender{

     sharedClass=[SharedClass sharedInstance];

     appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;

      AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

     if (appDelegate.session.isOpen) {

       [self updateView];
        } else {
    if (appDelegate.session.state != FBSessionStateCreated) {
        appDelegate.session = [[FBSession alloc] init];
    }

    [appDelegate.session openWithCompletionHandler:^(FBSession *session,
                                                     FBSessionState status,
                                                     NSError *error) {
        [self updateView];
     }];
      }

    NSLog(@"string issss %@",string);

       }

    - (void)updateView {
     AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
     if (appDelegate.session.isOpen) {

    string = [NSString stringWithFormat:@"%@",
              appDelegate.session.accessToken];

    NSLog(@"string issss %@",string);
    NSString *urlstrng;
    if(flag == 1){
        urlstrng = [NSString stringWithFormat:@"https://graph.facebook.com/me?access_token=%@",
                    string];
        [self dataFetching:urlstrng];
        }

       } else {

    string = [NSString stringWithFormat:@"%@",
              appDelegate.session.accessToken];
    NSString *urlstrng;
    if(flag == 1){
        urlstrng = [NSString stringWithFormat:@"https://graph.facebook.com/me?access_token=%@",
                    string];
        [self dataFetching:urlstrng];
       }
       }
       }

     -(void)dataFetching:(NSString*)strng1{

       NSURL *url = [NSURL URLWithString:strng1];
       ProfileConnector *obj = [[ProfileConnector alloc] init];
      obj.delegate1 = self;
       [obj parsingJson:url];

       }

       - (BOOL)shouldAutorotateToInterfaceOrientation:   (UIInterfaceOrientation)interfaceOrientation {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
     }

     - (void) performPublishAction:(void (^)(void)) action {
   if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] ==  NSNotFound) {
     [FBSession.activeSession reauthorizeWithPublishPermissions:[NSArray  arrayWithObject:@"publish_actions"]
                                                defaultAudience:FBSessionDefaultAudienceFriends
                                             completionHandler:^(FBSession *session,  NSError *error) {
     if (!error) {
                     action();
                                                 }
                                             }];
       } else {
    action();
       }

        }

        }

       @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:37:58.383

由于您使用的是 3.1 版本的 Facebook SDK，`openActiveSessionWithPermissions:allowLoginUI:completionHandler:`因此不应该使用，而且旧的做法似乎不再适用；来自[3.1 迁移文档](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)；

> ...您将需要删除 openActiveSessionWithPermissions:allowLoginUI:completionHandler: 的使用并将其替换为 openActiveSessionWithReadPermissions:allowLoginUI:completionHandler: （或者更简单地说，openActiveSessionWithAllowLoginUI）。
> 
> 稍后，当您的应用需要发布回 Facebook 时，您应该使用 reauthorizeWithPublishPermissions:defaultAudience:completionHandler: 来寻求额外的权限。

[迁移文档](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)中提供了更多详细信息。

# python - 带有 Flask、Postgres 的 SQLALchemy DB 会话

> ID：13973636
> 
> 赞同：8
> 
> 时间：2012-12-20T13:50:12.887
> 
> 标签：python, postgresql, sqlalchemy, flask

我正在使用带有 Flask 的 SQLAlchemy，如下所示：http: [//flask.pocoo.org/docs/patterns/sqlalchemy/](http://flask.pocoo.org/docs/patterns/sqlalchemy/)

我有一个 Selenium 测试套件，它首先在 Firefox 上运行，然后在 Chrome 上运行。

在每个浏览器上开始测试之前，会删除并创建测试数据库 (PostgreSQL) 中的表。

它在第一个浏览器上运行完美，但对于第二个浏览器，SQL 创建/删除尝试只是冻结并且没有显示错误。

我相信这是因为开放的 SQLAlchemy 会话，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:37:30.243

> 我相信这是因为开放的 SQLAlchemy 会话，对吗？

最有可能的情况就是这样。要确认它，请连接到`postgres`数据库并运行`SELECT * FROM pg_stat_activity`；

我不确定您如何处理数据库创建/删除，但您可能希望调用`dispose()`SQLAlchemy`recreate()`连接池，并确保已返回任何签出连接（例如，使用`session.close()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:17:27.360

这也是我在使用 SQLAlchemy 和 Postgres 运行 Flask unittest 时发生的事情。很多时候，罪魁祸首是一个例外，没有向上传播而被卡住。此异常还会阻止测试正确清理并因此冻结。

如果您正在创建一个测试套件，然后调用套件上的调试方法，它将显示异常。[在此处](http://docs.python.org/2/library/unittest.html#unittest.TestCase.debug)链接此方法的文档。

您对打开的 Sqlalchemy 会话的观察也可能是一个原因。明天我将根据这个观察来检验我的理论。如果它消除了一些疑问，那么我会在这里发布。

查看此[答案](https://stackoverflow.com/a/4399246/679047)，该答案显示了如何在异常时触发调试器。也许它可以帮助查明问题。

# r - ggplot2 轴标签中的 SI 前缀

> ID：13973644
> 
> 赞同：16
> 
> 时间：2012-12-20T13:50:41.390
> 
> 标签：r, ggplot2

我经常在 GNU R / ggplot 中为一些与字节相关的测量绘制图表。内置轴标签是纯数字或科学记数法，即 1 兆字节 = 1e6。我想要 SI 前缀（Kilo = 1e3、Mega=1e6、Giga=1e9 等），即轴应标记为 1.5K、5K、1M、150M、4G 等。

我目前使用以下代码：

```
si_num <- function (x) {

  if (!is.na(x)) {
    if (x > 1e6) { 
      chrs <- strsplit(format(x, scientific=12), split="")[[1]];
      rem <- chrs[seq(1,length(chrs)-6)];
      rem <- append(rem, "M");
    }

    else if (x > 1e3) { 
      chrs <- strsplit(format(x, scientific=12), split="")[[1]];
      rem <- chrs[seq(1,length(chrs)-3)];
      rem <- append(rem, "K");
    }
    else {
      return(x);
    }

    return(paste(rem, sep="", collapse=""));
  }
  else return(NA);
} 

si_vec <- function(x) {
  sapply(x, FUN=si_num);
}

library("ggplot2");

bytes=2^seq(0,20) + rnorm(21, 4, 2);
time=bytes/(1e4 + rnorm(21, 100, 3)) + 8;

my_data = data.frame(time, bytes);

p <- ggplot(data=my_data, aes(x=bytes, y=time)) +
     geom_point() +
     geom_line() +
     scale_x_log10("Message Size [Byte]", labels=si_vec) +
     scale_y_continuous("Round-Trip-Time [us]");
p; 
```

我想知道是否可以改进此解决方案，因为我的解决方案在每个图表中都需要大量样板代码。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-20T14:51:48.863

我`library("sos"); findFn("{SI prefix}")`以前是找`sitools`包的。

构造数据：

```
bytes <- 2^seq(0,20) + rnorm(21, 4, 2)
time <- bytes/(1e4 + rnorm(21, 100, 3)) + 8
my_data <- data.frame(time, bytes) 
```

加载包：

```
library("sitools")
library("ggplot2") 
```

创建情节：

```
(p <- ggplot(data=my_data, aes(x=bytes, y=time)) +
     geom_point() +
     geom_line() +
     scale_x_log10("Message Size [Byte]", labels=f2si) +
     scale_y_continuous("Round-Trip-Time [us]")) 
```

我不确定这与您的功能相比如何，但至少有人费心编写它......

我稍微修改了您的代码样式-行尾的分号是无害的，但通常是 MATLAB 或 C 编码器的符号...

**编辑**：我最初定义了一个通用格式化函数

```
si_format <- function(...) {
    function(x) f2si(x,...)
} 
```

遵循 (eg) 的格式`scales::comma_format`，但在这种情况下似乎没有必要——这只是`ggplot2`我不完全理解的更深层魔法的一部分。

OP 的代码给出了在我看来并不完全正确的答案：最右边的轴刻度是“1000K”而不是“1M”——这可以通过将`>1e6`测试更改为`>=1e6`. 另一方面，`f2si`使用小写`k`——我不知道是否`K`需要（将结果包装起来`toupper()`可以解决这个问题）。

手术结果（`si_vec`）：

![在此处输入图像描述](../Images/77d9fad1b450c91d22bd9aad856991e8.png)

我的结果（`f2si`）：

![在此处输入图像描述](../Images/3432f74f7d021de58ef7005bc18dc0c2.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-12-16T19:28:09.800

**更新：**该软件包的最新版本[`scales`](https://scales.r-lib.org/)包括打印可读标签的功能。

在这种情况下，[`label_bytes`](https://scales.r-lib.org/reference/label_bytes.html)可以使用：

```
library(ggplot2)
library(scales)

bytes <- 2^seq(0,20) + rnorm(21, 4, 2)

my_data <- data.frame(
    bytes=as.integer(bytes),
    time=bytes / (1e4 + rnorm(21, 100, 3)) + 8
)

ggplot(data=my_data, aes(x=bytes, y=time)) +
    geom_point() +
    geom_line() +
    scale_x_log10("Message Size [Byte]", labels=label_bytes()) +
    scale_y_continuous("Round-Trip-Time [us]") 
```

[![scales-si-标签](../Images/4961d2f77cdb7e3b1e44d8587f54b286.png)](https://i.stack.imgur.com/JNZ5E.png)

或者，如果您更喜欢使用 IEC 单位（`KiB = 2^10`、`MiB = 2 ^ 20`、 ...），请指定`labels=label_bytes(units = "auto_binary")`。对于结果，请查看下面原始答案中的第二个图，因为结果非常相似。

* * *

**原始答案**

对于字节有[`gdata::humanReadable`](https://www.rdocumentation.org/packages/gdata/versions/2.18.0/topics/humanReadable). `humanReadable`支持 SI 前缀（1000 字节 = 1 KB）以及[IEC 定义的二进制前缀](https://en.wikipedia.org/wiki/Binary_prefix)（1024 字节 = 1 KiB）。

此函数`humanReadableLabs`允许自定义参数并处理`NA`值：

```
humanReadableLabs <- function(...) {
    function(x) {
        sapply(x, function(val) {
            if (is.na(val)) {
                return("")
            } else {
                return(
                    humanReadable(val, ...)
                )
            }
        })
    }
} 
```

现在可以直接更改标签以使用 SI 前缀和“字节”作为单位：

```
library(ggplot2)
library(gdata)

bytes <- 2^seq(0,20) + rnorm(21, 4, 2)

my_data <- data.frame(
    bytes=as.integer(bytes),
    time=bytes / (1e4 + rnorm(21, 100, 3)) + 8
)

humanReadableLabs <- function(...) {...}

ggplot(data=my_data, aes(x=bytes, y=time)) +
    geom_point() +
    geom_line() +
    scale_x_log10("Message Size [Byte]", labels=humanReadableLabs(standard="SI")) +
    scale_y_continuous("Round-Trip-Time [us]") 
```

[![si标签](../Images/42cc0d3fb8b58780876a1c379baef4c3.png)](https://i.stack.imgur.com/DrX9b.png)

通过省略 绘制 IEC 前缀`standard="SI"`。请注意，还必须指定中断以具有清晰易读的值。

```
ggplot(data=my_data, aes(x=bytes, y=time)) +
    geom_point() +
    geom_line() +
    scale_x_log10("Message Size [Byte]", labels=humanReadableLabs()) +
    scale_y_continuous("Round-Trip-Time [us]") 
```

[![iec标签](../Images/c86e6a8da01f682c6be99707d14e2a7e.png)](https://i.stack.imgur.com/LaGnT.png)

# android - 选择时返回多个值的微调器？

> ID：13973652
> 
> 赞同：0
> 
> 时间：2012-12-20T13:51:05.260
> 
> 标签：android, spinner

a 是否可以`Spinner`在选中时返回多个值或类对象？

例如，我有一个笔记本电脑型号的 Spinner。选择后，我希望它返回`LaptopSpecs`包含大小、重量、处理器等的对象。然后使用它在其下方的视图中显示信息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:58:49.890

抱歉，没有多选`Spinner`。欢迎您使用多选列表`AlertDialog`来允许用户进行选择，但是当对话框不在屏幕上时，您需要自己决定如何呈现这些选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:15:30.523

这取决于您如何填充微调器。

如果您要从游标中的数据库中提取数据，那么您尝试做的事情很容易。

事实上，使用数据库，有几种方法可以做到：

1）您只需将创建对象所需的*所有*必要数据拉到光标中（前端的负载有点重），然后进行选择（从微调器中显示的单个数据位），您使用光标方法中的位置引用以`onItemSlected`从光标中提取相关数据并将其打包到您的对象中。

2）您只提取要在微调器中显示的数据，当做出选择时，使用`onItemSelected`方法中的数据库行 ID 从数据库中获取对象的其余数据。

# gwt - GWT 文件上传没有发出提交请求

> ID：13973658
> 
> 赞同：3
> 
> 时间：2012-12-20T13:51:21.500
> 
> 标签：gwt, file-upload

GWT 2.5.0`DevMode`

`file upload`我在下面做了一个简单的测试，

启动网址：`http://127.0.0.1:8888/UploadTest.html?gwt.codesvr=127.0.0.1:9997`

```
<g:FormPanel ui:field="fpUpload">
    <g:VerticalPanel>
        <g:FileUpload name="fileData" ui:field="fuUpload" />
        <g:Button ui:field="btUpload">Upload</g:Button>
    </g:VerticalPanel>
</g:FormPanel> 
```

```
@UiHandler("btUpload")
public void onClickUploadButton(ClickEvent e) {
    System.out.println("fileName:" + fuUpload.getFilename());
    fpUpload.setEncoding(FormPanel.ENCODING_MULTIPART);
    fpUpload.setMethod(FormPanel.METHOD_POST);
    fpUpload.setAction("/files");
    fpUpload.submit();
    System.out.println("Submitted, please wait!");
}

@UiHandler("fpUpload")
public void onSubmitComplete(SubmitCompleteEvent event) {
    System.out.println("Submit completed!");
} 
```

输出：

```
fileName:C:\fakepath\one_file_chosen_to_upload
Submitted, please wait! 
```

但是，服务器没有收到`submit request`，所以“提交完成！” 从未出现。

同时，下面的流量被窥探，`submit request`根本没有发出。

```
$ tcpdump -A -i lo port 8888 
```

也没有抛出异常。任何想法？

**@编辑**

该问题可在`ProdMode`.

**@编辑 2**

仅重新启动机器后，现在问题似乎消失了，就像`http submit request`被忽略通过电线发射一样。不幸的是，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:23:48.337

似乎您没有编写适当的 servlet 来处理多部分请求，而且您必须在`web.xml`. 您能否将您的 servlet 代码和您的内容添加到您的问题中`web.xml`？

请注意，`onSubmitComplete`如果服务器返回 404，则不会执行。尝试使用 Firebug 检查服务器响应，或者通过任何方式更改表单操作，以便您遇到相同的失败。

仅供参考，有一个库：[gwtupload](http://code.google.com/p/gwtupload/wiki/GwtUpload_GettingStarted)，它非常易于使用并且有很多不错的功能，也许你可以看看他们的[示例](http://gwtupload.alcala.org/)页面并尝试一下。

# java - Android DES算法默认属性

> ID：13973662
> 
> 赞同：0
> 
> 时间：2012-12-20T13:51:40.987
> 
> 标签：java, android, encryption, des

我在 Android 项目中使用以下代码进行加密：

```
SecretKeyFactory kf = SecretKeyFactory.getInstance("DES");
String key = "abcdefg";
DESKeySpec keySpec = new DESKeySpec(key.getBytes());
SecretKey _key = kf.generateSecret(keySpec);
String xform = "DES";
Cipher cipher = Cipher.getInstance(xform);
byte[] IV = { 11, 22, 33, 44, 55, 66, 77, 88, 99, 18, 69, 17, 72, 94, 18, 30 };
IvParameterSpec ips = new IvParameterSpec(IV);
cipher.init(Cipher.ENCRYPT_MODE, _key, ips);
String plainText = "abcdeffdkflsdkf";
byte[] cipherText = cipher.doFinal(plainText.getBytes()); 
```

我将此加密数据写入文件中，我想在我使用以下代码的 java 项目中解密此文件：

```
SecretKeyFactory kf = SecretKeyFactory.getInstance("DES");
String key = "abcdefg";
DESKeySpec keySpec = new DESKeySpec(key.getBytes());
SecretKey _key = kf.generateSecret(keySpec);
String xform = "DES";
Cipher cipher = Cipher.getInstance(xform);
byte[] IV = { 11, 22, 33, 44, 55, 66, 77, 88, 99, 18, 69, 17, 72, 94, 18, 30 };
IvParameterSpec ips = new IvParameterSpec(IV);
cipher.init(Cipher.DECRYPT_MODE, _key, ips);
String cipherText;
//cipher text is read from file.
byte[] plainText = cipher.doFinal(cipherText.getBytes()); 
```

但它不起作用。当我们不指定操作模式（即`CBC/ECB`）和填充方法（即`PKCS5Padding/NoPadding`）并且只指定算法名称来获取 Cipher 实例时，那么 Android 和 Java 使用的默认值是什么？

Android是否默认使用CBC？因为它不会给出 IV 的错误。如果我在`init`方法中指定 IV 并且未在我的 java 项目中指定模式，则会引发异常，因为 IV 不能用于 ECB。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:10:55.877

Android 和 Java 都默认为`"AES/ECB/PKCS5Padding"`. 您的密钥和 IV 的大小都不正确（因此代码甚至不应该运行！）并且您忘记正确执行（字符）编码/解码。特别是密文不应该直接转换成字符串，因为不可打印的字符很可能会被丢弃或转换。

# java - 像 JFileChooser 一样配置 JTree？

> ID：13973668
> 
> 赞同：1
> 
> 时间：2012-12-20T13:52:13.590
> 
> 标签：java, swing, jtree, jfilechooser

我是在 Java 中使用 JTrees 的新手。我有点怀疑如何按照我想要的方式配置它。我一直在寻找答案，但要么我搜索不正确，要么没有大量编码就不可能？

1.  我想使用 JTree 显示计算机上的所有文件，并在文件更改/添加/创建/删除等时进行更新。（JTree 是否会自行跟踪？）
2.  在所有具有 Cpp 扩展名的文件旁边放置一个复选框。
3.  某种方法可以获取所有已检查其框的文件并将其传递给我制作的解析器。

我该怎么做呢？除非我完全遗漏了某些东西，否则我似乎无法找到一种简单的方法来随意配置 JTree？

# osx-lion - 在 OS X 10.7 Lion 上的 Eclipse Juno 中附加 1.6.0_37-b06-434 和 javadoc 的 jdk 源

> ID：13973670
> 
> 赞同：0
> 
> 时间：2012-12-20T13:52:21.077
> 
> 标签：osx-lion, javadoc, eclipse-juno, sts-springsourcetoolsuite

我刚刚从 developer.apple.com 安装了 Java for OS X 2012-006 Developer Package 并更新了 Eclipse Juno（构建在 Juno 之上的 Springsoure 工具套件 3.1.0 版本）以使用这个 JRE 作为执行环境，我还更新了我的项目以使用这个 jdk。

在 JRE 定义对话框中，我将源附加到现在指向的 classes.jar`/Library/Java/JavaVirtualMachines/1.6.0_37-b06-434.jdk/Contents/Home/src.jar`

在此对话框中，我尝试让 Javadoc 在线指向 Oracle，指向`/Library/Java/JavaVirtualMachines/1.6.0_37-b06-434.jdk/Contents/Home/docs.jar`OR`/Library/Java/JavaVirtualMachines/1.6.0_37-b06-434.jdk/Contents/Home/Appledocs.jar`

然而，当我需要时，无论是在调试视图中还是在单击类时，似乎都无法找到源代码。我一直收到“找不到来源”。

此外，当在包视图中选择 classes.jar，然后从“导航”菜单中“打开附加的 javadoc”时，会打开一个浏览器窗口，该窗口似乎指向正确的 localhost URL（通过 http://127.0.0.1:59109/help /nftopic/jar:file:/[local path to docs.jar] ）但窗口是空的。

我已经在 stackoverflow 和博客上阅读了一些建议，我认为这些建议是最近的，但这次我仍然无法让它发挥作用。您对不同的方法有什么建议吗？

**更新**真正起作用的一件事是将 JDK 的某个类或接口悬停在源代码上，这在黄色的小弹出窗口中为我提供了**javadoc**，如果我双击该类，我将获得该类**的源代码**。现在在调试视图中查看源代码似乎也可以正常工作。嗯。

所以我对如何在 Eclipse 中获取源代码和 javadoc 的期望是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:20:48.820

好吧，似乎一切都完成了，将 javadoc 指向 /Library/Java/JavaVirtualMachines/[jdk-version]/Contents/Home/docs.jar。等等。似乎我必须阅读何时可以在 Eclipse 中看到源代码和 javadoc。

如果其他人目前需要知道如何执行此操作，我将保持原样。

# c# - 使用适用于 .NET 的 AWS 开发工具包工具分配弹性 IP

> ID：13973674
> 
> 赞同：0
> 
> 时间：2012-12-20T13:52:41.147
> 
> 标签：c#, .net, amazon-web-services, amazon-ec2

我正在使用[适用于 .NET 的 AWS 开发工具包](http://aws.amazon.com/sdkfornet/)，我注意到当我停止启动服务器时，弹性 IP 与实例解除关联。在我的程序中，我知道弹性 IP 是什么，但如何将它与工具重新关联？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:16:43.830

我不是 .NET 程序员，所以我不能给你写示例代码。您可以使用位于[Amazon.EC2.Model](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/N_Amazon_EC2_Model.htm)命名空间中的[AssociateAddressRequest类](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/T_Amazon_EC2_Model_AssociateAddressRequest.htm)

这看起来像这样

```
String instanceId = "your instance id";
String publicIp = "your public ip";

ec2.associateAddress(new AssociateAddressRequest()
            .withInstanceId(instanceId)
            .withPublicIp(publicIp)); 
```

[在这里](http://code.google.com/p/xe-tools/source/browse/trunk/xe-instant/aws/AwsConsoleApp.java?r=92)找到一个示例用法：方法`process_assign_address_command`行 593

**编辑：**

题外话，但您仍然可能感兴趣：这就是我找到代码示例的方式。 [http://code.google.com/intl/en/query/#q=AssociateAddressRequest](http://code.google.com/intl/en/query/#q=AssociateAddressRequest)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T09:39:38.930

```
 AmazonEC2Client amazonEc2client = GetAmazonClient(ConfigurationManager.AppSettings["AwsRegionEndPint"]);   
 var associateRequest = new AssociateAddressRequest
              {
                  PublicIp = Your Elastic Ip,
                  InstanceId = Your InstanceId
              };
              amazonEc2client.AssociateAddress(associateRequest); 
```

# ruby - 实现比较运算符 - Ruby

> ID：13973675
> 
> 赞同：4
> 
> 时间：2012-12-20T13:52:43.127
> 
> 标签：ruby

我是新手`Ruby`，我正在尝试在 之间进行比较`Grades`，如示例中所示

```
include Comparable

class Grade
        attr_accessor :grades, :grade

        def initialize( grade = "" )
                self.grades = { :nil => -1, :"F" => 0, :"D-" => 1, :"D" => 2, :"D+" => 3,
                                :"C-" => 4, :"C" => 5, :"C+" => 6, :"B-" => 7, :"B" => 8,
                                :"B+" => 9, :"A-" => 10, "A+" => 11 }
                if self.grades[ grade ]
                        self.grade = grade
                else
                        self.grade = nil

                end
        end

        def <=>( other )
                if self.grades[ self.grade ] < self.grades[ other.grade ]
                        return -1
                elsif self.grades[ self.grade ] == self.grades[ other.grade ]
                        return 0
                else
                        return 1
                end
        end
end

a_plus = Grade.new("A+")
a      = Grade.new("A")
[a_plus, a].sort # should return [a, a_plus] 
```

所以，我得到：

```
grade.rb:31:in `<': comparison of Fixnum with nil failed (ArgumentError)
    from grade.rb:31:in `<=>'
    from grade.rb:43:in `sort'
    from grade.rb:43:in `<main>' 
```

我只想`Comparison`在 Ruby 中的对象之间实现

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T13:57:17.473

来自[Ruby Doc 模块 Comparable](http://www.ruby-doc.org/core-1.9.3/Comparable.html)：

> Comparable 使用 <=> 来实现常规的比较运算符（<、<=、==、>= 和 >）以及 between? 方法。

当你想实现这样的事情时，只实现`<=>`. 其余的应该自动跟随。例如，如果你定义`<`，你会搞砸类。

你可以这样做：

```
class Grade
  include Comparable
  attr_reader :index
  @@grades = %w[F D- D D+ C- C C+ B- B B+ A- A+]
  def initialize (grade = nil); @index = @@grades.index(grade).to_i end
  def <=> (other); @index <=> other.index end
end

a_plus = Grade.new("A+")
a      = Grade.new("A")
a_plus > a
# => true
[a_plus, a].sort
# => `[a, a_plus]` will be given in this order 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:02:41.237

您只需要按照以下方式进行：

```
class Foo
  include Comparable
  attr_reader :bar
  def initialize bar
    @bar = bar
  end

  def <=>(another_foo)
    self.bar <=> another_foo.bar
  end
end 
```

因此，在`<=>`'s 定义中，您可以添加自己的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T18:20:23.297

对您的原始帖子发表评论：当您收到类似的消息时

> 在“>”中：nil:NilClass (NoMethodError) 的未定义方法“>”

只需放置打印语句来显示值。因此您会立即发现 in `initialize`,`self.grades[ self.grade ]`正在返回 nil，因为 in 参数`Grade.new("A+")`是一个字符串，但哈希中的键是符号，因此您需要使用`to_sym`.

您的原始课程重新排列，带有打印语句（并且仅显示 >(other)）：

```
class Grade
    attr_reader :grade
    @@grades = { :nil  => -1, :"F"  =>  0, :"D-" =>  1, :"D"  => 2, :"D+" => 3,
                 :"C-" =>  4, :"C"  =>  5, :"C+" =>  6, :"B-" => 7, :"B"  => 8,
                 :"B+" =>  9, :"A-" => 10, :"A+" => 11 }

    def initialize( p_grade = "" )
        @grade = p_grade if @@grades[ p_grade.to_sym ]
        puts "init param=#{p_grade} value=<#{@@grades[ p_grade.to_sym ]}> @grades=<#{@grade}>"
    end

    def >( other )
        puts "in >( other ) : key1=#{self.grade} key2=#{other.grade}"
        puts "in >( other ) : $#{@@grades[ self.grade ]}$ ??? $#{@@grades[ other.grade ]}$"
        return @@grades[ self.grade ] > @@grades[ other.grade ]
    end
end

print '--- Grade.new("A+") : '; a_plus = Grade.new("A+")
print '--- Grade.new("A")  : '; a      = Grade.new("A")
print '--- a_plus > a : '; p a_plus > a 
```

执行 ：

```
$ ruby -w t.rb
--- Grade.new("A+") : init param=A+ value=<11> @grades=<A+>
--- Grade.new("A")  : t.rb:9: warning: instance variable @grade not initialized
init param=A value=<> @grades=<>
--- a_plus > a : in >( other ) : key1=A+ key2=
in >( other ) : $$ ??? $$
t.rb:15:in `>': undefined method `>' for nil:NilClass (NoMethodError)
    from t.rb:21:in `<main>' 
```

`Grade.new("A")`: 由于**A**不存在于哈希中，实例变量 @grade 没有设置，`self.grades[ self.grade ] > ...`并将消息发送`>`到 nil，一个 NilClass 的实例，它没有定义`>`。

注意 @grades=<#{xyz}> 的技巧，用 <> 或 $$ 包围内插值使得当值为零时显示更加明显。
还要注意 ruby​​ -w t.rb 中的 -w，显示有趣的警告消息。

# android - Android如何根据其高度/宽度为视图设置动画

> ID：13973677
> 
> 赞同：2
> 
> 时间：2012-12-20T13:52:47.217
> 
> 标签：android, android-animation, objectanimator

嗨，我正在尝试`ObjectAnimator`根据视图的大小在屏幕内外转换/缩放视图的大小。

到目前为止，我设法利用`ViewTreeObserver.OnGlobalLayoutListener`它来检查填充时的大小。

```
@Override
public void onGlobalLayout() {

    tray_height = menu.getMeasuredHeight();
} 
```

这适用于具有不需要的副作用的静态大小菜单，它会在我隐藏它之前显示一秒钟。但是，现在我需要使用其中一个视图的高度同时为两个对象设置动画。

例如，我有 MapView 全屏显示。当用户触摸屏幕上的按钮之一时，我想缩放 MapView 以为传入视图腾出空间。然后传入的视图转换为视图以显示其内容。

我知道这在平板电脑上是可能的，因为[出租的 Trulia](https://play.google.com/store/apps/details?id=com.trulia.android)与我想要的效果几乎相同。有没有办法实现这一点，但用动态高度代替？

# c# - 路由问题：ASP.NET 4 或 4.5

> ID：13973679
> 
> 赞同：3
> 
> 时间：2012-12-20T13:52:56.060
> 
> 标签：c#, asp.net, asp.net-mvc, routing, webforms

我遇到了路由问题。我需要创建这种路线：

**http://www.site.com/index.html?参数**

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.Ignore("{resource}.css/{*pathInfo}");
        routes.Ignore("{folder}/{*pathInfo}", new { folder = "Styles" });
        routes.Ignore("{resource}.js/{*pathInfo}");

        routes.MapPageRoute(
            "Default",
            "{page}.html",
            "~/default.aspx"
        );
    }
} 
```

我已经成功创建了这条路线：
**http ://www.site.com/index.html/?parameter**

如何从 URL 中删除“/”（斜杠）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:18:59.403

从 html 之后删除斜杠，使其变为以下内容：

```
routes.MapPageRoute(
      "Default",
      "{page}.html{*id}",
      "~/default.aspx"
); 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:04:34.327

将路线定义为：

```
 routes.MapPageRoute(
          "Default",
          "{page}.html",
          "~/default.aspx"
    ); 
```

并在代码中添加 QueryString 参数。QueryStrings 将被正常处理。

# python - 我的递归函数（填充树结构）在每次循环/调用期间添加到根节点

> ID：13973680
> 
> 赞同：1
> 
> 时间：2012-12-20T13:52:56.350
> 
> 标签：python, recursion, mutable

我有一个算法来填充树状结构（类：Scan_instance_tree），但不幸的是，在每次调用期间，它都错误地添加到根节点的子节点，以及在树中进一步创建的新子节点。

作为线索，我看到了另一个线程......

[递归python函数中的持久对象](https://stackoverflow.com/questions/4331006/persistent-objects-in-recursive-python-functions)

...简要提到了这个问题，并建议传递的参数必须是可变的。这就是答案，在这个例子中我将如何做到这一点？？？

这是我当前的代码：

```
class Field_node(object):
    field_phenotype_id = -1
    field_name = ''
    field_parent_id = -1
    child_nodes = []          

class Scan_instance_tree(object):
    root_node = None  

    def __init__(self, a_db):
        self.root_node = Field_node()
        scan_field_values = self.create_scan_field_values(a_db)   # This just creates a temporary user-friendly version of a database table    
        self.build_tree(scan_field_values)  

    def build_tree(self, a_scan_field_values):
        self.root_node.field_name = 'ROOT'      
        self.add_child_nodes(a_scan_field_values, self.root_node)

    def add_child_nodes(self, a_scan_field_values, a_parent_node):
        i = 0
        while i < len(a_scan_field_values):
            if a_scan_field_values[i]['field_parent_dependancy'] == a_parent_node.field_phenotype_id:
                #highest_level_children.append(a_scan_field_values.pop(a_scan_field_values.index(scan_field))) 
                child_node = Field_node()
                child_node.field_phenotype_id = a_scan_field_values[i]['field_phenotype_id']
                child_node.field_name = a_scan_field_values[i]['field_name']
                child_node.field_parent_dependancy = a_scan_field_values[i]['field_parent_dependancy']

                a_parent_node.child_nodes.append(child_node)
                a_scan_field_values.remove(a_scan_field_values[i])

                # RECURSION: get the child nodes
                self.add_child_nodes(a_scan_field_values, child_node)
            else: 
                i = i+1 
```

如果我删除对 self.add_child_nodes(...) 的递归调用，则根的子节点被正确添加，即它们仅包含那些 field_parent_dependancy = -1 如果我允许递归调用，则根的子节点包含所有节点，无论 field_parent_dependancy 值如何。

此致

安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:56:15.367

When you define your `Field_node` class, the line

```
 child_nodes = [] 
```

is actually instantiating a single list as a class attribute, rather than an instance attribute, that will be shared by all instances of the class.

What you should do instead is create instance attributes in `__init__`, e.g.:

```
class Field_node(object):
    def __init__(self):
        self.field_phenotype_id = -1
        self.field_name = ''
        self.field_parent_id = -1
        self.child_nodes = [] 
```

# java - 带有变量字符串和转义点的 Java replaceAll 方法

> ID：13973681
> 
> 赞同：0
> 
> 时间：2012-12-20T13:53:01.373
> 
> 标签：java, string, variables, escaping, replaceall

我很难弄清楚这一点，所以我请求你的帮助。这是交易：

```
String str = "02-EST-WHATEVER-099-00.dwg";
String newStr = str.replaceAll("([^-_\\.]+-[^-_\\.]+-[^-_\\.]+-[^-_\\.]+-)[^-_\\.]+(\\.[^-_\\.]+)", "$1$2"); 
```

上面的代码块导致`02-EST-WHATEVER-099-.dwg`（删除了最后一个“00”，就在扩展之前）。**太好了，这就是我需要的！**

但是我上面使用的 RegEx 必须动态创建（我要删除的字段可以在不同的位置）。因此，我使用了一些代码来创建 RegEx 字符串（如果我刚刚声明它，结果如下所示）：

```
String regexRemoveRev = "([^-_\\.]+-[^-_\\.]+-[^-_\\.]+-[^-_\\.]+-)[^-_\\.]+(\\.[^-_\\.]+)"; 
```

现在，如果 I `out.print(regexRemoveRev)`，我得到`([^-_\.]+-[^-_\.]+-[^-_\.]+-[^-_\.]+-)[^-_\.]+(\.[^-_\.]+)`（注意单个反斜杠）。

当我`replaceAll`再次尝试时，它不起作用：

```
String str = "02-EST-WHATEVER-099-00.dwg";
String newStr = str.replaceAll(regexRemoveRev, "$1$2"); 
```

所以我认为这可能是因为单个反斜杠，我尝试用其中 4 个而不是 2 个来声明 regexRemoveRev：

```
String regexRemoveRev = "([^-_\\\\.]+-[^-_\\\\.]+-[^-_\\\\.]+-[^-_\\\\.]+-)[^-_\\\\.]+(\\\\.[^-_\\\\.]+)"; 
```

的输出是`out.print(regexRemoveRev)`正则表达式的双反斜杠版本，正如预期的那样：

```
([^-_\\.]+-[^-_\\.]+-[^-_\\.]+-[^-_\\.]+-)[^-_\\.]+(\\.[^-_\\.]+) 
```

但是替换还是不行！

我怎样才能让它做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:25:14.133

我刚刚写了一个简短的程序，在这两种情况下它都可以在这里工作：

```
public class StringTest 
{  

    public static void main(String[] args) 
    {  
        String str = "02-EST-WHATEVER-099-00.dwg";

        String newStr = str.replaceAll("([^-_\\.]+-[^-_\\.]+-[^-_\\.]+-[^-_\\.]+-)[^-_\\.]+(\\.[^-_\\.]+)", "$1$2");

        String regexRemoveRev = "([^-_\\.]+-[^-_\\.]+-[^-_\\.]+-[^-_\\.]+-)[^-_\\.]+(\\.[^-_\\.]+)";

        String newStr1 = str.replaceAll(regexRemoveRev, "$1$2");

        System.out.println("newStr: "+newStr);
        System.out.println("regexRemoveRev: "+regexRemoveRev);
        System.out.println("newStr: "+newStr1);

    }  
} 
```

上面的输出：

newStr: 02-EST-WHATEVER-099-.dwg
regexRemoveRev: ([^- *.]+-[^-* .]+-[^- *.]+-[^-* .]+-)[^- *.]+ (.[^-* .]+)
newStr: 02-EST-WHATEVER-099-.dwg

我不知道为什么不适合你！！还是您要问的其他问题，我错了

# c# - 带有导航列表的 EF Lambda Linq 查询

> ID：13973684
> 
> 赞同：0
> 
> 时间：2012-12-20T13:53:12.433
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我似乎无法用正确的选择完成我的 linq 语句。到目前为止，我有以下内容，但问题是当我想要对所有内容进行选择时，它会导致只有 CategoryTypes 的“选择”：

```
var qwe = dc.LeadTypes
            .Include("DataTypes")
            .Include("DataTypes.CategoryTypes")
            .Where<LeadType>(x => x.Disabled == false)
            .SelectMany(x => x.DataTypes)
            .Where(x => x.Disabled == false)
            .SelectMany(x => x.CategoryTypes)
            .Where(x => x.Disabled == false)
            .ToList(); 
```

生成的 SQL

```
SELECT 
[Extent3].[CategoryTypeID] AS [CategoryTypeID], 
[Extent3].[Name] AS [Name], 
[Extent3].[DataTypeID] AS [DataTypeID], 
[Extent3].[Disabled] AS [Disabled]
FROM   [LeadLookup].[LeadType] AS [Extent1]
INNER JOIN [LeadLookup].[DataType] AS [Extent2] ON [Extent1].[LeadTypeID] = [Extent2].    [LeadTypeID]
INNER JOIN [LeadLookup].[CategoryType] AS [Extent3] ON [Extent2].[DataTypeID] =      [Extent3].[DataTypeID]
WHERE (0 = [Extent1].[Disabled]) AND (0 = [Extent2].[Disabled]) AND (0 = [Extent3].  [Disabled]) 
```

我这样做的原因是因为我在三个表中的每一个上都有一个禁用的列，我不想返回这些行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:16:59.557

我不确定我是否理解您的要求，但尝试返回启用所有实体的 LeadTypes

```
var qwe = (from lt in dc.LeadTypes
           where !lt.Disabled
           select new LeadType
           {
               DataTypes = from dt in lt.DataTypes
                           where !dt.Disabled
                           select new DataType
                           {
                               CategoryTypes = dt.CategoryTypes.Where(ct => !ct.Disabled),
                               // rest of dt values
                           }
               // rest of lt values
           }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T07:04:09.637

如果您使用 include() ，则无法将列投影为不同的形状。投影列不能具有相同的名称。

[![结果](../Images/18c36ef1b672ef042cd4f3ab0b034225.png)](https://i.stack.imgur.com/Rf61j.png)

```
var qwe = dc.LeadTypes.Where(x => x.Disabled == false)
        .SelectMany(x => x.DataTypes.Where(y => y.Disabled == false), (lead, data) => new
        {
            disabledLeadType = lead.Disabled,
            disabledDataType = data.Disabled,
            idDataType = data.Id,
            categoryType = data.CategoryTypes
        }
        )
        .SelectMany(x => x.categoryType.Where(y => y.Disabled == false), (lead_data, category) => new
        {
        lead_data.disabledLeadType, lead_data.disabledDataType, lead_data.idDataType,
        disabledCategoryType = category.Disabled,
        idCatergoryType = category.Id
        }
        )
        .ToList(); 
```

# c# - 正则表达式问题 c# 数字现在是下划线

> ID：13973686
> 
> 赞同：5
> 
> 时间：2012-12-20T13:53:15.193
> 
> 标签：c#, regex

我的正则表达式正在删除字符串中的所有数字 (0-9)。我不明白为什么所有数字都被替换为_

编辑：我知道我的“_”正则表达式模式将字符更改为下划线。但不是为什么数字！

谁能帮我吗？我只需要像所有特殊字符一样删除。

在此处查看正则表达式：

```
 string symbolPattern = "[!@#$%^&*()-=+`~{}'|]";
Regex.Replace("input here 12341234" , symbolPattern, "_");

Output: "input here ________" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T13:57:01.637

The problem is your pattern uses a dash in the middle, which acts as a range of the ascii characters from `)` to `=`. Here's a breakdown:

*   `)`: 41
*   `1`: 49
*   `=`: 61

As you can see, numbers start at 49, and falls between the range of 41-61, so they're matched and replaced.

You need to place the `-` at either the beginning or end of the character class for it to be matched literally rather than act as a range:

```
"[-!@#$%^&*()=+`~{}'|]" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T13:56:11.273

you must escape `-` because sequence `[)-=]` contains digits

```
string symbolPattern = "[!@#$%^&*()\-=+`~{}'|]"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T13:57:31.793

Move the `-` to the end of the list so it is seen as a literal:

```
"[!@#$%^&*()=+`~{}'|-]" 
```

Or, to the *front*:

```
"[-!@#$%^&*()=+`~{}'|]" 
```

As it stands, it will match all characters in the range `)-=`, which includes all numerals.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T13:54:38.910

你需要在你的正则表达式中转义你的特殊字符。例如，* 是通配符匹配。看看其中一些特殊字符对您的比赛意味着什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T14:15:28.287

我没有使用 C#，但通常“*”字符也是需要转义的控制字符。

以下匹配一整行任何字符，尽管“^”和“$”有些多余：

```
^.*$ 
```

这匹配出现在字符串中的任意数量的“A”字符：

```
A* 
```

来自 oreilly 的“猫头鹰”书是您真正需要研究的：

[http://shop.oreilly.com/product/9780596528126.do?green=B5B9A1A7-B828-5E41-9D38-70AF661901B8&intcmp=af-mybuy-9780596528126.IP](http://shop.oreilly.com/product/9780596528126.do?green=B5B9A1A7-B828-5E41-9D38-70AF661901B8&intcmp=af-mybuy-9780596528126.IP)

# actionscript-3 - 仅当 2 个 TextInput 字段不为空时启用按钮 - 附上代码和屏幕截图

> ID：13973689
> 
> 赞同：1
> 
> 时间：2012-12-20T13:53:26.563
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.6, flex-mobile

在 Flex 移动应用程序（或任何 Flex 4 应用程序）中 - 如何根据其他 2 个字段的内容启用/禁用按钮？

![在此处输入图像描述](../Images/4e3d10ffd23dfce419606b4eb8616a8a.png)

我在下面粘贴我非常简单的测试代码，它的问题是 Flash Builder 4.7 中的语法错误：`The entity name must immediately follow the '&' in the entity reference.`- 这可能意味着＆符号是一个特殊字符，但是如何解决这个（可能是频繁的）问题？

**测试应用程序.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    firstView="views.Home" 
    applicationDPI="160">
</s:ViewNavigatorApplication> 
```

**意见/Home.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        title="How to enable Login button?">

    <s:layout>
        <s:VerticalLayout paddingTop="8"
            horizontalAlign="center" gap="8" />
    </s:layout>

    <s:Label text="Username:" />
    <s:TextInput id="_username" />
    <s:Label text="Password:" />
    <s:TextInput id="_password" />

    <s:Button id="_login" 
              label="Login" 
              enabled="{_username.text.length > 0 && _password.text.length > 0}" />
</s:View> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:17:51.573

当您在 mxml 中的 CDATA 之外编写它时，您应该替换`&&`为。`&amp;&amp;`

使用它也更好`_username.text!=''`，`_username.text.length > 0`因为它会在运行时引起警告，因为它`text`不是事件调度程序并且它不能报告`length`更改。但是，它将更新按钮的可用性，因为它`text`会自行更改并`TextInput`报告它导致绑定更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T21:35:05.697

使用绑定表达式时。mxml 不考虑 && 而是将您的表达式写为

> & &

....mxml 也不读取转义字符，例如 \t 用于制表符...而是在 actionscript 中编写表达式，然后使用数据绑定 .cheers ;-)

# python - WCF 的 Python Suds 肥皂客户端。WS 可靠的消息传递

> ID：13973690
> 
> 赞同：2
> 
> 时间：2012-12-20T13:53:29.960
> 
> 标签：python, soap, wcf-client, ws-reliablemessaging

我有使用 WS 可靠消息传递的 WCF 服务。我想编写一些使用 suds soap 客户端连接到该服务的 python 脚本，但似乎 suds 不支持开箱即用的可靠消息传递。是否有人尝试使用具有可靠消息传递的泡沫？我是否必须编写一些握手逻辑，例如 CreateSequence、TerminateSequence 等？或者也许还有其他支持 WS-reliable 消息的 python soap 客户端？

提前致谢。

# soap - 带有剥离结束标签的肥皂响应

> ID：13973692
> 
> 赞同：0
> 
> 时间：2012-12-20T13:53:35.113
> 
> 标签：soap, wsdl

直到今天，我的 iPhone 应用程序都可以很好地与 SOAP 和 WSDL 配合使用。它突然开始发送带有剥离结束标记的 SOAP 响应。例如

```
...../SOAP-ENV:Body></SOAP-ENV:Envelop 
```

代替

```
..../SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

服务器没有任何改变。知道为什么我会收到此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:52:15.293

花了3个小时后，我得到了解决方案。如果其他人遇到这种问题，想在这里分享。

这是由于奇怪的字符。Windows 会自动将一些字符放入soap 文件中。因此，当它返回响应时，它算不上。字符，但因为有隐藏的 BOM [http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)字符，所以它包含它们并发送实际响应被剥离。

所以只要找到 BOM 并删除它们就可以了

谢谢

# javascript - 为对象创建键：值对，同时为每个对象循环和设置变量

> ID：13973703
> 
> 赞同：1
> 
> 时间：2012-12-20T13:54:11.430
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何从 javascript 中的变量值创建对象属性？](https://stackoverflow.com/questions/2241875/how-to-create-object-property-from-variable-value-in-javascript)

好的 - 这对我来说很难。我正在使用 jQuery 遍历我所有的 classes="data"。然后，我想使用每个特定的“dataName”和“dataValue”为我的功能分配属性。但是，一旦完成，我只有“dataName =（循环的最后一个值）”的属性。如何每次都分配我的 dataName 变量来创建一个新属性 - 而不是我只想创建一个名为“dataValue”的属性

```
function pushAttributesintoFeature(feature) {  
  $(".data").each( function(){
    var dataName = $(this).attr("name")
    var dataValue = $(this).val()   
    feature.dataName = dataValue
  })
} 
```

例子：

```
<input class="data" name="radius" value="15">
<input class="data" name="height" value="5"> 
```

一旦我执行脚本，我就剩下：`feature.dataName = "5"` 但我想要：`feature.radius="15"`和`feature.height = "5"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:55:29.483

您可以使用方括号语法来访问带有变量的属性：

```
feature[dataName] = dataValue; 
```

这将设置一个属性，其标识符是 的*值*，`dataName`而不是文字字符串“dataName”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:56:29.813

您可以这样编写代码：

```
feature[$(this).attr("name")] = $(this).val() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:56:55.510

使用此 sintax 设置值：

```
function pushAttributesintoFeature(feature) {  
  $(".data").each( function(){
    var dataName = $(this).attr("name")
    var dataValue = $(this).val()   
    feature[dataName] = dataValue;
  })
} 
```

# java - JScrollPane 不适用于 JList

> ID：13973704
> 
> 赞同：1
> 
> 时间：2012-12-20T13:54:13.683
> 
> 标签：java, swing, jscrollpane, jlist

代码：

```
list1items = new DefaultListModel();
list1items.addElement("-");
list1 = new JList(list1items);
list1.setSelectionMode (ListSelectionModel.SINGLE_SELECTION);
list1.setBounds(0,0, 100,100);
JScrollPane list1scr = new JScrollPane(list1);
list1scr.setPreferredSize(new Dimension(20, 20));
list1.setVisibleRowCount(8);
getContentPane().add (list1scr); 
```

并且没有出现滚动条。当物品太多时，它们被隐藏起来，我无法触及它们。如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T14:02:32.110

```
getContentPane().add(list1scr); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T15:56:44.177

为了扩展 Michael Ardan 的答案，您将 JList 添加到面板而不是 JScrollPane。必须将 JScrollPane 添加到面板中，并且必须将 JList 添加到 ScrollPane 才能使其工作。真的没有必要使用`setBounds`或`setPreferredSize`- 摆脱它们。当您调用该`setVisibleRowCount`方法时，JList 会处理所有这些。这是您的 ScrollPane 工作的示例。如果您仍然有问题，请将您自己的代码插入此示例，直到它中断。然后告诉我们是什么破坏了它。如果不是，请接受迈克尔的回答。

```
import java.awt.*;
import javax.swing.*;

public class Temp extends JPanel{
    public Temp(){

        DefaultListModel list1items = new DefaultListModel();
        list1items.addElement("-");
        for(int i = 0; i < 200; i++)
            list1items.addElement("Item " + i);
        JList list1 = new JList(list1items);
        list1.setSelectionMode (ListSelectionModel.SINGLE_SELECTION);
        JScrollPane list1scr = new JScrollPane(list1);
        list1.setVisibleRowCount(8);
        add (list1scr);
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new Temp());
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# objective-c - 定时 UIAlert 每 60 秒触发一次，无论我使用什么延迟

> ID：13973712
> 
> 赞同：0
> 
> 时间：2012-12-20T13:54:28.363
> 
> 标签：objective-c, ios, cocoa-touch, ios5

我想在用户使用该应用一个小时时显示警报

在应用委托中：

首先我尝试了这个：[一段时间后显示 UIAlertView](https://stackoverflow.com/questions/4597628/displaying-uialertview-after-some-time)

然后我尝试了

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
[self performSelector:@selector(showAlert) withObject:nil afterDelay:3600];

return YES;
}

-(void)showAlert{
  UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"title!"
                                                 message:@"message!"
                                                delegate:self
                                       cancelButtonTitle:@"Cancel"
                                       otherButtonTitles:nil];
  [alert show];
} 
```

在这两个示例中，我都尝试在`after delay`. 无论我为延迟做什么，计时器每次都会在一分钟后触发？

更新：这是正确的代码，除了委托之外，我还将它留在了视图控制器的 viewDidLoad 中，因此它也在触发该方法。谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:10:46.390

如果这是你所做的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    [self performSelector:@selector(showAlert) withObject:nil afterDelay:3600];

    return YES;
}

-(void)showAlert{
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"title!"
                                                     message:@"message!"
                                                    delegate:self
                                           cancelButtonTitle:@"Cancel"
                                           otherButtonTitles:nil];
    [alert show];
} 
```

您应该对此进行编辑，并添加其他信息，因为问题必须在其他地方。

否则，这就是你的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:47:27.753

你的代码应该可以工作你确定你没有`showAlert`在其他地方打电话吗？你也可以试试这个，只是为了确保：

```
 long long int anHourInNanoSec = 60*60*NSEC_PER_SEC;
  long long int anHourFromNow = dispatch_time(DISPATCH_TIME_NOW, anHourInNanoSec);

  dispatch_after(anHourFromNow, dispatch_get_current_queue(), ^{
            [self showAlert];
        }); 
```

顺便说一句，如果应用程序使用一个小时，我不确定您的方法是否会启动。如果应用程序设置为后台，您应该停止计时器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T16:02:06.583

抱歉新答案，但评论字段太短，您可以尝试类似：

... 。H

> @property (nonatomic, assign) long long int remainingTime; @property (nonatomic, assign) BOOL deamonPaused;

... .m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {

   long long int anHourInNanoSec = 60*60*NSEC_PER_SEC;
   _remainingTime = dispatch_time(DISPATCH_TIME_NOW, anHourInNanoSec);
   _deamonPaused = NO;

   dispatch_queue_t deamonThread = dispatch_queue_create(@"deamonThread", NULL);
   dispatch_async(deamonThread, ^{
            [self launchDeamon];
        });
    dispatch_release(deamonThread);

    return YES; 
}

- (void) launchDeamon{
   while (_remainingTime > 0){
      if (!_deamonPaused)
         _remainingTime -= 5*NSEC_PER_SEC; 
      sleep(5);
   }
   [self showAlert];
}

- (void) applicationDidEnterBackground:(UIApplication *)application{
    _deamonPaused = YES; 
}

- (void) applicationWillEnterForeground:(UIApplication *)application{
   _deamonPaused = NO;
} 
```

# iphone - Too much time to get and merge video frames and write movies

> ID：13973727
> 
> 赞同：0
> 
> 时间：2012-12-20T13:55:27.797
> 
> 标签：iphone, objective-c, video, ios6

I am building an app in which I have to get a thumbnail from a recorded video. I have an array of alpha video frames. I have to merge each set of frames and then make a movie with these final frames. Here is the piece of code I am dealing with:

-(void)createFrameForVideo {

```
NSString *filePath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"/Documents/movie.mp4"]];
NSURL *outputURL = [NSURL fileURLWithPath:filePath];
player = [[MPMoviePlayerController alloc]initWithContentURL:outputURL];
float frame = 0.00;
int count = 14;

NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
docPath = [docPath stringByAppendingPathComponent:@"OutPut"];
BOOL success = [fileManager fileExistsAtPath:docPath];

if (success) {
    [fileManager removeItemAtPath:docPath error:nil];
}
[fileManager createDirectoryAtPath:docPath withIntermediateDirectories:YES attributes:nil error:nil];

for (frame = (frameStartTime); frame < (frameStartTime+7); frame+=0.033)
{
    @autoreleasepool
    {
UIImage * singleFrameImage = [player thumbnailImageAtTime:frame timeOption:MPMovieTimeOptionExact];
[player pause];
NSString *imageName = [NSString stringWithFormat:@"export2%d.png",count];
    NSString * file = [[NSBundle mainBundle]pathForResource:imageName ofType:nil];
UIImage *overlayImage = [UIImage imageWithData:[NSData dataWithContentsOfFile:file]];

count = count + 1;
NSString *imagePath = [NSString stringWithFormat:@"%@/%@", docPath, imageName];
if (overlayImage)
    {
        UIImage *  outImage = [self mergeImage:singleFrameImage withImage:overlayImage];
        NSData *imgData = [[NSData alloc] initWithData:UIImagePNGRepresentation(outImage)];
        [fileManager createFileAtPath:imagePath contents:imgData attributes:nil];
        [imgData release];
    }
    else
    {
    NSData *imgData = UIImagePNGRepresentation(singleFrameImage);
         [fileManager createFileAtPath:imagePath contents:imgData attributes:nil];

    }
    [outputFramesArray addObject:imagePath];

    }
}

[player release];

if([fileManager fileExistsAtPath:filePath])
{
[fileManager removeItemAtPath:filePath error:nil];

}

NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"/Documents/movie1.mp4"]];
NSLog(@"filePath %@", path);

if ([[NSFileManager defaultManager] fileExistsAtPath:path]) {
    [[NSFileManager defaultManager] removeItemAtPath:path error:nil];
} 
```

[self writeImageAsMovie:outputFramesArray toPath:path size:CGSizeMake(480, 320) duration:10]; NSLog(@"hello Your layering is completed"); [outputFramesArray removeAllObjects]; [outputFramesArray release];

```
success = [fileManager fileExistsAtPath:docPath];
if (success) {
    [fileManager removeItemAtPath:docPath error:nil];
}

//[self performSelectorOnMainThread:@selector(CompileFilesToMakeMovieWithAudio) withObject:Nil waitUntilDone:YES];

[self CompileFilesToMakeMovieWithAudio];
//  [self compileFinalOutputMovie]; 
```

}

The problem is its taking much time to deal with frames in the whole loop. Could anyone please help speed up the process. I already have tried ffmpeg, but I think the problem is in merging. If anyone has suggestions, please share them.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T22:17:41.943

您的问题是基本方法之一。如果您想获得更好的执行时间，那么您需要更改应用程序的基本工作方式。没有特定的“更改此代码”步骤可以使您现有的代码执行得更快。

您应该尝试对视频帧进行编码，然后直接写入编译后的 h.264，而不是您现在所做的，即创建每个帧，然后在最后将它们全部组合到另一个循环中。像这样：

1：读取输入PNG 2：读取视频帧 3：组合视频帧并输入PNG 4：通过AVAsset api将组合帧写入电影。

这避免了必须读取每帧 2 次，并且避免了将所有 PNG 图像再次写入磁盘。IO 需要很多时间，将图像压缩为 PNG 需要很多时间。建议的方法会快得多，因为它可以避免这些不必要的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:34:33.083

尝试使用仪器来查看您的内存被占用的位置以及是否有任何泄漏。

我最近遇到了类似的问题，即在这样的循环中不断运行的一段代码中的泄漏。将局部变量更改为实例变量，然后仅重用该变量可以防止它为应用程序分配过多的内存。

# regex - 仅接受视频文件或 Office doc 文件或 PDF 文件或 .zip 文件的正则表达式

> ID：13973728
> 
> 赞同：0
> 
> 时间：2012-12-20T13:55:28.280
> 
> 标签：regex

我需要只接受以下文件的正则表达式 视频文件 Office doc 文件 PDF 文件 .zip 文件。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:03:03.017

egrep 的小演示：

```
C:\tmp
>cat filelist.txt
file1.txt
file2.doc
file3.DOC
file4.jpg
file5.JPG
file6.pdf
file7.jsf
file8.php
file9.java

C:\tmp
>cat filelist.txt | egrep -i "(^.*\.doc|^.*\.pdf)"
file2.doc
file3.DOC
file6.pdf 
```

如果您正在谈论查看文件以检查它们，那就有点复杂了。

因为正则表达式的实现存在一些变化，所以您使用的语言会有所不同。

# jquery - Twitter Bootstrap dropdown misbehavior

> ID：13973730
> 
> 赞同：0
> 
> 时间：2012-12-20T13:55:31.570
> 
> 标签：jquery, jquery-selectors, twitter-bootstrap, twitter-bootstrap-rails

I have two dropdown one have an id and the other have not, and I want to trigger an ajax request and the action to show the dropdown list. And this is how Im trying to do it, but has some misbehavior, in this case the ajax request it's triggered but when shows the dropdown list it shows both dropdown list.

```
 <li class="dropdown top-dropdown">
            <a href="#" class="dropdown-toggle" style="padding-right:0;" data-toggle="dropdown">hola</a>
            <ul class="dropdown-menu">
              <li>
                <a href="/hola"><i class="icon-user"></i>
                  Profile
                </a>
              </li>
              <li>
                <a href="/hola"><i class="icon-wrench"></i>
                  Settings
                </a>
              </li>              
            </ul>
          </li>

          <li id="hola" class="dropdown">
            <a id="go_do_something" href="<%= url %>" class="dropdown-toggle disabled" style="padding-right:0;" data-toggle="dropdown">           
              <b id="noti_container">
                <i class="icon-bullhorn"></i>
              </b>
            </a>
            <ul class="dropdown-menu">              
                <li>
                  <a href="/hola">
                    <i>added on yesterday</i>
                  </a>
                </li>              
              <li class="divider"></li>
              <li>
                <a href="#">
                  See All
                </a>
              </li>
            </ul>  
          </li>

$("#go_do_something").live("click", function(){      
    var update_user_last_n = $(this).attr('href');

    $.ajax({
      type: 'GET',
      url: update_user_last_n
    }).done(function(xhr, status) {            
      $("#hola").dropdown('toggle');
    }).fail(function(xhr, status) {

    });  

  }); 
```

In other case I try to use the data-target attribute instead href like describe in [Bootstrap Docs](http://twitter.github.com/bootstrap/javascript.html#dropdowns) but I get an error on the browser:

```
Uncaught Error: Syntax error, unrecognized expression: {url_on_data-target} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:00:45.667

最有一种优雅的方法可以做到这一点，但这里有一个解决问题的解决方法：

```
 $("#go_do_something").live("click", function(event){
    event.preventDefault();  
    var this_a = this;  
    var url = $(this_a).attr('href');

    $.ajax({
      type: 'GET',
      url: url
    }).done(function(xhr, status) {                  
      $(this_a).removeClass("disabled");
      $(this_a).click();
    }).fail(function(xhr, status) {

    });  

  }); 
```

# model - Relational database model customer, orders and orderpositions

> ID：13973732
> 
> 赞同：0
> 
> 时间：2012-12-20T13:55:44.910
> 
> 标签：model, h2, relational

I am stuck in creating the correct relational model for my h2 database.

The structure is like following:

*   One customer owns many orders

*   One order owns many order positions

*   One order positions owns many under order positions

Do I create for each customer one order table and for each position one table with under order positions?

Or what would be the correct model?

After google 2 hours I didn't find what I am looking for.

Do you have maybe a link to such a tutorial?

EDIT: Thank you for your fast answer! I have one order where the customer ordered 4 products. Each product consists out of manufactures. For example: Productname: MixSalad This product consists out of manufacture 1, 2 and 3. manufacture 1 consists out of the components 1 and 2.

MixSalad

-Manufacture 1
|-Component 1
|-Component 2 -Manufacture 2
|-Component 3
|-Component 4
-Manufacture 3
|-Component 1
|-Component 3

# ios - $(window).height() false value on iOS 5.1 PhoneGap 1.7 jquery mobile when launching the app in landscape mode

> ID：13973733
> 
> 赞同：-1
> 
> 时间：2012-12-20T13:55:52.570
> 
> 标签：ios, cordova, jquery-mobile

If if launch the application holding the iPhone in portrait mode, everything works fine even when i rotate the iPhone everything still working good. But when i launch my app holding the iPhone in landscape mode this does not work good on my first rotation after landscape launch, it ruins my design completely. This is the sequence of var viewport = $(window).height values:

Launching **Portrait**:

*   Launch: $(window).height() = 460px / $(window).width() = 320px;

*   Rotate Landscape left: $(window).height() = 300px / $(window).width() = 480px;

*   Rotate to portrait: $(window).height() = 460px / $(window).width() = 320px;

..... So this is working fine

Launching **Landscape**:

*   Launch landscape left: $(window).height() = 300px / $(window).width() = 480px;

*   Rotate **portrait**: $(window).height() = 300px / $(window).width() = 480px; **This should be: $(window).height() = 460px / $(window).width() = 320px;**

*   Rotate landscape left: $(window).height() = 460px / $(window).width() = 320px; **This should be: $(window).height() = 300px / $(window).width() = 480px;**

*   Rotate **portrait**: $(window).height() = 300px / $(window).width() = 480px; **This should be: $(window).height() = 460px / $(window).width() = 320px;**

*   Rotate landscape left: $(window).height() = 460px / $(window).width() = 320px; **This should be: $(window).height() = 300px / $(window).width() = 480px;**

..... So this is ruined completely because of the first rotate action that didn't changed its values and now portrait design is on landscape and vice-versa.

```
function onBodyLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);

        $(window).bind('orientationchange', function () {
            if ($.mobile.activePage.attr("id") == "FirstPage") {       
                window.setTimeout(function () {

                    alert($(window).height() + " " + $(window).width());

                }, 250);
            }
        });
} 
```

Thank you for helping but please note that the same code is working very good on android devices.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:21:01.830

Phonegap 现在是 2.2 版。升级到最新版本，其中包括许多针对旋转和方向的修复。有关详细信息，请参阅[phonegap 网站](http://phonegap.com/download)。

# javascript - 从 Facebook 加载跨域图像

> ID：13973734
> 
> 赞同：1
> 
> 时间：2012-12-20T13:55:56.477
> 
> 标签：javascript, facebook, facebook-graph-api, cors

我正在建立一个经常从 facebook 加载图片的网站。我一直在尝试使用来自[Mozilla](https://developer.mozilla.org/en-US/docs/HTML/CORS_Enabled_Image#Example.3A_Storing_an_image_from_a_foreign_origin)的本教程，该教程在本地运行良好，但是当我上线时，facebook 不允许我访问这样的图像并返回：

“跨域资源共享策略拒绝了跨域图像加载。”

有没有办法解决这个问题（不涉及缓冲我自己的服务器的图像）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:21:09.950

> 有没有办法解决这个问题（不涉及缓冲我自己的服务器的图像）？

不可以。图像需要在您控制的服务器上（或者您对授予权限的任何人有足够的影响力）。您不能在 Facebook 的服务器上设置 CORS 标头，因此当它们托管在那里时，图像将无法跨域访问。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T14:05:50.507

您可能必须拥有他们的 API 密钥才能做到这一点。查阅[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

如果您想访问可以从浏览器访问的跨域内容，请使用 PHP 中的 CURL 并使用它调用站点。我将使用简单的 php curl 脚本更新答案。您可以使用它来下载图像，它就像一个代理 :)

```
<?php

$url = $_GET['url'];

function request($url) {  
    $c = curl_init();
    curl_setopt($c, CURLOPT_URL, $url);
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_CONNECTTIMEOUT, 3);
    curl_setopt($c, CURLOPT_TIMEOUT, 5);
    $response = curl_exec($c);
    $responseInfo = curl_getinfo($c);
    curl_close($c);
    if (intval($responseInfo['http_code']) == 200) {
        return $response;
    } else {
        return false;
    }
}

echo request($url);

?> 
```

# c# - 对象引用未设置为使用 linq 的对象列表的实例

> ID：13973740
> 
> 赞同：1
> 
> 时间：2012-12-20T13:56:20.810
> 
> 标签：c#, linq, list, webforms, label

使用文件上传 c# webform 将一些记录插入数据库。我得到的任何错误都会添加到列表中。插入所有记录后，我使用 linq 查看错误列表中是否有任何内容。我将它写入另一个列表，然后在这个列表中的 foreach 记录中，我在屏幕上的标签中写出错误。获取 linq 中的错误以列出未设置为对象实例的对象。

```
List<Cups> errors = FDloads.Where(c => c.DataErrors.Count > 0).ToList();

        if (errors.Count > 0)
        {
            Label1.Text = "Errors:";
            foreach (Cups err in errors)
            {
                Label1.Text += "<br/>" +  err.Lion + "," + err.Value;
            }
        }
        else
        {
            Label1.Text = "Success.";
        } 
```

当我将列表 FDloads 中的错误计数写入新列表时，错误发生在 linq 行，如果它包含任何内容，请执行此操作，如果不执行此操作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:58:27.583

它可能是那个`c`或`c.DataErrors`为空。在取消引用之前尝试测试 null ：

```
List<Cups> errors = FDloads
    .Where(c => c != null && c.DataErrors != null && c.DataErrors.Count > 0)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:58:31.957

请试试：

```
List<Cups> errors = FDloads.Where(c => c.DataErrors != null && c.DataErrors.Count > 0).ToList(); 
```

# jquery - 使用 jQuery 制作选项卡功能，无需 jQuery 本身以外的任何其他库

> ID：13973746
> 
> 赞同：1
> 
> 时间：2012-12-20T13:56:30.607
> 
> 标签：jquery

HTML 代码：

```
 <ul class="toggler">
    <li><h2 class="heading-title"><a id="blog-toggler" class="inactive" href="#">Блог</a></h2></li>
    <li><h2 class="heading-title"><a id="wall-toggler" href="#">Стена</a></h2></li>
  </ul> 
```

jQuery代码：

```
if ($('#wall-toggler').hasClass('inactive')) {
    $('#wall-toggler').click(function() {
        $(this).removeClass('inactive');
        $('.group-wall').show();
        $('.group-blogs').hide();
        $('#blog-toggler').addClass('inactive');
        return false;
    });
} else {
    $('#wall-toggler').click(function(){
        return false;
    });
}

if ($('#blog-toggler').hasClass('inactive')) {
    $('#blog-toggler').click(function() {
        $(this).removeClass('inactive');
        $('.group-blogs').show(); // show the blog div
        $('.group-wall').hide(); // hide the wall div
        $('#wall-toggler').addClass('inactive');
        return false;
    });
} else {
    $('#blog-toggler').click(function(){
        return false;
    });
} 
```

当我单击#blog-toggler 时，所有工作都按预期工作，但是在单击#blog-toggler 后我试图单击#wall-toggler -> 没有任何反应。我做错了什么？提前致谢。

现场演示：http: [//test.terra9.kz/group/brrrrrrrr-dva-tri-chetyre#](http://test.terra9.kz/group/brrrrrrrr-dva-tri-chetyre#)

看看按钮：“Блог”、“Стена”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:05:07.963

试试这个：

**HTML**

对于实际的选项卡，我们将使用无序列表。HTML 代码非常简单。

```
<div id="tabs_container">
    <ul id="tabs">
        <li class="active"><a href="#tab1">Tab 1</a></li>
        <li><a class="icon_accept" href="#tab2">Tab with icon</a></li>
        <li><a href="#tab3">Long name for the last tab</a></li>
    </ul>
</div> 
```

“icon_accept”类是包含图标的类。现在，如果您希望为每个选项卡添加不同的图标，您需要为每个图标创建新类并将其添加到选项卡。

以及内容 DIV 的 HTML。

```
<div id="tabs_content_container">
    <div id="tab1" class="tab_content" style="display: block;">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum nibh urna, euismod ut ornare non, volutpat vel tortor. Integer laoreet placerat suscipit. Sed sodales scelerisque commodo. Nam porta cursus lectus. Proin nunc erat, gravida a facilisis quis, ornare id lectus. Proin consectetur nibh quis urna gravida mollis.</p>
    </div>
    <div id="tab2" class="tab_content">
        <p>This tab has icon in it.</p>
    </div>
    <div id="tab3" class="tab_content">
        <p>Suspendisse blandit velit eget erat suscipit in malesuada odio venenatis.</p>
    </div>
</div> 
```

**jQuery**

jQuery 代码非常简单。

```
$(document).ready(function(){
    //  When user clicks on tab, this code will be executed
    $("#tabs li").click(function() {
        //  First remove class "active" from currently active tab
        $("#tabs li").removeClass('active');

        //  Now add class "active" to the selected/clicked tab
        $(this).addClass("active");

        //  Hide all tab content
        $(".tab_content").hide();

        //  Here we get the href value of the selected tab
        var selected_tab = $(this).find("a").attr("href");

        //  Show the selected tab content
        $(selected_tab).fadeIn();

        //  At the end, we add return false so that the click on the link is not executed
        return false;
    });
}); 
```

**[在这里提琴](http://jsfiddle.net/YNzGw/)**就是这样:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:59:22.903

尝试类似的东西

```
<ul class='tabs'>
    <li><a href='#tab1'>Tab 1</a></li>
    <li><a href='#tab2'>Tab 2</a></li>
    <li><a href='#tab3'>Tab 3</a></li>
</ul>
<div id='tab1'>
    <p>Hi, this is the first tab.</p>
</div>
<div id='tab2'>
    <p>This is the 2nd tab.</p>
</div>
<div id='tab3'>
    <p>And this is the 3rd tab.</p>
</div> 
```

jQuery

```
$('ul.tabs').each(function(){

    var $active, $content, $links = $(this).find('a');
    $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
    $active.addClass('active');
    $content = $($active.attr('href'));

    // Hide the remaining content
    $links.not($active).each(function () {
        $($(this).attr('href')).hide();
    });

    $(this).on('click', 'a', function(e){
        // Make the old tab inactive.
        $active.removeClass('active');
        $content.hide();

        $active = $(this);
        $content = $($(this).attr('href'));

        // Make the tab active.
        $active.addClass('active');
        $content.show();

        // Prevent the anchor's default click action
        e.preventDefault();
    });
}); 
```

# javascript - 如何在 HTML Canvas 中获取旧生成元素的引用？

> ID：13973747
> 
> 赞同：1
> 
> 时间：2012-12-20T13:56:32.880
> 
> 标签：javascript, html, html5-canvas

看看这个例子：

```
 var c=document.getElementById("myCanvas");
   var ctx=c.getContext("2d");

    // First rectangle created    
    ctx.fillRect(20,20,150,100);

    // Second rectangle created    
    ctx.fillRect(20,150,150,100);

    // Third rectangle created    
    ctx.fillRect(20,300,150,100); 
```

我在这里创建了三个矩形。创建第三个矩形后，我想旋转第一个矩形。我现在如何获得第一个矩形的参考？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:59:56.633

您不会“获得参考”矩形或带有画布的东西。你所拥有的只是一个带有上下文的画布。你可以在上面画画。时期。

如果要移动第一个矩形，则清除它（使用`clearRect`）并重新绘制新矩形。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T14:02:51.800

画布只是一个愚蠢的像素网格。它不明白上面画了什么形状。您的代码（或您的代码使用的库）必须跟踪您绘制的形状。

相反，听起来您想要一个库来创建[场景图](https://en.wikipedia.org/wiki/Scene_graph)，例如[EaselJS](http://www.createjs.com/#!/EaselJS)、[Paper.js](http://paperjs.org/)或[KineticJS](http://kineticjs.com/)。这些库将维护一个数据结构，用于跟踪画布上绘制了哪些形状，然后在您想要操作这些形状时重新绘制它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T14:01:24.093

画布本身只是像素。它知道如何绘制矩形，但不让它们分层。

引用[西蒙·萨里斯的](https://stackoverflow.com/a/5883032/352796)话：

> HTML5 Canvas 只是位图的绘图表面。你设置了一个绘图（比如用颜色和线条粗细），绘制那个东西，然后 Canvas 不知道那个东西：它不知道它在哪里或它是什么，它只是像素。如果您想绘制矩形并让它们四处移动或可选择，那么您必须从头开始编写所有这些代码，包括记住您绘制它们的代码。

唯一的例外是[`isPointInPath`](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-ispointinpath)方法，但它有局限性。

**但是**，有一些库为 Canvas 提供了面向对象的接口。像[Fabric.js](http://fabricjs.com)或[KineticJS](http://kineticjs.com)。他们会记住您绘制的对象（矩形、圆形等），并且可以将它们一层层叠加，四处移动并添加鼠标/触摸事件。很像 DOM。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T13:59:25.680

像这样的绘图函数`fillRect()`不返回任何内容（返回 void）。

这意味着它只是渲染像素，它不会创建一个矩形对象并返回它。您需要自己存储矩形坐标。

# android - Thumbnail Image is posted in facebook using (/me/feed) facebook graph api

> ID：13973748
> 
> 赞同：2
> 
> 时间：2012-12-20T13:56:43.160
> 
> 标签：android, facebook-graph-api

This is the code I am using for posting Image on Wall.

```
"https://graph.facebook.com/" 
  + Login.facebookid 
  + "/feed?access_token=" + accesstoken 
  + "&method=post" 
  + "&message=" + strFullMessage.replaceAll(" ", "%20") 
  + "&picture=" + imageUrl 
  + "&privacy=" + resp 
```

I am using facebook Graph API to post image on wall.

What I expected is Image will post in exact size as the Image has?

But the image is posted in Thumbnail size.

Why the graph api is taking thumbnail image?

But when I use (`/me/photos`),it is taking full image.Why this change in API.

How to post full image using (`/me/feed`)? Is this a bug in facebook Graph API?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:47:00.950

如果您发布到 me/feed 端点，您将获得缩略图，请参阅[https://developers.facebook.com/docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts)

如果您想发布完整的图像，请使用我/照片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:36:52.850

此方法用于在 facebook 用户的提要（墙）上共享链接。

您不能使用我/提要发布完整图像，它总是将其作为链接发布。你可以用我/照片来放大照片。

```
FB.api('me/photos', 'post',
    { 
    url:'MY_URL',
    href:'MY_LINK,
    message: 'photo description',                
    access_token:accessToken
    },
    function(response) {
        console.log(response);
        if (!response || response.error) {
            alert('Error occurred');
        } else {
            alert('Post ID: ' + response.id);
        }
}); 
```

以上是使用我/照片的方法。

如果这对您有所帮助，请考虑接受我的回答。

# c# - HttpContext.Current.User.Identity.IsAuthenticated returns false

> ID：13973756
> 
> 赞同：4
> 
> 时间：2012-12-20T13:57:00.950
> 
> 标签：c#, asp.net, authentication

I have a strange issue.

I have a page with the following code.

```
if (!HttpContext.Current.User.Identity.IsAuthenticated)
    {
        Server.Transfer(@"~/Views/Public/Unauthorised.aspx");
        return;
    } 
```

For some reason, with one user (and we've narrowed it down to his single machine and windows logon profile), `IsAuthenticated` always returns false. Even though he is logged into the website, and can navigate to other pages that require authenticated user. Except this one page.

We checked that the machine accepts all cookies and we still get the same issue. I'm not sure where to go from here... any suggestions?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T14:24:04.803

至少有两种已知的情况会导致这种行为。

**第一种情况**是您设置`requireSSL="true"`了身份验证会话`web.config`并从非安全页面调用该函数。因此，请仔细检查页面是否安全，如果您使用`requireSSL="true"`

```
Debug.Assert(Request.IsSecureConnection, "The IsAuthenticated will fail.");
if (!HttpContext.Current.User.Identity.IsAuthenticated)
{
    Server.Transfer(@"~/Views/Public/Unauthorised.aspx");
    return;
} 
```

**第二种情况**，您没有`domain="site.com"`在 web.config 中再次设置身份验证会话，并且您尝试一次`www.yoursitename.com`从`yoursitename.com`. 在这种情况下，身份验证 cookie 是不同的，它将失败。因此，请在 web.config 中设置该参数。

```
<authentication mode="Forms">
  <forms domain="yoursitename.com"  />
</authentication> 
```

# php - 保留前两个文本行，删除其他所有内容

> ID：13973759
> 
> 赞同：6
> 
> 时间：2012-12-20T13:57:03.960
> 
> 标签：php, jquery, html, line-breaks

在`<div>`我有一些文字。由于`div`-width 文本以多行显示。例如以下代码：

```
<div>text01 text02 text03 text04 text05 text06 text07 text08 text09 text10 text11 text12</div> 
```

可能显示为例如四行：

```
text01 text02 text03
text04 text05 text06
text07 text08 text09
text10 text11 text12 
```

我希望只保留前两行，如果存在更多行，则必须将它们删除并替换为文本行`...`作为新的（因此是第三个）文本行。
换句话说：我希望找到第二个换行符（如果存在）并用文本行替换此点之后的所有文本`...`。

因此，如果我有两行文本，则没有任何改变：

```
text text text
text text text 
```

但是，如果我有两个以上的行，我会得到这个：

```
text01 text02 text03
text04 text05 text06
... 
```

有什么好的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:03:22.633

您应该在**css**中执行此操作，并在必要时添加 javascript。

在 css 中，您可以设置：

```
.two-line-div {
  max-height: 3em;    /* or whatever adds up to 2 times your line-height */
  overflow: hidden;
} 
```

这会将盒子减小到所需的高度。

如果你总是想显示`...`（如果内容总是超过 2 行），只需在你的`div`.

如果要添加另一行，`...`如果内容大于您显示的内容，则需要 javascript 来计算原始高度，查看它是否超过 2 行，如果是，则动态添加/显示元素。

Note that a css solution does not remove anything, all lines are there, they are just not visible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:22:02.530

There is a pure CSS Solution working in most of the modern browsers (some older firefox versions didn't support it):

```
div {
    overflow: hidden; /* "overflow" value must be different from "visible" */
    text-overflow: ellipsis; /* the magic dots...*/
    height: <yourHeightValue>
    width: <yourWidthValue>
} 
```

Doing something like this in PHP could be a bit more complex, depending on what the DIV contains (nested HTML?, what exactly is a "line" for you -> a HTML break <br>, a line-break \n)? In most of the cases the PHP solutions split after a defined String or Word length. You can find quite a few examples for this kind of text limitations, [this one](http://www.gsdesign.ro/blog/cut-html-string-without-breaking-the-tags/) is a complex solution which can handle html tags too.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T14:03:03.343

您可以使用`explode()`将字符串（的内容`div`）拆分为数组。使用`<br>`or`/n`作为拆分标记。然后你可以用`div`数组的前两个元素替换 的内容。

```
$content = 'Hello<br>World<br>Other<br>Stuff';
$lines = explode('<br>',$content,2);

echo '<div>'$lines[0].'<br>'.$lines[1].'<br>...</div>' 
```

# git-svn - 将 svn 移动到 GIT 时不保留历史记录（用于 svn 移动文件夹）

> ID：13973762
> 
> 赞同：1
> 
> 时间：2012-12-20T13:57:17.200
> 
> 标签：git-svn

我有一个 SVN 项目，其结构如下所示：
PROJECT > trunk, branches, tags, subproject1, subproject2, release notes

我已经通过 SVN MOVE 命令重组了项目，所以它看起来像：
主干、分支、标签。（将文件夹移动到主干）。

当我通过 SVN MOVE 命令移动时，我能够看到保留的历史记录。

现在，我已通过以下命令将 SVN 存储库迁移到 GIT，

$ git svn clone --stdlayout --authors-file=authors.txt file:///svnrepos/local-svn/PROJECT project.git

现在，在 GIT 存储库中，我看不到移动文件夹的历史记录，它只显示了我最后的“svn move”命令历史记录。我可以查看所有其他未移动文件的历史记录。

请让我知道您的意见。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:29:41.137

SVN Move 将无法在迁移到 GIT 时保留历史记录，因为它会将 GIT 中的新目录条目视为提交。

需要使用 SVN-DUMP-RELOC 它将重新构建 SVN DUMP 文件中的目录而不是存储库。

请按照以下链接中提到的步骤操作 windows 机器： [svn-dump-reloc 在 windows 命令提示符下使用](https://stackoverflow.com/questions/13972693/svn-dump-reloc-use-in-windows-command-prompt)

谢谢

# jackson - Adding quotes(single or double) to the json string

> ID：13973773
> 
> 赞同：1
> 
> 时间：2012-12-20T13:57:54.993
> 
> 标签：jackson

I have a string in json format but the string does not have quotes.

[{field1:value1,field2:value2}].

Now I have to convert this string into a ArrayNode using Jackson API. Because the string does not contain any quotes, it is throwing error that it is expecting double quotes. Also, I have already tried

```
 mapper.configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true); 
```

but it is throwing error for values are not inside quotes.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-08T05:40:59.100

您应该将 @JsonRawValue 注释添加到要考虑解析的字段，因此它将相应地引用该字段。

# c# - 引用相同实例化类的 WCF 服务的实例化代理

> ID：13973779
> 
> 赞同：0
> 
> 时间：2012-12-20T13:58:16.747
> 
> 标签：c#, visual-studio-2010, wcf-data-services, wcf-client

我有一个实现一些审计方法的类（AuditcClass.cs）。我还实现了一个使用 AuditcClass.dll 方法的 WCF 服务。

现在我还需要能够从 AuditcClass 中引用 WCF 服务。但是我不能简单地使用生成的代理来引用它，因为命名空间有几个冲突。

作为第一种方法，我将代理封装在另一个命名空间中，解决了许多冲突，但仍然引入了新的与其他通用类（例如，Exceptions 命名空间）的冲突。

是否有一种方法可以在类中引用 Web 服务，即使该服务使用相同的类的方法和枚举？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:29:14.640

我能够通过使用[svcutil](http://msdn.microsoft.com/en-us/library/aa347733.aspx)工具的参数`/reference:<file path>`来解决我的问题：

`References types in the specified assembly. When generating clients, use this option to specify assemblies that might contain types that represent the metadata being imported.`

这使我可以从生成的代理中排除共享 dll，从而避免引用冲突。

# javascript - 使用 jQuery 的 $.ajax 异步更新 Bootstrap 进度条

> ID：13973781
> 
> 赞同：8
> 
> 时间：2012-12-20T13:58:26.050
> 
> 标签：javascript, jquery, user-interface, twitter-bootstrap, progress-bar

我有一个脚本可以遍历本地网络上的 IP，检查是否有任何内容。每次迭代，我都会提交一个 AJAX 请求以使用 cURL 获取 HTTP 状态代码，该代码会返回到我的 Javascript。我已经建立了计算进度条应该在哪里的函数，但是它只在整个脚本执行完成时更新进度条。

这是我到目前为止所拥有的（在这个例子中我只使用 0-23，因为我在 199.235.130.22 并且我返回 '200'）

```
function updateProgress(percentage){
    document.getElementById('progressBar').style.width = percentage+'%';
    $('#progressText').html(percentage+'%');
}
for(host = 0; host <= 23; host++){
    ipToCheck = network_addr+'130.'+host;
    updateProgress(100/host);
    $.ajax({
        type: 'GET',
        url: 'js/scanhelper.php',
        data: {
            ip: ipToCheck
    }
    }).done(function(msg) {
        updateProgress(100/host);
        if(msg!=0){
            logSuccess(ipToCheck);
        }
    });
    pausecomp(200);  //Just a sleep function to simulate actual processing
} 
```

我的 Bootstrap HTML 很简单

```
<div class="progress progress-striped active" style="height:44px;">
    <div id="progressBar" class="bar" style="width:1%;"></div>
</div> 
```

而且，如果重要的话，我的 cURL PHP 脚本在这里： http: [//pastebin.com/JRZckdVb](http://pastebin.com/JRZckdVb)

这应该做的是，在每次迭代中，将进度条的宽度更新为 100（如 100%）除以当前迭代。这可能不是正确的数学，但关键是它只是在所有迭代完成后才更新，在页面运行时冻结页面。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T14:09:27.597

当for循环中的host = 0时，您不是在这里除以零吗？

```
updateProgress(100/host); 
```

您可以使用变量 hosts 来跟踪您拥有的主机数量。然后进度将如下所示。

```
var hosts = 23;// total number of hosts
updateProgress((host/hosts)*100); 
```

另一件事是你触发的 ajax 是异步的，所以发生的事情是它触发并且不等待结果。您可以一次“扫描”每个主机，更新进度条，也可以同时扫描所有主机，并在异步结果返回时更新进度条。你能指定你想要实现的行为吗？

[更新] 在下面的 ajax 调用中切换异步标志以获得您想要的。

```
function updateProgress(percentage){
    if(percentage > 100) percentage = 100;
    $('#progressBar').css('width', percentage+'%');
    $('#progressBar').html(percentage+'%');
}

var hosts = 23;
var hostsDone = 0;
for(host = 0; host <= hosts; host++){
    ipToCheck = network_addr+'130.'+host;
    $.ajax({
        type: 'GET',
        url: 'js/scanhelper.php',
        async:true,
        data: {
            ip: ipToCheck
    }
    }).done(function(msg) {
        hostsDone++;
        updateProgress((hostsDone/hosts)*100);
        if(msg!=0){
            logSuccess(ipToCheck);
        }
    });
} 
```

如果您正在寻找视觉效果，您应该将“#progressBar”的高度设置为非零值，并且可能是背景绿色。

```
<div class="progress progress-striped active" style="height:44px;">
    <div id="progressBar" class="bar" style="height:44px;width:1%;background-color:green"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-20T18:07:50.390

答案`@zerObit`只有整个过程的 2/3！您还必须设置`aria-valuenow`.

在某些情况下，进度条会被隐藏。您可以通过以下方式做到这一点：

```
$('#progressBar').attr('aria-valuenow', percentage); 
```

# java - 检查 MySQL 结果是否返回行

> ID：13973786
> 
> 赞同：1
> 
> 时间：2012-12-20T13:58:39.950
> 
> 标签：java, mysql, jdbc

我有以下Java代码

```
// SELECT
String stringQuery  = "SELECT klucz, itemDATA, itemQTY, itemDUR FROM sellbox WHERE gracz =? "
                    + "ORDER BY czas DESC LIMIT 1";

PreparedStatement statement = this.connection.prepareStatement( stringQuery );
statement.setString( 1, playerName ); 

ResultSet queryResult = statement.executeQuery();
queryResult.first(); 
```

如何确定它是否返回行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:00:19.607

我认为是这样的-

```
ResultSet queryResult = statement.executeQuery();
if(queryResult.next())
  return true;
else
  return false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:00:39.437

你可以这样做：

```
ResultSet queryResult = statement.executeQuery();
if (queryResult.next()) {
   // process the data
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:14:20.143

`ResultSet`提供`next()`检查下一行。`ResultSet.first()`如果无效行，使用它自己会给出错误`ResultSet`

参考：[结果集 API](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#first%28%29)

`ResultSet`因此，使用相同的方法，您可以在不使用的情况下验证行`ResultSet.next()`

# integer - Integer.valueOf(int i) JDK7 中的冗余断言

> ID：13973795
> 
> 赞同：-2
> 
> 时间：2012-12-20T13:59:05.920
> 
> 标签：integer, java, assert

`Integer.valueOf(int i)`方法包含 assesrt 以检查 IntegerCache 是否大于或等于 127。

```
public static Integer valueOf(int i) {
    assert IntegerCache.high >= 127;
    if (i >= IntegerCache.low && i <= IntegerCache.high)
        return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
} 
```

缓存实现看起来像这样

```
static {
        // high value may be configured by property
        int h = 127;
        String integerCacheHighPropValue =
            sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high");
        if (integerCacheHighPropValue != null) {
            int i = parseInt(integerCacheHighPropValue);
            i = Math.max(i, 127);
            // Maximum array size is Integer.MAX_VALUE
            h = Math.min(i, Integer.MAX_VALUE - (-low));
        }
        high = h;

        cache = new Integer[(high - low) + 1];
        int j = low;
        for(int k = 0; k < cache.length; k++)
            cache[k] = new Integer(j++);
    } 
```

因此，您可以通过传递属性值来增加缓存大小。但是实现不允许您将缓存大小设置为低于 127（或者它可以？）。那么为什么他们将断言放在`Integer.valueOf()`. 开发人员不信任自己的实现吗？我知道如果缓存低于 127`Integer.valueOf(int i)`会返回错误的值，但这种情况不可能发生......

有必要在那里断言吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:03:17.383

> 开发人员不信任自己的实现吗？

这正是断言的目的：捕捉编程错误。假设没有错误，就不会发现任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:04:03.827

`-enableassertions`当您使用参数或简单地编译代码时`-ea`。然后断言会踢。默认情况下，提供给您的 JVM 不会使用该参数进行编译。所以这个断言在运行时被忽略。

# c# - 子类中虚方法的序列图

> ID：13973803
> 
> 赞同：3
> 
> 时间：2012-12-20T13:59:36.623
> 
> 标签：c#, types, sequence-diagram

我正在使用一个 C# API，它具有相当复杂的虚拟方法调用顺序，可以在类型层次结构的各个级别中被覆盖。我希望能够记录这些方法的执行顺序，并且我想知道是否有一种方法可以做到这一点，而不必用 Trace 写入类。鉴于这些类中的每一个都有超过 2k 的 LOC，手工完成将是一项非常艰巨的任务！

让我尝试给出一个常见方法流程的快速示例：

```
public class Base
{
    protected void Init()
    {
        this.BeginInitInternal();
        this.OnInit();
        this.AfterInitInternal();
    }

    protected virtual void AfterInitInternal() { }
    protected virtual void OnInit() { }
    protected virtual void BeginInitInternal() { }
}

public class Derived : Base
{
    protected sealed override void BeginInitInternal()
    {
        // Logic here
        this.BeginInit();
    }

    protected sealed override void AfterInitInternal()
    {
        // Logic here
        this.AfterInit();
    }

    protected virtual void BeginInit() { }
    protected virtual void AfterInit() { }
}

public class Concrete : Derived
{
    protected override void BeginInit() { /* Logic here */ }
    protected override void OnInit() { /* Logic here */ }
    protected override void AfterInit() { /* Logic here */ }
} 
```

该`Concrete`实现是由 API 的使用者创建的，我希望能够告知他/她所有这些调用的顺序（理想情况下也是上下文，但这超出了问题的范围。

我不一定需要 UML 序列图，但这是我找到的与我正在寻找的最接近的模拟。

理想情况下，我希望它告诉工具查看`Base.Init()`on的实现`Derived`并发出如下内容：

1.  `Derived.BeginInit()`
2.  `Base.OnInit()`
3.  `Derived.AfterInit()`

我已经尝试过 VS 序列图生成器，但我似乎无法告诉它使用`Concrete`，而是从`Base.Init()`. 我也尝试过使用 VS Code Map，但它阻碍了解决方案的复杂性，并且通常会出错。最后，我尝试使用 NDepend，它很接近 - 它可以告诉我所有的调用，但不能告诉我它们的顺序。

还有什么我可以尝试的，还是我应该开始`Trace.WriteLines`到处粘贴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:56:37.903

哦。这是使用 Roslyn 的好案例。

如果您想从源代码中提取自定义信息，这取决于该源代码，而无需使源代码适应您的读者；我会说这是使用 Roslyn 的有力案例。

[http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:13:57.650

您可以考虑拦截对每个方法的调用，并且可以执行任何开箱即用的操作，例如日志记录、创建文档等。

你可以在这里看到我们如何拦截方法的调用。

[http://dotnetdlr.com/2011/05/06/intercept-calls-to-objects-in-c/](http://dotnetdlr.com/2011/05/06/intercept-calls-to-objects-in-c/)

# xpages - 在复选框/单选按钮组控件的输出中停止生成表和字段集标记

> ID：13973812
> 
> 赞同：1
> 
> 时间：2012-12-20T13:59:57.980
> 
> 标签：xpages

当使用 XPage 生成的复选框组`fieldset`并`table`在其周围添加标签时。有没有办法*不*生成它？例如，如果我的 XPage 源代码如下所示 -

```
<xp:checkBoxGroup id="checkBoxGroup" disableTheme="true" value="#{document1.CheckboxGroup}">
    <xp:selectItems>
        <xp:this.value><![CDATA[#{javascript:new Array("Option 1", "Option 2", "Option 3");}]]></xp:this.value>
    </xp:selectItems>
</xp:checkBoxGroup> 
```

然后我生成的代码是

```
<fieldset id="view:_id1:checkBoxGroup">
    <table>
        <tr>
            <td>
                <label><input name="view:_id1:checkBoxGroup" value="Option 1" type="checkbox"> Option 1</input></label>
            </td>
            <td>
                <label><input name="view:_id1:checkBoxGroup" value="Option 2" type="checkbox"> Option 2</input></label>
            </td>
            <td>
                <label><input name="view:_id1:checkBoxGroup" value="Option 3" type="checkbox"> Option 3</input></label>
            </td>
        </tr>
    </table>
</fieldset> 
```

这是三个复选框的很多代码。它会弄乱我的 CSS，因为将任何 CSS for `table`tag 也放在复选框组中。也适用于单选按钮组。我尝试将`disableTheme`属性设置为，`true`但这也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:52:09.733

如果你想从根本上改变一个组件的 HTML 表示的结构，你可以使用 Extensibility API[创建一个替代的渲染器](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Creating_a_Basic_UI_Control_for_XPages#Creating+the+control+renderer)。这允许您完全控制将哪些标记发送到特定组件实例的浏览器，而无需更改任何其他组件的呈现方式。`component-family`使用与默认渲染器（ ）相同的注册渲染器`javax.faces.SelectMany`，但为其分配自定义`renderer-type`；如果您随后将该自定义值分配给`rendererType`特定复选框组的属性，Domino 将使用您的自定义渲染器类而不是默认渲染器类来发出 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:29:52.620

您还可以使用`xp:radio`控件而不是`xp:radioGroup`控件，然后使用该`groupName`属性对多个单选按钮进行分组。从 xp:radio 渲染的单选按钮没有被字段集和表格包围。

# c++ - 如何打印/访问 const void 指针的内容？

> ID：13973814
> 
> 赞同：1
> 
> 时间：2012-12-20T14:00:05.790
> 
> 标签：c++, boost-asio, void-pointers

我正在尝试使用此示例：

```
std::size_t s2 = boost::asio::buffer_size(buffer);
const void* p2 = boost::asio::buffer_cast<const void*>(buffer); 
```

而且我得到了一个有效的尺寸`s2`和一些看似有效的地址`p2`。

现在，我如何创建一个`cout`或`printf`循环或短语调试语句，以查看的内容`p2`？

我敢打赌这是非常基本的，但目前我看不到我缺少什么。

试过这个：

```
std::cout << "TEST: " << boost::asio::buffer_cast<const void*>(buffer) << std::endl; 
```

但它只打印出地址，而不是内容

还有这个：

```
for(int i =0; i!=s2; i++){
    std::cout << "TEST: " << p2[i];
}
std::cout << std::endl; 
```

但我最终会遇到编译错误，例如 C0253 - 未知大小。

那么，我怎样才能打印出内容`p2`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:03:50.037

您可以将缓冲区指向的字节打印为：

```
std::size_t s2 = boost::asio::buffer_size(buffer);
const void* p2 = boost::asio::buffer_cast<const void*>(buffer);

unsigned char const* bytes = static_cast<unsigned char const*>(p2);
for(std::size_t i = 0 ; i < s2 ; ++i)
     std::cout << static_cast<unsigned int>(bytes[i]); 
```

当然，您必须解释输出。

您可以打印更容易解释的十六进制值：

```
std::cout << std::hex << static_cast<unsigned int>(bytes[i]);
          // ^^^^^^^^ note this 
```

我认为你必须`#include<iomanip>`为此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:05:57.343

p2 的内容是一个内存地址……因为 p2 是一个指针。

void* 表示语言 + 库不知道所引用的数据类型。如果您不知道它是什么类型，则无法打印指向的值。

# android - 如何在 Android 设备上运行 .swf 文件

> ID：13973817
> 
> 赞同：6
> 
> 时间：2012-12-20T14:00:30.423
> 
> 标签：android, flash

我是 android 新手，刚开始研究 flash 对象，我的意思是 .swf 文件。我已经阅读了很多关于使用 web 视图加载存储在 assets/SD 位置的 swf 文件的内容，但无济于事。我从[如何在 webview 中播放本地 swf 文件](https://stackoverflow.com/questions/6106636/how-to-play-local-swf-files-in-a-webview)、flash 播放器、设置 swf 以制作 apk 的 Adob​​e AIR 功能等方面得到了建议。但我仍然无法令人满意地运行 .swf 文件，因为以下原因：

1.  即使我按照上面链接中的设置设置了所有内容，但我得到了一个空白屏幕，这让我对 Flash Player 目前不是默认设置感到沮丧（设置->应用程序->Flash Player->Launch By 中的“默认启动”选项默认），因此我无法运行 Flash 内容。

2.  我已经应用 Adob​​e AIR 通过一个漫长的过程来实际获取 swf 文件的 apk，但是由于两个原因：a）非常费力的过程和 b）Adobe AIR 的每次安装要求使整个目的成为一场失败的战斗。

3.  Flash 中有很多行话/混乱，还有很多关于 flash 没有对其移动领域产品进行更新的新闻，以及 android“已经”/“试图”如何进入 html 5。

我希望你们都解决这个补救办法，让 Flash swf 对象在 Android 上运行，并且浏览器的插件插件最少。我希望拥有尽可能少的支持文件，以使我的工作具有生产力和教育意义。

我特此附上一个代码片段，我正在努力完成工作以使 swf 文件运行：

1.  方法一：

    ```
     import android.annotation.SuppressLint;
        import android.app.Activity;
        import android.os.Bundle;
        import android.webkit.WebSettings;
        import android.webkit.WebView;
        import android.widget.LinearLayout;

        @SuppressLint("SetJavaScriptEnabled")
        public class SWFViewer extends Activity {
        WebView wvswf;
        LinearLayout linearLayout;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_swfviewer);
            linearLayout = (LinearLayout) findViewById(R.id.linearLayout);
            wvswf = new WebView(SWFViewer.this);
            wvswf.getSettings().setJavaScriptEnabled(true);
            wvswf.getSettings().setPluginState(WebSettings.PluginState.ON);
            wvswf.getSettings().setAllowFileAccess(true);
            linearLayout.addView(wvswf, LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);

        String Url = "file:///android_asset/main.swf";
        wvswf.loadUrl(Url);

            }

    } 
    ```

布局为：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.winit.nunna.swfviewer"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8"
        android:maxSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="READ_EXTERNAL_STORAGE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.winit.nunna.swfviewer.SWFViewer"
            android:label="@string/app_name"
            android:screenOrientation="landscape"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

2.  方法二

使用 Adob​​e AIR SDK，我们使用主 swf 文件创建一个 apk，一些用于配置和应用程序签名的 xml 文件，我们可以发布一个 apk。

结论：第一个是最简单但没有o / p

```
12-20 13:56:28.457: INFO/WindowManager(162): MediaPlayer.is not PlayingVideo 
```

后者很麻烦，有很多额外的依赖项。

请给我更好的选择，以获得负担得起的又名高/中等性能的 Flash O/p。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T11:47:49.987

没有使用 WebView 将 swf 文件集成到原生 android (Java) 代码中的简单方法。

如果您声明您的问题是通过使用相同的 swf 与 Adob​​e AIR 构建 APK 来解决的，那么我认为您确实解决了将 swf 获取到 android 的问题，但实际上并没有按照您在上述问题中的要求进行操作。

# rspec - Capybara - 测试不良数据

> ID：13973827
> 
> 赞同：1
> 
> 时间：2012-12-20T14:00:58.687
> 
> 标签：rspec, capybara

假设我有一个单选按钮

```
<input type="radio" name="test" value="1">
<input type="radio" name="test" value="2"> 
```

我想针对“黑客”进行测试，我想提交“3”。Capybara + Rspec有没有办法做到这一点？

# html - 如何为两个标签设置一个 CSS 规则？

> ID：13973833
> 
> 赞同：41
> 
> 时间：2012-12-20T14:01:28.240
> 
> 标签：html, css, tags

我想知道如何为两个不同的课程设置一个设置。

举个例子：

```
.footer #one .flag li .drop_down form div{
    width: 80px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    text-align: left;
    line-height: 1.5;
    color: #ccc;
    font-weight:bolder;
    margin-left: 30px;
}
.footer #two .flag li .drop_down form div{
    width: 80px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    text-align: left;
    line-height: 1.5;
    color: #ccc;
    font-weight:bolder;
    margin-left: 30px;
} 
```

两条规则的内容相同。区别只是第二个标签。有没有办法做这样的事情？

```
.footer >>>#one and #two<<<< .flag li .drop_down form div{
        width: 80px;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 11px;
        text-align: left;
        line-height: 1.5;
        color: #ccc;
        font-weight:bolder;
        margin-left: 30px;
    } 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-20T14:02:56.947

用逗号分隔选择器：

```
.footer #one .flag li .drop_down form div,
.footer #two .flag li .drop_down form div {
    /* Rules */
} 
```

从[选择器级别 3 规范](http://www.w3.org/TR/selectors/#grouping)：

> 一个以逗号分隔的选择器列表表示由列表中的每个单独选择器选择的所有元素的并集。（逗号是 U+002C。）例如，在 CSS 中，当多个选择器共享相同的声明时，它们可能会被分组到一个逗号分隔的列表中。空格可能出现在逗号之前和/或之后。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T14:03:28.040

在 CSS 中，您使用`,`（逗号），不幸的是，这是在整个选择器上，而不仅仅是其中的一部分。

如果你真的想让它更干净，你可以给每个`form div's`唯一的 id ，然后只是`#form1, #form2`.

[您可以在“缩短逗号分隔的 CSS 选择器](https://stackoverflow.com/questions/3641056/shorten-the-comma-separated-css-selectors)”中找到更多信息。

例如：

```
.footer #one .flag li .drop_down form div,
.footer #two .flag li .drop_down form div {
    width: 80px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    text-align: left;
    line-height: 1.5;
    color: #ccc;
    font-weight:bolder;
    margin-left: 30px;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T14:03:21.333

```
.footer #one .flag li .drop_down form div, 
.footer #two .flag li .drop_down form div{
    ... 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T14:03:59.590

用逗号分隔：

```
.footer #one .flag li .drop_down form div,
.footer #two .flag li .drop_down form div
{
shared css
}

.footer #one .flag li .drop_down form div
{
indvi css for one
}

.footer #two .flag li .drop_down form div
{
indvi css for two
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T14:08:52.537

使用逗号而不是单独的 CSS 规则：

```
.footer #one .flag li .drop_down form div,  
.footer #two .flag li .drop_down form div {  
    width: 80px;  
    font-family: Arial, Helvetica, sans-serif;  
    font-size: 11px;  
    text-align: left;  
    line-height: 1.5;  
    color: #ccc;  
    font-weight:bolder;  
    margin-left: 30px;  
} 
```

# asp.net-mvc-3 - 实体框架的一对多不更新外键

> ID：13973836
> 
> 赞同：1
> 
> 时间：2012-12-20T14:01:37.590
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

我需要一些帮助，我一直在到处寻找为什么这种情况不断发生。我基本上有 2 张桌子，公司和地址。一家公司可以有多个地址。我的类和表如下所示

表格：

```
create table Company (
    companyid int PRIMARY KEY IDENTITY not null,
    name varchar(100),
    agencyref varchar(20),
    website varchar(100),
    phoneno varchar(20),
    faxno varchar(20),
    modified datetime DEFAULT (GETDATE())   
);

create table Address (
      addressid int PRIMARY KEY IDENTITY not null,
      companyid int null, //Does the same if set to not null
        addressLine1 varchar(100),
        addressLine2 varchar(100),
        city varchar(50),
        county varchar(100),
        postcode varchar(10),
        modified datetime DEFAULT (GETDATE()),
        foreign key ( companyid ) references Company (companyid)
); 
```

课程

```
public class Company
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    public int companyid { get; set; }

    [DisplayName("Company Name:")]
    public string name { get; set; }

    [DisplayName("Client Reference:")]
    public string agencyref { get; set; }

    [DisplayName("Website Address:")]
    public string website { get; set; }

    [DisplayName("Phone No:")]
    public string phoneno { get; set; }

    [DisplayName("Fax No:")]
    public string faxno { get; set; }

    private DateTime _modified = DateTime.Now;
    [DataType(DataType.DateTime)]
    public DateTime modified
    {
        get { return _modified; }
        set { _modified = value; }
    }
    public virtual ICollection<Address> Address { get; set; }
}

public class Address
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    public int addressid { get; set; }

    [DisplayName("Address Line 1:")]
    public string addressline1 { get; set; }

    [DisplayName("Address Line 2:")]
    public string addressline2 { get; set; }

    [DisplayName("City:")]
    public string city { get; set; }

    [DisplayName("County:")]
    public string county { get; set; }

    [DisplayName("Postcode:")]
    public string postcode { get; set; }

    private DateTime _modified = DateTime.Now;

    [DataType(DataType.DateTime)]
    public DateTime modified
    {
        get { return _modified; }
        set { _modified = value; }
    }
    public virtual Company Company { get; set; }
} 
```

我的模型构建器

```
modelBuilder.Entity<Company>().HasMany(c => c.Address).WithOptional(p => p.Company).Map(c => c.MapKey("companyid")); 
```

我一直在使用 Code First，并且数据库已经存在。我从数据库中得到的结果是：

公司表：

```
companyid   name    agencyref   website phoneno faxno   modified
4   erg NULL    NULL    NULL    NULL    2012-12-20 13:20:56.430 
```

地址表：

```
addressid   companyid   addressLine1    addressLine2    city    county  postcode    modified
2   NULL    hkjh    NULL    NULL    NULL    NULL    2012-12-20 13:50:37.977 
```

如您所见，我希望地址表中的 companyid 填充为 4，但由于某种原因，这不是这样做的。

想知道是否有人可以帮助我解决这个令人沮丧的问题。我认为使用附加到视图模型的视图很简单，它返回两个填充有数据的类，然后将其插入数据库：

我的 clientModel 类既好又简单：

```
public class ClientModel
{
    public Company Company { get; set; }
    public Address Address { get; set; }
} 
```

我对控制器的看法是：

```
 [HttpPost]
    public ActionResult Edit(ClientModel client)
    {
       // CompanyAddress ca = new CompanyAddress();
        Domain.Data.EFDbContext context = new Domain.Data.EFDbContext();
        if (ModelState.IsValid)
        {
            context.Companies.Add(client.Company);
            context.Addresses.Add(client.Address);
            context.SaveChanges();
            return RedirectToAction("Index");
        }
        else
        {
            return View(client);
        }
    } 
```

这就是我的编辑页面包含

```
@model TimesheetMVC.WebUI.Models.ClientModel 
```

（包含在 FormMethod.Post 中）

```
<fieldset>
    <legend>Company Details</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Company.name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Company.name)
        @Html.ValidationMessageFor(model => model.Company.name)
    </div>        
    <div class="editor-label">
        @Html.LabelFor(model => model.Company.agencyref)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Company.agencyref)
        @Html.ValidationMessageFor(model => model.Company.agencyref)
    </div>

</fieldset>
<fieldset>
    <legend>Address Details</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Address.addressline1)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Address.addressline1)
        @Html.ValidationMessageFor(model => model.Address.addressline1)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Address.addressline2)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Address.addressline2)
        @Html.ValidationMessageFor(model => model.Address.addressline2)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Address.city)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Address.city)
        @Html.ValidationMessageFor(model => model.Address.city)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Address.county)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Address.county)
        @Html.ValidationMessageFor(model => model.Address.county)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Address.postcode)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Address.postcode)
        @Html.ValidationMessageFor(model => model.Address.postcode)
    </div> 
```

任何帮助请......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:29:51.807

您可能不正确地保存数据。您是否尝试过将您的地址数据添加到您的公司模型中，然后只保存公司：

```
Domain.Data.EFDbContext context = new Domain.Data.EFDbContext();
if (ModelState.IsValid)
{
    client.Company.Address.Add(client.Address);
    context.Companies.Add(client.Company);
    context.SaveChanges();
    return RedirectToAction("Index");
}
else
{
    return View(client);
} 
```

希望有帮助。

# c# - 加载 Inkbox 签名，从 SQLserverCE 存储为数组

> ID：13973840
> 
> 赞同：2
> 
> 时间：2012-12-20T14:01:50.527
> 
> 标签：c#, vb.net, compact-framework, .net

我正在使用 CF 3.5 在 C# 中开发一个智能应用程序，它需要能够捕获签名。

为了实现这一点，我使用了 Resco 的 InkBox 控件。为了保存和加载图像，我尝试将提供的 VB 源代码转换为 C#。[Resco InkBox 源代码](http://www.resco.net/developer/support/tutorials.aspx?p=WindowsMobile&comp=inkbox#2)

应用程序保存签名没有任何问题，但是，当我尝试从数据库加载文件时，我在以下代码行中收到**Invalid Cast Exception ；**

```
 MemoryStream stream = new MemoryStream(Convert.ToByte(dr["Signature"])); 
```

我从以下 VB 代码转换而来。

```
 New System.IO.MemoryStream(CType(myReader("Signature"), Byte())) 
```

我已经测试了提供的 VB 代码，它运行良好。有没有人能给我提供解决这个问题的任何建议，因为我完全被难住了。所有帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:39:59.447

您需要转换为字节*数组*

```
var stream = new MemoryStream((byte[])dr["Signature"]); 
```

# matlab - Matlab MCR 程序错误损坏终端

> ID：13973841
> 
> 赞同：1
> 
> 时间：2012-12-20T14:01:51.057
> 
> 标签：matlab, error-handling

我已经使用 MCR 编译了一个 Matlab 例程，并将其部署到其他计算机上，而无需它们安装 matlab。到目前为止，一切都很好。但当然，例程并非完全没有错误，尤其是 GUI 部分。问题是，当 MCR 尝试将错误消息写入终端时，它似乎损坏了终端，因此所有内容都不再清晰可辨——甚至提示也没有。有时我还会得到一个额外的窗口，隐约类似于 matlab 编辑器窗口，里面全是难以辨认的 ascii 字符。有谁知道是什么原因造成的，或者如何避免它？

我的第一次尝试是围绕所有内容进行大尝试，但似乎仍然可以通过。catch 块只是试图将错误转移到 errordlg 而不是命令提示符：

```
catch e
    errordlg({e.message;['in: ',e.stack.name]})
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:25:46.190

MATLAB 编译器不支持命令窗口函数。

彼得韦伯在[Loren 的博客上](http://blogs.mathworks.com/loren/2008/09/17/managing-non-deployable-functions-in-a-compiled-application/)说：

> 某些 MATLAB 函数无法部署，因为它们作用于已部署应用程序中不存在的对象。例如，由于部署的应用程序没有命令窗口，因此无法部署修改命令窗口的功能。

因此，您可能需要摆脱任何打印到命令窗口的功能。

此外，您可以签出该`mccExcludedFiles.log`文件。

# performance - 如何对 Matlab 流程进行基准测试？

> ID：13973843
> 
> 赞同：17
> 
> 时间：2012-12-20T14:01:56.760
> 
> 标签：performance, matlab, loops, vectorization

在寻找如何避免在我的 Matlab 代码中使用循环的想法时，我[在 SE 的一个问题](https://stackoverflow.com/questions/13678295/how-to-calculate-this-in-matlab-without-for-loop)下发现了以下评论：

> 自从 Matlab...euhm，R2008a 以来，“for 循环在 Matlab 中很慢”的说法通常不再正确？

和

> 您是否尝试过对 for 循环与已有的循环进行基准测试？有时它比矢量化代码更快......

所以我想问一下，**Matlab中是否有常用的方法来测试进程的速度**？用户是否可以在某处看到该过程需要多少时间，或者唯一的方法是*将过程延长几分钟*以比较彼此之间的时间？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-20T15:17:37.430

测试 MATLAB 代码性能的最佳工具是 Steve Eddins 的`timeit`函数，[可](http://www.mathworks.com/matlabcentral/fileexchange/18798-timeit-benchmarking-function)从 MATLAB Central File Exchange 获得。

它为您处理与对 MATLAB 代码进行基准测试相关的许多微妙问题，例如：

*   通过将基准代码包装在函数中来确保使用 JIT 编译
*   预热代码
*   多次运行代码并取平均值

* * *

更新：截至 R2013b 版本，[`timeit`](http://uk.mathworks.com/help/matlab/ref/timeit.html)是核心 MATLAB 的一部分。

* * *

更新：从 R2016a 版本开始，MATLAB 还包括一个[性能测试框架](http://uk.mathworks.com/help/matlab/performance-testing-framework.html)，它以与`timeit`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-20T14:05:54.283

您可以使用分析器来评估您的函数以及其中的代码块花费了多少时间。

```
>> profile on; % Starts the profiler
>> myfunctiontorun( ); % This can be a function, script or block of code
>> profile viewer; % Opens the viewer showing you how much time everything took 
```

查看器还会清除当前配置文件数据以备下次使用。

请记住，配置文件确实会稍微减慢执行速度，但我相信它会以统一的方式在所有内容中执行。

显然，如果你的函数非常快，你可能会发现你没有得到可靠的结果，所以如果你可以多次运行它或扩展计算会改善问题。

如果您要测试的东西真的很简单，您也可以使用`tic`and来计时`toc`：

```
>> tic; % Start the timer
>> myfunctionname( );
>> toc; % End the timer and display elapsed time 
```

此外，如果您想要多个计时器，您可以将它们分配给变量：

```
>> mytimer = tic;
>> myfunctionname( );
>> toc(mytimer); 
```

最后，如果您想存储经过的时间而不是显示它：

```
>> myresult = toc; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T14:10:57.683

`tic`我认为我说我们中的许多人通过在和之间包装我们感兴趣的代码块来使用 Matlab 是正确的`toc`。此外，我们注意确保总时间约为 10 秒（而不是 1 秒或 100 秒）并重复 3 - 5 次，并采取一些集中趋势（例如平均值）并从中得出我们的结论。

如果一段代码花费的时间少于 10 秒，则根据需要重复多次以使其进入范围，小心避免一次迭代对下一次迭代产生任何影响。如果代码自然需要 100 秒或更长时间，要么在测试上花费更长的时间，要么尝试使用人为的小输入数据以更快地运行。

以我的经验，没有必要运行几分钟的程序来获得平均运行时间的数据，并且方差可以接受。如果我运行一个程序 5 次，其中一个（或两个）结果与我将重新运行它的平均值大不相同。

当然，如果代码具有使其运行时间不确定的任何特性，那就另当别论了。

# ios - 我将如何在 Core-Data 中对此进行建模

> ID：13973844
> 
> 赞同：0
> 
> 时间：2012-12-20T14:01:58.863
> 
> 标签：ios, core-data

想象一场单打网球比赛......

与实体：

匹配

播放器

游戏

放

一场比赛需要两名球员，但也将包含任意数量的组，而这些组又可以包含任意数量的游戏。关系/反向会是什么样子？

# perl - Perl + 将 file1 中的文本附加到命令行中 file2 的每一行的末尾

> ID：13973847
> 
> 赞同：-4
> 
> 时间：2012-12-20T14:02:25.997
> 
> 标签：perl, merge, text-files

我无法仅使用命令行使用 Perl 来实现这一目标，即使我填写它必须非常简单。我应该只读取只有一行的文件 IDAT0100F 并将其附加到文件 IDAT0300F 的每一行的末尾，从而在文件 IDAT0300F.out 中生成结果。我想对更多具有不同宽度和记录数的文件执行命令（IDAT0100F 保持不变）。提前致谢！

```
文件：IDAT0100F（不带扩展名）
201302201212120

文件：IDAT0300F（不带扩展名）
000164198506DTCV0
000164198506DTDP0
000164198506DTMO0
000164198506DTPR0
000164198506DTTR0

结果：IDAT0300F.out
000164198506DTCV0201302201212120
000164198506DTDP0201302201212120
000164198506DTMO0201302201212120
000164198506DTPR0201302201212120
000164198506DTTR0201302201212120
                 ^^^^^^^^^^^^^^^

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:09:45.900

这可以通过一个简单的单线来完成。

```
perl -plwe 'BEGIN { $\=<> }' ida1.txt ida2.txt > ida.out 
```

假设第一个文件包含标题，并且只包含一行。这将从第一个文件中读取一行，并将该行分配给输出记录分隔符`$\`，也就是附加到每个打印语句末尾的东西。这将与开关结合使用，该开关将从执行 BEGIN 块*后*`-l`读取的行中删除换行符。

 *如果第一个文件包含更多行，您可以显式关闭该文件以防止从中读取更多行：

```
perl -plwe 'BEGIN { $\=<>; close ARGV; }' ida1.txt ida2.txt > ida.out 
```

这个单行代码的完整代码是（为简洁起见，从 deparsed 版本中编辑）：

```
BEGIN { $/ = "\n"; $\ = "201302201212120\n"; }
sub BEGIN {
    $\ = <>;
    close ARGV;
}
while (<>) {
    chomp $_;
}
continue {
    print $_;
} 
```*

# android - 使用 Delphi 将 Dalvik 字节码添加到现有 APK

> ID：13973856
> 
> 赞同：-2
> 
> 时间：2012-12-20T14:02:59.570
> 
> 标签：android, delphi, apk, bytecode, dalvik

我的公司要求我在 delphi 中创建一个 dalvik 字节码注入器，以便在其现有应用程序中传递一段代码。基本上它是在主要活动中显示广告的代码。所以这是我的问题，有没有办法在 delphi 中做到这一点？我正在开发界面以使某些东西非常易于使用：

*   用户选择一个apk文件
*   用户选择要添加的广告类型
*   代码已添加到 apk 中
*   生成并保存一个新的 apk

我假设 ads cpde 应该以字节码格式存储。

我希望有人能帮助我。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:17:07.480

为了简化商业服务的工作，请考虑使用 Apache Maven 构建项目。

如果它使用 Maven 作为构建工具，Delphi 应用程序只需要修改 Maven POM 文件来配置它（通过为广告添加所需的 JAR 依赖项）。这可以使用 Delphi 提供的内置 XML 库来完成。

然后操作员只需要触发重建就可以了。

可以使用 Maven 构建 Android 项目（参见[此处](http://code.google.com/p/maven-android-plugin/)）。使用 Maven，项目也独立于 IDE。

# php - Apache 2 + PHP 5：如何将用户重定向到另一个域

> ID：13973863
> 
> 赞同：2
> 
> 时间：2012-12-20T14:03:09.037
> 
> 标签：php, apache2, http-redirect

我必须`redirect`从另一个站点到一个站点。

我在 Debian 服务器上使用`PHP5`with 。`Apache 2`

例子：

如果用户去：`shop.oldsite.com`，应该被重定向到`http://52.10.32.45:8081/shop/`。

我已经尝试使用`htaccess`file and `redirect 301`，但我看到了新地址，我希望隐藏新地址并保留`shop.oldsite.com`而不破坏 SEO 链接（蜘蛛应该去`shop.oldsite.com`并重定向到新站点）。

是否可以？

EDIT1：谢谢你的回答。我会看看 Aruba（意大利主机）是否支持 mod_proxy，我会告诉你的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:09:25.907

您可以使用带有“P”的 mod_redirect 进行代理，并且必须启用 mod_proxy

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:16:31.300

我认为最简单的方法是将 index.php 文件中的标头位置添加到您提到的位置

```
<?php
header("Location: http://52.10.32.45:8081/shop/");
?> 
```

我希望这可能会有所帮助

# ios - 第二个选项卡在 UITabbarController 中始终显示为灰色

> ID：13973864
> 
> 赞同：0
> 
> 时间：2012-12-20T14:03:13.110
> 
> 标签：ios, uitabbarcontroller

我正在尝试使用应用程序委托中的以下代码将两个 NavBar 控制器嵌入到 UITabbarController 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
    [window makeKeyAndVisible];

    // Configure and show the window.

    FirstViewController *firstController = [[FirstViewController alloc] initWithNibName:nil bundle:NULL];
    self.firstNav = [[UINavigationController alloc] initWithRootViewController:firstController];
    SecondTableViewController *anotherOne = [[SecondTableViewController alloc] initWithNibName:nil bundle:NULL];
    self.anotherNav = [[UINavigationController alloc] initWithRootViewController:anotherOne];

    NSArray *twoViewControllers = [[NSArray alloc]initWithObjects:self.anotherNav,self.firstNav, nil];

    self.tabBarController = [[UITabBarController alloc]init];
    [self.tabBarController setViewControllers:twoViewControllers];
    [window addSubview:self.tabBarController.view];
    [window setRootViewController:tabBarController];
    return YES;
} 
```

这两个选项卡显示正常，带有它们的名称，但我只能选择第一个选项卡，第二个选项卡始终显示为灰色并且不响应触摸事件。我将 navController 分配反转到 Tabbar 中（即在数组 twoViewControllers 中），并且每个视图都显示良好（在第一个选项卡中）。

应用程序委托未实现 UITabbarDelegate 和 uiTabBarControllerDelegate。我不使用故事板。

第二个标签总是灰色的有什么明显的原因吗？

[示例代码：这里](http://developer.apple.com/library/ios/samplecode/Locations/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008406)只是 Apple 的 Locations 教程（带有 ARC）

然后改变：

*   (void)applicationDidFinishLaunching:(UIApplication *)application {}

为了

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

    // Configure and show the window.

    RootViewController *cont1 = [[RootViewController alloc] initWithNibName:nil bundle:NULL];
    RootViewController *cont2 = [[RootViewController alloc] initWithNibName:nil bundle:NULL];

    NSManagedObjectContext *context = [self managedObjectContext];
    if (!context) {
        // Handle the error.
    }
    cont1.managedObjectContext = context;
    cont2.managedObjectContext = context;

    UINavigationController *aNav1 = [[UINavigationController alloc] initWithRootViewController:cont1];
    UINavigationController *aNav2 = [[UINavigationController alloc] initWithRootViewController:cont2];

    NSArray *twoViewControllers = [[NSArray alloc]initWithObjects:aNav1,aNav2, nil];

    self.tabBarController = [[UITabBarController alloc]init];
    [self.tabBarController setViewControllers:twoViewControllers];

    //[window addSubview:[tabBarController view]];
    [window setRootViewController:tabBarController];

    [window makeKeyAndVisible];

} 
```

并将@interface LocationAppDelegate ...@end 替换为

```
@interface LocationsAppDelegate : NSObject <UIApplicationDelegate> {

    UIWindow *window;

    UITabBarController *tabBarController;

    NSPersistentStoreCoordinator *persistentStoreCoordinator;
    NSManagedObjectModel *managedObjectModel;
    NSManagedObjectContext *managedObjectContext;       
}

@property (nonatomic, strong) IBOutlet UIWindow *window;
@property (nonatomic, strong) UITabBarController *tabBarController;

- (IBAction)saveAction:sender;

@property (nonatomic, strong, readonly) NSManagedObjectModel *managedObjectModel;
@property (nonatomic, strong, readonly) NSManagedObjectContext *managedObjectContext;
@property (nonatomic, strong, readonly) NSPersistentStoreCoordinator *persistentStoreCoordinator;

@property (weak, nonatomic, readonly) NSString *applicationDocumentsDirectory;

@end 
```

并编译运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:26:48.640

试着摆脱`[window addSubview:self.tabBarController.view];`

# java - 速度：迭代问题

> ID：13973868
> 
> 赞同：2
> 
> 时间：2012-12-20T14:03:24.653
> 
> 标签：java, velocity

之后，`1.7`从`1.5`1.5 不存在的问题升级到速度引擎。为了解释这个问题，我必须展示一个代码片段：

```
#foreach($someVariable in $someCollection)
 #foreach($anotherVariable in $someVariable.$anotherCollection)
   $anotherVariable.someAttribute ## This expression print in the browser as is
   ## but if I do this way
   $anotherVariable.get("someAttribute") ## works fine!
 #end
#end 
```

这发生在升级之后（在 中`1.7`），如果我回滚升级（移回`1.5`），那么我不必以我在上面的代码片段中提到的其他方式进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:28:41.217

尝试将以下内容添加到您的 MyClass extends HashMap：

public Object get(Object key) { return get((String)key); }

我担心 Velocity 可能会认识到它是一个 Map 并尝试一个不承认泛型的快捷方式，因此调用了错误的 get() 方法。但是我没有准备好在这台机器上确认这一点，我也没有时间这样做。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T16:53:36.463

您可能需要检查您的 .java 文件。

```
#foreach($someVariable in $someCollection)
    #foreach($anotherVariable in $someVariable.$anotherCollection)
        $anotherVariable.someAttribute 
        $anotherVariable.get("someAttribute") 
    #end
#end 
```

假设 someVariable 是类 X 的对象。对于您的 someVariable，应该有一个公共 get() 方法来获取类 X 中的 anotherCollection；同样，假设 anotherVariable 是类 Y 的对象。对于您的 anotherVariable，应该有一个公共 get() 方法来获取类 Y 中的 someAttribute。

这适用于我们尝试访问 someAttribute 的两种方式，如上所示。

# cakephp - 在 Cakephp 中根据国家添加国家列表

> ID：13973874
> 
> 赞同：0
> 
> 时间：2012-12-20T14:03:35.513
> 
> 标签：cakephp

在控制器中，我具有更新地址的功能

```
 if(!empty($this->data)) {
        $this->data['Address']['user_id'] = $this->Auth->user('id');
        $this->data['Address']['user_address_type_id'] = $address_type_id;
        if($this->Address->save($this->data)) {
            if(!empty($this->data['Address']['update_all'])) {
                $this->Address->updateAll($this->data);
            }
            $this->Session->setFlash(__('The address was successfully updated.', true), 'default', array('class' => 'success'));
            $this->redirect(array('action'=>'index'));
        } else {
            $this->Session->setFlash(__('There was a problem updating the address, please correct the errors below.', true));
        }
    } else {
        $this->data = $this->Address->find('first', array('conditions' => array('user_address_type_id' => $address_type_id, 'user_id' => $this->Auth->user('id'))));
    }

    $this->set('countries', $this->Address->Country->find('list',array('order' => 'Country.name ASC'))); 
```

并在 edit.ctp 文件中

```
 <fieldset>
                    <legend><?php __('Update Address');?></legend>
                <?php

                    echo $form->input('id');
                    echo $form->input('name', array('label' => __('Name *', true)));
                    echo $form->input('address_1', array('label' => __('Address (line 1) *', true)));
                    echo $form->input('address_2', array('label' => __('Address (line 2)', true)));
                    echo $form->input('suburb', array('label' => __('Suburb / Town', true)));
                    echo $form->input('city', array('label' => __('City / State / County *', true)));
                    echo $form->input('postcode', array('label' => __('Post Code / Zip Code *', true)));
                    echo $form->input('country_id', array('label' => __('Country *', true), 'empty' => 'Select'));
                    echo $form->input('state_id', array('type' => 'select','label' => __('States *', true), 'empty' => 'Select'));              
                    echo $form->input('phone', array('label' => __('Phone', true)));
                    /*echo $form->input('update_all', array('type' => 'checkbox', 'label' => __('Make all your addresses this address.', true)));*/
                ?>
                </fieldset> 
```

我想根据所选国家添加州列表。例如，如果选择了 USA，则 USA States 会出现在 states 下拉列表中等。

# java - SOAPMessage 对象中的信封字段为空

> ID：13973875
> 
> 赞同：1
> 
> 时间：2012-12-20T14:03:36.590
> 
> 标签：java, soap, saaj

我正在尝试调用一些 WS。我的本地机器上有服务器和客户端。我 100% 确定消息的内容，它来自服务器到客户端，没有任何变化。问题是客户端创建的`SOAPMessage`对象不正确，soapPart 下的信封字段等于 null。

客户端代码：

```
SOAPMessage responseMsg = conn.call(msg, urlEndpoint); 
```

服务器端代码：

```
SOAPEnvelope envelope = sp.getEnvelope();
SOAPHeader hdr = envelope.getHeader();
SOAPBody bdy = envelope.getBody();
bdy.addBodyElement(envelope.createName("response", "soa", "http://www.sbg.com"));

return msg; 
```

Id 调试窗口我看到以下内容：

1) 服务器端调试窗口

![服务器端调试窗口](../Images/b06879738a28a7641aa140eed8b1bdf6.png)

2) 客户端调试窗口

![客户端调试窗口](../Images/99bb428d10f3152eb9674aacd7e3054f.png)

我正在使用 SAAJ 进行通信和 JDK 1.6。

有人可以协助解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:10:51.900

您对（客户端和服务器）都负责吗？客户端发送的消息是什么？

以我的经验，它有助于使用像 SoapUI 这样的工具来测试消息：

[http://www.soapui.org/](http://www.soapui.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:42:21.617

尝试这个：

```
 SOAPMessage sm = MessageFactory.newInstance().createMessage();
    sm.setProperty(SOAPMessage.WRITE_XML_DECLARATION, "true");
    sm.setProperty(SOAPMessage.CHARACTER_SET_ENCODING, "UTF-8");

    SOAPPart sp = sm.getSOAPPart();
    SOAPEnvelope se = sp.getEnvelope();
    se.setEncodingStyle("http://schemas.xmlsoap.org/soap/encoding/");
    se.setAttribute("xmlns:SOAP-ENC", "http://schemas.xmlsoap.org/soap/encoding/");
    se.setAttribute("xmlns:soa", "http://www.sbg.com");

    SOAPBody sb = sm.getSOAPBody();
    SOAPBodyElement el = sb.addBodyElement(new QName("http://www.sbg.com", "response", "soa"));
    el.setAttribute("_ctxID", "cid=xref_members,cn=admin");
    el.setAttribute("status", "OK");
    SOAPElement in = el.addChildElement("response_code");
    in.setValue("0000");
    sm.writeTo(System.out); 
```

# php - 使用实时数据和真实客户对新网站功能进行 Beta 测试

> ID：13973876
> 
> 赞同：2
> 
> 时间：2012-12-20T14:03:38.640
> 
> 标签：php, git, cakephp, testing, beta

**这个问题的主要目标是确定在实时网站旁边部署稍微修改过的网站版本的缺陷。**

这个辅助网站将从与现场相同的数据库中提取，但会为 beta 测试人员修改功能。

最终目标是允许某些客户使用他们的数据测试我们的新功能。

所以：

1.  他们不必通过访问该站点的复制版本来做两次事情。
2.  他们使用熟悉的数据集

另一种可能性是为每个用户帐户设置一个标志以允许他们查看某些功能，但这需要大量额外的工作。此外，一旦它准备好发布，我们将不得不删除所有额外的检查。

我很难看到这样做的缺点，但我知道一定有一些人在盯着我看。感谢您提供任何帮助。

**Git 版本控制、Capistrano 部署工作流程、Cakephp 框架、MySql** 我们目前拥有独立于生产服务器的本地和测试服务器。

**编辑 2012 年 12 月 20 日上午 10:30 EST**

根据一些评论和一个答案，我有一个基于反馈的更新。

1.  在“beta”/用户反馈测试之前应该进行细致的内部测试。（我们已经这样做了）
2.  如果我们采取这些预防措施并且代码库看起来很稳固，那么与生产服务器一起部署的风险是可以控制的。我们在这里是在一个框架内工作，因此大量删除和坏 sql 的可能性相对较低。

话虽如此，我宁愿**不**采用这种方法，因为它仍然存在固有风险。有没有人以另一种方式对实时服务器数据进行 beta 测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:00:10.417

这取决于...

如果这是一个获得客户反馈的测试版，那么对于一个已经过全面测试并且已知稳定的产品，风险是相对可控的（尽管请参阅下面的几点）。这就是谷歌定义“测试版”的方式。

如果“beta”意味着代码完整，并且经过某种程度的测试，但谁知道那里有什么错误，那么您可能会破坏您的实时数据库。无论您的备份策略多么巧妙，如果出现问题，最好的情况是测试版用户面临数据丢失或损坏；最坏的情况是您的所有用户都丢失了数据（我已经看到删除或更新语句中损坏的“where”子句会造成各种有趣的损害）。

另一个需要考虑的问题是数据库是否在版本之间向后和向前兼容——如果他们不喜欢升级，或者出现问题，您可以将您的测试用户迁移回主流版本吗？当然，如果“beta”意味着“未经测试”，这将是一个更大的交易。

一般来说，处理单向兼容性要容易得多——允许用户升级，但不能降级——另一个强有力的论据是“测试版”意味着“用户反馈”......

# html - 按钮在 IE9 中显示为禁用但在 IE10 中显示为启用

> ID：13973878
> 
> 赞同：2
> 
> 时间：2012-12-20T14:03:46.983
> 
> 标签：html, internet-explorer-10

我在网络表单中有一个按钮，在 IE9 中显示为禁用，而在 IE10 中打开同一页面时，它显示为启用。

观察到这种行为的原因是什么？

下面是aspx页面的一部分。

```
<div class="controlBox">
              <asp:Button ID="btnYes" runat="server" OnClick="btnYes_Click" />
              <asp:Button ID="btnNo" runat="server" OnClick="btnNo_Click" />
        </div> 
```

这就是控制其可见性的方式

```
document.getElementById("btnNo").style.visibility = "visible";  
document.getElementById("btnNo").disabled=false; 
```

它是否与 IE10 如何处理禁用属性有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:14:05.140

那不应该

```
document.getElementById("btnNo").disabled=true; 
```

# c++ - FFmpeg 仅在使用自制软件部署应用程序时线程锁定不足

> ID：13973881
> 
> 赞同：1
> 
> 时间：2012-12-20T14:03:54.670
> 
> 标签：c++, dll, deployment, ffmpeg, homebrew

我有我生命中最奇怪的错误。我已经使用自制软件安装了 ffmpeg。我从 dll 中使用它。我设置了一个锁管理器，因为我使用来自多个线程的 ffmpeg。

在 Engine.h 中：

```
class EXPORT_LIB Engine
{
public:
    static int initEngine();    
    static int closeEngine();
}; 
```

在 Engine.cpp 中：

```
static int ff_lockmgr(void **mutex, enum AVLockOp op)
{
if (NULL == mutex)
    return -1;

switch(op)
{
case AV_LOCK_CREATE:
{
    *mutex = NULL;
    boost::mutex * m = new boost::mutex();
    *mutex = static_cast<void*>(m);
    break;
}
case AV_LOCK_OBTAIN:
{
    boost::mutex * m =  static_cast<boost::mutex*>(*mutex);
    m->lock();
    break;
}
case AV_LOCK_RELEASE:
{
    boost::mutex * m = static_cast<boost::mutex*>(*mutex);
    m->unlock();
    break;
}
case AV_LOCK_DESTROY:
{
    boost::mutex * m = static_cast<boost::mutex*>(*mutex);
    delete m;
    break;
}
default:
    break;
}
return 0;
}

int Engine::initEngine()
{
    int res = -1;
    res = av_lockmgr_register(&ff_lockmgr);
    av_register_all();
    av_log_set_level(AV_LOG_QUIET); // ERROR, PANIC
    // Av lock manager success
    if( res == 0 ) {
        res = MULTITHREAD;
    }
    else {
        res = SINGLETHREAD;
    }
    return res;
}

int Engine::closeEngine()
{
    int res = 0;
    res = av_lockmgr_register(NULL);
    return res;
} 
```

到目前为止一切顺利，一切都按预期工作。

当我使用 CMake fix_bundle 部署我的应用程序时。我有一条错误消息

**avcodec_open/close() 周围的线程锁定不足**

如果我在自定义位置手动编译 ffmpeg，当我部署应用程序时，一切都会按预期工作。自制软件有什么问题？

# c - linux的鼠标点击功能

> ID：13973884
> 
> 赞同：1
> 
> 时间：2012-12-20T14:04:13.580
> 
> 标签：c, qt, opencv

我正在尝试通过使用 opencv 检测手指运动来构建虚拟鼠标。手指检测完成。但我被困在鼠标点击功能中。我的工作与此类似：http: [//8a52labs.wordpress.com/tag/colored-finger-tracking](http://8a52labs.wordpress.com/tag/colored-finger-tracking/)

但他已经在 Windows 中做到了。我在linux中工作。我只想要一个库，它为我提供左键单击、右键单击、鼠标移动等功能。我正在使用 Fedora 16、opencv 和 QT。

PS - 我已经通过 QCursor::setPos(mouseX,mouseY); 在 Qt 中移动了鼠标光标；但是没有进行左键单击和右键单击的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:15:30.657

如果您想在整个系统范围内执行此操作，而不是仅限于您的 Qt 应用程序，请参阅[此答案](https://stackoverflow.com/questions/10319519/how-to-insert-synthetic-mouse-events-into-x11-input-queue)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:11:51.240

您需要`QMouseEvent`通过`QCoreApplication::postEvent(QObject* receiver, QEvent* event)`.

# jquery - jquery自动检查来自同一张表的复选框

> ID：13973885
> 
> 赞同：6
> 
> 时间：2012-12-20T14:04:16.370
> 
> 标签：jquery

我有这个代码：

**HTML**

```
<table class=tbl>
    <tr>
        <td>
            <input class='c1' type='checkbox'>
            <label>Ceckbox1</label>
        </td>
        <td>
            <input class='c2' type='checkbox'>
            <label>Ceckbox2</label>
        </td>
        <td>
            <input class='c2' type='checkbox'>
            <label>Ceckbox2</label>
        </td>
        <td>
            <input class='c2' type='checkbox'>
            <label>Ceckbox2</label>
        </td>
    </tr>
</table>
<table class=tbl>
    <tr>
        <td>
            <input class='c1' type='checkbox'>
            <label>Ceckbox1</label>
        </td>
        <td>
            <input class='c2' type='checkbox'>
            <label>Ceckbox2</label>
        </td>
        <td>
            <input class='c2' type='checkbox'>
            <label>Ceckbox2</label>
        </td>
        <td>
            <input class='c2' type='checkbox'>
            <label>Ceckbox2</label>
        </td>
     </tr>
   </table> 
```

**JavaScript**

```
 $('.c2').click(function () {
     if ($(this).parent().find('.c2').is(':checked')) {
         alert('all are checked');
     } else {
         alert('none are checked');
     }
 }); 
```

我正在尝试使用 jquery 仅在检查同一“tbl”中的所有“c2”时才自动检查“c1”，但没有结果。'c2' 的计数可以变化，'tbl' 的计数也可以变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:14:01.627

您可以通过比较复选框的总数与选中框的数量来查看是否所有复选框都被选中，在同一个 parent`tr`中。试试这个：

```
$('.c2').change(function () {
    var $parent = $(this).closest('tr');
    var allChecked = $('.c2', $parent).length === $('.c2:checked', $parent).length;
    $('.c1', $parent).prop('checked', allChecked);
}); 
```

[**示例小提琴**](http://jsfiddle.net/8wUAL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:14:28.957

试试这个代码它的工作原理：

[演示](http://jsfiddle.net/unNFZ/1/)

```
$('.c2').change(function(){
    var all = true;
    $(this).parent().parent().find('.c2').each(function(index){
        if(!($(this).is(':checked'))){
           all =  false;
        }
    });
    if (all==true){
        $(this).parent().parent().find('.c1').attr('checked', true);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:14:41.623

这将检查是否`.c2`选中了同一张表上的所有复选框：

```
$('.c2').on('change', function(){
  var allCheckboxes = $(this).parents('table').find('.c2');
  var allCheckedBoxes = $(this).parents('table').find('.c2:checked');

  if(allCheckboxes.length === allCheckedBoxes.length ) {
     $(this).parents('table').find('.c1').prop('checked', true);
  }
});​ 
```

演示：http: [//jsfiddle.net/maniator/JxCC2/](http://jsfiddle.net/maniator/JxCC2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:15:07.367

```
$('.c2').click(function () {
    var $tbl = $(this).closest('.tbl');
    $tbl.find('.c1').prop('checked', $tbl.find('.c2:not(:checked)').length === 0);
}); 
```

# [演示](http://jsfiddle.net/wyCdB/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T14:16:04.033

尝试以下

```
 $('.c1').click(function () {
     if ($(this).parent().find('.c1').is(':checked')) {
         alert('all are checked');
         $('.tbl input').attr('checked',true);
     } else {
         alert('none are checked');
          $('.tbl input').attr('checked', false);
     }
  });​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T14:18:21.573

尝试

```
$('.c2').click(function () {
    var all = $(this).closest('.tbl').find('.c2'),
        checked = all.filter(':checked');
     if (all.length === checked.length) {
         alert('all are checked');
     } else {
         alert('none are checked');
     }
 });​ 
```

[http://jsfiddle.net/tarabyte/Q6San/](http://jsfiddle.net/tarabyte/Q6San/)

# android - android中谷歌地图v2中的缩放级别监听器

> ID：13973886
> 
> 赞同：44
> 
> 时间：2012-12-20T14:04:17.073
> 
> 标签：android, google-maps, google-maps-mobile, google-maps-android-api-2

我正在开发一个应该使用 Google Maps v2 的 Android 应用程序。现在我一直在寻找地图的缩放级别何时发生变化。任何人都可以帮助我吗？在此先感谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-20T16:07:41.350

如果您正在寻找如何确定缩放级别是否已从以前的缩放级别更改，我建议您这样做：

定义一个实例变量来跟踪之前的缩放级别：

```
//Initialize to a non-valid zoom value
private float previousZoomLevel = -1.0f; 
```

另外，定义一个实例变量让您知道地图是否正在缩放：

```
private boolean isZooming = false; 
```

当你设置你的 GoogleMap 实例时，给它一个 OnCameraChangeListener...

```
//mMap is an instance of GoogleMap
mMap.setOnCameraChangeListener(getCameraChangeListener()); 
```

现在，定义将确定缩放级别是否已更改的 OnCameraChangeListener：

```
public OnCameraChangeListener getCameraChangeListener()
{
    return new OnCameraChangeListener() 
    {
        @Override
        public void onCameraChange(CameraPosition position) 
        {
            Log.d("Zoom", "Zoom: " + position.zoom);

            if(previousZoomLevel != position.zoom)
            {
                isZooming = true;
            }

            previousZoomLevel = position.zoom;
        }
    };
} 
```

现在，您可以检查 isZooming 的值以了解您是否正在更改缩放级别。

确保设置

```
isZooming = false; 
```

在您完成任何依赖于知道地图是否正在缩放的​​操作之后。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-11-12T18:35:20.317

由于以前的答案基于`OnCameraChangeListener`并且已[弃用](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraChangeListener)，因此此答案基于 camera [`OnCameraMoveListener`](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraMoveListener)。

在此示例中，当用户更改缩放（使用控件或手指和缩放）时，我正在更改我的[地图类型。](https://developers.google.com/maps/documentation/android-api/map#map_types)

如果[缩放级别](https://developers.google.com/maps/documentation/android-api/views#zoom)更改为**上方** `18.0`，地图类型更改为`MAP_TYPE_HYBRIB`，
如果[缩放级别](https://developers.google.com/maps/documentation/android-api/views#zoom)更改为**下方** `18.0`，地图类型更改为`MAP_TYPE_NORMAL`。

```
googleMap.setOnCameraMoveListener(new GoogleMap.OnCameraMoveListener() {
    @Override
    public void onCameraMove() {
        CameraPosition cameraPosition = googleMap.getCameraPosition();
        if(cameraPosition.zoom > 18.0) {
            googleMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
        } else {
            googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-12-20T14:10:35.510

创建 的实现[，`OnCameraChangeListener`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraChangeListener)并将其实例传递[给`setOnCameraChangeListener()`您的`GoogleMap`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.html#setOnCameraChangeListener%28com.google.android.gms.maps.GoogleMap.OnCameraChangeListener%29). `onCameraChange()`每当用户更改缩放、中心或倾斜时，都应该调用您的侦听器。`CameraPosition`您从传递的对象中找出新的缩放级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-07T10:27:11.780

您还可以`GoogleMap.OnCameraMoveStartedListener`使用方法覆盖和注册它`GogleMap.setOnCameraMoveStartedListener`：

```
googleMap.setOnCameraMoveStartedListener { reason ->
   when (reason) {
      GoogleMap.OnCameraMoveStartedListener.REASON_GESTURE -> {
         //handle this state
      }
    }
} 
```

# java - 引用类型和对象类型更改 Java

> ID：13973887
> 
> 赞同：9
> 
> 时间：2012-12-20T14:04:22.440
> 
> 标签：java, object, reference

鉴于：

```
public class X implements Z {

    public String toString() { return "I am X"; }

    public static void main(String[] args) {
        Y myY = new Y();
        X myX = myY;
        Z myZ = myX;
        System.out.println(myZ);
    }
}

class Y extends X {

    public String toString() { return "I am Y"; }
}

interface Z {} 
```

myZ 的引用类型是什么，它引用的对象的类型是什么？

A、参考类型为Z；对象类型为 Z。

B、参考类型为Y；对象类型为 Y。

C、参考类型为Z；对象类型为 Y。

D. 引用类型为X；对象类型为 Z。

在这种情况下，我知道对象类型肯定是 Y，因为我可以使用 .getClass() 方法对其进行测试。但我不确定如何检查引用类型是什么。我假设它是 Z，但这个假设是基于直觉而不是逻辑。

谁能详细说明参考类型可能是什么以及为什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:08:13.927

对象引用的类型在其声明时静态定义：

```
Z myZ = ... 
```

因此，引用的类型是`Z`，所以“C”应该是正确的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:09:59.997

对象是用创建的，`new Y();`所以对象类型是`Y`

`myZ`被声明为`Z`( `Z myZ = ...;`) 所以引用类型是`Z`

因此，正确答案是**C**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T08:01:15.603

对象被引用到 Z 类型

```
Z myZ = myX; 
```

但最初它是作为 Y 型创建的，

```
Y myY = new Y(); 
```

因此，ans 显然是 C。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-10T13:33:13.670

我知道这很令人困惑，因为错误的答案被标记为正确的答案；我也遇到过。事实是，正如他们所说，引用是 Z 类型，对象类型是 Y，所以 C 是正确答案。

# java - ArrayList.java中List接口的冗余实现

> ID：13973900
> 
> 赞同：15
> 
> 时间：2012-12-20T14:05:15.650
> 
> 标签：java, collections

> **可能重复：**
> [为什么 ArrayList 有“implements List”？](https://stackoverflow.com/questions/4387419/why-does-arraylist-have-implements-list)

我是 java 新手，我试图查看集合接口的层次结构。我发现 **AbstractList.java**的签名就像

```
public abstract class AbstractList<E> extends AbstractCollection<E> implements List<E> 
```

它实现了 List 接口。但是，如果您查看子类 ArrayList.java 的签名，它看起来像

```
public class ArrayList<E> extends AbstractList<E>   implements List<E>, RandomAccess, Cloneable, java.io.Serializable 
```

如果您查看父类已经实现 List 接口，那么为什么子类再次实现相同的接口（**List**）。

这背后是否有特定的原因或要求

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T14:11:04.763

> 这背后是否有特定的原因或要求

我不这么认为。就编译器而言，删除第二个`List<E>`绝对不会改变。

我的两个假设是：

1.  它的存在是出于历史原因。但是，我找不到任何证据来支持这一点。
2.  `ArrayList<E>` [**它包含在文档中，比is-a**](http://en.wikipedia.org/wiki/Is-a) 更清楚`List<E>`（这可能是最重要的事情`ArrayList`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:11:17.173

我不知道答案是什么，所以我做了一些研究。事实证明，这是为了清楚起见。

> 是的。它可以被省略。但因此可以立即看出它是一个列表。否则需要额外点击代码/文档。我认为这就是原因——清晰。
> 
> 并添加 Joeri Hendrickx 的评论 - 目的是展示 ArrayList 实现了 List。整个图中的 AbstractList 只是为了方便和减少 List 实现之间的代码重复。

[为什么 ArrayList 有“实现列表”？](https://stackoverflow.com/questions/4387419/java-collection-implements-interface)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:10:50.347

> 可能只是出于文档目的，让想要使用 ArrayList 的人清楚。
> 
> 这确实是多余的，因为 ArrayList 的 AbstractList 超类已经实现了 List 接口。

[来自[爪哇牧场](http://www.coderanch.com/t/585592/java/java/ArrayList-class-implements-List-interface)]

另一个原因可能是：

```
// This class captures common code shared by both the ArrayList and LinkedList.
// An abstract class is a good way to provide a partially implemented class, or
// a partial implementation of an interface.  Notice that the header of this
// class claims to implement the List interface, but the file doesn't write
// all of the methods.
// 
// Java allows this file to compile because it knows that the abstract class
// must be extended to complete it.  If a subclass of AbstractList doesn't
// implement all the rest of the List interface's methods, that subclass will 
// not compile. 
```

[我在[这里](http://www.cs.washington.edu/education/courses/cse143/12wi/lectures/02-29/programs/AbstractList.java)找到了。]

# google-chrome-extension - Chrome 扩展程序：弹出窗口中的多个选项卡

> ID：13973902
> 
> 赞同：7
> 
> 时间：2012-12-20T14:05:17.980
> 
> 标签：google-chrome-extension, tabs, popup

1.  我想知道是否有一种方法可以将弹出窗口划分为多个选项卡，当每个选项卡用作不同的网页时，使用 chrome 扩展 API。有人知道这是否可能吗？

2.  如果我做不到，我想我会放弃将网页划分为单独的网页，而只使用同一网页上的选项卡，例如 UI 选项卡。你能推荐第三种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:02:07.803

[`Browser`](https://developer.chrome.com/extensions/browserAction.html)\[`Page`](https://developer.chrome.com/extensions/pageAction.html)操作[窗口](https://developer.chrome.com/extensions/browserAction.html#popups)是[`Windows of type Popup`](https://developer.chrome.com/extensions/windows.html#type-Window)，您不能在弹出窗口中添加更多选项卡。

正如所指出的，使用某种[`UI Tabs`](http://jqueryui.com/tabs/)可以解决您的问题。如果您需要更多信息，请与我们联系。

# firefox - 关闭 Selenium IDE 中新打开的选项卡或窗口

> ID：13973908
> 
> 赞同：4
> 
> 时间：2012-12-20T14:05:50.837
> 
> 标签：firefox, windows-7, selenium, ide, selenium-ide

在 Windows7 和 Firefox 中使用 Selenium IDE，自动单击链接可能会生成新选项卡或新窗口。

close() 关闭原始窗口或选项卡，而不是新的。也许如果我有新创建的 ID，我可以选择它然后关闭它，但我不知道如何自动执行此操作。我在 Selenium 论坛上提问并阅读了这里的问题，但他们关注的是 WebDriver，而不是 IDE。任何帮助，将不胜感激！

```
 Stig 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-15T12:24:55.183

我遇到了同样的问题并找到了解决方案：

1.  单击打开新选项卡的链接
2.  添加命令`waitForPopUp`
3.  通过命令将焦点设置到新选项卡`selectPopUp`
4.  在新标签中对您的内容进行验证或其他命令
5.  使用命令`close`关闭选项卡
6.  使用命令`selectWindow`将焦点设置到旧窗口

我的 Selenium IDE 命令的屏幕截图：

![Selenium IDE 切换选项卡](../Images/6aa32b4e08ee7c9b2a9a975f22aeedc7.png)

这对我行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:35:49.113

在 Se IDE 中使用`selectWindow(windowID)`命令切换到新窗口。您可以通过 windowID/name/title 选择新窗口。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-26T14:57:24.380

selectWindow(windowID) 可以选择提及网页/窗口的标题作为识别目标窗口的一种方式。

语法 = selectWindow title=我的特殊窗口

注意：title = 在网页标题栏中可见的网页标题。或右键单击网页并选择菜单“页面来源”。在源文档中，选择...之间的文本。

所以如果网页的标题=我的特殊窗口，你会看到我的特殊窗口。

希望这会有所帮助。

斯瓦萨蒂保罗

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-27T11:24:37.253

同意surya使用selectWindow（windowID），您可以通过右键单击页面检查选项verifyTitle来获取窗口标题，并在前面您有您的标题。希望它有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-09-07T03:05:27.430

您可以使用迭代器在窗口之间进行迭代，关闭新窗口并返回到原来的窗口。你可以把它放在`try`块下，因为它只会在新窗口打开时迭代。否则，它将在当前窗口中继续正常执行。

```
try{     
Set <Strings> ids = driver.getWindowHandles();
Iterator <String> it = ids.iterator();
String currentPage = it.next();
String newPage = it.next();
driver.switchTo().window(newPage);
driver.close(); //it will close the new window and automatically come back to the currentPage
}
finally
{
//continue with your script here
//this script will run regardless of the execution of the execution of the try block
} 
```

# javascript - 使用 JavaScript/jQuery 检查对象是否为空

> ID：13973927
> 
> 赞同：28
> 
> 时间：2012-12-20T14:07:03.153
> 
> 标签：javascript, jquery, json

我有一个这样的对象：

```
ricHistory = {
  name1: [{
    test1: value1,
    test2: value2,
    test3: value3
  }],
  name2: [{
    test1: value1,
    test2: value2,
    test3: value3
  }]
}; 
```

现在我想用 Javascript/jQuery 检查例如 name2 是否为空。我知道方法`hasOwnProperty`。它`data.hasOwnProperty('name2')`仅适用于名称是否存在，但我必须检查它是否为空。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-20T14:10:18.153

你可以这样做[`jQuery.isEmptyObject()`](http://api.jquery.com/jQuery.isEmptyObject/)

检查对象是否为空（不包含属性）。

```
jQuery.isEmptyObject( object ) 
```

例子：

```
jQuery.isEmptyObject({}) // true
jQuery.isEmptyObject({ foo: "bar" }) // false 
```

[来自 jQuery](http://api.jquery.com/jQuery.isEmptyObject/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-04-06T08:24:08.847

JQuery 的另一种语法是您没有使用 Prototype 或类似的语法，您更喜欢使用 $ 而不是 jQuery 前缀；

```
$.isEmptyObject( object ) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-20T14:10:05.870

试试这个：

```
if (ricHistory.name2 && 
    ricHistory.name2 instanceof Array &&
    !ricHistory.name2.length) {
   console.log('name2 is empty array');
} else {
   console.log('name2 does not exists or is not an empty array.');
} 
```

上面的解决方案将显示richHistory.name2 是否存在，是一个数组并且它不为空。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-20T14:09:12.443

试试这个有用的功能：

```
function isEmpty(obj) {
if(isSet(obj)) {
    if (obj.length && obj.length > 0) { 
        return false;
    }

    for (var key in obj) {
        if (hasOwnProperty.call(obj, key)) {
            return false;
        }
    }
}
return true;    
};

function isSet(val) {
if ((val != undefined) && (val != null)){
    return true;
}
return false;
}; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-04T12:24:25.113

我在我的代码中总是这样：

假设我的控制器返回如下内容：

```
$return['divostar'] = $this->report->get_additional_divostar_report($data);
$return['success'] = true;
return response()->json($return); 
```

在 Jquery 中，我会检查如下：

```
if (jQuery.isEmptyObject(data.divostar)){
      html_result = "<p id='report'>No report yet</p>";
      $('#no_report_table').html(html_result).fadeIn('fast');
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-10T16:05:18.653

肮脏但简单且有效：

```
function isEmptyObject(obj) {
  return JSON.stringify(obj) == '{}';
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-20T14:09:46.813

```
if (ricHistory.name2 === undefined) {
   //This is property has not been set (which is not really the same as empty though...)
} 
```

# iphone - 是否可以设置 UIAccelerometer delta？

> ID：13973929
> 
> 赞同：0
> 
> 时间：2012-12-20T14:07:09.060
> 
> 标签：iphone, ios, uiaccelerometer, delta, game-loop

我正在 iOS 上编写游戏，并尝试使用加速度计设置响应运动。所以当我在 iPhone 上开始游戏时，一切都很好，加速度计响应没有问题。但是当我停止游戏循环（暂停菜单），然后重新开始时，屏幕上的实体会跳到某个地方，然后几秒钟后又回到原位。我相信这是由于游戏循环和加速度计的增量之间的差异而发生的。所以我想知道有没有办法将 iPhone 上的加速度计设置为仅在游戏循环更新时更新值？

UIAccelerometer 的值是这样读取的（我只需要 x 轴） `- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration { accelerometValues[0] = acceleration.x * 0.1f + accelerometValues[0] * (1.0 - 0.1f); }`

加速度计设置如下 `[[UIAccelerometer sharedAccelerometer] setUpdateInterval:1.0 / 60.0]; [[UIAccelerometer sharedAccelerometer] setDelegate:currentScene];`

游戏循环本身取自 Alex Diener [GameLoop Tutorial的教程](http://sacredsoftware.net/tutorials/Animation/TimeBasedAnimation.xhtml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:50:26.700

当您暂停时，您可以通过移除委托来停止侦听 Accelerometer 事件：

```
[[UIAccelerometer sharedAccelerometer] setDelegate:nil]; 
```

然后在游戏恢复时再次设置加速度计。不需要更改返回的数据，只需忽略您不需要的任何数据。

# android - 当用户按下 Google Maps v2 for Android API 上的“我的位置中心”按钮时，我如何获得通知

> ID：13973931
> 
> 赞同：4
> 
> 时间：2012-12-20T14:07:13.613
> 
> 标签：android, google-maps

`setMyLocationEnabled`当用户按下启用时出现的此按钮时，我找不到通知的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:50:08.497

Google Maps Android API v2 目前不支持此事件。

**请参阅My Tracks**应用程序中的代码，了解如何创建解决方法

[https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/fragments/MyTracksMapFragment.java](https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/fragments/MyTracksMapFragment.java)

```
 /*
   * My Tracks needs to handle the onClick event when the my location button
   * is clicked. Currently, the API doesn't allow handling onClick event,
   * thus hiding the default my location button and providing our own.
   */ 
```

# java - 使用 AnnotationStrategy 时自动反序列化子节点

> ID：13973932
> 
> 赞同：1
> 
> 时间：2012-12-20T14:07:17.373
> 
> 标签：java, converter, simple-framework

我正在使用 Java 的 SimpleXML 库。目前，我正在尝试使用 @Convert 注释反序列化节点。我重写了 Converter 接口中的 read() 方法，它具有以下原型：

`Converter.read(InputNode node)`

在 read() 方法中，我迭代子节点并反序列化它们。但是，一些子节点非常复杂，我希望它们使用当前上下文以正常方式反序列化。我认为可以使用 Traverser 类来完成：

```
public void read(InputNode node) {
    InputNode child;
    while ((child = node.getNext()) != null) {
        String name = child.getName();
        if (name == "child1") {
            //manually read object - no problem
            MyFirstClass object = new MyFirstClass(child.getValue());
        } else if (name == "child2") {
            //automatically read object - here is the problem
            Traverser traverser = new Traverser(context);
            MySecondClass object = traverser.read(child, MySecondClass.class);
        }
    }
} 
```

这样做有两个问题：

1.  Traverser 类是 SimpleXML 的内部类，默认情况下，外部不可用。

2.  我无权访问读取方法中的上下文对象。InputNode 不提供访问它的方法。

有没有什么方法可以在这个地方获取 Context 对象而不需要对 SimpleXML 进行复杂的修改？更改 Traverser 类的可见性很容易，但提供上下文却不是。

或者，有没有更简单的方法来做我需要的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:53:51.680

您可以简单地使用您创建的 Persister，而不是使用 AnnotationStrategy 使用 RegistryStrategy。

# android - Android - decodefile 或 decodeStream 将所选 Uri 转换为位图时出现内存不足错误

> ID：13973936
> 
> 赞同：2
> 
> 时间：2012-12-20T14:07:34.423
> 
> 标签：android, bitmap, uri, out-of-memory, android-gallery

我对图库手机中的图片选择功能有很大的问题！我选择了照片，我得到了 URI，当读取“onActivityResult”中的流以将流放入位图中时，我有一个“outoffmemoryerror”。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
if (resultCode == RESULT_OK) {
       Uri uri = data.getData();
       InputStream is = getContentResolver().openInputStream(mSelectedUri);
       Bitmap bitmap = BitmapFactory.decodeStream(is);
} 
```

我尝试了其他代码，但我遇到了同样的问题。好吧，取决于图片！

我找到了这个： [http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html) 和 [http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

与此：“为避免 java.lang.OutOfMemory 异常，请在解码之前检查位图的尺寸，除非您绝对相信源可以为您提供可预测大小的图像数据，这些数据可以舒适地适合可用内存。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:24:41.293

有时图像对于位图来说太大了，因此获取位图的一种方法是缩小图像。在这个网站上是一个很好的例子，它对我很有用

[http://twigstechtips.blogspot.com/2011/10/android-resize-bitmap-image-while.html](http://twigstechtips.blogspot.com/2011/10/android-resize-bitmap-image-while.html)

# php - 来自 Jquery 的数据收集

> ID：13973937
> 
> 赞同：-1
> 
> 时间：2012-12-20T14:07:37.543
> 
> 标签：php, jquery, ajax

我如何从 jquery 获取数据选择数据并将其传递到另一个页面，page2.php 到 page3.php。我只想将它保存在一个变量中并发布它，从 page3.php 我将获取数据。

```
function refreshPrices() {

   var beg=<?php echo isset($beg) ? $beg : 0 ?>;
   var inte=<?php echo isset($int) ? $int : 0 ?>;
   var advn=<?php echo isset($adv) ? $adv : 0 ?>;
   var currentTotalValue = 0;
    currentTotalValue = currentTotalValue + beg + inte + advn;
    $("#results div").each(function() {
        if (!isNaN(parseInt($(this).find("span").text().substring(1)))) {
            currentTotalValue += parseInt($(this).find("span").text().substring(1));
        }
    });

    $("#totalValue").text("$" + currentTotalValue)
}

$(document).ready(function() {

    $('#1').click(function() {
        //var row = $(this);
        if (($(this).attr('checked')) == 'checked') {
            $('#result').append("-PDF Document <html><span style=float:right>$100</span></html>");
        }
        else {
            $('#result').text("");
        }

        refreshPrices()

    });

    $('#2').click(function() {
        if (($(this).attr('checked')) == 'checked') {
            $('#result2').append("-Video <html><span style=float:right>$200</span></html> ");
        }
        else {
            $('#result2').text("");
        }

        refreshPrices()
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:21:23.097

```
window.location("page3.php?q="+data); 
```

其中data是需要传递给其他页面的数据

# c# - sql查询根据条件对一列中的相同值进行分组

> ID：13973941
> 
> 赞同：2
> 
> 时间：2012-12-20T14:07:59.390
> 
> 标签：c#, sql, sql-server-2008

根据这张表

```
Field1 field2 field3
10     x      10.x.value
10     y      10.x.valua
11     x      11.x.value
11     y      11.x.value 
```

对于每个 Field1（10 和 11）...检查 x 和 y 值（field3）。如果连 1 都失败了，那么 field1 就没有用了

所以我明白了

```
Field   index1       index2 
10      10.x.value   10.y.value  
11      11.x.value   11.y.value 
```

到目前为止我有这个 sql

```
select distinct a.id as 'Id Arquivo', b.idIndice, b.valor from tgpwebged.dbo.sistema_Documentos as a
join tgpwebged.dbo.sistema_Indexacao as b on a.id = b.idDocumento
join tgpwebged.dbo.sistema_DocType as c on a.idDocType = c.id
join tgpwebged.dbo.sistema_DocType_Index as d on c.id = d.docTypeId
where d.docTypeId = 40 and (b.idIndice = 11 AND b.valor = '11111111' OR b.idIndice = 12 AND b.valor = '11111' ) 
```

**编辑：**

这是我的结果集

```
id  idIndice    valor
13  11          11111111
13  12          11111
14  11          11111111
14  12          11111
16  12          11111 
```

索引 16 没有 idIndice 11 = '11111111' 所以不应该显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:13:27.520

编辑＃1：根据您的编辑，您可能可以使用以下内容：

```
select a.id as 'Id Arquivo', 
    b.idIndice, 
    b.valor
from tgpwebged.dbo.sistema_Documentos as a
join tgpwebged.dbo.sistema_Indexacao as b 
    on a.id = b.idDocumento
join tgpwebged.dbo.sistema_DocType as c 
    on a.idDocType = c.id
join tgpwebged.dbo.sistema_DocType_Index as d 
    on c.id = d.docTypeId
where d.docTypeId = 40 
    and (b.idIndice = 11 AND b.valor = '11111111' 
         OR b.idIndice = 12 AND b.valor = '11111')
group by a.id, b.idIndice, b.valor
having count(distinct b.idIndice) = 2 
```

~~虽然尚不清楚您要做什么。看起来您想要`PIVOT`与此类似的数据：~~

 ~~```
select *
from
(
  select distinct a.id as 'Id Arquivo', 
    --b.idIndice, 
    b.valor,
    'index'+cast(row_number() over(partition by a.id order by b.idIndice) as varchar(10)) rn
  from tgpwebged.dbo.sistema_Documentos as a
  join tgpwebged.dbo.sistema_Indexacao as b 
    on a.id = b.idDocumento
  join tgpwebged.dbo.sistema_DocType as c 
    on a.idDocType = c.id
  join tgpwebged.dbo.sistema_DocType_Index as d 
    on c.id = d.docTypeId
  where d.docTypeId = 40 
    and (b.idIndice = 11 AND b.valor = '11111111' 
         OR b.idIndice = 12 AND b.valor = '11111')
) src
pivot
(
  max(valor)
  for rn in (Index1, Index2)
) piv 
```~~

# c# - NHibernate：标准/子标准投影

> ID：13973942
> 
> 赞同：4
> 
> 时间：2012-12-20T14:08:12.363
> 
> 标签：c#, nhibernate

我有一个类 Mod，它有一个成员：

```
ICollection<Event> EventList 
```

Event 类有一个成员：

```
public virtual EventType Type { get; set; } 
```

EvenType 类有成员：

```
 public virtual int Id 
```

我想使用 NHibernate Criteria 获取 Mod 中 ID 为 1 或 2 的所有事件的列表。我这样做了：

```
var subCriteria = DetachedCriteria.For<Mod>()
    .Add(Restrictions.In("Event.Type", new int[] {1, 2 })
    );
criteria.Add(Subqueries.Exists(subCriteria)); 
```

但我得到一个运行时错误，说不能在没有投影的条件上使用子查询。

所以，很好，但我不知道为投影放什么。我可以找到如何进行投影的示例，但没有什么能真正解释其目的。我尝试了各种方法，但都导致运行时错误：

*消息：值不能为空。参数名称：key 来源：mscorlib 帮助链接：ParamName：key*

我需要使用子查询，因为当它起作用时我会添加更多。

你能建议对投影做什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T14:39:32.920

如此处所述：[16.4。关联](http://nhforge.org/doc/nh/en/index.html#queryqueryover-associations)可以这样做：

```
IQueryOver<Mod, Event> query = session
  .QueryOver<Mod>()
  .JoinQueryOver<Event>(mod => mod.EventList)
  .WhereRestrictionOn(evnt => evnt.Type.Id).IsIn(new object[] { 1, 2});

var result = query.List<Mod>(); 
```

编辑：纯标准 API：

```
var criteria = session.CreateCriteria<Mod>();
var sub = criteria.CreateCriteria("EventList", JoinType.LeftOuterJoin);
    sub.Add(new InExpression("Type", new object[] { 1, 2 }));

var result = criteria.List<Mod>(); 
```

使用分离的标准。在这种情况下，`EventType`必须具有对实例的属性`ModId`或引用。`Mod`在子查询中，我们必须返回有效 Mod.ID 的列表

```
var sub = DetachedCriteria
 .For<Event>()
 .Add(Restrictions.In("Type", new int[] {1, 2 })) // WHERE
 .SetProjection(Projections.Property("ModId")); // Mod.ID the SELECT clause

var criteria = session.CreateCriteria<Mod>();
criteria.Add(Subqueries.PropertyIn("ID", sub)); // Mod.ID in (select
var result = criteria.List<Mod>(); 
```

# windows - 在适用于 Windows Surface 的 Windows 商店应用程序中锁定用户屏幕

> ID：13973944
> 
> 赞同：0
> 
> 时间：2012-12-20T14:08:13.613
> 
> 标签：windows, windows-8, windows-store-apps, locking, screen

我正在为 Windows Surface RT 开发应用程序。我需要以编程方式（通过 c#）锁定设备屏幕。我搜索了 MSDN 和各种形式但徒劳无功。请帮我弄清楚这个要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:26:02.503

您不能从 Windows 应用商店应用程序强制屏幕“锁定”。它只是不是一个可用的 API。

# ruby-on-rails - 炼油厂 CMS 查询 - 渲染时 content_for 的 NoMethodError ：正文内容

> ID：13973947
> 
> 赞同：3
> 
> 时间：2012-12-20T14:08:27.747
> 
> 标签：ruby-on-rails, ruby, content-management-system, refinery

我在我的应用程序中使用“refinerycms-inquiries”gem 在我的联系页面上进行查询。

我遇到的问题是，虽然我可以使用`<%= raw @page.content_for(:body) %>`其他页面上的代码来呈现内容，但我不知道为什么我会在查询#new 视图中得到这个。也许有人可以帮助我更快地解决这个问题，因为我已经在互联网上寻找了几个小时的答案并查看了源代码。

这是错误：

```
 NoMethodError in Refinery/inquiries/inquiries#new 
undefined method `content_for' for nil:NilClass

Extracted source (around line #3):

1: <% content_for :body do %>
2:     <div>
3:       <%= raw @page.content_for(:body) %>
4:     </div>
5: <% end %>
6: 
```

我不得不提到我对炼油厂和 RoR 有点陌生。

这是我的炼油厂/inquiries/inquiries/new.html.erb 文件：

```
<% content_for :body do %>
    <div class="contact">
      <%= raw @page.content_for(:body) %>
    </div>
<% end %>

<% content_for :body_content_left do %>
    <div class='inquiries'>
      <%= form_for [refinery, :inquiries, @inquiry] do |f| %>
          <%= render :partial => "/refinery/admin/error_messages",
                     :locals => {
                             :object => @inquiry,
                             :include_object_name => true
                     } %>
          <div class="field">
            <%= f.required_label :name, :class => 'placeholder-fallback' %>
            <%= f.text_field :name, :class => 'text', :required => 'required', :placeholder => t('name', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') %>
          </div>
          <div class="field">
            <%= f.required_label :email, :class => 'placeholder-fallback' %>
            <%= f.email_field :email, :class => 'text email', :required => 'required', :placeholder => t('email', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') %>
          </div>
          <div class="field">
            <%= f.label :phone, :class => 'placeholder-fallback' %>
            <%= f.text_field :phone, :class => 'text phone', :placeholder => t('phone', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') %>
          </div>
          <div class='field message_field'>
            <%= f.required_label :message, :class => 'placeholder-fallback' %>
            <%= f.text_area :message, :rows => 8, :required => 'required', :placeholder => t('message', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') %>
          </div>
          <div class="actions">
            <%= f.submit t('.send') %>
          </div>
      <% end %>
    </div>
<% end %>
<%= render :partial => "/refinery/content_page" %> 
```

这是我的inquiries_controller.rb：

```
module Refinery
  module Inquiries
    class InquiriesController < ::ApplicationController

      before_filter :find_page, :only => [:create, :new]

      def thank_you
        @page = ::Refinery::Page.find_by_link_url("/contact/thank_you")
      end

      def new
        @inquiry = ::Refinery::Inquiries::Inquiry.new
      end

      def create
        @inquiry = ::Refinery::Inquiries::Inquiry.new(params[:inquiry])

        if @inquiry.save
          if @inquiry.ham?
            begin
              ::Refinery::Inquiries::InquiryMailer.notification(@inquiry, request).deliver
            rescue
              logger.warn "There was an error delivering an inquiry notification.\n#{$!}\n"
            end

            begin
              ::Refinery::Inquiries::InquiryMailer.confirmation(@inquiry, request).deliver
            rescue
              logger.warn "There was an error delivering an inquiry confirmation:\n#{$!}\n"
            end if ::Refinery::Inquiries::Setting.send_confirmation?
          end

          redirect_to refinery.thank_you_inquiries_inquiries_path
        else
          render :action => 'new'
        end
      end

      protected

      def find_page
        @page = ::Refinery::Page.find_by_link_url("/contact")
      end

    end
  end
end 
```

这是由“refinerycms-inquiries”gem 生成的 config/routes.rb 部分：

```
Refinery::Core::Engine.routes.draw do
    namespace :inquiries, :path => '' do
      get '/contact', :to => 'inquiries#new', :as => 'new_inquiry'

      resources :contact,
                :only => :create,
                :as => :inquiries,
                :controller => 'inquiries' do
        get :thank_you, :on => :collection
      end

      namespace :admin, :path => 'refinery' do
        resources :inquiries, :only => [:index, :show, :destroy] do
          get :spam, :on => :collection
          get :toggle_spam, :on => :member
        end

        scope :path => 'inquiries' do
          resources :settings, :only => [:edit, :update]
        end
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:20:25.510

看来我找到了问题所在。

事实证明，inquiries_controller 中的 ::Refinery::Page.find_by_url 方法返回 nil，我不得不像这样重写 find_page 和thank_you 方法：

```
 def thank_you
     @page = ::Refinery::Page.find_by_path("/contact/thank_you")
  end

  def find_page
     @page = ::Refinery::Page.find_by_path(/contact")
  end 
```

为了在我的联系人视图中呈现 :body 和 :side_body 内容。我还注意到，通过这种修改，不需要在我的炼油厂/查询/查询/new.html.erb 文件中明确指定来呈现 content_for(:body)。

所以新视图看起来就像 gem 中的默认视图：

```
<% content_for :body_content_left do %>
    <div class='inquiries'>
      <%= form_for [refinery, :inquiries, @inquiry] do |f| %>
          <%= render :partial => "/refinery/admin/error_messages",
                     :locals => {
                             :object => @inquiry,
                             :include_object_name => true
                     } %>
          <div class="field">
            <%= f.required_label :name, :class => 'placeholder-fallback' %>
            <%= f.text_field :name, :class => 'text', :required => 'required', :placeholder => t('name', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') %>
          </div>
          <div class="field">
            <%= f.required_label :email, :class => 'placeholder-fallback' %>
            <%= f.email_field :email, :class => 'text email', :required => 'required', :placeholder => t('email', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') %>
          </div>
          <div class="field">
            <%= f.label :phone, :class => 'placeholder-fallback' %>
            <%= f.text_field :phone, :class => 'text phone', :placeholder => t('phone', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') %>
          </div>
          <div class='field message_field'>
            <%= f.required_label :message, :class => 'placeholder-fallback' %>
            <%= f.text_area :message, :rows => 8, :required => 'required', :placeholder => t('message', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') %>
          </div>
          <div class="actions">
            <%= f.submit t('.send') %>
          </div>
      <% end %>
    </div>
<% end %>
<%= render :partial => "/refinery/content_page" %> 
```

如果有人遇到同样的问题，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:01:41.493

问题是在您的相应控制器的操作中缺少@page 的定义（在您的情况下为“新建”和“创建”）。我可以看到 @inquiry 实例化。尝试添加语句

```
 @page = ::Refinery::Page.find_by_link_url("/contact") 
```

在 InquriesController 的“新建”和“创建”操作中。

我有点好奇，你用的是什么版本的炼油厂？（奇怪的是，refinerycms-inquiries gem 如何在 routes.rb 中生成内容，假设它是一个可安装的引擎）。

# teradata - 解释 Teradata 中的查询带

> ID：13973948
> 
> 赞同：4
> 
> 时间：2012-12-20T14:08:29.497
> 
> 标签：teradata

谁能解释 Teradata 中的查询带？我已经对此进行了很多搜索，但无法获得我能理解的信息。请详细一点。

谢谢！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T10:41:58.907

**TeraDATA 中的查询条带：**

Query Banding 提供了间接的工作流程信息。

**概念：**

科学家们经常会用设备将鸟类的腿绑起来，以跟踪它们的飞行路径。监测和分析通过波段检索到的数据可提供有关该物种的关键信息。

DBA 遵循相同的过程，他们需要更多关于查询的信息而不是可用信息。

元数据——例如请求用户的名称、工作单位和应用程序名称很重要，工作负载管理将跟踪数据仓库的整个使用和查询故障排除。查询绑定功能的使用方式是，这些元数据详细信息链接到数据库中的查询。

查询带可以包含任意数量的名称或值对，例如启动用户的公司 ID、部门和位置，以及启动执行开始的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-06T10:29:24.537

Prashanth 提供了一个很好的类比鸟类和乐队。亚当要求的是具体情况。当查询条带可能非常有用时，我可以提出几个示例：

1.  数百名用户通过具有自定义应用程序或报告应用程序（如 Business Objects、Tableau 或 Qlikview）的应用程序服务器使用您的系统。应用程序服务器使用一个用户 ID 连接到 Teradata，但是管理员仍然想知道每个查询是由哪些用户、部门和用户组生成的，以便稍后在 DBQL 中进行分析，或者只是使用 TASM 分配适当的系统资源。为此，可以配置应用程序，使每个查询都与“AppUser:User1;Appgroup:DataScientists;QueryType:strategic02”等信息“捆绑”在一起。尽管 Application Server 使用一个 Teradata 用户和有限数量的连接来路由来自数百个用户的所有查询，每个单独的查询都标有确切的用户发起查询的信息。然后，您可以根据此信息执行各种分析。

2.  假设您有一个复杂的 ETL 应用程序，并且您想要跟踪和分析您的负载执行——什么和什么时候出错了。通常您需要记录 ETL 流程的所有步骤，并且在日志中您必须指定唯一的加载 ID、流程 ID、步骤 ID 等。您这样做是因为您希望能够了解导致此停止的特定流程或性能下降，如果没有此类日志记录，就无法区分 ETL 应用程序的不同运行之间相同步骤的运行。一个不错的选择是打开 DBQL 并使用带有负载 ID、进程 ID、步骤 ID 等的 Query Band 信息来美化您的查询。这样您就可以在 DBQL 中获得所有必要的信息，而无需创建额外的复杂日志表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T11:13:01.877

```
SET QUERY BAND = 'name=value; name2=value;' FOR SESSION|TRANSACTION; 
```

这将使用一些名称值对标记您的查询。这可用于管理查询的工作负载管理，例如在 TDWM 中，您有节流阀和优先级管理挂钩，它们将优先考虑所有 name2 类型的值为“value”。这意味着您可以提交有关会话或事务的非常丰富的详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T02:18:57.670

是的，您所描述的可以使用 QueryBanding 轻松完成；将其视为“传输中的密钥对属性的货车”。例如，您可以通过 sql 或使用 bteq 或 jdbc 中的会话属性以语法方式访问它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-22T09:45:31.347

Necromancing...现有的答案很好地解释了查询带的工作原理，但由于我找不到完整的工作示例，我想在这里添加一个。

已经介绍了在 Teradata 中设置查询范围，因此我将提供一个示例来说明如何从 .NET 客户端设置它们：

```
private void SetQueryBands()
{
     TdQueryBand qb = Connection.QueryBand;
     qb["CustomApplicationName"] = "MyAppName";
     foreach (string key in CustomQueryBands.Keys)
     {
         qb[key] = CustomQueryBands[key];
     }

     Connection.ChangeQueryBand(qb);
} 

Connection = new TdConnection(GetConnectionString());
Connection.Open();
SetQueryBands(); 
```

更多细节可以在[这里](https://developer.teradata.com/doc/connectivity/tdnetdp/15.11/help/Teradata.Client.Provider~Teradata.Client.Provider.TdQueryBand.html)找到。

要检索存储的查询带数据，可以使用[GetQueryBandValue函数：](http://GetQueryBandValue)

```
SELECT CollectTimestamp, QueryBand,
   GetQuerybandValue(queryband, 0, 'Key1') AS Value1, 
   GetQuerybandValue(queryband, 0, 'Key2') AS Value2, 
   GetQuerybandValue(queryband, 0, 'Key3') AS Value3, 
FROM dbql_data.dbqlogtbl
WHERE dateofday = DATE - 1
   AND queryband LIKE '%somekeyorvalue%' 
```

# c++ - 循环时从文件函数读取 C++ 无法退出

> ID：13973949
> 
> 赞同：0
> 
> 时间：2012-12-20T14:08:30.640
> 
> 标签：c++, while-loop, eof

> **可能重复：**
> [C++ 中的文件结尾](https://stackoverflow.com/questions/1494342/end-of-file-in-c)

我编写了一个从 .txt 文件中读取数据的函数，但是当我调用它时，它一直在崩溃。这是代码：

```
void beolvas(vector<int> &charge, vector<int> &deliver, vector<Robot*> &robots) {
    string s;
    ifstream f;

    do {
        cout << "Add meg a filenevet" << endl;
        cin >> s;
        f.open(s.c_str());
    } while (!f.good());

    cout << "adatok beolvasasa..." << endl;

    int napok;
    if (!(f >> napok)) throw 1;
    charge.resize(napok);
    deliver.resize(napok);

    for (int i = 0; i<napok; i++) {
        if (!(f>>charge[i])) throw 1;
        if (!(f>>deliver[i])) throw 1;
    }

    string type, name;
    int battery;
    while (!f.eof()) {
        cout << " a ";
        if (f>>type && f>>name && f>>battery) {
            if (type=="Mac") {
                Mac r = Mac(name,battery);
                robots.push_back(&r);
            };
            if (type=="Eco") {
                Eco r = Eco(name,battery);
                robots.push_back(&r);
            };
            if (type=="Pro") {
                Pro r = Pro(name,battery);
                robots.push_back(&r);
            };
        };
    };
} 
```

似乎问题发生在while循环中。如果我想从 3 行长的文本中读取，我会在屏幕上看到 4 个字母（我让程序在读取每一行之前打印一个）。

是`f.eof()`不是我这里需要用到的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:13:11.770

这是读取文件时最常见的问题之一。检查`f.eof()`只会告诉您*之前*的读取是否到达文件末尾。因此，在最后一次成功读取之后（您打印了第三个“a”），`eof()`返回 false 并且您的循环再执行一次，输出一个额外的“a”。

相反，使用您的提取线作为`while`循环的条件：

```
while (f>>type && f>>name && f>>battery) {
    if (type=="Mac") {
        Mac r = Mac(name,battery);
        robots.push_back(&r);
    }
    if (type=="Eco") {
        Eco r = Eco(name,battery);
        robots.push_back(&r);
    }
    if (type=="Pro") {
        Pro r = Pro(name,battery);
        robots.push_back(&r);
    }
} 
```

这是有效的，因为只要您的一个提取到达文件末尾，`while`条件就会为假并且循环不会执行。

如果您想在格式错误的行之后继续，我建议您`std::getline`改用：

```
std::string line;
while (std::getline(f, line)) {
  std::stringstream ss(line);
  if (ss >> type && ss >> name && ss >> battery) {
    // ...
  }
} 
```

使用这种`std::getline`方法的原因是，如果半行的格式正确，您就会遇到问题。您的方法可能会读入`type`然后`name`失败，`battery`并且循环的下一次迭代将从同一个地方开始。

您还会遇到问题，因为您将指向具有自动存储持续时间的对象的指针推送到某些向量中。当创建对象的块结束时，指针将指向无效对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:19:28.763

这是一个[常见问题解答](http://c-faq.com/stdio/feof.html)。在 C/C++ 中，文件结束条件仅在您尝试读取*结束*后触发。因此，您不能从 feof() == false 假设输入可用（因为您可能正好位于文件末尾，但*尚未*超过它）。您应该始终在读取操作*后*测试有效输入。

# multidimensional-array - scikit-learn（python）中的符号识别，如手写数字示例

> ID：13973952
> 
> 赞同：0
> 
> 时间：2012-12-20T14:08:43.460
> 
> 标签：multidimensional-array, numpy, python-2.7, machine-learning, scikit-learn

我注意这个例子：[http](http://scikit-learn.org/stable/auto_examples/plot_digits_classification.html#example-plot-digits-classification-py) : //scikit-learn.org/stable/auto_examples/plot_digits_classification.html#example-plot-digits-classification-py 关于 scikit-learn python 库中的手写数字。

我想准备一个 3d 数组 (N * a* b)，其中 N 是我的图像编号 (75)，a* b 是图像的矩阵（如示例中的 8x8 形状）。我的问题是：我对每个图像都有不同形状的标志：(202, 230), (250, 322).. 并给我这个错误： **ValueError: array dimensions must agree except for d_0** in this code：

```
#here there is the error:
grigiume = np.dstack(listagrigie)
print(grigiume.shape)
grigiume=np.rollaxis(grigiume,-1)
print(grigiume.shape) 
```

有一种方法可以以标准尺寸（即 200x200）调整所有图像的大小，或者有一个 3d 数组与矩阵（a，b），其中 a ！= 来自 b 并且不要在此代码中给我一个错误：

```
data = digits.images.reshape((n_samples, -1))
classifier.fit(data[:n_samples / 2], digits.target[:n_samples / 2]) 
```

我的代码：

```
import os
import glob
import numpy as np
from numpy import array
listagrigie = []

path = 'resize2/'
for infile in glob.glob( os.path.join(path, '*.jpg') ):
    print("current file is: " + infile )
    colorato = cv2.imread(infile)
    grigiscala = cv2.cvtColor(colorato,cv2.COLOR_BGR2GRAY)
    listagrigie.append(grigiscala)

print(len(listagrigie))

#here there is the error:
grigiume = np.dstack(listagrigie)
print(grigiume.shape)
grigiume=np.rollaxis(grigiume,-1)
print(grigiume.shape)

#last step
n_samples = len(digits.images)
data = digits.images.reshape((n_samples, -1))

# Create a classifier: a support vector classifier
classifier = svm.SVC(gamma=0.001)

# We learn the digits on the first half of the digits
classifier.fit(data[:n_samples / 2], digits.target[:n_samples / 2])

# Now predict the value of the digit on the second half:
expected = digits.target[n_samples / 2:]
predicted = classifier.predict(data[n_samples / 2:])

print "Classification report for classifier %s:\n%s\n" % (
classifier, metrics.classification_report(expected, predicted))
print "Confusion matrix:\n%s" % metrics.confusion_matrix(expected, predicted)

for index, (image, prediction) in enumerate(
    zip(digits.images[n_samples / 2:], predicted)[:4]):
    pl.subplot(2, 4, index + 5)
    pl.axis('off')
    pl.imshow(image, cmap=pl.cm.gray_r, interpolation='nearest')
    pl.title('Prediction: %i' % prediction)

pl.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:49:11.970

您必须将所有图像的大小调整为固定大小。例如使用`Image`PIL 或[Pillow](http://pypi.python.org/pypi/Pillow/)类：

```
from PIL import Image
image = Image.open("/path/to/input_image.jpeg")
image.thumbnail((200, 200), Image.ANTIALIAS)
image.save("/path/to/output_image.jpeg") 
```

**编辑**：以上不起作用，请尝试`resize`：

```
from PIL import Image
image = Image.open("/path/to/input_image.jpeg")
image = image.resize((200, 200), Image.ANTIALIAS)
image.save("/path/to/output_image.jpeg") 
```

**编辑 2**：可能有一种方法可以保留纵横比并用黑色像素填充其余部分，但我不知道在几个 PIL 调用中该怎么做。不过，您可以使用`PIL.Image.thumbnail`和使用 numpy 进行填充。

# java - 使用 YourKit 打开 Hadoop HPROF .profile 文件

> ID：13973953
> 
> 赞同：1
> 
> 时间：2012-12-20T14:08:47.280
> 
> 标签：java, hadoop, profiling, hprof, yourkit

[YourKit 声称能够打开二进制 HPROF 转储，](http://www.yourkit.com/docs/70/help/memory_profiling/hprof_snapshots.jsp)但它坚持认为从 Hadoop 作业生成的二进制转储不是有效的快照。

转储是通过将`mapred.task.profile.params`选项指定为`-agentlib:hprof=cpu=samples,heap=sites,depth=6,force=n,thread=y,verbose=n,file=%s,format=b`（如 Hadoop：The Definitive Guide 中所指定）来进行的。

有什么方法可以用 YourKit 打开这个文件吗？是否有其他图形分析工具可以打开创建的文件？

# intuit-partner-platform - oAuth 的更改允许多个用户使用相同的 qb 应用程序

> ID：13973954
> 
> 赞同：2
> 
> 时间：2012-12-20T14:08:48.690
> 
> 标签：intuit-partner-platform

我一直致力于构建一个 intuit quickbooks 在线应用程序。在此期间，我一直在使用同一个 quickbooks 公司帐户上的多个用户来测试应用程序的初始流程。这一切都很好，直到 2012 年 12 月 20 日我开始收到此错误：

哎呀！发生了错误。

请关闭此窗口并重试。

错误代码：invalid_database 消息：该应用程序已被该公司的其他用户订阅

最近有什么变化吗？或者有没有办法配置应用程序以允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T00:02:52.737

我不明白你的用例。只有 QuickBooks 的管理员可以设置同步或授予第三方应用程序的访问权限。您会知道该用户属于同一家公司，并且您还会知道该公司是否已被授予访问权限。所以不应该有混淆。随机用户不会授权访问

问候
贾里德

# java - 使用连接到 mysql 的 java 创建登录表单

> ID：13973958
> 
> 赞同：2
> 
> 时间：2012-12-20T14:08:57.627
> 
> 标签：java, mysql, connector-j

我使用 netbeans 创建了一个 java 登录框架，并使用 MySQL Connector/J 将其连接到 MySQL，jar 文件已添加到项目库中。我还创建了一个名为 login 的表，其中包含所有登录详细信息。以下代码应该允许登录，但我不断收到错误，好像没有建立与数据库的连接一样。

```
package Lightapp;
import java.sql.* ;
import javax.swing.* ;

public class AbbeyLog extends javax.swing.JFrame
{
    Connection conn = null;
    ResultSet rs = null;
    PreparedStatement pst = null;

    /**
     * Creates new form AbbeyLog
     */
    public AbbeyLog()
    {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    private void textuserActionPerformed(java.awt.event.ActionEvent evt)
    {
        // TODO add your handling code here:
        String sql = "select * from login where username = ? and password = ?";
        try
        {
            pst = conn.prepareStatement(sql);
            pst.setString(1, textuser.getText());
            pst.setString(2, textpass.getText());
            rs = pst.executeQuery();
            if (rs.next())
            {
                JOptionPane.showMessageDialog(null, "Username and Password correct");
            }
            else
            {
                JOptionPane.showMessageDialog(null, "invalid username and password");
            }
        }
        catch (Exception e)
        {
            JOptionPane.showMessageDialog(null, e);
        }
    }

    private void textuserMouseClicked(java.awt.event.MouseEvent evt)
    {
        // TODO add your handling code here:
    }

    public static void main(String args[])
    {
        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                new AbbeyLog().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify
    private javax.swing.JButton jButton2;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField textpass;
    private javax.swing.JButton textuser;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:18:42.880

您需要在启动时创建一个 jdbc 连接：

```
//load the driver
Class.forName("com.mysql.jdbc.Driver").newInstance();
// create a connection         
conn = DriverManager.getConnection("jdbc:mysql://"+hostName+":"
                + dbPort+"/"+databaseName+"?"+"user="+dbUser+"&password=" + dbPassword); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:58:52.350

一个好的方法是创建一个名为 dbConnection 的单独文件，例如。该文件将包含连接到数据库的方法。通常它看起来像这样：

```
public class DBConnection{

  Connection con = null;
  Statement stmt = null;
  ResultSet rs = null;

public DBConnection() {}

public void connect() {
    try {
        Class.forName("net.sourceforge.jtds.jdbc.Driver");
        con=DriverManager.getConnection("jdbc:jtds:sqlserver://adress:port;DatabaseName=dbName", "login", "passwd");
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

然后在你的主要课程中你做：

```
dbConnection db=new dbConnection();
db.connect; 
```

# c# - 重新安装 Visual Studio 2010 后缩进发生了变化

> ID：13973961
> 
> 赞同：0
> 
> 时间：2012-12-20T14:09:06.100
> 
> 标签：c#, visual-studio-2010, visual-studio

当我在 Visual Studio 2010 中编辑 C# 文件时，它看起来不错，但是当我在另一个 IDE 中打开它或推送到 github 时，我注意到缩进是错误的。它发生在我重新安装 Visual Studio 之后。

知道如何再次上线吗？我不记得在以前的安装中更改了任何缩进选项，而且这次我也绝对没有做任何事情。

**更新：**

错误的意思是这个（伪造的，因为如果复制/粘贴它就不能了）：

```
 _req = (HttpWebRequest)WebRequestCreator.ClientHttp.Create(new Uri(_options["url"]));
     _req.Method = _options["method"];
// disable buffering (this only works for ClientHttp version)
     //_req.AllowWriteStreamBuffering = false; // causes silent crash on Mac OS X 10.8.x 
```

在 Visual Studio 中它看起来不错。基本上我添加的任何新行（以前安装中创建的文件中不存在），我都会得到奇怪的缩进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:12:11.247

可能在您之前安装的 VS 中，您的选项卡有不同的设置。
现在，重新安装将所有内容重置为默认设置。

检查菜单`Tools, ->Options, ->Text Editor, ->C#, Tabs`
并尝试不同的设置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:12:21.067

您可以通过转到工具 --> 选项 --> 文本编辑器 --> C# 来更改 Visual Studio 中文本的自动格式。

您可以在选项卡子菜单和 --> 格式 --> 缩进中更改缩进的方式。

# javascript - 从网站存储数据的最简单方法（在服务器端）

> ID：13973963
> 
> 赞同：17
> 
> 时间：2012-12-20T14:09:12.817
> 
> 标签：javascript, html

我有一个非常简单的网站（实际上是单页），有一个输入字段和一个按钮。
我需要将用户提交的数据存储在服务器端的某个地方。完美的方法可以是简单的文本文件，并在每次单击按钮后附加新行。日志文件也可以。
据我了解，JavaScript 本身是不可能的。我正在寻找*最简单的解决方案*，最好没有服务器端编程（但如果需要，它应该尽可能简单并且开箱即用）。如果有帮助，我可以使用一些辅助服务。
请帮忙。
提前致谢。

UPD。只想重新表述主要问题。我真的不需要在服务器端存储一些东西。我需要从用户那里收集一些输入。是否可以？例如，如果它只是发送到我的电子邮件也可以。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T14:15:10.313

对于一个非常简单的表单到服务器日志脚本：

你的表格：

```
<form action="save-to-log.php" method="POST">
  <fieldset>
    <legend>Add to log</legend>
    <p>
      Message:
      <textarea name="message"></textarea>
    </p>
    <p>
      <input type="submit" value="SAVE" />
    </p>
  </fieldset>
</form> 
```

然后**保存到log.php**

```
<?php
  $log_file_name = 'mylog.log'; // Change to the log file name
  $message = $_POST['message']; // incoming message
  file_put_contents($log_file_name, $message, FILE_APPEND);
  header('Location: /'); // redirect back to the main site 
```

如果它是 unix 主机，则需要向日志目录添加 755 权限，以便 PHP 有权对其进行写入。除此之外，您将拥有一个不断将信息附加到`mylog.log`.

**跟进**

如果您不一定需要将其存储在服务器上（您提到了电子邮件），则可以使用以下内容作为 PHP 脚本：

```
<?php
  $to_email = 'kardanov@domain.com';
  $subject = 'User feedback from site';
  $message = $_POST['message'];

  // this may need configuring depending on your host. If you find the email isn't
  // being sent, look up the error you're receiving or post another question here on
  // SO.
  mail($to_email, $subject, $message);

  header('Location: /'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:13:04.493

如果没有某种服务器端脚本，您将无法在服务器上存储信息。

有**两个**不同的地方来存储数据，在客户端和服务器上。

在**客户端，从 cookie 到**[Store.js](http://github.com/marcuswestin/store.js)有很多方法，但是听起来您想将信息存储在服务器上。

要存储在**服务器**上，您需要某种可以从 javascript/http 接收帖子并将它们保存在文件中的应用程序。

在您的情况下，如下所示的非常简单的 PHP 脚本将是完美的：

```
<?php

//Was the request (post or get) parameter data supplied?
if(!empty($_REQUEST['data']) {
    $file = 'log.txt';
    $data = $_REQUEST['data']."\n";

    // using the FILE_APPEND flag to append the content to the end of the file
    // and the LOCK_EX flag to prevent anyone else writing to the file at the same time
    file_put_contents($file, $data, FILE_APPEND | LOCK_EX);

}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:13:13.543

如何使用 PHP 将 JSON 转储到文件中，然后根据请求加载它？

[如何使用 PHP 安全地将 JSON 数据写入文件](https://stackoverflow.com/questions/6187052/how-to-safely-write-json-data-to-file-using-php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-21T01:47:59.167

如果您想将数据发送到您的电子邮件地址，有几种免费服务可以在不安装任何服务器端应用程序的情况下完成此操作... PHP 或 CGI 脚本仍在使用，但它由服务托管，而不是由你，你所要做的就是将一些代码粘贴到你的网站，然后所有提交的数据都会发送到你的电子邮件地址。，

很多人自己不知道如何做到这一点，或者他们的托管服务将不允许发送邮件工作。这就是这些服务存在的原因。当然，它们中的大多数都受到您从表单中获得的电子邮件中放置的广告的支持。

无论如何，这是我找到的优质服务的链接。您还可以谷歌“自由表单处理”来查找更多信息。

[https://secure.tectite.com/hf/auth/GetStarted?WWWTECTITE](https://secure.tectite.com/hf/auth/GetStarted?WWWTECTITE)

希望这可以帮助。

# cloud-foundry - Cloudfoundry 上的 Sidekiq Workers

> ID：13973965
> 
> 赞同：1
> 
> 时间：2012-12-20T14:09:21.257
> 
> 标签：cloud-foundry, sidekiq

我已阅读[有关 Cloud Foundry 上的后台任务](http://support.cloudfoundry.com/entries/20378173-support-for-background-tasks-resque-delayed-job-cron)的可用文档。但这对如何将 sidekiq 部署到 cloudfoundry 没有帮助？

我怎么跑， `bundle exec sidekiq`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:33:53.637

当您推送应用程序时，不要为框架选择“Rails”，而是选择“其他”，然后选择“独立”，然后会提示您输入启动应用程序的命令，这是您要输入的地方`bundle exec sidekiq`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T03:32:49.413

尝试创建一个新清单 ( `manifest.worker.yml`) 并包含以下内容：

```
applications:
  .:
    name: APPNAME-worker
    framework:
      name: standalone
      info:
        mem: 64M
        description: Standalone Application
        exec: 
    url: 
    path: .
    runtime: ruby19
    command: bundle exec sidekiq -e production
    mem: 256M
    instances: 1
    services:
      APPNAME-postgresql:
        type: postgresql
      APPNAME-redis:
        type: redis 
```

现在开始你的 sidekiq 工作者：

```
vmc push --manifest manifest.worker.yml --path . 
```

这些服务应该与您在 Web 应用的 manifest.yml 中包含的服务相同

# ruby-on-rails - Ruby on Rails 的路由错误

> ID：13973971
> 
> 赞同：1
> 
> 时间：2012-12-20T14:09:28.153
> 
> 标签：ruby-on-rails, xml

我对 Ruby on Rails 还很陌生，我遇到了一个看似简单的问题，但我似乎无法弄清楚我做错了什么。我的主页有一个按钮，当您单击该按钮时，它应该创建一个包含数据库信息的 xml 文件。

按钮代码：

```
<%= button_to "Create Google File", :action => :create_google_file %> 
```

控制器代码：

```
class ProductsController < ApplicationController
  def new
  end

  def create_google_file    
      @products = Product.find(:all)
      file = File.new('dir.xml','w')
      doc = @products.to_xml

      file.puts doc
      file.close
  end
end 
```

我得到的错误是

```
No route matches {:action=>"create_google_file", :controller=>"products"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:17:33.500

将此添加到您的 config/routes.rb 文件中

```
match "/create_google_file" => "products#create_google_file", :as => :create_google_file 
```

并将按钮更改为此

```
<%= button_to "Create Google File", create_google_file_path %> 
```

# zend-framework - Zend Paginator 从字符串查询

> ID：13973972
> 
> 赞同：2
> 
> 时间：2012-12-20T14:09:28.777
> 
> 标签：zend-framework, zend-paginator

我对我的数据库进行了复杂的查询，我通过原始 SQL 查询运行。不使用zend orm。我想为我的查询添加 Zend Paginator。

从 Zend 文档中，我发现，我需要将所有记录提供给 Zend Paginator 适配器，`COUNT()`他`LIMIT`自己制作。

我有这样的情况：

```
$sql = 'complicated query'; //LIMIT added "by hand", I'd like to make it automatically via zend_paginator
$q = $db->fetchAll($sql, array(/*paramteres here*/)); 
```

现在我的问题是：我应该如何使用 Zend Paginator 进行分页？在我的情况下我应该使用哪个适配器？无法手动获取所有行并使用数组适配器（表中大约 50000 条记录）

任何帮助将不胜感激：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:12:27.760

您可以使用 Zend_Paginator_Adapter_Array 但这不是最好的方法。更好的方法是将查询重写为 Zend_Db_Select 并使用 Zend_Paginator_Adapter_DbSelect

# iphone - NSFetchedResultsController 返回具有另一个上下文的对象

> ID：13973981
> 
> 赞同：3
> 
> 时间：2012-12-20T14:10:11.693
> 
> 标签：iphone, objective-c, ios, nsfetchedresultscontroller, nsmanagedobjectcontext

为了从我为表格视图单元格调用 Entry 的实体获取信息，我有以下代码：

```
Entry *entry = [self.appDelegate.fetchedResultsController objectAtIndexPath:indexPath];

    NSLog(@"timeline entry contexts: %@ and %@", [[AppDelegate applicationDelegate] managedObjectContext], [entry managedObjectContext]); 
```

两个 managedObjectContexts 返回不同。这是我获取的结果控制器：

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Entry" inManagedObjectContext:[AppDelegate applicationDelegate].managedObjectContext];
    [fetchRequest setEntity:entity];

    [fetchRequest setFetchBatchSize:20];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"creationDate" ascending:NO];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[AppDelegate applicationDelegate].managedObjectContext sectionNameKeyPath:@"sectionIdentifier" cacheName:@"Root"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    self.fetchedResultsController.delegate = self;

    return _fetchedResultsController;
} 
```

这是我的 MOC：

```
- (NSManagedObjectContext *)managedObjectContext {

    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];

    if (coordinator != nil) {
        NSManagedObjectContext* moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];

        [moc performBlockAndWait:^{
            [moc setPersistentStoreCoordinator: coordinator];
            [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(mergeChangesFrom_iCloud:) name:NSPersistentStoreDidImportUbiquitousContentChangesNotification object:coordinator];
        }];
        _managedObjectContext = moc;

        _managedObjectContext.mergePolicy = [[NSMergePolicy alloc]
                                            initWithMergeType:NSMergeByPropertyObjectTrumpMergePolicyType];
    }

    return _managedObjectContext;
} 
```

我不确定为什么它会返回不同的 MOC。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:17:33.647

您可以在执行声明根的请求之前尝试清除缓存根

```
 [NSFetchedResultsController deleteCacheWithName:@"Root"];
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[AppDelegate applicationDelegate].managedObjectContext sectionNameKeyPath:@"sectionIdentifier" cacheName:@"Root"]; 
```

我最近遇到了类似的事情并解决了问题

# c# - C# CS0079 事件处理编译错误

> ID：13973984
> 
> 赞同：5
> 
> 时间：2012-12-20T14:10:24.487
> 
> 标签：c#, .net, events, compiler-errors

当我尝试运行以下代码时出现 CS0079 编译错误：

```
public delegate void MyClassEHandler(MyClassEParam param);

public class MyClassE
{
    public static event MyClassEHandler Error
    {
         add
         {
              MyClassE.Error = (MyClassEHandler)Delegate.Combine(MyClassE.Error, value);
         } 
    }
} 
```

错误：

> CS0079 : 事件`MyClassE.Error`只能出现在 += 或 -= 的左侧

搜索了一圈，但无法弄清楚如何解决它。

添加： if (MyClass.Error != null) 或 MyClass.Error(null, null);

得到相同的 CS0079 错误。

> CS0079 : 事件`MyClassE.Error`只能出现在 += 或 -= 的左侧

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:14:29.133

您不能设置事件，您可以在其上添加或删除处理程序。所以，正如错误所说，你应该这样做：

```
public delegate void MyClassEHandler(MyClassEParam param);

public static event MyClassEHandler Error
{
     add
     {
          MyClassE.Error += value;
     } 
     remove         
     {
          MyClassE.Error -= value;
     } 
} 
```

它`Delegate.Combine`会为你神奇地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:15:40.457

试试这个

```
public delegate void MyClassEHandler(MyClassEParam param);  
static MyClassEHandler error;

public static event MyClassEHandler Error
{
 add
 {
      MyClassE.error += (MyClassEHandler)Delegate.Combine(MyClassE.Error, value);
 } 

 remove
 {
      MyClassE.Error -= (MyClassEHandler)Delegate.Combine(MyClassE.Error, value);
 } 

} 
```

参考[c#事件和委托的拦截添加删除](http://www.gavaghan.org/blog/2007/07/25/intercepting-add-and-remove-of-c-event-delegates/)

# version-control - “bzr 检查”有什么作用？

> ID：13973985
> 
> 赞同：0
> 
> 时间：2012-12-20T14:10:28.780
> 
> 标签：version-control, command, bazaar

我最近看到了 Bazaar 命令`check`，但不确定它到底检查或验证了什么。谁能给我一些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:22:31.817

**有关“bzr check”的作用、工作原理和示例的更多信息：**

此命令检查有关分支和存储库存储的各种不变量，以检测数据损坏或 bzr 错误。只有在检测到问题时，工作树和分支检查才会给出输出。

[http://doc.bazaar.canonical.com/bzr.dev/en/user-reference/check-help.html](http://doc.bazaar.canonical.com/bzr.dev/en/user-reference/check-help.html)

如果您想深入了解它如何进行损坏检查，我想您可以查看源代码并开始阅读：

[http://wiki.bazaar.canonical.com/SourceDownloads](http://wiki.bazaar.canonical.com/SourceDownloads)

# css - CSS-强制单词换行而不是分词

> ID：13973989
> 
> 赞同：6
> 
> 时间：2012-12-20T14:10:41.033
> 
> 标签：css, safari, line-breaks, word-break

我的客户希望在他的网站上没有任何文字被破坏。例子：

```
The dog went for a walk and ran to-
wards the car. 
```

**应该**

```
The dog went for a walk and ran 
towards the car. 
```

该问题仅出现在 Safari 中。有谁知道解决这个问题的 CSS 属性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T17:49:50.213

添加 CSS 规则

```
* { -webkit-hyphens: none; } 
```

Safari 对单词进行连字的唯一情况（根据描述会发生这种情况）是显式的连字提示，如在 中`to&shy;wards`，或通过自动连字通过`-webkit-hyphens: auto`. Safari 被描述为支持自动断字，但这似乎不适用于 Windows 版本（5.1.7）。无论如何，上述规则对任何一种方式都有帮助。

另一方面，最好防止*不希望*的断字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:28:03.533

我在 chrome 和 safari 中尝试了这个，它似乎按预期工作：

```
white-space:pre-wrap; 
```

例子：

```
#noBroeknWords
{
 white-space:pre-wrap;
}

<div style="width:400px">
    <span id='noBroeknWords'>
    LongWord, ShouldNotBeBroken ShouldNotBeBroken ShouldNotBeBroken ShouldNotBeBroken ShouldNotBeBroken ShouldNotBeBrokenShouldNotBeBroken  ShouldNotBeBrokenShouldNotBeBroken ShouldNotBeBrokenShouldNotBeBroken.
    </span>
This is some text. This is some text. This is some text.
This is some text. This is some text. This is some text.
This is some text. This is some text. This is some text.
</div> 
```

这是[jsFiddle](http://jsfiddle.net/ureyes84/fJy9L/1/)

# objective-c - 检测手指何时从屏幕上抬起

> ID：13973991
> 
> 赞同：-3
> 
> 时间：2012-12-20T14:10:48.870
> 
> 标签：objective-c, cocoa-touch

我正在尝试：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

} 
```

但它只有在手指不运动时才有效。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:53:15.780

即使您的手指在移动，该方法也应该可以工作，如果您使用的是 UIGestureRecognizer，可能问题可能与 UISwipeGestureRecognizer 有关。

如果您确实在使用 UISwipeGestureRecognizer，您可以尝试设置：

```
[yourGesture setDelaysTouchesBegan:NO]; //default = NO
[yourGesture setDelaysTouchesEnded:NO]; //default = YES 
```

如果这些设置为 yes，它将导致 UIGestureRecognizer 在将其发送到其他视图之前分析触摸

```
[yourGesture setCancelsTouchesInView:NO]; //default = YES 
```

这会导致 touchesCancelled:withEvent: 在调用 action 方法之前立即将所有被识别为该手势一部分的触摸发送到视图

此外，如果您的 UIGestureRecognizer 要求的其他手势失败，这可能会导致问题：

```
- (void)requireGestureRecognizerToFail:(UIGestureRecognizer *)otherGestureRecognizer; 
```

试试看！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:58:59.140

这是来自[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)
`touchesEnded:withEvent:`
`Tells the receiver when one or more fingers are raised from a view or window.`

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

`Parameters`
**touches**
一组 UITouch 实例，它们表示由 event 表示的事件的结束阶段的触摸。
**event**
表示触摸所属事件的对象。

# git - 在控制台中显示当前分支名称 (tcsh)

> ID：13973994
> 
> 赞同：2
> 
> 时间：2012-12-20T14:10:57.050
> 
> 标签：git, branch, command-prompt, tcsh

我在工作中使用 tcsh（不幸的是，我无法改变这个事实）而且我快疯了，因为当我在 git repo 中时，我无法让控制台显示当前分支名称。

我不久前发现了这个：

[http://articles.bvsatyaram.com/2010/09/display-git-branch-name-in-console.html](http://articles.bvsatyaram.com/2010/09/display-git-branch-name-in-console.html)

这在 bash 中工作得非常完美，但我没有设法让它在 tcsh 中工作，因为它不是那么相似。

我将不胜感激任何类型的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:24:43.260

我为我的一位陷入 csh 的朋友提供了以下*不太完美的*解决方案，我认为它也适用于 tcsh。这只是 bash 版本的编辑。

```
alias GIT_BRANCH_CMD "sh -c 'git branch --no-color 2> /dev/null' | sed -e '/^[^*]/d' -e 's/* \(.*\)/\(\1)/'"
alias cd 'chdir \!*;set prompt="%{\033[32;40m%}"`whoami`@`hostname`": %{\033[33;40m%}%~%{\033[37;40m%}"`GIT_BRANCH_CMD`"%{\033[32;40m%} >%{\033[0m%} "'
cd ~ 
```

将此添加到 .cshrc 中，当您移动到新目录时，它将在括号内显示分支。我认为当您在目录中更改分支时，这将不起作用。我记得他为此使用了其他一些解决方法，例如将点 (.) 别名化以将目录向下和向上更改，因此它将刷新分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-13T10:42:17.190

```
alias GIT_BRANCH_CMD "sh -c 'git branch --no-color 2> /dev/null' | sed -e '/^[^*]/d' -e 's/* \(.*\)/\(\1)/'"
alias cd 'chdir \!*;set prompt="%B%n%b@%B%m: %~/%{\033[32;40m%}"`GIT_BRANCH_CMD`"%{\033[0m%}>"'
alias co 'eval "git checkout \!*;cd .;"' 
```

现在，使用 co 结帐分支，它会自动刷新分支名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-05T00:06:49.457

你可以试试：

```
alias __git_current_branch 'git rev-parse --abbrev-ref HEAD >& /dev/null && echo "{`git rev-parse --abbrev-ref HEAD`}"'
alias precmd 'set prompt="%n@%m[%c2]`__git_current_branch` "' 
```

来源：[https ://thrysoee.dk/gittcsh/](https://thrysoee.dk/gittcsh/)

# blackberry - 黑莓网络工程插件没有从 http://www.blackberry.com/go/eclipseUpdate/3.6/web 下载？

> ID：13973998
> 
> 赞同：0
> 
> 时间：2012-12-20T14:11:05.993
> 
> 标签：blackberry, web, blackberry-webworks

我是 BlackBerry Web Works 的新手。我正在尝试使用 eclipse ide 创建黑莓网络工程应用程序。为此，我正在尝试使用[http://www.blackberry.com从 Eclipse 中的“Help->Install New Software”安装它/go/eclipseUpdate/3.6/web](http://www.blackberry.com/go/eclipseUpdate/3.6/web)这个链接。但它无法在 3.6 和 3.7 以外的 eclipse 版本中开始下载。

我再次下载了 3.7 eclipse 。我仍然面临相同类型的问题并且无法下载它。

有没有解决这个问题的方法，或者我必须使用开发站点上给出的程序？

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:13:59.977

实际上黑莓不再支持，您必须按照开发站点上给出的程序进行操作： [https ://developer.blackberry.com/html5/documentation/what_is_a_webworks_app_1845471_11.html](https://developer.blackberry.com/html5/documentation/what_is_a_webworks_app_1845471_11.html)