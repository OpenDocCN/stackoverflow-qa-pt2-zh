# StackOverflow 问答 14957000-14957999

# cxf - 使用 onException 在骆驼中重新抛出 CXF 异常

> ID：14957005
> 
> 赞同：0
> 
> 时间：2013-02-19T12:01:20.507
> 
> 标签：cxf, apache-camel

我正在尝试捕获并重新格式化（隐藏信息）以获取 cxf Web 服务调用引发的骆驼异常。[ThrowException](https://stackoverflow.com/questions/5839612/how-to-define-exception-to-be-thrown-through-ref-in-apache-camel) ...那我应该扔什么。

这不起作用，因为转换不起作用（当然）。什么是最好的方法？

```
 <camel:onException>
    <camel:exception>org.apache.cxf.binding.soap.SoapFault</camel:exception>
    <camel:redeliveryPolicy maximumRedeliveries="2" delay="5000"/>
    <camel:handled>
            <camel:constant>true</camel:constant>
    </camel:handled>
    <camel:transform>
      <camel:simple>Cannot process this message. Retry later. </camel:simple>
    </camel:transform>
 </camel:onException>

<camel:route trace="false" id="LEFIIncoming">
    <camel:from uri="cxf:bean:PostSpecIn" />
    <camel:to uri="cxf:bean:PostSpecOut" />
</camel:route> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:00:30.643

您需要将响应消息转换为 CXF Web 服务期望/支持的响应类型。因此，从您的“cxf:bean:PostSpecIn”中查看 WSDL，然后返回一个 SOAP 故障作为响应，或者输出消息支持的某种响应类型。

# python - Python单元测试如何断言消息格式

> ID：14957010
> 
> 赞同：2
> 
> 时间：2013-02-19T12:01:34.487
> 
> 标签：python, unit-testing, python-2.7

我的 Python 单元测试代码如下所示

```
self.assertRaises(exc.UserError, module.function, args) 
```

这基本上断言引发了 UserError 。但是，我找不到如何检查异常中的消息是否与我的正则表达式匹配。

我怎样才能做到这一点？（我不希望编写任何额外的代码，只利用 python unittest 模块功能）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:45:38.777

```
class ExtendedTestCase(unittest.TestCase):

    def assertRaisesWithMessage(self, msg, func, *args, **kwargs):
        try:
            func(*args, **kwargs)
            self.assertFail()
        except Exception as inst:
            self.assertEqual(inst.message, msg) 
```

标准的 unittest 模块没有提供这样的方法。如果您更频繁地使用它，您可以使用上面的代码并从 ExtendedTestCase 继承。

PS：从[如何在 Python2.7 的单元测试中显示 assertRaises() 捕获的错误消息中被盗？](https://stackoverflow.com/questions/8672754/how-to-show-the-error-messages-caught-by-assertraises-in-unittest-in-python2-7):)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T12:30:28.013

Python 似乎在 2.7.3 中具有相同的方法，该方法名为“assertRaisesRegexp”，因此我们不（也不应该）编写自己的包装器：）

[http://docs.python.org/2/library/unittest.html#unittest.TestCase.assertRaisesRegexp](http://docs.python.org/2/library/unittest.html#unittest.TestCase.assertRaisesRegexp)

# vxworks - 在 `tExcTask` 中进行阻塞调用的后果是什么？

> ID：14957011
> 
> 赞同：0
> 
> 时间：2013-02-19T12:01:37.650
> 
> 标签：vxworks

假设我添加了一个`excJobAdd(myFunc, ...)`将在`excTask`. 在函数中我做了一个阻塞调用：

```
int myFunc(...) {
  ...
  semTake(...)
  ...
} 
```

假设我永远不会退出阻塞电话。后果是什么？

我能想到的一件事是：

*   所有后续作业都`excTask`将被阻止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T07:24:04.033

尽管 tExcTask 不是真正的 ISR / 异常，但它仍然在 ISR 上下文中执行。尝试在 ISR 上下文中执行阻塞调用是非法的并引发相应的 errno。

# selenium - Selenium WebDriver 无法绑定到锁定端口

> ID：14957015
> 
> 赞同：2
> 
> 时间：2013-02-19T12:01:51.063
> 
> 标签：selenium

我是 selenium 的新手。我正在运行测试用例，但出现以下异常：

```
org.openqa.selenium.WebDriverException: Unable to bind to locking port 7054 within 45000 ms
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 20:21:18'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0'
Driver info: driver.version: FirefoxDriver
Command duration or timeout: 46.68 seconds
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 15:53:30'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0'
Driver info: org.openqa.selenium.remote.RemoteWebDriver

at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187) 
```

我已经安装了 firefox 版本 18，并尝试了很多解决方案，但仍然得到相同的错误。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T07:32:08.310

解决方案 1 - 将 Firefox 版本更新到 v19，将 selenium 版本更新到 2.31 版

解决方案 2 - 或者按照以下步骤操作：- 步骤：- 1\. 转到以下路径 C:\Windows\System32\drivers\etc 2\. 并注释掉：127.0.0.1 localhost

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T21:07:56.603

根据[changelist](http://selenium.googlecode.com/git/java/CHANGELOG)，从 WebDriver 2.29.0 版本开始支持 FF18。
所以在这里查看最新版本：http: [//docs.seleniumhq.org/download/](http://docs.seleniumhq.org/download/)

或使用直接链接：selenium.googlecode.com/files/selenium-java-2.33.0.zip

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-16T21:23:25.093

有一些原因导致测试无法绑定到锁定端口。最常见的一种情况是，您没有为每个运行的测试设置 Webdriver 的新实例，或者您有一个尚未关闭的 Webdriver 的现有实例。

如果你不给它一个新的实例，那么 Firefox 可能有多个可能相互冲突的实例。创建一个新实例很容易添加到您的代码中。这可以通过以下两种方式之一来完成。第一种方法是为每次测试运行声明一个新驱动程序。

```
IWebDriver driver = new FirefoxDriver(); 
```

第二个是为它分配一个特定的配置文件来使用。如果您想为实例分配特定的 firefox 配置文件（仅使用浏览器的最低限度），您可以使用以下代码

```
FirefoxProfile yourProfile = new FirefoxProfile(@"Filepath of the custom profile");
using(IWebDriver driver = new FirefoxDriver(yourProfile))
{
    //Perform your test here
} 
```

另一个原因可能是上次测试未能正确关闭 webdriver。在测试结束时，只需添加一种方法来关闭您的实例。这可以通过一个简单的

```
driver.Close(); 
```

可以在此处找到其他用户关于此主题的更多信息 [https://groups.google.com/forum/#!topic/selenium-users/scHVivMEYDc](https://groups.google.com/forum/#!topic/selenium-users/scHVivMEYDc)

# android - 如何在 Android 中计算 WebView 高度？

> ID：14957016
> 
> 赞同：2
> 
> 时间：2013-02-19T12:01:51.403
> 
> 标签：android, android-layout, android-webview, android-view

我在一项活动中使用多个 WebView。我正在使用设置 WebView 内容

```
 webView.loadDataWithBaseURL("file:///android_asset/", data, "text/html", "utf-8", null); 
```

我正在生成 WebViews 内容运行时，设置字体、图像等并将其加载到 WebViews 上。

当我使用多个 WebViews 时，它们相互重叠，“wrap_content”可以正常工作，但是如果我给布局指定特定的高度，然后在其中添加 webview，那么一切看起来都很好。

所以我正在尝试计算 webview 的高度，我使用了以下方法来计算

```
webView.setWebViewClient(new WebViewClient() {
    @Override
    public void onPageFinished(WebView view, String url) {
    super.onPageFinished(webView, url);
    Toast.makeText(context.getApplicationContext(), "Done! WebView Height "+ webView.getHeight(),Toast.LENGTH_SHORT).show();        
    } 
```

我试过*webView.getHeight()*和*webView.getMeasuredHeight()*都返回零。

如何计算 WebView 高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:13:28.797

尝试这个：

```
m_webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onPageFinished(WebView webView, String url) {
                super.onPageFinished(webView, url);
                Log.e("ABC", findViewById(R.id.m_webView).getWidth(););
            }
        }); 
```

# css - inline-block div 元素不环绕其他 inline-block 元素

> ID：14957020
> 
> 赞同：1
> 
> 时间：2013-02-19T12:02:00.057
> 
> 标签：css

我以前设计过网站，但这次我完全不知所措。在过去的几个小时里，我一直在用这个来敲打我的头（这里不夸张）。我需要一个带有白色背景的父 DIV 来包装动态生成的（通过 php 或 ajax 调用）DIV。这样我就可以根据需要创建设计（图像之间的 1px 空白）。

这是我设置的一个jsFiddle，如果有人有时间也看看它：http: [//jsfiddle.net/5eJjy/](http://jsfiddle.net/5eJjy/)

这是一个“现场”版本：http: [//developer.sodobniinternet.eu/es-photo/](http://developer.sodobniinternet.eu/es-photo/)

问题：`div.images`没有宽度并`display:inline-block`扩展到他父母的宽度。以我在 CSS 方面的经验，带有 inline-block 的 DIV 应该环绕包含元素，但事实并非如此。

尝试：删除宽度`div.items`，一个一个删除所有css，仅将有问题的部分放在另一个文件中并尝试使其工作（有时会，有时不会）。

预期结果：用 1px 的空间和 1px 的白色边框围绕容器`div.images`包装所有内容（实际上是用 1px 填充来伪造边框）。`div.imgContainer``div.imgContainer``div.images`

我已经创建了错误的屏幕截图以及我想要它：

错误：[http ://shrani.si/f/2r/d0/1K6RkAyH/no.jpg](http://shrani.si/f/2r/d0/1K6RkAyH/no.jpg)

预期：[http ://shrani.si/f/3F/pw/Egu9OES/expected.jpg](http://shrani.si/f/3F/pw/Egu9OES/expected.jpg)

感谢您的时间和帮助。

**编辑：我已经更新了预期的结果。我注意到我没有正确地写它。**

**解决方案：http: [//jsfiddle.net/ebF8q/](http://jsfiddle.net/ebF8q/)**

我删除了`div.images`, 设置为父 div `font-size:0`（以删除不需要的空间），`div.imgContainer`我添加/更新`border: 1px solid #fff; margin: 0 -1px -1px 0px;`了，我得到了想要的结果。截图：[http ://shrani.si/f/2C/pi/2T0FUvWD/done.jpg](http://shrani.si/f/2C/pi/2T0FUvWD/done.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:42:07.790

我用 CSS 尝试了一些东西，但无法让它工作。这是一种仅使用 JS 的方法：

```
$(window).load(function () {
    $('.items').css('width', ($('#content').innerWidth() - (parseInt($('.filters').width()) + parseInt($('.filters').css('padding-left')) + parseInt($('.filters').css('padding-right')) + parseInt($('.filters').css('margin-left')) + parseInt($('.filters').css('margin-right'))) - 2) + 'px');
});
$(window).resize(function () {
    // original container size
    var consize = $('#content').innerWidth() - (parseInt($('.filters').width()) + parseInt($('.filters').css('padding-left')) + parseInt($('.filters').css('padding-right')) + parseInt($('.filters').css('margin-left')) + parseInt($('.filters').css('margin-right'))) - 2;
    // size of single contained image
    var imgsize = $('.imgContainer').outerWidth(true);
    // difference of full (max) and wanted size
    var margin = consize % imgsize;
    // set size/margin, so that wraps max number of images
    $('.items').css('width', (consize - margin + 1) + 'px');
    $('.items').css('margin-right', margin + 'px');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T12:27:55.797

我实现了一个奇怪的破解：http: [//jsfiddle.net/CGPBM/](http://jsfiddle.net/CGPBM/)

您删除 div.images 背景，为 div.imgContainer 添加边框并将边距设置为 -1px -1px

```
.images {    
    font-size: 0px;
}

.imgContainer {
    max-width: 250px;
    max-height: 188px;
    position: relative;
    display: inline-block;
    border: 1px solid white;
    margin: -1px -1px;
} 
```

但它必须在几个分辨率上进行测试（JSfiddle 太小了......）

我也把它应用到你的网站上，中间有一个空白你需要去掉 `<div class="imgContainer"></div><div class="imgContainer"></div><div class="imgContainer"></div>`

# ruby - 第一次安装 RoR。没有找到两个“lib”文件。正常吗？

> ID：14957023
> 
> 赞同：1
> 
> 时间：2013-02-19T12:02:05.837
> 
> 标签：ruby, ruby-on-rails-3.2

我刚刚安装了 RoR 使用`gem install rails`

但是有些文件没有找到。请看图片。我使用 Windows XP。

![在此处输入图像描述](../Images/60057677264f7cca1e20b4010b798bfb.png)

安装后目录`\gems\rails-3.2.12`也是空的。我的意思是这个目录：

```
C:\Ruby193\lib\ruby\gems\1.9.1\gems\rails-3.2.12 
```

`\gems`使用此安装创建的所有其他新目录都包含某些内容，但`\rails-3.2.12`为空。我的意思是，这些：

```
## C:\Ruby193\lib\ruby\gems\1.9.1\gems    ## the folder

builder-3.0.4
erubis-2.7.0
mime-types-1.21
polyglot-0.3.3
rails-3.2.12   ## this one is empty
railties-3.2.12
rdoc-3.9.5
... and many more 
```

这是正常的吗？还是我应该重新安装它？

RoR 谷歌组被主持。10个小时，我没有得到任何答案。所以在这里发布了一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:03:50.430

完全正常。它发生在安装 gems 的文档时，而不是 gems 本身，所以你已经拥有了你需要的所有代码。这些警告可以安全地忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T04:53:41.150

尝试这个！这对我有用！

> 宝石安装 rdoc

并再次安装导轨。

# excel - 用于在 excel 2010 中复制和增加日期值的宏

> ID：14957024
> 
> 赞同：0
> 
> 时间：2013-02-19T12:02:11.240
> 
> 标签：excel, excel-formula, excel-2010

我需要在excel中生成如下数据。

```
2013 年 2 月 8 日
2013 年 2 月 8 日
2013 年 2 月 8 日
2013 年 2 月 8 日
2013 年 2 月 8 日
2013 年 2 月 8 日
2013 年 2 月 9 日
2013 年 2 月 9 日
2013 年 2 月 9 日
2013 年 2 月 9 日
2013 年 2 月 9 日
2013 年 2 月 9 日
2013 年 2 月 10 日
2013 年 2 月 10 日
2013 年 2 月 10 日
2013 年 2 月 10 日
2013 年 2 月 10 日

```

格式中的日期值，`mm/dd/yyyy`在 6 行上相同......在第 7 行中，它应该递增并持续到第 12 行，就像应该重复序列一样。

任何 excel 用户都可以帮助我为此编写公式/宏等吗？

在此先感谢，昌杜

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T12:14:19.577

假设您已经将第一个日期存储在 中`A1`，请输入`A2`以下公式：`=IF(MOD(ROW(),6)=1,A1+1,A1)`并根据需要自动填充。将结果单元格格式化为`Date`所需的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T12:15:07.213

1.  在单元格 A1 中输入您的开始日期。
2.  根据您的需要对其进行格式化，即使用“单元格格式”对话框并选择日期格式。
3.  在单元格 A2 中，输入以下公式：

    ```
    =IF(MOD(行(A2),6)=1,A1+1,A1)

    ```

4.  将此公式复制到您需要的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:24:13.517

试试下面的代码：

```
Sub test()
    Dim dt As Date
    dt = Date

    For i = 1 To 1000

        If (i Mod 6 = 0) Then
            dt = DateAdd("d", 1, dt)
        End If

        Range("A" & i).Value = Format(dt, "MM/dd/yyyy")
    Next
End Sub 
```

# ios - 如何获取 UIImage 的大小 (KB)

> ID：14957039
> 
> 赞同：15
> 
> 时间：2013-02-19T12:03:12.033
> 
> 标签：ios, objective-c, xcode, uiimage

我从`didFinishPickingMediaWithInfo`.

```
UIImage *originalImage = (UIImage*)[info valueForKey:UIImagePickerControllerOriginalImage]; 
```

我想以 Kb 为单位获取 Image 的大小。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-19T12:29:45.990

```
 UIImage *originalImage = (UIImage*)[info valueForKey:UIImagePickerControllerOriginalImage];
    NSData *imgData = UIImageJPEGRepresentation(originalImage, 1); //1 it represents the quality of the image.
    NSLog(@"Size of Image(bytes):%d",[imgData length]);
    imgData = nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-15T03:07:26.073

我认为 op 的`size (kb)`内存大小是`originalImage`，对吧？

查看`malloc_size`ARC 下的用法，请参阅[this](https://stackoverflow.com/questions/761969/checking-the-size-of-an-object-in-objective-c)。

```
#import <malloc/malloc.h>

NSLog(@"Size of %@: %zd", NSStringFromClass([originalImage class]), malloc_size((__bridge const void *)originalImage)); 
```

# linux - 将一个目录中的cpp文件编译到另一个目录中

> ID：14957040
> 
> 赞同：0
> 
> 时间：2013-02-19T12:03:16.843
> 
> 标签：linux, compilation, makefile, gnu-make

尝试将名为 P18298_ca.sub 的文件夹中的所有 .cc 文件编译为 P18298_ca.cmp 中的 .exe 文件。我从包含源目录和目标目录的目录中使用 make 命令进行编译。使错误读取：

make: ***没有规则来制作目标`P18298_ca.cmp/00a5bffb6a4792d7bcaed90ff6d3ca88-WA.exe', needed by`main.exe'。停止。

这是我使用的makefile代码

```
 CPP_FILES := $(wildcard P18298_ca.sub/*.cc)
    OBJ_FILES := $(patsubst P18298_ca.sub/%.cc,P18298_ca.cmp/%.exe,$(CPP_FILES))
    LD_FLAGS := ...
    CC_FLAGS := ...

    main.exe: $(OBJ_FILES)
        g++ $(LD_FLAGS) -o $@ $^

    obj/%.exe: src/%.cc
        g++ $(CC_FLAGS) -c -o $@ $< 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:49:46.160

二进制文件是从`*.obj`文件构建的，而不是从`*.exe`文件构建的。此外，宏中的目录和默认规则必须相同。将 Makefile 中的这些行更改为

```
OBJ_FILES := $(patsubst P18298_ca.sub/%.cc,P18298_ca.cmp/%.obj,$(CPP_FILES))

P18298_ca.cmp/%.obj: P18298_ca.sub/%.cc
    g++ $(CC_FLAGS) -c -o $@ $< 
```

# android - Phonegap Android REST API Cookies - ASP.NET_SessionId 没有出现在响应标头中

> ID：14957041
> 
> 赞同：1
> 
> 时间：2013-02-19T12:03:17.703
> 
> 标签：android, jquery, cordova

我在使用 POST REST 请求进行记录/身份验证时在 Android Phonegap 应用程序中遇到问题。

我的 POST REST 请求代码是这样的：-

```
$.ajax({
                url : "https://myurl.com/Test/TV1.asmx/authenticateUser",
                type : "POST",
                dataType : "json",
                contentType : "application/json; charset=utf-8",
                data : JSON.stringify(textJson),

                success : function(result, textStatus, jqXHR) {
                    console.log(jqXHR.getAllResponseHeaders());
                    },
                error : function(result) {
                    alert(result);
                }

            }); 
```

现在，当我在浏览器甚至 iOS Phonegap 应用程序上尝试上述代码时，我得到了两个 cookie ASP.NET_SessionId 和 .SecuAuth。但在 Android 的响应头中，我只得到 .SecuAuth cookie 而不是 ASP.NET_SessionId cookie。

任何想法为什么会这样。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T13:56:45.143

这是因为 SessionId cookie 被标记为 HttpOnly，因此对任何客户端 JavaScript 都不可用。

# google-maps - 谷歌地图图表区域城市

> ID：14957042
> 
> 赞同：0
> 
> 时间：2013-02-19T12:03:21.877
> 
> 标签：google-maps, google-visualization

是否可以仅在确切区域显示城市？例如，我有这张地图和一些*区域*为“UA”的城市。示例地图：

> [http://jsfiddle.net/jQbpR/6/](http://jsfiddle.net/jQbpR/6/)

```
 var options = {
            region: 'UA',
            displayMode: 'markers',
            resolution: 'provinces',
            colorAxis: { colors: ['yellow', 'green'] }
        }; 
```

在这张地图上，我有一个名为“Novaya”的城市，在这个国家，我们很少有同名的城市。如何在其他城市附近的“UA-14”区域准确显示该城市？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:32:46.893

将区域代码添加到数据中，例如`Novaya,UA-14`

[http://jsfiddle.net/doktormolle/ZVGHG/](http://jsfiddle.net/doktormolle/ZVGHG/)

# c# - 为什么EF说具有相同键的对象在“分离”时已经存在？

> ID：14957044
> 
> 赞同：0
> 
> 时间：2013-02-19T12:03:27.713
> 
> 标签：c#, entity-framework, ef-code-first, repository-pattern

在我的存储库更新方法中，我首先附加现有对象，这些对象可能需要在执行任何其他操作之前添加到更新实体的集合中，以便 EF 意识到我想将该实体与另一个现有实体相关联，而不是创建一个新实体。所以在这个例子中，我正在使用用户组：

```
UserGroup basicGroup = repoGroup.GetGroupByName("BasicGroup");
List<UserGroup> updatedGroups = new List<UserGroup> { basicGroup };
foreach (var user in usersToUpdate) {
    repoUser.UpdateUser(user.userId, updatedGroups);
}

[...]

public bool UpdateUser(int updatedUserId, List<UserGroup> updatedGroups) {
    using (var context = new MyDbContext()) {
        if (updatedGroups != null) {
            // Attach groups to context before add so that EF creates a new
            // relationship between entity and new items in groups collection,
            // instead of creating a new entity for each new item.
            foreach (UserGroup group in updatedGroups) {

                var testEntry = context.Entry(group);

                context.UserGroups.Attach(group);
            }
        }

        var userToUpdate = context.Users.First(usr => usr.id == updatedUserId);
        userToUpdate.UserGroups.Clear();
        foreach (var group in updatedGroups) {
            userToUpdate.UserGroups.Add(group);
        }

        context.SaveChanges();
        return true;
    }
} 
```

因此，我的代码在几个用户之间循环，并尝试将一组新的组与他们关联起来。我意识到我在这里犯的错误是我`.Attach`可能试图将同一个实体两次附加到对象上下文 - 在这种情况下，`basicGroup`. 所以我想我可以测试一下对象是否已经被附加，如果没有附加它。

所以看看 testEntry 行。在那里，我尝试获取`group`实体的`Entry`状态。我确实得到了一个`DbEntityEntry`实例，但它总是说`EntityState`是`Detached`（在每个循环迭代中）。现在，当我运行我的代码时，在 foreach 循环的第一次迭代中没问题，但在第二次迭代中，我得到了异常：

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

我不明白这一点；如果对象已经存在于 ObjectStateManager 中，为什么我`DbEntityEntry`说它的状态是`Detached`？它当然应该记住它的状态是`Unchanged`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:06:10.410

不久前我遇到了这个问题，基本上是编译器告诉你，在你的上下文中，你有一个实体加载到内存中，然后你试图将它附加回相同的上下文（第二次 forloop 迭代 -附加的对象位于该初始上下文中）。

要解决此问题，对于 .Add 方法，请使用单独的上下文（新的“使用”调用），这将起作用。这是我能找到的唯一解决方法。

即（我的 UnitOfWork = 你的正常上下文）

```
UnitOfWork _context = new UnitOfWork();

// Add 1
_context.Add(obj);

using(UnitOfWork context = new UnitOfWork()){
   // Do second addition routines here based on objects used in add 1.
   context.Add(childobj);
   context.SaveChanges();
}

_context.SaveChanges(); 
```

# macos - 支持层的 NSView 旋转和倾斜的兄弟姐妹

> ID：14957047
> 
> 赞同：57
> 
> 时间：2013-02-19T12:03:37.737
> 
> 标签：macos, cocoa, calayer, nsview

我对支持图层的 NSView 及其兄弟有一个奇怪的问题，当将它们添加到附加到旋转的超级视图的现有视图层次结构中时，它们中的一些没有正确呈现。以下是详细信息。

## 问题

```
- NSScrollView (layer can be here)
  - NSClipView (or here)
    - Document View (or even here)
      - Some *rotated* subview
        - { Problematic sublings } 
```

因此，层次结构本身相当简单和常见：带有一些文档的滚动视图，文档子视图代表一些内容。就我而言，它是图形内容，可以旋转。旋转视图可以有一些额外的子视图——各种标记、控制点等等，一旦我使用 CALayer 作为后端，我就会遇到倾斜图形的奇怪问题： ![问题说明](../Images/1c9dddc94bd1f9e752ba44e097b0865f.png)

相机图片是*单独*渲染的，它们不是这个视图树的一部分，注意标记和按钮。

正如您在图像上看到的，我有一些带有子视图的测试视图（只是随机按钮）。右侧的对象始终正确渲染。根据我的测试，每个带有*frameRotation*的NSView 都可以`[0, pi/2]`渲染。左侧的对象呈现模糊，看起来该项目的缓存缓冲区太小。当*frameRotation*在`[pi/2, pi]`范围内时会发生这种情况。

## 最奇怪的事

此问题不会发生在“实时轮换”中。即，如果我只是更改设置层次结构的*frameRoation ，每个子视图都在它的位置，一切正常。*但是，**当将 subling 添加到已经旋转的对象时**​​ - 它会出错并给出模糊的外观。

在我的应用程序中，当用户单击该项目时会出现特殊的子视图，即兄弟姐妹添加到超级视图中的那一刻。

似乎后端层有一些用于子视图的缓存缓冲区，并且当根视图旋转时，其中一些被计算为错误的大小。

## 它是如何实施的，我尝试了什么

1.  视图非常简单和标准，我尝试推`[view setWantsLayer:YES]`送到层次结构的根视图：滚动视图、剪辑视图、文档视图，每次结果都是一样的。没有手工层，没有层主机。
2.  内容视图、兄弟和实际上整个视图树（除了上面提到的视图）没有层。虽然，我尝试为各种项目打开图层但没有任何成功。
3.  我试图强制更新（setNeedsDisplay）后端层没有运气
4.  完全重新设置图层似乎正在工作，但很难。

## 解决方案？

这就是问题，其实。有人遇到过这样的问题吗？也许有人知道强制层删除所有缓存并完全更新的方法？到目前为止，我只有两个解决方案：要么完全删除图层（有效，但也转动所有的眼睛糖果），或者重新设置图层调用`setWantsLayer:NO`，然后`setWantsLayer:YES`. 这个性能很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-19T12:12:13.777

您已经写过您尝试过“setNeedsDisplay”。你是从主线程调用这个方法吗？在我的一个应用程序中，如果我从另一个线程调用 setNeedsDisplay，则什么也没有发生。如果要确保显示无效，请像这样使用 dispatch：

```
dispatch_async(dispatch_get_main_queue(), ^{

       [view setNeedsDisplay:YES];
}); 
```

另外看看你的 IB 检查员。有时层支持的视图不喜欢与非层支持的视图混合。确保在“View Effects Inspector”层中为根层的所有子视图打开支持。

（在我的程序中，如果层支持被关闭，有时 NSButtons 会消失）

# php - 接收和处理无连接错误和 200 OK 标头

> ID：14957052
> 
> 赞同：0
> 
> 时间：2013-02-19T12:03:57.407
> 
> 标签：php, ajax, json, api, error-handling

我正在使用我自己创建的 API，我正在与之通信，我的代码如下。如果一切正常，API 将返回 json 以及标头“200 OK”。但是，如果连接断开，我会返回“502 Bad Gateway”作为标题。

到目前为止，'CURLOPT_HEADER' 在我的 php 脚本（见下文）中已设置为 false，但现在我已将其设置为 true，以便我可以接收标题并根据标题执行操作。在这里我需要帮助。

### 实际上，我有两件事需要帮助（它们是相互关联的）：

1.  如果我的 API 和源之间的连接正常，并且我在我的 php 脚本（如下所示）中将 CURLOPT_HEADER 设置为 false，那么一切都按预期工作。但是，如果我将其设置为 true，则实际的标头也会与 ajax 请求一起发回，这会返回错误：“Uncaught SyntaxError: Unexpected token H”（下面 js 代码中的第 10 行）。

2.  如果我的 API 和源之间的连接断开，我不知道如何处理错误，因此 API 返回“502 Bad Gateway”。我希望 php 脚本通过 ajax 请求将该信息发送回，以便可以在 js 文件中进行处理。

所以，请在这里帮助我。提前致谢！

**PHP：**

```
$url = 'http://theurl.com';

$ch = curl_init($url);

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "GET");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);

$response = curl_exec($ch);

if(!$response) {
    // <--- ??
}

curl_close($ch);

echo json_encode($response); 
```

**JS：**

```
1\.    $.ajax({
2\.        url:'./php/apihandling.php',
3\.        type:'post',
4\.        dataType:'json',
5\.            data:{ 
6\.            data: data
7\.       },
8\.       success: function(data) {
9\.           var content = JSON.parse(data);
10\.          console.log(content);
11\.       },
12\.      error: function (xhr, ajaxOptions, thrownError) {
13\.          console.log(xhr.status);
14\.          console.log(thrownError);
15\.      }
16\.  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:08:16.733

您可以使用 curl_errno 检查您的 API 如何响应您的请求，您也可以尝试使用 API“状态标志”来避免 JQuery 中的错误

```
...
// Check if any error occurred
if(!curl_errno($ch))
{
 $info = curl_getinfo($ch);

 //close the connection
 curl_close($ch);
 $result["API_status"]=0;
 $result["error"]=$info;
 //kill the script and echo the json
 die(json_encode($result));
} 
else
{
$result["API_status"]=1;
curl_close($ch);
$result["response"]=$response;
echo json_encode($result);
} 
```

现在让我们尝试一下您的 jquery 脚本

```
$.ajax({
    url: './php/apihandling.php',
    type: 'post',
    dataType: 'json',
    data: {
        data: data
    },
    success: function(data) {
        //no need for this, datatype is json already   
        //var content = JSON.parse(data);
        if (data["API_status"]) {
            alert("wow API is up and healthy");
            //do some stuff with the json
            $.each(data["response"], function(index, value) {
                //loop this
            });
        } else {
            alert("Oh, no. RIP API");
            console.log(data["error"]);
        }
    },
    error: function(xhr, ajaxOptions, thrownError) {
        console.log(xhr.status);
        console.log(thrownError);
    }
}); 
```

# javascript - 使用 jQuery 的动态表单元素

> ID：14957059
> 
> 赞同：0
> 
> 时间：2013-02-19T12:04:27.113
> 
> 标签：javascript, jquery, forms, reset

我正在使用 jQuery 的“.live()”事件处理程序构建一个简单的动态表单。

尽管表单根据需要扩展和收缩，但表单 javascript '.reset' 方法仅部分有效。

To clarify, when either of the first two radio buttons are selected (in tier 1) the reset method should de-select any tier 2 options, however this only works with the first tier 2 form (tier2Foo1), and not the second (tier2Foo2 ）。

下面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Build a Bin</title>
<style type="text/css">
#first {
    padding-top: 10px;
    height: 250px;
}
#hideFoo {
    padding-top: 10px;
    height: 250px;
    display: none;
}
#hideFoo2 {
    background-color: black;
    color: white;
    width: 100px;
    display: none;
}
#first, #hideFoo, #hideFoo2 {
    margin-bottom: 10px;
    width: 350px;
    border: #000 1px solid;
}
.fieldContainer {
    float: left;
    width: 150px;
    padding: 0 10px 0;
}
.imageContainer {
    width: 150px;
    height: 150px;
    border: solid #666 1px;
}

</style>
<script src="javascript/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    //TIER ONE Options
    $(document).ready(function () {             
        $('#Foo1').live('click', function() {
            $('#hideFoo').show(500);
            $('#hideFoo2').hide(500);
        });
        $('#Foo2').live('click', function() {
            $('#hideFoo2').show(500);
            $('#hideFoo').hide(500);
        });
        //uncheck and hide form element
        //tier 1 reset for tier 2
        $('#Foo1, #Foo2').live('click', function(){
            $('#tier2Foo1, #tier2Foo2')[0].reset();
        })
    });
    </script>
</head>
<body>
<!-- ////////////// Basic form containing two options \\\\\\\\\\\\\\\\\\\\ -->
<div id="first">
  <form id="tier1" action="#">
    <div class="fieldContainer">
    <div class="imageContainer"><img src="http://dummyimage.com/150x150/000/fff" alt=" " /></div>
    <p>Foo 1</p>
      <input type="radio" name="example" value="Foo1" id="Foo1" />
      <label for="Foo1">Foo 1</label>
    </div>
    <div class="fieldContainer">
    <div class="imageContainer"><img src="http://dummyimage.com/150x150/000/fff" alt=" " /></div>
    <p>Foo 2</p>
      <input type="radio" name="example" value="Foo2" id="Foo2" />
      <label for="Foo2">Foo 2</label>
    </div>
  </form>
</div>
<!-- ////////////// tier 2 for Foo1\\\\\\\\\\\\\\\\\\\\ -->
<div id="hideFoo">
  <form id="tier2Foo1" action="#">
    <div class="fieldContainer">
    <div class="imageContainer"><img src="http://dummyimage.com/150x150/000/fff" alt=" " /></div>
    <p>The complete EcoSort Recycling System.</p>
      <input type="radio" name="example1" id="Foo1Opt1" />
      <label for="Foo1Opt1">Foo One Option 1</label>
    </div>
    <div class="fieldContainer">
    <div class="imageContainer"><img src="http://dummyimage.com/150x150/000/fff" alt=" " /></div>
    <p>The complete EcoSort Recycling System.</p>
      <input type="radio" name="example1" id="Foo1Opt2" />
      <label for="Foo1Opt2">Foo One Option 2</label>
    </div>
  </form>
</div>
<!-- ////////////// tier 2 for Foo2 \\\\\\\\\\\\\\\\\\\\ -->
<div id="hideFoo2">
  <form id="tier2Foo2" action="#">
    <div>
      <input type="radio" name="example2" id="Foo2Opt1" />
      <label for="Foo2Opt1">Foo Two Option 1</label>
    </div>
    <div>
      <input type="radio" name="example2" id="Foo2Opt2" />
      <label for="Foo2Opt2">Foo Two Option 2</label>
    </div>
    <div>
      <input type="radio" name="example2" id="Foo2Opt3" />
      <label for="Foo2Opt3">Foo Two Option 3</label>
    </div>
  </form>
</div>
</body>
</html> 
```

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:10:05.583

`$('#tier2Foo1, #tier2Foo2')[0].reset();`仅选择集合的第零种形式，因此您仅适用`.reset`于一种形式。这很容易解决：

```
$('#tier2Foo1, #tier2Foo2').each(function () { this.reset(); }); 
```

[http://jsfiddle.net/ExplosionPIlls/ruLdA/](http://jsfiddle.net/ExplosionPIlls/ruLdA/)

* * *

顺便说一句，`.live`在 jQuery 1.9 中被删除。使用[.on](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T12:12:18.607

还真没试过。但是在您的代码中，您似乎只选择了第一个，因此第二个没有重置。

```
 $('#tier2Foo1, #tier2Foo2')[0].reset(); 
```

尝试删除`[0]`.

# c# - 有条件地在 WPF 数据网格的末尾添加空白行（不使用默认的无参数 ctor）

> ID：14957064
> 
> 赞同：1
> 
> 时间：2013-02-19T12:04:39.267
> 
> 标签：c#, wpf, wpfdatagrid

我正在尝试*有条件*地在 WPF 4.0 DataGrid 的末尾添加一个空白行（而不是直接通过代码隐藏）。我尝试了以下但徒劳无功 -

我试图像这样获得 IEditableCollectionView 并在该界面上进行操作：

```
CollectionViewSource.GetDefaultView(myObservableCollection) as IEditableCollectionView 
```

但是，这并没有按预期工作，因为**CanAddNew**属性为 true 的因素之一是将默认构造函数添加到集合的基础对象（Grid 绑定到的对象）。

**问题**：如果我添加一个默认构造函数，那么网格总是会添加一个空白行。我想添加一个*条件*（检查布尔值），但并非总是如此。如何在不为我的 ViewModel 类使用默认无参数构造函数的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:27:57.653

您可以将 CanAddNew 绑定到模型中的属性，然后根据您的条件将其设置为 true/false：

```
 <DataGrid CanUserAddRows="{Binding Path=YourBooleanProperty}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:46:04.630

我现在可以做到[这一点](http://social.msdn.microsoft.com/Forums/is/wpf/thread/09398b8a-8356-4ca6-9216-a45fc95227d8)- 我根据条件将一个空项目添加到我的集合中。然后，如果用户编辑集合的空项，我会以编程方式再添加一个空行。

# internet-explorer - 使用 Virtual PC 在 Windows XP 上测试 IE，现在微软的 VHD 镜像已经过期

> ID：14957067
> 
> 赞同：10
> 
> 时间：2013-02-19T12:05:01.843
> 
> 标签：internet-explorer, windows-xp, virtual-machine

想在 Windows XP 上使用 IE 测试网站，建议使用 Microsoft Virtual PC。我被指示在这里查看 Internet Explorer 应用程序兼容性 VPC 图片：[http ://www.microsoft.com/en-us/download/details.aspx?id=11575](http://www.microsoft.com/en-us/download/details.aspx?id=11575)

但是，对于 Windows XP 映像，到期日期为 2013 年 2 月 14 日，现在无法使用。

是否有任何更新版本或解决方法？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-15T13:50:24.203

现在可以从[http://www.modern.ie/en-us/virtualization-tools#downloads下载 VHD 映像](http://www.modern.ie/en-us/virtualization-tools#downloads)

现代.ie 归微软所有，所以它是官方的东西。

# windows - 如何在 Windows 上使用 Strawberry 编译 Perl 模块？

> ID：14957069
> 
> 赞同：2
> 
> 时间：2013-02-19T12:05:03.080
> 
> 标签：windows, perl, compilation, perl-module, strawberry-perl

这更像是一个开放的讨论和一个结论，而不是一个真正的问题，希望它可以在某个时候对某人有所帮助。

我正在研究如何在 Internet 断开连接的服务器上制作 Perl 模块（否则答案很简单：使用`cpan`），所以我唯一的选择是直接在服务器上手动编译从 Internet（CPAN 或其他）下载的模块.

问题是，在标准的 Windows 服务器上，没有编译器。那么如何制作模块呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:32:56.427

如果您查看您的 Strawberry Perl 安装文件夹，您将看到许多有用的实用程序，包括编译器、、`cpp.exe`制作实用程序和.`c++.exe``gcc.exe``gmake.exe``dmake.exe`

`dmake`并`gcc`一起支持`cpan`在您的安装上使用，并且`cpanm`也可用。

有关安装模块的一般过程的信息，请查看[`perlmodinstall`](http://perldoc.perl.org/perlmodinstall.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:17:23.427

Strawberry Perl 在默认安装中包含了必要的编译环境，所以编译模块是没有问题的。

至于在离线环境中安装模块，我非常偏爱[使用`cpanmini`](http://search.cpan.org/~rjbs/CPAN-Mini-1.111011/bin/minicpan). 基本上，您使用具有 Internet 访问权限的机器创建所有 CPAN 的最小镜像，然后将其放到您的离线机器上。更改`cpan`程序的设置以指向此本地镜像。现在您可以像平常一样使用`cpan`.

这可能看起来有点矫枉过正，但实际上非常简单。CPAN 镜像只占用大约 2GB 的空间，这在现在已经不算什么了。您可以将它放在 U 盘、DVD 或其他任何东西上。它是一劳永逸的解决方案——下次你想安装一个模块时，它已经在那里了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:05:03.080

Strawberry 背后的人很聪明，他们将所有你需要的 Perl 二进制文件打包在`<Strawberry install dir>\c\bin`目录下。

然后，直接在 Windows 服务器上离线编译 Perl 模块，过程非常简单：

1.  下载模块`.tar.gz`文件
2.  解压
3.  `cmd`在模块目录中打开一个
4.  类型`perl Makefile.PL`
5.  输入`dmake`，看看有没有错误
6.  输入`dmake test`，看看有没有错误
7.  输入`dmake install`，看看有没有错误

你应该没事！

不要犹豫，完成这篇文章或提出您的问题以改进它。

# python - 由于垃圾python而导致xml拆分

> ID：14957081
> 
> 赞同：0
> 
> 时间：2013-02-19T12:05:49.320
> 
> 标签：python

我从缓冲区大小 (4096) 的命名管道中获取 xml 字符串：这里是 xml 字符串

```
 <?xml version="1.0" standalone="no" ?>
 <response id="rp001">
 <command opcode="-ac">
    <mode value="tester" />
    <key value="AKIAJVW3VWOTZL5UAAYQ" />
    <passkey value="QpPLmpdl89zAza+nv5fmCMta5ZsPvGkbFvJ6xWZH" />
    <name value="test" />                    
   </command>
 </response>
 ˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛˛ 
```

响应后我得到了这个不可读的字符。我认为是将字符`</response>`切碎并将值存储在另一个变量中。我怎么做这个剁或溢出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:07:31.017

```
xml = xml.split('</response>', 1)[0] + '</response>' 
```

# yii - Yii 连接到实时数据库

> ID：14957085
> 
> 赞同：0
> 
> 时间：2013-02-19T12:05:58.443
> 
> 标签：yii, gii

我正在本地开发一个应用程序，并希望连接到实时数据库，但是当尝试访问 gii 的 crud 生成器时，我收到以下错误：

CDbConnection failed to open the DB connection: SQLSTATE[HY000] [2002] 连接尝试失败，因为连接方一段时间后没有正确响应，或者连接的主机没有响应，建立连接失败。

```
if(Yii::app()->db===null) 
```

连接到本地数据库没有问题，所以我想这与 XAMPP 或防火墙设置有关，但我不知道是什么。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:42:28.267

验证您与 MySQL 数据库的连接，例如。远程登录

```
$ telnet domain.with-mysql-networking.enabled 3306

Trying 1.2.3.4...
Connected to domain.with-mysql-networking.enabled (1.2.3.4).
Escape character is '^]'.

5.0.51a-24+lenny5o?UnKl\hu7,Nc*CTZI>:H<2

^CConnection closed by foreign host. 
```

如果您的服务器不接受远程连接，您将看不到任何答案：

```
$ telnet domain.without-mysql-networking.enabled 3306
Trying 10.9.8.7...
^C 
```

检查这个 MySQL 设置：[http ://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_skip-networking](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_skip-networking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:47:56.377

在 gii 配置中，设置：

```
'ipFilters' => array('*'), 
```

# ios - 对已加载的 UIView 元素的更改

> ID：14957088
> 
> 赞同：0
> 
> 时间：2013-02-19T12:06:02.250
> 
> 标签：ios, uiview

我有一个`UIView`加载到 a`ViewController`并希望在加载后带来更改（例如，当您单击它`UIView`以更改文本颜色时）

```
 @interface CategoryMenu : UIView
    {
        UIImageView *img;
        UIButton *disclosureBtn;
        UIButton *actionView;
        UILabel  *titleLabel;
    }
 @property (nonatomic,retain) IBOutlet UIImageView *img;
 @property (nonatomic,retain) IBOutlet UIButton *disclosureBtn;
 @property (nonatomic,retain) IBOutlet UIButton *actionView;
 @property (nonatomic,retain) IBOutlet UILabel  *titleLabel; 
```

通过这种方式，我已将其加载`UIView`到`UIViewController's`需要的地方。

```
 -(void)showSubviews
{
    int x = 0;
    for (int i = 0; i < array.count ; i++)
    {
        NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"CustomMenu" owner:self options:nil];

        CategoryMenu* tempUserView = [nibViews objectAtIndex:0];
        tempUserView.userInteractionEnabled = YES;
        [tempUserView setFrame:CGRectMake(0, x, 280, 50)];
         x+=60;

        tempUserView.tag = i;

        tempUserView.titleLabel.text = [array objectAtIndex:i];
        [tempUserView.actionView addTarget:self action:@selector(ExtendedCollapsed:) forControlEvents:UIControlEventTouchUpInside];

        [self.view addSubview:tempUserView];
    } 
```

现在，当您按下 a 时`UIView`，除了动作本身之外，我还想更改`UILabel`文本的颜色。

```
-(void)ExtendedCollapsed:(id)sender
{
    NSLog(@"[self.view subviews] = %@",[self.view subviews]);
    UIView *view1 = (UIView *)sender;

    for(UIView *view in [self.view subviews])
    {
        NSLog(@"view = %@ \n ", view);

        if([view isKindOfClass:[CategoryMenu class]])
        {
            if (view.tag == view1.tag)
            {
                NSLog(@"We find the view !!!!");

                CategoryMenu* tempUserView = (CategoryMenu*)view1;

                 NSLog(@"tempUserView = %@ \n ", tempUserView);

                tempUserView.titleLabel.text = @"Text Changed";
                tempUserView.titleLabel.textColor = [UIColor whiteColor];

                NSLog(@"tempUserView.titleLabel.text = %@",tempUserView.titleLabel.text);

                break;
            }
        }
        else
        {
            NSLog(@"view is not a button");
        }
    }

} 
```

看不到`UIViews`之前加载的任何变化。

有人可以帮我一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:59:01.007

中的 sender 参数`-(void)ExtendedCollapsed:(id)sender`是您的`UIButton *actionView`，而不是`CategoryMenu`.

我想您的`CategoryMenu`类实现中有一个方法将您设置`actionView.tag`为您的`CategoryMenu`对象`tag`，以便您可以在循环中比较它们`-(void)ExtendedCollapsed:(id)sender`并找到对应的`CategoryMenu`?

如果是这样，您甚至不必这样做，只需调用`sender.superview`即可获得与`CategoryMenu`press 对应的对象`actionView`。如果`[sender.superview isKindOfClass:[CategoryMenu class]] == TRUE`，你很高兴。

然后，在更改 的颜色后`tempUserView.titleLabel`，尝试调用`[tempUserView setNeedsLayout]`。

该方法现在应该如下所示：

```
- (void)ExtendedCollapsed:(id)sender {
    if ([sender isKindOfClass:[UIButton class]]) {
        if ([sender.superview isKindOfClass:[CategoryMenu class]]) {
            CategoryMenu *tempUserView = (CategoryMenu *)sender.superview;
            tempUserView.titleLabel.text = @"Text Changed";
            tempUserView.titleLabel.textColor = [UIColor whiteColor];
            [tempUserView setNeedsLayout];
        }
    }
} 
```

# gwt - 如何在 gwt 设备中获得移动速度？

> ID：14957093
> 
> 赞同：0
> 
> 时间：2013-02-19T12:06:11.133
> 
> 标签：gwt, gps

是否可以通过任何 gwt api 计算移动设备的速度？我知道可以获取 gps 位置，但是从 gps 信号获取速度怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:12:54.710

是的，您可以使用[gwt-phonegap](http://code.google.com/p/gwt-phonegap/)。

# java - 如何知道组件是否相对于屏幕移动（而不是相对于其父级）？

> ID：14957098
> 
> 赞同：0
> 
> 时间：2013-02-19T12:06:24.157
> 
> 标签：java, swing, location, screen, componentlistener

我在 a 中有一个组件，`JFrame`我需要知道该组件何时相对于屏幕空间移动。

它要么在框架移动时发生，要么在布局更改时发生。

我的问题：

*   当我将 a 附加`ComponentListener`到我的组件并且框架被移动时，`componentMoved()`不会调用回调方法，因为该组件相对于其父级仍然具有相同的位置（此处为`JFrame`）
*   我想知道何时移动组件而不添加 `ComponentListener`自身`JFrame`...

所以我正在寻找一种方法来了解组件何时相对于屏幕移动。

注意：这些规范是强加给我的......我别无选择，但在这里解释它会很长而且无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:08:31.333

使用`SwingUtilities`. 仅通过 (0,0) 点并查看生成的坐标

```
public static void convertPointToScreen(Point p,Component c) 
```

您的侦听器应附加到包含框架的组件

# cocos2d-iphone - Cocos2d 缩小图片

> ID：14957100
> 
> 赞同：1
> 
> 时间：2013-02-19T12:06:29.437
> 
> 标签：cocos2d-iphone

当我有两组图像——通常设置和 Retina 显示设置时，Cocos2d 会自动选择使用哪一组。如果没有 Retina 图像，通常的图像会被缩放以在 Retina 显示器上使用。我怎么能反其道而行之？当没有通常的图像时，我有 Retina 图像并想缩小它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:36:44.783

你不应该。只需在绘图程序或图像编辑器/转换器中创建缩小（非 Retina）图像并将其添加到您的项目中。

理由：Retina 纹理使用的内存是 SD 纹理的 4 倍。同时，非 Retina 设备的内存更少，马力更小。动态缩减会牺牲内存和性能，并且需要额外的代码来执行缩减。这既浪费**又**不方便：不要这样做。

唯一的好处是捆绑包的大小略小，但有更好的方法来减少捆绑包的大小（pvr 纹理、减少颜色深度、删除未使用的资源、如果您还没有使用它们的纹理图集......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:37:31.073

```
CCSprite *item;

if(CC_CONTENT_SCALE_FACTOR() == 1)
{
    item.scale = 0.5f
} 
```

# java - SQL Developer 中的“取消查询”如何工作

> ID：14957105
> 
> 赞同：3
> 
> 时间：2013-02-19T12:06:46.500
> 
> 标签：java, performance, oracle, oracle11g, oracle-sqldeveloper

在 SQL Developer 中，单击“取消任务”按钮会立即停止执行查询。我必须在我们的项目中实现相同的功能。

![取消查询](../Images/5af70196295ea6b3b7cdc7168a12cd57.png)

我使用 BC4J 作为 ORM 工具来执行查询。我必须取消一个名为 thorugh view objects 的搜索查询执行，它调用几个数据库函数/过程来获得结果。

我尝试过使用`viewObject.cancelQuery();`，但没有任何效果；查询一直执行到最后。

我通过 BC4J 处理的 JDBC 连接池进行连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:12:47.517

我的建议是

*   提交查询时
    *   阻止任何 UI 命令接受“取消”（最简单的方法：为此使用模式对话框，更方便用户：仅阻止本地视图命令）
    *   在不同于 UI 线程的单独线程中启动查询，使用一个`Runnable`实现
        *   有自己的`cancel()`方法
            *   分别打电话`cancelQuery`。`cancel`您的查询
            *   `<query thread>.interrupt()`使用;将此事件发送给您的可运行查询 为此，您需要将对查询线程的引用存储在`<query thread>`. 活动的 IO 操作有时会被此信号中断！
        *   能够处理`InterruptedException`并且`SQLException`在`run()`：如果这些异常被捕获回滚事务（如果一个为只读查询启动）
        *   如果此可运行文件中有多个长时间运行的语句，则`Thread.currentThread().isInterrupted()`在每个语句之后检查，`cancel()`如果结果为真
*   在完成查询时将其结果与您的 UI 同步
*   取消时：
    *   调用`cancel()`您的查询可运行
    *   忘记线程（但如果有太多取消的线程仍未完成，请确保不要耗尽系统资源或连接池）
    *   解锁您的用户界面

Swing 和 Eclipse RCP 中都有支持这种设计的辅助类。

# wordpress - wordpress中有一些要求的popup的解决方案

> ID：14957108
> 
> 赞同：1
> 
> 时间：2013-02-19T12:07:01.290
> 
> 标签：wordpress

注意：这些应该在 wordpress 中完成。

1.  弹出窗口包含带有移动号码和电子邮件 ID 的必填字段。

2.用户在未输入必填项的情况下不应进入索引页面。

3.点击提交按钮后，感谢信息应该会到达给定的手机号码。

4.点击提交按钮后，弹窗会自动消失，可以进入索引页面。

请尽快帮助我。

# python - 使用 cron 运行时在 Linux 服务器中找不到某些文件

> ID：14957111
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:07:07.650
> 
> 标签：python, linux, ssh, cron, crontab

我在 Linux 服务器上运行我的 python 脚本，当我使用 ssh 在远程终端上运行它时，它们运行成功。但是当我使用 crontab 文件运行命令时，它找不到安装在服务器中的某些文件。当我使用 cron 运行脚本时，它有什么不同？cron 文件与我的 python 脚本位于同一目录中。我正在使用安装在 postgresql installasion 文件夹中的“raster2pgsql”加载程序。错误信息是：

```
sh: raster2pgsql: not found 
```

我的 cron 文件内容是：

```
*/2 * * * *  /usr/bin/env python /home/testexe/LST.py >> /home/testexe/LST.log 2>&1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:11:10.933

Cron 使用比终端更“简单”的环境运行命令。具体来说，它可能不包括在您的 ~/.bashrc 或 ~/.bash_profile 或类似文件中完成的任何设置，这通常包括将内容添加到 $PATH （或者在您的情况下可能是 $PYTHONPATH ）。

您可能只需要在 cron 作业的前面设置一些环境变量，如下所示：

```
00 00 * * * PYTHONPATH=/foo/bar yourprog arg1... 
```

编辑：现在在问题中添加了内容，我会说尝试这样的事情：

```
*/2 * * * * PATH=/foo/bar /home/testexe/LST.py >> /home/testexe/LST.log 2>&1 
```

您应该将 /foo/bar 替换为包含`raster2pgsql`错误消息中提到的程序的任何目录。如果您不知道它在哪里，请尝试运行`locate raster2pgsql`.

请注意，我故意删除了`/usr/bin/env python`您在那里的内容——它应该放在脚本顶部的“shebang 行”中。这必须是文件的第一行，并且应该如下所示：

```
#!/usr/bin/env python 
```

然后，只需`chmod +x /home/testexe/LST.py`将该文件标记为可执行文件，您就可以在不从外部显式调用 python 的情况下运行它——无论是在 cron 还是在终端中。

# android - 共享 App 组件

> ID：14957115
> 
> 赞同：0
> 
> 时间：2013-02-19T12:07:22.200
> 
> 标签：android, service, process, share

我有一个应用程序 A，它包含活动、服务和接收器。我需要修改我的代码，以便将来的任何应用程序（例如：B 和 C）都可以启动位于应用程序 A 中的服务，并可能访问其首选项文件。

但是，我想限制对应用程序 A 组件的访问仅限于我开发的应用程序。

有人可以为我指出正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:13:33.607

它可以通过组件的权限来完成。

> 应用程序还可以通过权限保护自己的组件（活动、服务、广播接收器和内容提供者）。它可以使用 Android 定义的任何权限（在 android.Manifest.permission 中列出）或其他应用程序声明的权限。或者它可以定义自己的。使用该元素声明了一个新权限。

有关示例，请参阅[此文档](http://developer.android.com/guide/topics/manifest/manifest-intro.html#perms)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:32:15.893

我刚刚找到了解决方案：

在两个应用程序上使用相同的 android:sharedUserId 将完全符合我的需要。

# pandas - 如何根据布尔标准拆分数据帧？

> ID：14957116
> 
> 赞同：8
> 
> 时间：2013-02-19T12:07:28.053
> 
> 标签：pandas

假设这`df`是一个`pandas`数据框。我想根据一些标准将它分成两个数据框。我发现这样做的最好方法是

```
df0, df1 = [v for _, v in df.groupby(df['class'] != 'special')] 
```

在上面的示例中，标准是`groupby`方法的参数。结果由字段*具有*值`df0`的子数据帧组成，基本上是 的补码。*（不幸的是，使用这种结构，首先返回由不*符合标准的项目组成的子数据框，这不直观。）`class`*`'special'``df1``df0`*

 **上面的结构有一个缺点，它不是特别可读，当然不像，例如，一些假设的`splitby`方法，如

```
df0, df1 = df.splitby(df['class'] == 'special') 
```

由于像这样拆分数据框是我经常需要做的事情，我认为可能有一个内置函数，或者可能是一个既定的习惯用法，可以做到这一点。如果是这样，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T12:22:05.063

我认为最易读的方法是：

```
m = df['class'] != 'special'
a, b = df[m], df[~m] 
```

*我还没有遇到这种特殊的方法......***

# nunit - AppDomain 中的冒号导致 log4net.Util.PatternString 出现问题

> ID：14957121
> 
> 赞同：2
> 
> 时间：2013-02-19T12:07:32.547
> 
> 标签：nunit, resharper, log4net, appdomain, gallio

我正在使用 ReSharper 7.1.1、NUnit 2.6.0 和 log4net 1.2.10。

在我的 log4net 配置中，我有一个 RollingFileAppender：

```
<appender name="file" type="log4net.Appender.RollingFileAppender">
    <file type="log4net.Util.PatternString" value="%appdomain.log" />
    <appendToFile value="true" />
    <rollingStyle value="Size" />
    <maxSizeRollBackups value="0" />
    <maximumFileSize value="5MB" />
    <staticLogFileName value="true" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%utcdate{ISO8601} %-5level - %message%newline" />
    </layout>
    <threshold value="ALL" />
</appender> 
```

当我的单元测试代码运行时，我收到以下错误：

```
log4net:ERROR XmlHierarchyConfigurator: Could not create Appender [file] of type [log4net.Appender.RollingFileAppender]. Reported error follows.
System.NotSupportedException: The given path's format is not supported.
   at System.Security.Util.StringExpressionSet.CanonicalizePath(String path, Boolean needFullPath)
   at System.Security.Util.StringExpressionSet.CreateListFromExpressions(String[] str, Boolean needFullPath)
   at System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, AccessControlActions control, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList)
   at System.IO.Path.GetFullPath(String path)
   at log4net.Util.SystemInfo.ConvertToFullPath(String path)
   at log4net.Appender.RollingFileAppender.ActivateOptions()
   at log4net.Repository.Hierarchy.XmlHierarchyConfigurator.ParseAppender(XmlElement appenderElement) 
```

这样做的原因是 log4net`%appdomain`值取自 AppDomain.CurrentDomain.FriendlyName 值，即：

```
IsolatedAppDomainHost: MyProject.Tests 
```

因为这个 AppDomain 名称包含一个冒号，所以它无法将其转换为文件名，即 %`appdomain.log`变为`IsolatedAppDomainHost: MyProject.Tests.log`

我正在寻找一些解决方法的建议：

*   我可以以某种方式覆盖 AppDomain 值，仅用于单元测试项目吗？
*   我可以修改`log4net.Util.PatternString`它以去掉冒号吗？
*   我可以配置 ReSharper 测试运行器来避免这个问题吗？
*   这是否已在我正在使用的任何工具的较新版本中得到修复？我在其他地方找不到关于这个问题的任何提及。

如果没有，我可以尝试向 Gallio 或 log4net 提交拉取请求 - 尽管我不确定在这种情况下哪个是“错误”？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:17:01.820

> 我可以修改 log4net.Util.PatternString 以去掉冒号吗？

可能不是一个好主意，因为这最终可能会在其他地方删除冒号。

您可以下载 log4net 源代码并在 file 属性上添加一些验证，但如果您不想这样做，您可以实现自己的 Appender 覆盖 File 属性，例如

```
public class SaferRollingFileAppender : log4net.Appender.RollingFileAppender
{     
    virtual public string File
    {
        get { return base.File ; }
        set { base.File = value.Replace(":",""); }
    }
} 
```

如果这完全验证了名称而不是仅仅检查冒号，显然会更好。（原本以为是删除所有 Path.GetInvalidFileNameChars() 和 Path.GetInvalidPathChars() 字符的问题，但没有那么简单，所以我把它留给读者练习。）

缺点是任何使用你的类的东西都需要能够找到它包含的程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T22:53:58.623

这对我有用：

```
public class SafeRollingFileAppender : log4net.Appender.RollingFileAppender
{
    public override string File
    {
        get { return base.File; }
        set 
        {
            //remove that pesky colon
            string newValue = value.Replace(":", "");

            //now do some general purpose cleanup
            string dir = Path.GetDirectoryName(newValue);
            string file = Path.GetFileName(newValue);

            string dirRegexSearch = new string(Path.GetInvalidPathChars());
            Regex dr = new Regex(string.Format("[{0}]", Regex.Escape(dirRegexSearch)));
            string newDir = dr.Replace(dir, "");

            string fileRegexSearch = new string(Path.GetInvalidFileNameChars());
            Regex fr = new Regex(string.Format("[{0}]", Regex.Escape(fileRegexSearch)));
            string newFile = fr.Replace(file, "");

            base.File = Path.Combine(newDir, newFile);
        }
    }
} 
```

# web-applications - 带有 UI 服务的 Google webapp - 在弹出窗口中运行另一个 webapp url

> ID：14957123
> 
> 赞同：1
> 
> 时间：2013-02-19T12:07:32.943
> 
> 标签：web-applications, user-interface, google-apps-script

不知何故，我认为这应该很容易，但我找不到如何去做。我在 Google Drive 电子表格中创建了一个 webapp。在 web 应用程序中，我使用 Ui 服务并在按下按钮时使用它来创建弹出窗口。我想做的是，当我单击一个按钮时，我想打开一个弹出面板并在其中通过调用 https url 并在第一个弹出窗口中显示第二个 webapp 来运行另一个 webapp。

有谁知道这是否可以在 Apps 脚本中使用 UIServices ？

谢谢，

保罗

# php - 雄辩，通过关系搜索

> ID：14957124
> 
> 赞同：0
> 
> 时间：2013-02-19T12:07:52.653
> 
> 标签：php, laravel, eloquent

通过关系搜索（如`WHERE name LIKE %acme%`）字段值的正确程序是什么？

假设我们有一个`Client`模型 belongs_to `Company`。现在我想通过`$client->company->name`字段过滤（搜索）。

我试过了`Client::where('company.name', 'LIKE', 'acme')->get();`

但它不起作用...

我已经设置了急切的加载...`$includes = array('company')`

编辑：忘了提到我的关系正在运作......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:39:30.113

现在我有了更好的理解——Laravel 急切加载不使用 JOIN 查询，这与其他 ORM 方法不同，据说仍然可以使用 Fluent Query Builder 结构将 Eloquent 与 join 结合使用。因此，您将无法使用 Eloquent 按相关模型的值进行搜索。使用 Fluent 接口进行连接： http: [//laravel.com/docs/database/fluent#joins](http://laravel.com/docs/database/fluent#joins)

您仍然可以通过执行 Client::join( ... 来将流利的界面与您的 elequent 模型一起使用。对于这种功能，您应该查看类似 Doctrine 的东西。不过，请为更陡峭的学习曲线做好准备

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:22:15.763

尝试使用急切加载：

```
$client = Client::with(array('company' => function($query) {
    $query->where('name', 'LIKE', 'acme');
}))->first(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-17T08:04:45.877

**尝试这个**

您可以通过在 eloquent 中使用 join 方法来实现。

```
Client::join('companies AS company', 'clients.company_id', '=', 'company.id')
       ->select('clients.*', 'company.name AS company_name')
       ->with('company')
       ->where(function($query) {
           $query->where('company_name', 'LIKE', 'acme');
       })
       ->get(); 
```

如您所见，我将公司表加入到客户中，以便在返回数据上有一个***company_name 。***因此，您可以轻松搜索公司名称为“acme”的客户。

# php - 上传图像并从 php 获取响应并重新加载相同的图像。AJAX 上传

> ID：14957127
> 
> 赞同：0
> 
> 时间：2013-02-19T12:08:00.870
> 
> 标签：php, jquery, ajax, file-upload

我有一个个人资料页面，其中默认图像为 (no_image.jpg)。下面有一个选项，用户可以上传他的图像​​。一旦用户选择了图像并在对话框中单击打开，图像应该上传到服务器并且响应应该用他的新图像替换（no_image.php）。我尝试使用谷歌搜索和堆叠以获得我需要的确切输出。但我找不到那个。

`style`

```
#upload_progress {display:none;} 
```

`HTML`

```
 <div id="upload_progress">
    </div>
<form enctype="multipart/form-data" method="post" action="">
        <input type="file" name="file" id="file" onchange="uploadFile()"/>
        <input type="submit" name="submit" />
    <form> 
```

`js`

```
var handleUpload = function(event){
    event.preventDefault();
    event.stopPropagation();

    var fileInput = document.getElementById('file');

    var data = new FormData();

    data.append('ajax', true)
        data.append('file', fileInput.files);

    var request = new XMLHttpRequest();

    request.upload.addEventListener('progress', function(event){
        if(event.lengthComputable){
            var percent = event.loaded  /event.total;
            var progress = document.getElementById('upload_progress');

            while(progress.hasChildNodes()){
                progress.removeChild(progress.firstChild);
            }
            progress.appendChild(document.createTextNode(Math.round(percent*100) + '%'))
        }
    });

    request.upload.addEventListener('load', function(event){
        document.getElementById('upload_progress').style.display = 'none';
    });

    request.upload.addEventListener('error', function(event){
        alert('upload failed');
    });

    request.addEventListener('readystatechagne', function(event){
        if(this.readyState == 4){
            if(this.status == 200){
                var links = document.getElementById('uploaded');

                console.log(this.response);
                var uploaded = eval(this.response);

                var div, a;

                div = document.createElement('div');
                a = document.createelement(a);

                a.setAttribute('href', 'files/'+uploaded);
                a.appendChild(document.createTextNode(uploaded[i]));

                div.appendChild(a);
                links.appendChild(div);

            }else{

            }
        }
    });

    request.open('POST', '/profile');
    request.setRequestHeader('Cache-Control', 'no-cache');

    document.getElementById('upload_progress').style.display = 'block';
    request.send(data);
}

window.addEventListener('load', function(event){
    var submit = document.getElementById('submit');
    submit.addEventListener('click', handleUpload);
}); 
```

`PHP`

```
if($_FILES['file'] != '')
{
    //print_r($_FILES);

        $filename = basename($_FILES['file']['name']);

        $sqlUpdate  =   mysql_query("UPDATE tableA SET user_img = '".$filename."' WHERE email = '".$userEmail."'");
        $newname = '\images\profile/'.$filename;

        if($_FILES['file']['error'] == 0 && move_uploaded_file($_FILES['file']['tmp_name'], $newname));
        $Uploaded = $filename;
}

if(!empty($_POST['ajax'])){
    die(json_encode($Uploaded));
    exit();
} 
```

帮手将不胜感激。提前致谢 ！！...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:16:47.473

据我所知（可能是我的知识已经过时）您不能通过 AJAX 发送图像。

将您的表格更改为

```
<iframe id="hiddenIframe"></ifram>
<form enctype="multipart/form-data" method="post" action="pageGettingData.php" target="hiddenIframe">
    <input type="file" name="file" id="file" onchange="uploadFile()"/>
    <input type="submit" name="submit" />
<form> 
```

并在`uploadFile()`函数中使用将提交表单的代码。

现在数据将以正常形式上传，但会上传到不会导致任何重定向等的隐藏 iframe。

在你的 PHP 代码中

```
if($_FILES['file'] != '')
{
    //print_r($_FILES);

        $filename = basename($_FILES['file']['name']);

        $sqlUpdate  =   mysql_query("UPDATE mp_project_buyer_query SET user_img = '".$filename."' WHERE email = '".$userEmail."'");
        $newname = '\images\profile/'.$filename;

        if($_FILES['file']['error'] == 0 && move_uploaded_file($_FILES['file']['tmp_name'], $newname));
        $Uploaded = $filename;

        echo '<script>parent.updateImage("' . $Uploaded . '");'; // add a javascript
}

if(!empty($_POST['ajax'])){
    die(json_encode($Uploaded));
    exit();
} 
```

现在当 php 获取图像时，它会调用一个 JS 函数，因为 JS 在隐藏的 Iframe 中，我们要在父文件上调用该函数。

在你的 HTML 文件中，创建一个新的 JS 函数`updateImage`

```
function updateImage(imgPath){
    $('#userImage").attr('src': imgPath);
} 
```

这个 JS 会用新上传的图片路径更新图片路径。您可能必须修复变量和图像路径才能使其正常工作。我只是快速写了它们

# java - Jax RS REST API - OAuth 2.0 和控制源

> ID：14957129
> 
> 赞同：3
> 
> 时间：2013-02-19T12:08:21.983
> 
> 标签：java, rest, jax-rs

我有一个使用 Java JAX-RS 构建的 REST API，该 API 将公开并受 OAuth 2.0 保护。

我计划从我正在构建的内部项目中使用这个 API，因为它是我的 API，我不希望用户授权我调用这个 API。

现在，我正在使用过滤器来检查访问令牌并根据我的 OAuth 提供程序验证它，配置示例：

```
<!-- Exposing the facility service as a REST service -->
<jaxrs:server id="restContainer" address="/">
    <jaxrs:serviceBeans>
      .. services beans
    </jaxrs:serviceBeans>
    <jaxrs:providers>
      <ref bean="oauthFilter"/> <-- filter to validate oauth
      <ref bean="apiUsageFilter"/> <-- filter to check api usage (integrated with 3scale)
      <ref bean="jacksonProvider" />
      <ref bean="exceptionMapper" />
    </jaxrs:providers>
    <jaxrs:extensionMappings>
      <entry key="json" value="application/json" />
      <entry key="xml" value="application/xml" />
      <entry key="html" value="text/html" />
    </jaxrs:extensionMappings>
    <jaxrs:features>
      <bean class="org.apache.cxf.feature.LoggingFeature"/>  
    </jaxrs:features>
</jaxrs:server> 
```

我想知道我是否可以实现一个新的过滤器来检查呼叫的来源，如果它来自列出的 ip(s)/domain(s) 则绕过 oauth，如果不是，则继续 oauth。

这种方法可能吗？这是一个好习惯吗？优点和缺点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T17:02:30.543

解决方案很简单：我们在 OAuth 2.0 服务器中为服务器到服务器应用程序实现了客户端授权授权，并为移动应用程序（没有后端）实现了资源所有者凭据授权。

# javascript - 播放音频时运行 javascript 函数

> ID：14957133
> 
> 赞同：-2
> 
> 时间：2013-02-19T12:08:34.853
> 
> 标签：javascript, html

每当使用 HTML5 播放音频文件时，我都想运行一个 javascript 函数。我该怎么做？

如果可能的话，也可以看视频！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:10:30.677

HTML5`audio`元素包含`onplay`事件。您可以按如下方式绑定到它：

```
var myAudio = document.getElementById('audio_element');
myAudio.onplay = function(e) {
    // Your JavaScript function here...
}; 
```

该`video`元素还包括此事件。

# command - nntp 命令 LIST HEADERS 的确切语法是什么

> ID：14957137
> 
> 赞同：0
> 
> 时间：2013-02-19T12:08:42.890
> 
> 标签：command, nntp

我已经浏览了命令语法的所有 RFC 文档，`LIST HEADERS` 我在[https://www.rfc-editor.org/rfc/rfc3977#section-8.6](https://www.rfc-editor.org/rfc/rfc3977#section-8.6)找到了一些东西，但它似乎不完整。

我得到了：

列表标题 [MSGID|范围]

有一个RANGE参数和MSGID参数，我的问题是如何用in命令指定RANGE。当然我试过了

列表标题 20-120

对于此服务器 `501 no such list available` ，不仅针对该范围返回我，即使对于任何范围，我都会得到相同的回复（即使对于不同的选定组也是如此）。

请任何人告诉我命令语法或我的理解或服务器有问题吗？我是否以正确的方式指定范围以及 MSGID 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:33:48.387

服务器是否报告了 HDR 功能？此命令要求服务器通告该功能以使其受支持。

# ios - Restkit v0.2 映射设置为 NSDictionary

> ID：14957138
> 
> 赞同：1
> 
> 时间：2013-02-19T12:08:45.163
> 
> 标签：ios, restkit

我有以下 json 响应

```
{
  "entities": [
    {
      "columns": [
        {
          "datatype": "STRING", 
          "hidden": false, 
          "name": "key1", 
          "position": 0, 
          "title": "barcode", 
          "value": "0000000117"
        }, 
        {
          "datatype": "DATE", 
          "hidden": false, 
          "name": "key2", 
          "position": 1, 
          "title": "order Date", 
          "value": 1307563633000
        }
      ]
    }
  ]
} 
```

我想将此映射到一个 NSDictionary，其中“名称”变量将作为键，其余的（“数据类型”、“隐藏”...）将映射到一个类。

目前我将它们映射到 NSSet 并在响应中将它们转换为 NSDictionary。

```
 for (SREntity * restEntity in mappingResult.array) {
            for (SRColumn *column in restEntity.columnsSet) {

                [restEntity.columns setObject:column forKey:column.name];
            }
        } 
```

但我想知道是否有办法直接进行映射。

类似于：

```
NSDictionary* columns ->

columns.name : columns.key,
columns : columns.value for columns.key 
```

这有可能吗？

# html - 将参数传递给离线缓存页面不起作用

> ID：14957139
> 
> 赞同：1
> 
> 时间：2013-02-19T12:08:45.273
> 
> 标签：html, offline-caching, offlineapps, app-offline.htm

我正在制作一个 HTML5 离线应用程序，它当然使用“清单”文件来告诉浏览器要下载的页面，问题是当我调用以前缓存的页面在 URL 中传递参数时它不起作用......它如果我在清单文件中包含带有参数的全长 URL，则可以使用。有人遇到过这个问题吗？有没有办法超越这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T16:42:54.433

您可以使用会话存储。请参阅此示例[http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_webstorage_local](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_webstorage_local)。

# c# - 执行几种方法

> ID：14957140
> 
> 赞同：-9
> 
> 时间：2013-02-19T12:08:45.600
> 
> 标签：c#, html, visual-studio-2010, browser

如何执行几个方法，但每个方法都要等到前一个加载网页？例子：

```
methode1(){
webBrowser1.Navigate("http://test.com");
}
methode2(){
webBrowser1.Navigate("http://test2.com");
}

methode1();
methode2(); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-19T12:12:28.040

运行 async 另一个方法，它同时执行几个方法

```
methode1(){
   webBrowser1.Navigate("http://test.com");
}
methode2(){
   webBrowser1.Navigate("http://test2.com");
}

public void BatchRun()
{
   methode1(); // run sync
   methode2(); // run sync after Method1
}

// ...

Action toRun = BatchRun;
toRun.BeginInvoke(null, null); // Run async 
```

# asp.net-mvc - 创建一个更复杂的登录页面.. 哪个成员？

> ID：14957141
> 
> 赞同：0
> 
> 时间：2013-02-19T12:08:50.763
> 
> 标签：asp.net-mvc, login, membership

我想在我的登录屏幕上执行两个步骤，UserGroup 和 UserName 之类的；

A组

*   用户 ID=1 用户名=ahmet
*   UserID=2 用户名=mehmet, name=mehmet, surname=demir
*   UserID=3 用户名=ali, name=ali, surname=bakır

B组

*   用户 ID=4 用户名=veli
*   UserID=5 用户名=mehmet, name=mehmet, surname=çelik
*   UserID=6 用户名=ali, name=ali, surname=pirinç

[http://i.stack.imgur.com/0dasj.png](http://i.stack.imgur.com/0dasj.png)

当 Mehmet Demir 想要登录时，他必须使用 aGroup、mehmet 和他的密码，当 Mehmet Çelik 想要登录时，他必须使用 bGroup、mehmet 和他的密码。

**我必须使用哪个会员资格？**

我尝试使用 ASP.NET SimpleMembership；我的数据库图是；

[http://i.stack.imgur.com/yVpKp.png](http://i.stack.imgur.com/yVpKp.png)

我试着这样

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (model.UserGroupName != null)
        {
            UsersContext userContext = new UsersContext();
            DbEntities db = new DbEntities();
            var userGroupName = model.UserGroupName;
            var userGroupID = db.UserGroups.Where(a => a.UserGroupName == userGroupName).Select(b => b.UserGroupID).Single();
            var userName = userContext.UserProfiles.Where(c => c.UserGroupID == userGroupID).Select(d => d.UserName);

            if (userName.Contains(model.UserName))
            {
                if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password))
                {
                    return RedirectToLocal(returnUrl);
                }
            }

        }
        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "User group, username or password is incorrect..");
        return View(model);
    } 
```

它可以工作，但是当我想创建新用户时，我当然不能在不同的用户组中注册相同的用户名..

如何自定义 SimpleMembership 帐户控制器或帐户模型？**或使用其他会员资格？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:28:32.750

我可能没有正确理解你的问题。如果要向多个组注册相同的用户名，则需要不同的数据库设计。您将需要创建一个映射表，例如具有 UserId 和 GroupId 的 UsersInGroups。这样，您的用户就可以拥有多个与之关联的组。

然后，您可以查询该表，获取用户 ID 的所有记录并获取所有关联的组并比较它是否与输入的组匹配。

# service - 如何在应用终止Android时取消服务

> ID：14957143
> 
> 赞同：3
> 
> 时间：2013-02-19T12:08:54.233
> 
> 标签：service, background

当我的应用程序终止时，如何停止服务在后台运行？我希望该服务在应用程序处于后台时处于活动状态，但是当应用程序关闭时，我需要该服务停止。

我在属于 myActivity 的方法 onStop() 中调用以启动服务，然后在方法 onStart() 中停止它。

但最大的问题是当我终止应用程序进程时，我可以在 Logcat 中看到该服务仍在运行。

谁能告诉我只有当我的应用程序在后台时我应该如何运行服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-14T08:22:03.397

如果您在 Application 类中使用 .bind() 方法启动服务，则无需手动处理。如文档所述：“绑定服务仅在另一个应用程序组件绑定到它时运行。”

您可以在官方手册[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)的前 5 句话中找到此信息。请考虑在向 SO 发布问题之前阅读手册。

# java - Android 蓝牙：Java.IO.IOException：成功 - 这是什么意思？

> ID：14957144
> 
> 赞同：0
> 
> 时间：2013-02-19T12:08:54.670
> 
> 标签：java, android, bluetooth, logcat, ioexception

这是我的 PC 的快照，其中在 Logcat 中记录了此日志消息：

![不知道它是什么。](../Images/9c74393a54f7c99b682b08b578f76ff6.png)

有谁知道这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:32:36.050

这似乎不是被广泛报道的东西，我承认它是我的新东西！我唯一能说的是，在如何最好地`BluetoothSocket`在不同设备上创建 a 方面肯定存在一些差异。看看这个问题，它*可能*是相关的：[BluetoothServerSocket accept failed and throws an IOException](https://stackoverflow.com/questions/11428820/bluetoothserversocket-accept-fails-and-throws-an-ioexception)

# java - Spring Framework中JDBC逻辑的一些疑惑

> ID：14957147
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:09:08.847
> 
> 标签：java, database, spring, spring-mvc, jdbc

我正在按照本教程研究 Spring Framework 上的 JDBC 使用：[http ://www.tutorialspoint.com/spring/spring_jdbc_example.htm](http://www.tutorialspoint.com/spring/spring_jdbc_example.htm)

所以我在 MySql DB 上有一个名为 Student 的表：

```
mysql> describe Student;
+-------+-------------+------+-----+---------+----------------+
| Field | Type        | Null | Key | Default | Extra          |
+-------+-------------+------+-----+---------+----------------+
| ID    | int(11)     | NO   | PRI | NULL    | auto_increment |
| NAME  | varchar(20) | NO   |     | NULL    |                |
| AGE   | int(11)     | NO   |     | NULL    |                |
+-------+-------------+------+-----+---------+----------------+ 
```

正如您在教程链接中看到的那样，我有一个名为**StudentDAO**的接口，它描述了我的 DAO 对象的这个 Student 表上的 CRUD 操作

好的，看看**StudentJDBCTemplate**类：这是 StudentDAO 接口的一个实现**，**所以在这个类中，我拥有在接口内声明的 CRUD 方法的所有实现。

好的...我对此类中的 JDBC 方法的含义有些怀疑。

例如，当我有类似的东西时：

```
public void create(String name, Integer age) {
    String SQL = "insert into Student (name, age) values (?, ?)";

    jdbcTemplateObject.update(SQL, name, age);
    System.out.println("Created Record Name = " + name + " Age = " + age);
    return;
} 
```

好的...我认为这种方法会在我的学生表中**创建一个新记录。**

**SQL 变量包含一个表示我的查询**的字符串，在这里我有第一个疑问

当我有：

**String SQL = "插入学生（姓名，年龄）值（？，？）";**

究竟是什么意思？这意味着我的create（）的两个输入参数代替了这个String的“name”和“age”？

嗯...这对我来说听起来很奇怪，因为这看起来像一个字符串（实际上是“”）

第二个疑问与以下行有关：

```
jdbcTemplateObject.update(SQL, name, age); 
```

如果我在 SQL 字符串中有 SQL 查询，为什么还要传递变量名和年龄？

你能帮助我理解 JDBC 是如何工作的吗？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:11:26.510

这

```
insert into Student (name, age) values (?, ?) 
```

表示您正在向表中插入一条记录（行）`Student`，并指定（按顺序）名称和年龄。每个 '？' 指的是按顺序指定的列名，所以第一个'?' 是名称值等的占位符。请注意，您可以插入记录并且（允许约束）仅指定列的子集，因此您可以只指定名称*或*年龄，或者如果该列存在，则可以指定其他内容。

这种占位符 (?) 机制的存在使您不必担心转义您的值`name`等，并通过连接/替换产生[无效](http://xkcd.com/327/)的 SQL 语句。占位符允许您为名称插入任何字符串，而不必担心引号、SQL 注释等，如果您只是使用连接构造字符串，则会导致问题，例如

```
String sql = "insert into Student... " + name + ", " + age; 
```

注意姓名和年龄

```
jdbcTemplateObject.update(SQL, name, age); 
```

引用 Java 变量而不是表列名。他们可以很容易地

```
jdbcTemplateObject.update(SQL, x, y); 
```

在幕后，SPring 将使用[PreparedStatements](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)，阅读这些内容很有指导意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:23:03.003

> 当我有：
> 
> **String SQL = "插入学生（姓名，年龄）值（？，？）";**
> 
> 究竟是什么意思？这意味着我的create（）的两个输入参数代替了这个String的“name”和“age”？

JDBC 将用`?`适当的值替换这两个占位符。这被视为一种很好的做法，因为它有助于防止 SQL 注入。

# c - C：在函数中通过引用传递二维数组以及如何在内部使用它们

> ID：14957148
> 
> 赞同：0
> 
> 时间：2013-02-19T12:09:10.547
> 
> 标签：c, arrays

我想要一个执行以下操作的函数：

```
int doFunction(int* nIndex)
{

  //nIndex is a 2-D array of any size.
// I would like to fill this array inside this function.
//Eg: in nIndex[2][3], i would like to put 5.

}

int result;
int myIndex[5][6];

result = doFunction(myIndex); 
```

有人可以帮我做两件事吗：1.上面的语法对于需要任意大小的二维数组的函数定义是否正确？2\. 当我将 myIndex 传递给函数时，语法是否正确？3\. 如何在函数中填充数组，或者如何访问其字段？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:15:26.203

声明和定义：

```
// either void fill_arr(int arr[][5]) or:
void fill_arr(int arr[3][5])
{
    int i j;
    for (i = 0; i < 3; i++) {
        for (j = 0; j < 5; j++) {
            arr[i][j] = 42;
        }
    }
} 
```

来电：

```
int arr[3][5];
fill_arr(arr); 
```

# android - 我想获得启动应用程序的时间

> ID：14957150
> 
> 赞同：0
> 
> 时间：2013-02-19T12:09:17.403
> 
> 标签：android, process

我想获取正在运行的应用程序进程的开始时间

有没有可能

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:48:48.530

您可以在第一个活动开始时从**System.getCurrentTimeMillis()**获取值并将其用于您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:55:22.947

您可以为此使用应用程序。在 Application 中，您将有 oncreate 那是确切的应用程序启动时间。它也像活动一样。

```
public class Ap extends Application {
@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
}
} 
```

在清单中，您需要添加如下

```
<application
        android:allowBackup="true"
        android:name="Ap"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" > 
```

希望这会帮助你。

# ajax - Twitter bootstrap Typeahead 填充href

> ID：14957152
> 
> 赞同：0
> 
> 时间：2013-02-19T12:09:20.897
> 
> 标签：ajax, href, bootstrap-typeahead

我正在使用带有 ajax 调用的 bootstrap typeahead 来为我的网站创建一种即时搜索。除了 Typeahead 似乎只能处理标题而不是 href 之外，这一切都很好。例子：

我的 PHP 代码是这样的：

```
$results = mysql_query("MY SELECT QUERY GOES HERE");

$array = array();

while ($row = mysql_fetch_assoc($results)){
    $array[] = $row['title'];
}

echo json_encode($array); 
```

我的 Javascript 在这里：

```
$('#quickSearch').typeahead({
    source: function (query, process) {

        $.ajax({
            url: "my_php_file.php",
            type: "POST",
            data: 'query=' + query,
            dataType: 'JSON',
            async: true,
            success: function(data){
                  console.log(data)
                  process(data)
            }
        })
    }
}); 
```

...一起，这些结果产生了这个 HTML：

```
<ul class="typeahead dropdown-menu" display: block;">
     <li data-value="Baltimore" class="active">
           <a href="#"><span class="highlighter">B</span>altimore</a>
     </li>
</ul> 
```

process 函数是 Bootstrap 内置的函数，它获取每个结果的标题并用它填充下拉列表。我也希望能够从我的数据库中获取 href，然后下拉列表中的链接将真正起作用，而不仅仅是为了展示。

问题是，如果我写`$array[] = array("title"=>$row['title'],"href"=>$row['link']");`在我的 PHP 文件中，它会破坏一切，因为大概 process() 无法处理额外的数据。

有没有人有什么建议？关于 Typeahead 的更多信息可以在这里找到：http: [//twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:43:08.703

您可以对结果使用 JSON 格式并定义一些选项，例如“matcher”、“sorter”、“updater”等：

PHP

```
$results = mysql_query("MY SELECT QUERY GOES HERE");
$array = array();
while ($row = mysql_fetch_assoc($results)){
    $array[] = array("title"=>$row['title'],"href"=>$row
}
echo json_encode($array); 
```

Javascript：

```
$('#quickSearch').typeahead({
    source: function (query, process) {

        $.ajax({
            url: "my_php_file.php",
            type: "POST",
            data: 'query=' + query,
            dataType: 'JSON',
            async: true,
            success: function(data){
                       var resultList = data.map(function (item) {
                       var link = { href: item.href, name: item.title };
                       return JSON.stringify(link);
                     });
                return process(resultList);
            }
        })
    },

    matcher: function (obj) {
        var item = JSON.parse(obj);
        return ~item.title.toLowerCase().indexOf(this.query.toLowerCase())
    },

    sorter: function (items) {          
       var beginswith = [], caseSensitive = [], caseInsensitive = [], item;
       while (link = items.shift()) {
            var item = JSON.parse(link);
            if (!item.title.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(JSON.stringify(item));
            else if (~item.name.indexOf(this.query)) caseSensitive.push(JSON.stringify(item));
            else caseInsensitive.push(JSON.stringify(item));
        }

        return beginswith.concat(caseSensitive, caseInsensitive)

    },

    highlighter: function (link) {
        var item = JSON.parse(link);
        var query = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
        return item.title.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {
            return '<strong>' + match + '</strong>'
        })
    },

    updater: function (link) {
        var item = JSON.parse(link);
       $('#quickSearch').attr('href', item.href);
       return item.title;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-30T19:26:25.273

**item.title**仅在 ajax 源函数中使用的这个完美脚本的注释。

其余代码应为**item.name**，如您在以下内容中定义的：

```
var link = { href: item.href, name: item.title }; 
```

# wcf - 在完全 Windows 身份验证的站点和完全匿名的站点上托管无文件 .svc 服务

> ID：14957153
> 
> 赞同：1
> 
> 时间：2013-02-19T12:09:27.967
> 
> 标签：wcf, authentication, anonymous, basichttpbinding, svc

我们有一个通用的 dll（API），它负责在单独的 Web 应用程序上托管无文件 .svc 服务。所以我们的 API 被不同的 Web 应用程序引用。作为服务端点，我们使用 BasicHttpBinding，作为安全模式，我们在 API 上使用“BasicHttpSecurityMode.None”。

如果为 IIS 上的 Web 应用程序启用“匿名身份验证”，我们的无文件 *.svc 已成功托管，我们可以从浏览器调用它并查看元数据。

另一方面，如果 IIS 上的 Web 应用程序禁用“匿名身份验证”并*启用*“Windows 身份验证”，我们会收到错误消息：

“主机上配置的身份验证方案（'IntegratedWindowsAuthentication'）不允许在绑定'MyService'（'Anonymous'）上配置的身份验证方案。请确保将SecurityMode设置为Transport或TransportCredentialOnly。此外，这可以通过更改来解决此应用程序的身份验证方案通过 IIS 管理工具、通过 ServiceHost.Authentication.AuthenticationSchemes 属性、在应用程序配置文件中的元素、通过更新绑定上的 ClientCredentialType 属性或通过调整 HttpTransportBindingElement 上的 AuthenticationScheme 属性。

我想出了如何使用下面给出的代码解决问题。但是我需要知道 IIS 上 Web 应用程序的身份验证状态。我没有找到编程方式来确定当前 Web 应用程序的身份验证状态是什么。也许在 web 应用程序的 web.config 中我们可以手动设置指定的身份验证状态。

web.config 设置

```
<appSettings>
     <add key="IS_ANONYMOUS" value="True"/>
</appSettings> 
```

这里是创建绑定的代码块：

```
 public BasicHttpBinding GetBasicHttpBinding( string bindingName, bool isAnonymous ) {

        BasicHttpBinding binding = new BasicHttpBinding();
        binding.Security.Mode = BasicHttpSecurityMode.None;

        if (!isAnonymous) {
            binding.Security.Mode = BasicHttpSecurityMode.TransportCredentialOnly;
            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Ntlm;
            binding.Security.Transport.ProxyCredentialType = HttpProxyCredentialType.None;
            binding.Security.Transport.Realm = "";
            binding.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.UserName;
            binding.Security.Message.AlgorithmSuite = SecurityAlgorithmSuite.Default;
        }

        binding.Name = bindingName;
        binding.MaxReceivedMessageSize = int.MaxValue;
        binding.ReaderQuotas.MaxStringContentLength = int.MaxValue;
        return binding;
    } 
```

这里我们如何托管服务：

```
 internal static ServiceHost CreateServiceHost( Type implementedContractType, Type serviceType, Uri[] baseAddresses ) {
        ServiceHost host = new ServiceHost( serviceType, baseAddresses );
        BasicHttpBinding binding = GetBasicHttpBinding( serviceType.Name, false );
        host.AddServiceEndpoint( implementedContractType, binding, "" );
        return host;
    } 
```

我的问题是如何创建不受 Web 应用程序身份验证状态影响的服务主机。有没有办法在不知道 Web 应用程序的身份验证状态的情况下创建无文件 .svc 文件并且可以匿名访问？

# php - 24小时显示时间

> ID：14957154
> 
> 赞同：-5
> 
> 时间：2013-02-19T12:09:29.250
> 
> 标签：php

我正在使用 php 日期函数显示当前服务器时间，例如：

```
 date("H:i:s"); 
```

但它在我的本地机器上显示时间 12 小时。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:16:53.663

`date_default_timezone_set('Asia/Calcutta');`调用前使用`date()`。

不知道为什么叫它`Asia/Calcutta`？或许是因为比首都`Allahabad`更近。`Calcutta/Kolkata`

编辑：对于评论中的下一个问题：

您获得`UTC`时间的原因是默认时区设置为`UTC`在 php.ini 中，例如

`date.timezone = UTC`核实。相应地更改它以获得所需的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:14:21.097

像这样试试

```
echo date("H:i:s", time()); 
```

或者试试这个

```
echo date('G:i:s',time()); 
```

它会起作用的

# jquery - 尝试将值设置为文本框时返回对象对象 - Jquery

> ID：14957160
> 
> 赞同：2
> 
> 时间：2013-02-19T12:10:05.740
> 
> 标签：jquery, ajax, textbox

我是使用 Jquery 的新手，所以请原谅我的无知。我从本地 mysql 数据中创建了一个动态列表，当用户选择列表中的一个值时，我希望一些选定的信息出现在文本框中。我成功地收集了我需要的信息并将值设置为各种属性标签。但是，当我最终获得附加到文本框的值之一时，它会说

“[对象对象]”

在文本框中。我阅读了有关将其转换为文本的信息，但似乎无法弄清楚在我的示例练习中究竟需要去哪里。我想知道是否有人可以帮助我？

呈现信息并将值设置为文本框的代码示例如下：

```
 <script type="text/javascript">
    $(document).on('pagebeforeshow', '#index', function(){
        $("#list").empty();
        var url="http://localhost/test/login/json4.php";
        $.getJSON(url,function(json){
            //loop through deals
            $.each(json.deals,function(i,dat){
                $("#list").append("<li><a id='"+dat.dealid+"' data-restaurantid=" + dat.restaurantid + " data-image=" + dat.image + "><h1>"+dat.name+"</h1><p>"+dat.dname+"</p></a></li>");
                $(document).on('click', '#'+dat.dealid, function(event){  
                    if(event.handled !== true) // This will prevent event triggering more then once
                    {
                        dealObject.dealID = $(this).attr('id'); 
                        dealObject.restaurantid = $(this).attr('data-restaurantid');
                        dealObject.name = $(this).find('desc').eq(0).val(this);

                        $.mobile.changePage( "#index2", { transition: "slide"} );
                        event.handled = true;
                    }
                });            
            });
            $("#list").listview('refresh');
        });
    });

    $(document).on('pagebeforeshow', '#index2', function(){       

        $('#index2 [data-role="content"]').find('input#desc').val(dealObject.name);

    });

    var dealObject = {
        dealID : null,
        restaurantid : null,
        name : null,
        image : null,
        dname : null
    }    
</script> 
```

这就是我要展示它的地方：

```
<form id="test">
        <label for="desc">Description</label>
        <input type="text" value="" name="desc" id="desc"/>  
        <a data-role="button" id="submit-button" data-theme="b">Submit</a> 
```

如果有人可以帮助我，我会非常感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:33:19.940

您的主要问题是 dealObject 中的 name 属性，name 是一个特殊词，不能用作对象属性名称。

在您的情况下，您将其添加到正确的输入中，但 dealObject.name 不存在。由于 jQuery Mobile 的工作方式，即使是空元素也会返回“[object Object]”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:21:50.967

您正在尝试将文本的值设置`val(this)`为`this` 来自`each`

如果你想得到你可以说的价值

```
 dealObject.name = $(this).find('desc').eq(0).val(); 
```

如果您正在分配一个值

```
dealObject.name = $(this).find('desc').eq(0).val('My Value');
or 
dealObject.name = $(this).find('desc').eq(0).val(this.something); 
```

所以你的代码

```
 <script type="text/javascript">
    $(document).on('pagebeforeshow', '#index', function(){
        $("#list").empty();
        var url="http://localhost/test/login/json4.php";
        $.getJSON(url,function(json){
            //loop through deals
            $.each(json.deals,function(i,dat){
                $("#list").append("<li><a id='"+dat.dealid+"' data-restaurantid=" + dat.restaurantid + " data-image=" + dat.image + "><h1>"+dat.name+"</h1><p>"+dat.dname+"</p></a></li>");
                $(document).on('click', '#'+dat.dealid, function(event){  
                    if(event.handled !== true) // This will prevent event triggering more then once
                    {
                        dealObject.dealID = $(this).attr('id'); 
                        dealObject.restaurantid = $(this).attr('data-restaurantid');
                        dealObject.name = $(this).find('desc').eq(0).val();

                        $.mobile.changePage( "#index2", { transition: "slide"} );
                        event.handled = true;
                    }
                });            
            });
            $("#list").listview('refresh');
        });
    });

    $(document).on('pagebeforeshow', '#index2', function(){       

        $('#index2 [data-role="content"]').find('input#desc').val(dealObject.name);

    });

    var dealObject = {
        dealID : null,
        restaurantid : null,
        name : null,
        image : null,
        dname : null
    }    
</script> 
```

我希望这可以帮助

# ruby - Ruby 1.8.7 将哈希转换为字符串

> ID：14957162
> 
> 赞同：10
> 
> 时间：2013-02-19T12:10:06.997
> 
> 标签：ruby, ruby-1.8.7

我没有使用 ruby​​ 1.8.7，最近我很惊讶：

```
{:k => 30}.to_s #=> "k30" 
```

是否准备好使用修复将哈希转换为 ruby​​ 1.8.7 的字符串，使其看起来像：

```
{:k => 30}.to_s #=> "{:k=>30}" 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T12:23:30.073

`hash.to_s`确实已从 更改`1.8.7`为`1.9.3`。

在`1.8.7`，（参考：[http](http://ruby-doc.org/core-1.8.7/Hash.html#method-i-to_s) ://ruby-doc.org/core-1.8.7/Hash.html#method-i-to_s ）：

> 通过将哈希转换为 [ key, value ] 对数组，然后使用 Array#join 和默认分隔符将该数组转换为字符串，将 hsh 转换为字符串。

在`1.9.3`，（参考：[http](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-to_s) ://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-to_s ）

> 别名：检查

您可以在 1.8.7 中对 Hash 类进行猴子修补，以在本地执行以下操作：

```
class Hash
  alias :to_s :inspect
end 
```

猴子补丁之前：

```
1.8.7 :001 > {:k => 30}.to_s
 => "k30" 
1.8.7 :002 > {:k => 30}.inspect
 => "{:k=>30}" 
```

猴子修补及之后：

```
1.8.7 :003 > class Hash; alias :to_s :inspect; end
 => nil 
1.8.7 :004 > {:k => 30}.to_s
 => "{:k=>30}" 
```

# powershell - 通过 PowerShell 脚本 (.ps1) 上的快捷方式传递参数

> ID：14957163
> 
> 赞同：2
> 
> 时间：2013-02-19T12:10:08.203
> 
> 标签：powershell, parameters, shortcut

我正在尝试通过我需要的脚本上的快捷方式传递参数。所以我已经完成了我的快捷方式，并在“目标”字段中编写了我的参数“测试”（C:\Users\MBGR\Desktop\test2.ps1 测试）。

在我的脚本中，我有“$args[0]”来接收我的参数。当我从 Win7 (powershell.exe -noexit C:\users\MBGR\Desktop\test2.ps1 TEST) 通过 Execute 发送参数时，它工作得很好。并且还通过 CMD。

所以我的问题是为什么不能使用快捷方式？它与 VBS 配合得很好，我是否缺少一些东西来使它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T12:15:39.730

您必须在 Target 编辑框中的脚本前面添加 Powershell 可执行文件。

**例子**

> C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe C:\users\MBGR\Desktop\test2.ps1 测试

# macos - 自制安装的集合

> ID：14957165
> 
> 赞同：0
> 
> 时间：2013-02-19T12:10:14.930
> 
> 标签：macos, terminal, homebrew

有没有办法将自制软件安装组合在一起？

假设我想安装一系列东西 - homebrew/versions/mysql51、homebrew/versions/ruby192、rvm。

但我也希望能够切换到另一个集合——mysql、ruby、rbenv。而且我开关的时候其他的都关了，以免冲突。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:30:24.817

我不确定我是否完全遵循，但您可以编写取消链接/链接的脚本。

```
$ ./coll1
$ ./coll2 
```

其中 coll1 和 coll2 是脚本、bash 函数或别名

```
coll1() {
    brew unlink mysql51
    brew unlink ruby192
}
coll2() {
    brew link mysql
    brew link ruby
} 
```

# razor - 并排运行 System.Web.Razor 1.0 和 2.0？

> ID：14957166
> 
> 赞同：5
> 
> 时间：2013-02-19T12:10:16.933
> 
> 标签：razor, asp.net-mvc-4, hosting, razor-2

我正在尝试将我的网站部署到我的托管服务提供商并不断收到以下错误：

> 无法加载文件或程序集“System.Web.Razor”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）
> 
> [FileLoadException：无法加载文件或程序集“System.Web.Razor”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）]
> 
> [FileLoadException：无法加载文件或程序集“System.Web.Razor，版本=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）]
> 
> ...
> 
> [ConfigurationErrorsException：无法加载文件或程序集“System.Web.Razor，版本=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）]
> 
> ...
> 
> [HttpException（0x80004005）：无法加载文件或程序集“System.Web.Razor，版本=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）]
> 
> ...

该站点是使用 ASP.NET 4 和 MVC 4 构建的。在运行 Windows 8 的开发机器上一切正常。我已将 System.Web.Razor.dll 复制到服务器上的 bin 文件夹中，这没有任何区别，尽管这似乎是 v1.0 版本的程序集（~260k）。

我看过

```
C:\Windows\程序集
```

并且没有看到专门针对 System.Web.Razor 的任何内容。但是，我确实有以下两个文件：

*   C:\Windows\assembly\NativeImages_v4.0.30319_64\System.Web.Razor\04eb82505c0086e8eb097d1408183aa0\System.Web.Razor.ni.dll（776k，文件版本：1.0.20105.407）

*   C:\Windows\assembly\NativeImages_v4.0.30319_64\System.Web.Razor\ab032b45c588b488ebca535054d827bc\System.Web.Razor.ni.dll（1823k，文件版本：2.0.20715.0）

但是，即使从这里复制 v2 程序集也不起作用，尽管我认为这不是正确的文件，因为 v1 程序集文件大小也不匹配。

关于这里发生了什么的任何想法？

我猜我的托管服务提供商没有安装任何东西（因为他们一直告诉我把所有东西都放在 bin 文件夹中），但我很好奇为什么我找不到这个 System.Web.Razor v2 DLL任何地方。

为了调试，我还上传了带有基本模板的空网站，效果很好。有趣的是，当我添加对[Postal](http://aboutcode.net/postal/)的引用并再次部署时，我得到了错误 - 但即使我将文件还原回来，错误仍然存​​在！为什么会发生这种情况？

任何帮助，将不胜感激。开始觉得有点想不通了。

**编辑 1**

新建一个空项目，从nuget添加Razor 2，设置System.Web.Razor.dll复制本地（2.0.20715.0,260k），发布，抓取文件上传，还是报同样的错误？似乎这个 DLL 不会被拾取。

**编辑 2**

最终我放弃了尝试使用有问题的托管服务提供商。他们没有在服务器上安装 ASP.NET MVC 4，我认为这最终是问题所在。尝试了一个安装了这个的不同主机，一切正常。

# android - Android AlertDialog 设计在所有 Android 版本上都相同

> ID：14957168
> 
> 赞同：2
> 
> 时间：2013-02-19T12:10:21.957
> 
> 标签：android, android-alertdialog

AlertDialog 在具有不同 android 版本的设备上可能看起来不同是否正确？如果是，我怎样才能让它在所有设备上看起来都一样？我是否需要制作自定义 AlertDialog 或者我可以以某种方式覆盖设计？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:19:45.693

> AlertDialog 在具有不同 android 版本的设备上可能看起来不同是否正确？

没关系，android改变设计，但是使用旧版本的用户看到旧设计。

如果您想为警报对话框提供自己的设计，请参阅[此](https://stackoverflow.com/a/3870997/958370)答案。

如果您只想在任何版本的 android 中为您的应用程序提供全息设计 - 您可以使用[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:18:06.267

使用`custom AlertDialog`. 它在所有版本上看起来都一样。[点击这里](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

# actionscript-3 - 使用操作脚本 3 在本地保存图像

> ID：14957169
> 
> 赞同：0
> 
> 时间：2013-02-19T12:10:22.520
> 
> 标签：actionscript-3, air

我使用 AIR 上的[bulkloader](https://github.com/arthur-debert/BulkLoader)库下载图像，然后使用[AS3corelib](https://github.com/mikechambers/as3corelib)我尝试使用以下方法在本地保存文件：

```
var byteArray:ByteArray = jpgEncoder.encode( loader.getContent("IMG_0004.JPG") );
stream.writeBytes(byteArray);
stream.close(); 
```

但我收到这个错误：

> TypeError：错误 #1034：类型强制失败：无法将 flash.display::Bitmap@8349a81 转换为 flash.utils.ByteArray。

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:22:50.893

该`encode`函数需要一个`BitmapData`对象，但您给它一个`Bitmap`.

所以你应该能够做到这一点：

```
var byteArray:ByteArray = jpgEncoder.encode( Bitmap(loader.getContent("IMG_0004.JPG")).bitmapData ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:10:25.303

DomingoSL，所以你原来的问题已经解决了，现在你的问题是 jpeg 编码。是的，标准库中的 jpeg 编码器非常慢。它是您可以使用的最慢的编码器。阅读：[http](http://www.bytearray.org/?p=775) ://www.bytearray.org/?p=775 。提示：阅读所有评论，你会得到你对无声保存的答案。

# java - 用作 Eclipse 插件的正确“查找错误”更新站点是什么

> ID：14957170
> 
> 赞同：3
> 
> 时间：2013-02-19T12:10:23.307
> 
> 标签：java, eclipse-plugin, findbugs

我想使用“查找错误”作为 Java 程序的静态代码审查工具。我正在尝试在 Eclipse 中使用 Find Bug 插件。我指的是FindBug官网[FindBugs更新站点](http://findbugs.cs.umd.edu/eclipse/)中提到的安装eclipse插件的细节。但是，当我尝试使用提到的任何更新站点时，我收到以下网络错误：

```
Network connection problems encountered during search.
  Unable to access "http://findbugs.cs.umd.edu/eclipse".
    Error parsing site stream. [Premature end of file.]
    Premature end of file.
    Error parsing site stream. [Premature end of file.]
    Premature end of file. 
```

有人知道要使用的正确网址是什么吗？或者如果我错过了其他任何东西？或者我必须检查 eclipse 中的任何其他设置。Eclipse 版本：版本：3.3.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:06:06.043

此更新站点仍然可用。我的公司将它包含在我们每季度构建的 SDC 认证流行包中。

当公司防火墙阻止访问并且没有给您良好的响应时，我发现更新站点出现问题。

如果您在浏览器中访问[site.xml](http://findbugs.cs.umd.edu/eclipse/site.xml)并且没有返回有效的 XML 文件，那么您的防火墙很可能是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:31:36.010

它看起来确实坏了。真的放弃了。我不得不手动安装插件。

可以从[FindBugs 项目的 SourceForge 页面下载各种版本](http://sourceforge.net/projects/findbugs/files/findbugs%20eclipse%20plugin/)

# selenium-webdriver - 是否可以使用 Selenium2 测试 IE6 以及如何使用“seleniumProtocol”：“Selenium”？

> ID：14957172
> 
> 赞同：2
> 
> 时间：2013-02-19T12:10:25.007
> 
> 标签：selenium-webdriver, selenium-grid

我在用 Selenium2 测试 IE6 时遇到了这个问题。我使用 Perl 绑定（[Selenium::Remote::Driver](https://metacpan.org/module/Selenium%3a%3aRemote%3a%3aDriver)），但我将非常感谢任何建议，即使它们来自对 Selenium for Java 等有经验的人。

问题是当我尝试这样做时：

```
my %opt = (
   browser_name    => 'internet explorer',
   version         => '6',
   platform        => 'WINDOWS',
   proxy           => {
       proxyType => 'direct',
   }
);
my $driver = Selenium::Remote::Driver->new(%opt);
$driver->get('http://www.google.com');
my $elem = $driver->find_element('gs_htif0', 'id');
$elem->send_keys('fooooooo'); 
```

浏览器打开，但随后测试因消息`An element could not be located on the page using the given search parameters: gs_htif0,id at ...`而终止，而在 IE7 中一切正常，并且 IE 驱动程序的文档说 IE6 已经过测试

之后，我尝试使用 启动一个节点`"seleniumProtocol": "Selenium"`，我认为这是测试没有驱动程序的任何浏览器的选项，因此可以以旧的“JavaScript 仿真”用户操作方式进行测试，但后来浏览器没有从头开始，测试因消息而死`java.lang.NullPointerException: sessionId should not be null; has this session been started yet?`

我的集线器配置是：

```
{
    "host": null,
    "port": 4444,
    "newSessionWaitTimeout": -1,
    "servlets" : [],
    "prioritizer": null,
    "capabilityMatcher": "org.openqa.grid.internal.utils.DefaultCapabilityMatcher",
    "throwOnCapabilityNotPresent": true,
    "nodePolling": 5000,

    "cleanUpCycle": 5000,
    "timeout": 300000,
    "browserTimeout": 0,
"maxSession": 5
} 
```

我的节点配置是：

```
{
    "capabilities":
    [
        {
            "platform": "WINDOWS",
            "browserName": "internet explorer",
            "version": "6",
            "seleniumProtocol": "WebDriver",
            "ensureCleanSession": true
        }
    ],
    "configuration":
    {
        "proxy": "org.openqa.grid.selenium.proxy.DefaultRemoteProxy",
        "maxSession": 1,
        "port": 5555,
        "host": "192.168.1.6",
        "register": true,
        "registerCycle": 5000,
        "hubPort": 4444,
        "hubHost": "192.168.1.34"
    }
} 
```

启动节点命令是`java -jar selenium-server-standalone-2.29.0.jar -role node -nodeConfig node_ie6_conf.json -Dwebdriver.ie.driver="IEDriverServer_2.29x32.exe" > nul`

启动集线器命令是`java -jar selenium-server-standalone-2.29.0.jar -role hub -hubConfig hub_conf.json &> dev/null`

任何人都可以帮助我吗？我的赞赏。

* * *

**更新** 对于我问题的第二部分，我认为 Selenium::Remote::Driver 仅适用于 webDriver 协议，但我不确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:17:17.227

对于我的问题的第一部分，答案是“是的，有可能”。假设一个人已经正确设置了 hub、node 和[InternetExplorerDriver](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)，她只需要在 IE 设置窗口的“安全”选项卡中配置安全设置（打开服务 -> 互联网选项）。并且她必须将滑块向下移动一点来为“本地 Intranet”设置“中等”级别。

抱歉截图不是英文的，但我没有英文 XP，我想很清楚在哪里可以找到这个：

![在此处输入图像描述](../Images/c3126a11774a2de1a604fd8e5a73f0ed.png)

我意外地找到了答案，在我开始在 IE7 中遇到同样的问题之后，在我更改了安全设置之后，所以它提示了我在哪里寻找。

但第二部分`how to use "selenium protocol"`仍未解决。

# ios - NSData / 编码问题：为什么我不能正确读取所有字符？

> ID：14957173
> 
> 赞同：0
> 
> 时间：2013-02-19T12:10:27.793
> 
> 标签：ios, xml, encoding, character-encoding, iso-8859-1

我正在使用一个返回包含一些拉丁字符`ASP`的文件的请求。`XML`通过使用此代码：

```
NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.my-link.asp"]];
NSString *str = [[NSString alloc] initWithData:data encoding:NSISOLatin1StringEncoding]; 
```

我几乎正确读取了文件的每个字符。几乎，因为其中一些被这个字符取代：¿。我说的是项目符号`(•, 8226)`和正确的单引号`(’, 8217)`，但我敢打赌我会遇到其他不寻常字符的问题。

我的`XML`前缀是`<?xml version="1.0" encoding="ISO-8859-1"?>`. 我想知道我的文件或代码是否有问题`XML`，以及如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:53:28.213

使用`UTF-8`而不是`ISO-8859-1`解决它。

# php - cakePHP 指向正确的应用程序

> ID：14957177
> 
> 赞同：2
> 
> 时间：2013-02-19T12:10:41.923
> 
> 标签：php, cakephp, directory

我的 cakePHP 文件夹中有两个“应用程序”，如何告诉 Cake 从“another_app”中检索内容？

```
/app
/another_app 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:28:35.570

我认为不可能在同一个 cakephp installataion 上有 2 个 APP_DIR。但是，要更改 index.php 中 APP_DIR 的值

```
// /app/webroot/index.php (partial, comments removed)

if (!defined('APP_DIR')) {
    define ('APP_DIR', 'another_app');
} 
```

更多信息[http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Installation.html#advanced-installation](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Installation.html#advanced-installation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:49:51.873

您可以使用 CakePHP 标准方法：[Media Views](http://book.cakephp.org/2.0/en/views/media-view.html)，但这只会检索您`app`目录中的资产（不一定`webroot`）。你可以试试[MeioUpload](http://www.meiocodigo.com/projects/meioupload/)，它的一些功能说：

`* Accepts custom directory for files to be uploaded;`

所以我认为你应该检查一下。

**编辑**

您想从两个应用程序中检索资产吗？或者只有两个应用程序并启用其中一个？

# jquery - 无限滚动/砖石第二组图像出现在第一组后面

> ID：14957178
> 
> 赞同：0
> 
> 时间：2013-02-19T12:10:41.790
> 
> 标签：jquery, css, wordpress, jquery-masonry, infinite-scroll

我在一个 wordpress 网站上工作，并试图用砖石实现无限滚动。

有问题的页面在这里 - [http://bc.somethingdoing.com/bristol-pubs-bars/?tag=pubs-2](http://bc.somethingdoing.com/bristol-pubs-bars/?tag=pubs-2)

当您向下滚动到页面底部以启动无限滚动时，您应该会看到新图像加载在旧图像后面。

目前有点问题，但我不确定如何停止在现有图像后面加载新图像

我正在使用的Javascript（JQuery）（在functions.php中）在这里 -

```
 var infinite_scroll = {
                loading: {
                        img: "<?php echo get_template_directory_uri(); ?>/images/ajax-loader.gif",
                        msgText: "<?php _e( 'Loading the next set of posts...', 'custom' ); ?>",
                        finishedMsg: "<?php _e( 'All posts loaded.', 'custom' ); ?>"
                },
                "nextSelector":"#nav-below  a",
                "navSelector":"#nav-below",
                "itemSelector":".post",
                "contentSelector":"#masonry-container",
        };
        jQuery( infinite_scroll.contentSelector ).infinitescroll( infinite_scroll,// call Masonry as a callback
                function( newElements ) {
                        console.log(newElements);
                        var $newElems = jQuery( newElements ).css({ opacity: 0 });
                        // ensure that images load before adding to masonry layout
                                $newElems.imagesLoaded(function(){
                                console.log('imagesLoded');
                                // show elems now they're ready
                                $newElems.animate({ opacity: 1 });
                                jQuery('#masonry-container').masonry( 'appended', $newElems, true );
                                });
                }
        ); 
```

我不确定它是否只是损坏了 css、放错了库等。目前没有收到任何 Javascript 错误，一直在用 chrome 和 FF 浏览网站，没有任何乐趣。

希望这足以看出什么是错的。

非常感谢任何帮助。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:14:24.243

这是砌体脚本中的错误，当加载第二张图像时，砌体无法对其进行排列。所以图像不能放在旧的下面。它在砌体中的错误。

# database-design - 联合键是否必须是每个联合表中主键的一部分？

> ID：14957180
> 
> 赞同：2
> 
> 时间：2013-02-19T12:10:43.840
> 
> 标签：database-design, azure, primary-key, azure-sql-database, federated

当您在 SQL Azure 中使用联合时，您是否必须`tenantid`在每个表上都将其作为主键的一部分？这意味着除了一个租户表之外的所有表都将具有复合主键（一个实际上是主键，然后添加到`tenantid`.

这似乎是它在[这篇文章](http://manishku.blogspot.com/2012/04/sql-azure-federation.html)中所说的。

# ember.js - 项目特定操作

> ID：14957183
> 
> 赞同：0
> 
> 时间：2013-02-19T12:11:02.820
> 
> 标签：ember.js

针对我的控制器，我有一个包含一系列项目的项目，我想显示一个列表并有一个删除项目的操作。

[已从ember.js 集合视图中的类似问题项特定操作中](https://stackoverflow.com/questions/9168239/item-specific-actions-in-ember-js-collection-views)获取大部分代码。大多数工作，地址显示工作和项目渲染，但是该操作似乎没有正确的上下文，因此不执行删除操作。

控制器：

```
App.EditAddressesController = Em.ArrayController.extend({
    temporaryUser: {
        firstName: 'Ben', 
        lastName: 'MacGowan', 
        addresses: [{
            number: '24', 
            city: 'London'
            etc...
        }, {
            number: '23', 
            city: 'London'
            etc...
        }]
    }
}); 
```

temporaryUser 是一个 EmberObject（基于 User 模型），address 数组中的每个项目都是另一个 EmberObject（基于 Address 模型）——这只是为了显示代码而进行了简化。

父视图：

```
{{#each address in temporaryUser.addresses}}
    {{#view App.AddressView addressBinding="this"}}
        {{{address.display}}}
        <a {{action deleteAddress target="view"}} class="delete">Delete</a>
    {{/view}}
{{/each}} 
```

应用程序地址视图：

```
App.AddressView = Ember.View.extend({
    tagName: 'li', 
    address: null, 
    deleteAddress: function() {
        var address = this.get('address'), 
        controller = this.get('controller'), 
        currentAddresses = controller.get('temporaryUser.addresses');
        if(currentAddresses.length > 1) {
            $.each(currentAddresses, function(i) {
                if(currentAddresses[i] == address) {
                    currentAddresses.splice(i, 1);
                }
             });
        }
        else {
            //Throw error saying user must have at least 1 address
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:14:54.820

I think your code could become more readable if you approach it that way:

1- **Modify your action helper to pass the address with it as context.** I modified your Handlebars a bit to reflect the way i am approaching stuff like this and works for me. I think this is the "Ember way" of doing this kind of stuff, since a the properties in a template are always a lookup against the context property of the corresponding view:

```
{{#each address in temporaryUser.addresses}}
    {{#view App.AddressView contextBinding="address"}}
        {{{display}}}
        <!-- this now refers to the context of your view which should be the address -->
        <a {{action deleteAddress target="view" this}} class="delete">Delete</a>
    {{/view}}
{{/each}} 
```

2 - **Modify the handler in your view to accept the address as a parameter:**

```
App.AddressView = Ember.View.extend({
    tagName: 'li', 
    address: null, 
    deleteAddress: function(address) {
        var controller = this.get('controller'), 
        currentAddresses = controller.get('temporaryUser.addresses');
        if(currentAddresses.length > 1) {
            currentAddresses.removeObject(address);
        }
        else {
            //Throw error saying user must have at least 1 address
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:27:13.700

发现这是我每个人的问题：

```
{{#each address in temporaryUser.addresses}} 
```

本来应该：

```
{{#each temporaryUser.addresses}} 
```

我的 AddressView 应该使用 removeObject （如原始代码示例）

```
App.AddressView = Ember.View.extend({
    tagName: 'li', 
    address: null, 
    deleteAddress: function() {
        var address = this.get('address'), 
        controller = this.get('controller'), 
        currentAddresses = controller.get('temporaryUser.addresses');
        if(currentAddresses.length > 1) {
            currentAddresses.removeObject(address);
        }
        else {
            //Throw error saying user must have at least 1 address
        }
    }
}); 
```

# css - Internet Explorer css 错误

> ID：14957190
> 
> 赞同：0
> 
> 时间：2013-02-19T12:11:19.307
> 
> 标签：css, internet-explorer

我的教程网站在 google chrome 上运行良好，但是当我尝试使用任何类型的 Internet Explorer 打开它时，我看不到视觉项目的某些部分。

我的设计的所有信息都存在于 css 文件中。但是可以观察到右侧部分的灰色，但另一方面我看不到导航栏。

我把我的一些代码。这些代码和这种情况之间很可能有任何联系。

开头：

```
<!-- InstanceBegin template="/Templates/tempPage00.dwt" codeOutsideHTMLIsLocked="false" --><!doctype html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- InstanceBeginEditable name="doctitle" -->
<html>
<title>Tutorials</title>
...

<link href="styles/mainStyle.css" rel="stylesheet" type="text/css"> 
```

有关更多信息，您可以查看： http: [//www.soccerforecast.com/Tutorials/SFUnderCons/currentForecasts.php](http://www.soccerforecast.com/Tutorials/SFUnderCons/currentForecasts.php)

我没有 10 名声望，所以我不能把直接图片放到这个网站上，所以链接是： http: [//postimage.org/image/y94bk7afb/](http://postimage.org/image/y94bk7afb/)

我通常不使用不同类型的浏览器来控制我的网站，现在我建议每天都这样做。现在我不知道是哪个代码造成了这种情况。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:19:06.240

你的 HTML 有点乱。

解决这些问题，它可能会有所帮助：

1.  将您的 HTML 标记放在 HEAD 标记之前但 DOCTYPE 标记之后。

2.  在文档的最后放置一个结束 HTML 标记。

3.  在 TABLE 中，您在页面末尾有一个额外的结束 TR 标记。

4.  您的 DOCTYPE 之前的注释也可能会导致问题。

尝试通过验证器运行您的网站以检查此类错误。

HTML：http: [//validator.w3.org/](http://validator.w3.org/)

CSS：http: [//jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:16:18.083

这是因为您在 doctype 声明之前有注释。

如果您删除该评论，这会迫使页面进入[怪癖模式](http://www.quirksmode.org/css/quirksmode.html)，您应该没问题。

```
<!-- InstanceBegin template="/Templates/tempPage00.dwt" codeOutsideHTMLIsLocked="false" -->
<!doctype html>
<head> 
```

编辑... head 和 html 标签也是错误的方式。

# c# - 淘汰赛绑定

> ID：14957191
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:11:25.337
> 
> 标签：c#, asp.net-mvc-3, knockout.js, knockout-mapping-plugin, knockout-2.0

我正在通过 Knockout 将一些列表项绑定到下拉列表，但它没有绑定。我不知道我哪里错了。。

我使用了敲除映射插件，甚至尝试了一种简单的方法，但似乎没有任何效果。

我的基本结构是这样的：

```
BugsReport rp = new BugsReport()
{
     SoftwareProductList = new List<SoftProduct>() { new SoftProduct() { ProductName = "eCommerce Website", SoftProId = 1 }, new SoftProduct() { ProductName = "Banking website", SoftProId = 2 } },
     ListBugs = GetAllBugs(),
     PriorityLevels = new List<Priority>() { new Priority() { PriorityId = 1, PriorityName = "P1" }, new Priority() { PriorityId = 2, PriorityName = "P2" }, new Priority() { PriorityId = 3, PriorityName = "P3" } }
}; 
```

我从控制器发送...正常的剃须刀绑定正在发生，但不是淘汰赛。

html部分

```
<div  style="margin-top: 10px; width: 200px; float: left; font-weight: bold;">
    Products
    <select id="slSoftProducts" multiple="multiple" data-bind="options: $root.ProductList, value:ProductList.SoftProId, optionsText: 'ProductList.ProductName'">. </select>
</div>
<div style="margin-top: 10px; width: 200px; float: left; font-weight: bold; margin-left: 30px;">
     priority Levels
     <select id="slPriorityLevels" multiple="multiple" data-bind="options: $root.priorityList, value: priorityList.PriorityId, optionsText: 'priorityList.PriorityName'"></select>
</div> 
```

和 Javascript 部分

```
function bugzillaviewmodel(){
    var self = this;
    self.ProductList = BugList.SoftwareProductList;
    self.priorityList = BugList.PriorityLevels;                         
}     

var viewModel = new bugzillaviewmodel();

// Knock Out Binding   through mapping.. 
//var viewModel = ko.mapping.fromJS(BugList);    
ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:18:44.103

看起来您的绑定引用不正确，您将对象附加到所需属性的名称之前。尝试这个：

```
 <div  style="margin-top: 10px; width: 200px; float: left; font-weight: bold;">
            Products
            <select id="slSoftProducts" multiple="multiple" data-bind="options: ProductList, value: SoftProId, optionsText: 'ProductName'"></select>
        </div>
        <div style="margin-top: 10px; width: 200px; float: left; font-weight: bold; margin-left: 30px;">
            priority Levels
          <select id="slPriorityLevels" multiple="multiple" data-bind="options: priorityList, value: PriorityId, optionsText: 'PriorityName'"></select>
        </div> 
```

您还需要创建绑定到可观察对象的属性。查看[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)以创建视图模型`self.ProductList`的`self.priorityList`可观察属性。

我还删除了 $root 引用，因为我认为您不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:33:10.523

SoftProId 和 PriorityId 没有在任何地方定义。如果它包含在 ProductList 对象中，那么它应该类似于。

```
<select id="slSoftProducts" multiple="multiple" data-bind="options: ProductList.List, value: ProductList.SoftProId, optionsText: 'ProductName'"></select> 
```

使用您的视图模型

```
function bugzillaviewmodel(){
   var self = this;
   self.ProductList = BugList.SoftwareProductList;
   self.priorityList = BugList.PriorityLevels;
   self.SoftProId = ko.observable();
   self.PriorityId = ko.observable();
} 
```

但不知道你的对象的结构我不能确定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-08T05:09:27.013

你有两个问题：

1.  您在 optiosnText 中写了 'ProductList.ProductName' 而不仅仅是 'ProductName'
2.  对于值，它不是您所想的选项的值（html 值），而是将存储在视图模型中的变量中的值，例如“selectedProduct”，这将是一个可观察的

我认为这应该有效：

```
<div style="margin-top: 10px; width: 200px; float: left; font-weight: bold;">
    Products
    <select id="slSoftProducts" multiple="multiple" data-bind="options: ProductList, value:productSelected, optionsText: 'ProductName'">. </select> </div>
<div> style="margin-top: 10px; width: 200px; float: left; font-weight: bold;margin-left: 30px;">
priority Levels
    <select id="slPriorityLevels" multiple="multiple" data-bind="options: priorityList, value:prioritySelected, optionsText:'PriorityName'"></select>
</div> 
```

js部分：

```
function bugzillaviewmodel(){
    var self = this;
    self.ProductList = BugList.SoftwareProductList;
    self.priorityList = BugList.PriorityLevels;                         
    self.productSelected = ko.observable(); // Will contain the selected product object from the ProductList
    self.prioritySelected = ko.observable(); // same but from the priorityList
}     

var viewModel = new bugzillaviewmodel();

// Knock Out Binding   through mapping.. 
//var viewModel = ko.mapping.fromJS(BugList);    
ko.applyBindings(viewModel); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-11T18:22:43.017

尝试这个...

在服务器上，您的 Razor ViewModel 上有一个属性，该属性返回序列化对象或对象列表：

```
public string SelectListToJson {
        get
        {
            return JsonConvert.SerializeObject(YourSelectList);
        }
    } 
```

在视图中有这个：

```
//DTO objects definition for mapping
var SoftProduct = function(dto){
	var self = this;
  self.ProductName = ko.observable(dto.ProductName);
  self.SoftProId = dto.SoftProId;
};

var Priority = function(dto){
	var self = this;
  self.PriorityId = dto.PriorityId;
  self.PriorityName = ko.observable(dto.PriorityName);
};

//Output from Razor "@Html.Raw(Model)"
//I.E. var BugList = @Html.Raw(Model)
var BugList = {
	SoftwareProductList: [
  	{ ProductName: "eCommerce Website", SoftProId: 1},
    { ProductName: "Banking Website", SoftProId: 2},
  ],
  PriorityLevels: [
  	{PriorityId: 1, PriorityName: "P1"},
    {PriorityId: 2, PriorityName: "P2"},
    {PriorityId: 3, PriorityName: "P3"},
  ]
};

//define main view model to apply bindings to
var bugzillaviewmodel = function(){
    var self = this;
    self.ProductList = ko.mapping.fromJS([]);
    self.PriorityList = ko.mapping.fromJS([]);
    self.SelectedProducts = ko.observableArray();
    self.SelectedPriorities = ko.observableArray();
};

  //init viewModel
  var viewModel = new bugzillaviewmodel();

  //map data in BugList to viewmodel
   ko.mapping.fromJS(
                   BugList.SoftwareProductList,
                   {
                       key: function (data) {
                           return ko.utils.unwrapObservable(data.SoftProId);
                       },
                       create: function (options) {
                           return new SoftProduct(options.data);
                       }
                   },
                   viewModel.ProductList);
   ko.mapping.fromJS(
                   BugList.PriorityLevels,
                   {
                       key: function (data) {
                           return ko.utils.unwrapObservable(data.PriorityId);
                       },
                       create: function (options) {
                           return new Priority(options.data);
                       }
                   },
                   viewModel.PriorityList);

  //apply bindings to dom                 
  ko.applyBindings(viewModel); 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.4.1/knockout.mapping.min.js"></script>

<div style="margin-bottom:20px;height:150px;">
  <div  style="margin-top: 10px; width: 200px; float: left; font-weight: bold;">
      Products<br/>
       <select id="slSoftProducts" multiple="true" data-bind="options: ProductList,optionsText: 'ProductName', optionsValue: 'SoftProId', selectedOptions: SelectedProducts"></select>   
  </div>
  <div style="margin-top: 10px; width: 200px; float: left; font-weight: bold; margin-left: 30px;">
       Priority Levels<br/>
       <select id="slPriorityLevels" multiple="true" data-bind="options: PriorityList, optionsText:'PriorityName', optionsValue:'PriorityId', selectedOptions: SelectedPriorities"></select>
  </div>
</div>

<div >
        <textarea rows="20" cols="100" data-bind="text: ko.toJSON($data, null, 2)"></textarea>
    </div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-15T13:40:48.073

```
function bugzillaviewmodel(){
    var self = this;
    self.ProductList = BugList.SoftwareProductList;
    self.priorityList = BugList.PriorityLevels;  
    self.SelectedProductId = ko.observable();
    self.SelectedPriorityId = ko.observable();
}     

var viewModel = new bugzillaviewmodel();

// Knock Out Binding   through mapping..  
ko.applyBindings(viewModel);
```

```
<div  style="margin-top: 10px; width: 200px; float: left; font-weight: bold;">
            Products
            <select id="slSoftProducts" multiple="multiple" data-bind="options: ProductList, optionsValue: SoftProId, optionsText: 'ProductName', value: SelectedProductId"></select>
        </div>
        <div style="margin-top: 10px; width: 200px; float: left; font-weight: bold; margin-left: 30px;">
            priority Levels
          <select id="slPriorityLevels" multiple="multiple" data-bind="options: priorityList, optionsValue: PriorityId, optionsText: 'PriorityName', value: SelectedPriorityId"></select>
</div>
```

# html - 如何在 IE7 中将计数器居中？

> ID：14957194
> 
> 赞同：0
> 
> 时间：2013-02-19T12:11:30.987
> 
> 标签：html

看看下面的链接。在所有其他浏览器中都可以正常工作，但在 IE7 中不行。

[http://www.sonnyt.com/countie/](http://www.sonnyt.com/countie/)

现在转到此站点并将链接粘贴到框中以查看它在 IE7 中的视图

[http://netrenderer.com/index.php](http://netrenderer.com/index.php)

任何想法如何让它发挥作用？

只是我需要居中的计数器元素。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:15:58.257

添加宽度`#countdown`，然后将左右边距设置为`auto`. Chrome 报告计数器宽度为 697px，所以这应该可以工作：

```
#countdown {
    width: 697px;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:18:11.223

[`display: inline-block``display: inline`仅适用于 IE7 中具有 natural 的元素](http://www.quirksmode.org/css/display.html)。有几种可能的解决方案，但我会给出两个：

1.  `float: left`从`<li>`元素中删除并改为使用，`display: inline`加上`margin: 0 auto`（`<ul>`必须是`display: block`）。
2.  停止支持 IE7

# eclipse-plugin - Virtual TableViewer 排序导致选择问题

> ID：14957195
> 
> 赞同：0
> 
> 时间：2013-02-19T12:11:31.550
> 
> 标签：eclipse-plugin, swt, eclipse-rcp, jface, tableviewer

我们的应用程序是一个 RCP 应用程序，需要显示数千个项目的表格。出于这个原因，我们`SWT.VIRTUAL`在我们的`TableViewer`. 除了选择之外，这很好用。

我们遇到以下问题：

*   我们`TableViewer`支持排序和过滤。当我们使用虚拟表格查看器时，更改选择不会保留当前选中的项目，而是保留当前选中的行。这会导致另一个项目被选中。例如：如果用户选择了第 5 行的“A”项并执行排序，则在排序后第 5 行的“项”被选中，而不是“A”项。使用非 virtual `TableViewer`，一切正常。

我们尝试进行调试，发现`AbstractTableViewer.VirtualManager`类中的缓存似乎与模型是最新的。强制使用缓存`AbstractTableViewer.virtualSetSelectionToWidget()`可能是一种可能的方法。

我们已尝试实施[https://bugs.eclipse.org/bugs/show_bug.cgi?id=338696](https://bugs.eclipse.org/bugs/show_bug.cgi?id=338696)中建议的解决方案。然而它没有用。

请提出一些建议或替代解决方法。

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:32:07.070

作为使用大表的一种解决方法，我建议您查看 Nattable 项目[http://www.eclipse.org/nattable/](http://www.eclipse.org/nattable/)。它支持您需要的一切（排序、过滤、树结构元素、延迟加载等）。我们在我们的项目中成功使用了它，需要将数十万个元素显示为大约 160 列的树。它还具有一些非常酷的样式功能，可以使您的表格更加用户友好和互动。希望这可以帮助

# java - 将多行查询输出从 servlet 打印到 jsp///

> ID：14957197
> 
> 赞同：3
> 
> 时间：2013-02-19T12:11:35.810
> 
> 标签：java, jsp, servlets

以下是servlet和jsp文件的代码

连接.java

```
@WebServlet("/calendar")
public class Connect extends HttpServlet {  

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse  response) throws ServletException, IOException {

    String fromDate = request.getParameter("fromDate");
    String toDate = request.getParameter("toDate");

    String query = "SELECT action_time,user_action,user_ip,user_id FROM di.login_detail where (action_time, action_time) OVERLAPS (DATE '"
                + fromDate+ "',DATE '"+ toDate+ "'+ integer '1')" +
                        " order by action_time desc";
    Connection conn = null;
    PreparedStatement statement = null;
    ResultSet resultSet = null;
    System.out.println("done4");
    try {

        conn = ConnectionUtil.getConnection();
        statement = conn.prepareStatement(query);           
        resultSet = statement.executeQuery();

           if (resultSet.next()) {                          
            while(resultSet.next()){
                String action_time=resultSet.getString("action_time");
                String user_action=resultSet.getString("user_action");
                String user_ip=resultSet.getString("user_ip");
                String user_id=resultSet.getString("user_id");

                request.setAttribute("action_time",action_time);
                request.setAttribute("user_action",user_action);
                request.setAttribute("user_ip",user_ip);
                request.setAttribute("user_id",user_id);
         RequestDispatcher view = request.getRequestDispatcher("calendar.jsp");  
                        view.forward(request,response);
                       }

        } else {
            System.out.println("not found");
        }
    } catch (SQLException e) {
        throw new ServletException("DB interaction failed", e);
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (resultSet != null) try { resultSet.close(); } catch (SQLException ignore) {}
        if (statement != null) try { statement.close(); } catch (SQLException ignore) {}
        if (conn != null) try { conn.close(); } catch (SQLException ignore) {}
    }
}
} 
```

日历.jsp

```
<%@ page import="java.sql.*" %>
<%
String path = request.getContextPath();
%>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

    <script src="<%=path%>/js/calendar.js"></script>
    <link href="<%=path %>/css/calendar.css" rel="stylesheet">
</head>
<body>
<form action="calendar">
            <div class="container">
            From:<input  name="fromDate" type="text"   class="calendarSelectDate" />
            To: <input   name="toDate"   type="text" class="calendarSelectDate" />
            <input type="submit" name="b1" value="Go">
        </div>          
<div id="calendarDiv"></div>

<%= request.getAttribute("action_time")%>
<%= request.getAttribute("user_action")%>
<%= request.getAttribute("user_ip")%>
<%= request.getAttribute("user_id")%>

</form> 

</body>
</html> 
```

我试图从我的 servlet 向 calender.jsp 显示结果，上面传递的查询会产生多行作为结果，但在 jsp 页面中它只生成第一行输出并停止执行。这里还可以做什么来获取 jsp 上的完整结果。谢谢////

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:20:30.090

为例如创建一个类：

```
public class User {
    private String actionTime;
    private String userAction;
    private String userIp;
    private String userId;

    //Getters and setters
} 
```

然后你应该像这样改变你的代码：

```
ArrayList<User> users = new ArrayList<User>();
while (resultSet.next()) {
    User user = new User();
    user.setActionTime(resultSet.getString("action_time"));
    user.setUserAction(resultSet.getString("user_action"));
    user.setUserId(resultSet.getString("user_ip"));
    user.setUserIp(resultSet.getString("user_id"));
    users.add(user);
}
request.setAttribute("users", users);
RequestDispatcher view = request.getRequestDispatcher("calendar.jsp");
view.forward(request, response); 
```

在循环中总是创建新用户，将其添加到用户列表中，当循环完成时，将整个列表设置为请求属性。

然后在您的 JSP 中使用[JSTL](https://stackoverflow.com/tags/jstl/info)处理列表：

```
<c:forEach var="user" items="${users}">
    <c:out value="${user.actionTime}"/>
    <c:out value="${user.userAction}"/>
    <c:out value="${user.userIp}"/>
    <c:out value="${user.userId}"/>
</c:forEach> 
```

**也可以看看：**

*   [SO Servlets 维基页面](https://stackoverflow.com/tags/servlets/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:20:33.603

如前所述，每次迭代都会覆盖请求属性。你也在打电话

```
 RequestDispatcher view = request.getRequestDispatcher("calendar.jsp");  
                        view.forward(request,response); 
```

它在第一次迭代中转发响应。创建一个列表或散列并设置该属性，然后从您的 JSP 访问它

# python - python concat 之前

> ID：14957199
> 
> 赞同：0
> 
> 时间：2013-02-19T12:11:36.550
> 
> 标签：python, string, concatenation

我正在做一个 python 项目。我正在记录我的项目发生的事情。为了日志的可读性，我需要连接字符串，但在开头而不是结尾。

这是我想做的：

```
str=''
for(bla in bli):
 str+=bla
str.concatbefore('it works') 
```

最后，我希望 str 具有以下值：`'it works'+'bla[]'`

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:17:30.277

First:`str`是一个非常糟糕的变量名，因为它是一个内置函数。

真正的问题：为什么不

```
s = ''
for bla in bli:
  s += bla
s = 'it works ' + s 
```

甚至更好：

```
s = 'it works ' + ''.join(bli) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:16:14.503

```
res = 'it works' + res 
```

还不够好吗？

字符串是不可变的，所以你并没有真正改变它`+=`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:18:46.827

常规方式：

```
 s = 'prefix' + s 
```

但请确保不要循环执行此操作，因为它有点慢。

# r - igraph：根据石英窗口的大小缩放绘图大小

> ID：14957206
> 
> 赞同：0
> 
> 时间：2013-02-19T12:11:53.237
> 
> 标签：r, plot, scale, igraph

我在 R 中使用 igraph 包。我的问题是，当我使用 plot() 函数绘制我的网络时，它的大小并没有随着我改变石英窗口的大小而相应改变。是否有一个参数，例如类似于 stretch="Fill" ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:11:12.423

另一种选择是将绘图保存为 SVG 或 PDF，然后使用 Inkscape 等编辑器进行裁剪和调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:15:27.020

鉴于此处引用的帮助文件中的评论，我怀疑您正在做 igraph 不适合做的事情。“*绘制图形的一种方便方法是首先使用 tkplot 绘制，手动调整顶点的位置，通过 tkplot.getcoords 函数查询坐标，然后将它们与 plot 一起使用，将图形绘制到任何 R 设备。* ”

要么先设置石英窗口大小，要么不`igraph`用于创建静态图。

# iphone - Xcode 4.6 运行 OS 10.7.5

> ID：14957207
> 
> 赞同：3
> 
> 时间：2013-02-19T12:11:58.680
> 
> 标签：iphone, xcode

App Store 说我有一个可用的更新：XCode 4.6。我仍在运行 OS X 10.7.5。XCode 4.6 会在这个操作系统上运行吗？我查看了 App Store 和 Mac 开发者网站，找不到 4.6 所需的操作系统版本。请给我运行 OS 10.7.5 的 Xcode 4.6 链接。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:18:31.880

它将毫无问题地工作。也许这个关于[Xcode 发行说明](https://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/index.html)的页面对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:17:53.557

当 Mac App Store 显示应用程序时，它应该在您的系统上运行，因为在 iOS 上，您可以作为开发人员决定您支持哪些操作系统版本。Apple 决定向您展示更新 - 所以他们决定允许 10.7.5。[Xcode 4.6发行说明](http://developer.apple.com/library/ios/releasenotes/DeveloperTools/RN-Xcode/index.html#//apple_ref/doc/uid/TP40001051-SW216)中也没有关于停止支持 10.7.5 的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:18:38.403

是的，我在这里在 10.7.5 上运行 4.6。您可以直接从应用商店下载它。

如果您担心它会破坏您现有的工作，您可以重命名您现有的安装。（对“.old”之类的）

# django - EC2上django应用服务器的最佳实践

> ID：14957215
> 
> 赞同：0
> 
> 时间：2013-02-19T12:12:37.417
> 
> 标签：django, amazon-ec2, virtualenv, uwsgi

我正在在特定的 EC2 服务器上部署 Django 应用程序。django 栈主要由 Nginx + Django + Virtual Env + uWSGI + 用于存储日志的外部 NFS 组成。对于这样的部署，

1.  考虑到这可能是一个流量相对较高的大型网站，使用哪种实例类型？有什么一般的策略可以采用吗？
2.  对于配置方面，需要注意什么？

# python - 将python字符串转换为json格式

> ID：14957218
> 
> 赞同：2
> 
> 时间：2013-02-19T12:12:51.387
> 
> 标签：python, json, twitter

我希望这里有一位大师来帮助我。我是一名记者，我很快就拼凑了一些 Python 代码来抓取关于南非一个巨大故事的推文，并将它们存储在 sqlite 数据库中以供以后分析。问题是我将原始 json 对象（推文）存储为字符串，这意味着我在尝试将其转换回 json 对象时遇到严重问题，因此我可以访问数据的键等。无论如何有可能得到它回到json格式？我已经尝试过 json 库和 demjson 没有成功。

这是我检索时来自 sqlite 数据库的单个记录的格式。

```
(u'{u\'user\': {u\'follow_request_sent\': None, u\'profile_use_background_image\': True, u\'default_profile_image\': False, u\'id\': 98357054, u\'verified\': False, u\'profile_image_url_https\': u\'https://si0.twimg.com/profile_images/3186479781/4b0ee41e43a0df23f19935a0bf7dcaa6_normal.jpeg\', u\'profile_sidebar_fill_color\': u\'DDEEF6\', u\'profile_text_color\': u\'242124\', u\'followers_count\': 349, u\'profile_sidebar_border_color\': u\'C0DEED\', u\'id_str\': u\'98357054\', u\'profile_background_color\': u\'181B1C\', u\'listed_count\': 6, u\'profile_background_image_url_https\': u\'https://si0.twimg.com/profile_background_images/357707925/lonely-for-the-holidays.png\', u\'utc_offset\': 19800, u\'statuses_count\': 10035, u\'description\': u\'Nuthing 2 describe or 2 much 2 xplain. U decide... Confused? Yes me too.. I am Ever-Willing to have new Xperiences\', u\'friends_count\': 173, u\'location\': u\'Knp-Kol-Mum-Del-Bangalore\', u\'profile_link_color\': u\'0084B4\', u\'profile_image_url\': u\'http://a0.twimg.com/profile_images/3186479781/4b0ee41e43a0df23f19935a0bf7dcaa6_normal.jpeg\', u\'following\': None, u\'geo_enabled\': True, u\'profile_background_image_url\': u\'http://a0.twimg.com/profile_background_images/357707925/lonely-for-the-holidays.png\', u\'name\': u\'\\u092f\\u092eYunk\', u\'lang\': u\'en\', u\'profile_background_tile\': True, u\'favourites_count\': 493, u\'screen_name\': u\'Lafange_Darinde\', u\'notifications\': None, u\'url\': u\'http://wittys-nitty-gritty.blogspot.com/2011_10_01_archive.html\', u\'created_at\': u\'Mon Dec 21 11:40:32 +0000 2009\', u\'contributors_enabled\': False, u\'time_zone\': u\'New Delhi\', u\'protected\': False, u\'default_profile\': False, u\'is_translator\': False}, u\'favorited\': False, u\'entities\': {u\'user_mentions\': [{u\'id\': 5402612, u\'indices\': [24, 36], u\'id_str\': u\'5402612\', u\'screen_name\': u\'BBCBreaking\', u\'name\': u\'BBC Breaking News\'}], u\'hashtags\': [{u\'indices\': [60, 75], u\'text\': u\'OscarPistorius\'}], u\'urls\': [{u\'url\': u\'http://t.co/UYNrPQrx\', u\'indices\': [118, 138], u\'expanded_url\': u\'http://bbc.in/YvDT1M\', u\'display_url\': u\'bbc.in/YvDT1M\'}]}, u\'contributors\': None, u\'truncated\': False, u\'text\': u\'Ab ro ke kya faayda :-P"@BBCBreaking: South African athlete #OscarPistorius weeps in court as his bail hearing begins http://t.co/UYNrPQrx\', u\'created_at\': u\'Tue Feb 19 08:05:08 +0000 2013\', u\'retweeted\': False, u\'in_reply_to_status_id_str\': None, u\'coordinates\': None, u\'in_reply_to_user_id_str\': None, u\'source\': u\'<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>\', u\'in_reply_to_status_id\': None, u\'in_reply_to_screen_name\': None, u\'id_str\': u\'303777222123200512\', u\'place\': None, u\'retweet_count\': 0, u\'geo\': None, u\'id\': 303777222123200512L, u\'possibly_sensitive\': False, u\'in_reply_to_user_id\': None}',) 
```

你可以看到我的问题。我是实时收集的，所以无法回忆数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:16:24.210

```
import ast
tweet = ast.literal_eval(row[0]) 
```

我现在在你的文章中被提及了吗？;)

我真的从这个问题中得到了答案，这是相关的：

[如何将字符串字典转换为 Python 字典？](https://stackoverflow.com/questions/3737900/how-do-you-convert-a-stringed-dictionary-to-a-python-dictionary)

# java - query.list 和 query.iterate 之间的区别

> ID：14957220
> 
> 赞同：9
> 
> 时间：2013-02-19T12:12:57.767
> 
> 标签：java, hibernate

[`Query.list()`](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Query.html#list%28%29)使用和到底有什么区别[`Query.iterator()`](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Query.html#iterate%28%29)？

使用这两种方法是否有任何性能增强。我的意思是他们中的任何一个都实现了[延迟加载](http://en.wikipedia.org/wiki/Lazy_loading)？

或者[Query.iterator()](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Query.html#iterate%28%29)最终是否与`query.list().iterate()`

还有为什么不~~`Criteria.iterator()`~~只有[`Criteria.list()`](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Criteria.html#list%28%29)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-23T16:27:56.540

**Query.list()：**执行 1 个 SQL 查询并加载整个数据。即使记录存在于缓存中，也会执行新的 SQL 查询以从数据库中加载记录。

```
List<Employee> list1 = session.createQuery("from Employee").list(); // SELECT *FROM EMP
for (Employee e : list1) {
    System.out.println(e);
}
List<Employee> list2 = session.createQuery("from Employee").list(); // SELECT *FROM EMP
for (Employee e : list2) {
    System.out.println(e);
} 
```

**Query.iterate()：**执行 1+N 个 SQL 查询。第一个查询只返回所有记录的标识符，当返回的迭代器被迭代时，每次执行一个单独的 SQL 查询，其中包含一个 WHERE 子句，如“WHERE id=N”。如果记录存在于缓存中，则执行第一个查询，不执行其余 N 个查询，并从缓存中获取记录。

```
Iterator<Employee> iterator1 = session.createQuery("from Employee").iterate(); // SELECT EMP_ID FROM EMP
while(iterator1.hasNext()) {
    System.out.println(iterator1.next()); // SELECT * FROM EMP WHERE EMP_ID=?
}
Iterator<Employee> iterator2 = session.createQuery("from Employee").iterate(); // SELECT EMP_ID FROM EMP
while (iterator2.hasNext()) {
    System.out.println(iterator2.next()); // From cache, no SQL
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T12:34:59.693

如果实例已经在会话中（一级缓存）或二级缓存`iterate()`将提供更好的性能。

如果它们尚未缓存，`iterate()`则将比简单查询要慢`list()`并且可能需要许多数据库命中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T12:15:47.203

javadoc 说：

> 将查询结果作为迭代器返回。如果查询包含多个结果前行，则结果将在 Object[] 的实例中返回。
> 
> **作为结果返回的实体按需初始化。第一个 SQL 查询仅返回标识符。**

（强调我的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-27T08:13:13.830

```
+----------------------------------------------+-----------------------------------------------+
|                    list()                    |                   iterate()                   |
+----------------------------------------------+-----------------------------------------------+
| Return type is List                          | Return type is Iterate                        |
| All records loads at single database request | For each record, one database hit is made     |
| This is faster if cache is not available     | This is very slower if cache is not available |
| Eager loading                                | Lazy loading                                  |
+----------------------------------------------+-----------------------------------------------+ 
```

**对于列表（）：**

```
Query query = session.createQuery("from Employee");
List list = query.list(); // SELECT * FROM EMP
Iterator iterator = list.iterator();
while(iterator.hasNext()){
} 
```

**对于迭代（）：**

```
Query query = session.createQuery("from Employee");
Iterator iterator = query.iterate(); // SELECT * FROM EMP
while(iterator.hasNext()){
    // SELECT * FROM EMP WHERE EMP_ID=?
} 
```

# php - 无法使用 PHP 从 azure 媒体服务 REST API 获取访问令牌

> ID：14957232
> 
> 赞同：1
> 
> 时间：2013-02-19T12:14:00.223
> 
> 标签：php, rest, azure, azure-media-services

我在php中有以下代码：

```
define("TOKEN_URL", "https://wamsprodglobal001acs.accesscontrol.windows.net/v2/OAuth2-13");

 $arrData = array(
                'grant_type=client_credentials',
                'client_id='.CLIENT_ID,
                'client_secret='.urlencode(ACCESS_KEY),
                'scope=urn%3aWindowsAzureMediaServices'
            );

            $arrHeader = array(
                'Content-length:'.strlen($this->generateData($arrData))
            );

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, TOKEN_URL);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $this->generateData($arrData));
            curl_setopt($ch, CURLOPT_HTTPHEADER, $arrHeader);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            $data = curl_exec($ch);
            curl_close($ch);
            $arrToken = json_decode($data); 
```

我无法获取令牌代码。请任何人都可以检查什么可能是错的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:22:58.440

可能有几个问题：

1.  您可以简化一些事情并使用`http_build_query()`：

    ```
    $data = http_build_query(array(
        'grant_type' => 'client_credentials',
        'client_id' => CLIENT_ID,
        'client_secret' => ACCESS_KEY,
        'scope' => 'urn:WindowsAzureMediaServices',
    ));
    $ch = curl_init(TOKEN_URL);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    if (($res = curl_exec($ch)) === false) {
        die(curl_error($ch));
    }
    $arrToken = json_decode($res); 
    ```

2.  如果出现错误，首先要确定您是否有[更新的 CA 证书列表](https://stackoverflow.com/a/11997116/1338292)。

# windows-phone-8 - 在 windows phone 8 中动态加载数据

> ID：14957240
> 
> 赞同：1
> 
> 时间：2013-02-19T12:14:29.517
> 
> 标签：windows-phone-8

我正在使用 Windows Phone 8。我是新手。我担心的是我想从数据库中加载列表中的数据。（例如联系人）。但是我想在用户点击屏幕时动态加载数据以提高性能。首先我需要显示 10 个联系人（例如），当用户点击时我需要动态加载它.. 我们可以在 windows phone 8 中执行此操作.. 我们可以在 windows 中触发事件还是我们有任何东西在Telerik 控制...或者有任何其他方法可以提高性能。

任何人都可以帮我找到解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:11:15.903

看看这个[例子](http://code.msdn.microsoft.com/wpapps/TwitterSearch-Windows-b7fc4e5e)，[这是](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/10/01/how-to-create-an-infinite-scrollable-list-with-longlistselector.aspx)关于如何在 windows phone 8 中创建无限 LongListSelector 的描述

# java - 用户无法输入字符串变量的值

> ID：14957242
> 
> 赞同：-2
> 
> 时间：2013-02-19T12:14:33.467
> 
> 标签：java

用户无法输入字符串变量的值。

这是程序：

```
import java.io.*;
public class testing
{
  char a;
  int b;
  double c;
  String d;
  public void method() throws IOException
  {
     BufferedReader p=new BufferedReader(new InputStreamReader(System.in));
     System.out.println("Enter a variable of type 'char'");
     a = (char)p.read();
     System.out.println("Enter a variable of type 'string'");
     d = p.readLine();
     System.out.println("Enter a variable of type 'integer'");
     b = Integer.parseInt(p.readLine());
     System.out.println("Enter a variable of type 'double'");
     c = Double.parseDouble(p.readLine());
     System.out.println("Your values are: string-" +d +", integer-" +b +", double-" +c);
  }
} 
```

有人能看出问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:21:17.977

我测试了它，您的程序按预期工作。唯一的问题是您用于`read`读取字符，但在用户按下 Enter 之前，Java 不会看到用户输入。查看我的测试运行：

```
Enter a variable of type 'char'
cchar
Enter a variable of type 'string'
Enter a variable of type 'integer'
12
Enter a variable of type 'double'
12
Your values are: string-char, integer-12, double-12.0 
```

# android - Android：如何使用 ArrayAdapter 获取微调器项目的 id

> ID：14957245
> 
> 赞同：3
> 
> 时间：2013-02-19T12:14:48.763
> 
> 标签：android, android-arrayadapter

我的微调器加载了一些消息，每条消息都有自己的 id，

```
public class Message {
    private String id;
    private String message;
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getMessage() {
        return message;
    }
    public void setMessage(String message) {
        this.message = message;
    }

     @Override
     public String toString() {          
         return  message;
     }
} 
```

我将其传递`message`给 Arrayadapter，

```
 protected List<Message> messages = null;
    ArrayAdapter <Message> arrayadapter = new ArrayAdapter<Message>( activity,android.R.layout.simple_spinner_item,messages);               
                        arrayadapter.setDropDownViewResource(R.layout.textview);
 spinner1.setAdapter(arrayadapter); 
```

现在我怎样才能获得选定的特定消息的 id？我可以用 arrayadapter 来做吗？感谢任何帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T12:55:28.510

```
spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view,
                int pos, long id) {
            Message mSelected = (Message) parent.getItemAtPosition(pos);
            Log.i("Id:", mSelected.getId());

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub
            Log.i("Message", "Nothing is selected");

        }

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:33:50.307

您应该在微调器上设置项目单击侦听器：

```
 spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        Object item = parent.getItemAtPosition(pos);
    }
    public void onNothingSelected(AdapterView<?> parent) {
    }
}); 
```

# android - 从哪里可以下载android内核源代码？

> ID：14957251
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:15:00.197
> 
> 标签：android, kernel

您好我想下载 android 4.0 内核源代码。我想根据我的设备进行更改。从哪里可以下载？请让我知道执行此操作的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:21:02.307

看看[http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)，一切都应该在那里。甚至分步说明如何安装存储库。

祝你好运！

# dart - DART 隔离和线程之间的区别（Java、C#）

> ID：14957253
> 
> 赞同：4
> 
> 时间：2013-02-19T12:15:06.293
> 
> 标签：dart, dart-isolates

对我来说，DART Isolate 看起来像一个具有不同术语的线程 (Java/C#)。Isolate 与 Thread 在哪个方面不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T12:22:36.223

线程使用共享内存，隔离不使用。

例如，Java/C# 中的以下**伪代码**

```
class MyClass {
  static int count = 0;
}

// Thread 1: 
MyClass.count++;
print(MyClass.count); // 1;

// Thread 2:
MyClass.count++;
print(MyClass.count); // 2; 
```

这也存在共享内存被两个线程同时修改的风险。

而在 Dart 中，

```
class MyClass {
  static int count = 0;
}

// Isolate 1: 
MyClass.count++;
print(MyClass.count); // 1;

// Isolate 2:
MyClass.count++;
print(MyClass.count); // 1; 
```

隔离物彼此隔离。它们之间通信的唯一方法是传递消息。一个隔离器可以侦听另一个隔离器的回调。

在此处查看[文档，](http://www.dartlang.org/docs/dart-up-and-running/contents/ch03.html#ch03-dartisolate---concurrency-with-isolates)包括“隔离概念”部分。

# java - Java错误保存xml

> ID：14957256
> 
> 赞同：0
> 
> 时间：2013-02-19T12:15:11.470
> 
> 标签：java, xml, dom, save

我在 java 中有一个 Document 对象，我想保存它，所以我有这个代码：

```
TransformerFactory fabTransformador = TransformerFactory.newInstance();

Transformer transformador = fabTransformador.newTransformer();

Source origin = new DOMSource(documentoXML);

Result destino = new StreamResult(new java.io.File(nombrearchivo));

transformador.transform(origin, destino); 
```

其中“nombrearchivo”是文件名 (file.xml)，`documentoXML`是 Document 对象。当我执行代码时，我收到输出：错误：''我没有收到任何异常，只是消息错误：''文档大约 1,3 GB，我不知道这是问题所在，在这种情况下，还有另一种保存文件的方法吗？

我使用下一个导入：

```
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import javax.xml.parsers.*;
import javax.xml.transform.*;
import javax.xml.transform.dom.*;
import javax.xml.transform.stream.*; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:33:47.260

您的代码看起来不错，但作为参考，您可以使用另一种方法来保存 DOM 文档：

```
import org.w3c.dom.ls.*;
import java.io.FileOutputStream;

DOMImplementationLS ls = (DOMImplementationLS)documentoXML.getImplementation();
LSSerializer ser = ls.createLSSerializer();
LSOutput out = ls.createLSOutput();
out.setEncoding("UTF-8");
FileOutputStream output = new FileOutputStream("output.xml");
try {
  out.setByteStream(output);
  ser.write(documentoXML, out);
} finally {
  output.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:13:54.153

使用以下方法确定确切原因：

```
try { 
 secure.generaTextoXML(); 
} catch (Trowable thr) { 
 thr.printStackTrace();
} 
```

...或尝试`Level.ERROR`代替`Level.SEVERE`您的记录器：

```
try { 
 secure.generaTextoXML(); 
} catch (TransformerConfigurationException ex) {
 Logger.getLogger(GUI.class.getName()).log(Level.ERROR, null, ex); 
} catch (TransformerException ex) { 
 Logger.getLogger(GUI.class.getName()).log(Level.ERROR, null, ex); 
} 
```

# c++ - 在静态链接应用程序中使用函数 gethostbyname 的浮点异常

> ID：14957262
> 
> 赞同：0
> 
> 时间：2013-02-19T12:15:35.580
> 
> 标签：c++, linux, static-linking, gethostbyname

我有一个代码：

```
struct hostent *hp = gethostbyname(dns.c_str()); 
```

在我的应用程序中。我在静态链接所有的 Ubuntu 服务器上编译它。一切都好，但是当我尝试在 CentOS 上启动这个应用程序时，我在这个 gethostbyname 调用中出现错误：

> 浮点异常

你能帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:25:04.960

静态链接被认为是有害的 [http://www.akkadia.org/drepper/no_static_linking.html](http://www.akkadia.org/drepper/no_static_linking.html)

“libc 中的各种功能（语言环境（通过 iconv）、NSS、IDN 等）都需要动态链接来加载适当的外部代码。”

# dos - DOS 启动命令确实打开带有空格的目录

> ID：14957263
> 
> 赞同：2
> 
> 时间：2013-02-19T12:15:35.680
> 
> 标签：dos

请帮忙..

复制文件后，我想打开复制的文件夹。

我使用 DOS 命令启动。只要目录路径不包含任何空格字符，它就可以正常工作。

如果我在路径中使用引号，它宁愿打开另一个 dos 屏幕：

**此处示例 CMD 文件：

```
XCopy C:\1\Source\Test.txt C:\1\Target 1\ /R/Y/K
start "C:\1\Target 1\"
Pause** 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T01:45:34.157

你对引号的想法是正确的。棘手的一点是 start 假定第一个参数是被引用的窗口标题。如果你想引用你的目标，那么你*必须先*提供一个引用的标题。它可以为空：

```
start "" "C:\1\Target 1\" 
```

但是，如果您碰巧有一个名为 的批处理文件`Target 1.bat`，那么它将执行批处理脚本，而不是`Target 1`在 Windows 资源管理器中打开该文件夹。出于这个原因，使用 robert oh 的答案更安全，明确指定`explorer`作为目标，并将文件夹作为参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:26:38.140

你可以使用

```
start explorer "c:\some folder\" 
```

# c# - Linq to XML：获取 rss 的默认命名空间

> ID：14957265
> 
> 赞同：1
> 
> 时间：2013-02-19T12:15:37.397
> 
> 标签：c#, xml, linq-to-xml

我以这种方式调用多个类中的方法：

```
GetResult(XElement item, XNamespace ns) {
    item.Element(ns + "title").Value;
} 
```

为了初始化提要并访问上述元素，我想找出默认命名空间。没有任何命名空间声明，它可以正常工作 (item.Element("title").Value) 并返回元素的值。

那么我怎样才能找到正确的命名空间呢？方法 root.GetDefaultNamespace() 的结果以某种方式为空......

```
<rss xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0">
    <channel>...</channel>
</rss> 
```

//编辑

好的，到目前为止我的代码：

```
 XDocument thisFeed = XDocument.Load(@"http://www.spiegel.de/schlagzeilen/tops/index.rss");
    XElement root = thisFeed.Root;
    XNamespace ns = root.GetNamespaceOfPrefix("content");
    //result:
    Console.WriteLine("DefaultNamespace: " + root.GetDefaultNamespace());
    //result: http://purl.org/rss/1.0/modules/content/
    Console.WriteLine("GetNamespaceOfPrefix('content'): " + ns);
    //works
    Console.WriteLine("Result: " + root.Element("channel").Element("title").Value);
    //Doesn't work
    Console.WriteLine("Result: " + root.Element(ns + "channel").Element(ns + "title").Value); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:26:50.013

试试这样：

```
XNamespace ns = doc.Root.GetNamespaceOfPrefix("content"); 
```

`content`在您的示例中是*prefix*。可以在这篇**[w3schools 文章中找到对命名空间和前缀的很好解释](http://www.w3schools.com/xml/xml_namespaces.asp)**

**更新：**

该文档中没有定义默认命名空间，只有带有前缀的元素的命名空间，其他元素在没有命名空间的情况下检索。我发现只有元素`<content:encoded>`使用前缀，对于你需要使用的元素`ns`。

# css - 在同一个 html 文件中的窗口之间移动

> ID：14957268
> 
> 赞同：0
> 
> 时间：2013-02-19T12:15:45.270
> 
> 标签：css, jquery-mobile

我开始使用本教程使用 jQuery Mobile： [显示窗口](http://the-jquerymobile-tutorial.org/jquery-mobile-tutorial-CH02.php)

但是我现在遇到了一个我不明白的问题。

当文件名中有以下代码时，`index.html`我可以在窗口之间导航，但如果我在名为的文件中有相同的代码，例如`index3.html`，这将不再起作用....

有人知道原因吗？有什么解决办法吗？

```
<!DOCTYPE html>
<html>
    <head>
    <title>Page Title2</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head>

<body>

    <div data-role=page id=win>
        <!-- Default theme -->
        <div data-role=header>
            <h1>Default theme</h1>
        </div>

        <div data-role=content>
            <p>
                Window content
            </p>
            <a href=#wina> Goto "a" theme </a>
        </div>
    </div>

    <div data-role=page id=wina data-add-back-btn=true>
        <div data-role=header data-theme=a>
            <h1> "a" theme </h1>
        </div>

        <div data-role=content data-theme=a>
            <p>
                Window content
            </p>
            <a href=#winb> Goto "b" theme </a>
        </div>
    </div>

    <div data-role=page id=winb data-add-back-btn=true>
        <div data-role=header data-theme=b>
            <h1> "b" theme </h1>
        </div>

        <div data-role=content data-theme=b>
            <p>
                Window content
            </p>
            <a href=#winc> Goto "c" theme </a>
        </div>
    </div>

    <div data-role=page id=winc data-add-back-btn=true>
        <div data-role=header data-theme=c>
            <h1> "c" theme </h1>
        </div>

        <div data-role=content data-theme=c>
            <p>
                Window content
            </p>
            <a href=#wind> Goto "d" theme </a>
        </div>
    </div>

    <div data-role=page id=wind data-add-back-btn=true>
        <div data-role=header data-theme=d>
            <h1> "d" theme </h1>
        </div>

        <div data-role=content data-theme=d>
            <p>
                Window content
            </p>
            <a href=#wine> Goto "e" theme </a>
        </div>
    </div>

    <div data-role=page id=wine data-add-back-btn=true>
        <div data-role=header data-theme=e>
            <h1> "e" theme </h1>
        </div>

        <div data-role=content data-theme=e>
            <p>
                Window content
            </p>
            <p>
                End of themes
            </p>
        </div>
    </div>

</body>
</html> 
```

**更新** 我现在注意到这个问题只是从另一个页面来到这个窗口时发生的。当我直接输入它的 URL 时，`index3.html`它工作正常。另一页的代码是：

```
 <div data-role=content>
            <a href=index3.html> Goto default themes</a>
        </div> 
```

# android - RegisterForContextMenu ImageView？

> ID：14957273
> 
> 赞同：3
> 
> 时间：2013-02-19T12:16:07.030
> 
> 标签：android

我正在尝试使用浮动上下文菜单，我想知道是否可以通过按下 ImageView 中的图像来激活此菜单？

我的第一个问题是如何处理 registerForContextMenu 和 ImageView？我搜索并找到了大多数使用 GridView 和 ListViews 的示例。

我已经在 xml 中制作了菜单，我应该在带有开关的活动中使用此方法：

```
 @Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    super.onCreateContextMenu(menu, v, menuInfo);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T12:21:04.303

就像其他人一样，您可以在 onCreateContextMenu 中获取您的视图，基于您为适当的项目膨胀菜单。

```
registerForContextMenu(imageView); 
```

上面的方法需要任何 View 类。每次为不同的视图调用 registerForContextMenu() 时，都会调用 onCreateContextMenu() 来处理正确的菜单创建。

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
                            ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    if (v.getId == R.id.youtImageView) {
        getMenuInflater().inflate(R.menu.image_menu, menu);
    }
} 
```

根据您决定单击哪个查看菜单的项目 ID。您必须确保不同视图的菜单项的 id 不一样。单击上下文菜单中的项目时，您将收到 onContextItemSelected() 回调，其中包含单击的 MenuItem

```
@Override
public boolean onContextItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case R.id.image_menu_item_do_something:
            doSOmething();
            return true;
        default:
            return super.onContextItemSelected(item);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T05:48:52.670

确保你有这些方法`onCreate`：

```
ImageView image = (ImageView) findViewById(R.id.image_view);

registerForContextMenu(image);

image.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                openContextMenu(image);
            }
    }); 
```

在 中`context_menu_main.xml`，它看起来类似于：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:id="@+id/action_option"
        android:title="@string/action_option_text" />

</menu> 
```

最后，您需要重写这两个方法，如下所示：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    getMenuInflater().inflate(R.menu.context_menu_main, menu);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.action_option:
            Log.e("TAG", "Option");
            return true;
        default:
            return super.onContextItemSelected(item);
    }
} 
```

# ruby-on-rails - 在rails中使用多对多在同一模型中的集合选择会产生错误

> ID：14957276
> 
> 赞同：1
> 
> 时间：2013-02-19T12:16:15.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个奇怪的 Rails 数据库/表单问题。

我得到了 1 个包含 Courses 的表和 1 个表 Prerequisites，其中有 2 个列都包含 Course_ids（列称为“course_a_id”和“course_b_id”）。

在课程模型中，我有这个：

```
:has_and_belongs_to_many(:prerequisites,
:join_table => "prerequisites",
:foreign_key => "course_a_id",
:association_foreign_key => "course_b_id",
:class_name => "Course") 
```

从[这个答案](https://stackoverflow.com/questions/2168442/many-to-many-relationship-with-the-same-model-in-rails/2168528#2168528)

如果我通过控制台输入先决条件，这将起作用，如下所示：

```
Course.find(3).prerequisites = [Course.find(1), Course.find(2)] 
```

但是，此表单字段不允许我将 prereqs 放入数据库中：

```
<%= f.label :prerequisite, "Prerequisites" %>
<%= f.collection_select(:prerequisites, Course.all, :id, :name,
    {:multiple => true}, :multiple => "multiple") %> 
```

在使用值 1 选择一个选项发布后出现此错误：

```
"Course(#-631146998) expected, got String(#77208170)" 
```

并在参数转储中：

```
"prerequisites"=>["",
"1"]} 
```

我不知道那个“”是如何在参数中结束的，也想不出另一种方法来创建表单字段。我认为我的模型设置正确。

# php - 强制 Magento 在所有列表中仅使用一个 URL

> ID：14957281
> 
> 赞同：0
> 
> 时间：2013-02-19T12:16:30.517
> 
> 标签：php, magento, magento-1.5

我的问题如下： Magento 为新产品创建 URL 重写，并在不同的列表中使用不同的 URL。如果我的产品属于两个类别`Foo`，`Bar`Magento 将在我真正想要的 URL 之上使用两个 URL。

*   在类别列表中`Foo => /store/type/foo/product.html`
*   在类别列表中`Bar => /store/type/bar/product.html`
*   在正常链接中`/store/product.html`

我希望/需要让 Magento`/store/product.html`在整个商店中仅使用 URL。我在管理页面中没有找到任何设置。

使用 Magento `1.5.1.0`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:20:29.133

将系统 -> 配置 -> 目录中的“使用产品 URL 的类别路径”属性更改为“否”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:10:48.947

出于某种原因，Magento 忽略了所有商店的设置。搜索代码后，我发现该方法`Mage_Catalog_Model_Product_Url::getUrl()`使用`$product->getDoNotUseCategoryId()`. 我调用了这个方法，它返回`NULL`了所有产品。

为了解决这个问题，我在自己的产品类中重载了这个方法：

```
public function getDoNotUseCategoryId(){
    return true;
} 
```

这行得通。

这可能是一个不存在的属性或其他东西的问题，但只要它有效，我就会使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T12:29:14.257

有一种简单的方法可以在每个位置执行此操作，将 Url.php 从`app\code\core\Mage\Catalog\Model\Product`和过去的 URl.php 复制到`app\code\local\Mage\Catalog\Model\Product`. 之后需要更新`getUrl`功能。

找到这一行：`$categoryId = $product->getCategoryId() && !$product->getDoNotUseCategoryId() ? $product->getCategoryId() : null;`并更新`$categoryId = $product->getCategoryId() && Mage::getStoreConfig('catalog/seo/product_use_categories') ? $product->getCategoryId() : null;`

希望这会对某人有所帮助。

# javafx-2 - 如何在 ListView 中显示受限行

> ID：14957286
> 
> 赞同：0
> 
> 时间：2013-02-19T12:16:50.713
> 
> 标签：javafx-2

我采取了水平列表视图。我能够在列表视图中显示图像。它水平显示所有图像。但我的要求是我只需要连续显示 4 个图像。如果有第 5 个图像，那么它应该进入第二行（每行我应该只有 4 张图片）。我该怎么做。实际上我在这里被打动了。我想你能够理解我的问题。谢谢。

我正在使用 JavaFX 2.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:07:06.100

据我了解，如果您只需要连续分配 4 张图像，并且在下一行传输第 5 张以上的图像，您将能够使用 GridPane ：

[http://docs.oracle.com/javafx/2/layout/builtin_layouts.htm](http://docs.oracle.com/javafx/2/layout/builtin_layouts.htm)

您显然可以在其中设置 ImageView 的位置。似乎，它是这样工作的：您确定自己的 ListCell，并将其图形节点设置为网格窗格，并根据需要配置网格窗格。

另外，看一下流窗格，它可能会对您有所帮助。

如果我对食谱有误，请尝试再次描述您的问题（代码/屏幕截图）。我不完全确定。

# jsf-2 - MetaTagHandler 未处理类型

> ID：14957290
> 
> 赞同：2
> 
> 时间：2013-02-19T12:17:00.743
> 
> 标签：jsf-2, composite-component

我们有一个带有 editableValueHolder 的组合，我正在传递一个转换器和验证器。我创建了这个小例子，因为我可以看到 100.1 的值被接受，因为转换器首先被调用并且只是整数。

```
<xyz:InputTextComposite compId = "accountNumber" 
    property="#{myBean.accountNumber}" 
        <f:convertNumber integerOnly="true" for="inputTextContents"/>
    <f:validateDoubleRange maximum="100" minimum="10" for="inputTextContents" />
</xyz:InputTextComposite> 
```

但是，我在日志中看到了这一点：-

```
Feb 19, 2013 12:11:58 PM org.apache.myfaces.view.facelets.tag.MetaRulesetImpl finish
SEVERE: /linked/OLT/y.xhtml at line 16 and column 68 for="inputTextContents" Unhandled by MetaTagHandler for type javax.faces.convert.NumberConverter 
```

虽然它有效，但我觉得我无法提供这样的系统:-(

# backup - hbase 导出行大小限制

> ID：14957297
> 
> 赞同：0
> 
> 时间：2013-02-19T12:17:20.970
> 
> 标签：backup, hbase

我想使用 hbase 导出创建我的 hbase 表的备份。问题是我的行非常大，并且出现 java 堆空间错误。我可以提供任何参数来限制每个步骤中复制的大小吗？

我使用以下命令：

`hadoop jar /usr/lib/hbase/hbase-0.90.3-cdh3u1.jar export tableName backupPathOnHdfs numberOfColumnFamiliesVersions`

或者

`hbase org.apache.hadoop.hbase.mapreduce.Export tableName backupPathOnHdfs numberOfColumnFamiliesVersions`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:59:01.607

您可以使用导出工具，即`hadoop jar hbase-*-SNAPSHOT.jar export`，带有正则表达式参数（如果它以 开头`^`）或解释为作为最后一个参数的行键前缀。详细信息请参阅[源代码](http://hbase.apache.org/xref/org/apache/hadoop/hbase/mapreduce/Export.html#172)，因为它似乎尚未[记录](http://hbase.apache.org/book/ops_mgt.html#export)（应该从 0.91.0 开始工作）。

# import - 从ms访问导入sql server 2008

> ID：14957306
> 
> 赞同：0
> 
> 时间：2013-02-19T12:18:04.400
> 
> 标签：import, sql-server-2008-r2, ms-access-2010

在[这篇](http://www.packtpub.com/article/transferring-data-ms-access-2003-to-sql-server-2008)文章之后，我正在将**ms 访问**的数据导入**sql server**。

在导入时间，该过程在 84% 处停止，如下图所示。

![Sql server 导入导出向导](../Images/5dd4b7bc3775dde52a4bd11918534d0a.png)

这个过程不会消失。我认为它的发生是因为访问数据库是一个大文件，大约**350MB**，但不确定......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:46:54.620

保持原状。等一下，因为你有这么多数据，然后要导入很长时间。

参见长途旅行，我们需要更多时间，就像大量数据导入我们需要更多时间一样。

所以，等一下，我确定数据会成功导入......

# javascript - jquery条件逻辑问题

> ID：14957316
> 
> 赞同：0
> 
> 时间：2013-02-19T12:18:41.183
> 
> 标签：javascript, jquery, html

我需要一个只有在下拉菜单本身和悬停的列表项都没有悬停时才会消失的下拉菜单。

这是我已经在使用的使子菜单出现，只有当 li 项目悬停时才会出现，但是当子菜单悬停时它会消失，我必须解决这个问题。

Javascript：

```
<script>        
$(document).ready(function () {     
$("#menu-top li:nth-child(1)").hover(   
function () {      $('#dropdown_first').slideDown('fast');   },    
function () {      $('#dropdown_first').slideUp('fast');   } );  });                
</script> 
```

HTML：

```
<div id="menu-top"> 
<li>first item</li>
<li>second item</li>
<li>third item</li>
</div> 
```

..下页：

```
<div id="dropdown_first">
first menu dropdown
</div> 

<style>#dropdown_first {display:none'} 
```

我想我需要在`if`这里声明只使用回调滑动，当鼠标悬停对于子菜单和 li 项目都为 true 时，但被卡住了。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:21:11.930

如果你还想用JS来做效果，试试下面的。
我已经将它写下来，所以无法对其进行测试，但它应该可以解决您遇到的问题（希望如此）。

在顶部：

```
<style>
#dropdown_first {
display:none;
}
</style> 
```

Javascript：

```
<script>        
$(document).ready(function() {

$("#menu-top li:nth-child(1)").hover(function(){
$('#dropdown_first').slideDown('fast');
});

$("#menu-top").mouseleave(function(){
$('#dropdown_first').slideUp('fast');
});

});         
</script> 
```

希望有帮助

# sql - 如何根据修改日期生成存储过程的脚本？

> ID：14957323
> 
> 赞同：1
> 
> 时间：2013-02-19T12:18:50.227
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我有 50 个存储过程，而我今天只修改了 3 个，我只想为这 3 个修改后的存储过程生成脚本。

我怎样才能根据修改后的日期做到这一点？？？任何人请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:21:50.347

尝试这个

```
 SELECT name , create_date, modify_date ,sm.definition FROM sys.procedures sp
   Inner join sys.sql_modules sm  ON sp.object_id = sm.object_id 
   WHERE CONVERT(DATE,sp.modify_date)    = CONVERT(DATE, '02/19/2013') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:30:03.307

试试这个 - 在 SSMS 中运行“结果到文本”以保留选项卡等。

```
SELECT      M.definition
FROM        sys.procedures P WITH(NOLOCK)
INNER JOIN  sys.sql_modules M WITH(NOLOCK)
ON          M.object_id = P.object_id
WHERE       P.modify_date >= CAST(GETDATE() AS DATE) -- Modified since midnight today. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:33:33.903

像这样的东西？

```
select p.name
  ,stuff(m.definition,CHARINDEX('create',m.definition,0),6,'alter') as definition
from sys.procedures p
inner join sys.sql_modules m
on m.object_id = p.object_id
where modify_date >= cast(GETDATE() as date) 
```

结果集就像

```
name          definition
sp_xxxxxx     alter PROCEDURE [dbo].[sp_xxxxxx] ... 
```

# android - 向上滚动时自定义列表视图然后进度条进程隐藏

> ID：14957326
> 
> 赞同：1
> 
> 时间：2013-02-19T12:19:06.720
> 
> 标签：android, android-progressbar, custom-lists

我发现了一些类似的问题，但无法解决问题。我有一个自定义 Listview，其中每个项目都包含一个水平进度条。但是，当列表包含许多项目，并且我使用滚动条在列表视图中导航时，一些 ProgressBars 会消失。是什么原因造成的，我该如何解决？我的代码在下面。提前谢谢。

```
public class ScrollActivity extends Activity {
    ListView lv;
    // ArrayList<String> list = new ArrayList<String>();
    ArrayList<Url_Dto> list = new ArrayList<Url_Dto>();
    MyListAdapter adtf;

    public static String prf_date_view = "";

    String str_start;
    Button all_detail;
    Button accepted_all, mainDownloadBtn;
    Button not_shown;
    public static SQLiteDatabase db;
    String name;
    File download;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_scroll);

        list = DBAdapter.getUrl_Detail();
        Log.v("log_tag", "list  :: " + list.size());
        lv = (ListView) findViewById(R.id.main_list_meet);
        mainDownloadBtn = (Button) findViewById(R.id.not_shown);
        adtf = new MyListAdapter(this, 0, list);
        lv.setAdapter(adtf);

        /*SqliteAdpter dba = SqliteAdpter
                .getAdapterInstance(getApplicationContext());
        dba.createdatabase();
        db = dba.openDataBase();*/

        mainDownloadBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                // Log.v("log_tag","list.toArray()  "+list.size() );
                // new DownloadFileFromURL().equals(list.toArray());
            }
        });

    }

    public class MyListAdapter extends ArrayAdapter<Url_Dto> {
        private LayoutInflater mInflater;

        ArrayList<Url_Dto> emplist = null;
        public Activity activity;

        public MyListAdapter(Activity activity, int layoutResourceId,
                ArrayList<Url_Dto> emplist) {
            super(activity, layoutResourceId, emplist);
            this.activity = activity;
            this.emplist = emplist;
        }

        /*public MyListAdapter(Context context) {
            mInflater = LayoutInflater.from(context);

        }*/

        public int getCount() {
            return list.size();
        }

        /*public Object getItem(int position) {
            return position;
        }*/

        public long getItemId(int position) {
            return position;
        }

        private class ListRowViews {
            Button cl;
            Button dl;
            ProgressBar pr;
            ImageView im;

        };

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            final ListRowViews views;

            final Url_Dto itemState = getItem(position);

            // only recreate row if it is null
            if (convertView == null) {
                // store controls in tag of view so you can get them later
                convertView = mInflater.inflate(R.layout.custome_list_view,null);

                views = new ListRowViews();

                views.cl = (Button) convertView
                        .findViewById(R.id.cancle_sedual);
                views.dl = (Button) convertView
                        .findViewById(R.id.download_sedual);
                views.pr = (ProgressBar) convertView
                        .findViewById(R.id.listprogressbar);
                views.im = (ImageView) convertView
                        .findViewById(R.id.list_image);

                views.im.setImageResource(emplist.get(position).images[position]);

                views.cl.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                        views.dl.setVisibility(View.VISIBLE);
                        views.cl.setVisibility(View.GONE);

                        itemState.isClicked = true;
                    }
                });

                views.dl.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        str_start = emplist.get(position).url_video;
                        views.dl.setVisibility(View.GONE);
                        views.cl.setVisibility(View.VISIBLE);
                        Log.v("log_tag", "str_start  " + str_start);

                        //
                        // new DownloadFileFromURL().execute(str_start);
                        new DownloadFileFromURL().execute(views.pr, str_start);
                    }
                });

                // store the view pointers for reuse later
                convertView.setTag(views);

            } else {
                views = (ListRowViews) convertView.getTag();
            }

            // you need to get the progress from list item that this view
            // represents
            int progress = itemState.progress;
            views.pr.setProgress(progress);

            views.dl.setVisibility(View.VISIBLE);
            views.cl.setVisibility(View.VISIBLE);

            if (itemState.isVisible) {
                views.dl.setVisibility(View.VISIBLE);
                views.cl.setVisibility(View.GONE);
            } else {
                views.dl.setVisibility(View.GONE);
                views.cl.setVisibility(View.VISIBLE);
            }

            return convertView;
        }
    }

    class DownloadFileFromURL extends AsyncTask<Object, String, String> {

        int count = 0;
        ProgressDialog dialog;
        ProgressBar progressBar;
        int myProgress;

        /**
         * Before starting background thread Show Progress Bar Dialog
         * */

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            ProgressBar progressBar;

        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected String doInBackground(Object... params) {
            Log.v("log_tag", "params  :::; " + params);
            int count;
            progressBar = (ProgressBar) params[0];
            try {
                // URL url = new URL(f_url[0]);
                URL url = new URL((String) params[1]);
                Log.v("log_tag", "name  ::: " + url);
                name = ((String) params[1]).substring(((String) params[1])
                        .lastIndexOf("/") + 1);
                Log.v("log_tag", "name Substring ::: " + name);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(),
                        8192);
                download = new File(Environment.getExternalStorageDirectory()
                        + "/download/");
                if (!download.exists()) {
                    download.mkdir();
                }
                String strDownloaDuRL = download + "/" + name;
                Log.v("log_tag", " down url   " + strDownloaDuRL);
                FileOutputStream output = new FileOutputStream(strDownloaDuRL);

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    // publishProgress("" + (int) ((total * 100) /
                    // lenghtOfFile));

                    // writing data to file
                    progressBar
                            .setProgress((int) ((total * 100) / lenghtOfFile));
                    output.write(data, 0, count);
                }
                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }

            return null;
        }

        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... values) {

            super.onProgressUpdate(values);
            Log.v("log_tag", "progress :: " + values);
            // setting progress percentage
            // pDialog.setProgress(Integer.parseInt(progress[0]));
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

            Log.v("log", "login  ::: 4::: " + download);
            String videoPath = download + "/" + name;
            String chpName = name;
            Log.v("log_tag", "chpName  ::::" + chpName + "  videoPath "
                    + videoPath);
            /*db.execSQL("insert into videoStatus (chapterNo,videoPath) values(\""
                    + chpName + "\",\"" + videoPath + "\" )");
*/
        }

    }

} 
```

![在此处输入图像描述](../Images/b36bb121f7db552b8c2a50a40324edf7.png)

当进度条状态不可见且按钮状态隐藏时，我尝试向上滚动。什么是问题以及如何解决？

![在此处输入图像描述](../Images/0b6695289a3ef96b1925eec9b5d6af33.png)

我的错误鉴于它::

```
02-20 18:44:39.640: E/AndroidRuntime(4144): FATAL EXCEPTION: main
02-20 18:44:39.640: E/AndroidRuntime(4144): java.lang.NullPointerException
02-20 18:44:39.640: E/AndroidRuntime(4144):     at com.example.testscrollup.ScrollActivity$MyListAdapter.getView(ScrollActivity.java:121)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.AbsListView.obtainView(AbsListView.java:1593)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.ListView.makeAndAddView(ListView.java:1782)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.ListView.fillDown(ListView.java:705)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.ListView.fillFromTop(ListView.java:762)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.ListView.layoutChildren(ListView.java:1633)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.AbsListView.onLayout(AbsListView.java:1423)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.view.View.layout(View.java:7175)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.view.View.layout(View.java:7175)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.view.View.layout(View.java:7175)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.view.View.layout(View.java:7175)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.view.View.layout(View.java:7175)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1146)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.os.Looper.loop(Looper.java:130)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at android.app.ActivityThread.main(ActivityThread.java:3687)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at java.lang.reflect.Method.invoke(Method.java:507)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-20 18:44:39.640: E/AndroidRuntime(4144):     at dalvik.system.NativeStart.main(Native Method) 
```

我使用了下面给出的 Url_dto 类代码::

```
public class Url_Dto {
    String url_video;
    Integer[] images = { R.drawable.alligator_sm,
            R.drawable.bear_sm, R.drawable.bee_sm, R.drawable.bluejay_sm,
            R.drawable.camel_sm, R.drawable.cat_sm, R.drawable.chimpanzee_sm,
            R.drawable.chipmunk_sm, R.drawable.cheetah_sm, R.drawable.cock_sm,
            R.drawable.cow_sm, R.drawable.coyote_sm, R.drawable.deer_sm,
            R.drawable.dog_sm };
    protected boolean isClicked;
    public int progress;
    public boolean isVisible;
} 
```

下面给出的我的 DBADpter 类::::

```
public class DBAdapter {
    public static String url = "*****    My Url ********";

    public static ArrayList<Url_Dto> getUrl_Detail() {

        ArrayList<Url_Dto> fetchUrl_Detail = new ArrayList<Url_Dto>();
        String result = "";
        InputStream is = null;

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        // http post
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        // parse json data
        try {
            JSONObject json_obj = new JSONObject(result);
            JSONArray j_Arr_fn = json_obj.getJSONArray("children");

            for (int i = 0; i < j_Arr_fn.length(); i++) {
                JSONObject json_objs = j_Arr_fn.getJSONObject(i);
                Url_Dto proDto = new Url_Dto();
                proDto.url_video = json_objs.getString("videoUrl");
                Log.v("log_tag", "Url  :::" + json_objs.getString("videoUrl"));
                fetchUrl_Detail.add(proDto);
            }

        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
        }
        return fetchUrl_Detail;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:57:01.000

当您向上或向下滚动以节省内存时，android系统会重用行项。

因此，当您连续单击其中一个控件时，它被设置为 Visibility.GONE，然后当您滚动时，相同的控件在其他列表项上不可见，因为进度条之前被设置为不可见 - 明白吗？

此外，您每次显示时都在重新创建视图，因此您正在创建新的进度条，而不是重用已经创建的进度条。

您只需创建一次控件并在每次显示控件时重置控件的可见性和状态。

使用容器类来保存指向已创建视图的指针，这样您就不会每次都重新创建它们。

```
 private class ListRowViews
        {
           Button c1;
           Button d1;
           ProgressBar pr;

        };

    public View getView(final int position, View convertView, ViewGroup parent) 
    {
        ListRowViews views;

        final YourStateClass itemState = getItem(position);

        //only recreate row if it is null
        if (convertView == null)
        {
            //store controls in tag of view so you can get them later
            convertView = mInflater.inflate(R.layout.custome_list_view, null);

            views = new ListRowViews();

            views.cl = (Button) convertView.findViewById(R.id.cancle_sedual);
            views.dl = (Button) convertView.findViewById(R.id.download_sedual);
            views.pr=(ProgressBar)convertView.findViewById(R.id.listprogressbar);

            views.cl.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                // TODO Auto-generated method stub

                                views.dl.setVisibility(View.VISIBLE);
                                views.cl.setVisibility(View.GONE);

                                itemState.isClicked = true;
                            }
                        });

             views dl.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                // TODO Auto-generated method stub
                                str_start=list.get(position).url_video;
                                views.dl.setVisibility(View.GONE);
                                views.cl.setVisibility(View.VISIBLE);
                                Log.v("log_tag","str_start  "+ str_start);

                                //
                                //new DownloadFileFromURL().execute(str_start);
                                new DownloadFileFromURL().execute(pr,str_start);
                            }
                        });

              //store the view pointers for reuse later
              convertView.setTag(views);

        }
        else
        {
            views = (ListRowViews)convertView.getTag();        
        }       

        //you need to get the progress from list item that this view represents
        int progress = itemState.progress;
        views.pr.setProgress(progress); 

        views.dl.setVisibility(View.VISIBLE);
        views.cl.setVisibility(View.VISIBLE);

        if (itemState.isVisible)
        {
           views.dl.setVisibility(View.VISIBLE);
           views.cl.setVisibility(View.GONE);
        }
        else
        {
           views.dl.setVisibility(View.GONE);
           views.cl.setVisibility(View.VISIBLE);
        }

        return convertView;
} 
```

# jquery - 水平的完整日历周视图

> ID：14957327
> 
> 赞同：6
> 
> 时间：2013-02-19T12:19:13.560
> 
> 标签：jquery, html

如何将完整日历周视图垂直模式转换为水平？目前 fullcalendar 1.5.4 在周视图中按列提供天数。但我需要一个按天排列的周历。（一​​周日历，2周日历等）你能帮我吗？提前致谢

# ios - 测试应用内购买是否需要有效的付费应用合同？

> ID：14957328
> 
> 赞同：11
> 
> 时间：2013-02-19T12:19:14.237
> 
> 标签：ios, in-app-purchase, app-store-connect

我正在关注[In App Purchase 的教程，](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)该教程还展示了如何使用[沙盒环境](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html#//apple_ref/doc/uid/TP40008267-CH103-SW1)进行测试。当我尝试将应用内购买添加到我的应用程序时，iTunes Connect 提示以下提示：

*您没有针对所选价格等级的合同。要让您的应用在 App Store 上可用，您必须拥有有效的付费应用合同。*

我还能测试应用内购买吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T12:27:30.040

要在您的应用程序中添加和测试 InApp 购买，您必须就付费应用程序的苹果合同达成一致，并提供您的联系信息、银行信息和税务信息。您必须登录 itunesconnect.apple.com 并点击合同、税务和银行业务。

提供上述信息后，您可以在 iTunes Connect 网站上看到 Manage In App Purchase 按钮​​，然后您可以添加您的产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:36:36.337

您需要在 iTunes Connect 的合同、税务和银行信息部分创建付费应用程序合同。您将需要有关您的银行的大量信息，并且他们需要很多天甚至几周的时间来处理请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-21T13:23:45.477

是的。如果不这样做，产品计数将始终在您的代码中返回“0”。

您必须为“税表”（非美国居民）填写一系列问题。然后“设置联系人”，即使您是单独制作应用程序，即不是公司。

在每个字段中填写您自己的联系方式。

付费应用状态在半小时内变为“活跃”。

# c# - 完成事务后更改 TransactionScope IsolationLevel

> ID：14957330
> 
> 赞同：7
> 
> 时间：2013-02-19T12:19:21.137
> 
> 标签：c#, transactions, transactionscope

当我将数据保存在数据库中时，我使用了 TransactionScope，其中 IsolationLevel 设置为 Serializable。

```
TransactionOptions options = new TransactionOptions
        {
            IsolationLevel=IsolationLevel.Serializable
        };

using (var transaction = new TransactionScope(TransactionScopeOption.Required,options))
{
    transation.Complete();
} 
```

现在执行结束后，我想更改 TransactionScopeIsolationLevel。

**编辑**

我的理解是，如果 IsolationLevel 设置为 Serializable，那么在完成事务后，连接对象将关闭并返回到连接池，当其他一些请求到达时，它会从池中获取该连接对象，因此受前一个 IsolationLevel 的影响。所以我想在每次事务后将隔离级别更改为默认值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T12:47:05.373

您是对的：将连接返回到池时不会重置隔离级别。这是可怕的行为，但我们坚持下去......

有两种策略：

1.  在返回之前重置隔离级别：这是您的方法。
2.  始终使用带有显式事务（或 TransactionScope）的连接，以保证隔离级别。

我建议你做后者。

如果您坚持执行 (1)，您可以在关闭后简单地更改隔离级别，`TransactionScope`但您必须对连接对象执行此操作。例子：

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
    using (var transaction = new TransactionScope(TransactionScopeOption.Required,options))
    {
        connection.Open(); //open inside of scope so that the conn enlists itself
        transation.Complete();
    }
    //conn is still open but without transaction
    conn.ExecuteCommand("SET TRANSACTION ISOLATION LEVEL XXX"); //pseudo-code
} //return to pool 
```

这对你有用吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-14T16:23:41.927

我已经被这个咬住了。幸运的是，连接字符串逻辑是集中的。如果 Transaction.Current 不为空（这意味着我们在 TransactionScope 中），我所做的是更改连接字符串的应用程序设置。

这样，TransactionScope 连接就不会与其他连接合并。

# php - 快速数据库作为 PHP 数组的替代品

> ID：14957338
> 
> 赞同：3
> 
> 时间：2013-02-19T12:19:45.257
> 
> 标签：php, database, nosql, database-connection, key-value

我有一个包含我的参考变量的数组，在我的脚本中我需要捕获一个或两个变量。在当前系统中，我必须包含整个数组（及其元素）才能使用一个元素。似乎使用数据库更好，原因有两个：

1.  读取一条记录而不是整个数组
2.  变量可以轻松编辑

但是，使用数据库有一个主要缺点：**每次运行 php 时，我们都需要连接到数据库。**

由于像 SQLite 这样的简单数据库系统没有服务器，因此 persistent_connection 不像`mysql`.

在行动中，

```
$db = new SQLite3('mysqlitedb.db'); 
```

花费更多的时间（并消耗更多的资源）比

```
include 'array.php'; 
```

是否有任何解决方案可以让基本数据库系统（具有快速连接）替代 PHP 数组和`include`文件？

换句话说，我需要一个简单的数据库系统，其连接速度可与`fopen`. 但是，即使`CDB`速度非常快，在初始连接时也不够快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:27:56.600

通过包含静态数组文件，您实际上是在做缓存系统从数据库中提取结果时所做的事情。您正在直接从磁盘加载预先消化的结果。

所有数据库连接都有一些开销（当然不仅仅是包含渲染文件）。当您需要数据的操作可维护性时，您可以使用数据库，但这是以应用程序开销为代价的。

如果您不担心数据的持久性，您可能需要考虑使用缓存系统，如 APC、memcached 或 redis。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:26:41.517

您是否考虑过缓存变量？为此，您可以使用 APC 或 Memcached。它们都将比数据库更快，因为数据存储在 RAM 中，而不是磁盘上。

它仍然比仅包含数组要慢。

# php - 当我在此查询中添加 select 语句时，它什么也不返回？

> ID：14957342
> 
> 赞同：0
> 
> 时间：2013-02-19T12:20:07.797
> 
> 标签：php, codeigniter

当我使用 select 语句运行此查询时，它什么也不返回。

```
$this->db->select('emp_edu.qual_id','qual_title','pass_year','institute','percentage');
$this->db->from('emp_edu');
$this->db->join('qualification_mas', 'emp_edu.qual_id = qualification_mas.qual_id', 'INNER');
$this->db->where('emp_edu.emp_id', $empID);
$this->db->where('emp_edu.del_flag', 0);
$this->db->where('qualification_mas.del_flag', 0);
$query = $this->db->get();
return $query->result(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:40:45.967

改变

```
$this->db->select('emp_edu.qual_id','qual_title','pass_year','institute','percentage'); 
```

到

```
$this->db->select('emp_edu.qual_id,qual_title,pass_year,institute,percentage'); 
```

正如您在 system\database\active_rec.php 第 77 行中看到的那样

```
if (is_string($select))
            {
                $select = explode(',', $select);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:47:42.590

`$this->db->select( array('emp_edu.qual_id','qual_title','pass_year','institute','percentage'));`

或者你可以将你的参数包含在`array`

# java - 覆盖spring xml中的属性和系统属性

> ID：14957343
> 
> 赞同：2
> 
> 时间：2013-02-19T12:20:11.227
> 
> 标签：java, spring

在我的 Spring 配置中，我有以下行：

```
<context:property-placeholder
   location="/META-INF/spring/global.properties,#{systemProperties['external.propertyFile'] ?: ''}, /WEB-INF/local.properties"
   ignore-resource-not-found="true" /> 
```

我的意图是提供一些默认值`global.properties`，这些默认值应该可以被另一个传入的外部文件覆盖，`external.propertyFile`并且一些属性由应用程序本身保存在本地`local.properties`

从我在日志中看到的 -`global.properties`并且`local.properties`处理正确，但替换`#{systemProperties ... }`似乎在这里不起作用。

任何提示如何解决或解决它？

这是我的应用程序中的相关日志（缩短了一点）：

```
Loading properties file from ServletContext resource [/META-/spring/counter.properties]
Loading properties file from ServletContext resource [/#{systemProperties['external.propertyFile'] ?: ''}]
   WARN support.PropertySourcesPlaceholderConfigurer: Could not load properties from ServletContext resource [/#{systemProperties['external.propertyFile'] ?: ''}]: Could not open ServletContext resource [/#{systemProperties['external.propertyFile'] ?: ''}]
Loading properties file from ServletContext resource [/WEB-INF/local.properties] 
```

* * *

只是一句话：

在相同 XML 配置的其他地方，替换工作正常 - 例如。和：

```
<util:properties
   id="myProp"
   location="#{systemProperties['my.propertyFile'] ?: '/META-INF/spring/my.properties'}"/> 
```

但是这次我需要一种更复杂的方法来处理/合并实际的属性值:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:02:47.330

这对我来说没问题

```
<context:property-placeholder
   location="/META-INF/spring/global.properties,${external.propertyFile},/WEB-INF/local.properties"
   ignore-resource-not-found="true" /> 
```

# android - 切换语言后，fragment会增加重复选项菜单项

> ID：14957345
> 
> 赞同：0
> 
> 时间：2013-02-19T12:20:17.093
> 
> 标签：android, internationalization, android-fragments, application-settings, optionmenu

![在此处输入图像描述](../Images/bc64e84a6bd26b22b183e148a9883b3c.png)

在 v4.fragment 中，我设置`setHasOptionsMenu(true);`然后在`onCreateOptionsMenu`我设置`inflater.inflate(R.menu.menu_fragment, menu);`中，一切正常，直到我切换语言。

当应用程序运行时，我按home键，打开设置，更改语言环境，从最近的应用程序列表中选择我正在运行的应用程序，操作栏中的选项菜单会增加重复的菜单项，会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T04:50:12.393

双子座，我知道已经很晚了，你很可能已经有了答案。解决此问题的最简单方法是添加 menu.clear();

```
public void onPrepareOptionsMenu(Menu menu) {
  MenuInflater inflater = new MenuInflater(getActivity().getApplicationContext());

  menu.clear();

  super.onPrepareOptionsMenu(menu);
  inflater.inflate(R.menu.myMenu, menu);
} 
```

# vim - 编辑时如何在底部自动添加更多空白行？

> ID：14957346
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:20:23.427
> 
> 标签：vim

喜欢`scrolloff`，但它会到达底部
我希望它永远不会到达编辑区域的底部，尽管将光标移动到文本的底部。

```
100 func coding
101     return coding
102 end
103 // bottom of file
~   
~   auto added, can't reach
~
=============status bar=========== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:39:30.570

像这样的东西？

```
:autocmd CursorMoved * if line('.') == line('$') | call append('$', '') | endif 
```

每当光标到达最后一行时，它将自动附加一个空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:22:19.657

IIUC，您可以将*244an*的评论和*Ingo Karkat 的*答案结合起来，让 vim 总是在其窗口底部留下一些空行。以下内容应该可以帮助您：

```
autocmd CursorMoved * 
  \ if line('.') > line('$') - &scrolloff 
  \ && line('w0') + winheight(0) - 1 - &scrolloff < line('$') 
  \ | exec 'normal ^R' 
  \ | endif 
```

请注意，这有几个问题：

*   这也适用于命令窗口。
*   如果您直接跳到文件的底部，将完成新的跳过，直到`scrolloff`在最后一行下方可见行。

# php - 从日期到日期 - 搜索和显示

> ID：14957351
> 
> 赞同：1
> 
> 时间：2013-02-19T12:20:33.443
> 
> 标签：php, mysql, sql, case

我有一个包含两个信息的数据库。从今天到今天。我每天都需要这个条目出现在我的日历中，但我只能设法在第一个和最后一个日期出现。

数据库示例：

```
 job_no | date1(from)| date2(to)
   ________________________________
   1      |2013-01-28  | 2013-02-03
   2      |2013-01-14  | 2013-01-18 
```

编辑问题。我的搜索栏允许输入一个日期，日历通过 date1 和接下来的 6 天查找条目。

我不能进行包含两个日期输入的搜索，因为我的用户已经习惯了这种方式，我不想增加搜索时间。我开始认为我必须找到日期之间的日期，将其添加到`array`然后使用 an`if statement`来查找匹配项......但即使这样说对我来说也没有任何意义。

关于工作 1，我需要我的日历在 28/29/30/31/01/02/03 的所有日期显示这份工作。

我当前的搜索`SELECT * FROM jobs WHERE date1='$searchinput'`每天和日历此搜索。我使用 strtotime 将输入日期增加 +1 以添加到每天的搜索中。

日历页面。

我想要的结果。用户搜索日期 28 日。

```
 Mon 28          |      Tues 29     |    Wed 30     ...... | Fri 03    |
_________________________________________________________________________
   Job no 1      |      job no 1    |   job no 1    ...... | job no 1 
```

我现在拥有的。

```
 Mon 28       |      Tues 29     |    Wed 30     ...... | Fri 03    |
    _________________________________________________________________________
 Job no 1      |      blank       |      blank           | job no 1 
```

现在每天都有一个新的选择查询。它与日期 1 和日期 2 相匹配。我不像以前那样需要这个，我只有一天的工作，现在他们出去超过一天，需要在所有日子里记录工作，它只使用一个从日期和工作至今的工作。

**编辑2：**

```
SELECT * FROM calender_db NATURAL JOIN job_db 
WHERE section='two' 
AND date1 < '$day' AND date2 > '$day' 
OR date1 = '$day' OR date2 = '$day' 
```

此查询选择我需要的内容，但是当我使用 OR 时，第一个`WHERE`CLAUSE 可以为空。我需要它始终在条款中。我一直在考虑使用`IIF`或`CASE`纠正但不知道如何实现 100%...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:21:50.550

为什么不使用`BETWEEN`

```
SELECT * FROM tableName WHERE date BETWEEN 'date1' AND 'date2' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/8928c/1)

**更新 1**

```
SELECT * 
FROM tableName 
WHERE date BETWEEN '2013-01-28' AND '2013-01-28' + INTERVAL 6 DAY 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/8928c/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:28:14.213

要生成两个日期之间的天数列表：

```
$days = array();
$stop = strtotime($date2);
for ($current = strtotime($date1); $current <= $stop; $current = strtotime('+1 days', $current)) {
    $days[] = date('d', $current);
}
echo join('/', $days); 
```

[**演示**](http://codepad.viper-7.com/pSm4WE)

**更新**

误解了这个问题，如果两个日期都存储为列并且您使用单个日期进行查询：

```
SELECT *
FROM jobs 
WHERE 'date_from_input' BETWEEN date1 AND date2 
```

**更新 2**

您的最新查询可以写成：

```
SELECT * 
FROM calender_db NATURAL JOIN job_db 
WHERE section='two' AND '$day' BETWEEN date1 AND date2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:22:54.363

像这样试试

```
SELECT * FROM Mytimetable WHERE date BETWEEN 'date1' AND 'date2' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T12:23:25.020

**date1 - date2 之间的查询**

```
SELECT *
FROM `objects`
WHERE (date_field BETWEEN '2013-01-30 14:15:55' AND '2013-02-19 10:15:55')

OR

SELECT *
FROM `objects`
WHERE (date_field BETWEEN date1 AND date2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T12:35:59.790

查询以使用 PHP 变量选择两个日期之间的日期。我会用例子来解释：

$date1 = "2013-02-19"; $date2 = "2013-02-25";

那么sql查询将是：

```
$query  = " SELECT * FROM table_xyz where (date_item BETWEEN date('".$date1."') AND date('".$date2."')"; 
```

希望它能解决你的问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-20T12:51:21.967

```
SELECT 
   * 
FROM 
   tablename 
WHERE 
   date between '$date1' and '$date2' 
order by 
  date 
```

# python - ConfigObj 验证器将部分从 cs 添加到配置

> ID：14957358
> 
> 赞同：2
> 
> 时间：2013-02-19T12:20:51.043
> 
> 标签：python, validation, configobj

我对 python configobj 有疑问。为什么在 config.validate(validator, preserve_errors=True) 期间将来自 cs 的“参数”（命名参数）添加到配置中？

```
 def test_MissingSectionError(self):
        cfg = '''
[general]
    name = TestInteractionExample 1

[this_is_not_para_meter]
    [[frequency]]
        default_value = 900
        description = Description of parameter1
'''
        cs = '''
[general]
    name = string
[parameter]
    [[__many__]]
        default_value =
        description =
'''
        cfg_io = StringIO(cfg)
        cs_io = StringIO(cs)
        config = self.parser._get_configobj(cfg_io, cs_io, self.script)
        print 'Before validation: {}'.format(config)            
        validator = Validator()
        results = config.validate(validator, preserve_errors=True)
        print 'After validation: {}'.format(config)
        print 'result: {}'.format(results)

 #       self.assertRaises(MissingSectionError, self.parser._validate_config, config, self.script) 
```

打印给出：

验证前：{u'general': {u'name': u'TestInteractionExample 1'}, u'this_is_not_para_meter': {u'frequency': {u'default_value': u'900', u'description': u 'Description of parameter1'}}} 验证后：{u'general': {u'name': u'TestInteractionExample 1'}, u'this_is_not_para_meter': {u'frequency': {u'default_value': u'900 ', u'description': u'description of parameter1'}}, 'parameter': {}} 结果：True

奇怪的是，这验证为真，因为配置中缺少“参数”。但同样，如果它在 config.validate(validator, preserve_errors=True) 中添加到配置中，那么它也会变为 true。也许有一些选项可以将缺失值从 cs 复制到配置。

# c++ - shared_ptr 的问题 包装一个动态数组

> ID：14957359
> 
> 赞同：5
> 
> 时间：2013-02-19T12:20:53.173
> 
> 标签：c++, c++11, shared-ptr

我想用 a 替换我类中的一些原始指针，`std::shared_ptr`这样我在创建该类的副本时就不必担心。但是原始指针指向一个动态数组。当您给它一个自定义删除器时，可以将 shared_ptr 与动态数组一起使用，例如。G。`default_delete<T[]>`.

但是，一旦我尝试为该字段分配新值，即使在构造时，我也会得到一个很大的错误列表。

这是一个最小的代码示例：

```
#include <memory>
#include <cstddef>

using namespace std;

template<typename T> shared_ptr<T[]> make_shared_array(size_t size)
{
  return shared_ptr<T[]>(new T[size], default_delete<T[]>());
}

struct Foo
{
  shared_ptr<char[]> field;
};

int main()
{
  Foo a;
  // This line produces the error.
  a.field = make_shared_array<char>(256);

  return 0;
} 
```

* * *

**注意：**是的，我知道我可以/应该`vector`代替动态数组。但他们的表现并不相同。我做了一些繁重的图像处理，并且数组保存了像素。在低于 VGA 分辨率的情况下，处理时间从 8 秒增加到 11 秒。这是相当多的。

* * *

**更新：**当然我可以在这里提供错误。我只是不知道我是否应该用它来混淆问题描述。但这里是：

> C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\memory(754)：错误 C2664：'std::_Ptr_base<_Ty>::_Reset0'：无法将参数 1 从 'char *' 转换为 'char (* )[]'
> 与
> [
> _Ty=char []
> ]
> 指向的类型不相关；转换需要 reinterpret_cast、C 样式转换或函数样式转换
> C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\memory(723)：请参阅对函数模板实例化的参考 'void std::shared_ptr<_Ty >::_Resetp0<_Ux>(_Ux *,std::_Ref_count_base *)' 正在
> 使用
> [
> _Ty=char [] 编译，
> 
> C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\memory(723) ：参见对函数模板实例化的参考 'void std::shared_ptr<_Ty>::_Resetp0<_Ux>(_Ux *,std: :_Ref_count_base *)' 正在
> 使用
> [
> _Ty=char [],
> _Ux=char
> ]
> C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\memory(494) 编译：参见对函数模板实例化的参考 'void std::shared_ptr<_Ty>::_Resetp<_Ux,_Dx>(_Ux *,_Dx)' 正在编译 [ _Ty=char [],
> _Ux =char, _Dx=std::default_delete ]
> 
> C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\memory(494) ：参见对函数模板实例化的引用 'void std::shared_ptr<_Ty>::_Resetp<_Ux,_Dx>(_Ux *, _Dx)' 正在
> 使用
> [
> _Ty=char [],
> _Ux=char,
> _Dx=std::default_delete
> ]编译
> 问题.cpp(9) ：参见对函数模板实例化 'std::shared_ptr<_Ty>::shared_ptr>( _Ux *,_Dx)'
> 使用
> [
> _Ty=char [],
> T=char,
> _Ux=char,
> _Dx=std::default_delete
> ]编译
> problem.cpp(9) : 请参阅
> 使用
> [
> _Ty=char [],
> T=char,
> _Ux=char,编译的函数模板实例化 'std::shared_ptr<_Ty>::shared_ptr>(_Ux *,_Dx)' 的参考
> _Dx=std::default_delete
> ]
> problem.cpp(21) : 请参阅
> 使用
> [
> _Ty=char []
> ] 编译的函数模板实例化 'std::shared_ptr<_Ty> make_shared_array(size_t)' 的参考

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T12:38:34.440

您建议的解决方案是可能的，但您会丢失数组的大小：

```
#include <memory>
#include <cstddef>

using namespace std;

template<typename T> shared_ptr<T> make_shared_array(size_t size)
{
   return shared_ptr<T>(new T[size], default_delete<T[]>());
}

struct Foo
{
  shared_ptr<char> field;
};

int main()  
{
  Foo a;
  a.field = make_shared_array<char>(256);

 return 0;
} 
```

我在这里所做的就是让数组衰减成一个指针。只要删除器是数组删除器，它就应该正确运行。

为了防止这种大小损失，并且如果您不能按照建议使用 boost::shared_array，我建议将此信息封装在您自己的 shared_array 类中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T12:26:45.947

如果你坚持不应该使用`std::vector`，Boost 有一个[`boost::shared_array`](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_array.htm)作为智能指针来管理动态分配的对象数组。

`shared_ptr`不是为处理*数组*而设计的。既然`shared_array`是可用的，为什么要尝试`shared_ptr`在*数组*s上使用呢？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T13:09:04.693

如果您指定了删除器，则不要`T[]`在模板参数中使用。只需更改`T[]`为`T`：

```
template <typename T> shared_ptr<T> make_shared_array(size_t size)
{
  return shared_ptr<T>(new T[size], default_delete<T[]>());
}

struct Foo
{
  shared_ptr<char> field;
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T19:42:49.300

`std::unique_ptr`专门用于数组类型，因此您可以使用`T[]`它，它会知道它仍然只是存储一个`T*`. `std::shared_ptr`不是以这种方式专门化的，因此 a`shared_ptr<T[]>`将尝试存储指向数组的指针`T(*)[]`，这与 C++ 中围绕原始数组的约定不能很好地工作。更不用说大小未知的数组是不完整的类型，`shared_ptr`最终需要一个完整的类型。

您提到知道这`std::vector`应该是一个更好的解决方案，但表现不佳。它应该表现得很好，你可能最好弄清楚为什么它没有。

# asp.net - 使用 .csv 和 excel 进行字符编码

> ID：14957362
> 
> 赞同：0
> 
> 时间：2013-02-19T12:20:56.623
> 
> 标签：asp.net

我的问题是在 WPF 数据网格中显示欧洲字符，如 'ä' 和 'ö'。数据从 .csv 加载。我正在使用 .net 框架 4.0。

文件路径末尾包含 .csv 字符。CSV 文件由以下代码生成并打开。

```
 public static void GenerateCsvTemplate(bool overwrite)
    {
        try
        {
            if (overwrite)
            {
                if (!File.Exists(folderPath))
                {
                    Directory.CreateDirectory(folderPath);
                }

                string delimiter = Settings.Default.SplitValue.ToString();
                string content = "a;b;c;d;f";
                File.WriteAllText(filePath, content,UTF8Encoding.UTF8);
            }
            Process.Start(filePath);
        }
        catch (Exception ex)
        {
            logger.Error(ex.Message);
        }
   } 
```

以 UTF-8 编码创建文件不会改变我的数据网格上欧洲字符的输出。根据我的理解，WPF 中的默认编码应该是 UTF-8。用户修改模板并将其保存在 .csv 中的 excel 中。当他们输入欧洲字符时，它们无法在读取 .csv 文件的数据网格中正确显示。

当我阅读 .csv 文件时，在代码下方：

```
using (var reader = new StreamReader(File.OpenRead(FileHelper.filePath), UTF8Encoding.UTF8)) 
{
     //Read file and populate objects
} 
```

我想我错过了一些东西。

# django - 如何使用 Django REST 框架处理 many2many

> ID：14957363
> 
> 赞同：1
> 
> 时间：2013-02-19T12:21:01.370
> 
> 标签：django, django-rest-framework

使用[Django REST 框架](http://django-rest-framework.org/)。

我的一个模型中有一个**many2many**字段，即

```
 attribute_answers = models.ManyToManyField(AttributeAnswers) 
```

这创建了它唯一的表，因此我没有在我的模型中映射。

但是，我希望 API 允许对此表进行 POST，但它在模型中不存在，因此在视图和 Serialize.py 中我无法引用它。对此有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:42:18.763

> 这将创建它唯一的表，因此我没有在我的模型中映射。

我假设您正在谈论反向关系，`attribute_answers` *可以*从定义它的模型实例访问，*并将*创建一个适当的默认序列化程序字段。

对于反向关系，请确保您`related_name`在模型字段上设置了 ，以便您可以从`AttributeAnswers`模型中访问反向关系。

见这里：[http ://django-rest-framework.org/api-guide/relations.html#reverse-relations](http://django-rest-framework.org/api-guide/relations.html#reverse-relations)

# c# - 如何在 Asp.net Mvc 4，实体框架中处理图像

> ID：14957366
> 
> 赞同：0
> 
> 时间：2013-02-19T12:21:03.447
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

在我的课堂`Lugar`上，我有这个：

```
public virtual Foto FotosLugar { get; set; } 
```

我有这个定义：

```
public class Foto
{
    [Column(TypeName = "image")]
    public byte[] Binary { get; set; }
} 
```

在我的 LugarController 中，我尝试过：

```
 public ActionResult Create(Lugar lugar, HttpPostedFileBase FotosLugar) 
```

我试图进行一些转换，但它也没有工作......

我想`Image`在类内存储一个`Lugar`....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:09:56.127

尝试这个：

```
public ActionResult Create(Lugar lugar, HttpPostedFileBase fotosLugar)
{
    if (fotosLugar != null && fotosLugar.ContentLength > 0)
    {
        var contentLength = fotosLugar.ContentLength;
        var content = new byte[contentLength];
        fotosLugar.InputStream.Read(content, 0, contentLength);
        var foto = new Foto { Binary = content };
        lugar.FotosLugar = foto;
    }
    //... eventually return an ActionResult
} 
```

文件比普通数据更难处理，因为字节包含在`Stream`对象中。上面的代码从流中读取字节，以便它们可以存储在您的 EF 实体类中。

`ContentLength`其他几点注意事项：将,`ContentType`和也存储`FileName`在您的`Foto`实体上可能不是一个坏主意。您可能还想考虑将此实体拆分为 2，以便您可以从原始二进制文件数据中分别查询出文件名、内容类型和内容长度。我们的网站有一个问题，我们只需要获取文件名，但查询速度很慢，因为我们将`byte[]`列存储在与文件名相同的表中，SQL 在我们需要的时候返回所有二进制数据是字符串文件名。最终使用类似于以下的模型解决：

```
public class Foto
{
    public int Id { get; set; }
    public int ContentLength { get; set; }
    public string FileName { get; set; }
    public string ContentType { get; set; }
    public virtual FotoBinary Content { get; set; }
}

public class FotoBinary
{
    public int Id { get; set; }
    public virtual Foto Owner { get; set; }
    public byte[] Value { get; set; }
} 
```

这样，您可以单独查询`string`&`int`数据，并在需要时单独预先加载或延迟加载二进制数据。这是这两个实体之间关系的流畅映射：

```
// Foto entity
HasRequired(principal => principal.Content)
    .WithRequiredPrincipal(dependent => dependent.Owner)
    .WillCascadeOnDelete(true);

// FotoBinary entity
HasRequired(dependent => dependent.Owner)
    .WithRequiredDependent(principal => principal.Content)
    .WillCascadeOnDelete(true); 
```

当您使用与上述类似的映射时，数据库中的所有行`Foto`和`FotoBinary`行都将共享相同的主键 ( `Id`)。只要知道一个的Id，就可以用它来查询另一个（`Owner`或`Content`）的对应行。

最后，我至少会考虑不将`Lugar`实体传递到您的 MVC 操作中。您可以改为编写 ViewModel 类，例如`LugarViewModel`. 然后，该类可以具有[与 Karthik 的答案类似](https://stackoverflow.com/a/14958000/304832)`HttpPostedFileBase`的属性。然后，您的控制器操作可以从视图模型中获取数据并使用它来填充实体。`Lugar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:57:13.573

我不确定这与EF有什么关系。看起来你还没有到达那里。

您的意思是您无法在控制器的*Create操作中接收文件，对吗？*

你至少有两个选择：

*   有一个带有一个参数的操作（*HttpPostedFile/IEnumerable*）并与模型分开获取图像
*   或者您可以简单地访问控制器中的任何地方的**Request.Files**，您将获得上传文件的集合，然后稍后将其添加到您的*Lugar*类。不需要额外的*FotosLugar*参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T03:44:23.903

好的，这是我的看法：

*   您的基础实体类应该具有您最初指定的 byte[] 属性。没关系
*   定义一个可以传递给视图并且可以回发给控制器的视图模型类。这是应该具有 HttpPostedFileBase 类型的属性的类。
    *   这是一个使用 POST 到传统控制器的教程：( [http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx) )
    *   对于 API 控制器：（[https://stackoverflow.com/a/13157581/87454](https://stackoverflow.com/a/13157581/87454)）
*   将文件发送到控制器后，您必须将流转换为字节数组（以便能够将其分配给将存储在 SQL Server 中的实体对象）。这是 Skeet 大师关于如何做到这一点的一个很好的答案：[https ://stackoverflow.com/a/221941/87454](https://stackoverflow.com/a/221941/87454)

# python - TypeError：'int'对象在python中是可下标的

> ID：14957368
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:21:08.593
> 
> 标签：python, string, file

我正在编写一个程序来查看一个单词中是否包含三个连续的双字母，例如簿记。

当我尝试运行程序时，我收到错误，TypeError: 'int' object is ubsubscriptable。有什么理由吗？

```
def find_word(string):

    count = 0
    for eachLetter in range(len(string)):
        if eachLetter[count] == eachLetter[count + 1] and eachLetter[count+ 2] == eachLetter[count + 3] and eachLetter[count+ 4] == eachLetter[count + 5]:
            print string
        else:
            count = count + 1

def main():

  try:
  fin = open('words.txt') #open the file
  except:
  print("No file")

  for eachLine in fin:
 string = eachLine
 find_word(string)

if __name__== '__main__':
  main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:22:50.873

你的循环：

```
for eachLetter in range(len(string)): 
```

将小于字符串长度的 0 到 1 的数字赋给变量`eachLetter`；在此之后，`eachLetter[count]`没有任何意义。

你的意思是`string[eachLetter]`，等等？

请注意，您还会遇到索引错误；例如，当您到达“bookkeeping”的第 8 个字母时，没有要检查的字符 8+5 = 13，您的程序就会崩溃。

由于这似乎是家庭作业，我将把它作为练习留给你，让你弄清楚如何尽快停止循环 5 个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:24:09.110

Here's your error:

```
if eachLetter[count] 
```

Here `eachLetter` is `int`, because `range` returns list of ints.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-16T08:54:21.117

```
fin = open('words.txt')
string = fin.readline()

def find_word(string):
    for string in fin:
        count = 0
        for count in range(len(string)-5):
              if string[count] == string[count + 1] and string[count+ 2] == string[count + 3] and string[count+ 4] == string[count + 5]:
                 print(string)

def main(fin):

    for string in fin:

        return find_word(string)

main(fin) 
```

# database - Ms Access 子窗体与窗体的关系

> ID：14957372
> 
> 赞同：1
> 
> 时间：2013-02-19T12:21:25.740
> 
> 标签：database, ms-access, foreign-keys, relational-database, primary-key

我是 Access 女士和数据库的初学者，我正在建立会议管理数据库。我被困在某个时候请帮忙

数据库的目的是管理与不同公司的会议，这些会议在大多数情况下会不时重复

我创建的表。

表 1 - 公司

```
FirmID - AutoNo - PK
FirmName - Text
.... 
```

表 2 - FirmReps（存储每个公司的多个代表）

```
FirmRepID - AutoNo    
FirmID - FK    
RepName - Text
... 
```

表 3 - 会议详情（将是主要表格）

```
MeetingID - AutoNo    
MeetingDate - Date/Time    
MeetingTime - Date/time    
Venue - Text    
FirmName - FK
... 
```

我正在寻找解决方案，当我输入会议详细信息并选择公司名称时，所有个人都将显示在单独的子表单中，我可以在其中选择（勾选）感兴趣的代表参加会议

我为 FirmReps 创建了一个子表单，并将主表单与 FirmID 链接，但每次我选择公司名称时，都会显示所有代表，而不是与会议 ID 保存/链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:53:31.433

要在子窗体的组合框中仅获取选定的公司，您可以参考主窗体的 FirmID。像这样设置组合的行源：

```
 SELECT FirmRepID, RepName FROM FirmReps
 WHERE  FirmID = Forms!NameOfMeetingsFormHere!FirmID 
```

# c# - 在 Win7 上从一天到另一天连接到 sqlite 文件出错了

> ID：14957373
> 
> 赞同：0
> 
> 时间：2013-02-19T12:21:27.377
> 
> 标签：c#, .net, sqlite

在 Windows 7 机器上，我有一个 sqlite 数据库，它连接到我的 .net/c# 应用程序。在那个应用程序中，我通过一个非常简单的`var connection = new SQLiteConnection(connString);`命令连接到这个数据库。

它工作了一年，但从今天开始它开始抛出“无法打开数据库文件”异常。那台机器上没有任何变化，除了有一些自动获胜更新，仅此而已。

该文件没有损坏，它可以通过命令行和 sqlite gui 应用程序打开。该机器上的安全设置未更改。

我知道这个 sqlite 错误消息的几个主题，但这个问题似乎是一个新问题。

那么，在某些 Windows 7 自动更新过程之后，是否有人遇到过这样的错误？

**更新**：除了 win7 更新，晚上还有一些 Avast Antivirus 更新。所以这两个更新发生在最后一次成功连接之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:26:09.207

所以，最后我们发现，它是由 Avast AntiVirus 引起的。

如果有人遇到这样的问题，请检查防病毒设置、carantene、sandbox & co。

# c# - 在动态创建的 Pages() 上覆盖 VerifyRenderingInServerForm

> ID：14957374
> 
> 赞同：1
> 
> 时间：2013-02-19T12:21:31.123
> 
> 标签：c#, asp.net, gridview, webforms

我在动态创建页面时遇到了一些问题：

```
p = New Page();
Page myPage = new Page();
FormAtt ctrl = (FormAtt)myPage.LoadControl("path/to/my/file.ascx");  // here lies the gridview of evil
myPage.Controls.Add(ctrl); 
```

问题是我收到

```
Control ... must be placed inside a form tag with runat=server 
```

好的，所以我发现我需要重写该`VerifyRenderingInServerForm`方法才能调用无格式页面，但是`VerifyRenderingInServerForm`由于我没有 ASPX 文件，我该如何重写。

* * *

ps：我有一个相关的问题，我不知道该怎么做，因为它们是不同的问题，但解决方案是相同的问题，我放弃了最后一个解决方案 - 请参阅：[Form is Null in Dynamically created Pages](https://stackoverflow.com/questions/14946018/form-is-null-in-dynamically-created-pages)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:38:13.177

您可以尝试使用已经覆盖的自定义类`VerifyRenderingInServerForm`：

```
 public partial class MyCustomPage : System.Web.UI.Page
 {
    public override void VerifyRenderingInServerForm(Control control)
    {         
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        var p = new MyCustomPage();
        FormAtt uc = (FormAtt)p.LoadControl("path/to/my/file.ascx");
        p.Controls.Add(uc);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:54:05.227

类似于你之前的问题。您需要先添加**HtmlForm**。ASP.Net 需要一个表单标签才能将控件添加到页面。

```
Page myPage = new Page();
HtmlForm form = new HtmlForm();
FormAtt ctrl = (FormAtt)myPage.LoadControl("path/to/my/file.ascx");
form.Controls.Add(ctrl);
myPage.Controls.Add(form); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-16T09:20:18.557

我这样做是为了渲染一个组件

```
 System.IO.StringWriter stringWrite = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);

    Page p = new Page();
    System.Web.UI.HtmlControls.HtmlForm form = new System.Web.UI.HtmlControls.HtmlForm();
    p.Controls.Add(form);
    form.Controls.Add(gv);
    form.RenderControl(htmlWrite);
    string j = stringWrite.ToString(); 
```

# javascript - 如何从 iframe 中删除或禁用超链接

> ID：14957375
> 
> 赞同：0
> 
> 时间：2013-02-19T12:21:31.330
> 
> 标签：javascript, sharepoint

我正在尝试删除或禁用 iframe 中存在的超链接。

假设我有一个倒计时时间，它在 iframe 中有一个水印，并且还有一个 javascrip 版本。

禁用javascript的任何机会都是..我将此iframe放在Sharepoint 2010中

任何帮助都会对我很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:32:33.320

在 iframe 中放置一些 JavaScript，通过 ID 获取元素。如果您不知道 ID，请获取所有控件，循环遍历它们，直到找到使用其他属性的控件，例如超链接的标题或超链接中包含的文本。获得控制权后，您可以使用 JavaScript 禁用或隐藏它。例如

```
 <script>
function hide(id) {
  var elem = document.getElementById(id);
  elem.style.display=elem.style.display=="none"?"block":"none";
  return false; 
}
</script> 
```

# opengl - OpenGL GLUT 鼠标移动

> ID：14957377
> 
> 赞同：1
> 
> 时间：2013-02-19T12:21:35.280
> 
> 标签：opengl, mousemove

我为相机写了一个鼠标功能。它运作良好。但唯一的问题是一开始，当我第一次用鼠标移动时，它会向左上方跳跃，然后效果很好。我不明白为什么会这样。

这里是鼠标功能。

```
float lastx = 0.0;
float lasty = 0.0;

void mouseMovement(int x, int y) 
{
    lastx = (float)x - lastx;
    lasty = (float)y - lasty;

    if((float)x > lastx)
        Camera.RotateY((-lastx)*0.01);
    else
        Camera.RotateY(lastx*0.01);
    if((float)y > lasty)
        Camera.RotateX(lasty*0.01);
    else 
        Camera.RotateX(-lasty*0.01); 
    lastx = (float)x;
    lasty = (float)y;
    Display();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:13:00.053

我猜，如果您要跟踪所有鼠标移动，则需要在鼠标进入或离开窗口时进行捕捉，或者简单地丢弃任何大于一定量的跳跃。

假设鼠标离开窗口的右边缘，然后重新进入窗口的左边缘。您显示的代码会跳转。

除非有理由不这样做，否则我会将最后一个变量设为静态并添加类似于此的 if 语句（未测试:)）...

```
void mouseMovement(int x, int y) 
{
    static float lastx = 0.0;
    static float lasty = 0.0;

    lastx = (float)x - lastx;
    lasty = (float)y - lasty;

    if((abs((int)lastx)>10)||(abs((int)lasty)>10)
    {
        lastx = (float)x;
        lasty = (float)y;
        return;
    }

   //the rest remains the same 
```

逻辑是......它看到的任何事件，不是它看到的最后一个事件，只是重置变量并等待另一个事件。

对于鼠标控制来说，这确实不是一个优雅的解决方案，但是在你的编码中，它可能是可以理解的，并且会做你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:24:52.187

在开始接受数据*之前*将光标移动到屏幕中间。并确保`lastx`并`lasty`正确初始化。

我 90% 确定它是 FPP 摄像头，您手动将光标移动到屏幕中间。所以它发生在窗口的右下角，然后被移动，报告为增量。也可能是`lastx`和`lasty`在第一次读取时初始化，在此之前它们包含垃圾。

# android - 无法从游标中获取数据？

> ID：14957378
> 
> 赞同：0
> 
> 时间：2013-02-19T12:21:36.143
> 
> 标签：android, android-sqlite, android-cursor

```
public Cursor getsomething()
{
    this.open(); 
    Cursor c= database.query(DatabaseHandler.Table_Name,magicdata,null, null, null,null,null); 

    this.close();
    return c;
} 
```

我正在使用此代码来查询我的数据库。然后我在主要活动中调用它。

```
get=X.getsomething();
if (get.getCount() > 0)
{
    if  (get.moveToFirst())
    {
        do {
        String uname = get.getString(get.getColumnIndex("content_id"));
    String unknown =url + uname;
    String ax= get.getString(get.getColumnIndex("content"));
    downloadimages(url,ax); 
        }
        while (get.moveToNext());
    }
}
}} 
```

我在`error`这里得到一个，我的代码没有运行，我不知道为什么？

错误代码如下

```
 02-20 10:27:18.378: E/PhonePolicy(1261): Could not preload class for phone policy com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback
 02-20 10:27:18.488: D/TextLayoutCache(1261): Using debug level: 0 - Debug Enabled: 0
 02-20 10:27:20.998: D/AndroidRuntime(1261): Shutting down VM
 02-20 10:27:20.998: W/dalvikvm(1261): threadid=1: thread exiting with uncaught exception    (group=0x40a3e1f8)
 02-20 10:27:20.998: E/AndroidRuntime(1261): FATAL EXCEPTION: main
 02-20 10:27:20.998: E/AndroidRuntime(1261): java.lang.RuntimeException: Unable to start   activity ComponentInfo{com.example.newpicker/com.example.newpicker.MainActivity}: java.lang.IllegalStateException: database /data/data/com.example.newpicker/databases/content.db (conn# 0) already closed
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.os.Handler.dispatchMessage(Handler.java:99)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.os.Looper.loop(Looper.java:137)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.app.ActivityThread.main(ActivityThread.java:4429)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at java.lang.reflect.Method.invokeNative(Native Method)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at java.lang.reflect.Method.invoke(Method.java:511)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at dalvik.system.NativeStart.main(Native Method)
 02-20 10:27:20.998: E/AndroidRuntime(1261): Caused by: java.lang.IllegalStateException: database /data/data/com.example.newpicker/databases/content.db (conn# 0) already closed
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2082)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:413)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:400)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:79)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:164)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:156)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at com.example.newpicker.MainActivity.datamining(MainActivity.java:70)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at com.example.newpicker.MainActivity.onCreate(MainActivity.java:45)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.app.Activity.performCreate(Activity.java:4465)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
 02-20 10:27:20.998: E/AndroidRuntime(1261):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:28:16.443

这是您的解决方案。尝试这个。

```
String[] columnArray = { "content_id, content " };
        Cursor cursor = database.query(DatabaseHelper.TABLE_NAME,columnArray, null, null, null, null, null);
        if (cursor.getCount() > 0) {
            cursor.moveToFirst();
            do {
                int id = cursor.getInt(cursor.getColumnIndex("content_id"));
                String content =cursor.getString(cursor.getColumnIndex("content"));
            } while (cursor.moveToNext());
            cursor.close();
        } else {
            Log.i("TAG"," No value found");

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:15:42.497

阅读线

> 02-20 10:27:20.998: E/AndroidRuntime(1261): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.newpicker/com.example.newpicker.MainActivity}: java.lang.IllegalStateException: 数据库/data/data/com.example.newpicker/databases/content.db (conn# 0) 已经关闭

从日志中我们看到，`database already closed`所以你必须做的是：

打开 db 并确保在运行游标代码之前它不会关闭：

```
 public Cursor getsomething()
    {
        // this.open(); // <-- explained below
        Cursor c= database.query(DatabaseHandler.Table_Name,magicdata,null, null, null,null,null); 

        // this.close(); // <-- if `this` refers to DB, it's a mistake, close DB at the end.
        return c;
    } 
```

因此，在您的活动代码中，为了不让您的数据库打开，请使用以下内容：

```
X = new YourDatabaseClassName();  // new instance of your database (class contains getsomething method)
X.open(); // open DB
get=X.getsomething();
if (get != null && get.getCount() > 0) // also add a null check
{
    if  (get.moveToFirst())
    {
        do {
            String uname = get.getString(get.getColumnIndex("content_id"));
            String unknown =url + uname;
            String ax= get.getString(get.getColumnIndex("content"));
            downloadimages(url,ax); 
        }
        while (get.moveToNext());
    }
    get.close(); // also close the cursor
}
X.close(); // you end with DB so close it! next time it needs to reopened 
```

[这里](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)也是一个android数据库教程。

# ios - 将视图切换到情节提要上的另一个视图

> ID：14957381
> 
> 赞同：0
> 
> 时间：2013-02-19T12:21:47.830
> 
> 标签：ios, uiview, uinavigationcontroller, views, navigationcontroller

我是 iOS 编程新手。

我想做的是：

我在故事板中有一些视图，我想以编程方式在视图之间切换。比如，当一个按钮被点击时，我调用了一个方法，我想在这里改变视图（我可以成功调用该方法）。这些按钮也以编程方式在不同的位置创建。

我已经搜索过，我认为它发生在`NavigationController`. 我有一个这样创建的导航控制器： menu `Editor -> Embed In -> NavigationController`。我怎么能用这个来做到这一点`NavigationController`？

@Madhu 和 @Dilip ，我找到了一个`xib`归档类的解决方案

```
icerik *secondViewController = [[icerik alloc] initWithNibName:@"icerik" bundle:nil];

    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:secondViewController];
    navigationController.navigationBar.barStyle = UIBarStyleBlackTranslucent;
    navigationController.topViewController.title = @"SecondViewController";

    //[self presentModalViewController:navigationController  animated:YES];

    if([self respondsToSelector:@selector(presentViewController:animated:completion:)])
        [self presentViewController:navigationController animated:YES completion:^{/* done */}];
    else if([self respondsToSelector:@selector(presentViewController:animated:)])
        [self presentModalViewController:navigationController animated:YES]; 
```

我有一个名为 icerik 的带有 xib 文件的类，我像这样解决了它。它正在开放，但是当我想回头时，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:30:18.063

如果您的新手`Objective-c`首先使用 Views/ViewControllers。即使用`addSubView`的属性`UIView`

```
UIView *subView = [[UIView alloc] initWithFrame:CGRectMake(10, 0, 250.0, kCCCellHeaderHeight)];
[subView setBackgroundColor:[UIColor redcolor]];
[self.view addSubview:subView]; 
```

`UINavigationCOntroller`如果您对使用知之甚少`pushViewController`

```
CCFilteredVideosController *filteredController = [[CCFilteredVideosController alloc] initWithNibName:@"CCFilteredVideosController" bundle:nil];
[self.navigationController pushViewController:filteredController animated:YES];
[filteredController release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:31:33.613

您可以使用以下代码创建 btn：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self action:@selector(aMethod) forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[self.view addSubview:button]; 
```

并且要转到另一个 vc 使用此代码，如果你想要导航栏：

```
-(void)aMethod
{
SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:SecondViewController];
    navigationController.navigationBar.barStyle = UIBarStyleBlackTranslucent;
    navigationController.topViewController.title = @"SecondViewController";

    [self presentModalViewController:navigationController               animated:YES];
} 
```

否则使用此代码：

```
-(void)aMethod
{
SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    [self presentModalViewController:secondViewController            animated:YES];
} 
```

为了从第二个 vc 回到第一个 vc，在第二个 vc 中添加此代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBarButtonItem *closeButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(backAction:)]; 
    self.navigationItem.leftBarButtonItem = closeButton;
}
- (void)backAction:(id)sender {
    [self dismissModalViewControllerAnimated:NO];
} 
```

# objective-c - 想要在 __weak ivar 被取消时执行操作

> ID：14957382
> 
> 赞同：7
> 
> 时间：2013-02-19T12:21:48.430
> 
> 标签：objective-c, automatic-ref-counting, ivar

我有一个`@class Foo`包含`__weak id bar`ivar。来自不同类中的方法的几个操作可能导致对象消失并因此被`bar`取消。

我想在 ARC 自动取消 ivar 时执行一个操作。

如果可能的话，我想避免`bar`变成属性或使用键值观察。

这甚至可能吗？如果不是，KVO 可以用于对抗非财产 ivars 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-06T14:13:24.593

我被一个重复的问题引导到这里，这是我的回答：

你不能用 KVO 做到这一点，但你仍然可以通过使用 将对象与你的 iVar 关联来获得通知并模拟`objc_setAssociatedObject()`它，当弱变量死亡时它将被释放。

```
@interface WeakObjectDeathNotifier : NSObject
@end
@implementation WeakObjectDeathNotifier
- (void)dealloc
{
    // the code that shall fire when the property will be set to nil
}
@end 
```

您可以在非常复杂的通知器之上构建，使用`NSNotificationCenter`或仅使用自定义块，具体取决于您对特定 ivar 案例或其中许多案例的依赖程度。

这个解决方案的好处是它适用于任何`__weak`ivar，即使您不控制`__weak`ivar 的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-16T12:03:49.637

KVO 无法成功用于非财产 IVAR。

当 Objective-C 的 ARC 取消 IVAR 时，您无法从运行时检测到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:58:37.563

我建议覆盖dealloc。如果您知道将要分配的对象的类型，并且它是一个自定义类（否则为它的子类），您可以在对象被释放时执行该操作，这正是 ARC 将保留计数设置为零并设置弱变量为零。

# c# - 如何在 mvc 表单中找到选中的复选框？

> ID：14957388
> 
> 赞同：0
> 
> 时间：2013-02-19T12:22:05.240
> 
> 标签：c#, asp.net-mvc

我的 viewModel 包含 Foo 属性列表 (FooList)。我在剃刀上通过 foreach 迭代 FooList，例如：

```
 @foreach (Foo foo in Model.FooList)
                    { <tr>
                        <td>
                            <input type="checkbox" value="False" name="@foo.Id"/></td>
                        <td>@foo.Name</td>
                    </tr>
                    } 
```

我正在检查一些项目然后提交表格。我从 FormCollection 访问选定的值。但是我失去了面向对象的能力，因为我需要字符串解析操作等。最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:30:49.217

这是 MVC 中的一个常见问题，因为在发回模型时很难绑定复选框列表。

我之前使用过这个扩展，它使场景变得更加简单。[CheckBoxList(For)](http://mvccbl.com/)说明非常简单，包在 Nuget 上可用。

# jquery - 提交表单时遇到问题 - “500 Internal Server Error”

> ID：14957390
> 
> 赞同：0
> 
> 时间：2013-02-19T12:22:04.683
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

**jQuery**

```
$(document).ready(function () {
    var EmailContainer = $('#EmailContainer');
    var url = EmailContainer.attr('data-url');
    EmailContainer.load(url, function () {
        var Emailform = $('#EmailForm');
        $.validator.unobtrusive.parse(Emailform);
        Emailform.submit(function () {
            debugger;
            var Emailform = $(this);
            if (Emailform.valid()) {
                var SendEmailUrl = EmailContainer.attr('Json-Url');
                var UserModel = { From: $('#From').val(), To: $('#To').val(), 
                      Subject: $('#Subject').val(), 
                      Description: $('#Description').val() }
                $.post(SendEmailUrl, UserModel, function (data) {
                    Emailform.html(data);
                    Emailform.removeData('validator');
                    Emailform.removeData('unobtrusiveValidation');
                    $.validator.unobtrusive.parse(Emailform);
                });
            }
            return false;
        });
    });
}); 
```

**管理控制器部分视图**

```
@model _1.Areas.Email.Models.User
@using (Html.BeginForm("SendEmail", "Admin", FormMethod.Post, new { id = "EmailForm" }))
{
    @Html.LabelFor(i => i.From);
    @Html.TextBoxFor(i => i.From);
    @Html.ValidationMessageFor(i => i.From);
    <br />
    @Html.LabelFor(i => i.To);                           
    @Html.TextBoxFor(i => i.To); 
    @Html.ValidationMessageFor(i => i.To);
    <br />     
    @Html.LabelFor(i => i.Subject);                           
    @Html.TextBoxFor(i => i.Subject);
    @Html.ValidationMessageFor(i => i.Subject);
    <br />
    @Html.LabelFor(i => i.Description);                           
    @Html.TextBoxFor(i => i.Description);
    @Html.ValidationMessageFor(i => i.Description);
    <br />
    <input type="submit" value="Send Email" id="SendMail" />
} 
```

**问题 - 提交管理控制器的部分视图时。它给出“500 内部服务器错误”**

![在此处输入图像描述](../Images/0f0d76edacea0c24286c86c0b1368618.png)

**更新 - 1**

正如您在部分视图中看到的 - 我在 HTML.BeginForm 中提到了该操作，并且我还提交了表单。我认为请求被提交不止一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:47:13.260

由于错误消息表明您的应用程序正在尝试查找名为“SendMail”的视图，这是因为您在下面的行请求了一个。

```
[HttpPost]
public ActionResult SendMail(User Model)
{
    new MailController().SendMail(Model).DeliverAsync();
    return View(); // this is causing a redirect to a get version of this call
                   // asking for a view.
} 
```

您打算返回 HTML 还是 JSON 响应？如果是 HTML 则添加一个视图；如果不返回一个`JsonResult`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:38:18.970

当您使用 jQuery 和 AJAX 时，MVC 会将任何错误页面发送回客户端，但由于状态码不是“200 OK”而是“500 internal server error”，jQuery 不会运行您给它的回调函数AJAX 调用。

您的问题是，找不到邮件模板（视图，.vbhtml）。

```
return Email("SendMail", model); 
```

上面的代码告诉控制器找到一个名为“SendMail.vbhtml”的视图。在您的最后一张图片中，您可以看到 MVC 在哪里寻找“SendMail.vbhtml”： `~/Areas/Email/Views/Admin` 和 `~/Views/Shared`

将您的视图放在其中一个文件夹中应该可以解决问题

# testing - 实验室环境中的编码 UI 测试

> ID：14957391
> 
> 赞同：1
> 
> 时间：2013-02-19T12:22:08.480
> 
> 标签：testing, tfs, automated-tests

我正在尝试建立一个自动构建过程以及一些编码的 ui 测试。我想我已经成功地设置了几乎所有东西并正常工作，最后一个缺失的部分是能够在测试代理机器上运行编码的 UI 测试。

所以基本上，我有一个 CI 构建，它也运行单元测试，如果成功，将二进制文件部署到共享位置。我的目标是触发另一个运行编码 UI 测试的进程。通过对启动应用程序的位置进行硬编码，我得到了在我的开发计算机上运行的编码 UI 测试。但是，我不知道如何配置它以在测试代理上工作。我使用了 LabDefaultTemplate11 构建过程模板，并将其配置为使用 CI 构建完成的最新构建。但是我如何指定测试代理应该使用什么可执行文件呢？

起初我认为指定构建定义和构建配置就足够了，但后来我意识到可能有多个可执行文件，所以测试代理必须猜测。听起来不太好。

所以最后我想我的问题是，如何（稳健地）将应用程序的启动添加到我的编码 UI 测试中，这种方式既适用于我的本地开发机器，也适用于运行测试代理的机器？

哦，我正在使用 TFS 2012（带有 VS 2012 高级版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:38:35.900

实验室模板希望您在 MTM 中创建测试用例，然后通过打开测试用例、选择关联的自动化选项卡并单击“...”按钮，在 Visual Studio 中将编码的 ui 测试与它们相关联。您需要在当时打开带有编码 ui 测试的项目。

然后在实验室构建中，您选择一个或多个测试套件（来自 MTM），其中包含那些编码的 uit 测试的测试用例。

当您首先进行测试时，请确保您以测试代理也能够运行的方式运行您的程序/网站 - 例如使用标准安装目录或域。

最佳实践是在每次测试开始时打开正在测试的程序并在结束时关闭它。但是，您可以通过在实验室构建中将程序作为部署指令的一部分执行来解决这个问题。

# c# - 操作系统命令注入

> ID：14957394
> 
> 赞同：4
> 
> 时间：2013-02-19T12:22:29.830
> 
> 标签：c#, windows, winforms

[操作系统命令注入](https://www.owasp.org/index.php/OS_Command_Injection)是否适用于 winform 应用程序？

它是主要的安全威胁吗？

如果是，那么保护应用程序免受其侵害的最佳可行解决方案是什么？

上述任何链接将不胜感激。

这是示例代码

```
公共静态无效 RunNewInstance（参考字符串 pstrUserRole）
        {
            组装 asm = Assembly.GetExecutingAssembly();
            字符串 lstrExeName = asm.ManifestModule.Name;
            进程 proc = new Process();
            字符串 lstrCurrentDirectory = Environment.CurrentDirectory;
            proc.StartInfo.FileName = lstrCurrentDirectory + "\\" + strExeName;

            proc.StartInfo.Arguments = pstrUserRole;
            proc.Start();
        }

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:40:39.567

如果您的 winforms 应用程序允许用户输入执行他们无法执行的任意系统命令，那么是的，它很容易受到攻击。解决方案是不允许它。与其运行 shell 命令，不如明确说明允许用户做什么。不要让用户做任意的事情。

这是一个超级笼统的答案，但是您没有提供有关您的应用程序的具体信息，因此无法知道最适合您的决定是什么。

不过我的猜测是，因为这是一个 winforms 应用程序，所以该应用程序可能具有与交互式用户相同的权限。在这种情况下，您的应用程序没有任何事情可以通过打开命令提示符来完成。

也许你应该提供更多关于你的应用程序的细节，以及你为什么害怕这个特定的漏洞。

# jquery - 使用 jQuery 选择第 3 个？

> ID：14957398
> 
> 赞同：7
> 
> 时间：2013-02-19T12:22:47.467
> 
> 标签：jquery

我有一个表一行和该行中的多个 td，如下所示：

```
<tr class="first odd">
    <td class="a-center">
    <td>...</td>
    <td>...</td> --> I want this
    <td>...</td> 
    <td>...</td>
    <td>...</td>
</tr> 
```

我能够获得所有 td 的父 tr，但是有没有办法只在 tr 中获得第三个 td？

获取 tr 的代码是：

```
jQuery('#shopping-cart-table >  tbody > tr').each(function(index, value) {
    ...
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T12:24:21.683

您可以使用`:eq`选择器：

```
jQuery('#shopping-cart-table > tbody > tr').each(function(index, value) {
    $('td:eq(2)', this)
}); 
```

或者：

```
jQuery('#shopping-cart-table tbody').find('td:eq(2)'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:24:41.363

在 jQuery 中使用 :eq 函数：http: [//api.jquery.com/eq/](http://api.jquery.com/eq/)

```
$('#shopping-cart-table td').eq(2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T12:30:04.023

试试这样：

```
$(".first td:nth-child(3)").append("<span>-3rd"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T12:25:03.240

试试这个

```
$("#shopping-cart-table >  tbody > tr td").eq(2); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-09T02:30:11.933

标题答案：

```
$("#tableId tr td:nth-child(3)").html(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T12:57:21.890

这是最好和最简单的代码。您可以单击该行中的按钮，然后它将显示第三个值。如果这是你的桌子：

```
<tr class="first odd">
    <td class="a-center">
    <td>...</td>
    <td>...</td> --> I want this
    <td>...</td> 
    <td>...</td>
    <td><button id='test'><button></td>
</tr> 
```

然后在javascript中将按钮与click事件绑定，如下所示：-

```
$(document).ready(function () {
    $('#test').click(function(){
         var thirdData  = $(this).closest('tr').children('td:eq(2)').text();
         alert(thirdData);
    });
}); 
```

这将解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-15T18:56:43.270

[示例代码，这里也可以修改](https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_filter_table)

我认为这将解决问题，因为您可以`<td>`通过更改此等式的最后一个索引来加载任何给定的`td = tr[i].getElementsByTagName("td")[1];`

# css - CSS中的检票口自动链接

> ID：14957400
> 
> 赞同：0
> 
> 时间：2013-02-19T12:22:51.200
> 
> 标签：css, wicket, autolink

我在面板的一部分中有以下行：

```
.divider{
   background-image: url("img/pspacer.png");
} 
```

.png 相对于面板 java/html 源放置

Wicket Autolink 已启用并适用于其他资源，例如 .js 和 .css 文件。CSS 声明中的 Url 未被 Wicket 修改，当从浏览器请求时，当然会导致错误。

```
java.lang.ClassNotFoundException: img 
```

如果与静态资源没有冲突，则错误将变为 404 错误。然而，最初的问题仍然存在，自动链接器不会改变引用。

# c++ - 为什么从列表中删除时会出现段错误？

> ID：14957404
> 
> 赞同：0
> 
> 时间：2013-02-19T12:22:53.347
> 
> 标签：c++

如果它符合 C++11 中的某些条件，我试图从列表中删除一个对象，然后如果找到该对象则返回 true：

```
int x = 178;
typename network_internal_edge_store_type::iterator itr =
    internal_edges.begin();
for (; itr != internal_edges.end(); ++itr) {
  // If edge object found that has this property, then remove it.
  if (itr->index1() == x || itr->index2() == x) {
    itr = internal_edges.erase(itr);
    return true;
  }
}
return false; 
```

但是，这个segfaults就行了`itr = internal_edges.erase(itr);`。`internal_edges`是代表我上面定义的网络中边缘的对象的共享指针列表。

起初我以为我在取消引用一个无效的迭代器，所以我在该行设置了一个断点。令我惊讶的是，当我将迭代器取消引用为监视表达式 ( `*itr`) 时，它似乎有效。

然后，我认为问题可能出在迭代器如何指向共享指针，所以我之前尝试`itr->reset()`过`itr = internal_edges.erase(itr);`，但是程序然后segfaults就行了`itr->reset()`。

还有什么可能导致此段错误？

这里有更多关于类型的信息`internal_edges`。

```
class NetworkInternalEdge;
typedef NetworkInternalEdge network_internal_edge_type;
typedef std::weak_ptr< network_internal_edge_type > network_weak_edge_ptr;
typedef std::shared_ptr< network_internal_edge_type > network_shared_edge_ptr;
typedef std::list< network_shared_edge_ptr > network_internal_edge_store_type;
network_internal_edge_store_type internal_edges; 
```

== 追踪错误 ==

我仍在尝试用一个小测试用例重现此错误。我还意识到该错误与`_M_dispose();`shared_ptr_base.h 中的行（第 147 行）有关：

```
 void
  _M_release() noexcept
  {
    // Be race-detector-friendly.  For more info see bits/c++config.
    _GLIBCXX_SYNCHRONIZATION_HAPPENS_BEFORE(&_M_use_count);
if (__gnu_cxx::__exchange_and_add_dispatch(&_M_use_count, -1) == 1)
  {
        _GLIBCXX_SYNCHRONIZATION_HAPPENS_AFTER(&_M_use_count);
    _M_dispose();
    // There must be a memory barrier between dispose() and destroy()
    // to ensure that the effects of dispose() are observed in the
    // thread that runs destroy().
    // See http://gcc.gnu.org/ml/libstdc++/2005-11/msg00136.html
    if (_Mutex_base<_Lp>::_S_need_barriers)
      { 
```

共享指针似乎出了点问题。在擦除时，存在 1 个共享指针和 3 个指向 的弱指针`**itr`。这有帮助吗？

# devexpress - Devexpress XAF - 如何在其他类中插入详细记录

> ID：14957410
> 
> 赞同：0
> 
> 时间：2013-02-19T12:23:05.933
> 
> 标签：devexpress, xaf

看情况：有4个类如下描述，当在OrderService中选择一个任务时，我怎么能在OrderCheckList中自动包含连接到这个任务的CheckLists（详细信息）？

OrderService（与 Tasks 一对一关系）（与 CheckListsOrder 一对多关系）

任务（与清单的一对多关系）

清单

订单检查表

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:35:19.563

要包含详细信息编辑器，您可以使用 [EditorAlias(EditorAliases.DetailPropertyEditor)] 属性，但如果我没记错的话，这仅适用于 1-1 关系（我可能错了 - 请查看文档）

另外值得一看的是这个属性：[ExpandObjectMembersAttribute(ExpandObjectMembers.Never)]

希望这至少可以为您指明正确的方向。

# php - 为什么不关闭行？

> ID：14957412
> 
> 赞同：0
> 
> 时间：2013-02-19T12:23:13.210
> 
> 标签：php, while-loop, html-table

我从表中的数据库输出数据。

在使用下一个代码创建的结果表中：

```
while($i=$res2->fetch_assoc()) {
    $a++;
    $t2.='
    <tr>
    <td>'.$a.'</td>
    <td>'.date_format(new DateTime($i['date']),'d.m.Y').'</td>
    ';

    if($valid!='id'){
        $t2.='
        <td>'.$partner.'</td>
        ';
    }

    $t2.='
    <td>'.$http_referer.'</td>
    </tr>';
}
$t1='
<table class="table table-hover table-bordered">
<thead>
<tr>
<th class="column_th_number">№&lt;/th>
<th>Date</th>
';

if($valid!='id'){
    $t1.='
    <th>Partner</th>
    ';
}

$t1.='
<th></th>
</tr>
<tr>
<td colspane="2">
&nbsp;
</td>
</tr>
</thead>
<tbody>
';
$t3='
</tbody>
</table>
';
echo $t1.$t2.$t3; 
```

但在结果中我看到最后一行没有关闭（见图）：

![测试图像](../Images/22214ccdb7015184c2b892420ce02c09.png)

请告诉我为什么最后一行没有关闭？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:25:17.507

```
<td>'.date_format(new DateTime($i['date']),'d.m.Y').'</td>
if($valid!='id'){ 
```

用。。。来代替

```
<td>'.date_format(new DateTime($i['date']),'d.m.Y').'</td>'; <--- end the string here
if($valid!='id'){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:26:08.503

你错过了`';`

```
<td>'.$a.'</td>
<td>'.date_format(new DateTime($i['date']),'d.m.Y').'</td>';
if($valid!='id'){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:51:07.290

*谢谢大家。*

*colspan 出错（值与列数不匹配）。*

*谢谢大家的帮助*

# javascript - 生成测试电子邮件 ID

> ID：14957413
> 
> 赞同：0
> 
> 时间：2013-02-19T12:23:14.603
> 
> 标签：javascript

问题所需的解决方案：

ID 是固定的“质量保证”我想生成如下 ID：`1- q.ualityassurance`

对于第二次运行 id 应该是这样的：`2- qu.alityassurance`

第三次运行应该是这样的：`3- qua.lityassurance`

依此类推，直到 id 的长度。但我不明白如何为下一次运行调用具有递增值的函数。

代码是：

```
Selenium.prototype.doNothing = function(){
    // The do in front of Nothing in the function is what tells the system this is a global function
}

Selenium.prototype.doRandomEmail = function(locator, num)
{
    var id = “qualityassurancetask”;
    var stringLength = id.length;
    var randomstring = ”;
    var insstring = ‘.’;
    var num = 1;

    //var rnum = Math.floor(Math.random() * stringLength);

    var remainingstring = id.substring(num,id.length);

    randomstring += id.substring(0,num).concat(insstring, remainingstring);
    randomstring += “@gmail.com”

    num= num+1;

    selenium.doType(locator,randomstring,num);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:05:42.540

尝试这样的事情：

```
next_address = last_address.replace(/\.(.)/, "$1."); 
```

这个想法是寻找“。？” 在哪里 ？是任何字符（请注意，正则表达式中的文字 . 用于匹配任何字符，因此我使用 .? 来解释）。这将更改为“?.”，即点在字符串中向右“推”。如果新旧地址相同，那么您的组合就用完了。

请注意，如果您的地址字符串包含 @gmail.com 部分，您需要避免将点移到 @ 后面，您可以这样做：

```
next_address = last_address.replace(/\.(\w)/, "$1."); 
```

也就是说，只允许将点与“单词”字符交换。

# php - 在这种情况下正确的mysql表设计/关系

> ID：14957414
> 
> 赞同：0
> 
> 时间：2013-02-19T12:23:15.757
> 
> 标签：php, mysql, cakephp, relational-database, entity-attribute-value

我有这种情况，我需要有关数据库表设计的建议。

**背景**

我正在用 PHP 开发一个应用程序（准确地说是 cakephp）。我们上传一个 xml 文件，它会解析文件并将数据保存在数据库中。这些 XML 可以是文件或 url 提要，这些是从各种供应商处购买的数据。它旨在**从源 url 收集各种场所数据，场所可以是酒店、电影院、学校、餐馆**等。

**问题**

这些场地的初始表格结构如下。表最初设计用于存储通用信息。

```
id
Address
Postcode
Lat
Long
SourceURL
Source
Type
Phone
Email
Website 
```

随着来自不同来源的数据越来越多，我意识到不同类型的场地有很多属性。

例如，酒店可以具有一些属性，例如

```
price_for_one_day, types_of_accommodation, Number_of_rooms etc 
```

因为学校没有它们，但有不同的属性集。餐厅将有一些其他属性。

我的第一个想法是创建两个名为 vanue_attribute_names 的表，Venue_attributes

```
##table venue_attribute_names
_____________________________
id
name

##table venue_attributes
________________________
id
venue_id
venue_attribute_name_id
value 
```

因此，如果我检测到任何新属性，我想在属性表中创建一个具有关系的属性及其值。但我怀疑这不是正确的方法。我相信还有其他方法可以解决这个问题吗？此外，如果表变大，由于连接和 sql 查询的增加，可能会出现性能问题

创建具有所有可能属性的最广泛的表作为列是正确的方法吗？请告诉我。如果有任何我可以参考的链接，我可以关注它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:48:46.817

这是一个令人惊讶的普遍问题。

您描述的设计通常称为“实体/属性/值”或 EAV。它的好处是允许您存储各种数据，而无需事先知道该数据的架构是什么。它的缺点是难以查询 - 想象一下在给定位置查找所有酒店，其中每日房价在 100 美元到 150 美元之间，其名称以“Waldorf”开头。针对所有属性编写查询并快速应用布尔逻辑变得比您希望的要难。您也无法轻松应用数据库级别的一致性检查，例如“hotel_name 不得为空”或“daily_room_rate 必须为数字”。

如果这些问题都不让您担心，那么您的设计可能会奏效。

第二种选择是将“通用”字段存储在传统的关系结构中，但将变体数据存储在某种文档中——例如 MySQL[支持 XML](http://dev.mysql.com/doc/refman/5.1/en/xml-functions.html)。这允许您定义 XML 模式，并使用 XPath 等进行查询。

这种方法为您提供比 EAV 更好的数据完整性，因为您可以应用模式约束。这确实意味着您必须为您正在处理的每种类型的数据创建一个模式。这对你来说可能没问题——我猜这家公司每周不会增加几十个新的场地类型。

XML 查询的性能可能很棘手，通用工具和开发方法将使其比“仅 SQL”更难构建。

如果您想坚持使用关系数据库，最后的选择就是硬着头皮使用“纯”SQL。您可以创建一个具有公共属性的“主”表，一个具有餐厅特定属性的“餐厅”表，一个具有酒店属性的“酒店”表。只要您拥有可管理数量的场地类型，并且它们不会意外出现，这就会起作用。

最后，您可以查看 NoSQL 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:32:02.257

如果您坚持使用关系数据库，就是这样。您列出的选项几乎就是他们可以给您的。

对于您的情况， [MongoDB](http://www.mongodb.org/)（或其他面向文档的 NoSql 系统）可能是一个不错的选择。如果你有很多不同属性的记录，这个数据库系统非常好。

# django - Django & 软删除：实现架构

> ID：14957416
> 
> 赞同：6
> 
> 时间：2013-02-19T12:23:30.093
> 
> 标签：django, architecture, django-models, django-database

## 定义

*   SOFT DELETE - 不从数据库中删除对象，但似乎这样做
*   HARD DELETE - 从数据库中完全删除对象

## 问题

在代码库（特别是 Django 项目）中实现软删除的最佳方法是什么？

我认为最简单的方法是简单地添加：

```
is_deleted = models.BooleanField(default=False) 
```

到实现 a 的超类`softDeleteObject`，然后覆盖`delete()`以在相关对象上设置适当的标志。相关对象也需要从同一个超类继承。

另一种方法是删除原始文件，并拥有相当于存档对象的内容，该对象是已删除对象的表示。

## 分析

第一个似乎具有更大程度的简单性，但确实需要一些广泛的覆盖 - 例如，`User`必须覆盖以确保所有已删除对象的外键关系仍然保持，并且删除用户然后没有' t 硬删除所有软删除的对象。

第二个可以使用触发创建代理对象的 pre_delete 信号来实现。这同样有一些优点（不需要覆盖所有`delete()`方法），但确实需要实现项目中使用的模型的存档版本。

哪个更可取，还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:48:54.670

为什么不在需要的特定模型上使用活动/已删除/状态标志并这样做呢？或者检查应用程序[django-reversion](https://pypi.python.org/pypi/django-reversion/1.6.5)，可能有你需要的一切；）

# highcharts - highcharts_column_id_on_click

> ID：14957418
> 
> 赞同：1
> 
> 时间：2013-02-19T12:23:55.793
> 
> 标签：highcharts

如何通过点击事件从列中获取 id。

这是链接

```
        [jsfiddle](http://jsfiddle.net/dlkms/JC3Va/1/)        
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:38:22.947

您的列不包含 ID，系列包含，因此可以通过`this.series.options.id`.

# jquery-select2 - Select2 不显示所选值

> ID：14957419
> 
> 赞同：39
> 
> 时间：2013-02-19T12:23:57.647
> 
> 标签：jquery-select2

Select2 成功加载列表中的所有项目，这是我在页面加载时尝试选择特定值时发现的问题。例子：

:: 将 select2 放在特定的 html 元素中，即使加载了所有项目，也不会选择任何值。

```
$('#my_id').select2(); 
```

:: 加载页面时，我试图显示选定的特定项目，但不能按预期工作，因为即使选择了，select2 也不会显示它。

```
$('#my_id').val('3'); //select the right option, but doesn't render it on page loads. 
```

如何在页面加载时弹出选定的选项？

提前致谢。

# 更新

:: 我如何加载所有 select2 项目（对不起，它的玉，不是纯 HTML）：

```
label(for='category') Category
    span.required *
select(id='category', style='width:230px', name='category')
    option(value='') - Select -
    each cat in categories
        option(value='#{cat.id}') #{cat.description} 
```

PS：我列表中的所有项目都已加载。

::我如何初始化select2：

只需将以下行代码放在我的 javascript 上，它就成功了：

```
$('#category').select2(); 
```

:: 我如何尝试选择特定值：

*   第一次尝试：

    ```
    $('#category').select2(
        {
            initSelection: function(element, callback) {
                callback($('#field-category').val());
            }
        }
    ); 
    ```

*   第二次尝试：

    ```
    $('#category').val($('#field-category').val()); 
    ```

PS：`#field-category`有一个隐藏输入字段的值并且可以正常工作。

多谢你们！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-19T12:28:52.137

您需要使用[initSelection](https://select2.org/advanced/default-adapters/data#initselection)选项来设置初始值。

如果你使用预定义的`select`元素来创建select2，你可以使用下面的方法

```
$('select').select2().select2('val','3') 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/AeXYN/)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-11-11T03:42:07.767

设置 val 后添加触发器更改：

```
$('#my_id').val('3').trigger('change'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-13T06:25:36.587

解决这个问题的一个非常简单的方法是：

```
//Step1: Here assuming id of your selectbox is my_id, so this will add selected attribute to 1st option
$('#my_id option').eq(0).prop('selected',true);

//Step2: Now reinitialize your select box

//This will work, if you haven't initialized selectbox
$('#my_id').select2(); 
```

或者

```
//This will work, if you have initialized selectbox earlier, so destroy it first and initialise it
$('#my_id').select2('destroy').select2(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-03T02:18:15.173

这可能会有所帮助：

```
$('#mySelect2').val('1'); // Select the option with a value of '1'
$('#mySelect2').trigger('change'); // Notify any JS components that the value changed 
```

您可以在[此处](https://select2.org/programmatic-control/add-select-clear-items)找到更多详细信息：

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-23T06:04:25.417

这是如何`val`在 select2 中只选择相应的元素。出于某种原因，select2 不提供按 id 查找选择的功能。

在里面：

```
$("#thing").select2({data:sources, initSelection: function(item, callback) {
  // despite select2 having already read the whole sources list when you 
  // do .val(n) you have to explicitly tell it how to find that item again.
  var to_be_selected = null;
  $.each(sources, function(index, thing) {
    if (thing.id == item.val()) {
      to_be_selected = thing;
      return;
    }
  })
  callback(to_be_selected);
}}) 
```

普通代码

```
// to load the thing with id==3 from the initial sources list.
$("#thing").select2({'val': 3}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-04T19:07:06.137

Per [here](https://select2.github.io/options.html#initSelection) initSelection 在 Select2 4.0 及更高版本中已弃用。

使用 Select2 4.0.0 这对我有用：

```
$('#my_id').select2({val:3}); 
```

HT：@Kokizzu

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-10T16:35:23.043

对我来说，我在数据集中发送选择仍然没有选择默认选项。我必须做类似下面的事情才能让它工作 -

```
$(".select").select2({
    data: data_names
});
data_names.forEach(function(name) {
    if (name.selected) {
        $(".select").select2('val', name.id);
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-19T15:44:27.787

只需触发 select2 即可设置值

```
$('#my_id').val('3').trigger("change.select2"); 
```

这将通过下拉菜单触发 select2

```
$('#my_id').val('3').trigger("change"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-06T06:56:40.787

```
 var option=$(this);
   if(option.val()==data.StudentCourses.CourseId)
   {
    option.setAttribute('Selected');
   }
   }); 
```

我已经初始化了 select2，因为我只想从中选择几个选项。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-22T02:10:06.283

我有一个带有多个选择的多个 select2 框。

第 1 步是将我的 school_ids 字符串放入与每个学校的 id 对应的整数数组中，并删除前导零。我必须在单独的脚本标签中执行此操作。

```
<script>
    var school_ids = <%= raw JSON.parse(@search.school_ids).map{|x| x.to_i} - [0]%>
</script> 
```

第二步是创建选择框，然后设置值，然后像这样触发：

```
<script>
$(document).ready(function() {
        $('.select2-multiple').select2({
            placeholder: "Hit Enter After Selection",
            width: 'resolve'
        });
        $('.select2-multiple').val(school_ids);
        $('.select2-multiple').trigger('change');
</script> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-07T03:31:01.310

我遇到了同样的问题，这对我有用：</p>

```
Using Select2 > 4.0.0
$('#select_id').val('3').trigger('change'); 
```

# javascript - Javascript 点击链接

> ID：14957421
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:24:02.590
> 
> 标签：javascript, jquery, hyperlink, click

我在 jQuery.Script 上有“tabslideout”：

```
$(function(){
    $('.slide-out-div').tabSlideOut({
        tabHandle: '.handle',                            
        pathToTabImage: '/images/contact.gif',       
        imageHeight: '122px',                              
        imageWidth: '40px',                                 
        tabLocation: 'left',                              
        speed: '300',                                       
        action: 'click',                                  
        topPos: '200px',                                   
        fixedPosition: true                               
    });
}); 
```

我想通过单击链接打开此选项卡，例如`<a href="">Some Text</a>` 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:27:55.520

给链接一个 id，像这样：

```
<a href="" id="some-id">Some Text</a> 
```

然后使用此代码：

```
$(function() {
    $('#some-id').on('click', function(e) {
        e.preventDefault();
        $('.slide-out-div').tabSlideOut({
            tabHandle: '.handle',                            
            pathToTabImage: '/images/contact.gif',       
            imageHeight: '122px',                              
            imageWidth: '40px',                                 
            tabLocation: 'left',                              
            speed: '300',                                       
            action: 'click',                                  
            topPos: '200px',                                   
            fixedPosition: true                               
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:40:21.560

为了使您的代码更清晰，请将 tabSlideout 选项和滑动 div 存储在单独的变量中：

```
var tabOptions = {
    tabHandle: '.handle',                            
    pathToTabImage: '/images/contact.gif',       
    imageHeight: '122px',                              
    imageWidth: '40px',                                 
    tabLocation: 'left',                              
    speed: '300',                                       
    action: 'click',                                  
    topPos: '200px',                                   
    fixedPosition: true                               
};

var slider = $('.slide-out-div'); 
```

接下来，以某种方式识别您的链接。类通常比 ID 好：

```
<a href="" class="tabLink">Some Text</a> 
```

最后添加一个点击处理程序：

```
$('.tabLink').on('click', function(evnt) {
    evnt.preventDefault();
    slider.tabSlideOut(tabOptions);
}); 
```

# asp.net - 如何使用 .pem/.spc/.csr 文件对代码进行签名？

> ID：14957428
> 
> 赞同：1
> 
> 时间：2013-02-19T12:24:21.823
> 
> 标签：asp.net, .net, code-signing, codesign, code-signing-certificate

我已经购买了代码签名证书并获得了一个包含证书格式的 .pem 文件，另一个是 .spc 文件。我想知道使用这些文件签署代码的过程。早些时候，我使用 .cer 文件（证书文件）和 .pvk 文件（私钥文件）使用自签名证书对代码进行了签名，但不知道如何使用 .pem 和 .spc 文件对代码进行签名？

请建议任何教程/文档来为 xap 文件做同样的事情？

# c# - 代码映射中的级联

> ID：14957430
> 
> 赞同：0
> 
> 时间：2013-02-19T12:24:36.617
> 
> 标签：c#, nhibernate

`User`是一个实体，`Address`也是一个组件。一个`User`可以有一个`Address`。

`Address`不能存在于用户对象之外。因此，如果用户被删除，我也想删除和`Address`反对。

这是`Cascade.DeleteOrphan`吗？如果是如何`mapping by code`在 nhibernate 中设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:15:18.877

是的，你应该使用级联。查看[文档](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)以获取更多详细信息。

# android - 如何使用 HttpClient 发出 HTTP Get 请求，使其看起来类似于来自 iPhone 的请求

> ID：14957431
> 
> 赞同：0
> 
> 时间：2013-02-19T12:24:37.360
> 
> 标签：android, http-get, apache-commons-httpclient

标题有点混乱。在我的 Android 应用程序中，我正在使用 HttpClient 对象发出 HttpGet 请求。我没有设置任何标题，所以所有默认值。该请求工作正常，我得到了服务器的响应。

问题是当使用来自 iphone 的 HTTP GET 请求请求相同的 url 时，服务器的响应是不同的。所以服务器正在查看一些东西，可能是 USER-AGENT 或其他东西，以决定返回什么。我想要与服务器返回 iphone 应用程序相同的东西。我能做什么，即我可以设置哪些参数、标头或任何内容以使此请求与 ios 应用程序相同。

PS：我尝试将 User-Agent 设置为

```
"Mozilla/5.0(Linux; U; Android 2.2; en-gb; LG-P500 Build/FRF91) 
AppleWebKit/533.0 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1" \ 
```

使用以下代码..

```
client.getParams().setParameter(CoreProtocolPNames.USER_AGENT, sUsrAgent); 
```

另外请不要建议检查服务器或更改网络服务，因为我无权访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:31:02.340

您能否尝试从应用程序中访问[这样](http://pgl.yoyo.org/http/browser-headers.php)`iPhone`的站点并检查`HTML`响应。它将包含由`iOS network API`. 获得此列表后，您可以尝试在`Android`应用程序中添加所有标题。

# android - Android绘图应用OnTouchListener无法实现

> ID：14957437
> 
> 赞同：0
> 
> 时间：2013-02-19T12:24:57.253
> 
> 标签：android, view, import, ontouchlistener

我正在开发一个绘图应用程序并进行扩展`View`，并希望实现 OnTouchListener。代码如下：

```
public class DoodleView extends View implements OnTouchListener  //ERROR1
{
   private Bitmap bitmap; // drawing area for display or saving
   private Canvas bitmapCanvas; // used to draw on bitmap
   private Paint paintScreen; // use to draw bitmap onto screen
   private Paint paintLine; // used to draw lines onto bitmap

   private Path    mPath;
   private Paint   mPaint, circlePaint, outercirclePaint;  
   private ArrayList<Path> paths = new ArrayList<Path>();
   private ArrayList<Path> undonePaths = new ArrayList<Path>();
   private float xleft,xright,xtop,xbottom;
   private float mX, mY;

   // DoodleView constructor initializes the DoodleView
   public DoodleView(Context context) 
   {
      super(context); // pass context to View's constructor
      this.context_new=context;
      this.setOnTouchListener(this); //ERROR2

      paintScreen = new Paint(); // used to display bitmap onto screen

      // set the initial display settings for the painted line
      paintLine = new Paint();
      paintLine.setAntiAlias(true); // smooth edges of drawn line
      paintLine.setColor(Color.BLACK); // default color is black
      paintLine.setStyle(Paint.Style.STROKE); // solid line
      paintLine.setStrokeWidth(5); // set the default line width
      paintLine.setStrokeCap(Paint.Cap.ROUND); // rounded line ends

      mPath = new Path();
      paths.add(mPath);

   } // end DoodleView constructor 
```

**OnSizeChanged：**

```
 @Override
   public void onSizeChanged(int w, int h, int oldW, int oldH)
   {
      super.onSizeChanged(w, h, oldW, oldH);
      DoodlzViewWidth = w;     
      DoodlzViewHeight = h;

      bitmap = Bitmap.createBitmap(getWidth(), DoodlzViewHeight, Bitmap.Config.ARGB_8888);

      bitmapCanvas = new Canvas(bitmap);
      bitmap.eraseColor(Color.WHITE); // erase the BitMap with white 
   } 
```

**绘制：**

```
 @Override
   protected void onDraw(Canvas canvas)
   {
       canvas.drawBitmap(bitmap, 0, 0, paintScreen); // draw the background screen
       // for each path currently being drawn
       for (Path p : paths){canvas.drawPath(p, paintLine);}
       Toast.makeText(getContext(), "ondraw", Toast.LENGTH_SHORT).show();              
   } 
```

**触摸事件：**

```
 @Override
   public boolean onTouchEvent(View arg0, MotionEvent event) //ERROR3
   {

          float x = event.getX();
          float y = event.getY();

          switch (event.getAction())
          {
              case MotionEvent.ACTION_DOWN:
                  touchStarted(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_MOVE:
                  touchMoved(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_UP:
                  touchEnded();
                  invalidate();
                  break;
          }
          return true;
    } 
```

但是，我真的很挠头，不知道为什么

1.  ERROR1：实现 OnTouchListener 报告红色下划线表示 `OnTouchListener cannot be resolved to a type`，并建议导入`android.view.View`。但是我尝试点击导入它仍然不愿意被导入，我看到导入列​​表已经在那里了

2.  ERROR2: `The method setOnTouchListener(View.OnTouchListener) in the type View is not applicable for the arguments (DoodleView)`, 应该是因为 ERROR1

3.  ERROR3: `The method onTouchEvent(View, MotionEvent) of type DoodleView must override or implement a supertype method`，应该也是因为ERROR1。

有谁知道发生了什么？我被卡在这里一动不动！非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:32:34.457

这似乎是一个简单的导入问题。尝试添加

```
import android.view.View 
```

如果您的班级中尚未出现并更改班级声明，如下所示：

```
public class DoodleView extends View implements View.OnTouchListener {
.... 
```

# javascript - 从扩展程序执行小书签是否安全？

> ID：14957440
> 
> 赞同：1
> 
> 时间：2013-02-19T12:25:04.800
> 
> 标签：javascript, google-chrome, google-chrome-extension, bookmarklet

**背景：**

我写了一个扩展来搜索书签并为用户打开 URL。

我已经为扩展添加了 JavaScript 小书签支持，现在它通过类似于以下代码的方式调用脚本：

```
var bookmark_address; // the address containing javascript:blah();
var js = bookmark_address.substr(11);
chrome.tabs.executeScript({'code': js}); 
```

以前我一直在使用这段代码：

```
var bookmark_address; // the address containing javascript:blah();
chrome.tabs.update({'url': bookmark_address}); 
```

第一个似乎更好，但实际上它们并没有太大区别。他们都需要权限`["tabs", "<all_urls>"]`。我现在仅在用户选择启用书签支持（通过[可选权限](http://developer.chrome.com/extensions/permissions.html)）时才请求权限。

**问题：**

我只是想到了安全问题。书签是由用户添加的，因此它们*通常是*安全的，但是因为我的扩展程序“调用”了脚本，所以它是在我的扩展程序的上下文中执行的。该脚本将能够弄乱我的扩展程序的本地存储和变量。**此外，执行的脚本可能具有执行 Cross-Origin 的权限`XMLHttpRequest`。** [（文档）](http://developer.chrome.com/extensions/xhr.html)

我的想法正确吗？真的有安全问题吗？有没有办法从我的扩展程序“沙箱”执行脚本，和/或禁用脚本的权限？

对于扩展程序的用户来说，这可能是一件非常糟糕的事情，所以请认真考虑这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:56:50.993

`javascript:`使用以下书签（当然附加）测试了跨域 XHR ：

```
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function () {
    if (xhr.readyState == 4) {
        console.log(xhr.responseText);
    }
};
xhr.open("POST", "http://jsfiddle.net/echo/json/", true);
xhr.send("json=" + encodeURIComponent(JSON.stringify({"foo": "bar"}))); 
```

**结果：**

*   单击书签**不允许**跨域 XHR。
*   使用`chrome.tabs.update`不允许跨域 XHR **。**
*   使用`chrome.tabs.executeScript` **确实**允许跨域 XHR。

**结论：**

用于`chrome.tabs.update`执行小书签基本上和正常点击书签一样安全，但**不**`chrome.tabs.executeScript`适合执行小书签。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:27:56.740

我认为最安全的解决方案是将脚本附加到脚本标签内的页面。我认为这将与普通书签的工作方式最相似，并且不会给代码额外的权限。如果随后立即删除脚本可能会更好。**

# ios - 录制“ MP AVAudioSessionDelegateMediaPlayerOnly 结束中断”时收到警告

> ID：14957441
> 
> 赞同：2
> 
> 时间：2013-02-19T12:25:06.707
> 
> 标签：ios, objective-c, mpmovieplayercontroller, avassetwriter

我已经在我的应用程序中成功录制`AVAssetWriter`了很长时间的视频，但是今天我开始看到当我停止录制时出现一些奇怪的警告，

设想：

*   我录制视频并可以多次再次录制视频**[无警告]**
*   **我在[NO WARNINGS]**中播放视频`MPMoviePlayerController`
***   我在播放视频后录制视频，一旦单击停止录制，我就会收到警告**

 **警告：

```
MP AVAudioSessionDelegateMediaPlayerOnly end interruption. Interruptor <RecorderServer> category <(null)> resumable <0>,  _state = 0 
```

有谁知道可能是什么问题或像我一样有类似的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T21:44:01.267

感觉就像我已经解决了我的问题，虽然这不是一个大问题，只是我犯的一个小错误，当我播放视频时`MPMoviePlayerController`，在我使用通知播放完视频后，我没有释放播放器对象，我以为从通知中注销就足够了，但是当我设置`self.player=nil;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T21:31:18.970

播放时似乎您的音频会话类别设置为 kAudioSessionCategory_MediaPlayback 没问题。将其更改为适合录制的类别。在此处查看不同的可用类别[http://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html#//apple_ref/doc/uid/TP40007875-CH4-SW1](http://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html#//apple_ref/doc/uid/TP40007875-CH4-SW1)**

# php - 提交表单后显示选择了哪个单选按钮

> ID：14957442
> 
> 赞同：2
> 
> 时间：2013-02-19T12:25:08.960
> 
> 标签：php, html, forms

我对 PHP 很陌生，目前正在进行一项调查。用户在单选按钮的表单中选择问题的答案。每个问题有 4 种可能性，并在每个问题下分组。提交表单时，页面应显示每个组上的哪个按钮被选中。目前的代码是这样的：

```
<form action="thankyou.php" method="post">
  <p>How easy would you say it is to create new carers?</p>
   <input type="radio" name="rgroup1" value="rg1v1"> Excellent
   <input type="radio" name="rgroup1" value="rg1v2"> Good
   <input type="radio" name="rgroup1" value="rg1v3"> Average
   <input type="radio" name="rgroup1" value="rg1v4"> Poor</br>

  <p>How easy is it to generate a report?</p>
   <input type="radio" name="rgroup2" value="rg2v1"> Excellent
   <input type="radio" name="rgroup2" value="rg2v2"> Good
   <input type="radio" name="rgroup2" value="rg2v3"> Average
   <input type="radio" name="rgroup2" value="rg2v4"> Poor</br>

  <p>How easy is it to add and alter timesheets?</p>
   <input type="radio" name="rgroup3" value="excellent"> Excellent
   <input type="radio" name="rgroup3" value="good"> Good
   <input type="radio" name="rgroup3" value="average"> Average
   <input type="radio" name="rgroup3" value="poor"> Poor</br>

  <p>How good would you rate the Packages Of Care functions? </p>
   <input type="radio" name="rgroup4" value="excellent"> Excellent
   <input type="radio" name="rgroup4" value="good"> Good
   <input type="radio" name="rgroup4" value="average"> Average
   <input type="radio" name="rgroup4" value="poor"> Poor</br>

  <p>Question 5</p>
   <input type="radio" name="rgroup5" value="excellent"> Excellent
   <input type="radio" name="rgroup5" value="good"> Good
   <input type="radio" name="rgroup5" value="average"> Average
   <input type="radio" name="rgroup5" value="poor"> Poor</br>
   </br>
      Please  Enter Your Comments Below:
   </br></br>
        <textarea name="comments" width="100px" rows="4" cols="50" wrap="wrap"></textarea>
   </br></br>
        <input type="submit">
   <br/><br/>
</form> 
```

我的“thankyou.php”页面的PHP是：

```
<?php 

switch($_POST['rgroup1']) {
    case "rg1v1":
        $value = "Radio Group 1 - Value 1 was selected.";
        break;
    case "rg1v2":
        $value = "Radio Group 1 - Value 2 was selected.";
        break;
    case "rg1v3":
        $value = "Radio Group 1 - Value 3 was selected.";
        break;
    case "rg1v4":
        $value = "Radio Group 1 - Value 4 was selected.";
        break; 

        default:
        $value = "No radio has been selected for Radio Group 1";
}

switch($_POST['rgroup2']) {
    case "rg2v1":
        $value2 = "Radio Group 2 - Value 1 was selected.";
        break;
    case "rg2v2":
        $value2 = "Radio Group 2 - Value 2 was selected.";
        break;
    case "rg2v3":
        $value2 = "Radio Group 2 - Value 3 was selected.";
        break;
    case "rg2v4":
        $value2 = "Radio Group 2 - Value 4 was selected.";
        break; 

        default:
        $value = "No radio has been selected for Radio Group 2";
}

switch($_POST['rgroup3']) {
    case "rg3v1":
        $value3 = "Radio Group 3 - Value 1 was selected.";
        break;
    case "rg3v2":
        $value3 = "Radio Group 3 - Value 2 was selected.";
        break;
    case "rg3v3":
        $value3 = "Radio Group 3 - Value 3 was selected.";
        break;
    case "rg3v4":
        $value3 = "Radio Group 3 - Value 4 was selected.";
        break; 

        default:
        $value = "No radio has been selected for Radio Group 3";
}

switch($_POST['rgroup4']) {
    case "rg4v1":
        $value4 = "Radio Group 4 - Value 1 was selected.";
        break;
    case "rg4v2":
        $value4 = "Radio Group 4 - Value 2 was selected.";
        break;
    case "rg4v3":
        $value4 = "Radio Group 4 - Value 3 was selected.";
        break;
    case "rg4v4":
        $value4 = "Radio Group 4 - Value 4 was selected.";
        break; 

        default:
        $value = "No radio has been selected for Radio Group 4";
}

switch($_POST['rgroup5']) {
    case "rg5v1":
        $value5 = "Radio Group 5 - Value 1 was selected.";
        break;
    case "rg5v2":
        $value5 = "Radio Group 5 - Value 2 was selected.";
        break;
    case "rg5v3":
        $value5 = "Radio Group 5 - Value 3 was selected.";
        break;
    case "rg5v4":
        $value5 = "Radio Group 5 - Value 4 was selected.";
        break; 

        default:
        $value = "No radio has been selected for Radio Group 5";
}

echo $value;
echo $value2;
echo $value3;
echo $value4;
echo $value5;

?> 
```

我收到一条错误消息，说我没有定义 value2、3、4 和 5 的变量，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:30:53.433

对于 rgroups 3,4 和 5，您的值不是 rgroup1 和 rgroup2 的预期格式。您已将您的值作为与您的 switch 案例不匹配的字符串，如优秀、好等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:34:16.320

对于 3、4 和 5，`radio`截面值分别为优秀、良好、平均、差和不工作。“rg3v1”、“rg3v2”、“rg3v3”和“rg3v4”。因此，当执行进入以下代码时，

```
switch($_POST['rgroup3']) {
    case "rg3v1":
        $value3 = "Radio Group 3 - Value 1 was selected.";
        break;
    case "rg3v2":
        $value3 = "Radio Group 3 - Value 2 was selected.";
        break;
    case "rg3v3":
        $value3 = "Radio Group 3 - Value 3 was selected.";
        break;
    case "rg3v4":
        $value3 = "Radio Group 3 - Value 4 was selected.";
        break; 

        default:
        $value = "No radio has been selected for Radio Group 3";
}

switch($_POST['rgroup4']) {
    case "rg4v1":
        $value4 = "Radio Group 4 - Value 1 was selected.";
        break;
    case "rg4v2":
        $value4 = "Radio Group 4 - Value 2 was selected.";
        break;
    case "rg4v3":
        $value4 = "Radio Group 4 - Value 3 was selected.";
        break;
    case "rg4v4":
        $value4 = "Radio Group 4 - Value 4 was selected.";
        break; 

        default:
        $value = "No radio has been selected for Radio Group 4";
}

switch($_POST['rgroup5']) {
    case "rg5v1":
        $value5 = "Radio Group 5 - Value 1 was selected.";
        break;
    case "rg5v2":
        $value5 = "Radio Group 5 - Value 2 was selected.";
        break;
    case "rg5v3":
        $value5 = "Radio Group 5 - Value 3 was selected.";
        break;
    case "rg5v4":
        $value5 = "Radio Group 5 - Value 4 was selected.";
        break; 

        default:
        $value = "No radio has been selected for Radio Group 5";
} 
```

当您尝试打印以下变量时，它没有分配任何内容并显示错误，

```
echo $value3;
echo $value4;
echo $value5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:36:19.113

命名相同的开关案例的所有默认变量。因此，如果未选择任何选项 php 使用值变量。相应地更改其他默认值会起作用。

```
<?php 

switch($_POST['rgroup1']) {
    case "rg1v1":
        $value = "Radio Group 1 - Value 1 was selected.";
        break;
    case "rg1v2":
        $value = "Radio Group 1 - Value 2 was selected.";
        break;`enter code here`
    case "rg1v3":
        $value = "Radio Group 1 - Value 3 was selected.";
        break;
    case "rg1v4":
        $value = "Radio Group 1 - Value 4 was selected.";
        break; 

        default:
        $value = "No radio has been selected for Radio Group 1";
}

switch($_POST['rgroup2']) {
    case "rg2v1":
        $value2 = "Radio Group 2 - Value 1 was selected.";
        break;
    case "rg2v2":
        $value2 = "Radio Group 2 - Value 2 was selected.";
        break;
    case "rg2v3":
        $value2 = "Radio Group 2 - Value 3 was selected.";
        break;
    case "rg2v4":
        $value2 = "Radio Group 2 - Value 4 was selected.";
        break; 

        default:
        $value2 = "No radio has been selected for Radio Group 2";
}

switch($_POST['rgroup3']) {
    case "rg3v1":
        $value3 = "Radio Group 3 - Value 1 was selected.";
        break;
    case "rg3v2":
        $value3 = "Radio Group 3 - Value 2 was selected.";
        break;
    case "rg3v3":
        $value3 = "Radio Group 3 - Value 3 was selected.";
        break;
    case "rg3v4":
        $value3 = "Radio Group 3 - Value 4 was selected.";
        break; 

        default:
        $value3 = "No radio has been selected for Radio Group 3";
}

switch($_POST['rgroup4']) {
    case "rg4v1":
        $value4 = "Radio Group 4 - Value 1 was selected.";
        break;
    case "rg4v2":
        $value4 = "Radio Group 4 - Value 2 was selected.";
        break;
    case "rg4v3":
        $value4 = "Radio Group 4 - Value 3 was selected.";
        break;
    case "rg4v4":
        $value4 = "Radio Group 4 - Value 4 was selected.";
        break; 

        default:
        $value4 = "No radio has been selected for Radio Group 4";
}

switch($_POST['rgroup5']) {
    case "rg5v1":
        $value5 = "Radio Group 5 - Value 1 was selected.";
        break;
    case "rg5v2":
        $value5 = "Radio Group 5 - Value 2 was selected.";
        break;
    case "rg5v3":
        $value5 = "Radio Group 5 - Value 3 was selected.";
        break;
    case "rg5v4":
        $value5 = "Radio Group 5 - Value 4 was selected.";
        break; 

        default:
        $value5 = "No radio has been selected for Radio Group 5";
}

echo $value;
echo $value2;
echo $value3;
echo $value4;
echo $value5;

?> 
```

# java - Java 代码显示请求重定向但浏览器不重定向。为什么？

> ID：14957444
> 
> 赞同：0
> 
> 时间：2013-02-19T12:25:14.497
> 
> 标签：java

当我通过 Java 运行以下网址时，它会给出响应代码 301。网址是： [http ://www.amazon.com/Kindle-Wireless-Reading-Display-Globally/dp/B003FSUDM4/ref=amb_link_353259562_2?pf_rd_m=ATVPDKIKX0DER&pf_rd_s= center-10&pf_rd_r=11EYKTN682A79T370AM3&pf_rd_t=201&pf_rd_p=1270985982&pf_rd_i=B002Y27P3M](https://rads.stackoverflow.com/amzn/click/com/B003FSUDM4) 并且它根据java代码提供的重定向网址是：

[http://www.amazon.com/Kindle-Keyboard-Free-Wi-Fi-Display/dp/B004HZYA6E](https://rads.stackoverflow.com/amzn/click/com/B004HZYA6E)

代码是：

```
public class newTestURLConnection {
    public static void main(String[] args) throws IOException {
        String url="http://www.amazon.com/Kindle-Wireless-Reading-Display-Globally/dp/B003FSUDM4/ref=amb_link_353259562_2?pf_rd_m=ATVPDKIKX0DER&pf_rd_s=center-10&pf_rd_r=11EYKTN682A79T370AM3&pf_rd_t=201&pf_rd_p=1270985982&pf_rd_i=B002Y27P3M";
        HttpURLConnection con =(HttpURLConnection) new URL( url ).openConnection();
        con.setInstanceFollowRedirects(false);

        con.connect();

        InputStream is = con.getInputStream();
        System.out.println(con.getHeaderField("Location"));
        System.out.println( "Response code: " + con.getResponseCode() );
    }
} 
```

但是当我在浏览器中打开 url 时，它不会重定向到：[http://www.amazon.com/Kindle-Keyboard-Free-Wi-Fi-Display/dp/B004HZYA6E](https://rads.stackoverflow.com/amzn/click/com/B004HZYA6E)。谁能提出为什么会有这种差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:32:22.060

```
instanceFollowRedirects

protected boolean instanceFollowRedirects

    If true, the protocol will automatically follow redirects. If false, the protocol will not automatically follow redirects.

    This field is set by the setInstanceFollowRedirects method. Its value is returned by the getInstanceFollowRedirects method.

    Its default value is based on the value of the static followRedirects at HttpURLConnection construction time. 
```

这是来自[类 HttpURLConnection Docs](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/HttpURLConnection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:48:58.347

> 谁能提出为什么会有这种差异？

可能是亚马逊根据请求标头的差异做出了不同的响应；例如，在 User-Agent 标头中发送的内容。

也许这是关于向真实客户和网络爬虫/内容抓取工具显示不同的结果。

不管是什么原因，两页之间的差异非常微妙……至少在人眼看来。

* * *

如果这不仅仅是一次性的事情（例如测试一些代码），我还应该问您是否阅读过亚马逊的“使用条件”；例如它说的位：

> “*未经亚马逊明确书面同意，不得出于任何商业目的复制、复制、复制、出售、转售、访问或以其他方式利用亚马逊服务或任何亚马逊服务的任何部分。* ”

# php - 使用php将XML文件按升序排序

> ID：14957449
> 
> 赞同：2
> 
> 时间：2013-02-19T12:25:26.197
> 
> 标签：php, xml

我有一个 xml 文件，其中包含大约 60 本书，我需要使用 php 从借来的计数中按升序排列到目前为止，我的代码显示了所有书籍但不会排序？任何帮助都会很感激

**PHP**

```
<?php

$xmlassignDoc = new DOMDocument();
$xmlassignDoc->load("books.xml");

$books = $xmlBookDoc->getElementsByTagName("item");

foreach($books as $list)
{
    $course = $list->getElementsByTagName("course");
    $course = $course->item(0)->nodeValue;

//HERE is where the GET function will be
    if ($course == "CC150")
    {

    print_r($array);
        $id = $list->getAttribute("id");
        echo "<b>Book ID: </b> $id <br>";

         $title = $list->getElementsByTagName("title");
         $title = $title->item(0)->nodeValue;
         echo "<b>Title: </b> $title <br>";

         $isbn = $list->getElementsByTagName("isbn");
         $isbn = $isbn->item(0)->nodeValue;
         echo "<b>ISBN: </b> $isbn <br>";

         $borrowed = $list->getElementsByTagName("borrowedcount");
         $borrowed = $borrowed->item(0)->nodeValue;
         echo "<b>Borrowed Count: </b> $borrowed <br>";
         echo "<br>";
    } 
}
//print $xmlBookDoc->saveXML();
?> 
```

**xml文件**

```
<?xml version="1.0" encoding="utf-8"?>
<bookcollection>
<items>
  <item id="51390">
     <title>Management of systems development /</title>
     <isbn>0091653215</isbn>
     <url>http://library.hud.ac.uk/catlink/bib/51390</url>
     <borrowedcount>45</borrowedcount>
     <courses>
        <course>CC140</course>
        <course>CC210</course>
     </courses>
  </item>
  <item id="483">
     <title>Database systems management and design /</title>
     <isbn>0877091153</isbn>
     <url>http://library.hud.ac.uk/catlink/bib/483</url>
     <borrowedcount>28</borrowedcount>
     <courses>
        <course>CC140</course>
     </courses>
  </item>
  <item id="585842">
     <title>E-learning skills /</title>
     <isbn>0230573126</isbn>
     <url>http://library.hud.ac.uk/catlink/bib/585842</url>
     <borrowedcount>5</borrowedcount>
     <courses>
        <course>CC157</course>
     </courses>
  </item> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:52:07.467

我的解决方案：

```
$books = array();

$xml = simplexml_load_file('books.xml'); 

foreach($xml->items->item as $item) {
    $books[] = array(
                     'id'             => (string)$item->attributes()->id,
                     'title'          => (string)$item->title,
                     'isbn'           => (string)$item->isbn,
                     'course'         => (string)$item->courses->course[0],
                     'borrowed_count' => intval($item->borrowedcount)
                    );
}

array_sort_by_column($books, 'borrowed_count');

var_dump($books); 
```

以及排序功能：

```
function array_sort_by_column(&$array, $column, $direction = SORT_ASC) {
    $reference_array = array();

    foreach($array as $key => $row) {
        $reference_array[$key] = $row[$column];
    }

    array_multisort($reference_array, $direction, $array);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:26:26.580

文件“1.p​​hp”：

```
<?php
include 'books.php';
$b=new books();
$arr=$b->load('books.xml');         //1\. load books from xml to array
usort($arr, array('books','cmp'));  //2\. sort array
$b->save('out.xml',$arr);           //3\. save array to xml
?> 
```

文件'books.php'：

```
<?php
  class books
  {
     //load books from xml to array
     public function load($fname)
     {
        $doc=new DOMDocument();

        if($doc->load($fname))  $res=$this->parse($doc);
        else                    throw new Exception('error load XML');

        return $res;
     }

     static public function cmp($a, $b)
     {
         if ($a['fields']['borrowedcount'] == $b['fields']['borrowedcount']) {
             return 0;
         }
         return ($a['fields']['borrowedcount'] < $b['fields']['borrowedcount']) ? -1 : 1;
     }

     private function parse($doc)
     {
        $xpath = new DOMXpath($doc);
        $items = $xpath->query("items/item");
        $result = array();
        foreach($items as $item)
        {
           $result[]=array('id'=>$item->getAttribute('id'), 'fields'=>$this->parse_fields($item));
        }
        return $result;
     }

     private function parse_fields($node)
     {
        $res=array();
        foreach($node->childNodes as $child)
        {
           if($child->nodeType==XML_ELEMENT_NODE)
           {
              $res[$child->nodeName]=$this->get_value($child);
           }
        }

        return $res;
     }

     private function get_value($node)
     {
        if($node->nodeName=='courses')
        { 
           $res=array();
           foreach($node->childNodes as $child)
           {
              if($child->nodeType==XML_ELEMENT_NODE)
              {
                 $res[]=$child->nodeValue;
              }
           } 
           return $res;
        }
        else
        {
           return $node->nodeValue;
        }
     }

     //save array to xml
     public function save($fname, $rows)
     {
        $doc = new DOMDocument('1.0','utf-8');
        $doc->formatOutput = true;

        $bc = $doc->appendChild($doc->createElement('bookcollection'));
        $items = $bc->appendChild($doc->createElement('items'));

        foreach($rows as $row)
        {
           $item=$items->appendChild($doc->createElement('item'));
           $item->setAttribute('id',$row['id']);
           foreach($row['fields'] as $field_name=>$field_value)
           {
              $f=$item->appendChild($doc->createElement($field_name));
              if($field_name=='courses')
              {
                 foreach($field_value as $course_val)
                 {
                    $course=$f->appendChild($doc->createElement('course'));
                    $course->appendChild($doc->createTextNode($course_val));
                 }
              }
              else
              {
                 $f->appendChild($doc->createTextNode($field_value));
              }

           }
        }

        file_put_contents($fname, $doc->saveXML());
     }

  }
?> 
```

# session - 通过 Angular.js 维护会话

> ID：14957450
> 
> 赞同：60
> 
> 时间：2013-02-19T12:25:36.180
> 
> 标签：session, angularjs

我正在使用 AngularJS 框架进行项目。我对使用这个框架很陌生；过去我只使用纯 JavaScript 和 jQuery。该项目是一种针对利基市场的网页设计师应用程序。

当用户在设计时在页面之间移动时，我想维护他们所做的所有更改的会话。

现在，如果用户登录，我们将使用数据库中的数据加载会话。当用户单击保存按钮时，我们使用会话数据更新数据库。有人告诉我，我可以在 Angular 中维护会话，类似于骨干网。这可能吗？如果是的话，你能指导我看一个不关注指令或 UI 的教程吗？如果这是不可能的，还有其他可行的选择吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-19T14:11:02.453

这是给你的一种片段：

```
app.factory('Session', function($http) {
  var Session = {
    data: {},
    saveSession: function() { /* save session data to db */ },
    updateSession: function() { 
      /* load data from db */
      $http.get('session.json').then(function(r) { return Session.data = r.data;});
    }
  };
  Session.updateSession();
  return Session; 
}); 
```

这是 Plunker 示例如何使用它： [http ://plnkr.co/edit/Fg3uF4ukl5p88Z0AeQqU?p=preview](http://plnkr.co/edit/Fg3uF4ukl5p88Z0AeQqU?p=preview)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-19T15:11:24.580

因为答案对于更稳定的 Angular 版本不再有效，所以我发布了一个更新的解决方案。

**PHP 页面：session.php**

```
if (!isset($_SESSION))
{    
    session_start();
}    

$_SESSION['variable'] = "hello world";

$sessions = array();

$sessions['variable'] = $_SESSION['variable'];

header('Content-Type: application/json');
echo json_encode($sessions); 
```

仅在 Angular 中发回您想要的会话变​​量，并非所有变量都不想公开超出所需的内容。

**JS 在一起**

```
var app = angular.module('StarterApp', []);
app.controller("AppCtrl", ['$rootScope', 'Session', function($rootScope, Session) {      
    Session.then(function(response){
        $rootScope.session = response;
    });
}]);

 app.factory('Session', function($http) {    
    return $http.get('/session.php').then(function(result) {       
        return result.data; 
    });
}); 
```

*   使用工厂做一个简单的获取会话。
*   如果您想让它发布以使您在浏览器中转到它时页面不可见，您可以，我只是简化它
*   将工厂添加到控制器
*   我使用 rootScope 因为它是我在所有代码中都使用的会话变量。

**HTML**

在您的 html 中，您可以引用您的会话

```
<html ng-app="StarterApp">

<body ng-controller="AppCtrl">
{{ session.variable }}
</body> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-23T14:08:09.483

您还可以尝试根据`window.sessionStorage`或`window.localStorage`保留页面重新加载之间的状态信息来提供服务。我在部分由 AngularJS 制作的 web 应用程序中使用它，并且页面 URL 在工作流的某些部分以“旧方式”更改。甚至 IE8 也支持 Web 存储。为方便起见，这里是[angular-webstorage](https://github.com/fredricrylander/angular-webstorage)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-19T12:42:03.030

您将在 Angular 中为此使用服务。服务是您在 Angular 中注册的函数，该函数的工作是返回一个对象，该对象将一直存在，直到浏览器关闭/刷新。因此，这是一个存储状态的好地方，并在状态更改时将该状态与服务器异步同步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-24T19:04:37.950

通常对于涉及一系列页面的用例，在最后阶段或页面中，我们将数据发布到服务器。在这种情况下，我们需要维护状态。在下面的代码片段中，我们维护客户端的状态

正如上面的帖子中提到的。会话是使用工厂配方创建的。

客户端会话也可以使用价值提供者配方来维护。

有关完整的详细信息，请参阅我的帖子。 [angularjs中的会话跟踪](http://yogeshtutorials.blogspot.in/2015/11/session-tracking-in-angularjs.html)

让我们举一个购物车的例子，我们需要在不同的页面/angularjs 控制器中维护它。

在典型的购物车中，我们在各种产品/类别页面上购买产品并不断更新购物车。以下是步骤。

在这里，我们使用“价值提供者配方”创建了包含购物车的自定义可注入服务。

```
'use strict';
function Cart() {
    return {
        'cartId': '',
        'cartItem': []
    };
}
// custom service maintains the cart along with its behavior to clear itself , create new , delete Item or update cart 

app.value('sessionService', {
    cart: new Cart(),
    clear: function () {
        this.cart = new Cart();
        // mechanism to create the cart id 
        this.cart.cartId = 1;
    },
    save: function (session) {
        this.cart = session.cart;
    },
    updateCart: function (productId, productQty) {
        this.cart.cartItem.push({
            'productId': productId,
            'productQty': productQty
        });
    },
    //deleteItem and other cart operations function goes here...
}); 
```

# asp.net-mvc - MVC 控制器与开箱即用的 Sitecore 控制器

> ID：14957451
> 
> 赞同：5
> 
> 时间：2013-02-19T12:25:39.387
> 
> 标签：asp.net-mvc, sitecore, sitecore6

我一直在阅读这里提供的许多关于 MVC 的博客： [http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog.aspx)

但是，我无法解释/说服自己/团队：

1.  何时使用自定义控件与开箱即用的站点核心控制器？
2.  开箱即用控制器何时被调用？
3.  自定义控件与开箱即用控制器的优势？
4.  如果我们采用开箱即用的方式，我们是否应该在视图中包含所有业务逻辑。这是可测试的吗？

我也看了下面，但仍然不确定： [https ://bitbucket.org/demoniusrex/launch-sitecore-mvc-demo](https://bitbucket.org/demoniusrex/launch-sitecore-mvc-demo)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T09:57:52.323

虽然我大致同意 Kevin Obee 的说法，但我认为值得提醒自己的是，控制器在 Sitecore 中被用于两个不同的角色：

*   页面级控制器（由项目路由调用）
*   组件级控制器（由重新渲染机制调用）

**何时使用：自定义控制器/默认 Sitecore 控制器**

*页面级控制器*

`Index`默认情况下，任何与项目路径匹配的路由都将使用`Sitecore.Mvc.Controllers.SitecoreController`. 此操作将根据项目的布局配置返回一个 ViewResult。

如果您需要更改此行为（例如影响整个页面的某些内容），您可以指定自定义控制器和项目上的操作（或项目的标准值）。对于自定义控制器，您可以滚动自己的控制器或子类化默认控制器。

*组件级控制器*

对于`ViewRendering`Sitecore 而言，无需特定控制器即可呈现 Razor 视图（我猜是页面级控制器正在发挥作用 - 但想象一下 Sitecore 提供了一个默认控制器，该控制器使用 mvc.getModel 管道获取模型并将其提供给剃刀视图）。

为`ControllerRendering`您提供一个可以执行逻辑的自定义控制器（请参阅 Kevin 的回答）并为视图提供模型。子类化没有任何好处`Sitecore.Mvc.Controllers.SitecoreController`。

**何时调用控制器**

*页面级控制器*

页面级控制器上的操作由路由引擎调用。

*组件级控制器*

在页面视图呈现时调用 ControllerRendering 上的操作。

**使用的好处：自定义控制器/默认 Sitecore 控制器**

与默认 Sitecore 控制器相比，自定义控制器的好处是您可以控制逻辑。使用默认 Sitecore 控制器的好处是 Sitecore 为您提供逻辑。

**我们是否应该在视图中包含所有业务逻辑**

不。（见凯文的回答）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T09:08:12.420

我个人的观点是业务逻辑应该放在从控制器类调用的命令和查询类中。从这些调用中，您可以组装一个强类型视图模型，该模型将传递给一个哑剃刀视图进行渲染。

确保控制器所依赖的任何服务都通过使用契约（接口）而不是具体类的构造函数注入传递给它，并且您最终应该得到可单元测试的解决方案。

# javascript - 内容文件在 SSL 连接上返回“空”

> ID：14957453
> 
> 赞同：2
> 
> 时间：2013-02-19T12:25:45.247
> 
> 标签：javascript, css, iis-7, https, windows-server-2008

我在 IIS7 (WS2008) 中有两个网站，它们指向我服务器上完全相同的文件夹。标准网站 ( [http://example.com](http://example.com) ) 使用普通的 HTTP 协议。[但是，我已经向另一个网站上的子域（ https://ssl.example.com](https://ssl.example.com) ）颁发了 SSL 证书，并且在此协议上我遇到了麻烦。

在 HTTPS 网站上，我的一些文件只返回空或“无”。以我的通用 CSS 或 JavaScript 文件为例。它们在我的 HTTP 网站上运行良好，但在 HTTPS 网站上它们只是空的。

我是否缺少 IIS 中的配置，或者我只是愚蠢？我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:32:17.417

我刚刚遇到了一个可能与您有关的模拟情况。在我们的例子中，服务器有 .gz（压缩）版本的 html 和 js，由于构建的部署方式，这些都是空的。您的 Web 服务器也可能未配置为使用 HTTP 中正确的文件类型将 .gz 文件提供给客户端。

# android - Kindle上的Viewpager在页面之间滑动时显示灰色覆盖

> ID：14957454
> 
> 赞同：1
> 
> 时间：2013-02-19T12:25:52.193
> 
> 标签：android, android-viewpager, kindle

我已经实现了 viewpager，其中一些 webviews 作为它的子项（使用 PagerAdapter）。当我在滑动期间在 Kindle 设备（我已经用 Kindle HD 测试过）中运行它时，我在页面转换过程中看到灰色覆盖，并且在转换完成时消失。我没有任何自定义动画。我在 Nexus 7 中运行相同的东西，并且没有预期行为的灰色覆盖。

我的webview初始化如下：

```
@Override
public Object instantiateItem(ViewGroup container, final int position) {
    WebView webView = new WebView(this.ctx);
    webView.setWebViewClient(new MyWebViewClient());
    webView.setVerticalScrollBarEnabled(false);
    webView.setVerticalFadingEdgeEnabled(false);
    webView.setInitialScale(100);
    webView.setHorizontalFadingEdgeEnabled(false);
    webView.setHorizontalScrollBarEnabled(false);
    webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    webView.setScrollbarFadingEnabled(false);
    webView.setBackgroundColor(Color.WHITE);
    webView.setDrawingCacheBackgroundColor(Color.WHITE);

    webView.getSettings().setBuiltInZoomControls(false);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setRenderPriority(WebSettings.RenderPriority.HIGH);
    webView.getSettings().setAllowFileAccess(true);
    webView.getSettings().setSupportMultipleWindows(false);
    container.addView(webView);

    loadAsyncData(webView, position);

    return webView;
} 
```

有没有人遇到过这个问题？有什么建议可以解决这个问题吗？

![截屏](../Images/de3a56bc6b1c1317f1130e369305a607.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:37:01.633

找到了根本原因。它是 Kindle Fire 的默认背景。

# jquery - span 内容清除 span 元素下方的按钮

> ID：14957455
> 
> 赞同：0
> 
> 时间：2013-02-19T12:25:52.277
> 
> 标签：jquery

html 的主体有一个`span`元素和一个元素`button`。按钮单击事件应清除 span 元素，并且任何按键都应将事件键代码添加到 span 元素。我正在使用 jQuery 版本 1.9.1。

发生的情况是，`empty()`清除 span 文本*和*span 元素之后的按钮。请让我知道这里出了什么问题。

```
function appendtext(event) 
{ 
    var keyCode = event.keyCode; 
    $("#spanid").prepend(keyCode); 
} 

$(document).keyup(appendtext); 

function clearfn() 
{ 
    ("#spanid").empty();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:51:28.227

`span`元素不能自封闭，即使它们没有内容。如果这样做，浏览器会将按钮*放在*span 元素内（*右键单击`->`Inspect Element*）。

和

```
<span id="spanid"></span> 
```

它按预期工作。

# xslt - XSLT 父子组织层次结构无法正常工作

> ID：14957456
> 
> 赞同：1
> 
> 时间：2013-02-19T12:25:57.353
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我有一个带有组织层次结构的 XML 结构。该`<pkEntity>`元素是 org 的父 ID，并且`<entityParent>`是 org 的子元素。我不知道父/子组合的深度。我需要在下面提到的状态下进行转换：

```
 <EntityDimCollection>
<EntityDim>
<pkEntity>-9</pkEntity>
<entityParent>-7</entityParent>
<entityCode>Own_CP</entityCode>

<entityType>OT</entityType>
<essEntityCode>un.Own_CP</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>-8</pkEntity>
<entityParent>-7</entityParent>
<entityCode>Alternatives</entityCode>

<entityType>OT</entityType>
<essEntityCode>un.Alternatives</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>8555</pkEntity>
<entityParent>-8</entityParent>
<entityCode>Ex_BABRO</entityCode>

<entityType>CF</entityType>
<essEntityCode>un.Ex_BABRO</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>8752</pkEntity>
<entityParent>-8</entityParent>
<entityCode>Ex_SY</entityCode>

<entityType>CF</entityType>
<essEntityCode>un.Ex_SY</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>9731</pkEntity>
<entityParent>-8</entityParent>
<entityCode>NOR</entityCode>

<entityType>LE</entityType>
<essEntityCode>un.NOR</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>1649940</pkEntity>
<entityParent>9731</entityParent>
<entityCode>NO</entityCode>

<entityType>CG</entityType>
<essEntityCode>un.NOR.NO</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>1838293</pkEntity>
<entityParent>1649940</entityParent>
<entityCode>UKONORWAY</entityCode>

<entityType>CG</entityType>
<essEntityCode>un.NOR.UKONORWAY</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>1127251</pkEntity>
<entityParent>1838293</entityParent>
<entityCode>2BUS</entityCode>

<entityType>CG</entityType>
<essEntityCode>un.NOR.2BUS</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>1127274</pkEntity>
<entityParent>1127251</entityParent>
<entityCode>3BUS_B</entityCode>

<entityType>CG</entityType>
<essEntityCode>un.NOR.3BUS_B</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>1988187</pkEntity>
<entityParent>1127274</entityParent>
<entityCode>4BUS_B</entityCode>

<entityType>CG</entityType>
<essEntityCode>un.NOR.4BUS_B</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>1988188</pkEntity>
<entityParent>1988187</entityParent>
<entityCode>5ADM_B</entityCode>

<entityType>CG</entityType>
<essEntityCode>un.NOR.5ADM_B</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>1988189</pkEntity>
<entityParent>1988187</entityParent>
<entityCode>5FVK_B</entityCode>

<entityType>CG</entityType>
<essEntityCode>un.NOR.5FVK_B</essEntityCode>

</EntityDim>
<EntityDim>
<pkEntity>1988190</pkEntity>
<entityParent>1988189</entityParent>
<entityCode>61_FVK_B</entityCode>

<entityType>CG</entityType>
<essEntityCode>un.NOR.61_FVK_B</essEntityCode>

</EntityDim>
</EntityDimCollection> 
```

并使用 Mark Veenstra 解决方案，我得到了这样的输出

```
<?xml version="1.0" encoding="UTF-8"?>
<client:LMSDetails xmlns:client="http://foo/bar">
   <client:ParentID>-9</client:ParentID>
   <client:ChildID>-7</client:ChildID>
   <client:name/>
   <client:identifier>OT</client:identifier>
   <client:isActive/>
   <client:ParentID>-8</client:ParentID>
   <client:ChildID>-7</client:ChildID>
   <client:name/>
   <client:identifier>OT</client:identifier>
   <client:isActive/>
   <client:children>
      <client:ParentID>8555</client:ParentID>
      <client:ChildID>-8</client:ChildID>
      <client:name/>
      <client:identifier>CF</client:identifier>
      <client:isActive/>
   </client:children>
   <client:children>
      <client:ParentID>8752</client:ParentID>
      <client:ChildID>-8</client:ChildID>
      <client:name/>
      <client:identifier>CF</client:identifier>
      <client:isActive/>
   </client:children>
   <client:children>
      <client:ParentID>9731</client:ParentID>
      <client:ChildID>-8</client:ChildID>
      <client:name/>
      <client:identifier>LE</client:identifier>
      <client:isActive/>
      <client:children>
         <client:ParentID>1649940</client:ParentID>
         <client:ChildID>9731</client:ChildID>
         <client:name/>
         <client:identifier>CG</client:identifier>
         <client:isActive/>
         <client:children>
            <client:ParentID>1838293</client:ParentID>
            <client:ChildID>1649940</client:ChildID>
            <client:name/>
            <client:identifier>CG</client:identifier>
            <client:isActive/>
            <client:children>
               <client:ParentID>1127251</client:ParentID>
               <client:ChildID>1838293</client:ChildID>
               <client:name/>
               <client:identifier>CG</client:identifier>
               <client:isActive/>
               <client:children>
                  <client:ParentID>1127274</client:ParentID>
                  <client:ChildID>1127251</client:ChildID>
                  <client:name/>
                  <client:identifier>CG</client:identifier>
                  <client:isActive/>
                  <client:children>
                     <client:ParentID>1988187</client:ParentID>
                     <client:ChildID>1127274</client:ChildID>
                     <client:name/>
                     <client:identifier>CG</client:identifier>
                     <client:isActive/>
                     <client:children>
                        <client:ParentID>1988188</client:ParentID>
                        <client:ChildID>1988187</client:ChildID>
                        <client:name/>
                        <client:identifier>CG</client:identifier>
                        <client:isActive/>
                     </client:children>
                     <client:children>
                        <client:ParentID>1988189</client:ParentID>
                        <client:ChildID>1988187</client:ChildID>
                        <client:name/>
                        <client:identifier>CG</client:identifier>
                        <client:isActive/>
                        <client:children>
                           <client:ParentID>1988190</client:ParentID>
                           <client:ChildID>1988189</client:ChildID>
                           <client:name/>
                           <client:identifier>CG</client:identifier>
                           <client:isActive/>
                        </client:children>
                     </client:children>
                  </client:children>
               </client:children>
            </client:children>
         </client:children>
      </client:children>
   </client:children>
   <client:ParentID>8555</client:ParentID>
   <client:ChildID>-8</client:ChildID>
   <client:name/>
   <client:identifier>CF</client:identifier>
   <client:isActive/>
   <client:ParentID>8752</client:ParentID>
   <client:ChildID>-8</client:ChildID>
   <client:name/>
   <client:identifier>CF</client:identifier>
   <client:isActive/>
   <client:ParentID>9731</client:ParentID>
   <client:ChildID>-8</client:ChildID>
   <client:name/>
   <client:identifier>LE</client:identifier>
   <client:isActive/>
   <client:children>
      <client:ParentID>1649940</client:ParentID>
      <client:ChildID>9731</client:ChildID>
      <client:name/>
      <client:identifier>CG</client:identifier>
      <client:isActive/>
      <client:children>
         <client:ParentID>1838293</client:ParentID>
         <client:ChildID>1649940</client:ChildID>
         <client:name/>
         <client:identifier>CG</client:identifier>
         <client:isActive/>
         <client:children>
            <client:ParentID>1127251</client:ParentID>
            <client:ChildID>1838293</client:ChildID>
            <client:name/>
            <client:identifier>CG</client:identifier>
            <client:isActive/>
            <client:children>
               <client:ParentID>1127274</client:ParentID>
               <client:ChildID>1127251</client:ChildID>
               <client:name/>
               <client:identifier>CG</client:identifier>
               <client:isActive/>
               <client:children>
                  <client:ParentID>1988187</client:ParentID>
                  <client:ChildID>1127274</client:ChildID>
                  <client:name/>
                  <client:identifier>CG</client:identifier>
                  <client:isActive/>
                  <client:children>
                     <client:ParentID>1988188</client:ParentID>
                     <client:ChildID>1988187</client:ChildID>
                     <client:name/>
                     <client:identifier>CG</client:identifier>
                     <client:isActive/>
                  </client:children>
                  <client:children>
                     <client:ParentID>1988189</client:ParentID>
                     <client:ChildID>1988187</client:ChildID>
                     <client:name/>
                     <client:identifier>CG</client:identifier>
                     <client:isActive/>
                     <client:children>
                        <client:ParentID>1988190</client:ParentID>
                        <client:ChildID>1988189</client:ChildID>
                        <client:name/>
                        <client:identifier>CG</client:identifier>
                        <client:isActive/>
                     </client:children>
                  </client:children>
               </client:children>
            </client:children>
         </client:children>
      </client:children>
   </client:children>
</client:LMSDetails> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:44:31.620

**XSLT 1.0（和 XSLT 2.0）解决方案**

它基于使用 <xsl:key> 来安排父母和孩子，同时提高解决方案的性能。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:client="http://client.org">

    <xsl:output method="xml" indent="yes" />

    <!-- Use keys to boost performance -->
    <xsl:key name="entity-key" match="EntityDim" use="pkEntity" />
    <xsl:key name="parent-key" match="EntityDim" use="entityParent" />

    <!-- Process root element -->
    <xsl:template match="EntityDimCollection">
        <client:LMSDetails>
            <!-- Apply template to root entities, i.e. entities with no parent nodes -->
            <xsl:apply-templates select="EntityDim[not(key('entity-key', entityParent))]" />
        </client:LMSDetails>
    </xsl:template>

    <!-- First one to use for the real parent -->
    <xsl:template match="EntityDim">
        <!-- Obtain the relevant information -->
        <client:ParentID><xsl:value-of select="pkEntity" /></client:ParentID>
        <client:ChildID><xsl:value-of select="entityParent" /></client:ChildID>
        <client:name/>
        <client:identifier><xsl:value-of select="entityType" /></client:identifier>
        <client:isActive/>
        <client:costCenter>
            <!-- Obtain the expression after the last dot in essEntityCode -->
            <xsl:call-template name="get-suffix">
                <xsl:with-param name="text" select="essEntityCode" />
            </xsl:call-template>
        </client:costCenter>
        <!-- Outputs the children for this node : we just search which entities have the
             current pkEntity as their entityParent-->
        <xsl:for-each select="key('parent-key', pkEntity)">
            <client:children>
                <xsl:apply-templates select="." />
            </client:children>
        </xsl:for-each>
    </xsl:template>

    <!-- Recursive template to obtain the suffix from essEntityCode (the part after
         the last dot ) -->
    <xsl:template name="get-suffix">
        <xsl:param name="text" />

        <!-- Check whether the current text contains a dot -->
        <xsl:choose>
            <!-- Case CONTAINS_DOT: recurse until there is not more dots in the string -->
            <xsl:when test="contains($text, '.')">
                <xsl:call-template name="get-suffix">
                    <xsl:with-param name="text" select="substring-after($text, '.')" />
                </xsl:call-template>            
            </xsl:when>
            <!-- Case WITHOUT_DOTS : output suffix -->
            <xsl:otherwise>
                <xsl:value-of select="$text" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

**仅限 XSLT 2.0 的解决方案**

构建层次结构的方式是一样的，唯一不同的是从essEntityCode获取后缀的方式。在 XSLT 1.0 中，我们必须构建一个递归模板来检测最后一个点并提取后缀。但是在 XSLT 2.0 中，我们可以使用 tokenize 函数，它使用给定的正则表达式拆分给定的字符串。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:client="http://client.org">

    <xsl:output method="xml" indent="yes" />

    <xsl:key name="entity-key" match="EntityDim" use="pkEntity" />
    <xsl:key name="parent-key" match="EntityDim" use="entityParent" />

    <xsl:template match="EntityDimCollection">
        <client:LMSDetails>
            <xsl:apply-templates select="EntityDim[not(key('entity-key', entityParent))]" />
        </client:LMSDetails>
    </xsl:template>

    <xsl:template match="EntityDim">
        <client:ParentID><xsl:value-of select="pkEntity" /></client:ParentID>
        <client:ChildID><xsl:value-of select="entityParent" /></client:ChildID>
        <client:name/>
        <client:identifier><xsl:value-of select="entityType" /></client:identifier>
        <client:isActive/>
        <client:costCenter>
            <!-- This is the only difference from the XSLT 1.0 solution, instead
                 of calling the recursive template we tokenize the expression and
                 obtain the last element (which is the suffix) -->
            <xsl:value-of select="tokenize(essEntityCode, '\.')[last()]" />
        </client:costCenter>
        <xsl:for-each select="key('parent-key', pkEntity)">
            <client:children>
                <xsl:apply-templates select="." />
            </client:children>
        </xsl:for-each>
    </xsl:template>

</xsl:stelesheet> 
```

编辑：我假设为每个孩子创建一个新的 <client:children> ，可以通过调整 <for-each> 循环中的代码来更改该行为。

# javascript - 如何在引导缩略图中添加工具提示并在用户单击其他任何位置时使其再次不可见

> ID：14957457
> 
> 赞同：0
> 
> 时间：2013-02-19T12:26:05.213
> 
> 标签：javascript, jquery, twitter-bootstrap, popover

我有一个如下的缩略图，我正在使用 twitter bootstrap

```
 <script>
 $(document).ready(function(){
   $("#profile-image").popover({ 
     html : true,
     content: function() {
       return $('#popover_content_wrapper').html();
     }
   });
 }); 
```

```
 <div class="span2 pull-left">
            <ul class="thumbnails">
              <li class="span2">
                <a href="#" id="profile-image" class="thumbnail" rel="popover" data-placement= "bottom" data-trigger="click">
                 <img data-src="holder.js/160x120" src="resources/profile-pics/male/large.jpg" alt="">
               </a>
               <div id="popover_content_wrapper" style="display: none">
                        <div class="dropdown">
                           <a class="dropdown-toggle" data-toggle="dropdown" href="#">Edit Profile Picture</a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                    <li><a tabindex="-1" href="#">Action</a></li>
                                    <li><a tabindex="-1" href="#">Another action</a></li>
                                    <li><a tabindex="-1" href="#">Something else here</a></li>
                                </ul>
                       </div>
              </div>
              </li>
           </ul>
  </div>

  <div class="well span5">

  </div>

  <div class="well span3 pull-right">

  </div> 
```

我的要求是当用户将鼠标悬停在显示工具的图像上时。我尝试使用[http://twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)但它不起作用。只有当用户单击链接时，工具提示才会变得不可见。如果工具提示再次变得不可见会更好。也可以将 div 元素添加到工具提示元素。

我正在尝试制作类似于 facebook 个人资料图片的内容。

![在此处输入图像描述](../Images/093618cab08fb8e83a818706c3579f2e.png)![在此处输入图像描述](../Images/3ca2b19ebb50b0e7aa6a87d15b4a59f4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:35:29.400

采用 - `data-trigger="hover"`

是的，您可以添加`html elements`到弹出窗口中。

[弹出框上的 Jsfiddle（ onhover 属性）](http://jsfiddle.net/shail/FLFSc/1/)

```
$(function ()  
{ $("#hover").popover({trigger: 'hover'});  
}); 
```

# doctrine-orm - 实体类在 Symfony 2.1 和 Doctrine 中没有正确扩展基类

> ID：14957458
> 
> 赞同：0
> 
> 时间：2013-02-19T12:26:05.760
> 
> 标签：doctrine-orm, symfony-2.1

我创建了单独`generalBundle`的，它具有`Model`和`Entity`.My`storeBundle`扩展了捆绑实体。但是

```
app/console doctrine:schema:update --force 
```

命令不创建`generalBundle`字段。它只创建`storeBundle`额外创建的字段。我不确定我哪里出错了，有人可以建议吗？

我的`generalBundle`模型类包含

```
namespace ste\GeneralBundle\Model;

use DateTime;

abstract class Share 
{
    protected $id;
    protected $user;
    protected $comment;

    public function __construct()
    {
        $this->setCreatedAt(new \DateTime());
        $this->setUpdatedAt(new \DateTime());
    }

    public function getId()
    {
        return $this->id;
    }

    public function setComment($comment)
    {
        $this->comment = $comment;
    }

    public function getComment()
    {
        return $this->comment;
    }
} 
```

我的`generalBundle`实体类包含

```
 namespace ste\ActivityBundle\Entity;

    use ste\GeneralBundle\Model\Share as BaseShare;

    class Share extends BaseShare
    {

    } 
```

最后我的`StoreBundle`实体类包含

```
namespace ste\StoreBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;
use Doctrine\Common\Collections\ArrayCollection;
use ste\GeneralBundle\Entity\Share as BaseShare;

    /**
     * ste\StoreBundle\Entity\Share
     *
     * @ORM\Table(name="shares")
     */
    class Share extends BaseShare
    {
        /** 
         * @var integer $id
         *
         * @ORM\Column(name="id", type="integer", nullable=false)
         * @ORM\Id
         * @ORM\GeneratedValue(strategy="IDENTITY")
         */
        protected $id;
    } 
```

此处`protected $id;`归档是稍后添加的，因为我得到了类似的错误

```
No identifier/primary key specified for Entity "ste\StoreBundle\Entity\Share" sub class of "ste\GeneralBundle\Entity\Share". Every Enti  
  ty must have an identifier/primary key. 
```

我的`GeneralBundle > Resources> Config >Doctrine`包含文件`Share.orm.xml`包含：

```
<?xml version="1.0" encoding="UTF-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                  http://doctrine-project.org/schemas/orm/doctrine-mapping.xsd">

    <entity name="ste\GeneralBundle\Entity\Share" table="share">

        <id name="id" column="id" type="integer">
            <generator strategy="AUTO" />
        </id>

        <field name="user" column="user_id" type="integer" />

        <field name="comment" column="comment" type="string" length="255" />

    </entity>

</doctrine-mapping> 
```

没有做其他配置！任何线索？有什么要补充的`DependencyInjection`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:31:13.873

我得到了答案。我必须添加`config.yml`以下几行：

```
orm:
        entity_managers:
            default:
                mappings:
                   steStoreBundle: ~
                   steGeneralBundle: ~ 
```

因为它是单独的捆绑包，而不是`StoreBundle`我的情况。

# cocoa - 如何在 Cocoa 后台线程中关闭串行通信

> ID：14957463
> 
> 赞同：2
> 
> 时间：2013-02-19T12:26:26.867
> 
> 标签：cocoa, serial-port, arduino

我正在尝试运行一个串行通信示例，以便按照[http://playground.arduino.cc/Interfacing/Cocoa](http://playground.arduino.cc/Interfacing/Cocoa)（IOKit/ioctl 方法）中提供的代码将数据从 Arduino 发送到 Cocoa 应用程序。它可以工作，但是一旦启动，我就无法停止接收器线程。

我已经实现了一个开关按钮（ Start/Stop ），它在开始时打开串行端口并启动接收器线程：

```
- (IBAction) startButton: (NSButton *) btn {
(…)
error = [self openSerialPort: [SelectPort titleOfSelectedItem] baud:[Baud intValue]];
(…)
[self refreshSerialList:[SelectPort titleOfSelectedItem]];
[self performSelectorInBackground:@selector(incomingTextUpdateThread:) withObject:[NSThread currentThread]];
(…)
} 
```

线程代码实际上与示例中的相同，除了我包含了从接收的缓冲区重建串行数据包并将其保存到 SQLite 数据库的代码：

```
- (void)incomingTextUpdateThread: (NSThread *) parentThread {

// mark that the thread is running
readThreadRunning = TRUE;

const int BUFFER_SIZE = 100;
char byte_buffer[BUFFER_SIZE];  // buffer for holding incoming data
int numBytes=0;                 // number of bytes read during read

(…)

// assign a high priority to this thread
[NSThread setThreadPriority:1.0];

// this will loop until the serial port closes
while(TRUE) {
    // read() blocks until some data is available or the port is closed
    numBytes = (int) read(serialFileDescriptor, byte_buffer, BUFFER_SIZE); // read up to the size of the buffer
    if(numBytes>0) {
        // format serial data into packets, but first append at start the end of last read
        buffer = [[NSMutableString alloc] initWithBytes:byte_buffer length:numBytes encoding:NSASCIIStringEncoding];
        if (status == 1 && [ipacket length] != 0) {
           [buffer insertString:ipacket atIndex:0];
           numBytes = (int) [buffer length];
        }
        ipacket = [self processSerialData:buffer length:numBytes];   // Recompose data and save to database.
    } else {
        break; // Stop the thread if there is an error
    }
}

// make sure the serial port is closed
if (serialFileDescriptor != -1) {
    close(serialFileDescriptor);
    serialFileDescriptor = -1;
}

// mark that the thread has quit
readThreadRunning = FALSE;

} 
```

我尝试使用此代码关闭主线程中的端口，这也是 startButton 选择器的一部分，遵循提供的示例：

```
if (serialFileDescriptor != -1) {
    [self appendToIncomingText:@"Trying to close the serial port...\n"];
    close(serialFileDescriptor);
    serialFileDescriptor = -1;

    // Revisar... crec que el thread no s'adona que s'ha tancat el file descriptor...
    // wait for the reading thread to die
    while(readThreadRunning);
    // re-opening the same port REALLY fast will fail spectacularly... better to sleep a sec
    sleep(0.5);

    //[btn setTitle:@"Start"];
    [Start setTitle:@"Start"];
} 
```

但似乎接收者线程不知道全局变量serialFileDescriptor中的状态变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:51:32.787

So, `startButton:` opens the port, spawns off a thread to start reading from it, and then immediately closes the port? That's not going to turn out well.

`startButton:` should not close the port. Leave that for the reading thread to do when it's done, and do it on the main thread only when you need to close the port for some other reason (e.g., quitting).

Global variables are, by definition, visible throughout the program, and this includes across thread boundaries. If `readThreadRunning` is not getting set to `FALSE` (which assumes that `FALSE` hasn't been defined to something exotic), then your read thread's loop must still be running. Either it is still reading data, or `read` is blocked (it is waiting for more data).

Note that `read` has no way to know whether there will be more data. As your comment in the code says, it will block until either it *has* some data to return or the port gets closed. You should either work out a way to know ahead of time how much data you'll need to read, and stop when you've read that much, or see if you can close the port at the opposite end when everything has been sent and received.

# objective-c - 在 UIScrollView 中调用 UIWebView

> ID：14957466
> 
> 赞同：-2
> 
> 时间：2013-02-19T12:26:34.123
> 
> 标签：objective-c, uiwebview, uiscrollview

我试图通过调用主视图控制器来调用`UIWebViews`在其他视图中声明的两个。ScrollView 正在显示，但问题是未加载到滚动视图。我的代码有什么问题？`(AppleViewController & GoogleViewController)``UIScrollView``UIWebView`

**ViewController.h**文件

```
- (void)viewDidLoad
{
    [super viewDidLoad];  

    self.scrollView = [[[UIScrollView alloc] init] autorelease];
    self.scrollView.delegate = self;
    [self.view addSubview:self.scrollView];
    CGSize scrollViewContentSize = CGSizeMake(640, 404);
    [self.scrollView setContentSize:scrollViewContentSize];
    [self.scrollView setPagingEnabled:YES];
    self.scrollView.showsHorizontalScrollIndicator = YES;
    pageControl = [[[UIPageControl alloc] init] autorelease];
    pageControl.frame = CGRectMake(0,0,self.view.frame.size.width,self.view.frame.size.height);
    pageControl.numberOfPages = 3;
    pageControl.currentPage = 0;
    [self.view addSubview:pageControl];
    pageControl.backgroundColor = [UIColor blueColor];
    AppleViewController *apple=[[AppleViewController alloc]init];
    GoogleViewController *google=[[GoogleViewController alloc]init];
    [self.scrollView addSubview:apple.view];
    [self.scrollView addSubview:google.view];

    [scrollView setPagingEnabled:YES];
} 
```

**AppleViewController.h**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    webview2=[[UIWebView alloc]initWithFrame:CGRectMake(10, 500,750,350)];
    [webview2 setBackgroundColor:[UIColor redColor]];
    NSString *url2=@"http://www.apple.com";
    NSURL *nsurl2=[NSURL URLWithString:url2];
    NSURLRequest *nsrequest2=[NSURLRequest requestWithURL:nsurl2];
    [webview2 loadRequest:nsrequest2];
    [self.view addSubview:webview2];
    [webview2 setScalesPageToFit:NO];
    webview2.multipleTouchEnabled=YES;

    [[webview2 layer] setCornerRadius:10];
    [webview2 setClipsToBounds:YES];
    [[webview2 layer] setBorderColor:
    [[UIColor blackColor] CGColor]];
    [[webview2 layer] setBorderWidth:2.75];
    [[self view] addSubview:webview2];
    [webview2 release];
} 
```

////GoogleViewController.h

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    webview=[[UIWebView alloc]initWithFrame:CGRectMake(10, 0,750,350)];  

    [[webview layer] setCornerRadius:10];
    [webview setClipsToBounds:YES];
    [[webview layer] setBorderColor:
    [[UIColor blackColor] CGColor]];
    [[webview layer] setBorderWidth:3];
    [[self view] addSubview:webview];
    [webview release];    
    NSString *url=@"http://www.google.com";
    NSURL *nsurl=[NSURL URLWithString:url]; 
    NSURLRequest *nsrequest=[NSURLRequest requestWithURL:nsurl];
    [webview loadRequest:nsrequest];
    [self.view addSubview:webview];
    [webview setScalesPageToFit:YES];
    webview.multipleTouchEnabled=YES;
    [webview goBack];
    [webview goForward];
    webview.opaque = YES;
    webview.backgroundColor = [UIColor clearColor];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:49:09.390

在您的代码中更改此行，它将起作用：

首先，在你的 .h 文件中创建你的 webview 的属性

并像这样编写此代码

```
[self.scrollView addSubview:apple.webview2];
[self.scrollView addSubview:google.webview]; 
```

并在您的 applevc 中将您的 webview 代码放入 initWithNibName 方法中，而不是在第二个 vc 中相同的 viewdidload 方法中。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        webview2=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0,320,640)];
        [webview2 setBackgroundColor:[UIColor redColor]];
        NSString *url2=@"http://www.apple.com";
        NSURL *nsurl2=[NSURL URLWithString:url2];
        NSURLRequest *nsrequest2=[NSURLRequest requestWithURL:nsurl2];
        [webview2 loadRequest:nsrequest2];
        [self.view addSubview:webview2];
        [webview2 setScalesPageToFit:NO];
        webview2.multipleTouchEnabled=YES;

        [[webview2 layer] setCornerRadius:10];
        [webview2 setClipsToBounds:YES];
        [[webview2 layer] setBorderColor:
         [[UIColor blackColor] CGColor]];
        [[webview2 layer] setBorderWidth:2.75];
        [[self view] addSubview:webview2];
    }
    return self;
} 
```

# c++ - CWnd::GetParent 导致异常

> ID：14957470
> 
> 赞同：0
> 
> 时间：2013-02-19T12:26:48.290
> 
> 标签：c++, mfc, cdialog, cwnd

我正在尝试调用 CWnd 类的函数 GetParent()。每次都会抛出异常。我正在从工作线程调用该函数。

这是导致异常的行： CWnd* parent = this->GetParent();

我也试过“GetParent()->PostMessage(........);”，但仍然抛出异常。

我在 CDialog 中使用此方法。

我注意到 CWnd 成员 m_hWnd 有时是 0x00000000 或 0x00000001。在另一台计算机上，我没有收到此异常。这是项目设置或我的代码中的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:08:04.537

您收到一个断言而不是异常。

这是 VS 2010 的实现：

```
ASSERT(::IsWindow(m_hWnd)); return CWnd::FromHandle(::GetParent(m_hWnd)); 
```

您的 m_hWnd 不是窗口...

# visual-studio - NEON 指令在 Windows CE 7 上引发异常

> ID：14957476
> 
> 赞同：4
> 
> 时间：2013-02-19T12:27:01.470
> 
> 标签：visual-studio, assembly, arm, windows-ce, neon

由于来自世界各地的专家的及时回复，我很高兴在堆栈溢出中提出问题:-) 我希望清楚地解释我面临的问题。

**我想做什么？**

1.  我希望通过在线提供的各种示例来评估 NEON 指令集，以便自己编写一些算法。
2.  出于评估目的，我正在使用 ARM 官方网站上提供的 memcpy 示例。这是链接[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka13544.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka13544.html)。

**我的环境**

1.  我正在使用 Platform Builder for Windows CE 7.0 在 Visual Studio 2008 上编译 NEON 指令集。最新的平台构建器支持 NEON 指令编译。
2.  我在 OMAP3530 Mistral EVM 板上运行我的代码。
3.  我创建了一个简单的静态库 (NEONLIB.lib)，其中包含执行所需操作的 NEON 指令。我创建了简单的流驱动程序 (stream_interface.dll)，它使用这个静态库对 1280X720X2 字节缓冲区执行 memcpy 操作。我正在使用一个简单的应用程序 (Neon_Test.exe) 动态加载和卸载此驱动程序。

**我面临的问题**

1.  操作系统启动后，我将手动启动此应用程序并遵循收到的异常。

异常“数据中止”（0x4）：线程 ID=047d002a（pth=c049c990），Proc-Id=00400002（pprc=8a3425e0）“NK.EXE”，VM-active=05420012（pprc=c04a1344）“Neon_Test.exe ' PID:00400002 TID:047D002A PC=ef135120(stream_interface.dll+0x00005120) RA=ef133c18(stream_interface.dll+0x00003c18) SP=d0f3fc84, BVA=​​00000000

NeonMemcpy 是我的驱动程序中调用 NEON 函数的函数。

**Stream_Interface.map 文件**

```
....
0001:000029f0       ?NeonInit@@YAHXZ           100039f0 f   Neon_Process.obj
0001:00002bb4       ?NeonMemcpy@@YAXXZ         10003bb4 f   Neon_Process.obj
0001:00002c58       NKDbgPrintfW               10003c58 f   coredll:COREDLL.dll
0001:00002c68       SetLastError               10003c68 f   coredll:COREDLL.dll
.... 
```

**Neon_Process.cod 文件**

```
.......
; 108  :    MemcpyCustom((void*)g_pOUTVirtualAddr, (void*)g_pINPVirtualAddr, 1280 * 720 * 2);

00050   e5951000     ldr         r1,[r5]
00054   e1a04000     mov         r4,r0
00058   e5950004     ldr         r0,[r5,#4]
0005c   e3a02ae1     mov         r2,#0xE1000
00060   eb000000     bl          MemcpyCustom

; 109  :    RETAILMSG(1, (L"Time for Copy using Neon %d\r\n", GetTickCount() - dwStartTime));

00064   eb000000     bl          GetTickCount
00068   e1a03000     mov         r3,r0
....... 
```

**我的汇编源**

```
AREA    omap_neoncoding, CODE, READONLY

EXPORT  MemcpyCustom

INCLUDE omap_neoncoding.inc

MemcpyCustom
stmfd   sp!, {r4-r12,lr}
NEONCopyPLD
PLD [r1, #0xC0]
VLDM r1!,{d0-d7}
VSTM r0!,{d0-d7}
SUBS r2,r2,#0x40
BGE NEONCopyPLD

END 
```

根据 Bruce Eitman 的文章[http://geekswithblogs.net/BruceEitman/archive/2008/05/19/windows-ce--finding-the-cause-of-a-data-abort.aspx](http://geekswithblogs.net/BruceEitman/archive/2008/05/19/windows-ce--finding-the-cause-of-a-data-abort.aspx)，发生异常是

```
00064   eb000000     bl          GetTickCount 
```

但我确信 GetTickCount() 没有问题，如果我删除 MemcpyCustom 函数，一切都会好起来的。希望我已经提供了所有信息来帮助解决这个问题。请帮助我找出异常的确切原因。在调用霓虹灯功能或任何其他特殊的霓虹灯指令之前我需要做任何步骤吗？

在此先感谢您的帮助。

火花

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:54:56.270

您正在函数的序言中推送寄存器：

```
stmfd   sp!, {r4-r12,lr} 
```

但是最后没有对应的pop，也没有return指令。因此，执行将继续执行到函数之后发生的任何代码，接下来发生的事情是任何人的猜测。以下放在 BGE 之后应该可以解决问题：

```
ldmfd   sp!, {r4-r12,pc} 
```

**编辑：**顺便说一句，由于您实际上并没有在函数中使用 r4-r12 ，因此您不需要保存它们。您也不需要保存 d0-d7，因为它们被认为是易失的。因此，您可以删除`stmfd`并替换`ldmfd`为`bx lr`.

```
MemcpyCustom
  PLD [r1, #0xC0]
  VLDM r1!,{d0-d7}
  VSTM r0!,{d0-d7}
  SUBS r2,r2,#0x40
  BGE MemcpyCustom
  BX lr 
```

# html - osCommerce 元标记包括来自数据库

> ID：14957479
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:27:05.010
> 
> 标签：html, meta-tags, meta, oscommerce

我的模板中没有默认的元标记。所以我添加了这个元标记：

```
<meta name="keywords" content="<?php echo tep_output_string_protected($oscTemplate->getTitle()); ?>,AADVR Systems from ECCS" /> 
```

但我的问题在于元描述部分：

```
<meta name="keywords" content="***Here I want to add description from my Product description***" /> 
```

我该如何添加：`<?php echo tep_output_string_protected($oscTemplate->getTitle()); ?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:04:46.963

在 osCommerce 你有

```
meta http-equiv="Content-Type" content="text/html; charset=<?php echo CHARSET; ?>" 
```

中的代码行`includes/template_top.php`

元标记描述没有代码，但可供选择的贡献很少：

*   [易元标签](http://addons.oscommerce.com/info/5497)

*   [模块化 SEO 标题标签](http://addons.oscommerce.com/info/7646/v,23)

*   [标题标签控制器由 Jack Mcs（推荐）](http://addons.oscommerce.com/info/207)

# postgresql - Postgres 和词云

> ID：14957483
> 
> 赞同：3
> 
> 时间：2013-02-19T12:27:21.420
> 
> 标签：postgresql, function, word-cloud

我想知道是否可以创建一个 Postgres 函数来扫描一些表行并创建一个包含`WORD`和`AMOUNT`（频率）的表？我的目标是使用这个表来创建一个词云。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:57:34.433

有一种简单的方法，但它可能会很慢（取决于您的桌子大小）。您可以将文本拆分为数组：

```
SELECT string_to_array(lower(words), ' ') FROM table; 
```

使用这些数组，您可以使用`unnest`它们来聚合它们：

```
WITH words AS (
    SELECT unnest(string_to_array(lower(words), ' ')) AS word
    FROM table
)
SELECT word, count(*) FROM words
GROUP BY word; 
```

这是一种简单的方法，但存在一些问题，例如，它只用空格而不是标点符号来分割单词。

其他可能**更好的选择**是使用[PostgreSQL 全文搜索](http://www.postgresql.org/docs/9.2/static/textsearch-intro.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-06-17T21:07:52.733

聚会迟到了，但我也需要这个，并想使用全文搜索。
可以方便地删除 html 标签。

所以基本上你将文本转换为 a`tsvector`然后使用`ts_stat`：

```
select word, nentry 
from ts_stat($q$ 
    select to_tsvector('simple', '<div id="main">a b c <b>b c</b></div>') 
$q$)
order by nentry desc 
```

结果：

```
|word|nentry|
|----|------|
|c   |2     |
|b   |2     |
|a   |1     | 
```

但这不能很好地扩展，所以这就是我的想法：

设置：

```
-- table with a gist index on the tsvector column
create table wordcloud_data (
    html text not null,
    tsv tsvector not null
);
create index on wordcloud_data using gist (tsv);

-- trigger to update the tsvector column
create trigger wordcloud_data_tsvupdate 
    before insert or update on wordcloud_data 
    for each row execute function tsvector_update_trigger(tsv, 'pg_catalog.simple', html);

-- a view for the wordcloud
create view wordcloud as select word, nentry from ts_stat('select tsv from wordcloud_data') order by nentry desc; 
```

用法：

```
-- insert some data
insert into wordcloud_data (html) values 
    ('<div id="id1">aaa</div> <b>bbb</b> <i attribute="ignored">ccc</i>'), 
    ('<div class="class1"><span>bbb</span> <strong>ccc</strong> <pre>ddd</pre></div>'); 
```

之后，您的`wordcloud`视图应如下所示：

```
|word|nentry|
|----|------|
|ccc |2     |
|bbb |2     |
|ddd |1     |
|aaa |1     | 
```

额外功能：
替换`simple`为例如`english`，postgres 将删除停用词并为您进行词干提取。

# excel - 在列中向上计数直到空白？

> ID：14957484
> 
> 赞同：-5
> 
> 时间：2013-02-19T12:27:24.747
> 
> 标签：excel, vba

我有一列，它将包含几行数据，然后是一个空白单元格。

我需要一种方法来向上计数列中的行，直到出现空白单元格并使用`VBA`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:23:30.620

我不是 100% 确定你在问什么。您说“对数字求和”，但没有指定要求和的数字是计算的行数还是要对找到的单元格的值求和。

-编辑-

试一试：这将从底行开始向上计数，直到找到一个空白单元格一旦找到一个空白单元格，它将汇总最后一个空白单元格和当前空白单元格之间的单元格。

-编辑2-

在列标题下的行中添加了插入，因此第一行也被求和。

```
Sub CountUp()
    Dim TotalRows As Long
    Dim TotalCols As Long
    Dim Col As Long
    Dim i As Long
    Dim n As Long

    Rows(2).Insert Shift:=xlDown
    TotalRows = ActiveSheet.UsedRange.Rows.Count
    TotalCols = ActiveSheet.UsedRange.Columns.Count
    'Assumes Data you want to sum is in the first column
    Col = 1

    Cells(TotalRows, Col).Select
    For i = TotalRows To 1 Step -1
        If Cells(i, Col).Value <> "" Then
            n = n + 1
        Else
            Cells(i, Col).Formula = "=SUM(" & Cells(i + 1, Col).Address(False, False) & ":" & Cells(i + n, Col).Address(False, False) & ")"
            n = 0
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:40:08.137

假设列 F 为列并且它有编号。试试下面的代码。

```
Sub sumAndcount()
    Dim recCount As Long
    Dim recSum As Long

    Range("A65000").Value = "=COUNT(F:F)"
    recCount = Range("A65000").Value

    Range("A65000").Value = "=SUM(F:F)"
    recCount = Range("A65000").Value
End Sub 
```

# r - 将数据框中的日期输出到ggplot图中

> ID：14957487
> 
> 赞同：0
> 
> 时间：2013-02-19T12:27:30.917
> 
> 标签：r, ggplot2

是否可以使用 R 将日期添加到 ggplot 图表（图表数据基于该图表）？我有代码可以在一周内选择最多的日常数据，然后将其绘制出来。示例数据框（[来自先前的答案](https://stackoverflow.com/questions/14821064/line-break-when-no-data-in-ggplot2)）如下所示：

```
set.seed(1234)
df <- data.frame(Date=seq(as.POSIXct("05:00", format="%H:%M"), 
                          as.POSIXct("23:00", format="%H:%M"), by="hours"))
df$Counts <- sample(19)
df <- df[-c(4,7,17,18),]

# generate the groups automatically and plot
idx <- c(1, diff(df$Date))
i2 <- c(1,which(idx != 1), nrow(df)+1)
df$grp <- rep(1:length(diff(i2)), diff(i2))
g <- ggplot(df, aes(x=Date, y=Counts)) + geom_line(aes(group = grp)) + 
  geom_point()
g 
```

我知道我可以使用以下代码让 R 计算出我的数据是一周中的哪一天：

```
d <- as.Date("19/02/2013","%d/%m/%Y") 
format(d, "%A, %b %d, %Y") 
```

但我显然必须手动输入日期才能正常工作。

是否可以让 R 读取数据框并计算出数据所基于的星期几（只有一天），然后将其添加为图表右上角的图例？理想情况下，格式应包括日期和日期（例如，2013 年 2 月 19 日，星期二）。

**编辑**

我想将日期添加为图表中的文本。我可以为此使用 geom_text 吗？这目前不起作用，但到目前为止我已经得到：

```
g + geom_text(aes(x=as.POSIXct("18:00:00", format="%H:%M:%S"), y=1500), label=date_format("%A, %b %d, %Y")", size=2) 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:45:10.847

正如 Arun 所建议的（见评论），您可以格式化输入数据或向当前绘图添加格式：

```
 library(scales)
 g+ scale_x_datetime(labels = date_format("%A, %b %d, %Y")) 
```

**编辑**

我猜你想注释你的图表添加一个日期指示器

由于您将添加单个日期，因此您可以使用`annotate`，它比使用会重叠许多日期的 geom_text 更好。例如：

```
 label <- unique(format(as.Date(df$Date, "%d/%m/%Y"),
                                "%A, %b %d, %Y"))
 g+ annotate("text", x = mean(df$Date), y = 20, 
       label = label,size=20, col='red') 
```

![在此处输入图像描述](../Images/3a57bde4e3763272c7c3283cc0b10d47.png)

# java - Facebook 应用程序 - 获取 AuthToken

> ID：14957488
> 
> 赞同：3
> 
> 时间：2013-02-19T12:27:32.643
> 
> 标签：java, facebook, restfb

我使用 RestFB 创建了一个 Facebook 应用程序。在我的本地环境中，它运行良好。要将应用程序放到网络上，我需要获取令牌。我正在执行以下步骤：

1.  使用应用程序 ID 和密钥从 Facebook 重定向到我的应用程序 URL。
2.  从 url 获取代码
3.  尝试使用代码重定向以获取 authtoken

我无法完成第 3 步，请帮助我。

示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:59:28.503

使用以下代码获取您的 APP_ID/Key 和 APP_SECRET

```
AccessToken accessToken = new DefaultFacebookClient().obtainAppAccessToken(APP_ID, APP_SECRET);
DefaultFacebookClient facebookClient = new DefaultFacebookClient(accessToken.getAccessToken()); 
```

折腾了好久才找到这个简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:56:52.563

您是否完全按照此步骤操作？

```
Create a Facebook Application
Request https://graph.facebook.com/oauth/authorize?client_id=MY_API_KEY& redirect_uri=http://www.facebook.com/connect/login_success.html& scope=publish_stream,create_event
Facebook will redirect you to http://www.facebook.com/connect/login_success.html? code=MY_VERIFICATION_CODE
Request https://graph.facebook.com/oauth/access_token?client_id=MY_API_KEY& redirect_uri=http://www.facebook.com/connect/login_success.html& client_secret=MY_APP_SECRET&code=MY_VERIFICATION_CODE
Facebook will respond with access_token=MY_ACCESS_TOKEN 
```

# sql-server - 数据类型 date 的日期函数 dateadd 不支持 datepart 小时

> ID：14957491
> 
> 赞同：20
> 
> 时间：2013-02-19T12:27:46.243
> 
> 标签：sql-server, jasper-reports

当我在 jasper 报告中运行以下查询时，我遇到了异常。“net.sf.jasperreports.engine.JRException：执行 SQL 语句时出错：Activity_Summary”。Activity_Summery_Report 是我的 jrxml 文件名。

查询是

```
declare @startdate as datetime;
declare @enddate as datetime;
declare @sitegroup as nvarchar(50);
set @startdate = DATEADD(hh, +0, $P{StartDate});
set @enddate = DATEADD(hh, +0, $P{EndDate});
set @sitegroup = 'BBXNCR';
set NOCOUNT ON; -- Added by JC230090: Fixes bug when running query with Jasper

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[#temp_invlines]') AND type in (N'U'))
DROP TABLE [dbo].[#temp_invlines]
create table #temp_invlines (site_iid uniqueidentifier, invoice_line_type_iid int,    sub_total float, tax_total float,line_total float, product_type_iid int);
insert into #temp_invlines (site_iid,invoice_line_type_iid, sub_total, tax_total,   line_total, product_type_iid)
select h.site_iid, invoice_line_type_iid, l.sub_total, l.tax_total, l.line_total, l.product_type_iid
from invoice_lines l
    inner join invoices h on l.invoice_iid = h.invoice_iid
where h.invoice_dt >= @startdate and h.invoice_dt < @enddate

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[#temp_payment_invoices]') AND type in (N'U'))
DROP TABLE [dbo].[#temp_payment_invoices]
create table #temp_payment_invoices (site_iid uniqueidentifier, inv_amount float);
insert into #temp_payment_invoices (site_iid, inv_amount)
select i.site_iid, i.total
from invoice_payments p
    inner join Invoice_Payment_Invoice_Xref pXref on p.invoice_payment_iid = pXref.invoice_payment_iid
    inner join invoices i on pXref.invoice_iid = i.invoice_iid
where p.payment_dt >= @startdate and p.payment_dt < @enddate

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[#temp_promocodes]') AND type in (N'U'))
DROP TABLE [dbo].[#temp_promocodes]
create table #temp_promocodes (site_iid uniqueidentifier, invoice_promo_line_type_iid int, promo_amount float);
insert into #temp_promocodes (site_iid, invoice_promo_line_type_iid, promo_amount)
select h.site_iid, pl.invoice_promo_line_type_iid, pl.amount
from invoice_promo_lines pl
inner join invoices h on pl.invoice_iid = h.invoice_iid
where h.invoice_dt >= @startdate and h.invoice_dt < @enddate

select 
 rtrim(s.site_id) as [Site ID]
 , rtrim(ss.Description) as [Status]
 , @startdate as [Date]
, datename(dw,@startdate) as [DoW]
, rtrim(s.name) as [Store Code]
, rtrim(isnull(sg.Description,'')) as [Site Group]
, rtrim(s.address1) + ', ' + rtrim(s.city) + ', ' + rtrim(s.state) + ' ' +   rtrim(s.Zip) as [Address]

, (select count(*) from invoices h where h.invoice_dt >= @startdate and h.invoice_dt < @enddate and h.site_iid = s.site_iid) as [Trans]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 1) as [Rent Rev]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 2) as [Ext Day Rev]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 0 and l.product_type_iid = 2) as [Used Sell Rev]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 0 and l.product_type_iid <> 2) as [New Sell Rev]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid) as [Rev Total]
, (select isnull(sum(tax_total),0) from #temp_invlines l where l.site_iid = s.site_iid) as [Tax Total]
, (select isnull(sum(line_total),0) from #temp_invlines l where l.site_iid = s.site_iid) as [Grand Total]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid) /
(select case when count(*) = 0 then 1 else count(*) end from invoices h where h.invoice_dt >= @startdate and h.invoice_dt < @enddate and h.site_iid = s.site_iid)
as [Rev/Trans]
, (select isnull(count(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 1) as [Rent Cnt]
, (select isnull(count(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 2) as [Ext Day Cnt]
, (select isnull(count(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 0 and l.product_type_iid = 2) as [Used Sell Cnt]
, (select isnull(count(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 0 and l.product_type_iid <> 2) as [New Sell Cnt]
, (select isnull(count(promo_amount),0) from #temp_promocodes p where p.site_iid = s.site_iid and p.invoice_promo_line_type_iid = 0) as [CustSrv Promo Cnt]
, (select isnull(sum(promo_amount),0) from #temp_promocodes p where p.site_iid = s.site_iid and p.invoice_promo_line_type_iid = 0) as [CustSrv Promo Amt]
, (select isnull(count(promo_amount),0) from #temp_promocodes p where p.site_iid = s.site_iid and p.invoice_promo_line_type_iid = 1) as [Marketing Promo Cnt]
, (select isnull(sum(promo_amount),0) from #temp_promocodes p where p.site_iid = s.site_iid and p.invoice_promo_line_type_iid = 1) as [Marketing Promo Amt]

, (SELECT  
    isnull(count(*),0)
FROM Invoice_Lines ilrtn 
    INNER JOIN Invoices ihrtn on ilrtn.invoice_iid = ihrtn.invoice_iid 
    inner join customer_ids c on ihrtn.customer_id_iid = c.customer_id_iid
    INNER JOIN Invoices ihrent on ihrtn.customer_id_iid = ihrent.customer_id_iid  
    INNER JOIN Invoice_lines ilrent on ihrent.invoice_iid = ilrent.invoice_iid 
WHERE ihrtn.invoice_dt >= @startdate
    and ihrtn.invoice_dt < @enddate
    and ilrtn.invoice_line_type_iid in (0,2)
    AND ihrent.invoice_dt <= ihrtn.invoice_dt 
    AND ilrent.invoice_line_type_iid in (1) 
    AND ilrent.piece_id = ilrtn.piece_id 
    and ihrtn.site_iid = s.site_iid 
  ) as [Invoices]

, (SELECT  
    isnull(sum(ilrent.line_total + ilrtn.line_total),0)
FROM Invoice_Lines ilrtn 
    INNER JOIN Invoices ihrtn on ilrtn.invoice_iid = ihrtn.invoice_iid 
    inner join customer_ids c on ihrtn.customer_id_iid = c.customer_id_iid
    INNER JOIN Invoices ihrent on ihrtn.customer_id_iid = ihrent.customer_id_iid  
    INNER JOIN Invoice_lines ilrent on ihrent.invoice_iid = ilrent.invoice_iid 
WHERE ihrtn.invoice_dt >= @startdate
    and ihrtn.invoice_dt < @enddate
    and ilrtn.invoice_line_type_iid in (0,2)
    AND ihrent.invoice_dt <= ihrtn.invoice_dt 
    AND ilrent.invoice_line_type_iid in (1) 
    AND ilrent.piece_id = ilrtn.piece_id 
    and ihrtn.site_iid = s.site_iid 
  ) as [Collectable]

, ( select isnull(sum(p.amount),0)
from invoice_payments p
where p.payment_dt >= @startdate and p.payment_dt < @enddate
and p.invoice_payment_iid in (
    select distinct p.invoice_payment_iid
    from invoice_payments p
    inner join Invoice_Payment_Invoice_Xref pXref on p.invoice_payment_iid = pXref.invoice_payment_iid
    inner join invoices i on pXref.invoice_iid = i.invoice_iid
    where p.payment_dt >= @startdate and p.payment_dt < @enddate
    and i.site_iid = s.site_iid
    group by p.invoice_payment_iid, pXref.invoice_iid)
) as [Payments Collected]

from sites s
inner join Site_Statuses_Enum ss on s.site_status_iid = ss.site_status_iid
left outer join Site_SiteGroup_XRef sgx on s.site_iid = sgx.site_iid
left outer join Site_Groups sg on sgx.site_group_iid = sg.site_group_iid

order by s.site_id

drop table #temp_promocodes;
drop table #temp_payment_invoices;
drop table #temp_invlines; 
```

异常堆栈是

```
Error filling print... 
Error executing SQL statement for : Activity_Summary
net.sf.jasperreports.engine.JRException: Error executing SQL statement for : Activity_Summary
at net.sf.jasperreports.engine.query.JRJdbcQueryExecuter.createDatasource(JRJdbcQueryExecuter.java:141)
at net.sf.jasperreports.engine.fill.JRFillDataset.createQueryDatasource(JRFillDataset.java:656)
at net.sf.jasperreports.engine.fill.JRFillDataset.initDatasource(JRFillDataset.java:588)
at net.sf.jasperreports.engine.fill.JRBaseFiller.setParameters(JRBaseFiller.java:1196)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:833)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:782)
at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:63)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:402)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:234)      
at it.businesslogic.ireport.IReportCompiler.run(IReportCompiler.java:947)      
at java.lang.Thread.run(Unknown Source)         Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The datepart hour is not supported by date function dateadd for data type date.      
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216)      
 at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515)      
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:404)      
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350)      
at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)      
at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)      
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180)     
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155)      
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:285)      
at net.sf.jasperreports.engine.query.JRJdbcQueryExecuter.createDatasource(JRJdbcQueryExecuter.java:135)     
 ... 10 more  
 Print was not filled. Try using an EmptyDataSource... 
```

请帮助我任何人如何解决它。提前致谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-19T12:54:19.133

发生这种情况是因为您的输入参数属于数据类型`date`，而不是`datetime`。因为`date`数据类型的精度只能达到日级别，而不是更小的精度。

例如，这将在 SQL Server 中失败：

```
declare @Start as date = '20130201'
declare @End as date = '20130210'
declare @startdate as datetime;
declare @enddate as datetime;
set @startdate = DATEADD(hh, +0, @Start)
set @enddate = DATEADD(hh, +0, @End) 
```

虽然这会起作用：

```
declare @Start as datetime = '20130201'
declare @End as datetime = '20130210'
declare @startdate as datetime;
declare @enddate as datetime;
set @startdate = DATEADD(hh, +0, @Start)
set @enddate = DATEADD(hh, +0, @End) 
```

如果您确保您的应用程序（如下）提供的参数是 type`datetime`而不是`date`，您应该摆脱错误。

```
$P{StartDate}
$P{EndDate} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-29T11:48:52.943

为避免错误消息“日期函数 dateadd 不支持数据类型日期的 datepart 小时”，有时需要在获取当前时间后进行双重转换（首先将其转换为日期以摆脱时间，然后返回 datetime 以启用添加时间）。例如，如果您今天需要 11:00，请使用：

```
DATEADD(hour, 11, cast(cast(getdate() as date) as datetime)) 
```

# cakephp - CakePHP 延迟加载因静态访问类常量而失败

> ID：14957503
> 
> 赞同：3
> 
> 时间：2013-02-19T12:28:25.973
> 
> 标签：cakephp, static, lazy-loading

在 CakePHP 2.2 应用程序中，我在模型中使用类常量进行一些内部配置。出现了以下问题。

### 简洁版本：

Cake 的延迟类加载不会由对 Model 类的静态调用触发。

如果第一次访问控制器中的模型是

```
MyModel::SOME_CONST // fails 
```

班级将是未知的。如果之前使用过该类的任何实例，那很好：

```
$this->MyModel->something();
MyModel::SOME_CONST // works 
```

不知道延迟加载实现的细节：

**问题**：这是无法解决的问题吗？如果是这样，为什么？那么我如何最好地在我的应用程序中解决它（将 const 包装在一个函数中）？或者是否有机会改进延迟加载，使其也适用于静态访问？

### 带有代码的长版本：

为了测试不同的情况，我制作了一个带有 1 个模型和 1 个控制器的小型测试 App：

模型/Post.php：

```
<?php
class Post extends AppModel {
    public $useTable = false; // Don't bother with a DB

    const FOO = "foo";

    public $bar = "bar";
} 
```

控制器/PostsController.php：

```
<?php
class PostsController extends AppController {
    public function constant() {
        debug(Post::FOO);
    }

    public function variable() {
        debug($this->Post->bar);
    }

    public function variableFirst() {
        debug($this->Post->bar);

        debug(Post::FOO);
    }
} 
```

通过浏览器访问三个控制器动作，现在可以测试不同的情况。

1）访问模型常量（at `/posts/constant`）：

> 错误：找不到类“AppModel”

2）访问模型变量（at `/posts/variable`）：

> '酒吧'

3）在变量（at）之后访问模型常量`/posts/variable`：

> '酒吧'
> 
> “富”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:38:39.997

如果您正确地接近它，则延迟加载适用于普通类调用以及静态调用。

正确的意思是，你总是必须 App::uses() 文件顶部所有使用的类

对于模型文件中的 AppModel：

```
App::uses('AppModel', 'Model');

class Post extends AppModel {} 
```

有关详细信息，请参阅核心文件。

# ruby-on-rails - Ruby on Rails 网站迁移和路由

> ID：14957506
> 
> 赞同：0
> 
> 时间：2013-02-19T12:28:36.227
> 
> 标签：ruby-on-rails, ruby, routes

在迁移之前，网站完全没问题。现在我们已经迁移到一个新的服务器，网站开始显示一些链接的这种错误：http: [//babybum.proj.dev.doo.is/sao-paulo/planta](http://babybum.proj.dev.doo.is/sao-paulo/planta)

这是公平控制器中“区域”的定义

```
 def area
       @area_name = BB_MENU_AREAS_SLUG.select {|k, v| v == params[:area]}.keys.first
       if @area_name
          @area = Snippet.find_by_identifier([params[:fair_location], @area_name.to_s].join('-'))
       else
          redirect_to root_path
       end
    end 
```

BB_AREAS_SLUG 的片段

```
BB_AREAS = {
:about          => {:link => "quem somos", :slug => "quem-somos"},
:expositors     => {:link => "expositores",:slug => "expositores"},
:map            => {:link => "planta", :slug => "planta"},
:activities     => {:link => "atividades",:slug => "atividades"},
:address        => {:link => "como chegar",:slug => "como-chegar"},
:support        => {:link => "apoio", :slug => "apoio"},
:optin          => {:link => "cadastro",:slug => "cadastro"},
:how_expositors => {:link => "como expor",:slug => "como-expor"},
:press          => {:link => "imprensa",:slug => "imprensa"},
:contact        => {:link => "contato",:slug => "contato"},
}

BB_MENU_AREAS       = BB_AREAS.each_with_object({}) { |(k, v), h| h[k] = v[:link]}
BB_MENU_AREAS_SLUG  = BB_AREAS.each_with_object({}) { |(k, v), h| h[k] = v[:slug]} 
```

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:04:43.900

可能问题出在另一个 Ruby 版本上。我没有 1.8 来测试它，但是在旧服务器上你有 1.8.x，现在是 1.9.x。你需要改变

```
@area_name = BB_MENU_AREAS_SLUG.select {|k, v| v == params[:area]}.keys.first 
```

到

```
@area_name = Hash[BB_MENU_AREAS_SLUG.select {|k, v| v == params[:area]}].keys.first 
```

甚至将其折射为：

```
@area_name = BB_MENU_AREAS_SLUG.find { |_, v| v == params[:area] }.first 
```

# php - 加入两个表，以便我可以使用 ORDER BY

> ID：14957511
> 
> 赞同：1
> 
> 时间：2013-02-19T12:28:52.983
> 
> 标签：php, sql

我对 SQL 很陌生，但昨晚在我的网站上进行实验时碰壁了。我已经尝试了好几个小时了，但没有运气，所以这是我在 Stack Overflow 上的第一篇文章！

我的问题是我正在尝试对结果表进行排序，但是我需要排序的是来自主数据的不同查询。所以我有一个输出良好的数据表，但我不能使用 ORDER BY 到我想要的字段，因为它来自不同的查询。

我有两张桌子：

```
character_
quest_globals 
```

我需要来自两个表的数据：

```
character_.id
character_.name
character_.class
character_.level

quest_globals.charid   (Same value as character_.id)
quest_globals.name
quest_globals.value

Ordered by: quest_globals.value 
```

我想加入这两个表，这样我就可以按我喜欢的方式排序结果。我需要为此使用 UNION 或 JOIN 吗？

`character_`并且`quest_globals`有一个共同的领域，`character_.id`所以`quest_globals.charid`我猜我用它来加入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:31:06.307

```
SELECT c.id, c.name, c.class, c.level, q.name, q.value 
FROM character_ c
LEFT JOIN
  quest_globals q
ON 
  q.charid  = c.id 
ORDER BY q.value 
```

此外，您可以为列命名，例如：

```
c.name as char_name, q.name as quest_name 
```

所以，不会那么乱

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:33:06.423

```
SELECT character_.id,character_.name,character_.class,character_.level,quest_globals.name,quest_globals.value
FROM character_
LEFT JOIN quest_globals ON quest_globals.charid  = character_.id 
ORDER BY quest_globals.value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:46:16.377

查询将是这样的：

```
SELECT character_.id
character_.name
character_.class
character_.level
FROM character_
INNER JOIN quest_globals
ON character_.id=quest_globals.charid
ORDER BY quest_globals.value 
```

希望它能解决专栏。

# xcode - 签入应用程序购买自动续订订阅有效

> ID：14957515
> 
> 赞同：1
> 
> 时间：2013-02-19T12:29:15.583
> 
> 标签：xcode, in-app-purchase

我是IOS的新手。目前正在我的报亭应用程序中进行应用程序购买实施。我已经在我的报亭应用程序中实施了自动更新订阅。我如何检查应用程序购买自动更新订阅是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:40:00.263

创建订阅时，您需要存储收据对象。您可以使用收据来确定它所代表的订阅是否有效。

我正在使用 CargoBay ( [https://github.com/mattt/CargoBay](https://github.com/mattt/CargoBay) ) 来帮助处理 StoreKit。它有一个方法：

```
[[CargoBay sharedManager] verifyTransaction:transaction password:nil success:^(NSDictionary *receipt) {
  NSLog(@"Receipt: %@", receipt);
} failure:^(NSError *error) {
    NSLog(@"Error %d (%@)", [error code], [error localizedDescription]);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T10:23:14.447

今天，我遇到了这个问题。在这里关注[Apple doc](https://developer.apple.com/library/content/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html)，我用这种方式检查订阅是否过期。

这是我在 Objective-C 中的代码。

```
NSDictionary *jsonResponse = [NSJSONSerialization JSONObjectWithData:resData options:0 error:&error]; 
// this is response from AppStore
NSDictionary *dictLatestReceiptsInfo = jsonResponse[@"latest_receipt_info"];
long long int expirationDateMs = [[dictLatestReceiptsInfo valueForKeyPath:@"@max.expires_date_ms"] longLongValue];
long long requestDateMs = [jsonResponse[@"receipt"][@"request_date_ms"] longLongValue];
isValidReceipt = [[jsonResponse objectForKey:@"status"] integerValue] == 0 && (expirationDateMs > requestDateMs); 
```

希望这有帮助。

# ios - 流解密视频到 mpmovieplayercontroller

> ID：14957521
> 
> 赞同：1
> 
> 时间：2013-02-19T12:29:35.150
> 
> 标签：ios, objective-c, sockets, encryption, streaming

我有一个将被下载到ios设备的加密视频..我想通过解密来流式传输这个加密视频..而不是一次真正解密视频，我的客户不希望发生这种情况..

因此，我决定运行一个套接字，该套接字将监听请求并将数据解密为流，该流应该由 mpmovieplayercontroller 读取并播放..

到目前为止，我能够运行套接字，解密数据块并将其放入流中..

当套接字第一次通信时，我首先发送这种类型的标头..

```
"HTTP/1.1 200 OK\r\n \
                            Content-Type: video/mp4\r\n \
                            Connection: close\r\n \
                            Accept-Ranges: bytes\r\n \
                            Content-Length: filesize\r\n \
                            Content-Dispostion: inline;\r\n\r\n"; 
```

下一步我开始**发送带有解密数据的套接字**..

但是 mpmovieplayercontroller （sourcetype 设置为 streaming ）没有播放它，而是等待一些内容被解密并抛出这个错误

`'AVPlayerItem cannot be associated with more than one instance of AVPlayer'`

我怎么可能得到这个正确的.. 这种类型的系统已经在 android 中实现，客户端也坚持在 ios 中具有相同的功能.. 请建议可以在这方面做些什么。

如果 mpmovieplayercontroller 是流式视频 .. ，它会如何期望数据？我做得对吗？

# jquery - 调整字体大小时调整 DIV 大小

> ID：14957523
> 
> 赞同：0
> 
> 时间：2013-02-19T12:29:46.673
> 
> 标签：jquery, css

我有以下 CSS 设置：

```
.header_wrapper, .navbar_wrapper, .body_wrapper, .footer_wrapper {
    display: table;
    width: 768px;
    margin-left: auto;
    margin-right: auto;
} 
```

当用户单击字体调整大小按钮时，如何以增量（直到浏览器窗口的 100%）调整这些元素的大小以适应文本？我的默认字体大小是 16px。当用户在这个阶段增加字体时，元素需要调整大小（即在页面加载时）。然而，当用户的尺寸缩小到 16 像素（以及低于它的任何尺寸）时，应该恢复默认尺寸。

这是我的 JavaScript 代码：

```
 var originalFontSize = $('html').css('font-size');
    $(".resetFont").click(function(){
    $('html').css('font-size', originalFontSize);
  });
  // Increase Font Size
  $(".increaseFont").click(function(){
    var currentFontSize = $('html').css('font-size');
    var currentFontSizeNum = parseFloat(currentFontSize, 10);
    var newFontSize = currentFontSizeNum*1.2;
    $('html').css('font-size', newFontSize);
    return false;
  });
  // Decrease Font Size
  $(".decreaseFont").click(function(){
    var currentFontSize = $('html').css('font-size');
    var currentFontSizeNum = parseFloat(currentFontSize, 10);
    var newFontSize = currentFontSizeNum*0.8;
    $('html').css('font-size', newFontSize);
    return false;
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:19:05.273

要使用字体大小调整任何元素的大小，请为元素指定一个大小为`em`. 这里的所有都是它的。

在您的示例中：

```
.header_wrapper, .navbar_wrapper, .body_wrapper, .footer_wrapper {
    display: table;
    /* if we assume font size is 16 px, width will be 768 px */
    width: 48em;
    margin-left: auto;
    margin-right: auto;
} 
```

# c - 在 linux 内核驱动程序中向平台设备添加属性

> ID：14957524
> 
> 赞同：1
> 
> 时间：2013-02-19T12:29:49.637
> 
> 标签：c, linux-kernel, linux-device-driver

我创建了一个简单的测试设备。我的目的是创建一些自定义 sysfs 文件并从中获取设置。我首先尝试添加一个 kobject 和我自己的 sys_ops。效果很好。但是，尝试通过使用平台设备来做同样的事情会给我一个我无法读取或写入的文件。谁能告诉我这里有什么问题？

=============sysfs_file.c==================================

```
 #include <linux/kernel.h>
    #include <linux/module.h>
    #include <linux/init.h>
    #include <linux/platform_device.h>
    #include <linux/kobject.h>
    #include <linux/slab.h>

    struct kobject *myob;
    char *ops_buffer;
    struct attribute my_atr = {
    .name = "custom_attrbute",
    .mode = S_IWUGO|S_IRUGO,
    };
    int atp_probe(struct platform_device *dev)
    {
        printk("%s\n", __func__);
        myob = &dev->dev.kobj;
        ops_buffer = kzalloc(PAGE_SIZE, GFP_KERNEL);
        sysfs_create_file(myob, &my_atr);
        return 0;
    }
    int atp_remove(struct platform_device *dev)
    {
    printk("%s\n", __func__);
        sysfs_remove_file(myob, &my_atr);
        kfree(ops_buffer);
        return 0;
    }
    struct platform_device atp_dev = {
        .name = "Aerrow_Test_Platform",
        .id = 0,
    };
    struct platform_driver atp_drv = {
        .driver = {
        .name = "Aerrow_Test_Platform",
        .owner = THIS_MODULE,
        },
        .probe = atp_probe,
        .remove = atp_remove,
    };
    static int __init sfst_init(void)
    {
        int ret;
        printk("%s\n",__func__);
        ret = platform_device_register(&atp_dev);
        printk("%s: device add ret = %d\n", __func__, ret);
        ret = platform_driver_register(&atp_drv);
        printk("%s: driver register ret = %d\n", __func__, ret);
        return 0;
    }
    static void __exit sfst_exit(void)
    {   
        printk("%s", __func__);
        platform_driver_unregister(&atp_drv);
        platform_device_del(&atp_dev);
    }
    module_init(sfst_init);
    module_exit(sfst_exit);
    MODULE_LICENSE("GPL"); 
```

==================================================== =================================== 输出为：

```
preetam@preetam-Veriton-Series:ko_training$ cd /sys/devices/platform/Aerrow_Test_Platform.0/
preetam@preetam-Veriton-Series:Aerrow_Test_Platform.0$ ls
custom_attrbute 驱动程序模式 电源子系统 uevent
preetam@preetam-Veriton-Series:Aerrow_Test_Platform.0$ cat custom_attrbute
cat：custom_attrbute：输入/输出错误
preetam@preetam-Veriton-Series:Aerrow_Test_Platform.0$ echo "HELLO" > custom_attrbute
bash：回声：写入错误：输入/输出错误
preetam@preetam-Veriton-Series:Aerrow_Test_Platform.0$ cat custom_attrbute cat: custom_attrbute: 输入/输出错误

```

平台设备的 ktype ops 方法是无法处理其他属性还是我的代码有问题？如果我创建自己的 kobject 并将这个属性放在它下面，同样的事情也会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:59:56.797

“裸属性不包含读取或写入属性值的方法。鼓励子系统定义自己的属性结构和包装函数，以添加和删除特定对象类型的属性。” - 来自 kernel.org/doc/Documentation/filesystems/sysfs.txt。

您可以尝试 device_attribute 而不是这个裸属性结构。还定义您自己的显示和存储来读取和写入您的 sysfs 条目。

# c# - 泛型方法中的特定类变量值

> ID：14957525
> 
> 赞同：0
> 
> 时间：2013-02-19T12:29:59.783
> 
> 标签：c#

在我的程序中，我有以下代码：

```
 private void SetCorners<T>(T position, int width, int height)
    {
        float halfWidth = width / 2 + position.X;
        float halfHeight = height / 2 + position.Y;

        UpperLeft = new Vector2(-halfWidth, -halfHeight);
        UpperRight = new Vector2(halfWidth, -halfHeight);
        LowerLeft = new Vector2(-halfWidth, halfHeight);
        LowerRight = new Vector2(halfWidth, halfHeight);
    } 
```

其中 T 要么是`Vector2`要么`Vector3`来自`Microsoft.Xna.Framework`。此代码不构建，因为`T`不包含它们的定义。如何使此方法有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:31:52.443

因为没有共同的基类或接口都`Vector2`派生`Vector3`自或实现，所以您将创建一个方法，该方法直接采用`X`并`Y`创建两个调用此新方法的辅助方法：

```
private void SetCorners(Vector2 position, int width, int height)
{
    SetCorners(position.X, position.Y, width, height);
}

private void SetCorners(Vector3 position, int width, int height)
{
    SetCorners(position.X, position.Y, width, height);
}

private void SetCorners(float x, float y, int width, int height)
{
    float halfWidth = width / 2 + x;
    float halfHeight = height / 2 + y;

    UpperLeft = new Vector2(-halfWidth, -halfHeight);
    UpperRight = new Vector2(halfWidth, -halfHeight);
    LowerLeft = new Vector2(-halfWidth, halfHeight);
    LowerRight = new Vector2(halfWidth, halfHeight);
} 
```

这使您可以不重复自己 ( [DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself) )，但仍然支持`Vector2`和`Vector3`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:09:25.333

您还可以为这两个结构创建一个包装类：

```
private void SetCorners<T>(T position, int width, int height)
    where T : MyVectorWrapper
{
    float halfWidth = width / 2 + position.X;
    float halfHeight = height / 2 + position.Y;

    UpperLeft = new Vector2(-halfWidth, -halfHeight);
    UpperRight = new Vector2(halfWidth, -halfHeight);
    LowerLeft = new Vector2(-halfWidth, halfHeight);
    LowerRight = new Vector2(halfWidth, halfHeight);
}

class MyVectorWrapper
{
    public float X { get; set; }
    public float Y { get; set; }

    public MyVectorWrapper(dynamic vector2)
    {
        X = vector2.X;
        Y = vector2.Y;
    }
} 
```

示例用法：

```
var v2 = new Vector2(1, 2);
var v3 = new Vector3(v2, 3);
SetCorners<MyVectorWrapper>(new MyVectorWrapper(v2), width, height);
SetCorners<MyVectorWrapper>(new MyVectorWrapper(v3), width, height); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:32:39.153

然后我会编写两个单独的方法，一个 for`Vector2`和一个 for `Vector3`。一般来说，您可以使用[泛型类型约束](http://msdn.microsoft.com/en-us/library/bb384067.aspx)，但我认为这在这里有点太人为了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T12:34:16.390

我不知道 Vector2 和 Vector3 是否有一些共同的接口或基类，但你可以像这样向你的泛型方法添加一个约束：

```
private void Method<T>(T bla)
  where T : BaseInterfaceOrBaseClass
{ ... } 
```

# magento - 在magento的客户模块网格中添加了未显示的附加字段值

> ID：14957528
> 
> 赞同：0
> 
> 时间：2013-02-19T12:30:01.437
> 
> 标签：magento, grid, magento-1.7, custom-fields

我创建了一个新模块，用于在 magento 后端列出客户。

一切都会好起来的，但这里有一些问题。

我为客户注册创建了一些附加字段。此字段值现在未显示在网格中。

这是我的`grid.php`代码：

```
<?php
class Pfay_Test_Block_Adminhtml_Test_Grid extends Mage_Adminhtml_Block_Widget_Grid
{
   public function __construct()
   {
       parent::__construct();
       $this->setId('customerGrid');
       $this->setDefaultSort('entity_id');
       $this->setDefaultDir('DESC');
       $this->setSaveParametersInSession(true);
   }
   protected function _prepareCollection()
   {
        $collection = Mage::getResourceModel('customer/customer_collection')
            ->addNameToSelect()
            ->addAttributeToSelect('email')
            ->addAttributeToSelect('usertype')
            ->addAttributeToSelect('created_at')
            ->addAttributeToSelect('group_id')
            ->joinAttribute('billing_postcode', 'customer_address/postcode', 'default_billing', null, 'left')
            ->joinAttribute('billing_city', 'customer_address/city', 'default_billing', null, 'left')
            ->joinAttribute('billing_telephone', 'customer_address/telephone', 'default_billing', null, 'left')
            ->joinAttribute('billing_region', 'customer_address/region', 'default_billing', null, 'left')
            ->joinAttribute('billing_country_id', 'customer_address/country_id', 'default_billing', null, 'left');

        $this->setCollection($collection);

        return parent::_prepareCollection();
    }
   protected function _prepareColumns()
   {
        $this->addColumn('entity_id', array(
            'header'    => Mage::helper('customer')->__('ID'),
            'width'     => '50px',
            'index'     => 'entity_id',
            'type'  => 'number',
        ));
        $this->addColumn('firstname', array(
            'header'    => Mage::helper('customer')->__('First Name'),
            'index'     => 'firstname'
        ));
        $this->addColumn('lastname', array(
            'header'    => Mage::helper('customer')->__('Last Name'),
            'index'     => 'lastname'
        ));
        $this->addColumn('email', array(
            'header'    => Mage::helper('customer')->__('Email'),
            'width'     => '150',
            'index'     => 'email'
        ));
        $this->addColumn('usertype', array(
            'header'    => Mage::helper('customer')->__('User Type'),
            'width'     => '150',
            'index'     => 'usertype'
        ));
        $this->addColumn('action',
            array(
                'header'    =>  Mage::helper('customer')->__('Action'),
                'width'     => '100',
                'type'      => 'action',
                'getter'    => 'getId',
                'actions'   => array(
                    array(
                        'caption'   => Mage::helper('customer')->__('Edit'),
                        'url'       => array('base'=> '*/*/edit'),
                        'field'     => 'id'
                    )
                ),
                'filter'    => false,
                'sortable'  => false,
                'index'     => 'stores',
                'is_system' => true,
        ));

        $this->addExportType('*/*/exportCsv', Mage::helper('customer')->__('CSV'));
        $this->addExportType('*/*/exportXml', Mage::helper('customer')->__('Excel XML'));
        return parent::_prepareColumns();
    }
    public function getRowUrl($row)
    {
         return $this->getUrl('*/*/edit', array('id' => $row->getId()));
    }
} 
```

名字、姓氏、电子邮件正确显示，但用户类型的列未显示任何值。

我怎样才能做到这一点？

有可能解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:30:49.363

```
protected function _prepareColumns()
{
    $this->addColumn('entity_id', array(
        'header'    => Mage::helper('customer')->__('ID'),
        'width'     => '50px',
        'index'     => 'entity_id',
        'type'  => 'number',
    ));
    $this->addColumn('firstname', array(
        'header'    => Mage::helper('customer')->__('First Name'),
        'index'     => 'firstname'
    ));
    $this->addColumn('lastname', array(
        'header'    => Mage::helper('customer')->__('Last Name'),
        'index'     => 'lastname'
    ));
    $this->addColumn('email', array(
        'header'    => Mage::helper('customer')->__('Email'),
        'width'     => '150',
        'index'     => 'email'
    ));
    $this->addColumn('usertype', array(
        'header'    => Mage::helper('customer')->__('User Type'),
        'width'     => '150',
        'index'     => 'usertype'
    ));
    $this->addColumn('action',
        array(
            'header'    =>  Mage::helper('customer')->__('Action'),
            'width'     => '100',
            'type'      => 'action',
            'getter'    => 'getId',
            'actions'   => array(
                array(
                    'caption'   => Mage::helper('customer')->__('Edit'),
                    'url'       => array('base'=> '*/*/edit'),
                    'field'     => 'id'
                )
            ),
            'filter'    => false,
            'sortable'  => false,
            'index'     => 'stores',
            'is_system' => true,
    ));

    $this->addExportType('*/*/exportCsv', Mage::helper('customer')->__('CSV'));
    $this->addExportType('*/*/exportXml', Mage::helper('customer')->__('Excel XML'));

    // Changed lines here
    parent::_prepareColumns();
    return $this;
    // end of changed lines

} 
```

# java - 从子小部件调用面板的 add 方法

> ID：14957538
> 
> 赞同：0
> 
> 时间：2013-02-19T12:30:30.373
> 
> 标签：java, gwt

我创建了一个由 TextBox 和 Button 组成的 Composite 小部件。我在这里尝试实现的是，在小部件的 TextBox 中输入文本时，将此小部件的另一个实例添加到其父垂直面板中。为了实现这一点，我尝试了以下方法：

```
public void onKeyPress(KeyPressEvent event){
    if(event.getSource() == optionBox && optionCount>=2){
        getParent().add(new OptionWidget(optionCoutn+1));
    }
} 
```

但我收到一个错误：在 Widget 类中找不到“符号：方法 add(Widget)”。从中可以明显看出，这里没有调用 VerticalPanel 类的 add 方法。

我已经使用 UiBinder 模板将此小部件的两个实例添加到 VerticalPanel。

我应该怎么做才能调用 VerticalPanel 的 add 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:34:09.683

将结果转换`getParent`为`VerticalPanel`

```
VerticalPanel ParentPanel=(VerticalPanel)getParent();
ParentPanel.add(new OptionWidget(optionCoutn+1)); 
```

# asp.net-mvc - Sitecore MVC 渲染类型说明

> ID：14957541
> 
> 赞同：10
> 
> 时间：2013-02-19T12:30:42.017
> 
> 标签：asp.net-mvc, sitecore, sitecore6, sitecore-mvc

有人可以帮我澄清何时使用以下内容（它们看起来都与我相似且令人困惑）：

1.  项目渲染
2.  查看渲染
3.  控制器渲染
4.  方法渲染
5.  XSLT 渲染
6.  渲染参数
7.  任何其他

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-20T12:11:56.517

**项目渲染**

这是一种要求一段内容（一个项目）呈现自身的方式。内容包含有关它应该如何呈现的信息。

据我所知，这并没有被广泛使用，也没有很好的文档记录——但我相信该功能本身早于 Sitecore MVC。

在此处查看更多信息： [http ://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/06/MVC-Item-Renderings-in-the-Sitecore-ASPNET- CMS.aspx](http://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/06/MVC-Item-Renderings-in-the-Sitecore-ASPNET-CMS.aspx)

**查看渲染**

基本上这是一个剃刀视图。Sitecore 为视图提供默认控制器和模型。可以通过更改 mvc.getModel 管道来自定义模型。

当您想要呈现不需要任何重要业务或表示逻辑的项目内容时使用此选项。

**控制器渲染**

使用控制器渲染，您可以提供控制器、模型和视图。在您的渲染定义项中，您可以指定 Sitecore 应该使用什么操作来渲染组件。

当您需要渲染依赖外部数据和/或需要重要业务或表示逻辑的内容时，请使用此选项。与表单提交有关的任何事情都可能属于这一类。

**方法渲染**

将调用静态方法的返回值输出。

据我所知，这并没有被广泛使用，也没有很好的文档记录——我想它可以用于集成遗留内容。

在此处查看更多信息： [http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/03/More-Than-Anyone-Ever-Wanted-to-Know-About-方法-渲染-in-the-Sitecore-ASPNET-CMS.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/03/More-Than-Anyone-Ever-Wanted-to-Know-About-Method-Renderings-in-the-Sitecore-ASPNET-CMS.aspx)

**XSLT 渲染**

在 Sitecore MVC 页面上呈现 Sitecore XSLT。这种渲染类型与仅使用 XSLT 作为模板引擎（而不是 Razor）的视图渲染填充相同的空间。

如果您有一个不想重写的现有 Sitecore XSLT 组件库，请使用此选项。就我个人而言，我认为如果从头开始，则用于执行无/低逻辑组件的 View Renderings 更合适。

**网址渲染**

将 HTTP GET 请求的响应呈现到当前页面。

如果您需要筛选另一个系统的 HTML，请使用此选项。同样，这可以用作迁移旧站点时的过渡工具。在某些情况下可以用来避免尴尬的 iframe 综合症。

在此处查看更多信息： [http ://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/03/All-About-URL-Renderings-in-the-Sitecore- ASPNET-CMS.aspx](http://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/03/All-About-URL-Renderings-in-the-Sitecore-ASPNET-CMS.aspx)

**渲染参数**

这不是一种渲染类型，并且不提供单独渲染任何内容的工具。渲染参数用于控制渲染的行为。适用于上述所有渲染类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T16:12:13.523

希望这会有所帮助。

[尝试在Sitecore Presentation 组件参考](http://sdn.sitecore.net/upload/sitecore6/presentation_component_reference_sc61_a4.pdf#search=%22rendering%22)上阅读此参考

阅读第**2.4 节渲染**，它会启发您了解渲染的各个方面。

# php - 使用 php 从 mp3 转换为 ogg

> ID：14957544
> 
> 赞同：1
> 
> 时间：2013-02-19T12:30:48.750
> 
> 标签：php, ffmpeg, exec, mp4, ogg

我想将 mp3 文件转换为 ogg。我尝试了以下代码

```
exec("/usr/local/bin/ffmpeg -i 1.mp4 -vcodec libtheora -acodec libvorbis testjohn4545454.ogg",$output);
var_dump($output); 
```

但它不会转换文件，它只会返回`array(0) { }` ，只需要一点执行时间。

但是使用 ssh 命令时转换是成功的。

请给我解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:09:19.057

有趣的是，您想在自己的进程和**后台**执行此操作，否则您的 PHP 脚本将在等待转换完成时挂起。

编码：

`passthru("nohup /usr/local/bin/ffmpeg -i 1.mp4 -vcodec libtheora -acodec libvorbistestjohn4545454.ogg 1> /path/to/logfile.txt 2>&1 &");`

注意末尾的“nohup”和＆符号：这些应该可以满足您的要求。此外，您现在可以定期检查您的日志文件，以确保它正在执行您想要的操作。

最后，如果您愿意，请查看[此问题](https://stackoverflow.com/questions/11441517/ffmpeg-progress-bar-encoding-percentage-in-php)以创建进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:43:43.190

我曾经遇到过类似的问题，但我选择在 apache 可写文件夹中保存和读取文件（输入文件和输出转换文件）您还可以通过读取该目录来检查转换是否已经完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:46:02.143

你能检查一下你在 PHP 上的 disabled_functions 配置，看看 exec 是否不存在吗？此外，您可能希望启用所有[错误报告](http://www.php.net/manual/en/function.error-reporting.php)，然后尝试使用简单的 bash echo 执行 exec() 并查看它是如何进行的。如果一切顺利，请检查您是否使用了正确的文件，正如 Jamie 指出的那样，工作目录可能是错误的，所以使用绝对路径或相对路径，无论哪种最方便。用于检查当前工作目录是什么的 Unix 命令是`pwd`.

**编辑：**此外，[exec](http://www.php.net/manual/en/function.exec.php)有另一个警告`When safe mode is enabled, you can only execute files within the safe_mode_exec_dir`，因此请务必仔细阅读[手册](http://www.php.net/manual/en/function.exec.php)以了解其他问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-19T13:11:01.487

感谢您的答复。我使用`passthru()`而不是`exec()`它工作正常。

# task-parallel-library - NativeOverlapped 或 System.Threading.Overlapped 在 PFX IOTaskScheduler 中的哪些场景有用？

> ID：14957546
> 
> 赞同：1
> 
> 时间：2013-02-19T12:30:49.420
> 
> 标签：task-parallel-library, parallel-extensions, overlapped-io

我正在查看 PFX 团队的[Parallel Extensions Extras DLL](https://nuget.org/packages/MSFT.ParallelExtensionsExtras/)并看到一个使用[NativeOverlapped](http://blogs.msdn.com/b/pfxteam/archive/2010/04/09/9990424.aspx)和 System.Threading.Overlapped 方法的 IOTaskScheduler。

由于没有太多关于每个扩展何时有用的文档，因此由我来阅读源代码并确定何时应该使用给定的功能。

我什么时候使用 IOTaskScheduler 或 NativeOverlapped 功能？

[（直接链接到源代码）](http://code.msdn.microsoft.com/Samples-for-Parallel-b4b76364/sourcecode?fileId=44488&pathId=1961911776) [（本页底部的文档）](http://code.msdn.microsoft.com/ParExtSamples/Release/ProjectReleases.aspx)

# c# - 从代码隐藏在 SqlDataSource 中添加参数

> ID：14957549
> 
> 赞同：0
> 
> 时间：2013-02-19T12:30:55.020
> 
> 标签：c#, asp.net

我的页面上有一个网格，我想用存储过程提供的数据填充它，它有一些从 cookie 读取的参数。我不知道如何`SqlDataSource`动态添加参数并将其分配给网格？

```
 </telerik:RadScriptManager>
<telerik:RadAjaxPanel ID="RadAjaxPanel1" runat="server" Height="200px" 
    Width="715px">
    <telerik:RadGrid ID="RadGrid1" runat="server" AllowPaging="True" 
        AllowSorting="True" CellSpacing="0"  GridLines="None" 
        Height="533px" PageSize="7" AllowFilteringByColumn="True" 
        FilterItemStyle-Width="400px" DataSourceID="dsNew">
        <ClientSettings>
            <Selecting CellSelectionMode="None" />
            <Scrolling AllowScroll="True" UseStaticHeaders="True" />
        </ClientSettings>
        <AlternatingItemStyle BackColor="#CCCCCC" />
        <MasterTableView datasourceid="dsNew">
            <CommandItemSettings ExportToPdfText="Export to PDF" />
            <RowIndicatorColumn FilterControlAltText="Filter RowIndicator column" 
                Visible="True">
            </RowIndicatorColumn>
            <ExpandCollapseColumn FilterControlAltText="Filter ExpandColumn column" 
                Visible="True">
            </ExpandCollapseColumn>
            <EditFormSettings>
                <EditColumn FilterControlAltText="Filter EditCommandColumn column">
                </EditColumn>
            </EditFormSettings>
        </MasterTableView>
        <FilterItemStyle Width="400px" />
        <FilterMenu EnableImageSprites="False">
        </FilterMenu>
    </telerik:RadGrid>
    <asp:SqlDataSource ID="dsNew" runat="server" 
        ConnectionString="<%$ ConnectionStrings:DB_BankSafeDepositBoxesConnectionString %>" 
        SelectCommand="S_Boxes_StatusReport" SelectCommandType="StoredProcedure">
       <SelectParameters>
             <asp:CookieParameter Name="BranchID" CookieName="userauth" />
            </SelectParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:37:46.193

您可以按如下方式使用：-

```
 <SelectParameters>
        <asp:CookieParameter Name="email" CookieName="email_id" />
    </SelectParameters> 
```

MSDN 链接
[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.cookieparameter.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.cookieparameter.aspx)

# mysql - 数据库连接失败的 Magento 客户错误页面

> ID：14957550
> 
> 赞同：0
> 
> 时间：2013-02-19T12:30:56.830
> 
> 标签：mysql, .htaccess, magento, exception

如果 magento 系统遇到数据库问题，我需要将用户重定向到自定义页面`[any sql state error]`。

到目前为止，我无法找到一种方法来做到这一点。我应该覆盖任何核心类/方法还是可以使用`.htaccess`file. 如果我必须重写核心类/方法，我应该重写哪个模型方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:36:59.930

也许更好的方法是在 /errors/default/report.phtml 中编辑错误页面模板以告知客户问题。当发生任何 php 错误时，它还会显示您的内容。

# android - 在 Android 中存储大量图像的最佳方法是什么？

> ID：14957554
> 
> 赞同：0
> 
> 时间：2013-02-19T12:31:02.897
> 
> 标签：android, image, storage

我必须通过我的应用程序存储大量图像（大约 50,000 个）并且每个图像的大小约为 400KB。我想将所有这些图像存储在 SD 卡中，我可以，但我想以更好的方式做到这一点。因为我还需要加密/解密所有这些文件，当然还要取回。

所以请任何人指导我应该如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:53:18.307

大多数 Android 设备甚至没有这么多存储空间。如果您将这些图像存储在设备上，那么该设备将必须是价格更高的设备，这将使其超出您的大多数目标用户的范围（我假设它是农民等，从您的评论来看，它是为人们准备的来自农村）。

如果价格不是问题并且您必须将这些图像存储在设备上，那么这些可能会有所帮助：

*   [在android中存储图像的有效方法](https://stackoverflow.com/questions/3393494/efficient-way-to-store-images-in-android)
*   [将图像存储在 android 中的 SD 卡或 SQL lite DB 中的最佳做法是什么？](https://stackoverflow.com/questions/4539130/what-is-the-best-practice-store-images-in-android-in-sd-card-or-in-sql-lite-db)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:55:26.457

除了考虑不要将图像存储在设备上，因为它很大，您应该考虑将它们放入单个容器中以便于管理。如果您不打算更新设备上的图像集，您可以使用 ZIP 存档。如果您想即时更新映像，可以使用一些虚拟存储系统，例如我们的 Solid File System (SolFS)。SolFS 支持灵活的文件加密（整个存储和每个文件）、压缩和高级文件系统的其他功能。您可以下载完整的容器并在此之后轻松更新。

# ios - 使用 iOS 从 hp 打印机获取打印

> ID：14957557
> 
> 赞同：0
> 
> 时间：2013-02-19T12:31:08.933
> 
> 标签：ios, objective-c, ipad, printing

我正在尝试从我的 iPad 应用程序打印一个 pdf 文件，但我找不到任何东西。我检查了苹果空气打印机示例代码，但没有找到我的 HP 打印机 2100。我的打印机在 LAN 中。谁能帮我？我被困得很厉害，所以请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:34:21.867

在 iOS 中打印的唯一解决方案是使用 AirPrint API，并拥有支持它的打印机。

如果这是供您自己使用，您可以查看运行基于 PC 的 AirPrint 服务器，例如：[https ://stackoverflow.com/questions/12821703/how-to-use-linux-to-set-up-free- airprint-server-for-any-printer-from-ios-devices](https://stackoverflow.com/questions/12821703/how-to-use-linux-to-set-up-free-airprint-server-for-any-printer-from-ios-devices)（关闭的问题，但那里有一些信息）

# python - 双python版本和numpy问题

> ID：14957562
> 
> 赞同：1
> 
> 时间：2013-02-19T12:31:28.533
> 
> 标签：python, upgrade

我是 Python 的新手.. 如果我的问题太基本，请原谅.. 我想安装需要 Python2.7.* 的 iris（用于可视化 NWP 数据的软件）。我的 RHEL-6 机器上有 Python2.6.6。我已经下载了 Python 2.7.3 源代码并使用作为 python273 的软链接构建它，而不仅仅是 python 来访问这两个版本。我遵循了本论坛中提到的“make altinstall”过程。

我想安装 numpy 1.6+ 和 scipy0.11。现在的问题是： 1\. numpy 可以被旧版本的 python 访问，而不是 python 2.7.3 2\. scipy 没有安装..

请让我知道从哪里重新开始以及您需要哪些安装日志来进行故障排除？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:37:05.477

下载[NumPy](http://www.scipy.org/Download)并[从 source 安装它](http://www.scipy.org/Installing_SciPy/Linux)。查看[这些](http://www.iram.fr/IRAMFR/GILDAS/doc/html/gildas-python-html/node38.html)说明，这些说明解释了如何使用非默认 Python 安装 NumPy。

此外，RHEL6 需要 Python2.6 来处理类似的东西`YUM`，但普通用户实际上并不关心他/她是使用 Python2.6 还是 Python2.7，除非像您这样的情况。由于 RHEL 采用新库和应用程序的速度非常慢，因此我遇到了与您类似的问题。

如果您不想向所有用户提供此 iris 软件，请考虑以非 root 用户身份从源代码安装所有内容。

# python - Django 'if and' 模板

> ID：14957564
> 
> 赞同：13
> 
> 时间：2013-02-19T12:31:34.040
> 
> 标签：python, django

我想在我的 django html 页面中执行以下操作：

```
{% if myList|length and ifequal myValue 'somestring' %}
blah blah
{% endif %} 
```

但我得到错误： **未使用的'myValue'在if表达式的末尾**

如何在模板中执行 If AND？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-19T12:37:28.937

尝试这个：

```
{% if myList|length and myValue == 'somestring' %}
    blah blah
{% endif %} 
```

有关在 django 模板中使用[布尔运算符](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#boolean-operators)和[复杂表达式](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#complex-expressions)的信息，请参阅 django 文档。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-19T12:36:04.417

应该是这样的：

```
{% if myList|length and myValue == 'somestring' %}
   blah blah
{% endif %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-29T12:33:09.640

[关于布尔运算符的 Django 文档](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#boolean-operators)

> 应该是这样的
> 
> 1.  视图.py

```
def posts_request(request):  
    message=ApplyPost.objects.filter( blah blah)
    if message:
       return render (request,'blah.html',{'message':message}) 
```

> 2.  废话.html

```
{% if message %}
     {% for post in message %}
          {% if post.provider %}
              ....
          {% endif %}
          {% if post.accept == True and post.provider %}
              ...
              ...
          {% endif %}
          ....You can add multiple if,elif, with Operators ....
    {% endfor %}
{% if message %} 
```

> 和

```
{% if a == b or c == d and e %} 
```

请注意，and 的优先级高于 or，并且括号是不可能的。如果需要，使用嵌套块

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T12:36:00.900

我认为您可能必须将两个语句中的 the`if`和 the分开：`ifequal`

```
{% if myList|length  %}
     {% ifequal myValue 'somestring' %}
          blah blah
     {% endifequal %}
{% endif %} 
```

# python - 从 x=0 到 matplotlib 散点图中的数据点绘制水平线（水平茎图）

> ID：14957567
> 
> 赞同：2
> 
> 时间：2013-02-19T12:31:54.427
> 
> 标签：python, matplotlib, plot, ipython-notebook

考虑以下情节：

![在此处输入图像描述](../Images/17f08e266ce2bbb7436050cfe2c3dbea.png)

由这个函数产生：

```
def timeDiffPlot(dataA, dataB, saveto=None, leg=None):
    labels = list(dataA["graph"])
    figure(figsize=screenMedium)
    ax = gca()
    ax.grid(True)
    xi = range(len(labels))
    rtsA = dataA["running"] / 1000.0 # running time in seconds
    rtsB = dataB["running"] / 1000.0 # running time in seconds
    rtsDiff = rtsB - rtsA
    ax.scatter(rtsDiff, xi, color='r', marker='^')
    ax.scatter
    ax.set_yticks(range(len(labels)))
    ax.set_yticklabels(labels)
    ax.set_xscale('log')
    plt.xlim(timeLimits)
    if leg:
        legend(leg)
    plt.draw()
    if saveto:
        plt.savefig(saveto, transparent=True, bbox_inches="tight") 
```

这里重要的是值与 的正或负差异`x = 0`。更清楚地可视化这一点会很好，例如

*   强调 x=0 轴
*   从 x=0 到绘图标记画一条线

这可以用matplotlib完成吗？需要添加什么代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:27:14.463

正如 Rutger Kassies 所指出的，实际上有一些“茎”功能可以自动化我的其他答案中的“手动”方法。水平茎线的功能是`hlines()`（`vlines()`用于垂直茎条）：

```
import numpy
from matplotlib import pyplot

x_arr = numpy.random.random(10)-0.5; y_arr = numpy.arange(10)

pyplot.hlines(y_arr, 0, x_arr, color='red')  # Stems
pyplot.plot(x_arr, y_arr, 'D')  # Stem ends
pyplot.plot([0, 0], [y_arr.min(), y_arr.max()], '--')  # Middle bar 
```

的[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.hlines)在`hlines()`Matplotlib 网站上。

![带有水平茎杆的绘图](../Images/46761e97995db3a0b93794e6bebcf6bf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:45:38.867

（请参阅我的另一个答案，以获得更快的解决方案。）

Matplotlib 提供垂直的“茎”条：[http](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.stem) ://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.stem 。但是，我找不到`stem()`.

`plot()`尽管如此，通过重复调用（每个词干一个），仍然可以很容易地绘制水平词干条。这是一个例子

```
import numpy
from matplotlib.pyplot import plot

x_arr = numpy.random.random(10)-0.5; y_arr = numpy.arange(10)

# Stems:
for (x, y) in zip(x_arr, y_arr):
    plot([0, x], [y, y], color='red')
# Stem ends:
plot(x_arr, y_arr, 'D')
# Middle bar:
plot([0, 0], [y_arr.min(), y_arr.max()], '--') 
```

结果如下：

![带有水平茎杆的绘图](../Images/46761e97995db3a0b93794e6bebcf6bf.png)

但是请注意，正如 David Zwicker 指出的那样，当 x 在对数刻度上时，从 x = 0 绘制条形没有意义，因为 x = 0 在 x 轴的左侧无限远。

# android - 获取PhoneStateListener中播放铃声的名字

> ID：14957568
> 
> 赞同：0
> 
> 时间：2013-02-19T12:31:55.300
> 
> 标签：android, broadcastreceiver, android-cursoradapter, ringtone, phone-state-listener

从本质上讲，标题说明了一切。我希望能够在 phonestatelistener 类中检索当前正在播放的铃声。一种解决方案可能是简单地从 RingtoneManager 检索 DEFAULT URI，但如果播放自定义联系人铃声怎么办？

到目前为止我尝试过的强制性代码片段。他们都没有返回铃声。IsPlaying 总是错误的。

```
public static String getPlayingRingtone() {
    RingtoneManager m = new RingtoneManager(mCtx);
    Cursor rings = m.getCursor();
    for( int i = 0; i < rings.getCount(); i++ ) {
        Ringtone tone = m.getRingtone(i);
        if (tone.isPlaying() )
        Log.d("Playcallringtone", "**Is playing**" + tone.getTitle(mCtx));
    }
    return null;
} 
```

或者，我尝试过：

```
 Log.d("Playcallringtone", RingtoneManager.getRingtone(mCtx,
          RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE)).getTitle(mCtx) + " is playing"); 
```

我的Phonestatelistener如下：

```
private class MyPhoneStateListener extends PhoneStateListener {
    public void onCallStateChanged(int state,String number){
        switch(state){
        case TelephonyManager.CALL_STATE_IDLE:
                            // Do stuff for IDLE
            break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
                            // Do stuff of OFFHOOK
            break;
        case TelephonyManager.CALL_STATE_RINGING:
            getPlayingRingtone();
                            // Do stuff for RINGING
            break;
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:38:56.723

[ContactsContract.ContactOptionsColumns](http://developer.android.com/reference/android/provider/ContactsContract.ContactOptionsColumns.html#CUSTOM_RINGTONE)中有一个属性：`public static final String CUSTOM_RINGTONE`具有与联系人关联的自定义铃声的 URI。如果为 null 或缺失，则使用默认铃声。因此，当您获取号码时，在您的手机状态监听器中获取联系人对象并检查其**CUSTOM_RINGTONE**属性。如果它为空，则从`RingtoneManager`其他地方获取默认铃声，您可以获得联系人的自定义铃声。

# asp.net - Facebook OpenGraph 和 Asp.Net 应用程序

> ID：14957573
> 
> 赞同：0
> 
> 时间：2013-02-19T12:32:04.290
> 
> 标签：asp.net, facebook, facebook-opengraph

我们想向我们的 facebook 应用程序添加开放图形功能。我已经使用简单的烹饪食谱应用程序在 facebook.com 上遵循教程。当我只使用简单的 .html 页面来打开图形对象并将此页面放在公共托管上时，它可以正常工作。然后我尝试在我们的 asp.net 应用程序中实现它（它就像 facebook 的 flash 游戏的包装器）。我添加了 opengraphtest.aspx 网络表单，添加了教程中所有必需的元标记和脚本。现在当我使用调试工具时，我有警告：

![调试工具截图：](../Images/5d9cadac11d003f2a90e20be4d0bf906.png)

我有正确的图像尺寸、正确的标题和类型标签：

```
 <meta property="fb:app_id" content="557295941002570" /> 
  <meta property="og:type"   content="myappnamespace:recipe" /> 
  <meta property="og:url"    content="http://apps.facebook.com/myappnamespace/opengraphtest.aspx" /> 
  <meta property="og:title"  content="Sample Recipe Test" /> 
  <meta property="og:image"  content="http://mywebsite.com/og/cook.png" /> 
```

由于此警告，我无法测试此集成，每次我发布操作响应时都会返回错误：

```
"(#3502) Object at URL http://apps.facebook.com/myappnamespace/opengraphtest.aspx has og:type of 'website'. The property 'recipe' requires an object of og:type 'myappnamespace:recipe'. " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:42:51.097

您需要向您的应用程序（例如网站）添加有效的元 og:type。您可以在这里看到有效的对象类型： [https ://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/)

# jquery - jQuery 与 sfwObject 冲突

> ID：14957575
> 
> 赞同：0
> 
> 时间：2013-02-19T12:32:06.540
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery 创建选项卡 (www.jqueryui.com/tabs/)。我使用 jQuery v1.6.4

在同一页面中有一个用于上传文件的 sfwobject，它需要 adobe flash player。问题是它与 jQuery 冲突。我尝试了一些 noConflict 方法，但没有找到解决方案。

```
<script type="text/javascript">
  var _cssjQ = jQuery.noConflict();
    _ccsjQ(function() {
       _ccsjQ( "#tabs" ).tabs();
    });
</script> 
```

这里有两个与 sfwobject 相关的文件。

[http://www.thegamelounge.net/public/js/3rd_party/swfupload/swfupload.js](http://www.thegamelounge.net/public/js/3rd_party/swfupload/swfupload.js) [http://www.thegamelounge.net/public/js/3rd_party/swfupload/swfupload.sfw](http://www.thegamelounge.net/public/js/3rd_party/swfupload/swfupload.sfw)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:09:02.107

jQuery 没有冲突删除 $ 别名，如果您打算使用 $ 别名，则需要使用此表单：

```
(function($) {
  $(function() {
    // code using $ as alias to jQuery
    $( "#tabs" ).tabs();
  });
  /// other stuff that uses the $ alias can go here
  $(document).ready(function(){
    // other code
     $(document).click(function(){
        alert("howdy");
     });
  });
})(jQuery); 
```

这`ips.attach.js`使用 $ 别名，您需要将其包装在一个无冲突中，如上面的示例那样将 $ 传回 - 请小心，因为这也可能会从全局命名空间中删除其中的函数。

# php - Magento 如何在页面之间有不同的内容（不在 text_list 中）？

> ID：14957576
> 
> 赞同：1
> 
> 时间：2013-02-19T12:32:07.110
> 
> 标签：php, magento

我有几个静态页面需要进入magento，布局基本如下：

```
 [HOMEPAGE]

---------------------------------
|            <BODY>             |
|      -------------------      |
|      |    <HEADER>     |      |
|      -------------------      |
|      |      <NAV>      |      |
|      -------------------      |
|      |     | |         |      |
|      |  A  | |    M    |      |
|      |  S  | |    A    |      |
|      |  I  | |    I    |      |
|      |  D  | |    N    |      |
|      |  E  | |         |      |
|      |     | |         |      |
|      -------------------      |
|      |     <FORM>      |      |
|      -------------------      |
|      |    <BUTTONS>    |      |
|      -------------------      |
|      |    <FOOTER>     |      |
|      -------------------      |
|                               |
--------------------------------- 
```

该`main`区域将保存输入到管理cms中的内容，可以逐页更改，非常完美。

但是，我还需要在某些静态页面上稍微改变旁边的内容。但我不想在管理员的所见即所得编辑器中包含旁白和主要内容。我将如何实现这一目标？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:26:09.947

创建 CMS 页面时，您有一个“设计”选项卡，您可以在其中放置 xml。

您可以使用

```
 <remove name="blockname"/> 
```

删除您当前的块，然后

```
 <block type="module/path_name" name="blockname" template="module/path_name.phtml" /> 
```

在此处添加块示例：

```
<remove name="left.permanent.callout" />
<reference name="left">
<block type="core/template" name="mynewaside" template="aside/sometemplate.phtml" />
</reference> 
```

# c++ - 读取和显示opencv视频的程序无法正常工作

> ID：14957577
> 
> 赞同：0
> 
> 时间：2013-02-19T12:32:10.103
> 
> 标签：c++, opencv, codeblocks

我编写了这个视频以使用 CodeBlocks 在 OpenCV-2.4.2 中显示视频。到目前为止，文件编译得很好，但视频似乎没有播放，而且显示和显示窗口很小，我看到的只是最小化、最大化和关闭按钮。以下是我的代码，任何人都可以提供帮助吗？谢谢。

```
 using namespace cv;
     using namespace std;

     void info()
     {
         cout << "This program will accept input video with fixed lengths and produce video textures" << endl;
     }

     int main(int argc, char *argv[])
     {
         info();
         if(argc != 2)
         {
            cout << "Please enter more parameters" << endl;
            return -1;

         }

         const string source = argv[1];
         VideoCapture input_vid(source);
         if(! input_vid.isOpened())
         {
           cout << "Error: Could not find input video file" << source << endl;
           return -1;
         }

         const char* PLAY = "Video player";

         namedWindow(PLAY, 0);
         setWindowProperty(PLAY, CV_WND_PROP_AUTOSIZE,CV_WINDOW_AUTOSIZE);

         for(;;)
         {
           Mat frame;
           input_vid >> frame;
         }

          return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:39:48.493

您需要将框架推到窗口

```
imshow(PLAY, frame); 
```

# javascript - 使用 localStorage 后 JavaScript Array.indexOf() 失败

> ID：14957580
> 
> 赞同：2
> 
> 时间：2013-02-19T12:32:19.673
> 
> 标签：javascript, arrays, json, local-storage, indexof

我将项目从一个数组移动到另一个数组，只要它不存在，然后将其存储在`localStorage`

```
var queue = [];

function moveToQueue(item) {
    if(queue.indexOf(item) == -1) {
        queue.push(item);
        store();
    }
}

function store() {
    localStorage.myApp_queue = JSON.stringify(queue);
} 
```

当页面加载时，我调用我的加载函数。

```
function load() {
    if(typeof localStorage.myApp_queue != 'undefined') {
        queue = JSON.parse(localStorage.myApp_queue);
    }
} 
```

此时，我的界面显示`queue`我上次离开时​​的样子，但如果我再次尝试添加相同的项目，“queue.indexOf(item)”将失败。的内容与调用方法`queue`之前的内容不同。`store()/load()`

`console.log()`以下是我的页面重新加载前后的一些调用，以空的`queue`. 日志已添加到`moveToQueue`函数的开头

```
function moveToQueue(item) {
    console.log('adding to queue');
    console.log(item);
    console.log(queue[0]);
    console.log(queue.indexOf(item));
    ... 
```

初始负载：

```
adding to queue
e {id: 1, status: "A", title: "Comcar", $$hashKey: "004", $get: function…}
undefined
-1

adding to queue
e {id: 1, status: "A", title: "Comcar", $$hashKey: "004", $get: function…}
e {id: 1, status: "A", title: "Comcar", $$hashKey: "004", $get: function…}
0 
```

页面刷新后 - 我推送的项目已经在`queue`数组中

```
adding to queue
e {id: 1, status: "A", title: "Comcar", $$hashKey: "006", $get: function…}
Object {id: 1, status: "A", title: "Comcar", $$hashKey: "004"}
-1 
```

我在这里错过了什么，改变我的阵列是什么`localStorage`以及正在做什么。`JSON`

我可以看到日志将从存储返回的项目列为“对象”，而原始项目的“类型”（不太确定）“e”。

如果我`typeof`对两者都使用结果是“对象”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:37:59.673

`indexOf`如果它们是对象，将通过引用比较值，因此您的代码不适用于复杂对象（即散列、字典或其他）。如果您使用检查对象是否相等的函数，您甚至可以使您的代码适用于对象。你可以在这里找到这样的功能：[JavaScript 中的对象比较](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript)

在接下来的部分中，我已经放置了示例代码，您可以如何：

1.  使用`localStorage`.
2.  使您的代码适用于原语。
3.  使您的代码适用于复杂的对象。

**在 localStorage 中加载并保存**

```
//Saving array with specific "name" (key for the localStorage)
function saveArray(name, array) {
   localStorage.setItem(name, JSON.stringify(array));
}

//Loads specific array and deserialize it.
function loadArray(name) {
   return JSON.parse(localStorage.getItem(name));
} 
```

**对于原语：**

对于原语，您可以很容易地实现所需的功能（您的代码对于此类数据是正确的）：

```
//This method adds unique elements, which are not already in the array
Array.prototype.addUnique = function (item) {
   if (this.indexOf(item) < 0) {
      this.push(item);
   }
};

var array = [];
array.addUnique(1);
array.addUnique(2);
array.addUnique(1);
array.addUnique(3);
//The current content of the array is [1,2,3] because of the addUnique functionality
saveArray('myarray', array); 
```

当您重新加载页面时，请使用：

```
var array = loadArray('myarray'); //[1,2,3]
array.addUnique(6);
saveArray('myarray', array); 
```

现在在你`localStorage`的价值`array`将是`[1,2,3,6]`。

**对于对象**

如果您的数组中有更复杂的数据，例如键值对对象，请使用：

```
//Code from here:
//https://stackoverflow.com/questions/1068834/object-comparison-in-javascript
Object.prototype.equals = function(x) {
  var p;
  for(p in this) {
      if(typeof(x[p])=='undefined') {return false;}
  }

  for(p in this) {
      if (this[p]) {
          switch(typeof(this[p])) {
              case 'object':
                  if (!this[p].equals(x[p])) { return false; } break;
              case 'function':
                  if (typeof(x[p])=='undefined' ||
                      (p != 'equals' && this[p].toString() != x[p].toString()))
                      return false;
                  break;
              default:
                  if (this[p] != x[p]) { return false; }
          }
      } else {
          if (x[p])
              return false;
      }
  }

  for(p in x) {
      if(typeof(this[p])=='undefined') {return false;}
  }

  return true;
}

Array.prototype.exists = function (item) {
   var exists = false;
   this.forEach(function (e) {
      if (e.equals(item)) {
         exists = true;
         return;
      }
   });
   return exists;
};

Array.prototype.addUniqueObject = function (item) {
    if (!this.exists(item)) {
       this.push(item);
    }
};

var array = [];
array.addUniqueObject({ foo: 'bar' });
array.addUniqueObject({ foo: 'baz' });
array.addUniqueObject({ foo: 'bar' });
array.addUniqueObject({ foo: 'foobar' });
//The current content of the array is [{ foo: 'bar' }, { foo: 'baz' }, { foo: 'foobar' }] because of the addUniqueObject functionality
saveArray('myarray', array); 
```

当您重新加载页面时，您可以使用以下方法获取具有相同内容的数组：

```
loadArray('myarray');
//[{ foo: 'bar' }, { foo: 'baz' }, { foo: 'foobar' }] 
```

**笔记**

就像`equals`添加了方法一样`Object.prototype`，您创建的每个对象都将具有此方法！每个具有`addUnique`,`addUniqueObject`和的数组也是如此`equals`。

如果你不想要这个，你可以简单地重构一些这些方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:58:48.433

> 我在这里错过了什么，localStorage 和 JSON 做了什么来改变我的数组？

它不会改变你的数组（你的旧数组在卸载页面时丢失了）。它创建了一个全新的项目对象。如果您现在创建的项目看起来与您已经拥有的项目完全一样，它们仍然是两个不同的对象，并且通过引用比较它们（就像`indexOf`那样`===`）将产生`false`。

所以要么你需要改变你的构造函数，不构建新的，但重用旧的，或者你需要使用一个特殊的比较函数，例如通过它们的 id 告诉对象相等。

# android - 在 android 项目中导入 Google-Play-Services 会删除 R 文件

> ID：14957583
> 
> 赞同：0
> 
> 时间：2013-02-19T12:32:24.130
> 
> 标签：android, eclipse, google-maps, android-maps-v2, google-play-services

[在尝试按照此链接](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api/)的建议使用 google maps v2 进行应用程序时，我开始执行获取密钥的程序，然后按照导入 google play 服务的[程序](http://developer.android.com/google/play-services/setup.html)进行操作。但是当我在我的项目中导入库时，我发现 R 文件丢失了。谁能建议如何解决此错误。

**编辑**

代码和它的日志猫。

```
public class Maptest extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maplayout);
    }
} 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

然后是清单文件中给出的权限

```
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<permission
      android:name="com.curioussolutions.autoistdiary.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
    <uses-permission android:name="com.curioussolutions.autoistdiary.permission.MAPS_RECEIVE"/>

  <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/> 
```

`02-20 10:30:16.093: E/AndroidRuntime(21076): FATAL EXCEPTION: main 02-20 10:30:16.093: E/AndroidRuntime(21076): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable 02-20 10:30:16.093: E/AndroidRuntime(21076): at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source) 02-20 10:30:16.093: E/AndroidRuntime(21076): at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:271) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.view.LayoutInflater.rInflate(LayoutInflater.java:623) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.view.LayoutInflater.inflate(LayoutInflater.java:408) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.view.LayoutInflater.inflate(LayoutInflater.java:320) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.view.LayoutInflater.inflate(LayoutInflater.java:276) 02-20 10:30:16.093: E/AndroidRuntime(21076): at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.app.Activity.setContentView(Activity.java:1657) 02-20 10:30:16.093: E/AndroidRuntime(21076): at com.curioussolutions.autoistdiary.MainActivity.onCreate(MainActivity.java:25) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.app.ActivityThread.access$1500(ActivityThread.java:117) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.os.Handler.dispatchMessage(Handler.java:99) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.os.Looper.loop(Looper.java:130) 02-20 10:30:16.093: E/AndroidRuntime(21076): at android.app.ActivityThread.main(ActivityThread.java:3687) 02-20 10:30:16.093: E/AndroidRuntime(21076): at java.lang.reflect.Method.invokeNative(Native Method) 02-20 10:30:16.093: E/AndroidRuntime(21076): at java.lang.reflect.Method.invoke(Method.java:507) 02-20 10:30:16.093: E/AndroidRuntime(21076): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) 02-20 10:30:16.093: E/AndroidRuntime(21076): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600) 02-20 10:30:16.093: E/AndroidRuntime(21076): at dalvik.system.NativeStart.main(Native Method) 02-20 10:30:17.500: W/jdwp(21076): Debugger is telling the VM to exit with code=1 02-20 10:30:17.500: I/dalvikvm(21076): GC lifetime allocation: 2194 bytes`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:52:04.120

重新启动您的项目，运行干净并重建您的项目。如果问题仍然存在，请尝试检查其他文件中是否存在其他错误。如果问题仍然存在，请尝试编辑并保存 de AndroidManifest.xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:23:22.160

问题可能是这个。

```
com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source) 02-20 10:30:16.093: E/AndroidRuntime(21076): 
at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:271) 
```

因为我觉得你用过。

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment"/> 
```

它应该是。

```
 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/map"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 class="com.google.android.gms.maps.SupportMapFragment"/> 
```

Google play 服务库使用 SupportMapFragment 而不是 MapFragment。您还可以在他们的谷歌地图演示中看到他们使用了 SupportMapFragment。

# ruby - C“signed long long”的Ruby等价物

> ID：14957593
> 
> 赞同：3
> 
> 时间：2013-02-19T12:32:40.850
> 
> 标签：ruby, long-integer

Ruby 中是否有 C 类型“signed long long”的等价物？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T12:35:00.863

不; Ruby 自动转换为大整数对象 (Bignum) 以避免溢出。没有特定大小的整数类型。

# python - 在 Django 中使用 Q() 动态构建复杂查询

> ID：14957595
> 
> 赞同：6
> 
> 时间：2013-02-19T12:32:48.753
> 
> 标签：python, django, filter, django-queryset, django-q

[第一个例子：](http://bradmontgomery.net/blog/adding-q-objects-in-django/)

```
# ANDing Q objects
q_object = Q()
q_object.add(Q(), Q.AND)

# ORing Q objects
q_object = Q()
q_object.add(Q(), Q.OR) 
```

[第二个例子：](http://www.michelepasin.org/blog/2010/07/20/the-power-of-djangos-q-objects/)

```
>>> import operator
# create a list of Q objects
>>> mylist = [Q(question__contains='dinner'), Q(question__contains='meal')]
# OR
>>> Poll.objects.filter(reduce(operator.or_, mylist))
[<Poll: what shall I make for dinner>, <Poll: what is your favourite meal?>]
# AND
>>> Poll.objects.filter(reduce(operator.and_, mylist))
[] 
```

这种技术可能非常有用，例如在 eBay 上为带有条件过滤器的页面构建查询。

但是，据我所知，这件事没有记录在案，所以对于这件事有哪些最佳实践，不会从支持中删除，也不会混淆阅读我的代码的人？

ps
还有 - 将“&”运算符与 Q() 对象一起使用是不是很好的解决方案？在 Django-docs 中，我一无所获！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T13:05:29.283

检查[doc](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)
可以使用`&`or`operator.and_`来表示`'AND'`，或者更短：

```
>>> mylist = [Q(question__contains='dinner'), Q(question__contains='meal')]
# AND
>>> Poll.objects.filter(reduce(operator.and_, mylist))
# could be 
>>> Poll.objects.filter(*mylist) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:06:47.460

Q 用法是一个文档化的特性，并且是一个公共的 Django API。这确实意味着它是稳定的，并且根据 Django 向后兼容性策略不会消失。

[https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)

# ruby-on-rails - 尝试按摩数据时迁移中的未定义方法

> ID：14957597
> 
> 赞同：0
> 
> 时间：2013-02-19T12:32:57.440
> 
> 标签：ruby-on-rails

Rails 3\. 这是我的代码：

```
class AddForAutocompleteInShops < ActiveRecord::Migration
  def up
    add_column :shops, :for_autocomplete, :string
  end

  Shop.reset_column_information

  shops = Shop.all

  shops.each do |shop|
    shop.for_autocomplete = %(#{shop.name} #{shop.formatted_address})
    shop.save
  end

  def down
    remove_column :shops, :for_autocomplete
  end
end 
```

出现错误信息：

```
rake aborted!
An error has occurred, all later migrations canceled:

undefined method `for_autocomplete=' for #<Shop:0x007fba66be7af8>
/Users/abc/Sites/test/db/migrate/20130219121256_add_for_autocomplete_in_shops.rb:11:in `block in <class:AddForAutocompleteInShops>'
/Users/abc/Sites/test/db/migrate/20130219121256_add_for_autocomplete_in_shops.rb:10:in `each'
/Users/abc/Sites/test/db/migrate/20130219121256_add_for_autocomplete_in_shops.rb:10:in `<class:AddForAutocompleteInShops>'
/Users/abc/Sites/test/db/migrate/20130219121256_add_for_autocomplete_in_shops.rb:1:in `<top (required)>'
Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

我的代码有什么问题？我在 Rails 控制台中测试它工作正常。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:38:09.470

您的代码应该是`up`or`down`方法的一部分 - 而不是在迁移类的中间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:45:26.177

```
 class AddForAutocompleteInShops < ActiveRecord::Migration
      def up

        add_column :shops, :for_autocomplete, :string

        Shop.reset_column_information

        shops = Shop.all

        shops.each do |shop|
          shop.for_autocomplete = %(#{shop.name} #{shop.formatted_address})
          shop.save
        end
      end

      def down
        remove_column :shops, :for_autocomplete
      end
    end

Try this. 
```

# python - 使用 PIL 在 Python/Web.Py 中提供动态图像的正确方法

> ID：14957599
> 
> 赞同：0
> 
> 时间：2013-02-19T12:33:01.417
> 
> 标签：python, image, dynamic, python-imaging-library, web.py

我需要有一个 Python 文件，就像它是一个图像一样。即 Python 文件的路径将在网页的标签内使用。Python 文件将使用 PIL 动态创建图像（没有中间保存到文件）。

我正在使用 Python 2.7、Web.Py 和 PIL，并在 32 位 Windows XP 上进行开发，使用 WAMPSS Web 服务器，并使用最新的 Chrome。

我快到*了*。我认为。

这是我的 python 图像文件的简化示例：

```
#!/home/bin/python
# #############################################################################
import web, sys
from PIL import Image, ImageDraw, ImageFont
# #############################################################################
class debug:
    def GET(self):
        # drawing with PIL (Python Image Library)
        # create a new 256x256 pixel image surface (default is black bg)
        img = Image.new("RGB", (256, 256))
        # set up the new image surface for drawing
        draw = ImageDraw.Draw (img)
        # REMOVED - Image manipulation
        # Output the image to the browser
        sys.stdout.write('Status: 200 OK\r\n')
        sys.stdout.write('Content-type: image/png\r\n')
        sys.stdout.write('\r\n')
        img.save(sys.stdout, "PNG")
# #############################################################################
urls = ( '/debug.py', 'debug' )
app = web.application(urls, globals())
if __name__ == "__main__":
    app.run()
# ############################################################################# 
```

现在，这行得通……有点。

如果我直接在浏览器（本地 AMPSS 服务器）中查看此文件，它会显示图像。但是，与类似的 1k PNG 图像相比，显示/服务器需要很长时间（5 秒以上）。Chrome 控制台说它失败了（虽然我可以看到图像）

**我认为浏览器期待其他我没有发送的东西？**

当我在 JQuery 和 OnLoad 事件中使用此图像时，真正的问题就出现了。然后事情变得……奇怪……因为缺少更好的词。我似乎有事件（不是我的）在加载和显示后数秒内清除图像。

Chrome 控制台说在检索图像时 GET 失败（尽管它确实显示了图像，至少在 JS 中的某些东西使它再次消失之前！）

有趣的是，这个问题似乎没有出现在最新的 Firefox 中。在最新的 Opera 中加载时间被夸大了，但是 JS 并没有出现图像故障。在 IE8 中也一样

更令人困惑的是，我有两台 Windows XP（32 位）开发机器。其中之一不会发生 JS 故障。而且 Chrome 控制台没有列出任何故障！

我在此处在线放置了图像文件的演示：[LINKY](http://thebucketchallenge.com/debug.py) 以及我在此处使用此文件的开发页面：[LINKY](http://thebucketchallenge.com/) 如果您在白色图像持有者周围单击，Jquery/JS 将激活。

我不知道这是否适用于您的设置。我只是为了完整性而在这里链接。

关于我所缺少的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:55:04.587

在 web.py 中，您应该返回必须发送到浏览器的内容。也用于`web.header`设置 HTTP 标头。

保存图像`StringIO`并返回其内容：

```
import StringIO

# in GET(self):
web.header('Content-type', 'image/png')
buf = StringIO.StringIO()
img.save(buf, "PNG")
contents = buf.getvalue()
return contents 
```

# multithreading - 如何以有效的方式将 GPS 参数存储到数据库中？

> ID：14957600
> 
> 赞同：0
> 
> 时间：2013-02-19T12:33:04.913
> 
> 标签：multithreading, sqlite, gps

我正在尝试制作一个将 GPS 参数存储到 SQLite 数据库的应用程序。

我已经搜索了这一行中的帖子，最后我设法通过 SharedPreferences 将参数（字符串类型）传递给主要活动，这非常完美，我可以将位置保存到数据库中，但只能手动保存。我想在每次位置更改时在数据库中插入一行，所以我开始一个新代码尝试直接从 OnLocationChanged 方法访问数据库，但程序在开始时崩溃，我不知道错误在哪里。这是代码：

```
package com.example.trackinggps;
import com.example.trackinggps.GPSSQLiteHelper;
import android.os.Bundle;[..]//Hiden

public class MainActivity extends Activity {

    public Button Close;
    public int num=0;
    public LocationManager locationManager=null;    

    GPSSQLiteHelper usdbh = new GPSSQLiteHelper(this, "GPSTracking", null, 1);
    final SQLiteDatabase db = usdbh.getWritableDatabase();

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if(db!=null){
          Close = (Button) findViewById(R.id.button4);

          final LocationUpdateHandler lUH = new LocationUpdateHandler();

          locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

          locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1500,0, lUH);      

          Close.setOnClickListener(new OnClickListener(){ [..]//Impl. Hiden
          Close.setOnLongClickListener(new OnLongClickListener(){ [..]//Impl. Hiden
        }
    }

    public class LocationUpdateHandler implements LocationListener {

        @Override
        public void onLocationChanged(Location loc) {
            String lat = (String) Double.toString(loc.getLatitude());
            String lng = (String) Double.toString(loc.getLongitude());
            String acc = (String) Float.toString(loc.getAccuracy());
            String spd= (String) Float.toString(loc.getSpeed());
            String time=(String) Long.toString(loc.getTime());

            if(db!=null){
                db.execSQL("INSERT INTO GPSTracking (Id, Time, Longitude, Latitude, Accuracy, Speed ) " +"VALUES ("+ num +", '" + 
                    time + "' , '" + lat + "' , '" + lng + "' , '" + acc + "' , '" + spd + "')");

                num++;
            }
        }

        @Override
        public void onProviderDisabled(String provider) {}
        @Override
        public void onProviderEnabled(String provider) {}
        @Override
        public void onStatusChanged(String provider, int status, 
                Bundle extras) {}
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu){ [..]//Impl. Hiden
} 
```

Logcat 结果是这样的：

```
Shutting down VM
threadid=1: thread exiting with uncaught exception (group=0x40014760)
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.trackinggps/com.example.trackinggps.MainActivity}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)
    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:126)
    at android.app.ActivityThread.main(ActivityThread.java:3997)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:491)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
    at com.example.trackinggps.MainActivity.<init>(MainActivity.java:28)
    at java.lang.Class.newInstanceImpl(Native Method)
    at java.lang.Class.newInstance(Class.java:1424)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:58:05.257

我解决了。我已经在 OnLocationchanged 方法中实例化了数据库，以便程序工作：

```
 [..]

 public class MainActivity extends Activity {

 [..]   

         GPSSQLiteHelper usdbh = new GPSSQLiteHelper(this, "GPSTracking", null, 1);        
         SQLiteDatabase db = null;

    @Override   
        protected void onCreate(Bundle savedInstanceState) {

             [..]
         }

        public class LocationUpdateHandler implements LocationListener {

          @Override 
          public void onLocationChanged(Location loc) {

            db = usdbh.getWritableDatabase();

                [..]
          }
        [..]
        }

} 
```

# vb.net - DateTimepicker 不适用于 1 个特定日期

> ID：14957603
> 
> 赞同：0
> 
> 时间：2013-02-19T12:33:14.157
> 
> 标签：vb.net, datetime, dataset, reportviewer2008

我有一个 Windows 程序，它使用几个数据集来提取信息并将其放入表中。我使用了 2 个日期时间选择器`Datetimepicker1`和`Datetimepicker2`. 在我的命令按钮`Command Button 1`中，我有代码来运行并使用 Datetimepickers 填充数据表来填充参数。这很好用，但是在“2/16/2013”​​上它不起作用。看起来如果第一个数据集为空，它将取消报告的其余部分。我需要添加一个检查以查看数据集是否为 0，如果是则继续填充下一个数据集...我的代码在命令按钮下方...有什么想法吗？

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        If DateTimePicker1.Value > DateTimePicker2.Value Then
            MsgBox("Start Date cannot be greater than End Date!")
        Else

            Me.Package1TableAdapter.Fill(Me.DataSet.Package1, DateTimePicker1.Value, DateTimePicker2.Value.AddDays(1).AddSeconds(-1))

            Me.Package2TableAdapter.Fill(Me.DataSet.Package2, DateTimePicker1.Value, DateTimePicker2.Value.AddDays(1).AddSeconds(-1))

            Me.Package3TableAdapter.Fill(Me.DataSet.Package3, DateTimePicker1.Value, DateTimePicker2.Value.AddDays(1).AddSeconds(-1))

            Me.Package4TableAdapter.Fill(Me.DataSet.Package4, DateTimePicker1.Value, DateTimePicker2.Value.AddDays(1).AddSeconds(-1))

            Me.ReportViewer1.RefreshReport()
        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:53:14.400

你可以试试这个（伪代码不是带有VS的计算机）：

```
if (theDataSetYouWantToCheck.Tables[0].Rows.Count > 0)
{
    // Output to report...
} 
```

# javascript - JavaScript 单选按钮确认

> ID：14957604
> 
> 赞同：1
> 
> 时间：2013-02-19T12:33:21.753
> 
> 标签：javascript, validation, loops, radio-button, confirm

我正在尝试向现有函数添加一个函数或附加 JavaScript 以进行确认。单击提交按钮后，我将需要一个确认框，上面写着“您选择了（GCSE、A2 或 AS），这是正确的吗？” 应该有一个取消按钮来返回表单或一个允许提交表单的 OK。

这是代码，我做了一些研究，它说使用循环，我对此很陌生，所以我不知道该怎么做。

```
<head>
<title>Exam entry</title>
<script language="javascript" type="text/javascript">

function validateForm() {
var result = true;
var msg="";
if (document.ExamEntry.name.value=="") {
msg+="You must enter your name \n";
document.ExamEntry.name.focus();
document.getElementById('name').style.color="red";
result = false;
}

if(msg==""){
return result;
}
{
alert(msg)
return result;
}
}

</script>
</head>
<body>
<h1>Exam Entry Form</h1>
<form name="ExamEntry" method="post" action="success.html">
<table width="50%" border="0">
<tr>
<td id="name">Name</td>
<td><input type="text" name="name" /></td>
<tr>
<td id="subject">Subject</td>
<td><input type="text" name="subject" /></td>
</tr>
<tr>
<td id="examnumber">Examination Number</td>
<td><input type="text" name="examnumber" /></td>
</tr>
<tr>
<td><input type="radio" id="examtype" name="examtype" /> : GCSE<br />
<td><input type="radio" id="examtype" name="examtype"  /> : A2<br />
<td><input type="radio" id="examtype" name="examtype" /> : AS<br />
</tr>
<tr>
<td><input type="submit" name="Submit" value="Submit" onclick="return validateForm();"    />  </td>
<td><input type="reset" name="Reset" value="Reset" /></td>
</tr>
</table>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:52:40.460

像这样设置单选按钮的值：

```
<td><input type="radio" id="examtype" name="examtype" value="GCSE" /> : GCSE<br />
<td><input type="radio" id="examtype" name="examtype" value="A2" /> : A2<br />
<td><input type="radio" id="examtype" name="examtype" value="AS"/> : AS<br /> 
```

然后在您的函数中使用此脚本来验证表单或使其成为一个函数并从您的函数 validateForm 中调用它：

```
var checked = null;
var inputs = document.getElementsByName('examtype');
for (var i = 0; i < inputs.length; i++) {
          if (inputs[i].checked) {
           checked = inputs[i];
           break;
   }
}
if(checked==null)
{
    alert('Please choose an option');
    return false;
}
else{
    return confirm('You have chosen '+checked.value+' is this correct?');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:47:15.693

```
add this to your code#

    function confirmation() {

    for (var i=0; i < document.ExamEntry.examtype.length; i++)
       {
       if (document.ExamEntry.examtype[i].checked)
          {
            var answer = confirm(document.ExamEntry.examtype[i].value)

        if (answer){
            document.ExamEntry.examtype[i].checked = true;

        }
        else{
            document.ExamEntry.examtype[i].checked = false;

        }
          }
    }

    } 
```

然后添加到您的单选按钮

```
( value="a2" )
( value="a1" )
( value="G1" ) 
```

并且还要添加到您的单选按钮 (onclick="return Confirm();") 中，如果这不起作用，请记住将其放入所有单选按钮中。

# mule - Mule Servlet 端点

> ID：14957606
> 
> 赞同：0
> 
> 时间：2013-02-19T12:33:30.037
> 
> 标签：mule, mule-studio

在 Mule 中使用 Servlet 端点似乎很简单，但我在一些缺乏理解的情况下陷入了困境。为了获得更清晰的视图，我能否提供一个带有 servlet 端点的示例代码以及如何从 Java 应用程序调用它。

这是我的 Mule-config.XML。

```
<flow name="servletFlow1" doc:name="servletFlow1">
  <servlet:inbound-endpoint path="name" responseTimeout="10000"/>
  <echo-component doc:name="Echo"/>
</flow> 
```

问题：

1.  如何在浏览器中向该应用程序发送和获取请求。
2.  如果此应用程序部署在 Mule Standalone 服务器中，如何从 Java swing 连接到此应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:51:31.830

答案：

1.  假设您的 Web 应用程序通过 HTTP 进行侦听，请调用`http://localhost:{http.port}/{web-app-context-path}/{mule-servlet-context-path}/name`. 将其中的值替换为`{ }`与您相关的值。
2.  如果你在 Mule 中独立部署，最好不要使用 Servlet 传输，而更喜欢 HTTP 传输。要从 Java 应用程序发送 HTTP 请求，一个不错的选择是使用[Apache HTTP Client](https://hc.apache.org/httpcomponents-client-ga/index.html)。

# r - R中矩阵的多项式变换

> ID：14957608
> 
> 赞同：1
> 
> 时间：2013-02-19T12:33:38.153
> 
> 标签：r, matrix, transformation

也许是一个微不足道的问题，但作为 R 包 ptw 的输出，我有一组多项式系数（存储在 slot warp.coef 中），它们指定时间轴的多项式变换。例如

```
warpcoeff=c(-0.0001357075,1.000147,7.281139e-09,-8.870294e-13,-2.60201e-16,1.671129e-20) 
```

对于 5 阶多项式变换（但顺序可能会有所不同）。我现在有一个`x`包含时间值的矩阵，我想将这个多项式变换应用于该矩阵（依次应用于所有元素）。最简单和最快的方法是什么？（理想情况下，当 x 是向量或矩阵时，它都应该适用）

干杯，汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:13:59.327

如果您希望转换仅应用于矩阵的每个元素，那么您可以构造一个递归函数，如下所示：

```
my_fn <- function(x, w) {
    idx <- length(w)
    if (idx == 0) return(0)
    o <- x^(idx-1) * w[idx] + my_fn(x, head(w, -1))
}

x <- matrix(1:15, ncol=3)
o <- my_fn(x, warpcoeff)

> o
#          [,1]      [,2]     [,3]
# [1,] 1.000011  6.000747 11.00148
# [2,] 2.000158  7.000894 12.00163
# [3,] 3.000305  8.001041 13.00178
# [4,] 4.000452  9.001188 14.00192
# [5,] 5.000599 10.001335 15.00207 
```

或者，您可以`Reduce`用作：

```
Reduce('+', lapply(0:5, function(idx) x^idx * w[idx+1])) 
```

# python - 在python中对多维数组进行排序

> ID：14957611
> 
> 赞同：1
> 
> 时间：2013-02-19T12:33:47.123
> 
> 标签：python

我有一个数据结构，如：

```
[ ["id1", 123], ["id2", 1], ["id3", 6] ] 
```

我想根据第二个变量（降序）订购它，如下所示：

```
[ ["id1", 123], ["id3", 6], ["id2", 1] ] 
```

我可以为此编写一个小函数，但我几乎可以肯定有一种很酷的单行方式可以做到这一点，不是吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T12:36:45.150

您可以使用`sorted`and来做到这一点`itemgetter`：

```
>>> a = [ ["id1", 123], ["id2", 1], ["id3", 6] ]
>>> from operator import itemgetter
>>> sorted(a, key=itemgetter(1), reverse=True)
[['id1', 123], ['id3', 6], ['id2', 1]] 
```

如果您纯粹想要一个单线（不导入），那么您可以`lambda`：

```
>>> sorted(a, key=lambda L: L[1], reverse=True) 
```

# c# - Devexpress Pivot Grid ShowFieldList 命令 (MVVM)

> ID：14957612
> 
> 赞同：0
> 
> 时间：2013-02-19T12:33:50.307
> 
> 标签：c#, .net, wpf, mvvm, devexpress

在我的表单上，我有一个按钮，它应该显示 Devexpress 数据透视网格的字段列表。如何使用命令完成此操作？

我找到了以下[链接](http://documentation.devexpress.com/#WPF/DevExpressXpfPivotGridPivotGridCommandsMembersTopicAll)，但没有示例如何在 XAML 中绑定命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:13:48.610

尝试以下操作：

```
<Window x:Class="WpfApplication1.MainWindow"
  ...
  xmlns:dxpg="http://schemas.devexpress.com/winfx/2008/xaml/pivotgrid">
  <Grid>
     <dxpg:PivotGridControl x:Name="pivotGridControl1"
                 ...
             />
     <Button Content="Show Field List" 
                 VerticalAlignment="Top" HorizontalAlignment="Center"
                 Command="{x:Static dxpg:PivotGridCommands.ShowFieldList}" 
                 CommandTarget="{Binding ElementName=pivotGridControl1}"
             />
  </Grid>
</Window> 
```

# javascript - AngularJS：清除 $watch

> ID：14957614
> 
> 赞同：283
> 
> 时间：2013-02-19T12:33:52.810
> 
> 标签：javascript, angularjs, watch

我的 AngularJS 应用程序中有一个监视功能。

```
$scope.$watch('quartzCrystal', function () {
   ...
} 
```

但是，在某些情况下（在我的示例中，在我的[单页应用程序](https://en.wikipedia.org/wiki/Single-page_application)中更改页面）我想停止那个手表（就像清除超时一样）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：527
> 
> 时间：2013-02-19T12:37:48.157

`$watch`返回一个注销函数。调用它会注销`$watcher`.

```
var listener = $scope.$watch("quartz", function () {});
// ...
listener(); // Would clear the watch 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-02-19T12:37:33.110

scope.$watch 返回一个您可以调用的函数，该函数将取消注册手表。

就像是：

```
var unbindWatch = $scope.$watch("myvariable", function() {
    //...
});

setTimeout(function() {
    unbindWatch();
}, 1000); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-07-23T20:53:42.923

如果您想在发生某些事情后立即清除它，您也可以清除回调中的手表。这样，您的 $watch 将保持活动状态，直到使用为止。

像这样...

```
var clearWatch = $scope.$watch('quartzCrystal', function( crystal ){
  if( isQuartz( crystal )){
    // do something special and then stop watching!
    clearWatch();
  }else{
    // maybe do something special but keep watching!
  } 
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-18T10:00:18.893

有时你的 $watch 正在调用`dynamically`，它会创建它的实例，所以你必须在你的函数之前调用注销`$watch`函数

```
if(myWatchFun)
  myWatchFun(); // it will destroy your previous $watch if any exist
myWatchFun = $scope.$watch("abc", function () {}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-31T13:19:13.420

如果你有太多的观察者并且你需要清除所有它们，你可以将它们推入一个数组并`$watch`在循环中销毁每个。

```
var watchers = [];
watchers.push( $scope.$watch('watch-xxx', function(newVal){
   //do something
}));    

for(var i = 0; i < watchers.length; ++i){
    if(typeof watchers[i] === 'function'){
        watchers[i]();
    }
}

watchers = []; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-19T09:03:16.740

理想情况下，当您离开示波器时，应移除每个自定义手表。

它有助于更​​好的内存管理和更好的应用程序性能。

```
// call to $watch will return a de-register function
var listener = $scope.$watch(someVariableToWatch, function(....));

$scope.$on('$destroy', function() {
    listener(); // call the de-register function on scope destroy
}); 
```

# android - 双 SIM 卡检查互联网连接问题

> ID：14957617
> 
> 赞同：1
> 
> 时间：2013-02-19T12:33:56.517
> 
> 标签：android, dual-sim

我使用此代码检查 Internet 网络是否打开：

```
public boolean isNetworkOnline() {
        boolean status=false;
        try{
            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getNetworkInfo(0);
            if (netInfo != null && netInfo.getState()==NetworkInfo.State.CONNECTED) {
                status= true;
            }else {
                netInfo = cm.getNetworkInfo(1);
                if(netInfo!=null && netInfo.getState()==NetworkInfo.State.CONNECTED)
                    status= true;
            }
        }catch(Exception e){
            e.printStackTrace();  
            return false;
        }
        return status;

        } 
```

问题是，如果您使用 SIM 2 中的互联网 3g，这表示您没有打开互联网连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:35:56.920

试试下面的代码：

```
public static boolean isNetworkAvailable(Context context) {
        boolean outcome = false;

        if (context != null) {
            ConnectivityManager cm = (ConnectivityManager) context
                    .getSystemService(Context.CONNECTIVITY_SERVICE);

            NetworkInfo[] networkInfos = cm.getAllNetworkInfo();

            for (NetworkInfo tempNetworkInfo : networkInfos) {

                if (tempNetworkInfo.isConnected()) {
                    outcome = true;
                    break;
                }
            }
        }

        return outcome;
    } 
```

# apache - 在加载了乘客的 Mac OS X Mountain Lion 服务器上启动 Profile Manager 网站时出现 404

> ID：14957618
> 
> 赞同：0
> 
> 时间：2013-02-19T12:33:58.990
> 
> 标签：apache, osx-mountain-lion, passenger, osx-server

我的 Mac 上安装了 Mountain Lion 服务器，并为 Apache 安装了 Passenger。我还启用了配置文件管理器。

在启用乘客之前：

```
LoadModule passenger_module /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19
PassengerRuby /usr/local/bin/ruby 
```

在：/Library/Server/Web/Config/apache2/httpd_server_app.conf

我在运行 Profile Manager 网站时没有问题：[http](http://myserver.com/profilemanager/) ://myserver.com/profilemanager/ 。

现在 rails 站点工作正常，但是我在尝试进入 rails 应用程序时收到 404 `/profilemanager`。令我惊讶的是 /mydevices 工作正常。

这是我从 Apache 日志中得到的：

> example.com 10.0.1.2 - - [19/Feb/2013:13:17:54 +0100] "GET /profilemanager/HTTP/1.1" 404 431 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17（KHTML，如 Gecko）版本/6.0.2 Safari/536.26.17" example.com 127.0.0.1 - - [19/Feb/2013:13:18:01 +0100] "GET /auth/验证？auth_token=D0BB6EBE-EF58-47E3-9406-A8ED97920310

有什么问题？当我从配置文件管理器中删除每个文件`/Library/Server/Web/Config/apache2/sites`并重新启动时，该站点又回来了。一旦我重新启用 Web 服务器，就会得到 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:30:52.180

我遇到了同样的问题。我不相信它与 Rails 有任何关系。而是服务器配置问题。当您添加解析到与您的服务器相同的 IP 的虚拟主机时，它们似乎“屏蔽”了对配置文件管理器站点的访问。

我已确认从服务器工具中的 Web 服务器部分删除所有站点会恢复对 profilemanager 的访问。

我似乎可以从 OS X 服务器拥有 profilemanager 或服务器网站，但不能同时拥有两者。我敢肯定情况并非如此，所以如果有人知道正确的设置方法，请说出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:20:07.490

没关系，我已经拆分了主机名，server.example.com 仅指向服务器特定的站点。example.com 指向带有 rails 应用程序的文件夹。

# database-design - sql azure federations的外键约束在实际约束中是否需要tenantid？

> ID：14957621
> 
> 赞同：0
> 
> 时间：2013-02-19T12:34:08.890
> 
> 标签：database-design, azure, foreign-keys, azure-sql-database, federation

我知道这`tenantid`需要在您想要在 SQL Azure 联合中联合的所有表中。但是您真的需要将外键约束本身更改为具有`tenantid`+`actualPrimaryKey`吗？或者你可以只保留`actualPrimaryKey`实际外键约束中的唯一字段吗？

我读到“*除此之外，任何包含引用联合表的外键约束的表也需要`TenantId`添加并成为联合表。例如，假设我们有一个 Orders 表，我们决定制作一个联合表*”在这篇[博文](http://blogs.msdn.com/b/windowsazure/archive/2012/05/24/windows-azure-isv-blog-series-full-scale-180-tackles-database-scaling-with-windows-azure.aspx)中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:27:12.157

据我所知，是的，你必须这样做。

1.  在联邦表中，联邦列必须是主键，或者是主键的一部分。即如果我们有 OrderID 作为主键，如果我们需要通过 TenantID 联合这个表，新的主键必须是 OrderID + TenantID

2.  如果我们有 Order 相关的 OrderDetail 表，OrderID 的外键也必须改为 OrderID + TenantID，因为我们需要 OrderID + TenantID 来标识 Order 表中的记录。

# ios - 如何在我们的应用程序中从另一个应用程序读取 pdf？

> ID：14957625
> 
> 赞同：0
> 
> 时间：2013-02-19T12:34:16.610
> 
> 标签：ios, pdf, uidocumentinteraction

我想从支持 pdf（iBook 或其他）的各种应用程序中读取 pdf，并且我想在我们的应用程序中浏览该 pdf。

我怎样才能做到这一点？

请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:39:06.403

由于沙盒，您无法直接访问文件系统，但您可以实施自定义 URL 方案，允许用户在您的应用程序中从 Safari、Dropbox 等打开 PDF 文件。

# c - 查找 C 函数中的错误

> ID：14957626
> 
> 赞同：2
> 
> 时间：2013-02-19T12:34:18.763
> 
> 标签：c

此函数将布尔值转换为字符串。指出可能的运行时错误。

```
#define TRUE  1
#define FALSE 0

char* bool2Str(boolean x)
{
char result[5];

if (x == TRUE)
strcpy(result, "TRUE");

if (FALSE == x) 
strcpy(result, "FALSE");

return &(result[0]);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T12:37:35.250

1.  缓冲区溢出：“FALSE”是 6 个字节，包括`strcpy`将尽职地写入的空终止符，但只有 5 个空间。
2.  本地临时由函数的地址返回，使返回的值不可用（除了我想针对 NULL 测试它）。
3.  0 或 1 以外的值根本不会写入任何内容。与其他两个错误相比，这相形见绌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:41:26.277

好吧，如果调用者使用不同的布尔值调用它两次，第二次调用将覆盖第一次调用的结果，因为它是同一个变量（如果它是静态的）。

但是，该变量结果不是静态的，因此被调用者尝试返回一个指向局部变量的指针，该变量将在纳秒内超出范围，这通常是运行时错误/错误的良好来源。

另外，如果我是对的（不是 C 大师......），`strcpy (result,"FALSE")`复制六个字节到`result`while`result`只能容纳五个元素（索引 0 到 4）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:38:29.903

1.  数组结果的大小太短 - 它至少应该是 6
2.  该数组不应是堆栈数组。它需要是静态数组或动态分配的数组。
3.  没有布尔类型是 C。这是 typedef 吗？

# visual-studio - 在调试视图或全屏之外添加自定义视图

> ID：14957629
> 
> 赞同：1
> 
> 时间：2013-02-19T12:34:25.297
> 
> 标签：visual-studio, visual-studio-2012

我注意到当我进入全屏模式时，Visual Studio 可以更改工具箱和大小的视图设置。在`normal`模式下，我可以将解决方案视图放在某个宽度的左侧，并将输出窗口放在底部。在`Full Screen`视图中，我可以删除工具箱并仅查看设计视图。

例如，当我在笔记本电脑上使用它时，这非常有用。

还有一个`Debug view`，它打开了 Watch 窗口和 Call stack..

现在，我想要一个“演示视图”，这样我就可以轻松地在一堆打开的工具箱之间切换，只切换到解决方案视图和设计视图。我可以定义自己的这种观点吗？

# php - 无法使用 jQuery 表单插件 ajaxForm 发布特定数据

> ID：14957631
> 
> 赞同：3
> 
> 时间：2013-02-19T12:34:40.007
> 
> 标签：php, javascript, jquery, plupload, jquery-forms-plugin

我正在尝试使用这 2 个 jQuery 插件：[plupload](http://www.plupload.com)和[jQuery Form Plugin ajaxForm](http://malsup.com/jquery/form/)。

它工作正常，除了一件事：我无法发送以前使用 plupload 上传的文件的 file.name（使用 ajaxForm）。

我稍微解释一下：用户使用 plupload 发送一个文件。文件已上传。它工作正常。

然后，用户使用 ajaxForm 提交表单并使用 post 方法发送表单数据 + 文件名。

我知道如何使用 ajaxform 发送数据，这段代码可以正常工作：

```
var value1 = "dynamic_value1";
$('#my_form').ajaxForm({ 
        // datas is sent in post method, it works fine
        data: { value1: value1 }, 
        beforeSubmit: validate,
            success: function() { 
            // it's ok :
            //alert(value1);
        } 
    }); 
```

但是我不能用 pluplopad file.name 执行此操作，如果我发出警报但我无法发送它，我可以看到文件名：

Plupload 代码以获取文件名（有效）： var file_name_vous;

```
uploader.bind('FileUploaded', function(up, file, response) {

            // It's ok : i can get file name, alert show me the file name
            file_name_vous = encodeURIComponent(file.name);
            alert(file_name_vous);
        //};
    });
}); 
```

但我不能这样做，这段代码不起作用：

```
$participer_form.ajaxForm({ 
        type: 'POST',
        data: { 
        // impossible to send this var
        file_name_vous: file_name_vous
        }, 
        beforeSubmit: validate,

            // success 
            success: function() { 
                // It's ok, alert shows the file name 
                alert(file_name_vous);    
        } 
    }); 
```

所以我不明白，我可以用post方法发送数据，我已经测试过了。但我不能发送这个特定的 var：file_name_vous = encodeURIComponent(file.name);

你知道在尝试通过 post 方法发送之前我应该​​对 (file.name) 做些什么吗？

我没有错误，只是在萤火虫网络/XHR 中，我没有看到任何关于这个 var 的信息。如果我用 var value1 = "dynamic_value1" 替换这个 var，它就可以工作。所以我想，我的问题是关于这个partuliar var file.name

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:34:49.437

也许您应该省略 ajax 表单的数据部分，只需在成功上传后创建一个隐藏字段，该字段将与您的表单一起提交。

像这样的东西：

```
uploader.bind('FileUploaded', function(up, file, response) {

            // It's ok : i can get file name, alert show me the file name
            file_name_vous = encodeURIComponent(file.name);
            // maybe you'll have to check if hidden filed already exists
            $participer_form.Append($('<input type="hidden" value="'+file_name_vous+'" id="file_name_vous" name="file_name_vous"/>'));
        //}; 
```

希望这会有所帮助

顺便说一句，你有没有试过这个，尽可能晚地设置值？

```
uploader.bind('FileUploaded', function(up, file, response) {

            // It's ok : i can get file name, alert show me the file name
            file_name_vous = encodeURIComponent(file.name);
    $participer_form.ajaxForm({ 
            type: 'POST',
            data: { 
            // impossible to send this var
            file_name_vous: file_name_vous
            }, 
            beforeSubmit: validate,

                // success 
                success: function() { 
                    // It's ok, alert shows the file name 
                    alert(file_name_vous);    
            } 
        });
    }); 
```

# html - r - XMLNodeSet 上的 xpathApply（带有 XML 包）

> ID：14957632
> 
> 赞同：6
> 
> 时间：2013-02-19T12:34:41.577
> 
> 标签：html, r, web-scraping

我正在尝试使用 R 中 XML 包中的 xpathApply 函数从 html 文件中提取某些数据。但是，当我在 html 文档的某些父节点上使用 xpathApply 后，结果对象的类变为 XMLNodeSet，我无法在此类对象上进一步使用 xpathApply，因为出现此错误消息：“UseMethod("xpathApply") 中的错误：没有适用于“XMLNodeSet”类对象的“xpathApply”方法</p>

这是我试图复制我的问题的 R 脚本（这个例子只是一个简单的表，我知道我可以使用 readHTMLtable 函数，但我需要使用更底层的函数来工作，因为我的实际 html 比这个简单的更复杂桌子）：

```
library(XML)
y <- htmlParse(htmlfile)
x <- xpathApply(y, "//table/tr")
z <- xpathApply(x, "/td") 
```

这是“html文件”：

```
<table>
<tr>
<td> Test1.1 </td> <td> Test1.2 </td>
</tr>
<tr>
<td> Test1.3 </td> <td> Test1.4 </td>
</tr>
</table> 
```

使用 xpathApply 后是否有任何方法可以在节点上进一步工作？或者还有其他好的选择来处理节点中的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-18T14:12:26.310

尽管定义正确 xPath 的解决方案似乎更好，但您可以这样做：

```
library(XML)
y <- htmlParse(htmlfile)
x <- getNodeSet(y, "//table/tr")
z <- lapply(x, function(x){
                 subDoc <- xmlDoc(x)
                 r <- xpathApply(x, "/td")
                 free(subDoc) # not sure if necessary
                 return(r)
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:08:31.100

一旦你有了一个节点列表，你就可以在它上面应用函数来提取节点。函数如`xmlValue`or `xmlGetAttr`.... 例如：

```
x <- xpathApply(y, "//table/tr")
sapply(x,xmlValue)          ## it a list of nodes..
 " Test1.1  Test1.2 " " Test1.3  Test1.4 " 
```

这相当于做：

```
xpathSApply(y,"//table/tr",xmlValue)
" Test1.1  Test1.2 " " Test1.3  Test1.4 " 
```

**编辑**

我相信你的问题可以通过正确的 xpath 来解决。您应该像使用数据库一样学习使用 xml 文件。xpath 类似于 sql 查询。它速度很快，许多浏览器可以帮助您生成正确的 xpath。

例如 ：

```
 xpathSApply(y,"//table/tr[2]/td[1]",xmlValue) #  second tr and first td
 [1] " Test1.3 "
 xpathSApply(y,"//table/tr[2]/td[3]",xmlValue) #  second tr and third td 
```

**编辑**

如果他想复制 XML 结构，则 OP 看起来像（以相同的顺序获取 tr 和 td）

这是方法，我认为不是更有效的方法...

```
nn.trs <- length(xpathSApply(y,"//table/tr",I))
lapply(seq(nn.trs),function(i){
       xpathSApply(y,paste("//table/tr[",i,"]/td",sep=''),xmlValue)
})
[[1]]
[1] " Test1.1 " " Test1.2 "

[[2]]
[1] " Test1.3 " " Test1.4 " 
```

如果每个 tr 中的 td 数都相同，则可以替换`lapply`为`sapply`并得到：

```
 [,1]        [,2]       
[1,] " Test1.1 " " Test1.3 "
[2,] " Test1.2 " " Test1.4 " 
```

但我认为在这种情况下 readHtmlTable 更好..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:14:30.543

以下似乎工作。本质上，您必须搜索由返回的列表的元素`xpathApply`

```
> y <- htmlParse(htmlfile)
> x <- xpathApply(y, "//table/tr")
> x
[[1]]
<tr><td> Test1.1 </td> <td> Test1.2 </td>
</tr> 

[[2]]
<tr><td> Test1.3 </td> <td> Test1.4 </td>
</tr> 

attr(,"class")
[1] "XMLNodeSet"
> z <- xpathApply(x[[1]], "//td")
> z
[[1]]
<td> Test1.1 </td> 

[[2]]
<td> Test1.2 </td> 

[[3]]
<td> Test1.3 </td> 

[[4]]
<td> Test1.4 </td> 

attr(,"class")
[1] "XMLNodeSet" 
```

**PS：我不确定为什么它会搜索`x`list 的所有元素而不仅仅是`x[[1]]`. 似乎是一个错误。**

# javascript - javascript方法链接，从数组中添加方法

> ID：14957633
> 
> 赞同：1
> 
> 时间：2013-02-19T12:34:47.150
> 
> 标签：javascript, node.js, express, mongoose

嗨，我想知道您是否可以帮助我动态构建方法链，如果您知道如何，我怀疑这很容易做到……

使用 mongoose 和 node.js 我正在查询一个 mongo 数据库。我使用一个函数，我将一个对象传递给它，如下所示：

```
transaction = {
       model: a mongoose model
       req: Express.js request object
       res: Express.js response object
       query: a mongo db query eg, {_id:xxxxx}
       populate: [ {
         field: 'name_of_doc_field'
         select: 'field1,field2'
       } ]
    } 
```

我正在动态构建查询，并且在函数中我不知道需要填充多少字段，或者是否需要偏移量或限制。

我想链接我的发现：

```
transaction.model.find(transaction.query).skip(offset).limit(limit).exec(function(err, collection_obj){...}) 
```

我如何动态构建这个链，我需要测试是否在测试对象中提供了偏移量，是否将 .skip 方法添加到链等，并且使用 populate 方法，将有一个项目数组，该数组中的每个项目都需要一个新的填充方法添加到链中。

最后，我需要一个 exec 方法到链的末尾。

提前感谢您的帮助

```
// Generated by CoffeeScript 1.4.0
    module.exports = {
      findMany: function(transaction) {
        var collection_obj, limit, offset;
        offset = parseInt(transaction.req.query.offset) || 0;
        limit = parseInt(transaction.req.query.limit) || 100;
        collection_obj = null;
        return transaction.model.find(transaction.query).skip(offset).limit(limit).exec(function(err, collection_obj) {
          return found(err, collection_obj, transaction.req, transaction.res);
        });
      },
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:22:38.493

您可以将链分解为可以根据以下内容有条件地执行的步骤`transaction`：

```
var q = transaction.model.find(transaction.query);
if (offset) {
  q = q.skip(offset);
}
if (limit) {
  q = q.limit(limit);
}
if (transaction.populate) {
  transaction.populate.forEach(function(pop) {
     q = q.populate(pop.field, pop.select);
  });
}
q.exec(function(err, collection_obj){...}); 
```

# ios - 使用 shareKit 在 Twitter 上分享图片。短 URL 可见，而不是推文中的实际附加图像

> ID：14957636
> 
> 赞同：0
> 
> 时间：2013-02-19T12:34:54.000
> 
> 标签：ios, cocoa-touch, share, sharekit

我正在使用 shareKit 在 twitter 上分享一些东西。我通过使用成功发送推文（仅限）文本

```
 SHKItem *item = [SHKItem  text:@"sample tweet"];
[SHKTwitter shareItem:item]; 
```

我尝试使用推文附加 UIImage

```
SHKItem *item = [SHKItem image:[UIImage imageNamed:@"testImage.png"] title:@"posting test image"];
[SHKTwitter shareItem:item]; 
```

尽管它在推特上成功发布，但它没有在推文中显示实际图像，而是附加了一个缩短的 URL。即发布测试图像[http://img.ly/sMx0](http://img.ly/sMx0)

请告诉我做错了什么。有没有其他方法可以在推文中附加图像。我想给 iOS 兼容性 4.0 到 6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:07:53.010

[从源码](https://github.com/ideashower/ShareKit/blob/master/Classes/ShareKit/Sharers/Services/Twitter/SHKTwitter.m#L396)可以看出，SHKTwitter 总是将推文中的图片上传到 img.ly。没有其他选择；它仅在设置用户的个人资料图像时将图像直接上传到 Twitter。

不过，几乎只有 Twitter 的 Web 界面不会在推文中的 img.ly inline 上显示图像。大多数第三方客户端会像直接上传到 Twitter 的图像一样显示内联图像。

因此，您必须选择以下三个选项之一：

*   与 img.ly 一起生活。根据您上传的内容，这可能是一个更好的选择；Twitter 会使用一些苛刻的 JPEG 压缩来压缩每张上传的图像，而 img.ly 会将 PNG 保留为 PNG。
*   编写并提交一个补丁到 Share Kit 以使用 Twitter 自己的图像上传 API（我假设他们有一个）。
*   切换到[苹果自己的社交框架](https://developer.apple.com/library/ios/documentation/Social/Reference/Social_Framework)。如果需要支持 iOS 5，可以使用[Apple 的 Twitter 框架](http://developer.apple.com/library/ios/documentation/Twitter/Reference/TwitterFrameworkReference/)（Social 包括 Twitter 但需要 6）。如果您需要在 iOS 4 上拥有此功能，则 Apple 的任何一个框架都不是一个选项。

# android - 线性布局显示按钮不正确

> ID：14957637
> 
> 赞同：0
> 
> 时间：2013-02-19T12:34:54.570
> 
> 标签：android, xml, layout, android-linearlayout

在较小的设备（例如手机）上运行我的应用程序时，我的布局只是一个小问题，在平板电脑上它呈现得很好。其中一个按钮似乎被其他按钮“挤压”并垂直渲染。

这是问题区域的屏幕截图

![在此处输入图像描述](../Images/356cbc813174127dbfd2f874e9254b19.png)

我的xml如下。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="8dp"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="78dp"
            android:layout_height="78dp"
            android:layout_alignParentTop="true" />

        <TextView
            android:id="@+id/txtEventNameTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Event Name"
            android:textSize="19dp"
            android:textStyle="bold"
            android:layout_below="@+id/imageView1" />

        <TextView
            android:id="@+id/txtEventName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="16dp"
            android:layout_below="@+id/txtEventNameTitle" />

        <TextView
            android:id="@+id/txtEventDateTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Event Date"
            android:textSize="19dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtEventDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="16dp" />

        <TextView
            android:id="@+id/txtEventTimeTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Event Time"
            android:textSize="19dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtEventTime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="16dp" />

        <TextView
            android:id="@+id/txtEventLocationTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Event Location"
            android:textSize="19dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtEventLocation"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="16dp" />

        <TextView
            android:id="@+id/txtEventDetailsTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Event Details"
            android:textSize="19dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtEventDetails"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="16dp" />

  <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:measureWithLargestChild="true"
        android:orientation="horizontal"
        >

     <Button
            android:id="@+id/btnAddToCal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
                        android:layout_marginBottom="20dp"

            android:text="Add to Calendar" 
            android:layout_weight="1"/>

        <Button
            android:id="@+id/btnAddToMyEvents"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Add to my Events"
            android:layout_marginTop="20dp"

            android:layout_weight="1"
            android:layout_toRightOf="@+id/btnAddToCal"

            />

        <Button
            android:id="@+id/btnSendToTwitter"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Share"
            android:layout_marginTop="20dp"            
            android:layout_weight="1"
            android:minWidth="40dp"

            />
         <Button
            android:id="@+id/btnSendToMaps"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Get directions" 
                        android:layout_marginTop="20dp"

            android:layout_weight="1"
            android:layout_toRightOf="@+id/btnAddToMyEvents"

         />

   </LinearLayout>    

        <fragment
            android:id="@+id/map"
            android:layout_width="fill_parent"
            android:layout_height="300dp"
            class="com.google.android.gms.maps.SupportMapFragment"
            android:layout_marginBottom="10dp"
             />
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:38:56.967

如下更改您的代码。您没有`weightSum`像设置按钮那样设置`wrap_content`，这是使按钮以错误方式显示的问题。

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:measureWithLargestChild="true"
        android:orientation="horizontal"
        android:weightSum="4">
 <Button
        android:id="@+id/btnAddToCal"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
                    android:layout_marginBottom="20dp"

        android:text="Add to Calendar" 
        android:layout_weight="1"/>

    <Button
        android:id="@+id/btnAddToMyEvents"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Add to my Events"
        android:layout_marginTop="20dp"

        android:layout_weight="1"
        android:layout_toRightOf="@+id/btnAddToCal"

        />

    <Button
        android:id="@+id/btnSendToTwitter"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Share"
        android:layout_marginTop="20dp"            
        android:layout_weight="1"
        android:minWidth="40dp"

        />
     <Button
        android:id="@+id/btnSendToMaps"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Get directions" 
                    android:layout_marginTop="20dp"

        android:layout_weight="1"
        android:layout_toRightOf="@+id/btnAddToMyEvents"

     />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:44:25.827

将参数 'android:weightSum="4"' 添加到您的线性布局

# android - android 电源管理、睡眠模式等

> ID：14957645
> 
> 赞同：2
> 
> 时间：2013-02-19T12:35:34.447
> 
> 标签：android, sleep, power-management

我很难理解 android 设备的电源管理最佳实践和睡眠模式状态。

1.  睡眠模式。

    1.1）什么时候会发生？

    1.2) CPU 将要休眠并且我的线程处于挂起状态？这什么时候会发生？

    1.3) 为了防止 CPU 休眠，我可以使用 PARTIAL_WAKE 唤醒锁或警报管理器吗？什么电池最适合？

    1.4) 如何通过我的应用程序以编程方式防止 WiFi 和 3G 连接在睡眠模式下关闭？

PS 是的，我知道这对电池寿命不利！我试图找到最好的妥协...

1.  我写我的即时通讯应用程序。我需要与服务器建立持久连接。如何实现这一目标的最佳方式？关闭屏幕约 20-30 分钟后，我失去了互联网连接，但 Skype 保持在线。他们是怎么做到的？

2.  我知道 C2DM 框架。但是从服务器到应用程序是单向的。如何最好地为我使用它？服务器必须知道客户端真正连接！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:09:23.840

> 这什么时候会发生？

屏幕关闭后的某个时间，根据用户对不活动的设置。

> CPU 将要休眠并且我的线程处于挂起状态？

是的。

> 这什么时候会发生？

你已经问过了。

> 为了防止 CPU 休眠，我可以使用 PARTIAL_WAKE 唤醒锁或警报管理器吗？

`AlarmManager`可能会导致手机从睡眠模式中唤醒，但只是非常短暂。A 首先`WakeLock`防止设备进入睡眠模式。

> 如何从我的应用程序以编程方式防止在睡眠模式下关闭 WiFi 和 3G 连接？

使用 a`WifiLock`防止 WiFi 无线电关闭。电话收音机不受睡眠模式的影响。

> 如何实现这一目标的最佳方式？

如果用户没有主动使用设备，则允许终止连接。根据定义，如果他们的设备睡着了，他们就不会参与 IM 会话。

> 我知道 C2DM 框架

这已被具有相同基本特征的 GCM 取代。

# mpmovieplayercontroller - 如何在 UITableView 中使用视频图像显示视频文件？

> ID：14957646
> 
> 赞同：0
> 
> 时间：2013-02-19T12:35:34.580
> 
> 标签：mpmovieplayercontroller, alassetslibrary, mpmediapickercontroller

我可以使用 访问媒体文件`MPMediaPickerController`，我需要列出我从选择器中选择的所有视频。

`MPMoviePlayerViewController`正在使用，我已经为每个单元格添加了一个播放器，但我不能将它用于多个单元格。我认为！在 UITableView 上选择 UITableViewCell 时，我们需要使用它。但是如何在所有单元格的 tableview 中显示视频（足迹）的缩略图或图像。

**目标**：一旦我列出足迹，在选择时我会使用`MPMoviePlayerViewController`选择。

谢谢，文卡塔劳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:54:00.863

*   存储所选视频的 ALAsset URL

*   使用所有选定的视频缩略图加载 UITableView（使用 ALAsset URL）。

*   UITableView didSelectRowAtIndexPath，从本地目录中检索 ALAsset url 并通过 MPMoviePlayerViewController 播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:37:29.270

任务是：

1.  清单
2.  播放

方法：

1.  我们可以列出如果我们可以访问`ALAsset`（通过`assetURL`），我们可以获得 thumbNail 并使用 on `UITableView`。我们可以在视图上放置自定义播放按钮。选择后，我们使用`MPMoviePlayerViewController`从选定的assetURL 组织文件
2.  使用 UIWebView，我们嵌入`UIWebview`并`UITableViewCell`传递assetURL。为 webWiew 指定嵌入类型 un HTML 字符串，`application/x-shockwave-flash`它将用于`MPMoviePlayerViewController`在选择时组织文件。

谢谢&问候， Venkatatarao N

# java - 如何获得阶乘值

> ID：14957658
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:36:17.967
> 
> 标签：java, apache-commons, factorial

我想得到一个数字的阶乘值。我在 wiki 中读到我可以期待 5 的结果！为 5x4x3x2x1 = 120。现在我怎样才能在 Java 中得到它？

```
BigFraction g = new BigFraction(5);
System.out.println(g.getNumerator()); 
```

这仅打印 5 个。

最后我想计算网络中的组合：

![网络](../Images/06a19991ee8eacd0c57c91b0fa77126d.png)

其中有以下公式：

![来自维基的例子](../Images/f294be9073c861c97d3bcc2d98bedf34.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:39:46.440

您似乎混淆了*[分数](http://en.wikipedia.org/wiki/Fraction_%28mathematics%29)*和*[阶乘](http://en.wikipedia.org/wiki/Factorial)*。

如果你想要*阶乘*，你可以使用[ArithmeticUtils.factorial](http://commons.apache.org/math/apidocs/org/apache/commons/math3/util/ArithmeticUtils.html#factorial%28int%29)：

```
long factorial = ArithmeticUtils.factorial(5);
System.out.println(factorial); // "120" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:40:25.277

使用番石榴的[`BigIntegerMath`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/math/BigIntegerMath.html).

计算阶乘，即`n!`：

```
BigInteger factorial = BigIntegerMath.factorial(n); 
```

计算二项式即`n! / (k! (n - k)!)`：

```
BigInteger binomial = BigIntegerMath.binomial(n, k); 
```

（和的类似功能分别在`int`和`long`中可用。）[`IntMath`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/math/IntMath.html)[`LongMath`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/math/LongMath.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:42:00.140

顺便说一句，为什么不使用简单的旧公式：

```
x=n*(n-1)/2 
```

其中n是顶点数。

对于这个简单的任务，您不必使用计算密集型函数作为阶乘...

# facebook - Facebook 测试用户和身份验证

> ID：14957668
> 
> 赞同：5
> 
> 时间：2013-02-19T12:36:49.017
> 
> 标签：facebook, email, testing, dialog, updates

我有一个项目，我正在使用 Selenium 来测试 Facebook 身份验证。我创建了一个 Facebook 应用，在这个应用中创建了一个测试用户，并使用 Facebook 登录创建了一些测试。直到现在，它还在工作。但是在过去的两周里，Facebook 发生了一些变化，我的测试失败了。这是由于权限对话框中的界面更改（我通过他的 id 定位按钮）。第二个问题是我没有从 Facebook 测试用户那里获得电子邮件地址，而是一个长度超过 75 个字符的代理电子邮件（我的 db 字段长度在我正在使用的框架中被硬编码）。

如果我以普通用户身份登录，它工作正常，我得到这个权限框：

![在此处输入图像描述](../Images/7c8d168c49fd2278fdb32c486ab8508d.png)

但是当我以我创建的测试用户身份登录时（通过应用程序开发人员角色中的“切换到”），我得到了这个框：

![在此处输入图像描述](../Images/02cf49ef2a88ebe95eb19b510ca46a71.png)

我在大约 2 周前对其进行了测试，但这仍然有效。今天它变了。所以我的问题：

*   如何取回测试用户的旧权限框？
*   我怎样才能获得真实的电子邮件地址而不是代理？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:24:55.813

我在使用 Auth Dialog 时遇到了同样的问题。我尝试了一些具有各种设置的新旧应用程序，包括三月/四月。2013 Breaking Changes 启用/禁用，但没有帮助。
但是，我想我可以帮助您解决电子邮件问题。当您以测试用户身份登录并进入帐户设置页面时，您将看到测试用户的主要电子邮件地址。默认情况下，这应该很长，就像我附上的图片一样。

![facebook 测试用户的默认电子邮件地址配置](../Images/53e34a7a0daf9241cf6b2bf49e2d9309.png)

Facebook 平台返回此[主要电子邮件地址](https://developers.facebook.com/docs/reference/login/email-permissions/)。如果您使用您的测试用户帐户通过 Auth Dialog 并查看[隐私设置页面](http://www.beta.facebook.com/settings?tab=applications)，您会发现默认的主电子邮件地址已与应用程序共享。您必须为测试用户提供一个新的电子邮件地址，并通过[帐户设置页面](https://www.beta.facebook.com/settings?tab=account)将新的电子邮件地址设置为主要电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:38:49.293

## 为什么[登录对话框](https://developers.facebook.com/docs/concepts/login/)与测试用户不同？

通过您的测试用户，您可以看到登录对话框的未来。事实上，这不是*“不工作”*，但这是 2012 年 12 月发布的更新。让我引用：

> 我们的登录对话框已经过重新设计，以便更容易理解应用程序请求的权限。我们简化了演示文稿，并更新了我们的语言以提高清晰度。
> 
> “基本信息”已重命名为“公共个人资料和朋友列表”，以反映共享的内容。访问您的公开个人资料的应用程序会获取您的姓名、个人资料图片、年龄范围、性别、语言、国家和其他公开信息。

资料来源：[为人们提供更大的清晰度和控制力，*developers.facebook.com /blog*](https://developers.facebook.com/blog/post/2012/12/12/providing-people-greater-clarity-and-control/)

您没有与普通用户见面的原因是 Facebook 不会同时更新每个人。他们会根据国家/地区、帐户类型或我忽略的一些其他参数部分启动更新。

**专用于开发人员帐户的部分更新（[统一消息 FQL 表）示例：](http://developers.facebook.com/docs/reference/fql/unified_message/)**

> 仅在新的消息传递系统广泛可用之前，我们才为注册的开发者帐户提供对该 API 的早期访问。您应该在当前时间将消息表用于生产应用程序。

在我们的例子中，我们现在知道测试用户可以访问更新，但也有人说：

> 作为 iOS6 集成的一部分，我们已经推出了许多这些改进，现在正在更广泛地推广它们。

* * *

## 关于代理电子邮件

事实上，代理电子邮件是任何用户保持其真实电子邮件匿名的一种方式。您*必须*考虑代理电子邮件。

1.  加入应用程序时，用户可以在真实电子邮件和代理电子邮件之间进行选择：![代理电子邮件选择](../Images/498b5e6a7981378985d38aada528dd6a.png)

2.  您需要期待的其他事情是用户在连接到您的应用程序时**没有验证他们的帐户**，这种情况可能如此[处](https://stackoverflow.com/questions/8630698/getting-user-information-email-specificlyy-before-he-verified-his-email/8631723#8631723)和[此处](https://stackoverflow.com/questions/9873298/fbconnect-returns-proxied-email-address)所述。

3.  那么，为什么测试用户会返回代理邮件呢？因为测试用户（作为机器人并且拥有虚假电子邮件）**没有验证他们的电子邮件**。

您会看到，在至少 3 种情况下（最后，测试用户是一个很好的例子），您需要处理这些代理电子邮件。它们是开发人员[偶然](https://stackoverflow.com/a/3243213/1515819)或[偶然](https://stackoverflow.com/questions/14748892/facebook-return-proxy-email-instead-of-primary-email-starting-7-2-2013)遇到的，不容忽视。对于您的情况，您仍然可以尝试禁止拥有代理电子邮件的测试用户访问您的应用程序。但是您*应该*接受他们，而不应该强迫他们分享他们的原始电子邮件地址。更好的解决方案是验证测试用户的电子邮件：

1.  连接到提供代理电子邮件的测试用户帐户
2.  [添加电子邮件地址](https://www.facebook.com/settings?tab=account&section=email&view)（此处需要密码），
3.  转到电子邮件邮箱并单击验证链接，
4.  将新的电子邮件地址设置为主，
5.  测试用户现在应该提供他的原始电子邮件，而不是代理了！

# android - 在选项卡键请求上关注微调器-Android

> ID：14957673
> 
> 赞同：2
> 
> 时间：2013-02-19T12:37:01.857
> 
> 标签：android, android-layout

我有一个注册表单，其中流程为 EditText1->EditText2->Spinner->Editext3 ，但在选项卡上按下 EditText2 控件被转移到 editText3 而不是 Spinner 我怎么能在 android 中做到这一点？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:55:22.530

在您的 Oncreate() 之前使用它

```
Spinner spin = (Spinner) findViewById(R.id.spinner1); 
spin.setFocusable(true); 
spin.setFocusableInTouchMode(true);
spin.requestFocus(); 
```

# ftp - Spring集成：jms到ftp

> ID：14957679
> 
> 赞同：0
> 
> 时间：2013-02-19T12:37:23.690
> 
> 标签：ftp, jms, activemq, spring-integration

我是 Spring Integration 的新手，在尝试发现它提供的所有功能时，发现自己对它的一些语法有点迷茫。

让我解释一下我需要什么，以及我认为这是实现它的方式。

我有一个将消息发送到 ActiveMQ 队列（标准 jms）的外部进程，我确实需要一个产品

*   从队列中接收消息
*   转换和组合消息（发送 1 个文件和 100 条消息，而不是 100 个文件和 1 条消息）
*   将结果传送到 ftp 服务器

所以，我相信要做到这一点，我需要：

1.  jms 入站通道
2.  服务聚合器（我需要将 100 条消息合二为一）
3.  ftp出站通道

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:42:37.697

对于#2，您可以使用`<file:outbound-channel-adapter/>`APPEND 到文件，然后使用其他一些标准来确定何时将该文件发送到`<ftp:outbound-channel-adapter/>`.

您还可能会发现使用 a`<jms:message-driven-channel-adapter/>`而不是轮询入站适配器更好。

# java - 如何在android中使用JSON数组在测验中随机提问？

> ID：14957682
> 
> 赞同：0
> 
> 时间：2013-02-19T12:37:34.090
> 
> 标签：java, android, json, random

我开发了一个测验，其中存储了 50 个问题，我希望它在每次用户玩时随机显示在测验中。我该怎么做？是否可以使用 json 随机化问题？请帮助我..我真的很感谢你的帮助..谢谢。

```
public class Question1 extends Activity {

Intent menu = null;
BufferedReader bReader = null;
static JSONArray quesList = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.question10);

    Thread thread = new Thread() {
        public void run() {
            try {
                Thread.sleep(1 * 1000);
                finish();
                loadQuestions();
                Intent intent = new Intent(Question1.this,
                        Question2.class);
                Question1.this.startActivity(intent);
            } catch (Exception e) {
            }
        }
    };
    thread.start();

}

private void loadQuestions() throws Exception {
    try {
        InputStream questions = this.getBaseContext().getResources()
                .openRawResource(R.raw.questions);
        bReader = new BufferedReader(new InputStreamReader(questions));
        StringBuilder quesString = new StringBuilder();
        String aJsonLine = null;
        while ((aJsonLine = bReader.readLine()) != null) {
            quesString.append(aJsonLine);
        }
        Log.d(this.getClass().toString(), quesString.toString());
        JSONObject quesObj = new JSONObject(quesString.toString());
        quesList = quesObj.getJSONArray("Questions");
        Log.d(this.getClass().getName(),
                "Num Questions " + quesList.length());
    } catch (Exception e) {

    } finally {
        try {
            bReader.close();
        } catch (Exception e) {
            Log.e("", e.getMessage().toString(), e.getCause());
        }

    }

}

public static JSONArray getQuesList(){

    return quesList;

} 
```

}

```
public class Question2 extends Activity {
/** Called when the activity is first created. */

TextView question, items = null;
RadioButton answer1 = null;
RadioButton answer2 = null;
RadioButton answer3 = null;
RadioGroup answers = null;
int selectedAnswer = -1;
int quesIndex = 0;
int numEvents = 0;
int selected[] = null;
int correctAns[] = null;
boolean review = false;
Button next = null;
int score;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.startquiz);

    try {

        items = (TextView)findViewById(R.id.displayitems);
        question = (TextView) findViewById(R.id.displayquestion);
        answer1 = (RadioButton) findViewById(R.id.option1);
        answer2 = (RadioButton) findViewById(R.id.option2);
        answer3 = (RadioButton) findViewById(R.id.option3);
        answers = (RadioGroup) findViewById(R.id.QueGroup1);

        next = (Button) findViewById(R.id.selected);
        next.setOnClickListener(nextListener);

        selected = new int[Question1.getQuesList().length()];
        java.util.Arrays.fill(selected, -1);
        correctAns = new int[Question1.getQuesList().length()];
        java.util.Arrays.fill(correctAns, -1);

        this.showQuestion(0, review);

    } catch (Exception e) {
        Log.e("", e.getMessage().toString(), e.getCause());
    }

}

private void showQuestion(int qIndex, boolean review) {
    try {
        JSONObject aQues = Question1.getQuesList().getJSONObject(
                qIndex);
        String quesValue = aQues.getString("Question");
        if (correctAns[qIndex] == -1) {
            String correctAnsStr = aQues.getString("CorrectAnswer");
            correctAns[qIndex] = Integer.parseInt(correctAnsStr);
        }

        question.setText(quesValue.toCharArray(), 0, quesValue.length());
        answers.check(-1);
        answer1.setTextColor(Color.BLACK);
        answer2.setTextColor(Color.BLACK);
        answer3.setTextColor(Color.BLACK);
        JSONArray ansList = aQues.getJSONArray("Answers");
        String aAns = ansList.getJSONObject(0).getString("Answer");
        answer1.setText(aAns.toCharArray(), 0, aAns.length());
        aAns = ansList.getJSONObject(1).getString("Answer");
        answer2.setText(aAns.toCharArray(), 0, aAns.length());
        aAns = ansList.getJSONObject(2).getString("Answer");
        answer3.setText(aAns.toCharArray(), 0, aAns.length());
        Log.d("", selected[qIndex] + "");
        if (selected[qIndex] == 0)
            answers.check(R.id.option1);
        if (selected[qIndex] == 1)
            answers.check(R.id.option2);
        if (selected[qIndex] == 2)
            answers.check(R.id.option3);

        setText();
        if (quesIndex == (Question1.getQuesList().length() - 1))
            next.setEnabled(false);

        if (quesIndex < (Question1.getQuesList().length() - 1))
            next.setEnabled(true);

        if (review) {
            Log.d("review", selected[qIndex] + "" + correctAns[qIndex]);
            ;
            if (selected[qIndex] != correctAns[qIndex]) {
                if (selected[qIndex] == 0)
                    answer1.setTextColor(Color.RED);
                if (selected[qIndex] == 1)
                    answer2.setTextColor(Color.RED);
                if (selected[qIndex] == 2)
                    answer3.setTextColor(Color.RED);
            }
            if (correctAns[qIndex] == 0)
                answer1.setTextColor(Color.GREEN);
            if (correctAns[qIndex] == 1)
                answer2.setTextColor(Color.GREEN);
            if (correctAns[qIndex] == 2)
                answer3.setTextColor(Color.GREEN);
        }
    } catch (Exception e) {
        Log.e(this.getClass().toString(), e.getMessage(), e.getCause());
    }
}

private void setAnswer() {
    if (answer1.isChecked())
        selected[quesIndex] = 0;
    if (answer2.isChecked())
        selected[quesIndex] = 1;
    if (answer3.isChecked())
        selected[quesIndex] = 2;

    Log.d("", Arrays.toString(selected));
    Log.d("", Arrays.toString(correctAns));

}

private OnClickListener nextListener = new OnClickListener() {
    public void onClick(View v) {
        setAnswer();

        for(int i=0; i<correctAns.length; i++){

            if ((correctAns[i] != -1) || (correctAns[i] == selected[i]))
            {
                if (correctAns[i] == selected[i])
                score++;
                Toast.makeText(getApplicationContext(), "Your answer is correct!", Toast.LENGTH_SHORT).show();
            }else
        {
            Toast.makeText(getApplicationContext(), "Your answer is wrong...", Toast.LENGTH_SHORT).show();
        }

        quesIndex++;
        if (quesIndex >= Question1.getQuesList().length())
            //quesIndex = Question1.getQuesList().length() - 1;

        showQuestion(quesIndex, review);
        }

    }
};
private void setText() {
    this.setTitle("Question     " + (quesIndex + 1) + "out of     "
            + Question1.getQuesList().length());
    items.setGravity(250);
}

public void reload() {

Intent intent = getIntent();
overridePendingTransition(0, 0);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
finish();

overridePendingTransition(0, 0);
startActivity(intent);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:42:55.153

用于`((int) Math.random() * <size of your array>)`为您的问题数组生成随机索引

# javascript - 如何获取jquery生成的单选按钮的值

> ID：14957689
> 
> 赞同：0
> 
> 时间：2013-02-19T12:37:55.397
> 
> 标签：javascript, jquery, html, javascript-events

我正在尝试获取由 jquery 生成的单选按钮的值。我认为呼叫事件存在一些问题。这是我的代码。

HTML

```
<div id="divOption1"></div> 
```

Jquery单选按钮生成

```
document.getElementById('divOption1').innerHTML = '<input id="option1" type="radio" value="1"/> '+ questions[currentQuestion]['option1']; 
```

这里我调用 jquery 函数来获取单选按钮的值

```
$("#option1").click(function (){
        alert($(this).val());
    }) 
```

帮我找出问题所在。并告诉我为什么当我生成 jquery Html 并附加到网页时没有调用事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:39:11.433

使用[**on()**](http://api.jquery.com/on/)而不是 click 将事件与动态生成的元素绑定。您必须委托给父元素可以是文档或任何父元素。

**[现场演示](http://jsfiddle.net/RDLQx/)**

```
$(document).on("click", "#option1", function (){
    alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:41:28.070

用于`live`动态生成的 html..

```
$("#option1").live("click",function (){
    alert($(this).val());
}); 
```

# android - 如何启用 NFC 设置

> ID：14957691
> 
> 赞同：7
> 
> 时间：2013-02-19T12:38:08.597
> 
> 标签：android, nfc

我可以在我的 NFC 演示应用程序中读写，但我需要检查设置菜单中的 NFC 选项是否启用。如果未启用，我想将用户引导至设置菜单（我知道如何操作），类似于 NXP 的 NFC TagWriter。 ![在此处输入图像描述](../Images/44ff7bcd011a601884d91d084cb2a77b.png)

在我的应用程序中，我使用以下 SDK 版本

```
<uses-sdk android:minSdkVersion="7" />
<uses-sdk android:maxSdkVersion="16"/> 
```

我无法检查设置是否启用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T20:57:27.817

[TNR](https://stackoverflow.com/users/1649309/tnr)是正确的，但也请注意，从 Android 版本 16 开始，NFC 有一个更具体的设置操作：

```
protected void startNfcSettingsActivity() {
        if (android.os.Build.VERSION.SDK_INT >= 16) {
            startActivity(new Intent(android.provider.Settings.ACTION_NFC_SETTINGS));
        } else {
            startActivity(new Intent(android.provider.Settings.ACTION_WIRELESS_SETTINGS));
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:43:57.163

使用以下代码获取 NFCAdapter。

```
NfcAdapter nfcAdpt = NfcAdapter.getDefaultAdapter(this);
if(nfcAdpt!=null)
{
if(nfcAdpt.isEnabled())
{
//Nfc settings are enabled
}
else
{
//Nfc Settings are not enabled
}
} 
```

如果您想将用户导航到 NFC 设置，请使用以下代码

```
Intent setnfc = new Intent(Settings.ACTION_WIRELESS_SETTINGS);                             
startActivity(setnfc); 
```

API版本7没有NFC。所以改变你的清单文件如下

```
<uses-sdk android:minSdkVersion="10" />
<uses-sdk android:maxSdkVersion="16"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T09:05:38.163

```
 if (Build.VERSION.SDK_INT >= 10) {
        i = new Intent("android.settings.NFC_SETTINGS");
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        mContext.startActivity(i);
    } else {
        i = new Intent(Settings.ACTION_WIRELESS_SETTINGS);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        mContext.startActivity(i);
    } 
```

# java - 用于 Firefox 的基于 Java 的 Selenium WebDriver 项目的示例 Maven pom.xml

> ID：14957692
> 
> 赞同：7
> 
> 时间：2013-02-19T12:38:09.340
> 
> 标签：java, maven, firefox, selenium-webdriver, pom.xml

我想通过一个项目自动化`Firefox`使用。`Java``Selenium WebDriver`

由于我从未使用过，以前`Selenium`也不`Maven`熟悉如何设置合适的`Maven pom.xml`文件来创建项目，然后可以将其导入 Eclipse。

在[http://docs.seleniumhq.org/docs/03_webdriver.jsp#introducing-webdriver](http://docs.seleniumhq.org/docs/03_webdriver.jsp#introducing-webdriver)上，我为 Opera 浏览器找到了以下示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>MySel20Proj</groupId>
    <artifactId>MySel20Proj</artifactId>
    <version>1.0</version>
    <dependencies>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>2.28.0</version>
        </dependency>
        <dependency>
            <groupId>com.opera</groupId>
            <artifactId>operadriver</artifactId>
        </dependency>
    </dependencies>
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.opera</groupId>
                <artifactId>operadriver</artifactId>
                <version>1.1</version>
                <exclusions>
                    <exclusion>
                        <groupId>org.seleniumhq.selenium</groupId>
                        <artifactId>selenium-remote-driver</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project> 
```

你能好心告诉我如何调整它`pom.xml`以适用于 Firefox 浏览器`Firefox 17`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:44:34.900

使用 selenium-java 依赖项，您可以获得所有浏览器的所有 java 绑定。因此，您无需更改 pom 中已有的任何内容。唯一会改变的是您的驱动程序初始化代码，即 driver = new FirefoxDriver() 而不是 OperaDriver。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-11T09:49:30.993

这是取自[https://github.com/Ardesco/selenium-standalone-server-plugin](https://github.com/Ardesco/selenium-standalone-server-plugin)的基本 POM ：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<groupId>com.lazerycode.selenium</groupId>
<artifactId>maven-template</artifactId>
<version>1.0-SNAPSHOT</version>
<modelVersion>4.0.0</modelVersion>

<name>Selenium Maven Template</name>
<description>A Maven Template For Selenium</description>
<url>http://www.lazerycode.com</url>

<licenses>
    <license>
        <name>Apache 2</name>
        <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
        <distribution>repo</distribution>
        <comments>A business-friendly OSS license</comments>
    </license>
</licenses>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    <selenium.version>2.45.0</selenium.version>
    <overwrite.binaries>false</overwrite.binaries>
    <browser>firefox</browser>
    <threads>1</threads>
    <remote>false</remote>
    <seleniumGridURL/>
    <platform/>
    <browserVersion/>
</properties>

<dependencies>
    <dependency>
        <groupId>org.hamcrest</groupId>
        <artifactId>hamcrest-all</artifactId>
        <version>1.3</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>${selenium.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-remote-driver</artifactId>
        <version>${selenium.version}</version>
    </dependency>
    <dependency>
        <groupId>com.codeborne</groupId>
        <artifactId>phantomjsdriver</artifactId>
        <version>1.2.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.8.8</version>
        <scope>test</scope>
    </dependency>
</dependencies>

<profiles>
    <profile>
        <id>selenium-tests</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>1.7</source>
                        <target>1.7</target>
                    </configuration>
                    <version>2.3.2</version>
                </plugin>
                <plugin>
                    <groupId>com.lazerycode.selenium</groupId>
                    <artifactId>driver-binary-downloader-maven-plugin</artifactId>
                    <version>1.0.7</version>
                    <configuration>
                        <rootStandaloneServerDirectory>${standalone.binary.root.folder}</rootStandaloneServerDirectory>
                        <downloadedZipFileDirectory>${project.basedir}/src/test/resources/selenium_standalone_zips</downloadedZipFileDirectory>
                        <customRepositoryMap>${project.basedir}/src/test/resources/RepositoryMap.xml</customRepositoryMap>
                        <overwriteFilesThatExist>${overwrite.binaries}</overwriteFilesThatExist>
                    </configuration>
                    <executions>
                        <execution>
                            <goals>
                                <goal>selenium</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-failsafe-plugin</artifactId>
                    <version>2.7.2</version>
                    <configuration>
                        <parallel>methods</parallel>
                        <threadCount>${threads}</threadCount>
                        <systemProperties>
                            <browser>${browser}</browser>
                            <screenshotDirectory>${project.build.directory}/screenshots</screenshotDirectory>
                            <remoteDriver>${remote}</remoteDriver>
                            <gridURL>${seleniumGridURL}</gridURL>
                            <desiredPlatform>${platform}</desiredPlatform>
                            <desiredBrowserVersion>${browserVersion}</desiredBrowserVersion>

                            <!--Set properties passed in by the driver binary downloader-->
                            <phantomjs.binary.path>${phantomjs.binary.path}</phantomjs.binary.path>
                            <webdriver.chrome.driver>${webdriver.chrome.driver}</webdriver.chrome.driver>
                            <webdriver.ie.driver>${webdriver.ie.driver}</webdriver.ie.driver>
                            <webdriver.opera.driver>${webdriver.opera.driver}</webdriver.opera.driver>
                        </systemProperties>
                        <includes>
                            <include>**/*WebDriver.java</include>
                        </includes>
                    </configuration>
                    <executions>
                        <execution>
                            <goals>
                                <goal>integration-test</goal>
                                <goal>verify</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

这会：

*   下载所有必需的 Selenium 库
*   下载独立的驱动程序二进制文件（例如 chromedriver、phantomJS 等）
*   下载 PhantomJSdriver 库
*   添加 TestNG 作为测试框架
*   添加所有 Hamcrest 匹配器以获得清晰的测试断言（请参阅[https://code.google.com/p/hamcrest/wiki/Tutorial](https://code.google.com/p/hamcrest/wiki/Tutorial)）

原始链接将带您进入基本项目设置，如果您想要的不仅仅是 POM，您可以签出并运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:47:57.353

我知道，Firefox 17 在 2.28.0 中不受支持，但浏览[Selenium 项目主页](http://code.google.com/p/selenium/)给了我新的见解 - 最新版本是`2.30.0`这样更新：

```
 <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.28.0</version>
    </dependency> 
```

对此：

```
 <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.30.0</version>
    </dependency> 
```

清洁，然后再试一次。希望它有所帮助。这里的一般建议是：始终使用最新版本的 Selenium

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-08T10:15:45.050

要仅使用 FirefoxDriver 实现，您不必使用 selenium-java 工件。相反，您可以只添加对 Firefox 工件的依赖项。将以下依赖项添加到您的 pom.xml：

```
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-firefox-driver</artifactId>
    <version>3.0.1</version>
</dependency> 
```

# r - 结合单个和聚合级别的数据集

> ID：14957698
> 
> 赞同：1
> 
> 时间：2013-02-19T12:38:22.287
> 
> 标签：r

我有两个不同的数据框，我们称它们为“月”和“人”。

月份看起来像这样：

```
Month   Site   X
1       1      4
2       1      3
3       1      5
1       2      10
2       2      7
3       2      5 
```

人们看起来像这样：

```
ID   Month   Site
1    1       1
2    1       2
3    1       1
4    2       2
5    2       2
6    2       2
7    3       1
8    3       2 
```

我想基本上每次“人物”中的条目具有特定的月份和站点组合时将它们组合起来，它被添加到适当的聚合数据框中，所以我会得到如下内容：

```
Month   Site   X   People
1       1      4   2
2       1      3   0
3       1      5   1
1       2      10  1
2       2      7   3
3       2      5   1 
```

但我对如何去做这件事一无所知。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:51:44.797

使用基础包

```
> aggregate( ID ~ Month + Site, data=People, FUN = length )
  Month Site ID
1     1    1  2
2     3    1  1
3     1    2  1
4     2    2  3
5     3    2  1
> res <- merge(Months, aggdata, all.x = TRUE)

> res
  Month Site  X ID
1     1    1  4  2
2     1    2 10  1
3     2    1  3 NA
4     2    2  7  3
5     3    1  5  1
6     3    2  5  1
> res[is.na(res)] <- 0
> res
  Month Site  X ID
1     1    1  4  2
2     1    2 10  1
3     2    1  3  0
4     2    2  7  3
5     3    1  5  1
6     3    2  5  1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:50:24.467

假设您`data.frame`的 s 是`months`and `people`，这是一个`data.table`解决方案：

```
require(data.table)
m.dt <- data.table(months, key=c("Month", "Site"))
p.dt <- data.table(people, key=c("Month", "Site"))
# one-liner
dt.f <- p.dt[m.dt, list(X=X[1], People=sum(!is.na(ID)))]

> dt.f

#    Month Site  X People
# 1:     1    1  4      2
# 2:     1    2 10      1
# 3:     2    1  3      0
# 4:     2    2  7      3
# 5:     3    1  5      1
# 6:     3    2  5      1 
```

# asp.net - 如何应用 group by 子句

> ID：14957703
> 
> 赞同：0
> 
> 时间：2013-02-19T12:38:31.960
> 
> 标签：asp.net, sql-server, sql-server-2008

询问

```
SELECT 
    TIMECARD.EMP_ID, TIMECARD.TIMECARD_ID, TIMECARD.TIMECARD_STATUS,
    TASK.MAN_HOURS
FROM 
    TRN_TIMECARD_ACTIVITY ACT
INNER JOIN 
    TRN_TIMECARD TIMECARD ON TIMECARD.TIMECARD_ID = ACT.TIMECARD_ID
INNER JOIN 
    TRN_TIMECARD_TASK TASK ON TASK.TIMECARD_ID = TIMECARD.TIMECARD_ID 
WHERE 
    ACT.TIMECARD_STATUS IN ('AP','RE') 
```

输出：

```
61  42  AP  9
61  42  AP  9
61  43  AP  9
61  43  AP  9
61  47  AP  7 
```

我必须分组`emp_id`并计算`sum(man_hours)`。

如何获得如下价值

```
61  42  AP  52 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:41:52.547

...看不到中间两列在您的组中的数字，所以我会这样做：

```
SELECT        TIMECARD.EMP_ID, SUM(TASK.MAN_HOURS)
FROM          TRN_TIMECARD_ACTIVITY ACT
INNER JOIN    TRN_TIMECARD TIMECARD ON TIMECARD.TIMECARD_ID=ACT.TIMECARD_ID
INNER JOIN    TRN_TIMECARD_TASK TASK ON TASK.TIMECARD_ID=TIMECARD.TIMECARD_ID 
WHERE         ACT.TIMECARD_STATUS IN('AP','RE')
GROUP BY      TIMECARD.EMP_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:41:58.693

根据您想要的结果，我看到您给出了*该*列的`Minimum`（*最低*）值`TIMECARD.TIMECARD_ID`和. （*但我不明白为什么你会得到 52 的值*）`Sum`*`TASK.MAN_HOURS`*

 **```
SELECT  TIMECARD.EMP_ID,
        MIN(TIMECARD.TIMECARD_ID) time_card,
        TIMECARD.TIMECARD_STATUS,
        SUM(TASK.MAN_HOURS) totalHours
FROM    TRN_TIMECARD_ACTIVITY ACT
        INNER JOIN TRN_TIMECARD TIMECARD ON TIMECARD.TIMECARD_ID=ACT.TIMECARD_ID
        INNER JOIN TRN_TIMECARD_TASK TASK ON TASK.TIMECARD_ID=TIMECARD.TIMECARD_ID 
WHERE   ACT.TIMECARD_STATUS IN('AP','RE')
GROUP   BY TIMECARD.EMP_ID, TIMECARD.TIMECARD_STATUS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:42:11.573

我认为这会对您有所帮助...至少使用 TIMECARD.TIMECARD_ID

```
SELECT TIMECARD.EMP_ID,
       MIN(TIMECARD.TIMECARD_ID) TIMECARD_ID, 
       TIMECARD.TIMECARD_STATUS,
       SUM(TASK.MAN_HOURS) HOURS 
FROM TRN_TIMECARD_ACTIVITY ACT
INNER JOIN
TRN_TIMECARD TIMECARD ON TIMECARD.TIMECARD_ID=ACT.TIMECARD_ID
INNER JOIN
TRN_TIMECARD_TASK TASK ON TASK.TIMECARD_ID=TIMECARD.TIMECARD_ID 
WHERE ACT.TIMECARD_STATUS IN('AP','RE')
GROUP BY TIMECARD.EMP_ID,TIMECARD.TIMECARD_STATUS 
```**

# php - 使用会话的 PHP 琐事游戏

> ID：14957720
> 
> 赞同：0
> 
> 时间：2013-02-19T12:39:04.897
> 
> 标签：php, session

我正在创建一个琐事游戏，它是如何工作的：

一个人进入索引页面。

系统从数组中为他生成一个随机问题。用户回答问题

如果问题是正确的，系统将回显“正确答案”并生成一个新问题。如果问题不等于数组中的答案，系统将回显“错误答案”并生成一个新问题。

我已经完成了问题生成的部分，但是我遇到了匹配答案的问题 - 考虑到如果您回答问题，在您单击提交后，问题会自动更改，因此您的答案将不正确，除非 randomQuestion 保持不变。

我的朋友告诉我，我需要在随机问题部分使用会话，但没有别的。我不确定我该怎么做，我真的迷路了。

这是我的代码：问题生成

```
 <?php
session_start();

$questions = array(array('What is Google?', 'god'),
                    array('What is God?', 'gode'),
                    array('Why is god?', 'godee'));

$randomQuestion = array_rand($questions);

$question1 = $questions[0][0];
$question2 = $questions[1][0];
$question3 = $questions[2][0];

if ($randomQuestion == 0 && !isset($_SESSION['question1'])) {
    echo $question1;

} else if ($randomQuestion == 1 && !isset($_SESSION['question2'])) {
    echo $question2;

} else if ($randomQuestion == 2 && !isset($_SESSION['question3'])) {
    echo $question3;

}
?> 
```

表格 + 匹配答案 此脚本目前仅检查问题 1 作为测试。

```
<form action="index.php" method="post">
    <input type="text" name="answer">
    <input type="submit" value="Answer it!">
</form>

<?php
    $answer = $_POST['answer'];
    if (!empty($answer)) {
        if ($randomQuestion == 0) {
            if ($answer == $questions[0][1]) {
                echo 'Correct Answer!';
                unset($_SESSION['question1']);
                unset($_SESSION['question2']);
                unset($_SESSION['question3']);
            }
        } else {
            echo 'Answer is incorrect.';
            return;
        }
    } else {
    echo 'Field is empty';
    return;
    }
session_destroy();
?> 
```

我想到的：

在阅读了很多关于会话的文章之后，我想到了检查 randomQuestion 是否是 isset，如果是 isset，那么它就不会产生新的问题。

回答问题后，系统会取消设置随机问题，以便系统生成新问题。

但它并没有真正起作用，因为我没有做对。

我做错了什么？最简单的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:50:58.043

我不会从使用会话开始。当然，我最终可能会使用它们，但为了证明概念，最好先用简单的方法来做。

您真正需要做的就是在您的表单中插入一个隐藏值，它会告诉您问题编号。

例如（未测试）：

```
<?php

$questions = array(
    array('What is Google?', 'god'),
    array('What is God?', 'gode'),
    array('Why is god?', 'godee')
);

$rnd=mt_rand(0,count($questions)-1);
$question=$questions[$rnd];

echo($question[0]);

?>

<form action="index.php" method="post">
<input type="hidden" name="q" value="<?=$rnd?>">
<input type="text" name="answer">
<input type="submit" value="Answer it!">
</form> 
```

用于验证问题和答案的其余服务器代码我将作为练习留下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:56:54.897

如果你想让这个琐事游戏被更多人玩（我想你会玩），你需要想出比简单的 <form> 更多的东西......你必须存储一个用户给出的答案，以便其他用户可以看到它们。

# android - 有没有办法检查应用程序是否具有可读或可写的 SharedPreferences？

> ID：14957723
> 
> 赞同：0
> 
> 时间：2013-02-19T12:39:13.053
> 
> 标签：android, sharedpreferences

有没有办法检查我的设备中安装的第三方应用程序是否`SharedPreferences`通过`WORLD_READABLE`或暴露`WORLD_WRITEABLE`？

我正在使用来自第三方的活动，它有一些用户可以配置的设置，但我想检查我是否可以根据代码的需要预先设置它们。

# delphi - 为什么这是错误的

> ID：14957725
> 
> 赞同：-4
> 
> 时间：2013-02-19T12:39:29.513
> 
> 标签：delphi, devexpress, variant, tcxgrid

我有以下代码

```
procedure TfrmJsApplications.colMaintStylesGetContentStyle(
  Sender: TcxCustomGridTableView; ARecord: TcxCustomGridRecord;
  AItem: TcxCustomGridTableItem; out AStyle: TcxStyle);
var
  aColumn: TcxCustomGridTableItem;
  aValue: Variant;
begin
  inherited;
  try
    aColumn := Sender.FindItemByName('colApplication_Doc');
    aValue := aRecord.Values[aColumn.Index];
    if VarToStr(aValue) <> '' then
      colMaint.Properties.Buttons[0].Caption := 'Redigere'
    else
      colMaint.Properties.Buttons[0].Caption := 'Opret'
  except
    on E:exception do
      Logfile.Error('F_JsApplications.colMaintStylesGetContentStyle: ' + E.Message);
  end; 
```

在 cxGrid 中的列上运行。但由于某种原因，我根本无法弄清楚这条线

```
if VarToStr(aValue) <> '' then 
```

使函数崩溃。我知道这是 aValue 变成 Null 值的时候，但据我所知，在这种情况下 VarToStr 应该返回 ''

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T12:44:52.780

可能`aValue`不是`NULL`但是。`empty`尝试使用检查

```
if(FindVarData(aValue)^.VType in [varNull, varEmpty])then ... 
```

反而。或者

```
if VarIsEmpty(aValue) or VarIsNull(aValue) then 
```

# mongodb - 用于 Ubuntu 的 MongoDB IDE

> ID：14957732
> 
> 赞同：1
> 
> 时间：2013-02-19T12:39:47.627
> 
> 标签：mongodb, ubuntu, ide

以前我在 Windows 7 上借助***MobgoVUE*****使用MongoDB**，但现在我从 Windows 7 切换到 Ubuntu，并且面临通过命令在 mongodb 上高效工作的问题。

 *谁能帮我在 Ubuntu 中为 MongoDB 推荐任何 IDE。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:14:12.520

看看这里：[http ://www.mongodb.org/display/DOCS/Admin+UIs](http://www.mongodb.org/display/DOCS/Admin+UIs)

就个人而言，我认为 UMongo（以前的 JMongoBrowser）似乎是 Linux 的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:09:41.353

两个不错的选择：

RockMongo (php)

GenghisApp (php/ruby)

也开始学习使用 Mongo Shell - 比任何图形 ide 都好。转到 mongodb.org 并单击尝试 shell。*

# dll - MFC Win32 应用程序 + 应用程序验证器 - 虚拟预留泄露

> ID：14957734
> 
> 赞同：0
> 
> 时间：2013-02-19T12:39:50.017
> 
> 标签：dll, mfc, application-verifier

我正在尝试使用 Application Verifier 分析我的 Win32 应用程序。我检查了 Basic 下的所有类别。所以在下面的代码中，

```
// Function which unloads the DLL
int unloadDLL()
{
    if(DLLHandle != NULL)
    {
        if(0 == FreeLibrary(DLLHandle))
        {
            // Failed to unload the DLL
            return -1;
        }
        DLLHandle = NULL;
    }
    return 0;
} 
```

应用程序验证程序停止并抛出以下内容，

```
=======================================
VERIFIER STOP 00000903: pid 0x770: A virtual reservation was leaked. 

    04DB0000 : Leaked reservation address.
    00825FC4 : Address to the allocation stack trace. Run dps <address> to view the allocation stack.
    07870FE0 : Address of the owner dll name. Run du <address> to read the dll name.
    04B00000 : Base of the owner dll. Run .reload <dll_name> = <address> to reload the owner dll. Use 'lm' to get more information about the loaded and unloaded modules.

=======================================
This verifier stop is continuable.
After debugging it use `go' to continue.

======================================= 
```

什么是虚拟预订地址？我还没有找到任何相关的链接。另外，为什么会出现这种情况？

**编辑：**

这是我根据上述建议执行的命令的输出。

`dps 00825FC4`：

```
00825fc4  00000000
00825fc8  0000f801
00825fcc  002001e6
00825fd0  6aa1441e vfbasics+0x1441e
00825fd4  04b081ad <Unloaded_TestDLL.dll>+0x81ad
00825fd8  04b07bbd <Unloaded_TestDLL.dll>+0x7bbd
00825fdc  04b07683 <Unloaded_TestDLL.dll>+0x7683
00825fe0  04b0c4ec <Unloaded_TestDLL.dll>+0xc4ec
00825fe4  04b107d6 <Unloaded_TestDLL.dll>+0x107d6
00825fe8  004354ac*** WARNING: Unable to verify checksum for GUI.exe
GUI!CGUI::check+0x17c [E:\GUI\DLLInterface.cpp @ 832]
00825fec  00435a47 GUI!CGUI::OnInitDialog+0x1e7 [E:\GUI\DLLInterface.cpp @ 988]
00825ff0  004d3a6b GUI!AfxDlgProc+0x3b [dlgcore.cpp @ 35]
00825ff4  773e86ef*** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\Windows\system32\USER32.dll - 
 USER32!IsThreadDesktopComposited+0x11f
00825ff8  773d9eb2 USER32!CreateDialogParamW+0x2b3
00825ffc  773db98b USER32!GetMenuItemID+0x17b
00826000  773f90f9 USER32!DefDlgProcA+0x22
00826004  773e86ef USER32!IsThreadDesktopComposited+0x11f
00826008  773e8876 USER32!IsThreadDesktopComposited+0x2a6
0082600c  773e43cf USER32!WindowFromDC+0xeb
00826010  774041f9 USER32!CallWindowProcA+0x1b
00826014  004d705d GUI!CWnd::DefWindowProcA+0x32 [wincore.cpp @ 1000]
00826018  004d59eb GUI!CWnd::Default+0x39 [wincore.cpp @ 249]
0082601c  004d4c67 GUI!CDialog::HandleInitDialog+0xad [dlgcore.cpp @ 621]
00826020  004d83bb GUI!CWnd::OnWndMsg+0x68d [wincore.cpp @ 1815]
00826024  004d7d04 GUI!CWnd::WindowProc+0x2e [wincore.cpp @ 1585]
00826028  004d58a9 GUI!AfxCallWndProc+0xed [wincore.cpp @ 215]
0082602c  004d5d45 GUI!AfxWndProc+0x81 [wincore.cpp @ 368]
00826030  773e86ef USER32!IsThreadDesktopComposited+0x11f
00826034  773e8876 USER32!IsThreadDesktopComposited+0x2a6
00826038  773e7631 USER32!IsRectEmpty+0x120
0082603c  773d9b1d USER32!RegisterMessagePumpHook+0x9d9
00826040  773d9bf6 USER32!CreateDialogIndirectParamAorW+0x33 
```

`du 07870FE0`：

```
07870fe0  "TestDLL.dll" 
```

`lm`：

```
start    end        module name
00400000 007c5000   GUI C (private pdb symbols) E:\GUI\Debug\GUI.pdb
6aa00000 6aa58000   vfbasics   (no symbols)           
6cc80000 6ccb8000   odbcint    (deferred)             
6d180000 6d20a000   ODBC32     (deferred)             
70650000 70669000   OLEPRO32   (deferred)             
70670000 7068c000   oledlg     (deferred)             
70690000 706f0000   verifier   (deferred)             
709f0000 70a1b000   vrfcore    (export symbols)       C:\Windows\SYSTEM32\vrfcore.dll
71190000 711e1000   WINSPOOL   (deferred)             
721a0000 721b2000   pnrpnsp    (deferred)             
721c0000 721d0000   napinsp    (deferred)             
72230000 72236000   rasadhlp   (deferred)             
72240000 72248000   winrnr     (deferred)             
72280000 722a7000   WLIDNSP    (deferred)             
73420000 73426000   sensapi    (deferred)             
738e0000 73918000   fwpuclnt   (deferred)             
73b50000 73b57000   WINNSI     (deferred)             
73be0000 73bfc000   iphlpapi   (deferred)             
73ee0000 73ef0000   NLAapi     (deferred)             
74090000 740c2000   WINMM      (deferred)             
740d0000 740f1000   ntmarta    (deferred)             
741e0000 741ed000   rtutils    (deferred)             
741f0000 74205000   rasman     (deferred)             
74210000 74262000   RASAPI32   (deferred)             
74380000 7438f000   wkscli     (deferred)             
74390000 743a1000   NETAPI32   (deferred)             
745f0000 74603000   dwmapi     (deferred)             
74b30000 74b70000   uxtheme    (deferred)             
74b70000 74d0e000   comctl32_74b70000   (deferred)             
74fd0000 74fd9000   VERSION    (deferred)             
75060000 75065000   wshtcpip   (deferred)             
75320000 75329000   netutils   (deferred)             
75410000 75454000   dnsapi     (deferred)             
75540000 75546000   wship6     (deferred)             
75550000 7558c000   mswsock    (deferred)             
75860000 75879000   srvcli     (deferred)             
75a00000 75a1a000   SspiCli    (deferred)             
75a70000 75a7c000   CRYPTBASE   (deferred)             
75b20000 75b2b000   profapi    (deferred)             
75b90000 75b9c000   MSASN1     (deferred)             
75ba0000 75c24000   COMCTL32   (deferred)             
75c30000 75c7a000   KERNELBASE   (deferred)             
75d00000 75e1e000   CRYPT32    (deferred)             
75e20000 75e9b000   comdlg32   (deferred)             
75ea0000 75f41000   RPCRT4     (deferred)             
75f50000 75ff0000   ADVAPI32   (deferred)             
75ff0000 761e9000   iertutil   (deferred)             
76390000 763c5000   WS2_32     (deferred)             
763d0000 763e9000   sechost    (deferred)             
763f0000 7640f000   IMM32      (deferred)             
76410000 76455000   WLDAP32    (deferred)             
76460000 76595000   urlmon     (deferred)             
765a0000 771e9000   SHELL32    (deferred)             
771f0000 772c4000   kernel32   (deferred)             
77300000 773cc000   MSCTF      (deferred)             
773d0000 77499000   USER32     (export symbols)       C:\Windows\system32\USER32.dll
77590000 7763c000   msvcrt     (deferred)             
77640000 7779c000   ole32      (deferred)             
777a0000 7782f000   OLEAUT32   (deferred)             
77830000 778ce000   USP10      (deferred)             
778d0000 779c4000   WININET    (deferred)             
779d0000 77b0c000   ntdll      (export symbols)       C:\Windows\SYSTEM32\ntdll.dll
77b10000 77b1a000   LPK        (deferred)             
77b20000 77b25000   PSAPI      (deferred)             
77b30000 77b33000   Normaliz   (deferred)             
77b40000 77b8e000   GDI32      (deferred)             
77b90000 77b96000   NSI        (deferred)             
77ba0000 77bf7000   SHLWAPI    (deferred)             

Unloaded modules:
04b00000 04b60000   TestDLL.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T20:09:50.147

“虚拟保留”大概是指在 Windows 中，您可以“保留”（声明）一系列虚拟地址，而无需实际分配物理内存。

例如，来自[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx)

> MEM_RESERVE 0x00002000 保留进程的虚拟地址空间范围，而不在内存或磁盘上的页面文件中分配任何实际物理存储。

因此，大概 TestDLL.dll 中的某个东西称为 VirtualAlloc，并且从来没有对 VirtualFree 进行相应的调用。您必须提供有关 TestDLL 的更多信息，以便进一步进行调查。

# c# - 根据 MVC 4 中 URL 中的主键从自定义 id 返回路由

> ID：14957735
> 
> 赞同：0
> 
> 时间：2013-02-19T12:39:55.287
> 
> 标签：c#, asp.net, razor, asp.net-mvc-4

*我有一个应用程序，它根据表中的“名称”*列标题显示数据，该表在路由配置中声明为 id：

```
{controller}/{action}/{name}
defaults: new { controller = "Home", action = "Job", name = UrlParameter.Optional } 
```

该名称不是主键，因为页面将根据查询字符串显示具有相同名称的多行。应用程序运行良好，CRUD 功能正常工作。我唯一的问题是从“编辑”或“删除”页面发布后将用户重定向到显示页面，因为我想将用户返回到显示具有相同“名称”的数据行的页面，但我似乎只能访问 ID，（主键）这不是我想要的

例如：

**本地主机:8888/Home/Job/乔纳森**

```
Jonathan | Column2 | Column3
Jonathan | Column2 | Column3
Jonathan | Column2 | Column3
Jonathan | Column2 | Column3 
```

编辑或删除一行时，URL 将是：/Home/edit?id=48，我试图弄清楚如何根据“ID”获取“名称”列字段（在控制器内） ”，并在发布后将用户返回到 URL 中具有该“名称”的页面。

对于后退按钮，在视图中执行此操作非常简单：

```
@{
    var name= Model.Name;
}

<a href="../home/job/@name" class="cancel">Cancel</a> 
```

但是在发布表单时我似乎无法弄清楚路由

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:31:42.207

我已经弄清楚了，通过将“名称”也传递给查询字符串，使用 Html.ActionLink，您可以访问 URL 中的“名称”以与控制器一起使用。

**关联：**

```
@Html.ActionLink("Edit", "edit", new { id=item.id, name=item.Name}) 
```

**控制器：**

```
 [HttpPost]
    public ActionResult Edit(Table1 table1)
    {
        var query = RouteData.Values["name"];

        var back = "../job/" + query;

        if (ModelState.IsValid)
        {
            _db.Entry(table1).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
            return RedirectPermanent(back);
        }

        return View(table1);
    } 
```

# python - pygtk：导入但未使用？

> ID：14957739
> 
> 赞同：1
> 
> 时间：2013-02-19T12:40:04.850
> 
> 标签：python, pygtk

以下是 pygtk 网站上的示例：

```
 #!/usr/bin/env python
    # example base.py
    import pygtk
    pygtk.require('2.0')
    import gtk

    class Base:
        def __init__(self):
            self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
            self.window.show()

        def main(self):
            gtk.main()

    print __name__
    if __name__ == "__main__":
        base = Base()
        base.main() 
```

pygtk 已导入但无处使用，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:03:47.600

你可以在 pygtk 的 FAQs 中找到答案：http://faq.pygtk.org/index.py ?req=show&file= [faq02.004.htp](http://faq.pygtk.org/index.py?req=show&file=faq02.004.htp)

仅当您安装了多个版本的 gtk 并希望确保导入“正确”版本（您想要的版本）时，才需要此导入。或者，将使用您最后安装的版本。

# python - 如何找到颜色条matplotlib的颜色

> ID：14957742
> 
> 赞同：1
> 
> 时间：2013-02-19T12:40:12.447
> 
> 标签：python, matplotlib, wxpython, colorbar

我创建了一个颜色条，其中包含多种颜色。我已将其设置为选择事件。当我单击颜色栏时，我希望它在特定颜色段上返回颜色。我厌倦了使用`event.artist.get_facecolor()`，但它给了我错误`'Axes' object has no attribute 'get_facecolor'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:56:00.910

抓取`ydata`（就像在颜色[条 matplotlib python 上的 onclick 方法中](https://stackoverflow.com/questions/14910963/onclick-method-on-a-colorbar-matplotlib-python)一样）并通过颜色图运行它。

如果`cb`是你的彩条对象

```
color = cb.cmap(cb.norm(event.mouseevent.ydata)) 
```

将返回与您单击的位置关联的 RGBA 颜色。

# java - 我可以使用 Quartz Scheduler 来启动我的应用程序吗？

> ID：14957746
> 
> 赞同：1
> 
> 时间：2013-02-19T12:40:26.937
> 
> 标签：java, quartz-scheduler

我有一个 Java**桌面应用程序**，我想*完全退出*，并安排它*在以后启动。*

有没有办法为此使用 Quartz Scheduler？

据我了解，Quartz 需要运行 Java 运行时**才能**激活。

我想要以下功能，并且不介意使用另一个 Java 库来实现这一点：

*   获取/设置执行 Java 应用程序的计划。
*   能够在没有 Java 运行时的情况下启动应用程序。
*   维护一个跨平台的代码库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:52:55.687

是的，您可以，您需要将其楔入代码之外。

# cocoa - 在沙盒应用中使用 FSEvents

> ID：14957747
> 
> 赞同：6
> 
> 时间：2013-02-19T12:40:30.440
> 
> 标签：cocoa, monitoring, monitor, filesystemwatcher, fsevents

我正在尝试在我的沙盒应用程序中使用 FSEvents 来监视某些目录。我实现了以下类：

```
@implementation SNTracker

- (id)initWithPaths:(NSArray *)paths {
    self=[super init];
    if (self) {
        trackedPaths=paths;
        CFTimeInterval latency=1.0;
        FSEventStreamContext context={0,(__bridge void *)self,NULL,NULL,NULL};
        FSEventStreamRef eeventStream=FSEventStreamCreate(kCFAllocatorDefault,&callback,&context,(__bridge CFArrayRef)trackedPaths,kFSEventStreamEventIdSinceNow,latency,kFSEventStreamCreateFlagUseCFTypes|kFSEventStreamCreateFlagWatchRoot|kFSEventStreamCreateFlagFileEvents);
        FSEventStreamScheduleWithRunLoop(eeventStream,[[NSRunLoop mainRunLoop] getCFRunLoop],kCFRunLoopDefaultMode);
        FSEventStreamStart(eeventStream);
    }
    return self;
}

static void callback(ConstFSEventStreamRef streamRef,void *clientCallBackInfo,size_t numEvents,void *eventPaths,const FSEventStreamEventFlags eventFlags[],const FSEventStreamEventId eventIds[]) {
    NSLog(@"asd");
} 
```

问题是“asd”永远不会被打印（即回调函数永远不会被调用）。当我在 Xcode 的主要目标摘要中禁用“启用应用程序沙盒”时，会调用回调。难道我做错了什么？我授予沙盒应用程序的唯一权利是对用户选择的文件的读写访问权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:02:22.713

并且用户已经选择了您尝试通过 FSEvent 监控的路径？因为如果他没有，您将无法访问它，因此也无法监控它。只有允许您访问路径，才能监控路径。

# asp.net - 从超链接更改为链接 btn

> ID：14957756
> 
> 赞同：0
> 
> 时间：2013-02-19T12:40:42.077
> 
> 标签：asp.net, hyperlink, webforms, asplinkbutton

必须从 asp:hyperlink 更改为 asp:linkBut​​ton，不能再在链接按钮中使用 navigateUrl...有什么建议吗？

```
<asp:LinkButton ID="InvoiceLink" runat="server" NavigateUrl="~/Invoices/List.aspx">
           <asp:Label id="labelBindfromHomeToInvoice" runat="server" Text="<%# Bind('Site_Name') %>"/>
        </asp:LinkButton> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:43:21.287

LinkBut​​ton 使用`PostBackUrl`，因为您将数据“发布”到另一个 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:44:09.507

`LinkButton`不能那样工作。`LinkButton`更像是`Button`带有超链接外观的。所以你可以处理 OnClick 事件。

```
<asp:LinkButton ID="InvoiceLink" runat="server" OnClick="InvoiceLink_Click">
    <asp:Label id="labelBindfromHomeToInvoice" runat="server" Text="<%# Bind('Site_Name') %>"/>
</asp:LinkButton> 
```

在代码隐藏中

```
protected void InvoiceLink_Click(object sender, EventArgs e)
{
    Response.Redirect("~/Invoices/List.aspx");
} 
```

**已编辑**

我会改进这个答案。`HyperLink`和之间的主要区别在于`LinkButton`它`HyperLink`不会 PostBack，它只是简单地将 NavigateURL 请求到服务器。这`LinkButton`只是一个正常的`Button`。这意味着它将回发服务器，具有这样做的所有优点和缺点（例如发送 ViewState，更新控件等）

如果您只需要重定向到另一个页面，可能是最好的选择`HyperLink`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:45:19.723

在链接按钮上，您使用`PostBackUrl`

```
<asp:LinkButton ID="InvoiceLink" runat="server"
     PostBackUrl="~/Invoices/List.aspx"> 
```

# knockout.js - 淘汰赛和检查数据绑定

> ID：14957761
> 
> 赞同：1
> 
> 时间：2013-02-19T12:40:50.063
> 
> 标签：knockout.js, knockout-2.0

我正在尝试在这种情况下获得选中的复选框：

```
<div id='main'>
    <table>
        <tbody data-bind="foreach: Years">
            <tr>
                <td>
                    <input type="checkbox" data.bind="checked: $root.SelectedYears"/>
                </td>
                <td><span data-bind="text: descr" />
                </td>
            </tr>
        </tbody>
    </table>
    <br>
    <input type="button" value="Click!" data-bind="click: count">
<div/>

function vm() {
    this.Years = 
    [
        {
            code: "2011",
            descr: "descr 2011"
        },
        {
            code: "2012",
            descr: "descr 2012"
        },
        {
            code: "2013",
            descr: "descr 2013"
        },
        {
            code: "2014",
            descr: "descr 2014"
        }
    ];

    this.SelectedYears = ko.observableArray(this.Years);

    count = function()
    {
        alert(this.SelectedYears.length);
    };

    return this;
}
ko.applyBindings(new vm()); 
```

[http://jsfiddle.net/angelobadellino/UXKt9/](http://jsfiddle.net/angelobadellino/UXKt9/)

当我单击按钮时，我的 SelectedYears 集合为空。它应该用选中的复选框来填充。

你能帮我理解我错在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:48:47.290

`SelectedYears`是 a`ko.observableArray`它本身**不是**一个数组，即使它公开了`Array`. 但是没有`length`财产。要获取实际数组并检索大小，请使用：

```
alert(this.SelectedYears().length); 
```

但是，您的其余代码可能无法按预期工作，因为您不能将`checked`绑定与这样的数组一起使用：

```
data.bind="checked: $root.SelectedYears" 
```

checked 需要评估为真或假的东西，您可能会考虑使用[可写的计算 observable](http://knockoutjs.com/documentation/computedObservables.html#writeable_computed_observables)将复选框绑定到您的`SelectedYears`数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:47:35.510

尝试：

```
alert(this.SelectedYears().length); 
```

这是一个可观察的，所以你需要把它称为一个。

# iphone - 开始/结束外观转换的不平衡呼叫

> ID：14957765
> 
> 赞同：3
> 
> 时间：2013-02-19T12:41:03.990
> 
> 标签：iphone, ios, objective-c, cocoa-touch

当我初始化`UITabBarController`每个选项卡包含的位置时，每个选项卡`UINavigationController`都`UINavigationController`包含`UIViewController` 在`UIViewController`我做类似的事情时

```
TSActivityDetailsVC * c = [[TSActivityDetailsVC alloc] initWithNibName:@"TSActivityDetailsVC" bundle:nil];
[self.navigationController pushViewController:c animated:YES]; 
```

我有动画，但是当我按下后退按钮时 - 我没有动画并出现错误

日志：

```
push view controller
Unbalanced calls to begin/end appearance transitions for <TSActivityMapVC: 0x81b1000>.
back btn pressed
Unbalanced calls to begin/end appearance transitions for <TSActivityDetailsVC: 0x81c85d0>. 
```

初始化代码：

```
-(UITabBarController *) createMainTabBarController{
UITabBarController * tabbarCntr = [[UITabBarController alloc] init];
[tabbarCntr setViewControllers:[NSArray arrayWithObjects:
                                [[UINavigationController alloc] initWithRootViewController:[[TSActivityMapVC alloc] init]],                                    
                                [[UIViewController alloc] init],
                                [[UIViewController alloc] init],
                                [[UIViewController alloc] init],
                                [[UIViewController alloc] init]
                                , nil]];
[tabbarCntr.tabBar setSelectionIndicatorImage:[UIImage imageNamed:@"selection_indicator"]];
[tabbarCntr.tabBar setBackgroundImage:[UIImage imageNamed:@"tabbar_background"]];    

return tabbarCntr; 
} 
```

在`TSActivityMapVC`我执行

```
TSActivityDetailsVC * c = [[TSActivityDetailsVC alloc] initWithNibName:@"TSActivityDetailsVC" bundle:nil]; 
[self.navigationController pushViewController:c animated:YES]; 
```

令人惊讶的是，当我转到另一个选项卡并返回 - 之后 - 一切正常，没有错误

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-14T10:35:48.097

我得到了解决方案！我继承了并**忘记**`UITabBarController`调用. 所以没有完成的过渡动画。**`viewWillAppear``UITabBarController`**

 **这导致了“开始/结束外观的不平衡呼叫”！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:28:37.967

最后我重现了你的错误。似乎您忘记在这两种方法中调用 super 。

```
-(void)beginAppearanceTransition:(BOOL)isAppearing animated:(BOOL)animated{
    [super beginAppearanceTransition:isAppearing animated:animated];
    NSLog(@"**************begin app tr");
}

-(void)endAppearanceTransition{
    [super endAppearanceTransition];
    NSLog(@"**************end app tr");
} 
```

希望你的问题在这。**

# vb.net - 如果文本框有字符串，则显示 msgbox，但 (.) 不计算在内。视觉基础

> ID：14957766
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:41:25.003
> 
> 标签：vb.net

我有这个文本框，我只想输入包含的 (.) 数字。例如是 190.5。

但如果它有例如 190.5g 的文本，那么它将显示 msgbox("error")

我有我在某处找到的这段代码

```
 Dim allDigit = pbox.Text.Trim.Length <> 0 AndAlso _
      pbox.Text.All(Function(chr) Char.IsDigit(chr))
        If Not allDigit Then
            MsgBox("Please input number only on price")
            pbox.Clear()
            Exit Sub
        End If 
```

如果我添加。在它显示 msgbox 的数字上，无论如何都要包含 . ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:43:54.510

查看[Decimal.TryParse](http://msdn.microsoft.com/en-us/library/system.decimal.tryparse.aspx)，而不是自己拉开字符串。

```
Dim value As Decimal
Dim yourString As String = "1234"
If Not Decimal.TryParse(yourString, value) Then
    MsgBox("Please input number only on price")
    pbox.Clear()
    Exit Sub
End If 
```

应该注意的是，代表小数点分隔符的字符将根据操作系统的语言设置而有所不同——对于美式/英式英语，它将是句点，对于德语，它将是逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:45:50.317

改用[IsNumeric](http://msdn.microsoft.com/en-us/library/6cd3f6w1%28v=vs.90%29.aspx)函数

```
 If Not IsNumeric(pbox.Text) Then
        MsgBox("Please input number only on price")
        pbox.Clear()
        Exit Sub
    End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:51:12.477

这是我在 c# 中使用的代码

```
 private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsControl(e.KeyChar) 
            && !char.IsDigit(e.KeyChar) 
            && e.KeyChar != '.')
        {
                            //message box
            e.Handled = true;
        }

        // only allow one decimal point
        if (e.KeyChar == '.' 
            && (sender as TextBox).Text.IndexOf('.') > -1)
        {
                            //message box
            e.Handled = true;
        }
    } 
```

# javascript - Metro 风格的 HTML/JS 树视图

> ID：14957769
> 
> 赞同：3
> 
> 时间：2013-02-19T12:41:30.940
> 
> 标签：javascript, html, treeview, microsoft-metro, tablet

我在我的网站上使用经典树视图。对于移动设备，我使用了其他特殊设计的版本。我的网站目前显示平板设备的移动版本，但从现在开始，我将在平板设备上显示桌面版本。一切都很好，除了经典的树形视图 - 展开/折叠标志太小且难以挑选。

有人能推荐一个也为平板设备设计的树视图吗？我想一些地铁风格的东西，但我找不到好的实现或概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:19:35.123

行。如果没有人知道如何解决它，让我解释一下我为此做了什么。

看起来没有解决方案。我采用了我的 html/js 树视图的视觉外观。在 js 代码和 "+"/"-" 唱歌之后起飞。并添加简单的行为。

*   当我单击关闭的树视图项目时 - 它被打开并过滤了适当的详细信息
*   当我单击打开的树视图项目时 - 没有任何反应。所以我无法通过单击关闭打开的项目。
*   当我点击标题（标题 - 我描述我拥有什么样的项目的地方）时 - 打开的项目被关闭。

所以我简化了当前的树视图（混合打开/关闭和过滤操作）。它在桌面上看起来并不愚蠢，同时在 Tab 设备上也很有用。

**PS：**我使用了[knockoutjs](http://knockoutjs.com/)进行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T13:42:41.453

这已经晚了，但对于任何发现这个问题的人来说可能仍然有用。

我需要移植使用 VB.Net Treeview 控件的 VB.net 应用程序来生成具有相同功能的 HTML/JS 版本。我仍在从事这个项目，但一年前通过使用名为 zTree 的 Jquery 插件解决了 Treeview 转换问题。我让它与触摸屏以及鼠标事件兼容，它对我来说效果很好。以下是相关网站的链接：

VB.Net 树视图控件： http: [//www.codeguru.com/columns/vb/working-with-the-treeview-control-in-vb.net.htm](http://www.codeguru.com/columns/vb/working-with-the-treeview-control-in-vb.net.htm)

zTree： [http ://www.ztree.me/v3/demo.php#_101](http://www.ztree.me/v3/demo.php#_101)

我的旧 VB Treeview 应用程序： [http ://www.retirementforecaster.com](http://www.retirementforecaster.com)

我的新 HTML/JS Treeview 应用程序（仍处于早期测试阶段）： [http ://www.moneyplan.link](http://www.moneyplan.link)

# enums - 相同的 Enum 在 JUnit 测试中共享

> ID：14957770
> 
> 赞同：0
> 
> 时间：2013-02-19T12:41:31.173
> 
> 标签：enums, junit4

我有一个如下的枚举：

```
 public enum MyEnum {

        FIRST(new FirstOperations()),
        SECOND(new SecondOperations())
... 
```

我的问题是，如果我有 2 个不同的单元测试类并且都声明`MyEnum my = MyEnum.FIRST;`，那么`FirstOperations`该类将仅由运行的第一个单元测试实例化。第二个测试用例将继续它。

为什么 JUnit 会在堆中保留这些枚举？一旦第一个测试用例完成，它们不应该被垃圾收集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:36:13.227

枚举是 Singelton 的完美示例（例如，请参见[此处](http://www.vogella.com/articles/DesignPatternSingleton/article.html)）。这就是为什么它们只被实例化一次 - 除非你在每次测试中分叉 JVM。

不要依赖垃圾收集器。你永远不知道它什么时候运行。

# jquery - select2 搜索不起作用

> ID：14957771
> 
> 赞同：3
> 
> 时间：2013-02-19T12:41:31.800
> 
> 标签：jquery, html, blockui, jquery-blockui, jquery-select2

我一直在使用 select2 插件一段时间，直到现在它是完美的。

我有一个页面，其中包含 3 个正在加载数据且运行良好的选择，以及弹出窗口内的多个选择。它们看起来不错，但您不能在搜索字段上写字。在主页上搜索运行良好，所以我无法弄清楚是什么问题..

我正在使用用于弹出窗口的 blockUI 插件。我已经尝试过 z-index，销毁并在 blockUI 函数的回调上启动插件，但没有任何效果，我不知道为什么。

编码：

```
<!doctype html>
<html>
<head>
<title>ff</title>
<link type="text/css" rel="stylesheet" href="http://cdn.jsdelivr.net/select2/3.2/select2.css" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://cdn.jsdelivr.net/select2/3.2/select2.js">    </script>
<script type="text/javascript" src="http://xiao3meng.googlecode.com/files/jquery.blockUI.js"></script>
<script>
    $(document).ready(function() {
        $(".startselect").select2();

        $('#clickstartpopup').click(function() { 
            $.blockUI({ 
                message: $('#popblock'),
                onBlock: function() { 
                    $(".popupselect").select2();

                }
            });
        });

    });
</script>
</head>
<body>
<div id="maincontent1" class="maincontent mywebsitepage">
  <select  class="startselect" id="merchantList">
 <option value="volvo">Volvo</option>
 <option value="saab">Saab</option>
 <option value="mercedes">Mercedes</option>
 <option value="audi">Audi</option>
</select>
</div>
<div style="clear: both; height: 15px;"></div>
<span id="clickstartpopup" style="cursor: pointer;color:red;" >click me!</span>
<div style="height: 300px;background-color: red;display:none;" id="popblock" >
<select class="popupselect">
 <option value="volvo">Volvo</option>
 <option value="saab">Saab</option>
 <option value="mercedes">Mercedes</option>
 <option value="audi">Audi</option>
</select>
</div>
</body>
</html> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T14:27:48.787

这里同样的问题。我在单击 jquery.fullCalendar 中包含的事件时打开的工具提示 (qtip2) 中加载 select2。fullCalendar 本身显示在一个 div 中，用作覆盖我的应用程序的 blockUI 消息。

在本机中，select 的搜索字段无法正常工作。使用 jquery blockUI 版本 2.57.0 (17.02.2013) 我可以通过在后台应用程序中阻止一个元素并立即解除阻止来使 select2 的搜索字段按预期工作：

```
$("#someDivInTheBg").block();
$("#someDivInTheBg").unblock(); 
```

奇怪的是，该解决方法不再适用于 jquery BlockUI 版本 2.64.0 (18.07.13)。我不知道发生了什么，我可以找到如何跟踪问题，除了它显然是在 blockUI/select2 交互中。

请注意，有时，当我在他显示后立即尝试使用 select2 搜索字段时，我输入的第一个字符会在搜索字段被锁定之前显示在搜索字段中。由于我打开qtip时没有加载blockUI，因此该问题可能是由select2代码触发的。

另请注意，位于后台应用程序中的另一个 select2 不会出现此问题（不在 blockUI 消息内）

我将尝试在 blockUI 和 select2 githubs 中报告问题

*** 已编辑：解决方案 *** 好吧，其实问题很简单。

Select2 分为 2 部分： - select2-container 放置在原始选择旁边（或在处理动态加载的数据时隐藏输入） - select2-drop 放置在标签之前（请注意，此元素是唯一的，用于每个打开时您的 select2 之一）输入字段 .select2-input，select2-drop 的子项。

默认情况下，BlockUI 禁用不在其消息中的元素的键和鼠标事件，正如它的创建者 malsup 在文档中所说：

> // 如果您希望对被阻止的内容禁用键和鼠标事件，则启用 bindEvents: true,

因此，当您在 blockUI 消息内的字段上初始化 select2 时，一切都很好，除了在 input.select2-input 字段中禁用了键和鼠标事件，该字段不在 blockUI 消息内，而是在文档末尾附近html...

解决方案就像这样简单：使用选项初始化您的 blockUI：

```
bindEvents: false, 
```

当心那些可能保持或占据 blockUI 元素之外的焦点的元素，因为鼠标和键事件不会被中和。

也许可以找到针对 blockUI 中 select2 架构的一些改进，以使其更干净。

# internet-explorer - 通过 ExtJS 3 使浏览器记住表单中的名称/密码

> ID：14957772
> 
> 赞同：0
> 
> 时间：2013-02-19T12:41:33.610
> 
> 标签：internet-explorer, google-chrome, extjs, extjs3

我必须制作一个表格，浏览器可以看到什么并保存密码。我发现了很多解决方案，并且在 Firefox 中——例如——用户*owlness*的解决方案非常好用。但是 Chrome 没有显示任何内容，控制台说：*Uncaught TypeError: Cannot call method 'addUnits' of null*

```
<form id="auth-form" action="" method="POST">
  <input id="auth-username" type="text" name="username" class="x-hidden">
  <input id="auth-password" type="password" name="password" class="x-hidden">
  <input id="auth-submit" type="submit" class="x-hidden">
</form> 
```

...

```
 new Ext.FormPanel({
            region: 'south',
            //id: 'login',
            el: 'auth-form',
            autoShow: true,
            height: 125,
            title: 'Login',
            padding: 5,
            frame: true,
            labelWidth: 80,
            defaultType: 'textfield',
            defaults: {
                allowBlank: false,
                width: 250
            },

            items: [{
                fieldLabel: 'Username',
                el: 'auth-username',
                autoShow: true,
                inputType: 'text',
                //id: 'username',
                name: 'username'
            }, {
                fieldLabel: 'Password',
                el: 'auth-password',
                autoShow: true,
                inputType: 'password',
                //id: 'password',
                name: 'password'
            }],

            // auto focus ...

            // submit on enter ...

            buttons: [{
                text: 'Login',
                type: 'submit',
                //el: 'auth-submit',
                //autoShow: true,
                handler: function (button) {
                    var b = button; // scope
                    var f = b.ownerCt.ownerCt.getForm();
                    if (!f.isValid()) {
                        return;
                    }
                    f.standardSubmit = true;
                    b.ownerCt.disable();

                    MY.ajax.login({
                        scope: this,
                        success: function (res) {
                            f.submit();
                            win.close();
                        },
                        failure: function () {
                            b.ownerCt.enable();
                        },
                        params: f.getFieldValues()
                    });
                }
            }]
        }) 
```

你能帮我吗，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T23:14:27.497

您可以将它们保存为 cookie：

```
Ext.util.Cookies.set('username', usernameValue, new Date().add(Date.DAY, 90));

// ...

items: [{
            fieldLabel: 'Username',
            el: 'auth-username',
            autoShow: true,
            inputType: 'text',
            //id: 'username',
            name: 'username',
            value: Ext.util.Cookies.get('username')
        }, {
            fieldLabel: 'Password',
            el: 'auth-password',
            autoShow: true,
            inputType: 'password',
            //id: 'password',
            name: 'password',
            value: Ext.util.Cookies.get('password')
        }] 
```

# ios - iOS 6 - 以编程方式触发 Unwind Segue 什么都不做

> ID：14957774
> 
> 赞同：3
> 
> 时间：2013-02-19T12:41:43.793
> 
> 标签：ios, objective-c, uistoryboard, segue, uistoryboardsegue

在我的应用程序启动时，它以编程方式使用 segue 显示 LoginViewController。视图控制器以模态方式呈现，过渡设置为交叉溶解。成功验证后，我想通过以编程方式触发 unwind segue 来关闭登录视图。所以我将它添加到我的头文件中：

```
- (IBAction)unwindSegue:(UIStoryboardSegue *)segue; 
```

现在在 IB 中，我可以控制从“文件所有者”LoginViewController 拖动到退出按钮并选择`unwindSegue:`. 这会创建一个手动转场，它会正确显示在文件所有者和退出按钮的连接检查器中。然后我从 IB 的场景中单击新创建的 Unwind segue，然后给它一个名称。如果我单击“转到”按钮以进行 unwind segue 操作，它会将我带到上面提到的声明。

到目前为止一切顺利，然后我在 GCD 块中成功验证后触发此展开转场：

```
....
dispatch_async(dispatch_get_main_queue(), ^
{
    [self performSegueWithIdentifier:@"UnwindSegueIdentifier" sender:self];

    [self.spinner removeFromSuperview];
    self.spinner = nil;
}); 
```

......运行时没有任何反应。微调器确实被正确移除，但没有迹象表明展开 segue 正在执行。

执行中的断点`unwindSegue:`永远不会被击中。没有抛出任何错误。没有任何东西被写入控制台。标识符是正确的，我检查了三次（否则它无论如何都会失败）。

[我在这里](https://stackoverflow.com/questions/12792573/cannot-connect-storyboard-unwind-segue)、[这里](https://stackoverflow.com/questions/12561735/what-are-unwind-segues-for-and-how-to-use-them)和[这里](https://stackoverflow.com/questions/12509422/how-to-perform-unwind-segue-programmatically)查看了答案，但我似乎没有错过任何东西。

我确实注意到，Xcode 认为**没有**`unwindSegue:`链接： **![链接？ 没有链接？](../Images/68baa733aaf4705713847eb4c97701d4.png)**

 **我无法从前面的小空圆圈拖动并将其`unwindSegue:`链接到退出按钮。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T09:43:06.770

如果您使用模态 segue 转到您的登录视图，您需要返回的只是调用

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

更准确地说，您应该在呈现控制器（您的第一个控制器）处调用它，但如果您在呈现控制器处调用它，它将被转发。您可以使用完成块进行任何需要的清理。无需使用 GCD。

**编辑**

回答附加评论：我不太确定您的描述，但似乎您已经在呈现的控制器而不是在呈现的控制器上实现**了**展开**操作**。Unwind segues 允许在调用者处做一些事情（例如，设置数据），而不需要额外的协议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T19:17:31.127

引用 Apple 关于 Unwind Segue 的技术说明中的文字：要添加只能以编程方式触发的展开 segue，请从场景的视图控制器图标中控制并拖动到其退出图标，然后从弹出菜单中为新的 segue 选择一个展开动作。

[链接到技术说明](https://developer.apple.com/library/ios/technotes/tn2298/_index.html)**

# android - Android 4.0 不同的屏幕尺寸和密度

> ID：14957780
> 
> 赞同：0
> 
> 时间：2013-02-19T12:41:56.663
> 
> 标签：android

这是我的应用程序的主要活动屏幕。但我没有提供不同屏幕尺寸和密度的相同视图。请帮助我。我该如何解决这个问题。我想将此 xml 布局与 android API 10 及更高版本一起使用。我试过了大多数技术都解决了这个问题，但我没有。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/firstLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center"
android:animateLayoutChanges="true"
android:background="@drawable/home"
>

<RelativeLayout
    android:id="@+id/topheader"
    android:layout_width="match_parent"
    android:layout_height="142dip"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
</RelativeLayout>

<RelativeLayout
    android:id="@+id/RelativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="320dip"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true" >

    <include
        android:id="@+id/include2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/include3"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="20dip"
        layout="@layout/anaekran_seconddock" />

    <include
        android:id="@+id/include1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/include2"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="20dip"
        layout="@layout/anaekran_firstdock" />

    <include
        android:id="@+id/include3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="30dip"
        layout="@layout/anaekran_thirddock" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="match_parent"
    android:layout_height="142dip"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/topheader"
    android:background="@color/gray" >

    <Gallery
        android:id="@+id/gallery1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:07:02.057

您可以为不同的屏幕尺寸创建不同的 xml 文件并将它们放在各自的文件夹中。

例如，对于中等屏幕尺寸，将 .xml 放在 res/layout-medium 文件夹中。对于大--- res/layout-large 对于特大--- res/layout-xlarge

所有文件夹中所有 xml 文件的名称必须相同。有关更多信息，请阅读[此](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:09:12.787

您不能为某个 API 级别指定某个布局。您可以使用清单文件中的以下内容限制您的应用程序在最低和最高 API 级别上运行：

```
 <uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="17" /> 
```

如果您想为某些屏幕尺寸使用特定布局，您可以通过将不同的布局 xml 文件放在 res/layout-land 或 res/layout-normal 或 res/layout-large 等中来实现。

# google-maps - 谷歌 MarkerImage 移动不起作用

> ID：14957784
> 
> 赞同：0
> 
> 时间：2013-02-19T12:42:05.850
> 
> 标签：google-maps, marker, shift

我有在我的地图上使用 MarkerImage 的标记。问题是我正在尝试移动标记图像，以便图标中心位于确切的坐标位置。

我不工作。

我的代码是：

```
var image = new google.maps.MarkerImage(icon,
  // This marker is 15 pixels wide by 15 pixels tall.
  new google.maps.Size(15, 15), 
  new google.maps.Point(7,7),
  new google.maps.Point(7,7)
);
var marker = new google.maps.Marker({
  position: new google.maps.LatLng(lat, lon),
  map: map,
  title: title,
  icon: icon
}); 
```

标记应位于折线上的中心，因为它们标记位于折线上的对象。它们出现在我的地图上。

![在此处输入图像描述](../Images/f3c8b16617491050d3dcbbd489945607.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:36:05.113

行。我在我的标记中插入了图标而不是图像，所以它看不到移动的图像。

此外，自 3.11 版以来，参考文献中的 MarkerImage 已更改为 Icon 类型，因此也值得修改。

# mysql - 使用存储过程插入和更新

> ID：14957788
> 
> 赞同：1
> 
> 时间：2013-02-19T12:42:26.370
> 
> 标签：mysql, sql, stored-procedures

我的存储过程有问题（在 MySQL 上）。如果记录存在，我需要表的数据更新过程，否则插入记录。我有：

```
DELIMITER //

CREATE PROCEDURE saveorUpdate(in product varchar(30), price int, stock int, active varchar(5))

BEGIN

DECLARE id int;

SELECT id_pro FROM products WHERE product=product into id;

IF(id_pro=id)THEN

UPDATE products SET product=product, price=price, stock=stock, active=active 
WHERE id_pro=id;

ELSE

INSERT INTO products (product, price, stock, active) VALUES 
(product, price, stock, active);

END IF;
END 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:44:39.280

由于您的数据库是 MySQL，您可以只使用**INSERT INTO ... ON DUPLICATE KEY**语法并废弃存储过程的内容。

```
INSERT INTO products (
  product, price, stock, active
) VALUES (
  $product, $price, $stock, $active
) ON DUPLICATE KEY UPDATE
  product=VALUES(product)
 , price=VALUES(price)
 , stock=VALUES(stock)
 , active=VALUES(active) 
```

只是一个想法。可能是一种更清洁、更快速的编写替代方案。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-04T10:09:27.607

这是问题的答案 - 带有 INSERT 的存储过程，在 DUPLICATE 上更新。

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `manage-business`
(IN `bname` VARCHAR(200)) NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER 
INSERT INTO tbl_company (co_name) VALUES (bname) ON DUPLICATE key UPDATE co_name=bname; 
```

# java - 在 Java 上复制布尔数组

> ID：14957789
> 
> 赞同：2
> 
> 时间：2013-02-19T12:42:27.973
> 
> 标签：java, arrays, copy, boolean

我正在尝试将一个布尔数组复制到另一个布尔数组中。这就是我正在尝试的：

```
public class Nucleo {
private boolean[] nivel;

public Nucleo(boolean[] carga, double x, int i){ //Copy the array
    for(int j=0; j<carga.length; j++){ 
        nivel[j]=carga[j];
    }

    x=potencia;
    i=porcentaje;

} 
```

我`boolean[] carga`从`main`. 像这样：

```
 public static void main(String[] args) {
    // TODO Auto-generated method stub
    boolean[] niveles = new boolean[8];
    rellniveles(niveles);
    Nucleo nivel1= new Nucleo(niveles, 5, 4);
    nivel1.getPotencia();
}

public static void rellniveles(boolean[] niv){ //Fill the array
    niv[0]=true;
    niv[1]=true;
    niv[2]=true;
    niv[3]=true;
    niv[4]=true;
    niv[5]=true;
    niv[6]=false;
    niv[7]=false;

} 
```

如果我尝试复制`"System.arraycopy( carga, 0, nivel, 0, carga.length );"`

我得到错误：`"Source not found".`

我正在使用 Eclipse。我收到 System.arraycopy() i.imgur.com/pbGrKz6.png 这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:43:44.683

[Arrays.copyOf(boolean[] original, int newLength)](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28boolean%5B%5D,%20int%29)应该对您有所帮助。

例如：

```
public Nucleo(boolean[] carga, double x, int i) {
    this.nivel = (carga == null) ? null : Arrays.copyOf(carga, carga.length);
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:00:38.947

当您尝试访问您无权访问的方法的源代码时，Eclipse 会抛出该消息。这并不意味着您的代码中有任何错误。

您正在寻找的方法 System.arrayCopy() 是 Java 核心库的一部分，因此可以在 JDK 中应包含的 src.zip 中找到。

以下链接说明了如何将其链接到您的 Eclipse 环境 - [http://veerasundar.com/blog/2011/08/attaching-java-source-with-eclipse-ide/](http://veerasundar.com/blog/2011/08/attaching-java-source-with-eclipse-ide/)

然而，在这种情况下，System.arrayCopy() 不是在 Java 中实现的，而是在本机中实现的，因此您将无法查看源代码，至少无法查看 Java 源代码。

如果您在复制数组时遇到实际问题（从您的问题中不清楚） - 那么按照上面的 timonik 的示例可能会有所帮助。

# mysql - 执行文件中存在的 INSERT 语句

> ID：14957790
> 
> 赞同：0
> 
> 时间：2013-02-19T12:42:30.660
> 
> 标签：mysql, insert, load

我有一个包含许多`INSERT`语句的文件。我如何执行它们而不必手动复制它们并粘贴它们以执行。这样做非常困难，因为文件大约是`60 MB`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:46:11.980

您可以为 mysql 导入一个文件以从`mysql`可执行文件（命令提示符）和客户端本身运行。我认为前者更容易：

```
mysql < file-to-import.sql 
```

（您可能需要用户名/密码等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:13:48.423

创建扩展名为 :.sql 的文件然后将所有查询放在该文件上。不要忘记添加“;” 在每条指令之后。之后，通过命令行，执行**mysql < "path-to-your-file/theFilename.sql"**

# c# - ViewBox Stretch 模糊了控件

> ID：14957794
> 
> 赞同：0
> 
> 时间：2013-02-19T12:42:47.663
> 
> 标签：c#, wpf, blur, viewbox, stretching

![ViewBox 拉伸模糊](../Images/034bd920c6862d088b666b4d887a5121.png)

带有数字的 ToolTip 是添加到 Canvas 的子 UserControl。Canvas 是 ViewBox 的子级。为了缩放 Canvas 调整大小控件的内容。问题是工具提示变得模糊。ToolTip 本身只包含矢量元素（没有图片）

如何在没有这些工件的情况下使 ViewBox 缩放？布局舍入没有帮助

# jquery - jQuery：选择具有特定值的元素的内部 html 并将其分配给变量？

> ID：14957800
> 
> 赞同：1
> 
> 时间：2013-02-19T12:43:03.290
> 
> 标签：jquery

我有这个代码：

```
<dl class="item-options">
    <dt>dt1</dt>
    <dd>dd1</dd>
    <dt>dt2</dt>
    <dd>ss2</dd>
</dl> 
```

现在我想通过其内容访问 dt1 并将 dd1 的值分配给它。我正在遍历每个循环中的所有 dd，因此对于我访问的每个 dd，我想从匹配的 dt 中获取内容。

任何想法如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:44:24.923

尝试：

```
var it = $(".item-options dt").first().text()); 
```

[http://jsfiddle.net/hyskp/](http://jsfiddle.net/hyskp/)

如果 dt1 不是第一个元素，则可以遍历 each `dt`：

```
$("dt").each(function(e) {
   var dt = $(this).text();
   if (dt == "dt1") {
     // logic   
   }
}); 
```

[http://jsfiddle.net/xErBM/](http://jsfiddle.net/xErBM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:54:25.150

您可以使用[:contains](http://api.jquery.com/contains-selector/)选择器来选择包含特定文本的元素，如下所示：

```
$('.item-options dt:contains("dt1")') 
```

这将选择`<dt>`具有字符串“dt1”作为其文本的一部分的元素。请注意，它不是完全匹配，因此它还会选择包含“dt1”作为子字符串的元素。

# php - 来自 SQL 的多维 PHP 数组，用于 json_encode

> ID：14957801
> 
> 赞同：1
> 
> 时间：2013-02-19T12:43:07.493
> 
> 标签：php, mysql, arrays, json, multidimensional-array

我正在努力尝试从我的数据库创建一个三维数组，并将其编码为 JSON。

我的数据库包含 3 个表，timeline_table、content_table 和 pic_table。我的 JSON 需要以下结构：

```
{"timeline:"{"content":{"pictures:"{}}}} 
```

这是我当前的 PHP 代码：

```
$get = 1;

$results = mysql_query("

SELECT timeline_table.*, content_table.*, pic_table.*
FROM timeline_table
    JOIN content_table
        ON content_table.tl_ID = timeline_table.tl_ID
    JOIN pic_table
        ON pic_table.content_ID = content_table.content_ID
WHERE timeline_table.tl_ID = $get   

") or die(mysql_error());

while($row = mysql_fetch_assoc($results)){

    $timeline['timeline'][] = array(
        'tl_ID' => $row['tl_ID'],
        'tl_name' => $row['tl_name'],
        'tl_date' => $row['tl_date'],
        'tl_desc' => $row['tl_desc'],
    );

    $timeline['timeline']['content'][] = array(
        'content_ID' => $row['content_ID'],
        'tl_ID' => $row['tl_ID'],
        'content_time' => $row['content_time'],
        'content_date' => $row['content_date'],
        'content_title' => $row['content_title'],
        'content_content' => $row['content_content'],
        'content_category' => $row['content_category'],
        'content_mapLat' => $row['content_mapLat'],
        'content_mapLng' => $row['content_mapLng'],
        'content_zoomLvl' => $row['content_zoomLvl'],       
    );

    $timeline['timeline']['content']['pictures'][] = array(
        'pic_ID' => $row['pic_ID'],
        'content_ID' => $row['content_ID'],
        'pic_path' => $row['pic_path'],
        'pic_desc' => $row['pic_desc'],
        'pic_link' => $row['pic_link']
    );

}
echo stripslashes(json_encode($timeline));
} 
```

我还尝试对每个表使用 1 个查询，并使用 3 个 while 循环来填充数组。我相信一个查询是更好的方法，但如果我错了，请纠正我。这个 php 给了我以下 JSON：

```
{
   "timeline":{
      "0":{
         "tl_ID":"1",
         "tl_name":"Tidslinje 1",
         "tl_date":"2013-01-16",
         "tl_desc":"Test av tl_table"
      },
      "content":{
         "0":{
            "content_ID":"1",
            "tl_ID":"1",
            "content_time":"16:00:00",
            "content_date":"2013-01-17",
            "content_title":"Test",
            "content_content":"Test content number one.",
            "content_category":"test",
            "content_mapLat":null,
            "content_mapLng":null,
            "content_zoomLvl":null
         },
         "pictures":[
            {
               "pic_ID":"1",
               "content_ID":"1",
               "pic_path":"http://i.imgur.com/F6RmDFt.jpg",
               "pic_desc":"katt",
               "pic_link":"http://i.imgur.com/F6RmDFt.jpg"
            },
            {
               "pic_ID":"3",
               "content_ID":"3",
               "pic_path":"http://i.imgur.com/POum7eK.jpg",
               "pic_desc":"seamonster",
               "pic_link":"http://i.imgur.com/POum7eK.jpg"
            }
         ]
        }
    }
} 
```

无论 content_ID 如何，所有图片都在一个数组中，如果我添加更多内容，则 ID 为 2,3 等的内容将位于图片数组下。我想要它们所属的 content_ID 下的数组中的图片，以及它们所属的时间轴下的内容。我还希望数组键是“时间轴”、“内容”和“图片”，而不是整数。

希望这是可以理解的，非常感谢任何帮助！

**编辑：解决了！**

```
$get = 1;

$result = mysql_query("

SELECT t.tl_ID, t.tl_name, t.tl_date, t.tl_desc, c.content_ID, c.content_time, c.content_date, c.content_title, c.content_content, c.content_category, p.pic_ID, p.pic_path, p.pic_desc, p.pic_link
FROM timeline_table t
    LEFT JOIN content_table c ON t.tl_ID = c.tl_ID
    LEFT JOIN pic_table p ON c.content_ID = p.content_ID
WHERE t.tl_ID = $get
ORDER BY t.tl_ID, c.tl_ID, p.content_ID

") or die(mysql_error()); 

$jsonData = array();

$tl_ID = 0;
$content_ID = 0;

$timelineIndex = -1;
$contentIndex = -1;

while($row = mysql_fetch_assoc($result)){

    if($tl_ID != $row['tl_ID']){
        $timelineIndex++;
        $contentIndex = -1;
        $tl_ID = $row['tl_ID'];

        $jsonData[$timelineIndex]['tl_ID'] = $row['tl_ID'];
        $jsonData[$timelineIndex]['tl_name'] = $row['tl_name'];
        $jsonData[$timelineIndex]['tl_date'] = $row['tl_date'];
        $jsonData[$timelineIndex]['tl_desc'] = $row['tl_desc'];

        $jsonData[$timelineIndex]['content'] = array();
    }

    if($content_ID != $row['content_ID']){
        $contentIndex++;
        $content_ID = $row['content_ID'];

        $jsonData[$timelineIndex]['content'][$contentIndex]['content_ID'] = $row['content_ID'];
        $jsonData[$timelineIndex]['content'][$contentIndex]['content_time'] = $row['content_time'];
        $jsonData[$timelineIndex]['content'][$contentIndex]['content_date'] = $row['content_date'];
        $jsonData[$timelineIndex]['content'][$contentIndex]['content_title'] = $row['content_title'];
        $jsonData[$timelineIndex]['content'][$contentIndex]['content_content'] = $row['content_content'];
        $jsonData[$timelineIndex]['content'][$contentIndex]['content_category'] = $row['content_category'];

        $jsonData[$timelineIndex]['content'][$contentIndex]['pictures'] = array();
    }

    $jsonData[$timelineIndex]['content'][$contentIndex]['pictures'][] = array(
        'pic_ID' => $row['pic_ID'],
        'pic_path' => $row['pic_path'],
        'pic_desc' => $row['pic_desc'],
        'pic_link' => $row['pic_link']
    );

}
echo stripslashes(json_encode($jsonData));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:46:46.637

编辑，试试这个：

```
$timeline['timeline'][] = array(
        'tl_ID' => $row['tl_ID'],
        'tl_name' => $row['tl_name'],
        'tl_date' => $row['tl_date'],
        'tl_desc' => $row['tl_desc'],
        'content' => array(
          'content_ID' => $row['content_ID'],
          'tl_ID' => $row['tl_ID'],
          'content_time' => $row['content_time'],
          'content_date' => $row['content_date'],
          'content_title' => $row['content_title'],
          'content_content' => $row['content_content'],
          'content_category' => $row['content_category'],
          'content_mapLat' => $row['content_mapLat'],
          'content_mapLng' => $row['content_mapLng'],
          'content_zoomLvl' => $row['content_zoomLvl'],
          'pictures' => array(
            'pic_ID' => $row['pic_ID'],
            'content_ID' => $row['content_ID'],
            'pic_path' => $row['pic_path'],
            'pic_desc' => $row['pic_desc'],
            'pic_link' => $row['pic_link']
          );      
        );
); 
```

# javascript - Javascript条件语句导致其他函数停止工作

> ID：14957803
> 
> 赞同：1
> 
> 时间：2013-02-19T12:43:17.513
> 
> 标签：javascript, syntax

## 编辑

我最初将这个问题表述为好像浏览器检测导致了我的问题，但这仅仅是由不正确的语法引起的。

1.  确保关闭所有括号（它们应该总是成对出现！）
2.  给你的代码一些空间（它会更容易发现错误！）
3.  通过将凌乱的条件表达式移动到变量中来清理您的`if`-statements
4.  使用语义（理想情况下是明确的）变量名——这可以更容易理解你的代码试图做什么

例如，以下内容：

```
const layoutStyles = document.querySelector('#layoutStyles');
const testElement = document.createElement('div');

let supportsFlex = testElement.style.flex !== undefined;
let supportsFlexFlow = testElement.style.flexFlow !== undefined;

if (supportsFlex && supportsFlexFlow) {

  layoutStyles.setAttribute('href', 'flex-layout.css');

} else {

  layoutStyles.setAttribute('href', 'float-layout.css');
} 
```

在技​​术上等同于：

```
const cond = document.querySelector('#cond');
const tstEl = document.createElement('div');
if (tstEl.style.flex!==undefined&&tstEl.style.flexFlow!==undefined)cond.setAttribute('href','flex-layout.css');
else cond.setAttribute('href','float-layout.css'); 
```

但后者更难阅读和理解。因此也更难调试和重构，*更容易意外引入错误*。

正如贡献者很久以前在他们的答案中所写的那样，学习语言基础知识很重要；先爬再跑，先走再跑！

* * *

出于某种原因，这部分 javascript 阻止了我之前编写的所有其他函数。如果我把它拿出来，它们就会工作，当我把它放回去时，它们就会停止工作。

如果有人能找出问题所在，请告诉我！我真的不太擅长 JS，所以我不是 100% 确定我在这里做什么。

好吧，我以此为参考；[http://www.javascriptkit.com/javatutors/navigator.shtml](http://www.javascriptkit.com/javatutors/navigator.shtml)

这是我的代码：

```
//4th batch shows a warning box upon finding a visitor with an outdated browser
if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){ //test for Firefox/x.x or Firefox x.x (ignoring remaining digits);
 var ffversion=new Number(RegExp.$1) // capture x.x portion and store as a number
if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)){ //test for MSIE x.x;
 var ieversion=new Number(RegExp.$1) // capture x.x portion and store as a number
if (/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){ //test for Opera/x.x or Opera x.x (ignoring remaining decimal places);
 var oprversion=new Number(RegExp.$1) // capture x.x portion and store as a number

if (ffversion<11 || ieversion<9 || oprversion<11.6)
 function browserwarning()
 {
 document.getElementById('oldbrowser').style.display="inherit";
 }
 //END OF 4TH BATCH 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:53:55.563

有很多`{`没有对应的`}`。

```
if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)) { 
    var ffversion = new Number(RegExp.$1);
}
else if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) {
    var ieversion = new Number(RegExp.$1);
}
else if (/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)) { 
    var oprversion=new Number(RegExp.$1);
}

if (ffversion < 11 || ieversion < 9 || oprversion < 11.6) {
       document.getElementById('oldbrowser').style.display="inherit";
} 
```

我刚刚关闭了所有括号。

无论如何，我建议你在这个：[http ://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:54:24.120

您忘记了 if 语句中的一些右括号和函数无效。此代码将在没有语法错误的情况下工作：

```
//4th batch shows a warning box upon finding a visitor with an outdated browser
if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)) { //test for Firefox/x.x or Firefox x.x (ignoring remaining digits);
    var ffversion = new Number(RegExp.$1); // capture x.x portion and store as a number
} else if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) { //test for MSIE x.x;
    var ieversion = new Number(RegExp.$1); // capture x.x portion and store as a number
} else if (/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)) { //test for Opera/x.x or Opera x.x (ignoring remaining decimal places);
    var oprversion = new Number(RegExp.$1); // capture x.x portion and store as a number
}

if (ffversion < 11 || ieversion < 9 || oprversion < 11.6) {
    document.getElementById('oldbrowser').style.display = "inherit";
} 
```

**但我强烈建议您努力学习如何使用和编写 javascript 代码。看起来你正在尝试用中文写一封信，虽然你甚至不知道它们的符号......**

# utf-8 - 为什么 Kickstarter 将“utf8=[Unicode character]”应用于查询字符串？

> ID：14957805
> 
> 赞同：1
> 
> 时间：2013-02-19T12:43:21.937
> 
> 标签：utf-8, character-encoding, kickstarter

我注意到（例如）在 Kickstarter 上搜索时，它适用`utf8=[Unicode character]`于查询字符串，如下所示：

![Kickstarter 和 UTF-8](../Images/d42acabc4cb91ee860d74389c1c3d9b2.png)

这是检测客户端是否支持 UTF-8 的某种奇特方式吗？以前从来没有遇到过这个技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:50:13.827

可以添加该参数以强制旧浏览器（IE 6/7）将 url 参数编码为 un​​icode。

# android - 如何复制果冻豆“清除所有通知”动画

> ID：14957806
> 
> 赞同：0
> 
> 时间：2013-02-19T12:43:22.783
> 
> 标签：android, android-animation

我正在尝试实现与单击通知栏中的“全部清除”按钮时发生的相同类型的动画：

> ![正常 清除所有](../Images/c0efe111edad82f49478611d35588301.png)

这就是我现在所拥有的（对于 a `ListView`），但它无法正常工作。因为时间/暂停，我想。

```
Animation animation = AnimationUtils.loadAnimation(getActivity(), android.R.anim.slide_out_right);
animation.setDuration(300);

int count = mNotificationList.getCount();
for (int i = 0; i < count; i++) {
    View view = mNotificationList.getChildAt(i);

    if (view != null)
        view.startAnimation(animation);
} 
```

有人知道如何完成动画吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:16:36.103

为了达到这样的效果，您应该`Animation`为每个项目使用不同的，以便您可以通过[`Animation.setStartOffset(long)`](http://developer.android.com/reference/android/view/animation/Animation.html#setStartOffset%28long%29)方法轻松设置不同的起始偏移量。

您的代码应如下所示：

```
int count = mNotificationList.getCount();
for (int i = 0; i < count; i++) {
    View view = mNotificationList.getChildAt(i);
    if (view != null) {
        // create an Animation for each item
        Animation animation = AnimationUtils.loadAnimation(
            getActivity(),
            android.R.anim.slide_out_right);
        animation.setDuration(300);

        // ensure animation final state is "persistent"
        animation.setFillAfter(true);

        // calculate offset (bottom ones first, like in notification panel)
        animation.setStartOffset(100 * (count - 1 - i) );

        view.startAnimation(animation);
    }
} 
```

# unit-testing - Symfony2 - 使用 FOSUserBundle 进行测试

> ID：14957807
> 
> 赞同：12
> 
> 时间：2013-02-19T12:43:22.510
> 
> 标签：unit-testing, authentication, symfony, phpunit, fosuserbundle

我会用 FOSUserBundle 为 Symfony2 编写一个测试。

目前我尝试了一些方法，但没有人工作。

我需要一个像“createAuthClient”这样的函数。

**这是我的基础课。我发布它是因为您可以更好地理解我的问题。**

```
<?php
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken;
use Symfony\Component\BrowserKit\Cookie;

class WebTestMain extends WebTestCase
{
    protected static $container;

    static protected function createClient(array $options = array(), array $server = array())
    {
        $client = parent::createClient($options, $server);

        self::$container = self::$kernel->getContainer();

        return $client;
    }

    static function createAuthClient(array $options = array(), array $server = array())
    {
        // see lines below with my tries
    }
} 
```

**第一次尝试：**

```
if(static::$kernel === null)
{
    static::$kernel = static::createKernel($options);
    static::$kernel->boot();
}
if(static::$container === null)
{
    self::$container = self::$kernel->getContainer();
}

$parameters = self::$container->getParameter('test');
$server = array_merge(array('HTTP_HOST' => $parameters['host'], 'HTTP_USER_AGENT' => $parameters['useragent']), $server);

$client = self::createClient($options, $server);

$userProvider = self::$container->get('fos_user.user_manager');
$user = $userProvider->findUserBy(array('id' => 1));
$client->getCookieJar()->set(new Cookie('MOCKSESSID', true));
$session = self::$kernel->getContainer()->get('session');
$token = new UsernamePasswordToken($user, null, 'main', $user->getRoles());
$client->getContainer()->get('security.context')->setToken($token);
$session->set('_security_main', serialize($token));

return $client; 
```

**然后我搜索和搜索......我的第二次尝试。**

```
if(static::$kernel === null)
{
    static::$kernel = static::createKernel($options);
    static::$kernel->boot();
}
if(static::$container === null)
{
    self::$container = self::$kernel->getContainer();
}

$parameters = self::$container->getParameter('test');
$server = array_merge(
    array(
        'HTTP_HOST' => $parameters['host'],
        'HTTP_USER_AGENT' => $parameters['useragent'],
        'PHP_AUTH_USER' => 'admin',
        'PHP_AUTH_PW'   => 'admin'
    ),
    $server
);
$client = static::createClient(array(), array());
$client->followRedirects();
return $client; 
```

**这是我发布这个问题之前的最后一次尝试......**

```
$client = self::createClient($options, $server);

$parameters = self::$container->getParameter('test');
$server = array_merge(
    array(
        'HTTP_HOST' => $parameters['host'],
        'HTTP_USER_AGENT' => $parameters['useragent']
    ),
    $server
);

$client->setServerParameters($server);

$usermanager = self::$container->get('fos_user.user_manager');
$testuser = $usermanager->createUser();
$testuser->setUsername('test');
$testuser->setEmail('test@mail.org');
$testuser->setPlainPassword('test');
$usermanager->updateUser($testuser);

return $client; 
```

**先感谢您。**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T16:03:37.557

我发现使用经过身份验证的用户进行测试的最佳方法是访问您的登录页面并使用您从夹具加载的用户名和密码提交表单。这可能看起来很慢而且很麻烦，但会测试用户实际会做什么。您甚至可以创建自己的方法来快速轻松地使用它。

```
public function doLogin($username, $password) {
   $crawler = $this->client->request('GET', '/login');
   $form = $crawler->selectButton('_submit')->form(array(
       '_username'  => $username,
       '_password'  => $password,
       ));     
   $this->client->submit($form);

   $this->assertTrue($this->client->getResponse()->isRedirect());

   $crawler = $this->client->followRedirect();
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-01T07:06:21.450

创建一个`AbstractControllerTest`并创建一个授权客户端，`setUp()`如下所示：

```
<?php
// ...
use Symfony\Component\BrowserKit\Cookie;

abstract class AbstractControllerTest extends WebTestCase
{
    /**
     * @var Client
     */
    protected $client = null;

    public function setUp()
    {
        $this->client = $this->createAuthorizedClient();
    }

    /**
     * @return Client
     */
    protected function createAuthorizedClient()
    {
        $client = static::createClient();
        $container = $client->getContainer();

        $session = $container->get('session');
        /** @var $userManager \FOS\UserBundle\Doctrine\UserManager */
        $userManager = $container->get('fos_user.user_manager');
        /** @var $loginManager \FOS\UserBundle\Security\LoginManager */
        $loginManager = $container->get('fos_user.security.login_manager');
        $firewallName = $container->getParameter('fos_user.firewall_name');

        $user = $userManager->findUserBy(array('username' => 'REPLACE_WITH_YOUR_TEST_USERNAME'));
        $loginManager->loginUser($firewallName, $user);

        // save the login token into the session and put it in a cookie
        $container->get('session')->set('_security_' . $firewallName,
            serialize($container->get('security.context')->getToken()));
        $container->get('session')->save();
        $client->getCookieJar()->set(new Cookie($session->getName(), $session->getId()));

        return $client;
    }
} 
```

**注意：**请用您的测试用户名替换用户名。

然后，扩展`AbstractControllerTest`并使用全局`$client`发出请求，如下所示：

```
class ControllerTest extends AbstractControllerTest
{
    public function testIndexAction()
    {
        $crawler = $this->client->request('GET', '/admin/');

        $this->assertEquals(
            Response::HTTP_OK,
            $this->client->getResponse()->getStatusCode()
        );
    }
} 
```

**该方法经过测试并且工作正常**

# foursquare - 无法在foursquare上创建新应用

> ID：14957808
> 
> 赞同：0
> 
> 时间：2013-02-19T12:43:24.997
> 
> 标签：foursquare

我正在尝试在foursquare上创建一个应用程序。我确实填写了所有必填字段。通过提交应用程序表单将导致`400 bad request`浏览器中没有消息。

但是响应看起来像这样：

```
{"meta":{"code":400,"errorType":"param_error","errorDetail":"Value  is invalid for pushVersion"},"response":{}} 
```

这可能是他们这边的错误，还是我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:38:37.577

也刚刚收到此错误.... 发布到 /v2/apps/create 的 pushVersion 是空白的，并且该字段没有可见的用户输入。该字段位于标记中，因此如果您使用 Chrome 开发工具或 firebug，您可以找到版本输入的 div 包装器并删除 style="display: none;"，然后填写该字段。我输入“20130115”并选择我不想推送，应用程序创建成功。

# sql-server - 使 SQL Server Management Studio 更频繁地刷新对象

> ID：14957816
> 
> 赞同：3
> 
> 时间：2013-02-19T12:43:54.030
> 
> 标签：sql-server, database, sql-server-2008, ssms

我在 ssms 中管理一个数据库，它经常强调查询中的对象并告诉我某些名称无效：“无效的对象名称”。

但是当我执行查询时，它工作正常。当我更改表的名称并在之后更改查询时会发生这种情况，这是典型的。如果可以的话，我想让这个 ssms 更频繁地更新表名，因为 SSMS 强调所有内容都会减慢我的速度。

我做了什么？我检查了设置，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T12:46:18.397

`Ctrl+Shift+R`将刷新智能缓存。

# android - 为 android 应用程序复制 Sqlite 数据库

> ID：14957835
> 
> 赞同：1
> 
> 时间：2013-02-19T12:44:46.120
> 
> 标签：android, database, sqlite

我正在尝试使用本教程[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/在我的 android 应用程序中使用我自己创建的数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

我的资产文件夹中有我的数据库已经工作了 5 个小时来解决这个问题但徒劳无功..我总是不断得到

```
01-17 04:09:07.111: E/Database(1060): sqlite3_open_v2("/data/data/com.rahul.besttracker/databases/route", &handle, 1, NULL) failed 
```

和

```
01-17 04:09:07.271: E/AndroidRuntime(1060): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rahul.besttracker/com.rahul.besttracker.Busdisplay}: android.database.sqlite.SQLiteException: unable to open database file 
```

我的代码

```
public class Busdisplay extends ListActivity {
    TextView source, destination;
    String src, dest;
    ArrayList<String> mArrayList;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        init();
        Bundle caught = getIntent().getExtras();
        src = caught.getString("source");
        dest = caught.getString("dest");

        DataBaseHelper entry = null;

        entry = new DataBaseHelper(Busdisplay.this);

        entry.openDataBase();

        mArrayList = entry.readEntry(src, dest);

        entry.close();

        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, mArrayList));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
    }

    void init() {
        source = (TextView) findViewById(R.id.textView1);
        destination = (TextView) findViewById(R.id.textView2);
    }

} 
```

我的 DBhelper 类

```
public class DataBaseHelper extends SQLiteOpenHelper {

    // The Android's default system path of your application database.
    private static final String DB_PATH =   "/data/data/com.rahul.besttracker/databases/";

    private static final String DB_NAME = "route.db";
    private static final String DB_TABLE1 = "route1";
    private static final String DB_TABLE2 = "route2";
    private SQLiteDatabase myDataBase;

    private final Context myContext;

    /**
     * Constructor Takes and keeps a reference of the passed context in order to
     * access to the application assets and resources.
     * 
     * @param context
     */
    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }

    /**
     * Creates a empty database on the system and rewrites it with your own
     * database.
     * */
    public void createDataBase() throws IOException {

        boolean dbExist = checkDataBase();

        if (dbExist) {
            // do nothing - database already exist
        } else {

            // By calling this method and empty database will be created into
            // the default system path
            // of your application so we are gonna be able to overwrite that
            // database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each
     * time you open the application.
     * 
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase() {

        SQLiteDatabase checkDB = null;

        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {

            System.out.print("ERROR");
        }

        if (checkDB != null) {

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created
     * empty database in the system folder, from where it can be accessed and
     * handled. This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException {

        // Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException {

        // Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

        if (myDataBase != null)
            myDataBase.close();

        super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        try {
            createDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DB_TABLE1);
        db.execSQL("DROP TABLE IF EXISTS " + DB_TABLE2);
        onCreate(db);
    }

    public ArrayList<String> readEntry(String src, String dest) {

        // TODO Auto-generated method stub
        Cursor c = myDataBase.rawQuery("SELECT route_no from " + DB_TABLE1
                + " WHERE stops LIKE '%" + src + "%,%" + dest + "%';", null);
        ArrayList<String> mArrayList = new ArrayList<String>();
        int index = c.getColumnIndex("route_no");
        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            // The Cursor is now set to the right position
            mArrayList.add(c.getString(index));
        }
        return mArrayList;
    }

    // Add your public helper methods to access and get content from the
    // database.
    // You could return cursors by doing "return myDataBase.query(....)" so it'd
    // be easy
    // to you to create adapters for your views.

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:30:54.420

我什至遇到了同样的问题，对此感到非常沮丧，即使我使用了本教程，但它没有用。我搜索了很多关于这个的线程并找到了一个......即使这也不起作用......但我做了一个简单的改变。首先，创建两个类 DatabaseHelper 和 CopyAdapter：

## 数据库助手

```
 public class DatabaseHelper extends SQLiteOpenHelper{
private static String TAG = "TAG";
private static String DB_PATH = "/data/data/PLACE_HERE_YOUR_INTERNAL_PATH/databases/";
private static String DB_NAME = "PLACE_HERE_YOUR_DATABASE_NAME_WITH_EXTENSION";
private SQLiteDatabase mDataBase; 
private final Context mContext;

public DatabaseHelper(Context context) 
{
    super(context, DB_NAME, null, 1);
    DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
    this.mContext = context;
}   

public void createDataBase() throws IOException
{
    boolean mDataBaseExist = checkDataBase();
    Log.d(TAG,"create DB in Helper. Data exists?"+mDataBaseExist);
    if(!mDataBaseExist)
    {
        Log.d(TAG,"get Writable in DatabaseHelper");
        this.getWritableDatabase();
        try 
        {
            Log.d(TAG,"copy Database");
            copyDataBase();
        } 
        catch (IOException mIOException) 
        {Log.d(TAG,"copy not succeed");
            throw new Error("ErrorCopyingDataBase");

        }
    }
}

private boolean checkDataBase()
{
    SQLiteDatabase mCheckDataBase = null;
    try
    {
        String myPath = DB_PATH + DB_NAME;
        mCheckDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
    }
    catch(SQLiteException mSQLiteException)
    {
        Log.e(TAG, "DatabaseNotFound " + mSQLiteException.toString());
    }

    if(mCheckDataBase != null)
    {
        mCheckDataBase.close();
    }
    return mCheckDataBase != null;
}

private void copyDataBase() throws IOException
{
    Log.d(TAG,"copy");
    InputStream mInput = mContext.getResources().getAssets().open(DB_NAME);

    String outFileName = DB_PATH + DB_NAME;
    Log.d(TAG,"Output:"+outFileName);
    File createOutFile = new File(outFileName);
    if(!createOutFile.exists()){
        createOutFile.mkdir();
    }
    OutputStream mOutput = new FileOutputStream(outFileName);
    byte[] mBuffer = new byte[1024];
    int mLength;
    while ((mLength = mInput.read(mBuffer))>0)
    {
        mOutput.write(mBuffer, 0, mLength);
    }
    mOutput.flush();
    mOutput.close();
    mInput.close();
}

public boolean openDataBase() throws SQLException
{
    String mPath = DB_PATH + DB_NAME;
    mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
    return mDataBase != null;
}

@Override
public synchronized void close() 
{
    if(mDataBase != null)
        mDataBase.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase db) 
{ }

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
    Log.vTAG, "UpgradingDatabase, This will drop current database and will recreate it");
}
   } 
```

## 复制适配器

```
 public class CopyAdapter {

private final Context mContext;
private SQLiteDatabase mDb;
private DatabaseHelper mDbHelper;
    private static String TAG = "TAG";
private static String ACCOUNT_TABLE = "account";
public static String ACCOUNT_EXTRADATA = "extraData";
public static String ACCOUNT_ID = "ID";
public static String ACCOUNT_ADDITIONALDATA = "additionalData";
public static String ACCOUNT_DATA = "data";

public CopyAdapter(Context context) 
{
    this.mContext = context;
    mDbHelper = new DatabaseHelper(mContext);
    Log.d(TAG,"done");
}

public CopyAdapter createDatabase() throws SQLException 
{
    try 
    {
        Log.d(TAG,"create database");
        mDbHelper.createDataBase();
    } 
    catch (IOException mIOException) 
    {
        Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
        throw new Error("UnableToCreateDatabase");
    }
    return this;
}

public CopyAdapter open() throws SQLException 
{
    try 
    {
        Log.d(TAG,"Open");
        mDbHelper.openDataBase();
        mDbHelper.close();
        mDb = mDbHelper.getWritableDatabase();
    } 
    catch (SQLException mSQLException) 
    {
        Log.e(TAG, mSQLException.toString());
        throw mSQLException;
    }
    return this;
}

public void close() 
{
    mDbHelper.close();
}

public int countAccountData() 
{
    Cursor mCoursor = mDb.query(ACCOUNT_TABLE, new String[] {}, null, null, null, null, null);
    int mReturnedCount = mCoursor.getCount();
    mCoursor.close();
    return mReturnedCount;
}

public long insertData(String mExtra, String mAdditionalData, String mData) 
{
    ContentValues initialValues = new ContentValues();
    initialValues.put(ACCOUNT_EXTRADATA, mExtra);
    initialValues.put(ACCOUNT_ADDITIONALDATA, mAdditionalData);
    initialValues.put(ACCOUNT_DATA, mData);
    return mDb.insert(ACCOUNT_TABLE, null, initialValues);
}

public boolean updateData(int mPosition, String mExtra, String mAdditionalData, String mData) 
{
    ContentValues initialValues = new ContentValues();
    initialValues.put(ACCOUNT_EXTRADATA, mExtra);
    initialValues.put(ACCOUNT_ADDITIONALDATA, mAdditionalData);
    initialValues.put(ACCOUNT_DATA, mData);
    return mDb.update(ACCOUNT_TABLE, initialValues, "ID=" + mPosition, null) > 0;
}

public String retriveData(int mPosition)
{
    Cursor mCursor = mDb.query(ACCOUNT_TABLE, new String[] {ACCOUNT_DATA}, "ID=" + mPosition, null, null, null, null);
    mCursor.moveToFirst();
    String mReturn = mCursor.getString(mCursor.getColumnIndex(ACCOUNT_DATA));
    mCursor.close();
    return mReturn;
}

public String retriveAdditionalData(int mPosition)
{
    Cursor mCursor = mDb.query(ACCOUNT_TABLE, new String[] {ACCOUNT_ADDITIONALDATA}, "ID=" + mPosition, null, null, null, null);
    mCursor.moveToFirst();
    String mReturn = mCursor.getString(mCursor.getColumnIndex(ACCOUNT_ADDITIONALDATA));
    mCursor.close();
    return mReturn;
}

public boolean deleteAccount(int mPosition) 
{
    return mDb.delete(ACCOUNT_TABLE, ACCOUNT_ID + "=" + mPosition, null) > 0;
}
   } 
```

然后在你需要的地方打电话：

```
 CopyAdapter  mDbHelper = new CopyAdapter(YourActivity.this);
    mDbHelper.createDatabase(); 
```

并确保你设置

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在你的 manifest.xml

例如，我阅读了很多变体，将您的数据库文件放在资产文件夹中的另一个文件夹中，或者将您的数据库文件的结尾重命名为 jpg，或者在将数据库文件添加到资产之前将其压缩...忘记那个。我能够使我的应用程序工作的唯一方法是将数据库文件放入我的资产文件夹中，而不使用文件夹或重命名或压缩。只是纯文件。从那时起，它的工作没有问题。

我不知道我从哪里得到上面的这个例子，我再也找不到这个网站了（但它在 stackoverflow 上），但是这个，通过一些解决方法并将纯数据库文件放在资产文件夹中，是解决方案. 希望能帮助到你..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-07T21:30:24.073

您的代码的问题在于，当您使用该`getReadableDatabase()`函数时，它会在指定位置创建一个空数据库。看看这个线程，当我遇到同样的问题时，它为我提供了一个解决方案：

[http://www.anddev.org/networking-database-problems-f29/missing-table-in-sqlite-with-specific-version-of-desire-hd-t50364.html](http://www.anddev.org/networking-database-problems-f29/missing-table-in-sqlite-with-specific-version-of-desire-hd-t50364.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T07:43:28.347

使用[SQLiteAssetHelper](https://github.com/jgilfelt/android-sqlite-asset-helper)解决了这个问题。

# c# - 尝试隐藏 WPF 应用程序中的文本块时出现空异常

> ID：14957839
> 
> 赞同：0
> 
> 时间：2013-02-19T12:44:59.650
> 
> 标签：c#, wpf, exception, null, visibility

我正在尝试开发一些工具，因为我是 WPF 新手。我有一个包含 2 个项目的组合框。

xml代码如下

```
<Window x:Class="New_generator2.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="500" Width="500">
    <Grid>

        <ComboBox Height="21" Margin="36,15,22,0" Name="comboBox1" VerticalAlignment="Top" AllowDrop="True" Text="" SelectionChanged="comboBox1_SelectionChanged">
            <ComboBoxItem Tag="1" IsSelected="True" Name="ComboBox_Rule_Parameter">Rule_Parameter</ComboBoxItem>
            <ComboBoxItem Tag="2" Name="ComboBox_Rule_Instance">Rule_Instance</ComboBoxItem>
        </ComboBox>

        <TextBox Height="25" HorizontalAlignment="Right" Margin="0,71,14,0" Name="Field_Code_textbox" VerticalAlignment="Top" Width="220"  Visibility="Hidden" />
        <TextBlock Height="25" HorizontalAlignment="Left" Margin="14,73,0,0"  Name="Field_Code" VerticalAlignment="Top" Width="220" TextBlock.FontSize="20" Background="BurlyWood" TextAlignment="Center"  Text="Data_Field_Code" Visibility="Hidden"/>
        <TextBox Height="84" Margin="35,0,23,12" Name="Script" VerticalAlignment="Bottom" Width="420" Visibility="Hidden"/>
        <Button Height="25" Margin="120,0,123,106" Name="Generate" VerticalAlignment="Bottom" TextBlock.FontSize="18" Background="BlanchedAlmond" TextBlock.TextAlignment="Justify" Click="button1_Click" Visibility="Hidden">Dispaly</Button>

    </Grid>
</Window> 
```

C#代码如下

```
public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
            Field_Code = new TextBlock();
        }

        private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            if (comboBox1.SelectedIndex == 0)
            {
                Field_Code.Visibility = Visibility.Visible;
            }
            if (comboBox1.SelectedIndex == 1)
            {
                Field_Code.Visibility = Visibility.Hidden;
            }
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            Script.Text = Field_Code_textbox.Text;
        }
    } 
```

当我运行它时，我得到一个空异常，即对象引用未设置为对象的实例。我附上了空异常的屏幕截图。

![在此处输入图像描述](../Images/deff71aac4017f5444d63d050e6d433f.png)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:48:40.707

将 Field_Code 的初始化移动到构造函数中的 InitialiseComponent() 之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:50:47.250

发生这种情况是因为从 InitializeComponent() 调用了 combobox_selection changed 并且此时您的 Field_Code 未初始化。最简单的解决方法是在 Window1() 构造函数中`Field_Code = new TextBlock();`移动`InitializeComponent();`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:50:34.213

看起来组合选择更改是从 InitializeComponent 触发的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T12:56:18.313

就我个人而言，我会创建一个类似的属性`public bool FieldCodeVisible { .. }`并将您的文本框的可见性绑定到该属性。

而不是说`Field_Code.Visibility = Visibility.Visible;`你可以说`FieldCodeVisible = true;`

这样**，您的 ViewModel 中就有您的逻辑**，但您可以决定**视图中的 on 功能**。

# wpf - WPF TreeView ItemTemplateSelector 不工作

> ID：14957851
> 
> 赞同：1
> 
> 时间：2013-02-19T12:45:53.437
> 
> 标签：wpf, treeview, hierarchicaldatatemplate, itemtemplateselector

我有一个 TreeView 和两个 HierachicalDataTemplate：一个带有`DataType="{x:Type local:Department}" x:Key="D"` ，一个带有`DataType="{x:Type local:Employee}" x:Key="E"`

如果我省略 x:keys 它可以工作（因为模板是自动拾取的），但如果我使用 ItemTemplateSelector，我可以进入选择器并看到正确的 HierarchicalDataTemplate 正在返回但内容不显示.

XAML：

```
<Window.Resources>
  <local:MyItemSelector x:Key="sel"/>
</Window.Resources>

<TreeView ItemsSource={Binding Data}" ItemTemplateSelector="{StaticResource sel}"/> 
```

C＃：

```
class MyItemSelector : DataTemplateSelector {
  public override DataTemplate SelectTemplate(object item, DependencyObject container) {
    var cntrl = container as Control;
    if (cntrl == null) return null;

    if (item is Department)
      return cntrl.FindResource("D") as HierarchicalDataTemplate;
    if (item is Employee)
      return cntrl.FindResource("E") as HierarchicalDataTemplate;

    return null;
  }
} 
```

有任何想法吗？

# mysql - 将嵌套 mysql 查询转换为 codeigniter 样式

> ID：14957855
> 
> 赞同：1
> 
> 时间：2013-02-19T12:46:00.513
> 
> 标签：mysql, codeigniter-2

我有一个嵌套的 sql 查询，如下所示。

```
SELECT  A.ID, A.fName, A.lName,
   COALESCE (B.calls, 0) AS Calls
FROM TableA AS  A
   LEFT JOIN
   (
      SELECT COUNT(B.event) AS  Calls, B.ID
      FROM TableB AS B
      WHERE B.event LIKE 'call'
        AND `Time` >= 1360540800
        AND `Time` <= 1361232000
      GROUP BY B.ID

    ) B
      ON A.ID = B.ID 
WHERE A.State  LIKE 'SENT' OR A.State  LIKE 'SET' 
```

我正在尝试将其转换为 codeigniter 样式。我知道 Code Igniter 的 Active Record 类本身并不支持子查询。但怎么可能做到这一点。我一直在尝试下面的代码。所以我做了两个不同的查询，并使用联合将它们组合起来，如下所示：

```
$query  = $this->db->query("select * from $subQuery2 UNION $subQuery1  as unionTable "); 
```

联合不是正确的方法，可以帮我把它转换成codeigniter风格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:22:58.917

为此，您可以使用 codeigniter 的子查询方式来执行此操作，您将不得不破解 codeigniter。像这样转到 system/database/DB_active_rec.php 从这些函数中删除 public 或 protected 关键字

```
public function _compile_select($select_override = FALSE)
public function _reset_select() 
```

现在子查询写入可用现在这是您的带有活动记录的查询

```
$data   =   array(
                'COUNT(B.event) AS  Calls',
                'B.ID'
            );

$this->db
        ->select($data)
        ->from('TableB AS B')
        ->like('B.event','call','both')
        ->where('`Time` >=',1360540800)
        ->where('`Time` <=',1361232000)
        ->group_by('B.ID');

$subQuery = $this->db->_compile_select();
$this->db->_reset_select();
unset($data);
$data   =   array(
                'A.ID',
                'A.fName',
                'A.lName',
                'COALESCE (B.calls, 0) AS Calls'
            );
$this->db
        ->select($data)
        ->from('TableA AS A')
        ->join("$subquery")
        ->like('A.State','SENT','both')
        ->or_like('A.State','SET','both'); 
```

我已经把两者都放在了你可以根据你的要求做的事情中。注意：在使用子查询时，您必须使用

```
$this->db->from('myTable') 
```

代替

```
$this->db->get('myTable') 
```

运行查询。

# ruby-on-rails - Parse JSON in Rails app that is camelCase

> ID：14957857
> 
> 赞同：0
> 
> 时间：2013-02-19T12:46:03.007
> 
> 标签：ruby-on-rails, json, camelcasing

I am writing back-end to one app and my front-end developer forced me to use small-cap `camelCase` notation in JSON files that he is receiving (sic!). With sending him this is no problem because I use `Jbuilder` and there is an option to provide such possibility. But how can I parse his responses in simple way? Is there any option to make it automatically instead rewriting all keys using `ActiveSupport` `String#underscore` method?

Example:
I get request with JSON:

```
{
  'someValue': 324,
  'someOtherValue': 'trolololololo'
} 
```

And in Rails land I want use it as follows:

```
@data = JSON.parse(request.body)
@some_value = @data['some_value'] # or @data[:some_value] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:43:31.303

I found some code [here](https://stackoverflow.com/a/8707236/660428) so I post it again for you so it is easy to copy.

```
def underscore_key(k)
  if defined? Rails
    k.to_s.underscore.to_sym
  else
    to_snake_case(k.to_s).to_sym
  end
end

def to_snake_case(string)
  string.gsub(/::/, '/').
  gsub(/([A-Z]+)([A-Z][a-z])/,'\1_\2').
  gsub(/([a-z\d])([A-Z])/,'\1_\2').
  tr("-", "_").
  downcase
end

def convert_hash_keys(value)
  case value
    when Array
      value.map { |v| convert_hash_keys(v) }
      # or `value.map(&method(:convert_hash_keys))`
    when Hash
      Hash[value.map { |k, v| [underscore_key(k), convert_hash_keys(v)] }]
    else
      value
  end
end 
```

here are some small tests to prove the functionality:

```
p convert_hash_keys({abc:"x"})          # => {:abc=>"x"}
p convert_hash_keys({abcDef:"x"})       # => {:abc_def=>"x"}
p convert_hash_keys({AbcDef:"x"})       # => {:abc_def=>"x"}
p convert_hash_keys(["abc"])            # => ["abc"]
p convert_hash_keys([abc:"x"])          # => [{:abc=>"x"}]
p convert_hash_keys([abcDef:"x"])       # => [{:abc_def=>"x"}] 
```

I hope that meets your requirements.

# iphone - 在 ipad mini 上测试应用程序

> ID：14957862
> 
> 赞同：1
> 
> 时间：2013-02-19T12:46:14.000
> 
> 标签：iphone, xcode, ipad

我刚刚越狱打破了我的 ipad mini。现在我想在我的设备上测试我的应用程序，但我在 xcode 中看不到任何可以在我的设备上测试它的选项。如何在 ipad mini 上测试我的应用程序？

# msmq - 如何更改默认 MSMQ Time-To-Reach-Queue 时间？

> ID：14957867
> 
> 赞同：1
> 
> 时间：2013-02-19T12:46:30.157
> 
> 标签：msmq, nservicebus, windows-server-2008-r2

在一些运行 Windows Server 2008 R2 的服务器上，我们遇到了 Microsoft 消息队列中的 Time-To-Reach-Queue 太长的问题。

我们如何将服务器上的默认时间从 4 天更改为较低的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:53:56.893

如果机器是域的一部分，您可以在“站点和服务”中更改该值。
如果没有，我认为不可能！

# ms-access - 禁用默认消息框

> ID：14957869
> 
> 赞同：1
> 
> 时间：2013-02-19T12:46:45.477
> 
> 标签：ms-access, vba

我想禁用 Access 中的默认 msgbox。这是我的代码，

```
Private Sub textRequiredDate_AfterUpdate()

DoCmd.SetWarnings False

If Not IsDate(textRequiredDate.Value) Then
MsgBox "Please enter a date"

Else

End If

If textRequiredDate.Value < textOrderDate.Value Then
MsgBox "Required date must be after Order Date"
textOrderDate.SetFocus
textRequiredDate.SetFocus
textRequiredDate.Value = ""

Else

End If

End Sub 
```

当我在需要的日期写信时，我得到默认的 MS 访问 msgbox，我想将其更改为我自己的消息框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:31:55.163

您可以使用 Form_Error 事件创建自定义错误，例如这是针对验证规则错误：

```
Private Sub Form_Error(DataErr As Integer, Response As Integer)
      If DataErr = 2107 Then
         MsgBox "There was an error."
         Response = acDataErrContinue
      End If
End Sub 
```

其他错误可能是：

```
Private Sub Form_Error (DataErr As Integer, Response As Integer)
  Const REQUIREDFIELD_VIOLATION = 3314
  Const INPUTMASK_VIOLATION = 2279
  Const DUPLICATEKEY_VIOLATION = 3022
  If DataErr = DUPLICATEKEY_VIOLATION Then
     MsgBox "There was a key violation!"
     Response = acDataErrContinue
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:51:41.703

尝试这个：

```
DoCmd.SetWarnings false
Application.DisplayAlerts = false 
```

# java - 如何将 AWS SDK 添加到 OSGi 环境

> ID：14957871
> 
> 赞同：1
> 
> 时间：2013-02-19T12:46:51.940
> 
> 标签：java, amazon-web-services, osgi

如何在我的 OSGi 包中使用 AWS Java 开发工具包？我在 pom.xml 中添加了以下依赖项：

```
<dependency>
  <groupId>com.amazonaws</groupId>
  <artifactId>aws-java-sdk</artifactId>
  <version>1.3.27</version>
</dependency> 
```

但是当我在 Apache Felix 环境中安装它时，我收到以下关于缺少软件包的错误：

```
missing package(s) or can not resolve all of the them: com.amazonaws.services.dynamodb.model, com.amazonaws.services.dynamodb, com.amazonaws.auth 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:24:38.543

您需要一个导出该包的 OSGi 包，以便能够在运行时访问它。

如果 aws-java-sdk 没有 OSGi 包，您可以通过创建包含和导出该包的包来创建自己的包。

在这里看到这个问题：[Non-osgi library usage in an osgi application](https://stackoverflow.com/questions/4931292/non-osgi-library-usage-in-an-osgi-application)

请注意，也可以将库直接嵌入到您的 OSGi 包中，但是 Id 建议不要这样做，以使您的应用程序更加模块化。

# android - GCM 能否在从 Android 2.1 升级的 Android 4.0 上运行

> ID：14957872
> 
> 赞同：0
> 
> 时间：2013-02-19T12:46:54.263
> 
> 标签：android, push-notification, google-cloud-messaging, android-2.0-eclair

我的项目中有 GCM 推送通知。我知道 GCM 将适用于 Android 2.2 及更高版本。但它适用于那些从 Android 2.1 升级的 Android 4.0 手机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:59:44.277

我实际上在两个 Android 版本上都使用 GCM。

它工作正常，兼容性问题仅与实际版本有关，与旧版本无关，在这种情况下，使用 4.0，一切都很好。

# ruby - 子类中缺少参数时的Ruby超值

> ID：14957877
> 
> 赞同：1
> 
> 时间：2013-02-19T12:47:15.000
> 
> 标签：ruby, arguments, super

```
 class Bike
   attr_reader :gears

   def initialize(g = 5)
     @gears = g
   end
 end

class AnotherBike < Bike
  attr_reader :seats

  def initialize(g, s = 2)
    super(g)
    @seats = s
  end
end 
```

是否可以创建一个 AnotherBike 实例“AnotherBike.new”，当未给出参数时，该实例将从 super 获取“gears”的默认值？

所以例如

```
my_bike = AnotherBike.new  
...
my_bike.gears #=> 5
my_bike.seats #=> 2

my_bike = AnotherBike.new(10)  
...
my_bike.gears #=> 10
my_bike.seats #=> 2

my_bike = AnotherBike.new(1,1)  
...
my_bike.gears #=> 1
my_bike.seats #=> 1 
```

我正在使用 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:53:35.093

班级：

```
class AnotherBike < Bike
  attr_reader :seats

  def initialize(g = nil, s = 2)
    g ? super() : super(g)
    @seats = s
  end
end 
```

用法：

```
AnotherBike.new(nil, 13) 
```

它应该可以工作，但这可能有点多余。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:00:45.547

您可以更改 args 的顺序以使其更优雅

```
class AnotherBike < Bike
  attr_reader :seats

  def initialize(s = 2, g = nil)
    g ? super(g) : super()
    @seats = s
  end
end

AnotherBike.new()
AnotherBike.new(4)
AnotherBike.new(4, 6) 
```

支持你的例子@Matzi 答案就可以了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:54:15.360

为什么不发送散列呢？

```
class Bike
   attr_reader :gears

   def initialize(attributes)
     @gears = attributes.delete(:g) || 5
   end
 end

class AnotherBike < Bike
  attr_reader :seats

  def initialize(attributes)
    @seats = attributes.delete(:s) || 2
    super(attributes)
  end
end 
```

您必须将其称为：`AnotherBike.new({:g => 3, :s => 4})`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:07:26.567

我可能离实际问题有点太远了，但看起来你可能会从使用组合而不是继承中获益。我不知道上下文是什么。

```
class Gears
  def initialize(count = 5)
    @count = count
  end
end

class Seats
  def initialize(count = 2)
    @count = count
  end
end

class Bike
  def initialize(gears, seats)
    @gears = gears
    @seats = seats
  end
end 
```

# android - 如何通过 FragmentPagerAdapter 将变量传递给 Fragment？

> ID：14957882
> 
> 赞同：13
> 
> 时间：2013-02-19T12:47:38.593
> 
> 标签：android, android-fragments, android-viewpager, fragmentpageradapter

我是一个android初学者，正在努力学习，这是我的第一个问题，所以如果问题太简单，请原谅，如果我使用论坛不正确，请告诉我。

我有一个使用包含 viewpager 的布局的 FragmentActivity；该活动创建了 MyFragmentPagerAdapter 的一个实例，该实例创建了多个 MyFragment 实例。都是 support.v4 版本。

我正在尝试找到一种将整数值（表示用户之前所做的选择，实际上可能是可绘制的 id）传递给片段的方法。我正在使用意图将其传递给此活动，并且我知道我可以使用捆绑包将值从 FragmentPagerAdapter 传递给片段，但我找不到将其从活动中获取到 FragmentPagerAdapter 的方法。我尝试了几种方法，包括更改构造函数，但无法使其正常工作。

我错过了一些简单的东西吗？做这个的最好方式是什么？

### 活动

```
 public class SecondActivity extends FragmentActivity {
      private MyIntegerAdapter1 mAdapter1;
      private ViewPager mPager1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second_layout);
        mAdapter1 = new MyIntegerAdapter1(getSupportFragmentManager());
        mPager1 = (ViewPager) findViewById(R.id.pager1);
        mPager1.setAdapter(mAdapter1); 
```

### FragmentPagerAdapter

```
 public class MyIntegerAdapter1 extends FragmentPagerAdapter {
    public MyIntegerAdapter1(FragmentManager fm) {
        super(fm);
    }
    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            Fragment f1 = new IntegerFragment();
            Bundle args1 = new Bundle();
            args1.putInt("param", R.drawable.image1);
            args1.putInt("number", 1);
            f1.setArguments(args1);
            return f1;
    etc 
```

### 分段

```
 public class IntegerFragment extends Fragment {
      private int imageResourceId;
      private int numberSelected;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //change to avoid orientation crash
        imageResourceId = getArguments().getInt("param");
        numberSelected = getArguments().getInt("number"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T13:35:28.547

我从原始的 Google Samples 中提取了这个。

**分段：**

```
public class IntegerFragment extends Fragment {
    int imageResourceId;
    int numberSelected;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //change to avoid orientation crash
        imageResourceId = getArguments().getInt("param");
        numberSelected = getArguments().getInt("number");
    }

    public static Fragment newInstance(int imageResourceId, int numberSelected) {
        IntegerFragment f = new IntegerFragment();
        f.imageResourceId = imageResourceId;
        f.numberSelected = numberSelected;
        return f;
    } 
```

**FragmentPagerAdapter**

```
public class MyIntegerAdapter1 extends FragmentPagerAdapter {
    private Fragment[] fragments;

    public MyIntegerAdapter1(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
        if (content != null && position < content.length) {
        if (fragments[position] == null) {
            fragments[position] = IntegerFragment.newInstance(R.drawable.image1, 1);
        }
        return fragments[position % fragments.length];
    }
    return null;
etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:37:48.290

问题结束。我发现（从下面的链接）片段如何在其活动中调用方法。该方法正在提供价值。我不确定这是不是最好的方法，但它很简单而且很有效。

[在片段及其容器活动之间传递数据](https://stackoverflow.com/questions/9343241/passing-data-between-a-fragment-and-its-container-activity)

# rubygems - 为 linux 和 windows gems 的厨师所需 gems 创建 gem 服务器

> ID：14957887
> 
> 赞同：1
> 
> 时间：2013-02-19T12:47:58.173
> 
> 标签：rubygems, chef-infra

我已经创建了一些需要 gems 的内部食谱，并且因为这些系统无法访问 Internet，所以我想创建一个存储库服务器，例如用于 redhat/centos 的 spacewalk，但对于我在启用了 chef 的主机上使用的 gems。

我检查了几篇提到“gem server”作为解决方案的帖子，但我没有发现“gem server”是否符合我的要求并且独立于平台和操作系统（i686、x86_64 等）。

所以，我想简单地说我的问题是：我是否可以为我的所有操作系统和平台拥有一个单一的内部 gem 服务器，并在客户端上使用“gem install chef”，无论操作系统或平台是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T19:45:22.473

您只需要一个静态文件服务器。它也将独立于平台，因为任何 gem 的 .gemspec 都需要指定任何平台和 Ruby 要求。

查看[http://docs.rubygems.org/read/chapter/18](http://docs.rubygems.org/read/chapter/18)

# xcode - IBaction 在不同的视图上

> ID：14957888
> 
> 赞同：0
> 
> 时间：2013-02-19T12:47:59.483
> 
> 标签：xcode, views, ibaction

我正在学习用 xcode 为 iphone 创建应用程序。我已经这样做了大约 2-3 周，所以我对此完全陌生。现在我决定制作一个包含不同类型计数器的计数器，每个计数器都有自己的视图。它们之间的导航是通过标签栏完成的。

我有 4 个视图，最后一个视图应该包含其他 3 个视图中每个计数器的重置按钮。

是否可以？在那种情况下，你能指出我正确的方向吗？

现在我正在使用它从同一视图中重置计数器

```
-(IBAction)Reset:(id)sender{
    counter = 0;
    count.text = [NSString stringWithFormat:@"%i", counter]; 
```

我可以从假设视图 4 执行上述操作以重置视图 1 中的计数器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:50:42.467

约翰，我怀疑你应该看看 NSUserDefaults。如果这是你的第一个作业，你的老师会对此皱眉。

老实说，我认为上述内容是一个习惯和绕过良好 MVC 基础的坏习惯。由于您对此似乎很陌生，因此您应该专注于良好的 MVC 基础知识：金字塔顶部的视图控制器控制其视图。在这种情况下，您还有一个层，其中 UITabBarController 控制一堆视图控制器（选项卡），这些视图控制器控制它们的视图。

您可以使用 UITabBarController 的“viewControllers”属性在这些视图控制器（选项卡）之间移动。

这些 viewController 中的每一个（UIViewController 子类）都应该在 IB 和代码中创建，然后附加到 UITabBarController。然后，您应该将 IB 身份检查器中的这些视图控制器的类更改为您相应的 UIViewController 子类名称。

然后将标签和操作添加到适当的视图控制器，并将它们挂钩到代码中相应的视图控制器。

您可以使用 viewController 4 中的 [self.tabBarController.viewControllers objectAtIndex:1] 来重置视图 1 上的计数器。

这里没有代码快捷方式。学习正确的 MVC，否则它会咬你。

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T12:54:48.353

是的，有可能。但是你的问题不是那么清楚。根据我的理解，第四个视图有一个名为刷新的按钮，当我们单击按钮时，剩余的 3 个视图应该被替换为开始的内容。

`Refresh button`通过简单的方式，当您在第四个视图中单击时`release`，`UITabbarController`再次添加。

否则需要在所有 3 个屏幕 wrt`UITbabarController Delegate`方法中调用 Refresh View。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T13:29:30.710

```
 - (void)refresh
    {
   NSLog(@"Refresh Data");
   [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"data_refresh"];
   [[NSUserDefaults standardUserDefaults] synchronize];
   } 
```

//在所有3个视图中添加此方法

```
 - (void)viewWillAppear:(BOOL)animated
      {
       [super viewWillAppear:animated];

           if ([[NSUserDefaults standardUserDefaults] objectForKey:@"data_refresh"] && [[[NSUserDefaults standardUserDefaults] objectForKey:@"data_refresh"] boolValue]) {
            count.text = @"0"; // Here you can modify the data as you expected.
         [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"data_refresh"];
         [[NSUserDefaults standardUserDefaults] synchronize];
       }
     } 
```

# vb.net - 用于从 Big Query 读取数据的示例 VB.Net 代码

> ID：14957890
> 
> 赞同：0
> 
> 时间：2013-02-19T12:48:00.483
> 
> 标签：vb.net, google-api-dotnet-client

我需要使用 Google BigQuery API 查询 Google Big Query 表。我正在使用带有 VB.NET 的 Visual Studio 2012。我在 C# 中找到了一个示例代码，我可以通过使用 C# 在 Visual Studio 2012 中进行微小更改来使其工作。

参考：[带有 .NET 文档/示例的 Google BigQuery](https://stackoverflow.com/questions/12443878/google-bigquery-with-net-documentation-samples)

我需要 VB.NET 中的代码，所以我将代码转换为 VB.Net，除了以下代码行之外，一切都编译得很好。

```
// Get the auth URL in C# that works fine:
            IAuthorizationState state = new AuthorizationState(new[] {  BigqueryService.Scopes.Bigquery.GetStringValue() });

    ' Get the auth URL in VB.NET that is giving an error “Type expected” :      
Dim state As IAuthorizationState = New AuthorizationState(New () {BigqueryService.Scopes.Bigquery.GetStringValue()}) 
```

Visual Studio 为 VB.NET 中的代码提供错误“预期类型”。任何人都知道这行代码在 VB.NET 中的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:42:53.053

这与您的错误描述的完全一样。VB.Net 不喜欢推断数组初始值设定项，所以

```
Dim state As IAuthorizationState = New AuthorizationState(New () {BigqueryService.S... 
```

应该是这样的

```
Dim state As IAuthorizationState = New AuthorizationState(New TheTypeOfArrayHere() {BigqueryService.S... 
```

# ember.js - 车把助手 - 对象不工作

> ID：14957895
> 
> 赞同：1
> 
> 时间：2013-02-19T12:48:05.803
> 
> 标签：ember.js, handlebars.js

我正在遍历数组控制器以显示项目-在此视图中，我尝试使用当前地址的上下文执行自定义 Handlebar 助手-但是在我的助手中，该对象未定义。

看法：

```
{{#each temporaryUser.addresses}}
    {{#view App.AddressView addressBinding="this"}}
        {{addressActions view.address}}
        {{{view.address.display}}}
        <a {{action deleteAddress target="view"}} class="delete">Delete</a>
    {{/view}}
 {{/each}}

Handlebars.registerHelper('addressActions', function (address) {
    var display = '<div class="actions">';

    if (address.current && address.permanent) {
        display += '<p>This is my current residential, and permanent address:</p>';
    }
    else if (address.current && !address.permanent) {
        display += '<p>This is my current residential address:</p>';
        display += '<a href="#">Make permanent residential address</a>';
    }
    else if (!address.current && address.permanent) {
        display += '<p>This is my permanent address:</p>';
        display += '<a href="#">Make current residential address</a>';
    }
    else {
        display += '<a href="#">Make current residential address</a><br/>';
        display += '<a href="#">Make permanent residential address</a>';
    }
    display += '</div>';

    return new Handlebars.SafeString(display);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:56:27.573

这不是助手的工作方式。您需要自己从选项对象中获取上下文：

```
Ember.Handlebars.registerHelper('addressActions', function(path, options) {
  // passed context objects are stored in options.contexts
  // as you are only passing one context, it is the first one in the array
  var address = options.contexts.objectAt(0);
} 
```

它以这种方式工作，因为**您可能会将多个上下文传递给您的助手。**

# c# - 位图中的 C# 内存泄漏

> ID：14957896
> 
> 赞同：6
> 
> 时间：2013-02-19T12:48:05.723
> 
> 标签：c#, image, bitmap

我的应用程序在这行中出现内存泄漏。如果我查看任务管理器，每次触发此进程时，RAM 内存都会增加 +- 300 MB。

```
Bitmap bmp1 = new Bitmap(2480, 3508);
panel1.DrawToBitmap(bmp1, new Rectangle(0, 0, 2480, 3508));
pictureBox2.Image = bmp1; 
```

有人可以帮我解决他的泄漏吗？如果我使用：

```
bmp1.Dispose(); 
```

我在这一行的“Program.cs”中遇到异常：在此`Application.Run(new Form1());` 之后，应用程序停止运行......

屏幕应用： ![在此处输入图像描述](../Images/f54e36539cbeb9b8e78f1685e0fbc2d5.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T12:49:41.220

**更新：您***本身*没有内存泄漏，您只需要等待垃圾收集器释放资源即可。

如果你*确实*想制作垃圾收集器`collect`，你可以这样做：

```
System.GC.Collect();
System.GC.WaitForPendingFinalizers(); 
```

* * *

为什么需要处理位图？如果您的 PictureBox 正在使用它，那么您需要位图。如果您要对其进行大量更改，也许您应该将旧位图换成新位图并丢弃旧位图：

```
Bitmap bmp1 = new Bitmap(2480, 3508);
panel1.DrawToBitmap(bmp1, new Rectangle(0, 0, 2480, 3508));
Image img = pictureBox1.Image;
pictureBox1.Image = bmp1;
if (img != null) img.Dispose(); // this may be null on the first iteration 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T12:52:59.050

我认为您应该只处理*不再需要*的图像。您仍然需要`bmp1`创建的，您只需将其设置为`pictureBox2.Image`field 的内容。尝试以下方式：

```
Bitmap bmp1 = new Bitmap(2480, 3508);
panel1.DrawToBitmap(bmp1, new Rectangle(0, 0, 2480, 3508));
Bitmap bmp2 = (Bitmap)pictureBox2.Image;
pictureBox2.Image = bmp1;
bmp2.Dispose(); 
```

[免责声明：我没有 C# 经验，所以我可能错了......]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-26T18:07:34.680

您应该使用外部 gdi32.dll 来避免位图内存泄漏

```
[System.Runtime.InteropServices.DllImport("gdi32.dll")] 
public static extern bool DeleteObject(IntPtr hObject);
//your bitmap usage code here
...
//delete bitmap handle when you don't need the bitmap anymore
DeleteObject((IntPtr)hBitmap); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-28T17:26:15.030

```
 Bitmap copy_Screen()
    {
        try
        {
            var bmpScreenshot = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height, PixelFormat.Format32bppArgb);
            var gfxScreenshot = Graphics.FromImage(bmpScreenshot);
            try
            {
                gfxScreenshot.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);
            }
            catch (Exception) { }
            return bmpScreenshot;
        }
        catch (Exception) { }
        return new Bitmap(10, 10, PixelFormat.Format32bppArgb);
    }

    private void button5_Click(object sender, EventArgs e)
    {
        //Start Stop timer
        if (timer1.Enabled == false) { timer1.Enabled = true; } else { timer1.Enabled = false; }
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        //memory leak solve
        System.GC.Collect();
        System.GC.WaitForPendingFinalizers();

        Bitmap BM = copy_Screen();
        if (pictureBox1.Image != null)
        {
            pictureBox1.Image.Dispose();
        }
        pictureBox1.Image = BM;

    } 
```

# xml - 无法在 powercenter 上编辑 xml 文件

> ID：14957898
> 
> 赞同：1
> 
> 时间：2013-02-19T12:48:07.680
> 
> 标签：xml, file, informatica

我正在处理已导入 Powercenter - XML 文件的现有项目，但如何查看和编辑 XML 定义中的列和行？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:40:58.663

要启动**XML Editor**，首先需要导入 XML 的定义：

![截屏](../Images/34a4bd334dcb176817c8834825086a53.png)

然后单击 XML 定义并选择编辑 XML 定义以打开 Powercenter XML 编辑器。

# jquery - JQuery mouseenter 在重叠的 div 上多次触发

> ID：14957900
> 
> 赞同：0
> 
> 时间：2013-02-19T12:48:22.097
> 
> 标签：jquery

我正在使用 JQuery mouseenter 事件在另一个 div 中显示一个 div。当鼠标进入 DIV AI 时，会在其中显示一个较小的 DIV B。问题是当我将鼠标放在 DIV B 上时，JQuery 再次运行 mouseenter 事件。我想显示 DIV B（内部一个），当鼠标经过它时，不要再次触发 mouseenter 事件。虽然从技术上讲，我的鼠标仍然悬停在 DIV A 上。换句话说，鼠标悬停在 DIV B 上会导致 JQuery 再次在 DIV A 上运行 mouseenter，这是我所理解的。

![在此处输入图像描述](../Images/46f1ebe0590c7f4e1441684047cacead.png)

代码：

```
$(document).on("mouseenter", ".si", function (e) {
   settingsIcon(e,1);

});

$()

$(document).on("mouseout", ".si", function (e) {
    settingsIcon(e,0);

});

function settingsIcon(e, action) {

 if (action === 1) // show
{
    $(".settings_icon").remove();
    var id = parseInt(e.target.id.replace("dvci_", ""), 10); 
    $("#dvc_" + id).prepend("<div class='settings_icon' ><img class='settings_icon_image' src='settings.png' style='width:59px; height:57px'  /></div>");
    var icon = $("#dvc_" + id + " .settings_icon");

    icon.css({
        "left": ($("#dvci_" + id).width() / 2) - 30,
        "top": parseInt($("#dvci_" + id).css("margin-top").replace("px", ""), 10) + ($("#dvci_" + id).height() / 2) - 30
    });

    $(".settings_icon img").show("scale", {}, 400);

}
else {
    // hide
    $(".settings_icon").remove();
}
} 
```

**jsfiddle**：http: [//jsfiddle.net/tLUrd/](http://jsfiddle.net/tLUrd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:51:31.687

尝试使用[**event.stopPropagation()**](http://api.jquery.com/event.stopPropagation/)：

```
$(document).on("mouseenter", ".si", function (e) {
   settingsIcon(e,1);
});

$(document).on("mouseleave", ".si", function (e) {
    settingsIcon(e,0);
});

$(document).on("mouseenter", "#b", function (e) {
    e.stopPropagation();
});

$(document).on("mouseleave", "#b", function (e) {
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:13:03.047

```
$("selector").hover(
  function () {
    console.log("mouse in");
  },
  function () {
    console.log("mouse out");
  }
); 
```

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

jQuery.hover() 不会触发子元素，只会触发它绑定的元素，从而解决您的问题。我以前也遇到过几次， .hover() 确实可以解决问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T14:00:27.853

jQuery .hover() 最多需要两个参数：

```
$("#a").hover(
    function () { settingsIcon(null, 1); },
    function () { settingsIcon(null, 0); }
); 
```

**编辑：**

如果您动态生成#a，为了避免重新绑定上述事件：

```
$(document).on( {
    mouseenter: function() { settingsIcon(null, 1); },
    mouseleave: function() { settingsIcon(null, 0); }
}, '#a'); 
```

# php - 数组php中的重复项总和

> ID：14957901
> 
> 赞同：2
> 
> 时间：2013-02-19T12:48:25.663
> 
> 标签：php, arrays

我不确定在这方面要搜索什么功能，所以似乎无法帮助自己。看起来确实是一个明显的问题。我有一个数组，在我有重复键的地方，我希望添加这些值。例如：

这是我阵列的一部分。

```
[1] => Array
    (
        [inputAvg] => 21.41 KB
        [outputAvg] => 22.03 KB
        [date] => 2011-08-01
    )

[2] => Array
    (
        [inputAvg] => 182.63 KB
        [outputAvg] => 186.05 KB
        [date] => 2011-08-01
    )

[3] => Array
    (
        [inputAvg] => 182.63 KB
        [outputAvg] => 186.05 KB
        [date] => 2011-08-02
    )

[4] => Array
    (
        [inputAvg] => 4.84 MB
        [outputAvg] => 4.93 MB
        [date] => 2011-08-03
    ) 
```

我想要做的是，说数组的日期键是相同的（例如，这里是 2011-08-01）我想显示这个日期一次，但是重复项的组合值......？

例如

```
[1] => Array
    (
        [inputAvg] => 204.04 KB
        [outputAvg] => 208.08 KB
        [date] => 2011-08-01
    )

[2] => Array
    (
        [inputAvg] => 182.63 KB
        [outputAvg] => 186.05 KB
        [date] => 2011-08-02
    )

[3] => Array
    (
        [inputAvg] => 4.84 MB
        [outputAvg] => 4.93 MB
        [date] => 2011-08-03
    ) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T13:01:11.380

```
<?php

$array  = array(Array("inputAvg" => 21.41,"outputAvg" => 22.03,"date" => "2011-08-01"),
                Array("inputAvg" => 182.63,"outputAvg" => 186.05,"date" => "2011-08-01" ),
                Array("inputAvg" => 182.63, "outputAvg" => 186.05,"date" => "2011-08-02")
                );

$res  = array();
foreach($array as $vals){
    if(array_key_exists($vals['date'],$res)){
        $res[$vals['date']]['inputAvg']    += $vals['inputAvg'];
        $res[$vals['date']]['outputAvg']   += $vals['outputAvg'];
        $res[$vals['date']]['date']        = $vals['date'];
    }
    else{
        $res[$vals['date']]  = $vals;
    }
}

echo "<pre>";
print_r($res);

?> 
```

输出 ：

```
Array
(
    [2011-08-01] => Array
        (
            [inputAvg] => 204.04
            [outputAvg] => 208.08
            [date] => 2011-08-01
        )

    [2011-08-02] => Array
        (
            [inputAvg] => 182.63
            [outputAvg] => 186.05
            [date] => 2011-08-02
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:09:51.750

假设，$data 包含您要处理的所有数据

```
$dateArray = array();
foreach($data as $key => $value){
    if(in_array($value['date'], $dateArray)){
        $newArray[$value['date']]['inputAvg'] = $value['inputAvg'] + $newArray[$value['date']]['inputAvg'];
        $newArray[$value['date']]['outputAvg'] = $value['outputAvg'] + $newArray[$value['date']]['outputAvg'];
    }
    else{
        $dateArray[] = $value['date'];
        $newArray[$value['date']] = $value;
    }
} 
```

但请记住，该添加只会添加您的平均值，最终不会显示 KB/MB。你将不得不操纵它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:59:24.147

试试这个；

```
$new = array() ;

foreach ($stats as $traffic){
  $key = $traffic['date'] ;

  if (isset($new[$key])){
    if ($new[$key]['date'] === $traffic['date']){
      $new[$key]['inputAvg'] += $traffic['inputAvg'] ;
      $new[$key]['outputAvg'] += $traffic['outputAvg'] ;
    }
  } else {
    $new[$key] = $traffic ;
  }
}

var_dump($new) ; 
```

编辑了 TYPO，所以它现在可以工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:20:22.877

这是一个考虑到 KB、MB 和 GB 的解决方案

从 KB、MB 和 GB 获取绝对值的函数

```
function mul($unit) {
  $mul = 1;
  switch($unit) {
    case 'GB': $mul *= 1000;
    case 'MB': $mul *= 1000;
    case 'KB': $mul *= 1000;
  }
  return $mul;
} 
```

函数从数字生成字符串，除以 G、M 或 K 并添加后缀

```
function demul($val) {
  $units = array('GB','MB','KB');
  $unit = '  ';
  $m = 1000000000;
  for ($i=0 ; $i<3 ; $i++) {
    if ($val >= $m) {
      $val /= $m;
      $unit = $units[$i];
      break;
    }
    $m /= 1000;
  }
  return number_format($val, 2) . ' ' . $unit;
} 
```

主循环，`$arr`是原始数组；用求和数据填充`dates`数组

```
$dates = array();
foreach ($arr as $key => $a) {
  $d = $a['date'];
  $i = explode(' ', $a['inputAvg']);
  $o = explode(' ', $a['outputAvg']);
  $in  = $i[0] * mul($i[1]);
  $out = $o[0] * mul($o[1]);

  if ( ! isset($dates[$d])) {
    $dates[$d] = array($in, $out);
  }
  else {
    $dates[$d][0] += $in;
    $dates[$d][1] += $out;
  }
} 
```

`result`根据原始格式制作数组

```
$result = array();
$n = 1;
foreach ($dates as $d => $a) {
  $result[$n++] = array('date' => $d, 'inputAvg' => demul($a[0]), 'outputAvg' => demul($a[1]));
} 
```

打印结果

```
print_r($result); 
```

鉴于数据

```
$arr = array(
'1' => Array
    (
        'inputAvg' => '21.41 KB',
        'outputAvg' => '22.03 KB',
        'date' => '2011-08-01',
    ),

'2' => Array
    (
        'inputAvg' => '182.63 KB',
        'outputAvg' => '186.05 KB',
        'date' => '2011-08-01',
    ),

'3' => Array
    (
        'inputAvg' => '182.63 KB',
        'outputAvg' => '186.05 KB',
        'date' => '2011-08-02',
    ),

'4' => Array
    (
        'inputAvg' => '4.84 MB',
        'outputAvg' => '4.93 MB',
        'date' => '2011-08-03',
    )
); 
```

它给出了输出

```
Array
(
    [1] => Array
        (
            [date] => 2011-08-01
            [inputAvg] => 204.04 KB
            [outputAvg] => 208.08 KB
        )

    [2] => Array
        (
            [date] => 2011-08-02
            [inputAvg] => 182.63 KB
            [outputAvg] => 186.05 KB
        )

    [3] => Array
        (
            [date] => 2011-08-03
            [inputAvg] => 4.84 MB
            [outputAvg] => 4.93 MB
        )

) 
```

# css - 应用于选择元素的 Titillium Web 字体

> ID：14957902
> 
> 赞同：1
> 
> 时间：2013-02-19T12:48:26.317
> 
> 标签：css, vertical-alignment, html-select

我必须对网页内的 Select 元素使用 Titillium Web 字体，而且我还必须使用特定的字体大小和字体粗细值。问题是，使用指定的值，选择元素内的文本会向下移动，并且下边缘会被隐藏！我尝试在 select 元素上使用以下 css 属性：

```
vertical-align: text-top !important;
line-height: 80%; 
```

但没有一个有效！任何人都可以帮我解决这个问题吗？

# selenium - selenium 2.30.0 中的 window.maximize 函数在哪里？

> ID：14957903
> 
> 赞同：-3
> 
> 时间：2013-02-19T12:48:29.157
> 
> 标签：selenium, webdriver, selenium-webdriver

今天我从[seleniumhq.org下载了](http://docs.seleniumhq.org/download/)**selenium-java 2.30.0.zip**。但是在我的工作区中用新的 jar 替换旧的 jar 时，我发现**driver.manage.window.maximize() 函数给出了编译错误**。在进一步检查时我发现缺少所需的功能。

 **谁能告诉我这个功能是否已被删除或已移至其他课程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:03:10.987

它仍然存在，所以你的系统有问题（可能是罐子不匹配？）......

[https://code.google.com/p/selenium/source/browse/java/client/src/org/openqa/selenium/remote/RemoteWebDriver.java](https://code.google.com/p/selenium/source/browse/java/client/src/org/openqa/selenium/remote/RemoteWebDriver.java)

（第 782 行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T08:42:19.653

使用 Manage().Window 而不是 Manage.Window**

# objective-c - 使用 Cocoa API 解析 XML - 请帮助新手 :)

> ID：14957906
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:48:31.767
> 
> 标签：objective-c, xml, xpath

我需要为我的项目从一些 XML 中提取特定内容。我对此比较陌生，所以我首先观看了类似的主题并阅读了有关 XPath 和 xmlib2 的内容。我无法让它为我的项目工作，因此我打开了这个问题。

如果有人可以说明以下方面的一般准则，我会很高兴：

1.  我需要更改哪些设置/我需要安装什么吗？
2.  如何解析和提取特定元素（例如：我想获取 content 的内容。我该怎么做？）

非常感谢你的帮助！我确信我不是唯一一个为此苦苦挣扎的新人，更新的主题将对社区有很大帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:50:42.190

如果您使用 XCode 并且您使用*NSXMLParser*来满足您的解析需求，那么您无需安装任何东西。有关解析问题的答案，请查看 Mac 开发人员库，特别是这篇文章：[事件驱动的 XML 编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/HandlingElements.html#//apple_ref/doc/uid/20002265-1001863)。

# ruby - ruby 元编程超类不继承

> ID：14957911
> 
> 赞同：1
> 
> 时间：2013-02-19T12:48:47.050
> 
> 标签：ruby, metaprogramming

当我创建一个以 Array 作为超类的匿名类时，Array 方法 << 和 []= 没有被继承。我的代码如下

```
class SubArray < Array
end

sa = SubArray.new
sa << "foo"
puts sa.inspect

sa_meta = Class.new(Array)
sa_meta << "foo"
puts sa_meta.inspect 
```

给出结果：

```
["foo"]
lib/so_example1.rb:9:in `<main>': undefined method `<<' for #<Class:0x6b10b8e4> (NoMethodError) 
```

我的红宝石版本是：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [i386-darwin11.4.2] 
```

如何使用超类动态创建一个类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T12:50:39.997

> 数组方法 << 和 []= 没有被继承

他们当然是！只是不要忘记创建该类的*实例*。

```
sa_meta_klass = Class.new(Array)
sa_meta = sa_meta_klass.new
sa_meta << "foo"
puts sa_meta.inspect
# >> ["foo"] 
```

# java - 声纳产生一个警告，Eclipse 无法用格式化程序解决

> ID：14957919
> 
> 赞同：0
> 
> 时间：2013-02-19T12:48:59.150
> 
> 标签：java, eclipse, sonarqube

我收到一个声纳警告，因为它对这种语法不满意：

```
new Thread() {

                /**
                 * {@inheritDoc}
                 */
                @Override
                public void run() {
                }

            }.start(); 
```

更具体地说，它要求在任何 '}' 之后有一个空格（之前没有`.start()`）。如何在 eclipse 中设置它？

我曾尝试转到 Window -> Perferences -> Formatter -> Edit -> White Space 但我看不到可以在 .start 之前添加空格的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:04:14.633

您可以在 Sonar 中禁用此规则，它几乎没用。

为此，请转到“设置 -> 质量配置文件”。

# cuda - 为什么 nvcc 失败允许将 T * 类型的指针转 换为 void *？

> ID：14957922
> 
> 赞同：1
> 
> 时间：2013-02-19T12:49:04.887
> 
> 标签：cuda, nvcc

使用以下简单的删除器

```
struct CudaDeleter{ void operator()(void * ptr) { cudaFree( ptr ); } }; 
```

在使用 nvcc 编译的代码中使用删除器时出现以下错误。相同的删除器适用于 vs2012 编译器

```
warning : "std::unique_ptr<_Ty, _Dx>::unique_ptr(
const std::unique_ptr<_Ty, _Dx>::_Myt &)
[with _Ty=const int, _Dx=cuda::CudaDeleter]"

error : function "cuda::CudaDeleter::operator()"
cannot be called with the given argument list

warning : "std::unique_ptr<_Ty, _Dx>::unique_ptr(
const std::unique_ptr<_Ty, _Dx>::_Myt &)
[with _Ty=float, _Dx=cuda::CudaDeleter]" 
```

@talonmies：智能指针仅使用此函数构造

```
template <typename T>
std::unique_ptr<T, CudaDeleter> make_unique(size_t size)
{
    void * pMemory = nullptr;
    check( cudaMalloc(&pMemory, size) );
    return std::unique_ptr<T, CudaDeleter>( static_cast<T*>(pMemory) );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:38:11.757

以下对我有用。尝试下面的独立代码，如果它有效，那么您需要识别与您的代码的差异，如果不是，那么您的设置会有所不同。

```
#include <iostream>
#include <memory>

struct CudaDeleter
{
    void operator()(void *p)
    {
        std::cout << "Free..." << std::endl;
        cudaError_t res = cudaFree(p);
        if (res != cudaSuccess)
        {
            std::cout << "Error freeing: " << cudaGetErrorString(res) << std::endl;
        }
    }
};

template <typename T>
std::unique_ptr<T, CudaDeleter> make_unique(size_t size)
{
    void *pMemory = nullptr;
    std::cout << "Allocate..." << std::endl;
    cudaError_t res = cudaMalloc(&pMemory, size);
    if (res != cudaSuccess)
    {
        std::cout << "Error allocating pMemory: " << cudaGetErrorString(res) << std::endl;
        throw;
    }
    return std::unique_ptr<T, CudaDeleter>(static_cast<T*>(pMemory));
}

int main(void)
{
    {
        std::cout << "Create..." << std::endl;
        std::unique_ptr<float, CudaDeleter> x = make_unique<float>(100*sizeof(float));
        std::cout << "Destroy..." << std::endl;
    }
    std::cout << "Done." << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:14:38.627

我找到了我遇到的问题，最后这是我的错误

并不是说任何 T * 都不能转换为 void *，而是 const T * 不能转换为 void *。

此外，指向 const 的指针不能被 cudaFree 释放，这意味着 Eric 的建议

```
template<class T> struct CudaDeleter{ void operator()(T* ptr){...}} 
```

不管用。

像这样的东西会起作用

```
template <typename T>
std::unique_ptr<typename std::remove_const<T>::type, CudaDeleter> make_unique(size_t size)
{
    typename std::remove_const<T>::type * pMemory = nullptr;
    check( cudaMalloc(&pMemory, size) );
    return std::unique_ptr<typename std::remove_const<T>::type, CudaDeleter>( pMemory );
} 
```

# css - 如何在运行时 Magento 禁用媒体文件夹中的自动生成的 CSS？

> ID：14957923
> 
> 赞同：4
> 
> 时间：2013-02-19T12:49:08.313
> 
> 标签：css, magento, e-commerce, magento-1.7

我正在使用 magento 1.7 版本。在此，我的网站在运行时在媒体文件夹（magento\media\css）00f3d3f415b9352527c240b764ff14c3.css 中生成 CSS 文件

它没有从（magento/skin/frontend/default/ultimento/css）styles.css 中获取我的原始 CSS

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T13:28:11.640

转到`Admin -> System -> Configuration -> Advanced -> Developer`，单击`CSS Settings`并设置`Merge CSS Files`为`No`。清除缓存，您将再次看到预期的 CSS。

# c# - 通过本地网络发送字符和 PC 号码

> ID：14957925
> 
> 赞同：0
> 
> 时间：2013-02-19T12:49:10.250
> 
> 标签：c#, wcf, sockets

我有一台主 PC，它将接收来自许多其他 PC 的信息。主 PC 也会向其他 PC 发送命令。

PC 必须读取他们收到的内容并执行某些操作并调用某些函数。现在我的问题是如何实现这一点。我看到了 WCF，但我认为它不适用于我的条件。所以我想 Sockets 可以正常工作，但这就是我想要的。

让客户端继续读取他们在特定端口上接收的数据，并将数据发送到主 PC，每个客户端在不同端口或同一端口上，每个 PC 的 ID 将添加到我正在发送的字符串中.

例如：

```
a or b or ab 
```

如果我在客户端读取 a 或 b 我应该调用一个特定的函数。我在阅读串行端口时需要类似的东西。

任何想法或例子都会非常有帮助！我有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:52:03.090

您需要打开一个套接字，然后一次连续读取一个字节。检查字节是否等于您要查找的字节，并调用适当的方法。

```
var tcpClient = new TcpClient();
tcpClient.Connect("server host", server_port);
var streamReader = new StreamReader(tcpClient.GetStream());
while (true)
{
    var letter = (char)streamReader.Read();
    if (letter == 'a')
    {
        // ...
    }
    else if (letter == 'b')
    {
        // ...
    }
} 
```

上面的代码示例应该可以帮助您入门。

# ios - 将幻灯片过渡动画的方向更改为向左

> ID：14957927
> 
> 赞同：1
> 
> 时间：2013-02-19T12:49:16.787
> 
> 标签：ios, xamarin.ios

当我打开特定视图时，我想将幻灯片动画的方向更改为 --> 从右到左，而不是默认方向（从左到右）。

我找到了改变动画过渡的解决方案。虽然这是一个翻转动画，但我想改变导航控制器默认滑动动画的方向。

```
var screen = new Screen();
NavigationController.PushViewController(screen, false);

UIView.BeginAnimations(null,IntPtr.Zero);
UIView.SetAnimationDuration(0.75);
UIView.SetAnimationTransition(UIViewAnimationTransition.FlipFromLeft , NavigationController.View,true); // <-- Change the animation
UIView.CommitAnimations(); 
```

注意：我正在使用 MonoTouch/C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:52:00.073

抱歉，我在 MonoTouch/C# 中一无所获，但我在 ObjC 中实现了相同的行为，它完美地模拟了滑动。在这种情况下，它用于模拟带有标签栏的视图时的向后滑动行为。也许它有帮助：

```
- (void)hitBack
{
    // Get the views.
    UIView * fromView = self.tabBarController.selectedViewController.view;
    UIView * toView = ((UIViewController *)[self.tabBarController.viewControllers objectAtIndex:0]).view;

    // Get the size of the view area.
    CGRect viewSize = fromView.frame;

    // Add the to view to the tab bar view.
    [fromView.superview addSubview:toView];

    // Position it off screen.
    toView.frame = CGRectMake( -320 , viewSize.origin.y, 320, viewSize.size.height);

    [UIView animateWithDuration:0.4 animations:
     ^{
         // Animate the views on and off the screen. This will appear to slide.
         fromView.frame =CGRectMake( 320 , viewSize.origin.y, 320, viewSize.size.height);
         toView.frame =CGRectMake(0, viewSize.origin.y, 320, viewSize.size.height);
     }
                     completion:^(BOOL finished)
     {
         if (finished)
         {
             // Remove the old view from the tabbar view.
             [fromView removeFromSuperview];

             //change tab
             self.tabBarController.selectedIndex = 0;
         }
     }];
} 
```

在 C# 中：

```
void HitBack ()
{
    // Get the views.
    var fromView = tabBarController.SelectedViewController.View;
    var toView = tabBarController.ViewControllers [0].View;

    // Get the size of the view area.
    var viewSize = fromView.Frame;

    // Add the to view to the tab bar view.
    fromView.Superview.AddSubview (toView);

    // Position it off screen.
    toView.Frame = new RectangleF ( -320 , viewSize.Y, 320, viewSize.Height);

    UIView.Animate (0.4, () => { animateWithDuration:0.4 animations:
         // Animate the views on and off the screen. This will appear to slide.
         fromView.Frame = new RectangleF ( 320 , viewSize.Y, 320, viewSize.Height);
         toView.Frame =new RectangleF (0, viewSize.Y, 320, viewSize.Height);
     }, (bool finished) => {
         if (finished){
             // Remove the old view from the tabbar view.
             fromView.RemoveFromSuperview ();

             //change tab
             tabBarController.SelectedIndex = 0;
         });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-13T02:30:41.647

这就是你想要的下面。这是从选项卡视图的过渡。希望它会帮助一些人：

```
protected void HandleLeftSwipe(UISwipeGestureRecognizer recognizer)
{
    if (this.TabBarController.SelectedIndex != 4) {
        UIView fromView = this.TabBarController.SelectedViewController.View;
        UIView toView = this.TabBarController.ViewControllers[this.TabBarController.SelectedIndex+1].View;

        // Get the size of the view area.
        var viewSize = fromView.Frame;

        // Add the to view to the tab bar view.
        fromView.Superview.AddSubview (toView);

        var minAlpha = -320.0;
        var maxAlpha = 320.0;
        var midAlpha =0.0;
        // Position it off screen.
        toView.Frame = new CGRect ( maxAlpha , viewSize.Y, maxAlpha, viewSize.Height);
        UIView.Animate (.3,.1, UIViewAnimationOptions.CurveEaseOut ,
            () => { 
                fromView.Frame = new CGRect ( minAlpha , viewSize.Y, maxAlpha, viewSize.Height);
                toView.Frame =new CGRect (midAlpha, viewSize.Y, maxAlpha, viewSize.Height);
            },
            () => {
                fromView.RemoveFromSuperview ();
                this.TabBarController.SelectedIndex = this.TabBarController.SelectedIndex + 1;
            }
        );
    }
}

protected void HandleRightSwipe(UISwipeGestureRecognizer recognizer)
{
    if (this.TabBarController.SelectedIndex != 0) {
        UIView fromView = this.TabBarController.SelectedViewController.View;
        UIView toView = this.TabBarController.ViewControllers[this.TabBarController.SelectedIndex-1].View;

        // Get the size of the view area.
        var viewSize = fromView.Frame;

        // Add the to view to the tab bar view.
        fromView.Superview.AddSubview (toView);

        var minAlpha = -320.0;
        var maxAlpha = 320.0;
        var midAlpha =0.0;
        // Position it off screen.
        toView.Frame = new CGRect ( minAlpha , viewSize.Y, maxAlpha, viewSize.Height);
        UIView.Animate (.3,.1, UIViewAnimationOptions.CurveEaseOut ,
            () => { 
                fromView.Frame = new CGRect ( maxAlpha , viewSize.Y, maxAlpha, viewSize.Height);
                toView.Frame =new CGRect (midAlpha, viewSize.Y, maxAlpha, viewSize.Height);
            },
            () => {
                fromView.RemoveFromSuperview ();
                this.TabBarController.SelectedIndex = this.TabBarController.SelectedIndex - 1;
            }
        );
    }
} 
```

# salesforce - 保存时，salesforce 中的查找字段为空

> ID：14957930
> 
> 赞同：0
> 
> 时间：2013-02-19T12:49:20.507
> 
> 标签：salesforce, apex-code, lookup, visualforce

我对标准查找字段有疑问。当我尝试保存它时，当我使用自动完成或仅键入名称时它的值为**null**但当我通过单击查找图标使用查找弹出窗口时它可以工作。

这是（部分）代码。（不是全部，但即使是这个简单的控制器和页面也不起作用......）控制器：

```
public with sharing class UnresolvedItemsController {

public list<TaskItem> myUnresolvedTaskItems {get;set;}

public class TaskItem {
    public string taskId {get;set;}
    public string subject {get;set;}
    public datetime createdDate {get;set;}
    public DummyObject__c dumObj {get;set;}
}

public UnresolvedItemsController(ApexPages.Standardcontroller controller) {
    if (myUnresolvedTaskItems==null) {
        myUnresolvedTaskItems = new list<TaskItem>();
        list<Task> myUnresolvedTasks = [select id,subject,createdDate,Description from Task Where Status='Not Started' and isDeleted=false and isClosed=false and isArchived=false and OwnerId=:UserInfo.getUserId() and subject like 'Unresolved Email:%' limit 10];
        TaskItem tmp = new TaskItem();
        for (task myT:myUnresolvedTasks) {
            myUnresolvedTaskItems.add(getInfoFromTask(myT));
        }
    }   
}

public TaskItem getInfoFromTask(Task myTask) {
    TaskItem returnTaskItem = new TaskItem();
    returnTaskItem.subject = myTask.Subject.replace('Unresolved Email: ','');
    returnTaskItem.createdDate = myTask.createdDate;
    returnTaskItem.taskId = myTask.Id;
    returnTaskItem.dumObj = new DummyObject__c();
    return returnTaskItem;
}

public pagereference save() {
    system.debug('1-----'+myUnresolvedTaskItems);
    return null;
}
} 
```

看法：

```
<apex:page standardcontroller="Task" extensions="UnresolvedItemsController">
<apex:form >
    <apex:pageblock >
        <apex:pageblockbuttons >
            <apex:commandbutton action="{!Save}" value="{!$Label.Save}" />
            <apex:commandbutton action="{!Cancel}" value="{!$Label.Cancel}" />
        </apex:pageblockbuttons>

        <apex:pageblocktable value="{!myUnresolvedTaskItems}" var="ti">
            <apex:column >
                <apex:facet name="header">Subject</apex:facet>
                <a href="/{!ti.taskId}">{!ti.subject}</a>
            </apex:column>
            <apex:column >
                <apex:facet name="header">Date</apex:facet>
                {!ti.createdDate}
            </apex:column>
            <apex:column >
                <apex:facet name="header">Assign to salesforce.com objects</apex:facet>
                <apex:inputfield value="{!ti.dumObj.Contact__c}" />
            </apex:column>

        </apex:pageblocktable>
    </apex:pageblock>
</apex:form>
</apex:page> 
```

dummyObject 是一个具有几个查找字段的对象。（Contact_c*到 Contact，* Account_c到 Account，等等...）

我实际上并没有保存它。但是当你 system.debug 时它不应该为**空......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:18:08.830

我终于发现了问题所在。这是一个已知问题，我认为这是一个非常严重的错误。为联系人使用输入字段时，如果名字字段或姓氏字段中有空格，则会出错。

知识文章编号：000123565

# oracle - 将 ORACLE 表字段默认值设置为公式

> ID：14957931
> 
> 赞同：2
> 
> 时间：2013-02-19T12:49:21.407
> 
> 标签：oracle, expression, default

我有一个这样的 oracle 表：

```
create table tms_transaction_tbl
(
trans_id number primary key,
location_id number,
trans_date date,
resource_id number,
ts_id number,
max_value number,
booked_units number default 0,
remaining number default (select max_value-booked_units),
booked number not null ,
user_id number,
trans_time timestamp
); 
```

如您所见，我尝试将剩余的默认值设置为 (max_value-booked_units)

```
remainging number default (select max_value-booked_units), 
```

但它给了我这个错误这个错误

```
ora-22818:subquery expression not allowed here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:56:14.197

您不能在 DEFAULT 表达式中引用其他列

这是[Oracle 文档的片段](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#SQLRF01402)

> 对默认列值的限制 DEFAULT 表达式不能包含对 PL/SQL 函数或其他列、伪列 CURRVAL、NEXTVAL、LEVEL、PRIOR 和 ROWNUM 或未完全指定的日期常量的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:14:25.710

您不能使用 SELECT 作为默认值，它必须是常量。

如果您使用的是 Oracle 11g，这就是[虚拟列](http://www.oracle-base.com/articles/11g/virtual-columns-11gr1.php)的用途。您不能插入或更新它们，但会在数据库中为您提供预先计算的列。

```
create table tms_transaction_tbl
 ( trans_id number primary key,
   location_id number,
   trans_date date,
   resource_id number,
   ts_id number,
   max_value number,
   booked_units number default 0,
   remaining number generated always as ( max_value - booked_units ) virtual,
   booked number not null ,
   user_id number,
   trans_time timestamp
   ); 
```

[CREATE TABLE 语句](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#SQLRF01402)的文档中进一步描述了语法。如果您不使用 11g，您可以使用表格顶部的视图来实现相同的逻辑。

如果您不想使用视图或虚拟列，那么[我只能建议](https://stackoverflow.com/questions/14937024/mysql-storing-business-logic-in-table/14937413#14937413)您根本不要存储这些数据。

# sharepoint-2010 - 具有自定义母版页的 SharePoint 2010 中的人员选取器呈现不正确

> ID：14957932
> 
> 赞同：-1
> 
> 时间：2013-02-19T12:49:22.620
> 
> 标签：sharepoint-2010, sharepoint-designer, peoplepicker, sharepointfoundation2010

我有一个包含几个人员字段的列表。有一个页面允许输入这些值，但该页面上的人员选择器呈现不正确。如果我们使用默认的 v4.master，它会正确呈现。

![人物选择器渲染不正确。](../Images/b68e5f9bdffee955ac9efcb6a06aea57.png)

有人可以让我知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:12:57.467

有一个 javascript 正在更改页面上 textareas 上的类，以便它可以自动增长。那是造成问题的原因。

删除了那条线，它解决了这个问题。

谢谢。

# maven - 自制插件的Maven设置前缀

> ID：14957935
> 
> 赞同：0
> 
> 时间：2013-02-19T12:49:29.737
> 
> 标签：maven, maven-plugin, m2eclipse

今天我尝试为 Maven 制作自己的插件。它工作得很好；）之后我想设置一个前缀以更短的方式使用 maven comman。这也很好用；）

我现在的问题是：

如果我想使用我的前缀，我必须在 .m2/settings.xml 中设置我的插件的 groupId。否则他无法找到插件（当然不是）

我现在想知道：如何自动执行此操作？我不希望想要使用我的插件的人手动设置 groupId。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:12:40.873

插件前缀与是否可以找到插件无关。如果您尚未定义 pluginGroup 或不符合命名约定，则必须键入完整的限定名称，包括。包，插件的版本，如：

```
mvn package:yourpluginname-maven-plugin:1.0.1:WhatEverGoal 
```

要使用简短的命令行，您必须遵循以下[命名约定](http://maven.apache.org/guides/introduction/introduction-to-plugin-prefix-mapping.html)：

```
yourpluginname-maven-plugin 
```

或者

```
maven-yourpluginmame-plugin 
```

约定 maven-yourpluginname-plugin 是为来自 Apache org 的插件保留的......所以最好的办法是将你的插件命名为：

```
yourpluginname-maven-plugin 
```

# ruby-on-rails - rails模型的影子表

> ID：14957936
> 
> 赞同：2
> 
> 时间：2013-02-19T12:49:29.750
> 
> 标签：ruby-on-rails, audit-tables

我的 Rails 应用程序中有关注模型，当用户关注某些内容时 - 创建记录，取消关注 - 删除记录。

我需要在单独的表中跟踪此更改（仅插入和删除）。

它将用于使用普通 SQL 构建一些报告 - 这就是为什么表应该具有类似的结构，即“影子”

我不想用额外的逻辑来破坏原始模型 - 有一些解决方案，但它们不够灵活：

**[https://github.com/rubiety/has_draft](https://github.com/rubiety/has_draft)** - 我无法选择具体的操作

**[https://github.com/bglusman/ruby-shadow-tables](https://github.com/bglusman/ruby-shadow-tables)** - 仅限原始和 mysql

有人知道这种情况的一些好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:21:41.797

我没有找到任何适合这种情况的 gem，并决定用 rails 观察者来实现它。没什么特别的..只是最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:13:51.690

您可以再创建一个表 shadow_follows 并使用回调方法 after_create 和 before_destroy 将目标记录复制到新表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T22:23:33.627

这已经相当老了，但如果其他人想做这样的事情，我和一个朋友做了一个脚本来使用 DB 触发器在 Rails 中设置影子表...... [https://github.com/bglusman/ruby-shadow - 表](https://github.com/bglusman/ruby-shadow-tables)

这有点笨拙，并且肯定会从被抽象成一个 gem 中受益，也许是一个 DB 中立的解决方案。

# c# - Crystal Reports 中的类似面板的控件

> ID：14957938
> 
> 赞同：4
> 
> 时间：2013-02-19T12:49:42.017
> 
> 标签：c#, .net, winforms, crystal-reports, panel

当我使用面板控件时，面板包含的控件，顶部和左侧属性是从面板开始设置的。例如，如果我有一个放在面板中的标签，如果我有 Label.Left = 100 ，则此属性表示从容器面板开始 100 像素，而不是从表单开始。我在 Crystal Reports 中搜索这样的控件。Box 对象不是这样的。这张图片更好地描述了我的问题：

![在此处输入图像描述](../Images/2493f7e8f6c944d18df49b282206c07b.png)

Label.Left = 100 这里。我应该在 Crystal Reports 中使用哪个控件来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T11:21:44.430

我不确定我是否得到您的问题，但我认为这可以帮助您。在 c#.net 中，您可以使用 left 和 top 将对象添加到水晶报表中，例如以下代码：

```
 CRAXDRT.Report report1 = new CRAXDRT.Report();
            CRAXDRT.Application app1 = new CRAXDRT.Application();
            report1 = app1.OpenReport("Test.rpt", OpenReportMethod.OpenReportByDefault);
            CRAXDRT.OleObject to3 = report1.Sections[1].AddPictureObject("YourPhoto.bmp", 0, 0);
            to3.Left = 100;
            to3.Top = 20;                
            to3.Height = 500;
            to3.Width = 600; 
```

# javascript - getUserMedia permission denied after clicking the "allow" button

> ID：14957945
> 
> 赞同：0
> 
> 时间：2013-02-19T12:50:00.423
> 
> 标签：javascript, html, webcam, ubuntu-12.04, getusermedia

I'm trying to use the `navigator.getUserMedia()` and as expected on my webpage (or for example [https://apprtc.appspot.com/](https://apprtc.appspot.com/)) I'm asked to allow or deny access to my webcam/microphone.

But after I click "allow" nothing happens and on my log I can see:

```
NavigatorUserMediaError {code: 1, PERMISSION_DENIED: 1} 
```

I'm on Ubuntu 12.04 and tried on Chromium 24.0.1312.56, Chrome 24 and beta 25 and Firefox 18.0.2\. Same problem everywhere.

I can access my webcam on webpages using Flash like here [http://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)

Any idea what is the problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:29:43.250

I changed the webcam and it's working. So apparently Microsoft Lifecam VX-7000 doesn't work on Ubuntu 12.04 with `navigator.getUserMedia` because this cam works on Windows 7 (at least with Chrome).

# python - 将字符串日期转换为带有附加功能的日期

> ID：14957953
> 
> 赞同：0
> 
> 时间：2013-02-19T12:50:30.537
> 
> 标签：python, datetime

我有以下格式的字符串

```
taskLastRunTime = 19:30:00, 18/02/2013 
```

我想将其转换为另一个字符串，但格式为

```
19:30:00, Monday 18 Feb 2013 
```

我试过使用 strptime 但是当我尝试以下

```
date_tasklastRunTime = time.strptime(taskLastRunTime, "%A %d %b %Y") 
```

我得到以下

```
ValueError: time data did not match format:  data=19:30:00, 18/02/2013  fmt=%A %d %b %Y 
```

这样做的最佳方法是什么（我使用的是 Python 2.4.1）或任何指针？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:52:48.073

如果您的输入如下所示：

```
19:30:00, 18/02/2013 
```

我认为您的`strptime`格式字符串如下所示：

```
%H:%M:%S, %d/%m/%Y 
```

# node.js - 如何使用 mocha / node.js 获取响应的正文

> ID：14957957
> 
> 赞同：2
> 
> 时间：2013-02-19T12:50:42.087
> 
> 标签：node.js, mocha.js

我对 mocha / omf 很陌生。我有以下基本测试：

```
omf('http://localhost:7000', function(client) {
  client.get('/apps', function(response){
    response.has.statusCode(200);
    response.has.body('["test1","test2"]');
  });
}); 
```

我想检查值“test2”是否在返回的列表中，但我不知道这是如何可行的。我在想类似的东西：

```
omf('http://localhost:7000', function(client) {
  client.get('/apps', function(response){
    response.has.statusCode(200);
    // response.body.split.contains("test2"); // Something like that
  });
}); 
```

我可以访问 response.body 然后解析字符串吗？

** 更新 **

我试过用 mocha 进行测试，只是一个简单的状态码：

```
request = require("request");

describe('Applications API', function(){
  it('Checks existence of test application', function(done){
    request
      .get('http://localhost:7000/apps')
      .expect(200, done);
  });
}); 
```

但我收到以下错误：

> TypeError: Object # has no method 'expect'

任何的想法 ？摩卡咖啡需要额外的插件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T20:15:16.657

第二个示例不能如图所示工作。request.get 是异步的。

这是一个使用请求运行的工作示例，应该

```
request = require("request");
should = require("should");

describe('Applications API', function() {
  it('Checks existence of test application', function(done) {
    request.get('http://google.com', function(err, response, body) {
      response.statusCode.should.equal(200);
      body.should.include("I'm Feeling Lucky");
      done();
    })
  });
}); 
```

# php - 在 PHP 数组中指定数据类型

> ID：14957959
> 
> 赞同：3
> 
> 时间：2013-02-19T12:50:46.430
> 
> 标签：php, arrays, types

我有一个包含这个的数组

```
"postage_cost" => $customer[total_shipping_cost] 
```

当我使用`var_dump`我得到

```
["postage_cost"]=>
  string(5) "34.54" 
```

制作数组时如何声明这是一个浮点数而不是字符串？我正在将此数组发送到 Web 服务，我担心可能会有一些数据类型混淆。$customer 结果来自 MySQL 请求。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T12:52:02.967

```
"postage_cost" => (float) $customer['total_shipping_cost'] 
```

请注意，我在键中添加了引号，因为我 99.999% 确定您没有名为的**常量**`total_shipping_cost`。PHP 对此很友好，但如果激活了错误报告，这将是一个**通知：未定义常量**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:54:58.030

```
"postage_cost" => $customer['total_shipping_cost'] + 0.0 
```

或者

```
"postage_cost" => (float) $customer['total_shipping_cost'] 
```

请注意，我在 . 周围添加了单引号`total_shipping_quotes`。这不是强制性的，但被认为比原始文本更好的样式；它也稍微快一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:53:33.253

```
"postage_cost" => floatval($customer[total_shipping_cost]) 
```

# java - 将数组中的元素连接到字符串

> ID：14957964
> 
> 赞同：34
> 
> 时间：2013-02-19T12:51:00.393
> 
> 标签：java, arrays, string, converter

我有点困惑。我在任何地方都找不到答案；（

我有一个字符串数组：

```
String[] arr = ["1", "2", "3"]; 
```

然后我通过以下方式将其转换为字符串：

```
String str = Arrays.toString(arr);
System.out.println(str); 
```

我希望得到字符串`"123"`，但我得到了字符串`"[1,2,3]"`。

我怎么能在java中做到这一点？我正在使用 Eclipse IDE

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-19T12:54:29.627

> [使用**StringBuilder**而不是 StringBuffer，因为它比 StringBuffer 快](http://www.tutorialspoint.com/java/java_string_buffer.htm)。

[**示例代码**](https://ideone.com/DdbJuk)

```
String[] strArr = {"1", "2", "3"};
StringBuilder strBuilder = new StringBuilder();
for (int i = 0; i < strArr.length; i++) {
   strBuilder.append(strArr[i]);
}
String newString = strBuilder.toString(); 
```

这就是为什么这是使用字符串连接的更好解决方案的原因：当您连接 2 个字符串时，会创建一个新的字符串对象并执行逐个字符的复制。
实际上意味着代码复杂度将是数组大小的平方的顺序！

**（`1+2+3+ ... n`这是每次迭代复制的字符数）。** **在这种情况下， StringBuilder**只会执行一次“复制到字符串”，从而将复杂性降低到`O(n)`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-19T12:52:57.943

```
Arrays.toString(arr); 
```

输出为 [1,2,3] 并将其存储到您的字符串中。并打印它，以便获得输出 [1,2,3]。

如果你想得到输出 123 试试这个：

```
public static void main(String[] args) {
    String[] arr= {"1","2","3"};
    String output ="";
    for(String str: arr)
        output=output+str;
    System.out.println(output);

} 
```

输出：

```
123 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-19T12:56:15.763

简单的回答：

`Arrays.toString(arr);`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-19T12:56:40.850

**Arrays.toString：（**来自 API，至少对于`Object[]`它的版本）

```
public static String toString(Object[] a) {
    if (a == null)
        return "null";
    int iMax = a.length - 1;
    if (iMax == -1)
        return "[]";

    StringBuilder b = new StringBuilder();
    b.append('[');
    for (int i = 0; ; i++) {
        b.append(String.valueOf(a[i]));
        if (i == iMax)
            return b.append(']').toString();
        b.append(", ");
    }
} 
```

这意味着它`[`在开头、`]`结尾和`,`元素之间插入了。

**如果你想要它没有那些字符：**（StringBuilder 比下面的要快，但它不能是少量的代码）

```
String str = "";
for (String i:arr)
  str += i;
System.out.println(str); 
```

**边注：**

`String[] arr[3]= [1,2,3]`不会编译。

大概你想要：`String[] arr = {"1", "2", "3"};`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-08-17T12:27:13.053

使用 Arrays.toString() 函数。它使您的代码简短易读。它在内部使用字符串生成器，因此它也很有效。为了摆脱多余的字符，您可能会选择使用 String.replace() 函数来消除它们，这无疑会再次降低可读性。

```
String str = Arrays.toString(arr).replaceAll(", |\\[|\\]", ""); 
```

这类似于 Tris Nefzger 的答案，但没有冗长的子字符串构造来摆脱方括号。

正则表达式的解释：“|” 表示“、”和“[”和“]”中的任何一个。"\\" 告诉 Java 字符串，我们不是指某个特殊字符（如换行符“\n”或制表符“\t”），而是真正的反斜杠“\”。因此，Regex 解释器读取的不是“\\[”，而是“\[”，这告诉它我们的意思是字面方括号，并且不想将它用作 Regex 语言的一部分（例如，“[^3] *”表示任意数量的字符，但它们都不应该是“3”）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-20T19:29:51.703

仅用 1 行执行 java 8 方式：

`String.join("", arr);`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-06-11T01:48:36.427

[Guava](https://code.google.com/p/guava-libraries/wiki/StringsExplained)有 Joiner 实用程序来解决这个问题：

例子：

```
String joinWithoutSeparator = Joiner.on("").join(1, 2, 3); // returns "123"
String joinWithSeparator = Joiner.on(",").join(1, 2, 3); // returns "1,2,3" 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-07-23T17:05:29.667

我刚刚写了以下内容：

```
public static String toDelimitedString(int[] ids, String delimiter)
{
    StringBuffer strb = new StringBuffer();
    for (int id : ids)
    {
      strb.append(String.valueOf(id) + delimiter);
    }
    return strb.substring(0, strb.length() - delimiter.length());
 } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-02-19T12:56:32.957

Arrays.toString 正在格式化输出（添加了括号和逗号）。你应该实现你自己的toString方法。

```
public String toString(String[] arr){
    String result = "";
    for(String s : arr)
        result+=s;
    return result;
} 
```

[编辑] Stringbuilder 不过更好。往上看。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-06-18T12:55:12.057

对于基于 Spring 的项目：

[org.springframework.util.StringUtils.arrayToDelimitedString(Object[] arr, String delim)](http://docs.spring.io/spring/docs/3.2.0.M1/api/org/springframework/util/StringUtils.html#arrayToDelimitedString%28java.lang.Object%5B%5D,%20java.lang.String%29)

对于 Apache Commons 用户，一组不错的连接方法：

[org.apache.commons.lang.StringUtils.join(Object[] 数组，字符分隔符)](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#join%28java.lang.Object%5B%5D,%20char%29)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-12-04T17:15:41.723

使用番石榴[`Joiner`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Joiner.html)（在 r18 内部使用`StringBuilder`）

```
String[]  arr= {"1","2","3"};
Joiner noSpaceJoiner = Joiner.on("");
noSpaceJoiner.join(arr)) 
```

`Joiner`很有用，因为它是线程安全且不可变的，并且可以在许多地方重用，而无需复制代码。在我看来，它也更具可读性。

* * *

使用 Java 8 的[`Stream`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html)支持，我们还可以将其简化为单行。

```
String concat = Stream.of(arr).collect(Collectors.joining()); 
```

在这种情况下，两个输出都是`123`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-09-15T21:58:57.237

这是将字符串数组转换为不带 `[`或`]` 或的字符串的小代码`,`

```
String[] strArray = new String[]{"Java", "String", "Array", "To", "String", "Example"};

String str = Arrays.toString(strArray);
            str = str.substring(1, str.length()-1).replaceAll(",", ""); 
```

*   首先将数组转换为字符串。
*   其次从 x 到 y 位置获取文本。
*   第三个用“”替换所有“，”

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-02-19T12:57:20.410

看看[打印数组中所有元素的通用方法](https://stackoverflow.com/questions/5861926/generic-method-to-print-all-elements-in-an-array)

但简而言之， Arrays.toString(arr) 只是打印原始数组内容的一种简单方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-02-19T12:57:07.760

对象类有 toString 方法。扩展它的所有其他类都会覆盖 toString 方法，因此在数组中，toString 也会以这种方式被覆盖。因此，如果您希望以自己的方式输出，则需要创建自己的方法，通过该方法可以获得所需的结果。

```
str="";
for (Integer i:arr){
     str+=i.toString();
} 
```

希望这可以帮助

参考[为什么java中的toString方法似乎不适用于数组](https://stackoverflow.com/questions/7060016/why-does-the-tostring-method-in-java-not-seem-to-work)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-12-04T16:52:31.937

这是一种方法： Arrays.toString(array).substring(1,(3*array.length-1)).replaceAll(", ","");

这是一个演示类：

```
package arraytostring.demo;

import java.util.Arrays;

public class Array2String {

        public static void main(String[] args) {

                String[] array = { "1", "2", "3", "4", "5", "6", "7" };
                System.out.println(array2String(array));
                // output is: 1234567
        }

        public static String array2String(String[] array) {

                return Arrays.toString(array).substring(1, (3 * array.length - 1))
                                .replaceAll(", ", "");

        }

} 
```

Scala 使这更容易、更清洁、更安全：

```
scala> val a = Array("1", "2", "3")
a: Array[String] = Array(1, 2, 3)

scala> val aString = a.mkString
aString: String = 123

scala> println(aString)
123 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-07-30T08:06:07.600

对于那些使用 Android 开发的人，请使用 TextUtils。

```
String items = TextUtils.join("", arr); 
```

假设 arr 是类型`String[] arr= {"1","2","3"};`

输出将是 123

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-23T19:49:59.657

Arrays.toString() 可用于将字符串数组转换为字符串。可以使用正则表达式或简单地使用替换方法来删除多余的字符。

```
Arrays.toString(strArray).replace(",", "").replace("[", "").replace("]", ""); 
```

Java 8 引入了 String join 的新方法 public static String join(CharSequence delimiter, CharSequence... elements)

```
String.join("", strArray); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-10-25T21:55:24.507

使用 Java 8 的示例。

```
 String[] arr = {"1", "2", "3"};
  String join = String.join("", arr); 
```

我希望这会有所帮助

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2017-10-25T02:28:48.840

```
String newString= Arrays.toString(oldString).replace("[","").replace("]","").replace(",","").trim(); 
```

# perl - 如何在 txt 文件 Perl 中将每一行添加到单行中？

> ID：14957965
> 
> 赞同：0
> 
> 时间：2013-02-19T12:51:03.873
> 
> 标签：perl

我对这部分的代码有疑问：

```
foreach my $line(keys %results){
     print Dump($post) if $results{$line} == 1;
} 
```

我只需要打印一次'print Dump($post)'

这是所有的部分

```
my $f1 = "/home/shaman/Desktop/data.txt";
my $f2 = "/home/shaman/Desktop/ini.txt";

my %results = (); 
open FILE1, "$f1" or die "Could not open file: $! \n";

while(my $line = <FILE1>){
    $results{$line}=1;
}
close(FILE1); 

open FILE2, "$f2" or die "Could not open file: $! \n";
while(my $line =<FILE2>) {  
    $results{$line}++;
}
close(FILE2);  

foreach my $line(keys %results){
    print Dump($post) if $results{$line} == 1;
} 
```

$post 包含与它相同的行，但由于哈希的原因，如果我逐行打印，我会得到随机行...

如果我运行代码，它将重新打印打印的帖子 4-5 次，这取决于帖子中有多少行（行是动态的），但我需要只打印一次帖子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:38:23.077

听起来您只想打印一次，只要您的结果中至少有一行等于 1。

如果这是正确的，您可以对您的代码进行以下简单修改：

```
foreach my $line(keys %results){
     if ($results{$line} == 1)
     {
          print Dump($post);
          last;
     }
} 
```

一旦找到匹配项，这将退出循环。

如果您因为其他原因需要完成整个循环，请使用 M42 的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:35:18.157

怎么样：

```
my $dump_done = 0;
foreach my $line(keys %results){
    if ($results{$line} == 1 and !$dump_done) {
        print Dump($post);
        $dump_done = 1;
    }
} 
```

# jquery - 带有漂亮照片和镀铬的 caroufredsel

> ID：14957966
> 
> 赞同：0
> 
> 时间：2013-02-19T12:51:05.543
> 
> 标签：jquery, css, prettyphoto, caroufredsel

我正在为图像使用 carouFredSel 滑块，所有文字都很棒，我将 prettyPhoto 与它集成，在 Firefox 中完美运行，但在 Chrome / Safari 中，主图像不会加载，如果我在这里删除 prettyPhoto 图像，它也会在 Chrome 中正常加载，我尽我所能解决问题，但找不到解决方案..

知道有什么问题吗？可能与 prettyPhoto 或 carouFredsel 有关吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:39:58.400

好的，我找到了一个修复程序，希望对某人有所帮助..您只需要添加以下 css 代码即可使其与 Chrome 和 Safari 一起使用..

```
#slider_images a {
display: block;
float: left;
} 
```

# javascript - 重复的ajax内容

> ID：14957972
> 
> 赞同：0
> 
> 时间：2013-02-19T12:51:21.987
> 
> 标签：javascript, ajax, jquery-mobile, knockout.js

我在 jquery mobile（淘汰赛）中遇到重复 ajax 内容的问题。当我调用返回按钮以启动表单以及再次调用所有进程时，问题就开始了。示例代码：

```
 <div data-role="header" data-theme="c">
                <a data-bind="click: headerBackBtn" data-role="button">Back</a>
                <h1>
                    Header title
                </h1>
            </div>
            <div data-role="content">
                <form id="form" name="form" data-bind="visible: form">
                        <label for="name">Name:</label>
                        <input type="search" name="name" id="name"/>
                        <button data-bind="click: toFirstContent" data-icon="search">Search</button>
                </form>

                <!-- first content -->
                <div class="div-1" id="div-1" data-bind="visible: div-1">
                    <a data-bind="click: toSecondContent">
                        Link
                    </a>
                </div>

                <!-- second content -->
                <div class="div-2" id="div-2" data-bind="visible: div-2">
                    Text
                </div>
            </div>
            <div data-role="footer" data-theme="c">
                <h4>footer</h4>
            </div> 
```

```
 self.headerBackBtn = function () {
        if (self.div-2()) {
            self.div-2(false);
            self.div-1(true);
            return;
        }
        if (self.div-1()) {
            self.div-1(false);
            self.form(true);
            return;
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:42:32.980

解决方案是[http://api.jquery.com/remove/](http://api.jquery.com/remove/)。对于每个元素，我将 class="removeItem" 放入，然后调用 $(".removeItem").remove()，然后调用获取新元素的函数...

# cakephp - CakePHP - 如何为单个单选按钮添加属性？

> ID：14957974
> 
> 赞同：6
> 
> 时间：2013-02-19T12:51:23.870
> 
> 标签：cakephp, radio-button

如何将单个属性添加到单选按钮？据我所知，CakePHP 只允许您向组中的所有单选按钮添加相同（有限）的属性。

例如，关于如何生成这个的任何想法？

```
<input type="radio" checked="checked" value="0" name="data[MyModel][field]" id="custom-id-1" class="custom-class-1" data-something="test1">
<label for="custom-id-1">Test 1</label>
<input type="radio" checked="checked" value="0" name="data[MyModel][field]" id="custom-id-2" class="custom-class-2" data-something="test2">
<label for="custom-id-2">Test 2</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-25T10:18:23.607

**尝试这个 ：**

```
$options = array('1' => 'Test 1'); <br> $attributes =
array('value'=>'1','class'=>'custom-class-1','id'=>'custom-id-1','data-something'=>'test1');

echo $this->Form->radio('field_name1', $options, $attributes);

---------------------

$options = array('1' => 'Test 2'); <br> $attributes =
array('value'=>'1','class'=>'custom-class-2','id'=>'custom-id-2','data-something'=>'test2');

echo $this->Form->radio('field_name2', $options, $attributes); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T07:50:52.663

`echo $this->Form->input('title', array('type' => 'radio', 'class' => 'custom-class', 'atributeName' => 'attributeValue'));`

# java - Spring Inject/AutoWire 一个在运行时创建的 Groovy 类

> ID：14957980
> 
> 赞同：2
> 
> 时间：2013-02-19T12:51:38.513
> 
> 标签：java, spring, groovy

我有一个执行 Groovy 脚本的 Spring Controlled Grovoy Script Executor 类。

像下面的东西

```
 final ClassLoader parent = getClass().getClassLoader();
    final GroovyClassLoader loader;

    loader = AccessController.doPrivileged(new PrivilegedAction<GroovyClassLoader>() {
        @Override
        public GroovyClassLoader run() {
            return new GroovyClassLoader(parent);
        }
    });

    this.groovyClass = loader.parseClass(" def returnSomthing() { return SpringControlledBean.action('Hello World') } ");
    final GroovyObject groovyObject = (GroovyObject) this.groovyClass.newInstance();
    final Object[] args = { };
    final Object result = groovyObject.invokeMethod("returnSomthing", args); 
```

是否可以将*SpringControlledBean*注入脚本？通过自动装配，或者让 Spring 创建类，了解当脚本发生变化时需要重新创建类？

如果该类是类路径的一部分并使用 java 构建，则可以使用 Autowire，但是此脚本内容在运行时已过去，因此对于 spring 来说不是静态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:08:34.043

您需要一个 的实例`AutowireCapableBeanFactory`，您可以通过将您的类声明为 a 来获得该实例`BeanFactoryAware`，然后您可以调用方法`autowireBean(existingBean)`。

例如：

```
class MyBeanCreator implements BeanFactoryAware {

  private AutowireCapableBeanFactory beanFactory; //you need to add setter as well

  def foobar() {
    //your existing code....
    final GroovyObject groovyObject = (GroovyObject) this.groovyClass.newInstance();

    //Wire with Spring 
    beanFactory.autowireBean(groovyObject);

    //rest of your existing code...
  }

} 
```

另见：[http ://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/AutowireCapableBeanFactory.html](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/AutowireCapableBeanFactory.html)

# ruby-on-rails - 水豚 click_link 与 :href 匹配

> ID：14957981
> 
> 赞同：39
> 
> 时间：2013-02-19T12:51:41.823
> 
> 标签：ruby-on-rails, capybara

我在请求规范中有以下测试：

```
page.should have_link('Edit user', :href => edit_users_path(@user)) 
```

这将检查索引视图中的特定用户是否具有编辑链接。我想单击相同的链接，例如：

```
click_link('Edit user', :href => edit_users_path(@user)) 
```

不幸的是 click_link 不接受选项。

有没有一种好方法可以做到这一点，这似乎是一个相当明显的用例？

我应该在表中包含#id`<tr>`还是`<td>`执行以下操作：

```
within(#user_id)
  click_link 'Edit user'
end 
```

我不想为了让测试正常工作而修改视图。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-19T12:57:14.867

你可以使用查找`find(:xpath, "//a[@href='/foo']").click`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-12-09T14:02:00.660

您可以使用 Capybara 的低级界面来执行此操作。尝试：

```
find("a[href='#{edit_users_path}']").click 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-13T08:09:53.373

我最终在`spec/support/selectors.rb`

```
module Selectors
  Capybara.add_selector(:linkhref) do
    xpath {|href| ".//a[@href='#{href}']"}
  end
end 
```

然后在我使用的测试中

```
find(:linkhref, some_path).click 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-04-01T22:25:35.550

根据@jackpipe 的回答（以及我以前的经验），我构建了自己的 Capybara 选择器，这里是辅助模块（`spec/support/selectors.rb`）的代码：

```
module Selectors
  # find(:href, 'google.com')
  Capybara.add_selector(:href) do
    xpath {|href| XPath.descendant[XPath.attr(:href).contains(href)] }
  end
end 
```

使用示例：

```
find(:href, 'google') 
```

有什么不同？

好吧，这将找到任何包含“google”的链接。以下将匹配：

```
www.google.com
http://google.com
fonts.google.com
something.google.inside.com 
```

更重要的是，它只会在后代选择器中搜索，因此例如`within('header') { find(:href, 'google').click }`可以正常工作。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-06-07T18:36:02.917

在 2021 年，它按预期工作

```
click_link('...', href: '...')
click_link('...')
click_link(href: '...') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-08T22:44:09.623

将第一个参数留空似乎对我有用......

```
page.should have_link("", :href=>edit_comment_path(@comment)) 
```

# android - 如何检查 HomeButton Click 或 Google 广告是否被用户点击？

> ID：14957984
> 
> 赞同：0
> 
> 时间：2013-02-19T12:51:52.780
> 
> 标签：android, onpause, home-button

当用户单击主页按钮时，有人帮我向用户提供退出消息吗？

我使用了 onPause() 方法，但问题是当用户点击谷歌广告时，会调用 onPause 方法并将消息显示给用户。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:56:30.413

你可以覆盖这个：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_HOME)) {
        Toast.makeText(this, "Home button pressed!", Toast.LENGTH_SHORT).show();                     
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:03:42.857

对不起，如果我晚了一点，但是对于那些需要它的人，你不能拦截点击HOME按钮，否则这可能会很糟糕，由于其他原因，你必须找到其他方法，我自己还在寻找它

# templates - XSLT 1.0：将条件放入匹配属性或应用模板？

> ID：14957985
> 
> 赞同：1
> 
> 时间：2013-02-19T12:51:52.647
> 
> 标签：templates, xslt, apply-templates

`<xsl:template match="">`我有一个关于和的一般性问题`<xsl:apply-templates/>`。

我有匹配元素的情况`E1EDP01`。但是不是所有`E1EDP01`的元素都应该匹配，只有一定的范围。

但是现在只匹配一定范围的元素的正确方法是什么？

**这样做是否正确：**

```
<xsl:apply-templates select="E1EDP01"/> 
```

以及限制范围的模板`E1EDP01`：

```
<xsl:template match="E1EDP01[not(PSTYV='ZDAE')][E1EDP02[QUALF='001']/ZEILE]">
...
</xsl:template> 
```

**还是我必须将应用模板更改为：**

```
<xsl:apply-templates select="E1EDP01[not(PSTYV='ZDAE')][E1EDP02[QUALF='001']/ZEILE]"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:15:04.120

两者都有效，但它们表达的意图略有不同。特定的匹配模板说“这就是你应该始终处理*这种* `E1EDP01`元素的方式”，并且`<xsl:apply-templates select="E1EDP01"/>`说“`E1EDP01`现在处理我的所有元素”。而拥有一个通用模板和一个特定的应用程序表示“我现在想处理*这些特定* `E1EDP01`元素（但我以后可能想处理其他元素）”和“这就是你处理任何元素的方式`E1EDP01`”。

哪种方法更好实际上取决于它`[not(PSTYV='ZDAE')][E1EDP02[QUALF='001']/ZEILE]`是应该处理元素的方式所固有的，还是特定于您想要在样式表中的某个特定位置执行的操作。例如，如果我有一些描述金融交易的 XML，并且我有一个规则是负金额必须始终显示在红色框中，那么我可以定义

```
<xsl:template match="amount[. &lt; 0]">
  <redbox><xsl:value-of select="."/></redbox>
</xsl:template>
<xsl:template match="amount"><xsl:value-of select="."/></xsl:template> 
```

相反，如果我想包含一个包含所有负数的汇总红框，但在其他地方正常显示金额，那么我可能会选择使用单个模板，`amount`然后在该`apply-templates`点进行过滤

```
<redbox>
  <xsl:apply-templates select="amount[. &lt; 0]" />
</redbox> 
```

您必须选择对您的任务最有意义的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:54:37.030

如果两者都适用于您想要做的事情，那么只需选择对您的 XSLT 最有意义的一个。

# api - 如何在体式中查询所有带有标签的子任务？

> ID：14957988
> 
> 赞同：0
> 
> 时间：2013-02-19T12:52:01.003
> 
> 标签：api, asana

是否有直接的方法来查询具有特定标签 ID 的所有子任务，或者我应该遍历所有子任务并检查它们的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:13:32.623

目前无法查询与特定标签 ID 关联的所有子任务。

相反，我会查询与标签 ID 关联的所有任务，然后将这些任务过滤为“父”字段不等于 null 的任务。

# vba - 从第 1 行开始选择 F 列中的第一个空单元格。（不使用 offset ）

> ID：14957994
> 
> 赞同：27
> 
> 时间：2013-02-19T12:52:09.123
> 
> 标签：vba, excel

这是我非常困惑的一个查询。因为我已经找了很多次了，但我总是找到与查找最后使用或第一个非空单元格相关的代码。尝试以下代码。差异代码已由“偶数”一词分隔

```
iRow = Worksheets("Sheet1").Cells(Rows.Count,1).End(XlUp).Row 
```

甚至

```
Sub LastCellBeforeBlankInColumn()

Range("A1").End(xldown).Select

End Sub 
```

甚至

查找列中最后使用的单元格：

```
Sub LastCellInColumn()

Range("A65536").End(xlup).Select

End Sub 
```

甚至

查找行中空白之前的最后一个单元格：

```
Sub LastCellBeforeBlankInRow()

Range("A1").End(xlToRight).Select

End Sub 
```

甚至

查找一行中最后使用的单元格：

```
Sub LastCellInRow()

Range("IV1").End(xlToLeft).Select

End Sub 
```

甚至

```
Worksheets("Sheet1").Range("A1").End(xlDown).Row + 1 
```

甚至

```
LastRow = Range("A" & Rows.Count).End(xlUp).Row + 1
Sheets("SheetName").Range("A" & LastRow).Paste 
```

甚至

```
Dim FirstBlankCell as Range
Set FirstBlankCell=Range("A" & rows.Count).end(xlup).offset(1,0)
FirstBlankCell.Activate

'Find the last used row in a Column: column A in this example
Dim LastRow As Long
Dim NextRow As Long
With ActiveSheet
    LastRow = .Cells(.Rows.Count, "F").End(xlUp).Row
End With
NextRow = LastRow + 1 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T16:09:49.630

如果您要做的只是**选择给定列中的第一个空白单元格**，您可以尝试一下：

**代码：**

```
Public Sub SelectFirstBlankCell()
    Dim sourceCol As Integer, rowCount As Integer, currentRow As Integer
    Dim currentRowValue As String

    sourceCol = 6   'column F has a value of 6
    rowCount = Cells(Rows.Count, sourceCol).End(xlUp).Row

    'for every row, find the first blank cell and select it
    For currentRow = 1 To rowCount
        currentRowValue = Cells(currentRow, sourceCol).Value
        If IsEmpty(currentRowValue) Or currentRowValue = "" Then
            Cells(currentRow, sourceCol).Select
        End If
    Next
End Sub 
```

**选择之前 - 要选择的第一个空白单元格：**

![在此处输入图像描述](../Images/1cdb303b7876edf869cd339fa8cd8d74.png)

**选择后：**

![在此处输入图像描述](../Images/19479c6f6798e4381fe3c475b4476abf.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-11-20T14:16:55.890

如果您要做的只是选择给定列中的第一个空白单元格，您可以尝试一下：

```
Range("A1").End(xlDown).Offset(1, 0).Select 
```

如果您相对于您选择的列使用它，则此方法有效：

```
Selection.End(xlDown).Offset(1, 0).Select 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-06-25T13:02:19.257

万一有人像我一样偶然发现了这个……

查找列中的第一个空白单元格（我正在使用 D 列但不想包含 D1）

```
NextFree = Range("D2:D" & Rows.Count).Cells.SpecialCells(xlCellTypeBlanks).Row
Range("D" & NextFree).Select 
```

NextFree 只是一个名字，如果你愿意，你可以使用香肠。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-04-02T12:52:22.257

Sam 的代码很好，但我认为它需要一些更正，

```
Public Sub SelectFirstBlankCell()
    Dim sourceCol As Integer, rowCount As Integer, currentRow As Integer
    Dim currentRowValue As String

    sourceCol = 6   'column F has a value of 6
    rowCount = Cells(Rows.Count, sourceCol).End(xlUp).Row

    'for every row, find the first blank cell and select it
    For currentRow = 1 To rowCount
        currentRowValue = Cells(currentRow, sourceCol).Value
        If IsEmpty(currentRowValue) Or currentRowValue = "" Then
            Cells(currentRow, sourceCol).Select
            Exit For 'This is missing...
        End If
    Next
End Sub 
```

谢谢

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-08-13T01:14:04.387

如果您正在寻找一个班轮（不包括名称和评论）试试这个

```
Dim iRow As Long
Dim ws As Worksheet
Set ws = Worksheets("Name")

    'find first empty cell in column F (coming up from the bottom) and return row number
iRow = ws.Range("F:F").Find(What:="*", SearchOrder:=xlRows, SearchDirection:=xlPrevious, LookIn:=xlValues).Row + 1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-05T15:51:21.950

我对每个人的代码进行了一些修改，将其制成一个函数，使其更快（数组），并添加了参数：

```
Public Function FirstBlankCell(Optional Sh As Worksheet, Optional SourceCol As Long = 1, Optional ByVal StartRow& = 1, Optional ByVal SelectCell As Boolean = False) As Long
Dim RowCount As Long, CurrentRow As Long
Dim CurrentRowValue As String
Dim Data()
If Sh Is Nothing Then Set Sh = ActiveSheet

With Sh

    rowCount = .Cells(.Rows.Count, SourceCol).End(xlUp).Row
    Data = .Range(.Cells(1, SourceCol), .Cells(rowCount, SourceCol)).Value2

    For currentRow = StartRow To RowCount
        If Data(currentRow, SourceCol) = vbNullString Then
            If SelectCell Then .Cells(currentRow, SourceCol).Select
            'if selection is out of screen, intead of .select , use : application.goto reference:=.cells(...), scroll:= true
            FirstBlankCell = currentRow
            Exit For
        End If
    Next

End With ' Sh

Erase Data
Set Sh = Nothing
End Function 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-02T14:26:32.457

这是一种非常快速和干净的方式。它还支持空列，因为上面的答案都不适用于空列。

用法：`SelectFirstBlankCell("F")`

```
Public Sub SelectFirstBlankCell(col As String)

    Dim i As Integer

    For i = 1 To 10000
        If Range(col & CStr(i)).Value = "" Then
            Exit For
        End If
    Next i

    Range(col & CStr(i)).Select
End Sub 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-27T06:37:15.670

```
Public Sub SelectFirstBlankCell()
    Dim sourceCol As Integer, rowCount As Integer, currentRow As Integer
    Dim currentRowValue As String

    sourceCol = 6   'column F has a value of 6
    rowCount = Cells(Rows.Count, sourceCol).End(xlUp).Row

    'for every row, find the first blank cell and select it
    For currentRow = 1 To rowCount
        currentRowValue = Cells(currentRow, sourceCol).Value
        If IsEmpty(currentRowValue) Or currentRowValue = "" Then
            Cells(currentRow, sourceCol).Select
        End If
    Next
End Sub 
```

如果任何一列连续包含多个空单元格，则此代码将无法正常工作

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-16T12:36:18.190

我在尝试执行类似任务时发现了这个线程。最后，我用

`Range("F:F").SpecialCells(xlBlanks).Areas(1)(1).Select`

只要在指定范围和工作表使用范围的交集处有一个空白单元格，它就可以正常工作。

area 属性不需要查找范围中的绝对第一个空白，但对于查找后续的非连续空白很有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-29T19:30:41.143

我认为`Do Until`-loop 在这里更干净、更短、更合适：

```
Public Sub SelectFirstBlankCell(col As String)
    Dim Column_Index as Integer
    Dim Row_Counter as 

    Column_Index = Range(col & 1).Column
    Row_Counter = 1

    Do Until IsEmpty(Cells(Row_Counter, 1))
        Row_Counter = Row_Counter + 1
    Loop

    Cells(Row_Counter, Column_Index).Select 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-11T06:40:50.960

还有另一种方法可以忽略非空单元格之前的所有空单元格，并从第一列的末尾选择最后一个空单元格。列应该用它们的编号来解决，例如。列“A”= 1。

```
With ThisWorkbook.Sheets("sheet1")

        .Cells(.Cells(.Cells.Rows.Count, 1).End(xlUp).Row + 1, 1).select

End With 
```

接下来的代码和上面的完全一样，但是可以更好地理解。

```
i = ThisWorkbook.Sheets("sheet1").Cells.Rows.Count

j = ThisWorkbook.Sheets("sheet1").Cells(i, 1).End(xlUp).Row

ThisWorkbook.Sheets("sheet1").Cells(j + 1, 1) = textbox1.value 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-30T22:19:24.180

`NextRow = Application.WorksheetFunction.CountA(Range("A:A")) + 1`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-06T19:10:52.857

我刚刚写了这个单行来选择基于选定单元格的列中找到的第一个空单元格。仅适用于选定单元格的第一列。根据需要修改

```
Selection.End(xlDown).Range("A2").Select 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-08T01:34:19.087

.Find 有很多选项，如果在您的范围内没有找到空单元格，则返回 Nothing：

```
With Range("F:F")
     .Find("", .Rows(.Rows.Count), xlFormulas, , xlByRows, xlNext).Select
End With 
```

.Find 默认从范围内的第一个单元格开始搜索，因此它通常从第 2 行开始。如果 After 参数是范围内的最后一个单元格，它将从第 1 行开始查找第一个空单元格。那是因为搜索结束了。

# string - excel求和另一个单元格包含字符串的所有单元格

> ID：14957999
> 
> 赞同：2
> 
> 时间：2013-02-19T12:52:46.230
> 
> 标签：string, excel, if-statement, split, sum

示例表：

```
  | 一个 | 乙       
--------------------------
1 | 26 | 汤姆，杰瑞
--------------------------
2 | 12 | 汤姆
--------------------------
3 | 6 | 杰瑞、汤姆、迪克

```

假设我有这张桌子。我想要做的是总结A列中的单元格总数，其中B列中同一行的单元格包含某个名称，例如“tom”。但是，在将 A 列中的单元格添加到总数之前，它必须除以 B 列中的姓名数量。

因此，例如，如果我使用名称 jerry，我将总共得到：

(26/2) + (6/3) = 15

如果我用汤姆这个名字，我会得到：

(26/2) + 12 + (6/3) = 27

请帮忙！我在想也许它可能太复杂了，我可能需要把它分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:01:56.560

假设名称在单元格 C1 中，这个公式将完成这项工作：

```
=SUM($A$1:$A$3*NOT(ISERROR(SEARCH(C1,$B$1:$B$3)))/(LEN($B$1:$B$3)-LEN(SUBSTITUTE($B$1: $B$3,",","))+1))

```

您需要将其作为数组公式输入，即按`Ctrl`- `Shift`- `Enter`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:02:37.310

列出 D2 中的名称，然后在 E2 中输入此公式并复制下来

`=IF(D2="","",SUMPRODUCT(A2:A10,ISNUMBER(SEARCH(D2,$B$2:$B$10))/(LEN($B$2:$B$10)-LEN(SUBSTITUTE($B$2:$B$10,",",""))+1)))`

假设 B2:B10 中的所有名称都用逗号分隔，因此您可以通过将逗号数加 1 来计算每个单元格中的名称