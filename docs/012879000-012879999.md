# StackOverflow 问答 12879000-12879999

# mysql - MySQL 属性在一列中有多个条目？

> ID：12879003
> 
> 赞同：0
> 
> 时间：2012-10-14T03:13:28.700
> 
> 标签：mysql

这可能看起来很奇怪，但我想知道是否有可能让 MySQL 表有一个可以包含值列表的列。例如，假设我有一个代表像 facebook 这样的朋友列表的表格，我如何在表格中模拟它？我认为您可以将用户名添加到属性列中，但不确定这是最好的主意，甚至不确定如何做到这一点。关于如何实现这一目标或替代方案的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:48:01.370

在某些情况下，您可以使用[SET 类型](http://dev.mysql.com/doc/refman/5.0/en/set.html)，它的功能类似于[ENUM 类型](http://dev.mysql.com/doc/refman/5.0/en/enum.html)。它允许您在字段中存储一个或多个预定义值。但是，对于 facebook 好友的情况，这是不切实际的，因为每次创建新用户时，列定义都需要更新。

Wolfram 对映射表的建议绝对是更好的解决方案，因为它还允许使用外键约束，这将确保删除一个用户时的引用完整性（假设您使用级联）。此外，如果您需要在 JOIN 中使用关系，那么映射表是唯一的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T03:23:37.010

因此，与 facebook 示例保持一致，您正在寻找的是有一个包含两列的表格。第一个，标识用户，第二个是该用户的朋友列表？

据我所知，您不能将列视为数组。您可以有一个字符串，其中包含用破折号分隔的所有个人名称，但这并不可靠。

我的建议是有一个有两列的朋友表，这两列都是 varchars 或字符串。每列仅包含 1 个人的姓名或 id，表示这两个人之间的友谊。

然后，如果您想要 foobar 的朋友列表，您只需查询：

```
SELECT *
FROM friends
WHERE user_a == 'foobar' || user_b == 'foobar' 
```

现在，这实际上会为您提供两列，其中之一是 foobar，其中之一是他/她的朋友。因此，您可能需要有一点创意才能将其分成 foobar 的朋友，但我相信您可以找到一种适用于您的代码的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T04:04:51.990

虽然这通常不是一个好主意，但 MySQL 确实有这个：

```
FIND_IN_SET('b','a,b,c,d')

SELECT ... FROM friends WHERE FIND_IN_SET('foo',friends_list) > 0; 
```

所以你可以很容易地做你所要求的。只是通常不建议这样做。

# c# - 在 VS 2012 .Net-Framework 4 (c#) 中创建自己的工具箱元素

> ID：12879005
> 
> 赞同：1
> 
> 时间：2012-10-14T03:15:04.003
> 
> 标签：c#, wpf, visual-studio

是否有可能在 Visual Studio 2012（版本 11.0.50727.1）中创建自己的按钮作为工具箱元素（用于其他项目）？

我只需要另一个项目的按钮（如 iTunes 中的按钮）。（也欢迎提供教程）。

WPF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:35:29.650

由于这最终成为 Wpf，我相信最简单的方法是创建一个`WpfControlLibrary`用于`UserControls`这样的方式，您可以更轻松地自定义 Button 的外观和感觉。它也可以通过右键单击您的工具箱并选择`Choose Items`然后选择`WpfComponents`并浏览到您的 Dll 来添加到您的工具箱中。

请参阅这些链接：

1.  [http://msdn.microsoft.com/en-us/subscriptions/bb514641.aspx](http://msdn.microsoft.com/en-us/subscriptions/bb514641.aspx)
2.  [用户控件库和自定义控件库有什么区别？](https://stackoverflow.com/questions/807703/what-is-the-difference-between-a-user-control-library-and-a-custom-control-libra)
3.  [http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:21:00.390

您将需要为您的按钮创建一个自定义控件并将其编译为一个单独的 dll。然后将此 dll 中的控件添加到工具箱中。

例如，请参见此处：[http ://dhavalupadhyaya.wordpress.com/2008/07/20/how-to-add-custom-control-in-visual-studio-toolbox/](http://dhavalupadhyaya.wordpress.com/2008/07/20/how-to-add-custom-control-in-visual-studio-toolbox/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T03:22:00.140

我假设您正在谈论 WPF 按钮。如果它用于一个额外的项目，最好在单独的 XAML 资源文件中创建按钮样式并在第二个项目中重用该文件。如果您需要在 VS 工具箱中创建一个可重用控件，以至于您需要一个按钮，请参见此处：http: [//msdn.microsoft.com/en-us/library/ee712573.aspx](http://msdn.microsoft.com/en-us/library/ee712573.aspx)

# css - 如果浮动比容器宽，则清除浮动

> ID：12879006
> 
> 赞同：0
> 
> 时间：2012-10-14T03:15:11.297
> 
> 标签：css, css-float

我有一个小提琴来演示我要解决的问题：

[http://jsfiddle.net/JordashTalon/DgP7J/11/](http://jsfiddle.net/JordashTalon/DgP7J/11/)

正如您在第一行中看到的那样，第三列向右对齐（因为最左边的列比它右边的列高）。

我知道我是否清楚：两者；在第二列之后让最后一列一直浮动到左侧，但是由于我正在尝试进行更具响应性的设计，所以如果我可以在没有清除的情况下完成它会是最好的（因为如果容器变得足够大，我会希望柱子与其他柱子齐平而不是清除）。

有谁知道如何解决这个问题？我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:28:21.630

您可以在这里找到解决方案：http: [//blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

```
<style>
.column {
    width: 200px;
    min-height: 250px;
    border: 1px solid #000;
    display: -moz-inline-stack;
    display: inline-block;
    vertical-align: top;
    margin: 5px;
    zoom: 1;
    *display: inline;
    _height: 250px;
} 
```

```
<div class="column">
    <div>
        <h4>This is awesome</h4>
        <img src="http://farm4.static.flickr.com/3623/3279671785_d1f2e665b6_s.jpg"
        alt="lobster" width="75" height="75"/>
    </div> 
```

# objective-c - textInput 库泄漏

> ID：12879009
> 
> 赞同：0
> 
> 时间：2012-10-14T03:16:34.363
> 
> 标签：objective-c, xcode, memory-leaks

我分析了我下面的泄漏项目。我找不到泄漏的代码，但找到了苹果库泄漏。

配置文件结果如下。代码在 git hub 上。

```
Leaked Object   #   Address         Size            Responsible Library 
Malloc 16 Bytes 1   0xa9b6870   16 Bytes    TextInput   
[TIResourcePathManager          
fetchAssetsWithNames:forInputModes:updatingDictionary:continuation:]_block_invoke_0 
```

如何处理苹果库泄漏？

它只存在于模拟器中，而不存在于设备中吗？

在某些人发现问题之前。

[https://github.com/piaoapiao/leak](https://github.com/piaoapiao/leak)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:35:07.470

是的，我在设备上发现了相同的泄漏消息。

# jquery - 通过触摸触发从 iframe 到父级的拖动事件

> ID：12879011
> 
> 赞同：0
> 
> 时间：2012-10-14T03:16:59.557
> 
> 标签：jquery, jquery-ui, iframe, touch, jquery-ui-draggable

问题：鼠标移动并不总是在触摸时被感应到。

我目前正在使用 jQuery UI 拖动和 jQuery Touch Punch 将触摸事件转换为鼠标事件。在桌面浏览器上一切正常。

我可以让它执行可拖动的“开始”功能，但它并不总是启动可拖动的“拖动”功能。我在各处设置了侦听器以查看发生了什么，并且在启动功能运行后它不显示任何鼠标移动 - 无论是在窗口中还是在父文档中。滚动，然后打开（通常会被 preventDefault(); 阻止）。我必须移开手指并将其放回原处才能继续拖动。但是，如果我放置某些 e.preventDefault()s，我可以在启动可拖动对象的第三次或第四次时使拖动操作正常（换句话说，从初始滑动开始）。

这是一个精简版：

```
$(window).mousedown(function(e){
  drag(e);
});

function drag(e){
  $iframefix.show();
  $draggable.draggable({
     start: function(e, ui){
            // this function runs well, but at the end of it, I don't seem to register
            // any mouse movements in the document or window as I move my finger 
            // around, and even using .trigger('mousemove') does not register an event.
     },
     drag: function(e, ui){

     }
  });
  $draggable.trigger(e); 
} 
```

我的猜测是它与鼠标事件起源于 iframe 的事实有关，并且当使用 .trigger() 时，jQuery 可能会规范化事件，因此它正在回看窗口（e.originalEvent）。也许这让 jQuery 触摸打孔无法感知鼠标移动（也许它认为它是点击）。

这是 jQuery Touch Punch - 它是一个包含 jQuery 鼠标事件的小脚本：

[https://raw.github.com/furf/jquery-ui-touch-punch/master/jquery.ui.touch-punch.js](https://raw.github.com/furf/jquery-ui-touch-punch/master/jquery.ui.touch-punch.js)

或者，也许这是使用 e.preventDefault() 或 e.stopPropagation 或在我不看的区域中返回 false。

无论如何，在拖动启动后，有些东西阻止它感应我的手指四处移动。

# iphone - 具有多个实体和 uitableview 的核心数据

> ID：12879013
> 
> 赞同：1
> 
> 时间：2012-10-14T03:18:55.290
> 
> 标签：iphone, xcode, uitableview, core-data

我创建了一个核心数据模型，其中包含三个实体，分别称为 Customer、Form1 和 Form2。我已经建立了从 Customer 到 form1 和 form2 的反向关系，反之亦然。因此，当创建新客户时，需要为该客户创建 form1 和 form2。我遇到的问题是在客户被删除后为每个客户访问正确的 form1 或 form2。那么我如何正确地从所有三个实体中添加和删除对象。让我知道我是否以正确的方式做所有事情，因为我之前从未在 uitableview 中使用过多个实体。任何帮助都会很棒！

```
-(void) viewDidLoad  
{
// Generate a fetch request for reading from the database and set its entity property
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName: @"Customer" inManagedObjectContext: managedObjectContext];
request.entity = entity;
[entity release];

// Perform the actual fetch from the permanent store and initialize the menuItems array with the results
NSError *error = nil;

customerArray = [[managedObjectContext executeFetchRequest: request error: &error] 

[request release];
}

- (void) addItem
{
// Insert a new record in the database
Customer * customerItem = [NSEntityDescription insertNewObjectForEntityForName: @"Customer" inManagedObjectContext: managedObjectContext];
NSError *error = nil;

// Insert a new item in the table's data source
[customerArray insertObject: customerItem atIndex: 0];

[NSEntityDescription insertNewObjectForEntityForName: @"Form1" inManagedObjectContext: managedObjectContext];

[NSEntityDescription insertNewObjectForEntityForName: @"Form2" inManagedObjectContext: managedObjectContext];
[managedObjectContext save: &error];

// Insert a new row in the table
NSIndexPath *indexPath = [NSIndexPath indexPathForRow: 0 inSection: 0];
[table insertRowsAtIndexPaths: [NSArray arrayWithObject: indexPath] withRowAnimation: UITableViewRowAnimationFade];
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
{
    // Delete item from the context and save the context. This removes the item from the permanent store.
    [managedObjectContext deleteObject: [customerArray objectAtIndex: indexPath.row]];
    NSError *error = nil;
    [managedObjectContext save: &error];

    // Remove the item from the table's data source array
    [customerArray removeObjectAtIndex: indexPath.row];

    // Delete the item from the table itself.
    [tableView deleteRowsAtIndexPaths: [NSArray arrayWithObject: indexPath] withRowAnimation: YES];
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:14:57.683

正如您已经建立了从客户到 form1 和 form2 的关系。您可以从客户那里访问 form1 和 form2。

Raywinderlich 有一个[很好的教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)，用于演示核心数据与关系，以相同的方式实现。

# php - 从数据库存储数据 [mysql_num_rows]

> ID：12879015
> 
> 赞同：0
> 
> 时间：2012-10-14T03:19:35.337
> 
> 标签：php, mysql-num-rows

所以我有这段代码将项目从数据库传递到我的订单表。当我回应会议时。session 变量包含一些东西，所以没有问题。但是当我在 numrows 下回显这些变量时，它什么也没显示。有什么不对？

```
<?php
error_reporting(E_ALL ^ E_NOTICE);
session_start();
require("connect.php");
$UserID = $_SESSION['CustNum'];
$UserN = $_SESSION['UserName'];

        $ProdGTotal = $_SESSION['ProdGTotal'];

        $queryord = mysql_query("SELECT * FROM customer WHERE UserName = '$UserN'");
        $numrows = mysql_num_rows($queryord);

        if(numrows == 1){
            $row = mysql_fetch_assoc($queryord)or die ('Unable to run query:'.mysql_error()); // fetch associated: get function from a query for a database
            $dbstreet = $row['Street']; 
            $dhousenum = $row['HouseNum']; 
            $dbcnum = $row['CelNum']; 
            $dbarea = $row['Area'];
            $dbbuilding = $row['Building'];
            $dbcity = $row['City'];
            $dbpnum = $row['PhoneNum'];
            $dbfname = $row['FName'];
            $dblname = $row['LName'];

        }
        else
        die(mysql_error());

        $query4=mysql_query("INSERT INTO orderdetails VALUES ('', '$UserID', Now(), '$dbhousenum', '$dbstreet', '$dbarea', '$dbbuilding', '$dbcity',     '$dbfname', '$dblname', '$dbcnum', '$dbpnum', '$ProdGTotal')",$connect);

            if ($query4){

            header("location:index.php");

            }
            else
        die(mysql_error());

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:30:45.120

`if(numrows == 1) => if($numrows == 1){`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:34:38.517

首先你输入

```
if(numrows == 1){ 
```

而是变量：

```
if($numrows == 1){ 
```

而不是检查用户，您可以：

```
$queryord = mysql_query("SELECT * FROM customer WHERE UserName = '$UserN'");    
$numrows = mysql_num_rows($queryord); 
```

用于：

```
$queryord = mysql_query("SELECT * FROM customer WHERE UserName = '$UserN' LIMIT 1");    
$numrows = mysql_num_rows($queryord); 
```

因为你想获取一个用户，但你失败了，因为你没有逃脱：

```
$UserN = mysql_real_escape_string($UserN);
$queryord = mysql_query("SELECT * FROM customer WHERE UserName = '$UserN' LIMIT 1");    
$numrows = mysql_num_rows($queryord); 
```

您应该以更好的方式编写代码，并查看有关 stackoverflow 如何获取数据的最佳实践示例。请参阅阻止 SQL 注入和漏洞的最佳实践。

此站点上显示了示例：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# android - PagerView 重叠 PagerTabStrip / PagerTitleStrip

> ID：12879019
> 
> 赞同：3
> 
> 时间：2012-10-14T03:20:47.113
> 
> 标签：android, android-layout, android-widget, android-viewpager, android-view

我已经尝试了大约一个星期来让我的 PagerView 不与 TitleStrip 重叠。

我已经尝试了我能想到的一切，一个看起来像同一个问题的 StackOverflow 问题的答案不适用。

看来 PagerTitleStrip 和 TextView 都从 0,0（左，上）开始

任何帮助，将不胜感激。请注意，我不能使用任何 XML（inc Layout.xml），所以这一切都是以编程方式完成的。

**这是我的问题的完整工作示例：**

```
package com.example.projname;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.PagerTabStrip;
import android.support.v4.view.ViewPager;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        MyPagerAdapter myPagerAdapter = new MyPagerAdapter();
        PagerTabStrip myPagerTabStrip = new PagerTabStrip(this);
        myPagerTabStrip.setGravity(Gravity.TOP);
        ViewPager viewPager = new ViewPager(this);
        viewPager.addView(myPagerTabStrip, LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        viewPager.setAdapter(myPagerAdapter);
        setContentView(viewPager);
    }

    class MyPagerAdapter extends PagerAdapter {
        public final String[] Titles = {
            "Title One",
            "Title Two",
            "Title Three",
            "Title Four",
            "Title Five"
        };

        @Override
        public int getCount() {
            return Titles.length;
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return (view == object);
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return Titles[position];
        }

        @Override
        public Object instantiateItem(ViewGroup container, int position) {
            TextView textView = new TextView(getApplicationContext());
            String myString = new String("Page " + (position + 1) + "\r\n");
            textView.setText(myString + myString + myString + myString + myString + myString);
            container.addView(textView);
            return textView;
        }

        @Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            container.removeView((View) object);
        }
    }
} 
```

**Edit1：添加问题的屏幕截图：** ![文本 Page1 显示的比应有的高得多](../Images/2caedfa0f07cc2d60766d02cc94897ba.png)

**Edit2：用答案更新问题（以防将来有人尝试这样做**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LayoutParams layoutParams = new LayoutParams();
    layoutParams.height = LayoutParams.WRAP_CONTENT;
    layoutParams.width = LayoutParams.MATCH_PARENT;
    layoutParams.gravity = Gravity.TOP;
    PagerTabStrip myPagerTabStrip = new PagerTabStrip(this);
    MyPagerAdapter myPagerAdapter = new MyPagerAdapter();       
    ViewPager viewPager = new ViewPager(this);
    viewPager.addView(myPagerTabStrip, layoutParams);
    viewPager.setAdapter(myPagerAdapter);
    setContentView(viewPager);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:01:58.157

> 请注意，我不能使用任何 XML

为什么？

> 任何帮助，将不胜感激。

尝试一个`addView()`将`LayoutParams`对象作为参数的版本，并使用`ViewPager.LayoutParams`. 此外，使用`gravity`字段`ViewPager.LayoutParams`代替`setGravity()`.

如果这没有帮助，请在 XML 中临时设置一个`ViewPager`and `PagerTitleStrip`（例如，在一个单独的项目中）并在 Hierarchy View 中检查结果以了解 XML 方法的构造如何重要，因此您可以尝试复制它。

# algorithm - 所有类别的线性时间排序

> ID：12879023
> 
> 赞同：1
> 
> 时间：2012-10-14T03:21:22.277
> 
> 标签：algorithm, sorting

我有这个也许愚蠢的想法

因为我们有线性时间排序算法，用于使用计数排序、基数排序的整数等受限类别。

就像在计算机中一样，所有类别的数字类型最终都以字节序列编码（在某种程度上与整数等类似）。是否能够说明我们可以使用那些线性时间排序算法对所有这些数字进行线性时间排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:54:12.080

当然，虽然细节因类型而异。一个简单的例子是 IEEE-754 浮点值（32 位和 64 位），它几乎可以像整数一样进行排序。（更具体地说，它们可以像符号大小整数一样进行排序。）所以基数排序可以正常工作。

对于字符串，当您有太多的字符串无法放入内存时，一种不常见的技术是按前缀“分箱”它们，这是一种基数排序。

对于短位域值（如整数或如上所述的浮点数），从左到右的一次位基数排序实际上只是快速排序的一种变体，因为它基本上只是一种找到一个合理的支点。与快速排序不同，它保证了有限的递归深度（在 32 位值的情况下为 32）。另一方面，快速排序通常具有更小的递归深度，因为数据集大小的log [2通常远小于 32。]

快速排序的主要优点是您可以编写算法（STL 风格），而不需要对被排序的数据类型一无所知，除了如何调用函数来比较两个值。基数排序不能这样说。制作通用版本要困难得多。

编辑添加了一个重点：

过分强调 O(n) 和 O(n log n) 之间的差异是很常见的。对于*非常大的 n*，它们是不同的。但是对于大多数现实世界的非谷歌大小的问题，log n 是一个小整数。当有一个需要 2n log [2] n 秒的 O(n log n) 算法时，使用需要 100n 秒的 O(n) 算法是没有意义的，除非 log n 大于 50，也就是说n 大于 1,125,899,906,842,624。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:28:46.107

你不能。如果您有一段由以下字节表示的数据：

```
11001100 00110011
(204)    (51) 
```

如果您要使用基数排序之类的方法对它们进行排序，您将得到：

```
00110011 11001100
(51)     (204) 
```

唯一的问题是，这*不再是您写入磁盘的数据*，而是完全不同的数据，甚至可能根本没有任何意义（垃圾）。

# clojure - 无法在 clojurescript repl 中“使用”

> ID：12879027
> 
> 赞同：15
> 
> 时间：2012-10-14T03:22:32.027
> 
> 标签：clojure, clojurescript

我在 Clojurescript 命名空间中键入以下内容。

```
cljs.user> (use '[clojure.zip :only [insert-child]])

WARNING: Use of undeclared Var cljs.user/use at line 1 
"Error evaluating:" (use (quote [clojure.zip :only [insert-child]])) :as "cljs.user.use.call(null,cljs.core.vec([\"\\uFDD1'clojure.zip\",\"\\uFDD0'only\",cljs.core.vec([\"\\uFDD1'insert-child\"])]));\n"
#<TypeError: Cannot call method 'call' of undefined>
TypeError: Cannot call method 'call' of undefined
    at eval (eval at <anonymous> (http://localhost:3000/main.js:32728:147), <anonymous>:1:85)
    at eval (eval at <anonymous> (http://localhost:3000/main.js:32728:147), <anonymous>:6:3)
    at http://localhost:3000/main.js:32728:142
    at evaluate_javascript (http://localhost:3000/main.js:32741:4)
    at Object.callback (http://localhost:3000/main.js:32806:138)
    at goog.messaging.AbstractChannel.deliver (http://localhost:3000/main.js:31059:13)
    at goog.net.xpc.CrossPageChannel.deliver_ (http://localhost:3000/main.js:32164:14)
    at Function.goog.net.xpc.NativeMessagingTransport.messageReceived_ (http://localhost:3000/main.js:31732:13)
    at goog.events.Listener.handleEvent (http://localhost:3000/main.js:22590:26)
    at Object.goog.events.fireListener (http://localhost:3000/main.js:22924:21)
nil 
```

似乎是在说明 cljs.user 命名空间中不存在“使用”方法。这对我来说很有意义，因为 Clojurescript 本身无法评估 Clojure 表达式。但是，我知道 Clojurescript 有一个 clojure.zip 命名空间，我在命名空间声明中使用了 clojure.zip 作为`(:use [clojure.zip :only [insert-child]])`.

如何在 Clojurescript repl 中使用 Clojurescript 版本的 clojure.zip？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-14T17:39:50.447

因为 ClojureScript 命名空间的实现方式与 Clojure 完全不同，所以 ClojureScript 不直接支持`use`or`require`形式。

相反，您*必须*使用`ns`宏。然后，要`clojure.zip`在`cljs.user`命名空间中使用，只需执行以下操作：

```
(ns cljs.user (:use [clojure.zip :only [insert-child]])) 
```

请注意，ClojureScript 版本支持的表单`ns`是 Clojure 支持的表单的子集；具体来说，`:use`从句*必须*指定一种`:only`形式，而`:require`从句必须指定一种`:as`形式。

# python - Python OOP - 对象没有属性

> ID：12879033
> 
> 赞同：4
> 
> 时间：2012-10-14T03:24:10.810
> 
> 标签：python, class, object, python-3.x

我正在尝试学习如何编程。我真的很想学习如何编程；我喜欢它的建筑和设计方面。但是，在 Java 和 Python 中，我尝试过与对象、类、方法有关的程序，但失败了。我正在尝试为程序开发一些代码，但我很难过。我知道这是一个简单的错误。然而我迷路了！我希望有人可以指导我完成一个工作计划，同时也帮助我学习（批评不仅是预期的，而且是赞赏的）。

```
class Converter:

    def cTOf(self, numFrom):
        numFrom = self.numFrom
        numTo = (self.numFrom * (9/5)) + 32
        print (str(numTo) + ' degrees Farenheit')
        return numTo

    def fTOc(self, numFrom):
        numFrom = self.numFrom
        numTo = ((numFrom - 32) * (5/9))
        return numTo

convert = Converter()

numFrom = (float(input('Enter a number to convert..                '))) 
unitFrom = input('What unit would you like to convert from.. ')
unitTo = input('What unit would you like to convert to..    ')

if unitFrom == ('celcius'):
    convert.cTOf(numFrom)
    print(numTo)
    input('Please hit enter..')

if unitFrom == ('farenheit'):
    convert.fTOc(numFrom)
    print(numTo)
    input('Please hit enter..') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T04:03:17.030

类和对象是完成任务的工具——它们允许您使用一组方法封装*数据*或*状态。*但是，您的数据只是一个数字。不需要封装整数，所以不需要创建类。

换句话说，不要因为你认为你应该创建一个类，而是因为它使你的代码更简单而创建一个类。

```
import sys

def f_to_c(x):
    return (x - 32) * (5/9)

def c_to_f(x):
    return x * (9/5) + 32

num_from = float(input('Enter a number to convert: '))
unit_from = input('What units would you like to convert from? ')
unit_to = input('What units would you like to convert to? ')

if (unit_from, unit_to) == ('fahrenheit', 'celsius'):
    num_to = f_to_c(num_from)
elif (unit_from, unit_to) == ('celsius', 'fahrenheit'):
    num_to = c_to_f(num_from)
else:
    print('unsupported units')
    sys.exit(1)

print('{} degrees {} is {} degrees {}'
      .format(num_from, unit_from, num_to, unit_to)) 
```

```
输入要转换的数字：40
你想从什么单位转换？摄氏度
你想转换成什么单位？华氏度
40.0 摄氏度是 104.0 华氏度

```

`convert`对象和`Converter`类没有任何用途，因此没有它们，代码更简单，更易于阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T03:34:16.317

1.应该是

```
def fTOc(self, numFrom):
    self.numFrom = numFrom 
```

`cTOf`方法有同样的问题。

2.变量`numTo`未定义

```
numTo = convert.cTOf(numFrom)
print (numTo) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T03:38:09.857

你几乎做对了。

没有`self.numFrom`，因为它是您的参数。删除线`numFrom =self.numFrom`，你会没事的。

# android - 如何从图像路径中获取资源 ID？

> ID：12879035
> 
> 赞同：3
> 
> 时间：2012-10-14T03:25:21.403
> 
> 标签：android, imageview

我在 android 中有一个图像路径。该图像存在于设备的 sdcard 上。我怎样才能找到它的resourceID？我需要将它发送到 decodeResource 函数。我正在尝试检测用户从图库中选择的图像上的面孔。我写的代码是

```
 Intent intent = new Intent(this, DetectFaces.class);
    intent.putExtra(PICTURE_PATH,picturePath);//the path of the image
    startActivity(intent); 
```

在detectFaces 类中

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_detect_faces);
       // getActionBar().setDisplayHomeAsUpEnabled(true);
        Intent intent = getIntent();
        ImageView imageView = (ImageView) findViewById(R.id.imgView);
        picturePath = intent.getStringExtra(GetFaceActivity.PICTURE_PATH);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
        //imageView.setOnTouchListener(this);

    } 
```

有一个按钮，其 onClick 事件与

```
public void DetectFacesInImage(View view)
{
    BitmapFactory.Options bitmapFactoryOptions=new BitmapFactory.Options();
    bitmapFactoryOptions.inPreferredConfig= Bitmap.Config.RGB_565;
myBitmap=BitmapFactory.decodeResource(getResources(),R.drawable.faceswapping,bitmapFactoryOptions);
    int width=myBitmap.getWidth();
    int height=myBitmap.getHeight();
    detectedFaces=new FaceDetector.Face[number_of_faces];
    FaceDetector faceDetector=new FaceDetector(width,height,number_of_faces);
    number_of_faces_detected = faceDetector.findFaces(myBitmap, detectedFaces);

 } 
```

我需要 decodeResource 函数中的 ID。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:31:13.960

试试这个，它可以帮助你

```
File fileObj = new  File(“/sdcard/Images/test_image.jpg”);
if(fileObj .exists()){
    Bitmap bitMapObj= BitmapFactory.decodeFile(fileObj .getAbsolutePath());
    ImageView imgView= (ImageView) findViewById(R.id.imageviewTest);
    imgView.setImageBitmap(bitMapObj);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T03:54:14.153

如果要解码图像，则需要使用对 mediastore 的查询来获取文件路径。你可以使用这样的东西

```
public String getRealPathFromURI(Uri contentUri) {
        String[] proj = { MediaStore.Images.Media.DATA,MediaStore.Images.Media._ID };
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        String path = cursor.getString(column_index);

    } 
```

# matlab - 为什么我的 MATLAB 函数与我的计算器不一致？

> ID：12879037
> 
> 赞同：1
> 
> 时间：2012-10-14T03:25:51.553
> 
> 标签：matlab

我正在尝试为 MATLAB 创建一个函数，但我只是不知道如何正确设置它。我设置了函数，然后用计算器手动完成，我似乎得到了不同的答案。我确信这是我设置它的方式。如果有人能指出问题，我将不胜感激。

我正在尝试执行以下功能：

```
x*e^(cos(x)) 
```

我在 MATLAB 中写的：

```
function y = fun2(a)

  y = a*exp(cos(a))

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:01:50.730

你的代码很好。最可能的解释是您的计算器处于`deg`模式，因此将参数`cos`视为以度为单位的角度。像 MATLAB 代码这样的计算机代码总是使用弧度而不是度数。将您的计算器切换到`rad`模式，两个评估将一致。

# ruby-on-rails - 如何对计算值进行排序？

> ID：12879040
> 
> 赞同：9
> 
> 时间：2012-10-14T03:25:58.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sorting

我目前正在建立一个 NFL pick'em 联赛网站。我有一个用户模型、一个游戏模型和一个连接表，用于捕获每个用户的个人选择。游戏模型有一个“结果”属性，它由“W”表示获胜，“L”表示失败，“P”表示推动（平局）。

我在建立排名页面时遇到了问题。我的用户模型中目前有两种方法：

```
def correct_games
  self.games.where(result: "W").count 
end

def total_games
  self.games.where('result != ?', "P").count 
end 
```

correct_games 方法计算用户正确的选择。total_games 方法计算总游戏数（不计算导致推送的游戏）。

然后在我看来，我目前对每个用户都有：`<%= number_to_percentage(current_user.correct_games.to_f / current_user.total_games) %>`

这个部门给了我那个用户的胜率（#正确/总选择）。对于我的积分榜，我显然想要按胜率降序排列。问题是排序的唯一解决方案似乎是使用 .order 方法，该方法通常需要一些属性已经存在于数据库中，然后您可以在控制器中调用这些属性。

我也尝试将这个获胜百分比属性添加到数据库中，但我似乎无法找出一个回调来在游戏结果更新时更新用户的分数。

对视图中计算的属性进行排序或将此胜率添加到用户模型的方法的任何解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T06:18:25.833

为什么不在模型中而不是在视图中进行计算？添加另一个方法，如下所示：

此代码进入您的用户模型：

```
def percentage_correct
  ((self.correct_games.to_f / self.total_games) * 100).to_i
end

def self.sorted_by_percentage_correct
  User.all.sort_by(&:percentage_correct).reverse
end 
```

这是您在视图中使用它的方式：

```
<% User.sorted_by_percentage_correct.each do |u| %>
  <div><%= u.name %> has pick percentage of <%= u.percentage_correct %>%</div>
<% end %> 
```

# sql - SQL 无法对包含聚合或子查询的表达式执行聚合函数

> ID：12879041
> 
> 赞同：2
> 
> 时间：2012-10-14T03:26:34.180
> 
> 标签：sql, select, sql-server-2008-r2, case

我是 SQL 新手，我有以下 SQL 查询

```
select catalogid, numitems, allitems - numitems ignoreditems
 from (
  select i.catalogid," 
    sum(case when (ocardtype in ('PayPal','Sofort') OR
                   ocardtype in ('mastercard','visa') and
                   odate is not null) AND NOT EXISTS (select CAST(booked AS INT) FROM bookedordersids b where b.booked = o.orderid)
                   then numitems
                   else 0 end) numitems,
    sum(numitems) allitems
  from orders o
  join oitems i on i.orderid=o.orderid
  group by i.catalogid
 ) X 
```

它给了我以下错误

```
Cannot perform an aggregate function on an expression containing an aggregat or a subquery 
```

当我删除以下行时，它工作正常

```
AND NOT EXISTS (select CAST(booked AS INT) FROM bookedordersids b where b.booked = o.orderid) 
```

但做这个检查很重要；我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:54:20.503

您可以将聚合移出一级。
虽然可以根据您的情况重写查询，但我认为最好以这种方式表达它，以便您可以轻松理解和重用该模式。

```
select catalogid, sum(numitems) numitems, sum(allitems) - sum(numitems) ignoreditems
 from (
  select i.catalogid,
    case when (ocardtype in ('PayPal','Sofort') OR
                   ocardtype in ('mastercard','visa') and
                   odate is not null) AND NOT EXISTS (
      select *
      FROM bookedordersids b
      where b.booked = o.orderid)
                   then numitems
                   else 0 end
    numitems,
    numitems allitems
  from orders o
  join oitems i on i.orderid=o.orderid
 ) X
group by catalogid 
```

# javascript - 使用主干在车把中进行迭代

> ID：12879043
> 
> 赞同：0
> 
> 时间：2012-10-14T03:27:51.463
> 
> 标签：javascript, json, backbone.js, handlebars.js

我正在使用主干和车把进行模板制作，对此我很陌生。我当前的 json 格式如下，代码运行良好。

```
[
  {
    "id": "10",
    "info": {
        "name": "data10"
    }
  },
  {
    "id": "11",
    "info": {
        "name": "data11"
    }
  }

] 
```

但是，当我将我的 json 结构更改为如下所示的内容时，我很难让东西被填充。

```
{
"total_count": "10",
"dataElements": [
    {
        "id": "10",
        "info": {
            "name": "data10"
        }
    },
    {
        "id": "11",
        "info": {
            "name": "data11"
        }
    }
]
} 
```

我如何填充名称、信息和总计数保持当前代码结构？

JSFiddle：http: [//jsfiddle.net/KTj2K/1/](http://jsfiddle.net/KTj2K/1/)

任何帮助真的很受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:32:50.587

为了使它起作用，您需要做一些事情。

用一个可以理解您传递给它的数据的自定义集合替换 Backbone 在您的集合上的核心“重置”。例如：

```
reset: function (data) {
    this.totalCount = data.total_count;
    Backbone.Collection.prototype.reset.call(this, data.dataElements);
} 
```

现在，当您重置集合时，它会将 total_count 从您正在重置的对象中提取出来，并将 Backbone 的核心重置与 dataElement 数组一起使用。请记住，如果您打算从服务器中提取它，则可能必须对“解析”执行类似的操作。

我建议（如果您的示例看起来像您正在使用的真实代码）在开始渲染之前重置您的集合。

```
var dataCollectionList = new dataCollection();
dataCollectionList.reset(jsonData);
var App = new AppView({model : dataCollectionList}); 
```

现在在您视图的“渲染”方法中，您可以从集合中获取“totalCount”属性 -

```
render : function() {
    //Should spit the total count into the element, just as an example
    this.$el.append(this.model.totalCount); 
    //or console.log it
    console.log(this.model.totalCount);
    return this;   
} 
```

瞧。旁注 - 作为一个经常使用 Backbone 的人，当人们设置诸如“模型”之类的属性（即 peopleModel、itemModel 等）并且它最终成为骨干集合时，它让我发疯。以它是什么来命名它会更清楚 - 尽管一些 MVC 纯粹主义者可能会有点不同意。

此外，在此代码块中：

```
_.each(this.model.models, function (myData) {
            $(this.el).append(new ItemView({model:myData}).render().el);
        }, this); 
```

你不需要做`_.each(this.model.models.......)`。由于您正在使用集合，因此该集合具有内置的“每个”方法。

```
this.model.each(function (myData) { ..... } , this); 
```

干净了很多。

# iphone - MKAnnotation viewForAnnotation 从未调用过

> ID：12879044
> 
> 赞同：2
> 
> 时间：2012-10-14T03:27:56.490
> 
> 标签：iphone, objective-c

我已经添加`UIViewController<MKMapViewDelegate>` 了 .h 并且已经添加了

```
 -(void) viewDidLoad {
     self.mapView.delegate = self;
 } 
```

但是 viewForAnnotation 方法从未调用过

MapViewController.h

```
 #import <UIKit/UIKit.h>
   #import <MapKit/MapKit.h>

   @interface Tela1ViewController : UIViewController<MKMapViewDelegate> {
       IBOutlet MKMapView *mapView;
   }

   @property (nonatomic, retain) MKMapView *mapView;
   @end 
```

MapViewController.m

```
 -(void) viewDidLoad {
      self.mapView.delegate = self;
  }

  - (void)viewDidAppear:(BOOL)animated
  {
      AppDelegate *appDelegate = (AppDelegate *)[[UIApplication shared

      mapView = [[MKMapView alloc] initWithFrame:self.view.bounds];
      mapView.mapType = MKMapTypeSatellite;

      CLLocationCoordinate2D coord = {latitude: appDelegate.latitude, longitude: appDelegate.longitude};
      MKCoordinateSpan span = {latitudeDelta:0.2, longitudeDelta: 0.2};
      MKCoordinateRegion region = {coord, span};

      [mapView setRegion:region];

      PlaceMark *addAnnotation = [[PlaceMark alloc] initWithCoordinate:coord];  
      [mapView addAnnotation:addAnnotation];  
      [self.view addSubview:mapView];
  }

  - (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
  {
      NSLog(@"test");
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:22:16.877

好的，有几件事要在您的代码中修复...

**MKMapView 的代表**

是`nil`。为什么？`MKMapView`因为您在`viewDidLoad`方法中设置了委托。但是当您查看时`viewDidAppear:`，您正在分配新的`MKMapView`并且您没有在那里设置委托。并且因为`viewDidLoad`在之前被调用`viewDidAppear:`，所以委托只是`nil`= 未设置。

**呼唤超级**

当您覆盖某些方法时，请阅读文档。因为您可以在`viewDidAppear:`文档中找到它，例如：

*您可以覆盖此方法以执行与呈现视图相关的其他任务。如果你重写了这个方法，你必须在你的实现中调用 super 。*

**MKMapView & IBOutlet**

而且也不明白为什么你有`MKMapView`as`IBOutlet`然后你分配新`MKMapView`的并将它添加为子视图。此外，如果你`IBOutlet`真的连接到`MKMapView`你的 XIB 中的 a，你最终会得到两个`MKMapView`s，因为旧的（来自 XIB）没有从 superview 中删除。

你显然是在搞砸事情。去阅读更多关于 UIKit，...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T05:07:09.337

尝试将 viewDidAppear 方法的最后几行替换为以下内容：

```
CLLocationCoordinate2D coord = {.latitude =  location.latitude, .longitude =  location.longitude};
MKCoordinateSpan span = {.latitudeDelta = 0.2, .longitudeDelta =  0.2};
MKCoordinateRegion region = {coord, span};

[mapView setRegion:region];

MapAnnotation *addAnnotation = [[MapAnnotation alloc] initWithCoordinate:coord];
[mapView addAnnotation:addAnnotation];
[self.view addSubview:mapView]; 
```

# apache - Apache Solr - 索引数据库表似乎检索的记录多于表中包含的记录

> ID：12879045
> 
> 赞同：0
> 
> 时间：2012-10-14T03:28:12.847
> 
> 标签：apache, solr, import, indexing

我对 Solr 很陌生，所以如果我说一些没有意义的话，请告诉我。

我最近设置了 Solr 4.0 beta，它运行良好。它使用 DIH 设置以从 MySQL DB 读取视图。该视图包含大约 2000 万行和 16 列。许多列有很多 NULL 值。数据库的性能非常好——当我手动运行查询时，我得到了亚秒级查询时间。

我将 Solr 指向视图，它开始了索引过程。四个小时后我回来检查它，发现它不仅仍在索引，而且报告说它获得了 200+ 百万。

我是否误解了 Solr 的工作原理？我假设它会获取与数据库中相同数量的行 - 大约是 2000 万。或者，它实际上是否将每个字段都计为获取的项目？或者，更糟糕的是，它是否处于某种循环中？

我通过将查询限制为 100,000 条记录，对同一视图中的一小部分数据进行了预先测试。完成后，它报告说准确地获取了 100,000。我也没有在日志中收到任何警告/错误。

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T05:39:51.080

该数字表示 db 中的行。你能发布你的 db-data-config.xml 文件吗？我认为您应该再次检查您的sql。

# c++ - 两个输入的函数的 T(n) 运行时间

> ID：12879048
> 
> 赞同：0
> 
> 时间：2012-10-14T03:28:41.373
> 
> 标签：c++, algorithm, recursion, analysis

您如何找到具有两个输入的函数的 T(n) 运行时间（不是大 O 运行时间）？你只考虑输入你的'n'吗？

```
int h(int a, int b) {
  if (a > 0) {
    return h(a-1, a+b);
  } 
  else {
    return 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T03:30:39.237

在这种情况下，我们只需要考虑`a`，因为该算法的长度不依赖于 b。

换句话说，由于我们可以为 b 传递 20000 或 -2 并且丝毫不会影响我们的时间（忽略添加的实际时间`a+b`），我们不应该在计算中考虑 b。

在更一般的情况下，如果输入确实取决于`a`并且`b`我们将在时间复杂度函数中简单地考虑这一点。换句话说，它`T(a, b)`不仅仅是`T(a)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:10:36.810

鉴于对于每个 (a,b) 对，函数值都为零 - 递归将始终在 else 分支中结束 - 编译器可能足够聪明，可以有效地减少代码以对整个主体“返回 0”并留下所有 if/else 和递归的东西，导致 O(1) 复杂性和相应的运行时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:53:44.650

由于此函数仅在 a 上重复，并且 a 在每一步中都减少 1，因此它会给出线性复杂度。所以答案是 T(a)。

# c - 警告：格式“%d”需要类型“int *”，但参数 2 的类型为“int **”

> ID：12879051
> 
> 赞同：1
> 
> 时间：2012-10-14T03:29:10.963
> 
> 标签：c, pointers, scanf

C新手，我有这个功能：

```
void getNum(int *n) {
  scanf("%d", &n);
} 
```

主要是：

```
int main() {
  int someNum;
  getNum(&someNum);
  return 0;
} 
```

这个错误的'int **'部分究竟来自哪里，我如何传递东西还有其他问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T03:30:32.593

唯一的问题是传递`&n`给 scanf:`n`已经是一个指针，因此您的`scanf`调用正在传递一个指向该指针的指针，因此会发出警告。

利用：`scanf("%d", n);`

# android - 在 Android 中存储多个 XML 文件

> ID：12879053
> 
> 赞同：2
> 
> 时间：2012-10-14T03:29:53.540
> 
> 标签：android, android-sqlite

我正在开发一个调查 android 应用程序，以便：

*   每个调查都作为 XML 文件从服务器下载。
*   一项调查可以有多个版本（新调查、新 XML）。
*   下载新的 XML 时，它应该覆盖其对应的先前 XML。

我想将文件存储在 sqlite 数据库中。如何将我的文件插入数据库？

我应该使用 BLOB 还是将 XML 的内容存储为字符串？无论如何我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:41:46.593

将整个 xml 字符串作为标准字符串存储在数据库中。然后您可以轻松检索并解析它。

有关在 android 中使用 sqlite 的教程，请参阅：

[http://developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

[http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite_02.html](http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite_02.html)

# facebook-javascript-sdk - 自动最小化聊天标签

> ID：12879054
> 
> 赞同：3
> 
> 时间：2012-10-14T03:29:54.543
> 
> 标签：facebook-javascript-sdk, chat, facebook-java-api, facebook-ui

我们必须在 hideFlashCallback 中调用 fu.init 来暂停我们的游戏。当用户在另一个页面打开我们游戏的聊天标签时，游戏会自动暂停。

有没有类似FB API之类的方法在加载游戏开始时，自动最小化聊天标签，从而解决我们的问题？

# html - css 链选择器

> ID：12879056
> 
> 赞同：0
> 
> 时间：2012-10-14T03:30:35.283
> 
> 标签：html, css

这两个结构都在同一页面中如何在 css 中定位这个 div 唯一的区别是 ul 类....

我想给这个 div 两种不同的边框颜色黄色和粉红色

[**http://jsfiddle.net/LWutU/5/**](http://jsfiddle.net/LWutU/5/)

**zpass-电流**

```
<ul class="zpass-current zpass-homepage logo-med-whttxt clearfix">
    <li>
        <a href="">
            <div class="entitlement">
                <div id="box_go">
                </div>
            </div>
        </a>
    <li>
</ul> 
```

**zpass-header**

```
<ul class="zpass-header zpass-homepage logo-med-whttxt clearfix">
    <li>
        <a href="">
            <div class="entitlement">
                <div id="box_go">
                </div>
            </div>
        </a>
    <li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:37:34.877

这是你想要的？

```
.zpass-header .entitlement { border: 1px solid yellow; }
.zpass-current .entitlement { border:  10 px solid pink; } 
```

# php - PHP 中的动态表单无法正确处理

> ID：12879063
> 
> 赞同：0
> 
> 时间：2012-10-14T03:31:06.877
> 
> 标签：php, forms, dynamic

我关于这个的最后一个问题建议我将 AJAX 与 PHP 结合起来。但是，我真的很想专门为这个项目尝试 PHP，而且我似乎已经完成了大约 95%。我只需要在这一问题上的帮助。

这是一个快速的背景。我的项目需要一个动态表单来填充最多 10 个问题。每个表单包含一个问题、一个问题编号和一个文本字段。学生会继续回答问题。这一切都是由数据库表驱动的（显然），当一个问题得到正确回答时，它将关闭并出现下一个问题。页面上总会有 10 个问题。这是编码的外观，它完美地工作。

```
<? 
$rt = mysql_query("SELECT * FROM The_Questions WHERE Status='Open' ORDER BY 'Number' LIMIT 10");
while ($row = mysql_fetch_array($rt)) {
$number=$row[0]; 
$category = $row[1];
$question=$row[2];
$points=$row[4];
$_SESSION['number'] = $number; 
?>

<form action="processor.php" method="post" class="qForm">
<div class="questionCell">
<div class="question"><? echo $number; echo $question ?></div>
<div class="answer">Answer: <input class="inputField" name="q1" type="text" size="40" maxlength="40" />
<input name="HHQuestion" value="Submit" type="submit" /></div>
</div>
</form>
<? 
} 
?> 
```

这些问题按照正确的顺序和正确的限制出现。在问题得到回答并通过 processor.php 操作进行处理之前，一切似乎都很好。首先是 processor.php 文件的代码：

```
<?php
session_start();
if(isset($_POST["HHQuestion"])){
$dbhost = 'localhost';
$dbname = 'localhost';
$dbuser = 'localhost';
$dbpass = 'localhost'; 
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
mysql_select_db($dbname, $conn);
{
$number1 = $_SESSION['number'];
$answer=$_POST['q1'];
$sql="SELECT * FROM The_Questions WHERE Number='$number1'";
$result=mysql_query($sql);
$row=mysql_fetch_array($result);
$question = $row[2];
echo $question .'<br>';
echo $number1.'<br>';
echo $answer;
}
}
?> 
```

这还没有上线，出于测试目的，我正在重复问题、问题编号和答案（如您所见）。发生的事情是 $question 和 $number1 显示数组中的最后一个问题（$answer 显示正确，这意味着它显示了以动态形式编写的任何内容）。

谁能告诉我这是为什么？如果我将 LIMIT 数字更改为 20，则 processor.php 操作将显示第 20 个问题和数字，即使我正在回答问题 8，例如以动态形式。同样，动态表单正在正确显示，并且编号正确。出于某种我不知道的原因，操作 - processor.php - 正在抓取数组中的最后一个问题。

关于我做错了什么的任何想法？我希望这是一个我忽略的简单代码更改。提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:44:48.613

## 请阅读[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)。这是**非常重要的**。

另外，请注意：

1.  `mysql_select_db`你后面的花括号是什么`processor.php`？
2.  你有`session_start()`其他文件还是只有`processor.php`？
3.  您正在覆盖您`$_SESSION['number']`的`while()`循环，将放置在变量中的最后一个条目是您的最后一条记录，`$rt = mysql_query("SELECT * FROM The_Questions WHERE Status='Open' ORDER BY 'Number' LIMIT 10");`因此，当您将限制更改为 20 时，它包含第 20 个问题是合乎逻辑的。

你可以做什么：

1.  将此添加到您的`<form>`并停止使用`$_SESSION`：

    `<input type="hidden" name="num" value="<?php echo $number; ?>" />`

2.  然后，在您的循环中，更改`$number1 = $_SESSION['number'];`为：

    `$number1 = $_POST['num'];`

3.  尽量不要与您使用的变量名称混淆。您用于`$q1`答案，并且您正在`$number1`用于项目编号。使用更具描述性的变量将在以后调试时为您提供帮助。

# java - Java 在我的递归方法中不断打印新行

> ID：12879067
> 
> 赞同：-2
> 
> 时间：2012-10-14T03:32:44.950
> 
> 标签：java, string, recursion, println

我正在尝试编写一个递归方法来打印一行中的 n 个星号并在最后创建一个新行。

所以，TriangleOps.line(5);

会打印

```
 ***** 
```

这是我写的代码：

```
 public static void line (int n){
    if(n>0){
    System.out.println("*");
    line(n-1);
    }} 
```

相反，它打印

```
 *
    *
    *
    *
    * 
```

最后有很多空间。谁能告诉我如何删除换行符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:33:33.643

采用

```
System.out.print(); 
```

反而

`println();`方法自己在末尾添加换行符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T03:35:40.573

修改`println`to并在末尾`print`添加 a ：`println`

```
public static void line(int n) {
    if (n > 0) {
        System.out.print("*");
        line(n - 1);
    }
    System.out.println();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-03T16:20:58.213

输入 System.out.print(); 覆盖

打印（）；通过这样做，该方法自己在末尾添加换行符

# arrays - 累积 +1/-1 Cointoss 在 1000 次迭代时崩溃。请指教; c++ boost随机库

> ID：12879071
> 
> 赞同：0
> 
> 时间：2012-10-14T03:33:43.327
> 
> 标签：arrays, multithreading, boost

遵循一些以前的建议 [多线程应用程序，我做对了吗？](https://stackoverflow.com/questions/12811594/multithreaded-application-am-i-doing-it-right)

我想我有一个使用 boost 的线程安全数字生成器，但是当我输入 1000 次迭代时我的程序崩溃了。绘制时的输出 .csv 文件看起来正确，但我不确定它为什么会崩溃。

它使用_beginthread，每个人都告诉我应该使用我不熟悉的更多（复杂）_beingthreadex。如果有人可以推荐一个例子，我将不胜感激。

另外...有人指出我应该将第二个参数应用于我的 _beginthread 数组计数开始位置，但我不知道如何传递多个参数，除了尝试使用结构，我已经阅读结构和 _beginthread 不能相处（虽然，我可以只使用 boost 线程......）

```
#include <process.h>
#include <windows.h>
#include <iostream>
#include <fstream>
#include <time.h>
#include <random>
#include <boost/random.hpp>

//for srand48_r(time(NULL), &randBuffer); which doesn't work
#include <stdio.h>
#include <stdlib.h>

//#include <thread>

using namespace std;
using namespace boost;
using namespace boost::random;

void myThread0 (void *dummy );
void myThread1 (void *dummy );
void myThread2 (void *dummy );
void myThread3 (void *dummy );

//for random seeds
void initialize();

    //from https://stackoverflow.com/questions/7114043/random-number-generation-in-c11-how-to-generate-how-do-they-work
    uniform_int_distribution<> two(1,2);

    typedef std::mt19937 MyRNG;  // the Mersenne Twister with a popular choice of parameters

    uint32_t seed_val;           // populate somehow

    MyRNG rng1;                   // e.g. keep one global instance (per thread)
    MyRNG rng2;                   // e.g. keep one global instance (per thread)
    MyRNG rng3;                   // e.g. keep one global instance (per thread)
    MyRNG rng4;                   // e.g. keep one global instance (per thread)

//only needed for shared variables
//CRITICAL_SECTION cs1,cs2,cs3,cs4; // global

int main()
{

    ofstream myfile;
    myfile.open ("coinToss.csv");

    int rNum;

    long numRuns;
    long count = 0;
    int divisor = 1;
    float fHolder = 0;
    long counter = 0;
    float percent = 0.0;

    //?
    //unsigned threadID;

    //HANDLE hThread;

    initialize();

    HANDLE hThread[4];

    const int size = 100000;

    int array[size];

    printf ("Runs (uses multiple of 100,000) ");
    cin >> numRuns;

    for (int a = 0; a < numRuns; a++)
     {

            hThread[0] = (HANDLE)_beginthread( myThread0, 0, (void*)(array) );
            hThread[1] = (HANDLE)_beginthread( myThread1, 0, (void*)(array) );
            hThread[2] = (HANDLE)_beginthread( myThread2, 0, (void*)(array) );
            hThread[3] = (HANDLE)_beginthread( myThread3, 0, (void*)(array) );

            //waits for threads to finish before continuing
            WaitForMultipleObjects(4, hThread, TRUE, INFINITE);

            //closes handles I guess?
            CloseHandle( hThread[0] );
            CloseHandle( hThread[1] );
            CloseHandle( hThread[2] );
            CloseHandle( hThread[3] );

        //dump array into calculations
        //average array into fHolder

            //this could be split into threads as well
            for (int p = 0; p < size; p++)
             {
                counter += array[p] == 2 ? 1 : -1;
                //cout << array[p] << endl;
                //cout << counter << endl;
            }

            //this fHolder calculation didn't work
            //fHolder = counter / size;

            //so I had to use this
            cout << counter << endl;
            fHolder = counter;
            fHolder = fHolder / size;

            myfile << fHolder << endl;

    }
}

    void initialize()
    {

      //seed value needs to be supplied
      //rng1.seed(seed_val*1);

      rng1.seed((unsigned int)time(NULL));
      rng2.seed(((unsigned int)time(NULL))*2);
      rng3.seed(((unsigned int)time(NULL))*3);
      rng4.seed(((unsigned int)time(NULL))*4);
    };

void myThread0 (void *param)
{
    //EnterCriticalSection(&cs1); //aquire the critical section object

    int *i = (int *)param;

    for (int x = 0; x < 25000; x++)
    {
        //doesn't work, part of merssene twister
        //i[x] = next();
        i[x] = two(rng1);

        //original srand
        //i[x] = rand() % 2 + 1;

        //doesn't work for some reason.
        //uint_dist2(rng);

        //i[x] = qrand() % 2 + 1;
        //cout << i[x] << endl;
    }
    //LeaveCriticalSection(&cs1); // release the critical section object

}

void myThread1 (void *param)
{
    //EnterCriticalSection(&cs2); //aquire the critical section object

    int *i = (int *)param;

    for (int x = 25000; x < 50000; x++)
    {
        //param[x] = rand() % 2 + 1;
        i[x] = two(rng2);
        //i[x] = rand() % 2 + 1;
        //cout << i[x] << endl;
    }
    //LeaveCriticalSection(&cs2); // release the critical section object

}

void myThread2 (void *param)
{
    //EnterCriticalSection(&cs3); //aquire the critical section object

    int *i = (int *)param;

    for (int x = 50000; x < 75000; x++)
    {
        i[x] = two(rng3);
        //i[x] = rand() % 2 + 1;
        //cout << i[x] << endl;
    }
    //LeaveCriticalSection(&cs3); // release the critical section object

}

void myThread3 (void *param)
{
    //EnterCriticalSection(&cs4); //aquire the critical section object

    int *i = (int *)param;

    for (int x = 75000; x < 100000; x++)
    {
        i[x] = two(rng4);
        //i[x] = rand() % 2 + 1;
        //cout << i[x] << endl;
    }
    //LeaveCriticalSection(&cs4); // release the critical section object

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:37:52.680

这并不是问题的真正答案（我确实读到 _beginThread 容易出现内存泄漏），但我确实创建了一个仅使用 boost 线程的 v5（删除了注释行）。顺便说一句，我不知道它在哪里崩溃

```
#include <process.h>
#include <windows.h>
#include <iostream>
#include <fstream>
#include <time.h>
#include <random>
#include <boost/thread.hpp>
#include <boost/random.hpp>

//for srand48_r(time(NULL), &randBuffer); which doesn't work
#include <stdio.h>
#include <stdlib.h>

//#include <thread>

using namespace std;
using namespace boost;
using namespace boost::random;

//for random seeds
void initialize();
void workerFunc1(void *dummy );
void workerFunc2(void *dummy );
void workerFunc3(void *dummy );
void workerFunc4(void *dummy );

    //from http://stackoverflow.com/questions/7114043/random-number-generation-in-c11-how-to-generate-how-do-they-work
    uniform_int_distribution<> two(1,2);

    typedef std::mt19937 MyRNG;  // the Mersenne Twister with a popular choice of parameters

    uint32_t seed_val;           // populate somehow

    MyRNG rng1;                   // e.g. keep one global instance (per thread)
    MyRNG rng2;                   // e.g. keep one global instance (per thread)
    MyRNG rng3;                   // e.g. keep one global instance (per thread)
    MyRNG rng4;                   // e.g. keep one global instance (per thread)

//only needed for shared variables
//CRITICAL_SECTION cs1,cs2,cs3,cs4; // global

int main()
{

    ofstream myfile;
    myfile.open ("coinToss.csv");

    int rNum;

    long numRuns;
    long count = 0;
    int divisor = 1;
    float fHolder = 0;
    long counter = 0;
    float percent = 0.0;

    //?
    //unsigned threadID;

    //HANDLE hThread;

    initialize();

    HANDLE hThread[4];

    const int size = 100000;

    int array[size];

    printf ("Runs (uses multiple of 100,000) ");
    cin >> numRuns;

    for (int a = 0; a < numRuns; a++)
     {

            thread workerThread1(workerFunc1, (void*)(array) );
            thread workerThread2(workerFunc2, (void*)(array) );
            thread workerThread3(workerFunc3, (void*)(array) );
            thread workerThread4(workerFunc4, (void*)(array) );

            //waits for threads to finish before continuing
            workerThread1.join();
            workerThread2.join();
            workerThread3.join();
            workerThread4.join();

            //dump array into calculations
            //average array into fHolder

            //this could be split into threads as well
            for (int p = 0; p < size; p++)
             {
                counter += array[p] == 2 ? 1 : -1;
                //cout << array[p] << endl;
                //cout << counter << endl;
            }

            //this fHolder calculation didn't work
            //fHolder = counter / size;

            //so I had to use this
            //cout << counter << endl;
            fHolder = counter;
            fHolder = fHolder / size;

            myfile << fHolder << endl;

    }
}

    void initialize()
    {

      //seed value needs to be supplied
      //rng1.seed(seed_val*1);

      rng1.seed((unsigned int)time(NULL));
      rng2.seed(((unsigned int)time(NULL))*2);
      rng3.seed(((unsigned int)time(NULL))*3);
      rng4.seed(((unsigned int)time(NULL))*4);
    };

//recieves array, and spot of array to work on,
void workerFunc1(void *param)
{

    int *i = (int *)param;

    for (int x = 0; x < 25000; x++)
    {
        //gets a random 1 or 2 value
        i[x] = two(rng1);
        //converts to -1 or +1, then adds it to sum (I would love to combine these two)
    }
    //return sum;
}

void workerFunc2(void *param)
{

    int *i = (int *)param;

    for (int x = 25000; x < 50000; x++)
    {
        //gets a random 1 or 2 value
        i[x] = two(rng2);
        //converts to -1 or +1, then adds it to sum (I would love to combine these two)
    }
    //return sum;
}

void workerFunc3(void *param)
{

    int *i = (int *)param;

    for (int x = 50000; x < 75000; x++)
    {
        //gets a random 1 or 2 value
        i[x] = two(rng3);
        //converts to -1 or +1, then adds it to sum (I would love to combine these two)
    }
    //return sum;
}

void workerFunc4(void *param)
{

    int *i = (int *)param;

    for (int x = 75000; x < 100000; x++)
    {
        //gets a random 1 or 2 value
        i[x] = two(rng4);
        //converts to -1 or +1, then adds it to sum (I would love to combine these two)
    }
    //return sum;
} 
```

# android - OnTouch 方法消耗点击事件并阻止在父进程中执行

> ID：12879073
> 
> 赞同：0
> 
> 时间：2012-10-14T03:33:44.020
> 
> 标签：android, android-view, ontouchlistener, android-event

我小时候`FrameLayout`有一个[扩展的`ImageView`（github） 。](https://github.com/Taig/MultitouchImageView)当我将`onClick()`-Event 设置为时，`FrameLayout`它不会被触发。原因似乎是[`onTouch()`方法](https://github.com/Taig/MultitouchImageView/blob/master/src/com/taig/widget/MultitouchImageView.java#L304)的返回值。

如果我将 ACTION_DOWN 的返回值设置为 false，则事件会正确传递 - 但是多点触控功能会中断。`performClick()`在 ACTION_UP 事件中运行也一无所获。

如何正确处理这些事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:40:24.433

目前我通过手动将点击事件传递给视图的父母解决了这个问题：

```
new GestureDetector( context, new GestureDetector.SimpleOnGestureListener()
{
    @Override
    public boolean onSingleTapConfirmed( MotionEvent event )
    {
        View view = MultitouchImageView.this;

        if( !performClick() )
        {
            while( view.getParent() instanceof View )
            {
                view = (View) view.getParent();

                if( view.performClick() )
                {
                    return true;
                }
            }

            return false;
        }

        return true;
    }

    ... 
} 
```

对发生的 LongPress 事件执行相同的操作。它按我需要的方式工作，但我不喜欢这个解决方案..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T13:55:08.147

尝试将父 FrameLayout 设置为在 ImageView 子之前接收触摸。您可以通过添加来做到这一点

```
android:descendantFocusability="beforeDescendants" 
```

到父级的 xml。

例如

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:descendantFocusability="beforeDescendants">
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</FrameLayout> 
```

# node.js - Node.js 堆快照：node-inspector 和 nodetime 都不会给我一个 :(

> ID：12879078
> 
> 赞同：4
> 
> 时间：2012-10-14T03:34:50.023
> 
> 标签：node.js

所以，我目前对我的应用程序遇到问题的理论是内存泄漏。我正在尝试获取堆快照以进行调查，但是...

当我尝试使用[node-inspector](https://github.com/felixge/node-memory-leak-tutorial)时，没有 Profiles 选项卡：

![在此处输入图像描述](../Images/29f336dbaf42338dd00a6f3c0398d595.png)

当我使用 nodetime 并在 Memory Profiler 工具上按“Take Heap Snapshot”时，没有输出出现。请注意，“npm install nodetime”的输出看起来不错：[http ://pastebin.com/ZGk6ZuNL](http://pastebin.com/ZGk6ZuNL)

这是我正在使用的模块：http: [//pastebin.com/UFS6jW5X](http://pastebin.com/UFS6jW5X)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:24:19.190

你试过这个模块吗？在 github 上有更多的提交。 [https://github.com/c4milo/node-webkit-agent](https://github.com/c4milo/node-webkit-agent)

# c++ - 链接器如何知道外部函数的定义在哪里？

> ID：12879081
> 
> 赞同：10
> 
> 时间：2012-10-14T03:35:38.843
> 
> 标签：c++, c, extern, keil

我阅读了一些帖子并得出结论，extern 告诉编译器“这个函数存在，但它的代码在其他地方。不要惊慌。” 但是链接器如何知道函数的定义位置。

我的案例：- 我正在研究 Keil uvision 4。有一个头文件 grlib.h，主要功能在 grlib_demo.c 中（它包括 grlib.h）。现在，在 Circle.c 中定义并在 grlib_demo.c 中调用的函数 GrCircleDraw()，还有一条语句

> extern void GrCircleDraw（所有参数）；

在 grlib.h 中。我的查询是链接器如何知道 GrCircleDraw() 的定义在哪里，因为 Circle.c 不包含在 grlib.h 和 grlib_demo.c

注意：- 文件 grlib.h 和 Circle.c 在同一个文件夹中。代码运行成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T03:37:07.090

简单的答案是“编译器不需要知道，但链接器必须能够找到它”。通过多个`.o`文件或库，链接器必须能够找到`GrCircleDraw`函数的单个定义。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-18T21:56:15.083

当您以[ELF 格式](http://www.keil.com/support/man/docs/armlink/armlink_pge1396357653538.htm)编译 .o 文件时，文件中有许多内容，`.o`例如：

*   `.text`包含代码的部分；
*   `.data`, `.rodata`,`.rss`包含全局变量的部分；
*   a`.symtab`包含`.o`（以及它们在文件中的位置）中的符号（函数、全局变量和其他）列表以及文件使用的符号`.o`；
*   诸如`.rela.text`哪些是重定位列表的部分——这些是链接编辑器（和/或动态链接器）必须进行的修改，以便将程序的不同部分链接在一起。

## 在调用方

让我们编译一个简单的 C 文件：

```
extern void GrCircleDraw(int x);

int foo()
{
  GrCircleDraw(42);
  return 3;
}

int bla()
{
  return 2;
} 
```

和：

```
gcc -o test.o test.c -c 
```

（我正在使用我系统的本机编译器，但在交叉编译到 ARM 时它的工作方式完全相同）。

您可以使用以下命令查看 .o 文件的内容：

```
readelf -a test.o 
```

在符号表中，您会发现：

```
符号表 '.symtab' 包含 10 个条目：
   Num：值大小类型绑定 Vis Ndx 名称
     0: 0000000000000000 0 NOTYPE 本地默认值
[...]
     8: 0000000000000000 21 FUNC 全局默认值 1 foo
     9: 0000000000000000 0 NOTYPE GLOBAL DEFAULT UND GrCircleDraw
    10: 0000000000000015 11 FUNC 全局默认值 1 bla

```

我们的`foo`函数有一个符号，一个`bla`. 值字段给出了它们在该`.text`部分中的位置。

使用的符号有一个符号`GrCircleDraw`：它是未定义的，因为这个函数没有在这个`.o`文件中定义，但仍然可以在其他地方找到。

在`.text`( `.rela.text`) 部分的重定位表中，您可以找到：

```
偏移 0x260 处的重定位节“.rela.text”包含 1 个条目：
  偏移信息类型 Sym。价值符号。姓名+加号
00000000000a 000900000002 R_X86_64_PC32 0000000000000000 GrCircleDraw - 4

```

此地址在 内`foo`：链接编辑器将用函数的地址修补此地址处的指令`GrCircleDraw`。

## 在被调用方

现在让我们自己编译一个实现`GrCircleDraw`：

```
void GrCircleDraw(int x)
{

} 
```

让我们看一下它的符号表：

```
符号表 '.symtab' 包含 9 个条目：
   Num：值大小类型绑定 Vis Ndx 名称
[...]
     8: 0000000000000000 9 FUNC 全局默认值 1 GrCircleDraw

```

它有一个条目用于`GrCircleDraw`定义其在其`.text`部分中的位置。

## 将它们连接在一起

因此，当链接编辑器将两个文件组合在一起时，它知道：

*   在哪个`.o`文件中定义了哪些函数及其位置；
*   在调用者的代码中，它必须使用被调用者的地址进行更新。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-14T03:49:29.827

编译器只是将`extern`函数的名称放入`.obj`文件中。编译器不需要了解更多。

当您开始链接时，作为开发人员，您有责任将所有必要的目标文件和库文件提供给链接器。链接器会将所有这些函数排列成一个二进制文件。如果您没有指定正确的库或`.obj`文件，则链接将简单地失败并显示`unresolved blah-blah`.

默认库通常被隐式包含。这使事情复杂化并产生幻觉。您始终可以指定不想要任何隐式库并明确包含所有内容。不幸的是，每个系统都以自己的方式做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T04:20:16.240

链接通常以这种方式发生：迭代命令行并且给定的每个参数都是

1.  如果是目标文件，则直接使用，
2.  在需要的范围内使用（=满足所有到目前为止尚未解决的引用）。

最后，必须满足每个引用才能成功链接。链接器命令行中给出的行顺序很重要。

# opengl - 游戏界面设计 - VBO 还是即时模式？

> ID：12879083
> 
> 赞同：0
> 
> 时间：2012-10-14T03:36:56.457
> 
> 标签：opengl, user-interface, vbo

3 个月来，我一直在开发基于 LWJGL 和 Java 1.6 的 2d RPG。我的下一个目标是写出所有与游戏无关的东西。这包括菜单、文本输入框、按钮以及物品栏和角色信息屏幕之类的东西。由于我是一名计算机工程专业的学生，​​我正在尝试自己编写所有内容（当然，LWJGL 的 OpenGL 部分除外），以便我在编写一个简单的 2d 游戏引擎时“测试”自己。我知道从头开始制作这样的东西需要基本上将纹理映射到四边形（如按钮），在上面写东西并测试触发代码中其他事件的鼠标/键盘事件。

我的疑问是：在渲染这些元素时，我应该使用 VBO（就像我在实际游戏渲染中使用的那样）还是立即模式？我真的不知道立即模式是否会降低性能。另一点是：界面元素是否必须与游戏本身一样快地更新？我不这么认为，因为实际上没有任何东西在移动……实际的游戏是这样制作的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:00:18.587

即时模式对于任务来说更直接，你不需要关心缓存和控制组合/批处理。性能下降并没有那么大，除非您在单独的`glBegin..glEnd`. 如果您不在其他任何地方使用 VBO，我建议您尝试将其用于文本输出并在更简单的即时模式下进行其他所有操作。

GUI 元素可能不会像游戏状态那样经常更改，但有一个问题——每次有光标交互时，您可能需要更新它们（例如，按钮获取`OnMouseOver`事件并需要以高亮显示）。此类事件可能会非常频繁地发生，因此可能需要全速渲染。

# ios - 从服务器读取数据并保存在txt文件中-iOS

> ID：12879086
> 
> 赞同：0
> 
> 时间：2012-10-14T03:37:08.610
> 
> 标签：ios, ios5, ios6

在应用程序中保存 txt 文件是个好主意吗？

例如，一旦用户点击播放按钮进度条被激活，它就会从服务器获取数据，并将数据解析并显示在地图上，同时将每个时间戳数据保存在 txt 文件中。一旦进度条已满，然后自行重置并再次从 0 开始。

下一个循环它不会从服务器读取数据，而是从保存的 txt 文件中读取数据。

你认为这是个好主意吗？请原谅我的问题，如果是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:37:56.517

如果您要保存的数据相对简单，则应使用`NSUserDefaults`而不是文本文件。您不必担心数据解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:54:42.873

我认为一个好的方法是将您的数据存储在 NSDictionary 中，并将其作为 *.plist 文件保存到设备上的 app 文件夹中。然后，您可以随时加载此数据源并在线刷新它。

# maven - Maven jboss插件错误：“找不到前缀jboss-as的插件”

> ID：12879091
> 
> 赞同：1
> 
> 时间：2012-10-14T03:37:47.807
> 
> 标签：maven, pom.xml

尝试运行 jboss-as:deploy 目标时出现以下错误。

> 在当前项目和插件组 [org.apache.maven.plugins, org.codehaus.mojo] 中找不到前缀“jboss-as”的插件，可从存储库 [local (/home/user/.m2/repository) ), 中央 ( [http://repo.maven.apache.org/maven2)]](http://repo.maven.apache.org/maven2)]) -> [帮助 1]

我尝试了这里写的所有东西[maven-javadoc-plugin 和 failsafe-maven-plugin 在构建 JBoss Seam 示例时丢失](https://stackoverflow.com/questions/12602520/maven-javadoc-plugin-and-failsafe-maven-plugin-missing-when-build-jboss-seam-exa)，但没有运气。我需要让这个插件工作，而不必在 maven 设置文件中添加任何东西（仅在 pom 中）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T03:56:10.143

假设你的构建部分有这样的东西：

```
<build>
...
    <plugins>
    ...
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jboss-maven-plugin</artifactId>
            <version>1.5.0</version>
            <configuration>
                <jbossHome>/usr/jboss-4.2.3.GA</jbossHome>
                <serverName>all</serverName>
                <fileName>target/my-project.war</fileName>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

那么你应该使用**`jboss:deploy`**而不是`jboss-as:deploy`. 但如果是这样：

```
<build>
...
    <plugins>
    ...
        <plugin>
            <groupId>org.jboss.as.plugins</groupId>
            <artifactId>jboss-as-maven-plugin</artifactId>
            <version>7.2.Final</version>
        </plugin>
    </plugins>
</build> 
```

那么你应该使用**`jboss-as:deploy`**而不是`jboss:deploy`.

两者都为我工作了全新安装的 maven 3.0.4 和一个裸露的 pom。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:04:51.630

是的，[威尔士](https://stackoverflow.com/a/12879167/1317678)是对的。

第一个位于[此处](http://mojo.codehaus.org/jboss-maven-plugin/)，第二个位于[此处](https://docs.jboss.org/jbossas/7/plugins/maven/latest/)。

因此，如果您需要使用“jboss-as”目标说明符或“jboss”目标说明符，请注意。

# html - 如何使用 CSS 在表格单元格中显示旋转的文本

> ID：12879098
> 
> 赞同：1
> 
> 时间：2012-10-14T03:38:26.920
> 
> 标签：html, css

这和我得到的一样接近。在 IE 9 中，行标题定位错误。在 IE 8 中，文本不会旋转正确的方向（-90 与 90 度）。在 Chrome 中，我无法调整列宽。我现在会满足于在 IE 9 中解决这个问题。我需要做什么才能使旋转的行标题在行中正确定位？

```
<html>
<head>
    <style type="text/css">
        .TableGroupHeader_cell
        {
            width: 3em;
            height: 20em;
            border: 2px solid #DDB575;
        }

        .TableGroupHeader_text
        {
            border : 1px solid black;
        }

        .TableGroupHeader_div
        {
            writing-mode:tb-rl;
           -webkit-transform:rotate(270deg);
           -moz-transform:rotate(270deg);
           -o-transform: rotate(270deg);

            text-align: center;
            font-weight: bold;
            font-size: large;
            border: 1px solid red;
            width: 10em;
            height: 2.5em;            
        }
    </style>
    <!--[if lt IE 9]>
        <style>            
            .TableGroupHeader_div
            {
                writing-mode:tb-rl;
               -ms-transform: rotate(10deg);

                text-align: center;
                font-weight: bold;
                font-size: large;
                border: 1px solid green;
                width: 2.5em;
                height: 10em;
            }
        </style>
    <![endif]-->

    <!--[if IE 9]>
        <style>            
            .TableGroupHeader_div
            {
                writing-mode:tb-rl;
               -ms-transform: rotate(180deg);

                text-align: center;
                font-weight: bold;
                font-size: large;
                border: 1px solid green;
                width: 2.5em;
                height: 10em;
            }
        </style>
    <![endif]-->

    <title>Test</title>
</head>
<body>
    <table>
        <tr class="TableDataRow">
            <td class="TableGroupHeader_cell">
                <div class="TableGroupHeader_div">
                    <label class="TableGroupHeader_text">Row Header</label>
                </div>
            </td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:13:19.123

我手头没有很多版本的资源管理器，但到目前为止，这段代码在这个浏览器中有效：

*   火狐 10.0.7 (Linux)
*   火狐14.0.1（Windows）
*   Opera 12.02（Linux 和 Windows）
*   Explorer 9（正常和兼容性视图）

```
<style type="text/css">
* { border: 0px; margin: 0px; padding: 0px; }  
.TableGroupHeader_cell { width: 3em; height: 20em; border: 2px solid #DDB575; }  
.TableGroupHeader_div { text-align: center; font-weight: bold; font-size: large; border: 1px solid red; width: 10em; height: 6.5em; }  
.TableGroupHeader_div { writing-mode:tb-rl; -webkit-transform:rotate(270deg); -moz-transform:rotate(270deg); -o-transform: rotate(270deg); }  
.TableGroupHeader_text { border: 1px solid black; display: block; height: 100%; width: 100%; filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);  }  
</style> 
```

该代码是您的代码，几乎没有额外内容，而且我删除了所有注释，因此不处理资源管理器版本。我将规则分开以使我更清楚，我希望这不是问题。

主要变化是将标签设置为块组件并将过滤器属性应用于对象。

您可以在此处阅读相关内容：

*   [基本图像过滤器](http://msdn.microsoft.com/en-us/library/ms532972%28v=vs.85%29.aspx)
*   [矩阵过滤器](http://msdn.microsoft.com/en-us/library/ms533014%28v=vs.85%29.aspx)

再见

# c#-4.0 - C#使用反射获取方法名

> ID：12879099
> 
> 赞同：0
> 
> 时间：2012-10-14T03:38:33.993
> 
> 标签：c#-4.0, dynamic, reflection, methods

> **可能重复：**
> [从方法引用 C# 中获取方法信息](https://stackoverflow.com/questions/9382216/get-methodinfo-from-a-method-reference-c-sharp)

这很可能是一些简单的事情，但到目前为止我还没有想出任何关于如何做到这一点的事情。

我希望能够以两种不同的方式获取方法的名称。请注意我想要一个方法名称，而不是属性名称。

1）在一个类里面`ClassA<T>`，看起来像：

```
var name = GetMethodName(x => x.MethodA); 
```

2）在课堂之外，看起来像：

```
var name = GetMethodName<ClassA<object>>(x => x.MethodA);
var name = GetMethodName<ClassB>(x => x.MethodB); 
```

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:13:22.543

您不需要 lambdas (`x => x.MethodA`等)。这只是混淆了问题（并隐藏了感兴趣的方法：该`MethodA`位将从您的`GetMethodName`方法中隐藏）。

相反，您可以使用反射来获取一个`MethodInfo`对象，然后该对象具有一个`Name`属性。

例如：

```
MethodInfo sm = typeof(SomeClass).GetMethod("SomeMethod");
string methodName = sm.Name; 
```

这里`methodName`将是字符串`"SomeMethod"`。（当然，在这个简单的例子中，我们使用类名来获取`MethodInfo`对象，所以它有点循环，我们还不如直接使用硬编码`"SomeMethod"`字符串！）

# django - 使用南和模型字段更改的架构迁移

> ID：12879100
> 
> 赞同：0
> 
> 时间：2012-10-14T03:39:08.947
> 
> 标签：django, migration, django-south

我有一个这样的模型

```
class Task(models.Model):
   name = models.CharField(max_length=100)
   ...

class TaskForm(forms.ModelForm):
   class Meta:
        model = Task 
```

然后，我在 Task 中添加了几个字段并进行了迁移

> python manage.py schemamigration myapp --initial python manage.py migrate myapp

迁移已成功完成。

现在，作为事后的想法，我在模型字段中添加了一个 help_text

```
class Task(models.Model):
       name = models.CharField(max_length=100,help_text='choose a good one')
       ... 
```

我是否必须再次进行架构迁移？我认为他的更改不会影响数据库表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:02:37.390

您无需再次运行 migrate。

Django 不保存`help_text`到数据库，`help_text`存在于应用程序级别，Django 将其呈现为 HTML。

# c# - 在 SSAS 措施中使用 C# DLL 中的方法

> ID：12879102
> 
> 赞同：1
> 
> 时间：2012-10-14T03:39:49.540
> 
> 标签：c#, c#-4.0, ssas, mdx

我有一个 C# dll，开发人员将在其中实现一些功能

我们想在 Meaures 计算中使用这些函数。

这可能吗？有没有人尝试过这样做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:41:53.583

可以在 MDX 中使用外部程序集（托管和非托管，但是由于这种风险和其他考虑，COM 程序集在 SQL Server 2008 Analysis Services 中已弃用）您必须将此程序集添加到 BIDS 中的 ssas 项目： ![在 BIDS 中添加程序集](../Images/3f4ef02b091d2d35b34580765484a90a.png)

然后在服务器或数据库级别上 ssis 服务器本身：

![将程序集添加到 ssas 服务器](../Images/1525f084e4d798cc8e6c51f7634b3def.png)

然后，您可以使用`AssemblyName.FullClassName.ProcedureName(Argument1, Argument2, ...)`语法使用您的方法。

更多信息：[http ://technet.microsoft.com/en-us/library/ms175398.aspx](http://technet.microsoft.com/en-us/library/ms175398.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:08:49.767

`class`将实现功能定义为`public`。也将函数定义为`public`。如果`Measures`在单独的 DLL\Project 中进行计算，只需引用包含函数的 DLL。这应该有效。

# python - 需要有关字符串格式的帮助

> ID：12879103
> 
> 赞同：2
> 
> 时间：2012-10-14T03:39:50.837
> 
> 标签：python, string, file

我用 Python 3 编写了这个程序，它采用 CSV 文件来查找特定州的最小和最大死亡率。

我基本上已经完成了程序并且它在shell中正确输出了，但是我有一个问题：

1.  不同的州在其名称中有不同长度的字符，并且间距确实正确，如何使用字符串格式使字符串空间均匀，而不管打印的字符数如何？

这是我所拥有的：

```
print ("\n", "Indicator                       |", "Min                   ",
       "        | Max     ")
print ("-----------------------------------------------------------------------------------------------") 
```

这是输出：

![在此处输入图像描述](../Images/c4a8ffbc1a852007d191c28f459c6e7e.png)

它适用于“明尼苏达”，但“哥伦比亚特区”的格式不均匀。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T04:04:07.803

使用此处描述的字符串格式：http: [//docs.python.org/release/3.1.5/library/string.html](http://docs.python.org/release/3.1.5/library/string.html)

例如：

```
print('{:20} | {:20} {:5.2f} | {:20} {:5.2f}'.format(title, states[statemin], minimum, states[statemax], maximum)) 
```

将 20 替换为将出现的最长字符串。

请注意，我假设最小值和最大值是浮点数，如果它们是字符串，则不能使用 '{:x.yf}' 表示法，而只能使用 {:6} 或类似的东西。

`{:20}`意味着`20`空格字符用于字符串，即使它更短（它不会在更长时截断）。`{:5.2f}`表示`5`浮点数使用空格，其中`2`小数点后。

# aem - 什么是 CQ5 覆盖组件？

> ID：12879115
> 
> 赞同：3
> 
> 时间：2012-10-14T03:42:58.243
> 
> 标签：aem

我被要求通过简单地将开箱即用的组件从 /libs/foundation/components/flash 复制到 /apps/myproject/components/flash 来创建 CQ5“覆盖”组件。我的问题是：原件会发生什么 - 它只是被忽略了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T17:15:31.837

CQ5“覆盖”利用吊索规则进行资源解析。如果`/libs/foundation/components/flash`需要覆盖，您可以在位置`/apps/foundation/components/flash/`*文件名*“覆盖”相应的文件。 这将改变基础组件在所有实例中的行为方式。现有的 Sidekick 组件仍然存在，但行为不同。

如果您有一个 NEW 组件`/apps/myproject/components/flash`，它可以通过新组件从基础组件继承`sling:resourceSuperType`。在这种情况下，您在 Sidekick 中有一个新组件。在您的新组件中，您可以对 , 使用相同的值`jcr:title`，`componentGroup`或者您可以更改它们以区分 Sidekick 中的组件。如果 title、componentGroups 相同，sidekick 可以通过 webapp (foundation) vs (myproject) 周围的括号来区分它们。但是，我看到了作为作者无法区分它们的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T03:46:31.657

它没有被忽视。这两个组件都可以出现在作者的伙伴中——一个会说 flash（基础），另一个会说 flash（myproject）。当作者使用其中之一时，CQ 将适当地实例化。通常的规则适用于 Sidekick 中显示的内容（组名、在设计模式中选择等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:18:40.773

澄清一下：overlay 和 flash 是两个不同的东西。覆盖实现示例：http: [//jquerytools.org/documentation/overlay/index.html](http://jquerytools.org/documentation/overlay/index.html)

因此，如果您被要求创建一个 Overlay 组件，则复制一个 Flash 组件可能不是最好的主意。

# python - 需要帮助理解 python 中的此错误文本：

> ID：12879117
> 
> 赞同：3
> 
> 时间：2012-10-14T03:44:35.217
> 
> 标签：python, tkinter, traceback

好的，所以基本上我写了一个不太漂亮的 GUI，它给出了随机的简单数学问题。它就像我想要的那样工作。然而，每次我点击进入时，空闲的 Shell 都会向我吐出红色。尽管如此，就像我说的，它会继续按照我的意愿运行。所以我很难理解为什么我的代码的这个特定部分会导致问题。很长一段代码的道歉：

```
from tkinter import Label, Frame, Entry, Button, LEFT, RIGHT, END
from tkinter.messagebox import showinfo
import random

class Ed(Frame):
    'Simple arithmetic education app'
    def __init__(self,parent=None):
        'constructor'
        Frame.__init__(self, parent)
        self.pack()
        self.tries = 0
        Ed.make_widgets(self)
        Ed.new_problem(self)

    def make_widgets(self):
        'defines Ed widgets'
        self.entry1 = Entry(self, width=20, bg="gray", fg ="black")
        self.entry1.grid(row=0, column=0, columnspan=4)
        self.entry1.pack(side = LEFT)
        self.entry2 = Entry(self, width=20, bg="gray", fg ="black")
        self.entry2.grid(row=2, column=2, columnspan=4)
        self.entry2.pack(side = LEFT)
        Button(self,text="ENTER", command=self.evaluate).pack(side = RIGHT)

    def new_problem(self):
        'creates new arithmetic problem'
        opList = ["+", "-"]
        a = random.randrange(10+1)
        b = random.randrange(10+1)
        op = random.choice(opList)
        if b > a:
            op = "+"
        self.entry1.insert(END, a)
        self.entry1.insert(END, op)
        self.entry1.insert(END, b)

    def evaluate(self):
        'handles button "Enter" clicks by comparing answer in entry to correct result'
        result = eval(self.entry1.get())
        if result == eval(self.entry2.get()):
            self.tries += 1
            showinfo(title="Huzzah!", message="That's correct! Way to go! You got it in {} tries.".format(self.tries))
            self.entry1.delete(0, END)
            self.entry2.delete(0, END)
            self.entry1.insert(END, self.new_problem())
        else:
            self.tries += 1
            self.entry2.delete(0, END) 
```

这是我收到的信息：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python32\lib\tkinter\__init__.py", line 1399, in __call__
    return self.func(*args)
  File "C:\Python32\Python shit\csc242hw4\csc242hw4.py", line 55, in evaluate
    self.entry1.insert(END, self.new_problem())
  File "C:\Python32\lib\tkinter\__init__.py", line 2385, in insert
    self.tk.call(self._w, 'insert', index, string)
_tkinter.TclError: wrong # args: should be ".52882960.52883240 insert index text" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T04:17:20.223

错误消息说 Tkinter 认为它得到了错误数量的 args。

进一步回顾回溯，我们看到这一行导致了错误：

```
File "C:\Python32\Python shit\csc242hw4\csc242hw4.py", line 55, in evaluate
    self.entry1.insert(END, self.new_problem()) 
```

但这似乎是正确的参数数量！发生什么了？

问题是`self.new_problem()`返回`None`。看起来 Python 的 Tkinter 包装器在`None`.

要解决此问题，请摆脱对第 55 行的调用`insert`并将第 55 行更改为

```
self.new_problem() 
```

这是有效的，因为您已经`self.entry.insert`从内部调用`new_problem`。

# php - 在 PHP 中，我如何确保一个目录作为来自网络的公共读取访问权限？

> ID：12879124
> 
> 赞同：0
> 
> 时间：2012-10-14T03:46:15.050
> 
> 标签：php

我有一堆 JavaScript 文件，我想缩小它们，然后将其缓存到一个文件中。该文件保存到我作为参数提供的位置。

如何确保可以从网络访问该位置？

到目前为止我已经尝试过：

```
$test = array
(
    '/Users/www/htdocs/test/nhecos/cache/test.js',
    '/Users/www/foo.js'
);
$host = 'http://localhost/';

foreach($test as $t) {
    $url = str_replace($_SERVER['DOCUMENT_ROOT'], $host, $t, $count);
    $perms = substr(sprintf('%o', fileperms($t)), -4);
    $p = substr($perms, -1);

    if ($count > 0 && $p >= 4) 
        print $url;
    else 
        throw new \Exception(sprintf("File %s not accessible from Web!", $t));
} 
```

这在大多数情况下都有效，但如果该文件位于虚拟主机目录或链接文件夹中，则会失败。有没有更好的办法？

**注意：我的问题是确保**

> “我生成的文件位于 Web 服务器已知的位置并映射到 URL。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:55:25.783

可从网络访问是一回事，拥有“公共阅读访问权限”是另一回事。你不需要一个做另一个。

通常，“公共读取访问”是指特定于操作系统的文件系统权限。可从网络访问意味着：

1.  它位于 Web 服务器已知的目录中 - 也就是说，文件系统位置由 Web 服务器映射到 URL。

2.  文件（和封闭目录）的权限使得 web 服务器进程可以读取文件（对于静态文件），并且可以执行文件（对于从与 web 相同的用户运行的处理程序运行的脚本服务器）。

因此，在您的情况下，您要确保：

1.  该脚本以与 Web 服务器相同的用户身份运行 - 通常是这种情况，但在某些情况下，您的脚本可能以不同的系统用户身份运行。

2.  您*生成*的文件位于 Web 服务器已知的位置并映射到 URL。

3.  最后，您生成的文件的权限（特别是如果执行您的脚本的用户与 Web 服务器进程不同），具有基于系统布局的正确权限。

在大多数类 unix 系统上，Web 服务器运行为`www`或`apache`. 在 debian 上它的`www-data`.

一般来说，静态文件需要八进制权限`644`，即拥有者`rw`，其余的只能读取。在`ls -l`列表中，`-rw-r--r--`如果目录不属于服务器进程，则这是针对文件的。

对于访问权限的故障排除，[apache wiki](http://wiki.apache.org/httpd/13PermissionDenied)有提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:05:36.840

也许这个使用“is_readable”的简单检查会有所帮助，下面只是一个例子：

```
<?php
    if (is_readable('../../../www')) echo "www is readable"; 
        else echo "www is unaccessible";
    echo '<br/>';
    if (is_readable('../../htdocs')) echo "htdocs is readable"; 
        else echo "htdocs is unaccessible";
?> 
```

更新以能够使用指定的 URL 检查文件（使用 file_get_contents 或从 PHP 复制函数/方法）：

```
<?php
    if (@copy('http://.../file.js', 'dummy.file')) echo "file is readable"; 
        else echo "file is unaccessible";
    echo '<br/>';
    if (@file_get_contents('http://.../file.js'))  echo "file is readable"; 
        else echo "file is unaccessible";
?> 
```

干杯，

# asp.net - Gridview rowdatabound 正在为行中的复选框设置 onclick javascript

> ID：12879132
> 
> 赞同：0
> 
> 时间：2012-10-14T03:48:27.097
> 
> 标签：asp.net, gridview, onclick, rowdatabound

`enter code here`我继承的一些代码中有一个gridview，它使用rowdatabound将javascript添加到复选框。这是为了使行复选框能够由标题中的主复选框设置。这一切都有效。问题是性能。用户不想分页，其中一些网格可能有数千行。如果我们不使用 Attributes.Add() 来连接 javascript，渲染速度会很快。如果我确实使用 rowdatabound 进行 javascript 注入，那么仅 600 行的性能就会从瞬时变为近一分钟。那是不对的。

所以我有两个问题：

1) rowdatabound 需要永远处理这些 javascript 注入是否正常？

2）如果是这样，您会推荐什么作为设置行复选框以与标题中的主复选框一起使用的更快替代方法？

由于我是论坛的新手，我要感谢这里的每个人已经收到的帮助。我已经潜伏了好几个星期了，你们的知识和乐于助人都给我留下了深刻的印象。

更新：

感谢大家的帮助。这就是我最终做的事情：

首先，我必须在我的 aspx 中设置一些变量来捕获母版页环境的 clientID：

```
 <script language="javascript" type="text/javascript">
  //set the control id required by the external javascript 
  var ChangedAddressesGridViewID = '<%=ChangedAddressesGridView.ClientID%>';
 </script> 
```

然后我将标题复选框的 onclick 设置为我的标题函数的名称，并将子复选框的 onclick 设置为我的子单击函数的名称。我只提供了三个参数，“this”用于单击的复选框本身，GridView 的 MasterPage 友好名称，以及表示列的数字。硬编码，我知道，但列不是动态的，所以目前不是问题：

```
<asp:GridView id="ChangedAddressesGridView" runat="server" AutoGenerateColumns="False" >
    <Columns>
        <asp:BoundField datafield="AddressId" headertext="ID" />
        <asp:BoundField datafield="Code" headertext="Code" />
        <asp:BoundField datafield="Facility" headertext="Facility" />
        <asp:BoundField datafield="Address" headertext="Address" /> 

        <asp:TemplateField headertext="Select">
            <HeaderTemplate>
                <asp:Label id="LBLOverride" runat="server" text="Override" font-size="Smaller" font-names="Arial"></asp:Label><br />
                <asp:CheckBox id="chkBxHeader1" runat="server" onclick="HeaderClick(this,ChangedAddressesGridViewID,'4');"></asp:CheckBox> <br />
            </HeaderTemplate>
            <ItemTemplate>
                <asp:CheckBox id="chkBxSelect1" runat="server" onclick="ChildClick(this,ChangedAddressesGridViewID,'4');" ></asp:CheckBox> 
            </ItemTemplate>
            <headerstyle horizontalalign="Center" />
            <itemstyle horizontalalign="Center" />
        </asp:TemplateField>    

        <asp:BoundField datafield="CAddress" headertext="Corrected Address" />

        <asp:TemplateField headertext="Select">
            <HeaderTemplate>
                <asp:Label id="lblChange" runat="server" text="Change" font-size="Smaller" font-names="Arial"></asp:Label><br />
                <asp:CheckBox id="chkBxHeader2" runat="server" onclick="HeaderClick(this,ChangedAddressesGridViewID,'6');"></asp:CheckBox> 
            </HeaderTemplate>
            <ItemTemplate>
                <asp:CheckBox id="chkBxSelect2" runat="server" onclick="ChildClick(this,ChangedAddressesGridViewID,'6');"></asp:CheckBox> 
            </ItemTemplate>
            <headerstyle horizontalalign="Center" />
            <itemstyle horizontalalign="Center" />
        </asp:TemplateField>  

     </Columns>
</asp:GridView> 
```

这是使它工作的JavaScript：

```
function GetHeaderCheckBox(grid, cellnum) {
    cell = grid.rows[0].cells[cellnum];
    for (j = 0; j < cell.childNodes.length; j++) {
        if (cell.childNodes[j].type == "checkbox") {return cell.childNodes[j]; }
    }
    return false;   
}

function CheckBoxIsChecked(row, cellnum) {
    cell = row.cells[cellnum];
    for (j = 0; j < cell.childNodes.length; j++) {
        if (cell.childNodes[j].type == "checkbox") {
            return cell.childNodes[j].checked;
        }
    }
}

function SetCheckBox(row, cellnum, checkedValue) {
     cell = row.cells[cellnum];
     for (j = 0; j < cell.childNodes.length; j++) {
         if (cell.childNodes[j].type == "checkbox") {
             cell.childNodes[j].checked = checkedValue;
         }
     }
}

function HeaderClick(HeaderCheckBox, GridViewID, checkboxcolumn) {

    var checkedValue;
    var grid = document.getElementById(GridViewID);
    var TotalChkBx = grid.rows.length;

    if (HeaderCheckBox.checked == true) { checkedValue = true; } else { checkedValue = false; }

    for (var n = 1; n < TotalChkBx; n++) {
        SetCheckBox(grid.rows[n], checkboxcolumn, checkedValue);
    };
}

function ChildClick(RowCheckBox, GridViewID, checkboxcolumn) {

    var grid = document.getElementById(GridViewID);
    var HeaderCheckBox = GetHeaderCheckBox(grid, checkboxcolumn);
    var TotalChkBx = grid.rows.length;
    var TotalChkBxChecked = 0;

    for (var n = 1; n < TotalChkBx; n++) {
        if (CheckBoxIsChecked(grid.rows[n], checkboxcolumn)) { TotalChkBxChecked++; }
    };

    if (TotalChkBxChecked == TotalChkBx - 1) { HeaderCheckBox.checked = true; } else { HeaderCheckBox.checked = false; }
} 
```

你有它。与大多数类似示例不同的是，我想按列而不是仅仅通过“输入”列表。这是因为我有两个复选框列，我不确定如何通过“输入”将它们分开而不会变得非常混乱。因此，我找到了一个示例，帮助我了解如何在此处执行此操作：

[http://technico.qnownow.com/how-to-delete-multiple-rows-from-gridview-with-checkboxes/](http://technico.qnownow.com/how-to-delete-multiple-rows-from-gridview-with-checkboxes/)

另外，为了消除更多不必要的参数，我让子函数自己找出它的标题复选框。

无论如何，现在我有一个全选标题/子复选框模式，我可以放在任何地方。以前的版本必须查找特定的复选框名称，因此它仅限于那一列，这意味着您必须在需要的地方复制/粘贴功能。分歧已经悄悄出现，我的行为变得不一致和错误。使用此解决方案，到目前为止，没有错误，并且到处都有相同的行为。

并且没有行数据绑定。生活很好。

再次感谢大家。你们都帮助我思考了问题的各个部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:39:55.000

如果我的理解是正确的，您添加 JavaScript 只是为了与 Master 的复选框交互以选中/取消选中`GridView`

这是我的假设，因为您没有提供任何代码，也没有回答我上面的问题......

好吧，如果是这种情况，您可以在客户端使用 JQuery 来获得相同的效果：

例子：

```
<script>
    $(function () {
        var $grid = $("table[id$=myCustomGridView]");
        var $rows = $("> tbody > tr:not(:has(table, th))", $grid);
        var $master = $("input:checkbox[id$=masterCheck]");
        var $gridChecks = $("input:checkbox", $rows);

        $master.change(function (e) {
            e.preventDefault();

            $gridChecks.prop("checked", $master.is(":checked"));
        });

        $gridChecks.change(function (e) {
            e.preventDefault();

            var masterValue = true;

            for (var i = 0; i < $gridChecks.length; i++) {
                var $x = $gridChecks.eq(i);

                if (!$x.is(":checked")) {
                    masterValue = false;
                    break;
                }
            }

            $master.prop("checked", masterValue);
        });
    });
</script>
<asp:CheckBox Text="Check/Uncheck all" runat="server" ID="masterCheck" />
<asp:GridView runat="server" ID="myCustomGridView">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:CheckBox runat="server" ID="myCheckBox" Text='<%# Eval("job_desc") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

[这是一个现场样本](http://jsfiddle.net/jupaol/35q6W/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:39:59.090

您可以在不使用 javascript 的情况下从后端执行相同的操作。使用`CheckedChanged`标题复选框的功能来做到这一点。代码应该是这样的 -

```
protected void chkAll_CheckedChanged(object sender, EventArgs e)
{
    CheckBox chk = (CheckBox)GridView1.HeaderRow.FindControl("chkAll");
    if (chk.Checked)
    {
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            CheckBox chkrow = (CheckBox)GridView1.Rows[i].FindControl("CheckBox1");
            chkrow.Checked = true;
        }

    }
    else
    {
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            CheckBox chkrow = (CheckBox)GridView1.Rows[i].FindControl("CheckBox1");
            chkrow.Checked = false;
        }
    }

} 
```

让我知道这是如何执行的。

# python - 在python中存储深度优先搜索的路径

> ID：12879138
> 
> 赞同：0
> 
> 时间：2012-10-14T03:49:44.443
> 
> 标签：python, data-structures

我正在尝试为矩形网格编写 DFS，其中我从某个（x，y）坐标开始并且必须达到目标坐标（xg，yg）。我需要我的函数返回一个路径，该路径实际上是我所采取的方向列表，比如

* * *

```
action=['Up','Left','Left','Bottom'] 
```

* * *

到目前为止我的代码是这样的

* * *

```
def depthFirstSearch():
    visited=[]                # stores the vertices that I have visited  
    action=[]                 # this is what I have to return
    stack=Stack()             # the general stack used in DFS
    forward=Stack()           # stores the forward direction 
    reverse=Stack()           # stores the backward direction, in case we need to backtrack
    stack.push(getStartState())

    while not stack.isEmpty():
        tmp=stack.pop()
        if(GoalState(tmp)):
            return action
        if not tmp in visited:
            visited.append(tmp)
            if not forward.isEmpty():
                dirn=forward.pop()
                action.append(dirn)
                reverse.append(opposite(dirn))

        child1=getSuccessors(tmp)   # returns all the possible childs and direction as a list
        child2=[]

        for st in child1:
            if not st in visited:
                child2.append(st)

        if child2:
            for state in child2:
                stack.push(state[0])
                forward.push(state[1])
                reverse.push(oppposite(state[1])
        elif not child2:
            action.append(reverse.pop()) 
```

* * *

我是 python 新手，如果有人能在这里帮助我，我将不胜感激。我遇到了缩进问题。此外，我不太确定我的 DFS 存储路径的逻辑。请帮忙 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:03:29.480

这是一篇解释[深度优先搜索](http://en.literateprograms.org/Depth-first_search_%28Python%29)的文章。您所做的是以下，您有`start`节点，在您的情况下`(x,y)`，然后检查您访问的步骤是否已达到深度优先搜索的方式`goal`是`(xg,yg)`，它维护一个堆栈并将每个访问的节点推入堆栈和弹出它们并检查它是否是目标。在您的程序中，您必须将该检查步骤写入列表。我希望该教程链接可以帮助您入门。

# bison - 无法访问野牛 2.6 中的令牌表 yytname 还是消失了？

> ID：12879140
> 
> 赞同：1
> 
> 时间：2012-10-14T03:50:50.887
> 
> 标签：bison, flex-lexer

我正在为资产交换格式构建解析器。我在野牛文件中包含了 %token-table 指令，但是，从弹性代码中，我无法访问表或与之关联的常量。那是在尝试编译此代码时：

```
Frame|FrameTransformMatrix|Mesh|MeshNormals|MeshMaterialList|Material {
    printf("A keyword: %s\n", yytext);
    yylval.charptr_type = yytext;

    int i;
    for (i = 0; i < YYNTOKENS; i++)
    {
        if (yytname[i] != 0
            && yytname[i][0] == '"'
            && !strncmp(yytname[i] + 1, yytext, strlen(yytext))
            && yytname[i][strlen(yytext) + 1] == '"'
            && yytname[i][strlen(yytext) + 2] == 0)
            return i;
    }
} 
```

gcc 说 YYNTOKENS 和 yytname 都没有声明。那么令牌表是否最终被弃用并被清除，或者是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:17:46.117

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-16T22:47:22.777

There's a quick and easy way around the 'static' issue. I was trying to print a human readable abstract syntax tree with string representations of each non-terminal for my C to 6502 compiler. Here's what I did...

In your .y file in the last section, create a non-static variable called token_table

```
%%
#include <stdio.h>

extern char yytext[];
extern int column;
const char ** token_table;
... 
```

Now, in the main method that calls yyparse, assign yytname to token_table

```
int main(int argc, char ** argv) {
    FILE * myfile;
    yydebug = 1;
    token_table = yytname;
    ... 
```

Now, you can access token_table in any compilation unit simply by declaring it as an extern, as in:

```
extern const char ** token_table;

/* Using it later in that same compilation unit */
printf("%s", token_table[DOWHILE - 258 + 3]); /* prints "DOWHILE" */ 
```

For each node in your AST, if you assign it the yytokentype value found in y.tab.h, you simply subtract 258 and add 3 to index into token_table (yytname). You have to subtract 258 b/c that is where yytokentype starts enumerating at and you have to add 3 b/c yytname adds the three reserved symbols ("$end", "error", and "$undefined") at the start of the table.

For instance, my generated bison file has:

```
static const char *const yytname[] =
{
    "$end", "error", "$undefined", "DOWHILE", "UAND", "UMULT", "UPLUS",
    "UMINUS", "UBANG", "UTILDE", "ARR", "NOOP", "MEMBER", "POSTINC",
    ... 
```

And, the defines header (run bison with the --defines=y.tab.h option):

```
/* Tokens.  */
#ifndef YYTOKENTYPE
# define YYTOKENTYPE
   /* Put the tokens into the symbol table, so that GDB and other debuggers
      know about them.  */
   enum yytokentype {
     DOWHILE = 258,
     UAND = 259,
     UMULT = 260,
     ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T04:02:36.760

The easiest way to avoid the static symbol problem is to `#include` the lexer directly in the third section of the bison input file:

```
/* token declarations and such */
%%
/* grammar rules */
%%

#include "lex.yy.c"

int main() {
  /* the main routine that calls yyparse */
} 
```

Then you just compile the .tab.c file, and that's all you need.

# html - 在背景图像上放置左边距

> ID：12879141
> 
> 赞同：4
> 
> 时间：2012-10-14T03:50:55.813
> 
> 标签：html, css

我是 CSS 新手。我想要做的是我想在 HTML 中放置背景图像。我的意图是我想在 200px 的背景图像上留出边距。我的代码共享如下，或者您可以查看此 jsfiddle：http: [//jsfiddle.net/benmore/D5sNs/](http://jsfiddle.net/benmore/D5sNs/)

```
 <style type="text/css">

        body{
            margin-left:200px;
            background:#5d9ab2 url(https://lh5.googleusercontent.com/-ZBLYo1oD6bM/UHox3oBICxI/AAAAAAAAAgo/yCg6TcxLeC4/s358/img_tree.png) no-repeat top left;

        }

        .container {
            text-align:center;  
            width: 100px;
        }   

    </style>
    <title></title>
</head>
<body class="homepage">
    <div class="container">
        test
    </div>

</body> 
```

我唯一的问题是背景保持在左边。我该怎么做才能使它从页面左边缘开始 200 像素？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T03:52:20.290

添加`background-position: 200px 0;`到您`body`的 CSS

**演示：http:** [//jsfiddle.net/D5sNs/1/](http://jsfiddle.net/D5sNs/1/)

`background-position`CSS 属性允许您将背景图像放置在容器周围。在这里阅读更多：[http ://reference.sitepoint.com/css/background-position](http://reference.sitepoint.com/css/background-position)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:53:05.327

创建一个 div 容器，在其中设置背景图像并添加以下行：

左：200px；

（对于 div）

你也可以使用跨度

# java - 更新 字符串更改时的内容

> ID：12879147
> 
> 赞同：0
> 
> 时间：2012-10-14T03:52:59.040
> 
> 标签：java, ajax, jsf, richfaces

好的，这是一个微不足道的问题，但它就在这里。我想`<h:inputTextArea value="bean.status" disabled="true"/>`在我的视图中使用 a 显示对数据库进行的各种插入/更新的进度（使用richfaces）。这`Bean`是一个支持 bean，它有一个`status`属性和一个添加状态消息的方法：

```
public void addMessage(String message) {
    status = status.concat(message + "\n");
} 
```

有一个“迁移”按钮可以启动该过程。我的问题是文本区域仅在迁移器方法结束时更新。我需要的是每次`status`更新时，输入文本区域也会更新。所以...

1 - 怎么做？

2 - 有没有更好的方法来实现这个？

* * *

根据 RichFaces Component References，它是必需的：

*   设置推送

*   使用服务器端或客户端方法

*   实现消息生产者

*   处理推送消息

所以我做了：

*   安装运行时依赖项（Atmosphere）： -- 添加了 Maven 的大气运行时 1.0.0.beta4 依赖项

*   注册 Push Servlet -- Servlet 3.0 不需要，但在 web.xml 中添加了手动配置：

    推送 Servlet org.richfaces.webapp.PushServlet 1 true

*   选择带有 Push CDI Event 机制的服务器端方法来触发消息。将我的 Status.java 更新为消息生产者：

    导入 java.io.Serializable；导入 javax.enterprise.context.SessionScoped；导入 javax.enterprise.event.Event；导入 javax.inject.Inject；导入 javax.inject.Named；导入 org.richfaces.cdi.push.Push；

    @Named @SessionScoped 公共类 Status 实现 Serializable {

    ```
    @Inject
    @Push(topic = "statusPush")
    Event<String> pushEvent;
    private String status;

    public void addMessage(String message) {
        //Everytime the status is updated...
        status = status.concat(message + "\n");
        //... the message is sent to the topic
        sendMessage(message);
    }

    public void sendMessage(String message) {
        pushEvent.fire(message);
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    } 
    ```

    }

*   处理视图上的消息：

    ```
    <a4j:push address="statusPush"
        onerror="alert(event.rf.data)">
        <a4j:ajax event="dataavailable" render="statusOutput" />
    </a4j:push>

    <h:inputTextarea id="statusOutput" value="#{status.status}" cols="80" rows="20" disabled="true"/> 
    ```

似乎一切就绪，但是当我单击启动迁移过程的按钮时，我得到以下堆栈跟踪：

> 警告：StandardWrapperValve [Faces Servlet]：PWC1406：Servlet Faces Servlet 的 Servlet.service() 抛出异常 com.google.common.collect.ComputationException：javax.faces.FacesException：在 SerialContext[myEnv={ 中查找“/ConnectionFactory”失败java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory，java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl，java.naming.factory。 org.richfaces.application.push.impl.jms.JMSTopicsContextImpl.createTopic( JMSTopicsContextImpl.java:281) 在 org.richfaces.application.push.TopicsContext.getOrCreateTopic(TopicsContext.java:48) 在 org.richfaces。application.push.impl.SessionImpl.createSubscriptions(SessionImpl.java:190) at org.richfaces.application.push.impl.SessionImpl.subscribe(SessionImpl.java:185) at org.richfaces.resource.PushResource.encode(PushResource. java:88) at org.richfaces.resource.UserResourceWrapperImpl.encode(UserResourceWrapperImpl.java:188) at org.richfaces.resource.ResourceHandlerImpl.handleResourceRequest(ResourceHandlerImpl.java:229) at javax.faces.webapp.FacesServlet.service(FacesServlet .java:591) 在 org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) 在 org.apache.catalina。 core.StandardContextValve.invoke(StandardContextValve.java:175) 在 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655）在 org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161) 在 org.apache.catalina.connector.CoyoteAdapter .doService(CoyoteAdapter.java:331) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java :317) com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860) com.sun。 grizzly.comet.CometEngine.executeServlet(CometEngine.java:459) 在 com.sun.grizzly.comet.CometEngine.handle(CometEngine.java:316) 在 com.sun.grizzly.comet.CometAsyncFilter.doFilter(CometAsyncFilter.java:87) 在 com.sun.grizzly.arp.DefaultAsyncExecutor.interrupt(DefaultAsyncExecutor.java:143) 在 com.sun.grizzly.arp.DefaultAsyncExecutor.invokeFilters(DefaultAsyncExecutor.java:171) 在 com.sun.grizzly.arp .AsyncProcessorTask.doTask(AsyncProcessorTask.java:102) 在 com.sun.grizzly.http.TaskBase.run(TaskBase.java:193) 在 com.sun.grizzly.http.TaskBase.execute(TaskBase.java:175) 在com.sun.grizzly.arp.DefaultAsyncHandler.handle(DefaultAsyncHandler.java:145) 在 com.sun.grizzly.arp.AsyncProtocolFilter.execute(AsyncProtocolFilter.java:210) 在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain. java:137) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 在 com.sun.com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)。grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) 在 com .sun.grizzly.ContextTask.run(ContextTask.java:71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.run (AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 原因：javax.faces.FacesException：在 SerialContext[myEnv={java.naming.factory.初始=com.sun.enterprise.naming.impl.SerialInitContextFactory，java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl，java.naming.factory.url.pkgs=com。太阳。Enterprise.naming} 在 org.richfaces.application.push.impl.jms.JMSTopicsContextImpl$1.apply(JMSTopicsContextImpl.java:207) 在 org.richfaces.application.push.impl.jms.JMSTopicsContextImpl$1.apply(JMSTopicsContextImpl.java: 195) com.google.common.collect.ComputingConcurrentHashMap$ComputingValueReference.compute(ComputingConcurrentHashMap.java:355) com.google.common.collect.ComputingConcurrentHashMap$ComputingSegment.compute(ComputingConcurrentHashMap.java:184) com.google.common .collect.ComputingConcurrentHashMap$ComputingSegment.getOrCompute(ComputingConcurrentHashMap.java:153) at com.google.common.collect.ComputingConcurrentHashMap.getOrCompute(ComputingConcurrentHashMap.java:69) at com.google.common.collect.ComputingConcurrentHashMap$ComputingMapAdapter.get(ComputingConcurrentHashMap .java:393) ...39 更多原因：javax.naming.NamingException：在 SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory. state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [根异常是 javax.naming.NameNotFoundException: ] at com。 sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518) 在 com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455) 在 com.sun.enterprise.naming.impl。 SerialContext.lookup(SerialContext.java:654) at javax.naming.InitialContext.lookup(InitialContext.java:415) at javax.naming.InitialContext.lookup(InitialContext.java:415) at org.richfaces.application.push.impl .jms。JMSTopicsContextImpl$JMSTopicContext.createConnection(JMSTopicsContextImpl.java:98) 在 org.richfaces.application.push.impl.jms.JMSTopicsContextImpl$JMSTopicContext.start(JMSTopicsContextImpl.java:123) 在 org.richfaces.application.push.impl.jms。 JMSTopicsContextImpl$1.apply(JMSTopicsContextImpl.java:199) ... 45 更多原因：javax.naming.NameNotFoundException: at com.sun.enterprise.naming.impl.TransientContext.resolveContext(TransientContext.java:310) at com.sun .enterprise.naming.impl.TransientContext.lookup(TransientContext.java:218) 在 com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77) 在 com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl .lookup(LocalSerialContextProviderImpl.java:119) 在 com.sun.enterprise.naming.impl.SerialContext。查找（SerialContext.java:505）... 52 更多

底线：JMS（我认为）找不到`statusPush`主题。

更新：在 web.xml 中启用了 JMS，更改为

```
<context-param>
    <param-name>org.richfaces.push.jms.enable</param-name>
    <param-value>true</param-value>
</context-param> 
```

现在堆栈跟踪是：

> 警告：StandardWrapperValve [AutoRegisteredPushServlet]：PWC1406：Servlet AutoRegisteredPushServlet 的 Servlet.service() 在 org.atmosphere.handler.ReflectorServletProcessor.onRequest(ReflectorServletProcessor.java:171) 处抛出异常 java.lang.RuntimeException: java.lang.NullPointerException。 org.atmosphere.cpr.AsynchronousProcessor.suspended(AsynchronousProcessor.java:166) at org.atmosphere.container.GrizzlyCometSupport.service(GrizzlyCometSupport.java:119) at org.atmosphere.cpr.AsynchronousProcessor.action(AsynchronousProcessor.java:248) .atmosphere.container.GlassFishWebSocketSupport.service(GlassFishWebSocketSupport.java:110) 在 org.atmosphere.cpr.AtmosphereFramework.doCometSupport(AtmosphereFramework.java:1257) 在 org.atmosphere.cpr.AtmosphereServlet.doPost(AtmosphereServlet.java:293) 在 org.atmosphere.cpr.AtmosphereServlet.doGet(AtmosphereServlet.java:279) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:668) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java :770) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) 在 org.apache.catalina.core 的 org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)。 StandardContextValve.invoke(StandardContextValve.java:175) at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) at org .apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161) 在 org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331) 在 org.apache。catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) 在 com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317) 在 com.sun.enterprise.v3.services。 impl.ContainerMapper.service(ContainerMapper.java:195) 在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860) 在 com.sun.grizzly.comet.CometEngine.executeServlet(CometEngine.java:459)在 com.sun.grizzly.comet.CometEngine.handle(CometEngine.java:316) 在 com.sun.grizzly.comet.CometAsyncFilter.doFilter(CometAsyncFilter.java:87) 在 com.sun.grizzly.arp.DefaultAsyncExecutor.invokeFilters (DefaultAsyncExecutor.java:171) 在 com.sun.grizzly.arp.DefaultAsyncExecutor.interrupt(DefaultAsyncExecutor.java:143) 在 com.sun.grizzly.arp.AsyncProcessorTask.doTask(AsyncProcessorTask.java:102) 在 com.sun.grizzly.http.TaskBase.run(TaskBase.java:193) 在 com.sun.grizzly.http.TaskBase.execute(TaskBase.java:175) 在 com.sun.grizzly.arp.DefaultAsyncHandler .handle(DefaultAsyncHandler.java:145) 在 com.sun.grizzly.arp.AsyncProtocolFilter.execute(AsyncProtocolFilter.java:210) 在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) 在 com.sun。 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 的 com.sun.grizzly.http.HttpProtocolChain.execute(DefaultProtocolChain.java:104) 的 grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) com .sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) 在 com.sun.grizzly。com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 上的 ContextTask.run(ContextTask.java:71) com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java: 513）在 java.lang.Thread.run(Thread.java:722) 引起：在 org.atmosphere.util.AtmosphereFilterChain 的 org.richfaces.webapp.PushHandlerFilter.doFilter(PushHandlerFilter.java:90) 的 java.lang.NullPointerException .doFilter(AtmosphereFilterChain.java:154) 在 org.atmosphere.util.AtmosphereFilterChain.invokeFilterChain(AtmosphereFilterChain.java:131) 在 org.atmosphere.handler.ReflectorServletProcessor$FilterChainServletWrapper.service(ReflectorServletProcessor.java:310) 在 org.atmosphere。 handler.ReflectorServletProcessor.onRequest(ReflectorServletProcessor.java:168) ... 40 更多71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) 在 java.lang.Thread 的 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) .run(Thread.java:722) 由 org.atmosphere.util.AtmosphereFilterChain.doFilter(AtmosphereFilterChain.java:154) 的 org.richfaces.webapp.PushHandlerFilter.doFilter(PushHandlerFilter.java:90) 引起的 java.lang.NullPointerException ) 在 org.atmosphere.util.AtmosphereFilterChain.invokeFilterChain(AtmosphereFilterChain.java:131) 在 org.atmosphere.handler.ReflectorServletProcessor$FilterChainServletWrapper.service(ReflectorServletProcessor.java:310) 在 org.atmosphere.handler.ReflectorServletProcessor.onRequest(ReflectorServletProcessor.爪哇：168）... 40更多71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) 在 java.lang.Thread 的 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) .run(Thread.java:722) 由 org.atmosphere.util.AtmosphereFilterChain.doFilter(AtmosphereFilterChain.java:154) 的 org.richfaces.webapp.PushHandlerFilter.doFilter(PushHandlerFilter.java:90) 引起的 java.lang.NullPointerException ) 在 org.atmosphere.util.AtmosphereFilterChain.invokeFilterChain(AtmosphereFilterChain.java:131) 在 org.atmosphere.handler.ReflectorServletProcessor$FilterChainServletWrapper.service(ReflectorServletProcessor.java:310) 在 org.atmosphere.handler.ReflectorServletProcessor.onRequest(ReflectorServletProcessor.爪哇：168）... 40更多doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 原因：java.lang .NullPointerException at org.richfaces.webapp.PushHandlerFilter.doFilter(PushHandlerFilter.java:90) at org.atmosphere.util.AtmosphereFilterChain.doFilter(AtmosphereFilterChain.java:154) at org.atmosphere.util.AtmosphereFilterChain.invokeFilterChain(AtmosphereFilterChain.java :131) 在 org.atmosphere.handler.ReflectorServletProcessor.onRequest(ReflectorServletProcessor.java:168) 的 org.atmosphere.handler.ReflectorServletProcessor$FilterChainServletWrapper.service(ReflectorServletProcessor.java:310) ... 还有 40 个doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 原因：java.lang .NullPointerException at org.richfaces.webapp.PushHandlerFilter.doFilter(PushHandlerFilter.java:90) at org.atmosphere.util.AtmosphereFilterChain.doFilter(AtmosphereFilterChain.java:154) at org.atmosphere.util.AtmosphereFilterChain.invokeFilterChain(AtmosphereFilterChain.java :131) 在 org.atmosphere.handler.ReflectorServletProcessor.onRequest(ReflectorServletProcessor.java:168) 的 org.atmosphere.handler.ReflectorServletProcessor$FilterChainServletWrapper.service(ReflectorServletProcessor.java:310) ... 还有 40 个513）在 java.lang.Thread.run(Thread.java:722) 引起：在 org.atmosphere.util.AtmosphereFilterChain 的 org.richfaces.webapp.PushHandlerFilter.doFilter(PushHandlerFilter.java:90) 的 java.lang.NullPointerException .doFilter(AtmosphereFilterChain.java:154) 在 org.atmosphere.util.AtmosphereFilterChain.invokeFilterChain(AtmosphereFilterChain.java:131) 在 org.atmosphere.handler.ReflectorServletProcessor$FilterChainServletWrapper.service(ReflectorServletProcessor.java:310) 在 org.atmosphere。 handler.ReflectorServletProcessor.onRequest(ReflectorServletProcessor.java:168) ... 40 更多513）在 java.lang.Thread.run(Thread.java:722) 引起：在 org.atmosphere.util.AtmosphereFilterChain 的 org.richfaces.webapp.PushHandlerFilter.doFilter(PushHandlerFilter.java:90) 的 java.lang.NullPointerException .doFilter(AtmosphereFilterChain.java:154) 在 org.atmosphere.util.AtmosphereFilterChain.invokeFilterChain(AtmosphereFilterChain.java:131) 在 org.atmosphere.handler.ReflectorServletProcessor$FilterChainServletWrapper.service(ReflectorServletProcessor.java:310) 在 org.atmosphere。 handler.ReflectorServletProcessor.onRequest(ReflectorServletProcessor.java:168) ... 40 更多doFilter(AtmosphereFilterChain.java:154) 在 org.atmosphere.util.AtmosphereFilterChain.invokeFilterChain(AtmosphereFilterChain.java:131) 在 org.atmosphere.handler.ReflectorServletProcessor$FilterChainServletWrapper.service(ReflectorServletProcessor.java:310) 在 org.atmosphere.handler .ReflectorServletProcessor.onRequest(ReflectorServletProcessor.java:168) ... 40 更多doFilter(AtmosphereFilterChain.java:154) 在 org.atmosphere.util.AtmosphereFilterChain.invokeFilterChain(AtmosphereFilterChain.java:131) 在 org.atmosphere.handler.ReflectorServletProcessor$FilterChainServletWrapper.service(ReflectorServletProcessor.java:310) 在 org.atmosphere.handler .ReflectorServletProcessor.onRequest(ReflectorServletProcessor.java:168) ... 40 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:09:44.383

您必须定期调用服务器并更新您的文本区域。这可以使用 a4j:poll 组件来实现，该组件会定期触发 ajax 请求并更新表单上的特定字段。一个例子可以在[这里](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=poll)找到。

# python - 需要帮助找到使用返回列表的方法，该列表仅在一段时间内出现一次，但仍保持顺序？

> ID：12879149
> 
> 赞同：2
> 
> 时间：2012-10-14T03:53:09.347
> 
> 标签：python, python-2.7

我使用了这个代码，但是这个代码只删除了列表中的重复项并返回没有重复项的列表，例如，如果我有 a = [1,1,2,3,3,4,6] 当我使用底部代码时给出输出这个 a = [1,2,3,4,6]。但我只想输出只出现一次的整数我想要这个 [2,4,6] 任何人都可以帮助pleaseee熬夜试图解决这个问题

```
def unique(a):
    order = set()
    order_add = order.add
    return [x for x in a if x not in order and not order_add(x)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:54:58.557

要在删除具有重复项的项目时保留顺序：

```
>>> from collections import Counter
>>> x = [1, 2, 3, 2, 1, 8]
>>> counts = Counter(x)
>>> [item for item in x if counts[item] == 1]
[3, 8] 
```

# excel - Excel 中的 Powershell 格式 - 当机器中有 2 个物理驱动器时无法正确对齐

> ID：12879150
> 
> 赞同：0
> 
> 时间：2012-10-14T03:53:19.790
> 
> 标签：excel, powershell

当一台计算机有多个硬盘驱动器时，就会出现问题。Excel 电子表格将无法正确对齐。当阵列中的下一台计算机填写电子表格时，它不会将其数据放在前一台计算机的 2 个驱动器下。如果所有机器都有一个驱动器，那就太好了。c 盘应该与其余数据对齐为了理解我的意思，我附上了我正在谈论的屏幕截图。查看驱动器信息。随着更多机器的添加，C 驱动器将继续变得更加不正常。问题的孩子是 $DiskItems = gwmi Win32_LogicalDisk -Comp $StrComputer | 其中 {$_.DriveType -eq 3 } 以及存在 2 个驱动器时 Excel 中的对齐方式。

```
# Functions Section
# ==============================================================================================
# Function Name 'WMI- Lookup' - Gathers info using WMI and places results in Excel Sheet
# ==============================================================================================
Function WMILookup {

    foreach ($StrComputer in $colComputers){

$GenItems1 = gwmi Win32_ComputerSystem -Comp $StrComputer 
$GenItems2 = gwmi Win32_OperatingSystem -Comp $StrComputer 
$SysItems1 = gwmi Win32_BIOS -Comp $StrComputer 
$SysItems2 = gwmi Win32_TimeZone -Comp $StrComputer 
$SysItems3 = gwmi Win32_WmiSetting -Comp $StrComputer 
$ProcItems1 = gwmi Win32_Processor -Comp $StrComputer 
$MemItems1 = gwmi Win32_PhysicalMemory -Comp $StrComputer 
$MemItems2 = gwmi Win32_PhysicalMemoryArray -Comp $StrComputer 
$DiskItems = gwmi Win32_LogicalDisk -Comp $StrComputer  | where {$_.DriveType -eq 3 }   
$Software = gwmi Win32_Product -Comp $StrComputer  | where { $_.Description -notlike 'Microsoft Office*' }
# $DiskPart = gwmi Win32_DiskPartition -ComputerName $StrComputer 
$NetItems = gwmi Win32_NetworkAdapterConfiguration -Comp $StrComputer  | where{$_.IPEnabled -eq "True" -and $_.DNSHostName -ne $NULL}

# Populate General Sheet(1) with information

foreach ($objItem in $GenItems1){

    $Sheet1.Cells.Item($intRow, 1) = $StrComputer

    $Sheet1.Cells.Item($intRow, 2) = $objItem.Manufacturer

    $Sheet1.Cells.Item($intRow, 3) = $objItem.Model

    $Sheet1.Cells.Item($intRow, 4) = $objItem.TotalPhysicalMemory / 1024 / 1024

    $Sheet1.Cells.Item($intRow, 5) = $objItem.UserName

        #$intRow = $intRow + 1

        }

foreach ($objItem in $GenItems2){

    $Sheet1.Cells.Item($intRow, 6) = $objItem.Caption

    $Sheet1.Cells.Item($intRow, 13) = $objItem.Codeset

    $Sheet1.Cells.Item($intRow, 14) = $objItem.CountryCode

    $Sheet1.Cells.Item($intRow, 15) = $objItem.Locale

        }

foreach ($objItem in $SysItems1){

    $Sheet1.Cells.Item($intRow, 7) = $objItem.SerialNumber

        }

foreach ($objItem in $SysItems2){          

    $Sheet1.Cells.Item($intRow, 8) = $objItem.Caption

        }

foreach ($objItem in $DiskItems) {

    $Sheet1.Cells.Item($intRowDisk, 9) = $objItem.DeviceID

    $Sheet1.Cells.Item($intRowDisk, 10) = $objItem.Size/1024/1024/1024

    $Sheet1.Cells.Item($intRowDisk, 11) = $objItem.FreeSpace/1024/1024/1024

    $Sheet1.Cells.Item($intRowDisk, 12) = $objItem.Size/1024/1024/1024 - $objItem.FreeSpace/1024/1024/1024  

        $intRowDisk = $intRowDisk + 1

            }

foreach ($objItem in $NetItems){

    $Sheet1.Cells.Item($intRowNet, 16) = $objItem.IPAddress

        $intRowNet = $intRowNet + 1

            }       

#Populate Software Sheet
    foreach ($objItem in $Software){

    $Sheet2.Cells.Item($intRowSoft, 1) = $StrComputer

    $Sheet2.Cells.Item($intRowSoft, 2) = $objItem.Name

    $Sheet2.Cells.Item($intRowSoft, 3) = $objItem.Vendor

    $Sheet2.Cells.Item($intRowSoft, 4) = $objItem.Version

        $intRowSoft = $intRowSoft + 1

            }

$intRow = $intRow + 1
$intRowDisk = $intRowDisk + 1
$intRowNet = $intRowNet + 1
$intRowSoft = $intRowSoft + 1

}

}

# ==============================================================================================

# Function Name 'WMILookupCred'-Uses Alternative Credential-Gathers info using WMI.

# ==============================================================================================

Function WMILookupCred {

foreach ($StrComputer in $colComputers){

                            $GenItems1 = gwmi Win32_ComputerSystem -Comp $StrComputer 

                            $GenItems2 = gwmi Win32_OperatingSystem -Comp $StrComputer 

                            $SysItems1 = gwmi Win32_BIOS -Comp $StrComputer 

                            $SysItems2 = gwmi Win32_TimeZone -Comp $StrComputer 

                            $SysItems3 = gwmi Win32_WmiSetting -Comp $StrComputer 

                            $ProcItems1 = gwmi Win32_Processor -Comp $StrComputer 

                            $MemItems1 = gwmi Win32_PhysicalMemory -Comp $StrComputer 

                            $MemItems2 = gwmi Win32_PhysicalMemoryArray -Comp $StrComputer 

                            $DiskItems = gwmi Win32_LogicalDisk -Comp $StrComputer  | where {$_.DriveType -eq 3 }

                            $Software = gwmi Win32_Product -Comp $StrComputer  | where { $_.Description -notlike 'Microsoft Office*' }

                            # $DiskPart = gwmi Win32_DiskPartition -ComputerName $StrComputer 

                            $NetItems = gwmi Win32_NetworkAdapterConfiguration -Comp $StrComputer | where{$_.IPEnabled -eq "True" -and $_.DNSHostName -ne $NULL}

# Populate General Sheet(1) with information

            foreach ($objItem in $GenItems1){

                            $Sheet1.Cells.Item($intRow, 1) = $StrComputer

                            $Sheet1.Cells.Item($intRow, 2) = $objItem.Manufacturer

                            $Sheet1.Cells.Item($intRow, 3) = $objItem.Model

                            $Sheet1.Cells.Item($intRow, 4) = $objItem.TotalPhysicalMemory / 1024 / 1024

                            $Sheet1.Cells.Item($intRow, 5) = $objItem.UserName

                            }

            foreach ($objItem in $GenItems2){

                            $Sheet1.Cells.Item($intRow, 6) = $objItem.Caption
                            $Sheet1.Cells.Item($intRow, 13) = $objItem.Codeset
                            $Sheet1.Cells.Item($intRow, 14) = $objItem.CountryCode
                            $Sheet1.Cells.Item($intRow, 15) = $objItem.Locale

                            }

    foreach ($objItem in $SysItems1){

                            $Sheet1.Cells.Item($intRow, 7) = $objItem.SerialNumber

                            }

            foreach ($objItem in $SysItems2){          

                            $Sheet1.Cells.Item($intRow, 8) = $objItem.Caption

                            }

           foreach ($objItem in $DiskItems) {

                            $Sheet1.Cells.Item($intRowDisk, 9) = $objItem.DeviceID

                            $Sheet1.Cells.Item($intRowDisk, 10) = $objItem.Size/1024/1024/1024

                            $Sheet1.Cells.Item($intRowDisk, 11) = $objItem.FreeSpace/1024/1024/1024

                            $Sheet1.Cells.Item($intRowDisk, 12) = $objItem.Size/1024/1024/1024 - $objItem.FreeSpace/1024/1024/1024  

                            $intRowDisk = $intRowDisk + 1

                            }
    foreach ($objItem in $NetItems){

    $Sheet1.Cells.Item($intRowNet, 16) = $objItem.IPAddress
            $intRowNet = $intRowNet + 1
    }

#Populate Software Sheet
foreach ($objItem in $Software){
    $Sheet2.Cells.Item($intRowSoft, 1) = $StrComputer
    $Sheet2.Cells.Item($intRowSoft, 2) = $objItem.Name
    $Sheet2.Cells.Item($intRowSoft, 3) = $objItem.Vendor
    $Sheet2.Cells.Item($intRowSoft, 4) = $objItem.Version
        $intRowSoft = $intRowSoft + 1
    }

$intRow = $intRow + 1
$intRowDisk = $intRowDisk + 1
$intRowNet = $intRowNet + 1
$intRowSoft = $intRowSoft + 1

}

}

# =============================================================================================

# Function Name 'ListComputers' - Enumerates ALL computer objects in AD

# ==============================================================================================

Function ListComputers {

$strCategory = "computer"

$objDomain = New-Object System.DirectoryServices.DirectoryEntry

$objSearcher = New-Object System.DirectoryServices.DirectorySearcher

$objSearcher.SearchRoot = $objDomain

$objSearcher.Filter = ("(objectCategory=$strCategory)")

$colProplist = "name"

foreach ($i in $colPropList){$objSearcher.PropertiesToLoad.Add($i)}

$colResults = $objSearcher.FindAll()

foreach ($objResult in $colResults)

{$objComputer = $objResult.Properties; $objComputer.name}

}

# ==============================================================================================

# Function Name 'ListServers' - Enumerates ALL Servers objects in AD

# ==============================================================================================

Function ListServers {

$strCategory = "computer"

$strOS = "Windows*Server*"

$objDomain = New-Object System.DirectoryServices.DirectoryEntry

$objSearcher = New-Object System.DirectoryServices.DirectorySearcher

$objSearcher.SearchRoot = $objDomain

$objSearcher.Filter = ("(&(objectCategory=$strCategory)(OperatingSystem=$strOS))")

$colProplist = "name"

foreach ($i in $colPropList){$objSearcher.PropertiesToLoad.Add($i)}

$colResults = $objSearcher.FindAll()

foreach ($objResult in $colResults)

{$objComputer = $objResult.Properties; $objComputer.name}

}

# ========================================================================

# Function Name 'ListTextFile' - Enumerates Computer Names in a text file

# Create a text file and enter the names of each computer. One computer

# name per line. Supply the path to the text file when prompted.

# ========================================================================

Function ListTextFile {
$strText = Read-Host "Enter the path for the text file"
$colComputers = Get-Content $strText
}

# ========================================================================

# Function Name 'SingleEntry' - Enumerates Computer from user input

# ========================================================================

Function ManualEntry {

            $colComputers = Read-Host "Enter Computer Name or IP"

}

# ==============================================================================================

# Script Body

# ==============================================================================================

# $erroractionpreference = "SilentlyContinue"

#Gather info from user.

Write-Host "********************************"               -ForegroundColor Green

Write-Host "Computer Inventory Script"                                               -ForegroundColor Green

Write-Host "by: "                                                                             -ForegroundColor Green

Write-Host "Workplace"                                                         -ForegroundColor Green

Write-Host "PowerShell V3"                 -ForegroundColor Green

Write-Host "********************************"               -ForegroundColor Green

Write-Host " "

Write-Host "Admin rights are required to enumerate information."         -ForegroundColor Green

Write-Host "You need to use your TEN\-A.first.last account"                    -ForegroundColor Green

Write-Host "Would you like to use an alternative credential?"                    -ForegroundColor Green

$credResponse = Read-Host "[Y] Yes, [N] No"

                If($CredResponse -eq "y"){$cred = Get-Credential DOMAIN\USER}

Write-Host " "

Write-Host "Which computer resources would you like in the report?"   -ForegroundColor Green

$strResponse = Read-Host "[1] All Domain Computers, [2] All Domain Servers, [3] Computer names from a File, [4] Choose a Computer manually"

If($strResponse -eq "1"){$colComputers = ListComputers | Sort-Object}

                elseif($strResponse -eq "2"){$colComputers = ListServers | Sort-Object}

                elseif($strResponse -eq "3"){. ListTextFile}

                elseif($strResponse -eq "4"){. ManualEntry}

                else{Write-Host "You did not supply a correct response, `

                Please run script again." -foregroundColor Red}                                                                

Write-Progress -Activity "Getting Inventory" -status "Running..." -id 1

#New Excel Application

$Excel = New-Object -Com Excel.Application

$Excel.visible = $True

# Create 2 worksheets

$Excel = $Excel.Workbooks.Add()

# Assign each worksheet to a variable and

# name the worksheet.

$Sheet1 = $Excel.Worksheets.Item(1)

$Sheet2 = $Excel.WorkSheets.Item(2)

$Sheet1.Name = "General"

$Sheet2.Name = "Software"

#Create Heading for General Sheet

$Sheet1.Cells.Item(1,1) = "Device_Name"

$Sheet1.Cells.Item(1,2) = "HW_Make"

$Sheet1.Cells.Item(1,3) = "HW_Model"

$Sheet1.Cells.Item(1,4) = "Memory_MB"

$Sheet1.Cells.Item(1,5) = "Login_Name"

$Sheet1.Cells.Item(1,6) = "Operating_System"

$Sheet1.Cells.Item(1,7) = "Serial_Number"

$Sheet1.Cells.Item(1,8) = "Time_Zone"

$Sheet1.Cells.Item(1,9) = "Drive_Letter"

$Sheet1.Cells.Item(1,10) = "Capacity_GB"

$Sheet1.Cells.Item(1,11) = "Free_Space_GB"

$Sheet1.Cells.Item(1,12) = "Used_Space_GB"

$Sheet1.Cells.Item(1,13) = "CodeSet"

$Sheet1.Cells.Item(1,14) = "Country_Code"

$Sheet1.Cells.Item(1,15) = "Locale"

$Sheet1.Cells.Item(1,16) = "IP Address" 

#Create Heading for Software Sheet

$Sheet2.Cells.Item(1,1) = "Machine Name"

$Sheet2.Cells.Item(1,2) = "Software"

$Sheet2.Cells.Item(1,3) = "Vendor"

$Sheet2.Cells.Item(1,4) = "Version"

$colSheets = ($Sheet1, $Sheet2)

foreach ($colorItem in $colSheets){

$intRow = 2

$intRowDisk = 2

$intRowSoft = 2

$intRowNet = 2

$WorkBook = $colorItem.UsedRange

$WorkBook.Interior.ColorIndex = 20

$WorkBook.Font.ColorIndex = 11

$WorkBook.Font.Bold = $True

}

If($credResponse -eq "y"){WMILookupCred}

Else{WMILookup}

#Auto Fit all sheets in the Workbook

foreach ($colorItem in $colSheets){

$WorkBook = $colorItem.UsedRange                                                                                                                                                                                                                                    

$WorkBook.EntireColumn.AutoFit()

clear

}

Write-Host "*******************************" -ForegroundColor Green

Write-Host "The Report has been completed."  -ForeGroundColor Green

Write-Host "*******************************" -ForegroundColor Green

# ========================================================================

# END of Script

# ================== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:24:19.270

您正在尝试使用可变数量的源数据点创建一个固定宽度的表格。它实际上并不是关于“对齐”，而是试图使您的列与每一行中的相同数据保持一致。从视觉上看，可能是对齐的，但是从数据的角度来看，因为 Excel 不是“可视化布局”工具。

如果您的计算机将具有可变数量的某些设备（网络接口、硬盘驱动器等），您最好将这些设备放入自己的工作表中，每台计算机上的每个驱动器对应一行。

本质上，您正在创建一个数据库并且需要[规范化数据](http://en.wikipedia.org/wiki/Database_normalization)- 您现在尝试的是一个[非规范化结构](http://en.wikipedia.org/wiki/Denormalization)，它不会满足您的“对齐”要求。

# php - 使用带变量的 PHP 函数

> ID：12879157
> 
> 赞同：1
> 
> 时间：2012-10-14T03:54:15.923
> 
> 标签：php, arrays, function

我正在关注 2007 年编写的教程，他们让我用这段代码创建这个函数。如果我不创建该功能，而只是在网页中对其进行硬编码，则它可以工作。这是代码：

```
function getAllSubjects(){
$query = "SELECT * 
        FROM subjects 
        ORDER BY position ASC";
$subjectSet = mysql_query( $query, $connection);
confirmQuery($subjectSet);
return $subjectSet;
} 
```

这就是我在网页中实现它的方式：

```
$querryArray = getAllSubjects(); 
```

当我运行代码时，我收到一条错误消息：

```
" Notice: Undefined variable: connection in " 
```

从 getAllSubjects() 函数中抱怨它。我在`$connection`调用此代码之前在我调用的文件中创建变量，这不是很好吗？我按以下顺序调用它们：

```
require_once("includes/connection.php") 
require_once("includes/functions.php") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:56:36.953

变量的范围是定义它的上下文。大多数情况下，所有 PHP 变量都只有一个作用域。这个单一范围也涵盖了包含和必需的文件。

您的变量 $connection 在全局范围内。要访问它，请将其包含在您的函数中：

```
function getAllSubjects(){
global $connection;
$query = "SELECT * 
        FROM subjects 
        ORDER BY position ASC";
$subjectSet = mysql_query( $query, $connection);
confirmQuery($subjectSet);
return $subjectSet;
} 
```

注意：查看此链接以获得更详细的说明[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T03:56:13.433

```
function getAllSubjects(){
    global $connection;
    $query = "SELECT * 
            FROM subjects 
            ORDER BY position ASC";
    $subjectSet = mysql_query( $query, $connection);
    confirmQuery($subjectSet);
    return $subjectSet;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T03:57:50.980

问题是`$connection`超出范围`getAllSubjects()`

尝试使用`global`关键字将其包含在函数的范围内。

```
function getAllSubjects() {
    global $connection;
    //... 
```

# c++ - 如何使用 C/C++ 打开和加载 oracle fmb 文件？

> ID：12879161
> 
> 赞同：0
> 
> 时间：2012-10-14T03:55:01.533
> 
> 标签：c++, c, oracle, analyzer

我需要知道是否有任何方法可以在 C/C++ 中打开和分析 oracle 表单模块（fmb 文件格式）并获取该模块文件中所有使用的表、视图、块等的列表。

请给我一个样品，提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:33:04.683

我认为您在谈论的是 Forms C/C++ API。这是一个“高级用户”工具，用于在 IDE 之外以批处理模式处理表单。Oracle 已弃用它，转而使用更易于使用的 Java 工具 JDAPI。事实上，Oracle 似乎已经完全从 OTN 站点上删除了 C API 的文档。

幸运的是，我们还有 Wayback Machine。因此，这里是[C/C++ API 的 Developer 2000 文档（警告：PDF）](http://web.archive.org/web/20090306143951/http://oracle.com/technology/products/forms/pdf/274326.pdf "回程机 2009")。

# c# - 编码时在 Intellisense 中未检测到 C# 中的表单/类

> ID：12879170
> 
> 赞同：2
> 
> 时间：2012-10-14T03:56:16.957
> 
> 标签：c#, .net, visual-studio-2010, visual-studio-2008

我使用的是 Visual Studio 2010。但在 Visual Studio 2008 中转移了整个项目（通过添加现有项目技术）。

整个项目运行良好。但我的问题是，当我向项目添加新表单（添加新的 windowsform）时，它会被添加到解决方案中。但是在调用它时......它没有被检测到。例如。当我尝试从其他形式的按钮单击中调用它时

```
rptAllEnquiries obj =new rptAllEnquiries();
obj.show(); 
```

此 rptAllEnquiries 不在列表中，这是我新添加到项目中的表单。

可能是什么问题？我错过了任何项目或表单属性吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T04:01:39.563

一个常见的原因可能是旧文件和新的 Windows 窗体文件可能具有不同的命名空间。检查`*.cs`文件的第一行并确保两者具有相同的自定义`namespace`.

# php - 控制器上的 Codeigniter 未定义属性

> ID：12879173
> 
> 赞同：-2
> 
> 时间：2012-10-14T03:56:48.490
> 
> 标签：php, codeigniter, variables, controller

我有控制器在表上显示数据库记录

```
function gkategorimaterial()
{
    $this->load->model('m_kategorimaterial');
    $data['kirim'] = $this->m_kategorimaterial->read(); //error pointing on this line
    $data['title'] = 'QB Ambil Kategori Material / Jasa';

    $this->load->view('head',$data);
    $this->load->view('g/gkategorimaterial',$data);
} 
```

改编`gkategorimaterial()`自

```
function vkategorimaterial()
{
    $this->load->model('m_kategorimaterial');

    $data['kirim'] = $this->m_kategorimaterial->read();
    $data['title'] = 'QB Kategori Material';

    $this->load->view('head',$data);
    $this->load->view('v/vkategorimaterial',$data);
} 
```

其中有一些功能，显示表格，`vkategorimaterial()`成功检索记录。

这是`m_kategorimaterial的模型

```
function read()
{
    $query = $this->db->order_by('Kode_Kategori_Material_Jasa','DESC');
    $query = $this->db->get('ms_kategori_material');

    if($query->num_rows()>0)
    {     
        return $query->result();
    }
    else
    {
        return null;
    }
} 
```

遇到 PHP 错误

严重性：通知

消息：未定义的属性：C_materialjasa::$m_kategorimaterial

文件名：控制器/c_materialjasa.php

行号：140

我相信它与模型无关，但我不知道错误是什么，因为我只是复制粘贴第一个控制器，即`vkategorimaterial()`控制器，然后重命名变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:09:00.707

数据库是否加载在 m_kategorimaterial 上？

```
$this->load->database(); 
```

或在 ./application/config/autoload.php 中设置

```
$autoload['libraries'] = array('database'); 
```

或者尝试在控制器中添加父级：

```
function __construct()
{
    parent::__construct();
} 
```

加载模型：

控制器：

```
$this->load->model('Model_name'); 
```

模型（'models/Model_name.php'）

```
class Model_name extends CI_Model {

    function __construct()
    {
    parent::__construct();
    }

        function read() { return; }
} 
```

确保这是模型文件 CHMOD-ed 到 0755！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:35:05.833

我的错 ！我在模型文件上写了类`classname`扩展 CI_Controller

# c# - ServerCertificateValidationCallback 被忽略

> ID：12879175
> 
> 赞同：6
> 
> 时间：2012-10-14T03:57:20.487
> 
> 标签：c#, .net, ssl

我有以下代码，这会导致 WebException 并且我无法弄清楚为什么我的生活。Windows 8 RTM 上的 VS2012 / .Net 4.5 RTM。

```
 ServicePointManager.CertificatePolicy = null;
    ServicePointManager.CheckCertificateRevocationList = false;
    ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };

    var request = WebRequest.Create(url) as HttpWebRequest;
    request.ServerCertificateValidationCallback = delegate { return true; };

    var response = request.GetResponse();

    WebException was unhandled
    The request was aborted: Could not create SSL/TLS secure channel. 
```

我最初将回调作为自己的方法，从未调用过。有什么想法为什么我无法忽略 SSL 验证错误并将所有敏感数据发送到未知的 Web 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T08:08:07.250

微软不允许。它损害了平台，因为这就是我们不为其开发应用程序的原因。（我们有数百万满意的客户）

[http://social.msdn.microsoft.com/Forums/windowsapps/en-US/f5821194-4c40-48e7-976c-3dec8864ac59/servicepointmanagerservercertificatevalidationcallback?forum=winappswithcsharp](http://social.msdn.microsoft.com/Forums/windowsapps/en-US/f5821194-4c40-48e7-976c-3dec8864ac59/servicepointmanagerservercertificatevalidationcallback?forum=winappswithcsharp)

您需要有效的证书或真正的解决方法。出于安全原因，这是一个很大的缺点。

# java - 对象序列化期间的 Java 堆溢出

> ID：12879180
> 
> 赞同：0
> 
> 时间：2012-10-14T03:58:29.000
> 
> 标签：java, arraylist

我有一个浮点数组列表的数组列表，其中包含一些值和另外 3 个整数数组列表

对于浮点数的arraylist的arraylist，行数为47，列数为44300。所以当我尝试将包含所有这些arraylists的对象序列化到对象中时，出现堆溢出错误。

我使用arraylist 的arraylist 是因为在函数调用之前没有预先确定列数，因此必须是动态的。我相信这个arraylist 的arraylist 导致了这个问题。

有什么方法可以更好地实现动态二维数组并且内存更少？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T04:10:25.523

```
8(float size) * 47* 44300 = 16656800 bytes-->16 MB 
```

现在，如果您再考虑 3 个整数 ArrayList

```
4(int size) * 47* 44300 = 8328400 bytes-->8 MB * 3-->24 MB 
```

我的意见是检查堆空间有多少并增加它。将集合更改为数组将是真正的微型基准测试。

```
-Xms<size>        set initial Java heap size
-Xmx<size>        set maximum Java heap size

java -Xms256m -Xmx512m 
```

# c# - 无法从其他类更改表单中的 textBox.text - C# - VS 2010

> ID：12879181
> 
> 赞同：2
> 
> 时间：2012-10-14T03:58:46.593
> 
> 标签：c#, visual-studio-2010

我有一个名为 Form1 的表单。在其中，我有一个名为 Encrypt 的按钮。当我点击那个按钮时，我调用了另一个类中的方法。我希望该方法更改 textBox1.text 的值，但是当我使用此代码时没有任何反应

# 在 Form1 类中

```
public string txtbox1
    {
        get
        {
            return textBox1.Text;
        }

        set
        {
            textBox1.Text = value;
        }
    } 
```

# 在另一个类的方法中

```
Form1 textboxes = new Form1();//creating object of the Form1 class
        textboxes.txtbox1= "whatever"; 
```

第一个文本框中没有任何变化。就好像我什么都没按一样！！！

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T04:03:26.867

在您的其他课程中，您需要引用单击按钮的表单（并且具有您现有的文本框），而不是*新*表单。

您正在实例化的这个新表单不是您在单击按钮的屏幕上看到的那个。

（我假设您的事件处理程序存在于 Form1 类中，然后它会根据需要将信息“转发”到其他类的方法？如果不是......它应该！）

按钮引用将通过`sender`对象获得并`event args`传递给您的事件处理程序。您可以通过将关键字传递给其他类的方法来传递对当前`Form1`实例的引用。`this`或者您可以传递`sender`if 这对您有用，或者只是将对特定文本框的显式引用传递给您的其他方法。

例如，将对表单的引用传递给您的其他方法：

```
// Event handler on your form
private void button1_Click(object sender, EventArgs e)
{
    ButtonWasPressedOnForm(this);   
}

// Other method in your other class
public void ButtonWasPressedOnForm(Form formWhereButtonPressed)
{
    // To act on the text box directly:
    TextBox textBoxToUpdate = (TextBox)formWhereButtonPressed.Controls.Find("textBox1");
    textBoxToUpdate.Text = "whatever";

    // Or, using the Form1.txtBox1 property.
    formWhereButtonPressed.txtBox1 = "whatever";  
} 
```

例如，将对显式文本框的引用传递给您的其他方法：

```
// Event handler on your form
private void button1_Click(object sender, EventArgs e)
{
    ButtonWasPressedOnForm(textBox1);   
}

// Other method in your other class
public void ButtonWasPressedOnForm(TextBox textBoxToUpdate)
{
    textBoxToUpdate.Text = "whatever";
} 
```

例如，将事件对象传递给您的其他方法：

```
// Event handler on your form
private void button1_Click(object sender, EventArgs e)
{
    Button clickedButton = (Button)sender;
    ButtonWasPressedOnForm(clickedButton);  
}

// Other method in your other class
public void ButtonWasPressedOnForm(Button clickedButton)
{
    Form theParentForm = clickedButton.FindForm();

    // To act on the text box directly:
    TextBox textBoxToUpdate = (TextBox)theParentForm.Controls.Find("textBox1");
    textBoxToUpdate.Text = "whatever";

    // Or, To act on the text box, via the form's property:
    theParentForm.txtBox1 = "whatever";
} 
```

此外，在您的“其他方法”上设置一个断点，以确保甚至触发此代码。如果没有，请返回您的事件处理程序，确保它被触发。如果没有，请检查您的事件接线。

* * *

尽管在所有情况下，您都需要注意要更新的控件的保护级别......您需要根据表单和其他类之间的关系将其设为公开、内部或受保护，如果您想从你的`Form1`课外更新它。

更好的 OO 方法是有一个方法`Form1`，允许其他类告诉`Form1`更新它们的控件（例如`updateTextBox(string newText)`）。因为这不是面向对象的最佳实践，所以允许外部对象直接作用于类的成员（因为这需要了解类的内部结构......应该封装，以便您的实现可以在不破坏现有接口的情况下进行更改在你的班级和外界之间）。

**编辑：** 实际上，在重新阅读您的问题时，您确实已经使用 get/set 属性封装了您的文本框。好的。因此，您应该将对您的表单的引用传递给您的其他方法，然后通过属性更新表单的文本。已将此方法添加到上面的示例中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T15:04:38.977

我找到了一个简单的方法来做到这一点。首先在你的类中创建一个文本框

```
class class1
   {
   public static TextBox txt1=new TextBox();
   public static void Hello()
     {
      txt1.Text="Hello";
     }
   } 
```

form1 上有一个按钮（button1）和一个 TextBox（textBox1）。好的，现在复制您想要的文本框的地址必须更改我测试它，它可以正常工作

```
public partial class Form1 : Form
{
 public Form1()
    {
     InitializeComponent();  
    }
 private void button1_Click(object sender, EventArgs e)
     {
      class1.txt1=textBox1;
      class1.Hello();
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T04:05:08.357

另外，Form1 类的保护级别是多少？这就是我经常遇到问题的地方......我忘记了如果该类不是公开的，那么它之外的类就不能访问它。“受保护”也可以使用，但这取决于两个类之间的关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T04:07:23.530

我发现在这种情况下，将信息从一种形式传递到另一种形式是将信息保存在类文件中，而不是其自身的形式

示例表格 1：

```
public partial class customerHistory : Form
{
    private string passtexboxvaluetoclass = "";   

    // load class dependant.cs
    dependents cls_dependents = new dependents();

    public customerHistory()
    {
        InitializeComponent();
    }

private void button1_Click(object sender, EventArgs e)
    {
        dependents.passtexboxvaluetoclass = textbox1.text;
        // load next form
    } 
```

那么我要做的就是在第二个表单上调用 form_load

```
label1.text = dependents.passtexboxvaluetoclass; 
```

通过这种方式，您可以调用大量信息，因为它们都将存储在类中，而不是物理形式本身

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T06:05:02.073

您还可以通过在您的类中创建事件并且您的表单订阅该事件并将要更新的数据传递给 UI 来做到这一点`EventArgs`...

# ruby-on-rails - 从现有表生成 activerecord 模式

> ID：12879184
> 
> 赞同：6
> 
> 时间：2012-10-14T04:00:06.440
> 
> 标签：ruby-on-rails, ruby, activerecord, schema

有谁知道这样做的方法？

我有一个用 sql 创建的现有表，我想从中创建一个模式来重现该表（减去数据）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T04:21:07.800

1.  编辑 config/database.rb 以指向要复制的数据库。
2.  `rake db:schema:dump`
3.  创建空白迁移
4.  从模式转储中复制相关`create_table`行并将其粘贴到迁移文件中
5.  手动将迁移时间戳插入 schema_migrations 表（这仅适用于现有设置，因为它已经具有相关表）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-14T04:13:53.487

架构写在 [your app]/db/schema.rb 中。希望这有帮助！

# jquery - synthax highlighter - 在 textarea 元素中编辑突出显示的文本

> ID：12879185
> 
> 赞同：0
> 
> 时间：2012-10-14T04:00:50.683
> 
> 标签：jquery, textarea, syntaxhighlighter

我已经实现了 Alex Gorbatchev 的 Synthax 荧光笔，它工作得很好，但是当用户双击突出显示的文本（那时它变成了 textarea 的 div）时，它进入了编辑模式（使用突出显示的文本数据动态生成无名 textarea在里面）。我创建了一个按钮，并执行单击事件，试图从中获取新输入/编辑的文本以通过 ajax 重新发布，但我不断收到 textarea 中的旧文本（变成高亮的 div）或“未定义” . 我正在使用 jQuery 来获取新输入的文本，但没有运气。任何帮助是极大的赞赏！

```
extends layout
block content
  h2=d.title
    a(class='button', href='/documents/' + d._id + '/edit') Edit
  p
    a(href='/documents', class='button')
      &larr; All Documents
  script(type="text/javascript")
    SyntaxHighlighter.all();
    SyntaxHighlighter.config.tagName = "textarea";

  form(name="form1") 
    div(style="width:800px; margin:0 auto; border: 2px grey solid;")  
      textarea(class="brush: js;", style="width:800px;", readonly="true", id = "srcText", disabled)
        =d.data || ''

  button(id="submit", class='button')

  script
    $("#submit").click(function (e) {
      console.log("boom");
      var dId = '#{d._id}';
      var dData = $("textarea").val(); // << -- problem here cant obtain the value
      console.log("DATA  is: ", dData);
      var updateDocumentIdPath = "/documents/" + dId + "/update";
      $.ajax({
        url: updateDocumentIdPath, 
        type: "POST",  
        data: {"data": dData},
        success: function (data) {
          console.log("success");
          console.log(data);
        },
        error: function () {
          console.log("error");
        },
        complete: function () {
        }
      }); // END ajax
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:04:28.683

为了获取数据，您使用`$("textarea").val();`which*返回* `textarea`. `document`文档：[http ://api.jquery.com/val/](http://api.jquery.com/val/)

你需要的是这样的：`$("textarea:last").val();`. 这将返回最后一个的`textarea`值`document`。假设它将是最后一个`textarea`，`document`因为您提到它在切换到编辑模式之前被动态插入。

# ruby - ` (a ||= []) << 1 ` 与 ` (i ||= 0) += 1 `

> ID：12879189
> 
> 赞同：4
> 
> 时间：2012-10-14T04:02:39.020
> 
> 标签：ruby, syntax

虽然我已经编写 Ruby 有一段时间了，但我一直在寻找改进我的风格的方法。

我已经习惯了一种特别简短、简洁的实例化 + 附加到数组的方法：

```
ruby-1.9.3-p194 :001 > (a ||= []) << 1
 => [1] 
```

这种特殊的语法似乎只在与数组一起使用时才有效，因为我尝试对其他类型执行此操作会返回语法错误。

```
ruby-1.9.3-p194 :002 > (i ||= 0) += 1
SyntaxError: (irb):2: syntax error, unexpected tOP_ASGN, expecting $end

(i ||= 0) += 1
            ^
from /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

而且，还有字符串，虽然我非常希望这在之前的实验中不起作用。

```
ruby-1.9.3-p194 :003 > (s ||= '') += 'TEST'
SyntaxError: (irb):3: syntax error, unexpected tOP_ASGN, expecting $end

(s ||= '') += 'TEST'
             ^
from /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

**使用这种语法形式时，Array 与其他类型的区别是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T04:11:13.573

在 Ruby 中，就像在大多数其他语言中一样，缩写赋值只是扩展形式的语法糖，即

```
a += b 
```

是语法糖

```
a = a + b 
```

所以，

```
(i ||= 0) += 1 
```

是语法糖

```
(i ||= 0) = (i ||= 0) + 1 
```

这简直是​​非法的。

这与数组完全无关，您可以在此处看到：

```
(s ||= '') << 'TEST' # works

(a ||= []) += [1]    # doesn't work 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T05:15:08.523

左边必须是一个变量。怎么样：

```
i = (i || 0) + 1 
```

或者

```
i = i ? i + 1 : 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:45:51.277

您可以将这些受保护的语句用于提供将更改变量状态的操作的任何内容，例如用于字符串的 concat、用于数组的 << 等。

```
1.9.2p290 :111 > s = nil
 => nil 
1.9.2p290 :112 > (s ||= '').concat 'test'
 => "test" 
1.9.2p290 :113 > (s ||= '').concat 'test'
 => "testtest" 
```

对于某些类型，例如 FixNum，您实际上没有选项，因为您无法在没有分配的情况下更改状态，因此我们可以拥有的最接近的东西是 succ，但正如您所看到的，它不会更新存储的值

```
1.9.2p290 :130 > i = nil
 => nil 
1.9.2p290 :131 > (i || 0).succ
 => 1 
1.9.2p290 :132 > (i || 0).succ
 => 1 
```

对于此类类型，我推荐 Jörg W Mittag 的建议，`i = (i || 0) + 1`因为它非常干净并且很好地描绘了它的目的

```
1.9.2p290 :134 > i = nil
 => nil 
1.9.2p290 :135 > i = (i || 0) + 1
 => 1 
1.9.2p290 :136 > i = (i || 0) + 1
 => 2 
```

# python - python 对象的属性在 help() 函数之前和之后的行为不同

> ID：12879196
> 
> 赞同：1
> 
> 时间：2012-10-14T04:03:55.187
> 
> 标签：python, python-imaging-library

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import Image
>>> im = Image.open("test.jpeg")
>>> data = im.load()
>>> data.__setitem__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'PixelAccess' object has no attribute '__setitem__'
>>> help(data)

>>> data.__setitem__
<method-wrapper '__setitem__' of PixelAccess object at 0x7f4d9ae4b170> 
```

这是我见过的最奇怪的事情。

我正在用图书馆 PIL 做一个项目。' `data`' 是 的对象`PixelAccess`。它具有`__setitem__`in的属性`help(data)`。

你可以做' `data[x,y] = value`'来分配坐标中的像素值`(x,y)`

```
Help on PixelAccess object:

class PixelAccess(object)
 |  Methods defined here:
 |  
 |  __delitem__(...)
 |      x.__delitem__(y) <==> del x[y]
 |  
 |  __getitem__(...)
 |      x.__getitem__(y) <==> x[y]
 |  
 |  __setitem__(...)
 |      x.__setitem__(i, y) <==> x[i]=y 
```

为什么在函数之前不`__setitem__`存在而在`help()`函数之后出现？

即使在我执行快递' `data[x,y] = value`'之后也是一样的。它只在`help()`函数之后出现。

怎么解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:10:08.627

确实 - 这是一些奇怪的行为。但问题不是 `__getitem__`不存在 - 它存在，只是由于 PIL 代码中的一些问题而暂时隐藏 - 可能是由于允许延迟加载图像的机制导致的错误。

这不应该给您带来麻烦 - 您的情况下的“数据”是 PIL 的“PixelAccess”对象，它允许您使用元组作为索引来访问图像像素。在对其执行“dir”时，它确实显示“empty”，如果您尝试获取它的`__getitem__`方法，则会引发属性错误，确实：

```
>>> from PIL import Image
>>> img = Image.open("images/rock.png")
>>> d1 = img.load()
>>> dir (d1)
[]
>>> d1.__getitem__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'PixelAccess' object has no attribute '__getitem__'
>>> # However, this works:
... 
>>> d1[32,32]
(255, 255, 255, 255)
>>> d1.__getitem__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'PixelAccess' object has no attribute '__getitem__'
>>> 
```

正如我所说，这很可能是 PIL 用于创建 PixelAcces 对象的任何机制的副作用。如果你真的需要访问你的`PixelAccess.__getitem__`方法，获得它的方法是绕过 Python 中的大多数属性隐藏技巧：你确实使用`object`类`__getattribute__`方法来检索它。

（一旦以这种方式完成，令人惊讶的是，PixelAccess 对象在 dir 中不再显示为空）：

```
>>> dir(d1)
[]
>>> getattr(d1, "__getitem__")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'PixelAccess' object has no attribute '__getitem__'
>>> object.__getattribute__(d1, "__getitem__")
<method-wrapper '__getitem__' of PixelAccess object at 0x7f94e6f37170>
>>> # there is our man
... 
>>> getattr(d1, "__getitem__")
<method-wrapper '__getitem__' of PixelAccess object at 0x7f94e6f37170>
>>> # and this works now
... 
>>> dir(d1)
['__class__', '__delattr__', '__delitem__', '__doc__', '__format__', '__getattribute__', '__getitem__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__setitem__', '__sizeof__', '__str__', '__subclasshook__']
>>> 
```

总而言之，`object.__getattribute__`如上所示的调用应该是“确定性的”，以便您获取方法。

至于在此之前它隐藏了哪些机制，以及是什么导致它以及对象的所有其他成员在以这种形式自省后出现，唯一知道的方法是深入研究 PIL 的代码。

# asp.net - WCF 服务返回测试屏幕，好像我浏览到服务地址

> ID：12879197
> 
> 赞同：0
> 
> 时间：2012-10-14T04:04:01.170
> 
> 标签：asp.net, wcf, web-services

我正在调用一个服务，该服务现在托管在一个工作的 ASP.NET 站点中的 IIS 中。我的测试应用程序允许我创建服务引用并让我智能感知输入所有参数。调用该服务时，我收到以下错误：

内容类型 text/html；响应消息的 charset=UTF-8 与绑定的内容类型不匹配 (text/xml; charset=utf-8)。

我使用 fiddler（基于本网站上其他问题的信息）来查看返回的 html，并且我看到正在返回标准服务 Web 屏幕。以下是其中的一些文字：

要测试此服务，您需要创建一个客户端并使用它来调用该服务。您可以使用命令行中的 svcutil.exe 工具执行此操作，语法如下...

为什么我没有得到真正的服务响应？

这是 web.config 的那一部分：顺便说一句，我的网站是 https。

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://www.ed.net/Service.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService"
        contract="EdQuotingService.IService" name="BasicHttpBinding_IService" />
    </client>
  </system.serviceModel> 
```

编辑：我们最终支付了微软支持请求来解决这个问题。他们是这样做的：我们请求 Global.asax 文件，我们发现其中有一个重定向代码，如下所示：

```
Protected Sub Application_BeginRequest(sender As Object, e As System.EventArgs)
    If HttpContext.Current.Request.IsSecureConnection.Equals(False) And mid(Request.ServerVariables("HTTP_HOST"), 1, 9) <> "localhost" Then
        Response.Redirect("https://" & Request.ServerVariables("HTTP_HOST") & HttpContext.Current.Request.RawUrl)
    End If 
```

我们再次分析了我们拥有的所有数据，我们发现当我们尝试读取服务配置时，它无法读取配置文件，因此它使用了所有默认配置。这在跟踪中可以清楚地看到。这是因为它无法找到服务标签，因此它使用所有默认设置。我们还发现您的服务侦听 2 个端点——http 和 https。所以当我们浏览wsdl文件时我们发现你的服务基本上被配置为监听http而不是https。因此，我们发现您的方法 StartQuote 配置为侦听 http。因此，客户端为此接口调用 http 并且您的 global.asax 文件捕获了这个并重定向到 https。

从我们收集的 WCF 跟踪中，我们发现我们收到了未找到配置评估上下文的错误，然后是未找到匹配标记，如下所示：

未找到错误配置评估上下文意味着我们无法从配置文件中读取正确的配置。此外，由于 System.ServiceModel 标记下没有定义服务标记，因此它采用了默认配置，即没有 SSL 的 basichttpbinding。因此，当客户端尝试进行方法调用时，它将在 http 而不是 https 上进行调用，这会被您的 global.asax 文件拾取并将其重定向到 https。

我们继续在 System.ServiceModel 标签下添加了 Service 标签，如下所示：

```
<services>
  <service name="EdisonQuotingService">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="(binding name specified by you)_Transport"
      contract="IService" />
  </service>
</services>

<basicHttpBinding>
    <binding name="(binding name specified by you)">
      <security mode="Transport" />
    </binding>
  </basicHttpBinding> 
```

我们进行了上述更改，之后当我们尝试从 WCF 服务调用 StartQuote 方法时，它运行良好，没有任何问题，并且您能够获得必要的数据。

# entity-framework - 如何更新 EF CF 多层应用程序中的分离实体？

> ID：12879198
> 
> 赞同：1
> 
> 时间：2012-10-14T04:04:01.620
> 
> 标签：entity-framework, ef-code-first, updating

我正在使用 EF CF 开发一个多层应用程序。我设法以这种方式删除了一个分离的实体：

```
 public void Delete(DbSet MySet, object Obj)
        {
            MySet.Attach(Obj);
            var Entry = this.Entry(Obj);
            Entry.State = EntityState.Deleted;
            this.SaveChanges();
        } 
```

这个方法定义在一个名为 Adapter:DbContext 的类中。问题是，更新时，类似的代码不起作用：

```
 public void Update(DbSet MySet, object Obj)             
    {
        MySet.Attach(Obj);
        var Entry = this.Entry(Obj);
        Entry.State = EntityState.Modified;
        this.SaveChanges();
    } 
```

这不会更新数据库，也不会引发任何异常我应该如何更新分离的实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:23:23.947

不要附加对象，而是尝试检索对象并更新它 - 注意：我假设您的 Id 是 Obj.Id

```
public void Update(DbSet MySet, object Obj)             
    {
        var objToUpdate = MySet.Find(Obj.Id);
        if (objToUpdate != null)
        {
        var Entry = this.Entry(objToUpdate );
        Entry.CurrentValues.SetValues(Obj)
        Entry.State = EntityState.Modified;
        this.SaveChanges();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:35:24.980

这段代码工作得很好，错误在其他地方。对不起，过早的问题！我无论如何都不会删除，因为它很有用

# asp.net - 如何遍历自定义配置部分条目？

> ID：12879199
> 
> 赞同：1
> 
> 时间：2012-10-14T04:04:05.423
> 
> 标签：asp.net, .net

我的自定义配置部分如下所示：

```
 <MySection>
    <add name="a" value="111"/>
    <add name="b" value="222"/>
    <add name="c" value="333"/>
    ...
  </MySection> 
```

我知道[如何编写自定义配置部分](http://msdn.microsoft.com/en-us/library/2tw134k3%28v=vs.100%29.aspx)，但如何遍历其所有条目？

问题解决： http: [//msdn.microsoft.com/en-us/library/system.configuration.configurationelement (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelement(v=vs.100).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:14:49.453

使用“GetSection”（下面的链接）。

```
// Get the AppSettings section.
var sect = (MySection)ConfigurationManager.GetSection("mysection"); 
```

[http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.getsection.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.getsection.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:16:58.983

如果您想解析您的部分，请使用：

```
var config = (SampleConfigurationSection)ConfigurationManager.GetSection("sampleConfiguration");

config.YourCustomProperty = "Hello World"; 
```

如果您想手动遍历 XML 元素（这将是一个非常奇怪的要求），您可以使用 LINQ to XML

```
using System.Xml.Linq;

....

var xml = XDocument.Load("path to your config file");

var section = from e in xml.Root.Elements("your section name").Elements()
              select e; 
```

如果您需要动态项目，那么也许您可以使用**[ConfigurationElementCollection](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelementcollection.aspx)**然后解析您的部分并使用您的集合对象而不是直接使用 XML

# php - 改进通过 curl 执行的脚本

> ID：12879204
> 
> 赞同：0
> 
> 时间：2012-10-14T04:04:57.747
> 
> 标签：php, crontab

我有一个文件将通过 CRON 调用 30 到 30 分钟，但想要一些改进它的技巧，因为他的方式非常慢。

他的逻辑很简单：

1.  搜索数据库中所有状态未就绪的记录

2.  如果记录存在，它会执行一次 foreach，并且对于此类的每个实例，它都会调用另一个类来执行 curl 以获取 xml 将其转换为 md5 哈希并将哈希与当前数据库进行比较。

3.  如果哈希值不同，它会做其他事情

问题是这个过程很慢，如果有人可以改进这个？

```
<?php

require_once($_SERVER['DOCUMENT_ROOT'] . 'setup.php');

$MySQL = new MySQL();
$resultados = $MySQL->query("SELECT * FROM objetos WHERE situacao != 'entregue' AND email = 1")->fetchAll(PDO::FETCH_ASSOC);

if ($resultados) {
    foreach ($resultados as $resultado) {
        $Rastreio = new Correios(new cURL(), $resultado['cod_objeto']);

        if ($Rastreio->resultado['hash'] != $resultado['hash']) {

            $user = $MySQL->query("SELECT  nome, email FROM usuarios WHERE id_usuario = {$resultado['fk_id_usuario']}")->fetch(PDO::FETCH_LAZY);

        // Doing something different

            $MySQL->exec("UPDATE objetos SET situacao = $Rastreio->resultado['status'], hash = {$Rastreio->$resultado['hash']} WHERE cod_objeto = {$resultado['cod_objeto']} AND fk_id_usuario = {$resultado['fk_id_usuario']}");
        }
    }
    } 
```

* * *

所有答案都很有用。我认为问题出在数据库中，我的查询也没有优化。我会试试你说的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:22:13.030

这不是一个完整的答案，但我无法发表评论，所以它必须在这里。

可以实现一些优化：

*   你真的需要`SELECT *`吗？不能更具体地针对您需要的领域吗？
*   `AND email = 1`真的需要这个条件吗？
*   您是重复使用 cURL 会话还是为每个请求创建一个新会话？
*   您可以在每次迭代后`unset`从行开始`$resultados`，这样集合就更小了。
    收益可能很小，但仍然可能有所帮助。
*   您是否在 cURL 请求中检索不必要的内容？
    如果你不需要它们，就像标题一样。
*   如果您正在记录 cURL 错误，您是否有权访问该文件？
    你是追加还是重写？

可能还有其他事情需要考虑，但这些问题应该是首先要检查的事情。

# java - 在 OpenGL 中使用 GL_QUADS 进行渲染时，缺少部分形状

> ID：12879207
> 
> 赞同：1
> 
> 时间：2012-10-14T04:05:14.323
> 
> 标签：java, opengl

我正在尝试使用 GL_QUADS 渲染一个正方形，但每次渲染它都有一个三角形缺失形式![在此处输入图像描述](../Images/be76709fd1eeead44f8771dc65700792.png)

这是我的代码：

```
gl.glPushMatrix();
gl.glBegin(GL.GL_QUADS);
gl.glVertex3d(pts2d.get(0).x, extra[0],pts2d.get(0).y);
gl.glVertex3d(pts2d.get(1).x,extra[0],pts2d.get(1).y);
gl.glVertex3d(pts2d.get(0).x, portalHeight,pts2d.get(0).y);
gl.glVertex3d(pts2d.get(1).x,portalHeight,pts2d.get(1).y);
gl.glEnd();
gl.glPopMatrix(); 
```

我正在使用 JOGL，这些点是创建正方形的正确点，我只是不知道为什么会切掉一个三角形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:41:41.693

请注意，OpenGL 的四边形排序与等效三角形条的排序不同。这就是我的意思。

按以下顺序指定构成四边形三角形条的四个顶点：

```
0 2
1 3 
```

四边形按*以下*顺序指定：

```
0 3
1 2 
```

看到不同？它在四边形的面上逆时针（或顺时针，取决于您的缠绕顺序）。它不是从上到下，从左到右。

# python - 重构此视图代码

> ID：12879208
> 
> 赞同：0
> 
> 时间：2012-10-14T04:05:26.130
> 
> 标签：python, django

我的一个观点中有以下代码。问题是我不知道如何将它重构为一个 for 循环。唯一的区别是“项目”。部分。我需要在同一个模板中的所有三个变量值，所以我认为我不能从 urls.py 传递信息。关于如何重写这个的任何想法，所以我不会重复自己？

谢谢。

```
def average(request):

    cal_list = []
    cal_list2 = []
    cal_list3 = []

    exams = Test.objects.filter(test__test_name__iexact="one")
    for item in exams:
        cal_list.append(int(item.start))
        result = sum(cal_list) / float(165) * 100
        result = result / len(cal_list)
        result = int(round(result))
        result = str(result) + '%'

    for item in exams:
        cal_list2.append(int(item.s1))
        result2 = sum(cal_list2) / float(165) * 100
        result2 = result2 / len(cal_list2)
        result2 = int(round(result2))
        result2 = str(result2) + '%'

    for item in exams:
        cal_list3.append(int(item.s2))
        result3 = sum(cal_list3) / float(165) * 100
        result3 = result3 / len(cal_list3)
        result3 = int(round(result3))
        result3 = str(result3) + '%'

    return direct_to_template(request, 'a.html', {'result': result, 'result2': result2, 'result3': result3}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:13:02.480

在您的循环中，您不断覆盖该`results`值，因此您可以推断该部分：

```
for item in items:
   cal_list.append(int(item.start))
   cal_list2.append(int(item.s1))
   cal_list3.append(int(item.s2))

result = "%s%%" % round((sum(cal_list) / float(165) * 100) / len(cal_list))
result2 = "%s%%" % round((sum(cal_list2) / float(165) * 100) / len(cal_list2))
result3 = "%s%%" % round((sum(cal_list3) / float(165) * 100) / len(cal_list3)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T04:13:38.063

我只想创建一个函数：

```
def calculate_result(items):
    items = tuple(int(i) for i in items)
    result = sum(items) / 16500.0
    result = result / len(items)
    return '%i' % round(result) + '%'

result0 = calculate_result(item.start for item in exams)
result1 = calculate_result(item.s1 for item in exams)
result2 = calculate_result(item.s2 for item in exams) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T04:37:14.647

您可以使用`aggregate`来在数据库层执行求和。

```
from django.db import models

def average(request):
    queryset = Test.objects.filter(test__test_name__iexact="one")
    total = queryset.count()
    results = queryset.aggregate(
        result1=models.Sum('start'),
        result2=models.Sum('s1'),
        result3=models.Sum('s2'))
    def transform(resultsum):
        result = resultsum / float(165) * 100
        result = result / total
        result = int(round(result))
        result = str(result) + '%'
        return result
    result1 = transform(results['result1'])
    result2 = transform(results['result2'])
    result3 = transform(results['result3'])
    return direct_to_template(request, 'a.html', {'result': result1, 'result2': result2, 'result3': result3}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T04:09:23.920

在那里，您可以进行最简单的重构，它使循环免于仅对所需事物进行迭代并将计算移出循环。

```
def average(request):

    cal_list = []
    cal_list2 = []
    cal_list3 = []

    exams = Test.objects.filter(test__test_name__iexact="one")
    for item in exams:
        cal_list.append(int(item.start))
        cal_list2.append(int(item.s1))
        cal_list3.append(int(item.s2))

    result = sum(cal_list) / float(165) * 100
    result = result / len(cal_list)
    result = int(round(result))
    result = str(result) + '%'

    result2 = sum(cal_list2) / float(165) * 100
    result2 = result2 / len(cal_list2)
    result2 = int(round(result2))
    result2 = str(result2) + '%'

    result3 = sum(cal_list3) / float(165) * 100
    result3 = result3 / len(cal_list3)
    result3 = int(round(result3))
    result3 = str(result3) + '%'

    return direct_to_template(request, 'a.html', {'result': result, 'result2': result2, 'result3': result3}) 
```

# java - 如何从我的 wav 文件中提取声音数据？

> ID：12879210
> 
> 赞同：9
> 
> 时间：2012-10-14T04:05:42.757
> 
> 标签：java, audio, drawing, wav, javasound

首先，这是为了家庭作业或……项目。

我无法理解如何将声音数据波绘制到项目的 Java 图形上的想法。我必须使用 UI 和一切从头开始完成这项任务，所以基本上是制作一个 .wav 文件编辑器。 **我遇到的主要问题是将声音数据放入要绘制的图表中。目前，我现在正在绘制一个随机生成的值数组。**

到目前为止，我有一个小程序正在运行并验证 wav 文件，以便它实际上是一个 wav 文件。

我正在使用 FileInputStream 读取它并验证：RIFF 字节（0-3）、FileLength（4-7）、WAVE 字节（8-11），然后是格式块格式（从 RIFF 块的末尾开始; 并将索引定位到它的末尾并给出格式 0-3，格式块的长度 4-7，然后是波形文件的所有规范的接下来的 16 个字节，并将它们存储在适当的命名变量中。

一旦我到达 DATA 块及其长度，这就是我所有的声音数据，这就是我不确定如何为声音数据字节存储每个字节，甚至将其转换为与振幅相关的值声音。我认为验证是相似的，所以它会是一样的，但它似乎不是那样的......要么就是这样，要么我一直在把一些超级简单的事情复杂化，因为我已经盯着这几天了。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-14T05:19:04.830

我不是Java程序员，但我对渲染音频有一定的了解，因此希望以下内容可能对您有所帮助...

鉴于您几乎总是拥有比可用像素多得多的样本，明智的做法是从缓存的减少或样本数据的“摘要”中提取。这通常是音频编辑器（例如[Audacity](http://audacity.sourceforge.net/)）渲染音频数据的方式。事实上，最常见的策略是计算每个像素的样本数，然后找到每个大小为 的块的最大和最小样本`SamplesPerPixel`，然后在每个最大最小对之间画一条垂直线。您可能希望缓存此缩减，或者可能为不同缩放级别缓存一系列此类缩减。Audacity 缓存到磁盘上的临时文件（“块文件”）。

然而，上面的内容可能过于简单化了，因为实际上您将希望从一块固定大小的样本中计算初始的最大最小对 - 比如 256 个样本 - 而不是从一个 size `SamplesPerPixel`。然后，您可以从缓存的减少中计算进一步的“动态”减少。关键是这`SamplesPerPixel`通常是一个动态数量 - 因为用户可能随时调整画布的大小（希望这是有道理的......）。

还要记住，当您在画布上绘图时，您需要按画布的宽度和高度来缩放样本值。最好的方法（至少在垂直方向上）是标准化样本，然后乘以画布高度。16 位音频由 [-32768, 32767] 范围内的样本组成，因此要标准化只需将浮点除以 32768。然后反转符号（将波形翻转到画布坐标），加 1（补偿对于负值）并乘以画布高度的*一半。*反正我就是这样做的。

[本页](http://codeidol.com/java/swing/Audio/Build-an-Audio-Waveform-Display/)展示了如何使用 Java Swing 构建基本的波形显示。我没有详细研究它，但我认为它只是对数据进行下采样，而不是计算最大-最小对。当然，这不会提供像 max-min 方法那样精确的减少，但它更容易计算。

如果您想知道如何正确地做事，您应该深入研究 Audacity 源代码（但是请注意 - 它是相当粗糙的 C++）。要获得总体概述，您可以查看Audacity 的原作者 Dominic Mazzoni 的[“基于磁盘的音频编辑的快速数据结构” 。](http://www.mitpressjournals.org/doi/abs/10.1162/014892602760137185?journalCode=comj)但是，您需要从[CMJ](http://www.mitpressjournals.org/loi/comj)购买。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T04:51:59.847

对于标准 WAV 文件，它实际上非常简单。一旦通过标题，您只需将每 16 位解释为二进制补码整数。我建议使用 DataInputStream，因为它就像调用 readShort() 一样简单。

这些是每个采样点的幅度值。您可能想要做一些平均值或其他事情，因为大多数时候样本会比水平像素多得多。尝试在某种折线图上绘制所有样本可能不是最好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:18:36.607

您需要做的第一件事是读取原始数据。编写 Wav 文件解析器并不太难，但您也可以使用 javasound API。这里有一些关于使用这个 api 的很好的提示和示例代码：

[http://www.jsresources.org/](http://www.jsresources.org/)

如果你想编写自己的解析器，你可以从这里开始：

[https://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

获得原始数据后，您可以将其显示为时间函数。这称为波形。

但是，当用户“缩小”大量数据时，显示波形会很耗时：以这种方式呈现一个小时的数据需要很长时间。因此，大多数应用程序会预先计算一些数据，以便更快地绘制缩小的数据。执行此操作的“正确”方法如下：

*   在文件中的样本块上循环（从 50 到 500 左右）
    *   读取样本块
    *   取所有这些样本的绝对值
    *   取绝对值的最大值
    *   将最大值存储为该块的“缩小”值

当我说“正确”时，我的意思是每个人都这样做，所以它会产生一个看起来像人们期望的视图。如果你做一些不同的事情（例如计算日志或平均而不是寻找峰值）你会得到一些看起来不正确的东西，正如这个家伙发现的那样：

[绘制波形 - 转换为 DB 压缩它](https://stackoverflow.com/questions/11091924/drawing-waveform-converting-to-db-squashes-it)

# java - 服务器和客户端之间的简单连接。客户端发送消息，服务器正确获取。但是当服务器试图回复时没有任何效果？

> ID：12879211
> 
> 赞同：0
> 
> 时间：2012-10-14T04:06:34.990
> 
> 标签：java, multithreading, networking, connection

如果分开

> 客户端---发送消息到---> 服务器：工作正常！

如果分开

> 服务器---发送消息到--->客户端：工作正常！

但是当两者在一起时：

> 客户端---发送消息到--->服务器
> 服务器---发送消息到--->客户端

没有任何工作！

这是服务器端：

```
import java.io.*;
import java.net.*;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;

public class MyServer
{  
    private final static int port = 8000; 
    private static String hostname = "";
    private static String hostIP ="";
    public static void main(String[] args )
    {  
        ServerSocket serverSocket=null;
        try {
            // get host information
            hostname = InetAddress.getLocalHost().getHostName();
            hostIP = InetAddress.getLocalHost().getHostAddress();
            // display server information
            System.out.println("MyServer started on "+hostname+" with IP: "+hostIP + " on the port number: " + port);
            serverSocket = new ServerSocket(port);
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }
        while(true)
        {   
            ClientWorker w;
            try
            {   
                w = new ClientWorker(serverSocket.accept());
                Thread t = new Thread(w);
                t.start();
            }
            catch(IOException e)
            {
                e.printStackTrace();
                break;
            }   
        }
    }
}   
class ClientWorker implements Runnable
{
    Socket incoming;
    public ClientWorker(Socket incoming)
    {
        this.incoming = incoming;
    }
    public void run()
    {
        String request = null;
        BufferedReader in = null;
        try {
            in = new BufferedReader(new InputStreamReader(incoming.getInputStream()));
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            request = in.readLine();
            System.out.println("request =" + request);
        } catch (IOException e) {
            e.printStackTrace();
        }
        PrintWriter out = null;
        try {
            out = new PrintWriter(incoming.getOutputStream(),true);
        } catch (IOException e) {
            e.printStackTrace();
        }
        out.println("The command is not readable");

    } 
```

}

这是客户端：

```
import java.io.*;
import java.net.*;
public class MyClient2
{
    public static void main(String[] args)
    {
        String answer = null;
        if (args.length != 1){
            System.out.println("Usage: MyClient serverHostname");
            System.exit(0);
        }
        try
        {
            Socket socket = new Socket (args[0], 8000);
            PrintWriter out = new PrintWriter(socket.getOutputStream(),true);
            out.print("TIME");
            System.out.println("Request has been send");
            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream())); 
            answer = in.readLine();         
            System.out.println("The answer is:  "+answer);
            in.close();
            out.close();
            socket.close();
        }
        catch (Exception e)
        {
            System.out.println("Make sure the server is running and try again");
        }
    }
} 
```

请看一下，我很感激你的意见。干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T04:28:17.310

您正在使用`readLine`阻塞直到读取换行符或关闭流的方法。您既不发送换行符也不关闭流（直到您期望收到响应之后）。

尝试更改`out.print("TIME");`为`out.println("TIME");`.

此外，避免使用 PrintWriter，因为它隐藏了发生的任何 IOExceptions，您必须手动检查。您的异常处理不是很好。当发生 IOException 时，您可能应该终止线程（而不是盲目地继续），因为您无法从错误中恢复。

此外，您`ClientWorker`不会自行清理 - 即。关闭流和套接字。

# python - 使用scrapy parse函数解析特定的url

> ID：12879216
> 
> 赞同：1
> 
> 时间：2012-10-14T04:08:05.777
> 
> 标签：python, scrapy

我有一个运行良好的爬虫。我现在想使用它的 'parse' 函数来解析给定的 url。虽然存在一个命令行实用程序可以使用命令对单个 url 执行此操作：

`scrapy parse <options> <url>`

但我想在我的 python 代码中执行此操作（并且不为每个 url 启动一个新进程不是一个选项）

据我所知，我需要的是一种在给定 url 的情况下创建响应的方法。由于 scrapy 的响应与 HTTPResponse 不同，我不确定如何在给定 url 的情况下获取该响应。

我确实找到了一个很明显的方法 make_reqests_from_url，但是我不确定如何从 scrapy Request 到 scrapy 响应，我可以将其传递给 parse 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:18:26.887

设法弄清楚了。

本质上，我只需要传递响应正文、url 和 scrapy 请求来创建响应对象。

```
bs = BaseSpider('some')
head = 'www.mywebsite.com'
httpcon = httplib.HTTPConnection(head)
tail = '/mypage.html'
httpcon.request('GET',tail)
sreq = bs.make_requests_from_url(link)
sresp = TextResponse(url=link,status=200,body=httpcon.getresponse(),encoding='utf-8') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T19:03:49.337

与 OP 不同的是，一个快速的组合（带有来自[这里](https://stackoverflow.com/a/4256153)和[这里](https://stackoverflow.com/a/1388807)`subprocess`的部分）是一种选择。

```
import subprocess
bashCommand = "Scrapy fetch http://www.testsite.com/testpage.html"
process = subprocess.Popen(bashCommand.split(), stdout=subprocess.PIPE, stderr=subprocess.PIPE)
page, scrapy_meta_info = process.communicate() 
```

# r - 如何使用 R 自动化 Kolmogorov - Smirnoff 测试？

> ID：12879218
> 
> 赞同：0
> 
> 时间：2012-10-14T04:08:44.853
> 
> 标签：r, loops, automation, statistics

有可能实现这一点（使用循环、函数或其他东西）吗？目前我正在“手动”完成所有工作（换句话说，一步一步），这对我来说非常烦人。我使用 kstest()。

考虑原假设 H0 : X ∼ N(0, 1)。

对于不同的 µ 值（例如 µ = 0、0.25、0.50、0.75、1）和不同的 n 值（例如 n = 25、50、100），请执行以下步骤：

*   从 N(µ, 1) 生成 1000 个样本。
*   对于每个样本，检验假设 H0 : X ∼ N(0, 1)。
*   获取每种情况下的拒绝频率。
*   当原假设为真时，检查水平是否很好地逼近（例如，取 α = 0.10, 0.05, 0.01）。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:45:29.897

当你输入 $\mu$、n 和 $\alpha$ 时，我编写了一个函数来获取接受原假设的数字的比例：

```
library(stats)
anxo <- function(mu, n, alpha){
  prop <- 0
  for (i in 1:n) {
     x <- rnorm(1000, mu, 1)
     if (ks.test(x, pnorm)$p.value > alpha) {
     prop <- prop + 1
     }
  }
  return(prop/n)
} 
```

# api - 灾难响应应用程序的灾难 API

> ID：12879223
> 
> 赞同：7
> 
> 时间：2012-10-14T04:10:12.763
> 
> 标签：api

我正在寻找能够提供最新自然灾害数据的灾难 API。飓风、地震、海啸、干旱等。有没有好的。我找到了网站[http://hisz.rsoe.hu/alertmap/index2.php](http://hisz.rsoe.hu/alertmap/index2.php)并且真的希望他们有一个 API，但他们没有。该网站上的地图显示了所有自然灾害，并将显示我正在寻找的数据。因此，如果有人知道我可以获得此数据或类似数据的任何 API，请提供帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T20:05:27.507

几个月前我们遇到了同样的问题，并决定在 GDACS.org 之上构建一个 REST API (http://api.sigimera.org)。GDACS.org 是一个很好的信息来源，可以对不同的危机类型进行分类。未来，我们计划使用其他资源扩展我们的平台，并改进工具和库支持。

该解决方案应统一获取危机和危机相关信息。

请让我知道您出于什么目的需要此信息以及缺少哪些信息或访问起来过于繁琐。也许我们可以扩展我们的 API...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T07:07:37.027

经过将近一周的研究，我发现了一些实际上非常棒并且做得很好的产品。1.http://www.wunderground.com, 2.http://api.sigimera.org 3.http://hurricane.terrapin.com/soap_access.html.en, 4.http://www.seismi .org/api。欢迎其他任何好的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-20T13:20:55.513

如果其他人仍在寻找这样的东西：

[ReliefWeb](http://labs.reliefweb.int/)提供了一个 API。AFAIK 他们也得到 UNO 的支持。不幸的是，他们的数据不是很结构化，即他们提供了所有灾害的灾害类型和受影响的国家，但没有像地震的“震级”这样的详细信息。这只能在描述文本中找到。但还是很有用的。

# python - PyGame：将透明度应用于具有 alpha 的图像？

> ID：12879225
> 
> 赞同：8
> 
> 时间：2012-10-14T04:10:44.277
> 
> 标签：python, pygame, alpha, geometry-surface, blit

我想显示具有指定透明度[的 alpha 图像](http://8bitboobs.com/stuff/alpha.png)，但不知道该怎么做。

为了详细说明我是如何解决这个问题的，下面的简介是来自[这个 SO 答案](https://stackoverflow.com/questions/12255558/how-to-use-pygame-set-alpha-on-a-picture#answer-12271210)的稍微修改的代码块，但是如果你运行它，你会看到“图像”失去了它的原生 alpha，而“的 alpha” image2" 永远不会改变！呸。

```
#!/usr/bin/env python

import pygame, sys

pygame.init()

window = pygame.display.set_mode((200, 200))
background = pygame.Surface((window.get_size()))
background.fill((255, 255, 255))
image = image2 = pygame.image.load('alpha.png')

image = image.convert()
rect = image.get_rect()

image2 = image2.convert_alpha()
rect2 = image2.get_rect()

rect2.left = rect.width + 1

i = 0
while True:
  for event in pygame.event.get():
    if event.type == 12:
      pygame.quit()
      sys.exit()

  image.set_alpha(i)
  image2.set_alpha(i)

  window.fill((255, 255, 255))
  window.blit(background, background.get_rect())
  window.blit(image, rect)
  window.blit(image2, rect2)

  if i == 255:
    i = 0
  else:
    i += 1

  pygame.display.update()
  pygame.time.Clock().tick(60) 
```

那么......它是如何完成的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T19:43:43.760

制作您要显示的图像的副本（不更改原始图像）并使用以下内容：

```
self.image = self.original_image.copy()
# this works on images with per pixel alpha too
alpha = 128
self.image.fill((255, 255, 255, alpha), None, pygame.BLEND_RGBA_MULT) 
```

抱歉，没有提供完整的示例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-16T13:33:27.113

对于它的价值，我看到了取决于图像本身的不同结果。在我的情况下，我发现使用 Gimp 更改图像可以让我保持代码简单：

```
image = pygame.image.load('path/to/my.png').convert()
image.set_alpha(128)
surface.blit(image, (0, 0)) 
```

使用该代码，以下精灵无法正常工作： [http ://www.spriters-resource.com/resources/sheets/47/50365.png](http://www.spriters-resource.com/resources/sheets/47/50365.png)

但是，在使用 Gimp 更改两件事后它确实有效：

1.  图像 -> 模式 -> 转换为颜色配置文件...并使用默认值
2.  Image -> Mode -> Indexed... 并使用默认值

保存更改后，它在 Ubuntu 中对我有用。我不能发布结果的图片，因为我是新用户...

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-17T22:18:26.670

如果您只是想在 pygame 中加载图像以使其具有 alpha 通道，请执行以下操作：

```
self.image = pygame.image.load("image file path").convert_alpha() 
```

当您在屏幕上绘制此图像时，它应该包括透明度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T07:44:12.760

您的代码有点复杂 :-) 但尽管如此，表面的“非每像素”或“全局 alpha”很难在 Pygame 中正确完成。

这一切都记录在[http://www.pygame.org/docs/ref/surface.htm](http://www.pygame.org/docs/ref/surface.htm) - 但实际上，文字或示例都很短。

发生的情况是，如果您要进行 blitting 的表面（源）具有像素本身的 alpha 像素值（即 32 位深度），则由表面的 set_alpha 方法设置的“全局 alpha”值将被忽略。

要使用此“全局”alpha，源表面不得具有每像素 alpha。如果您的原始图像（在您的情况下为“alpha.png”文件）本身不使用透明度，这很容易实现 - 只需：

```
import pygame
pygame.init()
window = pygame.display.set_mode((200, 200))
image = pygame.image.load('alpha.png').convert(24)
image.set_alpha(128)
window.fill((255,255,255))
window.blit(image, (0,0))
pygame.display.flip() 
```

但是，如果您的“alpha.png”本身确实使用了透明度，并且您打算保留它，那就更棘手了！

您必须： 创建另一个与图像大小相同的表面，深度 = 24 用图像中*未*使用的颜色填充该表面（如“色度键”） - 在视频效果中，通常使用纯绿色或纯白色，但您可以选择任何 RGB 值 - 如果您的图像是照片而不是像素艺术，您将无法知道女巫值不会被使用。随便挑一个，希望不要有太多的“失败像素”。所以，用这个关键颜色填充你的表面，并将它设置为表面的关键颜色：在 blitting 时，该颜色将呈现完全透明。然后，只需在此中间表面上对原始图像进行 blit，在其上设置全局 alpha (set_alpha) 并将 blitit 到目标表面

在代码中，它大致翻译为：

```
import pygame
pygame.init()
window = pygame.display.set_mode((200, 200))
image = pygame.image.load('alpha.png')
surface = pygame.Surface(image.get_size(), depth=24)
key = (0,255,0)
surface.fill(surface.get_rect(), key)
surface.set_colorkey(key)
surface.blit(image, (0,0))
surface.set_alpha(128) 
window.fill((255,255,255))
window.blit(surface, (0,0))
pygame.display.flip() 
```

# python - 当我为 numpy 编写自己的 C 扩展时发生错误

> ID：12879226
> 
> 赞同：5
> 
> 时间：2012-10-14T04:11:03.870
> 
> 标签：python, numpy, python-2.7

我正在尝试为 numpy 编写一个 C 扩展来对大数组进行一些计算，但是当我使用 "PyArray_SimpleNew" 或 "PyArray_FromDims" 来获取 PyArrayObject 时，我遇到了一个大问题。这是我的代码：

```
#include<stdio.h>
#include "Python.h"
#include"arrayobject.h"

static PyObject *MyExtGFV(PyObject *self, PyObject *args)
{
    npy_intp dims = 1;
    PyArray_SimpleNew(1, &dims, PyArray_FLOAT32);
    retuurn Py_BuildValue("i", 1);
}
static PyMethodDef my_ext_methods[] = 
{
    {"GFV", MyExtGFV, METH_VARARGS, "used to generate feature vectors"},
    {NULL, NULL}
}

PyMODINIT_FUNC initMyExt(void)
{
    Py_InitModule("MyExt", my_ext_methods);
} 
```

为了调试它，我删除了函数 MyExtGFV() 中的大部分代码，只留下

```
PyArray_SimpleNew(1, &dims, PyArray_FLOAT32); 
```

在其中，但是当我导入它并在我的 python 代码中使用它时，它说“python 已停止工作”。这个问题我google了很久，但好像没有人有同样的问题，这几乎让我发疯，任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T06:41:14.930

OK，终于明白了，init函数应该是这样写的：

```
PyMODINIT_FUNC initMyExt(void)
{
    Py_InitModule("MyExt", my_ext_methods);
    import_array();
} 
```

“导入数组（）；” 对numpy来说是必需的，谢天谢地~~

# ruby-on-rails - 设置 simple_form 集合条目的值

> ID：12879228
> 
> 赞同：0
> 
> 时间：2012-10-14T04:11:17.940
> 
> 标签：ruby-on-rails, simple-form

我有以下代码：

```
<% s.input :style_id, :collection => Style.all.map {|style| "#{style.brand.name} #{style.model.name} #{style.submodel.name} #{style.name}"}.sort %> 
```

基本上我需要使用上面的 map 块构建呈现的条目，但也需要为每个条目分配 ID，因此发送到控制器的参数对控制器有意义。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:14:44.473

没关系，我想通了：

```
Style.all.map {|style| ["#{style.brand.name} #{style.model.name} #{style.submodel.name} #{style.name}", style.id]}.sort 
```

# vb.net - Visual Basic 文本框到列表框

> ID：12879230
> 
> 赞同：3
> 
> 时间：2012-10-14T04:11:27.063
> 
> 标签：vb.net, vba, textbox, listbox

我在我的项目中制作了 2 个表格。但我想让第一个表单输入输入，作为第二个表单，它可以显示输出。问题是，我已经使用文本框输入了所有输入，但是使用列表框无法以第二种形式显示输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:33:44.030

您可以在第二个表单上创建一个公共方法并从您的第一个表单调用它。我创建了两个表单，一个带有 TextBox，另一个带有 ListBox，如果您需要更多详细信息，则需要举例说明您遇到的问题。

**表格1**

```
Public Class Form1
    Dim frm2 As Form2
    Private Sub TextBox1_KeyPress(sender As System.Object, e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress
        Dim tb As TextBox = CType(sender, TextBox)
        If e.KeyChar = vbCr Then
            If tb.Text.Length > 0 Then
                frm2.ListBoxAdd(tb.Text)
                tb.Text = ""
                e.Handled = True
            End If
        End If
    End Sub

    Public Sub New()

        InitializeComponent()
        frm2 = New Form2
        frm2.Show(Me)
    End Sub
End Class 
```

**表格2**

```
Public Class Form2
    Public Sub ListBoxAdd(data As String)
        ListBox1.Items.Add(data)
    End Sub
End Class 
```

# ruby-on-rails - 为什么在初始化 Rails 模型时无法更改模型的属性值？

> ID：12879231
> 
> 赞同：0
> 
> 时间：2012-10-14T04:12:01.090
> 
> 标签：ruby-on-rails, activerecord, initialization

这是一个简单的问题，我有 2 个模型如下，当我创建一个新的 Question 模型实例时，它的 post_type attr 为 nil。但是当我尝试使用 rails c 时，我可以看到它的值是 1，而当我保存模型时，它的值仍然是 nil。有什么解释吗？

```
class Post < ActiveRecord::Base
  POST_QUESTION = 1
end

class Question < Post
  def initialize
    p "post_type=#{@post_type}"

    @post_type = Post::POST_QUESTION
    super

    p "post_type=#{@post_type}"

  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:32:04.263

Rails 将使用单表继承为您处理此类事情。您需要表`"type"`中的字符串列`posts`。

```
class Post < ActiveRecord::Base
  #...
end

class Question < Post
  #...
end 
```

您创建的任何问题都将保存到带有 type 的帖子表中`"Question"`。

您是否有理由需要帖子类型为整数？

无论如何，它不能像你写的那样工作的原因是所有模型属性都存储在一个名为`@attributes`. 从数据库加载对象后，您可以使用其他实例变量，但 ActiveRecord 不会关注它们。

# gradle - 如何将默认 jvm args 设置为 gradle 应用程序插件？

> ID：12879232
> 
> 赞同：13
> 
> 时间：2012-10-14T04:12:15.257
> 
> 标签：gradle

我使用 gradle 应用程序插件来生成应用程序文件夹。该`installApp`任务为我提供了一个启动脚本，但我不知道如何从`build.gradle`.

我需要一些 jvm 参数，例如`file.encoding`. 我只是修改启动脚本来设置`DEFAULT_JVM_OPTS`变量

```
#!/usr/bin/env bash

##############################################################################
##
##  MuzeeS3Deployer start up script for UN*X
##
##############################################################################

# Add default JVM options here. You can also use JAVA_OPTS and MUZEE_S_DEPLOYER_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS=" -Dfile.encoding=utf-8 " 
```

如果未设置参数，我的控制台将无法很好地显示消息：

```
qty:MuzeeS3Deployer qrtt1$ ./build/install/MuzeeS3Deployer/bin/MuzeeS3Deployer d
2012/10/14 #U###12:02:03 SyncCommand main
ĵ#i: no aws credentials found at /Users/qrtt1/AwsCredentials.properties 
```

当我设置编码时：

```
qty:MuzeeS3Deployer qrtt1$ ./build/install/MuzeeS3Deployer/bin/MuzeeS3Deployer d
2012/10/14 下午 12:04:19 SyncCommand main
警告: no aws credentials found at /Users/qrtt1/AwsCredentials.properties 
```

* * *

我从[@Peter](https://stackoverflow.com/users/84889/peter-niederwieser)那里得到了解决方案。最后，我对脚本进行了一些小改动：

```
startScripts {
    doLast {
        unixScript.text = unixScript.text.replace('DEFAULT_JVM_OPTS=""', 'DEFAULT_JVM_OPTS="-Dfile.encoding=utf-8"')
        windowsScript.text = windowsScript.text.replace('DEFAULT_JVM_OPTS=', 'DEFAULT_JVM_OPTS="-Dfile.encoding=utf-8"')
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-10-28T22:46:39.483

Gradle 1.7 中添加了对 JVM 参数的支持：[https ://docs.gradle.org/current/userguide/application_plugin.html#configureApplicationDefaultJvmArgs](https://docs.gradle.org/current/userguide/application_plugin.html#configureApplicationDefaultJvmArgs)

例如，对于设置`file.encoding`，您可以执行以下操作：

```
applicationDefaultJvmArgs = ['-Dfile.encoding=utf-8'] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-14T04:47:56.833

目前没有对设置的特殊支持`DEFAULT_JVM_OPTS`。但是，您可以执行以下操作：

```
startScripts {
    doLast {
        unixScript.text = unixScript.text.replace('DEFAULT_JVM_OPTS=""', 'DEFAULT_JVM_OPTS="-Dfile.encoding=utf-8"')
    }
} 
```

您可能想要为`windowsScript`.

# c++ - 使用线程根据起始字符打印出单词

> ID：12879236
> 
> 赞同：0
> 
> 时间：2012-10-14T04:12:36.467
> 
> 标签：c++, multithreading

我很难在网上找到有关在 C++ 中使用线程的信息。我需要我的程序做的是在 main() 中创建两个线程。这两个线程从文本文件中指定的句子中获取单词，并根据每个单词的起始字符打印出单词。一个线程应该打印以元音开头的单词，另一个线程应该打印以辅音开头的单词。main() 本身不应打印任何内容，并且单词的顺序应与句子中的相同。这两个线程需要相互让步才能完成此操作。不能使用同步技术。

我将文本文件读入向量，目前工作正常。我的代码可以完成获得正确的输出，但不是以指定的方式。如果你能帮助我，我将不胜感激。谢谢你。

```
#include <iostream>
#include <thread>
#include <fstream>
#include <string>
#include <iterator>
#include <vector>
#include <sstream>

using namespace std;

void cons(string temp){
    if (temp[0] != 'A' && temp[0] != 'a' && temp[0] != 'E'&& temp[0] != 'e'&& temp[0] != 'I'&& temp[0] != 'i'&& temp[0] != 'O'&& temp[0] != 'o'&& temp[0] != 'U'&& temp[0] != 'u') {
        cout << "cons:  " << temp << endl;
    }
    this_thread::yield();
}

void vow(string temp){
    if (temp[0] == 'A'|| temp[0] == 'a'|| temp[0] == 'E'|| temp[0] == 'e'|| temp[0] == 'I'|| temp[0] == 'i'|| temp[0] == 'O'|| temp[0] == 'o'|| temp[0] == 'U'|| temp[0] == 'u') { 
        cout << "vow:   " << temp << endl;
    }
    this_thread::yield();
}

int main(){
    string sentence, temp;
    ifstream ifs;
    ofstream ofs;
    vector <thread> wordThreads;

    ifs.open("phrase.txt");
    getline(ifs, sentence);
    istringstream s(sentence);
    istream_iterator<string> begin(s), end;
    vector<string> words(begin, end); 

    ifs.close();

    for (int i=0; i < 5; i++) {
        wordThreads.push_back(thread(cons, words[i]));
        wordThreads.push_back(thread(vow, words[i]));
    }

    for (thread& t: wordThreads) // loop with a range variable
    t.join(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-10T16:49:13.743

我知道这是一个老话题，但这里的答案是`Petersons`在以下函数中使用算法：

```
loop
 flag[i] := true;   
 turn := j;    
 while flag[j] and turn = j do nothing;
 (critical section of code)  
 flag[i] := false;  
 (remainder section of code)   
end loop 
```

它根据位于全局共享内存空间中的 Bool 标志数组和轮换变量来控制何时发生切换。没有使用互斥锁。

# android - 如何设置网络类型偏好？

> ID：12879237
> 
> 赞同：0
> 
> 时间：2012-10-14T04:12:38.410
> 
> 标签：android

```
public class ReplyWithAddressService extends Service{

public static final String GOOGLE_GEOCODER = "http://maps.googleapis.com/maps/api/geocode/json?latlng=";
private String msgRecipient;
private LocationManager manager;
private MyLocationListener listener;
private static double latitude = -1;
private static double longitude = -1;
private String provider;
private String smsMessageString = "";
public static String filenames = "AntiTheft";
SharedPreferences pref;
String email;

@Override
public IBinder onBind(Intent intent){
    return null;
}

@Override
public void onCreate(){
    super.onCreate();
    Log.d(this.getClass().getName(), "Service created");
    pref = getSharedPreferences(filenames, 0);
    manager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    listener = new MyLocationListener();

    if (manager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
        provider = LocationManager.GPS_PROVIDER;
    }
    else if (manager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
        provider = LocationManager.NETWORK_PROVIDER;
    }

    manager.requestLocationUpdates(provider, 0, 0, listener);
}

@Override
public void onStart(Intent intent, int startId){
    super.onStart(intent, startId);
    Log.d(this.getClass().getName(), "Service started");
    //Extract Intent Data
    msgRecipient = intent.getStringExtra("number");
    String emailAddress = pref.getString("keyemail", "");
    String contact1 = pref.getString("contact1", "");
    String contact2 = pref.getString("contact2", "");
    Log.d(this.getClass().getName(), "Number: " + msgRecipient);
    ConnectivityManager cManager = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = cManager.getActiveNetworkInfo();

    //Get Location
    if (ReplyWithAddressService.latitude == -1 || ReplyWithAddressService.longitude == -1){
        Location location = manager.getLastKnownLocation(provider);

        if (location != null){
            ReplyWithAddressService.latitude = location.getLatitude();
            ReplyWithAddressService.longitude = location.getLongitude();

            if (info != null){

                if (info.isConnected()){
                    String address = ReplyWithAddressService.getAddressFromGPSData(ReplyWithAddressService.latitude, ReplyWithAddressService.longitude);
                    smsMessageString += "Current Location: " + address + "."; 
                }
            }

            smsMessageString += "Link: http://maps.google.com/maps?q=" + ReplyWithAddressService.latitude + "+" + ReplyWithAddressService.longitude;
            Log.d("Message", smsMessageString);
        }
        else{
            smsMessageString = "Location Data is Not Available";
        }
    }

    SmsManager sManager = SmsManager.getDefault();
    String number = msgRecipient;
    String contactNo1 = contact1;
    String contactNo2 = contact2;
    email = emailAddress; 

    //Send SMS message
    sManager.sendTextMessage(number, null, smsMessageString, null, null);
    sManager.sendTextMessage(contactNo1, null, smsMessageString, null, null);
    sManager.sendTextMessage(contactNo2, null, smsMessageString, null, null);

    try{
        sendMail();
    } catch(MessagingException e){
        e.printStackTrace();
    }

    stopSelf(startId);
} 
```

我正在开发一个位置跟踪器移动应用程序，一旦丢失的手机检索到位置，它会将当前位置发送到预定义的电子邮件地址和手机号码。如果我的手机连接到 Wi-Fi 没有问题，但是当我关闭 Wi-Fi 时，我无法通过电子邮件接收位置信息，我只想知道如何检查是否有我的手机中连接的任何 Wi-Fi，如果是，则首选 Wi-Fi，如果没有，则自动启用移动网络以发送电子邮件。我的目的是确保在任何情况下都可以发送电子邮件（无论是否存在 Wi-Fi）...希望有人可以帮助我，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:35:50.133

您可以注册一个 BroadcastReceiver，以便在 WiFi 连接建立或更改时收到通知。

注册广播接收器：

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION);
registerReceiver(broadcastReceiver, intentFilter); 
```

然后在那个 BroadcastReceiver 你可以使用类似的东西：

```
 @Override
public void onReceive(Context context, Intent intent) {
    final String action = intent.getAction();
    if (action.equals(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION)) {
        if (intent.getBooleanExtra(WifiManager.EXTRA_SUPPLICANT_CONNECTED, false)) {
            //wifi is connected. You can do stuff here.
        } else {
            // wifi connection is gone.
        }
    } 
```

BroadcastReceiver 的文档：http: [//developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

WifiManager 的文档：http: [//developer.android.com/reference/android/net/wifi/WifiManager.html](http://developer.android.com/reference/android/net/wifi/WifiManager.html)

在使用上面的代码之前，您需要检查设备是否已经连接到 wifi，因为上面的代码只会在连接状态改变时通知您。它首先是连接的。要检查这一点，您可以使用：

```
WifiManager wifiManager = Context.getSystemService(Context.WIFI_SERVICE);
    WifiInfo wifiInfo = wifiManager.getConnectionInfo();
    if (wifiInfo != null) {
        //connection is established
    } 
```

# java - 序列化 GWT 项目的共享包中的类时出现 App Engine 500 服务器错误

> ID：12879242
> 
> 赞同：0
> 
> 时间：2012-10-14T04:14:18.983
> 
> 标签：java, google-app-engine, gwt

我在共享文件夹中有一个朋友类。RPC 返回的 ArrayList 的类型。第一次上传项目时出现以下异常：

```
javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.client.rpc.SerializationException: Type 'com.aman.gwt.friendlist.shared.Friend' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized.: instance = com.aman.gwt.friendlist.shared.Friend@6cffbb
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:665) 
```

所以为了解决这个问题，我导入了 java.io.Serializable，实现了它并声明了

```
private static final long serialVersionUID=-3195362485601524606L; 
```

但现在我在应用引擎上收到 500 个服务器错误。我检查了日志，但什么也没有。

更新：这是一个临时问题。有时在更新应用程序时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:18:56.100

您的类（以及任何自己的类使用！）的*源代码*是否在工件中可用 - 缺少通常会导致这样的错误。另一个可能的原因是.gwt.xml 描述符中出现错误或缺失。`Friend``Friend``<inherits ...``<source ...`

干杯，

# ruby-on-rails-3 - postgresql 版本不会从默认值更改

> ID：12879248
> 
> 赞同：5
> 
> 时间：2012-10-14T04:15:14.677
> 
> 标签：ruby-on-rails-3, postgresql, postgresql-9.1

mac os x 狮子 10.7.4

psql --version -> psql (PostgreSQL) 9.0.5

我想安装最新版本并用它运行我的 rails 应用程序。

我愿意

```
brew install postgresql

it is installed here: /usr/local/Cellar/postgresql/9.1.4  

initdb /usr/local/var/postgres

pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start 
```

我得到：

```
pg_ctl: another server might be running; trying to start server anyway 
```

运行 postgres --version

```
 -> 9.1.4 
```

postgres -p 5433

```
 postgres does not know where to find the server configuration file.
 You must specify the --config-file or -D invocation option or set the PGDATA environment variable. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T04:18:40.393

编辑`/usr/local/var/postgres/postgresql.conf`和更改`port`指令以使用不同的端口号，例如`5433`. 然后像以前一样启动新的 Pg 实例。

您现在可以通过在 Rails 配置中指定不同的端口来连接到 9.1 实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-19T20:53:43.657

在 MAC 中：

```
brew link --overwrite -f postgresql@9.6 
```

将更改终端 psql 命令上的默认 psql 版本。

您还将在 /usr/local/Cellar/ 中找到所有 postgresql 版本文件夹

例子：

/usr/local/Cellar/postgresql/12.3_4

/usr/local/Cellar/postgresql@9.6

# android - android SU消息弹出多次

> ID：12879249
> 
> 赞同：2
> 
> 时间：2012-10-14T04:15:15.570
> 
> 标签：android, root, reboot, su

我有一个我正在尝试制作的根应用程序。我有它，以便启动器活动包含一个 ListView，当您按下一个项目时，它会打开一个 AlertDialog 并要求确认。它的主要功能是重新启动设备。我需要知道如何在启动时运行一次“su”，然后当我单击其他项目时，它不必再次要求 su

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:12:57.453

如果您的设备中安装了 SU 管理器应用程序（如 super su），您可以通过在设置中选择“不提示”选项来禁用提示。但请记住，您在没有提示的情况下允许 su 命令，这可能非常危险

# c - 将结构插入队列时出现分段错误

> ID：12879250
> 
> 赞同：0
> 
> 时间：2012-10-14T04:15:20.897
> 
> 标签：c, struct, segmentation-fault, queue

我正在编写一个解决迷宫的程序。它从起始方“o”开始，到“*”结束。“#”是墙壁和“。” 是可以探索的方块。该算法是在程序开始时将开始方块添加到一个空队列中。之后的每个后续步骤，您从队列中取出一个方格并检查它是否是已记录的方格、是否是完成方格或是否可探索。如果可以探索，则将相邻的非墙方块添加到队列中。我的问题是，当我将起始方块添加到队列中时，我遇到了分段错误，我不知道为什么。下面是相关代码：

mazeQ.c:

```
#include <stdio.h>
#include <stdlib.h>
#include "QueueInterface.h"

int main(void)
{
    Queue Q;
    InitializeQueue(&Q);

    int row;
    int column;

    int x;
    int y;

    scanf("%d %d", &column, &row); //scan dimensions of maze

    char input[row][column];
    ItemType maze[row][column];
    for(x = 0; x <= row; x++) {
            fgets(input[x],column+2,stdin);
    }
    row++;

    for (x = 1; x < row; x++){
            for (y = 0; y < column; y++) {
                    maze[x][y].squareType = input[x][y];
                    maze[x][y].xCoordinate = x-1;
                    maze[x][y].yCoordinate = y;
                    maze[x][y].recordedSquare = 0;
            }
    }

    for(x = 1; x < row; x++){
            for(y = 0; y < column; y++) {
                    if (maze[x][y].squareType == 'o')
                      Insert(maze[x][y],&Q);  //INSERTED HERE
            }
    }
    for (x = 1; x < row; x++) {
            for (y = 0; y < column; y++) {
                    printf("%c", maze[x][y].squareType);
            }
    printf("\n");
    }

} 
```

用户类型.h：

```
#include <stdio.h>
#include <stdlib.h>
typedef struct {
    char squareType;
    int xCoordinate;
    int yCoordinate;
    int recordedSquare;
} ItemType; 
```

下面的两个文件必须保持原样。QueueImplementation.c：

```
#include <stdio.h>                   
#include <stdlib.h>                 
#include "QueueInterface.h"         

void SystemError(char *errorMsg) {fprintf(stderr,errorMsg);}

void InitializeQueue(Queue *Q)
{
  Q->Front = NULL;
  Q->Rear  = NULL;
}

int Empty(Queue *Q)
{
  return (Q->Front == NULL);
}

int Insert(ItemType R, Queue *Q)
{   
  QueueNode *Temp;
                                               /* attempt to allocate */
  Temp = (QueueNode *) malloc(sizeof(QueueNode));       /* a new node */

  if (Temp == NULL) {               /* Temp = NULL signals allocation */
     SystemError("system storage is exhausted");           /* failure */
     return 0;
  } else {
     Temp->Item = R;
     Temp->Link = NULL;
     if ( Q->Rear == NULL ) {
        Q->Front = Temp;
        Q->Rear = Temp;
     } else {
        Q->Rear->Link = Temp;
        Q->Rear = Temp;
     }
   }
   return 1;
} 
```

队列接口.h：

```
#include "UserTypes.h"                          /* get ItemType definition */

typedef  struct  QueueNodeTag {
        ItemType               Item;   
        struct  QueueNodeTag  *Link;
     }QueueNode;

typedef  struct {                                 /* a queue is empty iff */
        QueueNode  *Front;                       /* its Front == NULL */
        QueueNode  *Rear;
     }Queue;

/* defined operations */

extern void InitializeQueue(Queue *Q);
  /* Initialize the queue Q to be the empty queue */

extern int Empty(Queue *Q);
  /* Returns TRUE == 1 if and only if the queue Q is empty */

extern int Full(Queue *Q);
  /* Returns TRUE == 1 if and only if the queue Q is full */

extern int Insert(ItemType R, Queue *Q);
  /* If Q is not full, insert a new item R onto the rear of Q */

extern int Remove(Queue *Q, ItemType *F);
  /* If Q is non-empty, remove the frontmost item of Q and put it in F */ 
```

该程序通过键入 mazeQ < sampleMaze 运行

样品迷宫

```
12 10
############
#..........#
#.#.######.#
#.#....#...#
#.###.*#.#.#
#...####.#.#
#.#.#..#.#.#
#.#.#.##.#.#
#o#......#.#
############ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:41:24.460

我不知道你为什么会得到它的段错误。我通过运行它得到了这个输出：

```
$ gcc *.c -o maze
$ ./maze <sample 
ļ##
ļ####
ļ######
ļ########
##########
############
###########.
#########...
#######.....
#####......# 
```

好的，经过一些清理后，我得到了以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include "QueueInterface.h"

int main(void)
{
    Queue Q;
    InitializeQueue(&Q);

    int row;
    int column;

    int x;
    int y;

    scanf("%d %d\n", &column, &row); //scan dimensions of maze

    char input[row][column+2];
    ItemType maze[row][column];
    for(x = 0; x < row; x++) {
            fgets(input[x],column+2,stdin);
    }

    for (x = 0; x < row; x++){
            for (y = 0; y < column; y++) {
                    maze[x][y].squareType = input[x][y];
                    maze[x][y].xCoordinate = x;
                    maze[x][y].yCoordinate = y;
                    maze[x][y].recordedSquare = 0;
            }
    }

    for(x = 0; x < row; x++){
            for(y = 0; y < column; y++) {
                    if (maze[x][y].squareType == 'o')
                      Insert(maze[x][y],&Q);  //INSERTED HERE
            }
    }
    for (x = 0; x < row; x++) {
            for (y = 0; y < column; y++) {
                    printf("%c", maze[x][y].squareType);
            }
    printf("\n");
    }

} 
```

它的输出：

```
############
#..........#
#.#.######.#
#.#....#...#
#.###.*#.#.#
#...####.#.#
#.#.#..#.#.#
#.#.#.##.#.#
#o#......#.#
############ 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:18:58.223

显然问题是我放置程序文件的目录有太多其他垃圾文件占用内存。我所要做的就是将我的程序文件移动到另一个目录。我想我吸取了教训，总是为新程序创建一个新目录。感谢大家的帮助。

# sql - 如何使同一项目的多次出现与第一次出现具有不同的值？

> ID：12879253
> 
> 赞同：2
> 
> 时间：2012-10-14T04:16:00.483
> 
> 标签：sql, sql-server-2008, tsql

我有一个看起来像这样的数据库：

```
label_id, scan_type, scan_cost 
```

还有一些看起来像这样的行：

```
001, A40, 70
001, A40, 70
002, A40, 85
003, A40, 85
003, A40, 85 
```

我需要生成一个如下所示的结果集：

```
001, A40, 70
001, A40, 0
002, A40, 85
003, A40, 85
003, A40, 0 
```

也就是说，任何多次出现相同`label_id`的`scan_cost`列需要设置为 0，但每个`label_id`值的第一次出现需要保持不变。

如果这`label_id`改变了任何东西，则它们不是顺序的。

是否有可能在 SQL 中实现这种行为？注意 SQL 方言是 T-SQL，Microsoft SQL Server 2008

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T04:36:22.517

此查询返回您要查找的内容：

```
SELECT
    label_id
,   scan_type
,   CASE WHEN row_number() OVER (PARTITION BY label_id ORDER BY scan_type)=1
        THEN scan_cost
        ELSE 0
    END
FROM test
ORDER BY label_id, scan_type 
```

该解决方案背后的想法是按对数据进行*分区*`label_id`，并使用[该`ROW_NUMBER`函数](http://msdn.microsoft.com/en-us/library/ms186734.aspx)来决定要保留哪些数据。

我`scan_type`在`ORDER BY`子句中使用了，这并不理想。如果您的实际表中有一个数据列更适合确定第一行的数据，例如时间戳列，您应该改用该其他列。外部的第二列`order by`需要与内部的列相同`order by`。

这是[sqlfiddle](http://sqlfiddle.com/#!3/494fa/6)上此查询的链接。

# javascript - 仅在锚点 onclick 之后的 iframe onload 事件

> ID：12879254
> 
> 赞同：0
> 
> 时间：2012-10-14T04:16:18.230
> 
> 标签：javascript, html, iframe

示例代码：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
</head>
<body>
<iframe name="iframe_a" onload="alert('Thanks for the visit!');"></iframe>
<a href="http://www.example.com/" target="iframe_a">Go!</a>
</body>
</html> 
```

我希望在单击链接后以及 iframe 完成加载后看到警报消息。但现在它也出现在初始页面加载中。我怎样才能实现它以便它在 IE8+ 中工作？

刚刚想出了一个简单的解决方案：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
</head>
<body>
<iframe id="iframe_a" name="iframe_a" onload="if(this.className=='active'){alert('Thanks for the visit!');};"></iframe>
<a href="http://www.example.com/" target="iframe_a" onclick="document.getElementById('iframe_a').className='active';">Go!</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:24:59.410

当 iframe 在 DOM 中时，没有（理智的）方法可以防止加载 iframe。在加载之前将 onload 添加到 iframe 应该可以解决您的问题：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head>
<body>
<iframe id="myIframe" name="iframe_a"></iframe>
<a href="#" onclick="$('#myIframe').load(function() {alert('Thanks for the visit!');}); $('#myIframe').attr('src','http://www.example.com/')">Go!</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:31:00.127

```
<!DOCTYPE html>
<html>
    <head>
        <title>Title</title>
        <script type="text/javascript">
            window.addEvent = (function() {
                var evnt = window.addEventListener ? "addEventListener" : "attachEvent",
                    pre = evnt === "attachEvent" ? "on" : "";

                return function (ele, evnt, func, bub) {
                    ele[evnt](pre + evnt, func, bub);
                }
            }());
            addEvent(window, "load", function() {
                addEvent(document.getElementById("myIframe"), "load", function() {
                    alert("Loaded!");
                });
            });
        </script>
    </head>
    <body>
        <iframe id="myIframe" name="iframe_a"></iframe>
        <a href="..." target="iframe_a">GO!</a>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T04:33:20.013

### 使用这种方式，在 IE 8 中工作：

```
<iframe id="myIframe" name="iframe_a"></iframe>
<a href="http://www.example.com/" target="iframe_a" onclick="alert('Thanks for the visit!');">Go!</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T05:17:51.040

这个很有趣，但它可以满足您的需求（在纯 JavaScript 中哈哈）：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<script>
var a = 0;
function doIt() {
if(++a == 1) return;
alert('Thanks for the visit!');
}
</script>
</head>
<body>
<iframe name="iframe_a" onload="doIt()"></iframe>
<a href="http://www.example.com/" target="iframe_a">Go!</a>
</body>
</html> 
```

# exception - Netty 3.5.8-Final - FrameDecoder 帮助

> ID：12879255
> 
> 赞同：0
> 
> 时间：2012-10-14T04:16:42.053
> 
> 标签：exception, netty, decoder

我的帧解码器有以下代码：

```
protected Object decode(ChannelHandlerContext channelHandlerContext,
        Channel channel, ChannelBuffer channelBuffer) throws Exception {

    //Header 1 + 4 length bytes
    if (channelBuffer.readableBytes() < 5) {
        return null;
    }
    System.out.println(channelBuffer.readerIndex());

    //mark the reader index
    channelBuffer.markReaderIndex();

    //extract the length bytes and convert to an int value 
    //**note: length value of the message is a decimal not hex
    StringBuilder lengthBuilder = new StringBuilder("");
    for (int ctr = 1; ctr < 5; ctr += 1) {
        lengthBuilder.append(String.format("%02x",
                channelBuffer.getByte(ctr)));
    }
    int length = Integer.parseInt(hexToASCII(lengthBuilder.toString()));
    System.out.println("This is the length: " + length);
    System.out.println("reader index: " + channelBuffer.readerIndex());
            channelBuffer.readerIndex(4);

    //get the remaining bytes
    if (channelBuffer.readableBytes() <= length) {
        channelBuffer.resetReaderIndex();
        return null;
    }

    String s = "";
    for (int ctr = 0; ctr < length + 5; ctr += 1) {
        s += (char) channelBuffer.getByte(ctr);
    }

    return s;
} 
```

一切顺利，直到上`int length = Integer.parseInt(hexToASCII(lengthBuilder.toString()));`线。在那一行之后，解码器仍然可以读取剩余的字节，但它现在使用实际消息作为长度字段，生成解析异常错误。

说，我有一条消息`B0005EHELLO`，其中`[B is the header] [0005 - actual message length] [E - header 2] [HELLO - actual message]`..将长度字段解析为整数值后，解码器使用实际消息的前四个字母`HELL`来解析长度字段，并产生异常。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:35:41.723

通过将 readerIndex 从 4 更改为 5 来修复。

`channelBuffer.readerIndex(4);`

我还在返回结果之前添加了一个读取器索引重置，以便它可以读取整个消息而不仅仅是实际消息:)

```
channelBuffer.readerIndex(0);
String s = "";
for (int ctr = 0; ctr < length + 5; ctr += 1) {
    s += (char) channelBuffer.getByte(ctr);
} 
```

# python - 为什么 Django ORM 允许我在创建对象时省略 NOT NULL 字段的参数？

> ID：12879256
> 
> 赞同：7
> 
> 时间：2012-10-14T04:16:44.837
> 
> 标签：python, django, postgresql, django-models

愚蠢的提问时间。即使我省略了定义为 NOT NULL 的列并且我不明白为什么，我似乎也能够为 Django 模型创建一个对象。这是我的模型：

```
class Movie(models.Model):
    name = models.CharField(max_length=256)
    length_minutes = models.IntegerField()
    rating = models.CharField(max_length=2)

    class Meta:
        db_table = 'movies' 
```

当我运行`python manage.py`sql 时，我看到：

```
BEGIN;
CREATE TABLE "movies" (
  "id" serial NOT NULL PRIMARY KEY,
  "name" varchar(256) NOT NULL,
  "length_minutes" integer NOT NULL,
  "rating" varchar(2) NOT NULL
);
COMMIT; 
```

此外，如果我`\d movies`从运行命令`psql`，我可以看到所有列都被指定为`NOT NULL`。

但这是我不明白的。当我运行 Python shell 时，我可以发出以下命令，并且将创建一个带有空“名称”列的新行：

```
Movie.objects.create(length_minutes=120, rating='PG') 
```

但是，如果我发出（我认为是）等效的 SQL 命令：

```
INSERT INTO movies(length_minutes, rating) VALUES(120, 'PG'); 
```

......我得到了我期望的错误：“错误：空值......违反了非空约束。”

为什么 Django 的 ORM 允许我创建一个缺少`NOT NULL`CharField 列参数的对象？它是否假设我正在使用模型验证器？如果是这样，它似乎是一个非常愚蠢和信任的 ORM。

我正在使用 Python 2.7.1、Django 1.4 和 PostgreSQL 9.1.4。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T22:25:00.007

经过大量的在线研究和实验，我发现我上面描述的行为是正常的 Django 行为。显然，Django 默认不验证模型。此外，CharField 的默认值是空字符串。为了确保在我省略指定 NOT NULL 的 CharField 参数时 Django 引发预期的 IntegrityError，我需要在签名声明中添加“default=None”：

```
name = models.CharField(max_length=256, default=None) 
```

我可以因回答自己的问题而获得荣誉吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T05:18:09.320

空字符串`''`不是`NULL`，它是空字符串。`''`是一个完全有效的非空值。如果`''`不是您的应用程序可接受的值，请添加`CHECK`如下约束：

```
ALTER TABLE movies
ADD CONSTRAINT movie_name_length 
CHECK (length(name) > 0); 
```

看起来 Django 或您的应用程序假设当您不指定名称时，您需要一个空名称`''`，而不是`NULL`. 请参阅[Django 文档`Field.null`](https://docs.djangoproject.com/en/dev/ref/models/fields/)，这不是我所说的 ... clear ... 但似乎表明默认情况下*没有任何值*被视为`''`。

# android - Android TCP 服务器广播

> ID：12879264
> 
> 赞同：5
> 
> 时间：2012-10-14T04:18:52.230
> 
> 标签：android, tcp, broadcast

我正在开发一个使用 TCP 进行设备连接的 Android 应用程序。问题是我是套接字编程的新手。我已经成功制作了服务器和客户端代码。每个客户端都可以连接到服务器，服务器可以回复客户端。但我似乎无法让服务器同时向所有连接的客户端发送消息。使服务器向客户端广播消息的步骤是什么？这是服务器代码：

```
ServerSocket server = null;
try {
    server = new ServerSocket(9092); // start listening on the port
} catch (IOException e) {
    Log.d("btnCreate onClick", "Could not listen on port: 9092");
}
Socket client = null;
while(true) {
    try {
        client = server.accept();
    } catch (IOException e) {
        Log.d("btnCreate onClick", "Accept Failed");
    }
    //start a new thread to handle this client
    Thread t = new Thread(new ClientConn(client));
    t.start();
} 
```

和服务器线程：

```
class ClientConn implements Runnable {
    private Socket client;

    ClientConn(Socket client) {
        this.client = client;
    }

    public void run() {
        BufferedReader in = null;
        PrintWriter out = null;
        try {
            /* obtain an input stream to this client ... */
            in = new BufferedReader(new InputStreamReader(
                        client.getInputStream()));
            /* ... and an output stream to the same client */
            out = new PrintWriter(client.getOutputStream(), true);
        } catch (IOException e) {
            e.printStackTrace();
            return;
        }

        String msg;
        try {
            while ((msg = in.readLine()) != null) {
                Log.d("ClientConn", "Client says: " + msg);
                out.println(msg);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T04:26:42.547

TCP 是一种点对点连接协议。这意味着当您在套接字上发送消息时，它只会发送给*一个*接收者。其他 IP 协议（​​例如 UDP）确实具有“广播”模式，其中一个数据包可以发送到多个接收者，但 TCP 没有这种情况。

To have your server send the same message to all clients, the server would have to send one message on each socket for each client.

# android - 在实际设备上使用 ActionBarSherlock 时应用程序强制关闭，但适用于模拟器

> ID：12879266
> 
> 赞同：0
> 
> 时间：2012-10-14T04:19:19.537
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在开发一个仅在某些活动中使用 ActionBarSherlock 和 SherlockFragments 的应用程序。通过 Eclipse 在 Android 模拟器上测试应用程序时，应用程序运行良好。但是，在实际手机上运行签名和导出的应用程序时，只有不使用 Sherlock 的活动才能工作。每当我启动使用 Sherlock 的活动时，应用程序强制关闭。我在 Android Gingerbread 和 ICS 设备上对此进行了测试。该应用的最低 SDK 级别为 7 (2.2)，目标 SDK 级别为 15 (4.0.3)。任何解释或解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:45:41.563

我终于弄明白了。使用 Proguard 时，必须将以下行添加到 Proguard 配置文件以确保 ActionBarSherlock 库的功能：

```
-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

-keepattributes *Annotation* 
```

# validation - CodeIgniter 如何获取验证失败的所有字段名称

> ID：12879267
> 
> 赞同：3
> 
> 时间：2012-10-14T04:19:35.327
> 
> 标签：validation, codeigniter-2

我想找到验证失败的所有字段名称。

我想在验证失败的字段上应用错误类。我知道如何显示与该字段相关的错误消息。

但是有些我想知道字段名称，以便我可以检查列表中是否存在天气字段并将错误类添加到该字段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T19:32:02.843

感谢**让**我开始。但是我需要添加这个，以防其他人在使用pit的答案时遇到同样的问题。在 CI 2.0 中，我尝试过并得到：

```
Call to undefined method MY_Form_validation::error_array() 
```

由于我没有故意尝试从自定义表单验证中调用任何内容，因此我查看了 /system/libraries/Form_validation.php。至少在 2.0 中，没有函数 error_array()。

所以要修复它，如果您还没有，请创建一个文件 /application/libraries/MY_Form_validation.php （区分大小写）并输入以下代码：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class MY_Form_validation extends CI_Form_validation {

    function __construct(){
        parent::__construct();
    }

    function error_array(){
        return $this->_error_array; 
    }
}
?> 
```

然后做`print_r( $this->form_validation->error_array() )`会奏效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T22:32:30.213

这取决于您将如何处理结果，但您可以使用以下函数来获取错误字段：

```
print_r( $this->form_validation->error_array() ) 
```

如果您需要更多，请查看 /system/libraries/form_validation.php 从那里您可以找到所需的任何内容，包括与 lib 相关的使用/可用的函数和变量名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T16:45:32.217

要设置您自己的自定义消息，您可以编辑该文件，或使用以下函数：

`$this->form_validation->set_message('rule', 'Error Message');`

其中 rule 对应于特定规则的名称，而 Error Message 是您希望显示的文本。

如果您包含`%s`在错误字符串中，它将被您在设置规则时用于字段的“人类”名称替换。

```
$this->form_validation->set_rules(array('field' => 'name','label' => 'Full Name','rules' => 'required'));
$this->form_validation->set_message('required', '%s Must be fill!');

echo validation_errors() //Full name Must be fill! 
```

# delphi - 如何检测 Free Pascal/Lazarus 中的内存泄漏？

> ID：12879270
> 
> 赞同：12
> 
> 时间：2012-10-14T04:20:25.120
> 
> 标签：delphi, memory-leaks, freepascal, lazarus

在[Delphi](http://en.wikipedia.org/wiki/Embarcadero_Delphi)中，我通常会编写一个简单的泄漏测试，如下所示：

```
program MemLeak;

{$APPTYPE CONSOLE}

uses
    SysUtils;

procedure Leak;
begin
    { Put leaking code here. }
end;

begin
    ReportMemoryLeaksOnShutdown:= True;
    try
        Leak;
    except
        on E: Exception do
            Writeln(E.ClassName, ': ', E.Message);
    end;
end. 
```

如何检测[Free Pascal](http://en.wikipedia.org/wiki/Free_Pascal) / [Lazarus](http://en.wikipedia.org/wiki/Lazarus_%28IDE%29)中的内存泄漏？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-14T05:51:45.460

Free Pascal 也有类似的功能。在程序结束时，调用`DumpHeap`或启用 Lazarus 项目设置中的 heaptrc 选项。可以使用`SetHeapTraceOutput`方法设置输出文件。两种方法都在`heaptrc`必须是项目中第一个的单元中（从一开始就捕获分配）。

**更多信息**：

*   [http://www.freepascal.org/docs-html/rtl/heaptrc/usage.html](http://www.freepascal.org/docs-html/rtl/heaptrc/usage.html)
*   [http://www.freepascal.org/docs-html/rtl/heaptrc/environment.html](http://www.freepascal.org/docs-html/rtl/heaptrc/environment.html)

**泄漏可视化**：Lazarus 包“LeakView”在树视图中显示堆跟踪输出文件的内容。它包含在默认安装中，并在 IDE 重建后可用。（尚未经过我测试）

```
 // By default information is written to standard output, 
  // this function allows you to redirect the information to a file
  SetHeapTraceOutput('heaptrace.log');

  // normally the heap dump will be written automatically at the end,
  // but can also be written on demand any time   
  DumpHeap; 
```

输出如下所示：

```
C:\path\to\Demo.exe 
Heap dump by heaptrc unit
244 memory blocks allocated : 8305/9080
241 memory blocks freed     : 8237/9000
3 unfreed memory blocks : 68
True heap size : 458752
True free heap : 458288
Should be : 458480
Call trace for block $0010CE58 size 28
  $0044ACCB  TIDTHREADSAFE__CREATE,  line 226 of C:/path/to/indy-10.5.8.tiburon/Lib/Core/IdThreadSafe.pas
  $00444245  IDTHREAD_init,  line 641 of C:/path/to/indy-10.5.8.tiburon/Lib/Core/IdThread.pas
  $00409D74
  $0040E1A1
  ... 
```

（使用 Free Pascal 2.6.0 测试）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T12:36:38.620

虽然 mjn 是完全正确的，而且他所说的是首选解决方案，但在 *nix 上，也可以使用单元“cmem”（主程序中的第一个单元）将内存管理器切换到 libc 的 malloc，并使用其他调试工具。

如果用尽了其他选项，那么这样做并使用 valgrind 可能是值得的。请注意，要使用 valgrind，您需要打开 -gv。

# jquery - jquery ajaxStop 事件在 IE9 中不起作用

> ID：12879272
> 
> 赞同：1
> 
> 时间：2012-10-14T04:20:35.713
> 
> 标签：jquery, ajax, internet-explorer-9

我们试图在多个异步 ajax 调用完成后隐藏加载器图标。因此我们需要使用 ajaxStop 事件。但是这个事件在 ie9（windows 手机）中没有被触发。但是，ajaxStart 有效。我们只在 Windows 手机的 ie9 中遇到这个问题。它适用于桌面版本的 IE9 和 IE8。我们正在使用 jquery 1.7 版。

以下是代码片段 -

```
$(document).ajaxStop( function(){
    $('#loader').hide();
}); 
```

我们有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:06:43.063

检查 [这个](http://jsfiddle.net/zbF9m/6/)，但你的[方法](http://jsfiddle.net/bsKPj/10/)也适用于 IE 9。

```
//displays progress bar
$('.progress').ajaxStart(function () {
    $(this).show();
}).ajaxStop(function () {
    $(this).hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:26:38.530

您必须在 IE 上设置 async:true..bocz 无法处理异步调用。

检查下面的代码......在这里你必须设置“async：true”......所以，你的代码应该在下面。

```
var selectRows = $('#rowed3').getGridParam('selarrrow');
$.each(selectRows,function (index,id) {
  $.ajax({                            
          url:'addSign',
          success: function (result) {                                                 
        $("#progressbar").progressbar('option','value',currPercent);
         },
          async:true,
          data:{
          'id':id,
          'details':sign
               },
       type:'post'
}); 
```

# sockets - Python 3 中的 Websocket 实现

> ID：12879274
> 
> 赞同：7
> 
> 时间：2012-10-14T04:21:21.733
> 
> 标签：sockets, python-3.x, websocket, mod-pywebsocket

尝试为 Python3 支持的应用程序创建 Web 前端。该应用程序将需要双向流，这听起来像是研究 websocket 的好机会。

我的第一个倾向是使用已经存在的东西，来自*mod-pywebsocket*的示例应用程序被证明是有价值的。不幸的是，他们的 API 似乎并不容易扩展，它是 Python2。

环顾博客圈，许多人已经为早期版本的 websocket 协议编写了​​自己的 websocket 服务器，大多数人没有实现安全密钥哈希，所以不工作。

阅读[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)，我决定自己尝试一下，并提出以下建议：

```
#!/usr/bin/env python3

"""
A partial implementation of RFC 6455
http://tools.ietf.org/pdf/rfc6455.pdf
Brian Thorne 2012
"""

import socket
import threading
import time
import base64
import hashlib

def calculate_websocket_hash(key):
    magic_websocket_string = b"258EAFA5-E914-47DA-95CA-C5AB0DC85B11"
    result_string = key + magic_websocket_string
    sha1_digest = hashlib.sha1(result_string).digest()
    response_data = base64.encodestring(sha1_digest)
    response_string = response_data.decode('utf8')
    return response_string

def is_bit_set(int_type, offset):
    mask = 1 << offset
    return not 0 == (int_type & mask)

def set_bit(int_type, offset):
    return int_type | (1 << offset)

def bytes_to_int(data):
    # note big-endian is the standard network byte order
    return int.from_bytes(data, byteorder='big')

def pack(data):
    """pack bytes for sending to client"""
    frame_head = bytearray(2)

    # set final fragment
    frame_head[0] = set_bit(frame_head[0], 7)

    # set opcode 1 = text
    frame_head[0] = set_bit(frame_head[0], 0)

    # payload length
    assert len(data) < 126, "haven't implemented that yet"
    frame_head[1] = len(data)

    # add data
    frame = frame_head + data.encode('utf-8')
    print(list(hex(b) for b in frame))
    return frame

def receive(s):
    """receive data from client"""

    # read the first two bytes
    frame_head = s.recv(2)

    # very first bit indicates if this is the final fragment
    print("final fragment: ", is_bit_set(frame_head[0], 7))

    # bits 4-7 are the opcode (0x01 -> text)
    print("opcode: ", frame_head[0] & 0x0f)

    # mask bit, from client will ALWAYS be 1
    assert is_bit_set(frame_head[1], 7)

    # length of payload
    # 7 bits, or 7 bits + 16 bits, or 7 bits + 64 bits
    payload_length = frame_head[1] & 0x7F
    if payload_length == 126:
        raw = s.recv(2)
        payload_length = bytes_to_int(raw)
    elif payload_length == 127:
        raw = s.recv(8)
        payload_length = bytes_to_int(raw)
    print('Payload is {} bytes'.format(payload_length))

    """masking key
    All frames sent from the client to the server are masked by a
    32-bit nounce value that is contained within the frame
    """
    masking_key = s.recv(4)
    print("mask: ", masking_key, bytes_to_int(masking_key))

    # finally get the payload data:
    masked_data_in = s.recv(payload_length)
    data = bytearray(payload_length)

    # The ith byte is the XOR of byte i of the data with
    # masking_key[i % 4]
    for i, b in enumerate(masked_data_in):
        data[i] = b ^ masking_key[i%4]

    return data

def handle(s):
    client_request = s.recv(4096)

    # get to the key
    for line in client_request.splitlines():
        if b'Sec-WebSocket-Key:' in line:
            key = line.split(b': ')[1]
            break
    response_string = calculate_websocket_hash(key)

    header = '''HTTP/1.1 101 Switching Protocols\r
Upgrade: websocket\r
Connection: Upgrade\r
Sec-WebSocket-Accept: {}\r
\r
'''.format(response_string)
    s.send(header.encode())

    # this works
    print(receive(s))

    # this doesn't
    s.send(pack('Hello'))

    s.close()

s = socket.socket( socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind(('', 9876))
s.listen(1)

while True:
    t,_ = s.accept()
    threading.Thread(target=handle, args = (t,)).start() 
```

使用这个基本测试页面（与 mod-pywebsocket 一起使用）：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Web Socket Example</title>
    <meta charset="UTF-8">
</head>
<body>
    <div id="serveroutput"></div>
    <form id="form">
        <input type="text" value="Hello World!" id="msg" />
        <input type="submit" value="Send" onclick="sendMsg()" />
    </form>
<script>
    var form = document.getElementById('form');
    var msg = document.getElementById('msg');
    var output = document.getElementById('serveroutput');
    var s = new WebSocket("ws://"+window.location.hostname+":9876");
    s.onopen = function(e) {
        console.log("opened");
        out('Connected.');
    }
    s.onclose = function(e) {
        console.log("closed");
        out('Connection closed.');
    }
    s.onmessage = function(e) {
        console.log("got: " + e.data);
        out(e.data);
    }
    form.onsubmit = function(e) {
        e.preventDefault();
        msg.value = '';
        window.scrollTop = window.scrollHeight;
    }
    function sendMsg() {
        s.send(msg.value);
    }
    function out(text) {
        var el = document.createElement('p');
        el.innerHTML = text;
        output.appendChild(el);
    }
    msg.focus();
</script>
</body>
</html> 
```

这会接收数据并正确对其进行屏蔽，但我无法使传输路径正常工作。

作为向套接字写入“Hello”的测试，上面的程序计算要写入套接字的字节数为：

```
['0x81', '0x5', '0x48', '0x65', '0x6c', '0x6c', '0x6f'] 
```

与RFC [5.7 节](https://www.rfc-editor.org/rfc/rfc6455#section-5.7)中给出的十六进制值匹配。不幸的是，该框架从未出现在 Chrome 的开发者工具中。

知道我错过了什么吗？还是当前工作的 Python3 websocket 示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T20:22:13.503

当我尝试从 Lion 上的 Safari 6.0.1 与您的 python 代码交谈时，我得到

```
Unexpected LF in Value at ... 
```

在 Javascript 控制台中。我也`IndexError`从 Python 代码中得到一个异常。

当我在 Lion 上使用 Chrome 版本 24.0.1290.1 dev 与您的 python 代码交谈时，我没有收到任何 Javascript 错误。在您的 javascript中调用`onopen()`and`onclose()`方法，但不调用`onmessage()`. python 代码不会引发任何异常，并且似乎已接收消息并发送了它的响应，即您所看到的行为。

由于 Safari 不喜欢标题中的尾随 LF，我尝试将其删除，即

```
header = '''HTTP/1.1 101 Switching Protocols\r
Upgrade: websocket\r
Connection: Upgrade\r
Sec-WebSocket-Accept: {}\r
'''.format(response_string) 
```

当我进行此更改时，Chrome 能够看到您的响应消息，即

```
got: Hello 
```

出现在 javascript 控制台中。

Safari 还是不行。现在，当我尝试发送消息时，它提出了一个不同的问题。

```
websocket.html:36 INVALID_STATE_ERR: DOM Exception 11: An attempt was made to use an object that is not, or is no longer, usable. 
```

没有一个 javascript websocket 事件处理程序会触发，我仍然看到`IndexError`来自 python 的异常。

综上所述。由于您的标头响应中有一个额外的 LF，您的 Python 代码无法与 Chrome 一起使用。还有其他事情发生，因为适用于 Chrome 的代码不适用于 Safari。

# 更新

我已经解决了根本问题，现在该示例在 Safari 和 Chrome 中运行。

`base64.encodestring()``\n`总是在它的回报中添加一个尾随。这就是 Safari 抱怨的 LF 的来源。

在 Safari 和 Chrome 上调用和使用原始标头模板`.strip()`的返回值可以正常工作。`calculate_websocket_hash`

# actionscript-3 - 如何不使用多个条件语句减慢 AS3 函数，然后不断检查？

> ID：12879275
> 
> 赞同：0
> 
> 时间：2012-10-14T04:21:30.233
> 
> 标签：actionscript-3, flash

几个月前制作了这个 2D 水演示（[http://nauful.com/Qasim/Pani.html](http://nauful.com/Qasim/Pani.html "http://nauful.com/Qasim/Pani.html")），它有一个名为 waveHandler 的核心渲染函数，它经常被调用（ENTER_FRAME）。

这里有一堆图像处理置换贴图/卷积的东西，但这并不重要。我想修改这个 waveHandler 函数中发生的事情，但我不想在这里有一个不断运行的 IF 语句。例如，这种虚假的后期处理绽放/反射率的东西往往会在旧机器上陷入困境（按〜显示FPS计数器），我希望有一个启用/禁用它的选项，而无需IF 语句不断检查一些布尔变量的值。

在我的脑海中，一种非常不优雅和冗长的方法是让 waveHandler 的多个版本处理这些选项的排列，然后删除一个版本的侦听器并启用另一个版本。但是我该如何正确地做到这一点？

另外，是否可以让变量“指向”函数？因此，如果 var asdf:Function 一次指向一个函数，然后将 asdf 的值更改为指向另一个函数，则主函数可以调用 asdf 指向的任何函数，而无需不断检查条件语句。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:58:05.057

后者当然是可能的，但您不能将该变量放入 addEventListener 调用中。但是，你可以这样做：

```
function onEnterFrame(e:Event):void {
    if (asdf) asdf();
} 
```

并将您的 asdf 变量设置为指向正确的函数。但是请注意，您不应该对参数集中不统一的函数使用这种方法，比如一个函数有一个 int 参数，另一个有零个参数 - 这会引发异常。

但是鉴于您的条件，我会使用布尔 if 语句，因为检查一次布尔值甚至比通过变量调用函数更便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:02:09.010

最快的将是您建议的那个：对于每个选项排列都有一个 waveHandler 。启用选项时最快，禁用选项时最快。

您自己建议的另一种方法：引用函数并更改引用以启用或禁用选项。我们可以通过将引用更改为指向一个空函数来“禁用”。像这样的东西：

```
package {
    import flash.display.Sprite;
    import flash.utils.getTimer;

    public class Main extends Sprite {
        private var call1: Function;
        private var call2: Function;
        private var call3: Function;

        public function Main() : void {
            var doOption1 : Boolean = true;
            var doOption2 : Boolean = false;
            var doOption3 : Boolean = true;

            call1 = doOption1 ? option1 : empty;
            call2 = doOption2 ? option2 : empty;
            call3 = doOption3 ? option3 : empty;

            onEnterFrame();
        }

        private function onEnterFrame():void {
            call1();
            call2();
            call3();
        }

        private function option1():void {
            trace("option1");
        }

        private function option2():void {
            trace("option2");
        }

        private function option3():void {
            trace("option3");
        }

        private function empty():void {
        }
    }
} 
```

启用选项时，这不会给您带来任何性能损失，但是与第一个解决方案相比，禁用选项时您会受到惩罚，因为您正在调用一个空函数，因此您得到的开销很小。

我知道整个问题可能更像是一种学术类型，而且您已经知道它不会真正对性能产生任何明显的影响。

但是，从性能的角度来看，您似乎认为 if 情况比实际情况更糟。我会坚持使用它们（因为它们会产生非常可读的代码）并专注于优化代码的某些部分，以便产生**可**衡量的影响。

我只是做了一个简单的测试，让您了解一些布尔检查是多么微不足道。我有两个不同的 onEnterFrame 函数。两者都调用了一个空函数十次。第一个是“普通的”（只有十个连续的电话）。另一个在每次调用该方法之前检查标志是否为真。

在我相当标准的笔记本电脑上，第一个结果是这样的：

普通：3133 毫秒
使用 if 检查：3167 毫秒
1000000 次 onEnterFrame 调用的
差异：34 毫秒每次 onEnterFrame 调用的差异：0.000034 毫秒

差异是如此之小，以至于即使您进行一百万次调用也很难衡量（在第一次运行后的某些测试运行中，**带有**if 检查的版本实际上更快）。

这只是一种冗长的说法，当涉及到优化时，你真的应该采取更科学的方法，否则你最终会花费大量时间尝试进行优化，而最终只会让代码更难阅读和维护速度几乎没有提高。在这里做过:-)

最后，如果您想自己运行它，这里是测试：

```
package {
    import flash.display.Sprite;
    import flash.utils.getTimer;

    public class Main extends Sprite {
        private var m_flag: Boolean = true;

        public function Main() : void {
            var callCount : int = 1000000, time1 : int, time2 : int, i : int;

            i = callCount;
            time1 = getTimer();
            while (i-- > 0) {
                onEnterFrame1();
            }
            time1 = (getTimer() - time1);

            i = callCount;
            time2 = getTimer();
            while (i-- > 0) {
                onEnterFrame2();
            }
            time2 = (getTimer() - time2);

            trace("Plain: " + time1 + " ms");
            trace("With if checks: " + time2 + " ms");
            trace("Difference for " + callCount + " onEnterFrame calls: " + (time2 - time1) + " ms");
            trace("Difference per onEnterFrame call:  " + ((time2 - time1) / callCount) + " ms");
        }

        private function onEnterFrame1():void {
            emptyMethod();
            emptyMethod();
            emptyMethod();
            emptyMethod();
            emptyMethod();
            emptyMethod();
            emptyMethod();
            emptyMethod();
            emptyMethod();
            emptyMethod();
        }

        private function onEnterFrame2():void {
            if (m_flag) emptyMethod();
            if (m_flag) emptyMethod();
            if (m_flag) emptyMethod();
            if (m_flag) emptyMethod();
            if (m_flag) emptyMethod();
            if (m_flag) emptyMethod();
            if (m_flag) emptyMethod();
            if (m_flag) emptyMethod();
            if (m_flag) emptyMethod();
            if (m_flag) emptyMethod();
        }

        private function emptyMethod():void {
        }
    }
} 
```

# ruby-on-rails - 尝试包含 jQuery gem 时 Sprockets::FileNotFound

> ID：12879276
> 
> 赞同：3
> 
> 时间：2012-10-14T04:21:50.123
> 
> 标签：ruby-on-rails, asset-pipeline, tablesorter, assets, sprockets

我正在尝试使用[https://github.com/linjunpop/jquery-tablesorter-rails](https://github.com/linjunpop/jquery-tablesorter-rails)对我的表格进行排序。我在尝试包含 CSS 时遇到了问题：

```
 /*
 * = require jquery-tablesorter/blue
 */ 
```

错误信息：

```
Sprockets::FileNotFound: couldn't find file 'jquery-tablesorter/blue' 
```

我确实看到配置路径中加载了 Gem：

```
1.9.3p194 :008 > Rails.application.config.assets.paths.each { |x| puts x }
.rvm/gems/ruby-1.9.3-p194/gems/jquery-tablesorter-1.0.5/vendor/assets/images
.rvm/gems/ruby-1.9.3-p194/gems/jquery-tablesorter-1.0.5/vendor/assets/javascripts
.rvm/gems/ruby-1.9.3-p194/gems/jquery-tablesorter-1.0.5/vendor/assets/stylesheets 
```

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:49:13.003

无法重现。通常当这种事情发生在我身上时，是因为在捆绑新的 gem 后忘记重新启动开发服务器。Sprockets 尝试构建或解析一组新资产，但加载的环境与之前相同，因此无法找到额外的资产。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-25T10:09:02.423

正确的路径是：

```
*= require jquery-tablesorter/theme.blue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:18:27.203

我将您需要的路径[视为目录](https://github.com/linjunpop/jquery-tablesorter-rails/tree/master/vendor/assets/stylesheets/jquery-tablesorter/blue)；错误消息似乎表明它无法找到文件。你有没有尝试过

```
*= require jquery-tablesorter/blue/* 
```

反而？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T05:17:04.183

我在 2.4+ 版本中更新了 Tablesorter 以使用主题，因此蓝色主题文件已被重命名并移动到不同的目录。

我对 Ruby 或那个 repo 了解不多，但您可能想要获取[Tablesorter v2.3.11](https://github.com/Mottie/tablesorter/tags)，直到该 repo 被更新（请参阅该 repo 中的[这个问题](https://github.com/linjunpop/jquery-tablesorter-rails/issues/5)）。

# mongodb - 我怎样才能在 mongodb 中实现这一点？

> ID：12879281
> 
> 赞同：0
> 
> 时间：2012-10-14T04:22:19.673
> 
> 标签：mongodb, pymongo

当我有一个集合时，例如：

```
{
   "_id":"123",
   "xxx":{"yyy":1,"zzz":2}
} 
```

我可以使用这个：

```
db.collection.update({"_id":"123"},{"set":{"xxx.yyy":3}}) 
```

所以结果是：

```
{
   "_id":"123",
   "xxx":{"yyy":3,"zzz":2}
} 
```

但是如果我想将“yyy”修改为“kkk”，比如：

```
{
   "_id":"123",
   "xxx":{"kkk":3,"zzz":2}
} 
```

谁能告诉我如何在 mongodb 中实现这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:45:53.747

使用[`$rename`](http://docs.mongodb.org/manual/reference/operator/rename/)运算符重命名字段：

```
db.collection.update({"_id": "123"}, {"$rename": {"xxx.yyy": "xxx.kkk"}}) 
```

# sql - 哈希冲突导致死锁？

> ID：12879282
> 
> 赞同：3
> 
> 时间：2012-10-14T04:23:11.823
> 
> 标签：sql, sql-server, database, deadlock, database-deadlocks

我有一个死锁，它发生在同一个聚集索引上的排他锁，由两个不同的进程 ID。数据库处于 RCSI 模式。我有两个问题。

1）除了两个UPDATE语句重叠的行之外，这可能是由哈希冲突引起的吗？

2) 在下面的跟踪 XML 文件中，查询上有参数。我应该使用 SQL Profiler 跟踪哪些事件以获取参数值？

感谢帮助。谢谢

跟踪 XML 文件

```
<deadlock-list>
 <deadlock victim="process8ad948">
  <process-list>
   <process id="process8ad948" taskpriority="0" logused="164520" waitresource="KEY: 7:72057601661599744 (01c1926aca97)" waittime="2833" ownerId="7491036" transactionname="user_transaction" lasttranstarted="2012-10-08T13:16:03.067" XDES="0x6b561b950" lockMode="U" schedulerid="4" kpid="2476" status="suspended" spid="94" sbid="0" ecid="0" priority="0" trancount="2" lastbatchstarted="2012-10-08T13:16:57.753" lastbatchcompleted="2012-10-08T13:16:57.750" clientapp="PeopleSoft" hostname="STGAAMY-PPSAPP" hostpid="31772" loginname="HRTRNADM" isolationlevel="read committed (2)" xactid="7491036" currentdb="7" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
    <executionStack>
     <frame procname="adhoc" line="1" stmtstart="440" sqlhandle="0x020000007b8741293b8e4d6542633962bc48489d3946a5d1">
UPDATE PS_GP_NEW_RTO_WRK SET ORIG_CAL_RUN_ID = (SELECT DISTINCT C.ORIG_CAL_RUN_ID FROM PS_GP_PYE_PRC_STAT B ,PS_GP_OLD_RTO_WRK C WHERE C.EMPLID BETWEEN @P1 AND @P2 AND C.CAL_RUN_ID=@P3 AND C.EMPLID = PS_GP_NEW_RTO_WRK.EMPLID AND C.CAL_RUN_ID = PS_GP_NEW_RTO_WRK.CAL_RUN_ID AND C.EMPL_RCD = PS_GP_NEW_RTO_WRK.EMPL_RCD AND C.CAL_ID = PS_GP_NEW_RTO_WRK.CAL_ID AND C.GP_PAYGROUP = PS_GP_NEW_RTO_WRK.GP_PAYGROUP AND B.CAL_ID= C.CAL_ID AND B.GP_PAYGROUP= C.GP_PAYGROUP AND B.EMPLID=C.EMPLID AND B.EMPL_RCD=C.EMPL_RCD AND B.ORIG_CAL_RUN_ID=C.ORIG_CAL_RUN_ID AND C.SEL_ACTION IN (N&apos;R&apos;,N&apos;Z&apos;) AND B.SEL_ACTION=N&apos;A&apos;) WHERE EMPLID BETWEEN @P4 AND @P5 AND CAL_RUN_ID=@P6 AND (N&apos;N&apos;=@P7 OR EMPLID IN (SELECT EMPLID FROM PS_GP_GRP_LIST_RUN WHERE RUN_CNTL_ID=@P8 AND OPRID=@P9) ) AND EXISTS (SELECT B.ORIG_CAL_RUN_ID FROM PS_GP_PYE_PRC_STAT B ,PS_GP_OLD_RTO_WRK C WHERE C.EMPLID BETWEEN @P10 AND @P11 AND C.CAL_RUN_ID=@P12 AND C.EMPLID = PS_GP_NEW_RTO_WRK.EMPLID AND C.CAL_RUN_ID = PS_GP_NEW_RTO_WRK.CAL_RUN_ID AND C.EMPL_RCD = PS_GP_NEW_RTO     </frame>
     <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000">
unknown     </frame>
    </executionStack>
    <inputbuf>
(@P1 nvarchar(508),@P2 nvarchar(508),@P3 nvarchar(508),@P4 nvarchar(508),@P5 nvarchar(508),@P6 nvarchar(508),@P7 nvarchar(508),@P8 nvarchar(508),@P9 nvarchar(508),@P10 nvarchar(508),@P11 nvarchar(508),@P12 nvarchar(508))UPDATE PS_GP_NEW_RTO_WRK SET ORIG_CAL_RUN_ID = (SELECT DISTINCT C.ORIG_CAL_RUN_ID FROM PS_GP_PYE_PRC_STAT B ,PS_GP_OLD_RTO_WRK C WHERE C.EMPLID BETWEEN @P1 AND @P2 AND C.CAL_RUN_ID=@P3 AND C.EMPLID = PS_GP_NEW_RTO_WRK.EMPLID AND C.CAL_RUN_ID = PS_GP_NEW_RTO_WRK.CAL_RUN_ID AND C.EMPL_RCD = PS_GP_NEW_RTO_WRK.EMPL_RCD AND C.CAL_ID = PS_GP_NEW_RTO_WRK.CAL_ID AND C.GP_PAYGROUP = PS_GP_NEW_RTO_WRK.GP_PAYGROUP AND B.CAL_ID= C.CAL_ID AND B.GP_PAYGROUP= C.GP_PAYGROUP AND B.EMPLID=C.EMPLID AND B.EMPL_RCD=C.EMPL_RCD AND B.ORIG_CAL_RUN_ID=C.ORIG_CAL_RUN_ID AND C.SEL_ACTION IN (N&apos;R&apos;,N&apos;Z&apos;) AND B.SEL_ACTION=N&apos;A&apos;) WHERE EMPLID BETWEEN @P4 AND @P5 AND CAL_RUN_ID=@P6 AND (N&apos;N&apos;=@P7 OR EMPLID IN (SELECT EMPLID FROM PS_GP_GRP_LIST_RUN WHERE RUN_CNTL_ID=@P8 AND OPRID=@P9) ) AND EXISTS (SELECT B.ORIG_CAL_RUN_ID FRO    </inputbuf>
   </process>
   <process id="process5ff948" taskpriority="0" logused="2793096" waitresource="KEY: 7:72057601661599744 (9e1bb6c02ace)" waittime="1659" ownerId="7509883" transactionname="user_transaction" lasttranstarted="2012-10-08T13:16:50.867" XDES="0x6b6beb950" lockMode="U" schedulerid="1" kpid="2472" status="suspended" spid="95" sbid="0" ecid="0" priority="0" trancount="2" lastbatchstarted="2012-10-08T13:16:59.400" lastbatchcompleted="2012-10-08T13:16:59.400" clientapp="PeopleSoft" hostname="STGAAMY-PPSAPP" hostpid="32912" loginname="HRTRNADM" isolationlevel="read committed (2)" xactid="7509883" currentdb="7" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
    <executionStack>
     <frame procname="adhoc" line="1" stmtstart="440" sqlhandle="0x020000007b8741293b8e4d6542633962bc48489d3946a5d1">
UPDATE PS_GP_NEW_RTO_WRK SET ORIG_CAL_RUN_ID = (SELECT DISTINCT C.ORIG_CAL_RUN_ID FROM PS_GP_PYE_PRC_STAT B ,PS_GP_OLD_RTO_WRK C WHERE C.EMPLID BETWEEN @P1 AND @P2 AND C.CAL_RUN_ID=@P3 AND C.EMPLID = PS_GP_NEW_RTO_WRK.EMPLID AND C.CAL_RUN_ID = PS_GP_NEW_RTO_WRK.CAL_RUN_ID AND C.EMPL_RCD = PS_GP_NEW_RTO_WRK.EMPL_RCD AND C.CAL_ID = PS_GP_NEW_RTO_WRK.CAL_ID AND C.GP_PAYGROUP = PS_GP_NEW_RTO_WRK.GP_PAYGROUP AND B.CAL_ID= C.CAL_ID AND B.GP_PAYGROUP= C.GP_PAYGROUP AND B.EMPLID=C.EMPLID AND B.EMPL_RCD=C.EMPL_RCD AND B.ORIG_CAL_RUN_ID=C.ORIG_CAL_RUN_ID AND C.SEL_ACTION IN (N&apos;R&apos;,N&apos;Z&apos;) AND B.SEL_ACTION=N&apos;A&apos;) WHERE EMPLID BETWEEN @P4 AND @P5 AND CAL_RUN_ID=@P6 AND (N&apos;N&apos;=@P7 OR EMPLID IN (SELECT EMPLID FROM PS_GP_GRP_LIST_RUN WHERE RUN_CNTL_ID=@P8 AND OPRID=@P9) ) AND EXISTS (SELECT B.ORIG_CAL_RUN_ID FROM PS_GP_PYE_PRC_STAT B ,PS_GP_OLD_RTO_WRK C WHERE C.EMPLID BETWEEN @P10 AND @P11 AND C.CAL_RUN_ID=@P12 AND C.EMPLID = PS_GP_NEW_RTO_WRK.EMPLID AND C.CAL_RUN_ID = PS_GP_NEW_RTO_WRK.CAL_RUN_ID AND C.EMPL_RCD = PS_GP_NEW_RTO     </frame>
     <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000">
unknown     </frame>
    </executionStack>
    <inputbuf>
(@P1 nvarchar(508),@P2 nvarchar(508),@P3 nvarchar(508),@P4 nvarchar(508),@P5 nvarchar(508),@P6 nvarchar(508),@P7 nvarchar(508),@P8 nvarchar(508),@P9 nvarchar(508),@P10 nvarchar(508),@P11 nvarchar(508),@P12 nvarchar(508))UPDATE PS_GP_NEW_RTO_WRK SET ORIG_CAL_RUN_ID = (SELECT DISTINCT C.ORIG_CAL_RUN_ID FROM PS_GP_PYE_PRC_STAT B ,PS_GP_OLD_RTO_WRK C WHERE C.EMPLID BETWEEN @P1 AND @P2 AND C.CAL_RUN_ID=@P3 AND C.EMPLID = PS_GP_NEW_RTO_WRK.EMPLID AND C.CAL_RUN_ID = PS_GP_NEW_RTO_WRK.CAL_RUN_ID AND C.EMPL_RCD = PS_GP_NEW_RTO_WRK.EMPL_RCD AND C.CAL_ID = PS_GP_NEW_RTO_WRK.CAL_ID AND C.GP_PAYGROUP = PS_GP_NEW_RTO_WRK.GP_PAYGROUP AND B.CAL_ID= C.CAL_ID AND B.GP_PAYGROUP= C.GP_PAYGROUP AND B.EMPLID=C.EMPLID AND B.EMPL_RCD=C.EMPL_RCD AND B.ORIG_CAL_RUN_ID=C.ORIG_CAL_RUN_ID AND C.SEL_ACTION IN (N&apos;R&apos;,N&apos;Z&apos;) AND B.SEL_ACTION=N&apos;A&apos;) WHERE EMPLID BETWEEN @P4 AND @P5 AND CAL_RUN_ID=@P6 AND (N&apos;N&apos;=@P7 OR EMPLID IN (SELECT EMPLID FROM PS_GP_GRP_LIST_RUN WHERE RUN_CNTL_ID=@P8 AND OPRID=@P9) ) AND EXISTS (SELECT B.ORIG_CAL_RUN_ID FRO    </inputbuf>
   </process>
  </process-list>
  <resource-list>
   <keylock hobtid="72057601661599744" dbid="7" objectname="HRTRN91.dbo.PS_GP_NEW_RTO_WRK" indexname="PS_GP_NEW_RTO_WRK" id="lock4991e6c00" mode="X" associatedObjectId="72057601661599744">
    <owner-list>
     <owner id="process5ff948" mode="X"/>
    </owner-list>
    <waiter-list>
     <waiter id="process8ad948" mode="U" requestType="wait"/>
    </waiter-list>
   </keylock>
   <keylock hobtid="72057601661599744" dbid="7" objectname="HRTRN91.dbo.PS_GP_NEW_RTO_WRK" indexname="PS_GP_NEW_RTO_WRK" id="lockdf24e800" mode="X" associatedObjectId="72057601661599744">
    <owner-list>
     <owner id="process8ad948" mode="X"/>
    </owner-list>
    <waiter-list>
     <waiter id="process5ff948" mode="U" requestType="wait"/>
    </waiter-list>
   </keylock>
  </resource-list>
 </deadlock>
</deadlock-list> 
```

表结构

```
CREATE TABLE [dbo].[PS_GP_NEW_RTO_WRK](
    [EMPLID] [nvarchar](11) NOT NULL,
    [CAL_RUN_ID] [nvarchar](18) NOT NULL,
    [EMPL_RCD] [smallint] NOT NULL,
    [GP_PAYGROUP] [nvarchar](10) NOT NULL,
    [CAL_ID] [nvarchar](18) NOT NULL,
    [ORIG_CAL_RUN_ID] [nvarchar](18) NOT NULL,
    [RSLT_VER_NUM] [smallint] NOT NULL,
    [RSLT_REV_NUM] [smallint] NOT NULL,
    [PRC_ORD_TS] [dbo].[PSDATETIME] NULL,
    [SEL_STAT] [nvarchar](1) NOT NULL,
    [SEL_RSN] [nvarchar](2) NOT NULL,
    [RTO_PRC_ID] [nvarchar](10) NOT NULL,
    [PYMT_DT] [dbo].[PSDATE] NULL,
    [PRC_BGN_DT] [dbo].[PSDATE] NULL,
    [PRC_END_DT] [dbo].[PSDATE] NULL
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[PS_GP_NEW_RTO_WRK] SET (LOCK_ESCALATION = ENABLE)
GO 
```

索引结构

```
CREATE UNIQUE CLUSTERED INDEX [PS_GP_NEW_RTO_WRK] ON [dbo].[PS_GP_NEW_RTO_WRK] 
(
    [EMPLID] ASC,
    [CAL_RUN_ID] ASC,
    [EMPL_RCD] ASC,
    [GP_PAYGROUP] ASC,
    [CAL_ID] ASC,
    [ORIG_CAL_RUN_ID] ASC
)
    WITH (PAD_INDEX  = OFF, 
    STATISTICS_NORECOMPUTE  = OFF, 
    SORT_IN_TEMPDB = OFF, 
    IGNORE_DUP_KEY = OFF, 
    DROP_EXISTING = OFF, 
    ONLINE = OFF, 
    ALLOW_ROW_LOCKS  = ON, 
    ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:07:59.940

1) 在开发/测试服务器上恢复备份并运行此查询：

```
SELECT *
FROM (
    SELECT [EMPLID],[CAL_RUN_ID],[EMPL_RCD],[GP_PAYGROUP],[CAL_ID],[ORIG_CAL_RUN_ID], %%lockres%% AS KeyLockID
    FROM [dbo].[PS_GP_NEW_RTO_WRK]
) x
WHERE x.KeyLockID IN ('(01c1926aca97)','(9e1bb6c02ace)') 
```

和值是“锁定 ID” `(01c1926aca97)`（`(9e1bb6c02ace)`参见 /deadlock-list/deadlock/process-list/process/@waitresource values: `KEY: 7:72057601661599744 (01c1926aca97)`, `KEY: 7:72057601661599744 (9e1bb6c02ace)`）。如果你得到 3 行或更多行，那么答案是肯定的。

2）另外，您可以检查差异。计划：

```
SELECT qp.*, txt.*
FROM sys.dm_exec_cached_plans cp
CROSS APPLY sys.dm_exec_query_plan(cp.plan_handle) qp
CROSS APPLY sys.dm_exec_sql_text(cp.plan_handle) txt
WHERE txt.text LIKE N'UPDATE PS\_GP\_NEW\_RTO\_WRK SET ORIG\_CAL\_RUN\_ID = (SELECT DISTINCT C.ORIG\_CAL\_RUN\_ID FROM PS\_GP\_PYE\_PRC\_STAT B ,PS\_GP\_OLD\_RTO\_WRK C WHERE C.EMPLID BETWEEN @P1 AND @P2 AND C.CAL\_RUN\_ID=@P3 AND C.EMPLID = PS\_GP\_NEW\_RTO\_WRK.EMPLID AND C.CAL\_RUN\_ID = PS\_GP\_NEW\_RTO\_WRK.CAL\_RUN\_ID AND C.EMPL\_RCD = PS\_GP\_NEW\_RTO\_WRK.EMPL\_RCD AND C.CAL\_ID = PS\_GP\_NEW\_RTO\_WRK.CAL\_ID AND C.GP\_PAYGROUP = PS\_GP\_NEW\_RTO\_WRK.GP\_PAYGROUP AND B.CAL\_ID= C.CAL\_ID AND B.GP\_PAYGROUP= C.GP\_PAYGROUP AND B.EMPLID=C.EMPLID AND B.EMPL\_RCD=C.EMPL\_RCD AND B.ORIG\_CAL\_RUN\_ID=C.ORIG\_CAL\_RUN\_ID AND C.SEL\_ACTION IN (N&apos;R&apos;,N&apos;Z&apos;) AND B.SEL\_ACTION=N&apos;A&apos;) WHERE EMPLID BETWEEN @P4 AND @P5 AND CAL\_RUN\_ID=@P6 AND (N&apos;N&apos;=@P7 OR EMPLID IN (SELECT EMPLID FROM PS\_GP\_GRP\_LIST\_RUN WHERE RUN\_CNTL\_ID=@P8 AND OPRID=@P9) ) AND EXISTS (SELECT B.ORIG\_CAL\_RUN\_ID FROM PS\_GP\_PYE\_PRC\_STAT B ,PS\_GP\_OLD\_RTO\_WRK C WHERE C.EMPLID BETWEEN @P10 AND @P11 AND C.CAL\_RUN\_ID=@P12 AND C.EMPLID = PS\_GP\_NEW\_RTO\_WRK.EMPLID AND C.CAL\_RUN\_ID = PS\_GP\_NEW\_RTO\_WRK.CAL\_RUN\_ID AND C.EMPL\_RCD = PS\_GP\_NEW\_RTO%' ESCAPE N'\'
ORDER BY txt.text

SELECT qp.*, txt.*
FROM sys.dm_exec_cached_plans cp
CROSS APPLY sys.dm_exec_query_plan(cp.plan_handle) qp
CROSS APPLY sys.dm_exec_sql_text(cp.plan_handle) txt
WHERE txt.text LIKE N'(@P1 nvarchar(508),@P2 nvarchar(508),@P3 nvarchar(508),@P4 nvarchar(508),@P5 nvarchar(508),@P6 nvarchar(508),@P7 nvarchar(508),@P8 nvarchar(508),@P9 nvarchar(508),@P10 nvarchar(508),@P11 nvarchar(508),@P12 nvarchar(508))UPDATE PS\_GP\_NEW\_RTO\_WRK SET ORIG\_CAL\_RUN\_ID = (SELECT DISTINCT C.ORIG\_CAL\_RUN\_ID FROM PS\_GP\_PYE\_PRC\_STAT B ,PS\_GP\_OLD\_RTO\_WRK C WHERE C.EMPLID BETWEEN @P1 AND @P2 AND C.CAL\_RUN\_ID=@P3 AND C.EMPLID = PS\_GP\_NEW\_RTO\_WRK.EMPLID AND C.CAL\_RUN\_ID = PS\_GP\_NEW\_RTO\_WRK.CAL\_RUN\_ID AND C.EMPL\_RCD = PS\_GP\_NEW\_RTO\_WRK.EMPL\_RCD AND C.CAL\_ID = PS\_GP\_NEW\_RTO\_WRK.CAL\_ID AND C.GP\_PAYGROUP = PS\_GP\_NEW\_RTO\_WRK.GP\_PAYGROUP AND B.CAL\_ID= C.CAL\_ID AND B.GP\_PAYGROUP= C.GP\_PAYGROUP AND B.EMPLID=C.EMPLID AND B.EMPL\_RCD=C.EMPL\_RCD AND B.ORIG\_CAL\_RUN\_ID=C.ORIG\_CAL\_RUN\_ID AND C.SEL\_ACTION IN (N&apos;R&apos;,N&apos;Z&apos;) AND B.SEL\_ACTION=N&apos;A&apos;) WHERE EMPLID BETWEEN @P4 AND @P5 AND CAL\_RUN\_ID=@P6 AND (N&apos;N&apos;=@P7 OR EMPLID IN (SELECT EMPLID FROM PS\_GP\_GRP\_LIST\_RUN WHERE RUN\_CNTL\_ID=@P8 AND OPRID=@P9) ) AND EXISTS (SELECT B.ORIG\_CAL\_RUN\_ID FRO%' ESCAPE N'\'
ORDER BY txt.text 
```

如果您为每个 UPDATE 或 (@...)UPDATE 语句（例如串行计划和并行计划）获得不同的计划，那么这个事实排除了初始假设（哈希冲突）。

**扩展评论：** ![在此处输入图像描述](../Images/3fafaef83e8cc25df8e7623db7c9949b.png)

T = SPID94 开始执行UPDATE语句（串行计划）

T+1 = SPID95开始执行UPDATE语句（并行计划）

T+2 = SPID94 对行/键 4 进行 X 锁定

T+3 = SPID95-thread1 尝试对行/键 4 进行 U 锁定（已被 SPID94 锁定）。此外，SPID95-thread2 在行/键 9 上采用 X 锁定。

T+4 = SPID94 尝试对行/键 9 进行 U 锁定（已被 SPID95 锁定）。

结论：SPID94 在行/键 4 上具有 X 锁，并在行/键 9 上请求 U 锁。SPID95 在行/键 9 上具有 X 锁，并在行/键 4 上请求 U 锁。所以，我们有死锁.

# phalcon - \Phalcon\Mvc\User\Component 和 Phalcon\Mvc\User\Plugin 有什么不同

> ID：12879284
> 
> 赞同：2
> 
> 时间：2012-10-14T04:23:39.137
> 
> 标签：phalcon

Phalcon中有\Phalcon\Mvc\User\Component和Phalcon\Mvc\User\Plugin。在示例 invo 中，Phalcon\Mvc\User\Plugin 用于[此处](https://github.com/phalcon/invo/blob/master/app/plugins/Security.php#L6)的 EventsManager 。[在 mvc 示例中，此处](https://github.com/phalcon/mvc/blob/master/multiple/apps/library/Acl.php#L6)使用了 Phalcon\Mvc\User\Component 。我想知道这两个类有什么区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:31:03.537

实际上，这两个类目前是相同的。我们对框架的扩展越多，可能会添加特定的功能来帮助构建 mvc 插件和用户组件

# php - 如何从php中的附件名称中删除目录名称

> ID：12879293
> 
> 赞同：0
> 
> 时间：2012-10-14T04:25:35.567
> 
> 标签：php

我有一个小问题。我已经上传了一封电子邮件的屏幕截图，其中包含使用 php 发送的附件。但在附件名称中，目录名称为“upload./”，我想删除该部分。我怎样才能做到这一点？

谢谢你。![在此处输入图像描述](../Images/1f079c6031a8ba54031cfb6a9b85a0e9.png)

```
$message = $mes;
                echo $message;

                //echo $message;
                $subject = $coursetitle;
                $headers .= 'Cc: gayani@amdt.lk' . "\r\n";

                ini_set("SMTP", "mail.amdt.lk");
                ini_set("sendmail_from", "info@amdt.lk");

                // boundary 
                $semi_rand = md5(time());
                $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

                // headers for attachment 
                $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

                // multipart boundary 
                $message = "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/html; charset=\"iso-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";
                $message .= "--{$mime_boundary}\n";

                // preparing attachments

                        for($x=0;$x<count($files);$x++){
                            $file = fopen($dir.$files[$x],"rb");
                            $data = fread($file,filesize($dir.$files[$x]));
                            fclose($file);
                            $data = chunk_split(base64_encode($data));
                            $message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$dir.$files[$x]\"\n" . 
                            "Content-Disposition: attachment;\n" . " filename=\"$dir.$files[$x]\"\n" . 
                            "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
                            $message .= "--{$mime_boundary}\n";
                        }

                // send
                //echo $message;
               $ok = mail($to, $subject, $message, $headers);
               if ($ok) {
                 echo "<p>mail sent to $to!</p>";
                } else {
                 echo "<p>mail could not be sent!</p>";
              } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:38:18.470

使用[basename()](http://php.net/manual/en/function.basename.php)函数：

```
$file="upload./file.jpg";
$basename=basename($file);
$dirname=dirname($file); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T04:42:51.317

你自己做...

```
"Content-Disposition: attachment;\n" . " filename=\"$dir.$files[$x]\"\n" 
                                                    ^^^^ 
```

这是应该出现在客户端浏览器中的文件名......它与文件在服务器上的位置或服务器上的名称无关。这纯粹是为了远程用户的信息。

在更大的计划中......不要构建自己的 mime 消息，或使用 mail()。当有像 PHPMailer 和 Swiftmailer 这样非常好的库可以用更少的代码为您完成所有这些工作时，Mime 做对是很痛苦的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T04:37:42.480

```
$string = str_replace("upload./", "", $string); 
```

就这样 ：）

# php - 第一次mysqli，有INSERT错误

> ID：12879294
> 
> 赞同：0
> 
> 时间：2012-10-14T04:25:43.837
> 
> 标签：php, mysql, insert, mysqli

我从以下代码中收到以下错误。连接工作没有错误，所有输入列都是正确的，我将输入简化为 0，以确保它不是我传递的变量。任何帮助将不胜感激。MySQL 版本 5.5.28。

> FAILURE 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'keys, values, childID, accessID) VALUES ('0','0','0','0')' 附近使用正确的语法

```
$query="INSERT INTO carts (keys, values, childID, accessID)
                    VALUES
                    ('0','0','0','0')";
                    echo $query;
if (mysqli_query($link, $query) == FALSE) {echo "FAILURE " . mysqli_error($link);} 
```

已经工作了 20 个小时而不睡觉，所以如果这是一个面对面的时刻，我不会感到惊讶。我会说我从未使用过 mysqli，只是 mysql 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:27:42.617

`keys`并且`values`是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)您可以将其包装在反引号中。

```
... (`keys`, `values`, ... 
```

# java - 使用 Java 和调制解调器拨入设备？

> ID：12879296
> 
> 赞同：2
> 
> 时间：2012-10-14T04:25:47.533
> 
> 标签：java, hyperterminal

简短的背景，我有一个通过超级终端连接的设备，以接收有关设备当前状态的信息。设备连接到调制解调器，设置为 2400,7,O,1。然后我发送一个命令并读取返回的数据。

我的问题是，在 Java 中有没有可以拨出的方法，一旦连接就发送命令并将返回的数据存储在字符串中？或者有人可以提出更好的选择。

我的最终目标是为此设置运行时间表并通过电子邮件发送返回的结果。

我试图搜索该站点，但没有找到我要查找的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:10:42.763

我相信你想使用 Java Communications API ......

[http://www.oracle.com/technetwork/java/index-jsp-141752.html](http://www.oracle.com/technetwork/java/index-jsp-141752.html)

这看起来也很有帮助...

[http://edn.embarcadero.com/article/31915](http://edn.embarcadero.com/article/31915)

另外，如果我没记错的话，告诉调制解调器拨号的方法是发送“ATDT”，然后发送号码......但我已经有大约 15 年没有这样做了:)

哦，嘿，这看起来也很方便 :) [http://www.uic.edu/depts/accc/network/dialin/modem_codes.html](http://www.uic.edu/depts/accc/network/dialin/modem_codes.html)

# xml - 使用 XSL 转换 Windows 64 位文件时间结构格式

> ID：12879297
> 
> 赞同：1
> 
> 时间：2012-10-14T04:25:49.873
> 
> 标签：xml, xslt, xslt-2.0, datetime-format, xpath-2.0

遵循这个建议：[如何使用 XSLT 将刻度转换为可读的日期时间？](https://stackoverflow.com/questions/642891/how-to-convert-ticks-into-a-readable-datetime-with-xslt)它显示了如何将 Unix 时间戳格式转换为人类可读的日期时间格式，我想用 XSL转换[Windows 64 位文件时间结构：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)

```
<xsl:value-of select="xs:dateTime('1960-01-01T00:00:00Z') + @WDT * xs:dayTimeDuration('PT0.0000001S')"/> 
```

其中@WDT 属性表示 Windows 64 位日期时间编号。

但是我没有得到想要的结果。我得到 ie date: "2371-06-30T01:10:04.34375Z" for "129854922043437500"，而我预期："30.06.2012 03:10:04"
这种方法有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:16:57.060

**主要问题是您使用的初始数据——正确的日期是 1601 年 1 月 1 日。**

**所以**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
   <xsl:value-of select=
   "xs:dateTime('1601-01-01T00:00:00Z')
     + 129854922043437500 idiv 10000000 *xs:dayTimeDuration('PT1S')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）时，会产生所需的正确结果：**

```
2012-06-30T01:10:04Z 
```

# windows - 在虚拟主机内创建别名目录

> ID：12879298
> 
> 赞同：25
> 
> 时间：2012-10-14T04:25:53.167
> 
> 标签：windows, apache2, alias, virtualhost, wampserver

*在问这个问题之前，我检查[了here](https://stackoverflow.com/questions/5552081/using-a-directory-in-virtualhost-servername)、[here](http://www.rafael-chacon.com/post/9903470026/rails-wordpress-apache-integration)、[here](http://www.nodans.com/index.cfm/2006/10/10/Apache-Directory-Aliases-and-Virtual-Directories)、[here](http://httpd.apache.org/docs/current/mod/core.html)和[here 。](http://httpd.apache.org/docs/2.0/mod/mod_alias.html)我想我的搜索能力很弱。*

我正在使用[WampServer](http://www.wampserver.com/en/)版本`2.2e`。我有一个需要，我需要一个虚拟主机内的虚拟路径。让我说一下我拥有的两个主机。

### 主虚拟主机 (Localhost)

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "C:/Wamp/www"
</VirtualHost> 
```

### 我的应用程序虚拟主机

```
<VirtualHost *:80>
    ServerName apps.ptrl
    DocumentRoot "C:/Wamp/vhosts/ptrl/apps"
    ErrorLog "logs/apps-ptrl-error.log"
    CustomLog "logs/apps-ptrl-access.log" common
    <Directory "C:/Wamp/vhosts/ptrl/apps">
        allow from all
        order allow,deny
        AllowOverride All
    </Directory>
    DirectoryIndex index.html index.htm index.php
</VirtualHost> 
```

### 我的博客虚拟主机

```
<VirtualHost *:80>
    ServerName blog.praveen-kumar.ptrl
    DocumentRoot "C:/Wamp/vhosts/ptrl/praveen-kumar/blog"
    ErrorLog "logs/praveen-kumar-ptrl-error.log"
    CustomLog "logs/praveen-kumar-ptrl-access.log" common
    <Directory "C:/Wamp/vhosts/ptrl/praveen-kumar/blog">
        allow from all
        order allow,deny
        AllowOverride All
    </Directory>
    DirectoryIndex index.html index.htm index.php
</VirtualHost> 
```

我现在的要求是拥有`http://apps.ptrl/blog/`并且`http://blog.praveen-kumar.ptrl/`应该是同一个目录。我想到的一件事是，在`blog`文件夹内移动文件`apps`夹，但它是连接的`Git`并且其他东西在那里，所以无法移动文件夹。

`alias`所以，我想以这种方式创建一个`VirtualHost`：

```
<VirtualHost *:80>
    ServerName apps.ptrl
    DocumentRoot "C:/Wamp/vhosts/ptrl/apps"
    ErrorLog "logs/apps-ptrl-error.log"
    CustomLog "logs/apps-ptrl-access.log" common
    <Directory "C:/Wamp/vhosts/ptrl/apps">
        allow from all
        order allow,deny
        AllowOverride All
    </Directory>
    DirectoryIndex index.html index.htm index.php

    # The alias to the blog!
    Alias /blog "C:/Wamp/vhosts/ptrl/praveen-kumar/blog"
    <Directory "C:/Wamp/vhosts/ptrl/praveen-kumar/blog">
        allow from all
        order allow,deny
        AllowOverride All
    </Directory>
</VirtualHost> 
```

但是当我尝试访问时`http://apps.ptrl/blog`，我得到了一个`Error 403 Forbidden`页面。

![禁止的](../Images/f3cd8df5701ed96ff9bddb35db4b54c5.png)

我在做正确的事吗？如果您需要查看访问日志和错误日志，它们在这里：

```
# Access Log
127.0.0.1 - - [14/Oct/2012:09:53:11 +0530] "GET /blog HTTP/1.1" 403 206
127.0.0.1 - - [14/Oct/2012:09:53:11 +0530] "GET /favicon.ico HTTP/1.1" 404 209
127.0.0.1 - - [14/Oct/2012:09:53:53 +0530] "GET / HTTP/1.1" 200 6935
127.0.0.1 - - [14/Oct/2012:09:53:53 +0530] "GET /app/blog/thumb.png HTTP/1.1" 404 216
# Error Log
[Sun Oct 14 09:53:11 2012] [error] [client 127.0.0.1] client denied by server configuration: C:/Wamp/vhosts/ptrl/praveen-kumar/blog
[Sun Oct 14 09:53:11 2012] [error] [client 127.0.0.1] File does not exist: C:/Wamp/vhosts/ptrl/apps/favicon.ico
[Sun Oct 14 09:53:53 2012] [error] [client 127.0.0.1] File does not exist: C:/Wamp/vhosts/ptrl/apps/app/blog, referer: http://apps.ptrl/ 
```

急切地等待一些帮助。如果需要，我准备提供更多信息。

* * *

## 更新 #1：根据[felipsmartins](https://stackoverflow.com/users/1262820/felipsmartins)给出的说明更改了 VirtualHosts 声明：

```
<VirtualHost *:80>
    ServerName apps.ptrl
    DocumentRoot "C:/Wamp/vhosts/ptrl/apps"
    ErrorLog "logs/apps-ptrl-error.log"
    CustomLog "logs/apps-ptrl-access.log" common
    # The alias to the blog!
    Alias /blog "C:/Wamp/vhosts/ptrl/praveen-kumar/blog"
    <Directory "C:/Wamp/vhosts/ptrl/praveen-kumar/blog">
        allow from all
        order allow,deny
        AllowOverride All
    </Directory>
    <Directory "C:/Wamp/vhosts/ptrl/apps">
        allow from all
        order allow,deny
        AllowOverride All
    </Directory>
    DirectoryIndex index.html index.htm index.php
</VirtualHost> 
```

* * *

## 更新#2：另一个问题：

我可以访问该网站。物理链接现在正在工作。即，我可以打开`http://apps.ptrl/blog/index.php`但不能打开`http://apps.ptrl/blog/view-1.ptf`，它被翻译为`http://apps.ptrl/blog/index.php?page=view&id=1`. 有什么解决办法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-14T04:55:37.533

[请注意，如果要为DocumentRoot](http://httpd.apache.org/docs/2.2/mod/core.html#documentroot)之外的目录创建[别名](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)，则可能需要明确允许访问目标目录：

```
<VirtualHost *:80>
    ServerName apps.ptrl
    DocumentRoot "C:/Wamp/vhosts/ptrl/apps"
    ErrorLog "logs/apps-ptrl-error.log"
    CustomLog "logs/apps-ptrl-access.log" common

    # Puts here, before Directory directive :) 
    Alias /blog "C:/Wamp/vhosts/ptrl/praveen-kumar/blog"

    <Directory "C:/Wamp/vhosts/ptrl/apps">        
        allow from all
        order allow,deny
        AllowOverride All
    </Directory>
</VirtualHost> 
```

还要注意，即使在不区分大小写的文件系统上，URL 路径（第一别名部分）也是区分大小写的。

另外，检查`C:/Wamp/vhosts/ptrl/praveen-kumar/blog`目录的权限。

**参考**

*   [Apache 模块 mod_alias](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)
*   [阿帕奇虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/)

# objective-c - 使 NSTableView 不可编辑

> ID：12879300
> 
> 赞同：-1
> 
> 时间：2012-10-14T04:26:55.830
> 
> 标签：objective-c, cocoa, nstableview

**好的，这是我的情况：**

*   我有一个`NSTableView`.
*   它的列绑定到一个`NSArrayController`.
*   ...这反过来又绑定到一个`NSMutableArray`.

**然而 ：**

*   当用户单击任何单元格时，他就可以编辑其内容。
*   我们不希望那样。

我应该怎么做，以便没有表格单元格是可编辑的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:31:01.457

在您的 NSTableViewDelegate 中为此方法返回 NO：

```
- (BOOL)tableView:(NSTableView *)aTableView shouldEditTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex 
```

# google-apps-script - 我可以 file.addToFolder 但不能 file.removeFromFolder

> ID：12879306
> 
> 赞同：1
> 
> 时间：2012-10-14T04:28:33.130
> 
> 标签：google-apps-script, google-docs, google-drive-api

我有一个脚本，它从文件夹中读取文件并将内容编目到电子表格中。为了避免重复，我想将文件移动到另一个有效的文件夹（file.addToFolder（newFolder）），但是当我尝试 file.removeFromFolder（formerFolder）时，我得到“找不到方法”，这表明我没有给它即使 removeFromFolder 被列为 File 类的成员，对象的正确类。

```
function moveFileToFolder(fileId, targetFolderId,formerFolderId) {
  var targetFolder = DocsList.getFolderById(targetFolderId);
  var file = DocsList.getFileById(fileId);
  file.addToFolder(targetFolder);
  file.removeFromFolder(formerFolderId);
}; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:20:35.653

你应该得到`formerFolder`你得到的一样`targetfolder`并将它传递给方法而不是`formerFolderId`.

# list - 将 C++ 中的动态列表与重载运算符联合起来

> ID：12879309
> 
> 赞同：0
> 
> 时间：2012-10-14T04:29:37.950
> 
> 标签：list, linked-list, operator-overloading, dynamic-data

所以，我一直在制作一个链表类，现在我正在尝试制作它，以便可以通过简单的 + 运算符来合并两个列表。这是当前的代码，整个：

```
#include <iostream>
using namespace std;

// ---/ List Class /--- //

template <class Type>
struct Node {
    Type core;
    Node<Type> *next;
};

template <class Type>
class List {
    public:
        Node<Type> *start, *end;
        unsigned int siz;

        static const int END;

    public:
        // Genesis
        List() {
            start = NULL;
            end = NULL;

            siz = 0;
        };

        // ---
        void push (const Type&, const int&);

        // DEBUG
        void show (void);

        // +-*/
        List operator+ (const List&);
        List& operator= (const List&);
        List& operator+= (const List&);

        // Abbadon
        ~List() {
            delete start;
            delete end;
        };
};

template <class Type>
const int List<Type>::END = -1;

// ---

template <class Type>
void List<Type>::push (const Type& elem, const int& pos = END) {
    Node<Type> *aux;

    aux = new Node<Type>;
    aux->core = elem;

    if (siz == 0) {
        aux->next = NULL;

        start = aux;
        end = aux;
    }
    else {
        if (pos == END) {
            aux->next = NULL;

            end->next = aux;
            end = end->next;
        }
        else if (pos == 0) {
            aux->next = start;

            start = aux;
        }
        else {
            Node<Type> *pesq = start;
            for (int i = 1; (i < pos) && (pesq->next != NULL); i++) {
                pesq = pesq->next;
            }

            aux->next = pesq->next;
            pesq->next = aux;
        }
    }

    siz++;
}

// DEBUG

template <class Type>
void List<Type>::show (void) {
    Node<Type> *pesq = start;
    while (pesq != NULL) {
        cout << pesq->core << endl;
        pesq = pesq->next;
    }

    cin.get();
}

// +-*/

template <class Type>
List<Type> List<Type>::operator+ (const List<Type>& nimda) {
    List<Type> aux = *this;

    aux.end->next = nimda.start;
    aux.end = nimda.end;

    aux.siz += nimda.siz;

    return aux;
}

template <class Type>
List<Type>& List<Type>::operator= (const List<Type>& nimda) {
    if (&nimda != this) {
        start = nimda.start;
        end = nimda.start;
        siz = nimda.siz;
    }
} 

template <class Type>
List<Type>& List<Type>::operator+= (const List<Type>& nimda) {
    *this = *this + nimda;  
    return *this;
}

// ---/ MAIN() /--- //

int main() {
    List<int> adabo;
    List<int> inakos;

    adabo.push(1);
    adabo.push(2);

    inakos.push(3);
    inakos.push(4);

    adabo = adabo + inakos;

    adabo.show();
} 
```

以下是重载的运算符：

```
template <class Type>
List<Type> List<Type>::operator+ (const List<Type>& nimda) {
    List<Type> aux = *this;

    aux.end->next = nimda.start;
    aux.end = nimda.end;

    aux.siz += nimda.siz;

    return aux;
}

template <class Type>
List<Type>& List<Type>::operator= (const List<Type>& nimda) {
    if (&nimda != this) {
        start = nimda.start;
        end = nimda.start;
        siz = nimda.siz;
    }
} 

template <class Type>
List<Type>& List<Type>::operator+= (const List<Type>& nimda) {
    *this = *this + nimda;  
    return *this;
} 
```

这是用于测试的 main()：

```
// ---/ MAIN() /--- //

int main() {
    List<int> adabo;
    List<int> inakos;
    List<int> foo;

    adabo.push(1);
    adabo.push(2);

    inakos.push(3);
    inakos.push(4);

    foo = adabo + inakos;

    foo.show();
} 
```

它的输出应该是值 1、2、3 和 4，当我在 aux 返回之前将 show 函数放在 + 的运算符中时，确实会发生这种情况：

```
template <class Type>
List<Type> List<Type>::operator+ (const List<Type>& nimda) {
    List<Type> aux = *this;

    aux.end->next = nimda.start;
    aux.end = nimda.end;

    aux.siz += nimda.siz;

    aux.show() // Putting it here shows everything as expected

    return aux;
} 
```

然而，似乎 'aux' 在函数返回和 main() 中 'foo' 接收到的实际值之间丢失了，导致 foo.show() 无休止地显示随机数据。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:26:37.673

没关系，找到问题了！

发生的事情是 operator= 正在对要传递的 List 进行“复制”，如果可以这么说的话。修改后的“重复”列表也会修改原始列表，所以在这里......

```
template <class Type>
List<Type> List<Type>::operator+ (const List<Type>& nimda) {
    List<Type> aux = *this; // ...aux, which would become a duplicate of the class...

    aux.end->next = nimda.start;
    aux.end = nimda.end;

    aux.siz += nimda.siz;

    return aux;
} // ...when destructed here, would destruct *this just as well, making all data be lost. 
```

为了解决这个问题，而不是在重载的 =...

```
template <class Type>
List<Type>& List<Type>::operator= (const List<Type>& nimda) {
    if (&nimda != this) {
        start = nimda.start;
        end = nimda.start;
        siz = nimda.siz;
    }
} 
```

...现在它使 List 的每个元素都被一个一个地复制：

```
template <class Type>
List<Type>& List<Type>::operator= (const List<Type>& nimda) {
    if (&nimda != this) {
        kill();

        Node<Type> *aux = nimda.start;
        while (aux != NULL) {
            push(aux->core);
            aux = aux->next;
        }
    }
} 
```

这样，接收 List 获得原始 List 的所有元素的副本，而不会成为它自己。

# java - java的问题和从Linux中的CD驱动器读取数据

> ID：12879315
> 
> 赞同：6
> 
> 时间：2012-10-14T04:32:00.780
> 
> 标签：java, ripping

我一直在尝试编写一个简单的音频开膛手，我可以用它来了解不同 CODEC 的工作方式，但我卡在了第一步，我无法让我的程序从 CD 中读取，下面的代码是我一直在尝试的使用

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.util.Scanner;

public class learning 
{
    public static void main(String[] args) throws IOException 
    {   
        File cd = new File( "/dev/sr0" );
        RandomAccessFile rawAccess = new RandomAccessFile( cd, "r" );
        byte[] content = new byte[20];
        rawAccess.seek(19613);
        rawAccess.readFully(content);

        System.out.println(content);
    }

} 
```

但它给了我以下错误

```
Exception in thread "main" java.io.IOException: Input/output error
    at java.io.RandomAccessFile.readBytes(Native Method)
    at java.io.RandomAccessFile.read(RandomAccessFile.java:355)
    at java.io.RandomAccessFile.readFully(RandomAccessFile.java:414)
    at java.io.RandomAccessFile.readFully(RandomAccessFile.java:394)
    at learning.main(learning.java:21) 
```

我不知道为什么我会得到这个，我虽然可能 RandomFileAccess 不是正确使用的类，但我能找到的唯一东西说这应该有效

任何有关如何从 java 读取 CD 的帮助将不胜感激。

干杯丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:32:06.543

首先，您应该安装在登录 OS Linux 的用户可以访问的目录上。例如：/mnt/cdrom 或 /media/cdrom

之后打开您的 mp3 文件或音频文件：

```
File cd = new File( "/dev/sr0/track1.mp3" ); 
```

或者

```
File cd = new File( "/dev/sr0/track1.dat" ); 
```

（不要忘记音频或 Mp3 文件的扩展名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:54:26.590

这不完全相同，但我怀疑它会让你继续......

[是否有独立于平台的方式（Java？）来读取音频 CD 的目录？](https://stackoverflow.com/questions/74693/is-there-a-platform-independent-way-java-to-read-an-audio-cds-toc)

如果你不想使用内置的东西（出于教育原因），[http://www.tritonus.org/](http://www.tritonus.org/)是开源的，所以你可以看看他们是如何做到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T05:02:05.910

这个问题有一个与您的问题相关的问题和答案：[安装和卸载硬盘驱动器](https://stackoverflow.com/questions/5505682/mount-and-unmount-hard-drives)

根据链接的问题和接受**的答案，答案是“是”和“否”。**您可以为本地接口提供使用适配器模式的 Java API，但您还必须做很多事情，**从而使解决方案不是纯 Java，而是混合：**

*   创建支持挂载/卸载命令的 Java 接口
*   将接口实现为本地方法的类创建本地
*   用 C 或其他语言实现此命令。一
*   操作系统（Win、Mac、Linux）的实现将其打包到一个 jar 版本中
*   提供接口实现和加载本机库的小工厂

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T05:03:10.560

如果`/dev/sr0`是目录，那就有问题了。请尝试将其中一个音频文件作为参数传递，例如

```
 File cd = new File( "/dev/sr0/track1" ); 
```

那应该工作。

# c# - 通过代码切换绑定的单选按钮

> ID：12879319
> 
> 赞同：0
> 
> 时间：2012-10-14T04:32:17.390
> 
> 标签：c#, .net, wpf, caliburn.micro

WPF / Caliburn 微相关问题。

我有 4 个单选按钮，我将 IsChecked 属性绑定到 ArrowType，它具有我创建的 LogicArrowEnum 枚举类型。

单选按钮使用转换器根据单击的按钮正确地将相关枚举分配给 ArrowType 属性。

XAML：

```
<Window.Resources>
    <my:EnumToBoolConverter x:Key="EBConverter"/>
</Window.Resources>

...

<RadioButton IsChecked="{Binding ArrowType,
                Converter={StaticResource EBConverter},
                ConverterParameter={x:Static my:LogicArrowEnum.ARROW}}" 
                         Name="LogicArrow" 
                         Style="{StaticResource {x:Type ToggleButton}}" 
                         Width="50" 
                <TextBlock Text="Arrow"/>
</RadioButton>
<RadioButton IsChecked="{Binding ArrowType,
                Converter={StaticResource EBConverter},
                ConverterParameter={x:Static my:LogicArrowEnum.ASSIGN}}" 
                Name="LogicAssign"
                Style="{StaticResource {x:Type ToggleButton}}"
                Width="50" 
                <TextBlock Text="Assign"/>
</RadioButton>
<RadioButton
                IsChecked="{Binding ArrowType,
                Converter={StaticResource EBConverter},
                ConverterParameter={x:Static my:LogicArrowEnum.IF}}" 
                Name="LogicIf"
                Style="{StaticResource {x:Type ToggleButton}}" 
                Width="50"
                <TextBlock Text="If" /> 
```

代码：

```
public class EnumToBoolConverter : IValueConverter
{
    public object Convert(object value,
        Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
        if (parameter.Equals(value))
            return true;
        else
            return false;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return parameter;
    }
}  

public enum LogicArrowEnum
{
    ARROW = 1,
    ASSIGN = 2,
    IF = 3,
    IF_ELSE = 4
}

public LogicArrowEnum ArrowType
{
    get { return arrowType; }
    set
    {
        arrowType = value;

        NotifyOfPropertyChange(() => ArrowType);
    }
} 
```

代码工作得很好——用户单击一个按钮，ArrowType 属性被正确绑定。

我也想让这项工作倒退。例如，如果我通过代码将 ArrowType 属性设置为 LogicArrowEnum.ASSIGN，则 UI 应显示“分配”按钮已被切换。由于某种原因，这不能按预期工作。在 property 的 set 方法中，每当我将 ArrowType 属性分配给任意枚举时，arrowType 的私有字段首先被分配为我想要的值，但是一旦代码到达 NotifyOfPropertyChange 方法，它就会进入再次设置方法，但随后将 arrowType 私有字段重置为先前切换的按钮。

这是与 Caliburn Micro 相关的错误还是与 WPF 相关的错误？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:56:13.743

与 Caliburn.Micro 无关。看看这个：[如何将 RadioButtons 绑定到枚举？](https://stackoverflow.com/questions/397556/how-to-bind-radiobuttons-to-an-enum)

从 Scott 的答案中获取一个转换器，它会正常工作。

# php - 如何在 Wordpress 中获取特定类别的帖子？

> ID：12879320
> 
> 赞同：0
> 
> 时间：2012-10-14T04:32:22.163
> 
> 标签：php, wordpress, wordpress-theming

我想知道 Wordpress 中是否有一个功能，我可以在其中获取特定类别中的所有帖子并根据类别对它们进行排序，以便每个类别都有一系列属于它的帖子。

我尝试使用 get_posts 函数但没有运气：

```
$args      = array(
'numberposts' => 15,
'category' => '161,165,166,1',
);
$postslist = get_posts($args); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:34:21.640

您应该将 WP po​​st 的 ID 和 functon get_post 用于检索帖子数据作为数组。

```
<?php
    $my_id = 7;
    $post_id_7 = get_post($my_id, ARRAY_A);
    $title = $post_id_7['post_title'];
?> 
```

完整参考：[http ://codex.wordpress.org/Function_Reference/get_post](http://codex.wordpress.org/Function_Reference/get_post)

如果您想按类别 id 获取帖子，请使用：

```
$post_categories = wp_get_post_categories( $post_id );
$cats = array();

foreach($post_categories as $c){
    $cat = get_category( $c );
    $cats[] = array( 'name' => $cat->name, 'slug' => $cat->slug );
} 
```

或转储完整数据：

```
 var_dump($cat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:41:14.393

您应该使用`query_posts`and`category__in`或`category__and`参数 - [http://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

```
$args = array( 'category__in' => array(161,165,166,1), 'posts_per_page' => 15 );
query_posts( $args );
while (have_posts()): the_post();
    the_title();
endwhile; 
```

# python - Django/Pinax UTF8 编码

> ID：12879322
> 
> 赞同：0
> 
> 时间：2012-10-14T04:33:12.233
> 
> 标签：python, mysql, django, utf-8, pinax

我在 CentOS 服务器上安装了 scrumdo [http://scrumdo.org](http://scrumdo.org)，我正试图将其移至 slackware 服务器。在 CentOS 上我安装了 LAMP，我相信 pinax 和 yum，在 slackware 上我大部分使用下载的 tars。

Scrumdo 在 CentOS 上运行良好，但在 Slackware 上尝试从数据库创建项目时抛出此错误：

```
DjangoUnicodeDecodeError at /projects/create/
'utf8' codec can't decode byte 0xf1 in position 0: invalid continuation byte. You passed in '\xf19pt5xb' (<type 'str'>) 
```

我注意到我的 CentOS 数据库是 latin1_ci 而我的 slackware 数据库是 utf8。我尝试在 /etc/my.cnf 中为服务器和客户端指定 utf8 并重新启动 mysql 但它仍然产生错误。然后我尝试截断 slackware 数据库并导入 CentOS 表，但仍然是同样的错误。

在很长一段时间内，我尝试只复制整个 CentOs scrum 目录，但我收到一个关于没有安装模型的时间的错误，并且 python manage.py syncdb 无法检测到它处于 pinax 环境中，尽管它已被激活。现在我正在对两个目录进行文件比较，以查看 python、django 或 pinax 中是否有我可以更改的字符编码设置。

# function - Haskell中的打印功能如何像python或scala一样？

> ID：12879324
> 
> 赞同：3
> 
> 时间：2012-10-14T04:33:22.823
> 
> 标签：function, haskell

我尝试在 Haskell 中打印函数只是为了好玩，比如这个例子：

```
{-# LANGUAGE FlexibleInstances #-}

instance Show (Int -> Bool) where
    show _ = "function: Int -> Bool" 
```

加载 GHCi 并运行示例：

```
λ> :l foo
[1 of 1] Compiling Main             ( foo.hs, interpreted )

foo.hs:2:1: Warning: Unrecognised pragma
Ok, modules loaded: Main.
λ> (==2) :: Int -> Bool
function: Int -> Bool 
```

但是，我希望看到每个函数都在调用时打印自己。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T07:19:46.520

您不能将其用于一般函数，因为类型信息仅在编译时出现，但`Typeable`如果类型是类的实例，则使用类来编写足够接近的内容`Typeable`。

```
import Data.Typeable

instance (Typeable a, Typeable b) => Show (a -> b) where
    show f = "Function: " ++ (show $ typeOf f) 
```

在 ghci 中测试这个

```
*Main> (+)
Function: Integer -> Integer -> Integer
*Main> (+10)
Function: Integer -> Integer 
```

但这不适用于一般函数，直到类型被限制为具有`Typeable`实例的类型。

```
*Main> zip

<interactive>:3:1:
    Ambiguous type variable `a0' in the constraint:
      (Typeable a0) arising from a use of `print'
    Probable fix: add a type signature that fixes these type variable(s)
    In a stmt of an interactive GHCi command: print it

<interactive>:3:1:
    Ambiguous type variable `b0' in the constraint:
      (Typeable b0) arising from a use of `print'
    Probable fix: add a type signature that fixes these type variable(s)
    In a stmt of an interactive GHCi command: print it
*Main> zip :: [Int] -> [Bool] -> [(Int,Bool)]
Function: [Int] -> [Bool] -> [(Int,Bool)] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T05:49:41.237

我假设您希望该`show`方法打印函数的*地址*，这就是 Python 所做的：

```
>>> def foo(a):
...     return a
... 
>>> print foo
<function foo at 0xb76f679c> 
```

确实没有支持的方法（Haskell 是一种安全的高级语言，它从函数指针等低级细节中抽象出来），除非您愿意使用内部 GHC 函数`unpackClosure#`：

```
{-# LANGUAGE MagicHash,UnboxedTuples,FlexibleInstances #-}
module Main
       where

import GHC.Base
import Text.Printf

instance Show (a -> a) where
  show f = case unpackClosure# f of
    (# a, _, _ #) -> let addr = (I# (addr2Int# a))
                     in printf "<function ??? at %x>" addr

main :: IO ()
main = print (\a -> a) 
```

测试：

```
$ ./Main 
<function ??? at 804cf90> 
```

不幸的是，没有办法获得函数的名称，因为它根本不存在于编译的可执行文件中（可能有调试信息，但你不能指望它的存在）。如果您的函数可以从 C 中调用，您还可以使用 C 帮助程序获取其地址。

# c# - 如何访问 .jls 文件的内容（JPEG-LS 压缩）或其比特流，以便我可以使用 C# 进一步压缩它？

> ID：12879331
> 
> 赞同：1
> 
> 时间：2012-10-14T04:35:31.270
> 
> 标签：c#, compression, jpeg, filestream, file-access

JPEG-LS 是一种用于连续色调图像的无损图像压缩算法。使用 JPEG-LS 压缩的图像会生成一个扩展名为“.jls”的文件。

如何使用 C# 访问此文件，或者如何访问其比特流，以便进一步压缩它？

我尝试在 C# 中使用 Bitmap，将其存储在 Bitmap 中，但它不支持它。我尝试通过记事本打开它，但它被编码为某种未知格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:57:16.777

您可以尝试[CharLS](http://charls.codeplex.com/)，一个开源 JPEG-LS 库。

# arrays - 棘手的数学！K 个 N 大小的数组（总 KxN），需要大小为 N 的所有可能排列

> ID：12879336
> 
> 赞同：1
> 
> 时间：2012-10-14T04:36:58.103
> 
> 标签：arrays, math, permutation, combinations, digits

所以例如我有：两个大小为 3 的数组包含

```
[1,2,3] and [7,8,9] 
```

现在我需要找出所有可能的排列，如果我要将它们放入一个大小为 N 的数组中。它们并不都需要包括在内（很明显它们不能，因为数组太小了）

规则：每个数字必须在新排列的自己的索引中（所以数字 1 在索引 0 中，它必须在新排列的索引 0 中）。注意：数字总是不同的

所以解决方案是（这些数组的顺序无关紧要）：

```
[1,2,3]
[1,8,3]
[1,2,9]
[1,8,9]
[1,2,9]
[7,2,3]
[7,8,3]
[7,8,9]
[7,2,9] 
```

但是现在我需要为任意数量的数组编程；它们将始终具有相同的大小。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:48:56.977

对于每个索引，有两种选择。因此，有 2^3 = 8 个排列。解决方案：

```
results := [[]]
for a, b in A, B
    results :=
        results.map(result => a + result) +
        results.map(result => b + result) 
```

其中 + 表示连接

# jquery - Jquery：将第一个 li 孩子附加到列表的末尾

> ID：12879338
> 
> 赞同：3
> 
> 时间：2012-10-14T04:37:20.350
> 
> 标签：jquery, html-lists, append

```
<ul>
<li>first children</li>
<li>second children</li>
<li>third children</li>
</ul> 
```

如何使用 Jquery 删除第一个孩子并将其附加到 ul 列表的末尾？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T04:41:27.267

有许多方法可以使用，例如`appendTo`方法。

```
$('ul li:first').appendTo('ul')​​​​; 
```

[http://jsfiddle.net/Mb42Z/](http://jsfiddle.net/Mb42Z/)

或`insertAfter`方法：

```
var $li = $('ul li');
$li.eq(0).insertAfter($li.last()) 
```

请注意，元素被移动而不是被移除。

*   [追加到](http://api.jquery.com/appendTo/)
*   [插入之后](http://api.jquery.com/insertAfter/)
*   [：第一的](http://api.jquery.com/first-selector/)
*   [最后的](http://api.jquery.com/last/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T04:45:58.227

您可以使用：

```
var lis = $('ul li');
lis.first().insertAfter(lis.last())​​​​; 
```

# java - type JList 不带参数类型

> ID：12879342
> 
> 赞同：3
> 
> 时间：2012-10-14T04:37:56.293
> 
> 标签：java, swing, jlist

当我尝试编译一些代码时，我不断收到这些错误：

```
CCC.java:21: type javax.swing.JList does not take parameters
JList<String> list; 
```

或者：

```
CCC.java:30: type javax.swing.DefaultListModel does not take parameters
DefaultListModel<String> jobs, DefaultListModel<String> closJ) throws HeadlessException { 
```

当我尝试删除我得到大约 150 行错误的部分时，我有大约 26 个相同的错误，任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T04:48:29.263

[Java 7 中将泛型添加到 JList 中。以下是JList 文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html)中的示例：

```
String[] data = {"one", "two", "three", "four"};
JList<String> myList = new JList<String>(data); 
```

确保您使用的是 Java 7+。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T04:39:56.573

假设您使用的是 Java 1.6

[DefaultListModel](http://docs.oracle.com/javase/1.6.0/docs/api/javax/swing/DefaultListModel.html)不是泛型类，您不能通过传递具体参数来实例化它，同样如此`JList`。

只需更改您的代码，例如：

```
JList list; 
```

和

```
 DefaultListModel jobs 
```

# sql - 有多个条件时如何从表中删除值？

> ID：12879345
> 
> 赞同：0
> 
> 时间：2012-10-14T04:38:27.673
> 
> 标签：sql, oledb, sql-delete, oledbcommand

我正在尝试从 Table 中删除 index=Textbox1.Text 和 idnmb=Textbox2.Text 的所有数据当我删除这部分 **+ "AND id_nmb = " + data2**时，它可以工作，但不是我想要的。

**我有这个代码：**

```
private void button1_Click(object sender, RoutedEventArgs e)
        {
            var data1 = this.textBox1.Text;
            var data2 = this.textBox2.Text;

            OleDbCommand cmd = new OleDbCommand("DELETE FROM Table WHERE index = " + data1 + "AND idnmb = " + data2 , con);

            cmd.Connection = con;

            int temp = cmd.ExecuteNonQuery();

            if (temp > 0)
            {
                MessageBox.Show("OK !");
            }
            else
            {
                MessageBox.Show("Some error !");
            }
        }
        } 
```

它给了我这个消息：**没有为一个或多个必需参数提供值。** 知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:46:31.080

简短的回答可能是您在字符串中的 AND 之前需要一个空格。看起来您假设将在每个文本框中输入数字，但您没有强制执行，因此根据这些文本框的内容可能会出现不同的错误。

更长的答案是不要这样做！[您正在向SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)开放您的代码。请改用参数化查询，[如本参考中所示](http://www.csharp-station.com/Tutorials/AdoDotNet/Lesson06.aspx)。

# python - 卡尔曼滤波器如何在 Opencv python 中跟踪多个对象？

> ID：12879346
> 
> 赞同：3
> 
> 时间：2012-10-14T04:38:29.587
> 
> 标签：python, opencv, kalman-filter

我不了解使用 python 跟踪和标记多个移动对象的过程。我可以通过将每一帧转换为灰度，然后进行模糊，然后进行 BGS 来隔离移动对象（尽管二进制图像仍然包含大量噪声）。

我找到了带有 的轮廓`cv2.findContours()`，这给了我作为 numpy 矩阵列表的斑点。我想使用卡尔曼滤波器来跟踪这些斑点，因为它非常擅长在存在噪声的情况下预测斑点的位置。然而，在我看来，考虑到 KF 的性质，找到轮廓是一个不必要的步骤，特别是因为轮廓函数返回了很多非常有问题的 blob。

我查看了[kalman filter](https://projects.developer.nokia.com/opencv/browser/opencv/opencv-2.3.1/samples/python/kalman.py)的代码，但我不知道如何告诉它跟踪 blob，更不用说告诉过滤器 blob 在哪里（或者如何单独使用 KF 创建 blob）。

我的问题是，如果 KF 事先不知道斑点是什么或在哪里，它如何处理多个对象跟踪（这就是我得到轮廓的原因，但这个结果有点可怕）。而且，一旦 KF 开始跟踪对象，它如何存储 blob 以便轻松标记？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:26:11.290

卡尔曼滤波器本身不包含多个对象跟踪机制。为此，您需要一个额外的算法：例如，如果您有未知/可变数量的对象，则使用 Reid 1979 中的多假设跟踪 (MHT)，如果您有已知数量的对象，则使用联合概率数据关联。

请注意，为了实际实现 MHT，您需要在 Cox 和 Hingorani 1996 中引入的额外改进，“Reid 的多假设跟踪的有效实现......”

# c++ - 反转字符串中的每个单词（应该处理空格）

> ID：12879348
> 
> 赞同：1
> 
> 时间：2012-10-14T04:38:47.203
> 
> 标签：c++, c, string

例子：

```
char test1[] = "               ";
char test2[] = "   hello  z";
char test3[] = "hello world   ";
char test4[] = "x y z "; 
```

结果：

```
"               "
"   olleh  z"
"olleh dlrow   "
"x y z " 
```

问题：

> 反转字符串中的每个世界，忽略空格。
> 
> 以下是我的代码。基本思想是扫描字符串，当找到一个单词时，然后将其反转。该算法的复杂度为 O(n)，其中 n 是字符串的长度。
> 
> 如何验证它？有更好的解决方案吗？

```
void reverse_word(char* s, char* e)
{
    while (s < e)
    {
        char tmp = *s;
        *s = *e;
        *e = tmp;
        ++s;
        --e;
    }
}

char* word_start_index(char* p)
{
    while ((*p != '\0') && (*p == ' '))
    {
        ++p;
    }

    if (*p == '\0')
        return NULL;
    else
        return p;
}

char* word_end_index(char* p)
{
    while ((*p != '\0') && (*p != ' '))
    {
        ++p;
    }

    return p-1;
}

void reverse_string(char* s)
{
    char* s_w = NULL;
    char* e_w = NULL;
    char* runner = s;

    while (*runner != '\0')
    {
        char* cur_word_s = word_start_index(runner);
        if (cur_word_s == NULL)
            break;
        char* cur_word_e = word_end_index(cur_word_s);
        reverse_word(cur_word_s, cur_word_e);
        runner = cur_word_e+1;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T05:40:01.370

您的代码看起来是正确的，但它是纯 C。在 C++ 中，使用相同的方法，它可能看起来像这样：

```
#include <iostream>
#include <string>
#include <iterator>
#include <algorithm>
#include <cctype>

int main()
{
    std::string str = "    cat cow dog wolf     lobster";
    std::string result;
    auto it = str.begin();

    while (it != str.end()) {

        while (it != str.end() && isspace(*it)) {
            result += *it;
            ++it;
        }

        auto begin = it;
        while (it != str.end() && !isspace(*it)) {
            ++it;
        }
        auto end = it;

        result.append(std::reverse_iterator<decltype(end)>(end),
                      std::reverse_iterator<decltype(begin)>(begin));

        // if you want to modify original string instead, just do this:
        std::reverse(begin, end);
    }

    std::cout << result <<'\n';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-21T14:40:18.993

就地，ANSI C89。

```
#include <ctype.h>
#include <stdio.h>

void reverse(char *s) {
    int i = 0, j, k;
    while (1) {
        while (isspace(s[i])) i++;
        if (!s[i]) return;
        for (j = i; !isspace(s[j]) && s[j] != '\0'; j++);
        for (k = 0; k < (j - i) / 2; k++) {
            char t = s[i + k];
            s[i + k] = s[j - k - 1];
            s[j - k - 1] = t;
        }
        i = j;
    }
}

int main(int argc, char**argv) {
    if (argc != 2) return 1;
    reverse(argv[1]);
    printf("%s\n", argv[1]);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T08:21:27.100

```
#include<iostream>
#include<string.h>

using namespace std;

int main()
{
    char s[89];
    cout << "enter\n";
    gets(s);
    int k;
    int p = strlen(s);
    strcat(s," ");

    for(int i=0; i <= p; i++)
    {
        if(s[i]==' ')
        {
            for (k = i-1; (k != -1) && (s[k] != ' '); k--)
                cout<<s[k];
            cout<<" ";
        }
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-07T14:02:43.700

```
#include<iostream>
#include<cstring>
using namespace std;
int main()
{
    char str[100],a[10],s[100]=" ";
    int i,j;
    cout<<"enter a string";
    cin.getline(str,100);
    strcat(s,str);
    for(i=0;s[i]!='\0';i++)
    {
        if(s[i]==' '&&s[i+1]!=' '&&s[i+1]!='\0')
        {
            cout<<" ";
            if(i==0)cout<<"\b";
            j=i+1;
            while(s[j]!=' '&&s[j]!='\0')
            {
                j++;
            }
            j--;
            while(s[j]!=' ')
            {
                cout<<s[j];
                j--;
            }
        }
        else if(s[i]==' ')
        {
            cout<<" ";
            if(i==0)cout<<"\b";
        }
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-02-20T08:19:34.993

```
#include <iostream>
#include<string.h>
#include<stdio.h>
using namespace std;
void Reverse_Each(char st[60])
{ 
    int  i,j,k=0,p=0,l;
    char sr[60]; 
    l=strlen(st);
    for(i=0;i<=l;i++) {
    if((st[i]==' ')||(st[i]=='\0')) {
        for(j=i-1;j>=p;j--) { 
            sr[k]=st[j]; k++;
        }
        sr[k]=' '; k++; p=i+1;}
    }
    for(i=0;i<p;i++) 
    cout<<sr[i]; 
} 

int main(){
    char s[60];
    gets(s);
    Reverse_Each(s);
    return 0;
} 
```

# ruby-on-rails - 在没有 SSH 的情况下部署 Ruby on Rails 应用程序

> ID：12879353
> 
> 赞同：0
> 
> 时间：2012-10-14T04:39:34.240
> 
> 标签：ruby-on-rails

我有 LunarPages 的网络托管，它们足以在我的托管上设置一个 Ruby on Rails 应用程序，但现在我不太明白如何部署我在本地机器上构建的 RoR 应用程序，我可能不是在抓路由。例如，如果我使用 Posts 创建一个基本的博客应用程序，我将如何路由它，以便当我转到 RoR 应用程序所在的 URL 时，它会显示帖子？我可以成功打开 URL 并获得 Welcome Aboard 页面。我尝试删除 index.html 页面并进行一些简单的路由但无济于事。任何提示或提示将不胜感激，在此先感谢您。

# objective-c - 调用多个 XML 文件

> ID：12879359
> 
> 赞同：0
> 
> 时间：2012-10-14T04:40:08.763
> 
> 标签：objective-c, xml, ipad, nsxmlparser

在我的应用程序（iPad 应用程序）中，我有 5 个文件夹，在每个文件夹中我有一个 XML 文件。我的问题是，如何在我的 appDelegate 中调用所有 .xml 文件

我有 file1.xml、file2.xml、file3.xml、file4.xml、file5.xml（这是一个要求）

对于调用或添加 file1 xml 的路径，我有以下代码：

```
NSString *xml = [[NSBundle mainBundle] pathForResource:@"file1" ofType:@"xml"];
NSData *Data = [NSData dataWithContentsOfFile:xml];
NSXMLParser *Parser = [[NSXMLParser alloc] initWithData:Data];
file1 *parser = [[file1 alloc] initXMLParser]; 
```

但是我怎样才能在我的 appDelegate 类中拥有全部 5 个呢？

我是否需要为每个创建特定的解析器类，或者因为所有信息和标签都是相同的，所以我只需要在我的 appDelegate 中添加所有

**编辑：**

我必须从他们的文件夹中给他们打电话，例如我不能改变结构

文件夹1/file1.xml

文件夹2/file2.xml

Folder3/file3.xml 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:30:14.587

是的，您需要为`NSXMLParser`要解析的每个 XML 文件实例化一个对象。正如 kimsnarf 所说，加载 XML 文件的简单方法是：使用 for 循环并按顺序加载它们。如果它们在捆绑包中（它们似乎是），我会将它们粘贴在“资源”下的特定路径中，例如“资源/SpecialXMLJunk”，然后通过迭代类似的结果来加载它们`URLsForResourcesWithExtension:subdirectory:`（用于从“Resources/SpecialXMLJunk”中获取 XML 文件）。所以，伪代码，可能是这样的：

```
NSArray *xmlResourceURLs = [mainBundle
                            URLsForResourcesWithExtension: @"xml"
                            subdirectory: xmlResourcesPath];
foreach (NSURL *xmlURL in xmlResourceURLs)
    [self loadJunkXMLAtURL: xmlURL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:52:00.830

创建一个 for 循环并一个一个地加载/解析文件。无论如何，您都应该将解析后的数据存储在某个地方（在缓存或数据库中），这样您就不需要在解析后保留文件和解析器。而是从缓存/数据库中检索数据。

# eclipse - 如何用远程副本替换我的本地副本？

> ID：12879364
> 
> 赞同：0
> 
> 时间：2012-10-14T04:40:37.923
> 
> 标签：eclipse, svn, subclipse, assembla

我正在使用 Eclipse+subclipse，它在 assembla 中托管我的代码。远程副本（保存在汇编中）是最新版本。我的本地副本不是最新的。我想用汇编中的远程文件替换我的本地副本（实际上它只是一个 .jsp 文件）。我应该采取什么行动？合并？更新？报到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:55:23.927

您有多种选择，但也许最简单的方法是将您当前的本地存储库移动到不同的目录并签出一个新的存储库。如果您不关心本地存储库，则没有理由混淆合并。

# bluej - 缺少退货声明？

> ID：12879368
> 
> 赞同：0
> 
> 时间：2012-10-14T04:41:26.067
> 
> 标签：bluej

这是我的代码。当我使用 bluej 编译时，它会突出显示最后一个 } 并说缺少 return 语句。我不能放 void 因为它是一个布尔值。有任何想法吗？

```
 public boolean runAJob() {
     boolean jobsFinished = false;
     Job firstJob = getCurrentJob();
     String jobName = firstJob.getName();
     int jobDuration = firstJob.getDuration();
     if (!myJob.isEmpty()&& jobDuration > 0 && jobDuration <= myTotalDuration) { 
         myTotalDuration -= jobDuration;
         myFinishedJobs.add(myJob.get(0));
         myJob.remove(0);
         System.out.println("'"+jobName+"'" +" is completed. "+ myTotalDuration+ " seconds remaining on the clock");
         jobsFinished = true;
    } else {
          System.out.println("JobQueue is empty");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:46:59.193

在 Java 中，与在类 C 语言中一样，需要基于方法/函数的返回类型的 return 语句。

在你的情况下：

```
public boolean runAJob() { ... } 
```

要求返回一个**布尔值**。**因此，当您尝试编译代码并且方法体中没有 return 语句时，编译器会报错。**

因此，您要做的是确定您希望返回的信息（在这种情况下为布尔值）。正如其他人指出的那样，您应该返回**jobsFinished 因为这是一个布尔类型，您希望在方法调用时确定其值**。

```
 public boolean runAJob()
    {
        boolean jobsFinished = false;
        Job firstJob = getCurrentJob();
        String jobName = firstJob.getName();
        int jobDuration = firstJob.getDuration();
        if (!myJob.isEmpty()&& jobDuration > 0 && jobDuration <= myTotalDuration)
        { 
             myTotalDuration -= jobDuration;
             myFinishedJobs.add(myJob.get(0));
             myJob.remove(0);
             System.out.println("'"+jobName+"'" +" is completed. "+ myTotalDuration+ " seconds remaining on the clock");
             jobsFinished = true;
             return jobsFinished; //this is one possible place

        }
        else
        {
            System.out.println("JobQueue is empty");
        }
        //here is another possible place where you could have put the return
        //return jobsFinished;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:04:51.163

**return 语句必须始终是方法中的最后一条语句**

```
public boolean runAJob()
    {
        boolean jobsFinished = false;

        Job firstJob = getCurrentJob();

        String jobName = firstJob.getName();

        int jobDuration = firstJob.getDuration();

        if (!myJob.isEmpty()&& jobDuration > 0 && jobDuration <= myTotalDuration)

        { 

             myTotalDuration -= jobDuration;

             myFinishedJobs.add(myJob.get(0));

             myJob.remove(0);

             System.out.println("'"+jobName+"'" +" is completed. "+ myTotalDuration+ " 
```

时钟上剩余的秒数");

```
 jobsFinished = true;

        }

        else

        {

            System.out.println("JobQueue is empty");

        }

        return jobsFinished;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-18T16:36:13.033

更改您的函数定义/原型...使用它`public void runAJob()`而不是您使用的...

在原型中替换`boolean`为`void`..然后尝试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-13T22:02:38.510

你只是忘了把返回的工作完成；在 System.out.print 行结束之后。当你这样做时，它应该可以成功运行和编译，我确信这一点，因为我今天犯了同样的错误：P

祝你好运。

-基伦

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-18T17:00:10.173

您已指定`boolean`返回类型，但您的函数不返回任何值。

该`jobsFinished`变量是多余的，您的`else`分支也是如此：

```
public boolean runAJob() {
    Job firstJob = getCurrentJob();    
    int jobDuration = firstJob.getDuration();

    if (!myJob.isEmpty() && jobDuration > 0 && jobDuration <= myTotalDuration) { 
        String jobName = firstJob.getName();
        myTotalDuration -= jobDuration;
        myFinishedJobs.add(myJob.get(0));
        myJob.remove(0);
        System.out.println("'"+jobName+"'" +" is completed. "+ myTotalDuration+ " seconds remaining on the clock");
        return true;
    } 

    System.out.println("JobQueue is empty");
    return false;
} 
```

如果满足条件，则该函数`return`无论如何都会在最后两个语句之前，因此`else`没有必要。我还移动了分支`String jobName = firstJob.getName();`内部，`if`因为您没有在其他情况下使用它。

如果您更喜欢在函数末尾使用`boolean`变量`return`，那么您可以这样做：

```
public boolean runAJob() {
    Job firstJob = getCurrentJob();    
    int jobDuration = firstJob.getDuration();
    boolean jobsFinished = !myJob.isEmpty() && jobDuration > 0 && jobDuration <= myTotalDuration;
    if (jobsFinished) { 
        String jobName = firstJob.getName();
        myTotalDuration -= jobDuration;
        myFinishedJobs.add(myJob.get(0));
        myJob.remove(0);
        System.out.println("'"+jobName+"'" +" is completed. "+ myTotalDuration+ " seconds remaining on the clock");            
    } 
    else {
        System.out.println("JobQueue is empty");
    }   
    return jobsFinished;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T04:43:09.647

你应该简单地返回jobsFinished。

要清楚：

```
public boolean runAJob()
        {
            boolean jobsFinished = false;
            Job firstJob = getCurrentJob();
            String jobName = firstJob.getName();
            int jobDuration = firstJob.getDuration();
            if (!myJob.isEmpty()&& jobDuration > 0 && jobDuration <= myTotalDuration)
            { 
                 myTotalDuration -= jobDuration;
                 myFinishedJobs.add(myJob.get(0));
                 myJob.remove(0);
                 System.out.println("'"+jobName+"'" +" is completed. "+ myTotalDuration+ " seconds remaining on the clock");
                 jobsFinished = true;
            }
            else
            {
                System.out.println("JobQueue is empty");
            }
            return jobsFinished;
        } 
```

# ruby-on-rails - 绕过Ruby on Rails中登录用户的缓存检查？

> ID：12879371
> 
> 赞同：1
> 
> 时间：2012-10-14T04:41:33.400
> 
> 标签：ruby-on-rails, caching

我在我的控制器中使用 cache_action，我想绕过检查某些页面上登录用户的缓存。我的登录系统是 Devise/Omniauth。

我想我会在缓存系统中找到可以集成到 before_filter 中的东西，但没有骰子。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:46:12.297

我相信你可以做这样的事情，但我自己从未尝试过：

```
caches_action :index, :unless => lambda { user_signed_in? } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T21:18:17.070

从 Rails 4 开始，您可以使用 CacheHelper 的[cache_unless](http://api.rubyonrails.org/v4.0/classes/ActionView/Helpers/CacheHelper.html#method-i-cache_unless)和 Devise 的`user_signed_in?`

```
<%= cache_unless user_signed_in?, project do %>
  <b>All the topics on this project</b>
  <%= render project.topics %>
<% end %> 
```

# java - 如何将时间戳存储到 db4o 数据库中

> ID：12879375
> 
> 赞同：2
> 
> 时间：2012-10-14T04:41:59.297
> 
> 标签：java, timestamp, field, db4o, transient

我正在尝试将时间戳存储到 db4o 数据库中，但是存储几分钟前的存储时间戳与当前日期有很大不同。

以下是示例输出：

```
1969-12-31 19:00:00.741
1969-12-31 19:00:00.772
2012-10-14 00:23:22.713 
```

在我运行我的代码三次后，之前存储的两个时间戳存储为 1969-12-31 19:00:00.7xx。

这是代码。

```
import java.sql.Timestamp;

import com.db4o.Db4oEmbedded;
import com.db4o.ObjectContainer;
import com.db4o.ObjectSet;
import com.db4o.config.EmbeddedConfiguration;

public class dbTest {

  public static void listResults(ObjectSet<Timestamp> results) {

    for (Timestamp o : results) {
      System.out.println(o);
    }
  }

  public static void main(String[] args) {

    EmbeddedConfiguration config = Db4oEmbedded.newConfiguration();
    config.common().objectClass(Timestamp.class).storeTransientFields(true);

    ObjectContainer container = Db4oEmbedded
        .openFile(config, "timestamps.db4o");

    try {

      long now = System.currentTimeMillis();
      container.store(new Timestamp(now));

      final ObjectSet<Timestamp> results = container.query(Timestamp.class);
      listResults(results);
    }
    finally {
      container.close();
    }
  }
} 
```

我阅读了下面两篇相关文章，但问题尚未解决。

[第 1](https://stackoverflow.com/questions/8014691/storing-an-object-containing-a-calender-object-in-a-db4o-local-database-cannot)条和[第 2 条](http://community.versant.com/documentation/reference/db4o-7.0/java/reference/html/reference/usage_pitfalls/storing_timestamp_and_date_values.html)

请告诉我如何解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:14:17.870

通过添加一行来解决此问题：

```
config.common().objectClass(Timestamp.class).translate(new TSerializable()); 
```

我在 db4o 论坛上得到了 Vidisha 和 Claude 的帮助。在这里我分享答案，希望也能帮助其他人。这是新代码。

```
import java.sql.Timestamp;   

import com.db4o.Db4oEmbedded;   
import com.db4o.ObjectContainer;   
import com.db4o.ObjectSet;   
import com.db4o.config.EmbeddedConfiguration;   

public class dbTest {   

  public static void listResults(ObjectSet<Timestamp> results) {   

    for (Timestamp o : results) {   
      System.out.println(o);   
    }   
  }   

  public static void main(String[] args) {   

    EmbeddedConfiguration config = Db4oEmbedded.newConfiguration();   
    config.common().objectClass(Timestamp.class).translate(new TSerializable());   
    ObjectContainer container = Db4oEmbedded   
        .openFile(config, "timestamps.db4o");   

    try {   

      long now = System.currentTimeMillis();   
      container.store(new Timestamp(now));   

      final ObjectSet<Timestamp> results = container.query(Timestamp.class);   
      listResults(results);   
    }   
    finally {   
      container.close();   
    }   
  }   
} 
```

建议您使用 db4o 可以正确处理的 JDK Date。

# node.js - express.js 不异步调用相同的路由器回调？

> ID：12879376
> 
> 赞同：1
> 
> 时间：2012-10-14T04:42:01.910
> 
> 标签：node.js, express

当调用'/a' 时，'/b' 可以立即执行。但是如果我调用另一个'/a'，第二个会等待第一个结束。我怎样才能让'/a'真正异步调用？

代码：

```
app.get '/a', (req, res, next) ->
  f = ->
    res.send 'a' 
    console.log 'end', new Date()
  console.log 'sleep', new Date()
  setTimeout f, 10000

app.get '/b', (req, res, next) ->
  res.send 'b' 
```

输出：

```
Express server listening on port 3000 in development mode
sleep Sun Oct 14 2012 12:37:52 GMT+0800 (SGT)
GET /b 200 9ms - 1
end Sun Oct 14 2012 12:38:02 GMT+0800 (SGT)
GET /a 200 10022ms - 1
sleep Sun Oct 14 2012 12:38:02 GMT+0800 (SGT)
end Sun Oct 14 2012 12:38:12 GMT+0800 (SGT)
GET /a 200 10005ms - 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:52:32.203

我明白了，这是因为我在同一个浏览器上运行了两个 '/a'。我只是尝试在 chromium 中运行一个，在 Firefox 中运行另一个，它们是异步处理的。看起来很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T05:23:48.473

比尔，我用你的代码得到了不同的结果。我通过浏览器运行这些。我在只有一个内核的 Linux 上使用 Express 3。

```
 express:application booting in development mode +0ms
  connect:dispatcher use / query +0ms
  connect:dispatcher use / expressInit +0ms
  connect:dispatcher use / router +2ms
  express:router defined get /a +0ms
  express:router defined get /b +1ms
  connect:dispatcher query +12s
  connect:dispatcher expressInit +2ms
  connect:dispatcher router +0ms
  express:router dispatching GET /a (/a) +12s
  express:router matched get /a +0ms
sleep Sun Oct 14 2012 13:20:37 GMT+0800 (SGT)
  connect:dispatcher query +3s
  connect:dispatcher expressInit +0ms
  connect:dispatcher router +0ms
  express:router dispatching GET /b (/b) +3s
  express:router matched get /b +1ms
end Sun Oct 14 2012 13:20:47 GMT+0800 (SGT)
  connect:dispatcher query +6s
  connect:dispatcher expressInit +0ms
  connect:dispatcher router +0ms
  express:router dispatching GET /a (/a) +6s
  express:router matched get /a +0ms
sleep Sun Oct 14 2012 13:20:47 GMT+0800 (SGT)
end Sun Oct 14 2012 13:20:57 GMT+0800 (SGT) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T05:04:58.763

我不确定你看到了什么。当我运行测试时，我得到了预期的结果——请求`\a`被异步处理。如果您尝试以下代码并执行它，`DEBUG=* node app.js`您会得到与我相同的结果吗？

```
var express = require('express'),
    app = express();

app.get('/a', function (req, res, next) {
  var f = function () {
    res.send('a');
    console.log('end', new Date());
  };

  console.log('sleep', new Date());
  setTimeout(f, 10000);
});

app.get('/b', function (req, res, next) {
  res.send('b');
});

app.listen(4000); 
```

这是在前两个处于睡眠状态时运行两个请求`\a`和一个请求的输出。`\b`

```
 express:router dispatching GET /a (/a) +52s    // first call to \a
  express:router matched get /a +1ms
sleep Sat Oct 13 2012 21:59:42 GMT-0700 (PDT)     
  connect:dispatcher query +530ms
  connect:dispatcher expressInit +1ms
  connect:dispatcher router +0ms
  express:router dispatching GET /a (/a) +530ms  // second call to \a in parallel
  express:router matched get /a +0ms
sleep Sat Oct 13 2012 21:59:42 GMT-0700 (PDT)
  connect:dispatcher query +874ms
  connect:dispatcher expressInit +0ms
  connect:dispatcher router +0ms
  express:router dispatching GET /b (/b) +874ms  // call to \b handled immediately
  express:router matched get /b +0ms
end Sat Oct 13 2012 21:59:52 GMT-0700 (PDT)   // first call to \a ends
end Sat Oct 13 2012 21:59:52 GMT-0700 (PDT)   // second call ends at same time 
```

您可以看到请求`\b`立即完成，然后两个请求`\a`都在 10 秒后完成，这意味着它们实际上是并行处理的（正如预期的那样）。

# php - 使用 Post 方法自动登录

> ID：12879377
> 
> 赞同：2
> 
> 时间：2012-10-14T04:42:13.120
> 
> 标签：php, curl

我正在尝试使用 PHP CURL 方法尝试自动登录到应用程序。

该应用程序的网址是： [https ://www.test.accounts.xerox.com/auth/login.jsf?Xcntry=USA&Xlang=en_US&next_page=https://uscbopoc.external.xerox.com:4430/eservice_enu/](https://www.test.accounts.xerox.com/auth/login.jsf?Xcntry=USA&Xlang=en_US&next_page=https://uscbopoc.external.xerox.com:4430/eservice_enu/)

我调用 CURL 请求的 PHP 代码是：

```
 $url = 'https://www.test.accounts.xerox.com/auth/login.jsf?Xcntry=USA&Xlang=en_US';
 $cookie = "cookie.txt";   
 $postData    = array( 
                       '_id171:username' => 'XXXX',
                       '_id171:password' => 'XXXX',
                       '_id171:submitLogin' => '_id171_SUBMIT',
                       'nextpage' => 'next_page=https://uscbopoc.external.xerox.com:4430/eservice_enu/'
                      );

 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, $url);
 //curl_setopt($ch, CURLOPT_HTTPHEADER

 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 0);
 curl_setopt($ch, CURLOPT_POST, true);
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
 curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4");
 curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
 curl_setopt($ch,CURLOPT_HTTPHEADER,array(
                                          'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                                          'Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3',
                                          'Accept-Encoding: gzip,deflate,sdch',
                                          'Accept-Language: en-US,en;q=0.8',
                                          'Cache-Control: max-age=0',
                                          'Connection: keep-alive',
                                          'Content-Type:application/x-www-form-urlencoded',
                                          'Host:www.test.accounts.xerox.com',
                                          'Origin:https://www.test.accounts.xerox.com'
                                          ));

 curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
 curl_setopt($ch,CURLOPT_REFERER,'https://www.test.accounts.xerox.com/auth/login.jsf?Xcntry=USA&Xlang=en_US&next_page=https://uscbopoc.external.xerox.com:4430/eservice_enu/');
 curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
 curl_setopt ($ch, CURLOPT_COOKIEJAR,"c:\\wamp\www\\cookie.txt");
 curl_setopt ($ch, CURLOPT_COOKIEFILE,"c:\\wamp\www\\cookie.txt");

 curl_close($ch);
 return $output; 
```

下面是我的 curl_getinfo 函数输出

```
 array
   'url' => string 'https://www.test.accounts.xerox.com/auth/login.jsf?Xcntry=USA&Xlang=en_US' (length=73)
   'content_type' => string 'text/html;charset=UTF-8' (length=23)
   'http_code' => int 200
   'header_size' => int 648
   'request_size' => int 778
   'filetime' => int -1
   'ssl_verify_result' => int 20
   'redirect_count' => int 0
   'total_time' => float 0.969
   'namelookup_time' => float 0
   'connect_time' => float 0.078
   'pretransfer_time' => float 0.407
   'size_upload' => float 568
   'size_download' => float 96789
   'speed_download' => float 99885
   'speed_upload' => float 586
   'download_content_length' => float -1
   'upload_content_length' => float 568
   'starttransfer_time' => float 0.469
   'redirect_time' => float 0
   'certinfo' => 
   array
   empty
   'redirect_url' => string '' (length=0) 
```

但我总是得到一个登录页面作为响应。我认为主要问题可能出在 cookie 上，但我是 PHP 和 CURL 的新手，所以我不确定。

如果有人能指出正确的方向，我还有一些关于 CURL 的一般性问题：

1.  确定发布请求所需的参数（标题、POST 字段）的最佳方法是什么？（我知道一个是 Firebug）但是有可用的工具吗？

> Ans：我使用了 HTTPFox（一个 firefox 插件），发现它非常适合确定 post 请求参数以及捕获和查看 cookie 信息

1.  调试 CURL 发布请求的最佳方法是什么？

2.  我们应该将登录页面作为 URL 还是表单中提供的操作属性的 url 提供？

> Ans：到目前为止，使用 Action 参数值的 post 请求对我有用。

### 编辑 - - - -

在我提供参数的绝对路径后，代码开始工作

```
 CURLOPT_COOKIEJAR
  CURLOPT_COOKIEFILE 
```

我已经更新了代码以反映相同的情况，并且我还必须先执行一个简单的 get 来获取发布工作所需的初始 cookie 集。

GET 请求具有相同的 curl 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:58:05.580

> 确定发布请求所需的参数（标题、POST 字段）的最佳方法是什么？（我知道一个是 Firebug）但是有可用的工具吗？

是的，Firebug 是一个可用的工具。这里的要点是您需要在请求工作的地方进行检查，因此通常是浏览器内的工具，例如 Firebug 或 Chromium 开发人员工具。

> 调试 CURL 发布请求的最佳方法是什么？

卷曲详细选项。

> 是否有任何在线教程可以通过示例解释高级 CURL 功能？

当然，只需搜索stackoverflow。这里只是一个详细的例子：

*   [使用 php CURL 从 http post 获取内容正文](https://stackoverflow.com/questions/9707551/getting-content-body-from-http-post-using-php-curl/9707622#9707622)

> 我们应该将登录页面作为 URL 还是表单中提供的操作属性的 url 提供？

这取决于您需要做什么，通常无法回答。

# asp.net - ASP.NET 会话管理 - 用户决定 Cookie 或 HttpSessionState

> ID：12879378
> 
> 赞同：0
> 
> 时间：2012-10-14T04:42:35.660
> 
> 标签：asp.net, session, cookies, session-state

我现在正在开发一个小型 Web 应用程序，部分要求是允许用户选择如何管理他们的会话：使用 cookie 或 HttpSessionState。我研究了如何使用 cookie (http://www.codeproject.com/Articles/31914/Beginner-s-Guide-To-ASP-NET-Cookies) 和 Sessions (http://msdn.microsoft.com/en -us/library/ms178581(v=vs.100).aspx)。我将使用非持久性 cookie。

该应用程序将收集有关用户的一些数据（姓名、年龄、学校），并获取此会话数据并根据用户输入的数据在另一个页面上显示消息。

我遇到的问题是如何处理用户将如何选择管理。该信息也是会话的一部分！将在 Web 应用程序的每个页面上检查选择。

我研究了全局变量（http://www.dotnetperls.com/global-variables-aspnet），但这不是一个好方法，因为它可以在不同的用户之间共享，这不是我想要的！如果我错了，请纠正我。如何在不实际使用会话或 cookie 的情况下通过会话临时存储这些数据？

甚至可以在 cookie 和会话互斥的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:06:40.120

归根结底，您应该将其保存在某个地方。此选项如果不是持久的，因为每次用户访问网站时可能会询问/更改它，最简单的方法是将其保存在隐藏的 html 字段中。当用户提交表单时，如果您使用的是 html 表单，则该值将传递到下一页。或者您可以检索该值并在 asp.net 中手动发送（例如 Transfer）。

您也可以使用 ViewState（不推荐）。如果信息应该是未来的持久化信息，请尝试使用 ASP.net 中的用户配置文件并将其保存为数据库中的自定义字段。这个真的很麻烦。

# ios6 - 使用 iPad 的 CollectionView 自定义 Segue

> ID：12879383
> 
> 赞同：1
> 
> 时间：2012-10-14T04:43:23.157
> 
> 标签：ios6, uistoryboardsegue, uicollectionview, collectionview

我有一个我正在开发的 iPad 应用程序。我有一个 UICollectionViewController 与单元格中显示的图像。

在 MainViewController 上，我放置了一个 ContainerView，它连接到具有 UIImageView 的 UIViewController。

这一切（上图）工作正常。

我想进行设置，因此我有一个从 CellViewController 到包含 UIImageView 的 UIViewController 的自定义 Segue。我希望这个 UIImageView 根据我从 CollectionView 中显示的单元格中选择的图像进行更改

我可以创建一个自定义 Segue 来执行此操作吗？我无法让任何其他 segues 工作，因为它们适用于 SplitViews 或 Popovers 或 Pushes。

# asp.net-mvc-3 - 我究竟做错了什么？条目未登录到数据库

> ID：12879386
> 
> 赞同：0
> 
> 时间：2012-10-14T04:44:46.823
> 
> 标签：asp.net-mvc-3, c#-4.0

这是索引：它通过文件夹并应将条目添加到数据库。但是当我运行它时，没有添加任何条目。这段代码有问题吗？（基本上代码通过几个文件夹获取文件夹下的图像文件和歌曲并添加到数据库，但它不起作用。）

```
public ActionResult Index()
        {            
            DemoDb db = new DemoDb();
            var movies = new List<SongModel>();
            MovieModel movie = new MovieModel();
            SongModel song = new SongModel();
            //Function to get all the folders present in that particular location,Use
            var folders = Directory.GetDirectories(Server.MapPath("~/Content/themes/base/songs"));

            foreach (var folder in folders)
            {
                movie.MovieName = new DirectoryInfo(folder).Name;
                string[] files = Directory.GetFiles(folder);
                string img = string.Empty;
                var list = new List<string>();
                foreach (var file in files)
                {
                    if (Path.GetExtension(file) == ".jpg" ||
                        Path.GetExtension(file) == ".png")
                    {
                        movie.Image = Path.Combine(Server.MapPath("~/Content/themes/base/songs"), file);
                    }
                    else
                    {
                        song.MovieId = movie.MovieId;
                        song.Song = Path.Combine(Server.MapPath("~/Content/themes/base/songs"), file);                        
                    }     
                }
                db.movies.Add(movie);
                db.songs.Add(song);
                db.SaveChanges();
            }              
            return View();
        } 
```

这里也是类和数据库设计：

```
public class MovieModel
    {
        [Key]
        public int MovieId { get; set; }
        public string MovieName { get; set; }
        public int SongId { get; set; }
        public string Image { get; set; }
    }
    public class SongModel
    {
        [Key]
        public int SongId { get; set; }
        public int MovieId { get; set; }
        public string Song { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:06:49.700

您只在上面创建了一部电影和一首歌曲。对于您覆盖电影对象中的值但从未将新对象添加到上下文中的每个文件夹，您只尝试重新添加现有电影。此外，我不会在索引 HttpGet 方法上执行此操作。根据 http 规范，重复的 GET 调用不应每次都更改系统状态（因此它应该是幂等的）

# iphone - 报亭应用后端

> ID：12879387
> 
> 赞同：0
> 
> 时间：2012-10-14T04:45:04.883
> 
> 标签：iphone, ios, newsstand-kit

我想获得一些关于运行报亭应用程序时需要什么样的后端的清晰“真实世界”信息。

我打算制作的应用程序应具有以下功能。

1.  问题，每个问题都有一堆文章。
2.  问题可以是“免费”或“付费”，具体取决于其“推送”方式
3.  自动订阅
4.  推送通知
5.  数据收集 - 从用户那里获取一些统计数据。

我目前没有服务器，在这种情况下，服务器要求是什么？我想要的只是一个印刷杂志的应用程序，本质上是一个 PDF。是否可以让 Apple 托管当前问题的数据。

除了服务器还有一个问题是，这些Issue是怎么打包的？例如，如果它是文本文件还是 pdf？

任何方向都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:32:32.937

依次考虑你的观点：

> 我目前没有服务器，在这种情况下，服务器要求是什么？我想要的只是一个印刷杂志的应用程序，本质上是一个 PDF。是否可以让 Apple 托管当前问题的数据。

Apple 不为报亭内容提供托管服务。为此，您需要自己的服务器。它需要保存问题，并且通常还响应您的应用程序关于可用问题和新问题的请求。

> 除了服务器还有一个问题是，这些Issue是怎么打包的？例如，如果它是文本文件还是 pdf？

它们以您喜欢的方式打包 - 您告诉报亭框架需要为特定问题下载哪些资产（基于您对上述问题给出的响应）通常您会将它们捆绑在一个 zip 文件中并解压缩 /下载完成后在设备上处理它。

重要的是要注意，报亭只不过是一个框架，用于启用后台下载和通知，并在应用程序的缓存目录中维护一个资产库。内容及其显示完全取决于您，开发人员。

# cpu - 在计算机系统中存储指令需要多少个记忆字

> ID：12879401
> 
> 赞同：1
> 
> 时间：2012-10-14T04:48:16.647
> 
> 标签：cpu, bit, addressing

如果计算机系统的内存模块大小为 2048 且每个字为 8 位，则它有四个字段：指定 32 个操作之一的操作码字段、用于选择 64 个寄存器之一的寄存器地址、启用以下之一的地址模式4 种模式和一个内存地址字段。

绘制指示其字段的指令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:31:00.367

咱们试试吧：

```
ooooorrr rrrmmddd dddddddd 
```

答：三个字。

我们有 32 个操作，32 是 2^5，所以我们需要 5 位来对操作进行编码。然后我们有 64 个寄存器，它是 2^6，所以我们需要 6 位来对寄存器进行编码。然后我们有 4 种寻址模式，所以多了 2 位。最后，我们有 2048 个地址，我们需要 11 位来对位移进行编码。

因此，我们总共需要 24 位（5+6+2+11）来编码单条指令。因此，假设这个机器字是 8 位宽，我们需要 3 个字来编码一条指令。

# c - 如何应用结构偏移？

> ID：12879404
> 
> 赞同：4
> 
> 时间：2012-10-14T04:49:00.500
> 
> 标签：c, visual-c++, pointers, struct, pointer-arithmetic

我有一个结构

```
typedef struct foo {
    int lengthOfArray1;
    int lengthOfArray2;
    int* array1;
    int* array2;
} foo; 
```

我需要为整个结构及其数组的内容分配足够的内存。因此，假设每个数组的长度为 5 ...

```
foo* bar = (foo*)malloc(sizeof(foo) + (sizeof(int) * 5) + (sizeof(int) * 5)); 
```

我现在必须将 array1 和 array2 指向分配的缓冲区中的正确位置：

```
bar->array1 = (int*)(&bar->lengthOfArray2 + sizeof(int));
bar->array2 = (int*)(bar->array1 + lengthOfArray2); 
```

它是否正确？

**编辑#1**

只是为了消除任何混乱：我试图将内存保持在一个块中，而不是三个。

**编辑#2**

我不能使用 C99，因为 MSVC 2010 编译器不支持它 (http://stackoverflow.com/questions/6688895/does-microsoft-visual-studio-2010-supports-c99)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T05:04:48.343

您必须分配结构的大小。然后，您必须分配具有各自大小的整数数组。

```
foo* bar = malloc(sizeof(foo));

/* somewhere in here the array lengths are set then... */

bar->array1 = malloc(sizeof(int) * bar->lengthOfArray1);
bar->array2 = malloc(sizeof(int) * bar->lengthOfArray2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T15:12:17.497

按照OP的方法，这应该可以完成工作：

```
/* Defining these types allows to change the types without having the need to modify the code. */
typedef int Foo_ArrayElement1_t;
typedef int Foo_ArrayElement2_t;

typedef struct Foo_s {
    size_t lengthOfArray1; /* 'size_t' is the type of choice for array/memory dimensions. */
    size_t lengthOfArray2;
    Foo_ArrayElement1_t * array1;
    Foo_ArrayElement2_t * array2;
} Foo_t;

/*
 * Allocates memory to hold a structure of type Foo_t including size for 
 * 's1' elements referenced by 'array1' and 's2' elements by 'array2'.
 * The arrays' elements are set to 0.
 *
 * Returns a pointer to the freshly allocated memory or NULL if the memory could not 
 * be allocated.
 */
Foo_t * Foo_CreateAndInit(size_t s1, size_t s2)
{
  /* At once allocate all 'Foo_t' (including the memory Foo_t's array pointers shall point to). */
  Foo_t * pfoo = calloc(1,
      sizeof(*pfoo) +
      s1 * sizeof(*(pfoo->array1) + 
      s2 * sizeof(*(pfoo->array2)));
  if (pfoo)
  {
    pfoo->lengthOfArray1 = s1;
    pfoo->lengthOfArray2 = s2;

    /* The first array starts right after foo. */
    pfoo->array1 = (Foo_ArrayElement1_t *) (pfoo + 1); 

    /* The second array starts right after s1 elements of where the first array starts. */
    pfoo->array2 = (Foo_ArrayElement2_t *) (pfoo->array1 + s1); /* That casting here is not 
        necessaryas long as 'Foo_t.array1' and 'Foo_t.array2' point to the same type but makes 
        the code work even if those types were changed to be different. */
  }

  return pfoo;
}

...

Foo_t * foo = Foo_CreateAndInit(5, 5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T07:38:43.417

有一点额外的内存（仅适用于 C99）：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct foo {
    int lengthOfArray1;
    int lengthOfArray2;
    int *array1;
    int *array2;
    int array[];
} foo;

int main(void)
{
    foo *bar = malloc(sizeof(foo) + (sizeof(int) * 10));

    bar->array1 = &bar->array[0];
    bar->array2 = &bar->array[5]; /* 5 or lengthOfArray1 */

    return 0;
} 
```

# iphone - 支持 Retina 4" 的最低 iOS 版本

> ID：12879405
> 
> 赞同：0
> 
> 时间：2012-10-14T04:49:09.330
> 
> 标签：iphone, ios, retina-display

使用全尺寸视网膜 4" 屏幕是否有任何最低 iOS 版本限制？我可以只使用自动调整大小蒙版和 iOS 6 SDK 来构建部署目标 < iOS 6 的应用程序，它将在新的视网膜显示器上全屏运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:58:43.947

构建利用 4" 屏幕的应用程序需要 Xcode 4.5 和 6.0 的 Base SDK。部署目标可以是 4.3 到 6.0 之间的任何内容。您只需添加特定于 4" 屏幕的新 Default.png . 在项目目标的“摘要”选项卡上执行此操作。就是这样。只要你的代码正确地调整到屏幕大小（不管它的大小），你的应用程序就会做它应该做的事情。

# c++ - Linux初学者，在哪里放置boost库？

> ID：12879406
> 
> 赞同：11
> 
> 时间：2012-10-14T04:49:45.147
> 
> 标签：c++, linux, boost, fedora

我对 linux 文件系统不是很熟悉，已经从 windows 迁移过来了，但是我确实对 windows 中的 C++ 和 Boost 库有相当多的经验。切换 Fedora 17 后，谁能告诉我是否应该在某个目录中安装 Boost 以使其在 gnu 编译器中运行？

注意：如果重要的话，我不使用 IDE，我在大部分编程中都使用 vim。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-14T04:54:29.823

有几种方法可以在 linux 上设置 boost 库。

1.  省去一些痛苦，使用你的包管理器来安装 Boost 库。从长远来看，你会感激不尽。

2.  如果您绝对必须自己做，只需将它放在 gcc 包含路径中的任何位置。这是`/usr/local/include/`或`/usr/include/`用于标题和`/usr/local/lib/`或`/usr/lib/`用于库

3.  最后，如果由于某种原因无法实现，请使用带有 g++ 的 -I 开关来指定提升的路径。（但只有在 1 和 2 不可能的情况下才需要这样做）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-14T04:55:00.443

使用你的包管理器来安装 boost 库，对于 debian ubuntu 它就像：

```
sudo aptitude install libboost-system1.49.0-dev 
```

对于 centos6 它是

```
yum install boost-devel 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T05:01:12.603

我在使用 yum 安装 boost 时遇到了问题（最近安装了 Fedora 17）.. 所以我将 boost tar 球解压缩到我的*/opt*。

所以`g++ -I /opt/boost/boost_1_51_0`就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T08:14:41.523

从介绍到提升：

[http://www.boost.org/doc/libs/1_51_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_51_0/more/getting_started/unix-variants.html)

你可以把它放在你喜欢的任何地方。然后你用这样的东西编译

```
c++ -I path/to/boost_1_51_0 example.cpp -o example \
   -L~/boost/stage/lib/ -lboost_regex-gcc34-mt-d-1_36 
```

“ `c++`”可以是`g++`或`clang++`例如。

# python - Python和R词汇表的比较

> ID：12879412
> 
> 赞同：12
> 
> 时间：2012-10-14T04:52:43.380
> 
> 标签：python, r, syntax, programming-languages

我正在搜索 R 和 Python 的语言比较，并遇到了 R 和 JuliaLang 的词汇比较。这与我正在寻找的内容相似，只是语言不同。

[比较 R 和 JuliaLang 词汇表](http://www.johnmyleswhite.com/notebook/2012/04/09/comparing-julia-and-rs-vocabularies/)

有谁知道 R 和 Python 是否有类似的比较？在这种类似作弊的格式中。

谢谢。

**7月24日更新**

我找到[了这个](http://hyperpolyglot.org/numerical-analysis)资源。不过里面还是有很多漏洞的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-14T05:03:35.770

查看此表比较 Python、R 和 Matlab 的数字工具：

[http://mathesaurus.sourceforge.net/matlab-python-xref.pdf](http://mathesaurus.sourceforge.net/matlab-python-xref.pdf)

它假设你已经安装了 numpy、scipy 和 matplotlib，然后用

```
from pylab import * 
```

# c - 使用函数读取文件

> ID：12879415
> 
> 赞同：1
> 
> 时间：2012-10-14T04:53:54.253
> 
> 标签：c, file-io

我有下面的代码，它在 xcode 中编译得很好，但是当我把它带到 Microsoft Visual Studio 时，我得到了一堆错误。

```
 void openfile(int mapArray[MAX_HEIGHT][MAX_WIDTH], int *interest, int *dimension1, int *dimension2)
    { 
    int counter = 0;
    char buffer;
    int rowss, colss;
    *interest = 0;

    FILE *f;
    f = fopen(FILENAME, "r");
    if (f==NULL) {
            printf("Map file could not be opened");
            return 0;
    }

    // create char array the dimensions of the map
    fscanf(f, "%d %d" , dimension1, dimension2 );
    // printf("%d %d\n" , dimensions[0], dimensions[1]);

    // Reads the spaces at the end of the line till the map starts
    buffer=fgetc(f);
    while (buffer!='*') {
            buffer=fgetc(f);
    }

    // Read the txt file and print it out while storing it in a char array
    while (buffer!=EOF) {

            mapArray[rowss][colss]=buffer;

            colss++;

            // Count up the points of interest
            if (((buffer>64)&&(buffer<90))||(buffer=='@') ) {
                                    counter++;

                            }

            // resets column counter to zero after newline
            if (buffer=='\n') {
                    colss=0;
                    rowss++;
            }
            buffer=fgetc(f);
    }

    // Closes the file
    fclose(f);
    *interest=counter;

    } 
```

哪些部分造成了所有错误？我在尝试编译时得到了这个错误列表

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:12:30.640

我看到了一些直接的问题。首先，您没有初始化`rowss`或`colss`在使用它们之前，因此它们可以包含*任何*值。

其次，`fgetc()`返回一个`int`以便您可以检测文件结尾。通过使用 a`char`来保存返回值，您违反了与标准库的约定。

第三，`0`如果文件名无法打开，则返回 a，尽管函数被指定为返回`void`（即，什么都没有）。

毫无疑问，这是编译器发现的三个错误，可能还有其他错误，您可能应该将错误列表与您的问题一起发布，以便进行更详尽的分析。

# delphi - Delphi中的文本到语音到wav

> ID：12879417
> 
> 赞同：13
> 
> 时间：2012-10-14T04:54:02.763
> 
> 标签：delphi, wav, sapi

我将 SAPI 类型库导入 Delphi。我可以使用以下代码向 PC 扬声器输出语音：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Voice: TSpVoice;
begin
  Voice := TSpVoice.Create(nil);
  Voice.Speak('Hello World!', 0);
end; 
```

我可以使用以下代码将语音输出到`.wav`文件：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Voice: TSpVoice;
  Stream: TSpFileStream;
begin
  Voice := TSpVoice.Create(nil);
  Stream := TSpFileStream.Create(nil);
  Stream.Open('c:\temp\test.wav', SSFMCreateForWrite, False);
  Voice.AudioOutputStream := Stream.DefaultInterface;
  Voice.Speak('Hello World!', 0);
  Stream.Close;
end; 
```

问题是当我播放`.wav`文件时听起来很糟糕，就像它使用的比特率非常低。Audacity 告诉我该文件是单声道 16 位 22.05kHz，但听起来比这差得多。

如何将语音输出到单声道 16 位 44.1kHz`.wav`文件，该文件听起来与直接输出到 PC 扬声器的语音完全相同？我不知道如何修改第二个代码示例以设置每个样本的位数和比特率。

**跟进：**格伦的回答解决了比特率问题。感谢那。但是输出到`.wav`文件的语音质量仍然不如直接输出到扬声器的质量。我使用屏幕录制软件将第一个代码块的输出记录为[helloworldtospeakers.wav](http://www.jgsoft.com/support/helloworldtospeakers.wav)。第二个代码块，加上 Glenn 的行，产生[helloworldtowav.wav](http://www.jgsoft.com/support/helloworldtowav.wav)。第二个文件显然有一些失真。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T06:35:13.267

请参阅文件流对象的[Format 属性](http://msdn.microsoft.com/en-us/library/ms720998%28v=vs.85%29.aspx)。它是一种[SpAudioFormat 类型](http://msdn.microsoft.com/en-us/library/ms722554%28v=vs.85%29.aspx)，它具有用于设置音频格式的[Type 属性。](http://msdn.microsoft.com/en-us/library/ms722557%28v=vs.85%29.aspx)那是一个[枚举类型](http://msdn.microsoft.com/en-us/library/ms720595%28v=vs.85%29.aspx)，它有很多选择，所以你需要研究它们才能得到你想要的。

这一行应该为您提供（至少对于我使用的类型库版本）。

```
Stream.Format.Type_ := SAFT44kHz16BitMono; 
```

# iphone - 我是否可以在 iPhone 编程中搜索特定国家时在 Google 地图上突出显示国家区域

> ID：12879426
> 
> 赞同：1
> 
> 时间：2012-10-14T04:55:30.243
> 
> 标签：iphone, ios, xcode

基本上我想在 MAPVIEW 上搜索特定国家，然后突出显示搜索国家的区域。是否可以在 iPhone 应用程序中使用。这是在 asp 中实现的 web 链接，请访问 plz [http://www.dyngeometry.com/web/WorldRegion.aspx](http://www.dyngeometry.com/web/WorldRegion.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:54:26.750

我不确定您是否需要付费，但 dyngeometry 在地址 [http://www.dyngeometry.com/WebServiceV2/GeometryInfo.asmx?op=GetCensusTract下有一个 API](http://www.dyngeometry.com/WebServiceV2/GeometryInfo.asmx?op=GetCensusTract)

如果您以 SOAP 或 HTTP(GET/POST) 请求查询城市名称，它们会返回坐标，您可以使用该坐标在谷歌地图上绘制多边形。

对于绘制多边形，您可以参考

[如何用 CGPath 绘制多边形？](https://stackoverflow.com/questions/2249683/how-to-draw-polygons-with-cgpath)

[填充抗锯齿聚 cocos2d](https://stackoverflow.com/q/9257728/859742)

# flash - 在动作脚本中将数据从一帧传递到另一帧

> ID：12879430
> 
> 赞同：1
> 
> 时间：2012-10-14T04:55:43.940
> 
> 标签：flash, actionscript

我为两个帧编写了一个动作脚本代码，比如说第 1 帧和第 10 帧。现在第 1 帧上的 onClick() 事件，我是这样写的。

```
 on(release){
gotoAndStop(10);
} 
```

现在从第 1 帧到第 10 帧，我想发送一些数据，例如布尔变量。这样我就可以在第 10 帧中执行适当的操作。

请让我知道在帧之间传递数据的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:17:06.277

Flash 中的时间线实际上是顶级的`MovieClip`，因此您在其上设置的任何属性都可以从该级别的任何帧访问。我会在你的动作层的第一帧中声明变量（在`stop()`我假设你必须有的动作之前），如下所示：

```
var myBoolean = false; // set default 
```

在按钮的操作中，您可以设置您的值`boolean`：

```
on(release){
  myBoolean = true; // myBoolean should be in scope from here, if not you could use _root.myBoolean
  gotoAndStop(10);
} 
```

在第 10 帧中，您可以在动作层上创建一个新帧，并根据 的值编写适当的逻辑`boolean`：

```
if (myBoolean) {
 // ...
} else {
 // ...
} 
```

# mysql - MySQL 使用另一个表的外键创建表：发生 errno:150。

> ID：12879431
> 
> 赞同：0
> 
> 时间：2012-10-14T04:56:09.437
> 
> 标签：mysql, sql

我想在 MySQL 中创建 2 个表，其中第二个表具有来自我的基表的外键。

问题是当我尝试创建第二个表时，我得到 errno:150。失败是因为外键为空。

如何正确创建第二个表？

**更多细节**

我的第一个表有 5 个属性，第一个属性是主键。

我的第二张表有 3 个属性。此表的第一个和第二个属性引用第一个表中的前 2 个属性。

所有的变量`varchar`都是相同的长度。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:11:39.867

鉴于我们看不到您的代码，我认为解决此问题的正确方法是在[MySQL - Foreign Key documentation page 上](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)。

请参阅下面的示例：

```
CREATE TABLE parent (id INT NOT NULL,
                     PRIMARY KEY (id)
) ENGINE=INNODB;
CREATE TABLE child (id INT, parent_id INT,
                    INDEX par_ind (parent_id),
                    FOREIGN KEY (parent_id) REFERENCES parent(id)
                      ON DELETE CASCADE
) ENGINE=INNODB; 
```

这条线正是你需要做的：`FOREIGN KEY (parent_id) REFERENCES parent(id)`。

# javascript - 检查对象是否具有属性的Javascript错误

> ID：12879432
> 
> 赞同：-2
> 
> 时间：2012-10-14T04:56:28.923
> 
> 标签：javascript, jquery, object, properties, comparison

我有一个对象，我将其存储在 cookie 中，然后获取该对象并将其用于一些检查，这很好，但我遇到的问题都与该行有关

```
if(!arr.hasOwnProperty($(this).val())){ 
```

在

```
$(".not").click(function() {
//alert($(this).val()+JSON.stringify(arr));
    if(!arr.hasOwnProperty($(this).val())){
    $.getJSON("<?php echo BASE_URL;?>json/startup/not", {id: $(this).val()}, function(json){
    if(json.status == "OK"){
        arr[json.data.id] = json.data.id;
        arr = JSON.stringify(arr);
        $.cookie('votedId', arr);
        $('#percent'+json.data.id).html(json.data.percent);
        $('#votes'+json.data.id).html(json.data.votes);
    }
    });
    }else{
        alert("Already voted on this startup!");
    }
    //alert($(this).val());
}); 
```

发生的情况是，我第一次这样做时，它意识到传入的值没有任何属性，并让投票发生。然后它不让它投票，因为它应该。

然而，问题在于他们可以投票的页面上的其他元素，然后在第一个元素被投票后说传入的 id 有一个属性，即使它不存在。如果我刷新页面，它可以让我投票。

只是因为我觉得上面的解释有点难以理解，让我举个例子。

我有多个投票热或不投票的事情。第一个的 id 是 1，第二个是 2，依此类推。我投票认为 1 是热的，因此 cookie 和 arr 数组被更新为具有属性 1，因此无法再次对其进行投票。然而，在那之后，所有其他的事情都说他们也被投票过，即使他们还没有投票过。所以现在我不能对 2 投票。但如果我刷新页面就可以了。但是，如果我想对元素 3 进行投票，我必须刷新页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:59:50.080

在您的代码中，您有：

```
...
arr[json.data.id] = json.data.id;
arr = JSON.stringify(arr); // <-- this is likely the reason for the error
... 
```

上面的第二行将您的`arr`变量覆盖为字符串。第二次，它是您正在调用的字符串对象`.hasOwnProperty(...)`- 这将导致 JS 错误。

这应该解决它：

```
...
arr[json.data.id] = json.data.id;
// arr = JSON.stringify(arr); // drop this line
$.cookie('votedId', JSON.stringify(arr)); // assign directly without overwriting arr
... 
```

# javascript - 悬停时为 div 设置动画

> ID：12879433
> 
> 赞同：0
> 
> 时间：2012-10-14T04:56:47.307
> 
> 标签：javascript, jquery, html, css

我有一个从屏幕右边缘突出一点的导航栏。我想要它，所以当您将鼠标悬停在 div 上时，它会从浏览器的右侧向左滑动 550 像素。我正在使用 jquery 的动画功能，我让它在悬停时正确设置动画，但是当你停止悬停在它上面时，我无法让它滑回右侧。

我对 javascript/jquery 很陌生，我觉得我错过了一些简单的东西......

```
$(document).ready(function(){
$("#nav").hover(function() {
    $(this).animate({ 
    right: "0px",
    }, 800 );

    (function() {
    $(this).animate({ 
    right: "-550px",
  }, 800 );

});
});
}); 
```

这是#nav的CSS：

```
#nav {
position: absolute;
right: -550px;
min-width: 300px;
top: 10px;
height: 50px;
background-color: #B30431;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:01:38.123

代码有一些语法错误。代码应该是：

```
$(document).ready(function(){
    $("#nav").hover(
        function() {
            $(this).animate({ right: "0px" }, 800 );
        },
        function() {
            $(this).animate({ right: "-550px" }, 800);
        }
    });
}); 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T05:02:05.473

您使悬停功能变得复杂，您已经包装了功能`()`并且您的功能没有执行。

```
$(document).ready(function() {
    $("#nav").hover(function() {
        $(this).animate({ right: "0px" }, 800);
    }, function() {
        $(this).animate({ right: "-550px" }, 800);
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T05:19:42.127

你可以试试这个......[演示](http://jsfiddle.net/SGyzk/1/)

```
$(document).ready(function(){

    $("#nav").mouseover(function(){

        $(this).delay(200).animate({right: "0px"}, 800 ); 
        // Added a 200ms delay to prevent quick accidental mouse overs triggering animation.

    });

    $("#nav").mouseout(function(){

        $(this).clearQueue();
        // Gives the user the ability to cancel the animation by moving the mouse away

        $(this).animate({right: "-550px"}, 800 );

    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T05:05:40.963

我们在动画中经常使用的一种选择是创建一个包含该动画的 css 类，然后`.addClass()`使用触发动画的方法。它速度快，并且兼容浏览器。您也可以为此使用纯 css。

# sql - 对 superkey 或 Boyce Codd 范式的误解

> ID：12879434
> 
> 赞同：1
> 
> 时间：2012-10-14T04:56:55.317
> 
> 标签：sql, database, key, relational-database, primary-key

在[该视频](https://www.youtube.com/watch?v=hTFyG5o8-EA)中的 9:34，演讲者说所有 3 个函数依赖项都处于 Boyce Codd 范式。我不相信，因为显然 GPA 无法确定学生表中的 SSN、sName、地址和所有其他属性。要么我对 Boyce Codd 范式的定义感到困惑，要么对什么是超级键感到困惑？它是否只需要能够唯一地识别某些属性，而不是模式中的所有属性？例如，GPA 确实确定了优先级（位于功能依赖的右侧），但不是其他所有内容。

例如，如果我有关系 R(A,B,C,D) 和 FD A->B，我们会说 A 是 B 的超级键，但我认为超级键是整个表的吗？为了增加我的困惑，我知道 BCNF 它可以是（主）键，但您只能拥有表的主键。哎呀我的脑袋好痛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T08:53:58.023

“......演讲者说所有 3 个函数依赖项都在 Boyce Codd 范式中。”

处于 BC 范式是**RELATIONS**（更具体地说，是关系**变量**，或关系**模式**，如果该术语更适合您）而不是函数依赖项可以具有的属性。如果您发现有人在谈论标准化理论时如此草率，请离开并继续进行更准确的解释。

一个关系变量是否确实是 BC 范式，取决于它应该包含哪些函数依赖关系。这就是为什么说**函数依赖**是否为 BC 范式完全是无稽之谈。

“我不相信，因为显然 GPA 无法确定学生表中的 SSN、sName、地址和所有其他属性。要么我对 Boyce Codd 范式的定义感到困惑，要么对什么是超级密钥感到困惑？它只需要能够唯一地识别某些属性，而不是模式中的所有属性？”

一个不可约的候选键是关系模式的属性集（不一定是唯一的），它保证在数据库中的关系变量中有效出现的任何关系值中具有属性值的唯一组合。

在您的 (A,B,C,D) 示例中，如果 A->B 是**唯一**持有的 FD，那么唯一的候选键是 {A,C,D}。

“例如，如果我有关系 R(A,B,C,D) 并且 FD A->B 我们会说 A 是 B 的超级键”

在这种情况下，将 A 称为 B 的“关键”是草率和混乱的。假装教别人的人应该知道这一点，不知道这一点的人不应该从事任何教法，直到他们知道这一点。在这种情况下，最好将 A 称为 B 的“决定因素”。在关系数据库设计的上下文中，术语“键”具有非常明确和精确的含义，将相同的术语用于其他含义只会使人们感到困惑。正如你的问题所证明的那样。

“但我以为超级钥匙是为整张桌子准备的？”

是的，你想的没错。

回到您的 (A,B,C,D) 示例。 **如果**我们将该设计拆分为 (A,B) 和 (A,C,D)，**那么**我们将有一个关系模式 - (A,B) 之一 - 我们可以说“{A} 是键”在该架构中。

这实际上正是 FD A->B 的含义：**如果**您将在 (A,B,C,D) 模式中出现在数据库中的关系值投影到属性 {A,B} ，**那么**你应该得到一个没有 A 值出现两次的关系（如果出现了，那么 A 值将对应于 >1 个不同的 B 值，这意味着 A 毕竟不可能是 B 的决定因素）。

“为了增加我的困惑，我知道 BCNF 它可以是一个（主）键，但是......”

现在你自己马虎了。“它”指的是什么？

# java - set visible 和 show 方法的区别

> ID：12879435
> 
> 赞同：5
> 
> 时间：2012-10-14T04:56:56.667
> 
> 标签：java, swing, awt

在 AWT 包中，有一些方法`setVisible()`，`show()`它们执行相同的操作，但实际上在哪里不同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T05:00:36.580

该`show()`方法是不推荐使用的版本`setVisible()`，如[javadoc](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#show%28%29)中所示。

[此外，这里](https://stackoverflow.com/questions/636550/java-component-show-hide-are-deprecated-why)给出了原因的解释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T05:03:33.543

show() 和 hide() 自 JDK 1.1 版起已被弃用，优先于 setVisible(boolean)。

setVisible 将显示和隐藏一个组件，而 show() 将只显示该组件。

# c++ - OMP 严重非法嵌套

> ID：12879436
> 
> 赞同：0
> 
> 时间：2012-10-14T04:57:14.017
> 
> 标签：c++, critical-section, openmp

运行我的程序时出现错误，它说：

```
A '#pragma omp critical' is illegally nested in one of the same name 
```

当它进入我的批评之一时，它就死了。我对 OMP 非常陌生，这将是我第一次将它应用于大型代码。

我的大代码太大而无法粘贴到这里，所以让我问第一个并尝试找出稍后发生的问题。

这个错误甚至意味着什么？这是否意味着“不要嵌套#critical”？还是我把名字搞砸了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:06:13.237

疱疹。感谢[openMP，原子与关键？](https://stackoverflow.com/questions/7798010/openmp-atomic-vs-critical)，我发现那个“名字”指的是一个关键的名字。

通过执行 #pragma omp critical(name_here) 解决了问题

# android - 在 Android 隐藏文件夹中存储和读取对象

> ID：12879440
> 
> 赞同：0
> 
> 时间：2012-10-14T04:58:46.253
> 
> 标签：android, java-io, android-file

我需要在 Android 中存储和读取对象，这些对象必须可用，直到通过应用程序手动删除它们。

由于我不能为此使用资产文件夹，

我如何将对象存储在隐藏文件夹中以便将来访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:10:55.923

好吧，您可以将它们保存在 SD 卡中的应用程序特定目录中。如果您希望目录中的内容不被 mediascanner 扫描（这样它们就不会出现在画廊等中），您需要在该目录中保留一个“.nomedia”文件。

例如，在 sdcard 中创建一个名为“mytestapp”的目录，并在其中保留一个“.nomedia”文件以及您要存储的文件

# jquery - 使用 php 和 jquery 以一种形式保存/更新数据

> ID：12879444
> 
> 赞同：0
> 
> 时间：2012-10-14T04:59:43.793
> 
> 标签：jquery, mysql, forms

我有一个带有三个输入文本字段的 html 表单

ID：

名：

姓：

和一个用于将数据保存到 MySQL 的提交按钮，当用户输入名字和姓氏并单击提交时，它将在表中创建一条新记录并返回 ID 字段中的 id，对于更新用户将在提交的 ID 并使用 jquery 我将检索名字和姓氏的详细信息，

我的问题是，在用户在 ID 字段中输入 ID 后，是否有任何方法可以将 ID 的值保存在隐藏字段或会话中，或者任何事情都可以告诉我 ID 号 xxxx 的更新状态表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:35:30.477

您可以将数据保存在变量或元素本身中

演示这一点：http: [//jsfiddle.net/VUJ83/1/](http://jsfiddle.net/VUJ83/1/)

HTML：

```
<input class="watchme" name="test" type=text \> 
<input class="watchme" name="test1" type=text value="changeme"\>
<input class="watchme" name="test2" type=text \>

<button id="show">Show changed</button>
<div id="messages"></div>​ 
```

CSS：

```
input {
 display: block;   
}
.watchme.changed {
background: red;    
} 
```

JS：

```
$('.watchme').on('keydown', function(e) {
if ($(this).data().savedval === undefined) {
        $(this).data().savedval = $(this).val();
    }
});
$('.watchme').on('keyup', function(e) {
    $(this).addClass('changed');
    if ($(this).val() === $(this).data().savedval) {
        $(this).removeClass('changed');
    }
});

$('#show').click(function() {
    var msgs = $('#messages')
    msgs.html('');
    $('.watchme.changed').each(function() {
        msgs.append($('<div>').html($(this).attr('name')));
    });

});​
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:00:20.283

如果您使用 jquery/ajax 进行保存更新，那么您应该试试这个

**jQuery**

```
$.ajax({
url: "myfile.php",
type: "POST",
data: {firstname : $('#firstname').val(), lastname: $('#lastname').val() },//you can also pass extra field to identify save or update
success: function(res){
 $('#hiddenField').val(res);
}
}); 
```

**PHP代码**

```
<?php
$fname = $_POST['firstname'];
$lname = $_POST['lastname'];
//your query here 
$id = mysql_insert_id();
$_SESSION['id'] = $id;
echo $id;
?> 
```

# ruby-on-rails - Rails 路由在查询字符串中有一个 URL

> ID：12879446
> 
> 赞同：2
> 
> 时间：2012-10-14T04:59:53.850
> 
> 标签：ruby-on-rails, ruby

所以我需要点击像 mydomain.com/proxies/www.msn.com 这样的 url 来满足一些对 API 的 ajax 请求

在我的路线中，我有

```
get "/proxies/:url" => "proxies#get" 
```

我在控制器中

```
url_contents = Net::HTTP.get(URI.parse(params[:url])) 
```

如果我把 /proxies/www 我得到

```
undefined method `request_uri' for #<URI::Generic:0x3f89508 URL:www> 
```

如果我把 /proxies/www.msn.com

我明白了

没有路由匹配 [GET] "/proxies/www.msn.com"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:04:28.020

你在这里有两个不同的问题：

1.  您试图将没有方案的 URL 视为 HTTP URL。
2.  您的`/proxies`路线不会`:url`像您期望的那样将 s 与点和斜线匹配。

对于第一个，您必须手动添加架构：

```
url = 'http://' + params[:url]
content = Net::HTTP.get(URI.parse(url)) 
```

对于第二个，您可以使用 splat-route 来处理嵌入的斜线并`:format => false`防止 Rails 尝试将`.com`. 视为一种格式：

```
get '/proxies/*url' => 'proxies#get', :format => false 
```

如果您使用`:url`，Rails 会将嵌入的斜杠视为组件分隔符，这可能不是您想要的。如果没有[`:format => false`](http://guides.rubyonrails.org/routing.html#route-globbing)，Rails 将尝试将`.X`（对于任何`X`）解释为一种格式（就像`.html`, `.json`, ...）而不是 URL 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:06:11.203

***这适用于 rails-2***

问题出在`dot(.)`我猜。我已经尝试过类似下面的方法并且它有效。

```
#routes.rb
map.get_proxy 'proxies/:url', :controller => "Proxies", :action => "get", :requirements => { :url => /.*/ }

#view file
#Here dot(.) are needed to replace with its encoded string %2E
<%= link_to 'Get The Site', get_proxy_url('www.msncom') %>

#Proxies Controller
#After receiving the url the %2E need to conovert to dot(.) again.
url_contents = Net::HTTP.get(URI.parse('http://'+params[:url])) 
```

如*@mu*所述修改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T05:21:18.053

```
match '/proxies/:url' => 'proxies#get', :as => :proxies_get 
```

# php - 在准备好的语句中执行不返回任何内容

> ID：12879448
> 
> 赞同：3
> 
> 时间：2012-10-14T05:00:47.763
> 
> 标签：php, mysql

我已经验证了下面的所有变量，现在正尝试使用准备好的语句将它们插入到我的 mysql 数据库中，但是即使我没有收到任何系统错误，数据也没有插入。$insert_stmt->affected_rows>0 返回 false，从而显示我的自定义警告消息：

```
$insert_stmt = $db->prepare("INSERT INTO users (id,timestamp,externalid,password,authentication,email) VALUES(NULL,NOW(),?,?,?,?)");
$insert_stmt->bind_param("ssss",$userid,$hash,$authenticate,$email);
$insert_stmt->execute();
if ($insert_stmt->affected_rows>0) 
```

我对 PHP（和社区）有点陌生，不知道为什么什么都不会插入，而我的自定义警告消息总是显示？同样，不会产生系统错误。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T05:17:00.993

调用时可能会出错`execute()`。 如果语句成功并且失败`execute()`将返回。所以检查返回值。如果是，请致电获取有关该问题的信息。`TRUE``FALSE``FALSE``mysqli_stmt_error()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:05:49.437

I figured out the issue. I was testing with an externalid that was already in the database, and my check for preventing duplicate external ids was not working correctly, so my code was reaching the insertion line and trying to put the externalid again into MySQL when it already existed in the database. I had set the externalid as a unique field, so it wouldn't allow it to be entered. MySQL though didn't return any noticeable errors when I had set E_ALL | E_STRICT. Good to know in the future.

I didn't realize I was testing with a duplicate entry, so sorry to the community for adding that nugget of info.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T05:17:00.900

请执行以下操作：

1）看这个链接：

*   [插入 MySQL 数据库的 PHP PDO 代码失败](https://stackoverflow.com/questions/6299067/php-pdo-code-to-insert-in-mysql-db-fails)

2）连接到数据库后添加：

`$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);`

3) 在您的准备、绑定和执行语句周围添加这个 try/catch 块：

`try { .. } and catch (Exception $e) { echo $e->getMessage(); }`

4) 报告您收到的错误消息（如果有）

并*确保*检查您的呼叫的错误状态。特别是`$insert_stmt->execute()`。

# ios - 我将如何存储 iphone 应用程序的虚拟硬币数量

> ID：12879450
> 
> 赞同：0
> 
> 时间：2012-10-14T05:01:21.233
> 
> 标签：ios, in-app-purchase

我正在尝试构建一个使用虚拟硬币系统的 iPhone 应用程序。用户购买硬币，然后在游戏中使用它们。我如何跟踪他们使用的硬币数量。

如果我将信息存储在本地，就不能有人进去修改文件然后增加硬币的数量。是否可以在越狱手机上防止这种情况发生？

有没有办法在不注册的情况下将硬币的数量存储在数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:27:26.660

> 如果我将信息存储在本地，就不能有人进去修改文件然后增加硬币的数量吗？

**哦，但是是的，他可以。**

> 是否可以在越狱手机上防止这种情况发生？

不，不是。但是，如果没有越狱就无法做到这一点（应用程序安装在 iOS 文件系统的可程序访问的越狱根目录之外，该根目录受限于 /var/mobile/Media 库 - 从 AppStore 下载的应用程序安装在 / var/mobile/Applications) - 所以关于 90% 的用户，你会很安全。

> 有没有办法在不注册的情况下将硬币的数量存储在数据库中？

您可以使用应用内购买或只是在您的服务器上自动注册他们的设备 ID（序列号、MAC 地址、从它们生成的类似于现在已弃用的 UDID 的哈希，或者只是一个简单的 UUID）并存储“钱”在线。在这两种情况下，建议您使用自己的服务器验证每笔交易，否则可以对其进行**调整**（字面意思是；google iAPcracker）。

# python - 您将如何自动化此站点中的登录过程？

> ID：12879457
> 
> 赞同：0
> 
> 时间：2012-10-14T05:02:33.240
> 
> 标签：python

好的，所以，我正在做一个小脚本，下载这个网站的 X 个壁纸。

www.wallbase.cc

我已经可以下载我想要的方式，但我想从 Python 脚本中使用我的用户名和密码登录，我已经找到了如何在“普通”网站中执行此操作，其中登录表单可以从 url 中看到，但是在这个我必须调用一个javascript函数来显示要登录的网络表单，而且我真的不知道如何登录也没有打开网络表单。

有人可以帮我弄这个吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:10:11.720

您可以使用 POST 方法发送您的凭据。

LiveHTTPHeaders firefox 模块对于跟踪 HTTP 请求非常有用：

```
http://wallbase.cc/user/login

POST /user/login HTTP/1.1
Host: wallbase.cc
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:15.0)
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://wallbase.cc/home
Cookie: xxx
Content-Type: application/x-www-form-urlencoded
Content-Length: 74
usrname=d&pass=d&nopass_email=Type+in+your+e-mail+and+press+enter&nopass=0
HTTP/1.1 200 OK
Content-Encoding: gzip
Vary: Accept-Encoding
Content-Type: text/html
Transfer-Encoding: chunked
Date: Sun, 14 Oct 2012 05:05:21 GMT
Server: lighttpd 
```

重要的部分是

```
usrname=<YOUR USER NAME>&pass=<PASSWORD>&nopass_email=Type+in+your+e-mail+and+press+enter&nopass=0 
```

这就是您需要通过 POST 发送的数据。在 SO 网站上的搜索中，您会在 python 中找到大量 POST。

我建议您使用`mechanize`模块来做到这一点。

# jquery - 使用 Jquery 插件 Pikachoose 检查收音机上的更改图像

> ID：12879465
> 
> 赞同：0
> 
> 时间：2012-10-14T05:04:39.677
> 
> 标签：jquery, jquery-plugins, gallery, radio

好的，所以我有单选按钮来选择 T 恤设计的颜色和一个显示这些外观的图片库：

[http://www.pazzle.co.uk/index.php?main_page=product_info&cPath=6_1&products_id=3#.UHpHP00WK27](http://www.pazzle.co.uk/index.php?main_page=product_info&cPath=6_1&products_id=3#.UHpHP00WK27)

注意：图库当前自动滚动，如果需要我可以关闭它。

这是完成工作的代码：

```
<div id="pikawrapper">
  <div class="pikachoose"> 
    <?php if (sizeof($images_array) > 0) { ?> 
      <ul id="pikame" class="jcarousel-skin-pika"> 
        <?php for($img=0; $img<sizeof($images_array); $img++) { 
                echo '<li>' . zen_image('images/' . $images_array[$img]) . '</li>'; 
              } ?> 
      </ul>
    <?php } ?>
  </div>
</div> 
```

本质上，画廊是一个名为**[pikachoose](http://www.pikachoose.com/)**的 Jquery 滑块，它从数组中提取图像。我将图像上传到我的内容管理区域，画廊负责工作。**我想知道在选择时让图片库显示相应的颜色有多难？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:34:07.743

这是如何做到的......

```
var imgTranslate={9:3};
$('#productAttributes .wrapperAttribsOptions input').bind('click',function() {
   $('#pikame').data('pikachoose').GoTo(imgTranslate[this.value]);
}); 
```

您必须将颜色按钮与滚动条中的图像匹配，就像我将颜色 9 与第三张图像匹配一样。

# asp.net-mvc-4 - 删除通过 Nuget 检索到的 js 文件的版本号

> ID：12879469
> 
> 赞同：1
> 
> 时间：2012-10-14T05:05:23.453
> 
> 标签：asp.net-mvc-4, nuget

我想知道是否有办法让 nuget 或 mvc4 的一部分从 jquery 之类的 js 文件中删除版本号。

例如，如果我有 nuget update jquery，我想知道这一点。如果我不担心分散在我的视图中的版本号，那就太好了。

我知道我可以对文件名进行查找/替换，但如果根本没有版本号，我会更喜欢它。但是，我确实希望保留运行`update-package jQuery`并拥有它的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T05:41:53.927

您可以为此使用捆绑。然后的想法是使用捆绑包并在文件中只配置一次。

[http://www.codeproject.com/Tips/389545/ASP-NET-MVC4-Bundling-and-Minification](http://www.codeproject.com/Tips/389545/ASP-NET-MVC4-Bundling-and-Minification)

# c - 哪一个是错的？

> ID：12879474
> 
> 赞同：-2
> 
> 时间：2012-10-14T05:06:25.690
> 
> 标签：c, syntax, function-pointers, grammar

```
#include <stdio.h>
typedef struct {int a; int b; int c;} F;
typedef struct{
    int a;
    int (*ptr)(F*);
} A;

int set_a(F * obj){
    obj->a = 1;
}
int main(){
    F a;
    A b;
    b.a = 0;
    b.ptr = set_a;
    b.ptr(&a);
    printf("%d",a.a);

    getchar();
} 
```

这似乎是正确的

但为什么

```
#include <stdio.h>
typedef struct{
    int a;
    int (*ptr)(A*);
} A;

int set_a(A * obj){
    obj->a = 1;
}
int main(){
    A a;
    a.a = 0;
    a.ptr = set_a;
    a.ptr(&a);
    printf("%d",a.a);

    getchar();
} 
```

这是不正确的？和

```
#include <stdio.h>
typedef struct{
    int a;
    int (*ptr)(A);
} A;

int set_a(A * obj){
    obj->a = 1;
}
int main(){
    A a;
    a.a = 0;
    a.ptr = set_a;
    a.ptr(&a);
    printf("%d",a.a);

    getchar();
} 
```

这是对的？我真的很想知道谢谢

Windows 7 上 Visual Studio 2012 上的环境语言 C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T05:19:49.470

在第二个和第三个示例中，您`A`在声明之前（期间）引用了它：

```
typedef struct{
    int a;
    int (*ptr)(A*); // < the compiler doesn't know A at this point.
} A; 
```

此外，在第三个示例中，您声明`ptr`为接收的函数`A`，但随后将其分配给接收的 set_a `A*`，这也是无效的。

您需要先声明它：

```
struct A;
typedef struct A{
    int a;
    int (*ptr)(struct A*);
} A; 
```

在第一个示例中，您指的是`F`哪个已经存在，所以没关系。

# c# - GridView 从不显示

> ID：12879480
> 
> 赞同：0
> 
> 时间：2012-10-14T05:07:57.703
> 
> 标签：c#, asp.net, gridview, datasource

使用 Oracle 数据库。我这辈子都不能让这个网格视图工作。我不知道为什么，但在最后 6 小时的连续调试之后，这让我失去了理智。

我的数据源设置如下：

```
<asp:sqldatasource runat="server" id="dsSearch"
ConnectionString="<%$ ConnectionStrings:OracleConnection %>" 

ProviderName= "<%$ ConnectionStrings:OracleConnection.ProviderName %>" 
CancelSelectOnNullParameter="False" 
SelectCommand="SELECT d.DVD_ID, d.DVD_TITLE, d.RENTAL_COST, r.RATING_NAME, g.GENRE_DESC, d.COVER_IMAGE FROM DVD d, DVD_GENRE t, GENRE g, RATING r WHERE d.DVD_ID = t.DVD_ID AND t.GENRE_ID = g.GENRE_ID AND d.RATING = r.RATING_ID ORDER BY lower(DVD_TITLE)" 
FilterExpression="{1} LIKE '&{0}&'">
<FilterParameters>
    <asp:ControlParameter ControlID="searchBox" DefaultValue=" " PropertyName="Text" />
    <asp:ControlParameter ControlID="swapList" DefaultValue="DVD_TITLE" PropertyName="SelectedValue" />
</FilterParameters>

</asp:SqlDataSource> 
```

我想做的是从名为“SearchBox”的文本框和“SwapList”的下拉列表中创建一个搜索功能。我添加了一个过滤器表达式（它是搜索逻辑），它查找输入到搜索框中的文本，并在已选择的任何交换列表值的列中查找它。

我知道问题可能出在我的 gridview 代码上，所以我将在下面粘贴：

```
<asp:GridView ID="sGrid" runat="server" DataSourceID="dsSearch" 
    DataKeyNames="DVD_ID" AutoGenerateColumns="False">
    <Columns>
        <asp:BoundField DataField="DVD_ID" HeaderText="DVD_ID" ReadOnly="True" 
            SortExpression="DVD_ID" />
        <asp:BoundField DataField="DVD_TITLE" HeaderText="DVD_TITLE" 
            SortExpression="DVD_TITLE" />
        <asp:BoundField DataField="RENTAL_COST" HeaderText="RENTAL_COST" 
            SortExpression="RENTAL_COST" />
        <asp:BoundField DataField="RATING_NAME" HeaderText="RATING_NAME" 
            SortExpression="RATING_NAME" />
        <asp:BoundField DataField="GENRE_DESC" HeaderText="GENRE_DESC" 
            SortExpression="GENRE_DESC" />
        <asp:BoundField DataField="COVER_IMAGE" HeaderText="COVER_IMAGE" 
            SortExpression="COVER_IMAGE" />
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:43:31.210

我认为你的过滤器表达式应该是这样的

```
FilterExpression="{1} LIKE '%{0}%'" 
```

那是`&`用`%`

# css - div 不断脱离父级

> ID：12879482
> 
> 赞同：0
> 
> 时间：2012-10-14T05:09:36.253
> 
> 标签：css, html

好的，所以我正在使用下面的 css，但 #profile_side 一直从 #wrap_p 中掉出来？我究竟做错了什么？我试着用谷歌搜索它...

```
 #wrap_p{

            border-style: solid;
        }
        #profile_side{
            width: 20%;
            float: right;
            padding: 10px;
            border-style:dashed;
            border-color: gray;
        }
        #profile_main{
            width: 70%;

            padding:10px;
            border-style:dashed;
            border-color: gray;
        } 
```

这是html：

```
 <div id="wrap_p">
    <div id="profile_side">
    <img src="/img.png" width="100%"/>
            <big>username</big>
            <p>user information</p>
    </div>
    <div id="profile_main">
            main user stuff
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T05:15:52.853

**解决方案：**添加`overflow: hidden;`到`#wrap_p`

检查这个**演示：http:** [//jsfiddle.net/WsHAT/1/](http://jsfiddle.net/WsHAT/1/)

`overflow: hidden`用于告诉浏览器隐藏任何超出元素大小的内容。但要使其工作，元素必须具有指定的高度值。

对于没有指定高度的元素或`height: auto`（如您的情况），这基本上扩展了元素以显示所有内容。

# colors - 期望外壳上的彩色文本

> ID：12879483
> 
> 赞同：6
> 
> 时间：2012-10-14T05:10:06.750
> 
> 标签：colors, expect, puts

作为标题，有什么方法可以在期望外壳中使用彩色文本？就像下面的 shell script echo 命令一样。

```
echo -e "\033[32m Hello World" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T14:54:57.330

I have been suffering the answer to this question for quite some time, and now I think I've finally got an answer.

How it works is to use `033` to send the < ESC> character and then `[` to send ANSI escape codes separated by semicolons, however as `[` is a special character it also needs to be escaped with a backslash. You can then proceed to send ANSI sequences and delimit with an `m`.

Example ANSI break sequences

*   0 Reset / Normal all attributes off

*   1 Bold or increased intensity

*   4 Underline: Single

*   30 Set text color Black

*   31 Set text color Red

*   32 Set text color Green

Full list can be found here: [http://en.wikipedia.org/wiki/ANSI_escape_code](http://en.wikipedia.org/wiki/ANSI_escape_code)

Example:

```
puts "\033\[01;31m" # This will turn text red
puts "~~~This text is red and bold\n" 
puts "\033\[0;32m" # This will turn text green
puts "This text is green and bold switched off\n" 
```

However it doesn't seem to work with the `-nonewline` option, which is a tad annoying. However the send_user command seems to handle things a lot better and under control a lot better:

```
send_user "\033\[01;31mRed bold \033\[0;32mGreen again" 
```

You can even combine this with variables to make the output more readable:

```
set green "\033\[0;32;40m"
set red "\033\[1;31m"
send_user "${red}Red bold ${green}Green again" 
```

# php - php 没有正确匹配 ios lon 和 lat 与 mysql lon 和 lat

> ID：12879484
> 
> 赞同：0
> 
> 时间：2012-10-14T05:10:09.303
> 
> 标签：php, mysql, ios, xml, location

我正在尝试从 ios 获取 lat 和 lon 坐标的输出（这工作正常），将其发送到 php 以使用 MySQL 进行查询，并让 php 将 xml 文档发送回 ios（此步骤不起作用，因为它是不带回该位置的mysql条目），然后在iOS UItableview上解析它（这也很好）。我试图让它与 XML 一起工作，因为我已经得到了一个更简单的 xml 脚本已经在它上面运行。但可能是由于缺乏 php 经验而导致的错误，我无法让这个 php 脚本工作！我在我的 php 脚本中做错了什么？谢谢！哦，还有，mysql 中的数据类别包括“lon”、“lat”和“name”（表示附近朋友或家人的名字）！如果有人想知道，[php查询iOS纬度和经度不使用xml输出搜索附近的mysql lat和lon](https://stackoverflow.com/questions/12870803/php-query-for-ios-latitude-and-longitude-not-searching-for-nearby-mysql-lat-and)

```
<?php
    define( 'LATMILES', 1 / 69 );
    define( 'LONMILES', 1 / 53 );
    if ( isset( $_GET['lat'] ) ) { $lat = (float)$_GET['lat']; }  //Recieve ios input from: NSString *urlString = [NSString stringWithFormat:@"http://www.mysite.com/loc.php?lat=%g&lon=%g&radius=100&q=%@", latitude, longitude, searchBar.text?searchBar.text:@""];
    if ( isset( $_GET['lon'] ) ) { $lon = (float)$_GET['lon']; }  //Recieve ios input from: NSString *urlString = [NSString stringWithFormat:@"http://www.mysite.com/loc.php?lat=%g&lon=%g&radius=100&q=%@", latitude, longitude, searchBar.text?searchBar.text:@""];
    if ( isset( $_GET['radius'] ) ) { $radius = (float)$_GET['radius']; } //Recieve ios input from: NSString *urlString = [NSString stringWithFormat:@"http://www.mysite.com/loc.php?lat=%g&lon=%g&radius=100&q=%@", latitude, longitude, searchBar.text?searchBar.text:@""];
    $minlat = $lat - ( $radius * LATMILES );
    $minlon = $lon - ( $radius * LONMILES );
    $maxlat = $lat + ( $radius * LATMILES );
    $maxlon = $lon + ( $radius * LONMILES );
    $dbh = new PDO('(censored private information');
    $sql = 'SELECT lat, lon, name FROM locations WHERE lat >= ? AND lat <= ? AND lon >= ? AND lon <= ?';
    $params = array( $minlat, $maxlat, $minlon, $maxlon );
    if ( isset( $_GET['q'] ) ) {
      $sql .= " AND name LIKE ?";
      $params []= '%'.$_GET['q'].'%';
    }
    $q = $dbh->prepare( $sql );
    $q->execute( $params );
    $doc = new DOMDocument();
    $r = $doc->createElement( "locations" );
    $doc->appendChild( $r );
    foreach ( $q->fetchAll() as $row) {
      $dlat = ( (float)$row['lat'] - $lat ) / LATMILES;
      $dlon = ( (float)$row['lon'] - $lon ) / LONMILES;
      $d = sqrt( ( $dlat * $dlat ) + ( $dlon * $dlon ) );
      if ( $d <= $radius ) {
        $e = $doc->createElement( "location" );
        $e->setAttribute( 'lat', $row['lat'] );
        $e->setAttribute( 'lon', $row['lon'] );
        $e->setAttribute( 'name', $row['name'] );
        $r->appendChild( $e );
      }
    }
    print $doc->saveXML();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:23:30.470

您的代码过于复杂。首先，寻找位置的最佳解决方案是使用[Haversine_formula](http://en.wikipedia.org/wiki/Haversine_formula)。

我已经简化了您的代码以使用它。

```
<?php
if (isset( $_GET['lat'])){ 
    $lat = (float)$_GET['lat']; 
}  
if ( isset( $_GET['lon'])){ 
    $lon = (float)$_GET['lon']; 
}  
if ( isset( $_GET['radius'])){ 
    $radius = (float)$_GET['radius'];
} 
if ( isset( $_GET['q'])){ 
    $name = $_GET['q'];
} 

$dbh = new PDO('(censored private information');
//
$sql = "SELECT  name, lat, lon, ( 3959 * acos( cos( radians('%s') ) * cos( radians( lat) ) * cos( radians( lon ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( lon) ) ) ) AS distance FROM location WHERE `name` LIKE '%s' HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20",
mysql_real_escape_string($lat),
mysql_real_escape_string($lon),
mysql_real_escape_string($lat),
mysql_real_escape_string($name),
mysql_real_escape_string($radius));

$q = $dbh->prepare( $sql );
$q->execute( $params );
$doc = new DOMDocument();
$r = $doc->createElement( "locations" );
$doc->appendChild( $r );
foreach ( $q->fetchAll() as $row) {
  //$dlat = ( (float)$row['lat'] - $lat ) / LATMILES;
  //$dlon = ( (float)$row['lon'] - $lon ) / LONMILES;
  //]$d = sqrt( ( $dlat * $dlat ) + ( $dlon * $dlon ) );
  //if ( $d <= $radius ) {
    $e = $doc->createElement( "location" );
    $e->setAttribute( 'lat', $row['lat'] );
    $e->setAttribute( 'lon', $row['lon'] );
    $e->setAttribute( 'name', $row['name'] );
    $r->appendChild( $e );
  //}
}
echo $doc->saveXML();
?> 
```

我已经注释掉了你的一些代码，因为我认为它不是必需的。

我也`print $doc->saveXML();`改成`echo $doc->saveXML();`

我也会尝试对参数进行硬编码，即`$lat =55.00;`等以确保获得所需的输出。

上面的公式 i sin miles 改为 km 使用 6371 而不是 3959

# python - 烧瓶 url_for TypeError

> ID：12879490
> 
> 赞同：4
> 
> 时间：2012-10-14T05:10:50.430
> 
> 标签：python, flask, url-for

尝试在 Flask 中使用 url_for 方法时出现错误。我不确定它的原因是什么，因为我只遵循 Flask 快速入门。我是一个有一点 Python 经验的 Java 人，想学习 Flask。

这是跟踪：

```
Traceback (most recent call last):
  File "hello.py", line 36, in <module>
    print url_for(login)
  File "/home/cobi/Dev/env/flask/latest/flask/helpers.py", line 259, in url_for
    if endpoint[:1] == '.':
TypeError: 'function' object has no attribute '__getitem__ 
```

我的代码是这样的：

```
from flask import Flask, url_for
app = Flask(__name__)
app.debug = True

@app.route('/login/<username>')
def login(): pass

with app.test_request_context():
  print url_for(login) 
```

我已经尝试过 Flask 的稳定版和开发版，但错误仍然存​​在。任何帮助都感激不尽！谢谢，如果我的英语不是很好，我很抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T05:15:52.033

[文档](http://flask.pocoo.org/docs/api/#flask.url_for)说这需要`url_for`一个字符串，而不是一个函数。您还需要提供一个用户名，因为您创建的路线需要一个。

改为这样做：

```
with app.test_request_context():
    print url_for('login', username='testuser') 
```

您收到此错误是因为字符串有`__getitem__`方法但函数没有。

```
>>> def myfunc():
...     pass
... 
>>> myfunc.__getitem__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'function' object has no attribute '__getitem__'
>>> 'myfunc'.__getitem__
<method-wrapper '__getitem__' of str object at 0x10049fde0>
>>> 
```

# c# - ASP Grid View，预定义行高大小

> ID：12879495
> 
> 赞同：0
> 
> 时间：2012-10-14T05:11:33.257
> 
> 标签：c#, asp.net, css, gridview, dynamic-data

我有一个带有两个动态列的 Asp Gridview。一列将显示一组字符（描述），另一列用于显示图像。我只是想限制这个描述网格行高。

```
<div>
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1" EnableModelValidation="True"
                  AllowPaging="True" GridLines="None" onselectedindexchanged="GridView1_SelectedIndexChanged">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:Label ID="Label_dynamicDes" runat="server" Text='<%#Bind("description") %>'></asp:Label> <br/>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:ImageField DataImageUrlField="picpath" ControlStyle-Width='200px'>
                <ControlStyle Width="200px"></ControlStyle>
            </asp:ImageField>
        </Columns>
    </asp:GridView>

    <asp:SqlDataSource ID="SqlDataSource_dynamic" runat="server">
    </asp:SqlDataSource>

</div> 
```

如何控制 GridView 行大小的高度？我不能在后面的代码中做到这一点。请帮我一些css函数来预定义动态行的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T05:49:43.310

您可以从代码后面或标记中设置`RowStyle`和。有关详细信息，`AlternatingRowStyle`请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)

**编辑：**

您可以`RowStyle-CssClass`像这样在标记中设置：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
DataSourceID="SqlDataSource1" EnableModelValidation="True"
AllowPaging="True" GridLines="None" onselectedindexchanged="GridView1_SelectedIndexChanged"
RowStyle-CssClass="my-table-row-style"> 
```

像这样在后面的代码中设置它：

```
GridView1.RowStyle.CssClass = "my-table-row-style"; 
```

或者只是像这样纯粹用 CSS 来做：

```
#GridView1 td
{
    height: 90px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T07:44:56.397

我假设您不希望行的高度大于图像的高度（假设为 90 像素）。您可以在 TemplateField 中放置一个固定高度的 div 并设置高度

```
 <asp:TemplateField>
    <ItemTemplate>

       <div style="height:90px; overflow:auto">
        <asp:Label ID="Label_dynamicDes" runat="server" Text='<%#Bind("description") %>'></asp:Label>
       </div>

    </ItemTemplate>
   </asp:TemplateField> 
```

当描述超过高度时，div 会有滚动条，因为`overflow:auto`. 你也可以拥有`overflow:scroll`

# sql-server-2008 - 如何从号码列表中选择随机数

> ID：12879496
> 
> 赞同：4
> 
> 时间：2012-10-14T05:11:36.330
> 
> 标签：sql-server-2008, select, random

我需要从 sql server 2008 的 bigint 列表中随机选择一个数字。数字列表没有继续

例如：号码列表可能是这样的

1578 1579 1580 1587 1589 1590 1595 1603

感谢进阶。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T05:17:43.257

我已经成功地通过 newid() 排序了选择的前 1 个结果：

```
select top 1 WhateverId from YourTable order by newid(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T05:18:40.307

[从大表中随机选择行](http://msdn.microsoft.com/en-us/library/cc441928.aspx "哈")

```
SELECT TOP 1 BigIntColumn FROM Table1
ORDER BY NEWID() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T05:25:06.687

其他答案不能很好地扩展到大表。

这个可以，并且可以从 SQL2005 开始使用。

```
SELECT TOP 1 * FROM <table_name> TABLESAMPLE (10 PERCENT) 
```

[从“从大表中随机选择行](http://msdn.microsoft.com/en-us/library/cc441928.aspx)”中的“进一步向下” ：

> 通常，当在讨论组中询问有关如何选择随机行的问题时，会提出 NEWID 查询；它很简单，非常适合小桌子。但是，当您将 NEWID 查询用于大型表时，它有一个很大的缺点。ORDER BY 子句使表中的所有行都复制到 tempdb 数据库中，并在其中进行排序。这会导致两个问题：
> 
> 排序操作通常具有与之相关的高成本。排序可以使用大量的磁盘 I/O，并且可以运行很长时间。在最坏的情况下，tempdb 可能会耗尽空间。在最好的情况下，tempdb 会占用大量磁盘空间，如果没有手动收缩命令，这些空间永远不会被回收。您需要的是一种随机选择行的方法，该方法不会使用 tempdb，并且不会随着表变大而变慢。

# jquery - jQuery动画ul列表

> ID：12879502
> 
> 赞同：3
> 
> 时间：2012-10-14T05:14:23.313
> 
> 标签：jquery, jquery-animate

```
<style>
.myNewsSlider
{
width:200px;
height:44px;
overflow:hidden;
position:relative;
 }

 .myNewsList
 {
margin:0px; 
padding:0px;
position: absolute;
 }
</style>

<div class="myNewsSlider">
  <ul class="myNewsList">
    <li>first element</li>
    <li>second element</li>
    <li>third element</li>
  </ul>
</div> 
```

我希望列表从下到上移动并显示每个元素 5 秒。

第一个元素会显示 5 秒，然后消失，第二个元素会显示 5 秒，以此类推。

我如何使用 Jquery 来完成这个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:30:07.100

**工作演示**更简单：http: [//jsfiddle.net/aLprr/](http://jsfiddle.net/aLprr/)

使用的 API：

*   `.promise`- [http://api.jquery.com/promise/](http://api.jquery.com/promise/)
*   `.delay`- [http://api.jquery.com/delay/](http://api.jquery.com/delay/)
*   `.fadeOut`- [http://api.jquery.com/?ns0=1&s=.fadeOut&go=](http://api.jquery.com/?ns0=1&s=.fadeOut&go=)

希望它适合原因`:)`

PS - 玩弄 5000 的计算。

**代码**

```
$("document").ready(function() {
    $('ul li').each(function(index) {
        $(this).delay(4000 * index).fadeOut(500).promise(function() {
            $(this).remove();
        });
    });

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T07:35:01.637

```
var p;
for(i=0;i<=3;i++){
  p=i*20;
  $('.myNewsList').animate({"margin-top":"-"+p+"px"},1000).delay(5000);
 }​

.myNewsSlider
 {
  width:200px;
  height:24px;
  overflow:hidden;
  position:relative; 
```

}

[演示](http://jsfiddle.net/HsTcf/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T05:47:06.747

一个简单的方法是

1]将myNewsList的`li`属性`margin-top`设置为`100%`；

2]通过将jquery告诉`animate`myNewsList's to`li``margin-top``0%`

3]对于`5 seconds`延迟，您可以使用 `setInterval()`可以在每5秒后隐藏myNewsList的第一个li然后`li`通过将其设置`top-margin`为0％来设置第二个动画的方法。如果所有li都被隐藏，请再次从第一个开始`li`..

# python - 在 Python 中，如何在不使用全局变量的情况下在第二个函数中使用函数的 return 语句？

> ID：12879503
> 
> 赞同：0
> 
> 时间：2012-10-14T05:14:42.120
> 
> 标签：python, variables, global

我正在处理一个约束指定我不能使用全局变量的赋值。变量仅针对特定功能定义。我想知道是否有一种方法可以获取函数返回的内容（字符串），然后创建一个可以使用该字符串的新函数，而无需全局变量？注意：我可以使用变量，但不能使用全局变量。谢谢！

根据请求，这是一个示例。

```
def func1():
     return "output"
def func2():
     #loop over the string "output",just for example 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T05:20:23.323

```
>>> def a():
...     return 'x'
... 
>>> def b(s):
...     print 'b recieved', s
... 
>>> b(a())
b recieved x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T05:16:29.370

为什么不将变量作为参数传递给新函数？

例如

```
s = someFunc1()

someFunc2(s) 
```

# java - 管道到 Java 中的新命令行

> ID：12879509
> 
> 赞同：1
> 
> 时间：2012-10-14T05:16:15.067
> 
> 标签：java, command-line, piping

我正在编写一个创建此批处理文件的程序：

`at xx:xx /interactive "cmd.exe"`

该程序允许用户自己选择时间，并且在运行 Windows XP 的计算机上，此批处理文件生成的命令提示符应该为您提供系统级访问权限。

但是，我仍然需要在它生成后控制系统特权 cmd，这就是我要画的空白。

如何将管道连接到预计在未来大约 1 分钟内产生的命令行？

# css - Jquery UI Accordion - 隐藏活动元素的标题边框

> ID：12879521
> 
> 赞同：0
> 
> 时间：2012-10-14T05:17:54.203
> 
> 标签：css, jquery-ui, jquery-ui-accordion

我正在从以下 HTML 创建一个 Jquery 手风琴

```
<div class="title"><a href="javascript:void(0)">Title goes here</a></div>
<div class="body">Body goes here</div> 
```

手风琴可以工作，并且周围有我喜欢的边框。但是，当一个元素展开时，我想删除标题的底部边框。这可能吗？有关我需要的示例，请尝试

```
<div class="title" style="border-bottom:0px;"><a href="javascript:void(0)">Title goes here</a></div>
<div class="body">Body goes here</div> 
```

我需要上述样式，但仅适用于手风琴中的活动元素。我尝试设置样式

```
.ui-accordion-header-active 
```

但它不起作用。有任何想法吗？

编辑：这是一个 Js fiddle 来测试它。我想摆脱标题和正文之间的分界线。

[http://jsfiddle.net/2LkS6/](http://jsfiddle.net/2LkS6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:42:52.250

您可以简单地添加以下 css：

```
.ui-accordion-header-active {
    border-bottom: none;
} 
```

[更新的小提琴](http://jsfiddle.net/2LkS6/1/)

# c# - C# while 循环不适用于服务器端控件

> ID：12879535
> 
> 赞同：-2
> 
> 时间：2012-10-14T05:20:47.057
> 
> 标签：c#, asp.net

我的数据库中有 5 条记录，下面的代码可以正常检索所有 5 条记录并写入它们。

```
while (dr.Read())
{
     String a1 = dr[0].ToString();
     Response.Write(a1);
} 
```

但是，当我删除`Resonse.Write(a1);`并使用`repvals = a1;`输出时，只显示最后一条记录，而不是所有记录。

```
while (dr.Read())
{
    String a1 = dr[0].ToString();
    repvals = a1;
} 
```

在上面的代码中，repvals 是一个服务器端 HTML 控件，声明为 <%=repvals%> 并声明为`protected string repvals`在代码页中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T05:23:39.930

您需要在每次迭代中将新字符串连接到 repvals 中，所以试试这个

```
while (dr.Read())
{
    String a1 = dr[0].ToString();
    repvals += a1;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T05:23:48.320

因为您每次都在覆盖该值。您需要连接字符串，而不是每次都将其分配给同一个变量。见下文：

```
repvals="";
while (dr.Read())
  {
     String a1 = dr[0].ToString();
     repvals = repvals + a1;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T05:25:03.667

您已经声明了 repvals 并向其写入了 5 次值——最后一次写入是您所看到的，因为您在循环之后进行渲染。我会在你的标记中使用一个数组或列表，并在你的循环中累积来自 db 的值。

# facebook - 重定向到身份验证对话

> ID：12879537
> 
> 赞同：0
> 
> 时间：2012-10-14T05:21:23.580
> 
> 标签：facebook, authentication, redirect

我创建了一个应用程序。现在我希望当用户来到我的应用程序时，只有当他没有被授权时，才将其重定向到身份验证对话框，否则不要重定向到任何地方。我想通过 Auth 推荐来做到这一点，但在我的应用程序设置中，这个选项没有出现，这里是它的截图：http: [//i.stack.imgur.com/m8cMV.png](http://i.stack.imgur.com/m8cMV.png) 如果你能告诉我如何启用身份验证再次推荐选项然后告诉我或告诉我一个 php 代码来重定向用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:56:18.653

好吧，我的朋友，在 Facebook 的“开发者路线图”中，他们正在写他们将删除该选项。

据我所知，如果用户无权访问您的应用程序，您需要构建一个自我重定向到身份验证对话框。

如果他这样做了，那就展示别的东西。

希望能帮助到你。

# python - 在 python 3 问题中使用 PIL 的 RGB 值问题

> ID：12879538
> 
> 赞同：3
> 
> 时间：2012-10-14T05:21:24.660
> 
> 标签：python, python-3.x, image-processing, python-imaging-library, rgb

我正在使用 Python 3 中的 PIL 库来修改 .gif 文件，到目前为止，在大多数情况下，最终结果看起来都应该是这样，**但是在检查一些 rgb 值时，我注意到我只得到了几个数字.**

0、51、153、102 是我最常得到的 4 个值。可能还有1-2个其他人，但就是这样。在 200x200 的 gif 图像中，我只得到 4-6 个 rgb 值。

这是我目前使用的通用格式的副本：

```
from PIL import Image

def main():
    image=Image.open("filename.gif")
    image=image.convert('RGB')
    width, height = image.size
    for x in range(width):
        for y in range(height):

            r, g, b = image.getpixel ((x,y))
            print (r,g,b) 
```

我试图右移 4 以将高位转移到低位，但返回几乎总是 0。

**我在编码中做错了吗？我认为在尝试左移位值时会引起一些问题。**

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:07:40.780

您发布的代码没有任何问题。

您返回的完整值列表无疑是 0、51、102、153、204 和 255，或者十六进制：0x00、0x33、0x66、0x99、0xcc、0xff（表示从 0% 到 100% 的强度，步长为 20%）。由于其中有六种颜色，它们可以表示的颜色总数为 6 * 6 * 6 = 216，并且由于 216 < 256，这意味着它们适合 GIF 格式的 256 色调色板。

这些也被称为[网络安全颜色](http://en.wikipedia.org/wiki/Web_colors#Web-safe_colors)，由于历史原因，它们经常用于 GIF 图像。

但是，您的右移问题似乎无关紧要：

```
>>> for x in 0, 51, 102, 153, 204, 255:
...     print x >> 4
... 
0
3
6
9
12
15
>>> 
```

# c# - 如何删除文件锁？C＃

> ID：12879539
> 
> 赞同：6
> 
> 时间：2012-10-14T05:21:46.483
> 
> 标签：c#, file, file-io

所以我正在使用 C# 并正在制作一个注册系统。所以有一个添加图片的选项，我做什么，我提示用户选择一个文件，然后该文件将被复制到目录文件夹，然后重命名为学生的录取编号。这是该浏览按钮的代码：

```
OpenFileDialog openDlg = new OpenFileDialog();
            openDlg.Filter = "All JPEG files (*.jpg; *.jpeg)| *.jpg; *.jpeg";
            string filter = openDlg.Filter;
            openDlg.Multiselect = false;
            openDlg.Title = "Open a JPG File";
            if (openDlg.ShowDialog() == DialogResult.OK)
            {                
                curFileName = openDlg.SafeFileName;
                string curFilePath = openDlg.FileName;

                openDlg.Dispose();

                string sourcePath = @curFilePath.Remove((curFilePath.Length - curFileName.Length));
                string targetPath = "@";

                mycon.Open();
                string cmdstr = "SELECT imageDirectory from userSettings WHERE ID = 1";
                cmd = new OleDbCommand(cmdstr, mycon);
                dr = cmd.ExecuteReader();
                while (dr.Read())
                {
                    targetPath = (@dr["imageDirectory"].ToString());
                }
                dr.Close();
                mycon.Close();

                string sourceFile = Path.Combine(sourcePath, curFileName);
                string destFile = Path.Combine(targetPath, curFileName);

                File.Copy(sourceFile, destFile, true);

                newname = @destFile.Remove((destFile.Length - curFileName.Length)).ToString() + "\\" + (DateTime.Now.Year + "-" + textBox1.Text+".jpeg");

                if (File.Exists(newname) == true)
                {
                    pictureBox1.Image.Dispose();
                    try
                    {
                        File.Delete(newname);
                    }

                    catch (IOException ex)
                    {
                        MessageBox.Show(ex.ToString());
                        return;
                    }
                }

                File.Move(destFile, newname);

                photoPath = newname;
                pictureBox1.Image = Image.FromFile(photoPath); 
```

问题是：

a.) 我有一个功能允许用户进入下一步，然后如果他想在最后一步进行一些更改，他可以返回并更新它。这里的问题是当他更改图片时，我收到一条错误消息“无法访问该文件，因为它正在被另一个进程使用”

b.) 当用户已经上传了一张图片，然后返回主页，他决定重新注册时将无法上传新的图片，并且错误提示：“无法访问文件，因为它正被另一个进程使用”。

这两个错误都指向这里：

```
`File.Delete(newname);` 
```

我真的不知道该怎么做伙计们，我从昨晚开始就一直在寻找解决方案，但我看不到一个不会让我完全改变整个代码的解决方案。请帮忙 ：（

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T10:21:46.083

您的代码是正确的，请忽略有关代码气味的贬低。处理 PictureBox.Image 对于避免内存不足异常很重要。

此问题是由 Bitmap 类的实现细节引起的。当您打开图像文件时，该类会创建一个内存映射文件以将图像的像素数据映射到内存中。这是对大图像的重要优化，它将像素数据保留在页面文件之外。现在它已经不那么重要了，在 GDI+ 设计 15 年后，现代机器拥有大量 RAM 和磁盘空间。

但是，该内存映射文件会在该文件上创建一个锁。重要的是要防止任何其他进程弄乱文件数据并使文件的映射视图无效。这就是您所看到的，尝试替换或删除文件不再有效。您可以通过创建位图的深层副本来避免这种情况，该副本在内存中包含所有像素数据并且不再使用该文件。像这样：

```
public static Bitmap LoadBitmapNolock(string path) {
    using (var img = Image.FromFile(path)) {
        return new Bitmap(img);
    }
} 
```

Do note that the odds of running out of memory with large images on a 32-bit version of Windows is significantly increased with this code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:17:07.600

`.Dispose()`在托管语言（如 C#）中手动使用是[Code Smell](http://en.wikipedia.org/wiki/Code_smell)。您可能最终处于某种无效状态，因为您正在尝试手动管理资源。您可以避免这种情况的两种方法是：

1.  摆脱不需要的`.Dispose()`元素（如`opnDlg.Dispose()`），和/或
2.  尝试将需要处理的对象包装在`using(...){...}`语句中

无论哪种方式，一旦你重构了你的代码，就不应该有任何`.Dispose()`方法调用。您正在使用的对象要么不需要手动管理，并且尝试这样做只会导致问题，要么它们绝对需要管理，因此该`using(...)`语句要优越得多，因为它保证在何时释放资源退出代码块。

# java - 在 Java 中调整图像大小以减小图像大小

> ID：12879540
> 
> 赞同：12
> 
> 时间：2012-10-14T05:22:09.053
> 
> 标签：java, image-processing

我有一个尺寸为 800x800 的图像，其大小为 170 kb。我想将此图像调整为 600x600。调整大小后，我希望减小图像大小。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-14T06:13:51.660

您不需要一个完整的图像处理库来简单地调整图像大小。

推荐的方法是使用**渐进式双线性缩放**，就像这样（随意使用此方法，就像在您的代码中一样）：

```
public BufferedImage scale(BufferedImage img, int targetWidth, int targetHeight) {

    int type = (img.getTransparency() == Transparency.OPAQUE) ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;
    BufferedImage ret = img;
    BufferedImage scratchImage = null;
    Graphics2D g2 = null;

    int w = img.getWidth();
    int h = img.getHeight();

    int prevW = w;
    int prevH = h;

    do {
        if (w > targetWidth) {
            w /= 2;
            w = (w < targetWidth) ? targetWidth : w;
        }

        if (h > targetHeight) {
            h /= 2;
            h = (h < targetHeight) ? targetHeight : h;
        }

        if (scratchImage == null) {
            scratchImage = new BufferedImage(w, h, type);
            g2 = scratchImage.createGraphics();
        }

        g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g2.drawImage(ret, 0, 0, w, h, 0, 0, prevW, prevH, null);

        prevW = w;
        prevH = h;
        ret = scratchImage;
    } while (w != targetWidth || h != targetHeight);

    if (g2 != null) {
        g2.dispose();
    }

    if (targetWidth != ret.getWidth() || targetHeight != ret.getHeight()) {
        scratchImage = new BufferedImage(targetWidth, targetHeight, type);
        g2 = scratchImage.createGraphics();
        g2.drawImage(ret, 0, 0, null);
        g2.dispose();
        ret = scratchImage;
    }

    return ret;

} 
```

[在Filthy Rich Clients](http://filthyrichclients.org)修改和清理了原始代码。

* * *

根据您的评论，您可以像这样降低质量并对 JPEG 字节进行编码：

`image`是缓冲图像。

```
ByteArrayOutputStream os = new ByteArrayOutputStream();
ImageWriter writer = (ImageWriter) ImageIO.getImageWritersByFormatName("jpeg").next();

ImageWriteParam param = writer.getDefaultWriteParam();
param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
param.setCompressionQuality(0.2f); // Change this, float between 0.0 and 1.0

writer.setOutput(ImageIO.createImageOutputStream(os));
writer.write(null, new IIOImage(image, null, null), param);
writer.dispose(); 
```

现在，由于`os`是 a `ByteArrayOutputStream`，您可以对其进行 Base64 编码。

```
String base64 = Base64.encode(os.toByteArray()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T16:45:24.467

您可以使用 100% Java、Apache2 开源[imgscalr 库](https://github.com/rkalla/imgscalr)（单个静态类）并执行以下操作：

```
import org.imgscalr.Scalr.*; // static imports are awesome with the lib

... some class code ...

// This is a super-contrived method name, I just wanted to incorporate
// the details from your question accurately.
public static void resizeImageTo600x600(BufferedImage image) {
    ImageIO.write(resize(image, 600), "JPG", new File("/path/to/file.jpg"));
} 
```

**注意**：如果上面看起来很奇怪，静态导入允许我直接使用*调整大小*调用而不指定*Scalr.resize(...)*

此外，如果写出的缩放图像的质量看起来不够好（尽管它会很快被写出），您可以对*resize*方法使用更多参数，如下所示：

```
public static void resizeImageTo600x600(BufferedImage image) {
    ImageIO.write(resize(image, Method.ULTRA_QUALITY, 600), "JPG", new File("/path/to/file.jpg"));
} 
```

..您甚至可以将 BufferedImageOp 应用于结果以软化它，以防缩小使图像看起来锯齿状：

```
public static void resizeImageTo600x600(BufferedImage image) {
    ImageIO.write(resize(image, Method.ULTRA_QUALITY, 600, Scalr.OP_ANTIALIAS), "JPG", new File("/path/to/file.jpg"));
} 
```

您可以通过在 Maven POM 中添加以下 dep 条目来开始使用该库（imgscalr 在 Maven 中央存储库中）：

```
<dependency> 
  <groupId>org.imgscalr</groupId>
  <artifactId>imgscalr-lib</artifactId>
  <version>4.2</version>
  <type>jar</type>
  <scope>compile</scope>
</dependency> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T05:24:47.320

使用一些通过Java支持图像处理的好框架，例如[IimageJ](http://rsbweb.nih.gov/ij/features.html)

Java 中还可以通过一些类（例如[MemoryImageSource](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/image/MemoryImageSource.html)和[PixelGrabber](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/image/PixelGrabber.html) ）获得一些基本支持。

# java - 用于拆分字符串的正则表达式（Java）

> ID：12879542
> 
> 赞同：2
> 
> 时间：2012-10-14T05:23:36.370
> 
> 标签：java

我有一个字符串，看起来像：

```
6
0 1 1 0 0
1 1 1 1 0
0 0 0 1 0
4
1 1 0 1 0
0 0 0 1 0
1 1 0 1 0
0 1 1 0 0 
```

并想分成两个不同的字符串，例如：

```
6
0 1 1 0 0
1 1 1 1 0
0 0 0 1 0 
```

另一个字符串是：

```
4
1 1 0 1 0
0 0 0 1 0
1 1 0 1 0
0 1 1 0 0 
```

我会使用正则表达式吗？或者，还有更好的方法？注意：除了 6 和 4 之外，其他数字将始终为 1 或 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T05:32:12.410

您想在换行符上拆分，但仅当以下字符仅是数字时才换行。
试试这个正则表达式：

```
"\n(?=\\d+\\n)" 
```

它使用[*前瞻*](http://www.regular-expressions.info/lookaround.html)来断言上述条件。

下面是一些测试代码：

```
public static void main(String[] args) {
    String input = "6\n0 1 1 0 0\n1 1 1 1 0\n0 0 0 1 0\n4\n1 1 0 1 0\n0 0 0 1 0\n1 1 0 1 0\n0 1 1 0 0";
    String[] parts = input.split("\n(?=\\d+\\n)");
    System.out.println(Arrays.toString(parts));
} 
```

输出：

```
[6
0 1 1 0 0
1 1 1 1 0
0 0 0 1 0, 4
1 1 0 1 0
0 0 0 1 0
1 1 0 1 0
0 1 1 0 0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T05:42:12.660

正如@Bohemian 所回答的那样，您绝对可以使用正则表达式来做到这一点。但前提是您不打算对结果进行任何其他处理。如果您需要进一步解析拆分字符串，并且再次使用正则表达式，这会使您的代码过于复杂。我宁愿建议您将字符串发送到 a`java.util.Scanner`并将整个字符串解析为一些更有用的数据结构或一组类以供将来使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T05:37:35.813

是的，它需要正则表达式。您可以创建一个`java.util.regex.Pattern.compile("([64][^64]+?)", Pattern.MULTILINE)`并从中创建一个，`java.util.regex.Matcher`然后通过您的 CharSequence 开始 find()。您可以在每次 find() 时查询 group(1) 。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-14T05:26:53.293

没有正则表达式是可能的：

```
String phrase = 
"6
0 1 1 0 0
1 1 1 1 0
0 0 0 1 0
4
1 1 0 1 0
0 0 0 1 0
1 1 0 1 0
0 1 1 0 0";

String delims = "[4 6]+";

String[] parts= phrase.split(delims); 
```

# session - Playframework 2，Websockets 和 Session

> ID：12879547
> 
> 赞同：3
> 
> 时间：2012-10-14T05:24:25.143
> 
> 标签：session, websocket, playframework-2.0, session-cookies

我知道在处理 websockets 时，我不能使用 session。playframework 2 websocket 聊天示例将用户名添加到 url，但是如果我有一个已经登录的用户并且我不想通过 url 传递他的用户名，还有另一种方法可以从内部获取用户登录凭据websocket 请求？

到目前为止，这是我尝试过的：请求页面，我将从那里连接到套接字：

```
public static Result index(){
    session("username", "mike")
    return ok(indexpage.render());
} 
```

这是Websocket部分：

```
public static Websocket<JsonNode> chat(){
    System.out.println(session("username"));    
    ....all the websocket stuff
} 
```

我打印出来的所有内容都是空我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:52:00.387

您可以访问会话：

```
package controllers

import play.api._
import play.api.mvc._
import play.api.libs.iteratee._

object Application extends Controller {
  def index = Action {
    Ok(views.html.index()).withSession("connected" -> "user@gmail.com")
  }

  //I used for views.html.index the html markup from http://www.websocket.org/echo.html
  def wstest = WebSocket.using[String] { request =>

    val in = Iteratee.consume[String]()

    val username = request.session.get("connected").getOrElse("missing username")

    val out = Enumerator("Hello " + username) //puts  Hello user@gmail.com on the screen

    (in, out)
  }
} 
```

好的，现在对于 Java（控制器中的方法）：

```
public static WebSocket<String> chat(){
    final Http.Session session = session();
    final String name = session("username");//better version

    return new WebSocket<String>() {
        public void onReady(WebSocket.In<String> in, WebSocket.Out<String> out) {
            in.onMessage(new F.Callback<String>() {
                public void invoke(String event) {
                    System.out.println(event);
                }
            });

            in.onClose(new F.Callback0() {
                public void invoke() {
                    System.out.println("Disconnected");
                }
            });

            out.write("Hello " + session.get("username"));
            out.write("Hello " + name);
        }
    };
} 
```

似乎您无法在 websocket 创建中直接访问 http 上下文，但您可以将会话或来自 cookie 的更好数据存储在常量中，并在 WebSocket 实例创建中使用它。

我上传了一个带有测试[https://github.com/schleichardt/stackoverflow-answers/tree/so12879547](https://github.com/schleichardt/stackoverflow-answers/tree/so12879547)的 Java 示例（它不在 master 分支上）。

PS：这在 WebSocket 创建中不起作用：

```
Http.Context.current().session().get("username") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T15:39:12.423

初始化为 HTTP 握手时，允许访问 Session。您可以通过将其粘贴到会话来定义您的用户名密钥，来自经过身份验证的操作的值：

```
Redirect(.....).withSession("login" -> user) 
```

接着：

```
object WebsocketController extends Controller {

  def wsConnection = WebSocket.async[JsValue] { request =>

    val userOption: Option[String] = request.session.get("login")

    //do your credential check or login ....

    (in, out)
  }

} 
```

这确实由 playframework 保护

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-16T19:15:23.483

websocket连接不是Http。第一个握手请求看起来有点像 http，但确实包含其他字段。这就是为什么你不能在 websocket 请求中添加你的 http cookie。

来自维基百科：

> 握手类似于 HTTP，因此服务器可以在同一端口上处理 HTTP 连接和 WebSocket 连接。但是，涉及的特定字段以及握手之后的内容不符合 HTTP 协议。

如果您不想要用户名，您可以在 url 中使用令牌/会话 ID，或者，如果在启动 websocket 连接之前无法实现登录/密码检索，请实现您自己的登录/密码检索方法通过 websocket 通信（例如服务器以特定格式请求登录/密码，客户端 js 做出反应，收集并发送回服务器）。

# sql - SQL Server 中存在重复行时如何选择具有最大值的行

> ID：12879550
> 
> 赞同：7
> 
> 时间：2012-10-14T05:24:55.677
> 
> 标签：sql, sql-server

我有这样的桌子

```
DocumentID        | MasterStepID | StepNumber | RoleID | UserID     | Status
JIEP/TT/07/000174 | Approval1    |          1 |   NULL | 0006100022 |      1    
JIEP/TT/07/000174 | Approval1    |          2 |     12 | 0006199013 |      3    
JIEP/TT/07/000174 | Approval1    |          3 |     13 | 0006106426 |      3
JIEP/TT/07/000174 | Approval1    |          5 |     18 | 0006100022 |      3
JIEP/TT/07/000174 | Approval1    |          6 |     16 | 0006104115 |      6 
```

我期待这样的结果

```
JIEP/TT/07/000174 | Approval1 | 1 | NULL | 0006100022 | 1
JIEP/TT/07/000174 | Approval1 | 5 |   18 | 0006100022 | 3
JIEP/TT/07/000174 | Approval1 | 6 |   16 | 0006104115 | 6 
```

我尝试了这个查询，但它的返回不像我期望的那样

```
select  *
from    WF_Approval sr1
where not exists
        (
        select  *
        from    WF_Approval sr2 
        where   sr1.DocumentID = sr2.DocumentID and 
                (
                    sr1.StepNumber < sr2.StepNumber
                )
        )and MasterStepID = 'Approval1' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T05:46:17.443

您基本上只是缺少状态比较，因为您想要每个状态一行；

```
SELECT *
FROM WF_Approval sr1
WHERE NOT EXISTS (
    SELECT *
    FROM  WF_Approval sr2 
    WHERE sr1.DocumentID = sr2.DocumentID AND 
          sr1.Status = sr2.Status AND                  # <-- new line
          sr1.StepNumber < sr2.StepNumber
) AND MasterStepID = 'Approval1' 
```

或重写为`JOIN`;

```
SELECT *
FROM WF_Approval sr1
LEFT JOIN WF_Approval sr2
  ON sr1.DocumentID = sr2.DocumentID 
 AND sr1.Status = sr2.Status
 AND sr1.StepNumber < sr2.StepNumber
WHERE sr2.DocumentID IS NULL
  AND sr1.MasterStepID = 'Approval1'; 
```

[SQLfiddle 与这里的两个版本的查询](http://sqlfiddle.com/#!6/ee9b3/1)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T08:03:24.750

这应该比自连接更快，因为（很可能）只需要对表进行一次扫描。

```
select DocumentID, 
       MasterStepID, 
       StepNumber, 
       RoleID,
       UserID , 
       Status
from (
    select wf.*
           row_number() over (partition by wf.status order by wf.stepnumber desc) as rn
    from  WF_Approval wf
) t
where rn = 1
order by StepNumber 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T06:03:12.907

试试这个

```
SELECT T1.* FROM WF_Approval T1 
JOIN
(SELECT DISTINCT [Status], DocumentID, MAX(StepNumber) as [StepNumber] from WF_Approval 
GROUP BY DocumentID, [Status])  T2 
ON T1.DocumentID = T2.DocumentID AND T1.[Status] = T2.[Status]
AND T1.StepNumber = T2.StepNumber
ORDER BY StepNumber ASC, Status ASC 
```

输出：

```
JIEP/TT/07/000174   Approval1   1   NULL    0006100022  1
JIEP/TT/07/000174   Approval1   5   18      0006100022  3
JIEP/TT/07/000174   Approval1   6   16      0006104115  6 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-25T15:05:16.030

当前的简单表（Student_Course）是这样的，重复记录假设：

```
Sname   Sid
------------
Ravi    S001
Ravi    S001
Jack    S002
Jack    S002
Jack    S002
Guru    S003
Smith   S004
Arun    S005
Rajeev  S006 
```

**询问：**

```
SELECT S.Sid, S.Sname, Count(*) As Occurance
FROM Student_Course AS S
GROUP BY S.Sid
HAVING Count(S.Sid) > 1
Order By Count(*) Desc Limit 1 
```

**输出：**

```
Sid     Sname   Occurance
-------------------------
S002    Jack    3 
```

# ckeditor - 使用 WAMP 安装 CKEditor

> ID：12879553
> 
> 赞同：0
> 
> 时间：2012-10-14T05:26:15.157
> 
> 标签：ckeditor, wamp

我正在尝试在 WAMP 中安装 CKEditor。我下载了它，把它解压到 www 文件夹中。

![在此处输入图像描述](../Images/e04184f25be83973375f0bbf651f8161.png)

这是*index.php*文件的 HTML 代码

```
<html>
<head>
<script type="text/javascript" src="ckeditor/ckeditor.js"></script>
</head>
<body>

<textarea class="ckeditor" rows="10" cols="80"></textarea>

</body>
</html> 
```

我按照示例中的说明将`textarea`类名指定为**ckeditor**，但它不会影响 textarea。CKEditor 没有出现。

我在这里错过了什么，我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:55:19.120

您需要包含 CKEditor 的 JavaScript 文件，使用如下内容：

```
<script type="text/javascript" src="ckeditor/ckeditor.js"></script> 
```

这`src`取决于 ckeditor.js 相对于您的索引文件的本地化位置。

此外，您的 textarea 需要一个名称，尝试像这样添加一个：

```
<textarea class="ckeditor" name="editor1"></textarea> 
```

# c# - 我们如何在 C# 应用程序中运行 Javascript？

> ID：12879555
> 
> 赞同：2
> 
> 时间：2012-10-14T05:26:27.613
> 
> 标签：c#, javascript

例如，如果我正在使用 Crypto-js ( [PGEncode.js](http://code.google.com/p/snapbox/source/browse/trunk/+snapbox/crypt/hanewin/PGencode.js?r=2) ) 的 OpenPGP 实现并且我想在 C# 应用程序中调用此函数，这可能吗？我应该使用什么样的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T05:32:53.390

看看[侏罗纪](http://jurassic.codeplex.com/)。

> Jurassic 是 ECMAScript 语言和运行时的实现。它旨在为 .NET 提供性能最佳且最符合标准的 JavaScript 实现。Jurassic 不适合最终用户；相反，它旨在集成到 .NET 程序中。如果您是 .NET 程序的作者，您可以使用 Jurassic 编译和执行 JavaScript 代码。

# python - Python列表扩展随机元素保持边界/原始

> ID：12879561
> 
> 赞同：1
> 
> 时间：2012-10-14T05:28:47.097
> 
> 标签：python, list, random, floating

我正在尝试找到一种方法来扩展具有随机浮点数的列表，使所有元素保持相同的顺序；第一个和最后一个在同一个位置。但是，我需要这些数字来模拟增加。

我的意思是：例如：如果`A == [1.3, 4.5, 6.8, 9.6, 11.3]`

我希望新列表变成这样：

```
B = [1.3, 2.3, 4.5, 4.7, 5.6, 6.8, 9.6, 10.4, 11.1, 11.3] 
```

因此，5 个元素变为 11（或其他任何元素），新列表在（或不）每个初始元素之间获得随机元素（没有必要 -6.8、9.6-）。

这可能吗？我要求太多了吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:35:00.387

```
import random
num_elems_to_add = 10
A=[1.3, 4.5, 6.8, 9.6, 11.3]
new_elems = [random.uniform(A[0],A[-1]) for _ in range(num_elems_to_add)]
print sorted(A+new_elems) 
```

那是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T05:36:34.373

可能有更有效的方法，但这很好用：

```
 import random

  A = [1.3, 4.5, 6.8, 9.6, 11.3]
  low = A[0]
  high = A[-1]
  B = []
  for i in range(10):
      B.append(random.uniform(low,high))
  B.extend(A)
  B.sort() 
```

# gcc - gcc 与 g++ 的链接方式不同

> ID：12879562
> 
> 赞同：1
> 
> 时间：2012-10-14T05:29:00.030
> 
> 标签：gcc, g++, dynamic-linking

我将 C++ 代码转换为 C，现在我也在尝试更改 Makefile。我有这个：

```
g++ -fPIC -o bin/linux/release/gpu_md5 cuda_md5.c cuda_md5_cpu.c obj/release/cuda_md5_gpu.cu.o 
-L/usr/local/cuda/lib64 -L../../lib64 
-L../../common/lib64/linux -L/opt/cuda/NVIDIA_CUDA_SDK/lib64 -lcudart     
-L/usr/local/cuda/lib64 -L../../lib64 
-L../../common/lib64/linux -L/opt/cuda/NVIDIA_CUDA_SDK/lib64 
```

据我所知，我可以将 g++ 更改为 gcc，它应该可以正常工作，但事实并非如此。看起来 gcc 无法从 cuda_md5_cpu.c 中找到我在 cuda_md5.c 中调用的函数（PS：我在 cuda_md5.c 中不包括 cuda_md5_cpu.c）：

```
/tmp/ccKdDJiq.o: In function `cuda_compute_md5s':
cuda_md5.c:(.text+0x201): undefined reference to `init_constants'
cuda_md5.c:(.text+0x2e2): undefined reference to `execute_kernel'
collect2: ld returned 1 exit status 
```

怎么了？我刚刚从 g++ 更改为 gcc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:33:09.493

我会说很有可能`obj/release/cuda_md5_gpu.cu.o`（您似乎没有重新编译）已经用 C++ 编译器编译，因此符号名称已通过名称修改进行了修改。

名称修饰是 C++ 编译器使用的一种技术，允许不同的函数具有相同的名称但具有不同的参数类型（重载），而 C 编译器不需要这样做，因为不允许重载。

换句话说，你可能会发现它`init_constants(int,float);`可能只是被 C 编译器变形为`_init_constants`，但是，如果你使用 C++ 编译器，你会得到类似的东西`_init_constants_$$_IntFloat`，以便将它与`init_constants(int,double)`or区分开来`init_constants(void)`。

因此，试图将 C 编译`cuda_md5.c`与 C++ 编译链接在一起的链接器`obj/release/cuda_md5_gpu.cu.o`将无法将函数名称匹配在一起。

这就是您经常`extern "C" { ... }`在 C++ 代码中看到的原因，它使用 C 规则将函数名称（和其他内容）导出到链接器，以允许将 C 和 C++ 代码链接在一起。

# php - 动态页面内的动态分页

> ID：12879563
> 
> 赞同：1
> 
> 时间：2012-10-14T05:29:04.427
> 
> 标签：php

我正在尝试在动态页面中进行分页，但它会将我带回索引页面，它会将我带回 site/p=index

索引.php

```
<?php

include('navbar.php');

$pages_dir = 'includes';

if(!empty($_GET['p'])) {

$pages = scandir($pages_dir, 0);
unset($pages[0], $pages[1]);

$p = $_GET['p'];

if(in_array($p.'.inc.php', $pages)) {
    include($pages_dir.'/'.$p.'.inc.php');  

}

else 
    {
    echo    '<div id="content"> 
                <h2>Error</h2>
                Page not found!
            </div>';                
            include('side.php');                    
    }

} else {
    include($pages_dir.'/main.inc.php');
}

    include('footer.php');

?> 
```

导航栏.php

```
<div id="menu">
    <ul>
       <li class="highlight"><a href="index.php">Home</a></li>  
       <li><a href="index.php?p=news">News</a></li> 
       <li><a href="index.php?p=features">Features</a></li>
       <li><a href="index.php?p=column">Column</a></li>
    </ul>
 <div class="clear"></div>
</div> 
```

分页功能

分页.php

```
<?php

   function pagination($query, $per_page = 10,$page = 1, $url = '?'){        
        $query = "SELECT COUNT(*) as `num` FROM {$query}";
        $row = mysql_fetch_array(mysql_query($query));
        $total = $row['num'];
        $adjacents = "2"; 

        $page = ($page == 0 ? 1 : $page);  
        $start = ($page - 1) * $per_page;                               

        $prev = $page - 1;                          
        $next = $page + 1;
        $lastpage = ceil($total/$per_page);
        $lpm1 = $lastpage - 1;

        $pagination = "";
        if($lastpage > 1)
        {   
            $pagination .= "<ul class='pagination'>";
                    $pagination .= "<li class='details'>Page $page of $lastpage</li>";
            if ($lastpage < 7 + ($adjacents * 2))
            {   
                for ($counter = 1; $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class='current'>$counter</a></li>";
                    else
                        $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                }
            }
            elseif($lastpage > 5 + ($adjacents * 2))
            {
                if($page < 1 + ($adjacents * 2))        
                {
                    for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                    {
                        if ($counter == $page)
                            $pagination.= "<li><a class='current'>$counter</a></li>";
                        else
                            $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                    }
                    $pagination.= "<li class='dot'>...</li>";
                    $pagination.= "<li><a href='{$url}page=$lpm1'>$lpm1</a></li>";
                    $pagination.= "<li><a href='{$url}page=$lastpage'>$lastpage</a></li>";      
                }
                elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
                {
                    $pagination.= "<li><a href='{$url}page=1'>1</a></li>";
                    $pagination.= "<li><a href='{$url}page=2'>2</a></li>";
                    $pagination.= "<li class='dot'>...</li>";
                    for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                    {
                        if ($counter == $page)
                            $pagination.= "<li><a class='current'>$counter</a></li>";
                        else
                            $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                    }
                    $pagination.= "<li class='dot'>..</li>";
                    $pagination.= "<li><a href='{$url}page=$lpm1'>$lpm1</a></li>";
                    $pagination.= "<li><a href='{$url}page=$lastpage'>$lastpage</a></li>";      
                }
                else
                {
                    $pagination.= "<li><a href='{$url}page=1'>1</a></li>";
                    $pagination.= "<li><a href='{$url}page=2'>2</a></li>";
                    $pagination.= "<li class='dot'>..</li>";
                    for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                    {
                        if ($counter == $page)
                            $pagination.= "<li><a class='current'>$counter</a></li>";
                        else
                            $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                    }
                }
            }

            if ($page < $counter - 1){ 
                $pagination.= "<li><a href='{$url}page=$next'>Next</a></li>";
                $pagination.= "<li><a href='{$url}page=$lastpage'>Last</a></li>";
            }else{
                $pagination.= "<li><a class='current'>Next</a></li>";
                $pagination.= "<li><a class='current'>Last</a></li>";
            }
            $pagination.= "</ul>\n";        
        }

        return $pagination;
    } 
?> 
```

任何人都可以帮助我使用功能分页 $url='？

# php - 如何防止用户以任何可能的方式获得一些显示的文本？

> ID：12879564
> 
> 赞同：0
> 
> 时间：2012-10-14T05:29:04.397
> 
> 标签：php, javascript, css, html

用户可以通过多种方式“获取”显示给他们的文本。选择它并复制它，如果这不起作用，DOM。

我想要一种安全可靠的方法来阻止可能是机器人的用户在 div 中获取内容。

我应该使用什么措施来执行此操作？甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T05:46:13.970

这真的是不可能的。任何发送到浏览器的内容都可供用户使用。捕获击键和某些事件（可能`oncopy`或“类似”的东西）会有所帮助，但总会有一种您无法实际控制的方式。一些开发人员尝试禁用页面右键单击（以防止复制或查看页面源代码），但这两种操作都可以在浏览器的菜单栏中使用。除了制作图像（仍然非常容易获得）之外，如果您通过 HTTP 提供信息，则无法阻止用户获取信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T05:32:16.280

除了将敏感内容渲染为图像之外，我认为没有任何完全万无一失的方法可以做到这一点。

# c# - Instanted then using 和 Uninstant using 有什么区别？

> ID：12879565
> 
> 赞同：2
> 
> 时间：2012-10-14T05:29:21.513
> 
> 标签：c#

请查看以下代码：

```
new StreamWriter("c:/myText.txt").Write("Some thing..."); 
```

和，

```
using (var streamWriter = new StreamWriter("c:/myText.txt")
{
    streamWriter.Write("Some thing...");
} 
```

创建文件的第一个代码但没有在其中写入“Something...”。但是第二个代码也可以工作并写进去。

为什么会出现这个问题？有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T06:05:47.960

该类`StreamWriter`实现`IDisposable`，这意味着它拥有需要释放的资源，或者它具有一些需要在对象被垃圾收集之前运行的清理代码。

在这种情况下，调用`Dispose`会关闭流，可能会在此之前将最后一个数据写入流。

通过编码`new StreamWriter("c:/myText.txt").Write("Some thing...");`，您不会保留对流的引用，因此无法调用`Dispose`以正确关闭流。

请记住，垃圾收集器**永远不会**为您调用 dispose。您必须明确地这样做。

第二个代码块使用退出块时`using`将自动调用的语句。`Dispose`这是编写此代码的正确方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T05:32:31.230

第一个*应该*是：

```
new StreamWriter("c:/myText.txt").Write("Some thing..."); 
```

第二个将完美地工作。第一个问题是您永远不会关闭流。这*最终*会发生（当程序终止时，或者当垃圾收集器最终完成时`StreamWriter`），但第一个将在块完成后正确关闭文件。

# html - HTML 5 中的框架

> ID：12879576
> 
> 赞同：1
> 
> 时间：2012-10-14T05:32:21.793
> 
> 标签：html, frame, w3c

我意识到这`frame`在 HTML5 中被删除了，他们这样做一定有很好的理由。

我想知道如何在 HTML5 中实现相同的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:37:53.840

您仍然可以使用`iframe`. 那会好吗？

[https://developer.mozilla.org/en-US/docs/HTML/Element/iframe](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)

[https://softwareengineering.stackexchange.com/questions/144515/why-were-frames-deprecated-in-html5-but-not-iframes](https://softwareengineering.stackexchange.com/questions/144515/why-were-frames-deprecated-in-html5-but-not-iframes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T05:41:38.010

您可以使用`<iframe>`或尝试使用`<object>`标签。我`<object>`曾在一个必须严格遵守 HTML4 的项目上使用过，而且效果很好。

# html - 缓存整个网页并且在一定时间内不检查更新的页面？

> ID：12879584
> 
> 赞同：0
> 
> 时间：2012-10-14T05:33:33.893
> 
> 标签：html, apache, http, caching

嗯好的这么快的问题。我的服务器有一个简单的 php 文件，它只更新一次，比如说每月一次。现在我绝对不希望浏览器在特定时间之前检查更新。这可能吗？我的网站专门针对 chrome 用户...我有一个 apache 服务器，目前在我的 php 中使用 header 标签：

```
 header("Cache-Control: max-age=25200"); 
```

以上我很确定仍然检查更新的页面。顺便说一句，如果有人好奇浏览器不能检查新页面的原因是因为网页很大。我不想每天都被重新下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:30:36.180

你所拥有的并不是一个糟糕的开始，但你可以稍微改进一下，如下所示：

```
header("Cache-Control: max-age=2592000 public"); 
```

您可以在 .htaccess 中添加过期的 http 标头响应：

```
<IfModule mod_expires.c>
    Header unset expires
    ExpiresActive On
    Header set Expires "Mon, 5 Aug 2013 20:00:00 GMT"
</IfModule> 
```

如果您使用 expires，请记住设置特定日期而不是基于访问的规则，因为这在动态生成内容中不起作用。这样做的缺点是您必须不时更新它。

当然，您也可以在您的 php 文件中将其设置为从请求时间起一个月的时间范围，这样您就不必更新 .htaccess 并且您始终有一个有效期。

```
header('Expires: '.gmdate('D, d M Y H:i:s \G\M\T', time() + 2592000)); 
```

您可以添加编译指示缓存规则。许多现代客户端不使用它，但许多移动应用程序和验证器使用它。

```
<FilesMatch "\.(php)$">
    Header set Pragma "cache"
</FilesMatch> 
```

许多客户还考虑使用 etag 标头，因此添加很重要，我在每个项目中都使用它。您也可以在 .htaccess 中执行此操作。

```
FileETag All 
```

最后，如果您的网站不经常更新，改善缓存和用户体验的最佳方法是让您的 php 生成和 html 文件并将其发送到客户端。这样，您还可以使 expires 标头按预期工作，并且可以通过 apache 或 php 从服务器端使用压缩。

再见

# java - 在 Java 中使用 cookie 登录网页

> ID：12879589
> 
> 赞同：3
> 
> 时间：2012-10-14T05:34:13.050
> 
> 标签：java, cookies, httpclient

我想从需要用户并通过的网页下载文件，但首先我必须获取 cookie。我想要做的正是在这个 Python 脚本中描述的，但我想用 Java 来做。

我一直在阅读相关内容，并且找到了 httpclient 库。我只需要httpclient吗？java中机械化和urllib2的任何等效库？

提前致谢。

```
#!/usr/bin/python

import mechanize, urllib2
from urllib import urlopen, urlencode 

user = 'username'
password = 'password'
output_file = 'name.pdf'

web = "https://..."
bills_page = "https://.../bills"
login_web = "https://.../login/"
file = "https://.../file_I_want"

br = mechanize.Browser()
br.open(web)

data = {
    'user_username': user,
    'user_password': password,
    'idClientehidden': '',
    'answer': ''
}

response1 = urllib2.Request(login_web, urlencode(data))

br.open(response1)
br.open(bills_page)
html_bills = br.response().read()

br.open(file)
pdf_bill = open(output_file, 'w')
pdf_bill.write(br.response().read())
pdf_bill.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T06:14:03.140

[**HttpClient**](http://hc.apache.org/httpclient-3.x/)是一个很好的框架，用于处理 cookie 和访问经过身份验证的 URL。

或者，您可以使用核心 Java 组件，例如[**Authenticator**](http://docs.oracle.com/javase/6/docs/api/java/net/Authenticator.html)、[**URL**](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)和[**BufferedReader**](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)，如下所示：

1.  创建一个自定义 Authenticator，它将`userId/Password`从 cookie中读取

    ```
    public class HTTPAuthenticator extends Authenticator {

      protected PasswordAuthentication getPasswordAuthentication() {
         String username = "user"; //<--read from cookie
         String password = "password"; //<--read from cookie
         return new PasswordAuthentication(username, password.toCharArray());
      }
    } 
    ```

2.  将您的自定义身份验证器设置`HTTPAuthenticator`为默认身份验证器。

    ```
    Authenticator.setDefault(new HTTPAuthenticator()); 
    ```

3.  完成后，读取文件并写入本地驱动器，如下所示：

    ```
    URL url = new URL("http://secureweb/secure.html");
    BufferedReader br= new BufferedReader(new InputStreamReader(url.openStream()));
    File file = new File("myLocalFile");
    BufferedWriter bw = new BufferedWriter (file);
    String lineStr;
    while ((str = br.readLine()) != null) {
         bw.write();
    }
    bw.close();
    br.close(); 
    ```

希望这可以帮助。

# asp.net - 如何让gridview显示模板化字段中的所有数据列？

> ID：12879593
> 
> 赞同：0
> 
> 时间：2012-10-14T05:35:30.700
> 
> 标签：asp.net

我在 Asp.net 中有一个项目，有人将数据插入 SQL Server 数据库，当他想调用最新插入的数据时（对于这个项目，我已经编写了一个存储过程，所以我将在 gridview 中使用它）他必须按一个按钮，一个网格视图来显示它们。

在gridview中我想添加我自己的模板（因为我有一些项目以及必须自己添加的Jquery Calendar）并将其绑定到服务器并选择存储过程来读取它。所以我必须从数据库读取数据的代码在这里：

```
protected void Button2_Click(object sender, EventArgs e)
{
        SqlDataReader dr = DataProvider.ExecuteDataReader("[dbo].[Get_LastIdHowzeEducationFinishDate_SP]", CommandType.StoredProcedure);
        GridView1.DataSource = dr;

        SqlDataReader dr2 = DataProvider.ExecuteDataReader("[dbo].[Get_LastIdHowzeEducationField_SP]", CommandType.StoredProcedure);
        GridView1.DataSource = dr2;
        GridView1.DataBind();
} 
```

但我不知道为什么只显示其中一个（第二个）同时我想在gridview中显示其他一些数据列。

这是我写的第一个存储过程：

```
ALTER PROCEDURE [dbo].[Get_LastInsertedRowHowzeEducation_SP]
AS
BEGIN 
    SELECT
        he.FieldName as 'رشته تحصیلی',
        he.SchoolName as 'نام موسسه آموزشی',
        he.StudyCityDescribtion as 'محل تحصیل',
        he.Average as 'معدل',
        he.ThesisTitle as 'عنوان پایان نامه',
        he.Describtion as 'توضیحات' 
    FROM
        PersonHowEducation prh 
    INNER JOIN
        HowzeEducation he ON prh.HowzeEducationId = he.HowzeEducationId
    WHERE
        prh.IdCode = (SELECT IdCode FROM Persons 
                      WHERE IdCode = IDENT_CURRENT('persons'))
END 
```

但是通过这段代码，我无法将 Jquery 日历添加到 gridview 中，所以我决定将它们分开，并为每一列编写一个过程，并通过 select 语句和 gridview 模板字段在 gridview 中调用它们。这是两个分开存储的程序：

```
ALTER PROCEDURE [dbo].[Get_LastIdHowzeEducationFinishDate_SP]

AS
BEGIN 
select he.FinishLevelDate as 'تاریخ اتمام سطح'
   from PersonHowEducation prh inner join HowzeEducation he on 
          prh.HowzeEducationId=he.HowzeEducationId
          where prh.IdCode=
          (Select IdCode from Persons where IdCode=IDENT_CURRENT('persons'))

END 
```

和另一个：

```
 ALTER PROCEDURE [dbo].[Get_LastInsertedRowHowzeEducation_SP]

AS
BEGIN 
select he.FieldName as 'رشته تحصیلی',he.SchoolName as 'نام موسسه آموزشی',
   he.StudyCityDescribtion as 'محل تحصیل',he.Average as 'معدل',
   he.ThesisTitle as 'عنوان پایان نامه',
   he.Describtion as 'توضیحات' 
   from PersonHowEducation prh inner join HowzeEducation he on 
          prh.HowzeEducationId=he.HowzeEducationId
          where prh.IdCode=
          (Select IdCode from Persons where IdCode=IDENT_CURRENT('persons'))

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:39:58.297

显示第二个是因为您在去的时候覆盖了第一个数据源`GridView1.DataSource = dr2;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:17:32.410

一般来说，GridView 应该用于一组数据。如果你想显示多组数据，你应该使用多个 GridViews，或者你*可以*使用 UNION 来连接数据或嵌套 GridViews，但这实际上只会使设置复杂化。

如果您发布有关您正在尝试做什么或您正在使用的存储过程的更多信息，我们可能会提供更多帮助。

# ios - 如何正确使用 AVAssetExportSession 为音频资产设置元数据？

> ID：12879596
> 
> 赞同：23
> 
> 时间：2012-10-14T05:36:19.087
> 
> 标签：ios, audio, metadata, avassetexportsession

我已经查看了我可以找到的用于设置元数据的每个示例`AVAssetExportSession`，但即使音频导出工作正常（生成的音频文件播放正常），仍然没有与文件一起导出的元数据。我正在使用 Xcode 4.5，目标构建 iOS 5，测试设备 iOS 6。请参阅下面我使用的代码，请让我知道我做错了什么。

标题

```
// for metadata export

NSArray *MyMetadata;
AVMutableMetadataItem *common1;
AVMutableMetadataItem *common2;
AVMutableMetadataItem *common3;
AVMutableMetadataItem *common4; 
```

执行

```
AVAsset *asset = [AVAsset assetWithURL:audioFileInput];
AVAssetExportSession *exportSession = [AVAssetExportSession exportSessionWithAsset:asset presetName:AVAssetExportPresetPassthrough];

if (!exportSession) {
    return;
}

CMTime startTime = CMTimeMake((int)(floor(fileStartMarker * 100)), 100);
CMTime stopTime = CMTimeMake((int)(ceil(fileEndMarker * 100)), 100);
CMTimeRange exportTimeRange = CMTimeRangeFromTimeToTime(startTime, stopTime);

exportSession.outputURL = audioFileOutput;
exportSession.outputFileType = @"com.apple.coreaudio-format";
exportSession.timeRange = exportTimeRange;

// define meta data for file
// Common metadata
common1 = [[AVMutableMetadataItem alloc] init];    // Title
common1.keySpace = AVMetadataKeySpaceCommon;
common1.key = AVMetadataCommonKeyTitle;
common1.value = @"Title Test Value";

common2 = [[AVMutableMetadataItem alloc] init];    // Description
common2.keySpace = AVMetadataKeySpaceCommon;
common2.key = AVMetadataCommonKeyDescription;
common2.value = @"Description Test Value";

common3 = [[AVMutableMetadataItem alloc] init];   // Creation Date
common3.keySpace = AVMetadataKeySpaceCommon;
common3.key = AVMetadataCommonKeyCreationDate;
common3.value = @"Creation Date Test Value";

common4 = [[AVMutableMetadataItem alloc] init];    // Software
common4.keySpace = AVMetadataKeySpaceCommon;
common4.key = AVMetadataCommonKeySoftware;
common4.value = @"My File Trimmer";

MyMetadata = [[NSArray alloc] initWithObjects:common1, common2, common3, common4, nil];
exportSession.metadata = MyMetadata;

[common1 release];
[common2 release];
[common3 release];
[common4 release];

[exportSession exportAsynchronouslyWithCompletionHandler:^{
    if (exportSession.status == AVAssetExportSessionStatusCompleted) {
        // export done
    }
    else if (exportSession.status == AVAssetExportSessionStatusFailed)     {
        // export failed
    }
}];

[MyMetadata release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-18T10:56:03.867

您是否尝试过设置标识符？

喜欢：

```
 let authorMeta = AVMutableMetadataItem()
    authorMeta.identifier = AVMetadataCommonIdentifierAuthor
    authorMeta.key = AVMetadataQuickTimeMetadataKeyAuthor
    authorMeta.keySpace = AVMetadataKeySpaceCommon
    authorMeta.value = "NFer" 
```

# ruby-on-rails - Tire Gem 返回“无法对每个文档具有多个值或每个字段多个标记的字符串类型进行排序”

> ID：12879598
> 
> 赞同：2
> 
> 时间：2012-10-14T05:36:46.493
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我已将关联字段映射为多字段。我已将“名称”属性设置为使用雪球分析仪进行分析，并将“精确”设置为未分析。我也可以搜索该字段并进行过滤。我无法在此字段上进行排序。尝试排序时，elastic 返回错误“无法对每个文档具有多个值或每个字段多个标记的字符串类型进行排序”。

我尝试创建一个名为“raw”的附加字段，类似于精确，但这也不起作用。下面是我的映射以及我如何尝试通过轮胎宝石执行排序：

```
 mapping do
    indexes :sectors, :type => 'object',
      :properties => { :name => { :type => 'multi_field',
                                  :fields => {
                                    :name =>  { :type => 'string', :analyzer => 'snowball' },
                                    :exact => { :type => 'string', :index => 'not_analyzed' , :include_in_all => false }
                                  }
                                  }
                       }
end

def to_indexed_json
    to_json( :include => {
               ...
               :sectors => { :only => ["name"] },
               ...
    })
end

def self.search(params)
  tire.search(:load => true, :page=>params[:page], :per_page => 12) do

    if params[:query].present?
      query { string params[:query], :default_operator => "OR" }
    else
      query { all }
    end

    filter :term, "sectors.name.exact" => params[:sector] if params[:sector].present?
    sort { by 'sectors.name.exact','asc' } if !params[:sort][:sector].blank?
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T10:59:02.523

您收到该错误的原因基本上有两个：

*   每个字段有多个值：分析您的字段，并且标记器从其内容中生成多个标记，您的`name.exact`字段不是这种情况，因为它`not_analyzed`在您的映射中
*   每个文档有多个值：向`name`字段添加多个值，例如在索引时提供一组值。

我会检查你的文件是什么样子的。为了快速完成此操作，您可以基于返回字段中包含的项目数的脚本创建[术语方面](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)`name.exact`，如下所示。如果您返回至少一个 term 大于 1 的 facet 条目，这意味着您至少向该字段添加了多个值，因此您无法对其进行排序。

```
{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "my_facet" : {
            "terms" : {
                "script_field" : "doc['name.exact'].values.length"
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:02:17.990

恕我直言，它应该工作。只是想知道您的映射是否已应用。你可以用 curl 命令检查它吗？

就像是：

$ curl -XGET 'http://localhost:9200/twitter/tweet/_mapping'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T17:42:54.133

我有同样的问题。我更新了我的弹性搜索，它解决了这个问题。

```
brew update
brew upgrade elasticsearch 
```

并按照说明：

升级后重新加载 elasticsearch：

```
launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.elasticsearch.plist
launchctl load ~/Library/LaunchAgents/homebrew.mxcl.elasticsearch.plist 
```

# javascript - XMLHTTPRequest - 测试连接而不是 .send(null) 失败

> ID：12879606
> 
> 赞同：2
> 
> 时间：2012-10-14T05:39:56.103
> 
> 标签：javascript, xmlhttprequest

```
 var xml = null;
    xml = new XMLHttpRequest();
    xml.open("get", who, false);
            xml.send(null);
    if ((xml.status >= 200 && xml.status <= 300) || xml.status == 304) {
    var hi = xml.responseText;
    } else {
    alert("No Internet Connection! You will have to enter information by hand");
    }; 
```

我想设置这个警报，如果没有互联网连接，它会这样说。但是，浏览器在 xml.send(null) 处停止/挂起，并带有 NS_ERROR_FAILURE:Failure。如何为连接正确设置测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T12:10:22.313

试试这个。

```
function check() {
    var z, xml = null;
    xml = new XMLHttpRequest();
    xml.open("get", who, false);
    try {
        xml.send(null);
    } catch(z) {
        alert("Network failure");
        return;
    }
    if ((xml.status >= 200 && xml.status <= 300) || xml.status == 304) {
        var hi = xml.responseText;
    } else {
        alert("No Internet Connection! You will have to enter information by hand");
    }
} 
```

# design-patterns - 命令设计模式 - Invoker 是可选的吗？

> ID：12879609
> 
> 赞同：10
> 
> 时间：2012-10-14T05:40:05.430
> 
> 标签：design-patterns, command-pattern

命令设计模式中的调用者类是可选的吗？客户端需要为命令实例化具体命令和接收器。客户端是否总是需要实例化 Invoker 并将命令对象传递给 Invoker 对象。稍后，每当客户端需要执行命令时，客户端只需询问 Invoker 对象，Invoker 就会执行命令（可能立即执行，也可能将命令排队等待稍后执行）。

或者这是相反的方式？如果客户端需要同步执行命令，客户端将使用基类接口引用命令，但会实例化具体的命令和接收器。每当客户端需要执行命令时，客户端只会调用基类命令变量的执行方法？当需要一些额外的逻辑来执行命令时，Invoker 类将用于保留该额外的逻辑，并且客户端将与 Invoker 对象交互以执行命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T07:10:16.273

命令模式的目的通常是 1) 使一组不同的操作共享相同的类型，以便它们可以由相同的代码处理 2) 将操作编组/创建与操作调用分开。目的 2 明确需要接收器。

如果您在创建后立即调用，或者如果 Reciever 扮演调用者的角色，则不存在单一用途、独立的调用者。这是否意味着没有调用者真的是一个哲学问题:)

这样看：你/可以/分开创建、调度和调用。这并不意味着您必须将它们实现为三个独立的类。它只是涉及命令模式生命周期的逻辑角色。

编辑：我猜单一责任原则认为你应该将它们分开，但有一种常识：)可以而且应该遵守当地条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T17:33:35.187

众所周知，java.lang.Runnable 是 Thread 类作为调用者工作的命令模式的示例之一。我们将 Runnable 类的对象传递给 Thread 类并说启动/运行。

但是我们从不创建可以调用主线程的客户端类。

所以调用者不是可选的，但它与客户端没有紧密耦合。因此，命令模式的 UML 从不显示客户端类和调用者类之间的任何关系。

与此问题相关的另一个[答案](https://stackoverflow.com/a/2088681/453767)。

# ios - 如何在 iOS 设备上优化粒子发射器渲染 FPS（在 openGL 中）？

> ID：12879611
> 
> 赞同：2
> 
> 时间：2012-10-14T05:41:10.127
> 
> 标签：ios, opengl-es, particles

我试过这些：

1.  使粒子图像更小，现在使用 8x8 的。我只是不知道如何让它变得更小，因为我需要一个渐变的圆圈。4x4 太小了

2.  降低粒子数，现在是 40，但如果再低就太低了。

我还有其他方法可以使它变得更好吗？

我看到很多很酷的游戏（比如 Bejewled Blitz）都有很好的效果，而且它们似乎使用了非常平滑的图像/许多粒子。有没有其他方法可以让 FPS 变得更好？

感谢所有善良的投票和回答！以下是一些更新：

1.  我已经在使用带有**OpenGL****的 cocos2d-x**
***   我目前使用一个叫做**粒子设计器的商业软件***   我正在 iTouch 4 上进行测试，而所有其他游戏都在运行，没有任何问题。我尝试切换到其他设备，但问题仍然存在。*   现在的FPS是25-30，有粒子效果，我肯定能感觉到（有点卡顿）。当屏幕上的粒子效果更多时，它会更糟（FPS可能只有10）*   我尝试了很多方法，发现粒子元素的形状是一个非常关键的瓶颈，但很难让它变小。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:32:22.670

您可以做的第一件事就是开始使用一些支持优化粒子系统的游戏引擎。我对 iOS 可用的功能没有一个很好的概述，但必须有一些免费和开源的引擎。例如[Cocos2D](http://www.cocos2d-iphone.org/)有粒子。

但是如果选择自己做，那么通常减少绘制调用和状态更改的数量会使渲染更快。如果您有不同的纹理，您可以将它们合并到[纹理 altas](http://blog.wolfire.com/2010/03/Using-texture-atlases)中。这将允许您将所有粒子合并到一个顶点缓冲区并一次渲染所有粒子。

您的数量（40 个粒子）似乎非常非常低。你确定粒子是瓶颈吗？通常优化渲染性能是一个非常困难且耗时的过程。一个人需要做很多实验，使用不同的工具，尝试各种方法，然后才能弄清楚瓶颈是什么以及如何让它更快。问题可能是一般性质的并且非常特定于硬件。在一台设备上运行得更快的东西在另一台设备上运行得更慢。

除非您出于教育原因这样做，否则我强烈建议您重用现有的解决方案并投入数年的工作以使其更快。

**更新：**看着你的编辑，我不得不说，我很难提供任何建议。也许精灵太大了，你最大化了填充率。或者它们上的着色器过于复杂，即使绘制其中的几个也需要很长时间。**

# php - PHP Crawler - 为什么readdir while循环在到达空文件夹时退出？

> ID：12879613
> 
> 赞同：1
> 
> 时间：2012-10-14T05:41:24.980
> 
> 标签：php, recursion, while-loop, web-crawler, readdir

我有以下函数作为一个更大的程序的一部分，它爬取提供的路径的内容，并索引它在父文件夹或任何子文件夹中找到的任何 .htm 或 .html 页面。我的爬虫函数（如下）是递归的，似乎工作得很好，直到它到达一个不包含任何项目的子文件夹。

这似乎是一个常见问题，通常通过如下构造 while 循环来解决：

```
while ( false !== ($file = readdir($folder)) ) 
```

但这不起作用。得到输出的最后一行是'当前爬虫路径是......'，然后输出就停止了。我猜问题出在空文件夹和 readdir 函数上，但我不知道如何解决。有人可以提供建议吗？

谢谢

```
function crawlFolders($path)
{
    $prevPath = $path;  // variable to keep track of the previous file path
    chdir($path);
    $folder = opendir($path);

    echo "The current crawler path is ".$path."<br>";

    while ( false !== ($file = readdir($folder)) ) // read current directory item, then advance pointer
    {   
        if ( is_file($file) )
        {   echo "File found!  The crawler is inspecting to see if it can be indexed<br>";
            if ( canIndex($path."/".$file) )
                indexPage($path."/".$file);
        }

        else if ( is_dir($file) ) 
        {
            //it's a folder, we must crawl
            if ( ($file != ".") && ($file != "..") )    //it's a folder, we must crawl
            {
                echo "$file is a folder<br><br>";
                crawlFolders($path."/".$file);
                chdir($prevPath); // change the working dir back to that of the calling fn

            }
        }   
    }
    closedir($folder);

} 
```

在看了这个之后，我看不出为什么 readdir 会导致问题。我认为问题可能是我的 crawlFolders 函数本身并没有展开，而是在它到达最深的空文件夹时才结束。我是否遗漏了递归应该工作的方式？我的印象是，一旦 while 循环返回 false，递归函数调用就会退出，从而将我放到前面进行递归调用的 crawlFolders 函数（即展开自身）。

每次 crawlFolders 退出时我是否需要返回一个值，以便调用函数知道在哪里恢复自己？

看来递归确实是问题所在。我在空文件夹中放置了一个文件，我的索引器工作了，但这些功能仍然没有按我的意愿展开。我知道这不会发生，因为起始路径中仍有两个文件未评估。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:31:31.703

问题不在于递归，而很可能是当前工作目录。

您使用 更改当前目录`chdir()`，然后`$file`将相对文件名指定给`is_file()`和`is_dir()`。执行从递归返回后，当前目录仍然是子目录，因此`is_file($file)`不会`is_dir($file)`找到文件。

您必须在进入递归之前保存当前目录，或者 - 更好 -`chdir()`完全避免并使用完整路径：`is_file($path . '/' . $file)`

# python - tibuild.py 中的 TideSDK 无效语法错误

> ID：12879614
> 
> 赞同：1
> 
> 时间：2012-10-14T05:41:29.597
> 
> 标签：python, tidesdk

我正在尝试按照[此处](https://stackoverflow.com/questions/12348035/tidesdk-bundle-packaging)的说明将我的应用程序与 TideSDK 捆绑在一起。我的命令是：

```
python tibuild.py --dest=hi --type=bundle --package=hi2 c:\users\name\desktop\test 
```

它给了我这个错误：

```
File "tibuild.py", line 39
  print "signal caught: %d" % signum
                          ^
SyntaxError: invalid syntax 
```

tibuild.py 中的第 39 行是这样说的：

```
print "signal caught: %d" % signum 
```

我在 Windows 7 64 位上使用 Python 3.2.3 和 TideSDK 1.2.0 RC4。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T06:25:44.030

您的系统上应该有 python 2.7，并建议您暂时留在那里。Scons 是我们用于 TideSDK 的构建系统。它最终可能会移植到 python 3.x。因为它是许多大型项目使用的非常流行的跨平台构建系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T05:42:40.947

在 python 3 中，`print`是一个函数。采用`print("signal caught: %d" % signum)`

# c - 在C中复制带有空格的字符串

> ID：12879619
> 
> 赞同：1
> 
> 时间：2012-10-14T05:42:14.207
> 
> 标签：c

假设我有一个`struct`叫`test`：

```
struct  test
{
    char name[16];

} test; 
```

我想阅读用户的输入并将其放在`name`字段中。假设用户已输入`"hello"`作为输入。我的代码是这样的：

```
struct test test1;

strcpy(test1.name, user_input); 
```

现在名称中有 5 个字符 ( `"hello"`)，但我希望它有 16 个字符：5 个用于实际输入，其余的空格。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T06:23:08.977

sprintf() 可以做到：

```
sprintf(test1.name,"%-15s","John Doe");
printf("[%s] length of test1.name: %ld\n",test1.name,strlen(test1.name));
sprintf(test1.name,"%-*s",(int) sizeof(test1.name) - 1,"Jane Jones");
printf("[%s] length of test1.name: %ld\n",test1.name,strlen(test1.name)) 
```

输出：

```
[John Doe       ] length of test1.name: 15
[Jane Jones     ] length of test1.name: 15 
```

或者

```
#include <stdio.h>
#include <string.h>

int copy_with_pad(char *destination,const char *source, int dest_size, char pad_char)
{
   int pad_ctr = 0;
   if (dest_size < 1 ) return -1;
   int source_length = strlen(source);
   int data_size = dest_size - 1;
   destination[data_size] = '\0';
   int i = 0;
   while (i < data_size)
   {
      if ( i >= source_length )
      {
         destination[i] = pad_char;
         pad_ctr++;
      }
      else
         destination[i] = source[i];
      i++;
   }
   return pad_ctr;
}

int main(void)
{
   struct test {
      char name[16];
   };
   struct test test1;
   int chars_padded = copy_with_pad(test1.name,"Hollywood Dan",
                                    sizeof(test1.name),' ');
   printf("%d padding chars added: [%s]\n",chars_padded,test1.name);
   chars_padded = copy_with_pad(test1.name,"The Honorable Hollywood Dan Jr.",
                                 sizeof(test1.name),' ');
   printf("%d padding chars added: [%s]\n",chars_padded,test1.name);
   chars_padded = copy_with_pad(test1.name,"",16,' ');
   printf("%d padding chars added: [%s]\n",chars_padded,test1.name);
} 
```

输出

```
2 padding chars added: [Hollywood Dan  ]
0 padding chars added: [The Honorable H]
15 padding chars added: [               ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T05:52:08.063

我想显而易见的是这样的：

```
memset(test1.name, ' ', 16);

size_t len = min(16, strlen(user_input));

memcpy(test1.name, user_input, len); 
```

如果你想零填充任何多余的空间，那就更简单了：

```
strncpy(test1.name, user_input, 16); 
```

[我第一次看到/听到有人问一个实际上`strncpy` *可能*是正确答案的问题。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:32:14.153

```
// first remember
// that  a character array of length 16 can only hold a string of 15
// chars because it needs the trailing zero
// this program puts in the user input (you should check that it is short enough to fit)
// then puts in the spaces, one at a time, then the terminating zero

#include <stdio.h>
#include <stdlib.h>

int main()
{
    char name [16];         // room for 15 chars plus a null terminator
    char word [] = "hello"; // user input

    strcpy(name,word);      // copy user input to name
    int i;
    for (i = strlen(name); i < (sizeof(name)-1); i++) {
        name[i] = ' ';      // pad with blanks
    }
    name[sizeof(name)-1] = 0; // string terminator

    printf("name = \"%s\"\n",name);
    return 0;
} 
```

# sql - 使用 UNION ALL 组合两个表

> ID：12879621
> 
> 赞同：2
> 
> 时间：2012-10-14T05:43:13.763
> 
> 标签：sql

我有两个具有相同字段的表。我希望将这些组合成一张大桌子。每个表的主键是一个唯一的响应者 ID。

当我将这两个表与 UNION ALL 组合在一起时，一些数据被放入错误的字段中！为什么是这样？它们位于原始表中的正确字段中。UNION ALL 是正确的运算符吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T05:54:23.913

关于联合要记住的是，结果数据集的列名将由联合声明中的第一个表定义。

此外，它们在表结构声明中的顺序将对此产生影响。

如果表 A 定义为名称、地址、电子邮件，而表 B 定义为名称、电子邮件、地址

```
select * from tableA
union all
select * from tableB 
```

将 tableB.Email 放在别名为“地址”的列中以更正此问题，您必须在 select 语句中定义列：

```
select Name, Email, Address from tableA
union all
select Name, Email Address from tableB 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T05:54:29.387

UNION ALL 应该是正确的操作，但是您是否在两个部分中都按名称明确列出了字段，或者您是否使用星号作为通配符？

# javascript - 画布上的 MouseMove 问题

> ID：12879622
> 
> 赞同：5
> 
> 时间：2012-10-14T05:43:27.077
> 
> 标签：javascript, html, canvas, mousemove

我正在尝试使用“mousemove”在画布上跟随我的鼠标移动。

```
function start(){
    var canvastmp = document.getElementById("myCanvas")
    var canvas = canvastmp.getContext("2d");
    window.addEventListener('mousemove', trevor, false);
}
function trevor(pos){
    canvas.clearRect(0,0,600,400);
    var x = pos.clientX;
    var y = pos.clientY;
    canvas.fillRect(x-25,y-25,100,100);
}
window.addEventListener('load',start,false); 
```

当我运行它时，什么都没有出现。我一直在调整它并搜索它一段时间，我似乎无法弄清楚出了什么问题。再一次，我很抱歉这个完全没有问题的问题！任何帮助都非常感谢。

另外，我正在使用 Chrome，如果有帮助的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:14:09.163

The problem is that `canvas` is out of scope. To get it back in scope, either embed the trevor function inside the `start` function, or pass the canvas context as a variable to a closure:

```
function start(){
    var canvastmp = document.getElementById("myCanvas")
    var ctx = canvastmp.getContext("2d");
    window.addEventListener('mousemove', function(pos){trevor(ctx,pos)}, false);
}
function trevor(ctx, pos){
    ctx.clearRect(0,0,600,400);
    var x = pos.clientX;
    var y = pos.clientY;
    ctx.fillRect(x-25,y-25,100,100);
}
window.addEventListener('load',start,false); 
```

Or alternatively, use a more object-like approach:

```
function trevor(ctx) {
    function moveHandler(pos) {
        ctx.clearRect(0,0,600,400);
        ctx.fillRect(pos.clientX - 25, pos.clientY - 25, 100, 100);
    }
}
var myTrevor = trevor((document.getElementById('myCanvas')).getContext('2d'));
window.addEventListener('load', myTrevor.moveHandler, false); 
```

The nice thing about this is that the contexts are always relevant; trevor only knows the context it's given, and the code that sets up the event handler also retrieves the context.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:09:16.930

您的`canvas`变量是在函数中定义的`start`，但是当您在函数中引用它时，`trevor`它超出了范围。

从这两个函数中定义它，因此它在两者的范围内并且这有效。

见 - [http://jsfiddle.net/sync/mE4B4/](http://jsfiddle.net/sync/mE4B4/)

```
var canvas;

function start() {
    var canvastmp = document.getElementById("myCanvas");
    canvas = canvastmp.getContext("2d");
    window.addEventListener('mousemove', trevor, false);
}

function trevor(pos) {
    canvas.clearRect(0, 0, 600, 400);
    var x = pos.clientX;
    var y = pos.clientY;
    canvas.fillRect(x - 25, y - 25, 100, 100);
}

window.addEventListener('load', start, false);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:10:25.420

You mention you're using Chrome - if so, please take a look at the built-in inspector (Tools > Developer Tools). The Console tab displays errors. If you take a look there, you'll see something like `Canvas not defined`, which is a useful hint.

The 'canvas' var was out of scope. The following will work:

```
function mousemove(pos) {
  var c = document.getElementById("myCanvas");
  var ctx = c.getContext("2d");
  ctx.clearRect(0,0,600,400);

  var x = pos.clientX;
  var y = pos.clientY;

  ctx.fillStyle="#FF0000";
  ctx.fillRect(x-25,y-25,50,50);
}

window.addEventListener('mousemove', mousemove, false); 
```

**[LIVE DEMO HERE](http://livecoding.io/3887542)**

# c - 字母数字 NOP 实现

> ID：12879624
> 
> 赞同：1
> 
> 时间：2012-10-14T05:43:51.990
> 
> 标签：c, assembly, x86

寻找字母数字形式的 NOP 替代方案，以便通过 IDS 测试缓冲区溢出。IDS 将对非字母数字值进行编码`0x90`以`%90`满足 HTTP RFC 标准，因此有理由改为尝试字母数字迭代。已创建一个字母数字有效负载，但漏洞利用代码使用`memset`并`0x90`填充缓冲区。[在这里](http://downloads.securityfocus.com/vulnerabilities/exploits/ghttp.c)利用代码。

[此处](http://www.asmpedia.org/index.php?title=NOP)的页面提供了一些多字节选项，但我不确定如何将 NOP 字节（第 147 行附近）替换为类似`x0f\x1f\x00`或其他任何可能为上述代码中的有效负载提供 sled 的内容。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T06:29:56.223

这是一个[很棒的网站](https://nets.ec/Ascii_shellcode#Instructions)，列出了各种 ASCII 汇编指令（包括 ASCII nops），如果你好奇的话。使用这些指令，您可以构建仅包含 ASCII 字符的整个程序。在黑帽工作的背景下，这些说明对于绕过入侵检测系统和文本过滤器非常方便。

例如，该序列`ABCDEFGIJKLMNO`是一个 x86 无操作，尽管基本上看起来像一个字母序列。此外，如果您不关心丢弃某些寄存器，您可以创建 ASCII 指令序列，这些指令只会增加或减少这些寄存器。

如果您尝试使用这些多字节 nop 构建 nop-sled，请注意（AFAIK）如果不使用`nop`可以在任何字节偏移处输入并仍然执行精确的 no-op，则无法制作真正的 nop-sled . `AI`但是，使用像( )这样的一对指令`inc ecx; dec ecx`比使用多字节 NOP 序列更安全，因为如果在错误的偏移量处输入该序列只会破坏寄存器（而多字节 NOP 可能会导致非法指令异常或执行意外操作）。

无论如何，一般来说，您可以通过以下方式在 C 中的缓冲区中复制任何多字节序列（前提`sizeof(buffer)`是操作长度的倍数）：

```
/* I find string notation to be more convenient, but it means using `sizeof(op)-1` to get the op length */
static char op[] = "\xaa\xbb\xcc";

char buffer[3072];
int i;

for(i=0; i<sizeof(buffer); i++)
    buffer[i] = op[i%(sizeof(op)-1)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T05:50:22.637

如果你的意思是你想要一个多字节的 NOP 序列（并假设它`0f 1f 00` *是*这样一个序列），你需要在一个循环中执行它，例如：

```
char cycle[] = { '\x0f', '\x1f', '\x00' };
for (int i = 0; i < sizeof(buffer); i++)
    buffer[i] = cycle[i%3]; 
```

这可能不会像您期望的那样做，因为`buffer`大小不完全是三个字节的倍数，但在这种情况下您可以在最后使用 1 字节 NOP：

```
int i = -1;
char cycle[] = { '\x0f', '\x1f', '\x00' };
while (++i < sizeof(buffer) - (sizeof(buffer) % 3))
    buffer[i] = cycle[i%3];
while (i < sizeof(buffer))
    buffer[i++] = '\x90'; 
```

您不能使用 a 来执行此操作，`memset`因为该函数通过将每个字节设置为特定值来工作，它不允许您将交替字节设置为不同的值。

# iphone - 架构 i386 InMobi 的未定义符号

> ID：12879629
> 
> 赞同：0
> 
> 时间：2012-10-14T05:46:03.620
> 
> 标签：iphone, ios, objective-c, admob, inmobi

我正在尝试在一个 iOS 应用上实施 Admob 中介。在构建项目时与 InMobi 集成时出现此错误

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_IMCommonUtil", referenced from:
      objc-class-ref in libAdapterInMobi.a(GADInMobiExtras.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:14:15.253

您是否没有在项目中包含 InMobi Commons 库 ( **libInMobiCommons** )？

InMobi iOS AdNetwork 捆绑包：（http://developer.inmobi.com/wiki/index.php?title=InMobi_SDK_3.6.0_for_iOS#Getting_Started）

```
IMAdDelegate.h
IMAdError.h
IMAdInterstitial.h
IMAdInterstitialDelegate.h
IMAdRequest.h
IMAdView.h
IMCommonUtil.h
libInMobiAdNetwork-3.6.0.a
libInMobiCommons-3.6.0.a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:16:19.483

在库上执行 lipo -detailed_info 会告诉它为以下拱门构建 - armv7、armv7(s) 和 i386。架构 i386 cputype CPU_TYPE_I386 cpusubtype CPU_SUBTYPE_I386_ALL 偏移 68 大小 275880 对齐 2^2 (4) 架构 armv7 cputype (12) cpusubtype cpusubtype (9) 偏移 275948 大小 295872 对齐 2^2 (4) 架构 (cputype (12) cpusubtype (11)) cputype (12) cpusubtype cpusubtype (11) offset 571820 size 295792 align 2^2 (4) 所以可能只是在你的项目中链接库，你的错误就会被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T05:59:17.977

据推测，静态库不是“足够”的多架构：它可能只为 iOS 构建（在这种情况下，只有 ARMv7 或 ARMv6 和 ARMv7 架构存在于内部），或者用于 64 位 iPhone 模拟器（在这种情况下i386 未内置到库中，仅适用于 x86_64 处理器类型的代码）。你真的无能为力。在真实设备上测试应用程序（无论如何，几乎总是在设备上测试您的应用程序）。

# uitableview - setFrame 不适用于 UITableView Cell 的 UITextLabel

> ID：12879634
> 
> 赞同：0
> 
> 时间：2012-10-14T05:47:32.843
> 
> 标签：uitableview

我无法设置 UITableViewCell 的 UITextLabel 的框架。我创建了一个 CGRect 并将其设置为框架，但这似乎不起作用。下面代码中设置的 UITextLabel 的所有其他属性（颜色字体和文本）都根据需要呈现。

```
 UITableViewCell *c = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

        if(!c)
        {
            c = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
        }

NSString *soundName = [[soundNames objectAtIndex:[indexPath row]] valueForKey:@"Name"];
        UIColor *whiteColor = [UIColor whiteColor];
        [[c textLabel] setTextColor:whiteColor];
        [[c textLabel] setText:soundName];
        [[c textLabel] setFont:[UIFont fontWithName:@"Gill Sans" size:17]];

        CGRect textLabelFrame = CGRectMake(50, 7, 270, 29);
        [[c textLabel] setFrame:textLabelFrame];

        return c; 
```

关于这里可能发生什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:48:56.797

每次显示单元格时，`textLabel`都会更改方法的框架。`layoutSubviews`您可以覆盖`layoutSubviews`方法并在那里设置自定义框架，或者只是将您自己的`UILabel`带有预定义框架的框架添加到单元格中。

# html - 鼠标悬停背景图片

> ID：12879635
> 
> 赞同：2
> 
> 时间：2012-10-14T05:47:51.287
> 
> 标签：html, css, css-selectors

我想知道是否有任何东西会使我的导航菜单在悬停时消失并在鼠标所在的菜单后面显示背景图像。

我有一个简单的导航菜单，如下所示：

```
 <ul id="nav" class="group">
    <li><a href="#" id="nav-portfolio">portfolio</a></li>
    <li><a href="#" id="nav-blog">blog</a></li>
    <li><a href="#" id="nav-me">me</a></li>
    <li><a href="#" id="nav-contact">contact</a></li>
    </ul> 
```

它的CSS是：

```
#nav {
    float: right;
    margin: 0.9em 1.5em 1em 0.9em;
    padding-right: 2em;

}

#nav li {

    float: left;
    padding: 0 0 0 .9em;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:50:09.697

是的，你可以用`:hover`这个：

```
#nav li:hover {
    background: url("image.png") center center no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:18:33.673

如果图像已经在菜单后面，您只需使菜单或活动选项消失。

在您的代码中没有图像，但无论如何，像这样的代码应该可以解决问题。

```
#nav li:hover a { color:transparent; }
#nav li:hover { background: url("image.jpg"); } 
```

再见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:47:21.383

例如，您使用没有单个婴儿床的 url 并使用绝对地址

```
#nav li:hover { background: url(/yourRootAddress/YourFileOrFolderImage/image.jpg); } 
```

# php - 如何从数据库中将 URL 分配给 php 中的页面

> ID：12879642
> 
> 赞同：0
> 
> 时间：2012-10-14T05:50:04.777
> 
> 标签：php

我正在尝试创建类似于博客脚本的东西。

我有一个在 Stackoverflow.com 上找不到的问题

假设我在我的 MySQL 数据库中添加了帖子。而且我也可以取到它们。但是，我如何为他们分配自己唯一的页面 URL，然后获取该特定帖子并将其显示在该页面上。

我希望 URL 类似于 wordpress 和其他脚本中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:24:34.997

假设在您的数据库中有一个名为“posts”的表，其中有一个“id”列和一个“title”列等......然后你可以这样进行：

```
<?php
$q = mysql_query('select id, title from posts') # select posts

while ($row = mysql_fetch_assoc($q)) {
    //dumps article links
    echo sprintf("<a href='mysite.com/article.php?id=%s'>%s</a>", $row['id'], $row['title']);
}
?>
//so, at in article.php

<?php

$article_id = $_GET['id']; //Warning: filter user data

$article = mysql_query("select * from posts where id=$article_id") # select post by id collumn

while ($row = mysql_fetch_assoc($q)) {
    //dump article content...    
} 
```

# java - Java 时间复杂度 O(n^2/3)

> ID：12879644
> 
> 赞同：6
> 
> 时间：2012-10-14T05:50:10.017
> 
> 标签：java, algorithm, big-o, time-complexity

我的数学背景不太好，这是我尝试编写运行时与不同输入比例的 JAVA 代码。

1.  用 n^2/3。由于 n^2/3 = 立方根 n * 立方根 n，因此我可以写

    ```
    public void test(int n){
        for (int i = 0; i*i*i < n; i++) {
            for (int j = 0; j*j*j < n; j++) {
                count ++;
            }
        }
    } 
    ```

2.  用 4^n。我可以使用斐波那契方法吗？

    ```
    public int fibonnaci(int n) {
        if (n <= 1) {
            return 1;
        } else {
            return fibonnaci(n - 2) + fibonnaci(n - 1);
        }
    } 
    ```

请问我上面的代码是否正确？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T06:10:12.577

**第一个是正确的**，而且考虑得很周到。

* * *

**第二个不是**。计算 fibs 的算法具有比 O(n^4) 高得多的时间复杂度（**编辑**：*这是我写这个答案时被问到的——同时问题已经更新*）。它甚至不是多项式。推理如下（符号#fib(x)：调用fib计算fib(x)的次数）：

*   fib(1): #fib(1) = 1 （直接返回结果）
*   fib(2): #fib(2) = 3（一个用于 fib(2)，它调用它用于 fib(0) 和 fib(1)）
*   fib(3): #fib(3) = 5（一个用于 fib(3)，它为 fib(2) 和 fib(1) 调用它，再给 3 + 1 个调用）
*   fib(4): #fib(4) = 9
*   fib(5): #fib(5) = 15
*   fib(6): #fib(6) = 25
*   ...
*   fib(i): #fib(i) = 1 + #fib(i-1) + #fib(i-2)

所以你有了：

*   #fib(i) ~= #fib(i-1) + #fib(i-2)

由此，可以合理地猜测计算 fib(i) 需要“大约”（实际上，略少于）2 倍于计算 fib(i-1) 的时间。因此，您可以“猜测” O(#fib(i)) = O(2^i)。这是正确的答案，您可以通过归纳轻松证明。

只是为了完成斐波那契数列，有更快的算法来计算第 n 个数。例如，具有线性时间（即 O(n)）的算法是要记住您编写的那个函数（即，让它参考​​ Map 以检查它是否知道 n 的结果，所以立即返回它，否则，计算它，存储它并返回它）。还有一个**[封闭的公式来计算第 n 个 fib](http://en.wikipedia.org/wiki/Fibonacci_number#Closed-form_expression)**，因此是一个恒定时间算法（即 O(1)）。

* * *

最后，**O(n^4)**算法的一个例子是任何有 4 个内部循环的东西，每个循环运行“大约”n 次。

例如，计算 n 边的 n 个立方体的体积（以非最优方式）：

```
int volume = 0;
for (int cube = 0; cube < n; cube++)
  for (int x = 0; x < n; x++)
    for (int y = 0; y < n; y++)
      for (int z = 0; z < n; z++)
        volume++;
return volume; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:01:47.540

您是否只是在编写任何需要时间复杂度的大 O 界限的代码？

比#1，是的，它需要`O(n^(2/3))`.

但是对于＃2，您的代码将采用`O(2^n)`, 和`theta(1.6...^n)`, 和 1.6.. 是著名的黄金比例数。

参考：[斐波那契数列的计算复杂度](https://stackoverflow.com/questions/360748/computational-complexity-of-fibonacci-sequence)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T06:31:51.310

这不是一个真正的答案，但这里是一个“作弊”解决方案的草图，用于提供一个需要`O(F(N))`时间的程序示例；

1.  创建一个 Java 函数对象来评估`F(N)`给定的`N`:

2.  将其作为参数传递给以下方法：

* * *

```
 public void computeOrderFN(int n, FunctionInt2Int fn) {
      int count = fn.evaluate(n);
      for (int i = 1; i < count; i++) {
          // Do something O(1) that the compiler can't optimize away)
      }
   } 
```

* * *

但是，如果有可能因为“聪明**”而失去信誉，请不要使用它:-)

# android - 将微调器值字符串传递给第二个活动

> ID：12879646
> 
> 赞同：0
> 
> 时间：2012-10-14T05:50:40.127
> 
> 标签：android, spinner

我试图在一个活动中将选择从微调器转换为字符串，然后在按下回车按钮时将此字符串传递给另一个活动并将其转换为整数。问题是，在我从微调器中选择后，模拟器在我按 Enter 后不断崩溃。

带有微调器选择和输入按钮的活动 1::

```
 btnSetAlarm.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            final Dialog d2 = new Dialog(MainActivity.this);
            d2.setContentView(R.layout.inputalarmnum);                                              
            Button btnEnterNum = (Button) d2.findViewById(R.id.btnEnterNum);                
            final Spinner numberAlarmChoice = (Spinner) d2.findViewById(R.id.spinnerAlarmNum);

            btnEnterNum.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    String selection = numberAlarmChoice.getSelectedItem().toString();                      
                    Intent alarmSet = new Intent(getApplicationContext(), AlarmActivity.class);
                    alarmSet.putExtra(selection,"sel");
                    startActivity(alarmSet);
                }
            });
            d2.show();
        }
    }); 
```

然后在另一个活动中检索字符串（这是来自 oncreate 方法）：

```
Intent getSel = getIntent();
String selection = getSel.getExtras().getString("sel");
final Integer alarmNumInt = Integer.valueOf(selection); 
```

关于为什么应用程序不断崩溃的任何建议，是否存在逻辑错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:56:54.173

你发送额外的错误。它是`(key, value)`，你正在做`(value, key)`：

```
alarmSet.putExtra(selection,"sel"); //wrong 
```

尝试

```
alarmSet.putExtra("sel", selection); //correct 
```

此外，您不需要转换为字符串，您可以拥有一个额外的整数值。

# java - 如何从 Hibernate 用户类型中检测数据库？

> ID：12879649
> 
> 赞同：3
> 
> 时间：2012-10-14T05:51:02.407
> 
> 标签：java, oracle, hibernate, hsqldb

有没有办法从用户类型确定性地确定正在使用的数据库？我的用户类型需要根据数据库（无论是 HSQL 还是 Oracle）将不同的对象传递给preparedStatement.setObject。我打算使用preparedStatement中的DataBaseMetaData作为

```
preparedStatement.getConnection().getMetaData().getDatabaseProductName() 
```

但我不确定是否有一组明确定义的字符串，我可以将其与上述字符串进行比较以确定数据库。

我要解决的更大问题是，我们在 Oracle 中使用 DATE 列，而 hibernate 将 JodaDateTime 映射到 TIMESTAMP（这是唯一可以保存日期和时间的类型）。因此，Oracle 在执行日期比较之前将数据库中的 DATE 值提升为时间戳。这会导致性能不佳，因为会跳过数据库索引。排除了将列类型从 DATE 更改为 TIMESTAMP 的选项，因为它需要更多空间，而且我们的应用程序不需要超过秒的精度。因此，我计划编写一个将 DateTime 转换为 oracle.sql.DATE 的 userType 并在preparedStatement 中设置参数，以便没有索引不匹配。（如下所示的片段）：

```
 public void nullSafeSet(PreparedStatement preparedStatement, Object value, int index) throws HibernateException, SQLException {
    if (value == null) {
        Hibernate.TIMESTAMP.nullSafeSet(preparedStatement, null, index);
    } else {
        preparedStatement.setObject(index, new oracle.sql.DATE(new Timestamp(((DateTime) value).getMillis())), Types.DATE);
    }
} 
```

上述方法的问题在于，如果我使用不同的数据库进行单元测试（HSQLDB），它将无法工作，因为 HSQLDialect 不理解“oracle.sql.DATE”。这是我需要从 userType 了解 DB 并在preparedStatement 中设置不同对象的地方。

所以，我想知道

*   如果有更好的方法来解决 DATE-TIMESTAMP 不匹配问题
*   如果不是，如何从用户类型中正确识别数据库。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T07:46:57.063

使用[**Dialect.getDialect()**](http://docs.jboss.org/hibernate/orm/3.5/api/index.html?org/hibernate/dialect/package-summary.html)检索您当前的方言。检查实例类型以了解数据库。例如：

```
 Dialect dialect= Dialect.getDialect();
       //<-- compare against the expected dailect classes
       if(dialect instanceof OracleDialect){  
           //your database is oracle
       }else if(dialect instanceof HSQLDialect){
        //<-- compare against the expected dailect classes
           //your database is HSQL
       } 
```

我不太确定您的目标，但以上内容应该对您有所帮助。

# c# - 这个 WeakEventHandler 中的错误是什么？

> ID：12879650
> 
> 赞同：1
> 
> 时间：2012-10-14T05:51:19.893
> 
> 标签：c#, clr

[如果在这篇博](http://www.interact-sw.co.uk/iangblog/2004/06/06/weakeventhandler)文中找到 WeakEventHandler

但他说：

更新：是的，我知道这是坏的。有一个错误意味着它不起作用...

并没有说什么是错误:(

```
public class WeakEventHandler<DT, T> where T : EventArgs
{
    private WeakReference weakRefToOriginalDelegate;
    public WeakEventHandler(EventHandler<T> originalDelegate)
    {
        weakRefToOriginalDelegate = new WeakReference(originalDelegate);
    }

    private void DoInvoke(object sender, T args)
    {
        EventHandler<T> originalDelegate = (EventHandler<T>) weakRefToOriginalDelegate.Target;
        if (originalDelegate != null) originalDelegate(sender, args);
    }

    public static implicit operator DT(WeakEventHandler<DT, T> wd)
    {
        object o = Delegate.CreateDelegate(typeof (DT), wd, "DoInvoke");
        return (DT) o;
    }
} 
```

有人可以解释这个 WeakEventHandler 实现中的错误是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:08:10.073

Jeffrey Richter，“通过 C# 进行 CLR”的作者实际上涵盖`WeakEventHandler`并`WeakDelegate`通过 C# 在 CLR 中实现。

在这里为您重复没有意义，但是您可以在此处查看他的修改代码：[https ://www.wintellect.com/weak-event-handlers/](https://www.wintellect.com/weak-event-handlers/)

书中显示的代码并没有像他预期的那样工作，所以上面的链接指向他的更正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-13T10:45:07.320

在第一次调用delegate之前做垃圾回收，你会发现代码并没有按预期工作，因为delegate对象被垃圾回收器提前回收了

```
 ..Code snippet.............
    EventHandler h = new WeakEventHandler<EventHandler, EventArgs>(p.Handler);
    GC.Collect();
    h(null, EventArgs.Empty);
    p = null;
    ............... 
```

另外你可以通过C# 3，第21节，第12节参考CLR中的例子，但是我的测试发现它仍然不能正常工作。我尝试如下修改代码，发现它按预期工作

```
 ..Code snippet.............
    public DotNotLiveJustForEvent()
    {
        ClickedHandler = new RoutedEventHandler(Clicked);
    }

    //Add a member variable that references the Clicked method
    public RoutedEventHandler ClickedHandler = null;
    public void Clicked(object sender, RoutedEventArgs e)
    {
        System.Windows.MessageBox.Show(DateTime.Now.ToShortDateString());
    }
    ...............
    ..Code snippet.............
        //The input parameter is changed to the variable
        btnTest.Click+= new WeakEventHandler(new DotNotLiveJustForEvent().ClickedHandler) {
            RemoveDelegateCode = eh =>
            {
               // btnTest.Click -= eh;
            }
        };
   ............... 
```

注意：我不确定这是否正确，因为我不知道内部是如何工作的，仅供参考

# asp.net - 如何禁用这个包含在脚本标签中指定的自定义树控件的 asp 面板？

> ID：12879654
> 
> 赞同：0
> 
> 时间：2012-10-14T05:51:53.170
> 
> 标签：asp.net

```
<asp:Panel ID="Panel1" runat="server" style="width:400px; height:400px; overflow:auto; border:1px solid black;">
   <div id="sliders" style="width:200px; height:200px; overflow:auto; border:1px solid black;">
       <div id="canDiv" style="width:400px; height:0px;" class="ygtv-checkbox"></div> 
   </div>
</asp:Panel> 
```

//脚本显示静态树------

```
<!-- Combo-handled YUI CSS files: --> 
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.9.0/build/treeview/assets/skins/sam/treeview.css"> 

<!-- Combo-handled YUI JS files: --> 
<script type="text/javascript" src="http://yui.yahooapis.com/combo?2.9.0/build/yahoo-dom-event/yahoo-dom-event.js&2.9.0/build/connection/connection-min.js&2.9.0/build/treeview/treeview-min.js"></script>  

<!-- Combo-handled YUI JS files: --> 
<script type="text/javascript" src="http://yui.yahooapis.com/combo?2.9.0/build/yahoo-dom-event/yahoo-dom-event.js&2.9.0/build/treeview/treeview-min.js"></script>

 <script type="text/javascript">
var tree;                  
var cnt;                    //counter
var mailbox=new Array();    // to store str
(function() { 
function treeInit() {
tree = new YAHOO.widget.TreeView("canDiv");     //create tree obj
var root = tree.getRoot();                        // get root element
var root1= new YAHOO.widget.TextNode("Node", root, false);
for (cnt=1;cnt<=20000;cnt++)
{
   mailbox[cnt] = new YAHOO.widget.TextNode("Node "+cnt, root1, false);

}
        tree.subscribe('clickEvent',tree.onEventToggleHighlight);      
        tree.setNodesProperty('propagateHighlightUp',true); 
        tree.setNodesProperty('propagateHighlightDown',true); 
  tree.render();

//alert("after tree render");

}//end of treeInit 
 YAHOO.util.Event.addListener(window, "load", treeInit); 
})(); 
```

我试过`Panel1.Enabled=false;`但没有为我工作..树控件是雅虎的..现在我正在尝试静态树..当我点击按钮时。它应该禁用面板。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:07:50.393

您可能没有执行 Panel1.Enabled = False; 因为它应该工作。其次，您没有任何东西可以显示您禁用效果。我在您的 html 中添加了文本框，它工作正常。

**HTML 端**

```
 <asp:Panel ID="Panel1" runat="server" style="width:400px; height:400px; overflow:auto; border:1px solid black;">
    panel <asp:TextBox ID="txt1" runat="server" ></asp:TextBox>
   <div id="sliders" style="width:200px; height:200px; overflow:auto; border:1px solid black;">
parent<asp:TextBox ID="txt2" runat="server"></asp:TextBox>
       <div id="canDiv" style="width:400px; height:0px;" class="ygtv-checkbox">child<asp:TextBox ID="txt3" runat="server"></asp:TextBox></div> 
   </div>
</asp:Panel> 
```

**代码背后**

```
protected void Page_Load(object sender, EventArgs e)
{
    Panel1.Enabled = false;
} 
```

正如与 OP 的讨论所示，他希望禁用客户端上添加的控件。

**在面板中添加**HTML****

 **```
<input type="button" id="btndisable" /> 
```

**Javascript**

查看[如何添加 jquery](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)

```
$(function(){ 
    $('#btndisable').click(function(){
        $('#Panel1 input').each(function(){
            $(this).attr('disabled', true); 
        });

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T05:58:11.483

实际上，`Panel1.Enabled = False;`应该工作。

尝试使用`Visible`属性

`Panel1.Visible=false`**

# vb.net - VB.NET 中的 Encode64 / Decode64

> ID：12879661
> 
> 赞同：2
> 
> 时间：2012-10-14T05:54:31.083
> 
> 标签：vb.net, vb6

很抱歉这篇长篇文章，但在 .NET 中是否有一个简单的等效于这个 VB6 代码的代码？非常感谢你。

```
Public Function Encode64(sString As String) As String

    Dim bTrans(63) As Byte, lPowers8(255) As Long, lPowers16(255) As Long, bout() As Byte, bIn() As Byte
    Dim lChar As Long, lTrip As Long, iPad As Integer, lLen As Long, lTemp As Long, lPos As Long, lOutSize As Long

    For lTemp = 0 To 63                                 'Fill the translation table.
        Select Case lTemp
            Case 0 To 25
                bTrans(lTemp) = 65 + lTemp              'A - Z
            Case 26 To 51
                bTrans(lTemp) = 71 + lTemp              'a - z
            Case 52 To 61
                bTrans(lTemp) = lTemp - 4               '1 - 0
            Case 62
                bTrans(lTemp) = 43                      'Chr(43) = "+"
            Case 63
                bTrans(lTemp) = 47                      'Chr(47) = "/"
        End Select
    Next lTemp

    For lTemp = 0 To 255                                'Fill the 2^8 and 2^16 lookup tables.
        lPowers8(lTemp) = lTemp * cl2Exp8
        lPowers16(lTemp) = lTemp * cl2Exp16
    Next lTemp

    iPad = StrLen(sString) Mod 3                           'See if the length is divisible by 3
    If iPad Then                                        'If not, figure out the end pad and resize the input.
        iPad = 3 - iPad
        sString = sString & String(iPad, Chr(0))
    End If

    bIn = StrConv(sString, vbFromUnicode)               'Load the input string.
    lLen = ((UBound(bIn) + 1) \ 3) * 4                  'Length of resulting string.
    lTemp = lLen \ 72                                   'Added space for vbCrLfs.
    lOutSize = ((lTemp * 2) + lLen) - 1                 'Calculate the size of the output buffer.
    ReDim bout(lOutSize)                                'Make the output buffer.

    lLen = 0                                            'Reusing this one, so reset it.

    For lChar = LBound(bIn) To UBound(bIn) Step 3
        lTrip = lPowers16(bIn(lChar)) + lPowers8(bIn(lChar + 1)) + bIn(lChar + 2)    'Combine the 3 bytes
        lTemp = lTrip And clOneMask                     'Mask for the first 6 bits
        bout(lPos) = bTrans(lTemp \ cl2Exp18)           'Shift it down to the low 6 bits and get the value
        lTemp = lTrip And clTwoMask                     'Mask for the second set.
        bout(lPos + 1) = bTrans(lTemp \ cl2Exp12)       'Shift it down and translate.
        lTemp = lTrip And clThreeMask                   'Mask for the third set.
        bout(lPos + 2) = bTrans(lTemp \ cl2Exp6)        'Shift it down and translate.
        bout(lPos + 3) = bTrans(lTrip And clFourMask)   'Mask for the low set.
        If lLen = 68 Then                               'Ready for a newline
            bout(lPos + 4) = 13                         'Chr(13) = vbCr
            bout(lPos + 5) = 10                         'Chr(10) = vbLf
            lLen = 0                                    'Reset the counter
            lPos = lPos + 6
        Else
            lLen = lLen + 4
            lPos = lPos + 4
        End If
    Next lChar

    If bout(lOutSize) = 10 Then lOutSize = lOutSize - 2 'Shift the padding chars down if it ends with CrLf.

    If iPad = 1 Then                                    'Add the padding chars if any.
        bout(lOutSize) = 61                             'Chr(61) = "="
    ElseIf iPad = 2 Then
        bout(lOutSize) = 61
        bout(lOutSize - 1) = 61
    End If

    Encode64 = StrConv(bout, vbUnicode)                 'Convert back to a string and return it.

End Function

Public Function Decode64(sString As String) As String

    Dim bout() As Byte, bIn() As Byte, bTrans(255) As Byte, lPowers6(63) As Long, lPowers12(63) As Long
    Dim lPowers18(63) As Long, lQuad As Long, iPad As Integer, lChar As Long, lPos As Long, sOut As String
    Dim lTemp As Long

    sString = Replace(sString, vbCr, vbNullString)      'Get rid of the vbCrLfs.  These could be in...
    sString = Replace(sString, vbLf, vbNullString)      'either order.

    lTemp = StrLen(sString) Mod 4                          'Test for valid input.
    If lTemp Then
        Call Err.Raise(vbObjectError, "MyDecode", "Input string is not valid Base64.")
    End If

    If InStrRev(sString, "==") Then                     'InStrRev is faster when you know it's at the end.
        iPad = 2                                        'Note:  These translate to 0, so you can leave them...
    ElseIf InStrRev(sString, "=") Then                  'in the string and just resize the output.
        iPad = 1
    End If

    For lTemp = 0 To 255                                'Fill the translation table.
        Select Case lTemp
            Case 65 To 90
                bTrans(lTemp) = lTemp - 65              'A - Z
            Case 97 To 122
                bTrans(lTemp) = lTemp - 71              'a - z
            Case 48 To 57
                bTrans(lTemp) = lTemp + 4               '1 - 0
            Case 43
                bTrans(lTemp) = 62                      'Chr(43) = "+"
            Case 47
                bTrans(lTemp) = 63                      'Chr(47) = "/"
        End Select
    Next lTemp

    For lTemp = 0 To 63                                 'Fill the 2^6, 2^12, and 2^18 lookup tables.
        lPowers6(lTemp) = lTemp * cl2Exp6
        lPowers12(lTemp) = lTemp * cl2Exp12
        lPowers18(lTemp) = lTemp * cl2Exp18
    Next lTemp

    bIn = StrConv(sString, vbFromUnicode)               'Load the input byte array.
    ReDim bout((((UBound(bIn) + 1) \ 4) * 3) - 1)       'Prepare the output buffer.

    For lChar = 0 To UBound(bIn) Step 4
        lQuad = lPowers18(bTrans(bIn(lChar))) + lPowers12(bTrans(bIn(lChar + 1))) + _
                lPowers6(bTrans(bIn(lChar + 2))) + bTrans(bIn(lChar + 3))           'Rebuild the bits.
        lTemp = lQuad And clHighMask                    'Mask for the first byte
        bout(lPos) = lTemp \ cl2Exp16                   'Shift it down
        lTemp = lQuad And clMidMask                     'Mask for the second byte
        bout(lPos + 1) = lTemp \ cl2Exp8                'Shift it down
        bout(lPos + 2) = lQuad And clLowMask            'Mask for the third byte
        lPos = lPos + 3
    Next lChar

    sOut = StrConv(bout, vbUnicode)                     'Convert back to a string.
    If iPad Then sOut = Left$(sOut, StrLen(sOut) - iPad)   'Chop off any extra bytes.
    Decode64 = sOut

End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:21:42.067

这是您可以在 .net 中将本机函数与字符串一起使用的方式：

```
Public Shared Function EncodeString64(instr as string) as String
    Return Convert.ToBase64String(ASCIIEncoding.ASCII.GetBytes(instr))
End function

Public Shared Function DecodeString64(encstr as string) as String
    Return ASCIIEncoding.ASCII.GetString(Convert.FromBase64String(encstr))
End function 
```

对于 Unicode：

```
Public Shared Function EncodeString64(instr as string) as String
    Return Convert.ToBase64String(System.Text.Encoding.Unicode.GetBytes(instr))
End function

Public Shared Function DecodeString64(encstr as string) as String
    Return System.Text.Encoding.Unicode.GetString(Convert.FromBase64String(encstr))
End function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T05:56:43.167

有本地 .NET 函数来处理这个问题：

System.Convert.ToBase64String（编码）和 System.Convert.FromBase64String（解码）

# amazon-web-services - boto CloudFormation BadRequest (400)，例外：无

> ID：12879668
> 
> 赞同：2
> 
> 时间：2012-10-14T05:55:58.123
> 
> 标签：amazon-web-services, boto, amazon-cloudformation

我在 boto 中实现 CloudFormation 并遇到了一个奇怪的异常。

```
[sebastian ~/test_project (develop)]$ ./manage.py --template cf-templates/test_project.json --stack labs --validate
Validating template cf-templates/test_project.json..
Template cf-templates/test_project.json is valid!
[sebastian ~/test_project (develop)]$ ./manage.py --template cf-templates/test_project.json --stack labs --start
Creating stack labs with template cf-templates/test_project.json..
Traceback (most recent call last):
  File "./manage.py", line 311, in <module>
    main()
  File "./manage.py", line 113, in main
    start_stack(cf_con, parser, args, config)
  File "./manage.py", line 261, in start_stack
    template_body=get_json_from_template(args.template))
  File "/usr/local/lib/python2.7/site-packages/boto/cloudformation/connection.py", line 208, in create_stack
    raise self.ResponseError(response.status, response.reason, body)
boto.exception.BotoServerError: BotoServerError: 400 Bad Request
None 
```

如您所见，我正在执行两个命令。第一个打电话`validate_template`，没关系。第二个这样调用`start_stack`：

```
cf_con = cloudformation.connect_to_region(
    args.region,
    aws_access_key_id=config.get(
        args.config_section, 'aws_access_key_id'),
    aws_secret_access_key=config.get(
        args.config_section, 'aws_secret_access_key'))

cf_con.create_stack(
    args.stack,
    template_body=get_json_from_template(args.template)) 
```

我真的不知道问题可能是什么，因为我从 boto 得到的所有信息都`None`在错误消息中。但也许这表明了什么？

任何指向正确方向的指针都非常感谢！

PS。使用相同的模板从 AWS 控制台启动堆栈可以正常工作。DS。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T19:50:46.670

感谢garnaat的帮助，调试时我看到以下内容：

```
2012-10-14 19:18:58,377 foo [ERROR]:400 Bad Request
2012-10-14 19:18:58,377 foo [ERROR]:{"Error":{"Code":"InsufficientCapabilitiesException","Message":"Requires capabilities : [CAPABILITY_IAM]","Type":"Sender"},"RequestId":"389d102d-1623-11e2-b536-cb51e58a0a52"} 
```

所以我在代码中添加了这个功能：

```
cf_con.create_stack(
    args.stack,
    template_body=get_json_from_template(args.template),
    capabilities=['CAPABILITY_IAM']) 
```

# postgresql - 在 PostgreSQL 中为交叉表动态生成列

> ID：12879672
> 
> 赞同：21
> 
> 时间：2012-10-14T05:56:49.487
> 
> 标签：postgresql, plpgsql, dynamic-sql, postgresql-9.1, crosstab

我正在尝试`crosstab`在 PostgreSQL 中创建查询，以便它自动生成`crosstab`列而不是对其进行硬编码。我编写了一个函数，可以动态生成`crosstab`查询所需的列列表。`crosstab`这个想法是在使用动态 sql的查询中替换此函数的结果。

我知道如何在 SQL Server 中轻松做到这一点，但我对 PostgreSQL 的有限知识阻碍了我在这里的进步。我正在考虑将生成动态列列表的函数的结果存储到一个变量中，并使用它来动态构建 sql 查询。如果有人可以指导我同样的事情，那就太好了。

```
 -- Table which has be pivoted
CREATE TABLE test_db
(
    kernel_id int,
    key int,
    value int
);

INSERT INTO test_db VALUES
(1,1,99),
(1,2,78),
(2,1,66),
(3,1,44),
(3,2,55),
(3,3,89);

-- This function dynamically returns the list of columns for crosstab
CREATE FUNCTION test() RETURNS TEXT AS '
DECLARE
    key_id int;
    text_op TEXT = '' kernel_id int, '';
BEGIN
    FOR key_id IN SELECT DISTINCT key FROM test_db ORDER BY key LOOP
    text_op := text_op || key_id || '' int , '' ;
    END LOOP;
    text_op := text_op || '' DUMMY text'';
    RETURN text_op;
END;
' LANGUAGE 'plpgsql';

-- This query works. I just need to convert the static list
-- of crosstab columns to be generated dynamically.
SELECT * FROM
crosstab
(
    'SELECT kernel_id, key, value FROM test_db ORDER BY 1,2',
    'SELECT DISTINCT key FROM test_db ORDER BY 1'
)
AS x (kernel_id int, key1 int, key2 int, key3 int); -- How can I replace ..
-- .. this static list with a dynamically generated list of columns ? 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T23:46:53.257

您可以为此使用提供的 C 函数`crosstab_hash`。

手册在这方面不是很清楚。[在章节末尾](http://www.postgresql.org/docs/current/tablefunc.html)提到[了两个参数：](http://www.postgresql.org/docs/current/tablefunc.html)[`crosstab()`](http://www.postgresql.org/docs/current/tablefunc.html)

> 您可以创建预定义函数以避免在每个查询中写出结果列名称和类型。请参阅上一节中的示例。这种形式的底层 C 函数`crosstab` 名为`crosstab_hash`.

对于您的示例：

```
CREATE OR REPLACE FUNCTION f_cross_test_db(text, text)
  RETURNS TABLE (kernel_id int, key1 int, key2 int, key3 int)
  AS '$libdir/tablefunc','crosstab_hash' LANGUAGE C STABLE STRICT; 
```

称呼：

```
SELECT * FROM f_cross_test_db(
      'SELECT kernel_id, key, value FROM test_db ORDER BY 1,2'
     ,'SELECT DISTINCT key FROM test_db ORDER BY 1'); 
```

请注意，您需要为具有不同返回类型`crosstab_hash`的每个函数创建一个不同的函数。`crosstab`

有关的：

*   [PostgreSQL 行到列](https://stackoverflow.com/questions/9589217/postgresql-row-to-columns/9592419#9592419)

* * *

您*生成列列表*的函数相当复杂，结果不正确（`int`后缺失`kernel_id`），可以用以下 SQL 查询替换：

```
SELECT 'kernel_id int, '
       || string_agg(DISTINCT key::text, ' int, '  ORDER BY key::text)
       || ' int, DUMMY text'
FROM   test_db; 
```

而且无论如何它都不能动态使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-02T23:02:10.673

@erwin-brandstetter：如果您总是返回带有转换结果的 JSON 类型，则函数的返回类型不是问题。

这是我想出的功能：

```
CREATE OR REPLACE FUNCTION report.test(
    i_start_date TIMESTAMPTZ,
    i_end_date TIMESTAMPTZ,
    i_interval INT
    ) RETURNS TABLE (
    tab JSON
    ) AS $ab$
DECLARE
    _key_id TEXT;
    _text_op TEXT = '';
    _ret JSON;
BEGIN
    -- SELECT DISTINCT for query results
    FOR _key_id IN
    SELECT DISTINCT at_name
      FROM report.company_data_date cd 
      JOIN report.company_data_amount cda ON cd.id = cda.company_data_date_id 
      JOIN report.amount_types at ON cda.amount_type_id  = at.id 
     WHERE date_start BETWEEN i_start_date AND i_end_date
       AND interval_type_id = i_interval
    LOOP
    -- build function_call with datatype of column
        IF char_length(_text_op) > 1 THEN
            _text_op := _text_op || ', ' || _key_id || ' NUMERIC(20,2)';
        ELSE
            _text_op := _text_op || _key_id || ' NUMERIC(20,2)';
        END IF;
    END LOOP;
    -- build query with parameter filters
    RETURN QUERY
    EXECUTE '
        SELECT array_to_json(array_agg(row_to_json(t)))
          FROM (
        SELECT * FROM crosstab(''SELECT date_start, at.at_name,  cda.amount ct 
          FROM report.company_data_date cd 
          JOIN report.company_data_amount cda ON cd.id = cda.company_data_date_id 
          JOIN report.amount_types at ON cda.amount_type_id  = at.id 
         WHERE date_start between $$' || i_start_date::TEXT || '$$ AND $$' || i_end_date::TEXT || '$$ 
           AND interval_type_id = ' || i_interval::TEXT || ' ORDER BY date_start'') 
            AS ct (date_start timestamptz, ' || _text_op || ')
             ) t;';
END;
$ab$ LANGUAGE 'plpgsql'; 
```

所以，当你运行它时，你会得到 JSON 格式的动态结果，你不需要知道有多少值被旋转：

```
select * from report.test(now()- '1 week'::interval, now(), 1);
                                                                                                                     tab                                                                                                                      
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 [{"date_start":"2015-07-27T08:40:01.277556-04:00","burn_rate":0.00,"monthly_revenue":5800.00,"cash_balance":0.00},{"date_start":"2015-07-27T08:50:02.458868-04:00","burn_rate":34000.00,"monthly_revenue":15800.00,"cash_balance":24000.00}]
(1 row) 
```

**编辑**：如果您的交叉表中有混合数据类型，您可以添加逻辑以查找每一列，如下所示：

```
 SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type 
    FROM pg_attribute a 
    JOIN pg_class b ON (a.attrelid = b.relfilenode) 
    JOIN pg_catalog.pg_namespace n ON n.oid = b.relnamespace 
   WHERE n.nspname = $$schema_name$$ AND b.relname = $$table_name$$ and a.attstattarget = -1;" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-29T11:47:36.373

我意识到这是一篇较旧的帖子，但在同一问题上挣扎了一段时间。

**我的问题陈述：** 我有一个字段中包含多个值的表，并希望创建一个每行包含 40 多个列标题的交叉表查询。

我的解决方案是创建一个循环遍历表列的函数，以获取我想在交叉表查询中用作列标题的值。

在这个函数中，我可以创建交叉表查询。在我的用例中，我将此交叉表结果添加到单独的表中。

例如

```
CREATE OR REPLACE FUNCTION field_values_ct ()
 RETURNS VOID AS $$
DECLARE rec RECORD;
DECLARE str text;
BEGIN
str := '"Issue ID" text,';
   -- looping to get column heading string
   FOR rec IN SELECT DISTINCT field_name
        FROM issue_fields
        ORDER BY field_name
    LOOP
    str :=  str || '"' || rec.field_name || '" text' ||',';
    END LOOP;
    str:= substring(str, 0, length(str));

    EXECUTE 'CREATE EXTENSION IF NOT EXISTS tablefunc;
    DROP TABLE IF EXISTS temp_issue_fields;
    CREATE TABLE temp_issue_fields AS
    SELECT *
    FROM crosstab(''select issue_id, field_name, field_value from issue_fields order by 1'',
                 ''SELECT DISTINCT field_name FROM issue_fields ORDER BY 1'')
         AS final_result ('|| str ||')';
END;
$$ LANGUAGE plpgsql; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-23T08:51:07.497

[这里](http://www.cureffi.org/2013/03/19/automatically-creating-pivot-table-column-names-in-postgresql/)描述的方法对我来说效果很好。而不是直接检索数据透视表。更简单的方法是让函数生成一个 SQL 查询字符串。按需动态执行生成的 SQL 查询字符串。

# c++ - 检查指向 LLVM 中指针类型的指针

> ID：12879673
> 
> 赞同：6
> 
> 时间：2012-10-14T05:56:49.320
> 
> 标签：c++, llvm, clang

如何检查操作数是否`pointer to pointer`输入`LLVM`？我们可以检查是否是操作数指针，但如何检查它是否指向指针？我`Clang`用于生成中间代码并`C++`用于源文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T12:15:05.737

您可以调用`Type::getContainedType(int)`以访问指针类型。所以它应该是这样的：

```
bool isPointerToPointer(const Value* V) {
    const Type* T = V->getType();
    return T->isPointerTy() && T->getContainedType(0)->isPointerTy();
} 
```

# android - 如何使用 ImageButtons 管理 TableRow 的高度？

> ID：12879674
> 
> 赞同：0
> 
> 时间：2012-10-14T05:56:51.363
> 
> 标签：android, android-layout, android-tablelayout

我正在尝试使用带有 TableLayout 和 ImageButtons 的自定义键盘。到目前为止，我已经做到了 ![在此处输入图像描述](../Images/57702c7dccecd6d1262ac1d1cb15d155.png)

但很明显，我在删除两个连续 TableRows 之间的垂直间距时遇到了问题。相关代码如下：

```
 <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
                 android:id="@+id/numkeypad"
                 android:orientation="vertical"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:stretchColumns="*"

                 android:layout_gravity="bottom"
                 android:visibility="visible"
                 android:background="@color/contents_text"
            >

        <TableRow
                android:layout_width="wrap_content"
                android:layout_height="60dp"
                android:layout_weight="1"
                >

            <ImageButton android:id="@+id/numkeypad_1"
                         android:layout_height="60dp"
                         android:layout_weight="0.33333333333333"
                    android:layout_width="wrap_content"
                    android:src="@drawable/k1"
                    >
            </ImageButton>
            <ImageButton android:id="@+id/numkeypad_2"
                    android:layout_weight="0.33333333333333"
                    android:layout_width="wrap_content"
                    android:layout_height="60dp"
                    android:src="@drawable/k2">
            </ImageButton>
            <ImageButton android:id="@+id/numkeypad_3"
                    android:layout_weight="0.33333333333333"
                    android:layout_width="wrap_content"
                    android:layout_height="60dp"
                    android:src="@drawable/k3">

            </ImageButton>
        </TableRow>

        <TableRow                     android:layout_width="wrap_content"
                                      android:layout_height="60dp"
                                      android:layout_weight="1">
            <ImageButton android:id="@+id/numkeypad_4"
                         android:layout_weight="0.33"
                         android:layout_width="wrap_content"
                         android:layout_height="match_parent"
                         android:src="@drawable/k4"
                    >
            </ImageButton>
            <ImageButton android:id="@+id/numkeypad_5"
                    android:layout_weight="0.33"
                    android:layout_width="wrap_content"
                    android:layout_height="60dp"
                    android:src="@drawable/k5">
            </ImageButton>

            <ImageButton android:id="@+id/numkeypad_6"
                         android:layout_weight="0.33"
                         android:layout_width="wrap_content"
                         android:layout_height="60dp"
                         android:src="@drawable/k6">

            </ImageButton>
        </TableRow> 
```

有人可以指出是什么导致了两个 TableRows 之间的垂直间距，我该如何删除它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:24:53.160

您看到的行为是由于`LayoutParams`您用于`ImageButtons`. `TableLayout`和`TableRow`是对其子项施加某些约束的小部件（关于使用的`Layoutparams`值）。您的布局中的A`TableRow`应该是这样的：

```
 <TableRow
            android:layout_width="wrap_content"
            android:layout_height="60dp" >

        <ImageButton android:id="@+id/numkeypad_1"
                android:src="@drawable/k1" 
                android:background="@null" /> <!-- remove and possible padding from the Button drawable -->
        <ImageButton android:id="@+id/numkeypad_2"
                android:src="@drawable/k2" 
                android:background="@null" />
        <ImageButton android:id="@+id/numkeypad_3"
                android:src="@drawable/k3"
                android:background="@null" />
  </TableRow> 
```

# java - 找到 2 个论点的最小值

> ID：12879676
> 
> 赞同：0
> 
> 时间：2012-10-14T05:56:54.063
> 
> 标签：java, arrays, command-line, if-statement

我在这里找不到语法错误。谁能帮我找到这个？

问题是这样的 - (2) 编写一个程序来获取 2 个值作为命令行参数，并使用 if-else 找到这 2 个值的最小值。

类 MinNumber{

```
{
public static void main(String [] myArray){

    int length = myArray.length;

    if((myArray[0][0]) < (myArray[0][1])){
        System.out.println("Minimum number is : " + myArray[0][0]);
        }
    else{
        System.out.println("Minimum number is : " + myArray[0][1]);
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:58:46.420

你不能比较`String`值，`<`因为它不是原始的数组也是单数组而不是双数组。

以下不是安全代码，但最简单：

```
 if (Integer.parseInt(myArray[0]) < Integer.parseInt(myArray[1])) {
        System.out.println("Minimum number is : " + myArray[0]);
    } else {
        System.out.println("Minimum number is : " + myArray[1]);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:01:06.340

`myArray[0][0]`这就是您访问二维数组元素的方式。`myArray[0]`一维数组就足够了。

因此，您应该将数字解析出来`myArray[0]`并`myArray[1]`进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:08:20.800

这是你的问题。在您的 main 中，请注意一维数组？

```
public static void main(String [] myArray) 
```

在您的身体中，您正在以二维数组的形式访问它。

```
if((myArray[0][0]) < (myArray[0][1])){
    System.out.println("Minimum number is : " + myArray[0][0]);
    } 
```

默认情况下，main 方法接受一个参数：String 类型的元素数组。我假设您实际上打算从 myArray 访问字符串（作为一维数组）并相应地继续。

如果需要，也可以参考：http: [//docs.oracle.com/javase/tutorial/getStarted/application/index.html](http://docs.oracle.com/javase/tutorial/getStarted/application/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T06:14:21.227

命令行采用的参数是字符串类型，首先需要将它们转换为整数或浮点数进行数字比较。

# sql - Oracle SQL 中的子查询

> ID：12879678
> 
> 赞同：0
> 
> 时间：2012-10-14T05:57:19.650
> 
> 标签：sql, oracle

我想在 Oracle Express 中使用 SQL 中的子查询来获取员工在其部门中获得的最高薪水的薪水 ID。我有的表是：

```
 Employee
 Emp_id  Salary  Dept_id
 100     1000    a101
 200     2000    a101
 300     2500    b102

 Salary
 Grade   LowSal HiSal
 1       500    900
 2       901    2000
 3       2001   3000 
```

首先，我用这个查询提取了每个部门的最高工资：

```
SELECT Max(e.SALARY) 
FROM   EMPLOYEE e 
GROUP  BY e.DEPT_ID 
```

结果是两条记录：2000 和 2500

下一步是获取这些薪水的等级，所以我使用以下内容：

```
SELECT GRADE 
FROM   SALARY 
WHERE  (SELECT Max(e.SALARY) 
        FROM   EMPLOYEE e 
        GROUP  BY e.DEPT_ID) BETWEEN LOWSAL AND HIGHSAL; 
```

我收到的错误是：ORA-01427：单行子查询返回多于一行

如何使用 SQL 中的子查询执行该 SQL 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:11:32.657

有多种方法可以编写此类查询。您可以将子查询添加到`FROM`子句：

```
SELECT grade
FROM (SELECT max(salary) AS sal FROM employee GROUP BY dept_id) ms
JOIN salary ON ms.sal BETWEEN salary.lowsal AND salary.hisal; 
```

或者您可以使用相关子查询：

```
SELECT (SELECT grade FROM salary WHERE max(salary) BETWEEN lowsal AND hisal)
FROM employee
GROUP BY dept_id 
```

相关子查询通常较慢，因此首选第一种形式。

# java - java - 存储多个相关值进行排序的最有效方法？

> ID：12879679
> 
> 赞同：1
> 
> 时间：2012-10-14T05:57:26.163
> 
> 标签：java, sorting, data-structures

我需要在java中解析一个xml文件并将其存储在一个数组中以便稍后进行排序。xml文件有这种格式

```
<Experiments>
    <Experiment ID="312" RIndex="3" DIndex="3">40231</Experiment>
    <Experiment ID="481" RIndex="2" DIndex="5">23801</Experiment>
    <Experiment ID="102" RIndex="1" DIndex="5">41231</Experiment>
</Experiments> 
```

对于每个实验，必须存储 RIndex、DIndex 和实验值。我认为最直接的方法是二维数组，但是有一个函数我需要按其中一个属性（RIndex、DIndex 或实验值）进行排序。我也想过使用 ArrayList 的集合。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:23:01.520

我肯定会在顶层使用 ArrayList，并提供一个自定义`Comparator`来根据您想到的任何排序标准对值进行排序。有关比较器的用法，请参阅：

*   [使用比较器进行自定义排序](https://stackoverflow.com/questions/5245093/using-comparator-to-make-custom-sort)

选择如何存储值将是您最重要的选择。最佳选择可能是：

*   定义一个`Experiment`包含您需要的字段的类。这将是最有效的。
*   将每个实验结果存储在`HashMap`将字段映射到值的 a 中。这会降低效率，但如果您有不同类型的实验具有不同的属性等，这可能是一种有用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:08:29.473

使用 3 个值创建一个简单的类，然后为每个排序情况创建适当的比较器，然后将它们填充到 ArrayList 并使用适当的比较器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:10:26.073

`Experiment`您可以使用实例变量创建一个类`ID`，然后实现 Comparator 接口`RIndex`，您可以通过该接口对类的对象进行排序。（假设您知道如何使用 Comparator）`DIndex``Value``Experiment`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T06:10:30.770

由于性能似乎很关键，我相信你会设置基准。他们会告诉你什么是最好的方法。

执行此操作的明显方法是将数据放入[SortedSet](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)中，因此您没有单独的排序步骤。应该比从文件中读取任何内容要快得多，所以我想你应该没问题。接着就，随即。

您需要创建一个简单的类，其中包含所有相关值，可能还有一些额外的 id，以使每个值都唯一。

这个类应该实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口，或者如果您需要使用不同的标准进行排序，您可以提供单独的[Comparators](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)。

# ios - ios 广告展示的 iAd 替代品？

> ID：12879684
> 
> 赞同：1
> 
> 时间：2012-10-14T05:58:11.300
> 
> 标签：ios, cocoa-touch, admob, iad

我有一个应用程序，它目前使用 iAd。我现在遇到的问题是一些国家，比如马来西亚，正在使用我的应用程序，但 iAd 不在那里展示广告，所以我只在提供 iAd 的美国没有收入。

所以我的问题是，有没有我可以使用的广告网络，以便我可以在 iAd 不可用时获取一段代码并通过 UIWebView 在应用程序中显示它？我觉得有办法，但是不知道有没有广告公司这样做，ADMob是这样做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:23:01.390

如果您还没有，我建议您查看[AdWhirl](http://www.adwhirl.com)。它们确实允许您添加各种广告网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:06:43.443

我在我的一些应用程序中使用 Adsense 和 a `UIWebView`，这对我来说效果很好。我不确定马来西亚的具体情况，但有大量来自美国以外国家的热门歌曲

我所做的只是将广告代码粘贴到我服务器上的 php 文件（或 html 或其他文件）中，然后将该页面加载到`UIWebView`. 我还实现了代码来检测用户何时点击广告，然后我将用户重定向到 Mobile Safari。

更正，马来西亚也在那里。

![在此处输入图像描述](../Images/4c54306631cfad6ea5d282a8cfb0780d.png)

# php - SELECT MAX(field) 在 PHP 中的 SQL 问题

> ID：12879686
> 
> 赞同：0
> 
> 时间：2012-10-14T05:58:39.220
> 
> 标签：php, sql

```
$getSelect = "SELECT MAX(sid) FROM templateSelect WHERE dj_id = '$user_dj'";

$gotSelect = mysql_query($getSelect,$mss)
    or die("Error: templateSelect - ".mysql_error());

$numSelect = mysql_num_rows($gotSelect);

echo $numSelect; 
```

此表完全为空，但由于某种原因 $numSelect 返回值“1”。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T06:05:05.760

[`MAX()``NULL`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)`SELECT`如果语句[没有选择行](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)，[将返回。](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)您的结果集是包含`NULL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:07:14.170

在这种情况下，您将获得由返回的行数，`SELECT`并且该`MAX`值返回一行具有`NULL`值。

# php - jQuery 发布 JSON 并通过 PHP 解码

> ID：12879687
> 
> 赞同：1
> 
> 时间：2012-10-14T05:58:45.497
> 
> 标签：php, jquery, ajax, json, parsing

我一直在 stackOverflow 和 Google 中搜索一整夜，以找到一种让我的 ajax 工作的方法。我想使用 json 将我的数据发布到 php 表单，然后在 php 中解码 json 并处理它们。在 php 中处理后返回 json 中的一些数据。

下面是我用来将 json 发送到 php 的 jquery 代码。

```
 JSONobj = {
            firstname : "david", 
            email : "daivd@gmail.com"
        };

        var JSONstr = JSON.stringify(JSONobj);

            $.ajax({
                type: "POST",
                url: "Process.php",

                data: {info: JSON.stringify(JSONobj)},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data){
                          alert(data.newName);
                        }
            }); 
```

但是在解析 json 之后，我的标题是这样的：

![在此处输入图像描述](../Images/f2aa5c829dc92bede6555135febc74d9.png)

我应该在我的 PHP 文件中放什么？

```
<?php    
$myJson =json_decode($_POST['info'], true);

    // modify the name and return the data in json back
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:01:53.967

问题是该`JSON.stringfy()`方法用于将数组转换为json

所以用`JSONobj=new array();`

```
 data: {info: JSONstr},
or 
 data:JSONstr; 
```

在你的 php 文件中使用

```
$myjson->firstname;

 // than create a array using 

$newarray=array("firstname"=>$firstname,"lastname"=>$lastname);

echo json_encode($newarray) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:14:20.813

这是我必须做的：

```
$list = stripcslashes(utf8_encode(urldecode($_POST["list"])));
$obj = json_decode($list); 
```

然后我在做 var_dump($obj); 时看到了对象

# python - 我在这个程序中遇到一些语法错误？？？请检查一下

> ID：12879692
> 
> 赞同：-4
> 
> 时间：2012-10-14T05:58:58.147
> 
> 标签：python, string

```
while month<=12:    
    print('Month =' + str(month))

    monthlyPaymentRate=(0.02*bal)
    annualIntersetRate=((18/100)/12)
    balance=((bal-mmp)*(1+annualInterestRate)
    month=++month        
    bal=balance

    m=round(monthlyPaymentRate,2)
    b=round(balance,2)
    print('Minimum monthly payment =' + str(m))
    print('Current balance =' + str(b)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:03:38.430

Python 不支持 C 中的前缀或后缀`++`/`--`运算符。您需要将其表示为`x + 1`：

```
month += 1 
```

整个代码虽然不是很“Pythonic”。您正在用 Python 编写 C 风格的代码。

# bioinformatics - samtools mpileup 结果“^F”是什么意思

> ID：12879693
> 
> 赞同：3
> 
> 时间：2012-10-14T05:59:11.987
> 
> 标签：bioinformatics, fastq

这是 samtools mpileup 结果的一部分：

```
chr7    55241514        G       2786    .....................
chr7    55241515        C       2786    .....................
chr7    55241516        C       2786    .....................
chr7    55241517        G       2786    .....................
chr7    55241518        T       2786    .....................
chr7    55241519        G       2786    .$.$.$.$.$.$.$.$.$.$.
chr7    55241520        G       2776    .....................
chr7    55241521        C       2776    .....................
chr7    55241522        T       2776    .....................
chr7    55241523        G       2774    .....................
chr7    55241524        C       2774    .....................
chr7    55241525        T       2774    .....................
chr7    55241526        G       2723    .....................
chr7    55241527        G       2723    .$.$.$.$.$.$.$.$.$.$.
chr7    55241609        C       7999    ......^F.^F.^F.^F.^F.
chr7    55241610        C       7999    .....................
chr7    55241611        C       7999    .....................
chr7    55241612        A       7999    .....................
chr7    55241613        G       7999    .....................
chr7    55241614        C       7999    .....................
chr7    55241615        T       7999    .....................
chr7    55241616        T       7999    ..................... 
```

我不知道“^F”是什么意思，我咨询了mpileup指挥官的帮助，符号'^'标志着阅读的开始。'^' 减去 33 之后的字符的 ASCII 给出了映射质量。符号“$”标记读取段的结束。它没有说“F”，有人知道这个结果中“F”的含义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:36:12.510

欢迎使用[fastq 格式](http://en.wikipedia.org/wiki/FASTQ_format#Encoding)。使用[ASCII 表](http://www.asciitable.com/)，您将看到“F”的十进制值为 70。因此，与“F”相关的质量得分为 70 - 33，即 37。

假设您的堆积是使用 Illumina 1.8+ 编码的数据集生成的，质量得分范围为 0 到 41。因此 37 是该位置的相当高的质量得分。从记忆里：

```
40 would give a base call accuracy of 99.99%
30 would give a base call accuracy of 99.90%
20 would give a base call accuracy of 99.00%
10 would give a base call accuracy of 90.00%
 0 would give a base call accuracy of 00.00% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:19:58.040

您几乎自己找到了答案：

> ...符号“^”标志着读取的开始。'^' 减去 33 之后的字符的 ASCII 给出了映射质量。

因此，“F”编码了从该位置开始的一次读取的映射质量（我认为史蒂夫谈论的是碱基调用质量）。质量是[phred 分数](http://en.wikipedia.org/wiki/Phred_quality_score)，即对数标度错误概率：P = 10^(-Q/10)。您可以通过检查 ASCII 表（例如 man ascii）得出质量的数值，然后减去 33。F 转换为 70，映射质量为 37。映射质量的定义因校准器而异，但理论上这意味着从该列开始的读取有 10^(-37/10)=0.01% 的未对齐机会。

安德烈亚斯

# ios - 如何在 UIScrollView 中放置按钮和图像

> ID：12879695
> 
> 赞同：0
> 
> 时间：2012-10-14T05:59:17.400
> 
> 标签：ios, uiscrollview, uiimageview, uibutton

我在 xcode 4 中制作了一个 ios 应用程序，需要制作一个`UIScrollView`包含按钮和`UIImageView`. 有谁知道如何编码？

（如果可能的话，我希望能够在情节提要中做到这一点）

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T06:27:21.673

在`ViewDidLoad`方法：

// 添加滚动视图

```
UIScrollView *scrollview=[[UIScrollView alloc]initWithFrame:CGRectMake(0,0,320,480)]; 
scrollview.showsVerticalScrollIndicator=YES;
scrollview.scrollEnabled=YES;
scrollview.userInteractionEnabled=YES;
[self.view addSubview:scrollview];
scrollview.contentSize = CGSizeMake(320,960);//You Can Edit this with your requirement 
```

// 添加按钮

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self  action:@selector(aMethod:) forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[scrollview addSubview:button]; 
```

//添加图像视图

```
UIImageView*   iv =[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourPhoto.png"]];
iv.frame=CGRectMake(0, 0, 40,60);
[scrollview addSubview:iv]; 
```

# java - 什么是系统负载？

> ID：12879698
> 
> 赞同：0
> 
> 时间：2012-10-14T06:00:08.537
> 
> 标签：java

我有一个记录这个值的应用程序：

并将其称为系统负载。当我查看日志文件时，这是一个介于 0 和 1 之间的十进制数。哦，操作系统是 linux。不知道是什么意思？

```
 ManagementFactory.getOperatingSystemMXBean().getSystemLoadAverage(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:03:44.680

通常，系统的“平均负载”是 CPU 运行队列随时间的平均长度。这与命令报告的值相同`uptime`。

# ios - 将核心数据添加到应用程序时出现 NSInternalInconsistencyException

> ID：12879707
> 
> 赞同：1
> 
> 时间：2012-10-14T06:02:40.873
> 
> 标签：ios, core-data

我正在将核心数据添加到现有应用程序中，我按照以下步骤操作：

*   导入框架

*   创建模型

除了设置堆栈之外，我还使用以下代码：

```
- (NSManagedObjectContext *) managedObjectContext {
    if (managedObjectContext != nil) {
        return managedObjectContext;
    }
    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        managedObjectContext = [[NSManagedObjectContext alloc] init];
        [managedObjectContext setPersistentStoreCoordinator: coordinator];
    }

    return managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel {
    if (managedObjectModel != nil) {
        return managedObjectModel;
    }
    managedObjectModel = [[NSManagedObjectModel mergedModelFromBundles:nil] retain];

    return managedObjectModel;
}

-(NSPersistentStoreCoordinator *)persistentStoreCoordinator {

    if (persistentStoreCoordinator != nil) {
        return persistentStoreCoordinator;
    }

    NSURL *storeUrl = [NSURL fileURLWithPath: [[self applicationDocumentsDirectory] stringByAppendingPathComponent: @"xxxxx.sqlite"]];

    NSError *error = nil;
    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];
    if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:nil error:&error]) {
       // Handle error
    }    

    return persistentStoreCoordinator;
}

- (NSString *)applicationDocumentsDirectory {
    return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
} 
```

但是当我尝试保存数据时，我得到以下执行

> 由于未捕获的异常而终止应用程序 `NSInternalInconsistencyException`，原因：'这 `NSPersistentStoreCoordinator`没有持久存储。它无法执行保存操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T11:03:20.557

这个问题可能是因为您已经运行了应用程序，然后您更改了模型。

最简单的解决方案是从模拟器/设备中删除应用程序，然后执行清理，然后重试。

[更正确的解决方案是按照我在 XCode Data Model 发生任何更改后继续出现“保存操作失败”](https://stackoverflow.com/questions/1091228/i-keep-on-getting-save-operation-failure-after-any-change-on-my-xcode-data-mod)中的建议处理轻度迁移。

一个简单的建议是按照[XCode4 和 Core Data 中的建议启用 Core Data 日志：How to enable SQL Debugging](https://stackoverflow.com/questions/6428630/xcode4-and-core-data-how-to-enable-sql-debugging) and see what is going under the hood。

希望有帮助。

# c++ - C++ 中的存储分配语句

> ID：12879714
> 
> 赞同：3
> 
> 时间：2012-10-14T06:04:44.360
> 
> 标签：c++, variables, global-variables

我试图确定可以在 C++ 中为变量分配存储的语句。到目前为止，我想出了：

1.  声明语句：`int a;`具有各种存储、范围说明符 ( `auto`, `static`, `global`) 的语句。
2.  表达式语句：
    可以使用 等来分配堆上`malloc`的`new`存储。从技术上讲，尽管 的存储`pointer`是在其声明中分配的。我在这里计算所有此类情况。
    *   右手边的赋值 expr`malloc/new/calloc`或被调用函数可能分配存储的函数调用。
    *   函数调用 expr，变量通过引用传递，并在被调用函数中分配存储。

我想不出任何其他方法，但我有一种暗示可能还有更多。我希望人们明白我的要求，即使这个问题的措辞可能不正确。:) 欢迎任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T06:28:05.120

最好的方法是按内存类别对分配语句进行分组：

1.  静止的
2.  堆
3.  堆
4.  例外
5.  线程本地（仅限 C++11）

所有静态分配都来自声明。特别注意类模板实例化。模板中的静态数据字段显示为一个声明，而它们在数据段中生成与该模板的实例一样多的数据字段。函数/方法中的静态对象没有像`::Namesp::Class1::Class2::Smth`. 类或命名空间中的常规静态对象总是具有这样的名称。

堆栈分配来自局部变量和函数参数的声明。当某些东西被传递到函数中时（ref、ptr、val 等），最好将其作为根据参数声明创建的东西而不是动态生成的东西来威胁。

除此之外，在表达式计算期间以及从函数/方法返回某些内容时存在临时变量。它们都是堆栈分配。

堆分配总是显式的。它们是用 malloc（或其一种风格）、new 或 new[] 创建的。

异常与`throw`语句一起分配。`catch`当控制退出块时，它们被隐式删除。请注意，如果某些东西被抛出为`Some-Class*`（即作为指针），那么 C++ 运行时只会破坏指针本身，即它会执行`no-op`. 在这种情况下，该对象应由用户在 catch 块内的代码删除。否则这将是一个香草`memory-leak`/

线程局部对象的声明方式与静态对象非常相似。他们只有多个副本。

# c# - ListBox 内的统一网格

> ID：12879719
> 
> 赞同：3
> 
> 时间：2012-10-14T06:06:07.657
> 
> 标签：c#, wpf

我正在开发一个需要自己的自定义文件管理器/资源管理器的程序。这很典型：我有一个用户控件（名为 FileItem），它包括一个图像（缩略图）和一个标签（文件名）。

我遇到的问题是布局；我需要它在网格布局中（所以我使用统一网格来钉住它），就像您在图标视图中时的 Windows 资源管理器一样：

![Windows资源管理器](../Images/1c210a44988ee0ae44a02019aa3cc549.png)

我还需要能够选择 ListBox 完美执行的文件或多个文件等。问题是我不能同时使用两者。

所以我尝试在 ListBox 中插入一个统一网格。布局很棒，但我无法选择文件（好像 ListBox 不存在一样）。

一个快速的谷歌搜索建议只使用 ListView，但它做得不好，因为它有固定的列和行（并且在我正在处理的程序中大小会改变）。

那么如何才能同时实现 ListBox 和 Uniform Grid 的功能呢？

**编辑（重要）：** 如果你也需要这个外观并想要一个答案，我实际上推荐 WrapPanel 而不是 Uniform Grid。它将自动允许您根据内容动态更改行数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T10:41:42.270

要将 ListBox 设置`ItemsPanel`为 UniformGrid，您可以执行以下操作：

```
<ListBox>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid IsItemsHost="True" />
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBoxItem Content="Grid Item 1" />
    <ListBoxItem Content="Grid Item 2" />
    <ListBoxItem Content="Grid Item 3" />
    <ListBoxItem Content="Grid Item 4" />
    <ListBoxItem Content="Grid Item 5" />
    <ListBoxItem Content="Grid Item 6" />
    <ListBoxItem Content="Grid Item 7" />
    <ListBoxItem Content="Grid Item 8" />
    <ListBoxItem Content="Grid Item 9" />
    <ListBoxItem Content="Grid Item 10" />
</ListBox> 
```

您不应该对此有选择问题，并且这些项目将按照您的需要显示。

# android - Eclipse 不询问使用什么安卓设备

> ID：12879721
> 
> 赞同：0
> 
> 时间：2012-10-14T06:06:31.737
> 
> 标签：android

我正在实现一个 Android 应用程序，我需要在模拟器和手机上进行测试。但是当我运行应用程序时，它会在手机上运行，​​而不会询问我或向我显示我想测试我的应用程序的选项。有人可以帮助我如何实现这一点。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T06:10:26.203

转到顶部的“运行”菜单，然后选择“运行配置...”。在左侧的“Android 应用程序”下，选择您的项目。选择“目标”选项卡，然后选择“始终提示选择设备”。然后单击对话框底部的“运行”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T06:11:13.080

转到项目 > 属性 > 运行/调试设置 > > 编辑配置属性

在这里，您将能够选择 android 设备以及选择可用于运行您的 android 应用程序的其他选项

您可以从目标选项卡中选择不同的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T16:48:39.040

或者...

如果您在选择器对话框中选中了“使用同一设备进行未来启动”，则必须断开所有设备（USB 和模拟器），然后再次单击“运行”并取消选中该复选框！

# objective-c - 修改 NSArray 中 UILabel 的文本属性

> ID：12879727
> 
> 赞同：3
> 
> 时间：2012-10-14T06:07:56.533
> 
> 标签：objective-c, ios, nsarray, uilabel

我有一个`NSMutableArray`完整的`UILabels`，我想通过逐步修改它们的文本属性`array`。我知道生成要分配给标签的文本的函数或函数不是问题，`UILabels`因为我已经在数组之外对其进行了测试，并且工作正常。`UILabel`在数组内部时，我似乎无法修改要修改的文本属性。

我的数组填充如下：

```
NSMutableArray *scrambledWordLabelArray;

-(void)initUIArrays {
    [scrambledWordLabelArray insertObject:ScrambledWordLabel1 atIndex:0];
    [scrambledWordLabelArray insertObject:ScrambledWordLabel2 atIndex:1];
    [scrambledWordLabelArray insertObject:ScrambledWordLabel3 atIndex:2];
    [scrambledWordLabelArray insertObject:ScrambledWordLabel4 atIndex:3];
    [scrambledWordLabelArray insertObject:ScrambledWordLabel5 atIndex:4];
    [scrambledWordLabelArray insertObject:ScrambledWordLabel6 atIndex:5];
} 
```

然后一旦视图加载它应该将标签更改为另一个函数生成的字符串：

```
- (void)viewDidLoad
{
    [super viewDidLoad];   
    [self initUIArrays];

    currentGameList = [self GetWordList:[self LoadWordlist]];

    for (NSUInteger i = 0; i < [currentGameList count]; i++) { 
```

对于这一部分，我找到了两种解决方案，但都不适合我......

解决方案1：

```
 UILabel *temp = [scrambledWordLabelArray objectAtIndex:i];
         temp.text = [self ScrambleWord:[currentGameList objectAtIndex:i]]; 
```

解决方案2：

```
 [[scrambledWordLabelArray objectAtIndex:i] setText:[self ScrambleWord:[currentGameList objectAtIndex:i]]];
    }
} 
```

任何帮助都将不胜感激，因为我已经研究和调试了几个小时而没有修复:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:16:20.117

您不初始化 scrambledWordLabelArray。您需要添加以下行：

```
scramledWordLabelArray = [[NSMutableArray alloc] init]; 
```

附带说明：

currentGameList 和 scrambledWordLabelArray 是否总是具有相同数量的元素？您的“for”循环基于 currentGameList 中的元素数量，但您使用相同的索引从 scrambledWordLabelArray 中获取元素。

您发布的两个解决方案基本上是相同的代码。

# http - 是否可以从 POST 请求中请求密码？

> ID：12879729
> 
> 赞同：0
> 
> 时间：2012-10-14T06:08:10.840
> 
> 标签：http, post, libcurl, basic-authentication

客户端在发出 POST 请求之前不知道是否提交用户名和密码。所以它会尝试发送一个 POST 请求。然后服务器需要基本身份验证。然后客户端向用户询问用户名和密码。

询问用户名和密码后是否可以重新提交 POST 请求？

如何在 libcurl 中编写代码？

由于 POST 请求可能非常大，是否会使重新提交的流量增加一倍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:01:06.733

解决双重数据发送问题的 HTTP 1.1 方法是 libcurl 将自己包含的“Expect: 100-continue”标头。它允许服务器在发送任何数据之前拒绝 POST。

然而，实际上，大多数服务器都没有（正确地）实现这一点，所以你会做双重发布。

# java - 将变量传递给另一个 JAVA 类中的主函数

> ID：12879734
> 
> 赞同：1
> 
> 时间：2012-10-14T06:08:47.530
> 
> 标签：java, variables, main, args

在 Helloworld.java 类的 main 函数中，我创建了一个字符串或一个对象。然后，我创建了另一个类 HelloAnotherClass.java。我想将我的变量从 Helloworld main() 传递给 HelloAnotherClass.java 的主函数。

```
package helloworld;
        public class HelloAnotherClass {
           public static void main(String[] args) throws IOException, ParseException {
        //... for example print passed variables
        } 
```

如何使用参数或其他数据结构将变量从 HelloWorld main() 发送到 HelloAnotherClass main()，然后再将其返回到 HelloWorld.java？简而言之，我想使用另一个 java 类的 main() 函数作为 HelloWorld 类中的函数。

那是我写的代码示例

```
 HelloWorld { 
    /** * @param args the command line arguments */ 
    public static void main(String[] args) { 
    HelloAnotherClass.main("example"); 
    } 

public class HelloAnotherClass { 
    public static void main(String coming) throws IOException, ParseException { 
System.out.println(coming); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:13:22.677

这取决于你想如何运行其他类*。*

如果你想在当前的 JVM 中运行它，那么你可以通过显而易见的方式来执行它：

*   创建一个包含参数的字符串数组。
*   `main`以数组作为参数调用方法。

如果你想在一个新的 JVM 中运行它，那么你可以使用 System.exec(...) （或等效的）和一个命令字符串，就像你`java`自己从命令行运行一样。（如果参数字符串包含空格，你想使用特定的 Java 安装，你想使用相同的 JVM 选项，等等......它会更复杂。）

这两种方法各有优缺点：

*   调用另一个类`main`可以让您快速“启动”时间，但是：

    1.  另一个类不会有一组独立的`System.in/out/err`流，因为它与原始`main`类共享静态，
    2.  如果它调用`System.exit()`整个JVM就会退出，
    3.  如果它行为不端，原来的`main`类可能无法摆脱它，依此类推。
*   启动单独的 JVM 会导致启动时间明显变慢，但子 JVM 将无法干扰父 JVM。

* * *

顺便说一句，您最初尝试失败的原因是您传递的是字符串而不是字符串数组。编译器不会让你这样做......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:11:04.513

如果您正在运行两个独立的程序并希望它们交换数据，请阅读有关[进程间通信的](http://en.wikipedia.org/wiki/Inter-process_communication)内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:25:22.610

默认`main`参数为`String[]`. 更新`HelloAnotherClass`如下：

```
public class HelloWorld { 

   /** * @param args the command line arguments */ 
   public static void main(String[] args) { 
        HelloAnotherClass.main(new String[]{"example"}); 
   }
} 
```

如果您尝试在`HelloAnotherClass`课堂上打印参数，则如下所示：

```
public class HelloAnotherClass { 

  public static void main(String[] coming) throws IOException, ParseException {  
    System.out.println(coming[0]); 
  }
} 
```

如果您想拥有另一个带有`String`as 参数的 main 方法，也可以这样做：

```
public class HelloWorld { 

    /** * @param args the command line arguments */ 
    public static void main(String[] args) { 
       HelloAnotherClass.main("example"); 
    }
 }

 public class HelloAnotherClass { 

    public static void main(String coming) throws IOException, ParseException {  
       System.out.println(coming); 
    }
 } 
```

如果您正在寻找其他/其他详细信息，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T06:25:58.867

这是 HelloWorld，有一些参数，（我通过了“Hello Crazy World”）

```
public static void main(String args[]) {
    //call static main method of Main2 class
    HelloAnotherWorld.main(args);
      //Modifcation made on Main2 is reflected
    System.out.println(args[1].toString());
}

} 
```

这是HelloAnotherWorld

```
public static void main(String args[]) {        
    args[1]="foobar";
} 
```

由于在 HelloAnotherWorld 中 main 是静态的，因此您可以将 main 方法称为 HelloAnotherWorld.main("array goes here"); 另请注意，main 返回 void，因此任何传递原语并返回它的尝试都是不成功的，除非您重载了 main 方法。

# jquery - rails form 动态字段选择器

> ID：12879735
> 
> 赞同：0
> 
> 时间：2012-10-14T06:09:00.970
> 
> 标签：jquery, ruby-on-rails-3, nested-forms

我在 rails 3 中使用 nested_form 并且我有一个用户可以添加或删除的动态字段。

我需要知道这些字段的 jquery 选择器，以便我可以在字段之间进行一些 javascript 计算，目前动态字段将当前日期时间设置为字段，人们通常如何处理动态字段验证？

```
<%= nested_form_for [@project, @quote], :html => {:class =>'form-inline'} do |f| %>
<div>
  <%= f.hidden_field :project_id %>
  <%= f.label :name %>
  <%= f.text_field :name %>
  <%= f.label :status %>
  <%= f.text_field :status %>
</div>
  <p>
    <h4> Labour Items </h4>
  </p>
  <p>
    <%= f.fields_for :labouritems, :html => { :class => 'form-vertical' } do |builder| %>

    <%= builder.label :description %>
    <%= builder.text_field :description, :class => "input-medium" %>
    <%= builder.label :hours %>
    <%= builder.text_field :hours, :class => "input-mini" %>
    <%= builder.label :total %>
    <%= builder.text_field :total, :class => "input-mini" %>
    <%= builder.label "Mup/Hr" %>
    <%= builder.text_field :muphourrate, :class => "input-mini" %>
      <%= builder.label "Mup/Total" %>
    <%= builder.text_field :muptotal, :class => "input-mini" %>
    <%= builder.label "Mup/%" %>
    <%= builder.text_field :muppercent, :class => "input-mini" %>
    <%= builder.label "Contractor" %>

    <%= builder.autocomplete_field :contractor_name, autocomplete_contractor_firstname_contractors_path, :update_elements => {:id => "##{form_tag_id(builder.object_name, :contractor_id)}" , :hourly_rate => "##{form_tag_id(builder.object_name, :contractor_rate)}"   },:class => "input-small",:placeholder => "Seach" %>
    <%= builder.hidden_field :contractor_id  %>
    <%= builder.label "Rate/hr"  %>
    <%= builder.text_field :contractor_rate,:class => "input-mini" %>
    <%= builder.label "Work %" %>
    <%= builder.text_field :progress_percent, :class => "input-mini" %>
    <%= builder.label "Work $" %>
    <%= builder.text_field :progress_payment, :class => "input-mini" %>

    <%= builder.link_to_remove "Delete",:class => 'btn btn-small btn-danger'   %>

  <% end %>

  <%= f.link_to_add "Add Item", :labouritems, :class => 'btn btn-small btn-primary' %>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:38:00.663

我不知道您需要验证什么类型的信息，但这样的事情应该会有所帮助。您要验证的所有字段都需要一个类或 ID。如果您需要以某种方式验证某个问题，请给它一个 ID 并使用`$("#elements_id")`jQuery 进行选择。

```
$(".form-inline").submit(function(){

  $.each($(".input-mini"), function(){
    if($(this).val() == ""){
      $("#warnings").html("<p> Ooops, you forgot something </p>"); // Warn
      return false;  // Don't submit
    }
  }

}); 
```

# c# - 确定字典中的最后一个索引引用

> ID：12879736
> 
> 赞同：0
> 
> 时间：2012-10-14T06:09:13.420
> 
> 标签：c#, .net, dictionary

有没有办法找出字典中引用的最后一个索引？例如，

```
Dictionary<string,string> exampleDic;

...

exampleDic["Temp"] = "ASDF"

... 
```

有没有办法以某种方式检索“Temp”而不将其存储为变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:28:17.117

实现自己的字典

```
public class MyDic : Dictionary<String, String>
{
    public string LastKey { get; set; }

    public String this[String key]
    {
        get
        {
            LastKey = key;
            return this.First(x => x.Key == key).Value;
        }
        set
        {
            LastKey = key;
            base[key] = value; // if you use this[key] = value; it will enter an infinite loop and cause stackoverflow
        }
    } 
```

然后在你的代码中

```
 MyDic dic = new MyDic();
    dic.Add("1", "one");
    dic.Add("2", "two");
    dic.Add("3", "three");

    dic["1"] = "1one";

    dic["2"] = dic.LastKey; // LastKey : "1"

    dic["3"] = dic.LastKey; // LastKey : "2"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:10:38.807

不，没有任何东西可以存储这个（这是一个非常不寻常的要求），所以你必须自己做这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:34:03.977

你为什么不去通用字典：

```
public class GenericDictionary<K, V> : Dictionary<K, V>
{
    public K Key { get; set; }

    public V this[K key]
    {
        get
        {
            Key = key;
            return this.First(x => x.Key.Equals(key)).Value;
        }
        set
        {
            Key = key;
            base[key] = value;
        }
    }
} 
```

**用法：**

```
Dictionary<string, string> exampleDic;
...
exampleDic["Temp"] = "ASDF"
var key = exampleDic.Key; 
```

# linux - javascript 中的 Web 服务器统计脚本

> ID：12879739
> 
> 赞同：0
> 
> 时间：2012-10-14T06:09:31.720
> 
> 标签：linux, webserver, cpanel

我需要一个用javascript（或c#）编写的脚本，它可以记录web服务器的统计信息（基于cPanel）

cPanel - Awstats 中有内置脚本。但它在 PHP 和 perl 中。如果有任何可用的服务层以 XML 形式提供 PHP 数据，那就太好了。

我需要尽快提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:12:34.003

它没有集成 cPanel，但您可以尝试 Google Analytics

# linux - linux nasm 将 AL 中的值移动到 AX

> ID：12879740
> 
> 赞同：3
> 
> 时间：2012-10-14T06:10:11.363
> 
> 标签：linux, assembly, x86, nasm

我正在研究一种打印多个数字整数的方法，方法是重复将整数除以 10 并收集余数，然后打印它们。这是一个有问题的代码段：

划分：

```
 ; initial division
    mov ax, 111   ; number we want to print
    mov ch, 10    ; we divide by ten to siphon digits
    div ch        ; divide our number by 10

    ; al now has 11, ah has 1
    mov dh, ah ; save the remainder in dh
  1 mov bx, al ; these lines refill ax with the number to 
    mov ax, bx ; divide
    mov ch, 10 ; refill ch with the divisor
    div ch     ; al now has 1, ah now has 1 
```

标有 1 的行有问题。我需要将 8 位寄存器 AL 中的值移动到 16 位寄存器 AX。我怎样才能在那里得到那个值，以便我可以分割它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T06:15:16.980

只需清除`ah`寄存器即可。`ax`寄存器由它的高和低部分组成-`ah:al`

这同样适用于`bx`(bh,bl) `cx`(ch,cl) 和`dx`(dh,dl) 寄存器

# php - 解析 url 并在最后一个斜杠后使用部分

> ID：12879749
> 
> 赞同：0
> 
> 时间：2012-10-14T06:10:53.017
> 
> 标签：php, mysql

我有一个页面，其最后一个单词是我的 MySQL 表中的一个字段。

就像那样：

```
 www.xyz.com/etc/demo
 www.xyz.com/etc/dddred
 www.xyz.com/etc/dffgfffre 
```

这个词`demo`在 MySQL 中有记录，其他词也是如此。因此，对于每个示例，将选择不同的记录。我想将这个词传递给 SQL 查询。我创建了一个`www.xyz.com/etc/abc.php`执行查询的页面，但我不知道如何获取并将值`city`放入 WHERE 子句。

```
 $res = myl_query("SELECT * FROM tableA WHERE city=''"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:13:14.863

使用可以使用这个

```
$c=explode("/",$_SERVER[ 'REQUEST_URI' ]);

$city=end($c); 
```

比使用

```
$res = mysql_query("SELECT * FROM tableA WHERE city='{$city}'"); 
```

`mysql_*`函数已被弃用，因此使用`PDO` 或`mysqli`

```
$res=$pdo->preapre("SELECT * FROM tableA WHERE city=:city");
$res->execute(array(":city"=>$city)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:25:05.793

```
$url =  $_SERVER['SCRIPT_NAME'];
preg_match('/\/([-/])$/', $url, $m);
$city = $m[0];
$res = mysql_query("SELECT * FROM tableA WHERE city='".$city."'"); 
```

# python - Youtube GData 2000 次观看次数最多

> ID：12879754
> 
> 赞同：0
> 
> 时间：2012-10-14T06:11:38.403
> 
> 标签：python, youtube, gdata

我想通过 gdata youtube api 捕捉 1000 个观看次数最多的 youtube 视频。

但是，只有前 84 个被退回。

如果我使用以下查询，则只返回 34 条记录（加上前 50 条）。

有谁知道出了什么问题？

“http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?start-index=1”返回 25 条记录

“http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?start-index=26”返回 25 条记录

“http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?start-index=51”返回 25 条记录

“http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?start-index=76”返回 9 条记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:13:02.357

YouTube 不会向您提供此信息。他们故意限制他们的提要以防止滥用。

# php - 如何重定向到多个 URL (php/javascript)

> ID：12879757
> 
> 赞同：0
> 
> 时间：2012-10-14T06:13:16.790
> 
> 标签：php, javascript

我已经设法使用 if/else 语句根据他们的国家代码/IP 重定向用户。

```
<?php   
if ($geoplugin['geoplugin_countryCode'] == 'US') {    
    print '<script language="Javascript">window.location="http://domain.com/us";</script>';   
}       
else     
    print '<script language="Javascript">window.location="http://domain.com/ca";</script>';
}
?> 
```

这行得通。但是，我有六个页面需要根据访问者的位置重定向到这些页面。

如何根据用户的位置将用户发送到不同的页面？

我对网络开发非常陌生，所以请原谅我提出一个新手问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:22:45.417

你可以试试switch语句。[`switch`在 PHP 中](http://php.net/switch)-[`switch`在 JavaScript 中](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)（提示：它们是相同的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:24:08.173

您可以使用php `switch`case，注意：我没有使用`break;`语句，因为使用`break`语句会增加代码。使用这个

```
<?php

switch($geoplugin['geoplugin_countryCode']){
case'us':
case 'uk':

echo '<script language="Javascript">window.location="http://domain.com/"'.$geoplugin['geoplugin_countryCode'].';</script>';
}
?> 
```

# javascript - 在Javascript中连接未定义的变量

> ID：12879758
> 
> 赞同：3
> 
> 时间：2012-10-14T06:13:21.877
> 
> 标签：javascript, concatenation

如果我有几个变量，例如

```
var t1 = "123";
var t2 = null;
var t3 = "456"; 
```

我想连接 t1 + t2 + t3，这样的字符串是否有固定输出，或者结果是否取决于不同的 Javascript 引擎？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T06:23:01.507

在所有浏览器/引擎中都是一样的。你可以这样做（假设 t1, t2, t3 总是字符串）

```
var t1 = "123";
var t2 = null;
var t3 = "456";

var result = (t1 || "") + (t2 || "") + (t3 || ""); // Logical OR `||` to avoid null/undefined. 
```

结果将是`123456`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T06:23:50.803

无论浏览器如何，它都会返回相同的输出。如果有的话，它只是`null`可能不同的部分（不太可能）

在这种情况下，它将是`"123null456"`

`null`为了抵消不同浏览器如何将值转换为字符串的任何不一致，您可以使用：

```
function concatAll() {
   var s = '';
   for(var x in arguments) {
       s += arguments[x] == null ? 'null' : arguments[x];
   }
   return s;
}

var t1 = "123";
var t2 = null;
var t3 = "456";

concatAll(t1, t2, t3); // will return "123null456" 
```

# javascript - 在流星收集加载时显示加载器

> ID：12879762
> 
> 赞同：18
> 
> 时间：2012-10-14T06:13:37.820
> 
> 标签：javascript, collections, meteor

我有一个模板，`task_list`看起来像这样：

```
{{#each tasks}}
    {{> task}}
{{/each}} 
```

`Template.task_list.tasks`返回一个集合，在 ui 中，加载似乎需要一些时间。

在加载集合时，我想显示一个加载指示器。

关于我如何能够做到这一点的任何想法？

顺便说一句，我确实`rendered`在 task_list 模板上尝试了模板的事件，但是它在实际加载列表之前被触发。我也尝试`rendered`在`task`模板上使用，但它似乎永远不会被调用。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-14T07:43:50.297

**Meteor 1.0.4 更新**：现在[模板级订阅](http://docs.meteor.com/#/full/Blaze-TemplateInstance-subscribe)可用，并且是使用 iron:router 或独立订阅的首选模式，

> `Template.instance().subscriptionsReady()`当所有调用的订阅`this.subscribe`都准备好时，有一个补充函数返回 true。
> 
> 在模板的 HTML 中，您可以使用内置的 helper `Template.subscriptionsReady`，这是一种简单的模式，用于在模板中显示加载指示器时，它们依赖于从订阅加载的数据。

例子：

```
Template.notifications.onCreated(function () {
  // Use this.subscribe inside onCreated callback
  this.subscribe("notifications");
});
<template name="notifications">
  {{#if Template.subscriptionsReady}}
    <!-- This is displayed when all data is ready. -->
    {{#each notifications}}
      {{> notification}}
    {{/each}}
  {{else}}
    Loading...
  {{/if}}
</template> 
```

这比为整个页面使用通用加载模板要好，因为加载部分已本地化到实际具有新数据的页面部分。

* * *

**流星前 1.0.4**：

这个想法是将 onReady 函数传递给[`Meteor.subscribe`](http://docs.meteor.com/#meteor_subscribe)：

```
Meteor.subscribe('tasks', function onReady() {
  Session.set('tasksLoaded', true);
}); 
```

然后，使您的模板依赖于`tasksLoaded`会话变量。在客户端 JavaScript 中：

```
Template.task_list.helpers({
  tasksLoaded: function () {
    return Session.get('tasksLoaded');
  }
}); 
```

在您的模板中：

```
<template name="task_list">
  {{#if tasksLoaded}}
    {{#each tasks}}
      {{> task}}
    {{/each}}
  {{else}}
    <img src="http://viewvc.svn.mozilla.org/vc/addons/trunk/bandwagon/skin/images/spinner.gif?revision=18591&view=co&pathrev=18591">
  {{/if}} 
```

*更新*：使用[iron-router](https://github.com/EventedMind/iron-router)，您可以直接选择指定`loading`在订阅加载时显示的模板。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-17T14:17:33.030

[Dan 的](https://stackoverflow.com/users/1269037/dan-dascalescu)回答肯定是正确的，但我想提醒一下，我相信 autopublish 包必须被删除才能真正起作用。

```
meteor remove autopublish 
```

另外，我推荐[spin package](https://atmosphere.meteor.com/package/spin)来获得漂亮的微调器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-06T11:29:08.823

在此期间已经发布了一些不错的软件包。看看这两个：

1.  [Spin](https://github.com/SachaG/meteor-spin) - 显示一个旋转的轮子。使用 Iron Router，您可以指定显示旋转轮的加载模板。
2.  [Iron Router Progress](https://github.com/Multiply/iron-router-progress) - 在页面顶部显示进度条（Youtube 风格）

他们都开箱即用，查看他们的文档以获取更高级的选项。

# css - 位置问题：固定

> ID：12879763
> 
> 赞同：1
> 
> 时间：2012-10-14T06:13:41.393
> 
> 标签：css, internet-explorer-8

我有一个表结构的以下代码，我尝试冻结它的标题。我已经使用 position:fixed 修复了标题。在这样做的同时，表头会丢失它的列宽，并且在 thead 和 tbody 列宽之间存在不对齐.. 有人能告诉我们如何避免这种情况吗？

```
<div class="outer_div"  style=" width: 1316px;height: 324px;overflow: auto;"> 
<table  class="scrollTable" id="invoiceMeasurement_table"
style="width: 1316pxfloat: left;float: left;width: 1300px;table-layout: fixed;" >   
<thead 
<tr style="position: fixed;margin-top: -10%;width: 1316px;">
<th style="width:75px">Col1</th>
<th style="width:75px">Col2</th>
<th style="width:75px">Col3</th>
<th style="width:91px">Col4</th>
</tr>
</thead>
<tbody >
</tbody>/*tbody is getting generated dynamically */
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:56:39.537

您在 head 标签中使用此代码并删除样式浮动

```
<!--[if IE 8]>
   <style type="text/css">
     #fixedHeader{
        position:relative !important;
     }
   </style>
<![endif]--> 
```

# python - 如何使用 Python 对句子进行 POS 标记

> ID：12879766
> 
> 赞同：0
> 
> 时间：2012-10-14T06:14:05.480
> 
> 标签：python, nltk

> **可能重复：**
> [使用 nltk.data.load 加载english.pickle 失败](https://stackoverflow.com/questions/4867197/failed-loading-english-pickle-with-nltk-data-load)

这是我在想要进行 POS 标记时遇到的问题，即使我已经导入了所需的项目。所以不确定是什么问题无法打印输出。谁能帮我指出我的代码有什么问题？

```
>>> import nltk
>>> import nltk.corpus
>>> from nltk.corpus import brown
>>> from nltk.corpus import treebank
>>> import nltk.tag
>>> from nltk import tokenize
>>> from nltk import word_tokenize
>>> from nltk import pos_tag
>>> text=nltk.word_tokenize("Historians have scant knowledge about Borneo's earl
y history, a certain fact though is the presence of modern man in Sarawak some 4
0,000 years ago (discovery of a Homo Sapiens skull at the Niah Caves), but most
of today's indigenous populations belong to the same Austronesian groups, brough
t by maritime migratory waves in the last 5,000 or so years, who have settled al
ong the Malayan peninsula, the Indonesian, Philippine, Micronesian and Polynesia
n archipelagos, and as far as Madagascar to the west and Easter Island to the ea
st.")
 >>> nltk.pos_tag(text) 
```

错误：

```
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    File "C:\Python27\lib\site-packages\nltk\tag\__init__.py", line 99, in pos_tag

        tagger = load(_POS_TAGGER)
    File "C:\Python27\lib\site-packages\nltk\data.py", line 605, in load
        resource_val = pickle.load(_open(resource_url))
    File "C:\Python27\lib\site-packages\nltk\data.py", line 686, in _open
        return find(path).open()
    File "C:\Python27\lib\site-packages\nltk\data.py", line 467, in find
        raise LookupError(resource_not_found)
LookupError:
**********************************************************************
    Resource 'taggers/maxent_treebank_pos_tagger/english.pickle' not
    found.  Please use the NLTK Downloader to obtain the resource:
    >>> nltk.download()
    Searched in:
        - 'C:\\Users\\user/nltk_data'
        - 'C:\\nltk_data'
        - 'D:\\nltk_data'
        - 'E:\\nltk_data'
        - 'C:\\Python27\\nltk_data'
        - 'C:\\Python27\\lib\\nltk_data'
        - 'C:\\Users\\user\\AppData\\Roaming\\nltk_data'
********************************************************************** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T06:55:18.223

就像错误说的那样，您需要使用 NLTK 下载器来下载资源`taggers/maxent_treebank_pos_tagger/english.pickle`。

您可以通过`import nltk; nltk.download()`从 Python shell 运行来执行此操作。您需要的文件位于模型选项卡下，名为`maxent_treebank_pos_tagger`.

# c# - DataList 中的按钮单击事件

> ID：12879768
> 
> 赞同：0
> 
> 时间：2012-10-14T06:14:10.407
> 
> 标签：c#, javascript, asp.net, vb.net

我想通过 DataList 中的按钮单击事件来更改按钮的状态。请在这方面帮助我。

```
<asp:DataList ID="DataList1" CaptionAlign="Right" runat="server" Width="100%" Visible="true">
      <ItemTemplate>
            <table style="border-bottom:0px; border-left:0px; border-right:0px;" width="100%"  border="0" cellspacing="0" cellpadding="0">                                                                            
              <tr>
                  <td width="120px"><asp:Label ID="lbl_ccode" runat="server" Text='<%#Bind("Fld_Couponcode")%>' ></asp:Label></td>
                  <td width="140px"><asp:Label ID="lbl_cval" runat="server" Text='<%#Bind("Fld_CouponValue")%>' ></asp:Label></td>
                  <td width="140px"><asp:Label ID="bl_status" runat="server" Text='<%#Bind("fld_status")%>' ></asp:Label></td>
                  <td width="140px"><asp:Button ID="btnstatus" runat="server" Text='<%#Bind("fld_status")%>' /></td>
             </tr>                                                                                                 </table>
      </ItemTemplate>
      <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
      <HeaderStyle BackColor="#507CD1" Font-Bold="True" HorizontalAlign="Left" ForeColor="White" />
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:18:25.240

处理[DataGrid.ItemCommand 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.itemcommand.aspx)

在 DataGrid 控件中单击任何按钮时发生。

```
<asp:Button ID="btnstatus" CommandName="ChangeStatus" 
runat="server" Text='<%#Bind("fld_status")%>' />

  void ItemsGrid_Command(Object sender, DataGridCommandEventArgs e)
  {

     switch(((Button)e.CommandSource).CommandName)
     {

        case "ChangeStatus":

         // Add your code here

           break;

        default:
           // Do nothing.
           break;

     }

  } 
```

# java - 在 Log4j 1.2 中模拟标记？

> ID：12879769
> 
> 赞同：3
> 
> 时间：2012-10-14T06:14:14.757
> 
> 标签：java, logging, log4j, slf4j

有什么方法可以模拟 Log4j 1.2 中的标记？

我从 Slf4j 发送它们，但它们被[`MarkerIgnoringBase`](http://www.slf4j.org/api/org/slf4j/helpers/MarkerIgnoringBase.html).

我知道 Log4j 在设计上不支持标记，但没有什么是不可能的，可能有某种方式，也许是一些自定义的 LoggerFactory 和日志级别？

# css - Safari 忽略了 Modernizr CSS 规则（Mobile Safari 也是如此）

> ID：12879773
> 
> 赞同：7
> 
> 时间：2012-10-14T06:15:11.597
> 
> 标签：css, safari, mobile-safari, modernizr

我无法弄清楚为什么 Safari/Mobile Safari 忽略了一行代码，它使用 Modernizr 的`.generatedcontent`规则来隐藏使用 icomoon 的图标。[您可以在http://importbible.com/](http://importbible.com/)上查看实时站点，图标位于页面页脚。浏览器在 Chrome 上完美呈现。做了更多测试，Safari 5.1.2 失败，而 Safari 6.0.1 工作。运行 4.3 的 iPad 失败。有问题的行是：

`.generatedcontent .icon-gplus, .generatedcontent .icon-facebook, .generatedcontent .icon-twitter, .generatedcontent .icon-feed, .generatedcontent .icon-youtube, .generatedcontent .icon-flickr, .generatedcontent .icon-deviantart, .generatedcontent .icon-tumblr, .generatedcontent .icon-share, .generatedcontent .icon-tag, .generatedcontent .icon-home, .generatedcontent .icon-news, .generatedcontent .icon-cart, .generatedcontent .icon-cart, .generatedcontent .icon-basket, .generatedcontent .icon-mail, .generatedcontent .icon-clock, .generatedcontent .icon-forward, .generatedcontent .icon-replay, .generatedcontent .icon-chat, .generatedcontent .icon-refresh, .generatedcontent .icon-magnifier, .generatedcontent .icon-zoomin, .generatedcontent .icon-expand, .generatedcontent .icon-cog, .generatedcontent .icon-trash, .generatedcontent .icon-list, .generatedcontent .icon-grid, .generatedcontent .icon-download, .generatedcontent .icon-globe, .generatedcontent .icon-link, .generatedcontent .icon-attachment, .generatedcontent .icon-eye, .generatedcontent .icon-star_empty, .generatedcontent .icon-star_half, .generatedcontent .icon-star, .generatedcontent .icon-heart, .generatedcontent .icon-thumb, .generatedcontent .icon-cancel, .generatedcontent .icon-left, .generatedcontent .icon-right { display: none !important; }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:33:36.387

如果没有别的，把它作为调试选项扔出去。您是否尝试过使用通配符`.icons`？

```
[class*='icon-'] { display:none !important } 
```

或者

```
[class^='icon-'] { display:none !important } 
```

编辑：星期五您的页面超时，所以我无法查看。今天我收到以下错误（Safari 5.1.2/MAC）：

1.  XMLHttpRequest 无法加载 [http://static.ak.fbcdn.net/rsrc.php/v2/yy/r/5SjacuFVbni.js](http://static.ak.fbcdn.net/rsrc.php/v2/yy/r/5SjacuFVbni.js)。Access-Control-Allow-Origin 不允许来源 [http://www.facebook.com 。](http://www.facebook.com)oauth
2.  加载资源失败：服务器响应状态为 407（需要代理身份验证）//这可能在我这边。

我在“连接”下看到 6 个图标。

我直接浏览到错误行 #1 中的 URL（Safari 或 Chrome）没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:41:15.443

看起来`<span class="icon-facebook">1</span>`是您对不支持生成内容的浏览器的备份。我建议默认隐藏备份（通过 CSS），并让 javascript 为不支持生成内容的浏览器显示备份图标。通过使用 Modernizr 的“无生成内容”类，或 IcoMoon 提供的 IE7 javascript 文件。

使用 Modernizr：

```
.icon-facebook { display: none; }
.no-generatedcontent .icon-facebook {display: inline; } 
```

或`lte-ie7.js`IcoMoon 提供的文件。使用这种方法，您不必使用额外的标记（只需在`<span class="icon-facebook-b">`没有备份的情况下使用`<span class="icon-facebook">1</span>`）。

```
/* Use this script if you need to support IE 7 and IE 6\. */

window.onload = function() {
    function addIcon(el, entity) {
        var html = el.innerHTML;
        el.innerHTML = '<span style="font-family: \'icomoon\'">' + entity + '</span>' + html;
    }
    var icons = {
            'icon-home' : '&#x21;',
            'icon-home-2' : '&#x22;',
            'icon-newspaper' : '&#x23;',
            'icon-pencil' : '&#x24;',
            'icon-pencil-2' : '&#x25;'
        },
        els = document.getElementsByTagName('*'),
        i, attr, html, c, el;
    for (i = 0; i < els.length; i += 1) {
        el = els[i];
        attr = el.getAttribute('data-icon');
        if (attr) {
            addIcon(el, attr);
        }
        c = el.className;
        c = c.match(/icon-[^\s'"]+/);
        if (c) {
            addIcon(el, icons[c[0]]);
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:49:50.000

现在 Chrome 显示页脚社交图标很好，但在 Safari 5.1.7 中根本没有图标。

我注意到的另一件事是，几个 CSS 文件被应用了两次（缩小版和普通版）。见第 73 行：

```
<link rel='stylesheet' type='text/css' media='screen' href="http://importbible.com/wp-content/plugins/bwp-minify/min/?f=wp-content/themes/import_bible_5.3/css/bs-responsive.css,wp-content/themes/import_bible_5.3/css/rating.css,wp-content/themes/import_bible_5.3/style.css&amp;f22064" /> 
```

第 420-422 行：

```
<link rel='stylesheet' id='bootstrap-rs-css'  href="http://importbible.com/wp-content/themes/import_bible_5.3/css/bs-responsive.css?f22064" type='text/css' media='screen' />
<link rel='stylesheet' id='rating-css'  href="http://importbible.com/wp-content/themes/import_bible_5.3/css/rating.css?f22064" type='text/css' media='screen' />
<link rel='stylesheet' id='style-css'  href="http://importbible.com/wp-content/themes/import_bible_5.3/style.css?f22064" type='text/css' media='screen' /> 
```

看起来 Safari 在这个特殊问题上变得疯狂。

# python - Python中随机的字典数据类型

> ID：12879776
> 
> 赞同：1
> 
> 时间：2012-10-14T06:15:24.503
> 
> 标签：python, python-3.x

我正在尝试使用 python 3.2 创建字典数据类型。我正在使用随机方法在 mydict 中随机选择一个值并打印出该值。但是，我也想打印键（例如动物：大象），但我只能打印键或值。我该怎么做？

```
mydict = {'Animal': ('elephant', 'giraffe', 'rhinoceros', 'hippopotamus', 'leopard'),
          'Fruit': ('strawberry', 'mango', 'watermelon', 'orange', 'durian')}
random_word = random.choice(random.choice(list(mydict.values()))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T06:16:46.850

`mydict.values()`，不出所料，给你的价值观。您可以使用`mydict.items()`来获取键/值对（作为元组）。

编辑：听起来你正在尝试做这样的事情：

```
category = random.choice(list(mydict.keys())
item = random.choice(mydict[category]))
print category, item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:34:23.440

`mydict.values()`将打印*values*，它可能不是你所期望的：

```
>>> random.choice(mydict.values())
('strawberry', 'mango', 'watermelon', 'orange', 'durian')
>>> random.choice(mydict.values())
('elephant', 'giraffe', 'rhinoceros', 'hippopotamus', 'leopard') 
```

我认为你真正想做的是将所有键的所有值组合起来，随机选择其中一个值，然后找出它属于哪个键。为此，首先您需要选择所有值来随机化它们：

```
>>> for i in mydict.values():
...    for v in i:
...       values_list.append(v)
...
>>> values_list
['strawberry', 'mango', 'watermelon', 'orange', 'durian', 'elephant', 'giraffe',
 'rhinoceros', 'hippopotamus', 'leopard'] 
```

现在，您可以获得随机值：

```
>>> random.choice(values_list)
'leopard'
>>> random.choice(values_list)
'strawberry'
>>> random.choice(values_list)
'hippopotamus' 
```

下一步是找出它属于哪些键：

```
>>> i = random.choice(values_list)
>>> ''.join("%s: %s" % (k,i) for k in mydict if i in mydict[k])
'Fruit: watermelon' 
```

默认情况下，当您遍历字典时，您将获得键：

```
>>> for i in mydict:
...    print i
...
Fruit
Animal 
```

这一行`''.join("%s: %s" % (k,i) for k in mydict if i in mydict[k])`是这个循环的长版本：

```
i = random.choice(values_list)
for k in mydict:
    if i in mydict[k]:
       print "%s: %s" % (k,i) 
```

# jboss7.x - httponly cookie web 3.0 导致意外超时

> ID：12879779
> 
> 赞同：0
> 
> 时间：2012-10-14T06:15:43.830
> 
> 标签：jboss7.x, servlet-3.0, httponly

就在最近，我从 web 2.4 迁移到了 web 3.0。此迁移的要求之一是，我需要在我的应用程序中引入“httponly”cookie。因此，我将以下 sessionconfig 元素添加到我的 web.xml

```
<session-config>
<session-timeout>240</session-timeout>
<cookie-config>
        <http-only>true</http-only>
        <secure>true</secure>
</cookie-config>
<tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

将上述 sessionconfig 添加到我的 web.xml 中会导致意外超时。我可以登录到我的应用程序，但之后当我点击其他任何内容时，我会被踢出一条消息，上面写着“会话已过期”。我做错什么了吗？任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:24:52.227

`<secure>true</secure>`意味着您的浏览器将仅通过 HTTPS 而不是通过 HTTP 将 cookie 发送回服务器，因此如果您通过 HTTP 访问该站点，那么在登录后您将不会发送任何 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T12:27:51.273

我同意德西斯拉夫·卡梅诺夫的观点。我在 HTTP 上遇到了这个问题，当我删除 true 时它起作用了。因此，HTTP 和 HTTPS 的正确配置如下：-

HTTP:-

```
<session-config>
<cookie-config>
    <http-only>true</http-only>
</cookie-config>
</session-config> 
```

HTTPS：

```
<session-config>
<cookie-config>
    <http-only>true</http-only>
     <secure>true</secure>
</cookie-config> 
```

# objective-c - iOS 6 Collection 视图格式问题

> ID：12879780
> 
> 赞同：0
> 
> 时间：2012-10-14T06:15:50.017
> 
> 标签：objective-c, ios, uicollectionview

我有一个用来显示缩略图的集合视图。我希望它是 4 列，就像照片应用程序一样。

我得到了一些示例代码（目前还没有多少），这让我对它正在做的数学感到困惑。

我正在使用一个数组（拇指），它是通过 NSXMLParser 从作为数据源的 Web 服务返回的 XML 构建的。

但是，由于该数组没有“numberOfSections”或“numberOfItemsInSection”（它只是一个带有照片名称和位置的简单二维数组），我无法确定调整它以处理 4 个跨度所需的数学。

例如：如果它是第三行/第二列，那么数组中的索引是 9（零基）吗？（因为 2 个完整行 * 每行 4 个 + 2（第二列）= 10）？.. 困惑

另请注意：当前代码将仅显示偶数 # 个图片。因此，如果某张专辑中有 3 张图片，则只会显示 2 张。

当前代码：

```
`#pragma mark - UICollectionViewDataSource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    // Return the number of sections.
    return [thumbs count] / 2;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 2;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCollectionCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"PhotoCollCell" forIndexPath:indexPath];
    //get current photo from collection
    PhotoCollection *currentPhoto = [thumbs objectAtIndex:(indexPath.section*2 + indexPath.row)];

    //Show in PhotoName Cell
    cell.photoName.text = currentPhoto.PhotoName;

    //show thumb via:SDWebImage
    [cell.photoView setImageWithURL:[NSURL URLWithString:currentPhoto.PhotoThumbnailAbsoluteLocation] placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

    //regular (wasn't working by default)
    //cell.photoView.image = [UIImage imageNamed:currentPhoto.PhotoThumbnailAbsoluteLocation];

    return cell;

}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:32:48.710

集合视图的要点是您*不需要*进行这些计算。用作您的布局类，使`UICollectionViewFlowLayout`单元格具有适当的大小（因此一行只能容纳 4 个）并有一个包含所有缩略图的部分。流布局将通过自动调整单元格的位置以填充行来为您提供网格。

# python - pymongo-如何为字段以及其他查询参数设置不同的值

> ID：12879781
> 
> 赞同：41
> 
> 时间：2012-10-14T06:15:51.873
> 
> 标签：python, mongodb, pymongo

我正在使用 pymongo 并希望为一个字段设置不同的值，这样我也可以传递其他查询参数。例如，我有如下条目：

```
{
   id = "my_id1"
   tags: [tag1, tag2, tag3],
   category: "movie",
}
{
   id = "my_id2"
   tags: [tag3, tag6, tag9],
   category: "tv",
}
{
   id = "my_id3"
   tags: [tag2, tag6, tag8],
   category: "movie",
} 
```

所以我想在电影类别下拥有所有不同的标签。谁能指导我如何使用 pymongo 实现这一目标。在 mongo javascript shell 中，我发出了 db.mycoll.distinct('tags', {category: "movie"}) 并且效果很好。但是当我在 pymongo 中做同样的事情时，它会引发错误。我猜它在 pymongo 中不受支持。任何想法，但如何才能完成这样的任务。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-14T14:51:49.443

您必须对从 a而不是集合返回[的游标](http://api.mongodb.org/python/current/api/pymongo/cursor.html#pymongo.cursor.Cursor.distinct)`distinct`进行调用：`find`

```
tags = db.mycoll.find({"category": "movie"}).distinct("tags") 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-07-14T16:49:31.163

pymongo（自 v1.1.1 起）支持[`collection.distinct('key')`](http://api.mongodb.org/python/1.4/api/pymongo/collection.html#pymongo.collection.Collection.distinct)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-09-15T13:36:35.723

实际上有一个过滤器参数，您可以传入不同的方法，如 pymongo Doc 中所述，

[Pymongo 独特的](https://pymongo.readthedocs.io/en/stable/api/pymongo/collection.html?highlight=distinct#pymongo.collection.Collection.distinct)

像这样

```
distinct_tags = db.mycoll.distinct("tags",{"category": "movie"}) 
```

# matlab - 在matlab中创建具有随机二进制元素的矩阵

> ID：12879782
> 
> 赞同：11
> 
> 时间：2012-10-14T06:15:54.340
> 
> 标签：matlab

我想在 matlab 中创建一个包含 500 个单元格（50 行，10 列）的矩阵，如何通过随机二进制数字创建和初始化它？我想要一些 50*10 比例的东西作为样本 3*4

0 1 1 1
0 0 0 0
1 1 1 1

在它之后，如何获得任何行的十进制方程？就像第 1 行在十进制中等于 7

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T06:44:36.843

为什么不使用`randi`生成随机整数？

```
A = randi([0 1], 50, 10); 
```

并将二进制行转换为数字 - 如前面的答案：

```
bin2dec(num2str(A(n,:))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T06:24:26.543

尝试这个：

```
A = rand(50, 10) > 0.5; 
```

`n`第行的十进制等效值由下式给出：

```
 bin2dec(num2str(A(n,:))) 
```

或者，如果您愿意，

```
sum( A(n,:) .* 2.^(size(A,2)-1:-1:0) )   % for big endian
sum( A(n,:) .* 2.^(0:size(A,2)-1) )      % for little endian 
```

这比 . 快几倍`bin2dec`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-14T06:31:18.503

另外的选择：

```
 A=round(rand(50,10)); 
```

第 n 行的十进制 eq 由下式给出：

```
 bin2dec(num2str(A(n,:))) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-17T20:57:59.333

通过其他更短的答案，我发现用 32 或 64 位数字生成随机数然后丢弃其中的 31 或 63 个随机数相当不吸引人……而是使用类似的东西：

```
A_dec=randi([0,2^10-1],50,1,'uint16'); 
```

并得到位：

```
A_bin=bsxfun(@(a,i)logical(bitget(a,i)),A_dec,10:-1:1); 
```

* * *

对于较大的阵列（R2014a，i7 930），这也快了几倍[但这对于 OP 似乎并不重要]：

> > 抽动；对于 i=1:1000;n = randi([0,2^10-1],50000,1,'uint16'); 结束；目录

```
Elapsed time is 1.341566 seconds. 
```

> > 抽动；对于 i=1:1000;n =bsxfun(@(n,i)logical(bitget(n,i)),randi([0,2^10-1],50000,1,'uint16'),10: -1:1); 结束；目录

```
Elapsed time is 2.547187 seconds. 
```

> > 抽动；对于 i=1:1000;n = rand(50000,10)>0.5; 结束；目录

```
Elapsed time is 8.030767 seconds. 
```

> > 抽动；对于 i=1:1000;n = sum(bsxfun(@times,rand(50000,10)>0.5,2.^(0:9)),2); 结束；目录

```
Elapsed time is 13.062462 seconds. 
```

`binornd`甚至更慢：

> > 抽动；对于 i=1:1000;n = 逻辑（binornd(ones(50000,10),0.5)); 结束；目录

```
Elapsed time is 47.657960 seconds. 
```

* * *

请注意，由于 MATLAB 保存逻辑的方式，这仍然不是最优的。（位保存为字节...）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-24T19:37:19.877

或者你可以这样尝试：

```
A = binornd(ones(50,10),p); 
```

这样，您还可以选择控制发生概率。

# function - $.ajax URL 在函数内部时不接受值

> ID：12879783
> 
> 赞同：0
> 
> 时间：2012-10-14T06:16:08.203
> 
> 标签：function, jquery

我正在对下一页和上一页使用几个 $.ajax 调用。所以我认为使用函数会简化它。我将 $.ajax 函数放在另一个函数中，并带有传递所需 URL 的参数。在传递 URL 时，它不被接受为 $.ajax 中的 URL。这是我的功能：

```
function show_slide(link) { 
    if (link!=null) {
        alert(link); //this shows correct URL
        $.ajax({
        url: link, // this does not work
        success: function(data) { ... ... }
        }); 
    }
} 
```

上面的函数在 $(document).ready() 之外。有人可以找出问题所在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:28:23.560

请使用 chrome 开发人员工具并显示网络调用和响应是什么。问题可能是因为您试图从另一个站点调用 url。出于安全原因，禁止在 javascript 中进行跨域调用。

我写了你的测试函数，它似乎没有问题。当我调用[http://www.google.com](http://www.google.com)（例如）时，网络调用被阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:37:15.967

如果 ajax 调用在域内，它可以工作，检查[一下](http://jsfiddle.net/6kvNd/7/)。

# visual-studio - 为 TLD 运行 compile.m 时出错

> ID：12879786
> 
> 赞同：1
> 
> 时间：2012-10-14T06:16:41.860
> 
> 标签：visual-studio, matlab, opencv, tld

我正在根据[https://github.com/zk00006/OpenTLD/wiki/Installation上显示的说明安装 TLD 应用程序](https://github.com/zk00006/OpenTLD/wiki/Installation)

使用：

OpenCV 2.4.2

Matlab R2010b x 64 位

WIN7×64

VS2010 专业版

一切正常，直到我执行此步骤“6）在 Matlab 中，运行 compile.m”

" PC 创建库 C:\Users\Ko\AppData\Local\Temp\mex_VUBK1k\templib.x 和对象 C:\Users\Ko\AppData\Local\Temp\mex_VUBK1k\templib.exp

lk.obj：错误 LNK2019：函数“void __cdecl normCrossCorrelation(struct _IplImage *,struct _IplImage *,struct CvPoint2D32f *,struct CvPoint2D32f *,int,char *,float *,int,int)”中引用的未解析的外部符号 cvReleaseImage (? normCrossCorrelation@@YAXPEAU_IplImage@@0PEAUCvPoint2D32f@@1HPEADPEAMHH@Z)

lk.obj：错误 LNK2019：函数“void __cdecl normCrossCorrelation(struct _IplImage *,struct _IplImage *,struct CvPoint2D32f *,struct CvPoint2D32f *,int,char *,float *,int,int)”中引用的未解析的外部符号 cvMatchTemplate (? normCrossCorrelation@@YAXPEAU_IplImage@@0PEAUCvPoint2D32f@@1HPEADPEAMHH@Z)

lk.obj：错误 LNK2019：函数“void __cdecl normCrossCorrelation(struct _IplImage *,struct _IplImage *,struct CvPoint2D32f *,struct CvPoint2D32f *,int,char *,float *,int,int)”中引用的未解析的外部符号 cvGetRectSubPix (? normCrossCorrelation@@YAXPEAU_IplImage@@0PEAUCvPoint2D32f@@1HPEADPEAMHH@Z)

lk.obj：错误 LNK2019：函数“void __cdecl normCrossCorrelation(struct _IplImage *,struct _IplImage *,struct CvPoint2D32f *,struct CvPoint2D32f *,int,char *,float *,int,int)”中引用的未解析的外部符号 cvCreateImage (? normCrossCorrelation@@YAXPEAU_IplImage@@0PEAUCvPoint2D32f@@1HPEADPEAMHH@Z)

lk.obj：错误 LNK2019：函数 mexFunction 中引用的未解析的外部符号 cvCalcOpticalFlowPyrLK

lk.obj：错误 LNK2019：函数 mexFunction 中引用的未解析的外部符号 cvAlloc

lk.mexw64 : 致命错误 LNK1120: 6 unresolved externals

C:\PROGRA~1\MATLAB\R2010B\BIN\MEX.PL：错误：“lk.mexw64”的链接失败。

？？？在 208 处使用 ==> mex 时出错，无法成功完成。

==> 编译时出错 32 eval(['mex lk.cpp -O' include lib]);

"

我搜索了许多网站，但无济于事。希望有人能在这个问题上启发我。非常感谢所有解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:39:19.770

如果您已仔细阅读说明并遵循它们，那么您一定已经创建了 .mex 二进制输出文件。那就是编译包含 opencv 代码的 mex 文件。您收到错误，因为您无法正确编译它们。检查文件夹中的 mex32 文件。

这是完成完整编译和成功运行的步骤，希望这对你有用

1 - 安装 OpenCV 2.2，不超过 2.2。如果您尝试这样做，这会变得很疯狂。并将其安装到 C:/OpenC2.2，确保不使用任何空格。Spaces 使 Matlab 中的路径搜索变得很酷。实际上，空间在 Matlab 中被分解了。

2 - 如果您有 x64 系统，带有 64 位 Matlab (2011) 和 64 位 C++ 编译器，您将需要通过“mex”编译器选项选择 32 位编译器。我使用了 MSVC C++ 9.0 32 位编译器。

3 - 选择编译器后，进行编译。你必须有一个成功的编译。尝试使用编译器的调试标志，一旦编译完成，您将获得输出。如果出现任何错误，请尝试修复它们。

4- 这意味着不要更改已在 OpenTLD 中设置的任何路径来查找 OpenCV2.2 - 这是最棘手的部分。您可以在任何地方安装 openTLD。只需确保您选择了 32 位 C++ 编译器。不是 64 位。

完成上述操作后。你应该可以跑步。第一次运行后 OpenTLD 很酷！

# php - Zend Framework 2 模型架构

> ID：12879787
> 
> 赞同：3
> 
> 时间：2012-10-14T06:16:44.420
> 
> 标签：php, zend-framework2

为了澄清我的疑问，我有这种情况：

我有一个销售汽车和房屋的应用程序（只是一个例子！），所以我创建了一个显示所有汽车的模块，称为**Cars**，以及一个显示所有房屋的模块，称为**Houses**。

我有一个**管理器**模块，它应该有一个用于汽车和房屋的 CRUD 系统。

我应该把我的汽车和房屋模型放在哪里？我应该创建一个模块来放置我的模型，比如`Main`模块？或者我应该把我的模型放在**Cars** and **Houses模块中，然后在****Manager**模块中访问它们？

假设我使用*select*、*insert*和*delete*`CarModel`方法创建了一个。如果我将此模型放入模块中，我可能会遇到安全问题，因为现在可以访问*插入*和*删除*方法......***`Cars``Cars`***

 ***另一方面，我可以只使用*select*`CarModel`方法创建一个内部`Cars`模块，然后在模块中再次创建一个插入*和*删除*的*模块，但这会使代码的维护变得非常困难......*`CarModel`**`Manager`***

 ***解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T06:43:20.887

因此，要从高层次回答您的问题，您可以通过两种方式在您给出的上下文中分解模块：

*   一体化模块（将 admin/CRUD 与提供实体和前端内容的实际模块相结合）。我的一位开发人员在此模块中采用了这种方法：[https ://github.com/speckcommerce/SpeckCatalog](https://github.com/speckcommerce/SpeckCatalog)
*   单独的模块。例如，[ZfcUser](https://github.com/ZF-Commons/ZfcUser)不提供用户管理，但[ZfcUserAdmin](https://github.com/Danielss89/ZfcUserAdmin)利用 ZfcUser 中的实体/映射器并提供额外的用户管理/管理功能。

这两种方法都没有错误或正确。这实际上仅取决于您的偏好以及您希望如何分解应用程序的功能。例如，您是否曾经想构建一个站点，在*没有*管理/CRUD 系统的情况下使用 Houses 或 Car 模块？

在更技术的层面上，有几种方法可以使用 Zend\Db 处理“模型”或“实体”。两种常见的模式是[TableGateway](http://martinfowler.com/eaaCatalog/tableDataGateway.html)模式和[Data Mapper](http://martinfowler.com/eaaCatalog/dataMapper.html)模式。

*   **表网关：**我写过关于这个的博客：[http ://blog.evan.pro/zf2-tablegateway-hydration](http://blog.evan.pro/zf2-tablegateway-hydration)

*   **数据映射器：**这是我的首选解决方案。我还没有写过关于这个的博客，但是你可以在[ZfcUser](https://github.com/ZF-Commons/ZfcUser/blob/master/src/ZfcUser/Mapper/User.php)中找到一个使用示例。此外，基础数据映射器不像 Table Gatway 那样内置在 ZF2 中，但它是一个更加灵活的解决方案。查看[ZfcBase](https://github.com/ZF-Commons/ZfcBase)提供的[AbstractDbMapper](https://github.com/ZF-Commons/ZfcBase/blob/master/src/ZfcBase/Mapper/AbstractDbMapper.php)。

我将借此机会从[Rob Allen](http://akrabat.com/)和我在 PHPNW12 上提供的 ZF2 教程中取笑几张幻灯片，几周后还将[在 ZendCon 上再次提供](http://zendcon.com/tutorials/#session-22966)：

[表网关 http://evan.pro/caps/2ddbaf.png](http://evan.pro/caps/2ddbaf.png) [表网关选择 http://evan.pro/caps/0904b8.png](http://evan.pro/caps/0904b8.png) [AbstractDbMapper http://evan.pro/caps/a31480.png](http://evan.pro/caps/a31480.png) [映射器选择 http:// /evan.pro/caps/a2a04f.png](http://evan.pro/caps/a2a04f.png) [摘要 http://evan.pro/caps/3ec9e6.png](http://evan.pro/caps/3ec9e6.png)******

# php - 如何将 ADODB 结果集的字段名称和值分配给与字段名称相同的变量？

> ID：12879794
> 
> 赞同：0
> 
> 时间：2012-10-14T06:18:14.833
> 
> 标签：php, adodb

我到处搜索，虽然我在这里和文档中找到了一些接近的答案，但我无法将其应用于我的情况。

也许有人可以帮助我将以下内容转换为 adodb 做事方式？

```
foreach ($rs as $field => $value) {
  $$field=stripslashes($value);
}
$rs->Close(); 
```

这是我最近的尝试，

```
while (!$rs->EOF) {
  for ($i=0, $max=$rs->FieldCount(); $i < $max; $i++){

    $$rs->fields($i) = $rs->fields[$i];
  }
  $rs->MoveNext();
} 
```

一般的想法是 $rs 应该已经获得了一条记录（由于 WHERE 子句只匹配一条记录），包含多个列/字段。

我希望将这些字段中的每一个分配给与该字段同名的变量。

我已经尝试了上述许多不同的配置和替代方案，包括 ADODB_FETCH_BOTH ADODB_FETCH_NUM 和 ADODB_FETCH_ASSOC 但仍然无法使其工作。

[这](https://stackoverflow.com/questions/2245140/get-field-names-using-adodb)是一个类似的问题，但我无法应用它的答案。非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:31:38.613

我找到了答案，或者至少以下内容对我有用。

[手册](http://phplens.com/lens/adodb/docs-adodb.htm#fetchfield)中的这个项目提供了有关 FetchField 的信息，我以前不知道这些信息，因此我能够弄清楚该怎么做。

```
while (!$rs->EOF) {
  for ($i=0, $max=$rs->FieldCount(); $i < $max; $i++) {
    $fld    = $rs->FetchField($i);
    $name   = $fld->name;
    $$name  = stripslashes($rs->fields[$i]);
  }
  $rs->MoveNext();
} 
```

我使用连接类型 ADODB_FETCH_ASSOC、ADODB_FETCH_NUM 和 ADODB_FETCH_BOTH 对此进行了测试，而“BOTH”是唯一适合我的类型。

# algorithm - 简化 T(n) 运行时

> ID：12879795
> 
> 赞同：4
> 
> 时间：2012-10-14T06:18:21.687
> 
> 标签：algorithm, runtime, analysis

给定以下功能

```
int g(int y) {
  if (y <= 0) {
    return 1;
  } 
  else {
    return g(y-1) + g(y-2) + g(y-3);
  }
} 
```

我们需要找到`T(n)`运行时间。现在，我知道你可以写

```
T(n) = T(n-1) + T(n-2) + T(n-3) + 1 
```

我只是不确定您是否可以进一步简化这一点，例如`T(n) = 3T(n-1) + 1`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T06:42:59.403

让**S(n) = T(n) + 1/2**，然后**S(n) = S(n-1) + S(n-2) + S(n-3)**。

那么**T(n)**应该是**c [1] x [1] ^n + c [2] x [2] ^n + c [3] x [3] ^n - 1/2**，其中**x [i]**是方程**x ³ - x ² - x - 1 = 0**和**c [i]**的根是具体的系数。

**T(n)**的精确解有点复杂。实际上**x [1] = 1.84, x [2] ,x [3] = -0.42 ± 0.61i**（是的，它们不是实数）。

但是，如果**T(n)**可以简化为**T(n) = 3T(n-1) + 1**，则**T(n)**必须类似于**c [1] x ^n + c [0]**。因此，您无法进一步简化它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T07:03:00.550

你的功能不是

```
T(n) = T(n-1) + T(n-2) + T(n-3) + 1 
```

这是

```
if n > 2
    T(n) = T(n-1) + T(n-2) + T(n-3)
or 
    T(n) = 1, 3, 5 for n = 0, 1, 2 respectively. 
```

要检查，请使用以下 'y's 运行您的原始函数

```
g(0) = 1
g(1) = 3
g(2) = 5

g(3) = 9 (i.e. = g(0) + g(1) + g(2) = 9, not g(1) + g(2) + g(3) + 1 = 10) 
```

使用动态规划避免重新计算已计算的 T(n)s

```
int g(int y)
{
    if(y <= 0)
        return 1;

    if(y ==  1)
        return 3;

    if(y == 2)
        return 5;

    int a1 = 1; int a2 = 3; int a3 = 5;
    int ret = 1;

    for(int i = 2; i < y; ++i)
    {
        ret = a1 + a2 + a3;
        a1 = a2;
        a2 = a3;
        a3 = ret;
    }

    return ret;
} 
```

# ruby-on-rails-3 - 如何加快在 Rails 3 应用程序中修复翻译？

> ID：12879799
> 
> 赞同：0
> 
> 时间：2012-10-14T06:19:06.410
> 
> 标签：ruby-on-rails-3, localization, gem, translation

我有一个 Rails 3 应用程序，它的视图中包含绝对文本 `<p>this is what i mean with absolute text</p>`

我必须将其更改为`<p><%= t(:translation_of_absolute_text) %><p>` . 我还必须通过本地化文件来更新它的新条目！

这是一个非常漫长的过程。我正在寻找可以使它更容易的宝石。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:56:37.320

我找到了这个Rails 3 应用程序的[多语言网络翻译中心社区](http://www.badrit.com/gems/translation_center/)。我认为这将是我正在寻找的最佳工具。

感[谢巴德里特](http://www.badrit.com/)

# ios - UIView animatewithduration - iOS

> ID：12879802
> 
> 赞同：1
> 
> 时间：2012-10-14T06:19:34.767
> 
> 标签：ios, uiviewanimation, uiviewanimationtransition

我正在尝试使用 UIView animateWithDuration 将标签从 A 点移动到 B 点，如下所示

```
 [UIView animateWithDuration:3 delay:0 options:UIViewAnimationTransitionNone animations:^(void){
        label.alpha = 1;
        label.center = CGPointMake(label.center.x , label.center.y +740);

        }completion:^(BOOL Finished){ 
         label.alpha = 0;
        label.center = CGPointMake(label.center.x , label.center.y - 740);] 
```

一旦标签即将达到 740，它就会减速。是否可以匀速运动到 B 点而不是减速？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T06:28:11.173

用这个：

```
[UIView animateWithDuration:3 delay:0 options:UIViewAnimationTransitionNone | UIViewAnimationOptionCurveLinear animations:^(void){ 
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:26:27.943

只需更改动画选项以`UIViewAnimationOptionCurveLinear`使动画使用删除所有加速和减速或`UIViewAnimationOptionCurveEaseIn`保持慢启动而不在结束时减速。

您所看到的是预期的，[甚至是记录在案](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration:animations:)的（见下文）。默认情况下，动画开始和结束都很慢：

> **讨论**
> 
> 此方法使用 . 立即执行指定的动画`UIViewAnimationOptionCurveEaseInOut`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T06:27:48.693

包括`UIViewAnimationCurveLinear`在选项中，而不是`UIViewAnimationTransitionNone`. `UIViewAnimationTransitionNone`不适用于这种动画。它适用于视图控制器转换。

# ruby-on-rails - 未初始化的常量 Gherkin::Parser::Parser (NameError)

> ID：12879804
> 
> 赞同：1
> 
> 时间：2012-10-14T06:20:13.683
> 
> 标签：ruby-on-rails, cucumber

我刚刚通过以下步骤将 Cucumber 添加到我的 Rails 应用程序中：

添加

```
group :test do
  gem 'cucumber'
end 
```

到我的 Gemfile。

跑步`bundle install`

其次是`rails generate cucumber:install`

当没有功能时，Cucumber 似乎按预期运行。

但是当我添加一个功能文件并运行时，`bundle exec cucumber`我得到以下

> 未初始化常量 Gherkin::Parser::Parser (NameError) /Users/purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/lib/cucumber/feature_file.rb:34:在`parse' /Users/purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/lib/cucumber/runtime/features_loader.rb:28:in`块中加载'/Users/purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/lib/cucumber/runtime/features_loader.rb:26:in `each' /Users/purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/lib/cucumber/runtime/features_loader.rb:26:in`load'/Users /purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/lib/cucumber/runtime/features_loader.rb:14:in `features' /Users/purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:170:in`features' /Users/purinkle/.rvm/gems /ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:46:`run!' /Users/purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:43:in`在执行！/Users/purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:20:in `execute' /Users/purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/gems/cucumber-1.2.1/bin/cucumber:14:in`' /Users/purinkle/.rvm/ gems/ruby-1.9.3-p286@radfords/bin/cucumber:23:in `load' /Users/purinkle/.rvm/gems/ruby-1.9.3-p286@radfords/bin/cucumber:23:in`'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:19:52.410

您可能还有其他一些实现`Gherkin`.

`spinach`例如，如果您已安装，这将产生冲突：当`cucumber`requires时`Gherkin`，它将从`spinach`gem 中提取而不是从`gherkin`

`Cucumber`'s`Gherkin::Parser`是一个包含一个`Parser`类的模块 [1]。

`Spinach`使用`gherkin-ruby`[2]，它以不同的方式实现整个事物，但使用相同的名称 [3]（IMO 实现不佳）。

尝试卸载`spinach`（从您的`Gemfile`和 a中删除它就`bundle update`足够了）或任何可能导致名称冲突的东西。

*   [1] [https://github.com/cucumber/gherkin/blob/master/lib/gherkin/parser/parser.rb#L14](https://github.com/cucumber/gherkin/blob/master/lib/gherkin/parser/parser.rb#L14)
*   [2] [https://github.com/codegram/gherkin-ruby](https://github.com/codegram/gherkin-ruby)
*   [3] [https://github.com/codegram/gherkin-ruby/blob/master/lib/gherkin/parser/parser.rb#L13](https://github.com/codegram/gherkin-ruby/blob/master/lib/gherkin/parser/parser.rb#L13)

# python - Django View 不在 HTML 中呈现

> ID：12879806
> 
> 赞同：1
> 
> 时间：2012-10-14T06:20:49.010
> 
> 标签：python, django

我的视图没有正确呈现。我对两个视图（`index.html`和`mq.html`）都有相同的格式，并且`index.html`工作正常——它创建了一个项目符号列表，每个项目符号都有 1 个值。

但是，`mq.html`创建正确数量的项目符号，但单词不会显示在页面上。谁能告诉我代码有什么问题？`Models`, `Views`, 及`HTML`以下。

楷模：

```
class Movie(models.Model):
    title = models.CharField(max_length = 500)
    pub_date = models.DateTimeField('date published')
    def __unicode__(self):
        return self.title
    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1)

class Question(models.Model):
    movie = models.ForeignKey(Movie)
    question_text = models.CharField(max_length = 1000)
    def __unicode__(self):
        return self.question_text 
```

意见：

```
def index(request):
    r = Movie.objects.all().order_by('-pub_date')
    return render_to_response('mrt2/index.html', {'latest_movie_list': r})

def movie_questions(request, movie_id):
    p = Movie.objects.get(pk=movie_id)
    k = Question.objects.filter(movie=p)
    return render_to_response('mrt2/mq.html', {'movie':p, 'the_question':k}) 
```

HTML：

**索引.html**

```
<h1> Test </h1>

{% if latest_movie_list %}
    <ul>
    {% for movie in latest_movie_list %}
        <li><a href="/movie/{{ movie.id }}/">{{ movie.title }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>No movies are available.</p>
{% endif %} 
```

**MQ.html**

```
{{ movie.title }}

{% if the_question %}
    <ul>
    {% for each in the_question %}
        <li><a href="/movie/{{ movie.id }}/{{ question.id }}/">{{ question.question_text }}</a>    </li>
    {% endfor %}
    </ul>
{% else %}
    <p>No questions have been asked.</p>
{% endif %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:26:27.647

您的`for each`循环没有将任何内容分配给`question`.

这个：

```
{% for each in the_question %} 
```

需要是：

```
{% for question in the_question %} 
```

# sql-server - 在没有约束检查的情况下更改表类型

> ID：12879807
> 
> 赞同：1
> 
> 时间：2012-10-14T06:21:47.637
> 
> 标签：sql-server, sql-server-2008-r2, user-defined-types

我声明了一个表类型，它在许多存储过程中被引用。

现在我想向该表类型添加一列。

由于 sql server 不允许更改表类型。我需要删除并重新创建它。但是在删除它时会抛出错误，说它在其他存储过程中被引用。因此不能下降。

如何在不删除存储过程的情况下继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:43:27.550

编写所有使用表类型的 SP。

```
select o.name, o.type, m.definition
from sys.sql_modules m
join sys.objects o on o.object_id=m.object_id
where m.definition like '%tbl_type%' 
```

您最好不要使用显示的定义，而只使用名称并使用对象浏览器中的 SSMS 编写脚本。

*   放下它们。
*   删除表类型。
*   创建它，包括新列。
*   重新创建存储过程。
*   测试。

# javascript - Javascript onclick 事件调用对象

> ID：12879809
> 
> 赞同：0
> 
> 时间：2012-10-14T06:22:02.487
> 
> 标签：javascript, javascript-objects, dom-events

> **可能重复：**
> [如何将 this 上下文传递给事件处理程序？](https://stackoverflow.com/questions/5490448/how-do-i-pass-the-this-context-into-an-event-handler)

我正在做一个与 Javascript 相关的作业，并且需要制作一个与特定输入相关联的日历。

日历不断显示，不隐藏等。

可以有多个日历指向不同的文本字段。

现在，每个日历都是由一个 Javascript 对象创建的，即

```
var cal1=new Calendar("inputfield_id"); 
```

现在日历对象有一些我想在点击日历时访问的变量。

所以基本上，我的问题是，有没有办法为 onclick 事件获取特定对象，即当您在对象中时以某种方式获取“this”变量。

* * *

这是一小部分代码来解释我正在尝试做的事情：

```
function calendar(id){
   this.date=new Date();
   this.id=id;
   this.next_year=function(){
        this.date.setFullYear(this.date.getFullYear()+1);
        alert(this.date); // basically I want to get object context here to change date
   }

   var temp_but=document.createElement("button").onclick=this.next_year;
   document.getElementById(id+"_div").appendChild(temp_but);
   document.getElementById(id+"_div").lastChild.onclick=this.next_year;

} 
```

基本上，在`this.nextyear`功能上，我想获取对象上下文以获取日期并相应地更改日历。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T06:46:56.710

我想这就是你想要做的......

```
function calendar(id){
   this.date=new Date();
   this.id=id;
   var context = this;
   this.next_year=function(){
        context.date.setFullYear(context.date.getFullYear()+1);
        alert(context.date);//basically i want to get object context here to change date
   }

   var temp_but=document.createElement("button").onclick=this.next_year;
   document.getElementById(id+"_div").appendChild(temp_but);
   document.getElementById(id+"_div").lastChild.onclick=this.next_year;

} 
```

本质上，我们使用闭包来保存对`this`被调用的引用`context`。`this.next_year`现在通过`context`.

* * *

编辑：响应 OP 发布的评论的一点 JS 课程。

* * *

当您调用一个函数作为构造函数（即）时，会创建一个新的空对象，并在新空对象的上下文中执行该函数。**`new`** `calendar("example")`

注意：它实际上*不仅仅是*一个空对象。它是一个空对象，在幕后具有某些内部指针，用于原型继承之类的事情。

随便！在整个函数中，对 this 的任何引用都是指当前上下文。而且，因为当您使用函数作为构造函数时，它会在新创建的对象的上下文中调用该函数，所以您可以使用`this.someProperty`.

当您执行语句`var cal1=new calendar("inputfield_id");`时，会创建一个新对象，并且您的函数`calendar`会在所述对象的上下文中执行。因此，`this.date=new Date();`并且`this.id=id`正在设置新日历对象的`date`和`id`属性。

我假设您实际上并没有难以理解这里发生的事情：`this.id=id;`而是为什么`this`关键字在`this.next_year`.

让我们从一个可行的场景开始。如果您要调用`cal1.next_year();`，您将`next_year()`在 的上下文中调用`cal1`，因此`this.date.setFullYear(this.date.getFullYear()+1);`将按`cal1`预期将 的 date 属性增加 1 年。

它在 click 事件处理程序中不起作用，因为当您设置事件处理程序时，您有点说“当触发 'click' 事件时，执行此**函数**”而不是“当触发 'click' 事件时，执行此**语句**“。

实际执行的功能是：

```
 function(){
        this.date.setFullYear(this.date.getFullYear()+1);
        alert(this.date);
   } 
```

并且您期望执行的语句是：

```
 this.next_year(); //where this refers to the calendar object. 
```

* * *

当这段代码执行时，

```
elem.onclick = this.next_year; 
```

就像说一样，

```
elem.onclick = function(){
    this.date.setFullYear(this.date.getFullYear()+1);
    alert(this.date);
} 
```

因此，如果这还不够清楚地说明问题，让我再进一步解释一下，`elem`在使用`elem.onclick=this.next_year;`. 我喜欢把它想象成浏览器正在调用`elem.onclick([Event event]);`. 本质上，您使用的函数`elem.onclick=`在上下文中执行，`elem`并且`Event`对象作为第一个也是唯一的参数传入。

为了清楚起见并把要点带回家，`this`函数中的关键字指向当浏览器作为事件处理程序调用它时被单击的元素。

```
 function(){
        this.date.setFullYear(this.date.getFullYear()+1);
        alert(this.date);
   } 
```

* * *

对于过度解释和重复/冗余，我深表歉意。我尽量让我的答案简短，因为我通常不擅长解释事情：P

PS - 不要忘记接受！

# php - 难以在 PHP 中检索值

> ID：12879812
> 
> 赞同：-1
> 
> 时间：2012-10-14T06:22:59.363
> 
> 标签：php

我是 PHP 新手。我无法检索该值`loopcount`。

这是我写的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Order</title>
        <script type="text/javascript">
//This function calculates the total bill by multiplying the price by quantity //selected
    function order()
    {

              var x,y,i,j,p=0;

        j=parseInt(document.getElementById('loopcount').value);

              document.write(j);
        for (i=0;i<=j;i++)
        {
            if(document.getElementById('itemCode[i]').checked==true){
                x=parseFloat( document.getElementById('quantity[i]').value);
                document.write(x);
                y=parseFloat( document.getElementById('price[i]').value);
                document.write(y);
        p+=x*y;
        }
        }
    var conf=confirm("The total amount is:"+ p);

              if(conf==true){
                  header("Location:userHome.php");
              }
              else{
                  header("Location:orderveggies.php");
              }

        }

    </script>
    </head>
    <body>

//the database has a table veggies.which contains the item code(primary key),vegetable name
//price/kilo and quantity in stock.The code bvelow displays data as checkboxes.select the 
//items required and click on order .which gives the total bill ask if it can continue or
//change order
        <form name="myForm" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" onsubmit="order()">
        <table align="center" border="0">
            <tr>

                <th>item Code</th>
                <th>Vegetable</th>
                <th>Price/KG</th>
                <th>Quantity</th>
            </tr>

             <?php

             $db=  mysqli_connect('localhost','root','','ourveggies')
                            or die("Error!Could not connect to the database");
                    $query="select itemCode,itemName,price from veggies";
                    $result=mysqli_query($db,$query)
                            or die("Error in query".mysqli_error($db));
                    $count=mysqli_affected_rows($db);
                    while($row= mysqli_fetch_array($result)){?>
                        <tr>
                        <td><input type="checkbox" name="itemCode[]" value="<?php echo $row['itemCode']; ?>"/><?php echo $row['itemCode']; ?></td>
                        <td><?php echo $row['itemName']; ?></td>
                        <td><input type="hidden" name="price[]" value="<?php echo $row['price']; ?>"/><?php echo $row['price']; ?></td>
                        <td><select name="quantity[]">
                                <option value="0.00">--Quantity--</option>
                                <option value="0.100">100 gm</option>
                                <option value="0.250">250 gm</option>
                                <option value="0.500">500 gm</option>
                            </select></td>
                        </tr>

                  <?php  }?>
                    <input type="hidden" name="loopcount" value="<?php echo $count; ?>"/>

            <tr>
                <td><input type="submit" name="order" value="order" /></td>
            </tr>
        </table>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:25:41.547

[`mysql_affected_rows()`](http://php.net/manual/en/function.mysql-affected-rows.php)用于更新/删除查询，告诉您有多少行被删除或更新（例如“受影响”）。您正在运行选择查询，因此没有受影响的行 - 选择不会更改数据。

要获取选择检索的行数，您需要[mysql_num_rows()](http://php.net/mysql_num_rows)代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:45:20.070

```
var conf=confirm("The total amount is:"+ p);

    if(conf==true){
        header("Location:userHome.php");
    }
    else{
        header("Location:orderveggies.php");
    }

} 
```

您知道您尝试在浏览器端的 javascript 中使用服务器端的 php 方法吗？

# php - 将 HTML 表单添加到 JSON 对象中

> ID：12879817
> 
> 赞同：0
> 
> 时间：2012-10-14T06:23:16.960
> 
> 标签：php, html, json, web

我是一名网络新手，但我正在为我正在制作的应用程序使用 JSON 提要。我希望 JSON 能够让办公室人员添加对象。那么我将如何使用 html 表单将对象添加到 json 文件中然后保存（JSON 将在服务器上）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T06:50:25.993

希望这会有所帮助

```
<html>
<body>
<h2>JSON Object Creation in JavaScript</h2>
<p>
Name: <span id="jname"></span><br /> 
Age: <span id="jage"></span><br /> 
Address: <span id="jstreet"></span><br /> 
Phone: <span id="jphone"></span><br /> 
</p>

<script>
var JSONObject= {
"name":"John Johnson",
"street":"Oslo West 555", 
"age":33,
"phone":"555 1234567"};
document.getElementById("jname").innerHTML=JSONObject.name 
document.getElementById("jage").innerHTML=JSONObject.age 
document.getElementById("jstreet").innerHTML=JSONObject.street 
document.getElementById("jphone").innerHTML=JSONObject.phone 
</script>

</body>
</html> 
```

您可以使用 json_decode 解码值，或者您可以将这些值插入隐藏元素并在您的 php 代码中获取它，只需作为普通表单数据提交

```
$data = json_decode($json_string);
$output = array();
foreach($data as $values){
$output[] = $values->id;
} 
```

有关更多详细信息，请点击链接 [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

# mstest - MSTest DeploymentItem 不会将文件复制到输出目录

> ID：12879818
> 
> 赞同：2
> 
> 时间：2012-10-14T06:23:26.543
> 
> 标签：mstest, deploymentitem

美好的一天！

我有以下项目结构：

```
Solution
-My.Project
-My.Project.Test
--Resources
---mytest.file 
```

在我的测试文件中使用以下方法：

```
[TestMethod]

[DeploymentItem("My.Project.Test\\Resources\\mytest.file", @"Resources")]

TestMethod()

{

....

string path = "Resources\\mytest.file"; ....

} 
```

根据[http://msdn.microsoft.com/en-us/library/ms182475%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms182475%28v=vs.100%29.aspx)我只想使用**没有**“部署项属性”的 DeployItemAttribute。

但是当我调试它的方法时，我发现“文件未找到异常”。

我能做些什么？

PS：还在[http://social.msdn.microsoft.com/Forums/en-US/vststest/thread/474d51ee-7ab9-4311-b7b0-b21266eb01d5中发布了这个问题](http://social.msdn.microsoft.com/Forums/en-US/vststest/thread/474d51ee-7ab9-4311-b7b0-b21266eb01d5)

此致！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T09:16:03.950

检查要部署的文件的属性 ( *mytest.file* )。

“复制到输出目录”应设置为“始终复制”（默认设置为“不复制”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-04T23:56:39.147

注意 [DeploymentItem("path")] 中的路径区分大小写。

例如：[DeploymentItem("MyTest.file")] 与 [DeploymentItem("mytest.file")] 不同，这将导致您的部署项目不会被复制到 TestResults Out 文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T04:48:45.293

是的，将我的“App.config”文件标记为“始终复制”为我修复了它。

# php - 似乎在日期转换中损失了一天

> ID：12879826
> 
> 赞同：0
> 
> 时间：2012-10-14T06:25:02.970
> 
> 标签：php, javascript, mysql, date, time

所以正如标题所说，当我从 mysql 转到我的 javascript 时，我一直失去一天，我无法弄清楚。当您插入数据库时​​，您损失了一天（假设我输入 10/14/12，数据库将读取 10/13/12），当我从数据库中读取时，我也损失了一天（我获取 10/13 /12 现在显示为 10/12/12）。

这是我的过程：

```
//date input from jquery ui datepicker       
$('#datepicker'+p).datepicker({numberOfMonths: 3, showButtonPanel: true, dateFormat: "D, d M, yy"});

//date sent to php to upload to mysql so there is a format conversion
$start = date("Y-m-d", strtotime($startdate)); 
```

现在开始下载：

```
 //date taken from mysql no modifications

//date modified to be sent to viewer in a nicer format
var start = $.datepicker.formatDate('D, d M, yy', new Date (item.start)); 
```

我的想法：问题似乎是双向发生的，我很确定我的 javascript 不是问题，因为只有 php 转换一种方式似乎可以排除这两种情况。这可能是我的mysql服务器的问题吗？另请注意，日期在 mysql 中保存为类型 DATE！

```
//as requested my sql code
 INSERT INTO classdates (start, end, hours, days, off, notes, type, branch) VALUES(:start, :end, :hours, :days, :off, :notes, :type, :branch) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:34:07.563

我发现我的问题是 javascript `new Date() function`。它不仅是转换日期，而且是操纵它。我不得不适应时区的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:50:59.443

您可以在客户端（javascript）将日期转换为 unixtime，然后将其插入`FROM_UNIXTIMESTAMP()`到 mysql 表中。它将允许您安全地将 clent 的时间转换为服务器时间。

# ado.net - SqlParameter 对象 C#

> ID：12879835
> 
> 赞同：0
> 
> 时间：2012-10-14T06:26:56.103
> 
> 标签：ado.net, parameterized-query

> **可能重复：**
> [XKCD SQL 注入——请解释](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)

我是 C# 的新手，我想知道。

在 C# 中构建 SQL 字符串时，为什么我们需要使用 SqlParameter 对象来表示用户的输入，而不是直接传入字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:31:37.547

我假设您的意思是为什么最好写：

```
command.Text = "SELECT LastName FROM MyUsers WHERE FirstName = @FirstName";
// Or whichever form...
command.Parameters.AddParameter("@FirstName").Value = input; 
```

而不是

```
command.Text = "SELECT LastName FROM MyUsers WHERE FirstName = '" + input + "'"; 
```

后一种形式存在三个问题：

*   它允许[SQL 注入攻击](http://bobby-tables.com)，除非您对转义非常小心 - 上面的代码不是。想象一下，如果用户输入以下内容，SQL 会是什么样子：

    ```
    ' OR 'x' = 'x 
    ```

*   它混合了代码和数据。你看不到你想要做什么的清晰表示，而第一种形式显示哪些位是固定的，哪些是可变输入

*   *虽然对于字符串*来说不是问题，但参数避免了不必要的数据转换。例如，当使用日期或日期/时间值时，使用第二种方法时，您最终需要担心数据库将接受哪些文本格式，即使您*从*一个`DateTime`值开始（比如说）并且数据库*最终*会具有某种适当的日期/时间类型的值。通过字符串表示只会带来麻烦。

此外，在*某些*情况下，第一种方法可能会提高性能，允许数据库缓存查询执行计划。不过，这方面有很多细微差别，而且它是特定于数据库的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:42:10.963

简单来说，为了避免 SQL 注入攻击，并且在某种程度上它还可以提高性能，因为我们为该参数指定了数据类型、大小等。

如果你只是想避免 SQL 注入，我想你可以使用

```
command.Text = "SELECT LastName FROM MyUsers WHERE FirstName = '" + input.Replace("'","''") + "'"; 
```

# c++ - 用于嵌入式编程的 C++ 编译器

> ID：12879836
> 
> 赞同：0
> 
> 时间：2012-10-14T06:27:06.430
> 
> 标签：c++, compiler-construction, embedded

对于 C++ 中的桌面和服务器编程，最常用的编译器是 Microsoft C++ 和 GCC。嵌入式编程最常用的编译器有哪些？使用 GCC 版本是最典型的还是其他编译器更受欢迎？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:34:29.570

我从事嵌入式开发工作，对于我们的大多数目标（ARM 内核），我们使用 GCC。对于一些奇异的目标，我们需要使用制造商或第 3 方提供的编译器。后者倾向于为 C 提供可接受的支持，但对 C++ 的支持通常很差。

恕我直言，EC++ 标准只不过是编译器制造商在 C++ 支持方面保持低水平的一个很好的借口，当涉及到模板支持（这通常是比 RTTI 更好的选择）时，这个“标准”只是一个糟糕的笑话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T09:25:06.040

在微控制器或微处理器上编程嵌入式软件时，大多数时候您无法选择编译器。您必须处理制造商提供的编译器。有时它实际上*是*gcc。有时，非常流行的芯片会得到多个编译器的支持，但不要太依赖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T09:46:56.033

嵌入式编程有许多不同的 IDE。其中一些使用 gcc，另一些使用它自己的编译器。许多制造商分发他们自己的编译器，如 TI 和 Analog 设备。还有一些具有独立编译器的独立 IDE，如 IAR、Keil、Code Sourcery。最流行的编译器是 gcc，但它不是最先进的。我看过 IAR、Keil 和 gcc 的效率比较。在大多数情况下，IAR 是最好的。

# sockets - 定期从服务器发送 Windows Store App 数据的最佳方法？

> ID：12879837
> 
> 赞同：1
> 
> 时间：2012-10-14T06:27:15.417
> 
> 标签：sockets, windows-8, client-server, windows-runtime, windows-store-apps

我知道该[`StreamSocket`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.streamsocket.aspx)课程并对此进行了深入研究，以至于在我的 Windows Store 应用程序中运行了一个[有效的客户端-服务器示例](http://babaandthepigman.wordpress.com/2012/04/07/streamsocket-example-c-metro)，但是，当我尝试将我的服务器代码移出到单独的 WPF 应用程序时，控制台应用程序或 Windows 服务，因此我可以尝试与我的客户端连接并将数据接收到其中，它找不到`Windows.Networking.Sockets`命名空间，我想这是由于 Win RT / Windows Store 应用程序独有的事实。

所以..

1.  如果您只能在 Windows 应用商店应用程序上使用它，那有什么意义`StreamSocket`呢，您肯定不会运行一个服务器，该服务器作为 Windows 应用商店应用程序服务于一组客户端。
2.  我应该选择什么方法来实现我需要做的事情，即定期从服务器向 Windows 应用商店应用程序发送数据，并可能由客户端发回东西？

我突然想到的一件事是，我想支持聊天功能，并且显然不想每 5 秒轮询一次服务器以获取 JSON 请求，我知道必须有一个优雅的解决方案，因为我已经看到一些 Windows 应用商店应用程序实现了这样的事情，例如文字游戏 WordFeud 大量使用客户端-服务器活动，那么处理所有这些东西的最佳实践是什么？

真的很迷茫，求助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:01:48.250

您是否研究过 Azure 移动服务？您可以获取试用帐户进行实验。但 AMS 可能是要走的路。它证明了推送通知、调度等。[http://www.windowsazure.com/en-us/develop/mobile/](http://www.windowsazure.com/en-us/develop/mobile/)

它可以在 Windwos Store、Windows Phone 8、iOS、Android 和 HTML 中使用……看看吧……

希望这可以帮助！

市民

# node.js - CoffeeScript (Node.js) IoC 别名

> ID：12879839
> 
> 赞同：1
> 
> 时间：2012-10-14T06:27:27.977
> 
> 标签：node.js, coffeescript, inversion-of-control, alias, service-locator

这可能有点长，但我遇到了一个轻微的设计障碍。

对于初学者，我创建了一个 IoC（控制反转），其中包含专门研究服务定位器而不是依赖注入。（这也是用在 node.js 上运行的咖啡脚本编写的，启用了和谐代理）

容器非常简单。您创建一个容器对象的新实例并在全局或本地存储该变量。

```
Context    = require('ettore').Context
AppContext = new Context()
App = AppContext.create 'App' 
```

在这种情况下，我还实现了一个管理子上下文的上下文对象（尽管我可能会把它拿出来）

要在容器中存储信息，请使用以下内容：

```
App.set 'Namespace.Controller.Action', 'Value goes here'
App.set 'Namespace.Controller.Action.Index', 'Value goes here x2' 
```

这完美地工作并且解决依赖关系同样简单（也有能力使用异步方法）

```
App.resolve 'Namespace.Controller.Action' # 'Value goes here'
App.get 'Namespace.Controller.Action' # 'Value goes here' 
```

这是一个很好的系统，但需要样板代码，并且需要预先通过 IoC 容器，而不是“在幕后”。所以我开始实现一个别名系统，它可以使之前的代码像这样工作：

```
NM = App.alias "Namespace"
NM.Controller.Action # 'Value goes here' 
```

这使用 V8 引擎提供的和谐代理（回退到库使用）。

**问题**

问题很简单，但同时又很复杂（除非我想太多了……）。再次使用前面的示例，我们有两个组件：

命名空间.Controller.Action 命名空间.Controller.Action.Index

我的系统在第一个示例中完美运行，如果找到了一个已解决的依赖项，则返回一个已解决的依赖项。否则它将发出错误或返回 false。问题在于知道您是否应该返回依赖项或另一个代理对象，以便他们可以继续进行下去。

为了明确这一点：

系统通过代理逐个对象并返回（通常）相同的代理对象。这允许您拥有较长的名称空间或您选择的命名方案。如果调用以下语句：

命名空间.Controller.Action

它将通过系统 2 次。一个用于控制器，另一个用于操作。问题是你真的不知道当前对象是否附加了另一个对象。（例如，他们是否在操作后调用 .Index？）

现在我已经实现了一种不太好的承诺系统。对于当前的“循环”，它将检查完全限定名称是否存在依赖关系。如果是这样，那么它将在普通代理之外添加一个名为“then”的混合方法。

因此，如果您有以下命名空间：

```
Namespace.Controller.Action
Namespace.Controller.Action.Index 
```

要访问“Namespace.Controller.Action”组件的内容，您必须使用 Promise，因为命名存在“冲突”。

```
Namespace.Controller.Action.then ->
   @get # 'Value goes here'
Namespace.Controller.Action.Index # 'Value goes here x2' 
```

**问题**

有没有更好的方法来实现或解决这个问题？随着时间的流逝，我越来越近了，但有时这一切似乎都有些古怪。

**源代码** 出于显而易见的原因，我没有在此处发布完整的源代码，因为它很长。别名和容器的主要代码可以在这里找到：[https ://github.com/TheHydroImpulse/Ettore/blob/master/lib/Container.coffee](https://github.com/TheHydroImpulse/Ettore/blob/master/lib/Container.coffee)

一个示例文件，在这里使用相同的原则（别名）被发现：[https ://github.com/TheHydroImpulse/Ettore/blob/master/examples/alias.coffee](https://github.com/TheHydroImpulse/Ettore/blob/master/examples/alias.coffee)

注意：如果您需要我更详细地解释某些事情，请告诉我......这是一个奇怪的问题描述。

# image-processing - 什么是 2+1-D 时空视频？

> ID：12879849
> 
> 赞同：3
> 
> 时间：2012-10-14T06:28:35.933
> 
> 标签：image-processing, computer-vision, sift, feature-descriptor

我正在阅读[http://www.scholarpedia.org/article/SIFT](http://www.scholarpedia.org/article/SIFT)，我需要一些帮助来定义这一部分：

> SIFT 描述符也已从灰度级扩展到彩色图像，从 2-D 空间图像扩展到 2+1-D 时空视频。

什么是 2+1-D 时空视频？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T06:47:46.310

它只是一个视频。

它们意味着原始技术应用于灰度图像，具有 2 个空间维度；x 和 y。

然后它被扩展到应用于彩色图像，然后应用于时间序列图像，即视频。视频有 3 个维度；2个空间（x，y）和1个时间（时间）。他们使用 2+1 而不是 3，因为 3D 图像通常指的是 x/y/z 而不是 x/y/t

# sql - 如何获取列名

> ID：12879851
> 
> 赞同：0
> 
> 时间：2012-10-14T06:29:09.250
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

我想获取位为0的列名和列数，

表格1

列名状态（位）

```
apple  0
orange 1
graph 0
pine 1
.... 
```

我在 table1 中有超过 50 行，我想获取列名并计算位为 0 的位置

预期产出

```
apple  
graph 
...
...

Count - 22 (total column count where bit is 0) 
```

如何查询上述条件

需要查询帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:30:30.907

## 解决方案

```
DECLARE @MyTable TABLE (
    ColumnName VARCHAR(50) NOT NULL,
    Status BIT NOT NULL
);

INSERT  @MyTable (ColumnName, Status)
SELECT 'apple', 0
UNION ALL SELECT 'orange', 1
UNION ALL SELECT 'graph', 0
UNION ALL SELECT 'pine', 1;

Print 'Solution 0 ... (no grouping, 2 resultsets)'
SELECT  t.ColumnName
FROM    @MyTable t
WHERE   t.Status=0
SELECT  @@ROWCOUNT AS cnt

Print 'Solution 1 ... (group by ColumnName, 2 resultsets)'
SELECT  t.ColumnName
FROM    @MyTable t
WHERE   t.Status=0
ORDER BY t.ColumnName
COMPUTE COUNT(t.ColumnName)

Print 'Solution 2 ... (1 resultset, 2 columns)'
SELECT  t.ColumnName, COUNT(*)
FROM    @MyTable t
WHERE   t.Status=0
GROUP BY t.ColumnName WITH ROLLUP

Print 'Solution 3 ... (1 resultset, 1 column, last row contains the cnt value)'
SELECT  CASE WHEN x.IsGrouping=0 THEN x.ColumnName ELSE CONVERT(VARCHAR(11),x.Cnt) END AS CocoJambo
FROM (
    SELECT  t.ColumnName, 
            COUNT(*) AS Cnt,
            GROUPING(t.ColumnName) AS IsGrouping
    FROM    @MyTable t
    WHERE   t.Status=0
    GROUP BY t.ColumnName WITH ROLLUP
) x
ORDER BY x.IsGrouping 
```

## 输出

```
Solution 0 ... (no grouping, 2 resultsets)
ColumnName
----------
apple
graph

cnt
---
2

Solution 1 ... (group by ColumnName, 2 resultsets)
ColumnName
----------
apple
graph

cnt
---
2

Solution 2 ... (1 resultset, 2 columns)
ColumnName 
---------- -
apple      1
graph      1
NULL       2

Solution 3 ... (1 resultset, 1 column, last row contains the cnt value)
CocoJambo
---------
apple
graph
2 
```

# java - 在Java中生成随机数

> ID：12879853
> 
> 赞同：0
> 
> 时间：2012-10-14T06:29:21.843
> 
> 标签：java, random

这是我得到的问题，我怎样才能将它限制在一个范围内？我的代码如下。谢谢

问题：编写一个调用 genRandom() 的方法来生成 5 个 1 到 100 之间的随机整数并将它们打印到屏幕上。在 main() 中调用 genRandom()。

```
import java.util.Random;

class RandomNumbers{
    public static void main(String [] args){

        Random randomNum = new Random();

        for(int i = 0; i<5; i++){
            System.out.println("Random number is : " + randomNum.nextInt(5));
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T06:30:39.160

使用 100 作为参数`nextInt()`

```
nextInt(100) 
```

根据您的评论更新

只需创建一个新的静态方法

```
public static int genRandom(){
  return new Random().nextInt(100);// or may be cache random instance
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:41:07.130

`genRandom()`在你的课堂上写下`RandomNumbers`并使用如下：

```
 public class RandomNumbers{
       static Random randomNum = new Random();

       public static void main(String[] args){
          for(int i=0; i< 5; i++){
               System.out.println("Random number is : " + genRandom());
          }
       }

       public static int genRandom(){
          return randomNum.nextInt(100);
       }   
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:35:59.147

`nextInt`生成 0 到给定范围值之间的随机数。如果你给`5`它，它将在 5 之间生成随机数。如果您想要 1 到 100 之间的随机数，您将在`nextInt`方法中给出 100。

请阅读 java 6 api 文档[http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt(int](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt(int) ) 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T07:13:16.820

你可以尝试这样的事情：

```
package com.stackoverflow.works;

import java.util.Random;

public class RandomNumber {

    public static int genRandom(int randomRange) {
        return new Random().nextInt(randomRange);
    }

    public static void genRandom(int randomRange, int displayCount) {
        for (int i = 0; i < displayCount; i++) {
            System.out.println("Random Number [Iteration " + (i + 1) +"]: " + genRandom(randomRange));
        }
    }

    public static void main(String[] args) {
        int randomRange = 100; // You can change the limit if required
        int displayCount = 5; // You can decide the iteration count

        RandomNumber.genRandom(randomRange, displayCount);
    }

} 
```

**输出：**

```
Random Number [Iteration 1]: 14
Random Number [Iteration 2]: 84
Random Number [Iteration 3]: 96
Random Number [Iteration 4]: 38
Random Number [Iteration 5]: 61 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-14T06:33:25.220

你可以`nextDouble()`像下面这样使用：

```
r = minValue + ((new Random()).nextDouble() * (maxValue - minValue)); 
```

`minValue, maxValue`您想要随机数的范围在哪里。

**完整代码**

```
import java.util.Random;

class Main {

    int genRandom(int minValue, int maxValue) {
        return (int) (minValue + ((new Random()).nextDouble() * (maxValue - minValue)));
    }

    public static void main(String [] args){
        Main m = new Main();
        for(int i = 0; i<5; i++){
            System.out.println("Random Number is: " + m.genRandom(1, 100));
        }
    }
} 
```

**样本输出：**

```
Random Number is: 95
Random Number is: 89
Random Number is: 9
Random Number is: 73
Random Number is: 20 
```

# javascript - 带有 Twitter Bootstrap 选项卡的 Expression Engine 频道条目不起作用

> ID：12879854
> 
> 赞同：1
> 
> 时间：2012-10-14T06:29:46.130
> 
> 标签：javascript, twitter-bootstrap, expressionengine

我在使用 {exp:channel:entries} 对实现 Twitter Bootstrap 的选项卡时遇到问题。这与您必须将第一个活动选项卡指定为通过对其应用 .active 类以便引导程序知道加载时显示哪个选项卡这一事实有关。但我的代码如下

```
 <div class="tabbable">
      <ul class="nav navtabs thumbnails">
        {exp:channel:entries channel="member_profiles" limit="4"}
        <li class="active">
          <a class="thumbnail" href="#{member_first_name}-{member_last_name}-tab" data-toggle="tab">
            <img src="{site_url}-/img/240x232.gif" alt="">
          </a>
          <div class="caption">
            <h4>{member_first_name} {member_last_name}</h4>
          </div>
        </li>
        {/exp:channel:entries}
      </ul>
    </div>
  </div>

    <div class="tab-content">
      {exp:channel:entries channel="member_profiles" limit="4" dynamic="no"}
          <div id="{member_first_name}-{member_last_name}-tab" class="tab-pane active">
            <div class="span6">
              <img class="thumbnail" src="{site_url}-/img/250x321.gif" alt="">
            </div>
      {/exp:channel:entries}
    </div> 
```

我似乎无法理解的问题区域是`class="tab-pane active row people-profile">`从我可以看到页面上出现的所有选项卡，因为所有频道条目都`.active`应用了类。我试过添加`{switch="active|||"}`无济于事。此外，[这里](https://stackoverflow.com/questions/12396184/expression-engine-channel-entries-with-twitter-bootstrap-carousel-not-working/ "here")`{if count == 1}active{/if}`的答案也没有达到预期的结果。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:53:16.100

好吧，这两个`{switch}`和条件检查`count`都应该起作用。我会自己去有条件的。

```
... {if count == "1"} class="active"{/if} ... 
```

或者：

```
... class="tab-pane{if count == "1"} active{/if}" ... 
```

当您说“没有达到预期的结果”时，了解它在您的标记中产生了*什么*会有所帮助。

# jquery - window.resize 由于虚拟键盘导致 jquery mobile 出现问题

> ID：12879857
> 
> 赞同：24
> 
> 时间：2012-10-14T06:30:23.870
> 
> 标签：jquery, cordova, jquery-mobile, event-handling

我遇到了一个不寻常的问题，我正在寻找建议。基本上，我正在使用：

*   jQuery Mobile 1.1
*   jQuery 8.2
*   PhoneGap (科尔多瓦) 2.1

在 iPhone 上我的应用程序的许多页面上，如果我将光标放在输入框中，这将打开虚拟键盘。这很好，也是意料之中的。

这是问题所在：在某些情况下（但不是全部），将光标放在输入框中会触发 window.resize 事件。我已经通过以下代码验证了这一点：

```
 $(window).resize(function(e) {
        alert('The window resize occurred!  Width: ' + $(window).width() + " Height: " + $(window).height());
        debugger;
        return false;
    }); 
```

在它解决了 window.resize 事件之后，JQueryMobile 立即决定将页面大小调整为不正确的高度。我可以说它是页面，因为我为每个元素添加了不同颜色的边框以查看是什么。在很多情况下，这种调整大小的操作会导致我的一半 GUI 溢出到 div 的底部下方，有时甚至使我的光标隐藏在 div 下。

理解它的最好方法是使用屏幕截图：

![window.resize() 触发页面调整大小](../Images/6e7d45ebc8604dfd94b123baf9efa7f3.png)

现在，我真的不希望有人对此有确切的答案。我只是在寻找调试技巧。我在 window.resize() 事件中添加了一个“调试器”语句，并尝试单步执行代码。我希望被引导到其他一些旨在调整页面大小的调整大小侦听器。如果我能找到它，那么当有人选择表单元素时，我可以暂时削弱它，然后重新启用模糊或方向更改的大小调整。问题是，我单步执行了每一行代码，并且在调整大小发生之前调试过程停止了。

这让我想知道除了 window.resize 是否还有其他事件被触发。所以我在下面添加了两行：

```
 document.addEventListener("throttledresize", function() { alert("throttledresize fired.") }, false);
    document.addEventListener("orientationchange", function() { alert("orientationchange fired.") }, false); 
```

然而，两人都没有被解雇。所以我有点卡住了。我有一种很好的感觉，我知道问题出在哪里，但我无法追查到根源。关于在哪里可以找到这个在 window.resize() 上调整页面大小的神秘代码的任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T01:47:47.883

我很高兴看到我没有疯！我很高兴地报告我已经实施了一个非常好的解决方案。以下是步骤，以防您也想这样做：

1) 进入 jquery.mobile-1.xxjs

2) 找到 $.mobile = $.extend() 并添加以下属性：

```
last_width: null,
last_height: null, 
```

3) 修改 getScreenHeight 使其工作如下：

```
getScreenHeight: function() {
    // Native innerHeight returns more accurate value for this across platforms,
    // jQuery version is here as a normalized fallback for platforms like Symbian

    if (this.last_width == null || this.last_height == null || this.last_width != $( window ).width())
    {
        this.last_height = window.innerHeight || $( window ).height();
        this.last_width = $(window).width();
    }
    return this.last_height;
} 
```

基本上这将阻止 jQuery 重新计算页面高度，除非宽度也发生变化。（即方向改变） 由于软键盘只影响高度，因此该方法将返回缓存值而不是修改后的高度。

我将创建一个单独的帖子来询问如何正确覆盖 $.mobile.getScreenHeight 方法。我尝试将下面的代码添加到一个单独的 JS 文件中，但它不起作用：

```
delete $.mobile.getScreenHeight;
$.mobile.last_width = null;
$.mobile.last_height = null;
$.mobile.getScreenHeight = function() 
{
   ... the code listed above
} 
```

它大部分时间都触发了，但也触发了原始功能。有点怪。我在这里发布了一个关于如何正确扩展 $.mobile 的单独主题：[Proper way to overide a JQuery Mobile method in $.mobile](https://stackoverflow.com/questions/12906541/proper-way-to-overide-a-mobile-in-jquery-mobile-method)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T07:12:30.787

我有一个类似的问题试试这个：

```
 $('#main-browse').bind("orientationchange", function(event) {
    //Put the page dimensions for example with minimum height property

  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-21T20:11:01.180

我在使用 JQuery Mobile 1.4 的 Cordova (3.x) 中遇到了同样的问题——所以库的作者不太可能解决这个问题。我尝试了许多不同的解决方案——但没有一个能真正解决它。最接近的候选者涉及绑定简单的处理程序，这些处理程序分别绑定到窗口和文档对象上的“throttleresize”和“pageshow”事件。

然而，我仍然失去了 UI 的“锁定”感觉，并且用户可以在键盘退出后将我的整个 UI 向上拖动。确实页眉和页脚没有移动，但是我的背景和主要内容区域现在可以拖动了，并且出现了滚动条。如果您正在尝试那种本机应用程序的感觉，那是完全不可接受的......

所以我决定查看 Chrome/Safari firebug 并找出额外像素被添加到盒子模型的位置。奇怪的是，我注意到它根本没有改变高度，在我的情况下，它是活动页面上的填充。所以我从另一个 Stack 帖子中改编了一个解决方案：

```
function resetActivePageHeight() {
var aPage = $( "." + $.mobile.activePageClass ),
  aPagePadT = parseFloat( aPage.css( "padding-top" ) ),
  aPagePadB = parseFloat( aPage.css( "padding-bottom" ) ),
  aPageBorderT = parseFloat( aPage.css( "border-top-width" ) ),
  aPageBorderB = parseFloat( aPage.css( "border-bottom-width" ) );
aPage.css( "min-height", deviceInfo.height - aPagePadT - aPagePadB - aPageBorderT - aPageBorderB )
.css("top","0px").css("padding","0px");} 
```

然后我将它们绑定到设备准备好的文档和窗口事件。

```
 $( document ).bind( "pageshow", resetActivePageHeight );
  $( window ).bind( "throttledresize", resetActivePageHeight ); 
```

再说一次，虽然我想称赞，但我想我只是找到了另一个角度来理解别人的好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T14:56:22.533

转到您的 androidmanifest 文件并在活动中，更改或更新此值 android:windowSoftInputMode="adjustResize"

我知道adjustPan 会破坏页面，因此控件被隐藏。默认（未指定）可能没问题，这里还有其他选项。我认为如果不调整大小，它不会与 jqm 沟通显示 kb

所以让 jqm 保持原样，没有你的改变，顺便说一句，它会完成它的工作，我使用的是 cordova 2.2、jqm 1.2 和 jquery 1.8.2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-11T00:27:00.903

我遇到了一个问题，虚拟键盘会扩展视口，在下面显示内容（外部面板）。

我通过根据窗口高度设置css高度来解决：

```
$('#page').css('height', $(window).height()); 
```

# perl - `perl` 本身是否有手册页？

> ID：12879858
> 
> 赞同：6
> 
> 时间：2012-10-14T06:30:32.357
> 
> 标签：perl

我想知道是什么`perl -T`意思。

`man perl`说：

```
PERL(1)                 Perl Programmers Reference Guide          PERL(1)

NAME
  perl - The Perl 5 language interpreter

SYNOPSIS
  perl [ -sTtuUWX ]      [ -hv ] [ -V[:configvar] ]
       [ -cw ] [ -d[t][:debugger] ] [ -D[number/list] ]
       [ -pna ] [ -Fpattern ] [ -l[octal] ] [ -0[octal/hexadecimal] ]
       [ -Idir ] [ -m[-]module ] [ -M[-]'module...' ] [ -f ]  [ -C [number/list] ]  [ -S ]
       [ -x[dir] ]      [ -i[extension] ]
       [ [-e|-E] 'command' ] [ -- ] [ programfile ] [ argument ]... 
```

然后不解释这些命令行参数。

我在哪里可以找到这些命令行参数的手册页/perldoc？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T06:33:30.323

看一下`perldoc perlrun`（“如何执行 Perl 解释器”）：

> `-T`
> 
> 强制打开“污点”检查，以便您可以测试它们。通常这些检查仅在运行 setuid 或 setgid 时进行。对于代表您可能不一定信任的其他人运行的程序（例如 CGI 程序或您可能用 Perl 编写的任何 Internet 服务器），显式打开它们是一个好主意。详情请参阅`perlsec`。出于安全原因，Perl 必须很早就看到这个选项。通常这意味着它必须出现在命令行的早期或`#!`支持该构造的系统的行中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T06:34:23.620

从[perldoc](http://perldoc.perl.org/perlrun.html#Command-Switches)：

> -T
> 
> 打开“污点”，以便您可以测试它们。通常这些检查仅在运行 setuid 或 setgid 时进行。对于代表您可能不一定信任的其他人运行的程序（例如 CGI 程序或您可能用 Perl 编写的任何 Internet 服务器），显式打开它们是一个好主意。有关详细信息，请参见 perlsec。出于安全原因，Perl 必须很早就看到这个选项。通常这意味着它必须出现在命令行的早期或 #! 支持该构造的系统的行。

# jquery - Jquery Mobile 动态内容在页面刷新时丢失

> ID：12879862
> 
> 赞同：1
> 
> 时间：2012-10-14T06:31:06.430
> 
> 标签：jquery, mobile, dynamic, refresh

我有附加的代码。当我手动按 F5 刷新页面时，动态内容会丢失。刷新后如何保留列表 <foo> 内容？. 当我第一次加载页面时，我可以看到`<li>`foo 。

```
<?php
session_start();
 ?>
<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>jQuery Mobile Web App</title>
<link href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="http://code.jquery.com/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js" type="text/javascript"></script>
 </head> 
<body> 
<div data-role="page" id="page">
    <div data-role="header">
        <h1>Page One</h1>
    </div>
    <div data-role="content">    

        <ul class="Offline" data-role="listview" data-inset="true" data-divider-theme="c">
            <li class="Offlinediv" data-role="list-divider">Users Offline</li>
            <li><a href="#page2">Page Two</a></li>
        </ul>

<?php

 //********
 // Connect to the database  
 //  left join users users and users online .

 // while($column = mysql_fetch_array($data)) 
 $column['userid']='ABBM';  // hardcode for testing
 //{ 

 //user status not known

      if (!isset($_SESSION[$column['userid']])){
           $_SESSION[$column['userid']]='offline' ; 
   ?>
          <script>
          $(".Offline").append('<li class="<?php echo $column['userid'];?>"><a href="#page">foo</a></li>');
          $(".Offline").listview('refresh');
          </script>
     <?php

             } 
        //else statement 
        //the code is not complete  
// }

  ?>

    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>
</body>
</html> 
```

# caching - Windows Server App 结构缓存与企业库缓存

> ID：12879869
> 
> 赞同：0
> 
> 时间：2012-10-14T06:33:06.953
> 
> 标签：caching, distributed-caching

有人可以帮我理解/决定appfabric缓存和ent之间的哪个缓存库。库缓存块好不好？

以下是我的要求： 1\. 支持网络服务器场。2\. 能够存储多达 50 万个 .Net 对象列表

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:16:33.830

企业缓存块是本地或一级缓存解决方案，而 AppFabric 是分布式或二级缓存解决方案。您无法比较两者。

但是考虑到您的要求，我建议您使用二级缓存解决方案，因为它适用于服务器场，我认为是分布式环境。

可以缓存的 .NET 对象数量取决于每个对象的大小和总缓存大小。二级缓存中可以存储的对象数量没有限制。

# php - 如何将这个 PHP 数组结构变成多维树？

> ID：12879871
> 
> 赞同：0
> 
> 时间：2012-10-14T06:33:22.640
> 
> 标签：php, arrays, data-structures, recursive-datastructures

我有一个二维 PHP 数组，我需要将它变成一棵树。每个内部数组中的“路径”值是当前节点的枚举路径。（我从 Bill Karwin 关于 SQL 反模式的书中得到了这个想法）。

所以，我开始的数组看起来像这样：

```
array(
[1] => array('name' => 'Animals', 'path' => '1/'),
[2] => array('name' => 'Birds', 'path' => '1/3/'),
[3] => array('name' => 'Cockatoos', 'path' => '1/3/5/'),
[4] => array('name' => 'Fish', 'path' => '1/2/'),
[5] => array('name' => 'Kookaburras', 'path' => '1/3/4/')
) 
```

正如您可能已经收集到的，外部数组的索引是没有意义的。我只是在“名称”上按字母顺序对内部数组进行了排序，PHP 在外部数组上分配了数字索引。

就“路径”值而言，每条路径的最后一段是节点的伪 id，即 Animals 是节点 1，Birds 是节点 3。您可以看到完整路径描述了到给定的路径节点，例如，'Cockatoos' 的父级是 'Birds'，后者的父级是 'Animals'。

我想保持节点的字母顺序，但按它们的父级分组。换句话说，我想要一个看起来像这样的数组（按其自然顺序）：

```
[1]         => 'Animals'
[1][3]      => 'Birds'
[1][3][5]   => 'Cockatoos'
[1][3][4]   => 'Kookaburras'
[1][2]      => 'Fish' 
```

我计划递归地迭代它以打印树的可视化表示。

在尝试从一种类型的数组转换为另一种类型时，我的方法使用了递归、变量变量和正则表达式，但我一直遇到障碍。

另外，是否有我应该考虑的 SPL 数据结构或迭代器？

非常感谢！

编辑：对不起，应该提到树的深度是可变的。上面的例子有三个层次，但实际上会有更多。

金

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:23:02.540

由于使用了 Eval() 函数（代表评估），这将起作用，无论树的深度如何。但是字母表的排序还不能正常工作。因为父数组的索引保持不变，所以会混淆。但是至少你可以建立一棵树了:)

```
<?php
$a = array(
        array('name' => 'Animals', 'path' => '1/'), 
        array('name' => 'Birds', 'path' => '1/3/'), 
        array('name' => 'Eagles', 'path' => '1/3/3/'),
        array('name' => 'Cockatoos', 'path' => '1/3/5/'), 
        array('name' => 'Fish', 'path' => '1/2/'), 
        array('name' => 'Kookaburras', 'path' => '1/3/4/')
    );
Iterate($a);
$tree = Iterate($a);

var_dump($tree);

OneLevelDeeper($tree);
var_dump($tree);

function Iterate($ChildArray)
{
    $TreeArray;
    foreach($ChildArray as $Key => $Value)
    {
        //echo $Key.': '.$Value['name']."\r\n";
        $exp = explode('/', $Value['path']);
        $path;
        foreach($exp as $int)
        {
            if($int != "")
            {
                $path[] = $int;
            }
        }

        //Using Eval() function of PHP
        $BuildSourceToEvaluate = '$TreeArray';
        for($i=0; $i<(count($path)-1); $i++)
        {
            $BuildSourceToEvaluate .= '[$path['.$i.']]';
        }
        $BuildSourceToEvaluate .= '[] = $Value[\'name\'];';
        echo $BuildSourceToEvaluate."\r\n";
        Eval($BuildSourceToEvaluate);
        //print_r($path);
        /*
        switch(count($path))
        {
            case 0:
            break;
            case 1:
                $TreeArray[] = $Value['name']; 
                //$TreeArray[$path[0]] = $Value['name']; //Use this for unique paths and keeping hold of the last ID in the tree path
                //$TreeArray[$path[0]][] = $Value['name']; //Use this for non-unique tree paths
            break;
            case 2:
                $TreeArray[$path[0]][] = $Value['name']; 
                //$TreeArray[$path[0]][$path[1]] = $Value['name']; //Use this for unique paths and keeping hold of the last ID in the tree path
                //$TreeArray[$path[0]][$path[1]][] = $Value['name']; //Use this for non-unique tree paths
            break;
            case 3:
                $TreeArray[$path[0]][$path[1]][] = $Value['name'];
                //$TreeArray[$path[0]][$path[1]][$path[2]] = $Value['name']; //Use this for unique paths and keeping hold of the last ID in the tree path
                //$TreeArray[$path[0]][$path[1]][$path[2]][] = $Value['name']; //Use this for non-unique tree paths
            break;
        }
        */
        unset($path);
    }
    return $TreeArray;
}

function OneLevelDeeper(&$a)
{
    sort($a);
    foreach($a as $Key => $Value)
    {
        if(is_array($Value))
        {
            sort($a[$Key]);
            OneLevelDeeper($a[$Key]);
        }
    }
}

?> 
```

# c++ - 如何在 Fedora 中编译 sqlite3.c？

> ID：12879873
> 
> 赞同：3
> 
> 时间：2012-10-14T06:33:28.290
> 
> 标签：c++, sqlite, makefile, gnu

我在构建 sqlite3 合并时遇到了麻烦，就像我以前在 Windows 中那样，通过将源代码直接编译到我的程序中，这是我当前的 makefile

```
all:
    gcc -g -c sqlite3.c -o sqlite3.o
    g++ -g -c main.cpp -o main.o
    g++ -o test sqlite3.o main.o 
```

我的 main.cpp 文件：

```
#include "sqlite3.h"

int main(){
  //nothing
 return 0;
} 
```

这是我在编译时收到的错误：

```
sqlite.o: In function `pthreadMutexAlloc':
/home/kendal/c++/sqlite3/test/../lib/sqlite3.c:17910: undefined reference to
`pthread_mutexattr_init'
/home/kendal/c++/sqlite3/test/../lib/sqlite3.c:17911: undefined reference to
`pthread_mutexattr_settype'
/home/kendal/c++/sqlite3/test/../lib/sqlite3.c:17913: undefined reference to`pthread_mutexattr_destroy'
sqlite.o: In function    
`pthreadMutexTry':
/home/kendal/c++/sqlite3/test/../lib/sqlite3.c:18042: undefined reference to `pthread_mutex_trylock'
sqlite.o: In function `unixDlOpen': /home/kendal/c++/sqlite3/test/../lib/sqlite3.c:28164: undefined reference to `dlopen' 
sqlite.o: In function `unixDlError':
/home/kendal/c++/sqlite3/test/../lib/sqlite3.c:28178: undefined reference to `dlerror'
sqlite.o: In function `unixDlSym':
/home/kendal/c++/sqlite3/test/../lib/sqlite3.c:28204: undefined reference to `dlsym'
sqlite.o: In function `unixDlClose':
/home/kendal/c++/sqlite3/test/../lib/sqlite3.c:28209: undefined reference to `dlclose' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T06:55:05.620

您还必须链接到 pthreads 和 dl，这样做：

```
all:
  gcc -g -c sqlite3.c -o sqlite3.o
  g++ -g -c main.cpp -o main.o
  g++ -o test -pthread -ldl sqlite3.o main.o 
```

使用“-lpthread”与使用“-pthread”有点不同，“-lpthread”表示链接到 pthread 库，而“-pthread”表示 g++ 将为您选择具有 pthread 接口的适当线程库。这就是为什么您应该更喜欢使用“-pthread”的原因。

添加“-ldl”意味着您链接到“dl”库，该库包含 dlsym、dlopen 等。

# class - 如何判断一个对象是否是一个类的实例

> ID：12879877
> 
> 赞同：40
> 
> 时间：2012-10-14T06:34:18.543
> 
> 标签：class, dart, dart-mirrors

在 Dart 语言中，如何确定一个对象是否属于某个类？

我正在寻找类似以下的事情：

```
if (someObject.class.toString() == "Num") {
    ...
} 
```

什么是返回值类型？它必须是一个字符串吗？

* * *

镜像库一直在上下波动，现在似乎正在快速变化，因为我发现的一件事根本没有如图所示。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-14T10:42:57.157

最近`Object`得到了`runtimeType`吸气剂。所以现在，我们不仅可以将对象的类型与另一种类型进行比较，还可以实际获取对象的*类名*。

如：

```
myObject.runtimeType.toString() 
```

此外，在当前版本的 Dart 中，您可以跳过该`toString`操作，直接将`runtimeType`对象与目标类型进行比较：

```
myObject.runtimeType == int 
```

或者

```
myObject.runtimeType == Animal 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-10-14T06:47:07.590

*   通过使用`is`and`is!`运算符，如下所示：

    ```
    if (someObject is T) 
    ```

    从[文档](https://www.dartlang.org/guides/language/language-tour#type-test-operators)中：

    > 和运算`is`符`is!`对于检查类型很方便。如果实现了 指定的接口，则结果 `obj is T`为真。例如，总是正确的。`obj``T``obj is Object`

*   使用[Mirrors API](http://api.dartlang.org/docs/continuous/dart_mirrors.html)（请参阅[此示例](http://blog.dartwatch.com/2012/06/dartmirrors-reflection-api-is-on-way.html)）：

    ```
    Expect.equals('T', someObject.simpleName) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-15T20:37:31.673

这是一个带有解决方案的简单解释。

你有：

`Object obj =t1`;
其中`t1`是类 T 的对象。

而且您还有其他对象 T 称为`t`。

`T t = new T()`;

如何检查是否`obj`是同一类型的`t`？

解决方案：

```
if(obj is t)
     print('obj is typeof t')
   else print('obj is not typeof t') 
```

# directx - 如何使用 DirectX 从后台缓冲区获取桌面的屏幕截图

> ID：12879880
> 
> 赞同：5
> 
> 时间：2012-10-14T06:34:26.310
> 
> 标签：directx, screenshot, desktop, capture, directx-9

我询问[了如何在 DirectX 中截屏，](https://stackoverflow.com/questions/12859894/the-desktop-capture-with-directx-does-not-work)并回答了“使用 GetFrontBufferData()”。[但是， MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174388%28v=vs.85%29.aspx)中描述了“此功能非常慢，按设计进行，不应在任何性能关键路径中使用” 。

当我向其他人询问措施时，“将后台缓冲区的数据传输到系统内存”得到了回答。但是，我找不到具体的方法。

这是一个失败的例子。请让我知道正确的代码。

```
#include <stdio.h>
#include <Windows.h>
#include <d3d9.h>
#include <d3dx9tex.h>

void main()
{
    CoInitialize(NULL);

    HWND hwnd = GetDesktopWindow();

    LPDIRECT3D9 d3d9;
    D3DDISPLAYMODE ddm;

    d3d9 = Direct3DCreate9(D3D_SDK_VERSION);
    d3d9->GetAdapterDisplayMode(D3DADAPTER_DEFAULT,&ddm);

    D3DPRESENT_PARAMETERS d3dpp;
    ZeroMemory(&d3dpp,sizeof(D3DPRESENT_PARAMETERS));
    d3dpp.Windowed = TRUE;
    d3dpp.SwapEffect = D3DSWAPEFFECT_COPY;
    d3dpp.BackBufferFormat = D3DFMT_UNKNOWN;
    d3dpp.BackBufferCount = 1;
    d3dpp.BackBufferWidth = ddm.Width;
    d3dpp.BackBufferHeight = ddm.Height;
    d3dpp.MultiSampleType = D3DMULTISAMPLE_NONE;
    d3dpp.MultiSampleQuality = 0;
    d3dpp.EnableAutoDepthStencil = TRUE;
    d3dpp.AutoDepthStencilFormat = D3DFMT_D16;
    d3dpp.hDeviceWindow = hwnd;
    d3dpp.Flags = D3DPRESENTFLAG_VIDEO;
    d3dpp.FullScreen_RefreshRateInHz = D3DPRESENT_RATE_DEFAULT;
    d3dpp.PresentationInterval = D3DPRESENT_INTERVAL_DEFAULT;

    LPDIRECT3DDEVICE9 dev;
    d3d9->CreateDevice(D3DADAPTER_DEFAULT,D3DDEVTYPE_HAL, hwnd, D3DCREATE_SOFTWARE_VERTEXPROCESSING ,&d3dpp, &dev);

    /* Deprecation
    IDirect3DSurface9* surface = NULL;
    dev->CreateOffscreenPlainSurface(ddm.Width, ddm.Height, D3DFMT_A8R8G8B8, D3DPOOL_SYSTEMMEM, &surface, NULL);
    dev->GetFrontBufferData(0, surface);
    D3DXSaveSurfaceToFile(L"D:\\test.bmp", D3DXIFF_BMP, surface, NULL, NULL);
    */

    // Transfer the data of a back buffer to the system memory
    IDirect3DSurface9* surface = NULL;
    dev->CreateOffscreenPlainSurface(ddm.Width, ddm.Height, D3DFMT_A8R8G8B8, D3DPOOL_SCRATCH, &surface, NULL);
    LPDIRECT3DSURFACE9 back = NULL;
    dev->SetRenderTarget(0, surface);
    dev->GetBackBuffer(0, 0, D3DBACKBUFFER_TYPE_MONO, &back);
    dev->Clear(0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB(0,0,127), 1.0, 0 );
    dev->BeginScene();
    dev->StretchRect(surface, NULL, back, NULL, D3DTEXF_NONE);
    dev->EndScene();
    dev->Present(0,0,0,0);
    D3DXSaveSurfaceToFile(L"D:\\test.bmp", D3DXIFF_BMP, back, NULL, NULL);

    if(back) back->Release();

    dev->Release();
    d3d9->Release();

    CoUninitialize();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:53:17.220

您无法从后台缓冲区中获取数据，函数 GetBackBuffer 仅检索后台缓冲区的指针，而不是其中的数据。

*   前缓冲器。由图形适配器转换并显示在监视器上的内存矩形。在 Direct3D 中，应用程序从不直接写入前端缓冲区。
*   后缓冲器。应用程序可以直接写入的内存矩形。后台缓冲区永远不会直接显示在监视器上。

这意味着您在桌面上看到的内容存在于前端缓冲区中。

# jquery - 仅将输入附加到当前悬停的 li

> ID：12879881
> 
> 赞同：0
> 
> 时间：2012-10-14T06:34:53.563
> 
> 标签：jquery, list, hover

我试图在当前悬停在 ul 上显示一个输入字段。这种代码类型的作品：

```
$('ul').hover(function(){
  $(this).append('<div style="display: block;"><input type="text"> <button>Knapp></button></div>');
},
function () {
      $(this).find("input:last").fadeOut('fast');
      $(this).find("button:last").fadeOut('fast');
    }

); 
```

但它也为所有父母显示了一个输入字段：/

我试图用 find 从父母那里删除 div

```
 $(this).parents().find("input:last").fadeOut('fast'); 
```

但当然，该代码也可以找到当前悬停的 ul 中的那个...

![在此处输入图像描述](../Images/2c9df42f8bd2445839467e99d8f5ae93.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:37:16.013

您已附加到 ul，因此它将适用于所有 ul，因此请尝试指定要附加的 ul

更简单的方法是在 ul中添加`id`or`class`

```
$('#one').hover(function(){
  $(this).append('<div style="display: block;"><input type="text"> <button>Knapp></button></div>');
},
function () {
      $(this).find("input:last").fadeOut('fast');
      $(this).find("button:last").fadeOut('fast');
    }

); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:43:36.440

这会发生，因为

孩子们是`ul`他们的一部分，`ul`所以`input`将附加到他们身上

你可以使用条件

喜欢`hasClass`或喜欢`ul>li`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:59:08.430

感谢您的输入，我稍微改变了我的方法，现在它运行良好。

我在ever ul 的末尾添加了一个输入字段。用 css 隐藏它 使它只有当前悬停的有类活动（从父母和孩子中删除类），并且只显示 ul 的直接孩子的 div 类活动:)

```
$('ul').hover(function(){
      $(this).addClass('active');
      $(this).parents().removeClass('active');
      $(this).children().removeClass('active');
    }, function(){
      $(this).removeClass('active');
    }); 
```

HTML

```
<ul class="tasks tasks-20">
<div><input type="text"> <button>Add main task</button></div></ul>
</li>
<div><input type="text"> <button>Add goal</button></div></ul><ul class="goals"><h2>The public</h2>

<li><span>: :</span>Follow our journey
<ul class="tasks tasks-24">
<div><input type="text"> <button>Add main task</button></div></ul>
</li>
<div><input type="text"> <button>Add goal</button></div></ul> 
```

CSS

```
 ul.active>div{
            display: block;
    } 
```

# iphone - 如何解决objective-c中的命名空间冲突？

> ID：12879883
> 
> 赞同：3
> 
> 时间：2012-10-14T06:35:14.783
> 
> 标签：iphone, objective-c

> **可能重复：**
> [解决 Objective-C 命名空间冲突的最佳方法是什么？](https://stackoverflow.com/questions/178434/what-is-the-best-way-to-solve-an-objective-c-namespace-collision)

我已经为 iphone 开发了一个第三方动态库，依赖于 Mobile Substrate。问题是如果某个APP有一个名为“Class1”的Obj-C类，而我的dylib也有一个名为“Class1”的类，无法保证运行时会使用哪个类。有什么解决方案可以保留类名“Class1”并解决命名空间问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:38:06.540

在 Objective-C 中不存在命名空间的概念，源文件只是一个接一个地导入，如果使用通用名称作为类名，这当然会导致名称冲突。

在 Objective-C 中解决冲突问题的一个好方法是采用前缀来区分你的类名和其他类名，这是 Apple 自己已经使用的技术，让我们想想数组类，它被称为 NSArray，为什么？

这背后有一个特定的原因：

*   **N** : 识别**下一个**
*   **S** : 识别**步骤**
*   **数组**：标识数据结构的名称

**NextStep**是创建 Foundation 框架的公司的名称，也是 90 年代中期被 Apple 收购的公司。

例如，我为我在库中打包的类使用不同的前缀，我使用：**AleArray**我名字的前 3 个字符，后跟数据结构的名称，您可以选择自己的前缀并继续使用.. .

当然，使用简单前缀发生冲突的概率仍然高于使用命名空间（通常使用反向域名表示法），但在大多数情况下就足够了。

# mysql - MySQL 查询在 SQL Server Express 中无法运行

> ID：12879885
> 
> 赞同：0
> 
> 时间：2012-10-14T06:35:43.137
> 
> 标签：mysql, sql-server-2012-express

我正在使用 Microsoft SQL Server 2012 Express。MySQL的以下代码在运行查询时给了我错误，谁能指导我如何纠正它？

```
/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
create database  /*!32312 IF NOT EXISTS*/ `android_api`/*!40100 DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci */;
use `android_api` ;/** Selecting Database **/
DROP TABLE IF EXISTS `users`;
/** Creating Users Table **/
create table `users`(
   uid int(11) primary key auto_increment,
   unique_id varchar(23) not null unique,
   name varchar(50) not null,
   email varchar(100) not null unique,
   encrypted_password varchar(80) not null,
   salt varchar(10) not null,
   created_at datetime,
   updated_at datetime null
)ENGINE=InnoDB AUTO_INCREMENT=877888 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

DROP TABLE IF EXISTS `events`;
/** Creating Users Table **/
create table `events`(
   eid int(11) primary key auto_increment,
   unique_id varchar(23) not null unique,
   title varchar(50) not null,
   date varchar(50) not null,
   time varchar(50) not null,
   location varchar(100) not null,
   person varchar(20) not null,
   phone varchar(20) not null,
   budget varchar(20) not null,
   comments varchar(50) not null,
   resource varchar(150) not null,
   uuid varchar(23) not null,
   created_at datetime,
   updated_at datetime null
)ENGINE=InnoDB AUTO_INCREMENT=877888 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:46:15.750

MySQL 和 SQL Server 都是使用 SQL 作为交互语言的关系型数据库，但它们并不是 100% 兼容的。

您发布的查询包括 MySQL 特定功能，例如 auto_increment 主键和 InnoDB 数据库引擎。

如果您使用的是 SQL Server，您还可以在此处下载 SQL 2012 Management Studio Express：http: [//www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)这将为您提供一个用于管理的 GUI你的 SQL 和创建你的表。完成这些设置后，您可以查看生成的 SQL 以了解 MS SQL 的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:49:21.583

我假设您正在将数据库从 MySQL 迁移到 SQL Server Express。

如果您还没有尝试过，请使用设置为 mssql 的兼容参数对您的数据库进行 mysqldump。

```
mysqldump --compatible=mssql 
```

这应该为您提供在 SQL Server Express 上运行的正确语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:24:56.577

```
create database android_api;
GO
use android_api;
GO
create table users(
   uid int identity(877888,1) primary key,
   unique_id varchar(23) not null unique,
   name varchar(50) not null,
   email varchar(100) not null unique,
   encrypted_password varchar(80) not null,
   salt varchar(10) not null,
   created_at datetime,
   updated_at datetime null
);
GO
create table events(
   eid int identity(877888,1) primary key,
   unique_id varchar(23) not null unique,
   title varchar(50) not null,
   date varchar(50) not null,
   time varchar(50) not null,
   location varchar(100) not null,
   person varchar(20) not null,
   phone varchar(20) not null,
   budget varchar(20) not null,
   comments varchar(50) not null,
   resource varchar(150) not null,
   uuid varchar(23) not null,
   created_at datetime,
   updated_at datetime null
);
GO 
```

# heroku - Heroku ActiveRecord::StatementInvalid 上的 Rails (PGError: SSL error: cert already in hash table

> ID：12879892
> 
> 赞同：1
> 
> 时间：2012-10-14T06:36:11.830
> 
> 标签：heroku, ruby-on-rails-3.2

我用设计构建`Rails3.2`应用程序并部署在heroku上。有没有人有任何解决方案来解决以下问题？登录操作后，出现以下错误并响应`http status 500`。

```
2012-10-14T05:29:08+00:00 app[web.1]: : SELECT  "users".* FROM "users"  WHERE   
 (lower(username) = '***' OR lower(email) = '***') LIMIT 1):
2012-10-14T05:29:08+00:00 app[web.1]:   app/models/user.rb:23:in    
 find_for_database_authentication'
2012-10-14T05:29:08+00:00 app[web.1]:
2012-10-14T05:29:08+00:00 app[web.1]: ActiveRecord::StatementInvalid (PGError: SSL
 error: cert already in hash table
2012-10-14T05:29:08+00:00 app[web.1]:    
 app/controllers/users/sessions_controller.rb:9:in `create'
2012-10-14T05:29:08+00:00 app[web.1]:
2012-10-14T05:29:08+00:00 heroku[router]: POST agile-cliffs-   
 6123.herokuapp.com/users/sign_in dyno=web.1 queue=0 wait=0ms service=45ms status=500 
 bytes=643 
```

实际上，设计注册功能工作正常，但登录不起作用。此问题仅在生产中发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:14:02.453

编辑我之前的非答案：我们终于找到了问题的核心！

我们正在使用 ruby​​-openid-apps-discovery gem，因为我们的应用程序已与 GApps Marketplace 集成。我们以原始形式使用 gem，但如果您使用的是 OmniAuth 并启用了 google_apps 策略，那么您也在使用它。

它归结为[http://code.google.com/p/ruby-openid-apps-discovery/source/browse/trunk/lib/gapps_openid.rb的第 255 行](http://code.google.com/p/ruby-openid-apps-discovery/source/browse/trunk/lib/gapps_openid.rb)

附加 CA 证书 (add_file) 的加载会污染 OpenSSL，并且当前的 Postgres SSL 连接已损坏

```
@@store = OpenSSL::X509::Store.new
@@store.set_default_paths
@@store.add_file(ca_bundle_path) 
```

您唯一的选择是重新连接到 Postgres 或猴子修补 store() 方法并删除对 add_file 的调用。Heroku dyno 已经拥有库存 CA 证书，显然，这足以进行 GApps OpenID 发现。

仅供参考，我尝试使用仅启用 OmniAuth 和 google_apps 策略的空白 Rails 应用程序对这个问题进行无尘室重现，但无法重现 .. 所以也许它是这个 ruby​​-openid-apps-discovery gem 和另一个的组合我们的应用程序中的组件也在玩 OpenSSL 游戏以导致问题.. 我会针对这个 gem 提交一个错误，但该项目看起来大部分已经死了，因为我不能干净地重现问题，我不能说 100%肯定是它的错。

# c# - request.form[""] 无法在 C# 中获取值

> ID：12879896
> 
> 赞同：0
> 
> 时间：2012-10-14T06:36:36.403
> 
> 标签：c#, javascript, asp.net

```
<script type="text/javascript">
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(getPostion);
        }
    }

    function getPostion(position) {
        var currentLat = position.coords.latitude;
        var currentLon = position.coords.longitude;
        alert(currentLat);
        document.forms[0].lat.value = "123";
        alert(document.forms[0].lat.value);
        document.forms[1].lon.value = currentLon;
        alert(document.forms[1].lon.value);
    }
</script>
<input type="hidden" name="lat">
<input type="hidden" name="lon">

<asp:TextBox ID="status" runat="server" CssClass="text" MaxLength="100" Columns="40" TextMode="MultiLine"></asp:TextBox>
<asp:Button ID="textSubmit" runat="server" CssClass="textSubmit" Text="submit" OnClientClick="getLocation()" OnClick="Post" />

protected void Post(object sender, EventArgs e)
    {
        string latitude = Request.Form["lat"].ToString();
        string longitude = Request.Form["lon"].ToString();

        string text = status.Text.Trim().ToString();//breakpoint here
        string connectionString = WebConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString;
        SqlConnection con = new SqlConnection(connectionString);
        try
        {
            con.Open();
            SqlCommand cmd = new SqlCommand("INSERT INTO [dbo].[Locations] VALUES('jshmqjw'," + Convert.ToDouble(latitude) + ", " + Convert.ToDouble(longitude) + ",CONVERT(varchar(100), GETDATE(), 20), 'text' )", con);
            cmd.ExecuteNonQuery();
        }
        catch (Exception err)
        {
            Response.Write("<script>alert('Error reading The database. " + err.Message + "') </script>");
        }
        finally
        {
            con.Close();
        }
    } 
```

![在此处输入图像描述](../Images/67636b90ebb43bbfa8a9482a48c1155d.png) 我想将变量从 javascript 发送到 C#。我首先使用隐藏字段来存储值，然后在 C# 中使用 request.form["name"] 来获取值。但是在我在一行之后设置断点后，结果发现变量为空。谁能帮忙！~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:42:48.793

添加 runat="server":

```
<input type="hidden" runat="server" id="lat" name="lat">
<input type="hidden" runat="server" id="lon" name="lon"> 
```

和

```
 string latitude = lan.Value;
 string longitude = lon.Value; 
```

JavaScript 代码：

```
function getPostion(position) {
    var currentLat = position.coords.latitude;
    var currentLon = position.coords.longitude;
    alert(currentLat);
    document.getElementById("<%=lan.ClientID%>").value = "123";
    alert(document.getElementById("<%=lan.ClientID%>").value);
    document.getElementById("<%=lon.ClientID%>").value = currentLon;
    alert(document.getElementById("<%=lon.ClientID%>").value);
} 
```

此外，您可以使用：

```
<asp:HiddenField /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T07:44:33.557

这应该可以解决您的问题：

将您的 html 隐藏字段替换为：

```
<asp:HiddenField ID="lat" runat="server"/>
<asp:HiddenField ID="lon" runat="server"/> 
```

然后在你的 getPosition()-

```
document.getElementById('<%= lat.ClientID %>').value= currentLat ;
document.getElementById('<%= lon.ClientID %>').value= currentLon ; 
```

在后面的代码中：

```
string latitude = lat.Value;
string longitude = lon.Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:45:23.260

这可能是因为您将 javascript 放在了目标代码之上。

如果您使用“document.getElement...”引用标签元素，则该标签元素必须已经呈现才能找到它。

要么在定位元素之后放置代码，要么使用准备好的 Jquery 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T07:28:04.137

只需添加相应的`name`属性

```
<input type="hidden" id="lat" name="lat">
<input type="hidden" id="lon" name="lon"> 
```

# c# - 使用相同方法的并发线程

> ID：12879897
> 
> 赞同：3
> 
> 时间：2012-10-14T06:36:55.697
> 
> 标签：c#, multithreading, stack

如果我产生各种线程，并告诉他们都使用相同的方法：

```
internal class Program {

    private static DoSomething() {

        int result = 0;
        Thread.Sleep(1000);
        result++;
        int ID = Thread.CurrentThread.ManagedThreadId;
        Console.WriteLine("Thread {0} return {1}", ID, result);
    }

    private static Main() {

        Thread[] threads = new Thread[50];

        for (int i = 0; i < 50; i++)
            threads[i] = new Thread(DoSomething);

        foreach (Thread t in threads)
            t.Start();
    }
} 
```

所有线程会共享同一个堆栈吗？当我运行程序时，所有线程都返回 1，所以我猜答案是否定的，但这是否意味着 CLR 在内存中制作了不同的方法副本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T09:22:06.020

> 这是否意味着 CLR 在内存中制作方法的不同副本？

不会。它有助于理解 .NET 程序中的内存是如何分区的。我将跳过很多次要的实现细节来绘制大图。您可以将内存细分为以下类别：

*   垃圾收集堆。*对象存储在那里，您可以使用new*运算符从中分配存储空间（结构除外）。它根据需要增长，用完它会产生 OutOfMemoryException。

*   加载程序堆。AppDomain 的任何静态内容都存储在那里。许多小部分，但重要的是静态变量、类型信息（通过反射检索的那种）和即时编译代码的存储。它根据需要增长，使用太多很难做到。

*   堆栈。处理器的核心数据结构。不在 C# 中抽象它是 C# 产生快速程序的一个重要原因。堆栈存储调用方法时的返回地址、传递给方法的参数和方法的局部变量。默认情况下，堆栈为 1 兆字节且不能增长。如果您使用过多，您的程序会以该站点的名称失败，这是一个严重且难以诊断的故障，因为处理器无法继续执行代码。

一个线程可以查看所有这些内存类别，最后一个类别有所不同。每个线程都有自己的堆栈。这就是为什么它能够独立于其他线程运行自己的方法的原因。然而，它使用与任何其他线程完全相同的代码，加载器堆是共享的。假设多个线程执行相同的方法。它共享相同的垃圾收集堆和静态变量。这使得编写线程代码变得*困难*，您必须确保线程不会踩到其他线程也使用的对象和静态变量。*lock*关键字的一个重要原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T06:43:02.680

不，每个线程都有自己的堆栈。而且只有一个 DoSomething。每个线程都可以从任何地方访问任何类型的数据，是否安全这是另一个问题。将 DoSomething 视为只是数据，一个整数，每个线程都会递增它。现在想象 DoSomething 是一个函数指针，并且您将它的地址（本质上是一个 int）传递给每个线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:19:13.487

要回答您的问题，不，内存中没有该方法的多个副本。只有一个副本和多个线程通过它运行。甚至内存中的对象也在多个线程之间共享。这就是导致内存损坏的原因。

通过[这个](http://msdn.microsoft.com/en-us/library/aa720724(v=vs.71).aspx)来更好地了解线程。

[编辑：另外，这里](https://stackoverflow.com/questions/1665419/do-threads-share-the-heap?rq=1)有类似的问题。

# ios - 集合视图控制器单元格间距

> ID：12879898
> 
> 赞同：3
> 
> 时间：2012-10-14T06:37:11.253
> 
> 标签：ios, ios6, uicollectionview

如何删除collectionview上单元格之间的填充？(iOS 6) 我有一个非常小的单元，我查看了约束，但看不到要更改的内容。

发生的事情是单元格之间有大约 1/4 英寸的黑色空间（缩略图）。我想要每行之间大约 1 毫米的空间和 4 个。我设法找出每行 4 个的东西，但它们必须很小，以至于它们之间有很大的空间。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T18:02:32.850

我认为这取决于您如何创建 UICollectionViewController 来启动。我个人总是使用故事板方法。如果你已经这样做了，选择“集合视图”然后打开大小检查器并调整单元格/行之间的最小间距。还要确保，如果您的单元格中有图像/单元格的大小相同，否则它也会引入空格。如果您通过代码执行所有操作，请在创建 Collection View 对象时调整这些值。

# objective-c - 在 NSArrays 中保存 NSDictionary 实例的问题

> ID：12879902
> 
> 赞同：0
> 
> 时间：2012-10-14T06:37:29.237
> 
> 标签：objective-c, nsmutablearray, nsarray, nsdictionary

我正在尝试复制 iOS Safari 书签系统。我有单独的书签在工作，而主集中的文件夹也在工作。我需要帮助，以便我可以在其他文件夹中拥有无限的文件夹。基本上，我现在的代码只能保存到 1 个文件夹中，所以主文件夹 → 文件夹 1 → 文件夹 2，但不能超过那个。创建文件夹 1 后，我必须退出应用程序才能保存其中的任何内容。Xcode 给了我这个错误：

```
WebKit discarded an uncaught exception in the webView:shouldInsertText:replacingDOMRange:givenAction: delegate: <NSInternalInconsistencyException> -[__NSCFArray insertObject:atIndex:]: mutating method sent to immutable object 
```

这是文件夹字典的样子：

```
NSDictionary *NewFolderDict = @{
    @"Title" : NewFolderTitle,
    @"isFolder" : @YES ,
    @"Bookmarks" : @[],
    @"UUID" : [self uuidString]
}; 
```

`Title`是条目的名称，`isFolder`是条目是否为文件夹，书签是书签数组或多个文件夹。

整个主线`NSArray`在`NSUserDefaults`.

这就是我现在保存文件夹的方式。当用户在视图控制器中按下键盘上的完成按钮时，将调用此代码：

```
-(void)addDictionary:(NSDictionary *)FolderDictionary toFolder:(NSMutableDictionary*)toFolder {

    NSMutableArray *bookmarks = [[NSMutableArray alloc] initWithArray:[[NSUserDefaults standardUserDefaults] arrayForKey:@"bookmarks"]];
    for (int i=0; i<[bookmarks count]; i++) {

        NSMutableDictionary *Bookmark = (NSMutableDictionary *)[bookmarks objectAtIndex:i];

        if ([[Bookmark objectForKey:@"isFolder"] boolValue] == YES) {

            if ([[Bookmark objectForKey:@"UUID"] isEqualToString:[toFolder objectForKey:@"UUID"]]) {
                NSLog(@"MATCH");
                NSMutableArray *test = (NSMutableArray *)[Bookmark objectForKey:@"Bookmarks"];
                [test addObject:FolderDictionary];

            }

        }

    }
    NSLog(@"%@",bookmarks);
    [[NSUserDefaults standardUserDefaults] setObject:bookmarks forKey:@"bookmarks"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    [bookmarks release];

} 
```

这只是检查它是否是一个文件夹，以及它是否是要添加到的正确文件夹。我怎样才能让它 100% 的时间工作，并保存它，让它没有限制它可以放下多少个文件夹，比如 10 个文件夹堆栈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:12:41.587

您的问题是，当从用户默认值中获取数据时，它们是不可变的——即它们是`NSArray`or的实例`NSDictionary`，而不是`NSMutableArray`or的实例`NSMutableDictionary`。您可能想要克隆感兴趣的对象，即调用`mutableCopy`它们并在您的数据结构中替换它们。

# recursion - 二叉树 - 计算级别上的节点

> ID：12879903
> 
> 赞同：6
> 
> 时间：2012-10-14T06:37:32.400
> 
> 标签：recursion, binary-search-tree

我正在编写一个二叉树类，我被困在一个 levelCount 方法上，我需要计算树的一个级别上的节点数。类和方法如下所示：

```
public class ConsTree<T> extends BinaryTree<T>
{
   BinaryTree<T> left;
   BinaryTree<T> right;
   T data;

   public int levelCount(int level) 
   {
   }
} 
```

所以这个想法是每棵树的左边都有一棵树，右边有棵树，还有数据。有一个抽象类二叉树和子类 ConsTree 和 EmptyTree。

我认为我需要使用广度优先搜索并在达到该级别后计算节点数，但我被困在如何开始。这里的任何指导都会有所帮助。我可以提供任何其他必要的信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T06:49:05.187

这是一般方法。

您完全按照通常的方式遍历树（深度优先，按顺序），但您也只需传递所需的和实际的级别，伪代码如下：

```
def getCountAtLevel (node, curr, desired):
    # If this node doesn't exist, must be zero.
    if node == NULL: return 0

    # If this node is at desired level, must be one.
    if curr == desired: return 1

    # Otherwise sum of nodes at that level in left and right sub-trees.
    return getCountAtLevel (node.left,  curr+1, desired) +
           getCountAtLevel (node.right, curr+1, desired)

#######################################################################
# Get number of nodes at level 7 (root is level 0).
nodesAtLevel7 = getCountAtLevel (rootNode, 0, 7) 
```

它实际上并没有遍历*整个*树，因为一旦达到所需的级别，它就可以忽略其下的所有内容。这是一个完整的 C 程序，它显示了这一点：

```
#include <stdio.h>

typedef struct _sNode { struct _sNode *left, *right; } tNode;

// Node naming uses (t)op, (l)eft, and (r)ight.
tNode TLLL = {NULL,  NULL    }; // level 3
tNode TLLR = {NULL,  NULL    };
tNode TRLL = {NULL,  NULL    };
tNode TRLR = {NULL,  NULL    };
tNode TRRR = {NULL,  NULL    };
tNode TLL  = {&TLLL, &TLLR   }; // level 2
tNode TRL  = {&TRLL, &TRLR   };
tNode TRR  = {NULL,  &TRRR   };
tNode TL   = {&TLL,  NULL    }; // level 1
tNode TR   = {&TRL,  &TRR    };
tNode T    = {&TL,   &TR     }; // level 0 (root)

static int getCAL (tNode *node, int curr, int desired) {
    if (node == NULL) return 0;
    if (curr == desired) return 1;
    return getCAL (node->left,  curr+1, desired) +
           getCAL (node->right, curr+1, desired);
}

int main (void) {
    for (int i = 0; i < 5; i++) {
        int count = getCAL(&T, 0, i);
        printf ("Level %d has %d node%s\n", i, count, (count == 1) ? "" : "s");
    }
    return 0;
} 
```

它构建以下形式的树（其中`T`表示顶部，`L`是左分支，`R`是右分支）：

```
 ______T______               (1 node)
           /             \
         TL               TR            (2 nodes)
        /                /  \
     TLL              TRL    TRR        (3 nodes)
    /   \            /   \      \
TLLL     TLLR    TRLL     TRLR   TRRR   (5 nodes)

                                        (0 nodes) 
```

如果您编译并运行该代码，您会看到它在每个级别提供了正确的节点数：

```
Level 0 has 1 node
Level 1 has 2 nodes
Level 2 has 3 nodes
Level 3 has 5 nodes
Level 4 has 0 nodes 
```

# android - 当用户尝试返回时，Android 对话框不会完全消失

> ID：12879904
> 
> 赞同：0
> 
> 时间：2012-10-14T06:37:53.280
> 
> 标签：android, android-activity, android-dialog

我使用以下代码段创建了一个对话活动。我为这个活动使用了一个半透明的主题。所以它看起来很整洁。

```
public class DialogActivity extends Activity {
AlertDialog alertDialog;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent intent = getIntent();
    AlertDialog alertDialog = new AlertDialog.Builder(this).create();
    alertDialog.setTitle("Title");
    alertDialog.setMessage("Body");
    alertDialog.setIcon(R.drawable.ic_launcher);
    aleratDialog.setButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) { 
            DialogActivity.this.finish();
        }
    });

    alertDialog.show();
}

@Override
protected void onPause() {
    if(alertDialog!=null) {alertDialog.dismiss();}
    super.onPause();

}

@Override
protected void onStop() {
    if(alertDialog!=null) {alertDialog.dismiss();}
    super.onStop();

}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        finish();
    }
    return super.onKeyDown(keyCode, event);
}

} 
```

当用户单击“后退”按钮时，我遇到了麻烦。当用户这样做时，活动仍然停留在前台。当用户尝试返回时，我尝试覆盖`onKeyDown`要调用的方法，`finish()`但这没有帮助。

注意：当我第一次按下时不会调用 onBackPressed 或 onKeyDown 方法。（ActionBar 停留）我必须再次按下它才能到达那里，然后活动实际上消失了

我认为这与我的清单条目有关

```
<activity
        android:name=".DialogActivity"
        android:launchMode="singleInstance"
        android:noHistory="true"
        android:label="@string/app_name"
        android:configChanges="orientation"
        android:theme="@android:style/Theme.Holo.Dialog" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:09:16.397

您正在做的是创建一个对话框（DialogActivity），并从中打开另一个带有警报构建器的对话框。所以你得到 2 个对话框，单击返回会删除警报对话框，但不会删除 DialogActivity。为什么需要DialogActivity？为什么不从呼叫活动中打开警报？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-27T13:11:30.287

您可以使用 EventBus 来监听来自另一个活动的 DialogActivity 事件。或者，您可以实现接口来监听。

EventBus(GreenRobot) 示例：

[https://github.com/greenrobot/EventBus](https://github.com/greenrobot/EventBus)

[https://greenrobot.github.io/EventBus/](https://greenrobot.github.io/EventBus/)

[http://code.tutsplus.com/tutorials/quick-tip-how-to-use-the-eventbus-library--cms-22694](http://code.tutsplus.com/tutorials/quick-tip-how-to-use-the-eventbus-library--cms-22694)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:40:18.537

当您在 onCreate() 中调用对话框时，对话框将位于前台。

所以尝试在 onKeyDown 方法中完成对话框 onBackPressed。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T06:56:12.360

尝试使用

```
public void onBackPressed() {
    if(alertDialog!=null) 
    alertDialog.dismiss();
    DialogActivity.this.finish();
    super.onBackPressed();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-27T12:41:03.393

改变这个

`android:launchMode="singleInstance"`

至

`android:launchMode="singleTask"` 或者 `android:launchMode="singleTop"`

# android - 如何滚动自定义listview android

> ID：12879905
> 
> 赞同：0
> 
> 时间：2012-10-14T06:37:58.177
> 
> 标签：android

我有一个无法滚动的自定义列表视图。我只能用 tracball 滚动它，但我想用手滚动它。请帮助我，谢谢listview：

```
<LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        > 
 <TextView 
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:id="@+id/setting_text_time1_alarm"
     android:gravity="right"
     /> 
 <ListView 
     android:layout_width="fill_parent"
     android:layout_height="150dp"
     android:id="@+id/setting_listview_time"
     android:layout_margin="2dp" 
     >
 </ListView>
</LinearLayout> 
```

列表视图项目：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="50dp">
<Button
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:id="@+id/setting_text_time_list"
    android:gravity="center"
    android:background="#000000"
    android:textColor="#ffffff"
    android:layout_toRightOf="@+id/setting_on_off_time"
    android:focusable="false"
/>
<ToggleButton 
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:id="@+id/setting_on_off_time"
    android:layout_alignParentLeft="true"
     android:focusable="false"
/> 
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-14T06:43:31.270

在您的列表周围添加一个滚动视图，例如：

```
<linearlayout>
<scrollview>
<linearlayout>
<textview>
<listview> 
```

……

# java - Java中方法重载中的可变参数

> ID：12879910
> 
> 赞同：23
> 
> 时间：2012-10-14T06:39:10.050
> 
> 标签：java, overloading, variadic-functions, java-6

以下代码无法编译。

```
package varargspkg;

public class Main {

    public static void test(int... i) {
        for (int t = 0; t < i.length; t++) {
            System.out.println(i[t]);
        }

        System.out.println("int");
    }

    public static void test(float... f) {
        for (int t = 0; t < f.length; t++) {
            System.out.println(f[t]);
        }

        System.out.println("float");
    }

    public static void main(String[] args) {
        test(1, 2);  //Compilation error here quoted as follows.
    }
} 
```

发出编译时错误。

> 对 test 的引用不明确，varargspkg.Main 中的方法 test(int...) 和 varargspkg.Main 中的方法 test(float...) 都匹配

这似乎很明显，因为方法调用中的参数值`test(1, 2);`可以提升`int`为`float`

如果任何一个或两个参数都以`F`or为后缀`f`，则编译。

* * *

但是，如果我们用各自的包装器类型表示方法签名中的接收参数，如下所示

```
public static void test(Integer... i) {
    System.out.println("Integer" + Arrays.asList(i));
}

public static void test(Float... f) {
    System.out.println("Float" + Arrays.asList(f));
} 
```

那么对该方法的调用`test(1, 2);`不会发出任何编译错误。在这种情况下要调用的方法是接受一个`Integer`varargs 参数的方法（前面代码段中的第一个）。

为什么在这种情况下没有报告第一种情况的错误？似乎自动装箱和自动类型提升都在这里应用。是否首先应用自动装箱以便解决错误？

Oracle 文档说，

> 一般来说，您不应该重载可变参数方法，否则程序员将很难弄清楚调用了哪个重载。

这个[链接](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)的最后一句话。然而，这是为了更好地理解可变参数。

还要添加下面的代码编译就好了。

```
public class OverLoading {

    public static void main(String[] args) {
        load(1);
    }

    public static void load(int i) {
        System.out.println("int");
    }

    public static void load(float i) {
        System.out.println("float");
    }
} 
```

* * *

**编辑：**

以下是指示编译错误的[快照。](https://i.stack.imgur.com/HjmFa.png)我创建了一个新应用程序，因此包名称不同。

[![在此处输入图像描述](../Images/6a73a922953db4d9804c709f5b284280.png)](https://i.stack.imgur.com/HjmFa.png)

我正在使用JDK 6。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T06:52:40.117

你可以`Widen`或者`Box`但你不能两者都做，除非你`boxing and widening`要`Object`(An int to Integer(Boxing) 然后 Integer to Object(Widening) 是合法的，因为每个类都是 的子类`Object`，所以有可能`Integer`被传递给`Object`范围）

类似地，一个`int`to`Number`也是合法的 (int -> Integer -> Number) 因为 Number 是它的超类`Integer`是可能的。

**让我们在您的示例中看到这一点： -**

```
public static void test(Integer...i)

public static void test(Float...f) 
```

在选择要选择的重载方法时，在组合 Boxing、Widening 和 Var-args 时，需要遵循一些规则：-

1.  基元扩展使用`smallest`方法参数可能
2.  Wrapper 类型不能扩展到另一个 Wrapper 类型
3.  您可以从 int Box 到 Integer 并扩大到 Object 但不能扩大到 Long
4.  扩大击败拳击，拳击击败 Var-args。
5.  你可以 Box 然后加宽（一个`int`可以成为`Object`via `Integer`）
6.  你不能先加宽然后盒子（一个`int`不能成为`Long`）
7.  您不能将 var-args 与加宽或装箱结合使用

所以，根据上面给定的规则：-

**当您将两个整数传递给上述函数时，**

*   根据规则 3，它必须首先放入 a中，根据规则 5，这是非法的（您不能先加宽，然后再放入框）`Widened`。 `Boxed``Long`
*   因此，存储在`Integer`var-args 中是盒装的。

但在第一种情况下，你有`var-args`原始类型的方法： -

```
public static void test(int...i)
public static void test(float...f) 
```

然后`test(1, 2)`可以调用这两种方法（因为它们都不适合`rule 1`应用）：-

*   在第一种情况下，它将是`var-args`
*   在第二种情况下，它将是 Widening，然后是 Var-args（这是允许的）

现在，当您的方法恰好具有一个 int 和一个 flost 时：-

```
public static void test(int i)
public static void test(float f) 
```

然后在调用 using`test(1)`时，遵循规则 1，并`int`选择最小可能的加宽（即根本不需要加宽的地方）。因此将调用第一种方法。

更多信息，您可以参考[`JLS - Method Invocation Conversion`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T06:42:59.367

在 Java 中，`1`是如何表示`int`. 它可以自动装箱到 的实例`Integer`或提升到`float`，这就解释了为什么编译器不能决定它应该调用的方法。但它永远不会自动装箱为`Long`or `Float`（或任何其他类型）。

另一方面，如果您编写`1F`，它是 a 的表示`float`，可以自动装箱为 a `Float`（并且，本着同样的精神，永远不会自动装箱为 an`Integer`或其他任何东西）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T06:48:40.507

在 Java 6 中，问题出`instantiation`在泛型时，然后才找到可以调用的方法。

```
When you write 1,2 
     -> it can be be both int[] or float[] and hence the issue being complained.

When you write 1,2F 
     -> it can be be only float[] and hence the NO issue being complained. 
```

与其他两个选项相同，即

```
When you write 1F,2 
     -> it can be be only float[] and hence the NO issue being complained.

When you write 1F,2F 
     -> it can be be only float[] and hence the NO issue being complained. 
```

另一方面，当您使用`int`or时`float`，没有变量类型实例化。当你使用`1`时，它会首先尝试查找`int`作为参数的方法，如果没有，它会提升类型并使用 float 标识方法。如果两种方法都可用，`int`则首先使用带有 的方法。

**Java 7 中不会出现歧义问题，**因为它可以更好地处理数据类型检查和提升。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T07:05:31.250

> 为什么在这种情况下没有报告第一种情况的错误？似乎自动装箱和自动类型提升都在这里应用。是否首先应用自动装箱以解决错误？

只是一个意见 - 在可变参数的情况下，JVM 实际上必须创建一个参数数组。对于 Integer 和 Float，很明显它应该创建什么类型的数组。因此，这可能是没有歧义错误的原因。

但是，它仍然有点令人困惑，为什么它不能创建一个整数数组，而默认情况下 1、3 是整数。

看起来这在过去的[**错误中已经在 SO 中讨论过可变参数和重载？**](https://stackoverflow.com/questions/2521293/bug-with-varargs-and-overloading)根据讨论，实际上是[**一个错误。**](https://stackoverflow.com/a/2521374/738746)

# c++ - DirectX 渲染和 OMP

> ID：12879912
> 
> 赞同：1
> 
> 时间：2012-10-14T06:39:24.190
> 
> 标签：c++, rendering, directx-11, openmp

我想让我的代码并行，但有一些问题要问有经验的人。

**1]做这样的事情是个好主意吗？**

```
#pragma omp parallel num_threads(2)
{
    const int threadID=omp_get_thread_num();
    if(threadID==0) while(WM_QUIT != msg.message){ // < Engine stuff
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE)){
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }else{
            engine.omp_renderPrepare();
        }
    }
    if(threadID==1) while(WM_QUIT != msg.message){ // < Render stuff
        engine.omp_renderApply();
    }
}

// Functions from the engine class:
inline void omp_renderPrepare(){
    if(gDevice.omp_isReady()){
#pragma omp critical(renderPrepare)
        if(!omp_rendering){
            omp_sceneReady=0;
            renderPrepare();
            omp_sceneReady=1;
        }
    }else{
        Sleep(42); // If the device is not ready, dont spam.
    }
}
inline void omp_renderApply(){
    if(gDevice.omp_isReady()){
#pragma omp critical(omp_renderApply)
        if(omp_sceneReady){
            omp_rendering=1;
            renderApply();
            omp_rendering=0;
        }
    }else{
        Sleep(42); // If the device is not ready, dont spam.
    }
} 
```

我已经应用了它，但是它对 CPU 的负担很重，当我调整窗口大小时，我的代码会变慢，因为它必须：

1.  将 bool "omp_deviceReady" 设置为 false，以便停止渲染。
2.  等待平行部分停止。
3.  调整图形缓冲区的大小。
4.  将“omp_deviceReady”设置为 true，以便可以再次进行渲染。
5.  只要用户调整窗口大小，就重复。

**2]**由于我的 OMP 代码在 CPU 上很重[根据任务管理器大约 50%]，**什么是处理并行渲染的好方法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:47:54.717

“OMP 不太适合 MT 渲染（OMP 更适合游戏任务的并行处理）” – Necrolis

“延迟上下文是一个很好的方法，......” – catflier

# sql - SQL 查询和无效变量

> ID：12879913
> 
> 赞同：2
> 
> 时间：2012-10-14T06:39:39.907
> 
> 标签：sql, variables

我正在尝试运行此查询，但它什么也没返回。它将用户输入作为查询的变量。我必须提到一件事，那就是用户何时离开`batch_number`s `textbox empty, the query should return all the batches of the`organization_ID`。这是查询：

```
SELECT Nvl(a.ORGANIZATION_ID, ' '), 
       Nvl(a.FILE_TYPE, ' '), 
       Nvl(a.BATCH_NUMBER, ' '), 
       Nvl(a.FILE_NAME, ' '), 
       Nvl(TOTAL_ANB_RECORDS, 0) 
FROM   PAYMENT B, 
       PAYROLL A 
WHERE  b.ORGANIZATION_ID = a.ORGANIZATION_ID 
       AND a.ORGANIZATION_ID = '1176' 
       AND PAYMENT_TYPE = '1' 
       AND Nvl(PAYMENT_STATUS, 'a') = '5' 
       AND ( BM_BATCH_INDC = '0' 
              OR BM_BATCH_INDC = '1' 
              OR BM_BATCH_INDC = '3' ) 
       AND b.FILE_TYPE = a.FILE_TYPE 
       AND b.FILE_BATCH_NUMBER = a.BATCH_NUMBER 
       AND ( b.FILE_BATCH_NUMBER = '"+textBox.text.ToString()+"' 
              OR b.FILE_BATCH_NUMBER IS NULL ) 
       AND b.PAYMENT_PATH = '01'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:54:37.253

假设它是空白数据，则为 NULL

写吧

```
AND b.FILE_BATCH_NUMBER = NVL(a.BATCH_NUMBER,b.FILE_BATCH_NUMBER) 
```

代替

```
AND b.FILE_BATCH_NUMBER = a.BATCH_NUMBER 
       AND ( b.FILE_BATCH_NUMBER = '"+textBox.text.ToString()+"' 
              OR b.FILE_BATCH_NUMBER IS NULL ) 
```

如果 Batch_number 为 null，它将为所有 file_batch_number 返回 true

# javascript - 如何使用 JavaScript 根据网页上的日期值决定显示哪个图像？

> ID：12879914
> 
> 赞同：0
> 
> 时间：2012-10-14T06:39:54.597
> 
> 标签：javascript, asp.net, vb.net, date

我有一个表格，在其中我在文字字段的每一行上显示一个日期值，该行还有一个图标空间，如果日期已过时，它必须显示一个红色图标，或者如果日期是一个绿色图标好的，我显示的日期值来自数据库，我想做的是根据与表上日期和今天日期的比较显示任一图标。因此，如果表格上的日期是 10/14/2012 而今天是同一天，则图标将为绿色，如果表格上的日期是 10/10/2012 或今天之前的任何其他日期，则必须显示红色图标。我对 JavaScript 几乎一无所知，但我认为这是我需要的，这两个图像都已经存储在服务器上，我正在 VB.NET 上的 asp 上进行开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:04:56.807

我已经为此使用了 jquery 来满足您的要求，请参阅代码片段的链接

[http://jsfiddle.net/GbGVD/3/](http://jsfiddle.net/GbGVD/3/)

# c# - 使用智能设备 CAB 项目时如何自动添加应用程序的所有文件/文件夹？

> ID：12879915
> 
> 赞同：0
> 
> 时间：2012-10-14T06:39:54.550
> 
> 标签：c#, visual-studio-2008, windows-mobile, windows-mobile-6.5, cab

我在智能设备 CAB 项目中发现了很多困难。我在 Windows Mobile 6.5 中创建了一个应用程序。然后我创建了一个 CAB 项目。但是在项目中手动添加文件夹/文件对我来说很痛苦。使用智能设备 CAB 项目时，我有什么方法可以自动添加应用程序的所有文件/文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:23:47.613

在您的**安装和部署**项目中，选择“添加 > 项目输出...”并选择您想要包含在项目中的文件。

![截图1](../Images/50c8b0a7f48ab001ce7f42e71b0958b1.png)

![截图2](../Images/03178c22d0349fe5291d4adf9703e9b0.png)

# clojure - Clojure 工作表

> ID：12879919
> 
> 赞同：8
> 
> 时间：2012-10-14T06:40:49.363
> 
> 标签：clojure

我最近一直在学习 Clojure。Clojure 世界中是否有类似 Scala 的工作表这样的东西，我可以将任何代码放入其中并在保存后立即对其进行评估？或者也许 Clojure 有类似的解决方案？

我现在正在与 lein repl 合作，遗憾的是，我不能说它是有史以来最有用的工具。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T08:21:37.643

在一般的 Lisp 开发中（尤其是 Clojure），首选的编程风格是通常被称为*交互式编程*的方式——开发人员始终保持应用程序加载的图像，并通过 REPL 与其交互。您可以轻松地即时修改加载的代码并立即在 REPL 中测试更改（这对于 Scala 来说一点也不容易 - 必须求助于[JRebel](http://batsov.com/articles/2011/04/26/jrebel-with-scala/)之类的东西才能做到这一点）。相比之下，我发现 Scala 工作表是一个非常原始的解决方案......

我在 Clojure 中遵循的工作流程是：

1.  我在 Emacs 中打开[nREPL.el](https://github.com/kingtim/nrepl.el) - 这会加载我的 lein2 项目及其所有依赖项，并给我一个 REPL，我可以使用它来试用
2.  我在源代码中编写了一些代码并加载更改的函数（也许通过评估顶级表单`C-M-x`
3.  之后我会按`C-x C-z`跳回 REPL 并尝试其中的新代码
4.  我回到第 2 步

基本上，Clojure REPL 比 Scala REPL 强大得多，我个人认为它比 Scala IDE 工作表优越得多。一旦你习惯了交互式增量编程风格，相比之下，Lisp 提供的其他一切都开始变得异常复杂。我不熟悉 Eclipse 的[CounterClockWise](http://code.google.com/p/counterclockwise/) Clojure 插件，但我很确定它提供了与 Emacs 的 nREPL.el 类似的功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T14:23:28.390

您可能想看看[Leiningen 的 autoexpect 插件](https://github.com/jakemcc/lein-autoexpect)。每次您在工作目录中保存任何文件时，插件都会编译并运行您的代码；作为奖励，它将评估任何可以用作测试的“预期”函数调用。这对于测试驱动的开发非常有帮助，并且是对使用 REPL 的一个很好的补充，如另一个答案中所述（我经常使用一个或另一个或两者一起使用，具体取决于我有多少测试用例）。

我应该注意到，由于 JVM 和 Leiningen 的启动成本，运行 autoexpect 比重复运行“lein test”或“lein run”要快得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T23:40:17.460

听起来您正在寻找的是[Clojure Koan 插件](https://github.com/functional-koans/lein-koan)。这是一个工作表式的问题解决练习工具，可监视您的编辑并提供有关您工作正确性的即时反馈。

对于实际的开发工作流程，我赞同其他人在此处提供的关于工具和交互式环境设置的建议，但由于您明确表示您正在学习 Clojure，因此这可能是一种有趣的方法。还有一个名为[4Clojure](http://www.4clojure.com/)的 Web 应用程序，您可能会玩得开心。

但是，您最终（或马上）会想要建立一个流畅且方便的开发环境，到目前为止我还没有看到任何提及一些重要工具的内容。一个人提到了 Nrepl。如果你喜欢 Emacs，有一种类似于 slime/swank 的交互模式，它可以插入到名为[nrepl.el](https://github.com/kingtim/nrepl.el)的 nrepl中，它在编辑文件和在 repl 中乱七八糟之间提供了非常好的集成。同样，还有[VimClojure](https://github.com/vim-scripts/VimClojure)，您可以找到 IntelliJ ( [LaClojure](http://plugins.intellij.net/plugin/?id=4050) ) 和 Eclipse ([逆时针](http://code.google.com/p/counterclockwise/)) 的插件，这些插件也很流行且维护良好。

有人提到自动期望。如果您正在寻找一个好的 TDD 设置，我会推荐[midje](https://github.com/marick/Midje)。如果您使用的是 leiningen 的 2.0 预览版，那么惰性测试集成存在一些问题[，](https://github.com/stuartsierra/lazytest)并且惰性测试本身已经或应该被弃用。但我个人更喜欢 midje 而不是期望，这些问题肯定会在[lein-midje](https://github.com/marick/Midje/wiki/Lein-midje)的 2.0 版本中得到解决。与非预览版 (1.x) leiningen 一起使用的稳定版 lein-midje 具有使用lazytest 的类似自动测试的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-25T12:33:45.600

正如没有人提到的那样，[草书](https://cursiveclojure.com/)现在真的很好，虽然我很伤心回到一个成熟的 IDE。您可以使用内置的 repl 轻松地做与 Emacs 相同的事情，只需移动到您正在使用的命名空间并在每次进行更改时进行同步。这是一种非常好的工作方式。

# qt - Qt5 directshow 插件（dsengine.dll）不是Windows7下构建的

> ID：12879923
> 
> 赞同：1
> 
> 时间：2012-10-14T06:41:32.630
> 
> 标签：qt, directshow, qt5

我尝试在 Windows7 下的 Qt5 中构建 directshow 多媒体插件，但是，由于该文件已从 WindowsSDK 7.1 中删除（这是构建 Qt5 所必需的文件），因此存在找不到 qedit.h 的问题）。所以我试着在[这里关注这篇文章](http://social.msdn.microsoft.com/Forums/en/windowsdirectshowdevelopment/thread/2ab5c212-5824-419d-b5d9-7f5db82f57cd)。只需添加这个 qedit.h（据我所知，它只需要 IID_ISampleGrabber 和 CLSID_SampleGrabber 就是这样）并重新编译。它链接得很好，但是当我运行我的应用程序时，如果我尝试播放视频，它就不会做任何该死的事情，如果我尝试访问相机，它就会立即退出应用程序。由于我不了解 DS 的内部工作原理，因此我不知道此修复程序的合法性如何。

我该如何解决？

谢谢。

# c# - 为什么编译器不允许在 catch 块中使用 await

> ID：12879926
> 
> 赞同：14
> 
> 时间：2012-10-14T06:41:53.827
> 
> 标签：c#, asynchronous, async-await, c#-5.0

假设我有一个异步方法：

```
public async Task Do()
{
    await Task.Delay(1000);
} 
```

另一种方法是尝试在块`Do`内调用方法`catch`

```
public async Task DoMore()
{
    try
    {
    }
    catch (Exception)
    {
        await Do(); //compiled error.
    }
} 
```

但是这种方式，编译器不允许使用`await`inside `catch`，幕后有什么原因我们不能那样使用它吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T06:46:32.223

**更新**

这将在 C# 6 中得到支持。事实证明，这从根本上来说并非不可能，并且团队想出了如何做到这一点而不会在实现中发疯 :)

**原始答案**

我强烈怀疑这与[阻止`yield return`在 catch 块中使用](http://blogs.msdn.com/b/ericlippert/archive/2009/07/20/iterator-blocks-part-four-why-no-yield-in-catch.aspx)的原因相同。

尤其：

> 首先，我们仍然有一个问题，即“转到”到受 try-protected 区域的处理程序中间是非法的。进入 catch 块的唯一方法是通过捕获异常的“非本地 goto”。因此，一旦您退出了 catch 块，下次调用 MoveNext 时，我们将无法回到我们离开的 catch 块。
> 
> 其次，抛出和捕获的异常是 catch 块执行的内在部分，因为它可以使用“空抛出”语法重新抛出。我们无法在对 MoveNext 的调用中保留该状态。

在那里将“yield”替换为“await”，我想你会有答案的。

在大多数情况下，这感觉像是一件奇怪的事情，而且您*通常**应该*能够相当容易地重写代码以在块之后等待 - 当然，除非您试图等待某些东西然后抛出。在那种情况下，我承认会有点痛苦……*`catch`*

# android - 用于创建和检查 android 布局的工具

> ID：12879928
> 
> 赞同：0
> 
> 时间：2012-10-14T06:42:21.207
> 
> 标签：android, android-layout

我花了一段不愉快的时间在我的 android 布局中寻找错误，没有显示的字段是主要的。正如我在这里看到的其他人也在为 android 布局而苦苦挣扎的那样，我想即使不完全按照 SO 问题指南提出这个问题。

有哪些工具可以帮助创建 android 布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:46:10.240

我只知道一个。它叫[http://www.droiddraw.org/](http://www.droiddraw.org/)

随着时间的推移，我认为最好的方法仍然是通过代码创建自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:51:48.957

如果您在 Eclipse 中使用较新的 SDK（例如 android 4.0 或 4.1），它应该可以帮助您进行布局（具有更多功能的拖放和对齐/间距）。但是，您可能仍需要手动验证它以确保它正是您想要的，因为您还将更改其他参数。

# android - TextView 不显示所有文本

> ID：12879930
> 
> 赞同：1
> 
> 时间：2012-10-14T06:42:54.390
> 
> 标签：android, android-layout

我有一个显示客户信息的 UI。我遇到的问题是一些客户名称（android:id="@+id/customerName"）很长，不适合文本视图。除了为名称提供完整布局宽度或从其旁边删除代码 textview 的选项（如 xml 文件 android:id="@+id/customerName" 中所示）之外，我还有什么选项可以显示它们。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="*" >

    <TableRow>

        <TextView
            style="@style/CustomerLabelTextView"
            android:gravity="right"
            android:text="@string/customerCode" />

        <TextView
            style="@style/CustomerLabelTextView"
            android:gravity="right"
            android:text="@string/customerName" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/customerCode"
            style="@style/CustomerTextView"
            android:gravity="right" />

        <TextView
            android:id="@+id/customerName"
            style="@style/CustomerTextView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:gravity="right"
            android:maxEms="5"  />
    </TableRow>

    <TableRow android:gravity="right" >

        <TextView
            style="@style/CustomerLabelTextView"
            android:gravity="right"
            android:text="@string/customerAddress" />
    </TableRow>

    <TableRow android:gravity="right" >

        <TextView
            android:id="@+id/customerAddress"
            style="@style/CustomerTextView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:gravity="right"
            android:maxEms="5"   
            />
    </TableRow>

    <TableRow>

        <TextView
            style="@style/CustomerLabelTextView"
            android:gravity="right"
            android:text="@string/POBox" />

        <TextView
            style="@style/CustomerLabelTextView"
            android:gravity="right"
            android:text="@string/OrganizationName" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/poBox"
            style="@style/CustomerTextView"
            android:gravity="right" />

        <TextView
            android:id="@+id/organizationName"
            style="@style/CustomerTextView"
            android:gravity="right" />
    </TableRow>

    <TableRow>

        <TextView
            style="@style/CustomerLabelTextView"
            android:gravity="right"
            android:text="@string/fax" />

        <TextView
            style="@style/CustomerLabelTextView"
            android:gravity="right"
            android:text="@string/phone" />
    </TableRow> 
```

=====================================风格++++++++++++++++++++++++++++++++++++++++

```
<style name="CustomerTextView">
  <item name="android:layout_width">fill_parent</item>
  <item name="android:layout_height">wrap_content</item>
  <item name="android:textSize">14sp</item>
  <item name="android:textColor">@android:color/white</item>
  <item name="android:layout_margin">5dp</item>
  <item name="android:background">@drawable/textview_border</item> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-23T15:33:07.243

我通过使用修复它

```
android:layout_height="wrap_content"
android:inputType="textMultiLine" 
```

希望这也适合你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T06:48:47.333

一种选择是将其设置为椭圆形，因此如果名称是“Really Long Name”，它可能会显示为“Really Lon...”。要做到这一点：

```
android:ellipsize="end"
android:singleLine="true" 
```

另一方面，您可以使用以下方法使 textview 更改大小以适合文本：

```
android:layout_width="wrap_content" 
```

但我不确定它是否适用于您尝试做的所有其他事情（例如，表格行内的 fill_parent 和 width ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:46:02.073

您可以通过将 singleLine 属性设置为 false 来使 TextView 扩展到第二行。

```
<TextView
        android:singleLine="false"
/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:52:49.960

您可以尝试使 textview 可滚动，以便当要显示的数据过多时，滚动会显示隐藏的文本。在 xml 文件中，将 LinearLayout 更改为 ScrollView 布局。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T06:47:33.373

删除 `android:maxEms="5"`xml 文件中的行，然后尝试

# mysql - 如何存储用户的通知选项？

> ID：12879935
> 
> 赞同：2
> 
> 时间：2012-10-14T06:43:17.690
> 
> 标签：mysql, database, database-design, schema

我正在创建一个数据库`users`。我想让用户选择他们想通过电子邮件接收的通知。

现在我在表中有下一列`users`（布尔类型）：

*   `notification_comment_photo`.

*   `notification_comment_comment`.

*   `notification_vote_photo`.

*   `notification_vote_comment`.

*   `notification_pm`.

*   `notification_followed`.

*   `notification_news`.

您认为，我应该规范化表用户并创建另一个表`notifications`，考虑到该表与表具有一对一的关系`users`吗？

我对社交链接（推特、脸书、谷歌+等）也有同样的问题。单独制作一张桌子更好`links`吗？

**更新。**谢谢大家，我会添加单独的表格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:05:44.090

很难回答您的问题，因为您没有告诉我们您要解决什么问题。

您当前设计的一个问题是，它需要为您想要存储的每种新类型的通知更改架构 - 如果您想在用户被取消关注时通知他们，您必须在您的用户表中添加一列。

我会考虑这样的模式：

```
TABLE: users
------------------
ID
...

TABLE: notification_types
----------------------
ID
Description

TABLE: user_notifcation_subscriptions
-----------------------------------------
user_id
notification_type_id
subscribed (bool) 
```

您可以将“订阅”列从 user_notification_subscriptions 中删除，并确定将用户链接到通知类型的任何记录都意味着他们已订阅。

这种设计允许您在不更改架构的情况下添加新的订阅类型。我相信它类似于@Daniel 建议的设计，但他不包括 notification_type 表，而是依赖于名称-值对。我不喜欢这个——当错别字滑入 TYPE 列时，它可能会导致愚蠢的、难以找到的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:47:25.260

您可以（并且可能应该）创建一个单独的表“notification_settings”或其他东西。

```
 ID
 USER_ID
 TYPE
 VALUE 
```

这使您可以轻松添加通知设置，而不会弄乱数据库表。正如您所建议的那样，拥有一个“严格”的结构有时最终会阻碍并且更难扩展。

对于您的社交链接，您也应该这样做。另一个名为“user_social_accounts”的表

```
ID
USER_ID
NETWORK_ID 
```

# c - 如何调试被覆盖的指针？

> ID：12879939
> 
> 赞同：1
> 
> 时间：2012-10-14T06:43:39.187
> 
> 标签：c, debugging, gdb, segmentation-fault, valgrind

我遇到了由用无效值覆盖指针引起的错误。我无法使用 valgrind（在默认模式下）或使用 GDB 找到错误，因为它们只将我指向无效指针，而不是什么将指针覆盖到不正确的值。

它始终是同一个变量，但是，我没有明确地将其设置为错误值。程序中的其他一些行必须访问超出其边界的内存，但碰巧它碰巧命中了该指针的存储空间。

我不确定我应该使用什么调试工具/选项来解决这个错误。

崩溃示例：

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7ffff6ffc700 (LWP 2425)]
0x00000000004058b2 in writeToConn (conn=0x7ffff0004f40) at streamHandling.c:115
115             ssize_t result = send(conn->fd, conn->head->data->string + position, conn->head->data->size - position, 0);
(gdb) print conn
$1 = (struct connection *) 0x7ffff0004f40
(gdb) print conn->head->data
$2 = (struct dbstring *) 0x35 
```

不幸的是，我不能简单地观察变量`conn->head->data`，因为我有大约 5,000 个 conn 结构。

这段代码大部分时间都可以工作，但是如果在中等负载下运行，它会在几秒钟后崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:05:32.297

`gdb`触发断点时，您可以使用[Break Commands](http://sourceware.org/gdb/onlinedocs/gdb/Break-Commands.html#Break-Commands)自动执行命令。

您可以设置一个中断命令以在`struct connection`分配 a 时运行，并让它在感兴趣的字段上添加一个观察点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:25:03.720

堆栈回溯有帮助吗？这是一个告诉如何做到这一点的页面。

[如何在 C 中获取堆栈跟踪？](https://stackoverflow.com/questions/105659/how-can-one-grab-a-stack-trace-in-c)

# python - 如何使用 python re 获取笔记内容

> ID：12879944
> 
> 赞同：0
> 
> 时间：2012-10-14T06:44:11.620
> 
> 标签：python, regex, evernote

我通过*evernote*分享了一条笔记，并生成[了一个 HTML 页面](https://www.evernote.com/shard/s61/sh/396b4a1f-ae9c-40aa-b740-5aa19e301489/3de6deff539dec4772bdc4f1057a437d?noteKey=3de6deff539dec4772bdc4f1057a437d&noteGuid=396b4a1f-ae9c-40aa-b740-5aa19e301489)。我想得到这个笔记的标题和内容，所以下面的代码：

```
import re
resource = '<!DOCTYPE html>\n<!--[if lt IE 7 ]> <html class="ie6">; <![endif]--><!--[if IE 7 ]>    <html class="ie7"> <![endif]--><!--[if IE 8 ]>    <html class="ie8"> <![endif]--><!--[if IE 9 ]>    <html class="ie9"> <![endif]--><!--[if gt IE 9]>  <html>             <![endif]--><!--[if !IE]><!--> <html>         <!--<![endif]--><head><meta name="en:locale" content="en" />\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=9,chrome=1" />\n    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=0" />\n\n    <meta property="og:title" content="python re"/>\n    <meta property="og:type" content="article"/>\n        <meta property="og:description" content="a question about python re\n "/>\n      <meta property="og:url" content="https://www.evernote.com/shard/s61/sh/396b4a1f-ae9c-40aa-b740-5aa19e301489/3de6deff539dec4772bdc4f1057a437d"/>\n    <meta property="og:image"\n        content="https://www.evernote.com/shard/s61/sh/396b4a1f-ae9c-40aa-b740-5aa19e301489/3de6deff539dec4772bdc4f1057a437d/thm/note/396b4a1f-ae9c-40aa-b740-5aa19e301489"/>\n    <meta property="og:site_name" content="Evernote"/>\n    <meta property="og:created_time" content="1350193749000"/>\n    <meta property="og:updated_time" content="1350193786000"/>\n    <link rel="Shortcut Icon" href="/favicon.ico" type="image/x-icon" />\n\n    <link rel="stylesheet" href="/redesign/global/css/fonts.css" />\n    <link rel="stylesheet" href="/redesign/global/css/header.css" />\n\n    <link rel="stylesheet" href="/redesign/sharing/css/sharedNote.css" />\n    <title>python re</title>\n  <link rel="stylesheet" href="/redesign/modules/SharingMenu/SharingMenu.css"><link rel="stylesheet" href="/redesign/modules/LinkUrlDialog/LinkUrlDialog.css"></head><body class="wrapper"><div class="logo-bar">\n      <a href="http://evernote.com/" target="_blank" class="evernote-logo"></a>\n      <a class="save-button save-button-desktop" href="/saveNote/s61/396b4a1f-ae9c-40aa-b740-5aa19e301489/3de6deff539dec4772bdc4f1057a437d">\n          Save to Evernote</a>\n\n        <div class="switch-account-div">\n          <div class="switch-account-icon"></div>\n          <span class="switch-account-name"></span>\n          <div class="switch-account-arrow"></div>\n          <div class="switch-account-dropdown">\n            <div class="switch-dropdown-arrow"></div>\n            <div class="switch-account-menuitem">\n              Switch Account</div>\n            <div class="switch-account-logout">\n              Sign Out</div>\n          </div>\n        </div>\n\n        </div>\n\n    <div id="message-container">\n      <div id="message">\n        <div id="message-checkmark"></div>\n        <span></span>\n      </div>\n    </div>\n\n    <div id="container-boundingbox" class="wrapper">\n      <div id="container" class="wrapper">\n        <div class="sharing-imagegallery">\n        <div class="SharingMenu"><div class="sharing-menu">\n    <div class="share-button-container">\n      <div class="label-container">\n        <span class="label">\n          Share</span>\n        <div class="label-icon facebook-icon">\n        </div>\n      </div>\n      <div class="icon-container"\n         title="Share">\n        <div class="icon">\n        </div>\n      </div>\n    </div>\n    <div class="menu-bar">\n      <div class="menu-bar-div">\n        <div class="menu-bar-icon facebook-icon"></div>\n        <span class="menu-bar-label">\n          Facebook</span>\n      </div>\n      <div class="menu-bar-div">\n        <div class="menu-bar-icon twitter-icon"></div>\n        <span class="menu-bar-label">\n          Twitter</span>\n      </div>\n      <div class="menu-bar-div">\n        <div class="menu-bar-icon linkedin-icon"></div>\n        <span class="menu-bar-label">\n          LinkedIn</span>\n      </div>\n      <div class="menu-bar-div">\n        <div class="menu-bar-icon link-icon"></div>\n        <span class="menu-bar-label">\n          Link</span>\n      </div>\n    </div>\n  </div>\n</div></div>\n      <div class="shared-by-mobile">\n        Shared by flowerszhong</div>\n      <div class="shared-by shared-by-desktop">\n        <div class="shared-by-left"></div>\n        Shared by flowerszhong<div class="shared-by-right"></div>\n      </div>\n      <h2 class="note-title">python re</h2>\n      <div class="vtop">\n        <div class="note-updated">\n          <span>\n            Updated Today</span>\n        </div>\n      </div>\n      <div class="divider"></div>\n      <div class="note-content">\n        <div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="ennote">\na question about python re\n<div><br/></div></div></div>\n      <a class="save-button save-button-mobile" href="/saveNote/s61/396b4a1f-ae9c-40aa-b740-5aa19e301489/3de6deff539dec4772bdc4f1057a437d">\n        Save to Evernote</a>\n    <div class="clearfix" style="clear: both;"></div>\n</div>\n    </div>\n\n\n    <div class="footer">\n      <div>\n            Evernote makes it easy to remember things big and small from your everyday life using your computer, tablet, phone and the web.</div>\n          <div class="footer-logo"></div>\n        </div>\n\n    <div class="LinkUrlDialog"><script id="linkUrlDialog" type="text/html">\n    <div class="link-url-dialog">\n      <div class="dialog-head">\n        Link to Note</div>\n      <div class="dialog-body">\n        <p>Paste this link into an email or IM to share it.</p>\n        <p>Anyone with the link will be able to view the note.</p>\n      </div>\n      <div class="url-container">\n        <div class="url-title">\n          Note URL:</div>\n        <input type="text" class="url-input" value="{{url}}" readonly>\n        <div class="copy-container">\n          <button type="button" class="copy-button">\n            Copy to Clipboard</button>\n        </div>\n      </div>\n    </div>\n  </script>\n</div><script src="/redesign/global/js/respond.min.js"></script>\n    <script src="/redesign/global/js/require.min.js"></script>\n    <script src="/redesign/global/js/config-require.js"></script>\n    <script type="text/javascript">\n      define("actionBean", [], function() {return {"shareNoteUri":"/shard/s61/sh/396b4a1f-ae9c-40aa-b740-5aa19e301489/3de6deff539dec4772bdc4f1057a437d?shareNote&service=","foodNote":false,"skitchNote":false,"userName":"","switchAccountUri":"/saveNote/s61/396b4a1f-ae9c-40aa-b740-5aa19e301489/3de6deff539dec4772bdc4f1057a437d?switch","logoutUri":"/saveNote/s61/396b4a1f-ae9c-40aa-b740-5aa19e301489/3de6deff539dec4772bdc4f1057a437d?logout","userStatus":"","images":false,"userLoggedIn":false};});\n    </script>\n    <!-- Google Analytics -->\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-285778-5\']);\n\n\n    _gaq.push([\'_trackPageview\', \'/sh/{noteGuid}/{noteKey}/{suffix}\']);\n  \n\n(function() {\n  var ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\n  ga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\n  var s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- End of Google Analytics -->\n<script type="text/javascript">\n      var _gaq = _gaq || [];\n      _gaq.push([\'_setCustomVar\',\n                 4,                                 // Slot 4 - required\n                 \'contentClass\',                    // Category - required\n                 \'\', // Value - required\n                 3                                  // Page-level scope\n                ]);\n\n      _gaq.push([\'_setCustomVar\',\n                 5,                                      // Slot 5 - required\n                 \'sourceApplication\',                    // Category - required\n                 \'\', // Value - required\n                 3                                       // Page-level scope\n                ]);\n      _gaq.push([\'_trackPageview\', \'/singleNote\']);\n    </script>\n  <script type="text/javascript" src="/redesign/modules/SharingMenu/SharingMenu.js"></script><script type="text/javascript" src="/redesign/modules/LinkUrlDialog/LinkUrlDialog.js"></script><script type="text/javascript" src="/redesign/sharing/SharedNoteViewAction/SharedNoteViewAction.js"></script></body></html>'
title_pattern = re.compile('(?<=<title>).+(?=</title>)')
content_pattern = re.compile('(?<=class=\"divider\"></div>).+(?=<a class=\"save-button)')
title= re.search(title_pattern,resource)
content = re.search(content_pattern,resource)

if title:
    print title.group()

if content:
    print content.group()
# if __name__=='__main__':main() 
```

输出：

> 蟒蛇重新

为什么只获得标题？以及如何获取此笔记的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:52:39.877

您的问题是内容包含换行符。`.`，默认情况下，不匹配换行符。

因此，您应该使用`re.DOTALL`：

```
content_pattern = re.compile('(?<=class=\"divider\"></div>).+(?=<a class=\"save-button)', re.DOTALL) 
```

使`.`匹配换行符。然后它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:46:33.933

我不完全理解你想做什么，但它似乎[`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/)可以帮助你。

# django - 如何在我的视图功能中创建面包屑？

> ID：12879945
> 
> 赞同：1
> 
> 时间：2012-10-14T06:44:33.790
> 
> 标签：django

*（碰巧，我删除了我的最后一个问题）*

如何在我的视图功能中创建面包屑？

```
class Category(MPTTModel):
    name = models.CharField(max_length=50, verbose_name=u'Name')
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')
    slug = models.SlugField()

class Product(models.Model):
    name = models.CharField(max_length=50, verbose_name=u'Name')
    slug = models.SlugField()
    #category = models.ManyToManyField(Category, verbose_name=u'Category')
    category = models.ForeignKey(Category)

#views
def post_content(request, product_id):
    product = get_object_or_404(Product, id = product_id)
    return render_to_response('product_info.html', {'product':product},context_instance=RequestContext(request)) 
```

product_info.html

```
{{ product.name }} 
```

我想要在我的单个帖子信息 ( `post_content`) 面包屑中包含类别。像这样的东西：类别>子类别>子子类别.,,,

有人告诉我使用 get_ancestors：

例子：

```
{% for parent in category.get_ancestors %}
  <a href="{{ parent }}">{{ parent.name }}</a> &gt;
{% endfor %}
{{ category.name }} 
```

如何用我的模型实现这一点？

谢谢你。我将感激不尽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T12:10:29.520

如果`category = models.ForeignKey(Category)`，只需执行以下操作：

```
{% for parent in product.category.get_ancestors %}
  <a href="{{ define_url_to_parent }}">{{ parent.name }}</a>
{% endfor %} 
```

# c++ - 二维数组是如何在 C++ 中实现的

> ID：12879947
> 
> 赞同：2
> 
> 时间：2012-10-14T06:44:50.213
> 
> 标签：c++

> **可能重复：**
> [二维数组作为函数的参数](https://stackoverflow.com/questions/12652598/2d-array-as-argument-to-function)

二维数组是如何在 C++ 中实现的？它在内存中是连续的吗？

即如果`a`是一个数组第一个地址包含元素`a(0,0)` 然后下一个地址`a(0,1)`然后`a(1,0)`，`a(1,1)`等等...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:27:09.020

给定一个声明`T D[C]`，其中`T`是类型名称、`D`标识符和`C`整数常量表达式，标准说（突出显示我的）：

> (§8.3.4/1) [...] 那么标识符的类型 [...] 是一个数组类型。[...] 常量表达式指定数组的（元素数量）边界。如果常量表达式的值为 N，则该数组有 N 个元素，编号为 0 到 N-1，并且 D 的标识符的类型是“NT 的derived-declarator-type-list 数组”。数组类型的对象包含一个**连续分配的非空 T 类型的 N 个子对象集。** [...]

和：

> （§8.3.4/3）当几个“数组”规范相邻时，创建一个多维数组；[...]

也：

> （第 8.3.4/9 节）[注意：由此可知，C++ 中的数组是按行存储的（最后一个下标变化最快），声明中的第一个下标有助于确定数组消耗的存储量，但在下标计算中没有其他作用。——尾注]

**结论**
所有这一切都清楚地表明这`T a[N][M]`是一个*连续存储**的*对象列表`N`，每个对象都是一个连续存储的类型对象列表。所以是的，整个二维数组是一个连续存储的对象。*`M``T`*

 **这是否意味着您可以使用一个组合索引直接访问元素？* 那么，给定一个数组`int a[10][5]`，你可以使用`a[0][23]`代替`a[2][3]`吗？严格来说，不，因为这违反了上面的第一条规则，即只有索引`0..4`对第二个索引有效。但是，就该特定表达式而言，如果您将其视为`a[0]`指向`p`数组第一行的第一个元素的指针，并且`a[0][23]`作为`*(p+23)`，您可以确保访问正确的元素。更多关于这个问题的信息在[这个现有的问题](https://stackoverflow.com/questions/7269099/may-i-treat-a-2d-array-as-a-contiguous-1d-array)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T07:09:41.233

是的，它在行主要顺序中是连续的。假设您有一个名为 的二维数组`a[3][3]`。然后在内存中的元素将按以下顺序排列：`a[0][0]`, `a[0][1]`, `a[0][2]`, `a[1][0]`, `a[1][1]`, `a[1][2]`, `a[2][0]`, `a[2][1]`, `a[2][2]`.

[这是一个示例的更多详细信息](http://www.cplusplus.com/doc/tutorial/arrays/)*

# php - Facebook 身份验证失败

> ID：12879949
> 
> 赞同：0
> 
> 时间：2012-10-14T06:44:56.293
> 
> 标签：php, facebook

我快要放弃了。大约一个星期以来，我正在尝试最简单的事情，即通过 facebook 进行身份验证。每次我进行身份验证（通过 facebook 登录 url）时，getUser() 和 api('me') 都会返回 null。

为什么？

编码：

```
$facebook = new Facebook(array(
  'appId'  => '306597542762982',
  'secret' => '88XXXXXX7f1',
));
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if (!$user) {

  $loginUrl =  $facebook->getLoginUrl(array('scope'=>'user_actions.news,publish_stream,user_about_me,email,publish_actions'));

  print $loginUrl; exit;

} 

var_dump($facebook->api('me')); 
```

求救。

编辑：发布：

```
$params = array (
  'article' => 'http://fb.raal.co.il/content/view/$id/$title',
  'access_token' => $facebook->getAccessToken()
);

$out = $facebook->api( '/me/news.reads','post', $params);

var_dump($out); exit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:11:36.477

继续之前从用户 ifaour 引用的 NullPointer：

> 只需检查当前的 Facebook 用户 ID $user，如果它返回 null 那么您需要重新授权用户（或使用自定义 $_SESSION 用户 ID 值 - 不推荐）

```
require 'facebook/src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
  'appId'  => 'APP_ID',
  'secret' => 'APP_SECRET',
));

$user = $facebook->getUser();

$photo_details = array('message' => 'my place');
$file='photos/my.jpg'; //Example image file
$photo_details['image'] = '@' . realpath($file);

if ($user) {
  try {
    // We have a valid FB session, so we can use 'me'
    $upload_photo = $facebook->api('/me/photos', 'post', $photo_details);
  } catch (FacebookApiException $e) {
    error_log($e);
  }
}

// login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
// redirect to Facebook login to get a fresh user access_token
  $loginUrl = $facebook->getLoginUrl();
  header('Location: ' . $loginUrl);
} 
```

> 我写了一篇关于如何将图片上传到用户墙上的[教程。](http://www.masteringapi.com/tutorials/how-to-upload-a-photo-to-a-users-profile-using-facebook-graph-api/66/)

有了附加信息，这有帮助吗？我发现了与此相关的其他信息，说明尝试

`$facebook->getAccessToken();`

显然，该调用可以提供应用访问令牌或用户访问令牌。根据您尝试使用访问令牌执行的操作，您将需要适当的类型。

或者，您可能需要为您尝试执行的操作请求某些权限，您可以在[此处](https://developers.facebook.com/docs/authentication/permissions/)找到。

# algorithm - 如何优化qt tablewidget刷新？

> ID：12879951
> 
> 赞同：1
> 
> 时间：2012-10-14T06:45:06.983
> 
> 标签：algorithm, qt, user-interface, optimization

我正在使用 qt 开发一个监视器，它显示从网络接收到的新日志项。
我使用**QTableWidget**来显示**收到的动态项目**，表格只显示 100 行。
问题是：监视器每秒将收到大约 400 条“消息”并更新行。
我发现使用**setItem(row,col,item)**和**new QTableWidgetItem()**非常耗时，我只想从上到下显示最新的项目（3 列的三个字符串）。
但是这个方法真的很耗时，我一次添加4000个测试用例需要5.281s，应该在4000/400 = 10s内完成。
***所以花费了一半的时间，如何缩短时间？使用 qt tablewidget 有更好的方法吗？*** ;） 谢谢阅读！

filterLog函数代码：

```
 start = clock();
    filter_log_display();
    duration_filterLogDisplay += (double)(finish - start) / CLOCKS_PER_SEC; 
```

过滤器日志显示（）：

```
 clock_t start = clock();
    row_selectable = false;
    ui->tableWidget->setRowCount(0);//delete table items all
    row_selectable = true;

    int size_1 = logDisplayQueue.size() - 1;

    ui->tableWidget->verticalScrollBar()->setSliderPosition(0);

    if(size_1+1 < 100)
    {
        ui->tableWidget->setRowCount(size_1 + 1);
    }
    else
    {
        ui->tableWidget->setRowCount(100);
    }
    clock_t finish = clock();
    duration_setRowCount += (double)(finish - start) / CLOCKS_PER_SEC;

    for(int queue_i = size_1, index = 0; queue_i >= 0; queue_i--, index++)
    {
        start = clock();
        LogInfoItem* logItem = (LogInfoItem*)logDisplayQueue.at(queue_i);
        finish = clock();
        duration_getItemFQueue += (double)(finish - start) / CLOCKS_PER_SEC;

        start = clock();
        QString BITS_str = bits2Hexs(logItem->BITS);
        finish = clock();
        duration_bits2Hexs += (double)(finish - start) / CLOCKS_PER_SEC;

        start = clock();
        ui->tableWidget->setItem(index, 0, new QTableWidgetItem(logItem->time));//time
        ui->tableWidget->setItem(index, 1, new QTableWidgetItem(logItem->name));//name
        ui->tableWidget->setItem(index, 2, new QTableWidgetItem(BITS_str));//BITS
        finish = clock();
        duration_setItem += (double)(finish - start) / CLOCKS_PER_SEC;

        start = clock();
        if(queue_i == oldRowItemNo)ui->tableWidget->selectRow(index);
        finish = clock();
        duration_ifSelectRow += (double)(finish - start) / CLOCKS_PER_SEC;
    } 
```

关于时间的分析：：）有很多地方需要优化，包括这个：）

![在此处输入图像描述](../Images/00a113c04772979387187d5edf0fe64f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:29:15.753

问题可能是每次调用都会`QTableWidget->setItem`触发一个绘制事件。您可以尝试在函数内部禁用 UI 更新，`filter_log_display()`如上 [一个问题所述](https://stackoverflow.com/questions/3770084/efficiently-updating-a-qtableview-at-high-speed)。

或者你用 QTableView 替换 QTableWidget 并在你的队列周围[实现一个表模型。](http://qt-project.org/doc/qt-4.8/model-view-programming.html#creating-new-models)

# java - 如果我的程序没有用户界面，是否使用 Java 应用服务器？

> ID：12879952
> 
> 赞同：0
> 
> 时间：2012-10-14T06:45:13.077
> 
> 标签：java

我正在做一个项目，将整个应用程序分为前端和后端（首先跳过数据库部分）并使用 jms 作为前端和后端通信平台。前端将基于Web，因此我们编写jsps和servlet，打包为war并部署到应用程序服务器（oracle weblogic）。但是对于后端，由于它没有用户界面（只需从 jms 中选择消息，新建一个线程来使用 JPA 进行 db 操作并执行业务逻辑并将结果发送到 jms），我应该使用应用程序服务器来运行我的代码吗？

我尝试将代码放入常规应用程序服务器，将后端线程启动代码包装在 servlet 上下文侦听器中，将启动的线程存储到 servlet 上下文中，一切似乎都很好。弹簧部分似乎也可以工作。这是正确的方法吗？

如果我选择不使用servlet方式，我应该如何打包我的代码并部署到应用服务器？代码的入口点将是什么类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:54:43.137

请参阅[**Spring components 以处理 JMS**](http://static.springsource.org/spring/docs/2.0.x/reference/jms.html)。

简而言之，您可以定义`JMS Listeners`和使用`Message-Driven POJOs`. 对于已经是`using Spring`.

**编辑：**

您可以定义自己的启动类，它将在服务器启动时启动，例如[**Weblogic Startup Class 的文档**](http://docs.oracle.com/cd/E15586_01/apirefs.1111/e13952/taskhelp/startup_shutdown/ConfigureStartupAndShutdownClasses.html)。

# objective-c - 试图理解 Objective-C (RestKit) 中的单例模式

> ID：12879953
> 
> 赞同：1
> 
> 时间：2012-10-14T06:45:18.393
> 
> 标签：objective-c, design-patterns, singleton, restkit

我正在使用一个名为 Restkit 的 iOS 库，它会自动将远程对象映射到本地对象。您可以通过使用 KVC 模式创建映射，然后使用映射加载来做到这一点。

虽然我了解它是如何工作的，但我不明白为什么某些部分以某些方式实现。例如，它使用单例模式，您可以在其中创建**RKObjectMapping**的实例，如下所示：

```
RKObjectMapping* articleMapping = [RKObjectMapping mappingForClass:[Article class]];
[articleMapping mapKeyPath:@"title" toAttribute:@"title"];
[articleMapping mapKeyPath:@"body" toAttribute:@"body"];
[articleMapping mapKeyPath:@"author" toAttribute:@"author"];
[articleMapping mapKeyPath:@"publication_date" toAttribute:@"publicationDate"]; 
```

但是，当实际使用它时，您可以通过调用**RKObjectManager**类的 sharedManager 来访问管理器，如下所示：

```
[[RKObjectManager sharedManager].mappingProvider setMapping:articleMapping
                                                 forKeyPath:@"articles"];

[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/articles"
                                                  delegate:self]; 
```

我不明白的是，为什么还要麻烦将类实例化为**articleMapping**，而您只需要使用**sharedManager**之类的类方法/变量来访问它？为什么不做类似的事情：

```
[RKObjectMapping initWithClass:[Article class]]; 
```

我是一个新手，所以认为有充分的理由采用我不知道的这种模式。任何人都知道或理解为什么会以这种方式实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:56:02.533

将单例模式视为一种以“有序”方式管理全局对象的方式，并保证系统中仅存在一个此类对象。

因此，单例只是一种访问全局唯一对象的方法，该对象将在第一次尝试访问它时被实例化。

一旦您可以访问这个全局的、唯一的对象，它的行为就与您系统中的任何其他对象完全一样：它有自己的状态、方法等。

RestKit 的设计者可能采取的另一种方法是创建`RKObjectManager`一个只有类方法的类，并通过静态全局变量封装其状态。

这样，你就连实例化类的概念都没有了，直接调用它的方法就可以了。另一方面，这是一个非常糟糕的设计决策，IMO，在 Objective-C 中，因为语言缺乏对类成员变量的支持（与 C++ 相反），并且由于单例类的更高可重构性.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:56:13.397

当一个对象需要访问与自身相关的数据时，它使用实例变量（ivars）来存储该数据。但是，**实例**变量是类的特定实例的一部分，而不是类本身 - 从类方法中，它们不能被访问。因此，当您谈论的管理器类是存储/访问其私有数据时，它使用共享实例（单例）来创建实例变量。如果仅将其用作类，则必须将其私有数据存储在全局变量中，这在 C 中被认为是不好的做法。

此外，如果您仔细观察，`RKObjectManager`该类具有属性。在 Objective-C 中，属性总是由底层实例变量支持（无论是在运行时、动态创建还是在编译时，以声明的方式创建）——这就是类不能有属性的原因，这就是为什么单例（一个类的实际实例）是必需的。

没有单例的示例（丑陋）：

```
static int uglyGlobalVar;

@interface UglyClass: NSObject

+ (void)storeData:(int)data;

@end

@implementation UglyClass: NSObject

+ (void)storeData:(int)data
{
    uglyGlobalVar = data;
}

@end 
```

单例示例（更好）：

```
@interface GoodClass: NSObject {
    int data;
}

+ (GoodClass *)sharedInstance;

@property (nonatomic, assign) int data;

@end

@implementation GoodClass: NSObject

@syntehsize data;

// also implement sharedInstance here

@end

// then this class is usable as:
[GoodClass sharedInstance].data = 1337; 
```

# map - 传递结构中的 Go 地图

> ID：12879965
> 
> 赞同：1
> 
> 时间：2012-10-14T06:47:34.237
> 
> 标签：map, go

此代码（在[http://play.golang.org/p/BjWPVdQQrS](http://play.golang.org/p/BjWPVdQQrS)的 Go Playground 上）：

```
package main

import "fmt"

type foodStruct struct {
    fruit map[int]string
    veggie map[int]string
}

func showFood(f map[int]map[int]string) {
    fmt.Println(f[1][1])
}

func main() {
    f := map[int]foodStruct{
        1: {
            fruit: map[int]string{1: "pear"},
            veggie: map[int]string{1: "celery"},
        },
    }
    fmt.Println(f[1].fruit[1])

    g := map[int]map[int]string{1: map[int]string{1: "orange"}}
    showFood(g)

    // showFood(f.fruit) // Compile error: "f.fruit undefined (type map[int]foodStruct has no field or method fruit)"
} 
```

印刷：

```
pear
orange 
```

有什么方法可以将变量*f*的形式传递给 showFood()，以便它打印“梨”？传递 f.fruit 会引发上面注释掉的行中显示的编译错误。这个错误让我很困惑，因为 foodStruct 确实有田间水果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:58:40.713

有几个问题。

首先，`foodStruct`确实有一个字段`fruit`，但`f`不是一个`foodStruct`。它是一个`map[int]foodStruct`，它根本没有任何字段或方法。

其次，没有任何地方`f`有 type `map[int]map[int]string`。如果不创建正确类型的新地图，就`f`无法传递 in 的任何部分。`showFood`

# php - php动态下拉框内容

> ID：12879966
> 
> 赞同：0
> 
> 时间：2012-10-14T06:47:38.363
> 
> 标签：php

我有两个数据表，如下所示。

表格1：

```
--------------------
sbstart sbend totsb
--------------------
  200    205   6 
```

表 2：

```
chkNo
------
 201
 203 
```

我有一个动态创建的下拉框，其中包含表 1 信息，这是从 200 到 205 的所有响应。换句话说，该下拉列表有 200,201,202...205。我现在需要的是在创建下拉框后排除表 2 中的数字。例如，下拉列表在显示时应该只有 200,2004 和 2005。

这是我为根据表 1 获取开始编号和结束编号之间的所有响应所做的代码。有人可以告诉我，一旦创建下拉列表，我如何排除表 2 编号。谢谢。

```
 $con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQLx="SELECT * FROM table1";
$runx=mysql_query($SQLx,$con) or die ("SQL Error");
$norx=mysql_num_rows($runx);

while ($rec = mysql_fetch_array($runx))
    {
        for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
        {
        echo "<option id='options' value='$i'>$i<br></option>";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:55:23.017

试试这个。这会在构建下拉列表之前从 table2 构建一个排除列表：

```
$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");

$exclude = array();
$query = 'SELECT * FROM table2';
$runx=mysql_query($query,$con) or die ("SQL Error");
$norx=mysql_num_rows($runx);

while ($rec = mysql_fetch_array($runx))
{
    $exclude[] = $rec['chkNo'];
}

$SQLx="SELECT * FROM table1"
$runx=mysql_query($SQLx,$con) or die ("SQL Error");
$norx=mysql_num_rows($runx);

while ($rec = mysql_fetch_array($runx))
    {
        for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
        {
            if (!in_array($i, $exclude))
            {
                echo "<option id='options' value='$i'>$i<br></option>";
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:09:57.780

我建议利用 array_diff() 将下拉列表的初始创建限制为仅在第二个表中不存在的那些值，如下所示：

```
//set up the db connection
$con = mysql_connect('localhost','root') or die ("Server connection failure!");
$db = mysql_select_db('regional_data', $con) or die ("Couldn't connect the database");

//get the range of values from the first table
$SQLx = "SELECT * FROM table1";
$runx = mysql_query($SQLx, $con) or die ("SQL Error");
$rec = mysql_fetch_array($runx);

//create an array representing the range of values
$table1_array = array();    
for($i = $rec['sbstart']; $i <= $rec['sbend']; $i++)
{
    $table1_array[] = $i;
}

//get the values to be omitted from the second table
$SQLz = "SELECT * FROM table2";
$runz = mysql_query($SQLz, $con) or die ("SQL Error");

//create an array representing the values to be omitted
$table2_array = array();
while ($rec2 = mysql_fetch_array($runz))
{
    $table2_array[] = $rec2['chkNo'];
}

//compare the arrays
//this results in an array of only the values you wish to include
$final_array = array_diff($table1_array, $table2_array);

//create the dropdown from the resulting array
foreach ($final_array as $value)
{
    echo "<option id='options' value='$value'>$value<br></option>";
} 
```

请参阅： http: [//php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:10:43.353

```
$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQLx="SELECT * FROM table1";
$SQLy="SELECT * FROM table2";
$runx=mysql_query($SQLx,$con) or die ("SQL Error");
$runy=mysql_query($SQLy,$con) or die ("SQL Error");
$norx=mysql_num_rows($runx);

while ($rec = mysql_fetch_array($runx))
    {
        for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
        {
            $exist=0;
            while($rec2=mysql_fetch_array($runy)){
                if($i==$rec2['chkNo']){
                    $exist=1;
                }
            }
            if ($exist==0)
               echo "<option id='options' value='$i'>$i<br></option>";
        }
    } 
```

# opengl - 对非二次幂纹理的硬件支持

> ID：12879969
> 
> 赞同：7
> 
> 时间：2012-10-14T06:48:14.547
> 
> 标签：opengl, graphics, textures

我一直在听到关于在 OpenGL 应用程序中使用非幂的两个纹理是否安全的争议性意见。有人说所有现代硬件都完美地支持 NPOT 纹理，也有人说它不支持，或者性能受到很大影响。

我问的原因是因为我想将某些内容渲染到屏幕大小的帧缓冲区（可能不是 2 的幂）并将其用作纹理。我想了解在这种情况下性能和可移植性会发生什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T09:24:35.100

自很久以前（2004 年）的 OpenGL-2 以来，任意纹理尺寸就被指定为 OpenGL 的核心部分。此后设计的所有 GPU 都支持 NP2 纹理。唯一的问题是性能有多好。

然而，自从 GPU 变得可编程以来，任何基于固定功能纹理聚集访问的可预测模式的优化都变得有点过时了，GPU 现在具有针对一般数据局部性优化的缓存，现在性能也不是什么大问题。事实上，对于 P2 纹理，您可能需要升级数据以匹配格式，这会增加所需的内存带宽。然而，内存带宽是现代 GPU 的第一大瓶颈。因此，使用稍小的 NP2 纹理实际上可能会提高性能。

简而言之：您可以安全地使用 NP2 纹理，性能也不是什么大问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T07:03:48.583

现代图形硬件（来自 ATi/AMD/nVidia 的最后 10 代左右和来自 Intel 的最后几代）上的所有现代 API（我相信除了某些版本的 OpenGL ES）都支持 NP2 纹理。它们已经使用了很长一段时间，特别是用于后期处理。

但是，这并不是说它们与 2 次幂纹理一样方便。一种主要情况是内存打包；当它们是 2 的幂时，驱动程序通常可以更好地将纹理打包到内存中。如果您查看带有 mipmap 的纹理，则基础和所有 mip 可以打包到原始宽度的 150% 和原始高度的 100% 的区域中。某些纹理大小也有可能将内存页面与步幅（纹理行大小，以字节为单位）对齐，这将提供最佳的内存访问情况。NP2 使这种优化更难执行，因此内存使用和寻址可能效率低下。您是否会注意到任何影响在很大程度上取决于驱动程序和应用程序。

离屏效果可能是 NP2 纹理最常见的用例，尤其是屏幕大小的纹理。现在市场上几乎所有执行任何类型的后处理或延迟渲染的游戏都有 1-15 个屏幕外缓冲区，其中许多与屏幕大小相同（对于某些效果，一半或四分之一大小是有用的）。这些通常得到很好的支持，即使使用 mipmap。

因为 NP2 纹理得到广泛支持，并且几乎可以肯定地在台式机和游戏机上使用，所以使用它们应该可以正常工作。如果您担心可能不支持它们的平台或硬件，那么简单的后备方法包括使用最接近的 2 次幂大小（可能会导致质量稍低，但会起作用）或完全放弃效果（具有明显的后果）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-06T12:50:43.990

通过使用 OpenGL 2.0 进行跨平台开发，我在制作游戏（+4 年）和使用 iOS 和 Android 的纹理图集方面拥有丰富的经验

坚持使用最大尺寸为 2048x2048 的 PoT 纹理，因为某些设备（尤其是具有廉价硬件的廉价设备）仍然不支持动态纹理大小，我从现实生活中的测试人员那里知道这一点并亲眼目睹。现在有这么多设备，你永远不知道你将面对什么样的 GPU。

如果您不使用 PoT 纹理，您的 iOS 设备也会显示黑色方块和伪影。

只是一个提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-13T16:08:32.487

即使 OpenGL X 需要任意纹理大小，某些视频卡仍然不完全兼容 OpenGL。我有一个朋友的 IntelCard 遇到 NPOT2 纹理问题（我认为现在 Intel 卡完全兼容）。

你有任何理由使用 NPOT2 纹理吗？比这样做，但请记住，也许一些旧硬件不支持它们，您可能需要一些软件后备来使您的纹理 POT2。

你没有任何理由使用 NPOT2 纹理吗？然后只需使用 POT2 纹理。（某些压缩格式仍然需要 POT2 纹理）

# jquery - 使用 jquery 在滚动时使元素边距为 0

> ID：12879971
> 
> 赞同：-1
> 
> 时间：2012-10-14T06:48:40.243
> 
> 标签：jquery, css, margin, fixed, sidebar

我有一个高度为 170 像素的导航栏。在这个导航栏下面是一个固定位置的侧边栏。我想要做的是让侧边栏以 170 像素的边距开始，在用户滚动 170 像素后有 0 边距；这样，侧边栏看起来就像被浏览器顶部捕获。类似于 Instagram 标题的工作方式。我想要的实际上正是堆栈溢出帖子“编辑器”上的黄色侧边栏的工作原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:35:46.393

你可以尝试这样的事情：

```
$(document).bind('scroll',function(event) {
    var scrollTop = $(window).scrollTop();
    if (scrollTop <= 170) { $('#sidebar').css('top','170px'); }
    else {
        $('#sidebar').css('top',scrollTop+'px');
    }
}); 
```

这是一个工作的[jsfiddle](http://jsfiddle.net/WqhDD/)

# spring - Spring Data REST URI 与实体 ID

> ID：12879975
> 
> 赞同：8
> 
> 时间：2012-10-14T06:49:24.813
> 
> 标签：spring, rest, spring-data-jpa, spring-data-rest, spring-hateoas

Spring Data REST（尤其是 Spring HATEOAS）将 RESTful ID（即 URI）与实体 ID 分离，我在保存新对象时无法将它们链接起来。[请参阅https://github.com/SpringSource/spring-data-rest/issues/13](https://github.com/SpringSource/spring-data-rest/issues/13)上有关此解耦的有趣讨论。

假设客户端应用程序想要创建`Ticket`具有关联资源的新`TicketCategory`资源。我想`Ticket`针对远程 Spring Data REST 端点发布。因为是新的`Ticket`，所以还没有ID。有`TicketCategory`一个 ID，但在客户端上它是上面讨论的 URI。因此，当我保存 时`Ticket`，Spring Data REST 将 传递`Ticket`给不喜欢它的 Spring Data JPA：Spring Data JPA 认为`TicketCategory`- 没有实体 ID - 是暂时的：

```
org.hibernate.TransientPropertyValueException:
    Not-null property references a transient value -
    transient instance must be saved before current operation:
    com.springinpractice.ch13.helpdesk.model.Ticket.category ->
    com.springinpractice.ch13.helpdesk.model.TicketCategory 
```

**更新：**文档位于

[https://github.com/SpringSource/spring-data-rest/wiki/JPA-Repository-REST-Exporter](https://github.com/SpringSource/spring-data-rest/wiki/JPA-Repository-REST-Exporter)

有一个名为“更新关系”的部分描述了使用 HTTP POST 建立实体之间关系的方案。我不知道这是否是当前唯一可用的方法，但似乎这种方法需要在初始帖子中将关联保留为空，然后使用后续帖子对其进行更新。在上述情况下，这是不可取的，因为工单需要类别字段 ( `@NotNull`)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T13:30:54.380

你看过[https://github.com/SpringSource/spring-data-rest/wiki/Embedded-Entity-references-in-complex-object-graphs](https://github.com/SpringSource/spring-data-rest/wiki/Embedded-Entity-references-in-complex-object-graphs)吗？

简而言之，如果导出器发现链接对象代替关系或托管对象（另一个具有导出存储库的实体），它将取消引用它们。

假设您的链接属性称为“类别”，那么您可以创建一个新的票证，如：

```
POST /tickets
Content-Type: application/json

{
  "description": "Description of the ticket or issue",
  "category": {
    "rel": "category.Category",
    "href": "http://localhost:8080/categories/1"
  }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-14T20:44:33.483

Apprently in the newer versions of Spring Data Rest, this should do it:

```
POST /tickets
Content-Type: application/json

{
  "description": "Description of the ticket or issue",
  "category": "http://localhost:8080/categories/1"
} 
```

Going by Oliver Gierke's comment at [Spring Data Rest 2.0.0.RELEASE Breaks Code Working Previously With RC1](https://stackoverflow.com/questions/22097646/spring-data-rest-2-0-0-release-breaks-code-working-previously-with-rc1#comment33577957_22111435)

# jquery - 如何在xsl中使用IP地址

> ID：12879980
> 
> 赞同：2
> 
> 时间：2012-10-14T06:50:42.343
> 
> 标签：jquery, xslt

我正在使用 xsl 从 xsl 生成 html。我必须在 css 中的类名称中使用 ip 地址，如下所示：

```
<td><div title="delete" >
    <xsl:attribute name="class">
         delete_link_<xsl:value-of select="destinationIp"/>
    </xsl:attribute>    
    <img class="row-remover" src="/media/img/remove.png"/>
</div></td> 
```

我有这个jquery函数：

```
 $('.delete_link_<xsl:value-of select="destinationIp"/>').click( function() {
      // do some thing here
 }); 
```

但是因为 ip 地址中有“点”，所以上面的代码不起作用。当我删除 xml 文件中的 destinationIp 标记点时，它可以工作。所以我认为“点”有问题。任何想法让它工作？真的谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:31:21.530

**仅仅删除这些点可能会产生*不良*后果**。

考虑以下两个 IP 地址：

```
13.8.123.4 
```

和

```
138.12.3.4 
```

当点被删除时，我们在两种情况下得到完全相同的结果：

```
1381234 
```

**我相信您希望为每个 IP 地址设置不同的类。如果是这样，请不要删除这些点，而是用合法字符替换它们**：

```
<td><div title="delete" class="delete_link{translate(destinationIp,'.','_')}">
    <img class="row-remover" src="/media/img/remove.png"/>
</div></td> 
```

**使用此代码为上面的两个 IP 地址生成两个不同的类**：

```
delete_link13_8_123_4 
```

和

```
delete_link138_12_3_4 
```

**另请注意，您的原始代码是如何**通过使用 AVT（**[属性值模板](http://www.w3.org/TR/xslt#attribute-value-templates)**）收缩两次（从 6 行到 3 行）的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:53:53.173

嘿，伙计，您将像这样转义 IP 地址：`\\`在每个特殊字符之前使用，这样就可以了。

**工作演示** [http://jsfiddle.net/gubfj/](http://jsfiddle.net/gubfj/)

**样本**

`127\\.0\\.0\\.1`

[https://groups.google.com/forum/?fromgroups#!topic/jquery-en/ugchaJObJFo](https://groups.google.com/forum/?fromgroups#!topic/jquery-en/ugchaJObJFo)

> 在每个特殊字符前使用两个反斜杠。
> 
> jQuery 选择器中的反斜杠转义下一个字符。但是您需要其中两个，因为反斜杠也是 JavaScript 字符串的转义字符。第一个反斜杠转义第二个反斜杠，在字符串中为您提供一个实际的反斜杠 - 然后转义 jQuery 的下一个字符。

希望这适合原因`:)`

**代码**

```
$('.delete127\\.0\\.0\\.1').click( function() {
     alert("you click ==> " + $(this).html());
      // do some thing here
 });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T11:50:45.573

您可以使用 translate() 函数从字符串中删除点字符。

例如...

```
<xsl:value-of select="translate( destinationIp, '.', '')"/> 
```

参考：

1.  [http://zvon.org/xxl/XSLTreference/Output/function_translate.html](http://zvon.org/xxl/XSLTreference/Output/function_translate.html)
2.  （XSLT 1.0）[http://www.w3.org/TR/xpath/#function-translate](http://www.w3.org/TR/xpath/#function-translate) 或
3.  (XSLT 2.0) [http://www.w3.org/TR/xpath-functions/#func-translate](http://www.w3.org/TR/xpath-functions/#func-translate)

# javascript - 为 AJAX POST 数据编码 URL

> ID：12879987
> 
> 赞同：1
> 
> 时间：2012-10-14T06:52:15.183
> 
> 标签：javascript, ajax

我使用 encodeURIComponent 对 URL 进行编码，但在某些 url 上出现 500 SERVER ERROR，我确定问题出在编码中，因为删除数据完全解决了错误。

如何对 URL 进行编码，以便我可以在另一端检索它并且在通话中没有问题？

```
 $.ajax({type:'POST',url: "/insert-url.php", data: 'url='+encodeURIComponent(link)',
        success:function(data_response){
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:11:30.593

```
$.ajax({type:'POST',url: "/insert-url.php", 
        data: 'url='+encodeURIComponent(link)**-->'<---**,
        success:function(data_response){
        }
}); 
```

一个'太多

# ruby-on-rails - link_to :method => :delete 不起作用

> ID：12879988
> 
> 赞同：0
> 
> 时间：2012-10-14T06:52:22.060
> 
> 标签：ruby-on-rails

在一个表格中，我有：

```
= link_to "Delete toy", @toy, :method => :delete, :confirm => "Are you sure?", :class => "btn btn-danger" 
```

这会生成以下 html：

```
<a href="/toys/258" class="btn btn-danger" data-confirm="Are you sure?" data-method="delete" rel="nofollow">Delete toy</a> 
```

然而，当我点击链接时，我只是回到了玩具的展示页面。（我也没有收到确认弹出窗口。）我做错了什么？

根据建议，我在我的内部添加了一个`= javascript_include_tag :all`and ，在 SO 上添加了一堆关于这个确切问题的其他帖子，但这并没有帮助。`= javascript_include_tag "application"``application.html.haml`

更新：这是我的`application.js`文件中的内容：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:22:56.937

删除`= javascript_include_tag :all`布局的一部分。这可能是两次加载 jQuery-UJS，第二次覆盖所有配置的侦听器。

使用资产管道，您只需要包含“应用程序”，而无需包含所有其他文件。

（样式表也是如此）

# ruby - Ruby：开始，睡眠，重试：将增量器放在哪里

> ID：12879994
> 
> 赞同：0
> 
> 时间：2012-10-14T06:53:26.117
> 
> 标签：ruby, twitter

我有一个方法“rate_limited_follow”，它使用我的 Twitter 用户帐户并关注数组“用户”中的所有用户。Twitter 有严格的速率限制，因此该方法通过休眠 15 分钟然后重试来处理这种意外情况。（我没有写这个方法，而是从 Twitter ruby​​ gem api 得到的）。您会注意到它会检查尝试次数是否小于 MAX_ATTEMPTS。

我的用户数组有大约 400 个我正在尝试关注的用户。它一次添加 15 个用户（当速率限制似乎开始时），然后休眠 15 分钟。由于我将 MAX_ATTEMPTS 常量设置为 3（只是为了测试它），我希望它在添加 45 个用户（3 乘以 15）后停止尝试，但它已经过去了，大约每 15 分钟添加 15 个用户，所以它似乎 num_attempts 以某种方式保持在 3 以下，即使它经历了这个周期超过 3 次。我对代码有什么不明白的地方吗？一旦“睡眠”完成并点击“重试”，它从哪里重新开始？num_attempts 没有增加有什么原因吗？

在循环中调用方法

```
>> users.each do |i|
?>   rate_limited_follow(myuseraccount, i)
>> end 
```

带常量的方法定义

```
MAX_ATTEMPTS = 3
  def rate_limited_follow (account, user)

  num_attempts = 0
  begin
    num_attempts += 1
    account.twitter.follow(user)
  rescue Twitter::Error::TooManyRequests => error
    if num_attempts <= MAX_ATTEMPTS
      sleep(15*60) # minutes * 60 seconds
      retry
    else
      raise
    end
  end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:20:32.617

每次调用 rate_limited_follow 都会重置您的尝试次数 - 或者，换句话说，您正在跟踪每个用户的尝试次数，而不是整个用户数组的尝试次数。

从 rate_limited_follow 中提升 num_attempt 的初始化，这样它就不会被每次调用重置，并且您将拥有您正在寻找的行为。

# c# - 无法将类型“NoavaranModel.Student[]”隐式转换为“string[]”

> ID：12879999
> 
> 赞同：0
> 
> 时间：2012-10-14T06:54:28.790
> 
> 标签：c#, asp.net, linq-to-entities

我有这个查询（linq to entity）：

```
var query = from p in dbContext.Students
                        where p.Type == "پیش ثبت نام" && p.Approved == false
                        select p; 
```

如您所见，我想选择所有具有上述条件的学生，然后我想使用以下代码将结果转换为数组：

```
string[] strNumbers = dbContext.Students.Where(p=>p.Type=="پیش ثبت نام" && p.Approved==false).ToArray(); 
```

但上面的代码它'不起作用：“无法将类型'NoavaranModel.Student []'隐式转换为'string []'”并且当我使用此代码时：

```
string[] strNumbers = dbContext.Students.Where(p=>p.Type=="پیش ثبت نام" && p.Approved==false).Cast<string>().ToArray(); 
```

我收到此错误：“无法将类型 'NoavaranModel.Student' 转换为类型 'System.String'。LINQ to Entities 仅支持转换实体数据模型原始类型。”。

然后我想将 strNumbers 传递到 Methode 下面：

```
Utility.SendMessageForStudents(strNumbers); 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T06:57:47.340

您必须返回字符串而不是 where 子句返回的学生对象。您可以使用选择方法选择学号。假设学生有 StudentNumber

```
string[] strNumbers = dbContext.Students.Where(p=>p.Type=="پیش ثبت نام" && p.Approved==false).Select(c=>c.StudentNumber).ToArray(); 
```