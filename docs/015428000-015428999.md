# StackOverflow 问答 15428000-15428999

# asp.net - 带有下拉列表的asp.net gridview更新

> ID：15428002
> 
> 赞同：0
> 
> 时间：2013-03-15T08:45:06.620
> 
> 标签：asp.net, gridview, drop-down-menu, sqldatasource

我有一个从 sqldatasource 中提取数据的 gridview，当单击 Edit 时，我想添加一个下拉列表而不是文本框。下拉列表的值必须预设如下（不是从数据库中提取的）

这是gridview模板代码：

```
<asp:TemplateField HeaderText="Priority" SortExpression="Priority">
   <EditItemTemplate>
        <asp:DropDownList ID="DropDownList1" runat="server" 
         DataTextField='<%# Bind("Priority") %>' 
         DataValueField='<%# Bind("Priority") %>' 
         DataSource='<%# Bind("Priority") %>' >
         <asp:ListItem>1:High</asp:ListItem>
         <asp:ListItem>2:Medium</asp:ListItem>
         <asp:ListItem>3:Low</asp:ListItem>
        </asp:DropDownList>
   </EditItemTemplate>
   <ItemTemplate>
       <asp:Label ID="lblPriority" runat="server" Text='<%# Bind("Priority") %>'></asp:Label>
   </ItemTemplate>
</asp:TemplateField> 
```

我不断收到与此类似的错误：

> DataBinding：“System.Char”不包含名为“3:Low”的属性。

谁能从上面看到是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:54:36.583

您已将 DropDownList 绑定到数据库中的 Priority 字段。因此，每个优先级必须包含以下值之一：

```
1:High
2:Medium
3:Low 
```

优先级字段是否包含整数（即 1、2、3）或值（即高、中、低）而不是：'1:High'、'2:Medium'.'3:Low'？

如果不是这种情况，请提供优先级字段中的一些示例值。

# hover - 当 TD 上有边框时如何覆盖 TR 上的边框

> ID：15428003
> 
> 赞同：1
> 
> 时间：2013-03-15T08:45:08.523
> 
> 标签：hover, border, html-table, tablerow

鉴于以下情况，我如何让 TR 边界覆盖 TD 边界。 `!important`似乎没有奏效。[小提琴](http://jsfiddle.net/rhKda/)就在[这里](http://jsfiddle.net/rhKda/)。

```
<head>
        <style>
            * { font-family: tahoma; }
                table { 
                    border-collapse: collapse; 
                    background-color: rgb(202,217,234);
                }
                table td {
                    font-size: 12pt;
                    padding: .5rem;
                    border: 1px solid rgb(079,129,189);
                }
                table tr:hover {
                    border: 1px solid crimson !important;
                }
                *#first { border: 1px solid black; }

        </style>
<body>

        <table>
                <col id="first" />
                <col id="second" />
                <col id="third" />
                <thead>
                        <tr><th>A</th><th>B</th><th>C</th></tr>
                </thead>
                <tbody>
                        <tr>
                                <td>One</td><td>Fred</td><td>Jim</td>
                        </tr>
                        <tr>
                                <td>Two</td><td>Demo</td><td>Item</td>
                        </tr>
                        <tr>
                                <td>Three</td><td>Foo</td><td>Bar</td>
                        </tr>
                </tbody>
        </table>

</body>
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:49:07.100

我在[Fiddle](http://jsfiddle.net/rhKda/6/)中做到了这一点，但没有单元格边框。我的 CSS 看起来像：

```
 * { font-family: tahoma; }
            table { 
                border-collapse: collapse; 
                background-color: rgb(202,217,234);
            }
            *#first { border: 1px solid black; }
            *#second, *#third {
                border: 1px solid rgb(079,129,189);
            }
            table td {
                font-size: 12pt;
                padding: .5rem;
            }

            table tr:hover {
                border: 1px solid crimson;
            }
             table tr:hover td {
                border: none;
            } 
```

[另一个可行的](http://jsfiddle.net/rhKda/8/)想法是为 Hover 边框提供 2px。

```
 /*Adding this*/
            table tr {
               border: 1px solid rgb(079,129,189);
            }                
            /* Changing this*/
            table tr:hover {
                border: 2px solid crimson;
            } 
```

好的，所以解决方案是使用`ridge`边框类型作为单元格边框：

```
table td {
   font-size: 12pt;
   padding: .5rem;
   border: 1px ridge rgb(079,129,189);
} 
```

# delphi - 如何在显示表单之前强制关注组件

> ID：15428004
> 
> 赞同：9
> 
> 时间：2013-03-15T08:45:12.347
> 
> 标签：delphi, focus, setfocus

我必须显示（与`ShowModal`）一个 Form 有很多`TEdit`，但我想强制关注 a `TEdit`，但并不总是相同，具体取决于上下文。

我不能`SetFocus`在之前使用`ShowModal`（因为表单没有激活）和使用组件`Name`或者`Tag`在我的应用程序中不方便。你有想法吗 ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T09:01:06.633

在我看来，实现目标的最简单方法是分配给[`ActiveControl`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.ActiveControl)表单的属性。您可以在显示表单之前执行此操作。当您稍后显示表单时，VCL 框架将确保`ActiveControl`给定输入焦点。

从[文档](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TCustomForm.ActiveControl)中：

> 如果窗体没有焦点，`ActiveControl`是窗体上的控件，当窗体获得焦点时将获得焦点。

# android - ListView 具有带有图像和搜索的 TextView

> ID：15428012
> 
> 赞同：0
> 
> 时间：2013-03-15T08:46:10.777
> 
> 标签：android, search, android-listview, android-adapter

我正在开发一个应用程序。我需要一个具有文本视图和图像的列表视图。我这样做是：

XML 中的列表视图：

```
<ListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/tablelayout1"
    android:layout_below="@+id/edittext_searchbar"
    android:layout_margin="15dip"
    android:listSelector="@drawable/list_selector"
    android:divider="#623b42"
    android:dividerHeight="0.5dip"
    android:cacheColorHint="#00000000"
    android:overScrollMode="never" >
</ListView> 
```

XML中列表视图的适配器是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_item_selector" >

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:stretchColumns="*"
        tools:ignore="UselessParent" >

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            tools:ignore="UselessParent" >

            <TextView
                android:id="@+id/textview"
                android:layout_width="0sp"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center_vertical"
                android:paddingLeft="5sp"
                android:textColor="@color/color_black"
                android:textSize="18sp"
                tools:ignore="SelectableText" />

            <ImageView
                android:id="@+id/imageview"
                android:layout_width="0sp"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:contentDescription="@string/string_todo"
                android:paddingRight="5sp" />
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

适配器的 .java 如下：

```
public class CustomListAdapter extends ArrayAdapter<String> {
    /** Global declaration of variables. As there scope lies in whole class. */
    private Context context;
    private String[] Listofdata;
    ImageClass icon[] = null;

    /** Constructor Class */
    public CustomListAdapter (Context context,String[] mainList, ImageClass[] MenuIcon) {
        super(context,R.layout.mainmenu_screen_adapter_layout,mainList);
        this.context = context;
        this.Listofdata= mainList;
        this.icon = MenuIcon;
    }

    /** Implement getView method for customizing row of list view. */
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        // Creating a view of row.
        View rowView = inflater.inflate(R.layout.mainmenu_screen_adapter_layout, parent, false);

        TextView textView = (TextView)rowView.findViewById(R.id.textview);
        ImageView imageView = (ImageView)rowView.findViewById(R.id.imageview);

        textView.setText(menuListofAdapter[position]);

        ImageClass MenuIcon = icon[position];
        imageView.setImageResource(MenuIcon .icon);

        return rowView;
    }
} 
```

在 main.java 中，我将代码编写为：

对于图像，我创建了一个图像数组：

```
ImageClass MenuIcon[] = new ImageClass []{
    new ImageClass (R.drawable.veg),
    new ImageClass (R.drawable.non_veg),
    new ImageClass (R.drawable.liquor),
    new ImageClass (R.drawable.desert),
    new ImageClass (R.drawable.beverages)
}; 
```

对自定义适配器的调用是：

```
CustomListAdapter  adapter = new CustomListAdapter (this,mainList,MenuIcon);
listView.setAdapter(adapter); 
```

现在我将列表视图上的搜索应用为：

```
edittextSearch.addTextChangedListener(new TextWatcher(){
    public void afterTextChanged(Editable s){
    // Abstract Method of TextWatcher Interface.
}
public void beforeTextChanged(CharSequence s,int start, int count, int after){
    // Abstract Method of TextWatcher Interface.
}
public void onTextChanged(CharSequence s,int start, int before, int count){
    searchedData.clear();
    for (int i = 0, j = 0; i < mainMenuList.length; i++) {
        if (((String)mainList[i].toLowerCase(Locale.getDefault())).contains(edittextSearch.getText().toString().toLowerCase())) {
            searchedData.add(mainMenuList[i].toString());
        }
    }
    menuSearchList = searchedData.toArray(new String[searchedData.size()]);
    CustomListAdapter  adapter = new CustomListAdapter  (main.this,menuSearchList,MenuIcon);            
    listView.setAdapter(adapter);
} 
```

但问题是：

当我搜索任何数据时，搜索已正确完成，但未搜索相应的图像，因为我不知道如何应用逻辑来获取搜索项目的图像。

所以请建议我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:07:29.340

试试这个

```
 //put this where you declared searchedData
    ArrayList<ImageClass> mImageSearched = new ArrayList<ImageClass>;

public void onTextChanged(CharSequence s,int start, int before, int count){
    searchedData.clear();
    mImageSearched.clear();
    for (int i = 0, j = 0; i < mainMenuList.length; i++) {
        if (((String)mainList[i].toLowerCase(Locale.getDefault())).contains(edittextSearch.getText().toString().toLowerCase())) {
            searchedData.add(mainMenuList[i].toString());
            mImageSearched.add(MenuIcon[i]);
        }
    }
    menuSearchList = searchedData.toArray(new String[searchedData.size()]);
    ImageClass mImageSearchArray[] =  mImageSearched.toArray(new ImageClass[mImageSearched.size[]]);

    CustomListAdapter  adapter = new CustomListAdapter  (main.this,menuSearchList,mImageSearchArray);            
    listView.setAdapter(adapter);
} 
```

而且您还必须更改适配器构造函数

```
public CustomListAdapter (Context context,String[] mainList, ImageClass[] mMenuIcon) {
        super(context,R.layout.mainmenu_screen_adapter_layout,mainList);
        this.context = context;
        this.Listofdata= mainList;
        this.icon = mMenuIcon;
    } 
```

# c# - 对于此示例输出，如何使用 C# 在 sql 中添加 IDNumber：1300000001,1300000002,1300000003,13

> ID：15428013
> 
> 赞同：-5
> 
> 时间：2013-03-15T08:46:27.103
> 
> 标签：c#, sql-server-2008

如何`IDNumber`为此示例输出添加 SQL：

```
 1300000001,1300000002,1300000003,13...... 
```

前两位数字必须是当前年份的最后两位数字，而后 8 位数字`idnumber`必须是自动编号或序列号，例如`00000001,00000002,00000003,00000004..`

因为它将作为学生表的主键..

tnx的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:51:02.387

这是我生成 ID 的方式：

```
CREATE OR REPLACE TRIGGER GEN_ID BEFORE INSERT ON DEMO FOR EACH ROW
DECLARE
    TEMP_ID VARCHAR(10);
    HIGHEST_NUM NUMBER;
    N NUMBER;
    NUM_OF_DIGITS NUMBER;
BEGIN
    SELECT NVL(MAX(EMPNO),0)+1 INTO HIGHEST_NUM FROM DEMO;
    N:=HIGHEST_NUM;
    NUM_OF_DIGITS :=0;
    WHILE N!=0
    LOOP
        NUM_OF_DIGITS := NUM_OF_DIGITS + 1;
        N := TRUNC(N/10);
    END LOOP;
    TEMP_ID :='P';
    FOR I IN 1..(5-NUM_OF_DIGITS-1)
    LOOP
        TEMP_ID:=TEMP_ID||0;
    END LOOP;
    TEMP_ID := TEMP_ID||HIGHEST_NUM;
    :NEW.EMPNO := TEMP_ID;
END;
/ 
```

使用这个逻辑我有一个角色，所以我使用连接。这可能是一种方式。我在 Oracle 中厌倦了这个，不确定 C#。

这就是逻辑。

您需要生成一个序列，其中当前值取决于前一个`ID`对吗？所以，

**第一步**是获取最后使用的 id 值。这可以使用 MAX(column) 然后将最大数字加一，这是您想要的序列号，即 1,2,3....等等。

**第 2 步：**得到数字后，计算数字中存在的位数

**第 3 步：**您必须生成一个 10 位数字，前 2 位数字将是 2014 年 12 月 13 日，具体取决于年份。因此，您需要获取当前年份的最后 2 位数字。

**第四步：**加上10-2[as 2 digits of year]——序列最大值的位数，存储为id。

**第 5 步：**将最大值与 id 连接起来。

# grid - Kendo Grid - 它自己的加载指示器

> ID：15428018
> 
> 赞同：11
> 
> 时间：2013-03-15T08:46:40.300
> 
> 标签：grid, kendo-ui, loading, indicator

Kendo 网格在加载、分页、排序时会自动提供自己的 Loading 指示器。它工作正常。

但我不希望显示/隐藏这个内置的加载指示器。

如何禁用此功能？

请给我提意见。

谢谢，维诺特

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T09:29:47.320

很简单，只需用 CSS 将其隐藏即可。您的选择器需要比内置的 Kendo 类更具体。您可以为此使用网格的 ID。

```
#grid .k-loading-image {
    background-image: none;
} 
```

如果你想删除加载掩码，你也可以使用 CSS 来完成。

```
#grid .k-loading-color {
    opacity: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T15:18:07.133

我有两个名为“grid1”和“grid2”的网格 - 每个都包含在一个 div 中；命名为“grid1panel”和“grid2panel”。为了删除微调器/等待光标，我为网格面板“.k-loading-image”和“.k-loading-color”添加了一个覆盖；这仅针对这些特定网格将其删除。

# 示例 CSS

```
/* DISABLE KENDO SPINNER/WAIT CURSOR */
.grid1panel .k-loading-image {
    background-image: none;
}
.grid1panel .k-loading-color {
    opacity: 0;
}
.grid2panel .k-loading-image {
    background-image: none;
}
.grid2panel .k-loading-color {
    opacity: 0;
} 
```

# sql - 如果条件适用则获取行，否则为单行

> ID：15428026
> 
> 赞同：3
> 
> 时间：2013-03-15T08:47:03.040
> 
> 标签：sql, sql-server, tsql

我有一个案例，我有 2 张桌子，`Customers`并且`Transactions`.

许多客户可能形成一个客户组（记录在`Customers`表内）。如果该组的所有客户都具有特定条件（数字列），我需要`Customers`在一行（即每组）中显示某些总和`xCol <> 5`。如果其中任何一个（也就是至少一个）有`xCol = 5`，我需要显示所有客户而不是组。

客户表

```
Customer    Group       Customer Code
ALPHA   GROUP A     1
BETA    GROUP A     2
GAMMA   GROUP A     3
DELTA   GROUP B     4
LAMDA   GROUP B     5 
```

交易表

```
Customer Code   xCol    Amount
1                   1   4
2                   1   4
3                   1   4
4                   5   1
5                   2   2 
```

在上述情况下，我将需要显示这些：

```
Customer    Group       Amount
-----           GROUP A     12
DELTA           GROUP B     1
LAMDA           GROUP B     2 
```

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:21:27.897

尝试：

```
with cte as
(select c.*,
        t.Amount,
        max(case xCol when 5 then 1 end) over (partition by c.[Group]) xCol5
 from customers c
 left join transactions t on c.[Customer Code] = t.[Customer Code])
select case xCol5 when 1 then [Customer Code] end [Customer Code],
       [Group],
       sum(Amount) Amount
from cte
group by [Group], case xCol5 when 1 then [Customer Code] end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:27:28.967

需要一些优化，但你可以去

```
SELECT *
  FROM (SELECT tc.CUSTOMER, tc.GROUP, tt.AMNT AS AMOUNT
          FROM CUSTOMERS tc
               JOIN TRANSACTIONS  tt
                  ON tc.CUST_CODE = tt.CUST_CODE
               JOIN (SELECT DISTINCT tc.GROUP
                       FROM CUSTOMERS  tc JOIN TRANSACTIONS  tt
                               ON tt.CUST_CODE = tc.CUST_CODE
                      WHERE tt.XCOL = 5) spgrp
                  ON spgrp.GROUP = tc.GROUP)
UNION ALL
(  SELECT '----' AS CUSTOMER, tc.GROUP, SUM (tt.AMNT) AS AMOUNT
     FROM CUSTOMERS  tc
          JOIN TRANSACTIONS  tt
             ON tc.CUST_CODE = tt.CUST_CODE
          JOIN ( (  SELECT DISTINCT GROUP FROM TEST_CUST)
                MINUS
                (SELECT DISTINCT tc.GROUP
                   FROM CUSTOMERS tc JOIN TRANSACTIONS tt
                           ON tt.CUST_CODE = tc.CUST_CODE
                  WHERE tt.XCOL = 5)) othgrp
             ON othgrp.GROUP = tc.GROUP
 GROUP BY tc.GROUP)
ORDER BY 2, 1 
```

# iphone - 添加一个按钮部分的标题？

> ID：15428028
> 
> 赞同：2
> 
> 时间：2013-03-15T08:47:14.777
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个包含两个部分的 tableView 我想在部分标题中添加一个按钮（操作按钮） 可以在示例图像中做同样的事情吗？

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

if(section ==0)
{
    return 0;
}
else{
    UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 300.0, 20.0)];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeContactAdd];
    [button setFrame:CGRectMake(275.0, 5.0, 30.0, 30.0)];
    button.tag = section;
    button.hidden = NO;
    [button setBackgroundColor:[UIColor clearColor]];
    [button addTarget:self action:@selector(insertParameter:) forControlEvents:UIControlEventTouchDown];
    [myView addSubview:button];
    return myView;    }
} 
```

![在此处输入图像描述](../Images/c2fe787df4d2ae530450b7d0f51b59dd.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T08:52:50.833

像这样尝试可能对你有帮助，

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
    //Headerview
    UIView *myView = [[[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 300.0, 20.0)] autorelease];
     UIButton *button = [UIButton buttonWithType:UIButtonTypeContactAdd];
    [button setFrame:CGRectMake(275.0, 5.0, 30.0, 30.0)];
    button.tag = section;
    button.hidden = NO;
    [button setBackgroundColor:[UIColor clearColor]];
    [button addTarget:self action:@selector(insertParameter:) forControlEvents:UIControlEventTouchDown];
    [myView addSubview:button];
      return myView;
} 
```

您可以在此处更改标题部分的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
    return 40.0;
} 
```

要获得相同的 Button 图像，您可以使用自定义图像，通过使用默认图像，您不能那样显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:17:56.353

您的代码中的问题是`button`框架是`(275.0, 5.0, 30.0, 30.0`)，但`myView`框架是`(0.0, 0.0, 300.0, 20.0)`. 的高度`button`是30，但`myView`只有20。的 Y 位置`button`为 5，因此`myView`高度需要为 40。

将`myView`帧更改为 (0.0, 0.0, 300.0, 40.0)。

并且该部分的高度也使用`heightForHeaderInSection`: 委托方法设置为 40。

只需按照以下步骤....

1.  将`myView`框架设置为`(0.0, 0.0, 300.0, 40.0)`.
2.  将`button`框架设置为`(275.0, 5.0, 300.0, 20.0)`.
3.  `heightForHeaderInSection`使用委托方法将部分的高度设置为 40 。

这将解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T08:55:39.297

对的，这是可能的。
为此，您必须使用 UITableView Delegate 方法创建自定义`View`并`UIButton`返回：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
 ///your implementation
  return customView;
} 
```

使您的视图高度为 45 而不是 20。它太小了。

```
UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 300.0, 20.0)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-10T06:50:07.967

设置标题视图的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {

    return 81;

} 
```

# jquery - 如果相关 div 有 img src，则隐藏 span""

> ID：15428031
> 
> 赞同：0
> 
> 时间：2013-03-15T08:47:17.260
> 
> 标签：jquery, if-statement, image, src

我是这里的新蜜蜂......我已经和jquery战斗了一段时间。（在我的学习曲线中）

这就是我想要做的：

我正在使用如下列表：

```
<ul>
<li class="li-listb"><span id="banner1">Banner I</span></li>   
<li class="li-listb"><span id="banner2">Banner II</span></li>           
</ul> 
```

并使用 Jquery

```
<script>
$(function () {

// Make the divs have equal heights
var h1 = $("#div1").height();
var h2 = $("#div2").height();
$("#div1,#div2").height(Math.max(h1, h2));

// Then hide the second div
$("#div2").hide();

// Then add a click handlers to the buttons
$("#banner1").click(function () {
    $("#div1").show();
    $("#div2").hide();
});
$("#banner2").click(function () {
    $("#div1").hide();
    $("#div2").show();
});
})</script> 
```

我将跨度链接到以下 div

```
<div class="workspace">
<div id="div1">
<img src="http://weareunio.com/unio/wp-content/uploads/2013/02/728x901.jpg"/>
</div>
<div id="div2">
<img src=""/>
</div>
</div> 
```

当 div2 img src="" 为空时，我想隐藏 Span #banner2。

任何帮助表示赞赏！

谢谢， 什里

[http://jsfiddle.net/Yx5hu/](http://jsfiddle.net/Yx5hu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:31:46.787

检查以下代码

```
<ul>
   <li class="li-listb"><span id="banner1">Banner I</span></li>   
   <li class="li-listb"><span id="banner2">Banner II</span></li>           
</ul>
<div class="workspace">
 <div id="div1">
   <img src="http://weareunio.com/unio/wp-content/uploads/2013/02/728x901.jpg"/>
 </div>
<div id="div2">
   <img src=""/>
</div> 
```

和 javascript

```
$("div.workspace div").each(function(index){    
var src = $(this).find("img").attr("src");
var n = ($(this).attr("id")).substring(3);
if(src == "")
{
    var bnrID = "#banner"+n;
    $(bnrID).hide();
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:51:46.223

尝试：

```
$("ul li").each(function(index){
 if($('#div'+ (index+1) + ' img' ).attr('src') == "")
    $(this).hide()
}); 
```

**[样本](http://jsfiddle.net/Yx5hu/4/)**

这将适用于任意数量的`li`s 和`div`s，只要它们的 id 匹配

# android - 我正在使用地理位置 API。每次我发送请求时，我都会收到带有错误 403 的 JSON 响应？

> ID：15428033
> 
> 赞同：2
> 
> 时间：2013-03-15T08:47:30.473
> 
> 标签：android, google-api

**使用地理位置 API**

每次我发送发布请求时，我都会收到**错误代码：403 Acess not Configured**的响应。

我已按照 Google API 控制台中提到的所有步骤进行操作。

我正在使用以下网址。

URL="https://www.googleapis.com/geolocation/v1/geolocate?key=" 和 API_KEY="<"My_Key">"

这是我的代码

```
HttpClient client = new DefaultHttpClient();
    HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000);
    HttpResponse response;
    try {
        HttpPost post = new HttpPost(URL + API_KEY);
        StringEntity se = new StringEntity(mRequestString);
        post.addHeader("content-type", "application/json");
        post.setEntity(se);
        response = client.execute(post);
        /* Checking response */
        if (response != null) {
            InputStream in = response.getEntity().getContent();
            mJSONResponse = convertStreamToString(in);
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
    return mJSONResponse; 
```

我总是得到的 JSON 响应是：

```
 {
    "error"{
      errors: [
       {
        "domain" : "usageLimits"
         "reason" : "accessNotConfigured"
        "message" : "Access Not Configured"
       }
      ],
      "code" :403
      "message" :"Access Not Configured"
     }
 } 
```

请任何人帮助我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:18:02.787

根据[Here](https://developers.google.com/maps/documentation/business/geolocation/)，可以使用以下2种情况：

**情况1 ：** `dailyLimitExceededusageLimits`

> 您已超出每日限额。

**案例2：** `userRateLimitExceeded usageLimits`

> 您已超出在 API 控制台中配置的每用户每秒请求数限制。应配置此限制以防止单个或一小组用户用尽您的每日配额，同时仍允许所有用户进行合理访问。

希望它会有所帮助。

# regex - 如果第一行包含特定字符，如何删除一行中的 3 行？

> ID：15428036
> 
> 赞同：0
> 
> 时间：2013-03-15T08:47:38.497
> 
> 标签：regex, r, row

我有一个数据文件（它是一个有 290 行和 2 列的矩阵），如下所示：

```
# RIR1
ABABABABABABABABAA
ABABABABABABABABBA
# WR
ABABABABABABABABAB
BABABBABABABABABAA
# BR2
ABABABABABABABBABA
ABBABABABABABABABA
# SL
AAABABABABABABBABA
AAABBABABABABABABA 
```

我想删除所有用于 SL 和 WR 的数据（例如）。所以我将只有：

```
# RIR1
ABABABABABABABABAA
ABABABABABABABABBA
# BR2
ABABABABABABABBABA
ABBABABABABABABABA 
```

我知道如何删除一行开始或包含某些内容，但不知道如何处理一行中的 3 行。

这就是我用于一行的内容：

```
old<-old[!substr(old[1,],1,5)=="# BR2",]
old<-old[!substr(old[1,],1,6)=="# RIR1",] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:59:47.693

您可以使用正则表达式来删除不需要的部分。

```
txt <- '# RIR1
ABABABABABABABABAA
ABABABABABABABABBA
# WR
ABABABABABABABABAB
BABABBABABABABABAA
# BR2
ABABABABABABABBABA
ABBABABABABABABABA
# SL
AAABABABABABABBABA
AAABBABABABABABABA' 
```

然后删除部分供`WR`您使用`gsub`，如下所示。（注：`cat`命令仅用于打印结果

```
cat(gsub('(.*)(# WR.*?)(#.*)', '\\1\\3', txt)) 
```

输出将是

```
# RIR1
ABABABABABABABABAA
ABABABABABABABABBA
# BR2
ABABABABABABABBABA
ABBABABABABABABABA
# SL
AAABABABABABABBABA
AAABBABABABABABABA 
```

# f# - 递归调用的函数类型推断

> ID：15428037
> 
> 赞同：3
> 
> 时间：2013-03-15T08:47:47.740
> 
> 标签：f#, type-inference

我正在尝试实现一种自定义语言，该语言允许从其最后一条语句中推断出函数返回类型。但是，当找到直接或间接递归函数调用时，类型推断系统显然会失败。

```
func factorial(a:int) -> 
    if a == 0
        1
    else
        a * factorial(a - 1) 
```

例如，即使参数类型未指定，F# 也会这样做：

```
let rec fact i =
    if i = 0 then 1 else i * fact (i-1) 
```

这个系统是如何工作的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T09:55:08.430

F# 类型检查器使用[Damas-Hindley-Milner](http://en.wikipedia.org/wiki/Hindley%E2%80%93Milner)类型推断算法。阶乘的例子可以大致解释如下：

*   从 的声明中`fact`，我们在表单中得到了它的类型，`tx -> ty`其中`tx = t(i)`的`t(i)`类型是一个值`i`。

*   从等式检查，因为`val (=): 'T -> 'T -> bool`我们也有`t(i) = t(0) = int`.

*   从`then`分支，我们得到另一个约束`ty = t(1) = int`。
*   从`else`分支，普通`(*)`运算符是`'T -> 'T -> 'T`这样我们得到`t(i) = ty`.

基于一组约束：

```
tx = t(i)
t(i) = t(0) = int
ty = t(1) = int
t(i) = ty 
```

使用统一，我们得出`tx = ty = int`并推断出`fact`as的类型`int -> int`。这也意味着如果您更改子句的顺序`if/then/else`（通过反转条件），类型推断仍然可以正常工作。

也就是说，这是类型推断算法的一个非常简单的示例。您可以按照上面的 Wikipedia 链接阅读更多相关信息。

为了将该算法应用于您的自定义语言，您可以在各种函数式编程书籍中找到实现。有关更多详细信息，请参阅此线程[Damas-Hindley-Milner 类型推理算法实现](https://stackoverflow.com/questions/3641967/damas-hindley-milner-type-inference-algorithm-implementation)。

# php - 想要在 RSS 解析器库代码中添加内容编码

> ID：15428038
> 
> 赞同：1
> 
> 时间：2013-03-15T08:47:49.533
> 
> 标签：php, codeigniter, rss, encode, rss-reader

我正在使用 CodeIgniter 和 RSS 解析器库。我对这段代码没问题。

> function get_ars() { // 加载 RSS 解析器 $this->load->library('rssparser');
> 
> ```
> // Get 6 items from arstechnica
> $rss = $this->rssparser->set_feed_url('http://feeds.arstechnica.com/arstechnica/index/')->set_cache_life(30)->getFeed(6);
> 
> foreach ($rss as $item)
> {
>     echo $item['title'];
>     echo $item['description'];
> } } 
> ```

但我想为内容编码添加更多内容。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:38:04.100

我在[http://blog.stuartherbert.com/php/2007/01/07/using-simplexml-to-parse-rss-feeds/](http://blog.stuartherbert.com/php/2007/01/07/using-simplexml-to-parse-rss-feeds/) Open application/libraries/Rssparser.php 找到了解决方案。转到第 107 行添加以下语句。

```
$ns = $xml->getNamespaces(true);
$content = $item->children($ns['content']);
$data['content'] = (string) trim($content->encoded); 
```

你可以使用

```
echo $item['content']; 
```

在您的视图文件中。

# php - 组合天数的一部分

> ID：15428039
> 
> 赞同：0
> 
> 时间：2013-03-15T08:47:52.987
> 
> 标签：php, mysql, arrays, foreach

我有一项艰巨的任务是显示各个地方的小时数。我想结合时间从一个晚上开始到第二天早上结束的实例。任何人都知道我如何能够修改下面的脚本以使其正常工作？

**我有一个如下所示的 MySQL 表：**

![在此处输入图像描述](../Images/4fbb6529bcf9831c9c083d1f0eb8ebc8.png)

**我当前的 PHP 脚本从表中输出日期和时间，如下所示：**

周一至周四：晚上 11:00 至晚上 11:59

周一至周四：凌晨 12:00 至凌晨 2:00

**我希望它看起来像这样：**

周一至周四：晚上 11:00 至凌晨 2:00

**这是我当前的 PHP 脚本：**

```
<?php

//connection

$day_times = array();
$days_map = array(
     'monday'     => 'Mon',
     'tuesday'    => 'Tue',
     'wednesday'  => 'Wed',
     'thursday'   => 'Thu',
     'friday'     => 'Fri',
     'saturday'   => 'Sat',
     'sunday'     => 'Sun'
);

$query = mysql_query("SELECT distinct time_group_id, start_time, end_time 
FROM times WHERE place_id = '80' ORDER BY id ASC");

while ($row=mysql_fetch_assoc($query)) {
    $start_time = stripslashes($row['start_time']);
    $end_time = stripslashes($row['end_time']);

    $start_time = strtotime("$start_time");
    $end_time = strtotime("$end_time");

    $day = strtolower($row['day']);

    $day_times[$row['time_group_id']][$day][] = $start_time;
    $day_times[$row['time_group_id']][$day][] = $end_time;

// within your query while loop
$day_times[$row['time_group_id']]['times'][] = $start_time;
$day_times[$row['time_group_id']]['times'][] = $end_time;
$day_times[$row['time_group_id']]['days'][]  = $day;

foreach ($day_times as $timegroup) {
    $first_day = array_shift($timegroup['days']);
    $last_day = array_pop($timegroup['days']);
    $times = $timegroup['times'];

    echo $days_map[$first_day] . ' - ' . $days_map[$last_day] . ': ';
    echo date('g:ia', min($times));
    echo ' to ';
    echo date('g:ia', max($times));     
    echo '<br />';
} 

}

?> 
```

**目前得到这样的输出：**

周一至周六：下午 4:00 至晚上 7:00

周一至周四：晚上 11:00 至晚上 11:59

周一至周四：凌晨 12:00 至凌晨 2:00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:40:17.030

**编辑：**
我认为这可以在不重写表格以使您将结果分组在一起的情况下在代码中解决。目前您只有 time_group_id 作为某种分隔符。第一段和第二段代码将以这种方式对结果进行分组，但最后一段根本没有对它们进行分组。找到一个规则，您可以在表格中拆分结果，然后很容易根据需要显示它们。

第一的：

1) 停止使用 mysql_ 内置函数，它们将从较新版本的 PHP 中删除。

试试这样的脏程序代码：

```
$day_times = array();
$days_map = array(
     'monday'     => 'Mon',
     'tuesday'    => 'Tue',
     'wednesday'  => 'Wed',
     'thursday'   => 'Thu',
     'friday'     => 'Fri',
     'saturday'   => 'Sat',
     'sunday'     => 'Sun'
);

$query = mysql_query("SELECT distinct time_group_id, start_time, end_time 
FROM times WHERE place_id = '80' ORDER BY id ASC");

while ($row=mysql_fetch_assoc($query)) {
    $start_time = stripslashes($row['start_time']);
    $end_time = stripslashes($row['end_time']);

    $start_time = strtotime("$start_time");
    $end_time = strtotime("$end_time");

    $day = strtolower($row['day']);

    $day_times[$row['time_group_id']][$day][] = $start_time;
    $day_times[$row['time_group_id']][$day][] = $end_time;
} 
```

这应该给你一个数组：

```
[time_group_id] => Array(
                      'monday' => Array(
                           '1123323444',
                           '4443543644',
                           '1123323444',
                           '2332133242',
                           '9782122333',
                           '3246556444'
                       ),
                       'tuesday' => Array(
                           '1123323444',
                           '4443543644',
                           '1123323444',
                           '2332133242',
                           '9782122333',
                           '3246556444'
                       // more days and times
[time_group_id] => Array(
                      'monday' => Array(
                           '1123323444',
                           '4443543644',
                           '1123323444',
                           '2332133242',
                           '9782122333',
                           '3246556444'
                       ),
                       'tuesday' => Array(
                           '1123323444',
                           '4443543644',
                           '1123323444',
                           '2332133242',
                           '9782122333',
                           '3246556444'
                       // more days and times

foreach ($day_times as $timegroup => $days) {
    foreach ($days as $day => $times) {
    echo $day .': ';
    echo date('g:ia', min($times));
    echo ' to ';
    echo date('g:ia', max($times));     
    echo '<br />';
    } 
} 
```

这将为您提供每一天的开始和结束时间。因为您希望它们按连续天数分组：

```
// within your query while loop
$day_times[$row['time_group_id']]['times'][] = $start_time
$day_times[$row['time_group_id']]['times'][] = $end_time;
$day_times[$row['time_group_id']]['days'][]  = $day;

foreach ($day_times as $timegroup) {
    $first_day = array_shift($timegroup['days']);
    $last_day = array_pop($timegroup['days']);
    $times = $timegroup['times'];

    echo $days_map[$first_day] . ' - ' . $days_map[$last_day] . ': ';
    echo date('g:ia', min($times));
    echo ' to ';
    echo date('g:ia', max($times));     
    echo '<br />';
} 
```

这假设您按连续顺序提取日期，例如周一、周二、周三、周四。

**更新：**

这整个块应该是你所需要的：

```
$day_times = array();
$days_map = array(
  'monday'     => 'Mon',
  'tuesday'    => 'Tue',
  'wednesday'  => 'Wed',
  'thursday'   => 'Thu',
  'friday'     => 'Fri',
  'saturday'   => 'Sat',
  'sunday'     => 'Sun'
);

$query = mysql_query("SELECT distinct time_group_id, start_time, end_time 
FROM times WHERE place_id = '80' ORDER BY id ASC");

while ($row=mysql_fetch_assoc($query)) {
    $start_time = stripslashes($row['start_time']);
    $end_time = stripslashes($row['end_time']);

    $start_time = strtotime("$start_time");
    $end_time = strtotime("$end_time");

    $day = strtolower($row['day']);

    $day_times[$row['time_group_id']]['times'][] = $start_time
    $day_times[$row['time_group_id']]['times'][] = $end_time;
    $day_times[$row['time_group_id']]['days'][]  = $day;
}

foreach ($day_times as $timegroup) {
    $first_day = array_shift($timegroup['days']);
    $last_day = array_pop($timegroup['days']);
    $times = $timegroup['times'];

    echo $days_map[$first_day] . ' - ' . $days_map[$last_day] . ': ';
    echo date('g:ia', min($times));
    echo ' to ';
    echo date('g:ia', max($times));     
    echo '<br />';
} 
```

**更新 2：**

```
$day_times = array();
$days_map = array(
  'monday'     => 'Mon',
  'tuesday'    => 'Tue',
  'wednesday'  => 'Wed',
  'thursday'   => 'Thu',
  'friday'     => 'Fri',
  'saturday'   => 'Sat',
  'sunday'     => 'Sun'
);

$query = mysql_query("SELECT distinct time_group_id, start_time, end_time, day
FROM times WHERE place_id = '80' ORDER BY id ASC");

while ($row=mysql_fetch_assoc($query)) {
    $start_time = stripslashes($row['start_time']);
    $end_time = stripslashes($row['end_time']);

    $start_time = strtotime("$start_time");
    $end_time = strtotime("$end_time");

    $day = strtolower($row['day']);

    $day_times[] = $start_time
    $day_times[] = $end_time;
    $days[]      = $day;
}

$first_day = array_shift($days);
$last_day = array_pop($days);

echo $days_map[$first_day] . ' - ' . $days_map[$last_day] . ': ';
echo date('g:ia', min($day_times));
echo ' to ';
echo date('g:ia', max($day_times));    
echo '<br />'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:03:10.190

看看 PHP 提供的[日期和时间](http://php.net/manual/en/book.datetime.php)函数和类。这将使您的生活比尝试自己重新创建此功能要容易得多。

[DateTime](http://php.net/manual/en/class.datetime.php)类非常智能，并且可以接受大多数表示日期和时间的字符串格式。如果你永远在 64 位处理器上或者不担心 2038 年[`strtotime()`](http://php.net/manual/en/function.strtotime.php)也是非常强大的。

# symfony - SonataAdminBundle - 如何自定义管理导航栏

> ID：15428044
> 
> 赞同：1
> 
> 时间：2013-03-15T08:48:04.797
> 
> 标签：symfony, symfony-sonata, sonata-admin

我已经安装了。产品`symfony 2.2`的`SonataAdminBundle`NavBar 看起来像这样：

```
Dashboard / Product List /{companyName}\{bundleName}\Entity\Product:0000000012fbfd4c00000000c6c10493 
```

我希望它看起来像这样：

```
Dashboard / Product List /{Productname} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:07:35.990

好的，我有解决方案。只有我需要做的是在实体中创建 __toString 函数

# ios - 我可以在模拟器中运行旧的应用程序存档吗？

> ID：15428048
> 
> 赞同：17
> 
> 时间：2013-03-15T08:48:18.933
> 
> 标签：ios, objective-c, xcode

当我们通过 XCode 将 iOS 应用的新版本部署到 App Store 时，会生成一个存档。

有没有办法获取旧存档并在模拟器中运行它？我想这样做是为了能够轻松地测试服务器端代码与所有以前版本的应用程序（或至少当时最常用的两个）的向后兼容性。

我知道我可以提交到 GIT 存储库并提取特定版本，但这有两个问题：它比简单地运行存档更复杂，b。它容易出错并停止在它完成的机器上开发新版本，并且 c. 在呈现难以编译的版本之间可能存在与编译器更改或任何其他 XCode 更改相关的偏差。

我在 StackOverflow 上找不到任何帮助，在 XCode 的存档存储库中也没有任何迹象表明这种可能性。我应该向 Apple 提交功能请求吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T09:04:07.530

不，您不能获取为 App Store 生成的存档并在模拟器中运行它——即使您可以处理签名问题等，为 App Store 生成的存档包含为 ARM 处理器编译的代码， i 设备有。为模拟器构建的代码是为 x86 处理器编译的，因此它可以在 Mac 上运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T09:03:42.403

一种相当简单的方法是通过[Test Flight](https://testflightapp.com)。我们定期通过试飞测试新版本，旧版本保留在那里，随时可以返回。它与您最终提交给 App Store 的构建不同，但这始终是正确的，因为 App Store 构建是使用分发证书签名的，除非通过商店安装，否则 AFAIK 不会在任何地方运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T09:05:04.267

您可以制作应用程序的 OTA（无线）版本（然后您可以从服务器下载这些二进制文件），或者简单地创建一个 ipa 文件并从 iTunes 安装它。

为此，您必须创建一个临时配置文件。检查Apple文档，因为解释起来有点复杂

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T09:17:38.400

如果您的存档是为设备（AdHoc 或 Release）构建的，您可以制作一个 ipa 文件并将其安装在设备上（以下说明如何操作）。如果它是为模拟器构建的（意味着 i386 cpu 架构），那么您无法为设备创建 ipa。

据我所知，您可以使用命令行从 Xcode 4 存档中制作 ipa：

```
/usr/bin/xcrun -sdk iphoneos PackageApplication
  "/absolute/path/to/MyApp.xcarchive/Products/Applications/MyApp.app"
  -o "/absolute/path/to/MyApp.ipa" 
```

获得 ipa 后，您可以将其安装在物理设备上，如果它已使用正确的签名创建，否则[您可以重新签名](https://stackoverflow.com/a/10905855/312312)

# atom-feed - atom:id 元素是每个物理提要还是逻辑提要唯一？

> ID：15428056
> 
> 赞同：2
> 
> 时间：2013-03-15T08:48:31.797
> 
> 标签：atom-feed

我们使用“next-archive”和“prev-archive”链接关系将所有内容联系在一起，将逻辑提要分解为多个物理提要。

每个单独的提要都有自己的 id，还是应该在整个物理提要系列中保持不变？

[Atom 规范](http://www.ietf.org/rfc/rfc4287)说：

> 4.2.6。“原子：id”元素
> 
> “atom:id”元素
> 为条目或提要传达了一个永久的、普遍唯一的标识符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T04:36:22.793

条目的 ID 在它出现的不同提要中应该是相同的。来自[Atom 讨论 wiki](http://www.intertwingly.net/wiki/pie/PaceAtomIdDos)：

> 将 atom:id 的唯一性范围完全限制为单个提要会使其价值大大降低，因为条目通常是从提要复制到提要，有时会同时在多个提要中发布。

[RFC 5005](https://www.rfc-editor.org/rfc/rfc5005)中的示例强烈建议单独的物理提要（“归档提要”）也应该共享一个 ID，以表明它们属于同一个逻辑提要。

# facebook - 如何将聚合更新为集合

> ID：15428057
> 
> 赞同：1
> 
> 时间：2013-03-15T08:48:34.980
> 
> 标签：facebook, collections, facebook-opengraph

我有我当前的 Facebook 应用程序，并希望为新的新闻提要启用新的收藏。我该怎么做呢？

我意识到当我创建一个新应用程序时 - 我可以访问创建集合。我需要创建一个新应用程序并删除我的旧应用程序吗？我认为应该有更好的迁移技术来启用集合，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:47:52.077

看起来收藏选项现已上线： [https ://developers.facebook.com/blog/post/2013/04/08/create-rich-user-stories-with-new-open-graph-tools/](https://developers.facebook.com/blog/post/2013/04/08/create-rich-user-stories-with-new-open-graph-tools/)

# javascript - Backbone.Collection.Create

> ID：15428059
> 
> 赞同：1
> 
> 时间：2013-03-15T08:48:44.107
> 
> 标签：javascript, model-view-controller, backbone.js, underscore.js

我正在尝试将选项标签动态地放入选择列表中。

当按下**ADD**按钮时，输入文本中的值被设置为一个新模型的字段，然后这个模型被推送到集合中（通过 .create 方法），并触发一个事件以刷新选择视图。问题是我需要新创建模型的 ID 属性将其放入**DOM**（Collection.create 返回模型实例，但触发的事件传递了“不完整”模型）。

//选项视图

```
optionView = Backbone.View.extend({

tagName: 'option',

attributes: function(){
    var f1 = this.model.get("f1");
    var id = this.model.get("id");
    return {
        value: f1,
        id: id
    };
},

render: function(){
    this.$el.text(this.model.get("f1"));
    return this; 
}

}); 
```

//选择视图

```
selectView = Backbone.View.extend({

el: '#container',

collection: selectList,

events: {
    "click #add-season":  "create",
},

initialize: function () {
  var options = this.collection;

    this.$addInput = this.$('#new-opt');  

_.bindAll(this, 'appendOne', 'appendAll');

    options.on('add',     this.appendOne); 
    options.on('reset',   this.appendAll);

    options.fetch(); // Loads list from local storage
},

appendOne: function(opt) { //PROBLEM! opt doesn't have auto-generated ID yet

var view = new app.OptionView({model: opt});

    this.$("#select-list").append( view.render().el );
},

appendAll: function() {
this.$("#select-list").html('');
    this.collection.each(this.appendOne);
},

create: function() { 

    this.collection.create({
        f1: this.$addInput.val() 
    });

    this.$addInput.val('');
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:17:32.923

`{wait: true}`如果您想在将新模型添加到集合之前等待服务器，请通过 。[创造](http://backbonejs.org/#Collection-create)

尝试这个

```
create: function() { 

    this.collection.create({
        f1: this.$addInput.val() 
    }, {wait : true});

    this.$addInput.val('');
} 
```

# c# - 用于多个字段的 linq convertall

> ID：15428061
> 
> 赞同：1
> 
> 时间：2013-03-15T08:48:46.617
> 
> 标签：c#, linq

我必须从数据表中获取两个字段。然后我应该检查一个。“listIDStr”保留不唯一的用户 ID 列表。因此，当我更新一行时，我必须使用“作为主键的 ID。

```
List<string> listIDStr = new List<string>();
...
var sqlData = SqlDataBase.SqlGetTable("SELECT ID,UserID FROM TBL_UserT WHERE SID = " + 4663 + " AND UserID = '" + UserID + "'")
                          .AsEnumerable()
                          .ToList()
                          .ConvertAll(x=>x.Field<string>("UserID"))
                          .ToList();

List<string> Cikan = sqlData.Where(x => !listIDStr.Contains(x)).ToList();
List<string> Eklenen = listIDStr.Where(x => !sqlData.Contains(x)).ToList(); 
```

上面的代码针对一个字段运行。但我想将“ID”与“UserID”一起获取。有谁知道它是怎么做的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T08:51:14.943

使用匿名类型，[这里是 MSDN 链接](http://msdn.microsoft.com/en-gb/library/vstudio/bb397696.aspx)。

```
var dtEnumerable = SqlDataBase.SqlGetTable("SELECT ID,UserID FROM TBL_UserT WHERE SID = " + 4663 + " AND UserID = '" + UserID + "'").AsEnumerable().ToList();

var newVariable = dtEnumerable.Select(x => new { UserID = x.Field<string>("UserID"), ID = x.Field<string>("ID") });
//Get new/old
var states = newVariable.Select(x => new { IsNew = !listIDStr.Contains(x.UserId), IsUpdate = listIDSTr.Contains(x.UserID), ID = x.UserID });
var updates = states.Where(x => x.IsUpdate).Select(x => x.UserID);
var newIds = states.Where(x => x.IsNew).Select(x => x.UserID);
//We now have access to both!
string firstUserID = newVariable.First().UserID;
string firstID = newVariable.First().ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:06:59.717

本质上，您希望将返回的数据“投影”到另一种对象中，如果您不打算将其传递到方法之外，甚至可能是匿名对象。

**匿名对象**

```
var user = SqlDataBase.SqlGetTable("select Id, Name from User where ...")
                      .AsEnumerable()
                      .ToList()
                      .Select(x => new { x.Id, x.Name })
                      .SingleOrDefault();

int userId = user.Id;
string username = user.Name; 
```

**强类型对象**

```
var user = SqlDataBase.SqlGetTable("select Id, Name from User where ...")
                      .AsEnumerable()
                      .ToList()
                      .Select(x => new UserViewModel { Id = x.Id, Name = x.Name })
                      .SingleOrDefault();

int userId = user.Id;
string username = user.Name; 
```

# perl - 拆分字符串并在 for 循环中执行 sub

> ID：15428062
> 
> 赞同：3
> 
> 时间：2013-03-15T08:48:48.587
> 
> 标签：perl

我是 Perl 的新手。我有类似的字符串

```
my $http_origin_servers_list = "abc:2220,cde:40111,efg:45643"; 
```

我有一个叫做like的子

```
executeCommand($host); 
```

我想转换`$http_origin_servers_list`成数组

```
my @values = ("abc:2220", "cde:40111", "efg:45643"); 
```

`executeCommand`并依次调用每个值

```
executeCommand("abc:2220"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:53:48.747

从技术上讲，您要求

```
my @hosts = split /,/, $http_origin_servers_list;
for my $host (@hosts) {
    executeCommand($host);
} 
```

但您可以跳过创建数组。

```
for my $host (split /,/, $http_origin_servers_list) {
    executeCommand($host);
} 
```

如果您愿意，可以将其写得更简洁。

```
executeCommand($_) for split /,/, $http_origin_servers_list; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:51:23.013

```
my $http_origin_servers_list = "abc:2220,cde:40111,efg:45643";
my @v = split (/,/, $http_origin_servers_list);
print ("$_\n") for @v; # or executeCommand($_) for @v 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T08:51:42.080

如果您可以控制服务器列表，则可以直接创建列表：

```
my @servers = qw/abc:1 def:2 ghi:3/;
for my $server (@servers) {
    say $server;
} 
```

# python - 在python中测量上传速度

> ID：15428064
> 
> 赞同：1
> 
> 时间：2013-03-15T08:49:06.573
> 
> 标签：python, upload

假设，我正在使用`HTTP`connection( `POST`) 上传一个文件，并且该文件非常大。有什么办法可以查到上传速度吗？

具体来说，我想将文件上传到***Mediafire***。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:59:20.390

[Speedometer](http://excess.org/speedometer/)将帮助您监控文件传输的速度/进度。

# jquery - SVG 图像元素在鼠标悬停时闪烁

> ID：15428066
> 
> 赞同：6
> 
> 时间：2013-03-15T08:49:08.393
> 
> 标签：jquery, css, svg

我的网站中有一个 svg 图像元素。我想在鼠标悬停时隐藏该图像并在鼠标悬停时显示。

**但是，我有一个奇怪的问题，鼠标悬停时图像会闪烁。**

我尝试通过 css 和 jquery 隐藏图像。在这两种方法中，我都遇到了同样的错误。

SVG

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <image x="20" y="20" class="imghideshow" width="300" height="80"
     xlink:href="http://cdn1.iconfinder.com/data/icons/musthave/128/Help.png" />
</svg> 
```

CSS

```
.imghideshow:hover
{
    visibility:hidden;
} 
```

[http://jsfiddle.net/GMd8w/](http://jsfiddle.net/GMd8w/)

请帮助我恢复闪烁问题。我想要的只是在悬停时隐藏图像并在鼠标悬停时显示。

**根据下面给出的答案编辑了场景。**

很好地实施不透明度解决了闪烁问题。但是，当我实现该 css 属性时，又出现了另一个问题。

所以让我解释一下我的全部要求。

我有两个重叠的图像。（即）子图像重叠在父图像上。当我单击父图像时，它应该触发 js 中的一个函数。由于子图像没有完全隐藏在这里，我不能点击父的子重叠区域。检查这个小提琴。

[http://jsfiddle.net/VwmEU/](http://jsfiddle.net/VwmEU/)

预期输出为：

当我将鼠标悬停在孩子上时，它应该隐藏并且我应该能够触发父功能。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T09:04:17.983

问题只是可见性 hidden 会干扰元素 hover 。您所需要的只是使用另一种方式来隐藏它。例如

```
.imghideshow:hover
{
    opacity: 0;
} 
```

[更新的小提琴](http://jsfiddle.net/zLsAT/1/)

**新的解决方案**

我想，能做的已经不多了。

另一个想法，这可能取决于场景。上图没有鼠标交互。处理事件的是较低的图像，因此必须使另一个透明。

CSS：

```
#img2 {
    pointer-events: none;
}
#img1 {
    cursor:pointer;
}
#img1:hover ~ #img2 {
    opacity: 0;
} 
```

## [更新的小提琴](http://jsfiddle.net/vals/VwmEU/1/)

而且，如果这个不能解决问题（这取决于布局，我不知道......）还有最后一个想法：做你拥有的第一个选项（隐藏可见性），然后放一个悬停延迟 3 秒。唯一的问题是每 3 秒闪烁一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:57:17.993

在您更新之后，我转向了完全不同的东西以使其正常工作：

**SVG**

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="svg">
    <g class="first">
      <!-- Both images here -->
      <rect x="25px" y="25px" width="150" height="100" class="green" />
      <rect x="50px" y="50px" width="150" height="100"/>
    </g>
    <g class="hover">
       <!-- The hover state -->
        <rect x="25px" y="25px" width="150" height="100" class="green" id="click" />
    </g>
</svg> 
```

**jQuery**

```
$('.first').mouseenter(function() {
    $(this).hide();
    $('.hover').show();
});

$('.hover').mouseleave(function() {
   $(this).hide();
    $('.first').show();
});

$('#click').click(function() {
   alert('clicked'); 
}); 
```

请参阅更新的[小提琴](http://jsfiddle.net/soyuka/GMd8w/4/)。

# jquery-autocomplete - 如何在由空格分隔的所有单词中进行 jquery 自动完成搜索

> ID：15428071
> 
> 赞同：0
> 
> 时间：2013-03-15T08:49:18.663
> 
> 标签：jquery-autocomplete

假设在 jQuery autocomplete 的源代码中我有一个像 SELINA RISEWA MIL 这样的词。

但如果我输入 SELINA MIL jQuery 自动完成不会返回该选项。我该如何改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:55:41.270

您必须在返回包含建议的 JSON 响应的搜索逻辑中实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:56:01.877

你可以使用正则表达式——这样说

```
 $('#elem').autocomplete({
            source: function(request, response) {
                var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term, ""));
                var data = $.grep( array, function(value) {
                    return matcher.test( value.label || value.value || value );
                });
                response(data);
            }
        }); 
```

# inno-setup - 使用 innosetup 中的函数添加注册表项

> ID：15428072
> 
> 赞同：4
> 
> 时间：2013-03-15T08:49:21.020
> 
> 标签：inno-setup

如何在 innosetup 中添加具有函数值的注册表项。我想将注册表中 IsServer 的值设置为 InstallAsServer 的返回值

```
[Code]
[Registry]
Root: HKLM; Subkey: "Software\company\product\Settings"; ValueType: string; ValueName: "IsServer"; ValueData: {code:InstallAsServer}

var
  Page: TInputOptionWizardPage;
  IsServer: Boolean;
procedure InitializeWizard;
 begin
  Page := CreateInputOptionPage(wpWelcome,
  'Install Type', 'Select Install Type',
  'Please select Installation type; If Server click Server else Client',
  True, False);

  // Add items
  Page.Add('Install as Server');
  Page.Add('Install as Client');

  // Set initial values (optional)
  Page.Values[0] := True;
  Page.Values[1] := False;
  IsServer := Page.Values[0];
end;

function InstallAsServer(emppararm: string): string; //emppararm not used just for syntax
begin
  if (IsServer=False) then
    begin
      result:= '0';
    end
  else
   begin
    result:= '1';
   end

end; 
```

但即使我在页面中选择服务器或客户端，我总是将值设置为 1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T09:01:10.030

发生这种情况是因为您`IsServer`仅在向导表单初始化时才分配变量的值。您需要从`InstallAsServer`函数中理想地读取实际值，因此您甚至可以删除该`IsServer`变量。您可以将代码简化为如下所示：

```
[Registry]
Root: HKLM; Subkey: "Software\company\product\Settings"; ValueType: string; ValueName: "IsServer"; ValueData: {code:InstallAsServer}

[Code]
var
  Page: TInputOptionWizardPage;

procedure InitializeWizard;
begin
  Page := CreateInputOptionPage(wpWelcome, 'Install Type', 'Select Install Type',
    'Please select Installation type; If Server click Server else Client', True, 
    False);

  // add items
  Page.Add('Install as Server');
  Page.Add('Install as Client');

  // set initial values (optional)
  Page.Values[0] := True;
  Page.Values[1] := False;
end;

function InstallAsServer(Value: string): string;
begin
  // read the actual value directly from the Page
  if not Page.Values[0] then
    Result := '0'
  else
    Result := '1';    
end; 
```

# java - JSON 从 Java 到 JavaScript - 了解它是哪个对象

> ID：15428073
> 
> 赞同：0
> 
> 时间：2013-03-15T08:49:31.200
> 
> 标签：java, javascript, json, gson

我有一个 java servlet 和一个与 json 通信的 javascript 应用程序。我在 javascript 中有一个处理函数，用于处理传入的数据。我的问题是我正在向那个处理程序发送不同的对象类。例如，我可能会发送一个用户对象和一个订单对象。了解此 javascript 处理程序中的哪个类的最佳方法是什么？

我真的应该检查某些字段是否存在吗？这是最好的方法吗？

如果我没有优雅的方法，我想使用重构我的应用程序以使用不同的处理程序是最好的方法吗？

我正在使用 Gson，如果重要的话......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:54:56.570

您始终可以在返回的 json 对象中包含一个“objectType”字段，然后您可以使用它来确定它的类型。

重构在这里听起来确实是个好主意。实际上应该只需要在 $.ajax 调用上指定正确的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:55:14.593

我会建议一个 KISS（保持简单和愚蠢）解决方案。为什么不添加一个字段来指示哪个是： ctype:'Java', ctype:'Js' 或 ctype:'MyJavaClass' ？

# jquery - 跨域请求有时为空

> ID：15428074
> 
> 赞同：0
> 
> 时间：2013-03-15T08:49:32.957
> 
> 标签：jquery, cross-domain

在此处查看[此演示](http://jsfiddle.net/LNccW/4/)

在这里，您可以看到我的代码的简化版本，它尝试向某个 url 发出 ajax 请求（以获取它的信息）。

还有一个 JS 代码**可以实现跨域请求**。

问题是有时请求不返回任何信息，有时它就像一个魅力。

例如，在上面的 jsfiddle 链接中，您可以看到我有 2 个变量：

```
var testurl = "http://www.omgubuntu.co.uk/2013/03/its-official-ubuntu-gnome-remix-joins-the-ubuntu-family";
var testurl2 = "http://habrahabr.ru/post/172755/"; 
```

如果您编辑代码并将 URL 变量设置为等于**testurl** - ajax 调用的结果将不为空（可以清楚地看到，并且在控制台中）。但是，如果您将 URL 变量设置为**testurl2** - 请求将为空。

为什么这样？有解决方法吗？

# php - 教义查询语法错误

> ID：15428075
> 
> 赞同：1
> 
> 时间：2013-03-15T08:49:36.503
> 
> 标签：php, mysql, symfony, doctrine-orm, symfony-2.1

我在数据库中有一个值，例如 **stackover/'!@#/\;"""'.;\';'./** 带有所有特殊字符。现在我的问题是如何构建如下查询：

```
$linkName= // getting from db
$sql_sm="SELECT d FROM MyBundle:MyTable d WHERE d.name = '$linkName'"; 
```

我收到一个错误：

```
[Syntax Error] line 0, col 115: Error: Expected end of string, got '\' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:59:50.603

使用[学说 orm 的占位符支持](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#named-and-positional-parameters)：

```
$query = $em->createQuery('SELECT d FROM MyBundle:MyTable d WHERE d.name = ?1');
$query->setParameter(1, $linkName);

$users = $query->getResult(); 
```

这样您就可以防止像您这样的错误，更重要的是：SQL 注入。

这种方法的另一个相关点是 DQL 字符串保持不变。每次更改 DQL 时，[查询缓存](http://docs.doctrine-project.org/en/latest/reference/caching.html#query-cache)和[结果缓存](http://docs.doctrine-project.org/en/latest/reference/caching.html#result-cache)键都会更改，这基本上意味着您会获得巨大的性能损失。

# php - 上传图片。不能让它工作。PHP/MySQL

> ID：15428080
> 
> 赞同：-1
> 
> 时间：2013-03-15T08:49:54.297
> 
> 标签：php, mysql

这是我的 HTML 代码：

```
<form action="php/sp1img.php" method="post" class="form-horizontal" />
    <label class="control-label">Изображение:</label>
    <div class="controls">
        <div class="fileupload fileupload-new" data-provides="fileupload">
            <span class="btn btn-file">
                <span class="fileupload-new">Изберете файл</span>
                <span class="fileupload-exists">Промени</span>
                <input name="file" type="file" class="default" />
            </span>
            <span class="fileupload-preview"></span>
            <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none"></a>
        </div>
        <button name="submit" type="submit" class="btn blue">Запази!</button>
    </div>
</form> 
```

您可以实时预览它：[http](http://www.dsaidov.com/velto/admin/sponsors.php) ://www.dsaidov.com/velto/admin/sponsors.php 这是我的 sp1img.php 脚本：

```
<?php
session_start();
$con = mysql_connect("localhost","dsaidov","denismm778");
mysql_query("SET NAMES UTF8");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("velto", $con);
$sql = mysql_query("TRUNCATE TABLE sp1img");
$qry= "INSERT INTO `sp1img` (`ImgCode`) VALUES ('". $_FILES["file"]["name"] ."')";

if (!mysql_query($qry,$con))
  {
  die('Error: ' . mysql_error());
  }   
  $files = glob('upload1/*'); // get all file names
foreach($files as $file){ // iterate files
  if(is_file($file))
    unlink($file); // delete file
}
      $sql = mysql_query("TRUNCATE TABLE sp1img");
      $qry= "INSERT INTO `sp1img` (`ImgCode`) VALUES ('". $_FILES["file"]["name"] ."')";

      if (!mysql_query($qry,$con))
  {
  die('Error: ' . mysql_error());
  }
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    header("location: ../sponsors-inv.php");
    }
  else
    {
    /*echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";
    $sql = mysql_query("TRUNCATE TABLE sp1img");
      $qry= "INSERT INTO `sp1img` (`ImgCode`) VALUES ('". $_FILES["file"]["name"] ."')";*/

    if (file_exists("upload1/" . $_FILES["file"]["name"]))
      {
      header("location: ../sponsors-ex.php");

      $sql = mysql_query("TRUNCATE TABLE sp1img");
      $qry= "INSERT INTO `sp1img` (`ImgCode`) VALUES ('". $_FILES["file"]["name"] ."')";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload1/" . $_FILES["file"]["name"]);

      }
    }
  }
else
  {
  echo "Invalid file";
  }
  mysql_close($con);
header("location: ../sponsors.php");
exit();

mysql_close($con);
?> 
```

我在 php 方向创建了一个名为 upload1 的文件夹，我希望在其中上传图像，我还有一个名为 sp1img 的数据库表，列名“ImgCode”，我想在其中保存图像文件名。两者都不起作用。（不上传，不更新数据库）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:50:59.453

你的`form`标签不见了`enctype='multipart/form-data'`

```
<form action="php/sp1img.php" method="post" class="form-horizontal" enctype='multipart/form-data' /> 
```

我检查了任何其他代码，这是文件上传的第一步，如果有任何进一步的问题，请在此处发布。

# ios - 用于演示 Powerpoint 幻灯片的 iOS 框架/库？

> ID：15428085
> 
> 赞同：3
> 
> 时间：2013-03-15T08:50:10.250
> 
> 标签：ios, objective-c, cocoa-touch, frameworks

我需要一个框架/库来帮助我以良好的动画呈现 PPT 幻灯片？

我可以在哪里找到任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T08:51:39.400

**[Quick Look Framework](http://developer.apple.com/library/ios/#DOCUMENTATION/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)**应该是您所需要的 - 它在 iOS 4.0 及更高版本中可用。

> “使用 Quick Look 框架提供您无法处理的格式项目的预览，例如 iWork 或 Microsoft Office。”

Quick Look 预览控制器可以显示以下项目的预览：

*   iWork 文档
*   Microsoft Office 文档（Office '97 和更高版本）
*   富文本格式 (RTF) 文档
*   PDF 文件
*   图片
*   统一类型标识符 (UTI) 符合 public.text 类型的文本文件（请参阅统一类型标识符参考）
*   逗号分隔值 (csv) 文件

[这](http://ios.biomsoft.com/2012/02/17/load-a-pdf-file-in-the-iphone-app-smoothly/)是用于显示 PDF 文档的快速查看示例教程，与您需要对`.ppt`文档执行的操作并无太大区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:32:35.683

您可以使用文档查看器。这适用于所有类型的文件。

[http://developer.apple.com/library/ios/#samplecode/DocInteraction/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/DocInteraction/Introduction/Intro.html)

# android - Chrome 上的 Android Nexus 问题

> ID：15428087
> 
> 赞同：3
> 
> 时间：2013-03-15T08:50:22.550
> 
> 标签：android, google-chrome

嗨，我有以下 jQuery，它可以在所有桌面浏览器上运行（通过添加类，跨度中的文本由 js 调用更改为第 3 方站点）和大多数移动设备（Android Nexus 上的 Chrome 除外）。有谁知道为什么？

```
$(function() {
alert(1);
var foundinspan = $('span:contains("0800 111 222")');
foundinspan.addClass("test11111");
var adiInit ="3526";
var adiFunc = null;
(function() {
   var adiSrc = document.createElement("script"); adiSrc.type = "text/javascript";
   adiSrc.async = true;
   adiSrc.src = ("https:" == document.location.protocol ? "https://" : "http://")
                 + "static.xxxxx.com/static/scripts/xxxx.xxx.min.js";
   var s = document.getElementsByTagName("script")[0];
   s.parentNode.insertBefore(adiSrc, s);
   alert(2);
 })();
}); 
```

两个警报都会触发，因此它完成。Android Nexus 上的 Firefox 可以正常工作吗？

# hibernate - 未映射的 Grails

> ID：15428092
> 
> 赞同：0
> 
> 时间：2013-03-15T08:50:52.217
> 
> 标签：hibernate, grails

我正在开发一个应用程序`grails`并使用`HQL`查询。

```
Query=A.findAll("from A b where  b.boom=:boom 
```

我收到这个错误。

```
not mapped:nested exception is org.hibernate.hql.ast.QuerySyntaxException: 
```

我试图使用完整的包名，但它给出了另一个错误：`could not locate named parameter[boom].`

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:37:25.087

利用：

```
def result = A.findAll("from A a where a.boom=:boom", [boom: 'boom value']) 
```

（请参阅[文档](http://grails.org/doc/latest/ref/Domain%20Classes/findAll.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:37:34.747

尝试这个：

```
def resultList = A.findAll("from A as b where b.boom = :boom", [boom: yourBoom]) 
```

如果这不起作用，请提供更多您的域的代码`A`并根据`controller`/`service`代码。

您应该使用更有意义的变量名称 - 为什么在查询中命名您的`A`类`b`。

# java - Java intanceof false if have parent

> ID：15428099
> 
> 赞同：1
> 
> 时间：2013-03-15T08:51:04.390
> 
> 标签：java, instanceof, parents

I am creating some sort of Achievement system and I have a class KillXEnemies and then I inherit from it with classes like KillXEnemiesWeapon (enemies killed with an certain weapon). And when you kill an enemy I loop trough the achievement objects and add that an enemy has been killed with:

```
if(object instanceof KillXEnemies)
    ((KillXEnemies)object).addEnemyKilled(); 
```

But then the KillXEnemiesWeapon gets tracked as well because it inherits from KillXEnemies. I know one solution is:

```
if(object instanceof KillXEnemies && !(object instanceof KillXEnemiesWeapon))
    ((KillXEnemies)object).addEnemyKilled(); 
```

But I am about to get quite many classes that inherits from KillXEnemies and it seems to be a bad solution to have like 20 !(object instanceof (---))

So I am wondering if there is an easier way to check if the object only is KillXEnemies and not KillXEnemiesWeapon

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:53:55.307

You can use [`Object#getClass`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29) to get the object's actual class, then compare that to `KillXEnemies.class`.

```
if (object.getClass().equals(KillXEnemies.class)) 
```

That will be `true` of `object` is a `KillXEnemies` but not if `object` is an instance of a subclass of it.

But I wonder (and recognizing that you have a *lot* more information to work with than I do, so I could easily be wrong) if classes and subclasses are the best way to model this information...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:13:54.370

Maybe consider adding arguments to your addEnemyKilled() method to include some metadata, such as the Enemy that was killed or the Weapon that was used, etc.

That way, the classes themselves can overload the method and will have the relevant information needed to act accordingly.

(Just one idea on how you could get the logic into the classes themselves and out of crazy instanceof or class checking.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:53:58.113

Use poor man RTTI. Make each of your concrete class implement a base getObjType() method. It may end up cleaner and faster than a forest of instanceof.

```
switch(obj.getObjType()){
   case KillXEnemies.TYPE_ID:
       doSomething((KillXEnemies)obj);
   break; 
  case KillXEnemiesWeapon.TYPE_ID:
       doSomething((KillXEnemiesWeapon)obj);
   break;
   //and so on ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:54:43.597

How about adding a flag, something like parentClass, which is true for parent class and false for all subclasses? So your condition would be if(object instanceof KillXEnemies && ((KillXEnemies)object).isParentClass()) {

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T09:01:16.727

I would do this with overridden methods. Have a method public `boolean doesKillEnemies()` in `KillXEnemies`. Provide a default implementation and wverride as appropriate to make it return true in those classes whose objects do kill enemies, and false in all other subclasses.

The test then becomes:

```
if(object instanceof KillXEnemies && ((KillXEnemies)object).doesKillEnemies())
    ((KillXEnemies)object).addEnemyKilled(); 
```

# php - 使用本地文件的文档查看器

> ID：15428100
> 
> 赞同：1
> 
> 时间：2013-03-15T08:51:05.850
> 
> 标签：php, document

我在本地服务器上使用 PHP 开发了一种邮箱。我收到附件，所以我想在查看器中显示它们，因为我的用户不熟悉文件以及如何打开它们。Google Doc 查看器很棒，但我不能使用本地文件。我搜索了很多解决方案（Applet、SWF），但我什么也没找到。有没有办法将本地文件显示到一个不错的查看器中？（用于图像、ZIP 文件、PDF...）

# json - jquery ajax 调用 data.d 返回未定义

> ID：15428114
> 
> 赞同：1
> 
> 时间：2013-03-15T08:51:50.950
> 
> 标签：json, wcf, jquery

[{"Emp_name":"admin","GIN_no":"001","Mode":"1"},{"Emp_name":"MMMK","GIN_no":"1792","Mode":"1 "}]

这是我从这样的浏览器访问时从 wcf 服务返回的 json `http://localhost/ddd/hostedService.svc/getEmployee`。

当我尝试从 jquery 访问返回的 json 时，d 对象返回未定义。我的 ajax 看起来像这样。

```
$(document).ready(function () {
        $(function () {
            $.ajax({
                type: "GET",
                url: "http://localhost/ddd/hostedService.svc/getEmployee",
                contentType: 'application/json',
                datatype: 'json',
                success: function (data) {
                    alert(data);
                    myFunction(data.d);

                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
        });
        function myFunction(ajaxValue) {
            alert(ajaxValue.Emp_name)
        } 
```

警报数据返回 {object,object}.... 像这样。

我不确定我在哪里失踪。有任何想法吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:22:08.440

我真是个愚蠢的家伙，json 正在返回一组数据，你可以看到第一行是数组，只是我必须使用 each 函数来遍历它，我就能看到列表。所以这是工作代码

```
 var items = [];

                            $.each(data, function (key, val) {
                                items.push('<li id="' + key + '">' + val.Emp_name + '</li>');
                            });

                            $('<ul/>', {
                                html: items.join('')
                            }).appendTo('body');
                        }); 
```

# python - 如何评估 re.sub 中的替换零件？

> ID：15428116
> 
> 赞同：1
> 
> 时间：2013-03-15T08:52:09.140
> 
> 标签：python, regex

我有一个字符串说'Alex 28'。现在，我想提取数字 28 并使用正则表达式将其加 2。

在 Perl 中，我可以像这样得到它：

```
#!/usr/bin/perl
use strict;
use warnings;

my $str='Alex 28';
$str=~s/(\d+)/$1+2/e; 
```

为了在 Python 中实现这一点，我尝试了以下方法：

```
#!/usr/bin/python

import re

str = 'Alex 28'

match=re.sub(r'(\d+)',r'\g<1>',str) 
```

如何将 2 添加到`\g<1>`已获取的“”中？我尝试使用 int 函数，它不起作用。请帮忙。

版本：Python 2.7.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T08:59:00.440

您可以`re.sub`通过[向`repl`参数](http://docs.python.org/2/library/re.html#re.sub)提供函数来使用：

> 如果 repl 是一个函数，则每次出现不重叠的模式时都会调用它。该函数采用单个匹配对象参数，并返回替换字符串。

例如：

```
def add_two(match):
    return str(int(match.group()) + 2)

s = 'Alex 28'
re.sub(r'(\d+)', add_two, s) 
```

或者，使用 lambda：

```
re.sub(r'(\d+)', lambda m: str(int(m.group()) + 2), s) 
```

请注意：

*   用作`str`变量名是一个不好的选择，因为它会覆盖内置`str`
*   替换仅适用于字符串，因此作为`repl`参数传递的函数应该返回一个字符串
*   我使用`match.group()`它返回整个匹配：如果正则表达式定义多个组，您可能需要指定组索引。

# php - 如何在 Zend 中获取查询结果

> ID：15428117
> 
> 赞同：0
> 
> 时间：2013-03-15T08:52:15.357
> 
> 标签：php, mysql, zend-framework, average

我需要在变量中获得平均分数。我正在使用zend，我尝试了两个查询，但都没有工作：

```
$avg_query = $db->query("SELECT sid, AVG(score) 
                         FROM markstable GROUP BY sid");

$avg_query = $db->query("SELECT sid, AVG(score) 
                         FROM markstable WHERE sid = '$sid'");

$avg_score = $db->fetchAll($avg_query);
echo $avg_score; gives nothing
echo $avg_score['$sid']; gives nothing 
```

我需要将其存储`avg_score`在其他表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:11:33.780

您可以使用它来获取按 sid 分组的平均值。

```
$avg_score = $db->fetchAll("SELECT sid,AVG(score) FROM st GROUP BY sid");

foreach($avg_score as $row) {
    echo $row["sid"]."  ".$row["AVG(score)"];
} 
```

在第二次查询的情况下：

```
$avg_score = $db->fetchRow("SELECT sid,AVG(score) FROM st where sid=1");
echo $avg_score["AVG(score)"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:54:01.467

尝试 fetchPairs() 而不是 fetchAll()

编辑： Zend_Db 确实有一个 fetchPairs();

[http://framework.zend.com/manual/1.12/en/zend.db.adapter.html#zend.db.adapter.select.fetchpairs](http://framework.zend.com/manual/1.12/en/zend.db.adapter.html#zend.db.adapter.select.fetchpairs)

还从数组索引中的变量中删除引号

```
echo $avg_score[$sid]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:15:22.953

您在尝试查询数据库时混合了语法。

该[`query()`](http://framework.zend.com/manual/1.12/en/zend.db.statement.html#zend.db.statement.creating)方法构建并执行所需的查询。您的第一个查询应该返回结果，无需提供任何进一步的代码：

```
$avg_query = $db->query("SELECT sid, AVG(score) FROM markstable GROUP BY sid");
Zend_debug::dump($avg_query);//same as var_dump but already includes <pre> tags 
```

您的第二个查询需要包含数组中的任何绑定值作为第二个参数：

```
$avg_query = $db->query("SELECT sid, AVG(score) FROM markstable WHERE sid = ?", array($sid);
Zend_debug::dump($avg_query);//same as var_dump but already includes <pre> tags 
```

您还可以使用标准的 fetch 方法执行此查询，只需将 SQL 作为字符串传递：

```
$avg_score = $db->fetchAll("SELECT sid, AVG(score) FROM markstable GROUP BY sid");
Zend_debug::dump($avg_score);//same as var_dump but already includes <pre> tags 
```

在处理`Zend_Db`组件时，您不妨习惯在查询中使用占位符 ( `?`)，因为旧式语法在许多组件中已被弃用。

这可能不是您正在做的事情的最佳解决方案。但是，它确实回答了您的问题。Zend Framework 中有很多与数据库交互的方法，使用`Zend_Db_Adapter`组件和方法通常不是完成任务的最佳方法。

# java - Eclipse RCP：控件在对话框中不可见

> ID：15428120
> 
> 赞同：0
> 
> 时间：2013-03-15T08:52:32.440
> 
> 标签：java, dialog, eclipse-rcp

我在 eclipse rcp 中的对话框中遇到了一些问题。我希望有一个对话框，它向我显示一个 MasterDetailBlock 来管理主部分的表中显示的任意数量的实体，其相应的 DetailPages 显示在详细部分中。到目前为止，这是使用视图完成的，但非模态对话框似乎更适合于此。

起初，我尝试了一种天真的方式，即从视图中获取代码并将其放入对话框中，由于视图和对话框创建之间的差异而进行了一些修改。但是，大多数控件都丢失了。在 Google、eclipse 论坛和 Stackoverflow 上的搜索并没有带来解决方案。在检查了这些站点的解决方案后，我试图通过使用调试器单步执行代码来了解发生了什么，但这也对我没有帮助。

以下代码应显示一个对话框，其中包含应显示按钮的部分。但是，它不会：

```
protected Control createDialogArea(Composite parent) {

    parent.setLayout(new GridLayout(1, true));

    Section section = toolkit.createSection(parent, ExpandableComposite.EXPANDED | ExpandableComposite.TITLE_BAR);
    section.setLayout(new GridLayout());
    section.setText("Section");
    section.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

    Button test = toolkit.createButton(section, "test", SWT.PUSH);
    test.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
    test.setVisible(true);

    section.computeSize(SWT.DEFAULT, SWT.DEFAULT);
    return parent;
} 
```

结果是：

![上述代码的结果，按钮](../Images/6656b8ecc534d4526b88052d1b135959.png)

但是，由于 MasterDetailBlock 需要一个表单，我也将提供此代码：

```
protected Control createDialogArea(Composite parent) {

    parent.setLayout(new GridLayout(1, true));

    form = new ScrolledForm(parent);
    form.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
    form.getBody().setLayout(new FillLayout());
    Composite formComposite = toolkit.createComposite(form.getBody());
    formComposite.setLayout(new GridLayout(1,true));

    Section section = toolkit.createSection(formComposite, ExpandableComposite.EXPANDED | ExpandableComposite.TITLE_BAR);
    section.setLayout(new GridLayout());
    section.setText("Section");
    section.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

    Button test = toolkit.createButton(section, "test", SWT.PUSH);
    test.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
    test.setVisible(true);

    section.computeSize(SWT.DEFAULT, SWT.DEFAULT);
    return parent;
} 
```

只需通过向对话框添加一个表单进行轻微修改，所有内容都会在表单上进行。但是，结果如下所示：

![在此处输入图像描述](../Images/9aceda908318d1f7f6e8a88fa7759fb1.png)

恐怕我在这里遗漏了一些明显的东西。正如我所说，搜索并没有带来任何启发，单步执行代码也无济于事。我最后的手段“尝试一些东西看看会发生什么并试图理解它”并没有太大帮助，因为结果与已经发布的结果并没有什么不同。

那么，我错过了什么吗？（我认为是这样）如果您可以向我提供一个链接以向我展示问题所在（或者您的经验中的任何内容），我会对此表示赞赏。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:47:50.837

有一个

```
section.setClient(test); 
```

失踪。此外，在使用 Form 并且部分是可扩展的时，您应该有这个：

```
protected final IExpansionListener expansionListener= new ExpansionAdapter()
{
  /**
   * {@inheritDoc}
   */
  @Override
  public void expansionStateChanged(ExpansionEvent e)
  {
    ScrolledForm form = ...; //your scrolled form goes here
    form.layout(new Control[] {(ExpandableComposite) e.getSource()}, SWT.ALL | SWT.CHANGED);
    form.reflow(true);
  }  
};

...

section.addExpansionListener(expansionListener); 
```

`test`您应该添加一个`Composite`包含该按钮的按钮，而不是按钮。每个部分只能有一个客户。

# ruby-on-rails - Rails 没有路线匹配

> ID：15428121
> 
> 赞同：3
> 
> 时间：2013-03-15T08:52:36.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3

**多谢你们。我已经解决了这个问题。这是因为当我进入`posts/new`页面时。新操作创建了一个`@post`具有 nil 属性的虚拟对象。由于`@post`存在，边栏中的编辑和删除链接出现。但是，`edit_post_path`不起作用，因为`@post.id`is `nil`。然后发生错误。所以我只是改为`<% if @post %>`并且`<% if @post && !@post.id.nil? %>`它有效。-- ps rails 错误信息相当混乱。**

我是 Rails 新手，刚刚构建了一个简单的应用程序，当我单击链接创建新帖子时看到了错误：
`No route matches {:action=>"edit", :controller=>"posts"}`

结果`rake routes`：

```
posts GET    /posts(.:format)              posts#index
      POST   /posts(.:format)              posts#create
new_post GET    /posts/new(.:format)          posts#new
edit_post GET    /posts/:id/edit(.:format)     posts#edit
 post GET    /posts/:id(.:format)          posts#show
      PUT    /posts/:id(.:format)          posts#update
      DELETE /posts/:id(.:format)          posts#destroy 
```

routes.rb 文件`resources :posts`在其中。

链接是：`<li><%= link_to "New Post", new_post_path %></li>`

中的新 & 编辑方法`PostsController`：

```
 def new
    @post = Post.new
  end
  def edit
    @post = Post.find(params[:id])
  end 
```

我可以显示帖子、编辑帖子和删除帖子。但是每当我想单击链接创建新帖子时，就会发生错误。我不明白为什么`new_post_path`遗嘱会导致“编辑”路径？？？？

有人可以帮我解决这个问题吗？如果您需要更多代码，请告诉我。

谢谢！

**更新**

1.  添加 _sidebar.html.erb （对不起格式，idk如何保持原样，外面有一些正常`nav`的 , `ul`,`li`标签）

    *   <%= link_to "Home", root_path %>
    *   <%= link_to "关于我", about_path %>

    *   <%= link_to "新帖子", new_post_path %>

    *   <%= link_to "编辑帖子", edit_post_path %>
    *   <%= link_to "删除帖子", post_path(@post), method: "delete", confirm: "你确定要删除吗？" %>

    *   <%= link_to "退出", chulai_path, method: "delete" %>

2.  新的.html.erb

    `<%= form_for @post do |f| %>` `<div class="field">` `<%= f.text_field :title %>` `</div>`

    ```
    <div class="field">
        <%= f.text_area :content, placeholder: "new post here..." %>
    </div>

    <div class="field">
        <%= f.select :public, [['Public', true], ['Private', false]] %>
    </div>

    <%= f.submit "Post", class: "btn" %> 
    ```

    `<% end %>`

3.  我试过`app.new_post_path`了，它显示`/posts/new`，我想这很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T09:02:41.933

您可能`edit_post_path`在您`new.html.erb`的帖子中使用。它抱怨`no route matches`你没有通过编辑帖子的 id。但这首先不应该出现在`new`视图中，因此您可能需要删除该行 - 用于编辑帖子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:00:56.267

试试这个，

```
edit_post_path(@post) 
```

# html - CSS：在同一行有 3 个 div，中间一个占据剩余空间

> ID：15428122
> 
> 赞同：4
> 
> 时间：2013-03-15T08:52:35.930
> 
> 标签：html, css

我正在构建一个工具栏，我希望以下示例中的黄色部分占据整个空间（白色）：

[http://jsfiddle.net/MWjGH/1/](http://jsfiddle.net/MWjGH/1/)

```
<div class="left"> Some content </div>
<span class="middle"> This should fill the space left </span>
<div class="right"> Some other content </div> 
```

用CSS：

```
.left {
    float: left;
    background-color: #ddd;
    display: inline-block;
}
.middle {
    background-color: yellow;
    display: inline-block;
}
.right {
    float: right;
    background-color: #ddd;
    display: inline-block;
} 
```

**编辑：左右的内容是动态的，它可以改变，所以我不想在它们上设置宽度**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T09:04:30.037

我不知道这是否适合您，因为 HTML 略有变化：

```
<div class="left"> Some content </div>
<div class="right"> Some other content </div>
<span class="middle"> This should fill the space </span> 
```

但我相信这是你想要的，

CSS：

```
.left {
    float: left;
    background-color: #ddd;
}
.middle {
    background-color: yellow;
    display: block;
    overflow:hidden;
}
.right {
    float: right;
    background-color: #ddd;
} 
```

演示：http: [//jsfiddle.net/pavloschris/MWjGH/12/](http://jsfiddle.net/pavloschris/MWjGH/12/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T08:56:30.340

将中间 div 放在浮动 div 之后：

```
<div class="left"> Some content </div>
<div class="right"> Some other content </div>
<div class="middle"> This should fill the space left </div> 
```

然后，不要更改任何`display`属性，以便它们保持打开状态`block`（默认为`div`）

```
.left {
    float: left;
    background-color: #ddd;
}
.middle {
    background-color: yellow;
}
.right {
    float: right;
    background-color: #ddd;
} 
```

小提琴：http: [//jsfiddle.net/hLmj7/](http://jsfiddle.net/hLmj7/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T08:58:41.140

如果两侧列没有固定宽度，则始终可以`display:table-cell`.

```
.left {
    background-color: #ddd;
    display: table-cell;
}
.middle {
    background-color: yellow;
    display: table-cell;
    width:100%;
}
.right {
    background-color: #ddd;
    display: table-cell;
} 
```

[JSFiddle 示例](http://jsfiddle.net/MWjGH/5/)。

有了这个，您就可以添加`min-width`到外部列，而无需不断更改中间元素的宽度。

[`min-width`带有应用的JSFiddle 示例](http://jsfiddle.net/MWjGH/8/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T09:00:06.340

试试这个：

不要右对齐你的最后一个 div

制作你所有的容器`float:left`

并为每个容器提供百分比宽度，以便它们的总和应为 100%；

[工作小提琴](http://jsfiddle.net/manishmishra256/MWjGH/7/)

如果您不想强制使用静态宽度，请执行以下操作：

给你的每个容器一个`width:auto`，但要被通知，

如果每个容器的宽度总和大于父容器（在您的情况下为主体）容器的宽度，则会发生换行，一个 div 将向下滑动到下一行。

看到这个[小提琴](http://jsfiddle.net/manishmishra256/MWjGH/11/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T09:00:37.407

我会将您的 div 包装在一个包装器中，并将背景颜色分配给包装器 div 然后，您根本不需要指定宽度。 [jsfiddle](http://jsfiddle.net/MWjGH/4/)

html:

```
<div class="toolbar">
    <div class="left"> Some content </div>
    <div class="middle"> This should fill the space left </div>
    <div class="right"> Some other content </div>
</div> 
```

CSS：

```
.toolbar {
    background-color: yellow;    
}
.left {
    float: left;
    background-color: #ddd;
    display: inline-block;
}
.middle {
    display: inline-block;
}
.right {
    float: right;
    background-color: #ddd;
    display: inline-block;
} 
```

考虑将 clearfix 添加到包装器 div，因为里面的 div 是浮动的:)

# php - 如何将 JavaScript 添加到 WordPress PHP 文件？

> ID：15428125
> 
> 赞同：2
> 
> 时间：2013-03-15T08:52:49.713
> 
> 标签：php, javascript, wordpress

我想在 WordPress PHP 文件中从我的根文件夹中引用 JavaScript 文件，但是当我加载页面时，JavaScript 被忽略了。WordPress 对引用`.js`文件有限制吗？我没有正确引用 PHP 的 JavaScript 吗？

这是我写的（不起作用）：

```
<?php wp_footer(); ?>
<script src="/files/js/jquery.js" type="text/javascript"></script>
<script src="/files/js/jquery.cycle.js" type="text/javascript"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:20:49.183

对于 jQuery，我使用这种技术[在 WordPress 中加载最新版本的 jQuery](http://techstudio.co/wordpress/loading-the-latest-version-of-jquery-in-wordpress)

基本上你`wp_enqueue_script`在 functions.php 中使用*函数*。

对于我只想将它们添加到模板文件并且不想打扰的脚本`wp_enqueue_script`，我将它们放在主题文件夹中创建的**脚本文件夹中。**我在那里添加了所有自定义添加的 .js 脚本。

然后在模板文件中我使用如下代码：

```
<script type="text/javascript" src="<?=get_template_directory_uri();?>/scripts/markers.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-14T16:46:25.070

Wordpress 有自己的方法来添加 js 或 css 文件。

```
<?php
function my_scripts_loader() {
    wp_enqueue_script( 'my-js', 'filename.js', false );
}
add_action( 'wp_enqueue_scripts', 'my_scripts_loader' );
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T08:59:41.923

WordPress 有多种包含文件的方法，我自己在早期使用过 WordPress，那时我不得不使用 WordPress 函数调用路径。

例子：`<script src="<?php echo bloginfo('template_directory'); ?>/files/js/jquery.js" type="text/javascript"></script> //add echo`

您可能想要 var_dump the bloginfo('template_directory') 并从那里开始工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T09:08:45.467

将您的文件夹放入您正在使用的 wordpress 主题中，之后只需

在 header.php 文件中包含路径，例如

```
<script src="<?php bloginfo('template_directory'); ?>/files/js/jquery-min.js" type="text/javascript"></script> 
```

希望对你有帮助 ....

# sql - 在关系表中关联 ID

> ID：15428132
> 
> 赞同：0
> 
> 时间：2013-03-15T08:53:17.220
> 
> 标签：sql, perl, foreign-keys, relational-database, dbi

我在 Perl 中使用`DBI`模块和`DBD:mysql`.

这个将字段`url`, `html_extr_text`, `concord_file`, 和`sys_time`插入到表中`article`：

```
my @fields = (qw(url html_extr_text concord_file sys_time));
my $fieldlist = join ", ", @fields;
my $field_placeholders = join ", ", map {'?'} @fields;

my $insert_query = qq{
    INSERT INTO article ($fieldlist)
    VALUES ($field_placeholders)
};
my $sth = $dbh->prepare($insert_query);

my $id_article;
my @id_articles;
foreach my $article_index (0 .. @output_concord_files_prepare) {
    $field_placeholders = $sth->execute(
            $url_prepare[$article_index],
            $html_pages_files_extended[$article_index],
            $output_concord_files_prepare[$article_index],
            $sys_time_prepare[$article_index]);
    $id_article = $dbh->last_insert_id(undef, undef, 'article', 'id_article');
    push @id_articles, $id_article;
    if ($field_placeholders != 1) {
        die "Error inserting records, only [$field_placeholders] got inserted: " . $sth->insert->errstr;
    }
}
print "@id_articles\n"; 
```

而这个将字段`event`插入表中`event`：

```
@fields = (qw(event));
$fieldlist = join ", ", @fields;
$field_placeholders = join ", ", map {'?'} @fields;

$insert_query = qq{
    INSERT INTO event ($fieldlist)
    VALUES ($field_placeholders)
};
$sth = $dbh->prepare($insert_query);

my $id_event;
my @id_events;
foreach my $event_index (0 .. @event_prepare){
    $field_placeholders = $sth->execute($event_prepare[$event_index]);
    $id_event = $dbh->last_insert_id(undef, undef, 'event', 'id_event');
    push @id_events, $id_event;
    if ($field_placeholders != 1){
        die "Error inserting records, only [$field_placeholders] got inserted: " . $sth->insert->errstr;
    }
}
print "@id_events\n"; 
```

我想创建第三个一对多关系表。因为，一篇文章包含多个事件，所以我有这个文件：

```
output_concord/concord.0.txt -> earthquake
output_concord/concord.0.txt -> avalanche
output_concord/concord.0.txt -> snowfall
output_concord/concord.1.txt -> avalanche
output_concord/concord.1.txt -> rock fall
output_concord/concord.1.txt -> mud slide
output_concord/concord.4.txt -> avalanche
output_concord/concord.4.txt -> rochfall
output_concord/concord.4.txt -> topple
... 
```

如您所见，我使用`LAST_INSERT_ID`. 但是我真的不知道如何进行下一步。

使用此文件，我如何将前两个表的 ID 插入第三个表“article_event_index”。

它会是这样的：

```
$create_query = qq{
    create table article_event_index(
        id_article int(10) NOT NULL,
        id_event int(10) NOT NULL,
        primary key (id_article, id_event),
        foreign key (id_article) references article (id_article),
        foreign key (id_event) references event (id_event)
    )
};
$dbh->do($create_query); 
```

它将包含遵循模式的关系

```
1-1, 1-2, 1-3, 2-4, 3-5 ... 
```

我是 Perl 和数据库的新手，所以很难制定我想要做什么。我希望我足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:15:05.030

像这样的东西应该可以满足您的需要（未经测试，但可以编译）。

它首先构建 Perl 哈希以将 concord 文件与文章 ID 和事件与事件 ID 相关联。然后读取该文件，并将一对 ID 插入到新表中，以便在现有表中找到每个关系。

请注意，哈希只是为了避免长序列

```
SELECT id_article FROM article WHERE concord_file = ? 
```

和

```
SELECT id_event FROM event WHERE event = ? 
```

陈述。

```
use strict;
use warnings;

use DBI;

use constant RELATIONSHIP_FILE => 'relationships.txt';

my $dbh = DBI->connect('DBI:mysql:database', 'user', 'pass')
        or die $DBI::errstr;

$dbh->do('DROP TABLE IF EXISTS article_event_index');

$dbh->do(<< 'END_SQL');
CREATE TABLE article_event_index (
    id_article INT(10) NOT NULL,
    id_event INT(10) NOT NULL,
    PRIMARY KEY (id_article, id_event),
    FOREIGN KEY (id_article) REFERENCES article (id_article),
    FOREIGN KEY (id_event) REFERENCES event (id_event)
)
END_SQL

my $articles = $dbh->selectall_hashref(
    'SELECT id_article, concord_file FROM article',
    'concord_file'
);
my $events = $dbh->selectall_hashref(
    'SELECT id_event, event FROM event',
    'event'
);

open my $fh, '<', RELATIONSHIP_FILE
        or die sprintf qq{Unable to open "%s": %s}, RELATIONSHIP_FILE, $!;

my $insert_sth = $dbh->prepare('INSERT INTO article_event_index (id_article, id_event) VALUES (?, ?)');

while (<$fh>) {
  chomp;
  my ($concord_file, $event) = split /\s*->\s*/;
  next unless defined $event;

  unless (exists $articles->{$concord_file}) {
    warn qq{No article record for concord file "$concord_file"};
    next;
  }
  my $id_article = $articles->{$concord_file}{id_article};

  unless (exists $events->{$event}) {
    warn qq{No event record for event "$event"};
    next;
  }
  my $id_event = $events->{$event}{id_event};

  $insert_sth->execute($id_article, $id_event);
} 
```

# ios - iPad分屏显示不正确

> ID：15428136
> 
> 赞同：0
> 
> 时间：2013-03-15T08:53:44.653
> 
> 标签：ios, objective-c, ipad

我有一个要求，屏幕方向始终是横向的，我们需要在一个视图中有两个拆分屏幕。

我使用以下代码来呈现两个拆分器屏幕。布局使得 splitViewController1 占据 60% 的视图，而 splitViewController2 占据 40% 的视图。

```
- (void)viewDidLoad
{
    self.view.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:background]];

    [splitViewController1.view setFrame:CGRectMake(0,150, 0.6 * width, height)];
    splitViewController1.view.backgroundColor = [UIColor clearColor];
    [splitViewController1 setValue:[NSNumber numberWithFloat:150.0] forKey:@"_masterColumnWidth"];
    [self.view addSubview:splitViewController1.view];

    [splitViewController2.view setFrame:CGRectMake(0.6 * width,150, 0.4 * width, height)];
    splitViewController2.view.backgroundColor = [UIColor clearColor];
    [splitViewController2 setValue:[NSNumber numberWithFloat:150.0] forKey:@"_masterColumnWidth"];
    [self.view addSubview:splitViewController2.view];
} 
```

现在面临的问题是，在主视图中，拆分器屏幕的详细视图没有缩放到帧宽度，而是与另一个拆分器视图重叠。

为了提供更多见解，我想提一下每个拆分器控件的详细视图不尊重指定的帧边界。

我项目中的所有视图都设置为横向。

对上述情况有什么建议吗？

另外我想知道是否有任何其他方法可以减少 rootview 控制器的拆分器屏幕宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:40:25.097

在完成您的问题后，我不确定究竟是什么导致了问题，但我可以建议您看一下[MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)，因为我自己以前使用过它，它真的很有帮助。

# java - 使用非活动类从 CompoundButton.OnCheckedChangeListener() 内部更改用户界面

> ID：15428139
> 
> 赞同：1
> 
> 时间：2013-03-15T08:53:54.763
> 
> 标签：java, android

我正在编写一个代码，在其中我正在`Checkboxes`使用它们`ActionListener`从一个`non-Activity`类中创建动态。

现在我想从`CompoundButton.OnCheckedChangeListener()`.

每个`checkbox`代表一个警报。在`Database`每个警报中都设置了`column`指定警报是启用还是禁用，我需要访问数据库来执行此操作。我正在编写以下代码：

```
public class DataBaseAdapter extends SQLiteOpenHelper 
{
    ....
    .... //onCreate, onUpdate, other methods used.
    ....
public TableLayout getAllAlarmList(Context con)
{
    SQLiteDatabase db = this.getReadableDatabase();
    for(int i=0;i<maxCount;i++) //maxCount number of rows in database
    {
        check[i]= new CheckBox(con);
        check[i].setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener()
        {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                if(isChecked)
                {

                }
                else
                {

                }
            }
        });
    }

} 
```

现在我需要在此处添加代码，以便添加数据库访问代码。怎么做。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:33:51.427

我不能做到这一点。由于 Android 的限制，Android 是 UI 安全的。因此，除了**在用户界面中进行更改****之外，它不允许任何线程或类。** `Activity Class`

 **所以我做的最好的事情就是收集所有的警报（数据），`Array`然后将数组从类发送回调用方法，`Activity`并在那里列出这个列表。**

# django - django - 服务器错误加载静态文件

> ID：15428146
> 
> 赞同：2
> 
> 时间：2013-03-15T08:54:09.030
> 
> 标签：django, static, django-staticfiles

所以我正在建立我自己的 django 网站。现在我坚持加载静力学。我在控制台中收到以下错误：

```
 GET http://localhost:8000/static/css/style.css 500 (Internal Server Error) 
```

我正在尝试使用静态标签加载 css 文件：

```
{{ STATIC_URL }} 
```

在我的设置中，我编辑了以下内容：

```
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))

STATIC_ROOT = os.environ.get('STATIC_ROOT',os.path.join(PROJECT_ROOT,"static",))
STATIC_URL = '/static/'

STATICFILES_DIRS = (
os.path.join(PROJECT_ROOT, "static",),
) 
```

还添加了 TEMPLATE_CONTEXT_PROCESSORS：

```
TEMPLATE_CONTEXT_PROCESSORS = (
'django.core.context_processors.debug',
'django.core.context_processors.i18n',
'django.core.context_processors.media',
'django.core.context_processors.static',
'django.contrib.auth.context_processors.auth',
'django.contrib.messages.context_processors.messages',
) 
```

将以下内容添加到 urls.py 以便我可以导航到 localhost:8000/static/

```
urlpatterns += patterns('',
(r'^static/(?P<path>.*)$',
'django.views.static.serve',
{'document_root': settings.STATIC_ROOT}),
) 
```

我不喜欢我做错了什么。PROJECT_ROOT 指向项目的根目录。我也将它用于我的 TEMPLATE_DIR，效果很好。

希望有人能启发我！我一直在谷歌搜索，并查看了其他问题，但据我所知，我做了我应该做的一切！

提前谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:41:36.710

您在 STATICFILES_DIRS 中有 STATIC_ROOT ！这是不正确的。

不确定您的问题是否与此有关，但它明确表明对 django 静态文件管理缺乏了解。

也许读完[这篇文章](http://blog.yourlabs.org/post/30382323418/surviving-django-contrib-staticfiles-or-how-to-manage)你会完全理解它并能够正确设置它。

DEBUG=True 不需要这个：

```
urlpatterns += patterns('',
(r'^static/(?P<path>.*)$',
'django.views.static.serve',
{'document_root': settings.STATIC_ROOT}),
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-27T21:01:08.090

好吧，我遇到了同样的问题，然后我看到了这个错误消息：

> “您的 STATICFILES_DIRS 设置不是元组或列表；” django.core.exceptions.ImproperlyConfigured：您的 STATICFILES_DIRS 设置不是元组或列表；也许你忘记了尾随的逗号？”

所以，我转换了结果

```
(os.path.join(BASE_DIR, 'static')) 
```

到一个列表：

```
STATICFILES_DIRS = [(os.path.join(BASE_DIR, 'static'))] 
```

希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:59:48.350

```
Change the your debug into DEBUG=False 
```

# graphics - 绘制像素化纹理

> ID：15428153
> 
> 赞同：6
> 
> 时间：2013-03-15T08:54:43.580
> 
> 标签：graphics, webgl

我有一个要放大的位图，并且在像素之间具有直的、定义的边缘。

我尝试将 MAG 过滤器设置为 NEAREST：

```
gl.bindTexture(gl.TEXTURE_2D,this.tex);
gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);
gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);
...
gl.drawArrays(gl.TRIANGLES,0,6); // draw the texture 
```

但是，当我绘制它时，像素会一起流血：

![在此处输入图像描述](../Images/da734e6cc6a04bb6623d842e2a3841d8.png)

这是 webGL，所以我有着色器。我的着色器代码非常简单：

顶点着色器：

```
...
attribute vec2 texCoord;
varying vec2 texel;
void main() {
    texel = texCoord;
    ... 
```

和片段着色器：

```
...
varying vec2 texel;
uniform sampler2D texture;
void main() {
    vec4 fragColour = texture2D(texture,texel);
    ... 
```

这是相关代码的更大片段：

```
map = {
    vbo: gl.createBuffer(),
    tex: gl.createTexture(),
    program: createProgram(
        "precision mediump float;\n"+
        "uniform mat4 mvMatrix, pMatrix;\n"+
        "attribute vec3 vertex;\n"+
        "attribute vec2 texCoord;\n"+
        "varying vec2 texel;\n"+
        "void main() {\n"+
        "   texel = texCoord;\n"+
        "   gl_Position = pMatrix * mvMatrix * vec4(vertex,1.0);\n"+
        "}\n",
        "precision mediump float;\n"+
        "uniform vec4 colour;\n"+
        "uniform float fogDensity;\n"+
        "uniform vec4 fogColour;\n"+
        "varying vec2 texel;\n"+
        "uniform sampler2D texture;\n"+
        "const float LOG2 = 1.442695;\n"+
        "void main() {\n"+
        "   float z = gl_FragCoord.z / gl_FragCoord.w;\n"+
        "   float fogFactor = exp2(-fogDensity*fogDensity*z*z*LOG2);\n"+
        "   fogFactor = clamp(fogFactor,0.0,1.0);\n"+
        "   vec4 fragColour = texture2D(texture,texel) * colour;\n"+
        "   gl_FragColor = mix(fogColour,fragColour,fogFactor);\n"+
        "}\n",
        ["mvMatrix","pMatrix","colour","fogDensity","fogColour","texture"],
        ["vertex","texCoord"]),
    plane: [[0,0,0],[0,1,0]],
    init: function(w,h) {
        this.w = w;
        this.h = h;
        var vertices = [
            w,0,0,  1,0,
            0,0,0,  0,0,
            w,0,h,  1,1,
            w,0,h,  1,1,
            0,0,0,  0,0,
            0,0,h,  0,1,
        ];
        gl.bindBuffer(gl.ARRAY_BUFFER,this.vbo);
        gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertices),gl.STATIC_DRAW);
        gl.bindBuffer(gl.ARRAY_BUFFER,null);
        this._mapArrayBuffer = new ArrayBuffer(w*h*4);
        this._mapByteBuffer = new Uint8Array(this._mapArrayBuffer);
        this.map = new Uint32Array(this._mapArrayBuffer);
        for(var i=0; i<w*h; i++) // test data: red and green pixels
            this.map[i] = Math.random()>0.5? 0xff000080: 0xff008000;
        createTexture(this.tex,w,h,this._mapByteBuffer,true);
    },
    draw: function() {
        var program = this.program;
        gl.useProgram(program);
        gl.uniformMatrix4fv(program.pMatrix,false,camera.pMatrix);
        gl.uniformMatrix4fv(program.mvMatrix,false,camera.mvMatrix);
        gl.uniform4f(program.colour,1,1,1,1);
        gl.uniform4f(program.fogColour,1,1,1,1);
        gl.uniform1f(program.fogDensity,0.03);
        gl.bindTexture(gl.TEXTURE_2D,this.tex);
        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);
        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);
        gl.bindBuffer(gl.ARRAY_BUFFER,this.vbo);
        gl.enableVertexAttribArray(program.vertex);
        gl.vertexAttribPointer(program.vertex,3,gl.FLOAT,false,5*4,0);
        gl.enableVertexAttribArray(program.texCoord);
        gl.vertexAttribPointer(program.texCoord,2,gl.FLOAT,false,5*4,3*4);
        gl.drawArrays(gl.TRIANGLES,0,6);
        gl.disableVertexAttribArray(program.texCoord);
        gl.disableVertexAttribArray(program.vertex);
        gl.bindBuffer(gl.ARRAY_BUFFER,null);
        gl.bindTexture(gl.TEXTURE_2D,null);
        gl.useProgram(null);
    },
};

function createTexture(tex,width,height,data,noMipMap) {
    tex = tex || gl.createTexture();
    gl.bindTexture(gl.TEXTURE_2D,tex);
    tex.width = width || data.width;
    tex.height = height || data.height;
    if(width != null)
        gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,width,height,0,gl.RGBA,gl.UNSIGNED_BYTE,data || null);
    else
        gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,data);
    if(anisotropy)
        gl.texParameterf(gl.TEXTURE_2D,anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,anisotropy);
    gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);
    if(!noMipMap && !(tex.width&(tex.width-1)) && !(tex.height&(tex.height-1))) { //pow2
        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR_MIPMAP_LINEAR);
        gl.generateMipmap(gl.TEXTURE_2D);
    } else
        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);
    gl.bindTexture(gl.TEXTURE_2D,null);
    _textures.push(tex);
    return tex;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:06:54.040

***[已解决]***问题是我为纹理启用了各向异性。各向异性似乎胜过 gl_NEAREST。如果你想在纹理上使用 gl_NEAREST，重要的是不要设置各向异性。

# java - YouTubeEmbededPlayer GWT 如何停止视频？

> ID：15428156
> 
> 赞同：0
> 
> 时间：2013-03-15T08:54:54.010
> 
> 标签：java, api, gwt, youtube-api

我正在尝试使用 youtube 视频 gwt api。

youtube 播放器可以工作，但我怎样才能停止视频？我没有找到那个命令...

我创建了我的播放器：

```
protected YouTubeEmbeddedPlayer _youTubeEmbeddedPlayer;
_youTubeEmbeddedPlayer = new YouTubeEmbeddedPlayer(youTubeVideoID); 
```

那是 YouTube 播放器： [https ://code.google.com/p/gwt-youtube-api/wiki/EmbededPlayer](https://code.google.com/p/gwt-youtube-api/wiki/EmbededPlayer)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:18:19.213

通过使用 [YouTubePlayerWrapper](http://code.google.com/p/gwt-youtube-api/source/browse/trunk/src/main/java/com/google/youtube/client/YouTubePlayer.java)。

您可以通过调用该方法停止视频

```
youTubePlayerWrapper.stopVideo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T09:13:34.953

这个答案可能无法解决同一个库提到的问题。事实上，我尝试了多个不同的库，每个库都有一些问题。所以最终创建我自己的包装器。如果您可以使用它，我已将其公开检查它[ht​​tps://github.com/pandurangpatil/gwt-youtube](https://github.com/pandurangpatil/gwt-youtube)

# c++ - Qt中的QPaintEvent绘画区域？

> ID：15428159
> 
> 赞同：0
> 
> 时间：2013-03-15T08:55:04.523
> 
> 标签：c++, qt

`Painting`这是对Qt中完成的基本疑问。我有一个`QScrollArea`作为我`centralWidget`的`Main Window`应用程序。我`QFrame` `frame`在`scrollarea`. 的是。`Layout`_ 当我添加这样的内容时：`QFrame``QGridLayout``widgets``layout`

```
MainWindow::AddLabel()
{
    setUpdatesEnabled(false);
    QGridLayout *myGrid = (QGridLayout *)ui->frame->layout();
    for(int i = 0; i < 1000; i++)
    {
        QLabel *label = new QLabel();
        QString str;
        str.SetNum(i);
        label->SetText(str);
        myGrid->AddWidget(label, 0, i, 0);//add label to i'th column of row 0
    }
    setUpdatesEnabled(true);
    repaint();
} 
```

***请不要担心内存泄漏，因为它不是问题的重点。*** 所以我的疑问是：

1.  `disabled`在将小部件添加到布局期间设置更新是否有帮助？

2.  即使我最大化窗口，我也不会看到所有的 QLabel。那么当代码流离开上述函数并进入事件循环时，所有 QLabel 和 QFrame 的巨大区域都被绘制了吗？或者只有那些可见的 QLabel 和只有那么多可见的 QFrame 区域被绘制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:14:34.617

如果您使用的是表单 (.ui)，则其中的小部件`ui` ***不是***您的小部件的子级`MainWindow`。好吧，`setUpdatesEnabled()`只影响当前的小部件以及它的孩子，所以对象`ui->frame`仍然会在之后收到更新`myGrid->AddWidget`。改成

```
 ui->frame->setUpdatesEnabled(false);
  ...
  ui->frame->setUpdatesEnabled(true); 
```

顺便说一句，当您启用更新时，屏幕将被更新。所以你不需要调用`repaint();`任何小部件。

# javascript - Facebook FB.ui，Feed 消息 obj 不起作用

> ID：15428161
> 
> 赞同：3
> 
> 时间：2013-03-15T08:55:10.680
> 
> 标签：javascript, facebook, facebook-javascript-sdk, fb.ui

好吧，我有这个关于消息属性、属性/对象或其他名称的 FB.ui 的问题。（虽然不知道它叫什么，我的错。）

我在某个站点看到了这段代码：

[http://fbdevwiki.com/wiki/FB.ui#method%3a_.27permissions.request.27](http://fbdevwiki.com/wiki/FB.ui#method%3a_.27permissions.request.27)

这是我关心的具体部分。

![在此处输入图像描述](../Images/43c04afd3b8d8e8cf9395f504321941b.png)

**至少**对我**不起作用...**

 **嗯，这是我的代码，

```
function postToFeed() { //Facebook Share Function
  // calling the API ...
  var obj = {
    method: 'feed',
    display: "iframe",
    message: "Hey Hey Lol",
    link: "http://www.facebook.com/pages/<?php echo $fbp_name; ?>/<?php echo $fbp_id; ?>?sk=app_xxxxx",
    picture: "http://www.compibot.com/<?php echo $image_folder;  ?>/<?php echo $event_info[4]; ?>",
    name: "<?php echo $event_info[1]; ?>",
    caption: '<?php echo "Expires in: " . $mdy_expiry; ?>',
    description: "<?php echo $event_info[2]; ?>",
    actions: [{ name: 'Vote', link: 'https://www.facebook.com/<?php echo $fbp_id ?>'}]
  };

  function callback(response) {
    addScore("<?php echo $event_table; ?>", "fbshare_point");
    $("#fb_share").addClass("success");
  }
  FB.ui(obj, callback);
} 
```

这是我得到的输出，如下所示。

![在此处输入图像描述](../Images/afc99815043480b61c4fec515ace6f7f.png)

而不是在 facebook 分享的 textarea 中说**Hey Hey Lol**。它只是空白。

我什至将方法更改为**“stream.publish”**仍然无法正常工作。

知道如何解决这个问题吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T09:46:15.383

预填充`message`参数不再起作用——Facebook 很久以前就删除了。

在 Facebook 上分享时，您*不*应该预先填写任何文本 - 消息应该由用户自己*输入。*

* * *

如果你真的想这样做，你必须在后台通过 API 发帖——这当然需要用户连接到你的应用程序并给予足够的权限。即使这样，您也不应该在某处发布用户未在表单中输入的消息——Facebook 很容易判断您的应用是否为不同用户发布相同（或大致相似）的消息，这将限制可见性大幅减少您的帖子，甚至可能导致您的应用被阻止。**

# eclipse - 如何将自定义组件添加到 Eclipse swing 调色板？

> ID：15428164
> 
> 赞同：2
> 
> 时间：2013-03-15T08:55:18.173
> 
> 标签：eclipse, swing, windowbuilder, jcalendar

我下载了 Jcalendar API 并像往常一样将它添加到我的项目库和构建路径中，但现在我还想将它添加到 swing 调色板中以更方便。我知道使用 netbeans 是可能的，而且我很确定你也可以使用 Eclipse 和 WindowBuilder Pro 来做到这一点，我只是找不到任何方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:55:44.580

我实际上自己解决了这个问题。只需右键单击摇摆调色板，然后选择调色板管理器，您就可以从那里导入 jar 文件并将它们添加到调色板！

# asp.net - 在本地将 asp.net mvc4 部署到 IIS 7.5

> ID：15428165
> 
> 赞同：4
> 
> 时间：2013-03-15T08:55:19.283
> 
> 标签：asp.net, iis-7.5

我正在尝试将我的 ASP.NET 网站本地部署到 Windows 7 上的 IIS 7.5，但我一直收到相同的错误。我以前从未部署到 IIS。

**错误：**

```
Authorization: Cannot verify acces to path (c:\inetpub\wwwroot\website) 
```

**信息：**

> 服务器配置为使用带有内置帐户的直通身份验证来访问指定的物理路径。但是，IIS 管理器无法验证内置帐户是否具有访问权限。确保应用程序池标识对物理路径具有读取权限。如果此服务器已加入域，并且应用程序池标识为 NetworkService 或 LocalSystem，请验证 \$ 是否具有对物理路径的读取访问权限。然后再次测试这些设置。

我正在使用 .NET Framework 4.0.30319

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:50:10.990

这与应用程序池中设置的权限有关，它们必须正确才能使应用程序在 IIS 上本地运行。

```
Application Pools
 -> Right click Pool
 -> Advanced Settings
 -> Process Model
    -> Identity 
```

我的身份被设置为用于特定应用程序的电子邮件

# sql - SQL Server - 创建数据库表的副本并将其放在同一个数据库中？

> ID：15428168
> 
> 赞同：136
> 
> 时间：2013-03-15T08:55:37.973
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2008-r2

我在数据库 DB 中有一个表 ABC。我想在同一个数据库中创建名称为 ABC_1、ABC_2、ABC_3 的 ABC 副本。如何使用 Management Studio（最好）或 SQL 查询来做到这一点？

这适用于 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2013-03-15T08:57:21.563

使用`SELECT ... INTO`：

```
SELECT *
INTO ABC_1
FROM ABC; 
```

这将创建一个`ABC_1`具有相同列结构`ABC`并包含相同数据的新表。然而，约束（例如键、默认值）是不被复制的。

您可以使用不同的表名多次运行此查询。

* * *

如果不需要复制数据，只需新建一个具有相同列结构的空表，添加一个`WHERE`带有 falsy 表达式的子句：

```
SELECT *
INTO ABC_1
FROM ABC
WHERE 1 <> 1; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-15T09:16:15.817

### 通过 SSMS UI 复制架构（生成 DDL）

在 SSMS 中，在**Object Explorer**中展开您的数据库，转到**Tables**，右键单击您感兴趣的表，然后选择**Script Table As**，**Create To**，**New Query Editor Window**。执行查找和替换（**CTRL** + **H**）以更改表名（即放入`ABC`Find **What**字段并`ABC_1`在**Replace With**然后单击**OK**）。

### 通过 T-SQL 复制 Schema

显示如何通过 SQL 执行此操作的其他答案也可以很好地工作，但此方法的不同之处在于您还将获得任何索引、约束和触发器。

### 复制数据

如果要包含数据，请在创建此表后运行以下脚本以从 ABC 复制所有数据（如果您有标识字段，请保持相同的 ID 值）：

```
set identity_insert ABC_1 on
insert into ABC_1 (column1, column2) select column1, column2 from ABC
set identity_insert ABC_1 off 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-09-11T02:14:52.180

如果要复制具有所有约束和键的表，请按照以下步骤操作：

1.  在 SQL Management Studio 中打开数据库。
2.  右键单击要复制的表。
3.  选择 Script Table as -> Create to -> New Query Editor Window。这将生成一个脚本以在新的查询窗口中重新创建表。
4.  更改脚本中的表名和相关键和约束。
5.  执行脚本。

然后为了复制数据运行以下脚本：

```
SET IDENTITY_INSERT DuplicateTable ON

INSERT Into DuplicateTable ([Column1], [Column2], [Column3], [Column4],... ) 
SELECT [Column1], [Column2], [Column3], [Column4],... FROM MainTable

SET IDENTITY_INSERT DuplicateTable OFF 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-15T08:59:23.067

第一个选项

```
select *
  into ABC_1
  from ABC; 
```

第二个选项：使用SSIS，即右键单击对象资源管理器中的数据库>所有任务>导出数据

*   源和目标：您的数据库
*   源表：ABC
*   目标表：ABC_1（将创建表）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-11T02:23:11.463

这是另一种选择：

```
select top 0 * into <new_table> from <original_table> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-01T04:57:36.303

您需要编写 SSIS 来复制表及其数据、约束和触发器。我们在我们的组织中有一个名为 Kal Admin 的软件，由 kalrom Systems 提供，有免费版本可供下载（我认为复制表功能是可选的）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T08:59:39.613

使用 sql server manegement studio 或 netcat 会更容易操作 sql

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-30T16:38:55.230

如果你想做 N 次（在现实世界中可能不实用），你可以试试这个：

```
declare @counter int
set @counter = 2
declare @tname NVARCHAR(100)
DECLARE @SQString NVARCHAR(MAX)
while(@counter <= 20) -- duplicate 20 times
begin
SET @tname= concat('Table_',@counter)
SET @SQString = 'select * into ' + @tname + ' from Table_1'
EXEC (@SQString)
set @counter = @counter + 1
End 
```

# c# - 可以在第二个方法调用中获取方法的属性

> ID：15428177
> 
> 赞同：0
> 
> 时间：2013-03-15T08:56:02.673
> 
> 标签：c#, attributes

```
[TestAttribute(Name = "Test")]
public void Test()
{
    Test2();
}

public viod Test2()
{
    Console.Write(TestAttribute.Name);
} 
```

如上图，在Test2中调用是否可以得到Test的属性信息呢？

最好没有堆栈跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:09:11.223

您可以使用`MethodBase.GetCurrentMethod()`并将其传递给辅助方法，而不是使用堆栈跟踪。

```
[TestAttribute(Name = "Test")]
public void Test()
{
    Test2(MethodBase.GetCurrentMethod());
}

public viod Test2(MethodBase sender)
{
    var attr = sender.GetCustomAttributes(typeof(TestAttribute), false).FirstOrDefault();
    if(attr != null)
    {
       TestAttribute ta = attr as TestAttribute;
       Console.WriteLine(ta.Name);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:01:23.230

在你的情况下，我不知道如何在没有堆栈跟踪的情况下找到调用者：

```
[TestAttribute(Name = "Test")]
static void Test() {
    Test2();
}

static void Test2() {
    StackTrace st = new StackTrace(1);
    var attributes = st.GetFrame(0).GetMethod().GetCustomAttributes(typeof(TestAttribute), false);
    TestAttribute testAttribute = attributes[0] as TestAttribute;
    if (testAttribute != null) {
        Console.Write(testAttribute.Name);
    }
} 
```

另一种方法是将方法信息显式传递给函数：

```
[TestAttribute(Name = "Test")]
void TestMethod() {
    MethodInfo thisMethod = GetType().GetMethod("TestMethod", BindingFlags.Instance | BindingFlags.NonPublic);
    Test3(thisMethod);
}

static void Test3(MethodInfo caller) {
    var attributes = caller.GetCustomAttributes(typeof(TestAttribute), false);
    TestAttribute testAttribute = attributes[0] as TestAttribute;
    if (testAttribute != null) {
        Console.Write(testAttribute.Name);
    }
} 
```

顺便说一句，这看起来不像是你想用反射做的事情。我认为在这种情况下要走的路就是这样:)

```
void Test() {
    Test2(name);
}

void Test2(string name) {
    Console.Write(name);
} 
```

# java - JPA 使用 Map 谓词多对多

> ID：15428180
> 
> 赞同：2
> 
> 时间：2013-03-15T08:56:08.020
> 
> 标签：java, jpa

我对 Java 中的谓词不是很熟悉，并试图用谷歌搜索来解决我的问题，所以欢迎任何帮助/提示。

所以这里是：

在我的实体模型中，我有以下映射

```
public class Entity{
    @ManyToMany
    @MapKeyEnumerated(STRING)
    private Map<A, B> partners = new HashMap<A, B>();
} 
```

我如何去做一个谓词，给我一个结果，所有实体都有 partners.B.id = 2 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-22T10:52:15.110

您可以在构建谓词时使用**连接来执行此操作。**

对于您的示例，它可能如下所示：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery cq = cb.createQuery();
Root<entity> root = cq.from(Entity.class);
MapJoin<Entity, A, B> mapJoin = root.joinMap("partners");

Predicate predicate = cb.equal(mapJoin.get("id"), 2);

em.createQuery(cq.select(root).distinct(true).where(predicate)); 
```

（备注：我没有测试这个代码）

# javascript - CKEditor - 启动后启用 Scayt？

> ID：15428182
> 
> 赞同：1
> 
> 时间：2013-03-15T08:56:14.690
> 
> 标签：javascript, jquery, ckeditor

CKEditor 有问题。

如果您`config.scayt_autoStartup = true;`的配置文件中有该语句并且有多个 CKEditor，则页面在 IE9 和 IE10 中跳转很多，并在特定时间后向下滚动到随机编辑器。这对我的同事来说非常烦人。

现在，我想启用 Scayt，但只有在 CKEditor 获得焦点后。我知道如何获得编辑器的焦点事件，但我不知道如何在任何给定点以编程方式启用 Scayt。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T11:24:39.160

我最终在启动时禁用了 SCAYT。需要解决方案真是太可惜了。

# r - 计算后如何从文本文件中写入结果？

> ID：15428189
> 
> 赞同：0
> 
> 时间：2013-03-15T08:56:33.437
> 
> 标签：r

我有三个文本文件。我想做一些如下所示的计算并写出结果。所有文本文件都包含 14 列 X1 到 X14 和 601 行。此代码基本上计算所有三个文件之间的相关性（例如，来自 ref 文件的 x1 和来自文件 sour1 的同一列 x1 等）并进行一些计算，然后返回结果。

```
ref= read.table("D:\\S_asc.txt", sep="",header=TRUE)
sour1 = read.table("D:\\sre.txt", sep="",header=TRUE) 
sour2= read.table("D:\\os_asc.txt", sep="",header=TRUE)
columns <- paste0("X", 1:13)
lapply(
    columns,
    function(column)
    {
        result1 <- cor(ref[[column]],sour2[[column]],use = "na.or.complete")
        # calculate using ref and sour1

        result2 <-  cor(ref[[column]],sour1[[column]],use = "na.or.complete")   
        # calculate using ref and sour2

    }
) 
```

编写结果时出现错误：

```
write.table(result1,file = "foo.text")
Error in is.data.frame(x) : object 'result1' not found 
```

我的文件样本：

```
"0" "1" "2" "3" "4" "5" "6" "7" "8" "9" "10" "11" "12" "13" "14"
"2" 0.189444444142282 0.317999997238318 0.166363635072202 0.301255410351666 0.471986238597248       0.307140744955515 0.411269603728529 0.262293613227113 0.265422601640182 0.196970316722191      0.123789306669182 0.291404434246697 0.322141939017999 0.43499182336885 0.327559809775301
"3" 0.149411764616768 0.191176471464774 0.180181817100807 0.422626723831494 0.496283823857852 0.327019521055943 0.441349119295007 0.286810015617714 0.24089.

        dput( head( ref ) ) 
          structure(list(X0 = c(0.0493461075417879, 0.0505162129561387, 
       0.0490028816673631, 0.049519460579677, 0.0496427079798826, 0.0506145435593228
       ), X1 = c(0.0262911450465596, 0.0249440745179165, 0.0240951294080254, 
      0.0256401352066387, 0.0258794329817874, 0.0247771567181071), 
        X2 = c(0.0426611743228151, 0.0374958657769128, 0.0306825108745032, 
         0.0393093163299325, 0.0398889994476742, 0.0435458658141826
         ), X3 = c(0.0954854469641096, 0.0833464493313783, 0.0790441582634745, 
         0.0818814458477848, 0.0772971938289144, 0.0818534809699011
        ), X4 = c(0.0933782886825547, 0.0968294484334356, 0.0981543002252867, 
         0.0969233013221434, 0.0933197039086707, 0.0913029715102785
         ), X5 = c(0.218212200747129, 0.220014530510402, 0.21109789420558, 
         0.204679954607016, 0.210967709615173, 0.20799168387628), 
       X6 = c(0.285405481705908, 0.284798691283541, 0.280772749846878, 
         0.285532926668878, 0.293501364933202, 0.296710869439616), 
        X7 = c(0.226218243796976, 0.216760771202585, 0.205519652752883, 
        0.206054283066245, 0.211842009508557, 0.214360803181363), 
       X8 = c(0.146648210899044, 0.144789395382814, 0.142059144367336, 
        0.141852209487122, 0.140823495101071, 0.140405076285803), 
        X9 = c(0.115716572518044, 0.113825119638324, 0.111749156097298, 
        0.111175507359272, 0.11094649408726, 0.111155298251533), 
         X10 = c(0.0675501818197432, 0.0636083677843573, 0.0605178392071445, 
           0.0549028963149205, 0.0600036757169919, 0.0625667586974292
         ), X11 = c(0.069120070466305, 0.0662362222295113, 0.0710726619403152, 
         0.0653345812188053, 0.0612221754441228, 0.0584222641456072
            ), X12 = c(0.281314574594234, 0.279000957729072, 0.276184085574267, 
            0.274121716868717, 0.271324697416127, 0.270268668362535), 
              X13 = c(0.364434947521643, 0.369388875815867, 0.372250445014838, 
          0.372470394613093, 0.372814994985087, 0.369151832740263), 
                X14 = c(0.0124844383491671, 0.0125512696973245, 0.0125538467586845, 
                   0.012599469429366, 0.0125682867660489, 0.0126515616426303
                   )), .Names = c("X0", "X1", "X2", "X3", "X4", "X5", "X6", 
                     "X7", "X8", "X9", "X10", "X11", "X12", "X13", "X14"), row.names = c("2", 
                     "3", "4", "5", "6", "7"), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:30:32.213

您收到该错误是因为在函数内部创建的变量超出了该函数的范围，即在评估后续函数时，`R`不知道该函数的存储值`result1`和`result2`在该函数外部使用

```
function(column)
    {
        result1 <- cor(ref[[column]],sour2[[column]],use = "na.or.complete")
        # calculate using ref and sour1

        result2 <-  cor(ref[[column]],sour1[[column]],use = "na.or.complete")   
        # calculate using ref and sour2

    } 
```

为了演示我刚才所说的，试试下面的代码

```
testFunc <- function() {
    a <- 0
}

testFunc()

print(a) 
```

你得到如下错误：

```
Error in print(a) : object 'a' not found 
```

因此，正如 建议的那样，`SimonO101`您必须单独分配`lapply`调用结果。`sour1``sour2`

```
result1 <- lapply( columns , function(column) { cor(ref[[column]],sour2[[column]],use = "na.or.complete") } )

result2 <- lapply( columns , function( column ) { cor(ref[[column]],sour1[[column]],use = "na.or.complete") } ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:59:24.810

您需要将 result1 分配给 lapply.ie

```
result1 <- lapply( columns , function(column) { cor(ref[[column]],sour2[[column]],use = "na.or.complete") } ) 
```

并对结果 2 执行相同操作：

```
result2 <- lapply( columns , function( column ) { cor(ref[[column]],sour1[[column]],use = "na.or.complete") } ) 
```

要分离出您的结果，请尝试更改您的代码以像这样格式化您的结果......

```
 columns <- paste0("X", 1:13)
result1 <- lapply( columns , function(column){ cor(ref[[column]],sour2[[column]],use = "na.or.complete") } )
result2 <- lapply( columns , function(column){ cor(ref[[column]],sour1[[column]],use = "na.or.complete") } )
names( result1 ) <- columns
names( result2 ) <- columns

write.table( result1 , file = "foo.txt" , row.names = "res1" )
write.table( result2 , file = "foo.txt" , row.names = "res2" , col.names = FALSE  , append = TRUE ) 
```

# c# - C# NET.WebClient DownloadString() 问题 - 页面重定向

> ID：15428190
> 
> 赞同：1
> 
> 时间：2013-03-15T08:56:36.250
> 
> 标签：c#, web-crawler, webclient, downloadstring

我有这个问题 - 我正在编写一个简单的网络蜘蛛，到目前为止它运行良好。问题是我正在处理的网站有时会重定向或添加东西到地址的讨厌习惯。在某些页面中，它会在您加载它们后添加“/about”，而在某些页面中，它会完全重定向到另一个页面。webclient 会因为下载 html 代码并开始解析链接而感到困惑，但由于其中许多是“../../something”格式，所以它会在一段时间后崩溃，因为它根据计算链接第一个给定地址（在重定向或添加“/about”之前）。当新创建的页面从队列中出来时，它会抛出 404 Not Found 异常（惊喜）。

现在我可以自己在每个页面上添加“/about”，但是对于狗屎和傻笑，网站本身并不总是添加它......

我会很感激任何想法。感谢您的宝贵时间，祝您一切顺利！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:33:10.517

如果要获取页面的重定向 URI 以解析其中的链接，请使用 WebClient 的子类，如下所示：

```
class MyWebClient : WebClient
{
   Uri _responseUri;

    public Uri ResponseUri
    {
        get { return _responseUri; }
    }

    protected override WebResponse GetWebResponse(WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
        _responseUri = response.ResponseUri;
        return response;
    }
} 
```

现在使用 MyWebClient 而不是 WebClient 并使用 ResponseUri 解析链接

# linux - 将域指向 vps

> ID：15428194
> 
> 赞同：0
> 
> 时间：2013-03-15T08:56:44.447
> 
> 标签：linux, dns, vps, nameservers

服务器管理新手，我们都必须从某个地方开始。

我多年来一直在使用共享主机，但我正在尝试使用 VPS。

我购买了一个 VPS 4 个月的试用版，在服务器上安装了一个 IP 的 Webmin 和 Virtualmin。

我有几个域 123-reg.co.uk 和 godaddy.com 但托管在另一家公司。我想离开由这些公司管理的域，但将托管更改为我在某些域上的新 VPS。

现在 VPS 没有附加域，只有一个 IP

所以我的问题是，如何配置域以便我可以更改名称服务器以指向我的新服务器？（设置 DNS 服务器）就像为任何托管公司一样。

问候

杰米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:58:52.980

您需要在域上设置一条 A 记录以指向您的 VPS IP 地址。

在 123-reg 中转到“管理域”，您可以在那里编辑 DNS 记录。

编辑：如果您的 VPS 主机提供 DNS 托管，那么您可以将名称服务器指向它们，但正如您所说，您希望保留由域公司管理的域，然后按照我上面的建议。

# mysql - 使用 SELECT 命令连接

> ID：15428199
> 
> 赞同：0
> 
> 时间：2013-03-15T08:57:10.113
> 
> 标签：mysql, sql, select, join

我一直在寻找并尝试加入两张表以获得一个结果，但没有运气。（是的，新手）

这是场景：

**表 T1**

```
ID | t1_name | **t1_value** 
```

**表 T2**

```
ID | t2_something | **t2_name** | t2_more | t2_etc 
```

我想要做的是一个`SELECT`查询来获得 ECHO 的结果`t1_value`。

这是来自**t2_name**等于**t1_name**然后将**t1_value**返回给 ECHO。

这些基于每个单独的“t2 ID”（100 + ids）都有自己的结果。

我确信这是一个简单的解决方案，而且我对连接所做的所有阅读和研究似乎都无法理解。可能是读多了……

如果您可以提供解决方案/帮助，（以及它的工作原理，以便我下次学习）那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:01:15.913

[**`JOIN`**](http://en.wikipedia.org/wiki/Join_%28SQL%29)带有条件的两个表`t1.t2_name = t2.t2_name`，然后在`SELECT`子句中选择您要选择的任何内容。

就像是：

```
SELECT
  t2.ID,
  t1.t1_value,
  ...
FROM t1
INNER JOIN t2 ON t1.t1_name = t2.t2_name; 
```

您可能还需要查看不同类型的`JOIN`，请参阅此以获取更多信息：

*   [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:01:29.317

试试这个查询

```
select t1.t1_value
from t1
inner join t2 on t1.t1_name=t2_name 
```

有关更多研究，您可以参考**[INNER JOIN](http://www.w3schools.com/sql/sql_join_inner.asp)**

以及不同类型的**[JOIN](http://www.w3schools.com/sql/sql_join.asp)**

加入的**[视觉表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:01:53.073

```
Select t1_value from T1, T2 where T1.t1_name = T2.t2_name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T09:01:56.190

```
SELECT t1_name.t1, t2_name.t2 FROM t1, t2  WHERE t1.t1_name = t2.t2_name 
```

这应该可以按预期工作，只是为了澄清您也可以使用`INNER JOIN`此处引用的语法：[http ://www.tizag.com/mysqlTutorial/mysqlleftjoin.php](http://www.tizag.com/mysqlTutorial/mysqlleftjoin.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T09:12:01.497

您可以通过加入两个表 t1 和 t2 来实现。

```
SELECT
      t1.Name,
      t1.value
FROM t1,t2 
WHERE t1.t1_name = t2.t2_name 
```

# entity-framework-4 - 如何在将应用程序移至阶段时更改实体数据模型的连接字符串？

> ID：15428202
> 
> 赞同：1
> 
> 时间：2013-03-15T08:57:17.710
> 
> 标签：entity-framework-4

我是一个带有 EDMX 文件的应用程序。我与此 edmx 的连接在阶段与开发环境不同。我想在将应用程序移动到舞台环境时更改 edmx 文件的连接字符串。

我尝试删除 edmx 并使用舞台环境创建一个新的 edmx。edmx 正在创建良好。但是 edmx 实体类没有在代码中被引用，即它甚至没有在智能中显示。

有没有办法直接更改连接字符串而不是删除和添加edmx？如果是，请发布我们如何实现。

谢谢， venugopal

# javascript - Web Storage API 和 Javascript - 未定义的错误

> ID：15428205
> 
> 赞同：0
> 
> 时间：2013-03-15T08:57:23.287
> 
> 标签：javascript, html, local-storage, web-storage

我一直在尝试在我的 html 页面上更改样式以使用此 API 进行存储。我对此很陌生，所以我不确定问题是什么。当我选择菜单项时，样式更改会起作用，但如果我刷新或关闭窗口，它们不会保存。

编辑：我已经不再试图让它们保存，而是使用 localStorage 存储最后使用的样式，然后使用开关运行最后保存的样式的函数。但是，在尝试获取最后保存的值时，我遇到了一个未定义的错误。

这是JS：

```
//Style 1
function style1(){
    var vP = document.getElementById('video_container');
    var bG = document.getElementsByTagName('body');
    var sidebar = document.getElementById('sidebar');
    var banner = document.getElementById('top_header');
    var body = document.getElementById('body_div');

    vP.style.backgroundColor = ('black');
    bG[0].style.background = "url('images/bg/bg1.jpg') no-repeat center center fixed";
    sidebar.style.display = ('block');  
    banner.style.display = ('block'); 
    body.style.marginTop = ('190px');  

    var selectedStyle = "style";
    var value = 's1'; 
    newItem(selectedStyle,value);
}

//Style 2
function style2(){
    var vP = document.getElementById('video_container');
    var bG = document.getElementsByTagName('body');
    var sidebar = document.getElementById('sidebar');
    var banner = document.getElementById('top_header');
    var body = document.getElementById('body_div');

    vP.style.backgroundColor = get_random_color();
    bG[0].style.background = "url('images/bg/bg"+randNum()+".jpg') no-repeat center center fixed";
    sidebar.style.display = ('block');  
    banner.style.display = ('block');  
    body.style.marginTop = ('190px');

    var selectedStyle = 'style'; 
    var value = 's2';
    newItem(selectedStyle,value);
}

//Style 3
function style3(){
    var vP = document.getElementById('video_container');
    var bG = document.getElementsByTagName('body');
    var sidebar = document.getElementById('sidebar');
    var banner = document.getElementById('top_header');
    var body = document.getElementById('body_div');

    vP.style.backgroundColor = get_random_color();
    bG[0].style.background = "url('images/bg/bg"+randNum()+".jpg') no-repeat center center fixed";
    sidebar.style.display = ('none');  
    banner.style.display = ('none'); 
    body.style.marginTop = ('80px');  

    var selectedStyle = 'style'; 
    var value = 's3';
    newItem(selectedStyle,value); 
}

//-------------Web Storage API stuff-------------//
window.addEventListener('load',initiate);

function initiate(){
    window.addEventListener('storage', storagechange);
    show();
}
function newItem(id,style){

    localStorage.setItem(id,style);    
}
function show(){   
    var x = localStorage.key(0);
    var y = localStorage.getItem(x);
    var z=2;
    alert(y); //used to test what value i would get, it says undefined 

    switch (y) {
        case 's3':
            style3();
            break;
        case 's2':
            style2();
            break;
        case 's1':
        default:
            style1();
            break;
    } 

} 
```

HTML：

```
<div id="sideMenu" >
    <ul class="bmenu">
        <li id="f1" onclick="style1()">Style 1</li> <!--turn sidebar on/off-->
        <li id='f2' onclick="style2()">Style 2</li> <!--randomize vidcontain border-->
        <li id='f3' onclick="style3()">Style 3</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:18:11.520

他们可能会保存，但在您的`initiate()`函数中，您绝不会调用任何函数来设置样式。

此外，通过您在本地存储中设置值的方式 - 每次从菜单中选择样式并关闭窗口时，您正在向存储中添加项目，这里是用值替换变量的调用：

```
localStorage.setItem('f3','style3()'); 
```

如果您在选择三种不同样式的情况下执行此操作 3 次，那么您将在本地存储中仅拥有三个条目`f1`，`f2`和`f3`. 您永远不会删除任何项目，因此很难看出这将如何帮助您确定最后选择的样式。你应该做的是更像这样的事情：

```
localStorage.setItem('savedStyle','f3'); 
```

然后在`initiate()`：

```
var savedStyle = localStorage.getItem('savedStyle');

switch (savedStyle) {
    case 'f3':
        style3();
        break;
    case 'f2':
        style2();
        break;
    case 'f1':
    default:
        style1();
        break;
} 
```

# extjs4 - 使用 extjs 4 在窗口内的网格中显示嵌套数据

> ID：15428210
> 
> 赞同：2
> 
> 时间：2013-03-15T08:57:32.047
> 
> 标签：extjs4

我有一个模型、一个商店和一个网格（将使用商店中的数据填充）。单击网格中的一行时，它会打开一个窗口，其中有一个测试框，一个面板，其中实习生持有另一个网格。我的数据是嵌套的，我发现很难将值传递给网格。下面是我的模型、商店和组件。

```
Ext.onReady(function() {

    //Model
    Ext.define('User', {
        extend: 'Ext.data.Model',
        fields: [
            { name: 'firstname', type: 'string' },
            { name: 'lastname', type: 'string' },
            { name: 'senority', type: 'int' },
            { name: 'dep', type: 'auto' },
            { name: 'dep_id', type: 'int', mapping: 'dep.dep_id'},
            { name: 'dep_Name', type: 'string', mapping: 'dep.dep_Name'},
            { name: 'hired', type: 'string' }
        ]
    });

    //Store
    Ext.create('Ext.data.Store', {
        model: 'User',
        storeId:'employeeStore',
//      fields:['firstname', 'lastname', 'senority', 'dep', 'hired'],
        data:[
            {firstname:"Michael",
                lastname:"Scott", 
                senority:7, 
                dep:[{
                    dep_id: 1000,
                    dep_Name: 'HR'
                }], 
                hired:"01/10/2004"},
            {firstname:"Dwight", 
            lastname:"Schrute", 
            senority:2, 
            dep:[{
                dep_id: 1001,
                dep_Name: 'Sales'
                }], 
            hired:"04/01/2004"}
        ]
    });

    //First grid Panel
    Ext.create('Ext.grid.Panel', {
        title: 'Employee Data',
        id: 'gridID',
        store: Ext.data.StoreManager.lookup('employeeStore'),
        columns: [
            { text: 'First Name',  dataIndex: 'firstname' },

            {
                header: 'Button',
                xtype: 'actioncolumn',
                icon : 'test.png',
                handler: function(grid, rowIndex, colIndex, item, e , record) {
                    rIx=rowIndex;
                    Ext.create('MyWindow',{rIx: rowIndex}).show();
                }

            }

        ],

        width: 500,
        renderTo: Ext.getBody()
    });

    // Window
    Ext.define('MyWindow', {
        extend: 'Ext.window.Window',
        store : Ext.data.StoreManager.lookup('employeeStore'),
        height: 300,
        width: 400,
        title: 'My Window',
        items: [        //testfield
                     {
                        xtype: 'textfield',           
                        id : 'fname',
                        fieldLabel:'Name'
                     },
                     //panel
                     {
                         xtype: 'panel',
                         id: 'wPanel',
                         title: 'Test',
                         height: 400,

                         listeners: {
                             afterrender: function(){//alert("-->");
                                        //grid inside the panel which is in window
                                         var wgrid = Ext.create('Ext.grid.Panel', {
                                        title: 'Employee Data',
                                        id: 'gridID1',
                                        store: Ext.data.StoreManager.lookup('employeeStore'),
                                        columns: [
                                            { text: 'Department ID', 
                                              dataIndex: 'dep_id' 
                                            },
                                            {
                                                text: 'Department Name',
                                                dataIndex: 'dep_Name'

                                            }

                                        ],

                                        width: 300,
                                        height: 250

                                    });
                                  Ext.getCmp('wPanel').add(wgrid);

                                }
                         }
                     }

                 ],
        listeners: {
                afterrender: function(win){
                //alert("idx= " + win.rIx);
                var r = Ext.data.StoreManager.lookup('employeeStore').getAt(win.rIx);
                var firstname = r.get('firstname');
                Ext.getCmp('fname').setValue(firstname);   
                }
        }
        });

}); 
```

我尝试使用映射，但无法在面板内的网格中看到任何数据。单击第一行时，窗口内的文本框应显示名字（工作正常），窗口内的网格应仅显示该特定员工的部门 ID 和部门名称。首先，我尝试使用`hasMany`and `belongsTo`，但没有运气。现在我正在尝试使用`mapping`. 请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:31:26.997

您确实在映射中使用了 hasMany 。

我用你的例子为你做了一个小提琴，我改变了一些东西，它现在可以工作了。[http://jsfiddle.net/johanhaest/UehS2/](http://jsfiddle.net/johanhaest/UehS2/)

```
Ext.onReady(function () {

    //Model
    Ext.define('User', {
        extend: 'Ext.data.Model',
        fields: [{
            name: 'firstname',
            type: 'string'
        }, {
            name: 'lastname',
            type: 'string'
        }, {
            name: 'senority',
            type: 'int'
        }, {
            name: 'dep'
        }, {
            name: 'hired',
            type: 'string'
        }]
    });

    Ext.define('Department', {
        extend: 'Ext.data.Model',
        fields: [{
            name: 'dep_id',
            type: 'int'
        }, {
            name: 'dep_Name',
            type: 'string'
        }]
    });

    //Store
    Ext.create('Ext.data.Store', {
        model: 'User',
        storeId: 'employeeStore',
        //      fields:['firstname', 'lastname', 'senority', 'dep', 'hired'],
        data: [{
            firstname: "Michael",
            lastname: "Scott",
            senority: 7,
            dep: [{
                dep_id: 1000,
                dep_Name: 'HR'
            }],
            hired: "01/10/2004"
        }, {
            firstname: "Dwight",
            lastname: "Schrute",
            senority: 2,
            dep: [{
                dep_id: 1001,
                dep_Name: 'Sales'
            }],
            hired: "04/01/2004"
        }]
    });

    //First grid Panel
    Ext.create('Ext.grid.Panel', {
        title: 'Employee Data',
        id: 'gridID',
        store: Ext.data.StoreManager.lookup('employeeStore'),
        columns: [{
            text: 'First Name',
            dataIndex: 'firstname'
        },

        {
            header: 'Button',
            xtype: 'actioncolumn',
            icon: 'test.png',
            handler: function (grid, rowIndex, colIndex, item, e, record) {
                rIx = rowIndex;
                Ext.create('MyWindow', {
                    rIx: rowIndex
                }).show();
            }

        }

        ],

        width: 500,
        renderTo: Ext.getBody()
    });

    // Window
    Ext.define('MyWindow', {
        extend: 'Ext.window.Window',
        store: Ext.data.StoreManager.lookup('employeeStore'),
        height: 300,
        width: 400,
        title: 'My Window',
        items: [ //testfield
        {
            xtype: 'textfield',
            id: 'fname',
            fieldLabel: 'Name'
        },
        //panel
        {
            xtype: 'panel',
            id: 'wPanel',
            title: 'Test',
            height: 400,

            listeners: {
                afterrender: function (panel) { //alert("-->");
                    //grid inside the panel which is in window
                    var emplStore = Ext.data.StoreManager.lookup('employeeStore');
                    var win = panel.up('window');
                    var depStore = Ext.create('Ext.data.Store', {
                        model: 'Department',
                        data: emplStore.getAt(win.rIx).get('dep')
                    });
                    var wgrid = Ext.create('Ext.grid.Panel', {
                        title: 'Employee Data',
                        id: 'gridID1',
                        store: depStore,
                        columns: [{
                            text: 'Department ID',
                            dataIndex: 'dep_id'
                        }, {
                            text: 'Department Name',
                            dataIndex: 'dep_Name'

                        }],

                        width: 300,
                        height: 250

                    });
                    Ext.getCmp('wPanel').add(wgrid);
                }
            }
        }

        ],
        listeners: {
            afterrender: function (win) {
                //alert("idx= " + win.rIx);
                var r = Ext.data.StoreManager.lookup('employeeStore').getAt(win.rIx);
                var firstname = r.get('firstname');
                Ext.getCmp('fname').setValue(firstname);
            }
        }
    });

}); 
```

请注意，您的代码可以进行很多优化，但我专注于您当前的问题。

# c# - 如何使用 mssql 数据库中的数据通过单击 C# .net 页面中包含的 JavaScript 块内的每个标记来添加信息窗口

> ID：15428212
> 
> 赞同：3
> 
> 时间：2013-03-15T08:57:32.423
> 
> 标签：c#, javascript, asp.net, google-maps

我从 mssql 数据库中获取我的纬度和经度，一切正常，但我想通过使用来自同一数据库的信息单击每个标记来添加信息窗口，我不知道该怎么做。

我的 WebForm1.aspx.cs 页面：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data.SqlClient;
using System.Data.Sql;
using System.Data.SqlTypes;
using System.Data;
using System.Data.OleDb;
using System.Data.Common;
using System.Windows.Forms;
using AjaxControlTolkit;

namespace WebApplication3

{

public partial class WebForm1 : System.Web.UI.Page

{

    SqlConnection sqlConn;
    SqlCommand sqlCmd;
    SqlDataAdapter sqlDatatAdapter;
    DataSet ds_pc;

 protected void Page_Load(object sender, EventArgs e)
 {
    ds_pc = new DataSet();
    sqlConn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
    sqlCmd = new SqlCommand();
    sqlDatatAdapter = new SqlDataAdapter();
    sqlCmd = new SqlCommand("dbo.PROCEDURE", sqlConn);
    sqlCmd.CommandType = CommandType.StoredProcedure;
    sqlDatatAdapter = new SqlDataAdapter(sqlCmd);
    sqlDatatAdapter.Fill(ds_pc);

    string Locations = "" ;
    string txt_site ; 
    string lat ;
    string lon ;

    foreach(DataRow dr in (ds_pc.Tables[0]).Rows)
    {
         if (dr["LATITUDE"].ToString().Trim().Length == 0)
         continue;

         txt_site = dr["SITE"].ToString();
         lat = dr["LATITUDE"].ToString();
         lon = dr["LONGITUDE"].ToString();

         Locations += Environment.NewLine + " map.addOverlay(new GMarker(new GLatLng(" + lat + "," + lon + ")));";
         }

         js.Text = @"<script type='text/javascript'>
         function initialize() {
               if (GBrowserIsCompatible()) {
               var map = new GMap2(document.getElementById('map_canvas'));
               map.setCenter(new GLatLng(42.00, 43.30), 8);"+Locations+@"map.setUIToDefault();

              }
             }
       </script> ";
            }
        } 
```

我的 WebForm1.aspx 页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication3.WebForm1" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head id="Head1" runat="server">
<title>Google Maps</title>

<script type="text/javascript" src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=MyKeyA&sensor=false"></script>

<body onload="initialize()" onunload="GUnload()">
<div>
<asp:Panel id="Panel1" runat="server">
<asp:Literal id="js" runat="server"></asp:Literal>
<div id="map_canvas" style="width: 1000px; height: 615px"></div>
</asp:Panel>
</div>
</body>
</html> 
```

任何答案/建议都是可观的..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:19:26.527

你有这条线的地方：

```
 Locations += Environment.NewLine + " map.addOverlay(new GMarker(new GLatLng(" + lat + "," + lon + ")));"; 
```

您需要添加一些类似的内容：

```
 Locations += Environment.NewLine + " map.addOverlay(new google.maps.event.addListener(GMarker, 'click', function () {
            new google.maps.InfoWindow({
                content: "String for content"
            });
        });"; 
```

但是，问题在于它会为您设置的最后一个标记创建一个 InfoWindow，因为事件会动态创建 InfoWindow。

一个好的解决方案是将您的标记存储在一个数组中，然后在 javascript 中您可以拥有

```
 markerArray[index]['window'] = new google.maps.InfoWindow({
                content: "String for content"
            }); 
```

这也将允许您为每个只需要调用的标记附加一个单击侦听器事件

```
 new google.maps.event.addListener(markerArray[index], 'click', function() {
                this['window'].open(map, this);
            }); 
```

我希望这可以帮助你

# xaml - 刷新自定义控件 Xaml/lightswitch

> ID：15428213
> 
> 赞同：1
> 
> 时间：2013-03-15T08:57:33.953
> 
> 标签：xaml, silverlight-4.0, controls, lightswitch-2012

我正在 Lightswitch 中创建一个应用程序，我使用[了这个](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/2/Creating-A-LightSwitch-Custom-Silverlight-Control.aspx)自定义控件。

问题是当我更改控件的值时。

动态更改控制可能是不可能的，必须刷新它才能获得新值。

所以我需要知道如何只刷新控件或屏幕的一部分。

这就是控制代码的样子

```
<Grid x:Name="LayoutRoot" Background="White" Width="200" Height="200">
    <GaugeControl:GaugeControl HorizontalAlignment="Left" Margin="10,10,10,10" 
                               Name="gaugeControl1"                       
                               Maximum="25000" Minimum="0" VerticalAlignment="Top"  />
</Grid> 
```

这种方式是我设置绑定到值的方式

```
public RadioGauge() {
  InitializeComponent();
  gaugeControl1.Value = Amount.amount; // where Amount is class and amount is int property
} 
```

这样我改变了控制属性

```
SilverlightCustomControls.Amount.amount = 10000; 
```

我找不到有关刷新或重新加载 XAML 控件或仅刷新 lightswitch 屏幕的一部分的任何信息。谢谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:33:17.907

**如果**组件是数据绑定的，Lightswitch 会自动刷新组件。因为您只是设置值，所以控件没有被刷新。您不能将控件绑定到您的属性吗？那么当您在代码中更改它时，控件应该自动刷新吗？

```
<Grid x:Name="LayoutRoot" Background="White" Width="200" Height="200">
    <GaugeControl:GaugeControl  HorizontalAlignment="Left" Margin="10,10,10,10"
                                Name="gaugeControl1"
                                Maximum="25000" Minimum="0"
                                VerticalAlignment="Top"
                                Value="{Binding Screen.SCREENDATASET.SelectedItem.Amount}"  />
</Grid> 
```

# security - 如何在 Magento 社区版中使密码更安全？

> ID：15428214
> 
> 赞同：0
> 
> 时间：2013-03-15T08:57:36.107
> 
> 标签：security, magento

我怎样才能使 magento 以更好的加密存储密码。因为 md5 不是一个健壮的。有没有办法提高magento的安全性？

因此，客户的详细信息是安全的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:02:48.830

您可以从自定义算法中更改 magento 加密算法。我正在为我的 mageto 使用 SHA1。我为此创建了一个自定义模块。在哈希函数中，您可以实现任何算法。

magento/app/code/local/My/ShaModule/Model/Encryption.php

```
 public function getHash($password, $salt = false)
    {
        return $this->hash($password);
    }
   public function hash($data){

        return sha1($data); 
    }

    public function validateHash($password, $hash) {
        return $this->hash($password) === $hash;

        }
}
?> 
```

magento/app/code/local/My/ShaModule/etc/config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : config.xml
    Created on : July 26, 2012, 1:12 PM
    Author     : sanjeewani
    Description:
        Purpose of the document follows.
-->

<config>
    <modules>
        <My_ShaModule>
            <version>0.1.0</version>
            <depends>
             <Mage_Core />
            </depends>
        </My_ShaModule>
    </modules>

    <global>
        <models>
            <core>
                <rewrite>
                 <encryption>My_ShaModule_Model_Encryption</encryption>
                </rewrite>
            </core>
        </models>
        <helpers>
            <core>
             <encryption_model>My_ShaModule_Model_Encryption</encryption_model>
            </core>
        </helpers>
    </global>

    <frontend>
        <routers>
            <my_shamodule>
             <use>standard</use>
                <args>
                    <module>My_ShaModule</module>
                    <frontName>shamodule</frontName>
                </args>
            </my_shamodule>
        </routers>
    </frontend>
</config> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:59:48.507

你可以参考一个很好的博客：

[http://www.magentogarden.com/blog/how-are-passwords-encrypted-in-magento.html](http://www.magentogarden.com/blog/how-are-passwords-encrypted-in-magento.html)

它使用相同的 MD5，但附加了一层额外的安全性。

# jquery - 在 Gridview 中添加 jQuery ContextMenu

> ID：15428225
> 
> 赞同：4
> 
> 时间：2013-03-15T08:58:17.100
> 
> 标签：jquery, contextmenu

我在这里有一个菜单。但是在脚本中的何处添加菜单，以便我可以在网格中获取上下文菜单。

// HTML

```
<ul id="myMenu" class="contextMenu">
        <li class="insert"><a href="#insert">Add New</a></li>
        <li class="edit"><a href="#edit">Edit</a></li>
        <li class="delete"><a href="#delete">Delete</a></li>
    </ul> 
```

//脚本

```
 $(document).ready(function () {
            $(".customerRow").contextMenu(function (action, el, pos) { contextMenuWork(action, el, pos); });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:45:10.060

尝试在脚本中的上下文菜单之后添加菜单。

代替：

```
$(document).ready(function () {
            $(".customerRow").contextMenu(function (action, el, pos) { contextMenuWork(action, el, pos); });
}); 
```

和：

```
$(document).ready(function () {
            $(".customerRow").contextMenu({ menu: 'myMenu' }, function (action, el, pos) { contextMenuWork(action, el, pos); });
  }); 
```

# java - Java Heap 中的空间/代之间的比率是恒定的吗？

> ID：15428227
> 
> 赞同：13
> 
> 时间：2013-03-15T08:58:22.060
> 
> 标签：java, garbage-collection, jvm

我已经阅读[了这篇](https://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)关于虚拟机垃圾收集调优的文章，以更好地了解 Java 垃圾收集器。每个空间都有一个*虚拟*堆空间区域，随着所需的堆空间接近最大堆大小，它可以增长到该区域。这可以在这张图片中看到：（ [来源：][[oracle.com](http://www.oracle.com/ocom/groups/public/@otn/documents/digitalasset/190244.gif)][）][![Java GC 代数安排](../Images/1db459ee8a8a608c93b95804d625cc65.png)](https://i.stack.imgur.com/vXlre.png)

您可以使用**NewRatio**参数设置*年轻代*和*旧（Tenured）代*之间的比率，以及使用**SurvivorRatio参数设置***Eden Space*和*Survivor Space*之间的比率。

 ******最近有人问了[这个问题](https://stackoverflow.com/questions/15413783/standard-allocation-ratio-for-java-heap)，即找出堆空间的默认比率。它说您应该使用**PrintGCDetails**参数并手动计算比率。

我的问题是：不同堆空间的大小是否以相同的比率增加，从而在应用程序的整个运行时保持启动时它们之间设置的比率不变？例如，如果 Young Generation 和 Old/Tenured Generation 的默认 NewRatio 为 3，则初始保留堆空间为 Young 为 100MB，Old 为 300MB。如果需要为旧空间保留更多内存，可以说多 300MB，总共 600MB。为 Young Space 保留的内存是否也会翻倍至 200MB 以保持比例不变？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T23:32:11.763

我认为您指的是**GC Ergonomics**和**Adaptive Size Policy**

*   Hotspost GC 的一项功能，可**在运行时**根据正在运行的应用程序的当前分配行为自动**调整**生成的大小。
***   此功能默认为 ON，并在运行时控制/调整代的大小。*   事实上，如果你不禁用自适应大小策略，**一些****GC 参数**将被**忽略，例如。**`-XX:SurvivorRatio=`.**

 **您**可以****使用**. _ _ 禁用 AdaptiveSizePolicy 后，GC 将遵循由您的启动参数（例如、、、、）指定的代的初始大小，并且它们将保持不变。**`-XX:-UseAdaptiveSizePolicy``-Xms``-Xmx``-XX:MaxNewSize=``-XX:NewSize=``-XX:SurvivorRatio=`**

 **[您可以在UseAdaptiveSizePolicy 和其他 jvm opts](https://stackoverflow.com/q/3634465/772000)中找到有关自适应大小策略的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:42:09.203

PermGen 与年轻代的比例由 JVM 部分维持，但要说如果维持比例，答案是**否定**的。

JVM7 已经变得足够先进和复杂，我们不应该预测堆内的代分配。

在 JVM 运行的每个 GC 周期中，它还会进行度量分析以了解当前应用程序的内存存储行为。- 如果更多的对象在 GC 的多个周期中幸存下来，那么 PermGen 会减少，并且将一些空间分配给 YoungGeneration。基本上`No. of objects`x`number of GC cycles they skip`在动态调整生成比率方面起着标准作用。

我希望它有帮助，谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T18:33:00.597

**编辑：我想我可能有问题。在我调查的时候把这张纸条放在这里，以免把人们误入歧途！**

如果您使用的是 Parallel Scavenge GC ( `-XX:+UseParallelGC`)，Ales0x 的答案非常好，但 Concurrent Mark-Sweep GC ( `-XX:+UseConcMarkSweepGC`) 不支持自适应大小。

使用 Concurrent Mark-Sweep，新/年轻代大小是根据*初始*堆大小设置的（除非您指定`-XX:NewSize=`）。新的代大小*不会*随着堆的增长而改变。**********

# ios - 获取历史积分ios

> ID：15428233
> 
> 赞同：0
> 
> 时间：2013-03-15T08:58:56.803
> 
> 标签：ios, drawing, uigesturerecognizer, uitouch

绘制时是否有任何函数或算法可以捕捉所有点`iPhone`？就像在 Android 中一样，我们有鬼神论点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:02:27.223

检查方法`touchesBegan:withEvent:`、`touchesMoved:withEvent:`和`touchesEnded:withEvent:`以`touchesCancelled:withEvent:`检测运动

例如使用方法 -touchesMoved:withEvent:

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPosition = [touch locationInView:self.view];
    NSLog(@"%@", NSStringFromCGPoint(currentPosition));
} 
```

有关更多信息，请查看UIResponder 类的[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)

# c# - Kinect 深度图像仅部分可见

> ID：15428236
> 
> 赞同：1
> 
> 时间：2013-03-15T08:59:02.050
> 
> 标签：c#, opencv, kinect, emgucv, kinect-sdk

我是 Kinect 和 C# 的新手。我正在尝试从 Kinect 获取深度图像，将其转换为位图以执行一些 OpenCV 操作，然后显示它。问题是，我只得到了深度图像的三分之一，其余的都是全黑的（如图所示）。这不是原始深度图像，而是我在绘画后收到的图像。

![在此处输入图像描述](../Images/0d8d6e68dd07ec0ff56dcd7112afb4eb.png)

这是代码-

image 和 image1 是我要显示的两个图像画布。

```
void DepthFrameReady(object sender, DepthImageFrameReadyEventArgs e)
    {

        DepthImageFrame Image;
        Bitmap bm;
        using (Image = e.OpenDepthImageFrame())
        {

           if (Image != null)
            {
            this.shortpixeldata = new short[Image.PixelDataLength];
            this.depthFrame32 = new byte[Image.Width * Image.Height * Bgr32BytesPerPixel];

            bmp = new Bitmap(Image.Width, Image.Height, System.Drawing.Imaging.PixelFormat.Format32bppRgb);
            Image.CopyPixelDataTo(this.shortpixeldata);

            byte[] convertedDepthBits = this.ConvertDepthFrame(this.shortpixeldata, ((KinectSensor)sender).DepthStream);

            BitmapData bmapdata = bmp.LockBits(
                                new System.Drawing.Rectangle(0, 0, Image.Width, Image.Height),
                                ImageLockMode.WriteOnly,
                                bmp.PixelFormat);

            IntPtr ptr = bmapdata.Scan0;
            Marshal.Copy(convertedDepthBits, 0, ptr, Image.PixelDataLength);
            bmp.UnlockBits(bmapdata);

            MemoryStream ms1 = new MemoryStream(); 
            bmp.Save(ms1, System.Drawing.Imaging.ImageFormat.Jpeg);
            System.Windows.Media.Imaging.BitmapImage bImg = new System.Windows.Media.Imaging.BitmapImage();
            bImg.BeginInit();
            bImg.StreamSource = new MemoryStream(ms1.ToArray());
            bImg.EndInit();

            image.Source = bImg;

                if (bmp != null)
            {

                Image<Bgr, Byte> currentFrame = new Image<Bgr, Byte>(bmp); 

                Image<Gray, Byte> grayImage = currentFrame.Convert<Gray, Byte>().PyrDown().PyrUp();
                Image<Gray, Byte> Dest = new Image<Gray, Byte>(grayImage.Size);
                CvInvoke.cvCanny(grayImage, Dest, 10, 60, 3);

                image1.Source = ToBitmapSource(Dest);

                CalculateFps();
            }

            }

            else
            {
                System.Diagnostics.Debug.WriteLine("depth bitmap empty :/");
            }
        }
    }

        private byte[] ConvertDepthFrame(short[] depthFrame, DepthImageStream depthStream)
        {
            System.Diagnostics.Debug.WriteLine("depthframe len :{0}", depthFrame.Length);

        for (int i16 = 0, i32 = 0; i16 < depthFrame.Length && i32 < this.depthFrame32.Length; i16++, i32 += 4)
        {

        int realDepth = depthFrame[i16] >> DepthImageFrame.PlayerIndexBitmaskWidth;

        byte Distance = 0;

        int MinimumDistance = 800;
        int MaximumDistance = 4096;

        if (realDepth > MinimumDistance)
        {

        //White = Close
        //Black = Far
        Distance = (byte)(255-((realDepth-MinimumDistance)*255/(MaximumDistance-MinimumDistance)));

        this.depthFrame32[i32 + RedIndex] = (byte)(Distance);
        this.depthFrame32[i32 + GreenIndex] = (byte)(Distance);
        this.depthFrame32[i32 + BlueIndex] = (byte)(Distance);
        }

        else
        {
        this.depthFrame32[i32 + RedIndex] = 0;
        this.depthFrame32[i32 + GreenIndex] = 150;
        this.depthFrame32[i32 + BlueIndex] = 0;
        }
        }

        return this.depthFrame32;
        } 
```

我尝试了不同的 PixelFormats 无济于事。我无法弄清楚问题所在。有人知道我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:12:46.523

好吧，我自己想通了。它一直隐藏在人们的视线中。

函数 ConvertDepthFrame 将字节数组返回到不同大小的 convertDepthBits（它的 4 个独立通道，因此是原始大小的 4 倍），我需要在方法调用中使用要复制的数据长度为 4*Image.PixelDataLength：Marshal.Copy (...)

现在工作正常。呸！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:17:04.697

我建议使用 a`WritableBitmap`将深度图像复制为可查看的格式。在 的情况下`PixelFormat`，该信息在深度图像本身中可用，因此您应该使用与`WritableBitmap`正在捕获的 as 相同的格式。

您是否查看过 Microsoft 提供的任何示例？您可以在[Kinect for Windows Samples CodePlex](http://kinectforwindows.codeplex.com)页面上找到它们。有几个示例演示了如何将深度数据复制到 a 中`WritableBitmap`然后输出。例如，这里是`DepthFrameReady`“DepthBasics-WPF”示例应用程序的回调函数：

```
/// <summary>
/// Event handler for Kinect sensor's DepthFrameReady event
/// </summary>
/// <param name="sender">object sending the event</param>
/// <param name="e">event arguments</param>
private void SensorDepthFrameReady(object sender, DepthImageFrameReadyEventArgs e)
{
    using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
    {
        if (depthFrame != null)
        {
            // Copy the pixel data from the image to a temporary array
            depthFrame.CopyDepthImagePixelDataTo(this.depthPixels);

            // Get the min and max reliable depth for the current frame
            int minDepth = depthFrame.MinDepth;
            int maxDepth = depthFrame.MaxDepth;

            // Convert the depth to RGB
            int colorPixelIndex = 0;
            for (int i = 0; i < this.depthPixels.Length; ++i)
            {
                // Get the depth for this pixel
                short depth = depthPixels[i].Depth;

                // To convert to a byte, we're discarding the most-significant
                // rather than least-significant bits.
                // We're preserving detail, although the intensity will "wrap."
                // Values outside the reliable depth range are mapped to 0 (black).

                // Note: Using conditionals in this loop could degrade performance.
                // Consider using a lookup table instead when writing production code.
                // See the KinectDepthViewer class used by the KinectExplorer sample
                // for a lookup table example.
                byte intensity = (byte)(depth >= minDepth && depth <= maxDepth ? depth : 0);

                // Write out blue byte
                this.colorPixels[colorPixelIndex++] = intensity;

                // Write out green byte
                this.colorPixels[colorPixelIndex++] = intensity;

                // Write out red byte                        
                this.colorPixels[colorPixelIndex++] = intensity;

                // We're outputting BGR, the last byte in the 32 bits is unused so skip it
                // If we were outputting BGRA, we would write alpha here.
                ++colorPixelIndex;
            }

            // Write the pixel data into our bitmap
            this.colorBitmap.WritePixels(
                new Int32Rect(0, 0, this.colorBitmap.PixelWidth, this.colorBitmap.PixelHeight),
                this.colorPixels,
                this.colorBitmap.PixelWidth * sizeof(int),
                0);
        }
    }
} 
```

这个特定类的完整代码可以在这里找到：http: [//kinectforwindows.codeplex.com/SourceControl/changeset/view/861462899ae7#v1.x/ToolkitSamples1.6.0/C#/DepthBasics-WPF/MainWindow.xaml.cs](http://kinectforwindows.codeplex.com/SourceControl/changeset/view/861462899ae7#v1.x/ToolkitSamples1.6.0/C#/DepthBasics-WPF/MainWindow.xaml.cs)

“Kinect Explorer”示例是另一个值得回顾的好示例，因为它同时检查了所有三个流。它需要 CodePlex 存储库中未包含的库，但可以在[Kinect for Windows Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)中找到。

# java - 如何在Java中将双精度值映射到浮点数？

> ID：15428237
> 
> 赞同：0
> 
> 时间：2013-03-15T08:59:04.217
> 
> 标签：java, algorithm, floating-point, bit-manipulation, double-precision

乍一看，我的问题似乎有点奇怪。但将双精度值转换为浮点值不是我想要的。因为当你转换它时，你只是失去了 IEEE-754 定义的规则的一些精度，并且无法实现双精度值到浮点范围的实际映射；这是没用的。以下表达式有效，但是当您有大量输入时，它非常昂贵：

```
float mappedVal = (float)((val * MAX_FLOAT_VALUE + 1) / MAX_DOUBLE_VALUE); 
```

我可以通过某种按位运算将结果近似为上述“mappedVal”以加速相同的计算吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:43:55.343

我不确定您要达到什么目的，因为某些双精度值远远超出了浮点数的范围。

但是，如果您愿意冒险丢失太大而无法浮动的值，请尝试以下操作：

```
float f = new Double(val).floatValue(); 
```

编辑：这与铸造浮动完全相同。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:25:35.843

这将一个双精度值映射到具有相同最高 32 位的浮点数中：

```
float mappedVal = Float.intBitsToFloat((int)(Double.doubleToLongBits(val)>>32)); 
```

这个操作的算术解释虽然有点复杂，部分指数被映射到尾数......

# c - 没有收到从 tap 接口发送的广播数据包

> ID：15428238
> 
> 赞同：1
> 
> 时间：2013-03-15T08:59:12.790
> 
> 标签：c, linux, sockets, tun

我正在[从这里](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)制作一个类似于 simpletun 的程序。

1.  应用程序将 UDP 广播发送到 tap 接口。

2.  在 Tap 接口上侦听的程序（类似于 simpletun）接收数据包并将其作为广播再次回显。

3.  我能够在 Wireshark 上看到两个数据包，但应用程序没有收到它。似乎内核正在丢弃它们。

4.  如果类似的数据包是从不同的机器发送的。它工作正常。

tun/tap 代码：-

```
char datagram[4096];
struct pseudo_header
{
        u_int32_t source_address;
        u_int32_t dest_address;
        u_int8_t placeholder;
        u_int8_t protocol;
        u_int16_t udp_length;
};
struct pseudo_header psh;
char *pseudogram;

 nread = cread(tap_fd, buffer, BUFSIZE);

    memcpy(&source_port,(char *)(buffer+14+20),2);  

    memset (datagram, 0, 4096);

    memcpy(datagram,buffer,14); //copy eth-header
    datagram[6] = 0xXX;//change mac address
    datagram[7] = 0xXX;
    datagram[8] = 0xXX;
    //IP header
    struct iphdr *iph = (struct iphdr *) (datagram +14);
    //TCP header
    struct udphdr *udph = (struct udphdr *) (datagram + 14 + sizeof (struct iphdr));

    data = datagram + sizeof(struct iphdr) + sizeof(struct udphdr) +14;     
    strcpy(data,"Any string");
    iph->ihl = 5;
    iph->version = 4;
    iph->tos = 0;
    iph->tot_len = sizeof (struct iphdr) + sizeof (struct udphdr) + strlen(data);
    iph->id = htonl (54321);        //Id of this packet
    iph->frag_off = 0;
    iph->ttl = 255;

    iph->protocol = IPPROTO_UDP;
    iph->check = 0;         //Set to 0 before calculating checksum

    strcpy(source_ip , "192.168.0.99");
    iph->saddr = inet_addr ( source_ip );   //Spoof the source ip address
    strcpy(destination_ip , "255.255.255.255");
    iph->daddr = inet_addr (destination_ip);

     udph->source = htons(5933);
    //udph->dest = htons(source_port);
    udph->dest = (source_port);
    udph->len = htons(sizeof(struct udphdr) + strlen(data));

    //Now the UDP checksum
    psh.source_address = inet_addr( source_ip );
    psh.dest_address = inet_addr(destination_ip);
    psh.placeholder = 0;
    psh.protocol = IPPROTO_UDP;
    psh.udp_length = htons(sizeof(struct udphdr) + strlen(data) );

    int psize = sizeof(struct pseudo_header) + sizeof(struct udphdr) + strlen(data);
    pseudogram = malloc(psize);

    memcpy(pseudogram , (char*) &psh , sizeof (struct pseudo_header));
    memcpy(pseudogram + sizeof(struct pseudo_header) , udph , sizeof(struct udphdr) + strlen(data));
    memcpy(pseudogram + sizeof(struct pseudo_header) + sizeof(struct udphdr), data , strlen(data));

    udph->check = 0;
    udph->check = csum( (unsigned short*) pseudogram , psize);
    //Ip checksum
    iph->check = csum ((unsigned short *) datagram, iph->tot_len);

    //writeback
    cwrite(tap_fd,datagram,iph->tot_len +14); 
```

上面的代码在使用原始套接字读取和写入的另一台机器上运行时效果很好。（没有 eth 标头）。

接收申请代码：-

```
int broadcast =1;

if ((sockfd = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP))==-1)
      err("socket");

setsockopt(sockfd,SOL_SOCKET,SO_BINDTODEVICE,"tun0",5);

bzero(&my_addr, sizeof(my_addr));
my_addr.sin_family = AF_INET;
my_addr.sin_port = htons(PORT);
memset(&my_addr.sin_addr.s_addr,255,sizeof(my_addr.sin_addr.s_addr));

ret = setsockopt(sockfd,SOL_SOCKET,SO_BROADCAST,&broadcast,sizeof(broadcast));
    if(ret<0)
      printf("setsockopt bindto failed");

    if (sendto(sockfd,buf,500,0, (struct sockaddr*)&my_addr,slen_len) == -1)
        err("send()");

    recvfrom(sockfd, buf, 500, 0, (struct sockaddr*)&cli_addr, &slen); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:56:50.030

通过对 ip 标头的 tot_len 使用正确的校验和和正确的字节顺序来解决它

`iph->tot_len = (htons)sizeof (struct iphdr) + sizeof (struct udphdr) + strlen(data);`

`iph->id = htons (54321); //Id of this packet`

`iph->check = htons(csum ((unsigned short *) datagram,sizeof(struct ip_hdr)));` **其中 csum 是计算校验和的常用函数。

收到来自不同机器的数据包，因为内核的网络堆栈正在重新计算 iph->tot_len 和 ip 校验和。所以数据包是正确形成的。

在更正应用程序接收到 tot_len 数据包的校验和和字节顺序后，使用我的 tun 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:16:24.020

你检查过主机防火墙规则吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:56:15.337

暗中猜测：

但是您可以尝试更改您的 TUN/TAP 代码，将目标**MAC**地址设置为广播（FF:FF:FF:FF:FF:FF），当它将 IP 目标视为广播 IP（255.255.255.255）？

# java - 我想从工作灯适配器调用一个 java 类

> ID：15428243
> 
> 赞同：0
> 
> 时间：2013-03-15T08:59:24.920
> 
> 标签：java, javascript, ibm-mobilefirst

我在这个 url “ [http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#authentication](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#authentication) ”或 [ftp://public.dhe.ibm.com/software/中遵循了这个文档模块 5.5移动解决方案/worklight/docs/v505/Module_05_5_-_Using_Java_in_Adapters.pdf](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_05_5_-_Using_Java_in_Adapters.pdf)

并做了同样的我的代码结构是

```
server/java                        folder name
com.worklight.custonmode           package name
loginfunction.java                 java file inside com.worklight.custonmode package
login                              java method in class loginfunction 
```

我已经从工作灯适配器中调用了

```
function loginmodules(username, passwd) {   
    return {
        result : com.worklight.custonmode.loginfunction.login()
    };
} 
```

当我打电话时，我收到这样的错误

```
 response [/apps/services/api/Light/common/query] success: /*-secure- {"responseID":"2","errors":["Ecma Error: TypeError: Cannot call property login in object [JavaPackage com.worklight.custonmode.loginfunction]. It is not a function, it is \"object\". 
```

(C%3A%5CUsers%5CADMIN%5CworkspaceM11%5CMobileClient%5Cadapters%5CAdapter/Adapter-impl.js#103)"],"isSuccessful":false,"warnings":[],"info":[]}*/

```
 worklight.js (line 1112)

    Procedure invocation error. Ecma Error: TypeError: Cannot call property login in object [JavaPackage com.worklight.custonmode.loginfunction]. It is not a function, it is "object". (C%3A%5CUsers%5CADMIN%5CworkspaceM11%5CMobileClient%5Cadapters%5CAdapter/Adapter-impl.js#103) 
```

我在 loginfunction.java 中的登录功能

```
 public class loginfunction {

public static void login() {
    //============== Code to adapt to your own configuration =============//
    String server = "https://ibm-f4acjqe8c6p:9443/dfd";     // Set the Public URI of your RRC server
    String JTS_Server = "https://ibm-f4acjqe8c6p:9443/jts"; //Set the public URI of your JTS server
    String login = "Admin";                                 // Set the user login 
    String password = "Admin";                              // Set the associated password
    //============== -------------------------------------- =============//

    String rootServices = server + "/rootservices";
    String catalogXPath = "/rdf:Description/oslc_we:rweServiceProviders/@rdf:resource";
    String serviceProviderTitleXPath = "//oslc:ServiceProvider/dcterms:title";

    System.out.println(">> Example03: Print out the content of the Service Providers catalog");
    System.out.println("    - Root Services URI: "+rootServices);
    System.out.println("    - Service Providers catalog XPath expression: "+catalogXPath);
    System.out.println("    - Service Provider title XPath expression: "+serviceProviderTitleXPath);
    System.out.println("    - Login: "+login);
    System.out.println("    - Password: "+password);

    // Setup the HttClient
    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpUtils.setupLazySSLSupport(httpclient);

    // Setup the rootServices request
    HttpGet rootServiceDoc = new HttpGet(rootServices);
    rootServiceDoc.addHeader("Accept", "application/rdf+xml");
    rootServiceDoc.addHeader("OSLC-Core-Version", "2.0");

    try {
        // Request the Root Services document
        HttpResponse rootServicesResponse = HttpUtils.sendGetForSecureDocument(
                                                server, rootServiceDoc, login, password, httpclient,JTS_Server);

        if (rootServicesResponse.getStatusLine().getStatusCode() == 200) {
            // Define the XPath evaluation environment
            XPathFactory factory = XPathFactory.newInstance();
            XPath xpath = factory.newXPath();
            xpath.setNamespaceContext(
                    new NamespaceContextMap(new String[]
                            {   "rdf", "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
                                "oslc_we","http://open-services.net/xmlns/we/1.0/"}));

            // Parse the response body to retrieve the catalog URI
            InputSource source = new InputSource(rootServicesResponse.getEntity().getContent());
            Node attribute = (Node) (xpath.evaluate(catalogXPath, source, XPathConstants.NODE));
            String serviceProvidersCatalog = attribute.getTextContent();
            rootServicesResponse.getEntity().consumeContent();

            // Setup the catalog request
            HttpGet catalogDoc = new HttpGet(serviceProvidersCatalog);
            catalogDoc.addHeader("Accept", "application/xml");
            catalogDoc.addHeader("OSLC-Core-Version", "2.0");

            // Access to the Service Providers catalog
            HttpResponse catalogResponse = HttpUtils.sendGetForSecureDocument(
                                                        server, catalogDoc, login, password, httpclient,JTS_Server);
            if (catalogResponse.getStatusLine().getStatusCode() == 200) {
                // Define the XPath evaluation environment
                XPath xpath2 = factory.newXPath();
                xpath2.setNamespaceContext(
                        new NamespaceContextMap(new String[]
                                {   "oslc", "http://open-services.net/ns/core#",
                                    "dcterms","http://purl.org/dc/terms/"}));

                // Parse the response body to retrieve the Service Provider
                source = new InputSource(catalogResponse.getEntity().getContent());
                NodeList titleNodes = (NodeList) (xpath2.evaluate(serviceProviderTitleXPath, source, XPathConstants.NODESET));

                // Print out the title of each Service Provider
                int length = titleNodes.getLength();
                System.out.println(">> Project Areas:");
                for (int i = 0; i < length; i++) {
                    System.out.println(">> \t - "+ titleNodes.item(i).getTextContent());
                }
            }
        }
        rootServicesResponse.getEntity().consumeContent();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (XPathExpressionException e) {
        e.printStackTrace();
    } catch (InvalidCredentialsException e) {
        e.printStackTrace();
    } finally {
        // Shutdown the HTTP connection
        httpclient.getConnectionManager().shutdown();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-26T17:41:05.743

我只是想通了。有趣的是，每个人都在这个问题上沉默了两个月。对我来说，这根本不明显，因为它在某些项目中有效，而在其他项目中根本无效。机器也是如此。它可以在一个地方工作，但不能在另一个地方工作（如果你不知道发生了什么）。

检查您的 .project 文件并确保其中包含正确的 buildCommand 标签。

```
<buildCommand>
        <name>org.eclipse.jdt.core.javabuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.wst.jsdt.core.javascriptValidator</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.wst.common.project.facet.core.builder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>com.worklight.studio.plugin.WorklightProjectBuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.wst.validation.validationbuilder</name>
        <arguments>
        </arguments>
    </buildCommand> 
```

阅读更多内容：[ECMA TypeError 从 Worklight 适配器调用 Java 类](https://stackoverflow.com/questions/16614742/ecma-typeerror-calling-java-class-from-worklight-adapter/16761874#16761874)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:42:29.683

确保 login() 函数是公共的和静态的。查看您正在使用的培训模块的示例代码。

# java - 在运行时更新或更改视图中的图像

> ID：15428245
> 
> 赞同：0
> 
> 时间：2013-03-15T08:59:29.517
> 
> 标签：java, android

我在 OnClick 事件中更新 UI 时遇到了一点问题。

当我这样做时：

```
case R.id.radStripMiningCoal :
    {    
        LinearLayout testLayout = (LinearLayout)findViewById(R.id.layouttest);
        LinearLayout layout3 = (LinearLayout)findViewById(R.id.layout2);
        LinearLayout layout4 = (LinearLayout)findViewById(R.id.layout3);
        LinearLayout layout = (LinearLayout)findViewById(R.id.recomended);
        LinearLayout layout2 = (LinearLayout)findViewById(R.id.basic);

        int origWidth = getWindowManager().getDefaultDisplay().getWidth();

        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(origWidth,LayoutParams.WRAP_CONTENT);
        layout2.setLayoutParams(params);
        layout.setLayoutParams(params);
        testLayout.setLayoutParams(params);
        layout3.setLayoutParams(params);
        layout4.setLayoutParams(params);

        stripminingcoal.setVisibility(View.VISIBLE);
        VSLists.setVisibility(View.GONE);
        Next.setVisibility(View.GONE);

            AnimationDrawable animation = new AnimationDrawable();

            animation.addFrame(getResources().getDrawable(R.drawable.multispd1), 5000);
            animation.addFrame(getResources().getDrawable(R.drawable.img1), 5000);
            animation.addFrame(getResources().getDrawable(R.drawable.shocktubecluster1), 5000);
            animation.setOneShot(false);

            ImageView imageAnim =  (ImageView) findViewById(R.id.imgBasicIS);           
            imageAnim.setBackgroundDrawable(animation);            
            animation.start();

            AnimationDrawable animation2 = new AnimationDrawable();
            animation2.addFrame(getResources().getDrawable(R.drawable.unidelaysp), 5000);
            animation2.addFrame(getResources().getDrawable(R.drawable.trunkline), 5000);                
            animation2.setOneShot(false);

            ImageView imageAnim2 =  (ImageView) findViewById(R.id.imgRecomendedIS);         
            imageAnim2.setBackgroundDrawable(animation2);             
            animation2.start();

            AnimationDrawable animation3 = new AnimationDrawable();

            animation3.addFrame(getResources().getDrawable(R.drawable.leadin2), 5000);  
            animation3.addFrame(getResources().getDrawable(R.drawable.tubestarter),5000);
            animation3.setOneShot(false);
            ImageView imageAnim3 =  (ImageView) findViewById(R.id.imgRecomendedBSS);            
            imageAnim3.setBackgroundDrawable(animation3);           
            animation3.start();

            txtBasicIS.setText("Shock Tube Multi SPD / Detonating Cord / Cluster");   
            txtRecomendedIS.setText("Shock Tube Uni-Delay SP / Trunkline");
            txtRecomendedBSS.setText("Lead-In Line / Electric Shock Tube Starter"); 
```

一切都更新并显示正常。但是，只要我在“案例”上使用不同的代码执行相同的代码，它就不会将图像更新为新图像：

```
 case R.id.radNarrowReefGold:
    {
        LinearLayout testLayout = (LinearLayout)findViewById(R.id.layouttest);
        LinearLayout layout3 = (LinearLayout)findViewById(R.id.layout2);
        LinearLayout layout4 = (LinearLayout)findViewById(R.id.layout3);
        LinearLayout layout = (LinearLayout)findViewById(R.id.recomended);
        LinearLayout layout2 = (LinearLayout)findViewById(R.id.basic);

        int origWidth = getWindowManager().getDefaultDisplay().getWidth();

        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(origWidth,LayoutParams.WRAP_CONTENT);
        layout2.setLayoutParams(params);
        layout.setLayoutParams(params);
        testLayout.setLayoutParams(params);
        layout3.setLayoutParams(params);
        layout4.setLayoutParams(params);

        stripminingcoal.setVisibility(View.VISIBLE);
        VSLists.setVisibility(View.GONE);
        Next.setVisibility(View.GONE);

            AnimationDrawable animation = new AnimationDrawable();

            animation.addFrame(getResources().getDrawable(R.drawable.udlp3), 5000);
            animation.addFrame(getResources().getDrawable(R.drawable.udlp6), 5000);
            animation.addFrame(getResources().getDrawable(R.drawable.trunkline), 5000);
            animation.setOneShot(false);

            ImageView imageAnim =  (ImageView) findViewById(R.id.imgBasicIS);           
            imageAnim.setBackgroundDrawable(animation);            
            animation.start();

            AnimationDrawable animation2 = new AnimationDrawable();
            animation2.addFrame(getResources().getDrawable(R.drawable.udlp3vivid), 5000);
            animation2.addFrame(getResources().getDrawable(R.drawable.udlp6vivid), 5000);   
            animation2.addFrame(getResources().getDrawable(R.drawable.trunkline), 5000);                
            animation2.setOneShot(false);

            ImageView imageAnim2 =  (ImageView) findViewById(R.id.imgRecomendedIS);         
            imageAnim2.setBackgroundDrawable(animation2);             
            animation2.start();

            AnimationDrawable animation3 = new AnimationDrawable();

            animation3.addFrame(getResources().getDrawable(R.drawable.leadin2), 5000);  
            animation3.addFrame(getResources().getDrawable(R.drawable.tubestarter),5000);
            animation3.setOneShot(false);
            ImageView imageAnim3 =  (ImageView) findViewById(R.id.imgRecomendedBSS);            
            imageAnim3.setBackgroundDrawable(animation3);           
            animation3.start();

            txtBasicIS.setText("Uni-Delay LP (3) / Uni-Delay LP (6) / Trunkline");   
            txtRecomendedIS.setText("Shock Tube Uni-Delay SP / Trunkline");
            txtRecomendedBSS.setText("Lead-In Line / Electric Shock Tube Starter"); 
    } 
```

我错过了什么或做错了什么？

textViews 也不会改变。

提前致谢。帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:47:34.353

这是由于缺少“休息”；在你的 switch case 结构中声明。

您可以使用我即时编写的以下小片段进行测试。如果您删除休息时间；声明，您无法将文本切换到 MESSI，它仅显示 RONALDO。换句话说，逻辑被打破了。

如果“破”；在那里，您可以在 MESSI 和 RONALDO 之间切换。

MainActivity.java

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener{

TextView myText;
private Button b1;
private Button b2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myText = (TextView)this.findViewById(R.id.textView1);

        b1 = (Button)this.findViewById(R.id.buttonMessi);
        b1.setOnClickListener(this);

        b2 = (Button)this.findViewById(R.id.buttonRonaldo);
        b2.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch(v.getId()) {
        case R.id.buttonMessi:
            myText.setText("MESSI");
          break;
        case R.id.buttonRonaldo:
            myText.setText("RONALDO");
          break;
      }

    }

} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:orientation="horizontal">
<Button
    android:id="@+id/buttonMessi"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignRight="@+id/textView1"
    android:layout_marginBottom="40dp"
    android:text="Messi" />
<Button
    android:id="@+id/buttonRonaldo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignRight="@+id/textView1"
    android:layout_marginBottom="40dp"
    android:text="Ronaldo" />
</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T12:05:43.520

尝试添加 img.SetImageResource(0); 在上一行之前。它为你赢得了荣誉

# ajax - 使用 jquery 的多个 ajax 请求基于当前项目类 div 的子 div 的数量

> ID：15428246
> 
> 赞同：1
> 
> 时间：2013-03-15T08:59:34.090
> 
> 标签：ajax, jquery

代码

```
 <form id="product_form" action="" method="post">
        <input type="hidden" name="wpsc_ajax_action" value="add_to_cart">
        <input type="hidden" name="product_id" value="8191">
        <div class="current-items">
        <div id="903" class="wpsc_select_variation">
        <div id="902" class="wpsc_select_variation">
        <div id="903" class="wpsc_select_variation">
        <div id="875" class="wpsc_select_variation">
        </div>
   </form> 
```

查询代码

```
 jQuery("#product_form").live('submit', function(){

    $wpsc_select_variation= $(".current-items > div").attr("id");
    $wpsc_ajax_action = $("input[name='wpsc_ajax_action']").val();
    $product_id = $("input[name='product_id']").val();

    form_values = 'variation[480]='+$wpsc_select_variation+'&wpsc_ajax_action='+$wpsc_ajax_action+'&product_id='+$product_id;

     jQuery.ajax({
         type:"POST",
         url: "wp/products-page/500ml-600ml-colours/krink-k750/index.php?ajax=true",
         data:form_values ,
         success: function(returned_data){
         //$("#response").html(data);

            eval(returned_data);
             jQuery('div.wpsc_loading_animation').css('visibility', 'hidden');

             if(jQuery('#fancy_notification') != null) {
                 jQuery('#loading_animation').css("display", 'none');
             //jQuery('#fancy_notificationimage').css("display", 'none');
             }
         }
     });
     return false;

 }); 
```

如果 .current-items 类 div 内部有 4 个子 div，所以我想发送 4 个 Ajax 请求并在这行代码的每个循环中传递不同的子类 id

```
 $wpsc_select_variation= $(".current-items > div").attr("id"); 
```

代码正在处理一个请求

所以请帮助我根据.current-items类div内部的子div在jquery中创建循环

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:02:00.013

将 ajax 请求包装在`.each()`.

```
$(".current-items > div").each(function(){
  //ajax call.
  $wpsc_select_variation= $(this).attr("id");
  //after work done as asked in comment add below code.

  $(this).remove(); //to hide use $(this).hide();
}); 
```

# sql - 未使用的索引对性能的影响

> ID：15428249
> 
> 赞同：1
> 
> 时间：2013-03-15T08:59:39.173
> 
> 标签：sql, performance, sql-server-2008, indexing

在我的网站中，我不创建用户。用户是/被创建在不同的系统中，我无权访问。

他们在那里使用了 Userid = VARCHAR(50)

在我这边，我有一张非常简单的桌子，比如

```
 UserId VARCHAR(50)
 Employer VARCHAR(4)
 UserSpecificField VARCHAR(8)
 DateWhenItWasAddedToOurSystem DATETIME 
```

登录到我的系统后，我只做了一个简单的 SYNC，所以我的系统中也有所有人。我在这张表中有 2000 条记录。

问题：

我知道索引很好，应该使用它。我正在考虑向该表添加一个索引列，但我不确定它是否会有所帮助。

即使您不将该列用于任何内容，添加索引是否有助于提高性能？因为在我使用 USER 的任何地方，我都被迫使用用户的 VARCHAR(50) ID 来进行基于 SQL JOIN 的操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:28:21.597

除了小表大小之外，在此结构的表中的 UserId 上添加索引是没有意义的。请注意，这一列（假设 varchar(50) 字段将平均填充 50%），这一列将是表大小的 70%。因此 db 引擎必须首先扫描索引（其大小几乎与整个表一样大），然后在表中查找记录。此操作将比仅扫描表更占用资源。我很确定优化器根本不会使用索引。自己测试一下。在我看来，唯一的选择是添加一个聚集索引，它实际上将按 UserId “排序”您的表，使查询运行得更快，并且不会通过构建附加结构（即“正常”索引）来产生任何开销。我假设更新操作不经常执行。

```
create unique clustered index idxCLU__userid on <your_table_name>(UserId ) 
```

# jquery - jquery.dataTables.editable.js 版本 2.3.3 添加记录在第 398 行给出错误 oAddNewRowForm 没有“有效”属性

> ID：15428257
> 
> 赞同：0
> 
> 时间：2013-03-15T08:59:53.843
> 
> 标签：jquery

我使用用于删除和更新的 jquery.datatables.editable.js。但是，当我尝试添加新记录时，当我尝试提交添加新行的表单时会收到此消息。

有没有其他人经历过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-01T15:35:42.913

此问题主要发生在 fnTakeRowDataFromFormElements 函数中。由于使用 mDataProp 而不是 mData，无法正确检索下一行的 rowData 对象的列名。

```
rowData[oSettings.aoColumns[rel].mDataProp] = sCellValue; 
```

我已将此行更新为

```
rowData[oSettings.aoColumns[rel].mData] = sCellValue; 
```

我还更新了 fnOnRowAdded 中的部分

```
var values = fnTakeRowDataFromFormElements(oAddNewRowForm); 
```

至

```
var rowData = fnTakeRowDataFromFormElements(oAddNewRowForm);
var rtn;
.... //removed the if statement in between
rtn = oTable.fnAddData(rowData); 
```

在[https://github.com/moksamedia/jquery-datatables-editable/issues/114](https://github.com/moksamedia/jquery-datatables-editable/issues/114)进行了冗长的讨论，但是请注意“数据”变量包含从数据库返回的 id。有些答案错误地引用了该变量，请忽略这些。我主要使用了答案之一中的补丁。

# owl - 推理只是本体的好处

> ID：15428261
> 
> 赞同：0
> 
> 时间：2013-03-15T09:00:04.077
> 
> 标签：owl, ontology, reasoning

我是本体新手，我的要求是收集保险领域概念和它们之间的关系，我正在使用*Protege*来捕获领域概念。现在我有保险域的 OWL 文件。

现在，我想知道我能从中获得什么好处。我在网上搜索并知道推理是一种好处。

```
Can OWL file be used in web application?
How far Ontology has significance over data base? 
```

可能是我的问题错了吗？需要指导以更好地理解本体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:19:23.467

我们使用了 GATE（文本工程通用架构），一种用于解析 OWL 文件的文本分析工具。

在这里，我们为 Medical Domain 创建了 OWL 文件，并使用 OntoGazetteer、Onto Root Gazaetteer 插件在一组语料库上运行这些文件，并对文本进行注释。在这些之后，我们提取了这些信息，以进一步使用我们的结构化（数据库）和非结构化信息（文档）来链接并通过 Web 服务向公众提供服务。

请查看 - [http://gate.ac.uk/sale/tao/splitch14.html#chap:ontologies](http://gate.ac.uk/sale/tao/splitch14.html#chap:ontologies)以获得更好的理解。

# java - 是否可以使用 ADVAPI 从 AD 检索自定义属性

> ID：15428262
> 
> 赞同：2
> 
> 时间：2013-03-15T09:00:06.320
> 
> 标签：java, active-directory, kerberos, jna, ntlm

我正在使用 NTLM/Kerberos SSO `com.sun.jna.platform.win32.Sspi`，`com.sun.jna.platform.win32.Secur32`并`com.sun.jna.platform.win32.AdvapiUtils`实际针对 AD 对用户进行身份验证并检索其用户名。这对域用户和非域用户都适用。作为下一步，我想从 AD 中检索自定义用户属性，例如电子邮件。不幸的是，`com.sun.jna.platform.win32.Advapi32Util.Account`该类只有 fqn、sid 和 groups 属性。是否可以使用上面列出的本机接口来检索其他属性？

由于一些限制，我无法使用 LDAP，所以我正在寻找解决方法。

# c# - .NET 中的 XML 验证和命名空间

> ID：15428265
> 
> 赞同：6
> 
> 时间：2013-03-15T09:00:23.557
> 
> 标签：c#, xsd-validation

我想要做的是针对 XSD 验证 XML。这一切都非常简单，但是我遇到了没有命名空间的 XML 的问题。C# 仅在命名空间与 XSD 的目标命名空间匹配时才验证 xml。这似乎是正确的，但是没有命名空间的 XML 或与 SchemaSet 不同的 XML 应该给出异常。是否有实现此目的的属性或设置？还是我必须通过读取 xml 的 xmlns 属性来手动获取命名空间？

清除示例：

代码：

```
XmlReaderSettings settings = new XmlReaderSettings();
settings.Schemas.Add("http://example.com", @"test.xsd");
settings.Schemas.Add("http://example.com/v2", @"test2.xsd");
settings.ValidationType = ValidationType.Schema;

XmlReader r = XmlReader.Create(@"test.xml", settings);

XmlReader r = XmlReader.Create(new StringReader(xml), settings);
XmlDocument doc = new XmlDocument();
try
{
    doc.Load(r);
}
catch (XmlSchemaValidationException ex)
{

    Console.WriteLine(ex.Message);
} 
```

XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://example.com" targetNamespace="http://example.com" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="test">
        <xs:annotation>
            <xs:documentation>Comment describing your root element</xs:documentation>
        </xs:annotation>
        <xs:simpleType>
            <xs:restriction base="xs:string">
                <xs:pattern value="[0-9]+\.+[0-9]+" />
            </xs:restriction>
        </xs:simpleType>
    </xs:element>
</xs:schema> 
```

有效的 XML：

```
<test xmlns="http://example.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">112.1</test> 
```

无效的 XML，这将无法验证：

```
<hello xmlns="http://example.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">112.1</hello> 
```

错误：`The 'http://example.com:hello' element is not declared`。

无效的 XML，但会验证，因为命名空间不存在：

```
<hello xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">112.1</hello> 
```

我怎样才能解决这个问题？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:02:59.533

xml 中的无效命名空间没有触发`XmlSchemaValidationException`, 的原因是，它只是一个警告。

因此，我们必须更改代码，以便同时报告警告。

**第一**：设置`Validationflags`属性`XmlReaderSettings`

```
XmlReaderSettings settings = new XmlReaderSettings();
settings.ValidationFlags = XmlSchemaValidationFlags.ProcessIdentityConstraints | XmlSchemaValidationFlags.ReportValidationWarnings; 
```

PS：通过设置验证标志，确保你设置了所有需要的标志，否则一些验证检查将被跳过。我正在使用`ProcessIdentityConstraints`，所以我的身份约束（xs：key，xs：keyref，...）也得到了验证。更多信息请访问[http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemavalidationflags.aspx](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemavalidationflags.aspx)。

**Next**：告诉验证器在报告警告时该怎么做。创建一个Validator事件，当警告或错误发生时触发

```
private static void SchemaValidatorHandler(object sender, ValidationEventArgs e)
    {
        if (e.Severity == XmlSeverityType.Warning || e.Severity == XmlSeverityType.Error)
        {
            //Handle your exception
        }

    } 
```

**最后**：设置要用于验证的验证器事件处理程序

```
settings.ValidationEventHandler += new ValidationEventHandler(SchemaValidatorHandler); 
```

就是这样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:33:58.130

我可以找到`XmlDocument.Validate()`
[http://msdn.microsoft.com/en-us/library/ms162371.aspx的方法](http://msdn.microsoft.com/en-us/library/ms162371.aspx)

我相信如果 XmlDocument 中有错误并且命名空间不匹配它会抛出警告，它会抛出异常。您可以阅读有关 XmlValidation 和错误类型的更多信息。 [http://msdn.microsoft.com/en-us/library/aa310912%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa310912%28v=vs.71%29.aspx)

粘贴在 msdn 警告的部分摘录下方
*如果调用 ValidationEventHandler 并传递一个等于 XmlSeverityType.Warning 的 ValidationEventArgs.Severity，则继续处理文档。不会引发异常，并且继续处理模式文档。错误 如果调用 ValidationEventHandler 并传递一个等于 XmlSeverityType.Error 的 ValidationEventArgs.Severity，则继续处理文档并丢弃无效数据。抛出异常并且模式文档的处理停止。*
希望这可以帮助

# javascript - 当 JSON 为空时，jquery parseJSON() 返回错误

> ID：15428266
> 
> 赞同：4
> 
> 时间：2013-03-15T09:00:27.900
> 
> 标签：javascript, jquery, json

当返回的 JSON 对象不包含数据时，我遇到了 JSON AJAX 回调问题。我的代码如下：

```
$.ajax({
    type: "POST",
    url: "includes/get_menu_name.php",
    headers: {"cache-control": "no-cache"},
    data: data,
    success: function(html) {
        //alert(html);
        var app_data = "";
        if (html.MenuData != 0) {
            $.each( $.parseJSON(html).MenuData, function() {
                app_data += "<li data-short='"+this['dish_short']+"' data-desc='"+this['dish_desc']+"' data-dish_id='"+this['dish_id']+"'>"+this['dish_name']+"</li>";
            });
            $('.listbox').show();
            $('.nameslist').html(app_data);
            $('li').hover(function() {
                $(this).addClass('hover2');
            },function(){
                $(this).removeClass('hover2');
            });
            if (html == "") {
                $('.listbox').hide();
            }

            $('li').click(function() {
                //alert($('li', this).data('short'));
                $('.price').val("");
                var main_name = $(this, 'li').text();
                $('.main_name').val(main_name);
                //$('.price').val($(this).find('.ajaxid').text());
                if(main_name.length > 40) {
                    $('.short_name').val($(this).data('short'))
                } else {
                    $('.short_name').val(main_name);
                }
                if($(this).data('desc')!="") {
                    $('.dish_desc').val($(this).data('desc'));
                }
                var dish_id=$(this).data('dish_id');
                $('.main_name').data('dish_id', dish_id);
                $('.listbox').hide();
            });
        }
    }
});//end ajax 
```

错误返回为：

```
TypeError:$.parseJSON(...) is null 
```

我尝试了各种方法来检查回调中是否有数据，但似乎都没有。我对使用 JSON 非常陌生，并且想知道如果没有要返回的数据，是否应该通过 php 页面添加不同的回调，但是想知道是否有办法通过 javascript 执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:04:31.630

**$.ajax**与**post**将返回字符串格式的 HTML，你需要这样的东西！

```
success:function(html)
{
    if(html)
    {
        try
        {
            html = JSON.parse(html);
            if(html.MenuData)
            {
                // do something interesting
            }
            else
            {
                // failed
            }
        }
        catch(e)
        {
            // failed
        }
    }
    else
    {
        // failed because response is empty
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:39:00.533

在这里您可以指定 dataType 用作 json

```
 $.ajax({
    type: 'POST',
    url: ajaxURL,
     data:data,
    dataType: 'json',
    success: function(data){
        JSON.parse(data);
    } 
```

});

在服务器端脚本中，您必须使用 json_encode 函数对数据进行编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:12:15.247

通过 ajax 获取 json 时，需要注意以下几点（以防它也发现了您的问题）

1) Content-Type Json 解析将在`Content-type: application/json` html 获取（含义`Content-Type: text/html`或等效项）需要手动将 json 解析为字符串时流畅地工作。

2) Jquery 版本 这应该不是问题，因为它已经从版本：1.5 （你可能使用最新的版本，1.9）开始消退了这是一个指向 json 相关错误的链接：http: [//bugs.jquery.com/ticket /8108](http://bugs.jquery.com/ticket/8108)

对于 json 密集型编码，人们经常使用 jquery-json ( [http://code.google.com/p/jquery-json/](http://code.google.com/p/jquery-json/) )，它是简单 jquery 的包装器。您可能需要考虑修复是否不容易。

我希望它至少部分回答。谢谢..

# ios - RCSwitch 一键激活两次

> ID：15428270
> 
> 赞同：0
> 
> 时间：2013-03-15T09:00:47.343
> 
> 标签：ios, uiswitch

我需要实现自定义 UISwitch，为此我使用 RCSwitch 类（感谢 Ray Wenderlich 和 Robert Chin）。

所以我在我的项目中添加了 RCSwitch 类，连接图形，它看起来很棒，但是！它效果不佳。看一下这个：

这段代码：

```
//@interface
@property (nonatomic, strong) RCSwitchOnOff *onSwitch;

//implementation
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.onSwitch = [[RCSwitchOnOff alloc] initWithFrame:CGRectMake(self.view.frame.size.width/2 - 39.5, self.view.frame.size.height/2 - 150, 80, 35)];
    [self.onSwitch addTarget:self action:@selector(switchSwitched:) forControlEvents:UIControlEventTouchUpInside];

//    self.defaultSwitch = [[UISwitch alloc] initWithFrame:CGRectMake(self.view.frame.size.width/2 - 39.5, self.view.frame.size.height/2 - 150, 80, 35)];
//    [self.defaultSwitch addTarget:self action:@selector(switchSwitched:) forControlEvents:UIControlEventTouchUpInside];

.
.
.
}

- (void)switchSwitched:(id)sender
{
    NSLog(@"switch touched!");
} 
```

在 NSLog 中导致此问题

```
2013-03-15 09:56:54.575 Secret-Project[1190:c07] switch touched!
2013-03-15 09:56:54.576 Secret-Project[1190:c07] switch touched! 
```

对于**一个**用户触摸方法 switchSwitched 触发两次！当我取消默认开关并评论 onSwitch 时，正常的 UISwitch 仅启动 switchSwitched 方法一次。

有没有搞错？这里有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:06:29.580

我明白了，RCSwitch.m 有这个方法：

```
- (void)performSwitchToPercent:(float)toPercent
{
    endDate = [NSDate dateWithTimeIntervalSinceNow:fabsf(percent - toPercent) * animationDuration];
    percent = toPercent;
    [self setNeedsDisplay];
    [self sendActionsForControlEvents:UIControlEventValueChanged];
    [self sendActionsForControlEvents:UIControlEventTouchUpInside]; 
} 
```

最后一行 senda 动作，因为这种方法的 switch 被启动了两次。

# java - 为什么实例和静态内部类初始化不同？

> ID：15428274
> 
> 赞同：0
> 
> 时间：2013-03-15T09:01:13.587
> 
> 标签：java, class, static, stack, inner-classes

我们知道要创建实例内部类的对象，我们必须遵循这个语法

```
<OuterClassName>.<InnerClassName> innerObj = outerObj.new <InnerClassName>(arguments); 
```

对于静态类，语法是这样的

```
<OuterClassName>.<InnerClassName> innerObj = new <OuterClassName>.<InnerClassName>(arguments); 
```

但我无法理解`outerObj.new <InnerClassName>(arguments);`和`new <OuterClassName>.<InnerClassName>(arguments);`创建对象之间的区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:04:00.760

当内部类不是静态的时，您需要外部类的引用来引用它。因此，outerObj.new InnerClass()。而且您不需要外部类实例（对象）来引用静态内部类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:04:28.900

这是因为如果你有一个静态类，你一开始就不能实例化它，所以你没有这样的 outerObj，通过它你可以创建所需的内部类实例。

# air - 加载初始内容 Adob e air 时出现 ADL 错误

> ID：15428278
> 
> 赞同：6
> 
> 时间：2013-03-15T09:01:19.707
> 
> 标签：air

我是 Adob​​eAir 的新手。我通过以下链接开始使用 helloworld 应用程序。

```
http://help.adobe.com/en_US/air/build/WS144092a96ffef7cc4c0afd1212601c9a36f-8000.html 
```

我能够成功编译 HelloWorld.mxml 文件，但我无法按照命令 adl HelloWorld-app.xml 运行应用程序。错误消息显示.. 加载初始内容时出错。

我还附上了 HelloWorld-app.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://ns.adobe.com/air/application/1.0">
    <id>samples.flex.HelloWorld</id>
    <version>0.1</version>
    <filename>HelloWorld</filename>
    <initialWindow>
        <content>HelloWorld.swf</content>
        <visible>true</visible>
        <systemChrome>none</systemChrome>
        <transparent>true</transparent>
        <width>400</width>
        <height>200</height>
    </initialWindow>
</application> 
```

和 HelloWorld.mxml 是

```
<?xml version="1.0" encoding="utf-8"?> 
<s:WindowedApplication xmlns:fx="http://`enter code here`ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx" 
                       title="Hello World"> 

    <s:Label text="Hello AIR" horizontalCenter="0" verticalCenter="0"/> 
</s:WindowedApplication> 
```

请帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-30T17:11:11.610

中找到的 AIR 命名空间编号`xmlns`只是故事的一半。这定义了显示内容所需的最低运行时版本。故事的另一半是`-swf-version`编译的内容。

如果 SWF 是使用`-swf-version`AIR adl 无法处理的更新版本编译的，您将收到“加载初始内容时出错”消息。

我从[另一个答案](https://stackoverflow.com/a/10900792/1026023)中选择了这张表并添加了 AIR 版本信息（[来源](http://helpx.adobe.com/air/kb/archived-air-sdk-version.html)）：

```
 SWF Version  |  Flash Player Version  |  AIR Version
---------------+------------------------+---------------
        9      |        9.0.115.0       |      N/A
       10      |        10.0, 10.1      |      1.5, 2.0
       11      |        10.2            |      2.6
       12      |        10.3            |      2.7
       13      |        11.0            |      3
       14      |        11.1            |      3.1
       15      |        11.2            |      3.2
       16      |        11.3            |      3.3
       17      |        11.4            |      3.4
       18      |        11.5            |      3.5
       19      |        11.6            |      3.6
       20      |        11.7            |      3.7
       21      |        11.8            |      3.8
       22      |        11.9            |      3.9
       23      |        12              |      4
       24      |        13              |      13
       25      |        14              |      14
       26      |        15              |      15
       27      |        16              |      16
       28      |        17              |      17
       29      |        18              |      18
       30      |        19              |      19
       31      |        20              |      20
       32      |        21              |      21
       33      |        22              |      22
       34      |        23              |      23
       35      |        24              |      24
       36      |        25              |      25
       37      |        26              |      26
       38      |        27              |      27
       39      |        28              |      28
       40      |        29              |      29
       41      |        30              |      30
       42      |        31              |      31 
```

您可以使用Flex 和 AIR SDK 中包含`-swf-version`的实用程序来确定 SWF 文件的格式。`swfdump`

```
> swfdump example.swf | grep -i '<swf'
<swf xmlns='http://macromedia/2003/swfx' version='18' framerate='24' size='10000x7500' compressed='false' > 
```

上面的 SWF 是用 AIR 3.5 或更高版本编译的`-swf-version=18`，因此需要 AIR 3.5 或更高版本，并且`xmlns="http://ns.adobe.com/air/application/3.5"`

另请注意，较新的工具仍然可以针对较旧的`-swf-versions`. 因此，您可以构建与旧版 AIR 和 Flash 播放器兼容的 SWF。请注意检查您在文档中使用的 API。一些较新的 API（如[BitmapData.drawWithQuality ）在](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#drawWithQuality%28%29)**Runtime Versions**下列出了最低播放器版本要求。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-11T11:46:21.983

Thank you, your answer helped to solve my issue with **IntelliJ Idea** and the latest FLEX/AIR package. To solve that error I had to provide a modified application descriptor file for my module, since the automatically generated one had this setting:

```
<application xmlns="http://ns.adobe.com/air/application/2.0"> 
```

Here the steps needed to create a custom application descriptor file:

*File - Projext Structure - Modules - AIR Package - Custom template - Create*

Pick your minimal AIR version (actually for Flex 4.10 I think it is AIR 3.8) and your module will compile and run without problems.

See screenshot **[here](http://megazine3.de/tl_files/images/blogs/stackoverflow/AIR%20app%20descriptor.jpg)**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-21T13:37:24.950

根据[这篇博](http://blog.sunild.com/2008/12/error-while-loading-initial-content.html)文，您应该检查 HelloWorld-app.xml 中的命名空间行是否与您的 AIR 版本匹配。

例如，使用 Flex 4.6 发行版附带的 mxml/adl 工具，正确的命名空间行似乎是

```
<application xmlns="http://ns.adobe.com/air/application/3.1"> 
```

您的 mxmlc 或 amxmlc 编译器也必须不是来自比 adl 更新的 SDK。

例如，您不能在 AIR 2.6 的 adl 中运行使用 Flex 4.6 编译的 AIR 应用程序，您需要 Flex 4.5 工具来实现这一点。

# algorithm - 为什么 KNN 比决策树快得多？

> ID：15428282
> 
> 赞同：8
> 
> 时间：2013-03-15T09:01:25.917
> 
> 标签：algorithm, machine-learning, decision-tree, knn

有一次在面试中，遇到了雇主的一个问题。他问我为什么 KNN 分类器比决策树快得多，例如在字母识别或人脸识别中？

当时我完全不知道。所以我想知道我应该在哪些方面比较两种分类方法的速度性能？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T09:35:45.790

考虑以下数据集： N 个样本，每个样本有 k 个属性。一般来说：
1\. naive KNN: O(1) [training Time] + O(NK) [query Time] = O (NK)
2\. naive decision tree: O(N^2 * K * log(N)) [ training Time] + O(log(N)) [query Time] = O(N^2 * K) -- 同样对于查询时间，我们假设树是平衡的。
为了计算复杂性，我考虑了每个分类器的非常简单的实现。在实现 KNN 和决策树方面已经有了一些改进。

# c# - 使用覆盖调用基类方法 *WITHOUT*

> ID：15428285
> 
> 赞同：1
> 
> 时间：2013-03-15T09:01:35.120
> 
> 标签：c#, subclass

我试图弄清楚如何用 c# 做一些我特别注意到 Unity 引擎所做的事情。这似乎是某种形式的实现或子类化，但由于我没有我不知道的来源。

在 Unity 中，所有脚本都是这样的：

```
class someclass : MonoBehavior
{
} 
```

现在有一个函数列表，您可以通过这个 MonoBehavior 在您的类中调用引擎来使用该引擎，例如

```
void OnGUI()
{
  so something here
} 
```

因此，如果您说 5 个脚本都包含 OnGUI 函数，它将在所有 5 个脚本中调用

我想自己实现这种类型的东西，但我无法弄清楚。

您如何编写基类或实现或在子类中调用预定义函数但不需要函数的子类*并且*不必在其中使用覆盖的任何东西？

这是来自统一引擎的示例源文件：

```
public class EnemyAttack : MonoBehaviour {
    // Use this for initialization
    void Start () {
        AttackTimer = 0;
        CoolDown = 2.0f;
     }
     // Update is called once per frame
     void Update () {
         if (AttackTimer > 0) AttackTimer -= Time.deltaTime;
         if (AttackTimer < 0) AttackTimer = 0;

         if (AttackTimer == 0){
             Attack();
             AttackTimer = CoolDown;
          }
    }
} 
```

该代码运行良好，然后引擎调用在第一次启动时开始（单次调用）并调用更新*每一*帧通知绝对没有覆盖在任何地方的代码中

它似乎是某种事件系统，但我在谷歌上找不到任何描述如何做到这一点的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:04:35.693

如果您不想/可以使用`override`关键字，您可以使用反射来做到这一点（可能使用`dynamic`关键字）

基类“简单地”在派生类中搜索特定的签名/属性并调用方法。

如果您自己编写此代码，请考虑缓存反射的结果（或使用`dynamic`可能为您进行缓存的关键字）并测试您是否仍然获得所需的性能。反射可能非常缓慢。也请参阅这个问题：[Dynamic Lang。运行时与反射](https://stackoverflow.com/questions/4646786/dynamic-lang-runtime-vs-reflection)

例子：

```
class TheBehavior
{
    public void Act()
    {
        dynamic derived = this;
        try
        {
            derived.Foo(42);
            derived.Foob(43);
        }
        catch (RuntimeBinderException e)
        {
            Console.WriteLine("Method call failed: " + e.Message);
        }
    }
}

class TheDerived : TheBehavior
{
    public void Foo(int bar)
    {
        Console.WriteLine("Bar: " + bar);
    }
}

class Program
{
    static void Main(string[] args)
    {
        TheBehavior behavior = new TheDerived();
        behavior.Act();
        Console.ReadKey(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:23:27.210

由于它不使用虚拟方法，因此最有可能的方法是使用反射。该类`MonoBehavior`将反映其子类并搜索名称与正确模式匹配的方法：

```
public class MonoBehavior
{
    private void InitSubclass()
    {
        var methods = new[] { "OnGUI", "OnLoad" }; //etc
        foreach (string methodName in methods)
        {
            MethodInfo method = this.GetType().GetMethod(methodName, BindingFlags.Instance | BindingFlags.NonPublic, null, Type.EmptyTypes, null);
            if (method != null)
            {
                method.Invoke(this, new object[0]);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:05:24.770

> 您如何编写基类或实现或在子类中调用预定义函数但不需要函数的子类并且不必在其中使用覆盖的任何东西？

据我了解，这些只是[`virtual`](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.80%29.aspx)方法。基类可能会定义一些基本实现，但不需要派生类来覆盖这些方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T09:08:15.707

如果我得到你所说的，我认为你正在寻找的是一个具有继承的基类：

```
public class BaseClass // or abstract
{
    public void foo(int x)
    {
        //your implementation
    }
}

public class ChildClass : BaseClass
{
    public void foo(int x) : base(x)
    {
        //your implementation
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T09:08:32.503

使用`virtual`和`override`。

```
class Program
{
    static void Main(string[] args)
    {
        MyBaseClass ext1 = new Ext1();
        ext1.DoSomething();

        MyBaseClass ext2 = new Ext2();
        ext2.DoSomething();

        Console.ReadKey(true);
    }
}

class MyBaseClass
{
    public void DoSomething()
    {
        DoSomethingBase();
    }

    protected virtual void DoSomethingBase()
    {
        Console.WriteLine("DoSomethingBase");
    }
}

class Ext1 : MyBaseClass
{

}

class Ext2 : MyBaseClass
{
    protected override void DoSomethingBase()
    {
        Console.WriteLine("Overridden DoSomethingBase");
    }
} 
```

该类`Ext1`不会覆盖基类的行为，因此`DoSomethingBase()`使用基类。`Ext2`确实覆盖了基本方法，所以被覆盖的方法被调用。此代码打印：

> ```
> DoSomethingBase
> Overridden DoSomethingBase 
> ```

该类`MyBaseClass`也可以标记为`abstract`防止基类本身的实例化。

# c# - 如何以编程方式获取 Google Drive API 访问的授权码？

> ID：15428286
> 
> 赞同：0
> 
> 时间：2013-03-15T09:01:40.917
> 
> 标签：c#, oauth-2.0, google-drive-api, google-api-dotnet-client

我需要从 Google 驱动器下载文件。我在[这里](https://developers.google.com/drive/quickstart-cs)得到了执行此操作的代码。在这段代码中，他们启动了一个带有 URL 的 Web 浏览器进程，该 URL 要求用户授权 API 访问。授权后，它提供授权密钥，需要键入我们的进程才能真正继续（这是典型的 oath-2.0 程序）。我想让整个过程自动化而无需任何用户交互。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:48:24.140

您可以使用[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)在没有用户交互的情况下获取 API 访问权限，但是目前似乎没有官方的 .NET 实现。

有人在[这里](https://groups.google.com/d/msg/google-search-api-for-shopping/4uUGirzH4Rw/__c0e4hj0ekJ)创建了一个示例，介绍如何在 C# 中将服务帐户与 Google Analytics 一起使用。

# android - setOnFocusChangeListener - 在每个字符之后触发

> ID：15428295
> 
> 赞同：5
> 
> 时间：2013-03-15T09:02:15.190
> 
> 标签：android, listview, android-edittext, baseadapter

我有以下自定义基本适配器。我有一个列表视图，每个项目都有一个编辑文本。我想在用户离开编辑文本后立即保存该数据，但现在发生的是每次用户输入 1 个字符时，setOnFocusChangeListener 就会触发。我真的不知道为什么会这样。

我的自定义基础适配器类

```
public class ChecklistBaseAdapter extends BaseAdapter {
private static ArrayList<Checklist> searchArrayList;
Context currentcontext;
DatabaseHandler db;
private LayoutInflater mInflater;

public ChecklistBaseAdapter(Context context, ArrayList<Checklist> results) {

    searchArrayList = results;
    mInflater = LayoutInflater.from(context);
    currentcontext = context;
    db = new DatabaseHandler(currentcontext);
}

public int getCount() {

    return searchArrayList.size();
}

public void remove(int position) {

    searchArrayList.remove(position);
    notifyDataSetChanged();
}

public void removeAll() {

    searchArrayList.clear();
    notifyDataSetChanged();
}

public void add(Checklist checklist) {
    searchArrayList.add(checklist);

    notifyDataSetChanged();
}

public void notifyChange() {
    notifyDataSetChanged();
}

public Object getItem(int position) {

    return searchArrayList.get(position);

}

public long getItemId(int position) {

    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    final ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.checklistitem, null);
        holder = new ViewHolder();

        holder.cbStatus = (CheckBox) convertView
                .findViewById(R.id.checkbox);
        holder.etName = (EditText) convertView.findViewById(R.id.editname);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    Checklist checklist = (Checklist) getItem(position);

    holder.etName.setText(checklist.getName());

    holder.etName.setId(position);
    if (searchArrayList.get(position).getStatus().equals("F")) {
        holder.cbStatus.setChecked(false);
    } else {
        holder.cbStatus.setChecked(true);
    }

    holder.etName.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId,
                KeyEvent event) {

            if (actionId == EditorInfo.IME_ACTION_DONE) {
                int myint = v.getId();
                searchArrayList.get(myint)._name = v.getText().toString();
                return true;

            }
            return false;
        }
    });
    holder.etName
            .setOnFocusChangeListener(new OnFocusChangeListener() {
                @Override
                public void onFocusChange(View v, boolean hasFocus) {
                    String input;
                    EditText editText;

                    if (!hasFocus) {
                        Log.e("test", "test123");
                        int myint = v.getId();
                        editText = (EditText) v;
                        input = editText.getText().toString();
                        searchArrayList.get(myint)._name = input;

                    }
                }
            });

    holder.cbStatus
            .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    String name = holder.etName.getText().toString().trim();
                    if (isChecked) {
                        for (int x = 0; x < searchArrayList.size(); x++) {
                            Checklist checklist = new Checklist();
                            checklist = searchArrayList.get(x);
                            if (name.equals(checklist.getName())) {
                                checklist.setStatus("T");
                                db.updateCheckList(checklist);
                                searchArrayList.set(x, checklist);
                            }
                        }
                    } else {
                        for (int x = 0; x < searchArrayList.size(); x++) {
                            Checklist checklist = new Checklist();
                            checklist = searchArrayList.get(x);
                            if (name.equals(checklist.getName())) {
                                checklist.setStatus("F");
                                searchArrayList.set(x, checklist);
                                db.updateCheckList(checklist);
                            }
                        }
                    }
                }
            });

    return convertView;
}

static class ViewHolder {

    CheckBox cbStatus;
    EditText etName;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T06:27:41.463

尝试使用 addTextChangedListener() 方法

```
holder.etName.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start,
                    int before, int count) {

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start,
                    int count, int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                  String input;
                EditText editText;

                    Log.e("test", "test123");
                    int myint = v.getId();
                    editText = (EditText)v;
                    input = editText.getText().toString();
                    searchArrayList.get(myint)._name = input;

        }); 
```

希望它会帮助你。

# symfony - Symfony2 将任何 HTML 控制器输出为 JSON

> ID：15428296
> 
> 赞同：7
> 
> 时间：2013-03-15T09:02:17.640
> 
> 标签：symfony

我已经完成了一个在 Symfony2 中创建的网站，我现在希望该网站的许多功能现在可以在移动应用程序中使用。
我的想法是通过附加一个简单的 URL 变量，然后它将以 JSON 格式输出相关页面请求的所有变量。

所以如果我连接到

```
www.domain.com/profile/john-smith 
```

它像现在一样返回 HTML 页面。
但如果我去

```
www.domain.com/profile/john-smith?app 
```

然后它返回一个包含姓名、年龄和其他个人资料信息的 JSON 对象。
然后我的应用程序代码接收 JSON 和进程。

我看不到任何安全问题，因为它只是 JSON 中呈现的变量，没有 HTML。

通过执行上述操作，我可以创建所有应用程序代码并简单地调用与网页相同的 URL，这将返回 JSON 中的变量并省去更多服务器端工作的需要。

问题是：**如果不修改每个控制器，我将如何做到这一点？**

我无法想象事件监听器会这样做吗？也许我可以拦截 Response 对象并去掉所有的 HTML？

关于执行此操作的最佳实践方法的任何想法？它应该很容易编码，但我正在努力了解它的设计。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:06:03.290

有一种正确的方法可以为此任务配置路由

```
 article_show:
  path:     /articles/{culture}/{year}/{title}.{_format}
  defaults: { _controller: AcmeDemoBundle:Article:show, _format: html }
  requirements:
      culture:  en|fr
      _format:  html|rss
      year:     \d+ 
```

但是，这仍然需要您使用其他控制结构来编辑每个 Controller 以处理该输出。

要解决这个问题，你可以做两件事。

1.  为您拥有的每个模板创建 json 模板，然后将 html 替换`template.html.twig`为`template.'.$format.'.twig`. （注意确保用户不能在 url 中未经验证的情况下传递参数，这将是一个重大的安全风险）。

2.  创建您自己的抽象控制器类并覆盖渲染方法以检查请求的格式并基于该格式提供输出。

    ```
    class MyAbstractController extends Symfony\Bundle\FrameworkBundle\Controller\Controller
    {
        public function render($view, array $parameters = array(), Response $response = null)
        {
            if($this->getRequest()->getRequestFormat() == 'json')
            {
                return new Response(json_encode($parameters));
            }
            else
            {
               parent::render($view, $parameters, $response);
            }
        }
    } 
    ```

**注意**上面的代码是一个原型，不要期望它开箱即用。

我个人认为第二种方法更正确，因为没有重复代码，安全问题也更少。

# photoshop - jpeg 在 Photoshop 中打开文件大小的 10 倍

> ID：15428298
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:02:20.467
> 
> 标签：photoshop

最近，当我在 Photoshop 中打开文件进行压缩时，文件显示文件大小比文件属性中显示的实际大小大得多。所以压缩后它比开始时要大！

例如，我有 88kb jpeg，在 Photoshop 中打开为 1.17 MB。Save for web 将大小增加到 105kb！

是否有导致这种情况的设置等？如何让 Photoshop 打开文件以反映文件属性中给定的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:15:31.753

您确定 1.17Mb 信息不是未压缩的数据大小（jpeg 是什么尺寸）？对于 105Kb 输出，您可以调整设置（压缩级别、渐进式等）。您可能还想去除 IPTC 和 XMP 数据（如果有）

编辑分辨率：分辨率信息（每像素的 DPI 点数或任何其他单位）是打印尺寸的指示。它只说明制作一英寸可打印的图像需要多少像素。它只是存储在图像标题中的信息（实际上是水平和垂直分辨率2）。对分辨率的误解是由于 PS 使用此信息进行调整大小操作造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:08:29.427

想要这样做吗？无论如何，图像都是一样的。检查像素、宽度和高度是否与原始像素相同。

# php - 使用 curl php 下载网页源代码

> ID：15428310
> 
> 赞同：2
> 
> 时间：2013-03-15T09:02:56.567
> 
> 标签：php, curl

我正在尝试使用 curl php 代码下载网页的源代码，但它仅下载几页的其余页面文件是空的。我用谷歌搜索了它，但我没有得到解决方案。

我的源代码是：-

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $strurl);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch,CURLOPT_USERAGENT, 'CURL via PHP');
$out = curl_exec($ch);
$fp = fopen('f1.html', 'w');
fwrite($fp, $out);
fclose($fp);
curl_close($ch); 
```

要添加哪些选项？我哪里错了？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:24:03.120

尝试设置一个表明您是浏览器的用户代理。一些服务器会阻止 curl/wget/etc。

例如：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22

# c++ - 图形硬件上的最近邻搜索

> ID：15428312
> 
> 赞同：3
> 
> 时间：2013-03-15T09:03:00.197
> 
> 标签：c++, algorithm, opengl, directx

给定二维空间中的大量点（float64）...

有没有办法使用 OpenGL 或 DirectX 的功能来确定最近的邻居？

我已经实现了一个 kd-tree，它仍然不够快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:28:12.467

kd-tree***应该***可以正常工作。但这里有一些提示。

我为一百万点数据集实现了一次 kd-tree。这是我从中学到的：

您是否尝试分析您的代码？您可能会发现可以进行一些简单的优化，例如需要强制内联的常用辅助函数。

您是否真的测试过您的代码以验证它是否正在剔除易于识别为“太远”的分区的树枝。如果您不小心，您很容易遇到一个错误，该错误会在太远的点上进行不必要的距离计算。

最简单的事情：在比较点之间的线性距离时，您不需要采用 (x2-x1)*(y2-y1) 的 SQRT。

在我的代码中花费的大部分时间只是从原始数据集构建树，包括每次迭代中的多个完整排序，以决定哪个轴是最好的分区。一个更简单的算法是在每个树分支的 x 轴和 y 轴上的分区之间交替，并缓存每个轴的排序顺序。它可能无法构建最优化的搜索树，但总体节省可能是巨大的。

# javascript - ipad 表单上的 safari 获取方法给白页

> ID：15428316
> 
> 赞同：0
> 
> 时间：2013-03-15T09:03:09.733
> 
> 标签：javascript, iphone

我是新成员，对 Web 开发不是很熟悉。目的是在支持 JavaScript、JQuery 和 Ajax 的工业机器上制作用户界面。使用 FORM GET 方法，我可以设置参数并在机器上启动程序。机器返回代码 204 这在使用 IE8 和 IMAC safari 6.0.5 的 PC 访问网页时效果很好。当我从 IPHONE 或 IPAD 访问网站时，会发送参数，但会打开一个空白的白色网站。问题：这可以在代码中解决还是 safari 中的设置？这是网页上表格的一个例子

```
 <form action="../karel/reset_fault" method="GET" id="FORM2"name="web_demo1">
    <input type="hidden" size="45" name="SUBMIT" value="DONE">
    <input type="submit" name="B1" value="RESET-FAULT" style="width: 180px; height: 24px;">
    </form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:12:54.647

204 无内容

服务器已完成请求，但不需要返回实体主体，并且可能希望返回更新的元信息。响应可能包括实体头形式的新的或更新的元信息，如果存在，应该与请求的变体相关联。

如果客户端是用户代理，它不应该改变导致请求被发送的文档视图。这个响应主要是为了允许输入动作发生而不导致用户代理的活动文档视图发生变化，尽管任何新的或更新的元信息应该应用于当前在用户代理的活动视图中的文档。

204 响应不能包含消息体，因此总是由头字段之后的第一个空行终止。

# doxygen - Doxygen 与 Graphviz 记录 VHDL

> ID：15428321
> 
> 赞同：2
> 
> 时间：2013-03-15T09:03:45.693
> 
> 标签：doxygen, vhdl, graphviz

我没有设法将 graphviz (@dot) 添加到我的 doxygen 记录的 VHDL 文件中。有人可以提供一些示例代码吗？

我想在我的代码中添加 fsm 图形表示。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:21:59.947

只需手动编写点文件：

```
digraph FSM {
    RESET -> IDLE
    IDLE  -> CALC [label="data_in = '1'"]
    CALC  -> DONE
    DONE  -> IDLE
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-26T16:44:12.617

1.  用`--!`;评论
2.  开始`@dot`和停止`@enddot`

例子：

```
--! @dot
--! digraph finite_state_machine {
--!     rankdir=LR;
--!     size="8,5"
--!     node [shape = circle];
--!     S0 -> S1 [ label = "010" ] 
--!     S1 -> S0 [ label = "000" ]
--!     S1 -> S2 [ label = "111" ]
--!     S2 -> S0 [ label = "101" ]
--! }
--! @enddot 
```

# java - 当鼠标悬停在 Java / Windows 中的 JMenu 对象上时听到文本（屏幕阅读器）

> ID：15428323
> 
> 赞同：4
> 
> 时间：2013-03-15T09:03:50.500
> 
> 标签：java, swing, accessibility

使用屏幕阅读器（如 NVDA）时，我希望将鼠标悬停在菜单上时能够听到菜单的文本。当我按下菜单栏中的按钮时，我能够听到文本，但当我将鼠标悬停在它们上方时则无法听到（屏幕阅读器仅在将鼠标悬停在按钮上时才会读取其他程序的菜单）。

我已将 AccessibleContext 设置如下：

```
JMenu.getAccessibleContext().setAccessibleName("text");
JMenu.getAccessibleContext().setAccessibleDescription("more text"); 
```

我可以设置`listeners`检测鼠标何时悬停在它们上方的对象，但我不知道是否/如何将文本投射到屏幕阅读器以进行阅读。我试过`ToolTipText`了，但屏幕阅读器也不会读取该文本。`RequestFocus`在 JMenu 上有效，但是仅通过将鼠标悬停在对象上来将焦点设置为对象会带来其他问题。

有谁知道当鼠标悬停在菜单栏上时如何让屏幕阅读器读取 JMenu 文本？

我在 Windows 机器（XP 和 w7）上使用 Java6 EE 和 Java AccesBridge（2.02 版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:37:18.870

无论如何，与 SWT 相比，Swing 是 Java 中与可访问性相关的 GUI 技术中较弱的一个。您可以尝试几件事。

首先是确保设置了任何可访问性字段（您已经开始）。我不记得 Java 是否有 AccessibleRole 字段，但您可以尝试将其设置为菜单项的 menu 和 menuitem。

您可以尝试的另一件事是 AccessibleMenu JMenu.AccessibleJMenu 组件。这是进一步阅读的产物，所以我无法从经验中验证它。但它及其周边类可能适合您的需求。

如果这些不起作用，您可以尝试直接与人们的屏幕阅读器交谈。Quentin C 有一个很好的库来做到这一点，[Universal Speech](http://vrac.quentinc.net/UniversalSpeech.zip)。我自己是这个库的新手，但它确实有一个 Java 实现，应该向您展示如何在 Java 程序中使用它。通常我不会推荐这种方法，除非使 UI 可访问真的不起作用。

最后一个选项是使用 SWT 组件而不是 Swing 组件，即使只是用于您的菜单栏。我不确定您对此有多热衷，但这是一种选择，应该解决它。

我希望这些建议之一可以帮助您解决问题。

# java - 如何在 Python 中处理二进制文件

> ID：15428327
> 
> 赞同：0
> 
> 时间：2013-03-15T09:03:57.077
> 
> 标签：java, python, file, file-io

我们有*DataInputStream*用于处理 Java 中的二进制文件；我们可以在 Python 中为这些文件使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:23:24.123

我经常使用[Construct](http://construct.readthedocs.org/en/latest/)包来读取和解析 Python 中的结构数据。

基本上，它允许您以非常惯用和 Python 的方式声明文件的结构，而不是为您解析或编码它。

解析后，您有一个允许通过属性访问所有文件信息的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:07:14.957

`open("file", "b")`打开文件，您可以阅读它。见[这里](http://docs.python.org/2/library/functions.html#open)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:10:26.730

几年前，我使用 struct 模块来解析来自多个游戏服务器的二进制响应[http://docs.python.org/2/library/struct.html#struct.unpack](http://docs.python.org/2/library/struct.html#struct.unpack)

有时它仅对`.find()`数据中的某些字节有用，例如`.find('\x00')`转到以 NULL 结尾的字符串的末尾。

# jsf-2 - RequestContext 从与 FacesContext 不同的上下文中抛出 NPE

> ID：15428342
> 
> 赞同：0
> 
> 时间：2013-03-15T09:04:32.443
> 
> 标签：jsf-2, primefaces

`RequestContext rq = RequestContext.getCurrentInstance()`为什么从不同的上下文调用而不是`FacesContext`抛出一个`NullPointerException`？

我无法执行以下操作：

```
RequestContext rq = RequestContext.getCurrentInstance() //NPE is thrown
if (rq != null) {
..
} 
```

我想做的是在 a 中检索一个 bean`WebFilter`并调用一个方法。此方法使用上述代码段；所以它抛出`NullPointerException`。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:10:44.230

Instance of`RequestContext`被保存为 中的一个属性`FacesContext`，所以当没有的时候`FacesContext`你会有 NPE。这是告诉您如何`RequestContext`获得的代码，并且将被清除：

```
return (RequestContext) FacesContext.getCurrentInstance().getAttributes().get(Constants.REQUEST_CONTEXT_ATTR); 
```

***在恢复视图阶段***之后，在 Primefaces中创建`RequestContext`并将其保存为`FacesContext`属性，因此它在您的过滤器中不存在。`PhaseListener`

# jquery - 在 Oracle ADF 中实现拖动排序

> ID：15428345
> 
> 赞同：0
> 
> 时间：2013-03-15T09:05:16.247
> 
> 标签：jquery, oracle-adf

我想在 Oracle ADF中实现拖动排序（例如：http: [//jqueryui.com/sortable/#display-grid ）。](http://jqueryui.com/sortable/#display-grid)

我在 ADF 中尝试过的以下代码：

```
<af:panelList rows="6" maxColumns="3" id="sortable1"
                      listStyle="list-style-type:none" >
         <af:forEach varStatus="vs" begin="1" end="17">
          <af:panelList rows="6" maxColumns="3" styleClass="thumbnail" id="test"
                          listStyle="list-style-type:none">
         <af:panelGroupLayout layout="vertical"
                                               styleClass="thumbnail" id="pgl4">
           <af:outputText id="ot2" value="#{vs.index} #{vs.count} #{vs.begin}"/> 
           </af:panelGroupLayout>
            </af:panelList>
          </af:forEach>
</af:panelList> 
```

以下是用于排序的 jquery：

```
<af:resource type="javascript" source="/js/jquery-1.9.1.js"/>
        <af:resource type="javascript" source="/js/jquery-ui.js"/>
        <trh:script id="sx4">
           $(function () {
              $("#sortable1").sortable();
              $("#sortable1").disableSelection();
          });
        </trh:script> 
```

但我无法进行拖动排序。如何实现拖动排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:12:10.053

我强烈建议不要在使用 ADF 时使用 jQuery 来调整 DOM。ADF 对 DOM 做了一些奇怪的事情，而 jQuery 对 DOM 做了同样奇怪但不兼容的事情。将它们结合起来是问题的根源。

您可能想要查看的是使用 ADF 的拖放源/目标接口。这些可能会帮助你，但我强烈怀疑这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:21:53.820

我使用 Panel Dash Board 来实现拖动排序的要求。

我使用的代码如下：

```
<af:panelDashboard id="pd1">
                          <af:forEach begin="1" end="5" step="1" varStatus="vs"
                                      var="v">
                            <af:panelBox text="#{vs.index}">
                              <af:componentDragSource/>
                              <af:panelGroupLayout layout="vertical"
                                                   styleClass="thumbnail"
                                                   id="pgl10">
                                <af:outputText id="ot8"
                                               value="#{vs.index} #{vs.count} #{vs.begin}"/>
                              </af:panelGroupLayout>
                            </af:panelBox>
                          </af:forEach>
                        </af:panelDashboard> 
```

The component will do the drag sort of the items (panel box). No java script file is required. It will simply do the same thing as drag sort (eg: [http://jqueryui.com/sortable/#display-grid](http://jqueryui.com/sortable/#display-grid)) in jQuery.

# winrun4j - 如何使用 libs (WinRun4J) 填充用于为 Java 应用程序创建 exe 的 ini 文件

> ID：15428347
> 
> 赞同：0
> 
> 时间：2013-03-15T09:05:24.803
> 
> 标签：winrun4j

“MyApp”文件夹现在具有以下结构：

```
- MyApp     
  - lib
    - MyLib.jar
  - MyApp.jar 
```

MyApp.jar 有一个清单`Class-Path: lib/MyLib.jar`

我想将 MyApp.exe 文件添加到“MyApp”文件夹。因此，我将通过 WinRun4J 创建 exe 所需的所有文件放到“MyApp”文件夹中。[然后我按照这里](https://stackoverflow.com/a/15409917/925021)的描述运行 bat 文件。这给了我一个带有正确图标的 exe 文件，但是当我运行它时我看到的只是一个闪屏。我哪里错了？我的ini文件内容：

```
main.class=my.main.class
classpath.1=lib/MyLib.jar
splash.image=SplashScreen.gif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:06:29.523

您还必须包括您的主罐子：

```
main.class=my.main.class
classpath.1=MyApp.jar
classpath.2=lib/MyLib.jar
splash.image=SplashScreen.gif 
```

或简单地包括所有罐子：

```
main.class=my.main.class
classpath.1=*.jar
classpath.2=lib/*.jar
splash.image=SplashScreen.gif 
```

# c# - 为什么我们在 GridViews 中使用 Bound 字段

> ID：15428357
> 
> 赞同：1
> 
> 时间：2013-03-15T09:05:52.627
> 
> 标签：c#, webforms, .net-2.0

我很震惊以前没有人问过这个问题，因为当我搜索时，我找不到任何相关的东西，

[https://stackoverflow.com/search?q=what+is+a+bound+field+c%23](https://stackoverflow.com/search?q=what+is+a+bound+field+c%23)

无论如何，我的问题是，

有人可以用简单的语言解释什么是绑定字段，以及我们何时使用它。

**我做过的研究**

我们在 GridView 或 DataView 中使用它，但为什么我们不能使用默认选项来显示数据然后使用绑定字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:19:26.990

好吧，[数据绑定](http://en.wikipedia.org/wiki/Data_binding)通常是声明性说明某些用户界面元素的值将来自某个源，并由运行时填充而不是开发人员手动设置和从代码隐藏文件中的控件获取值的原则。

因此，例如，在 WPF 中，您可以将整个窗口的 DataContext 属性设置为一个对象，然后为该窗口上的每个控件说明 WPF 运行时应该从该对象的哪些属性中获取它们的值。

例如，对于具有 Forename 和 Surname 属性的 Employee 视图模型，您可以创建一个带有两个文本框的 EmployeeView 窗口，其中一个“绑定”到 Forename 属性，另一个“绑定”到 Surname 属性。在运行时，框架将查看每个控件上的绑定，自动从数据中获取值并填充控件的值字段。同样，当控件中的值被用户修改时，数据绑定可以将新值推送到它所绑定的数据模型中。

这与 VB6 时代的典型方法形成对比，其中设置这些文本框的内容将在表单的代码隐藏中完成（例如`forenameTextBox.Text = employee.Forename`）。VB6（和 WinForms，就此而言）中的数据绑定是不同的，其中框架执行我上面描述的操作，但在此过程中自动从数据库中获取数据。不过，这在近年来已经失宠（并且有充分的理由）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:08:37.220

> 数据绑定控件（例如 GridView 和 DetailsView）使用 BoundField 类将字段的值显示为文本。BoundField 对象的显示方式不同，具体取决于使用它的数据绑定控件。例如，GridView 控件将 BoundField 对象显示为列，而 DetailsView 控件将其显示为行。

有关更多信息，请访问 MSDN 帮助[绑定字段说明](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.aspx)

# php - 使用 php 脚本更新 SVN

> ID：15428359
> 
> 赞同：0
> 
> 时间：2013-03-15T09:05:53.407
> 
> 标签：php, linux, svn, shell

我一直在徘徊，但没有运气 - 我有一个 PHP 脚本，其中包含：

```
echo shell_exec('2>&1 svn update /var/www/html/myProject/'); 
```

当我从命令行使用 php 运行时，它工作正常：

```
/usr/bin/php update.php 
```

当我尝试使用 wget 更新它时：

```
wget -qO- http://www.DOMAIN.com/update.php 
```

我收到认证错误和 svn 消息。我很确定这与 Linux 用户权限有关，但找不到什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:58:42.207

你如何从控制台运行，然后运行 ​​svn 用户登录，如果你运行浏览器，用户来自 web 服务器，检查用户是否可以访问 svn comman 和目录。

如果这不起作用，并且您有 Linux，请执行以下操作：

```
sudo su - 
```

或者

```
su -
su [user_of_www_server] -
/usr/bin/php update.php 
```

然后看看会发生什么。

另外，尝试指定 svn 命令的完整路径，web 服务器用户无法访问相应的环境变量。

# asp.net - 使用 ASPXAUTH cookie 和 asp.net_sessionID cookie 控制用户会话

> ID：15428362
> 
> 赞同：3
> 
> 时间：2013-03-15T09:06:07.233
> 
> 标签：asp.net, sitecore, sitecore6

如果我将 ASPXAUTH cookie 设置为会话 cookie，超时 10 分钟，但没有 asp.net_sessionID cookie，用户是否会在 a) 登录后十分钟内超时 b) 从他们最后一次请求到服务器的十分钟内

如果我还发送一个 asp.net_sessionID cookie，这种行为会改变吗？

这是针对基于 Sitecore 后端构建的 JSON 服务，为原生 iPad 应用程序提供内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:39:32.873

aspxauth cookie 超时是从收到最后一个请求的时间开始的。

**超时**

> 指定 cookie 过期的时间（以整数分钟为单位）。如果 SlidingExpiration 属性为 true，则 timeout 属性是一个滑动值，在收到最后一个请求后的指定分钟数到期。

有关详细信息，请参阅 msdn[链接](http://msdn.microsoft.com/en-gb/library/1d3t3c61%28v=vs.100%29.aspx)

ASP.NET_SessionId cookie 用于跟踪会话状态，它与用于身份验证的 ASPXAUTH cookie 无关。

# java - 在 hadoop 结果中显示聚合键和值

> ID：15428365
> 
> 赞同：2
> 
> 时间：2013-03-15T09:06:30.243
> 
> 标签：java, linux, hadoop, mapreduce

我对 Hadoop 很陌生。我编写了一个 MapReduce 程序，它解析输入文件并提取特定模式作为键及其值。我可以轻松地减少它，最终输出是一个包含一对键和值的文件。

```
public class EReducer extends MapReduceBase implements Reducer<Text, Text, Text, Text>     
{

    private Text outputKey1 = new Text();
    private Text outputValue1 = new Text();

    public void reduce(Text equipKey1, Iterator<Text> equipValues1,
                    OutputCollector<Text, Text> results1, Reporter reporter1) throws IOException {
            String output1 = "";
  while(equipValues1.hasNext())
            {
                    Text equi= equipValues1.next();
                    output1 = output1 + equi.toString();
            }

                    outputKey1.set(equipKey1.toString());
                    outputValue1.set(output1);
                    results1.collect(outputKey1, outputValue1);
} 
```

问题是，在文件的开头，我需要将特定键的键总数和值的总数显示为聚合。

键：日期

价值：发生的事情。

就像是

```
12/03/2013 CMB ate pizza
           He went to a mall
           He met his friend 
```

在 2013 年 12 月 3 日这一天总共发生了 3 件事情。就像会有一组日期和事件。

最后我应该显示，在“日期”日期有“这个数量的行动”。在 2013 年 3 月 12 日等日期有 3 项行动......

我怎样才能做到这一点？任何帮助，将不胜感激。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T02:31:31.690

不确定这是否是直接答案，但我不会将聚合与输出一起存储。考虑 Pig 来获取聚合。它非常适合这个用例。

另外，我不明白“文件开头”的问题。一个 reducer 任务可能有多个键 - 值可以使用，因此您的文件“part-r-00000”会喜欢

```
12/01/2012 something something1 something2 
12/02/2012 abc abc1 abc2 
```

但是我倾向于只存储从reducer发出的数据而不聚合它并使用pig运行它们以获得你需要的计数（你必须实现你的udf来解析你的事件，这很简单）

只是一个可能的片段

```
a = LOAD '/path/to/mroutput' as (dt:chararray, evdata:chararray);
b = foreach a generate dt, com.something.EVParser(evdata) as numberofevents;
c = store b into '/path/to/aggregateddata'; 
```

# entity-framework - 在 EF 5 中更新父实体时添加/更新所有子实体

> ID：15428366
> 
> 赞同：0
> 
> 时间：2013-03-15T09:06:44.153
> 
> 标签：entity-framework

我有一个实体`Supplier`，它有 N 级子实体，如`SupplierUser`, `Companyinformation`, `contactdetail`。

当我第一次添加父`Supplier`实体时，它会正确插入，但是当我更新子实体中的值并从父实体调用更新时，只有父实体会被更新。所以我需要一个代码，如果我有包含所有子数据的父实体对象并单击更新它更新父数据以及子数据。

请回复，因为这真的很紧急

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:20:53.297

您应该在业务层中处理此逻辑，而不是在 EF5 中。您不能假设您的 ORM 解决方案知道您的业务逻辑。如果您发布更多代码，我们可能会提供帮助..

# java - GWT - 从小部件中获取按钮的“addClickHandler”

> ID：15428370
> 
> 赞同：2
> 
> 时间：2013-03-15T09:07:00.903
> 
> 标签：java, gwt, button, widget, handler

首先，我正在使用 ldap 进行登录身份验证的时间跟踪页面。对于登录，我创建了一个对话框，将verticalpanel 设置为其小部件。我的垂直面板包含两个用于输入用户名/密码的文本框和一个用于将数据发送到 ldap 服务器的按钮。

在模块加载时弹出对话框并获取登录成功时的时间跟踪内容。

对于我的问题：“LoginWidget”和“LoginClickHandler”具有分离的类，因此我需要在模块加载时获取登录按钮以添加“LoginClickHandler”。

处理这个问题的最佳方法是什么？- 因为我知道我的解决方案不是很好。

**LoginWidget 类**

```
public class LoginWidget{
     private Button loginButton;
     private DialogBox dialogBox;
     private TextBox tbxUser;
     private PasswordTextBox tbxPw;
     private Label lblUser;
     private Label lblPW;
     private Label lblError;

public LoginWidget(){
    dialogBox = new DialogBox();
    tbxUser = new TextBox();
    tbxPw = new PasswordTextBox();
    lblUser = new Label();
    lblPW = new Label();
    lblError = new Label();
    dialogBox.setText("Login");
    dialogBox.setAnimationEnabled(true);
    loginButton = new Button("Login");
    // set the id of a widget by accessing its Element
    loginButton.getElement().setId("closeButton");
    final HTML serverResponseLabel = new HTML();
    VerticalPanel dialogVPanel = new VerticalPanel();
    dialogVPanel.addStyleName("dialogVPanel");
    dialogVPanel.add(lblUser);
    lblUser.setText("User:");
    dialogVPanel.add(tbxUser);
    dialogVPanel.add(lblPW);
    lblPW.setText("PW:");
    dialogVPanel.add(tbxPw);
    dialogVPanel.add(lblError);
    dialogVPanel.add(serverResponseLabel);
    dialogVPanel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT);
    dialogVPanel.add(loginButton);
    dialogBox.setWidget(dialogVPanel);
    dialogBox.show();
    dialogBox.center();
}

public Button getLoginButton(){
    return loginButton;     
}

    public DialogBox getDialogBox(){
    return dialogBox;
}

public TextBox getTbxUser(){
    return tbxUser;
}

public TextBox getTbxPw(){
    return tbxPw;
}

public Label getLblError(){
    return lblError;
}
} 
```

**LoginClickHandler 类**

```
public class LoginClickHandler implements ClickHandler {
/**
*/
private LoginWidget lw;
private ServiceImplURL serviceImplURL;
private TimeTracking dtt = new TimeTracking();

public LoginClickHandler(ServiceImplURL sIU, LoginWidget _lw){
    /**
    */
    this.lw = _lw;
    this.serviceImplURL = sIU;
}

public void onClick(ClickEvent event) {
    /**
    */
    serviceImplURL.getRpcLdap().authenticate(lw.getTbxPw().getText(), lw.getTbxUser().getText(), new AsyncCallback<Boolean>() {
        /**
        */
        @Override
        public void onSuccess(Boolean isLdapAuthOk) {   
            /**
            */
            if(isLdapAuthOk){                       
                lw.getDialogBox().hide();
                User user = new User(lw.getTbxUser().getText(), lw.getTbxPw().getText());
                serviceImplURL.getRpcSession().setUsername(user.getUsername(), new AsyncCallback<Void>() {

                    @Override
                    public void onFailure(Throwable caught) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onSuccess(Void result) {
                        // TODO Auto-generated method stub

                    }
                });
                serviceImplURL.getRpcDB().insertUser(user.getUsername(), new AsyncCallback<Void>() {
                    /**
                    */
                    @Override
                    public void onFailure(Throwable caught) {
                        /*
                         * connection error to implement
                         */                                     
                    }

                    @Override
                    public void onSuccess(Void result) {
                        /*
                         * do nothing
                         */                                     
                    }
                });
                dtt.loadContent();
            }
            else{
                lw.getLblError().setStyleName("error");
                lw.getLblError().setText("Passwort oder Username falsch!");
            }                           
        }

        @Override
        public void onFailure(Throwable caught) {
            // TODO Auto-generated method stub

        }
    });
}
} 
```

**我的入口点**

```
@Override
    public void onModuleLoad() {    
        /**
        */
        loadLoginWidget();

    }

    /**
     * Creates the login pop up.
     */
    public void loadLoginWidget(){
        /**
        */
        LoginWidget lw = new LoginWidget();
        LoginClickHandler lch = new LoginClickHandler(serviceImplURL, lw);
        lw.getLoginButton().addClickHandler(lch);
    } 
```

我已经尝试过扩展 Button 但我不认为它有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:11:08.670

将侦听器类（例如 your `LoginClickHandler`）传递给视图构造函数：

```
public LoginWidget( LoginClickHandler listener ) 
{
    ...
    loginButton.addClickHandler( listener )
    ...
} 
```

更一般地，您可能想要插入定义操作的接口并`LoginClickHandler`实现它：

```
public interface LoginListener
{
    void onLogin();
    ...
}

public class LoginWidget
{
    public LoginWidget( LoginListener listener ) 
    {
        this.listener = listener;
        Button loginButton = new Button( "Login" );
        loginButton.addClickHandler( new ClickHandler()
        { 
            public void onClick( ClickEvent event ) { listener.onLogin(); }
        } );
    }
    ...
} 
```

最后

```
public class LoginClickHandler implements LoginListener
{
    @Override public void onLogin()
    {
        serviceImplURL.getRpcLdap()...
        ...
    }
} 
```

和

```
public void loadLoginWidget()
{
    LoginWidget lw = new LoginWidget( new LoginClickHandler() );
    ...
} 
```

干杯，

# facebook-graph-api - 从 node_load() 获取 Facebook 内容

> ID：15428372
> 
> 赞同：-2
> 
> 时间：2013-03-15T09:07:05.310
> 
> 标签：facebook-graph-api, drupal-7

我想要一个具有字段“FB URL”的内容类型，该字段获取 Facebook 事件的 URL，并且当人们加载这种类型的节点时，通过 FB API 检索 facebook 事件的内容。无法从数据库中检索它，因为内容必须与 facebook 上的内容保持一致。

到目前为止，我创建了一个模块，`node_load()`用于在加载节点时添加内容，但我不知道从 FBOauth 模块调用什么函数来执行此操作......在此之前，我尝试了一个简单的`file_get_contents()`; 在 FB 应用程序的访问令牌过期并且不知道如何动态获取新令牌之前，这种方法运行良好。

我想我迷路了，所以有人可以指导我如何做到这一点吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:56:54.663

好的，我发现（虽然我不明白 -1；这个问题旨在了解我是否走在正确的轨道上）：

```
function fb_event_crawler_node_load($nodes, $types) {
    foreach ($nodes as $node) {
        if ($node->type=="event"){
            $fb_url = $node->field_event_url['und'][0]['value'];
            $url = parse_url($fb_url);
            if (!$url['host'] == 'www.facebook.com'){
                echo t('This is not a Facebook URL');
            }

            $path_exploded = explode("/", $url['path']);
            if (!$path_exploded[1] == 'events'){
                echo t("This is not a Facebook event page!");
            }

            $fb_event_id=$path_exploded[2];

                // dpm($path_exploded);

            $app_id = isset($app_id) ? $app_id : variable_get('fboauth_id', '');
            $app_secret = isset($app_secret) ? $app_secret : variable_get('fboauth_secret', '');
            $app_token_url = "https://graph.facebook.com/oauth/access_token?"
            . "client_id=" . $app_id
            . "&client_secret=" . $app_secret 
            . "&grant_type=client_credentials";

            $response = file_get_contents($app_token_url);
            $params = null;
            parse_str($response, $params);
            $access_token=$params['access_token'];

                //echo($params['access_token']);

            $fbquery = fboauth_graph_query($fb_event_id."/", $access_token);

            dpm($fbquery);
        }
    }
} 
```

# c# - 对话框结果总是在按钮单击时返回“取消”

> ID：15428373
> 
> 赞同：0
> 
> 时间：2013-03-15T09:07:08.607
> 
> 标签：c#, dialog

我有一个表格 PatientInformation，它有一个 datagridview 用于显示数据库中的现有记录。我还有另一种形式用于更新 datagridview 中存在的记录。

因此，我需要刷新 datagridview 以考虑更新。我在更新表单上有 2 个按钮（取消、更新）。现在问题出在此处：即使单击“更新”按钮，我的对话框结果也总是返回“取消”。

我的表单还包含**Form Closed 事件**的方法。这是导致问题的原因吗？

我的调用语句如下：

```
diagResult = patientUpdateVlObject.ShowDialog();
if (diagResult.ToString() == "Update")
{
   dtgrdviewSearchOutput.Refresh();
   DipslayMessage("Record Updated Successfuly!!");
}
else
   //Do nothing. 
```

我在更新表单中的表单关闭方法如下：

```
private void PatientUpdate_FormClosed(object sender, FormClosedEventArgs e)
    {
        this.Dispose();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:42:35.507

您不应该使用`diagResult.ToString() == "Update"`，因为当您这样做时，您会将控件名称转换为字符串。

要解决此类问题，您应该将代码修改为以下内容：

```
private void buttonMessageBox_Click(object sender, EventArgs e)
{
    if (MessageBox.Show("Click \"OK\" if you agree with this", "MessageBoxTest", MessageBoxButtons.OKCancel)
        == DialogResult.OK)
    {
        MessageBox.Show("User clicked in \"OK\"");
    }
    else
    {
        MessageBox.Show("User clicked in \"Cancel\"");
    }
} 
```

在此示例中，我删除了该`ToString`方法，现在我将其与`DialogResult.OK`（MessageBox.Show 方法返回一个 DialogResult 对象，因此您无法像以前那样将其与字符串进行比较）进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:31:50.440

当然，您正在检查名称：

[http://msdn.microsoft.com/en-us/library/2chz8edb.aspx](http://msdn.microsoft.com/en-us/library/2chz8edb.aspx)

```
 if (diagResult == DialogResult.OK)
        {
           dtgrdviewSearchOutput.Refresh();
           DipslayMessage("Record Updated Successfuly!!");
        } 
```

# c# - 使用代理对 FTP 上的列表目录执行 GetRequest() 时出现错误 404

> ID：15428378
> 
> 赞同：0
> 
> 时间：2013-03-15T09:07:35.373
> 
> 标签：c#, proxy, ftp, http-status-code-404, getresponse

我可以提前告诉你我的网址没问题。最近我们已经移动了我们的服务器应用程序，并且当前系统有一个很好的代理。

所以，我认为代理是问题，但不知道如何解决，最奇怪的是，使用 Filezilla 我可以登录 FTPServer，但使用我的 .Net 代码是不可能的，我试图更改为二进制，被动，手动指定代理...但没有成功。它总是在 GetResponse() 上崩溃。另一个有趣的想法是，当我不使用`wilcard`（即`*.csv`）时，响应是一个带有文件列表信息的 HTML。

我的代码：

```
FtpWebRequest listRequest = (FtpWebRequest)WebRequest.Create(
            ftpDir == null ? Constants.FTPServer + (wildcard == null ? "" : "/" + wildcard) : Constants.MasternautFTPServer + "/" + ftpDir
            + (wildcard == null ? "" : "/" + wildcard)
            );
listRequest.Method = WebRequestMethods.Ftp.ListDirectory;
listRequest.UseBinary = true;
listRequest.UsePassive = true;
listRequest.Credentials = Credentials;
listRequest.Proxy = Proxy;
FtpWebResponse listResponse = (FtpWebResponse)listRequest.GetResponse();

Stream listResponseStream = listResponse.GetResponseStream();
StreamReader listreader = new StreamReader(listResponseStream, Encoding.UTF7);
string listOfFilesStr = listreader.ReadToEnd();
ret = new List<string>(listOfFilesStr.Split(new[] { "\r\n" },StringSplitOptions.RemoveEmptyEntries));
ret.Remove(".");
ret.Remove("..");
ret.Remove(".ftpquota");
listreader.Close();
listResponse.Close(); 
```

方法在哪里`Proxy`得到`WebRequest.GetSystemWebProxy();`

所以，现在我正在研究如何解决这个问题……有人能帮忙吗？？？

# android - 将日期/时间（以毫秒为单位）格式化为 Android 中的本地字符串

> ID：15428380
> 
> 赞同：5
> 
> 时间：2013-03-15T09:07:42.110
> 
> 标签：android, time

我有一个以毫秒为单位的日期/时间，通过以下方式检索：

```
Calendar.getInstance().getTimeInMillis(); 
```

我想将其格式化为一个字符串，该字符串以设备上的本地格式表示日期和时间。例如：

```
US:      12/15/2013 10:30 pm
Germany: 15.12.2013 22:30 
```

我不应该指定格式，例如：

```
SimpleDateFormat outputFormat = new SimpleDateFormat("MMM dd, yyyy h:mm a"); 
```

是否有处理本地格式的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:20:48.017

看到这个代码

```
 String myformat = android.provider.Settings.System.getString(getContentResolver(),     android.provider.Settings.System.DATE_FORMAT);
    DateFormat dateFormat;
    if (TextUtils.isEmpty(myformat)) {
      dateFormat = android.text.format.DateFormat.getMediumDateFormat(getApplicationContext());
    } else {
      dateFormat = new SimpleDateFormat(format);
    } 
```

所以 dateformat 将与您的设备日期匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:24:41.187

检查[日期格式](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html)。特别

```
public static final DateFormat getDateInstance(int style,
                                               Locale aLocale) 
```

这是一个[例子](http://www.java2s.com/Tutorial/Java/0040__Data-Type/FourdifferentdateformatsforfourcountriesUSUKGERMANYFRANCE.htm)。看看能不能帮上忙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:13:13.493

我想这就是你要找的东西：

```
Locale locale = Locale.getDefault();    
Date today = new Date();
SimpleDateFormat.SimpleDateFormat.getDateTimeInstance(SimpleDateFormat.LONG, SimpleDateFormat.LONG, locale).format(today)); 
```

您需要在其中检查`locale`并相应地传递其值。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-15T09:15:37.683

作为一个选项，您可以将格式字符串存储在字符串资源中，以使其通过

```
getResources().getString(R.string.format) 
```

然后只需将您需要的字符串放入语言环境文件夹，例如：

```
res/values-en/strings.xml
res/values-fr/strings.xml 
```

# php - 在变量中实现“-”？

> ID：15428382
> 
> 赞同：2
> 
> 时间：2013-03-15T09:07:58.040
> 
> 标签：php, html, variables

我正在编写一个脚本，用户可以在其中输入 HTML 表单中的日期，文本框如下所示：

![在此处输入图像描述](../Images/20e474ebb69bb27e13127c0ef5348248.png)

文本框的 HTML 格式是这样的：

```
<td>
    Datum (d/m/j):
    </td>
    <td>
    <input type="text" align="left" name="dag" size="2" value="<?php echo date("d") ?>">
    -<input type="text" align="left" name="maand" size="2" value="<?php echo date("m") ?>">
    -<input type="text" align="left" name="jaar" size="2" value="<?php echo date("y") ?>">
    </td> 
```

我将它存储在这样的变量中：

```
$date       = $_POST['dag'] . $_POST['maand'] . $_POST['jaar']; 
```

将数据存储在数据库中的 SQL 查询如下所示：

```
$sql = mysql_db_query($database, "INSERT INTO html (HTML, Onderwerp, Datum) VALUES ('".$html."', '".$subject."', '".$date."')"); 
```

（是的，我知道我不应该再使用 mysql_* 了，但这不是它的目的）

然而问题是日期不是这样存储的：15-03-13，而是这样：150313（这很明显）。我的问题是如何在那里实现'-'？有没有办法在变量中添加一个“-”，或者有人有其他想法吗？也许有一个简单的解决方案，但我只是没有看到它^^

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:09:29.220

试试这个 ：

```
$date       = $_POST['dag'] ."-". $_POST['maand'] ."-". $_POST['jaar']; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T09:11:34.733

简单地`-`连接`$date`变量

```
$date       = $_POST['dag'] .'-'. $_POST['maand'] .'-'. $_POST['jaar']; 
```

# matlab - 绘制和选择要绘制的特定数据

> ID：15428383
> 
> 赞同：0
> 
> 时间：2013-03-15T09:08:06.557
> 
> 标签：matlab

我需要绘制两种仪器的浓度图，以便比较结果。需要在一个轴上绘制来自仪器 (A) 的浓度，在另一轴上绘制来自另一台仪器 (B) 的浓度。问题是仪器 A 的时间为 1 小时，而仪器 B 的时间为 1 分钟。我将如何选择可以绘制仪器 A 的特定时间。

```
figure
plot(averagetime,averageconcentration_A),'color','r');
hold on
plot(num,(B_concentration_in_mgperlitre);
datetick('x')
ylabel 'Average Concentration(mg/litre)';
xlabel 'Average Time'; 
```

这绘制了一个随时间变化的线图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T07:02:14.340

以更大的间隔对数据执行插值。Malab 中有插值函数。但是，您需要注意该方法。如果您的数据线性移动，那么您将能够获得良好的结果，因为您的时间戳是一致的。我认为通过查看您的数据，您可以判断点的线性传播。如果您不确定适合您数据的函数，请使用[曲线拟合](http://au.mathworks.com/products/curvefitting/)工具箱来找到最佳匹配。然后，您需要根据该函数在两点内进行插值。曲线拟合可以在区域内应用。我的意思是您不需要为整个数据拟合曲线，找到 t 个连续点之间的最佳匹配将适合您的目的。如果要使用线性插值，请使用 Matlab 函数[interp1](http://au.mathworks.com/help/matlab/ref/interp1.html) 和这个库[lininterp1f](http://www.mathworks.com/matlabcentral/fileexchange/8627-fast-linear-interpolation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:15:14.930

执行线性插值以获得仪器 A 的数据点，就好像它也有 1 分钟的时间一样。

见：[http ://en.wikipedia.org/wiki/Linear_interpolation](http://en.wikipedia.org/wiki/Linear_interpolation)

# c# - Webservices JSON 从哪里开始？

> ID：15428387
> 
> 赞同：1
> 
> 时间：2013-03-15T09:08:24.840
> 
> 标签：c#, json, web-services

我有一个用户可以填写数据的网页，这些数据被插入到我的数据库中，但我也想使用 ac# 或 delphi 应用程序访问这些变量。我希望使用 JSON 网络服务来做到这一点。我想知道这是否可行，如果可以，从哪里开始。我对 JSON 很陌生，所以如果有人有任何我可以阅读的好文章，请发表！

要清楚，我想要这样的东西：

用户填写数据 -> PHP 使用获取数据`$_POST`-> PHP 将变量放入数据库 -> 使用该变量创建 JSON Web 服务 -> 能够在 ac#/delphi 应用程序中看到该变量

是用 c# 还是 delphi 创建应用程序仍然是我无法做出的决定。

我想听听您对此的建议和/或信息！

# c++ - 如何拥有在当前类之后定义的类的变量？

> ID：15428388
> 
> 赞同：0
> 
> 时间：2013-03-15T09:08:28.280
> 
> 标签：c++, visual-c++, c++-cli

这是我的 C++ CLI 代码：

```
public ref class SVeh{
public:
    bool Is( Pla^ For);
}; 
```

`Pla`是在 之后定义的`SVeh`。

```
public ref class Pla{
public:
    bool somemethod();
}; 
```

编译器将类`Pla`作为未知标识符并且不编译它。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:12:36.287

我不知道 C++/CLI，但如果它类似于 C++，你可以前向声明 Pla：

```
ref class Pla;
public ref class SVeh{
  // rest of code 
```

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/9110307/c-cli-forward-declarations)。

# ruby-on-rails - Carrierwave 和 Heroku 错误（“未定义方法 `image_wil l_change！”）

> ID：15428392
> 
> 赞同：0
> 
> 时间：2013-03-15T09:08:34.843
> 
> 标签：ruby-on-rails, ruby, heroku

在本地一切正常，但在部署到 Heroku 后，我无法上传任何照片。这是heroku日志。我已经运行了 heroku rake db:migrate 并且已经根据carrierwave wiki设置了缓存目录，但我不确定如何解决这个问题。

```
2013-03-15T08:11:39+00:00 app[web.1]: Started POST "/posts" for xx.xx.xx.xx
 at 2013-03-15 08:11:39 +0000
2013-03-15T08:11:39+00:00 app[web.1]:
2013-03-15T08:11:39+00:00 heroku[router]: at=info method=POST path=/posts h
ost=boiling-bastion-xxxx.herokuapp.com fwd="xx.xx.xx.xx" dyno=web.1 queue=0 wait
=0ms connect=2ms service=1847ms status=500 bytes=643
2013-03-15T08:11:39+00:00 app[web.1]:
2013-03-15T08:11:39+00:00 app[web.1]: NoMethodError (undefined method `image_wil
l_change!' for #<Post:0x00000005ab1698>):
2013-03-15T08:11:39+00:00 app[web.1]:
2013-03-15T08:11:39+00:00 app[web.1]:   app/controllers/posts_controller.rb
:6:in `create'
2013-03-15T08:11:39+00:00 app[web.1]:
2013-03-15T08:11:39+00:00 app[web.1]: Completed 500 Internal Server Error in 11m
s
2013-03-15T08:11:39+00:00 app[web.1]: Processing by PostsController#create
as HTML
2013-03-15T08:11:39+00:00 app[web.1]:   Parameters: {"utf8"=>"???", "authenticit
y_token"=>"rR7KrBprIx=", "post"=>{"content
"=>"test", "image"=>#<ActionDispatch::Http::UploadedFile:0x00000005ac28a8 @origi
nal_filename="423366.jpg", @content_type="image/jp
eg", @headers="Content-Disposition: form-data; name=\"post[image]\"; filena
me=\"423366.jpg\"\r\nContent-Type: image/jpeg\r\n"
, @tempfile=#<File:/tmp/RackMultipart20130315-2-1mskj82>>}, "commit"=>"Post"} 
```

ImageUploader 类

```
class ImageUploader < CarrierWave::Uploader::Base
include CarrierWave::MiniMagick
storage :file
def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end
def extension_white_list
     %w(jpg jpeg gif png)
   end
def filename
     "#{secure_token(10)}.#{file.extension}" if original_filename.present?
   end

   def cache_dir
    "#{Rails.root}/tmp/uploads"
  end 
```

我的 schema.db

```
create_table "posts", :force => true do |t|
    t.text     "content"
    t.integer  "user_id"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.string   "image"
    t.text     "commentcontent"
    t.text     "comment_content"
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:52:02.277

您`image`的`Post`.

我相信你有类似的东西：

```
class Post < ActiveRecord::Base
  mount_uploader :image, ImageUploader
end 
```

因此，您需要创建迁移以添加`image`列：

```
rails g migration AddImageToPosts image:string 
```

最后，

```
rake db:migrate 
```

# apache - Apache、CentOS、Kloxo 和 ogg mimetype

> ID：15428395
> 
> 赞同：0
> 
> 时间：2013-03-15T09:08:38.037
> 
> 标签：apache, centos, mime-types, kloxo

几个小时后试图解决问题，我想我疯了：S

我的网站上有一个 ogg 声音，它在本地（XAMPP 的 Apache）上运行良好，但它在我的 VPS（Apache、CentOs 和 Kloxo）上根本不起作用，即使在我的 .htaccess 中我有所有的 mimetypes（音频/ ogg ogg）和（应用程序/ogg ogg）。

这是我在本地（工作）中获得的标题：

```
Request URL:http://127.0.0.1/bass.ogg
Request Method:GET
Status Code:206 Partial Content
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:identity;q=1, *;q=0
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:PHPSESSID=08e4d19b19720f0a5491c20a7bba20c7
Host:127.0.0.1
Range:bytes=0-
Referer:http://127.0.0.1/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.160 Safari/537.22
Response Headersview source
Accept-Ranges:bytes
Cache-Control:max-age=2592000
Connection:Keep-Alive
Content-Length:59290
Content-Range:bytes 0-59289/59290
Content-Type:audio/ogg
Date:Fri, 15 Mar 2013 08:58:14 GMT
Expires:Sun, 14 Apr 2013 08:58:14 GMT
Keep-Alive:timeout=5, max=98
Last-Modified:Sat, 09 Mar 2013 14:23:45 GMT
Server:Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 
```

这是我在我的 VPS 上得到的标题（不工作）：

```
Request URL:http://www.mysite.com/jazz.ogg
Request Headersview source
Accept-Encoding:identity;q=1, *;q=0
Cache-Control:max-age=0
Range:bytes=0-
Referer:http://www.mysicians.com/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.160 Safari/537.22 
```

我希望你能帮忙，这样我终于可以睡个好觉了：）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T12:07:06.367

我自己找到了一个解决方案，我希望它会帮助一些人。

和你一样，在我的本地服务器 Wamp 上一切正常。问题出在我的带有 Apache 的 VPS 上。在我的 .htaccess 文件中添加以下行后（第 1 行应该足以用于 ogg 扩展）：

```
AddType audio/ogg .oga
AddType video/ogg .ogv .ogg
AddType video/webm .webm
AddType video/mp4 .mp4 
```

我仍然在使用 Google chrome 时遇到问题，我可以在 Firefox、Internet Explorer、Safari 中播放声音，但不能在 Chrome 中播放。我搜索了几个小时而没有找到解决方案。它可能与编解码器有关，但我不确定。

最后，我通过调用适当播放声音的距离源来解决该错误。

以不同来源的 html5 为例，以确保声音在所有浏览器中播放：

```
<audio id="sound">
  <source src="sound.wav" />
  <source src="http://www.another-website.com/sound.mp3" />
  <source src="sound.mp3" />
  <source src="sound.ogg" />
  <embed  src="sound.mp3"></embed>
</audio> 
```

# mysql - 将 2 个数据库合并到另一个没有重复记录的数据库

> ID：15428399
> 
> 赞同：0
> 
> 时间：2013-03-15T09:08:59.813
> 
> 标签：mysql

我有一个问题，我想将 2 个数据库合并到另一个数据库中，但问题是存在重复的行。那么如何将 2 个数据库合并到另一个没有重复记录的数据库中呢？我希望有一个人可以帮助我。

## 数据库 1

## 姓名 | 号码 | 代码

演示 | 0293 | 827

## 测试 | 0482 | 923

## 数据库 2

## 姓名 | 号码 | 代码

大声笑| 0223 | 第182章| 1923 | 829 演示 | 0293 | 827

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:13:08.517

```
Select A.*,B.* from TABLE1 AS A,TABLE2 AS B where A.code=B.code GROUP BY A.code; 
```

我认为您在谈论 TABLE 而不是 DATABASE。对查询使用`GROUP BY`子句或查找`DISTINCT`值。而且您还没有指定任何主键..所以先阅读mysql教程..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:04:06.583

*这确实应该使用唯一的密钥和`ON DUPLICATE KEY`. 如果不愿意这样做，以下方法也可以：*

假设表是相同的，并且您只想在所有列与目标表中的行相同时排除一行。

```
INSERT into Table1 
 SELECT * from Table2 
 WHERE concat(Name,'|',Number,'|',Code) not in (
  SELECT concat(Name,'|',Number,'|',Code) 
  FROM Table1
 ) 
```

# java - 如何从 Java 运行 .sh 文件？

> ID：15428414
> 
> 赞同：7
> 
> 时间：2013-03-15T09:09:31.317
> 
> 标签：java, shell

我需要在不传递任何参数的情况下从我的 Java 代码运行 .sh 文件。我已经尝试过

```
Runtime.getRuntime().exec("src/lexparser.sh"); 
```

和

```
ProcessBuilder pb = new ProcessBuilder("src/lexparser.sh");
Process p = pb.start(); 
```

以上两种方法均无效。有没有其他方法可以从 Java 运行 .sh 文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T09:10:57.867

```
ProcessBuilder pb = new ProcessBuilder("src/lexparser.sh", "myArg1", "myArg2");
 Process p = pb.start();
 BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
 String line = null;
 while ((line = reader.readLine()) != null)
 {
    System.out.println(line);
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T09:20:49.883

有两件事很容易错过：

1.  路径和 CWD。确保找到可执行文件的最简单方法是提供它的绝对路径，例如`/usr/local/bin/lexparser.sh`

2.  处理输出。您需要阅读过程输出。输出被缓冲，如果输出缓冲区已满，则生成的进程将挂起。

# c# - ResourceDictionary 中的 Windows 样式不适用

> ID：15428417
> 
> 赞同：15
> 
> 时间：2013-03-15T09:09:47.183
> 
> 标签：c#, wpf, xaml, styles

由于我的应用程序中有多个`Window`s，因此我正在寻找一种不需要我`binding`在每个`Window`.

我创建了`ResourceDictionary`一个`style`窗口背景：

```
<Style TargetType="{x:Type Window}">
    <Setter Property="Background" Value="AliceBlue"/>
</Style> 
```

在我的`XAML`，我设置`ResourceDictionary`：

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Templates.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources> 
```

没有错误，但我的`Window`颜色保持白色。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-15T10:07:09.307

这似乎是由 WPF 从 nested 加载/处理样式的顺序`ResourceDictionary`和类的细节共同引起的`Window`。

假设`MainWindow`根据您的帖子定义。现在将以下内容放入`Templates.xaml`：

```
<Style TargetType="{x:Type Window}">
    <Setter Property="Background" Value="Red"/>
</Style>
<Style TargetType="{x:Type Window}" x:Key="myStyle">
    <Setter Property="Background" Value="Green"/>
</Style> 
```

如果`MainWindow`没有定义样式，那么您将在设计器中看到它以红色背景显示。设计者正在解析整个 Xaml 并加载资源字典，然后绘制结果。在绘制窗口之前读取样式，因此应用红色背景。

运行应用程序时，会在应用之前创建窗口`ResourceDictionary`。它在处理嵌套*之前*查找默认样式（带有 的样式`x:Key="{x:Type Window}"`） ，但什么也没找到。因此，在运行时，窗口以默认颜色显示。（这是上面评论中描述的行为。）请记住，样式具有与 Windows 样式匹配的默认值。*`ResourceDictionary``x:Key="{x:Type Window}"`*

 *`myStyle`如果您明确使用，则可以证明这一点。如果您将`Window`属性添加到您的定义中，`Style="{StaticResource myStyle}"`您会发现设计器失败，但您还会收到运行时错误，因为`myStyle`在 Window 需要它时尚未创建。如果您切换到`Style="{DynamicResource myStyle}"`then 您会看到它按您希望的方式工作，因为`DynamicResource`一旦`ResourceDictionary`解析并包含样式就会更新。

因此，应用它，您可以通过将其添加到您的 Window 元素以一种方式解决问题：`Style="{DynamicResource {x:Type Window}}"`- 但这是笨拙的。更好的解决方案是将您的资源字典包含在`app.xaml`文件中，在打开任何窗口之前将对其进行解析，从而对所有人可用：

```
<Application.Resources>
    <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Templates.xaml" />
            </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

这里真正的问题是你`Window`不是真正的 a `Window`：它是一个派生自`Window`并且实际上将是`MainWindow`,`Window2`等的类......这意味着 a 的自动样式连接`Window`永远*不会*以这种方式工作，并且在某种程度上不幸的是，总是需要手动装订。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-11T16:59:13.263

这是我在我的应用程序中使用的解决方案。它使我可以将所有窗口样式保持在一起，并且只需要在该`<Window.Resources>`部分之后几行。

这样做`Style`：

```
<Style x:Key="MyWindowStyle">
    <Setter Property="Window.Background" Value="AliceBlue"/>
</Style> 
```

然后，在您的窗口中，`</Window.Resources>`包括以下内容：

```
<Window.Style>
    <Style BasedOn="{StaticResource MyWindowStyle}"/>
</Window.Style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:25:26.570

在资源字典中添加新画笔

```
<SolidColorBrush x:Key="WindowBackground" Color="AliceBlue" /> 
```

并在您的 WPF 窗口中只需将所需的资源设置为窗口背景属性

```
<Window x:Class="GDD.Presentation.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="300" Width="300"
    Background="{StaticResource WindowBackground}"> 
```*

# c# - ASP.net 使用 javascript 在内容页面上获取 RadioButtonList 值

> ID：15428418
> 
> 赞同：1
> 
> 时间：2013-03-15T09:09:48.940
> 
> 标签：c#, javascript, asp.net, radiobuttonlist

我的 JavaScript 代码出现问题，已将其移至 ASP 中的内容页面。

它在独立页面上完美运行。

```
<script type="text/javascript">
        function validateQ12(oSrc, args) {
            var rbtnList = document.getElementsByName('rbtn12');
            var noClicked = false;
            for (var i = 0; i < rbtnList.length; i++) {
                if (rbtnList[i].checked) {
                    noClicked = rbtnList[i].value == "No";
                    break;
                }
            }
            if (noClicked) {
                args.IsValid = true;                   
            }
            else
                args.IsValid = args.Value.trim().length > 0;                   
        }
    </script> 
```

我已经浏览了两个页面上的 html，在一个有效的页面上

```
<input id="rbtn12_1" type="radio" name="rbtn12" value="No" checked="checked" onclick="Q12iNo();"> 
```

内容页面中的新内容页面有

```
<input id="MainContent_rbtn12_1" type="radio" name="ctl00$MainContent$rbtn12" value="No" checked="checked" onclick="Q12iNo();"> 
```

显然，名称更改一定是导致问题的原因。如何在我的 javascript 代码中引用这个新名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:12:31.063

要获取渲染的元素名称，请使用以下命令：

```
<%= rbtn12.UniqueID %> 
```

但是，在您的情况下，这可能仍然不起作用，因为您似乎需要遍历每个单选按钮项目。

请参阅以下帖子：

[找出是否使用 JQuery 检查了单选按钮？](https://stackoverflow.com/questions/2272507/find-out-if-radio-button-is-checked-with-jquery)

其中显示了如何确定单选按钮集合是否具有选定值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:16:41.330

您可以在控件中添加一个类名并使用 getElementByClassName 吗？

```
<input id="MainContent_rbtn12_1" type="radio" name="ctl00$MainContent$rbtn12" value="No" checked="checked" onclick="Q12iNo();" CssClass="Radio">

<script type="text/javascript">
        function validateQ12(oSrc, args) {
            var rbtnList = document.getElementsByClassName('Radio');
            var noClicked = false;
            for (var i = 0; i < rbtnList.length; i++) {
                if (rbtnList[i].checked) {
                    noClicked = rbtnList[i].value == "No";
                    break;
                }
            }
            if (noClicked) {
                args.IsValid = true;                   
            }
            else
                args.IsValid = args.Value.trim().length > 0;                   
        }
    </script> 
```

# iphone - 如何修改 UIColor 的色调、亮度和饱和度？

> ID：15428422
> 
> 赞同：15
> 
> 时间：2013-03-15T09:10:03.267
> 
> 标签：iphone, ios, xcode, uikit, uicolor

假设我有一个 UIColor

```
UIColor *color = [UIColor redColor]; 
```

现在我想修改饱和度/色调/亮度，我该怎么做？我确实阅读了文档，但我仍然很困惑

我想修改我制作的 UIColor ([UIColor redColor])，而不是使用某些偏好来启动新颜色。我如何修改它保留原来的。我确实知道该`colorWithHue:saturation:brightness:alpha:`方法，我需要更新现有颜色的属性，保持红色。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-15T09:12:58.350

您可以调用`getHue:saturation:brightness:alpha:`颜色，然后调整值，然后使用调整后的组件创建新颜色`+[UIColor colorWithHue:saturation:brightness:alpha:]`

```
CGFloat hue, saturation, brightness, alpha ;
BOOL ok = [ <color> getHue:&hue saturation:&saturation brightness:&brightness alpha:&alpha ] ;
if ( !ok ) { 
    // handle error 
}
// ... adjust components..

UIColor * newColor = [ UIColor colorWithHue:hue saturation:saturation brightness:brightness alpha:alpha ] ; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-09-06T18:39:16.087

这是您可能会发现有用的快速`UIColor`扩展：

```
extension UIColor {

    func modified(withAdditionalHue hue: CGFloat, additionalSaturation: CGFloat, additionalBrightness: CGFloat) -> UIColor {

        var currentHue: CGFloat = 0.0
        var currentSaturation: CGFloat = 0.0
        var currentBrigthness: CGFloat = 0.0
        var currentAlpha: CGFloat = 0.0

        if self.getHue(&currentHue, saturation: &currentSaturation, brightness: &currentBrigthness, alpha: &currentAlpha){
            return UIColor(hue: currentHue + hue,
                           saturation: currentSaturation + additionalSaturation,
                           brightness: currentBrigthness + additionalBrightness,
                           alpha: currentAlpha)
        } else {
            return self
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-30T18:21:11.920

不幸的是，在**默认情况下**更改 UIColor 的任何或值**非常麻烦**。使用**[HandyUIKit](https://github.com/Flinesoft/HandyUIKit)**（通过 Carthage 安装）让您的生活**更轻松**：`hsba``rgba`

 ****```
import HandyUIKit  

// each line creates a new UIColor object with the new value
color.change(.hue,        to: 0.1)
color.change(.brightness, to: 0.2)
color.change(.saturation, to: 0.3)
color.change(.alpha,      to: 0.4)

// chaining them returns a single new object with all values changed
color.change(.hue,        to: 0.5)
     .change(.brightness, to: 0.6)
     .change(.saturation, to: 0.7) 
```

还有一些选项可以应用**相对更改**：

```
// create a new UIColor object with hue & brightness increased by 0.2
color.change(.hue,        by: 0.2)
     .change(.brightness, by: 0.2) 
```

该库还在您的项目中添加了**一些其他方便的 UI 功能**——查看 GitHub 上的 README 以获取更多详细信息。

我希望它有帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-15T19:23:06.977

此处尚未提及的一个重要注意事项是您的 UIColor 应该位于扩展的 RGB 空间中。根据最初创建颜色的方式，如果它只是 RGB，则此函数可能会返回 false。

其次，我对@ambientlight 的回答做了一个变体，以使 API 更加流畅。您可以调整 1 个或所有属性。

```
extension UIColor {

    public func adjust(hueBy hue: CGFloat = 0, saturationBy saturation: CGFloat = 0, brightnessBy brightness: CGFloat = 0) -> UIColor {

        var currentHue: CGFloat = 0.0
        var currentSaturation: CGFloat = 0.0
        var currentBrigthness: CGFloat = 0.0
        var currentAlpha: CGFloat = 0.0

        if getHue(&currentHue, saturation: &currentSaturation, brightness: &currentBrigthness, alpha: &currentAlpha) {
            return UIColor(hue: currentHue + hue,
                       saturation: currentSaturation + saturation,
                       brightness: currentBrigthness + brightness,
                       alpha: currentAlpha)
        } else {
            return self
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T09:12:02.220

您可以通过设置以下值来使用此方法

`UIColor *customColor = [UIColor colorWithHue: x.xx saturation: x.xx brightness: x.xx alpha: 1.0];`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T09:12:58.803

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html)

有一个类函数`colorWithHue:saturation:brightness:alpha:`

当然，您可以`getHue:saturation:brightness:alpha:`在初始化时先使用，然后再进行任何更改`[UIColor redColor]`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-15T09:14:19.237

你可以简单地修改它

```
[UIColor colorWithHue:YourHueValue saturation:YourSaturationValue brightness:YourBrightnessValueValue alpha:1.00]; 
```

alpha 表示视图的不透明度，范围为 0.0 - 1.0

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-15T09:21:57.210

UIColor 不能改变饱和度/色调/亮度，CoreImage 可以。

下面的一些示例代码：

```
CIFilter *filter = [CIFilter filterWithName:@"CIColorControls"];

[filter setValue:[NSNumber numberWithFloat:1.0] forKey:@"inputContrast"];
[filter setValue:[NSNumber numberWithFloat:1.0] forKey:@"inputSaturation"];
[filter setValue:[NSNumber numberWithFloat:0.0] forKey:@"inputBrightness"];

[filter setValue:_A_CIImage_ forKey:kCIInputImageKey];

CIImage *_outputImage = filter.outputImage;

CIContext context = [CIContext contextWithOptions:nil];

CGImageRef outputImageRef = [context createCGImage: _outputImage fromRect:[_outputImage extent]]; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-06-15T10:43:05.067

```
CGSize imageSize = [ba size];
CGRect imageExtent = CGRectMake(0,0,imageSize.width,imageSize.height);

// Create a context containing the image.
UIGraphicsBeginImageContext(imageSize);
CGContextRef context = UIGraphicsGetCurrentContext();

[sourceimage drawInRect:imageExtent];
// Draw the hue on top of the image.
CGContextSetBlendMode(context, kCGBlendModeHue);
[[UIColor colorWithHue:yourvalue saturation:1.0 brightness:1 alpha:1.0] set];
UIBezierPath *imagePath = [UIBezierPath bezierPathWithRect:imageExtent];
[imagePath fill];

CGImageRef imageref=CGBitmapContextCreateImage(context);

UIImage *result =[UIImage imageWithCGImage:imageref];

CGImageRelease(imageref); 
```

在前两行中，它描述了图像大小和图像矩形。`CGContextRef`用于在核心图形中创建上下文。之后，第 5 行是您要应用图像的色调和矩形的图像。在那个重要的混合模式之后。在那个 UI 之后，`colorWithHue`其中传递了色调、饱和度、亮度和 alpha 的值。要获得适当的效果，请给出 1.0 的 alpha 值。最后你应该设置`uicolor.create`bezerpath 或者你可以直接给`cgcontextsetfill(context)`. 最后创建`imageref`并将该图像放入`UIImage`. 最后，一如既往地在编排中，释放`CGImageRelease`以对冲记忆问题。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-03-15T09:14:34.087

```
[UIColor colorWithHue:0.10 saturation:0.16 brightness:0.13 alpha:1.00]; 
```****

# paas - 我可以从附加组件访问 AppFog 服务（如 MySQL）吗？

> ID：15428430
> 
> 赞同：1
> 
> 时间：2013-03-15T09:10:53.497
> 
> 标签：paas, appfog

是否可以从附加组件访问像 MySQL 数据库这样的 AppFog 服务？例如，如果我想在 IronWorker 上运行一些作业并将结果填充到我在 AppFog 上运行的主 App 数据库中。如果我检查凭据，看起来这些服务只是内部 IP？！

```
Array ( [mysql-5.1] => Array ( [0] => Array ( [name] => dbname [label] => mysql-5.1 [plan] => free [tags] => Array ( [0] => mysql [1] => mysql-5.1 [2] => relational [3] => mysql-5.1 [4] => mysql ) [credentials] => Array ( [name] => d47fb5d7de0024290b53f74466ce00b [hostname] => 10.0.17.107 [host] => 10.0.17.107 [port] => 3306 [user] => uzBFvlo5ciU [username] => uzBFXPo5ciU [password] => p0fSFCOpWKs ) ) ) ) 
```

干杯斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:37:43.497

好的，看起来我是对的，并且不可能用于生产。AppFog 数据库服务仅配置为内部访问。

[1] [https://groups.google.com/forum/?fromgroups=#!topic/appfog-users/I31ni0pff9I](https://groups.google.com/forum/?fromgroups=#!topic/appfog-users/I31ni0pff9I)

# cocos2d-x - Coos2dx 中的类型转换错误

> ID：15428432
> 
> 赞同：0
> 
> 时间：2013-03-15T09:11:00.887
> 
> 标签：cocos2d-x

我正在尝试将[http://www.raywenderlich.com/29460/collisions-and-collectables-how-to-make-a-tile-based-game-with-cocos2d-2-x-part-2](http://www.raywenderlich.com/29460/collisions-and-collectables-how-to-make-a-tile-based-game-with-cocos2d-2-x-part-2)教程转换为cocos2dx 并在这一行出现错误： CCString *collision = properties->objectForKey("Collidable");

```
void HelloWorld::setPlayerPosition(CCPoint position)
{
CCPoint tileCoord = this->tileCoordForPosition(position);
int tileGid = _meta->tileGIDAt(tileCoord);
if(tileGid)
{
    CCDictionary *properties = _tileMap->propertiesForGID(tileGid);
    if(properties)
    {
        CCString *collision = properties->objectForKey("Collidable");
        if(collision && (collision->compare("True")))
            return;
    }
}
_player->setPosition(position); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:51:51.687

编译器抱怨 CCString 的“const-ness”丢失。objectForKey 方法返回 a`const CCString*`但您将其分配给 a`CCString*`这意味着它不再是`const`。

你有三个选项来解决这个问题，从最简单的开始：

*   声明你的 CCString const（除了不能将另一个 CCString 分配给同一个对象之外，没有其他缺点）：

`const CCString *collision = properties->objectForKey("Collidable");`

*   显式转换 const （根据编译器设置可能不允许这样做）：

`CCString *collision = (CCString*)properties->objectForKey("Collidable");`

*   从编译器设置中删除`permissive`标志以忽略此错误。不推荐，因为它允许您违反 const-ness。

# android - 由于宽度和高度，未找到 Android 资源

> ID：15428441
> 
> 赞同：7
> 
> 时间：2013-03-15T09:11:51.327
> 
> 标签：android, android-resources, forceclose

我最近在商店中发布了一个 Android 应用程序，它几乎适用于我的所有用户。但是，我很快就开始每周收到一些崩溃报告，其中包含以下跟踪：

```
Caused by: android.content.res.Resources$NotFoundException: File res/drawable-xhdpi/dark_button_unpressed.png from drawable resource ID #0x7f02005d
at android.content.res.Resources.loadDrawable(Resources.java:1716)
at android.content.res.Resources.getDrawable(Resources.java:581)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1696)
... 40 more
Caused by: java.lang.IllegalArgumentException: width and height must be > 0
at android.graphics.Bitmap.nativeCreate(Native Method)
at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
at android.content.res.Resources.loadDrawable(Resources.java:1711)
... 45 more 
```

要确定这里到底发生了什么并不容易。我可以从用户报告中收集到的唯一信息是，它似乎主要发生在低密度显示器的设备上。此特定资源用作 XML UI 中视图的背景。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-15T09:11:51.327

这里的问题是由 Android 中可绘制资源的自动缩放和非常小的可绘制对象的不幸组合引起的。

例如，如果您的应用程序仅提供`drawable-xhpdi`资源，则需要缩小它们的大小以适应较低密度的屏幕。如果您自己不提供这些资源，这将由 Android 自动完成。

显示密度的比例设置如下：

*   **xhdpi:** 2.0
*   **高清：** 1.5
*   **mdpi:** 1.0
*   **低密度脂蛋白：** 0.75

这意味着您的`xhdpi`资源在中等密度显示器上缩小了 2.0 倍。这可能不利于质量，这就是为什么通常建议自己创建和提供这些低密度资源的原因。

现在，回到手头的问题。拥有非常小的宽度或高度（1 或 2 像素）的资源并不少见。一个用例的示例是为视图提供纯色背景。

不幸的是，当提供这些资源`xhdpi`并缩小它们时，像素大小可能会被截断为 0。对此没有适当的保护措施，Android 将无法创建具有该尺寸的位图并崩溃。

有几种解决方案：

*   将资源包括在内`ldpi`并改为扩大规模，这不会影响作为背景的目的。
*   将资源包含为`nodpi`可绘制资源，它将永远不会被缩放。
*   请改用 XML 资源。

最后一个选项最准确地描述了意图，并允许您稍后在没有图像编辑程序的情况下轻松更改颜色：

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <solid android:color="#AARRGGBB" />
</shape> 
```

将此资源包含在`drawables`文件夹中，它将始终正常工作。

# ssl - 无法在 AWS EC2 中的 apache 服务器上设置 SSL 密钥

> ID：15428447
> 
> 赞同：0
> 
> 时间：2013-03-15T09:12:06.673
> 
> 标签：ssl, amazon-ec2

我在 AWS 上有一个带有 Apache 服务器的 EC2 实例。

我从 Comodo 购买了 SSL 证书并在 /etc/pki/tls/private/ 中安装了以下文件： server.ca-bundle server.crt server.key

我还在 /etc/httpd/conf/httpd.conf 中添加了以下几行：

```
<VirtualHost www.mydomain.com:443>
    ServerName www.mydomain.com
    DocumentRoot "/var/www/html"
    SSLENGINE on
    SSLCertificateFile /etc/pki/tls/private/server.crt
    SSLCertificateKeyFile /etc/pki/tls/private/server.key
    SSLCertificateChainFile /etc/pki/tls/private/server.ca-bundle
</VirtualHost> 
```

并重新启动http服务器。

但是当尝试通过[https://www.mydomain.com](https://www.mydomain.com)访问我的网站时，会出现证书错误警告（但如果我继续通过警告，则该网站显示良好）。

我检查了 ssltool.com 并得到： 测试的站点 www.mydomain.com 与主题 CN ip-10-203-65-225 不同！不用说，密钥文件是用我的域名 (CN=www.mydomain.com) 而不是包含 ip 的名称创建的。当我在 unix shell 中输入“主机名”时，我确实得到了“ip-10-203-65-225”，这是亚马逊自动提供的。但即使我更改它（在 /etc/sysconfig/network 中），它仍然被视为 ip-10-203-65-225。

另一方面，在不安装密钥的情况下查看相同的问题：即使我从 httpd.conf 中删除了这些行，并删除了密钥文件，浏览器也会警告证书错误，就好像存在自签名证书一样，并且在 ssltool.com 上出现同样的错误。所以看起来不是我的密钥文件无效，而是服务器根本不使用它们......

我完全糊涂了。请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T08:39:39.823

由于某些原因，我访问的寻求答案的页面都没有提到上述几行应该在

```
/etc/httpd/conf.d/ssl.conf 
```

而不是在

```
/etc/httpd/conf/httpd.conf 
```

（而不是在 <virtualHost> 部分内）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:15:48.363

您的证书已颁发给与您的 EC2 实例的主机名匹配的通用名称 (CN)。您需要使用正确的主机名创建一个新的 CSR，然后再次完成整个过程。当您生成新的 CSR 时，请务必更改 CN 而不是接受默认值。

# udp - UDP 服务器的最大有效负载和有效性

> ID：15428448
> 
> 赞同：0
> 
> 时间：2013-03-15T09:12:07.143
> 
> 标签：udp, winsock, payload

我创建了一个 UDP 服务器-客户端应用程序。服务器端只有一个线程连续执行recvfrom()。如果我从 3 台不同的机器上同时运行 3 个客户端并发送一些数据，则服务器能够从每个客户端读取数据。但是我怎样才能测试这个应用程序的可靠性呢？我怎么知道这个服务器一次可以处理多少个最大客户端数？还有最大有效载荷是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:05:29.753

> 但是我怎样才能测试这个应用程序的可靠性呢？

尽可能多地运行客户端。您可以运行和发送数据的客户端越多越好。尝试运行不同机器的多个客户端，并在每台机器上尝试运行尽可能多的客户端，并保持自动发送数据。

使客户端循环发送数据，无需等待输入，并在每次调用发送之间设置延迟。延迟几秒钟就可以了，然后你可以稍后降低延迟，看看你的服务器是如何处理它的。

> 我怎么知道这个服务器一次可以处理多少个最大客户端数？

你不能。您正在使用 UDP 服务器，而 UDP 是无连接的。客户端不需要*连接*到服务器来发送数据，他们只是发送它。通常它受到服务器上可用资源（内存等）的限制。

> 还有最大有效载荷是多少？

最大有效载荷是多少？UDP 消息？您可以阅读有关 UDP[数据包结构](http://en.wikipedia.org/wiki/User_Datagram_Protocol#Packet_structure)的更多信息。

# android - 层上的Andengine精灵触摸事件

> ID：15428451
> 
> 赞同：0
> 
> 时间：2013-03-15T09:12:15.440
> 
> 标签：android, andengine

我正在使用**AndEngine**开发一个游戏，其中在游戏屏幕上我有**2 层 - 后层**和**前**层。在**背面**，我附上了**1 个玩家**精灵和几个**坏人**精灵。在前**层**，我附上了一个**树**精灵。现在我想要的是**坏人**在整个游戏中以之字形的方式在屏幕上移动，当用户触摸**坏人****时**，他们会被**弹出（消失/分离）**但是当他们走到**树****后面**时，他们不应该被**弹出******当用户**触摸****baddie**所在区域的**树**但**不可见**时。我为树的图像设置了透明背景，并且由于树中有几个区域没有叶子，因此该区域也是透明的，并且在该区域中可以看到坏人，并且可以在该区域中**弹出**它们。****

 ******我已经完成了所有的事情，只有我面临的问题是**即使他们在树后面并且对用户不可见，也会弹出坏人**。

请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:30:59.170

如果您知道它们何时返回树中，则禁用该精灵的触摸区域，或者如果它们返回，则在触摸时不执行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T17:44:56.557

您可以使用 PixelPerfectSprite，仅当您触摸树时它才会返回 true，如果您在树叶之间（即透明区域）触摸，它将返回 false

在此之后，如果您的手指与树以及您的角色发生碰撞，则不要弹出，否则如果仅与角色发生碰撞则弹出******

# mysql - 在 MySql + Zeos lib 上提交

> ID：15428452
> 
> 赞同：2
> 
> 时间：2013-03-15T09:12:20.270
> 
> 标签：mysql, sql, delphi, zeos

我使用下一个代码在非自动通信连接上发布一些记录：

```
ZConnection1.AutoCommit := False;

  try
    ZTable1.Insert;
    ZTable1.FieldByName('name').AsString := 'John Doe';
    ZTable1.Post;
    ZConnection1.Commit;
  except
    ZConnection1.Rollback;
  end; 
```

当我运行此代码时，我的数据库中没有保存任何内容。

在我尝试下一个代码之后......

```
ZConnection1.AutoCommit := False;

   with ZQuery1 do begin
      SQL.Text := 'INSERT INTO mytable (name) values ("John Doe")';
      ExecSQL;
      SQL.Text := SQL.Text + 'COMMIT' ;
      try
        ExecSQL;
      except
        SQL.Text := 'ROLLBACK';
        ExecSQL;
      end;
    end; 
```

...一切都完美无缺。

我在第一种情况下做错了什么？我使用 Delphi6、MySql、Zeos 库和 InnoDB 表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T11:14:57.137

解决了我的问题：

这就是`AutoCommit`Zeos 中属性的实际工作方式：

*   当`AutoCommit`为 True 时，事务会在每个执行的 SQL 语句后自动提交，但您可以`StartTransaction`显式使用该命令来防止这种自动提交，直到您显式调用`Commit`.
*   何时`AutoCommit`为 False，您不应该调用`StartTransaction`. 然后事务会自动启动，但不会在每条执行语句后自动提交。

```
ZConnection1.AutoCommit := True;
ZConnection1.StartTransaction;
try
  ZTable1.Insert;
  ZTable1.FieldByName('name').AsString := 'John Doe';
  ZTable1.Post;
  ZConnection1.Commit;
except
  ZConnection1.Rollback;
end; 
```

# assembly - 如何在 NASM 中打印 8 位值

> ID：15428453
> 
> 赞同：1
> 
> 时间：2013-03-15T09:12:20.900
> 
> 标签：assembly, x86, nasm

很抱歉打扰我的导师。最近几天我发布了一些问题。他们已经伸出手来帮助我。通过在 x86 机器上的 Ubuntu11.04 中通过 NASM 工作，最近我发现了另一个工作混乱。它是“我如何打印 8 位值”？假设我的代码片段如下所示：

```
 section .data
         var db "string"
    section .text
         global main
    main:
         nop
         xor ebx,ebx

         mov dl,byte[var+ebx]
         mov al, dl  ; setting to AL the ASCII character to write
         mov bh, 0   ; setting the page number to 0 (all in the same page)
         mov bl, 7   ; setting to bl the foreground pixel color
         mov ah, 0xE ; INT10 E sub mode --> Write Text in Teletype Mode
         int 10      ; "calling" to the interrupt.

         nop 
```

现在，我只想打印 dl。上面的代码使用了@Shmil The Cat 的提示。它会引发分段错误。我们如何解决这个问题？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:16:10.770

在 linux 上，您可以使用 putchar：

```
 global main
        extern putchar

        section .data
        var db "string"

        section .text
main:
         mov ebx, 0  ; index
         mov dl, [var + ebx]
         push edx
         call putchar
         add esp, 4
         ret 
```

要调用一个需要 char 的函数，您需要推送一个完整的单词。该函数将使用最低有效字节。

# selenium - TeamCity 配置在清理 selenium-server.jar 时失败

> ID：15428454
> 
> 赞同：1
> 
> 时间：2013-03-15T09:12:25.590
> 
> 标签：selenium, teamcity, test-runner

一旦我们得到一个能够运行 Selenium 测试的构建代理，我已经设置了一个 TC 配置来运行 Selenium 测试。

这是我创建的第一个 TC 配置，但它一直在运行，直到我让 TC 运行 Selenium 测试运行程序。现在它在尝试清理`Selenium-server.jar`.

您可以从清理中排除文件类型，还是我在这里缺少其他解决方案？

TC 构建错误；

```
> Problem reported from build script. New build status text is: : {build.status.text}; Swabra cleanup failed
> Error while applying patch: Error while applying patch: Failed to delete: C:\BuildAgent\work\f43641868cf93216\src\django_selenium\selenium-server.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:27:44.883

您可以使用路径规则配置 Swabra 清洁器以忽略您的 selenium-server.jar：

> -:src\django_selenium\selenium-server.jar

但看起来硒测试设置存在问题。您发布的错误消息可能是由测试完成后仍在运行的某些进程（很可能是 selenium 服务器）引起的。它已锁定图书馆，这就是为什么 swabra 无法删除它。

# java - 如何从后面的代码中打印出在浏览器上呈现的 JSP 页面

> ID：15428463
> 
> 赞同：1
> 
> 时间：2013-03-15T09:12:51.220
> 
> 标签：java, jsp, jsf, printing

我想使用服务器端 Java 代码从呈现的 JSP 页面中打印出来。我还在我的 JSP 页面中使用 JSF 标记。

目前我正在使用 JavaScript 代码，但想摆脱使用客户端脚本，因为如果用户在浏览器中禁用 JavaScript，它将无法工作。我在用

```
window.print(); 
```

没有 JavaScript 有什么办法吗？如果是，我还想设置默认打印机，而不是显示打印对话框并使用默认打印机进行打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:29:44.903

（幸运的是）没有规定 HTML 页面可以触发打印对话框等。您可以提供一个指向弹出窗口的链接，其中包含便于打印的页面副本。或指向该页面 PDF 副本的链接。使用 JSF 两者都是可能的（通过适当的努力）。*（尽管不要问我细节。）*

# c# - 如何在 IIS 中使用 ServiceStack 浏览到目录/文件？

> ID：15428467
> 
> 赞同：2
> 
> 时间：2013-03-15T09:12:58.173
> 
> 标签：c#, servicestack

我有一个基于 ServiceStack 托管我的 Web 服务的目录。在目录中，我有一个帮助文件夹，其中包含一些 html 页面。但是，当我尝试浏览这些页面时，ServiceStack 认为我正在尝试访问路由并给我“未找到请求的处理程序”。

有没有办法告诉 ServiceStack 忽略某些路由？如果路由与 IIS 中存在的目录匹配，它肯定不是服务路由吗？

[http://www.example.com/exampleservice/metadata](http://www.example.com/exampleservice/metadata) <--很好

[http://www.example.com/exampleservice/help/main.html](http://www.example.com/exampleservice/help/main.html) <-- 与 ServiceStack 无关，因为它是一个目录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T11:03:58.387

这看起来已经在 ServiceStack v4 中很好地实现了。Demis 在[这里](https://plus.google.com/106787359118990653189/posts/NxHUpV1sg1d)发布了关于它的信息。

虚拟文件系统现在完全集成到 ServiceStack 的其余部分中，这使得一些有趣的事情成为可能：

*   `Config.WebHostPhysicalPath`您希望从其中提供 ServiceStack 中的物理文件的集合
*   当 ServiceStack 挂载在自定义路径时，您现在可以访问静态文件，例如 /api/default.html 将在 ~/default.html 处提供静态文件
*   默认情况下，ServiceStack 回退（即当不存在物理文件时）在 dll 中查找嵌入式资源文件。
*   您可以指定`Config.EmbeddedResourceSources`默认查看的程序集的数量和优先级：
    *   包含您的 AppHost 的程序集
    *   服务栈.dll

# java - 检查 jTextField 输入是 int 还是 string

> ID：15428470
> 
> 赞同：0
> 
> 时间：2013-03-15T09:13:01.900
> 
> 标签：java, arrays, try-catch, jtextfield

我的代码：

```
name = jTextFieldName.getText();
admin = Integer.parseInt(jTextFieldAdmin.getText());
anal = Integer.parseInt(jTextFieldAnalytical.getText());
creat = Integer.parseInt(jTextFieldCreative.getText());
finish = Integer.parseInt(jTextFieldFinisher.getText());

persons.addPerson(name, admin, anal, creat, finish);

persons.savePersons(); 
```

我想确保 name 是一个字符串，并且 admin、anal、creat 和 finish 是 0 到 30 之间的整数。我想我应该使用 try-catch，但我不知道如何使用它这个上下文。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:16:44.553

你为什么不使用 a`JSpinner`代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:16:22.627

try catch 不是处理这个问题的好方法：

```
try {
    name = jTextFieldName.getText();
    admin = Integer.parseInt(jTextFieldAdmin.getText());
    anal = Integer.parseInt(jTextFieldAnalytical.getText());
    creat = Integer.parseInt(jTextFieldCreative.getText());
    finish = Integer.parseInt(jTextFieldFinisher.getText());

    persons.addPerson(name, admin, anal, creat, finish);

    persons.savePersons();
} catch (NumberFormatException e) {
    // One of the integer fields failed to parse. Do something to alert the user.
} 
```

然后，您还可以在 try 部分中进行一些边界检查。例如

```
if (admin < 0 || admin > 30) {
    // Problem. Alert the user.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T08:18:11.760

用于`InputVerifier`，`JTextField`如下所示

```
public class MyInputVerifier extends InputVerifier {
    @Override
    public boolean verify(JComponent input) {
        String text = ((JTextField) input).getText();
        // Validate input here, like check int by try to parse it using Integer.parseInt(text), and return true or false
    }
}

// Set input verifier to the text field
jTextField.setInputVerifier(new MyInputVerifier()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T09:15:17.030

您需要的是`if-else`满足条件或要求用户在需要时再次输入。

前任 -

```
if(admin<0 || admin>30){
  // ask user to input again.
} 
```

# sequence - 科拉兹序列？

> ID：15428471
> 
> 赞同：0
> 
> 时间：2013-03-15T09:13:04.030
> 
> 标签：sequence, collatz

我试图解决 Collat​​z 问题。除了我的 int 最高的一个，它应该比较一个数字的计数器是否大于下一个数字的计数器似乎不起作用。我也尝试了我的最高变量作为数组，但仍然没有结果。感谢您的任何建议。

```
#include <vector>
#include <iostream>

using namespace std;

int main()
{

    __int64 num;
    int i;
    int counter=0;
    //vector<int> a(1000000);
    //vector<int> b(1000000);

    __int64 highest=0;
    int j=0;

    for(j=2;j<=1000000;j++)
    {
        num=j;
        counter=0;

        for(i=0;i<1000000;i++)
        {
            cout<<"num is: "<<j<<endl;

            if(num==1)
            {
                break;
            }

            if(num%2==0)
            {
                num = num/2;
                counter++;
                cout<<num<<endl;
            }
            else if(num%2!=0)
            {  
                counter++;
                num= (num*3)+1;
                cout<<num<<endl;
            }
        }

        cout<<"counter: "<<counter<<endl;

        //this part is not working 
        if(highest<=counter)
        {
            highest=counter;
            cout<<"highest is: "<<highest<<endl;
        }

    }

    return 0;
} 
```

# php - 如何从 .t xt 中获取这个城市并使用 PHP 将其添加到数据库中？

> ID：15428472
> 
> 赞同：-7
> 
> 时间：2013-03-15T09:13:05.220
> 
> 标签：php, mysql

城市.txt

```
City
City1
City2
City3
City4
City One
City Other 
```

如何从 .t​​xt 中获取这个城市并使用 PHP 将其添加到数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:22:53.107

或尝试：

```
$file = file_get_contents("city.txt");
$cities = explode("\n", $file);

foreach ($cities as $city) {

    $SQL = "INSERT INTO table_name (city) VALUES ('$city')";
    //now execute the SQL statement

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:16:30.670

它很容易。你需要谷歌来读取 PHP 中的文件并写入 PHP 中的数据库。

在这里，我将开始：

```
$file_handle = fopen("cit.txt", "rb");

while (!feof($file_handle) ) {
  $line_of_text = fgets($file_handle);
  // write your insert statement here, depending on your table structure.
} 
```

# google-apps-script - 如何创建下拉时间选择

> ID：15428477
> 
> 赞同：0
> 
> 时间：2013-03-15T09:13:15.203
> 
> 标签：google-apps-script

我想用 Google Apps Script 创建一个类似于 Google Calendar 的 From time 的 TimeBox，但是没有`createTimeBox`办法，我该怎么办？

使用`createDateBox()`方法我可以创建一个扩展的日历选择，但我不知道如何创建一个下拉时间选择。

我还没有找到`UiApp` 与谷歌日历的从时间相同的创建下拉时间选择的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:54:40.813

这是 Bryan 脚本的一个变体，有一个或两个小改进来处理 case hour=0 和 dateBox 上的验证器，以防止在未选择日期时抛出错误。

```
function doGet() {
  var app = UiApp.createApplication();
  var hpanel = app.createHorizontalPanel();
  var dateBox = app.createDateBox().setId('dateBox').setName('dateBox');
  var hour = app.createListBox(false).setId('hour').setName('hour')
  for(h=0;h<13;++h){hour.addItem(h)}

  var min = app.createListBox(false).setId('minute').setName('minute')
  .addItem('00').addItem('15').addItem('30').addItem('45');  // ADD ALL THE MINUTES YOU WANT

  var amPm = app.createListBox(false).setId('am').setName('amPm')
  .addItem('AM').addItem('PM');

  var dateTimeLabel = app.createLabel('',false).setId('dateTimeLabel');
  var submit = app.createButton('Submit').setId('submit');

  // SUBMIT HANDLERS
  var handler1 = app.createClientHandler().validateMatches(dateBox, '2','g').forEventSource().setEnabled(false);
  var handler2 = app.createServerHandler('showDate').validateMatches(dateBox, '2','g').addCallbackElement(hpanel);
  submit.addClickHandler(handler1).addClickHandler(handler2);

  hpanel.add(dateBox).add(hour).add(min).add(amPm).add(submit);
  app.add(hpanel).add(dateTimeLabel);
  return app;
}

function showDate(e) {
  var app = UiApp.getActiveApplication();
  var date = e.parameter.dateBox;
  var timeZone = date.toString().substr(25,6)+":00";  // timezone of this date according to script TZ
  var hour = Number(e.parameter.hour);  // TURN INTO NUMBER
  var min = Number(e.parameter.minute); // TURN INTO NUMBER
  var amPm = e.parameter.amPm;
  if (amPm == 'PM' ){hour = hour+12};  // ADD 12 HOURS TO PM HOURS
  if (hour == 24){hour = 0 ;amPm='AM'};  // HANDLE 24 HOUR CORRECTLY
  var newDate=new Date(date)
  newDate.setHours(hour,min,0,0);//set hours minutes sec and milliSecs
  var newDate = Utilities.formatDate(newDate, timeZone, 'MM/dd/yy hh:mm aaa');
  app.getElementById('dateTimeLabel').setText(newDate);
  app.getElementById('submit').setEnabled(true);
  return app;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:19:02.590

您可以创建自定义小时列表框、分钟列表框以及上午/下午之间的选择。假设您想要进一步处理日期+时间，您需要将小时数和分钟数转换为毫秒并将它们添加到 date.getTime() 中。

[演示](https://script.google.com/macros/s/AKfycbyafW6rMMXhXVJgEvqNR3P_riVNg2oLNfSU12IWKuwCN49EuWdW/exec)

```
function doGet() {
  var app = UiApp.createApplication();
  var hpanel = app.createHorizontalPanel();
  var dateBox = app.createDateBox().setId('dateBox').setName('dateBox');
  var hour = app.createListBox(false).setId('hour').setName('hour')
  .addItem(1).addItem(2).addItem(3);  // ADD ALL THE HOURS YOU WANT

  var min = app.createListBox(false).setId('minute').setName('minute')
  .addItem('00').addItem('15').addItem('30').addItem('45');  // ADD ALL THE MINUTES YOU WANT

  var amPm = app.createListBox(false).setId('am').setName('amPm')
  .addItem('AM').addItem('PM');  

  var dateTimeLabel = app.createLabel('',false).setId('dateTimeLabel');
  var submit = app.createButton('Submit').setId('submit');

  // SUBMIT HANDLERS
  var handler1 = app.createClientHandler().forEventSource().setEnabled(false);
  var handler2 = app.createServerHandler('showDate').addCallbackElement(hpanel);
  submit.addClickHandler(handler1).addClickHandler(handler2);

  hpanel.add(dateBox).add(hour).add(min).add(amPm).add(submit).add(dateTimeLabel);
  app.add(hpanel);
  return app;
}

function showDate(e) {
  var app = UiApp.getActiveApplication();
  var date = e.parameter.dateBox;
  var timeZone = date.toString().substr(25,6)+":00";  // SCRIPT TIME ZONE
  var dateMilli = date.getTime();  // GET MILLISECONDS OF DATE PICKED
  var hour = parseInt(e.parameter.hour);  // TURN INTO NUMBER
  var amPm = e.parameter.amPm;
  if (amPm == 'PM' && hour != 12) hour = hour + 12;  // ADD 12 HOURS TO PM HOURS, EXCEPT 12PM
  if (hour == 12 && amPm == 'AM') hour = 0;  // HANDLE 12AM HOUR CORRECTLY
  var hourMilli = hour * 3600000;  // # OF MILLISECONDS IN 1 HOUR 
  var minMilli = parseInt(e.parameter.minute) * 60000;  // # OF MILLISECONDS IN 1 MIN
  var milliTotal = dateMilli + hourMilli + minMilli; // ADD ALL MILLISECOND TOGETHER

  // PUT TOTAL MILLISECONDS INTO A NEW DATE AND CREATE CUSTOM FORMAT
  // THIS MIGHT NOT BE THE USER'S BROWSER TIME ZONE 
  var newDate = Utilities.formatDate(new Date(milliTotal), timeZone, 'MM/dd/yy hh:mm aaa');
  app.getElementById('dateTimeLabel').setText(newDate);
  app.getElementById('submit').setEnabled(true);
  return app;
} 
```

如果您需要在他们的浏览器时区中向用户显示日期+时间 - 您需要提前知道他们的时间并在脚本属性中进行设置。除非有办法以编程方式自动调整脚本时区......？

# php - YII：UTF8 编码不起作用？

> ID：15428480
> 
> 赞同：0
> 
> 时间：2013-03-15T09:13:51.530
> 
> 标签：php, encoding, utf-8, character-encoding, yii

我从一个网站上抓取了数据。该数据被放置在数据库中。当我打印数据时：

```
print $row->description; 
```

它看起来像这样：

```
â€¢ Shoot great photos in low light with bright lensâ€¢ 
```

我以前可以通过添加以下内容来解决此问题：

```
header('Content-Type: text/html; charset=UTF-8');
mb_internal_encoding('UTF-8'); 
```

我现在尝试将它添加到 YII 的 index.php 中，但输出没有改变。我也试过：

```
$decoded = utf8_decode($row->description);
print $decoded; 
```

但后来我得到：

```
�?� Shoot great photos in low light with bright lens�?� 
```

我怎样才能让它在 YII 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:33:11.930

尝试按照以下步骤操作

[如何设置 Unicode](http://www.yiiframework.com/wiki/16/how-to-set-up-unicode/)

[yii 中的 UTF8 字符和 htmlspecialchars 出错](https://stackoverflow.com/questions/10988123/error-with-utf8-characters-and-htmlspecialchars-in-yii)

# android - 将私钥嵌入Android中的应用程序代码

> ID：15428482
> 
> 赞同：2
> 
> 时间：2013-03-15T09:13:56.430
> 
> 标签：android, ssl, private-key

在我的应用程序中，我需要建立**SSL 连接**。目前，我有一个**BKS**类型的密钥库文件，但我不想将它作为文件存储在我的 apk 中。AFAIK 私钥可以作为字符串或其他内容嵌入应用程序代码中，然后可以对其进行混淆。所以我的问题是；

1) 真的有可能吗，是否比将其作为“mykey.bks”文件存储在我的资产文件夹中更安全？

2) 如何将我的 bks 文件的内容复制并粘贴到我的应用程序代码中，以及如何访问它以创建套接字工厂？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:24:20.287

**1)**真的有可能吗，是否比将其作为“mykey.bks”文件存储在我的资产文件夹中更安全？

答案是否定的，因为任何人都可以使用 APK**反编译器工具轻松地从 APK 中提取资产文件夹**

解决方案：

**一种）。**将您的`mykey.bks`文件放在安全服务器上

**乙）。** 通过在 C++ 或 C 中使用 getter 方法创建一个简单的类并在运行时返回服务器 URL，使用 JNI 保护服务器 url（避免从 apk 中提取文件 url）

**C）。** 当您需要在应用程序中使用时在运行时下载*“mykey.bks”*文件并在用户关闭您的应用程序时将其删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:40:03.507

如评论中所述，您希望将私钥保密，或者每个人都可以登录您的安全服务。（因此名称*private key*）

保持它真正私密的唯一方法是不将其传递给其他人。例如，您使用应用程序的 UI 提供私钥。如果此密钥不存在，则用户无法访问该服务！

在您目前的情况下，这似乎是不可能的，至少从它对您的问题的理解来看。因此，*第二个最佳解决方案*是密码保护密钥。但是随后您需要向您的用户提供密码，这与向您的用户提供密钥本身（上一个选项）完全相同......

更糟糕的选择是将密钥嵌入到您的应用程序/APK 中而不受密码保护。任何熟练的用户都可以使用与应用程序相同的算法来检索密钥：去混淆、下载、读取文件等。

The conclude, it seems silly that your service requires a private key, and your pass the key to (all? of) your users. So everyone is able to connect to the service... Why do you need the private key to access the service?

In the end the choice of the method to provide the key is yours!

* * *

**UPDATE** (was too long for a comment)

The general idea when using keys is, that the client has a (custom generated) [private/public key-pair](http://en.wikipedia.org/wiki/Public-key_cryptography). next, the public key part is send to the service. And the client is able to authenticate using the private key (by proving that the client has indeed the private key part).

In your situation, you need to provide a method to send public keys to your storage/service. The problem is that you need to somehow verify that the public key belongs to a client you want to grant access. This could be manually verified by administrators... Otherwise anyone is still able create nonsense subscriptions.

To be more concrete for your own application. It could include a SSL public/private key-pair generator. After a new key-pair is generated, the public key could be send to your service from the application.

The service need to get it authenticated, until that moment the client could connect to the service (using the non-authenticated key-pair) to a read-only (guest) subscription (for example).

Again, the choice of the actual implementation is yours, these are only pointers.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:06:17.727

This article is a good reference about storing private data in Android : [http://nelenkov.blogspot.fr/2012/05/storing-application-secrets-in-androids.html](http://nelenkov.blogspot.fr/2012/05/storing-application-secrets-in-androids.html)

# sql - 用于添加所有行数据的 Sql 查询，除了

> ID：15428485
> 
> 赞同：1
> 
> 时间：2013-03-15T09:14:07.587
> 
> 标签：sql, hive

我正在寻找一个对除一个之外的所有行执行求和运算的查询。通过下面的例子会更清楚..

假设我有一张这样的公司表

```
Company_name     Rev      order
  c1             100      1000
  c2             200      2000
  c3             300      1500 
```

现在查询应该插入到表中，如下所述：

```
 c1(rev)      c1(order)     sum of other(rev)          other(order)
  100          1000        500(sum of c2 and c3)      3500(sum of c2 and c3's order) 
```

这种情况的查询是什么？

我在想一个查询：

```
insert into table_name (c1_rev,c1_order,sum_rev,sum_order) 
select rev, order, sum(rev), sum(order) where Company_name=c1 .... 
```

但我被卡住了，因为我找不到其他两个的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:58:39.297

在 Hive 中，查询类似于：

```
select sq.cnn,sum(rev),sum(orders) from 
(select if(cn=='c1','c1','other') as cnn, rev,orders from test_cn) sq
group by sq.cnn; 
```

将生成 2 行：

> ```
> c1      100     1000
> other   500     3500 
> ```

与您的输出不完全匹配，但可以以您需要的形式提取。

要进行测试，请使用以下内容创建一个文本文件：

> ```
> % cat test_cn
> c1|100|1000
> c2|200|2000
> c3|300|3000 
> ```

在蜂巢中：

> ```
> hive> drop table if exists test_cn;
> hive> create table test_cn (cn string, rev int, orders int) row format delimited fields terminated by '|' stored as textfile;
> hive> select sq.cnn,sum(rev),sum(orders) from (select if(cn=='c1','c1','other') as cnn, rev,orders from test_cn)sq group by sq.cnn; 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:24:13.557

在 SQL Server 中，您可以执行以下操作来获取数据：

```
WITH totals AS
(SELECT SUM(rev) revSum, SUM(ORDER_) orderSum 
   FROM T)
SELECT company_name, 
       rev, 
       order_, 
       totals.revsum - rev AS otherRev, 
       totals.orderSum - order_ AS otherOrder
FROM  t, totals 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:30:42.503

试试这个查询：

```
SELECT Company_name ,
  Rev ,
  ORDER,
  (SELECT SUM(Rev ) FROM table_name k WHERE k.Company_name<>t.Company_name
  )"sum of other(rev)",
  (SELECT SUM(order ) FROM table_name k WHERE k.Company_name<>t.Company_name
  )"other(order)"
FROM table_name t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:20:31.260

没有 Group By 将是最好的解决方案，但 HIVE 目前不支持它，试试这个：

```
insert into table table_name 
select rev, order,  sumRev,  sumOrd 
from (
    select Company_name,rev, order, sum(rev)-rev as sumRev, sum(order) - order as sumOrd from base_table 
) a
where Company_name='c1' 
```

# grails - Grails 排序 asList() , sort()

> ID：15428487
> 
> 赞同：2
> 
> 时间：2013-03-15T09:14:34.020
> 
> 标签：grails, groovy

我想在这里对结果进行排序我的代码：

```
 def games = Game.withCriteria() { 
                    eq('season', currentSeason) 
                    eq('competition', competition) 
                    round { 
                            ge('roundNr', startRound.roundNr) 
                    } 
                    or { 
                            round { 
                                    le('roundNr', currentRound.roundNr) 
                            } 
                            gt('state', Game.STATE_NOT_STARTED) 
                    } 
                    order 'date', 'asc' 
            }     

      def sortGames = games.asList().sort(games.round.sorting) 
```

查询工作正常，我想对它们进行排序。

错误：

```
 Error 500: Executing action [recalcCompetitionTable] of controller [at.ligaportal.CompetitionController] caused exception: groovy.lang.MissingMethodException: No signature of method: java.util.ArrayList.sort() is applicable for argument types: (java.util.ArrayList) values: [[1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 2, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 14, 15, 16, 16, 16, 16, 16, 16, 16, 16]] Possible solutions: sort(), sort(java.util.Comparator), sort(groovy.lang.Closure), wait(), size(), size() 
    Servlet: grails 
    URI: /ligaportal/grails/competition/recalcCompetitionTable.dispatch 
    Exception Message: No signature of method: java.util.ArrayList.sort() is applicable for argument types: (java.util.ArrayList) values: [[1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 2, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 14, 15, 16, 16, 16, 16, 16, 16, 16, 16]] Possible solutions: sort(), sort(java.util.Comparator), sort(groovy.lang.Closure), wait(), size(), size() 
    Caused by: No signature of method: java.util.ArrayList.sort() is applicable for argument types: (java.util.ArrayList) values: [[1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 2, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 14, 15, 16, 16, 16, 16, 16, 16, 16, 16]] Possible solutions: sort(), sort(java.util.Comparator), sort(groovy.lang.Closure), wait(), size(), size() 
    Class: ApiAuthenticationFilter 
    At Line: [77] 
```

我的问题在哪里？

我通过 withCriteria() 方法获得了游戏，按日期排序。

所有游戏都有回合，现在我想通过回合的排序对它们进行排序。

5 场比赛有 1 轮比赛，所有比赛都有日期。

```
Round 1 = 18.09.2012 - 25.09.2012 (5 Games)
Round 2 = 26.09.2012 - 31.09.2012 (4 Games) and one Game plays later 
5.11.2012
Round 3 = 1.10.2012 - 7.10.2013

And my problem is, i sum up the round with a each and previous round.

Roudn 1 = 3,3,3,1,1 Points
Round 2 = 6,4,4,2,1 Points -> 1 Games later 
Round 3 = 9,7,7,4,3 Pounts
Round 2 = 6,4,4,4,1 (after game)
Round 4 = here i cant go back to round 4 -> the one game is lost! 
```

现在我想通过 game.round.sorting 订购游戏

这是我的问题。

谢谢！

解决方案

```
def bySorting = new Comparator() {
        int compare(a,b) { a.round.sorting <=> b.round.sorting }
    }
    games.sort(bySorting) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:29:42.883

由于您的标准结果已经排序，因此您不需要调用`sort()`。`games`

而是按日期排序：`order 'date', 'asc'`您可以在此处添加所需的属性。

如果您确实需要对结果进行排序，则必须将 an`Comparator`或 a传递`Closure`给`sort()`：

```
def sortGames = games.asList().sort{it.round.sorting} 
```

您应该提供更多信息。看起来像`sorting`-`ArrayList`应该如何`games`排序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:10:00.290

作为初始数据库查询的一部分，您应该能够通过`createAlias`在您的条件中使用按轮次排序：

```
def games = Game.withCriteria() {
                createAlias('round', 'rnd')

                eq('season', currentSeason) 
                eq('competition', competition) 
                ge('rnd.roundNr', startRound.roundNr) 
                or { 
                        le('rnd.roundNr', currentRound.roundNr) 
                        gt('state', Game.STATE_NOT_STARTED) 
                } 
                order 'rnd.sorting', 'asc' 
        } 
```

这样您就不需要在 Groovy 中对返回的列表进行任何排序。

* * *

但是，如果您确实想按价值对现有游戏列表进行排序，`round.sorting`那么您几乎可以使用正确的语法。你真正需要的是：

```
def sortGames = games.sort { it.round.sorting } 
```

Groovy 排序方法需要一个返回排序键的*闭包*，而您的尝试是传递所有游戏的所有排序键的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:23:06.333

从您的代码中不清楚是什么`games.round.sorting`。

但是请查看以下链接以了解有关在 groovy 中排序列表的更多信息：
[自定义列表排序](http://www.groovyexamples.org/2010/07/14/custom-sort-a-list/)
[Groovy OrderBy](http://mrhaki.blogspot.de/2009/12/groovy-goodness-using-orderby.html)

或谷歌`Groovy Comparator`查找其他示例和描述。

# java - 我的文本字段有验证表

> ID：15428490
> 
> 赞同：0
> 
> 时间：2013-03-15T09:14:38.720
> 
> 标签：java, swing, numbers, jtextfield, parseint

代码不检查文本字段是否为空 //该按钮计算您对 cat1、cat2、exam 的输入并给出平均值和总数

```
btnCompute_1 = new JButton("COMPUTE");
btnCompute_1.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
    String a=cat1.getText().toString();
    String b=textcat_2.getText().toString();
    String c=textExam.getText().toString();
    //String[] results=new String[2];
    int catMark1,catMark2,Average,Exam,Total;
    catMark1=Integer.parseInt(a);
    catMark2=Integer.parseInt(b);
    Exam=Integer.parseInt(c);
    Average=((catMark1+catMark2)/2);
    Total=(Average+Exam);
    System.out.println("aver:" +Average +" tot:" +Total +" cat1:" +catMark1+" cat2" +catMark2);

    textAverage.setText("Average:"  +String.format("%d",Average));
    textTotal.setText("Total:"  +String.format("%d",Total));
    if(cat1.getText().equals(null)){
       JOptionPane.showMessageDialog(null,"Cat 1 marks are missing", "Error", 
       JOptionPane.ERROR_MESSAGE);
       }
     }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:23:59.110

```
btnCompute_1 = new JButton("COMPUTE");
btnCompute_1.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
    String a=cat1.getText().toString();
    String b=textcat_2.getText().toString();
    String c=textExam.getText().toString();
   //String[] results=new String[2];
   int catMark1,catMark2,Average,Exam,Total;
   catMark1=Integer.parseInt(a);
   catMark2=Integer.parseInt(b);
   Exam=Integer.parseInt(c);
   Average=((catMark1+catMark2)/2);
   Total=(Average+Exam);
   System.out.println("aver:" +Average +" tot:" +Total +" cat1:" +catMark1+" cat2" +catMark2);

   textAverage.setText("Average:"  +String.format("%d",Average));
   textTotal.setText("Total:"  +String.format("%d",Total));
   if(cat1.getText != null && cat1.getText.length() > 0){ //check this 
        JOptionPane.showMessageDialog(null,"Cat 1 marks are missing", "Error",        JOptionPane.ERROR_MESSAGE);
   }
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:52:32.513

```
String a=cat1.getText(); // getText() is often a String; no need to toString it

if(a == null || a.length() == 0) {
    // error
}
else {
    try {
        catMark1=Integer.parseInt(a);
    }
    catch(NumberFormatException nfe) {
    {
        // could not parse
    }
} 
```

您可以清理订单（这仅用于说明目的）

# css - 溢出无助于隐藏流动的链接

> ID：15428493
> 
> 赞同：1
> 
> 时间：2013-03-15T09:14:46.023
> 
> 标签：css

在这里，我有一个运行良好的 jquery 菜单。但是我给它一个 400px 的固定宽度，所以如果我向主 ul 添加超过一定数量的链接，它们将在下一行流动，这是绝对不希望的。

我试图`overflow:hidden`以`line-height`某种方式克服这个问题，但无论如何都没有结果。

这是菜单：http: [//jsfiddle.net/b5Wdc/](http://jsfiddle.net/b5Wdc/)

如您所见，红色链接在下一行流动，这就是问题所在。

在这种情况下，我应该怎么写才能隐藏溢出的链接？

总之谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:27:16.157

从我们在问题评论中的对话来看，您的菜单似乎是完全固定的，任何“额外”项目都应始终隐藏，并且不需要动态显示或包装。因此，您可以使用 CSS 隐藏所有您知道不适合的菜单项。由于菜单项的宽度为`99px`并且`400px`您知道您只会显示 4 个项目。这个纯粹的 CSS 将隐藏其余部分：

```
.HeadMenu #nav > li:nth-child(n+5) {
    display:none;
} 
```

然而，它至少需要 IE8 才能[`nth-child`](http://caniuse.com/#search=nth-child)支持 CSS 选择器。

由于您在问题中提到了 jQuery，如果您需要支持 IE8，您可以在 JavaScript 中完成相同的操作：

```
$('.HeadMenu #nav > li:nth-child(n+5)').hide() 
```

或者，保留 CSS 解决方案（因为它更简洁）并使用[selectivizr](http://selectivizr.com/)`nth-child`为 IE8带来选择器支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:22:48.317

如果您将样式更改为以下样式，我认为它可能会起作用：

```
.HeadMenu .HeadMenuMain
{
    display:block;
    position:relative;
    margin:0;
    width:400px;
    padding:0;
    direction:rtl;
    height:40px;
    white-space:nowrap; //will make elements stay on one row
}

.HeadMenu .HeadMenuMain li
{
    display:inline-block; //will make elements stay on one row with the nowrap
    list-style:none;
    position:relative;
} 
```

[http://jsfiddle.net/b5Wdc/2](http://jsfiddle.net/b5Wdc/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:20:10.083

在导航菜单中添加一个溢出：隐藏就可以了：

```
.HeadMenu #nav {
overflow: hidden;
} 
```

# c++ - 在 Qt 应用程序中单击按钮时在外部浏览器上打开 url

> ID：15428495
> 
> 赞同：5
> 
> 时间：2013-03-15T09:14:55.307
> 
> 标签：c++, qt4

我的应用程序应该包含一个按钮，当您单击它时应该打开一个外部浏览器这是我的代码

```
void Logindialog::on_inscriptionPushButton_clicked()
{
  QDesktopServices::openUrl(QUrl("http://www.google.com", QUrl::TolerantMode));
} 
```

但是当我编译时，我得到了这个错误列表

*   错误：嵌套名称说明符中使用的类型“QUrl”不完整
*   错误：无效使用不完整类型'class QUrl'
*   错误：“类 QUrl”的前向声明

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T09:21:30.890

您忘记包含 QUrl，因为只存在前向声明。

在文件顶部使用`#include <QUrl>`或使用。`#include <QtCore>`

# regex - 正则表达式替换标签之间的文本

> ID：15428498
> 
> 赞同：0
> 
> 时间：2013-03-15T09:15:10.817
> 
> 标签：regex, tags

如何匹配这些标签之间的文本？

```
<!-- |IFNOT:ARCHIVE_PAGE| -->
some text
<!-- |END:IF| --> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T13:02:18.667

```
preg_replace("/<body>([\s\S]*.*)<\/body>/",$replace,$origional); 
```

这将替换正文标签之间的全部内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:29:12.323

这不是很推荐，但是

```
<!-- \|IFNOT:ARCHIVE_PAGE\| -->((\s|.)*?)<!-- \|END:IF\| --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:18:42.357

试试这个正则表达式：

```
(?<=<!-- \|IFNOT:ARCHIVE_PAGE\| -->)(\s|.)*?(?=<!-- \|END:IF\| -->) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T09:30:58.537

使用 Perl，这里唯一的特殊字符是管道 '|'。因此，以下正则表达式将匹配（并由于捕获括号 (.+) 而返回）您正在查找的文本：

```
{<!-- \|IFNOT:ARCHIVE_PAGE\| -->\s*(.+)\s*<!-- \|END:IF\| -->}s 
```

请注意，'s' 修饰符让正则表达式匹配多行，捕获括号前后的 \s* 意味着空格（包括换行符）将不包含在返回的匹配中。

# windows - SendMessage 最大接收者

> ID：15428501
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:15:25.040
> 
> 标签：windows, delphi, sendmessage

我有一个主应用程序和 4 个客户端应用程序，我使用`SendMessage`.

我可以毫无问题地使用任何三个客户端应用程序，但是一旦添加第四个，我就会遇到访问冲突和 stackoverflow 错误。

`SendMessage`我的问题：可以发送到单个应用程序的应用程序数量是否有上限？

我正在使用 Delphi XE2 和 Windows 8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:19:27.187

> 我的问题是，可以使用 SendMessage 发送到单个应用程序的应用程序数量是否有上限？

不，那里没有。您的问题与发送消息的进程数无关。

处理消息时访问冲突的一种可能解释是您的消息包含指向内存的指针，该指针仅在发送进程的地址空间中有效。但这是一个疯狂的猜测，因为我们没有代码。

# jasper-reports - JasperReports 表达式评估

> ID：15428507
> 
> 赞同：0
> 
> 时间：2013-03-15T09:15:38.150
> 
> 标签：jasper-reports, expression

嗨，我正在使用 jasper 报告 5.0.0。

jrxml 中的以下代码引发异常

```
new java.text.DecimalFormat("#,###").format($P(xyz)) 
```

引发表达式评估异常。

当我将其更改为

```
new java.text.DecimalFormat("#,###").format(Double.valueOf($P(xyz))), 
```

异常消失了。为什么？？任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:55:21.943

在报表中，输入参数的参数值表达式必须不同于您通过输入控件传递的输入控件值。

# jsp - 在 SpringMVC 和 glassfish 中找不到 jsp

> ID：15428511
> 
> 赞同：0
> 
> 时间：2013-03-15T09:15:48.830
> 
> 标签：jsp, spring-mvc, glassfish-3

我正在做项目。我做了一些简单的更改，现在我收到以下错误。

```
SEVERE: PWC6117: File "D%3A%5CProjects%5CSampradan%5CGV+UI%5Cui%5CGVUI%5Cbuild%5Cweb%5Cjsp%5Cbarcode%5Csearch.jsp" not found 
```

所以。我从 jsp 中删除了所有代码，但仍然出现错误。

我的 jsp 位于 /jsp/module/search.jsp

我的控制器

```
@RequestMapping(value = "/search", method = RequestMethod.GET)
    public ModelAndView searchBCGenRequest(HttpServletRequest hsr1, HttpServletResponse hsr2, HttpSession session) {

        ModelAndView mv = new ModelAndView();
        mv.setViewName("/module/search");
        System.out.println(mv.getViewName());
        return mv;
    } 
```

它正在打印 /module/search 但在它给我以下错误之后。

```
SEVERE: PWC6117: File "D%3A%5CProjects%5CSampradan%5CGV+UI%5Cui%5CGVUI%5Cbuild%5Cweb%5Cjsp%5Cbarcode%5Csearch.jsp" not found 
```

# ibm-mq - 自动清除所有连接到队列的应用程序的方法

> ID：15428512
> 
> 赞同：1
> 
> 时间：2013-03-15T09:15:48.957
> 
> 标签：ibm-mq

我们有一个环境，其中 MQ 充当
网站和 Micro Focus 之间的接口。有时，消息会卡在队列中，
从而阻塞该特定队列上的所有通信。如果
队列深度大大增加，
队列管理器中的所有通信都会停止。

当我们检查队列的状态时，我们看到那里存在微焦点过程。

有没有办法自动清除所有连接到队列的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:05:10.547

我认为不可能关闭给定队列上的应用程序句柄，但您可以有一个脚本，对队列管理器运行几个 MQSC 命令，首先使用[DISPLAY CONN](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaj.doc/sc11950_.htm)命令获取连接标识符，然后使用关闭连接[停止](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaj.doc/sc13370_.htm)连接命令。然后，您可以在队列上设置一个触发器，一旦达到某个队列深度，该触发器就会执行该脚本。

# ios - 下载许多大文件时的iOS内存警告

> ID：15428515
> 
> 赞同：2
> 
> 时间：2013-03-15T09:16:03.787
> 
> 标签：ios, memory, download, warnings

我使用以下代码从服务器下载许多文件。其中一些文件是视频文件 (>60Mo)。

该函数在循环中调用。它适用于小文件...

当我下载太多（取决于）大文件时，我会收到内存警告，然后应用程序崩溃。

注意：该项目是ARC

```
- (bool) copyWebFile:(NSString *)url toFile:(NSString *)toFile ;
{
  NSData *data=[NSData dataWithContentsOfURL:[NSURL URLWithString:url]] ;
  if (data)
  {
    NSError *error ;
    if ([[NSFileManager defaultManager] fileExistsAtPath:toFile])
    {
      NSLog(@"Existant %@", toFile) ;
      [[NSFileManager defaultManager] removeItemAtPath:toFile error:nil] ;
    }
    if ([data writeToFile:toFile options:NSDataWritingAtomic error:&error]==NO)
    {
      NSLog(@"@Error creating file-%@ \n", toFile) ;
      NSLog(@"@Error description-%@ \n", [error localizedDescription]) ;
      NSLog(@"@Error suggestion-%@ \n", [error localizedRecoverySuggestion]) ;
      NSLog(@"Error reason-%@", [error localizedFailureReason]) ;
    }
    else
    {
      return(true) ;
    }
  }
  return(false) ;
} 
```

在我的应用程序委托中，我添加了以下代码：没有区别。

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application
{
  [[NSURLCache sharedURLCache] removeAllCachedResponses] ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:49:30.140

您应该将文件直接写入磁盘，而不是将整个文件保存在内存中。一种简单的方法是为接收到的数据创建委托`NSURLConnection`并写入。

这个问题通过代码示例回答了如何做到这一点：[How to download files directly to disk on the iPhone os?](https://stackoverflow.com/questions/2868549/how-to-download-files-directly-to-disk-on-the-iphone-os)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:06:29.847

使用@autoreleasepool 并尝试这样..

```
- (bool) copyWebFile:(NSString *)url toFile:(NSString *)toFile ;
    {
        @autoreleasepool
        {
            NSData *data=[NSData dataWithContentsOfURL:[NSURL URLWithString:url]] ;
            if (data)
            {
                NSError *error ;
                if ([[NSFileManager defaultManager] fileExistsAtPath:toFile])
                {
                    NSLog(@"Existant %@", toFile) ;
                    [[NSFileManager defaultManager] removeItemAtPath:toFile error:nil] ;
                }
                if ([data writeToFile:toFile options:NSDataWritingAtomic error:&error]==NO)
                {
                    NSLog(@"@Error creating file-%@ \n", toFile) ;
                    NSLog(@"@Error description-%@ \n", [error localizedDescription]) ;
                    NSLog(@"@Error suggestion-%@ \n", [error localizedRecoverySuggestion]) ;
                    NSLog(@"Error reason-%@", [error localizedFailureReason]) ;
                }
                else
                {
                    return(true) ;
                }
            }
            return(false) ;
        }
    } 
```

# symfony - Symfony2 继承了多个 bundle

> ID：15428516
> 
> 赞同：3
> 
> 时间：2013-03-15T09:16:07.313
> 
> 标签：symfony, bundle

如何继承多个捆绑包？

我到处搜索，但没有:(。

继承每个人可能都知道的捆绑包的代码

```
public function getParent()
{
    return 'FOSUserBundle';
} 
```

现在我也想继承`KnpKnpPaginatorBundle`，所以我可以根据`sliding.html.twig`自己的个人需要进行更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:07:13.433

您只能使用 getParent() 继承 1 个捆绑包。

可能的解决方案：

*   添加另一个捆绑包以继承 KnpPaginator
*   [使用覆盖包模板](http://symfony.com/doc/current/book/templating.html#overriding-bundle-templates)更改sliding.html.twig

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:03:36.463

Symfony 不允许多重继承

# jquery - fullcalendar 删除标题仍然显示小单元格

> ID：15428524
> 
> 赞同：5
> 
> 时间：2013-03-15T09:16:28.143
> 
> 标签：jquery, fullcalendar

我正在尝试在我的全日历插件中删除我的日视图中的标题。使用

```
columnFormat: {day: false}, 
```

删除文本，但仍然留下一个小的空单元格！我怎样才能删除这个？

[图片 http://img20.imageshack.us/img20/1994/fullcal.png](http://img20.imageshack.us/img20/1994/fullcal.png)

提前致谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-08-31T12:15:46.440

您可以像这样通过配置隐藏标题

标头：假

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-01-10T17:24:47.453

您可以像这样添加配置。

```
headerToolbar: false 
```

参考[这个](https://fullcalendar.io/docs/headerToolbar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T21:26:56.607

Using jQuery:

```
$('.fc-toolbar').remove(); 
```

# jquery - 如何同时使用两个 jquery 库（1.4.2 & 1.6.2）？

> ID：15428525
> 
> 赞同：0
> 
> 时间：2013-03-15T09:16:28.647
> 
> 标签：jquery, jquery-plugins, lightbox, struts2-jquery

在一个 jsp 页面中，我使用了两个 jQuery 库（1.6.2 和 1.4.2），用于 struts2-jquery-plugin 的 jquery-1.6.2.js 和用于 jQuery Lightbox 的 jQuery 1.4.2。问题是当我同时使用我的灯箱时它不起作用，当我删除 jquery-1.4.2.js 然后我的其他东西不起作用但灯箱工作正常。如何避免这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:18:43.843

1.  下载~~最新版本的[jQuery 1.9.1](http://jquery.com/download/)~~ [jQuery 1.8.3](http://code.jquery.com/jquery-1.8.3.min.js)
2.  下载最新版本的[struts2-jquery](https://code.google.com/p/struts2-jquery/downloads/list)
3.  下载最新版本的[灯箱](http://lokeshdhakar.com/projects/lightbox2/)

享受 ：）。

`jQuery 1.8.3 library`注意：如果他们不在，他们应该都可以工作`1.9.1`，要下载旧的 jquery 库，请参阅[此链接](http://jquery.com/download/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:28:24.333

如果您无法更新其他依赖库，这是官方方法：

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<div id="log">
  <h3>Before $.noConflict(true)</h3>
</div>
<script src="http://code.jquery.com/jquery-1.6.2.js"></script>

<script>
var $log = $( "#log" );

$log.append( "2nd loaded jQuery version ($): " + $.fn.jquery + "<br>" );

/*
Restore globally scoped jQuery variables to the first version loaded
(the newer version)
*/
jq162 = jQuery.noConflict(true);

$log.append( "<h3>After $.noConflict(true)</h3>" );
$log.append( "1st loaded jQuery version ($): " + $.fn.jquery + "<br>" );
$log.append( "2nd loaded jQuery version (jq162): " + jq162.fn.jquery + "<br>" );
</script>

</body>
</html> 
```

# c - fread 不读取多行

> ID：15428534
> 
> 赞同：4
> 
> 时间：2013-03-15T09:16:46.123
> 
> 标签：c, file-read

我正在尝试从行中有一些数字的 .txt 文件中读取。

看起来是这样的。

例子.txt

```
123
456
789
555 
```

我将其作为二进制文件打开以进行读取，希望逐行读取此文件，因此我知道每行中有 4 个字符（3 个数字和 1 个换行符 '\n'）。

我正在这样做：

```
FILE * fp;

int page_size=4;
size_t read=0;
char * buffer = (char *)malloc((page_size+1)*sizeof(char));
fp = fopen("example.txt", "rb"); //open the file for binary input

//loop through the file reading a page at a time
do {
    read = fread(buffer,sizeof(char),page_size, fp); //issue the read call

    if(feof(fp)!=0) 
      read=0;

    if (read > 0) //if return value is > 0
    {   
        if (read < page_size) //if fewer bytes than requested were returned...
        {
            //fill the remainder of the buffer with zeroes
            memset(buffer + read, 0, page_size - read);
        }

        buffer[page_size]='\0';
        printf("|%s|\n",buffer);
    }

}
while(read == page_size); //end when a read returned fewer items

fclose(fp); //close the file 
```

在 printf 中，预计这个结果

```
|123
|
|456
|
|789
|
|555
| 
```

但我采取的实际结果是：

```
|123
|
456|
|
78|
|9
6|
|66
| 
```

所以看起来在前 2 个 fread 之后它只读取了 2 个数字，并且换行符完全出错了。

那么这里的 fread 有什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:34:29.907

您可以使用以下内容逐行读取文件。

```
 FILE * fp;
   char * line = NULL;
   size_t len = 0;
   ssize_t read;

   while ((read = getline(&line, &len, fp)) != -1) {
       printf("Line length: %zd :\n", read);
       printf("Line text: %s", line);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:53:04.000

```
FILE * fp;
int page_size=4;
size_t read=0;
char * buffer = (char *)malloc((page_size+1)*sizeof(char));
fp = fopen("example.txt", "rb"); //open the file for binary input

//loop through the file reading a page at a time
do
{
read = fread(buffer,sizeof(char),page_size, fp); //issue the read call

if (read > 0) //if return value is > 0
{
    buffer[page_size]='\0';
    printf("|%s|\n",buffer);
}

}
while(read == page_size); //end when a read returned fewer items

fclose(fp); 
```

您可以尝试使用此代码，此代码运行良好。

我尝试了您的代码，并且在我的系统上也运行良好。

# iphone - 如果使用全屏，则在 MoviePlayer 中看不到按钮

> ID：15428535
> 
> 赞同：1
> 
> 时间：2013-03-15T09:16:53.450
> 
> 标签：iphone, ios, objective-c, ipad, mpmovieplayercontroller

以下是我用来播放电影的代码：

```
playerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:theURL];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myMovieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:[playerViewController moviePlayer]];

float screenWidth = self.view.frame.size.width;
float screenHeight = self.view.frame.size.height;
[playerViewController.view setFrame:CGRectMake(0, 0, screenWidth, screenHeight)];
[self.view addSubview:playerViewController.view];
[self.view setUserInteractionEnabled:YES];

//---play movie---
player = [playerViewController moviePlayer];
[player setControlStyle:MPMovieControlStyleNone];
[player setFullscreen:TRUE];
[player play];

skipButton = [UIButton buttonWithType:UIButtonTypeCustom];
[skipButton setTitle:@"Skip" forState:UIControlStateNormal];
skipButton.frame = CGRectMake(0, 0, 150, 50);

[skipButton setCenter:CGPointMake(screenWidth - 30 - skipButton.frame.size.width, 100)];
[skipButton addTarget:self action:@selector(skipMovie) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:skipButton]; 
```

但是，我在 iPad1 上遇到了一些问题。如果我不使用该`setFullScreen`方法，即使我设置了 Rect (1024x768)，电影也不会以全屏模式播放。但如果我设置这些，电影会以全屏模式播放，但我的@skipButton 不可见。

如果我使用：

```
 [self.view addSubview:playerViewController.view]; 
```

后

```
[player play]; 
```

第一个问题发生了。该代码在 iPad2 中正常工作，即使没有`setFullScreen`.

有没有人有任何想法？

```
[playerViewController.view bringSubviewToFront: skipButton] 
```

没有任何改变！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:28:00.037

我认为您可以使用此方法解决此问题

```
[playerViewController.view bringSubviewToFront: skipButton]; 
```

请仅**在**您的**电影播放器​​加载电影后****调用**此**函数**。

# android - 首先点击 TableRow - 响应非常慢

> ID：15428536
> 
> 赞同：0
> 
> 时间：2013-03-15T09:16:57.117
> 
> 标签：android, performance, tablelayout, tablerow

我有这个奇怪的问题，无法弄清楚。我有一个`TableLayout`with `TableRow's`，其中有`onClickListener`. 我想在单击时突出显示 tableRow ...除了第一次单击时响应非常慢之外，一切似乎都很好。当我单击 TableRow 时，突出显示 TableRow 大约需要 8 秒，但第一次需要很长时间。当我单击其他行然后返回之前突出显示的行时，响应是“立即”。我应该提到该表包含 30 行和 13 列。当限制为几行和几列时，响应时间会减少。

为什么第一次点击需要这么多时间，而第二次点击却没有？

这是我的`onClick`方法：

```
@Override
public void onClick(View v)
{       
    if (v instanceof TableRow){
        long startTime = System.currentTimeMillis();            
        TableRow row = (TableRow) v;
        if (selectedRow != null){
            selectedRow.setBackgroundColor(Color.TRANSPARENT);              
        }
        row.setBackgroundColor(getResources().getColor(R.color.selected_row));          
        selectedRow = row;          
        long estimatedTime = System.currentTimeMillis() - startTime;
        Log.v(TEST_TAG, "Time elapsed when clicked:" + estimatedTime);      
    }       
} 
```

它在 OnClick 方法中花费几毫秒，并在几秒钟内绘制背景颜色以显示。

# ios - 了解 MKMapView 在 iOS 6 中是否显示地图区域或黄色网格

> ID：15428538
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:17:03.263
> 
> 标签：ios, objective-c, ios6, mkmapview

`MKMapView`当应用程序没有互联网连接时，有什么方法可以知道何时显示黄色网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:23:01.920

您可以注册委托通知并实施`mapViewDidFailLoadingMap:withError:`- 请参阅：http: [//developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate /mapViewDidFailLoadingMap:withError](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapViewDidFailLoadingMap:withError)：

在相关说明中，您还可以使用[可达性框架](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)来检查您的应用程序是否具有互联网连接。

# c# - 为什么我在列表框中得到“System.Data.DataRowView”而不是实际值？

> ID：15428542
> 
> 赞同：12
> 
> 时间：2013-03-15T09:17:30.647
> 
> 标签：c#, mysql, winforms

我希望有人能帮忙。但是每当我运行我的代码并尝试查看`highscore`我在列表框中返回的所有内容时都是`System.Data.DataRowView`.

谁能明白为什么？

代码：

```
MySqlConnection myConn = new MySqlConnection(connStr);

string sqlStr = "SELECT CONCAT(Name, ' ', Score) as NameAndScore " + 
                "FROM highscore ORDER BY Score DESC";

MySqlDataAdapter dAdapter = new MySqlDataAdapter(sqlStr, myConn);
DataTable dTable = new DataTable();
dAdapter.Fill(dTable);
dAdapter.Dispose();
lstNames.DisplayMember = "NameAndScore";
lstNames.DataSource = dTable; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-15T16:38:11.553

我总是要处理这个问题，即使我设置了列表框的`DisplayMember`和`ValueMembers`。

您当前的代码是正确的并且应该可以工作，如果您需要访问任何列的当前选定项目值，`dTable`您可以让他们这样做：

```
DataRowView drv = (DataRowView)lstNames.SelectedItem;
String valueOfItem = drv["NameAndScore"].ToString(); 
```

我喜欢获得完整`DataRowView`的内容是，如果您有更多列，您仍然可以访问它们的值并使用它们做任何您需要的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T10:13:31.143

以下代码应该可以工作：

```
DataSet dSet = new DataSet();
dAdapter.Fill(dSet);

lstNames.DisplayMember = "NameAndScore";
lstNames.ValueMember = "NameAndScore";
lstNames.DataSource = dSet.Tables[0]; 
```

如果它不起作用，请更新您的问题并向我们提供有关实际返回的列和值的一些信息`dSet.Tables[0]`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-15T09:22:10.940

设置您的[`lstNames.DisplayMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)和[`lstNames.ValueMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)字段。

> 获取或设置要为此 ListControl 显示的属性。

* * *

> 获取或设置要用作 ListControl 中项的实际值的属性的路径。

这应该可以解决您的问题..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T09:27:31.173

就像我在评论中所说，请将 lstNames.DataBind() 添加到您的代码中。

```
MySqlConnection myConn = new MySqlConnection(connStr);

string sqlStr = "SELECT CONCAT(Name, ' ', Score) as NameAndScore " + 
                "FROM highscore ORDER BY Score DESC";

MySqlDataAdapter dAdapter = new MySqlDataAdapter(sqlStr, myConn);
DataTable dTable = new DataTable();
dAdapter.Fill(dTable);
dAdapter.Dispose();
lstNames.DisplayMember = "NameAndScore";
lstNames.ValueMember = "NameAndScore";
lstNames.DataSource = dTable; 
```

编辑：

你可以试试这个：

```
MySqlConnection myConn = new MySqlConnection(connStr);

    string sqlStr = "SELECT CONCAT(Name, ' ', Score) as NameAndScore " + 
                    "FROM highscore ORDER BY Score DESC";

  myConn .Open();

  SqlCommand cmd = new SqlCommand(sqlStr, SQLConnection1);

      SqlDataReader rd = cmd.ExecuteReader();
      while (rd.Read())
      {
        lstNames.Items.Add(rd[0]);
      }
      rd.Close();
      rd.Dispose();
      myConn.Close(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-11T16:10:31.963

只有调用的顺序是错误的。首先设置 ，`DataSource`然后才设置显示成员：

```
lstNames.DataSource = dTable;
lstNames.DisplayMember = "NameAndScore"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-26T22:39:44.653

我知道这是一个老问题。只是认为为已经给出的答案添加更新可能会很好。我一直在寻找相同问题的解决方案。我意识到这是您放置这 3 行代码的顺序

```
lstNames.DisplayMember = "NameAndScore";
lstNames.ValueMember = "NameAndScore";
lstNames.DataSource = dTable; 
```

它应该首先使用数据源。然后是 value 成员，然后是 display 成员如下：

```
lstNames.DataSource = dTable;
lstNames.ValueMember = "NameAndScore";
lstNames.DisplayMember = "NameAndScore"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-16T07:13:07.953

如果您希望列表框显示来自数据源特定列的值，请使用 lstNames.DataTextField = "SpecialColumnName";

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-24T15:47:16.593

我用 ：

```
foreach (DataGridViewRow row in _dataGridView.SelectedRows)
{
    var rowObject = row.DataBoundItem as DataRowView;
    var array = rowObject.Row.ItemArray;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-08T19:46:54.650

只需确保您输入的字段名称与数据源中的字段名称相同，换句话说，它区分大小写

所以：Me.GridLookUpEdit1.Properties.DisplayMember = " **cur_code** " 与 Me.GridLookUpEdit1.Properties.DisplayMember = " **CUR_code** "不同

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-01T14:31:38.963

如果您复制对象而不是作为新对象放置，它将执行此操作。尝试删除对象并将其放回原处。我有同样的问题，这就是我所做的。不知道为什么它有效，但它确实有效。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-12T18:47:01.700

我有类似的问题，从填充的列表框中选择单个值并获取`System.Data.DataRowView`. 我能够通过将所选项目转换为`System.Data.DataRowView`然后访问 Row 和 ItemArray 子类来解决它：

```
var si = ListBox1.SelectedItem; 
string val = ((System.Data.DataRowView)si).Row.ItemArray[0].ToString(); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-02-15T11:27:50.267

有时可能导致它拼写错误的显示成员变量名。

# push - 是否可以从 Android 设备订阅 CloudAMQP rabbitmq 服务？

> ID：15428550
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:17:53.580
> 
> 标签：push, rabbitmq, cloudamqp

是否可以通过 CloudAMQP 从 Appfog 等其他云解决方案将消息发布到 rabbitmq 服务并从互联网（而不是在云内部）使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:46:55.503

是的，您可以从任何地方连接！

# jquery - 在周视图全日历中显示事件

> ID：15428552
> 
> 赞同：1
> 
> 时间：2013-03-15T09:17:53.910
> 
> 标签：jquery, jquery-ui, fullcalendar

![](../Images/ca9cada8859ef094a08711ae5106d8f0.png)

这是在全日历中显示事件。

但来到周查看事件 r 未在事件时间显示。

这里的测试活动时间是上午 10:00 到下午 12:00。但该事件显示在顶层。

```
function DisplayCalendar() {
    $.ajax({
        type: "POST",
        contentType: "application/json",
        data: "{}",
        url: "Events.aspx/GetEvents",
        dataType: "json",
        success: function(data) {
            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();
            $('div[id*=calendar]').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                select: selectDate,
                eventClick: updateEvent,
                editable: true,
                droppable: false,
                draggable: false,
                disableDragging: true,
                selectable: true,
                selectHelper: true,
                eventTextColor: 'Yellow',
                eventBackgroundColor: 'purple',
                eventRender: function(event, element) {
                    var view = $('#calendar').fullCalendar('getView');
                    if (view.name == 'agendaWeek') {
                        //alert(view.visStart);
                    }
                    //return false;
                },
                events: $.map(data.d, function(item, i) {
                    var sdate = item.StartDate;
                    var sdatesplit = sdate.split("/");
                    var sm = sdatesplit[0];
                    var sd = sdatesplit[1];
                    var sy = sdatesplit[2];
                    var syearsplit = sy.split(" ");

                    var edate = item.EndDate;
                    var edatesplit = edate.split("/");
                    var em = edatesplit[0];
                    var ed = edatesplit[1];
                    var ey = edatesplit[2];
                    var eyearsplit = ey.split(" ");
                    var event = new Object();
                    event.id = item.EventID;
                    event.start = new Date(syearsplit[0], sm, sd, 16, 0);
                    event.end = new Date(eyearsplit[0], em, ed, 18, 0);
                    event.title = item.EventName;
                    event.allDay = true;
                    return event;
                    //event.id= item.EventID;
                    //event.title= item.EventName;
                    //event.start= new Date(y, m, d, 16, 0);
                    //event.end= new Date(y, m, d, 16, 30);
                    //event.allDay= true;
                    //return event;
                })
            });
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            debugger;
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:05:59.593

Fullcalendar 在顶部显示事件，因为您为事件设置了“allDay”属性：

```
event.allDay = true; 
```

检查[allDay 属性的完整日历文档](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)：

> 此外，在议程视图中，确定它是否显示在“全天”部分。

# svn - 如何下载 Google svn 中可用的项目

> ID：15428554
> 
> 赞同：3
> 
> 时间：2013-03-15T09:18:01.353
> 
> 标签：svn, google-code

我想把[这个](https://project4example3.googlecode.com/svn/trunk/)项目下载到我的 eclipse indigo 中。这个怎么做。

我试着去这个链接，我可以看到这个项目，但是很难下载它。

如何使用 eclipse indigo 下载它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:20:12.303

为 Eclipse 安装 SVN 插件并进行结帐或只是

`svn checkout http://project4example3.googlecode.com/svn/trunk/ project4example3-read-only`

在像谷歌代码建议的命令行中。

# c# - 选择包含类别的列表

> ID：15428561
> 
> 赞同：1
> 
> 时间：2013-03-15T09:18:29.020
> 
> 标签：c#, asp.net-mvc

这可能看起来相当简单，但我如何创建一个分为多个类别的选择列表？

例如，也许我想要一个允许学生选择大学课程的选择列表。我可能想按教员划分它们，以便根据教员显示课程。用户应该不能从列表中选择教师。

就像是：

（科学）： - 物理 - 化学

（人文）： - 地理 - 哲学

（艺术）： - 戏剧 - 音乐

唯一可接受的选择选项是“物理”、“化学”、“地理”、“哲学”、“戏剧”和“音乐”，但教师姓名也出现在列表中，只是不是选择选项.

SelectListItem 中似乎没有“子”元素，所以我想知道如何处理这个问题，我在网上根本找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:45:36.240

我相信你正在寻找这样的东西：[http ://weblogs.asp.net/raduenuca/archive/2011/02/26/asp-net-mvc-extending-the-dropdownlist-to-show-the-items-按类别分组.aspx](http://weblogs.asp.net/raduenuca/archive/2011/02/26/asp-net-mvc-extending-the-dropdownlist-to-show-the-items-grouped-by-a-category.aspx)

# c# - 在不聚焦窗口的情况下捕获键

> ID：15428566
> 
> 赞同：5
> 
> 时间：2013-03-15T09:18:41.263
> 
> 标签：c#, keyboard-hook, global-hotkey

我有一个应用程序，它总是检查是否按下了类似`F12`的键。它不需要集中在我的应用程序的主窗口中。我试过这段代码：

```
public int a = 1;
    // DLL libraries used to manage hotkeys
    [DllImport("user32.dll")]
    public static extern bool RegisterHotKey(IntPtr hWnd, int id, int fsModifiers, int vlc);
    [DllImport("user32.dll")]
    public static extern bool UnregisterHotKey(IntPtr hWnd, int id);

    const int MYACTION_HOTKEY_ID = 1;

    public Form1()
    {
        InitializeComponent();
        // Modifier keys codes: Alt = 1, Ctrl = 2, Shift = 4, Win = 8
        // Compute the addition of each combination of the keys you want to be pressed
        // ALT+CTRL = 1 + 2 = 3 , CTRL+SHIFT = 2 + 4 = 6...
        RegisterHotKey(this.Handle, MYACTION_HOTKEY_ID, 0, (int) Keys.F12);
    }

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == 0x0312 && m.WParam.ToInt32() == MYACTION_HOTKEY_ID)
        {

            a++;
            MessageBox.Show(a.ToString());
        }
        base.WndProc(ref m);
    } 
```

我把 0 放到这一行`RegisterHotKey(this.Handle, MYACTION_HOTKEY_ID, 0, (int) Keys.F12);`，这样只有`F12`按下它才会捕获。

但它没有用。我该如何解决这个问题？

在这里，我无法理解一些行，例如：

```
const int MYACTION_HOTKEY_ID = 1;
m.Msg == 0x0312 && m.WParam.ToInt32() == MYACTION_HOTKEY_ID
base.WndProc(ref m); 
```

谁能帮我理解这些线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:21:56.933

> 但它没有用。我该如何解决这个问题？

你是什​​么意思“它没有工作”？您问题中的代码对我来说看起来是正确的。

它可能不起作用的唯一原因是该[`RegisterHotKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309.aspx)函数返回错误并且您没有检查它。要使其工作，您需要将该[`SetLastError`属性](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.setlasterror.aspx)添加到其声明中，这会导致运行时缓存它设置的 Win32 错误代码。`false`完成此操作后，您可以通过调用[`GetLastWin32Error`函数](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getlastwin32error.aspx)来检查错误代码（如果函数返回） 。我建议使用此函数的结果来生成并抛出[`Win32Exception`](http://msdn.microsoft.com/en-us/library/system.componentmodel.win32exception.aspx).

修改您的声明`RegisterHotKey`如下：

```
[DllImport("user32.dll", PreserveSig = false)]
public static extern bool RegisterHotKey(IntPtr hWnd,
                                         int id,
                                         uint fsModifiers,
                                         Keys key); 
```

您对函数的调用如下：

```
if (!RegisterHotKey(this.Handle, MYACTION_HOTKEY_ID, 0, Keys.F12))
{
   throw new Win32Exception(Marshal.GetLastWin32Error());
} 
```

完成后，我怀疑您会看到抛出异常并显示错误消息：

> 热键已注册

好吧，这使得调试问题变得更加简单，不是吗！您可能需要选择不同的热键，因为`RegisterHotKey`函数文档明确告诉我们：

> 该`F12`键始终保留供调试器使用，因此不应将其注册为热键。即使您不调试应用程序，`F12`它也会保留，以防内核模式调试器或即时调试器驻留。

当我运行代码并注册`F11`为热键时，它对我来说效果很好。

* * *

> 在这里，我无法理解一些行，例如：
> 
> ```
> const int MYACTION_HOTKEY_ID = 1;
> m.Msg == 0x0312 && m.WParam.ToInt32() == MYACTION_HOTKEY_ID
> base.WndProc(ref m); 
> ```
> 
> 谁能帮我理解这些线？

当然：

1.  第一行声明一个常量值，它唯一地标识您使用该`RegisterHotKey`函数安装的热键。更具体地说，它对应于`id`函数的参数。您在初次通话时将其传递给了它。

2.  这将检查窗口过程 ( `WndProc`) 以查看`Msg`正在处理的消息 () 是否是[`WM_HOTKEY`消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646279.aspx)。每当按下您使用该功能`WM_HOTKEY`注册的热键时，该消息就会自动发布到您的窗口。`RegisterHotKey`

    但是，您实际上不应该`0x0312`直接使用幻数，因为您不是唯一一个不确定它的含义的人。相反，定义一个常量并使用它来代替：

    ```
    const int WM_HOTKEY = 0x0312;
    m.Msg == WM_HOTKEY 
    ```

    该条件测试的第二部分（ 之后的部分`&&`）检查`wParam`消息的字段以查看按下的热键是否是您注册的热键。请记住，这`MYACTION_HOTKEY_ID`是您的热键的唯一 ID。消息文档告诉我们，`WM_HOTKEY`检查`wParam`是我们如何确定按下了哪个热键。

3.  这将调用基类的窗口过程。换句话说，您所做的是覆盖了虚拟`WndProc`方法，允许您添加一些*额外*的代码（您对 的处理`WM_HOTKEY`）。完成附加逻辑后，您希望继续处理基类的逻辑，因此您继续转发消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:25:26.850

为了做类似的事情，我使用[`SetWindowsHookEx`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644990%28v=vs.85%29.aspx). 这将捕获通过 Windows 的所有键盘消息，并允许您检查它们，并在必要时阻止它们进一步传播。

在我的[RocketLauncher GitHub 爱好项目](https://github.com/nbarnwell/RocketLauncher)中查看[我的 KeyboardHandling](https://github.com/nbarnwell/RocketLauncher/tree/master/KeyboardHandling)项目。你可以直接从中获取你需要的东西。我也将很快将它变成一个 nuget 包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:31:23.513

我不知道为什么，但我觉得这与[这个](https://stackoverflow.com/questions/15413172/capture-a-keyboard-keypress-in-the-background/15413314)问题有关......所以我将尝试再次解释一下：

```
const int MYACTION_HOTKEY_ID = 1; 
```

是您保存用于标识热键的整数的位置。如果您需要注册的不仅仅是热键，则必须声明其他整数字段来标识其他热键：

```
const int ANOTHER_ACTION_HOTKEY_ID = 2;
const int AND_ANOTHER_ACTION_HOTKEY_ID = 3; 
```

然后，

```
m.Msg == 0x0312 && m.WParam.ToInt32() == MYACTION_HOTKEY_ID 
```

是使您能够知道用户键入了哪个热键的条件。

`0x0312`（例如`WM_HOTKEY`，您可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)找到的文档中声明）是要知道是否已按下*注册的热键：*

> 按下某个键时，系统会查找所有热键的匹配项。找到匹配项后，系统会将 WM_HOTKEY 消息发布到与热键关联的窗口的消息队列中。如果热键没有与窗口相关联，则 WM_HOTKEY 消息被发送到与热键相关联的线程。

* * *

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)，您不能使用`F12`热键：

> F12 键一直保留供调试器使用，因此不应将其注册为热键。即使您不调试应用程序，F12 也会保留，以防内核模式调试器或即时调试器驻留。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T04:37:31.550

Your code has no wrong . But it doesn't work here because the **F12** key is reserved you may try with another key like **F10**, **F11** etc .

# wix - 使用 if 条件比较 WiX 中的变量值

> ID：15428574
> 
> 赞同：5
> 
> 时间：2013-03-15T09:18:49.937
> 
> 标签：wix, windows-installer, wix3.6

我想检查用户是否传递了默认值为本地的 USERNAME 的参数。我想看看如果值是本地的，我是否会收到一条消息。问题出在以下方式。这行不通。

```
<Property Id="USERNAME" Value="local"/>
<?define uName = [USERNAME]?>

<?if $(var.uName) = local ?>
      <Condition Message="$(var.uName)">0</Condition>
<?endif?> 
```

但是，如果我将代码更改为以下代码，它将给出消息。

```
<?define uName = local?>

<?if $(var.uName) = local ?>
      <Condition Message="$(var.uName)">0</Condition>
<?endif?> 
```

以下代码将 USERNAME 属性的值分配给`uName`变量。

```
<Property Id="USERNAME" Value="local"/>
<?define uName = [USERNAME]?>
<Condition Message="$(var.uName)">0</Condition> 
```

上面的代码在消息框中打印“本地”。

我尝试了很多场景，并且可以找到问题所在。在比较分配为的变量值时，

```
<?define uName = [USERNAME]?> 
```

尽管该值已分配给 uName，但我们无法进行比较。我在这里做错什么了吗？或者这种问题还有其他方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T11:27:32.507

你能在没有变量的情况下这样做吗？

`<Property Id="USERNAME" Value="local"/>`

`<Condition Message="The username is local, please enter a username for the installation to proceed">USERNAME = "local"</Condition>`

如果用户输入了用户名，这将是正确的，然后安装将继续，但如果用户没有，那么它将失败，因为默认是本地的。

我想知道用户名是如何输入的。这是通过命令行还是来自输入对话框？

如果来自对话框 - 我建议使用错误对话框而不是中止安装。我可能完全错了，但只是给你选择。

希望这可以帮助...：）

编辑：

要做你想做的事，只需向你的组件添加一个条件，其中包含你的服务。有两个组件：

```
<Component Id="ServiceOne" Guid='*' Directory="Directory">
 //All your service tags etc 
  <Condition><![CDATA[USERNAME = "local"]]></Condition>
</Component>

<Component Id="ServiceTwo" Guid='*' Directory="Directory">
 //All your service tags etc 
  <Condition><![CDATA[USERNAME <> "local"]]></Condition>
</Component> 
```

# python - 如何使用 Gio 设置 HTTP 请求的用户代理？

> ID：15428575
> 
> 赞同：1
> 
> 时间：2013-03-15T09:18:51.143
> 
> 标签：python, c, gtk, pygobject, gio

我正在尝试使用 Gio 执行异步 HTTP 请求，并且我想为我的请求设置一个自定义用户代理，但我找不到任何相关内容。

我正在使用 PyGObject 访问 Gio，但我当然可以使用 C 示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:53:50.397

以以下为例[https://live.gnome.org/Vala/GIONetworkingSample](https://live.gnome.org/Vala/GIONetworkingSample)

您需要将用户代理添加到请求的标头中。在上面的例子中，替换：

```
var message = "GET / HTTP/1.1\r\nHost: www.google.com\r\n\r\n"; 
```

和 ：

```
var message = "GET / HTTP/1.1\r\nHost: www.google.com\r\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64)\r\n\r\n"; 
```

这个想法在python中是一样的。有关 HTTP 请求格式的详细信息，请查看 HTTP 1.0 [RFC 1945](http://www.ietf.org/rfc/rfc1945.txt)（第 5 章，第 23-25 页）。User-Agent 头域在第 10.15 节中描述。

# iphone - NSNotificationCenter 将所有实例添加为观察者

> ID：15428578
> 
> 赞同：1
> 
> 时间：2013-03-15T09:19:04.547
> 
> 标签：iphone, ios, xcode, nsnotificationcenter

所以我有一个类，它在初始化时将自己添加为 NSNotificationService 中的观察者，并且在 dealloc 上将自己从 NSNotificationCenter 中删除。

一切正常，我发布通知并收到它一次并带有正确的对象。

然后我做了一个循环并添加了三个视图。每个视图都被调用一次，所有视图都将自己添加为观察者。

现在，当我发布通知时，每个视图都会收到 3 次通知！（共 9 个）

所以我将我的添加观察者移动到另一个方法，并且只在两个视图（来自这三个）上调用它。

现在每个视图都被调用了两次（三个视图被调用了两次，总共 6 个），尽管第三个实例甚至没有被添加为观察者（观看了 metgod，没有按预期被调用）。

现在我删除了循环并创建了三个视图。并且只添加了一个作为观察者。三个人都叫了...

这是已知问题还是我发现了新问题？

XCode 4.6 iOS 6.1

更新 - - - - - - - -

问题是，我的视图实际上只是一个实例。

此代码生成三个视图，它们都是相同的一个视图。

```
CustomViewController * hw1 = [[CustomViewController alloc] init];

    [hw1 setupWithFrame:CGRectMake(
                                contentScrollView.frame.size.width * 0 + contentScrollView.frame.size.width/2 - 250 ,
                                contentScrollView.frame.size.height / 2 - 250,500,500)];

    [contentScrollView addSubview:hw1.view];

CustomViewController * hw2 = [[CustomViewController alloc] init];

[hw2 setupWithFrame:CGRectMake(
                               contentScrollView.frame.size.width * 1 + contentScrollView.frame.size.width/2 - 250 ,
                               contentScrollView.frame.size.height / 2 - 250,500,500)];

[contentScrollView addSubview:hw2.view];

CustomViewController * hw3 = [[CustomViewController alloc] init];

[hw3 setupWithFrame:CGRectMake(
                               contentScrollView.frame.size.width * 2 + contentScrollView.frame.size.width/2 - 250 ,
                               contentScrollView.frame.size.height / 2 - 250,500,500)];

[contentScrollView addSubview:hw3.view]; 
```

更改 hw1 中的内容，更改 hw2 和 hw3 中的内容。

SetupWithFrame 只是一种分配和添加已定义框架的子视图的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:23:57.490

每次在添加观察者之前删除您的观察者。它显然被多次添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:40:37.413

这是您的问题根源：

`hw1`您在循环中创建了,`hw2`的三个实例`hw3` 并将它们添加到`[contentScrollView addSubview:`.

所以你的 contentScrollView 现在总共有九个子视图，每个子视图都有自己的观察者。

这就是为什么您的通知会被观察九次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:52:27.363

循环在这里：

当我创建一个视图 A 并将其设置为观察来自 Data 的调用时，A 告诉 Data 进行更新。

现在视图 B 也被设置为观察者并告诉数据更新。

最后，Data 被告知要更新 3 次，因为它更新了，所以它告诉所有观察者新数据（3 次），并且所有视图的行为都是相同的（毕竟不是同一个实例），因为它们接收到用于其他视图的数据。

# html - 如何使用 Chrome Frame ActiveX 控件

> ID：15428581
> 
> 赞同：1
> 
> 时间：2013-03-15T09:19:12.773
> 
> 标签：html, google-chrome, iframe, html5-canvas

有没有关于使用 Chrome Frame ActiveX 控件而不是 Iframe 的示例？我需要这个，因为我不能在 IE8 中使用 HTML5 画布元素，所以我尝试了 chrome 框架，但它在 iframe 中不受支持。

我看到一个帖子，它告诉我们可以使用 Chrome Frame ActiveX 控件来代替 iframe。

[https://groups.google.com/forum/?fromgroups=#!topic/google-chrome-frame/2Jq-isAdi1k](https://groups.google.com/forum/?fromgroups=#!topic/google-chrome-frame/2Jq-isAdi1k)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T19:25:35.920

尝试从 Web 服务器[http://src.chromium.org/viewvc/chrome/trunk/src/chrome_frame/host.html提供此代码](http://src.chromium.org/viewvc/chrome/trunk/src/chrome_frame/host.html)

# javascript - 如何在 Handlebar 模板中查找数组长度？

> ID：15428584
> 
> 赞同：95
> 
> 时间：2013-03-15T09:19:21.327
> 
> 标签：javascript, templates, handlebars.js

我有一个使用 json 对象呈现的 Handlebars 模板。在这个 json 中，我发送了一个数组。像这样：

```
var json = {
               "array":["abc","def","ghi","jkl"] 
} 
```

现在在我的模板中，我想找到这个数组的长度。就像是：

```
{{#each item}}
   {{ array.length }}
{{/each}} 
```

在 Handlebars 文档中找不到它。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2013-03-15T09:24:32.050

我的错....

`{{array.length}}`实际上在模板内工作。应该在将其发布到此处之前对其进行检查/测试。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-04-07T21:06:47.077

In this case you need to reference the parent variable of the each from within the each block:

```
{{#each array}}
    {{../array.length}}
{{/each}} 
```

I think your variable being named "array" is probably conflating the issue as well. Let's assume some different JSON just to clarify:

```
var json = {
    "fruit":["apple","orange","banana"]
}; 
```

So then doing this:

```
<ul>
    {{#each fruit}}
        <li>{{this}} {{@index}} {{../fruit.length}}</li>
    {{/each}}
</ul> 
```

Would yield:

```
<ul>
    <li>apple 0 3</li>
    <li>orange 1 3</li>
    <li>banana 2 3</li>
</ul> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-20T09:59:32.427

如果您正在测试一个空列表以显示内容...在使用把手的 Ember.js 中，您可以为 #each 设置一个 else。

```
{{#each blah as |blah|}}

{{else}}
 //   If array is empty
{{/each}} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-30T11:25:06.657

您可以定义简单的助手来处理它：

```
Handlebars.registerHelper('get_length', function (obj) {
 return obj.length;
}); 
```

然后在您的模板中使用它，例如：

```
{{get_length some_object}} 
```

# jquery - 自定义的 jQuery 滑块在不同的浏览器中提供奇怪的输出

> ID：15428587
> 
> 赞同：1
> 
> 时间：2013-03-15T09:19:23.623
> 
> 标签：jquery, slider

我设置了一些样式以使 jQuery 滑块看起来不错。用于 ui-slider-handler 的图像。我在 IE 和谷歌浏览器中工作正常。但它在 Safari 和 Firefox 中无法正常工作。
我试着[摆弄](http://jsfiddle.net/kXCCS/)它并检查了不同浏览器中摆弄的输出。然后它工作正常。

如果在我的桌面上运行相同的源代码（在浏览器 Safari 和 Firefox 中），我不明白为什么它不起作用。我猜该脚本可能在错误的地方被调用。我尝试在不同的地方调用脚本。
**在不同的浏览器中输出 **
**Google Chrome** ![在此处输入图像描述](../Images/a219a046eaca71be74f8f13b2ec060ce.png) **Firefox ** ![在此处输入图像描述](../Images/408d857b32a3f48e7b924675076567a6.png) **Safari** ![在此处输入图像描述](../Images/d361ddeaaae830e1460582c44715732e.png) 这是我的代码：

```
 <!DOCTYPE HTML PUBLIC>
    <html>
     <head>
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />

      <style>

      .vUiSliderWrapper{
        overflow:hidden;
      }
      .vUiSlider{
        height:7px;
        background-image:-ms-linear-gradient(top, #b9b9b9,#e0e0e0);
        filter:progid:DXImageTransform.Microsoft.gradient(GradientType="0",startColorStr="#b9b9b9",endColorStr="#e0e0e0");
        background: -webkit-gradient(linear, left top, left bottom, from(#b9b9b9), to(#e0e0e0)) !important; 
        background: -moz-linear-gradient(top,#b9b9b9,#e0e0e0) !important;
      }
      .vUiSlider .ui-slider-handle{
        border:none;
        background:url('http://s14.postimage.org/wo9hknojx/slider_handles.png') 0 -27px no-repeat;
        width:20px;
        height:17px;  
        outline: none;
      }
      .vUiSlider .ui-slider-handle:hover{
        background-position:0 -4px;
       }
      .vUiSlider .ui-slider-range{ 
        border-radius:4px;
        background-image:-ms-linear-gradient(top, #04adff,#0083c1);
        filter:progid:DXImageTransform.Microsoft.gradient(GradientType="0",startColorStr="#04adff",endColorStr="#0083c1");
        background: -webkit-gradient(linear, left top, left bottom, from(#04adff), to(#0083c1)) !important; 
        background: -moz-linear-gradient(top,#04adff,#0083c1) !important;
      }

      #sld1 .vUiSlider{
       width:200px;
      }
      </style>
     </head>
    <body>
      <span id="sld1" class="vUiSliderWrapper">
       <div  class="vUiSlider"></div>
       <input type="text" role="data"/>
      </span>

     <span id="sld2" class="vUiSliderWrapper">
      <div class="vUiSlider"></div>
      <input type="text" role="data"/>
     </span>

      <script>
       $(document).ready(function(){
           $('.vUiSliderWrapper .vUiSlider').slider({
             range: "min",
             min:0,
             max:100,
             value:3,
             animate: true,
             slide:function(event, ui){
                $(this).siblings('input[role="data"]').val(ui.value);
             }
           });
       });

      </script>
     </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:59:15.960

我可以通过用新版本文件替换`script`and来解决这个问题。`styles sheet`但我仍然想知道它如何工作`IE`以及`Google Chrome`文件是否为旧版本。

# android - 关于屏幕最大亮度的评论

> ID：15428594
> 
> 赞同：0
> 
> 时间：2013-03-15T09:19:57.360
> 
> 标签：android

我将屏幕亮度更改为最大，如下所示：

```
 WindowManager.LayoutParams params = getWindow().getAttributes();
                 params.screenBrightness = 1.0f;
                 getWindow().setAttributes(params); 
```

它的工作非常好，但问题是当我退出我的程序时

亮度恢复到原来的亮度

即使我离开程序，如何保持最大亮度

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:29:26.630

要保持亮度，您需要`WRITE_SETTINGS`在 manifest.xml 文件中添加权限

```
Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_BRIGHTNESS_MODE,       Settings.System.SCREEN_BRIGHTNESS_MODE_MANUAL);
Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_BRIGHTNESS, 255); 
```

并且很明显，

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/> 
```

# python - 在pymongo中通过DBRef查找文档的正确方法

> ID：15428602
> 
> 赞同：4
> 
> 时间：2013-03-15T09:20:18.100
> 
> 标签：python, mongodb, pymongo, dbref

我的数据库中有以下文件

```
> db.person.find()
{ "_id" : ObjectId("1122"), "name" : "Alice", "age" : 20 }
{ "_id" : ObjectId("3344"), "name" : "Bob", "age" : 21 }
> db.article.find()
{ "_id" : ObjectId("aaaa"), "authors" : [ { "$ref" : "person", "$id" : "1122" } ] }
{ "_id" : ObjectId("bbbb"), "authors" : [   {
        "$ref" : "person",
        "$id" : "1122"
    },  {
        "$ref" : "person",
        "$id" : "3344"
    } ] } 
```

这是我试图找到作者包含 Bob 的文章的代码

```
import pymongo
import bson.objectid

db = pymongo.MongoClient()['test']

bob_id = bson.objectid.ObjectId('3344')

article = db.article.find_one({ 'authors': { '$in': [ bob_id ] } })
print article
# None

article = db.article.find_one({ 'authors.$id': { '$in': [ bob_id ] } })
print article
# None

article = db.article.find_one({ 'authors.$id': { '$in': [ str(bob_id) ] } })
print article
# { article object } 
```

这导致应该传递字符串表示，而不是`ObjectId`如果我想`DBRef`在 pymongo 中通过 , 查找任何文档。

mongo 或 pymongo 是否只是为此进行字符串匹配（从而降低效率）？有没有更合适的方法来做参考查询？

# angularjs - angular.module.controller 的替代语法

> ID：15428603
> 
> 赞同：0
> 
> 时间：2013-03-15T09:20:23.037
> 
> 标签：angularjs

我有带有指令的模块和带有控制器的模块的应用程序。

```
angular.module('ValidationWidgets', [])
    .directive('validationfield', function () {
         ....
    });

angular.module('MyPage', ['ValidationWidgets'])
       .controller('MyFirstController', function ($scope) {

        ....
    }); 
```

是否有一些漂亮的语法可以在 app 模块中声明许多控制器，因为`.controller('MyFirstController', function ($scope) {`看起来很糟糕？

我想写一些类似的东西：

```
var myPage = angular.module('MyPage', ['ValidationWidgets']);

myPage.controllers.MyFirstController = function($scope) {
  ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:47:16.683

```
var app = angular.module("myApp", []);
app.controller("my controller", function(){}); 
```

或者

```
var app = angular.module("myApp", []);
var controllers = {};
controller.myController = function(){};
app.controller(controllers); 
```

看看这个视频[http://egghead.io/video/angularjs-thinking-different-about-organization/](http://egghead.io/video/angularjs-thinking-different-about-organization/)

说实话，整个系列都很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T22:15:07.720

要扩展@Jacob Dalton 所说的内容，您可以这样做：

设置您的路线：

```
app.config(['$routeProvider', function($routeProvider, $locationProvider) {
    $routeProvider.
        when('/view1', {templateUrl: 'partials/view1', controller: 'View1Ctrl'}).
        when('/view2', {templateUrl: 'partials/view1', controller: 'View2Ctrl'}).
        otherwise({redirectTo: '/view1'});
}]); 
```

然后你可以通过简单地声明一个函数来声明你的控制器：

```
function View1Ctrl($scope, $http) {
}

function View2Ctrl($scope, $http) {
} 
```

这些功能将作为控制器自动连接。然而，如前所述，这使得这些函数是控制器的意义不那么明显。

# c# - 如何使用 await 在自定义 TaskScheduler 上运行任务？

> ID：15428604
> 
> 赞同：46
> 
> 时间：2013-03-15T09:20:23.373
> 
> 标签：c#, .net, async-await

我有一些`Task<T>`可以随意返回的方法`await`。我想让这些任务在自定义`TaskScheduler`而不是默认任务上执行。

```
var task = GetTaskAsync ();
await task; 
```

我知道我可以创建一个新`TaskFactory (new CustomScheduler ())`的并从中做一个`StartNew ()`，但`StartNew ()`采取行动并创建一个`Task`，我已经有了`Task`（由 a 返回幕后`TaskCompletionSource`）

我怎样才能指定我自己`TaskScheduler`的`await`？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-15T12:08:33.263

我认为您真正想要的是做一个`Task.Run`, 但使用自定义调度程序。`StartNew`不能直观地使用异步方法；Stephen Toub 有一篇关于 和 之间差异的精彩[博客](https://devblogs.microsoft.com/pfxteam/task-run-vs-task-factory-startnew/)[文章`Task.Run``TaskFactory.StartNew`](https://devblogs.microsoft.com/pfxteam/task-run-vs-task-factory-startnew/)。

因此，要创建自己的 custom `Run`，您可以执行以下操作：

```
private static readonly TaskFactory myTaskFactory = new TaskFactory(
    CancellationToken.None, TaskCreationOptions.DenyChildAttach,
    TaskContinuationOptions.None, new MyTaskScheduler());
private static Task RunOnMyScheduler(Func<Task> func)
{
  return myTaskFactory.StartNew(func).Unwrap();
}
private static Task<T> RunOnMyScheduler<T>(Func<Task<T>> func)
{
  return myTaskFactory.StartNew(func).Unwrap();
}
private static Task RunOnMyScheduler(Action func)
{
  return myTaskFactory.StartNew(func);
}
private static Task<T> RunOnMyScheduler<T>(Func<T> func)
{
  return myTaskFactory.StartNew(func);
} 
```

然后，您可以在自定义调度程序上执行同步*或*异步方法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-21T20:19:29.863

在`TaskCompletionSource<T>.Task`没有任何操作的情况下构造它，并且在第一次调用时分配调度程序`ContinueWith(...)`（来自[Asynchronous Programming with the Reactive Framework 和 Task Parallel Library - 第 3 部分](http://bvanderveen.com/a/async-with-rx-and-the-tpl-part-3)）。

值得庆幸的是，您可以通过实现自己的类来稍微自定义等待行为`INotifyCompletion`，然后以类似于`await SomeTask.ConfigureAwait(false)`配置任务应该在`OnCompleted(Action continuation)`方法中开始使用的调度程序的模式使用它（从[等待任何东西；](http://blogs.msdn.com/b/pfxteam/archive/2011/01/13/10115642.aspx)）。

这是用法：

```
 TaskCompletionSource<object> source = new TaskCompletionSource<object>();

    public async Task Foo() {
        // Force await to schedule the task on the supplied scheduler
        await SomeAsyncTask().ConfigureScheduler(scheduler);
    }

    public Task SomeAsyncTask() { return source.Task; } 
```

这是一个`ConfigureScheduler`使用任务扩展方法的简单实现，其中重要部分是`OnCompleted`：

```
public static class TaskExtension {
    public static CustomTaskAwaitable ConfigureScheduler(this Task task, TaskScheduler scheduler) {
        return new CustomTaskAwaitable(task, scheduler);
    }
}

public struct CustomTaskAwaitable {
    CustomTaskAwaiter awaitable;

    public CustomTaskAwaitable(Task task, TaskScheduler scheduler) {
        awaitable = new CustomTaskAwaiter(task, scheduler);
    }

    public CustomTaskAwaiter GetAwaiter() { return awaitable; }

    public struct CustomTaskAwaiter : INotifyCompletion {
        Task task;
        TaskScheduler scheduler;

        public CustomTaskAwaiter(Task task, TaskScheduler scheduler) {
            this.task = task;
            this.scheduler = scheduler;
        }

        public void OnCompleted(Action continuation) {
            // ContinueWith sets the scheduler to use for the continuation action
            task.ContinueWith(x => continuation(), scheduler);
        }

        public bool IsCompleted { get { return task.IsCompleted; } }
        public void GetResult() { }
    }
} 
```

这是一个将编译为控制台应用程序的工作示例：

```
using System;
using System.Collections.Generic;
using System.Runtime.CompilerServices;
using System.Threading.Tasks;

namespace Example {
    class Program {
        static TaskCompletionSource<object> source = new TaskCompletionSource<object>();
        static TaskScheduler scheduler = new CustomTaskScheduler();

        static void Main(string[] args) {
            Console.WriteLine("Main Started");
            var task = Foo();
            Console.WriteLine("Main Continue ");
            // Continue Foo() using CustomTaskScheduler
            source.SetResult(null);
            Console.WriteLine("Main Finished");
        }

        public static async Task Foo() {
            Console.WriteLine("Foo Started");
            // Force await to schedule the task on the supplied scheduler
            await SomeAsyncTask().ConfigureScheduler(scheduler);
            Console.WriteLine("Foo Finished");
        }

        public static Task SomeAsyncTask() { return source.Task; }
    }

    public struct CustomTaskAwaitable {
        CustomTaskAwaiter awaitable;

        public CustomTaskAwaitable(Task task, TaskScheduler scheduler) {
            awaitable = new CustomTaskAwaiter(task, scheduler);
        }

        public CustomTaskAwaiter GetAwaiter() { return awaitable; }

        public struct CustomTaskAwaiter : INotifyCompletion {
            Task task;
            TaskScheduler scheduler;

            public CustomTaskAwaiter(Task task, TaskScheduler scheduler) {
                this.task = task;
                this.scheduler = scheduler;
            }

            public void OnCompleted(Action continuation) {
                // ContinueWith sets the scheduler to use for the continuation action
                task.ContinueWith(x => continuation(), scheduler);
            }

            public bool IsCompleted { get { return task.IsCompleted; } }
            public void GetResult() { }
        }
    }

    public static class TaskExtension {
        public static CustomTaskAwaitable ConfigureScheduler(this Task task, TaskScheduler scheduler) {
            return new CustomTaskAwaitable(task, scheduler);
        }
    }

    public class CustomTaskScheduler : TaskScheduler {
        protected override IEnumerable<Task> GetScheduledTasks() { yield break; }
        protected override bool TryExecuteTaskInline(Task task, bool taskWasPreviouslyQueued) { return false; }
        protected override void QueueTask(Task task) {
            TryExecuteTask(task);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-08-29T03:18:03.583

无法将丰富的异步功能嵌入到自定义[`TaskScheduler`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskscheduler). 这个类的设计没有考虑到`async`/ `await`。使用自定义的标准方法`TaskScheduler`是作为[`Task.Factory.StartNew`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskfactory.startnew)方法的参数。此方法不理解异步委托。可以提供异步委托，但它被视为返回某些结果的任何其他委托。要获得异步委托的实际等待结果，必须调用[`Unwrap()`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskextensions.unwrap)返回的任务。

不过，这不是问题。问题是`TaskScheduler`基础架构没有将异步委托视为单个工作单元。每个任务被分成多个小任务（使用every`await`作为分隔符），每个小任务单独处理。这严重限制了可以在此类之上实现的异步功能。例如，这里有一个自定义`TaskScheduler`，旨在一次将提供的任务排队（换句话说，限制并发）：

```
public class MyTaskScheduler : TaskScheduler
{
    private readonly SemaphoreSlim _semaphore = new SemaphoreSlim(1);

    protected async override void QueueTask(Task task)
    {
        await _semaphore.WaitAsync();
        try
        {
            await Task.Run(() => base.TryExecuteTask(task));
            await task;
        }
        finally
        {
            _semaphore.Release();
        }
    }

    protected override bool TryExecuteTaskInline(Task task,
        bool taskWasPreviouslyQueued) => false;

    protected override IEnumerable<Task> GetScheduledTasks() { yield break; }
} 
```

`SemaphoreSlim`应该确保一次只`Task`运行一个。不幸的是，它不起作用。信号量过早释放，因为`Task`调用中传入的`QueueTask(task)`不是代表异步委托的全部工作的任务，而只是直到第一个`await`. 其他部分传递给该`TryExecuteTaskInline`方法。没有办法关联这些任务部分，因为没有提供标识符或其他机制。以下是实践中发生的情况：

```
var taskScheduler = new MyTaskScheduler();
var tasks = Enumerable.Range(1, 5).Select(n => Task.Factory.StartNew(async () =>
{
    Console.WriteLine($"{DateTime.Now:HH:mm:ss.fff} Item {n} Started");
    await Task.Delay(1000);
    Console.WriteLine($"{DateTime.Now:HH:mm:ss.fff} Item {n} Finished");
}, default, TaskCreationOptions.None, taskScheduler))
.Select(t => t.Unwrap())
.ToArray();
Task.WaitAll(tasks); 
```

输出：

> 05:29:58.346 项目 1 开始
> 05:29:58.358 项目 2 开始
> 05:29:58.358 项目 3 开始
> 05:29:58.358 项目 4 开始
> 05:29:58.358 项目 5 开始
> 05:29:59.358 项目 1 完成
> 05: 29:59.374 第 5 项已完成
> 05:29:59.374 第 4 项已完成
> 05:29:59.374 第 2 项已完成
> 05:29:59.374 第 3 项已完成

灾难，所有任务一次排队。

**结论：**当需要高级异步功能时，自定义`TaskScheduler`类不是要走的路。

**更新：**这是另一个观察，关于`TaskScheduler`在环境存在的custom [`SynchronizationContext`](https://docs.microsoft.com/en-us/archive/msdn-magazine/2011/february/msdn-magazine-parallel-computing-it-s-all-about-the-synchronizationcontext)。默认情况下，该`await`机制捕获 current`SynchronizationContext`或 current `TaskScheduler`，并在捕获的上下文或调度程序上调用延续。如果两者都存在，`SynchronizationContext`则首选当前，而`TaskScheduler`忽略当前。下面是此行为的演示，在 WinForms 应用程序中¹：

```
private async void Button1_Click(object sender, EventArgs e)
{
    await Task.Factory.StartNew(async () =>
    {
        MessageBox.Show($"{Thread.CurrentThread.ManagedThreadId}, {TaskScheduler.Current}");
        await Task.Delay(1000);
        MessageBox.Show($"{Thread.CurrentThread.ManagedThreadId}, {TaskScheduler.Current}");
    }, default, TaskCreationOptions.None,
        TaskScheduler.FromCurrentSynchronizationContext()).Unwrap();
} 
```

单击该按钮会依次弹出两条消息，其中包含以下信息：

> 1、System.Threading.Tasks.SynchronizationContextTaskScheduler

> 1、System.Threading.Tasks.ThreadPoolTask​​Scheduler

这个实验表明，只有异步委托的第一部分，即第一部分之前的部分`await`，被安排在非默认调度程序上。这种行为甚至进一步限制了 custom`TaskScheduler`在启用 async/await 的环境中的实际用途。

¹ [Windows Forms 应用程序在调用该方法[`WindowsFormsSynchronizationContext`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.windowsformssynchronizationcontext)时会自动安装。`Application.Run`]

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-15T10:14:35.833

在评论之后，您似乎想要控制在等待之后运行代码的调度程序。

编译从默认情况下在当前 SynchronizationContext 上运行的 await 创建一个延续。所以你最好的办法是`SynchronizationContext`在调用之前设置等待。

有一些方法可以等待特定的上下文。请参阅Jon Skeet 的[Configure](https://codeblog.jonskeet.uk/2010/11/02/configuring-waiting/) Await，尤其是有关 SwitchTo 的部分，以获取有关如何实现此类功能的更多信息。

编辑：TaskEx 中的 SwitchTo 方法已被删除，因为它太容易误用。有关原因，请参阅[MSDN 论坛。](http://social.msdn.microsoft.com/Forums/en-US/async/thread/078c7e77-5b16-4130-bbf5-c8e6ac82effa)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-30T09:52:56.287

你能适应这个方法调用吗：

```
 await Task.Factory.StartNew(
        () => { /* to do what you need */ }, 
        CancellationToken.None, /* you can change as you need */
        TaskCreationOptions.None, /* you can change as you need */
        customScheduler); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-12-27T23:48:27.683

面对同样的问题，尝试使用**LimitedConcurrencyLevelTask​​Scheduler**，但它不支持异步任务。所以...

刚刚编写了我自己的小型简单调度程序，它允许基于全局 ThreadPool（和 Task.Run 方法）运行异步任务，并能够限制当前的最大并行度。这对我的确切目的来说已经足够了，也许对你们也有帮助，伙计们。

**主要演示代码**（控制台应用程序，dotnet core 3.1）：

```
 static async Task Main(string[] args)
    {

        //5 tasks to run per time
        int concurrentLimit = 5;
        var scheduler = new ThreadPoolConcurrentScheduler(concurrentLimit);

        //catch all errors in separate event handler
        scheduler.OnError += Scheduler_OnError;

        // just monitor "live" state and output to console
        RunTaskStateMonitor(scheduler);

        // simulate adding new tasks "on the fly"
        SimulateAddingTasksInParallel(scheduler);

        Console.WriteLine("start adding 50 tasks");

        //add 50 tasks
        for (var i = 1; i <= 50; i++)
        {
            scheduler.StartNew(myAsyncTask);
        }

        Console.WriteLine("50 tasks added to scheduler");

        Thread.Sleep(1000000);

    } 
```

支持代码（放在同一个地方）：

```
 private static void Scheduler_OnError(Exception ex)
    {
        Console.WriteLine(ex.ToString());
    }

    private static int currentTaskFinished = 0;

    //your sample of async task
    static async Task myAsyncTask()
    {
        Console.WriteLine("task started ");

        using (HttpClient httpClient = new HttpClient())
        {
            //just make http request to ... wikipedia!
            //sorry, Jimmy Wales! assume,guys, you will not DDOS wiki :)
            var uri = new Uri("https://wikipedia.org/");
            var response = await httpClient.GetAsync(uri);
            string result = await response.Content.ReadAsStringAsync();
            if (string.IsNullOrEmpty(result))
                Console.WriteLine("error, await is not working");
            else
                Console.WriteLine($"task result : site length is {result.Length}");
        }
        //or simulate it using by sync sleep
        //Thread.Sleep(1000);
        //and for tesing exception : 
        //throw new Exception("my custom error");
        Console.WriteLine("task finished ");

        //just incrementing total ran tasks to output in console
        Interlocked.Increment(ref currentTaskFinished);
    }

    static void SimulateAddingTasksInParallel(ThreadPoolConcurrentScheduler taskScheduler)
    {
        int runCount = 0;
        Task.Factory.StartNew(() =>
        {
            while (true)
            {
                runCount++;

                if (runCount > 5)
                    break;

                //every 10 sec 5 times
                Thread.Sleep(10000);

                //adding new 5 tasks from outer task
                Console.WriteLine("start adding new 5 tasks!");
                for (var i = 1; i <= 5; i++)
                {
                    taskScheduler.StartNew(myAsyncTask);
                }

                Console.WriteLine("new 5 tasks added!");
            }
        }, TaskCreationOptions.LongRunning);
    }

    static void RunTaskStateMonitor(ThreadPoolConcurrentScheduler taskScheduler)
    {
        int prev = -1;
        int prevQueueSize = -1;
        int prevFinished = -1;
        Task.Factory.StartNew(() =>
            {
                while (true)
                {
                    // getting current thread count in working state
                    var currCount = taskScheduler.GetCurrentWorkingThreadCount();
                    // getting inner queue state
                    var queueSize = taskScheduler.GetQueueTaskCount();

                    //just output overall state if something changed
                    if (prev != currCount || queueSize != prevQueueSize || prevFinished != currentTaskFinished)
                    {
                        Console.WriteLine($"Monitor : running tasks:{currCount}, queueLength:{queueSize}. total Finished tasks : " + currentTaskFinished);
                        prev = currCount;
                        prevQueueSize = queueSize;
                        prevFinished = currentTaskFinished;
                    }

                    // check it every 10 ms
                    Thread.Sleep(10);
                }
            }
            , TaskCreationOptions.LongRunning);
    } 
```

**调度器：**

```
public class ThreadPoolConcurrentScheduler
{
    private readonly int _limitParallelThreadsCount;
    private int _threadInProgressCount = 0;

    public delegate void onErrorDelegate(Exception ex);
    public event onErrorDelegate OnError;

    private ConcurrentQueue<Func<Task>> _taskQueue;
    private readonly object _queueLocker = new object();

    public ThreadPoolConcurrentScheduler(int limitParallelThreadsCount)
    {
        //set maximum parallel tasks to run
        _limitParallelThreadsCount = limitParallelThreadsCount;
        // thread-safe queue to store tasks
        _taskQueue = new ConcurrentQueue<Func<Task>>();
    }

    //main method to start async task
    public void StartNew(Func<Task> task)
    {
        lock (_queueLocker)
        {
            // checking limit
            if (_threadInProgressCount >= _limitParallelThreadsCount)
            {
                //waiting new "free" threads in queue
                _scheduleTask(task);
            }
            else
            {
                _startNewTask(task);
            }
        }
    }

    private void _startNewTask(Func<Task> task)
    {
        Interlocked.Increment(ref _threadInProgressCount);
        Task.Run(async () =>
        {
            try
            {
                await task();
            }
            catch (Exception e)
            {
                //Console.WriteLine(e);
                OnError?.Invoke(e);
            }
        }).ContinueWith(_onTaskEnded);
    }

    //will be called on task end
    private void _onTaskEnded(Task task)
    {
        lock (_queueLocker)
        {
            Interlocked.Decrement(ref _threadInProgressCount);
            //queue has more priority, so if thread is free - let's check queue first
            if (!_taskQueue.IsEmpty)
            {
                if (_taskQueue.TryDequeue(out var result))
                {
                    _startNewTask(result);
                }
            }
        }
    }

    private void _scheduleTask(Func<Task> task)
    {
        _taskQueue.Enqueue(task);
    }

    //returning in progress task count 
    public int GetCurrentWorkingThreadCount()
    {
        return _threadInProgressCount;
    }

    //return number of tasks waiting to run
    public int GetQueueTaskCount()
    {
        lock (_queueLocker) return _taskQueue.Count;
    }
} 
```

几点注意事项：

1.  首先 - 检查对它的评论，也许这是有史以来最糟糕的代码！
2.  没有在产品中测试
3.  没有实现取消令牌和任何其他功能，应该在那里，但我太懒了。对不起

# android - 在自定义列表视图中保存编辑框值

> ID：15428606
> 
> 赞同：1
> 
> 时间：2013-03-15T09:20:29.610
> 
> 标签：android, listview

我有两个编辑框。输入的值必须放在自定义列表视图中，它的工作正常......

但我想将这些值永久保存在列表视图中。这样，如果手机关闭并再次运行应用程序，则必须保存这些值..就像必须保存电话联系号码和姓名..这里附上代码

```
public class Editcard extends Activity{

    EditText cardname,cardDescription ;

    MyApplication app;

@SuppressWarnings({ "unchecked", "rawtypes" })
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.editcredit);  

app = ((MyApplication) getApplicationContext());
 cardname =(EditText)findViewById(R.id.cardash);

 cardDescription =(EditText)findViewById(R.id.editdescription);

Button save =(Button)findViewById(R.id.save);
    save.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

              app.carddata =cardname.getText().toString();

                System.out.println("Gotcardname"+app.carddata);

                app.descriptiondata =cardDescription.getText().toString();

                System.out.println("gotDescription"+app.descriptiondata);

             app.arryList.add(app.carddata);
             app.arryList1.add(app.descriptiondata);             

            Intent saveIntent =new Intent(Editcard.this,Newcard.class);

            startActivity(saveIntent);  

        }
    });

     }
}

public class MyApplication extends Application{

    ArrayList<String> arryList = new ArrayList<String>();  
     ArrayList<String> arryList1 = new ArrayList<String>();  

    String carddata,descriptiondata,=null;  
}

public class Newcard extends Activity {
     MyAdapter adapter;

    ListView listView;
    LayoutInflater lay;
    MyApplication app;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

setContentView(R.layout.newcard);
app = ((MyApplication) getApplicationContext());

TextView newcard =(TextView)findViewById(R.id.newcard);
newcard.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

        Intent card = new Intent(Newcard.this,Editcreditcard.class);        
        startActivity(card);

    }
});

listView = (ListView) findViewById(R.id.cardlist);

adapter =new MyAdapter(this, app.arryList,app.arryList1);
listView.setAdapter(adapter);
}

public class MyAdapter extends BaseAdapter {

Context context = null;
ArrayList<String> items= null;
ArrayList<String> items1= null;

public MyAdapter(Newcard newcard, ArrayList<String> items,
        ArrayList<String> items1) {
    // TODO Auto-generated constructor stub

    this.items = items;
    this.items1 = items1;

}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return items.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return items; 

    //return items.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    View layout = null;
    TextView produ = null;  
    TextView desc = null;

        if (convertView == null) {

        lay = LayoutInflater.from(getApplicationContext());
        layout = lay.inflate(R.layout.customlist, null);
    } else {
        layout = convertView;
    }
    produ = (TextView) layout.findViewById(R.id.card);
    produ.setText("" +app.arryList.get(position));

    desc= (TextView) layout.findViewById(R.id.descrip);
    desc.setText("" +app.arryList1.get(position));

    return layout;

}
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:23:55.953

use 可以使用`SharedPreferences`，这将永久保存您的值，直到它们被更改（通过更改编辑框中的值）或用户重新安装（清除数据）应用程序。`Shared Preferences`像这样工作

```
// save string in sharedPreferences
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putString("some_key", string); // here string is the value you want to save
                    editor.commit();                    

// restore string in sharedPreferences 
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
string = settings.getString("some_key", ""); 
```

# javascript - 餐桌内的钛水平布局

> ID：15428607
> 
> 赞同：-2
> 
> 时间：2013-03-15T09:20:31.953
> 
> 标签：javascript, android, iphone, titanium

我希望在一个表格中有一个带有一天名称的标签。这意味着我不知道标签的实际宽度，并且即使在布局后事件之后 label.toImage().width 也不会返回实际大小。而且我想用随机文本水平对齐滚动视图，有时非常大。我所拥有的是：

```
var storehoursscrollingmessagestyle = {
    left:"10dp",
    font:{fontSize:'18dp',fontWeight:"bold"}
};

var storehoursscrollviewstyle = {
    contentWidth: 'auto',
    contentHeight: 'auto',
    height: '70dp',
    width:Ti.UI.FILL,
    scrollType: 'horizontal'
};

var storehoursrowstylegray={
    classNane:"storeoptions",
    selectedBackgroundColor:"#E8E8E8", 
    backgroundColor:"#E8E8E8",
    height:"70dp"};

var storehoursrowlabelstyle={
    left:"10dp",
    height:"70dp",  
    font:{fontSize:'18dp',fontWeight:"bold"},
    color:"Black"
};

var storehoursviewrowstyle ={
    width:'200dp',
    height:'70dp',
     layout:'horizontal'
};

var storehoursbuttontitleview = Titanium.UI.createLabel(storehoursrowlabelstyle);
storehoursbuttontitleview.text = dayMappings[today] + " " + openTimeFormatted + " - " + closeTimeFormatted;
storehoursbuttonview.add(storehoursbuttontitleview);

var view = Ti.UI.createView(storehoursviewrowstyle);

var scrollview = Ti.UI.createScrollView(storehoursscrollviewstyle);
scrollview.add(storehoursscrollingmessagetitleview);
view.add(storehoursbuttontitleview);

var subviewviewforscrollview = Ti.UI.createView(storehoursviewrowstyle);
subviewviewforscrollview.add(scrollview);
view.add(subviewviewforscrollview);
storehoursbuttonview.add(view); 
```

如果我将 width:'30%' 设置为 storehoursscrollviewstyle，水平布局将按原样显示，但如果我设置为 100%，则滚动视图会消失。

所以我的问题是如何在表格行内有一个标签和一个滚动视图，而不知道它们的大小并且不为彼此设置硬编码的宽度值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:45:49.263

我通过将 postlayout 事件添加到我的标签来做到这一点，还从视图中删除了水平布局和硬编码宽度。

```
function storehoursbuttontitleview_postlayout(e) {
if (e.source.set == null) {
    var storehoursscrollingmessagetitleview = Titanium.UI.createLabel(storehoursscrollingmessagestyle);
    storehoursscrollingmessagetitleview.text = e.source.closedMessage;
    var view = Ti.UI.createView(storehoursviewrowstyle);
    view.left = e.source.size.width + 20 + "dp";
    var scrollview = Ti.UI.createScrollView(storehoursscrollviewstyle);
    view.add(scrollview);
    if (Titanium.Platform.name != 'android') {
        var str = e.source.closedMessage;
        var chunks = [];
        for (var i = 0, charsLength = str.length; i < charsLength; i += 100) {
            chunks.push(str.substring(i, i + 100));
        }
        var finalwidth = 0;
        for (i=0; i<chunks.length; i++) {
            var storehoursscrollingmessagetitleviewtemp = Titanium.UI.createLabel(storehoursscrollingmessagestyle);
            storehoursscrollingmessagetitleviewtemp.text = chunks[i];
            finalwidth = finalwidth + storehoursscrollingmessagetitleviewtemp.toImage().width;
        }
        var labelInsideScrollWidth = finalwidth;
        storehoursscrollingmessagetitleview.width = finalwidth + 10 + "dp";
        scrollview.add(storehoursscrollingmessagetitleview);
    }
    else {
        scrollview.add(storehoursscrollingmessagetitleview);
    }
    e.source.row.add(view);
    e.source.set = true;
}
} 
```

# .net - WCF 服务端点本地主机混淆

> ID：15428610
> 
> 赞同：6
> 
> 时间：2013-03-15T09:20:44.680
> 
> 标签：.net, wcf, localhost, endpoint

我很困惑为什么有些东西有效。我正在配置这样的 wcf 服务：

```
<services>
  <service name="ClientCommand" behaviorConfiguration="SomeServiceBehavior">
    <endpoint contract="IClientCommand" binding="netTcpBinding" BindingConfiguration="TcpPort" address="net.tcp://localhost:1304" />
  </service>
</services> 
```

BindingConfiguration 和 behaviorConfiguration 很简单，只是配置了一些超时。

在我的 exe 中，我像这样启动主机。

```
_serverHost = new ServiceHost(type); // implementing IClientCommand
_serverHost.Open(); 
```

这一切都很简单，而且很有效，我可以从另一台电脑调用这个服务。但是，在阅读了另一个问题（监听 tcp 套接字）之后，我觉得它不应该工作。当我绑定到*本地主机*时，不应该从运行它的电脑外部访问该服务？
我检查了电脑上的 netstat，它确实绑定到 IP 地址“0.0.0.0”而不是“127.0.0.1”，这解释了为什么它可以在另一台电脑上工作。

但我不明白为什么它会从 localhost 变为“0.0.0.0”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:07:28.610

Net.tcp 不限于在一台机器上进行通信，也许您正在考虑使用 net.pipe？关于 0.0.0.0：在运行服务的机器上如何定义主机文件？ [这](http://tech.pro/tutorial/855/wcf-tutorial-basic-interprocess-communication)是一篇关于 WCF 的好文章。

# ibm-mobilefirst - worklight 适配器调用 Web 服务。错误无法读取属性正文

> ID：15428615
> 
> 赞同：0
> 
> 时间：2013-03-15T09:20:53.683
> 
> 标签：ibm-mobilefirst

调用以下适配器返回`Ecma Error: TypeError: Cannot read property \"Body\" from undefined.`

我已经阅读了类似的主题并且有

`-Dorg.xml.sax.driver = com.sun.org.apache.xerces.internal.parsers.SAXParser`

到 eclipse.ini 但没有解决问题。

```
function getStateDetails(idstate) { 
    var request='<?xml version="1.0" encoding="utf-8"?>'+
      '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">'
      +'<soap:Body>'
      + '<test_demo><in0>{idstate}</in0></test_demo>'
      +'</soap:Body>'
      +'</soap:Envelope>';

    var input = {
        method : 'post',
        returnedContentType : 'xml',
        path : '/axis2/services/ws_demo/test_demo.wsdl',
        body : {
            content: request.toString(),
            contentType: 'text/xml; charset=utf-8'
        }
    };

    var result = WL.Server.invokeHttp(input);
    return result.Envelope.Body;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T08:41:38.473

最后它在soapui的帮助下正常工作并在请求中添加标题。

```
function getStateDetails(idstate) {
var request='<?xml version="1.0" encoding="UTF-8"?>'
        +'<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">'
        +'<Body><test_demo xmlns="http://www.ibm.com/informix/i4gl-soa/2010-11/ws_commandes">'
        +'<in0>'+idstate+'</in0></test_demo>'
        +'</Body></Envelope>';

        WL.Logger.debug("SOAP Request " + request);
            var input = {
                method : 'post',
                returnedContentType : 'xml',
                headers: {SOAPAction: 'test_demo'},
                path : '/axis2/services/ws_commandes',
                body : {
                    content: request.toString(),                  
                    contentType: 'text/xml; charset=utf-8'                
                }               

            };
            var result = WL.Server.invokeHttp(input);               
            return result.Envelope.Body.test_demo_response;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:40:59.467

看起来您正在向 WSDL 发出请求，而不是向服务本身发出请求。

# html - 如何消除表格和tr之间的差距

> ID：15428616
> 
> 赞同：4
> 
> 时间：2013-03-15T09:20:54.010
> 
> 标签：html

```
 <table width="33%" border="0" border-spacing: 0px; cellpadding="0" cellspacing="0">
  <tr>
    <td colspan="4"><img src="01.png" width="619" height="143" " /></td>
  </tr>
    <tr>
      <td height="13" valign="top"><img 02.png" width="75" height="13" /></td>
      <td width="32%" valign="top"><img src="03.png" width="200" height="13" /></td>
      <td width="56%" colspan="2" valign="top"><04.png" width="344" height="13" /></td>
    </tr>
    <tr>
  <td colspan="4" valign="top"><img 05.png" width="619" height="150" /></td>
</tr>
<tr>
  <td colspan="4" valign="top"><table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td width="85%"><img src="06.png" width="474" height="28" /></td>
      <td width="11%"><img src="07.png" width="71" height="28" /></td>
      <td width="4%"><img src="08.png" width="74" height="28" /></td>
    </tr>
  </table></td>
    </tr>
    <tr>
      <td colspan="4" valign="top"><img src="09.png" width="619" height="144" /></td>
    </tr>
    <tr>
      <td colspan="4" valign="top"><table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="76%" height="32"><img src="10.png" width="474" height="32"/></td>
    <td width="12%"><img src="11.png" width="71" height="32"/></td>
    <td width="12%"><img src="12.png" width="74" height="32"/></td>
  </tr>
</table></td>
    </tr>
    <tr>
      <td colspan="4" valign="top"><img src="13.png" width="619" height="140" /></td>
    </tr>
    <tr>
      <td colspan="4" valign="top"><table width="99%" border="0" cellpadding="0" cellspacing="0">
      <tr>
    <td width="76%"><img src="14.png" width="474" height="36"/></td>
    <td width="12%"><img src="15.png" width="71" height="36" /></td>
    <td width="12%"><img src="16.png" width="74" height="36"/></td>
  </tr>
</table></td>
    </tr>
    <tr>
    <td height="109" colspan="4" rowspan="2" valign="top"><img 19.png" width="619" /></td>
  </tr>
</table> 
```

我的电子邮件模板中有此代码。当我在本地页面上编译它时，它工作正常，但是当我通过电子邮件发送它时，行和表之间出现了间隙。我也试过这个

```
 <style>
table { border-spacing: 0px; }
</style> 
```

但没有奏效。有人知道这个问题吗？

或者我应该如何在php中打印它？以便它作为电子邮件中的图像发送。因为收到电子邮件后，当我转发它时，它显示我是正确的，因为它变成了图像。所以我想在脚本中拍摄电子邮件之前将其制作为图像。但是我怎样才能在 php 中打印这个 html 呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T09:26:35.147

```
<table ... border-spacing: 0px; ...> 
```

这不是有效的标记。`border-spacing`将被放在一个`style`属性中：

```
<table ... style="border-spacing: 0px;" ...> 
```

要删除间距，您只需添加：

```
table {
    border-collapse: collapse;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:27:48.457

尝试这个

```
<table cellspacing="0" cellpadding="0">
</table> 
```

# neo4j - 在 neo4j 中有一种方法可以在 2 个以上的随机节点之间获取路径，这些节点的关系方向未知

> ID：15428617
> 
> 赞同：0
> 
> 时间：2013-03-15T09:21:00.357
> 
> 标签：neo4j, cypher

我有一个场景，我有超过 2 个随机节点。

我需要获得连接所有三个节点的所有可能路径。我不知道关系的方向和关系类型。

**示例**：我在图形数据库中有三个节点`person->Purchase->Product`。

我需要得到连接这三个节点的路径。但我不知道我需要查询的顺序，例如，如果我将查询作为 person-Product-Purchase，它不会返回任何行，因为顺序不正确。

那么在这种情况下，我应该如何构建查询？

简而言之，我需要找到两个以上节点之间的路径，其中可能以用户知道的任何顺序提及 match 子句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:51:57.730

您可以在 中列出多个绑定标识符中的所有节点`start`，然后您`match`会以任何顺序找到匹配的节点。如果需要，您可以对 N 个项目执行此操作。例如，这里有 3 个项目的查询：

```
start a=node:node_auto_index('name:(person product purchase)'), 
      b=node:node_auto_index('name:(person product purchase)'), 
      c=node:node_auto_index('name:(person product purchase)') 
match p=a-->b-->c 
return p; 
```

[http://console.neo4j.org/r/tbwu2d](http://console.neo4j.org/r/tbwu2d)

我实际上只是发表了一篇关于如何`start`工作的博客文章，这可能会有所帮助：
[http ://wes.skeweredrook.com/cypher-it-all-starts-with-the-start/](http://wes.skeweredrook.com/cypher-it-all-starts-with-the-start/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:42:07.403

进行多次查询是不可接受的吗？在您的情况下，您将自动生成 6 个具有所有可能组合的查询（变量数量的因子）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-03T16:26:42.983

一个可能的解决方案是首先获得三组节点（`s`, `m`, `e`）。这些集合可能与问题中的相同（或包含部分或完全不同的节点）。集合很重要，因为起始、中间和结束节点不是固定的。

这是带有添加节点的[Matrix 示例的代码。](http://console.neo4j.org/r/poqbuk)

```
match (s) where s.name in ["Oracle", "Neo", "Cypher"]
match (m) where m.name in ["Oracle", "Neo", "Cypher"] and s <> m 
match (e) where e.name in ["Oracle", "Neo", "Cypher"] and s <> e and m <> e 
match rel=(s)-[r1*1..]-(m)-[r2*1..]-(e)
return s, r1, m, r2, e, rel; 
```

附加`where`子句确保同一节点不会在一个结果行中使用两次。这些关系分别与`*1..`节点之间的`s`一条`m`或多条边（`m``e`

请注意，此处使用 cypher 3 语法。

# ios - ios 中的 com.facebook.sdk 错误 2

> ID：15428623
> 
> 赞同：0
> 
> 时间：2013-03-15T09:21:11.687
> 
> 标签：ios, facebook-graph-api

When choosing not to allow a 'Connect' to a Facebook app, I'm stuck with Facebook throwing "com.facebook.sdk error2." 即使在重新安装我的应用程序之后，我也会出现错误。

这是 Facebook SDK 中的错误还是我遗漏了什么？

我已经浏览了 developer.facebook.com 上的所有可用帖子以及一些错误，我还根据建议对我的代码进行了一些更改，但我的用户仍然报告同样的问题。

我已经关注[了这个](https://stackoverflow.com/questions/12620760/choosing-not-now-when-accepting-app-causes-com-facebook-sdk-error2)类似的问题，但没有解决方案。

# c# - 对象通过引用而不是值传递

> ID：15428624
> 
> 赞同：1
> 
> 时间：2013-03-15T09:21:14.880
> 
> 标签：c#, windows-8, windows-phone-8

我正在 windows phone 8 中编写一段代码（c#）（与 windows 8 有同样的问题）。

我想知道，如何传递一个对象的值而不是他的引用。

让我用一个例子来解释：

```
public MyClass
{
    private Foo foo //my object.

    public void Init()
    {
        foo = new Foo();
        foo.age = 5; 
        ChangeFooValue(foo);
    }
    private void ChangeFooValue(Foo temp)
    {
        temp.age = 10; 
        //I want to change temp and NOT foo.
        //But at the end of this 
        //foo.age = 10;
        //and
        //temp.age = 10;
    }
} 
```

**已解决：** 我在课堂上有这个来创建深层副本：

```
public Foo DeepCopy()
        {
            Foo other = (Foo) this.MemberwiseClone();
            return other;
        } 
```

ps：这可能是一个愚蠢的问题（如果是，请提供一些教程以便我自己解决它）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T09:22:38.230

引用类型的地址是按值传递的，这就是您看到这种效果的原因。您可以在传递给函数之前[创建对象的深层副本](https://stackoverflow.com/questions/129389/how-do-you-do-a-deep-copy-an-object-in-net-c-specifically)。

您应该看到：[Jon Skeet 在 C# 中传递的参数](http://www.yoda.arachsys.com/csharp/parameters.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:32:08.520

我更喜欢另一个答案，但还有另一种方法可以用来欺骗对象，使用重载的构造函数。这里描述：

[http://www.codeproject.com/Articles/14686/C-Parameter-Pass-object-by-value-The-copy-construc](http://www.codeproject.com/Articles/14686/C-Parameter-Pass-object-by-value-The-copy-construc)

从那里你可以像这样通过

```
ChangeFooValue( new Foo(foo) ); 
```

# reverse-proxy - 在“cmd”上启动 Squid 时出现“系统错误 1067 已发生”

> ID：15428626
> 
> 赞同：2
> 
> 时间：2013-03-15T09:21:24.223
> 
> 标签：reverse-proxy, squid

我正在尝试在 Windows 7 上使用 Squid（其 2.7STABLE8 版本）反向代理服务。当我尝试从“cmd”（以管理员身份）启动 squid 时，我收到一条错误消息，例如；

“无法启动 Squid 服务

发生系统错误

出现系统错误 1067 消息

进程意外终止”

为了解决它，我尝试了：

*   将“http_port”设置为 80 和 8080

*   禁用用户帐户控制设置。

*   并按照本网站上的说明进行操作：[Configuring a Basic Reverse Proxy in Squid on Windows](http://ashleyangell.com/2009/03/configuring-a-basic-reverse-proxy-in-squid-on-windows-website-accelerator/)

然而，没有一个解决方案奏效。因此，如果有任何其他解决方案，您可能会知道它会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:57:57.603

我检查了我的 cache.log 文件，它报告给；

“致命：ipcache_init：DNS 名称查找测试失败”

因此，在 squid.conf 文件中，我将 dns_testname 设置为；

“dns_testnames 0.0.0.0”

它解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T05:28:33.887

试试这个来检查：

```
squid -k check 
```

我遇到过同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T18:30:09.333

以防万一它对某人有所帮助，我遇到了同样的问题并且磁盘空间不足。我做了一些清理工作，并在几秒钟内重新开始。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T08:10:34.710

当我检查日志时，我看到“c:\squid\var”下没有“logs”文件夹。在我在那里创建“日志”文件夹后，它开始工作。请确保您有“c:\squid\var\logs”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-02T15:36:13.053

我的错误是一样的。我的解决方案是：检查文件 chache 中 C:\squid\var\logs 中的日志，我发现了这个；

commBind：无法将套接字 FD 14 绑定到 192.168.3.12:3128：(10049) WSAEADDRNOTAVAIL，无法分配请求的地址。致命：无法打开 HTTP 端口

在最后一次，我更改了我的服务器的 dir IP，这是我麻烦的根源。在文件 C:\squid\etc\squid.conf 我再次更改它，它解决了我的问题。

# java - java BigDecimal 减法失败

> ID：15428630
> 
> 赞同：7
> 
> 时间：2013-03-15T09:21:39.113
> 
> 标签：java, bigdecimal

我尝试了以下代码。但是使用 BigDecimal 进行减法时会得到不同的结果。

```
 double d1 = 0.1;
    double d2 = 0.1;
    System.out.println("double result: "+ (d2-d1));

    float f1 = 0.1F;
    float f2 = 0.1F;
    System.out.println("float result: "+ (f2-f1));

    BigDecimal b1 = new BigDecimal(0.01);
    BigDecimal b2 = new BigDecimal(0.01);

    b1 = b1.subtract(b2);
    System.out.println("BigDecimal result: "+ b1); 
```

结果：

```
double result: 0.0
float result: 0.0
BigDecimal result: 0E-59 
```

我仍在努力。谁能澄清一下。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T09:35:24.293

[[*这里有很多答案告诉您二进制浮点不能完全表示 0.01，并暗示您看到的结果在某种程度上是不精确的。虽然第一部分是正确的，但这并不是这里真正的核心问题。*]]

* * *

答案是“0E-59”**等于**0。回想一下，a`BigDecimal`是未缩放的值和十进制比例因子的组合：

```
System.out.println(b1.unscaledValue());
System.out.println(b1.scale()); 
```

显示：

```
0
59 
```

正如预期的那样，未缩放的值为**0 。**“奇怪”的比例值只是 0.01 的非精确浮点表示的十进制扩展的产物：

```
System.out.println(b2.unscaledValue());
System.out.println(b2.scale()); 
```

显示：

```
1000000000000000020816681711721685132943093776702880859375
59 
```

下一个明显的问题是，为方便起见，为什么不`BigDecimal.toString`直接显示`b1`为“ `0`”？答案是字符串表示必须是明确的。来自[Javadoc 的`toString`](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#toString%28%29)：

> `BigDecimal`可区分值与此转换的结果之间存在一对一的映射。也就是说，每个可区分的`BigDecimal`值（未缩放的值和比例）都有一个唯一的字符串表示作为使用的结果`toString`。`BigDecimal`如果使用构造函数将该字符串表示转换回 a `BigDecimal(String)`，则将恢复原始值。

如果它只是显示“ `0`”，那么您将无法回到这个确切的`BigDecimal`对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T09:24:37.727

使用 String 中的构造函数：`b1 = new BigDecimal("0.01");`

[Java 精度损失](https://stackoverflow.com/questions/2389457/java-loss-of-precision)

（幻灯片 23） [http://strangeloop2010.com/system/talks/presentations/000/014/450/BlochLee-JavaPuzzlers.pdf](http://strangeloop2010.com/system/talks/presentations/000/014/450/BlochLee-JavaPuzzlers.pdf)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T09:23:18.970

有趣的是，这些值似乎相等，而减法确实给你零，这似乎只是打印代码的问题。以下代码：

```
import java.math.BigDecimal;
public class Test {
    public static void main(String args[]) {
        BigDecimal b1 = new BigDecimal(0.01);
        BigDecimal b2 = new BigDecimal(0.01);
        BigDecimal b3 = new BigDecimal(0);
        if (b1.compareTo(b2) == 0) System.out.println("equal 1");
        b1 = b1.subtract(b2);
        if (b1.compareTo(b3) == 0) System.out.println("equal 2");
        System.out.println("BigDecimal result: "+ b1);
    }                          
} 
```

输出*两条* `equal`消息，指示值**相同**并且减去时得到**零。**

您可以尝试将此作为一个错误提出来，看看 Oracle 会带来什么。他们很可能只是声明`0e-59`仍然为零，因此不是错误，或者[BigDecimal 文档页面](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#toString%28%29)上描述的相当复杂的行为正在按预期工作。具体来说，这一点指出：

> 可区分的 BigDecimal 值与此转换的结果之间存在一对一的映射。也就是说，作为使用 toString 的结果，每个可区分的 BigDecimal 值（未缩放的值和比例）都具有唯一的字符串表示形式。如果使用 BigDecimal(String) 构造函数将该字符串表示转换回 BigDecimal，则将恢复原始值。

原始值需要可恢复的事实意味着`toString()`需要为每个比例生成一个唯一的字符串，这就是你得到`0e-59`. 否则，将字符串转换*回*a`BigDecimal`可能会给您一个不同的值（未缩放值/缩放元组）。

如果您真的*希望*零无论比例如何都显示为“0”，您可以使用以下内容：

```
if (b1.compareTo(BigDecimal.ZERO) == 0) b1 = new BigDecimal(0); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T09:26:37.897

所以真正的问题是：使用以下代码，

```
BigDecimal b1 = new BigDecimal(0.01);
BigDecimal b2 = new BigDecimal(0.01);
b1 = b1.subtract(b2); 
```

为什么要`b1.toString()`评估`"0E-59"`而不是评估类似的东西`"0.0"`，`"0E0"`或者只是`"0"`？

* * *

*原因*是`toString()`打印. _ 有关详细信息，请参阅[BigDecimal.toString()](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#toString%28%29)。*`BigDecimal`*

 *最后，`0E-59` **是** `0.0`- 它在`0*10^59`数学上计算为 0。因此，意想不到的结果是`BigDecimal`.

要获取浮点数或双精度值，请使用

```
b1.floatValue()); 
```

或者

```
b1.doubleValue()); 
```

两者都评估为`0.0`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T09:23:51.220

你必须得到返回值：

```
BigDecimal b3 = b1.subtract(b2);
System.out.println("BigDecimal result: "+ b3); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-15T09:31:48.443

[BigDecimal（双值）](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29)

> 1.此构造函数的结果可能有些不可预测。有人可能会假设用 Java 编写 new BigDecimal(0.1) 会创建一个正好等于 0.1 的 BigDecimal（未缩放的值 1，缩放为 1），但它实际上等于 0.10000000000000000555511151231257827021181583404541015625。这是因为 0.1 不能完全表示为双精度数（或者，就此而言，不能表示为任何有限长度的二进制分数）。因此，传递给构造函数的值并不完全等于 0.1，尽管看起来如此。
> 
> 2\. 另一方面，String 构造函数是完全可预测的：编写 new BigDecimal("0.1") 会创建一个 BigDecimal，它完全等于 0.1，正如人们所期望的那样。因此，一般建议优先使用 String 构造函数。
> 
> 3.当必须将double用作BigDecimal的源时，请注意此构造函数提供精确转换；它与使用 Double.toString(double) 方法然后使用 BigDecimal(String) 构造函数将双精度转换为字符串的结果不同。要获得该结果，请使用静态 valueOf(double) 方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-15T09:28:12.217

这是一个已知问题，BigDecimal(double val) API*此构造函数的结果可能有些不可预测。*虽然在这种交互中看起来真的很奇怪。实际原因是 new BigDecimal(0.01) 产生一个具有近似值的 BigDecimal

```
0.01000000000000000020816681711721685132943093776702880859375 
```

它具有很长的精度，因此减法的结果也具有很长的精度。

无论如何，我们可以这样解决“问题”

```
BigDecimal b1 = new BigDecimal("0.01");
BigDecimal b2 = new BigDecimal("0.01"); 
```

或者我们可以使用设置精度的构造函数

```
BigDecimal b1 = new BigDecimal(0.01, new MathContext(1));
BigDecimal b2 = new BigDecimal(0.01, new MathContext(1)); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-20T07:08:10.290

像这样使用：

```
BigDecimal b1 = BigDecimal.valueOf(0.01);
BigDecimal b2 = BigDecimal.valueOf(0.01);

b1 = b1.subtract(b2);
System.out.println("BigDecimal result: "+ b1); 
```*

# java - Apache Santuario 签名元素位置

> ID：15428638
> 
> 赞同：5
> 
> 时间：2013-03-15T09:22:22.387
> 
> 标签：java, xml, apache, signature

如何使用 apache santuario 签署文档，以便签名进入标签内部而不是 MyXML 标签的末尾？

```
<MyXML>
    <SignaturePlace></SignaturePlace>
    <DataToSign>BlaBlaBla</DataToSign>
</MyXML> 
```

在标准 JSE dsig 库中有 javax.xml.crypto.dsig.dom.DOMSignContext 类，其构造函数采用 2 个参数 - RSA 私钥和生成的 XMLSignature 父元素的位置。apache santuario 的实现中是否有类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-15T20:03:00.380

是的，您可以使用 Apache Santuario 做到这一点。

下面是使用上面的示例 XML 执行此操作的示例代码：

```
// Assume "document" is the Document you want to sign, and that you have already have the cert and the key

// Construct the signature and add the necessary transforms, etc.
XMLSignature signature = new XMLSignature(document, null, XMLSignature.ALGO_ID_SIGNATURE_RSA_SHA1);
final Transforms transforms = new Transforms(document);
transforms.addTransform(Transforms.TRANSFORM_ENVELOPED_SIGNATURE);
transforms.addTransform(Transforms.TRANSFORM_C14N_EXCL_OMIT_COMMENTS);
signature.addDocument("", transforms, Constants.ALGO_ID_DIGEST_SHA1);

// Now insert the signature as the last child of the outermost node
document.getDocumentElement().appendChild(signature.getElement());

// Finally, actually sign the document.
signature.addKeyInfo(x509Certificate);
signature.addKeyInfo(x509Certificate.getPublicKey());
signature.sign(privateKey); 
```

这种情况很简单，因为您希望签名成为最外层节点的最后一个子节点。如果要在第 3 个子节点之前插入签名，首先要获取一个指向要在之前插入签名的节点的 Node，然后使用“insertBefore()”方法。

```
final Node thirdChildNode = document.getFirstChild().getNextSibling().getNextSibling();
document.getDocumentElement().insertBefore(signature.getElement(), thirdChildNode); 
```

# php - PHP mcrypt 有时工作有时其他时间不工作 - 完全随机

> ID：15428644
> 
> 赞同：1
> 
> 时间：2013-03-15T09:22:54.587
> 
> 标签：php, encryption, mcrypt

我有一个文件加密站点 A 上的某些内容（我们称之为：[http](http://siteA.com/encrypt.php) ://siteA.com/encrypt.php ）和另一个站点上的另一个文件解密站点 A 的加密信息......第二个站点是站点B（我们称之为：[http](http://siteB.com/decrypt.php) ://siteB.com/decrypt.php ）。

使用 mcrypt，站点 A 对信息进行加密，将加密信息发送到站点 B（连同使用 Base64 编码对其进行编码后使用的 IV），站点 B 对其进行解密，然后站点 A 获得解密结果并将其回显到屏幕上. 除了回显解密结果外，它还回显 mcrypt 中使用的“iv”变量。

我将在此处提供这两个文件的内容，但首先，我将解释问题所在。

如果我坐在那里刷新站点 A 上的加密页面（在站点 B 解密后回显解密结果），我会得到 3 种不同类型的结果，完全随机。

有时它工作得很好，我看到屏幕上回显了正确的 IV 和正确的解密文本。

然后其他时候，我看到屏幕上回显了完全错误的 IV，并且解密的文本仍然是加密的。

然后其他时候，我收到以下错误消息：*IV 参数必须与块大小一样长*

这完全是随机的……没有押韵或理由。以下是每个文件的源代码：

```
//Site A - http://SiteA.com/encrypt.php
<?php
$iv_size = "32";
$iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
$secretkey = hash ("md5", "0yFzFSlTEb7vla5Kv3BHvKcBzX4tJBId5UKAaDDr");

$text = "something";

$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $secretkey, $text, MCRYPT_MODE_CBC, $iv));
$decrypttext = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $secretkey, base64_decode($encrypted), MCRYPT_MODE_CBC, $iv);
$base64iv = base64_encode($iv);

$result = file_get_contents("http://SiteB.com/decrypt.php?urliv=$base64iv&something=$encrypted");

echo $result;
?> 
```

然后是第二个：

```
<?php
//Site B - http://SiteB.com/decrypt.php
$iv_size = "32";
$base64iv = $_GET['urliv'];
$something = $_GET['something'];
$iv = base64_decode($base64iv);
$secretkey = hash ("md5", "0yFzFSlTEb7vla5Kv3BHvKcBzX4tJBId5UKAaDDr");

$decrypttext = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $secretkey, base64_decode($something), MCRYPT_MODE_CBC, $iv);

echo "Decrypted Text " .  $decrypttext;
echo "<br><br>";
echo "IV Variable After Base64_Decode " . $iv;
?> 
```

我真的可以坐在那里刷新站点 A 脚本的屏幕，它只是工作/不工作/几乎工作，我不知道为什么。有任何想法吗？

# css - 如何使这个 CSS 与 IE 浏览器兼容？

> ID：15428648
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:23:08.667
> 
> 标签：css, cross-browser, compatibility

好吧，我有这个 css 代码，这是用于我和我的朋友托管的网站。但是自从它结束以来，我们收到了一些关于 IE 用户的小抱怨，我不知道如何使用 IE 浏览器来实现这一点，有人可以帮我解决这个问题吗？我听说这不应该那么难，但我不知道从哪里开始。

```
#table1 {

    font-family: open sans condensed;
    background-color: #FFF;
    border-collapse: collapse;
    margin: auto;
    padding: 100%;
}

#table11 {
    font-family: open sans condensed;
    background-color: #FFF;
    border-collapse: collapse;
    margin: auto;
}

th {
    font-family: open sans condensed;
    background-color: #CCC;
    font-size: 25px;

    border-style: solid;
    border-width: 3px;
    box-shadow: 0px 0px 8px #FFF;
    border-color: black;
    text-align: left;
    vertical-align: bottom;
}   

td {
    background-color: #FFF;
    border-style: solid;
    border-width: 3px;
    box-shadow: 0px 0px 8px #FFF;
    border-color: black;
    text-align: left;
    vertical-align: bottom;
}

/*#table {
    top: -500px;
    /*Z-index: 19999px;
    background-color: #FFF;
    border-style: solid;
    border-width: 3px;
    box-shadow: 0px 0px 8px #FFF;
    border-color: black;
    text-align: left;
    vertical-align: bottom;
} This does nothing but it ruins the CSS if not commmented*/

a:link {
    font-size: 20px;
    vertical-align: middle;
    color: #A00000   ;
    font-family: julius sans one;
    font-weight: 900px;
    text-decoration: none;
    vertical-align: bottom;
}

a:visited {
    color: #000;
    vertical-align: middle;
    text-decoration: none;
    vertical-align: bottom;
}

a:hover {
    color: rgb(129,129,129);
    font-size: 20px;
    vertical-align: middle;
    text-decoration: underline;
    vertical-align: bottom;
}

a:active {
    color: #A00000   ;
    vertical-align: middle;
    text-decoration: none;
    vertical-align: bottom;
}

#buttonbox {
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    width: 205px;
    border-radius: 100px;
    border: 1px;
    border-style: solid;
    border-color: #CCCCCC;
    box-shadow: 0px 0px 9px 1px rgba(221,221,221,0.5);
    background-image: linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -o-linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -moz-linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -webkit-linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -ms-linear-gradient(bottom, #04131A 24%, #282E2E 50%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0.24, #04131A),
        color-stop(0.5, #282E2E)
);
}

#buttonbox:hover {
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    width: 205px;
    border-radius: 100px;
    border: 1px;
    border-style: solid;
    border-color: #CCC;
    box-shadow: 0px 0px 9px 1px rgba(221,221,221,0.5) inset;
    background-image: linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -o-linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -moz-linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -webkit-linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -ms-linear-gradient(bottom, #04131A 24%, #282E2E 50%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0.24, #04131A),
        color-stop(0.5, #282E2E)
);
}

#buttonbox:active {
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    width: 205px;
    border-radius: 100px;
    border: 1px;
    border-style: solid;
    border-color: #DDD;
    box-shadow: 0px 0px 9px 15px #CCC inset;
    background-image: linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -o-linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -moz-linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -webkit-linear-gradient(bottom, #04131A 24%, #282E2E 50%);
    background-image: -ms-linear-gradient(bottom, #04131A 24%, #282E2E 50%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0.24, #04131A),
        color-stop(0.5, #282E2E)
);
}

#button {
    font-family: open sans condensed;
    color: #4d4d4d;
    font-size: 25px;
}

#button:hover {
    font-family: open sans condensed;
    color: #8d8d8d;
    font-size: 25px;
    text-decoration: none;
}

#div1 {

}

#body {
    background: rgb(33, 133, 197) url('images/escheresque_ste.png');
    margin: auto;   
    top: 30px;
}

#submit {
    width: 155px;
    float: right;
}

#register {
    vertical-align: middle;
    margin: auto;
} 
```

但目前我不知道它是否与 IE 浏览器兼容，因为它使用了一些新的 CSS3 样式。还要注意我对 CSS3/CSS 有点陌生，但如果你们能在这里帮助我，我将非常感激。这里是 HTML/PHP（不要抱怨过时的 PHP 我正在处理它）：

```
<?php
    //Connects to the Database
    include ('db.php');
    //Starts a query to fetch the data from the table
    $data = mysql_query("SELECT * FROM hf_osu") or die(mysql_error());
    if(!$data) {
        echo "3rr0rz";
        exit;
    }

?>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="css.css">
        <link href='http://fonts.googleapis.com/css?family=Lobster|Fjalla+One|Julius+Sans+One|Passion+One:400,700,900|Lobster+Two:400,400italic,700,700italic|Open+Sans+Condensed:300,300italic,700&subset=latin,latin-ext,cyrillic-ext,cyrillic,vietnamese,greek,greek-ext' rel='stylesheet' type='text/css'>
    </head>
    <body id="body">
                <div id="buttonbox">
                    <a href="/register.php" target="_blank" id="button">Register here</a>
                </div>
                <!--Writes the table and data.-->
                <table id="table1">
                            <th>Hackforums Name</th>
                            <th>Osu! name</th>
                    <?php while($info = mysql_fetch_array($data)) : ?>
                        <tr>
                            <td><a href="<?php echo $info['Hackforums_PLink'] ?>"><?php echo $info ['Hackforums_UName'] ?></a></td>
                            <td><a href="<?php echo $info['Osu_PLink'] ?>"><?php echo $info ['Osu_UName'] ?></a></td>
                        </tr> 
                    <?php endwhile; ?>
                </table>
                <!--<table id="table1">
                        <tr >
                            <th>Hackforums Name</th>
                            <th>Osu! Name</th>
                        </tr>
                        <tr>
                            <td><a href="http://www.hackforums.net/member.php?action=profile&uid=1096116">agsking</a> </td> <td><a href="http://osu.ppy.sh/u/agsking">agsking</a></td>
                        </tr>
                        <tr>
                            <td><a href="http://www.hackforums.net/member.php?action=profile&uid=746220">Hentai</a> </td><td> <a href="http://osu.ppy.sh/u/hfhentai">HFHentai</a></td>
                        </tr>
                        <tr>
                            <td><a href="http://www.hackforums.net/member.php?action=profile&uid=1464743">Kirito</a> </a></td> <td><a href="http://osu.ppy.sh/u/ScumbagSup">ScumbagSup</a></td>
                        </tr>   
                        <tr>
                            <td><a href="http://www.hackforums.net/member.php?action=profile&uid=1074228">Ryuuji Takasu</a> </td> <td><a href="http://osu.ppy.sh/u/Plainside">Plainside</a></td>
                        </tr>
                </table>-->
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:25:09.457

### 对 Internet Explorer 6、7 和 8 的 CSS3 支持

> 它是什么？
> 
> IE-CSS3 是一个脚本，它为即将到来的 CSS3 标准中的一些新样式提供 Internet Explorer 支持。

### [读](http://fetchak.com/ie-css3/)

### [选择性](http://selectivizr.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:29:45.223

[CSS 技巧](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)，有一篇关于如何添加仅 IE 样式表的非常好的文章，请记住，您必须为此制作一个全新的样式表。但我发现它非常有用。

# sql - 如何使用分组结果更新表

> ID：15428652
> 
> 赞同：2
> 
> 时间：2013-03-15T09:23:22.123
> 
> 标签：sql, oracle, sql-update

我是一名新手，最近参与了一项从我们业务的一个领域中删除序列化的项目（因此，有问题的材料成为无差别的散装部件，而不是单独识别的物品）。

作为这个项目的一部分，我需要对部分持有的单位数量求和，然后用这个值更新一个表。这是我的第一次尝试：

```
UPDATE TABLE(AVT) a
SET a.qty = (Select part_no, sum(b.qty) from inventory_part_in_stock_tab b
where b.contract = '12505'
group by b.part_no
WHERE a.part_no = b.part_no); 
```

我意识到这是完全不正确的，但希望能准确说明我正在尝试做的事情。我设法创建了一个基于光标的程序，我认为该程序可以实现我想要的，但实用性却很慢。

这会在屏幕上以列表形式生成正确答案，但不会更新文件！

```
Select part_no, sum(qty) from inventory_part_in_stock_tab
where contract = '12505'
group by part_no 
```

我们正在运行 Oracle 9i 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:37:20.887

正确代码：

```
UPDATE TABLE AVT a
SET a.qty = (Select sum(b.qty)
               from inventory_part_in_stock_tab b
              where b.contract = '12505'
                AND b.part_no = a.part_no); 
```

`UPDATE`您的查询中的错误是您正在`SELECT`输入两列 -`part_no`而`sum(b.qty)`当您只更新一列时 - `a.qty`。

此外，您的查询子查询中有两个`WHERE`子句。看起来那确实是.之后的一个子句。你不必那样做。`SELECT``UPDATE``HAVING``GROUP BY`

# ruby - 内部舍入问题：对 Ruby 浮点数求和的准确方法？

> ID：15428659
> 
> 赞同：6
> 
> 时间：2013-03-15T09:23:49.300
> 
> 标签：ruby

这当然是坏的：

```
(0.1 + 0.1 + 0.1) => 0.30000000000000004

(0.1 + 0.1 + 0.1) == 0.3   # false 
```

我不需要一个完美的总和，只需说两个浮点数相同即可。我能想到的最好的办法是将等式的两边相乘并四舍五入。这是最好的方法吗？

```
((0.1 + 0.1 + 0.1) * 1000).round == (0.3 * 1000).round 
```

更新：我坚持使用 Ruby v1.8.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:42:05.413

准确求和和有效比较是有区别的。你说你想要前者，但看起来你想要后者。底层的 Ruby 浮点算法是 IEEE 的，并且具有最小化累积误差的合理语义，但在使用不能准确表示所有值的表示时总会出现这种情况。为了准确地建模误差，FP 加法不应该产生一个精确的值，它应该产生一个区间，进一步的加法将在区间上进行。

在实践中，许多应用程序不需要详细说明错误，它们只需要进行计算并注意比较不准确，输出十进制表示应该四舍五入。

这是 Float 的一个简单扩展，可以帮助您进行比较。它或类似的东西应该在标准库中，但不是。

```
class Float
  def near_enough?(other, epsilon = 1e-6)
    (self - other.to_f).abs < epsilon.to_f
  end
end

pry(main)> (0.1 + 0.1 + 0.1).near_enough?(0.3)
=> true
pry(main)> (0.1 + 0.1 + 0.1).near_enough?(0.3, 1e-17)
=> false
pry(main)> ( [0.1] * (10**6) ).reduce(:+).near_enough?(10**5, 1e-5)
=> true
pry(main)> ( [0.1] * (10**6) ).reduce(:+).near_enough?(10**5)
=> false 
```

在一般情况下，选择合适的`epsilon`可能会很棘手。你应该阅读[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。我发现 Bruce Dawson 的浮点技巧博客很棒，这是他关于[比较浮点数的章节](http://www.altdevblogaday.com/2012/02/22/comparing-floating-point-numbers-2012-edition/)

如果你真的关心准确性，你可以使用精确的表示来做你的算术。Ruby 提供了一个[Rational](http://ruby-doc.org/stdlib-1.8.7/libdoc/rational/rdoc/Rational.html)类（甚至早在 1.8 中），它让您可以对分数进行精确的算术运算。

```
pry(main)> r=Rational(1,10)
=> (1/10)
pry(main)> (r + r + r) == Rational(3,10)
=> true
pry(main)> (r + r + r) == 0.3
=> true
pry(main)> r.to_f
=> 0.1
pry(main)> (r + r + r).to_f
=> 0.3 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T09:27:50.777

round 方法支持指定要四舍五入的小数位数：[http ://www.ruby-doc.org/core-1.9.3/Float.html#method-i-round](http://www.ruby-doc.org/core-1.9.3/Float.html#method-i-round)

所以

```
 (0.1 + 0.1 + 0.1).round(1) == (0.3).round(1) 
```

……应该不错。

# sql - 更改从另一个查询结果将列添加到临时表

> ID：15428660
> 
> 赞同：0
> 
> 时间：2013-03-15T09:23:50.630
> 
> 标签：sql, sql-server

我有一个查询，它创建一个`#object`带有一列的临时表`(id int)`，我想`#object`用另一个查询结果中的列进行扩展。我试过使用游标：

```
CREATE TABLE #object(ID int)

DECLARE @q int    
DECLARE @getid CURSOR

SET @getid= CURSOR FOR
select Q.Question /*, QR.ResponseText, QR.DynamicQuestionResponseID*/  from     DynamicForms_Question as Q
inner join DynamicForms_QuestionResponse as QR on Q.DynamicQuestionID = QR.DynamicQuestionID 
where Q.ModuleID = 729 
and QR.ResponseDateTime = '2012-12-27 11:31:00'
and QuestionType <> 'Label'
and QuestionType <> 'HR'
order by Q.SortOrder asc

OPEN @getid
FETCH NEXT
FROM @getid INTO @q
WHILE @@FETCH_STATUS = 0
BEGIN
Alter Table #object add -- what can i use here????
FETCH NEXT
FROM @getid INTO @q
END

CLOSE @getid
DEALLOCATE @getid

drop table #object 
```

# node.js - 我可以在 CoffeeScript 中使用保留关键字“in”吗？

> ID：15428673
> 
> 赞同：0
> 
> 时间：2013-03-15T09:24:20.987
> 
> 标签：node.js, coffeescript, socket.io

我正在尝试将**coffeescript**与**socket.io**一起使用。

```
io = socketio.listen(server);
// handle incoming connections from clients
io.sockets.on('connection', function(socket) {
    // once a client has connected, we expect to get a ping from them saying what room they want to join
    socket.on('room', function(room) {
        socket.join(room);
    });
});

// now, it's easy to send a message to just the clients in a given room
room = "abc123";
io.sockets.in(room).emit('message', 'what is going on, party people?');

// this message will NOT go to the client defined above
io.sockets.in('foobar').emit('message', 'anyone in this room yet?'); 
```

**io.sockets.in**无法正确编译。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:27:29.930

在您的问题中，您声明存在编译器错误，但在评论中您说没有。如果有，你真的应该发布你的咖啡脚本代码:)

我假设你在咖啡脚本中有这样的东西：

```
io = socketio.listen server

io.sockets.on 'connection', ->
    socket.on 'room', ->
        socket.join room

room = "abc123"
io.sockets.in(room).emit "message", "foobar"

io.sockets.in("foobar").emit "message", "barbaz" 
```

编译为

```
io = socketio.listen(server);

io.sockets.on('connection', function() {
  return socket.on('room', function() {
    return socket.join(room);
  });
});

room = "abc123";

io.sockets["in"](room).emit("message", "foobar");

io.sockets["in"]("foobar").emit("message", "barbaz"); 
```

正如评论中所述，以下两行在 JavaScript 中是等价的：

```
io.sockets["in"](room).emit("message", "foobar");
io.sockets.in(room).emit("message", "foobar); 
```

您可以通过打开您最喜欢的 JavaScript 控制台来验证这一点：

```
> var test = { foo: "bar" }
> test.foo
'bar'
> test["foo"]
'bar' 
```

# android - httpserver 应该作为 Android 服务运行还是作为 Android 应用程序运行？

> ID：15428679
> 
> 赞同：0
> 
> 时间：2013-03-15T09:24:41.743
> 
> 标签：android, httpserver, nanohttpd

我有一个 Android 服务，它在启动时启动一个管理 Android 应用程序。请注意，我无法取消该应用程序，因为我需要它来进行管理员交互。

Android Service + 应用程序是通过 LAN 连接为大约 10 个 Android 客户端提供服务。我计划使用[nanohttpd](http://elonen.iki.fi/code/nanohttpd/)（一个非常轻量级的 http 服务器）作为 http 服务器与客户端进行通信。现在，问题是，我应该在服务器的服务部分还是应用程序部分实现 nanohttpd？最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:26:21.750

绝对使用服务，它们正是您所需要的——在后台进行大量工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:27:20.150

服务将始终运行，直到您停止它们，所以是的，这就是这样做的方法。

# javascript - 超链接 + Javascript = 一键点击？

> ID：15428680
> 
> 赞同：0
> 
> 时间：2013-03-15T09:24:42.073
> 
> 标签：javascript, html, sharepoint, hyperlink

是否可以将 javascript 集成到超链接中？或者把它变成某种批处理脚本或诸如此类的东西，所以当页面加载时它会调用页面上的按钮 javascript？

为了进一步解释：

我们有这个页面： [http ://work.acceptance.XXXX.com/XXXX_Raffle/Lists/Raffle/overview.aspx](http://work.acceptance.XXXX.com/XXXX_Raffle/Lists/Raffle/overview.aspx)

sharepoint 页面上有一项调查。要显示“弹出”窗口，以便您回答调查中的问题，您需要按下调用此脚本的按钮：

```
javascript:__doPostBack('ctl00$m$g_e999ab40_719f_42fb_bd61_d986f232bdd5$ctl01$ctl00$toolBarTbl$RptControls$ctl00$diidIONewItem',''); 
```

那么，是否有可能以某种方式将页面 + javascript 结合起来，所以他们所要做的就是按下一个链接，或者按下一个超链接，该链接指向服务器上的一个文件，触发所有这些，所以他们立即进入页面 + javascript 会自动弹出，所以他们不必按下按钮？

请记住，当我说“超链接”时，我指的是您会在电子邮件中看到的那种超链接。指向网站或服务器位置的简单链接。

我不太擅长与编程和网页设计有关的所有事情，但我确实可以访问共享点，尽管我需要认真指导如何在除了简单的 webparts 之外添加任何东西。它是 SharePoint Server 2010。

这是按钮的图片以及按下它时会发生什么。 [http://i.stack.imgur.com/gKCG5.jpg](http://i.stack.imgur.com/gKCG5.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:30:00.813

向页面添加一个 onload 事件以使其显示弹出窗口：

```
<script type="text/javascript">
    window.onload = showPopup();

    function showPopup() {
        __doPostBack('ctl00$m$g_e999ab40_719f_42fb_bd61_d986f232bdd5$ctl01$ctl00$toolBarTbl$RptControls$ctl00$diidIONewItem','');
    }
</script> 
```

这需要在您链接到的页面上进行，以便链接将您带到此页面，然后触发此 onload。将它放在页面上的结束标记之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:32:33.247

不可以。您不能构造一个将加载文档然后调用一些 JavaScript 的 URL。

您必须修改您链接到的页面，以便它自动运行 JS。它可以查看 URL 并有条件地运行该函数（例如`if (location.hash === '#foo') { ... }`。）

# windows - 循环遍历批处理文件中的文本文件

> ID：15428684
> 
> 赞同：0
> 
> 时间：2013-03-15T09:24:50.117
> 
> 标签：windows, oracle

使用下面的批处理脚本从列出的数据库中检查一些信息。通过 Dbinfo.txt 文件传递​​数据库详细信息。

```
for /F "tokens=*" %%i in (Dbinfo.txt) do sqlplus -s username/password@%%i @script.sql >>somelogfile.txt 
```

似乎批处理脚本在第一行执行后没有进展，因为我正在为一个数据库获取输出。上面的批处理脚本有问题吗？

# ios - UIWebView 中的基本 URL 错误

> ID：15428687
> 
> 赞同：1
> 
> 时间：2013-03-15T09:24:53.150
> 
> 标签：ios, objective-c, uiwebview

我正在开发一个在 UIWebView 中运行的支付系统。用户在一个站点上填写表格，然后被带到支付网关以处理他们的卡信息。处理完付款后，用户将返回到第一个站点上的确认页面。

在普通浏览器甚至 Mobile Safari 中测试时，这些站点按预期工作。这些站点是黑匣子，我无法更改其中的任何内容。显然，这些站点使用相对 URL，并且出现我的问题是因为我的 UIWebView 正在尝试使用来自第一个域的基本 URL 加载第二个域上的页面。

例如，

1.  [来自http://theform.com/page](http://theform.com/page)的用户发布表单
2.  用户被带到[http://theform.com/OrderCC.aspx?orderRef=e59d7f53a693472cad8a76dd8fb64](http://theform.com/OrderCC.aspx?orderRef=e59d7f53a693472cad8a76dd8fb64)

在第二步中，用户*应该*已经被带到[http://thepaymentgateway.com/OrderCC.aspx](http://thepaymentgateway.com/OrderCC.aspx) ...

我正在尝试拦截对错误基本 URL 的请求，并将它们重新路由到正确的 URL，如下所示：

```
-(BOOL)webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest*)inRequest navigationType:(UIWebViewNavigationType)inType {

  NSString *wrongURL = @"http://theform.com/OrderCC.aspx";
  NSString *request = [[inRequest URL] absoluteString];

  NSString *data = [[NSString alloc] initWithData:[inRequest HTTPBody] encoding:NSASCIIStringEncoding];

  if ([request length] >= 33 && [[request substringWithRange:NSMakeRange(0, 33)] isEqualToString:wrongURL]) {
    [webView loadData:[inRequest HTTPBody] MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://thepaymentgateway.com/OrderCC.aspx%@", [request substringFromIndex:33]]]];
    return NO;
  }
  return YES;
} 
```

运行后，我的 UIWebView 似乎只是显示一个包含 POST 数据字符串的空白页面。我哪里错了？

# android - 导出android应用程序偶尔会错误地打包类

> ID：15428688
> 
> 赞同：2
> 
> 时间：2013-03-15T09:24:56.333
> 
> 标签：android, eclipse, adt, eclipse-adt

在 Eclipse 中，我点击了项目，导出了 Android 应用程序并使用自生成的密钥库进行签名。

1.  导出后，我偶尔会发现 APK 文件的大小比我通常得到的要小。

2.  当 APK 文件大小不正确时，我的应用程序类（即 DataSystem）遇到 CNF 异常。

3.  我提取了正确和不正确的 APK。

4.  在 dex2jar 实用程序的帮助下，我将 classes.dex 转换为 classes_dex2jar.jar 并在 java 反编译器 (jdgui) 中打开。

5.  我观察到父级与其中一个子包合并，因此父级的其他子类不存在。

![在此处输入图像描述](../Images/1e951de4ff832fdc45b2adf3095facb1.png)

由于包装不正确，我在启动应用程序时遇到 ClassNotFoundException。

> java.lang.RuntimeException：无法实例化应用程序 com.tsf.esharp.DataSystem：java.lang.ClassNotFoundException：com.tsf.esharp.DataSystem at android.app.LoadedApk.makeApplication(LoadedApk.java:482) at android.app .ActivityThread.handleBindApplication(ActivityThread.java:3952) 在 android.app.ActivityThread.access$1300(ActivityThread.java:128) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1199) 在 android.os.Handler .dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:137) 在 android.app.ActivityThread.main(ActivityThread.java:4514) 在 java.lang.reflect.Method.invokeNative(本机方法）在 java.lang.reflect.Method.invoke(Method.java:511) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790) 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:557) at dalvik.system.NativeStart.main(Native Method) 引起：java.lang.ClassNotFoundException: com.tsf.esharp.DataSystem at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61) at java。 lang.ClassLoader.loadClass(ClassLoader.java:501) at java.lang.ClassLoader.loadClass(ClassLoader.java:461) at android.app.Instrumentation.newApplication(Instrumentation.java:946) at android.app.LoadedApk.makeApplication (LoadedApk.java:477) ... 11 更多强制完成活动 com.tsf.esharp.ui.activity/.LauncherActivityloadClass(ClassLoader.java:461) at android.app.Instrumentation.newApplication(Instrumentation.java:946) at android.app.LoadedApk.makeApplication(LoadedApk.java:477) ... 11 更多 强制完成活动 com.tsf。 esharp.ui.activity/.LauncherActivityloadClass(ClassLoader.java:461) at android.app.Instrumentation.newApplication(Instrumentation.java:946) at android.app.LoadedApk.makeApplication(LoadedApk.java:477) ... 11 更多 强制完成活动 com.tsf。 esharp.ui.activity/.LauncherActivity

作为预防措施，在构建时我总是观察 APK 的大小，如果它不正常，我会重新构建它。但由于我的应用程序处于开发阶段，组件的添加/删除非常频繁，因此我没有固定的标准尺寸可供比较，因此实际上并不总是可以使用这种预防措施。

这是 ADT 插件的错误吗？请注意，我使用的是最新版本，即 21.1。

任何帮助将非常感激。

# ffmpeg - FFMPEG 实时转码器 aac_latm 音频崩溃

> ID：15428689
> 
> 赞同：0
> 
> 时间：2013-03-15T09:24:56.613
> 
> 标签：ffmpeg, aac, transcode

我正在尝试使用 ffmpeg 作为实时转码器，将电视频道从 udp 输入转码到 rtmp 输出到 wowza 服务器。

我有 2 种输入通道，第一种输入音频是 mp2，第二种输入音频是 acc_latm。

我的问题是当我对 mp2 频道进行转码时一切都很好，但是当我尝试对 aac 频道进行转码时，音频在几个小时后静音。但视频很好。

输出编解码器是：用于视频和 faac 的 libx264 或用于音频输出的 fdk-aac 我尝试了两个 aac 编码器，但它没有改变。

我认为这是ffmpeg aac解码器的问题。但我无法解决这个问题。

我需要一种在线检测问题并重新启动ffmpeg的方法。或更改 ffmpeg 解码器编解码器。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:48:33.233

是的，ffmpeg 不能保证稳定。Zoneminder 用于检测崩溃并在发生这种情况时重新启动进程。尽管 IIRC 他们只是在寻找视频，但您可以查看他们的代码。

我认为如果您可以启用某种程度的详细程度或调试`-v loglevel`（那将是最有效的。想到的另一件事是使用 ffmpeg/avconv 提取生成的音轨并监视文件中的某些模式。或者播放生成的文件并使用 alsa 设备管道连接到脚本。但是，如果您能够可靠地检测到合法静默的中断，则存在疑问。效率也低得多。如果您走那条路，如果您无法确定 alsa 设备设置，请告诉我，我现在手头没有。

# python - GAE：如何在 django 表单中使用 ReferenceProperty？

> ID：15428691
> 
> 赞同：0
> 
> 时间：2013-03-15T09:24:57.587
> 
> 标签：python, google-app-engine, django-forms, referenceproperty

我正在玩弄谷歌应用引擎，但在处理 POST 请求时遇到了问题`ReferenceProperty`。我正在从现有类别中创建一个下拉菜单，如下所示：

```
<select name="mydropdown">
<label for="category">category:</label>
    {% for c in cats %}
        <option value={{ c.title }} name="category"> {{ c.title }} </option>
    {% endfor %}
</select> 
```

该表单有更多字段：

```
<div>
    <label for="title">Title:</label>
    {{ e_form.title }} 
</div>
.... 
```

`{{ e_form }}`在这种情况下，期权价值需要是 的一部分`{{ e_form.category }`。如何建立这样的交叉引用？或者对于我的问题有什么不同的好解决方案？

看看我的模型（在`class CatForm()`其他地方使用）：

```
class Category(db.Model):
   title = db.StringProperty()
   slug = db.StringProperty()
   description = db.StringProperty(multiline=True)

class CatForm(djangoforms.ModelForm):
    class Meta:
        model = Category
        exclude = ['slug']

class Entry(db.Model):
    category = db.ReferenceProperty(Category)
    author = db.UserProperty()
    title = db.StringProperty(required=True)
    slug = db.StringProperty(required=True)
    body = db.TextProperty(required=True)
    published = db.DateTimeProperty(auto_now_add=True)
    updated = db.DateTimeProperty(auto_now=True)

class EntryForm(djangoforms.ModelForm):
    class Meta:
        model = Entry
        exclude = ['published','updated'] 
```

像这样我不能用我的 POST 数据创建一个表单实例。好吧，我可以创建它，但我选择的类别不会在那里。

```
def post(self):
   data = EntryForm(data=self.request.POST)
... 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:38:36.457

如果有人想知道，这里是完整的答案。就像@Daniel 所说，字段名称来自选择而不是选项。所以这就是选择的样子：

```
<select name="category">
    <label for="category">category:</label>
    {% for c in cats %}
       <option>{{ c.title }} </option>
    {% endfor %}
 </select> 
```

您可以使用类别标题创建父类的实例

```
c = self.request.get("category")
cat_get = Category.all().filter("title =", c).get() 
```

或使用密钥作为`option`模板中的名称，如下所示：

```
<option name="{{ c.key }}">{{ c.title }} </option> 
```

然后就可以直接使用key来获取`Category`对象了。

```
 cat_obj = db.get(db.Key(key_name)) 
```

这是我创建新条目所需的所有数据。`commit=False`关键字参数返回一个尚未保存到数据库的对象。这使得手动设置单个属性成为可能。在这种情况下，类别。[有关 Django `save()`-method](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)的详细信息，请参阅此链接。要保存数据，`put()`使用 - 方法。

```
new_entry = form_data.save(commit=False)
new_entry.category = cat_get
new_entry.put() 
```

将所有部分放在一起，处理程序可能看起来像这样。

```
class NewEntry(webapp.RequestHandler):

    def post(self):
        form_data =  EntryForm(self.request.POST)

        if form_data.is_valid():
            c = self.request.get("category")
            cat_get = Category.all().filter("title =", c).get()
            new_entry = form_data.save(commit=False)
            new_entry.category = cat_get
            new_entry.put()
            self.redirect("/main" )
        else:
            self.response.set_status(500) 
```

# html - 按钮在ie中不起作用

> ID：15428692
> 
> 赞同：0
> 
> 时间：2013-03-15T09:25:08.883
> 
> 标签：html, css, internet-explorer

我已经给出了这样的按钮的链接..它在 mozilla 和 chrome 上工作正常但它在 ie9、ie8 和 ie7 上不起作用......

```
 <a href="view_package_details.php?holiday_id=<?php echo $row['holiday_id']; ?>">  <input name="" type="button" class="view-details-btn-input" /> </a> 
```

我有这样的按钮..它在mozilla & chrome & ie9 上工作正常但它在ie8 & ie7 上不起作用......

任何人都可以建议我关于这个....

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:28:29.083

你为什么这样做？

你可以做这样的事情

```
<button onclick="window.location=view_package_details.php?holiday_id=<?php echo $row['holiday_id']; ?>;"/> 
```

否则@Gareth Cornish 是对的，为什么不将 css 应用于`a`标签以使其看起来像一个按钮？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:36:00.110

如果你想使用输入类型和href，那么试试这个。

```
 <input name="" type="button" class="view-details-btn-input" onclick="window.location='view_package_details.php?holiday_id=<?php echo $row['holiday_id']; ?>'" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:37:09.283

您将无法使用超链接内的按钮。用户javascript window.location onclick eventof按钮

# c - 如何在主机将数据包头（IP头，TCP头）发送到网络之前修改它们

> ID：15428694
> 
> 赞同：2
> 
> 时间：2013-03-15T09:25:13.157
> 
> 标签：c, network-programming, linux-kernel

我想在主机将数据包头（IP头，TCP头）发送到网络之前修改它们。

例如，如果我使用 firefox 进行浏览，那么我想拦截来自 firefox 的所有数据包并修改 IP/TCP 标头，然后将它们发送到网络中。

所以基本上，有两个要求：1拦截来自firefox的所有数据包（但不是其他程序）。如果这不可能，是否可以拦截来自特定端口或 ip/端口对的数据包

2 修改IP/TCP头，然后注入网络

有没有办法，API 来实现这一点？libpcap怎么样？有类似的源代码片段吗？我正在使用 linux c

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-12T13:00:13.243

要修改数据包，最好将修改后的数据包注入您的网络中。C 有一个库 libnet，它可以完成与数据包注入相关的所有事情。Python 有 scapy 注入数据包。

现在您可以使用 libent 和 scapy 做一些非常有趣的事情，而不是修改您的数据包 ip/tcp 标头，执行 arp 欺骗，然后注入伪造数据包并将它们重定向到受害者。

Libpcap 用于捕获数据包，但不用于修改数据包。因此，您可以使用 libpcap 构建自己的嗅探器，但要注入/修改数据包，您需要使用 libnet 。

为了让生活更简单，有一些工具，比如 burp suite 等。你可以在转发之前修改 http 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:47:55.180

Razorback 是一个用于深度数据包注入的开源 API。您可以在以下位置找到来源：

[http://sourceforge.net/projects/razorbacktm/files/Razorback/](http://sourceforge.net/projects/razorbacktm/files/Razorback/)

您还可以向他们索取他们提议的系统的源代码。

[http://www.icir.org/vern/papers/pktd-pam03.pdf](http://www.icir.org/vern/papers/pktd-pam03.pdf)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-15T10:23:34.013

它应该适合您[Linux 的网络数据包捕获](http://www.ibm.com/developerworks/linux/tutorials/l-packet/section5.html)。

但它似乎拦截了系统中的所有进程。

* * *

也许你可以使用

```
#include <sys/ptrace.h>
long ptrace (enum __ptrace_request request,
             pid_t pid,
             void *addr,
             void *data); 
```

并挂钩 send(2) 或 recv(2) 以修改 tcp 标头。

# php - 如何将默认值当前日期和时间分配给输入字段

> ID：15428703
> 
> 赞同：1
> 
> 时间：2013-03-15T09:25:42.467
> 
> 标签：php, codeigniter, codeigniter-2

如何将默认值当前时间戳分配给输入字段然后我想以隐藏的形式插入到数据库中。

```
 <input
    name="status" id="status"
    type="hidden"
    value="<?php echo CURRENT_TIMESTAMP ?>"
  />
</td> </tr> 
```

只需告诉我如何分配默认值（当前 taimestamp）。

因为我们不能在 db 中添加超过 1 的列作为当前时间戳，所以我在 db 表中已经有 1 列当前时间戳，所以我还需要 1，这就是我想添加为隐藏的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:27:32.457

对于隐藏字段，您可以使用 php 函数 date()

```
$data['column_name'] = date('Y-m-d H:i:s');
$data['other_column1'] = 'other value 1';
$data['other_column2'] = 'other value 2';
$data['other_column3'] = 'other value 3';

$this->db->insert('tabel_name',$data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:27:05.087

像这样试试

```
<input type="hidden" value="<?php echo time();?>" name="my_unique"> 
```

而已

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:27:25.807

您将使用以下方式获得当前时间戳：`time();`

所以 ：`<input name="time" type="hidden" value="<?php echo time();?>" >`

参考： http: [//php.net/manual/en/function.time.php](http://php.net/manual/en/function.time.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T00:39:16.650

```
<?php echo date("Y/m/d h:i:s a"); ?> 
```

这个输入可以吗

# maven - 当找不到用于资源过滤的属性时，如何配置 maven 资源插件来抱怨？

> ID：15428706
> 
> 赞同：0
> 
> 时间：2013-03-15T09:26:07.617
> 
> 标签：maven, filter, resources

我的问题很简单：我希望 maven 在资源过滤期间找不到任何属性时给我一些错误消息。
我在官方 Maven 文档中没有找到任何线索。
那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:32:05.967

我建议深入研究可用于此类事情的[maven-enforcer-plugin ：](http://maven.apache.org/enforcer/maven-enforcer-plugin/index.html)

```
<project>
  [...]
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-enforcer-plugin</artifactId>
        <version>1.2</version>
        <executions>
          <execution>
            <id>enforce-property</id>
            <goals>
              <goal>enforce</goal>
            </goals>
            <configuration>
              <rules>
                <requireProperty>
                  <property>basedir</property>
                  <message>You must set a basedir property!</message>
                  <regex>.*\d.*</regex>
                  <regexMessage>The basedir property must contain at least one digit.</regexMessage>
                </requireProperty>
                <requireProperty>
                  <property>project.version</property>
                  <message>"Project version must be specified."</message>
                  <regex>.*(\d|-SNAPSHOT)$</regex>
                  <regexMessage>"Project version must end in a number or -SNAPSHOT."</regexMessage>
                </requireProperty>
              </rules>
              <fail>true</fail>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  [...]
</project> 
```

# ember.js - 创建对象时的 this._super() 问题

> ID：15428713
> 
> 赞同：0
> 
> 时间：2013-03-15T09:26:23.633
> 
> 标签：ember.js

在新的 EmberRC1 版本中，我们似乎无法从创建的对象中调用超类方法。我有一些标准的 mixin 和视图，用于创建或扩展到其他一些对象。我有一些方法被覆盖，但我仍然需要执行我们可以在以前的版本中使用`this._super()`. 但是在较新的版本中，当我创建一个对象时，这不会发生。

```
 window.App = Ember.Application.create();

App.Router.map(function(){
    this.resource("users");
});

App.UsersView = Ember.ContainerView.extend({
    init : function(){
        this._super();
        this.pushObject(App.TestView.create({
            didInsertElement : function() {
               this.$().append(' <br><h4>Appended at Object</h4> ');
            }
        }))
    }
});

App.TestView=Ember.View.extend({
    templateName:'test',
    didInsertElement : function() {
       this.$().append(' <br><h4>Appended at Class</h4> ');
    }
}); 
```

那么这部分是完全删除还是我们可以通过其他方式实现这个超级调用？

要了解我的问题是[jsfiddle](http://jsfiddle.net/codejack/TaWAU/9/)。

**PS：**我知道我可以拥有需要使用其他方法名执行的代码并调用相同的方法。但是，如果我对此有解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:00:58.530

您仍然可以从 init 方法调用 this._super() ，它将调用父级。已删除的是在对象上调用 create 并传入 init 方法。有一个 createWithMixin 方法仍然允许该功能。

这里有一篇关于这个功能的非常详细的帖子：

[ember 中 .create() 和 .createWithMixins() 的区别](https://stackoverflow.com/questions/15091828/difference-between-create-and-createwithmixins-in-ember)

# c# - 没有列表如何存在 之后呢？

> ID：15428715
> 
> 赞同：5
> 
> 时间：2013-03-15T09:26:32.070
> 
> 标签：c#, list, types

我遇到了这种情况，`List`在它之后没有指定类型`<>`：

```
List someVar = new List(); 
```

但是，当我在 Visual Studio 中尝试此操作时，出现错误。VS不让我`List`这样声明的原因是什么？

让我告诉你我在哪里看到的：

```
public override IEnumerable SomeMethod()
        {
            List someVar= new List();
            // more code
            return someVar;
        } 
```

PS 在联系了项目的所有者后，结果发现 Wordpress在and`<>`之后删除了标签，所以它实际上应该是and`List``IEnumerable``List<SomeClass>``IEnumerable<SomeClass>`

```
public override IEnumerable<SomeClass> SomeMethod()
        {
            List<SomeClass> someVar= new List<SomeClass>();
            // more code
            return someVar;
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T09:34:24.197

没有一个名为`List`. 有`ArrayList`，但是：点击`List`并按下`f12`。这将向您显示它的声明位置。有两种选择：

*   在本地项目中声明了一个与`List`此*无关`List<T>`*的类；例如：

    ```
    class List { ...} // here we go; a class called List 
    ```

*   别名（位于`using`文件顶部）已被用作欺骗`List`名称；例如：

    ```
    using List = System.Collections.Hashtable; 
    ```

    或者

    ```
    using List = System.Collections.Generic.List<int>; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:33:02.310

您收到错误，因为`List`.NET Framework 中不存在该类。如果要使用可以容纳任何类型对象的非泛型列表，请使用[ArrayList](http://msdn.microsoft.com/en-us/library/system.collections.arraylist%28v=vs.110%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:32:16.447

我不认识它（我以为是`ArrayList`在`List<T>`到达之前？）。无论哪种方式，它都是在实现泛型之前发明的旧类。我会用`List<object>`.

# spring - Hibernate-Spring Web 容器错误

> ID：15428718
> 
> 赞同：0
> 
> 时间：2013-03-15T09:26:35.510
> 
> 标签：spring, hibernate, configuration

您好，我是 Hibernate 的新手。

我用 Hibernate Tools 生成了一个数据库访问模块。生成器生成 DAOS 和 Hibernate Bean 的代码。

当我在一个简单的 Java 应用程序中测试这个模块时，一切正常，但是当我在一个 Spring Web 应用程序中测试它时，我得到了一个非常奇怪的错误。由于我的模块是一个独立的 jar，它应该访问数据库而不考虑在简单的 Java 应用程序或 Web 应用程序中执行的情况。我的网络应用程序的代码是：

```
 @Controller
  @RequestMapping("/")
  public class Controller implements ApplicationContextAware
  {

   private ApplicationContext applicationContext;

   @RequestMapping(value = "/purchased/songs", method = RequestMethod.GET)
   public String home(Model model)
   {   

     SessionManager.startOperation();

     ChargeTryDAOBase ctdb=new ChargeTryDAOBase();

     List <ChargeTry> data=ctdb.findByRemoteId("dsfsdfsdf8");

     SessionManager.endOperation();

     model.addAttribute("result", "data" );

     return "home";
   }

   @Override
   public void setApplicationContext(ApplicationContext arg0) throws BeansException
   {
     this.applicationContext = arg0;
   }

} 
```

在 Tomcat 上运行此代码时，出现以下错误：

```
 org.springframework.web.util.NestedServletException: Handler processing
 nested exception is java.lang.NoSuchMethodError: 
 org.hibernate.SessionFactory.getCurrentSession()Lorg/hibernate/Session;

    .....         

 java.lang.NoSuchMethodError:
 org.hibernate.SessionFactory.getCurrentSession()Lorg/hibernate/Session; 
```

当我更改一些 Hibernate 依赖项时，我收到以下错误：

```
 java.lang.IllegalStateException: Could not locate SessionFactory in JNDI 
```

当我在一个简单的 Java 应用程序中测试上述代码时，一切正常。

这是一个spring-hibernate配置问题吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:22:21.683

请学习

**1：** [http ://www.javatpoint.com/hibernate-and-spring-integration](http://www.javatpoint.com/hibernate-and-spring-integration)

和

**2** [http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/](http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/)

深入了解 Spring MVC 和 Hibernate 集成。

您可以使用 Hibernate 配置文件 - 这是链接 -

[Spring 和 hibernate.cfg.xml](https://stackoverflow.com/questions/471799/spring-and-hibernate-cfg-xml)

但由于您的应用程序位于 Spring 托管容器中，我们强烈建议使用 applicationcontext.xml 来更好地维护和管理代码库和性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:50:21.617

谢谢你的帮助，我终于开始工作了。我按照你的链接搜索了一下。问题是我没有在 hibernate.cfg.xml 文件中启用数据源参数，我还配置了 C3P0 jdbc 连接提供程序。

我最终的 hibernate.cfg.xml 文件是：

```
 <hibernate-configuration>
    <session-factory>
      <property name="hibernate.bytecode.use_reflection_optimizer">true</property>
      <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
       <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
       <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
       <property name="current_session_context_class">thread</property>
       <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/mydb</property>
       <property name="hibernate.connection.username">userdb</property>
       <property name="hibernate.connection.password">12345</property>
       <property name="hibernate.connection.datasource">java:comp/env/jdbc/mydb</property>
       <property name="hibernate.format_sql">true</property>
       <property name="hibernate.use_sql_comments">true</property>

       <property name="hibernate.connection.provider_class">org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider</property>
       <property name="hibernate.c3p0.min_size">2</property>
       <property name="hibernate.c3p0.numHelperThreads">4</property>
       <property name="hibernate.c3p0.max_size">10</property>
       <property name="hibernate.c3p0.timeout">300</property>
       <property name="hibernate.c3p0.max_statements">100</property>
       <property name="hibernate.c3p0.idle_test_period">1800</property>
       <property name="hibernate.c3p0.acquire_increment">2</property>
    <hibernate-configuration>
    <session-factory> 
```

在我的 web.xml 中，我添加了以下几行：

```
<resource-ref>
    <description>This is a MySQL database connection</description>
    <res-ref-name>jdbc/mydb</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
 </resource-ref> 
```

在 Spring 上下文文件中，我添加了以下几行：

```
 <beans:bean id="dataSource"    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
      <beans:property name="driverClassName" value="com.mysql.jdbc.Driver"/>
      <beans:property name="url" value="jdbc:mysql://localhost:3306/mydb"/> 
      <beans:property name="username" value="userdb"/>
      <beans:property name="password" value="12345"/> 
    </beans:bean>  

    <beans:bean id="sessionFactory"  class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
      <beans:property name="dataSource" ref="dataSource" />
      <beans:property name="configLocation">
         <beans:value>classpath:hibernate.cfg.xml</beans:value>
      </beans:property>
    </beans:bean> 
```

奇怪的是，使用默认的 Hibernate 连接提供程序，上述解决方案不起作用，但是当我配置 C3P0 时，一切都开始工作了。

谢谢您的帮助。

# sql-server-2008 - 如何将excel数据加载到sql server 2008表中？

> ID：15428725
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:26:59.600
> 
> 标签：sql-server-2008, sql-server-2008-r2

DBMS - 带有管理工作室 (GUI) Excel 文件的 SQL Server 2008 r2 - 列与目标表中的列完全相同

如何将excel表中的数据加载到sql表中？这种做事方式有什么潜在的问题吗？比如某列不允许为null，但excel中有一个null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:05:23.903

将 XLS 数据直接导入 SQL 的最简单方法是使用导入向导。

您可以通过在向导运行时让导入向导为您创建表来执行此操作，或者，您可以事先创建表，然后使用向导并将该表用作目标表。

我更喜欢后一种方法，因为我喜欢用我想要的数据类型来控制我的表创建。

要找到导入向导，只需右键单击数据库名称，任务 -> 导入数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:53:08.813

您还可以在 SQL Server Integration Services 中使用 Excel 数据源。不过有一些注意事项：

1.  如果您在 64 位操作系统中运行，请确保您的包属性设置为禁用 64 位运行时，否则从 Excel 2003-2007 导入或将失败。您将收到连接错误。
2.  花点时间使用高级编辑器将列缩小到您需要的大小，否则默认情况下每个字段都会显示为 nvarchar(255)，这很浪费空间。如果要映射到现有表，则可能还需要转换数据类型。

这种方法的优点是您可以更轻松地重复使用它，当然您也可以保存向导创建的包。

Joey Morgan
程序员/分析师 负责人 I
WellPoint 医疗补助业务部

# android - 使 EditText 视图（邮政编码）自动加载

> ID：15428729
> 
> 赞同：1
> 
> 时间：2013-03-15T09:27:15.573
> 
> 标签：android, android-widget

我正在开发一个应用程序，当用户单击按钮时，将打开一个新的活动布局。这个新布局包含各种视图。

其中之一是邮政编码`EditText`。我希望这个邮政编码`EditText`自动获取用户的邮政编码`GPS`并填写。为此，我想这样工作：

1.  用户点击一个按钮。
2.  加载新布局。
3.  所有视图都可以完美加载，并且在邮政编码前`EditText`会显示一个加载按钮，并通过 GPS 自动显示。

我如何处理第三点，即显示加载直到未获取用户邮政编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:41:56.247

以以下代码段为例。不过，您将不得不填写一些空白。

这就是我`ProgressBar`在我的一个应用程序中显示 a 的方式`Activities`。它有一个 ListView，您必须将其替换为您自己的内容。

```
 <LinearLayout
        android:id="@+id/linlaHeaderProgress"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:orientation="horizontal"
        android:visibility="gone" >

        <ProgressBar
            android:id="@+id/pbHeaderProgress"
            style="@style/Spinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="2dp" >
        </ProgressBar>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="left|center"
            android:padding="2dp"
            android:text="Loading...."
            android:textSize="20sp" >
        </TextView>
    </LinearLayout>

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:cacheColorHint="@android:color/transparent"
        android:divider="#000000"
        android:dividerHeight="0dp"
        android:fadingEdge="none"
        android:persistentDrawingCache="scrolling"
        android:scrollbars="none" >
    </ListView> 
```

现在，在您将此布局映射到您的 Java 代码中`Activity`，将`LinearLayout linlaHeaderProgress`. 请注意，在 XML 本身中，该`android:visibility="gone"`属性设置为`"gone"`.

如果您使用 AsyncTask 来获取邮政编码，则当该过程发生在 中时`doInBackground()`，`ProgressBar`通过切换 中的可见性来显示`linlaHeaderProgress`，`onPreExecute()`如下所示：

```
@Override
protected void onPreExecute() {

    // SHOW THE PROGRESS BAR (SPINNER) WHILE FETCHING POST DETAILS
    linlaHeaderProgress.setVisibility(View.VISIBLE);
} 
```

在`onPostExecute()`, 中再次像这样切换可见性：

```
@Override
protected void onPostExecute(Void result) {

    // HIDE THE PROGRESS BAR (SPINNER) AFTER FETCHING THE POST DETAILS
    linlaHeaderProgress.setVisibility(View.GONE);
} 
```

If you are not using an AsyncTask, but are instead doing the processing in a `Method`, use this at the start of the method: linlaHeaderProgress.setVisibility(View.VISIBLE);. And use this at the end of the method once you have displayed the ZIP code in the EditText: linlaHeaderProgress.setVisibility(View.GONE);

I declare the `LinearLayout linlaHeaderProgress` globally so I can reuse it wherever required. Let me know if this helps, or if you have any further questions for me.

# sql-server - 如何通过sql查询嵌套xml

> ID：15428733
> 
> 赞同：2
> 
> 时间：2013-03-15T09:27:18.583
> 
> 标签：sql-server, xml, sql-server-2005

我正在尝试生成如下所示的 xml：

```
<caption nr="1000">
    <lang code="EN">Brussels</lang>
    <lang code="FR">Bruxelles</lang>
</caption>
<caption nr="2000">
    <lang code="EN">Antwerp</lang>
    <lang code="FR">Anvers</lang>
</caption> 
```

我在 sql 数据库中拥有所有必要的信息，如下所示（sql server 2005）：

```
fld_pcd_cod               fld_pcd_gem             fld_pcd_tal
-------------------------------------------------------------
1000                      Brussels                 EN
1000                      Bruxelles                FR
2000                      Antwerp                  EN
2000                      Anvers                   FR 
```

我用 group by 语句、子查询、distintc 等尝试了许多 sql 查询……我只是无法理解它。

这是我能得到的最好的可行解决方案。但这不是我想要的，因为我必须制作一个新的 XSD。

```
<lang cap="1000" code="FR">BRUXELLES</lang>
<lang cap="1000" code="EN">BRUSSELS</lang>
<lang cap="2000" code="FR">ANVERS</lang>
<lang cap="2000" code="EN">ANTWERP</lang> 
```

这是我用来实现上述 xml 节点的查询

```
SELECT fld_pcd_cod as 'lang/@cap', fld_pcd_tal as 'lang/@code', fld_pcd_gem as 'lang'
FROM tbl_pcd
for XML path(''), type 
```

你们有人对如何解决这个问题有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:32:38.173

`caption`通过 on 获取具有 group by的节点`fld_pcd_cod`并进入`lang`相关子查询。

```
select T1.fld_pcd_cod as "@nr",
       (
       select T2.fld_pcd_tal as "@code",
              T2.fld_pcd_gem as "*"
       from tbl_pcd as T2
       where T1.fld_pcd_cod = T2.fld_pcd_cod
       for xml path('lang'), type
       )
from tbl_pcd as T1
group by T1.fld_pcd_cod
for xml path('caption') 
```

# backbone.js - 下划线的 bindAll：无法读取未定义的属性“绑定”

> ID：15428741
> 
> 赞同：2
> 
> 时间：2013-03-15T09:27:33.637
> 
> 标签：backbone.js, underscore.js

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <title></title>

    </head>
    <body>

    <div id="menu"></div>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
        <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js" type="text/javascript"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.0/backbone.localStorage-min.js" type="text/javascript"></script>  

    <script type="text/javascript">
    var myView = Backbone.View.extend({
        events: {
            'click #menu': 'insideMenuHandler'
        },
    //for event click
        initialize: function() {
            _.bindAll(this, 'insideMenuHandler', 'outsideMenuHandler');
        },

        render: function() {
            // Both <body> and <html> for paranoia.
            $('body, html').on('click', this.outsideMenuHandler);
            // ...
            return this;
        },

        remove: function() {
            // Clean up after ourselves.
            $('body, html').off('click', this.outsideMenuHandler);
            // ...
        },

        // ...
        outsideMenuHandler: function(e) {
            // ...
            return false;
        }
    });

    var v=new myView({el: '#view-goes-here'});
    v.render();

    </script>
    </body>
    </html> 
```

嘿，我是backbone.js 的新手，不明白下面的代码有什么问题，我在哪里更改我的代码以使其正常工作？是绑定函数有问题还是有其他问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:44:11.270

您正在`_.bindAll`排队等候

```
 _.bindAll(this, 'insideMenuHandler', 'outsideMenuHandler'); 
```

但是您`insideMenuHandler`在`view`.

# android - Android位置管理器错误+附加日志文件

> ID：15428742
> 
> 赞同：2
> 
> 时间：2013-03-15T09:27:33.947
> 
> 标签：android, google-maps, gps, locationmanager

我最初有错误的代码，Festus 帮助注意到我有一个空位置：

```
 LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
        Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            double longitude = location.getLongitude();
            double latitude = location.getLatitude(); 
```

我使用了 Festus GPSTracker 类，并按照他的指示在我的活动中添加了它。下面是我的活动课：

```
package com.bob.terranet;

import java.util.List;

    import android.app.Activity;
    import android.content.Context;
    import android.content.Intent;
    import android.location.Criteria;
    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.net.Uri;
    import android.os.Bundle;

    public class Contactus extends Activity {

        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.contactus);

             double latitude = -1, longitude=-1;
              GPSTracker gps = new GPSTracker(Contactus.this);
              if (gps.canGetLocation()) {

                  latitude = gps.getLatitude();
                  longitude = gps.getLongitude();
        }

            String geoUriString = "http://maps.google.com/maps?" + 
                       "saddr=" + latitude + "," +  longitude + "&daddr=" + 33.947917 + "," + 35.645142;

            Intent mapCall = new Intent(Intent.ACTION_VIEW, Uri.parse(geoUriString));

                    startActivity(mapCall);
        }

    } 
```

问题是它总是给我 -1, -1 作为位置，表明网络提供商是错误的，而我有网络连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:35:40.907

您的位置为空

```
Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
```

此调用返回 null 并且您尝试从 null ==> 获取值

```
Caused by: java.lang.NullPointerException     03-15 11:25:50.855: E/AndroidRuntime(9992):     at com.bob.terranet.Contactus.onCreate(Contactus.java:22) 
```

在继续之前尝试检查您的位置是否不为空

有时 GPS_provider 无法正常工作，因此始终建议使用 bestProvider

```
Criteria criteria = new Criteria();
String provider = locationManager.getBestProvider(criteria, false);
Location location = locationManager.getLastKnownLocation(provider); 
```

如果您的问题仍然存在，请使用此类检索您的 lon 和 lat

```
public class GPSTracker implements LocationListener {

    private final Context mContext;

    // flag for GPS status
    boolean isGPSEnabled = false;

    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;

    Location location; // location
    double latitude; // latitude
    double longitude; // longitude

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    // Declaring a Location Manager
    protected LocationManager locationManager;

    public GPSTracker(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                // First get location from Network Provider
                if (isNetworkEnabled) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener
     * Calling this function will stop using GPS in your app
     * */
    public void stopUsingGPS(){
        if(locationManager != null){
            locationManager.removeUpdates(GPSTracker.this);
        }
    }

    /**
     * Function to get latitude
     * */
    public double getLatitude(){
        if(location != null){
            latitude = location.getLatitude();
        }

        // return latitude
        return latitude;
    }

    /**
     * Function to get longitude
     * */
    public double getLongitude(){
        if(location != null){
            longitude = location.getLongitude();
        }

        // return longitude
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    public void onLocationChanged(Location location) {
    }

    public void onProviderDisabled(String provider) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

} 
```

把它放在你的活动中

```
 GPSTracker gps = new GPSTracker(Contactus.this);
      if (gps.canGetLocation()) {

         double latitude = gps.getLatitude();
         double longitude = gps.getLongitude();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:28:52.173

您是否在 Manifast 文件中添加了权限？

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

你`lastKnownLocation`是空的，你会收到一个空指针异常。

试试这个代码来获得你的第一个位置：

```
List<String> matchingProviders = locationManager.getAllProviders();
for (String provider: matchingProviders) {
Location location = locationManager.getLastKnownLocation(provider);
if (location != null) {
float accuracy = location.getAccuracy();
long time = location.getTime();

if ((time > minTime && accuracy < bestAccuracy)) {
  bestResult = location;
  bestAccuracy = accuracy;
  bestTime = time;
}
else if (time < minTime && 
         bestAccuracy == Float.MAX_VALUE && time > bestTime){
  bestResult = location;
  bestTime = time;
}
}
} 
```

取自这里：

[http://android-developers.blogspot.co.il/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.co.il/2011/06/deep-dive-into-location.html)

我建议你也阅读这篇博文......

基本上，此代码将遍历所有可用的提供程序以获得最佳可用位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:14:37.013

这个问题已经被问了几十次了。重要的是要注意 GPS 和 LocationManager 是**事件驱动**的，并且按照**回调**原则运行。换句话说**，当 GPS 修复并触发 OnLocationChanged 而不是 before 时，您将获得位置**。你得等一等。说我现在想要这个位置是不好的，因为你不能拥有它。直到 OnLocationChanged 第一次触发 getLasKnownLocation 将为 null 并且正如其他人所指出的那样，这是您的错误的原因。

# android - com.google.api.client.json.jackson.JacksonFactory

> ID：15428746
> 
> 赞同：1
> 
> 时间：2013-03-15T09:27:49.160
> 
> 标签：android, google-api-java-client

只需下载 google api java 客户端 **google-api-java-client-1.13.2-beta.zip**

并尝试[那里的示例][1] [http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

我已经复制到“libs”文件夹

但

**导入 com.google.api.client.json.jackson.JacksonFactory**

无法解决....

任何评论都有帮助，谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:59:33.350

请遵循此，它将解决您的问题。

![在此处输入图像描述](../Images/fc00d18e2875529fee2caa836554dd47.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:08:39.787

在尝试了 Google API Java Client Version 1.11.0 之后，现在可以了。

看起来谷歌在版本 1.13.x 上改变了它

# fortran - 如何自动将变量为双精度的Fortran90程序转换为实数？

> ID：15428751
> 
> 赞同：0
> 
> 时间：2013-03-15T09:27:57.207
> 
> 标签：fortran, gfortran

每个人

我有一个Fortran90程序，变量是双精度或复数*16，现在我必须编写另一个程序，其变量是实数或复数，其他的都和原来的程序一样。

直接的方法是重写每个声明，但我想知道是否还有其他更简单的方法可以实现这一点，我使用 gfortran 作为编译器。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:39:02.700

可能最干净（尽管不是最简单）的方法是重写您的程序以使变量具有可调节的精度：

```
program test
  implicit none

  integer, parameter :: rp = kind(1.0d0)
  real(rp) :: myreal
  complex(rp) :: mycomplex 
```

通过将参数`rp`（实际精度）设置为`kind(1.0)`代替，`kind(1.0d0)`您可以从双精度切换到单精度。或者，使用与 fortran 2003 兼容的编译器，您也可以在调用模块后使用名称`real64`和名称。（更新：它需要一个与 fortran 2008 兼容的编译器，而不是 fortran 2003，请参阅 IanH 的评论）。`real32``iso_fortan_env`

# hibernate - 集合映射与关联映射

> ID：15428757
> 
> 赞同：2
> 
> 时间：2013-03-15T09:28:19.267
> 
> 标签：hibernate, hibernate-mapping

我是休眠的新手。我正在学习休眠中的映射，在这种情况下，我必须使用集合映射和关联映射。我的困惑是“ `If an entity or class has collection of values for a particular variable, then we can map those values using any one of the collection interfaces available in java`”

在那种情况下，为什么我们要收集而不是单调。请提供一个简单的实时示例，说明我们何时使用集合和关联映射

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:28:54.433

我认为您对收藏和关联感到困惑。

不必每个关联都必须是单个对象，它可以是对象的集合。

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "stock")
public Set<StockDailyRecord> getStockDailyRecords() {
    return this.stockDailyRecords;
} 
```

见：[http ://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example-annotation/](http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example-annotation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T20:45:49.303

集合映射和关联映射不可比，我的意思是它们位于不同的抽象层上，如果需要，关联映射使用集合映射。

# ios - dispatch_once() 如果调用多个单独的线程

> ID：15428758
> 
> 赞同：0
> 
> 时间：2013-03-15T09:28:20.703
> 
> 标签：ios, objective-c-blocks

我怀疑`dispatch_once()`它是否在多线程上调用。请解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:31:49.020

我很确定它只发送一次。

[阅读文档。](http://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man3/dispatch_once.3.html)

如果您有任何实际证据让您对此表示怀疑，请分享，因为几乎每个人都使用它来创建单例，因为它从不执行多次。

# iphone - 将 UILabel 限制为 500 个字符，然后在 IOS 中截断 UIlabel

> ID：15428761
> 
> 赞同：5
> 
> 时间：2013-03-15T09:28:27.710
> 
> 标签：iphone, ios, ios5, uilabel

我想在 UILabel 中显示前 500 个字符，如果有超过 500 个字符可用，则显示截断图标。但我不知道如何限制 500 个字符来截断文本？

这是我的代码

```
label2 = [[UILabel alloc] initWithFrame:CGRectMake(0, 350, self.bounds.size.width, 30)];
   // In this case value of self.bounds.size.width is "427"

    label2.backgroundColor = [UIColor clearColor];
    label2.numberOfLines = 2;
    label2.textAlignment = UITextAlignmentCenter;
    label2.font = [UIFont systemFontOfSize:13];
    [self addSubview:label2]

         //Here is Implimentation code of my label

 NSString *temp = [galleryEntryTree objectForKey:@"description"];// calling lebel text from database
coverView.label2.text = temp;
coverView.label2.adjustsFontSizeToFitWidth = NO;
coverView.label2.lineBreakMode = UILineBreakModeTailTruncation; 
```

告诉我，我怎样才能显示最少 500 个字符而不是截断它（如果超过 500 个）

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T09:47:02.373

如果字符串长度超过 500 个字符，只需截断该字符串。唯一需要注意的是：确保不要在[代理对](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)中间破坏它：

```
NSString *temp = [galleryEntryTree objectForKey:@"description"];
if ([temp length] > 500) {
    NSRange range = [temp rangeOfComposedCharacterSequencesForRange:(NSRange){0, 500}];
    temp = [temp substringWithRange:range];
    temp = [temp stringByAppendingString:@" …"];
}
coverView.label2.text = temp; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T09:34:09.673

要仅显示 500 个字符，只需使用以下代码：

```
NSString *string = YOUR_TEXT;
if ([string length] >500) {
    string = [string substringToIndex:500];
} 
```

希望这会帮助你。

祝一切顺利 ！！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-07T17:52:57.163

以下是在 Swift 2.2 中的操作方法：

```
let maxLength = 500
if originalString.characters.count > maxLength {
   let range = originalString.rangeOfComposedCharacterSequencesForRange(Range<String.Index>(originalString.startIndex ..< originalString.startIndex.advancedBy(maxLength)))
   let tmpValue = originalString.substringWithRange(range).stringByAppendingString(" …")
   // use tmpValue
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T09:38:37.647

试试这个，它会帮助你。

```
label2 = [[UILabel alloc] initWithFrame:CGRectMake(0, 350, self.bounds.size.width, 30)];
   // In this case value of self.bounds.size.width is "427"
 label2.text=@"your text................................";
 if([label2.text length]>500)
        label2.text=[label2.text substringToIndex:500];

    label2.backgroundColor = [UIColor clearColor];
    label2.numberOfLines = 2;
    label2.textAlignment = UITextAlignmentCenter;
    label2.font = [UIFont systemFontOfSize:13];
    [self addSubview:label2] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T09:35:23.650

它可以简单地通过

```
NSString *LabelNewText = [YourLabelName.text substringToIndex:500]; 
```

此处将显示 500 或少于 500 个字符，所有超过该字符的字符将被截断。

NSString *string = LabelNewText.text;

```
if ([string length] >500)
{
   string = [string substringToIndex:500];                                       
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-05T10:58:45.883

**斯威夫特 3.0 版本**

```
let maxLength = 300 //char length
if originalString.characters.count > maxLength {
            let range =  originalString.rangeOfComposedCharacterSequences(for: originalString.startIndex..<originalString.index(originalString.startIndex, offsetBy: maxLength))
            let tmpValue = originalString.substring(with: range).appending("...")
        } 
```

# variables - %%a 和 %variable% 变量之间有什么区别？

> ID：15428777
> 
> 赞同：17
> 
> 时间：2013-03-15T09:29:14.630
> 
> 标签：variables, batch-file, cmd

```
for /f "tokens=*" %%a in ('find /v ":" "%appdata%\gamelauncher\options.txt" ^| find "menu=a"') do ( set usemenu=a )
for /f "tokens=*" %%a in ('find /v ":" "%appdata%\gamelauncher\options.txt" ^| find "menu=b"') do ( set usemenu=b )
for /f "tokens=*" %%a in ('find /v ":" "%appdata%\gamelauncher\options.txt" ^| find "menu=c"') do ( set usemenu=c ) 
```

是的，在这段代码中（这可能不起作用，我试图找出）我们在那个“for”命令中有这个“%%a”。

首先，%variable% 和 %%a 有什么区别？

其次，有人可以向我解释“for”命令吗？我用谷歌搜索的太多了，所有的解释似乎都很复杂......

我想要做的是从 options.txt 中提取一个变量，这样我就可以更改我的游戏启动器的菜单样式。有 3 种样式（a、b 和 c），所以如果 options.txt 读取“menu=a”，我怎样才能让它将像 %usemenu% 这样的变量设置为 a 的值？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-15T09:40:22.867

`%variable%`是*环境*变量。它们使用 or 设置`set`并且可以使用`%foo%`or访问`!foo!`（如果启用，则延迟扩展）。`%%a`是由`for`命令创建的特殊变量，用于表示当前循环项或当前行的标记。

`for`可能是批处理文件中最复杂和最强大的部分。如果您需要循环，那么在大多数情况下`for`，您已经涵盖了。`help for`有总结。

你可以

*   遍历文件：`for %x in (*.txt) do ...`
*   重复某件事*n*次：（`for /l %x in (1, 1, 15) do...`参数是*start*，*step*和*end*）
*   迭代一组值：`for %x in (a, b, c) do ...`
*   遍历文件的行：`for /f %x in (foo.txt) do ...`
*   标记文件的行：`for /f "tokens=2,3* delims=," %x in (foo.txt) do ...`
*   遍历命令的输出：`for /f %x in ('somecommand.exe') do ...`

这只是一个简短的概述。它变得更加复杂，但请阅读帮助。

形式的变量`%%a`（或者`%a`如果`for`在批处理文件之外使用）与批处理文件和子例程（`%1`, `%2`, ...）的参数非常相似。可以对它们应用某些类型的扩展，例如，如果变量表示带有您可以使用的路径的文件名，则仅获取文件名和扩展名`%%~nxa`。中给出了这些的完整概述`help for`。

另一方面，环境变量还有其他一些特殊的东西。您可以通过`%foo:a=b%`会在其中执行替换，`%foo%`除了 every`a`被替换为`b`. 您也可以使用子字符串：`%foo:~4,2%`. 这些东西的描述可以在 中找到`help set`。

至于为什么`%variables%`和`%%a`是不同的事情，有点难以回答，可能只是历史上的怪事。如上所述，我猜还有第三种变量`%1`等，它们与 中使用的变量非常相似，`for`并且已经存在了更长的时间。由于环境变量由于块而使用起来有点笨拙`for`，因此严重依赖延迟扩展，因此可能决定使用与参数相同的机制而不是环境变量。

此外，环境变量可能更昂贵，因为该进程有一个特殊的“环境”内存块，它们`variable=value␀`成对存储，因此更新环境变量可能涉及复制一些内存，而其他类型的变量可能更轻量级. 不过，这是猜测。

* * *

至于您的问题，您实际上并不需要`for`：

```
find /v ":" "%appdata%\gamelauncher\options.txt" | find "menu=a" && set usemenu=a 
```

这只会`set`在前面的命令成功（即`menu=a`找到）时运行。这应该比`for`. 根据我读到的内容，您正在尝试查看是否`menu=a`存在于不包含冒号的行中，在这种情况下`usemenu`应设置为`a`，对吗？（同样 for`b`和`c`。您可以尝试`for`通过循环文件或输出的行并适当地标记化以找出 的值，`menu`但根据行的格式，这可能会很棘手。如果你有什么理论上可行，那么你应该坚持下去。但是，您可以在它周围使用一个循环以避免不得不重复同一行三次`a`，`b`并且`c`：

```
for %%X in (a b c) do (
  find /v ":" "%appdata%\gamelauncher\options.txt" | find "menu=%%X" && set usemenu=%%X
) 
```

If the file you are parsing is simple, however, with just `name=value` pairs in each line where `: foo` would be a comment, then you *could* use `for` as well:

```
for /f "tokens=1,* eol=: delims==" %%A in (%appdata%\gamelauncher\options.txt) do (
  if "%%A"=="menu" set usemenu=%%B
) 
```

But that depends a little on the exact format of the file. Above snippet would now read the file line by line and for each line would discard everything after a colon (the `eol=:` option), use the equals sign as a token delimiter and capture two tokens: The part before the first `=` and everything after it. The tokens are named starting with `%%A` so the second one is implicitly `%%B` (again, this is explained in `help for`). Now, for each line we examine the first token and look whether it's `menu` and if so, assign its value to the `usemenu` variable. If you have a lot of possible options to support this is certainly easier to maintain :-).

# php - PHP选择查询没有限制

> ID：15428779
> 
> 赞同：0
> 
> 时间：2013-03-15T09:29:24.153
> 
> 标签：php, sql, zend-framework, join

我正在尝试使用以下代码对我的数据库进行查询。

```
public function getFreeFields($date){
        print_r($date);
        $db = Zend_Registry::get('db');
    $select = $db->select()
        ->from(array('f' => $this->_tablename()), array('f.fie_id','f.fie_name'))
                    ->join('reservation','reservation.res_field = f.fie_id')
                    ->where('reservation.res_date_from > ?'. $date)
                    ->where('reservation.res_date_till < ?'. $date);

    $result = $db->fetchRow($select);
    $data = $this->_mapper->toObject( is_array($result) ? $result : array() );

    return $data;
    } 
```

但它因以下错误而崩溃。

```
Uncaught exception 'PDOException' with message 'SQLSTATE[HY093]: Invalid parameter number: no parameters were bound' 
```

当我在 print_r 之后死去时，我得到了我给请求的正确日期。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:32:20.357

改变这个

```
->where('r.res_date_from > ?'. $date)
->where('r.res_date_till < ?'. $date); 
```

到

```
->where('r.res_date_from > ?', $date)
->where('r.res_date_till < ?', $date); 
```

# php - 选择最小数量的 MySQL 条目 + 具有相同数据的条目

> ID：15428792
> 
> 赞同：0
> 
> 时间：2013-03-15T09:30:06.697
> 
> 标签：php, mysql

我希望我能得到一些帮助，因为我自己也搞不清楚：S。

我有一个 MySQL 表，用于存储足球比赛。就像现在一样，我在我的网站上列出了游戏，并附上了日期范围。

首先我看看今天有没有未完成的游戏……

```
mysql_query("SELECT * FROM kampe WHERE dato = '$today' AND '$nu' < '$slut99' AND hiddenmatch = '0' ORDER BY tidspunkt"); 
```

然后我在数据库中检查未来的游戏......

```
mysql_query ("SELECT DISTINCT dato FROM kampe WHERE (dato > '$today' AND dato <= '$touger') AND hiddenmatch = '0' ORDER BY dato ASC"); 
```

所以我列出的是今天的游戏，然后我列出了其余的游戏，按日期分组 - 女巫很好。

但是，我想要列出的是今天的比赛，然后是至少 20 场（或我选择的任何数量）比赛 + 如果有更多比赛的日期相同，则为第 20 场比赛。

为了简化它 - 今天的游戏列出得很好 - 但是我确实想列出以下 20 款游戏，但我不希望列表在日期中间被切断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:44:16.190

试试这个查询

```
SELECT 
    <FIELDS>
FROM 
    kampe 
WHERE 
    (dato > '$today' AND dato <= '$touger') AND 
    hiddenmatch = '0' 
ORDER BY 
    dato ASC
UNION ALL
SELECT 
    <FIELDS>
FROM 
    kampe 
WHERE 
    dato > '$today'
ORDER BY 
    dato ASC
LIMIT 20 
```

注意：保持两个表之间的字段通用

希望这可以帮助

# tfs - 在错误过程模板中设置值列表的权限

> ID：15428795
> 
> 赞同：0
> 
> 时间：2013-03-15T09:30:26.573
> 
> 标签：tfs

我在我们的错误模板中创建了一个新字段，该字段具有 A、B、C、D 之类的值。现在我想为该特定字段设置权限，以便只有一组 TFS 用户可以更新它，而其他人将其视为只读。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:26:47.507

您可以通过编辑工作项类型定义并编辑您的字段来做到这一点。切换到规则选项卡并添加“只读”规则。对于此规则，在 Not 文本框中插入允许的组，因此不会考虑此规则（描述字段的示例）：

```
<FieldDefinition name="Description" refname="System.Description" type="HTML">
 <READONLY not="[Project]\AllowedGroup" />
</FieldDefinition> 
```

# cocoa-touch - 无法让自动换行在 UIButton 上工作

> ID：15428796
> 
> 赞同：3
> 
> 时间：2013-03-15T09:30:32.213
> 
> 标签：cocoa-touch, uibutton

我有一个简单的 UIButton 并尝试自动换行，但它总是在一行中显示超过按钮大小的文本。

```
 NSString * text = NSLocalizedString(@"Start Loading",@"Start Loading");
_continueBtn.titleLabel.lineBreakMode = NSLineBreakByWordWrapping;
_continueBtn.titleLabel.textAlignment = NSTextAlignmentCenter;
[_continueBtn setTitle:text forState:UIControlStateNormal]; 
```

同样在 UI builder 中，当我在那里设置自动换行时，文本会自动换行 - 只有当我运行应用程序时，文本才会出现在一行中。

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:51:40.843

尝试：

```
_continueBtn.titleLabel.numberOfLines = 0; 
```

我试过下一个代码：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = CGRectMake(20, 20, 70, 50);
button.titleLabel.lineBreakMode = NSLineBreakByWordWrapping;
button.titleLabel.textAlignment = NSTextAlignmentCenter;
[button setTitle:@"start loading"
        forState:UIControlStateNormal];
[self.view addSubview:button]; 
```

它对我有用：

![截屏](../Images/1269ce9cea18394cf787cde29b0d1c24.png)

# tridion - OrCriteria 使用 Tridion 内容交付 api 永远执行

> ID：15428801
> 
> 赞同：0
> 
> 时间：2013-03-15T09:30:51.563
> 
> 标签：tridion, tridion-content-delivery

我正在将 SQL 查询转换为代理 API 功能。该查询基本上检索基于键和值过滤器的自定义元数据。问题是当我使用或标准加入两个标准时，`query.executequery`永远需要并且控制永远不会返回。我正在使用的代码如下

```
 PublicationCriteria pubCriteria = new PublicationCriteria(80);

        //1st query
        CustomMetaKeyCriteria keyCriteria1 = new CustomMetaKeyCriteria("PublicationType");

        CustomMetaValueCriteria valueCriteria11 = new CustomMetaValueCriteria("Report", Criteria.Like);
        CustomMetaValueCriteria valueCriteria12 = new CustomMetaValueCriteria("Video", Criteria.Like);
        Criteria valueCriteria1 = CriteriaFactory.Or(valueCriteria11, valueCriteria12);
        Criteria criteria1 =CriteriaFactory.And(keyCriteria1, valueCriteria1);

        //2nd query

        CustomMetaKeyCriteria keyCriteria2 = new CustomMetaKeyCriteria("Tags");

        CustomMetaValueCriteria valueCriteria21 = new CustomMetaValueCriteria("tcm:80-20641", Criteria.Equal);
        CustomMetaValueCriteria valueCriteria22 = new CustomMetaValueCriteria("tcm:80-20645", Criteria.Equal);
        Criteria valueCriteria2 = CriteriaFactory.Or(valueCriteria21, valueCriteria22);
        Criteria criteria2 =  CriteriaFactory.And(keyCriteria2, valueCriteria2);

        Criteria querycriteria = CriteriaFactory.Or(criteria1, criteria2);
        Criteria finalCriteria = CriteriaFactory.And(pubCriteria, querycriteria);
        Query query = new Query(criteria2);
        query.SetResultFilter(new LimitFilter(10));
        var n = query.ExecuteQuery(); 
```

我尝试使用新的 orcriteria 并将标准作为数组传递，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T17:45:19.077

几个星期前我尝试了同样的方法，它对我有用。我把我的发现放在这里。[http://vadalis.com/custom-meta-query-from-tridionbroker-database/](http://vadalis.com/custom-meta-query-from-tridionbroker-database/)

注意：我的经纪人数据库非常小。

# asp.net-mvc - 如何将两个查询从一个视图传递到一个视图

> ID：15428805
> 
> 赞同：0
> 
> 时间：2013-03-15T09:31:02.403
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我希望这两种方法传递给一个视图：

```
 public IEnumerable<ProfitAndCostViewModel> getProfitSum()
        {
            var profBalance = db.Profits
   .Where(x => x.IdUser.UserId == WebSecurity.CurrentUserId)
   .GroupBy(x => x.IdUser.UserId)
   .Select(x => new ProfitAndCostViewModel { ProfitSum = x.Sum(y => y.Value) })
   .ToList();
            return profBalance;
        }

        public IEnumerable<ProfitAndCostViewModel> getCostSum()
        {
            var costBalance = db.Costs
   .Where(x => x.IdUser.UserId == WebSecurity.CurrentUserId)
   .GroupBy(x => x.IdUser.UserId)
   .Select(x => new ProfitAndCostViewModel { CostSum = x.Sum(y => y.Value) })
   .ToList();
            return costBalance;
        } 
```

在我的 ActionResult 我有这个：

```
var pcv = new ProfitAndCostViewModel();
            pcv.ProfModel =getProfitSum();
            pcv.CostModel =getCostSum();

             return View(pcv); 
```

在 ProfitAndCostViewModel 代码中是这样的：

```
public double ProfitSum { get; set; }
        public double CostSum { get; set; }
        public double FinalBalance { get; set; }
        public IEnumerable<ProfitAndCostViewModel> ProfModel { get; set; }
        public IEnumerable<ProfitAndCostViewModel> CostModel { get; set; } 
```

这是错误：`The model item passed into the dictionary is of type 'WHFM.ViewModels.ProfitAndCostViewModel', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1 [WHFM.ViewModels.ProfitAndCostViewModel]'。`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:32:41.627

看起来您的视图是强类型的`IEnumerable<ProfitAndCostViewModel>`：

```
@model IEnumerable<ProfitAndCostViewModel> 
```

但在这里你将一个`ProfitAndCostViewModel`实例传递给它：

```
var pcv = new ProfitAndCostViewModel();
pcv.ProfModel =getProfitSum();
pcv.CostModel =getCostSum();
return View(pcv); 
```

因此，您应该修复输入视图的模型：

```
@model ProfitAndCostViewModel 
```

# php - 在字符串之前替换字符串？

> ID：15428806
> 
> 赞同：0
> 
> 时间：2013-03-15T09:31:10.517
> 
> 标签：php, preg-replace

对不起，我英语不好。我现在要发布我的代码：

```
 $image = 'http://example.com/thisisimage.gif';
    $filename = substr($image, strrpos($image, '/') + 1);
    echo '<br>';
    echo $filename;
    echo '<br>';            
    echo preg_replace('/^[^\/]+/', 'http://mydomain.com', $image);   
    echo '<br>'; 
```

$image 是字符串；

$filename 是图像名称（在上面的示例中，它返回 'thisisimage.gif'）

[现在我想用' http://mydomain.com](http://mydomain.com) '替换 $filename 之前的所有内容，我的代码在上面，但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:33:10.327

```
$foo = explode($filename, $image);
echo $foo[0]; 
```

爆炸“拆分”一个给定的参数（在您的情况下为 $filename ）。它返回一个数组，其中键在您提供的字符串上被拆分。

如果您只想更改网址。你使用 str_replace

```
 $foo = str_replace("http://example.com", "http://localhost", $image);

   //This will change "http://example.com" to "http://localhost", like a text replace in notepad. 
```

在你的情况下：

```
 $image = 'http://example.com/thisisimage.gif';
    $filename = substr($image, strrpos($image, '/') + 1);
    $foo = explode($filename, $image);
    echo '<br>';
    echo $filename;
    echo '<br>';            
    echo str_replace($foo[0], "http://yourdomain.com/", $url);
    echo '<br>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:37:41.303

还有另一种不需要正则表达式的方法：

简而言之：

```
$image = 'http://example.com/thisisimage.gif';
$url = "http://mydomain.com/".basename($image); 
```

* * *

解释：

如果您只想要没有 url 或目录路径的文件名，`basename()`是您的朋友；

```
$image = 'http://example.com/thisisimage.gif';
$filename = basename($image); 
```

输出：thisisimage.gif

然后你可以添加任何你想要的域：

```
$mydomain = "http://mydomain.com/";
$url = $mydomain.$filename; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:35:43.220

试试这个 ：

```
$image = 'http://example.com/thisisimage.gif';  
echo preg_replace('/^http:\/\/.*\.com/', 'http://mydomain.com',$image); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T09:41:33.377

这里的其他人就如何做到这一点给出了很好的答案 - 正则表达式有其优点但也有缺点 - 它较慢，分别需要更多资源，对于这样简单的事情，我建议你使用爆炸方法，但在发言时正则表达式函数你也可以试试这个，而不是你的 preg_replace：

```
echo preg_replace('#(?:.*?)/([^/]+)$#i', 'http://localhost/$1', $image); 
```

PHP 中似乎不支持可变长度正向后视。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T09:42:02.123

这应该很简单：

```
$image = 'http://example.com/thisisimage.gif';
$filename = substr($image, strrpos($image, '/') + 1);
echo '<br>';
echo $filename;
echo '<br>';            
echo 'http://mydomain.com/'.$filename;   
echo '<br>'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-15T09:43:36.970

如果您只想在文件名之前添加自己的域，请尝试以下操作：

```
$filename = array_pop(explode("/", $image));
echo "http://mydomain.com/" . $filename; 
```

如果你只想替换域名，试试这个：

```
echo preg_replace('/.*?[^\/]\/(?!\/)/', 'http://mydomain.com/', $image); 
```

# android - SDK google_play_services lib 文件夹中缺少 google-play-services_lib.jar

> ID：15428811
> 
> 赞同：3
> 
> 时间：2013-03-15T09:31:27.140
> 
> 标签：android, sdk, maps, google-play-services

我对*google-play-services_lib.jar*有疑问（我需要它来支持 Google Maps API v2），因为它没有作为库添加到我的项目中。我导入了 Google Play Services 项目，并且*google-play-services.jar*作为依赖项出现在我的项目中，但*google-play-services_lib.jar*没有出现。我试图在 SDK 管理器上删除并重新安装 Google Play 服务。

此外*D:\Android\android-sdk\extras\google\google_play_services\libproject\google-play-services_lib\libs*中缺少 google-play-services_lib.jar 。该路径上唯一可用的文件是*google-play-services.jar*和*google-play-services.jar.properties*

有人可以帮我吗？谢谢并恭祝安康。

编辑：[这是截图全尺寸链接](https://dl.dropbox.com/u/5348174/EjemploGoogleMaps_build_path_error.png)（图像在stackoverflow中非常小）。

我附上了截图。![google-play-services_lib.jar 丢失错误截图](../Images/ed3d352b2da0af0498e98a53bcce1642.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:12:36.890

我解决了它（难以置信）安装 JRE 7（我安装了 JRE 6）并在安装后重建了工作区上的所有项目。

# .htaccess - 你好奇怪 310\. 重定向错误太多

> ID：15428813
> 
> 赞同：0
> 
> 时间：2013-03-15T09:31:35.970
> 
> 标签：.htaccess, loops, redirect

下面是我的 htaccess 文件。东西在我的商店页面 patutbebe.ro 页面的右上角是客户的登录/注册按钮。当你按下这个按钮时，它会给你上面提到的错误。我尝试从 wordpress 设置中更改 siteurl 和 home，但它们是正确的，我尝试了时间和日期同步，我尝试了 google chrome 中的 cookie 和弹出窗口。我还尝试了规范链接的插件（remove_filter（'template_redirect'，'redirect_canonical'）仍然没有。如果您对发生的事情有任何想法，请帮助我。我是新手，这是我的第一个站点。

```
RewriteOptions inherit
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

RewriteCond %{HTTP_HOST} ^.*$
RewriteRule ^pat\-sertar\-clasic\.php$ "http\:\/\/patutbebe\.ro\/shop\/copii\/patut\-cu\-sertar\-si\-leganare\/clasic\-patut\-cu\-sertar\-si\-leganare\/" [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:10:27.057

所以我解决了那个问题......我在wordpress中创建了一个新页面，删除了新页面，不是永久的，因为我想了解更多内容。但是现在我遇到了配额问题，我想因为我的 ftp 上 90% 的配额磁盘空间都被使用了，所以我的 woocommerce 插件无法正常工作。每次我想把东西放在购物车里时它都不适用。购物车仍然是空的

# rabbitmq - 关于性能的分布式集群问题

> ID：15428815
> 
> 赞同：1
> 
> 时间：2013-03-15T09:31:46.950
> 
> 标签：rabbitmq

我正在使用 6 台服务器来制作集群，它们都是磁盘节点。我使用 rabbitmq 为我们的网站收集日志文件。现在在高峰时段，发布速率约为每秒 30k 条消息。有 2 个主要消费者（hdfs 和 elasticsearch），每个消费者都需要处理所有消息，因此传递率达到每秒 60k 左右。

在我的场景中，单个服务器可以保持 10k 的交付率，我使用 6 个节点来负载平衡压力。我的解决方案是我在每个节点上创建了 2 个队列。每条消息都带有一个随机路由密钥（例如 message.0、message.1 等），以将压力分配到每个节点。

让我困惑的是：

所有消息都发送到一个节点。我应该使用 HA 代理来负载平衡此发布压力吗？

1.  持久队列和瞬态队列之间是否存在性能差异？
2.  内存节点和磁盘节点之间有性能差异吗？我所知道的是内存节点和磁盘节点之间的区别仅在于队列配置等元数据。
3.  如何提高发布和交付代码的性能？我研究过，我知道几种方法：
    *   禁用确认机制（在发布代码中？）
    *   启用 HiPE（我已经做到了，它帮助很大）
4.  例如输入为 1w mps(message per second)，有两个消费者消费所有消息。那么输出是2w mps。如果我的服务器可以处理 1w mps，我需要两台服务器来处理 2w-mps-pressure。现在一个新的消费者也需要消费所有的消息。结果，输出达到 3w mps，所以我需要另外一台服务器。总而言之，所有消息的消费者多一个，服务器多一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-17T16:35:56.450

> “所有消息都发送到一个节点。我应该使用 HA 代理来负载平衡这个发布压力吗？”

[本文](http://insidethecpu.com/2014/11/17/load-balancing-a-rabbitmq-cluster/)概述了一些旨在在 RabbitMQ 中分配负载的设计。

> “持久队列和瞬态队列之间有什么性能差异吗？”

是的，持久队列被备份到磁盘，以便它们可以在服务器重新启动时恢复，例如。这增加了名义上的开销，尽管实际过程是异步发生的。

> “内存节点和磁盘节点有性能差异吗？”

不是我知道的，但这取决于机器本身。

> “如何提高发布和交付代码的性能？”

试试[这个](http://insidethecpu.com/2014/11/11/rabbitmq-qos-vs-competing-consumers/)。

# sql - 使用 IN() 和强制值的 SQL 查询

> ID：15428820
> 
> 赞同：0
> 
> 时间：2013-03-15T09:32:04.297
> 
> 标签：sql, inner-join

我有一个 INNER JOIN 查询，它根据连接表中的值获取国家/地区名称：

```
SELECT DISTINCT countryName, countrySlug
FROM countries AS Country
INNER JOIN countries_networks AS n ON Country.id = n.country_id
AND n.network_id IN ( 6, 7, 8, 9, 14 ) 
```

但是，我现在需要`select`满足**IN() 标准**的那些，并且还必须包含**网络 2**。

我显然不能只在 IN() 中添加 2，因为我需要 2 是强制性的，并且至少需要其中一个。

有人可以帮忙吗，我觉得它非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:33:27.430

试试这个：

```
SELECT DISTINCT 
  countryName, 
  countrySlug
FROM countries AS Country
INNER JOIN countries_networks AS n  ON Country.id   = n.country_id
                                   AND n.network_id IN (6, 7, 8, 9, 14) 
WHERE Country.id IN (SELECT id
                     FROM countries_networks 
                     WHERE network_id = 2
                       AND id IS NOT NULL); 
```

这将确保任何选定的国家/地区都必须拥有`network_id = 2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:38:18.263

首先，通过用子查询`DISTINCT`替换连接来删除。`EXISTS`然后您可以添加另一个子查询来处理额外的要求：

```
SELECT countryName, countrySlug
FROM countries AS c
WHERE EXISTS
      ( SELECT *
        FROM countries_networks AS n 
        WHERE c.id = n.country_id
          AND n.network_id IN ( 6, 7, 8, 9, 14 )
      )
  AND EXISTS
      ( SELECT *
        FROM countries_networks AS n 
        WHERE c.id = n.country_id
          AND n.network_id = 2
      ) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:42:09.030

试试这个（双重加入？）：

```
SELECT DISTINCT countryName, countrySlug, n.country_id, n2.country_id
FROM countries AS Country
INNER JOIN countries_networks AS n ON Country.id = n.country_id
AND n.network_id
IN ( 6, 7, 8, 9, 14 )
INNER JOIN countries_networks AS n2 ON Country.id = n2.country_id
AND n2.network_id = 2 
```

注意：显示的`n.country_id, n2.country_id`值仅用于能够检查结果

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T09:46:51.050

只需这样做：

```
SELECT DISTINCT countryName, countrySlug
FROM countries AS Country
INNER JOIN countries_networks AS n ON Country.id = n.country_id
AND n.network_id=2 And n.network_id IN (2, 6, 7, 8, 9, 14 ) 
```

# c# - 如何使用 C# 独占锁定 Oracle 数据库表？

> ID：15428822
> 
> 赞同：0
> 
> 时间：2013-03-15T09:32:12.673
> 
> 标签：c#, oracle

实际上我想在一个表上应用锁，这样其他进程就不能执行 DML（插入/更新/删除但可以执行选择）或在“进程执行”时锁定该表。

`LOCK TABLE table-name IN EXCLUSIVE MODE`

我应该如何用 C# 编写它？

// ..... 进程执行 ....

如何解除锁定？我猜要么提交要么回滚。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:36:19.330

锁将在提交或回滚时重新释放

```
OracleConnection conn= new OracleConnection("Data Source=datasrc;User=USER;Password=passwd");
conn.Open();
OracleTransaction tr = conn.BeginTransaction();
OracleCommand cmd = new OracleCommand("LOCK TABLE TABLE_NAME IN EXCLUSIVE MODE",conn,tr);
cmd.ExecuteNonQuery();
Console.ReadLine();
tr.Commit();
conn.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:59:18.133

为什么需要锁表？使用事务范围对象指定隔离级别就足够了吗？例如

```
TransactionOptions TransOpt = New TransactionOptions();
TransOpt.IsolationLevel = System.Transactions.IsolationLevel.Serializable;
using(TransactionScope scope = new TransactionScope(TransactionScopeOption.Required, TransOptions))
{
...
} 
```

请检查您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:57:41.870

通过利用另一种策略可以解决此问题。既不通过以下方式解决它：

1.  **EXCLUSIVE LOCKING**（因为我意识到如果在我的进程正在进行时有另一个事务更新了我的表，那么由于锁定而无法更新表，但是一旦我的进程完成，意味着锁现在被释放，如果另一个事务仍然处于暂停状态，那么另一笔交易将立即更新我的表格。这对我来说不会有成果。）也不能通过以下方式解决：

2.  **IsolationLevel.Serializable**（因为分布式事务不支持可序列化的事务隔离级别。）

因此，在我的表中的每个条目上，我都会确定是否有任何事务（无论是分布式的还是本地的）阻塞了我的表。如果有，我会识别该会话并强行终止该会话。这完全适合我的场景：

```
Database db = DataRepository.GetDatabase();

int result, session_id = 0;
string kill_session, serial = null;
string chk_lock = "SELECT l.session_id,v.serial# ,"
                +"object_name FROM dba_objects o, gv$locked_object l, "
                +"v$session v WHERE o.object_id = l.object_id and "
                +"l.SESSION_ID=v.sid";
DbDataReader rdr_blkAccount;
try{
    //MY PROCESS RUNS HERE...
}
catch(Exception excep)
{
    //...
}
finally
{
    rdr_blkAccount = db.ExecuteReader(chk_lock);

    while (rdr_blkAccount.Read())
    {
        if (rdr_blkAccount[2].ToString().ToUpper() == "ACCOUNT")
        {
            session_id = Convert.ToInt32(rdr_blkAccount[0]);
            serial = session_id.ToString() + ','
                   + Convert.ToInt32(rdr_blkAccount[1]).ToString();
            kill_session = "alter system kill session '" + serial + "'";
            result = db.ExecuteNonQuery(kill_session);
            logger.Log( LogLevel.Warning 
                      , string.Format("Session_id '{0}' has been forcefully killed"
                                     , serial));
        }
    }
    rdr_blkAccount.Close();
} 
```

# javascript - .delay() 函数不适用于 attr() 函数

> ID：15428826
> 
> 赞同：0
> 
> 时间：2013-03-15T09:32:21.633
> 
> 标签：javascript, jquery

我的网站中有一些图像，我想使用此代码隐藏它们，更改显示的图像并将它们显示回来，但新图片会立即显示。我不知道该怎么办。

这是javascript：

```
$(document).ready(function() {
  $('.show').click(function() {
    $(this).removeClass("show").addClass("clickedShow");
    $('.show').animate({opacity: 0}, 1000);
    $(this).delay(1000).animate({opacity: 0}, 1000);

    $(this).animate({opacity: 1}, 1000).attr("src", "pic2.png");
    $('.show').delay(1000).animate({opacity: 1}, 1000).attr("src", "pic2.png");
  });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:34:52.043

`delay`仅适用于可以排队的动画，`attr`不排队，因此不受`delay`. 如果您想在动画结束时做某事，请将动作添加到`animation`回调中。

```
$(this).animate({opacity: 1}, 1000, function(){$(this).attr("src", "pic2.png")}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:44:39.013

.delay() 方法最适合在排队的 jQuery 效果之间进行延迟。因为它是有限的——例如，它不提供取消延迟的方法。

因此，您可以尝试使用排队的 jQuery 效果并在它们之间使用 .delay(1000)。像：

```
$("button").click(function() {
      $("div.first").slideUp(300).delay(800).fadeIn(400);
      $("div.second").slideUp(300).fadeIn(400);
    });</script> 
```

# gate - 错误：JVM 无法创建

> ID：15428827
> 
> 赞同：0
> 
> 时间：2013-03-15T09:32:23.273
> 
> 标签：gate

当我打开 GATE 时，我遇到错误“错误：无法创建 Java 虚拟机。错误：发生了致命的执行。程序将退出”。怎么解决？？？帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:21:03.440

第一步，我建议删除你的 Gate**应用数据**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T14:15:17.117

尝试重新启动系统，然后运行 ​​GATE 应用程序，它会正常工作。

# sql - 查询问题，不接受条件

> ID：15428830
> 
> 赞同：0
> 
> 时间：2013-03-15T09:32:26.427
> 
> 标签：sql

我有这个问题。我使用了这个查询：

```
"SELECT  formas.*,
        SMS_SERVISI.IDTICKET,
        SMS_SERVISI.MBYLLUR,
        SMS_SERVISI.time_added,
        servis_furnitor.id_servis,
        servis_furnitor.furnitori,
        servis_furnitor.kohezgjatja,
               referenca.id_referenca,
        referenca.shenime

FROM formas
LEFT JOIN servis_furnitor
        ON formas.furnitori = servis_furnitor.id_servis
LEFT JOIN SMS_SERVISI
        ON formas.ID = SMS_SERVISI.IDTICKET
        AND formas.sektori_pergjegjes ='A'
        LEFT JOIN referenca
        ON formas.ID = referenca.id_referenca  " 
```

我的问题是我没有得到条件的一部分`AND formas.sektori_pergjegjes ='A'` 没有执行。也许我做了错位或其他事情，但我无法让它工作。

请看看这个。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:36:39.910

该条件`AND formas.sektori_pergjegjes ='A'`仅对连接结果执行，因为它是连接条件的一部分。如果您希望所有数据都符合您的过滤器，则需要将其移动到 where 子句中。

```
SELECT  formas.*,
        SMS_SERVISI.IDTICKET,
        SMS_SERVISI.MBYLLUR,
        SMS_SERVISI.time_added,
        servis_furnitor.id_servis,
        servis_furnitor.furnitori,
        servis_furnitor.kohezgjatja,
        referenca.id_referenca,
        referenca.shenime    
FROM formas
LEFT JOIN servis_furnitor
        ON formas.furnitori = servis_furnitor.id_servis
LEFT JOIN SMS_SERVISI
        ON formas.ID = SMS_SERVISI.IDTICKET
LEFT JOIN referenca
        ON formas.ID = referenca.id_referenca
WHERE formas.sektori_pergjegjes ='A' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:35:24.187

将和条件放在哪里，看看它是否解决了

```
"SELECT  formas.*,
        SMS_SERVISI.IDTICKET,
        SMS_SERVISI.MBYLLUR,
        SMS_SERVISI.time_added,
        servis_furnitor.id_servis,
        servis_furnitor.furnitori,
        servis_furnitor.kohezgjatja,
               referenca.id_referenca,
        referenca.shenime

FROM formas
LEFT JOIN servis_furnitor
        ON formas.furnitori = servis_furnitor.id_servis
LEFT JOIN SMS_SERVISI
        ON formas.ID = SMS_SERVISI.IDTICKET

        LEFT JOIN referenca
        ON formas.ID = referenca.id_referenca 
 WHERE formas.sektori_pergjegjes ='A' " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:36:01.813

尝试：

```
"SELECT  formas.*,
    SMS_SERVISI.IDTICKET,
    SMS_SERVISI.MBYLLUR,
    SMS_SERVISI.time_added,
    servis_furnitor.id_servis,
    servis_furnitor.furnitori,
    servis_furnitor.kohezgjatja,
           referenca.id_referenca,
    referenca.shenime

FROM formas
LEFT JOIN servis_furnitor
    ON formas.furnitori = servis_furnitor.id_servis
LEFT JOIN SMS_SERVISI
    ON formas.ID = SMS_SERVISI.IDTICKET
LEFT JOIN referenca
    ON formas.ID = referenca.id_referenca  
WHERE formas.sektori_pergjegjes ='A'" 
```

# php - 使用 Selenium 检测 Chrome 中弹出窗口的关闭

> ID：15428831
> 
> 赞同：0
> 
> 时间：2013-03-15T09:32:26.570
> 
> 标签：php, jquery, google-chrome, selenium

我正在用 PHP（5.3.15）编写一个 Selenium（服务器 2.31.0）测试，需要测试弹出窗口是否关闭。弹出窗口是使用[jQuery UI Dialog Widget](http://api.jqueryui.com/dialog/)实现的。`HelloWorld`弹出窗口本身包含一些不会出现在弹出窗口之外的简单文本 ( )。

使用 . 检测弹出窗口的外观很好`isTextPresent("HelloWorld");`。然后我关闭窗口`clickAt("//a[contains(@class, 'ui-dialog-titlebar-close')]");`（我可以看到工作），然后测试关闭的弹出窗口`!isTextPresent("HelloWorld");`。我应该补充一点，我正在做适当的事情以确保弹出窗口有时间打开/关闭；有一个重复的暂停和检查周期，如果我通过显式睡眠来强制问题，我也可以看到效果。

这在 Firefox (19.0.2) 下工作正常，但在 Chrome (25.0.1364.172) 下失败。即窗口正在关闭，但我没有在 Selenium 下检测到这一点。我预计这是由于 Selenium 如何进行`isTextPresent`检查和/或弹出窗口仅被隐藏而不是关闭。

我正在寻找一种方法来检测适用于 Chrome 的关闭弹出窗口。跨浏览器会很棒，但目前，我可以在不同的浏览器上运行不同的测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:47:43.790

可以使用`isVisible`弹出窗口 ( `isVisible("//a[contains(@class, \'ui-dialog-titlebar-close\')]");`) 生成等效测试（就测试的设计目的而言，与检查的特定先前行为相反），并在关闭弹出窗口后进行相应的否定测试。这适用于 Chrome (25.0.1364.172) 和 Firefox (19.0.2)。

这不是对弹出窗口的内容进行相同的检查，但是，由于所需的效果是测试弹出窗口的存在，这就足够了。

# castle-windsor - 温莎和 NServiceBus

> ID：15428833
> 
> 赞同：0
> 
> 时间：2013-03-15T09:32:34.153
> 
> 标签：castle-windsor, nservicebus

我将使用 NServiceBus，我想使用 Windsor 作为“Builder”

我过去读过很多关于处理程序创建与生活方式有关的错误和不兼容性的帖子。

我还阅读了有关修复和新版本的信息。

我想被告知集成的状态。

哪些构建（NServiceBus / Windsor）进展顺利？

[http://nuget.org/packages/NServiceBus.CastleWindsor/3.3.5](http://nuget.org/packages/NServiceBus.CastleWindsor/3.3.5)是一个好的稳定的开始吗？

是否有任何贡献样本可以在 MVC3 项目中使用这两个人？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:26:51.143

是的，[http](http://nuget.org/packages/NServiceBus.CastleWindsor/3.3.5) ://nuget.org/packages/NServiceBus.CastleWindsor/3.3.5 是Windsor + NServiceBus 集成的最新稳定版本，这个包针对Castle.Windsor v3.0.0.4001 进行了测试

在 MVC3 项目中使用 NServiceBus + Windsor 应该很容易，请参阅[此示例](https://github.com/NServiceBus/NServiceBus/tree/master/Samples/AsyncPagesMVC3)作为起点。
您需要做的就是引用[nuget 包](http://nuget.org/packages/NServiceBus.CastleWindsor/3.3.5)并更改`Global.asax.cs`以`Application_Start()`使用 Windsor 容器，例如：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);

    // NServiceBus configuration
    Configure.WithWeb()
        .CastleWindsorBuilder()
        .ForMvc()
        .JsonSerializer()
        .Log4Net()
        .MsmqTransport()
            .IsTransactional(false)
            .PurgeOnStartup(true)
        .UnicastBus()
            .ImpersonateSender(false)
        .CreateBus()
        .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install());
} 
```

# google-maps-api-3 - 谷歌地图距离矩阵回调

> ID：15428836
> 
> 赞同：0
> 
> 时间：2013-03-15T09:32:36.687
> 
> 标签：google-maps-api-3

我正在使用谷歌地图距离矩阵，我需要的是两个不同的距离，

目前我有以下内容： -

```
var start = arrObjLatLngs[0];
var end = arrObjLatLngs[arrObjLatLngs.length - 1];    
var base = new google.maps.LatLng(52.781048888889, -1.2110222222222546);

var service = new google.maps.DistanceMatrixService();

service.getDistanceMatrix(
  {
    origins: [base],
    destinations: [start, end],
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.DirectionsUnitSystem.METRIC,
    avoidHighways: false,
    avoidTolls: false
  }, callback);

function callback(response, status) {

  if (status == google.maps.DistanceMatrixStatus.OK) {

    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;

    for (var i = 0; i < origins.length; i++) {

      var results = response.rows[i].elements;

      for (var j = 0; j < results.length; j++) {

        var element = results[j];
        var distance = Math.round(parseFloat(element.distance.text));
          alert(distance);
        var duration = element.duration.text;
        var from = origins[i];
        var to = destinations[j];
      }
    }
  }
} 
```

当我`alert($distance);`收到两个回复时，例如`15`和`10`

我需要的是两个单独的值，即如果`alert($runinPickup);`我得到`15`，如果我提醒`alert($runinDestination);`我得到 10。

我以为它们在一个数组中，所以我尝试过`alert(distance[0])`，但这又是未定义的。

我必须做两个单独的 getDistanceMatrix 请求还是有办法分开这两个值？

# javascript - Jquery：JSON解析总是出现意外的字符错误

> ID：15428840
> 
> 赞同：1
> 
> 时间：2013-03-15T09:32:58.207
> 
> 标签：javascript, jquery

我正在尝试解析来自服务器的数据。虽然我正在处理一个有效的 JSON，但我总是得到`JSON unexpected character error`.

请考虑以下代码：

```
var shows = $.parseJSON(fetchData('contentShows', this.id)); // Returns a valid JSON data

$.each(shows, function(index, value) {
    console.log(value.id);
});

fetchData = function(dataRequest, id) {
    var data = $.ajax({
        url: '/shows.php',
        type: 'GET',
        dataType: 'json',
        success: function(data) {
            console.log(dataRequest);
            console.log(data);
        }
    });
    return data;
} 
```

这是示例 JSON：

```
[
    {"shows":[],"spool":"/home","name":"Test Name","id":2}
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:44:11.427

问题是您的`fetchData`函数不返回 JSON 文本，它返回一个[`jqXHR`object](http://api.jquery.com/Types/#jqXHR)。（因此，当您将其传递给 时`$.parseJSON`，它会变成类似 的字符串`[object Object]`，这当然是无效的 JSON。）

原因是您将`data`变量设置为`$.ajax`调用结果并返回它。的返回值[`$.ajax`](http://api.jquery.com/jQuery.ajax)是一个`jqXHR`对象。

但是仅仅改变它是不够的，因为调用是*异步*的；它在函数已经返回*后完成。*

最好的办法是修改`fetchData`以接受回调，然后在回调中使用获取的数据。像这样的东西：

```
fetchData = function(dataRequest, id, callback) {
    $.ajax({
        url: '/shows.php',
        type: 'GET',
        dataType: 'json',
        success: function(data) {
            console.log(dataRequest);
            console.log(data);
            callback(data);
        }
    });
} 
```

像这样使用：

```
fetchData('contentShows', this.id, function(showData) {
    var shows = $.parseJSON(showData);

    $.each(shows, function(index, value) {
        console.log(value.id);
    });
}); 
```

# java - 如何从 Java 中的 java.lang 类型的对象中获取等价的原始类型？

> ID：15428845
> 
> 赞同：2
> 
> 时间：2013-03-15T09:33:24.010
> 
> 标签：java

现在有没有简单的方法可以做到这一点？假设我有一个可能是 Long、Float、Integer、Byte 等的对象，我如何从这个对象中获取其等效的原始类（Class）？

方法可以这样写

```
Class<?> getEquivalentPrimitiveType(Object obj)
{
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:35:38.567

对应的原始类型是[`Long.TYPE`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Long.html#TYPE)：

> `public static final Class<Long> TYPE`
> 
> 表示原始类型的 Class 实例`long`。

如果你有一个“包装”类的实例，你可以通过反射得到对应的原语，像这样：

```
static <T> Class<T> getPrimitive(Class<T> wrapper)
    throws NoSuchFieldException, IllegalAccessException {
    return (Class<T>)wrapper.getDeclaredField("TYPE").get(null);
} 
```

这是[关于 ideone 的演示](http://ideone.com/Wy93Gd)。

# ruby-on-rails - 如何隐藏使用 wicked_pdf 生成的 pdf 中的链接

> ID：15428848
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:33:33.687
> 
> 标签：ruby-on-rails, wicked-pdf

[我有一个使用wicked_pdf](https://github.com/mileszs/wicked_pdf) gem生成的 pdf 。我的问题是我在 pdf 中也看到了“下载 pdf”链接。如何从呈现的 pdf 中删除该链接？我阅读了有关 css 媒体类型的信息，但不知道如何实现。谁能帮忙？或者除了使用 css 媒体类型之外还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:12:59.820

我假设您正在使用该`pdf`格式来确定用户是否想要 pdf 版本。您可以在您的视图中检查请求格式是否为pdf

```
<% unless request.format.to_sym == :pdf %>
  <%= link_to 'Download PDF', { format: :pdf } %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:10:45.837

添加 wicked_pdf 帮助程序以加载 css 文件

```
<%= wicked_pdf_stylesheet_link_tag "print" -%>
<div class="export">
 <%= link_to "Download pdf", "http://example.com/download.pdf" %>
</div> 
```

并且在您的 css 文件中，您可以添加代码以使用 css 选择器“导出”隐藏这些链接

```
@media print {
 .export {
  display: hidden;
 }
} 
```

希望这可以帮助。

# ios - 如何使文本字段与 UICollectionViewCell 一样大？

> ID：15428849
> 
> 赞同：0
> 
> 时间：2013-03-15T09:33:46.133
> 
> 标签：ios, objective-c, ios6, uitextfield, uicollectionview

我下载了[Collection View 示例](http://www.appcoda.com/ios-programming-uicollectionview-tutorial/)，并将 ImageView 替换为文本字段。我想让文本字段和 UICollectionViewCell 一样大（这是一个正方形）。但是文本字段的形状没有改变。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *identifier = @"Cell";

    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];

    // height and width in the parent cell 
    double height = cell.frame.size.height;
    double width = cell.frame.size.width;

    // get the child textfield
    UITextField *textField = (UITextField *)[cell viewWithTag:100];

    // make the textfield as big as the cell
    CGRect frame = CGRectMake(0, 0, width, height);
    textField.frame =frame;
    textField.text = @"testing";

    return cell;
} 
```

![故事板和模拟器](../Images/2d4b6ccdb2a71b852fb300e9f5c7ed29.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:19:24.887

我找到了**这个问题的根本原因**。根本原因是自动布局，它会在运行时调整单元格和文本字段之间的宽度、高度和空间。一旦我删除了自动布局，代码就可以正常工作了......而且边框样式不是问题。

我正在寻找另一种方法来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:50:03.323

您可以通过更改 UITextField 的边框样式来做到这一点。

请参阅此 Stackoverflow 帖子：[如何设置 UITextfield 的边框样式](https://stackoverflow.com/questions/5789816/how-to-set-border-style-of-a-uitextfield)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:33:56.733

试试这个..

```
NSInteger myCustomHeight = 237;
UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 10, 200, myCustomHeight)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T09:55:58.623

您是否在 XCode Designer 中将 UITextfield 的 Tag 设置为 100？在调用代码之前，您必须将 Tag 设置为 100，以确保找到 UITextfield。

没有必要更改边框样式，因为您可以对每个边框样式进行更改......我已经做到了......

转到 XCode Designer 中的 cellItem Nib，选择 UITextField 并在正确的属性中，将标签更改为 100 ...这将解决它

# c# - 在 C# 中的 Windows 窗体 DataGridView 单元格中托管控件？

> ID：15428850
> 
> 赞同：1
> 
> 时间：2013-03-15T09:33:50.643
> 
> 标签：c#, datagridview, user-controls, datetimepicker, datagridviewtextboxcell

我有一些来自 msdn 的代码副本

```
public class CalendarColumn : DataGridViewColumn
{
  public CalendarColumn() : base(new CalendarCell())
{
}

public override DataGridViewCell CellTemplate
{
    get
    {
        return base.CellTemplate;
    }
    set
    {
        // Ensure that the cell used for the template is a CalendarCell. 
        if (value != null && 
            !value.GetType().IsAssignableFrom(typeof(CalendarCell)))
        {
            throw new InvalidCastException("Must be a CalendarCell");
        }
        base.CellTemplate = value;
    }
}
}

public class CalendarCell : DataGridViewTextBoxCell
{

public CalendarCell()
    : base()
{
    // Use the short date format. 
    this.Style.Format = "d";
}

public override void InitializeEditingControl(int rowIndex, object 
    initialFormattedValue, DataGridViewCellStyle dataGridViewCellStyle)
{
    // Set the value of the editing control to the current cell value. 
    base.InitializeEditingControl(rowIndex, initialFormattedValue, 
        dataGridViewCellStyle);
    CalendarEditingControl ctl = 
        DataGridView.EditingControl as CalendarEditingControl;
    // Use the default row value when Value property is null. 
    if (this.Value == null)
    {
        ctl.Value = (DateTime)this.DefaultNewRowValue;
    }
    else
    {
        ctl.Value = (DateTime)this.Value;
    }
}

public override Type EditType
{
    get
    {
        // Return the type of the editing control that CalendarCell uses. 
        return typeof(CalendarEditingControl);
    }
}

public override Type ValueType
{
    get
    {
        // Return the type of the value that CalendarCell contains. 

        return typeof(DateTime);
    }
}

public override object DefaultNewRowValue
{
    get
    {
        // Use the current date and time as the default value. 
        return DateTime.Now;
    }
}
}

 class CalendarEditingControl : DateTimePicker, IDataGridViewEditingControl
{
DataGridView dataGridView;
private bool valueChanged = false;
int rowIndex;

public CalendarEditingControl()
{
    this.Format = DateTimePickerFormat.Short;
}

// Implements the IDataGridViewEditingControl.EditingControlFormattedValue  
// property. 
public object EditingControlFormattedValue
{
    get
    {
        return this.Value.ToShortDateString();
    }
    set
    {            
        if (value is String)
        {
            try
            {
                // This will throw an exception of the string is  
                // null, empty, or not in the format of a date. 
                this.Value = DateTime.Parse((String)value);
            }
            catch
            {
                // In the case of an exception, just use the  
                // default value so we're not left with a null 
                // value. 
                this.Value = DateTime.Now;
            }
        }
    }
}

// Implements the  
// IDataGridViewEditingControl.GetEditingControlFormattedValue method. 
public object GetEditingControlFormattedValue(
    DataGridViewDataErrorContexts context)
{
    return EditingControlFormattedValue;
}

// Implements the  
// IDataGridViewEditingControl.ApplyCellStyleToEditingControl method. 
public void ApplyCellStyleToEditingControl(
    DataGridViewCellStyle dataGridViewCellStyle)
{
    this.Font = dataGridViewCellStyle.Font;
    this.CalendarForeColor = dataGridViewCellStyle.ForeColor;
    this.CalendarMonthBackground = dataGridViewCellStyle.BackColor;
}

// Implements the IDataGridViewEditingControl.EditingControlRowIndex  
// property. 
public int EditingControlRowIndex
{
    get
    {
        return rowIndex;
    }
    set
    {
        rowIndex = value;
    }
}

// Implements the IDataGridViewEditingControl.EditingControlWantsInputKey  
// method. 
public bool EditingControlWantsInputKey(
    Keys key, bool dataGridViewWantsInputKey)
{
    // Let the DateTimePicker handle the keys listed. 
    switch (key & Keys.KeyCode)
    {
        case Keys.Left:
        case Keys.Up:
        case Keys.Down:
        case Keys.Right:
        case Keys.Home:
        case Keys.End:
        case Keys.PageDown:
        case Keys.PageUp:
            return true;
        default:
            return !dataGridViewWantsInputKey;
    }
}

// Implements the IDataGridViewEditingControl.PrepareEditingControlForEdit  
// method. 
public void PrepareEditingControlForEdit(bool selectAll)
{
    // No preparation needs to be done.
}

// Implements the IDataGridViewEditingControl 
// .RepositionEditingControlOnValueChange property. 
public bool RepositionEditingControlOnValueChange
{
    get
    {
        return false;
    }
}

// Implements the IDataGridViewEditingControl 
// .EditingControlDataGridView property. 
public DataGridView EditingControlDataGridView
{
    get
    {
        return dataGridView;
    }
    set
    {
        dataGridView = value;
    }
}

// Implements the IDataGridViewEditingControl 
// .EditingControlValueChanged property. 
public bool EditingControlValueChanged
{
    get
    {
        return valueChanged;
    }
    set
    {
        valueChanged = value;
    }
}

// Implements the IDataGridViewEditingControl 
// .EditingPanelCursor property. 
public Cursor EditingPanelCursor
{
    get
    {
        return base.Cursor;
    }
}

protected override void OnValueChanged(EventArgs eventargs)
{
    // Notify the DataGridView that the contents of the cell 
    // have changed.
    valueChanged = true;
    this.EditingControlDataGridView.NotifyCurrentCellDirty(true);
    base.OnValueChanged(eventargs);
}
} 
```

我在我的数据网格视图中得到了 datetimepicker ....，现在代替 dateTimePicker 我想使用 UserControl TextBox ....，我尝试但我没有得到确切的答案....我在 cisControls 下显示我的代码。 txtDate 是我的用户控件文本框

```
 public CalendarColumn()
        : base(new CalendarCell())
    { }
    public override DataGridViewCell CellTemplate
    {
        get
        {
            return base.CellTemplate;
        }
        set
        {
            // Ensure that the cell used for the template is a CalendarCell. 
            if (value != null &&
                !value.GetType().IsAssignableFrom(typeof(CalendarCell)))
            {
                throw new InvalidCastException("Must be a CalendarCell");
            }
            base.CellTemplate = value;
        }
    }
}
public class CalendarCell : DataGridViewTextBoxCell
{
    ciscontrols.txtDate ct = new ciscontrols.txtDate();
    public CalendarCell()
        : base()
    {
       // this.Style.Format = ct.Text;
    }
    public override void InitializeEditingControl(int rowIndex, object initialFormattedValue, DataGridViewCellStyle dataGridViewCellStyle)
    {
        base.InitializeEditingControl(rowIndex, initialFormattedValue, dataGridViewCellStyle);
        CalendarEditingControl ct1 = DataGridView.EditingControl as CalendarEditingControl;
        //if (this.Value == null)
        //{
        //    ct1.Text = ct1.Text;
        //}
        //else
        //{
        //    // ct1.Text = Convert.ToString(this.Value);
        //}

    }
    public override Type EditType
    {
        get
        {
            return typeof(CalendarEditingControl);
        }
    }
    public override Type ValueType
    {
        get
        {
            return typeof(CalendarEditingControl);
            //return typeof(DateTime);
        }
    }
    public override object DefaultNewRowValue
    {

        get
       {
            return ct.Text;
        }
    }
}
class CalendarEditingControl : ciscontrols.txtDate,IDataGridViewEditingControl
{
    DataGridView datagridview;
    private bool valuechanged = false;
    int rowIndex;
    ciscontrols.txtDate ct = new ciscontrols.txtDate();
    public CalendarEditingControl()
    {
        this.Text = "";
    }
    public object EditingControlFormattedValue
    {
        get
         {
            return ct.Text;
        }
        set
        {
            ct.Text = value.ToString();
        }
    }
    public object GetEditingControlFormattedValue(
   DataGridViewDataErrorContexts context)
    {
        return EditingControlFormattedValue;
    }
    public void ApplyCellStyleToEditingControl(
    DataGridViewCellStyle dataGridViewCellStyle)
    {
        this.Font = dataGridViewCellStyle.Font;

    }
    public int EditingControlRowIndex
    {
        get
        {
            return rowIndex;
        }
        set
        {
            rowIndex = value;
        }
    }

    // Implements the IDataGridViewEditingControl.EditingControlWantsInputKey  
    // method. 
    public bool EditingControlWantsInputKey(
        Keys key, bool dataGridViewWantsInputKey)
    {
        // Let the DateTimePicker handle the keys listed. 
        switch (key & Keys.KeyCode)
        {
            case Keys.Left:
            case Keys.Up:
            case Keys.Down:
            case Keys.Right:
            case Keys.Home:
            case Keys.End:
            case Keys.PageDown:
            case Keys.PageUp:
                return true;
            default:
                return !dataGridViewWantsInputKey;
        }
    }

    // Implements the IDataGridViewEditingControl.PrepareEditingControlForEdit  
    // method. 
    public void PrepareEditingControlForEdit(bool selectAll)
    {
        // No preparation needs to be done.
    }

    // Implements the IDataGridViewEditingControl 
    // .RepositionEditingControlOnValueChange property. 
    public bool RepositionEditingControlOnValueChange
    {
        get
        {
            return false;
        }
    }

    // Implements the IDataGridViewEditingControl 
    // .EditingControlDataGridView property. 
    public DataGridView EditingControlDataGridView
    {
        get
        {
            return datagridview;
        }
       set
        {
            datagridview = value;
       }
    }

    // Implements the IDataGridViewEditingControl 
    // .EditingControlValueChanged property. 
    public bool EditingControlValueChanged
    {
        get
        {
            return valuechanged;
        }
        set
        {
            valuechanged = value;
        }
    }

    // Implements the IDataGridViewEditingControl 
    // .EditingPanelCursor property. 
    public Cursor EditingPanelCursor
    {
        get
        {
            return base.Cursor;
        }
    }
    protected override void OnTextChanged(EventArgs e)
    {
        valuechanged = true;
        this.EditingControlDataGridView.NotifyCurrentCellDirty(true);
        //this.EditingControlDataGridView.NotifyCurrentCellDirty(true);
        base.OnTextChanged(e);
    }

} 
```

# c++ - 如何使用 += 运算符实现标量和向量加法？

> ID：15428854
> 
> 赞同：0
> 
> 时间：2013-03-15T09:33:56.357
> 
> 标签：c++, operator-overloading, vector-graphics

我正在研究 Vector2D 类，我认为使用 +=/+ 运算符实现向量加法和标量加法都是有意义的。

麻烦的是，我真的不知道如何解决这个明显的论点模棱两可，这就是 Clang 所说的：

```
vector2d_test.cpp:17:16: error: use of overloaded operator
      '+=' is ambiguous (with operand types 'Vector2D<float>' and 'int')
        vector += 1;
        ~~~~~~ ^  ~~~~~~~
vector2d.hpp:34:18: note: candidate function
    Vector2D<T>& operator+=(const Vector2D<T>& other)
                 ^
vector2d.hpp:41:18: note: candidate function
    Vector2D<T>& operator+=(const T summand) const 
```

下面是两个函数：

```
Vector2D<T>& operator+=(const Vector2D<T>& other)
{
    x += other.x;
    y += other.y;
    return *this;
}

template <typename S>
Vector2D<T>& operator+=(const S summand) const
{
    x += summand;
    y += summand;
    return *this;
} 
```

所以......知道我能做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:38:10.247

你都写了你的错误信息。您试图添加到 int 类型的向量变量，但您的向量有浮点数。它应该是：

```
vector += 1f; 
```

或者

```
vector += 1.0; 
```

看一看。当你有这个向量时：

```
Vector2D<float> vector; 
```

与此向量对应的函数具有标题：

```
Vector2D<T>& operator+=(const float summand) const; 
```

现在第二个无所谓。当您尝试添加到向量 1 时，您正在尝试调用函数：

```
Vector2D<T>& operator+=(const int summand) const; 
```

你没有声明。这就是编译器向您发送错误消息的原因——它找不到合适的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:56:45.627

目前尚不清楚您要做什么。您发布的`operator+=` 功能是不合法的，除非他们是成员。如果他们是成员，并且你有类似的东西：

```
Vector2D<float> v;
//   ...
v += 1; 
```

该`Vector2D<float>::operator+=( Vector2D<float> const& )` 函数不可调用，因此不会有歧义。如果函数不是成员，那么它们应该写成：

```
template <typename T>
Vector2D<T>& operator+=( Vector2D<T>& lhs, Vector2D<T> const& rhs );
template <typename T, typename U>
Vector2D<T>& operator+=( Vector2D<T>& lhs, U rhs ); 
```

即使在这种情况下，第一个也不能用`rhs`type调用`int`，所以没有歧义。

编辑：

我错过了`const`您帖子中第二个结尾的那个。这是你的一个明显的错字，它仍然没有改变任何东西，*除非*你也有一些隐式转换 `Vector2D`（这可能不是一个好主意）；否则，第一个版本仍然不可调用。例如，如果存在从`int`to的隐式转换`Vector2D`，并且您调用 `+=`非常量 Vector2D，则第一个重载与隐式第一个参数（导致`this`指针）更好匹配，因为它是完全匹配，甚至没有 cv 转换，但第二个函数更适合第二个参数，因为模板实例化会导致完全匹配。所以这个称呼是模棱两可的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:51:40.593

最简单的方法是在 Vector2D ala 中定义函数：

```
Vector2D& operator+=(const Vector2D& rhs)
    { ...each this element += rhs's corresponding element... }

Vector2D& operator+=(const T& summand)
    { ...each this elements += summand... }

friend Vector2D operator+(Vector2D lhs, const Vector2D& rhs) { return lhs += rhs; }

friend Vector2D operator+(Vector2D lhs, const T& rhs) { return lhs += rhs; } 
```

笔记：

*   非成员函数是`friend`s，这样可以方便地内联定义它们
*   功能不应该是`const`（一个在你的问题中）
*   将尝试通常的转换，所以 if `T`is `float`then `int`s 会正常工作，除非你做一些有趣的事情，比如`Vector2D`从一个单一的隐式构造函数中给出一个隐式构造函数，`int`这使得转换的选择变得模棱两可

# android - 什么是所有 Android Webview 版本的通用视频格式（和视频/音频流编码）

> ID：15428856
> 
> 赞同：0
> 
> 时间：2013-03-15T09:34:05.250
> 
> 标签：android, video, encoding, webview, format

我在应用程序中有一个网络视图，我使用 html5 标记。我在具有不同 android 版本的不同 android 设备（三星、索尼等）上遇到了各种问题。有些无法播放 .mp4，只能播放 .m4v 扩展名。另一台旧平板电脑只能播放 mp4。在 Xperia 上，我有一个特殊情况。webview 无法播放 html 中的视频并在另一个自定义视频视图中播放（尽管这根本没有打扰我）。

我需要在打开 webview 后立即自动播放视频（并设法在那些有效的视频上做到这一点），并且我有必须在正确的时间触发的结束视频事件处理程序。

如果有人知道使用什么视频格式 + 视频和音频编码以便与 android 上的所有 webviews 兼容，请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:50:42.847

Android webview 和 HTML5 播放器，可与 Android 支持的视频编解码器配合使用（.mp4 最适合渐进式视频，因为它拥有迄今为止最广泛的支持），它还支持带有 flash 插件的 .flv。

# django - 用 Celery 简单地导入任务

> ID：15428858
> 
> 赞同：1
> 
> 时间：2013-03-15T09:34:07.453
> 
> 标签：django, django-celery

我有一个简单的视图，它将 CSV 数据上传到映射模型并填充数据。这很完美，但现在我想集成[Celery](http://docs.celeryproject.org/)，我真的很难让以下任务正常工作。我正在尝试 Celery 与 Django 和[Amazon SQS](http://aws.amazon.com/sqs/)。

这是我`view.py`运行任务的主要部分：

```
 def upload(request):
        # If we had a POST then get the request post values.
        if request.method == 'POST':
            form = ContactUploadForm(request.POST, request.FILES)
            # Check we have valid data
            if form.is_valid():

                filename = handle_uploaded_file(request.FILES['file'])

                import_csv.delay(filename)

def handle_uploaded_file(f):
    with open('name.csv', 'wb+') as destination:
        for chunk in f.chunks():
            destination.write(chunk) 
```

**这是我第一次尝试 task.py**

```
@task
def import_csv(filename):
    ContactCSVModel.import_from_file(filename) 
```

这在芹菜日志中给出了错误：**`AttributeError: 'NoneType' object has no attribute 'seek'`**

我认为我的第二次尝试行不通，因为它实际上试图将文件上传到 SQS 并给出`SQSError: 413 Request Entity Too Large`. 我假设这根本不是我想要做的，它是一项任务，我不想将文件上传到 SQS。

**在 task.py 的第二次尝试**

```
@task
def import_csv(filename):
    ContactCSVModel.import_data(data = open(filename)) 
```

**第 3 次尝试在 task.py 中传递请求**

```
@task
def import_csv(request):
    filename = handle_uploaded_file(request.FILES['file'])
    ContactCSVModel.import_data(data = open(filename)) 
```

这给出了错误`**Can't pickle <type 'cStringIO.StringO'>: attribute lookup cStringIO.StringO failed**`

**我怎样才能完成这项任务？**我确信这很简单:) 正如你所看到的，我在上面尝试了一些不同的方法来创建这个任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:58:36.373

按照这个例子：[http ://codeinthehole.com/writing/use-models-for-uploads/](http://codeinthehole.com/writing/use-models-for-uploads/)

创建一个新模型来处理文件上传并使用 celery 运行导入，这样任务就是作业 id

```
@task
def process_upload(upload_id):
    upload = Uploads.objects.get(id=upload_id)
    upload.process() 
```

# c# - xml 节点在反序列化过程中为空

> ID：15428860
> 
> 赞同：0
> 
> 时间：2013-03-15T09:34:15.777
> 
> 标签：c#, xml, serialization

我有如下定义的 2 个类：

```
[Serializable()]
public class Topology
{
    [XmlElement("floors")]
    public Floor[] Floors { get; set; }
}

[Serializable()]
public class Floor
{
    [XmlElement("name")]
    public string name { get; set; }

    [XmlElement("map_path")]
    public string map_path { get; set; }
} 
```

我想反序列化下面显示的 xml 文件，我使用下面指定的方法来反序列化 xml 文件。

**XML文件**：

```
<?xml version="1.0" encoding="iso-8859-9"?>
<Topology>
    <floors>
        <floor id="1">
            <name>1</name>
            <map_path>C:\</map_path>
        </floor>
            <floor id="2">
            <name>2</name>
            <map_path>D:\</map_path>
        </floor>
    </floors>
</Topology> 
```

**反序列化方法**：

```
 static void Main(string[] args)
        {
            XmlSerializer serializer = new XmlSerializer(typeof(Topology));

            StreamReader reader = new StreamReader(@"C:\topology2.xml");
            Topology top = (Topology)serializer.Deserialize(reader);
            reader.Close();

            for (int i = 0; i < top.Floors.Length; i++ )
                Console.WriteLine(top.Floors[i].name + top.Floors[i].map_path);

            Console.ReadLine();
        } 
```

我可以获得“Floors”，但我无法获得名称和 map_path 节点值。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:51:31.583

您的 XML 文件格式不适合 xml 序列化程序读取。请遵循以下格式：

```
<?xml version="1.0" encoding="iso-8859-9"?>
<Topology>
    <floors id="1">
        <name>1</name>
        <map_path>C:\</map_path>
    </floors>
    <floors id="2">
        <name>1</name>
        <map_path>C:\</map_path>
    </floors>
</Topology> 
```

# android - Android SOAP XML 解析 ListView 错误

> ID：15428863
> 
> 赞同：1
> 
> 时间：2013-03-15T09:34:23.830
> 
> 标签：android, parsing, soap

我正在创建解析 ListView 的 SOAP xml。

我正在添加 (ksoap2-android-assembly-2.6.2-jar-with-dependencies.jar) jar 文件。

我也在添加权限（）

我正在使用 ArrayList。

我不明白这个错误请帮助我

MainActivity.java

```
public class MainActivity extends ListActivity  {

// XML node keys
static final String FORMMODEL = "FormModel";
static final String TEXT1 = "Text1";
static final String TEXT2 = "Text2";
static final String TEXT3 = "Text3";

private static final String METHOD_NAME = "HelloWorld";
private static final String SOAP_ACTION = "http://tempuri.org/HelloWorld";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://sygnetinfosol.com/webservice.asmx";
//you can get these values from the wsdl file^

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);
request.addProperty("bSelected", true);

SoapSerializationEnvelope sse=new SoapSerializationEnvelope(SoapEnvelope.VER11);
sse.setOutputSoapObject(request);
sse.dotNet=true;

HttpTransportSE htse=new HttpTransportSE(URL);
try {
    htse.call(SOAP_ACTION, sse);
} catch (IOException e) {
    e.printStackTrace();
} catch (XmlPullParserException e) {
    e.printStackTrace();
}

SoapObject res=(SoapObject) sse.bodyIn;

 final ArrayList<HashMap<String, String>> valuesList = new ArrayList<HashMap<String, String>>();

XMLParser parser = new XMLParser();
String xml = parser.getXmlFromUrl(URL); // getting XML
Document doc = parser.getDomElement(xml); // getting DOM element

NodeList nl = doc.getElementsByTagName(FORMMODEL);

// looping through all item nodes <item>
for (int i = 0; i < ((SoapObject) nl).getPropertyCount(); i++) {

    SoapObject  namesObject = (SoapObject) res.getProperty(i);
    for(int j=0;j<namesObject.getPropertyCount();j++)
    {
        Object objectNames=namesObject.getProperty(j);
        SoapObject soapObjectText1 = (SoapObject)objectNames;
        SoapObject soapObjectText2 = (SoapObject)objectNames;
        SoapObject soapObjectText3 = (SoapObject)objectNames;

        String sText1 = soapObjectText1.getProperty("iText1").toString();
        String sText2 = soapObjectText2.getProperty("sText2").toString();
        String sText3 = soapObjectText3.getProperty("sText3").toString();

        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        // adding each child node to HashMap key => value
        map.put(TEXT1, parser.getValue(e, sText1)); 
        map.put(TEXT2, parser.getValue(e, sText2));
        map.put(TEXT3, parser.getValue(e, sText3));

        System.out.println("MY SOAP RESPONE IS"+ res.getProperty(0).toString());

        // adding HashList to ArrayList
        valuesList.add(map);
    }
}    
// Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, valuesList,R.layout.list_item,
            new String[] { TEXT1, TEXT2, TEXT3 }, new int[] {
                    R.id.lat, R.id.long1, R.id.address });

    setListAdapter(adapter);

    ListView lv = getListView();

    System.out.println("MY SOAP RESPONE IS"+ res.getProperty(0).toString());
// Launching new screen on Selecting Single ListItem
lv.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view,int position, long id) {

         HashMap<String, String> map = new HashMap<String, String>();
            map = valuesList.get(position);
        // Starting new intent
        Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
        in.putExtra(TEXT1, map.get(MainActivity.TEXT1));
        in.putExtra(TEXT2, map.get(MainActivity.TEXT2));
        in.putExtra(TEXT3, map.get(MainActivity.TEXT3));

        startActivity(in);

    }
});
}
} 
```

日志猫

```
03-15 09:26:45.923: E/AndroidRuntime(3371): FATAL EXCEPTION: main
03-15 09:26:45.923: E/AndroidRuntime(3371): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.syg.abc/com.syg.abc.MainActivity}: android.os.NetworkOnMainThreadException
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.os.Looper.loop(Looper.java:137)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at java.lang.reflect.Method.invokeNative(Native Method)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at java.lang.reflect.Method.invoke(Method.java:511)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 03-15 09:26:45.923: E/AndroidRuntime(3371):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 03-15 09:26:45.923: E/AndroidRuntime(3371):    at dalvik.system.NativeStart.main(Native Method)
03-15 09:26:45.923: E/AndroidRuntime(3371): Caused by: android.os.NetworkOnMainThreadException
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:81)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
 03-15 09:26:45.923: E/AndroidRuntime(3371):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:152)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at com.syg.abc.MainActivity.onCreate(MainActivity.java:56)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.app.Activity.performCreate(Activity.java:5104)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-15 09:26:45.923: E/AndroidRuntime(3371):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-15 09:26:45.923: E/AndroidRuntime(3371):     ... 11 more
03-15 09:26:46.223: D/dalvikvm(3371): GC_CONCURRENT freed 183K, 12% free 2588K/2912K, paused 110ms+4ms, total 292ms
03-15 09:27:36.943: I/Process(3371): Sending signal. PID: 3371 SIG: 9 
```

mainActivity.java

```
protected void onPostExecute(Void params) {

ListAdapter adapter = new SimpleAdapter(this, valuesList,R.layout.list_item,
        new String[] { TEXT1, TEXT2, TEXT3 }, new int[] {
                R.id.lat, R.id.long1, R.id.address });

setListAdapter(adapter);

ListView lv = getListView();
lv.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view,int position, long id) {

         HashMap<String, String> map = new HashMap<String, String>();
            map = valuesList.get(position);
        // Starting new intent
        Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
        in.putExtra(TEXT1, map.get(MainActivity.TEXT1));
        in.putExtra(TEXT2, map.get(MainActivity.TEXT2));
        in.putExtra(TEXT3, map.get(MainActivity.TEXT3));

        startActivity(in);

  }
 });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:37:51.593

您在主线程上进行网络调用。

**当应用程序尝试在其**主线程上执行****网络操作**时，会**引发****NetworkOnMainThreadException**。**

 ******这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

[http://android-developers.blogspot.in/2009/05/painless-threading.html](http://android-developers.blogspot.in/2009/05/painless-threading.html)。我建议你看看链接中的文章。

使用 Asynctask 发出肥皂请求。

在你的活动中

```
public class MainActivity extends ListActivity  {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
                new SoaprequestTask().execute();

       }

private class SoapRequestTask extends AsyncTask<Void, Void, Void> {
 //runs on ui thread.
 protected void onPreExecute() {
     //display progressdialog
 }
   // runs in the background thread. do not update ui from here
 protected Void doInBackground(Void... params) {
        //make a soap request here
 SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);
 request.addProperty("bSelected", true);

 SoapSerializationEnvelope sse=new SoapSerializationEnvelope(SoapEnvelope.VER11);
 sse.setOutputSoapObject(request);
 sse.dotNet=true;

 HttpTransportSE htse=new HttpTransportSE(URL);
 try {
   htse.call(SOAP_ACTION, sse);
  } catch (IOException e) {
   e.printStackTrace();
  } catch (XmlPullParserException e) {
    e.printStackTrace();
  }

   SoapObject res=(SoapObject) sse.bodyIn;

   final ArrayList<HashMap<String, String>> valuesList = new ArrayList<HashMap<String, String>>();

   XMLParser parser = new XMLParser();
   String xml = parser.getXmlFromUrl(URL); // getting XML
   Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(FORMMODEL);

   // looping through all item nodes <item>
   for (int i = 0; i < ((SoapObject) nl).getPropertyCount(); i++) {

    SoapObject  namesObject = (SoapObject) res.getProperty(i);
    for(int j=0;j<namesObject.getPropertyCount();j++)
    {
    Object objectNames=namesObject.getProperty(j);
    SoapObject soapObjectText1 = (SoapObject)objectNames;
    SoapObject soapObjectText2 = (SoapObject)objectNames;
    SoapObject soapObjectText3 = (SoapObject)objectNames;

    String sText1 = soapObjectText1.getProperty("iText1").toString();
    String sText2 = soapObjectText2.getProperty("sText2").toString();
    String sText3 = soapObjectText3.getProperty("sText3").toString();

    // creating new HashMap
    HashMap<String, String> map = new HashMap<String, String>();
    Element e = (Element) nl.item(i);

    // adding each child node to HashMap key => value
    map.put(TEXT1, parser.getValue(e, sText1)); 
    map.put(TEXT2, parser.getValue(e, sText2));
    map.put(TEXT3, parser.getValue(e, sText3));

    System.out.println("MY SOAP RESPONE IS"+ res.getProperty(0).toString());

    // adding HashList to ArrayList
    valuesList.add(map);
    }
     return null;
 }

  //runs on ui thread.update ui here
 protected void onPostExecute(Void params) {
    //dismiss progress dialog and update ui. display data in listview
  }
 }

} 
```

我刚刚从您的问题中粘贴了上述代码。确保不要更改 ui doInBackground()。在 onPostExecute() 中显示列表视图中的内容；

看看标题[The 4 Steps](http://developer.android.com/reference/android/os/AsyncTask.html)

**或者，您可以使用 robopsice**。 [https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:38:33.110

您正试图在您的 UI 线程上发出请求。该`onCreate()`方法将在 UI 线程上调用，并且一直不鼓励执行像这样的长时间操作，并且从 Honeycomb（我相信）开始尝试这样做现在会抛出异常。

您可能想从[这个问题](https://stackoverflow.com/questions/4722974/threading-example-in-android)中使用一些关于 Threading in Android 的资源。******

# http - HTTP 状态码：区分容量过剩和停机维护

> ID：15428866
> 
> 赞同：2
> 
> 时间：2013-03-15T09:34:27.587
> 
> 标签：http, http-status-codes, http-status-code-503

HTTP 状态代码 503[在 rfc2616](https://www.rfc-editor.org/rfc/rfc2616#section-10.5.4)中被描述为与服务器“由于服务器临时过载或维护而当前无法处理请求”相关。

在某些情况下，应用程序可能会因维护而停机。在某些情况下，应用程序可能会超出容量。

在我正在开发的服务器应用程序中，我希望能够在 HTTP 响应中区分这两种情况，以便客户端应用程序可以更准确地了解服务不可用的原因。

然后，客户端应用程序可以向用户显示相关的“容量过剩”或“停机维护”通知。

我可以选择使用未定义的 5XX 状态代码（例如 520），但是如果有的话，我更愿意使用已定义的标准方法。

是否有定义的标准方法来区分由于容量问题不可用和由于维护不可用之间的 HTTP 响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:50:08.490

如果您不想定义自己的状态码，可以使用 503 并设置不同的自定义错误消息，根据是“容量过剩”还是“停机维护”。

您还可以设置 Retry-After 响应标头字段，例如，如果您知道何时完成维护并且服务器已备份。

状态码的详细信息：http:
[//www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

Retry-After 标头字段的详细信息：http:
[//www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:43:18.887

不要使用未定义的状态码，除非你愿意去注册它。

此外，您可以使用整个有效负载来添加其他信息。

最后，[http](http://greenbytes.de/tech/webdav/rfc6585.html#status-429) ://greenbytes.de/tech/webdav/rfc6585.html#status-429可能很有趣。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-03T10:57:02.283

我认为 410 状态码“Gone”可以是正确答案，它表明该资源之前存在，但目前它不可用，并且不会再可用 [https://www.w3.org/Protocols/rfc2616/rfc2616-sec10 .html](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

> ## 10.4.11 410 走了
> 
> 请求的资源在服务器上不再可用，并且不知道转发地址。预计这种情况将被视为永久性的。具有链接编辑能力的客户端应该在用户批准后删除对 Request-URI 的引用。如果服务器不知道或无法确定条件是否是永久的，则应该使用状态代码 404（未找到）。除非另有说明，否则此响应是可缓存的。
> 
> 410 响应的主要目的是通过通知接收者该资源故意不可用并且服务器所有者希望删除到该资源的远程链接来协助 Web 维护任务。这种事件对于限时促销服务和属于不再在服务器站点工作的个人的资源很常见。没有必要将所有永久不可用的资源标记为“已消失”或将标记保留任何时间 - 这由服务器所有者自行决定。

# environment-variables - 环境变量和 PHP

> ID：15428872
> 
> 赞同：20
> 
> 时间：2013-03-15T09:34:38.017
> 
> 标签：environment-variables, php

[我有一个 ubuntu 服务器，根据ubuntu 社区建议](https://help.ubuntu.com/community/EnvironmentVariables#System-wide_environment_variables)在 /etc/environment 中设置了一些自定义环境变量

当我从命令行使用 php 时，我可以使用 php 的`getenv()`函数来访问这些变量。

此外，如果我从命令行运行`phpinfo()`，我会在 ENVIRONMENT 部分看到我的所有变量。

但是，当尝试访问由 php5-fpm 运行的进程内的相同数据时，此数据不可用。我可以在环境部分看到的`phpinfo()`是：

```
USER    www-data
HOME    /var/www 
```

我知道命令行使用这个ini：

```
/etc/php5/cli/php.ini 
```

fpm 使用：

```
/etc/php5/fpm/php.ini 
```

我没有设法找到两者之间的任何差异，这可以解释为什么 ENV 变量在两者中都没有出现。

此外，如果运行：

```
sudo su www-data 
```

然后回显我期望它们确实可供 www-data 用户使用的环境变量。

我需要做什么才能让我的环境变量进入由 fpm 运行的 php 进程？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-05T08:39:00.497

事实证明，您必须在 php-fpm.conf 中显式设置 ENV 变量

这是一个例子：

```
[global]
pid = /var/run/php5-fpm.pid
error_log = /var/log/php5-fpm.log

[www]
user = www-data
group = www-data
listen = /var/run/php5-fpm.sock
pm = dynamic
pm.max_children = 5
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3
chdir = /
env[MY_ENV_VAR_1] = 'value1'
env[MY_ENV_VAR_2] = 'value2' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-29T20:24:30.910

**1.在php-fpm.conf中自动设置环境变量**

```
clear_env = no 
```

**2.在php-fpm.conf中手动设置环境变量**

```
env[MY_ENV_VAR_1] = 'value1'
env[MY_ENV_VAR_2] = 'value2' 
```

**！这两种方法都在 php-fpm.conf 中描述：**

> 在 FPM 工作程序中清除环境 通过在添加此池配置中指定的环境变量之前清除工作程序中的环境来防止任意环境变量到达 FPM 工作程序进程。设置为“no”将使 PHP 代码可以通过 getenv()、$_ENV 和 $_SERVER 使用所有环境变量。默认值：是

```
clear_env = no 
```

> 传递环境变量，如 LD_LIBRARY_PATH。所有 $VARIABLEs 都取自当前环境。默认值：清洁环境

```
env[HOSTNAME] = $HOSTNAME
env[PATH] = /usr/local/bin:/usr/bin:/bin
env[TMP] = /tmp
env[TMPDIR] = /tmp
env[TEMP] = /tmp 
```

我在这个[github 讨论](https://github.com/docker-library/php/issues/74)中找到了解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-16T01:10:37.860

问题是当你运行 php-fpm 时。该进程未加载环境。
您可以在启动脚本中加载它。
我的 php-fpm 是由 apt-get 安装的。
所以修改

> /etc/init.d/php5-fpm

并添加（注意点和斜线之间的空格）

> . /etc/profile

并修改 /etc/profile 添加

> . /home/user/env.sh

在 env.sh 中。您可以`export`根据需要设置环境。

然后修改

> php-fpm.conf

`env[MY_ENV_VAR_1] = 'value1'` 在该`[www]`部分下添加。
最后的。重新启动 php-fpm。您将通过 fpm 获得环境负载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-28T05:23:36.617

除了上面的答案之外，我还在`php-fpm7`一个`nginx`docker`alpine:3.8`容器中运行。我面临的问题是 env 变量`USER myuser`没有被复制到`USER root`

我的 docker 入口点是

```
sudo nginx  # Runs nginx as daemon
sudo php-fpm7 -F -O  # Runs php-fpm7 in foreground 
```

解决方案是

```
sudo -E nginx
sudo -E php-fpm7 -F -O 
```

`-E`sudo 选项将当前用户的所有环境变量复制到根目录

当然，你的`php-fpm.d/www.conf`文件应该有`clear_env=no`

仅供参考，如果您使用的是守护程序服务，例如`supervisord`他们有自己的设置来复制环境。例如，`supervisord`有设置称为`copy_env=True`

# ruby-on-rails-3 - Rails 路由：如何将 /users/:id/posts/:id 显示为 /posts/:id

> ID：15428877
> 
> 赞同：1
> 
> 时间：2013-03-15T09:34:58.563
> 
> 标签：ruby-on-rails-3, routes

我正在开发一个基本的 Rails 应用程序，想知道如何显示`/users/:id/posts/:id as /posts/:id`。现在我的路线是

```
resources :users do
  resources :post
 end 
```

我需要这样才能让每个帖子都被用户关联起来。但同时为了便于使用，我需要能够在`/posts/:id`

任何建议的帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:58:02.733

你可能在 Rails 中寻找**浅层选项**

```
resources :users, :shallow => true do
  resources :post
end 
```

[http://rails-bestpractices.com/posts/11-needless-deep-nesting](http://rails-bestpractices.com/posts/11-needless-deep-nesting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:24:08.960

您可以声明到同一控制器的第二条路由：

```
resources :users do
  resources :posts
end

resources :posts 
```

您只需要优雅地处理您的帖子控制器中没有 user_id 参数。

# mysql - linux盒子上的Mysql更新挂起

> ID：15428882
> 
> 赞同：0
> 
> 时间：2013-03-15T09:35:13.780
> 
> 标签：mysql

我的 Windows 机器上有一个 MYSQL 数据库，Linux 服务器上有另一个类似的设置。虽然我在 Windows 设置上执行非常基本的更新/删除/删除查询没有问题，但在 Linux 服务器上运行时我的查询挂起。Windows机器上的MYSQL版本是5.1.42，Linux上是5.6.5-m8，而且更新的挂起不限于单个表。我的数据库中有 4-5 个交叉引用表，此更新/删除/删除正在挂起。更新/删除/删除虽然适用于其他不相关的表。在 Linux 上，首先，我只是简单地获取从我的 Windows 机器生成的转储（没有插入）。其次，我运行一个插入语句 ( `insert into flat (FLATID, BLOCKNO, FLATNO) Values (1, 'B1','F1');`)。第三，我在 table() 上运行更新`UPDATE FLAT SET FLATNO='F2';`，它挂起。平表说明如下：

```
+----------------------+--------------+------+-----+---------+----------------+
| Field                | Type         | Null | Key | Default | Extra          |
+----------------------+--------------+------+-----+---------+----------------+
| FLATID               | bigint(20)   | NO   | PRI | NULL    | auto_increment |
||BLOCKNO              | varchar(20)  | NO   |     | NULL    |                |
| FLATNO               | varchar(10)  | NO   |     | NULL    |                |
||col_COLID    | int(11)      | YES  | MUL | NULL    |                |
| famID_FAMID    | bigint(20)   | YES  | MUL | NULL    |                |
| | allotID_ALLOTID | bigint(20)   | YES  | MUL | NULL    |                |
|+----------------------+--------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:13:15.770

在尝试了几乎所有东西（包括使用 INNODB 变量）之后，我最终尝试从平面表中删除参考 allotID_ALLOTID。ALLOTMENT 表引用了 FLAT 表也引用的 FAMILY 表。从两个平面家庭表中删除 allotID_ALLOTID 有效。

# ios - UITableView 后退按钮

> ID：15428883
> 
> 赞同：-2
> 
> 时间：2013-03-15T09:35:16.960
> 
> 标签：ios, uitableview

我有两个 UITableView，我遇到的问题是从第二个 UITableView 回到第一个 UITableView。我已使用以下方式应用了后退按钮：

```
- (IBAction)BackButtonClicked:(id)sender
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

问题是它带我回到以前的 UITableView 但是当我单击该 UITableView 的行时，它返回一个空的 UITableView ，其中应该有数据。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    int i = 0;
    if(indexPath.row == 0)
    {
        i = 0;
    }
    else
    {
        i = (indexPath.row * 4);
    }
    NSLog(@"%@", [ParsedData objectAtIndex:i]);      
    SubList *SubListNib = [[SubList alloc] initWithNibName:@"SubList" bundle:nil];
    self->newSubList = SubListNib;
    newSubList.folderid = [ParsedData objectAtIndex:i];
    [self presentModalViewController:SubListNib animated:YES];
} 
```

![在此处输入图像描述](../Images/d9250a68424f9ffc9d593da4501d6aa4.png) 数据第一次被输入到数组中。

![在此处输入图像描述](../Images/fe852e2d773cf0296f711ba2d4785b11.png) 转到上一个屏幕并返回时，数据不会进入数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:40:01.883

当您从第二个表视图返回到第一个表时，您应该重新加载第一个表视图

[firstTableViewName reloadData];

此方法也必须包含在后退按钮单击中。

# php - 将 div 保存到 MySQL

> ID：15428884
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:35:18.253
> 
> 标签：php, javascript, jquery, mysql

我正在开发一个工作问题门户。现在我有一个问题，每个问题应该是一个按钮“添加到测试”。如果单击此按钮，则内容`content-div`将保存到 MySQL 表中。我使用以下代码....

主要代码

```
<div id="content"> 
    This content shut be safe in the MySQL table.. 
</div> 
 <script> 
$(function(){ 
$('input.add').on('click',function(){ 
   var div_contents = $("#content").html(); 
            $.post('tomysql.php', { content: div_content }); 
}); 
}); 
</script>  
<input type="button" class="add" value="Add to Test" /> 
```

tomysql.php

```
<?php 
$con = mysql_connect('127.0.0.1', 'root'); 

mysql_select_db($teste, $con); 

$div = mysql_real_escape_string($_POST['content']); 

$sql = "INSERT INTO teste (content) VALUES ('{$div}')"; 

$query = mysql_query($sql, $con); 
if($query) { 
     // Success! 
} else { 
     // Failure :( 
} 
?> 
```

但它现在不起作用。问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:38:49.247

将变量放在单引号之间会将其视为文本：

```
$sql = "INSERT INTO teste (content) VALUES ('{$div}')"; 
```

试试这个：

```
$sql = "INSERT INTO teste (content) VALUES ('". $div . "')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:34:29.153

我有问题的答案

```
<div id="content"> 
<a href="google.de">google</a> 
Dieser inhalt soll in die MySQL Tabelle gespeichert werden..... 
</div> 
<script language="javascript"> 
    function test() 
    { 
        var div_content = document.getElementById("content").innerHTML; 
        location.href = "tomysql.php?c=" + div_content ,"tab";     
    } 
</script> 
```

和 tomysql.php

```
<?php 

if (isset($_GET['c'])) 
{ 
    $con = mysql_connect('127.0.0.1', 'root', ''); 

    mysql_select_db('teste', $con); 

    $sql = "INSERT INTO teste (content) VALUES ('". $_GET['c']. "')"; 

    $query = mysql_query($sql, $con); 
    if($query) { 
         echo("ok"); 
    } else { 
         echo("nicht ok"); 
    } 

    mysql_close($con); 
} 
?> 
```

有用 ：-）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:37:33.380

你在这里忘记了密码

```
$con = mysql_connect('127.0.0.1', 'root','your_password'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:57:59.560

```
$sql = "INSERT INTO teste (content) VALUES ('". addslashes($div) . "')"; 
```

# c# - 如何将值返回到异步方法中？

> ID：15428885
> 
> 赞同：2
> 
> 时间：2013-03-15T09:35:19.453
> 
> 标签：c#, asynchronous, windows-phone-8, restsharp

当我调用此方法时，什么也没有发生，应用程序崩溃。我认为这是由于`ExecuteAsync`方法。有人可以帮助我吗？这是我的代码。

**代码1**：

```
public Task<Connection> Connect(string userId, string password)
    {
        var client = new RestClient(_baseUrl)
            {
                Authenticator = new SimpleAuthenticator("user", userId,
                     "password", password)
            };
        var tcs = new TaskCompletionSource<Connection>();
        var request = new RestRequest(AppResources.Authenticating);
        client.ExecuteAsync<Connection>(request, response => tcs.SetResult(new 
               JsonDeserializer().Deserialize<Connection>(response)));
        return tcs.Task;
    } 
```

我也试过这段代码，但仍然存在同样的问题。

**代码2**：

```
public async Task<Connection> Connect(string userId, string password)
    {
        var client = new RestClient(_baseUrl)
            {
                Authenticator = new SimpleAuthenticator("user", userId,
                      "password", password)
            };
        var tcs = new TaskCompletionSource<Connection>();
        var request = new RestRequest(AppResources.Authenticating);
        client.ExecuteAsync<Connection>(request, response => tcs.SetResult(new 
                JsonDeserializer().Deserialize<Connection>(response)));
        Debug.WriteLine(tcs.Task.Result.Data);
        return await tcs.Task;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:55:14.997

您不想在异步代码中使用`Task.Result`或。`Task.Wait`这些成员仅在您`Task`用作任务并行库的一部分（编写并行代码）时使用。它们几乎不应该在异步代码中使用。

在您的情况下，我怀疑您正在调用返回的`Result`（或可能进一步调用堆栈）。正如我在博客中解释的那样，这可能[会导致死锁。](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)`Task``Connect`

对于初学者的异步代码，我不同意@LasseVKarlsen。我认为现在新的`async`/`await`语言功能已经发布，您绝对应该学习它。

我建议您从[我的介绍](http://blog.stephencleary.com/2012/02/async-and-await.html)开始，然后跟进[MSDN 文档](http://msdn.microsoft.com/en-us/library/hh191443.aspx)和[TAP 模式](http://msdn.microsoft.com/en-us/library/hh873175.aspx)。然后查看我的[最佳实践文章](http://msdn.microsoft.com/en-us/magazine/jj991977.aspx)以避免最常见的陷阱。

# asp.net-mvc-3-areas - 为什么部分视图不加载

> ID：15428893
> 
> 赞同：0
> 
> 时间：2013-03-15T09:35:27.027
> 
> 标签：asp.net-mvc-3-areas

我有这样的jquery，我正在尝试加载部分视图，但它不工作它显示没有任何控制的对话框

```
mvcJqGrid.demo.edit = function(id) {

            var grid = $('#Products');
            var myCellData = grid.jqGrid('getCell', id, 'ProductId');
            GetProduct(myCellData);

            return false;

        };
function GetProduct(id)
        {

          $("#dialog-form").load("@Url.Action("EditProduct","Admin")",
                function (response, status, xhr) {
                    $("#dialog-form").dialog('open');
                });

        } ; 
```

我的行动是：

```
 [HttpPost]
    public ActionResult EditProduct(string productId)
{
         int id = 0;
        Product product = null;
        bool result   = int.TryParse(productId,out id);
        ProductModel productModel=new ProductModel();
        Session["ProductModule"] = productModel.GetProduct(id);
        return PartialView("Product_Partial", Session["ProductModule"] as ProductModel);
    //return RedirectToAction("Product", "Admin");

    } 
```

我的部分观点是：

```
@using (Html.BeginForm("Product","Admin",method:FormMethod.Post))
{

 <fieldset>
     <legend>Product Information</legend>
     <div class="editor-label">
         @Html.LabelFor(m => m.ProductTitle)
     </div>
     <div class="editor-field">
         @Html.TextBoxFor(m => m.ProductTitle)
     </div>
     <div class="editor-label">
         @Html.LabelFor(m => m.ProductTypeId)
     </div>
     <div>
         <select name="ProductType">
             <option value="null">Select ProductType</option>
             @foreach (var row in new Database("MyConnectionString").Query<LookUp>("select * from Lookup where LookupTypeId=(select LookupTypeId from LookupType where LookupTypeName=@0)", "ProductType"))
             {
                 <option value="@row.LookupId">@row.LookupName</option>
             }
         </select>
     </div>
     <div class="editor-label">
         @Html.LabelFor(m => m.BrandId)
     </div>
     <div >
         <select name="Brand">
             <option value="null">Select Brand</option>
             @foreach (var row in new Database("MyConnectionString").Query<LookUp>("select * from Lookup where LookupTypeId=(select LookupTypeId from LookupType where LookupTypeName=@0)", "Brand"))
             {
                 <option value="@row.LookupId">@row.LookupName</option>
             }
         </select>
     </div>
     <div class="editor-label">
         @Html.LabelFor(m => m.BasePrice)
     </div>
     <div class="editor-field">
         @Html.TextBoxFor(m => m.BasePrice)
     </div>
     <div class="editor-label">
         @Html.LabelFor(m => m.ProductSpecification)
     </div>
     <div class="editor-field">
         @Html.TextBoxFor(m => m.ProductSpecification)
     </div>
     <div class="editor-label">
         @Html.LabelFor(m => m.ProductSummary)
     </div>
     <div class="editor-field">
         @Html.TextBoxFor(m => m.ProductSummary)
     </div>
     <div class="editor-label">
         @Html.LabelFor(m => m.IsOutOfStock)
     </div>
     <div class="ui-icon-check">
         @Html.CheckBoxFor(m => m.IsOutOfStock)
     </div>

     <table>
         <tr>
             <td>
                 <input type="submit" value="Add" onclick="@Url.Action("Product", "Admin")" />
             </td>
             <td>
                 <button type="submit" id="btnDelete" name="Command" value="Update" onclick="@Url.Action("Product", "Admin")" >Update</button>
             </td>
             <td>
                 <button type="submit" id="btnSearch" name="Command" value="Delete"  onclick="@Url.Action("Product", "Admin")">Delete</button>
             </td>
         </tr>

     </table>
 </fieldset>

} 
```

我的视图页面：

```
<div id="dialog-form" title="Add New Product">

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-16T14:13:48.370

我在这里看不到插件的初始化..

我直接看到：

```
 $("#dialog-form").dialog('open'); 
```

但是在哪里用选项初始化对话框？我认为您应该在成功响应中初始化对话框，而不是直接调用函数“打开”。

查看[doc jquery ui 对话框](https://jqueryui.com/dialog/#modal-form)

```
 $("#dialog-form").load("@Url.Action("EditProduct","Admin")",
            function (response, status, xhr) {
                $( "#dialog-form" ).dialog();
            }); 
```

希望对你有帮助

# ruby-on-rails - Rails 祖先：获取祖先模型的孩子记录

> ID：15428895
> 
> 赞同：0
> 
> 时间：2013-03-15T09:35:37.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ancestry

我有两个模型：

```
Post
 - category_id

Category (ancestry model) 
```

类别树看起来像这样：

```
- Root Category

  - Sub Category 
```

现在让我们说一个帖子被归类到子类别。我在根类别中，我也想查看子类别中的所有帖子。是否有可能通过祖先获得这些？

类别树总是只有一个嵌套级别，所以也许祖先太多了..

提前致谢

**仅一个嵌套级别的工作示例**

```
@category = Category.find(params[:id])
category_ids = @category.children.map(&:id) << @category.id
category_ids = category_ids.join(",")
@posts = Post.recent.where("category_id IN (#{category_ids})").page(params[:page]) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T16:50:44.710

我建议以下方法可以解决问题：

```
Post.where(category_id: @category.subtree_ids) 
```

并且也可能是最有效的方式，而不会做一些非常可怕的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:37:08.200

就像是

```
Post.where('subcategory_id in ('+@category.subcategories.select(&:id).join(',')+')') 
```

然后，您请求帖子，这些帖子在@category.sucategories 生成的列表中具有其类别ID，您可以从中选择ID 并将它们合并成一个字符串，如“1,5,77”。

非常非常糟糕的事情是（只是为了好玩）：

```
@mylist = Array.new
Post.all.each do |item|
  @mylist << item if item.subcategory.category = @selectedrootcategory 
```

更新：只是想到了一些其他的解决方案：

```
@allposts = Array.new
@selectedrootcategory.includes(:subcategory => :posts).subcategories.each do |subcat|
  @allposts << subcat.posts 
```

在一个查询中检索所有帖子（感谢包含），然后您遍历子类别和帖子。

# zend-framework - Zend 框架与 Smarty 3

> ID：15428914
> 
> 赞同：1
> 
> 时间：2013-03-15T09:36:51.463
> 
> 标签：zend-framework, smarty, smarty3

如何在 Zend Framework 中配置 Smarty 3？我不知道在 application.ini 和 Bootstrap.php 中放什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:12:34.353

关于 zend 的 smarty3 的良好分步教程：http: [//gediminasm.org/post/smarty-3-extension-for-zend-framework](http://gediminasm.org/post/smarty-3-extension-for-zend-framework)

下次您可能会尝试在网络 (www.google.com) 上搜索有关您的问题的教程/主题，*然后再*在这里提问。如果那时你遇到了一个特殊的（细节）问题，请在这里提问。看看[http://mattgemmell.com/2008/12/08/what-have-you-tried/](http://mattgemmell.com/2008/12/08/what-have-you-tried/)

# java - 无法创建 PoolableConnectionFactory（（SSL）加密。错误：签名算法不匹配“。）

> ID：15428916
> 
> 赞同：2
> 
> 时间：2013-03-15T09:36:59.850
> 
> 标签：java, sql-server, jdbc

连接到 MSSQL Server 2008 DB 时收到以下错误消息：

> 无法创建 PoolableConnectionFactory（驱动程序无法使用安全套接字层 (SSL) 加密建立与 SQL Server 的安全连接。错误：“签名算法不匹配”。）

我正在使用`sqljdbc4.0.jar`，我的连接字符串如下：

```
driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver" maxActive="10" maxIdle="4"
    name="sql2008" username="sa" password="pwd" type="javax.sql.DataSource"     
    url="jdbc:sqlserver://192.168.1.111:1435;databaseName=sampledb;" 
```

操作系统：windows8（64位）；Java 编辑器：Netbeans 7.2.1（64 位）

请帮我找到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:50:59.983

是的，我通过谷歌找到了解决方案。

使用以下 cmd 为 SQLSERVER 创建证书：

makecert -r -pe -n "CN=SQLServer2008" -b 01/01/2012 -e 01/01/2040 -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localMachine -sky exchange -sp "Microsoft RSA SChannel 加密提供程序”-sy 12

并注册自签名证书

并将证书分配给 sqlserver。

有关更多详细信息，请访问：[http ://goralsoft.com/blog/?p=99](http://goralsoft.com/blog/?p=99)

# android - Android java声音等效

> ID：15428919
> 
> 赞同：2
> 
> 时间：2013-03-15T09:37:03.900
> 
> 标签：android

android中是否有Java声音的等价物？我正在尝试将 java 应用程序移植到 android，我需要在其中使用 java 声音示例和数据线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:44:06.280

看起来您可能对[AudioTrack](http://developer.android.com/reference/android/media/AudioTrack.html)感兴趣。您可以将数据流式传输到它，就像使用 Java DataLine 一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-05T23:58:56.683

也许您可以使用它[https://github.com/google/ringdroid](https://github.com/google/ringdroid) 有一个 SoundFile 类，其中包含您需要的所有功能。

# php - jQuery Spinner 更改数据库

> ID：15428922
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:37:10.497
> 
> 标签：php, jquery-ui, jquery, spinner

我第一次在这里发帖。我希望有人能帮助我。

那么有人可以给我一个关于如何在更改 ui 微调器后更新 mysql 数据库的示例吗？我一直在做比 javascript 更多的 php（所以我有点忘了它）而且我没有使用 jQuery，但它看起来很简单，我只是不确定在微调器更改后如何做某事。我知道将使用 Ajax，但有人可以解释一下你将如何做到这一点..

```
<?php buncha php code here.. connected to database ?>
<html>
    <head>
        <script jquerylinkhere></script>
        <script jqueryuilinkhere></script>
        <script>
         $(function() {
             var urmom = $( ".spinner" ).spinner();
             **not sure what goes here to send info to database**
         });
        </script>
    </head>
    <body>
        <table>
        <?php loops by amount stored in database table { ?>
        <tr>
            <td><?php echo $query["id"]; ?></td>
            <td>
                <input class="spinner" name="value" value="<?php echo $query["value"]; ?>"/>
            </td>
        </tr>
     <?php } ?>
    </table>
    </body>
 </html> 
```

我已经在数据库中创建了一个名为“products”的表，其中包含“id”和“value”列，目前有 5 个产品，它们的值都为 0。

因此，每次我更改微调器然后将该微调器留给另一个时，我都希望将新值添加到数据库中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:51:18.103

我的 jQuery 不是最好的，但我认为这应该对您有所帮助。

```
urmom.focusout(function() {
    $.ajax(LinkToYourPHPScript, {
        data: { Value : urmom.value() },
        type: 'POST'
    });
}); 
```

该脚本将（如果我的“头编译器”现在没有让我失败）对 focusout 事件做出反应并调用 Ajax 函数，该函数会将微调器的当前（格式化）值放入`$_POST['Value']`变量中。

同样，此代码完全未经测试。

在旁注中，'urmom' 并不是一个很好的变量名。我同意通常很难找到好的变量名，但比`spn`a 更适合. 你不同意吗？`spinner``urmom`

# jqgrid - 如何从 jqgrid 添加表单中删除取消按钮？

> ID：15428925
> 
> 赞同：2
> 
> 时间：2013-03-15T09:37:28.987
> 
> 标签：jqgrid

jqgrid 添加对话框有两个按钮（提交和取消）。单击取消按钮时将显示一条消息。该消息框有 3 个按钮（是、否和取消）。现在我想删除取消按钮。任何可能性........？

对不起，我的英语不好。谢谢你。

jqgrid的示例编码

```
<sjg:grid id="gridtable"
caption="Customer List"
dataType="json"
href="%{remoteurl}"
pager="true"
gridModel="customerList"
rowNum="10"
autowidth="true"
editurl="%{editurl}"
editinline="false"
navigator="true"
navigatorAdd="true"
navigatorAddOptions="{
        viewPagerButtons: false,
        recreateForm: true,
        checkOnUpdate: true,
        closeAfterAdd: true,
        height: 275,
        width: 600,
        draggable: false,
        resizable: false
    }"
navigatorDelete="true"
navigatorEdit="true"
navigatorRefresh="true"
navigatorSearch="true"
navigatorEditOptions="{
        viewPagerButtons: false,
        recreateForm: true,
        checkOnUpdate: true,
        closeAfterEdit: true,
        height: 275,
        width: 600,
        draggable: false,
        resizeable: false
    }"
navigatorDeleteOptions="{ checkOnUpdate: true}"
navigatorViewOptions="{
        viewPagerButtons: false,
        recreateForm: true,
        checkOnUpdate: true,
        height: 225,
        width: 620,
        draggable: false,
        resizeable: false
    }"
navigatorSearchOptions="{
        sopt:['eq','ne','lt','gt','in','ni','cn','nc'],
        closeAfterSearch: true
    }"
navigatorView="true"
rownumbers="true"
rowList="10,20,30"
viewrecords="true" 
```

>

太感谢了。

在这里我指定取消按钮 ![在此处输入图像描述](../Images/5e51f8f3ac82c7e93f22abd3e303d92a.png)

如何删除此取消按钮？

我只需要是和否按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T11:15:09.670

使用网格 API 怎么可能我不知道但是，使用 jquery 你可以通过以下方式隐藏这个按钮： **$("#gridtable #cNew).css({'display':'none'});**

'#cNew' 是该按钮的 id，或者您可以通过右键单击该按钮并在 mozila webbrowser 中选择检查元素来获取 Cancle 按钮的 id，或者使用 firebug 获取该按钮的 id，然后将该 id 替换为 #cNew。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T10:29:23.263

我认为您可以将其应用于每个表单添加、编辑等。

隐藏按钮取消

```
onInitializeForm: function($form) {
$form.parent().find('#cData').hide();
} 
```

或者如果你想隐藏按钮提交

```
beforeShowForm: function ($form) {
$form.parent().find('#sData').hide();
}, 
```

# javascript - 限制用户仅在 jsp 中可用的所有文本字段中的一个中输入数据

> ID：15428928
> 
> 赞同：0
> 
> 时间：2013-03-15T09:37:37.470
> 
> 标签：javascript, html, jsp, struts

卢比。5 卢比 10 卢比 20 卢比 50 卢比 100 卢比 500 卢比 1000 卢比

在表格的一行中有七个如上所述的文本字段。要求是我们需要限制用户只能在显示的七个文本字段之一中输入数据。请记住，其中不止一行是使用`logic:iterate`.

请分享验证代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:57:41.560

由于您没有提供完整的详细信息，我将其视为 Web 应用程序，如果它不是 Web 应用程序，则可以在任何技术中实现类似的逻辑。

```
1\. TextField 1 onFocus="validate()"
2\. TextField 2 onFocus="validate()"
3\. TextField 3 onFocus="validate()"
4\. TextField 4 onFocus="validate()"
5\. TextField 5 onFocus="validate()"
-----

function validate(){

var a1 = document.getElementById("textField1");
var a2 = document.getElementById("textField2");
var a3 = document.getElementById("textField3");
var a4 = document.getElementById("textField4");
var a5 = document.getElementById("textField5");

if(a1.trim() == ''){
  //hide all textFields other then textField1
}

if(a2.trim() == ''){
  //hide all textFields other then textField2
}

} 
```

如果文本字段的数量是固定的并且数量较少，这是您可以做到的一种方法。如果更多，则需要一些动态逻辑。

同样对于动态的东西，您可以在 validate(this) 调用中传递 id 并简单地保留它并隐藏其他函数。

我错过了你迭代的东西，

在这种情况下，您可以只传递行 id 来验证函数，并在函数中尝试执行 for 循环 7 次，同样隐藏所有 id 以给定行 id 结尾的文本字段（这取决于您为文本字段提供 id 的逻辑.)

# linux - 将 puts 的输出同时发送到日志文件和标准输出？

> ID：15428933
> 
> 赞同：1
> 
> 时间：2013-03-15T09:38:03.883
> 
> 标签：linux, tcl, expect

我这样做了很多次`puts "$log" "blah blah blah"`，`puts "blah blah blah"` 一次将其放入日志文件，一次将其显示到标准输出。

它可以用一行或简单的方式完成，只需使用一个 put 或以更好的方式。

还有任何颜色代码可以用来输出彩色文本，就像`tput`在 linux 中一样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T11:18:11.057

如果您是自己调用输出的人，请创建一个过程并改为调用它。

```
proc log2OutErr {msg} {
    global log

    puts $msg
    puts $log $msg
} 
```

如果您希望*所有*脚本输出到日志文件和标准输出，请不要在 Tcl 中打开日志文件，只需在启动时将脚本输出通过管道传输到[tee](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/tee.html)`tclsh script.tcl | tee logfile` : ，然后`puts`到标准输出。

# php - 向 CloudFront 添加动态标头

> ID：15428936
> 
> 赞同：1
> 
> 时间：2013-03-15T09:38:16.803
> 
> 标签：php, amazon-cloudfront

我正在使用 CloudFront，以便人们可以下载内容。我有对 url 进行签名的代码，并且效果很好。我正在尝试动态设置内容处置标头。

这是我想要的一个例子： [http ://d3cxc3t3tjxyo3.cloudfront.net/224454/scene/ash_hollywood_delivery_boy_high.mp4?Policy=XX&Signature=XX&Key-Pair-Id=XX&content-disposition=attachment%3Bfilename%3DFilename.mp4](http://d3cxc3t3tjxyo3.cloudfront.net/224454/scene/ash_hollywood_delivery_boy_high.mp4?Policy=XX&Signature=XX&Key-Pair-Id=XX&content-disposition=attachment%3Bfilename%3DFilename.mp4)

# java - CountDownLatch.wait 应该如何处理 InterruptedException

> ID：15428938
> 
> 赞同：1
> 
> 时间：2013-03-15T09:38:17.860
> 
> 标签：java, multithreading, wait, interrupt

`InterruptedException`等待期间应该如何处理`CountDownLatch.wait`？

我需要确保`CountDownLatch.wait`将等待所有其他线程完成，但是如果在等待期间会抛出异常，我应该如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:58:40.973

首先，方法是`await()`，不是`wait()`。`wait()`是 java.lang.Object 的一个方法，它做的事情完全不同。

`latch.await()`除非您决定从另一个线程中断被阻塞的线程（通过调用`thread.interrupt()`），否则您不会得到任何 InterruptedException 。而且既然你决定中断线程，你应该知道当线程被中断时该怎么做。通常，当您希望线程尽快完成他正在做的事情并停止运行时，您决定中断线程。

# jsf - 使用 Maven 在动态 Web 项目中构建和包含 JSF taglib 作为 jar

> ID：15428943
> 
> 赞同：1
> 
> 时间：2013-03-15T09:38:33.080
> 
> 标签：jsf, maven, taglib

我正在开发一个 JSF 标签库。[为了测试它，我按照这里](http://jsflive.wordpress.com/2011/03/24/custom-component-library/)的描述将它编译成一个 JAR并手动将它添加到一个动态 Web 项目（在 WEB-INF/lib 目录中）。

我知道这一步可以自动化，但我不知道如何。谁能解释如何将生成的 jar 复制到 Eclipse 中的第二个项目？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:16:34.630

相当多的步骤要做:)

*   将 pom.xml 添加到您的项目中并遵循 maven 目录结构。为 taglib 项目使用包装“jar”。假设您使用 groupId=com.company.taglib artifactId=company-taglib version=1.0.0-SNAPSHOT
*   如果您`mvn install`在此项目上执行此操作，它会将 jar 复制到您的本地 maven 存储库（通常位于 ~/.m2/ - 现在 maven 可以解决对本地计算机的依赖关系
*   将 pom.xml 添加到您的 webproject，使用打包“war”并将 taglib 项目添加为依赖项（`<dependencies>`在 pom.xml 中）。

> ```
> <dependency>
>   <groupId>com.company.taglib</groupId>
>   <artifactId>company-taglib</artifactId>
>   <version>1.0.0-SNAPSHOT</version>
> </dependency> 
> ```

Maven 将从您的本地存储库中解决此依赖关系。在使用 m2e 插件的 Eclipse 中，它将直接解析项目。

要“发布”taglib.jar，您需要一个基础设施来共享工件。通常使用存储库代理（Sonatype Nexus 或 Artifactory）。您还可以使用使用该`file://`协议的网络文件夹进行快速启动。

在 pom.xml 中，您需要添加`<distributionManagement>`部分（在 taglib pom.xml 中）以指定将工件上传到的文件夹/代理。然后A`mvn deploy`将为您构建和复制 jar 文件。

其他开发人员需要将该位置添加为 settings.xml 中的存储库（我不建议在 pom.xml 中这样做），或者如果您设置了 maven 代理，请在 settings.xml 中配置 mirrorOf

有可用的原型（项目模板）可以帮助您创建初始项目结构：[http ://maven.apache.org/guides/getting-started/maven-in-five-minutes.html](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

另见：[http ://maven.apache.org/guides/getting-started/index.html](http://maven.apache.org/guides/getting-started/index.html)

# python - i 在 python 中显示错误的示例看门狗代码

> ID：15428951
> 
> 赞同：0
> 
> 时间：2013-03-15T09:39:00.037
> 
> 标签：python, watchdog

我复制了一个示例代码

```
import sys
import time
import logging
from watchdog.observers import Observer
from watchdog.events import LoggingEventHandler

if __name__ == "__main__":
logging.basicConfig(level=logging.INFO,
                    format='%(asctime)s - %(message)s',
                    datefmt='%Y-%m-%d %H:%M:%S')
path = sys.argv[1] if len(sys.argv) > 1 else '.'
event_handler = LoggingEventHandler()
observer = Observer()
observer.schedule(event_handler, path, recursive=True)
observer.start()
try:
    while True:
        time.sleep(1)
except KeyboardInterrupt:
    observer.stop()
observer.join() 
```

请帮助我，我是 python 广告看门狗的新手

对于以下问题，我还需要更多答案：以什么形式显示以下代码的输出以及在哪里？如何更改代码中要监控的目录？

并尝试通过将其保存在文件 test.py 中使用以下内容来运行它

> python C:\文件夹\test.py

它返回了以下错误

```
C:\Python33>python c:\folder\test.py
Traceback (most recent call last):
File "c:\folder\test.py", line 4, in <module>
from watchdog.observers import Observer
File "C:\Python33\lib\site-packages\watchdog\observers\__init__.py", line 34,
in <module>
from watchdog.observers.api import BaseObserver, DEFAULT_OBSERVER_TIMEOUT
File "C:\Python33\lib\site-packages\watchdog\observers\api.py", line 62, in <module>
from watchdog.utils.bricks import OrderedSetQueue as SetQueue
File "C:\Python33\lib\site-packages\watchdog\utils\bricks.py", line 112, in <module>
if not sys.version < (2, 6, 0):
TypeError: unorderable types: str() < tuple() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:50:05.070

这看起来像看门狗中的一个错误。它适用于 Python 2.6 和 2.7。`sys.version`两者都是字符串，可与元组进行比较。对我来说似乎是一个奇怪的想法。

这种行为可能在 3.x 中有所改变。如果它没有用 3.x 正确测试，你应该会遇到更多的麻烦。使用 Python 2.7 仍然是最安全的，因为许多库还没有提供 3.x 支持。

无论如何，如果你真的，真的想解决这个问题，你可以修补 watchdog\utils\bricks.py 中的第 112 行：

```
ver = tuple([int(x) for x in sys.version.split()[0].split('.')])
if not ver < (2, 6, 0): 
```

那真的很丑。而是使用 Python 2.7。

# .net - 在 Visual Basic 2010 Express 中添加和使用 MSCOMM

> ID：15428957
> 
> 赞同：2
> 
> 时间：2013-03-15T09:39:20.567
> 
> 标签：.net, vb.net, serial-port, mscomm32

我已经通过单击项目-> 添加引用-> Com 选项卡-> 选择 mycomm control 6.0 将 mycomm.lib 添加到我的 Visual Basic 中。但我仍然不知道如何使用它。我想要的是从visual basic express 2010发送一个字符到微控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:48:37.337

MSComm 控件 6.0 旨在用于与 VB.NET 完全不兼容的*非常*旧版本的 Visual Basic (VB 6.0)（这是您现在在 Visual Basic 2010 中所拥有的）。提供此旧控件仅用于向后兼容，不建议在新应用程序中使用。

.NET Framework 提供了您应该使用的[`System.IO.Ports.SerialPort`类。](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)我想你会发现它更容易使用，因为它是在设计时考虑到 VB.NET 的。

您可以在上述链接文档的底部找到一些非常全面的示例代码。如果这不能满足您的目的，您肯定可以在网上其他地方找到大量示例代码，因为您知道解锁 Google 预言机的神奇术语。

# android - {"error":{"message":"(#324) 需要上传文件","type":"OAuthException","code":324}}

> ID：15428959
> 
> 赞同：9
> 
> 时间：2013-03-15T09:39:22.007
> 
> 标签：android, facebook, image, post, types

```
private void postToWall(String msg) {
        Bundle parameters = new Bundle();
        // parameters.putString("method", "stream.publish");

        JSONObject attachment = new JSONObject();

        try {

            byte[] data = null;

            Bitmap bi = BitmapFactory.decodeResource(getResources(),
                    R.drawable.bluerib);
            // Bitmap bi =
            // BitmapFactory.decodeFile("http://demos.com/LangGuage/medal_1.png");
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            bi.compress(Bitmap.CompressFormat.JPEG, 30, baos);
            data = baos.toByteArray();

            // Bundle params = new Bundle();
            // params.putByteArray("picture", data);
            attachment.put("type", "image");
            // attachment.put("picture", data);
            attachment.put("name", "LangGuage");
            attachment.put("message", msg);
            attachment.put("src", "http://demos.com/LangGuage/medal_1.png");
            attachment.put("href", "http://www.abc.com");
            // attachment.put("href",
            // "http://hwsdemos.com/LangGuage/medal_1.png");

            parameters.putString(Facebook.TOKEN, facebook.getAccessToken());
            parameters.putString("attachment", attachment.toString());
            String response = facebook.request("me/photos", parameters, "POST");

            System.out.println("----responce" + response);

            if (response.contains("Duplicate status message")) {
                progressHandler.sendEmptyMessage(1);
                resp = 1;

            } else if (response == null || response.equals("")
                    || response.equals("false") || response.contains("error")) {
                Log.d("error", "error response");
            } else {
                progressHandler.sendEmptyMessage(0);
                resp = 0;

            }

        } catch (Exception e) {
            Log.e(TAG, "Posting fail");

            e.printStackTrace();
            // finish();
        }

    } 
```

我的应用程序支持 facebook 的单点登录。我不想使用对话框。每当我尝试在附件中同时发布图像和消息时，我都会发现：

```
{"error":{"message":"(#324) Requires upload file","type":"OAuthException","code":324}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:32:30.947

请参阅此处的照片图 POST 请求的文档[https://developers.facebook.com/docs/reference/api/user/#photos](https://developers.facebook.com/docs/reference/api/user/#photos)

您的图像数据应进入“源”字段，其他可用字段只有“消息”、“地点”和“no_story”。“src”、“名称”、“href”不是有效字段。

# javascript - 执行 IIFE 的不同方法？

> ID：15428964
> 
> 赞同：2
> 
> 时间：2013-03-15T09:39:36.520
> 
> 标签：javascript, iife

有没有区别

```
(function (){alert('')}    ()) 
```

对比

```
(function (){alert('')})    () 
```

两者都有效，但我应该什么时候使用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:43:21.473

包装括号仅用于强制解析器将构造解析为函数表达式，而不是函数声明。这是必要的，因为调用函数声明是非法的，但调用函数表达式是合法的。

为此，调用括号的位置并不重要。您如何强制将函数解析为表达式也无关紧要。以下内容也可以：

```
!function () {
    alert('')
}();

~function () {
    alert('')
}();

// Any unary operator will work 
```

如果您决定使用包装括号（分组运算符），请记住[JSLint 会告诉您将调用括号移到](http://jslinterrors.com/move-the-invocation-into-the-parens-that-contain-the-function/). 这只是一种风格选择，如果你愿意，你可以忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:43:50.367

他们都做同样的事情。

JSLint 建议您使用第一个，在分组括号内使用执行括号，大概这样所有内容都整齐地组合在一起。

对于它的价值，我个人认为您的第二个示例更清晰，因为在扫描代码时，您可以看到执行从函数表达式中脱颖而出。

虽然不是重复的，[但这个问题](https://stackoverflow.com/questions/4979252/jslint-error-move-the-invocation-into-the-parens-that-contain-the-function)涵盖了类似的基础，因此可能值得一看。

# encoding - GB18030 vs Big5 中文字符编码 sizewise

> ID：15428965
> 
> 赞同：0
> 
> 时间：2013-03-15T09:39:37.513
> 
> 标签：encoding, character-encoding

我们有两种可用于中文字符的编码，**GB18030**和**Big5**分别用于简体中文和繁体中文。

单个汉字在每种编码中需要多少字节/八位字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:53:53.753

通过维基百科：

[GB_18030 - Guójiā Biāozhǔn（国家标准）](http://en.wikipedia.org/wiki/GB_18030#Technical_details)是一种 4 个八位字节（字节）的编码方案。因此，每个字符应占用 4 个八位字节。GB18030-[新中文编码标准也是如此](http://www.gb18030.com/)

[Big-5 或 Big5](http://en.wikipedia.org/wiki/Big5#Organization)是 2 个八位字节（字节）的编码方案。这里每个字符占用 2 个八位字节。

# ios - UILocalNotification 应用程序在后台

> ID：15428967
> 
> 赞同：0
> 
> 时间：2013-03-15T09:39:45.210
> 
> 标签：ios, objective-c, uilocalnotification

我已经在我的应用程序中成功实现了 UILocalNotifications。我面临的唯一问题是应用程序处于后台时以及用户是否清除了通知。一旦用户打开应用程序，应用程序仍然显示带有 1 的徽章。

但是我正在清除徽章

```
 application.applicationIconBadgeNumber = 0; 
```

在 didFinishLaunchingWithOptions 和 didReceiveLocalNotification 这两个函数上。

一旦应用程序进入前台并带有所有通知数据，如何提示我。

在这方面的任何帮助和建议将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:01:30.030

applicationWillEnterForeground：告诉代理应用程序即将进入前台。

```
- (void)applicationWillEnterForeground:(UIApplication *)application{
     application.applicationIconBadgeNumber = 0;
} 
```

didFinishLaunchingWithOptions 仅在应用启动时调用。而且我不确定在后台调用了 didReceiveLocalNotification 。

所以 applicationWillEnterForeground 应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:04:09.800

您需要使用

```
- (void)applicationDidBecomeActive:(UIApplication *)application{
} 
```

来自您的 Apps 委托的方法，而不是

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
} 
```

然后，在您的应用重新激活后，此点将被调用...

# bash - 从 shell 中的多行变量中读取

> ID：15428968
> 
> 赞同：1
> 
> 时间：2013-03-15T09:39:58.200
> 
> 标签：bash, shell, unix

我有一个包含多行字符串的变量。我需要阅读前两行并根据它们的值进行一些处理。我怎样才能做到这一点 ？

我的变量中的样本值是

```
 Description: some value
 Entity: Some value
 Fixed 
```

我需要将前两行（描述和实体）作为不同的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:47:50.273

与`sed`：

```
$ echo "$var"
Description: some value
Entity: Some value
Fixed

$ var2=$(sed -n 1p <<< "$var")

$ var3=$(sed -n 2p <<< "$var")

$ echo $var2
Description: some value

$ echo $var3
Entity: Some value 
```

如果您只想要这些值：

```
$ var2=$(sed -n '1s/.*: //p' <<< "$var")

$ var3=$(sed -n '2s/.*: //p' <<< "$var")

$ echo $var2
some value

$ echo $var3
Some value 
```

同样的事情`grep`：

```
$ var2=$(grep Description <<< "$var")

$ var3=$(grep Entity <<< "$var")

$ echo $var2
Description: some value

$ echo $var3
Entity: Some value 
```

仅值：

```
$ var2=$(grep -Po "Description: \K.*" <<< "$var")

$ var3=$(grep -Po "Entity: \K.*" <<< "$var")

$ echo $var2
some value

$ echo $var3
Some value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:45:55.937

例如：

```
$ echo "$MYVAR"
Description: some value
Entity: Some value
Fixed

$ VAR1=$(echo "$MYVAR" | sed -n 1p)

$ VAR2=$(echo "$MYVAR" | sed -n 2p) 
```

`VAR1`现在分别包含第一行和`VAR2`第二行`MYVAR`：

```
$ echo $VAR1
Description: some value

$ echo $VAR2
Entity: Some value 
```

# c# - 如何在 Active Directory 的“成员”选项卡中获取组

> ID：15428969
> 
> 赞同：1
> 
> 时间：2013-03-15T09:39:59.763
> 
> 标签：c#, asp.net, active-directory

我的第一个项目是为我们的 Active Directory 创建一个 Web 工具。我需要做的一件事是获取并显示显示在 Active Directory 中用户帐户的“MemberOf”选项卡中的组，并将其传递给 gridview。我做了一些家庭作业，这就是我所拥有的。

我有一个文本框（txtusername），旁边是一个按钮（“搜索此用户的组”）。

这是我的代码：

```
protected void btnsearch_Click(object sender, EventArgs e)
{
    ADMAM.GetUserGroups(txtusername.Text, Session["WindowsID"].ToString(), Session["Password"].ToString());
}

public DataTable GetUserGroups(string sUserName, string windowsid, string password)
{
    DataTable dt = new DataTable();
    UserPrincipal oUserPrincipal = GetUser(sUserName, windowsid, password);

    PrincipalSearchResult<Principal> oPrincipalSearchResult = oUserPrincipal.GetGroups();

    foreach (Principal oResult in oPrincipalSearchResult)
    {
        dt.Rows.Add(oResult.Name);
        dt.AcceptChanges();
    }

    return dt;
} 
```

我仍然无法在“MemberOf”选项卡中获取组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:04:27.000

尝试使用`.GetAuthorizationGroups`调用：

```
PrincipalSearchResult<Principal> oPrincipalSearchResult = oUserPrincipal.GetAuthorizationGroups();

foreach (Principal oResult in oPrincipalSearchResult)
{
    dt.Rows.Add(oResult.Name);
    dt.AcceptChanges();
} 
```

This has the added benefit that it will recursively search through group memberships for a user (if the user is member of `Group A` which in turn is member of `Group B`, then `.GetAuthorizationGroups()` will also return `Group B` as a group the user is a member of - indirectly).

# android - 将位图保存到文件中并返回具有位图图像的文件

> ID：15428975
> 
> 赞同：17
> 
> 时间：2013-03-15T09:40:21.343
> 
> 标签：android

我在将位图保存到文件时遇到问题。我的方法是这样的：

```
private File savebitmap(Bitmap bmp) {
    String extStorageDirectory = Environment.getExternalStorageDirectory()
            .toString();
    OutputStream outStream = null;

    File file = new File(bmp + ".png");
    if (file.exists()) {
        file.delete();
        file = new File(extStorageDirectory, bmp + ".png");
        Log.e("file exist", "" + file + ",Bitmap= " + bmp);
    }
    try {
        outStream = new FileOutputStream(file);
        bmp.compress(Bitmap.CompressFormat.PNG, 100, outStream);
        outStream.flush();
        outStream.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    Log.e("file", "" + file);
    return file;

} 
```

它给了我文件错误。我这样调用这个方法：

```
Drawable d = iv.getDrawable();
Bitmap bitmap = ((BitmapDrawable) d).getBitmap();
File file = savebitmap(bitmap); 
```

请帮我...

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-15T09:56:52.620

我尝试对您的代码进行一些更正我假设您想使用文件名而不是位图作为参数

```
 private File savebitmap(String filename) {
      String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
      OutputStream outStream = null;

      File file = new File(filename + ".png");
      if (file.exists()) {
         file.delete();
         file = new File(extStorageDirectory, filename + ".png");
         Log.e("file exist", "" + file + ",Bitmap= " + filename);
      }
      try {
         // make a new bitmap from your file
         Bitmap bitmap = BitmapFactory.decodeFile(file.getName());

         outStream = new FileOutputStream(file);
         bitmap.compress(Bitmap.CompressFormat.PNG, 100, outStream);
         outStream.flush();
         outStream.close();
      } catch (Exception e) {
         e.printStackTrace();
      }
      Log.e("file", "" + file);
      return file;

   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:50:14.003

你不能这样写

```
 File file = new File(bmp + ".png"); 
```

这条线也是错误的

```
file = new File(extStorageDirectory, bmp + ".png"); 
```

您必须提供**字符串**值而不是位图。

```
 File file = new File(filename + ".png"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:50:21.287

更改文件 file = new File(bmp + ".png"); to File file = new File(extStorageDirectory,"bmp.png"); 就像你第二次做的一样。

# html - 在 Internet Explorer 中全屏显示 HTML5 网页

> ID：15428977
> 
> 赞同：1
> 
> 时间：2013-03-15T09:40:23.443
> 
> 标签：html, internet-explorer, fullscreen

我的任务要求我在 HTML5 中创建一个具有以下要求的页面：

1.  与 Internet Explorer 10 兼容
2.  可以选择根据过滤器值启用页面上某些 Excel 报告的全屏视图
3.  不重新加载已加载的报告，必须隐藏页面的其他内容，并应隐藏任务栏和工具栏
4.  应该可以选择退出全屏视图而无需重新加载

我只希望页面上加载的报告全屏显示。

我试过`window.open ("www.stackoverflow.com","","fullscreen=yes");` 但这会打开一个新窗口并重新加载内容

我已经尝试过 requestFullScreen() 但根据此[页面](http://blogs.sitepointstatic.com/examples/tech/full-screen/index.html)IE 不支持此功能

并且还希望[触发](https://stackoverflow.com/questions/6428242/why-trigger-f11-press-event-doesnt-work)F11 键是一个答案，但这也不起作用..

有没有人可以帮助我找到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:44:42.673

你可以精确的目的地：`this.href`

`window.open(this.href, 'test', 'fullscreen=yes, toolbar=no, menubar=no, location=no, resizable=yes, scrollbars=no, status=no');`

编辑：我在[这里找到了解决方案](http://www.sitepoint.com/html5-full-screen-api/)

尝试使用 HTML5 全屏 API

# octave - 单元阵列元素操作的矢量化

> ID：15428985
> 
> 赞同：1
> 
> 时间：2013-03-15T09:41:08.147
> 
> 标签：octave, vectorization, cell-array

我有一个 1xN 维元胞数组，其中包含 AxB 维矩阵，其中 A > 0 和 B > 2。我想提取每个矩阵的第二列和第三列，并创建一个包含这些新矩阵的新元胞数组。

我知道我可以这样做：

```
newcell = cell(size(oldcell));
for i = 1:size(oldcell,2)
    newcell{i} = oldcell{i}(:, [2, 3]);
endfor 
```

但我想知道是否可以通过进一步矢量化来避免循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:20:35.787

我想到了。这可以通过 cellfun() 来完成，将 UniformOutput 选项设置为 false（默认为 true）。

```
newcell = cellfun(@(x) x(:, [2, 3]), oldcell, 'UniformOutput', false); 
```

这不适用于 UniformOutput=true 的原因是 cellfun() 然后期望输出是标量的，在这种情况下它们不是。

# itext - 为什么我找不到 iTextSharp.text.pdf.PdfPKCS7.GetSubjectFields？

> ID：15428986
> 
> 赞同：4
> 
> 时间：2013-03-15T09:41:08.700
> 
> 标签：itext

我正在尝试找到方法：

> iTextSharp.text.pdf.PdfPKCS7.GetSubjectFields()

..of iText，它不存在。图书馆变了吗？

我已经包括了所有程序集：

```
itextsharp.dll
itextsharp.pdfa.dll
itextsharp.xtra.dll 
```

我尝试使用此功能：[https ://stackoverflow.com/a/9825431/2173353](https://stackoverflow.com/a/9825431/2173353)

我错过了什么？

我认为，根据[这个](http://www.afterlogic.com/mailbee-net/docs-itextsharp/html/9ef8d2b4-ecb8-9e40-defb-cdc4d9742b7c.htm)，它应该在那里！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T09:35:43.143

好的。我得到了它。

现在是：`iTextSharp.text.pdf.security.CertificateInfo.GetSubjectFields()`。上帝保佑“对象资源管理器”！

# php - 为什么在类的构造函数中定义变量时会出现未定义变量的错误？

> ID：15428987
> 
> 赞同：3
> 
> 时间：2013-03-15T09:41:08.997
> 
> 标签：php, oop, class

从以下内容来看`html`，来自文本字段的数据由以下人员提供`action_script.php`：

```
<form method='post' action='action_script.php'>
        <input type='text' name='text_field' id='text_field' />
        <input type='submit' value='submit' />
</form> 
```

`action_script.php`包含以下代码：

```
<?php
class Tester {
    private $text_field;

    public function __construct() {
        $text_field = $_POST['text_field'];
    }

    public function print_data() {
        echo $text_field; # LINE NUMBER 10
    }
}

$obj = new Tester();
$obj->print_data(); 
```

我尝试打印从 html*发送的数据*`action_script.php`，但收到以下警告/错误：

```
Notice: Undefined variable: text_field in E:\Installed_Apps\xampp\htdocs\php\action_script.php on line 10 
```

这是为什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T09:43:04.487

在类内部，您必须使用 引用您的成员属性`$this->`，例如

```
<?php
class Tester {
    private $text_field;

    public function __construct() {
        $this->text_field = $_POST['text_field'];
    }

    public function print_data() {
        echo $this->text_field; # LINE NUMBER 10
    }
}

$obj = new Tester();
$obj->print_data(); 
```

您还应该`$_POST['text_field']`在使用之前检查是否已设置

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-17T14:33:30.503

我正在使用该`$this`语句但仍然遇到同样的问题，然后我发现调用的变量不能有`$`符号，正如上面提到的一些用户。

例如，*它不能是*这样的：

```
$this->$text_field; 
```

这是**正确的方法**：

```
$this->text_field; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T09:43:48.517

应该 -

```
echo $this->text_field; 
```

在您的`print_data`方法以及所有其他方法中...

使用`$this`关键字访问成员属性和函数。

# css - Windows的CSS根路径与Mac不同？

> ID：15428990
> 
> 赞同：0
> 
> 时间：2013-03-15T09:41:17.707
> 
> 标签：css, path

我刚开始通过观看教程视频来学习 Compass。但我的问题是针对一般 CSS 的。

目录如下所示：

```
/root
    /images
        /mySprites.png
    /javascript
    /stylesheets
        /myStyle.css
    index.html 
```

自动生成精灵时，Compass 输出路径如下：

```
url('/images/mySprites.png'); 
```

但是在 Windows 中使用 Chrome，该路径会导致`stylesheets/images/mysprites.png`并因此不会出现。

他在 Mac 中使用 Chrome，并且精灵显示正确。

我知道`/`习惯于从根文​​件夹开始，但它不能在 Windows 中工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:04:39.737

如上所述，只需使用“ **...** /images/mysprites.png”，因为这将指示 CSS 查找其包含文件夹的上一层。

我希望这回答了你的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:57:23.800

如果某些浏览器知道您指向根文件夹，则第`/`一个不是 CSS 规则之一，它们是自己做的，而 CSS 中没有这样的东西。[http://www.w3.org/TR/CSS21/syndata.html#uri](http://www.w3.org/TR/CSS21/syndata.html#uri)

因此，最好的方法是输入相对于 CSS 文件的路径，而不是文档根目录，或者像这样输入完整的 URL：`http://example.com/images/mySprite.png`

所有最良好的祝愿，
[穆罕默德·阿里·夏帕桑](http://m.a.sharpasand.com/)

# java - 将查询结果映射到属性

> ID：15428991
> 
> 赞同：4
> 
> 时间：2013-03-15T09:41:30.380
> 
> 标签：java, spring, hibernate, dto

有没有办法使用 hibernate 将查询结果设置为 java DTO 属性？

就像是，

```
<hibernate-mapping>

<class name="myDTO" table="my_table">
    <property name="myProperty" query="what_i_need" />
</class>

<query name="what_i_need">
        <![CDATA[
        from    .....
        ]]>
</query>

</hibernate-mapping> 
```

我正在使用spring，hibernate，java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:34:41.833

如果我对您的理解正确，@josef-prochazka 使用公式的建议就是您所需要的。

也可以看看：

*   [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-column](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-column)
*   [http://www.onjava.com/pub/a/onjava/2005/08/03/hibernate.html?page=2](http://www.onjava.com/pub/a/onjava/2005/08/03/hibernate.html?page=2)
*   [http://www.java2s.com/Code/Java/Hibernate/ColumnFormulaStringConcatenate.htm](http://www.java2s.com/Code/Java/Hibernate/ColumnFormulaStringConcatenate.htm)