# StackOverflow 问答 13355000-13355999

# pyrocms - 在 PyroCMS 中将博客设为主页

> ID：13355007
> 
> 赞同：5
> 
> 时间：2012-11-13T03:00:31.177
> 
> 标签：pyrocms

我知道我可以进入页面并将单个页面设置为默认主页，但是如何在 PyroCMS 中将博客设置为主页？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T11:50:36.307

转到 system/cms/config/routes.php 并将默认控制器更改为 blog 模块（大约第 41 行）。

```
$route['default_controller'] = 'blog'; 
```

# java - ArrayList Java-大小为零

> ID：13355008
> 
> 赞同：0
> 
> 时间：2012-11-13T03:00:34.400
> 
> 标签：java, arraylist

我的程序（包括在下面）不断出现列表大小为零的错误，这会弄乱其他所有内容。我猜这意味着我没有正确添加元素，但我无法弄清楚它有什么问题。我在技术上受到挑战，所以很抱歉这不是正确的格式。谢谢你的帮助！

```
import java.util.Scanner;
import java.util.ArrayList;
public class ListStat {
    public static void main (String[] args) {
        ListStat r = new ListStat();
        System.out.println("A default list was created." + r.toString());
        ListStat r1 = new ListStat(30);
        System.out.println("Another list was created." + r1.toString());
        ListStat r2 = new ListStat(40);
        System.out.println("Another list was created." + r2.toString());
        r1.add(4); 
        System.out.println("The item at index 13 for r1 is: " + r1.get(13));
        System.out.println("r1 and r2 are equal: " + r1.equals(r2));
        System.out.println("r1 and r2 overlap this number of times: " + r1.countOverlap(r1, r2));
    }

private ArrayList<Integer> list;

public ListStat() {
list = new ArrayList<Integer>();
}

public ListStat(int N) {
list = new ArrayList<Integer>(N);
for (int i=0; i<N; i++) {
    list.add(i, i+1);
}
}

public void add(int num) {
list.add(num);
}

public int get(int index) {
return list.get(index);
}

public int getListLength(){
return list.size();
}

public double getMean() {
int sum = 0;
for (int i=0; i<list.size(); i++) {
    sum = sum + list.get(i);
}
double mean = sum/list.size();
return mean;
}

public int getSum() {
int sum = 0;
for (int i=0; i<list.size(); i++) {
    sum = sum + list.get(i);
}
return sum;
}

public boolean equals(ListStat r) {
if (r.equals(list))
return true;
else
return false;
}

public static int countOverlap(ListStat r1, ListStat r2) {
int count = 0;
for (int i=0; i<r1.getListLength(); i++) {
    for (int j=0; j<r2.getListLength(); j++) {
        if (r1.get(i)==r2.get(j)) {
            count++;
        }
    }
}
return count;
}

public double getStdDev() {
int sum = 0;
double standardDev = 0.0;
for (int i=0; i<list.size(); i++) {
    sum = sum + list.get(i);
}
double mean = sum/list.size();
double standsum=0;
for (int i=0; i<list.size(); i++) {
    standardDev = (list.get(i) - mean) * (list.get(i) - mean);
    standsum=standsum+standardDev;
}
standsum = standsum/list.size();
standsum = Math.sqrt(standsum);
return standsum;
}

public String toString() {
return "The list length is " + getListLength() + ", the mean is " + getMean() + ", the sum is " + getSum() + ", and the standard deviation is " + getStdDev();  
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:36:53.663

在你的主要方法中，

首先调用无参数构造函数

```
ListStat r = new ListStat(); 
```

以下是您的无参数构造函数的外观：

```
public ListStat() {
    list = new ArrayList<Integer>();
} 
```

它初始化列表但不向列表添加任何内容，因此列表大小为 0。

二、是以下

```
System.out.println("A default list was created." + r.toString()); 
```

这是调用该`toString`方法。

如果你看`toString`方法

```
public String toString() {
    return "The list length is " + getListLength() + ", the mean is " + getMean() + ", the sum is " + getSum() + ", and the standard deviation is " + getStdDev();
} 
```

`getMean`方法是您在那里调用的方法，以下是您在该方法中执行的操作：

```
double mean = sum / list.size(); 
```

那里的列表大小为 0。

因此，您可能想在此处添加条件检查，以查看列表大小是否为 0，然后再执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T03:43:44.053

问题是由

```
double mean = sum / list.size(); 
```

在 getMean() 方法中。

1.  程序创建一个对象 r，它是空的，意味着

    r.size() = 0;

2.  然后在第 9 行，调用 r.toString() 方法，该方法调用 getMean()。由于r.size为0，所以程序抛出异常

**线程“主”java.lang.ArithmeticException 中的异常：/ 为零**

# c - 释放 2D 动态分配的内存时出错

> ID：13355012
> 
> 赞同：1
> 
> 时间：2012-11-13T03:01:03.170
> 
> 标签：c, arrays, malloc, free, dynamic-memory-allocation

我有一个问题，我尝试释放一些 2D 动态分配的内存，该内存失败并使 cmd 崩溃而没有有用的错误消息。

```
#include<stdio.h>
#include<stdlib.h>
#include<time.h>

#define RANDOM_NUM 100

/*Function Prototypes*/
void fill_arrays(int**, int, int);
void find_minimum(int**, int, int);

int main(int argc, char* argv[]) {

    int arrays_size = 10;
    int num_of_arrays = 100;
    int j, i;
    int** arrays;
    int pid;

    srand(time(NULL));

    /*Dynamically allocate data*/
    arrays = (int**) malloc(num_of_arrays*sizeof(int*));
    for (i = 0; i < arrays_size; i++)  {
       arrays[i] = (int*) malloc(arrays_size*sizeof(int));
    }

    /*Function to fill arrays with random numbers*/
    fill_arrays(arrays, num_of_arrays, arrays_size);

    /*Function to find maximum element of each array*/
    find_minimum(arrays, num_of_arrays, arrays_size);

    for(i=0;i<num_of_arrays;i++)
    {
        //free(arrays[i]);
        printf("debug\n");
    }
    free(arrays);

    return (EXIT_SUCCESS);
}

void fill_arrays(int** array, int amount, int size) {
  int i, j; /*loop index variables*/

  for (i=0;i<amount;i++) {
     for(j=0;j<size;j++) {
        array[i][j] = rand()%RANDOM_NUM;
        printf("Array %d %d = %d\n", i , j ,array[i][j]);
     }
  }
}

void find_minimum (int** array, int amount, int size) {

   int minimum;
   int value;
   int c, i;
   int locationC = 0;
   int locationI = 0;

   for (c = 0; c < amount; c++)
   {
      minimum = array[c][0];
      for (i = 0; i < size; i++)
      {

         value = array[c][i];
         if (value < minimum)
         {
             minimum  = value;
             locationI = i;
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:08:01.520

改成

```
arrays = (int**) malloc(num_of_arrays*sizeof(int*));
for (i = 0; i < num_of_arrays; i++)  // num_of_arrays, not arrays_size
    arrays[i] = (int*) malloc(arrays_size*sizeof(*arrays[i])); 
```

编辑，N*M 数组分配的一般形式。注意内存可能不连续。

```
T **a = malloc(sizeof *a * N);
if (a)
{
  for (i = 0; i < N; i++)
  {
    a[i] = malloc(sizeof *a[i] * M);
  }
} 
```

如何释放

```
 for(i=0;i<num_of_arrays;i++)
    {
        free(arrays[i]);
        printf("debug\n");
    }

    free(arrays); 
```

# asp.net-mvc-3 - Sitecore 6.6 和 MVC 领域

> ID：13355013
> 
> 赞同：2
> 
> 时间：2012-11-13T03:01:32.500
> 
> 标签：asp.net-mvc-3, sitecore, sitecore6

我正在开发一个大型 Sitecore 6.6 MVC 站点。老实说，我很难在 Google 上找到任何好的信息。

我的问题是。我在 Sitecore 内容编辑器中进行控制器渲染。我希望这个控制器渲染指向我的 MVC 项目中的 MVC 区域。

在 Sitecore 中我的控制器渲染的数据部分中，我有 2 个文本框： **控制器** 和 **控制器操作**

我在控制器文本框中键入什么以指向我的区域。

我的区域是这样的：`<site root>/Areas/UserManagement/ProfileController.cs`

我已经尝试了一切。我希望有人能帮帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:44:33.973

在 Controller 字段中，您将`Profile`指定您的`ProfileController`，在 Controller Action 字段中，您将输入您希望调用的 ProfileController 的 Action 的名称。

您的 UserManagement 区域可能会有一个`UserManagementAreaRegistration`类，其中定义了区域特定的路由，并且将从 ApplicationStart 事件处理程序中调用它。

这就是连接控制器渲染的方法。当看到这个时，有一些绊脚石：

1.  动作名称唯一性。我没有设法获得 MapRoute 的命名空间重载以允许在解决方案中的其他地方出现的操作名称。

    `public System.Web.Routing.Route MapRoute(string name, string url, object defaults, string[] namespaces)`

2.  然而，为了能够让视图解析过程尊重区域路径，它似乎搜索由控制器名称确定的标准视图文件夹。从您的示例中，我必须将剃刀视图的副本放入`~/Views/UserManagement/`其中才能渲染。

# javascript - 谷歌地图 - 不显示？

> ID：13355015
> 
> 赞同：0
> 
> 时间：2012-11-13T03:01:59.083
> 
> 标签：javascript, google-maps, google-maps-api-3

我想显示一张地图，然后在侧边栏中显示 3 个文本链接，onclick 将更改地图上的位置。

由于尝试将代码从 V2 移植到 V3，地图不会显示。

我确定只是一个小错误..我的代码如下：

```
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script> 
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
</head>
<body>
    <div id="map" style="width: 459px; height: 200px"></div>
    <div id="side_bar"></div>

    <script type="text/javascript">
    //<![CDATA[

    if (GBrowserIsCompatible()) {

      // this variable will collect the html which will eventually be placed in the side_bar
      var side_bar_html = "";

      // arrays to hold copies of the markers and html used by the side_bar
      // because the function closure trick doesnt work there
      var gmarkers = [];

      // A function to create the marker and set up the event window
      function createMarker(point,name,html) {
        var marker = new GMarker(point);
        GEvent.addListener(marker, "click", function() {
          marker.openInfoWindowHtml(html);
        });
        // save the info we need to use later for the side_bar
        gmarkers.push(marker);
        // add a line to the side_bar html
        side_bar_html += '<a href="javascript:myclick(' + (gmarkers.length-1) + ')">' + name + '<\/a><br>';
         return marker;
      }

      // This function picks up the click and opens the corresponding info window
      function myclick(i) {
        GEvent.trigger(gmarkers[i], "click");
      }

      // create the map
      var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map'),
            mapOptions);
      }
      map.addControl(new GLargeMapControl());
      map.addControl(new GMapTypeControl());
      map.setCenter(new GLatLng( 43.907787,-79.359741), 8);

      // add the points    
      var point = new GLatLng(43.65654,-79.90138);
      var marker = createMarker(point,"This place","Some stuff to display in the<br>First Info Window")
      map.addOverlay(marker);

      var point = new GLatLng(43.91892,-78.89231);
      var marker = createMarker(point,"That place","Some stuff to display in the<br>Second Info Window")
      map.addOverlay(marker);

      var point = new GLatLng(43.82589,-78.89231);
      var marker = createMarker(point,"The other place","Some stuff to display in the<br>Third Info Window")
      map.addOverlay(marker);

      // put the assembled side_bar_html contents into the side_bar div
      document.getElementById("side_bar").innerHTML = side_bar_html;

    }

    else {
      alert("Sorry, the Google Maps API is not compatible with this browser");
    }

    google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:27:41.627

好的，试试这段代码：

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
  </head>
  <body>
    <div style="position:relative;width:600px;height:400px">
      <div id="map" style="position:absolute;left:0;top:0;width:75%; height:100%"></div>
      <div id="side_bar" style="position:absolute;right:0;top:0;width:25%; height:100%"></div>
    </div>

    <script type="text/javascript">
      //<![CDATA[

      // this variable will collect the html which will eventually be placed in the side_bar
      var side_bar_html = "";

      // arrays to hold copies of the markers and html used by the side_bar
      // because the function closure trick doesnt work there
      var gmarkers = [];

      var infoWnd = new google.maps.InfoWindow();

      // A function to create the marker and set up the event window
      function createMarker(point, name, html) {
        var marker = new google.maps.Marker({
          position : point
        });
        google.maps.event.addListener(marker, "click", function() {
          infoWnd.setContent(html);
          infoWnd.open(marker.getMap(), marker);
        });
        // save the info we need to use later for the side_bar
        gmarkers.push(marker);
        // add a line to the side_bar html
        side_bar_html += '<a href="javascript:myclick(' + (gmarkers.length - 1) + ')">' + name + '<\/a><br>';
        return marker;
      }

      // This function picks up the click and opens the corresponding info window
      function myclick(i) {
        google.maps.event.trigger(gmarkers[i], "click");
      }

      // create the map
      var map;
      function initialize() {
        var mapOptions = {
          zoom : 8,
          center : new google.maps.LatLng(43.91892, -78.89231),
          mapTypeId : google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map'), mapOptions);

        // add the points
        var point = new google.maps.LatLng(43.65654, -79.90138);
        var marker = createMarker(point, "This place", "Some stuff to display in the<br>First Info Window");
        marker.setMap(map);

        var point = new google.maps.LatLng(43.91892, -78.89231);
        var marker = createMarker(point, "That place", "Some stuff to display in the<br>Second Info Window");
        marker.setMap(map);

        var point = new google.maps.LatLng(43.82589, -78.89231);
        var marker = createMarker(point, "The other place", "Some stuff to display in the<br>Third Info Window");
        marker.setMap(map);

        // put the assembled side_bar_html contents into the side_bar div
        document.getElementById("side_bar").innerHTML = side_bar_html;
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </body>
</html> 
```

![在此处输入图像描述](../Images/e153b2f7dea06649d07772dc2537a990.png)

# ios - iOS 5 SDK 中的容器视图是什么？

> ID：13355022
> 
> 赞同：30
> 
> 时间：2012-11-13T03:02:56.290
> 
> 标签：ios, xcode, ios5

我很困惑为什么以及何时需要使用容器视图？我们如何通过代码实例化一个容器视图？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-13T04:42:08.533

容器视图是一种视图，您可以将其拖入您的情节提要中已有的视图控制器中（我们称之为 viewControllerA）。你会自动获得一个通过嵌入转场连接到该视图的视图控制器。这个新的视图控制器有它的框架集，所以它与容器视图的大小相同——如果你调整容器视图的大小，控制器也会自动调整大小。因此，如果您愿意，可以将多个容器视图拖入 viewControllerA 中，每个视图控制器都有自己的视图控制器。在代码中，如果您需要访问这些嵌入式视图控制器，可以从 viewControllerA.childViewControllers 访问它们——这将为您提供您拥有的任何嵌入式视图控制器的数组。

在 WWDC 2012 Session Videos 视频中讨论了这些容器视图，名为“在您的应用程序中采用 Storyboards”。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-13T03:17:07.923

> 我很困惑为什么以及何时需要使用容器视图？

当人们谈论容器视图时，他们通常指的是包含其他视图的普通旧 UIView。以这种方式使用视图可以让您将其包含的所有视图作为一个组移动，以便保持它们相对于彼此的位置。它还可以轻松地将所有包含的视图作为一个组隐藏。

> 我们如何通过代码实例化一个容器视图？

与您通常从代码中实例化 UIView 的方式相同：

```
CGRect frame = CGRectMake(someX, someY, someWidth, someHeight);
UIView *container = [[UIView alloc] initWithFrame:frame]; 
```

之后，您可能希望将一些子视图添加到容器中，并最终将容器添加为视图控制器视图的子视图。

另外，请注意我们在这里讨论的是*视图*而不是*视图控制器*。人们还谈论容器视图控制器，他们的意思是可以管理其他视图控制器的视图控制器。UITabBarController、UINavigationController 和 UISplitViewController 是 iOS 提供的容器视图控制器的示例。如果需要，您可以创建自己的，但这是另一个问题的主题。

**更新：**从您的评论中，您显然想知道故事板编辑器中的“容器视图”项目。如果将一个拖到视图中，您会看到：

1.  视图本身是用作占位符的 UIView。

2.  与视图一起，编辑器创建一个区域，您可以在其中编辑要由子视图控制器管理的内容。见下图。

![IB 中的容器视图](../Images/8b8dd94136b23652768267cffe474cc1.png)

这不仅仅是一个对象——它是几个。你会得到一个视图、一个子视图控制器和一个“嵌入”segue。您当然可以自己在代码中创建它们，并根据需要适当地连接它们。

# c# - DataContext：相同的表结构，但不同部门的表名不同

> ID：13355029
> 
> 赞同：0
> 
> 时间：2012-11-13T03:04:06.083
> 
> 标签：c#, sql, datacontext

这篇文章与本文相似，但又有所不同。我的问题是：在一个数据库中，我有两组不同的表，它们的结构相同，但名称不同。例如：

**表组1：** MasterA -childA1 -childA2 -childA3

**表集 2：** MasterB -childB1 -childB2 -childB3

A和B分别由我公司的不同部门使用。我正在尝试使用**C# DataContext**，因为它很容易使用（尽管不如旧时代的 Delphi 好）。但是 DataContext 需要在编码之前硬连接到每个表。在过去我们可以写作的地方

```
string SQLStr = "....from Master" + departmentID + " where ...." 
```

我正在尝试尽可能多地重用我的代码。

谢谢

# jquery - JQuery 验证 div 内容

> ID：13355032
> 
> 赞同：1
> 
> 时间：2012-11-13T03:04:25.880
> 
> 标签：jquery, html, jquery-validate

我正在尝试单击保存按钮，然后在我的 div 部分调用 validate 函数，其中所有需要验证的字段都具有所需的标签。

```
 <script type="text/javascript">
        $(document).ready(function () {
            $("#button").click(function() {
                $('#MyDIv').valid();
            });
        });

    </script>

<div id="MyDIv">
  <input type="text" class="required" id="id1" />
  <input type="text" id="id2" />
  <input type="button" id="button" />
</div> 
```

使用此代码，我得到一个验证器未定义错误。我不能使用表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:07:55.590

**演示：http:** [//jsfiddle.net/3BKcp/2/](http://jsfiddle.net/3BKcp/2/)

`<form>`在您的表单字段周围包裹一个标签，如下所示：

```
<div id="MyDIv">
     <form method="post" action="/next-page.html">
        <input type="text" class="required" name="id1" id="id1" />
        <input type="text" class="required" name="id2" id="id2" />
        <input type="button" id="button" />
     </form>
</div> 
```

并将您的 JavaScript 更改为以下内容：

```
<script>
$(document).ready(function(){
    $('#MyDIv form').validate();
    $("#button").click(function(){
        $(this).closest('form').submit();
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:08:02.800

你没有打电话`validate()`，你没有使用表格，所以它不会工作

`validate()`在使用此方法检查表单之前需要在表单上调用

你可以像下面这样只用 jquery

```
 var required =$(".required").val()
 if((/^[a-zA-Z ]+$/.test(name)) && reqiired.length >6 ){} 
```

如果需要是文本，你只想要字母而不是数字

如果它是

1.  用户名比尝试`/^[a-z0-9_-]{3,16}$/`
2.  密码比`/^[a-z0-9_-]{6,18}$/`
3.  电子邮件比`/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/`
4.  网址比 `/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/`

# android - 眨眼检测 OpenCV Android

> ID：13355033
> 
> 赞同：2
> 
> 时间：2012-11-13T03:04:37.627
> 
> 标签：android, opencv

我在 C++ 中找到了一些关于如何**使用 OpenCV 检测眨眼的**示例。

不幸的是，很难为Android找到相同的东西。

我发现了这个：

```
case Sample2NativeCamera.VIEW_MODE_HOUGH_CIRCLES:
        capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA);

         Imgproc.cvtColor(mRgba, mGray, Imgproc.COLOR_RGBA2GRAY, 4);

        // doing a gaussian blur prevents getting a lot of small false circles
        Imgproc.GaussianBlur(mGray, mGray, new Size(5, 5), 2, 2);

        // the lower this figure the more spurious circles you get
        // 50 looks good in CANNY, but 100 is better when converting that into Hough circles
        iCannyUpperThreshold = 100;
        Imgproc.HoughCircles(mGray, mIntermediateMat, Imgproc.CV_HOUGH_GRADIENT, 2.0, mGray.rows() / 8, 
        iCannyUpperThreshold, iAccumulator, iMinRadius, iMaxRadius);

         if (mIntermediateMat.cols() > 0)
            for (int x = 0; x < Math.min(mIntermediateMat.cols(), 10); x++) 
                {
                double vCircle[] = mIntermediateMat.get(0,x);

                if (vCircle == null)
                    break;

                pt = new Point(Math.round(vCircle[0]), Math.round(vCircle[1]));
                radius = (int)Math.round(vCircle[2]);
                // draw the found circle
                Core.circle(mRgba, pt, radius, colorRed, iLineThickness);

                // draw a cross on the centre of the circle
                DrawCross (mRgba, pt);
                }

            if (bDisplayTitle)
                ShowTitle ("Hough Circles", 1);

        break; 
```

但我不知道如何在我的 OpenCV 示例代码中使用它。我有所有 OpenCV 示例代码。我正在玩 OpenCV - 人脸检测。

我只是将级联从正面更改为眼睛。**所以，它起作用了……它检测到眼睛。**

但是，我需要检测的不仅仅是眼睛的位置。**我需要检测用户何时眨眼。**我看到了上面的代码，但我不知道如何在我的 OpenCV 人脸检测代码中使用它，因为它使用级联来检测眼睛。上面的方法没有使用级联。那么，我该如何使用它呢？

关于如何使用 OpenCV 检查眨眼的任何想法？

我花了将近一周的时间在谷歌和这里寻找这些信息，但我找不到适用于 Android 的信息。=(

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:11:33.810

如果您可以检测到眼睛，那么您可以寻找消失然后很快重新出现的眼睛。这看起来像是眨眼。如果您可以检测到嘴，那么您可以确保它也保持在大致相同的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-26T17:09:03.953

我不确切知道您的实现如何，但这段代码将有助于识别圆圈，在这种情况下是针对学生。您可以使用 Viola Jones 获得眼睛 roi（感兴趣区域），应用 Canny 检测器，然后使用 Hough 变换寻找圆圈（睁眼）或线条（闭眼）。

一些有用的链接：

中提琴琼斯：[http ://docs.opencv.org/modules/objdetect/doc/cascade_classification.html](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html)

霍夫变换：[http ://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)

Canny 检测器： http: [//docs.opencv.org/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html)

另一种方法是使用匹配模板，例如[http://www.technolabsz.com/2013/05/eye-blink-detection-using-opencv-in.html](http://www.technolabsz.com/2013/05/eye-blink-detection-using-opencv-in.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-23T00:53:40.803

谷歌已经发布了Android 的**FaceDetectorApi()**，它给了我们双眼睁开眼睛的概率，使用它我们可以检测眨眼，这是我所做的项目实现，它可以实时运行[https://github。 com/murali129/眨眼检测器](https://github.com/murali129/Eye-blink-detector)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T10:59:44.977

如果您在 c++ 中有眨眼检测功能，您可以使用原生函数 (JNI) 从 android 调用该函数，而不是返回布尔值 True 或 false，具体取决于对您的 java 代码的检测。

# c# - 如何在 Windows RT 中发送击键

> ID：13355037
> 
> 赞同：2
> 
> 时间：2012-11-13T03:05:00.013
> 
> 标签：c#, windows-8, windows-runtime

我想向系统发送击键（地铁风格的应用程序）。像右箭头或左箭头这样的键。

在 Windows 窗体中很容易做到`SendKeys()`：

```
System.Windows.Forms.SendKeys.Send("S"); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:45:33.210

不，这是不可能的。反正不合法。

# ios - 更改视图时 UIScrollView 停止工作

> ID：13355039
> 
> 赞同：2
> 
> 时间：2012-11-13T03:05:12.650
> 
> 标签：ios, uiscrollview

我是 Xcode 的新手，现在我对`UIScrollView`. 我成功地创建了一个 ScrollView，它在内容和一切方面都工作得很好。但后来我想创建一个新的 ViewController，有它自己的滚动视图和它自己的内容！但这行不通！

这是我的问题：

[http://www.youtube.com/watch?v=LktaCZhBu4E&feature=youtu.be](http://www.youtube.com/watch?v=LktaCZhBu4E&feature=youtu.be)

我已经上传了视频以显示问题的样子！

这是我的 viewController.m ：

```
//
//  ViewController.m
//  EHN Biler
//
//  Created by Daniel Høi-Nielsen on 13/11/12.
//  Copyright (c) 2012 EHN Graphis. All rights reserved.
//

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(void)viewWillAppear:(BOOL)animated{

[scroller setFrame:CGRectMake(0, 0, 320, 800)];
}

-(void)viewDidAppear:(BOOL)animated
{
[scroller setScrollEnabled:YES];
[scroller setContentSize:CGSizeMake(320, 800)];

}

- (void)viewDidLoad
{
[super viewDidLoad];

[scroller setScrollEnabled:YES];
[scroller setContentSize:CGSizeMake(320, 8000)];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

这是 viewController.h：

```
//
//  ViewController.h
//  EHN Biler
//
//  Created by Daniel Høi-Nielsen on 13/11/12.
//  Copyright (c) 2012 EHN Graphis. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
IBOutlet UIScrollView *scroller;
}

@property(nonatomic) BOOL canCancelContentTouches;

@end 
```

我想我需要一些代码来完成这项工作，所以我真的希望有人能帮助我！我一直在寻找答案！请记住我是新手，所以请多多教育。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:25:13.760

如果您从 nib 创建了 scrollView，则必须从那里取消选中 **Use Autolayout**：

*   去你的笔尖。
*   选择您的视图。
*   转到笔尖的实用程序窗口。
*   选择实用程序窗口左侧的第一个选项卡表单。
*   取消选中自动布局。

# css - 仅 Internet Explorer 的 DIV 对齐问题

> ID：13355044
> 
> 赞同：0
> 
> 时间：2012-11-13T03:06:23.050
> 
> 标签：css, internet-explorer, html

我已经上下搜索过这个问题，这似乎很常见，但我还没有找到解决我的具体问题的方法。

我的网页在 Firefox 和 Chrome 以及 Windows 8 上的 IE10 中显示得非常好。但是，任何其他 IE 版本都会让我的 DIV 完全混乱。

网址：[http ://d2canton.pitmanstats.com](http://d2canton.pitmanstats.com)

正确布局：Google 广告位于导航栏下方，与白色内容部分的左侧对齐，广告右侧的表格（团队列表）。

在检查元素并在 IE、Chrome 和 Firefox 之间进行比较之后，这似乎是问题所在，但据我所知，源看起来非常好：在我看来，在 Internet Explorer 中，“clearfix”和“main-fullwidth” DIV 都从同一点开始（例如，每个 DIV 的顶部与另一个相同），与“header” div 的底部齐平。

但是，“main-fullwidth”DIV 应该在“clearfix”DIV 之后/下方开始。

我似乎无法理解为什么会这样。

以下是 index.php 中的相关代码：

```
<body class="home blog custom-background">
<div id="container">
    <?php include('includes/header.php'); ?>
    <?php include('includes/outer_nav.php'); ?>
    <div id="main-fullwidth">
<section style="display:block; overflow: hidden; border: 0px; padding:0px; ">
    <aside style="display:block; float: left; width: 180px; ">
        <?php include('includes/left_sidebar.php'); ?>
    </aside>
    <div style="margin-left:180px;">
        <?php include('includes/inner_header.php'); ?>
<!-- CONTENT STARTS HERE -->
<!-- CONTENT ENDS HERE -->
    </div>
</section>
    </div><!-- #main-fullwidth --> 
```

这是outer_nav.php（包含“clearfix”）：

```
<div class="clearfix">
    <div class="menu-primary-container">
        <ul id="menu-custom-primary-menu" class="menus menu-primary">
            <li id="menu-item-241" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-241"><a href="http://www.pitmanstats.com" >Home</a></li>
            <li id="menu-item-236" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-236"><a href="http://www.pitmanstats.com/pages/" >My Pages</a>
            <ul class="sub-menu">
                <li id="menu-item-242" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-242"><a>DII Canton District</a></li>
                <li id="menu-item-243" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-243"><a>DIII Wooster District</a></li>
                <li id="menu-item-245" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-245"><a>Triway Basketball</a></li>
                <li id="menu-item-244" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-244"><a>Quarter&#8217;s Corner</a></li>
            </ul>
            </li>
            <li id="menu-item-441" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-441"><a href="http://www.pitmanstats.com/mobile/" >Mobile Apps</a></li>
            <li id="menu-item-240" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-240"><a>About</a>
            <ul class="sub-menu">
                <li id="menu-item-237" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-237"><a href="http://www.pitmanstats.com/about/about-me/" >About Me</a></li>
                <li id="menu-item-238" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-238"><a href="http://www.pitmanstats.com/about/history-of-pitmanstats-com/" >History of PITmanStats.com</a></li>
                <li id="menu-item-239" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-239"><a href="http://www.pitmanstats.com/about/contact/" >Contact</a></li>
            </ul>
            </li>
        </ul>
    </div><!--.primary menu-->
    <div id="topsearch">
        <div id="search" title="Type and hit enter">
            <form method="get" id="searchform" action="http://www.pitmanstats.com/"> 
                <input type="text" value="Search" name="s" id="s"  onblur="if (this.value == '')  {this.value = 'Search';}" onfocus="if (this.value == 'Search') {this.value = '';}" />
            </form>
        </div><!-- #search -->
    </div><!-- topsearch -->
</div><!-- clearfix --> 
```

那么所有的“left_sidebar.php”都是谷歌广告。

同样，在我看来，在 Internet Explorer 中的“clearfix”之后，“main-fullwidth”没有正确启动，而是从同一位置开始。这导致广告尝试向左对齐，但它立即向左对齐导航菜单的右侧。

如果您有任何问题或需要更多详细信息，请告诉我。这在过去有效，但最近停止工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:43:55.053

似乎您正在使用的一些 html5 标签导致了问题。`aside`标签似乎是破坏您在 IE9 中的布局的元素之一。我用一个很好的旧潜水代替了它，它把它放回了`<section>`. 您只需要制作一些`IF IE`有条件的 css 以使其看起来一致。祝你好运。

使用 F12 在 IE 上调试它。

这是一张照片。

![在此处输入图像描述](../Images/fa431d959dd0284c9db93bd9f790fe06.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:44:16.430

经过进一步研究（与 CSS 大师同事交谈），听起来像是 SECTION 之类的“CSS3”标签，甚至IE9 及以下版本不支持诸如“ **:after ”之类的样式，这可以解释为什么 IE10 可以正常工作。**固有地应用于我的“main-fullwidth” DIV 的样式之一是“clear:both;”。但由于该属性是 ":after" 样式，它并没有在 IE 中应用。

**所以，我添加了“clear:both;” 作为“main-fullwidth” DIV 的内联样式**，现在它在“clearfix”之后/下方开始，而不是覆盖它。

这解决了手头的问题。Chrome/Firefox 可以读取诸如“:after”样式之类的“CSS3”内容，但在 IE 中，我必须使用内联样式直接应用“:after”才能使其工作。

我在应用适用于 Chrome 但不适用于 IE 的样式（例如悬停链接显示太多填充）时仍然遇到其他问题，但它与这个特定问题无关。

# android - 哪种是创建井字游戏喜欢的游戏板的正确方法？

> ID：13355047
> 
> 赞同：1
> 
> 时间：2012-11-13T03:06:46.090
> 
> 标签：android

我想做一个类似于tic tac toe的棋盘游戏（但在我的游戏中是5 * 5）。一开始我只是想实现一个玩家对玩家的版本，稍后我会添加AI。我浏览了一些井字游戏示例，并看到一些开发人员使用按钮（用于方块）和用于棋盘的表格布局。但是对于 5*5 或更高的维度，这仍然是一个好方法吗？或者在这种情况下使用表格布局和按钮通常是一个好习惯吗？如果不是，我应该使用什么？请提供一些教程/示例/链接。我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:13:10.820

您必须使用带有按钮的 TableLayout。它会让您的生活更轻松，并且在性能方面不会那么昂贵。你也可以为看板创建一个自定义视图，但这并不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:21:00.303

在你开始寻找更高级的东西之前，你应该先从你知道会起作用并优化的东西开始，如果它成为一个问题。在您的用例中，您是否预计井字游戏会消耗足够的资源来开始减慢系统速度？我想不会。您可以使用 RelativeLayout 来执行此操作，并使用 View 属性自己定义定位，但同样，我没有看到它给您带来任何好处。
如果您担心性能，那么您应该遵循其他最佳实践，例如将所有 Button 对象作为您的 Activity 的类成员，这样您每个视图只调用一次 findViewById() ，然后您的 onClickListener 可以更新它想要的任何视图而无需查一下。如果您正在构建您的第一个应用程序，那么与尝试实现一些奇特的布局相比，这样的事情会让您走得更远。
一般来说，如果您提前知道需要多少行/列，TableLayout 就可以了。哪个适合您的用例。如果您尝试动态更改其尺寸，它可能会受到影响；我真的希望你不要在井字游戏中这样做（有些人可能称之为作弊）

# asp.net-mvc - 无法让 DynamicNodeProvider 工作

> ID：13355048
> 
> 赞同：1
> 
> 时间：2012-11-13T03:07:06.200
> 
> 标签：asp.net-mvc, mvcsitemapprovider

[我按照此处](https://github.com/maartenba/MvcSiteMapProvider/wiki/Dynamic-sitemaps)描述的说明进行操作，但没有生成菜单。

我在我的文件中添加了以下内容`_Layout.cshtml`：

```
@Html.MvcSiteMap().Menu(); 
```

发生的情况是文件中的静态链接`Mvc.sitemap`显示在菜单中。但是`DynamicSiteMap`节点没有，此外我在`DynamicNodeProviderBase.GetDynamicNodeCollection`方法中放置了一个断点，它并没有停在那里。

我对 MVC 很陌生，所以它可能是一个明显的解决方案，我会遗漏什么？

[在此处](http://goo.gl/s5t07)查看有关此问题的更多信息。

**更新**：

我还尝试生成一个面包屑（调用`@Html.MvcSiteMap().SiteMapPath()`）并且没有生成任何内容，并且根本没有调用上面提到的那个方法。

我的想法是制作一个纯粹由应用程序生成和控制的菜单/站点地图，没有静态菜单项或节点。

**更新**

我也尝试使用[此处](https://github.com/maartenba/MvcSiteMapProvider/wiki/Defining-sitemap-nodes-in-code)描述的属性，但它不起作用：

```
[MvcSiteMapNodeAttribute(Title = "Checkout complete", ParentKey = "Checkout")] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:48:18.943

这应该工作得很好。确保您的 web.config 看起来像这样：

```
 <siteMap defaultProvider="MvcSiteMapProvider" enabled="true">
          <providers>
            <clear />
            <add name="MvcSiteMapProvider" 
                 type="MvcSiteMapProvider.DefaultSiteMapProvider, MvcSiteMapProvider" 
                 siteMapFile="~/Mvc.Sitemap" securityTrimmingEnabled="true" cacheDuration="5" 
                 enableLocalization="true" scanAssembliesForSiteMapNodes="true" includeAssembliesForScan="" 
                 excludeAssembliesForScan="" attributesToIgnore="visibility" 
                 nodeKeyGenerator="MvcSiteMapProvider.DefaultNodeKeyGenerator, MvcSiteMapProvider" controllerTypeResolver="MvcSiteMapProvider.DefaultControllerTypeResolver, MvcSiteMapProvider" actionMethodParameterResolver="MvcSiteMapProvider.DefaultActionMethodParameterResolver, MvcSiteMapProvider" aclModule="MvcSiteMapProvider.DefaultAclModule, MvcSiteMapProvider" siteMapNodeUrlResolver="MvcSiteMapProvider.DefaultSiteMapNodeUrlResolver, MvcSiteMapProvider" siteMapNodeVisibilityProvider="MvcSiteMapProvider.DefaultSiteMapNodeVisibilityProvider, MvcSiteMapProvider" siteMapProviderEventHandler="MvcSiteMapProvider.DefaultSiteMapProviderEventHandler, MvcSiteMapProvider" />
          </providers>
        </siteMap> 
```

重要的是 siteMapFile 设置正确。此外，请确保在您的 .sitemap 文件（在我的情况下为 Mvc.Sitemap）中设置正确：

```
<?xml version="1.0" encoding="utf-8" ?>
<mvcSiteMap xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0"
            xsi:schemaLocation="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0 MvcSiteMapSchema.xsd"
            enableLocalization="true">

  <mvcSiteMapNode title="Home" controller="Home" action="Index">
    <mvcSiteMapNode title="About" controller="Home" action="About"/>
      <mvcSiteMapNode
      title="Details"
      action="Present"
      dynamicNodeProvider="MvcApplication3.ItemDetailsDynamicNodeProvider, MvcApplication3" />
  </mvcSiteMapNode>

</mvcSiteMap> 
```

这里重要的一点是 dynamicNodeProvider 类型和程序集拼写正确并且定位正确。

这是完整性的 ItemDetailsDynamicNodeProvider

```
public class ItemDetailsDynamicNodeProvider : DynamicNodeProviderBase
    {
        public override IEnumerable<DynamicNode> GetDynamicNodeCollection()
        {
            var repository = new Repository();

            foreach (var item in repository.GetItems())
            {
                var node = new DynamicNode(item.Slug, item.DisplayName);
                node.RouteValues.Add("id", item.Slug);

                System.Diagnostics.Debug.WriteLine(item.Slug);

                yield return node;
            }
        }
    }

    public class Repository
    {
        public IEnumerable<Something> GetItems()
        {
            yield return new Something { Slug = "Slug1", DisplayName = "DisplayName1"};
            yield return new Something { Slug = "Slug2", DisplayName = "DisplayName2" };
        }
    }

    public class Something
    {
        public string Slug { get; set; }
        public string DisplayName { get; set; }
    } 
```

# c++ - 输出速度

> ID：13355051
> 
> 赞同：4
> 
> 时间：2012-11-13T03:07:53.543
> 
> 标签：c++, output

我正在用 C++ 编码。让我们成为一些字符串。我被要求确定以下哪个更快：

```
cout << "s:"  + s  + "s:"  + s  + " s:"  + s  + "\n";

cout << "s:" << s << "s:" << s << " s:" << s << "\n"; 
```

我反复运行它们，发现第二个更快。我花了一段时间试图找出原因。我认为这是因为在第一个中，字符串首先连接然后输出到屏幕。但第二个只是直接输出到屏幕上。那是对的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T03:11:52.073

第一个可能涉及为字符串连接分配一些内存，然后将最终连接的字符串复制到输出缓冲区。第二个将简单地将已分配的字符串数据复制到已分配的输出缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:11:35.460

从理论的角度来看，第二个示例是线性时间，而第一个示例*可以*是二次时间（以子串的数量表示），具体取决于实现。

要确定您的实现是否属于这种情况，您必须查看源代码和（因为编译器可能会优化）机器代码。

简而言之，*原因*取决于实现，并且通常要确定“哪个最快”，您别无选择，只能**MEASURE**。“原因”可以作为启发式指南。但仅此而已：最终，衡量标准和现实才是最重要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:14:28.023

由于第一个创建字符串对象，您认为第二个更快的假设可能是正确的。这里的关键是“可能”。这些是标准库函数，因此可以具有不同的实现细节，因为标准定义了行为而不是如何实现。理论上，您可以找到与您的发现相反的标准库实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T03:20:02.517

我想你想看看上一个问题的答案以获得完整的文章：[Efficient string concatenation in C++](https://stackoverflow.com/questions/611263/efficient-string-concatenation-in-c)

# javascript - 使用 JavaScript 和 Jquery 处理事件

> ID：13355057
> 
> 赞同：0
> 
> 时间：2012-11-13T03:08:09.567
> 
> 标签：javascript, jquery, html, javascript-events

我正在尝试使用 javascript 和 jquery 以及可能与 php 创建一个井字游戏浏览器游戏。

我让董事会安排了我喜欢如何使用表格并适当地添加边框。tic tac toe board 中的每个单元格都有自己唯一的 id，例如 topleft、topright、botleft 等。

出于测试目的，在我开始编写支持游戏的代码之前，我试图在用户单击适当的位置时出现“X”，但是我没有运气。

这是我到目前为止的javascript：

```
 <script type="text/javascript">

                function mark()
                {
                        document.getElementById('topleft').innerHTML = "X";
                }

                function init()
                {
                        var button = document.getElementById('topleft');
                        button.addEventListener('click', mark, false);
                }

                $(document).ready(function()
                {
                        $('#topleft').click(function()
                        {
                        });

                });
        </script> 
```

这是html：

```
<body>
        <div>
                <table>
                        <tr>
                                <td id="upleft">
                                </td>
                                <td id="upcenter">
                                </td>
                                <td id="upright">
                                </td>
                        </tr>
                        <tr> 
```

按照我的逻辑，页面加载，然后左上角得到一个点击监听器。单击该单元格后，侦听器被触发，然后调用函数标记以在单元格中放置一个 X，但是页面上没有任何可点击的内容，之后也没有任何标记出现。

如果有人能发现错误或有建议，我将不胜感激！

此外，如果您对 tic tac toe board 背后的逻辑编程有任何想法（没什么花哨的），我也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:11:24.693

试试这种方式：

```
$('#topleft').click(function() {
    $(this).text('X');
}); 
```

下一步，不要`#topleft`直接使用，而是通用case className( `$('.tictactoe-case')`)，不要重复自己。

祝你好运！

# c - 调用函数扫描某些内容后，我的程序无法继续？有人可以找出问题所在吗？（长，但请帮忙！）

> ID：13355058
> 
> 赞同：0
> 
> 时间：2012-11-13T03:08:12.453
> 
> 标签：c

所以第一部分是我从用户那里得到一个输入，在这个例子中是'1'作为从另一个函数接收的字符值。

```
printf ("\nPlease enter 1, 2, 3 or q: ");

    option = validateoption(); 
```

在 validateoption 函数中：

```
int validateoption () {  // VALIDATE OPTION FOR FIRST MENU INPUT

int keeptrying = 1, rc;
char after, i;

do
{
    rc = scanf ("%c%c", &i, &after);
    if (i == 'q')
    {
        break;
    }
        else if (rc == 0)
        {
            printf (" **Invalid input try again: ");
            clear();
        }
            else if (after != '\n')
            {
                printf (" **Trailing characters try again: ");
                clear();
            }
                else if (i < '1' || i > '3')
                {
                    printf (" **Invalid input try again: ");
                }
                    else
                    {
                        keeptrying = 0;
                    }

} while (keeptrying == 1);

return i;

} 
```

所以输入字符值'1'然后调用事务函数

```
 do
    {
        transaction(accounts, debcred, amount);
    } while (option == '1'); 
```

这就是问题发生的地方。在事务函数中，它有一个 for 循环

```
for (i = 0; i < MAX; i++)
{
    printf ("Enter an account number (between 1000 and 3999): ");
    accounts[i] = validateaccount();

    debcred[i] = validatedebcred();

    amount[i] = validateamount();

    totalinput++;
} 
```

它调用 validateaccount 函数来获取有效输入。但是在这个函数中：

```
int validateaccount() {  // VALIDATE INPUT FOR ACCOUNT # IN TRANSACTION FUNCTION

int keeptrying = 1, rc;
long i;
char after;

do
{
    rc = scanf ("%ld%c", &i, &after);

    if (rc == 0)
    {
        printf (" **Invalid input try again: ");
        clear();
    }
        else if (after != '\n')
        {
            printf (" **Trailing characters try again: ");
            clear();
        }
            else if (i < 1000 || i > 3999)
            {
                printf (" **Invalid input try again: ");
            }
                else
                {
                    keeptrying = 0;
                }

} while (keeptrying == 1);

return i;

} 
```

我输入一个输入，然后程序停止运行！我会像 1000 一样输入，然后它就什么也不做。它并没有结束它只是什么都不做，然后输入更多的数字，它变成一个无效的输入！我不知道发生了什么有人可以看到问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:32:40.587

我是个白痴。在最终输入后​​它没有显示任何内容，因为没有 printf 语句再次向用户显示要输入的内容！

# mysql - 加速 Rails 中的查询

> ID：13355059
> 
> 赞同：3
> 
> 时间：2012-11-13T03:08:52.093
> 
> 标签：mysql, ruby-on-rails, ruby

我正在慢慢地从初级轨道过渡到中级水平。在我的任务中，我遇到了加载某些查询所需的时间问题。

**我想知道是否有人可以指出一些可能会提高我的索引操作查询性能的事情。**

运行 Rails 3.2.0、ruby 1.9.3p194 和 MySQL

现在我列出了所有机构（大约 7000 个），加载需要 10 秒...

**我的索引操作**

```
 def index
    @institution = Institution.includes(:state).all
  end 
```

**看法**

```
<tbody>
    <% @institution.each do |c| %>
    <tr>
        <td><%= c.company %></td>
        <td><%= c.state.name %></td>
        <td><%= number_to_human(c.assets) %></td>
        <td><%= c.hadademo %></td>
        <td><%= c.datebecameclient %></td>
        <td><%= c.clientorprospect %></td>
        <% if current_user.admin? %>
            <td><%= link_to 'Edit', edit_institution_path(c), :class => 'btn btn-mini btn-warning'  %></td>
        <% end %>
    </tr>
    <% end %>
</tbody> 
```

**制度模式**

```
class Institution < ActiveRecord::Base
  attr_accessible :company, :phone, :clientdate, :street, :city, :state_id, :zip, :source, :source2, :demodate1, :demodate2, :demodate3, :client, :prospect, :notcontacted, :solveid
  belongs_to :state
  has_many :users, :through => :company_reps
  has_many :company_reps

  def points
    points_for_client + points_for_demodate1
  end

  def hadademo
    if demodate3.present?
        demodate3.to_date
    elsif demodate2.present?    
        demodate2.to_date
    elsif demodate1.present?    
        demodate1.to_date
    else
        "No Demo"
    end 
  end

  def datebecameclient
    if clientdate.present?
        clientdate.to_date
    else
        "Not a Client"
    end 
  end

  def clientorprospect
      if client?
            "Client"
        elsif prospect? 
            "Prospect"
        else
            "No Contact"
        end 
  end

  def points_for_demodate1
    if demodate1.present? && demodate1 >= Date.new(2012, 2, 23) or demodate2.present? && demodate2 >= Date.new(2012, 2, 23) or demodate3.present? && demodate3 >= Date.new(2012, 2, 23)
      1
    else
      0
    end
  end

  def clientcount
    if client?
      1
    else
      0
    end
  end

  def points_for_client
    if client?
      10 / users.count
    else
      0
    end
  end

end 
```

**使用 Jquery[数据表](http://datatables.net/)**

```
jQuery ->
    $("#institutions").dataTable
      sDom: "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>"
      sPaginationType: "bootstrap" 
```

**日志文件**

```
Started GET "/institutions" for xxx.xxx.xxx.xxx at 2012-11-13 02:51:47 +0000
Processing by InstitutionsController#index as HTML
  Rendered layouts/_messages.html.erb (1.2ms)
  Rendered institutions/index.html.erb within layouts/application (37190.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_navbar.html.erb (17.0ms)
Completed 200 OK in 43334ms (Views: 37983.7ms | ActiveRecord: 340.7ms)
  Rendered institutions/index.html.erb within layouts/application (34329.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_navbar.html.erb (23.3ms)
Completed 200 OK in 38824ms (Views: 34374.8ms | ActiveRecord: 82.2ms) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:13:10.793

一般有几件事情要做：

1.  **缓存**。研究片段缓存，因为完全跳过数据库将提供巨大的加速。
2.  **数据库索引**。由于您正在加载关联模型，因此确保对相关外键进行索引可能有助于提高性能。
3.  **懒加载**。您可能只想呈现前 100 条记录，并在用户浏览它们时通过 AJAX 加载更多记录。

除了发布生成的查询可能会帮助我们提供更多提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T03:56:12.640

如果您查看日志，您会发现所有时间都花在了渲染视图上，而不是实际的查询上。您肯定会希望实现视图或动作缓存以加快速度。

[官方文档](http://guides.rubyonrails.org/caching_with_rails.html)将为您指明正确的方向。

# python - 为什么有些 Python 变量保持全局，而有些需要定义为全局

> ID：13355063
> 
> 赞同：5
> 
> 时间：2012-11-13T03:09:17.723
> 
> 标签：python, global-variables

我很难理解为什么有些变量是局部的，有些是全局的。例如，当我尝试这个时：

```
from random import randint

score = 0

choice_index_map = {"a": 0, "b": 1, "c": 2, "d": 3}

questions = [
    "What is the answer for this sample question?",
    "Answers where 1 is a, 2 is b, etc.",
    "Another sample question; answer is d."
]

choices = [
    ["a) choice 1", "b) choice 2", "c) choice 3", "d) choice 4"],
    ["a) choice 1", "b) choice 2", "c) choice 3", "d) choice 4"],
    ["a) choice 1", "b) choice 2", "c) choice 3", "d) choice 4"]
]

answers = [
    "a",
    "b",
    "d"
]

assert len(questions) == len(choices), "You haven't properly set up your question-choices."
assert len(questions) == len(answers), "You haven't properly set up your question-answers."

def askQ():
    # global score
    # while score < 3:
        question = randint(0, len(questions) - 1)

        print questions[question]
        for i in xrange(0, 4):
            print choices[question][i]
        response = raw_input("> ")

        if response == answers[question]:
            score += 1
            print "That's correct, the answer is %s." % choices[question][choice_index_map[response]]
            # e.g. choices[1][2]
        else:
            score -= 1
            print "No, I'm sorry -- the answer is %s." % choices[question][choice_index_map[answers[question]]]
        print score

askQ() 
```

我收到此错误：

```
Macintosh-346:gameAttempt Prasanna$ python qex.py 
Answers where 1 is a, 2 is b, etc.
a) choice 1
b) choice 2
c) choice 3
d) choice 4
> b
Traceback (most recent call last):
  File "qex.py", line 47, in <module>
    askQ()
  File "qex.py", line 39, in askQ
    score += 1
UnboundLocalError: local variable 'score' referenced before assignment 
```

现在，这对我来说完全有道理，为什么它会让我在得分上犯错。我没有在全局范围内设置它（我故意评论了那部分以显示这一点）。而且我特别没有使用 while 子句来让它继续前进（否则它甚至不会进入子句）。令我困惑的是为什么它在问题、选择和答案方面没有给我同样的错误。*当我取消注释这两行时，脚本工作得非常好——即使没有我将问题、答案和选择定义为全局变量。*这是为什么？这是我无法从搜索其他问题中发现的一件事——在这里，Python 似乎不一致。它与我使用列表作为其他变量有关吗？这是为什么？

（另外，第一次发帖；非常感谢我在不需要提问时发现的所有帮助。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T03:12:13.810

这是因为您分配给`score`. 和变量只是被读取，`questions`而`answers`不是被写入。

当您分配给变量时，该名称具有您所在的当前方法、类等的范围。当您尝试获取变量的值时，它首先尝试当前范围，然后尝试外部范围，直到它找到匹配项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T03:14:00.933

如果您认为 global 是解析器指令，这完全有道理

当你在做

```
score += 1 
```

被翻译成

```
score = score + 1 
```

当解析器到达'score ='时，它会导致解释器不在本地空间之外搜索。

[http://docs.python.org/2/reference/simple_stmts.html#global](http://docs.python.org/2/reference/simple_stmts.html#global)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T03:16:00.720

发生的情况是，Python 会在检查全局范围之前检查本地范围内的变量。因此，当涉及到`questions`and时`answers`，它们永远不会设置在本地范围内，因此 Python 会转移到全局范围，在那里可以找到它们。但是对于`score`，Python 会看到您进行了赋值 ( `score += 1`or `score -= 1`) 并锁定到本地范围。但是当你`score`在这些陈述中提到它时，它还不存在，所以 Python 会抛出一个异常。

# php - 带有变量的 PHP 重定向标头

> ID：13355065
> 
> 赞同：0
> 
> 时间：2012-11-13T03:09:28.093
> 
> 标签：php

我有一个更新 mysql 数据库的 php 脚本。完成后，我想重定向回详细信息页面。我知道这可以在标头重定向中完成，但我无法将变量添加到地址。我的代码如下。

```
<?php
include "../config.php";
$_GET["hiveid"] = $HiveID;
$_GET["hivename"] = $HiveName;
$_GET["hiveloca"] = $HiveLoca;
mysql_query("UPDATE hives SET HiveName='$HiveName', LocationID='$HiveLoca' WHERE    HiveID='$HiveID'") or die (mysql_error()); 
$URL = "../hivedetails.php?HiveID=" . $HiveID;
header("Location: " . $URL);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:13:16.543

1.  停止处理此代码并阅读有关[SQL 注入漏洞](http://bobby-tables.com)的信息。您的代码只是乞求您的服务器获取 pwn3d
2.  学习基本的 PHP 语法。您正在向后分配变量。`$HiveID = $_GET['hiveid']`是你想要的，对于其他两行也是如此
3.  一旦你修复了#2，你的实际问题就会消失。

# python - Python 网络数据收集

> ID：13355067
> 
> 赞同：0
> 
> 时间：2012-11-13T03:10:54.603
> 
> 标签：python, database, arrays, web-applications, web

我是 Python 新手，但我面临着一个我正在努力完成的挑战。这与类无关，但我正在尝试学习如何使用 python 使用网站。

我想做以下事情：

访问这个网站： http: [//finance.yahoo.com/q/op?s=FB &m=2012-12](http://finance.yahoo.com/q/op?s=FB&m=2012-12)

将对应于低于市场价格的那些行权的所有行权和要价存储到名为罢工和要价的数组中

看图说明： ![在此处输入图像描述](../Images/7fd9f5d6cfefbb24996ed3688e848f11.png)

与图片对应的示例数组将是：

罢工 = [10,11,12,13,14,15,16,17,18,19,20]

问 = [10.20,8.20,7.20,6.30,5.30,4.40,3.50,2.75,2.05,1.45]

它不会抓住 21 - 27 次罢工，因为这高于市场价格。请让我知道这是否可能与python有关。谢谢你。

由于这不是一项任务，因此任何其他可以更容易做到这一点的编程语言也值得赞赏，但我需要将数据存储在数组中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:30:08.990

**编辑：**我刚刚意识到您指的是 Yahoo! 上的选项页面！金融而不是基本的股票服务。我确信他们有一个 API，但就像股票一样，它可能没有发布。我对这个很感兴趣，所以我可能会继续寻找。

他们有一个以 CSV 格式返回股票数据的 Web 服务。这是股票查询的基本格式：

> [http://finance.yahoo.com/d/quotes.csv?s=GOOG&f=nl1](http://finance.yahoo.com/d/quotes.csv?s=GOOG&f=nl1)

这采用的两个 GET 参数是符号列表（用“s=”指定）和生成的 CSV 文件的格式（用“f=”指定）。所以在上面的例子中，我使用了谷歌的股票代码，格式是得到最后的价格。您可以使用多种代码和多种格式来获取您需要的股票数据。

有关格式变量的完整列表，请查看此[页面](http://www.gummy-stuff.org/Yahoo-data.htm "页")。

所以你真正需要做的就是形成正确的 URL 并使用 urllib2 库的 urllib2.open(url) 方法来获取 CSV 文件，然后它只是对 csv 库进行一些基本的 CSV 解析。

或者，那里有为您构建的所有这些库。我没有用过它们，但如果我记得它们，我会发表一些评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:26:36.717

一种可能的解决方案是抓取结果并将其存储在列表中（我假设）。您可以使用名为 lxml 的 python 库来抓取页面。[http://lxml.de/](http://lxml.de/)

让我指出一个类似的教程，[http://www.techchorus.net/web-scraping-lxml](http://www.techchorus.net/web-scraping-lxml)

在开始学习本教程之前，请先浏览一次 xpath。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T05:23:50.353

谢谢大家的回复。我能用漂亮的汤做到这一点

;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T03:29:32.403

是的，雅虎确实有一个 API：[http://finance.yahoo.com/d/quotes.csv](http://finance.yahoo.com/d/quotes.csv)，它可以传递一些参数；有关更多详细信息，请参阅[https://github.com/bunburya/bunbot/blob/master/utils/stock.py](https://github.com/bunburya/bunbot/blob/master/utils/stock.py)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T04:10:19.547

你需要和想要的是[熊猫](http://pandas.pydata.org/)

这是一个示例片段。

```
 1 from pandas.io.data import DataReader                                                                                        
  2 from datetime import datetime
  3  
  4 dr = DataReader("YHOO", "yahoo")
  5  
  6 print "Yahoo's stock price over time"
  7 print dr["Volume"]
  8  
  9 yh_by_date = DataReader("YHOO",  "yahoo", datetime(2009,1,1))
 10  
 11 print "We want to restrict it based on specific dates"
 12 print yh_by_date["Adj Close"][-100:] 
```

# c++ - 如何在 C++ 中声明具有定义 func(cv::Mat &img) 的函数

> ID：13355072
> 
> 赞同：2
> 
> 时间：2012-11-13T03:11:22.820
> 
> 标签：c++, function-declaration

你如何声明这样定义的函数：

```
void func(cv::Mat &img)
{
    ...
} 
```

**更多细节：**

我在“main”函数下方的 main.cpp 文件中定义了函数“func”。编译器抱怨它不知道函数“func”是什么，所以我尝试将原型放在“main”函数之上。

我试过了

```
void func(cv::Mat); 
```

但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:15:29.977

*宣布*？

只是

```
void func(cv::Mat &img); 
```

就是这样。甚至只是

```
void func(cv::Mat &); 
```

因为非定义声明中的参数名称没有任何作用（除了使代码更具可读性）。

然而，对于 C++（和 C）中的大多数实体，*定义*只是一种特定类型的*声明*（即术语“定义”可以被认为只是“定义声明”的简写）。通过*定义*这个函数，你也*声明*了它（对于定义后面的代码）。

# android - DDMS 中的 Android 黑屏截图：问题？还是安全原因？

> ID：13355080
> 
> 赞同：12
> 
> 时间：2012-11-13T03:12:36.037
> 
> 标签：android, ddms

我在 Android Jelly Bean 中截屏（使用 Galaxy Nexus）

使用 DDMS 我可以截屏。像这样。

在主屏幕中

![在此处输入图像描述](../Images/dfcb005328bff8b0a9a3940e4d038c09.png)

但这就是问题所在。

当我打开相机应用程序并从 DDMS 截取屏幕截图时。

结果是......黑色图像......

![在此处输入图像描述](../Images/5c5ddfc4e65a74071e105fb13101a17e.png)

即使在设备中也不能截图。

![在此处输入图像描述](../Images/af4d262bb431dce185a6bb215a07cd09.png)

为什么会这样？？

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-26T22:18:34.977

尝试转到 Android 虚拟设备管理器，编辑受影响的设备，然后取消选中靠近窗口底部的仿真选项下的“使用主机 GPU”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T11:51:42.523

可能是使用此设备上的视频覆盖将相机图像直接馈送到帧缓冲区，而不是通过通常的渲染路径。因此“主”帧缓冲区是空的。

如果您尝试截取视频播放器或其他使用覆盖的软件的屏幕截图，这与您在 PC 上经常看到的问题相同：您会在屏幕上出现一个灰色或蓝色的框，该框应该是覆盖的内容。机制有点不同，因为 Android 的组合框架在幕后做了很多这样的事情，但根本是一样的。

由于这与相机图像在此设备上的合成方式有关，因此您可以通过使用具有不同芯片组的设备来避免此问题。例如，三星的 i9300 可以截取相机应用程序的屏幕截图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T11:43:07.750

检查您的 adb 连接。并查看您的 AVD 设备是否在线。

# soundcloud - 自定义 Soundcloud Javascript 播放器 - 错误控制台

> ID：13355081
> 
> 赞同：0
> 
> 时间：2012-11-13T03:12:36.053
> 
> 标签：soundcloud

我的自定义 JS 播放器 昨天在这个网址[http://goo.gl/gJcuX上运行良好。](http://goo.gl/gJcuX)但是当我醒来时，它只是不工作。

我收到如下错误控制台消息：

```
http://api.soundcloud.com/tracks/66419962.json?client_id=REMOVED CLIENT ID&format=json&_status_code_map[302]=200Failed to load resource: the server responded with a status of 503 (Service Unavailable)
desirednoise.com:137TypeError: 'undefined' is not an object (evaluating 'track.user.username') 
```

所以我不确定我是否正确定义了对象？我应该删除一些东西吗？如果您访问我的网站并单击帖子。它没有将播放器更新为正确的样式表。它脱离了链接类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:37:42.227

看起来 SoundCloud API 可能会遇到一些停机时间：[http ://status.soundcloud.com/](http://status.soundcloud.com/)

# time - cudamemcpy 设备-> 迭代之间的主机时间变化

> ID：13355083
> 
> 赞同：3
> 
> 时间：2012-11-13T03:13:08.673
> 
> 标签：time, cuda, gpu

我在编写一些 CUDA 代码时遇到了这个非常奇怪的问题：从 gpu 到 cpu 内存的同一块 cudaMemcpy 在对子例程的不同迭代调用中需要不同的时间来完成，这是一个巨大的差异：~60 ms vs ~ 0.02 毫秒。

代码如下：

```
float calc_formation_obj( int formationNo, bool calcObj )
{

    int i;

    int prev = prevCP[aperIndex];
    int next = nextCP[aperIndex];
    float ll = formations_l[formationNo];
    float rl = formations_r[formationNo];

    float obj = 0.0;
    float *f_grid = new float[grid_size_voxe];

    // use ll and rl
    thrust::device_ptr<float> dll(d_leafpos_l);
    thrust::device_ptr<float> drl(d_leafpos_r);

    dll[rows_per_beam*aperIndex+ rowIndex] = ll;
    drl[rows_per_beam*aperIndex+ rowIndex] = rl;

    // set all leaf positions between prev/next
    set_leafpos<<<grid_size_ncps,BLOCK_SIZE>>> (aperIndex, rowIndex, prev, next, ncps, d_leafpos_l,
            d_leafpos_r, ll, rl, rows_per_beam, d_cp_angles);

    // copy dose to dose_temp
    thrust::device_ptr<float> ddose(d_dose);
    thrust::device_ptr<float> dtp(d_dose_temp);

    thrust::copy(ddose, ddose+nvoxel, dtp);

    // the angles actually being added
    if (prev==-1) {
        prev = 0;
    }
    if (next==ncps) {
        next = ncps-1;
    }

    // add dose from all these leaf positions
    // if last arg 1 then add
    add_remove_dose<<<grid_size_ncps,BLOCK_SIZE>>> (prev,next, rowIndex, d_dose_temp, d_leafpos_l,
            d_leafpos_r, d_voxe_b, d_dijs_b, d_voxnumperbixcum, d_flu_cp, rows_per_beam, bix_per_row, beamletSize, 1);

    if (!calcObj) {
        return(0.0);
    }

    // initialize
    cudaMemset((void*)d_f_voxel, 0, voxesize_f);
    cudaMemset((void*)d_f_grid, 0, sizeof(float)*grid_size_voxe);

    // then calculate objective
    calc_obj_dose<<<grid_size_voxe,BLOCK_SIZE>>>( d_dose_temp, d_f_voxel, d_thresh, d_is_target, nvoxel,
            d_f_grid, d_od_wt, d_ud_wt );

    // copy results from GPU
    time_t time_1,time_2;
    float elapse;
    time_1=clock();
    cudaMemcpy(f_grid, d_f_grid, sizeof(float)*grid_size_voxe, cudaMemcpyDeviceToHost);
    time_2 = clock();
    elapse = ((float)time_2 - (float)time_1)/1000;
    printf( "iter %d copy time: %f ms\n", formationNo, elapse );

    obj = 0.0;
    for (i=0; i<grid_size_voxe; i++) {
        obj += f_grid[i];
    }

    delete[] f_grid;

    return(obj);
} 
```

这个子程序在程序中被调用了很多次，每次运行我都会记录下运行时间

```
cudaMemcpy(f_grid, d_f_grid, sizeof(float)*grid_size_voxe, cudaMemcpyDeviceToHost); 
```

我得到的结果如下：

```
iter 0 copy time: 0.018000 ms
iter 1 copy time: 66.445999 ms
iter 2 copy time: 64.239998 ms
iter 3 copy time: 66.959999 ms
iter 4 copy time: 66.328003 ms
iter 5 copy time: 65.656998 ms
iter 6 copy time: 66.120003 ms
iter 7 copy time: 63.811001 ms
iter 8 copy time: 66.530998 ms
iter 9 copy time: 65.686996 ms
iter 10 copy time: 65.808998 ms
iter 11 copy time: 0.027000 ms
iter 12 copy time: 64.346001 ms
iter 13 copy time: 66.407997 ms
iter 14 copy time: 65.796997 ms
iter 15 copy time: 65.471001 ms
iter 16 copy time: 66.209000 ms
iter 17 copy time: 63.799000 ms
iter 18 copy time: 66.542999 ms
iter 19 copy time: 65.660004 ms
iter 20 copy time: 65.102997 ms
iter 21 copy time: 0.019000 ms
iter 22 copy time: 64.665001 ms
iter 23 copy time: 66.653999 ms
iter 24 copy time: 65.648003 ms
iter 25 copy time: 65.233002 ms
iter 26 copy time: 65.851997 ms
iter 27 copy time: 63.992001 ms
iter 28 copy time: 66.172997 ms
iter 29 copy time: 65.503998 ms
iter 30 copy time: 0.020000 ms
iter 31 copy time: 66.277000 ms
iter 32 copy time: 63.881001 ms
iter 33 copy time: 66.537003 ms
iter 34 copy time: 65.626999 ms
iter 35 copy time: 65.387001 ms
iter 36 copy time: 66.084999 ms
iter 37 copy time: 63.797001 ms
iter 38 copy time: 0.017000 ms
iter 39 copy time: 65.707001 ms
iter 40 copy time: 65.553001 ms
iter 41 copy time: 66.362999 ms
iter 42 copy time: 63.634998 ms 
```

这是使用 CUDA 4.2 在带有 GeForce GTX 285 的 Mac OSX 上运行的。我不知道它为什么这样做——应该是一个简单的副本。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T03:20:25.390

`cudaMemcpy`在前一个内核完成之前的块。您确定您不是在测量内核性能而不是复制性能吗？在`cudaDeviceSynchronize()`开始计时之前输入一个`cudaMemcpy`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:36:26.263

而不是使用时钟（）来测量时间，你应该事件：

使用事件你会有这样的事情：

```
 cudaEvent_t start, stop;   // variables that holds 2 events 
  float time;                // Variable that will hold the time
  cudaEventCreate(&start);   // creating the event 1
  cudaEventCreate(&stop);    // creating the event 2
  cudaEventRecord(start, 0); // start measuring  the time

  // What you want to measure
  cudaMemcpy(f_grid, d_f_grid, sizeof(float)*grid_size_voxe, cudaMemcpyDeviceToHost);

  cudaEventRecord(stop, 0);                  // Stop time measuring
  cudaEventSynchronize(stop);               // Wait until the completion of all device 
                                            // work preceding the most recent call to cudaEventRecord()

  cudaEventElapsedTime(&time, start, stop); // Saving the time measured 
```

# kyotocabinet - 如何提高kyotocabinet Hash Database的时间有效性

> ID：13355094
> 
> 赞同：2
> 
> 时间：2012-11-13T03:14:33.723
> 
> 标签：kyotocabinet

在kyotocabinet的主页上，我看到用哈希数据库存储数据需要0.9秒，但在我的测试中，存储一百万个数据大约需要13秒。[我在http://fallabs.com/kyotocabinet/spex.html#tutorial](http://fallabs.com/kyotocabinet/spex.html#tutorial)发现一些参数可以提高效果，但是在我尝试之后。似乎没有效果。（数据大小为120字节）我怎样才能提高效果？？？

# jquery - 用锚标签包裹的可拖动图像的创意解决方案？

> ID：13355097
> 
> 赞同：0
> 
> 时间：2012-11-13T03:15:00.493
> 
> 标签：jquery, css

我正在使用 Chris Coyier 的“可拖动”脚本，它使元素可拖动（没有 jquery UI）：

```
(function($) {
$.fn.drags = function(opt) {

    opt = $.extend({handle:"",cursor:"pointer"}, opt);

    if(opt.handle === "") {
        var $el = this;
    } else {
        var $el = this.find(opt.handle);
    }

    return $el.css('cursor', opt.cursor).on("mousedown", function(e) {
        if(opt.handle === "") {
            var $drag = $(this).addClass('draggable');
        } else {
            var $drag = $(this).addClass('active-handle').parent().addClass('draggable');
        }
        var z_idx = $drag.css('z-index'),
            drg_h = $drag.outerHeight(),
            drg_w = $drag.outerWidth(),
            pos_y = $drag.offset().top + drg_h - e.pageY,
            pos_x = $drag.offset().left + drg_w - e.pageX;
        $drag.css('z-index', 1000).parents().on("mousemove", function(e) {
            $('.draggable').offset({
                top:e.pageY + pos_y - drg_h,
                left:e.pageX + pos_x - drg_w
            }).on("mouseup", function() {
                $(this).removeClass('draggable').css('z-index', z_idx);
            });
        });
        e.preventDefault(); // disable selection
    }).on("mouseup", function() {
        if(opt.handle === "") {
            $(this).removeClass('draggable');
        } else {
            $(this).removeClass('active-handle').parent().removeClass('draggable');
        }
    });

  }

})(jQuery); 
```

它的初始化方式是：

```
$('#containerness img').drags(); 
```

问题是那些现在可以拖动的图像被包裹在锚标记中，这些标记绑定到我的 jquery 灯箱脚本（我不会在此处发布灯箱脚本，因为它已缩小且相当大）。

因此，如果您单击并拖动图像，同样的单击事件也会打开灯箱。

如果图像被拖动，是否有办法阻止灯箱启动，但如果没有拖动，则保留灯箱？或者像“如果发生拖动，忽略图像所包含的 A HREF”之类的东西？

我一直在看这段代码太久了。我什至尝试将灯箱绑定到双击而不是单击，但在中途意识到没有人再双击所以最好不要去那里。:)

# haxe - 从 Haxe 文件中读取行

> ID：13355099
> 
> 赞同：1
> 
> 时间：2012-11-13T03:15:15.843
> 
> 标签：haxe

在 Haxe 中，是否有任何跨语言方法可以从文件中读取行（适用于所有 Haxe 目标语言？）

这是我要实现的方法存根：

```
static function readLine(fileName, lineNumber){
    //now how can I get this method to work with all Haxe target languages?
} 
```

在 Sys 类中可能找到相关的方法，但我还没有找到。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T06:16:41.657

```
static function readLine(fileName, lineNumber) {
    var fin = sys.io.File.read(fileName, false);
    try {
        for (i in 0...lineNumber)
            fin.readLine();
        var line = fin.readLine();
        fin.close();
    } catch (e:haxe.io.Eof) { return null; }
    return line;
} 
```

[http://haxe.org/api/sys/io/file](http://haxe.org/api/sys/io/file)是您正在寻找的。

[以http://haxe.org/doc/neko/fileio](http://haxe.org/doc/neko/fileio) 为例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-12T14:40:51.370

目前对于 haxe 节点目标，由于异步方面，读取行号的方法可能有点不同，所以认为添加一个示例包装器可能会很有用，它使它更容易，只需将文件路径传递给类，一个函数来处理完成处理时的行和函数。

```
package saver;
import js.node.Fs;
import js.node.Readline;
class Reader{
    var onLine: Int->String->Void;
    var finished: Void->Void;
    var lineNo: Int;
    public function new(  file_: String
                        , onLine_: Int->String->Void
                        , finished_: Void->Void ){
        onLine = onLine_;
        finished = finished_;
        var file = file_;
        lineNo = 0;
        var readLine = Readline.createInterface({
          input: Fs.createReadStream( file )
        });
        readLine.on('line',     onReadLine );
        readLine.on('close', onFinished );
    }
    function onReadLine( str ){
        onLine( lineNo, str );
        lineNo++;
    }
    function onFinished( ){
        finished();
    }
} 
```

如果您在电子应用程序中使用 Node，那么您的 hxml 中可能需要这些。

-lib 电子

-lib hxnodejs

# html - Css 过渡不起作用：淡入淡出问题

> ID：13355103
> 
> 赞同：1
> 
> 时间：2012-11-13T03:16:02.933
> 
> 标签：html, css, web

嗨，我正在使用 Microsoft Expression Web 4 制作一个网站，当我将鼠标悬停在它上面时，我想让一个链接淡入另一个图像，代码是：

```
.about { background: url('../images/aboutbutton1.png') no-repeat;
min-height: 50px;
max-width: 150px;
-moz-transition: background .45s linear;
-webkit-transition: background .45s linear;
transition: background .45s linear;
}

.about:hover {
background: url('../images/aboutbutton2.png') no-repeat;
min-height: 50px;
max-width: 150px;
-moz-transition: background .45s linear;
-webkit-transition: background .45s linear;
transition: background .45s linear;
} 
```

但每次我这样做它都不会褪色它只是切换！请帮忙！

# php - 如何在 PHP 中将 3 个数组合并为一个关联数组

> ID：13355104
> 
> 赞同：9
> 
> 时间：2012-11-13T03:16:29.897
> 
> 标签：php, arrays, associative-array

我有 3 个数组，每个数组只有 7 个元素。数组是：

`filename[]`

`title[]`

`description[]`

我想为上面数组中的每个数据表达和迭代一个关联数组。`filename`可以是 assoc 数组的键值，但每个文件名都有自己对应的标题和描述。

以下是以下示例：

```
var_dump($filename)
    string(10) "IMG_1676_3" [1]=> 
    string(10) "IMG_0539_3" [2]=> 
    string(8) "IMG_1942" [3]=> 
    string(8) "IMG_1782" [4]=> 
    string(8) "IMG_2114" [5]=> 
    string(8) "IMG_9759" [6]=> 
    string(8) "IMG_2210" }

var_dump($title)
    string(31) "Lighthouse at Ericeira Portugal" [1]=> 
    string(23) "Gaudi park in Barcelona" [2]=> 
    string(32) "Driving around outside of Lisbon" [3]=> 
    string(16) "Madeira Portugal" [4]=> 
    string(15) "Barcelona Spain" [5]=> 
    string(15) "Lisbon Portugal" [6]=> 
    string(14) "Sailing Lisbon" } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T03:18:57.903

```
function mergeArrays($filenames, $titles, $descriptions) {
    $result = array();

    foreach ( $filenames as $key=>$name ) {
        $result[] = array( 'filename' => $name, 'title' => $titles[$key], 'descriptions' => $descriptions[ $key ] );
    }

    return $result;
} 
```

只需确保将有效输入传递给函数，或添加一些额外的检查。那是你要找的吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T03:24:48.300

如果您的数组键对于所有 3 个数组都相同，那么执行您所要求的更好的方法是 foreach 创建一个新数组，其中所有键（文件名、标题、描述）都在同一个键中：

```
<?php
foreach($filename as $key => $file)
{
    $files[$key]['filename'] = $file;
    $files[$key]['title'] = $title[$key];
    $files[$key]['description'] = $description[$key];
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:20:26.873

试试这个

```
$result = array_combine($filename, array_map(null, $title, $description));
var_dump($result); 
```

或者，如果您需要内部数组是关联的。

```
$result = array_combine($filename, 
  array_map(function($t, $d) { 
      return array('title'=>$t, 'description'=>$d); 
    }, $title, $description
  )
); 
```

如果你只想组合三个数组

```
$result = array_map(function($f, $t, $d) { 
    return array('filename'=>$f, 'title'=>$t, 'description'=>$d); 
  }, $filename, $title, $description
); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-12T09:22:32.773

```
$array1 = array("orange", "apple", "grape"); 
$array2 = array("peach", 88, "plumb");
$array3 = array("lemon", 342); 
$newArray = array_merge($array1, $array2, $array3);
foreach ($newArray as $key => $value) {
    echo "$key - <strong>$value</strong> <br />"; 
} 
```

# c++ - 无法在函数调用之外更改节点参数

> ID：13355106
> 
> 赞同：1
> 
> 时间：2012-11-13T03:16:41.893
> 
> 标签：c++, class

我正在制作一个试图将 int 插入到树中的节点的函数。据我所知，我的插入功能完美无缺，但在功能之外，就像从未发生过一样。这是我的代码：

lcrs.h：

```
using namespace std;
#include <cstdlib>
#include <iostream>

class node{
        public:
        int data;
        node *right;
        node *below;

        node()
        {
                right = NULL;
                below = NULL;
        }
};

class lcrs{
        public:
        node *root;
        bool search(int, node*);
        void print(node*);
        void insert(int, node*);
        int getHeight(node*);

        lcrs()
        {
                root = NULL;
        }
}; 
```

和lcrs.cpp：

```
using namespace std;
#include "lcrs.h"

bool lcrs::search(int x, node *b)
{
        if(b == NULL)
                return false;
        else
        {
                if(b->data == x)
                        return true;
                else
                {
                        return search(x, b->right) || search(x, b->below);
                }
        }
}

void lcrs::print(node *z)
{
        if(z->right == NULL && z->below == NULL)
        {
                cout << z->data << endl;
        }
        else if(z->below == NULL && z->right != NULL)
        {
                cout << z->data << ", ";
                print(z->right);
        }
        }
        else if(z->below != NULL && z->right == NULL)
        {
                cout << z->data << ", ";
                print(z->below);
        }
        else
        {
                print(z->right);
                print(z->below);
        }
}

void lcrs::insert(int x, node *a)
{
        if(a == NULL)
        {
                node *newnode;
                newnode = new node;
                newnode->data = x;
                a = newnode;
                cout << a->data << endl;
        }
        else if(a->data < x)
        {
                if(a->right != NULL)
                {
                        insert(x, a->right);
                }
                else
                        a->right->data = x;
        }
        else
        {
                if(a->below != NULL)
                {
                        insert(x, a->below);
                }
                else
                {
                        a->below->data = x;
                }
        }
}

int lcrs::getHeight(node *h)
{
        int height = 0;
        if(h->below != NULL)
        {
                height ++;
                return getHeight(h->below);
        }
        else
                return height;
} 
```

最后是我的 main.cpp：

```
using namespace std;
#include <iostream>
#include <cstdlib>
#include <cstring>
#include "lcrs.h"

int main()
{
char *temp1;
char *temp2;
temp1 = new char;
temp2 = new char;

lcrs tree;

do{
        cout << "LCRS> ";
        cin >> temp1;
        if(strcmp(temp1, "quit") == 0)
        {
                return 0;
        }
        if(strcmp(temp1, "insert") == 0)
        {       cin >> temp2;
                bool error;
                for(int i=0; i<strlen(temp2)-1; i++)
                {
                        if(!isdigit(temp2[i]))
                        {
                                cout << "Error!" << endl;
                                error = true;
                        }
                }
                if(!error)
                {
                        tree.insert(atoi(temp2), tree.root);
                        if(tree.root == NULL)
                                cout << "Root is null." << endl;
                        else
                                cout << tree.root->data << endl;
                }
        }
        else if(strcmp(temp1, "height") == 0)
        {
                if(tree.root == NULL)
                        cout << "-1" << endl;
                else
                        cout << tree.getHeight(tree.root);
        }
        else if(strcmp(temp1, "preorder") == 0)
        {
                tree.print(tree.root);
        }
}while(strcmp(temp1, "quit") !=0);

return 0;
} 
```

所以我知道我的**insert**函数实际上并没有改变**tree的****根**，我只是不明白为什么。

 **非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:28:01.910

你的代码：

```
void lcrs::insert(int x, node *a)
{
        if(a == NULL)
        {
                node *newnode;
                newnode = new node;
                newnode->data = x;
                a = newnode; 
```

↑ 此赋值不会更新实际参数，因为它是按值传递的。

```
 cout << a->data << endl;
        }
        else if(a->data < x)
        {
                if(a->right != NULL)
                {
                        insert(x, a->right);
                }
                else
                        a->right->data = x; 
```

↑ 在这里你知道（已经确定）这`a->right`是一个空指针。取消引用该空指针会产生**未定义的行为**。例如崩溃。

```
 }
        else
        {
                if(a->below != NULL)
                {
                        insert(x, a->below);
                }
                else
                {
                        a->below->data = x;
                } 
```

↑ 在这里你知道（已经确定）这`a->below`是一个空指针。取消引用该空指针会产生**未定义的行为**。例如崩溃。} }

作为一般评论，`below`混合`right`了两个隐喻。最好称它们为`below`and `above`，或`left`and `right`。后一种选择很常见。

与其通过引用传递节点指针（以解决非更新问题），不如考虑将其作为函数结果返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:34:46.157

您将指针传递给使用值传递；要通过引用传递，您需要使用`void lcrs::insert(int x, node * & a)`which 传递对`a`而不是`a`自身的引用。发生的情况是指向节点的指针被复制到一个局部变量中，`a`在函数中引用。然后该函数可以自由地更改副本（甚至更改它指向的内存），但是当函数返回时，调用者不知道副本发生了什么，因为它仍在查看原始文件。

通过引用传递，调用者和被调用函数都使用相同的东西，而不是一个使用副本，另一个使用原始。**

# c# - 如何在 ServiceStack 中进行身份验证后重定向

> ID：13355107
> 
> 赞同：9
> 
> 时间：2012-11-13T03:16:58.157
> 
> 标签：c#, .net, servicestack

我已经像这样覆盖了 CredentialsAuthProvider：

```
public override bool TryAuthenticate(IServiceBase authService, string userName, string password)
        {
            //TODO: Auth the user and return if valid login
            return true;
        }

public override void OnAuthenticated(IServiceBase authService, IAuthSession session, IOAuthTokens tokens, Dictionary<string, string> authInfo)
        {
            base.OnAuthenticated(authService, session, tokens, authInfo);

            //User has been authenticated

            //Find the user's role form the DB

            if (roleA)
                //GOTO mypage1

            if (roleB)
                //GOTO mypage2
        } 
```

我向 ~/auth/Credentials 执行了一个简单的帖子，当身份验证工作并调用 OnAuthenticated 方法时，我如何根据角色或类似的东西实际将用户重定向到适当的页面？

我厌倦了在 OnAuthenticated 方法中执行以下操作，但没有达到预期的效果：

> authService.("/views/customers");

**使用 Starter Template 更新（见下面的评论）：**

```
public class CustomCredentialsAuthProvider : CredentialsAuthProvider
    {
        public override bool TryAuthenticate(IServiceBase authService, string userName, string password)
        {
            return true;
        }

        public override void OnAuthenticated(IServiceBase authService, IAuthSession session, IOAuthTokens tokens, Dictionary<string, string> authInfo)
        {
            session.ReferrerUrl = "http://www.msn.com";

            base.OnAuthenticated(authService, session, tokens, authInfo);
        }
    } 
```

以及要发布的表格：

```
<form method="POST" action="/auth/credentials">
        <input name="UserName"/>
        <input name="Password" type="password"/>
        <input type="submit"/>
    </form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T17:22:21.367

[您可以在ServiceStack Authentication](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)期间将 Url 设置为重定向到的不同位置，按优先顺序排列：

1.  发出请求时的**Continue QueryString、FormData 或 Request DTO 变量**`/auth`
2.  `Session.ReferrerUrl`网址_
3.  HTTP**引用者**HTTP 标头
4.  当前使用的 AuthProvider 的 AuthConfig 中的**CallbackUrl**

鉴于这些偏好顺序，如果请求没有**Continue**参数，它应该使用`session.ReferrerUrl`，所以你可以这样做：

```
if (roleA) session.ReferrerUrl = "http://myPage1Url";
if (roleB) session.ReferrerUrl = "http://myPage2Url"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:45:33.337

神话，

制作这个 OSS 很好。:)

关于优先顺序，您是正确的：

1.  向 /auth 发出请求时的 Continue QueryString、FormData 或 Request DTO 变量
2.  Session.ReferrerUrl URL HTTP
3.  引用 HTTP 标头
4.  当前使用的 AuthProvider 的 AuthConfig 中的 CallbackUrl

所以在我的示例中，我没有 Continue QueryString、Form Data 或 Request DTO 变量，也没有 CallbackUrl，当然也没有 Session.ReferrerUrl，因为这是 Session 的第一篇文章。

来自`AuthService.cs`：

```
var referrerUrl = request.Continue
    ?? session.ReferrerUrl
    ?? this.RequestContext.GetHeader("Referer")
    ?? oAuthConfig.CallbackUrl; 
```

默认情况下，referrerUrl 将具有来自请求的 Referer 标头值。这就是将分配给 Location 标头的内容，位于`Post`方法的下方`AuthService.cs`：

```
if (!(response is IHttpResult))
                    {
                        return new HttpResult(response) {
                            Location = referrerUrl
                        };
                    } 
```

一旦通过身份验证，并在`session.ReferrerUrl`此处设置，响应将被发送到客户端，上面的 Location 属性设置为原始引荐来源，而不是下面的值：

```
public override void OnAuthenticated(IServiceBase authService, IAuthSession session, IOAuthTokens tokens, Dictionary<string, string> authInfo)
        {
            session.ReferrerUrl = "http://www.msn.com";
        } 
```

只有在同一会话的第二个 POST 上，客户端才会导航到 www.msn.com（在此示例中），因为该会话已被填充。我认为这：

```
var referrerUrl = request.Continue
                ?? session.ReferrerUrl
                ?? this.RequestContext.GetHeader("Referer")
                ?? oAuthConfig.CallbackUrl; 
```

需要在调用 auth 后确定。

# python - djangorestframework user_id 违反非空约束

> ID：13355108
> 
> 赞同：2
> 
> 时间：2012-11-13T03:17:03.513
> 
> 标签：python, django, authentication, django-rest-framework

几天来我一直在看这个，我要拔掉我的头发，所以任何帮助都将不胜感激。

我有一个名为 package 的简单模型，它有一个 userFrom 和 userTo

```
class Package(models.Model):

  title = models.CharField(max_length=50)
  packageid = models.CharField(primary_key=True, max_length=64, default=uuid_str, editable=False)
  userfrom  = models.ForeignKey('auth.user', editable=False, related_name='userfrom')
  userto  = models.ForeignKey('auth.user', editable=False, related_name='userto') 
```

我对包的看法有以下分配映射

```
 def pre_save(self, obj):
    print "adding user to object! %s "%self.request.user
    obj.userfrom = self.request.user 
```

然而，似乎 pre_save 没有被调用，并且用户 ID 的映射没有发生。当我使用 api 登录并尝试推送新包时，我收到错误消息。

我试图将它尽可能地映射到教程[http://django-rest-framework.org/tutorial/4-authentication-and-permissions.html](http://django-rest-framework.org/tutorial/4-authentication-and-permissions.html)没有任何运气。

异常类型：IntegrityError 异常值：
“userfrom_id”列中的空值违反非空约束

浏览 sql 的源代码我可以看到 userfrom_id 和 userto_id 都是空的。

任何想法都非常感谢。

Ĵ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:53:07.417

您定义的 pre_save() 方法，它不是一个视图，它是一个模型方法，应该在对象包的实例被保存之前正确执行。发生的情况是 pre_save 不知道变量“request”的值，因为这种变量存在于视图函数环境中而不是模型环境中。你把事情搞混了。

我认为你需要这样的东西：

```
# views.py
def your_view(request):

    if request.method == 'POST':
        package_form = PackageForm(request.POST)
        if package_form.is_valid():
            package = package_form.save(commit=False)
            package.userfrom = request.user
            package.save()

            return render(request, 
                'your_template.html', {}
            )
    package_form = PackageForm()
    return render(request, 
                'another_template.html', {}
            ) 
```

那将是视图。你需要一个像这样的表格：

```
class PackageForm(forms.ModelForm):
    class Meta:
        model = Package
        exclude = ('userfrom',) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T04:26:14.690

我遇到过同样的问题...

您必须使用序列化对象在帖子中调用 pre_save：

```
def post(self, request, format=None):
    serializer = SnippetSerializer(data=request.DATA)
    if serializer.is_valid():
        self.pre_save(serializer.object) #pass in serializer.object
        serializer.save() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T18:23:58.640

确保你的视图类继承了**CreateModelMixin** mixin。

正如[文档](http://django-rest-framework.org/api-guide/generic-views#methods)所述：

> Remember that the pre_save() method is not called by GenericAPIView itself, but it is called by create() and update() methods on the CreateModelMixin and UpdateModelMixin classes.

# php - 如何编写漂亮的 PHP 和 HTML？

> ID：13355112
> 
> 赞同：6
> 
> 时间：2012-11-13T03:17:41.280
> 
> 标签：php, html

将 PHP 与 HTML 一起编码时，看起来总是令人困惑和痛苦。结构不容易理解。

谁能告诉我如何用结构良好的 HTML 编写 PHP 代码？ ![php代码](../Images/44be09176ef29aa97334bdc954a5266e.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T03:23:40.830

有一些方法可以帮助解决这个问题，例如模型-视图-控制器 (MVC)。MVC 将数据层、逻辑层和表示 (UI) 层分开。在这种情况下，诸如 CodeIgniter 之类的框架会为您提供帮助。即使您不打算使用现有框架，将数据模型从业务逻辑中分离出来，然后从 UI 对象中分离出来也相对容易。

编辑：假设您有一个购物车页面。您可以有一个名为 cart.php 的“视图”文件，然后您可以从其他 PHP 文件（“控制器”）向其发送信息，这样就可以代替：

```
<div id = 'special_price'>
<?php $result = mysql_query("SELECT price FROM pricelists");
 $row = mysql_fetch_assoc($result); 
echo $row["price"]; 
?>
</div> 
```

你可以这样做：

```
<div id = 'special_price'><?= $price ?></div> 
```

在这种情况下，所有逻辑和数据访问都会在您尝试显示页面之前进行处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T04:13:50.800

@ajacian81 是对的，但还有其他选择。他提到的方式是根据 MVC 框架编写所有代码。MVC 架构是分离复杂 Web 应用程序关注点的绝佳方式。MVC 将应用程序逻辑、数据库逻辑和视图分成 3 个不同的地方。但是，将混合的 php+html 代码库重构为 MVC 框架可能非常耗时。如果您有兴趣在不完全重构代码库的情况下从 html 中删除 php，请考虑使用[Twig](http://twig.sensiolabs.org/)或[Smarty 之](http://www.smarty.net/)类的模板引擎。

如果您使用模板引擎，您可以将 php 和 sql 分离到一个位置，将 html 模板分离到另一个位置。如果您使用 MVC 框架，您必须将 php、sql 和 html 分成 3 个不同的位置。如果您的优先事项本质上是短期的，只需使用模板引擎。如果您的优先级本质上是长期的，请考虑将您的代码重构为 MVC 框架。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-13T04:34:01.283

PHP 已经变得如此先进，你真的不会使用自定义构建的框架信念获得任何东西。如果您注释掉您的脚本以及 html 和 php 的每个部分的每个开头和结尾，您会惊讶于运行一个完整的社交网站或社交业务门户所需的速度和文件数量的减少。我只使用三个主要文件——config.php、ini.php 存储我所有的会话和cookie，以及db_connect.php。我的所有页面视图都由 Ajax 处理而无需刷新页面，并且我的所有表单都被带入其中一些视图以使用 Ajax 而无需刷新页面。我的所有 URL 请求几乎都使用了 Ajax，这消除了对笨重框架的需求。

# javascript - 使用 javascript 制作复古图像

> ID：13355119
> 
> 赞同：4
> 
> 时间：2012-11-13T03:18:42.303
> 
> 标签：javascript, html, canvas, html5-canvas

我一直在创建一个照片编辑网络应用程序，并设法编辑像素以创建很酷的图像过滤器

```
var data = imageData.data;
for (var i = 0; i < data.length; i += 4) {
 //Note: data[i], data[i+1], data[i+2] represent RGB respectively
data[i] = data[i];
data[i+1] = data[i+1];
data[i+1] = data[i+1];
data[i+2] = data[i+2];

} 
```

但是，我还没有找到一种算法或想出一个能产生复古效果的算法。这可能与像素操作伊玛目做吗？如果是这样，您知道我在哪里可以找到算法吗？

效果示例位于[https://softwareengineering.stackexchange.com/questions/153052/is-there-a-javascript-library-for-creating-vintage-photos](https://softwareengineering.stackexchange.com/questions/153052/is-there-a-javascript-library-for-creating-vintage-photos)

但我想像迄今为止所做的那样编辑像素。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-18T00:30:00.843

# 了解错误

很难想出一个算法来模拟“老式”照片（如果“老式”被定义为“旧的被虐待的底片/照片”:-)），因为结果是多层次的，并且是由各种物理和化学因素引起的。

了解这些因素将帮助您构建所需的图层，以模拟“复古”外观。

## 漏光

在旧相机上，不时会发生后盖打开导致光线泄漏到负片上的情况。当盖子从侧面打开时，典型的泄漏出现在边缘或边缘周围或呈条纹状。由于与典型的预期曝光相比，曝光时间相对较长，因此条纹通常呈现为白色，带有红色模糊光晕（在正片上）。

确切的过度曝光条纹出现的位置将是随机的，具体取决于相机和环境光条件。

此外，如果光线泄漏到胶片上，通常会导致图像模糊不清。这是因为光线已经暴露在胶片上并且会产生灰色。这是它们与顶部的预期曝光混合。

## 胶片颗粒

模拟胶片中有银色颗粒。ISO 越高，颗粒的大小就越大——事实上，ISO 和颗粒大小（通过掩码过滤）直接相关。消费电影的典型 ISO 值为 200 到 400 ISO。此外，实验室开发中使用的三个步骤中的化学质量也会影响质量，不仅涉及谷物，还涉及对比度和色彩平衡。

此外，135 胶卷并不是过去唯一的典型尺寸。您的胶卷尺寸较小，因此，在相同的 ISO 值（颗粒尺寸）下，显影的正片看起来颗粒感更强。

## 化学品

化学品在开发、质量（非饱和）、温度和时间方面很重要。如果实验室忘记补充化学品，结果将是对比度和色调较差（在商业实验室中，时间和温度会自动处理，但化学品需要手动更换）。

有时人们会操纵温度和化学物质来故意制造某些效果，例如漂白、日晒、调整色调（饱和度、色彩平衡、色调）等。

## 暴露

对于非常旧的相机/胶卷，曝光不均匀是一个明显的因素。您可以在胶片上进行各种曝光的“渐变”，使其顶部看起来更亮，底部看起来更暗，反之亦然。

在更现代的相机上，大多数手动设置很容易使胶卷曝光过度或曝光不足。如果实验室操作员进行了错误的调整或化学物质不再起作用，那么在开发阳性时也会发生同样的情况。

## 光学

光学在渐晕中发挥着重要作用，在这种渐晕中，中心较亮，角落较暗。糟糕的光学和外壳更容易产生晕影（我个人是晕影的粉丝，经常将其添加到我自己的照片中）。

![晕影效果](../Images/a047f1e1e87e036f64250f3d528134a5.png)

在许多较旧的自动相机上，固定为“无限”的镜头意味着任何接近 60 厘米的东西都会出现失焦 - 镜头允许的任何其他东西（塑料镜头在这个时候变得或多或少变得更常见，并且具有更低质量优于玻璃镜片）。

## 相纸

另一个因素是相纸本身的质量以及用于显影的化学过程。

根据纸张的构造方式、粒度和使用的化学物质，您将获得从光栅般的粗粒度图像到超清晰光泽图像的各种结果。如果正片（纸张）和负片（或 dias 胶片）都使用高 ISO 值，则结果通常会变得模糊和有颗粒感——就像将低分辨率数字图像放大到更高尺寸时一样。

## 模拟与数字

了解模拟电影与数字电影的工作方式也很重要。

本质上，与像素严格有序的数字图像相反，银颗粒分布不均匀。

曝光过度和曝光不足的胶片仍然可以包含细节，而使用数码胶片时，这些细节会被删除。这与电影的动态范围与数字的 AD 转换器有关。

## 颜色表示

颜色也因胶片/纸乳液以及化学过程而异。还有一些特殊的工艺，如漂白，会影响最终的颜色。

在数字领域，相当于 LUT（查找表），它可以使用更广泛的源范围，使用 1D 或[3D LUT](https://en.wikipedia.org/wiki/3D_LUT)来修改颜色以提供特定外观（“电影”、“电影”、模拟 bleech 过程等向前）。

## 杂项

当然，还有其他因素，但我将重点关注这些因素，因为它们通常被认为是“复古”风格的一部分（复古不是一个正确的术语 IMO，因为它指的是旧风格 - 没有那么多典型的错误模拟相机:-)，但我会在这里使用它）。

# 把它们放在一起

那么我们如何使用这些知识呢？我们可以将不同的步骤分成错误层。

例如 - 对于漏光，我们现在知道它们出现的原因以及它们将出现的位置。我们可能不需要算法本身，因为我们可以使用叠加来创建相同的效果。由于漏光在技术上是多重曝光的一部分，我们可以将“空白”漏光混合到图像上：

例如 - 如果我们有两个以这种方式暴露在光线下的空帧，我们可以使用这样的图像来混合到我们的主图像上：

![漏光示例](../Images/de351c4f561de0e9935fcfa2c55f497a.png)

要制作这些，您自己只需找到一台旧相机，打开后盖，关闭，假脱机到下一帧，重复，然后进行显影（或扫描）。这将产生最自然的结果。

可以通过引入高斯等模糊和噪声来产生胶片颗粒。然而，这看起来并不像*谷物*，但它是一种简单的方法。

或者，您也可以在这里使用混合到图像上的真实颗粒状的框架。为了获得最佳结果，您可以混合“颗粒簇”（将当前颗粒的颜色映射到该颗粒的区域，将同一区域中的图像颜色混合为平均颜色并用它填充颗粒区域）。然而，这有点复杂并且计算量很大。

以下示例还带有灰尘和头发，这在处理模拟电影时也是典型的。然而，它们与谷物无关，但您可以在这一层的过程中组合它们：

![胶片颗粒](../Images/5c23edbab6c81aebc2c7b01497c9ceb1.png)

化学过程可以通过去饱和来模拟并提供色调偏差（或简单地调整色彩平衡）。

对于色彩平衡，了解*加*色（CMYK 颜色，即品红色与绿色、黄色与蓝色、红色与青色等）的色彩​​理论是一个优势。

但是我们可以将 RGB 转换为 HSL/HSV 色彩空间，而不是通过 CMYK，并更改色调程度并调整饱和度值，然后再转换回 RGB - 或者只是尝试直接在 RGB 中调整色彩平衡，就好像我们在处理直接用负片。

在颜色调整下也有对比度调整。通过降低对比度可以实现更多的雾。

# 组装

要组装所有这些图层，您可能可以通过在绘制叠加层时简单地调整 alpha 级别来避免迭代某些图层 - 例如对于漏光，用透明度替换黑色并将其混合在图像顶部。但是，对于颗粒，您需要对颗粒或原始图像使用可调节偏差的乘法模式。

当然，要更改颜色，您需要迭代像素。

您可以做出妥协并将以下层合并为一个层：

*   胶片颗粒
*   小插图
*   漏光

如果您确实注意到颗粒层将显示为灰色叠加层，而不是与像素很好地混合。如果您想让图像看起来更模糊，这可能会起作用，但之后您可能需要增加亮度。

顺序很重要，也必须考虑：

*   首先进行颜色调整
*   降低对比度
*   模糊（考虑夸张的边缘模糊来模拟“无限”焦点）
*   添加图层（或组合的颗粒、晕影、漏光）
*   考虑调整亮度

# 结论

虽然，到目前为止只是理论。

我没有提供一个工作示例，因为这实际上会产生一个相当完整的解决方案，这当然不是 SO 的目的。

我还尝试将答案限制在基础知识上，因为如果所有位置都使用算法生成，它可能很快变得非常复杂——因为你需要其中的几个，因此太宽泛而无法回答。

无论如何，这里有一些资源可以帮助您完成各个步骤：

```
Resources 
```

*   [对比](https://stackoverflow.com/questions/10521978/html5-canvas-image-contrast)
*   [亮度、模糊（和其他过滤器）](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)
*   [使用 HSV/HSL 进行色彩平衡](https://en.wikipedia.org/wiki/HSL_and_HSV)（另请参阅我的[画布调色板实现](http://jsfiddle.net/AbdiasSoftware/wYBEU/)）
*   [使用画布混合图像、颜色、迭代像素](https://stackoverflow.com/questions/18576702/how-to-tint-an-image-in-html5/18578475#18578475)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T23:05:23.453

这是一篇关于理解 HTML5 画布的像素操作以及如何应用这些技术来实现几种常见图像效果的非常棒的文章。

[HTML5 画布图像过滤器](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T17:55:57.033

我不会像**肯**那样广泛，但我发现了一些对任何来到这里寻找这个问题的答案的人来说可能会有所帮助和更“可用”的东西。

[卡曼JS](http://camanjs.com/)

> **什么是卡曼JS？**
> 
> CamanJS 是 Javascript 中的 (ca)nvas (man)ipulation。它结合了简单易用的界面和先进高效的图像/画布编辑技术。
> 
> CamanJS 很容易使用新的过滤器和插件进行扩展，并且它具有广泛的图像编辑功能，并且还在不断增长。它完全独立于库，可在 NodeJS 和浏览器中使用。

您可以浏览到示例页面，第一个过滤器称为*vintage*。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-01T03:15:17.647

您可以将`globalCompositeOperation`with`hue`用于“快速而肮脏”的解决方案：

```
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");

var img = new Image;
img.onload = function(){
  ctx.drawImage(img, 0, 0);
  ctx.globalCompositeOperation = "hue";
  ctx.fillStyle = "rgba(0,0,0,0.75)";
  ctx.fillRect(0, 0, 509, 321);
  ctx.globalCompositeOperation = "destination-in";
  ctx.drawImage(img, 0, 0);
};
img.src = "https://www.qoncious.com/sites/default/files/q_a_images/flowers.jpg";
```

```
<p>Original</p>
<img src="https://www.qoncious.com/sites/default/files/q_a_images/flowers.jpg" />

<p>Vintage</p>
<canvas id="myCanvas" width="509" height="321" style="border:1px solid #d3d3d3;">
</canvas>
```

# jquery - 如何克服 IE ReceiveTimeout 问题

> ID：13355121
> 
> 赞同：0
> 
> 时间：2012-11-13T03:18:43.473
> 
> 标签：jquery, ajax, internet-explorer, timeout

我在 ASP.NET 中有一个运行时间相对较长的 Web 服务。使用标准 jQuery ajax 调用。问题是，我收到状态码 12002。经过数小时的研究，我发现这是一个 IE 客户端问题！如果您将 ReceiveTimeout (HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ReceiveTimeout) 的注册表设置更改为 60000（60 秒），一切正常。默认值为 10 秒。

那么，对于无法要求用户调整其注册表设置的公共站点，我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:10:08.080

您可以轮询响应，而不是要求 AJAX 客户端等待响应到来。请参考以下网址，它可能会有所帮助 [http://en.wikipedia.org/wiki/Comet_(programming](http://en.wikipedia.org/wiki/Comet_(programming) )

# javascript - 使用 dojox.form.Uploader 和 FormData 上传文件

> ID：13355122
> 
> 赞同：3
> 
> 时间：2012-11-13T03:18:45.833
> 
> 标签：javascript, file-upload, dojo

我正在尝试通过 XMLHttpRequest 上传文件。我使用以下语句创建一个`input`with `type`set to并获取文件数据`file`

```
var files = document.getElementById("fileInput").files;
var file = files[0];
var formData = new FormData();
formData.append("fileInput", file);
.
.
.
xhr.send(formData); 
```

这行得通！但是当使用`dojox.form.Uploader`我写这样的东西时：

```
var files = dijit.byId("dojoFileInput").getFileList();
var file = files[0];
var formData = new FormData();
formData.append("dojoFileInput", file);
.
.
.
xhr.send(formData); 
```

这**不起作用**！我无法使用 的`upload`功能，`dojox.form.Uploader`因为我需要在`FormData`对象中发送一些额外的数据。我正在使用此语句创建 dojo 文件上传器

```
<div dojoType="dojox.form.Uploader" label="Select files..." id="dojoFileInput"></div> 
```

我尝试使用以下语句在控制台中打印文件数据：

```
console.log(document.getElementById("fileInput").files[0]); // Normal file input
var files = dijit.byId("dojoFileInput").getFileList(); // Dojo file input
console.log(files[0]); 
```

正常的文件输入给出以下输出（实际上每个部分下的信息比这多得多，但这是浓缩的）：

```
File {webkitRelativePath: "", lastModifiedDate: Sat Nov 10 2012 19:42:45 GMT+0530 (India Standard Time), name: "<FILE NAME>", type: "image/png", size: 115661}
    lastModifiedDate: Sat Nov 10 2012 19:42:45 GMT+0530 (India Standard Time)
        __proto__: Invalid Date
        name: "<FILE NAME>"
        size: 115661
        type: "image/png"
        webkitRelativePath: ""
    __proto__: File
        constructor: function File() { [native code] }
        arguments: null
        caller: null
        length: 0
        name: "File"
        prototype: File
        toString: function toString() { [native code] }
        __proto__: Object
        <function scope>
    __proto__: Blob
        constructor: function Blob() { [native code] }
        slice: function slice() { [native code] }
        webkitSlice: function webkitSlice() { [native code] }
        __proto__: Object 
```

但是 Dojo 文件上传器只提供单行输出：

```
Object {index: 0, name: "<FILE NAME>", size: 115661, type: "image/png"} 
```

Dojo 没有提供可以发送到服务器的整个文件详细信息吗？这是使用 dojo 文件上传器将文件发送到服务器的正确方法吗？有什么想法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T01:24:46.437

Uploader 有一个*提交*方法，允许您添加发布数据。

# session - 单页应用，无 cookie，tomcat 会话管理

> ID：13355123
> 
> 赞同：0
> 
> 时间：2012-11-13T03:18:54.023
> 
> 标签：session, tomcat, jboss, session-cookies, session-management

场景如下：单页应用程序（基于 AJAX），在不允许 cookie 但仍需要会话的环境中，以及后端的 Tomcat（或 JBoss）。

让后端容器（Tomcat）管理会话的最佳和最简单的方法是什么？

我是否只需将 JSESSIONID=SESSION_ID_GOES_HERE 附加到我发出的每个 AJAX 请求中，这足以让 Tomcat 接收会话吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:09:17.490

是的，确切地说，如果您不能使用 cookie，您可以在对服务器的调用之间实现相同的应用 JSessionid。它被称为 URL 重写。

您必须将 jsessionid 附加到返回给浏览器的链接，这样，浏览器将使用相同的 jsessionid 将其后续调用发送到服务器。但要做到这一点，您应该使用 servlet 的响应参数的方法：encodeURl() 和 setRedirect()，以便它正确附加 de JSessionId（如果确实需要）。

例如，如果您的 servlet/jsp 中有以下链接：

```
out.println("<a href=\"/mycontext/newpage\">Next Page<a>"); 
```

你应该这样写：

```
 out.println("<a href=\"");
  out.println(response.encodeURL ("/mycontext/newpage"));
  out.println("\">Next Page</a>"); 
```

如果需要，它将自动附加 JSessionId（例如，如果禁用 cookie）。

同样，如果您只需要发送重定向，您应该：

```
response.sendRedirect (response.encodeRedirectURL
    ("http://myhost/mycontext/newpage")); 
```

有关更多信息，请查看[HttpServletResponse](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html#encodeURL%28java.lang.String%29)的 JDK API 。

# java - Getting started with Java

> ID：13355126
> 
> 赞同：0
> 
> 时间：2012-11-13T03:19:03.477
> 
> 标签：java, main

I'm a C++ programmer learning Java, and I'm having a couple of logistical issues. I was able to recreate the standard "Hello, world!", but now I need to implement a class (well, besides the fact the the Hello program is in a class, too...Java is weird) and test it.

I defined a small class called Node with a couple of integer fields and a simple member function (in Node.java), so my silly question is, "How do I create a place to try it out in another file?" (It's remarkable how so many sources seem to assume that you know these little details)

I'm assuming I'll need a Main.java, with a class Main inside it...plus a "public static void Main(.." method. But how do I access this node class, which is in the same directory? Java doesn't seem to have "#include" ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:24:43.030

If the `Node` class and `Main` class exist within the same package, then you don't need to specify an `import` for the class. All classes in the same package are automatically included (more or less).

```
public class Main {
    public static void main(String args[]) {
        Node node = new Node();
    }
} 
```

If the `Node` or `Main` are in different packages, then you need to use `import`.

So, if `Node` was in `awesome.node` package, you're code would look more like...

```
import awesome.node.Node;

public class Main {
    public static void main(String args[]) {
        Node node = new Node();
    }
} 
```

I'd take a closer look at the [Packages trail](http://docs.oracle.com/javase/tutorial/java/package/index.html)

# java - 如何在 Java 中更正此类扩展？

> ID：13355128
> 
> 赞同：0
> 
> 时间：2012-11-13T03:19:21.867
> 
> 标签：java, class

我正在尝试制作具有一个带有一个字段的 Person 类的程序：名称（字符串）以及访问器和修改器。然后制作第二个学生类（扩展个人类）-一个字段：id和id的访问器和修改器。然后对其进行测试，创建一个对象并分配名称和 ID 并打印出结果。

这是我到目前为止所拥有的：

人物类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package person;

/**
 *
 * @author Administrator
 */
public class Person {

    /**
     * @param args the command line arguments
     */

    private String name;

    public void setName(String n)
    {
        name = n;
    }

    public String getName(String n)
    {
        return name;
    }
} 
```

学生类//我认为这是带有扩展名的类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package person;

public class Student extends Person {

    public int idNumber;

    Student(String name, int idNumber) {

    }

    public void setID(int id)
    {
        idNumber = id;
    }

    public int getID(int id)
    {
        return idNumber;
    }

} 
```

然后是测试结果的主类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package person;

import java.util.Scanner;

/**
 *
 * @author Administrator
 */
public class MainStudentID {

    public static void main(String[] args)
    {
        Scanner keyboard = new Scanner(System.in);

        System.out.println("Enter Students name: ");
        String name = keyboard.nextLine();

        System.out.println("Enter Students ID Number:");
        int idNumber = keyboard.nextInt();

        Student Student = new Student(name, idNumber);

        System.out.println("Your name is: " + Student.person.getName());
        System.out.println("Your id Number is: " + Student.Student.getID());

    }

} 
```

我不确定我做错了什么，我为我的糟糕代码道歉，这是第一次学习类扩展的主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:30:04.200

我会在你`Person`的类上创建一个使用名称的构造函数......

```
public class Person {
    //...
    public Person(String name) {
        setName(name);
    }
    //...
} 
```

这将强制您在`Person`创建时提供名称`Student`

```
public class Student extends Person {
    //...
    public Student(String name, int idNumber) {
        super(name);
        setID(idNumber);
    }
    //...
} 
```

请注意，我可能还会创建一个人员和学生界面，以提供实现所需的基本功能，但这对于这个问题来说可能是多余的

正如已经开始指出的那样，您的吸气剂不需要参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:25:49.590

你的评论描述

```
person.MainStudentID.main(MainStudentID.java:29) 
```

这意味着您有另一个课程以某种方式参与了这一课程。此错误不是来自您示例中的代码！

您有一个名为`MainStudentID.java`的类正在被访问并导致此错误。

我的猜测是，当您说 时`extends Person`，您已经在示例代码中导入了`MainStudentID`类而不是类。

确保文件顶部的包导入地址是您想要的。

* * *

*其他问题*

乍一看一切正常，只是您没有为新的`Student`.

获得输入后调用`setID`and方法，事情应该会更好。`setName`

另一种选择是初始化它们（在声明它们时将它们设置为正确的值），您会看到它们尚未更改。

此外，正如@Bernard 指出的那样，在您的`getXXX`方法中，您不需要参数 - 它们的唯一目的是返回一个字段。它们不适用于任何其他信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T03:27:42.343

您需要在 Student 构造函数中设置 name 和 id 的值。您没有存储它们，这就是为什么您在尝试打印时没有得到结果的原因。

您还需要摆脱 get 方法中的参数。

人物类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package person;

/**
 *
 * @author Administrator
 */
public class Person {

    /**
     * @param args the command line arguments
     */

    private String name;

    public Person(String n)
    {
        name = n;
    }

    public void setName(String n)
    {
        name = n;
    }

    public String getName()
    {
        return name;
    }
} 
```

学生班

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package person;

public class Student extends Person {

    public int idNumber;

    Student(String name, int idNumber) {
        super(name);
        this.idNumber = idNumber;
    }

    public void setID(int id)
    {
        idNumber = id;
    }

    public int getID()
    {
        return idNumber;
    }

} 
```

# html - 添加无序列表

> ID：13355136
> 
> 赞同：0
> 
> 时间：2012-11-13T03:20:45.267
> 
> 标签：html, webpage, unordered

我基本上是将页面链接移动到网站的左侧，我希望它们采用无序列表形式，我只是不明白在哪里放置`<ul> <li>`

尝试将无序列表添加到：

```
<div id="left">
    <b><a href="index.html">Home</a>
    <a href="listing.html">Listing</a>
    <a href="financing.html">Financing</a>
    <a href="contact.html">Contact</a>
    </b>
</div> 
```

完整代码：

```
<!DOCTYPE html>
<html lang="en">

<head>
   <title>Prime Properties</title>
   <meta charset="utf-8">
   <link rel="stylesheet" href="prime.css" />

</head>

<body>
<div id="wrapper">
<h1><img alt="PRIMELOGO" src="primelogo.gif" width="650" height="100" /></h1>
<p>Prime Properties is prepared to market and sell your property.<br /><br />The philosophy of Prime Properties is to promote our clients, not ourselves.<br /><br />We can also help you find the property that meets your needs:</p>
<ul>
<li>location</li>
<li>price</li>
<li>features</li>
</ul>
<div id="contact"><b>Prime Properties<br />3055 Bode Road<br />Schaumburg, IL 60194<br /><br />847-555-5555</b></div>
&nbsp;
<div id="footer">
<div id="left"><b><a href="index.html">Home</a> <a href="listing.html">Listing</a> <a href="financing.html">Financing</a> <a href="contact.html">Contact</a></b></div>
<p></p>
<p></p>
<p></p>
<p></p>
<p>&copy; Copyright "xxxxx" xxxxxxx 2012<br /> <a href="mailto:xxxxxxx@gmail.com">xxxxxxxx@gmail.com</a></p>
</div>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:28:27.707

我认为你想要这样的东西，如这个[jsFiddle所示](http://jsfiddle.net/Wt4Js/)

```
<style>
    div#left ul{list-style:none;font-weight:bold;}
    div#left ul li{display:inline-block;}
</style>

<div id="left">
    <ul>
        <li>
            <a href="index.html">Home</a>
        </li>
        <li>
            <a href="listing.html">Listing</a>
        </li>
        <li>
            <a href="financing.html">Financing</a>
        </li>
        <li>
            <a href="contact.html">Contact</a>
        </li>
    </ul>
</div> 
```

# php - PHP Jade 模板解析器

> ID：13355137
> 
> 赞同：9
> 
> 时间：2012-11-13T03:20:48.383
> 
> 标签：php, template-engine, pug

我正在寻找 NodeJS 中使用的 Jade 模板引擎的 PHP 实现。我最近尝试过[Jade.php](https://github.com/everzet/jade.php)，但它不完整，因为它不支持继承或部分。我也见过[PHPNativeJadeRenderer](https://github.com/superjimpupcake/PHPNativeJadeRenderer)，但它依赖于`shell_exec`通过 npm Jade 模块解析模板文件，我对使用该方法并不完全满意。

有人知道[Jade 模板引擎](http://jade-lang.com)的完整 PHP OOP 端口吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-25T13:25:23.143

*更新（03.12.2015）：*

似乎 Tale Jade 似乎是 Jade 与 PHP 最完整和最积极的集成。

[https://github.com/Talesoft/tale-jade](https://github.com/Talesoft/tale-jade)

*就像更新一样：*

看来，这个分叉：[https](https://github.com/SC7639/jade.php) ://github.com/SC7639/jade.php具有最多的功能和几乎最新的活动。（2016 年 5 月）

GitHub上的jade.php [fork/commit 活动图表。](https://github.com/everzet/jade.php/network)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T21:03:35.230

可用于 PHP 的最新 Jade 解析器之一是：

*   [https://packagist.org/packages/kylekatarnls/jade-php](https://packagist.org/packages/kylekatarnls/jade-php)
*   [https://github.com/kylekatarnls/jade-php](https://github.com/kylekatarnls/jade-php)

几年前我最初推荐了[https://github.com/everzet/jade.php](https://github.com/everzet/jade.php)，效果很好，虽然几年没更新了。

# ios - Restkit - 无法使用 RKDotNetDateFormatter 设置首选输出日期格式化程序

> ID：13355138
> 
> 赞同：1
> 
> 时间：2012-11-13T03:20:57.027
> 
> 标签：ios, web-services, restkit, date-parsing

我遵循[Restkit wiki](https://github.com/RestKit/RestKit/wiki/Configuring-Date-and-Time-Mapping)并成功将 ASP.NET 日期解析为 NSDate。但是我无法设置默认输出，无论我做什么，它仍然输出为以下格式：“2010-01-27 00:00:00 +0000”。

这是我尝试的

```
 [RKObjectMapping addDefaultDateFormatter:[RKDotNetDateFormatter dotNetDateFormatter]];

    NSDateFormatter *dateFormatter = [NSDateFormatter new];
    [dateFormatter setDateFormat:@"yyyy-MM-dd"];
    // Set it Globally
    [RKObjectMapping setPreferredDateFormatter:dateFormatter]; 
```

如果您有任何想法，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T03:31:58.747

我遇到了同样的问题，并将其追踪到 RKObjectMapping.m 中的一个 initialize() 方法，它在列表顶部插入了一个 RKISO8601DateFormatter。一旦我注释掉那行，我的自定义日期格式化程序就被使用了。

[https://github.com/RestKit/RestKit/blob/development/Code/ObjectMapping/RKObjectMapping.m#L140](https://github.com/RestKit/RestKit/blob/development/Code/ObjectMapping/RKObjectMapping.m#L140)

我用 RestKit 打开了一个缺陷，但我可能会遗漏一些东西。 [https://github.com/RestKit/RestKit/issues/1753](https://github.com/RestKit/RestKit/issues/1753)

希望这对您有所帮助。

# c# - 在我的用户控件中找不到 GotFocus()/LostFocus()

> ID：13355140
> 
> 赞同：6
> 
> 时间：2012-11-13T03:21:01.970
> 
> 标签：c#, winforms, user-controls

我创建了一个 WinForms 用户控件。我阅读了一些关于事件的地方`GotFocus()`，`LostFocus()`但我的用户控件没有在“属性”窗口的“事件”部分提供这些事件。

我什至尝试输入`override`以查看这些事件处理程序是否会出现，但它们不会。我在任何地方都找不到它们。

因此，我使用这些名称创建了自己的方法，然后出现以下错误：

> 警告 1 'mynamespace.mycontrol.GotFocus()' 隐藏了继承的成员 'System.Windows.Forms.Control.GotFocus'。如果打算隐藏，请使用 new 关键字。

这到底是怎么回事。如果`GotFocus()`已经存在，为什么我找不到并使用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T04:04:08.763

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.gotfocus.aspx)看来，它们是从 Control 继承的，但不鼓励使用。他们希望您使用 Enter 和 Leave 事件。

> 注意 GotFocus 和 LostFocus 事件是绑定到 WM_KILLFOCUS 和 WM_SETFOCUS Windows 消息的低级焦点事件。通常，GotFocus 和 LostFocus 事件仅在更新 UICues 或编写自定义控件时使用。相反，Enter 和 Leave 事件应用于除 Form 类之外的所有控件，Form 类使用 Activated 和 Deactivate 事件。

也就是说，您可以按照 User1718294 建议的 += 访问它们，或者您可以覆盖`OnGotFocus`and`OnLostFocus`事件。

```
protected override void OnLostFocus(EventArgs e)
{
    base.OnLostFocus(e);
}

protected override void OnGotFocus(EventArgs e)
{
    base.OnGotFocus(e);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T03:26:21.533

GotFocus 是一个已经存在的事件。您要做的是创建一个名为“GotFocus”的方法，因为已经存在同名的事件，所以您无法使用该名称创建方法。

为了“使用”一个事件，您必须向它注册一个函数，如下所示：

```
mycontrol.GotFocus += mycontrol_GotFocus; 
```

现在只需添加此方法来处理事件：

```
private void mycontrol_GotFocus(object sender, EventArgs e)
{
   MessageBox.Show("Got focus.");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:10:29.780

当您从一个类继承并且您不确定它包含哪些方法/属性时，您可以简单地查看基础对象

输入“基地”。在方法主体内，自动完成将向您显示基本方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-27T08:05:41.900

使用 Visual Studio 2010

获得焦点时使用**Activated**事件，失去焦点时使用**Deactivate事件。**这是以下示例代码，它在获得焦点时更改表单名称。（文件名是 Form1 类的字符串成员，它扩展了 Form 类）

```
private void Form1_Activated(object sender, EventArgs e)
    {
        if (fileName == "Untitled")
            this.Text = fileName + "- Text Editor";
        else this.Text = fileName + "- Text Editor";
    } 
```

# javascript - jquery animate 没有按预期工作

> ID：13355143
> 
> 赞同：0
> 
> 时间：2012-11-13T03:21:43.957
> 
> 标签：javascript, jquery

第一次点击这个红色 div 时，它会从页面顶部一直动画；我希望它只会下降 50 像素（实际上*在*随后的点击中也是如此。这里出了什么问题？

我以前没有真正使用`animate`过。我需要以某种方式指定起点吗？

谢谢

```
$(document).ready(function() {
    $('.obscure').on('click', function() {

        var blueDiv = $('.blue').clone();

        blueDiv.css({'display': 'none', 'z-index': '0', 'top' : y, 'position' : 'absolute'});

        $('#wrapper').append(blueDiv);
        var obscure = $('.obscure');
        var offset = obscure.offset();
        var y = offset.top;
        blueDiv.css('top', y);
        blueDiv.show();

        //$('.obscure').css('z-index', 10000);
        var off = parseInt(y) + 50;
        console.log(y);
        $('.obscure').animate({
            top : y + 50
        }, 100);

    });
});​ 
```

[http://jsfiddle.net/loren_hibbard/U7tAV/2/](http://jsfiddle.net/loren_hibbard/U7tAV/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:34:56.897

在 Firefox 中似乎不会发生，但在 Chrome 中会发生。

**修复：http:** [//jsfiddle.net/U7tAV/10/](http://jsfiddle.net/U7tAV/10/)

我只是改变了：

```
 $('.obscure').animate({
        top : y + 50
    }, 100); 
```

`top`在动画之前应用位置`.css('top', y)`：

```
 $('.obscure').css('top', y).animate({
        top : y + 50
    }, 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:41:10.457

您需要设置模糊的位置。如果你放慢动画速度，你会看到它到达顶部，然后动画到它应该在的位置。我添加了

```
obscure.css('top',offset.top); 
```

它奏效了

```
$(document).ready(function() {
    $('.obscure').on('click', function() {

        var blueDiv = $('.blue').clone();

        blueDiv.css({'display': 'none', 'z-index': '0', 'top' : y, 'position' : 'absolute'});

        $('#wrapper').append(blueDiv);
        var obscure = $('.obscure');
        var offset = obscure.offset();
        var y = offset.top;
        blueDiv.css('top', y);
        blueDiv.show();
        obscure.css('top',offset.top); // ADDED THIS

        //$('.obscure').css('z-index', 10000);
        var off = parseInt(y) + 50;
        console.log(y);
        $('.obscure').animate({
            top : y + 50
        }, 100);

    });
});​ 
```

不完全确定，但它确实有效。[http://jsfiddle.net/U7tAV/13/](http://jsfiddle.net/U7tAV/13/)

# iphone - 仅基于 iOS 设备的服务器-客户端

> ID：13355145
> 
> 赞同：1
> 
> 时间：2012-11-13T03:22:15.637
> 
> 标签：iphone, objective-c

我想使用套接字通过 wifi 在 iOS 设备之间进行通信。有一个 iOS 设备扮演服务器角色（打开监听套接字等待另一个）。其他设备将成为客户端并使用它们的套接字连接到服务器 iOS 设备。我不允许通过任何 Web 服务器进行通信，仅在这些 iOS 设备之间。

是否有任何简单的解决方案，可以简要告诉我我可以使用什么。如果只使用Objective C，那就更好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:08:55.103

也许你应该使用 GameKit 框架。

有一个类似的问题： [Client/Server GKSessions](https://stackoverflow.com/questions/4194394/client-server-gksessions)

您还可以查看官方文档：http: [//developer.apple.com/library/ios/#documentation/GameKit/Reference/GKSession_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKSession_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:53:42.550

请搜索 Bonjour、NSNetService 和 NSNetServiceBrowser。

# c++ - 子函数调用父函数

> ID：13355146
> 
> 赞同：-2
> 
> 时间：2012-11-13T03:22:15.680
> 
> 标签：c++

我在尝试让子功能工作时遇到困难：

### .h 文件

```
class Parent {
    int id;
    public:
        virtual int getid();
} 

class Child : public Parent {
    int id;
    public:
        int getid();
} 
```

### .cc 文件

```
Parent::Parent( int num ) {
    id = num;
}

int Parent::getid() {
    cout << "Parent!"; 
    return id;
}

Child::Child( int num ) : Parent(num) {
    id = num;
}

int Child::getid() {
    cout << "Child!";
    return id;
} 
```

当我`Child kid = Child(0);`拨打电话`kid.getid();`时，我会得到`Parent!`而不是`Child!`。

我的实施有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:40:25.900

我没有看到您的问题，只需最低限度的修复，它就会打印出来`Child!`

[http://ideone.com/zR3wTm](http://ideone.com/zR3wTm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:42:04.870

您的代码中有很多语法错误。我什至无法编译它。在这里，它通过一些注释来修复。这段代码实际上输出“孩子！”

```
#include <iostream>

class Parent {
    protected:
        //Don't redeclare id in child -- have it protected if you want child
        //to have access to it.
        int id;
    public:
        //The constructor must be delcared the same way as other member functions
        Parent(int num);
        virtual int getid();
};

class Child : public Parent {
    public:
        //Once again, the constructor must be declared
        Child(int num);
        int getid();
};

//Initializer lists should be used when possible
Parent::Parent( int num ) : id(num) {
    //id = num;
}

int Parent::getid() {
    std::cout << "Parent!"; 
    return id;
}

//Just call the Parent constructor -- no need to assign inside of the child constructor
Child::Child( int num ) : Parent(num)
{ }

int Child::getid() {
    std::cout << "Child!";
    return id;
}

int main(int argc, char** argv)
{

    Child kid(5);
    std::cout << kid.getid() << std::endl;

    return 0;

} 
```

# r - 使用 R 导入杂乱的数据

> ID：13355148
> 
> 赞同：6
> 
> 时间：2012-11-13T03:22:46.210
> 
> 标签：r

有人知道以适当的形式将以下数据导入 R 吗？我尝试将 strsplit 函数设置为： `test <- strsplit(test,"[[:space:]]+")`其中 test 是文件的名称，包括以下杂乱的数据。不知何故，我最终只得到了一个字符变量。我想以适当的形式有八个不同的变量。请你帮助我好吗？

```
Black Eagles    01/12 - 12/11   1500 W  7.0 420 48  Away +3
Blue State  02/18 - 04/21   1293 L  8.0 490 48  Home +1
Hawks   01/13 - 02/17   1028 L  4.0 46  460 Away
New Apple   09/23 - 11/23   563 L   3.0 470 47  Home +2
Black White 07/05 - 09/26   713 L   5.2 500 45  Home +4
PBO 10/24 - 10/30   1495 L  1.9 47  410 Away 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T05:06:49.893

**这怎么样？**

```
> nicelyFormatted
     [,1]           [,2]    [,3]    [,4]   [,5] [,6]  [,7]  [,8]  [,9]   [,10]
[1,] "Black Eagles" "01/12" "12/11" "1500" "W"  "7.0" "420" "48"  "Away" "+3" 
[2,] "Blue State"   "02/18" "04/21" "1293" "L"  "8.0" "490" "48"  "Home" "+1" 
[3,] "Hawks"        "01/13" "02/17" "1028" "L"  "4.0" "46"  "460" "Away" NA   
[4,] "New Apple"    "09/23" "11/23" "563"  "L"  "3.0" "470" "47"  "Home" "+2" 
[5,] "Black White"  "07/05" "09/26" "713"  "L"  "5.2" "500" "45"  "Home" "+4" 
[6,] "PBO"          "10/24" "10/30" "1495" "L"  "1.9" "47"  "410" "Away" NA 
```

* * *

这是用于获取上表的代码：

```
library(stringr)

# Open Connection to file
pathToFile <- path.expand("~/path/to/file/myfile.txt")
f <- file(pathToFile, "rb")  

# Read in lines
rawText <- readLines(f)

# Find the dahses
dsh <- str_locate_all(rawText, " - ")

# Splice, using the dashes as a guide
lng <- length(rawText)
spliced <- sapply(1:lng, function(i) 
  spliceOnDash(rawText[[i]], dsh[[c(i, 1)]], dsh[[c(i, 2)]])
)

# make it purtty
nicelyFormatted <- formatNicely(spliced)
nicelyFormatted

#-------------------#
#    FUNCTIONS      #
#-------------------#

spliceOnDash <- function(strn, start, end)  {

  # split around the date
  pre <- substr(strn, 1, start-6)
  dates <- substr(strn, start-5, end+5)
  post <- substr(strn, end+6, str_length(strn))

  # Clean up
  pre <- str_trim(pre)

  # replace all double spaces with single spaces
  while(str_detect(post, "  ")) {
    post <- str_replace_all(str_trim(post), "  ", " ")    
  }

  # splice on space
  post <- str_split(post, " ")

  # if dates are one field, remove this next line
  dates <- str_split(dates, " - ")

  # return
  c(unlist(pre), unlist(dates), unlist(post))
}

# Function to clean up the list into a nice table
formatNicely <- function(spliced)  {
  lngst <- max(sapply(spliced, length))
  t(sapply(spliced, function(x)  
      if(length(x) < lngst) c(x, rep(NA, lngst-length(x))) else x ))
} 
```

# c# - 我可以创建一个“全局”对象来存储多个对象的变量吗？

> ID：13355150
> 
> 赞同：2
> 
> 时间：2012-11-13T03:23:26.457
> 
> 标签：c#, inheritance, persistent

我正在创建一个将显示多个图形的图形应用程序。这些图表需要访问一些全局数据和一些特定于图表的数据。例如，我希望颜色一致，所以这将是全局的，但特定的图表可以有不同的网格间距（每个图表）。

我创建了一个具有设置默认值的“主对象”和一个具有每个图形配置选项的派生对象

```
class GraphMasterObject {
  public Color gridcolor = Color.Red;
}

class GraphObject : GraphMasterObject {
  public int gridSpacing = 10;
} 
```

现在，根据我的理解，我应该能够做到这一点

```
GraphObject go = new GraphObject();
Color c = go.gridColor; 
```

我怎样才能做到这一点，如果我更改 go.gridColor，它将在从 GraphMasterObject 继承的所有对象中更改？这甚至可能吗？如果不是，还有哪些其他可能的解决方案？就像是

```
GraphMasterObject gmo = new GraphMasterObject();
gmo.gridColor = Color.Blue; 
```

或者

```
GraphObject go = new GraphObject();
go.gridColor = Color.Blue; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:38:06.080

为什么要使用继承？为什么不只将一个 GlobalGraphSettings 对象传递给所有 Graph 对象，然后您就可以这样做

```
MyColor = Graph.GlobalSettings.Color; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T03:24:58.060

在多个对象之间共享单个对象实例的一种常见方法是单例模式。

[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

使用单例模式，任何对象都可以请求单例对象，并且将返回与请求单例对象的任何其他对象相同的单例对象实例。

在您的情况下，这似乎是一个很好的解决方案。

C# 中实现此模式的一种方法是使用*静态*属性，例如：

```
public class MySingleton
{
    static private MySingleton singleton = null;

    private static readonly object padlock = new object();

    static public MySingleton Retrieve
    {
        get
        {
            lock (padlock)
            {
                if (singleton == null) singleton = new MySingleton(); // Initialize as needed
            }
            return singleton;
        }
    }
} 
```

用法

```
MySingleton singleton = MySingleton.Retrieve; 
```

**更新**

这是一个优于上述实现的实现，来自@Marksl 提供的文章

```
public sealed class Singleton
{
    private static readonly Lazy<Singleton> lazy =
        new Lazy<Singleton>(() => new Singleton());

    public static Singleton Instance { get { return lazy.Value; } }

    private Singleton()
    {
    }
} 
```

# php - mkdir() php 函数问题

> ID：13355157
> 
> 赞同：2
> 
> 时间：2012-11-13T03:24:44.010
> 
> 标签：php, html, directory

索引.php

```
<html>
    <body>
        <form action="createfolder.php" method="post" >
        <table width="400" border="0" cellspacing="0" cellpadding="5">
          <tr>
            <td colspan="3" align="center">Please write gallery name and description</td>
          </tr>
          <tr>
            <td>Name </td>
            <td>&nbsp;</td>
            <td><input type="text" name="gname" id="text" value=""></td>
          </tr>
          <tr>
            <td>Description</td>
            <td>&nbsp;</td>
            <td><textarea name="gdescription" cols="30" rows="5" id="textarea"></textarea></td>
          </tr>
          <tr>
            <td colspan="3" align="center"><input type="submit" name="submit" id="submit" value="Submit"></td>
          </tr>
        </table>
        </form>
    </body>
</html> 
```

创建文件夹.php

```
 <?php

$name = $_POST['gname'];
$dirPath = "images/".$name;
$result = mkdir($dirPath, 0755);
if ($result == 1) {
    echo $dirPath . " has been created";
} else {
    echo $dirPath . " has NOT been created";
}
?> 
```

制作目录时遇到问题。错误： ![这是错误](../Images/d3f891ebf8f589d2924c31321fe1a95f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:26:14.627

这是因为目录用户中没有文件

`file_exists`— 检查文件或目录是否存在并且

`is_dir`— 判断文件名是否为目录

```
 if (is_dir("path") === true ){
                echo "DIRECTORY: ".$entry."\n";
            } 
```

或者

```
$filename = '/path/foo.txt';

if (file_exists($filename)) {
    echo "The file $filename exists";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:27:31.613

`mkdir( $dirPath, 0755, true );`

第三个参数也将递归地创建包含目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:30:55.013

`mkdir()`有第三个参数 ，`$recursive`它将确保完整路径存在。替换这个：

```
$result = mkdir($dirPath, 0755); 
```

和：

```
$result = mkdir($dirPath, 0755, true); 
```

它应该工作得很好。

# c++ - g++找不到boost头文件

> ID：13355162
> 
> 赞同：1
> 
> 时间：2012-11-13T03:25:24.733
> 
> 标签：c++, boost, compiler-errors

我刚刚安装了 Boost 1.52.0，我正在尝试使用 Boost 日志库（我相信它现在已集成到 Boost 中）。

我正在使用该`/boost/log/trivial.hpp`文件，并且正在尝试按照[此处](http://boost-log.sourceforge.net/libs/log/doc/html/log/tutorial.html#log.tutorial.trivial)所述记录消息。但是，编译器找不到头文件，并给我以下错误：

```
error: boost/log/trivial.hpp: No such file or directory 
```

这是在我修改编译器和链接器包含路径之后。

我的编译命令如下：

```
g++ -O2 -I/Users/bar/Downloads/boost_1_52_0 -L/Users/bar/Downloads/boost_1_52_0/stage/lib foo.cpp 
```

关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:37:17.330

> 我刚刚安装了 Boost 1.52.0，我正在尝试使用 Boost 日志库（我相信它现在已集成到 Boost 中）。

不，它还没有被集成到 boost 中。您可以[从这里](http://sourceforge.net/projects/boost-log/)下载并构建它。Boost 1.52 不包含任何新的库，它是对错误修复等的更新。

此外，您将需要链接`boost_log`和`boost_system`（也许还有其他人）。

# python - C程序中mruby和embedding Python的区别

> ID：13355163
> 
> 赞同：2
> 
> 时间：2012-11-13T03:25:32.010
> 
> 标签：python, ruby, mruby

在 mruby 中，我们可以将 ruby​​ 代码嵌入到 C 程序中。

我们也可以在 Python 中做到这一点。

这两者的原理有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:12:15.777

两者有相似之处，也有不同之处。

mruby 的目标有两个：

1.  使将*Ruby 编译为 C*成为可能（或者，从另一个方向来看，将 Ruby 代码嵌入到 C 程序中）。
2.  使*在移动平台上运行这个编译的 Ruby 代码成为可能。*

第一个特征，也就是您要问的，与 Python、Lua 和其他脚本语言有共同之处。

第二个特性类似于 Lua（可以通过 Corona SDK 在 iOS 和 Android 上运行）。其中包括[MobiRuby](http://mobiruby.org/)，它使用 mruby 创建一个 iOS 项目，您可以使用它来编写 Ruby 代码和制作 iOS 应用程序。（他们的计划也是采用 Android。）

这还不是 Python 正在做的事情。AFAIK、Python（和 Ruby）可以使用 SL4A 在 Android 上运行。这与编译为 C 并作为更大程序的嵌入式部分运行不同。

# twitter - Twitter Bootstrap 关闭模式

> ID：13355164
> 
> 赞同：0
> 
> 时间：2012-11-13T03:25:40.197
> 
> 标签：twitter, twitter-bootstrap

我正在使用 Twitter Bootstrap 制作一个使用按钮打开模式的项目。如果您单击打开它的同一个按钮，每个模式都会关闭。如果您按 Escape 或单击背景，模式也会关闭。但是，如果您单击按钮打开一个模态，然后单击另一个模态的按钮，则代码会打开两个模态。如果任何模式打开，我希望它在您单击页面上的任何其他位置时关闭，包括任何其他按钮。不过，我真的迷失了 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T06:55:10.263

您的问题似乎含糊不清，因此我将尝试触及大部分要点，以便您的问题得到解答。

如果您希望[模态](http://getbootstrap.com/2.3.2/javascript.html#modals)不应该在按 esc 或单击其他位置时关闭，那么试试这个....

```
 <a data-controls-modal="your_div_id" data-backdrop="static"
 data-keyboard="false" href="#"> 
```

显示一个模态。在 javascript 函数中使用它：

```
 $('#myModal').modal('show') 
```

要隐藏模式，请使用以下命令：

```
$('#myModal').modal('hide') 
```

要切换模式，请使用：

```
 $('#myModal').modal('toggle') 
```

根据您的需要使用这些，当您需要时隐藏一个模态可能是一个按钮单击。

我认为这足以满足您的任何需求。

如果有什么你无法得到的东西，请发表评论。

干杯！！！

# find - cakephp 2.1 在虚拟场上调节时找不到（）

> ID：13355168
> 
> 赞同：0
> 
> 时间：2012-11-13T03:26:05.687
> 
> 标签：find, cakephp-2.1

我在 find() 中的 $condition 无法使用虚拟字段。

我的 Employee 模型上有这个虚拟字段：

```
 var $virtualFields = array(
            'AgentFullName' => "CONCAT(Employee.id, ' ', Employee.emp_ape_pat, ' ', Employee.emp_ape_mat, ' ', Employee.name)"
        ); 
```

我正在使用此条件查看两个字段，一个常规字段，一个虚拟字段（

```
 $idconditions = array(
            'OR' => array(
                'Employee.id LIKE' => $this->passedArgs['valsearch'],
                'Employee.AgentFullName LIKE' => $this->passedArgs['valsearch']
                )); 
```

查找可在虚拟字段上找到的有效文本时，我的查找未返回任何记录：

```
 $theid = $this->Horario->Employee->find('first', array(
            'fields' => array('Employee.emp_appserial', 'Employee.AgentFullName'),
            'conditions' => $idconditions,
                )); 
```

但是， sql_dump 似乎是正确的：

当 find() 查找 id 号时：

```
SELECT `Employee`.`emp_appserial`, (CONCAT(`Employee`.`id`, ' ', `Employee`.`emp_ape_pat`, ' ', `Employee`.`emp_ape_mat`, ' ', `Employee`.`name`)) AS `Employee__AgentFullName` FROM `devopm0_5`.`employees` AS `Employee` WHERE ((`Employee`.`id` LIKE 1005) OR ((CONCAT(`Employee`.`id`, ' ', `Employee`.`emp_ape_pat`, ' ', `Employee`.`emp_ape_mat`, ' ', `Employee`.`name`)) LIKE '1005')) LIMIT 1 
```

并且 find() 使用姓氏（不返回任何记录）

```
SELECT `Employee`.`emp_appserial`, (CONCAT(`Employee`.`id`, ' ', `Employee`.`emp_ape_pat`, ' ', `Employee`.`emp_ape_mat`, ' ', `Employee`.`name`)) AS `Employee__AgentFullName` FROM `devopm0_5`.`employees` AS `Employee` WHERE ((`Employee`.`id` LIKE 'SMITH') OR ((CONCAT(`Employee`.`id`, ' ', `Employee`.`emp_ape_pat`, ' ', `Employee`.`emp_ape_mat`, ' ', `Employee`.`name`)) LIKE 'SMITH')) LIMIT 1 
```

我想知道为什么虚拟场不能被搜索。

你能帮我吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:43:31.667

You cannot use VirtualFields as SQL Conditions. The virtual fields are added to the results after the find is performed, and this is why you cannot condition on them. [The Cookbook says](http://book.cakephp.org/2.0/en/models/virtual-fields.html):

> These fields cannot be saved, but will be treated like other model fields for read operations. They will be indexed under the model’s key alongside other model fields.

# oracle - 创建触发器以插入另一个表

> ID：13355171
> 
> 赞同：0
> 
> 时间：2012-11-13T03:26:15.613
> 
> 标签：oracle, plsql, triggers

我在执行下面的触发器时遇到了一些问题：

```
CREATE OR REPLACE TRIGGER AFTERINSERTCREATEBILL
AFTER INSERT
ON READING
FOR EACH ROW 

DECLARE

varReadNo   Int;
varMeterID  Int;
varCustID   Varchar(10);

BEGIN 

SELECT SeqReadNo.CurrVal INTO varReadNo FROM DUAL;

Select MeterID INTO varMeterID
From Reading 
Where ReadNo = varReadNo;

Select CustID INTO varCustID
From Address A
Join Meter M 
on A.postCode = M.postCode
Where M.MeterID = varMeterID;

INSERT INTO BILL VALUES 
(SEQBILLNO.NEXTVAL, SYSDATE, 'UNPAID' , 100 , varCustID , SEQREADNO.CURRVAL); 

END; 
```

**错误信息：**

*原因：触发器（或此语句中引用的用户定义的 plsql 函数）试图查看（或修改）正在被触发它的语句修改的表。

*操作：重写触发器（或函数），使其不读取该表。

这是否意味着我不应该从表格阅读中检索任何详细信息？

我相信当我在插入值时从表读取中检索数据时会出现问题：

```
SELECT SeqReadNo.CurrVal INTO varReadNo FROM DUAL;

Select MeterID INTO varMeterID
From Reading 
Where ReadNo = varReadNo; 
```

反正有办法解决这个吗？还是有更好的方法来做到这一点？进入表 Reading 后，我需要在表 BILL 中插入一个新行，其中 ReadNo 需要引用我刚刚插入的 ReadNo。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:11:18.670

您不能在行触发器中从同一个表中检索记录。您可以使用 :new 和 :old 访问实际记录中的值（这是您的情况吗？）。然后可以将触发器重写为

```
CREATE OR REPLACE TRIGGER AFTERINSERTCREATEBILL
AFTER INSERT
ON READING
FOR EACH ROW 

DECLARE

  varCustID   Varchar(10);

BEGIN 

  Select CustID INTO varCustID
    From Address A
    Join Meter M 
      on A.postCode = M.postCode
    Where M.MeterID = :new.MeterID;

  INSERT INTO BILL VALUES 
  (SEQBILLNO.NEXTVAL, SYSDATE, 'UNPAID' , 100 , varCustID , SEQREADNO.CURRVAL); 

END; 
```

如果您需要从 READING 表中查询其他记录，则必须使用语句触发器、行触发器和 PLSQL 集合的组合。[AskTom.oracle.com](http://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551198119097816936)就是一个很好的例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:32:20.290

在您的触发器中添加异常处理并查看发生了什么，这样您就可以轻松跟踪异常。

```
CREATE OR REPLACE TRIGGER AFTERINSERTCREATEBILL
AFTER INSERT
ON READING
FOR EACH ROW 

DECLARE

  varCustID   Varchar(10);

BEGIN 

  -- your code

EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        DBMS_OUTPUT.PUT_LINE(TO_CHAR(SQLERRM(-20299)));
    WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE(TO_CHAR(SQLERRM(-20298)));

END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:39:36.543

确保您对所有表具有必要的权限，并且可以访问您在插入中使用的序列。

我有一段时间没有做过 Oracle，但您也可以尝试查询 dba_errors（或 all_errors），以尝试获取有关您的 SP 未编译的原因的更多信息。

适合的东西：

```
SELECT * FROM dba_errors WHERE owner = 'THEOWNER_OF_YOUR_SP'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-23T11:05:01.517

我们可以结合插入和选择语句

```
CREATE OR REPLACE TRIGGER AFTERINSERTCREATEBILL
AFTER INSERT
ON READING
FOR EACH ROW 

DECLARE

varCustID   Varchar(10);

BEGIN 

 insert into bill 
 values 
 select SEQBILLNO.NEXTVAL, 
        SYSDATE, 
        'UNPAID' , 
        100 ,
        CustID,SEQREADNO.CURRVAL 
 From  Address A
 Join  Meter M 
 on    A.postCode = M.postCode
 Where M.MeterID = :new.MeterID; 

END; 
```

试试上面的代码。

# python - Python 中的刽子手

> ID：13355175
> 
> 赞同：-4
> 
> 时间：2012-11-13T03:26:49.653
> 
> 标签：python, while-loop

当我运行代码时，它不会用字母替换破折号，而是将其添加到现有的破折号上。有谁知道如何解决这一问题？

谢谢。

```
a = 0
new = ""
while a < limit:
  for i in range(len(formula2)):
    if (formula2[i] == partial_fmla[i]):
      new[i] = new + partial_fmla[i]
    elif (formula2[i] == guess):
      new[i] = guess
    else:
      new = new + "-" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:31:40.513

发布一些额外的代码可能会有所帮助，但在查看您的代码之后，我认为这行有一个错误：

```
new = new + "-" 
```

您将 dash( `-`) 添加到 new 中，这意味着您不会在此处替换任何内容，而是将额外的 dash( `-`) 添加到 new 中。

# r - 底部的渐变图例

> ID：13355176
> 
> 赞同：31
> 
> 时间：2012-11-13T03:26:56.290
> 
> 标签：r, plot

早些时候我问过在基本图形（[LINK](https://stackoverflow.com/questions/13353213/gradient-of-n-colors-ranging-from-color-1-and-color-2#comment18225943_13353213)）中创建 n 值的渐变。现在我想创建一个与之配套的渐变图例。我的理想是类似于`ggplot2`的渐变图例：

![在此处输入图像描述](../Images/396b3ffd1bd646f7e02cc8359681adf5.png)

这是一些类似于我正在使用的代码：

```
colfunc <- colorRampPalette(c("red", "blue"))
plot(1:20, 1:20, pch = 19, cex=2, col = colfunc(20)) 
```

![在此处输入图像描述](../Images/597282a53871ed7e88ed4c57a766a1bf.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-13T04:05:27.793

这是一个示例，说明如何使用`rasterImage`from`grDevices`和`layout`拆分屏幕从第一原则构建图例

```
layout(matrix(1:2,ncol=2), width = c(2,1),height = c(1,1))
plot(1:20, 1:20, pch = 19, cex=2, col = colfunc(20))

legend_image <- as.raster(matrix(colfunc(20), ncol=1))
plot(c(0,2),c(0,1),type = 'n', axes = F,xlab = '', ylab = '', main = 'legend title')
text(x=1.5, y = seq(0,1,l=5), labels = seq(0,1,l=5))
rasterImage(legend_image, 0, 0, 1,1) 
```

![在此处输入图像描述](../Images/7a9b16336299726d15ac13f10dbfd6e1.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-15T00:19:51.167

派对迟到了，但这是一个使用离散截止值呈现传奇的基本版本。认为它可能对未来的搜索者有用。

```
layout(matrix(1:2,nrow=1),widths=c(0.8,0.2))
colfunc <- colorRampPalette(c("white","black"))

par(mar=c(5.1,4.1,4.1,2.1))
plot(1:10,ann=FALSE,type="n")
grid()
points(1:10,col=colfunc(10),pch=19,cex=1.5)

xl <- 1
yb <- 1
xr <- 1.5
yt <- 2

par(mar=c(5.1,0.5,4.1,0.5))
plot(NA,type="n",ann=FALSE,xlim=c(1,2),ylim=c(1,2),xaxt="n",yaxt="n",bty="n")
rect(
     xl,
     head(seq(yb,yt,(yt-yb)/10),-1),
     xr,
     tail(seq(yb,yt,(yt-yb)/10),-1),
     col=colfunc(10)
    )

mtext(1:10,side=2,at=tail(seq(yb,yt,(yt-yb)/10),-1)-0.05,las=2,cex=0.7) 
```

还有一个示例图像：

![在此处输入图像描述](../Images/e86ec07cf3c615a62fb4f66b76fa617e.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-01T16:54:47.257

下面创建一个带有三个精确点的渐变色条，事先没有任何绘图，也不需要外星人包。希望有用：

```
plot.new()
lgd_ = rep(NA, 11)
lgd_[c(1,6,11)] = c(1,6,11)
legend(x = 0.5, y = 0.5,
       legend = lgd_,
       fill = colorRampPalette(colors = c('black','red3','grey96'))(11),
       border = NA,
       y.intersp = 0.5,
       cex = 2, text.font = 2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-29T17:06:43.263

作为@mnel 出色[答案的改进，受@Josh O'Brien 的另一个出色答案](https://stackoverflow.com/a/14289073/6574038)***的******启发***，这里[有](https://stackoverflow.com/a/13355440/6574038)一种**在**情节中显示渐变图例的方法。

 ****```
colfunc <- colorRampPalette(c("red", "blue"))
legend_image <- as.raster(matrix(colfunc(20), ncol=1))

## layer 1, base plot
plot(1:20, 1:20, pch=19, cex=2, col=colfunc(20), main='
     Awesome gradient legend inside')

## layer 2, legend inside
op <- par(  ## set and store par
  fig=c(grconvertX(c(0, 10), from="user", to="ndc"),    ## set figure region
        grconvertY(c(4, 20.5), from="user", to="ndc")), 
  mar=c(1, 1, 1, 9.5),                                  ## set margins
  new=TRUE)                                ## set new for overplot w/ next plot

plot(c(0, 2), c(0, 1), type='n', axes=F, xlab='', ylab='')  ## ini plot2
rasterImage(legend_image, 0, 0, 1, 1)                       ## the gradient
lbsq <- seq.int(0, 1, l=5)                                  ## seq. for labels
axis(4, at=lbsq, pos=1, labels=F, col=0, col.ticks=1, tck=-.1)  ## axis ticks
mtext(sq, 4, -.5, at=lbsq, las=2, cex=.6)                      ## tick labels
mtext('diff', 3, -.125, cex=.6, adj=.1, font=2)              ## title
par(op)  ## reset par 
```

[![在此处输入图像描述](../Images/e9d59629711033239593b1f9e34f982d.png)](https://i.stack.imgur.com/0aLSm.png)****

# ios - 所有框架和静态库文件编译到应用程序？

> ID：13355186
> 
> 赞同：1
> 
> 时间：2012-11-13T03:27:48.430
> 
> 标签：ios, xcode, compiler-construction, frameworks, static-libraries

1、我想知道Xcode是否将所有.m框架和.a源编译到我的应用程序中，例如，如果我导入UIKit框架并且我只使用UIButton.h，那么UIKit中的所有文件都会编译到我的应用程序中吗？静态库呢？

2、如果我在构建自己的静态库时导入了一些框架，框架的文件会被编译成.a吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:55:41.223

链接到像 UIKit 这样的标准框架不会向您的二进制文件添加任何额外的数据。所有标准框架都是操作系统的一部分，因此您只是参考这些框架。但是，必须包含任何自定义静态库，因为编译后的代码不是操作系统的一部分。

你自己的图书馆也是如此。导入标准框架不应增加 .a 文件的大小。

# ios - 使用 RESTKIT 使用 Web 服务

> ID：13355188
> 
> 赞同：1
> 
> 时间：2012-11-13T03:27:56.707
> 
> 标签：ios, web-services, restkit

我是 RESTKIT 的初学者，最近才在来自 ray 的教程[http://www.raywenderlich.com/13097/intro-to-restkit-tutorial](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)的foursquare公共api上对其进行了测试。

虽然我明白了它的要点，但有些部分我不明白，并希望得到它的指针，以便我可以使用我自己的 Web 服务。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    RKURL *baseURL = [RKURL URLWithBaseURLString:@"https://api.Foursquare.com/v2"];
    RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
    objectManager.client.baseURL = baseURL;

    RKObjectMapping *venueMapping = [RKObjectMapping mappingForClass:[Venue class]];
    [venueMapping mapKeyPathsToAttributes:@"name", @"name", nil];
    [objectManager.mappingProvider setMapping:venueMapping forKeyPath:@"response.venues"];

    [self sendRequest];
} 
```

我该如何改变

```
[venueMapping mapKeyPathsToAttributes:@"name", @"name", nil];
[objectManager.mappingProvider setMapping:venueMapping forKeyPath:@"response.venues"]; 
```

容纳我自己的webMethod？（我的 webMethod 如下所示）

目前，我将文件上传到 IIS 以进行测试，并使用 IP 进行 Web 服务。（我经常更换工作区，所以我将其指定为 myIPAddress 以便于沟通）

-- 我的服务代码（更改编辑：现在返回 JSON）

```
 [WebMethod]
    [ScriptMethod( ResponseFormat = ResponseFormat.Json)]
    public void testTextJSON()
    {
        string text = "Testing for Json!";
        List<string> arrayList = new List<string>();
        arrayList.Add(text); 
        JavaScriptSerializer js = new JavaScriptSerializer();
        string name = js.Serialize(arrayList);  
        Context.Response.Write(name); 
    } 
```

返回 -`["Testing for Json!"]`

编辑-我目前更改的内容`viewDidLoad`并`sendRequest`测试我自己的服务

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://192.168.1.12"];
    RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
    objectManager.client.baseURL = baseURL;

    RKObjectMapping *venueMapping = [RKObjectMapping mappingForClass:[venue class]];
    [venueMapping mapKeyPathsToAttributes:@"name", @"name", nil];

    [self sendRequest];
} 
```

和

```
- (void)sendRequest
{

    RKObjectManager *objectManager = [RKObjectManager sharedManager];

    RKURL *URL = [RKURL URLWithBaseURL:[objectManager baseURL] resourcePath:@"/webService/webService1.asmx/testTextJSON"];
    objectManager.acceptMIMEType = RKMIMETypeJSON;
  objectManager.serializationMIMEType = RKMIMETypeJSON;
    [[RKParserRegistry sharedRegistry] setParserClass:[RKJSONParserJSONKit class] forMIMEType:@"text/plain"];

    [objectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@", [URL resourcePath]] delegate:self];
} 
```

编辑 n+1 - 这是我的一些错误信息，也许有人可以告诉我出了什么问题？

```
2012-11-25 06:49:20.925 fourSquareAPI[352:12e03] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<__NSCFString 0x8354430> valueForUndefinedKey:]: this class is not key value coding-compliant for the key venues.' 
```

如果我删除`[objectManager.mappingProvider setMapping:venueMapping forKeyPath:@"venues"];` 我会得到

```
2012-11-25 06:52:47.495 fourSquareAPI[368:11603] response code: 200
2012-11-25 06:52:47.499 fourSquareAPI[368:12e03] W restkit.object_mapping:RKObjectMapper.m:87 Adding mapping error: Could not find an object mapping for keyPath: ''
2012-11-25 06:52:47.499 fourSquareAPI[368:12e03] E restkit.network:RKObjectLoader.m:231 Encountered errors during mapping: Could not find an object mapping for keyPath: ''
2012-11-25 06:52:47.502 fourSquareAPI[368:11603] Error: Could not find an object mapping for keyPath: '' 
```

有人可以教我怎么做吗？？任何帮助将不胜感激，我真的很想学习如何使用 RESTKIT 来使用 web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:47:16.237

关键路径`response.venues`是相对于 JSON 或 XML 格式的服务器响应的属性路径。在这种情况下，服务器返回具有键“venues”的“response”。这很可能是您将应用映射的场所列表。您必须根据您的服务器响应进行调整。

如果要在映射之前处理特定值，请使用此函数：

```
- (void)objectLoader:(RKObjectLoader *)loader willMapData:(inout __autoreleasing id *)mappableData; {
  if([*mappableData valueForKey:@"result"] != nil){
    [*mappableData removeObjectForKey:@"result"]; //This key won't be mapped now
  }
} 
```

# c# - 尝试在 Powershell v1 中嵌入 C# 代码

> ID：13355198
> 
> 赞同：5
> 
> 时间：2012-11-13T03:29:20.583
> 
> 标签：c#, .net, powershell

这是我第一次发布问题。我对 csharp 和 powershell 都很陌生。如果我的英语一点都不好，请多多包涵。我一直在尝试将我的 csharp 代码转换为 powershell，但我没有成功。我试图研究有关 powershell 的文档并尝试每一个，不幸的是，对我没有任何帮助。我的 csharp 代码在 Visual Studio 2010 中运行，但我无法在 Powershell 中嵌入和运行它。下面的代码简单地捕获任务管理器的 PID 并将其写入记事本，并带有时间和日期戳。任何帮助将不胜感激。

我的 csharp 代码是：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace GET_TASK
{
    class Program
    {
        static void Main(string[] args)
        {

            var processList = Process.GetProcessesByName("taskmgr");                

            foreach (var process in processList)
            {

                string myPath = "C:/powershell/GET_TASK"; //change data path as needed

                FileStream logfile;
                //log program process
                logfile = new FileStream(myPath + "/logfile.txt", FileMode.Append, FileAccess.Write); 

                TextWriter oldLog = Console.Out;  

                StreamWriter writelog;
                writelog = new StreamWriter(logfile);               

                DateTime time = DateTime.Now;
                string format = "MMM ddd d HH:mm yyyy";

                Console.SetOut(writelog);

                // print out the process id
                Console.WriteLine("Process Id=" + process.Id + " - " + time.ToString(format));

                Console.SetOut(oldLog);                        

                writelog.Close();

                System.Environment.Exit(0);                               
            }
        }
    }
} 
```

在我的 Powershell 代码中，我只是把

```
$source = @" 
```

在这段代码的乞求下，

```
Add-Type -TypeDefinition $source
[GET_TASK.Program]::Main() 
```

在代码的末尾，但它不起作用。我正在使用 Powershell 版本 1。请帮助转换我的 C# 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:10:11.170

试试这个：

```
get-process | % { "Process ID = $($_.id) - $(get-date -Format "MMM ddd d HH:mm yyyy")" } |
out-file -path "C:/powershell/GET_TASK" -append 
```

这是 powershell 等效代码。

您在 add-type 中使用的代码（仅 powershell V2 或 V3，对于 V1，您必须创建一个 DLL 并使用`[Reflection.Assembly]::LoadFile("c:\myddl.dll")`）

```
$t = @"
using System;
using System.Diagnostics;
using System.IO;

 public  class Program
    {
        public static void Main()
        {    
            var processList = Process.GetProcessesByName("taskmgr");    
            foreach (var process in processList)
            {    
                string myPath = "C:/"; //change data path as needed    
                FileStream logfile;
                //log program process
                logfile = new FileStream(myPath + "/logfile.txt", FileMode.Append, FileAccess.Write);    
                TextWriter oldLog = Console.Out;    
                StreamWriter writelog;
                writelog = new StreamWriter(logfile);
                    DateTime time = DateTime.Now;
                string format = "MMM ddd d HH:mm yyyy";    
                Console.SetOut(writelog);
                    // print out the process id
                Console.WriteLine("Process Id=" + process.Id + " - " + time.ToString(format));    
                Console.SetOut(oldLog);    
                writelog.Close();    
                //System.Environment.Exit(0); removed, otherwise closes the console  
          }
        }
    }
"@

Add-Type -TypeDefinition $t
[program]::main() 
```

# php - 使用 XAMPP 时没有选择数据库错误

> ID：13355200
> 
> 赞同：1
> 
> 时间：2012-11-13T03:29:28.647
> 
> 标签：php, mysql

我不断收到`No database selected`错误。我不确定是否有办法检查是否有东西被阻止。

这是我的PHP代码：

```
<?php
  if(isset($_POST['submit']))
  {
    $fname = $_FILES['sel_file']['name'];

    $chk_ext = explode(".",$fname);

    if(strtolower($chk_ext[1]) == "csv")
    {
      $filename = $_FILES['sel_file']['tmp_name'];
      $handle = fopen($filename, "r");

      while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
      {
        $sql = "INSERT into thingy(thingr,thing1,thing2) " .
            "values('$data[0]','$data[1]','$data[2]')";
        mysql_query($sql) or die(mysql_error());
      }
      fclose($handle);
      echo "Successfully Imported";
    }
    else
    {
      echo "Invalid File";
    }   
  } 
?>
<form action='' method='post' enctype='multipart/form-data' >

  Import File : <input type='file' name='sel_file' size='20'>
  <input type='submit' name='submit' value='submit'>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:33:14.320

要检查的显而易见的事情是您的数据库是否实际使用`mysql_connect`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:37:17.413

您需要先连接到 mysql，然后在开始执行 sql 查询之前选择一个数据库

尝试这个。

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Not connected : ' . mysql_error());
}

// make foo the current db
$db_selected = mysql_select_db('foo', $link);
if (!$db_selected) {
    die ('Can\'t use foo : ' . mysql_error());
}

if(isset($_POST['submit']))
   {
         $fname = $_FILES['sel_file']['name'];

         $chk_ext = explode(".",$fname);

         if(strtolower($chk_ext[1]) == "csv")
         {

             $filename = $_FILES['sel_file']['tmp_name'];
             $handle = fopen($filename, "r");

            while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
             {
                $sql = "INSERT into thingy(thingr,thing1,thing2) values('$data[0]','$data[1]','$data[2]')";
                mysql_query($sql) or die(mysql_error());
             }

             fclose($handle);
             echo "Successfully Imported";
         }
         else
        {
             echo "Invalid File";
         }   
    }

    ?>

   <form action='' method='post' enctype='multipart/form-data' >

       Import File : <input type='file' name='sel_file' size='20'>
        <input type='submit' name='submit' value='submit'>

    </form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T03:44:01.563

尝试这个，

```
<?php
  $conn_str = mysql_connect('localhost', 'yout_user_id', 'your_user_password');
  if (!$conn_str) {
    die('Not connected  to the database: ' . mysql_error());
  }

  $db_selected = mysql_select_db('your_database_name', $conn_str);
  if (!$db_selected) {
    die ("Can\'t use your_database_name : " . mysql_error());
  }
  if(isset($_POST['submit']))
  {
    $fname = $_FILES['sel_file']['name'];

    $chk_ext = explode(".",$fname);

    if(strtolower($chk_ext[1]) == "csv")
    {

      $filename = $_FILES['sel_file']['tmp_name'];
      $handle = fopen($filename, "r");

      while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
      {
        $sql = "INSERT into thingy(thingr,thing1,thing2) " . 
            "values(\"$data[0]\",\"$data[1]\",\"$data[2]\")";
        mysql_query($sql) or die(mysql_error());
       }
       fclose($handle);
       echo "Successfully Imported";
     }
     else
     {
       echo "Invalid File";
     }   
   }
?>

<form action='' method='post' enctype='multipart/form-data' >

  Import File : <input type='file' name='sel_file' size='20'>
  <input type='submit' name='submit' value='submit'>
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T03:32:49.243

您需要`mysql_select_db("your_dbName", $link_identifier)`选择数据库..

[`mysql_select_db`在 php.net 上查找更多详细信息](http://php.net/manual/en/function.mysql-select-db.php)

另外，开始使用*mysqli*函数或*PDO*语句..

# recursion - 方案列表操作

> ID：13355201
> 
> 赞同：1
> 
> 时间：2012-11-13T03:29:32.097
> 
> 标签：recursion, scheme

我无法弄清楚这个方案代码请帮忙。Compute-frequencies 包含两个独立的列表，查找列表和池列表。它应该返回一个列表，显示查找列表中的所有内容在池列表中的次数。我知道我很接近它只是一些小错误，很可能与通过池列表后的递归调用有关。

```
(define (compute-frequencies looking-for-list pool-list) 
  (define (helper looking-for-list pool-list current-frequency frequency-list)  ; keeps track of finished list and iterates through both lists
    (if (null? looking-for-list) (reverse frequency-list)                       ; finding the number of times data in looking-for-list are in pool-list
    (if (null? pool-list)
        (helper (cdr looking-for-list) pool-list 0 (cons current-frequency frequency-list))
        (if (equal? (car looking-for-list) (car pool-list))
        (helper looking-for-list (cdr pool-list) (+ 1 current-frequency) frequency-list)
        (helper looking-for-list (cdr pool-list) current-frequency frequency-list)))))

 (helper looking-for-list pool-list 0 '() )) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:20:09.983

好吧，阅读您的代码，您的算法本身似乎非常好。问题要简单得多。

查看您的代码，一旦您检查了您想要恢复到其原始状态`pool-list`的第一个元素的所有元素。为此，您使用as调用。您几乎可以肯定是指在参数中定义的那个，但是 Scheme 采用 in的参数，因为它是 in 的影子。这意味着在第一次迭代之后，其他一切的频率都是 0 。`looking-for-list``pool-list``helper``pool-list``pool-list``compute-frequency``helper``compute-frequency``pool-list``'()`

为了解决这个问题，做一些重命名。将来，请记住，Scheme 变量可以并且将在更大范围内隐藏变量。此外，尝试使用`cond`而不是嵌套的 if 语句。在 Scheme 中更具可读性（这就是我发现这个问题的方式）

# javascript - Three.js补间值没有到达目标，而是完成但保持在初始值

> ID：13355206
> 
> 赞同：2
> 
> 时间：2012-11-13T03:29:45.537
> 
> 标签：javascript, webgl, three.js, tween

我正在尝试在我的 WebGL 项目 ( [http://eyesonmars.com/](http://eyesonmars.com/) ) 中使用 Tween 将其顺利移动到新位置。但是，我还不能让 Tween 为我工作。

不是在 3 秒内将 camera.position.x 的值从 -3 补间到 -10，它只是将相机的位置发送到 x=-3 并且不会继续。我还确认 Tween 对象认为它已经通过让 Tween 的 .onComplete() 弹出警报来完成其任务（我已经删除了该警报，因此它不在当前代码中）。

这是我正在使用的代码，可以在[http://eyesonmars.com/libs/EOM_Utils.js找到](http://eyesonmars.com/libs/EOM_Utils.js)

```
function zoomOutCamera()
{
    var position, target;

    // app.camera.position.z = 10;

    position = -3.0;
    target = -10.0;
    myTween = new TWEEN.Tween(position).to(target, 3000);

    myTween.onUpdate(function(){
        // alert(position);
        app.camera.position.x = position;
    });

    // myTween.onComplete(bananaphone(position));

    myTween.start();
}

function myAnimate()
{

    if(!myTween.onComplete())
    {
    requestAnimationFrame( myAnimate);
    }
    myTween.update();

} 
```

下面我总结了我是如何测试代码的，以及根据我认为我知道的应该发生的事情。

发生了什么：输入浏览器 JavaScript 控制台：

```
input: camera.position.x
output: 0.5
input: myAnimate()
output: undefined
input: camera.position.x
output: -3 
```

应该发生什么（根据我的说法）： 输入浏览器 JavaScript 控制台：

```
input: camera.position.x
output: 0.5
input: myAnimate()
output: undefined
input: camera.position.x
output: -10 
```

我尝试了补间的不同变体，还在线研究了解决方案和我的 O'Reilly 书。我很高兴听到有关如何更准确地发布我的问题的任何建议。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-17T19:33:06.117

Tween的更新功能需要时间！？？？？当您使用 3d 渲染函数“myAnimate”时，您需要传递时间参数...

```
function myAnimate(time)
{

    if(!myTween.onComplete())
    {
    requestAnimationFrame( myAnimate);
    }
    myTween.update(time);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:16:54.960

补间不适用于整数

```
function zoomOutCamera()
{
    var position, target;

    // app.camera.position.z = 10;

    position = { x:-3.0};
    target = {x:-10.0};
    myTween = new TWEEN.Tween(position).to(target, 3000);

    myTween.onUpdate(function(){
        // alert(position);
        app.camera.position.x = this.x;
    });

    // myTween.onComplete(bananaphone(position));

    myTween.start(+new Date());
}

function myAnimate()
{

    if(!myTween.onComplete())
    {
    requestAnimationFrame( myAnimate);
    }
    myTween.update(+new Date());

} 
```

# python - 尝试除 Flask 中的 JSON 错误

> ID：13355215
> 
> 赞同：5
> 
> 时间：2012-11-13T03:31:50.310
> 
> 标签：python, json, http, flask

我正在尝试向 API 添加一个 DELETE 方法，如下所示：

```
if request.method == 'DELETE':

    if request.headers['Content-Type'] == 'application/json':

        try:
            data = json.loads(request.data)
            data_id = data['id']
            db.execute('DELETE FROM places WHERE id=' + data_id)
            db.commit()
            resp = Response({"Delete Success!"}, status=200, mimetype='application/json')
            return resp

        except (ValueError, KeyError, TypeError):
            resp = Response({"JSON Format Error."}, status=400, mimetype='application/json')
            return resp 
```

我正在传递以下 CURL：

```
curl -H "Content-type: applicaiton/json" -X DELETE http://localhost:5000/location -d '{"id":3}' 
```

try except 块由于某种原因失败。我无法检测到问题所在。有什么想法可以调试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:53:26.347

如果你改变

```
except (ValueError, KeyError, TypeError):
    resp = Response({"JSON Format Error."}, status=400, mimetype='application/json')
    return resp 
```

到

```
except (ValueError, KeyError, TypeError) as error:
    print error
    resp = Response({"JSON Format Error."}, status=400, mimetype='application/json')
    return resp 
```

您将能够看到您的错误。

更新：我很高兴你发现了你的错误！我认为大多数包装数据库连接的模块都允许您执行以下操作：

```
db.execute('SELECT * FROM awesome_table WHERE id=%s', data_id) 
```

他们通常会提供一些基本的 SQL 注入保护。

# c - 大小为 1 的无效读取 Strcpy

> ID：13355217
> 
> 赞同：0
> 
> 时间：2012-11-13T03:31:54.643
> 
> 标签：c, valgrind, strcpy

我不断收到大小为 1 的无效读取的 valgrind 错误，我无法确定原因。

是什么导致了错误？

```
==24647== Invalid read of size 1
==24647==    at 0x40258EA: strcpy (mc_replace_strmem.c:437)
==24647==    by 0x8048606: main (source.c:26)
==24647==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==24647==
==24647==
==24647== Process terminating with default action of signal 11 (SIGSEGV)
==24647==  Access not within mapped region at address 0x0
==24647==    at 0x40258EA: strcpy (mc_replace_strmem.c:437)
==24647==    by 0x8048606: main (source.c:26)
==24647==  If you believe this happened as a result of a stack
==24647==  overflow in your program's main thread (unlikely but
==24647==  possible), you can try to increase the size of the
==24647==  main thread stack using the --main-stacksize= flag.
==24647==  The main thread stack size used in this run was 16777216. 
```

下面是我的代码，我评论了检测到错误的行（source.c:26）。

```
#include <stdio.h>
#include <stdlib.h>
#include <limits.h>
#include <string.h>

int main()
{

    char input[100];

    char name[100];

    char age[100];

    int agee[100];

    fgets(input,sizeof(input),stdin); //i scan in the string and store int char array called input.

    char *charpoint;//declare pointer character

    charpoint=strtok(input,"\"");//run strtoken with quotation marks as second part of argument.

    strcpy(name,charpoint);

    char * charpoint2=strtok(NULL,"\",");

    strcpy(age,charpoint2); //This line is where the error occurs. line 26

    sscanf(age,"%d",&agee[0]);

    printf("%s %d",name, agee[0]);

    system("pause");

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T03:43:23.977

从手册页（强调我的）：

> strtok() 和 strtok_r() 函数在将标记本身替换为 NUL 字符后，返回指向字符串中每个后续标记开头的指针。 **当没有更多标记时，返回一个空指针。**

从你的错误

```
==24647==  Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

所以你的指针`charpoint2`是 NULL，这意味着你之前的`strtok`调用没有找到你期望的。您应该检查这种可能性并打印有关输入格式的错误。当然，您应该验证您的`strtok`通话是否符合您的预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:45:37.340

关于你的程序的几件事。

1.  使用前清除所有数组，这样可以确保没有读入垃圾。您可以使用 memset 或仅 char input[100] = {0};
2.  读入数据后，通过显式设置 input[99] = '\0' 确保输入为空终止。这是为了确保输入永远不会超过数组的大小
3.  对 strtok 返回的指针进行空检查，不能保证你得到你所期望的。适当地处理空值。我的预感是 charpoint2 会为您返回 null，因此会出现错误。

# security - 在支付网页中输入密码的最佳做法是什么？

> ID：13355220
> 
> 赞同：2
> 
> 时间：2012-11-13T03:32:25.890
> 
> 标签：security, passwords, payment, user-experience

在中国，淘宝、支付宝等B2C/C2C网站需要在登录和支付页面的密码输入栏安装ActiveX等控件。他们的官方原因是反键盘记录和加密密码（它也有 SSL）。

但是控件可能会提供更糟糕的用户体验。就像在 Chrome 中一样，我们不能在输入帐户名之后“Tab”进入控件来输入密码。并且由于权限问题，不允许“输入”在控件中发布帐户和密码。同时，如果用户 PC 中的控件被黑客入侵，则控件可能存在网络钓鱼风险。

我注意到像 ebay、paypal、amazon 这样的全球 B2C/C2C 网站不需要安装任何控件。有时甚至不提供用于输入密码的虚拟键盘。那么防键盘记录器是支付网页设计中必须考虑的因素之一吗？在支付站点中输入密码以平衡安全性和用户体验的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:40:04.317

您可以尝试使用 JavaScript 创建虚拟屏幕键盘。

# ruby-on-rails - 如何使用 cucumber/ruby 将鼠标悬停在元素上以使其可见，以便我可以单击链接？

> ID：13355227
> 
> 赞同：-3
> 
> 时间：2012-11-13T03:33:56.700
> 
> 标签：ruby-on-rails, selenium, cucumber, capybara

页面有产品，当我将鼠标悬停在图像上时，它会显示产品数量和立即购买按钮。我想在鼠标悬停后点击数量并立即购买按钮。

```
driver.navigate.to('http://testsite/')   

product = driver.find_element(:xpath, "//div[@id='recipes-inspiration-menu']")
submenu = driver.find_element(:xpath, "//li[@class='first first-child  children']")

driver.find_element(:xpath, "//a[@title='placed']").click 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:34:14.827

试试这个（这只适用于使用 jquery 的网站）。

```
driver.execute_script('$("#element").trigger("hover")') 
```

# python - Python lambda 闭包作用域

> ID：13355233
> 
> 赞同：34
> 
> 时间：2012-11-13T03:34:45.557
> 
> 标签：python, lambda, closures

我正在尝试使用闭包从函数签名中消除变量（该应用程序将编写连接 Qt 信号所需的所有函数，以控制大量参数到存储值的字典）。

我不明白为什么使用`lambda`未包装在另一个函数中的情况会返回所有情况的姓氏。

```
names = ['a', 'b', 'c']

def test_fun(name, x):
    print(name, x)

def gen_clousure(name):
    return lambda x: test_fun(name, x)

funcs1 = [gen_clousure(n) for n in names]
funcs2 = [lambda x: test_fun(n, x) for n in names]

# this is what I want
In [88]: for f in funcs1:
   ....:     f(1)
a 1
b 1
c 1

# I do not understand why I get this
In [89]: for f in funcs2:
   ....:     f(1)
c 1
c 1
c 1 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-13T03:43:26.767

原因是闭包（lambdas 或其他）关闭名称，而不是值。当您定义`lambda x: test_fun(n, x)`时， n 不会被评估，因为它在函数内部。它在*调用*函数时进行评估，此时存在的值是循环中的最后一个值。

您在一开始就说您想“使用闭包从函数签名中消除变量”，但实际上并不是这样。（不过，请参阅下面的一种可能满足您的方式，具体取决于您所说的“消除”。）定义函数时，不会计算函数体内的变量。为了让函数获取在函数定义时存在的变量的“快照”，您*必须*将变量作为参数传递。执行此操作的常用方法是给函数一个参数，其默认值是来自外部作用域的变量。看看这两个例子之间的区别：

```
>>> stuff = [lambda x: n+x for n in [1, 2, 3]]
>>> for f in stuff:
...     print f(1)
4
4
4
>>> stuff = [lambda x, n=n: n+x for n in [1, 2, 3]]
>>> for f in stuff:
...     print f(1)
2
3
4 
```

在第二个示例中，`n`作为参数传递给函数将 n 的当前值“锁定”到该函数。如果您想以这种方式锁定值，则必须执行此类操作。（如果它不这样工作，像全局变量这样的东西根本就不起作用；在使用时查找自由变量是必不可少的。）

请注意，此行为并非特定于 lambdas。`def`如果您使用定义从封闭范围引用变量的函数，则相同的范围规则有效。

如果你真的想要，你可以避免向返回的函数添加额外的参数，但要这样做，你必须将该函数包装在另一个函数中，如下所示：

```
>>> def makeFunc(n):
...     return lambda x: x+n
>>> stuff = [makeFunc(n) for n in [1, 2, 3]]
>>> for f in stuff:
...     print f(1)
2
3
4 
```

在这里，内部 lambda 仍然会查找`n`调用时的值。但`n`它所指的不再是全局变量，而是封闭函数内部的局部变量`makeFunc`。每次`makeFunc`调用时都会创建此局部变量的新值，并且返回的 lambda 会创建一个闭包，该闭包“保存”对该调用有效的局部变量值`makeFunc`。因此，在循环中创建的每个函数都有自己的“私有”变量，称为`x`. （对于这个简单的情况，这也可以使用外部函数的 lambda 来完成 --- `stuff = [(lambda n: lambda x: x+n)(n) for n in [1, 2, 3]]`--- 但这不太可读。）

请注意，您仍然必须将 your`n`作为参数传递，只是通过这种方式，您不会将其作为参数传递给最终进入`stuff`列表的同一函数；相反，你将它作为参数传递给一个帮助函数，该函数创建你想要放入的函数`stuff`。使用这种双函数方法的优点是返回的函数是“干净的”并且没有额外的参数；如果您要包装接受大量参数的函数，这可能很有用，在这种情况下，记住`n`参数在列表中的位置可能会变得混乱。缺点是，这样做的话，制作函数的过程比较复杂，因为你需要另一个封闭的函数。

结果是有一个折衷：您可以使函数创建过程更简单（即，不需要两个嵌套函数），但是您必须使生成的函数更复杂一些（即，它有这个额外的`n=n`参数） . 或者您可以使函数更简单（即它没有`n=`n 参数），但是您必须使函数创建过程更复杂（即，您需要两个嵌套函数来实现该机制）。

# python - 迭代全文而不是字符

> ID：13355236
> 
> 赞同：0
> 
> 时间：2012-11-13T03:35:00.453
> 
> 标签：python, text, iteration

我注意到，当我尝试使用诸如“python”“please”“work”之类的行来迭代文件时，我只会得到单个字符，例如“p”“y”“t”......

我怎么能得到它给我完整的话？我已经尝试了几个小时，但找不到方法。我正在使用最新版本的python。编辑：所有引号都是新行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:55:37.207

您可以遍历文件对象：

```
for line in open('file'):
    for word in line.split():
        do_stuff(word) 
```

有关详细信息，请参阅文档：http: [//docs.python.org/2/library/stdtypes.html#bltin-file-objects](http://docs.python.org/2/library/stdtypes.html#bltin-file-objects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:44:49.730

如果要将单词存储为字符串，则可以使用 split 函数按空格拆分单词。

```
>>> "python please work".split(' ')
['python', 'please', 'work'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:30:39.013

如果您将数据放在一个跨越多行的字符串中（例如，它包含`'\n'`字符），则需要在迭代之前对其进行拆分。这是因为遍历字符串（而不是字符串列表）将始终遍历字符，而不是单词或行。

这是一些示例代码：

```
text = "Spam, spam, spam.\Lovely spam!\nWonderful spam!"

lines = text.splitlines() # or use .split("\n") to do it manually

for line in lines:
     do_whatever(line) 
```

# scala - Scala 解析器组合器和换行符分隔的文本

> ID：13355238
> 
> 赞同：13
> 
> 时间：2012-11-13T03:35:22.987
> 
> 标签：scala, parser-combinators

我正在编写一个 Scala 解析器组合器语法，它读取换行符分隔的单词列表，其中列表由一个或多个空行分隔。给定以下字符串：

```
cat
mouse
horse

apple
orange
pear 
```

我想让它返回`List(List(cat, mouse, horse), List(apple, orange, pear))`。

我编写了这个基本语法，它将单词列表视为换行符分隔的单词。请注意，我必须覆盖`whitespace`.

```
import util.parsing.combinator.RegexParsers

object WordList extends RegexParsers {

    private val eol = sys.props("line.separator")

    override val whiteSpace = """[ \t]+""".r

    val list: Parser[List[String]] = repsep( """\w+""".r, eol)

    val lists: Parser[List[List[String]]] = repsep(list, eol)

    def main(args: Array[String]) {
        val s =
          """cat
            |mouse
            |horse
            |
            |apple
            |orange
            |pear""".stripMargin

        println(parseAll(lists, s))
    }
} 
```

这错误地将空行视为空单词列表，即它返回

```
[8.1] parsed: List(List(cat, mouse, horse), List(), List(apple, orange, pear)) 
```

（注意中间的空列表。）

我可以在每个列表的末尾放置一个可选的行尾。

```
val list: Parser[List[String]] = repsep( """\w+""".r, eol) <~ opt(eol) 
```

这可以处理列表之间只有一个空行的情况，但是对于多个空行有同样的问题。

我尝试更改`lists`定义以允许多个行尾分隔符：

```
val lists:Parser[List[List[String]]] = repsep(list, rep(eol)) 
```

但这取决于上述输入。

将多个空行作为分隔符处理的正确语法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-13T04:32:01.043

您应该尝试设置[`skipWhitespace`](http://www.scala-lang.org/api/current/scala/util/parsing/combinator/RegexParsers.html#skipWhitespace:Boolean)为`false`而不是重新定义空格的定义。您遇到的空列表问题是由于`repsep`不使用列表末尾的换行符这一事实引起的。相反，您应该在每个项目之后解析换行符（或可能是输入的结尾）：

```
import util.parsing.combinator.RegexParsers

object WordList extends RegexParsers {

  private val eoi = """\z""".r // end of input
  private val eol = sys.props("line.separator")
  private val separator = eoi | eol
  private val word = """\w+""".r

  override val skipWhitespace = false

  val list: Parser[List[String]] = rep(word <~ separator)

  val lists: Parser[List[List[String]]] = repsep(list, rep1(eol))

  def main(args: Array[String]) {
    val s =
      """cat
        |mouse
        |horse
        |
        |apple
        |orange
        |pear""".stripMargin

    println(parseAll(lists, s))
  }

} 
```

再说一次，解析器组合器在这里有点矫枉过正。你可以用更简单的东西得到几乎相同的东西（但使用数组而不是列表）：

```
s.split("\n{2,}").map(_.split("\n")) 
```

# python - 为什么 python 不包含有序的字典（默认情况下）？

> ID：13355239
> 
> 赞同：2
> 
> 时间：2012-11-13T03:35:31.093
> 
> 标签：python

Python 有一些很棒的结构来建模数据。这里有一些 ：

```
 +-------------------+-----------------------------------+
              | indexed by int    | no-indexed by int                 |
+-------------+-------------------+-----------------------------------+
| no-indexed  | [1, 2, 3]         | {1, 2, 3}                         |
| by key      | or                | or                                |
|             | [x+1 in range(3)] | {x+1 in range(3)}                 |
+-------------+-------------------+-----------------------------------+
| indexed     |                   | {'a': 97, 'c': 99, 'b': 98}       |
| by key      |                   | or                                |
|             |                   | {chr(x):x for x in range(97,100)} |
+-------------+-------------------+-----------------------------------+ 
```

为什么 python 默认不包含由 key+int 索引的结构（如 PHP 数组）？我知道有一个库可以模拟这个对象（[http://docs.python.org/3/library/collections.html#ordereddict-objects](http://docs.python.org/3/library/collections.html#ordereddict-objects)）。但这里是取自文档的“orderedDict”的表示：

```
OrderedDict([('pear', 1), ('apple', 4), ('orange', 2), ('banana', 3)]) 
```

有一个在逻辑上应该这样写的本机类型不是更好吗：

```
['a': 97, 'b': 98, 'c': 99] 
```

和 orderedDict 理解的相同逻辑：

```
[chr(x):x for x in range(97,100)] 
```

在 python 设计中像这样填充表格单元格是否有意义？是否有任何特殊原因尚未实施？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-13T03:56:53.277

Python 的字典被实现为哈希表。这些本质上是无序的数据结构。虽然可以添加额外的逻辑来跟踪顺序（如[`collections.OrderedDict`](http://docs.python.org/3/library/collections.html#ordereddict-objects)在 Python 2.7 和 3.1+ 中所做的那样），但涉及的开销并不小。

例如，[文档建议在 Python 2.4-2.6 中使用](http://code.activestate.com/recipes/576693/)[的配方`collections`](http://code.activestate.com/recipes/576693/)需要两倍以上的工作量才能完成许多基本的字典操作（例如添加和删除值）。这是因为它必须维护一个双向链表以用于有序迭代，并且它需要一个额外的字典来帮助维护该列表。虽然它的操作仍然是 O(1)，但常数项更大。

由于 Python`dict`在任何地方都使用实例（例如，对于所有变量查找），它们需要非常快，否则每个程序的每个部分都会受到影响。由于不经常需要有序迭代，因此避免在一般情况下所需的开销是有意义的。如果您需要有序字典，请使用标准库中的字典（或它建议的配方，如果您使用的是早期版本的 Python）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T04:16:18.063

您的问题似乎是“为什么 Python 没有带有有序键的原生 PHP 样式数组？”

Python 具有三种核心的非标量数据类型：list、dict 和 tuple。字典和元组对于实现语言本身是绝对必要的：它们用于赋值、参数解包、属性查找等。虽然没有真正用于核心语言语义，但列表对于 Python 中的数据和程序非常重要。这三个都必须非常轻量级，具有很好理解的语义，并且尽可能快。

PHP 风格的数组不是这些东西。它们不是快速或轻量级的，运行时复杂性定义不明确，而且它们的语义很混乱，因为它们可以用于许多不同的事情——看看[数组函数](http://php.net/manual/en/ref.array.php)。对于几乎所有用例来说，它们实际上都是一种*糟糕*的数据类型，除了创建它们的非常狭窄的用例：表示`x-www-form-encoded`数据。即使对于这个用例，一个失败是早期的键会覆盖后面键的值：在 PHP`?a=1&a=2`中会导致`array('a'=>2)`. （在 Python 中处理这个问题的一个常见结构是[MultiDict](http://docs.webob.org/en/latest/#multidict)，它有有序的键*和*值，每个键可以有多个值。）

PHP 有一种数据类型，它必须用于几乎所有用例，但对它们中的任何一个都不是很好。Python 有许多不同的数据类型（一些是核心，更多在外部库中），它们在更狭窄的用例中表现出色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-16T18:33:58.720

添加带有更新信息的新答案：从**C** Python3.6 开始，**`dicts`保留 order**。虽然仍然不能索引访问。很可能是因为基于整数的项目查找不明确，因为 dict 键可以是 int 的。（存在一些自定义用例。）

不幸的是，[文档`dict`](https://docs.python.org/3.6/library/stdtypes.html#dictionary-view-objects)尚未更新以反映这一点（还），并且仍然说*“键和值以非随机的任意顺序迭代”*。具有讽刺意味的是，[`collections.OrderedDict`](https://docs.python.org/3.6/library/collections.html#ordereddict-objects)文档提到了新行为：

> *在 3.6 版更改*: 随着[**PEP 468**](https://www.python.org/dev/peps/pep-0468)[`OrderedDict`](https://docs.python.org/3.6/library/collections.html#collections.OrderedDict)的接受，传递给构造函数及其`update()`方法的关键字参数的顺序被保留。

这是一篇文章，其中提到[了有关它的更多详细信息](http://www.infoworld.com/article/3149782/application-development/python-36-is-packed-with-goodness.html)：

> 一个微小但有用的内部改进：Python 3.6 为更多结构保留了元素的顺序。传递给函数的关键字参数、类中的属性定义和字典都保留了元素定义时的顺序。

因此，如果您只为 Py36 及更高版本编写代码，`collections.OrderedDict`除非您使用或基于顺序的相等性[`popitem`](https://docs.python.org/3.6/library/collections.html#collections.OrderedDict.popitem)，否则您不应该需要。[`move_to_end`](https://docs.python.org/3.6/library/collections.html#collections.OrderedDict.move_to_end)

例如，在 Python 2.7 中：

```
>>> d = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 0: None}
>>> d
{'a': 1, 0: None, 'c': 3, 'b': 2, 'd': 4} 
```

在 Python 3.6 中：

```
>>> d = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 0: None}
>>> d
{'a': 1, 'b': 2, 'c': 3, 'd': 4, 0: None}
>>> d['new'] = 'really?'
>>> d[None]= None
>>> d
{'a': 1, 'b': 2, 'c': 3, 'd': 4, 0: None, 'new': 'really?', None: None}
>>> d['a'] = 'aaa'
>>> d
{'a': 'aaa', 'b': 2, 'c': 3, 'd': 4, 0: None, 'new': 'really?', None: None}
>>> 
>>> # equality is not order-based
>>> d1 = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 0: None}
... d2 = {'b': 2, 'a': 1, 'd': 4, 'c': 3, 0: None}
>>> d2
{'b': 2, 'a': 1, 'd': 4, 'c': 3, 0: None}
>>> d1 == d2
True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-13T17:19:11.567

从 python 3.7 开始，这现在是字典的默认行为，它是 3.6 中的一个实现细节，于 2018 年 6 月被采用:')

> dict 对象的插入顺序保存特性已被宣布为 Python 语言规范的官方部分。

[https://docs.python.org/3/whatsnew/3.7.html](https://docs.python.org/3/whatsnew/3.7.html)

# python - pythonic方法来最大化适合可用点列表的项目数量

> ID：13355240
> 
> 赞同：1
> 
> 时间：2012-11-13T03:35:48.973
> 
> 标签：python

这是问题所在。每个项目都有一个索引值，以及它可以放入的插槽。

```
items = ( #(index, [list of possible slots])
    (1, ['U', '3']),
    (2, ['U', 'L', 'O']),
    (3, ['U', '1', 'C']),
    (4, ['U', '3', 'C', '1']),
    (5, ['U', '3', 'C']),
    (6, ['U', '1', 'L']),
) 
```

包含这些项目的最大插槽列表是什么。没有插槽可以是你不止一次。

我的解决方案似乎很难遵循，而且非常非pythonic [并且在最后一项上失败了]。在自己解决问题之前，我不想问“什么更好”的问题[所以现在听到我是，手里拿着乞丐的帽子]。这是我的代码：

```
def find_available_spot(item, spot_list):
    spots_taken = [spot for (i,spot) in spot_list]
    i, l = item
    for spot in l:
        if spot not in spots_taken: return (i, spot)
    return None

def make_room(item, spot_list, items, tried=[]):
    ORDER = ['U','C','M','O','1','3','2','L']
    i, l = item
    p_list = sorted(l, key=ORDER.index)
    spots_taken = [spot for (i, spot) in spot_list]

    for p in p_list:
        tried.append(p)
        spot_found = find_available_spot((i,[p]),spot_list)
        if spot_found: return spot_found
        else:
            spot_item = items[spots_taken.index(p)]
            i, l = spot_item
            for s in tried:
                if s in l: l.remove(s)
            if len(l) == 0: return None

            spot_found = find_available_spot((i,l),spot_list)
            if spot_found: return spot_found

            spot_found = make_room((i,l), spot_list, items, tried)
            if spot_found: return spot_found
            return None

items = ( #(index, [list of possible slots])
    (1, ['U', '3']),
    (2, ['U', 'L', 'O']),
    (3, ['U', '1', 'C']),
    (4, ['U', '3', 'C', '1']),
    (5, ['U', '3', 'C']),
    (6, ['U', '1', 'L']),
)

spot_list = []
spots_taken = []
for item in items:
    spot_found = find_available_spot(item, spot_list)
    if spot_found:
        spot_list.append(spot_found)
    else:
        spot_found = make_room(item,spot_list,items)
        if spot_found: spot_list.append(spot_found) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:58:44.330

简单地尝试每一种可能性都有一种残酷的优雅：

```
>>> items = (
...     (1, ['U', '3']),
...     (2, ['U', 'L', 'O']),
...     (3, ['U', '1', 'C']),
...     (4, ['U', '3', 'C', '1']),
...     (5, ['U', '3', 'C']),
...     (6, ['U', '1', 'L']),
... )
>>> import itertools
>>> locs = zip(*items)[1]
>>> max((len(p), p) for p in itertools.product(*locs) if len(p) == len(set(p)))
(6, ('U', 'O', 'C', '1', '3', 'L')) 
```

诚然，它的扩展性不是很好。

[编辑]

..而且，正如评论中所指出的，它只有在有填充解决方案的情况下才能找到解决方案。即使没有，一个稍微更有效（但仍然蛮力）的解决方案也可以工作：

```
def find_biggest(items):
    for w in reversed(range(len(items)+1)):
        for c in itertools.combinations(items, w):
            indices, slots = zip(*c)
            for p in itertools.product(*slots):
                if len(set(p)) == len(p):
                    return dict(zip(indices, p))

>>> items = ( (1, ['U', '3']), (2, ['U', 'L', 'O']), (3, ['U', '1', 'C']), (4, ['U', '3', 'C', '1']), (5, ['U', '3', 'C']), (6, ['U', '1']), (7, ['U', '1', 'L']), )
>>> find_biggest(items)
{1: 'U', 2: 'O', 3: '1', 4: '3', 5: 'C', 7: 'L'} 
```

# javascript - 如何使用javascript模拟Enter键事件？

> ID：13355241
> 
> 赞同：-1
> 
> 时间：2012-11-13T03:36:08.253
> 
> 标签：javascript, html, javascript-events

这个问题与[How do I use the Enter key as an event handler (javascript) 完全不同？](https://stackoverflow.com/questions/5931320/how-do-i-use-the-enter-key-as-an-event-handler-javascript)或[在 JavaScript 中输入按键事件](https://stackoverflow.com/questions/905222/enter-key-press-event-in-javascript)

我只想使用 Javascript 函数来替换 Enter Key Event。

例如。现在我将这个字符串输入到文本区域

“你好世界你好世界你好世界”

如您所见，此字符串中有三个“Hello world”。

如果我想让这个字符串达到这个效果

“你好世界

你好世界

你好世界”

我应该在每个“Hello world”之后按“Enter Key”。

现在这个问题是如何使用javascript来替换Enter Key Event？这意味着用户不需要按Enter键，脚本会自动完成。

而且我希望这些脚本可以跨越不同的浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:40:47.447

如果您在 a`textarea`或 a`pre`中，则可以使用`\r\n`换行符将它们拆分。否则，您可以简单地添加`<br>`标签。

```
var myString = "Hello world, Hello world, Hello world".split(',').join('\r\n');
$('textarea').text( myString ); 
```

当然，您将通过 JS ( `$('textarea').text()`) 获取字符串，我猜您会希望在`split`方法中使用 RegExp。

示例：http: [//jsbin.com/eqekir/1/edit](http://jsbin.com/eqekir/1/edit)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T03:42:07.633

你可以做类似的事情

```
console.log("This is a \n new line"); 
```

这将使新行出现在新行上。您可以使用正则表达式来分隔

# php - PHP - 编辑和构建文件

> ID：13355251
> 
> 赞同：0
> 
> 时间：2012-11-13T03:37:37.593
> 
> 标签：php, compiler-construction, build

好吧，当谷歌曾经有他们的“Android App Creator”时，我曾经目睹过这一点，您可以在其中创建自定义应用程序，然后弹出一个 .apk 文件。

我有一个程序，但它要求用户在使用它之前输入一些信息。我想知道我是否可以获取我的程序源，然后当用户添加信息并按 Enter 键时，它将添加信息、编译并显示文件。

我怎么能用 PHP 做到这一点？

# php - 无法在 CodeIgniter 中上传图像

> ID：13355253
> 
> 赞同：0
> 
> 时间：2012-11-13T03:37:42.587
> 
> 标签：php, codeigniter

我无法在 Codeigniter 中上传图像。

它总是显示不允许您尝试上传的文件类型。

我的编码（控制器）：

```
$this->load->helper(array('form', 'url'));
            $this->load->library('upload');
            $config['upload_path'] = "./public/uploadimg";
            $config['allowed_types'] = "*";
            $config['max_size'] = '10000';

            $this->upload->initialize($config);

            if ( ! $this->upload->do_upload('userfile'))
            {
                echo $this->upload->display_errors();
                //$this->load->view('upload_form', $error);
            }
            else
            {
                echo $this->upload->data($config);
                //$this->load->view('upload_success', $data);
            } 
```

看法 ：

```
<form  enctype="multipart/form-data" action="http://192.1.100.1/site/test_image/upload/" method="post">
    <input type="file"  name="userfile" id="userfile"/><Br>
    <input type="submit" name="upload" id="upload">
</form> 
```

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:46:23.827

尝试明确设置您允许的类型。我记得以前有同样的问题。

```
$config['allowed_types'] = 'docx|pdf|doc|gif|jpg|png|tiff'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:44:42.000

```
 $this->load->helper(array('form', 'url')); 
       if($this->input->post('upload')){ //submit name           

        $config['upload_path'] = "./public/uploadimg";
        $config['allowed_types'] = "png|jpg|jpeg";
        $config['max_size'] = '10000';
        $config['max_width'] = '1000';
        $config['max_height'] = '800';

        $this->load->library('upload',$config);

        if ( ! $this->upload->do_upload('userfile')){
            echo $this->upload->display_errors();
            //$this->load->view('upload_form', $error);
            }
        else{
            echo $this->upload->data($config);
            //$this->load->view('upload_success', $data);
            }
        } 
```

并确保您的操作网址正确。对不起，我英语不好。

# javascript - 在Javascript中获取范围内键的值

> ID：13355254
> 
> 赞同：-1
> 
> 时间：2012-11-13T03:37:45.127
> 
> 标签：javascript

我有一张如下表。如果用户在 X 范围内输入，我如何找到 i1 或 i2 或 i3 的值？谢谢

```
--------------------------
|   X    | i1 | i2 | i3  |
|--------|---------------|
|  0-50  |  0 | -1 |  2  |
|------------------------|   
| 51-100 | -1 | -1 |  1  |
|------------------------|   
|101-150 | -2 |  1 |  2  |
|------------------------|   
|        ..........      |
|------------------------|   
|________________________| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:54:37.517

用您的数据填写此表：

```
 var table = [["0-50",0,-1,2],["51-100",-1,-1,1],["101-150",-2,1,2]]; 
```

然后调用这个函数：第一个参数是要查找的数字，第二个是你想要的值（i1：1，i2：2，i3：3）

```
 function FindNumber(val, index)
            {
                for(i=0;i<table.length;i++)
                {
                    var range = table[i][0].split("-");
                    if(val >= range[0] && val <= range[1])
                    {
                        return table[i][index];
                    }
                }
            } 
```

# python - python中是否有任何标准的二叉搜索树实现

> ID：13355257
> 
> 赞同：3
> 
> 时间：2012-11-13T03:38:32.977
> 
> 标签：python, binary-search-tree

我想使用二叉搜索树。我知道 python 支持字典。但它是一个 hashmap 实现。我想知道 python 是否有任何可以导入的标准二叉搜索树实现。如果没有标准实现，有人可以建议任何经过良好测试的第三方实现。它还必须在 python 2.7.x 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:48:39.800

我可以建议二进制搜索树的开源代码，[https://github.com/pmontu/BSTPython](https://github.com/pmontu/BSTPython)

# visual-studio-2010 - Visual Studio 将动态链接更改为 win32 应用程序的静态链接

> ID：13355262
> 
> 赞同：3
> 
> 时间：2012-11-13T03:38:49.610
> 
> 标签：visual-studio-2010, dynamic, static-linking

该应用程序已使用动态配置创建

有人知道如何将动态链接更改为 win32 应用程序的静态链接吗？注意：只是改变

> `Properties`-> `Configuration Properties`-> `C/C++`->`Code Generation`

给出一个链接错误

感谢所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T03:17:16.083

在属性 -> 配置属性 -> C/C++ -> 代码生成

将“运行时库”从多线程 (/MT) 设置为多线程调试 (/MTd) 对我有用，因此不再需要 msvcr100.dll，因为它内置在 exe 中。因此启用了静态链接。

我没有收到任何链接错误。你得到的错误是什么？

# c# - 如何在 Silverlight 中实现 NavigationService

> ID：13355263
> 
> 赞同：1
> 
> 时间：2012-11-13T03:39:12.803
> 
> 标签：c#, silverlight, user-controls

我的 Silverlight 应用程序有多个 XAML 页面。例如，一个显示时钟，一个显示计时器。我有按钮可以像这样来回切换：

```
 private void switchRight(object sender, RoutedEventArgs e)
    {
        this.Content = new Clock();
    }

    private void switchLeft(object sender, RoutedEventArgs e)
    {
        this.Content = new Timer();
    } 
```

我正在尝试使用 NavigationService 来回切换，这样我就可以让其他页面在后台运行，而不是每次都创建一个新实例。

我在尝试

```
NavigationService.Navigate(new uri("/Timer.xaml", UriKind.Relative)); 
```

但它似乎没有做任何事情，我找不到任何好的例子来帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:10:56.423

这是一个链接 [http://blogs.msdn.com/b/dphill/archive/2009/04/28/silverlight-navigation-part-3.aspx](http://blogs.msdn.com/b/dphill/archive/2009/04/28/silverlight-navigation-part-3.aspx)，

此外，我认为您可以将线程用于后台进程。即当您启动计时器时，无需显示任何 xaml。

但是对于页面实例，您需要非常小心地管理它，否则 stackoverflow :)

根据业务规则，很难将导航确定为在 Web 浏览器中。

我们创建了自己的向导（带有规则）。您可以创建自己的 NavigationManager。对于验证，我可以提供[http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

# android - Android 客户端应用程序中“数据层”的最佳实践

> ID：13355265
> 
> 赞同：14
> 
> 时间：2012-11-13T03:39:42.693
> 
> 标签：android, design-patterns, data-access-layer, remote-access, application-design

这是一个设计/最佳实践问题..

我是 android 开发的新手，基本上是 web/移动解决方案的新手。

所以，我的问题是 - 组织从远程服务器获取数据的 android 应用程序结构时的最佳实践是什么？

对服务器的请求应该进入一个与服务器进行通信的类（获取和发布请求），还是应该将我的请求视为数据源，这意味着每个数据类都为自己管理它？

或者我应该有更多的抽象级别 - 一个级别用于获取数据，另一个级别用于使用某些接口而不知道源数据来自何处的模型？

我很好奇有经验的安卓开发者是如何处理这些设计问题的......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T04:06:04.377

[如前所述， Virgil Dobjanschi 演示文稿](http://dl.google.com/googleio/2010/android-developing-RESTful-android-apps.pdf)是一个很好的资源，它基本上告诉您从后台服务运行您的请求，这样活动就不会被破坏，并尽早将您的数据存储在数据库中。

有关更多技术细节，我这样做的方式是将应用程序分为三个组件：

1- 封装 HTTP 请求和响应处理的库（使用 ApacheHTTP），它可以处理简单的请求/响应和可能涉及 cookie（可能是登录所必需的）和修改 HTTP 标头的高级功能。

2- Marshal/Unmarsha 层，我在其中解析服务器数据（例如 XML 或 JSON）并将其转换为我的应用程序的其余部分将处理的对象（即模型）。

3-持久层。

根据 Dobjanschi 的介绍，我通常让数据请求在服务中运行，*而不是*在活动内的线程工作者中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T03:42:29.390

使用此 Google I/O 演讲中介绍的 3 个模型之一。它为您提供建议，帮助您了解应用架构定义的整个过程。它还可以防止您犯下初学者常犯的常见错误：

[http://www.youtube.com/watch?v=xHXn3Kg2IQE](http://www.youtube.com/watch?v=xHXn3Kg2IQE)

这篇文章也将帮助你：

[需要实现 Virgil Dobjanschi REST 实现模式的示例 Android REST 客户端项目](https://stackoverflow.com/questions/4948152/need-sample-android-rest-client-project-which-implements-virgil-dobjanschi-rest)

# ipc - 分布式系统中的通信——文件真的被使用了吗？

> ID：13355267
> 
> 赞同：0
> 
> 时间：2012-11-13T03:40:01.707
> 
> 标签：ipc, distributed-computing, inter-process-communicat

> *沟通类型*
> 
> *瞬态*• 消息仅在通信进程处于活动状态时存在
> 
> *持久*• 即使进程不活动，消息仍然存在 • 置于持久消息队列中执行接收进程）
> 
> *一份文件！*• 文件是发送给相同或不同程序的另一个激活（实例化、执行）的消息 • 范式扩展到消息传递（管道、端口文件）

上面的摘录是在我看过的一些幻灯片中的分布式系统的上下文中。我不明白幻灯片中“文件”的使用。这个文件在什么上下文中？分布式系统中是否存在文件通信，还是上面的描述有问题？

# java - 为什么通过更改内容窗格颜色来更改 JFrame 颜色？

> ID：13355274
> 
> 赞同：2
> 
> 时间：2012-11-13T03:41:33.440
> 
> 标签：java, swing, jframe, background-color

如果框架放置在内容窗格的顶部，则用户的外部颜色是 JFrame 的颜色。在这里，即使我在内容窗格之后绘制框架，但将显示内容窗格颜色。为什么？

```
public class GUI {
    public static void main(String[] args){
        JFrame frame = new JFrame();
        frame.setSize(300,300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        Color myColor = new Color(100,100,100);
        frame.setLocationRelativeTo(null);
        frame.getContentPane().setBackground(myColor);
        frame.setBackground(Color.red);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:45:07.173

您不应该设置 JFrame 本身的背景。你可以，是的，但效果不是很好。

它有一个覆盖整个框架的内容窗格，因此正如您所发现的，“下方”的任何颜色都将被覆盖。

所有布局和样式都应该在内容窗格中进行。

但是，您可以将内容窗格设置`container`为您选择的内容，使用特殊的布局或诸如此类的东西。

* * *

此外，当您说“在内容窗格之后绘制框架”时，实际上并没有发生。:) 您在设置内容窗格的背景后*设置背景颜色*，但它实际上并没有被重新绘制，直到它的重新绘制标志由应用程序运行时触发。

然后它会检查设置了什么颜色，然后进行绘画。您调用 setter 的顺序并不重要。

# java - 我是否正确实现了 Java 的同步构造？

> ID：13355275
> 
> 赞同：0
> 
> 时间：2012-11-13T03:41:35.183
> 
> 标签：java, synchronize

我对如何`synchronized`在 Java 中实现块有点困惑。

这是一个示例情况：

```
public class SlotWheel extends Thread implements ActionListener
{
  private int currentTick; // This instance variable is modified in two places

  private synchronized void resetCurrentTicks()
  {
    currentTick = 0;
  }

  private synchronized void incrementCurrentTicks()
  {
    ++currentTick;
  }

  public void actionPerformed(ActionEvent e)
  {
    resetCurrentTicks();
  }
} 
```

在程序运行时，用户可能会单击一个按钮，该按钮调用`actionPerformed`然后调用`resetCurrentTicks`. 同时，正在运行的线程正在调用`incrementCurrentTicks`每个循环迭代。

因为我还是 Java 和编程的新手，所以我不确定我的实现是否可以防止`currentTick`损坏。

`incrementCurrentTicks`我有这种感觉，我的实现只有在运行线程中被调用时才会起作用`actionPerformed`，但是因为我`currentTick`使用不同的方法进行操作，所以我的实现是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:47:33.627

看起来还可以。

请参阅[http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

*同一对象上同步方法的两次调用不可能交错*

当然，您应该考虑是否是 GUI 线程试图弄乱滴答声。在您的简单情况下，它可能没问题，但在更复杂的情况下，您可能希望将“工作”推出 GUI 线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:51:00.970

你的直觉是正确的。跨多个方法一致地同步对类属性的访问是很困难的。我建议您看一下[java.util.concurrent.atomic.AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html) ，而不是尝试这样做。它为您提供对底层属性的安全、并发访问，而无需编写和测试大量样板代码。

将其合并到您的代码中，您最终会得到如下内容：

```
public class SlotWheel extends Thread implements ActionListener {
  private AtomicInteger currentTick = new AtomicInteger();

  private void resetCurrentTicks() {
    currentTick.set(0);
  }

  private void incrementCurrentTicks() {
    currentTick.incrementAndGet();
  }

  public void actionPerformed(ActionEvent e)
  {
    resetCurrentTicks();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:02:57.800

首先，Java 保证“标量”值——整数、字符、浮点数等——本身是原子的，因为您不能同时修改这样的值并获得两种来源的混合。您可以保证获得两个“同时”修改中的一个值或另一个值。但是，您可能会得到不一致的结果，例如，`x++`因为两个线程可能会尝试同时递增`x`，并且可能只发生一个递增。（OTOH，两个线程同时执行`x = 7;`显然不会相互干扰——同时访问不会导致爆炸或任何事情。）

接下来，要了解`synchronized`关键字在两个稍微不同的上下文中使用——作为方法修饰符和块修饰符。两者之间有一些适度的差异。

当用作块修饰符时，您会说`synchronized(object_ref) {some block}`. 在这种情况下，该`synchronized`语句将锁定由 标识的对象，`object_ref`并且所有其他`syncronized`可能同时尝试执行引用*同一对象*的语句将在当前语句完成其块时被搁置。

当你将它用作方法修饰符时，功能是相同的，只是对于非静态方法，“this”对象是被锁定的对象，并且整个方法都被锁定“保护”。

（另一方面，对于静态方法，`Class`对象被锁定——一种稍微特殊的情况，相当于`synchronized(ClassName.class){some block}`同步块。）

重要的是要理解，`synchronized`要防止两个块或方法同时执行，它们必须引用同一个对象作为同步对象*，*而不仅仅是同一个类中的一个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-13T03:53:07.340

你是对的，因为它不安全。但是，您可以简单地对范围内的任何对象进行同步，并从方法定义中删除“已同步”

```
public class MyThread {
  private Object lock = new Object();
  private int counter;

  protected void threadMetod() {
    synchronized (lock) {
      counter++;
    }
  }

  public void otherReset() {
    synchronized (lock) {
      counter = 0;
    }
  }
} 
```

# java - JPA：如何编写查询函数

> ID：13355276
> 
> 赞同：0
> 
> 时间：2012-11-13T03:41:44.743
> 
> 标签：java, jpa, jpa-2.0, criteria-api

我从示例代码中知道如何编写一个查询函数，例如 findAll()：

```
 javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
    cq.select(cq.from(entityClass));
    return getEntityManager().createQuery(cq).getResultList(); 
```

但是我可以问如何根据名称应该大于18的where条件编写查询，并且我还混淆了如何编写基于左连接右连接或内连接的查询？

请注意，所有查询都返回列表结果，我目前的方法是获取结果，并操作列表（例如消除列表中的元素，或合并两个列表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:15:57.400

看，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria)

有关使用 Criteria API 的文档和示例

# linux - 黑客可以用非 root 用户 (Linux) 做什么？

> ID：13355277
> 
> 赞同：3
> 
> 时间：2012-11-13T03:41:55.587
> 
> 标签：linux, buffer-overflow

假设我让我的朋友“Stuart”在我的 VPS 上拥有一个权限非常有限的帐户，因为他问得非常好。由于 Stuart 不那么聪明，他不小心将自己的密码发布到了 IRC 聊天室，现在每个人和他/她的奶奶都可以 ssh 进入他的帐户。我的问题是，在有经验的黑客手中，会对系统造成什么样的破坏？

有人可以编写一个简单的 C 程序来故意操纵缓冲区溢出`strcpy`并提供一个 root shell 以完全控制系统，还是在操作系统中有内置的保护措施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:49:48.523

具有本地权限的攻击者可以执行任意数量的攻击者，包括但不限于：

*   叉子炸弹
*   访问绑定到 127.0.0.1 的服务
*   使用您的服务器作为恶意攻击的代理
*   从您的服务器提供恶意文件
*   本地漏洞利用
*   信息泄露
*   邮件中继
*   ETC

但是，您描述的攻击是不可能的，因为该文件必须由 root 拥有并设置 setuid 或 setgid 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:47:07.073

一旦有人可以访问机器，而不需要远程利用，他们只需要升级权限即可获得 root 访问权限。

远程攻击需要有一个外部可公开访问的易受攻击的服务。假设它得到很好的维护，不应该有任何人在标准 VPS 上运行。

一旦远程用户可以进行身份​​验证，他们就可以执行机器上的任何代码，或者引入更多代码。如果内核中或任何将 setuid 设置为 root 的程序中存在错误，他们可以使用它来将权限提升到具有更大权限的用户（例如 root）。

因此，攻击者编写的自定义程序中的简单缓冲区溢出不是您关心的问题 - 这不应该让他们拥有任何额外的权力。您担心的是系统中的一个漏洞，攻击者现在可以访问，因此，有能力利用。

# javascript - Javascript：如何将 JSON 点字符串转换为对象引用

> ID：13355278
> 
> 赞同：2
> 
> 时间：2012-11-13T03:41:58.507
> 
> 标签：javascript, json

我有一个字符串：`items[0].name`我想应用于一个 JSON 对象：`{"items":[{"name":"test"}]}`它包含在变量`test`. 我想将该字符串应用于对象以便搜索它（`test.items[0].name`）。我只能想到一种方法：使用我自己的函数解析方括号和点。还有其他方法可以做到这一点吗？也许使用评估？（即使我很想避免这种情况......）

为了清楚起见：我有一个 JSON 对象，它里面的内容真的无关紧要。我需要能够像这样查询对象：`theobject.items[0]`，这显然是 JSON 对象的正常行为。问题是，查询字符串（即。`items[0]`）是未知的——如果你愿意，可以称之为用户输入——它实际上是一个字符串（`var thisIsAString = "items[0]"`）。所以，我需要一种方法来附加该查询字符串`theobject`，以便它返回值`theobject.items[0]`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T03:54:57.807

```
function locate(obj, path) {

  path = path.split('.');
  var arrayPattern = /(.+)\[(\d+)\]/;
  for (var i = 0; i < path.length; i++) {
    var match = arrayPattern.exec(path[i]);
    if (match) {
      obj = obj[match[1]][parseInt(match[2])];
    } else {
      obj = obj[path[i]];
    }
  }

  return obj;
}

var name = locate(test, 'items[0].name'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:50:44.960

...JSON 没有对象，它只是一个字符串。如果您正在处理一个对象（即：您可以使用点/括号表示法来引用它），那么它只是一个 JavaScript 对象/数组......

因此，根据交易内容，如果您正在处理 100% 字符串：

```
'{"name":"string","array":[0,1,2]}' 
```

然后你需要发送它`JSON.parse`;

```
var json_string = '{"name":"string","array":[0,1,2]}',
    js_obj = JSON.parse(json_string);

js_obj.name; // "string"
js_obj.array; // [0,1,2]
js_obj.array[1]; // 1 
```

如果它不是一个字符串，并且确实是一个对象/数组，并且里面有其他对象/数组，那么你只需要去：

```
myObj.items[0].name = items[0].name; 
```

如果它是一个字符串，那么`.parse`它，并使用解析的对象来做我刚刚做的事情。如果它需要再次作为字符串发送到服务器，则使用`JSON.stringify`如下：

```
var json_string = JSON.stringify(js_obj); 
```

现在您已经获得了修改后的 JSON 字符串。

如果您需要支持 GhettoIE (IE < 8)，请`json2.js`从 Douglas Crockford 下载，如果找不到`window.JSON`.

# php - Drupal，谁（用户名）下载了什么？

> ID：13355283
> 
> 赞同：0
> 
> 时间：2012-11-13T03:42:22.670
> 
> 标签：php, drupal, drupal-7, drupal-hooks

我一直在寻找这个答案将近一个星期。

管理员查看经过身份验证的用户下载了哪些文件的最简单方法是什么？更具体地说，我需要用户的用户名和下载文件的名称，然后我可以检查我的注册以获取他们的特定电子邮件地址并将其用于潜在客户生成。

我试过谷歌分析，但我只能看到下载的内容和时间，而不是哪个用户名。

想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:29:46.707

1-确保您的文件存储为`private files`NOT `public files`。

2- 使用[hook_file_download](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_file_download/7) () 挖掘私有文件下载过程（你可以从那里做任何你想做的事情）。

希望这会有所帮助……穆罕默德。

# regex - scala：使用正则表达式来转义某些字符

> ID：13355285
> 
> 赞同：1
> 
> 时间：2012-11-13T03:42:42.463
> 
> 标签：regex, scala

我想用 \ 转义它们前面的某些字符

我想出了以下解决方案：

```
scala> val l = List(".", "+", " ")
scala> val x = "hola.vamos a+escapar"
scala> l.foldRight(x){ (char, text) => text.replaceAll("""\""" + char, """\\""" + char) }
res1: java.lang.String = hola\.vamos\ a\+escapar 
```

但我很确定一定有办法使用正则表达式来实现它，但我不知道如何引用匹配的文本......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T04:55:57.223

```
"hola.vamos a+escapar".replaceAll("([.+ ])", "\\\\$1") 
```

或者

```
"hola.vamos a+escapar".replaceAll("([.+ ])", """\\$1""") 
```

取决于您是否喜欢大量引号或大量反斜杠。

# php - Browscap.ini 丢失

> ID：13355286
> 
> 赞同：7
> 
> 时间：2012-11-13T03:43:01.217
> 
> 标签：php, browscap

我是 PHP 新手，我自己学习，我正在尝试使用 get_browser() 函数，但我检查了我的 phpinfo() 似乎我没有它，因为它说“不价值”。你能帮我设置一个，或者下载一个我可以使用的吗？非常感谢！我在 php 网站上查看了一个，但它说他们现在正在开发一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T05:15:12.213

您可以在此处获取更新的 browscap.ini 文件：http://browscap.org/ [-](http://browscap.org/)选择您需要的版本（在本例中为 PHP）。

# python - 用于警报管理的时间规则引擎

> ID：13355290
> 
> 赞同：0
> 
> 时间：2012-11-13T03:43:26.353
> 
> 标签：python, alarm, rule-engine, clips, temporal

我正在寻找像[CLIPS](https://en.wikipedia.org/wiki/CLIPS)这样的基于规则的系统（前向链接）， 而不是可以进行时间推理，即以下形式的短语：

如果条件激活超过 10 秒... 如果条件 1 在条件 2 激活后不到 10 秒内变为有效... 如果在 10 秒内发生超过 n 个事件... 如果第一个条件 1 然后条件 2 和条件 3 间隔不超过 2 秒.. .

这是一个警报系统，我更喜欢 ac 或 python 库或可以轻松连接到 python 的东西。

我找到了这个讨论，但没有多大帮助： [时空推理的规则引擎？](https://stackoverflow.com/questions/2469567/rules-engine-for-spatial-and-temporal-reasoning)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:09:03.650

它已经好几年没有被修改了，但是在 sourceforge 上有一个用于 CLIPS 的 Python 库，叫做[PyCLIPS](http://pyclips.sourceforge.net/web/)。他们也有相当完整的[手册](http://pyclips.sourceforge.net/manual/)。

# playframework-2.0 - play framework 2.0 evolutions 插件不会在启动时运行

> ID：13355297
> 
> 赞同：1
> 
> 时间：2012-11-13T03:44:13.990
> 
> 标签：playframework-2.0

当我通过“play run”运行我的 play framework 2.0 scala 应用程序时，我得到 sql 错误，因为 sql 演变（又名迁移）从未运行过。我从一个全新的数据库开始。

我知道 Evolutions 插件正在运行，因为我可以在我的数据库中看到一个空的 play_evolutions 表。

什么会导致这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:50:30.797

听起来您需要将进化设置为在开始播放时自动运行。您可以通过添加来做到这一点

```
applyEvolutions.default=true 
```

到您的 application.conf 文件。将此设置为 true，每次启动应用程序时都会应用进化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:46:28.183

这可能在两种情况下发生：

1.  进化文件有sql语法错误，导致进化失败。（这不是我的问题，但邮件列表中的某个人说这发生在他们身上。）

2.  1.sql 文件位于不正确的目录结构“evolutions.default/1.sql”而不是“evolutions/default/1.sql”下。不幸的是，intellij 无法区分并在项目浏览器中以相同的方式呈现这两种情况。

进一步阅读：

*   [如何在生产中应用进化](https://groups.google.com/forum/?fromgroups=#!searchin/play-framework/manual%2420evolution/play-framework/0DWLfJMDq4w/JZKlA9zugQYJ)
*   [关于进化的邮件列表线程在开始时没有运行](https://groups.google.com/forum/?fromgroups=#!searchin/play-framework/manual%2420evolution/play-framework/yoA7eRmLsUc/OFxQ-rym5G0J)

# c++ - 错误：输入结束时预期的“}”——当有一个时

> ID：13355300
> 
> 赞同：4
> 
> 时间：2012-11-13T03:44:33.403
> 
> 标签：c++, compiler-errors

编译时出现此错误：

project6.cpp：在函数'int main()'中：

project6.cpp:187：错误：输入结束时预期的“}”

但是，我的 int main () 函数在该行显然有一个结束括号，所以我对为什么会收到此错误感到困惑。我还检查了所有其他括号，发现没有一个没有关闭。任何帮助将非常感激！

```
#include <iostream>

using namespace std;

void initRace(char grid[52][72])
{  
   for(int r = 0; r < 52; r = r + 1)
   {  for(int c = 0; c < 72; c = c + 1)
      {  grid[r][0] = 'X';
         grid[0][c] = 'X';
         grid[r][71] = 'X'; // border
         grid[51][c] = 'X';
      }
      for(int c = 65; c <= 70; c = c + 1)
      {  grid[51][c] = 'F';         // finish line
      }
   }
   for(int r = 1; r <= 35; r = r + 1)
   {  for(int c = 10; c <= 29; c = c + 1)
      {  grid[r][c] = 'X';             // first barrier
      }
   }

   for(int r = 16; r <= 50; r = r + 1)
   {   for(int c = 40; c <=64; c = c + 1)
       {  grid[r][c] = 'X';             //second barrier
       }
   }

   for(int r = 1; r <= 50; r = r + 1)
   {   for(int c =1; c <=9; c = c + 1)
       {  grid[r][c] = ' ';             //first block of spaces
       }
   }

   for(int r = 36; r <= 50; r = r + 1)
   {   for(int c =10; c <=29; c = c + 1)
       {  grid[r][c] = ' ';             //second block of spaces
       }
   }

   for(int r = 1; r <= 50; r = r + 1)
   {   for(int c =30; c <=39; c = c + 1)
       {  grid[r][c] = ' ';             //third block of spaces
       }
   }

   for(int r = 1; r <= 15; r = r + 1)
   {   for(int c =40; c <=64; c = c + 1)
       {  grid[r][c] = ' ';             //fourth block of spaces
       }
   }

   for(int r = 1; r <= 50; r = r + 1)
   {   for(int c =65; c <=70; c = c + 1)
       {  grid[r][c] = ' ';             //fifth block of spaces
       }
   }
   grid[1][1] = 'O';
}

void printRace(char grid[52][72])
{  for (int i = 0 ; i < 52; i = i + 1)
   {  for (int j = 0 ; j < 72; j = j + 1)
      {  cout << grid[i][j] << " ";
      }
      cout << endl;
   }

}

int main(void)
{  char grid[52][72];

   initRace(grid);

   int xAcceleration;
   int yAcceleration;
   int xVelocity = 0;
   int yVelocity = 0;
   int xPosition = 1;
   int yPosition = 1;

   for(int i = 1; i < 100; i = i + 1)
   {  printRace(grid);
      cout << "Horizontal and vertical acceleration (-1,0,1): ";
      cin >> xAcceleration;
      cin >> yAcceleration; 

      if((xAcceleration != 0) && (xAcceleration != 1) && (xAcceleration != -1))
      {  if(i == 1)
         {  cout << "Crashed after " << i << " second" << endl;
         }
         else
         {  cout << "Crashed after " << i << " seconds" << endl;
         printRace(grid);
         i = 500;
      }

      if((yAcceleration != 0) && (yAcceleration != 1) && (yAcceleration != -1))
      {  printRace(grid);
         if(i == 1)
         {  cout << "Crashed after " << i << " second" << endl;
         }
         else
         {  cout << "Crashed after " << i << " seconds" << endl;
         }
         i = 500;
      }

      xVelocity = xVelocity + xAcceleration;
      yVelocity = yVelocity + yAcceleration;

      xPosition = xPosition + xVelocity;
      yPosition = yPosition + yVelocity;

      if((xPosition >= 10) && (xPosition <=29) && (yPosition >= 1) && (yPosition<= 35))
      {  grid[yPosition][xPosition] = 'O';
         printRace(grid);
         cout << "Crashed after " << i << " seconds" << endl;        // crashed into first barrier
         i = 500;
      }

      if((xPosition >= 40) && (xPosition <= 64) && (yPosition >= 16) && (yPosition <= 50))
      {  grid[yPosition][xPosition] = 'O';
         printRace(grid);
         cout << "Crashed after " << i << " seconds" << endl;        // crashed into second barrier
         i = 500;
      }

      if(xPosition <= 0)            //crashed into left border
      {  grid[yPosition][0] = 'O';
         printRace(grid);
         cout << "Crashed after " << i << " seconds" << endl;      
         i = 500;                               
      }

      if(yPosition <= 0)            //crashed into top border
      {  grid[0][xPosition] = 'O';
         printRace(grid);
         cout << "Crashed after " << i << " seconds" << endl;      
         i = 500; 
      }

      if(xPosition >= 71)           //crashed into right border
      {  grid[yPosition][71] = 'O';
         printRace(grid);
         cout << "Crashed after " << i << " seconds" << endl;      
         i = 500; 
      }

      if((yPosition >= 51) && (xPosition >= 1) && (xPosition <= 39))     //crashed into bottom border
      {  grid[51][xPosition] = 'O';
         printRace(grid);
         cout << "Crashed after " << i << " seconds" << endl;      
         i = 500; 
      }

      if((xPosition >= 65) && (xPosition <= 70) && (yPosition >= 51))      // crossed finish line
      {  grid[51][xPosition] = 'O';
         printRace(grid);
         cout << "Finished after " << i << " seconds" << endl;
         i = 500;
      }

      grid[yPosition][xPosition] = 'O';

   }

   return 0;

}      // THIS IS LINE 187 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:46:43.053

大 for 循环中的第一条`else`语句缺少右括号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T03:47:55.503

您的 else 块之一没有右括号...请看下面：

```
 else
     {  cout << "Crashed after " << i << " seconds" << endl;
     printRace(grid);
     i = 500; 
```

因此，右大括号的总数不等于左大括号，因此出现错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T03:48:25.400

错误在这里：

```
if((xAcceleration != 0) && (xAcceleration != 1) && (xAcceleration != -1))
 {  if(i == 1)
     {  cout << "Crashed after " << i << " second" << endl;
     }
     else
     {  cout << "Crashed after " << i << " seconds" << endl;
     printRace(grid);
     i = 500;
  } 
```

该`else`区块尚未关闭。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T03:50:27.053

您在下面的 else 子句中缺少一个右大括号 }：

```
 if((xAcceleration != 0) && (xAcceleration != 1) && (xAcceleration != -1))
  {  if(i == 1)
     {  cout << "Crashed after " << i << " second" << endl;
     }
     else
     {  cout << "Crashed after " << i << " seconds" << endl;
     printRace(grid);
     i = 500;
  } 
```

应该：

```
 if((xAcceleration != 0) && (xAcceleration != 1) && (xAcceleration != -1))
  {  if(i == 1)
     {  cout << "Crashed after " << i << " second" << endl;
     }
     else
     {  cout << "Crashed after " << i << " seconds" << endl;
        printRace(grid);
        i = 500;
     }
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T03:48:41.770

在下面的部分中添加一个右大括号（在标记线处）：

```
 if((xAcceleration != 0) && (xAcceleration != 1) && (xAcceleration != -1))
  {  if(i == 1)
     { 
         cout << "Crashed after " << i << " second" << endl;
     }
     else
     {  
          cout << "Crashed after " << i << " seconds" << endl;
          printRace(grid);
          i = 500;
      }//<-- This was missing
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T03:50:34.683

我认为这个块缺少正确的结束括号，

```
if((xAcceleration != 0) && (xAcceleration != 1) && (xAcceleration != -1))
  {  if(i == 1)
     {  cout << "Crashed after " << i << " second" << endl;
     }
     else
     {  cout << "Crashed after " << i << " seconds" << endl;
     printRace(grid);
     i = 500;
  } 
```

# android - 如何使用一个 AsyncTask 类在 Android 中应用不同的 Activity

> ID：13355306
> 
> 赞同：0
> 
> 时间：2012-11-13T03:45:35.583
> 
> 标签：android

我有一个 AsyncTask 类，它连接到 Web 服务以获取某些内容，然后打印到屏幕上。
这是我的代码：

```
public class GetCreditAsyncTask extends AsyncTask<Object, Boolean, String>{
   private MainActivity callerActivity;
   private String credit;
   public GetCreditAsyncTask(Context context){
        callerActivity = (MainActivity )context;
    }
   @Override
    protected String doInBackground(Object... params) { 
         .....//do something and get the credit
}
   @Override
    protected void onPostExecute(String response) {
          callerActivity.txtView.setText(credit);
   }

} 
```

它工作得很好，但现在，我还有一个 Activity`ProfileActivity`
也想用来`GetCreditAsyncTask`获得信用并将其打印到`txtView`，
但在开始时`GetCreditAsyncTask`，我`callerActivity`将`MainActivity`.
问题是如何只使用一个 AsyncTask 类，以便我可以调用它并获得功劳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:51:10.453

您可以定义两个活动都实现的接口。而不是强制转换为 MainActivity，您必须强制转换为该接口。

```
public interface ActivityListener {
   public void setText(String text);
}

public class MainActivity extends Activity implements ActivityListener {

...

    public void setText(String text) {
        TextView tv = findViewById(R.id.main_text);
        tv.setText(text);
    }

}

public class SecondActivity extends Activity implements ActivityListener {

...

    public void setText(String text) {
        TextView tv = findViewById(R.id.secondary_text);
        tv.setText(text);
    }

}

public class GetCreditAsyncTask extends AsyncTask<Object, Boolean, String>{
   private ActivityListener callerActivity;
   private String credit;
   public GetCreditAsyncTask(Context context){
        callerActivity = (ActivityListener) context;
    }
   @Override
    protected String doInBackground(Object... params) { 
         .....//do something and get the credit
}
   @Override
    protected void onPostExecute(String response) {
          callerActivity.setText(credit);
   }

} 
```

# c++ - 相同的随机数

> ID：13355310
> 
> 赞同：1
> 
> 时间：2012-11-13T03:46:06.960
> 
> 标签：c++, random, srand

> **可能重复：**
> [每次循环迭代都使用相同的随机数](https://stackoverflow.com/questions/9251117/same-random-numbers-every-loop-iteration)

这是我的代码：

```
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int attack() {
    srand((unsigned)time(NULL));
    int hits=0;
    for (int i=0;i<=3;i++) {
        int a = rand() % 6;
        if (a==6 || a==5)
        {
         hits++;   
        }
    }
    return hits;
}

int main () {
    int a=attack();
    cout << a << endl;
    int b=attack();
        cout << b << endl;
    int c=attack();
        cout << c << endl;
    int d=attack();
        cout << d << endl;
    int e=attack();
        cout << e << endl;
    int f=attack();
        cout << f << endl;
    int g=attack();
        cout << g << endl;
    int h=attack();
        cout << h << endl;
} 
```

为什么我的所有变量都在`main()`同一个数字中？

我只得到这样的输出：

```
1
1
1
1
1
1
1
1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T04:02:42.383

`srand()`应该在程序开始时调用*一次*（好吧，在你开始调用之前的某个时刻`rand()`）。

通过每次输入函数时调用它（快速连续），您将种子值重置为相同的值，这就是您看到重复数字的原因。

请注意，如果在您的程序运行时时间点击到新的一秒，您*可能*偶尔会得到不同的数字，但这不太可能，因为该特定程序应该在不到一秒的时间内完成。

在第一次调用之前将调用`srand()`移动到。`main()``attack()`

# android - ListView中LinearLayout的宽度超出屏幕宽度

> ID：13355311
> 
> 赞同：1
> 
> 时间：2012-11-13T03:46:16.513
> 
> 标签：android, android-listview, universal-image-loader

我遇到了一个我似乎无法解决的问题。我有许多图片，我想以两种不同的格式向用户展示，一种格式“列表”，显示跨越整个屏幕宽度的图片，另一种格式“网格”，显示一个网格，其中包含 3 张图片排。为此，我有一个附加信息的标题，它将持续在“网格”和“列表”之间切换。我把这一切都放在一个 ListView 中，并允许用户使用一个按钮（包含在 ListView 的标题中）进行切换，并简单地将适配器更改为放入 ListView。“列表”效果很好，但是当我切换到“网格”时，似乎只显示了一个图像，右侧有一堆空间。GridLayout 会更好，但鉴于要求，我没有 不明白为什么 ListView 对我不起作用。这是布局：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/event_detail_gridview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="3"
    android:orientation="horizontal" >

    <ImageButton
        android:id="@+id/grid_image_1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:scaleType="fitCenter"
        android:adjustViewBounds="true"
        android:padding="5dp"
        android:background="@android:color/transparent"
        android:onClick="showPictureDetail" />

    <ImageButton
        android:id="@+id/grid_image_2"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:scaleType="fitCenter"
        android:adjustViewBounds="true"
        android:padding="5dp"
        android:background="@android:color/transparent"
        android:onClick="showPictureDetail" />

    <ImageButton
        android:id="@+id/grid_image_3"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:scaleType="fitCenter"
        android:adjustViewBounds="true"
        android:padding="5dp"
        android:background="@android:color/transparent"
        android:onClick="showPictureDetail" />

</LinearLayout> 
```

我正在使用通用图像加载器，如下所示

```
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context.getApplicationContext())
    .threadPriority(Thread.NORM_PRIORITY - 2)
    .memoryCache(new WeakMemoryCache())
    .enableLogging()
    .build();

    imageLoader.init(config);

    options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.placeholder)
    .imageScaleType(ImageScaleType.IN_SAMPLE_INT)
    .cacheInMemory()
    .cacheOnDisc()
    .displayer(new SimpleBitmapDisplayer())
    .build();

    imageLoader.displayImage(url, imageView, options); 
```

我看到图像加载器以全屏宽度加载图片，但会认为 android:weightSum="3" 和 android:layout_weight="1" 会处理更大的图片。对此有什么想法吗？

# python - 新刽子手 Python

> ID：13355316
> 
> 赞同：0
> 
> 时间：2012-11-13T03:47:00.370
> 
> 标签：python, while-loop

我正在开发一个刽子手游戏，但我无法用猜测的字母替换破折号。新字符串只是添加了新的破折号，而不是用猜测的字母替换破折号。

如果有人可以提供帮助，我将不胜感激。

```
import random
import math
import os

game = 0
points = 4

original = ["++12345","+*2222","*+33333","**444"]
plusortimes = ["+","*"]
numbers = ["1","2","3"]

#FUNCTIONS

def firstPart():
    print "Welcome to the Numeric-Hangman game!"

def example():
        result = ""
        ori = random.choice(original)
        for i in range(2,len(ori)):
                if i % 2 == 0:
                        result = result + ori[i] + ori[0]
                else:
                        result = result + ori[i] + ori[1]
        return ori

# def actualGame(length):

#TOP LEVEL

firstPart()

play = raw_input("Do you want to play ? Y - yes, N - no: ")

while (play == "Y" and (points >= 2)):
    game = game + 1
    points = points
    print "Playing game #: ",game
    print "Your points so far are: ",points
    limit = input("Maximum wrong guesses you want to have allowed? ")
    length = input("Maximum length you want for the formulas (including symbols) (must be >= 5)? ")

    result = ""                                           #TRACE
    ori = random.choice(original)
    for i in range(2,len(ori)):
          if i % 2 == 0:
              result = result + ori[i] + ori[0]
          else:
               result = result + ori[i] + ori[1]   
    test = eval(result[:-1])

    v = random.choice(plusortimes)                         #start of randomly generated formula
    va = random.choice(plusortimes)
    formula = ""
    while (len(formula) <= (length - 3)):
        formula = formula + random.choice(numbers)
        formula2 = str(v + va + formula)

    kind = ""
    for i in range(2,len(formula2)):
            if i % 2  == 0:
                kind = kind + formula2[i] + formula2[0]
            else:
                kind = kind + formula2[i] + formula2[1]

    formula3 = eval(kind[:-1])

    partial_fmla = "------"

    print "     (JUST TO TRACE, the program invented the formula: )" ,ori
    print "     (JUST TO TRACE, the program evaluated the formula: )",test
    print "The formula you will have to guess has",length,"symbols: ",partial_fmla
    print "You can use digits 1 to 3 and symbols + *"

    guess = raw_input("Please enter an operation symbol or digit: ")

    a = 0
    new = ""
    while a<limit:
        for i in range(len(formula2)):
                if (formula2[i] == partial_fmla[i]):
                    new =  new + partial_fmla[i]

                elif (formula2[i] == guess):
                    new[i] = guess

                else:
                    new[i] =new + "-"

        a = a+1           
        print new

    guess = raw_input("Please enter an operation symbol or digit: ")

    play = raw_input("Do you want to play ? Y - yes, N - no: ") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:02:03.030

以下块似乎有问题：

```
elif (formula2[i] == guess):
    new[i] = guess
else:
    new[i] =new + "-" 
```

Python 不允许修改字符串中的字符，因为它们是不可变的（无法更改）。尝试将所需的字符附加到您的`new`字符串中。例如：

```
elif formula2[i] == guess:
    new += guess
else:
    new += '-' 
```

最后，您应该将`new`循环内的定义直接放在下面，因为您想在每次猜测后重新生成它。

# binding - 淘汰赛样式绑定不起作用ie8

> ID：13355318
> 
> 赞同：0
> 
> 时间：2012-11-13T03:47:07.333
> 
> 标签：binding, internet-explorer-8, knockout.js, styles

我正在使用 Knockout.js，并且我有以下绑定来添加间距（左边距）。

```
<div class="editor-field" data-bind="style : { 'margin-left' : ($root.getHierarchyLevel($index()) * 30 + 'px')}"> 
```

这适用于 IE9 和 IE8 兼容模式。但是当我在 Windows XP 上的 IE8 中运行相同的代码时，我看不到任何间距。

我创建了一个 jsfiddle 示例。这在 IE9 中的 blah 之前添加了间距，但在 IE8 中没有。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T20:56:05.747

来自： http: [//knockoutjs.com/documentation/style-binding.html](http://knockoutjs.com/documentation/style-binding.html)

“如果您想应用字体粗细或文本装饰样式，或名称不是合法 JavaScript 标识符的任何其他样式（例如，因为它包含连字符），您必须使用该样式的 JavaScript 名称。”

试试这个：

`<div class="editor-field" data-bind="style : { 'marginLeft' : ($root.getHierarchyLevel($index()) * 30 + 'px')}">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T03:11:38.240

对于有同样问题的人，我不得不使用 css 绑定来让它工作。我们也不能直接添加“类”绑定作为 attr 的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T20:02:59.140

不得不改变，因为它在 IE8 中不起作用

```
<div data-bind="style: { display: $data.items.isLoading() ? 'flex' : 'none' }"> 
```

至

```
<div data-bind="css: { 'searchLoaderFlex' :  $data.items.isLoading(), 'searchLoaderGone':  !$data.items.isLoading() }"> 
```

或者

```
<div data-bind="css: $data.items.isLoading() == true ? 'searchLoaderFlex' : 'searchLoaderGone'"> 
```

# objective-c - 如何在消息应用程序中制作未读按钮

> ID：13355324
> 
> 赞同：0
> 
> 时间：2012-11-13T03:47:43.067
> 
> 标签：objective-c, ios, xcode, html

我正在开发一个 div，它显示来自 iOS（UIwebview）应用程序上的数据库中的消息（如电子邮件），如下所示：

```
<div>
%title%
%message%
</div> 
```

我想做的就是以某种方式通知用户未读消息，就像在 iOS 上的电子邮件应用程序中一样。

我如何以编程方式放置某种仅显示未读消息的符号，一旦用户单击它，它就会从该 div 中消失。

# php - 将文件夹中的图像分配给wordpress中的博客文章

> ID：13355333
> 
> 赞同：0
> 
> 时间：2012-11-13T03:49:29.097
> 
> 标签：php, wordpress

我在一个文件夹中有一堆图片，如何在 wordpress 博客上显示每篇文章 1 张图片，可以随机选择图片（或不选择，没关系），但一旦显示，它应该始终保持分配给博客文章，并且每个博客文章都应该分配一个不同的图像，直到文件夹中的图像用完，然后它应该循环回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:02:33.200

如果您想为帖子设置图像，您还可以在帖子中添加自定义字段并将其名称设置为 thumb。

# groovy - 解析器和slurper之间的大小差异？

> ID：13355335
> 
> 赞同：2
> 
> 时间：2012-11-13T03:49:40.860
> 
> 标签：groovy, xml-parsing

我正在尝试使用 groovy 进行 xml 处理，但仍然很难理解它的行为。有人可以向我解释一下为什么下面的程序会吐出 1 和 0 吗？我在这两种情况下都期望 0，因为“onenode”元素没有孩子……我在这里错过了什么？

```
def text = """
 <characters>
   <props>
      <prop>dd</prop>
   </props>
   <character id="1" name="Wallace">
       <likes>cheese</likes>
   </character>
   <character id="2" name="Gromit">
       <likes>sleep</likes>
   </character>
   <onenode>help</onenode>
</characters>
"""

def xmlp = new XmlParser().parseText(text)
println xmlp.onenode[0].children().size() // prints out 1

def xmls = new XmlSlurper().parseText(text)
println xmls.onenode[0].children().size() // prints out 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:23:25.920

不同之处在于解析树的构建方式（无论是在使用的类中，还是在方法的工作方式中）。

如果我们编写一个闭包来询问树：

```
def dumpTypeTree = { node, prefix = '' ->
  def name  = node.respondsTo( 'name' ) ? "${node.name()} -- " : ''
  def clazz = node.getClass().name
  def txt   = node.respondsTo('text') ? node.text() : node
  println "${prefix}${name}${clazz} '${txt}'"
  if( node.respondsTo( 'children' ) ) {
    node.children().each { child ->
      owner.call( child, "$prefix  " )
    }
  }
} 
```

`XmlParser`当我们用构造的树调用这个方法时：

```
dumpTypeTree( new XmlParser().parseText(text) ) 
```

我们得到：

```
characters -- groovy.util.Node ''
  props -- groovy.util.Node ''
    prop -- groovy.util.Node 'dd'
      java.lang.String 'dd'
  character -- groovy.util.Node ''
    likes -- groovy.util.Node 'cheese'
      java.lang.String 'cheese'
  character -- groovy.util.Node ''
    likes -- groovy.util.Node 'sleep'
      java.lang.String 'sleep'
  onenode -- groovy.util.Node 'help'
    java.lang.String 'help' 
```

如您所见，`onenode`节点包含 a `String`，它是该节点的文本内容。该`text()`调用返回我们所期望的。

但是，使用 XmlSlurper 调用它：

```
dumpTypeTree( new XmlSlurper().parseText(text) ) 
```

给我们：

```
characters -- groovy.util.slurpersupport.NodeChild 'ddcheesesleephelp'
  props -- groovy.util.slurpersupport.NodeChild 'dd'
    prop -- groovy.util.slurpersupport.NodeChild 'dd'
  character -- groovy.util.slurpersupport.NodeChild 'cheese'
    likes -- groovy.util.slurpersupport.NodeChild 'cheese'
  character -- groovy.util.slurpersupport.NodeChild 'sleep'
    likes -- groovy.util.slurpersupport.NodeChild 'sleep'
  onenode -- groovy.util.slurpersupport.NodeChild 'help' 
```

如您所见，没有`String`子节点，仅调用`text()`叶节点才有意义，因为在叶之外，我们将所有文本连接在一起。

无论如何，希望这可以解释孩子数量的差异

# java - 如何让 Jbutton 填充 JPanel 以便按钮之间没有空格？

> ID：13355337
> 
> 赞同：3
> 
> 时间：2012-11-13T03:49:51.580
> 
> 标签：java, swing, jpanel, jbutton, layout-manager

我正在做这样的事情：

```
JFrame frame = new JFrame();
frame.setSize(216, 272);
frame.setVisible(true);
frame.setLocationRelativeTo(null);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JPanel jp = new JPanel();
GridLayout gl = new GridLayout(10, 2);
jp.setLayout(gl);

//this an an 18x18 png
Image img = ImageIO.read(new File("C:\\Users\\Josh\\workspace\\src\\red.png")); 

for(int ii=0; ii < 20; ii++)
{
    JPanel buttonPanel = new JPanel();
    JButton jb1 = new JButton(new ImageIcon(img));

    jb1.setBorder(BorderFactory.createEmptyBorder());

    buttonPanel.add(jb1);
    jp.add(buttonPanel);
}

frame.add(jp); 
```

产生：

![在此处输入图像描述](../Images/b6bbfab40360b4a711715c46f1e759ed.png)

无论我如何调整图像大小或使用 frame.size() 我都无法消除垂直间隙。一个块的顶部和另一个块的底部之间总是有空间。

![在此处输入图像描述](../Images/79e7c26d4200d3ecf1f8676bba8f89a5.png)

有谁知道如何删除一个按钮底部和下一个按钮顶部之间的空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T04:06:38.920

`GridLayout`首先通过[构造函数](http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html#GridLayout%28int,%20int,%20int,%20int%29)指定垂直（和水平）间距。

接下来，您需要剥离按钮的所有不需要的内容......

```
jb1.setMargin(new Insets(0, 0, 0, 0));
jb1.setContentAreaFilled(false);
jb1.setFocusPainted(false);
jb1.setBorder(new EmptyBorder(0, 0, 0, 0)); 
```

那么你应该被设置。

![在此处输入图像描述](../Images/705c13b23a73a243cedade1ad59d187d.png)

```
public class TestButtons {

    public static void main(String[] args) {
        new TestButtons();
    }

    public TestButtons() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ButtonPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ButtonPane extends JPanel {

        public ButtonPane() {

            setLayout(new GridLayout(10, 2, 0, 0));

            BufferedImage img = new BufferedImage(18, 18, BufferedImage.TYPE_INT_RGB);
            Graphics2D g2d = img.createGraphics();
            g2d.setColor(Color.RED);
            g2d.fillRect(0, 0, 18, 18);
            g2d.dispose();

            for (int ii = 0; ii < 20; ii++) {
                JButton jb1 = new JButton(new ImageIcon(img));
                jb1.setMargin(new Insets(0, 0, 0, 0));
//                jb1.setBorderPainted(false);
                jb1.setContentAreaFilled(false);
                jb1.setFocusPainted(false);
                jb1.setBorder(new EmptyBorder(0, 0, 0, 0));

                add(jb1);
            }
        }
    }
} 
```

**更新了单个面板**

面板的默认布局是`FlowLayout`，你需要一些不会添加更多填充的东西，比如`BorderLayout`甚至`GridBagLayout`

```
for (int ii = 0; ii < 20; ii++) {
    JButton jb1 = new JButton(new ImageIcon(img));
    JPanel panel = new JPanel(new BorderLayout());
    jb1.setMargin(new Insets(0, 0, 0, 0));
    jb1.setContentAreaFilled(false);
    jb1.setFocusPainted(false);
    jb1.setBorder(new EmptyBorder(0, 0, 0, 0));

    panel.add(jb1);
    add(panel);
} 
```

# javascript - 替换文本行的背景颜色

> ID：13355339
> 
> 赞同：0
> 
> 时间：2012-11-13T03:50:03.027
> 
> 标签：javascript, css, asp.net-mvc-3

我们的项目需要不同长度的文本的交替阴影线（灰-白-灰-白...），以不同的尺寸查看等，用于屏幕和打印查看。

我不认为交替表行或 div 是一种解决方案，因为一行（或一行/div/span）上的单词数可能会随着字体大小和浏览器大小调整而改变。

非常感谢斯蒂芬

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T04:15:08.477

给你，[jsFiddle](http://jsfiddle.net/xeH25/)。

在字体上设置 line-height，然后将 background-size 设置为该高度的两倍。在背景上放置一个线性渐变，使用 50% 硬色标，并将其设置为重复。

jsFiddle 只是我拼凑起来在 Webkit 浏览器中显示它的一个快速的东西。当然，您需要为所有其他浏览器添加供应商特定的代码。

```
p {
    line-height: 16px;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(50%, lightgray), color-stop(51%, white));
    background-size: 100% 32px;
}​ 
```

# delphi - 在 VCL 应用程序中禁用样式

> ID：13355341
> 
> 赞同：1
> 
> 时间：2012-11-13T03:50:03.460
> 
> 标签：delphi, vcl-styles

我正在将 VCL 样式添加到我的应用程序中，但也为用户提供了关闭它的选项，但我无法弄清楚如何在运行时全局执行此操作。

设置“TStyleManager.AutoDiscoverStyleResources := false”几乎可以工作，但它会弹出一条错误消息，提示“未找到样式 {style set}”，但在关闭该消息后完全符合我的要求。

我希望这段代码可以工作，但没有......

```
if (not ParamObj.UseDarkStyle) then
begin
  //TStyleManager.AutoDiscoverStyleResources := false;
  TStyleManager.SetStyle(TStyleManager.SystemStyle);
end; 
```

我也试过（最初）

```
TStyleManager.TrySetStyle('Windows'); 
```

但这也行不通。

我已经尝试过“Application.Initialize;”的这两个方面 没有区别

我错过了什么？在此先感谢，马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:39:33.907

找到了解决方案。初始化代码中有一个 TStyleManager.TrySetStyle ，我没有注意到它正在将其重置为深色样式。

# html - Sencha touch：如何将 JSON 结果加载到 HTML 面板中？

> ID：13355342
> 
> 赞同：0
> 
> 时间：2012-11-13T03:50:09.547
> 
> 标签：html, json, sencha-touch, panel

我一直在尝试所有我能想到的组合，我也没有从搜索中找到任何东西，但我想做的是从我的服务器加载一个 JSON 对象，然后用它来渲染一个带有视频、信息等的面板.

但是我什么都做不了，我在这里做错了什么？

```
 {
        xtype: 'panel',
            navigationBar: {hidden: true},
        title: 'Video feed',

            html: '<video width="320" height="240" controls="controls"><source src="{video.url}" type="video/mp4"></video>',

        store: {
        autoLoad: true,
            fields: ['video'],
            proxy: { type: 'jsonp', url: 'http://patrick.includu.com/app/appvideos/getVideoPage/234', reader: { type: 'json' } }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:14:19.090

首先，请注意您从代理返回的 JSON 无效。你可以[在这里](http://jsonlint.com/)验证它。

要从您的 JSON 呈现视图，请查看[Sencha 的 Dataview](http://docs.sencha.com/touch/2-0/#!/guide/dataview)。在这里，您使用 an`itemTpl`来呈现您的视频、信息等。因此，在您的情况下，如下所示：

```
itemTpl: '<video width="320" height="240" controls="controls"><source src="{video.url}" type="video/mp4"></video>' 
```

我希望这可以进一步帮助您！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:56:24.460

如果您的商店将有多个视频记录并且您想要显示所有这些视频，请尝试删除`html:`并添加：

```
tpl: '<tpl for=".">' + 
       '<video width="320" height="240" controls="controls"><source src="{video.url}" type="video/mp4"></video>' +
     '</tpl>' 
```

如果您一次只显示一个视频，只需执行以下操作：（`html:`但仍在删除）

```
tpl: '<video width="320" height="240" controls="controls"><source src="{video.url}" type="video/mp4"></video>' 
```

另一个问题：如果`html`指定了标签，即使`html: ''`它总是会覆盖指定的 tpl。

# c++ - 使用 Boost 属性树解析 SVG (XML)

> ID：13355347
> 
> 赞同：3
> 
> 时间：2012-11-13T03:51:08.997
> 
> 标签：c++, boost, boost-propertytree

我正在尝试使用 Boost C++ 的 ptree 解析以下 SVG (XML) 标记...

## SVG (XML)

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="395.275590551181" version="1.1"
     viewBox="0 0 757.48031496063 395.275590551181" xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" style="background-color: #ffffff;">
<desc>Some Description</desc>
<g visibility="hidden" pointer-events="all">
    <rect x="0" y="0" width="100%" height="100%" fill="none" />
</g>
<g>
    <path d="M 5 56 L 5 14 L 8 11 L 34 11 Z" />
    <path d="M 10 100 L 10 140 L 89 131 L 324 2 Z" />
</g>
<g>
    <path d="M 20 130 L 1 1 L 89 130 L 34 2 Z" />
</g>
</svg> 
```

## C++ 代码：

```
 typedef boost::property_tree::ptree::value_type vt;
    boost::property_tree::ptree root;
    read_xml("My_SVG.svg", root);
    BOOST_FOREACH (vt const &nodes, root.get_child("svg")) {
        //only action on g's and not desc, comments, etc.
        if(nodes.first=="g"){
            boost::property_tree::ptree g = nodes.second;
            //only action on g's that contain paths, not g->rect, for example.
            if(g.count("path") != 0){
                BOOST_FOREACH (vt const &p, g.get_child("path")) {
                    std::cout << p.second.get("d", "false") << std::endl;
                }
            }
        }
    } 
```

## 输出：

```
M 5 56 L 5 14 L 8 11 L 34 11 Z
M 20 130 L 1 1 L 89 130 L 34 2 Z 
```

## 问题：

它编译得很好，但它没有收到`M 10 100 L 10 140 L 89 131 L 324 2 Z`条目。为什么不`BOOST_FOREACH`通过每个步骤`<path>`的第二步`cout`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:15:49.003

第二个 BOOST_FOREACH 正在调用，它返回被调用`g.get_child("path")`的第一个孩子。您需要使用您正在寻找的密钥遍历所有孩子。`g``path`

这可以通过以下方式实现：

```
/** Find the range of children that have the given key. */
std::pair<assoc_iterator, assoc_iterator> 
   ptree::equal_range(const key_type &key);

/** Count the number of direct children with the given key. */
size_type count(const key_type &key) const; 
```

例如

```
 typedef boost::property_tree::ptree::value_type vt;
BOOST_FOREACH (vt const &nodes, pt.get_child("svg")) 
{
    //only action on g's and not desc, comments, etc.
    if(nodes.first=="g")
    {
        const boost::property_tree::ptree& g = nodes.second;
        //only action on g's that contain paths, not g->rect, for example.
        if(g.count("path") != 0)
        {
            std::pair< ptree::const_assoc_iterator,
                       ptree::const_assoc_iterator > bounds = g.equal_range( "path" );

            for( ptree::const_assoc_iterator it = bounds.first; it != bounds.second; ++it )
            {
                std::cout  << it->first << " : ";

                const ptree& d = it->second.get_child( "<xmlattr>.d" );
                std::cout << d.get_value<std::string>() << "\n";
            }
        }
    }
} 
```

我发现以下代码在使用 ptree 时很有用，它将显示整个解析的 ptree：

```
void display_ptree(ptree const& pt)
{
    BOOST_FOREACH( const ptree::value_type& v, pt )
    {e 
        std::cout << v.first << ": " << v.second.get_value<std::string>() << "\n";
        display_ptree( v.second );
    }
} 
```

# java - Java多参数方法问题帮我完成

> ID：13355350
> 
> 赞同：-1
> 
> 时间：2012-11-13T03:51:51.390
> 
> 标签：java, methods

我正在尝试完成以下代码我遇到了多参数方法的问题。任何帮助表示赞赏。

```
import java.util.Scanner;

public class Temp {

    public static void main(String[] args) {

      Scanner input = new Scanner(System.in);       //Creates the scanner for user input
      System.out.println ("Temperature converter");
      System.out.println ("Please make a selection using 1 & 2");
      System.out.println ("1 for celsius to fahrenheit");
      System.out.println ("2 for fahrenheit to celsius");
      int choice=input.nextInt();
        if (choice < 2 || choice > 1 )
      System.out.println ("Error your choice is not valid please select option 1 or 2");
      choice=input.nextInt();    
        System.out.println ("Enter temperature");
      double temp=input.nextDouble();
      double result=tempChanger(choice,temp);
        if (choice = 1)
             System.out.println ("The conversion of "+temp+" from celcius to fahrenheit is "+result );
        else
             System.out.println ("The conversion of "+temp+" from fahrenheit to celcius is "+result );

      public static double tempChanger(int choice, double temp)
      {
       int choice;
      if (choice = 1)
            double converted=9.0/5.0*temp+32;
        else
            double converted=5.0/9.0*(temp -32);

        Return converted;
        } 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:59:11.383

将此方法放在主要方法之外。另请注意，我对您的方法做了一些更改。你做了几件错误的事

```
1)  if (choice = 1)  should be  if (choice == 1)
2)  Return should be return
3)  have written a method in main method.
4) no need to define int choice; again in tempChanger method 
```

检查校正方法

```
 public static double tempChanger(int choice, double temp)
{

 double converted=0.0;
if (choice == 1)
       converted=9.0/5.0*temp+32;
  else
      converted=5.0/9.0*(temp -32);

  return converted;
  } 
```

找到你完成的编译版本

```
import java.util.Scanner;

public class Temp {

public static void main(String[] args) {

  Scanner input = new Scanner(System.in);       //Creates the scanner for user input
  System.out.println ("Temperature converter");
  System.out.println ("Please make a selection using 1 & 2");
  System.out.println ("1 for celsius to fahrenheit");
  System.out.println ("2 for fahrenheit to celsius");
  int choice=input.nextInt();
    if (choice < 2 || choice > 1 )
  System.out.println ("Error your choice is not valid please select option 1 or 2");
  choice=input.nextInt();    
    System.out.println ("Enter temperature");
  double temp=input.nextDouble();
  double result=tempChanger(choice,temp);
    if (choice == 1)
         System.out.println ("The conversion of "+temp+" from celcius to fahrenheit is "+result );
    else
         System.out.println ("The conversion of "+temp+" from fahrenheit to celcius is "+result );

}

public static double tempChanger(int choice, double temp)
{

 double converted=0.0;
if (choice == 1)
       converted=9.0/5.0*temp+32;
  else
      converted=5.0/9.0*(temp -32);

  return converted;
  } 
} 
```

# c# - 从方法中将字符串数组作为单个字符串返回

> ID：13355351
> 
> 赞同：3
> 
> 时间：2012-11-13T03:52:11.560
> 
> 标签：c#, string, arrays

我有一个字符串数组变量。

```
private string[] _documents; 
```

它的值是这样分配的。

```
string[] _documents = { "doc1", "doc2", "doc3" }; 
```

还有一种方法可以将字符串添加到该数组并返回它。

```
public string GetMail()
{
    return originalMessage + " " + _documents[0];
} 
```

定义`_documents[0]`只返回数组的第一个元素。

如何返回数组中的所有元素？（*有点像 PHP 中的 implode 函数*）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T03:53:08.993

我不熟悉 PHP，但您可以将字符串数组的所有元素与[`string.Join`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)：

```
return string.Join(" ", docs); 
```

第一个参数是分隔符；如果不需要分隔符，可以传递一个空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:58:49.773

```
public string GetMail()
{
    return originalMessage + string.Join(" ", _documents);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:58:10.373

循环它们并将每个附加到原始字符串。

```
 public string GetMail(string[] docs, string originalMessage)
 {
        for (int i = 0; i < docs.Length; i++)
              originalMessage = originalMessage + " " + docs[i];

         return originalMessage;
  } 
```

# android - PhoneGap 不能在一个应用程序中同时使用条形码扫描仪相机和相机

> ID：13355353
> 
> 赞同：1
> 
> 时间：2012-11-13T03:52:24.033
> 
> 标签：android, cordova

在我的PhoneGap应用程序中，当条码扫描器窗口打开时，如果我按下手机上的返回按钮，相机就回来了，应用程序中的网站页面也回来了。但是拍照的相机很好。

# c++ - 分段错误 || 访问冲突写入位置

> ID：13355354
> 
> 赞同：1
> 
> 时间：2012-11-13T03:52:27.020
> 
> 标签：c++, linked-list, segmentation-fault, fault

我想在双向链表中插入一个节点。我通过了位置，多项式的新系数及其幂。我没有编译错误，但是当我使用 Visual Studio 运行它时，我在 linux (g++) 中遇到了分段错误和访问冲突写入位置。

Program.exe 中 0x00bd20ba 处的未处理异常：0xC0000005：访问冲突写入位置 0xcdcdcdd9。

```
void Polynomial::insert( Term *pos, double newCoefficient, int power )
{
    Term *newTerm = new Term; // create a new node to insert

    // Link the new node to previous and next, given the position
    newTerm->prev = pos->prev;
    newTerm->next = pos;
    newTerm->prev->next = newTerm; // Here's where I'm getting the error
    newTerm->next->prev = newTerm;

    // change the coefficient and power
    newTerm->coefficient = newCoefficient;
    newTerm->power = power;
} 
```

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:58:11.960

好吧，如果`pos`是第一个节点，那么`pos->prev`一定是`NULL`。在这种情况下，语句`newTerm->prev->next = newTerm;`会崩溃，因为没有`NULL->next`!

您应该明确检查是否`pos`是列表中的第一个节点，并`newNode`相应地放置。

```
// Link the new node to previous and next, given the position
newTerm->prev = pos->prev;
newTerm->next = pos;
if(pos->prev) newTerm->prev->next = newTerm;
newTerm->next->prev = newTerm; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:59:39.717

`pos->prev`可能为 NULL 或未初始化。您必须在使用它们之前验证您的输入...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:58:59.973

请检查在执行程序的任何实例中是否 pos 可以是列表中的第一个节点。如果是，那么当您访问 NULL 指针的成员时，它将导致分段错误。

在编程时始终考虑极端情况，并确保为它们设置了所需的条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T07:49:43.443

我想知道你为什么要自己实现一个双向链表。您可以定义一个`struct`or`class`其中包含`coefficient`和`power`成员并将其用作 的值类型`std::list`。这将为您免费提供许多列表操作（例如插入和删除元素）。作为奖励，`std::list`带有用于标准算法的适当迭代器（而不是位置指针）。

由于`Polynomial`缺少类的其余部分（它是一个类，而不仅仅是一个命名空间，是吗？），很难提供更具体的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T09:40:24.937

当您尝试取消引用 NULL 指针时，通常会发生分段错误。

在处理指针时使用 NULL 检查被认为是一种很好的做法。在这种情况下，似乎 pos->prev 是 NULL，这会导致分段错误。

# python - 捕获游戏像素时 Python PIL-ImageGrab 不准确

> ID：13355355
> 
> 赞同：1
> 
> 时间：2012-11-13T03:52:47.923
> 
> 标签：python, python-imaging-library

我正在尝试捕获游戏的像素来编写机器人脚本。我有一个简单的功能：

```
def printPixel():
  while True:
    flags, hcursor, (x,y) = win32gui.GetCursorInfo()
    print x,y,':',ImageGrab.grab().getpixel((x,y)) 
```

这将打印该像素的当前 x,y 坐标和 RGB 值。这在我的桌面上按预期工作，悬停在各种图标等上，但相同的功能在游戏中不起作用。有什么想法吗？

编辑：当我将图像保存到文件并对保存的图像执行相同的操作时，它在游戏中完美运行。但是，它的速度要慢得多。我想对内存中的图像进行操作，而不是从文件中操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:02:15.803

出于性能原因，视频游戏通常直接处理图形系统，因此一些典型的 Windows api 可能无法在它们上运行。尝试按下打印屏幕按钮截取屏幕截图。如果这捕获了您的屏幕，那么您可以在 python 中截取屏幕截图并检查您捕获的图像，同时考虑光标位置。

要在 Windows 上截屏，您可以查看这个问题的答案[Fastest way to take a screenshot with python on windows](https://stackoverflow.com/a/3586280/1699750)它使用`win32gui`您正在使用的库。

# python - 在哪里存放执行生物信息学分析的 Python 脚本？

> ID：13355358
> 
> 赞同：4
> 
> 时间：2012-11-13T03:53:06.780
> 
> 标签：python, publishing, bioinformatics, biopython

我用 Python 编写了一个分析管道，我认为它对其他人有用。我想知道是否习惯在 GitHub 上发布此类脚本，是否有专门的地方可以为 Python 脚本执行此操作，或者是否有更具体的地方可以放置与生物学相关的 Python 脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T03:57:22.747

虽然有很多方法可以解决这个问题，但其中一种习惯性的解决方案是确实将其发布在 github 上，然后从您的研究机构的网站链接到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T04:05:52.470

您也可以在[sourceforge](http://sourceforge.net)上发布它。发布了所有类型的科学、工程等脚本，数以百万计的人下载这些脚本。Github 也是一个不错的选择，但我确实相信[sourceforge](http://sourceforge.net)在观众和下载中更受欢迎。另外，你可以发布一个[openwetware](http://openwetware.org/) wiki 并在那里发布代码，openwetware 是一个科学使用的 wiki 系统，我以前使用过并推荐它。或者你可以通过镜像链接两个伟大的开源平台，sourceforge 和 github，这样你的项目基本上“同步”到两个平台：检查一下：

[http://www.17od.com/2010/11/11/migrating-a-sourceforge-subversion-repository-to-github/](http://www.17od.com/2010/11/11/migrating-a-sourceforge-subversion-repository-to-github/) -overview [http://www.xcore.com/forum/viewtopic.php?f= 3&t=162](http://www.xcore.com/forum/viewtopic.php?f=3&t=162) - 如何实际镜像

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T04:11:16.613

另一种选择是将其发布在[bioinformatics.org](http://www.bioinformatics.org/wiki/Hosting)上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T07:20:13.407

*   源锻造网
*   github.org
*   [http://figshare.com](http://figshare.com)
*   ...

另见[“关于在 Github 上保存已发布的生物信息学代码”](http://caseybergman.wordpress.com/2012/11/08/on-the-preservation-of-published-bioinformatics-code-on-github/)

# python - 从进程的标准输出读取时，NSTask 需要刷新，终端不需要

> ID：13355363
> 
> 赞同：2
> 
> 时间：2012-11-13T03:53:53.503
> 
> 标签：python, objective-c, stdout, pipe, nstask

我有一个简单的 Python 脚本，它询问您的姓名，然后将其吐出：

```
def main():
    print('Enter your name: ')
    for line in sys.stdin:
        print 'You entered: ' + line 
```

很简单的东西！在 OS X 终端中运行它时，效果很好：

```
$ python nameTest.py 
Enter your name: 
Craig^D
You entered: Craig 
```

但是，当尝试通过 运行此过程时`NSTask`，**只有在 Python 脚本中添加了额外的 flush() 调用时才会出现标准输出。**

这就是我`NSTask`配置管道和管道的方式：

```
NSTask *_currentTask = [[NSTask alloc] init];
_currentTask.launchPath = @"/usr/bin/python";
_currentTask.arguments = [NSArray arrayWithObject:@"nameTest.py"];

NSPipe *pipe = [[NSPipe alloc] init];
_currentTask.standardOutput = pipe;
_currentTask.standardError = pipe;

dispatch_queue_t stdout_queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);

__block dispatch_block_t checkBlock;

checkBlock = ^{
    NSData *readData = [[pipe fileHandleForReading] availableData];
    NSString *consoleOutput = [[NSString alloc] initWithData:readData encoding:NSUTF8StringEncoding];
    dispatch_sync(dispatch_get_main_queue(), ^{
        [self.consoleView appendString:consoleOutput];
    });
    if ([_currentTask isRunning]) {
        [NSThread sleepForTimeInterval:0.1];
        checkBlock();
    } else {
        dispatch_sync(dispatch_get_main_queue(), ^{
            NSData *readData = [[pipe fileHandleForReading] readDataToEndOfFile];
            NSString *consoleOutput = [[NSString alloc] initWithData:readData encoding:NSUTF8StringEncoding];
            [self.consoleView appendString:consoleOutput];
        });
    }
};

dispatch_async(stdout_queue, checkBlock);

[_currentTask launch]; 
```

但是在运行时`NSTask`，它是这样显示的（它最初是空白的，但在输入我的名字并按 CTRL+D 后，它会立即完成）：

```
Craig^DEnter your name: 
You entered: Craig 
```

**所以，我的问题是：**如何在不需要 Python 脚本中的额外 flush() 语句的情况下`stdout`从 my中读取？`NSTask`为什么*Enter your name:*提示在运行时不会立即出现`NSTask`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T05:07:57.720

当 Python 看到它的标准输出是一个终端时，它会安排`sys.stdout`在脚本从`sys.stdin`. 当您使用 运行脚本`NSTask`时，脚本的标准输出是管道，而不是终端。

### 更新

对此有一个特定于 Python 的解决方案。您可以将`-u`标志传递给 Python 解释器（例如`_currentTask.arguments = @[ @"-u", @"nameTest.py"];`），它告诉 Python 根本不要缓冲标准输入、标准输出或标准错误。你也可以`PYTHONUNBUFFERED=1`在进程的环境中设置来达到同样的效果。

### 原来的

适用于任何程序的更通用的解决方案使用所谓的“伪终端”（或历史上的“伪电传打字机”），我们将其简称为“pty”。（实际上，这就是终端应用程序本身所做的。它是一台罕见的 Mac 具有连接到串行端口的物理终端或电传打字机！）

每个 pty 实际上是一对虚拟设备：一个从设备和一个主设备。您写入主设备的字节，您可以从从设备读取，反之亦然。因此，这些设备更像是套接字（双向）而不是管道（单向）。此外，pty 还允许您设置终端 I/O 标志（或“termios”），以控制从站是否回显其输入，是一次传递一行还是一次传递一个字符等等。

`openpty`无论如何，您可以使用该功能轻松打开主/从对。这是一个小类别，您可以使用它使`NSTask`对象使用从属端作为任务的标准输入和输出。

### NSTask+PTY.h

```
@interface NSTask (PTY)

- (NSFileHandle *)masterSideOfPTYOrError:(NSError **)error;

@end 
```

### NSTask+PTY.m

```
#import "NSTask+PTY.h"
#import <util.h>

@implementation NSTask (PTY)

- (NSFileHandle *)masterSideOfPTYOrError:(NSError *__autoreleasing *)error {
    int fdMaster, fdSlave;
    int rc = openpty(&fdMaster, &fdSlave, NULL, NULL, NULL);
    if (rc != 0) {
        if (error) {
            *error = [NSError errorWithDomain:NSPOSIXErrorDomain code:errno userInfo:nil];
        }
        return NULL;
    }
    fcntl(fdMaster, F_SETFD, FD_CLOEXEC);
    fcntl(fdSlave, F_SETFD, FD_CLOEXEC);
    NSFileHandle *masterHandle = [[NSFileHandle alloc] initWithFileDescriptor:fdMaster closeOnDealloc:YES];
    NSFileHandle *slaveHandle = [[NSFileHandle alloc] initWithFileDescriptor:fdSlave closeOnDealloc:YES];
    self.standardInput = slaveHandle;
    self.standardOutput = slaveHandle;
    return masterHandle;
}

@end 
```

你可以像这样使用它：

```
NSTask *_currentTask = [[NSTask alloc] init];
_currentTask.launchPath = @"/usr/bin/python";
_currentTask.arguments = @[[[NSBundle mainBundle] pathForResource:@"nameTest" ofType:@"py"]];

NSError *error;
NSFileHandle *masterHandle = [_currentTask masterSideOfPTYOrError:&error];
if (!masterHandle) {
    NSLog(@"error: could not set up PTY for task: %@", error);
    return;
} 
```

然后，您可以使用 读取任务并写入任务`masterHandle`。

# java - list.toArray(T[] a)，如果“T”是“运行时类型”怎么办？

> ID：13355364
> 
> 赞同：5
> 
> 时间：2012-11-13T03:53:55.623
> 
> 标签：java, list, generics, toarray

`list.toArray(T[] a)`，如果`T`是“运行时类型”怎么办？

`List`Java中的“ ”接口，方法：`T[] toArray(T[] a)`
好的，这是一个很老的问题，通常我们这样使用它：

```
String[] array = list.toArray(new String[0]);
String[] array = list.toArray(new String[list.size()]); 
```

我的问题是，我在编码时不知道“T”类型是什么，“T”类型只能在运行时决定，这里是例子：

```
List list=...;  // no generic type declared on this List
Class<?> clazz=...; //yeah, this is the real type of the element of the list, I can sure about that 
```

现在我需要将列表转换为元素类型为clazz的数组，我该怎么办？

可能你想知道为什么我有这种需求：
我正在对 Morphia 进行一些修改（它是一个 java-mongoDB 框架）。我需要从 mongoDB 获取数据并将其设置到 POJO 的正确字段中。在某些情况下，字段类型是数组，获取的数据是一个BasicDBList实体（它扩展了ArrayList），所以必须将BasicDBList实体转换成一个与POJO字段类型兼容的数组。

我查看了 ArrayList 的源代码，然后用一些丑陋的代码实现了我的目标：

```
List list=...;
Class<?> clazz=...;
Object targetArray=Array.newInstance(clazz, list.size());
list.toArray((Object[])targetArray); 
```

请问有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T04:01:03.607

如果您的类型仅在运行时已知，则此处没有解决方案。

Java 泛型是编译时检查，实际上并不存在于运行时，它被称为类型擦除[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

这意味着运行时环境不进行此类检查（例如，您可以将 Integers 放入通常类型为 String 的 List 中，并且使用 Object o = list.get(0) 会运行得很好）

泛型的真正意义在于提供编译时检查以防止编码错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:39:22.630

在评论中@arne.b 的帮助下，我认为没有更好的方法可以做到这一点：

```
List list=...;
Class<?> clazz=...;
Object[] targetArray=(Object[])Array.newInstance(clazz, list.size());
Object[] myArray=list.toArray(targetArray); 
```

然后我可以将其设置为字段而不会出错：

```
Field field=...;    //ComponentType of this field can be sure is "clazz"
field.set(entity,myArray); 
```

或者我可以这样做以手动将其转换为实际类型：

```
Class<?> arrayClazz=Class.forName("[L"+clazz.getName()+";");
arrayClazz.cast(myArray); 
```

# c++ - 有没有办法在不重载 << 运算符的情况下打印出 std::list 的内容？

> ID：13355368
> 
> 赞同：1
> 
> 时间：2012-11-13T03:54:49.673
> 
> 标签：c++, list, stl

我有一些形式：

```
struct Tree {
    string rule;
    list<Tree*> children;
} 
```

我试图从这个 for 循环中打印出来。

```
for(list<Tree*>::iterator it=(t->children).begin(); it != (t->children).end(); it++) {
    // print out here
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T04:04:08.683

你总是可以把递归变成迭代。这是一个辅助队列：

```
std::deque<Tree *> todo;

todo.push_back(t);

while (!todo.empty())
{
    Tree * p = todo.front();
    todo.pop_front();

    std::cout << p->rule << std::endl;

    todo.insert(todo.end(), p->children.begin(), p->children.end());
} 
```

在 C++11 中，这当然是一个`for`循环：

```
for (std::deque<Tree *> todo { { t } }; !todo.empty(); )
{
    // ...
} 
```

# python-2.7 - “/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/”和“/Library/Python/2.7/”有什么区别

> ID：13355370
> 
> 赞同：4
> 
> 时间：2012-11-13T03:55:11.220
> 
> 标签：python-2.7

我正在使用mac，一个快速的问题，有人可以告诉我这两个目录的区别吗？

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/

/Library/Python/2.7/site-packages/

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-21T08:41:22.350

### 蟒蛇.org

来自 python.org 的安装程序安装到`/Library/Frameworks/Python.framework/`，并且只有该 python 可执行文件在包含的站点包目录中查找包。

### /图书馆/Python

相比之下，dir`/Library/Python/2.7/site-packages/`是一个全局位置，您可以放置​​ python 包，所有 python 2.7 解释器都会。（例如 OS X 自带的 python 2.7）。

### 〜/库/Python

dir `~/Library/Python/2.7/site-packages`（如果存在）也可以使用，但仅供您的用户使用。

### 系统路径

在 python 中，您可以检查当前使用了哪些目录`import sys; print(sys.path)`

### 自制

请注意，通过自制软件安装的 python 将把它的站点包放入，`$(brew --prefix)/lib/python2.7/site-packages`但也能够从`/Library/Python/2.7/site-packages`和导入包`~/Library/Python/2.7/site-packages`。

# matlab - 在 MATLAB 中采样数据

> ID：13355372
> 
> 赞同：4
> 
> 时间：2012-11-13T03:55:32.907
> 
> 标签：matlab

我有两条数据。一个是实际的`fulldata`，它是 49625x6 数字数据的数据集，另一个是该数据的索引，其 target_class 命名`Book2`为 49625x1。

Book2 有六个名称（字符串）一遍又一遍地重复以匹配 fulldata 数据集条目。我想使用 Book2 从 fulldata 中提取 1000 个样本，其中 1000 个样本中有 25% 是“蓝色”，75% 是“红色”，然后将其包含在一个名为`sampledata`.

如何在 MATLAB 中实现这一点？

伪代码：

从 Book2 中选择 250 个蓝色样本，不确定如何“选择”250 个随机“蓝色”样本 `bluesample = indX(Book2, :)`或`Book2(indX, :)`不确定。

从 Book2 中选择 750 个红色样本，再次不确定如何“选择”750 个随机“红色”样本 `redsample = indX(Book2, ;)`，或者`Book2(indX, :)`在这里再次不确定。

将蓝色和红色样本组合成子样本。

```
subsample = join(bluesample, redsample) 
```

找到 subsample 的索引并从 fulldata 创建 sampledata：

```
sampledata = subsample(indX(fulldata), :) This line is probably wrong 
```

这是两个数据集的图像：

![在此处输入图像描述](../Images/bf376fbd984cc9d61b7848298ee369e1.png)

Book2 中的每一行都与 fulldata 中的行匹配。我正在尝试使用Book2从fulldata中选择一定数量的“正常”和一定数量的“不正常”（是的，我知道它们没有恰当地命名）数据的能力，因为Book2是fulldata的索引和包含类标签。

所以就我的数据集而言，这样说起来更容易：

```
Choose 250 random samples of the string "normal." from Book2 and log the row number.
Choose 750 random samples of the string "not normal." from Book2 and log the row number.
Combine the two random samples of row numbers together.
Make a new dataset (1000x6) using the combined row numbers (above) of fulldata. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:40:40.980

使用 strmatch 提取“正常”记录：

```
normIdx = strmatch('normal.', Book2);
normalSubset = fulldata(normIdx, :); 
```

然后生成一个包含 250 个随机非重复整数的列表，我用谷歌搜索了“matlab 非重复随机整数列表”并从[第一个结果](http://www.mathworks.com/matlabcentral/newsreader/view_thread/283155)：

```
p = randperm(size(normalSubset , 1));
p = p(1:250)-1; 
```

所以现在来获取你随机选择的 250 条正常记录

```
normalSample = normalSubset (p, :); 
```

`normalSample`将是 250 x 6。现在对“不正常”做同样的事情。得到`notNormalSample`(750 x 6) 然后结合得到

```
sample = [normalSample ; notNormalSample ] 
```

因此，`sample`所有法线都会出现在非法线之前，如果您想`randperm()`再次混合使用它们：

```
sample = sample(randperm(1000), :); 
```

# sql - 我如何将查询的条件作为数据中的列

> ID：13355373
> 
> 赞同：1
> 
> 时间：2012-11-13T03:55:35.793
> 
> 标签：sql

我想得到一个像图片一样的 SQL 〜现在我想得到前 3 个项目 ID（4,3,2）总共 8 个结果的结果。那么我该如何修改我的sql呢？（实际项目中的 SQL 太复杂了~，大概 10 个我的 DBTable 和 10 个 SAP 表~我关心效率所以我不想使用临时表）你能帮我吗~？![在此处输入图像描述](../Images/47d734930687627735ee9ace09e39138.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:00:04.000

如果您正在使用`SQL Server`，请使用`TOP`

```
SELECT *
FROM table1
WHERE ProjectID IN
(
  SELECT DISTINCT TOP 3 ProjectID
  FROM table1
  ORDER BY ProjectID DESC
)
ORDER BY ProjectID Desc 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/c646b/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:58:56.083

如果使用 MySQL，则：

```
 SELECT * FROM TABLE1 
   ORDER BY PROJECTAID ASC
   LIMIT 10; 
```

# c# - 使用 DTO 和 POCO 对象时处理导航属性的最佳做法是什么？

> ID：13355377
> 
> 赞同：10
> 
> 时间：2012-11-13T03:56:14.340
> 
> 标签：c#, entity-framework, poco, dto

我正试图围绕领域驱动开发。我想确保我有一个良好的基础和理解它，所以如果这里避免使用 AutoMapper 或类似的建议会很棒。我的架构目前涉及以下内容：

![在此处输入图像描述](../Images/108d289d8eb4ba1770bd2be48326ae99.png)

*   WCF 服务负责持久性（使用实体框架）和服务器端验证。它将 POCO 转换为 DTO，然后将 DTO 传输给客户端。

*   客户端接收 DTO 并将其转换为 POCO。转换 POCO 和 DTO 的类在服务和客户端之间共享。

*   POCO 的实现`IValidatableObject`和`INotifyPropertyChanged`由服务器和客户端使用，但它们不用于数据传输。DTO 是不包含任何行为的属性包。

(1)**问题 #1。**这种架构是否适合领域驱动设计。
(2)**问题 #2。**POCO 是否适合包含导航属性？对我来说，POCO 在 DDD 架构中包含导航属性确实感觉不对，因为拥有一个可能会或可能不会被序列化的导航属性对我来说没有意义。拥有一个专门的 DTO 对我来说更有意义。

例如，这是我的架构中的 POCO/DTO。

```
// Enforces consistency between a POCO and DTO
public interface IExample
{
    Int32 Id { get; set; }
    String Name { get; set; }
}

// POCO
public class Example : IExample, INotifyPropertyChanged, IValidatableObject
{
    private int id;
    private string name;

    public Int32 Id {
        get { return this.id; }
        set {
            this.id = value;
            OnPropertyChanged("Id");
        }
    }

    public String Name {
        get { return this.name; }
        set {
            this.name = value;
            OnPropertyChanged("Name ");
        }
    }

    public ICollection<Example2> ChildExamples {
        get { ... }
        set { ... }
    }

    // INotifyPropertyChanged Members
    // IValidatableObject Members
}

// DTO
public class ExampleInfo : IExample
{
    public Int32 Id { get; set; }
    public String Name { get; set; }
    public ICollection<Example2Info> ChildExamples { get; set; }
} 
```

但这似乎并不正确，因为您可能并不总是需要导航属性，并且在面向对象的体系结构中拥有一个空（null）对象（或集合）似乎是非常错误的。您有时还必须处理序列化和转换深层对象层次结构，这并非易事。对于专门的 DTO 来说这会更有意义，因此空导航属性的持续可能性不会出现问题，这些属性可能需要也可能不需要序列化或填充。

```
public class ComplexInfo
{
    public Example ExampleInfo { get; set; }
    public ICollection<Example2Info> ChildExamples { get; set; }
} 
```

这些情况在现实世界的企业 DDD 风格架构中是如何处理的？这里可以提供哪些其他建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T14:10:17.227

我同意 Jehof 关于将 DTO 发送到您的客户端并在您的 WCF 下的服务器端保持域模型清洁的观点。

关于导航属性，Eric Evans 在领域驱动设计中强调的一点是尊重不变量。因此，在上面的示例中，问问自己 Id 和 Name 是否真的会在对象的生命周期内发生变化，或者它们是不变的？许多 DDD 风格的开发人员甚至不会在这些属性上放置 setter。而是通过构造函数构建对象的不变状态。如果 Name 可以更改，您可能需要一个名为 Rename(string newName) 的方法，因为无论如何您可能都希望将某种业务规则放在那里。

上面图层中的一个危险信号是您在 DAL 中拥有整个对象模型。您所说的程序集确实没什么大不了的，但我认为这表明您倾向于从数据角度继续思考应用程序。DDD 的重点是根据逻辑和行为而不是数据和结构来考虑您的对象模型。我（以及大多数其他 DDD 开发人员，我认为）将数据访问层视为返回聚合根的存储库类。存储库负责将您的水合 poco/entity 对象从 DAL(repository) 返回到业务层（及更高层，例如上面示例中的应用程序/服务层类或 WCF）。在您使用 EF 的情况下，您将让存储库包装您的 DataContext 调用并返回实体对象。

我可以继续说下去，因为您的问题实际上是针对 DDD 的基本原理，其中有几个。我会推荐 1) 阅读 Eric Evans 的书，“领域驱动设计”。2) 请记住，DDD 针对的是复杂的业务软件。如果您尝试将其应用于一个简单的 CRUD 应用程序，该应用程序实际上只是 UI 表单和与 DB 表的数据绑定，那么很难看到 DDD 方法形成，因为它解决的问题不存在。因此，请保持观点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T20:34:35.607

> 这种架构是否适合领域驱动设计？

不是完全。看看[六边形架构](http://alistair.cockburn.us/Hexagonal+architecture)，了解更现代的架构风格，它非常适合 DDD。在六边形中，您的域是核心，各种组件“附加”到它。例如，WCF 服务将被视为六边形体系结构中的适配器，因为它使您的域适应 TCP 或 HTTP 等通信技术。通常，您将拥有一个应用程序服务，它在您的域上建立一个外观并有效地表示用例。WCF 服务可以引用此应用程序服务以通过 HTTP 公开功能。不幸的是，“服务”术语可能有点混为一谈。

> POCO 是否适合包含导航属性？

这是合适的，但正确的答案是视情况而定。您陈述的导航属性的问题之一是它们可能会或可能不会针对特定 DTO 进行序列化。这告诉我您正在谈论查询。某些查询只需要聚合/实体 (POCO) 上的属性子集，因此相应的 DTO 仅具有那些必需的属性。检索整个实体和导航属性似乎很浪费。要解决此问题，您可以使用延迟加载。然而，一种更畅销的方法是使用[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)查询。此外，正如其他人所说，如果实体/聚合是域的反映，它们当然可以并且应该包含导航属性。这些“导航”属性的实现方式可能会有所不同。有时，将聚合拆分为多个聚合可能会更好。看看[Vaughn Vernon 的《有效聚合设计》](http://dddcommunity.org/library/vernon_2011)。

正如 Jehof 所指出的，您应该尝试让 WCF 服务的客户端仅依赖于该服务本身的合同，而不是依赖于服务封装的域实体 (POCO)。通常，POCO 不应该实现`INotifyPropertyChanged`，`IValidatableObject`因为这些接口支持 UI 问题，应该由 DTO 或 ViewModel 处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T13:48:44.340

领域驱动设计与 POCO 或 DTO 无关。它是关于实体、聚合根、值对象的。关于可以封装除数据之外的*行为*的富域对象。

> POCO 包含导航属性是否合适？

我不清楚 POCO 在您的场景中的用途，但如果它们是您的域实体，那么它们可以而且肯定应该包含导航属性。实际上，使用聚合根（一种特殊的域实体）的导航属性通常是外部对象访问包含在聚合中的实体的唯一方法。通过关联属性导航是 DDD 中的一个关键概念。

此外，DDD 中推荐的架构或多或少类似于：

*   表示层 (UI)
*   应用层
*   领域层
*   基础设施层（包括持久性/DAL）

这里的关键是单一职责原则。您不希望同时进行持久性、服务器端验证和 DTO 映射的服务。你需要解耦。您需要在各层之间明确分配职责，以便它们更易于维护、可扩展和可移植。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T22:12:19.200

另一个建议：认真考虑是否在客户端和服务器之间共享映射代码（并暗示它们映射到的类）。共享代码并没有错，但请注意不要将客户端问题和服务器问题混为一谈。它可能从小的妥协开始“我只在客户端上需要这个属性，但其他一切都是一样的”，但你最终可能会用标志告诉类是使用客户端还是服务器行为以及其他讨厌的东西。拥有 POCO 的单独实现一开始可能看起来像代码重复，但它可以让您自由地拥有适合该任务的实现。这就是为什么使用 Automapper 之类的东西是有意义的，它降低了编写映射代码的障碍。

这样做的另一个原因（也已提到）是 DTO 应该是实现通信 API 的一种方式，而不是 API 本身：即 DTO 用于 WCF 实现 SOAP API（或 REST 或其他） ，但客户端应该可以自由地只使用 API 规范来实现通信层，而不需要在映射代码中隐藏任何逻辑。

这也确保了您的 API 与语言无关。您可能希望提供客户端库（使用多种适当语言中的任何一种）以简化与 API 的交互，但这不是必需的。

# apache - 使用 mod_rewrite 从 URL 中删除 ?category_id=xx

> ID：13355378
> 
> 赞同：0
> 
> 时间：2012-11-13T03:56:23.950
> 
> 标签：apache, mod-rewrite, seo

我想使用 mod_rewrite 从我页面上的所有 URL 中删除 ?category_id=xx，其中 xx 是一个随机数 >= 1。

**例子：**

```
http://mypage.com/product-123.html?category_id=76
should become ...
http://mypage.com/product-123.html 
```

非常感谢您的帮助，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:20:15.540

查询字符串（问号和后面的参数）不是 URL 的一部分，所以`RewriteRule`不要包含它们。

按照[httpd 的文档](http://wiki.apache.org/httpd/RewriteQueryString "Apache httpd Wiki - 操作查询字符串")，您可以通过匹配以下内容来排除查询字符串：

```
RewriteRule ^/page /page? 
```

在你的情况下，我认为模式可以是：

```
RewriteRule    ^/product-([0-9]+)(\.html)    /product-$1.html? 
```

# android - 如何在 Android 上实现“平移”动画

> ID：13355380
> 
> 赞同：0
> 
> 时间：2012-11-13T03:56:27.330
> 
> 标签：android, android-layout, android-animation

假设以下坐标相对于 (0, 0) 是手机屏幕的左上角，正 x 值向右增加，y 正值向下增加，如下图所示：[http://t.cyol。 com/cache/temp/img/2011/02/1000/119/img/img_1297675862_0.jpg](http://t.cyol.com/cache/temp/img/2011/02/1000/119/img/img_1297675862_0.jpg)

我想做一个“平移”动画，其中有一个左上角位于 (x, y) 的小盒子，它的宽度为 w 和高度 h，其中 x、y、w 和 h 大于0\. 盒子里到处都是一些内容。那个盒子外面的所有地方都是黑色的。

超过 500 毫秒，盒子的左上角应该移动到 (0, 0) 并且它的宽度和高度将增长到填满整个屏幕。也就是说，半秒多后，盒子就会全屏显示。

框内的内容是一个 WebView。

我如何实现这个动画？我尝试了缩放，但这不是我想要实现的，因为框内的内容不应该被压扁。仅当盒子从角落开始时，翻译才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:10:02.477

为了达到这种效果，必须在动画的每一帧重新布局整个视图。您需要更改视图的布局参数并调用`requestLayout()`. 检查此链接：

[Android Animate Scale Image 以适应屏幕宽度和高度](https://stackoverflow.com/questions/10186062/android-animate-scale-image-to-fit-screen-width-and-height)

# php - 在 PHP 中使用 PayPal IPN 获取自定义字段

> ID：13355387
> 
> 赞同：0
> 
> 时间：2012-11-13T03:58:40.047
> 
> 标签：php, paypal, paypal-ipn

因此，在我的网站上，人们可以通过单击“立即付款”进行他们想要的升级并在框中输入他们的用户名来订购升级。到目前为止，我会进入 PayPal，查看付款，查看 Minecraft 用户名字段，然后手动升级。现在我想开始使用 IPN，这样我就可以自动化我一直在做的所有工作。

这是升级选项的 HTML 代码：

```
<div class=donationBox>

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="W2RH7VA3YS3Y4">
<table>
<tr>
<td width=75%><h2>Custom Maps - $5.00</h2></td>
<td><input type="hidden" name="on0" value="Minecraft Username">Minecraft Username<input type="text" name="os0" maxlength="200"></td>
</tr>
<tr>

<td>The ability to upload any map you want to play on! Maybe a survival island map? You bet! Or the Hunger Games!</td>
<td><input type="submit" class="btn btn-primary" value="Buy Now" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"></td>
</tr>
</table>
</form>
</div> 
```

下面是 PHP 代码，可以简单地向我发送一封电子邮件，其中包含我需要尝试使其工作的信息：

```
 <?php

  // STEP 1: Read POST data

  // reading posted data from directly from $_POST causes serialization 
  // issues with array data in POST
  // reading raw POST data from input stream instead. 
  $raw_post_data = file_get_contents('php://input');
  $raw_post_array = explode('&', $raw_post_data);
  $myPost = array();
  foreach ($raw_post_array as $keyval) {
    $keyval = explode ('=', $keyval);
    if (count($keyval) == 2)
       $myPost[$keyval[0]] = urldecode($keyval[1]);
  }
  // read the post from PayPal system and add 'cmd'
  $req = 'cmd=_notify-validate';
  if(function_exists('get_magic_quotes_gpc')) {
     $get_magic_quotes_exists = true;
  } 
  foreach ($myPost as $key => $value) {        
     if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
          $value = urlencode(stripslashes($value)); 
     } else {
          $value = urlencode($value);
     }
     $req .= "&$key=$value";
  }

  // STEP 2: Post IPN data back to paypal to validate

  $ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
  curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
  curl_setopt($ch, CURLOPT_POST, 1);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
  curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
  curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

  // In wamp like environments that do not come bundled with root authority certificates,
  // please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
  // of the certificate as shown below.
  // curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
  if( !($res = curl_exec($ch)) ) {
      // error_log("Got " . curl_error($ch) . " when processing IPN data");
      curl_close($ch);
      exit;
  }
  curl_close($ch);

  // STEP 3: Inspect IPN validation result and act accordingly

  if (strcmp ($res, "VERIFIED") == 0) {
  // check whether the payment_status is Completed
  // check that txn_id has not been previously processed
  // check that receiver_email is your Primary PayPal email
  // check that payment_amount/payment_currency are correct
  // process payment

  // assign posted variables to local variables
  $item_name = $_POST['item_name'];
  $item_number = $_POST['item_number'];
  $payment_status = $_POST['payment_status'];
  $payment_amount = $_POST['mc_gross'];
  $payment_currency = $_POST['mc_currency'];
  $txn_id = $_POST['txn_id'];
  $receiver_email = $_POST['receiver_email'];
  $payer_email = $_POST['payer_email'];
  $custom = $_POST['on0'];
  $message = "An order has been IPNified! " . $item_name . " " . $item_number . " " . $payment_amount . " " . $txn_id . " " . $custom;
  mail('myemail@gmail.com', 'PayPal IPN', $message);
  } else if (strcmp ($res, "INVALID") == 0) {
      mail('myemail@gmail.com', 'PayPal IPN', 'Errors');
  }
  ?> 
```

我遇到的问题在这里：

```
$custom = $_POST['on0']; 
```

我如上所述尝试过，并且：

```
$custom = $_POST['custom']; 
```

第一个是因为那是 Minecraft 用户名字段的名称，第二个是我尝试的，因为我读过它应该是这样的，但无论哪种方式，它都没有返回任何内容。任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:04:01.650

转储结果`$_POST`并查看哪个键适合您正在寻找的值。使用[var_dump](http://php.net/manual/en/function.var-dump.php)或[print_r](http://php.net/manual/en/function.print-r.php)

```
// Displays more detail such as value types
var_dump($_POST);

// Only displays key => value relationships of an array
print_r($_POST); 
```

### 编辑

我刚刚意识到使用 ipn 看不到它的输出。在这种情况下，您始终可以`serialize`将整个`$_POST`阵列发送到电子邮件中。

```
$post_data_string = serialize($_POST);
mail('myemail@gmail.com', 'PayPal IPN', $post_data_string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:56:33.757

首先，您使用的是托管按钮。因此，您设置的任何自定义选项都必须在您的 PayPal 帐户的按钮创建向导或编辑区域中完成。

发送自定义数据的实际参数名称确实是“自定义”，因此您需要在 IPN 中使用它来获取该特定参数的值。

之前提到的（将表单上的字段名称更改为自定义）除了您使用的是托管按钮外，其他都可以使用，因此需要在您的 PayPal 帐户的按钮管理器中进行调整。

# java - 将参数传递给 Runtime.runtime().exec()

> ID：13355390
> 
> 赞同：0
> 
> 时间：2012-11-13T03:58:50.167
> 
> 标签：java, sql

我需要在 JAVA 中执行一个 sql 文件，并且我知道执行此操作的基本方法：

```
Process p = Runtime.getRuntime().exec("sqlplus username@orcl/passwd @task.sql") 
```

但是现在在 task.sql 中，我定义了一个变量，其值必须从 java 代码中传递。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:17:44.630

一种方法是使用原始文件 (task.sql) 作为模板从 java 生成单独的 sql 文件 (task_exec.sql)，其中在 task_exec.sql 文件中设置所有变量，因此无需从外部传递参数. 所以你所要做的就是运行生成的sql文件。

# java - showMessageDialog() 在 FocusListener 中被调用两次

> ID：13355398
> 
> 赞同：3
> 
> 时间：2012-11-13T04:00:03.370
> 
> 标签：java, swing, validation

我在 JFrame 中有 2 个文本字段，当焦点从 textfield1 丢失时，我想验证 textfield1 中的数据。所以我已经使用`FocusListener`并使用`showMessageDialog()`了该`FocusLost()`方法，然后将焦点重新设置回textfield1。当我单击除 textfield1 之外的 JFrame 窗口内的任何组件时，它工作正常，但是当我单击 JFrame 窗口外的任何位置时，`showMessageDialog()`会调用**两次**，焦点转到 textfield2，而焦点应保留在 textfield1 上。

```
 @Override
    public void focusGained(FocusEvent e) {}

    @Override
    public void focusLost(FocusEvent e) {
        boolean show = false;
        String theRegex = "[0-9]";
        Pattern checkRegex = Pattern.compile(theRegex);
        Matcher regexMatcher = checkRegex.matcher( MemberID );
        while ( !regexMatcher.find() && show==false){
            JOptionPane.showMessageDialog(null,"Please enter numbers","Validation Error",JOptionPane.ERROR_MESSAGE);
            MemberID_Text.requestFocusInWindow();
    MemberID_Text.selectAll();
            show = true;

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:54:09.117

你可以这样做来验证是否输入了一个数字，并避免一起使用正则表达式

```
 class IntVerifier extends InputVerifier {

  @Override public boolean verify(JComponent input) {
      String text =((JTextField) input).getText();
      int n = 0; 

          try {
      n = Integer.parseInt(text); } 

      catch (NumberFormatException e) {
  return false; 
       }

  return true;
      }
      } 
```

然后在文本字段上使用输入验证器

```
 IntVerifier intv = new IntVerifier();      
 myTextField = new JTextField();
 myTextField.setInputVerifier(intv); 
```

# python - 列上的 ObjectListView minimumWidth 在 Windows 中似乎不起作用

> ID：13355401
> 
> 赞同：0
> 
> 时间：2012-11-13T04:00:26.890
> 
> 标签：python, windows-8, wxpython

这是我的列定义：

```
self.results_list.SetColumns([
    ColumnDefn('Street name', 'left', valueGetter='streetname',
               minimumWidth=150),
    ColumnDefn('House number', 'left', valueGetter='housenumber',
               minimumWidth=100),
    ColumnDefn('Letter', 'left', valueGetter='letter',
               minimumWidth=75),
    ColumnDefn('Postal code', 'right', valueGetter='postalcode',
               minimumWidth=120),
    ColumnDefn('City', 'left', valueGetter='city', minimumWidth=100,
               isSpaceFilling=True),
]) 
```

在 OSX 上看起来很棒：

![操作系统](../Images/17230db24090ab526f2151c129d7bd66.png)

但在 Windows...

![视窗](../Images/63d32a7daecadffd41dc6c683c1812d3.png)

即使 ObjectListView 中没有数据，如何获得要应用的 minimumWidth？

* * *

*我正在使用 Windows 8 和 wxPython 2.9*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:02:44.873

对于 ColumnDefn 中的第三个选项，我添加了一个 -1，并且当 Windows 上的 ObjectListView 中没有数据时，将列调整为您指定的最小宽度。

```
self.results_list.SetColumns([
ColumnDefn('Street name', 'left', -1, valueGetter='streetname',
           minimumWidth=150),
ColumnDefn('House number', 'left', -1, valueGetter='housenumber',
           minimumWidth=100),
ColumnDefn('Letter', 'left', -1, valueGetter='letter',
           minimumWidth=75),
ColumnDefn('Postal code', 'right', -1, valueGetter='postalcode',
           minimumWidth=120),
ColumnDefn('City', 'left', -1, valueGetter='city', minimumWidth=100,
           isSpaceFilling=True),]) 
```

# java - 如何使用 hasNextInt() 捕获异常？我需要 Int 但如果输入是字符，那就不好了

> ID：13355404
> 
> 赞同：0
> 
> 时间：2012-11-13T04:00:55.843
> 
> 标签：java, exception-handling

我一直试图阻止异常，但我不知道如何。我试过了`parseInt`，`java.util.NormalExceptionMismatch`等等。

有谁知道如何解决这个问题？由于复制和粘贴，格式有点偏离。

```
do
{
   System.out.print(
           "How many integers shall we compare? (Enter a positive integer):");
   select = intFind.nextInt();
   if (!intFind.hasNextInt()) 
       intFind.next();
       {
           // Display the following text in the event of an invalid input
           System.out.println("Invalid input!");
       }
}while(select < 0) 
```

我尝试过的其他方法：

```
 do
    {
       System.out.print(
                   "How many integers shall we compare? (Enter a positive integer):");
       select = intFind.nextInt();
       {
            try{
                   select = intFind.nextInt();
               }catch (java.util.InputMismatchException e)
            {
               // Display the following text in the event of an invalid input
               System.out.println("Invalid input!");
               return;
            }
       }
    }while(select < 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:34:48.223

在我看来，您想跳过所有内容，直到获得整数。此处的代码跳过除整数以外的任何输入。

只要没有可用的整数（而 (!in.hasNextInt())）就丢弃可用的输入（in.next）。当整数可用时 - 读取它 (int num = in.nextInt();)

```
public class Main {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        while (!in.hasNextInt()) {
            in.next();
        }
        int num = in.nextInt();
        System.out.println("Thank you for choosing " + num + " today.");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:10:57.483

如何捕获异常的快速示例：

```
int exceptionSample()
{
    int num = 0;
    boolean done = false;
    while(!done)
    {
        // prompt for input
        // inputStr = read input
        try {
            num = Integer.parseInt(inputStr);
            done = true;
        }
        catch(NumberFormatException ex) {
            // Error msg
        }
    }
    return num;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:05:15.453

IMO，最佳做法是使用`nextLine()`获取字符串输入，然后`parseInt`获取整数。如果无法解析，只需向用户投诉并请求重新输入。

请记住，您可能需要再做一次`nextLine()`（丢弃输入）来清理缓冲区。

# c++ - CreateThread 字符串到 LPVOID

> ID：13355408
> 
> 赞同：0
> 
> 时间：2012-11-13T04:01:12.203
> 
> 标签：c++, multithreading, winapi, process

我正在尝试创建一个线程来处理 ZIP 归档：

```
 HANDLE hThread = CreateThread(
        NULL,
        0,
        ZipProcess,
        (LPVOID) cmdline.c_str(),
        0,
        NULL); 
```

我将命令行参数作为字符串传递给`lpParameter`.

我不断收到此错误：

> ...'void (MyClass::)(std::string) {aka void (MyClass::)(std::basic_string)}' 类型的参数不匹配'LPTHREAD_START_ROUTINE {aka long unsigned int ( *)(void* ) }'|

我已经尝试了几件事——通过引用传递、[写入缓冲区](https://stackoverflow.com/questions/1450439/cannot-pass-string-to-createthread-receiver)、a`reinterpret_cast`等，但错误仍然存​​在。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:11:09.143

你找错地方了。编译器抱怨第三个参数，线程过程。您的错误看起来像 GCCish，这说明了*错误在参数 3 中传递的内容...*

要修复它，您需要一个与函数实际匹配的函数签名（这是`LPTHREAD_START_ROUTINE`typedef 的扩展版本），即：

```
DWORD (WINAPI *lpStartAddress)(LPVOID) 
```

您定义的三个问题是：

1.  您的函数不使用 WINAPI (AKA `__stdcall`) 调用约定。
2.  您的函数有一个`std::string`参数，而不是`LPVOID`(AKA `void *`)。
3.  您的函数是类成员。您需要一个静态成员或一个自由函数，以免它期望额外的`this`参数，从而导致签名不匹配。

# robots.txt - 我可以使用 robots.txt 阻止任何以数字开头的目录树吗？

> ID：13355409
> 
> 赞同：1
> 
> 时间：2012-11-13T04:01:34.983
> 
> 标签：robots.txt

我什至不确定这是否是处理此问题的最佳方法，但我在重写时犯了一个暂时的错误，谷歌（可能是其他人）发现了它，现在它已将它们编入索引并不断出现错误。

基本上，我是根据多种因素生成 URL，其中一个是自动生成的文章 id。然后这些重定向到正确的位置。

我第一次不小心设置了这样的东西：

/2343/新闻/blahblahblah

/7645/评论/blahblahblah

等等。

这是一个有很多原因的问题，主要原因是会有重复，而且东西没有指向正确的地方和 yada yada。我现在将它们修复为：

/新闻/2343/blahblahblah

/评论/7645/blahblahblah

等等。

这一切都很好。但我想阻止任何属于第一个模式的东西。换句话说，任何看起来像这样的东西：

* *** = 任何数字模式

/ *** */anythingelsehere

这样 Google（以及任何其他可能索引了错误内容的人）就不再试图寻找这些被弄乱了甚至不再存在的 URL。这可能吗？我什至应该通过 robots.txt 执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:03:55.937

您不需要为此设置 robots.txt，只需为这些网址返回 404 错误，Google 和其他搜索引擎最终会删除它们。

谷歌也有网站管理员工具，您可以使用这些工具来对 url 进行索引。我很确定其他主机也有类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:53:00.803

回答这个问题：是的，您可以阻止任何以数字开头的 URL。

```
User-agent: *
Disallow: /0
Disallow: /1
Disallow: /2
Disallow: /3
Disallow: /4
Disallow: /5
Disallow: /6
Disallow: /7
Disallow: /8
Disallow: /9 
```

它会阻止以下 URL：

*   `example.com/1`
*   `example.com/2.html`
*   `example.com/3/foo`
*   `example.com/4you`
*   `example.com/52347612`

这些 URL 仍将被允许：

*   `example.com/foo/1`
*   `example.com/foo2.html`
*   `example.com/bar/3/foo`
*   `example.com/only4you`

# ruby-on-rails - Rails 轮胎：使用自定义逻辑导入

> ID：13355410
> 
> 赞同：1
> 
> 时间：2012-11-13T04:01:41.593
> 
> 标签：ruby-on-rails, elasticsearch, tire

我有一个 Ruby on rails 3.2 应用程序，我正在尝试使用轮胎和弹性搜索。

我有一个具有以下声明的用户模型：

```
include Tire::Model::Search
include Tire::Model::Callbacks 
```

然后，我通过调用将记录初始导入 Elastic Search：

```
rake environment tire:import CLASS=User FORCE=true 
```

是否可以自定义导入任务，使其跳过一个用户？我有一个不想被索引的系统用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:20:06.923

首先，Rake 任务只是最常见情况下的一种便捷方法，例如在尝试 elasticsearch/Tire out 等时。对于更复杂的情况，您应该编写自己的索引代码——应该很容易。

其次，如果你对记录是否被索引有一定的条件，你应该按照自述文件的指示去做：不要`include Tire::Model::Callbacks`自己管理索引生命周期，例如：

```
after_save do
  update_index if state == 'published'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T23:15:09.157

我找到了一个粗略的解决我的问题的方法，并想发回一些东西，以防万一其他人遇到这个问题。如果有人有更好的建议，请告诉我。

最后我写了一个轮胎任务，调用常规的全部导入，然后从索引中删除系统帐户。

```
namespace :tire do
  desc 'Create search index on User'
  task :index_users => :environment do
    ENV['CLASS'] = 'User'
    ENV['FORCE'] = 'TRUE'
    Rake::Task['tire:import'].invoke
    @user = User.find_by_type('System')
    User.tire.index.remove @user
  end
end 
```

# active-directory - 如何将 ADFS 2.0 与 asp mvc 4 一起使用

> ID：13355414
> 
> 赞同：3
> 
> 时间：2012-11-13T04:02:21.153
> 
> 标签：active-directory, asp.net-mvc-4, wif, claims-based-identity, adfs2.0

我正在编写一个 MVC 4 Web 应用程序并希望使用新的 WIF 和 ADFS 来验证用户。我还想为用户提供一个个人资料页面，以“自助”更改电话号码或婚前姓名。

我正在寻找资源/教程（一本好书）来向我展示如何将它们全部连接起来。

用户将存储在活动目录中，所以我猜我应该使用 ADMembershipProvider 来完成其中的一些。我相信有一个附加到 ADFS 的配置文件存储（或者我可以设置一个），我想知道它是直接与其交互的好习惯，还是让我添加声明等的 API。

最后，所有这些如何适应新的 WebSecurity 东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-10T11:50:11.070

您要求提供有关 ADFS 主题的书籍。您可以尝试模式和实践一书[A Guide to Claims-Based Identity and Access Control](http://msdn.microsoft.com/en-us/library/ff423674.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:46:24.150

就 ADMembershipProvider 而言，您不需要它。

ADFS 在后台处理 AD 集成，您可以配置声明规则来确定 ADFS 从 AD 中提取哪些属性。

**更新**

就在 AD 中编辑用户而言，这是一个 Identity Manager 方案。ADFS 是一个 STS，所以它不处理这个问题。您需要直接执行此操作，例如[Howto: (Almost) Everything In Active Directory via C#](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C)。请注意，您需要启用写访问权限的 AD 登录才能执行此操作。这是与允许您登录 ADFS 的集合不同的凭据集。

ADFS 仅提供登录屏幕。开箱即用，您没有任何自助服务功能。您需要自己自定义 ADFS 屏幕，例如[AD FS 2.0 登录页面自定义概述](http://msdn.microsoft.com/en-us/library/ee895356.aspx)。

# css - CSS p:selectOneMenu

> ID：13355420
> 
> 赞同：1
> 
> 时间：2012-11-13T04:03:17.047
> 
> 标签：css, jsf-2, primefaces

我想知道，如何更改`background-color`.[`p:selectOneMenu`](http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf)

我试过这个

```
 <p:selectOneMenu value="Select One"  style="background-color:red"  >  
            <f:selectItem itemLabel="Select One" itemValue="" /> 
```

......

但是背景仍然是白色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:59:34.987

这是正确的答案：

```
.ui-selectonemenu input.ui-selectonemenu-label{ background: red; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:36:11.943

视觉外观由周围环境`<div>`和 a决定`<label>`。最简单的方法是给你里面的“一切”提供“红色”背景`p:selectOneMenu`：

```
<p:selectOneMenu value="Select One"  styleClass="redSelect"> 
```

在你的`<h:head>`：

```
.redSelect > * {
    background: red;
} 
```

除了改变下拉菜单的背景，覆盖以下 CSS 类组合的背景属性：

```
.ui-selectonemenu-items.ui-selectonemenu-list {
    background: red !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:22:54.647

尝试`panelStyle`如下给出的属性：

```
<p:selectOneMenu value="Select One"  panelStyle="background-color:red"  >  
        <f:selectItem itemLabel="Select One" itemValue="" /> 
```

# c# - 无法进入 ScrollViewer 控件中的“ScrollStates”

> ID：13355421
> 
> 赞同：1
> 
> 时间：2012-11-13T04:03:23.583
> 
> 标签：c#, xaml, windows-phone-7.1, windows-phone

我在尝试使其正常工作时遇到了很多麻烦，并希望有人可以提供帮助。

我的 WindowsPhone 应用程序中有一个 ScrollViewer，我正在尝试模拟与您在本机日历应用程序中看到的“日期/时间选择器”类似的控件。因此，我的 ScrollViewer 包含一个 StackPanel，其中包含多个带有矩形和 TextBlock 的方形画布。我的意图是观看“ScrollStates”，当 VisualState 更改为“NotScrolling”时，我会检查 ScrollViewer 的 VerticalOffset 并将幻灯片动画到最近的“snap-to”位置（即对齐正方形到正确/中间位置）。

```
<ScrollViewer Name="sv" Width="100" VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Disabled" Loaded="ScrollViewer_Loaded">
    <StackPanel>
        <Canvas MaxWidth="77" MaxHeight="80" MinWidth="80" MinHeight="80" Margin="3">
            <Rectangle Stroke="{StaticResource PhoneForegroundBrush}" StrokeThickness="3" Width="80" Height="80" />
            <TextBlock Text="1" FontSize="36" FontWeight="Bold" TextAlignment="Center" HorizontalAlignment="Center" Width="70" Canvas.Left="6" Canvas.Top="14" LineHeight="48" />
        </Canvas>
        <Canvas MaxWidth="77" MaxHeight="80" MinWidth="80" MinHeight="80" Margin="3">
            <Rectangle Stroke="{StaticResource PhoneForegroundBrush}" StrokeThickness="3" Width="80" Height="80" />
            <TextBlock Text="2" FontSize="36" FontWeight="Bold" TextAlignment="Center" HorizontalAlignment="Center" Width="70" Canvas.Left="6" Canvas.Top="14" LineHeight="48" />
        </Canvas>
        <Canvas MaxWidth="77" MaxHeight="80" MinWidth="80" MinHeight="80" Margin="3">
            <Rectangle Stroke="{StaticResource PhoneForegroundBrush}" StrokeThickness="3" Width="80" Height="80" />
            <TextBlock Text="3" FontSize="36" FontWeight="Bold" TextAlignment="Center" HorizontalAlignment="Center" Width="70" Canvas.Left="6" Canvas.Top="14" LineHeight="48" />
        </Canvas>
        ...
    </StackPanel>
</ScrollViewer> 
```

我一直在查看与 VisualStates 挂钩的各种示例，例如[http://blogs.msdn.com/b/ptorr/archive/2010/07/23/how-to-detect-when-a-list-is -scrolling-or-not.aspx](http://blogs.msdn.com/b/ptorr/archive/2010/07/23/how-to-detect-when-a-list-is-scrolling-or-not.aspx) ; [http://developingfor.net/2009/02/16/fun-with-the-wpf-scrollviewer/](http://developingfor.net/2009/02/16/fun-with-the-wpf-scrollviewer/)；[http://blogs.msdn.com/b/slmperf/archive/2011/06/30/windows-phone-mango-change-listbox-how-to-detect-compression-end-of-scroll-states.aspx](http://blogs.msdn.com/b/slmperf/archive/2011/06/30/windows-phone-mango-change-listbox-how-to-detect-compression-end-of-scroll-states.aspx)。 ..似乎都有与此类似的代码：

```
// Visual States are always on the first child of the control template
FrameworkElement element = VisualTreeHelper.GetChild(sv, 0) as FrameworkElement; 
```

...然后继续寻找`VisualStateGroup group = FindVisualState(element, "ScrollStates");`，他们可以从中挂钩事件到它何时发生变化。

但是...每当我尝试执行此`VisualTreeHelper.GetChild(sv,0) as FrameworkElement`操作时，应用程序都会崩溃，并出现“System.ArgumentOutOfRangeException”类型的异常。如果我输出`VisualTreeHelper.GetChildrenCount(sv)`，它总是“0”。它似乎对其他人有效？8)

任何帮助将不胜感激。谢谢！

（作为替代方案，是否有人已经在我可以使用的可重用控件中制作了这种“选择框”，而不是试图重新发明它？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:41:54.920

您是否等到滚动查看器的 Loaded 事件触发后再尝试获取滚动查看器子项？

# c++ - 如何重置 shared_ptr？

> ID：13355422
> 
> 赞同：1
> 
> 时间：2012-11-13T04:03:31.353
> 
> 标签：c++, stl, c++11, shared-ptr

我正在尝试这样做（使用自定义类和 STL shared_ptr from `#include <memory>`）：

```
shared_ptr<Label> BufLbl;

BufLbl = allocate_shared<Label>(Label());
BufLbl->YCoord = 3;
BufLbl->XCoord = 2; 
BufLbl->Width = 5;
BufLbl->Data = "Day 1";
Screen.Controls.push_back(BufLbl);

BufLbl = allocate_shared<Label>(Label());
BufLbl->YCoord = 4;
BufLbl->XCoord = 6; 
BufLbl->Width = 1;
BufLbl->Data = "2";
Screen.Controls.push_back(BufLbl);

<repeat> 
```

我收到此错误：

```
error C2903: 'rebind' : symbol is neither a class template nor a function template 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:07:04.513

你在滥用`allocate_shared`，这不是你想的那样。

你需要的是`make_shared`，像这样：

```
BufLbl = std::make_shared<Label>(); 
```

# iphone - ios 不允许整个应用使用蜂窝网络

> ID：13355423
> 
> 赞同：0
> 
> 时间：2012-11-13T04:03:37.047
> 
> 标签：iphone, ios, wifi, reachability, cellular-network

嗨，我已经阅读了一些帖子，发现我可以使用 Apple 的“可达性”示例来检查当前设备是否在 Wi-Fi 或蜂窝网络上运行，并确定是否可以触发连接。但是，我的应用程序中有很多不同类的 webviews 和 HTTP 调用，所以恐怕我必须在每个将启动连接的方法中调用检查。我想问一下是否有任何方法可以检查网络状态并禁止蜂窝网络上的所有流量？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:32:15.473

您正在寻找通过 NSNotification 广播的 ReachableViaWiFi 网络状态。您可以像这样在代码中进行设置：

```
@property (nonatomic, assign) NetworkStatus currentNetStatus; 
```

...

```
- (void) startListeningForWifi{
            Reachability* hostReach = [Reachability reachabilityWithHostName:@"hostName"];
            [hostReach startNotifier];

            // reachability set up
            // Observe the kNetworkReachabilityChangedNotification. When that notification is posted, the
            // method "reachabilityChanged" will be called. 
            [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil];
}

- (void)reachabilityChanged: (NSNotification* )note{
    Reachability *curReach = [note object];
    self.currentNetStatus = [curReach currentReachabilityStatus];
} 
```

`currentNetStatus`然后在进行网络呼叫之前很容易检查。如果不等于，`ReachableViaWiFi`那么您不在wifi上。

# java - 防止 Int 将 012345 更改为 5349

> ID：13355426
> 
> 赞同：4
> 
> 时间：2012-11-13T04:04:03.427
> 
> 标签：java, formatting, int, typeconverter

> **可能重复：**
> [带前导零的整数](https://stackoverflow.com/questions/565634/integer-with-leading-zeroes)

我正在编写的程序要求我标记一个库存编号为 012345 的项目并将其存储在一个 int 变量中。

这是我正在做的一个精简示例：

```
int test = 012345;
System.out.println(test); 
```

这打印为：

```
5349 
```

如何让它打印为 012345 而不是 5349？

编辑：我将这个输入到我正在初始化的自定义类的构造函数的参数中。然后我使用一种方法返回当前数字是多少，然后将其打印到终端窗口。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T04:06:57.103

你得到了一个错误的数字，因为当你在一个整数文字前面加上零时，Java 将这个数字解释为一个*八进制* （即 base-8）常量。如果要添加前导零，请使用

```
int test = 12345;
System.out.println("0"+test); 
```

您还可以将[格式化输出功能](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)与说明符一起`%06d`使用，如下所示：

```
System.out.format("%06d", num); 
```

`6`表示“使用六位数字”；'0' 表示“必要时用零填充”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:12:39.943

如前所述，带前导零的 int 值被视为八进制值。如果您不需要将 test 作为 int，为什么不将其设为字符串？像

```
String test= new String("012345"); 
```

如果你想使用int进行测试，你可以不加0，而只是使用数字并在打印时加0。

如果您想知道如何找到要添加多少前导零，您可以这样做

```
int lengthOfItemID=6;
int test=12345;
String test1=new String("000000"+test);
System.out.println(test1.substring(test1.length()-lengthOfItemID)); 
```

请原谅语法错误，我上次使用 java 已经有好几年了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T04:08:17.973

您可以使用`Integer.parseInt`. 这将使您的字符串变成十进制字符串。（在[这里](http://www.velocityreviews.com/forums/t129905-convert-numeric-string-into-integer-java.html)找到）。[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html)的 JAVA API声明它接受一个字符串并返回一个带符号的十进制。

# c++ - 如何将相等运算符添加到 ImageButton (JUCE)？

> ID：13355434
> 
> 赞同：0
> 
> 时间：2012-11-13T04:04:31.623
> 
> 标签：c++, class, inheritance, juce

我有一些带有各自按钮侦听器的图像按钮。

在 buttonClicked 函数上，我尝试：

```
void TestComponent::buttonClicked (Button* activeButton) {

    if (activeButton == typeButton) {

       //do something

    }

} 
```

但我明白了

```
"No match for operator == in activeButton..." 
```

如何将父类 Button 相等运算符添加到 ImageButton？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:46:14.567

activeButton 是一个指针。什么是类型按钮？

# php - preg_match 某些部分的评论

> ID：13355438
> 
> 赞同：4
> 
> 时间：2012-11-13T04:05:21.083
> 
> 标签：php, regex, preg-match, preg-match-all, preg-replace-callback

我想找到评论的某些部分。以下是一些例子

```
/*
 * @todo name another-name taskID
 */

/* @todo name another-name taskID */ 
```

目前我正在使用以下正则表达式

```
'/\*[[:space:]]*(?=@todo(.*))/i' 
```

这将返回以下内容：

```
* @todo name another-name taskID
or
* @todo name another-name taskID */ 
```

我怎样才能只得到@todo 和名字，而不是任何星号？

期望的输出

```
@todo name another-name taskID
@todo name another-name taskID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:22:46.067

试试这个：

```
$str=<<<STR
/*
 * @todo name another-name taskID 1
 */

/* @todo name another-name taskID 2 */
STR;
$match=null;
preg_match_all("/\*[[:space:]]*(@todo[^(\*\/$)]*)/i",$str,$match,PREG_SET_ORDER);
print_r($match); 
```

回声

```
Array
(
    [0] => Array
        (
            [0] => * @todo name another-name taskID 1

            [1] => @todo name another-name taskID 1

        )

    [1] => Array
        (
            [0] => * @todo name another-name taskID 2 
            [1] => @todo name another-name taskID 2 
        )

) 
```

虽然不是一个完美的解决方案（注意以 结尾的行`$match[0][0]`）。

# youtube-api - Youtube API 视频流现场中断，需要一些指导

> ID：13355439
> 
> 赞同：0
> 
> 时间：2012-11-13T04:05:27.263
> 
> 标签：youtube-api

为我的问题的模糊标题道歉。我只是想弄清楚为什么朋友的 Wordpress 网站上的 Youtube 视频流突然中断了。

我现在正试图破译它，但我想我会在这里发帖，看看是否有人能在我对此做出正面或反面时指出我正确的方向。

谢谢你。

有问题的页面：http: [//www.advocatedai](http://www.advocatedaily.com/advocatetv/)
​​ly.com/advocatetv/ 页面错误：

```
Warning: main() [function.main]: Node no longer exists in /home/advocate/public_html/wp-content/themes/process/advocate-tv.php on line 45

Warning: main() [function.main]: Node no longer exists in /home/advocate/public_html/wp-content/themes/process/advocate-tv.php on line 45

Fatal error: Call to a member function attributes() on a non-object in /home/advocate/public_html/wp-content/themes/process/advocate-tv.php on line 48 
```

第 40 到 55 行：

```
 // get video player URL
                  $attrs = $media->group->player->attributes();
                  $watch = $attrs['url']; 

                  // get video thumbnail
                  $attrs = $media->group->thumbnail[0]->attributes();
                  $thumbnail = $attrs['url']; 

                  // get <yt:duration> node for video length
                  $yt = $media->children('http://gdata.youtube.com/schemas/2007');
                  $attrs = $yt->duration->attributes();
                  $length = $attrs['seconds']; 

                  //get <yt:videoId> node for Video ID
                  $yt = $media->children('http://gdata.youtube.com/schemas/2007');
                  $playlistVideoID = $yt->videoid; 
```

问题区域的完整片段：

```
 </div>
    <div id="mainPlaylist" class="grid_6 omega">
        <h3 class="title">Legal Feed with Kate Wheeler</h3>
        <ul id="playlists">
            <?php
                // Loop through each video in each playlist

                // read feed into SimpleXML object
                // *Moved into header to load main Video as well
                $playlistFeedURL = 'http://gdata.youtube.com/feeds/api/playlists/6549D4CA7BB99B16?v=2';
                $sxml = simplexml_load_file($playlistFeedURL);

                // iterate over entries in feed
                foreach ($sxml->entry as $entry) {
                  // get nodes in media: namespace for media information
                  $media = $entry->children('http://search.yahoo.com/mrss/');

                  // get video player URL
                  $attrs = $media->group->player->attributes();
                  $watch = $attrs['url']; 

                  // get video thumbnail
                  $attrs = $media->group->thumbnail[0]->attributes();
                  $thumbnail = $attrs['url']; 

                  // get <yt:duration> node for video length
                  $yt = $media->children('http://gdata.youtube.com/schemas/2007');
                  $attrs = $yt->duration->attributes();
                  $length = $attrs['seconds']; 

                  //get <yt:videoId> node for Video ID
                  $yt = $media->children('http://gdata.youtube.com/schemas/2007');
                  $playlistVideoID = $yt->videoid;

                  // get <yt:stats> node for viewer statistics
                  $yt = $entry->children('http://gdata.youtube.com/schemas/2007');
                  $attrs = $yt->statistics->attributes();
                  $viewCount = $attrs['viewCount']; 

                  // get <gd:rating> node for video ratings
                  $gd = $entry->children('http://schemas.google.com/g/2005'); 
                  if ($gd->rating) {
                    $attrs = $gd->rating->attributes();
                    $rating = $attrs['average'];  
                  } else {
                    $rating = 0; 
                  }

                  ?>
                  <div class="item">
                      <span class="thumbnail left" rel="<?php echo $entry->id; ?>">
                        <a href="<?php echo $watch; ?>" rel="<?php echo $playlistVideoID; ?>" onclick="_run();"><img src="<?php echo $thumbnail;?>" /></a>
                      </span>
                      <a href="<?php echo $watch; ?>" rel="<?php echo $playlistVideoID; ?>" onclick="_run();"><?php echo $media->group->title; ?></a>
                      <span class="attr">Duration:</span> <?php printf('%0.2f', $length/60); ?> min.
                      <div class="clear"></div>
                  </div>      
                <?php
                }           
            ?>
        </ul>
    </div>
    <div class="hr-single grid_16"></div>
</div>
<div class="article grid_10">
    <div id="recentUploads">
        <h3 class="grid_8">Recent Uploads</h3>
        <div class="clear"></div>
        <ul>
            <?php
            // Loop through each video in each playlist

            // read feed into SimpleXML object
            // *Moved into header to load main Video as well
            $playlistFeedURL = 'http://gdata.youtube.com/feeds/api/playlists/755260781A134FFF?v=2';
            $sxml = simplexml_load_file($playlistFeedURL);

            // iterate over entries in feed
            foreach ($sxml->entry as $entry) {
              // get nodes in media: namespace for media information
              $media = $entry->children('http://search.yahoo.com/mrss/');

              // get video player URL
              $attrs = $media->group->player->attributes();
              $watch = $attrs['url']; 

              // get video thumbnail
              $attrs = $media->group->thumbnail[0]->attributes();
              $thumbnail = $attrs['url']; 

              // get <yt:duration> node for video length
              $yt = $media->children('http://gdata.youtube.com/schemas/2007');
              $attrs = $yt->duration->attributes();
              $length = $attrs['seconds']; 

              //get <yt:videoId> node for Video ID
              $yt = $media->children('http://gdata.youtube.com/schemas/2007');
              $playlistVideoID = $yt->videoid;

              // get <yt:stats> node for viewer statistics
              $yt = $entry->children('http://gdata.youtube.com/schemas/2007');
              $attrs = $yt->statistics->attributes();
              $viewCount = $attrs['viewCount']; 

              // get <gd:rating> node for video ratings
              $gd = $entry->children('http://schemas.google.com/g/2005'); 
              if ($gd->rating) {
                $attrs = $gd->rating->attributes();
                $rating = $attrs['average'];  
              } else {
                $rating = 0; 
              }

              ?>
              <div class="item">
                  <div class="thumbnail left" rel="<?php echo $entry->id; ?>">
                    <a href="<?php echo $watch; ?>" rel="<?php echo $playlistVideoID; ?>" onclick="_run();"><img src="<?php echo $thumbnail;?>" /></a>
                  </div>
                  <div class="">
                      <a href="<?php echo $watch; ?>" rel="<?php echo $playlistVideoID; ?>" onclick="_run();"><?php echo $media->group->title; ?></a>
                      <span class="attr">Duration:</span> <?php printf('%0.2f', $length/60); ?> min.
                      <p><?php echo $media->group->description; ?></p>  
                  </div>
                  <div class="clear"></div>
              </div>      
            <?php
            }           
        ?>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:48:10.937

我想发生在我身上的同样的事情可能也发生在你身上。

根据您的代码，API 似乎无法正确找到播放列表 [http://gdata.youtube.com/feeds/api/playlists/6549D4CA7BB99B16?v=2](http://gdata.youtube.com/feeds/api/playlists/6549D4CA7BB99B16?v=2)

为了解决我自己的麻烦电话，我将 PL 添加到播放列表 ID：* *PL* *6549D4CA7BB99B16 [http://gdata.youtube.com/feeds/api/playlists/PL6549D4CA7BB99B16?v=2](http://gdata.youtube.com/feeds/api/playlists/PL6549D4CA7BB99B16?v=2)

在谷歌搜索时，我发现一篇博客文章引用了一些关于添加将 PL 包含到调用中的功能。apiblog.youtube.com/2012/08/playlists-now-with-more-pl.html

在我的快速搜索中，我没有注意到他们删除了发送播放列表 ID 的旧方式。

# refactoring - 如何制定重构计划？

> ID：13355441
> 
> 赞同：0
> 
> 时间：2012-11-13T04:05:27.637
> 
> 标签：refactoring

我的经理从未做过重构。我曾经读过 Martin Fowler 的书**Refactoring**并将其技巧应用到一个模块上。所以他想让我制定一个重构现有项目的计划。该项目没有单元测试，我的队友对重构了解不多。他坚持要我在流程上做一个时间表，至于修改哪个文件，需要多长时间，最后的结果，提取多少方法……

我已经向他推荐了[你如何重构](https://stackoverflow.com/questions/205426/how-do-you-refactor)的技巧，但他想要一个详细的计划。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:42:28.477

没有单元测试，你就不能真正自信地重构。所以从那里开始。不要着手“对所有内容进行单元测试”或“重构所有内容”。无论您身在何处，都只需安静地开始。

最终，你工作的代码应该会明显更干净，这意味着它会更容易（更便宜）有更少的错误，并且维护和重用更便宜。这些是你的经理关心的事情。

# scala - 如何在 Play 和 Scala 中获取所有请求参数

> ID：13355442
> 
> 赞同：14
> 
> 时间：2012-11-13T04:05:35.157
> 
> 标签：scala, playframework

```
 case GET(Path("/rtb_v1/bidrequest")) => Action {  implicit request => 
```

我想获取上面的请求对象并获取表单中发送的所有键/值对并将其展平为 Map[String,String]

我已经浏览了所有文件，但我陷入了死胡同。

这在 Java/Servlets 中非常简单；我想知道为什么在任何地方都没有像这样简单的东西的文档..

```
Map<String, String[]> parameters = request.getParameterMap(); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-13T05:32:25.573

Play 等效于`request.getParamterMap`is `request.queryString`，它返回 a `Map[String, Seq[String]]`。您可以将其展平`Map[String, String]`为

```
request.queryString.map { case (k,v) => k -> v.mkString } 
```

[这是文档。](http://www.playframework.org/documentation/api/2.0/scala/index.html#play.api.mvc.Request)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-13T05:46:25.277

作为 Kim 的替代方法，我个人使用了一个函数，例如..

```
def param(field: String): Option[String] = 
  request.queryString.get(field).flatMap(_.headOption) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-04T15:42:55.840

如果请求使用 POST 方法，它将不起作用。可以使用以下代码：

```
req.body match {
  case AnyContentAsFormUrlEncoded(params) ⇒
    println(s"urlEncoded = $params")
  case mp @ AnyContentAsMultipartFormData(_) ⇒
    println(s"multipart = ${mp.asFormUrlEncoded}")
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-17T16:03:41.630

您可能必须使用以下内容：

```
request.queryString.map { case (k,v) => k -> v.mkString }).toSeq: _* 
```

# jersey - GCM：java.lang.NoClassDefFoundError：com/google/android/gcm/server/Sender

> ID：13355446
> 
> 赞同：2
> 
> 时间：2012-11-13T04:06:25.403
> 
> 标签：jersey, noclassdeffounderror, google-cloud-messaging

我一直在尝试让 Google Cloud Messaging 在 eclipse 中工作。我能够编译他们演示网页上给出的示例并运行它而没有任何错误；但是，当我尝试使用 jersey 创建自己的示例时，当以下代码尝试创建发件人时，出现运行时错误“java.lang.NoClassDefFoundError: com/google/android/gcm/server/Sender”。

```
@POST
@Path("/send")
public Response sendMessage() throws IOException
{
    Sender sender = new Sender("api_key");
    Message message = new Message.Builder().build();
    sender.send(message, DataStore.getDevices(), 5);
    return Response.status(200).entity("Success").build();
} 
```

注意：我已经用 api_key 替换了我的真实 api 密钥。我知道它有效，因为我能够通过运行本教程中解释的 ant 命令使演示工作。另外，如果有歧义，我得到的错误是服务器端的，与android设备无关。

我已经尝试过的事情：

1.  我已将 gcm-server.jar 包含在我的 WEB-INF/lib 文件夹中，并且在项目属性下我已将其包含在构建路径中。
2.  正如在其他网站上提到的，我也尝试过包含 json_simple-1.1.jar，就像我包含 gcm-server.jar 一样。我不知道这会如何影响这个错误，但我看到这个在几个不同的地方被列为答案。
3.  **（解决）**删除tomcat服务器，新建一个。我可能只是清理了项目并得到了相同的结果。

演示教程链接：http: [//developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:09:46.163

我刚刚找到了解决我的问题的方法。无奈之下，我从 eclipse 中删除了旧的 Tomcat 服务器并创建了一个新服务器。当我再次运行该项目时，根本没有任何问题。当我第一次设置项目时，我将 jar 文件包含在 WEB-INF/lib 中，后来，在互联网上阅读了很多帖子后，将 gcm-server.jar 添加到构建路径中。看来此操作可以修复它，但由于某种我不知道的原因，在更改之前服务器上存在一些遗留文件。我应该尝试清理我的项目，但我什至没有想到这是问题所在。无论如何，我希望这对某人有所帮助，因为我已经将我在互联网上可以找到的所有信息浓缩到这篇文章中，并包含了我自己的困境和解决方案。

# c++ - 如何从文本文件中按升序对数据进行排序？

> ID：13355447
> 
> 赞同：0
> 
> 时间：2012-11-13T04:06:29.380
> 
> 标签：c++, sorting, text, vector

我对 c++ 编程还很陌生，我需要编码方面的帮助，以便将文本文件中的数字按升序排序，这样我就可以取它的中位数，但我不知道该怎么做。

到目前为止，这是我的代码：

```
//Create a Vector to hold a set of exam scores.Write a program to do the following tasks: 1\. Read exam scores into a vector from Scores.txt 
//2\. Display scores in rows of five(5) scores.
//3\. Calculate average score and display.
//4\. Find the median score and display.
//5\. Compute the Standard Deviation and display

#include <vector>
#include <iostream>
#include <fstream>
#include <algorithm>

using namespace std;

int main ()
{   const int array_size = 36; // array size
    int numbers[array_size]; //array with 36 elements
    int count = 0;
    int column_count = 5;
    ifstream inputfile; //input file into stream object
    //open file
    inputfile.open("Scores.txt");
    //read file
    while (count < array_size && inputfile >> numbers[count])
        count++;
    //close file
    inputfile.close(); 
    //display numbers read
    for (count = 0; count < array_size; count++) {
    cout << numbers[count] << " ";
    if ( count % column_count == column_count - 1 ) {
         cout << "\n";
    }
}

    //find the average
        double average; //average
        double total = 0; //initialize accumulator
        cout << "\nAverage:\n";
        for (count = 0; count < array_size; count++)
            total += numbers[count];
        average = total/array_size;
        cout << average << " ";
        cout << endl;

    //find the median
        std::sort(numbers.begin(), numbers.end(), std::greater<int>());

        system ("pause");

        return 0;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:14:19.427

```
#include <algorithm>

// ...
std::sort( numbers, numbers + array_size ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:20:57.883

您可能从某个地方复制了这行代码，但不了解它的真正含义：

```
std::sort(numbers.begin(), numbers.end(), std::greater<int>()); 
```

由于您使用的是常规数组，因此第一个参数是指向数组中第一个位置的指针。第二个参数是指向数组中最后一个元素的指针。第三个参数指示数组应该在哪个方向排序（在你的情况下，你想找到中位数，所以方向无关紧要）。对于长度为 的名为 numbers 的数组`array_size`，新的函数调用被重写为：

```
std::sort(&(numbers[0]), &(numbers[array_size]), std::greater<int>()); 
```

将数组传递给函数时，它们会自行衰减为指针。因此，您不需要使用`&`运算符。函数调用可以简化为：

```
std::sort(numbers, numbers + array_size, std::greater<int>()); 
```

在这种情况下对数据进行排序的目的是找到中位数。无论对数组进行升序还是降序排序，中间元素的平均值都是相同的。如果您对需要按升序排序的数组有进一步的用途，请将第三个参数更改为`std::less<int>()`（或完全删除）。它将导致数组按升序排序。

```
std::sort(numbers, numbers + array_size); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:17:35.877

对于 std::sort(...) 函数，请参考[http://www.cplusplus.com/reference/algorithm/sort/](http://www.cplusplus.com/reference/algorithm/sort/)。对于您的问题，您正在处理内置类型。不采用“比较”参数的 std::sort 的第一个重载版本就足够了。如果你不认为，你需要指定“更少”而不是“更大”

# c# - 我无法在 Nop.Services.Customers.CustomerService 中创建静态方法

> ID：13355451
> 
> 赞同：0
> 
> 时间：2012-11-13T04:07:25.073
> 
> 标签：c#, oop, nopcommerce

我尝试在**Nop.Services.Customers.CustomerService**中创建一个静态函数以获取

nop 数据库中的客户列表。我想在外部控制台中调用此函数

应用。但是**CustomerService** 类不包含默认构造函数。

请参阅构造函数代码。

```
 #region Ctor

    /// <summary>
    /// Ctor
    /// </summary>
    /// <param name="cacheManager">Cache manager</param>
    /// <param name="customerRepository">Customer repository</param>
    /// <param name="customerRoleRepository">Customer role repository</param>
    /// <param name="customerAttributeRepository">Customer attribute repository</param>
    /// <param name="encryptionService">Encryption service</param>
    /// <param name="newsLetterSubscriptionService">Newsletter subscription service</param>
    /// <param name="rewardPointsSettings">Reward points settings</param>
    /// <param name="customerSettings">Customer settings</param>
    /// <param name="eventPublisher"></param>
    public CustomerService(ICacheManager cacheManager,
        IRepository<Customer> customerRepository,
        IRepository<CustomerRole> customerRoleRepository,
        IRepository<CustomerAttribute> customerAttributeRepository,
        IEncryptionService encryptionService, INewsLetterSubscriptionService newsLetterSubscriptionService,
        RewardPointsSettings rewardPointsSettings, CustomerSettings customerSettings,
        IEventPublisher eventPublisher)
    {
        _cacheManager = cacheManager;
        _customerRepository = customerRepository;
        _customerRoleRepository = customerRoleRepository;
        _customerAttributeRepository = customerAttributeRepository;
        _encryptionService = encryptionService;
        _newsLetterSubscriptionService = newsLetterSubscriptionService;
        _rewardPointsSettings = rewardPointsSettings;
        _customerSettings = customerSettings;
        _eventPublisher = eventPublisher;
    }

    #endregion 
```

Fileds 在尝试调用静态函数时会显示错误。

请查看字段

```
 #region Fields

    private readonly IRepository<Customer> _customerRepository;
    private readonly IRepository<CustomerRole> _customerRoleRepository;
    private readonly IRepository<CustomerAttribute> _customerAttributeRepository;
    private readonly IRepository<FileUpload> _fileuploadRepository;
    private readonly IEncryptionService _encryptionService;
    private readonly ICacheManager _cacheManager;
    private readonly INewsLetterSubscriptionService _newsLetterSubscriptionService;
    private readonly RewardPointsSettings _rewardPointsSettings;
    private readonly CustomerSettings _customerSettings;
    private readonly IEventPublisher _eventPublisher;

    #endregion 
```

我在 CustomerService 类中创建了一个默认值。

```
 public CustomerService()
 {
 } 
```

并在 CustomerService 中创建新功能

```
 public virtual List<Customer> GetClients()
    {
        var _cust = _customerRepository.Table;

        return _cust.ToList();
    } 
```

并在外部控制台应用程序中调用此函数

```
 private static CustomerService _customerService = new CustomerService();
    static void Main(string[] args)
    {
        List<Customer> cust = _customerService.GetClients();

        ThreadStart start = new ThreadStart(ProcessMails);
        thread = new Thread(start);
        ProcessStatus = 1;
        thread.Start();
    } 
```

但是当我调用这个函数时，它会显示空错误。

![在此处输入图像描述](../Images/e3857d6e3c2311af6e8ee61aa40623ef.png)

不能在 Nop.Core 中创建函数并调用外部应用程序吗？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:12:04.737

从类定义来看，这是不可能的。静态方法是针对类型的，不是针对实例的，所以可以在静态方法中使用的成员变量也应该是静态的。

# java - 有没有办法在 jdbctemplate 中的 WHERE 子句之前使用 NamedParameters

> ID：13355452
> 
> 赞同：0
> 
> 时间：2012-11-13T04:07:25.197
> 
> 标签：java, jdbc, jdbctemplate, spring-jdbc

我正在运行如下查询：

```
SELECT COLNAME FROM TABLEA GROUP BY COLNAME; 
```

`COLNAME`有时会由用户直接提供，所以我想避免在我的代码中注入 sql。所以，我想知道是否可以这样写我的查询：

```
SELECT ? FROM TABLEA GROUP BY ?; 
```

另一种选择是将用户输入与表的所有列名匹配，但是，这种方法似乎是一种不好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T05:20:19.353

> 您不能将参数标记用于列名、表名、数据类型名或基本上不是数据的任何内容。

[回复可以在这里..](https://stackoverflow.com/a/942473/1060037)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T23:43:13.133

这不行。准备好的语句用于替换值而不是列名。您必须自己构建字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:41:32.857

利用`JdbcTemplate#queryForObject`

[我找到了一些例子](http://www.mkyong.com/spring/spring-jdbctemplate-querying-examples/)

# windows-phone - 在 Windows Phone 8 中使用非本地图像设置锁定屏幕

> ID：13355455
> 
> 赞同：3
> 
> 时间：2012-11-13T04:07:53.307
> 
> 标签：windows-phone, lockscreen, windows-phone-8

我正在尝试使用 SetImageUri 在 Windows Phone 8 上设置锁定屏幕，但我无法让它与非本地图像一起使用。就我而言，我在单独的程序集中和远程服务器（Azure CDN）上有图像。

我已经添加了清单条目，并从示例代码中获得了成为提供者的用户权限。

这就是代码的样子，imageUri 是这样的：

[https://infinitecodex.blob.core.windows.net/nflfanapps/26-WALL-1.png](https://infinitecodex.blob.core.windows.net/nflfanapps/26-WALL-1.png)

图像退出并且是一个有效文件。我尝试将其放入单独的图像程序集中，但仍然出现此错误。

```
 // At this stage, the app is the active lock screen background provider.
                var uri = new Uri(imageUri, UriKind.Absolute);

                // Set the lock screen background image.
                Windows.Phone.System.UserProfile.LockScreen.SetImageUri(uri); 
```

我尝试的一切都会导致异常：

```
 Value does not fall within the expected range. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T08:52:52.680

根据本指南，您只能使用存储在独立存储中的图像或与应用程序打包的图像：
[Windows Phone 8 的锁屏背景](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206968%28v=vs.105%29.aspx)
没有什么能阻止您将图像下载到独立存储并使用此图像的 Uri 作为锁屏源。

> // 在这个阶段，app 是活跃的锁屏背景提供者。// 下面的代码示例展示了新的 URI 架构。// ms-appdata 指向本地应用数据文件夹的根目录。// ms-appx 指向到本地应用程序安装文件夹，以引用捆绑在 XAP package.var schema = isAppResource 中的资源？“ms-appx:///”：“ms-appdata:///Local/”；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:37:46.063

我猜只有隔离的存储图像可以用作锁定图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:45:47.483

另请参阅 SetImageUri 上的 MSDN 文档； [http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.system.userprofile.lockscreen.setimageuri(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.system.userprofile.lockscreen.setimageuri(v=vs.105).aspx) "*绝对路径统一资源标识符 (URI)到**隔离存储中的映像，或映像安装路径**。”*

# java - 为什么每个 JDK 都带有 3 个 JRE？

> ID：13355458
> 
> 赞同：7
> 
> 时间：2012-11-13T04:08:18.623
> 
> 标签：java, appletviewer

我注意到在`C:\Program Files\Java`文件夹中，有JDK安装的公共JRE，我知道这是正常的。但是里面有`jdk1.x\jre\bin\`带有`java.exe, javaw`etc的文件夹。然后是编译器文件夹`jdk1.x\bin`，其中包含`javac`JRE 中包含的所有其他文件，例如`java.exe, javaw, appletviewer`等。

为什么 JDK 会附带所有这些 JRE？这3个有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T04:48:31.493

Sun/Oracle 在此处记录 JDK 目录组织：

*   [http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jdkfiles.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jdkfiles.html)

> c:\jdk1.6.0\jre\bin：Java 平台使用的工具和库的可执行文件和 DLL。可执行文件与/jdk1.6.0/bin 中的文件相同。
> 
> ...
> 
> 请注意，JRE 的文件结构与 JDK 的 jre 目录的文件结构相同。

基本上，JRE 目录包含您可以随应用程序重新分发的文件，如果您选择

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T04:13:04.973

我没有任何内部知识，但是我发现这有时很有用。

一般人的工作站上不安装JDK，只安装JRE。我喜欢在 JRE 下运行我的应用程序，我知道它与安装到客户端的应用程序相同。

# javascript - 用于查看 HTML 元素中是否有任何文本的 JavaScript 函数

> ID：13355460
> 
> 赞同：1
> 
> 时间：2012-11-13T04:08:21.780
> 
> 标签：javascript, jquery, html

我正在创建一个非常基本的 tic tac toe javascript 版本。我已经使用表格设置了电路板并适当地分配了边框。

当玩家移动时，一个 X 被放置在盒子内，当计算机移动一个 O 时。

但是，我的问题是试图确定单元格是否已被“使用”，这意味着其中已经存在 X 或 O。

javascript中是否有一个函数可以检查HTML元素中的内容，或者任何人都可以想到另一种方法来做到这一点？我考虑使用 9 的数组，持有 x 或 o 并以这种方式检查，但我遇到了如何将单元格编号传递给该函数以更新数组的问题。

我是 javascript 新手，所以如果存在这些可能性中的任何一种，请告诉我，或者如果您有任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:10:12.167

使用[`textContent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)and[`innerText`](http://msdn.microsoft.com/en-us/library/ie/ms533899%28v=vs.85%29.aspx)获取元素的文本。

**例子：**

```
<!doctype html>
<html>
    <head>
        <title>test</title>
    </head>
    <body>
        <p id="hello-container">Hello, World!</p>
        <script type="text/javascript">
            var el = document.getElementById('hello-container');
            var text = el.textContent || el.innerText || '';
            alert('The text is: ' + text);
        </script>
    </body>
</html> 
```

**解释：**

由于 IE8- 使用`innerText`和 Firefox 使用`textContent`（其他浏览器选择一侧或两者），您需要检查这两个属性。我们利用 JavaScript 的逻辑或运算符`||`在一行中检查两个属性。如果有属性`text = el.textContent || el.innerText`将存储`el.textContent`。如果没有属性（或者如果是空字符串或只是空格），那么它将尝试存储在变量中。最后，如果既没有也找不到 * ，我们将其设置**为**空字符串。`text``textContent``textContent``textContent``innerText``text``|| ''``textContent``innerText`

 *******仅当`textContent`是空字符串/空格`innerText`且不存在时才需要这样做，在这种情况下两者都是错误的。我们不是 let `text`be `undefined`，而是存储空字符串`''`。

* * *

如果您想检查 HTML 是否在元素中而不是文本中（如果您在 X 和 O 中使用图像元素，这将很有帮助），您可以使用[`innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML). 这是所有浏览器的标准！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T04:13:55.213

最好的方法是使用二维数组：

```
 var tictactoe = [["","",""],["","",""],["","",""]] 
```

然后使用

```
 if(tictactoe[row][col] == "")
                tictactoe[row][col] = "X" //(or "O", you decide) 
```

并使用单独的功能进行绘图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T04:16:04.460

类似于大卫……</p>

我使用数组构建了一个井字游戏来保存动作，然后基于数组进行显示（将游戏逻辑与显示分开）。这样你就不用关心牢房里有什么了。

无论如何，你可以这样做：

```
if (element.textContent || element.innerText) {
  // there is some text content
} 
```

但是，元素中可能存在导致误报的空格。或者 X 和 O 可能是一个图像元素，无论如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T05:31:15.533

我认为由于井字棋是如此简单，你可以只使用一个数组。

```
var board = new Array(9);

//Board layout:
// [0][1][2]
// [3][4][5]
// [6][7][8]

//Win if any of these combinations are present
//012, 036, 048, 147, 246, 258, 345, 678 
```

然后只需循环`board`并确定它是否具有`X`or的值`O`并进行一些简单的检查以查看它们是否连续有 3 个。

```
var x = [], o = [];
var winner = 'Game in Progress';
for(var i in board){
    if(board.hasOwnProperty(i)){
      if(board[i] == 'X') 
        x[i] = true;
      else if(board[i] == 'O')
        o[i] = true;
      if(i == 8) winner = 'Cat Game';
    }
}

if((x[0] && x[1] && x[2]) || (x[0] && x[3] && x[6]) ||
   (x[0] && x[4] && x[8]) || (x[1] && x[4] && x[7]) ||
   (x[2] && x[4] && x[6]) || (x[2] && x[5] && x[8]) ||
   (x[3] && x[4] && x[5]) || (x[6] && x[7] && x[8])){
     winner = 'X is the Winner';
}

if(winner != 'X is the Winner')
if((o[0] && o[1] && o[2]) || (o[0] && o[3] && o[6]) ||
   (o[0] && o[4] && o[8]) || (o[1] && o[4] && o[7]) ||
   (o[2] && o[4] && o[6]) || (o[2] && o[5] && o[8]) ||
   (o[3] && o[4] && o[5]) || (o[6] && o[7] && o[8])){
     winner = 'O is the Winner';
} 
```

我写了[**一些**](http://jsfiddle.net/yYpZ6/)制作井字游戏所需的代码，以便您更好地理解。剩下的就是显示轮到谁了，这样当玩家点击一个框（在他们的回合中）时，他们的符号就会被添加到那个框（如果它是空的），并重置游戏。祝你好运。:)**

# node.js - Socket.io 授权发送错误的 cookie？

> ID：13355461
> 
> 赞同：2
> 
> 时间：2012-11-13T04:08:25.403
> 
> 标签：node.js, socket.io

我正在使用 nodejs 和套接字来执行授权，但是通过浏览器发送的 cookie 似乎已损坏。

```
if (data.headers.cookie) {
    data.cookie = utils.parseCookie(data.headers.cookie);
    if (data.cookie['connect.sid']) {
        data.sessionID = data.cookie['connect.sid'];
        ...
    }
} 
```

sessionID 由于某种原因与数据库记录不匹配。关于ui发生了什么的任何想法？我正在使用 express 和 mongo 作为会话存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:10:26.213

尝试查看发送过来的 cookie sid 是否与您的数据库记录匹配：

```
data.sessionID = data.cookie['connect.sid'].split('.')[0].substring(2); 
```

# c# - 购物车促销代码规则实现

> ID：13355462
> 
> 赞同：0
> 
> 时间：2012-11-13T04:08:33.697
> 
> 标签：c#

管理员将创建促销代码并从预定义规则列表中进行选择。规则是约束，例如：

*   最大使用量
*   到期日期
*   最小购物车小计
*   ETC

我可以将这些规则硬编码到代码中，或者我可以（希望）将业务逻辑存储在数据库表中并即时编译/执行它。每个业务规则都将相对简单，并且可以通过 Web 管理员创建新规则。我想我可以编写一些关于创建所述规则的测试，以在某种程度上验证代码逻辑。

**将规则逻辑存储在数据库中是一个非常糟糕的主意吗？**

我认为硬编码所有这些规则并在每次添加新规则时重新编译是愚蠢的。

注意：我读过它`System.CodeDom`会为我进行即时编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:43:47.437

为什么不使用脚本语言表达规则并在尝试添加促销代码时对其进行解释？

**细化**

与其存储需要编译的代码（C# 或其他），不如在幕后将您的规则表达为 javascript（如果您愿意，可以使用另一种脚本语言，但 javascript 无处不在）。然后使用 .NET javascript 实现（JScript 或可用的开放选项之一）来评估您的 javascript。因此，您的 js 可能如下所示：

```
promo.timesUsed < 5 && cart.total >= 35.00 
```

像 JScript.Net 和 Java 的 Rhino 这样的 Javascript 桥通常提供了获取运行时对象并将它们暴露给脚本上下文的能力。因此，在我上面的示例中，`promo`将`cart`是您向脚本上下文公开的 C# 对象。您现在唯一需要尊重的是您将向脚本上下文公开哪些对象。您可以将脚本文本传递给某种 eval 方法，并返回一个布尔值。您可以创建各种规则，并且您只会受到可用数据的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:38:51.570

如果您的意思是“将用 C# 编写的代码作为纯文本存储”在数据库中，然后即时编译它，那么是的，这是一个坏主意。在一个将代码存储为数据的项目上工作了几年，我可以根据经验告诉你，这是一个你会后悔的决定。

这是一个坏主意的最重要原因是，将代码转换为数据意味着您永远无法更改此代码可能耦合到的接口/类。这意味着您现在能够更好地预测和支持您以后可能关心的每个功能，这非常困难。此自定义代码也可能有缺陷、速度慢且难以调试。

**更新：**

还有其他方法可以解决这个问题。看待这一点的一种方法是将`RuleSpecification`对象存储在数据库中，这可能就像这些类型的类型和参数列表一样简单。至于在 web ui 中配置它们，我将从选择硬编码约束的能力开始，并能够在那里配置参数（`ExpirationDataRule`例如，为 设置数据）。这可能就足够了。

# python - Flask Catch SQLite 查询问题

> ID：13355467
> 
> 赞同：3
> 
> 时间：2012-11-13T04:09:42.167
> 
> 标签：python, json, sqlite, http, flask

我正在 Flask 中编写 API，我的 HTTP`DELETE`方法根据其作为 JSON 传递的 ID 删除 SQLite 中的记录。

假设传递的 ID 不存在，则不抛出错误并返回成功 200。这是预期的行为吗？我应该抛出 HTTP 错误吗？如果是这样，我如何检查`db.execute()`查询是否未正确完成？

抱歉，这是我第一次在 Flask 中编写 API，我还在学习它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:51:28.900

如果 ID 存在，则该[`sqlite3.Cursor`](http://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor)对象具有[`rowcount`](http://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.rowcount)大于或等于 1 的属性。

或者，由于[`DELETE`是幂等的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)，您*可以*假设您提供的每个 ID在某些时候*都是*有效的，并且始终返回 200 或 204（尽管如果资源永远不存在，则 404 会更好）。

# python - 与多个非空格字符的模式匹配

> ID：13355469
> 
> 赞同：0
> 
> 时间：2012-11-13T04:10:03.973
> 
> 标签：python, regex, string, pattern-matching, wildcard

我有以下字符串数据：

```
data = "*****''[[dogs and cats]]''/n" 
```

我想在 python 中使用正则表达式来提取字符串。所有数据都包含在双引号“”中。我使用了哪些通配符，以便获得以下信息：

```
print data.groups(1)
print data.groups(2)
print data.groups(3)

'dogs'
'and'
'cats' 
```

编辑：到目前为止，我有一些很长的内容

```
 test = re.search("\\S*****''[[(.+) (.+) (.+)\\S]]''", "*****''[[dogs and cats]]''\n") 
  print test.group(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:05:57.593

`split`正如其他人所说，使用一个额外的步骤非常简单：

```
data = "***rubbish**''[[dogs and cats]]''**more rubbish***"
words = re.findall('\[\[(.+?)\]\]', data)[0].split() # 'dogs', 'and', 'cats' 
```

一个单一的表达也是可能的，但它看起来相当混乱：

```
rr = r'''
    (?x)
    (\w+)
    (?=
        (?:
            (?!\[\[)
            .
        )*?
        \]\]
    )
'''
words = re.findall(rr, data) # 'dogs', 'and', 'cats' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:47:12.460

很难确切地知道您在寻找什么，但我假设您正在寻找一个正则表达式，它解析出一个或多个由一些非字母数字字符包围的空格分隔的单词。

```
data = "*****''[[dogs and cats]]''/n"

# this pulls out the 'dogs and cats' substring
interior = re.match(r'\W*([\w ]*)\W*', data).group(1)

words = interior.split()

print words
# => ['dogs', 'and', 'cats'] 
```

不过，这对您的要求做出了很多假设。取决于你想要什么，正则表达式可能不是最好的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:47:24.553

有些人在遇到问题时会想，“我知道，我会使用正则表达式。” 现在他们有两个问题。” Jamie Zawinski

```
data = "*****''[[dogs and cats]]''/n"
start = data.find('[')+2
end = data.find(']')
answer = data[start:end].split()

print answer[0]
print answer[1]
print answer[2] 
```

# css - CSS悬停在元素之后和之前

> ID：13355476
> 
> 赞同：3
> 
> 时间：2012-11-13T04:10:33.797
> 
> 标签：css

```
<div id="box"></div>​

#box{
height:40px;
width:100px;
background:red;
}

#box:hover{background:blue;}

#box:after{
content: "";
height: 10px;
position: absolute;
width: 0;
    margin-top:50px;
background:red;
border: 10px solid transparent;
border-top-color: #04ADE5;
}
​ 
```

示例[http://jsfiddle.net/zfQvD/4/](http://jsfiddle.net/zfQvD/4/)

我在创建箭头后使用，但是当我将鼠标悬停在框上时，箭头背景没有改变？悬停在框上时如何更改箭头的背景？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T04:14:27.340

箭头是由 :after 伪元素的边框制成的，因此要更改该颜色，请使用

```
#box:hover:after{border-top-color: blue;} 
```

[http://jsfiddle.net/mowglisanu/zfQvD/9/](http://jsfiddle.net/mowglisanu/zfQvD/9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T04:14:59.600

简单的！

```
#box:hover:after {
    border-top-color: blue;
} 
```

# php - 根据操作从多个表单发布数据

> ID：13355477
> 
> 赞同：0
> 
> 时间：2012-11-13T04:10:46.750
> 
> 标签：php, javascript, forms, http, dynamic

我在一个页面上有两种不同的表单，可以动态生成输入。一个用于文本输入，通过按下一个按钮（我称之为表单 1）另一个文本框出现。另一个添加要通知的用户。当一个按钮被按下时，一个用户被添加到列表中（我称之为表格 2）。

假设我在表单 1 上生成了 3 个文本框，如果我尝试使用表单 2 添加另一个用户，表单 1 中的所有文本框都会消失，因为没有发布表单 1 中的数据。

以下是这两种形式的调用方式

```
<form method="post">
<?
$friends = new common_functions();
$friends->add_friends($added_friends); //this is in common functions - also used for assistance invites
?>
<br>
</form>

<form method="post">
<br>
<?
$register = new common_functions(); 
$register->register_tasks($j, $reg_description, $reg_num);
?>
</form>
<? 
```

当我更改它以使它们同时发布（而不是像当前那样单独发布）时，各个表单无法正常工作。

**总而言之，有没有办法告诉表单即使没有按下提交按钮也可以发布其数据？类似 onaction（从其他形式发布数据......）**

这是来自表格 2。如果我从中删除该方法，那么我将无法从列表中正确删除项目。

```
if(count($added_friends) > 0){
        ?>
        <table width="200">
        <col width="150">
        <th>Name</th><th>Remove</th>
        <?
        $count = count($added_friends);
        for($i=0; $i< $count; $i++){
            if($added_friends[$i] == NULL){
                $count = $count;
            }
            $friend = $added_friends[$i];
            ?>

            <!-- allows a user to remove invited friends -->
            <form method="post">
            <tr><td><? echo $friend; ?></td><td><input type="submit" name="remove_friend" value="X"/>
            <input type="hidden" name="remove_name" value="<? echo $friend; ?>"/>
            <input type="hidden" name="added_friends" value="<? echo implode(',',$added_friends); ?>"/></td></tr>               </form>
            </form>
            <?
        }
        ?>
        </table>

    <?
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:48:24.363

我不确定你们的确切需求，但对于这样的事情，我会使用[knockout.js](http://knockoutjs.com)。还有其他这样的 javascript 框架，如[angularjs](http://angularjs.org)和[骨干网](http://backbonejs.org)（谷歌了解更多）。

[这是jsFiddle](http://jsfiddle.net/V5JdU/2/)上的一个简单的 knockoutjs示例，显示了您正在寻找的功能。

### Javascript

```
var viewModel = function(){
    this.values = ko.observableArray();
    this.invited = ko.observableArray();
    this.addValue = function(){
        var txt = $('#form1 input').val();
        this.values.push(txt);
    }.bind(this);
    this.addInvite = function(){
        var txt = $('#form2 input').val();
        this.invited.push(txt);
    }.bind(this);
    this.sendData = function(){
        $.ajax({
            url: 'www.blah.com/blahblah',
            data: { text: this.values(), invited: this.invited() } 
        });   
    }.bind(this);
}

ko.applyBindings(new viewModel()); 
```

### HTML

```
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://github.com/downloads/SteveSanderson/knockout/knockout-2.0.0.js"></script>
</head>
<body>
    <div id="form1">
        <input type="text" />
        <button data-bind="click: addValue">Add</button>
    </div>
    <div id="valueList" data-bind="visible: values().length > 0">
        <ul data-bind="foreach: values">
            <li data-bind="text: $data"></li>
        </ul>
    </div>
    <div id="form2">
        <input type="text" />
        <button data-bind="click: addInvite">Invite</button>
    </div>
    <div id="inviteList" data-bind="visible: invited().length > 0">
        <ul data-bind="foreach: invited">
            <li data-bind="text: $data"></li>
        </ul>
    </div>
    <button data-bind="click: sendData">Save</button>
</body> 
```

如您所见，knockoutjs 依赖于可用的**JQuery**，但这也使您可以访问 JQuery 的 ajax 功能。这允许您通过 ajax 发送数据。我 <3 knockoutjs 因为它的简单性，用户喜欢它提供的魔力。*当然，您必须修改 ajax 选项以满足您的需要*

# c++ - 对象构造期间缓冲区太小。认为它与 strcpy_s() 有关

> ID：13355481
> 
> 赞同：1
> 
> 时间：2012-11-13T04:11:18.090
> 
> 标签：c++, class, constructor, strcpy

我提交的代码是这门课第三周工作的结果。我对事情的处理非常好，（或者我是这么认为的），但是本周的重点是指针，我不知道为什么我不断收到这个错误。我不断收到调试断言失败！错误以及一般的“缓冲区太小”解释。

![我的错误信息](../Images/fea0c440ffa907460c774991a9eb620f.png)

这是我使用 VS 2012 RC 版本 11.0.505221.1 在 Win8 操作系统上编译的完整代码。与我在 Linux 中编译的唯一区别是我在这段代码中使用了 strcpy_s()，因为出于某种原因，MS 不喜欢 strcpy()。

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <iomanip>
#include <limits>

using namespace std;

class HotelRoom
{
    char roomNumber[4];
    char guest[81];
    int roomCapacity, currentOccupants;
    double roomRate;

public:
    HotelRoom(char[], char[], int, double);
    ~HotelRoom();
    void DisplayRoom();
    void DisplayNumber();
    void DisplayName();
    int GetCapacity();
    int GetStatus();
    double GetRate();
    void ChangeStatus(int);
    void ChangeRate(double);
};

HotelRoom::~HotelRoom() {
cout << endl << endl;
cout << "Room #" << roomNumber << " no longer exists." << endl;
delete [] guest;
}

void HotelRoom::DisplayName() {
cout << guest;
}

void HotelRoom::DisplayNumber() {
cout << roomNumber;
}

int HotelRoom::GetCapacity() {
return roomCapacity;
}

int HotelRoom::GetStatus() {
return currentOccupants;
}

double HotelRoom::GetRate() {
return roomRate;
}

void HotelRoom::ChangeStatus(int occupants) {
if(occupants <= roomCapacity) {
    currentOccupants = occupants;
}
else {
    cout << endl << "There are too many people for this room. Setting occupancy to -1." << endl;
    currentOccupants = -1;
}
}

void HotelRoom::ChangeRate(double rate) {
roomRate = rate;
}

HotelRoom::HotelRoom(char room[], char guestName[], int capacity, double rate)
{
strcpy_s(roomNumber, room);     //Compiles fine with strcpy on Linux, but MS is making me use strcpy_s to compile
guestName = new char[strlen(guestName) + 1];
strcpy_s(guest, guestName);     //Same as above
roomCapacity     =  capacity;
currentOccupants = 0;
roomRate         = rate;
}

void HotelRoom::DisplayRoom()
{
cout << setprecision(2)
     << setiosflags(ios::fixed)
     << setiosflags(ios::showpoint);
cout << endl << "The following is pertinent data relating to the room:\n"
     << "Guest Name:        " << guest << endl
     << "Room Number:       " << roomNumber << endl
     << "Room Capacity:     " << GetCapacity() << endl
     << "Current Occupants: " << GetStatus() << endl
     << "Room Rate:         $" << GetRate() << endl;
}

int main()
{
int numOfGuests;
char roomNum[4]; 
char buffer[81];    //Buffer to store guest's name
int roomCap;
double roomRt;
bool badInput = true;
cout << endl << "Please enter the 3-digit room number: ";
do {        //loop to check user input
    badInput = false;   
    for(int x = 0; x < 3; x++)
    {
        cin >> roomNum[x];
        if(!isdigit(roomNum[x]))        //check all chars entered are digits
        {
            badInput = true;
        }
    }
    char x = cin.get();
    if(x != '\n')       //check that only 3 chars were entered
    {
        badInput = true;
    }
    if(badInput)
    {
        cout << endl << "You did not enter a valid room number. Please try again: ";
    }
} while(badInput);
for(;;)     //Infinite loop broken when correct input obtained
{
    cout << "Please enter the room capacity: ";
    if(cin >> roomCap) {
        break;
    } else {
        cout << "Please enter a valid integer" << endl;
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    }
}
for(;;)     //Infinite loop broken when correct input obtained
{
    cout << "Please enter the nightly room rate: ";
    if(cin >> roomRt) {
        break;
    } else {
        cout << "Please enter a valid rate" << endl;
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    }
}
cin.get();      //Dump the trailing return character
cout << "Please enter guest name: ";
cin.getline(buffer, 81);
HotelRoom room1(roomNum, buffer, roomCap, roomRt);
for (;;) {      //Infinite loop broken when correct input obtained
cout << "Please enter the number of guests for room #";
room1.DisplayNumber();
cout << ": ";
    if (cin >> numOfGuests) {
        break;
    } else {
        cout << "Please enter a valid integer" << endl;
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    }
}
room1.ChangeStatus(numOfGuests);
room1.DisplayRoom();
cout << endl << "The following shows after the guests have checked out." << endl;
room1.ChangeStatus(0);
room1.DisplayRoom();
room1.ChangeRate(175.0);
for (;;) {      //Infinite loop broken when correct input obtained
cout << "Please enter the number of guests for room #";
room1.DisplayNumber();
cout << ": ";
    if (cin >> numOfGuests) {
        break;
    } else {
        cout << "Please enter a valid integer" << endl;
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    }
}
room1.ChangeStatus(numOfGuests);
room1.DisplayRoom();
return 0;
} 
```

更新：

我添加了 cout 语句来查看程序中出现问题的位置，它肯定是在 HotelRoom 构造函数中的 strcpy() 语句中。这是构造函数，以下是我收到的输出

```
HotelRoom::HotelRoom(char room[], char guestName[], int capacity, double rate)
{
cout << endl << "Attempting 1st strcpy...";
strcpy_s(roomNumber, room);     //Compiles fine with strcpy on Linux, but MS is making me use strcpy_s to compile
cout << endl << "1st strcpy successful!";
guestName = new char[strlen(guestName) + 1];
cout << endl << "Attempting 2nd strcpy...";
strcpy_s(guest, guestName);     //Same as above
cout << endl << "2nd strcpy successful!";
roomCapacity     =  capacity;
currentOccupants = 0;
roomRate         = rate;
} 
```

![cout 输出](../Images/4c4dca2c1b88c4581fa12562a1bda76d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:53:45.000

我想你可能需要再看看这个：

```
guestName = new char[strlen(guestName) + 1];
cout << endl << "Attempting 2nd strcpy...";
strcpy_s(guest, guestName);     //Same as above 
```

我很确定，因为`guestName[]`是一个参数，你的意图是不要在函数范围内永久丢失该指针，用一个新分配的非终止指针替换它，然后继续将未初始化的内存复制到你的成员变量。

也许你想要这个：

```
strcpy_s(guest, guestName); 
```

此外，`guest`是类型的成员变量`char[81]`。除非您希望堆管理器再次抛出该讨厌的对话框，否则您可能希望避免在类析构函数中这样做：

```
delete [] guest; 
```

这是删除非堆内存并且几乎保证使堆管理器呕吐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:27:24.853

如果您不使用`strcpy_s`，则需要在从指针复制到缓冲区之前进行边界检查。

此外，您不应该调用 delete on `guest`。Delete 用于释放您使用 new 分配的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:17:13.480

您已定义`char buffer[81]`，但您正在尝试读取 81 个字符，但`cin.getline(buffer, 81)`不包括`\0`. 因此，您需要将较早的一项更改为`char buffer[82]`或将较晚的一项更改为`cin.getline(buffer, 80)`。

如果你使用 C++ 为什么不使用`string`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T04:22:08.580

MS 要求您使用 _s 函数的原因是为了保护您的代码免受缓冲区溢出的影响，就像您的代码当前显示的那样。检查[此链接](http://msdn.microsoft.com/en-us/library/8ef0s5kh%28v=vs.80%29.aspx)以获取更多信息。

您有一个 81 个字符的字符串。您新建一个大小为 + 1 的新字符串（您将丢失数据），现在是 82 个字符。当您尝试将缓冲区复制到长度为 81 个字符的客户机中时，您会得到一个断言。

考虑使用 std::string 并停止分配/释放字符串，这对您的情况没有用。

# vb.net - 在我的表格上画点

> ID：13355484
> 
> 赞同：0
> 
> 时间：2012-11-13T04:11:56.613
> 
> 标签：vb.net, winforms

我想在我的表单上绘制 1px 点

例子：

```
1pxBlack 1pxwhite 1pxBlack 1pxwhite 1pxBlack 1pxwhite 
1pxBlack 1pxwhite 1pxBlack 1pxwhite 1pxBlack 1pxwhite 
1pxBlack 1pxwhite 1pxBlack 1pxwhite 1pxBlack 1pxwhite 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:14:10.600

您可以使用`setPixel`

例子：

```
 Dim bmp As New Bitmap(Me.Width, Me.Height)
    For y = 0 To Me.Height - 1
        For x = 0 To Me.Width - 1
            If x Mod 2 = 0 And y Mod 2 = 0 Then
                bmp.SetPixel(x, y, Color.Black)
            Else
                bmp.SetPixel(x, y, Color.White)
            End If
        Next
    Next
    Me.BackgroundImage = bmp 
```

# face-recognition - 使用 pca 进行人脸识别

> ID：13355487
> 
> 赞同：0
> 
> 时间：2012-11-13T04:12:08.090
> 
> 标签：face-recognition

在对特征面进行归一化后的 pca 技术中，特征面的乘积不是正交的。
因此，图像的重量不正确。

我无法将原始图像证明为特征面的线性组合。

什么是适当的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:03:11.087

If you are trying to reconstruct your face than you need that, but if you just want to recognize the face you dont need a linear combination of eigen faces.

# c# - 找不到内存泄漏

> ID：13355496
> 
> 赞同：9
> 
> 时间：2012-11-13T04:13:07.883
> 
> 标签：c#, image, windows-phone-7, memory, memory-leaks

我一直在开发 WP7 应用程序，它是图片库应用程序，实现了基本的缩放和轻弹手势。

出于测试目的，我使用设置为 Content 的离线图像（它们的文件名已编号）编译了该应用程序，并通过硬编码字符串（稍后将被替换）访问它们。

但后来意识到该应用程序消耗大量内存。我以为是图片的原因，发现[了这个博客](http://blogs.msdn.com/b/swick/archive/2012/04/05/10151249.aspx?CommentPosted=true#commentmessage)；图像总是被缓存。我使用博客中的代码来纠正这个问题。尽管消耗率确实下降了，但仍然没有释放内存。

对于最后的尝试，我创建了另一个带有基本功能 2 按钮的测试应用程序，用于导航和图像的图像控制，只是为了确保不是我的手势代码可能是问题。

这是xml

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Image Grid.Row="0" x:Name="ImageHolder" Height="Auto" Width="Auto" Stretch="Uniform" Tap="image_Tap" />
    <TextBlock x:Name="MemUsage" />
    <StackPanel Grid.Row="1" Orientation="Horizontal">
        <Button x:Name="PrevButton" Content="Prev" Width="240" Click="btnPrev_Click"/>
        <Button x:Name="NextButton" Content="Next" Width="240" Click="btnNext_Click"/>
    </StackPanel>
</Grid> 
```

这是 .cs 文件

```
 const int PAGE_COUNT = 42;
    int pageNum = 0;
    public MainPage()
    {
        InitializeComponent();
        RefreshImage();
    }

    private void btnPrev_Click(object sender, RoutedEventArgs e)
    {
        pageNum = (PAGE_COUNT + pageNum - 1) % PAGE_COUNT; // cycle to prev image
        RefreshImage();
    }

    private void btnNext_Click(object sender, RoutedEventArgs e)
    {
        pageNum = (PAGE_COUNT + pageNum + 1) % PAGE_COUNT; // cycle to next image
        RefreshImage();
    }

    private void image_Tap(object sender, GestureEventArgs e)
    {
        RefreshTextData();
    }

    private void RefreshImage()
    {
        BitmapImage image = ImageHolder.Source as BitmapImage;
        ImageHolder.Source = null;
        if (image != null)
        {
            image.UriSource = null;
            image = null;
        }
        ImageHolder.Source = new BitmapImage(new Uri("000\\image" + (pageNum + 1).ToString("D3") + ".jpg", UriKind.Relative));
        RefreshTextData();
    }

    private void RefreshTextData()
    {
        MemUsage.Text = "Device Total Memory = " + (long)DeviceExtendedProperties.GetValue("DeviceTotalMemory") / (1024 * 1024)
            + "\nCurrent Memory Usage = " + (long)DeviceExtendedProperties.GetValue("ApplicationCurrentMemoryUsage") / (1024 * 1024)
            + "\nPeak Memory Usage = " + (long)DeviceExtendedProperties.GetValue("ApplicationPeakMemoryUsage") / (1024 * 1024);
    } 
```

但是仍然存在内存泄漏，我无法指出它。我很难找到它。内存分析器显示我有很多字符串实例，但我无法解释。

几点：

*   我在文件夹“000”中有图像并命名为“image###”。目前我有文件名从“image001”到“image042”的图像
*   测试应用程序的第一页完全显示图像后，内存占用为 6 MB，在第一页更改后，它上升到几乎 18-20 MB
*   如果图像数量允许，随后的页面更改会导致内存逐渐增加，然后最终崩溃，否则在循环浏览所有图像后内存消耗是恒定的
*   我正在使用尺寸约为 1280 x 2000 的 .jpg 文件进行测试，我没有调整图像大小。

![堆摘要 -> 新分配](../Images/ba5c33bcc0eb0fc08e7cc16e80be7dae.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T21:36:54.037

我有相同类型的应用程序，带有下一张/上一张图片按钮。而且我有完全相同的内存泄漏，这让我发疯。

我仍然无法找到根本原因，但我已经设法用一个丑陋的黑客绕过它。在显示下一张图片时，我强制旧图像源加载无效图片，从而释放内存。我不明白为什么删除所有引用并调用垃圾收集器是不够的，必须在内部某个地方保存另一个引用。

无论如何，这里是黑客：

```
private void DisposeImage(BitmapImage image)
{
    if (image != null)
    {
        try
        {
            using (var ms = new MemoryStream(new byte[] { 0x0 }))
            {
                image.SetSource(ms);
            }
        }
        catch (Exception)
        {
        }
    }
} 
```

例如，您可以在您的`RefreshImage`方法中调用它：

```
private void RefreshImage()
{
    BitmapImage image = ImageHolder.Source as BitmapImage;
    ImageHolder.Source = null;

    DisposeImage(image);

    ImageHolder.Source = new BitmapImage(new Uri("000\\image" + (pageNum + 1).ToString("D3") + ".jpg", UriKind.Relative));
    RefreshTextData();
} 
```

有点羞于使用它，但至少它似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:18:08.857

我已经尝试过您的代码示例，但在 Windows Phone 8 环境中，我无法重现泄漏。唯一的区别是我使用了自己的图像。

我的 512 WVGA 模拟器当前的内存使用量保持在 13MB，峰值保持在 14MB。我已经按了大约 20 次“下一个按钮”。

您是否也尝试过使用 Bindings for ImageHolder 而不是手动设置 Source？

（顺便说一句，从视觉上看，我在您的代码隐藏中看不到任何可能的内存泄漏）。

（另请查看这篇文章[http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/02/01/memory-profiling-for-application-performance.aspx](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/02/01/memory-profiling-for-application-performance.aspx)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:02:13.610

经过多次试运行和调试会话后，我发现当图像驻留在应用程序的独立存储中时，不会执行（或不积极执行）图像缓存。

问题是我正在使用作为 xap 文件一部分的图像，作为内容包含在内。我这样做是因为我只是想测试我的图像查看器。但是当我的应用程序完成时，情况就不是这样了。应用程序真正设计用于将图像存储在独立存储中并显示它们。

所以我设置了必要的代码，瞧，图像现在正在被垃圾收集，即使它们仍然被缓存。请参见下图（查看垃圾收集器被调用的次数）。这是一个不那么微不足道的问题的解决方案，这就是为什么没有其他人面临这种​​问题的原因。

我相信，当 WP7 silverlight 发现图像不是来自独立存储时，它会假定图像来自某个远程 URI，并决定无论如何都要缓存它。这就是silverlight图像缓存问题出现的地方。另一个答案证实这不会在WP8中发生。![在此处输入图像描述](../Images/fe58fa064659624cda911883050bc87a.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T19:39:53.030

试试这个方法：[带有自动内存清理的图像下载器](https://stackoverflow.com/questions/19136160/image-downloader-with-auto-cleaning)。它是高级 KooKiZ 的示例，支持可视化。示例项目在这里：[https ://simca.codeplex.com/](https://simca.codeplex.com/)

# linux - 终止应用，多个嵌套子流程

> ID：13355499
> 
> 赞同：4
> 
> 时间：2012-11-13T04:13:54.670
> 
> 标签：linux, process, operating-system, signals, subprocess

我有一个 python 应用程序，它（并行）产生子进程（主要是 bash 脚本）。一些脚本可能会调用其他脚本。我正在尝试找出处理应用程序和子进程终止边缘情况的最佳方法。

如果应用程序需要退出，或者收到一个`SIGTERM`，那么它应该终止 ( `SIGTERM`, `wait`, `SIGKILL`) 所有子进程和它们创建的任何进程。一种方法是作为一个新的进程组开始，并在终止过程中终止该进程组（`killpg`）。

如果任何子进程花费的时间超过指定时间，我想杀死它们以及它们创建的子进程。这里的一种方法是将应用程序设置为进程组负责人，这样我就可以杀死该组并依靠它来杀死任何其他子进程。

难点是这两种解决方案相互冲突，所以我似乎只能满足一个要求。

所以，最后一个想法是使用 tcsetpgrp，但我对它并不太熟悉。因此，类似于模拟交互式终端。这意味着终止应用程序会向`SIGHUP`所有进程发送一个（我认为），并且我可以使用进程组来管理需要太长时间的终止子进程。

这是一个好主意，还是我缺少任何其他建议？

奖励部分：如果应用程序被杀死`SIGKILL`（在这个应用程序中偶尔需要它，是的，我知道`SIGKILL`应该避免，等等......），以与 bash 发送相同的方式杀死子进程会很棒`SIGHUP`当它退出时，它的进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:09:36.253

一种使您的脚本自动终止的可能性。

Perl 有一个可以设置警报的结构。

这个网站上的好例子在这里：

```
https://stackoverflow.com/questions/3427401/perl-make-script-timeout-after-x-number-of-seconds 
```

[Perl，在 x 秒后使脚本超时？](https://stackoverflow.com/questions/3427401/perl-make-script-timeout-after-x-number-of-seconds)

搜索 python 警报超时脚本也有类似的命中。

```
https://stackoverflow.com/questions/1191374/subprocess-with-timeout 
```

[使用带有超时的模块“子进程”](https://stackoverflow.com/questions/1191374/subprocess-with-timeout)

这具有副作用（优点或错误......），只要子进程的超时时间比父进程短，那么父进程就可以优雅地恢复。

但是，最好通过 CPU 时间而不是墙时间来限制进程。通过这种方式，一个遥远的后代不会为父母花费时间，如果整个系统由于许多进程而变慢，你就不会在你的子进程中遇到死亡瘟疫。

您可以通过输入在 bash 脚本中执行此操作

```
ulimit -t X 
```

其中 x 是您想要的 cpu 秒数。但是请注意，在大多数系统上，它是单向街道。一个进程不能增加它自己的限制。

# php - 创建网页，如 Windows 8 开始屏幕（新手）

> ID：13355504
> 
> 赞同：1
> 
> 时间：2012-11-13T04:14:11.553
> 
> 标签：php, javascript, ajax, web-applications, windows-8

首先，我是一名高中生和一个非常新的程序员（想想 CS101 级别）。在我的空闲时间（遗憾地有限），我想尝试一些项目来鼓励我学习更多，我有一个有趣的想法。

我不确定这是否是正确的地方，但我想知道是否有人可以让我指出正确的方向。我想制作一个看起来类似于 Windows 8 开始屏幕的网站（如果由于某种原因您不知道它的外观，这里是一个[图片链接）。](http://compixels.com/wp-content/uploads/2012/03/Windows-8-Start-Screen.jpg)

这个想法是具有不同长度的类似块状对象（可能不像 Windows 8 那样整齐的网格），可以水平滚动，并且可以在它们上面有一些“活动”的东西。单击一个可以使用一些 AJAX 技术来更改到另一个菜单，或者在页面上打开一个信息窗口。有点像 Outlook/Hotmail 如何在不重新加载的情况下更改屏幕。盒子物品的信息可能来自数据库。

我在 PHP、MySQL 和 JavaScript 方面有少量经验——足以理解一些代码并编写简单的脚本。对于我的项目想法，我应该重点学习什么？我只是在寻找要研究的东西的路线图。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:05:58.257

您可以使用 css 和 2 个图像宽度来模拟 win8 外观，无论它是普通项目还是宽项目，只需将额外的类添加到样式中即可。使用 jQuery，您可以使图标/页面可拖动等，通过一些工作，您可以简单地测量宽度并通过 ajax 加载更多内容，就像延迟加载但水平，使用`ondblclick=""`启动应用程序/内容的加载，这个是我在 30 分钟内想出的。[来源和图像](https://www.dropbox.com/s/i9504cs9a0b12bk/win8.rar)

![在此处输入图像描述](../Images/8968e1b3d92004a583e4252419e64b35.png)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>basic win8</title>
<style>
*{font-family: "Segoe UI", Frutiger, "Frutiger Linotype";}
body{background-image:url('Win8Background.jpg');}

#wrapper {
    width: 70%;
    padding: 0px;
    margin-left:auto;
     margin-right:auto;
}
.sortable-list li {
    padding: 4px;
    margin: 4px;
    float: left;
    border: 1px solid black;
    list-style-image: none;
    list-style: none;
    list-style-type: none;
    background-color:#204558;
}

#dashboard-layout .item.normal {
    width: 100px;
    height: 100px;
}

#dashboard-layout .item.wide {
    width: 224px;
    height: 100px;
}

.item.normal p{
margin:0px;
padding: 0px;
}

.item.wide p{
margin:0px;
padding: 0px;
}

h1{color:white;}

#left_head{width:45%; float:left;}
#right_head{width:45%; float:right; text-align:right;margin-right:15px;}
</style>

<script type="text/javascript" src="jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.23.custom.min.js"></script>
<script type="text/javascript">
function update_columns() {
    var positions = []
    $("#dashboard-layout .item").each(function() {
        var $item = $(this);
        positions.push($item.attr('id'));
    });
    $.post("./", { 'positions[]': positions },
        function(data) {
            alert("Update Success - New positions:" + positions);
        }
    );
}

$(function() {
    $("ul.sortable-list").sortable({
        connectWith: "#wrapper",
        placeholder: 'ui-state-highlight',
        tolerance: 'pointer',
        revert: true,
        forcePlaceholderSize: true,
        forceHelperSize: true,
        update: update_columns,
    }).disableSelection();
});
</script>

</head>

<body>

<div id="left_head"><h1>Start</h1></div>
<div id="right_head"><h1>Lawrence Cherone</h1></div>
<div style="clear:both;"></div>

<div id="wrapper">

<ul class="sortable-list" id="dashboard-layout">

    <li id="a" ondblclick="" class="item normal" style="background-image:url(xbox.png); background-size:110px">
    content a
    </li>

    <li id="b" ondblclick="" class="item normal" style="background-image:url(xbox.png); background-size:110px">
    content b
    </li>

    <li id="c" ondblclick="" class="item wide" style="background-image:url(photos.png); background-size:224px">
    content c
    </li>

    <li id="d" ondblclick="" class="item wide" style="background-image:url(photos.png); background-size:224px">
    content d
    </li>

    <li id="e" ondblclick="" class="item wide" style="background-image:url(photos.png); background-size:224px">
    content e
    </li>

    <li id="f" ondblclick="" class="item normal" style="background-image:url(xbox.png); background-size:110px">
    content f
    </li>

    <li id="g" ondblclick="" class="item normal" style="background-image:url(xbox.png); background-size:110px">
    content g
    </li>

    <li id="h" ondblclick="" class="item wide" style="background-image:url(photos.png); background-size:224px">
    content h
    </li>

    <li id="i" ondblclick="" class="item wide" style="background-image:url(photos.png); background-size:224px">
    content i
    </li>

    <li id="j" ondblclick="" class="item normal" style="background-image:url(xbox.png); background-size:110px">
    content j
    </li>

    <li id="k" ondblclick="" class="item wide" style="background-image:url(photos.png); background-size:224px">
    content k
    </li>
</ul>

</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:24:22.613

假设您网站上的每个“块”代表数据库中的一行（意味着没有继承的父子关系），那么简单地使用 CSS3 创建块非常容易，jQuery 来做翻转效果（和悬停，因为让我们面对现实吧，移动的鱼很棒）。

集成 jQuery 和 Ajax 将允许您通过 PHP 作为平面文件或 OOP 进行数据库调用。

可能还想研究嵌套查询，因为如果您想做一些疯狂的事情，例如在一页上有 2 个“块”并且您需要从 2 个以上的表中获取数据到所述页面上，它们很可能会派上用场。

祝你好运

# git - Heroku - 添加了 SSH 公钥，但仍然出现 Permission denied (publickey) 错误

> ID：13355509
> 
> 赞同：6
> 
> 时间：2012-11-13T04:14:34.947
> 
> 标签：git, heroku

之前多次上传到Heroku，不知道这次出了什么问题-也许是因为我使用的是公共互联网？

无论如何，所以我添加了一个新的公钥

```
>heroku keys:add
Found existing public key: C:/Users/Chris/.ssh/id_rsa.pub
Uploading SSH public key C:/Users/Chris/.ssh/id_rsa.pub...done

>git push heroku master
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

为什么我不能推送到heroku？

我检查了我的钥匙

> heroku 键

我的终端正确出现，所以它应该可以工作。有人阐明了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:44:32.717

也许 ssh 会话不知道在哪里可以找到与您的公钥关联的*私钥*，如果`%HOME%`未定义为`C:/Users/Chris`.
（请记住，`HOME`在 Windows 上默认未定义）

你可以：

*   确保 HOME 已设置
*   定义一个`%HOME%/.ssh/config`文件

```
主机heroku
主机名 heroku.com
端口 22
身份只有是
IdentityFile /C/Users/Chris/.ssh/id_rsa # 你的私钥的位置和名称
TCPKeepAlive 是
用户 git

```

*   在 bash 会话下，[检查权限](https://stackoverflow.com/questions/5470680/gitosis-post-receive-hook-to-deploy-repository-getting-public-key-errors/5471139#5471139)（for`.ssh`和键）。
*   克隆heroku repo：`git clone heroku:yourRepo`
*   进行一些提交并从那里推送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:15:27.517

您正在使用 Git 推送更改，而 Git 使用 SSH，而不是 Heroku。

根据我的经验，运行`heroku keys`不会提供有关加载到 SSH 身份验证代理中的身份的信息。为此，您需要运行`ssh-add -l`，它将列出加载到其中的所有身份的指纹。

要将一个身份加载到您的 SSH 身份验证代理中，您需要运行`ssh-add -K ~/.ssh/your_private_key`：使用**-K**会将您的密码存储在您的钥匙串中。

当然，如果您在远程 Heroku 服务器中也有您的公钥，这将起作用。

# php - PHP 5.3.15 可以安装在 Ubuntu 11.04 上吗？

> ID：13355510
> 
> 赞同：0
> 
> 时间：2012-11-13T04:14:39.800
> 
> 标签：php, ubuntu, ubuntu-11.04

我正在使用一台运行 Ubuntu 11.04 和 PHP 5.3.5 的机器来测试将在带有 PHP 5.3.15 的服务器上运行的应用程序。

我注意到了一些差异，并且希望测试环境与项目的最终主页尽可能相似，但是我所有搜索将 PHP 更新到特定版本的方法都是空的。

有没有办法在这台运行 Natty Narwhal 的机器上用 5.3.15 替换 5.3.5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:20:05.330

试试[Zend Server CE](http://www.zend.com/en/products/server-ce/downloads)。这是一个非常好的 PHP 应用程序堆栈。

根据[DEB 安装](http://files-source.zend.com/help/Zend-Server-Community-Edition/zend-server-community-edition.htm#deb_installation.htm)的文档，您应该能够执行类似的操作

```
./install_zs.sh 5.3.15 ce 
```

请注意，我没有尝试直接设置这样的 PHP 版本，但值得一试。

# c++ - C ++：如何初始化不是整数类型的静态成员变量？

> ID：13355511
> 
> 赞同：1
> 
> 时间：2012-11-13T04:14:40.977
> 
> 标签：c++, static, initialization

如何在 C++ 中初始化静态对象？我正在寻找类似java中的静态块的东西。

我试过这个：

Foo.hpp

```
class Foo{
    public:
    static Bar b;
    static String s;
    static Bar setB();
}; 
```

Foo.cpp

```
Bar Foo::b = Foo::setB();
String Foo::s = "something";
Bar Foo::setB()
{
    Bar bb;
    bb.use(s);
    return bb;
} 
```

没有编译错误，但它不起作用。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:26:16.153

你的代码：

```
class Foo{
    public:
    static Bar b;
    static Bar setB();
} 
```

你的评论：

> 没有编译错误

那是**不正确**的。由于缺少分号，*无法*编译。

当指出这一点时，大多数 SO 发帖人随后在一些评论中声称“但这只是一个打字错误，我会纠正它”，从而通过使已发布的答案无效来*加剧*错误。

简而言之，当您发布代码时，请复制并粘贴**真实代码**。不要重新输入。复制和粘贴。

现在，对于核心问题，继续上述评论，即

> 它不工作。

好吧，假设您的*真实代码*具有适当的分号，并且`Bar`已定义等，那么该部分也是完全**错误**的。

我用 Visual C++ 和 MingW g++ 对其进行了测试，并且（当更正分号等时）它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:24:24.393

`Bar`需要一个无参数构造函数，以便它可以将自身初始化为预期值。

不需要，`Foo::setBar()`因为 Foo 已经有了`Bar`实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:27:57.453

您的示例有效，除了您实际上没有初始化任何东西：

```
#include <iostream>

class Foo{
public:
    static int b;
    static int setB();
};

int Foo::b = Foo::setB();
int Foo::setB()
{
    int bb;
    bb = 42;  // Not in your example
    return bb;
}

int main()
{
    std::cout << 42 << std::endl;
} 
```

这将打印 42。（请注意，我已将“Bar”更改为“int”，因为您没有发布 Bar 的定义。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T04:48:06.547

根本原因：类定义末尾没有分号。当我放一个时效果很好。

建议：请在提问时提供更多代码（如果可能，请提供完整代码），请勿再次输入代码，只需复制粘贴即可。

# android - Android：内置不同大小的drawable？

> ID：13355515
> 
> 赞同：0
> 
> 时间：2012-11-13T04:15:32.393
> 
> 标签：android, size, drawable, scale

我正在使用一些 android 内置的可绘制对象，我想知道它们是否可以作为矢量图形或不同大小使用？我正在为 xlarge 屏幕进行布局，而我使用的可绘制对象看起来有点小。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:26:05.513

它们以不同大小的 PNG 文件形式提供。检查 [your-sdk-dir]/platforms/android-X/data/res 你会看到它所有的可绘制资源。

# ruby - 如何在最终定界符之后提取子字符串？

> ID：13355516
> 
> 赞同：-1
> 
> 时间：2012-11-13T04:15:35.913
> 
> 标签：ruby, regex

我正在使用 Ruby，我想编写一个函数，该函数接受一个分隔字符串`str`（由 分隔`//`），并返回字符串的最后一部分，即字符串中最后一部分之后的部分`//`。例如，给定`a//b///cd`，它应该返回`cd`。

我可以使用正则表达式来执行此操作吗？如果可以，我应该使用什么表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:31:09.083

正如 Nhahtdh 在他的[评论](https://stackoverflow.com/questions/13355516/ruby-substring-after-last/13355618#comment18229710_13355516)中所写，您可以使用`/.*\/\/(.*)/`

在 Ruby 中，类似于

```
regex = %r{.*               # any character (0 up to infinit-times) till we find the last
           //               # two consecutive characters '/'
           (?<last_part>.*) # any character (0 up to infinit-times)
          }
string = 'a//b///cd'

puts regex.match(string)[:last_part]
#=> cd 
```

您可以`%r`在 的[`RegularExpression`](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_stdtypes.html#S4)部分中找到有关 的信息`ProgrammingRuby`。

# python - Python：在封闭范围内赋值之前引用了自由变量“numpy”

> ID：13355517
> 
> 赞同：1
> 
> 时间：2012-11-13T04:15:39.850
> 
> 标签：python

我正在将一些代码添加到现有类中以进行测试。通常这个类，`eigensystem_CUDA_implementation`依赖于它的父类的一些功能和属性。当这个类独立于程序的其余部分导入时，我想用通常的父类代替 testParent 类。

如果这是测试代码的不好方法，我应该完全不同地做这件事，我愿意接受这个建议。

初始化`eigensystem_CUDA_implementation`对象时，错误是：

> NameError：在封闭范围内赋值之前引用了自由变量“np”

这可以追溯到该行`self.mat = np.matrix(...`

还有更多依赖于 NumPy 和 pyCUDA 的`eigensystem_CUDA_implementation`内容未显示。一个类可以导入它所依赖的模块吗？由于第一个错误，尚未对此进行测试。

```
class eigensystem_CUDA_implementation:
    def __init__(self, parent = None, max_time = 60, delta = 10**(-32)):
            # For testing purposes, when class is utilized independently
            if(not parent):
                    # testing mode
                    if(not sys.modules.has_key("numpy")):
                            import numpy as np
                            import pycuda.driver as cuda
                            import pycuda.autoinit
                            from pycuda.compiler import SourceModule
                    class testParent:
                            def __init__(self, size = 10):
                                    self.size = size
                                    self.delta = 10**(-32)
                                    self.num_site_types = 8
                                    self.mat =  np.matrix(np.random.random((self.size,self.size)).astype(np.float64))
                            def get_mutation_selection_matrix(self, alpha):
                                    return self.mat
    ... 
```

一个潜在的问题：`not sys.modules.has_key("numpy")`无论是命名为“np”还是其他名称，都会将 NumPy 显示为导入的。其余代码使用“np”，所以我忽略了这一点。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T04:27:55.100

如果已导入 numpy，您的代码将失败。您只在`if`块内导入它，因此如果它已经导入，它将不会在该块内定义。`np`但稍后在您作为局部变量引用的同一函数中。

无论如何，你真的不需要担心导入 numpy. 只是`import numpy as np`无条件的去做。如果它已经导入，它只会重新使用导入的版本。它不会浪费内存或任何两次导入它的东西。

也就是说，这段代码看起来相当笨拙和脆弱。您应该看看是否有更好的方法来做到这一点，例如定义一个单独的函数，用必要的属性修补类。在另一个类中的方法中包含一个类和一个导入变得非常麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:23:22.867

当您将导入放入函数中时，就像您在 in 中所做的那样`__init__`，模块分配给的变量是该函数的本地变量。如果你想让它成为一个全局变量，你需要用一条`global`语句明确地把它变成一个。`global np, cuda, SourceModule`可以做到。

此外，在使用之前检查`numpy`in可能还不够，因为 numpy 可能是由不同的模块而不是当前模块导入的。您可以检查，但简单地无条件地进行导入可能更容易。`sys.modules``np``np in locals()`

# iphone - 未找到 SoundCloud 库

> ID：13355523
> 
> 赞同：2
> 
> 时间：2012-11-13T04:16:20.497
> 
> 标签：iphone, objective-c, ios, libraries, soundcloud

我在使用适用于 iOS 的 SoundCloud API 时遇到了一些问题。我已按照他们的快速入门指南（[此处）上的说明进行操作，并像](http://developers.soundcloud.com/docs/api/ios-quickstart)[这样](http://f.cl.ly/items/1v281z1c3G390s420K0G/Screen%20Shot%202012-11-12%20at%2021.48.10.png)设置我的标题搜索路径。

Xcode 正在查找 SCUI.h，直到最近才出现任何语法错误。该应用程序在 iOS 模拟器上运行良好并执行 SoundCloud API 请求（SCRequest 方法）。但是我随后在设备上尝试它并遇到了[这些](http://f.cl.ly/items/3z3V021H2e1V0a1o173g/Screen%20Shot%202012-11-12%20at%2021.52.41.png)错误，然后当我回到尝试在模拟器上进行测试时，我开始收到[这些](http://f.cl.ly/items/3c01132F3V0w3D3b103Q/Screen%20Shot%202012-11-12%20at%2021.55.52.png)错误。

在阅读了错误消息并检查了我的链接库（[here](http://f.cl.ly/items/2y3g073F1M05330G033x/Screen%20Shot%202012-11-12%20at%2021.58.23.png)）后，我确定它与 Xcode 搜索标头的路径有关。或者也许那些库根本不存在？我似乎在 Finder 中看不到任何它们，甚至在我的链接库部分中以黑色显示的 .a 文件也是如此。

另外，我尝试过清洁产品（CMD+Shift+K）。这允许项目在模拟器上运行，但会导致“断言失败”：

```
Assertion failure in -[NXOAuth2Client initWithClientID:clientSecret:authorizeURL:tokenURL:accessToken:tokenType:persistent:delegate:], /Users/chiliesontoast/Desktop/iOS/Projects/MobileX Labs/MXLTest App/MXLTestApp/OAuth2Client/Sources/OAuth2Client/NXOAuth2Client.m:82 
```

然后在尝试为设备构建时，它会返回[此](http://f.cl.ly/items/1P3m311D3N0g0m073k3n/Screen%20Shot%202012-11-12%20at%2022.12.37.png)错误。

有人对解决方案有任何建议吗？真的困扰了我一整天。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:32:56.913

啊，终于修好了！这是两件事的结合。

# 首要问题

第一个问题（[此处](http://f.cl.ly/items/3z3V021H2e1V0a1o173g/Screen%20Shot%202012-11-12%20at%2021.52.41.png)和[此处](http://f.cl.ly/items/3c01132F3V0w3D3b103Q/Screen%20Shot%202012-11-12%20at%2021.55.52.png)）与库和搜索路径有关。我做了很多不同的事情，不知道是什么解决了它。我这样做了：

1.  将标头搜索路径从“./**”更改为“$PROJECT_DIR”，最后更改为“../**”，这就是现在的样子。
2.  删除了为 SoundCloud API 下载的所有文件。
3.  删除 .gitmodules 和 .git/config 中已下载子模块的条目，然后从 .git/modules 中删除所有 API 文件夹。
4.  然后我通过导航到终端中项目的根文件夹并运行来删除 git 缓存：

    git rm --cache ./OAuth2Client

（并为每个添加的子模块重复）。然后我重新安装了 SoundCloudAPI（使用 git）并可能清理了项目（CMD+Shift+K）。

# 第二期

第二个问题是一个奇怪的运行时错误

```
Assertion failure in -[NXOAuth2Client initWithClientID:clientSecret:authorizeURL:tokenURL:accessToken:tokenType:persistent:delegate:], /Users/chiliesontoast/Desktop/iOS/Projects/MobileX Labs/MXLTest App/MXLTestApp/OAuth2Client/Sources/OAuth2Client/NXOAuth2Client.m:82 
```

在对 NXOAuth 进行认真研究并查看堆栈跟踪后，我意识到在尝试执行任何 SCRequest 方法之前，我需要在函数中包含以下代码：

```
[SCSoundCloud setClientID:@"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
                   secret:@"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
              redirectURL:[NSURL URLWithString:@"AppName://oauth"]]; 
```

所以，这就是我解决它的方法。我真的希望这对某人有所帮助，因为我被困了大约 20 个小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T01:38:13.350

一直在与这个作斗争......一次又一次地出现错误（如果有人遇到与此不同的错误，请给我发消息 - 我保证我已经成功了）

无论如何，对我有用的是，当您单击项目文件时，您可以选择检查项目或目标的构建设置。在我将 $PROJECT_DIR 输入项目构建设置标题搜索路径而不是目标构建设置（或两者）之前，它对我不起作用

# c# - XNA 4.0 2d 碰撞检测

> ID：13355524
> 
> 赞同：-1
> 
> 时间：2012-11-13T04:16:29.003
> 
> 标签：c#, xna, collision-detection

我有一个带有小坦克和黑色方块的程序。坦克应该响应用户输入并在它接触到坦克时停止。但是，在窗口出现后（包含盒子和水箱）我没有用户输入。当我按下其中一个箭头键时，坦克根本不动。

所以这里只是我的代码中一些更重要的例子。

```
public class TopDownShooter : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    private Texture2D tank, blackSquare;
    private KeyboardState state;
    private float angle1 = 0;
    private float angle2 = 0;
    private float xLocation, yLocation;
    Vector2 location1 = new Vector2(900, 400), origin1;
    Vector2 location2 = new Vector2(400, 400), origin2;
    Rectangle playerRectangle, obstacleRectangle;

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (Keyboard.GetState().IsKeyDown(Keys.Escape))
            this.Exit();
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();
        playerRectangle = Move(playerRectangle);

        base.Update(gameTime);
    }

    private Boolean IsNotCollision(Rectangle rectangle1, Rectangle rectangle2)
    {
        if (rectangle1.Intersects(rectangle2)) return true;
        else return false;
    }

    /// <summary>
    /// Sets the velocity of the targeted object based on user keyboard input
    /// </summary>
    private Rectangle Move(Rectangle rectangle)
    {
        state = Keyboard.GetState();
        xLocation = rectangle.X;
        yLocation = rectangle.Y;

        if (IsNotCollision(obstacleRectangle, playerRectangle))
        {
            if (state.IsKeyDown(Keys.Left)) rectangle.X += -4;
            if (state.IsKeyDown(Keys.Right)) rectangle.X += 4;
            if (state.IsKeyDown(Keys.Up)) rectangle.Y += -4;
            if (state.IsKeyDown(Keys.Down)) rectangle.Y += 4;
        }
        return rectangle;
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin();

        playerRectangle = new Rectangle(0, 0, tank.Width, tank.Height);
        origin1 = new Vector2(tank.Width / 2, tank.Height);
        obstacleRectangle = new Rectangle(0, 0, blackSquare.Width, blackSquare.Height);
        origin2 = new Vector2(blackSquare.Width / 2, blackSquare.Height);

        spriteBatch.Draw(tank, location1, playerRectangle, Color.White, angle1, origin1, 1.0f, SpriteEffects.None, 1);
        spriteBatch.Draw(blackSquare, location2, obstacleRectangle, Color.White, angle2, origin2, 1.0f, SpriteEffects.None, 1); 

        spriteBatch.End();

        base.Draw(gameTime);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:25:13.473

编辑：

其实..你似乎从来没有更新`location1`...

# ruby-on-rails - 嵌套 content_tag 中链接的语法错误：div

> ID：13355525
> 
> 赞同：0
> 
> 时间：2012-11-13T04:16:35.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, haml

我是新来的铁路。我正在尝试添加指向使用 content_tag 生成的 div 的链接。我收到语法错误，但我似乎无法弄清楚原因。

我使用了这个[参考](http://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag)

```
- flash.each do |name, msg|
  - if msg.is_a?(String)
    = content_tag :div, msg content_tag(:a, "Close", :href => '', :class => 'close'), :id => "flash_#{name}", :class => 'alert-box alert' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:36:22.333

您忘记`msg`与您的`content_tag :a`. 尝试这个：

```
- flash.each do |name, msg|
  - if msg.is_a?(String)
    = content_tag :div, 
                  "#{msg} #{content_tag(:a, 'Close', :href => '', :class => 'close')}",
                  :id => "flash_#{name}", :class => 'alert-box alert' 
```

*提示：* 您可以[使用块](http://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag)with`content_tag`来提高可读性。

```
content_tag :div do
  # the content of this block will be captured
end 
```

# c++ - char数组输入限制？

> ID：13355526
> 
> 赞同：1
> 
> 时间：2012-11-13T04:16:56.813
> 
> 标签：c++, arrays, limit

如何使用 C++ 从控制台读取 1000 个字符？

**对答案的评论更新：“我想要的是用户可以输入一个段落（比如 500 或 300 个字符）” - 即不总是 1000 个字符**

使用以下代码，我最多只能输入一个限制（大约两行）。我究竟做错了什么？

```
#include<iostream.h>
#include<stdio.h>
#include<conio.h>
#include <stdlib.h>
void main()
{
    char cptr[1000];
    cout<<"Enter :" ;
    gets(cptr);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:34:56.633

希望这可以帮助：

```
#include<iostream>

using namespace std;

int main()
{
    const int size = 1000;
    char str[size];

    cout << "Enter: " ;

    cin.read(str, size);

    cout << str << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T04:22:47.783

用于`getchar`在 for 循环中一次读取一个字符，如下所示：

```
 int i;
            for (i = 0; i < 1000; i++){
              cptr[i] = getchar(); 
            } 
```

**编辑：**如果你想提前打破循环，例如在新行字符上，那么：

```
 int i;
            for (i = 0; i < 1000; i++){
                char c  = getChar();
                if(c == '\n'){
                  break;//break the loop if new line char is entered
                }
                cptr[i] = c; 
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T04:20:31.330

这可能是由于您正在阅读新行。`gets(char* ptr)`当您遇到新行时停止读取，并将终止字符附加到字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T08:24:06.927

这是用户可以输入段落（1000、500 或 300 个字符）的解决方案。

代码：

```
#include <iostream>
using namespace std;

int main()
{

  char ch;
  int count = 0;
  int maxCharacters=0;
  char words[1024]={' '};

  cout<<"Enter maxCharacters 300,500,1000 >";
  cin>>maxCharacters;

  cout << "\nProceed to write chars, # to quit: \n";

  cin.get(ch);
  while( (ch != '#')  )
  {
    cin.get(ch);    // read next char on line
    ++count;        // increment count

    words[count]=ch;
    cout <<words[count];     // print input

    if (count>= maxCharacters) break;

  }
  cout << "\n\n---------------------------------\n";
  cout << endl << count << " characters read\n";
  cout << "\n---------------------------------\n";
  for(int i=0;i<count;i++) cout <<words[i];
  cout << "\n"<< count << " characters \n";

  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
} 
```

输出：

```
Enter maxCharacters 300,500,1000 >10

Proceed to write chars, # to quit:
The pearl is in the river
The pearl

---------------------------------

10 characters read

---------------------------------
 The pearl
10 characters

Press any key to continue 
```

# ruby-on-rails - 基于给定模型的 Rails 条件验证

> ID：13355527
> 
> 赞同：1
> 
> 时间：2012-11-13T04:17:03.257
> 
> 标签：ruby-on-rails, validation, activerecord

我第一次没有正确定义问题。我试图做一个简单的例子，但失败了。让我们再试一次 ：）

我有一个地址模型来验证街道、城市、州和邮政编码属性都存在。然后我们有一个与 Address 具有一对多关系的 Person 模型。我们有一个学生模型，但它不继承人，它只是 has_one（当我开始时，我并不完全理解继承是如何在 ruby​​ 中工作的）。我们有一个 Classroom 模型，它也有一个人（同样，不是继承的）。所以问题是我们想要要求学生的地址，而不是 Classroom。希望这现在更清楚一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:23:36.283

您可以使用[`validates`](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates)或[`validates_presence_of`](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_presence_of)仅在您的`Student`模型中使用。

```
class Person
  has_many :addresses
end

class Student < Person
  validates :addresses, :presence => true
end

class Teacher < Person
end 
```

# android - MyAsyncTask 完成后如何杀死活动

> ID：13355529
> 
> 赞同：-2
> 
> 时间：2012-11-13T04:17:14.333
> 
> 标签：android, android-asynctask

> **可能重复：**
> [在 AsyncTask 完成时完成调用活动](https://stackoverflow.com/questions/8623823/finish-the-calling-activity-when-asynctask-completes)

我知道我必须将 asyncTask 用于像数据库写入这样需要很长时间的操作。

但是，我的问题之一是如何告诉我的活动在操作完成之前不会关闭。

例子：

我有 Activity A 应该在用户点击提交时进行数据库插入。所以当用户点击提交时，我正在创建一个 asyncTask 来更新数据库。问题是我喜欢

新的 MyAsyncTask().execute()finish();

结果，我的活动在 asyncTask 完成之前关闭。如何确保我的活动保持打开状态，直到 MyAsyncTask 完成处理

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:19:37.963

`finish()`你可以在`onPostExecute`异步任务的 () 中写入。

# powershell - 在 PowerShell 中连接或使用 heredoc 时保留换行符

> ID：13355534
> 
> 赞同：11
> 
> 时间：2012-11-13T04:18:25.000
> 
> 标签：powershell

假设我有一个`c:\temp\temp.txt`包含内容的文档

```
line 1
line 2 
```

我创建了以下函数

```
PS>function wrapit($text) {
@"
---Start---
$text
---End---
"@
} 
```

然后运行`PS> wrapit((Get-Content c:\temp\temp.txt))`

将输出

```
---Start---
line 1 line 2
---End--- 
```

如何保留换行符？追加与插值没有帮助。

[我发现了这个相关的问题](https://stackoverflow.com/questions/4431706/retaining-newlines-in-powershell-string)，但这里他们使用的是字符串数组。我正在使用其中包含换行符的单个字符串（如果您直接从函数内部输出字符串而不连接并`$text | gm`确认我正在使用字符串，而不是数组，则可以看到它们）。我可以做世界上所有的字符串解析来把它敲到位，但这似乎我会把一个方形的钉子敲进一个圆孔。我缺少什么概念？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T04:37:35.360

做你想做的一个简单的方法是：

```
wrapit((Get-Content c:\temp\temp.txt | out-string)) 
```

现在解释一下：Here-strings @"" 就像字符串 "" 一样，结果是由于变量扩展中的 PowerShell 行为。试试看嘛：

```
$a = Get-Content c:\temp\temp.txt
"$a" 
```

* * *

关于您的评论：

```
$a | Get-Member
TypeName: System.String
... 
```

但

```
Get-Member -InputObject $a
TypeName: System.Object[]
... 
```

第一个答案是好的（它接收字符串）。它只是不会每次都重复 System.string 。在第二个中，它接收一个数组作为参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T04:33:39.380

的儿子...

经调查，似乎`Get-Content`返回了一个字符串数组。默认情况下，这当然是通过加入默认字符强制转换为字符串`' '`。

真正令人费解的是为什么结果被强制`get-member`转换为字符串。**有谁知道为什么会这样？**在我明确检查之前问题并不明显`Get-Type`

无论如何，解决方案是使用`[system.io.file]::ReadAllText('c:\temp\temp.txt')`over读取文件`Get-Content`

# java - 为什么下面的java代码不能编译？

> ID：13355536
> 
> 赞同：1
> 
> 时间：2012-11-13T04:19:08.183
> 
> 标签：java, exception-handling

坦率地说，我只是不明白我的导师要我在这里做什么。我尝试过使用“try-catch”块，以及在方法签名中抛出异常。我已经阅读过检查和未经检查的异常。我敢肯定这会被否决或关闭，但是有人可以在这里给我扔一根骨头吗？我的导师指导如下：

“更正它以便编译。”

```
class Exception3{
    public static void main(String[] args){         
    if (Integer.parseInt(args[0]) == 0)             
        throw new Exception("Invalid Command Line Argument");     
     } 
} 
```

很明显，它正在抛出一个 RuntimeException。更具体地说是 ArrayIndexOutOfBoundsException。我知道异常的原因是因为数组是空的，所以引用的索引不存在。我的意思是，从技术上讲，我可以擦除`if(Integer.parseInt(args[0]) == 0)`并`throw new Exception("Invalid Command Line Argument");`替换它`System.out.println("It compiles now");`

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T04:20:25.447

```
public static void main(String[] args) throws Exception{         
    if (Integer.parseInt(args[0]) == 0)             
        throw new Exception("Invalid Command Line Argument");     
     } 
```

你的方法抛出`Exception`，所以方法声明应该指定它可能会抛出`Exception`。

按照[java教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)

> 已检查的异常受 Catch 或 Specify Requirement 的约束。除了 Error、RuntimeException 及其子类所指示的异常之外，所有异常都是已检查异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T04:28:11.993

您必须使用 try catch 语句捕获它：

```
class Exception3 {
    public static void main(String[] args) {
        try {
            if (Integer.parseInt(args[0]) == 0)
                throw new Exception("Invalid Command Line Argument");
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

或者在方法头声明它：

```
class Exception3 {
    public static void main(String[] args) throws Exception {
        if (Integer.parseInt(args[0]) == 0)
            throw new Exception("Invalid Command Line Argument");
    }
} 
```

# iphone - Nsnotification 还是委托？

> ID：13355537
> 
> 赞同：6
> 
> 时间：2012-11-13T04:19:25.253
> 
> 标签：iphone, ios, xcode, delegation

我刚刚研究了这两者，它们似乎都是很好的交流方式，但 nsnotification 似乎更容易处理。在什么情况下您希望使用委托而不是 nsnotification，以及 nsnotification 而不是委托？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T04:49:18.697

我通常在子系统内的类之间使用委托，但使用跨子系统边界的通知，这些边界不需要直接链接在一起，而且通知的严格顺序并不重要。当一个类需要直接代表它完成某些事情时（就像 UITableView 所做的那样），我也使用委托，而当动作必须不是直接代表通知者发生，而是为了它们自己的目的时，我也会使用通知。

通知对于松散耦合的系统很有用，例如当您完成登录到服务器并且一堆其他子系统需要知道它可以继续执行他们应该执行的任何任务时。这些系统可能并不都需要与您的登录子系统有直接关系，但它们都需要因此做“某事”。通知也不像代表那样规定实现的形式，因为通知者不应该关心。

委托在一个更紧密耦合的系统中是很好的，在这个系统中可以指定实现（比如说'现在做这个，然后这个，然后那个'），通常是通过实现一个委托必须遵守的协议。如果您尝试了解各种代码如何协同工作，那么委派也更容易理解，因为这种关系被更清楚地识别出来。

这里也是一个关于这个主题的好[帖子。](http://blog.shinetech.com/2011/06/14/delegation-notification-and-observation/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T04:53:19.020

是的，我同意 NSNotifications 比你自己的委托协议和方法更容易实现。我真的不知道这两种方法的相对“成本”（时间或内存使用）是多少，但我使用其中一种方法的标准如下。

如果不止一个班级需要知道您在第三堂课中正在做的事情，那么我会使用通知，因为它是“广播”，并且注册通知的任何对象都可以获取信息。

我使用通知的另一次是如果我有两个对象，例如视图控制器，它们在控制器链中或在链的不同分支上相距很远，因此很难获得对您想要设置的控制器的引用作为的代表。

否则，当两个控制器“靠近在一起”时，例如当一个控制器创建下一个控制器以准备推送或转场时，我使用委托将信息从推送的视图控制器获取回执行推送的视图控制器。

此外，如果控制器需要根据另一个对象中发生的情况来执行多项操作，那么再次委托会更好，因为您可以拥有一个具有许多方法的委托协议（例如 UITableViewDelegate）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T04:37:29.093

委派在许多 iOS 视图中很重要，例如 UITableView。UITableView 有一个 UITableViewDelegate 和一个 UITableViewDataSource。两者都是提供有关表格内容的信息所必需的。你不能用通知来做到这一点。

使用委托的其他一些地方：

*   每个应用程序都有一个应用程序委托：UIApplicationDelegate
*   UIEditView 有委托告诉它如何表现。
*   UIAlertView 有一个委托将用户的操作传回给应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T06:45:35.693

顺便说一句：两者都是很棒的概念。通知更容易处理——尤其是在不加思索地使用时很容易编写无法维护的代码。

在大多数情况下，一个好的架构应该能够在没有它们的情况下生存。

我见过一个更大的 iPad 项目，其中使用通知来弥补架构设计中的缺陷：太可怕了。代码在 2 个月后完全无法维护。

我的经验：它们是一个非常方便的工具 - 如果其他工具失败，请使用它们

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T05:00:21.147

首先，我不得不说，代表比通知要快得多。如果在您的项目中有 100 个委托，那很好，但是当您收到 100 个通知时，很容易在设备上变得很慢。但是，委托有限制：您的对象只能有一个特定类型的委托。并且在通知的情况下，观察员的人数一般不受限制。此外，委托方法很可能在同一个线程上执行，除非您使用特定的方法在不同的线程上执行它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T04:49:26.877

当事件的接收者数量有限（可能为 1 或 2）以及您想要控制事件的传递方式时，委派通常很有用。例如，如果让我们说 UIApplicationDelegate 示例，在 applicationDidFinishLaunch 完成之前您不能调用 applicationDidForeground，因此您可以确保接收者在交付下一个事件之前已确认每个事件。如果您必须交付必须遵循诸如开始、结束、开始、完成等生命周期的事件。代表会更好。

在我看来，通知大多类似于布尔事件，即使您可以随其传递数据，如果您必须广播某个事件而不管接收者是谁，它们都会很有用。通常这在您必须传达信息更改时很有用

# xcode - 有没有办法通过连接其他 UIImage 来制作 UIImage？

> ID：13355538
> 
> 赞同：0
> 
> 时间：2012-11-13T04:19:36.403
> 
> 标签：xcode

我想制作一个由其他 UIImage 制成的 UIImage，大约 10x10 个其他 UIImage，就像一个网格。有什么办法可以做到这一点？

编辑 1：这是我目前基于 lnafziger 链接的代码：

```
- (void)displayFullMap
{
NSInteger x, y;

UIGraphicsBeginImageContext(CGSizeMake(xMapLength * 64, yMapLength * 64));

CGRect rect = CGRectMake(0, 0, xMapLength * 64, yMapLength * 64);

UIImage *imageToAdd = [[UIImage alloc] init];

for (int i = 0; i < xMapLength; i++) {
    for (int j = 0; j < yMapLength; j++) {
        imageToAdd = some64x64image;
        [imageToAdd drawInRect:rect];
        rect.origin.x += 64;
    }
    rect.origin.x = 0;
    rect.origin.y += 64;
}

UIImage *fullMapImage = [[UIImage alloc] init];
fullMapImage = UIGraphicsGetImageFromCurrentImageContext();

UIImageView *fullMapImageView = [[UIImageView alloc] init];
[fullMapImageView setFrame:CGRectMake(0, 0, 360, 480)];
[fullMapImageView setImage:fullMapImage];
[self.view addSubview:fullMapImageView];

UIGraphicsEndImageContext();
} 
```

但是，没有显示图像。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:29:23.120

没有办法从另一个 UIImage 生成 UIImage，但是您可以将 UIIMages 添加到 UIView，例如，并以网格模式排列它们。

否则，我建议使用 Photoshop 或其他工具制作图像，然后将其用于 UIImageView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:43:33.470

这是一个展示如何合并多个图像的博客：

[www.mindfiresolutions.com](http://www.mindfiresolutions.com/iPhoneiPad-Tip-How-to-merge-two-images-into-a-single-image-1604.php)

这是该页面的代码（可以稍微清理一下，但它向您展示了技术）：

```
@implementation LandscapeImage

- (void) createLandscapeImages
{

    CGSize offScreenSize = CGSizeMake(2048, 1380);  
    UIGraphicsBeginImageContext(offScreenSize);

    //Fetch First image and draw in rect
    UIImage* imageLeft = [UIImage imageNamed:@"file1.png"];
    CGRect rect = CGRectMake(0, 0, 1024, 1380);
    [imageLeft drawInRect:rect];  
    [imageLeft release];

    //Fetch second image and draw in rect    
    UIImage* imageRight = [UIImage imageNamed:@"file2.jpg"];
    rect.origin.x += 1024;
    [imageRight drawInRect:rect];    
    [imageRight release];

    UIImage* imagez = UIGraphicsGetImageFromCurrentImageContext();// it will  returns an image based on the contents of the current bitmap-based graphics context.

    if (imageLeft && imageRight)
    {
        //Write code for save imagez in local cache
    }
    UIGraphicsEndImageContext();
}

@end 
```

# xamarin.ios - 自定义 Monotouch.Dialog 元素中的单元格内容居中

> ID：13355540
> 
> 赞同：3
> 
> 时间：2012-11-13T04:19:47.573
> 
> 标签：xamarin.ios, monotouch.dialog

我正在编写一个通用 Monotouch.Dialog 元素来显示一个图像（不显示图像选择器），我正在重用来自 UIViewElement 和 ImageElement 的代码，添加了一些参数，以便它可以在登录屏幕中使用例如（显示公司标志等）。

到目前为止我有这个：

```
public class ImageViewElement : Element, IElementSizing
{
    protected UIImage Image;
    public CellFlags Flags = 0;
    public UIViewContentMode Alignment;

    public enum CellFlags {
        Transparent = 1,
        DisableSelection = 2,
        Both = 3
    }

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="caption">
    /// The caption, only used for RootElements that might want to summarize results
    /// </param>
    /// <param name="view">
    /// The view to display
    /// </param>
    /// <param name="transparent">
    /// If this is set, then the view is responsible for painting the entire area,
    /// otherwise the default cell paint code will be used.
    /// </param>
    public ImageViewElement (UIImage image, bool transparent, bool selectable, UIViewContentMode alignment) : base ("")
    {
        this.Alignment = alignment;
        this.Image = image;

        if(transparent)
            {Flags+=1;}
        if(!selectable)
            {Flags+=2;}
    }

    public override UITableViewCell GetCell (UITableView tv)
    {
        var cell = tv.DequeueReusableCell (CellKey);
        if (cell == null)
        {
            cell = new UITableViewCell (UITableViewCellStyle.Default, CellKey);
            cell.ContentMode = UIViewContentMode.BottomRight;
            switch(Flags)
            {
            case CellFlags.Transparent:
                cell.BackgroundColor = UIColor.Clear;
                //
                // This trick is necessary to keep the background clear, otherwise
                // it gets painted as black
                //
                cell.BackgroundView = new UIView (RectangleF.Empty) {BackgroundColor = UIColor.Clear};
                break;
            case CellFlags.DisableSelection:
                cell.SelectionStyle = UITableViewCellSelectionStyle.None;
                break;
            case CellFlags.Both:
                cell.BackgroundColor = UIColor.Clear;
                //
                // This trick is necessary to keep the background clear, otherwise
                // it gets painted as black
                //
                cell.BackgroundView = new UIView (RectangleF.Empty) {
                    BackgroundColor = UIColor.Clear};
                cell.SelectionStyle = UITableViewCellSelectionStyle.None;
                break;
            }
            cell.ImageView.ContentMode = Alignment;
            cell.ContentMode = Alignment;
            cell.ImageView.Image = Image;

        }
        return cell;
    }
    public float GetHeight (UITableView tableView, NSIndexPath indexPath)
    {
        return Image.Size.Height;
    }
} 
```

到目前为止一切正常，除了对齐，图像总是显示在左边，我尝试在单元格和单元格的 Imageview 上设置 ContentMode 但它不起作用，我该怎么办？

* * *

编辑：米格尔指出我的界限可能没有正确设置，所以我尝试了这个：

```
cell.ContentMode = UIViewContentMode.Right;
var test = new UIImageView(Image);
cell.ContentView.Add (test); 
```

现在我的 ContentView 边界与单元格边界相同，0,0,320,40，它们不好，但我只是在寻找，我的测试边界是 0,0,256,256，但对齐仍然不起作用......不知道该怎么办

* * *

编辑：一些进展！！！

我向 IRC 寻求建议

```
(2012-11-13 10:10:12) CENSORED: Implement a subclass of UITableViewCell
(2012-11-13 10:10:26) CENSORED: add the Image as a subview in the init method of the new class
(2012-11-13 10:10:33) CENSORED: and override layouSubviews
(2012-11-13 10:10:36) CENSORED: with the line:
(2012-11-13 10:10:56) CENSORED: imageView.Center = this.Center;
(2012-11-13 10:11:14) CENSORED: (call super first as well)
(2012-11-13 10:11:25) CENSORED: that way the image will always remain centred in the cell

(2012-11-13 10:38:23) CENSORED: AndreSM: UITableViewCell already has a UIImageView property (named ImageView)
(2012-11-13 10:38:36) CENSORED: you can just use that instead of creating a new one 
```

所以我继续创建了一个子类：

```
public class ImageViewCell: UITableViewCell
{
    UIImage cellImage;

    public ImageViewCell (UIImage image, NSString key) : base(UITableViewCellStyle.Default, key)
    {
        cellImage = image;
        ImageView.Image = cellImage;
    }

    public override void LayoutSubviews ()
    {
        base.LayoutSubviews ();
        ImageView.Center = ContentView.Center;
        ImageView.SetNeedsDisplay ();
    }
} 
```

但是图像仍然有点偏离中心，这是一个屏幕截图，因此您可以理解我的意思：

![在此处输入图像描述](../Images/3116e9a219aeedfad1107f4a95c1e5b5.png)

![在此处输入图像描述](../Images/669ae88019f4caa908ae27e9e8fd3b9e.png)

我不明白为什么，我检查了新中心是什么，值是正确的（X 轴为 160 ..）

![在此处输入图像描述](../Images/c4675b69dee59ff9fda1dd114dbb031b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:37:51.470

问题是 Center 是在 PARENT 坐标空间中定义的。所以 ContentView 的 Center 属性定义在它的 PARENT（UITableViewCell，它本身就是一个视图）的空间中。但是 ImageView 中心是在 imageView 的父级即 ContentView 的坐标空间中定义的。

此代码应通过计算 contentviews 自己的坐标空间中的中心来解决它

```
public override void LayoutSubviews ()
{
    base.LayoutSubviews ();
    ImageView.Center = new PointF(ContentView.Bounds.Width/2,ContentView.Bounds.Height/2);   
    ImageView.SetNeedsDisplay ();
} 
```

# haskell - Haskell 的 Erlang 等价物 where/partial/lambda

> ID：13355544
> 
> 赞同：7
> 
> 时间：2012-11-13T04:20:20.483
> 
> 标签：haskell, functional-programming, erlang

来自 Haskell 与 Nitrogen 一起玩，遇到了一些我找不到例子的事情，所以如果有人可以帮助我：

Haskell在erlang中的where（和或let或任何类型的嵌套访问父变量的函数）？如何？你能？

```
burnOrDie hotness = foldl1 (>>) $ map burn ["Jimmy", "Adam", "Gonzo"]
  where burn x
          | hotness < 3 = print $ x ++ ": Ouch!"
          | otherwise = print $ x ++ ": GAHHH! *die*" 
```

部分申请？哈斯克尔：`addOne = +1`

内联 lambda 函数？哈斯克尔：`map (\x -> x+x) [1,2,3]`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T04:44:33.503

我不是erlang专家，但我会尽力回答。

## 嵌套函数

```
out(A) ->
    X = A + 1,
    SQ = fun(C) -> C*C end,
    io:format("~p",[SQ(X)]). 
```

这里 SQ 函数可以访问父变量。

## 在拉姆达

这和上面一样，你可以`fun`用来定义你的匿名函数。

## 部分应用

我不认为 erlang 以任何理智的方式具有部分功能应用程序。您唯一能做的就是将函数包装为返回函数。

```
add(X) -> 
    Add2 = fun(Y) -> X + Y end,
    Add2. 
```

现在你可以做类似的事情

```
1> c(test).
{ok,test}
2> A=test:add(1).
#Fun<test.0.41627352>
3> A(2).
3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T21:22:07.857

Erlang 没有 Haskell 和其他语言那样的嵌套函数。当@Satvik 创建一个函数时，`SQ = fun(C) -> C*C end`他是在创建一个闭包，或者在 Erlang 中*很有趣*，而不是一个嵌套函数。该语法`fun (...) -> ... end`创建了一个有趣的或闭包。这不是一回事。

Erlang 中不存在 Haskell 中的部分评估，尽管您可以使用 funs 破解它。

`fun`您可以使用语法定义内联 lambda（乐趣） 。所以你的地图变成：

```
lists:map(fun (X) -> X+X end, [1,2,3]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-23T20:53:18.377

```
% partially evaluating a function of two arguments
partial_eval(F, X, Pos) -> case Pos of
                              1 -> fun(Y) -> F(X,Y) end;
                              2 -> fun(Y) -> F(Y,X) end
                            end.

partial_eval(F,X) -> partial_eval(F,X,1). 
```

在名为 的模块中使用上述代码`test.erl`，在控制台：

```
7> c(test).
{ok,test}
8> Sum = fun(X,Y) -> X + Y end.
#Fun<erl_eval.13.126501267>
9> PS = test:partial_eval(Sum,3).
#Fun<test.1.126208848>
10> PS(4).
7
11> (test:partial_eval(Sum,3))(4). % can be invoked directly too
7
12> Div = fun(X,Y) -> X/Y end.
#Fun<erl_eval.13.126501267>
13> (test:partial_eval(Div,27))(3).
9.0
14> (test:partial_eval(Div,10,2))(3). % partial evaluation of second parameter
0.3 
```

# php - 为 RSS 提要执行此 while 循环时出现内部错误

> ID：13355547
> 
> 赞同：0
> 
> 时间：2012-11-13T04:20:53.190
> 
> 标签：php, mysql, rss

我尝试用 php+mysql 编写一个 RSS 提要，但我得到了 internat 错误 500，我确定它来自 while 循环，谢谢你的帮助。

代码：

```
$result = mysql_query($query_site_archive);

while ($article = mysql_fetch_assoc($result))
{
   $details = '<?xml version="1.0" encoding="utf-8" ?>
   <rss version="2.0">
   <channel>
   <title>'. $article["title"] .'</title>
   <link>http://localhost/website/'. $folder .'/details.php?articleid ='. 
         $article["articleid"] .'&parentid ='. $article["parentid"] .'&catid ='. 
         $article["catid"] . '</link>
    <description>'. $article["description1"] .'</description>'
}

echo '</channel></rss>';

echo "$details"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:31:45.333

好的...现在试试`echo $article["title"]."\n"`？

# ruby-on-rails - Rails / ActiveRecord：检测列是否为关联

> ID：13355549
> 
> 赞同：10
> 
> 时间：2012-11-13T04:21:35.430
> 
> 标签：ruby-on-rails, activerecord

假设我正在抽象代码，并且正在遍历对象 x 的列名，那么检测列是否为关联的最佳方法是什么？

我知道我可以做到这一点，但我想知道是否有更好的方法：

```
@user = User.first
  @user.attributes.keys.each do |column|
    if column[-3..-1] == "_id" && @user.respond_to?(column[0..-4].to_sym)
      puts "#{column} is an association / relation."
    else
      puts "#{column} is not an assocation / relation."
    end
  end
end 
```

任何内置的 Rails 方法或帮助程序来检测关联？上面的代码既不漂亮也不傻。谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T04:30:32.887

一种方法是反思该类的所有关联：

```
associations = class_goes_here.reflect_on_all_associations 
```

然后只找到`belongs_to`那些，因为那些将具有该`_id`字段：

```
associations = associations.select { |a| a.macro == :belongs_to } 
```

然后您可以通过执行以下操作找到用于这些关联的外键：

```
association_foreign_keys = associations.map(&:foreign_key) 
```

我不会使用`@user.attributes`获取属性然后`keys`获取列名。我会`User.column_names`用来获取列名。

因此，在解释完所有这些之后，您可以将代码更改为这样，以使其更加万无一失：

```
associations = User.reflect_on_all_associations
associations = associations.select { |a| a.macro == :belongs_to }
association_foreign_keys = associations.map(&:foreign_key)
User.column_names.each do |column|
  if association_foreign_keys.include?(column)
    puts "#{column} is an association / relation."
  else
    puts "#{column} is not an assocation / relation."
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T13:28:55.270

我确信选定的解决方案会更好，但如果你生活在“理想世界”中，每个人都遵循 Rails 约定，我想你可以依靠[这个](http://edgeguides.rubyonrails.org/active_record_basics.html)：

> **2.2**模式约定 Active Record 对数据库表中的列使用命名约定，这取决于这些列的用途。
> 
> 外键——这些字段应该按照模式singularized_table_name_id 命名（例如，item_id、order_id）。这些是 Active Record 在您创建模型之间的关联时将查找的字段。

因此，只需在列名末尾查找 _id 后缀：

```
Model.column_names.select{|cn| cn.include?("_id")} 
```

# php - 爆炸数组并删除前缀

> ID：13355550
> 
> 赞同：2
> 
> 时间：2012-11-13T04:21:47.803
> 
> 标签：php, arrays, multidimensional-array, explode

我试图使用explode 为字符串创建一个数组。

这是我的字符串：

```
$string = "a:1,b:2,c:3,d:4,e:5,f:6,g:7"; 
```

这是我的完整代码：

```
$string = "a:1,b:2,c:3,d:4,e:5,f:6,g:7";
$d = explode(',', $string);
echo '<pre>';
var_dump($d); 
```

之后我得到了这样的结果..

```
array(7) {
  [0]=>
  string(3) "a:1"
  [1]=>
  string(3) "b:2"
  [2]=>
  string(3) "c:3"
  [3]=>
  string(3) "d:4"
  [4]=>
  string(3) "e:5"
  [5]=>
  string(3) "f:6"
  [6]=>
  string(3) "g:7"
} 
```

我怎样才能创建这样的数组呢？：

```
array(7) {
  ["a"]=>
  string(1) "1"
  ["b"]=>
  string(1) "2"
  ["c"]=>
  string(1) "3"
  ["d"]=>
  string(1) "4"
  ["e"]=>
  string(1) "5"
  ["f"]=>
  string(1) "6"
  ["g"]=>
  string(1) "7"
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T04:24:36.297

这应该有效：

```
$arr = array();
$d = explode(',', $string);
for($d as $item){
   list($key,$value) = explode(':', $item);
   $arr[$key] = $value;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T04:26:01.757

```
<?php 
foreach($d as $k => $v)
{
    $d2 = explode(':',$v);
    $array[$d2[0]] = $d2[1];
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T04:37:36.750

这是一个使用循环的简单解决方案：

```
$string = "a:1,b:2,c:3,d:4,e:5,f:6,g:7";
$pairs = explode(',', $string);
$a = array();
foreach ($pairs as $pair) {
    list($k,$v) = explode(':', $pair);
    $a[$k] = $v;
}
var_export($a); 
```

您也可以以更实用的方式执行此操作（在 PHP >= 5.3 中）：

```
$string = "a:1,b:2,c:3,d:4,e:5,f:6,g:7";
$pairs = explode(',', $string);
$items = array_map(
    function($e){
        return explode(':', $e);
    },
    $pairs
);
$a = array_reduce(
    $items,
    function(&$r, $e) {
        $r[$e[0]] = $e[1];
        return $r;
    },
    array()
);

var_export($a); 
```

# c++ - c++ 类定义。属性作为指针？哪个是正确的方法？

> ID：13355551
> 
> 赞同：1
> 
> 时间：2012-11-13T04:22:04.250
> 
> 标签：c++, class, pointers, reference

> **可能重复：**
> [C++ - 我什么时候应该在类中使用指针成员](https://stackoverflow.com/questions/1175646/c-when-should-i-use-a-pointer-member-in-a-class)

我已经使用 c++ 多年，但我仍然有一些问题没有回答。我正在定义一个 c++ 类，但我对此有一些疑问

问题1：我是否应该使用指针存储投资？

```
Investment* investment;
// or
Investment investment; 
```

问题2：为什么？

问题3：如果我使用`Investment investment;`我应该以这种方式返回参考`Investment & getInvestment();`吗？

我知道我的代码的两种方式都可以工作，但我想知道执行此操作的有效方法..

代码如下：

```
class Urgency
{
private:
    Investment* investment;
public:
    Urgency(Investment* investment);
    ~Urgency(void);

    Investment* getInvestment();
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T04:31:36.530

我通常更喜欢在对象较大时使用指针，而在对象较小时使用堆栈对象。指针允许一些事情，例如惰性初始化和前向声明，而堆栈对象减少了您需要创建自己的复制构造函数以及不必担心显式销毁析构函数中的对象的可能性。（虽然，您可以使用共享指针类型对象来为您执行此操作）此外，堆栈对象通常访问速度更快，但在大多数情况下，这不应该成为选择一个而不是另一个作为大多数差异的原因应用程序可以忽略不计。

参考您的代码，您通常会返回 a`const Investment &`以不允许直接修改 Investment 对象。如上所述，如果您使用原始指针，您应该创建一个复制构造函数和一个析构函数来正确管理对象上的内存。使用指针对象，您通常会`const Investment *`再次返回 a 以消除外部调用者直接修改对象的能力。

当您返回 const 正确的 Investment 对象时，请注意您的函数是如何在 Investment 类中声明的。如果您只是拥有`Investment::getNumShares()`，您将无法使用 const 引用或 const 指针访问该函数。要解决此问题，请将所有不修改对象的成员函数标记为 const，例如`Investment::getNumShares() const`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:31:11.243

1.  不要使用指针，除非你绝对需要它们
2.  因为如果不小心使用它们很容易出错
3.  更好的是，`const &`如果你不打算让每个人都在你的`Investment`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T04:46:23.177

> 问题1/2：是否应该使用指针存储投资？/ 为什么？

```
Investment* investment;
// or
Investment investment; 
```

各有利弊。

不使用指针：

*   省去您担心创建和删除投资对象的麻烦 - 尽管如果有用，您可以在初始化列表中显式选择投资构造函数。
*   表示投资对象是在宿主对象内分配的，可以省去堆的分配和释放。这可能更节省内存并且性能更好。

使用指针：

*   允许您使用延迟初始化：您可以推迟创建投资对象，直到包含对象实际需要它，然后可能在不再需要时再次删除它。这种对生命周期的手动控制可用于微调内存使用情况。当指针不指向实际投资时，在指针中存储 NULL/0 是帮助跟踪这一点的常见做法。
*   意味着您可以将 Investment 对象的所有权授予对象外部的代码......他们可以继续使用它并在适当的时候将其删除。
*   意味着您必须仔细制作复制构造函数，并仔细处理构造函数中的异常。智能指针可能有助于解决这些问题。
*   意味着您可以分配从 Investment 派生的类的实例，并通过相同的指针使用它。这使您可以选择适合您的运行时需要的自定义实现，甚至可以根据需要改变实现。这种灵活性是面向对象编程和运行时多态性的基石。
*   意味着包含对象的标头只需要查看（无论是`#include`在同一文件中还是在同一文件中）投资类的前向声明。这意味着可以对 Investment 对象进行更改，而无需强制重新编译仅使用包含对象的代码（只需重新链接包含修改后的 Investment 实现的对象）。这个概念与指向实现的指针或 pImpl 习语相同，尽管投资不一定是包含类的实现的专用部分，并且可以在程序的其他地方直接和独立地使用。

> 问题3：如果我使用投资投资；我应该以这种方式返回参考投资 & getInvestment();？

这在很大程度上取决于程序。有时最好避免直接暴露数据成员，而是在包含对象中提供更高级别的逻辑函数，该函数对投资做一些工作：这样你就可以在投资对象周围维护额外的不变量——即你可以控制、协调和监控何时以及如何使用它。其他时候，暴露它可能更实际。

仅当您可以确定您实际上将返回一个 Investment 对象时，返回一个引用才是合适的：在您的指针版本中，实现可能需要创建/`new`一个 Investment 对象（如果它还没有）。或者，返回一个指针意味着您可以向客户端代码返回 NULL/0 以指示您还没有投资对象，但是您必须确保您的类和客户端代码了解谁将拥有持续所有权（即投资对象的权利/义务`delete`），并且任何一方都不会在对方完成投资后尝试使用该投资`delete`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T04:30:11.873

*   通过使用指针，您可以选择何时分配内存并删除它，而普通声明具有自动存储。要回答这个问题，这实际上取决于您正在编写的程序类型和个人偏好。

    > ```
    > class Foo
    > {
    >     Foo* Obj; //choose when to allocate this object, dynamically allocated
    >     Foo Obj2; //automatic, runs through the life of the object.
    > } 
    > ```

*   您可以，但分配地址的另一种解决方案是使用带有参数的 void 函数，该参数设置对象的引用。

    > ```
    > void GetVar(int *Address_Holder)
    >     {
    >         //assign address
    >     } 
    > ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T04:38:48.917

如果要控制何时为对象分配内存以及何时删除它，请使用指针。如果你有一个巨大的对象，那么使用指针作为传递函数的指针将比传递对象本身更快（或者你可以通过引用传递）。在任何其他情况下，建议使用对象而不是指针，因为使用指针非常容易出错。

# c - openmp 比一个线程慢，想不通

> ID：13355559
> 
> 赞同：1
> 
> 时间：2012-11-13T04:22:56.517
> 
> 标签：c, performance, openmp

我遇到了一个问题，即我的以下代码在使用 openmp 时运行速度较慢：

```
chunk = nx/nthreads;
int i, j;
for(int t = 0; t < n; t++){
     #pragma omp parallel for default(shared) private(i, j) schedule(static,chunk) 
     for(i = 1; i < nx/2+1; i++){
        for(j = 1; j < nx-1; j++){
            T_c[i][j] =0.25*(T_p[i-1][j] +T_p[i+1][j]+T_p[i][j-1]+T_p[i][j+1]);
            T_c[nx-i+1][j] = T_c[i][j];
        }
    }
    copyT(T_p, T_c, nx);
}
print2file(T_c, nx, file); 
```

问题是当我运行多个线程时，计算时间会长得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:45:07.133

首先，您的并行区域在外部循环的每次迭代中都会重新启动，从而增加了**巨大**的开销。

其次，一半的线程将只是坐在那里什么都不做，因为你的块大小是它应该的两倍大 - 这是`nx/nthreads`并行循环的迭代次数是`nx/2`，因此总共有`(nx/2)/(nx/nthreads) = nthreads/2`块。除了你试图实现的是复制`schedule(static)`.

```
#pragma omp parallel
for (int t = 0; t < n; t++) {
   #pragma omp for schedule(static) 
   for (int i = 1; i < nx/2+1; i++) {
      for (int j = 1; j < nx-1; j++) {
         T_c[i][j] = 0.25*(T_p[i-1][j]+T_p[i+1][j]+T_p[i][j-1]+T_p[i][j+1]);
         T_c[nx-i-1][j] = T_c[i][j];
      }
   }
   #pragma omp single
   copyT(T_p, T_c, nx);
}
print2file(T_c, nx, file); 
```

如果您修改`copyT`为也使用 parallel `for`，`single`则应删除该构造。您不需要`default(shared)`，因为这是默认设置。您无需声明并行循环的循环变量`private`- 即使此变量来自外部范围（因此在区域中隐式共享），OpenMP 也会自动将其设为私有。只需在循环控件中声明所有循环变量，它就会自动使用应用的默认共享规则。

第二个半，您的内部循环中（可能）存在错误。第二个评估声明应为：

```
T_c[nx-i-1][j] = T_c[i][j]; 
```

（或者`T_c[nx-i][j]`如果您没有在下侧保留光环）否则当`i`equals时`1`，您将访问`T_c[nx][...]`超出`T_c`.

第三，一般提示：不要将一个数组复制到另一个数组中，而是使用指向这些数组的指针，并在每次迭代结束时交换两个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T08:15:21.430

我在您发布的代码段中看到至少三个可能导致性能不佳的问题：

1.  当在线程之间划分时，块大小太小而无法显示任何增益。
2.  `parallel`循环内区域的打开和关闭可能会损害性能。
3.  两个最里面的循环似乎是独立的，并且您只并行化其中一个（失去了利用更广泛的迭代空间的可能性）。

您可以在下面找到我将对代码进行的一些修改：

```
// Moving the omp parallel you open/close the parallel 
// region only one time, not n times
#pragma omp parallel default(shared)
for(int t = 0; t < n; t++){
     // With collapse you parallelize over an iteration space that is 
     // composed of (nx/2+1)*(nx-1) elements not only (nx/2+1)
     #pragma omp for collapse(2) schedule(static)
     for(int i = 1; i < nx/2+1; i++){
        for(int j = 1; j < nx-1; j++){
            T_c[i][j] =0.25*(T_p[i-1][j] +T_p[i+1][j]+T_p[i][j-1]+T_p[i][j+1]);
            T_c[nx-i+1][j] = T_c[i][j];
        }
    }
    // As the iteration space is very small and the work done 
    // at each iteration is not much, static schedule will likely be the best option
    // as it is the one that adds the least overhead for scheduling
    copyT(T_p, T_c, nx);
}
print2file(T_c, nx, file); 
```

# entity-framework - 如何建模三元关系

> ID：13355562
> 
> 赞同：2
> 
> 时间：2012-11-13T04:23:19.987
> 
> 标签：entity-framework, entity-relationship, entity-framework-5

将实体映射到与 EF5 的三元关系的最佳方法是什么？

例如，三个实体：

```
Bike
Crash
Person 
```

那么就会有一个三元关系要知道：

1.  撞车的那个人的自行车 X
2.  参与自行车 X 和 Y 之间的碰撞 X 的人员
3.  骑自行车 B 的人 A 发生了哪些事故

等等

我应该如何创建我的实体？是为三元关系创建新实体的唯一可能性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:42:26.577

**选项1**

假设有些`Person-Bike`组合可以在没有`Crash`es 的情况下存在（谢天谢地）。因此，您可以创建`PersonBike`具有 FK 与人和自行车的二元关系（联结表），假设自行车不属于特定人员。EF 可以在模型中没有关联类的情况下处理这种多对多关系。

然后，太糟糕了，Person-Bike 组合可能会导致崩溃。一次崩溃中可能有两种以上的组合。基本上你可以`PersonBikes`在`Crash`. 在那种情况下，模型中根本就没有关联类。但是，如果您想了解更多关于 和 之间的关联`Crash`，`PersonBike`例如谁对崩溃有罪，则需要两者之间的联结表：`CrashPersonBike`带有 FK 的 to`Crash`和`PersonBike`一个或多个描述关联的字段（如有罪是/否）。这将需要 EF 模型中的关联类。

**选项 2**

Bikes 有特定的所有者（人）：让我们`Person`有一个`Bikes`集合（表 Bike 对 Person 有一个 FK）。现在只用涉及的自行车来描述碰撞就足够了，因为自行车决定了人。因此`Crash`可以有一个`Bikes`集合（同样：模型中没有关联类）或`CrashBike`包含更多详细信息的关联类，如上所述。

**选项 3**

一个“真正的”三元关系，需要模型中的关联类 ( `CrashPersonBike`)，有或没有额外的细节。

在所有情况下，您都需要业务逻辑来防止同一个人（或选项 1 和 3 中的自行车）卷入一次车祸。选项 1 和 2 的另一个好处是模型可以描述除碰撞之外的人-自行车组合。应该是 1 还是 2 取决于自行车人的所有权。

# javascript - 如何检测浏览器向用户询问设备权限？

> ID：13355567
> 
> 赞同：3
> 
> 时间：2012-11-13T04:24:08.560
> 
> 标签：javascript, browser, user-permissions

假设我在浏览器中使用 getUserMedia javascript api。浏览器会询问用户是否允许使用摄像头或麦克风。

如何检测浏览器何时请求这些权限，以便向用户解释应用程序请求权限的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-05-03T11:04:17.950

从 Chrome 64 开始，您可以使用[Permissions API](https://developer.mozilla.org/en-US/docs/Web/API/Permissions_API)`camera`来查询是否`microphone`已授予权限：

```
navigator.permissions.query({name:'camera'}).then(function(result) {
    alert(result.state);
    if (result.state === 'granted') {
        //permission has already been granted, no prompt is shown
    } else if (result.state === 'prompt') {
       //there's no peristent permission registered, will be showing the prompt
    } else if (result.state === 'denied') {
       //permission has been denied
    }
}); 
```

以上仅适用于 Chrome atm。

我已经写了更多关于主题@[使用权限 API 检测用户允许或拒绝相机访问的频率](https://blog.addpipe.com/using-permissions-api-to-detect-getusermedia-responses/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:05:46.443

这是本机 UI 功能，不向 JavaScript 公开，因此无法检测对话框何时出现。但是，所有支持 getUserMedia 的浏览器都要求获得许可，因此如果您检测到对 getUserMedia API 的支持，那么您可以在此时显示您的解释，而其他浏览器上的用户将看不到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:13:21.130

据我所知，这不是直接可能的，但是您应该能够推断出用户正在看到提示。

据推测，由于您正在编写 javascript，因此您决定何时调用`getUserMedia()`，因此您可以提供额外的解释作为导致此过程的一部分。一个设计良好的页面应该能够很好地解释正在发生的事情，以便用户在被提示交出对网络摄像头的控制权*之前就知道发生了什么。*

也就是说，您可以推断用户在您发送请求时看到了权限提示，但没有收到错误回调或成功回调。鉴于此，您可以在第一次提示权限的同时设置一个计时器，如果在几秒钟内没有成功或返回错误，则触发该计时器，在这种情况下，您可以合理地假设用户已经看到了浏览器提示但尚未回应。

# linux - 使用 schroot 替换 lxc

> ID：13355568
> 
> 赞同：1
> 
> 时间：2012-11-13T04:24:12.590
> 
> 标签：linux, chroot, lxc

我一直在使用 lxc 一段时间，但我发现配置和文档很难遵循，有时不清楚该怎么做，任何新版本都意味着我的代码有很多变化。

我一直在寻找 schroot，所以我想知道是否*有办法用 schroot 完成替换 lxc？*_我可以用 schroot 运行 /sbin/init 吗？_

我发现了这篇文章：[http://johnlewis.ie/using-schroot-instead-of-lxc-containers/](http://johnlewis.ie/using-schroot-instead-of-lxc-containers/)然后可以在同一个 chroot 中启动一堆服务，但我想先检查一下我是否可以运行一个完整的系统。

我想现在必须手动解决一些安全问题，但我更喜欢 lxc 中未记录的魔法，但是*使用 schroot 与 lxc 有什么安全缺点吗？*

*我喜欢在 lxc 容器中拥有（几乎）完整的新系统的概念，但是仅使用 schroot 是否可能？*

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T03:54:33.600

Schroot 只虚拟化文件系统；它不限制资源利用率、网络访问、发送信号的能力、查看系统上运行的其他进程的能力等。因此，不受信任的代码可能会耗尽所有内存、发送垃圾邮件或杀死以同一用户身份运行的进程。虽然您可以在那里运行 /sbin/init，但它不会是 pid 1，并且您的 init 脚本可以“看到”来自基本操作系统和其他 chroot 的所有进程，这可能需要比 lxc 更多的代码修改。

如果您希望运行潜在的敌对（即网络提交）代码，我肯定会坚持使用 LXC。

# c++ - 使用 Android NDK 更改文件大小

> ID：13355581
> 
> 赞同：0
> 
> 时间：2012-11-13T04:26:58.880
> 
> 标签：c++, file, android-ndk

如何在 C++ 中使用 Android NDK 更改文件的大小？

通常我会使用 _chsize_s 但 NDK 似乎不支持它。有没有一种适用于 Android NDK 的方法？

# php - 使用弹出窗口打开我的网站

> ID：13355583
> 
> 赞同：1
> 
> 时间：2012-11-13T04:27:04.967
> 
> 标签：php, javascript, html

我刚刚完成了一个网络应用程序。但我想通过弹出窗口打开该应用程序，所以栏上没有后退按钮。

流程是当我们键入我的 URL 应用程序时，它会弹出窗口。之后我们可以创建一个快捷方式或书签作为页面，当我们点击它时，它仍然在弹出窗口中打开。

我已经尝试过 JavaScript 代码，但只是当我们在我的应用程序中单击超链接时。当我键入 URL 应用程序时，它仍然不顺利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:30:52.483

您是否尝试在 body 标签的 onload 事件上推送您的 javascript 弹出代码？

例如：

```
<body onload="popup_new_window()"></body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:56:13.840

很多浏览器会自动屏蔽这个想法。

你可以使用类似的东西：

```
$().ready(function(){  
   eval($('#el')).click());  
}); 
```

在设置为单击功能的元素上，例如“openPopup（）”并准备好打开弹出窗口！

​</p>

```
<a​​ href='#asd' id='asd' onclick='openwindow()'>popup</a>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
<script>
function openwindow()
{
window.open("http://www.yoursite.com",
    "mywindow","location=1,status=1,scrollbars=1,width=100,height=100");
}

$().ready(function(){  
   $('#asd').click(function(){openwindow();});
   eval($('#asd').click());  
});​
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T05:08:19.987

您不能只在没有工具栏的情况下始终打开页面。浏览器不能那样工作。现代浏览器还显示了出于安全目的要隐藏的大多数工具栏。

在 onload 的弹出窗口中打开它也要求被弹出窗口阻止程序阻止，而且您将保留原始窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T04:46:06.450

将脚本放在要打开窗口的位置

```
window.onload() 
```

您可能要放置很多参数。只需谷歌 window.onload 属性

# c# - 线程逐渐增加处理器使用率

> ID：13355584
> 
> 赞同：5
> 
> 时间：2012-11-13T04:27:07.430
> 
> 标签：c#, multithreading, multicore, sorteddictionary

我有一个分配给核心#7 的.NET 线程。线程函数每 300ms 触发一次。最初执行一个调用大约需要 20-30 毫秒。但是这个时间逐渐增加，在大约 2,52,000 次调用后变得超过 150 毫秒。

我还注意到核心#7 的使用率从 10% 开始。到线程函数的调用次数达到 2,52,000 核心 #7 的处理器使用率大约为 60%。当我停止触发线程函数时，处理器使用率变为 0%。但是当我再次开始触发时，核心使用率从 60%（不是从 0%）开始，然后逐渐增加。

我还注意到应用程序没有内存泄漏。

在我的线程函数中，我将两个字典的元素组合起来，并将其添加到 foreach 循环中的另一个字典中。字典中的元素数将始终为 45。

我希望这个应用程序能够 24/7 全天候运行。请让我知道一些技巧，以使此处理器的使用保持不变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T04:30:37.617

当您将项目添加到 a[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)时，可能必须增加容量。你的字典会永远增长吗？

来自[MSDN](http://msdn.microsoft.com/en-us/library/k7z0zy8k.aspx)：

> 如果 Count 小于容量，则此方法接近 O(1) 操作。如果必须增加容量以容纳新元素，则此方法变为 O(n) 操作，其中 n 为 Count。

# scala - 出于 mzero 的目的将案例类视为产品

> ID：13355591
> 
> 赞同：2
> 
> 时间：2012-11-13T04:28:18.450
> 
> 标签：scala, scalaz

使用 Scalaz 7，我们可以得到幺半群积的零：

```
scala> mzero[(Int, String)]
res13: (Int, String) = (0,"") 
```

有没有一种更简单的方法可以为字段为幺半群的案例类获取零？理想情况下，不需要重复字段的类型 à la：

```
scala> case class Foo(x: Int, y: String)
defined class Foo
scala> (Foo.apply _).tupled(mzero[(Int, String)])
res15: Foo = Foo(0,) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T11:51:16.060

即使在 Shapeless 中，您也需要一些样板文件，如下所示：

```
implicit def fooIso = Iso.hlist(Foo.apply _, Foo.unapply _) 
```

我们可以在 Scalaz 7 中做类似的事情（虽然不那么优雅）。首先对于一些通用机械：

```
import scalaz._, Scalaz._, Isomorphism._

case class MonoidFromIsorphism[F, G](iso: F <=> G)(
  implicit val G: Monoid[G]
) extends IsomorphismMonoid[F, G] 
```

现在我们可以写：

```
case class Foo(x: Int, y: String)

implicit object fooMonoid extends MonoidFromIsorphism(
  new IsoSet[Foo, (Int, String)] {
    def to = (Foo.unapply _) andThen (_.get)
    def from = (Foo.apply _).tupled
  }
) 
```

哪个有效：

```
scala> mzero[Foo]
res0: Foo = Foo(0,) 
```

这种方法仍然需要你重复类型，它并不比`Foo`手动写出实例更简洁（实际上，如果你计算`MonoidFromIsomorphism`定义，它就不那么简洁了，但对我来说，这感觉就像是真正应该做的方便的事情在图书馆）。

缺少的是`HList`-tuple 同构，它允许我们编写一个简单的`Foo`-`HList`同构，就像在 Shapeless 中一样。`scalaz.typelevel`（目前）不提供开箱即用的功能，但按照 Shapeless 作为模型，实施起来应该不会太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:34:38.597

你可以为它定义一个幺半群。

```
implicit val fooMonoid = new Monoid[Foo] {
  def zero = Foo(mzero[Int], mzero[String])
  def append(f1: Foo, f2: => Foo) = Foo(Monoid[Int].append(f1.x,f2.x), Monoid[String].append(f1.y,f2.y))
} 
```

可能有更好的方法来编写 impl，但这就是基本思想。

我猜我们可以用宏来定义一般的案例类。

# oop - 分离应用程序逻辑的最佳实践

> ID：13355593
> 
> 赞同：0
> 
> 时间：2012-11-13T04:28:41.163
> 
> 标签：oop, model-view-controller, abstraction, business-logic

在我的应用程序中，我分离了下一级应用程序逻辑：

1.  实用程序
2.  应用抽象
3.  应用抽象的简单/通用实现（#2）
4.  具体的应用程序实现（附加函数和类以附加 #3 以适应我们的最终应用程序目的）
5.  abstract mvc application architecture (abstraction for mvc logic of application)
6.  具体的 mvc 应用程序

*这些级别的说明：*

1.  实用程序、库等等......（没有依赖关系，可能被任何具体的应用程序类使用）
2.  应用程序的抽象类。定义非常**抽象的应用程序类**（没有依赖关系）
3.  抽象应用程序的具体类。定义**抽象应用程序**的**常用具体类**（与逻辑级别 #2 有相关性）
***   **具体（最终）应用程序**类。为具体的应用程序模型定义了 finally 类（依赖于逻辑级别 #3 和 #2）*   **应用程序的抽象 MVC 架构**。为我们的具体 MVC 应用程序定义抽象（没有依赖关系）*   **应用程序的具体 MVC 架构**：具体控制器、视图、模型。具体的应用程序工作流（MVC：视图作为视图，模型作为代理，控制器链接两者）

    *   模型是使用级别 #4的简单*代理（依赖于 #5 和 #4）*
    *   控制器和视图不知道模型使用什么类（没有任何级别的依赖，除了#5）。
    *   模型使用“值对象”（在逻辑 #5 中定义）与视图共享数据**

 ***汽车游戏应用示例：*

1.  `EngineUtils`,`TrackUtils`等等

2.  `ICar`, `ITrack`, `IEngine`, `ITrackFactory`,`IEngineFactory`等等

3.  `Car`, `Track`, `SimpleEngine`, `AdvancedEngine`,`EngineFactory`等等（实现#2的接口）

4.  `HondaCar`, `FordCar`, `BMWCar`, `TorontoTrack`, `TokyoTrack`, `DushanbeTrack`, `KualaLumpurTrack`, `TrackFactory`, `SuperEngine`,`ExtendedEngineFactory`等等

5.  `ITrackProxy`, `ICarProxy`, `CarVo`, `TrackVo`, `TrackListVo`,`CarListVo`等等

6.  `GameController`, `TrackView`, `CarView`, `CarProxy`,`TrackProxy`等等。模型<->视图共享的数据是`CarVo`, `TrackVo`, `TrackListVo`,`CarListVo`等等

你觉得这个级别怎么样？如果没问题，我正在考虑如何在项目中分离所有这些级别？（通过命名空间或库）。如果命名空间，那么我有命名这个命名空间的问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:22:57.833

这与我目前管理项目的方式非常相似（使用任何平台/语言）。

我倾向于将 Utilities 放在一个单独的项目/库中，并给它一个通用的命名空间，比如 com.yourdomain.Core 或类似的东西。然后将创建该库以供任何应用程序使用，甚至在 Cars Games 之外。

我认为您可以将＃2（摘要）和＃3（通用混凝土）放在与抽象应用程序库（＃5）相同的文件夹/包/命名空间/项目中。我认为除了 Cars Games 的项目之外，没有其他项目需要对抽象和通用具体的引用，因此您不妨将它们放在抽象应用程序库中。否则，您可以将#2 和#3 放在一个库中，并从抽象应用程序库中引用它。

在一个具体的应用程序中，我将创建特定的类（#4）、引用实用程序和抽象应用程序库（将包含抽象（包括接口）和通用具体）。**

# android - 多点触控 android froyo 半屏

> ID：13355597
> 
> 赞同：0
> 
> 时间：2012-11-13T04:29:08.860
> 
> 标签：android, touch

我编写了以下方法，试图让多点触控在 android 上工作，问题是当两个手指在屏幕上时，它们都收到相同的 getX() 值，我需要获取每个手指的位置。

如何获得两个手指的位置？谢谢

```
public void onTouchEvent(MotionEvent event) 
{
  int pointerCount = event.getPointerCount();
  stats = "";
  for (int i = 0; i < pointerCount; i++) 
  {
      stats += "    " + i + " " + event.getAction() + "   " + event.getX();
      float x = event.getX(i);
      System.out.println(stats);
  }
} 
```

这是打印输出的示例：0 2 200 1 2 200

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:35:50.660

您当前`getX()`正在注销的字符串中没有任何参数进行调用，这将始终获取第一个指针的位置。如果要获取特定指针（手指）的位置，则需要调用`getX(int)`并传递要读取的指针 id，就像在下面设置浮点值一样。

# java - 根据用户需要自动创建新变量

> ID：13355603
> 
> 赞同：0
> 
> 时间：2012-11-13T04:29:55.403
> 
> 标签：java, arrays, variables, dynamic

我必须为一家想象中的公司设计一个程序，作为我的计算机科学 AP 课程的项目。该计划将跟踪工人的姓名、他们的工作时间、他们的工资率，以及他们是否加班，他们得到了多少。我们必须在不知道确切工人数量的情况下创建程序，这意味着程序将循环直到用户完成添加工人和小时信息，然后在最后显示它以显示所有数据和多少公司必须支付每个工人的工资。我对此的思考过程是为主程序设置一个循环，让用户输入姓名、小时、费率等，直到他们完成。但是我遇到的障碍是因为它会一遍又一遍地使用相同的变量，所以它最终无法调用它。他们是一种根据需要自动创建变量然后能够在最后调用它们的方法。如果不是什么是编写此程序的更好方法。

到目前为止，我已经尝试过使用：Arrays building a class

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:35:43.883

您需要做的就是定义一个对象。

```
public class Worker {
    private String name;
    //...

    //getter/setters
} 
```

并维护一份清单

```
List<Worker> list = new ArrayList<Worker>(); //which grows automatically . 
```

并为每个条目实例化对象并添加到列表中。

# asp.net-mvc - 保存对 CheckBox 更改的更改？

> ID：13355614
> 
> 赞同：3
> 
> 时间：2012-11-13T04:30:45.377
> 
> 标签：asp.net-mvc, checkbox, submit, actionlink, checkboxfor

我有一个反映数据库中表的 MVC 索引页面。
其中一列是布尔值。
我想在索引页面中有一个复选框，单击该复选框后，会立即调用一个操作，该操作将在现场保存新状态，而无需提交/刷新。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T05:02:27.127

您应该将`onclick`事件添加到`input`. 您的剃须刀看起来类似于：

```
@Html.CheckBoxFor(m => m.Foo, new { onclick = "SomeMethod(this)" }); 
```

然后你的脚本看起来类似于（假设你可以访问 jQuery；转换它应该很简单）：

```
function SomeMethod(checkboxInput) {
    $.ajax({
      type: 'POST',
      url: Your/Action,
      data: { newValue: checkboxInput.checked },
      success: success,
      dataType: 'json'
    });
} 
```

*注意参数名称：`newValue`.*

最后是您处理请求的操作：

```
public JsonResult Action(bool newValue) {
   //Do your stuff!
   //repository.Update();
} 
```

*注意参数名称：`newValue`.*

# xamarin.ios - GetCell 中的 MonoTouch.Dialog ImageLoader

> ID：13355621
> 
> 赞同：0
> 
> 时间：2012-11-13T04:31:22.107
> 
> 标签：xamarin.ios, monotouch.dialog

我有一个带有自定义元素的 MonoTouch.Dialog 视图控制器。我的元素实现了 IImageUpdated。在 GetCell 方法中，我正在加载图像......

```
 var logo = ImageLoader.DefaultRequestImage (new Uri (url), this);
    if (logo == null) {
        cell.ImageView.Image = _defaultImage;
    } else {
        cell.ImageView.Image = logo;
    }

    #region IImageUpdated implementation

    public void UpdatedImage (Uri uri)
    {
       // HOW DO I GET THE CELL HERE?
       //cell.ImageView.Image = ImageLoader.DefaultRequestImage(uri, this);
    }

#endregion 
```

在 UpdatedImage 回调中，如何访问正确的单元格来更新图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:10:51.490

我推荐你子类`UITableViewCell`，喜欢`ImageCell : UITableViewCell`。然后创建一个继承自 UIView( `ImageCellView : UIView, IImageUpdate`) 并实现的类`IImageUpdated`。在这种情况下，`GetCell()`您返回您的单元格的一个实例，并将一个 ID 或其他任何内容传递给您的单元格。该`ImageCellView`实例被添加到单元格的`ContentView`. 然后每个视图都应该很好地知道要加载什么以及要更新什么，并且所有内容都被封装了。

您可以在 Miguel 的 TweetStation 代码中看到一个示例：[https ://github.com/migueldeicaza/TweetStation/blob/master/TweetStation/UI/TweetCell.cs#L216](https://github.com/migueldeicaza/TweetStation/blob/master/TweetStation/UI/TweetCell.cs#L216)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:40:52.113

我喜欢 Krumelur 的回答。

也就是说，这是一个很好的观察：元素可能在任何时间点都没有活动单元格。在这些情况下，这意味着该元素尚未在屏幕上可见。

当请求单元格时，您可以做的一件事是将单元格保存为字段，然后再访问它。诀窍是，当图像出现时（比如从现在起 30 秒），您的元素可能已超出屏幕，并且您的单元格将无效，因此您将更新其他人的单元格。因此，您需要跟踪该单元格仍与您的元素相关联并手动处理。

# php - 阻止 Internet Explorer 提供保存/下载文件的选项

> ID：13355623
> 
> 赞同：0
> 
> 时间：2012-11-13T04:31:22.753
> 
> 标签：php, javascript, jquery

我设置了一个站点，因此当您单击链接时，它会播放一首歌曲。chrome 有一个可以运行的音频播放器。firefox 有一个运行的隐形播放器。但即询问您是否要打开或保存文件。打开很好，但保存是不可接受的。那么我该如何解决？我在网上找不到与我的问题相关的任何内容。什么都没有。所以任何想法，建议，告诉我是个傻瓜，我做错了，看看这个。非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T04:34:12.987

如果您不希望用户访问原始数据，则不应公开原始数据，而是通过 Flash 播放器播放。请记住，任何有计算机知识的用户无论如何都可以下载您的数据。

# ios - Box2D 身体无缘无故移动？

> ID：13355629
> 
> 赞同：0
> 
> 时间：2012-11-13T04:32:15.997
> 
> 标签：ios, cocos2d-iphone, box2d, collision-detection

我在我的应用程序中使用 Box2D 和 Cocos2D。所以几乎在我的应用程序中，我让身体跟随我的 CCSprites，即使人们反对它。此外，我只使用 Box2D 进行碰撞检测，所以我只是将一个身体附加到我的精灵上，然后使用 b2ContactListener 并***没有***别的。无论如何，除了这个小问题之外，这个设置大部分都有效。

所以我的身体在游戏循环中像这样跟随我的精灵：

```
for(b2Body *b = world->GetBodyList(); b; b=b->GetNext()) {
        if (b->GetUserData() != NULL) {
            CCSprite *sprite = (CCSprite *)b->GetUserData();
                b2Vec2 b2Position = b2Vec2(sprite.position.x/PTM_RATIO, sprite.position.y/PTM_RATIO);
                float32 b2Angle = -1 * CC_DEGREES_TO_RADIANS(sprite.rotation);
                b->SetTransform(b2Position, b2Angle);
        }
    } 
```

我也像这样创建我的 b2World （如果有什么不同的话）：

```
world = new b2World(b2Vec2(0.0f, 0.0f));
world->SetAllowSleeping(NO);
_contactListener = new MyContactListener();
world->SetContactListener(_contactListener); 
```

这个问题是，每当我的 CCSprite 发生碰撞（从技术上讲，我的 b2Bodys 也在发生碰撞）时，每个 CCSprite 上的 b2Body 似乎会移动一点，就好像一个微小的力刚刚击中它一样，所以如果这是有道理的，它们就会有“后坐力”。即使不涉及任何力量，当击中发生时，它们也会彼此远离。

另一个例子是当我的一个身体坐在另一个身体的顶部时，当我站在它的边缘时，站立的身体似乎有点倾斜，这很奇怪，因为我没有倾斜我的精灵。

最后，我的身体似乎有点落后于精灵在那一刻的位置，我不确定这是否也与这个问题有关，但无论如何*有什么理由会发生这种情况吗？有什么办法可以使身体不受力的影响并且仅用于碰撞？*

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:02:02.883

我相信身体在碰撞时会触发碰撞响应，这会导致它们暂时分开一点，然后在你强制它们的 b2transform 与下一个游戏滴答中的精灵的位置/角度同步时迅速回到原位。

Since you are using Box2D purely for collision detection, did you set the *isSensor* property of your fixture definition to true?

```
b2FixtureDef shapeDef;
shapeDef.isSensor = true; 
```

By specially marking the fixture as a sensor, it will never physically collide with anything, but you will still be notified when an overlap of bodies occur, via the contact listener.

# actionscript-3 - 动作脚本滚动

> ID：13355631
> 
> 赞同：0
> 
> 时间：2012-11-13T04:32:58.553
> 
> 标签：actionscript-3, flash, actionscript, scroll, horizontal-scrolling

在 AS3 中，当鼠标位于舞台右侧时，我试图让背景水平滚动。（我的后台实例称为“bp”。）

这不起作用：

```
while (mouseX > 600)
  {bp.x -= 2;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:45:30.267

Flash 用户界面是逐帧更新的，不应像您的 while 循环实现那样阻塞。

每一帧，您都可以测试 mouseX 的位置并确定滚动背景的程度。

这是一个示例实现：

```
import flash.events.Event;

addEventListener(Event.ENTER_FRAME, frameHandler);

function frameHandler(event:Event):void
{
    var d:Number = (stage.stageWidth >> 1) - stage.mouseX;
    bg.x -= d * 0.1;
} 
```

# php - SQL：从表中选择列并比较+计数

> ID：13355635
> 
> 赞同：2
> 
> 时间：2012-11-13T04:33:50.953
> 
> 标签：php, mysql, sql

我正在改进我的 php 脚本，它有两个简单的 sql 查询。我想做的是将两个查询合并为一个。

第一个查询：

```
SELECT categories.*, entries.* 
FROM categories, entries 
WHERE entries.cat_id = categories.cat_id 
ORDER BY dateposted ASC 
LIMIT 5; 
```

第二个查询：

```
SELECT comments.* 
FROM comments 
WHERE comments.entry_id = '. $row['id'].'; 
```

这两个在分开时工作得很好。我只需要将它们组合成一个（仍然很简单，请不要使用 UNION 或 INNER JOIN），并可能计算查询中特定条目的评论数。此外，我的“评论”表有五列（comment_id、post_id、作者、正文、发布日期），如果这对了解有帮助的话。

我尝试了不同的方法。像这样的东西：

```
SELECT categories.*, entries.*, COUNT(comments.entry_id) AS comm_num 
FROM categories, entries, comments 
WHERE entries.cat_id = categories.cat_id 
AND comments.entry_id = entries.id 
ORDER BY dateposted ASC LIMIT 5; 
```

不工作...

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:39:34.400

您的第一个查询本质上是一个联接，它可能不会更快。您可以像这样查询条目（同时显示相应的类别信息）：

```
SELECT entries.*, categories.* 
FROM entries
LEFT JOIN categories ON entries.cat_id = categories.cat_id 
ORDER BY dateposted ASC 
LIMIT 5; 
```

此外，听起来您实际上并不想返回此查询中的每个评论行，而只是获取每个“条目”的评论计数。对于这个计数，您可能会这样做：

```
SELECT entries.*, categories.*, COUNT(comments.comment_id) AS comm_num  
FROM entries
LEFT JOIN categories on entries.cat_id = categories.cat_id
LEFT JOIN comments on comments.entry_id = entries.entry_id
GROUP BY entries.entry_id
ORDER BY dateposted ASC 
LIMIT 5; 
```

请注意，COUNT 函数计算的是评论 ID，而不是条目 ID。

# vb.net - 获取当前日期和时间

> ID：13355638
> 
> 赞同：33
> 
> 时间：2012-11-13T04:34:04.137
> 
> 标签：vb.net, winforms

我想获取当前的日期和时间。

例如：

```
2012/11/13 06:30:38 
```

我试过的：

```
Dim d As System.DateTime
MsgBox(d.Year) 'Return 1 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-11-13T04:35:20.707

利用`DateTime.Now`

**尝试这个：**

```
DateTime.Now.ToString("yyyy/MM/dd HH:mm:ss") 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-12T15:08:44.843

试试这个：

```
System.DateTime.Now.ToString("yyyy/MM/dd HH:mm:ss") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-19T04:56:57.037

`DateTimePicker1.value = Format(Date.Now)`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-19T05:04:50.857

获取当前日期时间

```
Now.ToShortDateString()
DateTime.Now
Today.Now 
```

# android - PhoneGap (Android) 删除目录

> ID：13355641
> 
> 赞同：3
> 
> 时间：2012-11-13T04:34:43.360
> 
> 标签：android, cordova

我正在尝试删除一个目录及其内容`PhoneGap on Android`：

```
deleteDirectory = function deleteDirectory(uri) {
    uri = uri.substring(0, uri.lastIndexOf('/'));
    return $.Deferred(function (def) {
        fileSystem.root.getDirectory(uri, {
            create: false
        }, function (directory) {
            directory.removeRecursively();
            def.resolve();
        }, function (error) {
            resolveError("Error deleting directory: ", error, def);
        });
    }).promise();
} 
```

出现以下错误：`File No Modification Allowed Error`

我已确认已设置此权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我还应该去哪里寻找？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-06T14:37:31.140

我已经用这种方法做到了：

```
 function ClearDirectory() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess, fail);
        function fail(evt) {
            alert("FILE SYSTEM FAILURE" + evt.target.error.code);
        }
        function onFileSystemSuccess(fileSystem) {
            fileSystem.root.getDirectory(
                 "yours/dir/ect/ory",
                {create : true, exclusive : false},
                function(entry) {
                entry.removeRecursively(function() {
                    console.log("Remove Recursively Succeeded");
                }, fail);
            }, fail);
        }
    } 

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-25T07:36:03.050

从这个[答案](https://stackoverflow.com/questions/23127292/window-resolvelocalfilesystemurl-vs-window-requestfilesystem)：

> 如果您想访问cordova.file.*（例如cordova.file.dataDirectory）下的位置，我建议使用resolveLocalFileSystemURL，这是大多数时候（如果不是总是），**如果**您**需要**访问文件系统的根目录。

 **这也节省了一些代码行并且更具可读性：

```
deleteFolder(fileName: string) {
    const uri = `${cordova.file.dataDirectory}${fileName}`;
    window.resolveLocalFileSystemURL(uri, (dirEntry: DirectoryEntry) => {
        dirEntry.removeRecursively(
            () => console.log('successfully deleted the folder and its content'),
            e => console.error('there was an error deleting the directory', e.toString())
        )
    });
} 
```

这里有一个等待的版本：

```
deleteFolder(fileName: string): Promise<void> {
    const promise = new Promise<void>((resolve, reject) => {
        const uri = `${cordova.file.dataDirectory}${fileName}`;
        window.resolveLocalFileSystemURL(uri, (dirEntry: DirectoryEntry) => {
            dirEntry.removeRecursively(() => resolve(), e => reject(e));
        }, e => reject(e));
    });
    return promise;
} 
```**

# ios6 - 地图视图只添加一个注解

> ID：13355649
> 
> 赞同：0
> 
> 时间：2012-11-13T04:36:17.427
> 
> 标签：ios6, mkmapview, mkannotation, mkannotationview

我不知道我有可变数组，好的 mkannotation 它只添加一个，最后一个是我的代码

[代码 http://web.missouri.edu/~dnk6y2/Screen%20Shot%202012-11-12%20at%2011.46.05%20PM.png](http://web.missouri.edu/~dnk6y2/Screen%20Shot%202012-11-12%20at%2011.46.05%20PM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:49:13.673

您正在向数组添加`kAnnotations`（顺便说一下，名字不好。这种名称`kName`通常用于常量）`contacts`，然后更改其值并再次添加。但它仍然是同一个对象。每次更改`kAnnotations`坐标和平铺时，您也在更改`contacts`数组中的坐标。每次都需要像这样创建一个新的 kAnnotation

```
CustomAnnotation *customAnno = [[CustomAnnotation alloc] init;
customAnno.coorindate = coord;
customAnno.title = name;
[contacts addObject:customAnno]; 
```

# c# - 如何在 wpf 中自定义文件对话框

> ID：13355650
> 
> 赞同：1
> 
> 时间：2012-11-13T04:36:18.883
> 
> 标签：c#, .net, wpf, winforms, wpf-controls

在 Windows7 中，我使用自定义的打开文件对话框（WPF 应用程序）。我的打开文件对话框源自`Microsoft.Win32.CommonDialog`. 对话框具有旧外观，如何将其更改为新外观（windows7 文件对话框外观（资源管理器样式））。

代码部分：

```
private const int OFN_ENABLESIZING = 0x00800000;
private const int OFN_EXPLORER = 0x00080000;
private const int OFN_ENABLEHOOK = 0x00000020;       
protected override bool RunDialog(IntPtr hwndOwner)
{
    OPENFILENAME_I.WndProc proc = new OPENFILENAME_I.WndProc(this.HookProc);
                    OPENFILENAME_I ofn = new OPENFILENAME_I();
    this._charBuffer = CharBuffer.CreateBuffer(0x2000);
    if (this._fileNames != null)
    {
         this._charBuffer.PutString(this._fileNames[0]);
    }
    ofn.lStructSize = Marshal.SizeOf(typeof(OPENFILENAME_I));
    ofn.hwndOwner = hwndOwner;
    ofn.hInstance = IntPtr.Zero;
    ofn.lpstrFilter = MakeFilterString(this._filter, this.DereferenceLinks);
    ofn.nFilterIndex = this._filterIndex;
    ofn.lpstrFile = this._charBuffer.AllocCoTaskMem();
    ofn.nMaxFile = this._charBuffer.Length;
    ofn.lpstrInitialDir = this._initialDirectory;
    ofn.lpstrTitle = this._title;
    ofn.Flags =  OFN_EXPLORER | OFN_ENABLESIZING | OFN_ENABLEHOOK;
    ofn.lpfnHook = proc;
    ofn.FlagsEx = 0x1000000 ;    
    NativeMethods.GetOpenFileName(ofn); // 
 }

[SecurityCritical, SuppressUnmanagedCodeSecurity, DllImport("comdlg32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
internal static extern bool GetOpenFileName([In, Out] OPENFILENAME_I ofn); 
```

# mysql - 如何获取mysql中表中值不存在的所有行

> ID：13355652
> 
> 赞同：1
> 
> 时间：2012-11-13T04:36:23.470
> 
> 标签：mysql, sql

好吧，我真的被困住了。我有三个表如下：

表**合约**

```
contract_id  |  hotel_id  |  start    |    end
---------------------------------------------------
    1              356     2012-12-12   2012-12-16   
    2              258     2012-12-12   2012-12-16   
    3              211     2012-12-12   2012-12-16 
```

表**hotel_info**

```
hotel_id  |  hotel_desc
------------------------------
   356           description 1
   258           description 2
   211           description 3 
```

表率**_**

```
contract_id  |  hotel_id  |  book_date  |   rate   |   closed  
--------------------------------------------------------------
     1            258       2012-12-12     250.00        1
     1            258       2012-12-13     250.00        0
     1            258       2012-12-14     250.00        1
     1            258       2012-12-15     250.00        1 
```

现在我要做的是从用户输入的特定日期范围内的合同表中检索所有行。如您所见，费率表按每个日期分开。如果与它们相关的费率为 0，我不想返回任何行。因此，例如，如果我想获得 2012 年 12 月 14 日和 2012 年 12 月 15 日之间日期的费率，我会得到一个结果。但是，如果我搜索 2012-12-12 到 2012-12-14 我没有得到结果。我不知道这是否令人困惑，但这是我目前拥有的 mysql，但它不起作用：

```
SELECT r.*, c.* FROM contracts AS c
INNER JOIN hotel_info AS r ON r.hotel_id = c.hotel_id
INNER JOIN rates AS ra ON ra.contract_id = c.contract_id AND ra.closed != 0
WHERE c.start <= '2012-12-12' AND c.end >= '2012-12-16' GROUP BY r.room_name 
```

对此的任何帮助将不胜感激！如果我遗漏了什么，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:46:12.687

如果我正确理解这一点，您只想在为合同指定的日期范围内的相关费率记录范围内的费率为 1 时返回数据。我认为 using`NOT EXISTS`可能会满足您的需求。

```
SELECT r.*, c.* FROM contracts AS c
    INNER JOIN hotel_info AS r ON r.hotel_id = c.hotel_id
    INNER JOIN rates AS ra ON ra.contract_id = c.contract_id AND ra.closed != 0
WHERE c.start >= '2012-12-12' AND c.end <= '2012-12-16' 
    AND NOT EXISTS 
     (
         SELECT
             1
         FROM rates ira 
         WHERE ira.contract_id = ra.contract_id
             AND ira.rate = 0
     )
GROUP BY r.room_name 
```

# iphone - 从服务器 iOS 加载图像缓慢

> ID：13355653
> 
> 赞同：1
> 
> 时间：2012-11-13T04:36:33.747
> 
> 标签：iphone

我有表格视图和旋转封面流，我正在显示来自服务器的图像，但我的应用程序需要更多时间来加载图像。我进行 JSON 解析以获取图像。

帮助我如何从服务器快速加载图像。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:46:25.657

在这种情况下，您应该进行异步调用以下载这些图像。在异步下载每一行的图像时，UI 会更加灵敏。

这是Apple已经给出了相同的示例代码..

[这里是...！！！](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

这里有更多链接，它们演示了相同的任务。

[干得好。](https://github.com/nicklockwood/AsyncImageView#readme)

[这是相同的另一个链接。](http://www.markj.net/iphone-asynchronous-table-image/)

**编辑：这是一个有点相似的线程** [这里是..!!!](https://stackoverflow.com/questions/9763979/download-image-asynchronously)

我希望它可以帮助你。

# windows-8 - 在桌面应用程序中使用 MediaCapture 类

> ID：13355654
> 
> 赞同：1
> 
> 时间：2012-11-13T04:36:57.213
> 
> 标签：windows-8

我正在尝试使用 MediaCapture 类从 Windows 8 桌面应用程序中的网络摄像头捕获图像

是否可以在桌面应用程序中使用 MediaCapture 类？

[http://msdn.microsoft.com/en-US/library/windows/desktop/windows.media.capture.mediacapture](http://msdn.microsoft.com/en-US/library/windows/desktop/windows.media.capture.mediacapture)

底部显示支持桌面应用程序，但没有使用 C++/C# 的示例代码

如果可能的话，有人可以提供一些示例代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:52:05.017

我在命令行应用程序中使用 Win8 API (Windows.Management.Deployment.PackageManager) 取得了一些成功，但我目前没有任何明确的设置，因此它干净且可重现；)

我记得[这篇文章](http://software.intel.com/en-us/articles/using-winrt-apis-from-desktop-applications)很好地帮助了我。它有点过时，但原理保持不变：

*   将“Windows 应用商店应用支持”设置为 true
*   将 TargetPlatformVersion 标记添加到项目文件中
*   强制项目编译/链接到 Windows.winmd（iirc 需要将文件夹“C:\Program Files (x86)\Windows Kits\8.0\References\CommonConfiguration\Neutral\”添加到包含路径，/FU 开关对我不起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T06:35:25.657

给你

[http://blogs.msdn.com/b/eternalcoding/archive/2013/10/29/how-to-use-specific-winrt-api-from-desktop-apps-capturing-a-photo-using-your- webcam-into-a-wpf-app.aspx](http://blogs.msdn.com/b/eternalcoding/archive/2013/10/29/how-to-use-specific-winrt-api-from-desktop-apps-capturing-a-photo-using-your-webcam-into-a-wpf-app.aspx)

这也许就是你需要的！

# wpf - 模仿 Visual Studio 2012 的外观和感觉

> ID：13355656
> 
> 赞同：1
> 
> 时间：2012-11-13T04:37:11.127
> 
> 标签：wpf, user-interface, tabs, docking

我知道这是一个非常开放的问题，所以请耐心等待 - 有没有什么好的方法可以模仿 Visual Studio 2012[界面](http://blog.nuclex-games.com/wp-content/uploads/2012/06/visual-studio-2012-rc.png)的外观和感觉？我非常想模仿拖放功能以及设计的整体清洁度。

到目前为止，我了解[AvalonDock](http://avalondock.codeplex.com/)、[WPFMDI](http://wpfmdi.codeplex.com/)、SyncFusion 的[方法](http://www.syncfusion.com/products/user-interface-edition/wpf/tools)和 Infragistic 的[Dock Manager](http://www.infragistics.com/products/wpf/dock-manager/)。Infragistic 的方法看起来很像我想要的，但是 1）我不知道我是否可以在我[当前的项目](https://github.com/vermiculus/automata)中使用它们（许可等）和 2）我想知道（至少在高水平上） ) 关于它们的实际*工作*方式。任何人都可以阐明他们将如何解决这个问题吗？

我将发布我的思路作为初学者的答案。

* * *

**Visual Studio 的界面 (2012)** ![VS2012接口](../Images/03326322b07df18acfdd64b22f17ed73.png)

**阿瓦隆码头 2.0** ![阿瓦隆码头 2.0](../Images/0ef3d127e757dc34494c2f792db924f9.png)

**WPFMDI**（有点丑） ![WPF MDI](../Images/c9866416dadaed55ca403a85ac99fa4a.png)

**SyncFusion 的 Dock Manager**（非常*不*开源） ![SyncFusion 的 Dock Manager](../Images/30560e3f7d93aa92b6a87124ec718658.png)

最后**是 Infragistic 的对接管理器**（也是商业的） ![基础设施的](../Images/bc9ac329e4e47545a7a20faff31581af.png)

* * *

再次，VS2012 的模仿是目标——这些只是一堆已经尝试总体上完成这个目标的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:47:53.307

在我愚蠢的逻辑中，每个选项卡式界面实际上应该*是*一个选项卡。

当用户单击并将选项卡拖动到主要方向（水平选项卡为左/右，垂直为上/下）时，选项卡应更改其顺序以适应并且视图应保持不变。

但是，如果选项卡垂直于其主要方向拖动，则应该对选项卡进行快照，它应该缩小到其原始大小的 60% 左右，并且应该是去饱和/半透明的。当用户拖动它时，图像显然应该跟随。

当用户鼠标进入`TabContainer`（Canvas 的子类？页面？我不知道）的中心区域时，会弹出小叠加层以便于停靠。

如果用户将其拖到 a `TabBar`，它会将自身添加到该位置的适当位置`TabBar`（根据鼠标所在的位置等）。每个`TabContainer`人都有一个`TabBar`。

我在这个设计中无法弄清楚的是如何对标签进行分级并使其固定/浮动/自动隐藏/等。就像在 VS 中发生的那样。

# c# - 使用 XElement 解析 vcxproj - 无法检索内部导入

> ID：13355657
> 
> 赞同：0
> 
> 时间：2012-11-13T04:37:27.243
> 
> 标签：c#, xml, xelement

我正在尝试解析一个 vcxproj 文件，使用 - 我可以使用的任何方法（我尝试过 XPathDocument、XElement、XDocument ......没有任何效果）

典型项目配置：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Label="P">  ...  </ItemGroup>
  <ItemGroup>   <C I="..." />    </ItemGroup>
  <ItemGroup>   <C I="..." />    </ItemGroup>
  <ItemGroup>    ...  </ItemGroup>    
  <Import Project="aaaaa" />
  <PropertyGroup C="..." Label="...">  ... </PropertyGroup>  
  <Import Project="ooother" />
  <ImportGroup Label="E">  </ImportGroup>
  <ImportGroup Label="I_NEED_THIS" C="...">
    <Import Project="other" Condition="x" Label="L" />
    <Import Project="I_NEED_THIS_VALUE" />
  </ImportGroup>  
  <Import Project="bbbbb" />
  <ImportGroup Label="Ex">  </ImportGroup>
</Project> 
```

我正在尝试使用标签 I_NEED_THIS 从 ImportGroup 内部获取项目，我想获取所有项目并能够检查（如果有）它们的标签或条件......

我怀疑问题可能是有多个名称相似的元素，所以我尝试一次只获取一个级别，

```
XElement xmlTree = XElement.Load(projectPath);
XNamespace ns = "http://schemas.microsoft.com/developer/msbuild/2003";
List<XElement> projectElements = (
    from mainElement in xmlTree.Descendants(ns + "Project")
    from subElement in mainElement.Elements()
    select subElement
).ToList();

if (projectElements.Count == 0)
  MessageBox.Show("Nothing is working today"); 
```

上面，后面跟着几个 foreach 循环......

```
foreach (XElement projectElement in projectElements)
{
List<XElement> importElements = (
   from mainElement in projectElement.Descendants(ns + "ImportGroup")
   from subElement in mainElement.Elements()
   select subElement
).ToList();
...
} 
```

依此类推，但在测试第一个循环时，projectElements 的计数为 0...

我也试过没有命名空间......

我错过了什么？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:02:41.090

您可以摆脱对`Descendants`. 直接打电话`Elements`应该没问题。这是使用简单循环实现此目的的方法：

```
// we can directly grab the namespace, it's better than hard-coding it
XNamespace ns = xmlTree.Name.Namespace;
// xmlTree itself is the Project element, just to make sure:
Debug.Assert(xmlTree.Name.LocalName == "Project");

// the following is all elements named "ImportGroup" under "Project"
var importGroups = xmlTree.Elements(ns + "ImportGroup");
foreach(XElement child in importGroups)
{
    // the following are all "Import" elements under "ImportGroup" elements
    var imports = child.Elements(ns + "Import");
    foreach (var importElem in imports)
    {
        Console.WriteLine(importElem.Attribute("Project").Value);
    }
}

//This is the output:
//other
//I_NEED_THIS_VALUE 
```

或者，您可以使用以下代码，直接转到包含属性 value 的第二个元素`"I_NEED_THIS_VALUE"`：

```
var elems = xmlTree.Elements(ns + "ImportGroup")
    .Where(x => x.Attributes("Label").Any(xattr => xattr.Value == "I_NEED_THIS"))
        .Elements(ns + "Import")
        .Where(x => x.Attributes("Project").Any(xattr => xattr.Value == "I_NEED_THIS_VALUE")); 
```

# c# - 如何获取白库中某个窗口的窗口ID

> ID：13355663
> 
> 赞同：0
> 
> 时间：2012-11-13T04:37:56.333
> 
> 标签：c#, white-framework

我正在尝试从 White 框架中获取窗口 ID。我想将 id 存储在数据库中，然后再次附加到窗口。这是我正在使用的代码：

```
var psi = new ProcessStartInfo(_path);
_application = White.Core.Application.AttachOrLaunch(psi);
_window = _application.GetWindow(SearchCriteria.ByText(_title), InitializeOption.NoCache);
var id = _window.Id; 
```

如您所见 var id = _window.Id; 返回一个空值。你知道有什么方法可以引用窗口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T09:53:20.840

每次都使用窗口标题来获取窗口，使用标题与自动化 id 来查找窗口没有性能差异。

# php - wordpress 通过 ajax 传递 bloginfo

> ID：13355665
> 
> 赞同：0
> 
> 时间：2012-11-13T04:38:18.927
> 
> 标签：php, ajax, wordpress

我想通过ajax获取网站标题

我的 php 页面是，

```
if(isset($_POST['page']))
    {
    $page=$_POST['page'];
    $href = bloginfo('url');
    }
$output = array('siteurl' => $href);
$output = json_encode($output);
echo $output; 
```

但它返回空字符串，请告诉此代码有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:42:23.510

```
$href = bloginfo('url'); 
```

应该持有一个有效的网址。如果您在浏览器中输入“url”，您将无处可去:)

它应该看起来像

```
$href = bloginfo('http://www.addresstoawebsite.com/'); 
```

此外，您不能像这样回显 json，您必须使用`var_dump($output);`.

对于 a 上的整洁格式`var_dump`：

```
echo "<pre>";
var_dump($output);
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:16:48.193

我认为您的 ajax 脚本失败，因为没有加载 wordpress 核心就无法使用 bloginfo 函数。您可以包含“wp-load.php”文件以进行快速修复，但首选方法是使用 ajax 挂钩。

[http://codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)

也`bloginfo('url');`将回显该值，`get_bloginfo('url');`而不是用于返回该值。 [http://codex.wordpress.org/Function_Reference/get_bloginfo](http://codex.wordpress.org/Function_Reference/get_bloginfo)

# ios - 了解 [UIView animateWithDuration:completion:] 的完成块

> ID：13355671
> 
> 赞同：2
> 
> 时间：2012-11-13T04:38:49.757
> 
> 标签：ios, uiview, uipangesturerecognizer

我试图理解`UIView animateWithDuration:completion`。我想要做的是将一个 UIView 拖到另一个 UIView 中。如果它们相交，则将拖动的 UIView 的 alpha 设置为 0，然后将拖动的 UIView 重置为其原始位置。这个想法是将项目拖放到存储桶中。首先，我只是将 alpha 设置为 0，然后将其重置。这是我用于拖动视图的平移手势识别器的代码：

```
else if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        // Update the description view
        if (CGRectIntersectsRect(panViewPiece.frame, _descriptionView.frame)) {
            [UIView animateWithDuration:0.25 animations:^{
                self.dragDescriptionView.alpha = 0.0;
            }completion:^(BOOL finished) {
                if (finished) {
                    panViewPiece.center = _dragDescriptionViewOriginalCenter;
                    self.dragDescriptionView.alpha = 1.0;
                }
            }];
            [self updateDescriptionView];
        }
} 
```

所以我认为完成块的工作方式是当第一个 animateWithDuration 完成时，将调用完成块。所以我试图在第一部分将 alpha 设置为 0，然后一旦完成，将 panViewPiece 放回其原始位置并将其 alpha 设置为 1。发生在矩形相交后，alpha 变为 0然后回到 1，因为它突然回到原来的中心。我不希望视图在弹回其原始位置时可见。我是否正确理解了完成块？或者这不是它的工作方式？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:11:00.963

我不太清楚你所看到的 - 淡入到 alpha 0 工作正常，但是你说它在返回到原始位置之前再次可见？它是动画回到可见还是动画回到原来的位置？

如果它只是出现，然后突然回到正确的位置，那么我的猜测是其他一些代码（在你的问题中没有显示）在你的动画块完成之前将 alpha 设置回 1 - 你确实意识到 UIView块动画调用是异步的，所以下面的代码将在动画执行之前或期间执行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:48:49.333

在完成块中，您将 dragDescriptionView 的 alpha 设置回 1.0，然后将其设置为 0.0。那是你要的吗？在您的问题中，听起来您希望 panViewPiece 的 alpha 为 1.0，但这不是您的代码所做的。

# jakarta-mail - IMAP messageChangedListener() 没有被解雇

> ID：13355674
> 
> 赞同：5
> 
> 时间：2012-11-13T04:39:13.403
> 
> 标签：jakarta-mail

我正在使用 java 邮件 API 实现 IMAP 客户端。我想要的是收到有关邮件计数和对邮件所做的更改（已读/未读等）的通知。为此，我为打开的 IMAP 文件夹编写了两个侦听器，如下所示：

```
IMAPStore imapStore = (IMAPStore) session.getStore("imaps");
        imapStore.connect();

final IMAPFolder folder = (IMAPFolder) imapStore.getFolder("Inbox");
        folder.open(IMAPFolder.READ_WRITE);

folder.addMessageCountListener(new MessageCountListener() {

            public void messagesAdded(MessageCountEvent e) {
                System.out.println("Message Count Event Fired");
            }

            public void messagesRemoved(MessageCountEvent e) {
                System.out.println("Message Removed Event fired");
            }
        });

folder.addMessageChangedListener(new MessageChangedListener() {

            public void messageChanged(MessageChangedEvent e) {
                System.out.println("Message Changed Event fired");
            }
        }); 
```

我在一个单独的线程中将 IMAP IDLE 命令发送到服务器，如下所示。

```
Thread t = new Thread(new Runnable() {

            public void run() {
                try {
                    while (true) {
                        folder.idle();
                    }
                } catch (MessagingException ex) {
                    //Handling exception goes here
                }
            }
        });

        t.start(); 
```

但问题是，每当有新邮件或邮件被删除时，“MessageCountListener”就会被触发。但是当发生邮件更改时，“MessageChangedListener”不会被触发。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T07:24:53.570

JavaMail 依赖于服务器来发送通知。IMAP 规范在服务器何时或是否发送通知方面提供了相当大的灵活性。更不用说有些服务器不完全符合 IMAP 规范。您可以打开会话调试并检查协议跟踪以查看服务器是否正在发送任何通知。

你用的是什么服务器？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-16T07:43:26.533

最后我得到了解决方案。

对于 Gmail 帐户。您需要在 Gmail 设置页面中设置**“开启新邮件通知” 。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T07:23:07.043

此页面有助于理解问题： [https ://bugzilla.mozilla.org/show_bug.cgi?id=544439](https://bugzilla.mozilla.org/show_bug.cgi?id=544439)

# java - java打印出类语句

> ID：13355676
> 
> 赞同：1
> 
> 时间：2012-11-13T04:39:23.780
> 
> 标签：java, class, printing

我是java新手，我有一个简单的问题，我有这个代码

```
public abstract class Seq { int a, b, c;}

class For extends Seq{
public For( int first, int last, int step )
{
a=first;
b=last;
c=step;
} 
```

主要我有：

```
For r1= new For(3, 4, 5); 
```

我想要做的是我想在 main 中添加这个语句，`System.out.print(r1);` 我希望这个语句打印“你的参数：3、4、5”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T04:41:58.750

添加一个`toString`方法`For`为：

```
@Override
public String toString(){
    return "your parameters: "+ a + ", "+ b+ ", "+c;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T04:42:40.810

您可以通过实现`For`类的`toString`方法来做到这一点：

```
public String toString ( )
{
    return "your parameters: " + a + ", " + b + ", " + c;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:42:40.150

您必须重写该`toString()`方法并创建另一个打印出`r1`.

```
@Override
public String toString(){
    return a + ", " + b + ", " + c;
} 
```

那么它很简单：

`System.out.println("Your parameters: " + r1.toString());`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T04:56:40.547

来自[Java Doc for String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString%28%29)

> 返回对象的字符串表示形式。通常，toString 方法返回一个“以文本方式表示”该对象的字符串。结果应该是一个简洁但信息丰富的表示，易于人们阅读。建议所有子类重写此方法。

因此，如果你想要你的对象表示，那么你必须在你的类`For`中重写，如下所示：`toString()`

```
class For extends Seq{
  public For( int first, int last, int step )
   {
     a=first;
     b=last;
     c=step;
   }
 @Override
 public String toString(){
    return "your parameters: "+ a + ", "+ b+ ", "+c;
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T01:45:56.240

制作一个返回的公共字符串

```
return a + ", " + b + ", " + c; 
```

# sql - 疯狂的日期时间值在 SQLite 中存储为奇怪的浮点数

> ID：13355677
> 
> 赞同：1
> 
> 时间：2012-11-13T04:39:30.397
> 
> 标签：sql, sqlite, datetime, types, puzzle

好吧，我不指望任何人能够弄清楚这一点，但也许我太悲观了？

我正在阅读由很棒的音乐播放器[AIMPv3](http://www.aimp.ru/)生成的 SQLite 数据库，但它使用一些奇怪*的*东西来存储播放、添加歌曲等的日期。

所以这是桌子。如果需要，我可以提供更多。你能破解这个密码吗？！

```
 English             |      Stored As
------------------------------+-----------------
Date      2011.02.24 14:21:54 | 40598.5985614005
------------------------------+------------------
Date      2011.02.24 14:22:38 | 40598.5990576852
------------------------------+------------------
Date      2011.04.28 08:56:30 | 40661.3725871875
------------------------------+------------------
Date      2011.04.28 09:02:06 | 40661.3764806134
------------------------------+------------------
Date      2012.11.09 15:55:12 | 41222.663348912
------------------------------+------------------ 
```

任何有关此问题的帮助将*不胜*感激！我也收集了各种各样的数据，所以请不要犹豫，要求提供额外的测试数据。

* * *

**编辑：**这是我用来将 Excel 日期时间转换为 Epochs 的 PHP 函数：

```
function convertFromExcelDateTimeToEpoch($excelDateTime)
{
    $d = floor($excelDateTime);
    $t = $excelDateTime - $d;
    return (abs($d) > 0) ? ( $d - 25569 ) * 86400 + $t * 86400 : $t * 86400;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T04:48:42.473

持续时间为毫秒。

日期是自 1900 年 1 月 1 日以来的（小数）天数。

# actionscript-3 - 从阶段和组中完全删除未命名的实例

> ID：13355681
> 
> 赞同：0
> 
> 时间：2012-11-13T04:40:34.463
> 
> 标签：actionscript-3, instance, destroy, removechild

所以我有一堆电影剪辑“水果”的实例。他们都是无名的。

我将它们添加到一个名为“fruitGroup”的母亲电影剪辑中。

代码应该做的是当任何水果实例被点击时，播放它的动画，并*永远*销毁它。

它运行良好，直到您的鼠标悬停在先前被破坏的水果的坐标上。水果突然恢复存在！

```
fruitGroup.addEventListener(MouseEvent.MOUSE_OVER,fruitOver);
fruitGroup.addEventListener(MouseEvent.CLICK,fruitclick);
fruitGroup.mouseEnabled = false;

function fruitOver(e:MouseEvent)
{
    e.target.play();

}
function fruitclick(e:MouseEvent)
{
    e.target.gotoAndPlay(82);
    if (e.target._currentframe==100)
    {
        e.target.removeChild(e.target);
    }

} 
```

编辑：我并没有真正澄清我的设置。除了fruitGroup 和我的CLICK 侦听器之外，我的设置还有两件事。基本符号有 100 帧。1-81 是鼠标悬停时播放的摆动动画，82-100 是单击时播放的淡出动画。也许破坏应该发生在第 100 帧的基本符号内部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:00:53.767

你应该做两件事。首先，您必须为单击的其中一个水果添加一个 Event.ENTER_FRAME 侦听器，以使其在其 currentFrame 变为 100 时处理该事件，其次，要删除正在播放的水果，您必须这样做：

```
e.target.parent.removeChild(e.target);
e.target.removeEventListener(Event.ENTER_FRAME,yourFunction); 
```

请注意`parent`参考，您必须检查是否有父母，否则您会遇到问题。

编辑：好的，让我澄清一下答案。你保留你的 MouseEvent.CLICK 监听器，但是让它像这样：

```
fruitGroup.addEventListener(MouseEvent.CLICK,fruitclick);
function fruitclick(e:MouseEvent)
{
    if (e.target is Fruit) {
        e.target.gotoAndPlay(82);
        if (!e.target.hasEventListener(Event.ENTER_FRAME)) 
            e.target.addEventListener(Event.ENTER_FRAME,endPlay);
    }
} 
```

然后你像这样添加一个 ENTER_FRAME 监听器：

```
function endPlay(e:Event):void 
{
    if (e.target._currentframe==100)
    {
        e.target.parent.removeChild(e.target);
        e.target.removeEventListener(Event.ENTER_FRAME,endPlay);
    }
} 
```

此代码仍可以驻留在主时间轴上，也可以位于任何`fruitGroup`有权启动点击监听的类中。

这是如何工作的：当你点击一个水果时，该函数`fruitClick`被调用，事件的目标设置为点击的水果。我们现在有了参考 - 很好，现在我们为它分配一个监听器并让它播放你想要的动画。监听器激活每一帧，事件的目标是相同的水果，一旦`currentFrame`达到 100，我们调用它的父级来释放自己的水果（它很可能是`fruitGroup`，但如果不是，这不会给出错误） ，并删除现在已过时的侦听器。

# linux - crontab 运行 wget 命令

> ID：13355682
> 
> 赞同：1
> 
> 时间：2012-11-13T04:41:08.180
> 
> 标签：linux, ubuntu, wget, crontab

我使用像这样的 crontab：

```
00 */1 * * * wget http://www.test.com/cron/archieve 
```

我想知道在`> /dev/null 2>&1`命令末尾使用的区别，以及是否推荐。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T05:18:29.010

如果您不添加`> /dev/null 2>&1`，该命令的输出将通过邮件发送给运行该 cron 作业的用户 - 可能是您。

我想您不想被 cron 作业发送垃圾邮件 - 但这取决于您

**编辑**：解释`> /dev/null 2>&1`真正的意思。

有 3 个标准文件描述符：0 (stdin)、1 (stdout) 和 2 (stderr)。 `> file`与 相同`1> file`，换句话说，重定向 std。文件描述符 1 (stdout) 到文件。

`2>&1`意味着重定向标准。文件描述符 2 (stderr) 到重定向 1 (stdout) 的相同位置。

最后，`> /dev/null 2>&1`手段的全部效果将 stdout 和 stderr 都重定向到`/dev/null`，换句话说，使该程序完全静默

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:08:52.263

`> /dev/null 2>&1`如果结果对您无关紧要，您可以重定向 stdio/stderr 流。看一些例子：

```
alex@work:~/dev$ ls
arm-2011.03-42-arm-none-eabi.bin  linux
backup_from_ak                    linux-3.4.6.tar.bz2
bc-1.06                           linux.tar.gz                 
CodeSourcery                      mach-lpc32xx                               
alex@work:~/dev$ ls > /dev/null 2>&1
alex@work:~/dev$ 
```

# c# - 如何删除 linq 查询中的可重复项

> ID：13355684
> 
> 赞同：3
> 
> 时间：2012-11-13T04:41:23.027
> 
> 标签：c#

```
listOrders.DataSource = (from sp in dbdata.Specifications
                         join ord in dbdata.Orders on sp.O_id equals ord.O_id
                         join prd in dbdata.Products on ord.O_id equals prd.O_ID
                         where sp.Approve == "Yes" && 
                         sp.Awailable_BOM == "Yes" && 
                         prd.Hours_prd == null
                         orderby sp.O_id descending
                         select sp.O_id).Distinct(); 
```

在这里，我试图获得降级的价值。但它总是得到递增的值。如果我删除“Distinct()”它可以正常工作，但在添加“Distinct()”后会出现此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:52:28.297

尝试这个：

```
listOrders.DataSource = (from sp in dbdata.Specifications
                         join ord in dbdata.Orders on sp.O_id equals ord.O_id
                         join prd in dbdata.Products on ord.O_id equals prd.O_ID
                         where sp.Approve == "Yes" && 
                         sp.Awailable_BOM == "Yes" && 
                         prd.Hours_prd == null
                         select sp.O_id).Distinct().OrderByDescending(); 
```

# javascript - Javascript 包含 django 标签

> ID：13355687
> 
> 赞同：0
> 
> 时间：2012-11-13T04:41:47.207
> 
> 标签：javascript, ajax, django

```
<script>

 //Handle the callback on success

 function stateChange(){

    if (xmlHttp.readyState==4 && xmlHttp.status==200) {

    //request is successful. So retrieve the values in the response
    var display_language = xmlHttp.responseText.split(';');
    alert("response: " + display_language);

    var newHtml = '{% for chunk in video.chunks.all %} {% for c in chunk.chunklets.all%} <tr> <td>{{c.start}}</td> <td> {% spaceless %} {%for item in c.contents.all%}{%if item.lang ==  display_language %}{{item.text.strip}}{%endif%}{%endfor%} {% endspaceless %} </td> <td>{{c.finish}}</td> </tr> {%endfor%} {%endfor%}';

    $('#xxx').html(newHtml);
    }
}
</script> 
```

如果我使用上面的代码，则 display_language 值为空。但是 alert 可以打印 display_language 的值。只是 display_language 不能传入 newHtml。

如果改为

```
var newHtml = '{% for chunk in video.chunks.all %} {% for c in chunk.chunklets.all%} <tr> <td>{{c.start}}</td> <td> {% spaceless %} {%for item in c.contents.all%}{%if item.lang ==';

newHtml +=  display_language +'%}{{item.text.strip}}{%endif%}{%endfor%} {% endspaceless %} </td> <td>{{c.finish}}</td> </tr> {%endfor%} {%endfor%}'; 
```

错误是“”无效的块标签：'endif'，预期的'empty'或'endfor'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:55:48.173

您试图过多地混合 Javascript 和 Django 模板。请记住，首先运行所有 Django，然后运行所有 javascript。因此，由于该`display_language`值是在 Javascript 中创建的，因此您不能在 Django 模板中使用它。我建议您将所有数据传递给 Javascript，然后在纯 javascript 中构造您的 newHtml 值。

# jquery - 列表的jquery移动混合数据角色？

> ID：13355693
> 
> 赞同：1
> 
> 时间：2012-11-13T04:42:37.653
> 
> 标签：jquery, jquery-mobile

使用 jQuery Mobile，是否可以有一个混合列表？即3项列表。前 2 个是可折叠的，而最后一个是列表视图？

我知道我可以创建两个不同的 div。一个处理可折叠项，另一个处理 listview（listview li 项是外部链接）。但我希望在 UI 中将三个列表项组合在一起（所以它看起来并不完全分开）。

这可能吗？

# css - 以意外的高度呈现，并在为空时破坏布局

> ID：13355694
> 
> 赞同：0
> 
> 时间：2012-11-13T04:42:39.623
> 
> 标签：css, layout, html, height

上下文：这是我正在处理的 wordpress 主题的输出 html。

布局看起来一切都很好，直到我检查了`<div id="foot">`（页脚），我意识到它的高度是整个页面，我期待它只是它的内容的大小。

[在这里](http://jsfiddle.net/aRguA/4/embedded/result/)看到它（[代码](http://jsfiddle.net/aRguA/4/light/)）。

尝试调试问题时，我意识到如果我删除了 div 的内容或删除了 div，它会破坏其余的设计，这是为什么呢？

[在这里](http://jsfiddle.net/aRguA/5/embedded/result/)看到它（[代码](http://jsfiddle.net/aRguA/5/light/)）。

我期待页脚 ( `<div id="foot">`) 是它的内容的高度，如果我在之后添加另一个 div 这似乎工作正常`#foot`：

[在这里](http://jsfiddle.net/aRguA/6/embedded/result/)看到它（[代码](http://jsfiddle.net/aRguA/6/light/)）。

我不确定为什么删除`#foot`会弄乱其他内容，也不确定为什么`#foot`会以高度（到页面顶部）呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:53:29.527

我现在明白你的问题了。你有一个浮点数，但脚 div 没有清除它。

你需要添加...

```
clear: both; 
```

...或者...

```
clear: left; 
```

...到`#foot`CSS 以清除其上方的左浮动。否则内容将环绕您的页脚。

这是您的[jsFiddle](http://jsfiddle.net/aRguA/7/)的更新，显示脚处于正确位置。

旁注，我相信您还没有关闭所有 div 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:02:20.747

好的，现在我明白了您的实际要求，我希望其他人澄清您的实际要求，这是一个问题`floats`，我改变了背景，我意识到这里的实际情况是什么

[**演示**](http://jsfiddle.net/aRguA/10/)

[**解决演示**](http://jsfiddle.net/aRguA/9/)

只需在 div 上方添加此行`footer`即可清除浮动，只需使用红色来显示差异

```
<div style="clear: both;"></div>
  <div id="foot">
    footer
  </div> 
```

# c - 在混合 MPI/OpenMP 程序中使用 MPI I/O

> ID：13355704
> 
> 赞同：2
> 
> 时间：2012-11-13T04:43:59.073
> 
> 标签：c, performance, io, mpi, openmp

我正在将现有的 MPI 代码转换为混合 MPI/OpenMP 以解决性能和可伸缩性问题。在原始 MPI 代码中，我使用了集体 MPI I/O（特别是 MPI_File_write/read_at_all），现在我将其转换为混合模式，我不知道如何在不损失性能的情况下使用 I/O。我目前使用的系统有多个 32 核的节点，我的计划是每个节点运行 1 个 MPI 进程，每个节点内运行 32 个线程。系统和编译器 (PGI) 支持 MPI_THREAD_MULTIPLE 并具有基于 Lustre 的并行文件系统。我的代码是这样的：

```
#include "mpi.h"
#include "omp.h"
#define NTHREADS 32
int main()
{
    int provided;
    int myrank,numproc,tid;
    double b[BIGSIZE]={0.};
    int iter,i;

    MPI_Init_thread( 0, 0, MPI_THREAD_MULTIPLE, &provided );
    omp_set_num_threads(NTHREADS);

    /* Initialize b */

    #pragma omp parallel private(i,some variables)\
                         shared(b and some other stuffs)\
                         default(none)
    {
        /* Inside each thread: */
        for (i=0;i<iter;i++)
        {
            /* each thread of each process do work on few elements of variable b */
            /* 2 threads do less work and communicate with the other processes  */
            /* Write the variable b's of all MPI processes in one file */
            /* b is actually divided between MPI processes and then is divided
               between threads inside each process, so the work is distributed */
            /* write operation MUST be complete before the next iteration starts */
        }
    }
    MPI_Finalize();
    return 0;
} 
```

现在我的问题是如何处理写入部分以获得最佳性能，我是一名机械工程师，所以不熟悉可能的解决方案。在开始研究之前，我想看看是否有类似案例的标准方法，我的想法是：

1.  在每个线程中使用 MPI_File_write_at 并忘记集体版本，（我不确定这是否真的正确，我可以使用 MPI_Barrier 和 omp_barrier 等待完成吗？），我将如何定义文件指针？私有的还是共享的？
2.  在主指令的主线程中使用 MPI_File_write_at_all 并使用屏障保持其余线程空闲。
3.  还有其他可能的方式吗？

代码的性能和可扩展性对我来说真的很重要，我需要你们的帮助！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:02:21.983

我认为您过早地针对您可能没有的问题进行了优化。

首先使计算与 OpenMP 并行，坚持一些 OpenMP 障碍并像以前一样继续执行 IO。

对代码进行基准测试/计时，如果 IO 成为性能的一大障碍，请尝试优化。您可能会发现您建议的内容实际上比集体版本的性能更差。无论哪种方式，在优化之前对您当前的性能进行量化处理。

如果您迫切需要速度，您可以做的最快和最简单的事情之一就是将每个线程写入一个单独的文件，然后在后处理中合并这些文件。我觉得这很hacky，所以将它作为最后的手段。

# vb.net - 我需要更好地理解我的 if 语句

> ID：13355706
> 
> 赞同：4
> 
> 时间：2012-11-13T04:44:06.263
> 
> 标签：vb.net

```
Private Sub WebBrowser1_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
    Dim PageInput As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("input")
    For Each elem As HtmlElement In PageInput
        If elem.GetAttribute("name") = "wdf_origin" Then
            elem.SetAttribute("value", FromTXT.Text)
        End If
        If elem.GetAttribute("name") = "wdf_destination" Then
            elem.SetAttribute("value", ToTXT.Text)
        End If
        If RadioButton1.Checked = True Then
            elem.GetAttribute("id") = "oneway" Then
            elem.SetAttribute("checked", RadioButton1.Checked) Then
            elem.GetAttribute("id") = "wdfdate1" Then
            elem.SetAttribute("value", DateTimePicker1.Text)
        End If
        If RadioButton2.Checked = True Then
            elem.GetAttribute("id") = "return" Then
            elem.SetAttribute("checked", RadioButton2.Checked) Then
            elem.GetAttribute("id") = "wdfdate1" Then
            elem.SetAttribute("value", DateTimePicker1.Text) Then
            elem.GetAttribute("id") = "wdfdate2" Then
            elem.SetAttribute("value", DateTimePicker2.Text)
        End If
    Next

    Dim PageInput2 As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("select")
    For Each elem As HtmlElement In PageInput2
        If elem.GetAttribute("id") = "adults" Then
            elem.SetAttribute("value", AdultsTXT.Text)
        End If
        If elem.GetAttribute("id") = "children" Then
            elem.SetAttribute("value", ChildrenTXT.Text)
        End If
        If elem.GetAttribute("id") = "infants" Then
            elem.SetAttribute("value", InfantsTXT.Text)
        End If
        If RadioButton1.Checked = True Then
            elem.GetAttribute("id") = "wdftime1" Then
            elem.SetAttribute("value", Time1TXT.Text)
        End If
        If RadioButton2.Checked = True Then
            elem.GetAttribute("id") = "wdftime2" Then
            elem.SetAttribute("value", Time2TXT.Text) Then
            elem.GetAttribute("id") = "wdftime1" Then
            elem.SetAttribute("value", Time1TXT.Text)
        End If
    Next
End Sub 
```

目前，我收到此错误

> 表达式是一个值，因此不能作为赋值的目标

线上`elem.GetAttribute(" ")`。连同它说，它预计该声明将在某些`Then`s 上结束。我不能在 if 语句中设置某些方法，以便它们包含某些文本框吗？我试图让`RadioButtons`发送某些文本框取决于`RadioButton`选择哪个。

任何建议或资源都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:11:02.607

您需要确保每个 Then 都有一个对应的 If，看起来您实际上需要使用[`AndAlso`](http://msdn.microsoft.com/en-us/library/cb8x3kfz.aspx)and[`ElseIf`](http://msdn.microsoft.com/en-us/library/752y8abs%28v=VS.71%29.aspx)运算符来执行您想要的操作。您收到“表达式是一个值，因此不能成为赋值目标”错误的原因是因为缺少 If 语句，您正试图将值分配给您的 GetAttribute。

看看这是否更适合您。

```
Private Sub WebBrowser1_DocumentCompleted(sender As System.Object, e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
    Dim PageInput As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("input")
    For Each elem As HtmlElement In PageInput
        If elem.GetAttribute("name") = "wdf_origin" Then
            elem.SetAttribute("value", FromTXT.Text)
        End If
        If elem.GetAttribute("name") = "wdf_destination" Then
            elem.SetAttribute("value", ToTXT.Text)
        End If
        If RadioButton1.Checked then
            If elem.GetAttribute("id") = "oneway" Then
                elem.SetAttribute("checked", CStr(RadioButton1.Checked))
            ElseIf elem.GetAttribute("id") = "wdfdate1" Then
                elem.SetAttribute("value", DateTimePicker1.Text)
            End If
        End If

        If RadioButton2.Checked then
            If elem.GetAttribute("id") = "return" Then
                elem.SetAttribute("checked", RadioButton2.Checked.ToString)
            ElseIf elem.GetAttribute("id") = "wdfdate1" Then
                elem.SetAttribute("value", DateTimePicker1.Text)
            ElseIf elem.GetAttribute("id") = "wdfdate2" Then
                elem.SetAttribute("value", DateTimePicker2.Text)
            End If
        End If

    Next

    Dim PageInput2 As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("select")
    For Each elem As HtmlElement In PageInput2
        If elem.GetAttribute("id") = "adults" Then
            elem.SetAttribute("value", AdultsTXT.Text)
        End If
        If elem.GetAttribute("id") = "children" Then
            elem.SetAttribute("value", ChildrenTXT.Text)
        End If
        If elem.GetAttribute("id") = "infants" Then
            elem.SetAttribute("value", InfantsTXT.Text)
        End If
        If RadioButton1.Checked AndAlso elem.GetAttribute("id") = "wdftime1" Then
            elem.SetAttribute("value", Time1TXT.Text)
        End If
        If RadioButton2.Checked Then
            If elem.GetAttribute("id") = "wdftime2" Then
                elem.SetAttribute("value", Time2TXT.Text)
            ElseIf elem.GetAttribute("id") = "wdftime1" Then
                elem.SetAttribute("value", Time1TXT.Text)
            End If
        End If
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:59:46.380

有一些语法错误。你应该有一个`If`before every `Then`，就像你在第一个一样。我不确定您所追求的逻辑是什么，但是如果需要，您可以在表达式之间使用`and`or ，或者您可以将一个块嵌套在另一个块中。`or``If` `End If`

# android - Android 填充 ListView 和从数据库填充的文本过滤器

> ID：13355707
> 
> 赞同：0
> 
> 时间：2012-11-13T04:44:14.477
> 
> 标签：android, arrays, listview, text, filter

我花了三天多的时间思考这个问题。我想制作一个从数据库填充的列表视图。这里的问题可能在于如何将 ArrayList 转换为 String[]。results 是 ArrayList，SearchQueries 是字符串数组。

```
public class SearchActivity extends ListActivity {

EditText search_box;
ListView customList;

private ArrayList<String> results = new ArrayList<String>();
private String tableName = DatabaseHandler.TABLE_SEARCH;
private SQLiteDatabase newDB;

ArrayList<String> searched_list;
String[] SearchQueries;

@SuppressWarnings("unchecked")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.page_search);

    DatabaseHandler dbHelper = new DatabaseHandler(this.getApplicationContext());
    newDB = dbHelper.getWritableDatabase();
    Cursor c = newDB.rawQuery("SELECT skeys FROM " +
            tableName, null);
    if (c != null ) {
        if  (c.moveToFirst()) {
            do {
                String skeys = c.getString(c.getColumnIndex("skeys"));
                results.add(skeys);
            }while (c.moveToNext());
        } 
    }           

    SearchQueries = (String[]) results.toArray();

    Collections.shuffle(Arrays.asList(results));
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            getApplicationContext(), R.layout.listviews_search, SearchQueries);

    customList.setAdapter(adapter);

    customList.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Toast.makeText(getApplicationContext(), ((TextView) view).getText(), Toast.LENGTH_SHORT).show();

        }
    });

    search_box.setVisibility(View.VISIBLE);
    searched_list = new ArrayList<String>();
    search_box.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

            int length = search_box.getText().length();
            searched_list.clear();

            for (int i = 0; i < SearchQueries.length; i++) {
                if (length <= SearchQueries.length) {
                    if (search_box.getText().toString().equalsIgnoreCase((String)SearchQueries[i]
                            .subSequence(0, length))) {
                        searched_list.add(SearchQueries[i].toString());
                    }
                }
            }

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                    getApplicationContext(),
                    R.layout.listviews_search, searched_list);
            customList.setAdapter(adapter);
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
        }
    });
    }       
 } 
```

最后，我用一个更简单的代码解决了这个问题，这里的代码供那些遇到同样问题的人参考：

解决方案：

```
public class SearchActivity extends ListActivity {
ArrayAdapter<String> dataAdapter = null;

private ArrayList<String> results = new ArrayList<String>();
private String tableName = DatabaseHandler.TABLE_SEARCH;
private SQLiteDatabase newDB;
ArrayAdapter<String> adapter = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.page_search);

    DatabaseHandler dbHelper = new DatabaseHandler(this.getApplicationContext());
    newDB = dbHelper.getWritableDatabase();
    Cursor c = newDB.rawQuery("SELECT skeys FROM " +
            tableName, null);
    if (c != null ) {
        if  (c.moveToFirst()) {
            do {
                String skeys = c.getString(c.getColumnIndex("skeys"));
                results.add(skeys);
            }while (c.moveToNext());
        } 
    }           

    dataAdapter = new ArrayAdapter<String>(this,
            R.layout.listviews_search, results);

    setListAdapter(new ArrayAdapter<String>(this,
            R.layout.listviews_search, results));

      ListView listView = (ListView) findViewById(android.R.id.list);
      listView.setAdapter(dataAdapter);
      listView.setTextFilterEnabled(true);

      listView.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
              Toast.makeText(getApplicationContext(),
                      ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
          }
      });

      EditText myFilter = (EditText) findViewById(R.id.search);
      myFilter.addTextChangedListener(new TextWatcher(){
          public void afterTextChanged(Editable s) {
      }

          public void beforeTextChanged(CharSequence s, int start, int count, int after) {
      }

          public void onTextChanged(CharSequence s, int start, int before, int count) {
       dataAdapter.getFilter().filter(s.toString());
          }
      });
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:55:47.897

将 ArrayList[] 转换为字符串数组非常简单。

```
String[] searchedQueries = new String[stock_list.size()];
stockArr = stock_list.toArray(stockArr);
for(String s : stockArr)
    System.out.println(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:38:32.487

为什么不使用 SimpleCursorAdapter 而不是 ArrayAdapter？然后，您可以在 SQL 中使用 WHERE 子句来搜索列表。这是一种非常常用的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-21T16:39:35.307

在一行中

`String[] searchedQueries = stock_list.toArray(new String[stock_list.size()]);`

# algorithm - 在图中找到一个节点，使其他两个节点之间的距离最小

> ID：13355708
> 
> 赞同：1
> 
> 时间：2012-11-13T04:44:15.347
> 
> 标签：algorithm, graph

我有一个有向加权图 G，有 V 个顶点和 E 个边。给定图中的两个节点，假设 A 和 B，并给定一条边 AB 的权重，表示为 w(A, B)，我需要找到一个节点 C 使得 max(w(A, C), w (B, C)) 在所有可能性中是最小的。我所说的可能性是指 C 可以采用的所有值。我不知道它是否完全清楚，如果不是，我会尝试更准确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:56:45.397

如果 w(A, C) 你真的只是指一条边的权重，那么依次检查所有直接连接到 A 的节点，总成本在最坏的情况下是图的大小，这和你预期的一样好，假设您总是需要阅读图表。

如果 w(A, C) 是指从 A 到 C 的最低成本路径的成本，请注意大多数寻路算法，例如[http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，实际上计算的是从 A 到每个其他节点的最小成本路径的成本。如果您同时拥有从 A 到每个节点的成本和从每个节点到 B 的成本，则可以通过依次查看每个节点来解决您的问题。

因此，运行一次以计算从 A 到每个其他节点的成本，然后反转节点中的边并再次运行以计算出从 B 到反向图中每个其他节点的成本最低的路径。然后对于每个节点，您都有成本最低的 w(A, C) 和最低成本 w(C, B)，因此您可以依次检查每个节点，看看哪个是最好的。

如果您的图表包含循环，那么您需要类似[http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)的东西。如果它有负循环，你就会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:52:32.210

不是很清楚你问什么，但这里是加权距离的一种方法：将其视为 R^n 中的距离问题，其中在任何维度上到 C 的实际直线距离乘以路径的该维度的权重以获得加权距离。使整个表达式成为加权距离的总和，并使用二阶导数测试来最大化该表达式。

干杯，安德鲁

# regex - 与正则表达式相关的困惑

> ID：13355710
> 
> 赞同：0
> 
> 时间：2012-11-13T04:44:45.387
> 
> 标签：regex, regular-language

我有这种与正则表达式有关的困惑。如果有*两组* `A`然后`B`

是`(AB)* = A*B*`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T04:50:27.323

## 在正则表达式的情况下： (AB)* = A*B*？

```
 No, (AB)* is not equals to A*B* 
```

`(AB)* means ABABABABAB......AB` AB 序列（任意次数）。
`A*B* means AAAA.....BBB......`任意数量的 A 后跟任意数量的 B。A不能出现在B之后。

交叉口 - 两者`{ NULL string, AB }`都只包括

* * *

**例子：**

假设： `A = xy`和 `B = z`

```
 (AB)* = xyzxyz.....xyz  
  A*B*  =  xyxyxyxy....zzzz....z 
```

**交叉口**- 两者`{ NULL string, xyz}`都只包括。

* * *

**例子：**

认为 -

```
 A = {a, b},  
  B = {c, d} 
```

然后，

```
(AB)* =  ((a + b)(c + d))* , Its language  
L =  { ac, ab, acbd, acac, .....} 
```

**注意：**此语言中的所有字符串都是偶数长度！

和

```
A*B*  =   (a + b)* (c + d)* , Its language     
  L = { a, b, c, d, ac, ad, bc, bd, acbd, addb,.........} 
```

**注意：**还包含奇数长度的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:02:57.660

```
(AB)* = A*B*  ? 
```

不，首先是语言

```
 {void, ab, abab, ababab, ...} 
```

第二个是语言

```
{void, a, b, aa, ab, bb, aaa, ...} 
```

# uiscrollview - UIScrollView 与 PageControl 与垂直滚动

> ID：13355713
> 
> 赞同：1
> 
> 时间：2012-11-13T04:45:35.047
> 
> 标签：uiscrollview, uipagecontrol

我有 UIScrollView 我希望它应该垂直分页，而且它应该只垂直滚动而不是水平滚动，因为我通常搜索了很多，但我没有得到任何东西。

# html - 在一个

> ID：13355714
> 
> 赞同：0
> 
> 时间：2012-11-13T04:45:38.820
> 
> 标签：html, html5-canvas

我有一个网页，我试图在一组 div 标签中放置一个画布。但是，我需要将画布放在顶部/div 内图像上方的一层。无论我尝试什么或将 canvas html 线放在哪里，我都无法让它在画布上显示在 div1 中的图像上方。

首先我定义了 div 类的样式。

```
#div1 {width:100%; background:transparent url(img/header-bg.png) no-repeat; height:400px; position:relative;}
#div2 {width:100%; background:transparent url(img/nav-bg.png) repeat-x;}
#div3 {
height:450px;
width:100%;
position:absolute; 
background:transparent url(animation/SampleAnim_0010000.png) no-repeat 80% 0; 
}

#div4 {
height:390px; 
width:100%; 
border-bottom:10px solid rgba(255, 255, 255, 0.5);
} 
```

然后我的html

```
<div id="div1">
    <div id="div2">
        <div id="div3">
            <div id="div4">             

            </div><!--div4-->

        </div><!--div3-->
    </div><!--div2-->
</div><!--div1--> 
```

无论我在 div 中的哪个位置插入

```
<canvas id="canvas" width="500" height="220"></canvas> 
```

在 id=div1 (img/header-bg.png) 中设置的图像与画布重叠。div2、div3 和 div4 与 div1 正确重叠。我怎样才能用画布做到这一点？

我的画布脚本看起来有点像

```
<script>

var canvas = document.getElementById('canvas');
if(canvas.getContext){
    // canvas animation code here:
    var ctx = canvas.getContext('2d');

    var lhs = new Image();

    lhs.src = "animation/SampleAnim_0010000.png";

        ctx.drawImage(lhs, 0, 0); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:00:51.640

似乎为我工作：http: [//jsfiddle.net/RnEc6/1/](http://jsfiddle.net/RnEc6/1/)

```
<div id="div1">
    <div id="div2">
        <div id="div3">
            <div id="div4">             
                <canvas id="canvas" width="500" height="220"></canvas>
            </div><!--div4-->
        </div><!--div3-->
    </div><!--div2-->
</div><!--div1-->​ 
```

我认为您在某处有拼写错误，或者将 z-index 应用于您的 div 或 canvas 元素的样式。

# android - 在 doInBackground 上做 GUI 东西

> ID：13355715
> 
> 赞同：0
> 
> 时间：2012-11-13T04:45:57.820
> 
> 标签：android, android-asynctask

我阅读了 asyncTask 并了解到 onPostExecute 和 onPrExecute 用于更新 UI，而 doInBackground 用于在另一个线程上执行繁重的操作。

我想知道，在 DoInBackGround 上进行 GUI 更新会不会“不好”。例如，显示 Toast 等。

我为什么要这样做？因为有时我想使用这个长时间操作的结果来显示东西，我不想在我的任务中使用私有变量只是为了将它们存储用于 GUI 目的

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T04:51:39.487

doInbackground 本身意味着我在后台而不是在前台。您正在寻找的东西可以通过 publishProgress() 来实现。更进一步，如果您不想使用它，请尝试在具有 runOnUi 支持的 doInbackground 方法中运行另一个线程。

# org-mode - 在一张表中使用多个公式

> ID：13355719
> 
> 赞同：2
> 
> 时间：2012-11-13T04:46:31.580
> 
> 标签：org-mode, org-table

我有一个包含多个浮点行的表，我想对它们中的每一个进行舍入。

```
+------------+-------------|
| 445.211219 | 1679.315626 |
| 415.789521 | 1566.561511 |
| 435.918622 | 1689.427872 |
+------------+-------------|
| 424.203660 | 1592.293310 |
| 400.164057 | 1628.415460 |
| 410.473361 | 1507.498568 |
+------------+-------------|
| 463.528003 | 1593.778433 |
| 459.144001 | 1487.695008 |
| 338.498464 | 1459.291475 | 
```

所以我的第一个方法是

```
#+TBLFM: $3=round($3) $4=round($4) 
```

但这会产生

```
+----+-------------|
|  0 | 1679.315626 |
|  0 | 1566.561511 |
|  0 | 1689.427872 |
+----+-------------|
|  0 | 1592.293310 |
|  0 | 1628.415460 |
|  0 | 1507.498568 |
+----+-------------|
|  0 | 1593.778433 |
|  0 | 1487.695008 |
|  0 | 1459.291475 | 
```

两条线

```
#+TBLFM: $3=round($3)
#+TBLFM: $4=round($4) 
```

也不起作用 - 只应用第一个。

如何为多列定义公式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T08:51:40.513

公式是 -`::`分隔的。尝试 ：

```
#+TBLFM: $3=round($3)::$4=round($4) 
```

您可能想使用[手册中的这些命令](http://orgmode.org/manual/Editing-and-debugging-formulas.html)来编辑公式，而不是手动编辑 TBLFM 行，它们非常方便:·)

# java - Java TreeMap：从单个键中检索多个值

> ID：13355721
> 
> 赞同：2
> 
> 时间：2012-11-13T04:46:47.633
> 
> 标签：java, key, treemap, treeset

我正在尝试从 TreeMap 中的单个键中检索多个值。这个想法是每个键将链接到多个值并且应该是可搜索的。现在我遇到的麻烦是，当我只能从键中取回一个值时。

键是字符串，值是自定义对象，称为 Song。歌曲包含多种元素。目标是从每首歌曲中逐字提取歌词，并将每个单词用作键。然后该键链接到包含该键的每首歌曲（值）。

我已经在 StackOverFlow 和网络上搜索了一般的提示，并且我看到了一些，但没有任何东西可以直接解决我的绊脚石。我看到的一个想法是将值更改为某种数组或列表。明天当我的大脑恢复活力时，我可以试试。

无论如何，提前感谢任何提示和建议。是的，这是家庭作业。不，我没有标记是因为我被告知作业标记不再常用。

代码：

```
public class SearchByLyricsWords {
   private static Song[] songs;

   private static TreeMap<String, Song> lyricsTreeMap = new TreeMap<String, Song>();

   private static TreeSet<String> wordsToIgnoreTree = new TreeSet<String>();
   private static File wordsToIgnoreInput = new File("ignore.txt");
   private static String wordsToIgnoreString;
   private static String[] wordsToIgnoreArray;

   private Song[] searchResults;  // holds the results of the search
   private ArrayList<Song> searchList = new ArrayList<Song>();  

public SearchByLyricsWords(SongCollection sc) throws FileNotFoundException {

  // Create a string out of the ignore.txt file
  Scanner scanInputFile = new Scanner(wordsToIgnoreInput);
  String ignoreToken = scanInputFile.next();
  ignoreToken.toLowerCase();
  wordsToIgnoreString = ignoreToken + " ";

  while (scanInputFile.hasNext()) {
     ignoreToken = scanInputFile.next();
     wordsToIgnoreString = wordsToIgnoreString + ignoreToken + " ";
  }

  // Split the string created from ignore.txt 
  wordsToIgnoreArray = wordsToIgnoreString.split("[^a-zA-Z]+");

  // Fill a TreeSet from the wordsToIgnoreArray
  for (int i = 0; i < wordsToIgnoreArray.length; i++) {
     ignoreToken = wordsToIgnoreArray[i];
     wordsToIgnoreTree.add(ignoreToken);
  }

  // Fill TreeMap with lyrics words as the key, Song objects as the value
  songs = sc.getAllSongs();

  for (int j = 0; j < songs.length; j++) {
     Song currentSong = songs[j];
     String lyrics = currentSong.getLyrics();         
     TreeSet<String> lyricsFound = new TreeSet<String>();

     String lyricsToken;
     String[] songLyricsArray;
     songLyricsArray = lyrics.split("[^a-zA-Z]+");

     for (int k = 0; k < songLyricsArray.length; k++) {
        lyricsToken = songLyricsArray[k];

        if (lyricsToken.length() <= 1) {
           continue;
        }

        lyricsFound.add(lyricsToken);
     }

     lyricsFound.removeAll(wordsToIgnoreTree);

     Iterator<String> iterator = lyricsFound.iterator();

     while(iterator.hasNext()) {
        String currentWord = (String)iterator.next();
        lyricsTreeMap.put(currentWord, currentSong);
     }

     //System.out.println(lyricsTreeMap); // testing only
  }
}

public Song[] search(String lyricsWords) {

  lyricsWords = lyricsWords.toLowerCase();
  TreeSet<String> searchTree = new TreeSet<String>();
  String searchToken;
  String[] lyricsWordsSearch = lyricsWords.split("[^a-zA-Z]+");

  for (int l = 0; l < lyricsWordsSearch.length; l++) {
     searchToken = lyricsWordsSearch[l];

     if (searchToken.length() <= 1) {
        continue;            
     }
     searchTree.add(searchToken);
  }
  searchTree.removeAll(wordsToIgnoreTree);

  Iterator<String> searchIterator = searchTree.iterator();

  while(searchIterator.hasNext()) {
     String currentSearchWord = (String)searchIterator.next();
     Collection<Song> lyricsTreeCollection = lyricsTreeMap.values();

     while (lyricsTreeMap.containsKey(currentSearchWord) == true) {

        Iterator collectionIterator = lyricsTreeCollection.iterator();

        while(collectionIterator.hasNext() && collectionIterator.next() == currentSearchWord) {

           Song searchSong = lyricsTreeMap.get(currentSearchWord);
           searchList.add(searchSong);          
        }
     }           
  }
  searchResults = searchList.toArray(new Song[searchList.size()]);

  Arrays.sort(searchResults);

  return searchResults;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T04:47:41.763

`TreeMap`[与所有`Map`实现](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)一样，每个键只保留一个值：

> 地图不能包含重复的键；每个键最多可以映射到一个值。

您的选择包括

*   改用 a `TreeMap<String, List<Song>>`，并手动处理这些`List`值并保持更新
*   使用[例如`TreeMultimap`](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)来自 Guava 的 a ，它（或多或少）像 a 一样运行`TreeMap<K, TreeSet<V>>`，但要好得多。（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T02:45:01.283

您需要使用这种格式来初始化地图并设置：

```
Map<String, TreeSet<Song>>=new Map<String,treeSet<Song>>(); 
```

比您需要多个 for 循环首先循环通过歌曲集，然后将 Map 键插入到您的 Map 中。像这样：

```
 for(Song temp:songs){
       for(String word:temp.getLyrics().toLowerCase().split("[^a-zA-Z]+"){
             if(lyricsTreeMap.containsKey(word)){
                  lyricsTreeMap.get(word).add(temp);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T04:50:02.753

我认为你应该将你的结构设置为

```
Map<String, Set<Song>> 
```

这里`Set`用作内部 Collection 类而不是`List`. 因为它会自动省略您场景的冗余值。

# ios - 关于 FFMPEG 安装和使用

> ID：13355722
> 
> 赞同：0
> 
> 时间：2012-11-13T04:46:55.523
> 
> 标签：ios, ffmpeg

我的客户需要我开发一个 ios 视频播放器并支持 flv、avi 格式的视频。我在谷歌上搜索一些信息并了解“FFMPEG”。

我知道它是什么并且知道我可以用它来开发视频播放器。但我有一个问题，如何安装和使用它？？有文档和演示吗？我不知道如何在 xcode 上使用它。

我已经看过 ffmpeg 网站，但还没有说如何在 ios 或 macox 上构建它，任何人都可以帮助我？？？

我知道 MobileVLC，我尝试安装在我的 xcode 项目上。但对我不起作用，错误`MediaLibraryKit/MLFile.h was not found`实际上是我不知道 MobileVLC 可以播放 flv 和 avi 吗？谁能给我一些想法或给我一些链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:05:45.790

avi 是一种容器格式，您要播放的实际编解码器是什么。我们以前做过，我们当然可以提供帮助。在这里查看我们的 github。

[https://github.com/mooncatventures-group](https://github.com/mooncatventures-group)

另请查看[http://www.xiph.org/](http://www.xiph.org/)了解一些替代编解码器和播放器

MobileVLC 是苹果推出的 VLC 应用程序的一部分，我不知道使用它是否是个好主意。你看过 vlc 的主页 www.videolan.org 的论坛吗？

# c# - 将矩阵（float）的每一行转换为向量

> ID：13355723
> 
> 赞同：4
> 
> 时间：2012-11-13T04:47:00.423
> 
> 标签：c#, .net, c#-4.0, emgucv

我有一个 float[n,128] 数组。现在我想将每一行转换为一个单独的向量，如下所示：

// 这里的代码是伪代码

```
int n=48;  
    float[,] arrFloat=new float[n,128];  
    VectorOfFloat v1 = new VectorOfFloat(128);  // Vn equals to number of n

     v1= arrFloat[0];
     v2=arrFloat[1]
      .
      .
      .
      .
      Vn 
```

**优化方式是什么？**

* * *

我可以编写如下代码，但我认为应该有更好的方法：

```
 List<VectorOfFloat> descriptorVec = new List<VectorOfFloat>();
VectorOfFloat v1 = new VectorOfFloat();  
                    var temp = new float[128];  
                    for (int i = 0; i < descriptors1.GetLength(0); i++)  
                    {  
                        for (int j = 0; j < descriptors1.GetLength(1); j++)  
                        {  
                            temp[j] = descriptors1[0, j];  
                        }  
                        v1.Push(temp);  
                        descriptorVec.Add(v1);  
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:18:54.513

您可以使用 Buffer.BlockCopy 或 ArrayCopy 而不是手动分配每个值 for

```
 static float[][] ToVectors(float[,] matrix)
    {

        var array = new float[matrix.GetLength(0)][];

        for (int i = 0; i < array.Length; i++)
        {
            array[i]=new float[matrix.GetLength(1)];
            Buffer.BlockCopy(matrix, i * matrix.GetLength(1), array[i], 0, matrix.GetLength(1) * sizeof(float));
        }

        return array;

    } 
```

# windows-8 - 在带有 Windows Phone 8 SDK 的 Visual Studio 2012 Windows 8 上启动 WP Emulator 7.1 的内部错误

> ID：13355724
> 
> 赞同：0
> 
> 时间：2012-11-13T04:47:04.760
> 
> 标签：windows-8, visual-studio-2012, windows-phone-7.1, windows-phone

启动 Windows Phone Emulator 7.1 时出现“**内部错误**”-“**由于命令行参数无效，连接失败。 ”错误。**我从转换后的 WP7.1 项目和使用 Windows Phone SDK 8 创建的全新 WP7.1 项目中都收到了错误。

我在我的 MacBook Pro 上通过 Parallels Desktop 在 Windows 8 上使用 Visual Studio 2012 Professional。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:46:59.540

当我安装了两个 SDK 并且同时打开了 VS2010 和 2012 时，我也遇到了这个错误。我只能通过使用 2012 版本来解决它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:38:05.427

您不能从虚拟机中运行 7.1 模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:53:26.287

你的 Windows Phone 8 模拟器工作正常吗？如果不是，那可能是 Hyper V 在 VM 环境中运行的问题。

# ios - 如何获取 PFQuery.queryWithClassName 返回的唯一行？

> ID：13355725
> 
> 赞同：0
> 
> 时间：2012-11-13T04:47:15.810
> 
> 标签：ios, rubymotion, parse-platform

我正在研究 parse.com sdk，我想知道是否有任何方法可以清楚地获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:36:35.547

目前在 PFQuery 中没有办法做到这一点。

[https://www.parse.com/questions/retrieving-unique-values](https://www.parse.com/questions/retrieving-unique-values)

您将需要遍历返回的结果并自己找到不同的值。

# batch-file - 批处理文件用转义的感叹号替换感叹号

> ID：13355733
> 
> 赞同：5
> 
> 时间：2012-11-13T04:48:16.270
> 
> 标签：batch-file, windows-xp, replace

我正在处理一个将数据作为变量获取的批处理文件，并且在该变量中它有一个感叹号。

我想要做的是将必要的转义字符添加到变量中。

```
"Title":"Turk 182!" 
```

以上是我正在使用的数据的示例。

```
setlocal EnableDelayedExpansion
rem replace ! with ^^!
set var=%var:!=^^!!% 
```

但我不确定这是正确的语法，因为如果它也被用作搜索和替换的一部分，我怎么能逃避一个感叹号？

我正在尝试用转义版本替换所有 esclamation 标记，以便可以显示和使用它。

顺便说一句，批处理中是否有任何现有功能可以删除并允许转义所有特殊字符？

这里有更多代码可以帮助解释我在做什么。

```
{"Title":"Turk 182!","Year":"1985","Rated":"PG-13","Released":"15 Feb 1985","Runtime":"1 h 42 min","Genre":"Action, Comedy, Drama","Director":"Bob Clark","Writer":"Denis Hamill, James Gregory Kingston","Actors":"Timothy Hutton, Robert Urich, Kim Cattrall, Robert Culp","Plot":"Jimmy Lynch is angry because his older brother, who was injured as a result of an off duty fire rescue...","Poster":"http://ia.media-imdb.com/images/M/MV5BMTQ2OTk1ODA1MV5BMl5BanBnXkFtZTcwNjYwNjgyMQ@@._V1_SX300.jpg","imdbRating":"5.7","imdbVotes":"2,360","imdbID":"tt0090217","Response":"True"}

rem removes starting and ending brackets
set json=%json:~1,-1%
setlocal EnableDelayedExpansion
rem replace "," with linebreak
set json=!json:","="#"!
setlocal EnableDelayedExpansion
rem replace ! with ^^!
set json=%json:!=^^!!%

setlocal DisableDelayedExpansion
echo %json%
echo.
exit /b 
```

然后我将 json 变量放在循环中，它错误而不是真实值，我只看到我上面使用的实际替换命令。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T06:21:02.137

如果启用延迟扩展，则不应使用带有特殊字符的百分比扩展。
如果您使用延迟扩展，则不会遇到感叹号或其他字符的问题。

```
set myTitle="Turk 182!"
setlocal EnableDelayedExpansion
echo Title=!myTitle! 
```

您可以替换感叹号，但您需要多个插入符号，并且计数取决于很多事情。

*   引号里面有感叹号吗？
*   您是直接回显它还是要从一个变量复制到另一个变量然后回显它？
*   如何将其与另一个值进行比较。

作为小样本，为什么百分比扩展不是最佳选择

```
@echo off
set test1=An exclamation mark^^^^!
setlocal EnableDelayedExpansion
set test2=An exclamation mark^^^^^^^^^^!
set "test3=An exclamation mark^^^^^!"
set test4a=An exclamation mark^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^!
set test4b=%test4a%!
echo %test1%
echo %test2%
echo %test3%
echo %test4b% 
```

如果您想以安全的方式从文件中读取文本，您可以使用延迟切换技术。

```
setlocal DisableDelayedExpansion
for /F "delims=" %%a in (myFile.txt) DO (
  set "line=%%a"
  setlocal EnableDelayedExpansion
  echo !line!
  endlocal
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T12:40:35.633

我不相信你真的需要逃跑`!`。这是可能的，但正如 jeb 试图解释的那样，它可能会变得复杂。

根据您提供的代码，在我看来您不了解延迟扩展的作用。我建议您`HELP SET`从命令提示符键入并阅读文档。延迟扩展的描述从大约一半开始，内容为*“最后，支持延迟的环境变量扩展......”*

延迟扩张还有其他主要好处。最大的优势之一是当您使用延迟扩展时，您永远不必担心转义任何特殊字符。在使用普通扩展时逃脱角色是一种痛苦，并且在您获得经验之前可能会非常混乱。（这确实是合乎逻辑和可预测的，但在你理解之前，它看起来像胡言乱语）

延迟扩展的最大问题是当数据包含`!`. 那是因为延迟扩展发生在 FOR 变量扩展之后，因此包含的值`!`将被破坏。在下面的 json 解析器中，我在循环中关闭延迟扩展以避免该问题。

我对json不太了解，所以我下面的解决方案可能很幼稚（不完整）。但这里有一个简单的 json 解析器，可以处理您提供的数据。我把你的 json 字符串放在一个名为“test.txt”的文件中

```
@echo off
setlocal disableDelayedExpansion
setlocal enableDelayedExpansion

::Read the json string from a file
<test.txt set /p "json="

::Define LF variable to contain a linefeed
set LF=^

::The above 2 blank lines are critical - DO NOT REMOVE

::Strip the enclosing braces
set "json=!json:~1,-1!"

::Substitute a linefeed for ","
for %%A in ("!LF!") do set "json=!json:","=%%~A!"

::Substitute = for ":"
set "json=!json:":"==!"

::Remove remaining "
set "json=!json:"=!"

::Loop through the data, creating variables of the form var_name=value
for /f "delims=" %%A in ("!json!") do (

  REM If delayed expansion is enabled then endlocal to get back to disabled state
  if "!!" equ "" endlocal

  REM Create the variable
  set "var_%%A"
)

::Display the results - list all variables that begin with var_
set var_ 
```

这是输出

```
var_Actors=Timothy Hutton, Robert Urich, Kim Cattrall, Robert Culp
var_Director=Bob Clark
var_Genre=Action, Comedy, Drama
var_imdbID=tt0090217
var_imdbRating=5.7
var_imdbVotes=2,360
var_Plot=Jimmy Lynch is angry because his older brother, who was injured as a result of an off duty fire rescue...
var_Poster=http://ia.media-imdb.com/images/M/MV5BMTQ2OTk1ODA1MV5BMl5BanBnXkFtZTcwNjYwNjgyMQ@@._V1_SX300.jpg
var_Rated=PG-13
var_Released=15 Feb 1985
var_Response=True
var_Runtime=1 h 42 min
var_Title=Turk 182!
var_Writer=Denis Hamill, James Gregory Kingston
var_Year=1985 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:25:06.627

jeb 和 dbenham 已经完全回答了这个问题，所以这有点离题了......

我使用了一个小技巧来避免记住必须插入多少个插入符号才能在不同情况下使用感叹号的麻烦。我定义了一个禁用延迟扩展的变量，并为其分配了一个感叹号（我称之为*bang*）。然后我启用延迟扩展并将其用作 !bang!。这样，这个值就会*一直*以感叹号的形式出现，而且很容易写...

```
@echo off
setlocal DisableDelayedExpansion
set bang=!
setlocal EnableDelayedExpansion
echo Yes, it works!bang! 
```

安东尼奥

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T16:36:18.447

您可以使用 PowerShell：

```
$json=@"
  {"Title":"Turk 182!","Year":"1985","Rated":"PG-13","Released":"15 Feb 1985","Runtime":"1 h 42 min","Genre":"Action, Comedy, Drama","Director":"Bob Clark","Writer":"Denis Hamill, James Gregory Kingston","Actors":"Timothy Hutton, Robert Urich, Kim Cattrall, Robert Culp","Plot":"Jimmy Lynch is angry because his older brother, who was injured as a result of an off duty fire rescue...","Poster":"http://ia.media-imdb.com/images/M/MV5BMTQ2OTk1ODA1MV5BMl5BanBnXkFtZTcwNjYwNjgyMQ@@._V1_SX300.jpg","imdbRating":"5.7","imdbVotes":"2,360","imdbID":"tt0090217","Response":"True"}
"@

add-type -assembly system.web.extensions
$jserial = new-Object Web.Script.Serialization.JavaScriptSerializer
$jserial.DeserializeObject($json)

Key                                                         Value
---                                                         -----
Title                                                       Turk 182!
Year                                                        1985
Rated                                                       PG-13
Released                                                    15 Feb 1985
Runtime                                                     1 h 42 min
Genre                                                       Action, Comedy, Drama
Director                                                    Bob Clark
Writer                                                      Denis Hamill, James Gregory Kingston
Actors                                                      Timothy Hutton, Robert Urich, Kim Cattrall, Robert Culp
Plot                                                        Jimmy Lynch is angry because his older brother, who was ..
Poster                                                      http://ia.media-imdb.com/images/M/MV5BMTQ2OTk1ODA1MV5BMl..
imdbRating                                                  5.7
imdbVotes                                                   2,360
imdbID                                                      tt0090217
Response                                                    True 
```

或使用 PowerShell v3：

```
PS III> $json | ConvertFrom-JSON

Key                                                         Value
---                                                         -----
Title                                                       Turk 182!
Year                                                        1985
Rated                                                       PG-13
Released                                                    15 Feb 1985
Runtime                                                     1 h 42 min
Genre                                                       Action, Comedy, Drama
Director                                                    Bob Clark
Writer                                                      Denis Hamill, James Gregory Kingston
Actors                                                      Timothy Hutton, Robert Urich, Kim Cattrall, Robert Culp
Plot                                                        Jimmy Lynch is angry because his older brother, who was ..
Poster                                                      http://ia.media-imdb.com/images/M/MV5BMTQ2OTk1ODA1MV5BMl..
imdbRating                                                  5.7
imdbVotes                                                   2,360
imdbID                                                      tt0090217
Response 
```

# php - 上传 ASCII .stl 3D 文件时，上传表单仅适用于 Firefox

> ID：13355742
> 
> 赞同：0
> 
> 时间：2012-11-13T04:49:15.093
> 
> 标签：php, forms, post, mime-types

**uploadform.html**和**upload_file.php**（如下）在 Firefox 中运行良好，但在上传 ASCII .stl 3D 文件时在 Chrome、IE 和 Safari 中失败。错误消息是“无效文件”，多台计算机和多个 .stl 文件出现问题。当我修改代码以支持其他文件类型（如 JPG 和 PDF）时，它允许在所有四种 Web 浏览器中使用这些文件类型。此外，如果我在 mime 类型部分中包含 application/octet-stream，Firefox 仅允许上传 .stl。为什么这在 Firefox 之外不起作用？

**上传表单.html：**

```
<!doctype html>
<html>
<body>

<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Submit" />
</form>

</body>
</html> 
```

**上传文件.php：**

```
<!doctype html>
<html>
<body>
<?php
$allowedExts = array("stl");
$extension = end(explode(".", $_FILES["file"]["name"]));
if (
        (
   ($_FILES["file"]["type"] == "application/sla")
|| ($_FILES["file"]["type"] == "application/octet-stream")
|| ($_FILES["file"]["type"] == "text/plain")
|| ($_FILES["file"]["type"] == "application/unknown")
        )
&& ($_FILES["file"]["size"] < 2000000)
&& in_array($extension, $allowedExts)
    )
{
  if ($_FILES["file"]["error"] > 0)
            {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
            }
  else
            {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] /1024) . " KB<br />";

        if (file_exists("upload/" . $_FILES["file"]["name"]))
            {
  echo $_FILES["file"]["name"] . " already exists. ";
            }
else
      {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $_FILES["file"]["name"]);
  echo "successful upload";
      }
           }
}
else
        {
    echo "Invalid file";
        }
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:54:51.897

**解决方案：**添加`application/netfabb`到允许的 mime 类型部分。这是大多数浏览器分配给 .stl 文件的 mime 类型。Firefox 是一个例外，它将 .stl 文件标识为`application/octet-stream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:07:28.767

尝试为 IE 设置编码属性。

```
 <form action="upload_file.php" method="post" enctype="multipart/form-data" encoding="multipart/form-data" > 
```

# python - 如何在 Tkinter 中检索 Entry 小部件的值？

> ID：13355749
> 
> 赞同：0
> 
> 时间：2012-11-13T04:49:57.030
> 
> 标签：python, user-interface, tkinter

当我单击提交按钮时，我正在使用以下代码尝试获取要打印的输入/输入框的内容，但是，似乎没有任何反应。

```
def submit_answer(response):
    print(response)

def get_answer():
    root = Tkinter.Tk()

    contentFrame = Tkinter.Frame(root)

    entryWidget = Tkinter.Entry(contentFrame)
    entryWidget['width'] = 50
    entryWidget.pack()

    contentFrame.pack()

    button = Tkinter.Button(root, text='Submit', command=submit_answer(entryWidget.get()))
    button.pack()

    root.mainloop() 
```

谁能指出我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:47:05.250

ValekHalfHeart 的评论是正确的。

当你这样做时`command=submit_answer(entryWidget.get()))`，它会执行`submit(entryWidget.get())`一次，然后使用该函数的结果（可能`None`）作为点击事件。这不是你想要的。

当您将其包装在 a`lambda`中时，每次单击时都会执行该函数。为了让它工作，你应该有`command=lambda:submit_answer(entryWidget.get())`

# php - PHP 函数作为变量

> ID：13355750
> 
> 赞同：1
> 
> 时间：2012-11-13T04:49:59.900
> 
> 标签：php, variables, if-statement

当我做这样的事情时：

```
$query = mysql_query("INSERT INTO something (something) VALUES('".$something."')");  
if($query){
//do stuff
} 
```

或者

```
$mailstuff = mail($to,$subject,$message,$headers);
if($mailstuff){
//do stuff
} 
```

代码的哪一部分实际执行了函数？`if`还是声明？参考赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T04:51:57.673

代码中的解释...

```
$mailstuff = mail($to,$subject,$message,$headers);
             ^-----------------------------------^
            /*  This part executes the function */

if($mailstuff) {
  ^----------^
/* Condition Here Checks whether the function is successfully executed */
//do stuff
} 
```

[**PHP 函数() 参考**](http://php.net/manual/en/language.functions.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:08:58.447

```
$mailstuff = mail($to,$subject,$message,$headers);

if($mailstuff) {
    //do stuff
} 
```

这是将要做的事情（以正确的顺序）：

*   `mail($to,$subject,$message,$headers)`
*   该`mail`函数返回了一些东西。这东西被分配给`$mailstuff`。
*   该`if`语句将检查其中的东西`$mailstuff`是否有点等于`true`

请不要与您在评论中的建议相反，服务器将在实际执行之前解析所有代码。

# java - 如何安全地关闭 GenericKeyedObjectPool？

> ID：13355752
> 
> 赞同：1
> 
> 时间：2012-11-13T04:50:22.413
> 
> 标签：java, apache-commons, pooling, apache-commons-pool

我的应用程序中有一个[`GenericKeyedObjectPool`](http://commons.apache.org/pool/apidocs/org/apache/commons/pool/impl/GenericKeyedObjectPool.html)。我可以使用该`close`方法将其关闭，但是我应该如何等待客户端将每个借用的对象返回（并且池销毁）池中？

我需要类似的东西[`ExecutorService.awaitTermination`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:50:22.413

`GenericKeyedObjectPool`为具有所需`awaitTermination`方法的包装器创建一个包装器。如果池已关闭并且每个对象都已返回（= 当前从该池借用的实例总数为零），您可以检查`close`和调用并减少锁存器。`returnObject`

```
public final class ListenablePool<K, V> {

    private final GenericKeyedObjectPool<K, V> delegate;

    private final CountDownLatch closeLatch = new CountDownLatch(1);

    private final AtomicBoolean closed = new AtomicBoolean();

    public ListenablePool(final KeyedPoolableObjectFactory<K, V> factory) {
        this.delegate = new GenericKeyedObjectPool<K, V>(factory);
    }

    public V borrowObject(final K key) throws Exception {
        return delegate.borrowObject(key);
    }

    public void returnObject(final K key, final V obj) throws Exception {
        try {
            delegate.returnObject(key, obj);
        } finally {
            countDownIfRequired();
        }
    }

    private void countDownIfRequired() {
        if (closed.get() && delegate.getNumActive() == 0) {
            closeLatch.countDown();
        }
    }

    public void close() throws Exception {
        try {
            delegate.close();
        } finally {
            closed.set(true);
            countDownIfRequired();
        }
    }

    public void awaitTermination() throws InterruptedException {
        closeLatch.await();
    }

    public void awaitTermination(final long timeout, final TimeUnit unit) 
            throws InterruptedException {
        closeLatch.await(timeout, unit);
    }

    public int getNumActive() {
        return delegate.getNumActive();
    }

    // other delegate methods
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:08:51.577

关闭它应该是安全的，而无需等待所有对象返回。

来自[GenericKeyedObjectPool.html#close()](http://commons.apache.org/pool/apidocs/org/apache/commons/pool/impl/GenericKeyedObjectPool.html#close%28%29)的文档：

> 关闭池。池关闭后，borrowObject() 将失败并出现 IllegalStateException，但 returnObject(Object) 和 invalidateObject(Object) 将继续工作，返回的对象在返回时被销毁。

# jquery - 在列表项中附加锚标记

> ID：13355755
> 
> 赞同：0
> 
> 时间：2012-11-13T04:50:46.753
> 
> 标签：jquery, append, each

我有一个无序列表：

html:

```
<ul id="blogs">
   <li>
     <a class="vimg" href="/blogs/news/6875583-hurricane-sandy">
      <img src="mydomainvideo_icons.jpg?1542">
    </a>
 </li>
    <a href="/blogs/news/6875583-hurricane-sandy">
      <strong class="titlen">Hurricane Sandy</strong>
      <p class="newsp">lorem ispum lorem ispumu...</p>
    </a>
    <a class="readp" href="/blogs/news/hurricane-sandy">Read More</a>
 <li></li>
 <li></li>
</ul> 
```

我想用jQuery改变上面的html，所以输出如下：

```
 <ul id="blogs">
   <li>
      <a class="vimg" href="/blogs/news/6875583-hurricane-sandy">
       <img src="mydomainvideo_icons.jpg?1542">
     </a>
     <a href="/blogs/news/6875583-hurricane-sandy">
       <strong class="titlen">Hurricane Sandy</strong>
       <p class="newsp">lorem ispum lorem ispumu...</p>
    </a>
    <a class="readp" href="/blogs/news/hurricane-sandy">Read More</a>
 </li>
 <li></li>
 <li></li> 
```

这是我拥有的 jquery，但它不起作用：

jQuery：

```
 $("#blogs li").each(function(){

       if ($(".video-container").length > 0  && $(this).children('img').length == 0){
          var vidindex = $('.readp').attr('href')
          $(this).find('.video-container').remove();
          $(this).append('<a class="vimg" href=""><img src="{{ 'video_icons.jpg' | asset_url }}"/></a>');
          $('.titlen').appendTo('.vimg')
          $(this).find('a').attr("href", vidindex)
     }
      $(this).find('img').replaceWith(function(){ return '<img src="'+this.src+'"/>';});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:03:27.667

> 在列表项中附加锚标记

```
$("#blogs").find("li").append("<a href='#'>some Description</a>"); 
```

# inheritance - 当我尝试使用继承时，为什么会从 dart 收到以下错误？

> ID：13355761
> 
> 赞同：2
> 
> 时间：2012-11-13T04:51:41.370
> 
> 标签：inheritance, dart

当我运行时：

```
#import('package:logging/logging.dart');

class Trace extends Logger {
    Trace(String name) : super(name);
} 
```

飞镖 说：

```
'file:///home/jim/Code/dart/trace/Trace.dart': Error: line 6 pos 26: super class constructor 'Logger.' not found
    Trace(String name) : super(name); 
```

我正在关注技术概述中的示例：

```
class Square extends Rectangle {
  Square(num size) : super(size, size);
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:03:08.453

该类[`Logger`](http://api.dartlang.org/docs/bleeding_edge/logging/Logger.html)没有任何构造函数。它有工厂。

您试图创建一个扩展[`Logger`](http://api.dartlang.org/docs/bleeding_edge/logging/Logger.html)并指定一个默认构造函数的类，该构造函数试图调用[`Logger`](http://api.dartlang.org/docs/bleeding_edge/logging/Logger.html)不存在的默认构造函数。

也许你正在寻找这样的东西：

```
import 'package:logging/logging.dart';

class Trace extends Logger {
  factory Trace(String name) {
    return new Logger(name);
  }
}

main() {
  var i = new Trace('foo');

  i.on.record.add((LogRecord record) {
    print(record.message);
  });

  i.severe('blaa!');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:23:31.483

发生错误是因为您尝试扩展`Logger`只有工厂构造函数的类 ( )。正如线程[抽象类和工厂构造函数](https://groups.google.com/a/dartlang.org/forum/?fromgroups=#!topic/misc/o-4rK9OLcIs)所建议的那样，您应该考虑实现`Logger`而不是扩展它。

# javascript - 隐藏 android phonegap 应用程序但不退出

> ID：13355767
> 
> 赞同：0
> 
> 时间：2012-11-13T04:52:34.437
> 
> 标签：javascript, cordova, phonegap-plugins

我正在 android phonegap 中做一个项目。在这里我想向已登录应用程序的用户显示通知，例如后台服务。即即使他/她关闭了应用程序，用户也应该在通知区域中收到通知。现在我正在使用本地我的应用程序[状态栏通知](https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification)中的通知，用户将在通知区域中收到通知。但我知道 javascript 文件没有在后台运行。我尝试过[推送通知](http://devgirl.org/2012/10/25/tutorial-android-push-notifications-with-phonegap)教程。但它没有在后台运行。现在我的问题是

有没有办法隐藏应用程序，但实际上应用程序（javascript）文件正在运行并且用户收到通知？

phonegap 中是否有任何功能，例如 android 中的 moveTaskToBack(true)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:02:49.360

您将需要使用推送通知。作为正确实施推送通知侦听器的一部分，您的应用程序将启动一个服务，该服务将能够在其未运行时响应推送通知。

[https://developer.android.com/guide/google/gcm/gs.html](https://developer.android.com/guide/google/gcm/gs.html)

# primefaces - Primefaces 隐藏和取消隐藏对话框

> ID：13355770
> 
> 赞同：1
> 
> 时间：2012-11-13T04:53:11.557
> 
> 标签：primefaces

现在我正在研究primefaces UI是令人难以置信的，我想用它来构建我的网站所以现在我正在研究对话框，我想使用primefaces的requestcontext隐藏和取消隐藏对话框我怎么能实现这个？我在 stackoverflow 中搜索了相同的问题，发现了一些问题，但它对我不起作用，为了让一切都清楚，这是我的 register.jsf 代码：

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Insert title here</title>
    <h:outputStylesheet library="css" name="style.css"/>
</h:head>
<h:body>
    <p:panel toggleable="true" header="Registration" closable="true" closeTitle="back" styleClass="register-panel">
        <h:form>
            <h:panelGrid columns="2">
                <h:outputLabel  value="Firstname: " />
                <p:inputText id="firstname" value="#{ register.firstName }" required="true" requiredMessage="Firstname cannot be blank">
                    <f:validateDoubleRange minimum="3" maximum="15"  />
                </p:inputText>

                <h:outputLabel value="Middlename: " />
                <p:inputText id="middlename" value="#{ register.middleName }" required="true" requiredMessage="Middlename cannot be blank">
                    <f:validateDoubleRange minimum="3" maximum="15"  />
                </p:inputText>

                <h:outputLabel value="Lastname: " />
                <p:inputText id="lastname" value="#{ register.lastName }" required="true" requiredMessage="Lastname cannot be blank">
                    <f:validateDoubleRange minimum="3" maximum="15"  />
                </p:inputText>

                <p:commandButton type="button" update="errorFirst, errorMiddle, errorLast, ErrorD, confirmD" value="Register" actionListener="#{ register.Register }" />

                <p:dialog width="350"  modal="true" id="ErrorD" header="Error Registration" visible="true" maximizable="false"  widgetVar="showErrorDialog">
                <h:panelGrid columns="1">
                    <p:message for="firstname" id="errorFirst" />
                    <p:message for="middlename" id="errorMiddle" />
                    <p:message for="lastname" id="errorLast" />
                </h:panelGrid>
                </p:dialog>

                <p:dialog width="350" modal="true" id="confirmD" header="Confirm Registration"  visible="true" maximizable="false"  widgetVar="showConfirmDialog">
                    <h:panelGrid columns="2">
                        <h:outputLabel value="Are you sure you want to save the records" />
                        <h:outputLabel value=""/>
                        <p:separator />
                        <p:separator />

                        <p:commandButton value="Ok, Sure" />
                        <p:commandButton value="Cancel" />
                    </h:panelGrid>

                </p:dialog>

            </h:panelGrid>

        </h:form>
    </p:panel>
</h:body>
</html> 
```

这是我的注册豆：

```
 package org.register;

import javax.annotation.PostConstruct;
import javax.faces.bean.*;
import javax.faces.event.ActionEvent;
import org.primefaces.context.RequestContext;

@ManagedBean(name="register")
@RequestScoped
public class registerBean {

    private String firstName;
    private String middleName;
    private String lastName;

    public String getFirstName() {
        return firstName;
    }
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    public String getMiddleName() {
        return middleName;
    }
    public void setMiddleName(String middleName) {
        this.middleName = middleName;
    }
    public String getLastName() {
        return lastName;
    }
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public void Register(ActionEvent e){
        RequestContext primeContext = RequestContext.getCurrentInstance();
        if(getFirstName().equals("") || getMiddleName().equals("") || getLastName().equals("")){
            primeContext.execute("showErrorDialog.show()");
        }
        else{
            primeContext.execute("showConfirmDialog.show()");
        }

    }

} 
```

我的代码没有任何错误，但问题是每次页面加载时，它已经调用了 2 对话框，我想要做的是在注册失败时打开第一个对话框，并在成功时打开第二个对话框。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T03:38:06.633

基本上，代码应该通过删除`type="button"`Register来工作`commandButton`，以便使用 ajax 请求。甚至没有调用方法#{register.Register}。同时删除`visible="true"`两个对话框中的

顺便说一句，为了执行支持方法，JSF 执行验证规则，因此`confirmD`只有当表单中的所有数据都完成此类验证时，您才会看到对话框出现

# c++ - 将节点转换为整数

> ID：13355772
> 
> 赞同：1
> 
> 时间：2012-11-13T04:53:24.323
> 
> 标签：c++, c, casting

该代码在比较语句中给出了一个**错误**，指出“**没有运算符与这两个操作数匹配”。**`if`我解释，它应该意味着“一个节点不能被转换/转换成一个整数”。`w[2]`但是，当与`%d`格式一起使用时，打印语句会打印一个整数值。为什么会这样？不`printf`投吗？

```
NODE *w=(NODE *)malloc(4*sizeof(NODE)); 
if(w[2]==0)
  printf("%d\n",w[2]); 
```

节点的结构是-

```
struct node{
  int key;
  struct node *father;
  struct node *child[S];
  int *ss;
  int current;
}; 
```

* * *

请参考 cdhowie 的评论。他已经回答了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:04:44.687

您看到的行为`printf()`是未定义的。 `printf()`不对参数进行类型检查；它假定您给出的参数与您在字符串参数中给出的格式说明符相匹配。

换句话说，您正在调用*未定义的行为*。类型代码`%d`需要一个`int`作为参数，但您指定的是一个`NODE`对象。这里可能发生任何事情——例如，您的程序可能会崩溃（尽管这不太可能）。至少，您不能依赖此特定输出在平台或编译器之间保持一致。

如果你把你的编译器警告调到最大，它应该会警告你。现代编译器将为`printf()`您检查参数（假设您提供字符串文字作为第一个参数，而不是变量或表达式），但这纯粹是编译时检查，它只会生成警告，而不是错误。

# c++ - 函数返回指向结构的指针

> ID：13355776
> 
> 赞同：2
> 
> 时间：2012-11-13T04:53:45.277
> 
> 标签：c++, class

我在返回指向在类中声明的结构的指针时遇到一些问题。到目前为止，这是我的代码：

排序列表.h

```
#ifndef SORTEDLIST_H
#define SORTEDLIST_H

class SortedList{

 public:

    SortedList();

 ...

 private:

    struct Listnode {    

      Student *student;

      Listnode *next;

    };

    static Listnode *copyList (Listnode *L);

};

#endif 
```

排序列表.cpp

```
#include "SortedList.h"

...

// Here is where the problem lies

Listnode SortedList::*copyList(Listnode *L)

{

    return 0; // for NULL

} 
```

显然，复制列表方法不会编译。我正在使用 Microsoft Visual Studio，编译器告诉我“Listnode”身份不明。当我尝试编译时，这是我得到的：

```
1>------ Build started: Project: Program3, Configuration: Debug Win32 ------

1>  SortedList.cpp 
```

sortedlist.cpp(159): error C2657: 'SortedList::*' found at the start of a statement (你忘了指定类型吗？)

sortedlist.cpp(159)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

sortedlist.cpp(159)：错误 C2065：“L”：未声明的标识符

sortedlist.cpp(159)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

sortedlist.cpp(159)：致命错误 C1903：无法从先前的错误中恢复；停止编译

```
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

帮助将不胜感激...尽快

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:56:46.453

在 cpp 文件中，函数应定义为：

```
SortedList::Listnode* SortedList::copyList(ListNode* L)
{
    return 0; //For NULL
} 
```

此外，`struct Listnode`应该`public`在`class SortedList`.

# javascript - Three.js 瓦片集

> ID：13355777
> 
> 赞同：0
> 
> 时间：2012-11-13T04:54:04.480
> 
> 标签：javascript, textures, three.js

我有一组地形纹理。它们的大小都相同。它当前将整个图像映射到纹理。如何将纹理仅映射到图像的一部分而不是整个图像？我知道变通方法，但我想知道 Three.js 是否有内置的方法。

```
var image = new Image();
image.onload = function () {
    texture.needsUpdate = true;
};
image.src = path;
var texture = new THREE.Texture(image, new THREE.UVMapping(), THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping, THREE.NearestFilter, THREE.LinearMipMapLinearFilter);

return new THREE.MeshBasicMaterial({
    map: texture
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:29:27.350

简短的回答是，当您想要在单个网格上使用多个纹理时， Three.js 不支持内置它。

最简单的方法是将混乱分成不同的部分，或者当您确定使用少于 16 个纹理时，您可以使用着色器材质。

# python - 如何使用 Python 从 https 链接获取 JSON？

> ID：13355778
> 
> 赞同：0
> 
> 时间：2012-11-13T04:54:04.173
> 
> 标签：python, json, ssl, https, urllib2

我正在学习 Python，我想开始使用 Twitter 的流 API。我知道如何构建一个非常基本的应用程序来读取页面的内容，`urllib2`并且过去已经成功地做到了这一点。但是，`https://`此特定 Twitter 流 API 所需的安全连接似乎不适用于 urllib2。

我试图从以下链接获取 JSON：`https://stream.twitter.com/1.1/statuses/filter.json?locations=-122.75,36.8,-121.75,37.8`

通过编写以下内容：

```
import urllib2
url = "https://stream.twitter.com/1.1/statuses/filter.json?locations=-122.75,36.8,-121.75,37.8"
print urllib2.urlopen(url).read() 
```

但是，回溯说我没有被授权；我推测这是因为 HTTPS SSL 连接，研究支持了这一点。所以我想我的问题是从需要这种 SSL 连接的链接获取 JSON 的最佳方法是什么？我也尝试过 curl，但再次收到错误 401。

以下是完整的追溯。

> 回溯（最后一次调用）：文件“”，第 1 行，在文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”中，第 126 行，在 urlopen 文件中“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第 400 行，在打开的文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib /python2.7/urllib2.py”，第 513 行，在 http_response 文件中“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第 438 行，在错误文件中“ /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第 372 行，在 _call_chain 文件中“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/ python2.7/urllib2.py”，第 521 行，在 http_error_default urllib2 中。HTTPError：HTTP 错误 401：未经授权

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:06:35.633

正如其他人提到的，您需要授权。这是如何做到的：

[在 python 中](https://stackoverflow.com/questions/2833632/twitter-api-with-urllib2-in-python)查看带有 urllib2 的 Twitter API

```
import urllib2
import base64

request = urllib2.Request( 'https://stream.twitter.com...' )
request.add_header( 'Authorization', 'Basic ' + base64.b64encode( username + ':' + password ) )
response = urllib2.urlopen( request ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:00:53.900

不是 SSL 连接未授权，而是您在进行此调用之前尚未明确授权系统。在发出请求之前，您需要对服务器执行某种授权。

# java-me - Kalmeo - KUIX：如何修复小部件大小

> ID：13355781
> 
> 赞同：1
> 
> 时间：2012-11-13T04:54:30.230
> 
> 标签：java-me

我正在开发一个项目并创建了一个表格：5 行，3 列。我想修复列宽。我怎么能？我尝试：最小尺寸但不起作用。

```
<screen style="align:fill-left;layout:inlinelayout(true, fill);bg-color: white">
<container style = "min-size: 70 0; align: center; bg-color: red;">
    <text >test 1: width 70 </text>
</container>

<container style = "min-size: 120 0; align: center; bg-color: black;">
    <text >width 120</text>
</container>

<container style = "min-size: 50 0; align: center; bg-color: blue;">
    <text >width 50</text>
</container> 
```

# java - Java对象数组创建后的内存大小是多少？

> ID：13355782
> 
> 赞同：7
> 
> 时间：2012-11-13T04:54:40.063
> 
> 标签：java, arrays, memory

这可能甚至不需要问，但我想确保我是对的。当您在 Java 中创建任何对象的数组时，如下所示：

```
Object[] objArr = new Object[10]; 
```

该变量`objArr`位于堆栈内存中，它指向堆中数组对象所在的位置。堆中该数组的大小等于 12 字节对象头 + 4（或 8，取决于参考大小）字节 * 数组中的条目数。这是准确的吗？

那么，我的问题如下。由于上面的数组是空的，那么在执行那行代码之后，它是否立即占用了堆中 12 + 4*10 = 52 字节的内存？还是 JVM 会等到您开始将内容放入数组后才实例化它？数组中的空引用是否占用空间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T04:56:40.870

空引用确实“占用空间”——数组的内存在一个块中预先分配，并归零（使所有内容都为空引用）。作为一个练习，尝试分配一个巨大的数组，它会占用比 JVM 的内存限制更多的空间。程序应立即因内存不足错误而终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T05:05:27.617

我认为这会对你有所帮助

```
public static void main(String[] args) {
        Runtime r = Runtime.getRuntime();
        System.gc();
        System.out.println("Before " + r.freeMemory());
        Object[] objArr = new Object[10];
        System.out.println("After " + r.freeMemory());
        objArr[0] = new Integer(3);
        System.gc();
        System.out.println("After Integer Assigned " + r.freeMemory());
    } 
```

**输出**

```
Before 15996360
After 15996360
After Integer Assigned 16087144 
```

# apache - Apache - 如何限制文件的最大下载速度？（如果不是 apache，我可以运行 lighthttpd）

> ID：13355784
> 
> 赞同：5
> 
> 时间：2012-11-13T04:55:29.677
> 
> 标签：apache, lighttpd

我有一堆视频，但我只想将这些文件的最大下载速度限制为 1mbps。我该如何设置（理想情况下在 Apache 中，但 lighthttpd 是一个选项）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-04T15:30:05.030

如果您只想限制每个连接的下载速度，而不考虑管理总数或执行更细粒度的控制，则处理此问题的最佳方法是使用 Apache 自己的`mod_ratelimit`.

此示例将所有内容限制`/files`为`1Mbit/s`...

```
<Location /files>
    SetOutputFilter RATE_LIMIT
    SetEnv rate-limit 1000
</Location> 
```

我研究并尝试了其他方法和模块，在这种特定情况下，mod_ratelimit 是最简单的方法。

[下载 Apache 2.4 的速度限制和节流](http://www.devside.net/wamp-server/download-speed-limit-and-throttling-for-apache-2-4)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T05:02:21.683

您可以尝试[mod_bandwidth](http://www.cohprog.com/mod_bandwidth.html)或更高级的[mod_cband](http://dembol.org/blog/mod_cband/)。

[mod_cband](http://dembol.org/blog/mod_cband/)的原始站点似乎处于脱机状态。[GitHub 用户“maiha”在mod_cband](https://github.com/maiha/mod_cband/)建立了原始档案。

来自 mad_bandwidth 网站的报价：

> `Mod_bandwidth`是 Apache 网络服务器的一个模块，可以根据目录、文件大小和远程 IP/域来设置服务器范围或每个连接的带宽限制。

`mod_cband`来自网站的报价：

> `mod_cband`是 Apache 2 为解决限制用户和虚拟主机的带宽使用问题而提供的模块。当前版本可以设置虚拟主机和用户的带宽配额、最大下载速度（如`mod_bandwidth`）、每秒请求速度和最大同时 IP 连接数（如 `mod_limitipconn`）

这是一个关于[如何使用cband限制下载速度](http://blog.camilord.com/2012/06/13/manage-apache-download-speed-and-traffic-limits/)的教程。

# r - 如何绘制具有两个刻度的 x 轴？

> ID：13355785
> 
> 赞同：5
> 
> 时间：2012-11-13T04:55:44.910
> 
> 标签：r

我想用两个比例绘制一个 x 轴，如下图所示：

![在此处输入图像描述](../Images/e58ff4769177d85dc30c996d6136fc0b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T08:37:59.500

`ggplot2`版本可能如下所示：

```
library(ggplot2)

x = c(1,2,3,4,5, 10,20,30,40,50)
y = c(1,2,2,3,4, 2,1,3,5,5)
# You should introduce cond - condition to separate axises - by yourself
df = data.frame(x=x,y=y,cond=ifelse(x>5,"x2","x1"))

ggplot(df, aes(x,y,group=cond)) + geom_line() + geom_point(aes(shape=cond), size=4) + facet_grid(.~cond, scales="free_x") 
```

这产生了这个情节：![在此处输入图像描述](../Images/424f896d159bd17e116959f3b4d213ee.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T08:01:27.087

这是使用基本 R 图形的版本。您可能可以多玩一点，以获得您想要的东西，但这基本上就是您所追求的。

```
plot.new()
par(mfcol=c(1,2))
plot(1:5,ann=FALSE,bty="n",type="l",ylim=c(0,25))
grid(ny=NA)
par(mar=c(5.1, 0, 4.1, 2.1))
plot(c(10,20,30,40,50),c(8,5,15,20,20),yaxt="n",ann=FALSE,bty="n",type="l",ylim=c(0,25))
grid(ny=NA)
par(new=TRUE)
par(mfcol=c(1,1))
par(bty="l")
par(mar=c(5.1, 4.1, 4.1, 2.1))
plot(NA,ylim=c(0,25),type="n",xaxt="n",yaxt="n",ann=FALSE)
box()
grid(nx=NA,ny=NULL) 
```

![在此处输入图像描述](../Images/892157d93f0071e38e382d72aef1ed07.png)

编辑 - 让它变得有点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:54:14.333

我不完全确定，但作为一个起点，看看`?facet_grid()`.`ggplot2`

将两个地块并排放置应该不会太难。然后您可能想要关闭轴，然后添加适当的比例

向谷歌询问`axis.line = theme_blank()`

# c# - 如何使用 ASP.NET MVC 和 Knockout JS 将真/假值绑定到复选框

> ID：13355789
> 
> 赞同：1
> 
> 时间：2012-11-13T04:56:06.423
> 
> 标签：c#, javascript, knockout.js, asp.net-mvc-4

我正在尝试使用 Knockout JS 将 ASP.NET pages_Membership 表中的 IsConfirmed 字段绑定到一个复选框，但似乎无法使其正常工作。

我将它绑定到复选框，但除非我将其设置为！$data.IsConfirmed，否则不会选中复选框。我还连接了一个单击事件以在我的视图模型中触发 updateUser 函数，它确实会更新它，但不会切换发送的值。它总是发送真，如果复选框被选中，它应该发送真，否则为假，然后取消选中复选框。

这是我的标记

```
<table id="usersTable" class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>User ID</th>
            <th>Username</th>
            <th>Role</th>
            <th>Date Created</th>            
            <th>Last Failed Login</th>            
            <th>Active</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: users">
        <tr>            
            <td>
                <span data-bind="text: $data.UserId"></span>
            </td>
            <td>
                <span data-bind="text: $data.Username"></span>
            </td>
            <td>
                <span data-bind="text: $data.Role"></span>
            </td>            
            <td>
                <span data-bind="text: $data.DateCreated"></span>
            </td>
            <td>
                <span data-bind="text: $data.LastFailedLogin"></span>
            </td>
            <td>
                <input type="checkbox" data-bind="click: updateUser, checked: $data.IsConfirmed" />
            </td>           
        </tr>
    </tbody>
</table> 
```

和 Javascript

```
<script type="text/javascript">
    var baseUri = '@ViewBag.ApiUrl';
    var self = this;
    self.users = ko.observableArray();
    // define user view-model
    function UsersViewModel() {               
        // get users to populate the view model        
        $.getJSON(baseUri, self.users);        

        // update the users IsConfirmed status
        self.updateUser = function (user) {            
            $.ajax({ type: "PUT", url: baseUri + '/' + user.UserId, data: user });
        }
        // re-load the users after any modifications
        $.getJSON(baseUri, self.users);        
    };   
    $(document).ready(function () {
        ko.applyBindings(new UsersViewModel());        
    });
</script> 
```

**来自服务器的 JSON**

```
[{
    "UserId": 6,
    "Username": "john@jdoe.com",
    "Role": "Guest",
    "DateCreated": "11/12/2012 1:18:41 PM",
    "LastFailedLogin": "",
    "IsConfirmed": false
}, {
    "UserId": 3,
    "Username": "simpleuser",
    "Role": "Administrator",
    "DateCreated": "11/11/2012 6:17:32 PM",
    "LastFailedLogin": "",
    "IsConfirmed": false
}, {
    "UserId": 2,
    "Username": "testUser",
    "Role": "Administrator",
    "DateCreated": "11/11/2012 6:17:32 PM",
    "LastFailedLogin": "",
    "IsConfirmed": false
}, {
    "UserId": 5,
    "Username": "jdoe1@nowhere.com",
    "Role": "Student",
    "DateCreated": "11/12/2012 3:31:38 AM",
    "LastFailedLogin": "",
    "IsConfirmed": false
}, {
    "UserId": 8,
    "Username": "nobody@somewhere.com",
    "Role": "Alumni",
    "DateCreated": "11/12/2012 1:24:15 PM",
    "LastFailedLogin": "",
    "IsConfirmed": false
}, {
    "UserId": 9,
    "Username": "test@test.com",
    "Role": "Applicant",
    "DateCreated": "11/12/2012 1:25:18 PM",
    "LastFailedLogin": "",
    "IsConfirmed": false
}, {
    "UserId": 1,
    "Username": "user1",
    "Role": "Administrator",
    "DateCreated": "11/11/2012 6:17:31 PM",
    "LastFailedLogin": "11/12/2012 4:54:51 PM",
    "IsConfirmed": false
}, {
    "UserId": 4,
    "Username": "test@test.com",
    "Role": "Alumni",
    "DateCreated": "11/11/2012 6:22:23 PM",
    "LastFailedLogin": "11/11/2012 8:23:57 PM",
    "IsConfirmed": false
}, {
    "UserId": 7,
    "Username": "test@test2.com",
    "Role": "Student",
    "DateCreated": "11/12/2012 1:23:56 PM",
    "LastFailedLogin": "",
    "IsConfirmed": false
}] 
```

**C# Web API 控制器**

```
// GET api/Membership
        public IEnumerable<SiteMemberDTO> GetMemberships()
        {
            var users = db.webpages_Membership.AsEnumerable();
            var profiles = db.UserProfiles.AsEnumerable();            

            // now build our DTO object
            var membersList = new List<SiteMemberDTO>();
            foreach (var profile in profiles)
            {
                var member = new SiteMemberDTO() {
                    UserId = profile.UserId, 
                    Username = profile.UserName,
                    Role = profile.webpages_Roles.SingleOrDefault(r => r.RoleName != "").RoleName,
                    DateCreated = db.webpages_Membership.Find(profile.UserId).CreateDate.ToString(),
                    LastFailedLogin = db.webpages_Membership.Find(profile.UserId).LastPasswordFailureDate.ToString()
                };

                membersList.Add(member);
            }
            return membersList;
        } 
```

**DTO（数据传输对象）**

```
 public class SiteMemberDTO
    {
        public int UserId { get; set; }
        public string Username { get; set; }
        public string Role { get; set; }

        public string DateCreated { get; set; }
        public string  LastFailedLogin { get; set; }

        public bool IsConfirmed { get; set; }
    } 
```

这是我正在做的事情的完整代码。出于某种原因，我在 JSON 中看到它为**IsConfirmed**返回 false ，而在数据库中它对每条记录都是 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:20:18.913

我看到您在创建 DTO 对象时没有分配 IsConfirmed 。这就是为什么它总是假的！

```
var member = new SiteMemberDTO() {
                UserId = profile.UserId, 
                Username = profile.UserName,
                Role = profile.webpages_Roles.SingleOrDefault(r => r.RoleName != "").RoleName,
                DateCreated = db.webpages_Membership.Find(profile.UserId).CreateDate.ToString(),
                LastFailedLogin = db.webpages_Membership.Find(profile.UserId).LastPasswordFailureDate.ToString(),
                IsConfirmed = profile.IsConfirmed
            }; 
```

编辑：

似乎复选框和单击事件存在问题：[甚至在调用单击处理程序之前正在检查复选框](https://stackoverflow.com/questions/8113076/checkboxes-are-being-checked-before-click-handler-is-even-called)

所以不要点击，而是使用更改事件：

```
data-bind="checked: IsConfirmed, event: { change: $parent.updateUser}" 
```

签出这个小提琴：http: [//jsfiddle.net/Soroush/89anx/10/](http://jsfiddle.net/Soroush/89anx/10/)

# java - Netbeans 和 Primefaces 的问题

> ID：13355799
> 
> 赞同：0
> 
> 时间：2012-11-13T04:57:03.197
> 
> 标签：java, jsf, netbeans, primefaces

我已经使用一些 web 技术工作了几个星期，但是当我使用 primefaces 时，我遇到了 Netbeans 的一些问题。我通常在一个“测试项目”中做我的“测试bean”并且它们工作正常，但是当我将我的“测试bean”复制到我的“主项目”中时，我遇到了很多问题，我的项目根本无法工作. 任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:09:04.797

我与 Netbeans 一起工作，我遇到了类似的问题……问题是 Netbens 拥有的 primefaces 库。JAR 已损坏。[为官方jars](http://www.primefaces.org/downloads.html)更改 Netbeans 的默认 primefaces 库。它对我有用:)

# google-maps - Google Maps API v3.9：缩放时模糊自定义标记

> ID：13355803
> 
> 赞同：6
> 
> 时间：2012-11-13T04:57:36.690
> 
> 标签：google-maps, google-maps-api-3, customization, blurry

因此，谷歌似乎已经用 3.9 / 3.10 API 修复了模糊地图问题，这很棒。

但是有一个带有自定义标记的新标记。一旦您放大一个级别，自定义标记就会损坏/模糊。如果缩小，它们会自行纠正，尽管缩小的过程也会使标记略微模糊。

3.8 API 没有出现自定义标记的这个问题。这是一张说明问题的图片（我建议您在新选项卡中打开图像；当图像缩放以适合此帖子时，模糊不太容易看到）。纸鹤标记的直线模糊最为明显：

![谷歌地图标记api问题](../Images/47f9087fd3de0609e2620ac7d9b016a4.png)

我已经通过 HTML 进行了测试，但我无法真正说出标记是如何放置在地图上的。但我认为我会为任何经历过类似情况的人提出这个问题，或者如果有人对如何解决这个问题有任何想法，请等待查看它是否是 API 中的故障。

我在 Windows 和 Mac 上使用 Chrome 24.0.1312.5 beta-m 并且两者都出现了问题。它不会在 Firefox 16.0.2 或 Safari 6 中发生。鉴于 Safari 没有这个问题，我想知道这是否是 Chrome 特有的问题。我应该检查它是否发生在非 beta 版本中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T10:10:06.517

尝试像这样使用视网膜图标，也许它可以工作：

```
new google.maps.MarkerImage('icon.png', null, null, null, new google.maps.Size(32,32)) 
```

该图像实际上是 64x64 图像，但我将其用作 32x32 图像以获得更好的像素密度。

# jquery-mobile - Jquery Mobile 1.2 多个复选框选择问题

> ID：13355805
> 
> 赞同：2
> 
> 时间：2012-11-13T04:58:04.487
> 
> 标签：jquery-mobile

我正在编写一个基于 Jquery Mobile 1.2、Jquery 1.8.2、css 和 HTML 5 的应用程序，我需要允许用户选择多个图像并执行命令。

如果我不使用 jquery.mobile-1.2.0.min.js 库，则以下工作：

CSS 代码：

```
.image-checkbox-container input[type="checkbox"]{
    display: none;
}

.image-checkbox-container img{
    border: 0;
    margin: 4px;
 } 
```

HTML：

```
<span class="image-checkbox-container">
    <input type="checkbox" name="black-box" value="1" />
<img src="dummyimage1.jpg" />
</span>
<span class="image-checkbox-container">
    <input type="checkbox" name="red-box" value="1" />
    <img src="dummyimage2.jpg" />
</span>
<span class="image-checkbox-container">
    <input type="checkbox" name="green-box" value="1" />
    <img src="dummyimage3.jpg" />
</span> 
```

查询：

```
$('.image-checkbox-container img').live('click', function(){
    if(!$(this).prev('input[type="checkbox"]').prop("checked")){
    $(this).prev('input[type="checkbox"]').prop("checked", true);
     this.style.border = '4px solid #38A';
     this.style.margin = '0px';
}else{
        $(this).prev('input[type="checkbox"]').prop("checked", false);
    this.style.border = '0';
    this.style.margin = '4px';
}
}); 
```

一旦我将 jquery.mobile-1.2.0.min.js 库添加到代码中，它就不再正常工作了。取消选中/取消选中复选框不起作用。

我尝试使用 checkboxradio("refresh") 但没有任何运气。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:09:28.200

**使用 CSS 解决方案怎么样？**

另外添加这个自定义 CSS：

```
 .checked {
    border : 4px solid #38A!important;
    margin : 0px!important;
 } 
```

并使用此脚本：

```
 <script>
  $('.image-checkbox-container img').live('click', function(){
    $this=$(this);
    if($this.hasClass('checked')===true){
      $this.removeClass('checked');
    }else{
      $this.addClass('checked');
    }
  });
  </script> 
```

# ruby-on-rails - 如何制作 rake assets:precompile build 到正确的位置？

> ID：13355806
> 
> 赞同：0
> 
> 时间：2012-11-13T04:58:15.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

我正在将我的 Rails 3 应用程序部署到`sapa`我的托管服务的子目录中。为了点击`/sapa`子目录，我向 . 添加了一个范围`routes.rb`，但这让应用程序在`/assets`（不是我的应用程序的一部分）中查找 .js 和 .css 而不是`/sapa/assets`（我对 .js 非常满意`assets`，但出于某种原因，它不这样做）。因此，我在 my和 a中都使用了一个`scope`语句。`routes.rb``config.assets.prefix``application.rb`

不幸的是，这导致我`rake assets:precompile`构建到`public/sapa/assets`而不是仅仅进入`public/assets`。我可以将文件复制到正确的位置并且一切正常，但我希望有人告诉我一种更好的方法（必须存在，对吗？）。我可以获得相对资产路径（即没有 initial `/`）或者更标准的方式来做我想做的事情，以便 rails 理解？

/config/application.rb

```
 config.assets.prefix = "/sapa/assets" 
```

/config/routes.rb

```
scope "sapa" do
  …
end 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:12:01.673

[根据定义（请参阅配置 Rails](http://guides.rubyonrails.org/configuring.html#configuring-assets)），配置似乎`config.assets.prefix`用于定义提供资产的位置。

```
config.assets.prefix defines the prefix where assets are served from. Defaults to /assets. 
```

您能否解释一下，是否有理由将“/sapa/assets”放入`config.assets.prefix`变量中？也许您正在寻找`config.assets.paths`配置变量？

```
config.assets.paths contains the paths which are used to look for assets. Appending paths to this configuration option will cause those paths to be used in the search for assets. 
```

# c++ - 如何读取一串文本并创建其类的对象

> ID：13355807
> 
> 赞同：0
> 
> 时间：2012-11-13T04:58:18.543
> 
> 标签：c++

> **可能重复：**
> [如何在 C++ 容器中存储不同类型的对象？](https://stackoverflow.com/questions/4738405/how-can-i-store-objects-of-differing-types-in-a-c-container)

读取文本文件后...

以下信息可用

```
Point2D, [3, 2]
Line3D, [7, 12, 3], [-9, 13, 68]
Point3D, [1, 3, 8]
Line2D, [5, 7], [3, 8]
Point2D, [3, 2]
Line3D, [7, -12, 3], [9, 13, 68]
Point3D, [6, 9, 5]
Point2D, [3, 2]
Line3D, [70, -120, -3], [-29, 1, 268]
Line3D, [25, -69, -33], [-2, -41, 58]
Point3D, [6, 9, -50] 
```

由分隔符逗号分隔的第一个数据是类名。对于 4 个班级中的每一个

Point2D,Line3D,Point3D,Line2D

我如何根据他们的类手段将它们存储到相关的对象中..

当它读取第一行时

Point2D, [3, 2]

它将其存储为带有 Data [3, 2] 的 Point2D 对象

但问题是我应该选择什么数据集，Vector、Set、Map 或 List

我当时正在考虑实际创建一个数据集，但我不能使用 new Point2D(); 自从

```
Point2D is parent of Point3D
Line2D is parent of Line3D 
```

并且没有Point2D和Line2D的父类。我怎么能喜欢在像 Vector 这样的数据集中创建它们的对象

所以 Vector[0] 是带有数据 [3,2] 的 Point2D 类，然后 Vector[1] 是带有数据 [7, 12, 3], [-9, 13, 68] 的 Line3D 类

**感谢您的帮助。！**

# vim - 如何在 vim 编辑器中更改字符串？

> ID：13355809
> 
> 赞同：-4
> 
> 时间：2012-11-13T04:58:29.833
> 
> 标签：vim, replace, find

我正在尝试在 vim 编辑器中用斜杠替换字符串

例如：`foo to abc/def/foo`。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:41:50.173

您的问题的标题和内容不匹配。

`:help pattern`并且`:help :substitute`有点压倒性但*非常*有用，因为正则表达式是 Vim 的核心。

[Vim 正则表达式 101](http://vimregex.com/)是一个更简洁的资源。

无论如何，给定以下示例文本：

```
bar baz foo baz bar 
```

您的目标可以通过多种方式实现。这里是其中的一些：

```
:s/foo/\/abc\/def\/foo
:s/foo/\/abc\/def\/&
:s+foo+/abc/def/& 
```

几点注意事项：

*   在替换部分，`&`代表“匹配的文本”。如果匹配是`foo`，`&`是`foo`。当然在这里使用`&`over并没有太大的好处`foo`，但是等到你有一个更复杂的模式......</p>

*   因为斜线用于分隔搜索部分和替换部分，所以您需要转义两个部分中的实际斜线以使替换工作。

*   您可以使用许多其他符号代替斜线来分隔搜索和替换部分。当您知道需要避开太多斜线时，这*非常有用。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T08:41:49.653

要在 vim 中进行字符串替换，您必须首先退出可视或插入模式。然后输入 ':' 来执行 vim 命令。vim 中的替换命令以 '%s' 开头。把你拥有的所有东西放在一起

```
:%s/thingyouhave/thingyouwant/ 
```

在您陈述的示例中，您需要使用反斜杠“\”转义文件名中的“/”。

```
:%s/foo/abc\/def\/foo/ 
```

另一个有用的地方是将“gc”放在表达式的末尾；这将在执行每个更改之前提示您进行验证。如果您想更改表达式的某些实例或不确定您所做的是否正确，这将很有用。

```
:%s/foo/abc\/def\/foo/gc 
```

# symfony-2.1 - 无法在远程主机上初始化 Symfony 2 项目：内存问题

> ID：13355814
> 
> 赞同：0
> 
> 时间：2012-11-13T04:59:00.660
> 
> 标签：symfony-2.1

我刚刚在我的远程主机上安装了 Symfony 2。

但是当我运行 web/app_dev.php 我得到一个

> 致命错误：在 /srv/disk5/1000098/www/foi-skripte.com/vendor/swiftmailer/swiftmailer/lib/classes/Swift/Events/EventDispatcher.php 中允许的内存大小为 16777216 字节已用尽（尝试分配 4864 字节）在第 76 行

我必须更换我的托管服务提供商还是可以解决这个问题？

因为在我看来，我什至无法为 Symfony 2 分配 16MB 的空间来工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:23:43.777

看来问题是 php.ini 中脚本的 memory_limit 。

# list - TypeError：列表索引必须是整数，而不是浮点数

> ID：13355816
> 
> 赞同：30
> 
> 时间：2012-11-13T04:59:07.210
> 
> 标签：list, python-3.x, binary-search, typeerror

我有一个产生错误的 python 3.x 程序：

```
def main():
    names = ['Ava Fischer', 'Bob White', 'Chris Rich', 'Danielle Porter',
             'Gordon Pike', 'Hannah Beauregard', 'Matt Hoyle',
             'Ross Harrison', 'Sasha Ricci', 'Xavier Adams']

    entered = input('Enter the name of whom you would you like to search for:')
    binary_search(names, entered)

    if position == -1:
        print("Sorry the name entered is not part of the list.")
    else:
        print(entered, " is part of the list and is number ", position, " on the list.")
    input('Press<enter>')

def binary_search(names, entered):
    first = 0
    last = len(names) - 1
    position = -1
    found = False

    while not found and first <= last:
        middle = (first + last) / 2

        if names[middle] == entered:
            found = True
            position = middle
        elif names[middle] > entered:
            last = middle - 1
        else:
            first = middle + 1

    return position

main() 
```

错误是：

```
TypeError: list indices must be integers, not float 
```

我无法理解此错误消息的含义。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-13T05:07:23.593

看起来您正在使用 Python 3.x。Python 3.x 的重要区别之一是处理除法的方式。当你这样做时`x / y`，在 Python 2.x 中返回一个整数，因为小数被截断（地板除法）。但是在 3.x 中，`/`运算符执行“真”除法，结果是 a`float`而不是整数（例如`1 / 2 = 0.5`）。这意味着您现在正在尝试使用浮点数来引用列表中的位置（例如`my_list[0.5]`，甚至`my_list[1.0]`），这将无法正常工作，因为 Python 需要一个整数。因此，您可能首先要尝试使用`middle = (first + last) // 2`, 调整以使结果返回您所期望的。表示 Python 3.x 中的`//`楼层划分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-16T23:40:20.710

派对有点晚了，但你也可以使用：

`middle = int((first + last) / 2)`

无论如何，RocketDonkey 回答中完美地解释了为什么您会收到错误。

为了使您的代码正常工作，您还应该设置：

```
position = binary_search(names, entered) 
```

正如雨果费雷拉所说。

还要检查这个问题：['/' 和 '//' 用于除法时有什么区别？](https://stackoverflow.com/questions/183853/what-is-the-difference-between-and-when-used-for-division)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-18T08:06:17.947

我在函数 testOnData() 上使用 ANN 和 PyBrain 时遇到了这个问题。

所以，我解决了这个问题，将“//”而不是“/”放在 backprop.py 源代码的索引中。

我变了：

```
print(('Max error:', 
    max(ponderatedErrors), 
    'Median error:',
     sorted(ponderatedErrors)[len(errors) / 2])) # <-- Error area 
```

到：

```
print(('Max error:', 
    max(ponderatedErrors), 
    'Median error:',
     sorted(ponderatedErrors)[len(errors) // 2])) # <-- SOLVED. Truncated 
```

我希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-30T11:34:38.577

我可能是错的，但这一行：

```
binary_search(names, entered) 
```

不会是

```
position = binary_search(names, entered) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2022-01-08T13:24:50.813

如果`first = 0`然后`last = 6`使用`/`运算符，您将得到`3.0`，因此您的编译器会给出错误，因此您需要对其进行类型转换。

```
middle = int((first + last) / 2) 
```

# django - 如何在 uWSGI 下配置 Django 应用程序？

> ID：13355817
> 
> 赞同：6
> 
> 时间：2012-11-13T04:59:15.383
> 
> 标签：django, profile, uwsgi

我正在尝试分析在**uWSGI**下运行的 django 应用程序。[Linesman](https://github.com/amcfague/linesman/issues)看起来很有趣，但我不知道如何实际使用它。有人可以提供有关此用例的详细说明吗？或者引导我使用其他更好的文档解决方案？

编辑：这里和其他地方有很多帖子讨论分析特定视图、django 的 ORM 等。这不是我想要的。我试图看看为什么这个**app+django+uwsgi**堆栈在特定的硬件平台上很慢。由于几乎所有我遇到的只是 django 的配置文件部分，或者似乎需要使用特定的命令行运行有问题的代码，所以我很难过。**对于这个特定的堆栈，我需要特定的“白痴”方向。**

Edit2：我在 GPLv3 项目上无偿工作。所以，除非你也知道如何破解我的银行余额 :)，否则我会坚持使用 FOSS 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T16:20:28.483

有点晚了，但我刚刚让巡边员至少部分工作，按照[巡边员文档页面上的 Django 说明进行操作](http://pythonhosted.org/linesman/narr/django_notes.html)。只需将链接页面中显示的必要代码添加到 wsgi.py 并启动 uwsgi 服务器。**之后，使用分析器**路径转到 django 实例的 URL 。例如，当您在 django 上运行时`http://example.com:8000/`，转到`http://example.com:8000/__profiler__`. 需要注意的是，linesman 的文档总是假设服务器在端口 5000 上运行，我最初认为它为此在端口 5000 上创建了一个自己的小型网络服务器，但它显然没有这样做:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:40:46.527

您可能要考虑使用 New Relic。

[http://blog.newrelic.com/2011/11/08/new-relic-supports-python/](http://blog.newrelic.com/2011/11/08/new-relic-supports-python/)

除了有针对性的检测，包括对 Django 的特殊支持，最近还添加了一个低开销的线程分析机制。开销足够低，甚至可以在生产系统中使用。

![示例线程分析会话结果。](../Images/1f90b6c49e20d7491422e9b845ddd646.png)

* * *

更新 1

建议 New Relic 的重点是，即使在 uWSGI 上，它也相对容易安装和运行。

对于您不想花钱的情况，它有 2-4 周的免费试用期，具体取决于您在哪里注册以及您是否尝试领取免费 T 恤或其他促销活动，例如免费的 RC Helicopter他们有时会跑。即使在试用期结束后，它也会回到 Lite 订阅级别，无需持续支付任何费用，而且仍然提供了相当多的细节。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T08:22:46.223

Linesman 文档有关于[在`mod_wsgi`](https://github.com/amcfague/linesman/blob/master/docs/narr/django_notes.rst). 我敢打赌，在 uWSGI 下，类似的方法也适用于你。

# node.js - Cloud Foundry 和 Socket.IO 跨域策略问题

> ID：13355818
> 
> 赞同：1
> 
> 时间：2012-11-13T04:59:27.243
> 
> 标签：node.js, websocket, socket.io, cloud-foundry, cross-domain-policy

每次浏览器加载此 URL 时，我都会收到此类消息：

[http://volkova.cloudfoundry.com/socket.io/socket.io.js](http://volkova.cloudfoundry.com/socket.io/socket.io.js)

```
<?xml version="1.0"?><!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd"><cross-domain-policy><allow-access-from domain="*" to-ports="*"/></cross-domain-policy> 
```

我尝试为 socket.io 做授权部分，但没有运气。

这是我配置 socket.io 的部分代码

```
io = _.socketio.listen( _.serverdata.xserver, { log: true } );
    if( process.env.VMC_APP_PORT ){
        io.set( "transports", [
            "flashsocket",
            "htmlfile",
            "xhr-polling",
            "jsonp-polling"
        ] );
        io.configure( function( ){
            io.set( "authorization",
                function( handshakeDate, callback ){
                    //TODO: Provide level of security here
                    callback( null, true );
                } );
        } );
    } 
```

当我在本地尝试我的代码时，一切正常。

在客户端我这样做：

```
<script src="http://volkova.cloudfoundry.com/socket.io/socket.io.js"></script>

socket = io.connect( "http://volkova.cloudfoundry.com" ); 
```

我的代码有什么遗漏吗？或者我错过了什么配置？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:34:40.607

是否有可能看到您的应用程序的完整源代码，我部署了示例 Socket.IO 应用程序（来自他们的主页），它似乎工作正常。

[http://socket-io-example.cloudfoundry.com/socket.io/socket.io.js](http://socket-io-example.cloudfoundry.com/socket.io/socket.io.js)

如果您尝试从一个域连接到另一个域，这可能是个问题。

# java - 反向地理编码显示不正确

> ID：13355826
> 
> 赞同：0
> 
> 时间：2012-11-13T05:01:27.660
> 
> 标签：java, google-maps, gwt, reverse-geocoding

我正在尝试使用反向地理编码将地址添加到我的信息窗口。出于某种原因，我的地址显示为：addresscom.google.gwt.maps.client.geocoder.GeocoderResult@157d1af，我不知道如何让它显示为字符串。这是我的代码。

```
final GeocoderRequest request = new GeocoderRequest();
request.setLatLng(point);   //point is lat long to be displayed
Geocoder geocoder = new Geocoder();
geocoder.geocode(request, new GeocoderCallback() {

    @Override
    public void callback(List<HasGeocoderResult> responses, String status) {
                HasGeocoderResult result = responses.get(0);
                String address = result.toString();

                infoWindow2.setContent(address);        

                infoWindow2.open(myMap.getMap(), marker2);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:42:45.767

这可能意味着 HasGeocodeResult 类没有 toString 方法的特定实现。您看到的（GeocoderResult@157d1af）是 Object 类中 toString 标准实现的输出。

一个更好的想法是在 GeocoderResult 中寻找其他方法，您可以使用它来创建人类可读的结果描述。

例如，似乎有一个名为 getAddressComponents() 的方法。我相信您可以从这种方法（以及可能的其他一些方法）创建一个体面的输出。我不熟悉这些类，所以我真的不知道这些东西是什么，但是像这样的一些代码怎么样：

```
StringBuilder address = new StringBuilder();
for (HasAddressComponent component : result.getAddressComponent()) {
    address.append(component.getLongName());
    address.append("\n");
}

infoWindow2.setContent(address.toString); 
```

# jquery - 创建动态图形和饼图，如 goo.gl 统计信息

> ID：13355827
> 
> 赞同：3
> 
> 时间：2012-11-13T05:01:44.113
> 
> 标签：jquery, html, css

我对 HTML5、CSS3 和 jQuery 还很陌生，想知道如何使用它们创建动态图和饼图等 goo.gl 统计信息。

![在此处输入图像描述](../Images/205f6fb6aeae5bfebc5fc384149dd6c2.png) 你们的任何帮助将不胜感激。

谢谢， EG

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:04:31.287

谷歌有你可以使用的免费[图表工具，当然他们的文档也很棒。](https://developers.google.com/chart/)您还可以下载和使用[RGraph库。](http://www.rgraph.net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T22:58:26.933

我还建议查看 Bonsai.js 它是一个用于渲染 SVG 的 API（也许 SVG 可能更适合您的客户）。

[http://bonsaijs.org/](http://bonsaijs.org/)

以及与您的问题有关的演示：

[http://demos.bonsaijs.org/demos/pie/index.html](http://demos.bonsaijs.org/demos/pie/index.html)

# python - Python列表构建

> ID：13355828
> 
> 赞同：1
> 
> 时间：2012-11-13T05:01:47.567
> 
> 标签：python, python-3.x

我必须从 .txt 文件中为购物清单构建一个函数，如下所示：

```
milk
cheese

bread
hotdog buns

chicken
tuna
burgers 
```

等等。从上面的列表中，我的购物清单应该看起来像`[['milk', 'cheese'], ['bread', 'hotdog buns'], ['chicken', 'tuna', 'burgers']]`，所以当文本文件中的项目之间有空格时，列表中的项目被分隔开。

我必须使用`.readline()`，我不能使用`.readlines(), .read()`，或者`for`循环。我的代码现在创建一个空列表：

```
def grocery_list(foods):
    L = open(foods, 'r')
    food = []
    sublist = []
    while L.readline() != '':
        if L.readline() != '\n':
            sublist.append(L.readline().rstrip('\n'))
        elif L.readline() == '\n':
            food.append(sublist)
            sublist = []
    return food 
```

我不知道哪里出了问题，所以它返回一个完全空的列表。我也不确定`''`and`'\n'`部分；我正在使用的示例测试文件在 shell 中打开时如下所示：

```
milk\n
cheese\n
\n
...
''
'' 
```

但是对于每个列表`.rstrip()`是否`!= ''`有意义？还是我什至没有走在正确的轨道上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:11:02.940

一个问题是您没有将最终结果添加`sublist`到结果中。正如@Xymotech 提到的，您需要捕获每次调用的结果，`readline()`因为下一次调用会有所不同。以下是我将如何修改您的代码。

```
def grocery_list(foods):
    with open(foods, 'r') as L:        
        food = []            
        sublist = []            

        while True:
            line = L.readline()
            if len(line) == 0:
                break

            #remove the trailing \n or \r
            line = line.rstrip()

            if len(line) == 0:
                food.append(sublist)
                sublist = []                    
            else:
                sublist.append(line)
        if len(sublist) > 0:
            food.append(sublist)

        return food 
```

注意`with`语句的使用。这可确保文件在不再需要后关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:11:44.167

我已将您的代码修改如下，以实现您想要的：

```
def grocery_list(foods):
    with open(foods,'r') as f:
        food=[]
        sublist=[]
        while True:
            line=f.readline()
            if len(line)==0:
                break
            if line !='\n':
                sublist.append(line.strip())
            else:
                food.append(sublist)
                sublist=[]
        food.append(sublist)
    return food 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T06:19:08.507

在我看来，更整洁一些。实现所需结果的另一种选择。

```
def grocerylist(foods):  
  with open(foods) as f:
    line = f.readline()
    items = []
    while line:
      items.append(line.rstrip())
      line = f.readline()
    newlist = [[]]
    for item in a:
      if not x: newlist.append([])
      else: newlist[-1].append(x)
    return newlist 
```

`newlist`现在包含以下内容：

```
[['milk', 'cheese'], ['bread', 'hotdog buns'], ['chicken', 'tuna', 'burgers']] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T05:05:34.890

每次你调用 L.readline() 时，你都在读另一行。您应该第一次存储它的值，并在接下来的每个语句中使用该值。

# javascript - 类中存在的图像逐渐淡入（HTML/CSS/JS）？

> ID：13355829
> 
> 赞同：0
> 
> 时间：2012-11-13T05:01:49.910
> 
> 标签：javascript, jquery, html, css

我使用 AJAX 在类中动态加载图像。

因此，假设一个类中存在 10 个图像（类最初不显示）。

如果我使用 JQuery 在一个类中应用淡入淡出，那么所有图像都会同时淡入。不过我想要的是一张一张的逐渐淡入的画面，一定不能很慢，但效果应该是感觉画面在逐渐淡出。

HTML 代码

```
<p class="loaded_images">
<a><img src=""/></a>
<a><img src=""/></a>
<a><img src=""/></a>
</p> 
```

查询

```
$('.loaded_images').children('a').each(function(){

$(this).children('img').fadeIn(200)

}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:13:23.997

```
function fadeImages(index) {
    var imgs = $('.className img');
    if(index == imgs.size()) {
        return false;
    } else {
        imgs.eq(index).fadeIn('fast',function(){fadeImages(index+1)});
    }    
}

$(document).ready(function() {
    fadeImages(0);
}) 
```

# excel - 从办公室外部启动 VSTO

> ID：13355831
> 
> 赞同：1
> 
> 时间：2012-11-13T05:02:04.820
> 
> 标签：excel, visual-studio-2010, vsto, ms-office, office-interop

我有一个针对 Excel 的 VSTO 项目。我还有一个用 C# 编写的 WinForm 应用程序。这一切都是使用 .Net Framework 4 和 VS 2010 在 C# 中编程的。

我的问题是我希望能够调用这个 VSTO 应用程序，而无需先打开 Excel。所以我将在我的 WinForm 应用程序中单击一个按钮，它应该启动 Excel 并调用 VSTO，然后它将从我的数据库中读取并将一些值放入 Excel 工作表中。

有没有官方的方法可以做到这一点，或者如果没有，至少有一种解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:51:16.770

这很容易：

1.  您可以[在此处使用 GetObject 方法之类的方法使用自动化调用 Excel 以获取更多详细信息](http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/71044a7d-5424-4c84-94d3-3b29f84b1d2f)。我记得对象名称是 Excel.Application。此“GetObject”方法将运行 Excel 的新实例（它甚至可能是不可见的）或将返回对现有实例的引用。
2.  通过 Application.COMAddIns 或使用任何其他方法（如 WCF）调用您的附加组件 - 通信技术的选择取决于您。

# ruby-on-rails - rails - nested_form_for 中的动态选择菜单

> ID：13355837
> 
> 赞同：2
> 
> 时间：2012-11-13T05:03:27.200
> 
> 标签：ruby-on-rails, nested-form-for

我以通常的方式使用nested_form_for，但我想向嵌套子级添加动态选择菜单。

我有以下咖啡脚本（改编自['dynamic-select-menus' railscast](http://railscasts.com/episodes/88-dynamic-select-menus-revised?view=asciicast)）

```
jQuery ->
  $( ".controls-row" ).each ->
    $(this).bind "change", ->
      type = $('#expense_type :selected').text()
      if (type == "miles")
        $('#amount_currency').hide()
        $('#km_traveled').show()
      else 
        $('#amount_currency').show()
        $('#km_traveled').hide() 
```

这段代码的问题是它只适用于第一个嵌套元素。我尝试为每个元素添加唯一的 id，但这仅适用于现有元素。新元素都是“蓝图”元素的克隆，并且都具有相同的 ID。

有没有人有更好的方法在嵌套表单中实现动态选择菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:11:32.453

只需使用正则表达式将“蓝图”ID 更改为独特的。

例如，如果您正在加载部分内容，您可以使用 Javascript 的替换来更改默认 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:30:00.977

我用这段代码解决了它：

```
jQuery ->
  $(document).on "nested:fieldAdded", (event) ->
    $( ".controls-row" ).each ->
        $(this).find('#expense_type').bind "change", ->
            type = $(this).parent().find('#expense_type :selected').text()
            if (type == "km")
                $(this).parent().find('#payment_method').addClass('hidden').hide()              
                $(this).parent().find('#amount_in_currency').addClass('hidden').hide()
                $(this).parent().find('#amount_currency').addClass('hidden').hide()
                $(this).parent().find('#km_traveled').removeClass('hidden').show()
            else 
                 $(this).parent().find('#payment_method').removeClass('hidden').show()
                 $(this).parent().find('#amount_currency').removeClass('hidden').show()
                 $(this).parent().find('#amount_in_currency').removeClass('hidden').show()
                 $(this).parent().find('#km_traveled').addClass('hidden').hide()
        $(this).find('#expense_type').trigger('change')

  $(document).trigger("nested:fieldAdded") 
```

# android - Cordova Phonegap 和 Google Maps v3 javascript api：如何在单击许可证链接或 Google 地图徽标时添加后退按钮功能

> ID：13355842
> 
> 赞同：5
> 
> 时间：2012-11-13T05:04:03.173
> 
> 标签：android, html, google-maps, cordova

**背景：** 在 Android 上运行的 Cordova phonegap 2.2 应用程序允许监听 backbutton 事件

```
document.addEventListener("backbutton", function(e){ history.back();} 
```

google maps api V3 创建的地图带有链接到左下角的 Google 地图网页的 Google 徽标和右下角的可点击许可链接。徽标或服务条款链接没有特定的 ID/选择器。

**问题** 当单击其中一个链接时，网页将重定向到具有以下内容的 Google 网页：target:_blank，然后该网站在与 Cordava 应用程序相同的窗口中打开，但由于网页包含自己的 Javascript，后退按钮功能丢失。

是否可以在加载网页时注入一些代码？

一种解决方案可能是在外部打开链接：

```
navigator.app.loadUrl([href here], { openExternal:true } ); 
```

但话又说回来，仍然存在缺少选择器的问题。

更新：在许可证页面或 Google 地图中单击按钮时，我在 logcat 中收到以下错误消息：11-13 16:20:30.500: E/Web Console(31508): Uncaught ReferenceError: cordova is not defined:1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:10:02.197

.live() 已在 jQuery v1.9 中删除，并且在 Zepto v1.0rc1 中已弃用，因此这是 kvaale 答案的修订版，它应该适用于最新的框架。

此版本还使用PhoneGap/Cordova 的InAppBrowser 代码，使您能够在InAppBrowser（使用'_blank'）或系统Web 浏览器（使用'_system'）中打开链接。

```
function directUrlToExternalBrowser(urlPattern){
    var pattern = "a[href^='"+urlPattern+"']";      // detect all urls starting with urlPattern

    $(document).on('click', pattern, function(e){
        e.preventDefault();
        var ref = window.open($(pattern).attr("href"), '_system', '');      // '_system' will open the system web browser, '_blank' will open the InAppBrowser
    });
} 
```

然后将以下代码放入您的`$(document).ready()`函数中...

```
directUrlToExternalBrowser("http://maps.google.com/maps");
directUrlToExternalBrowser("http://www.google.com/intl"); 
```

如果您想检测所有“a href”链接（不仅仅是 Google 地图的链接），请改用以下代码...

```
directUrlToExternalBrowser("http://");  
directUrlToExternalBrowser("https://"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T07:16:45.590

```
$(document).on('click', '#map a[target="_blank"]', function(e){
    e.preventDefault();
    var url = $(this).attr('href');

    if( /Android/.test(navigator.appVersion) ){
        navigator.app.loadUrl(url, { openExternal:true });
    }else{
        window.open(url, '_system');
    }
}); 
```

`#map`- 谷歌地图容器

适用于 android 和 ios。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:15:26.347

这是与谷歌地图链接相交的一种方法。

假设您有可用的 jquery，您可以在脚本中包含此方法：

```
function directUrlToExternalBrowser(urlPattern) {
  var pattern = "a[href^='"+urlPattern+"']";//all urls startting with urlPattern
  $(pattern).live('click', function(e){
      e.preventDefault();
      navigator.app.loadUrl($(pattern).attr("href"), {openExternal: true});
  });
} 
```

然后，您可以通过以下几行将点击定向到 phonegap api：

```
directUrlToExternalBrowser("http://maps.google.com/maps");
directUrlToExternalBrowser("http://www.google.com/intl"); 
```

# c# - 获取选中的行号随机返回0

> ID：13355844
> 
> 赞同：4
> 
> 时间：2012-11-13T05:04:16.000
> 
> 标签：c#

我有一个链接到 DGV 的上下文菜单条。单击 DGV 中的单元格时，它将打开上下文菜单条，我可以单击“plotStripMenuItem”打开一个表单（formPlot），该表单基本上从文本文件中读取数据并绘制图形并计算一些统计数据返回（一旦 formPlot 关闭）到 DGV 的先前单击的行。

为此，我在打开 formPlot 之前使用“int clickedRow”存储单击的行号，并在关闭 formPlot 后使用它来更新 DGV。

```
 private void plotToolStripMenuItem_Click(object sender, EventArgs e)
    {
        //get the row number which was clicked 
        string strClickedRow = DGVLeft.CurrentCellAddress.Y.ToString();
        int clickedRow = Convert.ToInt16(strClickedRow);

        FormPlot formPlot = new FormPlot(strLot, pathLD);
        formPlot.ShowDialog();

        DGVLeft.Rows[clickedRow].Cells[0].Value = formPlot.columnA;
        DGVLeft.Rows[clickedRow].Cells[1].Value = formPlot.ColumnB;
        DGVLeft.Rows[clickedRow].Cells[2].Value = formPlot.columnC;
        DGVLeft.Rows[clickedRow].Cells[3].Value = formPlot.columnD;
    } 
```

大多数情况下，这按预期工作。但我注意到它偶尔不会更新在我打开 formPlot 之前单击的 DGV 单元格。相反，它更新了第 0 行！

例如，我单击了第 7 行，但从 formPlot 返回后，DGV 第 0 行的值是更新的值。不是 DGV 行号 7 的值。

对我来说，现在第 0 行将成为更新的行，因为我单击第 7 行并将其存储在一个变量中。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:12:55.573

这可能会也可能不会解决您的问题，但是为什么要将行号转换为字符串并再次返回？

```
 //get the row number which was clicked 
    string strClickedRow = DGVLeft.CurrentCellAddress.Y.ToString();
    int clickedRow = Convert.ToInt16(strClickedRow); 
```

应该只是

```
 //get the row number which was clicked 
    int clickedRow = DGVLeft.CurrentCellAddress.Y; 
```

# sql-server - SAP ME 表关系图是否存在？

> ID：13355845
> 
> 赞同：1
> 
> 时间：2012-11-13T05:04:24.843
> 
> 标签：sql-server, sap

我正在尝试对 SAP Manufacturing Execution 表的架构进行正面或反面。我似乎找不到所有表之间的关系图。有谁知道是否存在，或者如何生成我自己的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:14:54.707

服务市场上有一个名为“SAP Manufacturing Execution 5.1.3 Object Models Guide”的文档，它代表了常用的 BO 之间的关系。可在 5.1.3 的安装指南中找到。（没有重大变化，因此也可用于 5.2 和 6.0。）

我知道这不是数据库表关系图，但感觉它可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T08:44:42.517

生成**所有**表格的图表可能是一个问题——我不确定您是否能够在这样的图表中看到任何内容。但是，如果您从单个表开始并将其显示在 ABAP 字典 (transaction `SE11`) 中，您可以尝试使用按钮*Graphic* (Ctrl+Shift+F11) 并查看它的位置。

# c#-4.0 - 使用 Open XML SDK 提取 Excel 文档数据的一致过程？

> ID：13355849
> 
> 赞同：0
> 
> 时间：2012-11-13T05:04:55.010
> 
> 标签：c#-4.0, openxml-sdk

如果有的话，这可以作为我解析/导入 Open XML Excel 文件数据的笔记。

我使用[Open XML SDK 2.0](http://www.microsoft.com/en-us/download/details.aspx?id=5124)创建了下面的代码，该代码成功地从一个 Excel 文件中提取 Excel 2007 数据，但未能在不同但相似的 Excel 文件中返回空字符串。我不知道我是否在正确的层次结构中正确使用了正确的方法，或者这是否会根据 Excel 文件版本（兼容的 2007、2010、2003 等）而改变。

**是否有使用 Open XML SDK 2/2.5 从 Excel 文件中提取数据的一致方法？**

我在下面制作了一些[LinqPad](http://www.linqpad.net/)示例，并用我的发现/示例问题进行了评论。

```
 // Obtain a reference to the spreadsheet file 
var doc = SpreadsheetDocument.Open(@"C:\MyExcelFile.xlsx", false);

    // Only one WorkbookPart per spreadsheet
    // Parts have a common Root property and differing methods to set them
    // like WorkbookPart.Workbook sets the root for WorkbookPart
var workbookpart = doc.WorkbookPart;

    // Find sheet names and ids
var sheets = doc.WorkbookPart.Workbook.Sheets;
var sheetname = sheets.Descendants<Sheet>().FirstOrDefault().Name.Value;
var sheetId = sheets.Descendants<Sheet>().FirstOrDefault().SheetId.Value;
var id = sheets.Descendants<Sheet>().FirstOrDefault().Id.Value;

    // "Parts" hold collections even if that part only has one sub part
    // How many Worksheet parts should we expect?  One per Sheet?

var sheet1id = doc.WorkbookPart.Workbook.Descendants<Sheet>()
               .Where(p => p.Name.Value == "Sheet1")
               .Select(q => q.Id.Value).FirstOrDefault();

var worksheetpart = (WorksheetPart) workbookpart.GetPartById( sheet1id);
//  Removed below because I don't know how to read WorksheetPart id
//var worksheetpart = workbookpart.WorksheetParts.FirstOrDefault();

    // Worksheet is the root of WorkSheetPart
    // Worksheet.Descendants<Column>() has usable min, max, width, customWidth
    // Worksheet.Descendants<Row>() (or any other <type>) is empty
    // Why is Worksheet.SheetDimension empty? How do you determine sheet size?
    // Other than doc.WorkbookPart.GetPartById(sheetId) I have no idea
    // how to determine this worksheet's id, name, or sheetid
    // maybe their index as an Array matches the Sheets Id?
var worksheet = worksheetpart.Worksheet;

    // Expect multiple SheetData?  Why?
    // .Descendants< ... >() retrieves objects cast to their proper type
var sheetdata = worksheet.Descendants<SheetData>().FirstOrDefault();

    // Is this where we should access Rows or under Worksheet?
var row = sheetdata.Descendants<Row>().FirstOrDefault();

var cell = row.Descendants<Cell>().FirstOrDefault();

    // Print out the Cell's values (Need to reference shared values elsewhere)
cell.CellReference.Value.Dump();
cell.DataType.Value.Dump();
cell.CellValue.Text.Dump();

    // Close the spreadsheet
doc.Close(); 
```

（添加 DocumentFormat.OpenXml、WindowsBase.dll 的 LinqPad 查询引用和 DocumentFormat.OpenXml、DocumentFormat.OpenXml.Spreadsheet 和 DocumentFormat.OpenXml.Packaging 的命名空间导入以使其工作。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:27:08.963

我不知道，您想对数据做什么，我将发布从所有工作表中的所有单元格读取值的示例。代码取自文章，由 Mathias Brandewinder[在此处编写](http://www.clear-lines.com/blog/post/OpenXML-reading-the-cells-of-a-workbook.aspx)

```
var filePath = @"C:/Tests/protectedFile.xlsx";
         using (var document = SpreadsheetDocument.Open(filePath, false))
         {
            var workbookPart = document.WorkbookPart;
            var workbook = workbookPart.Workbook;

            var sheets = workbook.Descendants<Sheet>();
            foreach (var sheet in sheets)
            {
               var worksheetPart = (WorksheetPart)workbookPart.GetPartById(sheet.Id);
               var sharedStringPart = workbookPart.SharedStringTablePart;
               var values = sharedStringPart.SharedStringTable.Elements<SharedStringItem>().ToArray();

               var cells = worksheetPart.Worksheet.Descendants<Cell>();
               foreach (var cell in cells)
               {
                  Console.WriteLine(cell.CellReference);
                  // The cells contains a string input that is not a formula
                  if (cell.DataType != null && cell.DataType.Value == CellValues.SharedString)
                  {
                     var index = int.Parse(cell.CellValue.Text);
                     var value = values[index].InnerText;
                     Console.WriteLine(value);
                  }
                  else
                  {
                     Console.WriteLine(cell.CellValue.Text);
                  }

                  if (cell.CellFormula != null)
                  {
                     Console.WriteLine(cell.CellFormula.Text);                    
                  }
               }
            }
         } 
```

# python - 在 Python 中动态生成导入，专门针对 Django 模型

> ID：13355852
> 
> 赞同：2
> 
> 时间：2012-11-13T05:05:23.357
> 
> 标签：python, database, django, schema, models

给定一个 django 模型，我如何为它自动生成有效的导入？我有一个严格的内部函数（只有开发人员会使用它），它接受一个模型并返回一些关于它的信息。问题是，我不知道如何动态导入东西：

例如，我的应用程序结构可能是：

```
-myproject
    --books
    --music 
```

和功能：

```
def my_func(Model):
    from appname.models import Model
    ## Rest of function here ## 
```

有没有办法可以根据模型自动生成导入？我正在考虑访问 _meta 属性以获取 app_label，但显然，需要导入才能访问 Model._meta。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:23:38.290

我认为`get_model`是你需要的。

```
from django.db.models.loading import get_model
model = get_model('appname', 'ModelName') 
```

现在你可以这样做了。

```
objects = model.objects.all() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:41:30.330

您可以使用 动态导入模块`importlib`，这允许您将包指定为第二个参数。

```
import importlib
mod = importlib.import_module('modulename', 'packagename') 
```

如果您希望模块的名称与您的模型类匹配，您可以试试这个：

```
ModelClass.__name__ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T05:38:44.217

使用该`__import__`函数并将模型作为字符串传入。

```
def my_func(Model):
    modelVar = __import__("appname.models"+Model) 
```

# java - 在标准 OutputStream 上并发写入

> ID：13355859
> 
> 赞同：6
> 
> 时间：2012-11-13T05:05:55.540
> 
> 标签：java, sockets, queue, outputstream

我正在编写一个应用程序，其中涉及将相当大的数据块写入 OutputStream（属于 Socket）。使这有点复杂的是，通常有多个线程试图写入同一个 OutputStream。目前，我对其进行了设计，以便将数据写入其中的 OutputStream 位于其自己的线程中。该线程包含一个队列（LinkedList），它轮询字节数组并尽快将它们写入。

```
private class OutputStreamWriter implements Runnable {

    private final LinkedList<byte[]> chunkQueue = new LinkedList<byte[]>();

    public void run() {
        OutputStream outputStream = User.this.outputStream;
        while (true) {
            try {
                if (chunkQueue.isEmpty()) {
                    Thread.sleep(100);
                    continue;
                }
                outputStream.write(chunkQueue.poll());
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

这种设计的问题在于，随着越来越多的写入发生，越来越多的数据排队，并且写入速度没有任何提高。最初，当数据被放入队列时，它实际上是立即写入的。然后大约15秒左右后，数据开始滞后；从数据排队到数据实际写入的时间会有延迟。随着时间的推移，这种延迟变得越来越长。这是*非常*明显的。

解决此问题的一种方法是某种 ConcurrentOutputStream 实现，该实现允许在不阻塞的情况下发送数据，这样就不会开始备份写入（哎呀，那时就不需要队列了）。我不知道是否有这样的实现——我一直找不到——而且我个人认为甚至不可能写一个。

那么，有人对我如何重新设计它有任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:27:15.430

套接字的吞吐量是有限的；如果它比您的数据生成吞吐量慢，则必须缓冲数据，这是没有办法的。“同时”写作根本没有帮助。

您可以考虑在排队数据超过一定限制时暂停数据生成，以减少内存消耗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T17:50:10.457

我需要一个过滤器来拦截需要尽快关闭数据库连接的慢速连接，所以我最初使用 Java 管道，但是当仔细观察它们的实现时，它都是同步的，所以我最终使用一个小缓冲区和阻塞队列创建了自己的 QueueInputStream将缓冲区放入队列中一旦已满，它是无锁的，除非 LinkedBlockingQueue 使用的锁定条件在小缓冲区的帮助下应该很便宜，此类仅用于单个生产者和消费者每个实例，您应该传递一个 ExecutorService 以开始将排队的字节流式传输到最终的 OutputStream：

```
import java.io.IOException;
import java.io.OutputStream;
import java.util.concurrent.*;

public class QueueOutputStream extends OutputStream
{
  private static final int DEFAULT_BUFFER_SIZE=1024;
  private static final byte[] END_SIGNAL=new byte[]{};

  private final BlockingQueue<byte[]> queue=new LinkedBlockingDeque<>();
  private final byte[] buffer;

  private boolean closed=false;
  private int count=0;

  public QueueOutputStream()
  {
    this(DEFAULT_BUFFER_SIZE);
  }

  public QueueOutputStream(final int bufferSize)
  {
    if(bufferSize<=0){
      throw new IllegalArgumentException("Buffer size <= 0");
    }
    this.buffer=new byte[bufferSize];
  }

  private synchronized void flushBuffer()
  {
    if(count>0){
      final byte[] copy=new byte[count];
      System.arraycopy(buffer,0,copy,0,count);
      queue.offer(copy);
      count=0;
    }
  }

  @Override
  public synchronized void write(final int b) throws IOException
  {
    if(closed){
      throw new IllegalStateException("Stream is closed");
    }
    if(count>=buffer.length){
      flushBuffer();
    }
    buffer[count++]=(byte)b;
  }

  @Override
  public synchronized void write(final byte[] b, final int off, final int len) throws IOException
  {
    super.write(b,off,len);
  }

  @Override
  public synchronized void close() throws IOException
  {
    flushBuffer();
    queue.offer(END_SIGNAL);
    closed=true;
  }

  public Future<Void> asyncSendToOutputStream(final ExecutorService executor, final OutputStream outputStream)
  {
    return executor.submit(
            new Callable<Void>()
            {
              @Override
              public Void call() throws Exception
              {
                try{
                  byte[] buffer=queue.take();
                  while(buffer!=END_SIGNAL){
                    outputStream.write(buffer);
                    buffer=queue.take();
                  }
                  outputStream.flush();
                } catch(Exception e){
                  close();
                  throw e;
                } finally{
                  outputStream.close();
                }
                return null;
              }
            }
    );
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T07:46:40.520

我同意@irreputable 的观点，即并发写作丝毫没有帮助。相反，您应该关注生产方面，即您已经拥有的东西。

1.  使用 BlockingQueue 而不是 LinkedList。

2.  使用队列的阻塞轮询操作，而不是仅仅盲目睡眠 100msl，根据定义，这将平均浪费 50% 的时间。在很长一段时间内，这真的可以加起来。

# java - 我怎样才能做一个带有异常捕获的while循环，连续的？

> ID：13355871
> 
> 赞同：0
> 
> 时间：2012-11-13T05:07:57.827
> 
> 标签：java, loops, do-while

我试图捕捉最终起作用的异常，但现在我需要弄清楚如何让它循环。另外，我怎样才能让用户输入（int select）到循环之外？我可以尝试创建一个新功能，这可能会奏效。

```
do {
    System.out.print("How many integers shall we compare? (Enter a positive integer): ");
    try {
        select = intFind.nextInt();
    } catch (InputMismatchException e) {
        // Display the following text in the event of an invalid input
        System.out.println("Invalid input!");
        intFind.nextLine();
    }
} while (select < 0); 
```

然后

```
do
            {
                System.out.print("How many integers shall we compare? (Enter a positive integer): ");
                try {
                    b = Get();
                }
                catch (InputMismatchException e) {
                    // Display the following text in the event of an invalid input
                    System.out.println("Invalid input!");

                    intFind.nextLine();
                } copySel = b;  
            }while(select < 0); 
```

和

```
static int Get()
    {
        Scanner intFind = new Scanner(System.in);
        int select;
        select = intFind.nextInt();
        return select;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:14:27.050

要使其循环，请确保将`select`其初始化为小于 0 的值。但最好有一个条件`select < 2`，因为至少与值进行比较更有意义。

创建一个类似的方法

```
private int[] promptIntegers(int numberOfIntegers, Scanner sc) {
    int[] integers = new int[numberOfIntegers];
    //read ints
    //return the array
} 
```

并称它为

```
select = intFind.nextInt();
int[] integers = promptIntegers(select, sc);
//do the comparison among the integers 
```

# mysql - 为什么此查询适用于一个表但与另一个表超时

> ID：13355875
> 
> 赞同：1
> 
> 时间：2012-11-13T05:08:40.090
> 
> 标签：mysql, database, indexing

好的，我有 3 张桌子有问题：

```
`eng` with column english
`jap` with column japanese
`eng-jap` with column eng and column jap 
```

eng.english 是一个独特的英语句子，jap.japanese 是一个独特的日语句子，eng-jap 是一个翻译，包含一个来自 jap 的日语和一个来自 eng 的英语

我在这个问题的底部粘贴了表格的更多细节。

我的问题：为什么...

这个查询工作得很快：

```
SELECT * FROM eng WHERE english IN (SELECT eng FROM `eng-jap`); 
```

而这个需要 100 秒或超时：

```
SELECT * FROM jap WHERE japanese IN (SELECT jap FROM `eng-jap`); 
```

（关于第二个查询的一个奇怪的注释是，如果我在 phpmyadmin 中执行此操作，它需要 100 秒才能完成“如果它完成”，那么它会说它需要 0.024 秒。虽然它加载了 100 秒，但在我的网站上它也需要100 秒或超时）

正如您从下面的数据中看到的那样，所有这 3 个表的行数大致相同。eng 和 jap 表特别相似。

我怀疑问题出在表设置或索引或其他地方，所以我现在将粘贴所有相关细节：

```
JAP TABLE:

Keyname Type    Unique  Packed  Column  Cardinality Collation   
PRIMARY BTREE   Yes     No      ID          130296      A       
full    BTREE   Yes     No      japanese    130296      A       

Format  dynamic
Collation   utf8_general_ci
Rows    130,296
Row length ø    264
Row size ø  372 B
Next Autoindex  131,790

Type    Usage
Data    33,718.6    KiB
Index   13,652.0    KiB
Total   47,370.6    KiB

ENG TABLE:

Keyname Type    Unique  Packed  Column  Cardinality Collation
PRIMARY BTREE   Yes     No      ID      129637      A
full    BTREE   Yes     No      english 129637      A

Format  dynamic
Collation   utf8_general_ci
Rows    129,637
Row length ø    101
Row size ø  181 B
Next Autoindex  130,749

Data    12,899.3    KiB
Index   10,068.0    KiB
Total   22,967.3    KiB

ENG_JAP TABLE:
Keyname Type    Unique  Packed  Column  Cardinality Collation
PRIMARY BTREE   Yes     No      ID          139442  A
eng     BTREE   Yes     No      eng (150)       0   A
                            jap (150)           139442  A

                                Format  dynamic
Collation   utf8_general_ci
Rows    139,442
Row length ø    315
Row size ø  468 B
Next Autoindex  140,951

Data    42,945.5    KiB
Index   20,816.0    KiB
Total   63,761.5    KiB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:21:20.093

加入会加快您的查询速度吗？

```
SELECT * 
FROM   jap a INNER JOIN `eng-jap` b ON
            a.japanses = b.jap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:18:28.003

我怀疑这是因为比较了涉及非拉丁字符的列。也许这与数据库上定义的排序规则和字符集有关。尝试使用`utf8_bin`.

```
ALTER DATABASE `myDb` CHARACTER SET utf8 COLLATE 'utf8_bin'; 
```

二进制字符串比较更快，并且在您的情况下可能有意义。我敢肯定，在这种情况下，英语和日语查询的速度应该相同。

`JOIN`正如约翰指出的那样，也使用s

**编辑：**回答OP的评论，

```
SELECT * FROM eng WHERE english NOT IN (SELECT eng FROM `eng-jap`); 
```

可以更有效地写成：

```
SELECT * 
FROM   eng c 
WHERE  NOT EXISTS (SELECT * FROM `eng-jap` t WHERE c.english = t.eng); 
```

或者

```
SELECT     c.* 
FROM       eng c 
LEFT JOIN `eng-jap` t ON c.english = t.eng 
WHERE      t.eng IS NULL; 
```

我不确定哪个工作得更快，我假设`JOIN`但在我的测试`NOT EXISTS`中更快。可能是所有依赖于数据的。自己试试。

# actionscript-3 - Android 游戏应用的多点触控事件处理

> ID：13355876
> 
> 赞同：0
> 
> 时间：2012-11-13T05:08:50.907
> 
> 标签：actionscript-3, flash, touch, multi-touch, flash-cs6

我正在开发一个多点触控游戏，但我似乎无法工作，目前我在左下角有一个绘图 Dpad，当用户触摸 Dpad 按钮时，屏幕上的一个正方形会移动，当他们松开手指它会停止，所以我在右下角添加了两个按钮，现在如果用户按住 Dpad 然后按下右侧的底部之一，同时仍然按住，它会忘记手指向上并按下右侧的按钮，我怎样才能让它支持多点触控事件？

这是我的代码片段，因此您可以看到我在使用什么

```
this.addEventListener(Event.ENTER_FRAME,mainLoop);

//should make a game class
var _hero:Hero;
_hero = new Hero();
this.addChild(_hero);
_hero.init();

//variable for touch events
var touchOn:Boolean = false;
var touchX,touchY:Number;

//Direction buttons
var _DpadUp:Dpad_up;        _DpadUp = new Dpad_up();       _DpadUp.init(0);    this.addChild(_DpadUp);
var _DpadLeft:Dpad_Left;    _DpadLeft = new Dpad_Left();    _DpadLeft.init(3);     this.addChild(_DpadLeft);
var _DpadRight:Dpad_Right;  _DpadRight = new Dpad_Right();  _DpadRight.init(1);    this.addChild(_DpadRight);
var _DpadDown:Dpad_Down;    _DpadDown = new Dpad_Down();    _DpadDown.init(2);     this.addChild(_DpadDown);
var _DpadReset:Dpad_Down;   _DpadReset = new Dpad_Down();   _DpadReset.init(4);    this.addChild(_DpadReset);

var points:Object = new Object();

//Touch Events
Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

   //Constant update on move
   this.stage.addEventListener (TouchEvent.TOUCH_BEGIN, onTouchBegin);

function onTouchBegin(e:TouchEvent):void{
//Touch Screen code
//touchOn = true;
touchX = e.stageX;
touchY = e.stageY;
  }

 //Constant update on move
  this.stage.addEventListener (TouchEvent.TOUCH_MOVE, onTouchMove);

  function onTouchMove(e:TouchEvent):void{
touchX = e.stageX;
touchY = e.stageY;
  }

  this.stage.addEventListener (TouchEvent.TOUCH_END, onTouchFinish);

  function onTouchFinish(e:TouchEvent):void{
//touchOn = false;
touchX = -100;
touchY = -100;
  }

  //Main Loop
  function mainLoop(e:Event):void {

if(_DpadUp.hitTestPoint(touchX,touchY,true)){_hero.y -=4;}else{};
if(_DpadRight.hitTestPoint(touchX,touchY,true)){_hero.x +=4;}else{};
if(_DpadDown.hitTestPoint(touchX,touchY,true)){_hero.y +=4;}else{};
if(_DpadLeft.hitTestPoint(touchX,touchY,true)){_hero.x -=4;}else{};
if(_DpadReset.hitTestPoint(touchX,touchY,true)){trace("RESET hit");}else{};
_hero.update();
    } 
```

任何帮助都会很棒

这是我想要的控制系统[http://www.actionscript.org/forums/attachment.php3?attachmentid=38864&d=1352778655](http://www.actionscript.org/forums/attachment.php3?attachmentid=38864&d=1352778655) PS 我看过这个教程[http://gotoandlearn.com/play.php?id= 122](http://gotoandlearn.com/play.php?id=122)但他将触摸ID链接到一个附加了实例的对象，我只想拥有它，所以当创建触摸点时，它将包含在一个for循环中，围绕检查是否触摸Dpad。

现在这是我的主循环代码

```
function mainLoop(e:Event):void {
for each(var p:Point in m_oTouchIDs)
{
    trace(p);
if(_DpadUp.hitTestPoint(p.x,p.y,true)){_hero.y -=4;}else{};
if(_DpadRight.hitTestPoint(p.x,p.y,true)){_hero.x +=4;}else{};
if(_DpadDown.hitTestPoint(p.x,p.y,true)){_hero.y +=4;}else{};
if(_DpadLeft.hitTestPoint(p.x,p.y,true)){_hero.x -=4;}else{};
if(_DpadReset.hitTestPoint(p.x,p.y,true)){trace("RESET hit");}else{};
}
_hero.update();
} 
```

当我按下按钮时，什么也没有发生，而且通过该跟踪，我得到了 4 次这样的跟踪输出

```
(x=27, y=12)
(x=27, y=12)
(x=27, y=12) 
```

知道为什么吗？我发现，当我按下一个按钮时，它会显示它在该对象上的位置，所以如果我单击对象的左上角，它将返回 x:1 和 y:1。我如何测试碰撞？

我修复了它 :) 而不是使用 p.localX 我使用 p.stageX，这给了我触摸事件所在位置的 X 位置，对于本地，它会在与它发生碰撞的任何地方给出本地 x 位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:25:15.873

您必须使用[TouchEvent#touchPointID](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/TouchEvent.html#touchPointID)来识别触摸点，将其存储并在循环中您可以对所有这些触摸点进行命中测试。

```
protected var m_oTouchIDs:Object = {};

protected function onTouchBegin(e:TouchEvent):void
{
    m_oTouchIDs[e.touchPointID] = new Point(e.localX, e.localY);
}

protected function onTouchMove(e:TouchPoint):void
{
    //update
    var p:Point = m_oTouchIDs[e.touchPointID] as Point;
    p.x = e.localX;
    p.y = e.localY;
}

protected function onTouchEnd(e:TouchEvent):void
{
    delete m_oTouchIDs[e.touchPointID];//release
}

protected function loop(e:Event):void
{
    for each(var p:Point in m_oTouchIDs)
    {
        trace(p);//here you can compare touch position to execute some actions
    }
    /*
    //or

    for (var id:String in m_oTouchIDs) 
    {
        m_oOutput.appendText("ID:" + id + " - " + m_oTouchIDs[id] + "\n");
    }
    */
} 
```

# vb.net - 从其他字符串中删除字符串 1 次

> ID：13355881
> 
> 赞同：0
> 
> 时间：2012-11-13T05:09:43.710
> 
> 标签：vb.net, winforms

我的字符串是例如：`111`

我想`1`从我的字符串中删除

结果：

```
11 
```

我试过的：

```
Replace(string, "1", "") 
```

结果：空

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:12:30.403

查看函数的`Count`参数`Replace()`。

[http://msdn.microsoft.com/en-us/library/bt3szac5(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bt3szac5(v=vs.80).aspx)

```
Replace("11111", "1", "", , 1) 
```

它允许您限制替换的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T05:12:17.637

尝试这个：

```
Replace(yourstring, "1", "", , 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T07:55:21.163

我想有几种方法可以做到这一点。

其中两个是：（使用**正确**的方法）

```
 Dim s As String = "1111"
    Dim newstring1 As String = Strings.Right(s, s.Length - 1) 
```

和：（使用**子字符串**方法）

```
 Dim s As String = "1111"
    Dim newstring2 As String = s.Substring(1) 
```

但一定要检查`length of string`以避免得到`ArgumentException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T05:13:46.693

Replace 有一个 Count 参数，它表示进行字符串替换的次数。所以你想要的是：

```
Replace(string, "1", "", 1, 1) 
```

[http://msdn.microsoft.com/en-US/library/bt3szac5(v=VS.80).aspx](http://msdn.microsoft.com/en-US/library/bt3szac5(v=VS.80).aspx)

# objective-c - 如何在块中修改 ObjC 方法的参数？

> ID：13355882
> 
> 赞同：6
> 
> 时间：2012-11-13T05:09:46.880
> 
> 标签：objective-c, block

如果我有一个采用对象参数的 Objective-C 方法，并且所述方法使用块在内部完成其工作，有没有办法从块内修改该对象？

我的理解是，块通过在块中引用它们来从其父范围捕获变量，并且默认情况下它们被复制。如果我希望能够修改而不是使用周围对象的副本，我可以在它的声明前加上`__block`，但是我不能用方法参数这样做，因为我自己没有声明它，对吧？

例如：

```
- (void)doWorkWithString:(NSString *)someString
{
    [NSFoo doAwesomeClassMethodWithBlock:^{
        // How can I modify someString here directly?
        // By just changing someString, I'm changing the captured copy
    }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:45:35.987

“需要一个对象参数”

首先，您几乎肯定会因为不能拥有对象类型的参数或变量这一事实而感到困惑。您只能拥有指向对象的指针。所以是的，`__block`块捕获的非变量被块复制。但是这里的变量要么是原语，要么是对象指针，而不是“对象”。

如果您只需要改变对象指针指向的对象，并且不涉及将指针更改为指向另一个对象，那么您就不会更改变量。而且由于您没有更改变量，因此所有这些“复制变量”和其他`__block`东西都是完全无关的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:54:10.300

您所说的捕获是正确的；你可能想要做的是提供应该作为块主题的对象作为它的参数——就像你调用一个 C 函数一样。所以例如

```
void (^ someBlock)(NSString *) =
    ^(NSString *someString)
    {
        NSLog(@"length is %d", [someString length]);
    };

...

someBlock(@"String 1");
someBlock(@"A second string"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T06:26:58.203

我意识到我上面的评论令人难以置信的混乱。希望以下内容能澄清我想说的话：

```
- (void)yourMethod:(Foo *)parameterFoo
{
    __block Foo *blockVariable = [Foo someFoo];
    Foo *capturedVariable = [Foo anotherFoo];

    void(^doWorkBlock)(Foo *bp) = ^(Foo *bp){
        // If your block accesses a scoped variable that is not marked with __block, it will
        // retain it, so here capturedVariable and bp would be retained by the block
        capturedVariable.aProperty = 5.0;
        bp.aProperty = 10.0;

        // As you can see, you can modify the objects all you like.        
        // What you cannot do is assign something to capturedVariable or bp because they
        // were not marked as __block
        // WONT WORK
        capturedVariable = [Foo new];

        // However, you can write to blockVariable because it is marked as __block
        // WORKS
        blockVariable = [Foo new];
        // Remember, though that the block will not retain this variable itself because
        // of the __block 
    };

    // Note, it's weird for the block to take a parameter since it could just access the
    // variable directly.  This just serves to show how a block would handle a parameter.
    doWorkBlock(parameterFoo);
} 
```

# facebook - 打开图表 - 显示多个聚合

> ID：13355884
> 
> 赞同：2
> 
> 时间：2012-11-13T05:10:06.927
> 
> 标签：facebook, facebook-opengraph

我有一个开放的图形应用程序，它具有**事件**选项，有 2 个操作，**创建**和**推荐**。我还定义了 2 个聚合：**我推荐**的事件和**我创建**的事件。

但是在时间线中，我只能看到其中一个聚合，以先触发者为准。

在 facebook 示例中，它表明可以同时显示这两种聚合。是否可以显示两个聚合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:09:49.153

您的应用页面将包含所有聚合，但在主时间轴上您只能获得一个聚合。

# java - 定时线程池java

> ID：13355886
> 
> 赞同：0
> 
> 时间：2012-11-13T05:10:29.583
> 
> 标签：java, threadpool, benchmarking, timing

我需要计算方法完成所需的总时间，通常我使用：

```
long startTime = System.currentTimeMillis();
MethodWithThreads(); // the method which uses threading
long endTime = System.currentTimeMillis();
total = endTime - startTime; 
```

现在显然问题是主线程在其余线程之前终止。线程函数内部是以下代码：

```
int cores = Runtime.getRuntime().availableProcessors();
ExecutorService pool = Executors.newFixedThreadPool(cores-1);
for(int i = 0; i < 1000; i++)
     {
      pool.submit(new RunnableThread());
     }
pool.shutdown(); 
```

那么我将如何找到线程方法完成的总时间呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:12:33.793

愚蠢的我......应该做更多的研究。我在 while 循环中使用了 isTerminated 并等待终止。

```
 while(!pool.isTerminated())
            {
                try {
                 pool.awaitTermination(1000, TimeUnit.SECONDS);
                 } catch (InterruptedException ex) {
                    Logger.getLogger(ThreadManagement.class.getName()).log(Level.SEVERE,null, ex);
                 }
            }
            long endTime = System.currentTimeMillis(); 
```

# android - asyncTask 中的共享变量

> ID：13355887
> 
> 赞同：1
> 
> 时间：2012-11-13T05:10:35.360
> 
> 标签：android, android-asynctask

同样，关于 ayncTask 的另一个问题。我在下面做的正确吗？

```
Class UpdatePersonActivity{

   Person person;
.
.
.
.
.    

    private class UpdatePersonAsyncTask extends AsyncTask<Void, Void, Void> {

        private ProgressDialog dialog;
        private DBHandler dbHandler;

        @Override
        protected void onPreExecute() {

            dialog = ProgressDialog.show(UpdatePersonActivity.this, "Please wait..", "working..", true);  
            dbHandler = new DBHandler(UpdatePersonActivity.this);
        }

        @Override
        protected Void doInBackground(Void... params) {
            dbHandler.open();
            long id = dbHandler.updatePerson(person);
                        person.setId(id);
            dbHandler.close();

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {

            dialog.dismiss(); 
            Toast.makeText(UpdatePersonActivity.this, "Tenant "+person.getName()+" has been updated successfully!", Toast.LENGTH_SHORT).show();
            finish();

        }
    } 
```

基本上我在活动类中有“人”变量，并且相同的变量用于插入 DB 并在 DoInBackground 中更新其 ID，并且相同的变量用于 GUI 目的

我可以这样做吗？我试过了，它有效，但这是我不应该做的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:15:55.817

您应该使用 AsyncTask 中可用的类型。而不是`<Void, Void, Void>`使用`<Person, Void, Person>` 那么你的 doInBackground 将把一个人作为参数，并将返回类型 Person。onPostExecute 也将 Person 作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:16:12.760

至于在`AsyncTask`和 UI 线程之间共享变量，唯一需要考虑的是同步。如果 UI 线程（或任何其他线程）可能在`Person`中访问对象时正在更新您的对象`doInBackground`，那么您需要同步或以其他方式协调访问。如果在`AsyncTask`执行期间您可以保证对共享`Person`对象的唯一访问不会修改该对象，那么您可以省去同步。

但是，您应该意识到将其`AsyncTask`用作`Activity`. 如果您的活动因任何原因（例如，用户旋转手机等配置更改）重新启动，则`AsyncTask`更新的活动将不再有效。[此处](http://logc.at/2011/11/08/the-hidden-pitfalls-of-asynctask/)描述了该问题的描述以及有关如何处理该问题的一些建议。

有关此问题的更多讨论，请参见[此处](https://groups.google.com/d/msg/android-developers/vwRrlc84gy0/duZjVz0xkHcJ)`AsyncTask`，包括维护跨活动重新启动的进度对话框的方法。

# objective-c - 如何关闭 NSOpenPanel 或为什么它不会自动关闭？

> ID：13355888
> 
> 赞同：3
> 
> 时间：2012-11-13T05:10:46.033
> 
> 标签：objective-c, macos, cocoa, nsopenpanel

我很难理解如何关闭 NSOpenPanel。它**确实会**自动关闭，但它需要的时间比我想要的要长。

这是我的代码：

```
- (IBAction)startProcess:(id)sender
{

   NSString *path = [Document openVideoFile]; // open file

   // some other method calls here
}

// NSOpenPanel for file picking
+(NSString*) openVideoFile
{
   NSOpenPanel *openDialog = [NSOpenPanel openPanel];

   //set array of the file types

   NSArray *fileTypesArray = [[NSArray alloc] arrayWithObjects:@"mp4", nil];

   [openDialog setCanChooseFiles:YES];
   [openDialog setAllowedFileTypes:fileTypesArray];
   [openDialog setAllowsMultipleSelection:FALSE];

   if ([openDialog runModal] == NSFileHandlingPanelOKButton)
   {      
      NSArray *files = [openDialog URLs];

      return [[files objectAtIndex:0] path];   
   }
   else
   {
      return @"cancelled";
   }
   return nil; // shouldn't be reached
} 
```

有趣的是，如果用户单击“取消”，面板会立即关闭，但如果用户从列表中选择一个文件，面板会保持打开状态，直到程序到达 startProcess 方法的末尾。

如果有人知道如何立即关闭面板，在用户选择文件后单击“确定”按钮后，我将非常感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:20:25.930

我的猜测是系统实际上并没有启动删除打开面板的动画，直到运行循环的后期，`startProcess:`返回之后。因此，如果您的“<code>此处调用其他一些方法”需要很长时间才能运行，那么动画开始之前将需要很长时间。

理想的解决方案是在后台队列上执行缓慢的“其他方法调用”，因为您应该尽量避免阻塞主线程。但这可能需要您使各种当前不是线程安全的东西成为线程安全的，这可能很难。

另一种方法是将它们推迟到运行循环的后期：

```
- (IBAction)startProcess:(id)sender {
    NSString *path = [Document openVideoFile]; // open file
    dispatch_async(dispatch_get_main_queue(), ^{
       // some other method calls here
    });
} 
```

或者您可能需要将其推迟一段时间：

```
- (IBAction)startProcess:(id)sender {
    NSString *path = [Document openVideoFile]; // open file
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, NSEC_PER_SEC / 100), dispatch_get_main_queue(), ^(void){
        // some other method calls here
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:37:24.157

在后台线程上进行缓慢工作的建议很好。

但是要尽快关闭面板，只需`[openDialog close]`在从`-openVideoFile`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T16:18:02.430

另一种解决方案是给runloop一些时间来处理事件，然后再继续使用例如`[[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1.0]];`......

```
if ([openDialog runModal] == NSFileHandlingPanelOKButton)
{      
  [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1.0]];

  NSArray *files = [openDialog URLs];

  return [[files objectAtIndex:0] path];   
} 
```

# android - Android sdk Content Loader 遇到问题

> ID：13355889
> 
> 赞同：6
> 
> 时间：2012-11-13T05:10:59.383
> 
> 标签：android, eclipse, android-emulator, avd

启动 Eclipse 时出现错误消息。

“ **Android sdk Content Loader 遇到了问题**。

**parseSdkContent 失败**”

" *parseSdkContent 失败*

*java.lang.NullPointerException* "

我现在能做什么？我无法让 AVD 管理器启动模拟器。我也无法获得 SDK 管理器....

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-02T07:48:17.853

太**容易**了：

1.  删除您的“C:\Users\ [用户名]\.android\avd”
2.  删除所有 AVD
3.  重启eclipse和
4.  启动 AVD 管理器

**完毕**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-07T15:55:13.277

'Android SDK Content Loader' 遇到问题 - parseSdkContent failed 在使用 Android SDK 安装新的 Ubuntu 14.04.1 和 Eclipse ADT 后，'Android SDK Content Loader' 遇到 parseSdkContent failed, Could not initialize class android.graphics.Typeface 的问题.

![在此处输入图像描述](../Images/f7d64e588d4505093a26d29cc9fd08c1.png)

要修复它，请在 Android SDK Manager 中删除 Android L (API 20, L preview) 并重新启动 Eclipse。它适用于我的情况。甚至重新安装 Android L（API 20，L 预览版）。

取自，[http://android-er.blogspot.in/2014/07/android-sdk-content-loader-has.html](http://android-er.blogspot.in/2014/07/android-sdk-content-loader-has.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-28T05:16:08.287

问题出在您的 Windows 机器（如果您是 Windows 用户）上位于 .android（在 Windows 搜索中搜索）的***your-avd-name.ini（配置文件）中。***在 avd.ini 解析器期间发生任何错误时，Google ADT 插件会尝试访问为空的地图。***解决方法是删除有问题的 .ini 文件并重新创建您的 avd。***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-25T16:24:50.757

我曾经遇到过同样的问题。我通过删除我创建的所有 android 虚拟设备来修复它。通过单击 Android Virtual Device Manager，您将看到创建的所有虚拟设备。

# ruby - Ruby str[regex, number] 语法

> ID：13355892
> 
> 赞同：1
> 
> 时间：2012-11-13T05:11:04.580
> 
> 标签：ruby, regex

在另一个线程中，我遇到了这个 Ruby 表达式：

```
str[%r{.*//(.*)}, 1] 
```

这是什么语法？数字 1 是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T05:17:06.233

### 这是一个带有 MatchData 的正则表达式切片

基本上，这会根据正则表达式对字符串进行索引，并返回第一个匹配组。例如：

```
str = 'http://example.com'
str[%r{.*//(.*)}, 1]
# => "example.com" 
```

[String#slice](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-slice)有这样的说法：

> 如果提供了 Regexp，则返回 str 的匹配部分。如果数字或名称参数跟随正则表达式，则返回 MatchData 的该组件。如果给出了一个字符串，那么如果它出现在 str 中，则返回该字符串。在这两种情况下，如果没有匹配项，则返回 nil。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:27:55.410

您可以在 CodeGnome 的回答中看到正则表达式切片的解释。这里有一些关于 MatchData:`str[%r{.*//(.*)}, 1]`的内容等同于`str.match(%r{.*//(.*)})[1]`，并且它们的工作方式相同。`[]`版本更清晰、更短。

MatchData 充当数组和/或散列，可以使用正常的索引技术进行访问。

```
m = /(.)(.)(\d+)(\d)/.match("THX1138.")  # m is a MatchData
# and m is   #<MatchData "HX1138" 1:"H" 2:"X" 3:"113" 4:"8">    in irb
m[0]   # "HX1138"
m[1]   # "H"
m[1..2]    #["H", "X"] 
```

# c - IA32 (x86) 机器上的数据类型定义

> ID：13355894
> 
> 赞同：0
> 
> 时间：2012-11-13T05:11:38.873
> 
> 标签：c, x86

![在此处输入图像描述](../Images/6cc7b50949802cf5237ac6a277c396d8.png)

我以为short是1？为什么它增加了 8 个，从 16 个增加到 24 个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:14:55.293

这是数据类型[*对齐*](http://en.wikipedia.org/wiki/Data_structure_alignment)的问题。

> 有人可以向我解释为什么偏移量是 0、4、8、16 和 24 吗？

第一项始终位于结构的开头（偏移量 0）。

`char`占用一个字节，所以下一个偏移量是 1。但是，它是`double*`4 字节对齐的（为了性能），所以它转到下一个 4 字节偏移量 4。在 x86（32 位）上，指针是4 个字节，所以下一个偏移量是 8，去哪里`i`。

> 我知道 double 的字节大小是 8，int 是 4，但我认为 short 是 1？为什么它增加了 8 个，从 16 个增加到 24 个？

# jquery - 无法将数据保存到单元格中使用自动保存和handsontable

> ID：13355896
> 
> 赞同：2
> 
> 时间：2012-11-13T05:11:46.993
> 
> 标签：jquery, save, undefined, handsontable

我在使用 hansontable 从单元格保存数据时遇到了一些问题，可以使用一些建议。

问题是：

1.  自动保存 1 个单元格发送未定义。
2.  自动保存多个单元格也未定义。
3.  单击保存按钮时，控制台显示：`Save error. POST method is not allowed on GitHub Pages. Run this example on your own server to see the success message`

**代码：**

```
<script>
          var $container = $("#excel");
          var $console = $("#excelconsole");
          var $parent = $container.parent();
          var autosaveNotification;
          $container.handsontable({
            startRows: 1,
            startCols: <?=$num_rName+1?>,//count room type name from db
            rowHeaders: true,
            //colHeaders: ['Date/Room Types', 'Year', 'Price'],
            colHeaders: <?echo json_encode($_array);?>,
            minSpareCols: 0,
            minSpareRows: 1,
            contextMenu: true,
            onChange: function (change, source) {
              if (source === 'loadData') {
                return; //don't save this change
              }
              if ($parent.find('input[name=autosave]').is(':checked')) {
                clearTimeout(autosaveNotification);
                $.ajax({
                  url: "inc/excel_save.php",
                  dataType: 'json',
                  type: "POST",
                  data: change, //contains changed cells' data
                  complete: function (data) {
                    $console.text('Autosaved (' + change.length + ' cell' + (change.length > 1 ? 's' : '') + ')');
                    autosaveNotification = setTimeout(function () {
                      $console.text('Changes will be autosaved');
                    }, 1000);
                  }
                });
              }
            }
          });
          var handsontable = $container.data('handsontable');

          $parent.find('button[name=load]').click(function () {
            $.ajax({
              url: "inc/excel_load.php",
              dataType: 'json',
              type: 'GET',
              success: function (res) {
                handsontable.loadData(res.data);
                $console.text('Data loaded');
              }
            });
          });

           $parent.find('button[name=save]').click(function () {
            $.ajax({
              url: "inc/excel_save.php",
              data: {"data": $("#excel").handsontable('getData')}, 
              dataType: 'json',
              type: 'POST',
              success: function (res) {
                if (res.result === 'ok') {
                  $console.text('Data saved');
                }
                else {
                  $console.text('Save error');
                }
              },
              error: function () {
                $console.text('Save error. POST method is not allowed on GitHub Pages. Run this example on your own server to see the success message.');
              }
            });
          });

          $parent.find('input[name=autosave]').click(function () {
            if ($(this).is(':checked')) {
              $console.text('Changes will be autosaved');
            }
            else {
              $console.text('Changes will not be autosaved');
            }
          });
        </script> 
```

**excel_save.php**

```
<?
foreach($_POST as $key=>$val){//test the var passed
    echo "$key=$val<br />";
}
?> 
```

**数据加载** ![在此处输入图像描述](../Images/4e9f43cc33316bbbabb0b9a9effe8ea9.png)

**保存未定义** ![在此处输入图像描述](../Images/cf6390b90c40a4ecec6d61bce954e270.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T04:46:08.343

改变

`data: change,`

至

`data : {changes: change},`

[在这里](https://github.com/warpech/jquery-handsontable/commit/4cd99d2d0ac2db9cc0086d82ec1acb3a7a0b79ea)找到

# c# - 在向datagridview添加行时，除了最后一行之外没有插入任何值

> ID：13355897
> 
> 赞同：0
> 
> 时间：2012-11-13T05:11:58.127
> 
> 标签：c#, database, datagridview

我面临的问题对我来说似乎很简单，但我无法克服这个心理障碍。

为了更好地解释我的情况：我正在从 mdf 数据库 (Northwind) 中读取值，并将 ContactName 列传递给将值拆分为名字和姓氏的类方法。然后它将这些传回，我尝试将它们添加到我创建的正确列下的 DataGridView 中。

我的问题是，使用这个当前代码，它为每一列添加行，但除了最后一个之外，它们都是空白的，它显示了表格列中的最后一个名字和姓氏。

我觉得由于某种原因，显示空白的行可能会被覆盖，但我不确定。我在正确的轨道上吗？

这是我的代码：

```
 conn.Open();

        SqlDataReader reader = command.ExecuteReader();

        searchDataGridView.AllowUserToAddRows = true;

        Customer cust = new Customer();

        searchDataGridView.ColumnCount = 2;
        searchDataGridView.Columns[0].Name = "First Name";
        searchDataGridView.Columns[1].Name = "Last Name";

        int index = this.searchDataGridView.Rows.Count;

            while (reader.Read())
            {

                string customerid = reader.GetString(0);
                string contactname = reader.GetString(2);

                cust.NameSplit(contactname);

                this.searchDataGridView.Rows.Add();

                DataGridViewRow r = searchDataGridView.Rows[rowIndex];

                r.Cells["First Name"].Value = cust.FirstName;
                r.Cells["Last Name"].Value = cust.LastName;
            } 
```

虽然这对我来说似乎很拗口，但我希望我解释得足够清楚。如果您需要更多信息，请告诉我，我将非常乐意提供。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:13:40.717

添加行时不会更新 rowIndex 变量。此行需要修复：

```
rowIndex = this.searchDataGridView.Rows.Add(); 
```

# php - php-Script 更改字符串输入编码？

> ID：13355898
> 
> 赞同：0
> 
> 时间：2012-11-13T05:12:14.393
> 
> 标签：php, http, encoding, aes

我正在开发一个需要通过 php 脚本传递加密密码的项目。密码文本以 aes 加密。为了查看 php 脚本是否正确“读取”了输入字符串，我回显了输入字符串。不幸的是，加密的文本与通过 url 输入的不同。

原始测试：

> 腌制__1Y´NSÍMößlf QÑ≈ˆ9%ÃíB5I

在 mac 上使用命令加密：

> openssl enc -aes-256-cbc -salt -in input.txt -out encryptedtext.txt

用密码加密：`test`

解密命令：openssl enc -d -aes-256-cbc -in encryptedtext.txt

解密内容：`hi`

在我通过脚本运行它之后，我得到了这个：

> Salted__1YÂ´NSÃMööŸlï¬, QÃ'â‰ˆË†9%ÃƒÃB5I

我是 php 和这些东西的新手，所以我不确定 php 对输入字符串做了什么。据我所知，它似乎将编码更改为某种东西。如果有人知道为什么会发生这种情况以及如何防止它，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:30:25.323

无论如何，您所拥有的都是二进制乱码。这不是文字。它解析的任何文本都只是它在所选编码中恰好代表的字符的巧合。

...

是的，这意味着不同之处在于用于解释二进制乱码的编码不同。CLI 上的原始文件可能被解释为 UTF-8，而浏览器中的 PHP 输出 (?) 被解释为 Latin-1。或者其他一些组合。

如果您要输出到浏览器，请设置它应该解释内容的字符集：

```
header('Content-Type: text/html; charset=utf-8'); 
```

尽管您所拥有的不是某些特定字符集中的文本，但它并没有多大意义。

请参阅[每个程序员绝对、肯定需要了解的有关使用文本的编码和字符集以](http://kunststube.net/encoding/)获取背景信息。

# css - 创建新画布后奇怪的 Chrome 行为

> ID：13355903
> 
> 赞同：1
> 
> 时间：2012-11-13T05:12:46.463
> 
> 标签：css, google-chrome, canvas, webkit, html5-canvas

创建新画布后，div 内具有绝对或相对位置的元素（也具有相对或绝对位置）无法正确呈现，包括来自 chrome 的“范围”类型输入。只有在我将鼠标放在画布上之后，这些元素才会出现在正确的位置。在 Firefox 中，一切都按预期工作。任何提示如何解决这个问题？

**更新：**
根据要求，这里有一个小演示： [http](http://meli.rezzsolucoes.com.br/demo/)
: //meli.rezzsolucoes.com.br/demo/ 出于某种奇怪的原因，我无法从我的页面中获得确切的行为。但它足够接近

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:49:10.987

谢谢你的协助！当我进行演示时，我意识到当画布不在菜单上方时，一切正常。仍然不知道到底是什么问题，但似乎如果一个具有相对/绝对值的 div 与画布重叠（即使它不可见），webkit 开始出现渲染问题，天知道为什么。解决这个问题的最好方法是改变页面的设计。但就我而言，这不是一个选择。所以，我寻找一种方法来强制浏览器重绘/重绘。并发现了这个问题：

[如何强制 WebKit 重绘/重绘以传播样式更改？](https://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes)

解决方案，即使是一个肮脏的修复，它工作得很好。我仍然想知道为什么你不能在 webkit 上用相对/绝对的 div 覆盖画布。如果你们知道原因并向我解释，我将不胜感激。

再次感谢！

# javascript - 在 Gmaps 上居中地图标记？

> ID：13355908
> 
> 赞同：0
> 
> 时间：2012-11-13T05:14:09.750
> 
> 标签：javascript, google-maps, google-maps-api-3

[http://bit.ly/Uzu45r](http://bit.ly/Uzu45r)

我已经实现了 GMAPS V3，并且无法在#map 中将标记居中。如果您单击上述链接中的某个位置，它会转到该位置并按应有的方式进行缩放，但是，它不会将其居中。

用户单击地址列表中的位置后，如何使其居中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:38:39.317

在您的点击事件侦听器中

```
google.maps.event.addListener(marker, "click", function() { 
```

添加

```
map.setCenter(marker.getPosition()) 
```

在此处查看一个工作示例：http: [//jsfiddle.net/RASG/vA4eQ/](http://jsfiddle.net/RASG/vA4eQ/)
（将标记拖动到重新居中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:41:10.573

`map.setCenter(marker.getPosition());`

我还考虑让您的地图更大一点，因为当地图以标记为中心时，信息框将不在视野范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T05:45:06.780

您在打开 infowindow iz pans 时将 map OK buth 居中以使其可见。恕我直言，您有 2 个选项： 1\. 在将 infowindow pan 显示到标记位置后，但是 infowindow 可能会超出视口。2.使用Smartinfowindow控件

**将此 JS 包含到您的页面中**

```
http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/js/smartinfowindow.js 
```

尝试了解这个 DEMO 页面的来源（非常简单）。

```
http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html 
```

还有祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T05:51:42.120

更新您的代码，例如

```
var myLatLng = new google.maps.LatLng(c_lat,c_lng);
var myOptions = {
    zoom: 2,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.TERRAIN
}; 
```

# javascript - 图像不断移动

> ID：13355913
> 
> 赞同：0
> 
> 时间：2012-11-13T05:15:36.423
> 
> 标签：javascript, wordpress

我的主题在主页上带有一个滑块，上一个和下一个的图像不断上下移动。

如何重现：转到[我网站](http://bitsybride.com/category/wedding-cakes/)上的页面。单击标题徽标以访问主页。按 f5。这是左右漩涡应该在的地方。

主题创建者没有回复，也没有任何论坛寻求帮助。你能告诉我我应该对此做哪些修改：

```
<script type="text/javascript">
stepcarousel.setup({
galleryid: 'mygallery', //id of carousel DIV
beltclass: 'belt', //class of inner "belt" DIV containing all the panel DIVs
panelclass: 'panel', //class of panel DIVs each holding content
panelbehavior: {speed:400, wraparound:true, persist:true},
defaultbuttons: {enable: true, moveby: 3, leftnav: ['<?php bloginfo('template_directory'); ?>/images/prev.png', -90, 120], rightnav: ['<?php bloginfo('template_directory'); ?>/images/next.png', 15, 120]},
statusvars: ['statusA', 'statusB', 'statusC'], //register 3 variables that contain current panel (start), current panel (last), and total panels
contenttype: ['external'] //content setting ['inline'] or ['external', 'path_to_external_file']
 })

</script> 
```

我可以用css做点什么来固定位置吗？

```
#mygallery{ padding:0;position: relative;}

.stepcarousel{
position: relative; /*leave this value alone*/
overflow: scroll; /*leave this value alone*/
width: 980px; /*Width of Carousel Viewer itself*/
height:300px; /*Height should enough to fit largest content's height*/
margin:0 auto;
padding:0;
}

.stepcarousel .belt{
position: absolute; /*leave this value alone*/
left: 0;
top: 0px;
}

 .stepcarousel .panel{
float: left; /*leave this value alone*/
overflow: hidden; /*clip content that go outside dimensions of holding panel DIV*/
margin:0 40px 0 0;
border:none;
  }

 .thumb-title{
top:-105px;
right:0;
display:block;
position:absolute;
width: 250px; height:68px;
background: #eee url(images/line-h-l.png) top repeat-x;
margin:0;
overflow:hidden;
text-shadow:0 1px 1px #333;
}   

 .thumb-title-clear{
padding:10px 20px 10px 20px;
height:48px;
overflow:hidden;
}

 .thumb-title h2 a {
display:block;
text-decoration: none;
font-size:16pt;
line-height:18pt;
height:50px;
overflow:hidden;
font-weight:bold;
}

 .thumb-title h2 a:hover { 
}

 .stepcarousel .slideimg{
 float: left; /*leave this value alone*/
 background: #000 /*clip content that go outside dimensions of holding panel DIV*/
 margin:0; /*margin around each panel*/
 padding:0;   
 width:300px;
 height:300px;
 overflow:hidden;
 border-radius:15px;
 -moz-border-radius:15px; /* Firefox 3.6 and earlier */
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:57:07.067

好的，这就是我注意到的。我可以像这样在您的页面上重现该问题：如果我 F5 页面，那么一切看起来都很好。如果我然后调整浏览器的大小，图像会立即转到错误的位置。我在这里查看了 .js 文件的评论 [http://bitsybride.com/wp-content/themes/basement/js/slider.js?ver=3.4.2](http://bitsybride.com/wp-content/themes/basement/js/slider.js?ver=3.4.2) 并在第 9 行看到了这个：

> //** 08 年 8 月 27 日'- 如果调整窗口大小，导航按钮（如果启用）现在也会重新定位自己

我开始查看 .js 文件，发现如果我删除了 101-105：

```
$(window).bind("load, resize", function(){ //refresh position of nav buttons when page loads/resizes, in case offsets weren't available document.oncontentload
    config.offsets={left:stepcarousel.getoffset(config.$gallery.get(0), "offsetLeft"), top:stepcarousel.getoffset(config.$gallery.get(0), "offsetTop")}
    config.$leftnavbutton.css({left:config.offsets.left+config.defaultbuttons.leftnav[1]+'px', top:config.offsets.top+config.defaultbuttons.leftnav[2]+'px'})
    config.$rightnavbutton.css({left:config.offsets.left+config.$gallery.get(0).offsetWidth+config.defaultbuttons.rightnav[1]+'px', top:config.offsets.top+config.defaultbuttons.rightnav[2]+'px'})
}) 
```

加载或调整大小时，左/右漩涡将不再“跳跃”。我浏览了代码，发现“offsetTop”在某处被更改。

所以 。. . 话虽如此，请尝试编辑您的设置脚本以包含特定的“offsetTop”。我认为它在代码中的某个地方被“猜测”了。它看起来就像这样：

```
stepcarousel.setup({
    galleryid: 'mygallery', //id of carousel DIV
    beltclass: 'belt', //class of inner "belt" DIV containing all the panel DIVs
    panelclass: 'panel', //class of panel DIVs each holding content
    panelbehavior: {speed:400, wraparound:true, persist:true},
    defaultbuttons: {offsetTop: 242, enable: true, leftnav: ['http://bitsybride.com/wp-content/themes/basement/images/prev.png', -90, 120], rightnav: ['http://bitsybride.com/wp-content/themes/basement/images/next.png', 15, 120]},
    statusvars: ['statusA', 'statusB', 'statusC'], //register 3 variables that contain current panel (start), current panel (last), and total panels
    contenttype: ['external'] //content setting ['inline'] or ['external', 'path_to_external_file']
}) 
```

# iphone - 如何在 iPhone 的文本视图中放大和缩小？

> ID：13355924
> 
> 赞同：0
> 
> 时间：2012-11-13T05:17:48.903
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [带有缩放的 UITextview？](https://stackoverflow.com/questions/2537861/uitextview-with-zooming)

UITextview 中是否有任何放大和缩小选项。如果我点击文本视图，我希望文本放大。

帮助我如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:29:49.310

当您可以增加 UITextView 委托的字体大小时，缩放 UITextView 是没有意义的。

```
UITextView *textView = [UITextView alloc] initWithFrame:CGRectMake(0, 0, 320, 200)];
UIPinchGestureRecognizer *gestureRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(changeFontSize:)];
[textView addGestureRecognizer:gestureRecognizer];

- (void)changeFontSize:(UIPinchGestureRecognizer *)gestureRecognizer {
    UITextView *textView = (UITextView *)gestureRecognizer.view;
    float yourFontSize = gestureRecognizer.scale * FONT_SIZE;
    textView.font = [UIFont systemFontOfSize:yourFontSize];
} 
```

# php - 带有令牌的 API

> ID：13355926
> 
> 赞同：0
> 
> 时间：2012-11-13T05:17:54.090
> 
> 标签：php, api

我正在创建一个 API，它可以让游戏与用户信息进行通信并将分数提交到我的服务器。我正在使用来自[http://www.gen-x-design.com/archives/create-a-rest-api-with-php/的 API 脚本](http://www.gen-x-design.com/archives/create-a-rest-api-with-php/)

它没有谈论 api 密钥（或与此相关的令牌）。但是在获取从游戏发送的数据时，即：我希望用户从游戏中登录。他（我在上面的链接中使用的例子）说不要使用他在真实应用程序中的脚本中使用的方法来获取数据。

获取数据的最佳方式是什么。哪个是

密钥，游戏ID，电子邮件，密码

这是脚本

```
$data = RestUtils::processRequest();

switch($data->getMethod)
{
case 'get':
    // retrieve a list of users
    break;
case 'post':
    $user = new User();
    $user->setFirstName($data->getData()->first_name);  // just for example,    this should be done cleaner
    // and so on...
    $user->save();
    break;
// etc, etc, etc...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:45:09.870

你应该看看 oAuth 或者 Digest auth。

[http://oauth.net/](http://oauth.net)

[http://en.wikipedia.org/wiki/Digest_access_authentication](http://en.wikipedia.org/wiki/Digest_access_authentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:19:49.613

通常，您会让用户安全地登录服务并获得一次性令牌或密码 (OTP)。然后可以根据需要对该令牌进行加密并来回传递。

# unit-testing - 在没有源代码的情况下对 lib 或 DLL 中的套接字包装函数进行单元测试

> ID：13355929
> 
> 赞同：1
> 
> 时间：2012-11-13T05:18:39.710
> 
> 标签：unit-testing

我有一个关于单元测试的问题。我希望有人能给我一些建议，在此先感谢。

这是我的问题。我需要为基于谷歌单元测试（gtest）的库编写单元测试，这是关于套接字通信的。其中一些包装了低级套接字功能，这意味着我也需要对这些功能进行单元测试。顺便说一句，我无法访问 lib 的源代码 =.=#

例如，假设有一个名为 AcceptConnection(some arguments...) 的函数，可能它包装了 SOCKET accept(SOCKET, SOCKADDR*， INT*)。我该如何测试它。现在没有源代码。似乎这是一个关于如何为 Windows 套接字 API 编写单元测试的问题。

我不知道为这些包装函数编写单元函数是否合理，以及如何使单元测试更有效。

问候

余乔伊

[更新]

我花了一些时间试图找出是否有某种方法可以解决它。现在好像没有了。没有源代码甚至不知道它使用什么样的系统功能。最糟糕的方法是使用父进程启动单元测试应用程序并重定向系统调用不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T14:13:54.860

您可以尝试在操作系统系统调用上安装一些挂钩并检查正在进行的调用...

或者您可以尝试自动检查库中的 strace 输出。

[这](http://www.opensourceforu.com/2011/08/lets-hook-a-library-function/)是“linux hooks”搜索的第一个结果，似乎是在 linux 上挂钩调用的好方法。这是 Windows 上相同行为的参考[。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632589(v=vs.85).aspx)顺便说一句，我还没有尝试过任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:35:49.547

遇到此链接[http://code.google.com/p/googlemock/wiki/ForDummies](http://code.google.com/p/googlemock/wiki/ForDummies)，它允许模拟 gtest。

您可能应该模拟所有低级套接字函数并仅测试库中的代码。

# java - 使用字符串 indexOf java

> ID：13355931
> 
> 赞同：0
> 
> 时间：2012-11-13T05:19:02.177
> 
> 标签：java

我正在做一个程序，我需要返回第一次出现的 MyString 的索引。idk 在这种情况下如何使用 indexof。我认为它可能类似于 ch = indexof[] 但我不确定。我在这方面还是新手，api对我帮助不大

```
/*********************************************************************************
     This program will create classes that do similar operations to the Java String

     Javier Perez
     csc110
     11/5/12
    *********************************************************************************/
    package string.assignment;
    public class MyString
    {

        private char[] array;
        private int size;
        private int max;

        public MyString()
        {
            array = new char[25];
            max = 25;
        }
        public void setString(String newString)
        {
         if(newString.length() > 25)
         {
             System.out.println("/nEnter a number equal or less than 25 " );

         }
         else
         {
          for(int i=0; i < newString.length(); i++)
          {
            array[i] = newString.charAt(i);
          }
         }
        }

        public String toString()
        {
            return new String(array);
        }

        public char charAt(int index)
        {
            return array[index];
        }

        public boolean contains(char ch)
        {
            for(char c: array)
            {
                if(c == ch) return true;
            }
            return false;
        }
        public int indexOf( char ch )
        {
            ch = ch.indexOf();

        }
        return index; 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:23:38.977

要从数组中获取某个字符的索引，您必须遍历数组，并将每个字符与要检查的字符进行比较。如果任何字符匹配，立即返回索引。

此外，您的最后一个 return 语句应该在您的方法中，否则您的代码将无法编译。

所以，`indexOf`最简单的方法是这样的： -

```
public int indexOf( char ch ) {
    for (int i = 0; i < array.length; i++) {
        if (array[i] == ch) {
            return i;   // Character found, return current index
        }
    }
    return -1;    // Character not found. Return -1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:24:57.900

迭代您的字符数组，将所需字符与数组索引处的字符匹配。如果找到匹配，则不是`index`变量中具有默认值的位置，`-1`并打破循环。从方法中返回`index`值。

```
 public int indexOf( char ch ){
        int index = -1;
        for(int i=0; i < array.length; i++){
         if(array[i] == ch){
             index = i;//first match found, stop searching
             break;
         }
       }
       return index; 
     } 
```

这样，它返回字符串的字符数组中字符的**第一个匹配位置**`-1`，否则返回.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:25:46.837

如果它确实编译了，那么你的剪切和粘贴就是不好的——那`return index`最后在做什么？

无论如何 - 我没有使用你自己的`charAt`，而不仅仅是一个字符比较。

```
 public int indexOf( char ch )
    {
        int result = -1;
        for(int i = 0; i <  size; i++) {
            if (charAt(i) == ch) {
                result = i;
                break;
            }
        }
        return result;

    } 
```

# asp.net-mvc - ASP.NET MVC - 服务层 - 业务层 - 数据层 (EF) - SQL DB :: 数据传输？

> ID：13355932
> 
> 赞同：5
> 
> 时间：2012-11-13T05:19:15.483
> 
> 标签：asp.net-mvc, entity-framework, architecture, n-tier-architecture

我计划使用 ASP.NET MVC 作为 UI 层、WCF 作为业务层和 SQL DB 作为数据库来创建 3 层应用程序。

我的业务层将拆分为服务层 (WCF)、业务层（业务逻辑、业务模型）、数据层（实体框架 - 数据库优先）。

*   数据层将使用实体框架的实体实现存储库方法，如 Get、GetById、Update、Insert。

*   业务层由业务规则及其模型组成。（这是在 POCO 中）。

*   服务层只是将业务功能公开为可能的服务方法。

*   MVC 中的“M”只是表示模型 - 控制器使用它来将其转换为 JSON / XML 并将其提供给 View 或直接由 View 使用。

虽然上面提到的方法很常见，但如果这是一个好的设计，我仍然想确认它？

我真正的问题是关于层之间的数据传输（UI（MVC）-服务（WCF）-业务-数据层）

假设我启动了一个 GET 操作以从数据库中检索 Account 及其 Traits。在数据库中，它表示为两个不同的表。

*   帐户 --> 帐号、名称、类型
*   AccountTraits --> Id、AccountNumber、Category 等。

在 Datalayer 中，我想编写一个方法来
使用 EF 获取给定 AccountNumber 的这两个表记录。

我的业务模型有两个类，称为 Account 和 AccountTraits。AccountTraits 的对象集合被聚合到 Account 类中。

喜欢，

```
public class Account
{
    string AccountNumber;
    List<AccountTraits> Traits;
} 
```

现在，如果我想用其数据填充这些域对象，我可以在我的数据层中使用如下所示的 EF 查询。

```
public IEnumerable<Account> GetAccountAndItsTraits(string AccountNumber)
{
var query = from a in db.Accounts
            select new Accounts() {
            AccountName = a.AccountName,
            Traits = from t in a.AccountTraits
            ....

return query;
} 
```

1.  这是从数据层 (EF) 填充业务模型 POCO 的常规方法吗？

2.  现在，在应用了一些业务逻辑之后，我想将这些集合返回到 UI。如何将这些转移到服务层以及如何将其提供给 UI 模型？

3.  我是否必须在 WCF 中使用确切的类定义将 DataContract 定义为业务模型，然后**将数据“复制”**到它并将其提供给 UI？那么 UI 应该从 WCF 代理对象获取数据并**“复制到它的表示模型”**（它应该有自己的 Accounts 和 AccountTraits - 可能带有一些额外的字段）？

如果您能对这些主题有所了解，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T07:03:18.743

我绝对不会纯粹基于架构使用 WCF，除非您特别需要它提供的功能。即支持某些企业对企业需求的某些传输/协议。MVC 现在有了 WebAPI，它基本上与从 WCF 迁移的东西相同，并且更易于使用，并且可以满足您的架构需求而不会那么麻烦。

此外，我什至不会使用 WebAPI，除非我公开了一个我知道肯定会在我的应用程序之外使用的东西。如果这个服务层只会被这个 MVC 应用程序使用，那么我会取消它。您仍然可以拥有业务层 + 数据层并在没有它的情况下保持关注点分离。这只是我自己的看法。

通常我会使用视图模型，它们是为视图量身定制的模型。它们允许我独立地重构视图或数据库，并且只需要更改数据转换代码。即数据库字段更改可能只需要在查询中进行调整，并且 ViewModel 保持不变，因此使用该视图模型的所有视图都保持不变。几乎与您查询实体并将其转换为 a 的方式`new Account`相同，除了我将我的 AccountVM 命名为视图模型（专门用于**视图的****模型**）

 **我个人从我的控制器中调用这些类型的数据查询/转换方法。然后控制器只需将 AccountVM 或集合传递给`View(vm)`其中 vm 是保存 AccountVM 或集合的变量的名称。

这就是我将数据从 DB 获取到 View 的方式。无论如何，EF 实体类和 VM 类通常非常相似，有时甚至完全相同。我觉得中间业务实体类与一个或另一个过于相似，无法真正保证额外的类和额外的复制。

因此，我认为回答您的几个问题： 1 是的，基本上我认为这是一个好方法。

2 这个 GetAccountAndItsTraits 是从 Controller 调用的，而 View 是基于您的业务 poco（或者我称之为 ViewModel）的。因此，业务层的回报与您的模型所期望的相符。我不会在这里有服务层。但是，我可能有一些专门用于将 EF 实体转换为视图模型的方法，这将在调用业务模型函数之后发生。换句话说，业务模型将返回 EF 实体，然后映射函数将这些实体映射到这种情况下所需的任何视图模型，因为您可以拥有许多使用相同业务方法的视图模型和视图。我使用 EF Code First，所以我的实体类已经非常接近 POCO，所以它们泄漏到其他层并不会冒犯我。**

# android - DeviceMonitor 不断报错“无法开始监控 emulator-5554”，我应该如何解决？

> ID：13355942
> 
> 赞同：9
> 
> 时间：2012-11-13T05:20:20.170
> 
> 标签：android, eclipse, android-emulator

我在模拟器上运行了一次 eclipse 并获得了所需的输出，但是当我运行另一个项目时，在给出最后一个输出的一段时间后，我一直在收到 DeviceMonitor 错误：“无法开始监控 emulator-5554”，你知道吗我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:25:41.977

我有时与模拟器有同样的问题我通常更喜欢清理所有项目或右键单击来自 DDMS 的模拟器并单击重新启动 ADB 或最终方法是重新启动 Eclipse，因为它不是可行的解决方案，但它对我有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:22:02.800

假设您只有一个模拟器在运行，请尝试

```
adb kill-server
adb start-server 
```

这应该重新启动 adb 服务器连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-05T17:56:11.163

我同意。事实上，我发现删除模拟器然后恢复它可以解决很多问题。由于各种原因，我的“运行应用程序”命令失败了，但这可以解决它们。顺便说一句，我在 Windows 下运行——我知道 Unix 不那么脆弱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-18T08:03:40.057

我对 Android Studio 也有同样的问题。我单击设备下拉菜单并单击“AVD Manager”。然后我右键单击模拟器并将其删除。然后我在同一窗口中单击“创建虚拟设备”按钮并再次创建相同的模拟器。然后，当我单击“运行应用程序”按钮时，它可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-26T04:34:08.237

在 AVD 上尝试更新版本并更新您的 SDK

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-30T23:26:42.923

我发现在我的手机上激活 USB 调试会导致 android studios 中的 AVD 管理器抛出 adb 连接错误。希望这对其他人有所帮助。

我尝试了所有常见的修复程序，但问题仍然存在。但是我意识到，当我重新启动 android studios 时，我的手机始终是优先设备。我在手机上运行我的应用程序，现在出现连接错误。所以我认为这是一个长镜头，但也许 adb 服务器将我的设备优先于虚拟设备。果然关闭我手机上的 USB 调试选项将其从设备列表中删除，现在我的虚拟设备都可以正常工作了！

# c++ - LuaBridge 和成员函数

> ID：13355945
> 
> 赞同：4
> 
> 时间：2012-11-13T05:20:47.490
> 
> 标签：c++, class, lua, member-functions, luabridge

我今天刚刚下载 **了 LuaBridge**，到目前为止对它非常满意。我注意到的一件事是，我能够规避将 lua_State 作为函数参数的正常要求。

我可以做这个：

```
//C++ files
void love(int i) {std::cout << i;}

luabridge::getGlobalNamespace(lua)
  .addFunction("love", love);

-- Lua file
love(8) 
```

它会工作得很好，但如果我做任何事情：

```
//C++ files
struct Tester {
  int number;
  void MemFunction (int i) { std::cout << i;}
  static void Register(lua_State*); 
};

void Tester::Register(lua_State *lua) {
  luabridge::getGlobalNamespace(lua)
    .beginClass<Tester>("Tester")
    .addConstructor <void (*) (void)> ()
    .addData("number", &Tester::number)
    .addFunction("MemFunction", &Tester::MemFunction)
 .endClass();
}

--Lua file
  c = Tester()      -- works...
  c.number = 1      -- works...
  c.MemFunction(10) -- nothing! 
```

我在文档中读到的任何内容都没有表明无法注册具有非 lua_State 参数的成员函数，而且我已经看到一些 LuaBridge 代码可以毫无问题地做到这一点。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T05:42:50.740

您必须使用方法调用语法

```
c:MemFunction(10) 
```

我建议您使用[来自 github 的较新版本](https://github.com/vinniefalco/LuaBridge)，该版本具有大量文档。它还允许有关输入参数和返回值的一些额外的灵活性。

# javascript - 使用复选框 Javascript Jquery 构建 SQL 语句

> ID：13355947
> 
> 赞同：-1
> 
> 时间：2012-11-13T05:21:09.623
> 
> 标签：javascript, jquery, sql

有人问过类似的问题，但我找不到我正在寻找的答案。编程新手也无济于事，所以请原谅我的无知。

我需要使用以下复选框构建查询。假设我的基本 SQL 字符串是`SELECT * FROM table1`. 我想添加一个涉及以下复选框的 WHERE 子句，具体取决于是否选中了复选框。

`<input type="checkbox" id = "AZ"/> Arizona</li>
<input type="checkbox" id = "CA" /> California </li>`

因此，如果选中顶部的复选框，例如，它会将 SQL 语句转换为`SELECT * FROM table1 WHERE state = 'AZ'`. 如果两者都未选中，则 SQL 字符串保持不变`SELECT * FROM table1`。

`<input type="checkbox" id = "single"/> Single</li>
<input type="checkbox" id = "double" /> Double </li>`

然后，如果选择了下一组复选框中的一个，它将进一步添加到查询中。例如，`'SELECT * FROM table1 WHERE state = 'AZ' AND type='single'`。

当然，我有更多的复选框选择，使最终目标有点长，但这是它的要点。

大多数答案都涉及PHP，我没有经验。有没有直接的 javascript/jQuery 解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:24:10.163

JavaScript 不讲 SQL。

通常 JavaScript 会将数据发送到服务器，服务器将构造一个 SQL 字符串并执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:48:13.060

“编程新手也无济于事，所以请原谅我的无知。” 如果您是编程新手，那么您一次也尝试做很多事情。带有 JavaScript 表单的网页不能（至少不应该）更新数据库。我对您的建议是使用 PHP 而不是 JavaScript，此外：正如您所指出的，有很多信息涵盖了如何在 PHP 中执行此操作 :)

# c++ - 避免对 iOS 应用程序进行逆向工程，有可能吗？

> ID：13355950
> 
> 赞同：2
> 
> 时间：2012-11-13T05:21:30.340
> 
> 标签：c++, ios, encryption

> **可能重复：**
> [保护可执行文件免受逆向工程？](https://stackoverflow.com/questions/6481668/protecting-executable-from-reverse-engineering)

作为主要目标，我想加密有关使用的头文件和库的信息

大多数情况下，我的应用程序是用 C++ 编写的，仅使用 iOS SDK 中的标准 I/O 方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:25:58.363

应用商店在将应用程序的可执行文件（或大部分）发送到用户设备之前，已经对其进行了加密。iOS 内核在启动您的应用程序时会在内存中解密文件的加密部分。

由于 Objective-C 在加载动态库（如 UIKit 和 Foundation）时按名称查找类，并在运行时按名称查找方法选择器，因此这些类和选择器字符串必须出现在您的可执行文件中，但它们位于加密的部分文件。

越狱者已经可以通过在内核解密后检查应用程序的内存来破解 iOS 加密系统。

花更多时间试图隐藏这些字符串几乎肯定是浪费时间。

### 更新

如果您的目标市场位于世界上越狱很普遍的地区，您可能希望寻找使用服务器后端的应用程序创意，并使用应用内购买将服务器访问权限作为消耗品出售。您的服务器可以[验证用户是否已为服务器访问付费](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html)，并且您可以禁止试图窃取访问权限的帐户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T05:25:40.553

混淆本质上是有缺陷的——根据定义——它必须始终与用于将应用程序恢复到其原始形式的代码一起提供。

技术娴熟的攻击者（如果有人试图进行逆向工程，您将面临这种情况）不会受到任何混淆方案的太大阻碍。

# excel - Excel 2010 作为 SSAS 2008R2 的客户端不显示命名集中的所有成员

> ID：13355958
> 
> 赞同：2
> 
> 时间：2012-11-13T05:22:54.457
> 
> 标签：excel, mdx, olap

在 Excel 2010 中有一个创建自定义 mdx 集的功能。我已经创建了一个 - 它结合了来自不同维度的成员并且在 SSMS 中工作得很好，但在 Excel 中我只能看到集合的一半成员。这是从 Excel 中捕获的 MDX 查询：

```
WITH
SET [13,14,Trash, MarkDown] as {
([Product].[Category].&[13], [Discounting].[Liquidity].[All discs])
,([Product].[Category].&[14], [Discounting].[Liquidity].[All discs])
,([Product].[Category].[All products], [Discounting].[Liquidity].[Liq group].&[1])
,([Product].[Category].[All products], [Discounting].[Liquidity].[Liq group].&[0])
}
SELECT NON EMPTY {[13,14,Trash, MarkDown]} DIMENSION PROPERTIES PARENT_UNIQUE_NAME,HIERARCHY_UNIQUE_NAME ON COLUMNS
  FROM [CubeName] 
WHERE ([Measures].[On hand qty]) 
CELL PROPERTIES VALUE, FORMAT_STRING, LANGUAGE, BACK_COLOR, FORE_COLOR, FONT_FLAGS 
```

Excel 仅显示 Category13 和 Category14 的值。SSMS 做得更多——它显示了所有值。

在 Excel 中，它看起来像这样：

```
 | category  13  |  category   14
on hand qty  |    150        |     200 
```

在 SSMS 中：

```
 | category  13  |  category   14  |  All products  | All products
             | All discs     |  All discs      |  Liq group 1   | Liq group 0
on hand qty  |    150        |     200         |      35        |      85 
```

我试图在服务器端进行此设置，但它没有用 - 结果在 excel 中是相同的。是否可以在 Excel 中设置所有值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:44:38.403

我创建了两个隐藏成员

```
 MEMBER [Product].[Category].[All Liq 1] as ([Product].[Category].[All], [Discounting].[Liquidity].[Liq group].&[1])
  MEMBER [Product].[Category].[All Liq 0] as ([Product].[Category].[All], [Discounting].[Liquidity].[Liq group].&[0]) 
```

然后创建集

```
{[Product].[Category].&[13], [Product].[Category].&[14], [Product].[Category].[All Liq 1], [Product].[Category].[All Liq 0]} 
```

它完全符合 excel 的要求。

# ios - 在其他环境中使用 Plists

> ID：13355959
> 
> 赞同：2
> 
> 时间：2012-11-13T05:23:33.597
> 
> 标签：ios, xml, cross-platform, plist

Pists 是否仅限于在 OSX 和 iOS 系统上使用？

我正在考虑我的应用程序的架构，将数据导入 iPhone 应用程序的众多方法之一是通过 Plist，您也可以保存到它。

现在，如果说 plist 能够以原始格式从应用程序中导出，那么它可以通过 Android 或 Windows Phone 格式访问吗？还是需要转换？

我理解它的方式是 Plist 是一种 XML 格式，对吗？我可能错了，但这就是我在查看文件时可以组成的内容。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:38:43.140

属性列表，如[*Property List Programming Guide*](http://developer.apple.com/library/Mac/documentation/Cocoa/Conceptual/PropertyLists/AboutPropertyLists/AboutPropertyLists.html#//apple_ref/doc/uid/10000048i-CH3-54303)中所述，是以下任何一种：

*   一个字符串
*   一团二进制数据
*   一个约会
*   一个整数
*   一个浮点数
*   布尔值
*   一组属性列表
*   一个字典，其键是字符串，其值是属性列表

序列化属性列表有两种常用方法。

一种是您知道的 XML 格式。这种格式记录在[`plist(5)`手册页上](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/plist.5.html)。

另一种是二进制格式，它更紧凑，编码和解码速度更快。它在任何地方都没有正式记录，但它的格式在 的注释和代码中有所描述，该代码[`CFBinaryPlist.c`](http://opensource.apple.com/source/CF/CF-744.12/CFBinaryPList.c)包含在 Apple 的 Core Foundation 框架的开源版本中。

如果您的数据不使用日期或二进制 blob，您可能会发现使用 JSON 比使用 XML plist 更容易。从 iOS 5 和 OS X 10.7 (Lion) 开始，Apple 提供了用于序列化和反序列化 JSON 的[`NSJSONSerialization`类](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)，并且几乎所有平台和语言都有 JSON 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:28:23.940

你说的对。Plist 实际上是一个`xml`带有 a 的格式化文件，`plist header`可以被任何`xml parser`. 由于`xml`可以在各种环境中使用，`plist`可以做同样的事情。只需将其后缀更改为`xml`，您就可以为所欲为。

# haskell - 将树转换为功能图形库树的优雅方法？

> ID：13355968
> 
> 赞同：5
> 
> 时间：2012-11-13T05:25:46.380
> 
> 标签：haskell, graph

我的问题涉及将树转换为其[功能图形库](http://hackage.haskell.org/package/fgl-5.4.2.4)表示形式的明显笨拙，这需要显式引用节点名称才能插入更多节点/边。

具体来说，我递归地构建了一棵玫瑰树（目前是 a `Data.Tree.Tree a`from `containers`），并希望将其转换为 a`Gr a ()`以针对它调用各种函数。为此，可以首先遍历树（使用供应单子或 FGL 的状态单子类型之一，如 NodeMapM）并用标识符标记每个节点：

```
{-# LANGUAGE TupleSections #-}
import Control.Monad.Supply
import Data.Graph.Inductive
import Data.Tree

tagTree :: Tree a -> Supply Int (Tree (a,Int))
tagTree (Node n xs) = do
  xs' <- sequence (map tagTree xs)
  s   <- supply
  return $ Node (n,s) xs' 
```

然后`evalSupply (tagTree tree) [1..]`，然后使用类似的东西

```
taggedTreeToGraph :: Tree (a,Int) -> Gr a ()
taggedTreeToGraph (Node (n,i) xs) =
  ([],i,n,map (((),) . snd . rootLabel) xs)
    & foldr graphUnion empty (map taggedTreeToGraph xs)
      where
        graphUnion = undefined -- see 'mergeTwoGraphs' in package 'gbu' 
```

当然，这两个阶段可以合并。

那么，这是进行这种转换的好方法吗？或者是否有一种我遗漏的更简单的方法，或者我应该使用将（希望非常通用的）树状数据结构转换为 FGL 树的抽象？

编辑：我想这个问题的重点是我的原始解析器只有四行长，并且使用了非常简单的组合器，例如`liftA (flip Node [])`，但是要更改返回的表示似乎需要上面的大代码，这很奇怪。

（我很乐意`Gr a ()`直接从解析器（使用 Parsec 的简单应用解析器）和 monad 转换器生成一个，前提是它需要对解析器进行微创更改。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:02:16.393

You can use a `Writer` to collect the list of nodes and the list of edges to pass to `mkGraph`. Using lists with `Writer` is not efficient, so I'm using `DList` instead, and converting back to lists at the end.

```
import Data.Tree
import Data.Graph.Inductive
import Data.DList (singleton, fromList, toList)
import Control.Monad.RWS
import Control.Arrow

treeToGraph :: Tree a -> Gr a ()
treeToGraph t = uncurry mkGraph . (toList *** toList) . snd $ evalRWS (go t) () [1..]
  where go (Node a ns) = do
          i <- state $ head &&& tail
          es <- forM ns $ go >=> \j -> return (i, j, ())
          tell (singleton (i, a), fromList es)
          return i 
```

# html - 按钮周围的边框问题 - CSS

> ID：13355974
> 
> 赞同：3
> 
> 时间：2012-11-13T05:27:12.027
> 
> 标签：html, css, web-applications, dhtml

我在css中装饰按钮有问题：

CSS文件中的代码是：

```
button
{

   font-family: Tahoma;
   color: #FFFFFF;
   font-size: 13px;
   font-weight: bolder;
   width: 180px;
   height: 50px;
   border:1px solid black inherit;
   background-repeat: no-repeat;
   margin: 0 10px;
   position: relative;
   background: url(C:/w3schools_demo/willpower/Images/button1.PNG);
} 
```

加载页面后，它显示：带有-黑色边框的按钮和上传的图像（如我所愿），但图像和黑色边框之间有一些白线。看截图。如何修复/删除那条线？

带着敬意！

![在此处输入图像描述](../Images/25813bfd0ad67a4454d6f6549a525ff9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-11-14T13:04:38.920

我在使用按钮时遇到了类似的问题。默认情况下，单击它们时会出现大约 1px 的边框。尝试将此添加到您的按钮类：

```
button {
     outline: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-07T22:30:21.940

我发现在 css 中简单地切换焦点按钮可以摆脱这种情况，因为按钮在被点击后会自动成为焦点。并且在焦点之后添加了一个大纲：

`<button> Hello there </button>`

/ *CSS脚本*/

`.button:focus { outline:none; }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-08T13:34:49.753

尝试：

```
border-style:none; 
```

大多数，如果不是所有元素都以某种方式获得浏览器的默认样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T05:32:49.457

改变

```
border:1px solid black inherit; 
```

至

```
border:1px solid black; 
```

从属性中删除`inherit`关键字`border`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T05:49:45.483

设计网页时的一个问题是浏览器解释代码的方式不同，因为它们的处理方式不同。我通常在开始时做的一种方法是添加以下 css 以避免浏览器提供的任何默认设置。

```
html,body,li,ul,img,form,h1,h2,h3,h4,h5,h6,hr{ margin:0px; padding:0px; } 
```

在您的情况下，它可能是缺少填充属性的`img`元素或元素。`button`也可能是您的图像只是小于 180 像素/50 像素。

希望能帮助到你！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T05:52:10.717

对于背景，而不是图像，将其更改为一种颜色，然后检查白色边框是否仍然出现 - 答：我尝试使用海军颜色，白线消失。

![在此处输入图像描述](../Images/6501a9b458d4e633723f9c79c0e80d32.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-07T14:20:29.483

```
button {
   font-family: Tahoma;
   color: #FFFFFF;
   font-size: 13px;
   font-weight: bolder;
   width: 180px;
   height: 50px;
   border:1px solid black inherit;
   /* this should work if any one encounters this problem  */

   border: none;

   background-repeat: no-repeat;
   margin: 0 10px;
   position: relative;
   background: url(C:/w3schools_demo/willpower/Images/button1.PNG);
} 
```

# lisp - Scheme中的函数

> ID：13355975
> 
> 赞同：0
> 
> 时间：2012-11-13T05:27:13.760
> 
> 标签：lisp, scheme

好的，所以我最近发布了一个关于在 Scheme 中创建递归函数的问题，该函数将生成从下面定义的列表中调用的偶数函数：

```
(define list0 (list 'j 'k 'l 'm 'n 'o 'j) )
(define list1 (list 'a 'b 'c 'd 'e 'f 'g) )
(define list2 (list 's 't 'u 'v 'w 'x 'y 'z) )
(define list3 (list 'j 'k 'l 'm 'l 'k 'j) )
(define list4 (list 'n 'o 'p 'q 'q 'p 'o 'n) )
(define list5 '((a b) c (d e d) c (a b) )
(define list6 '((h i) (j k) l (m n)) )
(define list7 (f (a b) c (d e d) (b a) f) ) 
```

对于我的偶数函数，我创建了这个递归函数：

```
(define mylist '(1 2 3 4 5 6 7))
(define (evens lst)
(define (do-evens lst odd)
    (if (null? lst)
        lst
    (if odd
        (do-evens (cdr lst) #f)
        (cons (car lst) (do-evens (cdr lst) #t)))))
        (do-evens lst #t)) 
```

但是现在我正在尝试创建一个'oddrev'函数，它可以这样做： (oddrev 1st) 它应该返回一个新列表，该列表由从 1st 获取的奇数元素组成，但与它们的原始顺序相反。也就是说，如果我输入：

```
(oddrev '(a b c d e f g)) 
```

哪个会/应该返回：（geca）

```
(oddrev (LIST 's 't 'u 'v 'w 'x 'y 'z)) 
```

哪个会/应该返回：（ywus）

```
(oddrev '((h i) (j k) l (m n))) 
```

这将/应该返回：

```
(l (h i)) 
```

和

```
(oddrev '()) 
```

这将/应该返回一个空列表等。

我想知道是否有人可以告诉我这看起来如何。我正在尝试学习计划以供将来参考，我听说这是一种很酷的编程语言，但截至目前，我在路上遇到了一些困难。对新人的任何帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:51:59.533

好的，把它分解成几部分，首先得到每一个奇怪的元素。

好吧，既然你已经有了这个很好的小功能来获得偶数，我们怎么能用它来获得赔率呢？好吧，如果我们告诉它它真的是从偶数开始的，所以`(do-evens lst #t)`我们说`(do-evens lst #f)`. 现在我们将得到所有奇怪的元素！为了清楚起见，也许我们想在这个函数的这个主体中改变 even => odd （一个简单的查找替换就可以了）

接下来我们必须扭转它。有两种方法可以做到这一点，手动或通过 Scheme 库。如果你想手工完成，我会让你解决这个挑战。否则`reverse`将为我们完成这项工作。

我会让你弄清楚如何结合这两个步骤。这不是太难！快乐心机

# php - 如何获取类别以显示wp电子商务中的所有产品

> ID：13355977
> 
> 赞同：0
> 
> 时间：2012-11-13T05:27:14.473
> 
> 标签：php, wordpress

我在这里有代码，但是如何将其设置为特定类别

比如 ID 为“1”的“电子”

这是代码

```
<?php 
// get the product categories
$product_categories = wp_get_object_terms( wpsc_the_product_id(), 'wpsc_product_category', array('fields' => 'ids') );
// arguments
$args = array(
'post_type' => 'wpsc-product',
'post_status' => 'publish',
'posts_per_page' => -1,
'orderby' => 'rand',
'tax_query' => array(
    array(
        'taxonomy' => 'wpsc_product_category',
        'field' => 'id',
        'terms' => $product_categories
    )
)
);
$related_products = new WP_Query( $args );
// loop over query
if ($related_products->have_posts()) :
echo '<ul>';
while ( $related_products->have_posts() ) : $related_products->the_post();
?>
    <li><a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></li>
<?php
endwhile;
echo '</ul>';
endif;
// Reset Post Data
wp_reset_postdata();
?> 
```

它在该页面上显示产品，我需要根据我放入的类别显示产品，以便它与页面产品不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:37:52.350

仅从该类别中选择帖子，在循环中使用如下代码：

```
query_posts(array('category_name' => 'Electronic', 'showposts' => '1'));
if (have_posts()): while (have_posts()) : the_post();
... 
```

**更新** 示例：

```
<?php
query_posts( array( 'category_name' => 'Electronic',
                    'showposts'     => '1' ) );  // Replace '1' with posts quantity per page
echo '<ul>';
if ( have_posts() ): while ( have_posts() ) : the_post();
  ?>

<li><a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></li>

<?php
endwhile;
  echo '</ul>';
endif;
// Reset Post Data
wp_reset_postdata();
?> 
```

我认为最后的代码可以替换问题的脚本。不过不确定，因为无法测试。

注意：当然，您必须创建类别并将帖子分配给该类别，或使用现有类别：**wpsc_product_category**。

# python - 将 lxml.etree 导入 python 时出错

> ID：13355984
> 
> 赞同：8
> 
> 时间：2012-11-13T05:28:00.543
> 
> 标签：python, python-2.7, lxml

我在我的mac上安装了一个lxml，当我像这样输入python时

```
本地主机：lxml-3.0.1 苹果$ python
Python 2.7.3（v2.7.3:70274d53c1dd，2012 年 4 月 9 日，20:52:43）
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] 在 darwin
输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
>>> 从 lxml 导入 etree
回溯（最近一次通话最后）：
  文件“”，第 1 行，在
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml-3.0.1-py2.7-macosx-10.6-intel.egg/lxml/etree.so , 2): 未找到符号: ___xmlStructuredErrorContext
  引用自：/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml-3.0.1-py2.7-macosx-10.6-intel.egg/lxml/etree.so
  预期在：平面命名空间
 在 /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml-3.0.1-py2.7-macosx-10.6-intel.egg/lxml/etree.so

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-24T14:09:15.290

我有同样的问题。如果你已经使用 pip 安装了它，如下所示：`pip install lxml`

相反，尝试使用

```
STATIC_DEPS=true pip install lxml 
```

这为我解决了这个问题。

在[这个网站上找到](http://roderickhodgson.com/blog/2012/10/27/building-python-lxml-on-mac-os-x-10-dot-7/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-01T22:36:39.160

如果您已经安装了`libxml2`，那么它可能只是没有选择正确的版本（默认情况下安装了 OS X 的版本）。特别是，假设您已安装`libxml2`到`/usr/local`. 您可以检查共享库`etree.so`引用的内容：

```
$> otool -L /Library/Python/2.7/site-packages/lxml-3.2.1-py2.7-macosx-10.7-intel.egg/lxml/etree.so 
/Library/Python/2.7/site-packages/lxml-3.2.1-py2.7-macosx-10.7-intel.egg/lxml/etree.so:
    /usr/lib/libxslt.1.dylib (compatibility version 3.0.0, current version 3.24.0)
    /usr/local/lib/libexslt.0.dylib (compatibility version 9.0.0, current version 9.17.0)
    /usr/lib/libxml2.2.dylib (compatibility version 10.0.0, current version 10.3.0)
    /usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.5)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
```

在系统安装版本中检查该符号：

```
$> nm /usr/lib/libxml2.2.dylib | grep ___xmlStructuredErrorContext 
```

对我来说，它不存在于系统安装的库中。但是，在我安装的版本中：

```
$> nm /usr/local/lib/libxml2.2.dylib | grep ___xmlStructuredErrorContext
000000000007dec0 T ___xmlStructuredErrorContext 
```

要解决此问题，请确保您的安装路径首先出现在`DYLD_LIBRARY_PATH`：

```
$> export DYLD_LIBRARY_PATH=/usr/local/lib
$> python
>>> from lxml import etree
# Success! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-12T22:30:57.177

如果您在 2022 年在 M1 Mac 上遇到此问题，请尝试以下操作：

```
pip3 uninstall lxml

pip3 install lxml 
```

这会将 lxml 升级到最新版本（在我的情况下为 4.7.1 与 4.6.3）并清除可能导致此问题的其他轶事证据出现问题的文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-29T02:49:37.537

运行以下命令安装 lxml 包。

```
pip install lxml --user 
```

应该解决这个问题。我在 MAC OSX 10.7.5 上测试过，效果很好。

# css - SCSS 是否支持内联注释？

> ID：13355989
> 
> 赞同：63
> 
> 时间：2012-11-13T05:28:38.887
> 
> 标签：css, sass

我可以在我的`.scss`文件中保留这样的内联评论吗

```
thead {
    display: table-header-group; // h5bp.com/t
} 
```

我不想在我的 CSS 输出中看到这条评论。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-11-13T05:36:53.813

在 SASS 中有两种不同类型的注释需要考虑。

1.  单行注释`//`将被 .scss 预处理器删除，并且不会出现在您的 .css 文件中。
2.  多行注释`*/`是有效的 CSS，将在从 .scss 到 .css 文件的翻译之间保留*。

    *   除了一些压缩模式，除非你以`!`. 请参阅[http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#comments](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#comments)。

听起来内联评论`//`就是您要查找的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-10T06:41:59.990

**是**的，你可以在**SCSS**中做到这一点。

使用内联注释：`//`.

这些单行注释在 CSS 输出中被删除。

# emacs - o为什么eshell会显示黑屏？

> ID：13355990
> 
> 赞同：0
> 
> 时间：2012-11-13T05:29:30.520
> 
> 标签：emacs

在 eshell 中，我想从 freebsd 端口安装 mew：

```
 $uname -a
 FreeBSD mybsd.zsoft.com 9.0-RELEASE-p3 FreeBSD 9.0-RELEASE-p3 #0: Fri Jul  6 11:09:08 CST 2012     ***@mybsd.zsoft.com:/usr/obj/usr/src/sys/MYKERNEL  i386
 $ cd /usr/ports/mail/mew
 $ sudo make install clean 
```

输入root密码后，eshell窗口变黑。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:22:28.093

我应该使用“*sudo”而不是“sudo”

# blackberry - 什么是黑莓企业服务器？

> ID：13355991
> 
> 赞同：0
> 
> 时间：2012-11-13T05:29:34.567
> 
> 标签：blackberry

谁能解释一下当从黑莓设备发送 Http 请求时会发生什么？

我听到了很多事情，我对 MDS 连接服务等术语感到困惑。我什至听说我们需要更改 BES 中的一些设置才能接收 http 请求。真的需要更改设置吗？

作为黑莓应用程序开发的新手，请以清晰的方式解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:34:18.370

BES：把它想象成一个由一个组织的所有 BB 设备组成的专用网络。公司通常运行自己的 BES 服务器，这些服务器放置在自己的网络中并受其控制。BES 中的每个设备只能连接到该网络中的设备、BES 服务器以及可通过 BES 服务器访问的那些网络资源（通常是其他企业应用服务器）。通讯是加密的。还提供与企业邮件系统的集成。此外，BES 中的每个 BB 都由 BES 管理员管理，他可以控制每个设备的策略 - 例如，他可以为给定设备禁用 GPS 或互联网。他还可以从设备远程部署或删除应用程序。

MDS：它是 BES 的一个组成部分。

BIS：这是针对特定客户的。当您的 BB 在 BIS 中时，您的数据会被压缩发送到 RIM 服务器，该服务器将其中继到目的地。这是一个代理。这也是允许推送邮件和消息的原因。要让您的 BB 加入 BIS，您需要通过移动运营商与其签约。

更多信息：
[http ://docs.blackberry.com/en/admin/deliverables/7335/BES_overview_658676_11.jsp](http://docs.blackberry.com/en/admin/deliverables/7335/BES_overview_658676_11.jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:17:30.140

当从 BlackBerry 设备发送 Http 请求时，BlackBerry 客户端应用程序使用 HTTP 连接到 web 服务/servlet 并从客户端 -> servlet -> 客户端传输字节 []。客户端应用程序在尝试连接之前首先检查网络覆盖范围。

有多种方法可以创建从 BlackBerry 设备到 HTTP 服务器（Web 服务、servlet 等）的 HTTP 网络连接。这包括通过 Wifi、APN/Direct TCP、BlackBerry Internet Service (BIS) 和 BlackBerry Enterprise Server (BES/MDS) 发送 Http 请求，这需要将您的 BlackBerry 连接到 BES。

BlackBerry Mobile Data System (MDS) 是一个灵活的应用程序开发框架，也是 BlackBerry Enterprise Server (BES) 的一个组件。BlackBerry MDS 提供安全、无线连接和可管理性选项。BlackBerry MDS 服务包含在 BlackBerry Enterprise Server 软件中，可处理所有浏览器或连接请求并相应地路由请求。与 BIS 或其他连接不同，BlackBerry 智能手机和 BlackBerry Enterprise Server 之间的数据流动是加密的，通过 BlackBerry MDS 建立的连接提供跨支持 BlackBerry 智能手机服务的无线服务提供商的漫游。由于此连接要求手机在 BES 中注册，因此它对运行应用程序造成了一些限制，因为并非每个用户都可能已注册。所以，

可以调用以下方法以使用可用连接发出 http 请求。首先是Wifi，其次是BIS，第三是TCP，最后是MDS。

```
public String checkInternetConnection()
{
    String connectionString = null;
    if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)&& RadioInfo.areWAFsSupported(RadioInfo.WAF_WLAN))
    {
        //WiFi is available
        connectionString = ";interface=wifi";
    }
    // Is the carrier network the only way to connect?
    else if((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT)
    {
        //Carrier coverage
        String carrierUid = getCarrierBIBSUid();
        if(carrierUid == null)
        {
            // Has carrier coverage, but not BIBS. So use the carrier's TCP network
            connectionString = ";deviceside=true";
        }
        else
        {
            // otherwise, use the Uid to construct a valid carrier BIBS request
            connectionString = ";deviceside=false;connectionUID="+carrierUid + ";ConnectionType=mds-public";
        }
    }
    // Check for an MDS connection instead (BlackBerry Enterprise Server)
    else if((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS)
    {
        connectionString = ";deviceside=false";
    }
    // If there is no connection available abort to avoid bugging the user unnecssarily.
    else if(CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE)
    {
        Dialog.alert("There is no available connection.");
    }
    return connectionString;
}

/**
 * Looks through the phone's service book for a carrier provided BIBS network
 * @return The uid used to connect to that network.
 */
public String getCarrierBIBSUid()
{
    ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;
    for(currentRecord = 0; currentRecord < records.length; currentRecord++)
    {
        if(records[currentRecord].getCid().toLowerCase().equals("ippp"))
        {
            if(records[currentRecord].getName().toLowerCase().indexOf("bibs") >= 0)
            {
                return records[currentRecord].getUid();
            }
        }
    }
    return null;
} 
```

# mysql - 这是在 PHP 中使用 MySQL @variables 的正确方法吗？

> ID：13355994
> 
> 赞同：0
> 
> 时间：2012-11-13T05:29:56.510
> 
> 标签：mysql, mysql-workbench

我收到了一个 MySQL 查询：

```
SET @COD_PAIS = 3, @ID_CARTERA = 8; 
SELECT 
    C.DES_PERMADURACION AS Item
    , B.POR_MADURACION AS Percentage_Distribution 
FROM dficha_mes A 
JOIN det_maduraciones B 
    ON ( A.ID_FICHA_MES = B.ID_FICHA_MES ) 
JOIN mpermaduraciones C 
    ON ( B.ID_PERMADURACION = C.ID_PERMADURACION ) 
WHERE A.ID_CARTERA = @ID_CARTERA 
AND A.COD_PAIS = @COD_PAIS 
AND B.F_CORTE = ( 
                    SELECT 
                        F_ULT_CIERRE_MENSUAL 
                    FROM mpaises 
                    WHERE COD_PAIS = @COD_PAIS ); 
```

该表有西班牙文的行和列。

当我使用 PHP 运行此查询时`mysql_query()`，我收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT 
        C.DES_PERMADURACION AS Item
        , B.POR_MADURACION AS Percentage_Distrib' at line 2 
```

然而，这个查询可以在 MySQL Workbench 甚至 SQLYog 上完美运行。

这里有任何指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:34:25.177

您不能在 PHP 中的单个字符串中提交多个查询。您需要将它们作为单独的调用来执行`mysql_query()`，或者使用 mysqli 接口来代替（无论如何您都应该这样做）。

[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:31:39.460

我相信`mysql_query()`一次只能执行 1 个查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:40:49.233

首先，请忘记 mysql_* 命令，因为它们已被弃用。

其次，如前所述，您一次不能使用多个查询。

三、看这里： [MySql variables and php](https://stackoverflow.com/questions/1580700/mysql-variables-and-php)

在这里： [http ://www.webhostingtalk.com/showthread.php?t=360276](http://www.webhostingtalk.com/showthread.php?t=360276)

# php - 如果不满足条件，则隐藏附加的表单字段

> ID：13355995
> 
> 赞同：0
> 
> 时间：2012-11-13T05:30:08.263
> 
> 标签：php, javascript, jquery, forms

我有这个附加脚本，它在我的表单上添加了一组字段。根据附加字段，我希望“upg”选择字段仅在“状态”值为“实际”时显示。此条件应适用于所有附加字段集，因此如果 status1 是 Actual 我有一个 upg 字段但 status2 是 Ghost，则应该隐藏 upg2 字段等等。你们建议最好的方法是什么？

```
 <script type="text/javascript">
    var count = 0;
    $(function(){
    $('a#add_field').click(function(){
    count += 1;

    $('#activation').append(
        '<div class="row-fluid">'                   
        +'<div class="span12" style="border-bottom:1px #dddddd; background-color:#e8e8e8; ">'

                +'<div style="float:left; width:7%;">'
                +'<label>&nbsp;</label>'                    
                +'<select name="status' + count + '" id="status' + count + '"  class="input-small">'
                +'<option value="Ghost">Ghost</option>'
                +'<option value="Actual">Actual</option>'
                +'</select>'
                +'</div>'

                +'<div style="float:left; width: 7%">'
                +'<label>Type</label>'
                +'<select id="upg' + count + '" name="upg' + count + '"  class="input-small" >'
                +'<option value="" selected="&nbsp;" >&nbsp;</option>'
                +'<option value="Exp" >Exp</option>'
                +'<option value="Post" >Post</option>'
                +'<option value="Upgrade" >Upg</option>'
                +'<option value="Retail" >Retail</option>'
                +'</select>'
                +'</div>'
         );     
      });   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:49:35.280

if($('#status').value == "Actual"){ //追加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:51:44.477

我个人发现将一组复杂的 html（尤其是使用某种类型的逻辑来确定最终 dom 的 html）分解为多个 jquery 对象更容易。虽然将多个对象附加在一起的速度较慢，但​​与内联相比，有时它值得清晰。

无论如何，您需要一些数据或设置来确定初始选择的状态选项，并且您可以使用相同的值来显示/隐藏相应的 upg。我建议你把它分成两个附加，在将它附加到 dom 之前隐藏它，这样你就看不到 upg select flash：

```
var some_setting_or_db_val = 'ghost';

var row = $('<div class="row-fluid">'                   
    +'<div class="span12" style="border-bottom:1px #dddddd; background-color:#e8e8e8; ">'

            +'<div style="float:left; width:7%;">'
            +'<label>&nbsp;</label>'                    
            +'<select name="status' + count + '" id="status' + count + '"  class="input-small">'
            +'<option value="Ghost">Ghost</option>'
            +'<option value="Actual">Actual</option>'
            +'</select>'
            +'</div>'

            +'<div style="float:left; width: 7%">'
            +'<label>Type</label>'
            +'<select id="upg' + count + '" name="upg' + count + '"  class="input-small" >'
            +'<option value="" selected="&nbsp;" >&nbsp;</option>'
            +'<option value="Exp" >Exp</option>'
            +'<option value="Post" >Post</option>'
            +'<option value="Upgrade" >Upg</option>'
            +'<option value="Retail" >Retail</option>'
            +'</select>'
            +'</div>');

if(some_setting_or_db_val == 'ghost'){
    row.find("#upg" + count).hide();
}

$('#activation').append(row) 
```

# python - 如何防止 Jinja2 模板中的循环 {% include %} 调用

> ID：13355996
> 
> 赞同：3
> 
> 时间：2012-11-13T05:30:08.450
> 
> 标签：python, django, template-engine, jinja2, circular-reference

我有一个 Django SaaS 应用程序，用户创建了自己的 Jinja2 模板（在一个非常沙盒环境中，对于那些只是畏缩的人），这些模板保存到数据库中。我有一个`template_type`字段，指出给定模板是“包含”还是“完整模板”（完整模板当然可以包含“包含”）。问题是用户可以将`{% include "foo" %}`一个名为`"bar"`的模板`{% include "bar" %}`放入`"foo"`模板中，从而导致一种`RuntimeError: maximum recursion depth exceeded`不利于性能的情况。

有没有一种很好的方法来处理这种情况，它不包括验证正则表达式（例如，`r'\{%\s+include'`）在用户模板创建期间检查包含（“确保递归导入永远不会进入数据库，否则你的服务器将崩溃”不'不太喜欢我）。

### 我失败的尝试

我首先使用了一个自定义加载器，它只包含用户的“包含”::

```
def get_source(self, environment, template):
    """
    Returns the source of the template or raises ``TemplateNotFound``.
    This loader is for use with an environment which intends to load each
    template from a string, since only includes are loaded from here.
    """
    try:
        template = self.snippets[template]
    except KeyError:
        raise jinja2.TemplateNotFound(
            template, message=u'Snippet "{s}" was not found'.format(s=template)
        )
    else:
        source = template['source']
        return (source, None, lambda: True) 
```

这样做的问题是我基本上阻止了自己利用 Jinja2 的[Bytecode Cache](http://jinja.pocoo.org/docs/api/#bytecode-cache)，这显然要求所有模板都可用于`load(...`调用，而调用`get_source(...`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T12:06:11.513

要解析模板并检查包含，我使用以下代码：

```
 ast = env.parse(template_text)
    for each in meta.find_referenced_templates(ast) :        # find the (% includes %} 
```