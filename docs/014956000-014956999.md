# StackOverflow 问答 14956000-14956999

# xpages - 使用 OpenNTF 项目名片的 xpages 的 ibm 名片集成

> ID：14956003
> 
> 赞同：0
> 
> 时间：2013-02-19T11:11:35.353
> 
> 标签：xpages, xpages-extlib, xpages-ssjs

使用[http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Business%20Card](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Business%20Card)当它在静态上下文中呈现时，我可以实现这个没问题，例如，用显示硬编码名称和用户名。

问题：

在从 xml 提要填充重复的重复控件中使用此自定义控件时。使用 XPath，我们可以获得电子邮件和显示名称。

xpage 将根据显示名称呈现带有 url 的列表。但是，javascript 需要刷新页面才能重建链接以实际执行提示文本和弹出窗口。

有没有人在动态上下文中实现了这一点，例如连接中的人的搜索栏？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:20:38.657

这个项目很老了。看一下extlib项目（exlibx包）中XPagesSBT.nsf中的名片控件（Java/lib控件）。

# activerecord - Active Record 关系别名

> ID：14956013
> 
> 赞同：0
> 
> 时间：2013-02-19T11:12:01.650
> 
> 标签：activerecord, yii

我正在尝试使用 ActiveRecord 的“with”方法为关系设置别名。问题是我只能为最后一个元素设置别名：

```
$ar->with(array('rel1.rel2' => array('alias' => 'rel2Alias')); 
```

我必须为 AC 类的两列检索“rel1”和“rel2”，所以我必须为“rel1”关系设置不同的别名，但我不知道该怎么做。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:30:48.617

如果通过仔细阅读文档找到解决方案：

```
$ar->with(array('rel1' => array('alias' => 'rel1Alias', 'with' => array('rel2' => array('alias' => 'rel2alias')))); 
```

# javascript - 使用 RequireJS 模块化 CSS 样式表

> ID：14956014
> 
> 赞同：5
> 
> 时间：2013-02-19T11:12:14.650
> 
> 标签：javascript, html, css, templates, requirejs

我创建了一个这样的模板：

```
// template.tpl
<div>
    <input id="an_input"></input>
</div> 
```

和一些CSS：

```
// stylesheet.css
input {
    background: #000000;
} 
```

最后，这是一个精简的模块：

```
define([
    'jquery',
    'text!template.tpl',
    'text!styleshet.css'
], function($, html, css){      
    var view = $('#sample_div');
    view.append($(html));

    var regex = /^([^\s\}])/gm;

    var styles = css.replace(regex, '#'+view.attr('id')+' $1');
    var style = $('<style>\n'+styles+'\n</style>');
    view.prepend(style);
}); 
```

本质上发生的事情是模板被加载并放入`#sample_div`. 在 CSS 文件作为文本加载后不久，每个项目都以视图 ID 为前缀。

为 CSS 添加前缀后，就会创建样式标签并将其放置在视图内。

现在，这完美地工作，好吧，它并不漂亮，也没有留下太多的错误余地。但是我编写了这段代码来帮助演示我需要什么。

我需要能够加载带有视图特定样式表的模板，其中表单中的样式只会应用于视图并且只会覆盖全局样式。

上面例子的问题是它是一个 hack，一个针对 CSS 的正则表达式，以及一个新的样式标签的构建，这不是我想要的。我一直在研究 javascript CSS 解析器以获得更简洁的解决方案，尽管 JCSSSP 引起了我的注意，但它把许多函数放入了全局命名空间，而 jquery.parsecss 似乎只适用于文档中已有的样式。

有没有人对我想要实现的目标有任何经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:37:53.503

大多数加载器都有 CSS 插件来为您处理插入：

RequireJS CSS 插件 [https://github.com/tyt2y3/requirejs-css-plugin](https://github.com/tyt2y3/requirejs-css-plugin)

CurlJS CSS 插件与主发行版捆绑在一起： [https ://github.com/cujojs/curl/tree/master/dist](https://github.com/cujojs/curl/tree/master/dist)

# c# - 在forms/ c#中使用和调用连接字符串

> ID：14956015
> 
> 赞同：0
> 
> 时间：2013-02-19T11:12:14.207
> 
> 标签：c#

我正在使用 c# 构建桌面应用程序，我将连接字符串放在 app.config 文件中，如下所示

```
 <connectionStrings>
        <add name="ComputerManagement" 
        connectionString="Provider=Microsoft.ACE.OLEDB.12.0; Data Source=...;Initial Catalog=Computersh;Integrated Security=True"/>
      </connectionStrings> 
```

如何在表单中调用连接字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:13:55.757

您可以通过以下方式获取连接字符串`ConfigurationManager`：

```
using System.Configuration;
var connection = ConfigurationManager.ConnectionStrings["ComputerManagement"]; 
```

但是您仍然需要使用一些东西来连接到数据库，例如：http `SqlConnection`: [//msdn.microsoft.com/en-gb/library/system.data.sqlclient.sqlconnection.aspx](http://msdn.microsoft.com/en-gb/library/system.data.sqlclient.sqlconnection.aspx)

```
using System.Configuration;
using System.Data.SqlClient;

var connection = ConfigurationManager.ConnectionStrings["ComputerManagement"];

if (connection != null) 
{
    using (var sqlcon = new SqlConnection(connection.ConnectionString))
    {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:14:00.260

参考`System.Configuration`和使用

```
System.Configuration.ConfigurationManager
      .ConnectionStrings["ComputerManagement"].ConnectionString 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:14:04.370

像这样：

```
var constring = ConfigurationManager.ConnectionStrings["ComputerManagement"].ConnectionString; 
```

你也必须添加这个`using System.Configuration;`:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:14:11.740

使用[`ConfigurationManager`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)应该就足够了：

```
var connection = ConfigurationManager.ConnectionStrings["ComputerManagement"]; 
```

`null`然后，在访问实际字符串之前检查, ：

```
if (connection != null) {
  var connectionString = connection.ConnectionString;
} 
```

# asp.net-mvc - @RenderPage - 渲染一个编辑页面

> ID：14956017
> 
> 赞同：0
> 
> 时间：2013-02-19T11:12:34.267
> 
> 标签：asp.net-mvc, asp.net-ajax, render

我想渲染一个页面，但该页面是一个“编辑”页面。像这样的东西

```
@RenderPage("~/Views/Edit/25.cshtml") 
```

但这不起作用，可能我应该将参数“25”作为参数传递，但到目前为止没有成功。在我的程序中，我有两个选项卡，两个调用（渲染）页面都抛出 Ajax（Jqueryui - [http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)），我想当我点击一个选项卡时，他用一个具体标识。

这是可能的？我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:18:22.627

如果您希望在单击特定选项卡时执行一些操作，那么我建议您应该使用 Ajax。看看 jQuery.Ajax。或者您希望它是一个纯 http Web 请求，然后您可以在用户单击选项卡时在同一页面上传递某些查询字符串，并通过识别传递的值相应地加载内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:40:12.637

要在 asp.net mvc 中通过 ajax 呈现选项卡，您可以这样做。

CSHTML：

创建选项卡控件，选项卡标题中的每个锚点使用不同的路由值。当然，您可以将它们链接到控制器的不同操作：

```
<div id=tabs>
    <ul>
        <li>@Html.ActionLink("Tab1", "Edit", new { id = 25 })</li>
        <li>@Html.ActionLink("Tab2", "Edit", new { id = 26 })</li>
    </ul>
</div> 
```

控制器，请注意，您在此处返回了一个局部视图，该视图被渲染到 tabcontrol：

```
 public ActionResult Edit(int id)
    {
        // You probably want to load the Model from the db with id param. I just write a message
        ViewBag.Message = id;

        return PartialView("Edit"); 
    } 
```

我的部分视图 Edit.cshtml：

```
<span>Edit me @ViewBag.Message</span> 
```

Javascript，只需正常创建您的选项卡控件：

```
$("#tabs").tabs(); 
```

一般来说，如果你想用参数渲染一些局部视图，我会亲自去

```
@Html.Action("Edit", "Controller", new {id=25}) 
```

# android - 我可以在其他类中创建 Activity 的对象吗？

> ID：14956018
> 
> 赞同：6
> 
> 时间：2013-02-19T11:12:38.217
> 
> 标签：android, android-activity

我已经定义了一个函数，`MainActivity`现在我想从我的应用程序中的另一个类访问该函数。我创建了一个对象，`MainActivity`并使用该对象调用了该函数。虽然没有错误，但它没有执行。每次我尝试执行时，应用程序都会崩溃。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-19T11:35:36.053

活动 A 应该有一个变量

```
static ActivityA activityA; 
```

在 onCreate 状态：

```
activityA = this; 
```

并添加此方法：

```
public static ActivityA getInstance(){
   return   activityA;
 } 
```

在活动 B 中，调用

```
ActivityA.getInstance().myFunction(); //call myFunction using activityA 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-19T11:14:10.307

您不能只使用以下方法创建活动对象：

```
MyActivity activity = new MyActivity(); 
```

就像使用普通的 Java 类一样。Android 中的所有活动都必须经过活动生命周期，以便它们具有附加的有效上下文。

通过将 Activity 视为普通的 Java 类，您最终会得到一个空上下文。由于 Activity 中的大多数方法都是在其 Context 上调用的，因此您将收到空指针异常，这就是您的应用程序崩溃的原因。

相反，将需要从其他类调用的所有此类方法移动到实用程序类中，该类在其构造函数中接受有效上下文，然后在方法中使用该上下文来完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-29T12:27:24.700

将变量设为 public，然后在适配器中创建对象，如下所示：

```
public int i;  // Variable in Activity class

((ActivityName) context).i          // accessing in adapter 
```

# regex - 将字符串转换为电子邮件地址

> ID：14956019
> 
> 赞同：2
> 
> 时间：2013-02-19T11:12:38.130
> 
> 标签：regex, vbscript

我正在编写一个脚本，它将重命名如此导出的 PST 文件以匹配导入到新系统所需的格式。

我正在尝试在 VBScript 中使用正则表达式和 Replace 来执行此操作。

示例字符串：

```
JoeBloggs_Export_001.pst 
```

所需的最终结果：

```
Joe.Bloggs@emaildomain.com._001.pst 
```

我显然已经用@emaildomain.com替换了*Export 。*使用替换。

我正在努力插入 . 在名字和姓氏之间，我认为使用正则表达式来做到这一点是最好的方法。我正在努力让它发挥作用。显然，名字的长度会有所不同。

我现在已经尝试了各种正则表达式，所以与其分享其中的任何一个，我希望获得全新的视角将有助于突出我出错的地方。

提前谢谢了。

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:26:25.180

假设你想打破大写的帕斯卡大小写名称，你可以捕获小写，然后是大写并插入一个“。”；

```
set re = New RegExp
re.Pattern = "([a-z])([A-Z])"
re.global = true

filename = "JoeBloggs_Export_001.pst"

msgbox replace(re.Replace(fileName, "$1.$2"), "_Export_", "@emaildomain.com._")

>> Joe.Bloggs@emaildomain.com._001.pst 
```

# iphone - 当应用程序进入后台时，if-else 条件失败

> ID：14956023
> 
> 赞同：0
> 
> 时间：2013-02-19T11:12:48.207
> 
> 标签：iphone, if-statement

我正在开发一个使用表格视图的应用程序。在这个表格视图上，我有一些关于表格标题的信息，我还通过在表格标题上放置一些自定义视图来自定义表格标题。

```
if ([imageForCheckMark.image isEqual:[UIImage imageNamed:@"crossCheckMark.png"]]||[imageForCheckMark.image isEqual:[UIImage imageNamed:@"checkMark.png"]])                  
{

}
else
{
  imageForBackGroundOfHeader.image=[UIImage imageNamed:@"head1.png"];               
} 
```

在上面的代码中，我已将图像与其名称匹配，并根据我在标题视图上应用的图像给出结果。但是，如果我正在处理此代码并将我的应用程序置于后台并进入前台，则此代码每次都会给出错误值。

我做错了什么？请告诉我该怎么做才能纠正它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:17:10.037

你怎么能期待

imageForCheckMark.image = [UIImage imageNamed:@"crossCheckMark.png"] ?

这两个是不同的对象。

最好的方法是创建从 UIImage 派生的新类并使用标志来区分图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:33:32.030

```
@property(nonatomic, copy) NSString *accessibilityIdentifier NS_AVAILABLE_IOS(5_0); 
```

AccessibilityIdentifier 是一个 NSString，作为 UIKit 中的一个属性，你可以使用它来存储 UIImageView 中的图像名称。**不需要子类 UIImageView 来存储 imageName。**

```
UIImageView *imv; 
```

当您将图像设置为 imageView 时，也设置文件名。

```
[imv setAccessibilityIdentifier:@"ImageName"] ;
imv.image=[UIImage imageNamed:[imv accessibilityIdentifier]]; 
```

当您验证您的情况时，只需检查：

```
 if ([[imv accessibilityIdentifier] isEqualToString:@"crossCheckMark.png"]||[[imv accessibilityIdentifier] isEqualToString:@"checkMark.png"])                  
        //Do this
    else
    imageForBackGroundOfHeader.image=[UIImage imageNamed:@"head1.png"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:41:13.223

替换这个

```
[imageForCheckMark.image isEqual:[UIImage imageNamed:@"crossCheckMark.png"] 
```

有了这个

```
imageForCheckMark.image ==[UIImage imageNamed:@"crossCheckMark.png"] 
```

所以你的情况现在看起来像这样

```
if ((imageForCheckMark.image ==[UIImage imageNamed:@"crossCheckMark.png"])||(imageForCheckMark.image ==[UIImage imageNamed:@"checkMark.png"]))                  
 {

 }
 else
 {
     imageForBackGroundOfHeader.image=[UIImage imageNamed:@"head1.png"];               
 } 
```

# php - jQuery滑块面板闪烁

> ID：14956026
> 
> 赞同：0
> 
> 时间：2013-02-19T11:13:03.037
> 
> 标签：php, jquery, html, css

由于我正在处理 jquery 滑块面板菜单并且我已经很好地实现了，但是当我向下单击 jquery 滑块菜单时，奇怪的问题仍然存在。例如检查这个链接（[http://www.stickreloaded.com/demogame/simple-slide-panel.html#](http://www.stickreloaded.com/demogame/simple-slide-panel.html#)）见我下面的代码：

问候， phphunger。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Simple Slide Panel</title>

    <script type="text/javascript" src="jquery.js"></script>

    <script type="text/javascript">
    $(document).ready(function(){

        $(".btn-slide").click(function(){
            $("#panel").slideToggle("slow");
            $(this).toggleClass("active"); return false;
        });

    });
    </script>

    <style type="text/css">
    body {
        margin: 0 auto;
        padding: 0;
        width: 990px;
        font: 75%/120% Arial, Helvetica, sans-serif;
    }
    a:focus {
        outline: none;
    }
    #panel {
        background: #03111A;
        height: 180px;
        display: none;
    }
    .slide {
        margin: 0;
        padding: 0;
        border-top: solid 4px #ffc000;
        background: url(images/btn-slide.gif) no-repeat center top;
        /*background-color: #ffc000;
        height: 25px;
        width: 30px;
        -webkit-border-radius: 8px;
    -moz-border-radius: 8px; 
    border-radius: 8px;*/
    }
    .btn-slide {
        background: url(images/white-arrow.gif) no-repeat right -50px;
        /*background-color: #ffc000;
        -webkit-border-radius: 8px;
    -moz-border-radius: 8px; 
    border-radius: 8px;*/
        height: 25px;
        width: 30px;
        text-align: center;
        width: 144px;
        height: 31px;
        padding: 10px 10px 0 0;
        margin: 0 auto;
        display: block;
        font: bold 120%/100% Arial, Helvetica, sans-serif;
        color: #fff;
        text-decoration: none;
    }
    .active {
        background-position: right 12px;
    }
    .moreList{float:left;margin:20px 0 0 20px;width:150px;}
    .moreList li{margin-bottom:10px;}
    .moreList li a{color:#fff;font-size:14px;font-weight:bold;}
    .moreList li a:hover{color:#ee3524;}
    #wrapper{ margin: 0 auto;
    width: 1000px; height:auto; 
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px; 
    border-radius: 8px; 
    }
    /*#content{ background:#03111a; 
    -webkit-border-radius: 8px; 
    -moz-border-radius: 8px; 
    border-radius: 8px;                 
    margin-left: 5px; 
    margin-right: 5px; 
    margin-top: 10px; 
    margin-bottom: 5px; 
    overflow: hidden; }*/
    #content{
    background: #ff6801; /* Old browsers */
    -webkit-border-radius: 8px; 
    -moz-border-radius: 8px; 
    border-radius: 8px; 
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmNjgwMSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmNjMDAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  #ff6801 0%, #ffcc00 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ff6801), color-stop(100%,#ffcc00)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #ff6801 0%,#ffcc00 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #ff6801 0%,#ffcc00 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #ff6801 0%,#ffcc00 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #ff6801 0%,#ffcc00 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff6801', endColorstr='#ffcc00',GradientType=0 ); /* IE6-8 */
    }
    </style>
    </head>

    <body>

    <div id="panel">
        <!-- you can put content here -->
        <ul class="moreList">
            <li><a href="#" id="tag_stick-figure" class="navTagLink">Ben 10</a></li>

            <li><a href="#" id="tag_naughty" class="navTagLink">Batman</a></li>

            <li><a href="#" id="tag_fighting" class="navTagLink">Spongebob</a></li>

            <li><a href="#" id="tag_bloody" class="navTagLink">Scooby Doo</a></li>

            <li><a href="#" id="tag_word" class="navTagLink">Power Rangers</a></li>

            <li><a href="#" id="tag_political" class="navTagLink">Transformers</a></li>

        </ul>
            <ul class="moreList">
        <li><a href="#" id="tag_racing" class="navTagLink">Pokemon</a></li>

            <li><a href="#" id="tag_motorsports" class="navTagLink">Avatar</a></li>
            <li><a href="#" id="tag_flying" class="navTagLink">Mario</a></li>

            <li><a href="#" id="tag_easy" class="navTagLink">Sonic</a></li>
            <li><a href="#" id="tag_high-score" class="navTagLink">Naruto</a></li>

            <li><a href="#" id="tag_map" class="navTagLink">Johnny Bravo</a></li>

            </ul>

            <ul class="moreList">
            <li><a href="#" id="tag_escape" class="navTagLink">Escape</a></li>

            <li><a href="#" id="tag_tycoon" class="navTagLink">Tycoon</a></li>

            <li><a href="#" id="tag_tower-defense" class="navTagLink">Tower Defense</a></li>

            <li><a href="#" id="tag_random" class="navTagLink">Random</a></li>
    <li><a href="#" id="tag_gross" class="navTagLink">Fighting</a></li>

            <li><a href="#" id="tag_zombie" class="navTagLink">Shooting</a></li>

        </ul>

            <ul class="moreList">
            <li><a href="#" id="tag_hard" class="navTagLink">Spiderman</a></li>

            <li><a href="#" id="tag_make-your-own" class="navTagLink">Billy and Mandy</a></li>

            <li><a href="#" id="tag_dress-up" class="navTagLink">Flintstones</a></li>

            <li><a href="#" id="tag_high-school" class="navTagLink">Looney Tunes</a></li>
            <li><a href="#" id="tag_celebrity" class="navTagLink">Action</a></li>

            <li><a href="#" id="tag_cute" class="navTagLink">Racing</a></li>

        </ul>

    </div>

    <p class="slide"><a href="#" class="btn-slide">More Games</a></p>

    <div id='wrapper'>
    <div id='content'>
    <div style="height: 450px;">
    </div>
    </div>
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:39:30.173

虽然我无法复制它，但我想我以前遇到过这个问题。

`#panel`尝试在div上添加以像素为单位的固定宽度（*它不能在 % 或 em 中*）。

这可以防止一个不寻常的 jQuery 错误，当手风琴向下滑动时它会跳跃/跳过（当它到达底部时）。

# c# - 如何在不使用 Session 的情况下在 ASP.net 中的页面之间传递值

> ID：14956027
> 
> 赞同：33
> 
> 时间：2013-02-19T11:13:03.310
> 
> 标签：c#, asp.net, performance

我正在尝试提高我的门户网站的性能。我正在使用 Session 来存储状态信息。

但我听说使用 session 会降低应用程序的速度。有没有其他方法可以在 asp.net 中跨页面传递值。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-19T11:21:44.687

您可以通过以下方式将值从一页传递到另一页..

```
Response.Redirect
Cookies
Application Variables
HttpContext 
```

**响应.重定向**

放 ：

```
Response.Redirect("Defaultaspx?Name=Pandian"); 
```

得到 ：

```
string Name = Request.QueryString["Name"]; 
```

**饼干**

放 ：

```
HttpCookie cookName = new HttpCookie("Name");
cookName.Value = "Pandian"; 
```

得到 ：

```
string name = Request.Cookies["Name"].Value; 
```

**应用程序变量**

放 ：

```
Application["Name"] = "pandian"; 
```

得到 ：

```
string Name = Application["Name"].ToString(); 
```

请参阅此处的完整内容：[将值从一个传递到另一个](http://www.codeproject.com/Articles/8055/Transferring-page-values-to-another-page)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-19T11:16:12.237

有多种方法可以实现这一目标。我可以简要地向您解释一下我们在日常编程生命周期中使用的 4 种类型。

请通过以下几点。

**1 查询字符串。**

**FirstForm.aspx.cs**

```
Response.Redirect("SecondForm.aspx?Parameter=" + TextBox1.Text); 
```

**SecondForm.aspx.cs**

```
TextBox1.Text = Request.QueryString["Parameter"].ToString(); 
```

当您传递整数类型的值或其他短参数时，这是最可靠的方法。如果在通过查询字符串传递值时在值中使用任何特殊字符，则此方法更先进，则**必须在将值传递到下一页之前对值进行编码。**所以我们的代码片段将是这样的：

**FirstForm.aspx.cs**

```
Response.Redirect("SecondForm.aspx?Parameter=" + Server.UrlEncode(TextBox1.Text)); 
```

**SecondForm.aspx.cs**

```
TextBox1.Text = Server.UrlDecode(Request.QueryString["Parameter"].ToString()); 
```

网址编码

1.  [Server.URLEncode](http://msdn.microsoft.com/en-us/library/ms525738(v=vs.90).aspx)

2.  [HttpServerUtility.UrlDecode](http://msdn.microsoft.com/en-us/library/6196h3wt.aspx)

**2.通过上下文对象传递值**

通过上下文对象传递值是另一种广泛使用的方法。

**FirstForm.aspx.cs**

```
TextBox1.Text = this.Context.Items["Parameter"].ToString(); 
```

**SecondForm.aspx.cs**

```
this.Context.Items["Parameter"] = TextBox1.Text;
Server.Transfer("SecondForm.aspx", true); 
```

请注意，我们正在使用 Server.Transfer 而不是 Response.Redirect 导航到另一个页面。我们中的一些人还使用 Session 对象来传递值。在该方法中，值存储在 Session 对象中，然后从第二页中的 Session 对象中取出。

**3\. 将表单发布到另一个页面而不是 PostBack**

通过将页面发布到另一个表单来传递值的第三种方法。这是一个例子：

**FirstForm.aspx.cs**

```
private void Page_Load(object sender, System.EventArgs e)
{
   buttonSubmit.Attributes.Add("onclick", "return PostPage();");
} 
```

我们创建了一个 javascript 函数来发布表单。

**SecondForm.aspx.cs**

```
function PostPage()
{
   document.Form1.action = "SecondForm.aspx";
   document.Form1.method = "POST";
   document.Form1.submit();
}
TextBox1.Text = Request.Form["TextBox1"].ToString(); 
```

在这里，我们将表单发布到另一个页面而不是它本身。使用此方法，您可能会在第二页中看到视图状态无效或错误。处理这个错误就是把`EnableViewStateMac=false`

**4.另一种方法是通过添加控件的PostBackURL属性进行跨页回发**

在 ASP.NET 2.0 中，微软通过为跨页回发添加控件的 PostBackURL 属性解决了这个问题。实现是设置一个控制属性的问题，你就完成了。

**FirstForm.aspx.cs**

```
<asp:Button id=buttonPassValue style=”Z-INDEX: 102″ runat=”server” Text=”Button”         PostBackUrl=”~/SecondForm.aspx”&gt;</asp:Button> 
```

**SecondForm.aspx.cs**

```
TextBox1.Text = Request.Form["TextBox1"].ToString(); 
```

在上面的示例中，我们分配按钮的 PostBackUrl 属性，我们可以确定它将发布到的页面而不是其本身。在下一页中，我们可以使用 Request 对象访问上一页的所有控件。

您还可以使用 PreviousPage 类来访问上一页的控件，而不是使用经典的 Request 对象。

**第二窗体.aspx**

```
TextBox textBoxTemp = (TextBox) PreviousPage.FindControl(“TextBox1″);
TextBox1.Text = textBoxTemp.Text; 
```

正如您所注意到的，这也是一个在页面之间传递值的简单而干净的实现。

参考：[MICROSOFT MSDN WEBSITE](http://msdn.microsoft.com/en-us/library/6c3yckfw.aspx)

快乐编码！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T11:20:12.723

如果它只是用于在页面之间传递值并且您只需要一个请求。采用`Context.`

> **语境**
> 
> Context 对象为单个用户、单个请求保存数据，并且仅在请求期间持久保存。Context 容器可以保存大量数据，但通常用于保存小块数据，因为它通常通过 global.asax 中的处理程序为每个请求实现。提供 Context 容器（可从 Page 对象或使用 System.Web.HttpContext.Current 访问）来保存需要在不同 HttpModules 和 HttpHandlers 之间传递的值。它还可用于保存与整个请求相关的信息。例如，IBuySpy 门户在 global.asax 中的 Application_BeginRequest 事件处理程序期间将一些配置信息填充到此容器中。请注意，这只适用于当前请求期间；如果您需要下一个请求仍然存在的东西，请考虑使用 ViewState。从 Context 集合中设置和获取数据使用的语法与您已经看到的其他集合对象（如 Application、Session 和 Cache）的语法相同。这里展示了两个简单的例子：

```
// Add item to
Context Context.Items["myKey"] = myValue;

// Read an item from the
 Context Response.Write(Context["myKey"]); 
```

[http://msdn.microsoft.com/en-us/magazine/cc300437.aspx#S6](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx#S6)

使用上述。如果您随后执行操作`Server.Transfer`，您在上下文中保存的数据现在将可用于下一页。您不必担心删除/整理这些数据，因为它仅适用于当前请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T11:17:33.413

您可以将其分配给隐藏字段，并使用检索它

```
var value= Request.Form["value"] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T11:22:25.583

您可以使用**查询字符串**将值从一个页面传递到另一个页面。

1.使用**查询字符串传递值**

```
 Response.Redirect("Default3.aspx?value=" + txt.Text + "& number="+n); 
```

2.使用这些方法中的任何一种检索您想要的页面中的值..

**方法1**：

```
 string v = Request.QueryString["value"];
    string n=Request.QueryString["number"]; 
```

**方法2**：

```
 NameValueCollection v = Request.QueryString;
    if (v.HasKeys())
    {
        string k = v.GetKey(0);
        string n = v.Get(0);
        if (k == "value")
        {
            lbltext.Text = n.ToString();
        }
        if (k == "value1")
        {
            lbltext.Text = "error occured";
        }
    } 
```

**注意**：方法 2 是最快的方法。

# machine-learning - 机器学习图像

> ID：14956031
> 
> 赞同：1
> 
> 时间：2013-02-19T11:13:21.133
> 
> 标签：machine-learning

我是机器学习的新手，希望有人能指导我。我需要训练机器识别某个对象，例如使用 libsvm。但我不知道为培训文件指定什么以及如何开始。可以给我提供伪代码吗？我是java人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:24:42.213

网络上有大量的材料。假设您想了解有关字段的更多信息`image recognition`，或者`computer vision`- 那是您需要的吗？

一些一般信息： [http ://en.wikipedia.org/wiki/Computer_vision](http://en.wikipedia.org/wiki/Computer_vision)

java & 图像识别：图像模式识别 [的java框架？](https://stackoverflow.com/questions/2062618/java-framework-for-image-pattern-recognition)

工作示例 [http://neuroph.sourceforge.net/image_recognition.html](http://neuroph.sourceforge.net/image_recognition.html) [http://savvash.blogspot.cz/2010/05/simple-image-recognition-in-java.html](http://savvash.blogspot.cz/2010/05/simple-image-recognition-in-java.html)

有广泛认可的工具 Weka（java 和 ML）： [http](http://www.cs.waikato.ac.nz/ml/weka/) ://www.cs.waikato.ac.nz/ml/weka/ 你提到了 SVM（特别是 libsvm）这个算法也包含在 Weka 中。

还有很多 ...

# c# - 获取当前日期与列中包含的日期之间的天数、小时数和分钟数的差异？

> ID：14956036
> 
> 赞同：0
> 
> 时间：2013-02-19T11:13:26.143
> 
> 标签：c#, mysql, .net

我有一个带有 datagridview 的应用程序，我直接从数据库绑定信息，我有一个名为`deadline`DateTime 类型的列，该列包含截止日期。

在我的 C# 应用程序中，我遍历 datagridview 中的所有行并获取包含截止日期的特定列，然后更新它，例如：

```
public void reformatDates() {
        string endDate = null;
        foreach (DataGridViewRow rw in dataGridView1.Rows)
        {
            endDate = rw.Cells[5].Value.ToString();
            rw.Cells[5].Value = getCountDown(endDate);
        }
    } 
```

函数`getCountDown(DateTime endDate)`以字符串形式获取天数、小时数和分钟数的倒计时。

一切都按预期工作，但是当我遍历所有行时。如果我有大量行说 5000 行怎么办。我是否需要遍历所有这些并更新每个单元格？

我用来从数据库绑定信息的函数是 Bind(string sqlquery)，我目前这样称呼它：

```
 Bind("SELECT statut,title,deadline FROM taches WHERE 1"); 
```

有没有办法直接从数据库中获取倒计时（以天，小时和分钟为单位）我的意思是这样

的伪代码：

```
 Bind("SELECT statut,title,(DateNow-deadline) FROM taches WHERE 1"); 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:23:26.070

如果我理解正确，这就是您想要的：

```
Bind("SELECT statut,title,TimeDiff(sysdate(),deadline) FROM taches WHERE 1"); 
```

完整参考：[https ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_sysdate](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_sysdate)

# objective-c - UITableView 中的 EXC_BAD_ACCESS 错误

> ID：14956039
> 
> 赞同：0
> 
> 时间：2013-02-19T11:13:31.350
> 
> 标签：objective-c, uitableview, exc-bad-access

我正在使用`viewForFooterInSection`，因为当我使用

```
tableView.tableFooterView = footerView; 
```

我的按钮不可触摸。这就是为什么我想手动显示最后一部分的位置。

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {

   if(control.selectedSegmentIndex == 1 && section == 1)
   {
if(myFooterView == nil) {
    //allocate the view if it doesn't exist yet
    myFooterView  = [[UIView alloc] init];

    //create the button
    UIButton *footButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    [footButton setFrame:CGRectMake(110, 10, 100, 30)];

    //set title, font size and font color
    [footButton setTitle:@"Go Home" forState:UIControlStateNormal];
    [footButton.titleLabel setFont:[UIFont boldSystemFontOfSize:18]];

    //set action of the button
    [footButton addTarget:self action:@selector(clickPressed:)
         forControlEvents:UIControlEventTouchUpInside];

    //add the button to the view
    [myFooterView addSubview:footButton];
}

//return the view for the footer
return myFooterView;
   }
} 
```

这行代码给了我`EXC_BAD_ACCESS`错误，我确定该部分存在：

```
if(control.selectedSegmentIndex == 1 && section == 1) 
```

看不出是什么问题。

**编辑：**

```
@property (nonatomic, retain) UISegmentedControl *control;

- (void)viewWillAppear:(BOOL)animated
{
[self setTitle:_actor.actorNaam];
NSLog(@"Actor viewwillappear %@", _actor.actorNaam);

NSArray *items = [[NSArray alloc] initWithObjects: @"Actor", @"Object", @"Operation", @"Goal", nil];
control = [[UISegmentedControl alloc] initWithItems:items]; //!!!!!!!!!!!!!!!
control.selectedSegmentIndex = segmentPushed;
control.segmentedControlStyle = UISegmentedControlStylePlain;
control.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
control.apportionsSegmentWidthsByContent = YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:31:21.043

假设您使用的是 ARC 环境，

您已将“控制”声明为保留，但由于分配方式不当，它没有保留在 ARC 环境中。

做出改变：

```
control = [[UISegmentedControl alloc] initWithItems:items]; 
```

利用

```
self.control = [[UISegmentedControl alloc] initWithItems:items]; 
```

使用**self**将调用默认设置器，并且您的对象将被保留，目前尚未完成。

# perl - Perl 将字符串识别为标量变量

> ID：14956042
> 
> 赞同：0
> 
> 时间：2013-02-19T11:13:42.303
> 
> 标签：perl

我有名为`$A_cine`、等的整数标量变量`$B_cine`。

我还有一个子程序`display`，它接受一个参数`'A'`, `'B'`,`'C'`等。

`$letter = $_[0]`我在子程序中分配。我现在想获取`$A_cine`or的值`$B_cine`并将其分配给一个新的标量变量`$cine`。

我已经尝试过`$cine = '$'.$view."_cine"`，这被识别`$cine`为字符串`$A_cine`（它应该）。但是，有没有办法解释，所以我可以得到以前定义`$A_cine`的标量的数值？`$A_cine`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T11:22:40.763

使用符号引用是个坏主意。相反，您应该使用哈希。设置，说`%cine`和使用`$cine{A}`代替`$A_cine`等。然后你可以写

```
sub subroutine {
  my ($view) = @_;
  my $cine = $cine{$view};
  ...
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T11:16:45.627

您正在尝试构建[符号引用](http://perldoc.perl.org/perlref.html#Symbolic-references)。

```
sub display {
    my $letter = $_[0];

    no strict 'refs';
    my $cine = ${ $letter . "_cine" };

    print $cine, "\n";  # for example
} 
```

为此目的，使用散列几乎总是更好。[*有关详细信息，请参阅 Mark Dominus（ Higher Order Perl*](http://hop.perl.plover.com/)的作者）的三部分系列，了解为什么使用符号引用可能是危险的。

*   [为什么“使用变量作为变量名”很愚蠢</a>](http://perl.plover.com/varvarname.html)
[](http://perl.plover.com/varvarname.html)
*   [更直接的问题解释](http://perl.plover.com/varvarname2.html)
*   [如果我真的很小心怎么办？](http://perl.plover.com/varvarname3.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T11:21:29.400

您可以如上所示制作符号引用，但通常使用散列更容易

```
%cine={}
$cine{'A'}=37;
$letter="A"
print $cine{$letter} 
```

# multithreading - 线程安全内存管理器：320 MB 缓冲区中的数据竞争？

> ID：14956043
> 
> 赞同：2
> 
> 时间：2013-02-19T11:13:42.223
> 
> 标签：multithreading, visual-c++, memory-management, thread-safety

我正在开发一个在主线程中执行一些连续模拟的多线程 VC++（windows）程序。此模拟使用在同一线程或加载器线程中创建的对象（两者都可能是这种情况）。删除也是如此。

我这样做是为了在动态加载和卸载非常大的对象（由*许多*其他对象组成）时主线程不会阻塞。这基本上奏效了。但是（例如）当卸载线程不断地删除一个又一个对象时，其他线程的 new 和 delete 调用需要永远。这似乎是由一些内螺纹保护引起的。

我的下一步是通过汇集那些较小的对象来减少新/删除调用的数量。所以我写了一个原始的内存管理器。管理器使用 malloc() 分配一个 320 MB 的缓冲区，并使用 64 字节块为我的程序的其他部分提供分配功能。现在我使用placement new 来创建较小的对象。管理器的分配/释放方法完全受互斥（锁定）保护。

现在发生的事情是它根本无法在多线程环境中正常工作。自定义托管对象的修改被忽略等等。我假设发生的情况是整个缓冲区被视为单个变量，因此不能有读/写数据竞争。是这样吗？

在创建/删除完全不同的对象时限制对一个对象的访问不是您可以想象的选择。那么在这样的情况下该怎么走呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:39:46.193

`new`s 和s在`delete`内部同步到单个 Windows 堆对象。

我所知道的最好的解决方案是直接使用[HeapCreate](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366599%28v=vs.85%29.aspx) [HeapAlloc](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366597%28v=vs.85%29.aspx)和[HeapFree](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366701%28v=vs.85%29.aspx)，为每个分配器线程创建一个 Heap 对象，并且每次都指定 HEAP_NO_SERIALIZE。

您必须确保分配的线程是释放的线程，即您必须将内存“归还”给分配的辅助线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:12:14.373

> 是这样吗？

不，我不这么认为。所有的内存只是一个连续的地址空间。CPU 不知道变量，它只操作页面、缓存行和字节。

可能的原因：内存管理器中的错误。也许它分配的对象相互重叠，或者你的线程同步失败（顺便说一句，你绝对应该用关键部分替换你的互斥锁，请参阅 CComAutoCriticalSection 和 CComCritSecLock ATL 类以获得方便的 whappers - 对于短操作，它们的工作速度要快一个数量级比互斥锁）。

可能的原因：对象中的错误。也许您的对象在其地址之后写入了一个额外的字节，但是堆对分配大小进行了四舍五入，因此当使用 new 运算符使用的 HeapAlloc win32 API 分配每个对象时，它可以正常工作。

可能的原因：内存对齐问题。尝试将您分配的对象的地址至少对齐到 8。

# html - icalendar 是否支持 HTML 和 CSS？

> ID：14956048
> 
> 赞同：1
> 
> 时间：2013-02-19T11:13:56.513
> 
> 标签：html, css, icalendar, rfc5545

我正在尝试使用 X-ALT-DESC;FMTTYPE=text/html: 创建一个带有 html 描述的 ICalendar：但它似乎不支持用于布局/样式的内联 CSS 是否有使 CSS 在 icalendar 中工作的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:47:06.940

与 jgm 所暗示的相反，RFC5545 没有对 html 的规定。

唯一的后门是通过`ALTREP`参数（[有关更多详细信息，请参阅 RFC](https://www.rfc-editor.org/rfc/rfc5545#section-3.2.1)）

然而，这隐含地指的是通过电子邮件发送的 icalendar 邀请（因为它最常使用 CID URI），但也可以使用其他 URI，如 HTTP(S)，但不经常使用。

您还应该知道，即使是最突出的日历， **RFC5545**合规性也**远未完成**（例如，谷歌日历仅针对 RFC2445（已被 RFC5545 淘汰），...）

这`X-ALT-DESC`也是一个特定于 MSFT 的扩展（参见[iCalendar/X-ALT-DESC 上的 MSND](http://msdn.microsoft.com/en-us/library/ee237480%28v=exchg.80%29.aspx)）。

回到您的问题，您希望哪些日历支持您的 .ics 文件并能够渲染？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:51:48.307

RFC 5545（iCalendar 规范）允许您使用 HTML，但这与支持它的日历客户端不同。我怀疑您会发现很少有任何非基于浏览器的日历会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T08:24:25.777

hcalendar 转换为 icalendar；hcalendar 是一个微格式的 icalendar 实现。查看更多[http://microformats.org/wiki/hcalendar](http://microformats.org/wiki/hcalendar)

# jquery - jQuery管理多个星级

> ID：14956052
> 
> 赞同：0
> 
> 时间：2013-02-19T11:14:07.273
> 
> 标签：jquery, hover, jquery-hover, rating-system

在我的网站上，我有一个带有薮结果的页面，人们可以在那里进行评分。

页面上有一个评级列表，一切正常，但是通过选择要悬停的正确列表（this），我遇到了一个小问题。现在它总是悬停在html代码中的第一个列表（如果我将光标放在第二个评级列表上首先悬停）。

的HTML：

```
<ol class="rating" data-rating="4">
<li class="Arad5fQEnoZlv9E59d"><a title="Super boring" class="rate starOn" id="1">1 star</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Boring" class="rate starOn" id="2">2 stars</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Nice" class="rate starOn" id="3">3 stars</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Cool" class="rate starOn" id="4">4 stars</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Super cool!" class="rate star" id="5">5 stars</a></li>
<div class="response">Score 4 By 2  ratings</div>
</ol> 
```

我的 javascript 中没有做好的部分：

```
$('ol.rating li', this).hover(function(){
            var id      = $('a', this).attr('id');
            var counter = 1;
            var salt    = $(this).attr('class');

            console.log('ol.rating li.'+salt);

            $('ol.rating li.'+salt).each(function(i){
            if (id >= counter) {
                $('a#'+counter).addClass("starHover");
            } else {
                $('a#'+counter).removeClass("starHover");
            }
            counter++;
            });
    }); 
```

希望我的问题有点清楚:)

提前致谢！缺口

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:22:45.473

您的代码工作正常（我刚刚`this`从第一行删除了关键字）：http: [//jsfiddle.net/yAwZz/](http://jsfiddle.net/yAwZz/)

`<li>`您正在将类打印到所有元素都相同的控制台。这可能是混乱的根源吗？

**更新：**

您`id`对多个 HTML 元素使用相同的东西，这绝不是一个好主意。`id`属性必须是**唯一的**元素标识符。

您可以使用[.index()](http://api.jquery.com/index/)和[.slice()](http://api.jquery.com/slice/) jQuery 方法来简化代码并使其在不使用 id 的情况下按预期工作。请注意，我使用[mouseenter](http://api.jquery.com/mouseenter/)事件而不是[悬停](http://api.jquery.com/hover/)广告悬停在 mouseenter 和 mouseleave 上都被调用，在这种情况下是不必要的：

```
$('ol.rating li').mouseenter(function(){
    var $lis = $(this).siblings("li").andSelf();
    var id   = $(this).index();

    $lis.removeClass("starHover");
    $lis.slice(0, id + 1).addClass("starHover");
}); 
```

您可以看到在 jsfiddle 上运行的代码：http: [//jsfiddle.net/yAwZz/5/](http://jsfiddle.net/yAwZz/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:25:28.747

尝试给不同的等级名称。前任：

```
<ol class="rating1" data-rating="4">
<li class="Arad5fQEnoZlv9E59d"><a title="Super boring" class="rate starOn" id="1">1 star</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Boring" class="rate starOn" id="2">2 stars</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Nice" class="rate starOn" id="3">3 stars</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Cool" class="rate starOn" id="4">4 stars</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Super cool!" class="rate star" id="5">5 stars</a></li>
<div class="response">Score 4 By 2  ratings</div>
</ol> 
<ol class="rating2" data-rating="4">
<li class="Arad5fQEnoZlv9E59d"><a title="Super boring" class="rate starOn" id="1">1 star</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Boring" class="rate starOn" id="2">2 stars</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Nice" class="rate starOn" id="3">3 stars</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Cool" class="rate starOn" id="4">4 stars</a></li>
<li class="Arad5fQEnoZlv9E59d"><a title="Super cool!" class="rate star" id="5">5 stars</a></li>
<div class="response">Score 4 By 2  ratings</div>
</ol> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:46:05.437

我更新了您的代码以仅使用 li ，然后从悬停中找出上下文。检查这个小提琴：http: [//jsfiddle.net/yAwZz/2/](http://jsfiddle.net/yAwZz/2/)

```
$('li').hover(function(){
        console.log("hover");
        var id      = $('a', this).attr('id');
        var counter = 1;
        var salt    = $(this).attr('class');
        // get the context here.

        var parent = $(this).parent();
        console.log('ol.rating li#'+id);

        // remove the class for all elements by default.
        $('a').removeClass("starHover");

        // use the context here for adding the class
        $('li.'+salt, parent).each(function(i){
        if (id >= counter) {
            $('a#'+counter, parent).addClass("starHover");
        } else {
            $('a#'+counter, parent).removeClass("starHover");
        }
        counter++;
        });
}); 
```

# java - 使用正则表达式验证电子邮件地址

> ID：14956053
> 
> 赞同：0
> 
> 时间：2013-02-19T11:14:07.763
> 
> 标签：java, regex, email

我一直在使用这个正则表达式来验证电子邮件地址。发现在某行上没有有效电子邮件地址的文件将被删除：

```
 FileInputStream fsdel = new FileInputStream("C:/Folder/" + filefinal[o]);
                BufferedReader brdel = new BufferedReader(new InputStreamReader(fsdel));
                for (int j = 0; j < 4; j++) {
                    brdel.readLine();
                }
                String email = brdel.readLine();
                String mine = email.trim();
                String lineIwant = mine.substring(0, 32).trim();
                // System.out.println("EMAIL ID: " + lineIwant);
                String emailreg = "^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";
                Boolean b = lineIwant.matches(emailreg);

                if (b.toString() == "false") {
                    System.out.println(filedel[o]);
                    fsdel.close();
                    //brdel.close();
                    filedel[o].delete();

                } 
```

这段代码一直运行良好，直到出现一个带有电子邮件 ID 的文件：

```
textsam.textsample@somedomain.co.uk 
```

该文件因没有有效的电子邮件地址而被删除。有人可以帮助我如何将上述电子邮件地址包含为有效地址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:16:41.920

为什么将电子邮件地址限制为 32 个字符？以上为 34 个字符，但您可以通过

```
String lineIwant = mine.substring(0, 32).trim(); 
```

另请参阅[此 SO 问题和答案](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)以及讨论电子邮件地址正则表达式的[网页](http://www.regular-expressions.info/email.html)（它比您目前所做的要复杂得多，我会重新考虑您的方法。使用正则表达式*）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:30:36.163

我相信您这是由于字符限制而发生的错误。始终为电子邮件地址保留至少 50 个字符。我个人的练习是 100，还可以考虑使用 Microsoft Visual Studio 中内置的正则表达式，它应该会让你的事情变得更容易。

这是一个链接

[http://msdn.microsoft.com/en-gb/library/system.text.regularexpressions.regex.aspx](http://msdn.microsoft.com/en-gb/library/system.text.regularexpressions.regex.aspx)

# java - 杰克逊版本不兼容？

> ID：14956054
> 
> 赞同：0
> 
> 时间：2013-02-19T11:14:08.033
> 
> 标签：java, spring, rest, jackson

我正在使用 Spring 学习 REST。我正在将 Maven 用于项目依赖项。

我正在使用 Spring 3.2.1 和 Jackson`GET`拨打`POST`电话。当我使用 Jackson 的 1.5.6 版本时，`GET`工作正常，我可以看到调用`Json`返回的对象版本`GET`。但是，当我升级到更新版本的 Jackson 时，它不再起作用，并且在响应中返回以下内容......

> 此请求标识的资源只能生成具有根据请求“接受”标头（）不可接受的特征的响应。

查看有关 StackOverflow 的其他问题，Jackson Mapper 和 Core 版本似乎存在问题，但我在我的项目中找不到其他对 Jackson 的引用，所以我认为这不是问题所在。

App 上下文包含以下内容...

```
 <mvc:annotation-driven/>

<context:component-scan base-package="im.poz.springrestserver" /> 
```

控制器中调用的方法如下...

```
 @RequestMapping(value = "/clients/{clientid}", method= RequestMethod.GET, produces = {MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE})
@ResponseBody

public Client getClient(@PathVariable("clientid") int clientId) throws llegalArgumentException {
    Client client=services.retrieveClientById(clientId);
    return client;
}

@RequestMapping(value = "/clients", method= RequestMethod.POST, produces = {MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE})
@ResponseBody
public Client updateClient(@RequestBody Client client) throws IllegalArgumentException {

    client=services.updateClient(client);
    return client;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:12:49.177

答案在构建中。

我正在使用 IntelliJ Idea 11.1，对新构建的 Maven POM 的更改似乎没有反映在已部署的映像中，因此更改 Jackson 版本意味着 Jackson 实际上完全从已部署的构建中丢失。

我需要修改工件并重新部署。

问题解决了。

# asp.net-mvc - 从 HTTP POST 获取值

> ID：14956055
> 
> 赞同：1
> 
> 时间：2013-02-19T11:14:08.417
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个遗留系统（用 ColdFusion 编写）发布到我的 RESTful MVC 应用程序，我试图在其中访问发布的参数。

有人建议我`application/x-www-form-urlencoded`在旧系统中将 content-type 标头设置为，这应该意味着`controllerContext.HttpContext.Request.Form.AllKeys`包含发布的参数，但事实并非如此。

其他 Stack Overflow 帖子建议阅读，`controllerContext.HttpContext.Request.InputStream`但我想知道是否有不同/更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:17:37.230

仅将请求 Content-Type 标头设置为`application/x-www-form-urlencoded`可能还不够。客户端还需要尊重这种内容类型，这意味着 POST 请求的主体必须如下所示：

```
param1=value1&param2=value2&param3=value3&... 
```

现在，您将能够使用`Request.Form["param1"]`或仅通过使用视图模型并让您的控制器操作将此视图模型作为参数来检索单个值，这样您就不需要从请求中手动检索这些参数。

如果客户不遵守规范，您唯一的机会就是`Request.InputStream`手动阅读并解析它。

# jquery - 页面卸载前的 Jquery hide() onclick

> ID：14956061
> 
> 赞同：0
> 
> 时间：2013-02-19T11:14:32.317
> 
> 标签：jquery, show-hide, onbeforeunload, onload-event

嗨，我已经绞尽脑汁好几天了。我正在使用 jquery 中的隐藏功能创建一个下拉菜单。我希望我的菜单栏在我的 li 标签被选中时隐藏，然后页面导航到我网站的下一页。

当我选择锚定标签时，我现在得到的所有内容就是菜单只是消失了。

这是jQuery：

```
$(document).ready(function(){
    $(".slidingDiv").hide(); 
    $(".show_hide").show(); 

    $(".show_hide").click(function(){ 
        $(".slidingDiv").slideToggle(); 
    });

    $(window).onbeforeunload(function() {
        $(".slidingDiv").hide();
});
}); 
```

这是html：

```
 <div id="mobnav-wrapper">
    <div id="logo-top-mob"> 
        <a href="index.html"><img src="images/logo-mob.png" width="163" height="21" /></a>
    </div>

<div id="mob-button"> 
        <a href="#" class="show_hide"><img src="images/mob_button.png" width="33" height="24" /></a>

</div>
<div class="slidingDiv">
    <ul> 
        <li class="hide_nav"><a href="work.html"> Work </a></li>
        <li class="hide_nav"><a href"services.html" >Services</a></li>
        <li class="hide_nav"><a href"clients.html" >Clients</a></li>
        <li class="hide_nav"><a href"about.html" >About</a></li>
            <li class="hide_nav"><a href"contact.html" >Contact</a></li>
        <li class="hide_nav"><a href"follow.html" >Follow</a></li>
    </ul> 
</div> 
```

我曾尝试使用 unload 和 .onbeforeunload 但我无法理解它。如果有人有想法或可以指出我正确的方向，我会非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:43:28.027

jQuery 的功能`show()`是`hide()`即时的。如果您打算为这些元素设置动画，则需要添加一个 speed 参数：

```
$(window).onbeforeunload(function () {
  $('.slidingDiv').hide('fast');
}); 
```

也就是说，实际运行多少动画取决于浏览器从服务器加载下一页的速度。

如果您希望您的动画首先运行，完成，*然后*按照用户单击的链接，我会摆脱 onbeforeunload 的东西并尝试这样的事情：

```
$(document).on('click', '.slidingDiv a', function () {
  var link = $(this);

  $('.slidingDiv').hide('slow', function () {
    location.href = link.attr('href');
  });

  return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:48:50.910

将您的脚本更改为此...

```
$(document).ready(function(){
    $(".slidingDiv").hide(); 
    $(".show_hide").show(); 

    $("li.hide_nav a").click(function(e){ 
        e.preventDefault();
        var href = this.href;
        $(".slidingDiv").slideUp(500, function() {
            window.location.href = href;
        });
    });
}); 
```

它处理元素中链接上的点击事件，`li`并首先阻止它们起作用。这意味着`slideUp()`可以执行然后运行一个回调函数来处理可能由链接单击触发的重定位。

# java - 发送电子邮件时如何在控制台上禁用 java 邮件跟踪

> ID：14956063
> 
> 赞同：6
> 
> 时间：2013-02-19T11:14:36.223
> 
> 标签：java, debugging, email, trace, output

这是我发送电子邮件的代码：

```
 public void sendMail() 
{
    try
    {
        // Propiedades de la conexión
        Properties props = new Properties();
        props.put("mail.transport.protocol", "smtp");
        props.put("mail.smtp.host", SMTP_HOST_NAME);
        props.put("mail.smtp.port", SMTP_PORT);
        props.put("mail.smtp.auth", "true");

        Authenticator auth = new SMTPAuthenticator();
        Session mailSession = Session.getDefaultInstance(props, auth);

        Transport transport = mailSession.getTransport();

        MimeMessage message = new MimeMessage(mailSession);
        Multipart multipart = new MimeMultipart("alternative");

        BodyPart text = new MimeBodyPart();
        text.setContent(mailMessage,"text/html; charset=UTF-8");

        multipart.addBodyPart(text);

        message.setContent(multipart);

        if(friendlyName != null){
            //String send = friendlyName + " <" + sender + ">";
            message.setFrom(new InternetAddress(sender, friendlyName)); 
        }else{
            message.setFrom(new InternetAddress(sender));
        }

        message.setSubject(subject,"UTF-8");
        message.addRecipient(Message.RecipientType.TO,
                new InternetAddress(receiver));

        transport.connect();
        transport.sendMessage(message, message.getRecipients(Message.RecipientType.TO));
        transport.close();

    }catch (Exception e) {
        // TODO: handle exception
    }

} 
```

当我发送电子邮件时，我会在控制台（或 catalina.out）上得到以下输出：

>>>>>发送数据 EHLO xxxxxx<<<<<<

>>>>>发送数据 AUTH LOGIN<<<<<<

>>>>>发送数据xxxxxxxxxxxxxxxxxxxx<<<<<<

>>>>>发送数据xxxxxxxxxxxxxx<<<<<<

>>>>>发送数据 MAIL FROM：<<<<<<

>>>>>发送数据 RCPT 到：<<<<<<

>>>>>发送数据DATA<<<<<<

>>>>>发送数据<<<<<<

>>>>>发送数据。<<<<<<

>>>>>发送数据QUIT<<<<<<

如何禁用此输出？我的 catalina.out 增长太快了。Setdebug(false) 方法不能解决我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-26T18:40:32.090

在春天，这对我有用：

```
 <property name="javaMailProperties">
        <props>
            <prop key="mail.transport.protocol">smtp</prop>
            <prop key="mail.smtp.auth">false</prop>
            <prop key="mail.smtp.starttls.enable">true</prop>
            <prop key="mail.debug">false</prop>
        </props>
    </property> 
```

使用 1.4.7+ 版本测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T10:32:49.130

跟方法没关系`setDebug`！
我使用的是 javax.mail 库的 1.40 版并且遇到了完全相同的问题。类中有这`System.out.println(">>>>>Sending data " + data + "<<<<<<");`行代码`SMTPTransport`与调试日志无关，总是将其数据写入控制台！

只需获取库的 1.5 版本，问题就会解决。
您可以从[Maven 存储库](http://search.maven.org/remotecontent?filepath=com/sun/mail/javax.mail/1.5.0/javax.mail-1.5.0.jar)中获取它。

# mvvm - MVVM - 视图是否应该影响 MainWindow ViewModel？

> ID：14956068
> 
> 赞同：3
> 
> 时间：2013-02-19T11:14:50.017
> 
> 标签：mvvm

我希望有一个关于 MVVM 的简单但人为的问题。

我的 MainWindow 有 1 个控件 - ContentControl 仅显示 2 个视图之一。我希望能够通过一个按钮在两个视图之间切换。问题是，按钮将是每个视图上的控件。EG View1 有一个按钮，View2 有一个按钮。UI 上只显示一个视图，单击按钮将显示另一个视图。但是，要使其工作，这意味着视图的 ViewModel 必须了解 MainWindow 的 ViewModel 才能更改视图。这似乎是错误的。

问题*可能*是我的 MainWindow ViewModel。其中一个项目是公共对象 View {get;set}，这就是绑定到 MainWindows ContentControl 的内容。所以，这个属性需要从视图的视图模型中更新。

如果 View 更新 MainWindow 的 ViewModel 是否违反 MVVM 模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:20:27.857

我不确定我是否完全理解您的问题，但是在视图模型之间进行通信的一种很好的技术是通过 EventAggregator 或 Messenger 模式。这两个以松散耦合的方式实现 pub/sub。

这是 MVVMLight Toolkit 的 Messenger [http://dotnet.dzone.com/articles/mvvm-light-whats-messenger的示例](http://dotnet.dzone.com/articles/mvvm-light-whats-messenger)

这是 Prism 的 EventAggregator 的示例，用于在 viemodel 之间进行通信 [http://rachel53461.wordpress.com/2011/06/05/communication-between-viewmodels-with-mvvm/](http://rachel53461.wordpress.com/2011/06/05/communication-between-viewmodels-with-mvvm/)

希望这可以帮助..

编辑：好的，我的回答仍然有效。如果您像上面提到的那样使用 pub/sub，您会告诉`view1`并`view2`发送例如更改视图消息并定义目标（例如，目标可能是`view2`）。然后，您将订阅您`MainViewModel`的每条更改视图消息。当更改视图消息到达时。收到通知并执行事件，`MainViewModel`并且不一定要知道谁发送了消息。

请记住，mvvm 只是一种模式，而不是一种宗教......只需使用让你继续前进的东西，并在你的脑后留下模式 =)......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:36:17.877

理想情况下，您的视图模型不应该对视图有任何引用。[如果你在做 MVVM，那么你真的需要使用 MVVM 框架](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx)。您所描述的似乎是一个执行其他两个视图模型的视图模型。

就个人而言，如果只有一个订阅者对消息感兴趣（在这种情况下是父主视图模型），我不会使用事件聚合器。如果您想要松散耦合，您可以只使用普通的 .NET 事件并应用标准事件模式。

您的主视图模型将保存对两个子视图模型的引用，并订阅它们启动切换的事件。当在子 1 上单击按钮时，它会调用其事件，然后主视图模型将其事件处理程序中的当前视图切换到子 2。

使用诸如[Caliburn.Micro](http://caliburnmicro.codeplex.com/)之类的 MVVM 框架非常容易。您的主视图模型将是一种`Conductor`类型，然后您只需更改`ActiveItem`.

# mysql - mysql中的相关子选择

> ID：14956069
> 
> 赞同：1
> 
> 时间：2013-02-19T11:14:51.263
> 
> 标签：mysql, subquery

我有一张包含 1500 万条记录的表格，其中包含我们机器的一些信息（当前速度、气体使用量……）。
当前速度每分钟存储一次，气体使用量每 15 分钟存储一次。现在我需要一个包含气体使用量和这 15 分钟间隔内的平均速度的列表。

```
select a.time, a.value as gas, 
(select avg(b.value) from machine_values as b where b.time < a.time 
  and b.time > date_add(a.time, interval -15 minute) and b.channel='speed') as avgSpeed 
from machine_values as a 
where a.time >= '2012-12-16 00:00:00.000' and a.time < '2012-12-17 00:00:00.000' 
and a.channel='gas' 
```

`machine_values.time`并且`machine_values.channel`是该表中的主键。

刚刚尝试了一天的值，但查询运行了大约半小时。如果我添加一天的时间段子查询查询运行得更快：

```
select a.time, a.value as gas, 
(select avg(b.value) from machine_values as b where b.time < a.time 
  and b.time > date_add(a.time, interval -15 minute) and b.channel='speed'
  and b.time >= '2012-12-16 00:00:00.000' and b.time < '2012-12-17 00:00:00.000') as avgSpeed 
from machine_values as a 
where a.time >= '2012-12-16 00:00:00.000' and a.time < '2012-12-17 00:00:00.000' 
and a.channel='gas' 
```

但这只是一天。如果我尝试这个两个月，大约需要一个小时才能得到结果。怎么了？子查询不是`a.time`基于每行吗？

我假设 - 如果我有一行，`a.time = 2012-12-16 00:20:00`并且`a.gas = 100`子查询只会选择`2012-12-16 00:05:00`直到的值`2012-12-16 00:20:00`？但是查询的性能看起来像子查询每次扫描整个表。

是否有另一种（更快）的方式来获得想要的结果？

# c# - 执行期间在C#中生成res文件

> ID：14956071
> 
> 赞同：1
> 
> 时间：2013-02-19T11:14:54.150
> 
> 标签：c#, .net, resources, icons, csharpcodeprovider

我正在编写一个小工具来创建*“iconholder-apps”*（没有/小代码部分的应用程序 - 仅限信息框）。

该应用程序应该包含多个图标（win32 res 资源），并且应该从我的 .net 应用程序创建（使用`CSharpCodeProvider`）

是否可以通过 winapi / .NET 2.0 创建已编译的 win32 资源，或者是否有 res 文件的文档（因此可以使用原始字节输出创建这些文件）

（子问题：rehacker 如何“重新编译”资源？）

或者正在使用唯一的选项进行编译`rc.exe`（如果可能，我不喜欢嵌入 rc.exe）

或者是否有另一个选项可以创建包含多个图标的资源（可用作链接/快捷方式图标）

# symfony - symfony 2 示例不工作

> ID：14956082
> 
> 赞同：0
> 
> 时间：2013-02-19T11:15:22.227
> 
> 标签：symfony, symfony-2.1

我从github下载了一个例子

```
https://github.com/azat/blog 
```

我正在尝试在我的本地主机中实现这个示例，但它不起作用。它显示了诸如 bootstratp 和自动加载错误之类的错误。它显示以下错误。

```
( ! ) Warning: require_once(D:\wamp\www\blog-master\web/../app/bootstrap.php.
cache)[<a href='function.require-once'>function.require-once</a>]: 
failed to open stream: No such file or directory in D:\wamp\www\
blog-master\web\app.php on line 3
Call Stack
#   Time    Memory  Function    Location 
1   0.0009  368824  {main}( )   ..\app.php:0

( ! ) Fatal error: require_once() [<a href='function.require'>function.require</a>]:
Failed opening required 'D:\wamp\www\blog-master\web/../app/bootstrap.php.cache' 
(include_path='.;C:\php\pear') in D:\wamp\www\blog-master\web\app.php on line 3
Call Stack
#   Time    Memory  Function    Location
1   0.0009  368824  {main}( )   ..\app.php:0 
```

请让我知道如何在本地主机中配置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:19:59.450

我想你忘了跑`php bin/build.sh`

该脚本将生成 bootstrap.cache ( `bin/build_bootstrap.php`) 并清理您的项目文件夹。

另外，请注意子模块！:) （`build.sh`运行前`git submodule update --init --recursive`）

# django - Django：使用render或render_to_response时添加响应头

> ID：14956085
> 
> 赞同：36
> 
> 时间：2013-02-19T11:15:30.030
> 
> 标签：django, httpresponse

如何向 Django 响应添加响应标头？我有：

```
response = HttpResponse()
response['Cache-Control'] = 'no-cache'

return render(request, "template.html", {}) 

# Alternately using render_to_response
# return render_to_response("template.html", {}) 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-19T11:19:27.283

将结果分配`render`给变量，设置标头，然后返回响应。

```
response = render(request, "template.html", {})
response['Cache-Control'] = 'no-cache'
return response 
```

大多数时候，它对用户来说`render`比`render_to_response`. 但是，如果您正在使用`render_to_response`，则相同的方法将起作用：

```
response = render_to_response("template.html", {})
response['Cache-Control'] = 'no-cache'
return response 
```

# c# - 如何在服务器控件中编写 <%%>？

> ID：14956088
> 
> 赞同：0
> 
> 时间：2013-02-19T11:15:38.703
> 
> 标签：c#, asp.net, .net, asp.net-4.0

我正在尝试`<%=%>`在服务器控件中使用，但它不起作用。
这是我的代码：

```
 <input type="button" runat="server" value="<< Previous" id="btnPrevious" 
        onclick="location.href='<%=PreviousLink %>'"/> 
```

`PreviousLink`是页面中定义的属性。
当我查看页面时，整个表达式都是按原样编写的，没有被评估。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:18:08.597

你不能。您可以在控制器代码中定义它：

```
btnPrevious.OnClientClick = "location.href='" + PreviousLink + "'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:29:35.247

试试这个：

**使用 jQuery：**

```
<input type="button" runat="server" value="<< Previous" id="btnPrevious"/>
<script>
$(function () {
            $("#<%=btnPrevious.ClientID%>").on("click", function (event) {
                window.location.href = '<%=PreviousLink %>';
            });
});
</script> 
```

**使用 JavaScript：**

```
function onButtonClick() {
        window.location.href = '<%=PreviousLink %>';
    }

<input type="button" runat="server" value="<< Previous" id="btnPrevious" onclick="onButtonClick();"/> 
```

**.aspx.cs（C# 代码）：**

```
public string PreviousLink = "http://stackoverflow.com/"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T11:40:29.730

如果您删除`runat server`属性，则 <% %> 表达式将得到正确评估。
检查这个问题
[为什么将 <%= %> 表达式作为服务器控件上的属性值会导致编译错误？](https://stackoverflow.com/questions/370201/why-will-expressions-as-property-values-on-a-server-controls-lead-to-a-co)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:23:29.537

这也应该有效：

```
<script type="text/javascript">
function setLocation() {
  location.href = '<%=PreviousLink %>';
}
</script>
<input type="button" runat="server" value="<< Previous" id="btnPrevious" onclick="setLocation();"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T11:54:40.523

您可以做的是使用 ASP.NET 内联表达式在页面加载期间设置值。

首先，在页面的代码隐藏中添加一个属性。

```
protected string InputValue { get; set; } 
```

在这种情况`Page_Load`下，设置属性的值。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        this.InputValue = "something";
    }
} 
```

最后，在页面标记中添加一个内联表达式，如下所示：

```
<input type="text" name="txt" value="<%= this.InputValue %>" /> 
```

这将允许您设置`input`元素的值，而无需使其成为服务器端标记。

# html - 在线浏览器中找不到一些图像。

> ID：14956090
> 
> 赞同：0
> 
> 时间：2013-02-19T11:15:42.823
> 
> 标签：html, image

我有一个我真的无法解决的问题。

当我在浏览器中的计算机上本地测试我的网站时，我的所有图像都被找到。当我将图像放在服务器上时，有些图像找不到了。

例子：

[http://anneliessuyker.nl/portfolio.html](http://anneliessuyker.nl/portfolio.html)

应该有两个图像：

没有找到一个“camerablok”。它与“computerblok3”位于完全相同的目录中，并且在服务器上是正确的。

当我检查图像时，我终于收到了这条消息：

```
*Not Found
The requested URL /images/camerablok.jpg was not found on this server.
Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.
Apache/2 Server at anneliessuyker.nl Port 80* 
```

有谁知道这里发生了什么？我的网站上有更多这样的例子。当图片在服务器上或未在服务器上找到时，它似乎真的是随机的。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:23:33.957

你确定你的图片命名正确吗？- 我猜测并将图像源更改为`/images/camera.jpg`，它工作正常。

您应该考虑使用命名约定以保持所有文件的可读性并避免此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:18:29.703

这通常是由于在 Windows 上进行开发（使用不区分大小写的文件系统）和在 Linux 上进行托管（使用区分大小写的文件系统）造成的。

Windows 不关心文件是否名为“Foo.jpeg”，但您要求的是“foo.jpeg”。

Linux 可以。

检查文件名的大小写。

# java - axis2 .aar 文件的应用程序根路径是什么

> ID：14956091
> 
> 赞同：1
> 
> 时间：2013-02-19T11:15:47.880
> 
> 标签：java, web-services, axis2

我有一个axis2 存档文件(aar)，我想将其部署到axis2 Web 应用程序。通常在`.war`存档中，我们可以使用`request.getServletContext().getRealPath("/")`. 我了解 Web 服务可以访问服务器中的文件。我尝试使用[`ConfigurationContext.getRealPath("/")`](http://axis.apache.org/axis2/java/core/api/org/apache/axis2/context/ConfigurationContext.html). 但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:37:01.123

你可以参考我的情况。

[https://community.jboss.org/thread/221937](https://community.jboss.org/thread/221937)

如果您使用 Windows 7，aar 似乎将用户帐户文件夹视为 root。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-19T11:22:25.767

要使 Axis2 工作，您不需要**aar**文件。

**services.xml**文件可以位于以下任一位置以使 Axis2 工作。

1.  存储库/服务/SimpleService/meta-inf/services.xml
2.  WEB-INF/services/SimpleService/meta-inf/services.xml

> 这将帮助我们避免生成 aar 文件的额外步骤。

**服务部署者.java**

```
 * <p>
 * Standard Axis2 service Deployer which use services.xml file to build
 * services. ServiceDeployer can be used with Axis2 archive (.aar) or exploded
 * directory structure. Some of the example formats given below.
 * </p>
 * <p>Examples : <p>
 *        <ul>
 *          <li>repository/services/SimpleService.aar/meta-inf/services.xml</li>
 *          <li>repository/services/SimpleService/meta-inf/services.xml</li>
 *          <li>WEB-INF/services/SimpleService.aar/meta-inf/services.xml</li>
 *          <li>WEB-INF/services/SimpleService/meta-inf/services.xml</li>
 *       </ul>

     InputStream servicexmlStream = serviceClassLoader
            .getResourceAsStream("META-INF/services.xml");
    if (servicexmlStream == null) {
        servicexmlStream = serviceClassLoader.getResourceAsStream("meta-inf/services.xml");
    } else {
        metainf = "META-INF";
    } 
```

[https://axis.apache.org/axis2/java/core/apidocs/org/apache/axis2/deployment/ServiceDeployer.html](https://axis.apache.org/axis2/java/core/apidocs/org/apache/axis2/deployment/ServiceDeployer.html)

# xforms - 将 xhtml 文件作为流提交到千叶

> ID：14956093
> 
> 赞同：1
> 
> 时间：2013-02-19T11:15:51.780
> 
> 标签：xforms, xforms-betterform

由于我是 Chiba 的新手，我想知道如何将 Chiba 集成到我的 JSP 和 Servlet 应用程序以及如何将 xhtml 文件作为流提交到 Chiba 并以 HTML+CSS+JS/AJAX 的形式获取输出。

我想要达到的目标：

1.  使用流或通过 JSP 和 Servlet 将 xform 提交给 Chiba。
2.  以 HTML、CSS、JS 和 AJAX 形式从 Chiba 获取输出表单。
3.  创建的 xhtml x-form 将由客户用于填写数据。
4.  在提交时，实例 xml 转到一个 servlet。
5.  Servlet 然后保存此实例 xml。

在哪里可以找到使用 Java 应用程序实现 Chiba 的示例。我尝试用我的应用程序实现它，但没有成功，因为千叶的 Cookbook 和用户指南中的信息非常少。

谢谢大家的帮助。:)

# php - 卷曲错误 35 php 中的 SSL 连接错误

> ID：14956103
> 
> 赞同：1
> 
> 时间：2013-02-19T11:16:21.480
> 
> 标签：php, ssl, curl

我正在使用 CURL 在 PHP 中获取 XML 响应。问题是当我运行 PHP cron 作业文件时，它没有得到响应。

```
$ch = curl_init($URL);
curl_setopt($ch, CURLOPT_TIMEOUT, $this->timeout);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_HEADER, true);     
curl_setopt($ch, CURLOPT_PORT, 80);

$responseAll = curl_exec($ch); 
```

当我在命令提示符下运行 CURL 时，我得到了响应

```
CURL -Li <URL> 
```

但问题是当我将其作为 PHP 文件运行时，curl 将错误抛出为

> 35 SSL 连接错误

*注意：*在 PHP4 中也可以正常工作。该问题仅在 PHP5 中出现

# asp.net - 使用团队城市部署一个 asp.net 网站

> ID：14956108
> 
> 赞同：3
> 
> 时间：2013-02-19T11:16:29.840
> 
> 标签：asp.net, teamcity, web-deployment

如何部署一个没有任何项目文件的网站项目。

我们正在尝试使用团队城市自动化构建和部署。

我能够成功构建项目，但无法部署网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:03:48.977

MsDeploy 支持通过`contentPath`提供者部署网站：

```
msdeploy -verb:sync -source:contentPath=WebSite\Deploy,computername=localhost -dest:auto... 
```

只需`WebSite\Deploy`在您的代理工作目录中更改为您的实际路径，您构建的网站在哪里进行部署。

# iphone - 如何让 UITextView 根据其内容动态调整自身大小

> ID：14956109
> 
> 赞同：0
> 
> 时间：2013-02-19T11:16:32.867
> 
> 标签：iphone, ios, objective-c, uitextview

我正在尝试让 UITextView 根据其内容动态调整其自身的大小。有时文本视图的高度是 100 有时是 700。

到目前为止我所尝试的一切都没有奏效。

我已经尝试过以下`viewDidLoad`和`viewDidLayoutSubviews`. 这是代码：

```
CGRect frameDesc = self.descriptionDeal.frame;
frameDesc.size.height = self.descriptionDeal.contentSize.height;
self.descriptionDeal.frame = frameDesc;

self.descriptionDeal.backgroundColor = [UIColor redColor]; 
```

我添加了背景颜色，这样我就可以看到视图的大小，并且它没有根据内容调整大小。

我也试过：

```
 [self.descriptionDeal sizeToFit]; 
```

此外，不确定它是否会影响任何东西，但在 UITextView 布局的故事中，大小是在那里设置的。我认为上面的代码会覆盖它，但有些东西不能正常工作。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:28:15.107

您应该在文本视图的委托`textViewDidChange:` [方法中进行大小更改](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html#//apple_ref/occ/intfm/UITextViewDelegate/textViewDidChange:)

使用[https://stackoverflow.com/a/14956351/1311910](https://stackoverflow.com/a/14956351/1311910)获得合适的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:27:38.200

尝试以下字符串方法，这些方法可用于获取将字符串显示到视图所需的尺寸。您可以根据从这些方法之一获得的 CGSize 更改 textview 的框架。如果您不打算在项目中使用自动布局来支持早期版本的 iOS，请使用此选项。

```
- (CGSize)sizeWithFont:(UIFont *)font; // Uses NSLineBreakByWordWrapping
- (CGSize)sizeWithFont:(UIFont *)font forWidth:(CGFloat)width lineBreakMode:(NSLineBreakMode)lineBreakMode;
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size; // Uses NSLineBreakModeWordWrap
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(NSLineBreakMode)lineBreakMode; // NSTextAlignment is not needed to determine size 
```

# jquery - 第一次尝试延迟加载（延迟加载嵌入的 YouTube 视频）——我怎样才能更优雅地做到这一点？

> ID：14956112
> 
> 赞同：5
> 
> 时间：2013-02-19T11:16:38.260
> 
> 标签：jquery, html, lazy-loading, embedding, deferred

昨天我决定改进我的网站加载 YouTube 视频的方式，仅在用户请求时才嵌入它们。有时一个页面可能有多达 30 个视频，这需要很长时间才能加载。

这是我第一次尝试任何东西的“延迟加载”方法，我认为这很值得一问：

**我能做些什么来改善这一点？**

**我怎样才能让它更优雅一点？**

**这是否完全忽略了延迟加载的要点？**

[JSF](http://jsfiddle.net/n5v6A/8/)中。

忽略样式，因为这在这里无关紧要。

* * *

其工作方式是首先在包含视频 ID 的页面上放置一个锚点：

```
<a href="#" data-video="FzRH3iTQPrk" class="youtube-video"> 
```

然后后面的 jQuery 循环遍历每个`a.youtube-video`并创建一个以视频缩略图作为背景的透明跨度：

```
$('a.youtube-video').each(function() {
    var videoId = $(this).attr('data-video');
    var videoThumbnail = "http://img.youtube.com/vi/" + videoId + "/0.jpg";

    var videoBackground = $('<span class="youtube-thumbnail"></span>');

    videoBackground.css({
        background:"#fff url('"+videoThumbnail+"') no-repeat"
    })
    ... 
```

然后它会修改锚标记的样式（这里这样做是为了防止影响禁用 JavaScript 的浏览器）：

```
 $(this).css({
        height:315,
        width:460,
        position:"relative",
        display:"block",
        textAlign:"center",
        color:"#fff",
        fontSize:26
    }); 
```

然后它通过将跨度添加到锚点来完成循环：

```
 $(this).text('Click to load video');
    $(this).append(videoBackground);
}); 
```

嵌入的 YouTube 视频对象的加载发生在锚点点击时：

```
$('a.youtube-video').click(function(e) {
    e.preventDefault();
    var videoId = $(this).attr('data-video');
    var videoThumbnail = "http://img.youtube.com/vi/" + videoId + "/0.jpg";
    var videoEmbed = $('<object> ... </object>');      
        ... 
```

这通过将嵌入代码添加到锚的父级并删除锚来完成：

```
 $(this).parent().append(videoEmbed);
    $(this).hide();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:48:13.717

您应该设置 href 以便人们知道他们将要加载的内容。这可以在页面生成时在 a 元素上完成，也可以在 JS 中完成。如果您希望您的页面为禁用 Javascript 的人工作，它必须在元素上。

```
var url = "http://www.youtube.com/watch?v=" + videoId;
$(this).attr('href', url); 
```

您还应该通过设置标题告诉人们如果他们单击其中一个会发生什么：

```
$(this).attr('title', "Click to play video"); 
```

或者通过创建类似于[SMH](http://smh.domain.com.au/real-estate-news/sydneys-boomtime-auction-clearance-20130224-2ezb9.html)的叠加层，这使得单击图像将播放视频更加明显。或两者。

此外，当人们按住 ctrl 或命令键时，您不应该在新窗口中打开内容。我更新了[小提琴](http://jsfiddle.net/Danack/9bg5q/1/)，但基本上在您需要的点击事件中：

```
 var isCtrlPressed = e.ctrlKey || e.metaKey;
 if (isCtrlPressed == true){
    return;
 } 
```

我知道你说忽略样式，但如果占位符的背景颜色明显不同于页面背景，我更喜欢它。如果一个页面加载缓慢，我可以知道那里会加载一些东西，而不是只是一个空白页面。

> 这是否完全忽略了延迟加载的要点？

不完全，但在这种情况下有点毫无意义。当正在加载的东西非常复杂（例如，一个巨大的表格）时，通常使用延迟加载，因此会大大增加页面大小，这会使页面的初始呈现在用户点击链接后很长时间.

尽管 youtube 视频的加载速度可能很慢，但它们实际上不应阻止页面的其余部分同时加载和呈现，因此延迟加载视频只会为您带来一点好处，而您需要做很多工作。

我想您应该测量某人查看页面的速度，滚动到底部然后单击播放最后一个视频。如果延迟加载速度更快，因为其他视频 Flash 播放器没有加载，那么它仍然值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:11:52.307

[此处](http://jsfiddle.net/2svh6/1/)有以下代码的 jsfiddle 。（播放器没有正确显示，我认为 jsfiddle 不能很好地使用“嵌入方法”。我知道它可以使用 iframe 方法在 jsfiddle 上工作，但你提到你想避免 iframe）。

如前所述，一项重大改进是使用[swfobject](http://code.google.com/p/swfobject/)生成播放器嵌入。使用此方法时，您必须为播放器元素创建一个占位符。单击链接时，占位符将被删除并替换为嵌入。我强烈建议为链接和播放器创建一个父 div。为了防止在生成嵌入时调整元素的大小，您还应该明确设置容器元素的宽度/高度。

我认为这是很好地使用延迟加载。尽管 Flash 播放器在加载时不会阻塞，但它们仍然使用大量资源，我希望最初显示为缩略图集的页面。

**标记**

```
<script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js">
</script>

<div class="container">
    <div id="placeholder_FzRH3iTQPrk"></div>
    <a href="#" data-video="FzRH3iTQPrk" class="youtube-video"></a>
</div>
<div class="container">
    <div id="placeholder_go43XeW6Wg4"></div>
    <a href="#" data-video="go43XeW6Wg4" class="youtube-video"></a>
</div> 
```

**JavaScript**

```
$(document).ready(function() {
    $('a.youtube-video').each(function() {
        var videoId = $(this).attr('data-video');
        var videoThumbnail = "http://img.youtube.com/vi/" + videoId + "/0.jpg";
        var videoBackground = $('<span class="youtube-thumbnail"></span>');
        videoBackground.css({
            background:"#fff url('"+videoThumbnail+"') no-repeat"
        });

        // also set the parent container size to prevent flicker
        $(this).add($(this).parent()).css({
            height:315,
            width:460,
            position:"relative",
            display:"block",
            textAlign:"center",
            color:"#fff",
            fontSize:26
        });
        $(this).text('Click to load video');
        $(this).append(videoBackground);
    });

    $('a.youtube-video').click(function(e) {
        e.preventDefault();
        var videoId = $(this).attr('data-video');
        var params = { allowScriptAccess: "always", allowFullScreen: "true" };
        var atts = { id: 'player_'+videoId };
        $(this).hide();
        swfobject.embedSWF(
            "http://www.youtube.com/v/"+videoId+"?enablejsapi=1&playerapiid=ytplayer&version=3", 
            'placeholder_'+videoId, "460", "315", "8", null, null, params, atts);

    });
}); 
```

# ruby-on-rails - 使用 CarrierWave gem 的错误图像路径 URL

> ID：14956118
> 
> 赞同：0
> 
> 时间：2013-02-19T11:16:47.780
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, carrierwave

您好，我正在使用 carrievwave gem 为我的 rails 应用程序上传图像，该应用程序运行良好，但我无法访问那些上传的文件。我得到了错误的路径 url `http://localhost/uploads/gallery/image_name/354340/1.jpg` （这里 '354340' 是 Userid 而不是自动递增的 id）

当前路径应该是这样的`http://doitfornow:3000/uploads/gallery/image_name/2/1.jpg`

**模型**

```
class Gallery < ActiveRecord::Base
  attr_accessible :image_name, :name, :user_id,:image_name#,:remote_image_name_url
  mount_uploader :image_name, ImageUploader
  belongs_to :user, :class_name => "User", :foreign_key => "user_id"

end 
```

**看法**

```
<%@gallery.each do |f|  %>
<tr>
    <td class="left"><%= f.Gname%></td>
    <!-- # u.avatar.url -->
    <td class="left"><%= image_tag f.image_name.url , :size => "50x50" %></td>
    <td><%= link_to 'Detail',"/articles/detail?id="+f.Gid.to_s  %></td>
    <td class="left" colspan="5"><label class="input-control checkbox"><%= check_box_tag 'user_ids[]', f.Gid, false %> <span class="helper"></span></label></td>
</tr>
<% end %> 
```

image_uploder.rb

```
 # encoding: utf-8

class ImageUploader < CarrierWave::Uploader::Base

  # Include RMagick or MiniMagick support:
  # include CarrierWave::RMagick
  #  include CarrierWave::jekyll-minimagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  # include Sprockets::Helpers::RailsHelper
  # include Sprockets::Helpers::IsolatedHelper
  # Choose what kind of storage to use for this uploader:
  storage :file
  # storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
 def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
 end

  # Provide a default URL as a default if there hasn't been a file uploaded:
  # def default_url
  #   # For Rails 3.1+ asset pipeline compatibility:
  #   # asset_path("fallback/" + [version_name, "default.png"].compact.join('_'))
  #
  #   "/images/fallback/" + [version_name, "default.png"].compact.join('_')
  # end

  # Process files as they are uploaded:
  # process :scale => [200, 300]
  #
  # def scale(width, height)
    # # do something
  # end

  # Create different versions of your uploaded files:
  # version :thumb do
    # # process :resize_to_limit => [200, 200]
      # process :resize_to_fill => [50, 50]
   # # process :scale => [50, 50]
  # end

  # Add a white list of extensions which are allowed to be uploaded.
  # For images you might use something like this:
  def extension_white_list
   %w(jpg jpeg gif png)
  end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
  # def filename
  #   "something.jpg" if original_filename
  # end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:34:15.497

我有同样的问题。我通过为carrierwave创建一个模块来做到这一点，因为我有更多的上传者需要处理。我覆盖了“store_dir”方法并添加了“set_store_dir”方法。所以我可以将我的文件存储在我想要的地方。我在类中设置了store_dir，包括上传者希望它有帮助

```
 module Helper::Carrierwave
        def set_store_dir( dir )
          @storedir = dir
        end

        def store_dir
          @storedir
        end
    end 
```

# fortran - 使用 openmp 和可分配数组在 fortran 中循环

> ID：14956120
> 
> 赞同：1
> 
> 时间：2013-02-19T11:16:51.820
> 
> 标签：fortran, openmp, fortran90

我喜欢这样做：

```
program main
  implicit none
  integer l
  integer, allocatable, dimension(:) :: array

  allocate(array(10))

  array = 0

  !$omp parallel do private(array)
  do l = 1, 10
    array(l) = l
  enddo
  !$omp end parallel do

  print *, array

  deallocate(array)

end 
```

但是我遇到了错误消息：

> *** 检测到 glibc *** ./a.out: munmap_chunk(): 无效指针: 0x00007fff25d05a40 ***

[根据英特尔论坛上的一些讨论](http://software.intel.com/en-us/forums/topic/270477)，这似乎是 ifort 中的一个错误，但应该在我使用的版本（11.1.073 - Linux）中解决。这是我的代码的大规模缩减版本！不幸的是，我不能使用静态数组来解决问题。

如果我将打印放入循环中，我会收到其他错误：

> *** 检测到 glibc****./a.out：双重释放或损坏（输出）：0x00002b22a0c016f0 ** **

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:09:54.470

我刚刚用 ifort 和 openmp 运行了你的代码，它喷出了 0d0。我不得不手动退出执行。你的预期输出是什么？我不喜欢不必要地动态分配数组。您知道要将矩阵分配为什么，因此只需制作参数并静态执行即可。我会弄乱一些东西，并在一些内容中编辑此回复。

好的，这是我的编辑：

```
 program main
  implicit none

  integer :: l, j
  integer, parameter :: lmax = 15e3
  integer, parameter :: jmax = 25
  integer, parameter :: nk = 300
  complex*16, dimension(9*nk) :: x0, xin, xout
  complex*16, dimension(lmax) :: e_pump, e_probe
  complex*16 :: e_pumphlp, e_probehlp
  character*25 :: problemtype
  real*8 :: m

  ! OpenMP variables
  integer :: myid, nthreads, omp_get_num_threads, omp_get_thread_num

  x0 = 0.0d0

  problemtype = 'type1'
  if (problemtype .ne. 'type1') then
     write(*,*) 'Problem type not specified. Quitting'
     stop
  else
     ! Spawn a parallel region explicitly scoping all variables
     !$omp parallel 
        myid = omp_get_thread_num()
        if (myid .eq. 0) then
           nthreads = omp_get_num_threads()
           write(*,*) 'Starting program with', nthreads, 'threads'
        endif

        !$omp do private(j,l,m,e_pumphlp,e_probehlp,e_pump,e_probe)
        do j = 1, jmax - 1
           do l = 1, lmax

              call electricfield(0.0d0, 0.0d0, e_pumphlp, &
                                 e_probehlp, 0.0d0)
              !   print *, e_pumphlp, e_probehlp

              e_pump(l) = e_pumphlp
              e_probe(l) = e_probehlp
              print *, e_pump(l), e_probe(l)

           end do
        end do
     !$omp end parallel
  end if

  end program main 
```

请注意，我删除了您对模块的使用，因为它是不必要的。您有一个包含子例程的外部模块，因此只需将其设为外部子例程即可。另外，我将您的矩阵更改为静态分配。case 语句是 if 语句的一个花哨且昂贵的版本。你是 15e3*25 次而不是一次（昂贵），所以我把它们移到外面。我更改了 OpenMP 调用，但只是在语义上。我给了你一些输出，以便你知道 OpenMP 实际在做什么。

这是新的子程序：

```
 subroutine electricfield(t, tdelay, e_pump, e_probe, phase)
  implicit none

  real*8, intent(in) :: t, tdelay
  complex*16, intent(out) :: e_pump, e_probe
  real*8, optional, intent (in) :: phase

  e_pump = 0.0d0
  e_probe = 0.0d0

  return

  end subroutine electricfield 
```

我刚刚删除了它周围的模块外壳并更改了一些变量名。Fortran 不区分大小写，所以不要用大写字母和自始至终重复它来折磨自己。

我编译了这个

> ifort -o diffeq diffeq.f90 电场.f90 -openmp

并与

> ./diffeq > 输出

捕捉程序呕吐 0 并查看我使用了多少线程：

> （0.000000000000000000000E + 000,0.000000000000000000000000000000 0.000000000000000E + 000）（+ 0.000000000000000E + 000,0.000000000000000E 000）（+ 0.000000000000000E + 000,0.000000000000000E 000）（+ 0.000000000000000E + 000,0.000000000000000E 000）（+ 0.000000000000000E + 000,0.000000000000000E 000）（ 0.000000000000000E+000,0.000000000000000E+000)
> 32线程启动程序
> （0.000000000000000000000E + 000,0.000000000000000000000000000000 0.000000000000000E+000) (0.000000000000000E+000,0.000000000000000E+000)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:42:57.873

我没有收到您遇到的错误，但是您在 OpenMP 调用中遇到了私有化数组的问题。

```
[mjswartz@666-lgn testfiles]$ vi array.f90  
[mjswartz@666-lgn testfiles]$ ifort -o array array.f90 -openmp  
[mjswartz@666-lgn testfiles]$ ./array 
           0           0           0           0           0           0
           0           0           0           0  
[mjswartz@666-lgn testfiles]$ vi array.f90  
[mjswartz@666-lgn testfiles]$ ifort -o array array.f90 -openmp  
[mjswartz@666-lgn testfiles]$ ./array 
           1           2           3           4           5           6
           7           8           9          10 
```

第一次运行是使用私有数组，第二次是没有。

```
 program main
  implicit none

  integer l
  integer, allocatable, dimension(:) :: array

  allocate(array(10))

  !$omp parallel do 
  do l = 1, 10
    array(l) = l
  enddo

  print*, array

  deallocate(array)

  end program main 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:12:38.297

您似乎遇到了与 OpenMP 3.0 的实现相关的编译器错误。

如果你不能更新你的编译器，那么你将需要改变你的方法。有几个选项 - 例如，您可以共享可分配数组，将它们的等级增加一并让一个线程分配它们，这样附加维度的范围就是团队中的工人数量。然后，对这些数组的所有后续引用都需要将该额外排名的下标作为 omp 团队编号（+ 1，取决于您用于下限的内容）。

（仅）并行结构内的私有可分配数组的显式分配也可能是一种选择。*

# jquery - 如何使用 DOM 提取的文本值在 JQuery 中创建数组

> ID：14956122
> 
> 赞同：0
> 
> 时间：2013-02-19T11:17:02.593
> 
> 标签：jquery, text-extraction, dom-traversal

使用 JQuery，我想创建一个数组，例如 [TextA, TextB, ... Text I]。这些数组元素将从 html 代码中提取，如下所示。我是该领域的初学者，并尝试使用以下方法提取单个文本值：

```
$('a.curT',$( this )).text(); 
```

“但它不起作用”，因为我没有得到“Text E”作为所需的输出。另外我不知道如何使用提取的值创建数组。

```
<li class="top1">
<a class="tc1" href="link" title="title">Some Text</a>
<div class="top2 current">
    <div class="column" style="width:25%">
        <ul>    
            <li class="class1"><a href="linkA" title="A"><strong>Text A</strong></a></li>
            <li class="class1"><a href="linkB" title="B"><strong>Text B</strong></a></li>
            <li class="class1"><a href="linkC" title="C"><strong>Text C</strong></a></li>    
        </ul>
    </div>                    
    <div class="column" style="width:25%">
        <ul>    
            <li class="class1"><a href="linkD" title="D"><strong>Text D</strong></a></li>
            <li class="class2"><a href="linkE" title="E" class="curT"><strong>Text E</strong></a></li>
            <li class="class1"><a href="linkF" title="F"><strong>Text F</strong></a></li>
        </ul>
    </div> 
    <div class="column" style="width:25%">
        <ul>    
            <li class="class1"><a href="linkG" title="G"><strong>Text G</strong></a></li>
            <li class="class1"><a href="linkH" title="H"><strong>Text H</strong></a></li>    
        </ul>
    </div>    
    <div class="column" style="width:25%">
        <ul>    
            <li class="class1"><a href="linkI" title="I"><strong>Text I</strong></a></li> 
        </ul>
    </div>
</div> 
```

在这个方向上的任何建议都会非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:22:13.913

您可以使用[map()](http://api.jquery.com/map/)从匹配的元素中投影一个数组：

```
var textArray = $("li a strong").map(function() {
    return $(this).text();
}).get(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T11:19:55.533

尝试这样的事情：

```
var a = new Array();
$("strong").each(function(index) {
    a[index] = $(this).html();
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T11:21:31.173

使用有用的 .each() 函数：

```
var texts = [];

$('a.curT').each(function() {
   texts.push($(this).text());
}); 
```

# php - PHP 创建的文件在退出时被删除

> ID：14956128
> 
> 赞同：0
> 
> 时间：2013-02-19T11:17:13.370
> 
> 标签：php, file, fopen, exit, fwrite

我正在文件系统中编写一些文件，但不幸的是，这些文件在 PHP 脚本退出时被删除。

我尝试使用 fopen (w+) 和 file_put_contents 创建文件。文件会定期删除。

有任何想法吗？

编辑：文件被写入/home/ontw/webshop/definitions1/，这不是一个临时目录。

一些代码：

```
$fp = fopen($filename, "w+");

if ($fp == false) {
  throw new RuntimeException("Could not create $filename (fopen error)!");
}

if (flock($fp, LOCK_EX)) {
  if (false === fwrite($fp, $contents)) {
    throw new RuntimeException("Could not create $filename (fwrite error)!");
  }

  fflush($fp);
  flock($fp, LOCK_UN);
} else {
  throw new RuntimeException("Could not create $filename (unable to get file lock)!");
}
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:37:35.023

我发现了这个错误。删除是在`__destruct`语句中执行的。似乎所有的析构函数都被调用了`exit()`

# asp.net-mvc - 把 ViewModel 变成 QueryString

> ID：14956132
> 
> 赞同：0
> 
> 时间：2013-02-19T11:17:18.767
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个 ViewModel，我想用它来填充 QueryString，这几乎与 MVC 开箱即用的绑定相反。所以对于看起来像这样的模型：

```
public class SearchViewModel
{
    public string Keywords { get; set; }
    // more properties here
} 
```

我希望能够做这样的事情：

```
string querystring = AspMagicMethods.GetQueryStringFromViewModel(searchViewModel);
// querystring == ?keywords=booyah&... 
```

显然我可以遍历每个属性并自己创建字符串，但我想知道框架中是否有任何可能有帮助的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:23:49.030

您可以使用以下 MVC 方法从任何控制器操作中执行此操作。

```
var myModel = new SearchViewModel{Keywords ="test"};
RedirectToAction("actionName", "controllerName", myModel) 
```

# symfony - symfony2：包括内联 javascript

> ID：14956133
> 
> 赞同：0
> 
> 时间：2013-02-19T11:17:23.847
> 
> 标签：symfony

我在下面添加了一些 javascript 代码以使用幻灯片放映 jquery 插件显示一些照片。

```
//parent template
{% block javascripts %}
    <script src="{{ asset('http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/canalonesfrontend/js/slides.min.jquery.js') }}" type="text/javascript"></script>
{% endblock %}

//child template
{% block javascripts %}
    {{ parent() }}
    $(function(){
        $("#slides").slides();
    });
{% endblock %} 
```

问题：代码直接显示在网页中：

```
Some content
$(function(){ $("#slides").slides(); }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:20:35.677

你必须用`<script></script>`标签包裹你的代码

```
//child template
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
    $(function(){
        $("#slides").slides();
    });
    </script>
{% endblock %} 
```

我希望你明白这个问题！

# facebook - 将元素“喜欢”和“评论”添加到 Facebook 点赞框

> ID：14956139
> 
> 赞同：1
> 
> 时间：2013-02-19T11:17:39.450
> 
> 标签：facebook, facebook-like, facebook-comments

facebook 喜欢框允许我显示组的提要，但它不会显示每个帖子的点赞或评论，也不允许登录的 Facebook 用户对帖子发表评论。

我一直无法理解 Graph API（我不是程序员），我会继续尝试，但同时我想问是否有人知道将组的 facebook 墙导入外部网站的方法，完整喜欢和评论功能，而不是当前显示如何导入具有精简功能的 facebook 墙的方法。

# windows-7 - Windows XP 此操作系统不支持指定的语言环境。[LCID = 16393]

> ID：14956140
> 
> 赞同：0
> 
> 时间：2013-02-19T11:17:49.960
> 
> 标签：windows-7, windows-xp, sql-server-ce-4, lcid

我使用 Sql Server Compact 4.0 版并安装在我的系统上（Windows 7）。从我的解决方案中，当我运行这个工作正常时，基本上代码行

SqlCeConnection.Open()，连接字符串为“DataSource='E://S.sdf';” 连接字符串中没有指定 LCID。

这很好用。

但是，如果我在 Windows XP 系统上运行相同的程序，我会收到错误消息“此操作系统不支持指定的语言环境。[LCID = 16393]”

所以我尝试更改连接字符串“DataSource='E://S.sdf';LCID=1033”中的 LCID，但它仍然不起作用。

我什至尝试将 SqlCeConnectionStringBuilder.InitialLcid 属性设置为 1033 和 1030 它仍然不起作用。

请建议我在 Windows XP/Windows Server 中缺少什么，以便我收到此错误。

我已经为 Windows XP 安装了 x86 msi，对于我的 Windows 7 系统，64 位安装已完成。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:06:29.603

在 Windows 7 系统上创建数据库时，添加“LCID=1030;” 对于您的连接字符串，此属性是创建时间属性，并且在已创建数据库时无效。

# c# - 字典 合并不重复？

> ID：14956141
> 
> 赞同：0
> 
> 时间：2013-02-19T11:17:57.760
> 
> 标签：c#, dictionary

我一直在努力寻找合并或合并两个 dics 的逻辑..

```
enum type
{
 First,
 Second,
 Third
}

Class sample
{
 string name;
 int no;
}
public static Dictionary<type,List<sample>> GetDataDir(Dictionary<type,List<sample>> data1,Dictionary<type,List<sample>> data2)
{
   Dictionary<type,List<sample>> dataOut = new Dictionary<type,List<sample>>();
   // here one of the sample instance (data1) and key name is equal condition ,we have to update the data1 dic with key and update the sample of data2
   return dataOut ;
} 
```

请帮我找到出路...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:37:49.607

我想这就是你所追求的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication3
{
    internal enum sampleEnum
    {
        a,
        b,
        c,
        d
    }

    internal class Program
    {
        private static void Main(string[] args)
        {
            var a = new Dictionary<sampleEnum, sampleValue>();
            var b = new Dictionary<sampleEnum, sampleValue>();

            a.Add(sampleEnum.a, new sampleValue());
            a.Add(sampleEnum.b, new sampleValue());

            b.Add(sampleEnum.a, new sampleValue());
            b.Add(sampleEnum.b, new sampleValue());
            b.Add(sampleEnum.c, new sampleValue());
            b.Add(sampleEnum.d, new sampleValue());

            // Add missing b values into a
            foreach (var objItem in from l2 in b where !a.ContainsKey(l2.Key) select l2)
            {
                a.Add(objItem.Key, objItem.Value);
            }

            // Merge b's values into a
            foreach (var objItem in from l2 in b where a.ContainsKey(l2.Key) select l2)
            {
                a[objItem.Key] = objItem.Value;
            }

            System.Diagnostics.Debug.Assert(true);
        }
    }

    internal class sampleValue
    {
    }
} 
```

# jsf - JSF中合成页面内的命令按钮

> ID：14956144
> 
> 赞同：2
> 
> 时间：2013-02-19T11:18:02.823
> 
> 标签：jsf, primefaces, uiinclude

我遇到了与 user1598186 在他的问题中所说的相同的问题：[p:commandButton doesn't call bean's method in an <ui:include> page](https://stackoverflow.com/questions/11954576/pcommandbutton-doesnt-call-beans-method-in-an-uiinclude-page)

但是，没有给出解决方案（他完全删除`<ui:include>`了标签并使用了变量）

`<ui:include>`当我在 commandButton 中调用它时，是否有任何使用方法并且仍然执行我的支持 bean 的方法。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:41:38.943

EL 2.2 方法参数（所以，`#{bean.method()}`而不是`#{bean.method}`）可用于传递可用于命令按钮`actionListener`属性的方法签名。以下是传递 ManagedBean 属性以及传递方法签名的示例：

**主页**

```
<ui:include src="/jointeam.xhtml">
  <ui:param name="propertyValue" value="#{managedBean.property1} />
  <ui:param name="method" value="#{managedBean.performAction()}" />
</ui:include> 
```

**加入团队.xhtml**

```
...

<h:inputText value="#{propertyValue}" />

...

<p:commandButton value="Submit" actionListener="#{method}" /> 
```

您可以看到这在代码重用方面有多么强大，并且在许多情况下，它比复合组件更简洁且更易于使用。

# r - 将 data.frames 列表拆分为 data.frames 的子列表

> ID：14956145
> 
> 赞同：3
> 
> 时间：2013-02-19T11:18:03.940
> 
> 标签：r

我有一个 data.frames 列表，如下所示：

```
List          
[[1]]                
    .....               
  List             
   [[2]]            
  ....           

 List              
[[95]] 
```

我想将这个长长的 data.frames 列表拆分为 3 个 data.frames 的子列表，以便以简单易行的方式进行其他计算。

就像是：

> sublist1 <- List[1:3]
> sublist2 <- List[3:6]
> sublist3 <- List[6:9]

等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:18:56.757

我会做这样的事情：

```
ll <- by(seq_along(l),cut(seq_along(l),3),
                 FUN=function(x)l[x]) 
```

现在我有一个包含 3 个列表的列表。例如要访问第一个子列表，您可以执行以下操作：

```
ll[[1]]
[[1]]
data frame with 0 columns and 0 rows

[[2]]
data frame with 0 columns and 0 rows

[[3]]
data frame with 0 columns and 0 rows 
```

以此类推，ll[[2]]...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T11:33:00.140

您可以使用`assign`并执行以下操作：

```
d <- data.frame()
l <- list(d,d,d,d,d,d,d,d,d)

for(i in seq(1, length(l), by=3)) {
    assign(paste0("x", i), l[i:(i+2)])
}

> ls()
# [1] "d"  "i"  "l"  "x1" "x4" "x7" 
```

# asp.net-mvc - MVC Sitecore 项目 - 如何在 web.config 上添加键值设置

> ID：14956146
> 
> 赞同：1
> 
> 时间：2013-02-19T11:18:04.903
> 
> 标签：asp.net-mvc, sitecore, sitecore6

Sitecore 的新手，因此这个基本问题开始...

我已经启动并运行了一个 MVC Sitecore 项目。但是，我想在 web.config 文件的 AppSetting 中包含一些简单的配置值。从我读到的内容来看，弄乱 Sitecore 配置文件并不是一个好习惯。

有人可以建议在 appsettings 上添加关键值的最佳实践吗？

1.  它应该放在 app_config 下吗？

2.  如果是，那么我应该使用哪个文件夹和什么命名约定？

3.  Sitecore 如何在运行时读取此文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T11:49:01.487

在我当前的项目中，我从 web.config 中删除了所有应用程序设置，并将它们包括在内：

```
<appSettings configSource=".\App_Config\AppSettings.config" /> 
```

然后，如果我有特定于环境的设置，我将使用 SlowCheetah（[可以在此处下载](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)）更改 AppSettings.config 文件中的设置。

我通过包含文件添加的对 web.config 的 sitecore 部分的所有更改。[您可以在 John West 的这篇文章](http://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/05/All-About-web-config-Include-Files-with-the-Sitecore-ASPNET-CMS.aspx)中阅读有关包含文件的更多信息

# c# - 时间：2019-04-10 标签：c#reportviewervisual studio 2012 express

> ID：14956154
> 
> 赞同：1
> 
> 时间：2013-02-19T11:18:32.223
> 
> 标签：c#, winforms, visual-studio-2012, reportviewer

我一直在尝试使用集成到 Visual Studio 2012 Express Edition 中的 reportviewer 控件，但我不知道如何使用。我需要访问一个 mysql 数据库，获取我想要的数据并将它们呈现在可以打印的表上。我发现的所有教程都涉及向解决方案添加一个新项目 - 报告 - 但快速版不支持报告模板。有没有办法绕过这个障碍？我可以手动创建这个项目吗？如何？(C# winforms) 编辑：我稍微改述一下这个问题，因为到目前为止没有人回答。我有一个数据表对象（在向数据库发送查询之后）。如何将数据表发送到 reportviewer 控件并在屏幕上查看结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T06:39:33.540

遵循此链接中的此步骤，即使是在 vb.net [如何使用带有 Visual Studio 2012 Express 的报表查看器](http://www.vbforums.com/showthread.php?717175-How-to-use-Report-Viewer-with-Visual-Studio-2012-Express) 之后，转到表单的 desiner.cs 并在文件底部添加这行代码，其中包含类似的代码

```
 // Form1
  // 
.
.
.      
   this.Controls.Add(this.reportViewer1); 
```

# .net-3.5 - MSB3245 无法解析此引用。“Microsoft.VisualStudio.SmartDevice.UnitTestFramework”

> ID：14956158
> 
> 赞同：3
> 
> 时间：2013-02-19T11:18:42.143
> 
> 标签：.net-3.5, msbuild, compact-framework

我正在尝试使用 MSBuild（版本 3.5 ofc）编译 .NET 3.5 解决方案，但编译单元测试文件失败。

> C:\Windows\Microsoft.NET\Framework\v3.5\Microsoft.Common.targets：警告 MSB3245：无法解析此引用。找不到程序集“Microsoft.VisualStudio.SmartDevice.UnitTestFramework，Version=9.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a，processorArchitecture=MSIL”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。

一些附加信息： - 当我使用 Visual Studio 2008 编译它时，一切（编译和测试运行）工作正常。 - 我确信这个 dll 存在于公共（或私有）程序集文件夹中。- 此解决方案中的某些项目适用于 .NET 3.5 Compact Framework。这可能是导致此问题的原因吗？

问候，

编辑：我找到了解决此问题的方法。我只是在我的 MSBuild 脚本中添加了“C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PublicAssemblies”参考路径，它现在可以工作了。但是 - 我仍然觉得应该有更好的方法。

我正在使用 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-12T09:34:09.767

Pawel Wrobel 的解决方案（帮助了我）：

> 编辑：我找到了解决这个问题的方法。我只是在我的 MSBuild 脚本中添加了“C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PublicAssemblies”参考路径，它现在可以工作了。但是 - 我仍然觉得应该有更好的方法。

你必须像这样传递参数：

```
msbuild.exe /p:ReferencePath="C:\Program Files (x86)\Microsoft Visual Studio
> 9.0\Common7\IDE\PublicAssemblies" 
```

# ruby-on-rails - 在 will_paginate-bootstrap gem 之后 Rspec 测试失败

> ID：14956161
> 
> 赞同：0
> 
> 时间：2013-02-19T11:18:48.757
> 
> 标签：ruby-on-rails, ruby, rspec, will-paginate

我安装了`will_paginate-bootstrap`gem 并将其添加到我的模板中

```
<%= will_paginate, renderer: BootstrapPagination::Rails %> 
```

现在我的测试失败了

```
Failure/Error: visit users_path
     ActionView::Template::Error:
       /Users/user/dev/rails/my/app_rails/app/views/users/index.html.erb:10: syntax error, unexpected tLABEL, expecting '='
       ...end= ( will_paginate, renderer: BootstrapPagination::Rails )...
       ...                               ^
     # <internal:prelude>:10:in `synchronize'
     # ./spec/requests/user_pages_spec.rb:24:in `block (4 levels) in <top (required)>' 
```

这条消息是什么意思？如何修复损坏的测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:55:28.650

That code is using the Ruby 1.9 hash syntax. Are you still on 1.8 by chance?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:37:21.840

括号固定问题`<%= will_paginate(:renderer => BootstrapPagination::Rails) %>`

# google-app-engine - 带有日期时间字段的 ndb 查询错误 - Google App Engine

> ID：14956164
> 
> 赞同：11
> 
> 时间：2013-02-19T11:18:55.980
> 
> 标签：google-app-engine, datetime, google-cloud-datastore, app-engine-ndb

我有一个问题，我没有找到任何信息。

我像这样在我的模型中定义一个字段。

```
class Dates(ndb.model):
    ...
    date = ndb.DateTimeProperty(required = True) # I want to store date and time
    ... 
```

后来我尝试查询（现在我想要一天的所有日期，我不介意时间）：

```
kl = Dates.query(ndb.AND(Dates.date.year == year,
                         Dates.date.month == month,
                         Dates.date.day == day),
                 ancestor = customer.key).fetch(keys_only = True)
dates = ndb.get_multi(kl) 
```

但我得到这个错误日志： AttributeError: 'DateTimeProperty' object has no attribute 'year'

我不知道为什么。我试过 Dates.date() == date, Dates.date == date (<-DateTime obj), ...

我的数据库仍然是空的，但我想这并不介意，因为我永远不会在每一天都有约会。

有人知道为什么吗？我应该改用 GQL 吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T17:24:21.993

您可以为此使用“范围”查询。请参见下面的示例。

```
import datetime
date = datetime.datetime.strptime('02/19/2013', '%m/%d/%Y')
kl = Dates.query(
    ndb.AND(Dates.date >= date),
            Dates.date < date + datetime.timedelta(days=1)) 
```

将获取 2013 年 2 月 19 日的所有日期时间。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T11:28:34.510

您试图实现的目标实际上是不可能的，因为您只能查询整个日期，而不能查询其中的某些部分。

为了实现您在那里尝试的内容，我建议您在模型中添加更多属性：

```
class Dates(ndb.model):
    ...
    date = ndb.DateTimeProperty(requiered=True)
    date_year = ndb.IntegerProperty()
    date_month = ndb.IntegerProperty()
    date_day = ndb.IntegerProperty()
    ... 
```

您可以在每次保存时更新这些值，或者您可以使用[Model Hooks](https://developers.google.com/appengine/docs/python/ndb/entities#hooks)自动执行此操作，然后您的新查询将变为：

```
kl = Dates.query(ndb.AND(Dates.date_year == year,
                         Dates.date_month == month,
                         Dates.date_day == day),
                 ancestor=customer.key).fetch(keys_only=True)
dates = ndb.get_multi(kl) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T15:22:06.210

使用日期属性。然后你可以使用一个简单的 == 查询：

```
>>> import datetime
>>> from google.appengine.ext.ndb import *

>>> class D(Model):
...   d = DateProperty()
...

>>> d = D(d=datetime.date.today())

>>> d.put()
Key('D', 9)

>>> d
D(key=Key('D', 9), d=datetime.date(2013, 2, 20))

>>> D.query(D.d == datetime.date.today()).fetch()
[D(key=Key('D', 9), d=datetime.date(2013, 2, 20))] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T10:01:54.573

我扩展了@Guido van Rossum 代码片段以包括 <> 和 timedelta 用于计算，主要是为了我自己的满意

```
import datetime
from datetime import timedelta

from google.appengine.ext.ndb import *

class D(Model):
  d = DateProperty()

now = datetime.date.today()
date1 =  now-timedelta(+500)
date2 =  now-timedelta(+5)

d1 = D(d=now)
d2 = D(d=date1)
d3 = D(d=date2)

d1.put()
d2.put()
d3.put()

date2 =  now-timedelta(+50)

result1 = D.query(D.d == now).fetch(4)
result2 = D.query(D.d > date2).fetch(2)
result3 = D.query(D.d < date2).fetch(2)

result4 = D.query(D.d >= date2, D.d <= now).fetch(2)

print result1
print "+++++++"
print result2
print "+++++++"
print result3
print "+++++++"
print result4 
```

# image-processing - im2bw(gray_image, level); 有什么不同？& gray_image < 175;?

> ID：14956165
> 
> 赞同：0
> 
> 时间：2013-02-19T11:18:57.800
> 
> 标签：image-processing, matlab

大家好，我是 Matlab 图像处理工具箱的新手，我真的不能决定在

```
im2bw(gray_image, level); 
gray_image < 0.5; ? 
```

对于 im2bw(gray_image, **level** ); level 我们也可以使用值**0.5**或其他值吗？

谁能解释一下，如果我想对灰度图像设置阈值，如果我想自己调整阈值级别，哪个更好？

如果是一样的请告诉我谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:23:45.410

正如`im2bw` [文档](http://www.mathworks.nl/help/images/ref/im2bw.html)所说：

> 在 [0,1] 范围内指定`level`。该范围与图像类别可能的信号电平有关。因此，0.5 的级别值介于黑白之间，与级别无关

这使它比`image < level`;稍微灵活/方便一些。根据您获取图像的方式，这些值可能在 0-255 范围内，在这种情况下，您的替代方案不会给出所需的结果。否则它们是等价的。

# wcf-data-services - 为什么我的 WCF 数据服务没有加载扩展属性？

> ID：14956172
> 
> 赞同：3
> 
> 时间：2013-02-19T11:19:11.803
> 
> 标签：wcf-data-services, entity-framework-5

我通过数据服务公开了一些实体 (EF)：
- 比赛
- 联赛
- 团队
---- 参与者

我通过以下方式检索比赛：

```
proxy.races 
```

为了获得比赛的嵌套属性，我使用如下的 expand 方法：

```
proxy.Races.Expand("Leagues/Teams/Participants"); 
```

我通过代理（提琴手）访问 Web 服务，以便检查结果。当我在提琴手中查看结果时，我可以清楚地看到嵌套结构已正确加载，但是当我在 Visual Studio 中检查对象时，对象/子集合为空。我究竟做错了什么？

*   弗雷德里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:54:50.687

我做了一些实验，很困惑服务器发送了正确的数据，但在 DataService 实体中没有正确合并。通过在代理对象上设置 MergeOption 属性，我可以让它更新实体。

```
proxy.MergeOption = System.Data.Services.Client.MergeOption.OverwriteChanges; 
```

我希望这可以帮助其他有同样问题的人:-)

*   弗雷德里克

# iphone - 无法给朋友过生日

> ID：14956173
> 
> 赞同：1
> 
> 时间：2013-02-19T11:19:14.723
> 
> 标签：iphone, ios, facebook, facebook-graph-api

根据 [http://developers.facebook.com/docs/howtos/user-data-ios-sdk/#step3上的文档](http://developers.facebook.com/docs/howtos/user-data-ios-sdk/#step3)

我正在使用以下代码来获得朋友生日的许可

appdelegate.m

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

 NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_location",
                        @"user_birthday",
                        @"user_likes",
                        nil];

return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }];
    } 
```

并在 view controller.mi 中使用以下代码在 view 中加载

```
 NSString *query =
     @"SELECT  uid, name, birthday, birthday_date FROM user WHERE uid IN (SELECT uid2      FROM friend WHERE uid1 = me() LIMIT 25)";
    // Set up the query parameter
   NSDictionary *queryParam =
  [NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];
   // Make the API request that uses FQL

[FBRequestConnection startWithGraphPath:@"/fql"
                             parameters:queryParam
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) {
                          if (error) {
                              NSLog(@"Error: %@", [error localizedDescription]);
                          } else {
                              NSLog(@"Result: %@", result);
                          }
                      }]; 
```

但我无法获得朋友的生日日期.. 没有向朋友发送访问他生日的请求..

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:20:50.397

您需要在您的权限数组中添加权限**friends_birthday ，如下所示：**

```
NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_location",
                        @"user_birthday",
                        @"user_likes",
                        @"friends_birthday",
                        nil]; 
```

它会为你工作。

# c++ - std::containers 的日志分配器？

> ID：14956176
> 
> 赞同：5
> 
> 时间：2013-02-19T11:19:24.877
> 
> 标签：c++, memory-management, c++11, boost-mpl, allocator

**X：**我需要知道程序的每个部分使用了多少内存。我的程序大量使用 C++ 标准库。特别是，我想知道每个对象使用了多少内存。

**我是怎么做**的：记录消费`some_vector`，只需写

```
my::vector<double,MPLLIBS_STRING("some_vector")> some_vector; 
```

在哪里

```
namespace my {
  template<class T, class S>
  using vector = std::vector<T,LoggingAllocator<T,S>>;
} 
```

登录分配器实现如下：

```
template<class T, class S = MPLLIBS_STRING("unknown")> struct LoggingAllocator {
  // ... boilerplate ...

  pointer allocate (size_type n, std::allocator<void>::const_pointer hint = 0) {
    log_allocation(boost::mpl::c_str<S>::value);
    // allocate_memory (I need to handle it myself)
  }
  void destroy (pointer p) ; // logs destruction
  void deallocate (pointer p, size_type num); // logs deallocation
}; 
```

**问题：**有没有更好的方法以通用方式获得这种行为？更好我的意思是，更简单，更好，不依赖于`boost::mpl`和`mpllibs::metaparse`，......理想情况下我只想写

```
my::vector<double,"some_vector"> some_vector; 
```

并完成它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T11:27:46.457

虽然可能不是“更通用”，但如果您不想自己处理所有分配，您可以从标准分配器继承[`std::allocator`](http://en.cppreference.com/w/cpp/memory/allocator)：

```
template<class T, class S = MPLLIBS_STRING("unknown"), class Allocator = std::allocator<T>>
struct LoggingAllocator : public Allocator {
    // ...
}; 
```

在`allocate`//函数`destroy`中`deallocate`进行日志记录，然后调用父方法：

```
pointer allocate (size_type n, std::allocator<void>::const_pointer hint = 0) {
    log_allocation(boost::mpl::c_str<S>::value);
    return Allocator::allocate(n, hint);
} 
```

但是请注意，`std::allocator`它并不是真正为继承而设计的，例如它没有虚拟析构函数。

# c# - 如何填充数据表中的每一列

> ID：14956177
> 
> 赞同：1
> 
> 时间：2013-02-19T11:19:26.053
> 
> 标签：c#

我正在迭代很多字符串，我想用每个结果填充我的第一个（也是唯一一个）3 列，然后在新行中重新开始。喜欢：

```
A     |  B     | C
------+--------+------
"DOG" | "CAT"  | "FISH"    
"FDF" | "AAA"  | "RRR" 
```

等等....
基本上在每一行“满”之后打开新行。

```
HtmlNodeCollection tables = doc.DocumentNode.SelectNodes("//table");
HtmlNodeCollection rows = tables[2].SelectNodes(".//tr");

DataTable dataTable = new DataTable();
dataTable.Columns.Add("A", typeof(string));
dataTable.Columns.Add("B", typeof(string));
dataTable.Columns.Add("C", typeof(string)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:24:19.583

试试这样

```
 for (int i = 0; i < rows .Count(); i++)
            {

                DataRow datarowObj= dataTable .NewRow();
                datarowObj["A"] = yourValue;
                datarowObj["B"] = yourValue;
                datarowObj["C"] = yourValue;
                dataTable.Rows.Add(datarowObj);
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T11:28:10.333

您可以使用 Linq`GroupBy`将长列表分成 3 组：

样本数据：

```
DataTable table = new DataTable();
table.Columns.Add("Col1");
table.Columns.Add("Col2");
table.Columns.Add("Col3");

List<string> longList = Enumerable.Range(1, 99).Select(i => "row " + i).ToList(); 
```

将长列表分成三部分：

```
var groupsWithThree = longList
    .Select((s, i) => new { Str = s, Index = i })
    .GroupBy(x => x.Index / 3); 
```

将它们添加到表中：

```
foreach (var group3 in groupsWithThree)
    table.Rows.Add(group3.First().Str, group3.ElementAt(1).Str, group3.Last().Str); 
```

请注意，它假定列表可以被三整除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T11:24:25.970

```
dataTable.Rows.Add(new object[] { "A1", "B1", "C1" })

// Alternatively
object[] arr = new object[] { "A2", "B2", "C2" };
dataTable.Rows.Add(arr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T11:29:10.183

例如，在向 DataTable 添加一个空 DataRow 之后，使用 DataRoxw 进行管理 `DataRow row = table.Rows[0]; foreach (object item in row.ItemArray) {` ：

# emacs - 满足条件时如何让建议不执行该功能？

> ID：14956180
> 
> 赞同：0
> 
> 时间：2013-02-19T11:19:32.957
> 
> 标签：emacs, elisp, advising-functions, defadvice

当建议返回 nil 时，如何防止建议函数运行？

```
(defadvice beginning-of-line (before test activate)
 nil) 
```

-> 根本没有运行`beginning-of-line`。

编辑：只是为了消除您的担忧，我不打算在`beginning-of-line`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:43:25.713

您可以按原样使用`around`建议：

```
(defadvice foo (around test activate)
  (if my-test
      ad-do-it)) 
```

该构造`ad-do-it`对应于运行原始函数。

# ios - 从 cellForRowAtIndexPath 中调用 heightForRowAtIndexPath？

> ID：14956189
> 
> 赞同：19
> 
> 时间：2013-02-19T11:20:11.900
> 
> 标签：ios, objective-c, uitableview

所以，它似乎`heightForRowAtIndexPath`是之前调用的`cellForRowAtIndexPath`。我目前正在使用`cellForRowAtIndexPath`计算每个单元格的高度（它们是可变高度，使用其中`UILabel`包含不同数量的文本。

**如果在计算**它的方法之前调用**设置**高度的方法，我对如何正确设置单元格的高度感到困惑。

 **我创建了一个 类别`NSString`和另一个类别`UILabel`，它们一起工作以`UILabel`形成正确的大小。问题是`UITableViewCell`包含这些标签的实例没有被调整大小，因此标签挂在每个标签的末端，与下面的标签重叠。

我知道我需要做的是使单元格的高度等于标签的高度，加上一些额外的边距空间，但我很困惑如何在计算标签高度之前设置高度。我可以在不使用的情况下设置某人的高度`heightForRowAtIndexPath`吗？或者如果没有，我可以计算其他地方的单元格的高度吗？我目前正在使用`indexPath.row`它来实现这一点，所以事先这样做会很棘手。这是我的 cellForRowAtIndexPath 的代码：

**cellForRowAtIndexPath**

```
- (UITableViewCell *) tableView: (UITableView *) tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath
{
    FQCustomCell *_customCell = [tableView dequeueReusableCellWithIdentifier: @"CustomCell"];
    if (_customCell == nil) {
        _customCell = [[FQCustomCell alloc] initWithStyle: UITableViewCellStyleValue1 reuseIdentifier: @"CustomCell"];
    }

    _customCell.myLabel.text = [[_loadedNames objectAtIndex: indexPath.row] name];
    _customCell.myLabel.font = [UIFont fontWithName: @"FontA" size: 15.0f];

    UIView *backView = [[UIView alloc] initWithFrame: CGRectZero];
    backView.backgroundColor = [UIColor clearColor];
    _customCell.backgroundView = backView;

    _customCell.myLabel.frame = CGRectMake(5, 5, 265, 65);

    [_customCell.myLabel sizeToFitMultipleLines];
    return _customCell;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T11:27:56.907

您需要计算单元格的高度`heightForRowAtIndexPath`，例如

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *theText=[[_loadedNames objectAtIndex: indexPath.row] name];
    CGSize labelSize = [theText sizeWithFont:[UIFont fontWithName: @"FontA" size: 15.0f] constrainedToSize:kLabelFrameMaxSize];
    return kHeightWithoutLabel+labelSize.height;
} 
```

您可以通过设置对标签大小设置一些约束`kLabelFrameMaxSize`

```
#define kLabelFrameMaxSize CGSizeMake(265.0, 200.0) 
```

然后通过添加一个带有变量标签高度的恒定高度来返回高度。

此外，为了保持一致，您应该使用相同的方法来设置框架，`cellForRowAtIndexPath`而不是使用`sizeToFitMultipleLines`

```
- (UITableViewCell *) tableView: (UITableView *) tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath
{
    FQCustomCell *_customCell = [tableView dequeueReusableCellWithIdentifier: @"CustomCell"];
    if (_customCell == nil) {
        _customCell = [[FQCustomCell alloc] initWithStyle: UITableViewCellStyleValue1 reuseIdentifier: @"CustomCell"];
    }

    _customCell.myLabel.text = [[_loadedNames objectAtIndex: indexPath.row] name];
    _customCell.myLabel.font = [UIFont fontWithName: @"FontA" size: 15.0f];

    UIView *backView = [[UIView alloc] initWithFrame: CGRectZero];
    backView.backgroundColor = [UIColor clearColor];
    _customCell.backgroundView = backView;

    CGSize labelSize = [_customCell.myLabel.text sizeWithFont:_customCell.myLabel.font constrainedToSize:kLabelFrameMaxSize];
    _customCell.myLabel.frame = CGRectMake(5, 5, labelSize.width, labelSize.height);

    return _customCell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:30:46.467

`heightForRowAtIndexPath`您应该在方法中计算单元格的高度。它应该在不使用任何 UILabel 的情况下完成，就像`heightForRowAtIndexPath`JP Hribovsek 的答案中的实现一样。

然后在`cellForRowAtIndexPath`不设置任何子视图的框架并且不调用`sizeToFitMultipleLines`标签的方法。相反，实现这样的`layoutSubviews`方法，`FQCustomCell`以便为单元格的任何可能边界正确设置子视图框架。您不应该关心此方法中的文本或字体大小，只需确保标签的边距正确即可。如果在方法中正确计算单元格的高度，则`heightForRowAtIndexPath`标签的大小将恰到好处。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-19T11:32:13.143

对于每个单元格 heightforRowAtIndexPath ，首先调用，然后调用 CellForRowAtIndexPath 。因此，您可以先计算高度，然后为每个单元格填充 CellForRowAtIndexPath 中的数据。**

# php - 基于 Linux 的 PHP 安装连接到 MsSQL Server

> ID：14956193
> 
> 赞同：9
> 
> 时间：2013-02-19T11:20:18.420
> 
> 标签：php, sql-server, linux

在 Linux 机器上通过 PHP 连接到远程 Microsoft SQL Server 的最佳方式是什么。

PHP 只能在 Linux 机器上运行。

一段时间以来，我一直在寻找最简单的答案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-12-14T03:16:54.897

## php 5.6

**Ubuntu**

```
sudo apt-get install php5.6-sybase freetds-common libsybdb5 
```

**AWS / Centos / 红帽**

```
sudo yum install php56-mssql 
```

之后，您可以通过 PHP 连接到 MsSql 数据库，如下所示：

```
<?php
$server = 'localhost';
$user = 'someUser';
$pass = 'somePassword';
$database = 'theDatabaseName';

try {
    $pdo = new \PDO(
        sprintf(
         "dblib:host=%s;dbname=%s",
         $server,
         $database
        ),
         $user,
         $pass
    );
     $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
     echo "There was a problem connecting. " . $e->getMessage();
}

$query = "SELECT * FROM TestSchema.Employees";
$statement = $pdo->prepare($query);
$statement->execute();
$results = $statement->fetchAll(PDO::FETCH_ASSOC);

var_dump($results); 
```

您可以在命令行上使用以下内容对 MsSQL 进行故障排除：

```
tsql -H your.server.name -p 1433 -U yourusername -P yourpassword -D yourdatabasename 
```

要安装 tsql，您可以运行以下命令：

安装 SQL 二进制文件以在任何 PHP 版本上进行测试

```
sudo apt install freetds-bin 
```

* * *

## php 7+

Microsoft 有我们可以使用的本机驱动程序。完整的说明在[这里（Redhat / Ubuntu / Others）](https://www.microsoft.com/en-us/sql-server/developer-get-started/php/ubuntu/)。

该链接还包含在您的开发机器上安装 Ms SQL 服务器所需的步骤（在 Ubuntu 上工作，在 AWS 上不起作用，但您可以在那里启动一个 RDS 实例）。它还包含有关如何在数据库中创建测试表和数据的基本说明，以及 PHP 连接代码。

您还可以像这样为较新版本的 PHP 安装组件：

```
sudo apt-get install php7.2-sybase freetds-common libsybdb5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T11:27:58.920

您必须在 linux 上为 php 安装 mssql 驱动程序。
这是最适合您的[教程](http://www.linuxjournal.com/article/6636)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-03T14:15:46.507

尝试：对于 Ubuntu

```
sudo apt-get install php5-sybase php5-odbc freetds-common 
```

编辑 freetds.conf 然后用这个 PHP 连接 MSSQL 服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-07T04:44:58.813

在搜索并尝试了这里和其他帖子中的许多建议并花费了大量时间之后，一位同事建议尝试 ADO。

由于我们已经安装了启用 ADO 的 PHP，因此启动和运行只需不到 10 分钟。

如果您认真考虑从 Linux PHP 连接到 MS-SQL，请考虑 ADO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-16T02:15:15.633

有趣的是，这里的每个答案都针对问题提出了一种解决方案，而不是回答所提出的问题，哪个是“最佳”解决方案。不幸的是，OP忘记告诉我们“最佳”的标准是什么。

到目前为止没有人提到[odbc](http://m.linuxjournal.com/article/6636)。虽然这需要配置 odbc 驱动程序以连接到数据库并启用 php 扩展，但此方法提供了 php 代码与底层数据库的最佳隔离，使以后更容易移植代码。

[microsoft 提供的 php 驱动程序](https://github.com/Microsoft/msphpsql)应该具有良好的兼容性，但仅支持 v7 的 php。

您可能更愿意坚持使用 Linux 发行版提供的功能，以确保您拥有可支持的产品和/或自动补丁管理。这里 odbc 的替代品可能是[freetds 驱动程序](http://www.informaticapressapochista.com/linux/connect-php-code-ms-sql-server-freetds/)，但您没有告诉我们这是哪个 Linux 发行版。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-19T13:00:04.610

从 microsoft 获取用于 php 的 sqlsrv 扩展[http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx](http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx)

# python - 在函数中定义全局变量并传递给类

> ID：14956194
> 
> 赞同：1
> 
> 时间：2013-02-19T11:20:22.717
> 
> 标签：python, class, function, global-variables

任何人都可以帮忙吗，我正在尝试从下面代码中定义的类 PROCESS 中每 x 分钟采样一次数据（只要由此处未显示的其他函数调用时运行）来安排这个，我每 X 分钟运行一个调度程序函数，由 MAIN 函数启动并由函数 minmax_job 执行。

但是我的函数 minmax_job 似乎不知道我尝试过的关于放置全局变量等的初始值，但它仍然不知道 i = 0（最初）

```
i = 0
atc,otc,tssc = 0,0,0
atf,otf,tssf = False,False,False

class Process(threading.Thread):
    def __init__(self, buffer3, broadcast_server):
        threading.Thread.__init__(self)
        self.setDaemon(True)
        self.buffer3 = buffer3
        self.factory = broadcast_server

    def run(self):
        today = datetime.now()
        global time_of_last_run
        global atv1,atv2,atv3,otv1,otv2,otv3,tssv1,tssv2,tssv3
        global atf,otf,tssf
        global atc,otc,tssc

        if self.buffer3.startswith('kitchen aquarium: temp:'):
            self.temp = self.buffer3.replace('kitchen aquarium: temp:','')
            self.factory.broadcast("Aquarium temperature %s" % self.temp)

            if atc == 1 and atf:
                atv1 = float(self.temp)
                atf = False
            elif atc == 2 and atf:
                atv2 = float(self.temp)
                atf = False 
            elif atc == 3 and atf:
                atv3 = float(self.temp)
                atf = False

def minmax_job():

    global atv1,atv2,atv3,otv1,otv2,otv3,tssv1,tssv2,tssv3
    global atf,otf,tssf
    global atc,otc,tssc,i

    if i == 3:
        i = 0
        atc = 0

    if i < 4:
        atc = atc + 1 
        atf = True
        i = i + 1

if __name__ == '__main__':

    minmax_scheduler = Scheduler()
    minmax_scheduler.add_interval_job(minmax_job, seconds=10)
    minmax_scheduler.start() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:06:03.403

我需要被声明为全局，然后在外部范围内分配一个值，如这个演示所示

```
global i
i=0

def rabbit():
    global i
    print "rabbit ",i

#main here
if __name__ == '__main__':
    rabbit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T20:42:16.117

**上面的@Pillmuncher**作为子评论有正确的想法。我会做一个完整的答案。您正在尝试通过全局变量在进程和/或线程之间共享数据。这是一个非常不**正确**的方法。有时，如果月相正确并且您没有更改发表评论的位置等，它可能会起作用，也可能不会。

造成这种情况的原因很复杂，但足以说明您应该找到一个 Comp。科学。操作系统教科书并查找以下术语：

*   分叉
*   线程安全
*   多处理
*   受保护的记忆
*   比赛条件
*   消息队列
*   进程间通信
*   线程锁
*   堆栈内存分配
*   堆内存

在 Python 中，多处理和线程模块都提供了许多函数来声明共享内存并保证其安全。你喜欢安全（即使你还不知道）。安全是好的。安全可以（但并不总是）很快。

如果您尝试使用全局变量而不是多处理和线程模块中的功能，那么您将在将自己吊在围场上的同时将自己开枪打死：缓慢而痛苦地，您会鄙视生活本身。

因此，请查看： [http ://docs.python.org/2/library/multiprocessing.html](http://docs.python.org/2/library/multiprocessing.html)

这有许多以正确方式做事的好例子。提前声明你的变量，将它们传递到每个线程/进程中，过上你真正想要过的正直的生活。

**一般来说，更喜欢多处理。** 多线程充满了麻烦，虽然它*可以*更快地执行，但您几乎不需要那种速度。这种速度伴随着危险和麻烦，大量的调试时间（现在和以后），并且非常非常小心。最好做老前辈（比如我）做的事：让多处理成为你的朋友，并将线程转储到 [主要以 Microsoft 为中心的] 垃圾堆中不要去那里。

# java - 如何从纬度和经度中获取地址？

> ID：14956200
> 
> 赞同：-6
> 
> 时间：2013-02-19T11:20:43.710
> 
> 标签：java, android

我正在获取 android 地图中触摸事件的纬度和经度。

我想在地图上获得特定触摸的地址。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:23:48.707

您可以使用谷歌[地理编码](http://developer.android.com/reference/android/location/Geocoder.html)器，并从中调用[`getFromLocation()`](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocation%28double,%20double,%20int%29)给定的纬度和经度……但请注意，它可能并不准确。

# c# - 实体框架模型到具有索引属性的数据库

> ID：14956204
> 
> 赞同：4
> 
> 时间：2013-02-19T11:20:55.513
> 
> 标签：c#, indexing, entity-framework-5, edmx

我正在使用 EF 5.0 和图表建模器 (*.edmx) 创建模式并从模型生成数据库，我想知道是否有任何方法可以通过此建模器（仅）在某些属性上创建索引。

非常感谢您的回答或建议。

//编辑

我正在努力，如果我成功了，我会分享一点“如何做”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:53:59.850

Here is an article about [Model-First in the Entity Framework 4](http://msdn.microsoft.com/en-us/data/ff830362.aspx)

Read the sections about **Generating the DDL** and **Influencing the DDL Generation**

*Update*

Take a look at this example too: [Entity Framework Part 5 Model First : Create a database with the Complex Types.](http://www.thebuttonfactory.nl/?p=756)

# iphone - 无法使用 iCloud 存储在网格视图中显示图像？

> ID：14956212
> 
> 赞同：5
> 
> 时间：2013-02-19T11:21:22.537
> 
> 标签：iphone, ios, image, icloud

我正在将图像处理到 iCloud 存储。使用 我正在实施的[这个链接示例代码。](https://github.com/rwenderlich/PhotoKeeper)但在这里我使用网格视图来显示图像。对于网格视图，我正在使用`AQGridView`示例。现在我在实现这个时遇到了一些问题。

我的项目在本地存储中运行良好，但在`iCloud`存储中无法运行。虽然将图像添加到网格视图中只添加了一个视图，但完成了它从视图中删除的过程，我也没有得到`CloudURL`。

这里有一些主要代码

```
 - (void)processiCloudFiles:(NSNotification *)notification {

// Always disable updates while processing results
[_query disableUpdates];

[_iCloudURLs removeAllObjects];

// The query reports all files found, every time.

NSArray * queryResults = [_query results];

for (NSMetadataItem * result in queryResults) {

    NSURL * fileURL = [result valueForAttribute:NSMetadataItemURLKey];

    NSNumber * aBool = nil;

    // Don't include hidden files
    [fileURL getResourceValue:&aBool forKey:NSURLIsHiddenKey error:nil];

    if (aBool && ![aBool boolValue]) {

        [_iCloudURLs addObject:fileURL];

        NSLog(@"%@",_iCloudURLs);

    }

}

NSLog(@"Found %d iCloud files.", _iCloudURLs.count);

_iCloudURLsReady = YES;

if ([self iCloudOn]) {

    NSLog(@"%d",_objects.count);

    // Remove deleted files
    // Iterate backwards because we need to remove items form the array

    for (int i = _objects.count -1; i >= 0; --i) {

        PTKEntry * entry = [_objects objectAtIndex:i];

        if (![_iCloudURLs containsObject:entry.fileURL]) {

            [self removeEntryWithURL:entry.fileURL];
        }
    }

    NSLog(@"%@",_iCloudURLs);

    // Add new files
    for (NSURL * fileURL in _iCloudURLs) {

        [self loadDocAtURL:fileURL];
    }

    self.navigationItem.rightBarButtonItem.enabled = YES;

}

if (_moveLocalToiCloud) {

    _moveLocalToiCloud = NO;
    [self localToiCloudImpl];

}
else if (_copyiCloudToLocal) {

    _copyiCloudToLocal = NO;
    [self iCloudToLocalImpl];

}

[_query enableUpdates];

 } 
```

我还展示了我的应用程序的控制台流程，请帮助我

```
 2013-02-19 13:29:26.159 XXXX[337:907] iCloud available at: file://localhost/private/var/mobile/Library/Mobile%20Documents/XXXXX~com~XXXX~XXXX/
 2013-02-19 13:29:32.847 XXXX[337:907] No longer watching iCloud dir...
 2013-02-19 13:29:32.849 XXXX[337:907] Starting to watch iCloud dir...
 2013-02-19 13:29:33.002 XXXX[337:907] Found 0 iCloud files.
 2013-02-19 13:29:33.004 XXXX[337:907] local => iCloud impl
 2013-02-19 13:29:38.697 XXXX[337:907] Want to create file at file://localhost/private/var/mobile/Library/Mobile%20Documents/XXXX~com~XXXX~XXXX/Documents/iBoast_Art_Soodu.ibt
 2013-02-19 13:29:38.781 XXXX[337:907] File created at file://localhost/private/var/mobile/Library/Mobile%20Documents/XXXX~com~XXXX~XXXX/Documents/iBoast_Art_Soodu.ibt
 2013-02-19 13:29:38.790 XXXX[337:907] load table
 2013-02-19 13:30:38.563 XXXX[337:907] button index: 1
 2013-02-19 13:30:41.595 XXXX[337:907] iCloud available at: file://localhost/private/var/mobile/Library/Mobile%20Documents/XXXX~com~XXXX~XXXX/
 2013-02-19 13:30:41.607 XXXX[337:907] No longer watching iCloud dir...
 2013-02-19 13:30:41.612 XXXX[337:907] Starting to watch iCloud dir...
 2013-02-19 13:30:41.780 XXXX[337:907] Success to close file://localhost/private/var/mobile/Library/Mobile%20Documents/XXXX~com~XXXX~XXXX/Documents/iBoast_Art_Soodu.ibt
 2013-02-19 13:30:41.790 XXXX[337:907] load table
 2013-02-19 13:30:42.011 XXXX[337:907] Found 0 iCloud files. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-09T19:39:43.227

我对此没有权威的答案，但我肯定会怀疑这是一个时间问题。我希望看到一些委托操作继续了解 iCloud 项目何时上传。

我也会改进你的日志记录。线

```
NSLog(@"%@",_iCloudURLs); 
```

应该有更好的格式。没有这个，我不能确定，但​​看起来这条线永远都达不到。

# css - CSS中的镜头形状

> ID：14956218
> 
> 赞同：0
> 
> 时间：2013-02-19T11:21:40.810
> 
> 标签：css, css-transforms, css-shapes

我正在尝试使用 CSS 绘制具有一定高度和宽度的透镜形状。为了产生连续曲率，左上角和右下角的边界半径必须为 100%，而其他角的边界半径必须为 0%。这会产生一个 45 度角的镜头。因为它是在这个角度，我不能单独增加镜头的高度或宽度，而不会使它变形。

我已经尝试过转换，但是浏览器总是在缩放之前应用旋转，所以它不起作用。

有没有办法单独改变镜头的高度和宽度？

我创建了一个[JSFiddle](http://jsfiddle.net/HYSLf/2/)来说明我的意思。形状 1 是正确的高度，但没有连续的曲率。形状 2 具有连续曲率，但不是正确的形状。形状 3 是我纠正这些问题的尝试，但由于应用转换的顺序，它不起作用：

```
transform: rotate(45deg) scaleY(1.4); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:25:49.483

您可以简单地翻转属性以确定它们的应用顺序：

```
transform: scaleY(1.4) rotate(45deg); 
```

[更新了 JSFiddle](http://jsfiddle.net/HYSLf/4/)。

# html - 悬停时出现字体问题

> ID：14956224
> 
> 赞同：1
> 
> 时间：2013-02-19T11:22:14.927
> 
> 标签：html, css, fonts, hover, font-face

[http://i.stack.imgur.com/D3plE.png](http://i.stack.imgur.com/D3plE.png) 我正在为客户端的导航栏使用龙虾字体（我知道，这很糟糕），当链接是静态的时，它会丢失一些字母但是当我将整个字母悬停时，我没有为链接设置任何宽度，所以它不像它们隐藏在一个盒子或任何东西后面......我附上了一张图片，顶部图片是普通链接底部悬停。我基本上希望它包含字母的所有部分，就像底部的图片一样。

正常的不透明度为 0.4，带有文本阴影，悬停状态的不透明度为 0.7，如果有帮助的话。

```
.links a {
color:white!important; 
text-shadow: 1px 2px 0px black;
opacity:0.7;
}

.links a:hover {
opacity:1;
}

<h2 class="center links"><a href="#">Contact</a></h2> 
```

js fiddle 在这里使用龙虾[http://jsfiddle.net/JSbdh/](http://jsfiddle.net/JSbdh/) 虽然，这似乎不是问题，这使得它更加奇怪

# cloudbees - 无法使用 Cloudbees SDK 更改 JVM 时区

> ID：14956225
> 
> 赞同：0
> 
> 时间：2013-02-19T11:22:20.420
> 
> 标签：cloudbees

我发现了这个问题：[如何为部署在 RUN@Cloud 上的应用程序设置时区，](https://stackoverflow.com/questions/11972149/how-to-set-timezone-for-my-application-deployed-on-runcloud)建议使用 jvmTimeZone 但它似乎没有任何效果。

我试过了：

```
bees config:set -RjvmTimeZone=Europe/Berlin
bees config:set -jvmTimeZone=Europe/Berlin 
```

但`Calendar.getInstance().getTimeZone()`仍返回“GMT”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:51:49.740

jvmTimeZone 是一个平台参数，只能使用 app:deploy / app:update 设置

```
 bees app:update jvmTimeZone=Europe/Berlin 
```

# mysql - MySQL REGEXP 没有产生预期的结果（不是多字节安全的？）。有解决办法吗？

> ID：14956234
> 
> 赞同：0
> 
> 时间：2013-02-19T11:22:42.087
> 
> 标签：mysql, regex

我正在尝试编写一个 MySQL 查询来识别实际包含首字母的名字字段。问题是查询正在拾取不应该匹配的记录。

我已经针对 RegEx Buddy 中的 POSIX ERE 正则表达式实现进行了测试，以确认我的正则表达式字符串是正确的，但是在 MySQL 查询中运行时，结果会有所不同。

例如，查询应识别字符串，例如：

“AJD”或“AJ D”。

但它也匹配诸如“Ralph”或“Terrance”之类的字符串。

查询：

```
SELECT *, firstname REGEXP '^[a-zA-z]{1}(([[:space:]]|\.)+[a-zA-z]{1})+([[:space:]]|\.)?$' FROM test_table 
```

如果相关的话，这里的“名字”字段是 VARCHAR 255。

使用字符串文字而不是表数据运行时，我得到相同的结果：

```
SELECT 'Ralph' REGEXP '^[a-zA-z]{1}(([[:space:]]|\.)+[a-zA-z]{1})+([[:space:]]|\.)?$' 
```

MySQL 文档警告 REGEXP 的潜在问题，我不确定这是否与我看到的问题有关：

> 警告 REGEXP 和 RLIKE 运算符以字节方式工作，因此它们不是多字节安全的，并且可能会产生多字节字符集的意外结果。此外，这些运算符通过字节值比较字符，即使给定的排序规则将它们视为相等，重音字符也可能不会比较相等。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:32:41.730

如果您在 mysql 客户端中对此进行测试，则需要转义反斜杠。每次出现`\.`must 变成`\\.`这是必要的，因为您的输入首先由 mysql 客户端处理，然后`\.`变成`.`. 所以你需要通过转义它们来保持反斜杠。

# c# - 如何使用另一个列表过滤列表？

> ID：14956240
> 
> 赞同：0
> 
> 时间：2013-02-19T11:22:57.273
> 
> 标签：c#, linq

我们有以下员工名单。

```
List<Employee> EmployeeList =new List<Employee>();
EmployeeList.Add(new Employee{ Id=101, Name="XYZ" });
EmployeeList.Add(new Employee{ Id=102, Name="QRS" });
EmployeeList.Add(new Employee{ Id=103, Name="ABC" });
EmployeeList.Add(new Employee{ Id=1101, Name="DEF" }); 
```

和所选员工 ID 的列表如下。

```
List<long> selectedEmployeeIds={ 101,103 }; 
```

我们想从上面的 EmployeeList 中过滤选择的员工。我们尝试使用包含如下，但它获取 3 条记录为 101,102,1101。

```
var selectedEmployees= (from record in EmployeeList where selectedEmployeeIds.Contains(record.Id.ToString()) select record).ToList(); // returning 3 records. 
```

任何人都可以帮助我们只获得员工 101,103。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:24:09.547

您不需要`ToString()`, Use [`Enumerable.Contains`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.contains.aspx)，它将适用于任何数据类型，而不仅仅是字符串。您当前的代码应该给出一个错误，因为`selectedEmployeeIds`is 类型`long`并且您正在检查它`string`。

```
var selectedEmployees= (from record in EmployeeList 
                       where selectedEmployeeIds.Contains(record.Id) 
                       select record).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:21:35.537

最后我们得到了上述查询的结果，

```
List<Employee> filteredRecords = (from a in EmployeeList join b in selectedEmployeeIds on a.ID equals b select a).ToList(); 
```

# facebook - Facebook 评论框正在迁移到另一个域

> ID：14956241
> 
> 赞同：1
> 
> 时间：2013-02-19T11:23:00.010
> 
> 标签：facebook, comments, facebook-comments

如何更改我的站点域并保留现有评论？

我正在使用 html5 数据属性，如下所示：data-href="http://domain/somespecificid" 我想更改为 data-href="http://new_domain/somespecificid"。

如果我保留旧的 href，我会收到一条错误消息：警告：*url*无法访问。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:38:41.353

非常短： [在 URL 更改后，您不能 Facebook 社交插件评论](https://stackoverflow.com/questions/8133406/facebook-social-plugin-comments-after-url-change) Facebook 评论与您提供的 URL 同步。但是您可以动态更改它。看这篇文章 [How to dynamic change facebook comments plugin url based on javascript variable?](https://stackoverflow.com/questions/11122633/how-to-dynamically-change-facebook-comments-plugin-url-based-on-javascript-varia)

# python - py2app 包中的 Twisted Core Foundation reactor 和 CFNetwork

> ID：14956242
> 
> 赞同：1
> 
> 时间：2013-02-19T11:23:01.653
> 
> 标签：python, cocoa, twisted, pyobjc, py2app

我正在制作一个 Python/PyObjC 包以使用来自 Objective-C 应用程序的一些 Twisted 功能。

我需要在我的 Python 应用程序中安装一个 Core Foundation 反应器：

```
from twisted.internet import cfreactor
cfreactor.install() 
```

问题是，当我使用 py2app 构建包时，所需的 CFNetwork 框架永远不会出现在我的包中，并且当我从 Objetive-C 应用程序加载包时它会崩溃。

有什么方法可以强制链接 CFNetwork 框架？为什么这个框架没有自动添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:57:42.627

包含未自动检测到的包很容易：只需将缺少的模块添加到 setup.py 文件中：

```
setup(
   ...
   options=dict(
      py2app=dict(
        includes=["module1", "module"],
      ),
   ),
   ...
) 
```

我不知道为什么不自动包含 CFNetwork，cfreactor 的代码不应该以这种方式混淆 py2app（也就是说，导入是使用常规导入语句完成的，并且不会隐藏在 C 代码或**导入**调用中）。

您可以使用一个小示例项目（例如一个简单的 SystemPreferences 插件）重现该问题吗？这将使调试问题变得容易得多。

另外，您使用哪些版本的 Twisted、PyObjC 和 py2app？

# php - 在 CentOS 6.3 上安装 PHP 5.4.11 和 MySQL 5.6.10 时出现问题

> ID：14956244
> 
> 赞同：2
> 
> 时间：2013-02-19T11:23:03.320
> 
> 标签：php, mysql, linux, installation, centos

我正在尝试将**PHP 5.4.11**和**MySQL 5.6.10**安装到**CentOS 6.3**机器上。

我已经通过 yum 的 remi 存储库成功安装了 PHP 5.4.11。我还使用[MySQL 下载页面](http://dev.mysql.com/downloads/mysql/5.6.html)上的社区服务器 rpm 成功安装了 MySQL 5.6.10 。

它们都可以独立工作，但是当尝试`php-mysql`从 remi 存储库安装时，`mysql-libs`会拉入 5.5.30 版本的依赖项，继续安装会产生一系列错误，如下所示：

```
file /usr/share/mysql/czech/errmsg.sys from install of mysql-libs-5.5.30-1.el6.remi.x86_64 conflicts with file from package MySQL-server-5.6.10-1.el6.x86_64 
```

在这一点上，我对让这个工作的深度不够。谁能建议我需要做些什么才能让我的 PHP 安装与 MySQL 一起使用？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T13:33:20.700

rpm --nodeps --force

只是覆盖

# math - 计算进度条的百分比填充

> ID：14956247
> 
> 赞同：1
> 
> 时间：2013-02-19T11:23:11.073
> 
> 标签：math, excel, progress-bar, vba

我在 Excel VBA 的用户窗体上设置进度条图像的错误宽度时遇到问题。

我有一个用户表单，该表单上有一个标签和一个图像。

图像的最大宽度为 330。

在从 1 到 intNumberOfGetRows（在本例中为 64）的循环中，我想更新图像的 width 属性以显示进度，因为大型记录集的每个 1000 记录块都放入数组并写入 csv 文件。

这是我的代码：

```
 For intRecord = 1 To intNumberOfGetRows + 1 ' outer loop

    ' put the data in an array and print to file
    arrContacts = adoRsMailshotAccConData.GetRows(intRows)

    With fsOutputFile

        For iDx = 0 To UBound(arrContacts, 2)
            .WriteLine arrContacts(0, iDx)
        Next

        '.Close
    End With

    sMsg = "Number " & intRecord & " of " & intNumberOfGetRows
    Application.StatusBar = sMsg

    With frmProgress
        .lblProgress.Caption = sMsg
        .imgProgress.Width = (intRecord / intNumberOfGetRows) * 330
        DoEvents
        .Repaint
    End With

    DoEvents
Next 
```

当 intRecord 为 13 时，应该是填充图像的 20% 左右，这意味着图像的宽度应该是 66，所以我想出了这个：

330 * (intRecord / intNumberOfGetRows * 100) / 100

看起来我好像忘记了我的基本数学理论，那是最好的方法吗？

感谢您提供有关如何改进此问题的任何建议

菲利普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:26:52.867

你不需要那里的那100个。您只希望您的进度显示您已完成（在您的示例中）总数的 13/64，总数为 330，因此您需要计算的只是 330 * (13/64)：

`330 * (intRecord / intNumberOfGetRows)`

# c# - 如何在我的比赛游戏中实现地图？

> ID：14956248
> 
> 赞同：-1
> 
> 时间：2013-02-19T11:23:12.557
> 
> 标签：c#, winforms, logic

您好我想通过 WinForms 创建一个简单的 2D 赛车游戏（学校项目我必须使用 WinForms 所以请不要建议 XNA）。

我目前的问题是我需要在 windows 地图中实现我的地图，例如： ![赛车地图：](../Images/15e01873417fe5fde5058869a13bfcdc.png)

[我取自： 2d 赛车游戏中的](https://stackoverflow.com/questions/12541214/map-format-in-2d-racing-game)Saska 地图格式

无论如何假设它是一个功能齐全的地图，我如何以什么方式将它添加到我的项目中？如果我将整个地图放在窗口中，它可能太小并且难以控制汽车，所以我假设我需要将地图切成碎片但我不知道它背后的逻辑是什么以及如何将它与我的项目，谁能给我解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:17:18.693

确保你实现了 Form 的 Paint 事件（我假设你已经知道如何在 WinForms 上绑定事件）

```
private void Form1_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
{
    e.Graphics.DrawImage(Image.FromFile("map.png"), new Point(0, 0))
    e.Graphics.DrawImage(Image.FromFile("car.png"), car.Position)
}

public void Update()
{
    // Update the game here
    this.Invalidate(); // Invalidating the form will force it to redraw its graphics
} 
```

更多信息：[图形类](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)

# android - 打开失败：ENOENT（没有这样的文件或目录）错误

> ID：14956249
> 
> 赞同：7
> 
> 时间：2013-02-19T11:23:14.837
> 
> 标签：android, amazon-s3, camera

我在尝试使用 amazon S3 android 库上传用相机拍照时获得的图像时遇到问题。

**保存图片**

```
File _photoFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM),   (cal.getTimeInMillis() + ".jpg"));

            try {
                if (_photoFile.exists() == false) {
                    _photoFile.getParentFile().mkdirs();
                    _photoFile.createNewFile();
                }

            } catch (IOException e) {
                // Log.e(TAG, "Could not create file.", e);
            }
            // Log.i(TAG, path);

            filePath = Uri.fromFile(_photoFile);
            Intent cameraIntent = new Intent(
                    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, filePath);
            startActivityForResult(cameraIntent, 1); 
```

**使用 filePath 上传图片：**

```
try {
            s3Client.createBucket(Constants.getPictureBucket());

            // Content type is determined by file extension.
            PutObjectRequest por = new PutObjectRequest(
                    Constants.getPictureBucket(), Constants.PICTURE_NAME,
                    new java.io.File(filePath));
            s3Client.putObject(por);
        } catch (Exception exception) {

            result.setErrorMessage(exception.getMessage());
        } 
```

我不断收到错误`Unable to calclualte MD5 hash:/file:/storage/sdcard0/DCIM/13161272646580.jpg open failed:ENOENT (No such file or directory)`

但是当我浏览我的sd卡目录时，我可以在那里找到图片（图片已创建），并且我已经创建了相关权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-17T07:15:19.007

问题出在您的 **文件路径**中。使用类似的方法来获取真实路径。

我给你举个例子，如果你从 onActivityResult() 获取图像，你应该有一个 onActivityResult(int requestCode, int resultCode, Intent data) ，你可以在其中获取图像的 Uri。

> uri uri = data.getData();

然后使用它并从 Uri 获取真实路径并将其传递给 PutObjectRequest(BUCKET_NAME, IMAGE_NAME, REAL_PATH);

```
public String getRealPathFromURI(Context context, Uri contentUri) {
    Cursor cursor = null;
    try {
        String[] proj = { MediaStore.Images.Media.DATA };
        cursor = context.getContentResolver().query(contentUri,  proj, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    } finally {
        if (cursor != null) {
            cursor.close();
        }
    }
} 
```

我有同样的问题，我解决了这个问题。希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-01T16:36:48.547

我真的不记得我做了什么。但这是我使用的有效代码。希望对大家有帮助！

```
AmazonS3Client s3Client = new AmazonS3Client(new BasicAWSCredentials("XXX", "XXX"));
String time = "" + System.currentTimeMillis();
PutObjectRequest por = new PutObjectRequest("fraternity", xyz_url_xyz + "/avatar" + time + ".jpg", new java.io.File(params[0]));
por.setCannedAcl(CannedAccessControlList.PublicRead);
s3Client.putObject(por);
ResponseHeaderOverrides override = new ResponseHeaderOverrides();
override.setContentType("image/jpeg");
GeneratePresignedUrlRequest urlRequest = new GeneratePresignedUrlRequest("xyz_url_xyz/avatar.jpg");
urlRequest.setExpiration(new Date(System.currentTimeMillis() + 3600000));  
urlRequest.setResponseHeaders( override );
s3Client.generatePresignedUrl(urlRequest); 
```

# ruby-on-rails - 在 ActionMailer 模型操作中发送多个邮件方法是一种好习惯，还是应该将该逻辑保留在 Mailer 操作之外？

> ID：14956258
> 
> 赞同：2
> 
> 时间：2013-02-19T11:23:36.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coding-style, actionmailer

哪个是首选？

```
class Mailer < ActionMailer::Base

  # this?
  def bid_end_notify_failed_bidders(job)
    @job = job
    bidders = @job.bidders
    bidders.delete(@job.winner)
    bidders.each do |t|
      mail(:to => t.email, ....)
    end
  end

  # or this?
  def notify_failed_bid(bidder)
    mail(:to => bidder ...)
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:52:08.117

我建议方法 #2，这是因为您希望在发送电子邮件的方式上保持敏捷。

最常规的使用方式是：

*   声明一个实例
*   从实例中声明您需要的任何关系
*   将实例传递给 Mailer::Base 方法
*   递送

例子：

用户 = User.first

bets_won = user.bets_won

Mailer.send_congrats(users, bets_won).deliver！

现在它将只使用它所提供的数据，因此 Mailer 类不需要执行任何逻辑，而且这种方法将允许您轻松地重用该方法。

# jsf - Primefaces valueChangeListener 或 我正在使用 Primefaces 3.4.2。 我的 JSF 页面中有以下内容 <p:selectonemenu 24="" 189754="" id="emp" value="#{mymb.emp.employeeName}" 问问题="" 2013-02-19t11:23:38.623="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我正在使用="" primefaces="" 3.4.2。="" 我的="" jsf="" 页面中有以下内容="" <p:selectonemenu="" valuechangelistener="#{mymb.handleChange}" required="true" style="width: 150px;"><f:selectitem noselectionoption="true" itemlabel="Please Select"><f:selectitems value="#{mymb.employeeList}" var="emp" itemlabel="#{emp.employeeName}" itemvalue="#{emp.employeeNumber}"><p:ajax update="sublist"></p:ajax></f:selectitems></f:selectitem></p:selectonemenu>在 ManagedBean 中 public void handleChange(ValueChangeEvent event){ System.out.println("here "+event.getNewValue()); } 问题是valueChangeListener没有触发，即handleChange方法没有被调用。我尝试了以下方法，但它也不起作用。 <p:ajax update="sublist" listener="#{mymb.handleChange}">单独的 JSF 页面： <ui:composition template="/templates/layout.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"><ui:define name="content"><h:head></h:head><h:body><h:form id="form"><p:panelgrid columns="6"><h:outputlabel value="Employees" for="employees"><p:selectonemenu id="employees" value="#{mymb.employeesList}" required="true"><f:selectitems value="#{mymb.employeesList}" var="emp" itemlabel="#{emp.employeeName}"><p:ajax listener="#{mymb.handleChange}"></p:ajax></f:selectitems></p:selectonemenu></h:outputlabel></p:panelgrid></h:form></h:body></ui:define></ui:composition>如果您对旧值和新值valueChangeListener都感兴趣，则唯一需要的是。 如果您只对新值感兴趣，使用<p:ajax>or<f:ajax>是更好的选择。 有几个可能的原因，为什么 ajax 调用不起作用。首先，您应该更改处理程序方法的方法签名：删除参数。然后你可以直接访问你的托管 bean 变量： public void handleChange(){ System.out.println("here "+ getEmp().getEmployeeName()); } 此时，监听器被调用，新值已经设置。（请注意，我隐含地假设 el 表达式mymb.emp.employeeName由相应的 getter/setter 方法正确支持。） jsfjsf-2primefaces 4 8 回答 8 This answer is useful 55 如果要使用valueChangeListener，每次选择新选项时都需要提交表单。像这样的东西： public void handleChange(ValueChangeEvent event){ System.out.println("New value: " + event.getNewValue()); } 或者，如果你想使用<p:ajax>，它应该是这样的： <p:selectonemenu value="#{mymb.employee}"><p:ajax listener="#{mymb.handleChange}"></p:ajax></p:selectonemenu>private String employeeID; public void handleChange(){ System.out.println("New value: " + employee); } 需要注意的一件事是，在您的示例代码中，我看到value您的属性<p:selectonemenu>is与of#{mymb.employeesList}相同。你的应该类似于我上面的示例，指向单个员工，而不是员工列表。value<f:selectitems>value <p:selectonemenu>于 2013-02-19T20:22:46.453 回答 This answer is useful 16 如果您对旧值和新值valueChangeListener都感兴趣，则唯一需要的是。 如果您只对新值感兴趣，使用<p:ajax>or<f:ajax>是更好的选择。 有几个可能的原因，为什么 ajax 调用不起作用。首先，您应该更改处理程序方法的方法签名：删除参数。然后你可以直接访问你的托管 bean 变量： public void handleChange(){ System.out.println("here "+ getEmp().getEmployeeName()); } 此时，监听器被调用，新值已经设置。（请注意，我隐含地假设 el 表达式mymb.emp.employeeName由相应的 getter/setter 方法正确支持。） 于 2013-02-19T12:15:01.640 回答 This answer is useful 12 另一种解决方案是混合 valueChangeListener、ajax 和进程： <p:selectmanycheckbox id="employees" value="#{employees}" columns="1" layout="grid" valuechangelistener="#{mybean.fireSelection}"><f:selectitems var="employee" value="#{employeesSI}"><p:ajax event="valueChange" immediate="true" process="@this"></p:ajax></f:selectitems></p:selectmanycheckbox>mybean 中的方法只是： public void fireSelection(ValueChangeEvent event) { log.debug("New: "+event.getNewValue()+", Old: "+event.getOldValue()); } 像这样，valueChangeEvent 就很轻了！ PS：与 PrimeFaces 5.0 一起工作正常 于 2014-08-19T18:55:37.227 回答 This answer is useful 10 <p:ajax listener="#{my.handleChange}" update="id of component that need to be rerender after change" process="@this">import javax.faces.component.UIOutput; import javax.faces.event.AjaxBehaviorEvent; public void handleChange(AjaxBehaviorEvent vce){ String name= (String) ((UIOutput) vce.getSource()).getValue(); } 于 2013-05-14T14:21:37.443 回答 This answer is useful 5 所有都可以定义为f:ajax属性。 IE <p:selectonemenu id="employees" value="#{mymb.employeesList}" required="true"><f:selectitems value="#{mymb.employeesList}" var="emp" itemlabel="#{emp.employeeName}"><f:ajax event="valueChange" listener="#{mymb.handleChange}" execute="@this" render="@all"></f:ajax></f:selectitems></p:selectonemenu>event：它可以是普通的 DOM 事件click，例如valueChange execute：这是一个以空格分隔的组件的客户端 ID 列表，这些组件将参与请求处理生命周期的“执行”部分。 render：将参与请求处理生命周期的“渲染”部分的组件的 clientId。操作完成后，您可以定义应刷新哪些组件。可以添加 Id、IdList 或这些关键字：@this、@form、@all、@none。 您可以通过以下链接访问整个属性列表：http: //docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html 于 2016-01-19T09:37:48.507 回答 This answer is useful 2 尝试使用带有事件属性的 p:ajax， 于 2013-02-21T05:10:07.343 回答 This answer is useful 2 我的问题是我们使用的是spring securyty，并且上一页没有使用faces-redirect = true调用页面，然后页面显示java警告，并且控件不会触发更改事件。 解决方法：上一个页面必须调用页面使用， faces-redirect=true 于 2015-03-31T18:42:32.417 回答 This answer is useful 0 这对我有用： 它可以在对话框内使用，但对话框不能在面板、手风琴等任何组件内。 于 2013-08-22T20:11:17.743 回答 Related 3 java - Android：返回Activity时如何在EditText中保存值 0 database - 没有可用备份介质时如何恢复 MaxDB 实例？ 1 html - 如何将 XSLT 标记放在 HTML 属性中？ 1 asp.net - html5 的视频无法播放 1 asp.net - 删除/更新后刷新 DataGrid 2 objective-c - 如何在 uiTableviewCell 中获取下一个 indexPath 1 sql - 如何按范围创建包含日期的表格 1 c# - 用空行填充 DatagridView 2 sonarqube - 在声纳中重用 FindBugs 和 Checkstyle 报告 3 php - 我的表格应该如何在我的 PhpMyAdmin 中看起来像（代码），才能让这个“喜欢”按钮起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</p:ajax></f:ajax></p:ajax></p:selectonemenu></f:selectitems></p:selectonemenu></p:ajax></f:ajax></p:ajax></p:ajax>

> ID：14956261
> 
> 赞同：24
> 
> 时间：
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 Primefaces 3.4.2。

我的 JSF 页面中有以下内容

```
<p:selectOneMenu id="emp" value="#{mymb.emp.employeeName}" 
        valueChangeListener="#{mymb.handleChange}" 
        required="true"
        style="width: 150px;">
    <f:selectItem noSelectionOption="true" 
            itemLabel="Please  Select"/>
    <f:selectItems value="#{mymb.employeeList}" var="emp"
            itemLabel="#{emp.employeeName}"
            itemValue="#{emp.employeeNumber}"/>
    <p:ajax update="sublist"/>
</p:selectOneMenu> 
```

在 ManagedBean 中

```
public void handleChange(ValueChangeEvent event){  
    System.out.println("here "+event.getNewValue());
} 
```

问题是`valueChangeListener`没有触发，即`handleChange`方法没有被调用。我尝试了以下方法，但它也不起作用。

```
<p:ajax update="sublist"  listener="#{mymb.handleChange}" /> 
```

单独的 JSF 页面：

```
<ui:composition template="/templates/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
    <ui:define name="content">
        <h:head>
        </h:head>
        <h:body>
            <h:form id="form">                      
                <p:panelGrid columns="6">
                    <h:outputLabel value="Employees" for="employees" />
                    <p:selectOneMenu id="employees"
                            value="#{mymb.employeesList}" 
                            required="true">
                        <f:selectItems value="#{mymb.employeesList}" var="emp"
                                itemLabel="#{emp.employeeName}" />
                        <p:ajax listener="#{mymb.handleChange}"   />  
                    </p:selectOneMenu>                  
                </p:panelGrid>
            </h:form>
        </h:body>
    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-19T20:22:46.453

如果要使用`valueChangeListener`，每次选择新选项时都需要提交表单。像这样的东西：

```
<p:selectOneMenu value="#{mymb.employee}" onchange="submit()"
                 valueChangeListener="#{mymb.handleChange}" >
    <f:selectItems value="#{mymb.employeesList}" var="emp"
                   itemLabel="#{emp.employeeName}" itemValue="#{emp.employeeID}" />
</p:selectOneMenu>

public void handleChange(ValueChangeEvent event){  
    System.out.println("New value: " + event.getNewValue());
} 
```

或者，如果你想使用`<p:ajax>`，它应该是这样的：

```
<p:selectOneMenu value="#{mymb.employee}" >
    <p:ajax listener="#{mymb.handleChange}" />
    <f:selectItems value="#{mymb.employeesList}" var="emp"
                   itemLabel="#{emp.employeeName}" itemValue="#{emp.employeeID}" />
</p:selectOneMenu>

private String employeeID;

public void handleChange(){  
    System.out.println("New value: " + employee);
} 
```

需要注意的一件事是，在您的示例代码中，我看到`value`您的属性`<p:selectOneMenu>`is与of`#{mymb.employeesList}`相同。你的应该类似于我上面的示例，指向单个员工，而不是员工列表。`value``<f:selectItems>``value``<p:selectOneMenu>`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-19T12:15:01.640

*如果您对旧值和*新值`valueChangeListener`都感兴趣，则唯一需要的是。

 *如果您只对新值感兴趣，使用`<p:ajax>`or`<f:ajax>`是更好的选择。

有几个可能的原因，为什么 ajax 调用不起作用。首先，您应该更改处理程序方法的方法签名：删除参数。然后你可以直接访问你的托管 bean 变量：

```
public void handleChange(){  
  System.out.println("here "+ getEmp().getEmployeeName());
} 
```

此时，监听器被调用，新值已经设置。（请注意，我隐含地假设 el 表达式`mymb.emp.employeeName`由相应的 getter/setter 方法正确支持。）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-08-19T18:55:37.227

另一种解决方案是混合 valueChangeListener、ajax 和进程：

```
<p:selectManyCheckbox id="employees" value="#{employees}" columns="1" layout="grid" valueChangeListener="#{mybean.fireSelection}"   >
    <f:selectItems var="employee" value="#{employeesSI}" />
    <p:ajax event="valueChange" immediate="true" process="@this"/>
</p:selectManyCheckbox> 
```

mybean 中的方法只是：

```
public void fireSelection(ValueChangeEvent event) {
    log.debug("New: "+event.getNewValue()+", Old: "+event.getOldValue());
} 
```

像这样，valueChangeEvent 就很轻了！

PS：与 PrimeFaces 5.0 一起工作正常

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-14T14:21:37.443

```
<p:ajax listener="#{my.handleChange}" update="id of component that need to be rerender after change" process="@this" />

import javax.faces.component.UIOutput;
import javax.faces.event.AjaxBehaviorEvent;

public void handleChange(AjaxBehaviorEvent vce){  
  String name= (String) ((UIOutput) vce.getSource()).getValue();
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-01-19T09:37:48.507

所有都可以定义为`f:ajax`属性。

IE

```
 <p:selectOneMenu id="employees" value="#{mymb.employeesList}" required="true">
         <f:selectItems value="#{mymb.employeesList}" var="emp" itemLabel="#{emp.employeeName}" />
         <f:ajax event="valueChange" listener="#{mymb.handleChange}" execute="@this" render="@all" />
    </p:selectOneMenu> 
```

**event**：它可以是普通的 DOM 事件`click`，例如`valueChange`

**execute**：*这是一个以空格分隔的组件的客户端 ID 列表，这些组件将参与请求处理生命周期的“执行”部分。*

**render**：*将参与请求处理生命周期的“渲染”部分的组件的 clientId。*操作完成后，您可以定义应刷新哪些组件。可以添加 Id、IdList 或这些关键字：`@this`、`@form`、`@all`、`@none`。

您可以通过以下链接访问整个属性列表：http: [//docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-21T05:10:07.343

尝试使用带有事件属性的 p:ajax，

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-31T18:42:32.417

我的问题是我们使用的是spring securyty，并且上一页没有使用faces-redirect = true调用页面，然后页面显示java警告，并且控件不会触发更改事件。

解决方法：上一个页面必须调用页面使用， faces-redirect=true

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-22T20:11:17.743

这对我有用：

它可以在对话框内使用，但对话框不能在面板、手风琴等任何组件内。*

# c# - 有效操作时出现 NullReferenceException

> ID：14956263
> 
> 赞同：9
> 
> 时间：2013-02-19T11:23:46.430
> 
> 标签：c#, linq, entity-framework

我需要`Guid`从一个查询中获取我的 ID（类型）：

```
var firstQuery = 
    from rooms in myEntityContext.Room.Where(t => t.fldClosed == 0)
    join conts in myEntityContext.Cont on rooms.ID equals conts.ItemID
    select new
    {
        ContPrice = conts.Price,
        RoomPrice = rooms.Price
        IDs = rooms.ID
    };

foreach (var t in firstQuery)
{
    t.RoomPrice  = t.ContPrice;
} 
```

然后我对其进行一些操作（更新价格），最后我使用 ID 进行第二次查询。第二个查询不包含这些 ID。我以这种方式实现了这个问题：

```
var myIDs = firstQuery.Select(cr => cr.IDs).ToList(); 
```

我的第二个查询是：

```
var secondQuery = 
    from rooms in myEntityContext.Room.Where(t => t.fldClosed == 0) 
    where !myIDs.Contains(rooms.fldID)                                   
    join conts in myEntityContext.Cont on rooms.ID equals conts.ItemID
    select new
    {
       RoomPrice = conts.fldPrice,
       IDs = rooms.ID
    }; 
```

当我在调试器模式下运行此代码并到达此行时：

```
var myIDs = firstQuery.Select(cr => cr.IDs).ToList(); 
```

...引发异常：

> **NullReferenceException**
> 对象引用未设置为对象的实例。

似乎它与第二个查询有关，因为当我将第二个查询转移到一个单独的方法并将 ID 传递给它时，一切正常，但我不明白为什么它应该考虑一些写在变量之后的查询初始化。

整个代码是：

```
var calcDate = DateTime.Now.AddDays(-1);

var firstQuery = 
    from rooms in myEntityContext.Room.Where(t => t.fldClosed == 0)
    join conts in myEntityContext.Cont on rooms.ID equals conts.ItemID
    where conts.date == calcDate
    select new
    {
        ContPrice = conts.Price,
        RoomPrice = rooms.Price
        IDs = rooms.ID
    };

foreach (var t in firstQuery)
{
    t.RoomPrice = t.ContPrice;
}

var myIDs = firstQuery.Select(cr => cr.IDs).ToList();

var secondQuery = 
    from rooms in myEntityContext.Room.Where(t => t.fldClosed == 0) 
    where !myIDs.Contains(rooms.fldID)                                   
    join conts in myEntityContext.Cont on rooms.ID equals conts.ItemID
    where conts.date == calcDate && conts.Code = "01"
    select new
    {
       RoomPrice = conts.fldPrice,
       IDs = rooms.ID
    };

foreach (var t in secondQuery)
{
    ContPrice = Conts.Price,
    RoomPrice = Rooms.Price
}

myEntityContext.SaveChanges(); 
```

这是我的堆栈跟踪，如果有用的话：

```
Financial.UI.dll!Financial.UI.Services.Hotels.HotelServiceProxy.CalcProxy.DoCalc(System.DateTime calcDate) 第 5055 行 C#
Financial.UI.dll!Financial.UI.Pages.Hotel.NightsCalculationPage.CallbackMethod_DoCalc() 第 65 行 + 0x37 字节 C#
[本机到托管转换]  
Web.UI.dll!Web.UI.SystemCallback.ProcessCallback() 第 228 行 + 0x3b 字节 C#
Web.UI.dll!Web.UI.SystemCallbackHandler.ProcessRequest(System.Web.HttpContext context) 第 68 行 + 0x12 字节 C#
System.Web.dll!System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() + 0x156 字节    
System.Web.dll!System.Web.HttpApplication.ExecuteStep(System.Web.HttpApplication.IExecutionStep step, ref bool completedSynchronously) + 0x46 字节
System.Web.dll!System.Web.HttpApplication.PipelineStepManager.ResumeSteps(System.Exception 错误) + 0x342 字节
System.Web.dll!System.Web.HttpApplication.BeginProcessRequestNotification(System.Web.HttpContext context, System.AsyncCallback cb) + 0x60 字节
System.Web.dll!System.Web.HttpRuntime.ProcessRequestNotificationPrivate(System.Web.Hosting.IIS7WorkerRequest WR, System.Web.HttpContext context) + 0xbb 字节   
System.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(System.IntPtr rootedObjectsPointer, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x1f3 字节   
System.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(System.IntPtr rootedObjectsPointer, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x1f 字节  
[本机到托管转换]  
[管理到本地转换]  
System.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(System.IntPtr rootedObjectsPointer, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x350 字节   
System.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(System.IntPtr rootedObjectsPointer, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x1f 字节  
[Appdomain 过渡]  

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:58:41.647

好吧，堆栈跟踪*很有*用：我假设您发布的代码在`DoCalc()`方法中。但是，您发布的行不可能是代码中的第 5055 行：

```
var myIDs = firstQuery.Select(cr => cr.IDs).ToList(); 
```

要`NullReferenceException`在此行上出现 a ，要么`firstQuery`必须为 null ，要么`firstQuery.Select(cr => cr.IDs)`必须返回 null ...

但是，*如果*是这种情况，您将`ArgumentNullException`在两种情况下都得到a ，**而不是**`NullReferenceException`. 所以这不是错误所在。

* * *

此外，您的代码甚至不应该运行！

例如，在以下部分中，您应该会收到编译时错误：

```
foreach (var t in firstQuery)
{
    t.RoomPrice = t.ContPrice;
} 
```

> 无法将属性或索引器“AnonymousType#1.RoomPrice”分配给 - 它是只读的

而你在这里想要做什么......我不知道：

```
foreach (var t in secondQuery)
{
    ContPrice = Conts.Price,
    RoomPrice = Rooms.Price
} 
```

* * *

### 最有可能发生的事情

你有一个`null`in`myEntityContext.Room`或 in `myEntityContext.Cont`。查看他们的内容并验证这一点。如果您仍然不确定，当您收到异常时，请单击 Visual Studio（在异常窗口上）中的“将异常详细信息复制到剪贴板”并将其粘贴到您的问题中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T08:29:07.943

此代码无法编译。因此，假设在某一时刻它确实编译了，并且您的所有 Rooms 和 Cont 都是实际实例，其中没有空对象，则可能是使用匿名返回；

尝试这个

```
public class QueryResult
{
    public decimal ContPrice; //whatever your types are

    public decimal RoomPrice;

    public int IDs;
} 
```

然后像这样使用它：

```
var firstQuery =
    from rooms in myEntityContext.Room.Where(t => t.fldClosed == 0)
    join conts in myEntityContext.Cont on rooms.ID equals conts.ItemID
    where conts.date == calcDate
    select new QueryResult
                {
                    ContPrice = conts.Price,
                    RoomPrice = rooms.Price,
                    IDs = rooms.ID
                };

var firstQueryResult = firstQuery.ToList();

foreach (var t in firstQueryResult)
{
    t.RoomPrice = t.ContPrice;
} 
```

正如其他人所说，避免多次列举。

还要删除第二个查询并最初获得第一个工作......第二个有一些问题。首先，结果您再次拥有匿名类型。这是一种滥用，因为它们应该被用于 inter-linq；你应该解决一个强类型。第二，

... && conts.Code = "01"

不编译，应该是：

```
conts.Code.Equals("01") 
```

我还建议将您的查询分解成更小的部分；也许是这样的

```
var roomsOpenQuery = myEntityContext.Room.Where(t => t.fldClosed == 0);
var roomsOpenQueryResolved = roomsOpenQuery.ToList();
var contQuery = myEntityContext.Cont
    .Where(t => roomsOpenQueryResolved.Any(r => r.ID == t.ItemID))
    .Where(x => x.date == calcDate);

var availableRooms =
    contQuery
        .Join(roomsOpenQueryResolved,
                c => c.ItemID,
                r => r.ID,
                (c, r) => new AvailableRoom()
                            {
                                ContPrice = c.Price,
                                RoomPrice = r.Price,
                                IDs = c.ItemID
                            })
        .ToList();

//Price Adjustment etc... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T11:35:03.113

我假设`var FirstQuery`解析为 IEnumerable<out T>。

**您不能`Enumerable`多次访问 a 的内容。**

尝试在第一个查询中创建一个列表：

```
var FirstQuery = (from rooms in myEntityContext.Room.Where(t => t.fldClosed == 0)                                    
    join Conts in myEntityContextt.Cont on rooms.ID equals Conts.ItemID
    select new
    {
        RoomPrice = Conts.fldPrice,
        IDs = rooms.ID
    }).ToList(); 
```

如果此行失败，则 myEntityContext.Mark 或 myEntityContext.Cont 可能是空对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T15:25:18.140

IDs IDs = rooms.ID 可能为空。

尝试添加： var myIDs = FirstQuery.ToList().Select(Cr => Cr.IDs).ToList();

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T16:16:57.877

```
var myIDs = new List<int>();
if( firstQuery.Count() > 0)
myIds =  firstQuery.Select(cr => cr.IDs).ToList(); 
```

# bash - 如何使用bash对文件中的每一列求和

> ID：14956264
> 
> 赞同：2
> 
> 时间：2013-02-19T11:23:47.170
> 
> 标签：bash, shell, awk

我有以下格式的文件

```
id_1,1,0,2,3,lable1
id_2,3,2,2,1,lable1
id_3,5,1,7,6,lable1 
```

我想要每一列的总和（我有超过 300 列）

```
9,3,11,10,lable1 
```

我怎样才能使用 bash 做到这一点。[我尝试使用此处](https://stackoverflow.com/questions/3096259/bash-command-to-sum-a-column-of-numbers)描述的内容，但没有奏效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T11:34:31.660

使用`awk`：

```
$ awk -F, '{for (i=2;i<NF;i++)a[i]+=$i}END{for (i=2;i<NF;i++) printf a[i]",";print $NF}' file
9,3,11,10,lable1 
```

这将在逗号分隔的文件中打印每列的总和*（从 i=2 .. i=n-1）*，然后是最后一行的最后一列的值*（即 lable1）*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:48:09.410

这是一个 Perl 单行代码：

```
<file perl -lanF, -E 'for ( 0 .. $#F ) { $sums{ $_ } += $F[ $_ ]; } END { say join ",", map { $sums{ $_ } } sort keys %sums; }' 
```

它只会求和，因此示例中的第一列和最后一列将为 0。

此版本将遵循您的示例输出：

```
<file perl -lanF, -E 'for ( 1 .. $#F - 1 ) { $sums{ $_ } += $F[ $_ ]; } END { $sums{ $#F } = $F[ -1 ]; say join ",", map { $sums{ $_ } } sort keys %sums; }' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:51:12.087

基于您链接的解决方案的修改版本：

```
#!/bin/bash

colnum=6
filename="temp"

for ((i=2;i<$colnum;++i))
do
  sum=$(cut -d ',' -f $i $filename | paste -sd+ | bc)
  echo -n $sum','
done
head -1 $filename | cut -d ',' -f $colnum 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T15:16:00.863

如果需要按最后一列中的标签对总计进行分组，您可以尝试以下操作：

```
awk -F, '
  {
    L[$NF]
    for(i=2; i<NF; i++) T[$NF,i]+=$i
  }
  END{
    for(i in L){
      s=i
      for(j=NF-1; j>1; j--) s=T[i,j] FS s
      print s
    }
  }
' file 
```

如果最后一列中的标签已排序，那么您可以尝试不使用数组并节省内存：

```
awk -F, '
  function labelsum(){
    s=p
    for(i=NF-1; i>1; i--) s=T[i] FS s
    print s
    split(x,T)
  }
  p!=$NF{
    if(p) labelsum()
    p=$NF
  }
  {
    for(i=2; i<NF; i++) T[i]+=$i
  }
  END {
    labelsum()
  }
' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T16:04:26.573

纯 bash 解决方案：

```
#!/usr/bin/bash

while IFS=, read -a arr
do
        for((i=1;i<${#arr[*]}-1;i++))
        do
                ((farr[$i]=${farr[$i]}+${arr[$i]}))
        done
        farr[$i]=${arr[$i]}
done < file
(IFS=,;echo "${farr[*]}") 
```

# java - java split() 方法

> ID：14956265
> 
> 赞同：0
> 
> 时间：2013-02-19T11:23:48.537
> 
> 标签：java, split

我有一个字符串'123'（是的，它是我程序中的一个字符串）。谁能解释一下，当我使用这种方法时：

```
String[] str1Array =  str2.split(" "); 
```

为什么我得到`str1Array[0]='123'`而不是`str1Array[0]=1`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:25:50.887

```
str2.split("") ; 
```

试试这个：拆分字符串中的每个字符。输出：

```
[, 1, 2, 3] 
```

但它会返回一个空的第一个值。

```
str2.split("(?!^)"); 
```

输出 ：

```
[1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T11:26:30.513

`str2`不包含任何空格，因此`split`将 的全部内容复制`str2`到 的第一个索引`str1Array`。

你必须这样做：

```
 String str2 = "1 2 3";
 String[] str1Array =  str2.split(" "); 
```

或者，要查找 str2 中的每个字符，您可以执行以下操作：

```
for (char ch : str2.toCharArray()){
    System.out.println(ch);
} 
```

您也可以将其分配给循环中的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T11:27:21.150

传递给 split() 的正则表达式应该在字符串中有一个匹配项，以便它将在字符串中找到匹配项的地方拆分字符串。在这里，您正在传递在 '123' 中找不到的“”，因此不会发生拆分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T11:25:43.177

因为你的`String`. 如果您想要单个字符，请尝试`char[] characters = str2.toCharArray()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T11:25:44.740

很简单...您正在尝试按空格分割字符串，并且在字符串“123”中没有空格

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-19T11:27:45.463

这是因为该`split()`方法根据作为参数给出的字符从字面上拆分字符串。

每次找到拆分字符时，我们都会删除拆分字符并形成一个新的字符串。

```
String[] strs =  "123".split(" "); 
```

字符串`"123"`没有字符`" "`（空格），因此无法拆分。所以返回的只是数组中的一个项目 - `{ "123" }`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-19T11:40:58.833

要进行“拆分”，您必须使用分隔符，在这种情况下，在每个数字之间插入一个“，”

```
 public static void main(String[] args) {
    String[] list = "123456".replaceAll("(\\d)", ",$1").substring(1)
            .split(",");
    for (String string : list) {
        System.out.println(string);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-24T09:27:38.957

试试这个：

字符串 str = "123"; 字符串 res = str.split("");

将返回以下结果：

1,2,3

# objective-c - Objective-C 错误“‘XYZPerson’没有可见的@interface 声明选择器‘saySomething’

> ID：14956270
> 
> 赞同：1
> 
> 时间：2013-02-19T11:24:06.833
> 
> 标签：objective-c, selector, superclass

我对 Objective-C 真的很陌生，当我练习书本练习时，我真的被困在这里。请帮我解决这个问题，我一直在思考可能导致此错误的原因超过三个小时。还是我没看懂！

最好的问候，拉吉。

提前致谢 ！

**主文件**

```
#import <Foundation/Foundation.h>
#import "XYZPerson.h"
#import "XYZShout.h"
int main(int argc, const char * argv[])
{

    @autoreleasepool {

        //XYZPerson *some = [[XYZPerson alloc]init];

        XYZShout *some = [[XYZShout alloc]init];
        [some sayHello];

        // insert code here...
       // NSLog(@"Hello, World!");

    }
    return 0;
} 
```

**XYZPerson.h**

```
#import <Foundation/Foundation.h>
@interface XYZPerson : NSObject

@property NSString *firstName;
@property NSString *secondName;
@property NSDate *dob;

-(void) saySomething;
-(void) sayHello;

@end 
```

**XYZPerson.m**

```
#import "XYZPerson.h"
@implementation XYZPerson

-(void) sayHello {
    [self saySomething:@"Hello all"];
}

-(void) saySomething:(NSString *)greet {
    NSLog(@"%@", greet);
}

@end 
```

**XYZShout.h**

```
#import "XYZPerson.h"

@interface XYZShout : XYZPerson

// -(void) saySomething;

@end 
```

**XYZShout.m**

```
#import "XYZShout.h"

@implementation XYZShout

-(void) saySomething:(NSString *)greet {
    NSString *upperGreet = [greet uppercaseString];
    [super saySomething:upperGreet];    // this is where I get the error mentioned above
}

@end 
```

**得到它的工作！感谢@MatthewD、@trojanfoe、@JFS 的大力帮助 :)**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T11:37:35.527

看起来您正在测试继承，所以我假设它`XYZShout`应该是从`XYZPerson`. 如果是这样，请遵循@JFS 的建议并确保它确实派生：

XYZShout.h：

```
#import <Foundation/Foundation.h>
#import "XYZPerson.h"

@interface XYZShout : XYZPerson

- (void)saySomething:(NSString *)greet;

@end 
```

并更正`saySomething`in的定义`XYZPerson`（您错过了参数）：

XYZPerson.h：

```
#import <Foundation/Foundation.h>
@interface XYZPerson : NSObject

@property NSString *firstName;
@property NSString *secondName;
@property NSDate *dob;

- (void)saySomething:(NSString *)greet;
//                   ^^^^^^^^^^^^^^^^^
- (void)sayHello;

@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T21:46:06.570

*（从评论移到答案...）*

*MatthewD：如果你换成 会 发生`- (void) saySomething;`什么？`XYZPerson.h``- (void) saySomething:greet;`*

*Raj0689：为什么当我将其更改为`saySomething:greet`and not时它会运行`saySomething`？由于 greet 仅与`saySomething`!!*

当您调用一个方法时，编译器需要找到该方法的签名，以便它可以验证该方法是否被正确调用。签名包括方法名称以及参数的数量和类型。提供方法签名的常用方法是导入定义这些签名的头文件。

所以，在`XYZShout.m`你打电话的地方：

`[super saySomething:upperGreet];`

编译器搜索`XYZShout.h`由 导入的`XYZShout.m`和`XYZPerson.h`由 导入的`XYZShout.h`。在`XYZShout.h`中，找到了以下方法：

`-(void) saySomething;`

这在名称中匹配被调用的方法，但在参数中不匹配，因此编译器不认为这是匹配。在任何地方都找不到的其他定义`saySomething`，因此它会给出错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T11:31:03.663

请确保将`XYZShout.h`接口设置为`@interface XYZShout : XYZPerson`？

# javascript - javascript日期因时区而异

> ID：14956272
> 
> 赞同：1
> 
> 时间：2013-02-19T11:24:12.197
> 
> 标签：javascript

```
var dt_now = '2-22-2013';//mm-dd-yyyy, this is dynamic in actual code
            dt_now = dt_now.split("-");
            dt_now = addZero(dt_now[2])+'-'+addZero(dt_now[0])+'-'+addZero(dt_now[1]);
            dt_now = new Date(dt_now); 
```

我正在使用上面的代码将用户定义的文本转换为实际日期，以便在我的其余代码中使用。它对我来说似乎工作正常，但在位于不同时区（我的时间 -12 小时）的另一个系统上，日期显示为`February 21st`而不是`Feb 22nd`，也就是说，它**比预期日期晚一天**运行。我不知道如何解决这个问题或错误可能是什么。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:33:33.090

在输出日期的方法中，您需要使用`getUTC*`而不是`get*`，即`getUTCDate()`。要使用 UTC 信息生成日期对象，请参阅[如何将 JavaScript 日期转换为 UTC 中的第二个答案？](https://stackoverflow.com/questions/948532/how-do-you-convert-a-javascript-date-to-utc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:39:42.450

为避免时区问题，请使用 UTC。您不必依赖图书馆；简单的 ISO 8601 日期字符串就足够了。请参阅从*日期*[`Date.prototype.toISOString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString)制作一个（[兼容性](http://kangax.github.com/es5-compat-table/)）。

 *构造非常简单`new Date('yyyy-mm-ddT00:00Z')`，因此您只需对代码稍作更改即可创建*Date*

```
var dt_now = '2-22-2013';//mm-dd-yyyy, this is dynamic in actual code
dt_now = dt_now.split("-");
dt_now = addZero(dt_now[2])+'-'+addZero(dt_now[0])+'-'+addZero(dt_now[1])+'T00:00Z';
dt_now = new Date(dt_now); 
```

`Z`表示*UTC*。_ 我包含了一个 time( `T00:00`)，因此它与`toISOString`.*

# php - 防止在 PHP 验证往返后删除 HTML 文件字段

> ID：14956276
> 
> 赞同：0
> 
> 时间：2013-02-19T11:24:24.683
> 
> 标签：php, html, file-upload

我有一个 HTML 文件字段`<input name="File" id="FileName" type="file"/>`。当我提交表格时，我确实收到了文件，一切都很好。但是，当我验证用户的输入并且不能接受提供的值时，我将需要另一个往返。像往常一样，我将重新显示表单和错误消息。

For `text field`or `textarea`I 可以设置（已经）提供的值，例如通过`value`或仅`echo`在 textarea 中的值。**我怎么能对`file`字段做同样的事情？**我想避免用户总是必须在浏览器中重新选择文件。

- 添加 -

下面的评论是正确的 - 在提到的 SO 问题中描述了一些解决方法：

1.  [PHP记住文件字段内容](https://stackoverflow.com/questions/1326683/php-remember-file-field-contents)
2.  [在使用 PHP 或 JavaScript 提交表单失败后，您可以重新填充文件输入吗？](https://stackoverflow.com/questions/6842571/can-you-re-populate-file-inputs-after-failed-form-submission-with-php-or-javascr)
3.  [验证失败后恢复输入类型=文件的值](https://stackoverflow.com/questions/4205634/restoring-the-value-of-a-input-type-file-after-failed-validation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:27:04.130

这是不可能的 - 您必须将文件存储在服务器上才能执行此操作。然后，您可以向用户显示有关已存储文件的简短信息以及上传新文件或删除文件的选项

# ios - 使用 SDWebImage 时图像不会被缓存

> ID：14956281
> 
> 赞同：0
> 
> 时间：2013-02-19T11:24:33.253
> 
> 标签：ios, uitableview, caching, sdwebimage, unrecognized-selector

我无法让 SDWebImage 正常工作。

我的 UITableView 带有始终显示的图像，但缓存始终为空。

换句话说，图像没有连接到 SDWebImage 缓存。

此外，我在调用时收到错误**无法识别的选择器发送到实例：**

**setImageWithURL:placeholderImage:options:**

但是当我使用时错误消失了

**setImageWithURL:placeholderImage:**

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:42:48.137

这就是我的做法，它会正确缓存图像

```
[cell.img setImageWithURL:imgURL placeholderImage:[UIImage imageNamed:@"somePlaceholder.png"]]; 
```

介意告诉你为什么要使用`setImageWithURL:placeholderImage:options:`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T04:46:11.923

今天发生在我身上，我实际上是在选择 AFNetworking`setImageWithURL:placeholderImage:`而不是 SDWebImage。我敢打赌，这种情况发生得比人们意识到的要多。

确保`#import <SDWebImage/UIImageView+WebCache.h>`您使用他们的静态库/框架，或者只是`#import UIImageView+WebCache`导入了 SDWebImage 的 .h 和 .m 文件。您可能必须完全删除 AFNetworking 的`UIImageView+AFNetworking`文件，具体取决于您拥有的版本。

如果您已经这样做了，请仔细检查您`Other linker flags`在 Build Settings 中的`-ObjC`规范。如果这给你带来地狱，请看[这个](https://stackoverflow.com/questions/8504953/sdwebimage-setimagewithurl-fails-when-used-to-set-image-of-a-uitableviewcell)。

# ruby-on-rails - Rails 中的关联问题

> ID：14956283
> 
> 赞同：0
> 
> 时间：2013-02-19T11:24:39.643
> 
> 标签：ruby-on-rails, associations, models

我对 Rails 关联有疑问（开发 API）。

my_app db 中有三个表：

```
"tariffs":
 string   "title",
 integer  "tariff_template_id"
...

"tariff_templates":
string   "title",
integer  "service_type_id"
...

"field_templates":
string   "title",
integer  "tariff_template_id"
... 
```

问题是：我需要在“关税”表中让每个 field_template 的关税模板 ID 等于关税模板 ID。

使用 SQL 很容易，但我猜 Rails 逻辑有点不同。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:34:11.757

假设您的模型中的关联设置正确，听起来您只需要以下内容：

`Tariff.includes(:tariff_template).all`

它不会完全满足您的要求（Rails 在对象中工作），但它会在最少的查询中返回 Tariff 对象及其关联的 TariffTemplates。

# django - 如何从 db datetimefield 中获取单独的日期和时间字段

> ID：14956286
> 
> 赞同：0
> 
> 时间：2013-02-19T11:24:47.210
> 
> 标签：django

```
views.py

            event_full_datetime =datetime(Editrow.datetime_reading.year,Editrow.datetime_reading.month,Editrow.datetime_reading.day, Editrow.datetime_reading.hour, 
            Editrow.datetime_reading.minute,  Editrow.datetime_reading.second)
            date=event_full_datetime.year ,event_full_datetime.month,event_full_datetime.day
            time=event_full_datetime.hour,event_full_datetime.minute

            print time
            print date

            form = KEBReading_form()
            form.Date=date
            form.Time=time
            form = KEBReading_form(instance=Editrow) 
```

在数据库中我有一个日期时间字段，但在我的表单中我有单独的日期和时间字段。当我单击编辑时，我想用值填充日期和时间字段。并且该实例应该具有所有值

我给了它

```
 form = KEBReading_form(instance=Editrow)
            print "htjrit"

            print instance.datetime_reading.date()

            form = KEBReading_form(initial={'Date': instance.datetime_reading.date(),
                     'Time': instance.datetime_reading.time()
                    }
            )
 return render_to_response('keb.html',{'KEBReading_form':form,'MonthForm':monthform,'q2':q2,},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:37:51.223

您可以通过`initial`参数为表单传递单独的日期和时间值。

因此，如果您的模型具有*somedatetime*字段并且表单具有`somedate`和`sometime`字段，您可以将表单实例化为

```
myform = MyForm(initial={'somedate': instance.somedatetime.day(),
                         'sometime': instance.somedatetime.time()
                        }
                ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:30:51.810

您应该[指定表单字段](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#specifying-widgets)应该使用[SplitDateTimeWidget](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#splitdatetimewidget)。

# google-app-engine - Google App Engine：使用 Javascript 客户端库进行 OAuth2 授权

> ID：14956294
> 
> 赞同：0
> 
> 时间：2013-02-19T11:25:12.790
> 
> 标签：google-app-engine, file-upload, youtube-api, oauth-2.0

我正在尝试用 Python 开发我的第一个 Google App Engine 应用程序，作为其中的一部分，我希望用户能够将视频上传到 Youtube 并与该应用程序的其他用户分享。根据推荐的协议，上传到他们自己的 Youtube 帐户，应用程序需要捕获的唯一信息是视频 ID。

我真的希望该设施从应用程序内上传，而不是将用户重定向到主要的 Youtube 网站进行上传，这样用户在任何时候都不需要离开应用程序，以保持无缝连接。我原以为这会相对简单，因为这似乎是许多网站和应用程序都希望提供的功能，但似乎并非如此。

我真的很难理解我需要在这里通过什么 OAuth2 流程，以前从未与他们搏斗过。Youtube API 文档中唯一的上传示例代码是从您自己的机器上传（通过命令行），因此这里不相关。我已经向后阅读了文档，听起来基于浏览器的上传工具并没有针对 Youtube Data Api v3 进行更新，所以我需要做的第一件事就是在使用之前从用户那里获取访​​问令牌v2 基于浏览器的上传协议。鉴于用户将通过浏览器上传本地存储的文件（即在他们的机器上），我假设客户端 JavaScript OAuth2 流是我需要的，而不是 Python 服务器端流。还是我两者都需要？

问题是我什至无法让人们离开我使用 JavaScript 客户端库从应用程序提供的 html 页面，以便让他们进入授权页面。为了检查我是否了解通过 JavaScript 客户端库获取访问令牌的步骤，我首先尝试将 Google 示例代码从此处剪切并粘贴到 html 页面中：

[Google Api Javascript 客户端库示例](https://code.google.com/p/google-api-javascript-client/source/browse/samples/authSample.html)

并将 Api 密钥和客户端 ID 更改为我自己的，更新了控制台上 API 访问窗格上的 JavaScript 来源并授权了 Google+，但单击该按钮什么也没做。

所以大概我在这里误解了一些非常基本的东西！

有任何想法吗？JS 流是否被 Python 应用程序内的流控制覆盖？问题是我实际上应该使用服务器端流程，在这种情况下，我如何让用户从他们自己的浏览器上传，然后在上传后捕获视频 ID？

我不敢相信我是第一个尝试这个的人，如果有人已经管理过这个或有任何想法，我会非常感谢任何指点。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:40:33.243

这是一种选择，如果您可以在 JavaScript 中完全在客户端处理事情，并且您也可以限制自己使用支持 CORS 的浏览器：http: [//apiblog.youtube.com/2012/05/unlocking-javascripts -potential-with.html](http://apiblog.youtube.com/2012/05/unlocking-javascripts-potential-with.html)如果您对这些限制没有问题，并且您正在做的唯一 YouTube API 集成是用于上传，那么这就是我可能会采用的方法。

另一种选择，可能更适合 Python App Engine 应用程序，是使用[服务器端 Web 应用程序流](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Server_Side_Web_Applications_Flow)。这里的问题是，您需要结合使用[Google APIs for Python 客户端库](https://code.google.com/p/google-api-python-client/)为您处理 OAuth 2，并使用较旧的[GData API Python 客户端库](https://code.google.com/p/gdata-python-client/)来处理基于浏览器的上传流程。绝对有可能将两者混合使用，我们有一篇博客文章讨论了一个开源 Python App Engine 应用程序，它可以做到这一点：[http://apiblog.youtube.com/2012/08/party-playlist-picker-experimental。 html](http://apiblog.youtube.com/2012/08/party-playlist-picker-experimental.html)

正如您所指出的，目前 v3 中没有基于浏览器的上传流程。

# javascript - 如何在javascript或jquery中添加两个或两个以上的输入框值

> ID：14956298
> 
> 赞同：0
> 
> 时间：2013-02-19T11:25:25.170
> 
> 标签：javascript, validation, numbers, parseint

我有 110 个文本框，我想对这 110 个文本框中可用的值求和，可能很少有值，所以我编写了如下代码，但它并没有给我正确的值，事实上它甚至不需要文本框中可用的值。

以下是我的代码：

```
var cerTotal =0;

for (var i=1;i<=110;i++)
    {
        if(global.getElementById('CIMtrek_CI_Act_'+i)){
            cerTotal = Number(cerTotal) + Number(global.getElementById('CIMtrek_CI_Act_'+i).value);
        }
    } 
```

请帮我找出问题所在。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:32:02.410

试试这个

```
<input type="text" id="CIMtrek_CI_Act_1" />
<input type="text" id="CIMtrek_CI_Act_2" />
<input type="text" id="CIMtrek_CI_Act_3" />
<input type="button" id="btn" onclick="sumUp()" value="SUM" />

<script>
function sumUp() {
   var cerTotal = 0;
   for (var i = 1; i <= 110; i++) {
     if (document.getElementById('CIMtrek_CI_Act_' + i) &&
         document.getElementById('CIMtrek_CI_Act_' + i).value != '') {
           cerTotal += parseFloat(document.getElementById('CIMtrek_CI_Act_' + i).value);
        }
   }
   alert(cerTotal);
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:32:40.367

假设`global`已定义，您有错误的运算符。您正在为每次迭代分配总数，您应该这样做

```
 cerTotal += ... 
```

# php - 如何在codeigniter中编写一个新文件？

> ID：14956300
> 
> 赞同：3
> 
> 时间：2013-02-19T11:25:26.237
> 
> 标签：php, codeigniter, file-io, loadview

首先我想将一个视图文件加载到一个变量中，然后我需要通过将数据写入新文件来创建一个新文件。即，就像创建一个视图文件的副本一样。

```
$vPath = "home/muhammed/desktop/newfolder";
$ViewData=$this->load->view('test/show',TRUE);
mkdir($vPath);
write_file("$vPath/test.php", $ViewData); 
```

但是给出的代码不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:39:14.947

改变：

```
$ViewData=$this->load->view('test/show',TRUE); 
```

到

```
$ViewData=$this->load->view('test/show', "", TRUE); 
```

作为数据的第二个参数`load->view`和最后一个参数 TRUE 使其字符串加载到变量请参阅：[codeIgniter Views](http://ellislab.com/codeigniter/user-guide/general/views.html)

# python - 为什么字典排序是不确定的？

> ID：14956313
> 
> 赞同：46
> 
> 时间：2013-02-19T11:25:57.520
> 
> 标签：python, dictionary, python-3.x, python-3.3, non-deterministic

我最近从 Python 2.7 切换到 Python 3.3，似乎虽然在 Python 2 中字典键的顺序是任意但一致的，但在 Python 3 中，使用 eg 获得的字典键的顺序[`vars()`](https://docs.python.org/3/library/functions.html#vars)似乎是不确定的。

如果我运行：

```
class Test(object): pass
parameters = vars(Test)
print(list(parameters.keys())) 
```

在 Python 2.7 和 Python 3.3 中，然后：

*   Python 2.7 始终如一地给我

    ```
    ['__dict__', '__module__', '__weakref__', '__doc__'] 
    ```

*   使用 Python 3.3，我可以获得任何随机顺序——例如：

    ```
    ['__weakref__', '__module__', '__qualname__', '__doc__', '__dict__']
    ['__doc__', '__dict__', '__qualname__', '__module__', '__weakref__']
    ['__dict__', '__module__', '__qualname__', '__weakref__', '__doc__']
    ['__weakref__', '__doc__', '__qualname__', '__dict__', '__module__'] 
    ```

这种不确定性从何而来？为什么是这样的

```
list({str(i): i for i in range(10)}.keys()) 
```

......在运行之间保持一致，总是给予

```
['3', '2', '1', '0', '7', '6', '5', '4', '9', '8'] 
```

……？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-19T13:42:09.810

* * *

**更新：**在 Python 3.6 中，`dict`有一个保留插入顺序的[新实现。](https://docs.python.org/3/whatsnew/3.6.html#whatsnew36-compactdict)从 Python 3.7 开始，这种保持顺序的行为得到[保证](https://docs.python.org/3/whatsnew/3.7.html)：

> [dict](https://docs.python.org/3/library/stdtypes.html#typesmapping)对象的插入顺序保存特性[已被宣布](https://mail.python.org/pipermail/python-dev/2017-December/151283.html)为 Python 语言规范的官方部分。

* * *

这是2012 年[安全修复的结果，在 Python 3.3 中](http://mail.python.org/pipermail/python-announce-list/2012-March/009394.html)[默认启用](http://docs.python.org/3/whatsnew/3.3.html)（向下滚动到“安全改进”）。

来自公告：

> 哈希随机化导致 dicts 和 set 的迭代顺序是不可预测的，并且在 Python 运行中会有所不同。Python 从未保证 dict 或 set 中键的迭代顺序，建议应用程序永远不要依赖它。从历史上看，dict 迭代顺序在不同版本之间并没有经常改变，并且在 Python 的连续执行之间始终保持一致。因此，一些现有的应用程序可能依赖于 dict 或 set 排序。由于这一点以及许多不接受不受信任输入的 Python 应用程序不易受到这种攻击的事实，在此处提到的所有稳定 Python 版本中，哈希随机化默认禁用。

如上所述，最后一个大写的位在 Python 3.3 中不再适用。

**另请参阅：** [`object.__hash__()`文档](http://docs.python.org/3/reference/datamodel.html#object.__hash__)（“注意”侧边栏）。

如果绝对必要，您可以通过将[`PYTHONHASHSEED`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONHASHSEED)环境变量设置为`0`.

* * *

你的反例：

```
list({str(i): i for i in range(10)}.keys()) 
```

…实际上在 Python 3.3 中*并不总是给出相同的结果，尽管*[由于](https://stackoverflow.com/q/26136894/1014938)哈希冲突的处理方式不同排序的数量是有限的：

```
$ for x in {0..999}
> do
>   python3.3 -c "print(list({str(i): i for i in range(10)}.keys()))"
> done | sort | uniq -c
     61 ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']
     73 ['1', '0', '3', '2', '5', '4', '7', '6', '9', '8']
     62 ['2', '3', '0', '1', '6', '7', '4', '5', '8', '9']
     59 ['3', '2', '1', '0', '7', '6', '5', '4', '9', '8']
     58 ['4', '5', '6', '7', '0', '1', '2', '3', '8', '9']
     55 ['5', '4', '7', '6', '1', '0', '3', '2', '9', '8']
     62 ['6', '7', '4', '5', '2', '3', '0', '1', '8', '9']
     63 ['7', '6', '5', '4', '3', '2', '1', '0', '9', '8']
     60 ['8', '9', '0', '1', '2', '3', '4', '5', '6', '7']
     66 ['8', '9', '2', '3', '0', '1', '6', '7', '4', '5']
     65 ['8', '9', '4', '5', '6', '7', '0', '1', '2', '3']
     53 ['8', '9', '6', '7', '4', '5', '2', '3', '0', '1']
     62 ['9', '8', '1', '0', '3', '2', '5', '4', '7', '6']
     52 ['9', '8', '3', '2', '1', '0', '7', '6', '5', '4']
     73 ['9', '8', '5', '4', '7', '6', '1', '0', '3', '2']
     76 ['9', '8', '7', '6', '5', '4', '3', '2', '1', '0'] 
```

如本答案开头所述，Python 3.6 不再是这种情况：

```
$ for x in {0..999}
> do
>   python3.6 -c "print(list({str(i): i for i in range(10)}.keys()))"
> done | sort | uniq -c
   1000 ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-02-06T01:36:07.197

但是请注意，Python 3.7 仍然具有非确定性集合。dicts 保留插入顺序，但集合不保留。集合可以表现出相同的随机行为。

`python3 -c "print({str(i) for i in range(9)})"`

从一次运行到下一次运行仍然给出不同的结果。

# wpf - 来自动作的文本框的活动 ScrollToEnd 功能

> ID：14956315
> 
> 赞同：0
> 
> 时间：2013-02-19T11:26:01.053
> 
> 标签：wpf, textbox, action

我`TextBox`在`ScrollViewer`文本更改时运行应该滚动到末尾的操作。

这里`xaml`：

```
<ScrollViewer>
   <TextBox IsReadOnly="True" Text="{Binding SomeText}">
      <i:Interaction.Triggers>
          <i:EventTrigger EventName="TextChanged">
              <ac:ScrollToEndAction/>
          </i:EventTrigger>
      </i:Interaction.Triggers>
   </TextBox>
</ScrollViewer> 
```

这里的动作：

```
public class ScrollToEndAction : TargetedTriggerAction<FrameworkElement>
{
    protected override void Invoke(object parameter)
    {
        TextBox _textBox = (parameter as TextChangedEventArgs).OriginalSource as TextBox;
        _textBox.ScrollToEnd();
    }
} 
```

**这没用。**

我尝试通过以下方式更改文本（**它有效！**）：

```
public class ScrollToEndAction : TargetedTriggerAction<FrameworkElement>
{
    protected override void Invoke(object parameter)
    {
        TextBox _textBox = (parameter as TextChangedEventArgs).OriginalSource as TextBox;
        _textBox.Text="Test";
    }
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:17:44.863

最后通过使用解决了这个问题：

```
TextBox _textBox = (parameter as TextChangedEventArgs).OriginalSource as TextBox;
_textBox.ScrollToLine(_textBox.LineCount - 1); 
```

有点奇怪，

但最重要的是**它有效**。

# drupal - Drupal 自定义块views_embed_view

> ID：14956319
> 
> 赞同：0
> 
> 时间：2013-02-19T11:26:06.467
> 
> 标签：drupal, drupal-theming

请帮我在下面找到从中检索输出的块文件？

`$output = views_embed_view('shop_mainhome', 'block_1', '');`

我想在块中添加一些新元素并设置它们的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:20:40.597

您可以通过转到 yoursite/admin/structure/views 来更改“查看”内容，然后单击“shop_mainhome”视图并对其进行编辑.. 对其进行样式设置，您可以在主题中创建模板文件.. 您需要找到您的通过单击 ->advanced->Theme:Information 从视图本身获取模板文件名。您将看到一些模板文件建议，例如“ **views-view--test--page.tpl.php** ”。您可以使用它来更改视图 html 输出。祝你好运！

# c# - 在 Asp.net 中，“对象引用未设置为对象的实例”错误 onselectedindexchange 位于 gridview 内的单选按钮列表

> ID：14956320
> 
> 赞同：0
> 
> 时间：2013-02-19T11:26:13.177
> 
> 标签：c#, asp.net

我的设计页面`RadioButtonList`在项目模板中有一个事件`OnSelectedIndexChanged`。如果触发此事件，我会收到错误消息

```
object reference not set to an instance of an object 
```

也就是说，即使我已经设置了值，我也会在单选按钮列表中获得空值。

```
<asp:GridView ID="gdvHomeGenlist" runat="server" AutoGenerateColumns="False"
    BackColor="White" BorderColor="#3366CC" BorderStyle="None"
    BorderWidth="1px" CellPadding="4" Height="12px"
    ShowFooter="True" Width="335px"
    OnRowCommand="gdvHomeGenlist_RowCommand">
  <Columns>
    <asp:TemplateField HeaderText="Attendance">
      <ControlStyle Width="200px" />
      <HeaderStyle Font-Bold="True" Font-Size="8pt" Width="10px" />
      <ItemTemplate>             
        <asp:RadioButtonList ID="rdbattnd" runat="server"
            RepeatDirection="Horizontal"
            OnSelectedIndexChanged="rdbattnd_SelectedIndexChanged"
            AutoPostBack="True">
          <asp:ListItem  Value="1">Attended</asp:ListItem>
          <asp:ListItem Value="2">Not attended</asp:ListItem>
        </asp:RadioButtonList>
        <asp:TextBox ID="txtbxHmListGenRsnForNotAttdSpcify" runat="server" ></asp:TextBox>
      </ItemTemplate>
      <ItemStyle Font-Size="8pt" />
    </asp:TemplateField> 
  </Columns>
  <RowStyle BackColor="#EFF3FB" />
  <EditRowStyle BackColor="#2461BF" />
  <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
  <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
  <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
  <AlternatingRowStyle BackColor="White" />
</asp:GridView> 
```

后面的代码：

```
protected void rdbattnd_SelectedIndexChanged(object sender, EventArgs e)
{
    RadioButtonList rdbAttendance =
      (RadioButtonList)gdvHomeGenlist.FindControl("rdbattnd");    ///fetching null   

    /// error object reference is not set to an
    /// instance of an object
    if (rdbAttendance.SelectedValue == "1")
    {
            // some action
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:35:48.410

尝试这个：

```
protected void rdbattnd_SelectedIndexChanged(object sender, EventArgs e)
{
    var rdbAttendance = ((RadioButtonList)sender);

    //if (rdbAttendance.SelectedValue == "1")of an object       
    //{
    //}
} 
```

# glassfish - Glassfish，JDBC连接池高级选项卡抛出错误

> ID：14956321
> 
> 赞同：0
> 
> 时间：2013-02-19T11:26:15.657
> 
> 标签：glassfish, glassfish-3

在我们的某些服务器上，尝试访问 Glassfish（3.1.2（内部版本 23））中连接池页面上的高级选项卡时出现错误

```
type Exception report

message
descriptionThe server encountered an internal error () that prevented it from 
fulfilling this request.

exception
java.lang.IllegalStateException: PWC3991: getOutputStream() has already been called for 
this response note The full stack traces of the exception and its root causes are 
available in the GlassFish Server Open Source Edition 3.1.2 logs. 
```

我们还在默认或服务器配置中的 http-listeners 的 SSL 选项卡上收到错误

```
class java.lang.RuntimeException 
```

不确定它们是否相关或 2 个单独的问题

我使用第一个问题中的错误号进行了搜索，唯一发现的是一个正在从 glassfish 2 更新到 glassfish 3 的人，并且某些 jvm 属性没有自动迁移。我们没有进行任何升级，所以我不认为是这样，但我还是添加了它，它没有任何区别。

另一个奇怪的事情是我们有其他没有问题的服务器。它们基本上是相同的设置，我能看到的唯一区别是它适用于多服务器设置的服务器，并且不适用于我们将所有东西放在一个盒子上的服务器（并且只是为了澄清两者场景，glassfish 仅存在于一个盒子上，只是在多服务器设置中，数据库和服务位于 glassfish 不同的机器上）

我尝试从工作服务器复制 domain.xml 并没有任何区别。唯一的变化是：

不工作版本

```
<protocol name="http-listener-1">
   <http timeout-seconds="250" default-virtual-server="server" max-connections="10000" 
    <compressable-mime-type="text/html,text/xml,text/plain,application/json">
    file-cache enabled="true"></file-cache>
   </http>
   <ssl classname="com.sun.enterprise.security.ssl.GlassfishSSLImpl" cert-nickname="">    
   </ssl>
</protocol> 
```

工作版

```
<protocol name="http-listener-1">
  <http timeout-seconds="250" default-virtual-server="server" max-connections="10000" 
     compressable-mime-type="text/html,text/xml,text/plain,application/json">
     <file-cache enabled="true"></file-cache>
  </http>
</protocol> 
```

和

不工作

```
<secure-admin enabled="true" special-admin-indicator="aaaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaa">
<secure-admin-principal dn="CN=<hostname>,OU=GlassFish,O=Oracle Corporation,L=Santa Clara,ST=California,C=US"></secure-admin-principal>
<secure-admin-principal dn="CN=<hostname>-instance,OU=GlassFish,O=Oracle Corporation,L=Santa Clara,ST=California,C=US"></secure-admin-principal> 
```

```
<secure-admin enabled="true" special-admin-indicator="aaaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaa">
secure-admin-principal dn="CN=<other_host>,OU=GlassFish,O=Oracle Corporation,L=Santa Clara,ST=California,C=US"></secure-admin-principal>
<secure-admin-principal dn="CN=<other-host>-instance,OU=GlassFish,O=Oracle Corporation,L=Santa Clara,ST=California,C=US"></secure-admin-principal> 
```

我看不到两个 domain.xmls 之间的任何其他更改，将一个更改为另一个没有任何区别。日志文件中似乎没有任何内容，所以我不确定在哪里继续寻找，或者我应该寻找什么样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:10:20.613

看起来问题是由安装脚本（我们编写的）没有清理现有安装引起的。仅当我们尝试在现有版本之上安装更新版本的 glassfish 时，才会出现该问题。我们的安装脚本在安装新软件包之前没有删除旧的 glassfish 目录，这是导致问题的原因

# django - 每个 django 应用程序都需要 admin.py 吗？

> ID：14956324
> 
> 赞同：1
> 
> 时间：2013-02-19T11:26:18.967
> 
> 标签：django

在 djangoproject.com 中的教程的帮助下，我创建了一个简单的 django 应用程序。没有创建 admin.py 文件。我需要为应用程序的功能创建一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:29:30.110

`admin.py`如果存在，将由`admin.autodiscover()`. 它适用于[可选的管理应用程序](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)，不是强制性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:29:38.217

不。

您只需要创建 admin.py 即可访问管理视图中的对象/模块或/并覆盖默认的保存功能。

# c# - RuntimeHelpers.PrepareDelegate 的安全透明替代方案

> ID：14956341
> 
> 赞同：0
> 
> 时间：2013-02-19T11:27:06.863
> 
> 标签：c#, .net, code-access-security

我需要提前对一些发出的委托进行预 JIT，并尝试为此使用[RuntimeHelpers.PrepareDelegate](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.runtimehelpers.preparedelegate.aspx)，但此方法标有该`SecurityCritical`属性。我的程序集标有该`AllowPartiallyTrustedCallers`属性，因此不能调用任何安全关键代码。

为什么`PrepareDelegate`和`PrepareMethod`安全至关重要，在预 JIT 处理这些代表时，我有哪些替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:15:14.947

正如 MSDN 文章[CA2140 中所引用的：透明代码不得引用安全关键项](http://msdn.microsoft.com/en-us/library/bb264475.aspx)：

> **如何解决违规问题**
> 
> 要修复违反此规则的行为，请执行以下操作之一：
> 
> *   `SecurityCriticalAttribute`使用属性标记使用安全关键代码的代码元素
>     
>     
>     
>     *- 或者 -*
>     
>     
> *   `SecurityCriticalAttribute`从标记为安全关键的代码元素中删除该属性，**并使用`SecuritySafeCriticalAttribute`**or `SecurityTransparentAttribute`属性对其进行标记。

您必须使用`[SecuritySafeCriticalAttribute]`. 这是在行动：

```
using System;
using System.Runtime.CompilerServices;
using System.Reflection;
using System.Security;

[assembly: AllowPartiallyTrustedCallers]
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            PreJIT();
        }

        [SecuritySafeCritical]
        static void PreJIT()
        {
            RuntimeHelpers.PrepareMethod(
                System.Reflection.Emit.DynamicMethod.GetCurrentMethod()
                .MethodHandle);
        }
    }
} 
```

# ios - 在 iOS 中，是否可以在到达特定位置（或区域）时获得警报。? 如果是，任何人都可以提供同样的例子吗？

> ID：14956343
> 
> 赞同：0
> 
> 时间：2013-02-19T11:27:13.230
> 
> 标签：ios, geolocation, core-location, cllocationmanager

您好，当前正在尝试在应用程序的用户到达特定位置时发出警报。我是 iOS 新手，不知道如何做到这一点。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:43:12.097

有可能，请查看`CLLocationManager`文档，特别是[startMonitoringSignificantLocationChanges](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringSignificantLocationChanges)和[startMonitoringForRegion：](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringForRegion%3a)

# php - SET $per_page 从 codeingiter 中的输入类型文本

> ID：14956344
> 
> 赞同：0
> 
> 时间：2013-02-19T11:27:13.690
> 
> 标签：php, html, codeigniter

大家好，我有以下问题：我已经在 codeigniter 分页类的帮助下设置了分页，但我想做更多的事情：

我希望用户在输入框中输入一个值...然后`$per_page`自动设置为该值：

这是我的代码：

```
public function index($offset = NULL, $limit = NULL)
    {
        $this->load->library('pagination');

        $offset = $this->uri->segment(3);
        $total = $this->db->count_all('posts');

        $per_page = 5;      

        $config['base_url'] = base_url().'welcome/index';
        $config['total_rows'] = $total;
        $config['uri_segment'] = 3;
        $config['per_page'] = $per_page;

        $this->pagination->initialize($config); 

        $data['pagination'] = $this->pagination->create_links();
        $data['posts'] = $this->Model_cats->get_pagination_field($config['per_page'], $offset); 
```

等等...

分页工作很棒！

这是html：

```
<div id="pagination">

    <?php  echo $pagination;?> 
    <input type="text" id="set_pagination">
    <input type="submit" id="submit_pagination">

</div> 
```

好的，我如何提交一个数字，比如说 3，然后**每页显示 3 个帖子**？

任何想法？ `$per_page = $this->input->post`.... 某物..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:35:56.853

按照步骤。

```
1) save the text box value in DB.

2) In DB there will be a single row containing value of per_page. all time this value will be updated.

3) when you are using pagination class pick up that value from DB. 
```

希望这对你有用。任何比这更好的想法都值得赞赏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:38:36.127

一种方法是实现这一点，将值发布到函数中，

```
<div id="pagination">
   <?php echo form_open("controller/function"); ?>
    <?php  echo $pagination;?> 
    <input type="text" id="set_pagination" name="set_pagination">
    <input type="submit" id="submit_pagination">
   <?php echo form_close(); ?>
</div> 
```

在您的控制器功能中，获取值。

```
$per_page = $this->input->post('set_pagination'); 
```

然后将值存储在 DB（或）Session 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:32:58.090

首先将您的 per_page 更改为

```
$per_page = 3; 
```

并向您的模型发送 $per_page 包括偏移量为

```
$data['posts'] = $this->Model_cats->get_pagination_field($config['per_page'], $offset,$per_page); 
```

并在您的模型写入限制为

```
$this->db->limit($perpage,$offset); 
```

就是这样......希望它对你有帮助

# c - C 数组读取优化

> ID：14956346
> 
> 赞同：0
> 
> 时间：2013-02-19T11:27:17.197
> 
> 标签：c

作为输入，我有一行：

```
2 6 7 5 1 2 3 4 5    
A a b B c d e f g 
```

其中**A** - 整数，有多少个数字`Array1`，然后`a b`- 中的数字`Array1`，然后**B** - 整数，有多少个数字`Array2`，`c d e f g`- 中的数字`Array2`

我写了这段代码：

```
scanf("%d", &Alen); // read Array1 len
int posA[Alen];
for (i = 0; i < Alen; i++){
        scanf("%d", &posA[i]);//read Array1 numbers
    }

scanf("%d", &Blen);//read Array2 len
int posB[Blen];
for (i = 0; i < Blen; i++){//read Array2 numbers
        scanf("%d", &posB[i]);
    } 
```

但它太慢了（最慢，比我的程序，用这个数组做一些事情），所以可能有另一种方法来扫描这个数组，并快速执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:40:37.670

在大多数情况下，我认为这个恒定因素不会有什么大不了的。但是如果你坚持改进它......你可以试试这个：

```
#define BIGBIG_SIZE (10000000)
char* buffer=(char*)malloc(BIGBIG_SIZE); // make it big enough for your file.
                              // makes your life easier by making sure 
                              //the whole file could be read in once
fread( buffer , 1 , BIGBIG_SIZE , stdin );
sscanf( buffer , "%d", &a ); // from now on use sscanf to get from buffer instead of scanf() 
```

这有时对我有用。（我碰巧发现这`scanf("%d")`确实*比帕斯卡*慢 2`read(x)`倍）如有必要，编写自己的例程来获取*令牌*（整数）。

如果它仍然太慢，请尝试使用内存映射文件而不是`fread`缓冲区。

```
fd = open(FILEPATH, O_RDWR | O_CREAT | O_TRUNC, (mode_t)0600);
if (fd == -1) {
    perror("Error opening file for writing");
    exit(EXIT_FAILURE);
}
map = mmap(0, FILESIZE, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
if (map == MAP_FAILED) {
      close(fd);
      perror("Error mmapping the file");
      exit(EXIT_FAILURE);
}
// then you use sscanf() here 
```

或您平台上的任何其他内存映射解决方案。

* * *

不过，我认为你不需要这些肮脏的把戏。

# testing - 观看时摩卡测试失败（“毕竟”：done（）多次调用）

> ID：14956352
> 
> 赞同：1
> 
> 时间：2013-02-19T11:27:40.467
> 
> 标签：testing, tdd, mocha.js, supertest, superagent

我有一个 Mocha 测试在第一次运行时可以通过，但是当进行更改并且 Mocha 第二次重新运行测试（使用`--watch`标志）时，它会失败。我的测试：

```
var mongoose = require('mongoose')
  , chai = require('chai')
  , request = require('supertest')
  , _ = require('underscore')
  , app = require('../../app').boot('testing')
  , Link = mongoose.model('Link')
  , should = chai.should()

request = request(app)

describe('Links resource', function () {

  var userId = '512298b46271845564000002'
    , linkId
    , sampleLink = {
        'uri': 'http://1.com/',
        'meta': {
          'title': 'Link 1',
          'desc': 'Lorem ipsum'
        },
        'shares': [{
          'uid': userId,
          'date': new Date(),
          'message': 'Lorem ipsum'
        }]
      }

  before(function (done) {
    mongoose.connection.on('open', done)
  })

  after(function (done) {
    Link.remove(function () {
      mongoose.connection.close(done)
    })
  })

  it('POST /api/links', function (done) {
    request.post('/api/links')
      .send(sampleLink)
      .expect('Content-Type', /json/)
      .expect(200)
      .end(function (err, res) {
        if (err) done(err)

        res.body.should.have.property('_id')

        linkId = res.body._id

        done()
      })
  })

  it('GET /api/links/:id', function (done) {
    request.get('/api/links/' + linkId)
      .expect('Content-Type', /json/)
      .expect(200)
      .end(function (err, res) {
        if (err) done(err)

        res.body.should.have.property('uri', sampleLink.uri)

        done()
      })
  })

  it('GET /api/links', function (done) {
    request.get('/api/links')
      .expect('Content-Type', /json/)
      .expect(200)
      .end(function (err, res) {
        if (err) done(err)

        res.body.should.have.lengthOf(1)

        done()
      })
  })

  it('PATCH /api/links/:id', function (done) {
    request.patch('/api/links/' + linkId)
      .send({ 'uri': 'http://2.com/' })
      .expect('Content-Type', /json/)
      .expect(200)
      .end(function (err, res) {
        if (err) done(err)

        res.body.should.have.property('_id')
        res.body.should.have.property('uri', 'http://2.com/')

        done()
      })
  })

  it('PUT /api/links/:id', function (done) {
    request.put('/api/links/' + linkId)
      .send(_(sampleLink).extend({ 'uri': 'http://3.com/' }))
      .expect('Content-Type', /json/)
      .expect(200)
      .end(function (err, res) {
        if (err) done(err)

        res.body.should.have.property('_id')
        res.body.should.have.property('uri', 'http://3.com/')

        done()
      })
  })

  it('DELETE /api/links', function (done) {
    request.del('/api/links/' + linkId)
      .expect(200)
      .end(function (err, res) {
        if (err) done(err)

        res.body.should.be.empty

        done()
      })
  })

}) 
```

错误：

```
 Links resource
  1) "after all" hook

  ✖ 1 of 6 tests failed:

  1) Links resource "after all" hook:
     Error: done() called multiple times
      at multiple (/usr/local/share/npm/lib/node_modules/mocha/lib/runnable.js:177:31)
      at done (/usr/local/share/npm/lib/node_modules/mocha/lib/runnable.js:183:26)
      at NativeConnection.Runnable.run.duration (/usr/local/share/npm/lib/node_modules/mocha/lib/runnable.js:199:9)
      at NativeConnection.EventEmitter.emit (events.js:126:20)
      at open (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/lib/connection.js:431:10)
      at NativeConnection.Connection.onOpen (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/lib/connection.js:439:5)
      at Connection._open (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/lib/connection.js:399:10)
      at NativeConnection.doOpen (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:48:5)
      at Db.open (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/db.js:230:14)
      at Server.connect.connectCallback (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:333:7)
      at g (events.js:192:14)
      at EventEmitter.emit (events.js:126:20)
      at Server.Base._callHandler (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/base.js:130:25)
      at Server.connect.connectionPool.on.server._serverState (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:517:20)
      at MongoReply.parseBody (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/responses/mongo_reply.js:127:5)
      at Server.connect.connectionPool.on.server._serverState (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:476:22)
      at EventEmitter.emit (events.js:96:17)
      at _connect (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:175:13)
      at EventEmitter.emit (events.js:99:17)
      at Socket.exports.Connection.createDataHandler (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/connection.js:372:22)
      at Socket.EventEmitter.emit (events.js:96:17)
      at TCP.onread (net.js:397:14)

    1) "before all" hook

  ✖ 1 of 6 tests failed:

  1) Links resource "before all" hook:
     Error: done() called multiple times
      at multiple (/usr/local/share/npm/lib/node_modules/mocha/lib/runnable.js:177:31)
      at done (/usr/local/share/npm/lib/node_modules/mocha/lib/runnable.js:183:26)
      at NativeConnection.Runnable.run.duration (/usr/local/share/npm/lib/node_modules/mocha/lib/runnable.js:199:9)
      at NativeConnection.EventEmitter.emit (events.js:126:20)
      at open (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/lib/connection.js:431:10)
      at NativeConnection.Connection.onOpen (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/lib/connection.js:439:5)
      at Connection._open (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/lib/connection.js:399:10)
      at NativeConnection.doOpen (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:48:5)
      at Db.open (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/db.js:230:14)
      at Server.connect.connectCallback (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:333:7)
      at g (events.js:192:14)
      at EventEmitter.emit (events.js:126:20)
      at Server.Base._callHandler (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/base.js:130:25)
      at Server.connect.connectionPool.on.server._serverState (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:517:20)
      at MongoReply.parseBody (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/responses/mongo_reply.js:127:5)
      at Server.connect.connectionPool.on.server._serverState (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:476:22)
      at EventEmitter.emit (events.js:96:17)
      at _connect (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:175:13)
      at EventEmitter.emit (events.js:99:17)
      at Socket.exports.Connection.createDataHandler (/Users/Oliver/Development/Personal/Reader/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/connection.js:372:22)
      at Socket.EventEmitter.emit (events.js:96:17)
      at TCP.onread (net.js:397:14) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:27:28.617

我试图用一些简单的测试用例重现这一点，但我不能（猫鼬 3.5.5）

这可能是修复效果，而不是原因，但也许直接删除集合会起作用吗？[来自另一个 SO 答案](https://stackoverflow.com/a/10088410)的示例：

```
 after(function (done) {
    mongoose.connection.collections['links'].drop();
    mongoose.connection.close(done);
  }); 
```

# ruby-on-rails - 使用 has_secure_password 和 oauth（如 facebook）认证

> ID：14956353
> 
> 赞同：3
> 
> 时间：2013-02-19T11:27:42.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, oauth-2.0, omniauth

我有兴趣使用这两种身份验证方案，但将用户模型设置为`has_secure_password`强制验证`password_digest`. 我很好奇是否有一种标准化的方式通过oauth机制以这种方式为带有omniauth-facebook的rails 3.1.x创建用户。就像将一个`test`值存入密码摘要或其他东西？或者可能在与 has_secure_password 一起使用时在特定条件下关闭验证（尽管我真的不知道我将如何做到这一点并且希望得到帮助）。

我看到 oauthed_user 有一个提交（[https://github.com/rails/rails/blob/master/activemodel/test/models/oauthed_user.rb](https://github.com/rails/rails/blob/master/activemodel/test/models/oauthed_user.rb)），但我不太确定应该如何使用它。

感谢任何信息/建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T17:17:38.440

好吧，我不知道执行此操作的标准方法，但是我在我的应用程序中执行了此操作，并且效果很好

```
def create
  if user_is_from_omniauth?
    @user.password = SecureRandom.hex(9)
  end
  @user.save
end 
```

现在您应该在不使用密码的情况下登录用户为此建议在您的数据库中放置一个布尔值，这样它就不会在更改密码或忘记密码时询问旧密码

# java - 这个 itext 数字签名的实现有什么问题？

> ID：14956356
> 
> 赞同：2
> 
> 时间：2013-02-19T11:27:47.020
> 
> 标签：java, itext

我从互联网上获取了一个示例代码，我正在尝试签署一份文件。

这是代码

```
public class SimpleSignature {

    public static final String KEYSTORE = "c:/key/sano";
    public static final char[] PASSWORD = "Chennai".toCharArray();
    public static final String SRC = "c:/itext/unsigned.pdf";
    public static final String DEST = "c:/itext/signed.pdf";

    public void sign(String src, String dest,
            Certificate[] chain, PrivateKey pk, String digestAlgorithm, String provider,
            CryptoStandard subfilter, String reason, String location)
                    throws GeneralSecurityException, IOException, DocumentException {
        // Creating the reader and the stamper
        PdfReader reader = new PdfReader(src);
        FileOutputStream os = new FileOutputStream(dest);
        PdfStamper stamper = PdfStamper.createSignature(reader, os, '\0');
        // Creating the appearance
        PdfSignatureAppearance appearance = stamper.getSignatureAppearance();
        appearance.setReason(reason);
        appearance.setLocation(location);
        appearance.setVisibleSignature(new Rectangle(36, 748, 144, 780), 1, "sig");
        // Creating the signature
        ExternalDigest digest = new BouncyCastleDigest();
        ExternalSignature signature =
                new PrivateKeySignature(pk, digestAlgorithm, provider);
        MakeSignature.signDetached(appearance, digest, signature, chain,
                null, null, null, 0, subfilter);
    }

    public static void main(String[] args)
            throws GeneralSecurityException, IOException, DocumentException {
        BouncyCastleProvider provider = new BouncyCastleProvider();
        Security.addProvider(provider);
        KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
        ks.load(new FileInputStream(KEYSTORE), PASSWORD);
        String alias = (String)ks.aliases().nextElement();
        PrivateKey pk = (PrivateKey) ks.getKey(alias, PASSWORD);
        Certificate[] chain = ks.getCertificateChain(alias);
        SimpleSignature app = new SimpleSignature();
        app.sign(SRC, String.format(DEST, 1), chain, pk, DigestAlgorithms.SHA256,
                provider.getName(), CryptoStandard.CMS, "Test 1", "Ghent");
        app.sign(SRC, String.format(DEST, 2), chain, pk, DigestAlgorithms.SHA512,
                provider.getName(), CryptoStandard.CMS, "Test 2", "Ghent");
        app.sign(SRC, String.format(DEST, 3), chain, pk, DigestAlgorithms.SHA256,
                provider.getName(), CryptoStandard.CADES, "Test 3", "Ghent");
        app.sign(SRC, String.format(DEST, 4), chain, pk, DigestAlgorithms.RIPEMD160,
                provider.getName(), CryptoStandard.CADES, "Test 4", "Ghent");
    }
} 
```

当我运行此代码时。我收到这个错误。

```
Exception in thread "main" java.lang.NoSuchMethodError: org.bouncycastle.asn1.ASN1Integer.<init>(J)V
    at com.itextpdf.text.pdf.security.PdfPKCS7.getEncodedPKCS7(PdfPKCS7.java:797)
    at com.itextpdf.text.pdf.security.MakeSignature.signDetached(MakeSignature.java:149)
    at org.allcolor.yahp.sample.SimpleSignature.sign(SimpleSignature.java:45)
    at org.allcolor.yahp.sample.SimpleSignature.main(SimpleSignature.java:62) 
```

知道为什么我会收到此错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T12:05:42.893

通过将 itext5.3.4 与 bcprov-jdk15on-1.47.jar 一起使用，我能够成功运行示例

# javascript - 观察不触发具有隔离范围的指令

> ID：14956357
> 
> 赞同：0
> 
> 时间：2013-02-19T11:27:51.560
> 
> 标签：javascript, angularjs

我试图用 D3 和 Angular 做一些事情。我不确定这是否与 D3 有关，但我将它留在了那里，这样我就可以重现我正在尝试的所有内容..

这是一个重现我的问题的笨拙。

[http://plnkr.co/edit/sxbKUmeb1B51t9eTtgwH?p=preview](http://plnkr.co/edit/sxbKUmeb1B51t9eTtgwH?p=preview)

我正在尝试做的是，创建数据数组并根据该数据生成一组 d3 svg 圆。创建的指令应该“监视”这个数据数组，并根据数组的缩小或扩展创建或删除更多的圆圈。我认为从那里开始逻辑很简单。为确保稍后执行此操作，我正在使用 $timeout 将新值添加到数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:01:56.807

好吧，首先，这段代码： `<circles data="obj.dataArray"></circles>`似乎是错误的，因为您没有在范围内定义`dataArray`任何地方。`obj`

所以这：

```
function($scope,model,$timeout) {
    $scope.obj = {};
        model.data[0] = 20;
        model.data[1] = 30;
        model.data[2] = 40;
        model.data[3] = 50;

        $timeout(function(){

            model.data.push(Math.random()*100);
            console.log(model.data);
        },1000);
} 
```

应该是这样的：

```
function($scope,model,$timeout) {
    $scope.model = model;
    $scope.model.data[0] = 20;
    $scope.model.data[1] = 30;
    $scope.model.data[2] = 40;
    $scope.model.data[3] = 50;

    $timeout(function(){
        $scope.model.data.push(Math.random()*100);
        console.log($scope.model.data);
    },1000);
} 
```

这：`<circles data="obj.dataArray"></circles>`应该是`<circles data="model"></circles>`。

现在在您的指令中，您已经设置了这样的范围：

```
scope : {
    data : '&'
}, 
```

但这应该是：

```
scope : {
    data : '='
}, 
```

因为您想要对 data 属性表示的对象的引用。& 用于当属性包含您要执行的表达式时。

因此，通过这些更改，指令中的 scope.data 现在包含对“commonModel”的引用，因此指令不再需要请求“commonModel”。然后更改您的 $watch 以查看“data.length”以了解何时添加或删除项目。

像这样的东西：http: [//plnkr.co/edit/sa9blROCm8FFhRQSEWii](http://plnkr.co/edit/sa9blROCm8FFhRQSEWii)

# sql - 日志运输潜在的积压

> ID：14956366
> 
> 赞同：2
> 
> 时间：2013-02-19T11:28:15.677
> 
> 标签：sql, logging, shipping

我计划在我们的生产服务器和灾难恢复站点之间设置日志传送。两者之间的网络联系不是很好。目的是每 15 分钟运行一次日志传送，这通常意味着将创建少于 100Mb 的事务日志，这些日志将在接下来的 15 分钟间隔之前被复制并恢复到 DR。

然而，通宵作业有时会创建接近 10Gb 的巨大事务日志，这将需要 4 个多小时才能复制到 DR。后续的日志传送作业是否会运行并“超越”前一个作业。

谢谢

斯图尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:54:19.010

no, the logs will be backed up on your main server and send to your DR server on a queue basis, so you don't have to worry about that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T06:42:17.690

我在发送日志文件方面没有任何问题。Litespeed 完整备份（不必使用 Litespeed（.SLS 文件））但可以使用 .bak 文件。它们是您应该在其中运行和保存的脚本，让您的主要产品服务器具有手动同步工作，然后每天进行完整备份，然后每 15 分钟完成一次副本。在 DR 上，一些作业每 15 分钟运行一次，用于复制和还原过程。

我有几个从 200 GB 到 900 GB 的数据库，对于大型 .trn 文件的复制来说，网络延迟似乎不是问题。瓶颈似乎在还原过程中。

一般来说，如果您没有继承缺少主键的表的数据库灾难，那么我不会推荐旧的日志传送，有更好的方法（镜像和复制）

# android - 如何从我在android中的文件夹中选择一个文件

> ID：14956368
> 
> 赞同：0
> 
> 时间：2013-02-19T11:28:17.607
> 
> 标签：android, android-layout, android-intent

如何从文件管理器浏览文件（任何类型）。我正在尝试使用此代码

```
Intent pickFileIntent = new Intent();
pickFileIntent.setAction(Intent.ACTION_GET_CONTENT);
pickFileIntent.addCategory(Intent.CATEGORY_OPENABLE);
pickFileIntent.setType("*/*");
Intent chooserIntent = Intent.createChooser(pickFileIntent,
                           getText(R.string.choosefile_title));
startActivityForResult(chooserIntent, PICK_FILE_REQUEST); 
```

此代码打开图库并选择图片但文件不浏览。我的 LogCat 错误是

```
 02-19 16:46:19.846: E/ActivityThread(512): Failed to find provider info for com.navjagpal.filesharer.FileProvider 
```

我是android的初学者。请帮助我提供示例代码。提前致谢.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:34:47.477

在清单文件中的 Authorities 标记中指定完整路径（SDK 中的 SearchableDictionary 示例代码）。

```
<provider android:name=".DictionaryProvider"
       android:authorities="com.example.android.searchabledict.DictionaryProvider" 
```

# android - 将远程图像缩放到设备的高度和宽度

> ID：14956369
> 
> 赞同：0
> 
> 时间：2013-02-19T11:28:19.817
> 
> 标签：android, android-layout

我正在尝试构建一个具有 ScrollView 的 android 应用程序，其中图像（远程 URL）填满屏幕（marginTop、marginLeft、marginRight 和 marginBottom 设置为 5dp 左右），当你向下滚动时，你会发现更多的 UI 组件.

我发现很难将图像缩放到确切的尺寸。无法控制图像的大小。有些可能很小，有些可能很大。如果它很小，我想拉伸它以适应屏幕。我的 XML 如下所示：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ProgressBar
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:indeterminate="true" 
    android:layout_centerInParent="true"
    android:visibility="invisible"
    android:id="@+id/movieImageLoading"/>

    <ImageView android:id="@+id/headerImage"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:scaleType="fitXY"
    android:layout_marginTop="5dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginBottom="5dp"
    android:contentDescription="@string/movie_image"></ImageView>

    <Button
        android:id="@+id/save2"
        android:layout_width="150dp"
        android:layout_marginTop="10dp"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/headerImage"
        android:text="save" />

</RelativeLayout> 
```

这是错的，有人可以帮我吗？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:35:38.753

试试这个布局

将您的按钮设置为底部以修复并将图像视图设置在具有填充父项的按钮上方并最后指定进度条

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" > <!-- here make wrap to fill -->
    <Button
        android:id="@+id/save2"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="save"
        android:layout_alignParentBottom="true" />

    <ImageView
        android:id="@+id/headerImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/save2"
        android:layout_gravity="center"
        android:layout_margin="5dp"
        android:contentDescription="movie_image"
        android:scaleType="fitXY" >
    </ImageView>

    <ProgressBar
        android:id="@+id/movieImageLoading"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_centerInParent="true"
        android:indeterminate="true"
        android:visibility="invisible" />
</RelativeLayout> 
```

# ffmpeg - 无法使用 Tess4J 在 jpg 文件中以 100 % 的准确率识别文本

> ID：14956373
> 
> 赞同：1
> 
> 时间：2013-02-19T11:28:44.087
> 
> 标签：ffmpeg, tesseract

我想将 .flv 视频文件拆分为具有良好分辨率的 .jpg/png 帧，然后想使用 Tess4J 工具（围绕 Tesseract 的 JNA 包装器）识别其中的字符序列。

目前我尝试使用ffmpeg命令行工具将.flv视频文件分割成jpg图片。我使用的ffmpeg命令是：

ffmpeg -i myinput.flv myoutput%d.jpg

它给了我具有详细信息的输出图像：

图片尺寸：1280 * 696

水平分辨率：96 dpi

垂直分辨率：96 dpi

位深：24

我的问题是：我尝试使用 Tess4J 使用以下代码片段识别视频帧（我拆分的 jpg 图像文件）中的字符，它正在识别字符，但不能以 100% 的准确度识别。它还添加了一些图像中没有的垃圾字符。

我正在使用的 Java 代码片段：

```
import java.io.BufferedWriter

import java.io.File;

import java.io.FileWriter;

import java.io.IOException; 

import net.sourceforge.tess4j.Tesseract;

import net.sourceforge.tess4j.TesseractException;

public class TesseractDemo {

public static void main(String[] args) {

    File imageFile = new File("D:\\myinput1.jpg");

    Tesseract instance = Tesseract.getInstance();

    // Tesseract1 instance = new Tesseract1();

    try {

        String result = instance.doOCR(imageFile);

        System.out.println(result);

        // write in a file
        try {
            File file = new File("D:\\myoutput1.txt");
            BufferedWriter out = new BufferedWriter(new FileWriter(file));
            out.write(result);
            out.close();
        } catch (IOException ex) {
        }

    } catch (TesseractException ep) {
        System.err.println(ep.getMessage());
    }

} 
```

}

注意：在 Tess4J 站点中，他们告诉您用于进行 OCR 的图像应该超过 200 dpi（每英寸点数）。如何使用ffmpeg获取200dpi以上的jpg图片？？

任何有任何java代码片段或在这方面有任何建议的机构请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:30:52.037

如果可能，请使用 PNG 图像格式，因为 JPEG 可能会压缩并引入伪影。您可以将 Java 中的图像重新缩放到所需的分辨率（检查[Tess4J](http://sourceforge.net/p/tess4j/code/159/tree/Tess4J_3/trunk/src/net/sourceforge/vietocr/ImageHelper.java)中的 ImageHelper.getScaledInstance 方法）。您应该得到比原始转换图像更好的结果。在白色背景上获得黑色文本的颜色反转也会有所帮助。

# facebook - 如何获取 Facebook 用户单击本地化对象链接的语言环境？

> ID：14956375
> 
> 赞同：1
> 
> 时间：2013-02-19T11:28:57.140
> 
> 标签：facebook, internationalization, locale, facebook-opengraph

我即将实现开放图形本地化对象。

我已经配置了`og:locale:alternate`元标记，当 Facebook 爬虫请求进来时，会返回正确的语言环境。结果，根据用户的区域设置，我每个产品都有一个对象（如柜台未划分），并且文本正确显示在墙上的帖子上。

如果我查看自己的分享，我会看到一些 Facebook URL 参数附加到 URL，但如果有人分享我的帖子，即使这些参数也会被删除，只留下规范 URL。然而，规范 URL 不包含任何语言环境/语言参数，因为这些参数应仅由`og:locale`适用于帖子的标签定义。

但问题是，我无法从这些链接中找出当前用户的语言环境（实际点击链接的人）。

我被困在这里，因为没有语言环境，也没有`fb_locale`URL 中的参数，也没有`X-Facebook-locale`发送标头。我的应用程序在外部站点上运行（不在画布或选项卡中），因此 PHP SDK`getUser()`也`getSignedRequest()`无法正常工作。我只有一个名为`locale`.

在这种情况下，Facebook 不应该在 URL 中至少附加一个 locale/fb_locale 参数吗？由于我只需要语言环境（我认为这是完全无害的），我不想让第一次访问的访问者允许他们只获得他们的语言环境。这实际上是荒谬的，因为他们正在跟踪他们已经在他们的语言中拥有的链接。

我没有任何想法来解决这个问题。如果您有任何想法，请提前致谢。

# c# - 在 WCF 中使用 DataContract 传递对象

> ID：14956377
> 
> 赞同：1
> 
> 时间：2013-02-19T11:29:09.373
> 
> 标签：c#, wcf, object, struct

**[编辑] 我现在已经在客户端和 OnDeserializing() 和 OnDeserialized() 方法中使用构造函数和调用代码编辑了 D。**

我有一个 WCF 服务（通过命名管道）和一个客户端。我需要传递一个对象（最好是该对象的引用）作为我的 OperationContract 的参数。

```
[DataContract]
public class D
{
    [DataMember] 
    public int Id;

    [DataMember] 
    public string StrId;

    //...

    public D(int id, string strid)
    {
        Id = id;
        StrId = strid;
        //...
    }

    [OnDeserialized]
    void OnDeserialized(StreamingContext strmCtx)
    {
    } // breakpoint here (1)

    [OnDeserializing]
    void OnDeserializing(StreamingContext strmCtx)
    {
    } // breakpoint here (2)

} 
```

这是服务合同：

```
[ServiceContract]
public interface ICalc
{
    [OperationContract]
    int Calculate(string date, int count);

    // d is input of this method, and count and array are outputs.
    [OperationContract]
    int getArray(ref int count, ref int[] array, D d);
} 
```

这是我调用 getArray 的客户端代码：

```
proxy.getArray(ref myCount, ref myIntArray, new D(source)) 
```

我也试过这个：

```
D d = new D(source)
proxy.getArray(ref myCount, ref myIntArray, d) 
```

显然这并没有改变任何东西，在这两种情况下，当我在服务代码（getArray 方法的代码）中收到 d 时，它的所有字段都是空的。这是为什么？有什么我想念的吗？

我知道（使用启用跟踪并查看传输层的消息）字段的传输层值正在在线上正确传输。我还向对象添加了 OnDeserialized() 和 OnDeserializing() 方法，以便我可以在断点 (1) 和 (2) 处放置一个断点，所有字段都为空？！实际上根本没有调用对象设置器！

我的想法在这里用完了....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:00:28.390

WCF 是面向数据的（序列化的 xml），而不是面向对象的。那是行不通的！

您的服务运营：

```
[OperationContract]
int getArray(ref int count, ref int[] array, D d); 
```

将返回 int 的数据值。如果您想获取 int 值和数组值，我建议您为它创建一个 [DataContract] ，包含这两个值。这样，它们将作为数据传递给客户端。

使用 (ref int[]) 调用服务操作不会产生任何影响。

使用一些代码更新：对不起，但我无法发现您的错误。这是您可以比较的小示例（有效）。如果您仍然无法修复错误，我建议您发布完整的代码和配置。

```
using System.Runtime.Serialization;
using System.ServiceModel;

namespace WcfService2
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        string GetData(InputData value);
    }

    [DataContract]
    public class InputData
    {
        [DataMember]
        public int[] Array { get; set; }
        [DataMember]
        public D SomeStuff { get; set; }
    }

    [DataContract]
    public class D
    {
        [DataMember]
        public int Id { get; set; }
    }
}

using System;

namespace WcfService2
{
    public class Service1 : IService1
    {
        public string GetData(InputData data)
        {
            if (data.Array == null || data.SomeStuff == null)
                throw new NullReferenceException();
            return "OK!";
        }
    }
}

using ConsoleApplication9.ServiceReference;
using System;

namespace ConsoleApplication9
{
    class Program
    {
        static void Main(string[] args)
        {
            var proxy = new Service1Client();
            var request = new InputData
                {
                    Array = new int[] {1, 2, 3},
                    SomeStuff = new D {Id = 42}
                };
            Console.WriteLine(proxy.GetData(request));
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:38:53.637

您是否有默认构造函数，因为如果没有，WCF 将无法理解它。

此外 -`ref int[] array`数组无论如何都作为引用类型传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T20:45:13.373

在将一些参数分组到 DataContract 类后，我遇到了同样的问题。

我实际上有两个客户端，一个使用与服务器共享的接口程序集工作得很好。使用 ServiceContract 和 DataContract 的代码副本的另一个客户端无法正常工作，并且我的 DataContract 参数服务器端的所有成员都是 0 或 null，如上所述。

问题似乎是由于我将 DataContract 放入客户端的命名空间。我负责将我的 DataContract 放在与来自主客户端程序集的名称空间相同的名称空间中，这解决了我的问题。事实上，除了回调类之外，我将所有合约类都放在同一个命名空间中。所以也许这不仅仅是 DataContract 的问题。虽然在不使用 DataContract 时工作正常，但我想这是唯一导致问题的原因。

希望这是有道理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:05:22.043

感谢您的所有帮助和回复。最后，我解决了这个问题。一旦我将 D 放在它自己的程序集中并从服务和客户端都引用它，它就开始工作了。

# javascript - Backbone.js 中的事件

> ID：14956379
> 
> 赞同：0
> 
> 时间：2013-02-19T11:29:12.730
> 
> 标签：javascript, backbone.js

你能帮忙处理点击事件吗？这是我的代码。

```
$(function() {
            var Trainee = Backbone.Model.extend();

            var TraineeColl = Backbone.Collection.extend({
                model: Trainee,
                url: 'name.json'
            });

            var TraineeView = Backbone.View.extend({
                el: "#area",
                template: _.template($('#areaTemplate').html()),

                render: function() {
                        this.model.each(function(trainee){
                        var areaTemplate = this.template(trainee.toJSON());
                        $(this.el).append(areaTemplate);
                    },this);

                    return this;
                }
            });

            var trainee = new TraineeColl();
            var traineeView = new TraineeView({model: trainee});
            trainee.fetch();
            trainee.bind('reset', function () {
                traineeView.render();
            });

        }); 
```

我的 o/p after(trainee.toJSON) 是

```
Sinduja 
E808514 
HPS 

Shalini 
E808130 
HBS 

Priya 
E808515 
HSG 
```

o / p一切都很好......现在我想在点击按钮后得到这个o / p oly......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:43:46.963

只需向该按钮添加一个事件。由于您使用的是 jQuery，这应该很简单：

```
$(function () {
    $("#your_button_id").on("click", function (e) {
        e.preventDefault();
        // your code here 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:44:45.860

没看懂o/p是什么...

无论如何，你可以做这样的事情：

```
trainee.bind('reset', function () {
     $('button').click(function() {
           traineeView.render();
     });
}); 
```

为您的按钮使用正确的 jQuery 选择器 $('button') ...

# php - Symfony2 Timestable 特征：“列‘createdAt’不能为空”

> ID：14956381
> 
> 赞同：5
> 
> 时间：2013-02-19T11:29:26.727
> 
> 标签：php, symfony, doctrine-orm, traits

我有一个具有正确导入的非常标准的实体：

```
/**
 * Budhaz\aMailerBundle\Entity\Instance
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Instance {
    use TimestampableEntity;

    /** @ORM\Id @ORM\GeneratedValue @ORM\Column(type="integer") */
    private $id;
...
} 
```

但是我想从我的表单中删除 createdAt （和 updatedAt），这样用户就不能也不能设置它们，所以我从 InstanceForm 中删除它：

```
class InstanceType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('startAt')
            ->add('endAt')
            //->add('createdAt')
            //->add('updatedAt')
            ->add('campaign')
        ;
    }
...
} 
```

但现在我有这个错误：

> SQLSTATE [23000]：违反完整性约束：1048 列“createdAt”不能为空

createdAt 和 updatedAt 应该由 Doctrine 自动设置，但它保持为空，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T11:34:32.533

您必须手动设置类中的值。然后你可以告诉教义在每次更新之前设置新值：

```
public function __construct() {
    $this->setCreatedAt(new \DateTime());
    $this->setUpdatedAt(new \DateTime());
}

/**
 * @ORM\PreUpdate
 */
public function setUpdatedAtValue() {
    $this->setUpdatedAt(new \DateTime());
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-12-03T13:47:15.483

# 应用程序/配置/config.yml

```
stof_doctrine_extensions:
   orm:
      default:
          timestampable: true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-08T15:21:10.660

您需要检查捆绑包是否已安装。如果没有，请运行： `composer require stof/doctrine-extensions-bundle`

它应该创建文件：`app/config/packages/stof_doctrine_extensions.yaml`内容：

```
stof_doctrine_extensions:
    default_locale: en_US
    orm:
        default:
            timestampable: true 
```

# sitecore - 如何使用 Sitecore 构建站点地图

> ID：14956383
> 
> 赞同：6
> 
> 时间：2013-02-19T11:29:34.907
> 
> 标签：sitecore

我需要为 Sitecore 网站创建站点地图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T11:38:36.353

如果您想要一个站点地图页面来列出您网站上的页面，您应该尝试共享源模块“站点地图”。 [http://marketplace.sitecore.net/en/Modules/Sitemap.aspx](http://marketplace.sitecore.net/en/Modules/Sitemap.aspx)

但是，如果您正在使用站点地图进行搜索引擎优化，请使用站点地图 XML。 [http://marketplace.sitecore.net/en/Modules/Sitemap_XML.aspx](http://marketplace.sitecore.net/en/Modules/Sitemap_XML.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T11:39:46.550

这取决于您需要什么作为站点地图。您想要一个发送到 Google 的 XML 站点地图吗？或者您想要一个显示您网站结构的站点地图？

我建议查看 Sitecore 市场 ( [http://marketplace.sitecore.net/SearchResults#query=sitemap](http://marketplace.sitecore.net/SearchResults#query=sitemap) )，可能下载源代码以查看它是如何完成的。我认为两者都有一个例子。

否则，您也可以创建自己的，但我们需要更多信息 - 您想用 XSLT 编写还是使用 C# 等代码隐藏？

# database - 至少有一种情况需要空主键。如何处理这种特殊情况？

> ID：14956386
> 
> 赞同：0
> 
> 时间：2013-02-19T11:29:40.080
> 
> 标签：database, primary-key

我有一个表 SCHOOL_PARENT 和一个表 SCHOOL_CHILD。SCHOOL_CHILD 表包含一个子 ID 和一个父 ID，它们共同构成主键。这是因为一个孩子可以有两个父母（妈妈和爸爸，因此是 2 行）。

然后存在没有任何父母的孩子的情况。但我不能插入这一行，因为表 SCHOOL_CHILD 不接受 NULL 父级，它是主键的一部分。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:39:45.557

不确定我是否正确理解了这个问题，但我认为您的数据模型类似于：

```
Table: Parent
------------
ParentID (PK)
Name
....

Table: Child
------------
ChildID (PK)
Name
....

Table: Parent_Child
----------------
ParentID (PK)
ChildID (PK) 
```

孩子和父母之间是多对多的关系；您通常在“桥接”表中对此进行建模。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:12:08.303

```
Table: SCHOOL_PARENT 
------------
ParentID (PK)
Name
....

Table: SCHOOL_CHILD
------------
ChildID (PK)
MotherID (FK)
FatherID (FK)
Name
.... 
```

FatherID 和 MotherID 可以为空。

# cakephp - CakePHP：一个行为如何使用插件的行为功能？

> ID：14956388
> 
> 赞同：1
> 
> 时间：2013-02-19T11:29:49.870
> 
> 标签：cakephp, plugins, cakephp-2.0, behavior

我有两种情况。

场景一：

在我的 APP/Model/Behavior 中编写的 ProcessableBehavior 需要在插件中另一个名为 Queryable 的 Behavior 中使用一个函数。

如何从 ProcessableBehavior 内部调用 Queryable.Queryable 函数 doSomething？

场景二：

如果我编写了一个现在包含 ProcessableBehavior 的 Plugin Processable 并且此 Behavior 取决于 Queryable.Queryable 函数 doSomething，我该如何进行调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:55:18.937

Inside behaviors you can always invoke model methods. Since behaviors attached behave like those, you should be able to call them as they were part of the model.

```
// behavior 1
public function myFirstBehaviorMethod(Model $Model) {
    // do sth
} 
```

And

```
// behavior 2
public function mySecondBehaviorMethod(Model $Model) {
     $Model->myFirstBehaviorMethod($foo, $bar);
} 
```

The basic idea is that they don't necessarily have to know about it other. You just assume that they are part of the model (as behaviors enrich the functionality of models).

Note that you don't have to pass the $Model object, as it will internally use $Model.

Make sure you attach/load them in the right order. If one depends on the other you could check on it in setup() etc:

```
// throw exception if not available
if (!$Model->Behaviors->attached('Queryable') {} 
```

# javascript - 使用 jquery 更改 embed src 的值

> ID：14956389
> 
> 赞同：-1
> 
> 时间：2013-02-19T11:29:51.133
> 
> 标签：javascript, jquery

我有以下场景..

当用户访问我的网站时，我会向用户展示一些来自服务器的音频文件。当用户单击一个链接时，最终会执行 jquery 函数并将嵌入对象的源更改为所选文件。

代码在此[链接](https://stackoverflow.com/questions/14955301/how-to-change-object-embed-source-via-jquery)中给出。我得到了这个问题的一些答案，但问题没有解决。

发生在我身上的是，当我点击链接时。歌曲在新页面播放。我需要在`div`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:38:55.787

试试这个：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
  $(function(){
    $(document).on('click', "#song", function(e){
      e.preventDefault(); //<----------stops to navigate to link
      var musicSrc = $(this).attr('href');
      $('#music').find('embed').attr('src', musicSrc);
    });
  });
</script> 
```

## 笔记：

确保首先加载 jQuery 库：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:39:15.677

当然，它不起作用。该事件应在页面加载后添加。使用 jquery，它看起来像这样：

```
<script type="text/javascript">
$(function () {
    $(".song").click(function(e) {
        $('#mplayer').attr('src', $(this).attr('href'));
        e.preventDefault();
    });
});
</script> 
```

# jquery - Jquery - 如何将事件处理程序从嵌入式 iframe 注入到父 DOM 元素中

> ID：14956390
> 
> 赞同：0
> 
> 时间：2013-02-19T11:29:52.060
> 
> 标签：jquery

jquery 新手并试图让注入工作。任何帮助表示赞赏。

我有一个嵌入到父页面中的 iframe。从 iframe（我在其中实例化 jquery）中，我希望向该父页面中 class = "btn" 的所有 DOM 元素注入一个 'onmouseover' 事件处理程序。所有这些元素都位于 id = "contentWrapper" 的顶级容器 div 中的 div 级别

我假设它会类似于以下内容，但任何提示都非常欢迎为我指明正确的方向。

```
// am assuming I can see <div id='contentWrapper'> element in parent frame from within the iframe
// not sure where to place the 'btn' class reference.

$('contentWrapper').on('onmouseover', function(event){ 
     // some activity here 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:32:56.207

尝试这个

```
 parent.find('#contentWrapper .btn').on('onmouseover', function(event){ 
 // some activity here 
}); 
```

# xmppframework - xmppframework: iPhoneXMPP: RootController 没有更新朋友的存在

> ID：14956393
> 
> 赞同：0
> 
> 时间：2013-02-19T11:29:55.423
> 
> 标签：xmppframework

我尝试了 iPhoneXMPP 演示，但是当我的朋友在线或离线时，GUI 似乎没有更新。我修改了 nsfetchresultcontroller 只显示在线朋友：

```
...
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"sectionNum == 0"]];
... 
```

在 xcode 的控制台中，它显示它确实收到了我朋友的存在。但我看到 controllerDidChangeContent: 根本没有被调用。（实际上，我看到它有时被调用，但随机且很少）。

当我更深入地调试时，我看到 XMPPRosterCoreDataStorage handlePresence:xmppStream 被调用，然后 managedObjectContextDidSave:notification 也被调用。所以一切似乎都是正确的。但是 resultfetchcontroller 并没有看到变化。

那么问题是什么？是不是我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:20:31.257

我刚刚测试了你的谓词：它工作得很好。

您是否正确初始化了 NSFetchedResultsController？您需要传递 XMPPRosterCoreDataStorage 的 NSManagedObjectContext。

# spring-mvc - FreemarkerConfigurer 中的 Freemarker WebappTemplateLoader

> ID：14956396
> 
> 赞同：0
> 
> 时间：2013-02-19T11:30:00.313
> 
> 标签：spring-mvc, freemarker

任何人都有关于如何在 FreemarkerConfigurer 中使用 Freemarker WebappTemplateLoader 的示例？

我将 Freemarker 与 Spring MVC 一起使用并扩展 FreeMarkerConfigurer 以添加各种模板加载器，我还想添加一个 Web 应用程序加载器以在 Web 应用程序上下文中加载模板。但我不知道如何为其构造函数获取 servletcontext 参数。

```
public class DesktopFreeMarkerConfigurer extends FreeMarkerConfigurer{  

@Override
protected void postProcessConfiguration(Configuration config){
    [...]
        /* Get templates from the webapp/servlet context */
    WebappTemplateLoader watl = new WebappTemplateLoader(<servletContext>, "default/ftl/");
    [...]
    }
} 
```

我想将 webapp/default/ftl 添加到模板加载路径，但由于它可能是动态/可配置的，我无法在 xml 文件中对其进行硬编码。

任何建议将不胜感激。

谢谢卡门

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:39:37.323

我假设您将 DesktopFreeMarkerConfigurer 定义为 spring bean。在这种情况下，获取 servlet 上下文应该很简单。只需在 DesktopFreeMarkerConfigurer 类中定义它：

```
@Autowired private ServletContext context; 
```

或者，如果您选择，您也可以使其实现 ServletContextAware ：

```
public class DesktopFreeMarkerConfigurer extends FreeMarkerConfigurer implements ServletContextAware {
    private ServletContext servletContext;

    public void setServletContext(ServletContext servletContext) {
        this.servletContext = servletContext;
    }

    @Override
    protected void postProcessConfiguration(Configuration config){
        WebappTemplateLoader watl = new WebappTemplateLoader(this.servletContext, "default/ftl/");
        ...
    }

    ...
} 
```

# java - Java：系统托盘中的 Outlook 类型通知

> ID：14956400
> 
> 赞同：0
> 
> 时间：2013-02-19T11:30:06.877
> 
> 标签：java

我正在创建一个后台实用程序，它在系统托盘中显示 Outlook 类型的警报。我已经能够通过使用“java.awt.TrayIcon”和“java.awt.SysTray”来实现这一点。现在我想扩展它以在系统托盘中显示一个未经检查的通知图标，就像您在 Outlook 中收到一封电子邮件并且如果您没有检查它，那里会显示一个邮件图标。

有没有办法在java中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:58:54.677

以下代码在系统托盘上创建一个图标。

```
class Test {

Image i;

public void popNotification(){
    i = Toolkit.getDefaultToolkit().getImage("C:\\My Documents\\icon.jpg");
    SystemTray st = SystemTray.getSystemTray();
    TrayIcon trayIcon = new TrayIcon(i, "You've got an unread message.");

        try {
            st.add(trayIcon);
        } catch (AWTException e) {
            e.printStackTrace();
        }
    }
}

public class TestTrayIcon {
    public static void main(String[] args){
        Test test = new Test();
        test.popNotification();
    }
} 
```

你也可以给trayIcon添加一个eventListener，当你点击它时最大化应用程序窗口，就像outlook一样。代码在这里：[http ://docs.oracle.com/javase/6/docs/api/java/awt/SystemTray.html](http://docs.oracle.com/javase/6/docs/api/java/awt/SystemTray.html)

# windows - 关闭 CreateProcess 产生的子进程

> ID：14956402
> 
> 赞同：0
> 
> 时间：2013-02-19T11:30:20.413
> 
> 标签：windows, winapi, process, subprocess, createprocess

我正在使用*CreateProcess*来运行我的进程/应用程序。目的是运行它，做一些事情，等待一些指示，然后关闭它（使用*TerminateProcess*）。

我注意到的是这个应用程序/进程创建了子进程。另外，当终止创建的进程时，子进程**不会**终止，仍然会保留一段时间。

我想问是否可以选择以某种方式用主进程杀死所有子进程。它会导致问题，因为当我再次执行*CreateProcess*时，之前的进程会产生剩余物，我认为它们会导致一些问题。

我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:37:35.643

使用 Windows[作业对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684161%28v=vs.85%29.aspx)。作业就像流程组；一旦作业负责人（您的初始进程）终止，操作系统将负责终止作业中的所有进程。即使过程领导者崩溃，这也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:39:48.553

*当您使用CreateProcess*创建进程时，您将获得一个**LPPROCESS_INFORMATION**指针。它包含进程句柄。您需要手动关闭进程，因为没有像 Linux/Unix 中那样的进程层次结构。

有关CreateProcess的[信息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684873%28v=vs.85%29.aspx)，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)，有关**PROCESS_INFORMATION** -结构的信息请参见此处。

# python - python中的递归公式用于递归西格玛如何？

> ID：14956404
> 
> 赞同：0
> 
> 时间：2013-02-19T11:30:27.207
> 
> 标签：python, recursion, sum

我最近问了[这个](https://math.stackexchange.com/questions/307906/ways-to-add-up-10-numbers-between-1-and-12-to-get-70-where-order-is-unimportant/307928#307928)问题并得到了第一个答案。我正在尝试将其放入 python 代码中。这就是我所拥有的，但我一直得到 0 作为答案。

```
def f(n, k, s):
    ans = 0
    for j in range(1, min({k,s}) + 1):
        print j
        if (n == 1):
            if (k >= s):
                ans = ans + 1
            elif (k < s):
                ans = ans + 0
            elif (s > n):
                ans = ans + 0
        elif (n*k < s):
            ans = ans + 0
        else:
            ans = ans + f(n-1,j,s-j)
    return ans

print f(10, 12, 70) 
```

我的代码有什么问题？我需要改变什么？我不知道怎么了。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T11:39:59.173

你的代码太复杂了。你可以写一个几乎一对一的转录你在数学交流中得到的答案：

```
def f(n, k, s):
    if n == 1:
        return int(k >= s)
        # or: 1 if k >=s else 0 
    return sum(f(n-1, j, s-j) for j in range(1, min(k, s)+1))
    # to make it faster:
    #return sum(f(n-1, j, s-j) for j in range(1, min(k, s)+1) if n*k >= s) 
```

您的代码中的问题是您将基本情况检查放在循环内部，而它应该在外部：

```
def f(n, k, s):
    ans = 0
    if n == 1:
        return int(k >= s)

    for j in range(1, min({k,s}) + 1):
        print j
        if n*k >= s:
            ans += f(n-1,j,s-j)
    return ans 
```

通过这两种实现，我得到 12660 作为`f(10, 12, 70)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:46:08.830

我不知道为什么你的不起作用，但这里有一个实现，IMO 更具可读性：

```
from itertools import permutations

def f(n, k, s):

    if k > s:
        k = s-1

    count = 0
    sum_perms = []

    number_list = []
    for i in range(1,k):
        for j in range(1,k,i):
            number_list.append(i)

    for perm in permutations(number_list, n):
        if sum(perm) == s and perm not in sum_perms:
            sum_perms.append(perm[:])
            count += 1

    return sum_perms, count 
```

虽然它比递归技术慢*很多:-(*

`itertools`是惊人的。

# iphone - 用 AVPlayer 播放下载的视频数据？

> ID：14956405
> 
> 赞同：4
> 
> 时间：2013-02-19T11:30:34.227
> 
> 标签：iphone, ios, objective-c, afnetworking, avplayer

我正在尝试从服务器下载视频，将其存储，然后使用`AVPlayer`. 到目前为止，我所拥有的是：

1.  我`AFNetworking`用来下载视频数据并将其存储`NSData`在我`NSDictionary`的资源中
2.  我创建了我`TargetOverlayView`的显示资源内容（图像、文本、播放音频和...视频 - 希望很快）
3.  当谈到显示视频时，我写了方法：

    ```
    (void)playVideo:(NSData*)video{
        NSLog(@"TargetOverlayView: playVideo");
        if (!video) {
            NSLog(@"TargetOV: nothing to play");
            [vPlayerLayer removeFromSuperlayer];
            vPlayerLayer = nil;
            vPlayer = nil;
            return;
        }
        //save nsdata into file
        NSLog(@"{SAVE} saving video data into file...");
        NSFileManager *fileManager = [NSFileManager defaultManager];            
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);             
        NSString *documentsDirectory = [paths objectAtIndex:0]; 
        NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"video.3gp"]];
        [fileManager createFileAtPath:filePath contents:video attributes:nil];
        AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:[NSURL URLWithString:@"http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8"]];
        vPlayer = [[AVPlayer alloc] initWithPlayerItem:playerItem];//[AVPlayer playerWithPlayerItem:playerItem];
        vPlayerLayer = [[AVPlayerLayer alloc] init];//[AVPlayerLayer playerLayerWithPlayer:vPlayer];
        vPlayerLayer.player = vPlayer;
        [vPlayerLayer setFrame:self.frame];
        [vPlayerLayer setBackgroundColor:[[UIColor purpleColor] CGColor]];
        [self.layer addSublayer:vPlayerLayer];
        [vPlayer addObserver:self forKeyPath:@"status" options:0 context:NULL];
    } 
    ```

我还添加了观察者，所以我知道什么时候播放它：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
if ([keyPath isEqualToString:@"status"]) {
    if (vPlayer.status == AVPlayerStatusReadyToPlay) {
        NSLog(@"video ready!");
        [vPlayer play];
    } else if (vPlayer.status == AVPlayerStatusFailed) {
        NSLog(@"vide faield: %@", [vPlayer.error localizedDescription]);
    }
} 
```

}

我希望我可以从服务器下载 mp4 和 3gp 视频并播放它们，但只有当我给出这个：[http](http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8) ://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8 Apple 给出的链接它工作......我无法播放下载的 3gp 数据`filepath`（是否可以播放 3gp 或其他格式？）。有没有办法播放下载的视频？我不需要流媒体（至少现在不需要）。非常感谢每一个帮助。

编辑：我将有关制作文件的内容更改为：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDir = [paths objectAtIndex:0];
NSString *filePath = [docDir stringByAppendingPathComponent:@"video.mp4"];
[video writeToFile:filePath atomically:YES]; 
```

仍然无法正常工作...

EDIT2：我在服务器上输入了此文件的链接 - 然后它工作（仅适用于 mp4），但我需要下载数据并从中播放视频，而不仅仅是链接到资源......

# uniqueidentifier - 基于 CPU 标志的唯一计算机 ID

> ID：14956407
> 
> 赞同：2
> 
> 时间：2013-02-19T11:30:39.887
> 
> 标签：uniqueidentifier, bios, license-key, cpuid

我需要使用唯一的计算机 ID 来获得软件许可。我决定使用 CPU 标志。在 MSVC 上，它们使用函数 __cpuid 进行检索，而在 gcc 版本 4.3 及更高版本中使用函数 __get_cpuid。我从这些函数中得到一个整数，它是一种位数组，目的是用作唯一 ID。

我不确定使用上述函数检索到的 CPU 标志是否会改变？用户可以通过编程方式更改这些标志吗？如果不是通过常规应用程序可能通过 BIOS？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:23:36.187

不，最终用户无法更改它们，因为您列出的每个命令本质上`cpuid`都是英特尔（和英特尔克隆）芯片中提供的实际处理器操作码的包装器。

因此，这些信息被“烧录”到硅片中。没有用户可以更改它。

以下资源可能会有所帮助：

1)[维基百科的文章`CPUID`](http://en.wikipedia.org/wiki/CPUID)

2 [) 关于使用 CPUID 调用访问处理器信息的代码大师文章（2 页）](http://www.codeguru.com/cpp/w-p/system/hardwareinformation/article.php/c9087/Three-Ways-to-Retrieve-Processor-Information.htm#page-1)

3)[按步进、系列和型号列出许多处理器的表格](http://www.jackcobben.nl/?p=2013&cpage=1#comment-4142)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T23:59:10.343

好的，经过一些测试，我可以确认 Info Type 1 的第二个字节的标志正在改变。因此，我将仅使用 Stepping ID、Model、Family 和 Processor Type 值。

# javascript - swipeJS - 使用锚链接的错误

> ID：14956410
> 
> 赞同：0
> 
> 时间：2013-02-19T11:31:03.387
> 
> 标签：javascript, jquery, anchor, swipe

我试图搜索谷歌并阅读 SwipeJS 的 Github 上几乎所有的问题和问题，但我真的找不到任何解决我的问题的方法。

**滑动JS：**

[https://github.com/bradbirdsall/Swipe](https://github.com/bradbirdsall/Swipe)

**问题：**

我正在尝试使用锚链接直接跳转到 SwipeJS 内容滑块中的特定幻灯片。(href="#thirdslide")

这可行，但问题是 SwipeJS 现在将新幻灯片视为第一张幻灯片，并且 .prev() 函数不允许我返回。.next() 函数有效，但不断进入空白幻灯片。

有谁知道我该如何解决这个问题（简单）？我对使用 Javascript 编程比较陌生，所以如果这是一个愚蠢的问题，请原谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:39:33.310

```
(function() {
    // when you click the link w/ a class of 'linkage'
    $('.linkage').click(function() {
        // scroll to the DIV w/ an ID of 'three'
        $.scrollTo( '#three', 800, {easing:'swing'} );
        // highlight the DIV using jQuery UI effect
        $('#three').effect('highlight', {}, 3000);
    });
}); 
```

给出一个 scrollTto 不存在的错误。删除它并将其用作按钮

```
<a href="#" class="linkage" onclick="slider.slide(3, 100)return false;">Linkage</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:08:29.563

没关系，我在 onclick 事件上有一个愚蠢的错字。奇迹般有效。

```
 <li><a href="#" onclick='slider.slide(1,300);return false;'>2002</a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:58:46.130

我实际上有同样的问题。

我正在使用相同的脚本，我试图从一些锚链接链接到特定的幻灯片。

有人可以发布指向工作演示或 JSFiddle 的链接吗？

将不胜感激。

我的 HTML 是

```
 <div id="timeline">
            <ul id="dates">
         <li class="on">2000</li>
    <li><a href='#'>2002</a></li>

    </ul>

    <div class="swipe" id="slider">
        <ul class="swipe-wrap" id="issues">
            <li class="slide1" id="2000">
                <h1>2000</h1>

                <p>Donec semper quam scelerisque tortor dictum gravida. In
                hac habitasse platea dictumst. Nam pulvinar, odio sed
                rhoncus suscipit, sem diam ultrices mauris, eu consequat
                purus metus eu velit. Proin metus odio, aliquam eget
                molestie nec, gravida ut sapien. Phasellus quis est sed
                turpis sollicitudin venenatis sed eu odio. Praesent eget
                neque eu eros interdum malesuada non vel leo. Sed fringilla
                porta ligula.</p>
            </li>

            <li class="slide2" id="2002">
                <h1>2002</h1>

                <p>Donec semper quam scelerisque tortor dictum gravida. In
                hac habitasse platea dictumst. Nam pulvinar, odio sed
                rhoncus suscipit, sem diam ultrices mauris, eu consequat
                purus metus eu velit. Proin metus odio, aliquam eget
                molestie nec, gravida ut sapien. Phasellus quis est sed
                turpis sollicitudin venenatis sed eu odio. Praesent eget
                neque eu eros interdum malesuada non vel leo. Sed fringilla
                porta ligula.</p>
            </li>

            <li id="three">
                <h1>2005</h1>

                <p>Donec semper quam scelerisque tortor dictum gravida. In
                hac habitasse platea dictumst. Nam pulvinar, odio sed
                rhoncus suscipit, sem diam ultrices mauris, eu consequat
                purus metus eu velit. Proin metus odio, aliquam eget
                molestie nec, gravida ut sapien. Phasellus quis est sed
                turpis sollicitudin venenatis sed eu odio. Praesent eget
                neque eu eros interdum malesuada non vel leo. Sed fringilla
                porta ligula.</p>
            </li>
        </ul>
       </div>
     </div> 
```

# ruby-on-rails - 从 Rails 中的 2 个 has_many 关系获取唯一 ID

> ID：14956411
> 
> 赞同：0
> 
> 时间：2013-02-19T11:31:07.673
> 
> 标签：ruby-on-rails, has-many, relation, has-and-belongs-to-many

我找不到从这种关系中获取点域 id 的简单方法

```
pointtype has_and_belongs_to_many pointfields 
pointfield has_and_belongs_to_many pointtypes 
```

我执行以下操作：

```
@pointtypes = current_project.points.map{|p| p.pointtype}.uniq
@pointtypes = @pointtypes - [nil]                      # tricky... Is this Railsy ?
@pointfield_ids = @pointtypes.map(&:pointfield_ids) 
```

返回

```
 [[16, 17, 18, 23, 24, 25, 26, 27, 28, 29], [16, 17, 32, 33, 34, 35, 36]] 
```

因此

```
@pointfield_ids.uniq! 
```

不工作，因为有两个子阵列......

我需要的是获得一个具有点域（或对象本身）的唯一 ID 的数组

# javascript - Ivy、JavaScript 部门或使用 jarred javascript

> ID：14956414
> 
> 赞同：2
> 
> 时间：2013-02-19T11:31:19.330
> 
> 标签：javascript, ivy

我已经开始使用 Ivy 来管理我的依赖项，现在我想使用 Ivy 解决诸如 jQuery 和其他常见 JavaScript 库之类的问题。

然而，我能得到的最好的东西，比如说，jQuery 是一个包含许多文件夹的 jar，以及 jQuery 的两个变体（正常和最小化）。

就我而言，最好的选择是什么？是否可以使用 Ivy 仅获取 jquery.min.js ？或者我应该添加一些目标来解压缩获取的 jar 并只使用我需要的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:39:03.987

最简单的解决方案是使用 ivy 的[url 解析器](http://ant.apache.org/ivy/history/latest-milestone/resolver/url.html)直接检索 javascript 文件（参见下面的示例）。

更完整（和复杂）的解决方案是使用[打包程序解析器](http://ant.apache.org/ivy/history/latest-milestone/resolver/packager.html)或设置存储库来托管您需要的文件。

# 例子

```
├── build.xml
├── ivysettings.xml
├── ivy.xml
└── build
    └── js
        ├── jquery.js
        ├── jquery-min.js
        ├── jquery-migrate.js
        └── jquery-migrate-min.js 
```

## 构建.xml

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve">
        <ivy:resolve/>
    </target>

    <target name="build" depends="resolve">
        <ivy:retrieve pattern="build/js/[artifact](-[classifier]).[ext]" conf="javascript"/>
    </target>

    <target name="clean">
        <delete dir="build"/>
    </target>

    <target name="clean-all" depends="clean">
        <ivy:cleancache/>
    </target>

</project> 
```

笔记：

*   ivy 检索任务使用配置。这使您能够将工件放置在构建中的不同位置。

## 常春藤.xml

```
<ivy-module version="2.0" xmlns:e="http://ant.apache.org/ivy/extra">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="javascript" description="JS dependencies"/>
    </configurations>

    <dependencies>
        <dependency org="com.jquery" name="jquery" rev="1.9.1" conf="javascript->default">
            <artifact name="jquery" type="js"/>
            <artifact name="jquery" type="js" e:classifier="min"/>
        </dependency>

        <dependency org="com.jquery" name="jquery-migrate" rev="1.1.1" conf="javascript->default">
            <artifact name="jquery-migrate" type="js"/>
            <artifact name="jquery-migrate" type="js" e:classifier="min"/>
        </dependency>
    </dependencies>

</ivy-module> 
```

笔记：

*   远程模块没有常春藤文件。这会强制您指定要检索的工件。
*   此示例使用[额外的属性](http://ant.apache.org/ivy/history/2.1.0/concept.html#extra)来指示缩小的文件。
*   Javascript 依赖项映射到“javascript”配置（请参阅构建文件中“检索”任务的使用）。

## 常春藤设置.xml

```
<ivysettings>
    <settings defaultResolver="central"/>
    <resolvers>
        <ibiblio name="central" m2compatible="true"/>
        <url name="jquery">
            <artifact pattern="http://code.jquery.com/[artifact]-[revision](.[classifier]).[ext]"/>
        </url>
    </resolvers>
    <modules>
        <module organisation="com.jquery" resolver="jquery"/>
    </modules>
</ivysettings> 
```

笔记：

*   默认存储库是 Maven Central。jquery 模块映射到它的匹配 url 解析器。
*   URL 中使用了可选[的额外属性](http://ant.apache.org/ivy/history/2.1.0/concept.html#extra)

# linux - 主从 Memcache 复制

> ID：14956420
> 
> 赞同：0
> 
> 时间：2013-02-19T11:31:42.623
> 
> 标签：linux, caching, memcached, replication

设想 ：

我们的架构基于 memcached，随着用户群数量的增加，我们需要将缓存复制到多个服务器。

我们可以使用 repcached 实用程序轻松地在两台服务器之间进行复制。

我们希望以这样一种方式对 memcached 进行负载平衡，使其可以在我们在代码中定义的分片上工作。

这里的问题是我们如何复制到多个服务器。

我们已经更改了复制的对等端口，但我们仍然无法复制密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T10:43:01.437

据我一直在阅读，memcached-repcached 只能进行 2 节点复制设置。其他一些选项： [可以持久保存到磁盘的 memcached 的替代方案](https://stackoverflow.com/questions/1316852/alternative-to-memcached-that-can-persist-to-disk)

祝你好运！

# .net - 按优先顺序折叠窗口上的 WPF 面板

> ID：14956423
> 
> 赞同：0
> 
> 时间：2013-02-19T11:31:49.680
> 
> 标签：.net, wpf, window, collapse

我有 3 个面板水平排列在一个窗口上。当窗口宽度减小时，我希望中间的宽度首先减小（而外面的两个保持宽度），然后最右边的折叠，然后是最左边的。如何在 WPF 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:50:33.187

[DockPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.dockpanel.aspx)似乎可以满足您的需求。

```
<DockPanel>
    <Grid DockPanel.Dock="Left">
        <Label Content="Left Column" BorderBrush="Red" BorderThickness="4"/>
    </Grid>
    <Grid DockPanel.Dock="Right">
        <Label Content="Right Column" BorderBrush="Blue" BorderThickness="4"/>
    </Grid>
    <Grid>
        <Label Content="Middle Column" BorderBrush="Green" BorderThickness="4"/>
    </Grid>
</DockPanel> 
```

# .net - 如何通过 PowerShell 列出按开始时间排序的正在运行的 Windows 服务？

> ID：14956425
> 
> 赞同：-2
> 
> 时间：2013-02-19T11:31:53.010
> 
> 标签：.net, windows, powershell, service

如何使用 Powershell 将所有正在运行的服务列为按开始时间降序排列的列表？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:34:24.657

你试过什么？[`Get-Service`](http://technet.microsoft.com/en-us/library/ee176858.aspx)使用and应该走得很远[`Sort-Object`](http://technet.microsoft.com/en-us/library/ee176968.aspx)。

编辑：`Get-Service`不做开始时间，但有一个[解决方法](http://techibee.com/powershell/powershell-query-windows-service-start-time/1336)：

```
[cmdletbinding()]            

param (
 [parameter(ValueFromPipeline=$true,ValueFromPipelineByPropertyName=$true)]
 [string[]]$ComputerName = $env:computername,            

 [ValidateNotNullOrEmpty()]
 [Alias("ServiceName")]
 [string]$Name            

)            

begin{}            

Process {            

 foreach ($Computer in $ComputerName) {
  if(Test-Connection -ComputerName $Computer -Count 1 -ea 0) {
   Write-Verbose "$Computer is online"
   $Service = Get-WmiObject -Class Win32_Service -ComputerName $Computer -Filter "Name='$Name'" -ea 0
   if($Service) {
    $ServicePID = $Service.ProcessID
    $ProcessInfo = Get-WmiObject -Class Win32_Process -ComputerName $Computer -Filter "ProcessID='$ServicePID'" -ea 0
    $OutputObj  = New-Object -Type PSObject
    $OutputObj | Add-Member -MemberType NoteProperty -Name ComputerName -Value $Computer.ToUpper()
    $OutputObj | Add-Member -MemberType NoteProperty -Name Name -Value $Name
    $OutputObj | Add-Member -MemberType NoteProperty -Name DisplayName -Value $Service.DisplayName
    $OutputObj | Add-Member -MemberType NoteProperty -Name StartTime -Value $($Service.ConvertToDateTime($ProcessInfo.CreationDate))
    $OutputObj
   } else {
    write-verbose "Service `($Name`) not found on $Computer"
   }
  } else {
   write-Verbose "$Computer is offline"
  }
 }            

}            

end {} 
```

# c++ - 使用命名空间别名而不是预处理器的好处

> ID：14956433
> 
> 赞同：0
> 
> 时间：2013-02-19T11:32:12.863
> 
> 标签：c++, namespaces, c-preprocessor

`namespace alias`over有什么好处`#define`？

```
namespace NS1{
    namespace NS2 {
        namespace NS3
        {
            void fun() {
                std::cout << "Understanding namespace alias\n";
            }
        }
    }
}

#define NS NS1::NS2::NS3
//over
namespace NS=NS1::NS2::NS3; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:35:16.083

使用别名时，编译器会知道 NS 符号，而使用宏时，它会在找到字符串时替换字符串。因此，如果您碰巧有一个名为 NS 的局部变量，它将用 NS1::NS2::NS3 替换它，这几乎不是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T11:41:37.753

为了扩展 daramarak 所说的内容，命名空间别名将尊重*语法*和*语义*；`#define`不会。命名空间别名只会在编译器遇到类似`NS::func()`的东西时才会启动，`#define`另一方面是一个完全生硬的工具，也会识别和破坏像`NS()`or `int NS=7`or，even,这样的语句`namespace NS=NS1::NS2::NS3`。而且，相信我，当它确实破坏它时，你会得到完全混乱的错误消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T12:18:41.007

> 命名空间别名相对于#define 有什么好处？

定义的一般缺点在这里适用：预处理器在编译之前替换源代码，这会导致一些（或大或小）问题：

*   尝试`NS::fun`在调试器中使用会导致调试器告诉您没有 NS 命名空间（因为编译器从未真正看到该符号）。

*   由命名空间内的实体引起的错误消息，将产生带有在源代码中根本找不到的标记的错误消息（无论您如何搜索），除非您知道（在您的客户端代码中）您没有查看命名空间，但是在一个看起来像命名空间的定义中。

此外，`#define`-d 符号不属于命名空间。这意味着一旦你`#define NS`，你将无法在你的源代码中的任何其他地方有一个 NS 符号（因为你的预编译器会在不说任何内容的情况下播放 switcheroo）。这意味着你不能说：

```
namespace client_code // namespace where NS should not be visible
{
    int NS = 0; // compiler tries to compile "int NS1::NS2::NS3 = 0;",
                // knowing that NS3 is a namespace
} 
```

如果客户端代码是您自己的，那不是问题，因为您可以简单地避免使用该名称（尽管您没有理由必须这样做）。

如果您正在编写任何其他人将使用的头文件/库，至少您应该提供一个已知限制列表，您说“客户端代码不能使用这些和这些名称”。

# regex - 如何使用正则表达式排除除 Atomiq 中的一个文件之外的所有文件

> ID：14956437
> 
> 赞同：0
> 
> 时间：2013-02-19T11:32:17.113
> 
> 标签：regex

我正在尝试使用[Atomiq](http://www.getatomiq.com/)工具仅检查**一个**文件中的重复代码。但是，只有一个正则表达式排除选项。

我尝试使用 .*(?!filename) 排除所有不起作用的负面结果。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:43:01.227

尝试按照正则表达式得到你的结果

> （。*）文件名

# java - NewString() & NewStringUTF() 显示错误无效修改 UTF-8：

> ID：14956439
> 
> 赞同：4
> 
> 时间：2013-02-19T11:32:24.980
> 
> 标签：java, android, java-native-interface

我正在尝试`char*`在 android 中使用 JNI 从 C++ 传递到 java。我尝试了多种方法来传递该数据

1）使用`NewStringUTF`：

```
const char* data = getData(); // this method returns a char array.
env->NewStringUTF(data); 
```

执行上述代码会引发以下错误

```
JNI WARNING: input is not valid Modified UTF-8: illegal continuation byte 0x70. 
```

2）使用`NewString`：

```
const char* data = getData(); // this method returns a char array.
// passing a byte array to java
jbyteArray trackIDArray = env->NewByteArray(strlen(data));
env->SetByteArrayRegion(trackIDArray, 0, strlen(data), (const jbyte*)trackID); 
```

在 java 方面，我得到了一些垃圾值。我不明白如何将此`char`数组用于 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:19:42.853

我会怀疑`data`而不是`trackID`.

```
env->SetByteArrayRegion(trackIDArray, 0, strlen(data), (const jbyte*)data); 
```

然后你有字节并且在java端可能会查看它是什么编码 - 通过十六进制转储或其他检查。

之后：

```
String s = new String(data, "Cp1252"); // Or so. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:11:48.917

1) 你`data`的根本不是一个有效的 UTF-8 字符串。并非每个 char 数组都会自动成为有效的 UTF-8。你可能有它的一些单字节编码（如 ISO 或 Windows CP），或者它根本不是一个可读的字符串。

2) 应该没问题，但是显示`trackID`从`data`. 您需要对其进行硬类型转换的事实`jbyte*`是可疑的。**此代码可能是正确的，但您也可能在 Java 方面犯错误：**

如果`data`不是可读字符串或不是*“平台的默认字符集”的单字节编码* [java.lang.String(byte[]) 构造函数](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5B%5D%29)将无法从中生成可读字符串！在这种情况下，您必须在 C 端转换为 UTF-8。您还将摆脱对平台特定编码的依赖（可能大不相同）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-27T01:20:20.057

NewStringUTF 期望您传递修改后的 UTF-8 字符串。您可能正在尝试通过 UTF-8。

有多种方法可以修复它：最明显的一种是将字符串编码为用 C++ 修改的 UTF-8，然后再将其传递给 Java。

另一种方法是将其作为字节数组传递给 Java，并使用 String 构造函数将其从 UTF-16 转换。

第二种方式可能更有效，因为最终 Java 使用 UTF-16 进行字符串表示。

作为一种替代方法，您可以在 C++ 中将字符串转换为 UTF-16，并将其传递给需要 UTF-16 的 newString JNI 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-12T15:46:50.190

我在 JNI 后面放置了非常大的字节源（>2kbyte），如下所示：

> csv 表的内容：
> 
> ```
> R"xxx(tbl_Cbla,Column 02,Column 03,Column 04
> sdfsdsad,sdfasd,dsfaddf,fdsasdf,fafasa
> 18,1,10,8,0)xxx"` 
> ```

```
std::string data1 =
#include "big_table1.csv" 
;

std::string data2 =
#include "big_table2.csv"
;

extern "C" JNIEXPORT jbyteArray JNICALL
Java_com_example_bigData_rawResource(
        JNIEnv *env,
        jobject /* this */, jint index) {

    std::string values;

    switch (index) {
        case 0: {values = data1;break;}
        case 1: {values = data2;break;}
    }

    int byteCount = values.length();
    jbyteArray ret = env->NewByteArray(byteCount);
    const jbyte* pNativeMessage = reinterpret_cast<const jbyte*>(values.c_str());
    env->SetByteArrayRegion (ret, 0, byteCount, pNativeMessage);
    return ret;
} 
```

在 Java 中，你可以像这样取回它，导入本机函数取决于你：

```
ByteArrayInputStream bis = null;
try {

   bis = new ByteArrayInputStream(rawResource(1);
} catch (Exception e) {
   e.printStackTrace();
}
BufferedReader buffer = new BufferedReader(new InputStreamReader(bis,   Charset.forName("UTF-8"))); 
```

处理缓冲的阅读器也取决于你，小例子：

```
Strig line = buffer.readLine(); 
while ((line = buffer.readLine()) != null) {
 //play around with 'line'
} 
```

# javascript - kendoui：如何在网格中显示来自远程数据源的外键

> ID：14956441
> 
> 赞同：4
> 
> 时间：2013-02-19T11:32:32.170
> 
> 标签：javascript, gridview, kendo-ui, foreign-keys

我有一个 kendoui 网格，其中列出了声明。其中一列是贷方，它是贷方表的外键引用。我想要的是能够在网格中显示贷方名称而不是其 id 参考。

我将贷方数据源设置如下

```
var dsLenders = new kendo.data.DataSource({
    transport: {
        read: {
          url: "../data/lenders/",
          dataType: "jsonp"
      },
      parameterMap: function(options, operation) {
          if (operation === "read") {
              return options;
          }
      }
    }
}); 
```

网格看起来像这样

```
 $("#gridClaims").kendoGrid({
      dataSource: claimData,
      autoSync:true,
      batch: true,
      pageable: {
          refresh: true,
          pageSizes: true
      },
      filterable: true,
      sortable: true,
      selectable: "true",
      editable: {
          mode: "popup",
          confirmation: "Are you sure you want to delete this record?",
          template: $("#claimFormPopup").html()
      },
      navigable: true,  // enables keyboard navigation in the grid
      toolbar: ["create"],  // adds insert buttons
      columns: [
          { field:"id_clm", title:"Ref", width: "80px;" },
          { field:"status_clm", title:"Status", width: "80px;" },
          { field:"idldr_clm", title:"Lender", values: dsLenders },
          { field:"type_clm", title:"Claim Type"},
          { field:"value_clm", title:"Value", width: "80px;", format:"{0:c2}", attributes:{style:"text-align:right;"}},
          { field:"created", title:"Created", width: "80px;", format: "{0:dd/MM/yyyy}"},
          { field:"updated", title:"Updated", width: "80px;", format: "{0:dd/MM/yyyy}"},
          { field:"user", title:"User" , width: "100px;"},
          { command: [
              {text: "Details", className: "claim-details"},
              "destroy"
            ],
            title: "&nbsp;",
            width: "160px"
          }
      ]
  }); 
```

但是它仍然在贷方列中显示ID。我已经尝试创建一个本地数据源并且工作正常，所以我现在使用远程数据源与我有关。

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T05:33:22.857

简短的回答是你不能。反正不是直接的。见[这里](http://www.kendoui.com/forums/ui/grid/foreign-key-option-doesn-t-work.aspx#2280345)和[这里](http://feedback.kendoui.com/forums/127393-kendo-ui-feedback/suggestions/3445227-kendo-grid-foreignkey-binding-against-a-remote-dat)。

您可以（如上面链接帖子中提到的响应）将数据预加载到 var 中，然后可以将其用作列定义的数据。

我使用这样的东西： -

```
function getLookupData(type, callback) {
    return $.ajax({
        dataType: 'json',
        url: '/lookup/' + type,
        success: function (data) {
            callback(data);
        }
    });
} 
```

然后我像这样使用它：-

```
var countryLookupData;
getLookupData('country', function (data) { countryLookupData = data; }); 
```

我在延迟的 JQuery 中使用它，以确保在绑定到网格之前加载所有查找：-

```
$.when(
    getLookupData('country', function (data) { countryLookupData = data; }),
    getLookupData('state', function (data) { stateLookupData = data; }),
    getLookupData('company', function (data) { companyLookupData = data; })
)
.then(function () {
    bindGrid();
}).fail(function () {
    alert('Error loading lookup data');
}); 
```

然后，您可以使用`countryLookupData`您的价值观。

您也可以使用自定义网格编辑器，但是您可能会发现您仍然需要将数据加载到 var 中（而不是使用带有 DropDownList 的数据源）并确保在网格之前加载数据，因为您'很可能需要查找一个列模板，以便您新选择的值显示在网格中。

我无法让 ForeignKey 以任何有用的方式工作，因此我最终使用了自定义编辑器，因为您可以更好地控制它们。

还有一个问题：确保在定义列之前已经加载了查找数据。我正在使用在变量中定义的列数组，然后将其附加到网格定义......即使在使用网格之前加载了查找数据，如果它是在列定义之后定义的，它将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-07T03:23:59.797

虽然这篇文章已经过去了 2 年，但我仍然分享我的解决方案

1) 假设 api url ( [http://localhost/api/term](http://localhost/api/term) ) 将返回：

```
{
    "odata.metadata":"http://localhost/api/$metadata#term","value":[
        {
            "value":2,"text":"2016-2020"
        },{
            "value":1,"text":"2012-2016"
        }
    ]
} 
```

请注意，属性名称必须是“文本”和“值”

2) 显示外部表中的术语名称（文本）而不是 term_id（值）。查看网格列“term_id”，如果添加“values：data_term”，将创建下拉列表

```
<script>
    $.when($.getJSON("http://localhost/api/term")).then(function () {
        bind_grid(arguments[0].value);
    });

    function bind_grid(data_term) {
        $("#grid").kendoGrid({
            dataSource: ds_proposer,
            filterable: true,
            sortable: true,
            pageable: true,
            selectable: "row",
            columns: [
                { field: "user_type", title: "User type" },
                { field: "user_name", title: "User name" },
                { field: "term_id", title: "Term", values: data_term }
            ],
            editable: {
                mode: "popup",
            }
        });
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-13T12:33:08.107

对于那些现在遇到这个问题的人，支持此功能：

[https://demos.telerik.com/aspnet-mvc/grid/foreignkeycolumnbinding](https://demos.telerik.com/aspnet-mvc/grid/foreignkeycolumnbinding)

# php - Wordpress：归档多种帖子类型

> ID：14956442
> 
> 赞同：1
> 
> 时间：2013-02-19T11:32:36.923
> 
> 标签：php, html, wordpress, archive

我试图弄清楚是否可以在一个页面上存档多个帖子类型，我为每个帖子类型都有一个单独的存档，工作正常，但我还想要另一个页面来存档它们。我对 WP 还是很陌生，所以我完全不确定这是否可能，但到目前为止我所做的事情并不能正常工作：

```
 <?php query_posts('post_type=type01'); ?>

    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

    <a href="<?php the_permalink(); ?>">
    <div class="type01-div" data-value="<?php
$date = DateTime::createFromFormat('dnY', get_field('type01_date_select'));
echo $date->format('dnY');
?>">STUFF HERE</div>
    </a>

    <?php endwhile; endif; ?>

    <?php query_posts('post_type=type02'); ?>

    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

    <a href="<?php the_permalink(); ?>">
    <div class="type02-div" data-value="<?php
$date = DateTime::createFromFormat('dnY', get_field('type02_date_select'));
echo $date->format('dnY');
?>">STUFF HERE</div>
    </a>

    <?php endwhile; endif; ?> 
```

所以'type01'的所有帖子都显示了，但'type02'的帖子没有。可以同时存档吗？尽管在单独的循环中，因为每种帖子类型都将包装在不同的 div 类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:50:53.347

您需要为下一个循环重置查询，在循环之间添加：

```
<?php wp_reset_query(); ?> 
```

我有一个类似的页面，并使用此代码来执行此操作：

```
<h2>type01</h2>
<?php
$args = array(
    'post_type' => array( 'type01' ),
    'order' => 'asc',
    'orderby' => 'title',
    'posts_per_page' => -1
);

$loop = new WP_Query( $args );?>
<?php while ( $loop->have_posts() ) : $loop->the_post();?>

        <li><a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></li>

<?php endwhile; ?>

<?php wp_reset_query(); ?>

</ul>

<h2>type02</h2>
<ul>
<?php
$args = array(
    'post_type' => array( 'type02' ),
    'order' => 'asc',
    'orderby' => 'title',
    'posts_per_page' => -1
);

$loop = new WP_Query( $args );?>
<?php while ( $loop->have_posts() ) : $loop->the_post();?>

        <li><a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></li>

<?php endwhile; ?> 
```

查看此链接了解更多信息：[http ://codex.wordpress.org/Function_Reference/wp_reset_query](http://codex.wordpress.org/Function_Reference/wp_reset_query)

# spring-mvc - 使用 Spring MVC 不借助 @ModelAttribute 来显示错误消息的推荐方法

> ID：14956449
> 
> 赞同：1
> 
> 时间：2013-02-19T11:32:52.900
> 
> 标签：spring-mvc

我在**Spring MVC 应用程序**中有以下**方法框架**：

 **```
@RequestMapping(value = "/activateMember/{token}", method = RequestMethod.GET, produces = "text/html")
public String activateMember(@PathVariable("token") String token) {
...
} 
```

`token`如果由于某种原因无效，我正在尝试显示错误消息。但是我没有`ModelAttribute`方法参数，我真的不想要一个。但是我当然不能使用`Errors`or`BindingResults`参数，因为缺少 a`ModelAttribute`及其对应的`form`.

所以我的问题是：在给定上述方法签名且不引入 ModelAttribute 的情况下
**，推荐的显示错误消息的方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:05:21.077

如果`String`您从该方法返回的是一个视图名称（Spring 默认），那么只需为这种情况创建一个视图并执行以下操作：

```
@RequestMapping()
public String activateMember(@PathVariable("token") String token) {
    if(checkToken(token)){
        doProcess();
        return "userprofile";
    } else {
        return "badtoken"
    }
} 
```

在更复杂的情况下，您可能有一个与错误令牌相关的异常层次结构。（令牌已过期，令牌不正确等等）。您可以[`@ExceptionHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)在同一个控制器中注册一个：

```
@RequestMapping()
public String activateMember(@PathVariable("token") String token) {
    return activate(token); // This method may throw TokenException and subclasses.
}

@ExceptionHandler(TokenException.class)
public ModelAndView tokenException(TokenException e){
    // some code
    return new ModelAndView("badtoken", "exception", e);
} 
```**

# c# - 在不知道其类型的情况下引用传递的 Enum 的属性

> ID：14956454
> 
> 赞同：0
> 
> 时间：2013-02-19T11:33:03.783
> 
> 标签：c#, class, enums

我有一系列与数据库中使用的数字 ID 相对应的枚举，即...

```
public enum ResponseType1 {
    Accept = 10
    Reject = 11 };

public enum ResponseType2 {
    Accept = 12
    Reject = 13 };

public enum ResponseType3 {
    Accept = 14
    Reject = 15 }; 
```

一个类有一个 Object 类型的 'ResponseTypeEnum' 属性，该属性在运行时设置，并将成为各种响应类型枚举之一......

```
MyClass.ResponseTypeEnum = ResponseType2 
```

我知道所有响应类型枚举都将具有 Accept 和 Reject 值，所以我想知道是否可以在不知道枚举类型的情况下按名称引用枚举的值，即一旦我分配了 ResponseType2对于我的类的 ResponseTypeEnum 属性，是否有一种方法可以引用该枚举的 Reject 值，即...

```
MyClass.ResponseTypeEnum.Reject 
```

在这种情况下，解析的值将是 11、13 或 15，具体取决于我分配给 ResponseTypeEnum 属性的枚举。

这可能吗？而且，至关重要的是，这是一种好的做法吗？有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:36:32.243

我不认为这是一个好主意。

我会创建一个`ResponseType`具有两个属性`Accept`和`Reject`.
此外，我将创建三个派生类，将这些属性设置为正确的值：

```
public abstract class ResponseType
{
    private readonly int _accept;
    private readonly int _reject;

    protected ResponseType(int accept, int reject)
    {
        _accept = accept;
        _reject = reject;
    }

    public int Accept { get { return _accept; } }
    public int Reject { get { return _reject; } }
}

public class ResponseType1 : ResponseType
{
    public ResponseType1() : base(10, 11) { }
}

public class ResponseType2 : ResponseType
{
    public ResponseType2() : base(12, 13) { }
}

public class ResponseType3 : ResponseType
{
    public ResponseType3() : base(14, 15) { }
} 
```

`MyClass.ResponseTypeEnum`应重命名为`MyClass.ResponseType`并更改为 type `ResponseType`。

现在的用法是这样的：

```
MyClass.ResponseType = new ResponseType1(); 
```

您可以`MyClass.ResponseType`在`switch`没有问题的语句中使用：

```
switch(databaseValue)
{
    case MyClass.ResponseType.Accept:
        // accept
        break;
    case MyClass.ResponseType.Reject:
        // reject
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:42:03.893

> 这可能吗？

您可以将 ResponseTypeEnum 作为动态类型。

> 这是好习惯吗？

我不会推荐它

> 有没有更好的方法来实现这一点？

是的。您可以在此处使用更明确的类结构，例如。

```
class Response
{ 
  enum type;
  bool accept;
} 
```

# ios - 使用支持的语言弹出键盘 - Objective C

> ID：14956462
> 
> 赞同：1
> 
> 时间：2013-02-19T11:33:27.580
> 
> 标签：ios, nslocalizedstring

我是 iPhone 开发的新手，我正在寻求您的帮助，以了解是否可以使用我添加的受支持语言弹出键盘`NSLocalizedString`。

我可以`UIlabel`用适当的语言显示我的字符串，现在我想要使用相同语言的键盘。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:37:00.027

**不，您无法控制键盘的语言**。

只有用户可以通过设置应用程序或键盘中的地球键更改语言。

# iphone - UIImageView内存泄漏崩溃问题-Objective C

> ID：14956464
> 
> 赞同：0
> 
> 时间：2013-02-19T11:33:33.540
> 
> 标签：iphone, ios, objective-c, memory-leaks, uiimageview

我正在尝试使用从服务器加载的图像缩略图构建我的应用程序。图像数量众多。因此，当我尝试在我的 iPod 中运行时，它会在加载 50 到 60 张图像后崩溃。崩溃是由于我通过使用仪器测试我的应用程序而了解到的内存泄漏。我为每个 imageView 使用了 imageViews 和一个按钮，并且我还释放了这些对象。这是我在我的应用程序中使用的代码。

```
NSInteger result = [self loadedBlipCount] + (_feed.hasMore ? 1 : 0);

if (result == 0 && _emptyFeedCell)
    result = 1;
int outer_count = result/3;

scroll_view.backgroundColor = [UIColor whiteColor];

scroll_view.delegate = self;

for (int i=0; i<outer_count; i++)
//if (i<outer_count)

{
    xPos = 10;

    for (int j=0; j<3; j++) {

        _blipyy = [_feed blipAtIndex:count];

       image_view = [[URLImageView alloc] initWithFrame:CGRectMake(xPos, yPos, 90, 90)];

        image_view.tag = count_tag;
        image_view.url = _blipyy.image_tab_images;

        UIButton *img_butt = [[UIButton alloc] initWithFrame:CGRectMake(xPos, yPos, 90, 90)];
        img_butt.tag = count_tag + 10000;
        [img_butt addTarget:self action:@selector(image_tapped:) forControlEvents:UIControlEventTouchUpInside];

        xPos = xPos + 95;
        count = count + 1;
        count_tag = count_tag + 1;
        //count_1= count_1 +1;

        [scroll_view addSubview:image_view];
        [scroll_view addSubview:img_butt];
        [image_view release];
        [img_butt release];
        //[image_view release];
    }
    // });
    yPos = yPos + 95;

} 
```

请帮我解决这个问题。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:44:00.973

使用您自己的实现和重新使用单元格来代替滚动视图获取`UITableView`和自定义。`UITableViewCell`它将在没有任何内存问题的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:36:24.237

试试 SDWebImage - 它非常适合我的所有项目，而且易于集成和使用！

[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:42:27.547

这个问题需要你改变你的方法。使用其中任何一个都很重要`UITableView`（它将帮助您处理内存问题）。但是，如果您仍想继续使用，`UIImageView`那么我建议您使用此[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)。要调用此 API：

```
ASyncImage *img_EventImag = alloc with frame;
NSURL *url = yourPhotoPath;
[img_EventImage loadImageFromURL:photoPath];
[self.view addSubView:img_EventImage]; // In your case you'll add in your TableViewCell. 
```

这与使用 UIImageView 相同。很简单，它可以为您完成大部分工作。AsyncImageView 包括 UIImageView 上的一个简单类别，用于在 iOS 上异步加载和显示图像，以便它们不会锁定 UI，以及用于更高级功能的 UIImageView 子类。AsyncImageView 与 URL 一起使用，因此它可以与本地或远程文件一起使用。

加载/下载的图像缓存在内存中，并在出现内存警告时自动清理。AsyncImageView 独立于 UIImage 缓存运行，但默认情况下，位于应用程序包根目录中的任何图像都将存储在 UIImage 缓存中，以避免缓存图像的任何重复。

该库还可用于独立于 UIImageView 加载和缓存图像，因为它提供对底层加载和缓存类的直接访问。

# php - tinyMCE WYSIWYG 中的 PHP 和分页符

> ID：14956472
> 
> 赞同：1
> 
> 时间：2013-02-19T11:34:08.523
> 
> 标签：php, tinymce

我正在使用 PHP 和 tinyMCE WYSIWYG 编辑器，我有这个文本示例：

```
 Text 1
  <!-- pagebreak -->
  Text 2 
 <!-- pagebreak --> 
 Text 3 
```

我怎样才能得到公正`text 2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:48:41.457

您可以使用 split() 函数[http://www.php.net/manual/en/function.split.php](http://www.php.net/manual/en/function.split.php)。例子：

```
$pieces=split("<!-- pagebreak -->", $text);
echo $pieces[1]; 
```

不是最好的解决方案。其他方法是使用正则表达式[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

# javascript - 在 javascript 中获取 gmail 消息的正文时删除 html 格式

> ID：14956479
> 
> 赞同：3
> 
> 时间：2013-02-19T11:34:31.530
> 
> 标签：javascript, google-apps-script, gmail

我想删除我的谷歌应用脚​​本中的 html 格式。我目前正在搜索电子邮件并将结果打印到谷歌电子表格。我想知道是否有办法替换文本。我知道正则表达式，但我认为它不适用于 getBody 函数。

我非常感谢您对此事的一些反馈或帮助。

**代码：**

```
function Search() {

var sheet   = SpreadsheetApp.getActiveSheet();
var row     = 2;

// Clear existing search results
sheet.getRange(2, 1, sheet.getMaxRows() - 1, 4).clearContent();

// Which Gmail Label should be searched?
var label   = sheet.getRange("F3").getValue();

// Get the Regular Expression Search Pattern
var pattern = sheet.getRange("F4").getValue();

// Retrieve all threads of the specified label
var threads = GmailApp.search("in:" + label);

for (var i = 0; i < threads.length; i++) {

var messages = threads[i].getMessages();

for (var m = 0; m < messages.length; m++) {
 var msg = messages[m].getBody();

// Does the message content match the search pattern?
if (msg.search(pattern) !== -1) {

 // Print the message subject
 sheet.getRange(row,3).setValue(messages[m].getBody()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-15T03:31:36.347

替换这个：

```
// Print the message subject
sheet.getRange(row,3).setValue(messages[m].getBody()); 
```

有了这个：

```
// Print the message subject
sheet.getRange(row,3).setValue(getTextFromHtml(messages[m].getBody())); 
```

该`getTextFromHtml()`功能已根据[此答案](https://stackoverflow.com/a/11312588/1677912)进行了改编，并增加了一些基本格式的处理（编号和项目符号列表，分段符）。

```
function getTextFromHtml(html) {
  return getTextFromNode(Xml.parse(html, true).getElement());
}

var _itemNum; // Used to lead unordered & ordered list items.

function getTextFromNode(x) {
  switch(x.toString()) {
    case 'XmlText': return x.toXmlString();
    case 'XmlElement':
      var name = x.getName().getLocalName();
      Logger.log(name);
      var pre = '';
      var post = '';
      switch (name) {
        case 'br':
        case 'p':
          pre = '';
          post = '\n';
          break;
        case 'ul':
          pre = '';
          post = '\n';
          itemNum = 0;
          break;
        case 'ol':
          pre = '';
          post = '\n';
          _itemNum = 1;
          break;
        case 'li':
          pre = '\n' + (_itemNum == 0 ? ' - ' : (' '+ _itemNum++ +'. '));
          post = '';
          break;
        default:
          pre = '';
          post = '';
          break;
      }
      return pre + x.getNodes().map(getTextFromNode).join('') + post;
    default: return '';
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-23T22:11:19.140

从这个答案：[Google Apps Scripts - Extract data from gmail into a spreadsheet](https://stackoverflow.com/questions/32890847/google-apps-scripts-extract-data-from-gmail-into-a-spreadsheet)

您可以完全放弃 getTextFromHTML 函数，只需使用 getPlainBody(); 而不是 getBody();。

# ios - RestKit：如何批处理多个请求并在完成后获得响应？

> ID：14956485
> 
> 赞同：8
> 
> 时间：2013-02-19T11:34:44.110
> 
> 标签：ios, restkit

我刚刚发现了 RestKit，它将成为我正在做的应用程序的重要组成部分。当时，我能够将它与核心数据集成，但还没有想出发送多个 GET 请求的最佳方式。

我需要做的是：

从以下地址获取数据：

```
http://url.com/api/banner/
http://url.com/api/category/
http://url.com/api/link/ 
```

URL 将始终采用以下格式：[http ://url.com/api/SOMETHING/](http://url.com/api/SOMETHING/)

一旦*所有请求*都完成了，我想运行一个代码（比如调用一个新的视图控制器）。最好的方法是什么？

目前，这是我正在使用的代码：

```
- (id)init
{
    self = [super init];
    if (self) {
        [self setupConnector];
        [self setupDatabase];
        [self setupMappings];
        [self sendRequests];
    }

    return self;
}

- (void)setupConnector
{
    // Initialize RestKIT
    RKObjectManager *objectManager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://baseURL"]];
    self.managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:[[NLCoreData shared] managedObjectModel]];
    objectManager.managedObjectStore = self.managedObjectStore;
}

- (void)setupDatabase
{
    NSString *storePath = [[NLCoreData shared] storePath];
    NSError *error = nil;
    NSPersistentStore *persistentStore = [self.managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:&error];
    NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error);

    [self.managedObjectStore createManagedObjectContexts];

    self.managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:self.managedObjectStore.persistentStoreManagedObjectContext];
}

- (void)setupMappings
{
    RKObjectManager *objectManager = [RKObjectManager sharedManager];

    // Mappings

    // banner
    RKEntityMapping *bannerMapping = [RKEntityMapping mappingForEntityForName:@"Banner" inManagedObjectStore:self.managedObjectStore];
    [bannerMapping addAttributeMappingsFromDictionary:@{
     @"title": @"title",
     @"id": @"bannerID",
     @"created_at": @"created_at",
     @"image": @"image",
     @"resource_uri": @"resource_uri",
     @"updated_at": @"updated_at",
     @"url": @"url"
     }];
    bannerMapping.identificationAttributes = @[ @"bannerID" ];

    RKResponseDescriptor *bannerDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:bannerMapping
                                                                                        pathPattern:@"/api/v1/banner/"
                                                                                            keyPath:@"objects"
                                                                                        statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
    [objectManager addResponseDescriptor:bannerDescriptor];

    // category
    RKEntityMapping *categoryMapping = [RKEntityMapping mappingForEntityForName:@"Category" inManagedObjectStore:self.managedObjectStore];
    [categoryMapping addAttributeMappingsFromDictionary:@{
     @"name": @"name",
     @"id": @"categoryID",
     @"created_at": @"created_at",
     @"resource_uri": @"resource_uri",
     @"updated_at": @"updated_at",
     @"active": @"active"
     }];
    categoryMapping.identificationAttributes = @[ @"categoryID" ];

    RKResponseDescriptor *categoryDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:categoryMapping
                                                                                     pathPattern:@"/api/v1/category/"
                                                                                         keyPath:@"objects"
                                                                                     statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
    [objectManager addResponseDescriptor:categoryDescriptor];

}

- (void)sendRequests
{
    RKObjectManager *objectManager = [RKObjectManager sharedManager];

    // Send Request
    [objectManager getObjectsAtPath:@"/api/v1/banner/" parameters:nil success:^(RKObjectRequestOperation * operation, RKMappingResult *mappingResult) {
        NSLog(@"SUCCESS: %@", mappingResult.array);
    } failure: ^(RKObjectRequestOperation * operation, NSError * error) {
        NSLog(@"FAILURE %@", error);
    }];

    // category
    [objectManager getObjectsAtPath:@"/api/v1/category/" parameters:nil success:^(RKObjectRequestOperation * operation, RKMappingResult *mappingResult) {
        NSLog(@"SUCCESS: %@", mappingResult.array);
    } failure: ^(RKObjectRequestOperation * operation, NSError * error) {
        NSLog(@"FAILURE %@", error);
    }];
} 
```

有小费吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T11:44:11.633

RestKit 解决方案是这样的：您必须手动初始化所​​有**RKObjectRequestOperations**，然后使用[ObjectManager::enqueueBatchOfObjectRequestOperations:progress:completion:](http://restkit.org/api/master/Classes/RKObjectManager.html#//api/name/enqueueBatchOfObjectRequestOperations:progress:completion:)方法将它们排入队列，而不是使用便捷方法**ObjectManager::getObjectsAtPath 。**

 **或者，我认为这实际上是更简单和更清洁的解决方案，请使用[该问题](https://stackoverflow.com/questions/10643797/wait-until-multiple-operations-executed-including-completion-block-afnetworki)的已接受答案中所述的调度组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T11:54:52.167

```
 NSURL *url1 = [NSURL URLWithString:@"http://baseURL.domain/api/banner/"];
    NSMutableURLRequest *request2 = [NSMutableURLRequest requestWithURL:url1];
    RKObjectRequestOperation *objectRequestOperation1 = [[RKObjectRequestOperation alloc] initWithRequest:request2 responseDescriptors:@[ ResponseDescriptor ]];

 NSURL *url2 = [NSURL URLWithString:@"http://baseURL.domain/api/category/"];
    NSMutableURLRequest *request2 = [NSMutableURLRequest requestWithURL:url2];
    RKObjectRequestOperation *objectRequestOperation2 = [[RKObjectRequestOperation alloc] initWithRequest:request2 responseDescriptors:@[ ResponseDescriptor ]];

    NSArray *requestArray = [NSArray arrayWithObjects:objectRequestOperation,objectRequestOperation1,objectRequestOperation2, nil];

   [[RKObjectManager sharedManager] enqueueBatchOfObjectRequestOperations:requestArray  progress:^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {
        //
        // Handle process indicator
        //
        NSLog(@"%lu",(unsigned long)totalNumberOfOperations);

    } completion:^(NSArray *operations) {
        //
        // Remove blocking dialog, do next tasks

? 
```**

# android - **如何以编程方式检索正在运行的应用程序 CPU 使用率？**：Android

> ID：14956486
> 
> 赞同：1
> 
> 时间：2013-02-19T11:34:44.607
> 
> 标签：android, cpu-usage

如何以编程方式检索正在运行的应用程序大小、CPU 使用率？

有没有可能。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:41:34.603

```
private float readUsage() {
    try {
        RandomAccessFile reader = new RandomAccessFile("/proc/stat", "r");
        String load = reader.readLine();

        String[] toks = load.split(" ");

        long idle1 = Long.parseLong(toks[5]);
        long cpu1 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
              + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

        try {
            Thread.sleep(360);
        } catch (Exception e) {}

        reader.seek(0);
        load = reader.readLine();
        reader.close();

        toks = load.split(" ");

        long idle2 = Long.parseLong(toks[5]);
        long cpu2 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
            + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

        return (float)(cpu2 - cpu1) / ((cpu2 + idle2) - (cpu1 + idle1));

    } catch (IOException ex) {
        ex.printStackTrace();
    }

    return 0;
} 
```

# mysql - 将数据保存在设备上，并在设备收到 Internet 信号时将数据发送到基地

> ID：14956488
> 
> 赞同：0
> 
> 时间：2013-02-19T11:34:50.747
> 
> 标签：mysql, objective-c

我目前在一个团队中为 iOS 平台开发应用程序。这场比赛的所有分数都被发送到一个mysql库并显示在一个网页上。将这些数据发送到 mysql 库当然需要 Internet。

我的问题是，有没有人知道如何在手机或平板电脑上本地保存这个分数，并让它在设备收到互联网信号时自动将分数发送到 mysql 基地？用于将数据从设备发送到数据库的代码：

```
-(void) startNewGame:(ccTime) delta {

    NSString *strURL = [NSString stringWithFormat:@"http://erlpil.com/stumpp/settscore.php?poeng=%i", score]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:55:41.733

是的，您可以使用 Apple 提供的名为 Reachability 的类来验证 Internet 连接状态，并使用 NSNotificationCenter 继续等待任何 Internet 连接状态。因此，您可以使用上述@trojanfoe 描述的方法将分数发送到您的 mysql 数据库。

要验证 Internet 状态，首先检查是否有任何主机可访问，如果是，我们知道有 Internet 连接：

```
- (BOOL)verifyInternetStatus
{
    Reachability *reachable = [Reachability reachabilityWithHostName:@"www.google.com"];
    NetworkStatus internetStatus = [r currentReachabilityStatus];
    if (internetStatus == NotReachable) {
        // there's not internet connection, therefore we save the scores locally
    }
    else {
        // send the scores to the database
    }
} 
```

当 Internet 状态发生变化时，Reachability 类通过 NSNotificationCenter 通知其观察者 Internet 状态已使用 key 更改`kReachabilityChangedNotification`。因此，您需要将您的类添加为该键的观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(verifyInternetStatus:) 
                                             name:kReachabilityChangedNotification
                                           object:nil]; 
```

这是这样做的一种方法。当您要发送分数时，调用`verifyInternetStatus`它将发送分数或将其保存在本地的方法。

我希望它有所帮助。

**编辑：**

对不起，我忘记了课程：

[https://developer.apple.com/iphone/library/samplecode/Reachability/index.html](https://developer.apple.com/iphone/library/samplecode/Reachability/index.html)

# jquery - RaphaelJS+Jquery：拖放的错觉

> ID：14956490
> 
> 赞同：1
> 
> 时间：2013-02-19T11:34:58.790
> 
> 标签：jquery, svg, drag-and-drop

所以，我有一堆按钮，我希望用户能够将其中一个拖到我的 Raphael 纸上，并让 raphael 在最终坐标处画一个圆或某种形状。我还希望如果他们单击按钮而不是拖动，它应该将相同的符号放置在预设位置。

我意识到有类似的问题，我查看了它们，但我不知道为什么他们的一些示例似乎不起作用。

如果我有点冗长，我深表歉意——我对 Web 开发非常陌生，并且对所有的重载有点不知所措。

这是我正在使用的 JQuery-

```
$(function() {
    var cnvH =$("#thisisthemainrow").height();
    var cnvW =$("#canvas").width();
    /*grabs height and width of container element*/

    var paper = new Raphael($("#canvas")[0],cnvW,cnvH); 
    insertSymbols(paper, cnvW, cnvH);
});
function insertSymbols(paper, cnvW, cnvH){
//symbol 1
    var x = 0;
    var y = 0;
    var isDragging = false;
    $("#symbol1")
         .mousedown(function() {
             $(window).mousemove(function() {
             isDragging = true;
             $(window).unbind("mousemove");
             });
         })
        .mouseup(function(e) {
            var wasDragging = isDragging;
            isDragging = false;
            $(window).unbind("mousemove");
            if (!wasDragging) {
                 x = cnvW/4;
                 y = cnvH/4;
            }
            else{
                x = e.pageX;
                y = e.pageY;
            }
        });
   if(x!=0 && y!=0){
       var foo = drawSymbol(paper, x, y, 50);
       foo.show();
   }

};
var drawSymbol=function(paper, x,y, radius){
    var circ=paper.circle(x,y,radius);
    circ.hide();
    return circ;

}; 
```

按钮本身是使用 Twitter Bootstrap 定义的，例如 -

```
<button class="btn btn-large btn-block" type="button" id = "symbol1"><a href="#">Symbol 1</a></button> 
```

# deployment - ASP.NET MVC 4 + Entity Framework 6 + SQL Compact Edition 4.0 部署无需安装

> ID：14956492
> 
> 赞同：7
> 
> 时间：2013-02-19T11:35:02.980
> 
> 标签：deployment, asp.net-mvc-4, sql-server-ce, entity-framework-6

我试图在安装了 iis 的 Windows 7 的全新安装上部署一个基本的 MVC 4 应用程序，该应用程序使用 Entity Framework 6（代码优先）和 SQL Compact 4.0（未安装 mvc 4 和 sql compact 4.0）。

我在 db 项目上安装了以下 nuget 包：

*   EntityFramework（版本 6.0.0-alpha2）
*   EntityFramework.SqlServerCompact（版本 6.0.0-alpha2）
*   Microsoft.AspNet.Providers（1.2 版）
*   Microsoft.AspNet.Providers.Core（1.2 版）
*   Microsoft.SqlServer.Compact（版本 4.0.8876.1）

在 web.config 我得到以下配置：

```
<connectionStrings>
  <add name="[Name]" connectionString="Data Source=|DataDirectory|[FileName].sdf" providerName="System.Data.SqlServerCe.4.0" />
</connectionStrings>  

......................

<entityFramework>
  <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
     <parameters>
        <parameter value="System.Data.SqlServerCe.4.0" />
     </parameters>
  </defaultConnectionFactory>
  <providers>
      <provider invariantName="System.Data.SqlServerCe.4.0" type="System.Data.Entity.SqlServerCompact.SqlCeProviderServices, EntityFramework.SqlServerCompact, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </providers>
</entityFramework> 
```

bin 文件夹（sql ce 文件在 amd64 和 x86 文件夹中：

*   [amd64]
*   [x86]
*   Antlr3.Runtime.dll
*   DotNetOpenAuth.AspNet.dll
*   DotNetOpenAuth.Core.dll
*   DotNetOpenAuth.OAuth.Consumer.dll
*   DotNetOpenAuth.OAuth.dll
*   DotNetOpenAuth.OpenId.dll
*   DotNetOpenAuth.OpenId.RelyingParty.dll
*   实体框架.dll
*   EntityFramework.SqlServer.dll
*   EntityFramework.SqlServer.xml
*   EntityFramework.SqlServerCompact.dll
*   EntityFramework.SqlServerCompact.xml
*   实体框架.xml
*   Microsoft.Web.Infrastructure.dll
*   Microsoft.Web.WebPages.OAuth.dll
*   Newtonsoft.Json.dll
*   ShipMedProto.DB.dll
*   ShipMedProto.DB.pdb
*   ShipMedProto.Web.dll
*   ShipMedProto.Web.pdb
*   System.ComponentModel.DataAnnotations.dll
*   System.Data.DataSetExtensions.dll
*   System.Data.SqlServerCe.dll
*   System.Data.SqlServerCe.Entity.dll
*   System.Net.Http.Formatting.dll
*   System.Web.Helpers.dll
*   System.Web.Http.dll
*   System.Web.Http.WebHost.dll
*   System.Web.Mvc.dll
*   System.Web.Optimization.dll
*   System.Web.Providers.dll
*   System.Web.Razor.dll
*   System.Web.WebPages.Deployment.dll
*   System.Web.WebPages.dll
*   System.Web.WebPages.Razor.dll
*   WebActivatorEx.dll
*   WebGrease.dll
*   WebMatrix.Data.dll
*   WebMatrix.WebData.dll

当我部署到干净的机器时，我收到以下错误消息：

找不到请求的 .Net Framework 数据提供程序。它可能没有安装。

在我的开发机器上它工作正常。（我安装了 sql ce）

任何线索我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-26T01:08:25.220

我认为您真正想要做的是管理 NuGet 包，以便为 EntityFramework 添加 SqlServerCompact 支持。只需右键单击您的引用和管理 NuGet 包。然后在对话框中搜索 SqlServerCompact。你应该看到这个：

![在此处输入图像描述](../Images/1f1bb6074b13ca3cfb9e787bafdad588.png)

添加这个应该添加上面答案中的等效字符串。我最终在 web.config （或 app.config 如果你正在做一个应用程序）

```
 <entityFramework>
        <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
          <parameters>
            <parameter value="System.Data.SqlServerCe.4.0" />
          </parameters>
        </defaultConnectionFactory>
        <providers>
          <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
          <provider invariantName="System.Data.SqlServerCe.4.0" type="System.Data.Entity.SqlServerCompact.SqlCeProviderServices, EntityFramework.SqlServerCompact" />
        </providers>   
</entityFramework>   
<system.data>
        <DbProviderFactories>
          <remove invariant="System.Data.SqlServerCe.4.0" />
          <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
        </DbProviderFactories>   
</system.data> 
```

抱歉，我迟到了大约一年，但希望这对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T01:48:45.807

这是我正在使用的有效配置。

我从 NuGet 添加了项目：EntityFramework (6.0.1) EntityFramework.SqlServerCompact (6.0.1) Microsoft Sql Server Compact Edition (4.0.8876.1)。请注意，我没有将此程序集标记为复制本地。

我已经从 SQLCE 4 私有安装文件夹中添加了文件

然后我将我的配置设置如下：

```
<configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="SecureSend.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <runtime>
    <loadFromRemoteSources enabled="true" />
    <ThrowUnobservedTaskExceptions enabled="true" />
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="bin"/>
      <dependentAssembly>
        <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Data.SqlServerCe" publicKeyToken="89845dcd8080cc91" />
        <bindingRedirect oldVersion="0.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="System.Data.SqlServerCe.4.0" />
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
      <provider invariantName="System.Data.SqlServerCe.4.0" type="System.Data.Entity.SqlServerCompact.SqlCeProviderServices, EntityFramework.SqlServerCompact" />
    </providers>
  </entityFramework>
  <connectionStrings>
    <add name="LocalUserContext" connectionString="Data Source=c:\temp\LocalUserDataStore.sdf" providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings>
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SqlServerCe.4.0" />
      <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </DbProviderFactories>
  </system.data>
</configuration> 
```

# javascript - Kendo UI - 如何使用 javascript 添加和选择新选项卡（在 TabStrip 控件上）

> ID：14956496
> 
> 赞同：7
> 
> 时间：2013-02-19T11:35:15.990
> 
> 标签：javascript, jquery, kendo-ui

我创建了一个函数，可以在我的 Kendo UI TabStrip 控件中打开一个新选项卡：

```
function AddTab(targetUrl, title) {
        $("#tabstrip").data("kendoTabStrip").append({ text: title, contentUrl: targetUrl });
    } 
```

这会将选项卡添加到末尾，但不会选择它。我怎样才能选择它成为活动标签！？创建选项卡时是否需要设置一个id，然后调用select(..)函数，或者我可以一行完成吗？

我需要自动生成大量链接，每个链接都会采用不同的标题和 targetUrl。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T12:06:00.680

试试这个

```
<div id="tabstrip">
  <ul>
    <li class="k-state-active">First Tab</li>
    <li>Second Tab</li>
  </ul>
  <div>
    First text
  </div>
  <div>
    Second text
  </div>
</div>
<input type="button" value="Add Tab" onclick="AddTab('google', 'http://google.com')" />

<script>
function AddTab(targetUrl, title) {
  var tabStrip = $("#tabstrip").kendoTabStrip().data("kendoTabStrip");
  tabStrip.append({ text: title, contentUrl: targetUrl, content: "Your content" });
  tabStrip.select((tabStrip.tabGroup.children("li").length - 1));
}
</script> 
```

参考[链接](http://demos.kendoui.com/web/tabstrip/api.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T11:39:01.747

试试这样。// 来自文档[Kendo Ui tabstrip](http://docs.kendoui.com/documentation/getting-started/web/tabstrip/overview)

```
var tabStrip = $("#tabStrip").data("kendoTabStrip");
tabStrip.insertAfter(
    { text: "New Tab" },
    tabstrip.tabGroup.children("li:last")
); 
```

选择它

```
$(document).ready(function(){
    var tabstrip = $("#tabstrip").kendoTabStrip().data("kendoTabStrip");
    tabstrip.select(yourIndexoftheTab);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-27T08:42:06.823

您可以使用 kendoui 添加和删除动态选项卡。我希望这段代码可以帮助一些人

```
<html>
<head>
<title> testing remote data </title>
<link href="styles/kendo.common.min.css" rel="stylesheet" />
<link href="styles/kendo.default.min.css" rel="stylesheet" /> 
<script src="js/jquery.min.js"></script>
<script src="js/kendo.all.min.js"></script>
</head>

<input type='text' id='tabname' name='tabname'>
<input type="button" value="Add Tab" onclick="AddTab()" />
<div id="tabstrip">
</div>

<script>
$(document).ready(function () {
 $("#tabstrip").kendoTabStrip( {
            animation:  {
                open: {
                    effects: "fadeIn"
                }
            },
    select: function(element){selecttab(element)}           
        });

        });

function selecttab(element) {
var tabStrip1 = $('#tabstrip').kendoTabStrip().data("kendoTabStrip");
var item = tabStrip1.element.find("li:contains("+$(element.item).text()+")"),
itemIdx = item.index();   
$("#tabstrip").data("kendoTabStrip").select(itemIdx);                
}

function AddTab(targetUrl) {
 var title = jQuery("#tabname").val();
 var tabStrip = $("#tabstrip").kendoTabStrip().data("kendoTabStrip");
  tabStrip.append({ text: title,
      content: "<div class='showtabcontent dhtmlgoodies_aTab' style='height: auto; display: block;' id='tabViewsubtabname'><div style='float:right;'><input type='button' value='X' onClick='closeTab($(this).closest(\"li\"));'></div><br><label class='evtgrouplables'>Description</label><br><textarea name='dynamic_other_content[]' id='dynamic_other_content' class='textareaeditor'></textarea><input type='hidden' name='dynamic_other_title[]' value=''/></div>"
  });
 tabStrip.select((tabStrip.tabGroup.children("li").length - 1));
 }
function closeTab(vari){
 var tabStrip = $('#tabstrip').kendoTabStrip().data("kendoTabStrip");
 tabStrip.remove(tabStrip.select());
 tabStrip.select((tabStrip.tabGroup.children("li").length - 1));
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T20:31:03.587

附加并选择新选项卡的代码：

```
 var tabs = $('#tabs').data('kendoTabStrip');
  var tabNum = tabs.items().length;
  var closeButton = 
    "<span unselectable='on' class='k-icon k-delete'>delete</span>";

  tabs.append( {
    encoded: false, //allow HTML
    text: team.name + ' ' + closeButton,
    contentUrl: 'teamschedule.html'
  });
  // make new tab the active tab
  tabs.select(tabNum);

  var tab = $(tabs.items()[tabNum]);
  //attach delete handler to the delete icon
  tab.on('click','.k-delete', tab, $scope.removeTab); 
```

这是删除选项卡并选择前一个选项卡的代码（如果选择了删除的选项卡）：

```
$scope.removeTab = function(e) {
  var tabs = $('#tabs').data('kendoTabStrip');
  if (e.data.hasClass('k-state-active')) {
    //select previous tab if the active tab is removed
    tabs.select(e.data.prev());
  }
  tabs.remove(e.data);
} 
```

I'm using angular, hence the use of $scope.

# javascript - 如何过期或重置地理位置

> ID：14956500
> 
> 赞同：9
> 
> 时间：2013-02-19T11:35:27.620
> 
> 标签：javascript, html, geolocation, location

当用户访问我的网站时，我会检查是否在 PHP 中设置了位置会话。如果没有设置用户位置的会话，我将他们重定向到 www.domain.net/location。在此页面上有许多选项供用户选择位置。如果浏览器允许，其中一个选项是使用浏览器进行设置。下面的代码工作得很好。

我遇到的问题是，一旦用户允许浏览器共享位置，这似乎是永远设置的。当用户在浏览时，他们可能决定改变他们的位置，然后他们点击一个按钮再次转到 www.domain.net/location 页面。在没有任何弹出的情况下，它会自动获取浏览器位置并重定向它们。页面上还有其他位置选项，包括可点击的地图，我真的需要能够重置、过期、删除、强制执行某些操作，以便浏览器再次询问用户是否想使用浏览器设置位置或允许用户使用其他选项之一。

我唯一能想到的是将下面的实际 Javascript 移动到另一个页面上，并且在 www.domain.net/location 页面上有另一个按钮，上面写着“使用我的精确位置”，然后链接到下面的 JS .

有谁知道重置这个或其他东西的另一种方法？

```
<script type="text/javascript" charset="utf-8">

    function findLocation()
    {
      var options = {timeout: 60000};
      navigator.geolocation.getCurrentPosition(foundLocation, noLocation, options);
    }

    function foundLocation(position)
    {
      var lat = position.coords.latitude;
      var lng = position.coords.longitude;

      //alert('Found location: ' + lat + ', ' + lng);
      window.location = "http://www.domain.net/?lat=" + lat + "&lng=" + lng;
    }

    function noLocation()
    {
      alert('Could not find location');
      window.location = "http://www.domain.net/location";
    }

    findLocation();

  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:47:01.377

This is a per-browser setting, not something that you can control on the script side. What you may be able to do is provide a link [such as this one](http://support.google.com/chrome/bin/answer.py?hl=en&answer=142065) that explains how to update geolocation settings for particular websites for the given browser.

It seems like you can get around your specific problem not by linking to `/location`, but linking to `/location?update` or something like that. Essentially, go to the location page but add something that prevents the automatic redirect so the user can make a different decision about their location.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:42:26.860

诚然，我只玩过几次 Javascript Location API，但我的理解是浏览器存储用户偏好（这个假设似乎在[这里](http://support.google.com/chrome/bin/answer.py?hl=en&answer=142065)得到了加强）。

引用的页面表明用户的偏好是基于每个站点（域）而不是每个 URL 存储的。如果不是这种情况，那么向 URL 添加一个随机字符串值应该可以解决问题。编辑：我已经检查并且每个域都定义了豁免：

That would make your suggestion of deferring the code to another page - or binding it to an event that doesn't run on page load the best solution I can think of off-hand.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-18T16:11:50.953

If the user gives your site permission to use its location, it simply stores "allow" along with your site url in the browser security settings. It doesn't store the actual location. That is done via code. If you want to use a new location, just get it with javascript.

```
navigator.geolocation.getCurrentPosition(function(position) {
  do_something(position.coords.latitude, position.coords.longitude);
}); 
```

See here for more on getting geolocation: [https://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation](https://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation)

If you're storing the location in a cookie and re-using that location, just clear your cookie and reset it, or don't use cookies at all.

To see Chrome's storage of geo location settings, open your Chrome options "triple bar" > Settings > advanced... > under privacy, click Content Settings > under Location, click Manage Exceptions.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T12:26:08.733

I have decided to add ?change-location to the end of the URL and use PHP to check for this and then hide the Javascript on the page. This is not a great fix but it does look like this is a per browser setting and not something that you can reset using script. It would seem that once the user has said 'remember my preference' then thats what it will do until they dig into setting and change this on their browser.

# android - Android中的按钮动画

> ID：14956506
> 
> 赞同：1
> 
> 时间：2013-02-19T11:35:54.980
> 
> 标签：android, android-layout, animation, android-animation, android-button

我想，今天我得到了一个非常有趣的问题。在我的工作中，我们正在创建一个约会服务，其中一个主要功能将是屏幕，显示不同女孩（或男人）的照片，用户按下“热门”或“不”按钮。这两个按钮都显示在屏幕上的照片下方。

我们的分析表明我们应该实现某种“游戏”机制，所以想要这样的东西：例如，当用户按下“不”按钮时 - 它开始冻结并被冰覆盖，然后它会破裂，然后是下一张照片显示。那不是缩放、旋转或平移动画……按钮本身，它的内容应该在一小段时间（可能一两秒）内发生变化。

这让我很害怕，因为当我考虑在不同的设备上缩放这些按钮时，我可能会用 Ninepatch 和手工制作的动画制作不同的麻烦。

有可能做出这样的事情吗？或者，也许有任何解决方法或其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:48:55.557

1.  为您的动画制作图像并保存在 png 格式的文件夹中。
2.  使用下面的代码为这些图像设置动画。

> ```
> <animation-list xmlns:android="http://schemas.android.com/apk/res/android"
>  android:oneshot="true">
>  <item android:drawable="@drawable/rocket_thrust1" android:duration="200" />
>  <item android:drawable="@drawable/rocket_thrust2" android:duration="200" />
>  <item android:drawable="@drawable/rocket_thrust3" android:duration="200" />
>  </animation-list> 
> ```

然后

```
AnimationDrawable rocketAnimation;

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  ImageView rocketImage = (ImageView) findViewById(R.id.rocket_image);
  rocketImage.setBackgroundResource(R.drawable.rocket_thrust);
  rocketAnimation = (AnimationDrawable) rocketImage.getBackground();
}

public boolean onTouchEvent(MotionEvent event) {
  if (event.getAction() == MotionEvent.ACTION_DOWN) {
    rocketAnimation.start();
    return true;
  }
  return super.onTouchEvent(event);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T11:50:08.830

在可绘制文件夹中创建图像列表：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/loading" 
android:oneshot="false" >
<item android:drawable="@drawable/preloader_01" android:duration="50" />
<item android:drawable="@drawable/preloader_02" android:duration="50" />
<item android:drawable="@drawable/preloader_03" android:duration="50" />
<item android:drawable="@drawable/preloader_04" android:duration="50" /> 
```

使用 ImageView img 而不是 button 并将列表设置为 xml 中的背景，然后在代码中使用 AnimationDrawable 启动动画

```
 AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();
     // Start the animation (looped playback by default).
    frameAnimation.start();` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:41:19.833

您可以使用 ObjectAnimators 和 ValueAnimators 为按钮的 Alpha、位置和几乎任何属性设置动画。

如果您想要自定义动画，例如冰效果，您必须自己制作这些动画。

# callback - lex|flex 规则操作被忽略

> ID：14956510
> 
> 赞同：0
> 
> 时间：2013-02-19T11:36:06.013
> 
> 标签：callback, lex, flex-lexer

全部，

我的 lex 文件中有指定类型的模式：

```
 "#"[ \\t]*"ifdef".*                { action_ifdef_manager(yytext);} 
```

如果出现这样的文本，则不会调用`#ifdef GLOBALVAR`该操作`action_ifdef_manager`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:42:19.853

唯一的问题是模式的模糊性。你应该有一个类似的模式像'#ifdef'

```
 a        |
          ab       |
          abc      |
          abcd     ECHO; REJECT; 
```

这里的词法分析器在“abcd”流中返回所有四个经过验证的模式 a 、 ab 、 abc 、 abcd

查看[Flex 手册](http://westes.github.io/flex/manual/Actions.html)

# google-geocoder - Google 地理编码 API - 仅在一个国家/地区搜索

> ID：14956511
> 
> 赞同：6
> 
> 时间：2013-02-19T11:36:13.313
> 
> 标签：google-geocoder, google-geocoding-api

我正在使用 google geocode-API 寻找地理编码：

```
http://maps.googleapis.com/maps/api/geocode/json?address=london%c2+UK&sensor=false 
```

问题是，输入不是很准确（特别是街道），有时谷歌会混淆并忽略英国，因为街道在其他地方有完美的匹配（如街道和城市）。例如美国。

现在我无法解决这个问题（输入数据），但我想知道是否有一个参数，它迫使谷歌在英国搜索并且不返回结果而不是完全错误的结果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T14:20:29.363

您可以在 url 中添加组件过滤器来约束结果。在这种情况下，您可以使用：

```
http://maps.googleapis.com/maps/api/geocode/json?address=london%c2+UK**&components=country:UK**&sensor=false 
```

有关如何使用组件过滤的更多信息，请参阅：

[https://developers.google.com/maps/documentation/geocoding/intro#ComponentFiltering](https://developers.google.com/maps/documentation/geocoding/intro#ComponentFiltering)

# jquery - 如何在 Flot Chart 上放置标签工具提示

> ID：14956513
> 
> 赞同：0
> 
> 时间：2013-02-19T11:36:14.780
> 
> 标签：jquery, flot

嗨，我正在尝试将工具提示放在浮动图表上，下面是我的代码，任何人都可以告诉我问题出在哪里。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
</head>
<body>
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="excanvas.min.js"></script><![endif]-->
<script language="javascript" type="text/javascript" src="jquery.js"></script>
<script language="javascript" type="text/javascript" src="jquery.flot.js"></script>
 <script language="javascript" type="text/javascript" src="jquery.flot.stack.js"></script>
<div id="placeholder" style="width:600px;height:300px;"></div>
<p id="choices">Show:</p>
 <p class="graphControls">
    <input type="button" value="stack">
    <input type="button" value="Bars">
    <input type="button" value="Lines">
    </p>
    <p><label><input id="enableTooltip" type="checkbox">Enable tooltip</label></p>
<script language="javascript"  type="text/javascript" >
var urlDataPart = "3 10 0 1 2 3 4 5 6 7 8 9 " +
                   "'Trans1' 20 23 20 40 12 56 10 70 20 30 " +
                   "'Trans2' 15 12 25 23 56 34 45 23 12 56 " +
                   "'Trans3' 12 45 23 12 34 89 12 70 34 30 ";

$(function () {
    var datasets=[];
    var data=urlDataPart.split(" ");
    var seriesNum = parseInt(data[0]);
    var pointNum = parseInt(data[1]);
    var count = 2;
    var intervals = [];
    for (var i = 0; i < pointNum; i++) {
        intervals[i] = data[count];
        count++;
    }

    for (var i = 0; i < seriesNum; i++) {
        var d1 = [];
        var label_str=data[count];

        count++;
        for (var j = 0; j < pointNum; j++) {
            if (j == 0) {
                d1.push([]);
            }
            d1.push([intervals[j], data[count]]);
            count++;
        }
        datasets[i] =  {label:label_str,data:d1};
    }

    var i = 0;
    $.each(datasets, function(key, val) {
        val.color = i;
        ++i;
    });

    var choiceContainer = $("#choices");
    $.each(datasets, function(key, val) {
        choiceContainer.append('<br/><input type="checkbox" name="' + key +
                               '" checked="checked" id="id' + key + '">' +
                               '<label for="id' + key + '">'
                                + val.label + '</label>');
    });
    choiceContainer.find("input").click(plotAccordingToChoices);
    var stack = true, Area=true,StackedBar = false, LineGraph = true,points=true;

    $(".graphControls input").click(function (e) {
             var line;
             e.preventDefault();
             stack=true;
             Area=true;
             StackedBar=false;
             LineGraph=true;
             points=true;
             StackedBar = $(this).val().indexOf("Bars") != -1;
             Area = $(this).val().indexOf("stack") != -1;
             if(StackedBar){
                points=false;
                LineGraph=false;
             }
             if(!Area && !StackedBar){
                stack=null;
             }
            plotAccordingToChoices();
    });

    function showTooltip(x, y, contents) {
        $('<div id="tooltip">' + contents + '</div>').css( {
            position: 'absolute',
            display: 'none',
            top: y + 5,
            left: x + 5,
            border: '1px solid #fdd',
            padding: '2px',
            'background-color': '#fee',
            opacity: 0.80
        }).appendTo("body").fadeIn(200);
    }

    var previousPoint = null;
    $("#placeholder").bind("plothover", function (event, pos, item) {

            if (item) {
                if (previousPoint != item.dataIndex) {
                    previousPoint = item.dataIndex;

                    $("#tooltip").remove();
                    var x = item.datapoint[0].toFixed(2),
                        y = item.datapoint[1].toFixed(2);

                    showTooltip(item.pageX, item.pageY,
                                item.series.label + " of " + x + " = " + y);
                }
            }
            else {
                $("#tooltip").remove();
                previousPoint = null;            
            }
    });

    function plotAccordingToChoices() {
        var data = [];
        var data1=[[0,0]];
        var flag=false;
        choiceContainer.find("input:checked").each(function () {
            var key = $(this).attr("name");
            if (key && datasets[key])
                data.push(datasets[key]);
                flag=true;
        });

        if(!flag){
             $.plot($("#placeholder"), data1, {
                series:{
                    stack:true,
                    lines:{
                        show:true,
                        fill:true,
                        fillColor: { colors: [  { opacity: 0.7}, {opacity: 10 } ] }
                    },
                    points:{
                        show:true
                    },
                    grid: { hoverable: true, clickable: true },
                    yaxis: { min: 0 },
                    xaxis: { tickDecimals: 0 }
                }
            });
        }

        if (data.length > 0 && flag){
            $.plot($("#placeholder"), data, {
                series:{
                    stack:stack,
                    lines:{
                            show:LineGraph,
                            fill:Area,
                            fillColor: { colors: [  { opacity: 0.7}, {opacity: 10 } ] }
                    },
                    bars: { show: StackedBar, barWidth: .10 },
                    points:{
                        show:points
                    },
                    grid: { hoverable: true},
                    yaxis: { min: 0 },
                    xaxis: { tickDecimals: 0 }
                }
            });
         }
    }

    plotAccordingToChoices();
 }   

     );

    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:38:59.930

您在情节选项中犯了一些微妙的错误。、`grid`和选项`yaxis`都`xaxis`嵌套在您的`series`选项中。它们应该是这样的顶级选项：

```
$.plot($("#placeholder"), data1, {
        series: {
            stack: true,
            lines: {
                show: true,
                fill: true,
                fillColor: {
                    colors: [{
                        opacity: 0.7
                    }, {
                        opacity: 10
                    }]
                }
            },
            points: {
                show: true
            }
        },  //added this to close the series options
        grid: {
            hoverable: true,
            clickable: true
        },
        yaxis: {
            min: 0
        },
        xaxis: {
            tickDecimals: 0
        }

    });//removed an extra bracket here 
```

这样做的关键是启用`hoverable`业务，而这正是您所缺少的。

将来，请将您的代码示例减少到相关部分。如果您只看到基本绘图调用和占位符 div 的错误，只需发布​​该代码。我们不需要您创建数据集和切换所有位（除非导致错误）。您经常会发现，通过消除代码其他部分的复杂性，您会发现您遇到的错误（在这种情况下可能不是，但仍然如此！）。

# linux - 如何从 Linux 中的 ftrace 中的特定函数开始获取完整的调用图？

> ID：14956516
> 
> 赞同：4
> 
> 时间：2013-02-19T11:36:18.120
> 
> 标签：linux, linux-kernel, ftrace

我想用 ftrace 跟踪特定的函数，但要从该函数进一步调用。

我已经设法在我想要的函数上使用过滤器启动 ftrace，但现在它只向我显示了这个被调用的特定函数。

所以我的问题是：如何打印从特定函数调用的所有函数、这些函数调用的函数等等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-30T06:22:20.903

您还可以设置 max_graph_depth 并获得函数图的更多深度。

以下步骤将有助于生成所选 linux 函数的函数图。

```
1\. cd /sys/kernel/debug/tracing
2\. cat /dev/null >  trace
3\. echo generic_make_request > set_graph_function
4\. echo 10 > max_graph_depth
5\. echo function_graph > current_tracer
6\. echo 1 > tracing_on
7\. dd if=/dev/sddk of=~/test bs=512 count=5
8\. cp trace ~/dd_trace_depth10
9\. echo 0 > tracing_on
10\. echo > set_graph_function
11\. echo 0 > max_graph_depth
12\. cat /dev/null >  trace 
```

**启用跟踪：** 在此示例中，我选择了**过滤函数作为 "generic_make_request"**。因此，第 3 步将图形函数设置为“generic_make_request”linux 函数。然后我们在步骤 4 中将图形深度设置为 10。步骤 5 将当前跟踪器设置为“function_graph”。设置完所有这些后，我们启用跟踪。

**行动：** 现在我们执行我们想要一个 linux 跟踪的行动。在本例中，我们使用 dd 命令执行 I/O。该命令将命中 generic_make_request 函数，文件 /sys/kernel/debug/tracing/trace 将被函数图填充。

**禁用跟踪：** 步骤 9、10、11 将禁用跟踪

参考：[http ://sklinuxblog.blogspot.com/2014/12/generating-function-graph-in-linux.html](http://sklinuxblog.blogspot.com/2014/12/generating-function-graph-in-linux.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T12:49:45.383

我能够解决这个问题。这是以 kmalloc 为例的解决方案。

```
cd /sys/kernel/debug/tracing
echo kmalloc > set_graph_function
echo function_graph > current_tracer
cat trace 
```

请务必在使用 function_graph 之前重置所有过滤器（如 set_ftrace_filter）。

# vb6 - VB6 For Loop 在一个函数中不被接受，在另一个函数中工作正常

> ID：14956520
> 
> 赞同：2
> 
> 时间：2013-02-19T11:36:28.173
> 
> 标签：vb6, foreach, activex

我有一个用 VB6 编写的旧 ActiveX 组件来支持（甚至不必费心要求对其进行现代化改造，这正是我目前所拥有的），它在编译以下代码时做了一些奇怪的事情：

```
Dim connectedPrinter As printer
Dim printers() As String

For Each connectedPrinter In printers
    printers(UBound(printers)) = connectedPrinter.DeviceName
Next 
```

它应该做的就是列出所有连接的打印机。但是，在编译时，VB6 告诉我

> 对于数组上的每个控制变量必须是 Variant

奇怪的是，在**同一**代码库的另一个函数中，我对不同的任务使用完全相同的循环（将当前打印机设置为默认值）

```
Dim pPrinter As printer

For Each pPrinter In printers
    If (pPrinter.DeviceName = sPrinterName) Then
        Set printer = pPrinter
        Exit For
    End If
Next 
```

然而，这被毫不犹豫地接受，编译并且在生产环境中也可以证明是有效的。

这里发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T11:45:00.133

在问题片段中，您有一个名为`printers`隐藏`Printers`集合的本地数组。您可以重命名本地数组，或者通过将其引用为来限定对集合的访问权限`VB.Printers`。

# java - 从 GWT 客户端访问非 GWT servlet

> ID：14956521
> 
> 赞同：0
> 
> 时间：2013-02-19T11:36:32.377
> 
> 标签：java, web-services, rest, gwt, requestfactory

假设有一个第 3 方 RESTful Web 服务在以下位置公开一个 GET 端点：

```
http://someservice.com/api/askAnyQuestion 
```

我想打那个服务，把我的问题放在查询字符串上：

```
http://someservice.com/api/askAnyQuestion&q=Does%20my%20dog%20know%20about%20math%3F 
```

**如何从客户端 GWT 应用程序访问此服务？**我一直在阅读`RequestFactory`教程，但 RF 似乎仅用于提供数据访问层 (DAL) 和 CRUDding 实体，我不完全确定它是否适合此用例。

如果有人可以提供代码示例，而不仅仅是指向我已经阅读过的 GWT 教程的链接，或者我也可能阅读过的一些 Google 员工的博客，则可以获得额外的超级奖励积分 ;-)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:45:24.517

您可以使用[RequestBuilder](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/http/client/RequestBuilder.html)。成功地使用它与 REST 一起工作。

```
 RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, url);
         try {
            builder.sendRequest(null, new RequestCallback() {
                @Override
                public void onError(Request request, Throwable exception) {
                    // process error
                }

                @Override
                public void onResponseReceived(Request request, Response response) {
                    if (200 == response.getStatusCode()) {
                        // process success
                    } else {
                        // process other HTTP response codes
                    }
                }
            });
        } catch (RequestException e) {
            // process exception
        } 
```

另请查看[此问题](https://stackoverflow.com/questions/11121374/gwt-requestbuilder-cross-site-requests)以获取跨站点请求相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:11:08.333

几天前我遇到了同样的问题，并尝试使用 requestBuilder 来实现它。您将收到一个跨域脚本问题。

[https://developers.google.com/web-toolkit/doc/1.6/FAQ_Server#How_can_I_dynamically_fetch_JSON_feeds_from_other_web_domains](https://developers.google.com/web-toolkit/doc/1.6/FAQ_Server#How_can_I_dynamically_fetch_JSON_feeds_from_other_web_domains)？

我确实通过对我的服务器的 RPC 请求以及从那里对跨域 URL 的服务器端 HTTP 请求进行了处理。

[https://developers.google.com/web-toolkit/doc/latest/tutorial/Xsite](https://developers.google.com/web-toolkit/doc/latest/tutorial/Xsite)

```
public static void SendRequest(String method, String notifications) {
    String url = SERVICE_BASE_URL + method;

    JSONObject requestObject = new JSONObject();
    JSONArray notificationsArray =null;
    JSONObject mainRequest = new JSONObject();
    try {
        notificationsArray = new JSONArray(notifications);
        requestObject.put("notifications", notificationsArray);

        mainRequest.put("request", requestObject);
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    HttpURLConnection connection = null;
    try
    {
        URL server = new URL(url);
        connection = (HttpURLConnection) server.openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Type", "application/json");
        connection.setDoInput(true);
        connection.setDoOutput(true);

        DataOutputStream writer = new DataOutputStream(connection.getOutputStream());
        writer.writeBytes(mainRequest.toString());
        writer.flush();
        writer.close();

        parseResponse(connection);
    }
    catch (Exception e)
    {
        System.out.println("An error occurred: " + e.getMessage());
    }
    finally
    {
        if (connection != null)
        {
            connection.disconnect();
        }
    }
} 
```

# tfs - TFS2012 权限：如何删除用户？

> ID：14956523
> 
> 赞同：0
> 
> 时间：2013-02-19T11:36:33.333
> 
> 标签：tfs

我曾经添加了一个用户来更改一个特定项目文件夹的权限。现在他可以从其组继承权限，我只是想将他从列表中删除。如何从该特定项目文件夹的权限管理中删除此用户？

我检查了文档，但没有提到用户删除：http: [//msdn.microsoft.com/en-us/library/ms252470.aspx](http://msdn.microsoft.com/en-us/library/ms252470.aspx)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:46:40.177

从网页界面：

*   导航到 http://{yourtfs}:8080/tfs/{collection}/{project}/_admin/_security
*   单击左窗格顶部的“用户”链接
*   找到用户并选择它
*   在右侧窗格中，单击“成员”链接
*   您可以通过单击组旁边的“删除”链接轻松地将用户从您想要的组中删除

# ios - viewDidUnload 和 didReceiveMemoryWarning 兼容性

> ID：14956524
> 
> 赞同：0
> 
> 时间：2013-02-19T11:36:36.083
> 
> 标签：ios

ios6不允许viewDidUnload，所以如何兼容viewDidUnload和didReceiveMemoryWarning来调用。我需要

```
- (void)viewDidUnload{

self.listArr=nil;

[super viewDidUnload];
}  

 - (void)didReceiveMemoryWarning
{

[super didReceiveMemoryWarning];
float sysVer =[[[UIDevice currentDevice] systemVersion] floatValue];
if (sysVer>= 6.0f){
    if([self isViewLoaded] && !self.view.window){
        self.listArr=nil;

        self.view = nil;
    }
}

 NSLog(@" BrowseComment didReceiveMemoryWarning"); 
```

}

或仅在 ios5 和 ios6 使用以下代码

```
- (void)didReceiveMemoryWarning
{

[super didReceiveMemoryWarning];

    if([self isViewLoaded] && !self.view.window){
        self.listArr=nil;

        self.view = nil;
    }

 NSLog(@" BrowseComment didReceiveMemoryWarning"); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:41:41.103

> 在 iOS 6 中，UIViewController 的**viewWillUnload**和**viewDidUnload**方法现已弃用。如果您使用这些方法来释放数据，请改用**didReceiveMemoryWarning**方法。如果不使用视图控制器的视图，您也可以使用此方法释放对视图控制器的视图的引用。

当前使用的代码`viewDidUnload`应移至 `didReceiveMemoryWarning`. 它也适用于 iOS5 和 iOS6。实际上，在此更改发生之前，`viewDidUnload`仅当应用程序确实收到内存警告时才调用该方法。所以`viewDidUnload`没有什么特别的意义。所以他们弃用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:43:19.087

从 iOS 6 开始，`viewDidUnload`并`viewWillUnload`没有任何作用。

因此，如果您需要处理内存警告，请在`didReceiveMemoryWarning`

# mysql - 如何填补每周数据的空白？

> ID：14956525
> 
> 赞同：1
> 
> 时间：2013-02-19T11:36:41.030
> 
> 标签：mysql

我有一个包含 4 个字段（id、Year、Week、Totals）的表。

我需要一个查询，我猜想使用连接来根据年和周字段填充零值。

在我的示例中，我需要为 2013 年第 3 周和第 4 周填充零值

```
Rec Id, Year, Week, Totals
1, '2012', '52', '23'
2, '2013', '1' , '9'
3, '2013', '2' , '4'

Missing record from DB -> null, '2013', '3' , '0'
Missing record from DB -> null, '2013', '4' , '0'

4, '2013', '5' , '5'
5, '2013', '6' , '6'
6, '2013', '7' , '5' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:48:49.510

那是一个有趣的！好的，我们开始吧。首先，我会给你一个简单的版本，它依赖于几个假设：

1.  您的表中已经至少有一个条目每年
2.  对于任何给定的年份，您的表中至少每周都有一个。IE：此查询返回从 1 到 52 的所有数字：

    从 your_table 中选择 DISTINCT 周

鉴于这些限制，这个查询应该做你想做的事：

```
INSERT INTO your_table (id, year, week, totals)
    SELECT null, y, w, 0 FROM (
        SELECT DISTINCT week w FROM your_table
    ) weeks
    CROSS JOIN 
    (
        SELECT DISTINCT year y FROM your_table
    ) years
    WHERE
        (y > (select min(year) from your_table) OR w > (select min(week) from your_table where `year`=y))
        AND
        (y < (select max(year) from your_table) OR w < (select max(week) from your_table where `year`=y))
        AND 
        NOT EXISTS (select year, week from your_table where `year`=y AND `week`=w) 
```

如果条件 2 可能不满足 - 如果每年缺少几周，您可以替换此行

```
SELECT DISTINCT week w FROM your_table 
```

和

```
SELECT
    (TWO_1.SeqValue + TWO_2.SeqValue + TWO_4.SeqValue + TWO_8.SeqValue + TWO_16.SeqValue + TWO_32.SeqValue) w
FROM
    (SELECT 0 SeqValue UNION ALL SELECT 1 SeqValue) TWO_1
    CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 2 SeqValue) TWO_2
    CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 4 SeqValue) TWO_4
    CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 8 SeqValue) TWO_8
    CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 16 SeqValue) TWO_16
    CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 32 SeqValue) TWO_32
HAVING w >= 1 AND w <= 52 
```

给出这个更一般的情况：

```
INSERT INTO your_table (id, year, week, totals)
    SELECT null, y, w, 0 FROM (
        SELECT
            (TWO_1.SeqValue + TWO_2.SeqValue + TWO_4.SeqValue + TWO_8.SeqValue + TWO_16.SeqValue + TWO_32.SeqValue) w
        FROM
            (SELECT 0 SeqValue UNION ALL SELECT 1 SeqValue) TWO_1
            CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 2 SeqValue) TWO_2
            CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 4 SeqValue) TWO_4
            CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 8 SeqValue) TWO_8
            CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 16 SeqValue) TWO_16
            CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 32 SeqValue) TWO_32
        HAVING w >= 1 AND w <= 52
    ) weeks
    CROSS JOIN 
    (
        SELECT DISTINCT year y FROM your_table
    ) years
    WHERE
        (y > (select min(year) from your_table) OR w > (select min(week) from your_table where `year`=y))
        AND
        (y < (select max(year) from your_table) OR w < (select max(week) from your_table where `year`=y))
        AND 
        NOT EXISTS (select year, week from your_table where `year`=y AND `week`=w) 
```

（如果不满足条件 1，您可以使用类似的技术来生成年份列表，但我猜您没有整整一年的漏洞。）

最后，如果您有一个年和周的唯一索引，则可以稍微简化一下。如果您还没有这样的索引，您可以像这样创建它：

```
ALTER TABLE `your_table` ADD CONSTRAINT date UNIQUE (
`year`,
`week`
) 
```

如果你愿意，你可以在完成后将其删除，如下所示：

```
ALTER TABLE `your_table` DROP INDEX date; 
```

在这种情况下，可以删除 where 子句的最后部分：

```
AND 
NOT EXISTS (select year, week from your_table where `year`=y AND `week`=w) 
```

因为 INSERT IGNORE 将跳过已经存在该唯一年/周组合的任何行。

感谢这个范围生成代码的答案：[https ://stackoverflow.com/a/8349837/160565](https://stackoverflow.com/a/8349837/160565)

# ios - iOS上的Phonegap插件不调用本机代码

> ID：14956527
> 
> 赞同：1
> 
> 时间：2013-02-19T11:36:45.553
> 
> 标签：ios, cordova, plugins

我正在尝试在 iOS 上实现我的第一个 phonegap 插件（2.3 版） - 但本机函数的调用似乎不起作用。

我的插件基于此介绍： [http ://docs.phonegap.com/en/2.3.0/guide_plugin-development_ios_index.md.html#Developing%20a%20Plugin%20on%20iOS](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_ios_index.md.html#Developing%20a%20Plugin%20on%20iOS)

所以我添加到 config.xml 的插件部分：

```
<plugin name="Echo" value="Echo" /> 
```

我的调用javascript：

```
$(document).ready (function (){
    $('#testBtn').submit(function () { 
        alert("test");
        var param = ["a", false];
        cordova.exec(
            function(winParam) { alert("ok");    },
            function(err)      { alert("error"); },
            "Echo", "echo", param);
        return false;
    });
} 
```

（第一行中的警报通过推送我的 testBtn 来调用，所以其余的也应该执行......）

在我的插件目录中：

回声.h：

```
#import <Cordova/CDV.h>

@interface Echo : CDVPlugin

    - (void)echo:(CDVInvokedUrlCommand*)command;

@end 
```

回声：

```
#import "Echo.h"

@implementation Echo

- (void)echo:(CDVInvokedUrlCommand*)command
{
    NSLog(@"echo!");
}

@end 
```

Echo.m 中的 echo-Function 永远不会被调用……谁能告诉我为什么？我没有收到任何错误消息 - 只是没有任何反应......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:36:39.313

我和你一样在这一步中挣扎。然后我在设备准备好后调用了那个javascript函数。问题已解决。现在，它工作正常...

# solr - ajaxsolr 自动完成只建议一个词

> ID：14956530
> 
> 赞同：0
> 
> 时间：2013-02-19T11:36:50.443
> 
> 标签：solr

我已经在本地框中设置了 ajax solr。我遵循了 github 上的教程。我在我的 sajax-solr 实例中集成了自动完成功能。

一旦我按下“空格”键，我的自动完成功能只会提示第一个世界，它不会提供任何进一步的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T18:11:23.620

ajax-solr 正在使用 facet 来生成将被建议的单词字典。默认情况下，Facets 将拆分每个单词的结果。

如果将每个短语复制到[此处提到的多值列表，则可以拥有完整的“标题”建议器或短语搜索器](https://serverfault.com/questions/463047/not-getting-desired-results-from-solr-facets)

```
<copyField source="manufacturer" dest="manufacturerFacet"/> 
```

这会将您尝试存储在制造商字段中的数据自动复制到制造商Facet。通过这种方式，您可以使用字符串作为基本标准类型，无需标记化，将manufacturerFacet 字段设置为如下所示。

```
<field name="manufacturerFacet" type="string" indexed="true" stored="false" multiValued="true"/>
<fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/> 
```

所以，你要做的就是在一个多值字段中复制每个......标题、制造商或类别字段（无论你想作为短语搜索的字段），然后在你的 ajax-solr 建议器中指向该列表。

# jquery - 看看链接文本是否用 jQuery 换成了 2 行？

> ID：14956536
> 
> 赞同：3
> 
> 时间：2013-02-19T11:37:28.270
> 
> 标签：jquery

我有下面的 CSS 和 HTML。我有一个菜单，其中 lis 是设置的高度和宽度，并且具有相对位置。它们中的链接绝对定位以占用所有可用空间，以便整个 li 都是可点击的。到现在为止还挺好。

问题是链接文本的数量可能会有所不同。当链接文本换行到 2 行（例如第二个链接）时，我希望垂直填充更少。我会为此添加一个类到第二个链接，除了解决方案需要是动态的并且使用 javascript。菜单可能会更改，以便第一个链接有更多文本并换行成 2 行，在这种情况下，我也需要删除它的垂直填充。我需要在不需要更改代码的情况下发生这种情况。

我开始研究 jQuery 的解决方案。我尝试测量链接的高度，所以如果它高于“x”，那么我可以添加删除垂直填充的类。但是，这不起作用，因为高度是由绝对定位设置的。

是否有另一种方法来衡量文本是否换行到 2 行？我可以计算字符的数量，但这似乎并不可靠，因为某些字符比其他字符占用更多的宽度。

如果我在包含文本的链接中添加一个跨度，它会起作用吗？那么大概链接仍然可以绝对定位并且它的跨度可以测量它的高度？

[http://jsfiddle.net/cUQbJ/3/](http://jsfiddle.net/cUQbJ/3/)

```
<li>
    <a href="#">Link1</a>    
</li>    
<li>
    <a href="#">Link 2 with long text</a>    
</li>    
<li>
    <a href="#">Link3</a>    
</li>    

 li {
   display: block;
    float: left;
    position: relative;
    text-align: center;
    width: 83px;
    min-height: 53px;
    background-color: grey;
    margin-right: 5px;
}
a {
    padding-top: 13px;
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left:0;
} 
```

更新 - 我需要支持 IE7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:30:02.820

我通过使用 jQuery 在链接文本周围插入一个跨度来解决这个问题。然后 jQuery 测量跨度的高度，并在需要时对其 li 应用填充。

从响应的角度来看，这可能不是最好的解决方案，如果用户调整浏览器的大小，但它对我有用，这只是一个样式问题，所以如果出了点问题，这不是世界末日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:54:03.827

这里不需要使用任何 JS。

让我们稍微修改一下 HTML 结构。我将链接内容包装在`span`. 我们将垂直对齐这些跨度而不是`a`标签。

```
<li>
    <a href="#" class="valign"><span class="valigned">Link 2 with long text</span></a>
</li> 
```

[http://jsfiddle.net/cUQbJ/5/](http://jsfiddle.net/cUQbJ/5/)

我将主要的 CSS 抽象为两个单独的类`.valign`（对于父类）和`.valigned`（需要居中的类）。

# php - 如何使用键值对php创建多维数组

> ID：14956540
> 
> 赞同：0
> 
> 时间：2013-02-19T11:37:45.853
> 
> 标签：php, multidimensional-array

我有两个这样的数组：

数组 1 的 x 轴值在数组中 y 轴值在数组中

```
x-array: ["04 Feb","05 Feb","06 Feb","07 Feb","08 Feb","09 Feb","10 Feb"]
y-array: [3.27,3.34,3.27,3.2,3.28,3.17,3.15] 
```

Array2 在数组中具有 x 轴值 y 轴值在数组中

```
x-array2: ["11 Feb", "12 Feb"]
y-array2: [3.19, 3.36] 
```

如何使用键值对创建多维数组。

就像下面的php

```
Array
(
    [0] => Array
        (
            [x-axis] => Array
                (
                    [0] => 04 Feb
                    [1] => 05 Feb
                    [2] => 06 Feb
                    [3] => 07 Feb
                    [4] => 08 Feb
                    [5] => 09 Feb
                    [6] => 10 Feb
                )

            [y-axis] => Array
                (
                    [0] => 3.27
                    [1] => 3.34
                    [2] => 3.27
                    [3] => 3.2
                    [4] => 3.28
                    [5] => 3.17
                    [6] => 3.15
                )

        )

    [1] => Array
        (
            [x-axis] => Array
                (
                    [0] => 11 Feb
                    [1] => 12 Feb
                )

            [y-axis] => Array
                (
                    [0] => 3.19
                    [1] => 3.36
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:42:45.490

```
$array = array(
  0 => array(
    "x-axis" => $x_array,
    "y-axis" => $y_array),
  1 => array(
    "x-axis" => $x_array2,
    "y-axis" => $y_array2)
) ;

var_dump($array) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:43:28.090

```
$new_array = array(array("x-axis"=>$x-axis-array,
                         "y-axis"=>$y-axis-array
                        ),
                   array("x-axis"=>$x-axis-array2,
                         "y-axis"=>$y-axis-array2
                        )
                  );

echo "<pre>";
print_r($new_array); 
```

# windows - 串行 I/O 与 Windows/Windows CE 重叠/非重叠

> ID：14956541
> 
> 赞同：6
> 
> 时间：2013-02-19T11:37:48.067
> 
> 标签：windows, io, serial-port, windows-ce

很抱歉，这不是什么大问题，但更多的是帮助人们在这些特定的事情上遇到问题。我正在处理的问题需要使用串行 I/O，但主要在 Windows CE 6.0 下运行。但是，最近有人问我是否也可以使该应用程序也可以在 Windows 下运行，所以我开始着手解决这个问题。我确实花了很多时间环顾四周，看看是否有人有我正在寻找的答案，这一切都被认为是很多错误信息和在某些情况下基本上是错误的事情。所以在解决了这个问题之后，我想我会和大家分享我的发现，这样任何遇到这些困难的人都会有答案。

*在 Windows CE 下，不*支持OVERLAPPED I/O 。这意味着通过串口进行双向通信可能会很麻烦。主要问题是当您等待来自串行端口的数据时，您无法发送数据，因为这样做会导致您的主线程阻塞，直到读取操作完成或超时（取决于您是否设置了超时）

像大多数做串行 I/O 的人一样，我设置了一个读取串行线程来读取串行端口，它使用带有 EV_RXCHAR 掩码的 WaitCommEvent() 来等待串行数据。现在这就是 Windows 和 Windows CE 出现困难的地方。

如果我有一个像这样的简单读者线程，例如：-

```
UINT SimpleReaderThread(LPVOID thParam)
{
    DWORD eMask;
    WaitCommEvent(thParam, &eMask, NULL);
    MessageBox(NULL, TEXT("Thread Exited"), TEXT("Hello"), MB_OK);
} 
```

显然在上面的例子中，我没有从串口或任何东西读取数据，我假设 thParam 包含打开的 comm 端口句柄等。现在，当你的线程执行并命中时，问题出在 Windows 下WaitCommEvent()，你的阅读器线程将进入睡眠等待串口数据。好的，这很好，应该是这样，但是......你如何结束这个线程并让 MessageBox() 出现？好吧，事实证明，它实际上并不那么容易，并且是 Windows CE 和 Windows 在其串行 I/O 方式上的根本区别。

在 Windows CE 下，您可以做一些事情来使 WaitCommEvent() 失败，例如 SetCommMask(COMMPORT_HANDLE, 0) 甚至 CloseHandle(COMMPORT_HANDLE)。这将允许您正确终止线程，从而释放串行端口以再次开始发送数据。然而，这些东西都不会在 Windows 下工作，并且都会导致你调用它们的线程在等待 WaitCommEvent() 完成时进入睡眠状态。那么，在Windows下如何结束WaitCommEvent()呢？好吧，通常您会使用 OVERLAPPED I/O 并且线程阻塞不会成为问题，但是由于该解决方案还必须与 Windows CE 兼容，因此不能选择 OVERLAPPED I/O。在 Windows 下，您可以做一件事来结束 WaitCommEvent()，即调用 CancelSynchronousIo() 函数，这将结束您的 WaitCommEvent()，但请注意这可能取决于设备。CancelSynchronousIo() 的主要问题是它也不被 Windows CE 支持，所以你用它来解决这个问题很不走运！

你是怎么做到的？事实上，要解决这个问题，您根本不能使用 WaitCommEvent()，因为在 Windows CE 支持的 Windows 上无法终止此函数。然后，ReadFile() 将在读取 NON OVERLAPPED I/O 时再次阻塞，这*将*与 Comm Timeouts 一起使用。

使用 ReadFile() 和 COMMTIMEOUTS 结构确实意味着您必须有一个紧密的循环来等待您的串行数据，但是如果您没有接收到大量的串行数据，那应该不是问题。此外，以小超时结束循环的事件也将确保将资源传递回系统，并且您不会以 100% 的负载锤击处理器。以下是我提出的解决方案，如果您认为可以改进，我们将不胜感激。

```
typedef struct
{
    UINT8 sync;
    UINT8 op
    UINT8 dev;
    UINT8 node;
    UINT8 data;
    UINT8 csum;
} COMMDAT;

COMSTAT cs = {0};
DWORD byte_count;
COMMDAT cd;

ZeroMemory(&cd, sizeof(COMMDAT));
bool recv = false;
do
{
    ClearCommError(comm_handle, 0, &cs);
    if (cs.cbInQue == sizeof(COMMDAT))
    {
        ReadFile(comm_handle, &cd, sizeof(COMMDAT), &byte_count, NULL);
        recv = true;
    }
} while ((WaitForSingleObject(event_handle, 2) != WAIT_OBJECT_0) && !recv);
ThreadExit(recv ? cd.data : 0xFF); 
```

因此，要结束线程，您只需在 event_handle 中发出事件信号，并允许您正确退出线程并清理资源并在 Windows 和 Windows CE 上正常工作。

希望能帮助我见过的每个人都遇到过这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T14:56:31.893

由于我认为我上面的评论存在误解，这里有更多关于不使用紧密循环的可能解决方案的详细信息。请注意，这些使用运行时确定，因此在两个操作系统下都很好（尽管无论如何您都必须为每个目标单独编译），并且由于两者都不使用`#ifdef`它，因此不太可能最终在一侧或另一侧破坏编译器而您不会立即注意到。

首先，您可以动态加载 CancelSynchonousIo 并在操作系统中使用它。甚至可以选择做某事而不是取消 CE（比如关闭句柄？）；

```
typedef BOOL (WINAPI *CancelIo)(HANDLE hThread);

HANDLE hPort;

BOOL CancelStub(HANDLE h)
{
    // stub for WinCE
    CloseHandle(hPort);
}

void IoWithCancel()
{
    CancelIo cancelFcn;

    cancelFcn = (CancelIo)GetProcAddress(
        GetModuleHandle(_T("kernel32.dll")), 
        _T("CancelSynchronousIo"));

    // if for some reason you want something to happen in CE
    if(cancelFcn == NULL)
    {
        cancelFcn = (CancelIo)CancelStub;
    }

    hPort = CreateFile( /* blah, blah */);

    // do my I/O

    if(cancelFcn != NULL)
    {
        cancelFcn(hPort);
    }
} 
```

另一个选项需要更多的工作，因为您可能会有不同的线程模型（尽管如果您使用 C++，无论如何基于平台的单独类将是一个很好的情况）将确定平台并在桌面上使用重叠：

```
HANDLE hPort;

void IoWithOverlapped()
{
    DWORD overlapped = 0;
    OSVERSIONINFO version;

    GetVersionEx(&version);
    version.dwOSVersionInfoSize = sizeof(OSVERSIONINFO);
    if((version.dwPlatformId == VER_PLATFORM_WIN32_WINDOWS)
        || (version.dwPlatformId == VER_PLATFORM_WIN32_NT))
    {
        overlapped = FILE_FLAG_OVERLAPPED;
    }
    else
    {
        // create a receive thread
    }

    hPort = CreateFile(
        _T("COM1:"), 
        GENERIC_READ | GENERIC_WRITE, 
        FILE_SHARE_READ | FILE_SHARE_WRITE, 
        NULL, 
        OPEN_EXISTING, 
        overlapped,
        NULL);
} 
```

# wpf - WPF：防止工具提示更改组件的鼠标进入/离开事件行为

> ID：14956543
> 
> 赞同：0
> 
> 时间：2013-02-19T11:37:49.910
> 
> 标签：wpf

我有一个 WPF 用户控件，其中有两个自定义控件。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="65" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <MyControl x:Name="leftControl" Grid.Column="0" />
    <MyControl x:Name="rightControl" Grid.Column="2" />
</Grid> 
```

自定义控件对鼠标进入和鼠标离开事件做出反应以进行操作。但是，它们也有工具提示。左侧组件确实显式位于右侧组件上方，以允许工具提示不会被右侧组件隐藏，以防它们到达右侧组件的区域。

我现在的问题：工具提示似乎自行扩展了左侧组件的边界。当显示的工具提示覆盖右侧控件的部分区域并且我将鼠标悬停在右侧控件上时，我会收到两者的进入/离开事件，就好像我一进入工具提示所在的区域就进入了左侧控件一样以前，同时仍然悬停在正确的控件上。

提高鼠标进入或离开时，如何告诉 WPF 忽略工具提示区域？

一些截图来说明：

1.  将鼠标悬停在左侧组件上，工具提示部分覆盖右侧组件的区域 ![1\. 将鼠标悬停在左侧组件上，工具提示部分覆盖右侧组件的区域：](../Images/782229c5530c5049b9c3679239aa04f9.png)

2.  将鼠标悬停在正确的组件上 ![2\. 将鼠标悬停在正确的组件上](../Images/b171d645b7fac63c448ca1fbbd0e4b06.png)

3.  将鼠标悬停在工具提示结束处的正确组件上。已引发进入/离开事件。添加了鼠标光标以说明鼠标光标位置。 ![3\. 将鼠标悬停在工具提示结束处的右侧组件上。 已引发进入/离开事件。 添加鼠标光标以说明鼠标光标位置](../Images/4bbf8ef5682b1c2714d223f36db5a050.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:48:25.010

有一种替代方法可以使用`Tooltip`：[工具提示或类似的东西在 wpf 中随光标移动](https://stackoverflow.com/questions/7581487/a-tooltip-or-something-similar-move-with-cursor-in-wpf)

只需创建一个`Popup`相对于您的鼠标移动的。当你离开控制`Popup`是隐藏的。这是解决您的问题的好方法。您可能想要调整显示它的位置（即，如果它到达右边缘，它会移动到鼠标的左侧）。我知道这不是一个直接的答案，但它是一个解决方案。:)

# jquery - 我想要在 c# 中使用 javascript 和数据库的数据库驱动的自动完成文本框

> ID：14956545
> 
> 赞同：2
> 
> 时间：2013-02-19T11:37:50.450
> 
> 标签：jquery, c#-3.0

我想从我的数据库中获取我的文本框中的机场名称列表，例如当我在文本框中键入 Las 时。文本框应该给 lasvegas。

默认.aspx.cs：

```
public string listFilter = null;

protected void Page_Load(object sender, EventArgs e)
{
    listFilter = BindName();
}

private string BindName()
{
    try
    {
        SqlConnection con = new SqlConnection(@"Data Source=172.16.10.170;Initial Catalog=cbtsv;User ID=cbtsv;Password=cbtsvpass;");
        con.Open();
        DataTable ds = new DataTable();
        using (SqlCommand cmd = con.CreateCommand())
        {
            SqlCommand com = new SqlCommand("select SearchKey from DTAirportCity where SearchKey like '%TextBox1.Text%'", con);
            SqlDataAdapter sda = new SqlDataAdapter(com);

            sda.Fill(ds);

        }

        StringBuilder output = new StringBuilder();
        output.Append("[");
        for (int i = 0; i < ds.Rows.Count; ++i)
        {
            output.Append("\"" + ds.Rows[i]["SearchKey"].ToString() + "\"");

            if (i != (ds.Rows.Count - 1))
            {
                output.Append(",");
            }
        }
        output.Append("];");

        return output.ToString();
        con.Close();
    }
    catch (Exception)
    {

        throw;
    }
} 
```

默认.aspx：

```
<html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server">
 <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
 <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
 <script src="Scripts/jquery-1.4.1-vsdoc.js" type="text/javascript"></script>
 <title></title>
 <script type="text/javascript">
     function LoadList() {
         var dt=null;
     dt = <%=listFilter %>
    }
</script>
</head>
<body>
<form id="form1" runat="server">
<div>

 <asp:TextBox ID="TextBox1" runat="server" OnLoad="LoadList()"></asp:TextBox>    
    <br />

</div>
</form> 
```

问题：- LoadList() 函数不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T11:42:33.380

尝试以下代码，这是工作示例：

```
 $(document).ready(function () {
        $('[ID$=txtPatientLastname]').live('keyup.autocomplete', function () {

            $(this).autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '<%=ResolveUrl("~/Resources/WebService.asmx/GetPatientLastName") %>',
                        data: "{ 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data.d, function (item) {
                                return {
                                    label: item.split('-')[0],
                                    val: item.split('-')[1]
                                }
                            }))
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                },
                minLength: 1
            });
        });
}); 
```

您可以创建一个网络方法，也可以像我一样使用网络服务

网络服务代码：

```
[WebMethod(EnableSession = true)]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string[] GetPatientLastName(string prefix)
{
    List<string> customers = new List<string>();
    using (SqlConnection conn = new SqlConnection())
    {
        string connectionstring = CCMMUtility.GetCacheForWholeApplication();
        conn.ConnectionString = connectionstring;
        using (SqlCommand cmd = new SqlCommand())
        {
            cmd.CommandText = "select distinct top(10) PatientLastname from tblMessage where  " +
            "PatientLastname  like '%'+ @SearchText + '%' order by PatientLastname";
            cmd.Parameters.AddWithValue("@SearchText", prefix);
            cmd.Connection = conn;
            conn.Open();
            using (SqlDataReader sdr = cmd.ExecuteReader())
            {
                while (sdr.Read())
                {
                    customers.Add(string.Format("{0}", sdr["PatientLastname"]));
                }
            }
            conn.Close();
        }
        return customers.ToArray();
    }
} 
```

希望这对你有用。

# sql-server - 按没有 CASE 的列中的特定值排序

> ID：14956548
> 
> 赞同：0
> 
> 时间：2013-02-19T11:37:56.290
> 
> 标签：sql-server, sql-order-by

我有一个带有 ID 和名称的订单表

```
1  Fruits
33 Liquor
48 Tennis bats
58 Vegetables 
95 Poker cards

SELECT * FROM Order ORDER BY... Id = (48, 95, 33, 1, 58) 
```

结果应该是

```
48 Tennis bats
95 Poker cards
33 Liquor
1  Fruits
58 Vegetables 
```

## **问：**如何按我想要的列的值对这些记录进行排序？

我想用这个制作一个通用函数（可能是一个存储过程），所以我**不能**使用 CASE 方法：

```
CASE WHEN Id=48 THEN 0 ELSE 1  END, -- Not this way!!!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:39:43.067

```
create table [Order] (
  ID int, Name varchar(32)
)

insert into [Order]
  values (1, 'Fruits'),
         (33, 'Liquor'),
         (48, 'Tennis bats'),
         (58, 'Vegetables'),
         (95, 'Poker cards')
GO

create function dbo.Orderer(@id int, @orderString varchar(1024))
returns int
as
begin
  set @orderString = replace(',' + @orderString + ',', ' ', '');

  declare @pos int, 
          @str varchar(1024), 
          @itemOrder int;

  set @pos = charindex(',' + cast(@id as varchar(16)) + ',', @orderString);
  if @pos != 0
  begin
    set @orderString = substring(@orderString, 1, @pos + 1);
    set @pos = charindex(',', @orderString);
    set @itemOrder = 0;

    while @pos != 0
    begin
      set @itemOrder += 1;

      set @pos = charindex(',', @orderString, @pos + 1);
    end

    return @itemOrder
  end

  return null
end
GO

select * from [Order]
order by dbo.Orderer(ID, '48, 95, 33, 1, 58') 
```

# c# - C# 将注册表项添加到 LocalMachine 失败

> ID：14956551
> 
> 赞同：3
> 
> 时间：2013-02-19T11:38:05.697
> 
> 标签：c#, registry, 64-bit, administrator, wow64

我正在尝试`LocalMachine`在注册表中添加一个键。我正在使用这段代码：

```
 System.Diagnostics.Debugger.Launch();
    RegistryKey key = Registry.LocalMachine.OpenSubKey("SOFTWARE", true);
    RegistryKey newkey = key.CreateSubKey("1asdasds", RegistryKeyPermissionCheck.ReadWriteSubTree);
    newkey.SetValue("ads", "ddsds");
    newkey.Close(); 
```

我确实在管理员帐户上运行它。我事件以“以管理员身份运行”运行它，但没有任何内容添加到注册表中:(。当我更改`LocalMachine`为时`CurrentUser`，实际上它已添加到`CurrentUser`键中。但是如何强制将其添加到 LocalMachine？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T12:11:25.707

知道了。实际上它被添加了，但是在我的 x64 系统中，我在简单的 C:\Windows\regedit.exe 中看不到它。转到 C:\Windows\SysWOW64\regedit.exe 在 x64 中查看它

# wpf - MVVM - 组合框绑定

> ID：14956552
> 
> 赞同：0
> 
> 时间：2013-02-19T11:38:06.640
> 
> 标签：wpf, mvvm

我有一个绑定到 observableCollection 的 Datagrid。ArticleViewmodel 是 Artcle-Class 的包装器。现在我想在与文章的制造商相同的视图中显示一个组合框。我应该使用制造商创建一个单独的 Viewmodel 还是可以管理它？

再见乔吉

# java - 在 Java + Hibernate + Stripes 中将联系人保存到数据库

> ID：14956553
> 
> 赞同：0
> 
> 时间：2013-02-19T11:38:16.380
> 
> 标签：java, hibernate, jpa, stripes

我最近开始使用去年学习 Ruby 的 Java 后端。我正在尝试做一个简单的“发布”操作，将联系人保存到 MySQL 数据库。（请原谅新手问题）。

我正在使用条纹、JPA 和休眠。我一直在关注关于为 MVC 设置环境的[Stripes 书](http://pragprog.com/book/fdstr/stripes)，但我有点陷入以下错误，我希望有人能指出我正确的方向。我知道错误说我有一个未处理的异常，但我还不够新，我不确定这是否是错误的真正原因，我不确定它是 Hibernate、Java 还是 Stripes 问题。我确定我错过了一些东西，我只是不确定是什么。我将错误与我的一些代码一起发布。

谢谢您的帮助

**错误：**

```
Feb 19, 2013 6:13:38 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [StripesDispatcher] in context with path [] threw exception [Unhandled exception in exception handler.] with root cause
java.lang.NullPointerException
    at veexterior.DAO.impl.BaseDaoImpl.save(BaseDaoImpl.java:46)
    at veexterior.action.ContactActionBean.save(ContactActionBean.java:36)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at net.sourceforge.stripes.controller.DispatcherHelper$6.intercept(DispatcherHelper.java:456)
    at net.sourceforge.stripes.controller.ExecutionContext.proceed(ExecutionContext.java:158)
    at net.sourceforge.stripes.controller.BeforeAfterMethodInterceptor.intercept(BeforeAfterMethodInterceptor.java:113)
    at net.sourceforge.stripes.controller.ExecutionContext.proceed(ExecutionContext.java:155)
    at net.sourceforge.stripes.controller.ExecutionContext.wrap(ExecutionContext.java:74)
    at net.sourceforge.stripes.controller.DispatcherHelper.invokeEventHandler(DispatcherHelper.java:454)
    at net.sourceforge.stripes.controller.DispatcherServlet.invokeEventHandler(DispatcherServlet.java:278)
    at net.sourceforge.stripes.controller.DispatcherServlet.service(DispatcherServlet.java:160)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at net.sourceforge.stripes.controller.StripesFilter.doFilter(StripesFilter.java:260)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

**BaseDAOImpl**

```
package veexterior.DAO.impl;

import org.stripesstuff.stripersist.Stripersist;

import java.io.Serializable;
import java.lang.reflect.ParameterizedType;
import javax.persistence.NonUniqueResultException;
import javax.persistence.NoResultException;
import javax.persistence.Query;
import java.util.List;
import veexterior.DAO.Dao;
import veexterior.models.Contact;

public abstract class BaseDaoImpl<T,ID extends Serializable>
    implements Dao<T,ID>
{
    private Class<T> entityClass;

    @SuppressWarnings("unchecked")
    public BaseDaoImpl() {
        entityClass = (Class<T>)
            ((ParameterizedType) getClass().getGenericSuperclass())
            .getActualTypeArguments()[0];
    }
    /* methods... */

    @SuppressWarnings("unchecked")
    public List<T> read() {
        return Stripersist.getEntityManager()
            .createQuery("from " + entityClass.getName())
            .getResultList();
    }
    public T read(ID id) {
        return Stripersist.getEntityManager().find(entityClass, id);
    }

    @SuppressWarnings("unchecked")
    public void save(T object) {
        Stripersist.getEntityManager().persist(object);
    }
    public void delete(T object) {
        Stripersist.getEntityManager().remove(object);
    }
    public void commit() {
        Stripersist.getEntityManager().getTransaction().commit();
    }

    @SuppressWarnings("unchecked")
    public T findBy(String fieldName, Object value) {
        Query query = Stripersist.getEntityManager()
            .createQuery(getQuery(fieldName, null))
            .setParameter(fieldName, value);
        return getSingleResult(query);
    }

    private String getQuery(String fieldName, Contact contact){
        String query =
            "from " + entityClass.getName() + " t " +
            "where t." + fieldName + " = :" + fieldName;
        if (contact == null) {
            return query;
        }
        return query + " and t.user = :user";
    }
    @SuppressWarnings("unchecked")
    private T getSingleResult(Query query) {
        try {
            return (T) query.getSingleResult();
        }
        catch (NonUniqueResultException exc) {
            return (T) query.getResultList().get(0);
        }
        catch (NoResultException exc) {
            return null;
        }
    }

} 
```

**联系ActionBean**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package veexterior.action;

import net.sourceforge.stripes.action.DefaultHandler;
import net.sourceforge.stripes.action.ForwardResolution;
import net.sourceforge.stripes.action.RedirectResolution;
import net.sourceforge.stripes.action.Resolution;
//import net.sourceforge.stripes.action.SimpleMessage;
import veexterior.models.Contact;
/**
 *
 * @author dave
 */
public class ContactActionBean extends BaseActionBean {
    private static final String FORM="/WEB-INF/contactus.jsp";

    private Contact contact;

    public Contact getContact() {
        return contact;
    }

    public void setContact(Contact contact) {
        this.contact = contact;
    }

    @DefaultHandler
    public Resolution form() {/* (1) */
        return new ForwardResolution(FORM);
    }
    public Resolution save() {
        Contact contact = getContact();
        contactDao.save(contact);
        contactDao.commit();
        return new RedirectResolution(ContactActionBean.class);
    }
} 
```

**用于提交的表格**

```
 <stripes:form beanclass="veexterior.action.ContactActionBean">                   
                    <div class="control-group">
<!--                    <label class="control-label" for="inputEmail">Email</label>-->
                    <div class="controls">
                        <input type="text" id="inputEmail" placeholder="Email" name="contact.email">
                    </div>
                    </div>
                    <div class="control-group">
<!--                        <label class="control-label" for="inputName">Name</label>-->
                        <div class="controls">
                            <input type="text" id="inputName" placeholder="Full Name" name="contact.name">
                        </div>

                    </div>
                    <div class="control-group">
<!--                        <label class="control-label" for="inputName">Company</label>-->
                        <div class="controls">
                            <input type="text" id="inputName" placeholder="Company" name="contact.company">
                        </div>

                    </div>                    
                    <div class="control-group">
                        <textarea rows="5" class="input-xlarge" id="contactusmessage" name="contact.message" placeholder="Enter your message details."></textarea>
                    </div>    
                    <div class="control-group">
                        <div class="controls">
                        <button type="submit" class="btn" name="save">Send it</button>
                        </div>
                    </div>
                </stripes:form> 
```

**我一直在关注的书中的一些代码**

```
package stripesbook.dao.impl.stripersist;

import org.stripesstuff.stripersist.Stripersist;

import java.io.Serializable;
import java.lang.reflect.ParameterizedType;
import java.util.List;
import javax.persistence.NonUniqueResultException;
import javax.persistence.NoResultException;
import javax.persistence.Query;
import stripesbook.dao.Dao;
import stripesbook.model.User;

public abstract class BaseDaoImpl<T,ID extends Serializable>
    implements Dao<T,ID>
{
    private Class<T> entityClass;

    @SuppressWarnings("unchecked")
    public BaseDaoImpl() {
        entityClass = (Class<T>)
            ((ParameterizedType) getClass().getGenericSuperclass())
            .getActualTypeArguments()[0];
    }
    /* methods... */

    @SuppressWarnings("unchecked")
    public List<T> read() {
        return Stripersist.getEntityManager()
            .createQuery("from " + entityClass.getName())
            .getResultList();
    }
    public T read(ID id) {
        return Stripersist.getEntityManager().find(entityClass, id);
    }

    @SuppressWarnings("unchecked")
    public void save(T object) {
        Stripersist.getEntityManager().persist(object);
    }
    public void delete(T object) {
        Stripersist.getEntityManager().remove(object);
    }
    public void commit() {
        Stripersist.getEntityManager().getTransaction().commit();
    }

    @SuppressWarnings("unchecked")
    public T findBy(String fieldName, Object value) {
        Query query = Stripersist.getEntityManager()
            .createQuery(getQuery(fieldName, null))
            .setParameter(fieldName, value);
        return getSingleResult(query);
    }
    @SuppressWarnings("unchecked")
    public T findBy(String fieldName, Object value, User user) {
        Query query = Stripersist.getEntityManager()
            .createQuery(getQuery(fieldName, user))
            .setParameter(fieldName, value)
            .setParameter("user", user);
        return getSingleResult(query);
    }
    private String getQuery(String fieldName, User user){
        String query =
            "from " + entityClass.getName() + " t " +
            "where t." + fieldName + " = :" + fieldName;
        if (user == null) {
            return query;
        }
        return query + " and t.user = :user";
    }
    @SuppressWarnings("unchecked")
    private T getSingleResult(Query query) {
        try {
            return (T) query.getSingleResult();
        }
        catch (NonUniqueResultException exc) {
            return (T) query.getResultList().get(0);
        }
        catch (NoResultException exc) {
            return null;
        }
    }

} 
```

**XML 文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>MyAppsNAme</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

    <filter>
            <display-name>Stripes Filter</display-name>
            <filter-name>StripesFilter</filter-name>
            <filter-class>net.sourceforge.stripes.controller.StripesFilter</filter-class>
            <init-param>
                    <param-name>ActionResolver.Packages</param-name>
                    <param-value>veexterior</param-value>
            </init-param>
            <init-param>
                <param-name>Extension.Packages</param-name>
                <param-value>org.stripesstuff.stripersist</param-value>
            </init-param>
    </filter>

    <filter-mapping>
            <filter-name>StripesFilter</filter-name>
            <url-pattern>*.jsp</url-pattern>
            <dispatcher>REQUEST</dispatcher>
    </filter-mapping>

    <filter-mapping>
            <filter-name>StripesFilter</filter-name>
            <servlet-name>StripesDispatcher</servlet-name>
            <dispatcher>REQUEST</dispatcher>
    </filter-mapping>

    <servlet>
            <servlet-name>StripesDispatcher</servlet-name>
            <servlet-class>net.sourceforge.stripes.controller.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
            <servlet-name>StripesDispatcher</servlet-name>
            <url-pattern>*.action</url-pattern>
    </servlet-mapping>
</web-app> 
```

**Persistence.xml 文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="persistence" transaction-type="RESOURCE_LOCAL">
    <!--  Tell JPA to use Hibernate  -->
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
      <!--  Autodetect entity classes  -->
      <property name="hibernate.archive.autodetection" value="class"/>
      <!--  Automatically create the SQL schema  -->
      <property name="hibernate.hbm2ddl.auto" value="update"/>
      <!--  Tell Hibernate to use MySQL  -->
      <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
      <property name="hibernate.connection.username" value=""/>
      <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
      <property name="hibernate.connection.password" value=""/>
      <property name="hibernate.connection.url" value="Local MySQL Address"/>
      <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
      <!--  Configure the connection pool  -->
      <property name="hibernate.c3p0.min_size" value="5"/>
      <property name="hibernate.c3p0.max_size" value="20"/>
      <property name="hibernate.c3p0.timeout" value="300"/>
      <property name="hibernate.c3p0.max_statements" value="50"/>
      <property name="hibernate.c3p0.idle_test_period" value="3000"/>
    </properties>
  </persistence-unit>
</persistence> 
```

![在此处输入图像描述](../Images/b2852c417637ebc9211532b4b4d2514c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:00:26.327

你有有效的`persistence.xml`吗？您需要它来配置数据源。最后，它必须位于`/WEB-INF/classes/META-INF/persistence.xml`正确启用 Java Persistence 的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:36:34.190

您是否将 Stripersist 包 (org.stripesstuff.stripersist) 添加到 web.xml 中的 Extension.Packages 列表中？省略这将解释 NPE。

# android - 支持具有尺寸限定符的多个屏幕

> ID：14956555
> 
> 赞同：0
> 
> 时间：2013-02-19T11:38:18.020
> 
> 标签：android

我们想为特定分辨率设计布局，如下所示：

三星 Duos：480 X 800 Android 版本 4.0.4 HTC 速度：540 X 960

为此，我们为每个创建了布局文件夹，如下所示：

布局-w480dp-h800dp 布局-w540dp-h960dp

假设如果我们在 samsung duaos 上运行应用程序，它应该从 layout-w480dp-h800dp 文件夹中选择布局，但它给出错误并且无法启动活动。

错误是：

android.content.res.Resources$NotFoundException：资源 ID #0x7f030029

这意味着它无法找到活动所需的布局。HTC Velocity 也是如此。

我们做错了什么吗？

如果您有任何想法，请告诉我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:40:43.510

一定是某些资源的问题尝试从drawable中删除图像文件并再次添加它构建它应该运行的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:42:53.970

您是否尝试过清理和构建？它通常会有所帮助，因为看起来 R 代已损坏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:56:43.233

您是否有与您的活动相关的默认布局？我的意思是每个文件夹都包含同名的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:45:05.437

你的假设是错误的。layout-w480dp-h800dp 不适用于 480x800 像素的屏幕。DP与PX截然不同。请阅读此[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。

你确定你真的需要为如此相似的手机提供不同的设计吗？我会说这是没有意义的。

在我看来，U 最多应该区分 3 种类型的设备。

```
res/layout/main_activity.xml           # For handsets (smaller than 600dp available width)
res/layout-sw600dp/main_activity.xml   # For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/main_activity.xml   # For 10” tablets (720dp wide and bigger) 
```

如果你仍然想做你想做的事情，你可以尝试 px 而不是 dp。但我不确定这是否会奏效......

# java - 将 JUnitCore 与 Spring 一起使用

> ID：14956558
> 
> 赞同：2
> 
> 时间：2013-02-19T11:38:19.520
> 
> 标签：java, spring, junit, junit4

我想从主类执行测试。我努力了：

```
public static void main(String[] args) {
    JUnitCore runner = new JUnitCore();
    runner.run(TestClass.class);
} 
```

和

```
public static void main(String[] args) {
    JUnitCore.main(TestClass.class.getName());
} 
```

但是，此测试使用 Spring 框架，并且未加载 bean。我的测试类如下所示：

```
@NoDataSet
@ContextConfiguration(locations = { "/.../xxx-beans.xml", "/.../yyy-beans.xml",
                    "..." }, inheritLocations = false)
@RunWith(SpringJUnit4ClassRunner.class)
public class TestClass extends AbstractTransactionalJUnit4SpringContextTests {
    @BeforeClass
    public static void beforeClass() {
        // some config
    }

    @Test
    public void testSomething() {
        // testsomething
    }
} 
```

我使用了很多 bean，因此我无法手动加载 bean。

还有其他方法可以开始这个测试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:59:30.523

尝试

```
new JUnitCore().run(new SpringJUnit4ClassRunner(Test1.class)); 
```

或简单地添加

```
@RunWith(SpringJUnit4ClassRunner.class) to TestClass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:19:39.623

该类缺少`@RunWith(SpringJUnit4ClassRunner.class)`注释。如果没有此注解，即使您的构建工具或 IDE 也无法正确执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:26:47.087

我发现了问题。显然，我的工作目录设置为不正确的位置。

我现在使用以下主要方法：

```
public static void main(String[] args) {
    JUnitCore runner = new JUnitCore();
    runner.run(TestClass.class);
} 
```

# iphone - 如何动态调整导航栏中标题的大小

> ID：14956561
> 
> 赞同：24
> 
> 时间：2013-02-19T11:38:36.290
> 
> 标签：iphone, uinavigationcontroller, resize, uinavigationbar, autoresize

我有一些视图显示在导航控制器中。其中两个视图的导航栏标题较长。

问题是当标题太长无法容纳时，会截断某些字符并添加“...”。

有什么办法可以告诉导航栏自动调整标题文本的大小以适应？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-19T16:26:37.093

在 ViewDidload 中使用了以下代码。

目标 C

```
self.title = @"Your TiTle Text";
UILabel* tlabel=[[UILabel alloc] initWithFrame:CGRectMake(0,0, 200, 40)];
tlabel.text=self.navigationItem.title;
tlabel.textColor=[UIColor whiteColor];
tlabel.font = [UIFont fontWithName:@"Helvetica-Bold" size: 30.0];
tlabel.backgroundColor =[UIColor clearColor];
tlabel.adjustsFontSizeToFitWidth=YES;
tlabel.textAlignment = NSTextAlignmentCenter;
self.navigationItem.titleView=tlabel; 
```

斯威夫特版本

```
self.title = "Your Title Text"
let tlabel = UILabel(frame: CGRect(x: 0, y: 0, width: 200, height: 40))
tlabel.text = self.title
tlabel.textColor = UIColor.white
tlabel.font = UIFont.systemFont(ofSize: 30, weight: .bold)
tlabel.backgroundColor = UIColor.clear
tlabel.adjustsFontSizeToFitWidth = true
tlabel.textAlignment = .center
self.navigationItem.titleView = tlabel 
```

希望它对你有用。谢谢

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-11-16T14:17:52.447

接受答案的 Swift 版本 + 将标签文本放在中心：

斯威夫特 2.3：

```
 self.title = "Your TiTle Text"
    let tlabel = UILabel(frame: CGRectMake(0, 0, 200, 40))
    tlabel.text = self.title
    tlabel.textColor = UIColor.whiteColor()
    tlabel.font = UIFont.boldSystemFontOfSize(17) //UIFont(name: "Helvetica", size: 17.0)
    tlabel.backgroundColor = UIColor.clearColor()
    tlabel.adjustsFontSizeToFitWidth = true
    tlabel.textAlignment = .Center
    self.navigationItem.titleView = tlabel 
```

和斯威夫特 3：

```
 self.title = "Your TiTle Text"
    let frame = CGRect(x: 0, y: 0, width: 200, height: 40)
    let tlabel = UILabel(frame: frame)
    tlabel.text = self.title
    tlabel.textColor = UIColor.white
    tlabel.font = UIFont.boldSystemFont(ofSize: 17) //UIFont(name: "Helvetica", size: 17.0)
    tlabel.backgroundColor = UIColor.clear
    tlabel.adjustsFontSizeToFitWidth = true
    tlabel.textAlignment = .center
    self.navigationItem.titleView = tlabel 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-13T22:27:50.327

如果您在 titleView 中添加了视图，并且想要调整视图大小，可以使用以下代码**（Swift 3）**：

```
self.translatesAutoresizingMaskIntoConstraints = false
self.layoutIfNeeded()
self.sizeToFit()
self.translatesAutoresizingMaskIntoConstraints = true 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-13T15:03:13.100

这对我有用

目标 C

```
[UILabel appearanceWhenContainedInInstancesOfClasses:@[[UINavigationBar class]]].adjustsFontSizeToFitWidth = YES; 
```

斯威夫特版本

```
UILabel.appearance(whenContainedInInstancesOf: [UINavigationBar.self]).adjustsFontSizeToFitWidth = true 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-27T12:49:43.467

## Swift 5 和 iOS 13 / iOS 14

**如果您在Swift 5 和 iOS 13**中有一个大标题，上面的答案将不起作用，因为它们只是在您的导航栏中添加了另一个标题。相反，您可以`largeTitleTextAttributes`在需要时使用该属性（自 iOS 11 起可用）来缩小标题。
假设您已经通过故事板或代码设置了大标题，您可以使用以下方法：

```
private func configureNavigationTitle(_ title: String) {
        let tempLabel = UILabel()
        tempLabel.font = UIFont.systemFont(ofSize: 34, weight: .bold)
        tempLabel.text = title

        if tempLabel.intrinsicContentSize.width > UIScreen.main.bounds.width - 30 {
            var currentTextSize: CGFloat = 34
            for _ in 1 ... 34 {
                currentTextSize -= 1
                tempLabel.font = UIFont.systemFont(ofSize: currentTextSize, weight: .bold)
                if tempLabel.intrinsicContentSize.width < UIScreen.main.bounds.width - 30 {
                    break
                }
            }
            navigationController?.navigationBar.largeTitleTextAttributes = [NSAttributedString.Key.font : UIFont.systemFont(ofSize: currentTextSize, weight: .bold)]
        }
        self.title = title
    } 
```

所以本质上我们使用辅助标签来获取标题的宽度，然后我们将缩小字体大小直到标题适合我们的导航栏。调用它`viewDidLoad()`：

```
override func viewDidLoad() {
        super.viewDidLoad(
        configureNavigationTitle("A very long title which fits perfectly fine")
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-04T06:51:18.300

上述解决方案都不能为我可靠地工作。但是我通过使用提供答案的不同元素找到了一个解决方案，它在 Swift 2 中并且非常优雅，因为每次更改标签时它都不需要任何自定义代码，它只是在标题上使用属性观察器。

请注意，在我的例子中，我在导航栏的左侧有一个后退按钮，它将文本放在屏幕中心之外，为了解决这个问题，我使用了属性文本和 tailIndent。以下代码中的所有评论/信息：

```
class VCHowToTopic : UIViewController {

    //add handlers so that any manipulation of the title is caught and transferred to the custom drawn UILabel
    override var title : String? {
        set {
            super.title = newValue
            configureTitleView()
        }
        get {
            return super.title
        }
    }

    //MARK: - lifecycle

    func configureTitleView() {
        //some large number that makes the navigationbar schrink down our view when added
        let someVeryLargeNumber = CGFloat(4096)
        //create our label
        let titleLabel = UILabel(frame: CGRect(x: 0, y: 0, width: someVeryLargeNumber, height: someVeryLargeNumber))
        //0 means unlimited number of lines
        titleLabel.numberOfLines = 0
        //define style of the text (we will be using attributed text)
        let style = NSMutableParagraphStyle()
        style.alignment = .Center
        //top compensate for the backbutton which moves the centered text to the right side of the screen
        //we introduce a negative tail indent, the number of 56 has been experimentally defined and might
        //depend on the size of your custom back button (if you have one), mine is 22x22 px
        style.tailIndent = -56
        //create attributed text also with the right color
        let attrText = NSAttributedString(string: title!, attributes: [NSParagraphStyleAttributeName : style,
            NSForegroundColorAttributeName : UIColor.whiteColor()])
        //configure the label to use the attributed text
        titleLabel.attributedText = attrText
        //add it as the titleview
        navigationItem.titleView = titleLabel
    }

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-10T11:07:21.387

您可以将 UILabel 创建为 UINavigationItem`titleView`并将其设置`adjustsFontSizeToFitWidth`为`true`.

```
class MyViewController: UIViewController {
    override var title: String? {
        didSet {
            (self.navigationItem.titleView as? UILabel)?.text = self.title
        }
    }

    override func viewDidLoad() {
        super.viewDidLoad()

        self.navigationItem.titleView = UILabel().apply {
            $0.font = .boldSystemFont(ofSize: 18)
            $0.minimumScaleFactor = 0.5
            $0.adjustsFontSizeToFitWidth = true
            $0.text = self.title
        }
    }
} 
```

便于使用：

```
myViewController.title = "This is a long title, but don’t worry." 
```

* * *

上面代码中的`apply`闭包是一个技巧，目的是为了让编程体验更好。还有一个`with`关闭。推荐给大家。

```
protocol ScopeFunc {}

extension ScopeFunc {
    @inline(__always) func apply(_ block: (Self) -> ()) -> Self {
        block(self)
        return self
    }

    @inline(__always) func with<R>(_ block: (Self) -> R) -> R {
        return block(self)
    }
}

extension NSObject: ScopeFunc {} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-19T11:40:02.990

您需要使用 uilabel 自定义导航栏标题视图并提供调整字体大小..

```
 [self.navigationItem setTitleView:<"Include any UI View subclass">]; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-05-27T15:41:51.090

这是 Swift 中的一个示例，它也允许多行。使用[PureLayout](https://github.com/smileyborg/PureLayout)简化自动布局。

```
override func viewDidLoad() {
  super.viewDidLoad()
  configureTitleView()
}

func configureTitleView() {
  let titleLabel = UILabel()
  titleLabel.numberOfLines = 0
  titleLabel.textAlignment = .Center
  titleLabel.font = UIFont.boldSystemFontOfSize(17.0)
  titleLabel.text = searchLoc.mapItem.name
  navigationItem.titleView = titleLabel
  titleLabel.autoPinEdgesToSuperviewMargins() // PureLayout method
  titleLabel.adjustsFontSizeToFitWidth = true
} 
```

还有一个使用示例：

![在此处输入图像描述](../Images/252884a178f26ffabbb6813c05611189.png)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-04-30T20:41:06.290

## 斯威夫特 4 和 iOS 13

添加这个，以便我未来的自己可以找到它。由于某种原因添加到 titleView 的视图不喜欢自动调整大小。所以你必须手动完成。

**例子**

```
(navigationItem.titleView as? UILabel)?.text = "A longer string..." // label not resized and text is cut off 
```

* * *

## 解决方案

```
navigationItem.titleView?.translatesAutoresizingMaskIntoConstraints = false
navigationItem.titleView?.setNeedsLayout()
navigationItem.titleView?.layoutIfNeeded()
navigationItem.titleView?.translatesAutoresizingMaskIntoConstraints = true 
```

* * *

感谢@Paolo Musolino 带领我来到这里。

# iphone - 使用 UIPicker 视图在 iPhone 中解析 json 需要帮助

> ID：14956565
> 
> 赞同：0
> 
> 时间：2013-02-19T11:38:55.480
> 
> 标签：iphone, json, uipicker

我是 iPhone 的新手。我想在 JSON 输出中获取特定属性。下面是 JSON 输出：我的要求是在 UIPicker 中显示带有相应国家代码的“RATES”。谁能帮帮我。

```
{
    "license": "License Agreement available at: http://openexchangerates.org/license/",
    "timestamp": 1361260808,
    "base": "USD",
    "rates": {
        "AED": 3.67274,
        "AFN": 51.9082,
        "ALL": 104.737376,
        "AMD": 406.549996,
        "ANG": 1.788975,
        "AOA": 95.945867,
        "ARS": 5.011293,
        "AUD": 0.9682,
        "AWG": 1.7901,
        "AZN": 0.7847
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:49:21.913

这只是一个字典。从数组中的 rates 键中获取所有值并使用该数组加载选择器视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:03:00.953

```
NSData *data = [yourjsonString dataUsingEncoding:NSUTF8StringEncoding];
NSError*error;
NSDictionary *responseDict;
responseDict = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];
NSLog(@"%@",[responseDict valueForKey:@"rates"]);
NSLog(@"%@",[[responseDict valueForKey:@"rates"] valueForKey:@"AED"]);
NSLog(@"%@",[responseDict valueForKey:@"timestamp"]); 
```

我会帮你的。

# css - 媒体查询：使用最小宽度时出错

> ID：14956568
> 
> 赞同：0
> 
> 时间：2013-02-19T11:39:02.157
> 
> 标签：css, media-queries

我使用以下代码仅在大屏幕中显示某些元素：

```
.forkit, .forkit-curtain {
  display: none;
}

@media only screen and (min-width: 1400px) {
  .forkit, .forkit-curtain {
    display: block;
  }
} 
```

但是当屏幕为 1300px 时，元素会显示，并且仅在宽度为 1250px 时才会隐藏，因此媒体查询 min-width 1400px 也适用于屏幕尺寸稍低的情况，这是一种不好的行为。

我不知道为什么媒体查询的屏幕尺寸不好。怎么了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:46:13.703

我怀疑差异不是 50 像素，而是接近 20 像素。更重要的是，我怀疑它不会对所有浏览器做出相同的反应。尝试比较 Chrome 和 Firefox 的断点。如果它们偏离大约 20 像素，则差异是因为：

IE、Firefox 和 Opera[遵循 W3C 规范](http://www.456bereastreet.com/archive/201301/media_query_width_and_vertical_scrollbars/)，在媒体查询中包含滚动条宽度，而 Webkit 浏览器则没有。

因此，当您要求浏览器在 1400 像素处触发时，在大多数浏览器中它将在大约 1383 像素处触发。

您目前不能强制浏览器对其进行相同处理，因此最好的选择是修改您的布局，使其与媒体查询中的宽度不紧密相关（添加额外的边距）。使用这样的布局，当它提前或延迟触发几个像素时，它不会产生太大的影响。

# assembly - 如何在汇编中乘以 2^n？

> ID：14956580
> 
> 赞同：1
> 
> 时间：2013-02-19T11:39:41.143
> 
> 标签：assembly, x86, exponent

给定 2 个数字 x 和 n，将 x 乘以 2^n 的方法是什么？例如 x=3.7 和 n=5。所以 3.7*2^5 = 118.4。我需要在不使用 FPU 命令（数学协处理器）的情况下完成此操作。

所以我认为 32 bt 处理器中的数字由 32 位表示：第一个是符号，接下来的 8 (2-9) 是指数，接下来的 23 被称为 SIGNIFICAND。

指数字段是 2^k 中的 k。所以我需要做的只是改变指数字段并将 n 添加到它。`exponent = exponent + n`.

那么我如何在程序集 8086 中执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:50:12.017

这是一些非常丑陋的内联汇编，VS 风格。希望你能明白：

```
float mul(float f, int p)
{
    __asm {
        mov eax, f
        mov ecx, p
        shl ecx, 23
        add eax, ecx
        mov f, eax
    }

    return f;
} 
```

这显然不检查溢出等。

# php - PHP解包数组

> ID：14956582
> 
> 赞同：5
> 
> 时间：2013-02-19T11:39:41.837
> 
> 标签：php, arrays

我想学习一种解压嵌套数组的聪明方法。例如，我有一个数组变量 $rma_data['status'] 如下所示；

```
 [status] => Array
    (
        [0] => Array
            (
                [created] => 1233062304107
                [statusId] => 5
                [statusName] => Open
            )

        [1] => Array
            (
                [created] => 1233061910603
                [statusId] => 2
                [statusName] => New
            )

        [2] => Array
            (
                [created] => 1233061910603
                [statusId] => 1
                [statusName] => Created
            )

    ) 
```

我想根据条件将 Created 时间戳和 statusId 存储到一个变量中，例如：如果我们发现存在“Open”状态，我们将使用 Open 而不是“New”和“Created”。如果只有 New 和 Created，我们将使用 New 代替。

我这样做的当前版本：

```
for($i=0; $i<count($rma_data['status']); $i++)
                {
                    switch($rma_data['status'][$i]['statusId'])
                    {
                        case 5: 

                                            case 2:

                                            case 3:
                } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:48:55.837

对于中小型规模，您已经拥有的看起来不错。

我唯一的建议是使用额外的变量，例如计数并展开一些紧凑的代码以提高效率和可读性。

例如：

```
$total=count($rma_data['status']);
for($i=0; $i<$total; $i++){
    $x=$rma_data['status'][$i];
    if($x['statusName']=='Open'){ // Use your criteria
        $t=$x['created'];
        //...Do Work
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:00:08.587

如果您真的依赖于 的这三个特定值`statusName`，那么一种更直接、更易读的方法是创建一个状态类型的索引数组，您可以更轻松地对其进行测试。

例如：

```
$rma_statuses = array();
foreach ((array)$rma_data['status'] as $status) :
    $rma_statuses[$status['statusName']] = array(
         'created'=>$status['created'],
         'id'=>$status['statusId']
    );
endforeach;

$rma_stauts = $rma_statuses['open'] ?: ($rma_statuses['new'] ?: $rma_statuses['created']);

 // Do something with $rma_stauts['created'] and $rma_stauts['id'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:12:31.563

```
if(is_array($rma_data['status'])){
 //assuming there are only three values inside it
 //case1
 $open = ( $rma_data['status'][0]['statusName'] == 'Open' || 
           $rma_data['status'][1]['statusName'] == 'Open' || 
           $rma_data['status'][2]['statusName'] == 'Open');
 //case2
 $new = (!$open && 
         ($rma_data['status'][0]['statusName'] == 'New' || 
          $rma_data['status'][1]['statusName'] == 'New' || 
          $rma_data['status'][2]['statusName'] == 'New' ));
 if($open){
  echo 'open';
 }elseif($new){
  echo 'New';
 }else{
  echo 'None';
 }

} 
```

第二：

```
foreach($rma_data['status'] as $key => $val){
 $statusName = $val['statusName'];
 $newarray[$statusName] = $val;
}
echo '<pre>';
print_r($newarray);

if(array_key_exists('Open', $newarray)){
 $created = $newarray['Open']['created'];
 $statusId = $newarray['Open']['statusId'];
 echo 'Open';

}
elseif(array_key_exists('New', $newarray)){
 $created = $newarray['New']['created'];
 $statusId = $newarray['New']['statusId'];
  echo 'New';
}else{
 echo "None";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:46:17.553

我不太了解必要条件，但这可能会有所帮助：

```
$searched_status_id = null;
$searched_timestamp = null;
foreach ($rma_data['status'] as $id => $status) {
    if ((!$searched_timestamp && !$searchуd_status_id) ||
        ($status['statusName'] == 'New' || $status['statusName'] == 'Open')) {
        $searched_timestamp = $status['created'];
        $searched_status_id = $status['statusId'];
    }
    if ($status['statusName'] == 'Open') {
        break;
    }
} 
```

# wpf - 使用转换器对模板列进行排序

> ID：14956586
> 
> 赞同：0
> 
> 时间：2013-02-19T11:39:45.650
> 
> 标签：wpf, xaml, sorting, mvvm, datagrid

我的数据模型是这样的：

```
 public class ModelA
    {
    public int ModelId{get;set;}
    }
    public class ModelB
    {
      public IEnumerable<ModelA> ChildObjects{get;set;}
    } 
```

现在在 Xaml 中，我使用 DataGrid 和 ItemSource 作为 List()，并有一个模板列绑定到 ChildObjects，转换器执行从 ChildObjects 获取第一个元素并将值作为该对象的 ModelId 返回的工作。现在一切正常，直到现在。问题是当我对这个模板列进行排序时。

我知道一种解决方法是在 ModelB 中有一个额外的属性，它可以完成转换器正在执行的工作，并将 xaml 中的 sortmemberpath 作为该新属性名称，但这不是我想要的，因为它与模型相对。

有没有其他完美的方法来处理这种情况，因为 SortMemberPath 不能像它只是一个常量那样表达。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:42:09.803

您已标记此 MVVM，我认为这意味着您的模型实际上是视图模型（或至少被视图模型包装）。既然如此，为什么*不*添加额外的属性？毕竟，它的存在是为了支持这种观点。您的视图需要额外的属性，因此您的视图模型应该提供它。

# php - 如何使用 PHP 启动/停止/重启 Apache 进程

> ID：14956593
> 
> 赞同：0
> 
> 时间：2013-02-19T11:40:10.157
> 
> 标签：php, apache, process, xampp

我们想使用 PHP 杀死当前正在运行的 Apache 进程，我正在使用带有 XAMPP 服务器的 windows 机器。

我正在构建需要在 5 小时后自动重新启动 Apache 的应用程序，因此考虑使用 PHP 编码来停止所有现有的 apache 进程，然后重新启动。

如果有人有其他解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:56:30.163

WinXP SP3 这里带有 xAMPP v1.8.1 VC9：

其他选项：只需使用xAMPP Windows 堆栈提供的`apache_stop.bat`&脚本。`apache_start.bat`用`Scheduled Tasks`;测试 有选项`Run as`选择一个管理员帐户。

# django - Django tables2 将默认排序设置为降序

> ID：14956594
> 
> 赞同：1
> 
> 时间：2013-02-19T11:40:11.263
> 
> 标签：django, django-tables2

当 django-tables2 渲染一个未排序的表时，我想按一列排序，我点击它，默认行为是按升序排序。

有什么办法可以更改它，以便第一次单击按降序排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:10:46.770

可以的，方法如下。

首先，您必须覆盖用于呈现表格的默认 table.html 模板（如果您尚未使用自己的模板）。您可以从 django-tables2 中包含的那个开始。

其次，在模板中，找到用于排序的锚点：

```
{% if column.orderable %}
   <th {{ column.attrs.th.as_html }}><a href="{% querystring table.prefixed_order_by_field=column.order_by_alias.next %}">{{ column.header }}</a></th>
{% else %} 
```

并将其更改为：

```
{% if column.orderable %}
   {% with "-"|add:column.name as sort_col_name %}
   <th {{ column.attrs.th.as_html }}><a href="{% querystring table.prefixed_order_by_field=column.order_by_alias.opposite|default:sort_col_name %}">{{ column.header }}</a></th>
   {% endwith %}
{% else %} 
```

所以我们基本上只是`-`在默认情况下在列名前面添加a，以便在页面加载时没有排序时强制降序排序，并转向`.opposite`而不是`.next`。我们需要这样做，因为`.next`将始终被定义，而`.opposite`在页面加载时将是 None 没有排序，并且默认过滤器将被执行。定义排序后，`.opposite`将正确切换排序顺序。

请注意，这未经测试，如果您有问题，请查看[django-tables2 源](https://github.com/bradleyayers/django-tables2/blob/master/django_tables2/columns/base.py#L376)以获取更多信息。

# c# - 更改应用程序使用的 ip 地址（应用程序层）

> ID：14956598
> 
> 赞同：0
> 
> 时间：2013-02-19T11:40:29.080
> 
> 标签：c#, wmi, web-controls

我们有一个 20 ip 绑定到 nic 的 windows 服务器。目前，我们通过（自动）不时更改IP（）成功地执行（网络）请求`request.ServicePoint.BindIPEndPointDelegate = new BindIPEndPoint(connectionInfo.BindIPEndPointCallback);`。几天以来，我们决定使用一个测试环境，我们使用 .NET 的 WebBrowser 控件来发出 Web 请求。问题从这里开始，因为我们无法提供类似端点的解决方案来更改 webcontrol 正在使用的 ip。这就是我们决定以编程方式更改 IP 的原因，但是每当我们通过 WMI 更改 IP 时，我们都会（一直）使用单个 IP 地址来识别。

这是 wmi 代码：

```
public static void setIP(string IpAddresses, string SubnetMask, string Gateway)
    {
        ManagementClass mc = new ManagementClass("Win32_NetworkAdapterConfiguration");
        ManagementObjectCollection moc = mc.GetInstances();

        foreach (ManagementObject mo in moc)
        {
            if ((bool)mo["IPEnabled"]==true)
            {
                ManagementBaseObject newIP = mo.GetMethodParameters("EnableStatic");
                ManagementBaseObject newGate = mo.GetMethodParameters("SetGateways");
                ManagementBaseObject newDNS = mo.GetMethodParameters("SetDNSServerSearchOrder");

                newGate["DefaultIPGateway"] = new string[] { Gateway };
                newGate["GatewayCostMetric"] = new int[] { 1 };

                newIP["IPAddress"] = IpAddresses.Split(',');
                newIP["SubnetMask"] = new string[] { SubnetMask };

                ManagementBaseObject setIP = mo.InvokeMethod("EnableStatic", newIP, null);
                ManagementBaseObject setGateways = mo.InvokeMethod("SetGateways", newGate, null);
            }
        }
    } 
```

服务器在 VM Ware 上运行，但我认为这不是问题所在。我们做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:11:46.293

不太确定，但您将多个 IP 地址传递给 EnableStatic，但只有一个子网掩码，这可能会导致问题。尝试为每个 IP 地址传递一个子网掩码，即将 newIP["SubnetMask"] 的分配更改为：

```
 newIP["SubnetMask"] = Enumerable.Repeat(SubnetMask, newIP["IPAddress"].Length).ToArray(); 
```

并确保在 IpAddresses 参数中没有任何空格

# javascript - raphael js 字体大小自动调整

> ID：14956601
> 
> 赞同：1
> 
> 时间：2013-02-19T11:40:33.357
> 
> 标签：javascript, raphael

我有一个在一个屏幕上编辑的绘图 - 所有绘制的路径都保存在数据库中作为百分比坐标（因为我知道纸张的宽度和高度）。

之所以这样，是因为我随后在其他页面上以不同尺寸显示相同的绘图（因此可以轻松地将百分比计算回每个尺寸的真实坐标）。

我遇到的问题是我需要在绘图中添加文本，据我所知，没有办法将字体大小设置为必须以像素为单位的百分比。

当然，如果我在 900x500 的纸上编辑绘图，然后它会显示在 450x250 的纸上，这将不起作用——我需要它自动减小与其他所有内容成比例的字体大小。

难以解释的问题 - 希望这对某人来说很清楚有人可以帮忙吗？有什么不同方法的想法吗？

# ios - 如何关闭音频输出ios？

> ID：14956603
> 
> 赞同：1
> 
> 时间：2013-02-19T11:40:40.907
> 
> 标签：ios, audio, core-audio

是否可以关闭设备上的音频输出？

连接耳机后，我需要将声音路由到手机的扬声器。

我需要通过音频输出连接一些设备（如连接耳机），但如果我连接它，则 ios 设备上的语音被阻止。我想关闭音频输出并在需要使用此设备时打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:11:29.997

这违反了 Apple 的人机界面指南。如果您阅读技术使用部分，您会发现标有声音的部分。它描述了使用耳机时的预期行为：

[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/TechnologyUsage/TechnologyUsage.html#//apple_ref/doc/uid/TP40006556-CH18-SW3](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/TechnologyUsage/TechnologyUsage.html#//apple_ref/doc/uid/TP40006556-CH18-SW3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:47:21.660

我不认为你可以这样做。因为苹果非常严格并且坚持他们的功能。

# android - 来自 ContentProvider 的 SimpleCursorAdapter 中的 IllegalStateException“尝试重新打开已经关闭的对象”

> ID：14956608
> 
> 赞同：4
> 
> 时间：2013-02-19T11:41:02.910
> 
> 标签：android, android-contentprovider, android-cursoradapter, android-loadermanager, android-loader

我在 s 中有一系列`ListView`对象，这些对象由 a从活动中获取 a`Fragment`填充。据我了解，所有数据库和关闭操作都完全由和处理，因此我在任何代码中都没有调用任何内容。`CursorAdapter``Cursor``LoaderManager``Cursor``LoaderManager``ContentProvider``.close()`

但是，有时我会遇到此异常：

```
02-19 11:07:12.308 E/AndroidRuntime(18777): java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT * FROM privileges WHERE uuid!=?) 
02-19 11:07:12.308 E/AndroidRuntime(18777): at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:33)
02-19 11:07:12.308 E/AndroidRuntime(18777): at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:82)
02-19 11:07:12.308 E/AndroidRuntime(18777): at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:164)
02-19 11:07:12.308 E/AndroidRuntime(18777): at android.database.sqlite.SQLiteCursor.onMove(SQLiteCursor.java:147)
02-19 11:07:12.308 E/AndroidRuntime(18777): at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:178)
02-19 11:07:12.308 E/AndroidRuntime(18777): at android.database.CursorWrapper.moveToPosition(CursorWrapper.java:162)
02-19 11:07:12.308 E/AndroidRuntime(18777): at android.widget.CursorAdapter.getView(CursorAdapter.java:241) 
```

我将一些日志代码放入我的日志中，`CursorAdapter`告诉我何时或正在被调用，似乎在给定适配器的第一次发生这种情况，而对于另一个适配器则发生了很多s。当用户在应用程序中导航了很多之后，也会发生这种情况。`getView(...)``getItem(...)``getItemId(...)``getView(...)``getView(...)`

这让我想知道`Cursor`适配器的 是否保留在 中`CursorAdapter`，但被`ContentProvider`或错误关闭`Loader`。这可能吗？我应该`CursorAdapter`根据应用程序/活动/片段生命周期事件进行任何内务管理吗？

`ContentProvider`查询方法：

```
class MyContentProvider extends ContentProvider {
//...

    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
        SQLiteDatabase db = mOpenHelper.getReadableDatabase();
        Cursor query = db.query(getTableName(uri), projection, selection, selectionArgs, null, null, sortOrder);
        query.setNotificationUri(getContext().getContentResolver(), uri);
        return query;
    }

//...
} 
```

典型`LoaderCallbacks`：

```
LoaderCallbacks<Cursor> mCallbacks = new LoaderCallbacks<Cursor>() {

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        mArticleAdapter.swapCursor(null);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        if(cursor.isClosed()) {
            Log.d(TAG, "CURSOR RETURNED CLOSED");
            Activity activity = getActivity();
            if(activity!=null) {
                activity.getLoaderManager().restartLoader(mFragmentId, null, mCallbacks);
            }
            return;
        }
        mArticleAdapter.swapCursor(cursor);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        triggerArticleFeed();
        CursorLoader cursorLoader = null;

        if(id == mFragmentId) {
            cursorLoader = new CursorLoader(getActivity(),
                                            MyContentProvider.ARTICLES_URI,
                                            null,
                                            ArticlesContentHelper.ARTICLES_WHERE,
                                            ArticlesContentHelper.ARTICLES_WHEREARGS,
                                            null);
        }
        return(cursorLoader);
    }
}; 
```

`CursorAdapter`构造函数：

```
public ArticlesCursorAdapter(Context context, Cursor c) {
    super(context, c, 0);
    mImageloader = new ImageLoader(context);
} 
```

我已经阅读了这个问题，但不幸的是它没有得到我的问题的答案，因为它只是建议使用 a `ContentProvider`，我就是这样。

[IllegalStateException：尝试重新打开已经关闭的对象。SimpleCursorAdapter 问题](https://stackoverflow.com/questions/12358864/illegalstateexception-attempt-to-re-open-an-already-closed-object-simplecursor)

**刚刚曝光的重要新信息**

我在项目的其他地方发现了一些其他代码，它们没有使用`Loader`s 并且没有正确管理它`Cursor`的 s。我刚刚切换了这段代码以使用与上面相同的模式；但是，如果这可以解决问题，则表明`Cursor`项目的某个部分中未受管理的人可能会在其他地方杀死受适当管理的人。

停在附近。

**新信息的结果**

那并没有解决它。

**新理念**

```
@Override
onDestroyView() {
    getActivity().getLoaderManager().destroyLoader(mFragmentId);
    //any other destroy-time code
    super.onDestroyView()
} 
```

即可能是的，我*应该*对`CursorAdapter`（或者更确切地说`CursorLoader`符合生命周期事件）进行内务处理。

**新理念的成果**

没有。

**以前的想法**

一旦我添加了一个小调整，结果就可以工作了！但是它太复杂了，我可能应该重写整个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:45:48.567

你更新你的数据集了吗？可能是由于通知内容解析器中的更改而重新加载了游标：

```
getContentResolver().notifyChange(URI, null); 
```

如果您设置了通知 URI，这将触发您当前的游标关闭，并由游标加载器返回一个新游标。如果你注册了一个 onLoadCompleteListener，你就可以抓住新的光标：

```
mCursorLoader.registerListener(0, new OnLoadCompleteListener<Cursor>() {
    @Override
    public void onLoadComplete(Loader<Cursor> loader, Cursor cursor) {
        // Set your listview's CursorAdapter
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T12:17:37.630

您可以尝试将 null 路径而不是光标放入适配器构造函数中。然后在适配器中使用 SwapCursor(Cursor c)，将光标数据的初始化移到那里并在数据加载器的 OnLoadFinished(Loader loader, Cursor data) 方法中调用它。

```
enter code here
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
    // ... building your query here
       mSimpleCursorAdapter = new mSimpleCursorAdapter(getActivity().getApplicationContext(),
           layout, null, from, to, flags);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
       contentAdapter.swapCursor(data);
    } 
```

# android - 在Android的侧面TextView中设置Cursor

> ID：14956610
> 
> 赞同：0
> 
> 时间：2013-02-19T11:41:08.673
> 
> 标签：android, android-layout

我必须在文本视图中设置光标。我的光标在文本视图之外闪烁。

我在android中使用xml代码。

```
 <EditText
   android:id="@+id/et_uname"
   android:layout_width="150dip"
   android:layout_height="wrap_content"
   android:layout_marginRight="10dp"
   android:layout_marginTop="10dp"
   android:gravity="fill_vertical"
   android:background="@drawable/textviewstyle" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:15:07.520

```
et_username.setText("Updated Text From another Activity");
int position = et_username.length();
Editable etext = et_username.getText();
Selection.setSelection(etext, position); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:50:18.707

感谢朋友在您的帮助下，我得到了答案。而且我得到了简单的方法，我想与所有人分享。

```
 <EditText
                 android:id="@+id/et_uname"
                 android:layout_width="150dip"
                 android:layout_height="wrap_content"
                 android:layout_marginRight="10dp"
                 android:layout_marginTop="10dp"
                 android:background="@drawable/textviewstyle" 
                 android:paddingLeft="3dp"/> 
```

通过 android:paddingLeft 我们可以设置光标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:52:15.890

### Java 活动

```
EditText et_username;
protected void onCreate(Bundle savedInstanceState) {
    et_username = (EditText) findViewById(R.id.et_uname);
    int position = et_username.getText().toString().length/2;
    et_username.setSelection(position);
} 
```

# c# - 这段代码是否存在从 NHibernate 生成 NotSupportedException 的工作？

> ID：14956611
> 
> 赞同：0
> 
> 时间：2013-02-19T11:41:11.553
> 
> 标签：c#, linq, nhibernate, notsupportedexception, nhlambdaextensions

以下是代码：

```
list = query.Where(x => ((string)x.GetType()
    .GetProperty(propertyName).GetValue(this, null))
        .EndsWith(filterValue)).ToList(); 
```

这段代码是一个重构的代码，如果我将它分解为它的对象和属性级别，我需要在我的代码项目中重复它一百次。根据我在这个站点的研究，它与 SQL 翻译有关。但是有什么办法可以解决这个代码或其变体可以正常工作的地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:53:47.907

解决方案是创建一个返回指定属性的表达式并将该表达式传递给`Where`：

```
var query = session.Query<YourType>();
list = query.Where(GetExpression<YourType>(propertyName, filterValue)).ToList(); 
```

`GetExpression`看起来像这样：

```
public static Expression<Func<T, bool>> GetExpression<T>(string propertyName,
                                                  string filterValue)
{
    var parameter = Expression.Parameter(typeof(T));
    var property = Expression.Property(parameter, propertyName);
    var method = typeof(string).GetMethod("EndsWith", new [] { typeof(string) });
    var body = Expression.Call(property, method,
                               Expression.Constant(filterValue));
    return (Expression<Func<T, bool>>)Expression.Lambda(body, parameter);
} 
```

# android - 案例表达式必须是常量表达式

> ID：14956616
> 
> 赞同：0
> 
> 时间：2013-02-19T11:41:22.960
> 
> 标签：android, eclipse

我的项目成功运行，但突然出现错误并显示，case 表达式必须是常量表达式，我记得我没有做任何更改，请帮助我。（我的eclipse版本是JUNO）

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:12:50.877

我发现，这可能已经替换了任何源文件或文件夹，并且不会正确更新，唯一的方法是重新创建一个新项目并将所有旧代码放入新项目中。

# sql - 没有销售的回头客

> ID：14956621
> 
> 赞同：2
> 
> 时间：2013-02-19T11:41:40.000
> 
> 标签：sql, sql-server

我是 SQL 的初学者，如果这看起来微不足道/基本，我深表歉意。我正在努力解决它...

我正在尝试生成结果，以显示客户表中从未下过订单的所有客户，因此在发票表上没有条目。

换句话说，我想从客户表中选择发票表中没有客户编号条目的所有客户。

非常感谢，迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:45:30.183

```
SELECT *
FROM customer c
WHERE NOT EXISTS (
         SELECT 1
           FROM invoice i
          WHERE i.customerid = c.customerid
      ) 
```

我建议您也在这里阅读 Oracle 关于不同类型表连接的[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries006.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T11:43:26.330

如果要返回所有客户行，则需要使用`LEFT JOIN`

```
select *
from customer c
left join invoices i
  on c.customerid = i.customerid
where i.customerid is null 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/bd4f8/3)

如果您在学习`JOIN`语法方面需要帮助，那么这里有一个很好[的 join 可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

即使表中没有匹配的行，A`LEFT JOIN`也会返回表中的所有行。如果您只想返回在两个表中匹配的行，那么您将使用. 通过将 添加到查询中，它将仅返回那些在 中不匹配的行。`customer``invoices``INNER JOIN``where i.customerid is null``invoices`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T11:45:25.503

如果 customer_id 是识别客户的列，你应该做这样的事情......

```
select * from Customer
where customer_id not in (select customer_id from invoice) 
```

# wordpress - 显示特定帖子类型的所有分类

> ID：14956624
> 
> 赞同：0
> 
> 时间：2013-02-19T11:41:52.077
> 
> 标签：wordpress, taxonomy, custom-taxonomy

在一个 wordpress 项目中，我创建了一个名为“product”的帖子类型，并注册了名为“product_category”的分类法，这是 heirerchical。我在管理面板中添加了四个类别，分别是“烤箱”、“尼特”、“纺织品”、“服装”。在每一个下，我添加了两个额外的分类，称为“裤子”、“衬衫”，这两个中的每一个我想再添加三个名为“男人”、“女人”、“儿童”的类别……最重要的是，我的结构预期是，

烤箱

-喘气

```
 -Man
 -Woman
 -children 
```

-衬衫

```
 -Man
 -Woman
 -children 
```

尼特

-喘气

```
 -Man
 -Woman
 -children 
```

-衬衫

```
 -Man
 -Woman
 -children 
```

纺织品

->裤子

```
 ->Man
 ->Woman
 ->children 
```

->衬衫

```
 ->Man
 ->Woman
 ->children 
```

服装

->裤子

```
 ->Man
 ->Woman
 ->children 
```

->衬衫

```
 ->Man
 ->Woman
 ->children 
```

在前端，我想像上面的结构一样显示这些，我怎样才能像这样显示这些分类法，以便单击最后一级分类法，将显示相关的帖子，为此我应该如何进行分类法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:06:03.400

你需要编辑你的主题文件。例如，如果您使用“二十一十二”主题，则在“content.php”中添加以下内容`<div class="entry-content">`

```
<ul class="entry-taxonomies">
  <?php // taxonomies
  $id = get_the_ID();
  foreach ( get_object_taxonomies( 'post' ) as $taxonomy ) {
    $terms_list = get_the_term_list( $id, $taxonomy, '<ul class="tax-terms"><li>', '<span class="tax-sep">'.__( ', ', 'twentytwelve' ).'</span></li><li>','</li></ul>' );
    if ( $terms_list ) {?>                  
     <li><span class="tax-taxonomy"><?php echo $taxonomy; ?></span><?php echo $terms_list; ?></li><?php
    }
  }?>
  </ul> 
```

更多信息：[http ://wp.tutsplus.com/tutorials/plugins/a-guide-to-wordpress-custom-post-types-taxonomies-admin-columns-filters-and-archives/](http://wp.tutsplus.com/tutorials/plugins/a-guide-to-wordpress-custom-post-types-taxonomies-admin-columns-filters-and-archives/)

希望这可以帮助。B.

# android - 如何设置两个不同的 WakefulIntentService AlarmListeners？

> ID：14956626
> 
> 赞同：0
> 
> 时间：2013-02-19T11:42:09.813
> 
> 标签：android, commonsware-cwac

我正在使用 Commonsware 的 WakefulIntentService ( [https://github.com/commonsguy/cwac-wakeful](https://github.com/commonsguy/cwac-wakeful) ) 在我的 Android 应用程序中触发定期作业（更新图像缓存）。到目前为止一切顺利，但我想添加一个不同的 WakefulIntentService，以不同的时间间隔做不同的工作。

我不确定我是否可以做到这一点以及如何做到这一点。目前，我正在安排这样的警报：

```
WakefulIntentService.scheduleAlarms(new CacheAlarmListener(), mContext, true); 
```

CacheAlarmListener 的实现是这样的：

```
@Override
public void scheduleAlarms(AlarmManager alarmManager, PendingIntent pendingIntent, Context context) {
    alarmManager.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime() + 60000, AlarmManager.INTERVAL_HALF_HOUR, pendingIntent);
}

@Override
public void sendWakefulWork(Context context) {
    WakefulIntentService.sendWakefulWork(context, CacheRefreshService.class);
} 
```

查看源代码，[getListener(Context)](https://github.com/commonsguy/cwac-wakeful/blob/master/src/com/commonsware/cwac/wakeful/AlarmReceiver.java#L56) 方法`AlarmReceiver`似乎找到并触发了单个 AlarmListener。我错了，还是有另一种方法来安排警报或设置不同的 PendingIntent？

基本上，我希望能够在方法中注册一个新的、单独的`AlarmListener`，或者至少能够弄清楚`WakefulIntentService`将作品发送到哪个`sendWakefulWork(Context)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:59:35.073

> 到目前为止一切顺利，但我想添加一个不同的 WakefulIntentService 来做不同的工作

你不需要这样做。一个人`WakefulIntentService`可以根据不同的`Intent`特征（例如，操作字符串、附加功能）做多种事情。在同一个项目中有多个`WakefulIntentService`实现是未经测试的——除非有人能说服我它的必要性，否则它是不受支持的。

> AlarmReceiver 中的 getListener(Context) 方法似乎找到并触发了单个 AlarmListener。我错了吗

不，你是对的。

> 是否有另一种方法来安排警报或设置不同的 PendingIntent？

按照[项目 README 中的“基本用法”说明进行操作](https://github.com/commonsguy/cwac-wakeful#basic-usage)。

> 或者至少能够弄清楚将工作发送到哪个 WakefulIntentService

请只拥有一个`WakefulIntentService`。

> 我需要能够触发两种不同的服务。

请只拥有一个`WakefulIntentService`。

# sql - DDL 异常在表上捕获但不在列上

> ID：14956628
> 
> 赞同：2
> 
> 时间：2013-02-19T11:42:11.340
> 
> 标签：sql, sql-server-2008-r2, ddl

假设 MyTable 表已经存在，为什么第一条语句打印了“In catch”，而第二条语句没有打印？

它似乎在重复表名上捕获错误，但在重复列名上没有

第一的：

```
BEGIN TRY

    BEGIN TRANSACTION 

    CREATE TABLE MyTable (id INT)

    COMMIT TRANSACTION

END TRY
BEGIN CATCH
    PRINT 'in Catch'
    ROLLBACK  TRANSACTION
END CATCH 
```

第二：

```
BEGIN TRY

    BEGIN TRANSACTION 

    ALTER TABLE MyTable ADD id INT

    COMMIT TRANSACTION

END TRY
BEGIN CATCH
    PRINT 'in Catch'
    ROLLBACK  TRANSACTION
END CATCH 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:03:42.187

不同之处在于，alter table 语句会生成编译时错误，而不是运行时错误，因此从不执行 catch 块，因为未执行批处理本身。

您可以使用 SQL Server Management Studio 中的显示估计执行计划按钮来检查这一点，您将看到 CREATE TABLE 语句显示了估计计划，而对于 ALTER TABLE 语句，在 SQL Server 甚至可以生成之前就抛出了错误一个计划，因为它无法编译批次。

**编辑-解释：** 这与延迟名称解析在 SQL Server 中的工作方式有关，如果您正在创建一个对象，SQL Server 直到运行时才会检查该对象是否已经存在。但是，如果您引用确实存在的对象中的列，则您引用的列等必须是正确的，否则该语句将无法编译。

这方面的一个例子是存储过程，假设您有下表：

```
create table t1
(
id int
) 
```

然后你创建一个这样的存储过程：

```
create procedure p1
as
begin
select * from t2
end 
```

它将起作用，因为延迟名称解析在创建过程时不需要对象存在，但如果执行它将失败

但是，如果您创建这样的过程：

```
create procedure p2
as
begin
select id2 from t1
end 
```

该过程将无法创建，因为您引用了一个确实存在的对象，因此延迟名称解析规则不再适用。

# jsf-2 - JSF2 上传带有 primefaces 问题的照片

> ID：14956630
> 
> 赞同：0
> 
> 时间：2013-02-19T11:42:23.013
> 
> 标签：jsf-2

我正在使用以下代码片段上传照片，使用 primefaces ：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">
    <h:outputText value="PrimeFaces Single Upload"  />
    <h:form enctype="multipart/form-data">
        <p:fileUpload fileUploadListener="#{uploadPhotoHandler.handleFileUpload}" mode="advanced"
            update="messages" label="Choose a file" sizeLimit="5242880" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
            invalidSizeMessage="The maximum file size allowed is 1 Megabyte !"
            invalidFileMessage="You are allowed to upload only images !" />
        <p:growl id="messages" showDetail="true" sticky="true" /> 
```

我将此组合添加到主页中，`index.xhtml`使用以下命令：`<ui:include src="upload_img_form.xhtml" />`。

主页看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <script type="text/javascript" src="js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="js/jquery-migrate-1.1.1.js"></script>
    <script type="text/javascript" src="js/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="js/jquery.xdr-transport.js"></script>
    <script type="text/javascript" src="js/jquery.fileupload.js"></script>
    <script type="text/javascript" src="themes/jquery-ui-1.10.0.custom/js/jquery-ui-1.10.0.custom.min.js"></script>
    <link type="text/css" rel="stylesheet" href="themes/jquery-ui-1.10.0.custom/css/sunny/jquery-ui-1.10.0.custom.css" />
    <link type="text/css" rel="stylesheet" href="css/base.css" />
    <link type=" text/css" rel="stylesheet" href="css/styles.css" />
</h:head>
<h:body>
    <div id="container" class="container ">
        <ui:include src="upload_img_form.xhtml" />
    </div>
</h:body>
</html> 
```

我有以下问题：

*   进度条不起作用，
*   取消按钮不起作用，最大的问题是 sizeLimit 不验证作为输入给出的文件。
*   即使这不是自动上传，文件也是自动上传的，之前没有点击上传按钮。

问题与该部分 100% 相关，`head`因为如果我删除它，它就会起作用。虽然，它不适用于同一页面中的其他功能，所以我必须保留`js`文件和`styles`.

谢谢您的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:41:00.583

摆脱手动包含的 jQuery。PrimeFaces 已经自动包含自己的副本。如果它们是不同的版本，只会发生冲突，导致各种颜色的JS相关问题。如果您在浏览器的开发人员工具集中检查了 JS 控制台，您会注意到它。

# php - 如何用 PHP 填写“用户名”和“密码”字段？

> ID：14956631
> 
> 赞同：1
> 
> 时间：2013-02-19T11:42:24.500
> 
> 标签：php, scrape

我想用 php 从附属网站上抓取统计信息。我对 php 很陌生，但我知道如何从网站上抓取数据，但是附属网站需要你先登录。

如何填写用户名和密码字段并使用 php 按登录按钮？甚至可以用 php 做到这一点，还是我需要另一种编程语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:45:20.403

您必须使用 Google Chrome 中的开发者工具或 Firefox 中的 Firebug 来分析整个登录过程，以查看发布了哪些字段（表单数据）。

之后，您需要根据您的研究开发一个 cURL 脚本。

![在此处输入图像描述](../Images/f31d7584c3cff657e5bf6cda78bbfb42.png)

# registry - 如何在安装之前知道 ClickOnce 的注册表卸载密钥

> ID：14956638
> 
> 赞同：2
> 
> 时间：2013-02-19T11:42:48.250
> 
> 标签：registry, clickonce

我想检查是否已经安装了某些 clickonce 应用程序...

最简单的方法是检查：

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Uninstall*UnInstallID*

但我不知道从存储库中的某些 ClickOnce 应用程序中检索（通过“.manifest”等） *UnInstallID 。*

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:01:55.093

您可以通过编程方式读取 HKCU\Software\Microsoft\Windows\CurrentVersion\Uninstall 中的键并检查每个键上的 DisplayName。这将匹配 ClickOnce 应用程序的产品名称。如果找到匹配项，则已安装。

如果您可以安装同一应用程序的多个版本，您还可以检查 DisplayVersion，和/或在卸载字符串中搜索匹配的公钥令牌。

# liferay-6 - Liferay：如何将验证 URL 添加到新帐户电子邮件

> ID：14956647
> 
> 赞同：0
> 
> 时间：2013-02-19T11:43:07.263
> 
> 标签：liferay-6

（使用 Liferay 6.1.0-CE-GA1。）我编写了自己的用户注册 portlet。当我使用 UserLocalServiceUtil.addUser(...) 时，sendEmail 参数为 true，并且确实发送了帐户验证通知。

我已经通过添加以下行来修改该通知：

```
Please verify your email address for [$PORTAL_URL$] by clicking this link: [$EMAIL_VERIFICATION_URL$]. 
```

不幸的是，它发送的电子邮件包含这一行，字面意思是：

> 请单击以下链接验证您的 xxx 电子邮件地址：[$EMAIL_VERIFICATION_URL$]。

有什么办法可以使这项工作？我想发送一封带有验证码的电子邮件。我的程序流程需要它。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T10:48:57.650

You should use this after you added the account in the action

```
 ServiceContext serv = ServiceContextFactory.getInstance(request);
UserLocalServiceUtil.sendEmailAddressVerification(user1, user1.getEmailAddress(), serv); 
```

# java - Spring Security @Postfilter 没有被触发

> ID：14956648
> 
> 赞同：1
> 
> 时间：2013-02-19T11:43:07.217
> 
> 标签：java, spring, spring-security

@Postfilter 没有被触发。

我的控制器中有两种方法。listJson 方法调用 list1 方法获取所有项目并以 json 格式返回。我在 list1 方法上有一个 @Postfilter 来过滤项目，并且没有触发过滤器。

问题不在于配置。由于出于测试目的，我尝试将 @Postfilter 放在 listJson 方法上，它确实触发了。你能帮我解决这件事吗？我会很感激。

```
 @RequestMapping(produces = "application/json")
    @ResponseBody
    public String listJson(HttpServletRequest request, HttpServletResponse response) {

    List<Project> items = list1(request, response, Project.class);
    return JsonHelper.toJsonArray(items, request.getContextPath());
    }

    @PostFilter("hasPermission(filterObject, 'read')") 
    private List<Project> list1(HttpServletRequest request, HttpServletResponse response, Class<Project> clazz) {
     Integer[] ia = WebHelper.getDojoGridPaginationInfo(request);
     Integer firstResult = ia[0];
     Integer lastResult = ia[1];

     Entry<String, String> orderBy = WebHelper.getDojoJsonRestStoreOrderBy(request.getP arameterNames());
     Where where = WebHelper.FromJsonToFilterClass(request.getParamet er("filter"));
     List<Project> items = JpaHelper.findEntries(firstResult, lastResult - firstResult + 1, orderBy, where, clazz);
     Integer totalCount = JpaHelper.countEntries(where, clazz).intValue();

     WebHelper.setDojoGridPaginationInfo(firstResult, lastResult, totalCount, response);

     return items;
     } 
```

webmvc-config.xml

```
 <security:global-method-security pre-post-annotations="enabled" proxy-target-class="true">
      <security:expression-handler ref="expressionHandler"/>
      </security:global-method-security> 

       <bean id="myPermissionEvaluator" class="org.springframework.security.acls.AclPermis sionEvaluator">
        <constructor-arg ref="aclService" />
        </bean>

        <bean id="expressionHandler" class="org.springframework.security.access.express ion.method.DefaultMethodSecurityExpressionHandler" >
        <property name="permissionEvaluator" ref="myPermissionEvaluator"/>
        </bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:48:48.720

如果 list1 方法与 listJson 位于同一类/实例上，则不会调用安全建议，因为您正在处理类中的方法。

但是，如果您要将 list1 方法移动到注入的服务类，您将拥有一个遵循注释的建议对象。

**编辑**我想让这一点更清楚 - 所以我包括一个图表，希望能更清楚地解释这一点

```
/mapping -> Project.listJson(HttpServletRequest, HttpServletResponse) |
                                                                      |
                                                                      |
                                                                      |
                                                            ---------------------
                                                            | listJson          |
                                                            |                   |---------|
                                                            |                   |         |
                                                            |                   |         | list1
                                                            |                   |         |
                                                            |                   |         |
                                                            |                   |         |
                                                            |                   |         |
                                                            |  list1            |<--------|
                                                            |                   |
                                                            |                   |
                                                            ---------------------

/mapping -> Project.listJson(HttpServletRequest, HttpServletResponse) |
                                                                      |
                                                                      |
                                                                      |
                                                            ---------------------
                                                            | listJson          |<--------------------------------|
                                                            | svc.list1         |--------->advised(Service)       | run @PostFilter
                                                            |                   |         |                       |
                                                            |                   |         | list1                 |
                                                            ---------------------         |                       |
                                                                                          |                       |
                                                            ---------------------         |                       |
                                                            | Service           |         |                       |
                                                            | list1             |<--------|                       |
                                                            |                   |                                 |
                                                            |                   |---------------------------------|
                                                            --------------------- 
```

# c - 在c中使用结构指针的奇怪问题

> ID：14956649
> 
> 赞同：2
> 
> 时间：2013-02-19T11:43:10.817
> 
> 标签：c, struct, pass-by-reference

好的，所以我对 c 中的结构完全陌生，而且我遇到了一个对我来说似乎很奇怪的问题。
当使用它的指针将简单结构传递给函数时，该结构会自动采用该函数的其他参数之一，因为它是新数据。我不知道为什么会发生这种情况。。此时 move_walker() 应该什么都不做，对吧？

```
typedef struct {
    int x,
        y;
} walker_t;

walker_t* init_walker(int x, int y) {
    walker_t walker;
    walker.x = x;
    walker.y = y;
    walker_t *pointer = malloc(sizeof(walker));
    pointer = &walker;
    return pointer;
}

int move_walker(walker_t * walker, int direction) {
    return 0;
}

walker_t* walker;
walker = init_walker(8,2);

printf("%d %d\n", walker->x, walker->y); //will print '8 2'
move_walker(walker, 3);
printf("%d %d\n", walker->x, walker->y); //will print '0 3' 
```

（我很确定这无关紧要，但这段代码实际上分布在多个文件中。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:49:01.923

你`init_walker`错了，因为它返回一个指向堆栈局部变量的指针，`walker`. `init_walker`一旦退出，该变量的内存就会被回收。你的第一个`printf`仍然有效，有点意外，因为你的`walker`变量的值在堆栈上仍然没有被触及。但是，一旦您在此之后进行任何函数调用，原始`init_walker`调用的堆栈帧就会被覆盖，并且`walker`指针现在指向一些随机垃圾。

当你`malloc`在里面`init_walker`时，你已经在堆上为你的`walker_t`. 所以，你应该这样做：

```
walker_t* init_walker(int x, int y) {
    walker_t *pointer = malloc(sizeof(walker_t));
    pointer->x = x;
    pointer->y = y;
    return pointer;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T11:50:37.067

问题是您的`walker`指针指向无效的堆栈内存，因为`init_walker`有一个错误：您在堆栈上创建一个`walker_t`结构，然后保留内存`malloc`并将该内存的地址分配给`pointer`. 到目前为止，一切都很好。

但是，该行`pointer = &walker`不会*将*结构从堆栈复制到新内存，而是`pointer`指向堆栈上的结构！`&walker`是 的地址`walker`，并将其分配给指针。您可能想要做的是复制结构。为此，您必须取消引用您的指针：

`*pointer = walker`

这应该使您的程序按预期工作。您还可以完全跳过堆栈上的结构：

```
walker_t* init_walker(int x, int y) {
    walker_t *walker = malloc(sizeof(walker_t));
    walker->x = x;
    walker->y = y;
    return walker;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T11:48:17.660

您正在堆栈上创建结构对象。您需要使用

```
walker_t* init_walker(int x, int y) {
walker_t* walker = malloc(sizeof(walker_t));
...
return walker;
} 
```

和

```
walker_t *pointer = malloc(sizeof(walker));
pointer = &walker; 
```

您正在创建内存泄漏！您将新内存分配给 *pointer 并在将 &walker 分配给指针时丢失指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:49:29.567

```
 walker_t* init_walker(int x, int y) {
    walker_t walker;
    walker.x = x;
    walker.y = y;
    walker_t *pointer = malloc(sizeof(walker));
    *pointer = walker;  /* here was the error. Copy the value not the adress */
    return pointer;
} 
```

但它可以更简单：

```
walker_t* init_walker(int x, int y) {

    walker_t *pointer = malloc(sizeof(*pointer));
    pointer->x = x;
    pointer->y = y;       
    return pointer;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T13:00:11.740

...或者，在对代码进行完整性检查后，您也可以编写：

```
typedef struct 
{
    int x,
    int y;
} walker_t;

void init_walker(walker_t* obj, int x, int y) 
{
   obj->x = x;
   obj->y = y;
}

walker_t walker;
init_walker(&walker, 8,2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T11:55:47.073

你的代码是把它的政体“非常奇怪”。

这将更好地工作......

```
walker_t *init_walker (int x, int y)
{
    walker_t *p_walker = (walker_t *)malloc (sizeof(walker));

    if (p_walker != NULL)
    {
        p_walker->x = x;
        p_walker->y = y;
    }
    return (p_walker);
} 
```

然后`free (walker)`在你完成他们的时候打电话

# aop - 将方法注册为 aspectj 的侦听器

> ID：14956650
> 
> 赞同：0
> 
> 时间：2013-02-19T11:43:11.033
> 
> 标签：aop, aspectj

我已经知道如何拦截方法执行，但是在这种情况下，我不会直接调用该方法，它应该在触发事件时调用（观察者模式）。如何使用 aspectj 将该方法注册为侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:39:50.170

AspectJ 以及 AJDT for Eclipse 包含代码示例，其中包括一个实现观察者设计模式的示例。转到[AspectJ 文档](http://eclipse.org/aspectj/doc/next/index.html)页面，选择[示例](http://eclipse.org/aspectj/doc/next/examples/)，然后从那里下载[源代码](http://eclipse.org/aspectj/doc/next/examples/examples.zip)存档。

# python - 无法使用烧瓶路由到“/ login”？

> ID：14956656
> 
> 赞同：5
> 
> 时间：2013-02-19T11:43:17.513
> 
> 标签：python, url, flask

当我输入`/login`为 url 时，它会出错

例如：

```
from flask import Flask ,url_for,render_template,request
app = Flask(__name__)

@app.route('/login')
def index():
  return "index"

if __name__== "__main__":
  app.run() 
```

错误原来是这样的：

```
Not Found.
The requested URL was not found on the server. 
```

当我`/login`用`/login/`或任何其他词替换时`/log`，它会没事的。这是怎么发生的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T12:56:23.550

请阅读[烧瓶快速入门](http://flask.pocoo.org/docs/quickstart/) **Unique URLs / Redirection Behavior** , [URL canonicalization](http://en.wikipedia.org/wiki/URL_normalization)和[Trailing slash in URLs - 哪种风格更受欢迎？](https://stackoverflow.com/questions/5948659/trailing-slash-in-urls-which-style-is-preferred)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T14:58:17.050

# 编辑

您可以在路由模块中[关闭严格的 url 模式](http://librelist.com/browser//flask/2013/6/19/turn-off-strict-slashes-on-all-routes/#20a1f846adfe935671b5ffda4ce8f36a)，以使`/login/`请求正常工作

`app = Flask(__name__)`在您定义任何路由之后和之前添加以下代码 。

```
app.url_map.strict_slashes = False 
```

# 原始答案

我的 chrome 以某种方式弄乱了请求。我打开`<F12>`开发者工具，发现它会自动将我的`/login`请求重定向到`/login/`.

```
General
Request URL:http://roxma.org:8000/hello
Request Method:GET
Status Code:301 MOVED PERMANENTLY (from disk cache)
Remote Address:127.0.0.1:1080

Request
Content-Length:263
Content-Type:text/html; charset=utf-8
Date:Wed, 28 Dec 2016 14:24:44 GMT
Location:http://roxma.org:8000/hello/
Server:Werkzeug/0.11.11 Python/3.5.1 
```

这很尴尬。我不知道如何解决这个问题。我想最好的解决方案是改用`/login/`样式。

# java - 在数据库中插入值或更新现有的值

> ID：14956663
> 
> 赞同：0
> 
> 时间：2013-02-19T11:43:36.917
> 
> 标签：java, mysql, jpa, ejb, eclipselink

我正在尝试使用 EclipseLink 管理我的数据库，但我遇到了一个严重的问题。

这是我的简单方法

```
 PUEntityManager.getTransaction().begin();
    if (!PUEntityManager.contains(evento)) {
        PUEntityManager.persist(evento);            
    } else {
        PUEntityManager.merge(evento);
        //PUEntityManager.refresh(evento);
    }
    PUEntityManager.getTransaction().commit(); 
```

如您所见，这真的很容易。如果数据库包含实体，我将合并更改以将它们存储在数据库中，否则我只是创建一个新实体。

但它不会起作用，因为它会引发关于重复主 ket 的异常，即使包含返回 true！

它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:40:02.863

如果实体被放入 Eclipselink 之外的数据库中，那么您将需要尝试加载该实体，然后才能对它进行持久更改。这是确保一致性的唯一可靠方法：

```
Object primaryKey = evento.getPrimaryKey();
Object tmpEvento = PUEntityManager.load( Evento.class, primaryKey )

if ( tmpEvento == null )
{
    tmpEvento = PUEntityManager.persist( evento );
}
else
{
    // If the evento already exists, you need to decide which attributes of
    // the evento in the DB that you want to copy over to the evento
    // you want to merge.  This is only an example.
    tmpEvento.setXXX( evento.getXXX() );
    tmpEvento.setYYY( evento.getYYY() );
    tmpEvento = PUEntityManager.merge( tmpEvento );
}

// I recommend returning the tmpEvento object after persisting or merging.
return tmpEvento; 
```

# hibernate - 使用 Maven 从现有数据库生成 JPA2 实体

> ID：14956665
> 
> 赞同：13
> 
> 时间：2013-02-19T11:43:42.817
> 
> 标签：hibernate, maven, jpa

[从现有数据库生成 JPA 2 实体](https://stackoverflow.com/questions/5833329/generate-jpa-2-entities-from-existing-database)

我想做同样的事情，但使用 Maven 构建。

请推荐插件。当我用谷歌搜索时，我发现使用 JPA 注释实体生成 JPA 的元模型。没有找到与这个问题相关的任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-14T17:14:15.660

因为您使用的是 hibernate，所以默认选项是[hibernate3-maven-plugin](http://mojo.codehaus.org/hibernate3-maven-plugin/)，更具体地说，`hibernate3:hbm2java`目标配置为`<ejb3>true</ejb3>`. 它将生成带注释的 pojo（大多数注释来自标准`javax.persistence`包，但也可能包括 custom `org.hibernate.annotations`）。

在[JBoss 社区](https://community.jboss.org)查看[John Citizen 的回答](https://community.jboss.org/message/801478#801478)以获取示例配置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-14T02:22:04.367

您可以使用[hibernate-tools-maven-plugin](https://search.maven.org/search?q=g:org.hibernate%20AND%20a:hibernate-tools-maven-plugin)。为了使用它，您可以使用以下配置：

```
 <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    <java.version>1.8</java.version>
    <h2.version>1.4.200</h2.version>
    <hibernate-tools-maven-plugin.version>5.4.11.Final</hibernate-tools-maven-plugin.version>
  </properties>
  <build>
    <plugins>
      <plugin>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-tools-maven-plugin</artifactId>
        <version>${hibernate-tools-maven-plugin.version}</version>
        <dependencies>
          <dependency>
            <groupId>jakarta.xml.bind</groupId>
            <artifactId>jakarta.xml.bind-api</artifactId>
            <version>2.3.2</version>
          </dependency>
          <dependency>
            <groupId>org.glassfish.jaxb</groupId>
            <artifactId>jaxb-runtime</artifactId>
            <version>2.3.2</version>
          </dependency>
          <dependency>
            <!-- DB Driver of your choice -->
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>${h2.version}</version>
          </dependency>
        </dependencies>
        <executions>
          <execution>
            <id>Display Help</id>
            <phase>validate</phase>
            <goals>
              <goal>help</goal>
            </goals>
          </execution>
          <execution>
            <id>Entity generation</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>hbm2java</goal>
            </goals>
            <configuration>
              <ejb3>true</ejb3>
              <jdk5>true</jdk5>
            </configuration>
          </execution>
          <execution>
            <id>Schema generation</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>hbm2ddl</goal>
            </goals>
            <configuration>
              <delimiter>;</delimiter>
              <haltOnError>true</haltOnError>
              <format>true</format>
            </configuration>
          </execution>
        </executions>
        <configuration>
          <revengFile>${project.basedir}/src/main/hibernate/hibernate.reveng.xml</revengFile>
          <configFile>${project.basedir}/src/main/hibernate/hibernate.cfg.xml</configFile>
          <detectManyToMany>true</detectManyToMany>
          <detectOneToOne>true</detectOneToOne>
          <detectOptimisticLock>true</detectOptimisticLock>
          <createCollectionForForeignKey>true</createCollectionForForeignKey>
          <createManyToOneForForeignKey>true</createManyToOneForForeignKey>
        </configuration>
      </plugin>
    </plugins>
  </build> 
```

运行`mvn generate-resources`，您将找到生成的 JPA 实体和 test.mv.db H2-Database（项目的根文件夹）的 Schema DDL。

连接配置`hibernate.cfg.xml`位于`src/main/hibernate`. 在我们的案例中有以下内容：

```
<?xml version = "1.0" encoding = "utf-8"?>
<!DOCTYPE hibernate-configuration SYSTEM
  "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.H2Dialect</property>
    <property name="hibernate.connection.driver_class">org.h2.Driver</property>
    <property name="hibernate.connection.url">jdbc:h2:./test;DB_CLOSE_ON_EXIT=FALSE</property>
    <property name="hibernate.connection.username">sa</property>
    <property name="hibernate.connection.password"></property>
    <property name="hibernate.connection.pool_size">1</property>
    <property name="hibernate.show_sql">true</property>
  </session-factory>
</hibernate-configuration> 
```

我们使用该`hibernate.reveng.xml`文件来自定义映射类型配置，例如为了使用`java.time`我们可以使用的类型：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-reverse-engineering SYSTEM
  "http://hibernate.org/dtd/hibernate-reverse-engineering-3.0.dtd" >

<hibernate-reverse-engineering>

  <type-mapping>
    <sql-type jdbc-type="DATE" hibernate-type="java.time.LocalDate"/>
    <sql-type jdbc-type="TIMESTAMP" hibernate-type="java.time.LocalDateTime"/>
  </type-mapping>

</hibernate-reverse-engineering> 
```

完整的项目可以在[Github](https://github.com/earth001/hibernate-tools-maven-plugin-sample)上找到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-08-31T17:21:23.957

实现这一点的官方方法是[hibernate-tools-maven-plugin](https://github.com/hibernate/hibernate-tools/tree/master/maven)。这是一个关于如何集成插件的详细说明的博客。

[https://web.archive.org/web/20201013105933/https://jonamlabs.com/how-to-use-hibernate-tools-maven-plugin-to-generate-jpa-entities-from-an-existing-数据库/](https://web.archive.org/web/20201013105933/https://jonamlabs.com/how-to-use-hibernate-tools-maven-plugin-to-generate-jpa-entities-from-an-existing-database/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-14T15:20:22.817

您应该尝试 MinuteProject :(它生成 Maven 项目)

[http://minuteproject.wikispaces.com/](http://minuteproject.wikispaces.com/)

[http://javacodesamples.wordpress.com/2011/02/04/jpa2-reverse-engineering-tool/](http://javacodesamples.wordpress.com/2011/02/04/jpa2-reverse-engineering-tool/)

# java - 让用户通过提供 ISA 特定身份验证（用户和密码）的 ISA 代理服务器的 Java 代码

> ID：14956667
> 
> 赞同：2
> 
> 时间：2013-02-19T11:43:51.263
> 
> 标签：java, proxy, httpwebrequest

网页通过我公司的ISA代理服务器我公司专用的ISA代理服务器过滤网上冲浪，也通过它下载和设置配额。

如何使我的网页的用户以完全访问权限上网的任务。给定以下设施：例如：如果我的 Windows 用户名：x 和 x 被授予从互联网冲浪和下载的很少权限，那么我希望我的网页允许用户输入 URL，然后通过代理发送 HTTP 请求X 以外的其他用户（x 是 Windows 登录用户），用户（例如 Y）可以完全访问互联网……这意味着我有身份验证（用户名和密码），我想将其作为常量放在我的代码中授予使用我的网页的任何用户对互联网的完全访问权限

我怎么能做这样的任务？

# c# - 当一个进程在c#中执行时如何禁用其他按钮？

> ID：14956669
> 
> 赞同：-1
> 
> 时间：2013-02-19T11:43:55.390
> 
> 标签：c#, backgroundworker

我使用后台工作程序运行了一个耗时的过程，并且在执行上述过程时我禁用了所有其他按钮。但是当我尝试禁用其他按钮时，我得到跨线程异常无效错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:45:24.750

在启动后台工作程序之前禁用您的按钮。

```
DisableButton(); // runs on UI thread
backgroundWorker.RunWorkerAsync(); 
```

然后使用[RunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)事件处理程序来启用按钮：

```
void backgroundWorker_RunWorkerCompleted(object s, RunWorkerCompletedEventArgs e)
{
    EnableButtons(); // runs on UI thread
} 
```

# opencv - inRange 查询图像输出

> ID：14956672
> 
> 赞同：0
> 
> 时间：2013-02-19T11:44:06.217
> 
> 标签：opencv, image-processing

我已经开始学习opencv并编写了下面的代码来获取hsv中的图像（来自输入相机）和inRange图像的输出！hsv 输出很好，但 inRange o/p 只是空白：| 请帮助我难过

```
int main(int argc[], char** argv[])
   {
VideoCapture camera(CV_CAP_ANY);
Mat input;
Mat output(Size(input.size().height,input.size().width),input.type());
Mat img_thresh(Size(640,480),input.type());

namedWindow("input",0);
namedWindow("output",0);
namedWindow("threshold",0);

cv::Scalar hsv_min = cvScalar(0, 30, 80, 0);
    cv::Scalar hsv_max = cvScalar(20, 150, 255, 0);

for(;;)
{
    camera >> input;

    cvtColor(input,output,CV_BGR2HSV,1);
    cv::inRange(input,hsv_min,hsv_max,img_thresh);  

    imshow("input",input);
    imshow("output",output);
    imshow("threshold",img_thresh);

    cv::waitKey(40);    
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T12:38:13.617

您将 inRange 函数应用于输入 BGR 图像。您必须将其应用于 HSV 图像，在您的代码中命名为输出。所以该行应该是：

```
cv::inRange(output,hsv_min,hsv_max,img_thresh); 
```

您的代码正在运行，但您没有使用正确的图像！

如果您想知道图像中的 HSV 值，我建议您使用：

```
cvSetMouseCallback("input", getObjectColor); 
```

和 ：

```
void getObjectColor(int event, int x, int y, int flags, void *param = NULL) {

    // Vars
    CvScalar pixel;
    IplImage *hsv;

    if(event == CV_EVENT_LBUTTONUP) {

        // Get the hsv image
        hsv = cvCloneImage(image);
        cvCvtColor(image, hsv, CV_BGR2HSV);

        // Get the selected pixel
        pixel = cvGet2D(hsv, y, x);
        cvShowImage("getObjColor", hsv);
        // Change the value of the tracked color with the color of the selected pixel
        h = (int)pixel.val[0];
        s = (int)pixel.val[1];
        v = (int)pixel.val[2];
        cout << "Color HSV = h:" << pixel.val[0] << " | s:" << pixel.val[1] << " | v:" << pixel.val[2] << endl;

        // Release the memory of the hsv image
            cvReleaseImage(&hsv);
    } 
} 
```

您需要创建一些变量才能使其工作，代码取自互联网（不记得在哪里！）

# asp.net-mvc - return View(model) 找到视图但传递一个空模型

> ID：14956674
> 
> 赞同：1
> 
> 时间：2013-02-19T11:44:06.507
> 
> 标签：asp.net-mvc, razor, viewengine

我正在将一个旧项目的视图从 ASPX 转移到 Razor，我几乎已经完成了它，没有任何重大问题，但是我遇到了一些强类型视图的此类问题。问题是当控制器使用返回视图时

```
return View(model) 
```

View Egine 总是为所有控制器操作找到正确的视图，但是当 View 尝试访问模型时，模型始终为空。但是如果我使用

```
return View (ViewName, model) 
```

一切都像魅力一样。

所以我的问题是，当视图使用 ASPX 而不是 Razor 时，为什么第一个选项可以完美运行？

和

为什么它找到视图但传递了一个空模型？

# elasticsearch - 带有字段用户名的弹性搜索查询：a 停止工作

> ID：14956677
> 
> 赞同：0
> 
> 时间：2013-02-19T11:44:19.363
> 
> 标签：elasticsearch

我有一个带有字段的 CouchDB 文档`username`。下面的查询适用于除“a”之外的所有值。这很奇怪，因为它曾经工作过。我删除了我的索引并再次尝试，但没有任何区别。我也没有看到任何错误。我正在使用带有 River 插件的 CouchDB 1.2.1。

作品：`curl http://localhost:9200/profiles/_search?q=username:b`

不工作：`curl http://localhost:9200/profiles/_search?q=username:a`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:31:10.350

我猜您之前使用了一些映射，而您不再使用了？我猜现在您正在使用默认映射，其中单词“a”是停用词。因此，单词“a”根本没有被索引。您可能希望在映射中将用户名字段配置为 not_analyzed，因为我猜您想按原样索引它，而不进行标记或其他任何操作。

# python - 从另一个基于类的视图中调用基于类的视图

> ID：14956678
> 
> 赞同：31
> 
> 时间：2013-02-19T11:44:20.750
> 
> 标签：python, django, django-class-based-views

我正在尝试调用基于类的视图并且我能够做到，但由于某种原因，我没有得到我正在调用的新类的上下文

```
class ShowAppsView(LoginRequiredMixin, CurrentUserIdMixin, TemplateView):
    template_name = "accounts/thing.html"

    @method_decorator(csrf_exempt)
    def dispatch(self, *args, **kwargs):
        return super(ShowAppsView, self).dispatch(*args, **kwargs)

    def get(self, request, username, **kwargs):
        u = get_object_or_404(User, pk=self.current_user_id(request))

        if u.username == username:
            cities_list=City.objects.filter(user_id__exact=self.current_user_id(request)).order_by('-kms')
            allcategories = Category.objects.all()
            allcities = City.objects.all()
            rating_list = Rating.objects.filter(user=u)
            totalMiles = 0
            for city in cities_list:
                totalMiles = totalMiles + city.kms

        return self.render_to_response({'totalMiles': totalMiles , 'cities_list':cities_list,'rating_list':rating_list,'allcities' : allcities, 'allcategories':allcategories})

class ManageAppView(LoginRequiredMixin, CheckTokenMixin, CurrentUserIdMixin,TemplateView):
    template_name = "accounts/thing.html"

    def compute_context(self, request, username):
        #some logic here                        
        if u.username == username:
            if request.GET.get('action') == 'delete':
                #some logic here and then:
                ShowAppsView.as_view()(request,username) 
```

我做错了什么伙计们？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-19T12:32:02.777

代替

```
ShowAppsView.as_view()(self.request) 
```

我不得不这样做

```
return ShowAppsView.as_view()(self.request) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:54:21.447

[当你开始在 python 中使用多重继承](http://docs.python.org/2/tutorial/classes.html#multiple-inheritance)时，事情会变得更加复杂，所以你很容易用继承的 mixin 来践踏你的上下文。

您并没有完全说出您正在获得哪个上下文以及您想要哪个上下文（您没有定义新的上下文），因此很难完全诊断，但请尝试重新排列您的 mixin 的顺序；

```
class ShowAppsView(LoginRequiredMixin, CurrentUserIdMixin, TemplateView): 
```

这意味着`LoginRequiredMixin`它将是第一个继承的类，因此如果它具有您要查找的属性，它将优先于其他类 - 如果没有，则 python 将查找`CurrentUserIdMixin`，依此类推。

如果您想真正确定您获得了您所追求的上下文，您可以添加一个覆盖，例如

```
def get_context(self, request):
    super(<my desired context mixin>), self).get_context(request) 
```

以确保您获得的上下文是您想要的 mixin 中的上下文。

*** 编辑 *** 我不知道你在哪里找到`compute_context`的，但它不是 django 属性，所以只会`ShowAppsView.get()`从`ManageAppView`.

# c# - 保护跨域调用

> ID：14956679
> 
> 赞同：0
> 
> 时间：2013-02-19T11:44:30.507
> 
> 标签：c#, security, cross-domain

我们正在使用在客户端机器上运行的程序来控制其设备（扫描仪、打印机等）。

在服务器端，.net 网站生成 javascript 以使用跨域调用该程序的方法。

一个模式会更好地解释它，命令请求和响应是红色的： ![在此处输入图像描述](../Images/9ae7e5c83e95921d3c8dd6d012682a97.png)

当我们谈论安全性时，问题就来了，任何网站（不属于我们的）都可以使用跨域来调用我们的程序并可能执行任何事情。

我不知道如何确保它的安全，我们想确保该命令已由我们的服务器启动。

这种安全行为是否已经存在模式？

如果没有，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:56:50.893

当客户端浏览器连接时，它可以从公司局域网获取令牌（SSL？），该令牌可以传递给可执行文件。然后可执行文件将令牌发送到公司局域网进行验证。

# javascript - 按下按钮时执行jquery自动完成

> ID：14956680
> 
> 赞同：3
> 
> 时间：2013-02-19T11:44:30.977
> 
> 标签：javascript, jquery, ajax, jquery-ui, autocomplete

我有一个文本字段和一个论坛按钮（不提交）。我希望用户在文本字段中输入一个位置，然后单击按钮。我希望按钮触发文本字段上的自动完成事件，该事件将调用 ajax 以返回可能的值。

我知道如何执行自动完成的实际机制，但它是通过按钮触发的，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:50:57.447

好吧，您可能想使用库来实现您的结果。

例如：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

在你的情况下，它会是这样的：

```
$('button').click(function() {
     $('input').autocomplete('enable');
}); 
```

如在此页面上找到：http: [//api.jqueryui.com/autocomplete/#method-enable](http://api.jqueryui.com/autocomplete/#method-enable)

# javascript - 顶部 yAxis 与底部重叠

> ID：14956682
> 
> 赞同：1
> 
> 时间：2013-02-19T11:44:31.647
> 
> 标签：javascript, highcharts

我创建了一个带有两个 yAxis 的图表，一个在另一个之上。自动缩放打开时看起来没问题。但是当我设置最小值和最大值时，顶部 yAxis 与底部重叠。

```
 chart = new Highcharts.StockChart({
    chart: {
        renderTo: 'container',
        alignTicks: false
    },

    yAxis: [{
        height: 200,
        lineWidth: 2,
        min:150
    }, {
        top: 300,
        height: 100,
        offset: 0,
        lineWidth: 2,
        max:140
    }],
    series: [{
        yAxis: 0,
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }, {
        yAxis: 1,
        data: [71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9] 
    }]
}); 
```

示例在这里： [http://jsfiddle.net/yDj62/2/](http://jsfiddle.net/yDj62/2/)
如何截断顶部 yAxis 的边界？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-18T15:11:13.233

问题`solved`出在 Highstock 的最新版本中。

[http://jsfiddle.net/yDj62/2/](http://jsfiddle.net/yDj62/2/)

# python - 查找 numpy 数组中的最小值以及该数组其余行的相应值

> ID：14956683
> 
> 赞同：9
> 
> 时间：2013-02-19T11:44:33.793
> 
> 标签：python, numpy

考虑以下 NumPy 数组：

```
a = np.array([[1,4], [2,1],(3,10),(4,8)]) 
```

这给出了一个如下所示的数组：

```
array([[ 1,  4],
       [ 2,  1],
       [ 3, 10],
       [ 4,  8]]) 
```

我要做的是找到第二列的最小值（在本例中为 1），然后报告该对的另一个值（在本例中为 2）。我尝试过使用 argmin 之类的东西，但这被第一列中的 1 绊倒了。

有没有办法轻松做到这一点？我也考虑过对数组进行排序，但我似乎无法让它以一种将这些对保持在一起的方式工作。数据是由如下循环生成的，所以如果有一种更简单的方法可以做到这一点*而不是*numpy 数组，我也会把它作为答案：

```
results = np.zeros((100,2))

# Loop over search range, change kappa each time
for i in range(100):
    results[i,0] = function1(x)
    results[i,1] = function2(y) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-19T11:46:31.067

怎么样

```
a[np.argmin(a[:, 1]), 0] 
```

**分解**

一种。抓住第二列

```
>>> a[:, 1]
array([ 4,  1, 10,  8]) 
```

湾。获取第二列最小元素的索引

```
>>> np.argmin(a[:, 1])
1 
```

C。用那个索引`a`来获取对应的行

```
>>> a[np.argmin(a[:, 1])]
array([2, 1]) 
```

d。并取第一个元素

```
>>> a[np.argmin(a[:, 1]), 0]
2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T12:07:32.280

使用`np.argmin`可能是解决这个问题的最好方法。要在纯 python 中执行此操作，您可以使用：

`min(tuple(r[::-1]) for r in a)[::-1]`

# android - Android SDK Manager 不加载最新的 Android SDK 平台 (API 17)

> ID：14956688
> 
> 赞同：12
> 
> 时间：2013-02-19T11:44:56.197
> 
> 标签：android, eclipse, google-maps-android-api-2

当我从 Eclipse 转到 Android SDK Manager 并尝试安装新软件包时，它不允许我安装任何软件包。

这些新软件包中的大多数依赖于安装“Android API 17 SDK 平台”。但是“Android API 17 SDK 平台”没有加载到 Android SDK 管理器的列表中供我安装。

以下是它为避免安装而显示的消息的屏幕截图。

如果有人可以指导我完成此操作，将不胜感激。谢谢。

![在此处输入图像描述](../Images/d82835af8dacb0167b2b2bff4e7b990c.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T12:01:09.210

清除工具 ---> 选项下的缓存或完全禁用它。我之前遇到过由于缓存而无法显示包的问题。

之后确保启用了正确的站点并且包下的过滤器是正确的。然后重新加载列表或重新启动 SDK 管理器。

您还在使用 Platform tools v12，目前是 v16。可能是因为缓存，您无法更新工具，而在旧工具中，有些东西根本不会显示。如果这些都不起作用，请从 Android 开发者主页安装带有 v16 平台工具的当前 v21 SDK。

这可能是 R20 中这个已知问题的一种形式：

[http://tools.android.com/knownissues](http://tools.android.com/knownissues)

> “说明：Tools 20.0.0 中的 SDK 管理器现在有一个缓存机制——它保留一个小型清单 XML 文件的本地副本，以便在打开时执行更快的启动。还有一个自动更新缓存的机制。但是在 Tools 20.0 .0 和 20.0.1，刷新被破坏，在某些情况下，除非执行重新加载，否则管理器不会显示可用的新工具。清除 SDK 管理器缓存或手动强制重新加载会强制管理器获取最新清单。 "

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:52:21.683

也许你应该取消选中左下角的“显示”“已安装”，它应该显示“SDK平台”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:57:09.840

尝试从 Packages -> Reload 重新加载 sdk 管理器。然后尝试安装sdks。

# grails - 如何避免 Grails 域模拟的 spock 中的空字段错误

> ID：14956702
> 
> 赞同：0
> 
> 时间：2013-02-19T11:45:37.063
> 
> 标签：grails, spock

给定这个简单的域，使用 grails 2.2.0

```
class Order {
    static mapping = {table "ticket_order"}

    String foo
} 
```

以及相关的 spock 测试

```
@TestFor(Order)
class OrderSpec extends Specification {
def "sensible constraints for order class"() {
    setup:
      mockForConstraintsTests(Order)

      when:
      def order = new Order(
        foo : foo
      )
      order.validate()

      then:
        !order.errors.hasFieldErrors("foo")

      where:
        foo = "bar"

}
} 
```

我得到这个输出

```
grails> test-app unit: Order -echoOut
| Running 1 spock test... 1 of 1
--Output from sensible constraints for order class--
| Failure:  sensible constraints for order class(uk.co.seoss.presscm.OrderSpec)
|  Condition not satisfied:

!order.errors.hasFieldErrors("foo")
||     |      |
||     |      true
||     org.codehaus.groovy.grails.plugins.testing.GrailsMockErrors: 1 errors
||     Field error in object 'uk.co.seoss.presscm.Order' on field 'foo': rejected value [null]; 
```

有人可以解释为什么我得到那个空值，我没有正确设置属性吗？我已经尝试了一些更简单的公式，但没有任何乐趣。它在标准单元测试中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:23:36.140

在我看来，您将数据驱动和基于交互的测试风格混合在一起。where 块仅在数据驱动的上下文中被提及，而 when/then 组合在交互测试的上下文中被提及。

尝试将 def foo = "bar" 放在测试的顶部。

# c# - 设置用户控件的默认事件

> ID：14956703
> 
> 赞同：3
> 
> 时间：2013-02-19T11:45:39.867
> 
> 标签：c#, .net, winforms, events, user-controls

我有一个`User Control`包含一堆控件。我想将此的默认事件设置为我的一个按钮`User Control`的`Click`事件。

我知道要将默认事件设置为 UserControl 的事件之一，我应该添加属性：

```
[DefaultEvent("Click")]
public partial class ucPersonSearch : UserControl
... 
```

我想知道是否可以执行以下操作：

```
[DefaultEvent("btn1_Click")]
public partial class ucPersonSearch : UserControl
... 
```

我想在 btn1 被点击时以托管此用户控件的形式触发一些方法。

这在我的项目中确实很重要，您的回答将是有价值的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T11:51:23.470

您不能将班级成员的事件暴露给班级之外。别人怎么能订阅你里面的`Click`事件呢？你试过了吗？除非您使按钮可以从外部访问，否则这是不可能的，这不好（每个人都可以更改所有属性）。`Button``UserControl`

您必须定义一个新事件，并在您想要的事件（单击按钮）发生时触发您的新事件：

```
[DefaultEvent("MyClick")]
public partial class UCPersonSearch : UserControl
{
    Button btnSearch;
    public event EventHandler MyClick;

    public UCPersonSearch()
    {
        btnSearch = new Button();
        //...

        btnSearch.Click += new EventHandler(btnSearch_Click);
    }

    void btnSearch_Click(object sender, EventArgs e)
    {
        OnMyClick();
    }

    protected virtual void OnMyClick()
    {
        var h = MyClick;
        if (h != null)
            h(this, EventArgs.Empty);
    }
} 
```

# javascript - Dijit Combobox 文本对齐在 IE8 中不起作用

> ID：14956704
> 
> 赞同：0
> 
> 时间：2013-02-19T11:45:44.297
> 
> 标签：javascript, internet-explorer, internet-explorer-8, dojo, dijit.form

我是使用 dijit 和 dojo 的新手。我目前正在使用 dijit 1.6.0 并有一个 ComboBox 定义如下：

```
this.comboBox = new dijit.form.ComboBox({
    style : "margin-left: 10px; text-align: left",
    store : this.comboBoxData,
    searchAttr : "label",
    selectOnClick : true,
    value : "All",
    onChange : dojo.hitch(this, this.onObjectiveChanged)
}); 
```

当组合框中的值发生更改并且文本对于组合框的宽度而言太大时，文本将显示为右对齐而不是左对齐。我读过这可能是 IE8 中的一个错误，其中光标的焦点位于文本的最后一个字符，在这种情况下，这可能不是 CSS 问题。我不完全确定如何让组合框中的光标专注于文本的第一个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:07:05.267

每当在组合框中更改或选择值时，我都通过调用 this.comboBox.focus() 设法使组合框显示文本的开头而不是结尾

# python - 导入两个类时在python中导入错误

> ID：14956712
> 
> 赞同：0
> 
> 时间：2013-02-19T11:46:17.640
> 
> 标签：python, sqlite

我正在使用 python 脚本，当我尝试从另一个 python 脚本导入类时遇到导入问题。这是我的 python 项目文件夹的外观：

```
Mysql_Main/ 
          checks.py
          Analyzer/
                  config.py
                  ip.py
                  op.py
                  __init__.py 
```

现在我想从 config.py 导入两个名为 Config() 和 Sqlite() 的类到 checks.py 脚本中。我该怎么做？

这是我尝试过的，但它导致错误！

在checks.py里面：

```
from Analyzer import config

config = config.Config()
sqlite = config.Sqlite() 
```

问题是 Config 类已正确导入，但 Sqlite 类未导入。它显示错误 - Config 实例没有属性“Sqlite”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T11:48:43.707

当你这样做时：

```
config = config.Config() 
```

你改写了变量`config`，它不再指向**模块** `config`。它存储新`Config` **实例**。

尝试：

```
from Analyzer import config

config_instance = config.Config()
sqlite_instance = config.Sqlite() 
```

# python - Python UnicodeEncodeError：编解码器无法编码字符

> ID：14956717
> 
> 赞同：3
> 
> 时间：2013-02-19T11:46:29.677
> 
> 标签：python, windows, unicode, python-unicode

我从我的 python 脚本 (checkData.py) 创建了一个可执行文件

我正在尝试将包含语言环境字符的字符串数据从另一个 python 脚本传递给这个 exe 文件，如下所示：

```
...
dataPath = easygui.fileopenbox(msg, title)
p= subprocess.Popen(["checkData.exe",  dataPath], stdout = subprocess.PIPE ) 
```

当我从调用者脚本打印时`dataPath`，我可以看到语言环境字符。当我尝试打印传递给 exe 文件的字符串时出现错误。

```
...
parser = ArgumentParser()
parser.add_argument("directory", action="store")
args = parser.parse_args()

print(args.directory) 
```

这是我的错误信息：

```
C:\script\build\exe.win32-3.2>checkSi‌​mTestData.exe
  dataDirectoryPath= C:\samples\şample_test_data 
Traceback (most recent call last):
  File "c:\python32\lib\site-packages\cx_Freeze\initscripts\Console3.py",
    line 27, in <module> exec(code, m.__dict__)
  File "checkData.py",
    line 56, in <module>
  File "C:\Python\32-bit\3.2\lib\encodings\cp1254.py",
    line 19, in encode
UnicodeEncodeError: 'charmap' codec can't encode character '\xfe'
  in position 80: character maps to <undefined> – 
```

当我运行以下命令时：

```
sys.stdout.encoding 
```

我得到“cp1254”

请问你能帮帮我吗？

# javascript - 如何按名称设置复选框默认值？

> ID：14956726
> 
> 赞同：2
> 
> 时间：2013-02-19T11:47:19.520
> 
> 标签：javascript, jquery

有没有办法使用 name 属性而不是 class 或 id 设置默认选中的复选框？

`<input type="checkbox" name="test">`

我试过这个但不起作用：

`document.getElementByName("test").checked = true;`

请提供一个jsfiddle。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T11:49:11.500

是的，有可能。但是，没有`getElementByName`方法，只有`getElementsByName`。因此，如果您有一个带有 name 的元素`"test"`，您可以这样做：

```
document.getElementsByName("test")[0].checked = true; 
```

否则，您可以为元素设置一个 ID 并使用`document.getElementById`.

**演示：http:** [//jsfiddle.net/GKFcR/](http://jsfiddle.net/GKFcR/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T11:49:16.913

您可以`document.querySelector`在任何现代浏览器中使用按属性进行选择。

```
document.querySelector('[name=test]').checked = true; 
```

[http://jsfiddle.net/ExplosionPIlls/xpxHe/](http://jsfiddle.net/ExplosionPIlls/xpxHe/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T11:49:41.703

你可以用 jQuery 做到这一点

```
$('input[name="test"]').attr('checked',true); 
```

或 Jquery 1.7+ 使用`prop`方法

```
 $('input[name="test"]').prop('checked',true); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T11:52:18.487

您可以使用 jQuery 或不使用：

```
$('input[name="test"]').prop('checked', true);
document.getElementsByName("test")[0].checked = true; 
```

[http://jsfiddle.net/UZB5Y/1/](http://jsfiddle.net/UZB5Y/1/)

您的示例不起作用，因为该方法`getElementsByName`返回一个元素数组。

或者，如果您控制 HTML，您可以在服务器上将它们设置为选中：

```
<input type="checkbox" name="test" checked="checked"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T11:57:07.377

```
<input type="checkbox" name="test">

<input type="checkbox" name="test2">

<input type="checkbox" name="test2">

--------------------

// by jquery

$("input[name='test']").attr('checked','checked')

// by javascript

document.getElementsByName("test2")[0].checked = true; 
```

这是示例：http: [//jsfiddle.net/85x74/](http://jsfiddle.net/85x74/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T12:40:49.377

使用 jquery 更简单：

```
<input type="checkbox" name="test"> 
```

在 jquery 中：

```
$('input[name="test"]').attr('checked','checked'); 
```

在 JavaScript 中：

```
document.getElementsByName("test")[0].checked = true; 
```

# jquery - 如何制作 Gmail 类型的对话视图

> ID：14956727
> 
> 赞同：-2
> 
> 时间：2013-02-19T11:47:20.673
> 
> 标签：jquery, gmail

*   我想查看邮件列表，例如 gmail 对话。
*   看起来像手风琴的地方，
*   多条消息可以通过点击查看，
*   如果有 5 条或更多条消息，则视图应该像“旧消息”一样折叠

*   **这怎么可能通过 jQuery 或其他更好的方法来实现。请给一些提示/帮助让我继续**

![http://easycaptures.com/fs/uploaded/550/2229870852.jpg](../Images/6e4913e48930e61dda155a02439c2765.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:52:47.417

这当然可以通过 jQuery 实现。但是，有许多方法可以实现此功能，有些方法比其他方法更简单。

第一个选项是在页面加载时简单地加载所有消息，然后隐藏除最后一个之外的所有消息。然后，您可以使用 jQuery 在用户点击时显示它。但是，这是非常低效的，因为它会减慢初始加载时间。在这里找到的[**手风琴**](http://jsfiddle.net/chriscoyier/VPfJ5/3/)（[信用](http://css-tricks.com/snippets/jquery/simple-jquery-accordion/)）是一个很好的起点。这是jQuery代码：

```
(function($) {

  var allPanels = $('.accordion > dd').hide();

  $('.accordion > dt > a').click(function() {
    allPanels.slideUp();
    $(this).parent().next().slideDown();
    return false;
  });

})(jQuery); 
```

更好的选择是加载以前消息的基本数据（日期、发件人和主题），然后在用户单击消息时使用 AJAX 获取整个内容。这是一种更好的方法，因为您只在需要时才请求数据。[**您可以在他们的API Docs**](http://api.jquery.com/jQuery.ajax/)中阅读更多关于在 jQuery 中使用 AJAX 的信息。

这应该给你一个工作的起点。不过，您应该被告知，SO 不是得来速代码生成器。它用于询问与编程问题有关的特定问题。有了上面的信息，你应该做一些研究，试着把它们放在一起，如果/当你遇到问题时，在这里问。请务必包含您的代码以及对问题和期望结果的非常好的描述。

# php - 从 mysql_query 更改时间格式

> ID：14956729
> 
> 赞同：0
> 
> 时间：2013-02-19T11:47:33.717
> 
> 标签：php, mysql

我已经在我的数据库中存储了一个日期，并希望使用 php 回显该日期。尝试了几件事，但无法使其正常工作。任何帮助表示赞赏！

```
<?php echo date('dd-mm-YY', $preview['upload_time']); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:56:00.827

你可以通过两种方式做到这一点：

首先是像这样改变你的语法。

```
 <?php echo date('d-m-Y', strtotime($preview['upload_time'])); ?> 
```

第二种方法是从数据库中获取数据时更改格式。

```
SELECT *,DATE_FORMAT(`YOUR_COLUMN_NAME`, '%d-%m-%Y') AS `adddate` FROM..... 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:48:06.050

像这样试试

```
<?php echo date('dd-mm-YY', strtotime($preview['upload_time'])); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:53:06.230

我更喜欢使用这个：

```
function getDTFromMysql($time){
    try {
        $dt = DateTime::createFromFormat("Y-m-d H:i:s", $time) ;
    } catch (Exception $e) { return null ; }
    return $dt ;
}

$dt = getDTFromMysql($row['time']) ;  
echo $dt->format('dd-mm-YY') ; 
```

有一些 OOP，因此您可以随意使用[DateTime](http://www.php.net/manual/en/datetime.construct.php)对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:48:41.563

使用 strtotime() 函数。

```
<?php echo date('dd-mm-YY', strtotime($preview['upload_time'])); ?> 
```

# opengl - OpenGL 2D 变换不保持纵横比

> ID：14956730
> 
> 赞同：0
> 
> 时间：2013-02-19T11:47:36.777
> 
> 标签：opengl

我需要在我的 OpenGL 应用程序中有一个 2D 层。我首先使用典型的正射投影来实现它，如下所示：

```
 Mat4 ortho =Glm.ortho(0,viewWidth , 0 ,viewHeight); 
```

2d 工作得很好，除了在不同的屏幕尺寸下运行时，2d 形状相对于一个新的方面进行缩放。这不是我想要的（与人们通常需要的相反）。我需要根据新的屏幕尺寸拉伸或挤压 2d 形状。

我试图不使用正交矩阵，而只是使用一个恒等式。这个行得通，但在这种情况下，我必须使用 0 -1 范围内的数字来操作可见平截头体区域中的对象。我需要使用常规数字（未标准化）范围。所以这有点迫使我回到正射投影，这是有问题的，因为已经说过了。所以问题是我如何在没有透视保持在世界坐标系中的情况下变换 2d 对象。

**更新：**

最好的例子是 Adob​​e AfterEffects 中的 2D 图层。如果一个人改变了构图维度，二维层不会根据新维度进行缩放。这就是我所追求的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:01:47.823

知道如何回答这个问题很棘手，因为在某种程度上，您的要求是相互排斥的。你不想要归一化坐标，你想要使用屏幕坐标。但是根据定义，屏幕坐标是以像素为单位定义的，而像素通常是正方形的……所以我认为你需要*某种*形式的归一化坐标，尽管可能是统一缩放的。

也许您想要的是在您的正交中固定宽度和高度的比率。这将允许您以某种伪像素单元对屏幕进行寻址，其中一个轴是“真实”像素，但另一个轴可以拉伸。因此，在 4:3 显示中传递宽度的 3/4，或者在 16:9 上传递 9/16 等，而不是高度，如果显示是“正确”尺寸，这将以像素为单位，但会仅在没有拉伸时才在一维中拉伸。

您可能需要根据比率小于或大于您的“最佳”比率来切换哪个维度是“真实”像素，但是要知道您在这里真正拍摄的是什么是很棘手的。

# c++ - 通用容器和变量元素访问

> ID：14956736
> 
> 赞同：0
> 
> 时间：2013-02-19T11:47:52.247
> 
> 标签：c++, vector

在我的变量数据中，运行“添加变量”脚本代码时，如何为所有类型定义一个通用容器？访问它们的通用公式是什么？这很烦人，因为我必须为每种类型定义一个矢量模板（int float double 等）。我的变量应该只包含一个通用矢量对象，无论它是 int、float 或 double 等。这可能吗？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:53:59.837

That's the whole point of the **Standard Template Library**..

```
std::vector<int>
std::vector<float> 
```

Two vectors - the same class, templated with different types.

If you want a container of differing type you might want to look at `std::tuple`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:56:13.757

## **编辑：**

哦，你想要一个适合*任何类型*的容器吗？是的你可以。但在一定的限制范围内。

见[`boost::any`](http://www.boost.org/libs/any/)和[`boost::variant`](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)。`boost::variant`将使您能够保存*声明时枚举的几种类型的* `boost::variant`数据。`boost::any`不会让您枚举您想要支持的所有类型，但您需要强制转换它们以自己取回值。

简而言之，您必须将类型信息存储在其他地方（使用时`boost::any`），或者只支持几种类型（例如，支持`int`和`double`使用的异构向量`boost::variant`）

* * *

`template`在 C++ 中，完全不需要为每种类型编写相同的类。例如：

```
// function template
template <class T>
T GetMax (T a, T b) {
  T result;
  result = (a>b)? a : b;
  return (result);
} 
```

这`GetMax`应该适用于具有`>`运算符的任何类型。这正是`template`C++ 的用途。

如果您需要更多关于在 C++ 上实现向量的帮助（顺便说一下，对于具有自己的构造函数和析构函数的自定义类型，这并不是那么简单。您可能需要`allocator`获得未初始化的空间），请阅读此（[C++ 中 Vector 的实现](https://stackoverflow.com/questions/5159061/implementation-of-vector-in-c)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:56:49.710

如果您想要一个包含许多不同类型对象的单个向量，那么您可能想要使用[`boost::any`](http://www.boost.org/doc/libs/1_53_0/doc/html/any.html)，或者可能[`boost::variant`](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)。

# android - ActionBar 选项卡的高度和宽度

> ID：14956739
> 
> 赞同：1
> 
> 时间：2013-02-19T11:48:05.353
> 
> 标签：android, android-actionbar

我们可以在 Android 中更改 ActionBar 选项卡的高度吗？如果我更改 ActionBar 选项卡的高度，则 ActionBar 的高度也会更改。这是Android的限制吗，我们不能独立改变ActionBar选项卡的高度。任何帮助，将不胜感激？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:57:49.390

不，我们不能更改 ActionBar 或其选项卡的高度。这有一个很好的理由：回到山景（谷歌校园）的人花了[很多](http://developer.android.com/design/style/metrics-grids.html)时间研究触摸用户界面，操作栏的大小适合手指点击按钮，但没有不要浪费太多的屏幕空间。

没有什么能阻止你简单地使用 Window.FLAG_NO_TITLE_BAR 并自己做所有事情，但正如 bofredo 所说，这很复杂，我看不出原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:55:15.043

也想知道。我得出的结论是，actionbar-tab-layout 被迫定位在 ActionBar 上。所以这不是故意的。

也许有某种解决方法，但这听起来很复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T10:54:43.980

```
<item name="android:actionBarSize">80dp</item> 
```

访问[ActionBar 选项卡高度](https://stackoverflow.com/questions/9286638/actionbar-tabs-height)

# ruby-on-rails - 使用linkedin api发布公共消息时出现“访问发布共享被拒绝”错误

> ID：14956746
> 
> 赞同：3
> 
> 时间：2013-02-19T11:48:22.123
> 
> 标签：ruby-on-rails, ruby, linkedin

我正在尝试使用[linkedin ruby​​ api](https://github.com/pengwynn/linkedin)将消息发送到API端点：`http://api.linkedin.com/v1/people/~/shares`，但每次我收到此错误：`LinkedIn::Errors::AccessDeniedError ((403): Access to posting shares denied)`。怎么了？

代码：

```
#fetch client object
client = LinkedIn::Client.new('er0xev11ktyj', 'qw7hfgR4wT8Hztpl')

#auth
request_token = client.request_token(:oauth_callback => callback_url)
session[:linkedin_token] = request_token.token
session[:linkedin_secret] = request_token.secret
redirect_to request_token.authorize_url

#inside callback url
atoken,asecret = client.authorize_from_request(session[:linkedin_token], session[:linkedin_secret], params[:oauth_verifier])

#api call for posting message
client.authorize_from_access(atoken, asecret)
client.add_share({:comment => "Hey!"}) #throws error! 
```

我需要指定范围参数吗？如果是，我如何在我的代码中实现它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:31:29.300

覆盖默认消费者选项并将范围附加到`request_token_path`

```
 consumer_options = {
    :request_token_path => "/uas/oauth/requestToken?scope=r_basicprofile+w_share",
    :access_token_path  => "/uas/oauth/accessToken",
    :authorize_path     => "/uas/oauth/authorize",
    :api_host           => "https://api.linkedin.com",
    :auth_host          => "https://www.linkedin.com"
  }
 LinkedIn::Client.new(ckey, csecret, consumer_options) 
```

# c++ - 更改 QWebView 中的突出显示颜色

> ID：14956749
> 
> 赞同：3
> 
> 时间：2013-02-19T11:48:26.977
> 
> 标签：c++, qt4, qwebview

我想更改使用 findText() 方法时突出显示文本的颜色。此颜色与用户选择的文本无关。我已经尝试过 CSS 以及设置 QPalette。所有出现的事件始终以黄色突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-08T14:02:57.500

我也一直在寻找这个，它似乎在 WebKit 内部被[硬编码：](http://code.qt.io/cgit/qt/qtwebkit.git/tree/Source/WebCore/rendering/RenderTheme.cpp#n1214)

```
Color RenderTheme::platformInactiveTextSearchHighlightColor() const
{
    return Color(255, 255, 0); // Yellow.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T16:56:07.090

我真的有同样的问题。但好消息是：设置样式表至少有助于改变 fg/bk 颜色。

```
m_browser->setStyleSheet("QWebView { 
    selection-background-color: blue; selection-color: white; }"); 
```

但这并不是全部真相，因为它只会改变当前找到的文本的 fg/bk 颜色。不知道如何更改所有出现的 fg/bk 颜色。

阿克塞尔

# sql-server - SQL Server：不支持请求的属性`

> ID：14956750
> 
> 赞同：0
> 
> 时间：2013-02-19T11:48:32.607
> 
> 标签：sql-server, django

我正在尝试设置 SQL 连接（使用 django-mssql）。

我正在使用以下连接字符串：

> 'DATA_SOURCE=\,1337;初始目录= *******;UID=********* ;PWD= ****** ;PROVIDER=sqlncli10;MARS Connection=True'***

 ***这会导致连接错误：

> 无法支持请求的属性

我不确定这里的“请求的属性”是什么意思。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T12:05:56.077

使用“服务器”或“数据源”而不是“DATA_SOURCE”

有关更多信息，请参见[http://www.connectionstrings.com/sql-server-2012](http://www.connectionstrings.com/sql-server-2012)***

# spring - 如何获取 itemProcessor 中的行数和文件名 - 春季批处理

> ID：14956762
> 
> 赞同：4
> 
> 时间：2013-02-19T11:49:01.313
> 
> 标签：spring, batch-processing

我正在使用弹簧批处理来解析我的文件。在 ItemProcessor 中，我验证传入字段是否正确。如果不是，我想抛出 ValidationException 并将具有不正确字段的相应行记录到文件中。那么，如何在 ItemProcessor 中找到行数和文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:33:57.110

如果没有看到您的 ItemReader 配置，我无法确定，但如果您使用 FlatFileItemReader 之类的东西来解析 csv，如果在严格模式下，它将验证列数。

假设你的读者看起来像这样，那就是：

```
<bean id="iItemReader" class="org.springframework.batch.item.file.FlatFileItemReader" scope="step">
    <property name="linesToSkip" value="1"/>
    <property name="comments" value="#" />
    <property name="encoding" value="UTF-8"/>
    <property name="lineMapper" >
        <bean class="org.springframework.batch.item.file.mapping.DefaultLineMapper">
            <property name="lineTokenizer">
                <bean class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer">
                    <property name="delimiter" value=","/>
                    <property name="names">
                        <list >
                            <value>First_Field</value>
                        <value>Second_Field</value>
                        </list>
                    </property>
                    <property name="strict" value="true"/>
                </bean>
            </property>
            <property name="fieldSetMapper">
                <bean class="uk.co.package.FieldSetMapper">
                    <property name="dateFormat" value="yyyy-MM-dd HH:mm:ss"/>
                </bean>
            </property>
        </bean>
    </property>

</bean> 
```

对于任何无法处理的行，它将抛出一个 FlatFileParseException。这包括行号，可以在侦听器中处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T08:47:40.037

至于行号，您可以构建自己的 LineMapper，然后将行号存储在您的业务对象中。我将未处理的行（原样）与行号一起存储的示例：

```
 DefaultLineMapper<OneRow> lineMapper = new DefaultLineMapper<OneRow>() {
        @Override
        public OneRow mapLine(String line, int lineNumber) throws Exception {
            return new OneRow(lineNumber, line);
        }
    }; 
```

当然，您已经可以映射您的对象，我需要将整行未经处理作为我的处理器的输入。

作为具有相同想法的参考：[https ://stackoverflow.com/a/23770421/5658642](https://stackoverflow.com/a/23770421/5658642)

# search - Joomla - 额外的搜索排序选项

> ID：14956770
> 
> 赞同：0
> 
> 时间：2013-02-19T11:49:24.547
> 
> 标签：search, joomla, joomla1.5

考虑添加一个额外的搜索排序选项，但不知道如何去做，因为我几乎没有 Joomla 经验。

目前默认的搜索排序选项是

*   新的先来
*   最早的优先
*   最受欢迎
*   按字母顺序
*   部分/类别

我想我已经在 \components\com_search\views\search\view.html.php 中找到了生成这些选项的代码

```
$orders = array();
$orders[] = JHTML::_('select.option',  'newest', JText::_( 'Newest first' ) );
$orders[] = JHTML::_('select.option',  'oldest', JText::_( 'Oldest first' ) );
$orders[] = JHTML::_('select.option',  'popular', JText::_( 'Most popular' ) );
$orders[] = JHTML::_('select.option',  'alpha', JText::_( 'Alphabetical' ) );
$orders[] = JHTML::_('select.option',  'category', JText::_( 'Section/Category' ) ); 
```

我是在此处添加附加选项还是我不应该编辑的核心文件？如果是这样，我该如何添加额外的搜索排序选项？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:36:27.757

从技术上讲，您可以编辑任何核心文件。但是，您必须准备好在每次更新 Joomla 时阅读此编辑！

但是，任何 default.php 文件都应该被复制到并作为模板覆盖完成。如果您计划添加到搜索功能 - view.html.php 文件不能作为模板覆盖完成。在这种情况下，最好的方法是添加一个插件来提供此功能。

有关如何添加提供此额外功能的插件，请参阅文档页面： http: [//docs.joomla.org/Creating_a_search_plugin](http://docs.joomla.org/Creating_a_search_plugin) [http://docs.joomla.org/Creating_a_Smart_Search_plug-in](http://docs.joomla.org/Creating_a_Smart_Search_plug-in)

# json - 使用 knockout.js 在 JSON 中进行迭代

> ID：14956771
> 
> 赞同：1
> 
> 时间：2013-02-19T11:49:24.750
> 
> 标签：json, knockout.js

我正在使用 Knockout.js 来实现我的网络应用程序。我从数据库中获取数据，并使用 Json 将数据传递给通过数据绑定呈现的 html 页面。

我想为我的应用程序设置更动态的可能，所以我想遍历 json 键而不“硬编码”字段名称

我有以下 json: {"id_user":"63","email":"mail@email.it","flag":"1"} 并使用：

```
 <table data-bind="foreach:page().users">
            <tr>
                <td data-bind="text:$data.email"></td>
                <td data-bind="text:$data.flag"></td>
            </tr>
        </table> 
```

但我想避免使用 .email 和 .flag 并使用 [0] 或 [1] 为所有模型重用此结构。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:14:54.323

您可以使用[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)来做到这一点：

```
 <table data-bind="foreach:page().users">
        <tr data-bind="createHeaderRow: $data">
        </tr>  
        <tr data-bind="createTableRow: $data">
        </tr>
    </table> 
```

然后创建这些方法：

```
 ko.bindingHandlers.createHeaderRow = {
      init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
          for (var property in valueAccessor()) {
              $(element).append('<td>' + property + '</td>');
          }
      }
  };
  ko.bindingHandlers.createTableRow = {
      init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
          for (var property in valueAccessor()) {
              $(element).append('<td data-bind="text: ' + property + '"></td>');
          }
      }
  }; 
```

我也创建了一个[jsFiddle](http://jsfiddle.net/gvBXh/5/)来演示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:03:22.747

这是一些更新的 html，用于获取标题以及带有 thead 和 tbody 的行

```
 <table class="table" >
     <thead  data-bind="with: page().users()[0]">
         <tr data-bind="createHeaderRow: $data">
        </tr>
     </thead>
     <tbody data-bind="foreach: page().users()">
         <tr data-bind="createTableRow: $data">
         </tr>
     </tbody>
 </table> 
```

# c# - 如何通过按钮控件单击更改窗体的内容？

> ID：14956774
> 
> 赞同：0
> 
> 时间：2013-02-19T11:49:31.063
> 
> 标签：c#, .net, winforms, user-interface

我正在使用 Visual Studio 2010，并且我有一个 winforms 应用程序。

当我启动应用程序时，我会向用户显示“MainMenu”，它具有：

1) 新游戏按钮

2) 选项

每个按钮单击都会创建一个新表单...当用户单击选项按钮时我想要做的是将 MainWindow 内容更改为选项窗口内容..当他接受选项窗口上的更改时 - >返回到mainMenu视图..有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:52:21.730

您可以使用`Panel`s 并切换它们：

```
panelMain.Visible = false;
panelOptions.Visible = true; 
```

或者你可以有很多表格，并显示和隐藏它们：

```
frmOptions.Show();
frmMain.Hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T11:51:30.187

创建多个面板并在单击按钮时隐藏和显示这些面板。

```
Button_Click(object sender, EventArgs e)
{
  PanelNewGame.Visible = true;
  PanelOptions.Visible = false;
  PanelMain.Visible = false;
} 
```

根据您单击的按钮以不同方式处理它们

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T11:53:22.470

例如，您可以这样做的一种方法是使用不可见的标签和文本字段，当用户单击“选项”按钮时，一切都会变得清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:57:33.093

我建议您看一下 [Tab Control 类。](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.aspx)此控件允许您使用命令以编程方式在不同的内容块之间切换

```
tabControl.SelectTab(i) 
```

其中 i 是选项卡的索引。

# php - PHP上传大图像并按比例调整大小，如Photoshop

> ID：14956776
> 
> 赞同：4
> 
> 时间：2013-02-19T11:49:32.560
> 
> 标签：php, file-upload, upload, photoshop, image-resizing

简短的介绍。我们目前必须根据我们网站上的产品图像制作小、中和大图像。不是 PHP 方面的专家，我想我仍然会尝试自动化这个噩梦。

我们上传的图片和拇指的尺寸如下

```
800 width x 1400 width LARGE
300 width x 525 width  THUMB 
```

我的 PHP 脚本的问题在于它只是按比例调整大小。我希望它能够像在 Photoshop 中一样按比例缩小，您只需单击 shift，图像就会按比例缩放。我正在尝试使用`imagecopyresized`，但运气不佳。

```
<?php
// PHP UPLOAD SCRIPT

// VALIDATION OF FORM

if($_FILES['user_image']['type'] == "image/jpeg" && $_FILES['user_image']['size'] < 3000000)
{
    // VARS
    $target_folder = 'images/'; 
    $upload_image = $target_folder.basename($_FILES['user_image']['name']); 

    // UPLOAD FUNCTION
    if(move_uploaded_file($_FILES['user_image']['tmp_name'], $upload_image)) 
    {

        // VARS FOR FILE NAMES
        $thumbnail = $target_folder."medium_x.jpg";
        $actual = $target_folder."large_x.jpg";

      // THUMBNAIL SIZE
        list($width, $height) = getimagesize($upload_image);
        $newwidth = "300"; 
        $newheight = "525";

        // VARS FOR CALL BACK
        $thumb = imagecreatetruecolor($newwidth, $newheight);
        $source = imagecreatefromjpeg($upload_image);

        // RESIZE WITH PROPORTION LIKE PHOTOSHOP HOLDING SHIFT
        imagecopyresized($thumb, $source, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);

        // MAKE NEW FILES
        imagejpeg($thumb, $thumbnail, 100);

        // FILE RENAMES
        rename($upload_image, $actual);

        {

            // SUCCESS MESSAGES
            ?>

            <p>
                Image Successfully uploaded!<br />
                Actual image: <?=$actual;?><br />
                Thumbnail image: <?=$thumbnail;?><br />

                <h1>Large</h1>
                <img src="<?=$actual;?>"/><br /><br />
                <h1>Medium</h1>
                <img src="<?=$thumbnail;?>"/><br /><br />
            </p>

            <?
        }
        // FAILED MESSAGES
    }
    else
    {
        echo 'Upload failed.';
    }
}
else
{
        // NOT A JPEG
        echo 'Not a JPEG';
}

// END OF SCRIPT
?> 
```

如何在没有拉伸图像的情况下正确调整大小？是否可以？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T11:52:04.683

无需大量 PHP 代码即可实现这一目标的最简单方法是使用 Image Magick。在此处查看示例和示例命令行：[http ://www.imagemagick.org/Usage/resize/#fill](http://www.imagemagick.org/Usage/resize/#fill)

（可以使用 exec() 或类似方法从 PHP 调用）

**编辑：**实现如下：

```
if($_FILES['user_image']['type'] == "image/jpeg" && $_FILES['user_image']['size'] < 3000000)
{
    // VARS
    $target_folder = 'images/'; 
    $upload_image = $target_folder.basename($_FILES['user_image']['name']);

    $thumbnail = $target_folder."medium_x.jpg";
    $actual = $target_folder."large_x.jpg";

    $newwidth = "300"; 
    $newheight = "525";

    if(move_uploaded_file($_FILES['user_image']['tmp_name'], $upload_image)) 
    {
        exec('convert '.$upload_image.' -resize '.$newwidth.'x'.$newheight.'^ '.$thumbnail);
        rename($upload_image, $actual);
    }
}
...
etc 
```

您可以优化处理上传的方式，但我不想完全改变代码的结构，因为我不知道它周围是什么。但基本上，您将图像推送到 ImageMagick 的`convert`，它会发挥它的魔力。

如果要裁剪和缩放，则 exec 命令将是：

`exec('convert '.$upload_image.' -resize '.$newwidth.'x'.$newheight.'^ -gravity center -extent '.$newwidth.'x'.$newheight.' '.$thumbnail);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:44:33.967

看看这个代码片段。做你需要的。基本上用于在创建拇指时保持比例。 [http://snipplr.com/view/753/](http://snipplr.com/view/753/)

# php - PHP：如何对数组中的 5 个特定值进行排序？

> ID：14956779
> 
> 赞同：0
> 
> 时间：2013-02-19T11:49:39.627
> 
> 标签：php, arrays, sorting

我有一个数组。它看起来像这样：

```
[1=Name][2=Type][3=Company][4=State][5=Date]

[6=Name][7=Type][8=Company][9=State][10=Date]

[11=Name][12=Type][13=Company][14=State][15=Date] 
```

现在我想按名称按 AZ 顺序对每 5 个值进行排序。因此`[1=Name][2=Type][3=Company][4=State][5=Date]`将被视为需要排序的一行，`[6=Name][7=Type][8=Company][9=State][10=Date]`并将被视为第二行。他们需要按他们的名字排序，`[1]`& `[6]`...

我从来没有遇到过这种情况，因此我努力寻找解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:22:30.503

问题不是很清楚，请提供一些预期输出的清晰示例。无论我理解什么，您都可以尝试这样的代码：

```
$arr=array("1" => "name1", "2" => "game4", "3" => "game10", "4" => "game2",
   "5" => "game3", "6" => "name4", "7" => "game4", "8" => "game10",
   "9" => "game2", "10" => "game3", "11" => "name3", "12" => "game4",
   "13" => "game10", "14" => "game2", "15" => "game3");
$narr = array();
for ($i=0; $i<count($arr)/5; $i++)
   $narr[] = array_slice($arr, $i * 5, 5, true);
function cmp($a, $b) {
    return strcmp(reset($a), reset($b));
}
uasort($narr, 'cmp');
print_r($narr); 
```

### 输出：

```
Array
(
    [0] => Array
        (
            [1] => name1
            [2] => game4
            [3] => game10
            [4] => game2
            [5] => game3
        )
    [2] => Array
        (
            [11] => name3
            [12] => game4
            [13] => game10
            [14] => game2
            [15] => game3
        )
    [1] => Array
        (
            [6] => name4
            [7] => game4
            [8] => game10
            [9] => game2
            [10] => game3
        )
) 
```

# javascript - 折叠菜单，高度问题

> ID：14956781
> 
> 赞同：0
> 
> 时间：2013-02-19T11:49:51.037
> 
> 标签：javascript, html, css, menu, collapse

我目前正在建立一个菜单，包括基于 Wordpress 类别的子菜单。基本上，我正在检索所有顶级类别，然后在每个类别上构建一个子菜单，其中包含该父类别中的所有帖子。

所以结构看起来像这样：

```
<ul class="menuCat">
   <li> <a href="#" title="lifestyle">lifestyle</a>
      <ul class="show-hide">
         <li><a href="http://localhost/wordpress/article-7/">Article #7</a></li>
         <li><a href="http://localhost/wordpress/article-5/">Article #5</a></li>
         <li><a href="http://localhost/wordpress/hello-world/">Article #3</a></li>
      </ul>
   </li>
   <li> <a href="#" title="musique">musique</a>
      <ul class="show-hide">
         <li><a href="http://localhost/wordpress/article-8/">Article #8</a></li>
         <li><a href="http://localhost/wordpress/article-7/">Article #7</a></li>
         <li><a href="http://localhost/wordpress/article-2/">Article #2</a></li>
         <li><a href="http://localhost/wordpress/article-1/">Article #1</a></li>
         <li><a href="http://localhost/wordpress/hello-world/">Article #3</a></li>
      </ul>
   </li>
</ul>
<div id="content">... 
```

子菜单设置为`display:none`。当一个类别被点击时，子菜单会出现在主菜单下（使用 jQuery 切换）。我在本地运行它，所以我不能给你一个活生生的例子，但它的工作方式与你点击此处的“类别”链接时相同：[http](http://wpshower.com/demo/?theme=imbalance) ://wpshower.com/demo/?theme=imbalance .

我的问题是，对于这种结构以及我想要在视觉上实现的目标（参见以前的 url），我看不到任何其他将子菜单块置于绝对位置的选项。但如果我这样做，我需要在触发菜单时将其余内容向下推。到目前为止，我尝试过的是根据当前查看的子菜单的高度设置顶部边距。不幸的是， height 或 outerHeight 都无法帮助我......

有任何想法吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:57:56.533

您能否详细说明为什么需要定位绝对值？在我看来，您可以通过将所有子菜单静态定位在顶级菜单下方，使用 jQuery 确保一次只显示一个来实现您想要的。

通过将它们静态定位，子菜单将在展开时将其下方的内容向下推，并且只要始终将除一个子菜单之外的所有子菜单设置为 display: none; 你甚至不会知道它的存在。

但是，要使其正常工作，您需要更改 html 的结构。子菜单项需要位于顶级菜单列表下方的 div 中，而不是在其中。

```
<ul class="menuCat">
   <li> <a href="#" title="lifestyle">lifestyle</a>
   </li>
   <li> <a href="#" title="musique">musique</a>
   </li>
</ul>
<div id="submenu-container">
      <ul class="show-hide lifestyle">
         <li><a href="http://localhost/wordpress/article-7/">Article #7</a></li>
         <li><a href="http://localhost/wordpress/article-5/">Article #5</a></li>
         <li><a href="http://localhost/wordpress/hello-world/">Article #3</a></li>
      </ul>
      <ul class="show-hide musique">
         <li><a href="http://localhost/wordpress/article-8/">Article #8</a></li>
         <li><a href="http://localhost/wordpress/article-7/">Article #7</a></li>
         <li><a href="http://localhost/wordpress/article-2/">Article #2</a></li>
         <li><a href="http://localhost/wordpress/article-1/">Article #1</a></li>
         <li><a href="http://localhost/wordpress/hello-world/">Article #3</a></li>
      </ul>
</div>
<div id="content"></div>

$(function () {
    $('.menuCat > li').click(function (e) {
        var target = $('.show-hide.' + e.target.title);
        $('.show-hide').not(target).hide();
        target.toggle();
    });
});

ul.menuCat li {
    display:inline-block;
    vertical-align: top;
}
ul.show-hide {
    display: none;
    background-color:lightgrey;
}
#content {
    height: 200px;
    width: 100%;
    background-color: red;
} 
```

有关示例，请参见此演示：http: [//jsfiddle.net/ijoukov/PCgxR/](http://jsfiddle.net/ijoukov/PCgxR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:29:33.263

一些消息，我认为我无法修改 HTML 结构，因为子菜单与父列表项同时构建，在“start_el”wordpress 函数中。菜单中的每个类别链接都会调用该函数。

# javascript - 添加和删 除行时如何重新排序表行号

> ID：14956782
> 
> 赞同：0
> 
> 时间：2013-02-19T11:50:01.903
> 
> 标签：javascript

我正在使用 javascript 动态生成表行（不涉及 jquery）。每行有 3 个单元格区域编号、输入和删除按钮。添加的行数使用选择框，如果他们选择 3，则添加 3 行等。我想要发生的是，如果他们添加 3 行，然后再添加 3 行。这些行将显示为 1、2、3、4、5、6，目前为 1、2、3、1、2、3。当一行被删除时，我还对行重新排序。

当前代码 php 文件：

```
 function display_Zones($focus, $field, $value, $view){

    global $locale, $app_list_strings, $mod_strings;

    $html = '';

    if($view == 'EditView'){

        $html .= '<script src="modules/dry_Zones/zone_items.js"></script>';
        $html .= "<div style='padding-top: 10px; padding-bottom:10px;'>";
        $html .= "<select id='zone' name='zone'>";
        $html .= get_select_options_with_id($app_list_strings["zone_list"]);
        $html .= "</select> ";

        $html .= "<input type=\"button\" tabindex=\"116\" class=\"button\" value=\"addZone\" id=\"addZone\" onclick=\"insertZone()\" />";
        $html .= "</div>";

        $html .= "<table border='0' cellspacing='4' width='40%' id='zoneItems'>";
        $html .= "<tr><td></td><td>Motor Reference Point</td><td></td></tr>";

        $html .= "</table>";

        return $html;
    } 
```

javascript文件：

```
 var num = 1;

 function insertZone() {

var table = document.getElementById('zoneItems');

var e = document.getElementById('zone');
var number = e.options[e.selectedIndex].value;

if(number != ''){

    for (var i=0; i < number; i++)
    {
        var x = table.insertRow(-1);
        var a = x.insertCell(0);
        num = num+i;

        a.innerHTML = "<span>Zone: "+num+"</span> ";

        var b = x.insertCell(1);
        b.innerHTML = "<input type='text' name='motor_ref_point' size='18' value='' />";

        var c = x.insertCell(2);
        c.innerHTML = "<button class='button lastChild' onclick='removeZone(this)' ><img src='themes/default/images/id-ff-clear.png'></button>";
    }

} 
```

}

```
 function removeZone(rows) {

  var _row = rows.parentElement.parentElement;
  document.getElementById('zoneItems').deleteRow(_row.rowIndex);

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:55:05.253

Probably not the most efficient, way, but I don't think you'll notice any problems unless you have thousands of rows. When you add/delete rows, you could just iterate through the first table cell of each row and update it based on the index.

```
Array.prototype.forEach.call(document.querySelectorAll('td:first-child'),
function (elem, idx) {
    elem.innerHTML = idx + 1;
}); 
```

[http://jsfiddle.net/ExplosionPIlls/2QxX6/](http://jsfiddle.net/ExplosionPIlls/2QxX6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:24:50.110

最后只是这样做：

```
function insertZone() {

var table = document.getElementById('zoneItems');

var e = document.getElementById('zone');
var number = e.options[e.selectedIndex].value;

if(number != ''){

    for (var i=0; i < number; i++)
    {
        var x = table.insertRow(-1);
        var a = x.insertCell(0);
        num = i+1;

       // a.innerHTML = "<span>Zone: "+num+"</span> ";

        var b = x.insertCell(1);
        b.innerHTML = "<input type='text' name='motor_ref_point' size='18' value='' />";

        var c = x.insertCell(2);
        c.innerHTML = "<button class='button lastChild' onclick='removeZone(this)' ><img src='themes/default/images/id-ff-clear.png'></button>";
    }

    count();
} 
```

}

```
 function removeZone(rows) {

var _row = rows.parentElement.parentElement;
document.getElementById('zoneItems').deleteRow(_row.rowIndex);

count();
}

function count(){

var table = document.getElementById("zoneItems");
var tbody = table.tBodies[0];
row_count = tbody.rows.length - 1;

for (var i = 0, row; row = tbody.rows[i]; i++) {

    if(i != 0){

        for (var j = 0, col; col = row.cells[j]; j++) {

            if(j == 0){
                col.innerHTML = "<span>Zone: "+i+"</span> ";
            }
        }
    }

}

} 
```

# entity-framework - 模型中的多个图表与一个大型 .EDMX 与多个 .EDMX

> ID：14956785
> 
> 赞同：2
> 
> 时间：2013-02-19T11:50:13.557
> 
> 标签：entity-framework, entity-framework-4, asp.net-mvc-4

我是实体的新手，我应该如何构建我的实体模型。我们有 600 个数据库表。那么哪些选项应该更适合 DB First 或 EF First？请让我知道哪个更好以及每种替代方案的优缺点（如果有的话）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:52:56.117

假设您有一个 User 表和一个 Report 表。报告表有一个对应用户行的用户 ID 键。如果您在 Accounts.EDMX 中有用户，在 Reporting.EDMX 中有报告，您将没有“User.Reports”或“Report.User”导航属性。

就我而言，这是将 EDMX 拆分为多个文件的最大问题，也是我总是将所有表添加到单个文件的原因......

# crystal-reports - 百分比公式的零值

> ID：14956789
> 
> 赞同：0
> 
> 时间：2013-02-19T11:50:24.587
> 
> 标签：crystal-reports

请参考下面的图 1，有些产品的 PROD_Product.Nett_Weight 和 PROD_Product.Gross_Weight 值有时为 0，因此会引发图 2 错误。

有没有办法绕过这个错误来显示“0”？

图 1 ![在此处输入图像描述](../Images/d168358d05634c5add34e9eac58e304b.png)

图 2

![在此处输入图像描述](../Images/563555ecccdada674c04e6d20d81c948.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:39:38.160

```
If {PROD_Product.Gross_Weight} <> 0 Then
  {PROD_Product.Nett_Weight} / {PROD_Product.Gross_Weight} * {PROD_Product.Number_Off} * 100 
Else
  0 
```

# javascript - 当下拉菜单打开并且用户单击文档时尝试关闭下拉菜单

> ID：14956791
> 
> 赞同：0
> 
> 时间：2013-02-19T11:50:29.587
> 
> 标签：javascript, jquery

当用户在其打开状态之外单击时，我试图隐藏我的下拉菜单，我使用一个标志`isActive`来确定菜单是否打开，然后我在文档上添加了一个点击事件以隐藏菜单如果打开并停止传播如果单击它，则在菜单上。但是现在，当我单击下拉锚标记时，会触发文档单击事件。谁能建议我如何解决这个问题？

JS

```
//User profile share tooltip
        $('.btn-social-share').on('click', function(e){
            e.preventDefault();

                if( !isActive ){
                    $('.social-share-options').show();
                    isActive = true;
                } else {
                    $('.social-share-options').hide();
                    isActive = false;
                }

        });

        /* Anything that gets to the document
           will hide the dropdown */
        $(document).on('click', function(){
            if( isActive ){
                $('.social-share-options').hide();
                isActive = false;
            }
        });

        /* Clicks within the dropdown won't make
           it past the dropdown itself */
        $('.social-share-options').click(function(e){
          e.stopPropagation();
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:55:19.263

创建一个条件来检查单击的内容是否在下拉列表中，如果单击的内容不在下拉列表中，则隐藏下拉列表：

```
$(document).on('click', function(e){
    if( isActive && $(e.target).closest('.social-share-options').length === 0 ){
        $('.social-share-options').removeClass('is-active');
        isActive = false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:55:53.640

我尚未对其进行测试，但我认为您需要添加`e.stopPropagation()`，这将防止您的事件冒泡：

```
 $('.btn-social-share').on('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        //... 
```

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

# gearman - GearMan 后台任务

> ID：14956795
> 
> 赞同：0
> 
> 时间：2013-02-19T11:50:53.353
> 
> 标签：gearman

我必须使用 Gearman 来执行后台任务。

有人告诉我，gearman 有一个用户界面，我找不到任何与 gearman 相关的好教程，所以我可以开始学习它。

请为初学者学习齿轮人提供良好的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:09:48.613

我想一个很好的起点是 Gearman 网站本身[gearman.org](http://gearman.org/getting_started)或者你可以看看这个[问题](https://stackoverflow.com/questions/5047196/any-gearman-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T09:21:50.077

如果您使用的是 java 版本。

中有一个函数`ClientImpl.java`。

```
submitJob(BackendJobReturn jobReturn, 
    String functionName, 
    byte[] data, 
    GearmanJobPriority priority, 
    boolean isBackground) 
```

只要让最后一个参数为真，就可以后台运行

# twitter-bootstrap - 将我的 wordpress 主题转换为引导响应

> ID：14956798
> 
> 赞同：0
> 
> 时间：2013-02-19T11:50:59.633
> 
> 标签：twitter-bootstrap

如何将我的 wordpress 主题转换为引导响应...我在互联网上搜索了所有方法，但没有找到任何好东西来解决我的问题。提前感谢您帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:05:12.417

您可以将[Bootstrap Starter Theme 用于 wordpress](http://www.rootstheme.com/)

这里是另一个启动主题[Bootstrap Wordpress 启动主题](http://bootstrapwp.rachelbaker.me/)

# android - 使用 CDMA 连接时如何获取网络 Cell ID？

> ID：14956799
> 
> 赞同：3
> 
> 时间：2013-02-19T11:51:19.983
> 
> 标签：android

我可以使用`GsmCellLocation`对象获取我的网络单元 ID。但是当我使用 CDMA、3G、HSDPA 或 UMTS 时……我无法获得 Cell ID。使用`GsmCellLocation.getCid()`3G 连接检索称为 LCID（逻辑通道 ID）的东西，它不是 Cid。我用来获取 Gsm 小区 ID 的代码如下所示：

```
private PhoneStateListener mPhoneLocationListener = new PhoneStateListener() {
    public void onCellLocationChanged(CellLocation location) {
                    TelephonyManager tm  = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);                      
           GsmCellLocation location2 = (GsmCellLocation) tm.getCellLocation();
           cellId = location2.getCid();
    }
} 
```

但是当我换行时：

```
GsmCellLocation location2 = (GsmCellLocation) tm.getCellLocation(); 
```

至 ：

```
CdmaCellLocation location2 = (CdmaCellLocation) tm.getCellLocation(); 
```

即使我强制我的设备仅连接到 CDMA，也会抛出异常，`CastException`说不能投射`GsmCellLocation`到`CdmaCellLocation`。

那么我怎样才能得到 3g cell id 信息呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T15:51:55.723

尝试这样的事情

```
CellLocation cl = tm.getCellLocation();
        GsmCellLocation gsmLoc;
        CdmaCellLocation cdmaLoc;
        try {
            gsmLoc = (GsmCellLocation) cl;
            System.out.println(gsmLoc.getCid());
        } catch (ClassCastException e) {
            cdmaLoc = (CdmaCellLocation) cl;
            System.out.println("Base station ID - "+ cdmaLoc.getBaseStationId());
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-09T04:32:00.647

CDMA 没有 Cell ID 。相反，它有 3 个标识符：

1.  SID - 系统 ID
2.  NID - 网络 ID
3.  BID - 基站 ID

有关更多信息，请参阅 OpenCellID wiki 中的此页面： [http ://wiki.opencellid.org/wiki/Public:CDMA](http://wiki.opencellid.org/wiki/Public:CDMA)

# php - Twitter oAuth：收到错误 215

> ID：14956800
> 
> 赞同：0
> 
> 时间：2013-02-19T11:51:21.953
> 
> 标签：php, oauth, twitter

我的一门课程中有以下代码：

```
public function build_httpheader ($options = NULL)
{
    if (!$this->oauth_token && !$this->oauth_token_secret && !$this->http_method) {
        throw new Exception('The oauth_token, oauth_token_secret and the http method must be set');
    }
    $url = $this->base_uri;
    $url_curl = $this->base_uri;
    if ($options) {
        $this->options = $options;
        $url .= '?';
        $url_curl .= '?';
        $count = count($options);
        foreach($options as $key => $value) {
            $count = $count--;
            if ($count) {
                $url .= '&'.$key.'='.$value;
                $url_curl .= '&'.$key.'='.rawurlencode($value);
            } else {
                $url .= $key.'='.$value;
                $url_curl .= $key.'='.rawurlencode($value);
            }
        }
    }
    $this->url = $url_curl;
    /**
     * @internal Create a 32 chars unique string to
     * use as the nonce value
     */
    list($usec, $sec) = explode(" ", microtime());
    $usec = str_replace('0.', '', $usec);
    $nonce_str = utf8_encode($sec.$usec.'ABCD'.$sec);
    $oauth_nonce =  md5($nonce_str);
    /**
     * @internal Create the initial oAuth array
     */
    $oauth = array (
        'oauth_consumer_key' => $this->consumer_key,
        'oauth_nonce' => $this->$oauth_nonce,
        'oauth_signature_method' => 'HMAC-SHA1',
        'oauth_token' => $this->oauth_token,
        'oauth_timestamp' => time(),
        'oauth_version' => '1.0'
    );
    /**
     * @internal generate basic info
     */
    $t_oauth = array();
    ksort($oauth);
    foreach($oauth as $key=>$value){
        $t_oauth[] = "$key=" . rawurlencode($value);
    }
    $base_info = $this->http_method."&" . rawurlencode($url) . '&' . rawurlencode(implode('&', $t_oauth));
    $composite_key = rawurlencode($this->consumer_secret) . '&' . rawurlencode($this->oauth_token_secret);
    $oauth['oauth_signature'] = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));

    $oauth_string = 'Authorization: OAuth ';
    $values = array();
    foreach($oauth as $key=>$value) {
        $values[] = "$key=\"" . rawurlencode($value) . "\"";
    }
    $oauth_string .= implode(', ', $values);
    $this->http_headers = array ($oauth_string, 'Expect:');
}

public function tw_curl_api_call ()
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HTTPHEADER, $this->http_headers);
    if ($this->http_method == 'POST') {
        curl_setopt($ch, CURLOPT_POST, true);
    }
    if ( ($this->http_method != 'POST') && ($this->http_method != 'GET') ) {
        curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $this->http_method);
    }
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_URL, $this->url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);

    $result = json_decode(curl_exec($ch), TRUE);
    $info = curl_getinfo($ch);
    curl_close($ch);
    return array ('result' => $result, 'info' => $info);
} 
```

另一个脚本使用这个类，如下所示：

```
$options = array ('resources' => 'help,users,search,statuses');

$tw_wrapper->build_httpheader ($options);

$results = $tw_wrapper->tw_curl_api_call (); 
```

但是，我收到错误 215（错误的身份验证数据）。任何想法（我知道有现有的 PHP oAuth 类和 twitter 包装器，但似乎它们中的任何一个都没有完全迁移到 1.1 API）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:13:05.007

你看过[Codebird 吗？](https://github.com/mynetx/codebird-php)它支持 1.1 并且可以很好地满足我的需要。当然是 YMWV。

一个简单的例子：

```
Codebird::setConsumerKey('KEY', 'SECRET');

$cb = Codebird::getInstance();
$cb->setToken('AUTH_KEY', 'AUTH_SECRET');

$result = $cb->statuses_userTimeline(array(
    'include_rts' => true,
    'screen_name' => 'hansnilsson',
)); 
```

# .net - 为什么 MethodBody.GetILAsByteArray 在不同平台返回不同的数组？

> ID：14956806
> 
> 赞同：2
> 
> 时间：2013-02-19T11:51:34.073
> 
> 标签：.net, reflection, cil, il, mscorlib

我正在考虑实例方法 Object.Equals(Object)。使用反射，可以将此方法的 IL 作为字节数组获取，如下所示：

```
var mi = typeof(object).GetMethod("Equals", BindingFlags.Instance | BindingFlags.Public);
var mb = mi.GetMethodBody();
var bytes = mb.GetILAsByteArray(); 
```

我有两台 PC：一台是运行 Windows XP 的 32 位计算机，另一台是运行 Windows 7 的 64 位计算机。两台计算机都安装了 .NET Framework 的 4.0.30319 SP1Rel 版本。

在 x86 机器上，生成的数组是：

```
[0]: 2
[1]: 3
[2]: 40
[3]: 122
[4]: 67
[5]: 0
[6]: 6
[7]: 42 
```

但是，在 x64 机器上，我得到了这个：

```
[0]: 2
[1]: 3
[2]: 40
[3]: 123
[4]: 67
[5]: 0
[6]: 6
[7]: 42 
```

第四个字节不同。

现在我知道 mscorlib 在 64 位平台上有两种风格。然而，ILDASM 揭示了这种方法的 IL 在不同口味和机器之间是相同的。在 x64 机器上，我将上述代码定位在“Any CPU”和“x86”，但结果是一样的。

所以我的问题是，任何人都可以解释两台机器之间的显着差异吗？

**更新**

这是 Object.Equals(Object) 的 C# 和 IL：

```
public virtual bool Equals(object obj)
{
    return RuntimeHelpers.Equals(this, obj);
}

.maxstack  8
IL_0000:  ldarg.0
IL_0001:  ldarg.1
IL_0002:  call bool System.Runtime.CompilerServices.RuntimeHelpers::Equals(object, object)
IL_0007:  ret 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T13:16:44.527

只需编写您自己的方法并使用 ildasm.exe 查看它，即可更好地了解 IL 内容。在 ildasm 中使用 View + Show bytes 查看字节值，注意它们是十六进制的：

```
.method public hidebysig newslot virtual 
        instance bool  Equals(object obj) cil managed
// SIG: 20 01 02 1C
{
  // Method begins at RVA 0x2052
  // Code size       8 (0x8)
  .maxstack  8
  IL_0000:  /* 02   |                  */ ldarg.0
  IL_0001:  /* 03   |                  */ ldarg.1
  IL_0002:  /* 28   | (0A)000010       */ call       bool [mscorlib]System.Runtime.CompilerServices.RuntimeHelpers::Equals(object,
                                                                                                                           object)
  IL_0007:  /* 2A   |                  */ ret
} // end of method Program::Equals 
```

您现在将看到 IL_0003 处的字节是*方法 token*的一部分，它的最低有效字节。并注意我得到的价值与你得到的价值有很大的不同。这是因为我刚刚写了一个很小的程序，用很少的代码来测试它，它有一个很小的清单。反汇编器很有帮助，它实际上在元数据表中进行查找并用方法名称替换了标记，而不是只显示标记值。

令牌是程序集清单的元数据表中的索引。当程序集中的代码更改并需要添加到表中时，此类索引将*更改。*您可以在 CLI 规范[ECMA 335](http://www.ecma-international.org/publications/standards/Ecma-335.htm)中了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:09:56.000

不同的字节是引用的[元数据](http://msdn.microsoft.com/en-us/library/ms404456.aspx) [令牌](http://blogs.msdn.com/b/davbr/archive/2011/10/17/metadata-tokens-run-time-ids-and-type-loading.aspx)`RuntimeHelpers.Equals()`的一部分。重新编译模块时，元数据令牌不能保证稳定。这就是为什么绑定到其他程序集中的符号是按名称而不是元数据令牌发生的。

# android - 如何杀死我正在运行的 Android 应用程序？

> ID：14956812
> 
> 赞同：2
> 
> 时间：2013-02-19T11:52:12.253
> 
> 标签：android

我正在开发一个具有注销按钮的 Android 应用程序。当我点击它时，我需要完全关闭我的应用程序（我也不想在后台运行应用程序）。

`System.exit(0)`我也试过了`finish()`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:53:53.153

在您的注销按钮上尝试以下代码：

```
 finish();
 moveTaskToBack(true);
 System.exit(0); 
```

我认为这不会完全关闭您的应用程序，但会退出所有活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:58:46.750

Android 有一种安全关闭应用程序的机制。

在堆栈上的最后一个活动（通常是主活动，或者只是您开始的第一个活动）中覆盖该`onDestroy()`方法。

您可以调用`System.runFinalizersOnExit(true)`确保在应用程序退出时所有对象都将被完成并收集垃圾，或者`android.os.Process.killProcess(android.os.Process.myPid())`如果您愿意，可以通过快速终止应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:59:18.067

finish() 方法运行活动的销毁。所以，它应该就在这里。

# api - 具有不同内容类型的 REST API

> ID：14956819
> 
> 赞同：2
> 
> 时间：2013-02-19T11:52:37.013
> 
> 标签：api, rest, web-applications, content-type

我有一个 REST API 端点来修改资源，即 PUT。该资源可以有一个与之关联的文件，因此我支持两种不同的内容类型：application/json 和 multipart/form-data。第一个是在不关联文件的情况下修改资源，第二个是当我想将文件与资源关联时。

表示这一点的最佳方式是什么？我是否应该对两种不同的内容类型使用相同的 URI，例如 update/:resourceId？我是否应该有两个不同的端点，例如 update/:resourceId 和 updateWithResource/:resourceId？或者这完全是错误的方式，我应该做点别的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:05:27.857

内容类型只是相同资源的不同表示。因此，只要它们代表相同的事物，它们就可以并且应该共享相同的 URI。

URI 不应影响内容类型，这不是 RESTish。仅与内容类型标头协商表示。

# php - 如果它没有出现在另一个数组中，我想要我的数组中的值

> ID：14956821
> 
> 赞同：1
> 
> 时间：2013-02-19T11:52:43.353
> 
> 标签：php, arrays

我怎样才能得到想要的输出？我想检查array1“entry_id”是否与array2“entry_id”不同

我怎样才能做到这一点？我尝试使用 array_diff_key .. 但它没有用

阵列1

```
Array ( [0] => Array ( [entry_id] => 53242 [site_id] => 2 [channel_id] => 2 [author_id] => 5 [1] => Array ( [entry_id] => 76435 [site_id] => 8 [channel_id] => 8 [author_id] => 9 
```

数组2

```
Array ( [0] => Array ( [entry_id] => 89764 [site_id] => 1 [channel_id] => 1 [author_id] => 5  [1] => Array ( [entry_id] => 53242[site_id] => 7 [channel_id] => 9 [author_id] => 1 
```

我想比较 array1 和 array2 并获得所需的输出：

期望的输出：

```
 Array ( [0] => Array ( [entry_id] => 76434 [site_id] => 8 [channel_id] => 8 [author_id] => 9 [1] => Array ( [entry_id] => 76435 [site_id] => 8 [channel_id] => 8 [author_id] => 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:00:12.293

对于较小的输入数组，您基本上可以使用两个 for 循环来完成。

示例代码（未经测试！）：

```
// $array1 and $array2 are the inputs
// $array3 is output
$array3=array();
// Keep track of what we have already found
$buff=array();
foreach($array1 as $a1){
    foreach($array2 as $a2){
        // Check for matching ids and is not already used
        if($a1['entry_id']==$a2['entry_id'] and !isset($buff[$a1['entry_id']])){
            $array3[]=$a1;
            $buff[$a1['entry_id']]=1;
        }
    }
}

print_r($array3); // Debug 
```

**编辑：** OP想要相反，所以......

示例代码（经过测试！）：

```
// 2 pass filter
// $array1 and $array2 are the inputs
$array1=array(
    array('entry_id'=>1,'t'=>"a1"),
    array('entry_id'=>2,'t'=>"b1"),
    array('entry_id'=>3,'t'=>"c1"),
);
$array2=array(
    array('entry_id'=>1,'t'=>"a2"),
    array('entry_id'=>2,'t'=>"b2"),
    array('entry_id'=>4,'t'=>"d2"),
);

// $array3 is output
$array3=array();
// Keep track of what we have already found
$buff=array();

foreach($array1 as $a1) $buff[$a1['entry_id']]=array(1,$a1);

foreach($array2 as $a2){
    if(isset($buff[$a2['entry_id']])){
            $buff[$a2['entry_id']]=array(2,$a2);
    }else{
            $buff[$a2['entry_id']]=array(1,$a2);
    }
}

foreach($buff as $k=>$v) if($v[0]==1) $array3[]=$v[1];

print_r($array3); // Debug 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:07:09.290

试试这个：

```
<?php
$arreglo1 = Array (
        Array (
            "entry_id" => 53242,
            "site_id" => 2,
            "channel_id" => 2,
            "author_id" => 1
        ),
        Array (
            "entry_id" => 76435,
            "site_id" => 8,
            "channel_id" => 8,
            "author_id" => 9,
        )
    );

    $arreglo2 = Array (
        Array (
            "entry_id" => 89764, 
            "site_id" => 1,
            "channel_id" => 1,
            "author_id" => 5
        ),
        Array (
            "entry_id" => 53242,
            "site_id" => 7,
            "channel_id" => 9,
            "author_id" => 1
            )
        );

     $cnt = 0;
     foreach($arreglo1 as $arr1) {
      foreach($arreglo2 as $arr2){
       if ($arr1["entry_id"] == $arr2["entry_id"]) {
         $agregarlo = FALSE;
         break;
       }
       else {
        $agregarlo = TRUE;
       } 
      }

      if ($agregarlo) {
       $resultado[$cnt] = $arr1;
      }
      $cnt++;
     }

     var_dump($resultado);
    ?> 
```

给你这个：

```
array(1) { [1]=> array(4) { ["entry_id"]=> int(76435) ["site_id"]=> int(8) ["channel_id"]=> int(8) ["author_id"]=> int(9) } } 
```

# iphone - 当用户返回视图控制器时如何取消选择 uitableview 单元格

> ID：14956823
> 
> 赞同：49
> 
> 时间：2013-02-19T11:52:47.463
> 
> 标签：iphone, ios, objective-c, uitableview

当用户选择它然后被推送到详细视图时，我有一个 uitableview 单元格突出显示。我希望当它们返回表格视图视图控制器时单元格不被突出显示。

我将如何实现这一目标？

我 `[cell.textLabel setHighlighted:NO];`在 viewWillAppear 中猜测，但如果我把它放在那里，则单元格是未声明的。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-02-19T11:56:53.540

如果您使用`UITableViewController`子类，那么只需设置属性

```
self.clearsSelectionOnViewWillAppear = YES; 
```

否则`viewWillAppear`只是打电话

```
NSIndexPath *indexPath = self.tableView.indexPathForSelectedRow;
if (indexPath) {
    [self.tableView deselectRowAtIndexPath:indexPath animated:animated];
}

// MARK: - Swift 3
if let indexPath = tableView.indexPathForSelectedRow {
    tableView.deselectRow(at: indexPath, animated: true)
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-10-13T07:15:46.387

**斯威夫特 3.0**

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)

    if let selectionIndexPath = self.tableView.indexPathForSelectedRow {
        self.tableView.deselectRow(at: selectionIndexPath, animated: animated)
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-19T11:56:13.250

尝试

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Deselect the row which was tapped
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-19T12:46:06.243

我决定将此作为答案而不是评论。

如果您使用的是**故事板**：单击您的 UITableViewController -> 选中“选择：外观上清除”框

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-20T14:18:10.480

# 迅速 3

```
func clearOnAppearance() {
    for indexPath in tableView.indexPathsForSelectedRows ?? [] {
        tableView.deselectRow(at: indexPath, animated: true)
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-19T11:57:12.703

或者一些不雅的方式=）

```
NSArray *arrayWithPaths = [tableView indexPathsForVisibleRows];
for (NSIndexPath *path in arrayWithPaths)
{
    [tableview deselectRowAtIndexPath:path animated:NO];
} 
```

# python - 调用 OS/模块级 python 函数的 Python 单元测试代码

> ID：14956825
> 
> 赞同：6
> 
> 时间：2013-02-19T11:52:51.677
> 
> 标签：python, unit-testing, python-2.7, python-unittest

我有一个 python 模块/脚本，它可以完成其中的一些

1.  在脚本内的各种嵌套级别，我接受命令行输入，验证它们，应用合理的默认值
2.  我还检查是否存在一些目录

以上只是两个例子。我试图找出测试这一点的最佳“策略”。我所做的是我在模块周围`raw_input`和模块中构建了包装函数`os.path.exists`，然后在我的测试中我覆盖这两个函数以从我的数组列表中获取输入或执行一些*模拟*行为。这种方法有以下缺点

1.  包装函数只是为了测试而存在，这会污染代码
2.  我必须记住每次都在代码中使用包装函数，而不仅仅是调用`os.path.exists`或`raw_input`

有什么绝妙的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:50:01.573

解决方案1：我会做这样的事情，因为它有效：

```
def setUp(self):
    self._os_path_exists = os.path.exists
    os.path.exists = self.myTestExists # mock

def tearDown(self):
    os.path.exists = self._os_path_exists 
```

这不是很好。

解决方案2：重组代码不是您所说的选项，对吧？这会使理解和不直观变得更糟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-30T20:16:26.743

Johnnysweb 可以满足您的需要，但您可以导入和使用[mock](https://pypi.python.org/pypi/mock "嘲笑") ，而不是自己滚动。Mock 是专门为单元测试而设计的，它让你想要做的事情变得非常简单。它内置于 Python 3.3。

例如，如果要运行替换 os.path.isfile 并始终返回 True 的单元测试：

```
try:
    from unittest.mock import patch
except ImportError:
    from mock import patch

class SomeTest(TestCase):

    def test_blah():
        with patch("os.path.isfile", lambda x: True):
            self.assertTrue(some_function("input")) 
```

这可以为您节省大量样板代码，而且可读性很强。

如果你需要一些更复杂的东西，例如，替换 supbroccess.check_output，你可以创建一个简单的辅助函数：

```
def _my_monkeypatch_function(li):
     x,y = li[0], li[1]
     if x == "Reavers":
        return "Gorram"
     if x == "Inora":
        return "Shiny!"
     if x == y:
        return "The Ballad of Jayne"

def test_monkey():
     with patch("subprocess.check_output", _my_monkeypatch_function):
            assertEquals(subprocess.check_output(["Mudder","Mudder"]),
                                                 "The Ballad of Jayne") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T13:12:12.493

简短的回答是[猴子修补](http://en.wikipedia.org/wiki/Monkey_patch)这些系统调用。

[如何在 Python 中显示重定向的标准输入](https://stackoverflow.com/questions/5812333/how-to-display-the-redirected-stdin-in-python)的答案中有一些很好的例子？

这是一个`raw_input()`使用 a的简单示例，`lambda`它会丢弃提示并返回我们想要的内容。

## 被测系统

```
$ cat ./name_getter.py
#!/usr/bin/env python

class NameGetter(object):

    def get_name(self):
        self.name = raw_input('What is your name? ')

    def greet(self):
        print 'Hello, ', self.name, '!'

    def run(self):
        self.get_name()
        self.greet()

if __name__ == '__main__':
    ng = NameGetter()
    ng.run()

$ echo Derek | ./name_getter.py 
What is your name? Hello,  Derek ! 
```

## 测试用例：

```
$ cat ./t_name_getter.py
#!/usr/bin/env python

import unittest
import name_getter

class TestNameGetter(unittest.TestCase):

    def test_get_alice(self):
        name_getter.raw_input = lambda _: 'Alice'
        ng = name_getter.NameGetter()
        ng.get_name()
        self.assertEquals(ng.name, 'Alice')

    def test_get_bob(self):
        name_getter.raw_input = lambda _: 'Bob'
        ng = name_getter.NameGetter()
        ng.get_name()
        self.assertEquals(ng.name, 'Bob')

if __name__ == '__main__':
    unittest.main()

$ ./t_name_getter.py -v
test_get_alice (__main__.TestNameGetter) ... ok
test_get_bob (__main__.TestNameGetter) ... ok

----------------------------------------------------------------------
Ran 2 tests in 0.000s

OK 
```

# android - 从 Android 2.2 到最新版本的传递动画

> ID：14956831
> 
> 赞同：1
> 
> 时间：2013-02-19T11:53:06.753
> 
> 标签：android

我想使用与 android 版本 2.2 到 4.1.2 兼容的动画。我尝试使用 xml 动画，但它在 ginderbread 下不起作用。有人可以告诉我是否存在从左到右和从右到左的动画与所有 android 版本兼容，为什么？

输入.xml

```
 android:shareInterpolator="false">

    <translate android:fromXDelta="-100%" android:toXDelta="0%"

      android:fromYDelta="0%" android:toYDelta="0%"

     android:duration="2000"/> 
```

离开.xml

```
 android:shareInterpolator="false">

  <translate

   android:fromXDelta="0%" android:toXDelta="100%"

   android:fromYDelta="0%" android:toYDelta="0%"

   android:duration="2000" /> 
```

我用这种方法调用它，但它与姜饼不兼容

```
overridePendingTransition(R.anim.leave,R.anim.enter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:05:54.530

我用这个：

anim_left.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="2000"
        android:fromXDelta="50%p"
        android:interpolator="@android:anim/linear_interpolator"
        android:toXDelta="0" />

    <alpha
        android:duration="1000"
        android:fromAlpha="0.0"
        android:interpolator="@android:anim/linear_interpolator"
        android:toAlpha="1.0" />

</set> 
```

我用它来翻译片段。我也在 api 2.x 和 4.x 上对其进行了测试。

# javascript - 使用 Javascript 从 textarea 中删除 BBcode

> ID：14956837
> 
> 赞同：1
> 
> 时间：2013-02-19T11:53:32.503
> 
> 标签：javascript, jquery, regex, bbcode, phpbb3

我正在为 phpBB3 论坛创建一个小型 javscript，它计算您输入了多少字符。但我需要删除特殊字符（我设法这样做了。）和一个 BBcode：quote

我的问题在于报价......以及我对正则表达式知之甚少的事实。

到目前为止，这是我设法做到的，但我陷入了困境：

[http://jsfiddle.net/emjkc/](http://jsfiddle.net/emjkc/)

```
var text = '';
var char = 0;

  text = $('textarea').val();
  text = text.replace(/[&\/\\#,+()$~%.'":*?<>{}!?(\r\n|\n|\r)]/gm, '');
  char = text.length;
  $('div').text(char);
$('textarea').bind('input propertychange', function () {

    text = $(this).val();
    text = text.replace(/[&\/\\#,+()$~%.'":*?<>{}!?\-\–_;(\r\n|\n|\r)]/gm, '');

    char = text.length;
    $('div').text(char);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:49:58.633

您最好为此编写一个解析器，但是如果您想尝试使用正则表达式，[这](http://jsfiddle.net/4XxWk/6/)应该可以解决问题：

```
text = $('textarea').val();
while (text.match(/\[quote.*\[\/quote\]/i) != null) {
   //remove the least inside the innermost found quote tags 
   text = text.replace(/^(.*)\[quote.*?\[\/quote\](.*)$/gmi, '\$1\$2');
}
// now strip anything non-character
text = text.replace(/[^a-z0-9]/gmi, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:05:57.047

我不确定这是否可行，但我认为你可以用这样的正则表达式替换所有 bbcode：

```
var withoutBBCodes = message.replace(/\[[^\]]*\]/g,""); 
```

它只是取代了一切`[any char != ']' goes here]`

编辑：抱歉，没有看到您只想替换 [quote] 而不是所有 bbcode：

```
var withoutBBQuote = message.replace(/\[[\/]*quote[^\]]*\]/g,""); 
```

编辑：好的，您还希望删除引用的内容：

```
while (message.indexOf("[quote") != -1) {
    message = message.replace(/\[quote[^\]]*\]((?!\[[[\/]*quote).)*\[\/quote\]/g,"");
} 
```

感谢@guido，我知道您已经找到了解决方案，但不想让这个答案出错。

# websphere - 安装 RAD 7.5 后如何安装 WebSphere 7？

> ID：14956841
> 
> 赞同：1
> 
> 时间：2013-02-19T11:53:44.483
> 
> 标签：websphere, websphere-7, websphere-portal

我是 RAD 7.5 的新手，我在其中安装了 RAD，但我找不到其中安装的 WebSphere 服务器，所以我可能在安装 RAD 时没有安装。所以，我正在考虑再次安装它。所以你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:45:48.810

RAD 没有 WAS 安装。如果要安装 WAS7，请单独下载安装程序。此外，如果您想在 WebSphere Portal 7 上获得开发支持，您还需要下载 RAD 8 并单独安装 WP7。

# php - 我在 bluehost 服务器上运行以下代码。mail() 函数发送电子邮件但不返回任何值

> ID：14956843
> 
> 赞同：-3
> 
> 时间：2013-02-19T11:53:52.557
> 
> 标签：php, html

```
 <?php 
 $m = ""; 
 $to = "anymail@gmail.com";                     
 $from = "anymail@mydomainname.com";
 $subject = 'subject';
 $message = "Any Message";
 $headers = "From: $from\n"; 
 $headers .= "MIME-Version: 1.0\n"; 
 $headers .= "Content-type:text/html; charset=iso-8859-1\n";
 if ( mail($to, $subject, $message, $headers) ) { 
     $m = "Email sent successfully"; exit(); 
 }else { 
     $m = "Email can't be sent.";exit();
 }  
 exit(); 
 ?>
 <!DOCTYPE HTML><html>
 <head><meta charset="utf-8"><title>Untitled Document</title></head>
 <body>
 <h2> 
 <?php  
   echo $m; 
 ?> </h2>
 </body></html> 
```

我无法得到确认。谁能指出问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:08:55.943

使用此代码，它`exit()`会停止执行而不是打印`$m`

```
if ( mail($to, $subject, $message, $headers) ) { 
   $m = "Email sent successfully"; 
   //exit(); 
}else { 
   $m = "Email can't be sent.";
   //exit();
}  
//exit(); 
```

# xml - How to select node/value based on given value in xslt?

> ID：14956844
> 
> 赞同：1
> 
> 时间：2013-02-19T11:53:58.370
> 
> 标签：xml, xslt, xslt-1.0

I have this kind of xml

```
<?xml version="1.0"?>
<Data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<Rows>
<Row>
  <Id>1</Id>
  <XColumns>
    <Name>Country</Name>
    <Value>Austria</Value>
  </XColumns>
  <XColumns>
    <Name>Region</Name>
    <Value>Europe</Value>
  </XColumns>
  <XColumns>
    <Name>Sector</Name>
    <Value>Information Technology</Value>
  </XColumns>
  <YColumns>
    <Name>Dataset 1</Name>
    <Value>14</Value>
  </YColumns>
  <YColumns>
    <Name>Dataset 2</Name>
    <Value>19</Value>
  </YColumns>
</Row>
<Row>
  <Id>2</Id>
  <XColumns>
    <Name>Country</Name>
    <Value>Bahamas</Value>
  </XColumns>
  <XColumns>
    <Name>Region</Name>
    <Value>North American</Value>
  </XColumns>
  <XColumns>
    <Name>Sector</Name>
    <Value>Information Technology</Value>
  </XColumns>
  <YColumns>
    <Name>Dataset 1</Name>
    <Value>1</Value>
  </YColumns>
  <YColumns>
    <Name>Dataset 2</Name>
    <Value>15</Value>
  </YColumns>
</Row> 
```

I need to convert it to following XML using XSLT

```
<?xml version="1.0"?>
<data>
<categories>
 <category label="Austria"/>
 <category label="Bahamas"/>
</categories>
<dataset seriesName="DataSet 1">
 <set value="14"/>
 <set value="1"/>
</dataset>
<dataset seriesName="DataSet 2">
 <set value="19"/>
 <set value="15"/>
</dataset> 
```

1 more thing, i have one variable called "category", if i pass category=Country so it will generate categories tag where label have value of country like Austria,Bahamas . if i pass category = region so it will generate categories tag where label have value of region like Europe, North American. So based upon category value i have to generate categories tag.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:53:35.593

以下代码执行您尝试实现的目标。然而，根据数据集的变化可能不是最有效的方法。

我假设 YColumns 可以以不同的顺序出现，并且我们可以在源文件中找到任意数量的数据集（不仅仅是 2 个）。如果可以消除其中一些限制，则解决方案可能会更简单。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0">

    <xsl:output method="xml" indent="yes" />

    <!-- Holds the category to be selected -->
    <xsl:param name="category"
               select="'Country'" />

    <!-- Process root element -->
    <xsl:template match="Data">
        <data>
            <xsl:apply-templates select="*" />
        </data>
    </xsl:template>

    <xsl:template match="Rows">
        <!-- Generate category based on parameter $category -->
        <categories>
            <xsl:apply-templates select="Row/XColumns[Name = $category]" />
        </categories>
        <!-- Generate data sets -->
        <xsl:apply-templates select="Row[1]/YColumns" />
    </xsl:template> 

    <!-- Generate category element -->  
    <xsl:template match="XColumns">
        <category label="{Value}" />
    </xsl:template>

    <!-- Generate dataset elements -->
    <xsl:template match="YColumns">
        <xsl:variable name="name" select="Name" />
        <dataset seriesName="{$name}">
            <xsl:for-each select="../../Row/YColumns[Name = $name]/Value">
                <set value="{.}" />
            </xsl:for-each>
        </dataset>
    </xsl:template>

</xsl:stylesheet> 
```

更新：更有效的方法是使用 <xsl:key> 来索引所有 YColumn 名称。所以你必须添加

```
<xsl:key name="data-set" match="YColumns/Value" use="../Name" /> 
```

作为 <xsl:stylesheet> 的直接子级

并将表达式更改为以下表达式

```
../../Row/YColumns[Name = $name]/Value 
```

至

```
key('data-set', $name) 
```

# facebook - post on Facebook page big photo

> ID：14956848
> 
> 赞同：0
> 
> 时间：2013-02-19T11:53:59.580
> 
> 标签：facebook, sdk, photo

I have read quite a few posts about posting photos on FB (fan)page but none really answer my question. I am using a correct call to the FB SDK to post on [my page](http://www.facebook.com/PaulGodard.SoulPhotography) as you see the last post where there is a thumbnail photo and a few pieces of text including a link.

> $attachment = array('access_token' => $FB_Token, 'message' => $FB_AppMsg,'name' => $FB_AppTitle,'link' => $FB_AppURL,'description' => $FB_AppResume),'picture'=> $FB_AppImage, 'actions' => json_encode(array('name' => $FB_AppActionName,'link' => $FB_AppActionLink))); $status = $facebook->api("/".$FB_PageName."/feed", "POST", $attachment);

Instead of a thumbnail image, I want an image of the width of 1 or 2 column (as you will see down the timeline), and a text message that can include a link to my blog on my website. How can I achieve this **easily** ?

# ruby-on-rails - 在 rails 视图中使用 coffescript 无法正常工作

> ID：14956850
> 
> 赞同：0
> 
> 时间：2013-02-19T11:54:06.027
> 
> 标签：ruby-on-rails, coffeescript, erb

我正在尝试使用 coffescript 作为 Rails 3.2.11 中的视图

我有 create.js.coffee 与以下几行：

```
is_valid = <%=@model.valid?%>

if is_valid
  res = confirm("Are you sure you want to continue?")
  if(res)
    <%=@model.activate%>
    window.location.href = "/blabla/models"
  else 
    return
else
  $('.form .field_with_errors').removeClass('field_with_errors')
  jw_funcs.respond_with_error(<%=@response_invalid%>) 
```

问题是代码行 <%=@model.activate%>
每次都会执行。我认为这取决于 erb 引擎独立于咖啡引擎运行的事实；如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:00:07.917

你真的没想到这个咖啡代码会从客户端的浏览器调用你的模型方法，是吗？

包装`@model.activate`到它自己的控制器动作中，如果给出确认，它将由客户端调用。像这样的东西：

```
res = confirm("Are you sure you want to continue?")
if(res)
  $.ajax('/models/1234/activate', ...)
else 
  return 
```

# php - PHP Excel：将创建的 PDF 保存到远程服务器而不是用户下载

> ID：14956853
> 
> 赞同：0
> 
> 时间：2013-02-19T11:54:18.017
> 
> 标签：php, phpexcel

这与我之前的问题（[DOMPDF](https://stackoverflow.com/questions/14851090/php-automatically-saving-a-dynamic-pdf-to-the-remote-server-using-dompdf)）类似，不同之处在于现在我使用 PHPExcel 来创建 PDF。

我尝试了 file_put 方法，但它下载了一个空的 PDF。那么我哪里出错了或者不能这样做？

下面是我输出字段的结束代码以及我尝试过的内容

```
 header('Content-Type: application/pdf');
  header('Content-Disposition: attachment;filename="TestSheet.pdf"');
  header('Cache-Control: max-age=0');

  $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'PDF');
  $objWriter->save('php://output');

  $file_location = $save_Path;
  file_put_contents($file_location,$objWriter);
  exit; 
```

似乎一旦保存它就会清除数据，因此空白PDF

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:01:47.760

丢弃标题...。它们都是关于告诉 Web 浏览器期待 PDF 文件，但您不会将任何内容发送回浏览器（更不用说 PDF 文件）。

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'PDF');
$objWriter->save('php://output'); 
```

正在告诉 PHPExcel 将生成的 PDF 直接发送到 Web 浏览器....您说您不想这样做，而是要保存到远程服务器。

您需要拦截来自 $objWriter->save() 的结果，这样它就不会进入浏览器。使用输出缓冲捕获它：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'PDF');
ob_start();
$objWriter->save('php://output');
$myPdfData = ob_get_contents();
ob_end_clean(); 
```

然后您在 $myPdfData 中捕获了 PDF 数据流，然后可以执行以下操作：

```
file_put_contents($file_location, $myPdfData); 
```

请注意，这可能会占用大量内存

# http - websocket 升级是否仍然允许 http ajax 请求？

> ID：14956856
> 
> 赞同：0
> 
> 时间：2013-02-19T11:54:18.907
> 
> 标签：http, websocket

例如，当 http 连接升级到 websocket 连接时，我的 javascript 代码仍然可以使用 http ajax GET 请求吗？也就是说，我可以同时执行正常的 http 请求和 websocket 消息，或者“升级到 websocket”是否意味着 http 功能消失了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:06:15.717

如果您的服务器同时支持正常的 Web 请求和 WebSocket 升级（某些服务器是其中之一），那么即使您有 WebSocket 连接，您也可以继续发出 AJAX 请求。AJAX (XMLHttpRequest) 请求只是在页面加载时由 Javascript 而不是由浏览器发起的常规 HTTP/HTTPS 请求。拥有活动的 WebSocket 连接不会干扰其他 HTTP/HTTPS（或 AJAX）连接。当然，除非服务器有错误。

# java - 在 JUnit 中调用 ojdbc

> ID：14956858
> 
> 赞同：1
> 
> 时间：2013-02-19T11:54:26.697
> 
> 标签：java, junit, ojdbc

使用这篇[文章](https://blogs.oracle.com/randystuph/entry/injecting_jndi_datasources_for_junit)，我想用数据源创建 JUnit 测试。我测试了这段代码：

```
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.activation.DataSource;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import org.junit.BeforeClass;

public class NewEmptyJUnitTest
{

    public NewEmptyJUnitTest()
    {
    }

    @BeforeClass
    public static void setUpClass() throws Exception
    {
        // rcarver - setup the jndi context and the datasource
        try
        {
            // Create initial context
            System.setProperty(Context.INITIAL_CONTEXT_FACTORY,
                    "org.apache.naming.java.javaURLContextFactory");
            System.setProperty(Context.URL_PKG_PREFIXES,
                    "org.apache.naming");
            InitialContext ic = new InitialContext();

            ic.createSubcontext("java:");
            ic.createSubcontext("java:/comp");
            ic.createSubcontext("java:/comp/env");
            ic.createSubcontext("java:/comp/env/jdbc");

            // Construct DataSource
            OracleConnectionPoolDataSource ds = new OracleConnectionPoolDataSource();
            ds.setURL("jdbc:oracle:thin:@host:port:db");
            ds.setUser("MY_USER_NAME");
            ds.setPassword("MY_USER_PASSWORD");

            ic.bind("java:/comp/env/jdbc/nameofmyjdbcresource", ds);
        }
        catch (NamingException ex)
        {
            Logger.getLogger(MyDAOTest.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    public void inittest() throws NamingException
    {

        Context initContext = new InitialContext();
        Context webContext = (Context) initContext.lookup("java:/comp/env");

        DataSource ds = (DataSource) webContext.lookup("jdbc/nameofmyjdbcresource");

    }
} 
```

但是 Netbeans 找不到此类“OracleConnectionPoolDataSource”。我该如何解决这个问题？为了使用这个类，我必须导入什么包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:59:12.080

根据`ojdbc14.jar`，`OracleConnectionPoolDataSource`可以在以下位置找到`oracle.jdbc.pool`：

```
import oracle.jdbc.pool.OracleConnectionPoolDataSource; 
```

# automation - PRXY0007：请求或响应消息不完整或格式错误。现有连接被远程主机强行关闭

> ID：14956859
> 
> 赞同：1
> 
> 时间：2013-02-19T11:54:28.663
> 
> 标签：automation, coded-ui-tests

在使用 VSTS 2010 测试代理在远程 VM 中运行编码 ui 测试时，我在浏览器中收到以下错误消息。

PRXY0007：请求或响应消息不完整或格式错误。现有连接被远程主机强行关闭

任何人都可以提供一些信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T17:21:22.367

我进入了我的**Internet 选项**和**连接**选项卡。然后在“**局域网设置**”下

取消选中所有内容。

这似乎为我解决了这个问题。

# c++ - Segmentation fault while pointer assignment

> ID：14956861
> 
> 赞同：0
> 
> 时间：2013-02-19T11:54:30.247
> 
> 标签：c++, c

Write a program to reverse the direction of a given singly-linked list. In other words, after the reversal all pointers should now point backwards.

I am trying to solve above problem. I wrote functions for insertion,search and deletion and printing for the singly linked list.

my print function is as follows

```
void print(list **l)
{
    list *p=*l;
    for(int i=0;p;i++)
    {
        cout<<p->item<<endl;
        p=p->next;
    }
} 
```

it works fine printing all values in the list.

but in the main function if I do the same assignment like this

```
list *p=*l; 
```

it gives me segmentation fault. my main function is as follow

```
main()
{
    list **l;
    *l=NULL;
    int n;
    while(cin>>n)
    insert(l,n);
    list *p=*l;
    list *prev=NULL;
    list *next;
    while(p)
    {
        next=p->next;
        p->next=prev;
        prev=p;
        if(next==NULL)
        *l=p;
        p=next;
    }       
    print(l);
} 
```

my insert function is as follows

```
void insert(list **l,int x)
{
    list *p;
    p=(list *)malloc(sizeof(list));
    p->item=x;
    p->next=*l;
    *l=p;
} 
```

what is the difference between the assignment I do in print function and the main function? why I don't get any error in print function and I get a segmentation fault in the main function?

if my function is like this

```
main()
{
    list **l;
    *l=NULL;
    int n;
    while(cin>>n)
    insert(l,n);
    print(l);
} 
```

I am not getting any error I am able to insert and print values of the list.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:57:47.340

当你写

```
list **l;
*l=NULL; 
```

您正在取消引用无效指针，因此遇到未定义的行为。

在函数内部，您可能传递了一个有效指针作为参数。例如

```
list* l;
void print(&l) 
```

在这种情况下，`&l`是类型`list**`- 并且它指向一个 dangling `list*`，因此取消引用它将产生一个指针（`l`本身）。`l`未初始化，但不从中读取是可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:58:30.237

你写：

```
list **l;
*l=NULL; 
```

但是 l 没有分配，你不知道它的值，所以 *l=NULL 是未定义的行为，因为你不知道你正在改变哪个内存区域。

# active-directory - ADSI LDAP query for Remote Desktop Users

> ID：14956864
> 
> 赞同：1
> 
> 时间：2013-02-19T11:54:40.460
> 
> 标签：active-directory, adsi, active-directory-group

I am trying to figure the ADSI query to get the list of users added to the group `Remote Desktop Users` in an AD domain.

I guess I need to set the appropriate filter to get the result.

I tried something like

```
(&(objectClass=Remote Desktop Users)(objectCategory=person) 
```

but it doesn't work.

Thanks Sunil

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:20:29.840

组成员身份由`memberOf`属性-not 确定`objectClass`。

你应该尝试这样的事情：

```
(&(memberOf="cn=Remote Desktop Users")(objectCategory=person)) 
```

# unity3d - Unity game - how to switch between pro and free back and forth

> ID：14956866
> 
> 赞同：1
> 
> 时间：2013-02-19T11:54:49.077
> 
> 标签：unity3d

Here I am using unity normal. Normal unity doesn't provide build and run facility for Android

Now I also want to run, so I need to switch to the pro version which is free for 30 days. But how can I install second pro Unity if I am having normal one on my PC?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:04:22.417

您可以从菜单中选择管理许可证：

```
Help->Manage License 
```

如果您还没有激活 30 天专业版试用版，您可以从那里激活它。

# javascript - nodeValue vs value in JavaScript

> ID：14956867
> 
> 赞同：3
> 
> 时间：2013-02-19T11:54:52.593
> 
> 标签：javascript, html

Ok, so i have this HTML web page with nothing fancy on it right? The problem is that when I try to place an image on the screen without using CSS (with the traditional < img > tag), I get this error in FireFox:

> Use of attributes' nodeValue attribute is deprecated. Use value instead.

The image display is simple, just the tag and the src.

Here is the code:

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">

<html>
<head>
<link rel="stylesheet" type="text/css" href="administration/stylesheet.css">
<meta http-equiv="content-type" content="text/html;charset=utf-8">
</head>

<body>
<img src="administration/graphics/textlogo.png">
</body>
</html> 
```

I hope someone knows what to do, cause I can't seem to find a solution.

Cheers!

# jquery - 如何在波浪路径上为对象设置动画

> ID：14956868
> 
> 赞同：1
> 
> 时间：2013-02-19T11:54:52.427
> 
> 标签：jquery

使用jquery，如何使对象以波浪形的路径移动，水平方向，波浪的高度逐渐降低！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:27:02.713

您可以使用 TweenMax '引擎'。然后你可以写一行代码。

```
TweenMax.to(img, 5, {css:{bezier:{type:"soft", values:[{x:250, y:250}, {x:350, y:0}, {x:400, y:100}], autoRotate:false}}, ease:Power1.easeInOut}); 
```

示例[JSFiddle](http://jsfiddle.net/JujpX/)。

（您可能想要调整曲线...）

或者，[不使用 'bezier'](http://jsfiddle.net/v99SA/)：

```
TweenMax.to(img, 5, {x: 300, ease:Power1.easeInOut});
TweenMax.to(img, 5, {y: 150, ease:Elastic.easeOut.config(3, 0.15)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:01:27.643

正如我在评论中提到的，您可以`animate()`在循环中使用 jQuery 的函数来实现这一点，但这并不是很好。

您应该考虑使用 CSS3 过渡和动画。这是一个有用的起点 > [http://csspathanimation.calyptus.eu/](http://csspathanimation.calyptus.eu/)

# android - Android + TextView + text like made by old typewriter

> ID：14956869
> 
> 赞同：-2
> 
> 时间：2013-02-19T11:54:58.587
> 
> 标签：android, fonts, textview

I want to make `TextView` with text, which looks like made by old typewriter on metallic background. Do you know how to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:03:47.600

您可以为文本使用特定[背景](http://developer.android.com/reference/android/view/View.html#attr_android:background)`TextView`和[自定义字体](https://stackoverflow.com/questions/3651086/android-using-custom-font)。

# jquery - Grow/Reveal image from bottom to top

> ID：14956871
> 
> 赞同：2
> 
> 时间：2013-02-19T11:55:02.673
> 
> 标签：jquery, css

Is it possible to Grow/reveal an image from bottom to top?

The image I need to animate is an opaque PNG which is part of an animation sequence - the image is of a tower logo and I need to make it grow from base up.

This is the HTML -

```
 <div class="logoCover">
             <div class="logoTop">
             </div>
        </div> 
```

I have set a fixed height on logoCover (height of the logo) and have tried animating height - but it always reveals from top down - any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:59:25.843

如果绝对定位的元素固定在其容器的底部，则可以通过“向上滑动”来显示它。

```
.logoTop {
    display: none;
    position: absolute;
    bottom: 0;
} 
```

请注意，这`.slideDown`是 jQuery 中的“显示”方法，并且是`.slideUp`隐藏的。`.slideDown`即使它看起来向上滑动，您仍然需要使用它来显示它。

[http://jsfiddle.net/ExplosionPIlls/UhNwB/](http://jsfiddle.net/ExplosionPIlls/UhNwB/)

# mysql - Synchronising data between different databases

> ID：14956878
> 
> 赞同：2
> 
> 时间：2013-02-19T11:55:20.013
> 
> 标签：mysql, database, oracle, data-synchronization

I'm looking for a possible solution for the following problem.

First the situation I'm at:
I've 2 databases, 1 Oracle DB and 1 MySQL DB. Although they have a lot of similarities they are not identical. A lot of tables are available on both the Oracle DB and the MySQL DB but the Oracle tables are often more extensive and contain more columns. The situation with the databases can't be changed, so I've to deal with that.

Now I'm looking for the following:
I want to synchronise data from Oracle to MySQL and vice versa. This has to be done real time or as close to real time as possible. So when changes are made at one DB they have to be synced to the other DB as quickly as possible.

Also not every table has to be in sync, so the solution must offer a way of selecting which tables have to be synced and which not.

Because the databases are not identical replication isn't an option I think. But what is? I hope you guys can help me with finding a way of doing this or a tool which does exactly what I need. Maybe you know some good papers/articles I can use?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:42:03.280

感谢您的评论。

我对 ETL 和 EAI 做了一些进一步的研究。我发现我正在寻找一个 ETL 工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:58:32.080

我读了你的问题和答案。我曾在 Oracle、SQL、ETL 和数据仓库上工作过，以下是我的建议：

1.  拥有现成的 ETL 工具是件好事。但是，如果您的应用程序大到足以让您需要量身定制的 ETL 工具，我建议您使用自制的 ETL 流程。

    *   如果您的事务数据库在 Oracle 上，您可以在关键表上设置触发器，以进一步触发用 C、C++ 或 Java 编写的外部过程。
    *   使用外部过程背后的原因是能够同时与两个数据库（Oracle 和 MySQL）进行通信。
    *   [您可以在此处](http://docs.oracle.com/cd/A97630_01/appdev.920/a96590/adg11rtn.htm)阅读有关 Oracle 外部过程的更多信息。
2.  如果不通过 ExtProc，您可以使用 Java 或 .Net 开发一个单独的应用程序，该应用程序将从第一个数据库中提取数据，根据您的业务规则对其进行转换并将其加载到您的仓库中。

在您选择的任何一种方法中，如果您实现自己的工具，而不是使用现成的工具，您将对 ETL 过程有更大的控制权。

# wcf - Access TCP header when using HTTP binding

> ID：14956884
> 
> 赞同：0
> 
> 时间：2013-02-19T11:55:34.437
> 
> 标签：wcf, tcp, webhttpbinding

I have a RESTful service which is exposed via WCF with the webHttpBinding.

I am now asked to get the TCP header (specifically the packet TTL). The difficult approach will be to switch to the net.tcp binding and handle all the HTTP layer by myself.

There must be an easier way... Please help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:32:37.003

正如您所发现的，WCF 通过实现绑定概念（netTcpBinding、basicHttpBinding...）来抽象消息传输（TCP、HTTP...）。好处是能够轻松（大部分时间）更改绑定而不影响服务代码。这种简单的权衡是从服务代码中隐藏传输细节。事实上，在 WCF 中获取客户端 IP 地址相当困难。

另一方面，WCF 的可扩展性非常强，您可以将 webHttpBinding 作为自定义绑定“重新实现”，这样您就可以获取所需的 TCP 信息。这个[SO question & answer](https://stackoverflow.com/questions/1415097/webhttpbinding-using-webmessageencoding-how-to-configure)将为您提供自定义绑定的开始，但您可能需要创建自定义 HTTP 传输组件来访问 TCP 详细信息。当一个工具让你如此努力工作时，你很有可能使用了错误的工具。只是在说' ... ：）

# mysql - 如何在mysql中显示按月报告

> ID：14956886
> 
> 赞同：1
> 
> 时间：2013-02-19T11:55:42.587
> 
> 标签：mysql, database

我在我的数据库中创建了 6 个月的数据，其列名为生产日期。我为这个生产日期栏提供了 6 个月的日期。现在我需要从这个单一的生产日期列中检索每月数据的数据。

我需要按以下方式显示

一月，二月，三月，........十二月在单独的列中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:00:00.053

您没有提供有关当前表结构或现有查询的任何详细信息，但听起来您正在尝试将*数据*从行转换为列。

MySQL 没有数据透视函数，因此您需要使用带有`CASE`表达式的聚合函数来复制它。您的代码将与此类似：

```
select otherColumns, 
  max(case when month(productiondate)=1 then value end) Jan,
  max(case when month(productiondate)=2 then value end) Feb,
  max(case when month(productiondate)=3 then value end) Mar,
  max(case when month(productiondate)=4 then value end) Apr,
  max(case when month(productiondate)=5 then value end) May,
  max(case when month(productiondate)=6 then value end) Jun,
  ....
from yourtable
group by otherColumns 
```

然后，您将替换`otherColumns`为您希望包含在最终结果中的任何其他列。然后这些列将包含在`GROUP BY`. 您还可以将 替换为`value`您希望在每个月下显示的列的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:02:53.940

您需要使用`GROUP BY`月份并生成按月报告，您可能还需要根据您的要求使用聚合函数，如`SUM`, 。`COUNT``AVG`

您可以利用`MonthName`函数从日期获取月份名称，例如

```
mysql> SELECT MONTHNAME('1998-02-05');
    -> 'February' 
```

所以您的查询可能如下所示：

```
SELECT MONTHNAME(productiondate) as mon, SUM(XYZ), COUNT(*) 
FROM Your_Table_Name
GROUP BY mon 
```

# r - 从 R 中的命令行执行脚本时出现问题。错误消息：找不到指定的路径

> ID：14956887
> 
> 赞同：10
> 
> 时间：2013-02-19T11:55:45.550
> 
> 标签：r, command-line

我一直在尝试执行一个简单的 test.R

```
setwd("C:\Users\jdd\Documents")
test <- 2*6598
filename = "test.csv"
write.csv(test,file=filename) 
```

在 Windows 中通过以下命令行命令：

```
"C:\Program Files\R\R-2.15.2\bin\R.exe" CMD BATCH   --vanilla --slave "C:\Users\jdd\Documents\test.R" 
```

当我执行此操作时，我收到以下错误：

```
The system cannot find the path specified. 
```

我一直在尝试根据提供的错误消息制定解决方案，但到目前为止失败了。想知道是否有人可以帮助我，以便我可以直接从命令行执行脚本。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T12:20:50.427

谢谢@sebastian-c！我尝试使用我之前研究过的 RScript。然而，问题是另一个问题。看来在我的安装中有一个`R.exe`and`Rscript.exe`文件在`.\bin`，也有一个在`.\bin\x64`. 第一个工作不正常，但第二个工作正常。@Roland 的评论也很重要，因为一旦工作我就收到了这个错误消息！

以下命令完成了这项工作：

```
"C:\Program Files\R\R-2.15.2\bin\x64\Rscript.exe" "C:\Users\jdd\Documents\test.R" 
```

更正后的 text.R 是：

```
setwd("C:\\Users\\jdd\\Documents")
test <- 2*6598
filename = "test.csv"
write.csv(test,file=filename) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-18T15:03:13.773

[如此处](https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15677)所述，它可能与 64 位版本的 R 有关。问题是 Rscript.exe 本身正试图访问系统上丢失的文件。明显的解决方法是将“x64”显式添加到已安装的其他 Rscript.exe 的路径中：

```
"C:\Program Files\R\R-2.15.2\bin\x64\Rscript.exe" --version
R scripting front-end version 3.0.2 (2013-09-25) 
```

# java - 计算总工作时间

> ID：14956892
> 
> 赞同：0
> 
> 时间：2013-02-19T11:56:00.393
> 
> 标签：java

我现在不知道如何计算员工的总工作时间。例子：

```
Time-in: 07:00
Time-out: 05:00 
```

我有两个 JTextField，这是用户输入的地方。当他点击我的 JButton 计算小时数时，我该怎么做？对不起，伙计们，我知道这很容易，但我完全是新手，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:10:38.287

首先，您必须将输入转换为两个日期或日历。

然后检查[计算Java中的日期差异](https://stackoverflow.com/questions/453388/calculating-difference-in-dates-in-java)

# android - 使用 Spring Android 框架通过 HTTP POST 检索 JSON 数据

> ID：14956898
> 
> 赞同：2
> 
> 时间：2013-02-19T11:56:19.123
> 
> 标签：android, spring-3, resttemplate, rest-client

我正在使用 spring android 框架通过 Http POST 检索 json 数据。但是在使用服务时，在服务器端接收到的参数为空。

以下是安卓代码：

```
protected String doInBackground(String... params) {
String username = params[0];

String password = params[1];

String url = connectServices.connectLoginServiceURL();// returns url

loginServiceParam = new LinkedMultiValueMap<String, String>();
loginServiceParam.add("username", username);
loginServiceParam.add("password", password); //username and password are null at server end.

HttpHeaders requestHeaders = new HttpHeaders();

requestHeaders.setAccept(Collections.singletonList(new MediaType("application", "json")));
requestHeaders.setContentType(MediaType.APPLICATION_JSON);

HttpEntity<MultiValueMap<String, String>> requestEntity = new HttpEntity<MultiValueMap<String, String>>(loginServiceParam, requestHeaders);

// Create a new RestTemplate instance
RestTemplate restTemplate = new RestTemplate();

// Add the Gson message converters
restTemplate.getMessageConverters().add(new GsonHttpMessageConverter());
restTemplate.getMessageConverters().add(new StringHttpMessageConverter());

// Make the HTTP POST request, marshaling the response from JSON

ResponseEntity<LoginBean> responseEntity = restTemplate.exchange(url, HttpMethod.POST, requestEntity, LoginBean.class);

LoginBean loginBeanResponse = responseEntity.getBody();

status = loginBeanResponse.getStatus();

return status;
} 
```

LoginBean 类如下：

```
public class LoginBean {

    private String status;

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }
} 
```

json响应是：

```
{"status":"true"} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T07:35:02.740

我自己解决了这个问题。需要输入以下代码

```
RestTemplate restTemplate = new RestTemplate(true); 
```

POST 请求需要 True。默认情况下，它是 false 并且用于 GET 请求。即使在[Spring Android Reference 链接上也没有提到这一点](http://static.springsource.org/spring-android/docs/1.0.x/reference/htmlsingle/#d4e435)

# php - PHP - 检查数组的值

> ID：14956899
> 
> 赞同：0
> 
> 时间：2013-02-19T11:56:27.173
> 
> 标签：php, arrays, string, compare

我正在尝试做一些具体的事情。我需要比较数组的每个元素中的用户名和密码，以找到与现有用户的匹配项。

有两个数组。一个包含所有用户信息。另一个包含登录尝试。练习是在登录尝试匹配时打印出用户信息。所以我需要将 $loginInfo 与 $userData 进行比较，以查看是否有任何登录尝试与存储的用户名和密码匹配。

在本练习中，我还需要使用 substr()、md5() 和 strtolower()。用户名不区分大小写，而密码区分大小写。我不确定我应该如何执行此操作，但我可以在用户名上使用 strtolower()，但我也在寻找 md5 哈希中的最后 8 个字符。也不知道我是怎么做到的。我将密码哈希的最后 8 个字符与登录尝试哈希进行比较。

我觉得这会让所有试图提供帮助的人感到困惑。这显然让我感到困惑。

我附上了我的代码，希望能帮助你更清楚地理解这一点。

先谢谢了！

```
<?php

$userData = array();

$userData[] = array(
              'Name' => 'Joe Banks',
              'Acct' => '12345',
              'Email' => 'joe@home.com',
              'UserName' => 'Joe',
              'Password' => '8e549b63',
              'Active' => false);
              'Password' => 'Password1'
$userData[] = array(
              'Name' => 'Polly Cartwrite',
              'Acct' => '34567',
              'Email' => 'polly@yahoo.com',
              'UserName' => 'PCart',
              'Password' => '91f84e7b',
              'Active' => true);
              'Password' => '12345'
$userData[] = array(
              'Name' => 'Jake Jarvis',
              'Acct' => '81812',
              'Email' => 'jjar@gmail.com',
              'UserName' => 'jakej',
              'Password' => 'd5cc072e',
              'Active' => true);
              'Password' => 'LetMeIn'
$userData[] = array(
              'Name' => 'Kelly Williams',
              'Acct' => '76253',
              'Email' => 'kw1234@yahoo.com',
              'UserName' => 'kellyw',
              'Password' => '2d635fc7',
              'Active' => false);
              'Password' => 'Kelly'
 $userData[] = array(
              'Name' => 'Cindy Ella',
              'Acct' => '62341',
              'Email' => 'washgirl@momsplace.com',
              'UserName' => 'Cinders',
              'Password' => '87c0e367',
              'Active' => true);
              'Password' => '9Kut!5pw'

// The loginInfo array contains a series of login attempts. Each attempt
// is composed of a username and password
$loginInfo = array();
$loginInfo[] = array('joe','hello');
$loginInfo[] = array('PCART','12345');
$loginInfo[] = array('jakej','letmein');
$loginInfo[] = array('KellyW','Kelly');
$loginInfo[] = array('Cinder','9Kut!5pw');

// function printUser()
// inputs:
//   $user - an array containing the user's data. The expectation is that
//           this array will contain the user's name, password, username,
//           active status, account number and email address
// outputs:
//   n/a
// This function will print out all of the information for a particular
// user in tabular format (with the exception of the password which will
// be suppressed).
function printUser($user) {

// Each user will be printed in its own row in the table
echo "<div class='tablerow'>\n";

foreach ($user as $index => $item) {
  // suppress printing the password
  if ($index == "Password")
    continue;

  // pretty print the user's status
  if ($index == "Active")  {
    if ($item) {
      $item = "active";
    } else {
      $item = "inactive";
    }
  }

  // print the data in a tabledata box
  echo "<div class='tabledata'>$item</div>\n";
}

// end the row
echo "</div>\n";
}

function checkLogin($loginInfo){
global $userData;

foreach($userData as $attempt) {
    if($loginInfo[$attempt][0] == $userData['UserName']){
      if($loginInfo[$attempt][1] == $userData['Password']){
        printUser($userData);
      }
    }
 }
}
checkLogin($loginInfo);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:03:05.220

您需要两个循环来比较 2 个数组的值。尝试这个：

```
for($i=0;$i<count($loginInfo);$i++){
    foreach($userData as $attempt) {
        if($loginInfo[$i][0] == $attempt['UserName']){
            if($loginInfo[$i][1] == $attempt['Password']){
                printUser($attempt);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:05:24.333

```
function checkLogin($storage, $input){
  foreach ($storage as $data){
    if ((strtolower($data['Name']) === strtolower($input[0])) && (md5($data['Password']) === md5($input[1])))
      return true ;
  }
  return false ;
}

$user_logged = checkLogin($userData, $_POST /* Or another source */) ;

var_dump($user_logged) ; 
```

我不知道你为什么需要比较哈希的最后 8 个字符，但如果你愿意，我可以编辑我的答案。

但如果你仍然需要它，改变

```
(md5($data['Password']) === md5($input['Password'])) 
```

至

```
(substr(md5($data['Password']), -7)) === (substr(md5($input['Password']), -7)) 
```

尝试登录所有用户：

```
$logged_users = array() ;
foreach ($loginInfo as $info){
  if (checkLogin($userData, $info){
    $logged_users[] = $info ;
  }
}

var_dump($logged_users) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:24:12.480

我注意到您的用户数据数组中有 2 个“密码”字段，第一个密码字段似乎是第二个密码字段的 md5 散列的最后 8 个字符，如果以这种方式向您提供数据，您将无能为力它（并且必须自己获取哈希），但只要两个密钥相同，第二个密码值就会覆盖第一个。

假设 strtolower 函数可用于确保用户名不区分大小写，您是正确的，只需在尝试用户名和用户数据的用户名进行比较时使用它

```
strtolower($loginInfo[$attempt][0]) === strtolower($userData['UserName']) 
```

md5 将用于获取密码的哈希值，以便您可以根据需要使用它，例如

```
$hash = md5($loginInfo[$attempt][1]; 
```

substr 将帮助您获取 md5 哈希的最后 8 个字符，该函数的使用如下：

```
string substr ( string $string , int $start [, int $length ] ) 
```

不想毁了你所有的功课，但检查[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)，你会在否定的开始例子中找到你的答案。

# java - 使用 pmd 进行 Eclipse 配置

> ID：14956906
> 
> 赞同：2
> 
> 时间：2013-02-19T11:56:45.987
> 
> 标签：java, eclipse, eclipse-plugin

我试图`PMD plugin`在 eclipse (window8) 中进行配置，但在 50% 的进度错误发生后。

我在路径[http://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/中使用它](http://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/)

我需要从一些资源中配置 PMD 以进行代码审查，我发现 pmd 很有用。

它是很好的代码分析器。

![在此处输入图像描述](../Images/d4e7db153a99138d27a4cc6e7b1c0925.png)

![在此处输入图像描述](../Images/2f53b3a2941ca5cd3808365670a17565.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T06:34:37.347

如果您是 Eclipse IDE 的新手，最好知道如何为其安装插件：

1.  启动 Eclipse IDE（来自面向 Web 开发人员的 Eclipse Java EE IDE 的屏幕截图，版本：Helios Service Release 2）

2.  在 Eclipse 菜单项中选择 Help –>Install New Software...。

3.  安装窗口将打开。在那里，单击“添加..”按钮。

4.  在“添加存储库”窗口中，输入名称和位置（插件 URL）

    PMD 插件： http: [//pmd.sf.net/eclipse](http://pmd.sf.net/eclipse)

    然后单击“确定”按钮。

5.  在“Select the features to install”列表中选择 PMD for Eclipse 3 和 Apache Xerces，然后单击 Next。接受许可协议的条款，然后单击下一步。

6.  验证安装位置在 Eclipse 安装目录中，否则选择正确的，然后单击 Finish。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-10-29T19:01:50.710

由于您的 Internet 连接或代理，可能会出现无法读取存储库问题。

检查eclipse更新是否正常。根据您的屏幕截图，您做得很好。还要通过在浏览器中打开它来仔细检查您的 PMD 网址。

## PMD 安装

要安装 PMD for Eclipse 插件：-

在 Eclipse 中，单击

*   帮助 -> 安装新软件...
*   点击添加..
*   输入以下内容：

名称：Eclipse 更新站点的 PMD

URL：[https](https://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/) ://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/ 并单击确定。

*   您应该看到 PMD for Eclipse 选中它旁边的复选框并单击 Next

您需要接受许可并确认您要安装未经过数字签名的插件。

*   重启日食。

# git - 在 SVN 中使用外部 git repo

> ID：14956910
> 
> 赞同：0
> 
> 时间：2013-02-19T11:56:50.187
> 
> 标签：git, svn

是否可以在 SVN 中使用外部 git repo？问题是我们使用的一些第三方源代码的设计者从 SVN 转移到了 git。我们使用他们的代码作为外部 svn。因此，目前还不清楚如何使用 git 存储库进行类似的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:50:24.983

如果第三方可以将他们的源代码放在 github 上（甚至作为私有存储库），您可以将 svn 客户端用于 github 存储库，请参阅[https://github.com/blog/966-improved-subversion-client-support](https://github.com/blog/966-improved-subversion-client-support)

但是@poke 是正确的，通常最好将第三方源代码保留在代码库之外。

# java - 数组搜索代码

> ID：14956911
> 
> 赞同：1
> 
> 时间：2013-02-19T11:56:50.710
> 
> 标签：java, arrays, search

在《Java 中的数据结构和算法》一书中，提供了以下数组搜索方法代码：

```
{
    int j;
    for(j=0; j< nElems; j++)            // for each element,
        if( a[j].getLast().equals(searchName))  // found item?
             break;                       // exit loop before end
    if(j == nElems)                    // gone to end?
      return null;                    // yes, can't find it
    else
      return a[j];                    // no, found it
} 
```

我试图理解为什么需要进行 if(j == nElems) 检查？如果将其编写为，该方法的工作方式是否相同：

```
{           
    int j;
    for(j=0; j <nElems; j++)               
      if( a[j].getLast().equals(searchName))      
         return a[j];              
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:59:58.790

是的，这两种方式都给出相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:00:37.270

它会 :P 您也可以`j`在 for 内部声明以限制其范围。

在第一个实现中，它所做的是检查它是否遍历了所有元素并且没有找到任何东西，因为`j`它是递增的，直到它等于`for-loop`. 即它没有因为 停止`break`，说明它找到了一个元素。

我更喜欢你的解决方案，因为它更容易阅读:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:29:34.027

好吧， **j**永远不等于 nElems 所以这个条件`(j==nElems)`没有错，但它不工作。你可以这样做， `(j==nElems-1)` 但它会浪费代码，所以你的算法比第一个更好。

# jquery - php-移动检测

> ID：14956914
> 
> 赞同：0
> 
> 时间：2013-02-19T11:56:51.423
> 
> 标签：jquery, css

我刚刚遇到 php-mobile-detect，我想将它添加到我的网站。到目前为止，我当前的代码是。

```
<?php
include("Mobile_Detect.php");
$detect = new Mobile_Detect();
?>
<?php if($detect->isiPad()) {
echo '<link rel="stylesheet" href="test.css" type="text/css">';     
}
?> 
```

当我在 ipad 上显示 css 时，这工作正常，现在我想做的是将所有 iPhone、android 设备、黑莓等添加到一个 css 并将任何其他桌面版本添加到另一个 css？

我知道我很近，但我不能完全到达那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:06:11.617

这应该对你有用：

```
<?php
include("Mobile_Detect.php");
$detect = new Mobile_Detect();

if ($detect->isMobile()) {
    echo 'mobile';
}else{
    echo 'desktop';
}
?> 
```

# c# - order by to single one的多个linq查询

> ID：14956922
> 
> 赞同：0
> 
> 时间：2013-02-19T11:57:11.680
> 
> 标签：c#, linq, delegates

我有多个订单条件，如下所示

```
if (enum1)
{
     var = itemlist.orderby(r => r.column1)
}
else if (emum2)
{
     var = itemlist.orderby(r => r.column2)
} 
```

等等..任何动态地做这种事情的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:13:52.940

您可以做的是更好地管理用于排序的列选择，例如使用一些包含 KeySelector 的 Func<> 的集合。

例如，如果您有一个具有四个属性 Prop1、2、3 和 4 的类名“SomeDTO”。以及四个相应的枚举成员。

```
var searchByMapping = new Dictionary<SearchByEnum,Func<SomeDTO, object>>();
searchByMapping.Add(SearchByEnum.Prop1, x => x.Prop1);
searchByMapping.Add(SearchByEnum.Prop2, x => x.Prop2);
searchByMapping.Add(SearchByEnum.Prop3, x => x.Prop3);

coll = coll.OrderBy(searchByMapping[searchByEnumParam]).ToList(); 
```

这是一种不那么动态的方法，而是一种类型安全的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:50:47.273

假设您的枚举只能有两个值： enum yourEnum( X=0, Y}

enum1 在某处设置：

```
itemlist = enum1==Enum.X? itemlist.Orderby(r => r.column1): itemlist.Orderby(r => r.column2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:05:03.387

我确实使用了以下扩展方法。

```
public static class IQueryableExtensions
    {
        public static IQueryable<T> OrderBy<T>(this IQueryable<T> items, string propertyName)
        {
            var typeOfT = typeof(T);
            var parameter = Expression.Parameter(typeOfT, "parameter");
            var propertyType = typeOfT.GetProperty(propertyName).PropertyType;
            var propertyAccess = Expression.PropertyOrField(parameter, propertyName);
            var orderExpression = Expression.Lambda(propertyAccess, parameter);

            var expression = Expression.Call(typeof(Queryable), "OrderBy", new Type[] { typeOfT, propertyType }, items.Expression, Expression.Quote(orderExpression));
            return items.Provider.CreateQuery<T>(expression);
        }
    } 
```

# java - 无法使用java计算ArrayList中的数字

> ID：14956926
> 
> 赞同：0
> 
> 时间：2013-02-19T11:57:17.460
> 
> 标签：java

我正在使用如下所示的列表：-

```
List<Integer> integerlist = new ArrayList<Integer>();

integerlist=primeFactors(numberToBERadical); 
```

当我 sysOut 时，primeFactors 方法返回一些数字：-

```
System.out.println("integer list=="+integerlist);
integer list==[2, 2, 2, 3, 5] 
```

我的问题是我想计算每个数字出现多少次，这样我就可以像这样显示：-

```
2^3 * 3 * 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:03:28.417

您需要将每个因素与其出现的次数（指数）相关联。

为此，比 List 更好的数据结构是`Map<Integer,Integer>`.

假设您仍然`List`从您的`primeFactors(numberToBERadical);`（假设您无法更改或出于某种原因不想更改）。

您可以执行以下操作：

```
public static void main(String[] args) {
    List<Integer> list = new ArrayList<>();

    list.add(2);
    list.add(2);
    list.add(2);
    list.add(3);
    list.add(3);
    list.add(5);

    Map<Integer, Integer> factors = new HashMap<>();
    for(Integer fact: list){
        if(!factors.containsKey(fact)) { factors.put(fact, 1);}
        else {
            Integer value = factors.get(fact);
            factors.put(fact, ++value);
        }
    }
    System.out.println(factors);
} 
```

印刷：`{2=3, 3=2, 5=1}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:02:21.397

如果数组已排序，您可以像这样计算它们：

```
int count = 0;
int last = 0; // zero is not possible for prime-factors
for(int i=0;i<list.size();i++) {
    if(i == 0 || last == list.get(i)) count++;
    else {
        if(last > list.get(0)) {
            System.out.print(" * ");
        }

        System.out.print(last + (count > 1 ? "^" + count: ""));
        count = 1;
    }
    last = list.get(i);
}
//print last sequence.
if(last > 0) {
    if(last > list.get(0)) {
        System.out.print(" * ");
    }

    System.out.print(last + (count > 1 ? "^" + count: ""));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:01:24.317

一种可能但不是最简单的解决方案：

```
public Map<Integer, AtomicInteger> primeFactors(List<Integer integerList) {
  final Map<Integer, AtomicInteger> count = new HashMap<Integer, AtomicInteger>();

  for (final Integer number : integerlist) {
    if (count.containsKey(number)) {
      count.get(number).incrementAndGet();
    } else {
      count.put(number, new AtomicInteger(1));
    }
  }

  return count;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T12:01:28.560

您需要使用一个`Map<Integer, Integer>`可以覆盖该`put`方法的方法来计算每个`Integer`.

```
final Map<Integer, Integer> myStringMap = new HashMap<>(){
 @override
 public String put(final Integer key, final Integer value) {
   if(contains(key)) {
     return put(key, get(key) + 1);
   } else {
     return put(key, 1);
   } 
 }
}; 
```

您甚至可以使用 a`TreeMap`按大小对主要因素进行排序。[我在这里](https://stackoverflow.com/questions/14936107/count-words-in-array-of-string-in-java/14936425#14936425)回答了一个非常相似的问题。只需循环您的`List`并将其转储到地图中

```
for(final Integer integer : myList) {
  myCountingMap.put(integer, 1);
} 
```

更好的是更改您的因式分解方法以返回 a`Map`开始。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T13:07:02.807

```
List<Integer> inputList = new ArrayList<Integer>();

    inputList.add(2);
    inputList.add(2);
    inputList.add(2);
    inputList.add(3);
    inputList.add(3);
    inputList.add(4);

    Map<Integer, Integer> resultMap = new HashMap<Integer, Integer>();

    boolean flag = false;

    for(int val : inputList)
    {
        if(resultMap.get(val) == null)
        {
            resultMap.put(val, 1);
        }
        else
        {
            resultMap.put(val, (resultMap.get(val).intValue())+1);
        }
    }

    for(int key : resultMap.keySet())
    {
        if(resultMap.get(key) == 1)
        {
            if(!flag)
            {
                System.out.print(key);
                flag = true;
            }
            else
            {
                System.out.print("*"+key);
            }
        }
        else
        {
            if(!flag)
            {
                System.out.print(key+"^"+resultMap.get(key));
                flag = true;
            }
            else
            {
                System.out.print("*"+key+"^"+resultMap.get(key));
            }
        }
    }

    System.out.println(); 
```

# memory - 允许的内存大小为 16777216 字节用尽（尝试分配 78 字节）

> ID：14956928
> 
> 赞同：3
> 
> 时间：2013-02-19T11:57:31.887
> 
> 标签：memory, fatal-error, phpbb

我正在使用 PHPbb ，一切正常，

但是我在管理员内的单个页面中收到以下错误。

```
 Allowed memory size of 16777216 bytes exhausted (tried to allocate 78 bytes) in home/mytestsite/public_html/includes/template.php on line 458 
```

如何修复此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:06:00.357

可以想象，当 PHP 尝试使用比可用内存更多的内存时，会出现此错误消息。我假设更改代码不是一种选择，但您可以增加 PHP 可用的内存量。

要更改某个特定脚本的内存限制，请在脚本顶部包含如下一行：

```
ini_set("memory_limit","20M"); 
```

12M（例如）将限制设置为 20 Megs。如果这不起作用，请继续增加内存限制，直到您的脚本适合或您的服务器尖叫着求饶。

您还可以通过在服务器的 php.ini 文件中添加如下行来永久更改服务器上运行的所有 PHP 脚本：

```
memory_limit = 20M 
```

希望这可以帮助

# javascript - 小写函数被破坏

> ID：14956931
> 
> 赞同：1
> 
> 时间：2013-02-19T11:57:46.153
> 
> 标签：javascript, html, function

toLowerCase() 函数存在一些问题。我需要在文本区域中编辑文本。我的基本颜色更改功能让用户在文本区域中输入颜色。它使用 if 语句并且在我添加 toLowerCase() 之前工作正常。

```
function colourChange() {
   var the_colour = document.forms["formTwo"]["textBox"].value;
   the_colour = the_colour.toLowerCase();

   if(the_colour == "red") {
      document.formOne.textArea.style.color ="red";
   } else if (the_colour == "blue") {
      document.formOne.textArea.style.color ="blue";
   } else if (the_colour == "green") {
      document.formOne.textArea.style.color ="green";
   } else if (the_colour == "yellow") {
      document.formOne.textArea.style.color ="yellow";
   } else {
      alert("Please enter red, blue green or yellow")
   } 
```

我的 HTML

```
<script type="text/javascript" src="file.js">
</script>
<form name="formOne">
<textarea rows="5" cols="45" id="textArea" name="textArea">
</textarea>
</form>

<form name="formTwo">
Colour:<input type="text" name="textBox" value="red, blue, green or yellow."> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:58:58.867

使用错误控制台，我看到这是一个语法错误。不应为表单标签指定名称属性。

试试这个：

```
function colourChange( theForm ) 
{
  var color =
  {
    red : "red", 
    blue  : "blue",
    green : "green",
    yellow : "yellow"

  }[ theForm["textBox"].value.toLowerCase() ];

  color ?  document.getElementById( 'formOne').textArea.style.color = color 
        :  alert("Please enter red, blue, green or yellow");

  return false;  
}

</script> 
```

上面有一个三元语句，然后它对对象使用关联查找。
的HTML

```
<form id="formOne">
<textarea rows="4" cols="50" id="textAreav" name="textArea" style='font-weight:bold;font-size:1.5em'>
TEXT
</textarea>
</form>

<form>
Colour:<input type="text" name="textBox" value="red, blue, green or yellow.">
<button onclick="return colourChange( this.form )">Change Colour</button> </body>
</form>

</html> 
```

最后，代码中有 2 个表单标签，请删除一个。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:11:07.697

这就是我要做的：

**的HTML**：

```
<form>
    <textarea rows="5" cols="45" name="textArea"></textarea>
</form>

<form>
    Colour:<input type="text" name="textBox" value="red, blue, green or yellow.">
</form> 
```

正如你所看到的，我没有给表格起任何名字。为表格命名是不必要的。只需命名您的字段。这已经足够了。

**JavaScript：**

```
function colorChange() {
    var color = textBox.value.toLowerCase();

    switch (color) {
    case "red":
    case "blue":
    case "green":
    case "yellow":
        textArea.style.color = color;
        break;
    default:
        alert("Please enter either red, blue, green or yellow.");
    }
} 
```

可以使用名称本身在 JavaScript 中直接访问命名字段。

# infragistics - 使用 Infragistics 的 igDataChart 时出错

> ID：14956937
> 
> 赞同：2
> 
> 时间：2013-02-19T11:58:05.590
> 
> 标签：infragistics, ignite-ui, igdatachart

请帮我解决这个问题：

方法'Infragistics.Web.Mvc.InfragisticsSuite 的类型参数。DataChart(System.Linq.IQueryable)' 不能从用法中推断出来。尝试明确指定类型参数。

模型

```
 namespace MvcApplication2.Models
            {
                public class StockMarketDataPoint
                {
                    public double Open { get; set; }
                    public double High { get; set; }
                    public double Low { get; set; }
                    public double Close { get; set; }
                    public double Volume { get; set; }
                    public DateTime Date { get; set; }
                    public string DateString { get { return Date.ToShortDateString(); } }
                }
            } 
```

控制器

```
 public class Default1Controller : Controller
                 {
                        public ActionResult Index()
                        {
                                List<StockMarketDataPoint> stockMarketData = new List<StockMarketDataPoint>
                        {
                                new StockMarketDataPoint { Date = DateTime.Parse("2.1.2010"), Open = 1000, High = 1028.75, Low = 985.25, Close = 1020, Volume = 1995 },

                                new StockMarketDataPoint { Date = DateTime.Parse("3.1.2010"), Open = 1020, High = 1032.5, Low = 999.5, Close = 1021, Volume = 1964.5 },

                            new StockMarketDataPoint { Date = DateTime.Parse("4.1.2010"), Open = 1021, High = 1033.5, Low = 996, Close = 1033, Volume = 1974.75 },

                            new StockMarketDataPoint { Date = DateTime.Parse("5.1.2010"), Open = 1033, High = 1062, Low = 1018.75, Close = 1042, Volume = 1978.5 },

                            new StockMarketDataPoint { Date = DateTime.Parse("6.1.2010"), Open = 1042, High = 1058.5, Low = 1019.75, Close = 1029, Volume = 1979 },

                            new StockMarketDataPoint { Date = DateTime.Parse("7.1.2010"), Open = 1029, High = 1050.75, Low = 1006, Close = 1042, Volume = 1990 }
                        };

                        return View(stockMarketData);
                    }
                } 
```

索引.cshtml

```
 @using Infragistics.Web.Mvc

            @model MvcApplication2.Models.StockMarketDataPoint

            @{
                Layout = null;
            }

            <!DOCTYPE html>

            <html>
            <head>
                <meta name="viewport" content="width=device-width" />
                <title>Index</title>
                <link type="text/css" href="@Url.Content("~/Content/Site.css")" rel="Stylesheet" />
                <link type="text/css" href="@Url.Content("~/Content/jquery.mobile.structure-1.1.0.css")" rel="Stylesheet" />    
                <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")"></script>
                <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.mobile-1.1.0.min.js")"></script>
                <script type="text/javascript" src="@Url.Content("~/Scripts/modernizr-2.5.3.js")"></script>
                <script type="text/javascript" src="@Url.Content("~/Infragistics/js/infragistics.loader.js")"></script>

            </head>
            <body>

                Here is a chart 

                @(Html.Infragistics().Loader()
                    .ScriptPath(Url.Content("~/Infragistics/js/"))
                    .CssPath(Url.Content("~/Infragistics/css/"))
                    .Render()
                    )

                 @(Html.Infragistics().DataChart(Model)
                .ID("chart")
                .Width("500px")
                .Height("500px")
                .CrosshairVisibility(Visibility.Visible)
                .DataBind()
                .Render()
            )

            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:42:16.127

您将视图中的模型定义为

```
 @model MvcApplication2.Models.StockMarketDataPoint 
```

在传递列表时？尝试：

```
@model IQueryable<MvcApplication2.Models.StockMarketDataPoint> 
```

编辑：还要确保将 IQueryable 传递给视图，如

```
return View(stockMarketData.AsQueryable()); 
```

如果必须的话。这将修复模型错误，但仍然无法让您启动并运行图表 - 缺少轴和系列定义。例如测试了这个：

```
@(Html.Infragistics().DataChart(Model)
    .ID("chart")
    .Width("500px")
    .Height("500px")
    .CrosshairVisibility(Visibility.Visible)
    .Axes((axes) =>
    {
        axes.CategoryX("xAxis")
            .Label((item) => item.Date)
            .LabelVisibility(Visibility.Collapsed);
        axes.NumericY("yAxis");
    })
    .Series(series =>
    {
        series.Financial("stockSeries")
        .CloseMemberPath("Close").OpenMemberPath("Open").HighMemberPath("High").LowMemberPath("Low")
        .XAxis("xAxis").YAxis("yAxis");
    })
    .DataBind()
    .Render()
) 
```

我建议您稍微熟悉一下图表：)[相关示例](http://www.infragistics.com/products/jquery/sample/chart/financial-series)和[博客](http://www.infragistics.com/community/blogs/damyan_petev/archive/2013/02/13/financial-charting-with-ignite-ui.aspx)。

# c# - 在 C# 中使用创建类对象

> ID：14956939
> 
> 赞同：-1
> 
> 时间：2013-02-19T11:58:15.810
> 
> 标签：c#, class

创建类 MustDispose.cs

```
public class MustDispose
{
    public MustDispose()
    {

    }
} 
```

in.aspx 页面

```
protected void Page_Load(object sender, EventArgs e)
    {        
        using (MustDispose obj = new MustDispose) 
        {
          // use the object
        }
    } 
```

错误者

> 析构函数和 object.Finalize 不能直接调用。如果可用，请考虑调用 IDisposable.Dispose。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:59:09.460

你的类必须实现`IDisposable`, 以便在`using`语句中使用。

例子：

```
public class MustDispose : IDisposable
{
    public MustDispose()
    {

    }

    //implement Dispose
    public void Dispose() 
    {
       ....
    }
} 
```

[从使用中](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)读取：

> 提供一种方便的语法，确保正确使用 IDisposable 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:59:40.667

你需要`IDisposable`像这样实现：

```
class TestDispose : IDisposable
{
    public TestDispose() 
    {
        ...
    }

    public void Dispose()
    {
        // dispose of your resources here
    }
} 
```

然后，您将能够在一个块中使用它，该块会在块的末尾`using`自动调用。`obj.Dispose`

```
using (var obj = new TestDispose())
{
    ...
} 
```

就好像：

```
var obj = new TestDispose();

try
{

    ...
}
finally
{
    obj.Dispose();
} 
```

# google-apps-script - 似乎无法使用 Apps 脚本在 Google 协作平台中创建超链接

> ID：14956942
> 
> 赞同：0
> 
> 时间：2013-02-19T11:58:36.673
> 
> 标签：google-apps-script, google-sheets, google-sites

我正在尝试创建一个带有超链接的精美 CSS 框（以及一些未链接的文本）的 Google 协作平台网页。我到目前为止的代码是：

```
function doGet(e){   
var app = UiApp.createApplication();
var ss = SpreadsheetApp.openById('SPREADSHEET_KEY');
var sheet = ss.getSheetByName("Sheet1");

app.add(app.createHTML('<div style="font-family:Helvetica Neue,Arial,Helvetica,sans-serif;
color: rgb(255, 255, 255);font-size:18px;display:inline-block;text-align:center;
padding: 14px 0px 14px;background:rgb(51, 204, 255);min-width: 500px;
border-radius: 40px 40px 40px 40px;font-weight:bold;">' 
+ 'Some Example Text' + '<a href="http://www.google.com/">My Example Link</a>' + '</div>')) 
```

此文本框最终将包含我的电子表格中的一些变量。但现在，我无法让这个超链接工作。观察到的错误：超链接文本未出现在框中。框中的其他文本（在本例中为“某些示例文本”）看起来很好，包含我定义的所有 css，但如前所述，链接根本不显示。并且脚本编辑器中没有错误。

有谁知道我做错了什么？我将非常感谢任何帮助。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:13:01.127

来自文档：以下是允许的 HTML 标记列表：

B、BLOCKQUOTE、BODY、BR、CENTER、CAPTION、CITE、CODE、DIV、EM、H1、H2、H3、H4、H5、H6、HR、I、LABEL、LEGEND、LI、OL、P、SPAN、STRONG、 SUB、SUP、TABLE、TBODY、TD、THEAD、TITLE、TR、TT、UL（[参考](http://code.google.com/p/google-apps-script-issues/issues/detail?id=175)）

但您可以使用[锚小部件](https://developers.google.com/apps-script/class_anchor?hl=en)显示链接

# sql - FORMSOF term 不搜索 SQL Server 的关键词

> ID：14956945
> 
> 赞同：1
> 
> 时间：2013-02-19T11:58:40.730
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

在我的专栏中，我有单词，但是当我尝试搜索它`'and'`时`FormOF`不会搜索。

这是我的查询：

```
SELECT 
    DISTINCT 
    AttributeID, attribute_key, display_name, Segmentmaster.segmentname as SegmentName 
FROM 
    AttributeMaster 
LEFT JOIN
    Segmentmaster ON Segmentmaster.segmentID = AttributeMaster.segmentId 
WHERE
    CONTAINS(attribute_key, 'FORMSOF (INFLECTIONAL, "and")' ) 
    OR CONTAINS(display_name, 'FORMSOF (INFLECTIONAL, "and")' )  
ORDER BY  
    AttributeID ASC 
```

`FormsOf`不是搜索SQL Server的关键字和特殊字符吗`&,_,of ...`

请指导我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:17:29.857

我想那`'and'`是在[STOPLIST](http://msdn.microsoft.com/en-us/library/ms142551.aspx)中。你需要检查这个

```
SELECT stopword
FROM sys.fulltext_indexes i JOIN sys.fulltext_stoplists l ON i.stoplist_id = l.stoplist_id 
                            JOIN sys.fulltext_stopwords w ON l.stoplist_id = w.stoplist_id
WHERE i.object_id = OBJECT_ID('AttributeMaster') AND stopword LIKE 'and' 
```

_test和sony的话全文查找没问题，可惜对于&、_字符符号不起作用。有可能可以试试这个：

```
SELECT DISTINCT AttributeID, attribute_key, 
                display_name, Segmentmaster.segmentname as SegmentName 
FROM AttributeMaster LEFT JOIN Segmentmaster ON Segmentmaster.segmentID = AttributeMaster.segmentId 
WHERE CONTAINS(attribute_key, 'FORMSOF (INFLECTIONAL, "_test")' ) 
  OR CONTAINS(display_name, 'FORMSOF (INFLECTIONAL, "_test")' )
  OR attribute_key LIKE '&'
  OR display_name LIKE '&'
ORDER BY AttributeID ASC 
```

# java - 使用密钥加密和解密数据

> ID：14956946
> 
> 赞同：0
> 
> 时间：2013-02-19T11:58:40.307
> 
> 标签：java, android

我在 android 中有 3-4 个应用程序，它们通过广播相互发送消息。我希望该消息是安全的。为此，我想加密从一个应用程序发送的字符串，并希望在其他应用程序收到广播消息时解密消息。没有其他应用程序应该能够解密它。请告诉我在 Android 中执行此操作的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:01:51.130

我已经毫无问题地遵循了本[教程](https://stackoverflow.com/questions/6788018/android-encryption-decryption-with-aes)，您只需要从您的字符串中获取 byte[] 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:20:43.977

> 我在 android 中有 3-4 个应用程序，它们通过广播相互发送消息。我希望该消息是安全的

使用签名级自定义权限。

> 为此，我想加密从一个应用程序发送的字符串，并希望在其他应用程序收到广播消息时解密消息。

加密毫无意义，因为任何有技术能力拦截您的广播的人都可以对您的应用程序进行逆向工程，获取您的加密密钥并解密消息。

# algorithm - 使用 AND 和 OR 转换逻辑条件

> ID：14956952
> 
> 赞同：0
> 
> 时间：2013-02-19T11:58:56.070
> 
> 标签：algorithm, conditional-statements

我有一个复杂的条件，带有 AND 和 OR，例如： `(c1 OR c2) AND (c3 OR c4 OR c5)`

这相当于：

`(c1 AND c3) OR (c1 AND c4) OR (c1 AND c5) OR (c2 AND c3) OR (c2 AND c4) OR (c2 AND c5)`

然后可以将该条件分解为仅包含 AND 的条件列表：

```
c1 AND c3
c1 AND c4
c1 AND c5
c2 AND c3
c2 AND c4
c2 AND c5 
```

这种转变总是可能的吗？什么算法可以做到？

条件以树的形式存储在内存中，例如：

```
 OR
   /  \
  AND c1
 / ! \
c2 c3 c4 
```

我认为我们应该尝试通过使用分布将 OR 向上“移动”：

`(a OR b) AND c = (a AND c) OR (b AND c)`.

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:04:57.840

看看[析取范式](http://en.wikipedia.org/wiki/Disjunctive_normal_form)（或[合](http://en.wikipedia.org/wiki/Conjunctive_normal_form)取范式）。但他们都不仅使用`AND`而且`OR`也使用`NOT`。

**注意**：如果我们只受`OR`s 和`AND`s 的限制（并且不能使用任何其他布尔函数），那么由于[Post 的功能完备性定理](http://en.wikipedia.org/wiki/Post%27s_functional_completeness_theorem)，我们甚至不能表达任何布尔函数（`AND`并且`OR`都保真并且不形成基础）。因此*，也许*有一个公式，无法转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:06:35.493

`(a or b) and c`逻辑上等价于`(a and c) or (b and c)`。但是，在支持短路布尔表达式的语言中，我可能最终会写成 as `c and (a or b)`，因为没有必要评估`(a or b)`if 是否`c`为假。

如果其中一个`a`或`b`都是昂贵的函数调用而不仅仅是变量引用，则尤其如此。

# graph - 如何在 SAS 中的正态概率 QQ 图上绘制残差的 95% 置信区间（面积）？

> ID：14956955
> 
> 赞同：0
> 
> 时间：2013-02-19T11:59:09.867
> 
> 标签：graph, sas, confidence-interval, quantile

在“CI 区域”下，我的意思是 smth。就像在@cbeleites 的[答案](https://stats.stackexchange.com/a/49428)中绘制的图表或在 Ron Pearson 的[帖子](http://exploringdatablog.blogspot.ru/2011/03/many-uses-of-q-q-plots.html)中描述的那样：

![在此处输入图像描述](../Images/3f65752dea4790dbfc19b208ce5cb976.png)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-23T12:22:38.940

我急于展示我的方法：

```
PROC SGSCATTER DATA = myData;  
   PLOT variable1*variable2 /  
       GRID REG = (DEGREE = 1 LINEATTRS = (THICKNESS = .25 pt) CLM CLI NOGROUP);  
RUN; 
```

# php - PDF 格式的 HTML 网页

> ID：14956959
> 
> 赞同：1
> 
> 时间：2013-02-19T11:59:16.043
> 
> 标签：php

我想知道如何在使用 FPDF 创建 pdf 文件时导入 html 页面。如果还有其他选择，请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:14:11.667

我向您推荐**FOP 库** [http://xmlgraphics.apache.org/fop/](http://xmlgraphics.apache.org/fop/)。

我从未使用过 HTML，但可能您可以将 HTML 内容转换为 XML 结构，然后再将其转换为 PDF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:07:12.013

对于 PDF 转换，它将为您提供帮助。

[HTML 到 PDF 转换器](http://code.google.com/p/dompdf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:38:44.843

试试[TCPDF](http://www.tcpdf.org/)，它使用起来非常简单，并且有很棒的文档和示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T12:01:10.957

嗨 Vasu 你可能想看看[HTML2PDF](http://www.google.co.uk/url?sa=t&rct=j&q=html2pdf&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://html2pdf.fr/en/default&ei=jGkjUehQpMjRBfG-gcgD&usg=AFQjCNEG020eRK2F9gSaqqUQjSnd7hByOw&bvm=bv.42553238,d.d2k)。

我已经将它用于多个项目，并且使用他们的文档很容易设置。

它允许你在一个字符串中给出类 HTML，它会基于它生成一个 PDF。

# javascript - dynatree js 显示树最初扩展

> ID：14956963
> 
> 赞同：1
> 
> 时间：2013-02-19T11:59:21.733
> 
> 标签：javascript, tree, salesforce, visualforce

我用 dynatree.js 创建了一个 js 树。我有一个很长的层次结构。树在加载时显示扩展。我希望树应该扩展到一层。下面是我的代码

```
<apex:component controller="TreeViewController">
    <apex:attribute name="roleOrUserId" required="true" type="String" assignTo="{!roleOrUserId}" description="Enter Role or User Id to build the hierarchy. Pass null if you are passing JSON data as a parameter" />
    <apex:attribute name="selectable" type="Boolean" assignTo="{!selectable}" description="Do you want nodes to be selectable?" />
    <apex:attribute name="value" type="String" description="IDs of selected Nodes in CSV format" />
    <apex:attribute name="JsonData" type="String" assignTo="{!JsonData}" description="JSON input for the tree component" />
    <apex:inputHidden id="selectedKeys" value="{!value}" />
    <!--<apex:includeScript value="{!URLFOR($Resource.DynaTree, 'jquery/jquery.js' )}" /> -->
    <apex:includescript value="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"/>
    <apex:includeScript value="{!URLFOR($Resource.DynaTree, 'jquery/jquery-ui.custom.js' )}" />
    <apex:includeScript value="{!URLFOR($Resource.DynaTree, 'jquery/jquery.cookie.js' )}" />
    <apex:includeScript value="{!URLFOR($Resource.DynaTree, 'src/jquery.dynatree.js' )}" />
    <!--<apex:includeScript value="{!$Resource.DynaTreeJs}" /> -->

    <apex:stylesheet value="{!URLFOR($Resource.DynaTree, 'src/skin/ui.dynatree.css')}" />

    <!-- Add code to initialize the tree when the document is loaded: -->
    <script type="text/javascript">
    $.noConflict();
    $(document).ready(function() {
        $(function(){
            // Attach the dynatree widget to an existing <div id="tree"> element
            // and pass the tree options as an argument to the dynatree() function:
            $("#tree").dynatree({
                onActivate: function(node) {
                    // A DynaTreeNode object is passed to the activation handler
                    // Note: we also get this event, if persistence is on, and the page is reloaded.
                    //alert("You activated " + node.data.key);
                },
                persist: false,
                checkbox: true,
                generateIds: false,
                classNames: {
                    checkbox: "dynatree-checkbox",
                    expanded: "dynatree-expanded"
                },
                selectMode: 3,
                children: {!JsonString},
                onSelect: function(select, node) {
                    // Get a list of all selected nodes, and convert to a key array:
                    var selKeys = $.map(node.tree.getSelectedNodes(), function(node){
                        return node.data.key;
                    });
                    jQuery(document.getElementById("{!$Component.selectedKeys}")).val(selKeys.join(", "));

                    // Get a list of all selected TOP nodes
                    var selRootNodes = node.tree.getSelectedNodes(true);
                    // ... and convert to a key array:
                    var selRootKeys = $.map(selRootNodes, function(node){
                        return node.data.key;
                    });
                },

            });

        });

    });
    </script>

    <!-- Add a <div> element where the tree should appear: -->
    <div id="tree"> </div>

</apex:component> 
```

# 输出

所有子节点都打开到最后一层的树。我只想打开第一层。怎么做。有什么设置或其他吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:04:22.980

一切都在 dynatree[文档](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html)和[示例](http://wwwendt.de/tech/dynatree/doc/samples.html)中。检查`minExpandLevel` [http://wwwendt.de/tech/dynatree/doc/sample-minexpand.html](http://wwwendt.de/tech/dynatree/doc/sample-minexpand.html)

# c# - 为什么不能实例化静态类

> ID：14956964
> 
> 赞同：-1
> 
> 时间：2013-02-19T11:59:22.273
> 
> 标签：c#, .net, class, static

好吧，我知道静态类是在“高频堆”中分配的，它们是为快速访问目的而构建的，除了内部发生的事情之外？为什么不允许他们实例化。

实际上很想知道当编译器看到“静态”这个词时内部会发生什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:00:51.997

无法创建静态类的实例。

> 静态类和类成员用于创建无需创建类实例即可访问的数据和函数。静态类成员可用于分隔独立于任何对象身份的数据和行为：无论对象发生什么，数据和函数都不会改变。当类中没有依赖于对象标识的数据或行为时，可以使用静态类。

静态类的主要特点是：

*   它们只包含静态成员。
*   它们不能被实例化。
*   它们是密封的。
*   它们不能包含实例构造函数（C# 编程指南）。
*   项目清单

[http://msdn.microsoft.com/en-gb/library/79b3xss3(v=vs.80).aspx](http://msdn.microsoft.com/en-gb/library/79b3xss3(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:02:02.280

[静态类和静态类成员（C# 编程指南）](http://msdn.microsoft.com/en-gb/library/79b3xss3%28v=vs.110%29.aspx)

> 静态类与非静态类基本相同，但有一个区别：静态类不能实例化。换句话说，您不能使用 new 关键字来创建类类型的变量。**因为没有实例变量**，所以您可以使用类名本身来访问静态类的成员。

# xpages - 有没有办法让 jsonRpcService 同步工作？

> ID：14956971
> 
> 赞同：0
> 
> 时间：2013-02-19T11:59:44.690
> 
> 标签：xpages, xpages-extlib

我有一个简单的**jsonRpcService**，其方法返回 true 或 false。

我在 CCJS 和 SSJS 事件中有一个带有代码的按钮。如果 RPC 返回 true，我想停止代码执行，但是，它看起来在 addCallBack 完成之前触发了代码，并且代码在 SSJS 或正在执行

在继续执行任何其他 CCSJ 指令或 SSJS 代码之前，有什么方法可以等待 addCallBack 响应。我期待 return false 会停止任何代码执行。

这是我的代码：

```
var lastupdate = '#{javascript:document1.getDocument().getLastModified().toString();}';
var myobject = rpcDocLock.checkUpdate(lastupdate);
myobject.addCallback(function(modified){
    alert(modified);  // #2
    if (modified){
        alert("This document has been modified.");  // #3
        return false;   
    }
});

alert("This alert is triggered and RPC has not finished its execution.") // #1 
```

我添加了 3 个警报，因此您可以看到它们正在执行的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:54:28.190

您永远不应该在网络浏览器中编写阻塞代码，因为如果您这样做，浏览器就会出现挂起。这就是为什么你有回调函数，如果你需要从服务器检索某些东西，请继续在那里编写代码。

您还可以在刷新完成后触发 onComplete 事件。

==================================================== === 编辑

这是我解决问题的两种方法。

1.  客户端使用回调函数将 SSJS 代码移至隐藏按钮（使用 CSS）
2.  将所有内容移动到 SSJS，如果文档被修改，则使用自定义验证器或在您的代码中检查是否修改并向用户返回错误消息，并将值添加到显示在计算字段中的范围变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T21:18:08.370

在您的 Button 中，添加以下行以控制 Dojo XHR 请求：

```
if( ! dojo._xhr )
    dojo._xhr = dojo.xhr;

dojo.xhr = function ( args, ioArgs, addArgs ){
    ioArgs["sync"] = true;
    return dojo._xhr( args, ioArgs, addArgs );
} 
```

这将强制所有调用同步（阻止浏览器、禁用超时等）。在这里查看更多信息：[dojo.xhrGet 支持的对象属性](http://dojotoolkit.org/reference-guide/1.6/dojo/xhrGet.html#dojo-xhrget-supported-object-properties)

现在您可以调用您的 RPC 调用：

```
var myobject = rpcDocLock.checkUpdate(lastupdate);
myobject.addCallback(function(modified){

    // -=> RESET DOJO XHR CALL BACK FIRST!
    dojo.xhr = dojo._xhr;
    delete( dojo._xhr );

    // -=> DO THE OTHER STUFF
    alert(modified);  // #2
    if (modified){
        alert("This document has been modified.");  // #3
        return false;   
    }
}); 
```

我不确定当 RPC 调用失败时究竟会发生什么，但这可能会停止所有 CSJS（它已同步）。

# javascript - 如何使用 Javascript 基于图像 URL 切换背景图像

> ID：14956972
> 
> 赞同：0
> 
> 时间：2013-02-19T11:59:48.590
> 
> 标签：javascript, image, toggle, background-image

我想根据我点击的 DIV 的 url 在点击时更改背景图片

我的逻辑如下：

当用户点击 div 时

```
 {

    If (Background URL = x)
    {
       change background url property to y
    }
    else
    {
       change background url property to x
    }
 } 
```

这是我使用的代码

HTML：

```
<div id="AccordionContainer" class="AccordionContainer">

    <div onclick="runAccordion(1);changeArrow(1)">
        <div class="AccordionTitle" id="Accordion1Title" onselectstart="return false;" onclick="changeArrow(1);" >
            Instructions
        </div>
    </div>

    <div id="Accordion1Content" class="AccordionContent">  
        <p>Enter in your search parameters</p>
    </div>

    <div onclick="runAccordion(2);">
        <div class="AccordionTitle" id="Accordion2Title" onselectstart="return false;" onclick="changeArrow(2);" >
            Colour
        </div>
    </div>

    <div id="Accordion2Content" class="AccordionContent">  
        [wpv-control field="cultivar-category" type="checkboxes" values="Dark Red" url_param="cultivar-category"]
    </div>

</div> 
```

Javascript

```
function changeArrow(index)
{
    var arrowID = "Accordion" + index + "Title";    

    var img = document.getElementById(arrowID),
    style = img.currentStyle || window.getComputedStyle(img, false),
    bi = style.backgroundImage.slice(4, -1);

if (bi = "http://www.hadecobulbs.com/wp-content/themes/blankslate/img/accordian-title.png")
{
    document.getElementById(arrowID).style.background="url(http://www.hadecobulbs.com/wp-content/themes/blankslate/img/accordian-title-up.png) no-repeat scroll 0 0 transparent";
}
else
{
    document.getElementById(arrowID).style.background="url(http://www.hadecobulbs.com/wp-content/themes/blankslate/img/accordian-title.png) no-repeat scroll 0 0 transparent";
}

} 
```

但是，当我单击 Accordion(index)Title Div 时，图像会在第一次单击时发生变化，但当我再次单击时，图像不会变回。为什么会这样？我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:22:53.890

您可以使用元素本身而不是向函数传递数字，`this`这意味着您可以大大减少编写的代码量。

像这样调用你的div上的函数

```
<div class="background_one" onClick="changeArrow(this)"> </div> 
```

使用@d4rkpr1nc3 的注释设置您的 css 类来更改背景图像，如下所示

```
.background_one {
width:188px;
height:32px;
background-image:url('wp-content/themes/blankslate/img/accordian-title-up.png');
}

.background_two {
width:188px;
height:32px;
background-image:url('wp-content/themes/blankslate/img/accordian-title.png');
} 
```

然后在你的函数中做这样的事情

```
function changeArrow(element){

  var arrow = element;

    if(arrow.className == 'background_one'){

      arrow.className = 'background_two';

    } else {

      arrow.className = 'background_one';

    }

} 
```

这是一个 jsfiddle - [http://jsfiddle.net/QwELf/](http://jsfiddle.net/QwELf/)

# htmlpurifier - 使用 htmlpurifier 自动添加类 img 对象

> ID：14956979
> 
> 赞同：1
> 
> 时间：2013-02-19T12:00:11.623
> 
> 标签：htmlpurifier, purify

首先对不起我的英语不好。

净化前：

```
<img src="xxx.jpg"/> 
```

净化后：

```
<img src="xxx.jpg" class="myclass" /> 
```

我该如何使用 html 净化器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:27:45.683

嗯，你为什么不把用户内容放在一个带有 id 的 div 中`content`，然后使用 CSS 选择器`#content img`呢？

# ios - Urbanairship：延迟发送第一个推送通知。

> ID：14956982
> 
> 赞同：0
> 
> 时间：2013-02-19T12:00:14.207
> 
> 标签：ios, objective-c, push, apple-push-notifications, urbanairship.com

我听说在使用 urbanairship 时，向设备发送第一个推送通知会有将近 24 小时的延迟。这个对吗？我添加了一个应用程序并发送了一个推送通知，但是虽然错误控制台上没有错误，但是在发送 10 分钟后我还没有在我的设备上得到推送。有人可以指导我吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:50:50.523

使用 Urban Airship 推送交付没有 24 小时延迟。推送可能不成功的原因有很多。我建议您通过 support@urbanairship.com 向 Urban Airship 支持部门发送电子邮件，以便我们了解您的具体情况。[您还可以在https://docs.urbanairship.com/display/DOCS/Client%3A+iOS%3A+Push#ClientiOSPush-Troubleshooting](https://docs.urbanairship.com/display/DOCS/Client%3A+iOS%3A+Push#ClientiOSPush-Troubleshooting)查看我们的故障排除指南

谢谢，

城市飞艇支援

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:59:19.757

为了扩展 Ruth White 提到的内容，您在使用苹果服务推送通知时可能会感觉到延迟是开发服务器不如生产服务器快。如果您使用的是开发服务器，有时，在某些情况下，可能需要几分钟才能收到推送通知。这不是由 Urban Airship 控制的，它是苹果开发服务器。

# xml - 从 XSLT 中的根节点中选择值

> ID：14956984
> 
> 赞同：0
> 
> 时间：2013-02-19T12:00:23.210
> 
> 标签：xml, xslt

我有一个 XSL 变量`prdxml`，它包含这样的 XML

```
 <node id="2939" parentID="2938" level="3" writerID="0" >
  <data alias="itemNumbers">,3101056,8261247,</data>
  <data alias="pass_word">akspass</data>
  <data alias="logo">/media/41532/inner-logo01.png</data> 
</node> 
```

如何从此变量中选择根节点中的 id(id="2939")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:25:21.063

我猜你正在使用 XSLT 1.0。

为了做这样的事情，你必须依赖扩展函数 node-set()。但由于是扩展功能，它的可用性取决于您使用的 XSLT 处理器。

例如，在 xsltproc、saxon 中，您可以使用如下内容：

```
<xsl:stylesheet xmlns:exsl="http://exslt.org/common"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0">

    <xsl:variable name="_prdxml">
        <node id="2939" parentID="2938" level="3" writerID="0" >
            <data alias="itemNumbers">,3101056,8261247,</data>
            <data alias="pass_word">akspass</data>
            <data alias="logo">/media/41532/inner-logo01.png</data> 
        </node>
    </xsl:variable>

    <xsl:template match="/">
        <xsl:variable name="prdxml" select="exsl:node-set($_prdxml)" />
        <!-- Now you can navigate through the prdxml node set -->
        <xsl:apply-templates select="$prdxml/node[@id = '2939']" />
    </xsl:template>

</xsl:stylesheet> 
```

如果您使用的是 Microsoft XSLT 处理器，则必须将扩展函数的命名空间更改为

```
xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:26:17.647

这看起来像 Umbraco 节点的 XML 结构（v4.5 之前）。

要访问 Umbraco 节点上的任何属性，您可以使用如下`@`符号：

```
<xsl:value-of select="$prdxml/@id" />
<xsl:value-of select="$prdxml/@parentID" /> 
```

要访问您在 Umbraco 节点上定义的属性，您将使用如下内容：

```
<xsl:value-of select="$prdxml/data[@alias='pass_word']" />    
<xsl:value-of select="$prdxml/data[@alias='logo']" /> 
```

Umbraco 在他们的 wiki 上有一个完整的部分。[http://our.umbraco.org/wiki/reference/xslt](http://our.umbraco.org/wiki/reference/xslt)；带有有关如何使用 XPATH 遍历其 XML 的示例。

***-- 编辑地址评论 --***

我的 XSLT 的工作版本是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xsl:stylesheet [ <!ENTITY nbsp "&#x00A0;"> ]>
<xsl:stylesheet 
    version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:msxml="urn:schemas-microsoft-com:xslt"
    xmlns:umbraco.library="urn:umbraco.library" xmlns:Exslt.ExsltCommon="urn:Exslt.ExsltCommon" xmlns:Exslt.ExsltDatesAndTimes="urn:Exslt.ExsltDatesAndTimes" xmlns:Exslt.ExsltMath="urn:Exslt.ExsltMath" xmlns:Exslt.ExsltRegularExpressions="urn:Exslt.ExsltRegularExpressions" xmlns:Exslt.ExsltStrings="urn:Exslt.ExsltStrings" xmlns:Exslt.ExsltSets="urn:Exslt.ExsltSets" 
    exclude-result-prefixes="msxml umbraco.library Exslt.ExsltCommon Exslt.ExsltDatesAndTimes Exslt.ExsltMath Exslt.ExsltRegularExpressions Exslt.ExsltStrings Exslt.ExsltSets">

<xsl:output method="html" omit-xml-declaration="yes"/>

<xsl:param name="currentPage"/>

<xsl:template match="/">
    Current Page ID : <xsl:value-of select="$currentPage/@id" />
</xsl:template>

</xsl:stylesheet> 
```

这可能不会显示在您的页面上的可能原因可能是：

*   `<xsl:param name="currentPage" />`已从您的 XSLT 中删除。
*   XSLT 未绑定到宏。
*   模板中没有宏。
*   模板未分配给您的节点。
*   节点尚未发布。

# c# - 使用外键从网格视图中删除行

> ID：14956985
> 
> 赞同：0
> 
> 时间：2013-02-19T12:00:27.490
> 
> 标签：c#, sql

我有 4 个表`a`, `b`, `c`，`d`并且我有来自`a`to `b`、`b`to`c`和`c`to的引用`d`（通过外键）。我正在使用网格视图来加载此表。如果我尝试删除具有引用的值，那么它会给我一个例外：

```
DELETE 语句与 REFERENCE 约束“FK__b__sc__0519C6AF”冲突。冲突发生在数据库“dbs”、表“dbo.b”、列“id”中。
该语句已终止。

```

如果有与之关联的键，我不想删除该值。可以 `GridViewSim_RowDeleting()`帮忙吗？

我更新的时候也有同样的问题。我正在使用网格视图提供的标准链接来更新和删除。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:52:03.840

您可以处理`RowDeleted`/`RowUpdated`事件中的执行，因此它不会被抛出到应用程序。例如

```
void GridViewSim_RowDeleted(Object sender, GridViewDeletedEventArgs e)
{
    if(e.Exception == null)
    {
        //Delete was successful - Do Something
    }
    else
    {
      // Delete was not successful - Do something else
      e.ExceptionHandled = true;   
    }
} 
```

您也可以`RowDeleting`按照您所说的那样在事件中执行此操作，但这需要自定义验证以检查主键是否存在于子表中，这将更容易和更快，并且在我看来让外键做同样混乱他们的工作并捕获异常，而不是执行检查以先发制人的错误。

# java - 在 android 中将 json 作为字符串对象读取

> ID：14956986
> 
> 赞同：1
> 
> 时间：2013-02-19T12:00:28.533
> 
> 标签：java, android, json

我已从 URL 中读取 JSON 数据作为字符串对象，并将其（作为字符串对象）传递给我的第二个活动。如何从这个字符串对象中读取值？请帮我。

下面是我的json：

```
{
    "speciality": [
        {
            "id": "1",
            "d_name": "Dr.Steven Cohen",
            "file_upload": "dr-photo.png",
            "d_address": "3838 California St. San Francisco,CA 94118",
            "d_specialty": "Eye",
            "designation": "Ophthalmologist",
            "d_city": "San Francisco",
            "d_state": "Calfornia",
            "d_zipcode": "CA94118",
            "d_phone": "018  000  000",
            "latitude": "18.815427",
            "longitude": "76.775144"
        },
        {
            "id": "2",
            "d_name": "Dr.  Hanish Patel",
            "file_upload": "hanish-patel.jpg",
            "d_address": " 160  East 56th Street New York, NY 10022 ",
            "d_specialty": "Eye",
            "designation": "Optometrist",
            "d_city": "New York",
            "d_state": "United States",
            "d_zipcode": "NY 10022",
            "d_phone": "018 000 000",
            "latitude": "40.760407",
            "longitude": "-73.968694"
        },
        {
            "id": "3",
            "d_name": " Dr. Leonard Bley MD, FACS ",
            "file_upload": "leonard-bley.jpg",
            "d_address": " 160 East 56th Street New York, NY 10022",
            "d_specialty": "Eye",
            "designation": "Ophthalmologist",
            "d_city": "New York",
            "d_state": "United States",
            "d_zipcode": "NY 10022",
            "d_phone": "018 000 000",
            "latitude": "40.760407",
            "longitude": "-73.968694"
        },
        {
            "id": "4",
            "d_name": "Dr. John Selle",
            "file_upload": "john_selle.jpg",
            "d_address": "2250 Hayes St Ste 206 San Francisco, CA 94117",
            "d_specialty": "Eye",
            "designation": "General  Practitioner",
            "d_city": "San Francisco",
            "d_state": "Calfornia",
            "d_zipcode": "CA94118",
            "d_phone": "018 000 000",
            "latitude": "37.78604",
            "longitude": "-122.457639"
        }
    ]
} 
```

这是我的代码：

```
try {
    JSONObject mainObject = new JSONObject(strjson);
    //JSONObject uniObject =         mainObject.getJSONObject("speciality");
    //JSONObject  uniName = uniObject.getJSONObject("d_name");
    //JSONObject uniURL = uniObject.getJSONObject("d_address");

    JSONObject oneObject = mainObject.getJSONObject("d_name");

    Log.e("name:", "unique name" + oneObject);
} catch (JSONException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:06:39.643

你的方法很好，但有一个问题；您假设**d_name**是主 JSONObject 中的一个键。

您首先需要获得关键**专业**的价值；然后尝试获取**d_name**值。请记住，获得**专业**的响应是 JSONArray。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:08:01.437

用这个

```
JSONArray Array = statusObject.getJSONArray("speciality");
            for (int j = 0; j < Array.length(); j++) 
            {   
                if (Array.getJSONObject(j).has("id")) 
                {
                    String str1 = (Array.getJSONObject(j).getString("id"));
                    String str2 = (Array.getJSONObject(j).getString("d_name"));
.
.
.
.
.
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:20:31.637

试试这个：

我希望这会对你有所帮助......

```
 JSONObject mainObject = new JSONObject(strjson);
 JSONArray details= mainObject .getJSONArray("speciality");
 if (details.length()!=0) {
    for (int i = 0; i < details.length(); i++) {

    String id = details.getJSONObject(i).getString("id");

        String name = details.getJSONObject(i).getString("d_name");
                            ......
                            ......
            String longitude= friends.getJSONObject(i).getString("longitude");
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T12:48:57.843

试试这个 ....

```
 JSONObject mainObject = new JSONObject(strjson);

      JSONArray Array = mainObject.getJSONArray("speciality");
        for (int j = 0; j < Array.length(); j++) 
        {   
            if (Array.getJSONObject(j).has("id")) 
            {
                String str1 = (Array.getJSONObject(j).getString("id"));
                String str2 = (Array.getJSONObject(j).getString("d_name"));
              Log.e("TA","name:"+str2);
             }
        } 
```

# c# - ListView-Binding 中 ObservableCollection 的过滤和排序

> ID：14956999
> 
> 赞同：2
> 
> 时间：2013-02-19T12:01:07.553
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

在.net 的早期版本中，您可以使用类似

```
ICollectionView collectionView = CollectionViewSource.GetDefaultView(AllImages); 
```

为 UI 元素建立过滤机制。但这似乎不再存在于 WinRT 中。

我正在使用 ListBox-Element 来显示用户列表。User-Class 包含属性 username (String)、isOnline (Boolean)、isFriend (Boolean) 和 unreadMails (Int)。我需要某种过滤和排序。

过滤：

*   没有过滤器
*   只有 isOnline == true

订购方式：

*   未读邮件 > 0
*   未读邮件 == 0
    *   AND isOnline == true
        *   AND isFriend == true
        *   是朋友 == 假
    *   AND isOnline == false
        *   AND isFriend == true
        *   AND isFriend == false

运行时属性可能会发生变化，如果列表自动更新会很酷。（绑定已经在工作，只是缺少过滤器和顺序）。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:44:56.397

正如您发现的那样，CollectionViewSource 不支持 WinRT/XAML 中的筛选器或排序。然后，您的解决方案是对关联的 ObservableCollection 的内容进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T17:44:10.140

CodeProject 上有一个自定义`ICollectionView`实现，它添加了排序/过滤功能。这是文章/代码的链接：http: [//www.codeproject.com/Articles/527686/A-WinRT-CollectionView-class-with-Filtering-and-So](http://www.codeproject.com/Articles/527686/A-WinRT-CollectionView-class-with-Filtering-and-So)

这将恢复 WinRT 版本的`ICollectionView`. 希望这会帮助像我一样遇到这个问题的人，寻找过滤集合的能力。