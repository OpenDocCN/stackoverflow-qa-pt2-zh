# StackOverflow 问答 14599000-14599999

# jquery - 点击图片，点击离开页面 jquery()

> ID：14599001
> 
> 赞同：0
> 
> 时间：2013-01-30T07:50:10.827
> 
> 标签：jquery, html, click

我正在做一个小测试，点击显示 iframe 的图像。然后我想单击除该图像（#container div）之外的任何位置。我可以让 iframe 弹出，但是当我单击主 div (#container) 时无法隐藏它。

```
 <html>
   <head>
   <script type="text/javascript"    src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
   <script>
$(function() {
  var moveLeft = 20;
  var moveDown = 10;

  $('a#trigger').click(function(e) {
    $('div#pop-up').show();
      //.css('top', e.pageY + moveDown)
      //.css('left', e.pageX + moveLeft)
      //.appendTo('body');
  }, function() {
    $('#container').click(function(){
    $('div#pop-up').hide();
    });

  $('a#trigger').mousemove(function(e) {
    $("div#pop-up").css('top', e.pageY + moveDown).css('left', e.pageX + moveLeft);
  });

   });</script>
       <style>
    h1{
    margin: 0;
    padding: 0;
    font-weight: normal;
    }
    div#container {
    width: 580px;
    margin: 15px auto 0 auto;
    padding: 20px;
    background: #000;
    border: 1px solid #1a1a1a;
    }
   /* HOVER STYLES */
   div#pop-up {
   display: none;
   position: absolute;
   /*width: 150px;
   padding: 150px;*/
   background: #eeeeee;
   color: #000000;
   border: 1px solid #1a1a1a;
   font-size: 90%;
  }
    </style>

   </head>
   <body>
<div id="container">
    <h1>Pop-out Example - pop out div on hover</h1>
    <p>
        <a href = "#" id="trigger"><img src="router.png"/></a>
    </p>
</div>
<div id="pop-up">
    <p>
        <iframe width="500px" height="350px" align= "top-left" src="http://127.0.0.1:667"></iframe>
    </p>
</div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:53:48.643

您可以使用`.toggle()`jQuery，但我认为它已被弃用。

```
$("a#trigger").click ( function() {
    $("#pop-up").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:01:30.547

看到您正在使用 jQuery，您可以执行以下操作。javascript 指示如果在`target`隐藏 div 的任何位置单击文档。但是，如果单击是在元素的边界内，`target`则会`hide()`停止`stopPropagation()`

**Javascript**

```
$(document).click(function() {
    $('#target').hide();
});
$("#target").click(function(e) {
    e.stopPropagation();
}); 
```

**HTML**

```
<div id="target">Test</div> 
```

**CSS**

```
#target {
  width: 50px;
  height: 50px;
  background-color: red;
} 
```

在这个[小提琴中说明](http://jsfiddle.net/Pyzzf/1/)

# ruby-on-rails - 自动测试未在 ruby on rails 环境中加载

> ID：14599005
> 
> 赞同：0
> 
> 时间：2013-01-30T07:50:16.980
> 
> 标签：ruby-on-rails, rspec, gem, autotest

我在使用自动测试时遇到问题。它似乎没有像我看到的教程视频那样加载。这就是发生的事情，它有点“冻结”并且什么都没有发生。正如我所说：

```
 $ autotest -rails
 loading autotest/rails_rspec2 
```

另外，当我运行服务器命令时，它显示它需要 ZenTest 4.8.4

```
rails s
Could not find ZenTest-4.8.4 in any of the sources
Run `bundle install` to install missing gems. 
```

这正在发生。我什至已经安装了 Zentest 4.8.3，前段时间它告诉我下载 Zentest 4.8.4，我已经降级了，因为这个社区的一个成员在一个相关问题上发表了一篇有用的帖子。不过，我似乎没有任何进展。有人可以帮忙吗？我完全是一个单独编程的新手，我真的很沮丧，因为它被困在这样一个新生的阶段。

有任何线索吗？重新安装不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:51:55.313

你有任何规格吗？如果您没有规范，自动测试似乎会冻结（只是等待规范运行）。

至于 ZenTest 问题.. 你会发布你的 Gemfile 吗？我猜你没有将 ZenTest 包括在一个组中。

如果您运行“捆绑更新”，您会得到任何不同的结果吗

# subscription - 没有发生 Google Checkout 订阅付款（每天、每月或每年）

> ID：14599011
> 
> 赞同：0
> 
> 时间：2013-01-30T07:51:07.310
> 
> 标签：subscription, google-checkout, android-pay

我将 PayPal 和 Google checkout 订阅付款集成到一个网站。贝宝几乎没问题，我收到了订阅付款。但是我在使用 Google 结帐时遇到问题。

例子： -

我创建了 1 美元的订阅付款（每日订阅）

我收到了“新订单通知”和“授权金额通知”，但没有收到“收费金额通知”

当我创建订阅付款配置文件时，我将开始日期设置为上一个日期（例如今天 28/01/2013，然后开始日期设置为 27/01/2013）。因为那时我将在 28/01/2013 再次收到订阅付款。

但是我仍然没有收到来自谷歌结帐的任何订阅付款，并且个人资料没有显示任何订阅付款发生

*注意我使用订阅类型作为商家

不能每天收到订阅付款有什么问题？是开始日期的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:44:05.520

我发现了错误....

我使用商家处理的订阅而不是谷歌处理的订阅

当我使用谷歌处理订阅它工作..

# c# - 如何在没有汇总布局的情况下清除超网格的所有数据和布局

> ID：14599012
> 
> 赞同：0
> 
> 时间：2013-01-30T07:51:12.590
> 
> 标签：c#, winforms, ultrawingrid

有没有办法在不删除摘要行的情况下设置 UltraGrid 的数据源？

我的 Windows 窗体应用程序中有一个 ultragrid `gvResult`。

用户可以选择列并以另一种形式对它们进行排序，然后通过按“应用”按钮将这些更改应用到 gvResult。

此外，`gvResult`必须显示行计数器摘要。

我在应用用户更改之前清除了 gvResult，否则排序算法不会更改为用户设置的值。

```
gvResult.DataSource = new DataTable();
gvResult.DataSource = dataTable_With_New_Set_And_Sort_of_Columns; 
```

这里面还有另一个问题！它也删除了行计数器摘要以及`gvResult`. 我在[基础设施论坛](http://www.infragistics.com/community/forums/t/42745.aspx)上搜索，发现以下代码；但是，第一个问题仍然存在。列排序不会改变。

```
BindingSource bs = new BindingSource();
bs.DataSource = typeof(DataTable);
bs.DataSource = dataTable_With_New_Set_And_Sort_of_Columns;
gvResult.DataSource = bs; 
```

你有什么建议吗？

对不起，因为我的英语不好。

**编辑：**我尝试了类似下面的方法，但它不再起作用：

```
DataTable dtTest = new DataTable();
dtTest.Rows.Clear();
dtTest = Method_That_Returns_DataTable_With_New_Set_And_Sort_of_Columns();
gvResult.DataSource = dtTest.Copy(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-23T14:35:15.293

M_Mogharrabi,

如果我理解你想怎么做，这可能对你有用。

每当您将数据绑定到 UltraGrid 时，`IntializeLayout`每次都会触发该事件，因此您需要确保将摘要行设置为在`InitializeLayout`函数中可见。

像这样：

```
 private void yourUltraGrid_InitializeLayout(object sender, InitializeLayoutEventArgs e)
    {
        // Define Global settings like you usually do
        // ....

        // Configure your UltraGrid columns.
        //// ID
        //// Caption: "ID"
        e.Layout.Bands[0].Columns[ColumnKeyA].Header.Caption = "ID";
        e.Layout.Bands[0].Columns[ColumnKeyA].Header.VisiblePosition = 0;
        e.Layout.Bands[0].Columns[ColumnKeyA].Width = 50;
        // Any additional settings you may want for this column.
        // Repeat for each column...

        // Then add this block under each column you want to add Summary value to.

        // This if function is critical to avoid summary rows from duplicating itself.
        // Check to see if the Summary does not exist.
        if (!e.Layout.Bands[0].Summaries.Exists("yourSummaryKey"))
        {
            // If it doesn't exist, create the summary.
            SummarySettings summary;
            summary = e.Layout.Bands[0].Summaries.Add("yourSummaryKey", SummaryType.Sum,
                e.Layout.Bands[0].Columns[ColumnKeyA]);

            // Change the Display Formatting if you desire.
            // This display format will change it to just numbers
            // instead of "Sum = 1234"
            summary.DisplayFormat = "{0}";

            // Change the horizontal alignment for the cell text.
            summary.Appearance.TextHAlign = Infragistics.Win.HAlign.Left;

            // Apply any other settings to this summary column
            // if needed.
            // ...
        }
    } 
```

**注意：**摘要行仅适用于父波段。无法为子乐队设置摘要行。

如果要重置数据网格，请将以下内容添加到代码中（但不在 InitializeLayout 函数中）

```
 private void btnReset_Click(object sender, EventArgs e)
    {
        yourUltraGrid.DeleteSelectedRows();

        // This will trigger the yourUltraGrid_InitializeLayout event
        // and will ensure the column settings are defined.
        yourUltraGrid.DataSource = Prototype.ugGetResourcePlanning();
    } 
```

这将保留对排序算法所做的任何更改。所以在这个例子中：如果用户对 UltraGrid 进行了任何更改并随之更改了排序算法。点击“重置”按钮只会恢复数据，不会恢复排序算法。

希望这可以帮助。

# ios - 在 NSUserDefaults 中存储许多值是一种好习惯吗？

> ID：14599014
> 
> 赞同：0
> 
> 时间：2013-01-30T07:51:17.287
> 
> 标签：ios, objective-c, entity, nsuserdefaults

例如，我有一个名为的实体`Profile`，其属性如下

```
name,
gender,
dateOfBirth,
height,
weight,
bloodGroup,
province,
country,
picture 
```

但是，我将为整个应用程序使用一个配置文件。所以我认为我不需要将这个对象持久化到核心数据中。**那么将所有属性存储在 NSUserDefaults 中是一种好习惯吗？**我的应用程序也可能存储其他字段`NSUserDefaults`。将许多值存储到 中是一件好事`NSUserDefaults`吗？否则，任何其他想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:55:56.263

您可以将值存储在 NSUserDefaults 中，但请确保添加条件，同时让其他用户可能想要登录，例如您可以在注销时删除所有内容并在登录时保存。或者，您可以将值存储在 PList 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:56:36.983

您可以使用`NSUserDefaults`，因为没有机密信息，如果任何信息是机密信息，您应该将值保存在 KeyChain 中。

您可以使用`NSDictionary`该字典并将其直接存储到`NSUserDefaults`中，这将帮助您更轻松地访问数据。

访问[此](https://stackoverflow.com/questions/6173939/how-to-use-nsdictionary-in-nsuserdefault)链接以了解如何执行此操作。

希望这些信息对你有帮助..

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-30T07:59:11.597

iPhone SDK 有一种非常优雅的方式将用户设置保存在称为 NSUserDefaults 的结构中。您可以在此 UserDefaults 中添加一堆不同的对象——这些只是您将保存在应用程序文件夹中的用户设置字典。

使用 NSDictionary 用户可以存储存储数据。

```
NSMutableDictionary *dic = [[NSMutableDictionary  alloc] init];

[dic addObject:@"name" forKey:@"objProfile"];
[dic addObject:@"gender" forKey:@"objProfile"];

[NSUserDefaults standardDefaults] setObject:dic forKey:@"Profile"]; 
```

另一种解决方案是将数据存储在`PList`. 这是存储数据的最佳方式。

希望这会帮助你。

# testing - 用于生产测试的影子部署

> ID：14599016
> 
> 赞同：8
> 
> 时间：2013-01-30T07:51:24.533
> 
> 标签：testing

众所周知，生产中测试 (TiP) 最重要的部分是：

*   利用真实的客户行为/数据
*   降低客户风险。

我发现影子部署是一种很有前途的方法。

通过这种方法，V-next 产品与 V-current 并排部署在生产中。当客户请求到达时，请求的克隆被路由到 V-next 以进行测试。但结果永远不会返回给客户。因此没有风险暴露给客户。一旦 V-next 准备好，我们可以简单地切换到它并拆除 V-电流。

因此，关键部分似乎是：

*   如何实现各种项目的路由逻辑，如Web服务、网站等。
*   如何隔离测试期间生成的数据，因为它可能对生产中的上游和下游系统产生副作用。

我的问题是：

*   我们还有什么需要注意的吗？
*   是否有任何最佳实践/工具/设计/解决方案来解决这些问题？

具体技术细节请看这里： [https ://stackoverflow.com/questions/14599167/how-to-clone-iis-request-and-redirect-to-a-test-version-site](https://stackoverflow.com/questions/14599167/how-to-clone-iis-request-and-redirect-to-a-test-version-site)

（不幸的是，SO社区删除了上面的帖子......）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-05-14T18:30:41.653

我们在 Twitter 上使用[Diffy](https://github.com/opendiffy/diffy/)做到了这一点。您不仅要捕获 V-next，还想比较它的 V-current。此外，您希望对数千个样本的比较进行聚合和去噪，以获得置信度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-23T13:38:34.587

在生产环境中进行测试的另一种方法是对少数用户进行测试，或者仅在生产环境中向您的 QA 团队开放新功能（暗启动）。

有许多工具可以帮助您在生产环境中进行测试，甚至是在真实用户身上。 [Configz.io](https://configz.io)是一个很好的工具。

# asp.net - localhost 和本地 Intranet 上的 Internet Explorer 兼容性不同

> ID：14599017
> 
> 赞同：1
> 
> 时间：2013-01-30T07:51:27.933
> 
> 标签：asp.net, html, browser, html5-video, compatibility

当我在本地计算机上开发并将网站发布到我们的一个 Intranet 服务器时，我遇到了一些关于兼容性模式的奇怪问题。我目前正在使用以下软件进行开发和部署：

## 笔记本电脑

*   Visual Studio 2012 专业版
*   视窗 8 专业版
*   互联网浏览器 10

## 服务器

*   IIS 7.5
*   Windows Server 2008 R2 x64 标准版

* * *

当我在 localhost:{random port} 上调试网站时，我会在 IE 中看到兼容性图标。

![兼容性图标 TRUE](../Images/b5e848500628a0d440ac0f29797413cf.png)

* * *

将网站从笔记本电脑部署到服务器后，我看不到兼容性图标。

![在此处输入图像描述](../Images/19c8b82c29536573bff248de316b0221.png)

* * *

我需要网站正确显示 HTML5 内容，即视频才能播放。视频标签在我的笔记本电脑上可以正常播放，但不能在 Intranet 站点上播放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:57:13.233

如果我没记错的话，对于 Intranet 有一个奇怪的“特殊”情况，其中某些版本的 IE 获取了意外的文档和/或浏览器模式。可能有帮助的是告诉 IE 以最新的可能模式呈现您的网站：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

IE8 是最新版本时有[一篇博客文章](http://blogs.msdn.com/b/ie/archive/2010/03/02/how-ie8-determines-document-mode.aspx)，其中显示了 IE 被强制进入`Emulate IE7`模式的情况（有点接近底部）。

PS。您没有向我们展示任何重现此问题的代码（因此以上在某种程度上是猜测）。确保您的文档类型[设置正确](http://msdn.microsoft.com/en-us/library/ie/hh920756%28v=vs.85%29.aspx)：

```
<!DOCTYPE html> 
```

聚苯乙烯。我现在看到提到的 MSDN 页面实际上建议*根本不*使用 X-UA-Compatible 元标记：

> 此外，请勿在页面上使用“X-UA-Compatible”元标记或从 Web 服务器发送自定义 HTTP 标头。

# android - ActionBar OverflowMenu 项目在点击时消失

> ID：14599018
> 
> 赞同：1
> 
> 时间：2013-01-30T07:51:28.387
> 
> 标签：android, android-actionbar

我有一个`ActionBar`溢出菜单项。每个项目都`onClick`以`Activity`using开头`Intent`。在某些设备中，项目文本会消失，并且菜单会一直卡住，直到活动打开。

我认为它等待`Activity`打开。无论如何强制溢出菜单立即关闭而不是看到带有空文本条目的菜单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:10:23.557

我有同样的错误，解决这个问题的方法很简单：关闭菜单:)

```
 @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item) {

        closeOptionsMenu();

        .....
        .....        
        .....
        return .....;
    } 
```

# java - Tomcat 6.0.16 Undeploy 不会删除 MySQL Jar

> ID：14599025
> 
> 赞同：1
> 
> 时间：2013-01-30T07:52:10.987
> 
> 标签：java, locking, tomcat6, mysql-5.1, undeploy

我的系统上有以下配置。

```
JDK 1.6
Apache Tomcat 6.0.16
Windows 7 
```

我正在使用`mysql-connector-java-5.1.21`jar 文件。

我还在 Tomcat context.xml 文件中设置了以下参数

```
<Context antiResourceLocking="true" antiJARLocking="true">

    <!-- Default set of monitored resources -->
    <WatchedResource>WEB-INF/web.xml</WatchedResource>

    <!-- Uncomment this to disable session persistence across Tomcat restarts -->
    <!--
    <Manager pathname="" />
    -->

    <!-- Uncomment this to enable Comet connection tacking (provides events
         on session expiration as well as webapp lifecycle) -->
    <!--
    <Valve className="org.apache.catalina.valves.CometConnectionManagerValve" />
    -->

</Context> 
```

仍然当我取消部署我的应用程序时，它不会删除`mysql-connector-java-5.1.21`jar 其他所有内容都被删除。

当我尝试手动删除时，我收到以下错误消息：

```
File is open in Apache Tomcat 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:57:02.210

`Tomcat 6`在重新部署应用程序时有一些类路径锁定问题。

应该始终有效的解决方案是停止 Tomcat 并删除包含 jar 的应用程序目录。

# c++ - 在 CSV 文件中查找相同的名称。C++

> ID：14599043
> 
> 赞同：0
> 
> 时间：2013-01-30T07:53:31.010
> 
> 标签：c++, csv

我正在尝试编写一个程序，该程序将比较两个或多个 CSV 文件并找到相同的名称并在有两个或多个时将它们打印出来。每个名称只会在一个文件中出现一次。

这是典型文件的外观。

```
Name,E-mail,Student Level,Major
John Doe, jdoe@something.com, Freshman, CS
Jane Doe, janed@something.com, Freshman, CS
.... 
```

因此，如果这些名称中的任何一个在两个或多个文件中，程序应该打印出他们的名字和他们的名字出现在文件中的总次数。

到目前为止，我已经做了很多。我已经让它只打印出一个文件中的名称。不知道下一步该做什么。这是代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define buffer 1024

int main(){
    FILE *fp;
    char temp[buffer], *fn, *ln;
    char *first[buffer], *last[buffer];
    int line_count = 0;
    fp = fopen("students.csv", "r");

    while( (fgets(temp, buffer, fp) != NULL) )
    {
            first[line_count] = (char *)malloc(sizeof(char)* buffer);
            last[line_count] = (char *)malloc(sizeof(char) * buffer);

            ln = strtok(temp,",");
            fn = strtok(NULL,",");
            strcpy(first[line_count], fn);
            strcpy(last[line_count], ln);
            line_count++;
    }

    while(line_count--)
    {
            printf("Name : %s %s\n", first[line_count], last[line_count]);
    }

    fclose(fp);
    return 0;
} 
```

我是 C++ 新手（因此我用 C 编写代码），所以如果有人能指出我正确的方向。那很好啊。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:58:30.647

当您从 CSV 输入文件中读取每个名称时，您应该尝试将其插入到`std::set<std::string>`(您需要`#include <set>`and `#include <string>`。如果由于密钥已经存在而失败，您知道该名称是您的输出之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:22:25.180

因为看起来您只是在寻找一种方法而不是代码（您已经喜欢编写 C）。那么这是一个使用你已经拥有的“方法”。

由于您已经成功解析了一个文件，只需对另一个文件重复该过程（复制、粘贴、更改一些名称等）。

然后你将有两组数组，比如 first1、first2、last1、last2。现在您可以通过它们来查找任何匹配项（下面的 sudo 代码）。

```
for each line in first1 and last2
  look for match in first2 and last2
  log/print the matches 
```

现在就你如何处理它而言，我肯定会推荐更多的 C++ ish 代码。您可以利用 std::string 和 std::vector 功能来简化代码。

# android - Sherlock 操作栏中的多个自定义视图 ..？

> ID：14599044
> 
> 赞同：1
> 
> 时间：2013-01-30T07:53:32.453
> 
> 标签：android, actionbarsherlock

我需要在操作栏中有多个自定义视图。（因为菜单项不能左对齐）。

我确实尝试过这样做，但它一次只显示一个视图。甚至可能..？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:16:05.273

为什么需要多个自定义视图？您可以在一个自定义视图中放置多个按钮。

# c# - 删除 Json 特定节点

> ID：14599045
> 
> 赞同：0
> 
> 时间：2013-01-30T07:53:41.150
> 
> 标签：c#, .net-4.0, json.net, object-to-string

在运行时，我想打印 JSon 以记录但审查其字段之一。我使用 JSon.Net 并拥有所有属性，例如

```
 public Class Terms
    {
        [JsonProperty("Term")]
        string term

        [JsonProperty("SecretTerm")]
        string SecretTerm

        public string toCensoredString()
        {
         // I need to get a JSON string with only the regular term and not the secret
         var jsonRequest = JsonConvert.SerializeObject(this);
         // .....
        }
    } 
```

在我的新 ToCensoredString() 函数中消除运行时特定字段的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:12:30.737

到目前为止，最简单的方法是使用`JsonIgnore`属性。

如果我创建这样的`Terms`对象：

```
Terms terms = new Terms() { SecretTerm = "Secret", Term = "Not secret" }; 
```

如果`SecretTerm`看起来像这样：

```
[JsonIgnore]
[JsonProperty("SecretTerm")]
public string SecretTerm { get; set; } 
```

您的序列化 Json 将如下所示：

```
{
    "Term": "Not secret"
} 
```

如果您想要更细粒度的控制，则必须创建自定义转换器。

**编辑：**

要更有选择性地输出对象，您需要自定义转换器：

```
class TermsConverter : Newtonsoft.Json.JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return typeof(Terms) == objectType;
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        Terms terms = (Terms)value;

        writer.WriteStartObject();
        writer.WritePropertyName("Term");
        writer.WriteValue(terms.Term);
        writer.WriteEndObject();
    }
} 
```

序列化时，你会这样做：

```
var jsonRequest = JsonConvert.SerializeObject(this, new TermsConverter()); 
```

您会注意到我没有`ReadJson`实现 - 我认为没有必要，因为您可以在`Terms`不使用转换器的情况下轻松反序列化对象。在这种情况下，该`SecretTerm`属性将只是空的。

通过使用转换器，您将不需要`[JsonIgnore]`属性上的`SecretTerm`属性。

# ruby-on-rails-3 - 需要用户只更新他们的个人资料图片

> ID：14599049
> 
> 赞同：1
> 
> 时间：2013-01-30T07:53:53.503
> 
> 标签：ruby-on-rails-3, paperclip

我正在使用回形针 gem，我需要用户只更新他们的图像。问题是当我尝试上传图片时出现以下错误。`wrong number of arguments (1 for 0)`我的更新照片方法如下所示：

```
def upload_photo
 if @user.update_attributes(:profile_image => params[:user][:profile_image])
    redirect_to(edit_user_path)
 else
    render 'upload_photo'
 end
end 
```

我的用户模型已经`attr_accessible :profile_image`定义，我尝试使用`update_attribute`无济于事。最后我的观点是这样的。

```
<%= form_for(@user, :url => upload_photo_user_path, :html => { :multipart => true, :method => :post }) do |f| %>
  <%= f.file_field :profile_image, :class => "btn btn-success" %>
  <%= f.submit "Upload photo" %>
<% end %> 
```

任何代码示例都受到高度赞赏，因为我真的尝试了几乎所有东西。

# android - 在android中处理横向和纵向期间的多个选项卡

> ID：14599050
> 
> 赞同：3
> 
> 时间：2013-01-30T07:54:00.540
> 
> 标签：android, layout, tabs, orientation, landscape-portrait

我使用 layout 和 layout-land 为横向和纵向指定了不同的布局，我的应用程序有多个选项卡。每次从纵向更改为横向或横向更改为纵向屏幕更改为第一个选项卡时，即使选择的选项卡也不同。我们怎样才能解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:17:21.327

默认情况下，旋转设备会破坏并重新创建您的活动。您需要保存所选选项卡的状态，并在新 Activity 启动时恢复它。

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    // onCreate implementation goes here

    if(savedInstanceState != null) {
        int selectedTabIndex = savedInstanceState.getInt("selectedTabIndex");
        getActionBar().setSelectedNavigationItem(selectedTabIndex);
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {

    super.onSaveInstanceState(outState);
    outState.putInt("selectedTabIndex", getActionBar().getSelectedNavigationIndex());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:16:29.507

您可以使用 onRetainNonConfigurationInstance() 来解决此问题。

```
public void onCreate(Bundle savedInstanceState)
{
   ....
   lastTab = (Integer) getLastNonConfigurationInstance();
   .....
   if(lastTab != null)
   {
      tabs.setCurrentTab(lastTab);
   }
}

public Object onRetainNonConfigurationInstance() 
{
   return tabs.getCurrentTab();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:07:58.103

当您更改方向时，它将重新加载活动。这就是为什么它提供第一个选项卡的原因。在清单文件中使用 android:configChanges="keyboardHidden|orientation" 如果它不能正常工作，那么去 @Override public void onSaveInstanceState(Bundle savedInstanceState) {}

# search - Solr 查询或设计

> ID：14599051
> 
> 赞同：1
> 
> 时间：2013-01-30T07:54:21.930
> 
> 标签：search, solr, elasticsearch

想要执行如下查询：

*   location1 , location2 中的类别
*   location1 ,loc2 和 loc3 中的类别 1 和类别 2

在我们的搜索中。

我们的挑战：

1.  从输入的查询中选择正确的关键字（类别和位置）。
2.  其映射到相关实体

我应该如何处理这个？

我们有索引的地点和类别数据。

# eclipse - 将登录凭据更改为 tfs eclipse

> ID：14599053
> 
> 赞同：2
> 
> 时间：2013-01-30T07:54:39.400
> 
> 标签：eclipse, tfs

昨天我更改了计算机上的域，现在 TFS 抱怨用户凭据错误。我已经删除了缓存文件夹中的所有文件，尝试在控制面板的凭据管理器下更改凭据等等。我如何决定要使用哪个用户登录 TFS？非常烦人，我无法在 eclipse 中更改域和用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:52:54.600

能够从 Eclipse 中更改凭据会很好，但我认为使用 Eclipse Juno 和 Team Explorer Everywhere 2012 是不可能的。（基于[这个答案](https://stackoverflow.com/a/11091733/667632)，服务器上运行的版本可能也很重要侧面 - 我认为我正在使用的是 2008 年。）

我绕过了这个限制，创建了一个批处理文件以在所需的凭据下启动 Eclipse。例如：

```
runas /netonly /user:domain\%username% "C:\eclipse\eclipse.exe" 
```

当你运行它时，它会提示你输入密码。当 Eclipse 启动时，它将在 runas 命令行上指定的凭据下运行。

# html - 停止不必要的内容滚动

> ID：14599055
> 
> 赞同：0
> 
> 时间：2013-01-30T07:54:44.673
> 
> 标签：html, css, scroll, footer, sticky-footer

我们在[http://cmagics.eu/digitalmagazinepublishing](http://cmagics.eu/digitalmagazinepublishing)有一个网站，除了页面有大约 50 像素的烦人滚动这一事实之外，所有内容都按照我们的意愿进行布局，即使有足够的空间容纳内容进入。

如何停止页面滚动？由于我不确定是什么元素导致了这种情况，下面附上了指向 html 源代码和 css 文件的链接。

html结构

查看源：[http ://cmagics.eu/digitalmagazinepublishing/](http://cmagics.eu/digitalmagazinepublishing/)

css

[http://cmagics.eu/digitalmagazinepublishing/wp-content/themes/responsive2/style.css?ver=1.8.7](http://cmagics.eu/digitalmagazinepublishing/wp-content/themes/responsive2/style.css?ver=1.8.7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:03:47.593

这可能不是 100% 正确的解决方案，但请尝试在“hfeed”类上添加溢出：隐藏。

如果这不起作用，请在控制 BODY 的类上尝试相同的操作。

如果您安装了谷歌浏览器，您可以使用开发工具来识别每个元素及其相关样式 - 使调试这些东西变得更加容易。

# c++ - 如何将向量大小与整数进行比较？

> ID：14599057
> 
> 赞同：11
> 
> 时间：2013-01-30T07:54:48.470
> 
> 标签：c++, vector

`vector<int> vectorX`如果向量的大小（声明为）与预期不同，我将使用以下代码引发错误。

```
vector<int> vectorX;
int intendedSize = 10;
// Some stuff here
if((int)(vectorX.size()) != (intendedSize)) {
    cout << "\n Error! mismatch between vectorX "<<vectorX.size()<<" and intendedSize "<<intendedSize;
    exit(1);
} 
```

该`cout`语句显示两者的大小相同。**比较并没有显示它们是相等**的。

输出是`Error! mismatch between vectorX 10 and intendedSize 10`

错误在哪里？早些时候我尝试过`(unsigned int)(intendedSize)`，但这也表明它们是不平等的。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-02-14T09:52:31.707

我写这个答案是因为其他两个，包括接受的一个，都是错误的。`std::vector`'s的类型`size()`不是`unsigned int`，也不是`size_t`。

an 大小的类型`std::vector<T>`是`std::vector<T>::size_type`。

就是这样。在某些体系结构和某些编译器上，它可能与 相同`size_t`，而在另一些体系结构中则可能不同。`size_t`类型变量可以保存与类型变量相同的值的假设`std::vector<T>::size_type`可能会失败。

要检查您的向量是否具有正确的大小，您可以执行以下操作：

```
if(vec.size() != static_cast<std::vector<int>::size_type>(expected_size)) {
    std::cerr << "Error!" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T07:56:41.617

您`)`在 if 语句的右侧缺少

```
if((int)(vectorX.size()) != (intendedSize)) {
                                          ^^^
} 
```

但请注意，将 std::vector::size 的返回值转换为 int 是不好的。您失去了大小可能的一半（感谢克里斯）。

你应该写：

```
size_t intendedSize = 10; 
// OR unsign int intendedSize  = 10; 
if(vectorX.size() != intendedSize) {
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T08:07:00.833

使用`size_t`类型来保存集合大小：

```
vector<int> vectorX;
size_t intendedSize = 10;
// Some stuff here
if(vectorX.size() != intendedSize) {
     ... 
} 
```

实际上从技术上讲，您应该使用`vector<int>::size_type`，但实际上这始终是 typedef`size_t`

An`int`通常是带符号的 32 位整数。

`size_t`通常是无符号 64 位整数（在 64 位架构上）或无符号 32 位整数（在 32 位架构上）。

（请注意，该标准不强制执行这些约束。ABI 指定了这一点，例如 x86 和 x86-64 ABI 执行。）

# ios - 使用 md5 密钥的 iOS 3DES 加密

> ID：14599066
> 
> 赞同：1
> 
> 时间：2013-01-30T07:55:41.670
> 
> 标签：ios, objective-c, encryption, md5, 3des

你能帮我吗。

我开发了一个 iOS 应用程序。我尝试使用 3DES 算法加密字符串，但发现与 Java 代码不同的结果。密钥应为 md5，大小为 24 字节。我的朋友用 Java 加密了明文，他得到了一个加密的 base64 字符串。但我得到不同的结果。:(

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:42:13.577

md5 输出 128 位（16 字节）散列，而 3DES 采用 168 位（21 字节）密钥。我怀疑将 md5 哈希传递到您的加密和/或解密算法会导致沿途发生一些填充。

最好使用 SHA256（输出 256 位散列）并将输出截断为 168 位，或者使用 AES-256 而不是 3DES，并将完整的 256 位散列作为密钥。比这更好的是使用适当的密钥派生函数（如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)）从字符串密码创建密钥。

# wcf - 如何将 IP 地址添加到 Windows 主机的配置文件中？

> ID：14599068
> 
> 赞同：0
> 
> 时间：2013-01-30T07:55:54.927
> 
> 标签：wcf

我有一个作为 Windows 服务托管的 WCF 服务。Windows 服务是使用 InstallUtil 安装的。

安装后，我必须手动指定端点要使用的基地址。

我可以在安装过程中动态获取 IP 地址并更新配置文件吗？

我知道不建议这样做，但客户希望该服务开箱即用，只需最少或不进行任何配置。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:56:29.413

只需按照以下步骤即可解决：

step1 : 编辑时需要以管理员身份运行记事本，因为你的hosts文件是系统文件。这样做很容易。在你的开始菜单中找到记事本（一般在附件里），在里面点击右键，然后点击“以管理员身份运行”。step2 : 在你可以编辑你的主机文件之前，你需要找到它。并非所有版本的 Windows 都将它存储在同一个位置，但根据我们的经验，它通常位于 c:\windows\system32\drivers\etc\hosts 其他可能的位置包括：

```
Windows 95/98/Me c:\windows\hosts 
Windows NT/2000/XP Pro c:\winnt\system32\drivers\etc\hosts
Windows XP Home/Vista/Windows 7 c:\windows\system32\drivers\etc\hosts 
```

第三步：在记事本中单击“文件”，然后单击“打开..”，找到“文件名”旁边的下拉菜单。默认情况下显示“文本文档（*.txt）。将其更改为“所有文件（* .*）”导航到您的主机文件所在的文件夹双击主机将其打开第 4 步：我们建议您备份主机文件在对其进行任何修改之前。要做到这一点：

```
In Notepad click "File" and then "Save As..."
For the "File name:" value, enter something different, such as hosts_backup_2011.05.31
Click "Save" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:16:51.553

当然，您可以传递参数来安装 util 命令行，但为此您需要稍微更改 Windows 服务的安装程序类。[查看此链接以了解如何操作](http://blog.dotnetstep.in/2009/06/passing-parameter-to-installutil.html)

# javascript - 如何编写一个 javascript 正则表达式来用 html 超链接替换这种格式 [*](*) 的超链接？

> ID：14599071
> 
> 赞同：5
> 
> 时间：2013-01-30T07:56:08.403
> 
> 标签：javascript, regex

我需要带有以下格式链接的解析文本：

```
[html title](http://www.htmlpage.com)
http://www.htmlpage.com
http://i.imgur.com/OgQ9Uaf.jpg 
```

这两个字符串的输出将是：

```
<a href='http://www.htmlpage.com'>html title</a>
<a href='http://www.htmlpage.com'>http://www.htmlpage.com</a>
<a href='http://i.imgur.com/OgQ9Uaf.jpg'>http://i.imgur.com/OgQ9Uaf.jpg</a> 
```

该字符串可以包含任意数量的这些链接，即：

```
[html title](http://www.htmlpage.com)[html title](http://www.htmlpage.com)
[html title](http://www.htmlpage.com)   [html title](http://www.htmlpage.com)
[html title](http://www.htmlpage.com) wejwelfj http://www.htmlpage.com 
```

输出：

```
<a href='http://www.htmlpage.com'>html title</a><a href='http://www.htmlpage.com'>html title</a>
<a href='http://www.htmlpage.com'>html title</a>    <a href='http://www.htmlpage.com'>html title</a>
<a href='http://www.htmlpage.com'>html title</a> wejwelfj <a href='http://www.htmlpage.com'>http://www.htmlpage.com</a> 
```

我有一个非常长的函数，它通过传递字符串 3 次来完成工作，但我无法成功解析这个字符串：

```
[This](http://i.imgur.com/iIlhrEu.jpg) one got me crying first, then once the floodgates were opened [this](http://i.imgur.com/IwSNFVD.jpg) one did it again and [this](http://i.imgur.com/hxIwPKJ.jpg). Ugh, feels. Gotta go hug someone/something. 
```

为简洁起见，我将发布我尝试过的正则表达式，而不是整个查找/替换函数：

```
var matchArray2 = inString.match(/\[.*\]\(.*\)/g); 
```

对于匹配`[*](*)`，不起作用，因为`[]()[]()`匹配

真的是这样，我猜。一旦我进行了匹配，我就会在匹配项中搜索 ( *) 和 [* ] 以解析出链接和链接文本并构建 href 标记。我从临时字符串中删除匹配项，因此当我第二次通过查找普通超链接时不匹配它们：

```
var plainLinkArray = tempString2.match(/http\S*:\/\/\S*/g); 
```

我没有用正则表达式解析任何 html。我正在解析一个字符串并尝试输出 html。

编辑：我添加了它在事后解析第三个链接[http://i.imgur.com/OgQ9Uaf.jpg的要求。](http://i.imgur.com/OgQ9Uaf.jpg)

我的最终解决方案（基于@Cerbrus 的回答）：

```
function parseAndHandleHyperlinks(inString)
{
    var result = inString.replace(/\[(.+?)\]\((https?:\/\/.+?)\)/g, '<a href="$2">$1</a>');
    return result.replace(/(?: |^)(https?\:\/\/[a-zA-Z0-9/.(]+)/g, ' <a href="$1">$1</a>');     
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:02:39.563

试试这个正则表达式：

```
/\[(.+?)\]\((https?:\/\/[a-zA-Z0-9/.(]+?)\)/g

var s = "[html title](http://www.htmlpage.com)[html title](http://www.htmlpage.com)\n\
[html title](http://www.htmlpage.com)   [html title](http://www.htmlpage.com)\n\
[html title](http://www.htmlpage.com) wejwelfj http://www.htmlpage.com";

s.replace(/\[(.+?)\]\((https?:\/\/[a-zA-Z0-9/.(]+?)\)/g, '<a href="$2">$1</a>'); 
```

正则表达式解释：

```
# /                   - Regex Start
# \[                  - a `[` character (escaped)
# (.+?)               - Followed by any amount of words, grouped, non-greedy, so it won't match past:
# \]                  - a `]` character (escaped)
# \(                  - Followed by a `(` character (escaped)
# (https?:\/\/
#   [a-zA-Z0-9/.(]+?) - Followed by a string that starts with `http://` or `https://`
# \)                  - Followed by a `)` character (escaped)
# /g                  - End of the regex, search globally. 
```

现在 2 中的字符串`() / []`被捕获，并放置在以下字符串中：

```
'<a href="$2">$1</a>'; 
```

这适用于您的“有问题的”字符串：

```
var s = "[This](http://i.imgur.com/iIlhrEu.jpg) one got me crying first, then once the floodgates were opened [this](http://i.imgur.com/IwSNFVD.jpg) one did it again and [this](http://i.imgur.com/hxIwPKJ.jpg). Ugh, feels. Gotta go hug someone/something."
s.replace(/\[(.+?)\]\((https?:\/\/[a-zA-Z0-9/.(]+?)\)/g, '<a href="$2">$1</a>')

// Result:

'<a href="http://i.imgur.com/iIlhrEu.jpg">This</a> one got me crying first, then once the floodgates were opened <a href="http://i.imgur.com/IwSNFVD.jpg">this</a> one did it again and <a href="http://i.imgur.com/hxIwPKJ.jpg">this</a>. Ugh, feels. Gotta go hug someone/something.' 
```

“不正确”输入的更多示例：

```
var s = "[Th][][is](http://x.com)\n\
    [this](http://x(.com)\n\
    [this](http://x).com)"
s.replace(/\[(.+?)\]\((https?:\/\/[a-zA-Z0-9/.(]+?)\)/g, '<a href="$2">$1</a>')

//   "<a href="http://x.com">Th][][is</a>
//    <a href="http://x(.com">this</a>
//    <a href="http://x">this</a>.com)" 
```

您不能真正责怪最后一行的中断，因为无法知道用户是否打算在那里停止 url。

要捕获松散的网址，请添加以下内容：

```
.replace(/(?: |^)(https?\:\/\/[a-zA-Z0-9/.(]+)/g, ' <a href="$1">$1</a>'); 
```

该`(?: |^)`位捕获一个`String start`或`space`字符，因此它也会匹配以 url 开头的行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T08:02:19.113

```
str.replace(/\[(.*?)\]\((.*?)\)/gi, '<a href="$2">$1</a>'); 
```

这假定字符串中没有错误的括号或 URL 中的括号。

然后：

```
str.replace(/(\s|^)(https?:\/\/.*?)(?=\s|$)/gi, '$1<a href="$2">$2</a>') 
```

这匹配一个类似“http”的 URL，该 URL 没有紧跟在前面的“”（之前的替换刚刚添加）。当然，如果你有它，请随意使用更好的表达式。

**编辑：**我编辑了答案，因为我没有意识到 JS 没有后向语法。相反，您可以看到表达式匹配任何空格*或*行首以匹配普通`http`链接。必须放回捕获的空间（因此是`$1`）。最后进行前瞻以确保捕获到下一个空格（或表达式末尾）的所有内容。如果空间对你来说不是一个好的边界，你将不得不想出一个更好的边界。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T12:28:32.110

您似乎正在尝试将 Markdown 语法转换为 HTML。Markdown 语法还没有一个规范（我指的是语法，而不是行为规范），所以你要蒙着眼睛四处走动，并尝试为你不想要的行为合并错误修复，所有的在重新发明轮子的同时。我建议您使用现有的实现而不是自己编写代码。例如，[**Pagedown**](https://code.google.com/p/pagedown/)是目前在 StackOverflow 中使用的 Markdown 的 JS 实现。

如果您仍然想要正则表达式解决方案，以下是我的尝试。请注意，我不知道随着您的进步（如果您这样做的话），它是否会与 Markdown 的其他功能很好地配合使用。

```
/\[((?:[^\[\]\\]|\\.)+)\]\((https?:\/\/(?:[-A-Z0-9+&@#\/%=~_|\[\]](?= *\))|[-A-Z0-9+&@#\/%?=~_|\[\]!:,.;](?! *\))|\([-A-Z0-9+&@#\/%?=~_|\[\]!:,.;(]*\))+) *\)/i 
```

The regex above should capture some part (I'm not confident it captures everything, the source code of Pagedown is too complex to read in one go) of the behavior of Pagedown for `[description](url)` style of linking (title is not supported). The regex above is mixed from 2 different regex used in the Pagedown source code.

Some features:

*   Capturing group 1 contains text inside `[]` and capturing group 2 contains the URL.
*   Allow escaping of `[` and `]` inside the text part `[]`, by using `\` e.g. `[a\[1\]](http://link.com)`. You need to do a bit of extra processing, though.
*   Allow 1 level of `()` inside link, very useful in cases like this: `[String.valueOf](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#valueOf(double))`
*   Allow space after the link and before the `)`.

I don't take into account the bare link in this regex.

Reference:

*   [Coding Horror: The Future of Markdown](http://www.codinghorror.com/blog/2012/10/the-future-of-markdown.html)

# ruby-on-rails - ActionView::Helpers::AssetTagHelper:Module 的未定义方法“javascript_expansions”

> ID：14599072
> 
> 赞同：2
> 
> 时间：2013-01-30T07:56:08.780
> 
> 标签：ruby-on-rails, tinymce, activescaffold

> **可能重复：**
> [升级到 Rails 3.1.1 后：“未定义的方法 `javascript_expansions'”错误](https://stackoverflow.com/questions/8138368/after-upgrading-to-rails-3-1-1-undefined-method-javascript-expansions-error)

我正在使用`tinymce`with `activescaffold`in`rails 3.2`并收到此错误：

```
undefined method `javascript_expansions' for ActionView::Helpers::AssetTagHelper:Module 
```

# java - Struts2 如何返回 JSON 响应

> ID：14599073
> 
> 赞同：14
> 
> 时间：2013-01-30T07:56:12.337
> 
> 标签：java, json, struts2, action, gson

我目前正在创建一个 Web 应用程序，用户可以在其中从数据库中获取 JSON 格式的标签，

这是我的 struts 动作

```
public String execute(){

    Gson gson = new Gson();
    String tagsAsJson = gson.toJson(audioTaggingService.findTagsByName(q));
    System.out.println(tagsAsJson);

    return "success";
} 
```

更新：

已经是 JSON 格式了，`tagsAsJson`我只想返回它，而不是整个类操作本身。

它返回这样的东西

这是我要返回给用户的数据

```
[{"id":2,"name":"Dubstep","description":"Dub wob wob"},{"id":3,"name":"BoysIIMen","description":"A 1990s Boy Band"},{"id":4,"name":"Sylenth1","description":"A VST Plugin for FLStudio "}] 
```

如何返回`tagsAsJson`as ar JSON 响应？因为客户端代码将使用该 JSON 响应。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-09-03T11:39:51.587

使用 Struts [“JSON 插件”](http://struts.apache.org/release/2.3.x/docs/json-plugin.html)。

很简单，三个步骤：

只需像这样将它包含在您的 Maven 项目中

```
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-json-plugin</artifactId>
    <version>${version.struts2}</version>
</dependency> 
```

将您想要返回的字段声明为 JSON 字符串，就像您的操作字段一样，提供 getter 和 setter。

```
public class Struts2Action extends ActionSupport {

    private String jsonString;

    public String execute() {
        Gson gson = new Gson();
        jsonString = gson.toJson(audioTaggingService.findTagsByName(q));

        return "success";
    }

    public String getJsonString() {
        return jsonString;
    }

    public void setJsonString(String jsonString) {
        this.jsonString = jsonString;
    }
} 
```

最后，将其放入您的 XML 中：

```
<action name="someJsonAction" class="com.something.Struts2Action">
    <result type="json">
        <param name="noCache">true</param>
        <param name="excludeNullProperties">true</param>
        <param name="root">jsonString</param>
    </result>
</action> 
```

注意`<param name="root">jsonString</param>`。这段 xml 告诉 Struts2 这个确切的属性应该被视为 JSON 序列化的根。因此，只有命名的属性（以及以下，如果它是地图或其他）将在 JSON 响应中返回。

感谢 JSON 插件，内容类型将是正确的。

“JSON 插件”文档在这里：[http ://struts.apache.org/release/2.3.x/docs/json-plugin.html](http://struts.apache.org/release/2.3.x/docs/json-plugin.html)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-09-03T12:18:33.477

尝试使用响应的 PrintWriter。

爪哇

```
 public String execute()
    {
      Gson gson                    = new Gson();
      String jsonString            = gson.toJson(audioTaggingService.findTagsByName(q));
      HttpServletResponse response = ServletActionContext.getResponse();

      response.setContentType("application/json");
      response.getWriter().write(jsonString );

      return null;
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T08:24:17.257

在 Action 类中放下面的代码。

```
 public class Struts2Action extends ActionSupport
  {     

    public String jsonString="";

    public String execute()
    {
      Gson gson = new Gson();
      jsonString  = gson.toJson(audioTaggingService.findTagsByName(q));
      System.out.println(jsonString);

      return "success";
   }
  } 
```

在 JSP 中放下面的代码

```
<%@ taglib prefix="s" uri="/struts-tags" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<title>Struts Rais</title>

<s:property value="jsonString"/><br /> 
```

如果您想操作 JSON 数据，这将打印 JSON 数据，您可以在 var`<s:set>`标记中查找数据并访问整个页面中的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-30T04:28:48.227

要返回 JSON 响应，您需要在项目构建路径中包含**struts2-json-plugin-2.xxjar**文件您需要将 package **extends="json-default"**结果类型设置为**json**。

*struts2-json-plugin-2.xxjar 文件允许您将具有 setter 的 Action 类属性序列化为 JSON 对象。*

从maven获取jar依赖

```
 <dependencies>
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-core</artifactId>
    <version>2.1.8</version>
</dependency>
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-json-plugin</artifactId>
    <version>2.1.8</version>
</dependency> 
```

您可以从此链接获得完整的帮助...

[Struts 2 和 JSON 响应](http://www.websparrow.org/struts/struts2-and-json-integration-example)

# php - php 在程序文件目录中使用 shell_cmd

> ID：14599074
> 
> 赞同：0
> 
> 时间：2013-01-30T07:56:13.770
> 
> 标签：php, imagemagick, wkhtmltopdf

我已经为这个问题苦苦挣扎了几个小时，并且完全不知道如何正确地转义我的语法以便在我的 Program Files 目录中的文件上运行 PHP 的 shell_cmd() 函数。

这是我当前的代码：

```
$send_cmd="\C:\imagemagick\convert\" \"c:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\webapps\\med_forms\\pdf\\tmppdf\\f-$time\\mf_pdf-$time-$file_num.html c:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\webapps\\med_forms\\pdf\\tmppdf\\f-$time\\mf_pdf-$time-$file_num.pdf\"";

echo shell_exec($send_cmd); 
```

我正在尝试执行类似于以下的命令：

```
 shell_cmd("C:\imagemagick\convert C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\med_forms\test.html C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\med_forms\test.pdf"); 
```

PHP 具有所有适当的文件夹权限，并且在处理没有空格的文件夹结构时，此命令可以正常工作。如何正确转义“程序文件”文件夹结构中的空格以执行命令？

我尝试使用 %20 表示空格、双反斜杠 (\) 和现在的“\”。我哪里错了？非常感谢任何输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:10:55.190

根据您的代码，我发现要实施以下建议或更改

1.  将 Imagemagick 放入环境路径变量并检查它是否也可以通过命令提示符执行

2.  只写“转换”而不是在脚本中给出 imagemagick 的路径

3.  尝试为 Windows 执行命令“exec”而不是“shell_cmd”[很多时候 shell_cmd 不在 Windows 服务器上执行]

还要根据 WAMP 服务器或项目文件夹更改 html 和 pdf 的路径。

愿这对你有帮助.... :)

# java - 在片段中集成自定义 imageView 类

> ID：14599075
> 
> 赞同：1
> 
> 时间：2013-01-30T07:56:17.047
> 
> 标签：java, android, eclipse

我有一个扩展 ImageView 的自定义类

```
 public class MyCompass extends ImageView 
    {
         private float direction;
// Rest Code

    }
      <ImageView class="myPakagename.MyCompass"
                android:layout_centerInParent="true"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/immg"
                android:src="@drawable/hub"/> 
```

我试图在我的片段中将其称为

```
 myCompass = (MyCompass) view.findViewById(R.id.immg); 
```

然而，这给了我classCastException。如何让我的类扩展 ImageView？

```
@SuppressLint("DrawAllocation")
public class MyCompass extends ImageView 
{
     private float direction;

     public MyCompass(Context context) 
     {
      super(context);
      setImageResource(R.drawable.qibla_compass_hub);
     }

     public MyCompass(Context context, AttributeSet attrs) {
      super(context, attrs);
      this.setImageResource(R.drawable.qibla_compass_hub);        
      }

     public MyCompass(Context context, AttributeSet attrs, int defStyle) {
      super(context, attrs, defStyle);
      this.setImageResource(R.drawable.qibla_compass_hub);                                
      }

     @Override
     protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
      setMeasuredDimension(
        MeasureSpec.getSize(widthMeasureSpec),
        MeasureSpec.getSize(heightMeasureSpec));
     }

     @Override
     protected void onDraw(Canvas canvas) {
      int w = getMeasuredWidth();
      int h = getMeasuredHeight();
      canvas.rotate(direction, w / 2, h / 2);

     }

     public void update(float dir){
      direction = dir;
      invalidate();
     } 
```

我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/qiblaBg"
    android:background="@drawable/qibla_bg">    

    <RelativeLayout 
        android:layout_centerInParent="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/qibla_compass_outer">

          <mypakage.MyCompass
              android:contentDescription="@string/qibla"
                    android:layout_centerInParent="true"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/qiblaImg" 
```

// android:src=@"img" 不起作用，但 android:background 起作用，但它再次拉伸到全屏。/>

```
 <RelativeLayout 
                                android:id="@+id/qiblaArrow"
                                android:layout_centerInParent="true"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:orientation="vertical" 
                                android:background="@drawable/qibla_compass_arrow" />      
    </RelativeLayout>

</RelativeLayout> 
```

使用这个，我的 MyCompass ImageView 在布局中延伸到全屏并且不显示任何图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:58:17.277

您可以直接使用以下方法在 xml 中引用您的自定义图像视图：

```
<myPakagename.MyCompass
            android:layout_centerInParent="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/immg"
            android:src="@drawable/hub"/> 
```

并确保您的自定义视图覆盖：

```
public MyCompass(Context context) {} 
```

和

```
public MyCompass(Context context, AttributeSet attrs) {} 
```

和

```
public MyCompass(Context context, AttributeSet attrs, int defStyle) { } 
```

# android - 覆盖设备管理应用程序中的 Android 主页按钮

> ID：14599081
> 
> 赞同：2
> 
> 时间：2013-01-30T07:56:32.780
> 
> 标签：android

> **可能重复：**
> [我可以覆盖我的应用程序中的“主页”按钮吗？](https://stackoverflow.com/questions/5547818/can-i-override-the-home-button-in-my-application)

我正在创建一个设备管理应用程序，我需要在其中禁用主页按钮。我成功地创建了一个设备管理应用程序，但我无法禁用主页按钮。我在 Android 市场上看到了许多应用程序，即使在 Android ICS 上也能做到这一点。任何帮助，将不胜感激。

谢谢

# ruby - File::rename() 删除目标文件而不是改变它

> ID：14599091
> 
> 赞同：0
> 
> 时间：2013-01-30T07:57:19.040
> 
> 标签：ruby

从当前工作目录中，我试图重命名另一个目录中的文件。我的测试`IRB`代码如下：

```
C:\Documents and Settings\peter>irb
irb(main):001:0> Dir.pwd
=> "C:/Documents and Settings/peter"
irb(main):002:0> File.rename('C:\Documents and Settings\peter\My Documents\userdata\test.txt','a.txt')
=> 0
irb(main):003:0>File.exist?('C:\Documents and Settings\peter\My Documents\userdata\test.txt')
=> false
irb(main):004:0>File.exist?('C:\Documents and Settings\peter\My Documents\userdata\a.txt')
=> false
irb(main):005:0> 
```

不是重命名目标文件而是从文件系统中删除 - 为什么会这样？如果重命名文件不是正确的方法，请告诉我一个安全的方法。但是我无法更改当前工作目录进行重命名，如果需要更改当前目录，则重命名，重命名后我想取回之前的当前工作目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:00:44.027

首先，你不应该在这里使用反斜杠。这样做的原因是反斜杠是一个转义序列发起者，所以下次你可能会得到非常意想不到的结果（例如，如果你不小心在双引号字符串中使用了反斜杠）。在这种情况下没有问题，但这是一个愚蠢的运气。始终在文件路径中使用正斜杠。[Windows](/questions/tagged/windows "显示标记为“windows”的问题")上的[ruby](/questions/tagged/ruby "显示标记为“红宝石”的问题")​​ 应该可以很好地处理它们。

其次，你找错地方了。重命名的文件应该出现在

```
C:/Documents and Settings/peter/a.txt 
```

因为这是您当前的工作目录。如果您希望它出现在“C:/Documents and Settings/peter/My Documents/userdata”中，请在重命名之前更改工作目录，或指定完整的目标文件路径。

```
File.rename('C:/Documents and Settings/peter/My Documents/userdata/test.txt',
            'C:/Documents and Settings/peter/My Documents/userdata/a.txt') 
```

您还可以使用带有[Dir::chdir](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-chdir)的块。

```
Dir.chdir('C:/Documents and Settings/peter/My Documents/userdata') do
  File.rename('test.txt', 'a.txt')
end 
```

块返回后，工作目录恢复到`chdir`调用前的状态。

# php - 有条件的 URL 重定向

> ID：14599098
> 
> 赞同：0
> 
> 时间：2013-01-30T07:58:04.963
> 
> 标签：php, apache, url-rewriting

> **可能重复：**
> [.htacces 创建友好的 URL。需要帮助](https://stackoverflow.com/questions/3033407/htacces-to-create-friendly-urls-help-needed)

我是 url 重写的新手，所以这是我的查询

`http://www.mysite.com/ichat`如果请求像“ [http://www.mysite.com/ichat/a2b35](http://www.mysite.com/ichat/a2b35) ”这样的请求，我现在有一个站点

我想将它重定向到 ichat 目录中我的服务器中的一个 php 文件，如下所示

`http://www.mysite.com/ichat/chat.php?chatid=a2b35`

但如果网址是这样的

` [http://www.mysite.com/ichat/special/a2b35](http://www.mysite.com/ichat/special/a2b35) '

我想将它重定向到

`http://www.mysite.com/ichat/chat.php?special=yes&chatid=a2b35`

chatid 将是没有特殊字符的字母数字。这种重定向是否可行，或者我需要一个物理`special`文件夹才能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:03:53.510

当然，只需利用在评估中排序重写的事实：

```
RewriteRule ^/ichat/special/(.+) /chat.php?special=yes&chatid=$1 [L]
RewriteRule ^/ichat/(.+) /chat.php?chatid=$1 [L] 
```

这`[L]`意味着如果规则匹配，规则评估将在规则处停止，因此任何`/ichat/special/`url 都会被第一个规则捕获，而其他`/ichat/`url 将被第二个规则捕获。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T08:04:47.357

基于上面的代码，下面是可以在 url 中的 ichat 上重定向页面时的示例代码

```
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/~ichat/ [OR]
RewriteRule ^(.*)$ http://www.mysite.com/ichat/chat.php?chatid=$1 [R,L] 
```

将上面的代码放在 .htaccess 文件中。

愿这会对你有所帮助。

# c# - 移动/调整另一个窗口的大小并重新绘制它？

> ID：14599099
> 
> 赞同：2
> 
> 时间：2013-01-30T07:58:08.287
> 
> 标签：c#, resize, window, move

我正在尝试使用以下方法调整窗口大小：

```
[DllImport("user32.dll", SetLastError = true)]
internal static extern bool MoveWindow(IntPtr hWnd, int X, int Y, int nWidth, int nHeight, bool rePaint); 
```

这可以根据需要调整窗口大小。不幸的是，窗口内的元素并没有像我使用鼠标那样缩放。我想使用鼠标会触发重新绘制事件，`MoveWindow()`但不会。

那么有没有办法可以调整另一个窗口的大小并重新绘制，或者有什么替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:18:44.057

您可以尝试使用[SetWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)函数，该函数允许您将窗口指定为标志是否应重绘，是否应调整大小等。

# database - Symfony2，Doctrine，在没有 queryBuilder 的情况下更新数据库条目

> ID：14599100
> 
> 赞同：12
> 
> 时间：2013-01-30T07:58:11.177
> 
> 标签：database, symfony, doctrine

要将条目保存到数据库，我们可以使用：

```
$em->persist($entity);
$em->flush(); 
```

但是我们如何在不使用的情况下更新现有条目`$this->getEntityManager()->createQuery()`？

我们可以吗？

我正在寻找某种`$em->update()`数据库中的现有条目。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-18T06:10:01.340

简单的做法，**Fusselchen**说的对，举个例子

```
// get entity manager
$em = $this->getDoctrine()->getEntityManager();

// get from this entity manager our "entity" \ object in $item
// also we can get arrayCollection and then do all in foreach loop
$item = $em->getRepository('repoName')->findOneBy($filter);

// change "entity" / object values we want to edit
$item->setSome('someText')
//...

// call to flush that entity manager from which we create $item
$em->flush();
// after that in db column 'some' will have value 'someText'

// btw after call flush we can still use $item as 'selected object' in
// another $em calls and it will have actual (some = 'someText') values 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T08:01:31.263

不，它不存在像`$em->update()`.
您必须从数据库中获取对象并更新它，或者简单地编写一个自定义查询（使用 DQL）来更新您需要的内容

正如你[在这里看到的](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/dql-doctrine-query-language.html#update-queries)

```
UPDATE MyProject\Model\User u SET u.password = 'new' WHERE u.id IN (1, 2, 3) 
```

这是用于更新名为 User 的实体的 DQL 查询示例

最后但并非最不重要的一点是，这个查询必须放在一个特殊的“类”中，称为存储库，其中包含所有自定义 sql (dql)。这是一个很好的做法。

[在此处](http://symfony.com/doc/2.0/book/doctrine.html#custom-repository-classes)了解有关存储库的更多信息

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T08:13:13.097

1.  从数据库中获取实体
2.  更改要修改的值
3.  刷新实体管理器

无需额外调用更新数据库。EntityManager 使您的模型在 flush() 上保持同步

```
public function updateAction($id)
    {
    $em = $this->getDoctrine()->getManager();
    $product = $em->getRepository('AppBundle:Product')->find($id);

    if (!$product) {
        throw $this->createNotFoundException(
            'No product found for id '.$id
        );
    }

    $product->setName('New product name!');
    $em->flush();

    return $this->redirectToRoute('homepage');
} 
```

见[http://symfony.com/doc/current/book/doctrine.html#updating-an-object](http://symfony.com/doc/current/book/doctrine.html#updating-an-object)

# apache - 502 网关和 codeigniter/nginx/apache 错误。代码或服务器问题？

> ID：14599104
> 
> 赞同：2
> 
> 时间：2013-01-30T07:58:21.180
> 
> 标签：apache, codeigniter, nginx, plesk

我的 codeigniter 应用程序正在针对 502 bad gateway 错误运行。我知道这个主题还有其他线程，但我不是服务器向导，症状不同，我的服务器配置也略有不同，或者我认为。

这是我的情况。

*   该应用程序运行良好，直到我第 n 次发布表单（n 介于 2 到 n 次之间）。这第n次与之前的帖子完全相同。我只是更改一个字段，然后按提交按钮。
*   表单使用验证类，我自定义了错误消息设置器，使这些消息在会话中也设置为 flashdata（我希望消息在重定向后可用）。
*   我的服务器使用 Nginx 和 apache（Plesk，apache 服务守护进程称为 httpd）。如果我执行“service httpd stop”或“service nginx stop”，我所有的网站都会立即停止工作。
*   错误日志中没有错误。

我的问题是：这可能是一个编码问题，还是最肯定（或最有可能）服务器配置错误？如果是后者，当然欢迎所有建议，但请记住这是一个 plesk/apache/nginx 环境。

希望大家能帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T21:44:50.963

我发现出了什么问题。首先，有更多服务器知识的同事向我解释说，我的设置可能是 nginx 接收所有请求，然后直接提供静态文件。对于非静态请求，它将工作传递给 apache，并充当中介。因此，当 apache 尝试向 nginx 发送数据时（或者当 nginx 尝试向 apache 发送信息时），可能出现了问题。

由于我以前从未使用过 nginx，因此我也没有想到检查 nginx 日志文件。我可以使用一个错误：

[错误] 27453#0: *9223 上游从上游读取响应标头时发送的标头太大，客户端：

我最终应用了另一个[堆栈溢出解决方案](https://stackoverflow.com/questions/13894386/upstream-too-big-nginx-codeigniter)的第一位：

```
Add this to your nginx.conf file normally located at
/etc/nginx/nginx.conf:

proxy_buffer_size   128k; 
proxy_buffers   4 256k;
proxy_busy_buffers_size   256k; 
```

顺便说一句，它应该被添加到文件的 http 部分。这是解决方案中缺少的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:26:57.207

我建议在失败后立即检查 Apache 服务器状态 ( `service httpd status`)。没有太多细节可以更好地判断，但可能的情况之一是 Apache 在第 N 个请求上失败，因此 Nginx 无法将请求转发给 Apache 并向您返回“502 Bad Gateway”。

Apache 故障可能既是编程问题，也可能是错误配置问题。即第 N 个请求需要太多 RAM（我的理解是您在请求之间保留了一些日期），然后被虚拟化引擎杀死（如果您有 VPS 而不是专用硬件服务器）。到目前为止只是一个假设，但我以前经历过这样的案例。

# batch-file - 批量删除文本文件中的条目

> ID：14599107
> 
> 赞同：0
> 
> 时间：2013-01-30T07:58:35.463
> 
> 标签：batch-file

如果我例如使用`findstr /g:Filters/test.ini < "ServerLogs/users.log" > "Logs/filtered_users.txt`

我想先搜索并写下该行，然后删除/覆盖例如“ServerLogs/users.log”中的一行

我必须设置什么？

例如：“ServerLogs/users.log”

```
JacktheRiver IP:18.184.284.91 - SETPATHDOWN 394858913857869284 #10 39485918238584378
Laste3r IP:72.125.68.141 - SETPATHDOWN 346343253563467578 #22 35354634679795373
Rus48rr IP:63.215.154.23 - SETPATHDOWN 543534694689128453 #12 49348376384678221
TOkiN1 IP:54.132.146.41 - SETPATHDOWN 343543346363643644 #41 42395833891883585 
```

然后举个例子。`Rus48rr IP:63.215.154.23 - SETPATHDOWN 543534694689128453 #12 49348376384678221`并将其保存到“filtered_users.txt”中。从“ServerLogs/users.log”中删除这一行后，它会像这样结束：

```
JacktheRiver IP:18.184.284.91 - SETPATHDOWN 394858913857869284 #10 39485918238584378
Laste3r IP:72.125.68.141 - SETPATHDOWN 346343253563467578 #22 35354634679795373
TOkiN1 IP:54.132.146.41 - SETPATHDOWN 343543346363643644 #41 42395833891883585 
```

这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:48:39.787

您可以找到匹配的行：

```
findstr /g:Filters/test.ini < "ServerLogs/users.log" > "Logs/filtered_users.txt" 
```

`/v`您可以找到与参数不匹配的行：

```
findstr /g:Filters/test.ini /v < "ServerLogs/users.log" > "ServerLogs/users.tmp" 
```

`users.log`然后您可以用新`users.tmp`文件覆盖。

# groovy - 在 mule 中使用 groovy 表达式来限制 IP

> ID：14599111
> 
> 赞同：1
> 
> 时间：2013-01-30T07:58:57.890
> 
> 标签：groovy, filter, mule

我在 mule 中使用 cxf 创建了一个代理服务。我的 mule 版本是 3.3.0 CE。现在，我想对使用代理服务创建的 wsdl 进行限制。我的限制不应该允许他们看到我的 wsdl 的每个 IP。为此，我找到了 Groovy 表达式和下面的代码：

```
<expression-filter
        expression="#[groovy:'${allowed}'.contains(message.getInboundProperty('MULE_REMOTE_CLIENT_ADDRESS').substring(message.getInboundProperty('MULE_REMOTE_CLIENT_ADDRESS').indexOf('/')+1, message.getInboundProperty('MULE_REMOTE_CLIENT_ADDRESS').indexOf(':')))]"
        doc:name="Expression" /> 
```

我不知道是好代码还是没有？而且我不知道应该在哪里定义我的有效IP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:28:12.650

这种方法是有效的。唯一建议我要做的是将 IP 解析提取到全局函数中，以实现可重用性和更好的可读性：

```
<configuration>
    <expression-language>
        <global-functions>
            def parseIp(fullIp) {
                return fullIp.substring(fullIp.indexOf('/') + 1, fullIp.indexOf(':'))
            }
        </global-functions>
    </expression-language>
</configuration> 
```

然后你可以按如下方式使用它：

```
<expression-filter expression="#['${allowed}'.contains(parseIp(message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']))]"
        doc:name="Expression" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:18:47.807

基于 IP 地址限制服务看起来不是一种可扩展的方法。

如果您有更多客户进入，甚至可能有 1 个客户，请求可以从不同的环境（产品、测试、开发）发送，那么您将拥有不同的 IP。

客户也可以改变他们的机器，IP 不会保持不变。您不想设计一个系统，其中客户端的更改会影响您，并且您的解决方案应该具有足够的可扩展性以适应更多客户端。

一种解决方案是寻找`Securing your web service`. 这篇博客文章谈到了它。[http://blogs.mulesoft.org/securing-soap-web-services-using-ws-security/](http://blogs.mulesoft.org/securing-soap-web-services-using-ws-security/)

使用 Mule 搜索 Web 服务安全性将为您提供更多结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:25:08.873

对于 Mule EE 用户，MuleSoft 现在提供了一个包含[IP 过滤器](http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Filter+Processor)的企业安全模块。

# ruby-on-rails-3 - ActiveRecord：如果存在则更新记录，否则创建？

> ID：14599113
> 
> 赞同：41
> 
> 时间：2013-01-30T07:59:02.530
> 
> 标签：ruby-on-rails-3, activerecord

尝试在 Active Record 中实现创建，如果不存在则更新记录。

**目前使用：**

```
@student = Student.where(:user_id => current_user.id).first

if @student
    Student.destroy_all(:user_id => current_user.id)
end

Student = Student.new(:user_id => current_user.id, :department => 1
)
Student.save! 
```

如果记录存在或创建记录，那么更新记录的正确方法是什么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2014-04-19T01:09:02.460

在 Rails 4 中

```
Student.
  find_or_initialize_by(:user_id => current_user.id).
  update_attributes!(:department => 1) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-30T08:03:42.340

您可能正在寻找`first_or_create`或类似的东西：

[http://guides.rubyonrails.org/v3.2.17/active_record_querying.html#first_or_create](http://guides.rubyonrails.org/v3.2.17/active_record_querying.html#first_or_create)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-08-26T03:18:24.997

`::first_or_create`（自 v3.2.1 起可用）按照包装盒上的说明进行操作。

```
Model.where(find: 'find_value').
  first_or_create(create: 'create_value')

# If a record with {find: 'find_value'} already exists:
before #=> #<Model id: 1, find: "find_value", create: nil>
after  #=> #<Model id: 1, find: "find_value", create: nil>

# Otherwise:
before #=> nil
after  #=> #<Model id: 2, find: "find_value", create: "create_value"> 
```

如果您*还希望它更新*已经存在的记录，请尝试：

```
Model.where(find: 'find_value').
  first_or_create(create: 'create_value').
  update(update: 'update_value')

# If one already exists:
before #=> #<Model id: 1, find: "find_value", create: nil, update: nil>
after  #=> #<Model id: 1, find: "find_value", create: nil, update: "update_value">

# If it already matches, no UPDATE statement will be run:
before #=> #<Model id: 1, find: "find_value", create: nil, update: "update_value">
after  #=> #<Model id: 1, find: "find_value", create: nil, update: "update_value">

# Otherwise:
before #=> nil
after  #=> #<Model id: 2, find: "find_value", create: 'create_value', update: "update_value"> 
```

编辑 2016-03-08：根据[Doug](https://stackoverflow.com/users/142098/doug)的[评论](https://stackoverflow.com/questions/14599113/activerecord-update-a-record-if-exists-else-create/25497490#comment56227983_14599178)，如果您的验证在`#create`and`#update`调用之间失败，或者您想最小化数据库调用，您可以`::first_or_initialize`改用，以避免在第一次调用时保留记录。但是，您**必须**确保您致电`#save`或`#update`之后才能保留记录（我不确定是否`#update`适用于尚未保留的记录）：

```
Model.validates :update, presence: true # The create call would fail this

Model.where(find: 'find_value').
  first_or_initialize(create: 'create_value'). # doesn't call validations
  update(update: 'update_value') 
```

（注意。有*一种*方法称为`#create_or_update`，但不要被您在 Google 上找到的任何[文档](http://apidock.com/rails/ActiveRecord/Persistence/create_or_update)所迷惑；这只是`#save`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-30T08:07:17.330

```
@student = Student.where(user_id: current_user.id).first
@student ||= Student.new(user_id: current_user.id)
@student.department_id = 1
@student.save 
```

如果您在用户和学生之间有关联，这会更漂亮。类似的东西

```
@student = current_user.student || current_user.build_student
@student.department_id = 1
@student.save 
```

编辑：

您也可以使用[http://guides.rubyonrails.org/active_record_querying.html#first_or_create](http://guides.rubyonrails.org/active_record_querying.html#first_or_create)由 Sevenseacat 回答，但您仍然需要处理不同的情况，例如更新学生的部门 ID。

更新：

您可以使用[`find_or_create_by`](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-find_or_create_by)

```
@student = Student.find_or_create_by(user_id: current_user.id) do |student|
  student.department_id = 1
end 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-11T17:25:41.697

在 Rails 5 中

```
Student.
  find_or_initialize_by(:user_id => current_user.id).
  update(:department => 1) 
```

（所有功劳取自@Zorayr 的回答）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-17T02:45:58.027

不幸的是，我认为最干净的方法是：

```
Student.where(user_id: id).first_or_create(age: 16).update_attribute(:age, 16) 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2014-01-31T10:43:52.183

它是**find_or_create_by**不是**first_or_create**。
例如：Client.find_or_create_by(first_name: 'Andy')

# ios - Facebook iOS 应用 Newsfeed UITableViewCell，他们是如何实现的？

> ID：14599119
> 
> 赞同：0
> 
> 时间：2013-01-30T07:59:28.740
> 
> 标签：ios, objective-c, facebook, feed

我需要实现新闻源`UITableView`列表（如在 facebook 应用程序中），我想知道`UIKit`我应该使用哪些组件。

您知道（简短概述）**facebook iOS 应用程序**是如何实现它的吗？
我应该使用`UIWebView`吗？或者
我应该使用支持 HTML 标签的**第三方库吗？** 有任何想法吗？ 谢谢！`UILabel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:28:56.593

Facebook iOS 应用负责人撰写的这篇文章说他们使用 CoreText 框架来设置文本样式。

[http://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920](http://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920)

去年 8 月，他们停止在原生 iOS 应用程序中使用 HTML5，所以我怀疑 UITableViewCells 使用的是相当慢的 UIWebViews。

# php - 无法正确使用 Zend Frameworkd 2 映射路线

> ID：14599123
> 
> 赞同：0
> 
> 时间：2013-01-30T07:59:57.457
> 
> 标签：php, zend-framework2

这是我要路由我的应用程序的路由转储。

```
[album] => Array([route] => Zend\Mvc\Router\Http\Segment Object
                            (
                                [parts:protected] => Array
                                    (
                                        [0] => Array
                                            (
                                                [0] => literal
                                                [1] => /album
                                            )
                                        [1] => Array
                                            (
                                                [0] => optional
                                                [1] => Array
                                                    (
                                                        [0] => Array
                                                            (
                                                                [0] => literal
                                                                [1] => /
                                                            )
                                                        [1] => Array
                                                            (
                                                                [0] => parameter
                                                                [1] => action
                                                                [2] => 
                                                            )
                                                    )
                                            )
                                        [2] => Array
                                            (
                                                [0] => optional
                                                [1] => Array
                                                    (
                                                        [0] => Array
                                                            (
                                                                [0] => literal
                                                                [1] => /
                                                            )
                                                        [1] => Array
                                                            (
                                                                [0] => parameter
                                                                [1] => id
                                                                [2] => 
                                                            )
                                                    )
                                            )
                                    )
                                [regex:protected] => /album(?:/(?P[a-zA-Z][a-zA-Z0-9_-]*))?(?:/(?P[0-9]+))?
                                [paramMap:protected] => Array
                                    (
                                        [param1] => action
                                        [param2] => id
                                    )
                                [defaults:protected] => Array
                                    (
                                        [controller] => Album\Controller\Album
                                        [action] => index
                                    )
                                [assembledParams:protected] => Array
                                    (
                                    )
                            )
                        [priority] => 0
                        [serial] => 3
                    ) 
```

但是当我尝试这个时

```
 $router = $e->getRouter();
  $url = $router->assemble(array(), array('name' => 'Album\index')); 
```

我收到以下错误。

> 找不到名称为“专辑\索引”的路线

```
 Edit: here is route settings from module.config

   'router' => array(
    'routes' => array(
        'album' => array(
            'type' => 'segment',
            'options' => array(
                'route' => '/album[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id' => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action' => 'index',
                ),
            ),
        ),
    ),
), 
```

编辑：据建议，我做了以下更改

```
 'router' => array(
    'routes' => array(
        'album' => array(
            'type' => 'segment',
            'options' => array(
                'route' => '/album',
                'constraints' => array(
                    'action' => 'index',
//                        'id' => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action' => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'process' => array(
                    'type' => 'Segment',
                    'options' => array(
                        'route' => '/[:action]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ),
    ),
), 
```

但现在我似乎无法通过索引操作。我的意思是对我可见的专辑模块的唯一操作是索引，没有其他人可以纠正/建议必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:30:34.180

正如我猜测的那样，路线`Album\index`不存在。这是您的配置：

```
'router' => array(
    'routes' => array(
        'album' => array(  //<-- THIS is the ROUTE_NAME 
```

你要找的是这个：

```
// AlbumController::indexAction()
$this->url('album');
$this->url('album', array('action' => 'index');

// AlbumController::listAction()
$this->url('album', array('action' => 'list');

// AlbumController::editAction() with param ID = 3
$this->url('album', array('action' => 'edit', 'id' => 3); 
```

您使用的语法是 for `child_routes`。看这个例子

```
'router'       => array(
    'routes' => array(
        'album'     => array(
            'type'          => 'literal',
            'options'       => array(
                'route'    => '/album',
                'defaults' => array(
                    'controller' => 'album-controller-album',
                    'action'     => 'index'
                )
            ),
            'may_terminate' => true,
            'child_routes'  => array(
                'list'   => array(
                    'type'    => 'literal',
                    'options' => array(
                        'route'    => '/list',
                        'defaults' => array(
                            'action' => 'list'
                        )
                    )
                )
            )
        )
    )
) 
```

以及相关的路由：

```
//AlbumController::indexAction()
$this->url('album');

//AlbumController::listAction()
$this->url('album/list'); 
```

# c# - C# 中 Windows 窗体应用程序的会话

> ID：14599127
> 
> 赞同：14
> 
> 时间：2013-01-30T08:00:05.507
> 
> 标签：c#, winforms, session

是否有针对 C# 的基于 Windows 的应用程序的会话，以便记录多个用户的登录和注销详细信息？

我尝试使用声明静态变量，但它与会话不同。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-30T08:21:48.163

Windows 窗体中没有会话变量的概念。你可以做：

创建一个包含用户名和密码以及应用程序所需的任何其他变量的静态类。

在您的情况下，它将类似于：

```
public static class LoginInfo
{
    public static string UserID;
} 
```

现在，您可以从代码中的任何位置轻松访问 UserID：

```
MessageBox.Show(LogInfo.UserID); 
```

或在登录后设置值，如：

```
LogInfo.UserID = TextBox1.Text; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:23:55.000

不，普通的 Windows 应用程序中没有会话变量（Web 应用程序中的方式）。如果您需要为 Windows 应用程序记录日志，我同意之前写的评论，以使用一些日志框架，如 log4net、NLog 或类似的东西。即使使用事件日志也是一种选择，但我不推荐它。

# oracle - oracle DB的并发用户依赖的会话参数数

> ID：14599139
> 
> 赞同：0
> 
> 时间：2013-01-30T08:00:54.747
> 
> 标签：oracle, session, concurrency

ORACLE DB 的会话参数是否与并发用户数直接相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:31:35.857

不，例如，您可能有一个具有 100 个会话的单个用户。该参数仅与会话数有关。哪个用户创建了会话没有任何重要性。

但是，答案取决于您所说的“并发用户”是什么意思...

# r - 哪个库可用于在 R 中制作和弦图？

> ID：14599150
> 
> 赞同：36
> 
> 时间：2013-01-30T08:01:44.353
> 
> 标签：r, visualization, chord-diagram

cran 中是否有任何包可以绘制这样的和弦布局：（这种可视化也称为***和弦图***）

![弦图](../Images/a8b291c2cd65f44df9d5cba17de13e47.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-30T20:41:04.193

几年前我写了以下内容，但从未真正使用过它：随意调整它以满足您的需求，甚至将其变成一个成熟的包。

```
# Return a line in the Poincare disk, i.e.,
# a circle arc, perpendicular to the unit circle, through two given points.
poincare_segment <- function(u1, u2, v1, v2) {
    # Check that the points are sufficiently different
    if( abs(u1-v1) < 1e-6 && abs(u2-v2) < 1e-6 )
        return( list(x=c(u1,v1), y=c(u2,v2)) )
    # Check that we are in the circle
    stopifnot( u1^2 + u2^2 - 1 <= 1e-6 )
    stopifnot( v1^2 + v2^2 - 1 <= 1e-6 )
    # Check it is not a diameter
    if( abs( u1*v2 - u2*v1 ) < 1e-6 )
        return( list(x=c(u1,v1), y=c(u2,v2)) )
    # Equation of the line: x^2 + y^2 + ax + by + 1 = 0 (circles orthogonal to the unit circle)
    a <- ( u2 * (v1^2+v2^2) - v2 * (u1^2+u2^2) + u2 - v2 ) / ( u1*v2 - u2*v1 )
    b <- ( u1 * (v1^2+v2^2) - v1 * (u1^2+u2^2) + u1 - v1 ) / ( u2*v1 - u1*v2 ) # Swap 1's and 2's
    # Center and radius of the circle
    cx <- -a/2
    cy <- -b/2
    radius <- sqrt( (a^2+b^2)/4 - 1 )
    # Which portion of the circle should we draw?
    theta1 <- atan2( u2-cy, u1-cx )
    theta2 <- atan2( v2-cy, v1-cx )
    if( theta2 - theta1 > pi )
        theta2 <- theta2 - 2 * pi
    else if( theta2 - theta1 < - pi )
        theta2 <- theta2 + 2 * pi
    theta <- seq( theta1, theta2, length=100 )
    x <- cx + radius * cos( theta )
    y <- cy + radius * sin( theta )
    list( x=x, y=y )
}

# Sample data
n <- 10
m <- 7
segment_weight <- abs(rnorm(n))
segment_weight <- segment_weight / sum(segment_weight)
d <- matrix(abs(rnorm(n*n)),nr=n, nc=n)
diag(d) <- 0 # No loops allowed
# The weighted graph comes from two quantitative variables
d[1:m,1:m] <- 0
d[(m+1):n,(m+1):n] <- 0
ribbon_weight <- t(d) / apply(d,2,sum) # The sum of each row is 1; use as ribbon_weight[from,to]
ribbon_order <- t(apply(d,2,function(...)sample(1:n))) # Each row contains sample(1:n); use as ribbon_order[from,i]
segment_colour <- rainbow(n)
segment_colour <- brewer.pal(n,"Set3")
transparent_segment_colour <- rgb(t(col2rgb(segment_colour)/255),alpha=.5)
ribbon_colour <- matrix(rainbow(n*n), nr=n, nc=n) # Not used, actually...
ribbon_colour[1:m,(m+1):n] <- transparent_segment_colour[1:m]
ribbon_colour[(m+1):n,1:m] <- t(ribbon_colour[1:m,(m+1):n])

# Plot
gap <- .01
x <- c( segment_weight[1:m], gap, segment_weight[(m+1):n], gap )
x <- x / sum(x)
x <- cumsum(x)
segment_start <- c(0,x[1:m-1],x[(m+1):n])
segment_end   <- c(x[1:m],x[(m+2):(n+1)])
start1 <- start2 <- end1 <- end2 <- ifelse(is.na(ribbon_weight),NA,NA)
x <- 0
for (from in 1:n) {
  x <- segment_start[from]
  for (i in 1:n) {
    to <- ribbon_order[from,i]
    y <- x + ribbon_weight[from,to] * ( segment_end[from] - segment_start[from] )
    if( from < to ) {
      start1[from,to] <- x
      start2[from,to] <- y
    } else if( from > to ) {
      end1[to,from] <- x
      end2[to,from] <- y
    } else {
      # no loops allowed
    }
    x <- y
  }
}

par(mar=c(1,1,2,1))
plot(
  0,0, 
  xlim=c(-1,1),ylim=c(-1,1), type="n", axes=FALSE, 
  main="Two qualitative variables in polar coordinates", xlab="", ylab="")
for(from in 1:n) {
  for(to in 1:n) {
    if(from<to) {
      u <- start1[from,to]
      v <- start2[from,to]
      x <- end1  [from,to]
      y <- end2  [from,to]
      if(!is.na(u*v*x*y)) {
            r1 <- poincare_segment( cos(2*pi*v), sin(2*pi*v), cos(2*pi*x), sin(2*pi*x) )
            r2 <- poincare_segment( cos(2*pi*y), sin(2*pi*y), cos(2*pi*u), sin(2*pi*u) )
            th1 <- 2*pi*seq(u,v,length=20)
            th2 <- 2*pi*seq(x,y,length=20)
            polygon(
                c( cos(th1), r1$x, rev(cos(th2)), r2$x ),
                c( sin(th1), r1$y, rev(sin(th2)), r2$y ),
                col=transparent_segment_colour[from], border=NA
            )
      }
    }
  }
}
for(i in 1:n) {
  theta <- 2*pi*seq(segment_start[i], segment_end[i], length=100)
  r1 <- 1
  r2 <- 1.05
  polygon( 
    c( r1*cos(theta), rev(r2*cos(theta)) ),
    c( r1*sin(theta), rev(r2*sin(theta)) ),
    col=segment_colour[i], border="black"
  )
} 
```

![极坐标中的两个定量变量](../Images/8eaad9c43018276066eb21128725c554.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-05-21T01:58:51.493

chorddiag包（[仍在](https://github.com/mattflor/chorddiag)开发中）提供了一个交互式`D3`实现

> chorddiag 包允许使用 JavaScript 可视化库 D3（[http://d3js.org](http://d3js.org)）从 R 中使用 htmlwidgets 接口框架创建交互式和弦图。

**例子**

```
devtools::install_github("mattflor/chorddiag")
library(chorddiag)

## example taken from the github site
m <- matrix(c(11975,  5871, 8916, 2868,
              1951, 10048, 2060, 6171,
              8010, 16145, 8090, 8045,
              1013,   990,  940, 6907),
            byrow = TRUE,
            nrow = 4, ncol = 4)
haircolors <- c("black", "blonde", "brown", "red")
dimnames(m) <- list(have = haircolors,
                    prefer = haircolors)
m
#             prefer
#   have     black blonde brown  red
#     black  11975   5871  8916 2868
#     blonde  1951  10048  2060 6171
#     brown   8010  16145  8090 8045
#     red     1013    990   940 6907

groupColors <- c("#000000", "#FFDD89", "#957244", "#F26223")
chorddiag(m, groupColors = groupColors, groupnamePadding = 40) 
```

[![截屏](../Images/ccf2e435ac8603cda5cb3b4cac848927.png)](https://i.stack.imgur.com/kqDRu.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-11-02T17:31:53.820

如果您不是特别想绘制基因组数据，而是来自任何领域的数据，我认为最近发布的包[**circlize: Circular Visualization in R**](http://cran.r-project.org/web/packages/circlize/)提供了比[RCircos](http://cran.r-project.org/web/packages/RCircos/)更直接的方法。

![圈出例子](../Images/a13ff0af51e3c9ff0e863cc59857f6a3.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-30T08:06:35.757

这看起来很像[Circos](http://circos.ca/)的情节。Circos 是在 Perl 中实现的，但您可以使用 R 来塑造您的数据，以便将其输入 Circos。不过 BioStar 有一个相关问题：http: [//www.biostars.org/p/17728/](http://www.biostars.org/p/17728/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-17T09:36:02.233

如果您熟悉 ggplot，那么 ggbio 是您的最佳选择。

文档可在此处获得： [http ://www.tengfei.name/ggbio/](http://www.tengfei.name/ggbio/)

绘制圆形图的函数是 layout_circle()。绘制基因组数据的另一个非常有用的函数是 layout_karyogram()。

# sql - 递归 CTE 以获取组的成员

> ID：14599152
> 
> 赞同：0
> 
> 时间：2013-01-30T08:01:56.730
> 
> 标签：sql, sql-server, tsql, common-table-expression, recursive-query

我有以下数据：

![在此处输入图像描述](../Images/412dbf8e73a9f747fa3b9ad088eb0778.png)

我想用它的所有原语（即Corp1、Corp2、Corp3、Corp4）来表达FTSEAllShare。我编写了一个 WHILE 循环，该循环反复将 MemberName 加入到 GroupName 并 COALESCE 生成 MemberName，但我一直在阅读有关递归 CTE 的内容，并认为它们可能会提供一种更简单的方法。

我不擅长递归代码，每次尝试时我都会感到困惑。

有人可以帮我解决这个问题并建议我如何使用递归 CTE 来表达 FTSEAllShare 的 4 个原语吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:14:54.660

像这样：

```
WITH CTE
AS
(
  SELECT GroupName, MemberName, 0 AS Level
  FROM GroupsMembers 
  WHERE GroupName = 'FRSEAllShare'
  UNION ALL
  SELECT g.*, c.level + 1
  FROM CTE c
  INNER JOIN GroupsMembers g ON c.MemberName = g.GroupName
)
SELECT * 
FROM CTE; 
```

## [现场演示](https://data.stackexchange.com/stackoverflow/query/94066/recursive-cte-to-get-members-of-a-group)

这将为您提供属于该组的所有成员`FRSEAllShare`，或其任何孙子组，并提供一个新列`level`以按级别选择它们。

# c# - WPF 服务器应用程序

> ID：14599156
> 
> 赞同：1
> 
> 时间：2013-01-30T08:02:17.230
> 
> 标签：c#, wpf, sockets, client-server

我有一个 WPF 服务器和客户端应用程序。当我启动服务器时，它开始收听传入的消息。但是，应用程序不能被触摸或关闭，它在监听中“卡住”了。我必须补充一点，它在处理消息等方面做了它应该做的事情。但我就是无法与表单交互。它与异步服务器套接字有关吗？我不确定要寻找什么...

这是我的服务器代码：

```
 private void startServer()
    {
        sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        sck.Bind(new IPEndPoint(0, serverPort));
        sck.Listen(100);

        while (true)
        {
            Socket accepted = sck.Accept();

            Buffer = new byte[accepted.SendBufferSize];
            int bytesRead = accepted.Receive(Buffer);

            byte[] formatted = new byte[bytesRead];

            for (int i = 0; i < bytesRead; i++)
            {
                formatted[i] = Buffer[i];
            }
            string command = Encoding.ASCII.GetString(formatted);
            string[] splittedCommand = command.Split(' ');

            jobsHistory.Items.Add(Encoding.ASCII.GetString(formatted));
            jobsHistory.Refresh();

            Process processToRun = new Process();
            processToRun.StartInfo.FileName = splittedCommand[0];
            processToRun.StartInfo.WorkingDirectory = Path.GetDirectoryName(splittedCommand[0]);
            processToRun.StartInfo.Arguments = "";
            for (int i = 1; i < splittedCommand.Length; i++)
            {
                processToRun.StartInfo.Arguments += " " + splittedCommand[i];
            }

            processToRun.Start();
            accepted.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:09:25.317

如果这适用于 UI 线程，那么您将其捆绑在循环中。它没有机会处理任何 UI 事件。除此之外，`Socket.Receive`还有一个阻塞调用。

在本网站和 Google 上都有很多关于 BackgroundWorker` 类的文章。我建议你看看那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:09:51.987

只需在单独的线程中执行监听，就像这样 -

```
 private void startServer()
    {
        sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        sck.Bind(new IPEndPoint(0, 8080));

        new Thread(() => StartListening(sck)).Start();
    }

    void StartListening(Socket socket)
    {
        socket.Listen(100);

        Accept(socket);
    }

    void Accept(Socket socket)
    {
        while (true)
        {
            Socket accepted = socket.Accept();

            Buffer = new byte[accepted.SendBufferSize];
            int bytesRead = accepted.Receive(Buffer);

            byte[] formatted = new byte[bytesRead];

            for (int i = 0; i < bytesRead; i++)
            {
                formatted[i] = Buffer[i];
            }
            string command = Encoding.ASCII.GetString(formatted);
            string[] splittedCommand = command.Split(' ');

            jobsHistory.Items.Add(Encoding.ASCII.GetString(formatted));
            jobsHistory.Refresh();

            Process processToRun = new Process();
            processToRun.StartInfo.FileName = splittedCommand[0];
            processToRun.StartInfo.WorkingDirectory = Path.GetDirectoryName(splittedCommand[0]);
            processToRun.StartInfo.Arguments = "";
            for (int i = 1; i < splittedCommand.Length; i++)
            {
                processToRun.StartInfo.Arguments += " " + splittedCommand[i];
            }

            processToRun.Start();
            accepted.Close();
        }

        // If you want to start listening again
        socket.Close();
        startServer();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:20:43.490

您应该使用`BeginAccept`在后台接受连接而不阻塞 UI 线程。当客户被接受时，`BeginAccept`再次调用 - 这会创建一个“循环”。然后你可以删除你的`while`循环。

该`startServer`方法可能如下所示：

```
private void startServer()
{
    sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    sck.Bind(new IPEndPoint(0, serverPort));
    sck.Listen(100);

    sck.BeginAccept(Accepted, sck);
} 
```

然后，在`Accepted`方法中，执行以下操作：

```
private void Accepted(IAsyncResult result)
{
    Socket sck = result.AsyncState as Socket;
    Socket client = sck.EndAccept(result);

    sck.BeginAccept(Accepted, sck);
}

        Socket accepted = sck.Accept(); 
```

# nhibernate - Nhibernate 为一对一映射生成太多查询

> ID：14599158
> 
> 赞同：0
> 
> 时间：2013-01-30T08:02:24.307
> 
> 标签：nhibernate, one-to-one

当应用程序加载时，我将所有广告系列都加载到内存中：

```
var all = session.Query<Campaign>().ToList(); 
```

Campaign 有一项服务。

```
public CampaignMap()
{
  Table("`TR_Campaigns`");
  Schema("dbo");
  Not.LazyLoad();
  Id(x => .Id).GeneratedBy.Increment().Column("CampaignID");
  References(x => x.Service).Column("ServiceID").Not.LazyLoad();
  // I also tried hasone and it is bringing the same result
} 
```

这是服务地图：

```
public ServiceMap()
{
  Not.LazyLoad();
  Table("`TR_Services`");
  Id(x => x.Id, "ServiceID").GeneratedBy.Increment();
  Map(x => x.Name,"ServiceName");
} 
```

问题是，当我有 100 个活动，并且每个活动有不同的服务时，映射会生成 100 个查询来获取每个活动的服务。例如，如果 ServiceID 2 在多个活动中重复，则查询`… WHERE service0_.ServiceID = 2`将只运行一次（这很好）。

这是生成的查询：

```
SELECT service0_.ServiceID   as ServiceID4_0_,
       service0_.ServiceName as ServiceN2_4_0_
FROM   [TR_Services] service0_
WHERE  service0_.ServiceID = 8 
```

这正常吗？当我有 1000 个活动和 1000 项服务甚至更多时，我会怎么做……</p>

谢谢

**更新**：
我看到你的编辑，我认为它是有效的。
但是 CampaignMap 的关系比较多，例如：

```
 HasMany(x => x.LandingPageWeights).KeyColumn("CampaignID").Not.LazyLoad(); 
```

根据您的查询，我该如何处理？
做`LandingPageWeights = x.LandingPageWeights`失败....
你对此有何建议？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:09:54.143

您可以通过阅读本文来避免 n+1 问题

[http://ayende.com/blog/1328/combating-the-select-n-1-problem-in-nhibernate](http://ayende.com/blog/1328/combating-the-select-n-1-problem-in-nhibernate)

这就是答案

[防止 Fluent NHibernate 选择 n+1](https://stackoverflow.com/questions/581199/prevent-fluent-nhibernate-select-n1)

**编辑**

选择没有 n+1 问题的所有数据

```
var items = session.Query<Campaign>().Select(x=> new Campaign
{
  Id = x.Id,
  Service = new Service
  {
     Id = x.Service.Id,
     Name = x.Service.Name
  }
}).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:30:50.437

我想我找到了。我已减少到 2 个查询：

```
var all = session.Query<Campaign>()
                            .Fetch(x => x.Service)
                            .Fetch(x => x.Supplier)
                            .ToList(); 
```

这个在一个查询中为我带来了服务。

谢谢！！

# highcharts - HighCharts 的事件 - MouseOver/MouseOut

> ID：14599162
> 
> 赞同：1
> 
> 时间：2013-01-30T08:02:33.340
> 
> 标签：highcharts, mouseover, mouseleave

我正在使用 HighCharts-Stock，并且需要检测鼠标何时悬停在图表中的某个点上。这是我的代码：

```
 window.chart = new Highcharts.StockChart({
 plotOptions: {
            area: {
                point: {
                    events: {
                        mouseOver: function () {
                            alert('over');
                        },
                        mouseOut: function () {
                            alert('out');
                        },
                        select: function () {
                            alert('select');
                        },
                        unselect: function () {
                            alert('unselect');
                        }
                    }
                }
            }
        }, .....} 
```

但这些事件都不会触发！如何启用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:04:26.117

如果将“区域”替换为“线”，它将起作用！因为这表明我正在使用的图表类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:14:00.797

您还可以使用“较早”日期添加最小值，然后设置 tickInverval。

# wpf - Visual Studio 2010 加载项处理快捷方式而不是我的 WPF APP

> ID：14599163
> 
> 赞同：0
> 
> 时间：2013-01-30T08:02:35.517
> 
> 标签：wpf, visual-studio-2010, add-in, keyboard-events

我有一些用 WPF 编写的 VS2010 插件。我的 WPF 应用程序处理一些基本的快捷方式。以前，我的 WPF 是独立的应用程序，我使用快捷键（Ctr+c、Ctrl、v）处理了一些基本命令（复制、粘贴等）。

现在我的应用程序内置在 VS 中，我无法获取这些密钥，因为 VS 处理它们并阻止它们。我试图挂钩到键盘事件，但我看到了很多，这是一种肮脏的方式。

VS 有什么方法想要处理快捷方式，或者至少我的应用程序将有机会首先处理事件？

这样做的正确方法是什么？

谢谢，莱昂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:36:55.043

您应该使用 Visual Studio 命令。Visual Studio 有自己的键绑定，因此 Copy 可能不会映射到 Ctrl-C，具体取决于用户的设置。

看一下`IOleCommandTarget`and`VsStd2k`命令集。根据您添加外接程序的方式，在某些时候，您将收到对`IOleCommandTarget`包中实现的调用。为了接收对您的`Execute`方法的调用，您首先需要告诉 IDE 您确实处理了该命令（为此，您需要实现`QueryStatus`并通知 VS 该命令有效以进行处理）。复制命令在`GUID_VSStandardCommandSet97`命令组中。

# ruby-on-rails - Rails validates_uniqueness_of 错误消息不起作用

> ID：14599165
> 
> 赞同：0
> 
> 时间：2013-01-30T08:02:42.637
> 
> 标签：ruby-on-rails, validation, internationalization, overriding, rails-activerecord

尊敬的人...

我有很多型号，一个例子如下：

```
class State < ActiveRecord::Base
  attr_accessible :state_name
  belongs_to :location
  validates_uniqueness_of(:state_name)
  validates_presence_of(:state_name)
end 
```

我想为属性的唯一性全局添加错误消息...

```
en:
   hello: "Hello world"
   errors:
     messages:
          taken: "अद्वितीय होना चाहिए/Data Already Exists"  
          blank: "रिक्त नहीं किया जा सकता है/can't be blank" 
```

空白的那个工作得很好，但采取的仍然没有工作，我仍然得到默认的“已经被采取”错误消息......

请帮助...

真诚的问候-天空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:44:13.000

解决了...我用此处提供的文件替换了我的 en.yml 文件：raw.github.com/svenfuchs/rails-i18n/master/rails/locale/en.yml 并替换了“空白”和“已采取”从这个适合我的文件中...现在一切正常：D ....

问候-天空

# c# - 在我实现 Thread 之后，我的 Windows 服务无法停止

> ID：14599166
> 
> 赞同：0
> 
> 时间：2013-01-30T08:02:48.580
> 
> 标签：c#, multithreading, windows-services

我的服务是由 wix 安装的，并且可以正常启动，并且确实像我想要的那样工作，直到我在我的服务中添加了一个线程，所以我可能没有正确关闭线程

这里是服务

```
public class WCFWindowsService : ServiceBase
{
    public ServiceHost serviceHost = null;

    public WCFWindowsService()
    {
        // Name the Windows Service
        ServiceName = "ServiceName";
    }

    public static void Main()
    {
        ServiceBase.Run(new WCFWindowsService()); 
    }

    protected override void OnStart(string[] args)
    {
        ThreadTheClass T = new ThreadTheClass();

            if (serviceHost != null)
            {
                serviceHost.Close();
            }
            Thread _thread = new Thread(T.ThreadMain);
            _thread = new Thread(T.ThreadMain);
            _thread.Start();

            serviceHost = new ServiceHost(typeof(ProjectWCF.WCFService));
            serviceHost.Open(); 
    }

    protected override void OnStop()
    {
        ThreadTheClass T = new ThreadTheClass();

            if (serviceHost != null)
            {
                WCFWindowsService ThreadPost = new WCFWindowsService();

                T.ThreadStop();

                serviceHost.Close();
                serviceHost = null;
            }
    }
} 
```

和线程类

```
class ThreadTheClass
{
    System.Threading.Timer MyTimer;
    public void ThreadMain()
    {
        int Minutes = 2;
        MyTimer = new System.Threading.Timer((s) =>
        {
            Logic();
        }
        , null, 5000, Minutes * 100 * 60);

    }

    public void ThreadStop()
    {
        MyTimer.Dispose();
    }

    void Logic()
    {
        //do things every two minutes 
    } 
```

当我在控制台程序中尝试这个时，我不知道什么是错误的原因，`ThreadStop()`工作正常并关闭了线程，为什么它不能在 Windows 服务中关闭？

当我尝试停止已安装的服务时出现此错误 ![在此处输入图像描述](../Images/1644df94313b2095e6c885d135763a1d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:08:53.353

最明显的错误在这里，在`OnStop`：

```
ThreadTheClass T = new ThreadTheClass(); 
```

那是创建一个*新*的实例`ThreadTheClass`。其中之一`MyTimer`将是`null`.

相反，在您的`OnStart`方法中，您需要将正在创建的实例存储在那里，以便`OnStop`可以访问同一个实例。

```
ThreadTheClass T;

 protected override void OnStart(string[] args)
    {
        T = new ThreadTheClass();

            if (serviceHost != null)
            {
                serviceHost.Close();
            }
            T.ThreadMain();

            serviceHost = new ServiceHost(typeof(ProjectWCF.WCFService));
            serviceHost.Open(); 
    }

    protected override void OnStop()
    {
            if (serviceHost != null)
            {
                WCFWindowsService ThreadPost = new WCFWindowsService();

                T.ThreadStop();

                serviceHost.Close();
                serviceHost = null;
            }
    } 
```

我还删除了创建 (2!) new `Thread`s 的代码 - 因为`ThreadMain`只是建立一个计时器然后退出，所以没有理由将它放在它自己的线程上。

# java - 在选择树的复选框时显示/隐藏组件

> ID：14599169
> 
> 赞同：0
> 
> 时间：2013-01-30T08:03:05.967
> 
> 标签：java, tree, zk

onSelect 事件仅适用于组件，我只想为选定的复选框显示/隐藏我的组合框。

这是我的 zul 文件供参考

```
![<?page title="MVVM Tree POC"?>
<zk>
    <borderlayout height="800px">
        <west size="25%"></west>
        <center>
            <window apply="org.zkoss.bind.BindComposer"
                viewModel="@id('vm') @init('com.nagarro.viewmodel.TreeViewModel')"
                title="Dynamic Tree" border="normal">
                <tree checkmark="true" model="@bind(vm.treeModel)"
                    onSelect="@command('select')">
                    <treecols>
                        <treecol label="Name" align="center" />
                        <treecol label="Value" align="center" />
                        <treecol label="IP" align="center" />
                    </treecols>
                    <template name="model" var="node" status="s">
                        <treeitem checkable="@load(node.checkable)">
                            <treerow style="text-align:center;">
                                <treecell
                                    label="@bind(node.data.firstName)" style="text-align:left;">

                                </treecell>
                                <treecell style="text-align:center;">
                                    <combobox>
                                        <comboitem label="Fixed" />
                                        <comboitem label="System" />
                                        <comboitem label="Parameter" />
                                    </combobox>
                                </treecell>
                                <treecell style="text-align:center;">
                                    <combobox>
                                        <comboitem label="IP" />
                                    </combobox>
                                </treecell>
                            </treerow>

                        </treeitem>
                    </template>
                </tree>

            </window>
        </center>
    </borderlayout>
</zk>] 
```

[问题快照](http://i.stack.imgur.com/8E7n1.png) 在图像中，我只想为已选中复选框的组件显示组合框。对于没有复选框或未选中复选框的组件，不应显示任何组合框。谢谢

这是 mvvm 文件

```
public class TreeViewModel {

    private Request request;
    private AdvancedTreeModel treeModel;

    /**
     * @return the treeModel
     */
    public AdvancedTreeModel getTreeModel() {
        if(treeModel == null){
            TreeNode<Tree> treeNode = new TreeList(request).getRoot();
            treeModel = new AdvancedTreeModel(treeNode);
            treeModel.setMultiple(true);
        }
        return treeModel;
    }

    /**
     * @param treeModel the TreeModel to set
     */
    public void setTreeModel(AdvancedTreeModel treeModel) {
        this.treeModel = treeModel;
    }
    @Init
    public void init(){
        try {
            File file = new File("C:\\Users\\jatin1937\\Desktop\\XML files\\Request.xml");
            JAXBContext jaxbContext = JAXBContext.newInstance(Request.class);
            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
            request = (Request) jaxbUnmarshaller.unmarshal(file);
        }catch (JAXBException e) {
            e.printStackTrace();
        }
    }

    /**
     * @return the request
     */
    public Request getRequest() {
        return request;
    }

    /**
     * @param request the request to set
     */
    public void setRequest(Request request) {
        this.request = request;
    }
    @Command
    public void select(){
        System.out.println("onSelect method entered");
    }
} 
```

树数据是通过一些辅助类准备的，但在这里描述并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:04:19.007

我也试过了，找到了出路。现在，我不是`onSelect`在组件上使用事件，而是在组件上使用事件。我在我的班级中保留了一个字段，该字段在 zul 文件中引用。根据该布尔值的值，我显示/隐藏组合框。`tree``onClick``treeRow``isChecked``node.data``isChecked`

下面是zul文件供参考

```
<?page title="MVVM Tree POC"?>
<zk>
    <borderlayout height="800px">
        <west size="25%"></west>
        <center>
            <window apply="org.zkoss.bind.BindComposer"
                viewModel="@id('vm') @init('com.nagarro.viewmodel.TreeViewModel')"
                title="Dynamic Tree" border="normal">
                <tree checkmark="true" model="@bind(vm.treeModel)">
                    <template name="model" var="node" status="s">
                        <treeitem
                            checkable="@load(node.data.isCheckable)" open="true">
                            <treerow style="text-align:center;"
                                onClick="@command('select', treeNode = node.data)">
                                <treecell
                                    label="@bind(node.data.firstName)" style="text-align:left;">
                                </treecell>
                                <treecell style="text-align:center;"
                                    if="${node.data.isChecked == true}">
                                    <combobox>
                                        <comboitem label="Fixed" />
                                        <comboitem label="System" />
                                        <comboitem label="Parameter" />
                                    </combobox>
                                </treecell>
                                <treecell style="text-align:center;"
                                    if="${node.data.isChecked == true}">
                                    <combobox>
                                        <comboitem label="Fixed" />
                                        <comboitem label="System" />
                                        <comboitem label="Parameter" />
                                    </combobox>
                                </treecell>
                            </treerow>
                        </treeitem>
                    </template>
                </tree>

            </window>
        </center>
    </borderlayout>
</zk> 
```

这是`select`ViewModel中的方法供参考

```
@NotifyChange("treeModel")
@Command
public void select(@BindingParam("treeNode") final Tree tree){
    if(tree.getIsCheckable()){
        if(tree.getIsChecked() == true){
            tree.setIsChecked(false);
        }else{
            tree.setIsChecked(true);
        }
    }

} 
```

> 请注意，*Tree*是一个自定义类，我通过它准备树数据。 *isCheckable*也是*Tree*类中的*布尔*字段。如果 为*true*，则*复选框*将出现在*treeRow*中，否则不会出现。 *isChecked是**Tree*类中的另一个*布尔*字段。如果为*真*，则选中相应的*复选框*，否则不选中

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:44:32.993

就这样做

```
<tree onSelect="@command('select', tree=self)" > 
```

在你的虚拟机中

```
Set<Treeitem> oldSelection;
...

@Command
public void select(@BindingParam("tree")Tree tree){
   // delete
   Set<Treeitem> unselected = oldSelected.removeAll(tree.getSelectedItems());
   for(Treeitem x : unselected){
       x.getTreerow().getLastChild().setParent(null);
   }
   // add
   tree.getSelectedItem().getTreerow().appendChild(getCombobox());
   oldSelection = tree.getSelectedItems()
} 
```***

# android - 无法递归下载图像

> ID：14599171
> 
> 赞同：0
> 
> 时间：2013-01-30T08:03:14.367
> 
> 标签：android, download

嗨，我正在尝试递归下载图像，但我无法。它只下载第一张图片！有人知道为什么吗？

这是我要下载的代码，我做了一个日志来检查我的列表中是否有项目，是的，有 20 个：

```
Log.d("imageList.size",String.valueOf(imageList.size()));
try
        {
            for (int i=0; i<=imageList.size(); i++)
            {
            String image= imageList.get(i);
            Log.d("imageList.get(0)",image);
            String filename = String.valueOf(image.hashCode());
            Log.v("TAG FILE :", filename);

            File f = new File(cacheDir, filename);

        // Is the bitmap in our cache?
        Bitmap bitmap = BitmapFactory.decodeFile(f.getPath());
        if (bitmap != null)
            return bitmap;

        else {
            // Nope, have to download it
            try {
                bitmap = BitmapFactory.decodeStream(new URL(image)
                        .openConnection().getInputStream());
                // save bitmap to cache for later
                writeFile(bitmap, f);
                return bitmap;
            } catch (FileNotFoundException ex) {
                ex.printStackTrace();
                Log.v("FILE NOT FOUND", "FILE NOT FOUND");
                return null;
            }
            catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }
        }
        }

        }
        catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }

            return null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:28:13.797

Line: 25 在您的代码中，在循环结束之前不要返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:23:24.043

**你的for**循环似乎有问题，它在循环的第一次迭代时退出，检查你的大括号并确保你按照你想要的方式设置了大括号并且逻辑**是有意义**的。在你的 for 循环完成之前，你**不**应该返回。

# objective-c - 如何在运行时获取精灵的Tag值

> ID：14599183
> 
> 赞同：-1
> 
> 时间：2013-01-30T08:03:53.963
> 
> 标签：objective-c, xcode, cocoa-touch, cocos2d-iphone, sprite

我有 20 个精灵。所有 20 个精灵都添加到 MutableArray 中。当我触摸 20 个精灵中的任何一个时。我想要触摸精灵的标记值。

帮我写代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:26:06.627

那应该相当简单。由于您没有提供任何代码，我会假装它看起来像这样。

```
for (CCSprite *aSprite in arrayOfSprites){
    if ([self screenPosition:touchPosition intersectedWithSprite: aSprite]){
        NSInteger tagForSprite = aSprite.tag; // do what you want with this value
    }
} 
```

touchPositionIntersectedWithSprite 是一种检查实际碰撞并返回 BOOL 的方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:03:08.047

1.  注册触摸。使用功能：

    ```
    -(id) init{
    if( (self=[super init])){
        self.isTouchEnabled = YES;
        /* to do */
    }}

    - (void) registerWithTouchDispatcher{
    /* to do */}

    - (BOOL) containsTouchLocation:(UITouch *)touch
    {
        return YES;
    } 
    ```

2.  在函数中捕捉和分析精灵的触摸

    ```
    - (BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
    {

    //e.g. mArrSprites - your NSMutableArray with 20 sprites

        for(CCSprite * sprite in mArrSprites){
            if (CGRectContainsPoint(sprite.boundingBox, location)){ //check contains sprite rect your touch
                int tag = sprite.tag;     //GET tag of sprite
            }
        }
    } 
    ```

# javascript - 从 PARENT 调用 Javascript 函数

> ID：14599187
> 
> 赞同：0
> 
> 时间：2013-01-30T08:04:08.467
> 
> 标签：javascript, function, frame

有大量关于如何反其道而行之的信息，但我试图从父级调用位于子框架中的 aa 函数。

我试过了 ..

```
window.document.leftFrame.contentWindow.myfunct();

document.leftFrame.contentWindow.myfunct();

<frame ... onload="this.contentWindow.myfunct();"> 
```

没运气 ：/

从父级引用子页面/框架的正确方法是什么？我是否需要使用 onload 来确保框架中的 js 已首先加载？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:27:36.537

> `window.frames['frameName'].myfunct();`

请注意，这通常仅在 iframe 引用同一域上的页面时才有效。出于安全原因，浏览器限制对属于不同域的框架内的页面的访问。

# php - 匹配两个数组并获得具有正确键值匹配的公共值

> ID：14599189
> 
> 赞同：1
> 
> 时间：2013-01-30T08:04:15.210
> 
> 标签：php

我正在使用 php，我有两个数组，我想要两个数组中共有的值，具有相同的索引

> 数组 1([0] = [目的地] [1] = [价格] [2] = [测试])
> 
> 数组 2([1] = [目的地] [0] = [价格] [2] = [测试])

所以在上面的数组中我希望输出为

> 数组 3([2] = [测试])

因为其他两个值已经改变了索引

我使用了array_intersect()，但它给出了所有的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:10:24.320

试试看[`array_intersect_assoc`](http://php.net/array_intersect_assoc)

它将比较键和值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:10:32.897

```
$result = array();
for($i=0;$i<count($array1);$i++)
{
    if($array1[$i]==$array2[$i])
    {
        $result[] = $array1[$i];
    }
} 
```

# java - 检票口顺序下拉

> ID：14599191
> 
> 赞同：0
> 
> 时间：2013-01-30T08:04:28.233
> 
> 标签：java, drop-down-menu, wicket

在我的页面顶部，我想要一个下拉菜单来更改首选语言。如果它改变了页面，则将重新加载并使用所选语言呈现。在我的解决方案中，语言不会立即加载。

```
@SuppressWarnings("serial")
public class CurrentLanguageDropdown extends LanguageDropDown {

private String sessionlanguage;
private IModel<String> model;

public CurrentLanguageDropdown(String id, Locale locale) {
    super(id, locale);
    this.sessionlanguage = locale.getCountry();
    GlobalAccountSession session = GlobalAccountSession.get();
    model = new SelectedLocaleModel("sessionlanguage", this, new     Model<Serializable>(session.getLocale()),
            locale.getCountry());
    setModel(model);
}

@Override
public void onSelectionChanged(String newSelection) {
    GlobalAccountSession session = GlobalAccountSession.get();
    model = new SelectedLocaleModel("sessionlanguage", this, new Model<Serializable>(session.getLocale()),
            newSelection);
}

@Override
protected boolean wantOnSelectionChangedNotifications() {
    return true;
}

String getSessionlanguage() {
    return sessionlanguage;
}

private class SelectedLocaleModel extends StringResourceModel {

    private String selectedValue = "";
    private Component parent;

    public SelectedLocaleModel(String resourceKey, Component parent, IModel<?> model, String selectedValue) {
        super(resourceKey, parent, model);
        this.selectedValue = selectedValue;
        this.parent = parent;
    }

    @Override
    public void setObject(java.lang.String object) {
        GlobalAccountSession session = GlobalAccountSession.get();
        Locale locale = new Locale(object.toString());
        session.setLocale(locale);
        selectedValue = locale.getLanguage();
    }

    @Override
    public String getObject() {
        GlobalAccountSession session = GlobalAccountSession.get();
        selectedValue = session.getLocale().getLanguage();
        return selectedValue;
    }
}
} 
```

查看我的代码，我看到首先调用 getObject，然后调用 setObject。所以渲染似乎是在处理用户所做的更改之前完成的。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:05:09.610

您正在 onSelectionChanged 中创建一个新模型对象。这违背了应该修改但不替换模型的目的。如果您需要创建一个新的模型对象，您也必须替换组件使用的模型（再次调用 setModel(model)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:54:03.940

我知道这不是一个组件，而是一个组件的实现，但显示了总体思路

```
public class LocaleDropDownPanel extends Panel
{
private Locale sessionLocale;

public LocaleDropDownPanel(String id, Locale locale) 
{
    super(id);

    ArrayList<Locale> choices = Lists.newArrayList(Locale.getAvailableLocales());

    //didnt know if you need country or language 
    IChoiceRenderer<Locale> choiceRenderer = new ChoiceRenderer<Locale>("language");

    DropDownChoice<Locale> ddc = new DropDownChoice<Locale>("ddc", new PropertyModel<Locale>(this, "sessionLocale"), 
            new Model<ArrayList<Locale>>(choices), choiceRenderer)
    {
        @Override
        protected void onSelectionChanged(Locale newSelection) 
        {
             //if you want to save the selected locale in your session.
             GlobalAccountSession session = GlobalAccountSession.get();
             session.setLocale(newSelection);
        }
    };

    //This Language selected to begin with
    ddc.setDefaultModelObject(locale);

}

public Locale getSessionLocale() {
    return sessionLocale;
}

public void setSessionLocale(Locale sessionLocale) {
    this.sessionLocale = sessionLocale;
}
} 
```

# php - sql查询不工作

> ID：14599192
> 
> 赞同：-1
> 
> 时间：2013-01-30T08:04:34.853
> 
> 标签：php, sql

我的代码：

```
$stmt = $this->pdo->prepare("SELECT value1 FROM My table au1 WHERE au1.value2 IN (SELECT au2.value3 FROM My table au2)"); 
```

我的桌子：

Id --- value1 --- value2 ---- value3

1 --- 测试 --- 6786 ---- 5678

2 --- 测试2 --- 5678 ---- 6786

使用我的代码，结果是：Test 和 Test2

我想选择值 1，其中值 3 等于值 2。而不是以其他方式。

所以对于这个例子，我只需要 Test2 而不是 Test。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:07:46.613

```
i would like to select value 1 where value 3 Is equal to value 2 
```

您可以为此使用以下查询。您不必使用`au`. 只是不要为了使用它而使用别名。必须使用时使用。

首选查询

```
SELECT value1 FROM `My table` WHERE value2 = value3; 
```

根据您的查询

```
SELECT au1.value1 FROM `My table` au1 WHERE au1.value2 = au1.value3; 
```

# 供您参考

`My table`不是一种可接受的表格命名方式。它应该是`my_table`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:07:47.010

如果要选择 value1 其中 value2 等于 value3，请使用以下查询：

```
SELECT value1 FROM My table au1 WHERE au1.value2 = au1.value3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:08:26.770

`My table`不是有效的表名，将其转义为：

```
SELECT value1 FROM `My table` au1 
WHERE au1.value2 IN (SELECT au2.value3 FROM `My table` au2); 
```

或者，您可以`JOIN`改为使用表格：

```
SELECT value1 
FROM `My table` au1 
INNER JOIN `My table` au2 ON au1.value2 = au2.value3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T08:25:26.900

在您的示例中，您想要，`test2`因为它有一个 value3，它作为 value2 在表中的某处存在。目前你得到`test`是因为它有一个 value2，它作为 value3 在表中的某处存在。只需在示例查询中交换 value2 和 value3 ：

```
SELECT value1 FROM My table au1 WHERE au1.value3 IN (SELECT au2.value2 FROM My table au2) 
```

# ruby-on-rails-3 - 使用 ActiveRecord 存储多个表单值

> ID：14599193
> 
> 赞同：0
> 
> 时间：2013-01-30T08:04:41.857
> 
> 标签：ruby-on-rails-3, forms, activerecord, store

我的搜索表单提交了具有多个值的多个参数，如下例所示。

我可以为这些值中的每一个创建 1 个单一属性，例如ethnicity_african、ethnicity_mixed，但这感觉很愚蠢。等等

*但是有没有更简单的方法将这些 0 或 1 值（已选择或未选择）存储到活动记录模型中？*我正在使用 MySQL

```
{"european"=>"0", "african"=>"0", "middleeastern"=>"0", "indian"=>"0", "latinamerica"=>"0", "mixed"=>"0", "Asian"=>"0", "Caucasian"=>"0", "Pacific Islander"=>"0"} 
```

更新：

所以序列化是要走的路。这似乎足以满足我的需要，因为我只存储 0 或 1 个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:11:09.373

如果您使用的是 Postgres，您可以考虑使用类似[hstore](http://www.postgresql.org/docs/9.1/static/hstore.html%20hstore)的东西来存储数据的哈希值。

关于使用 hstore 的教程可以在[Railscasts 上找到。](http://railscasts.com/episodes/345-hstore)

# delphi - 无法为 TObjectList 调用 Binarysearch 函数

> ID：14599194
> 
> 赞同：3
> 
> 时间：2013-01-30T08:04:44.807
> 
> 标签：delphi, tobjectlist

如果我们查看 XE2 或 XE3 的[TObjectList 方法](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Generics.Collections.TObjectList_Methods)的在线帮助 ，我们会看到二进制搜索功能可用于 TObjectList。但如果我们尝试使用 XE3，它甚至无法编译。

例如，排序功能也可用，但这是编译的。

欢迎任何想法。

**示例代码：**

```
unit FM_Main;

  interface

  uses
    Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
    Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, System.Contnrs, Vcl.CheckLst, System.Generics.Collections;

  type
     TTPRODData = class
     private
        FData1 : String;
        FData2 : String;

        FCount : Integer;
     public
        constructor Create; overload;
        destructor Destroy; override;
     end;

     TTPRODDataList = class(TObjectList)

        function GetItem(Index: Integer): TTPRODData;
        procedure SetItem(Index: Integer; const Value: TTPRODData);
     public
        constructor Create; overload;
        destructor  Destroy; override;

        property Items[Index: Integer]: TTPRODData read GetItem write SetItem; default;
        procedure SortOnProductCode;

     end;

    TForm1 = class(TForm)
      Button1: TButton;
      procedure Button1Click(Sender: TObject);
    private
      { Private declarations }
    public
      { Public declarations }
    end;

  var
    Form1: TForm1;

  implementation

  {$R *.dfm}

  //
  // Sort function.
  //
  function CompareProductCode(Item1, Item2: Pointer): Integer;
  begin
     Result := CompareStr(TTPRODData(Item1).FData1, TTPRODData(Item2).FData1);
  end;

  //
  //
  //

  procedure TForm1.Button1Click(Sender: TObject);
  var
     aProdList : TTPRODDataList;
     aDummy : TTPRODData;
     aNdx : Integer;

  begin
     aProdList := TTPRODDataList.Create;

     // This call works.
     aProdList.Sort(CompareProductCode);

     // This call doesn't even compile !
     aProdList.BinarySearch(aDummy, aNdx);
  end;

  { TTPRODData }

  constructor TTPRODData.Create;
  begin
     inherited Create;

     FData1 := '';
     FData2 := '';
     FCount := 0;
  end;

  destructor TTPRODData.Destroy;
  begin
    inherited;
  end;

  { TTPRODDataList }

  constructor TTPRODDataList.Create;
  begin
     inherited Create;
  end;

  destructor TTPRODDataList.Destroy;
  begin
     Clear;

     inherited;
  end;

  function TTPRODDataList.GetItem(Index: Integer): TTPRODData;
  begin
     result := TTPRODData(inherited GetItem(index));
  end;

  procedure TTPRODDataList.SetItem(Index: Integer; const Value: TTPRODData);
  begin
     inherited setItem(index, value);
  end;

  procedure TTPRODDataList.SortOnProductCode;
  begin
     Sort(CompareProductCode);
  end;

  end. 
```

* * *

正如 David Heffernan 所建议的，这里遵循排序函数的比较器代码。

对于那些感兴趣的人，这里遵循比较器方法的代码：

```
TTProdComparer = class(TComparer<TTPRODData>)
public
   function Compare(const Item1, Item2: TTPRODData): Integer; override;
end;

And the code :
{ TTProdComparer }
function TTProdComparer.Compare(const Item1, Item2: TTPRODData): Integer;
begin
   Result := CompareStr(Item1.FData1 , Item2.FData1 );
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:13:50.270

您链接到的文档适用`TObjectList<T>`于该`Generics.Collections`单元的通用容器。

`TObjectList`但是您在代码中使用的类是单元中遗留的非通用容器`Contnrs`。

您尝试使用的`BinarySearch`方法仅存在于泛型类上。

如果您切换到通用容器，那么您会发现您可以从您的课程中删除大部分样板代码。它成为了：

```
TTPRODDataList = class(TObjectList<TTPRODData>)
public
  procedure SortOnProductCode;
end; 
```

您不需要`GetItem`，`SetItem`并且`Items`因为类型安全的泛型类已经对该功能进行了排序。

您要做的唯一工作是调整您的排序代码以适应 Delphi 通用容器使用的稍微不同的接口。

# javascript - jquery模式/对话框

> ID：14599196
> 
> 赞同：0
> 
> 时间：2013-01-30T08:04:45.957
> 
> 标签：javascript, jquery

我想使用一些 jquery 插件来显示模态。我一直在使用fancybox，但问题是第二个fancybox 不能显示在一个上。我使用过 jquery UI，但它有图像，我想要一些不依赖图像的插件。以下是我的要求：

1.  在页面加载时显示
2.  显示 ajax 成功
3.  可使用自定义 CSS 自定义
4.  第二个模态/对话框可以显示在第一个上。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:14:21.830

看看这个，我过去用过它：http: [//www.paulund.co.uk/how-to-create-a-simple-modal-box-with-jquery](http://www.paulund.co.uk/how-to-create-a-simple-modal-box-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:07:57.340

我喜欢`http://jqueryui.com/dialog/` 我知道你说你使用它但不喜欢它，因为它有图像，但我会用自定义 css 覆盖你的图像——这并不难。简单的模型很好，但我发现 ui 更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:08:57.067

您的问题不是 Stackoverflow 的问答格式，因为您本质上是在征求意见（即没有明确的答案）。

不过，[SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)是一个出色的轻量级 jQuery 插件，我用于模态对话框。

# bmp - 试图了解如何绘制 1 位 BMP 图像

> ID：14599208
> 
> 赞同：4
> 
> 时间：2013-01-30T08:05:42.517
> 
> 标签：bmp

[从这个例子](http://en.wikipedia.org/wiki/BMP_file_format#Example_1)中可以看出，BMP 文件中的每个通道（R、G、B）都有一个输入。一个 24 位 BMP 图像有 8 位用于-R，8 位用于 G，8 位用于 B。我在 MS-paint 中将图像保存为单色（黑白）。它的属性表示图像的深度是 1 位。问题是谁得到了这 1 位：R、G 还是 B？这三个渠道都必须获得一定的价值不是强制性的吗？我无法理解 MS-Paint 如何使用 1 位绘制此 BMP 图像。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-13T13:18:55.517

有多种存储位图的方法。在这种情况下，重要的区别是 RGB 与索引。

在 RGB 位图中，每个像素都与三个单独的值相关联，一个代表红色，另一个代表绿色，另一个代表蓝色。根据“位数”（位深度）和特定的像素格式，不同的颜色通道可以为它们分配不同数量的位 - 最简单的情况是典型的真彩色，每个通道有 8 位，另一个8 位（可选）用于 Alpha 通道。但是，某些像素格式的分配方式略有不同 - 其想法是人眼对这些通道中的每一个具有不同的敏感度，您可以通过以更智能的方式分配位来节省空间并提高视觉质量。例如，较流行的像素格式之一是 BGR-565 - 即总共 16 位，蓝色 5 位，绿色 6 位和红色 5 位。

在索引位图中，与每个像素一起存储的值是调色板（颜色表）中的索引（因此称为“索引位图”）。调色板通常是一个简单的颜色表，使用 RGB“像素”格式为每个索引分配一些特定的颜色。例如，索引 0 可能表示黑色，1 可能表示绿松石等。

在这种情况下，位深度并不能准确地映射到颜色质量 - 您不是试图映射*整个*颜色空间，而是专注于可能颜色的某个子集。例如，如果您有 256 种灰度（例如，从黑色到白色），则真彩色位图每个像素至少需要三个字节（并且这三个字节中的每一个都将具有相同的值），而您可以使用一个带有所有灰色调色板的索引位图，每个像素只需要一个字节（加上调色板的成本 - 256 * 3 字节）。使用索引位图有很多好处，并且有很多技巧可以在不使用更多位/像素的情况下进一步提高视觉质量，但这超出了这个问题的范围。

这也意味着您只需要显示尽可能多的可能值。如果您只需要 16 种不同的颜色，则每个像素只需要 4 位。如果您只需要一个单色位图（即，一个像素“打开”或“关闭”），则每个像素只需要一个*位*- 这正是您的情况。如果您有所需的不同颜色数量，您可以通过取以 2 为底的对数（例如 log 256 = 8）轻松获得所需的位深度。

因此，假设您有一张只使用两种颜色的图像——黑色和白色。您将构建一个具有黑色和白色两种颜色的调色板。对于位图中的每个像素，如果是黑色，则保存 0，如果是白色，则保存 1。

现在，当您想绘制这样的位图时，您只需阅读调色板（在这种情况下为 0 -> RGB(0, 0, 0), 1 -> RGB(1, 1, 1)），然后阅读一个又一个像素。如果该位为零，则绘制黑色像素。如果是一个，画一个白色像素。完毕 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:31:33.630

不，这取决于您选择另存为的数据类型。因为您选择保存为单色，所以此处不使用 RGB 映射，使用的映射将作为每个像素一个字节，范围从白色到黑色。

每种类型都有自己的映射方式，保存为24位会给你RGB映射，保存为256会为每个像素映射一个字节，每个值代表一个颜色（你可以在网上找到表格），至于单色，您将拥有与 256 位图相同的位图，但颜色表将只有白色和黑色。

抱歉打错了，我解释单色的方式实际上是灰度使用的，单色用一个位来表示像素是黑色还是白色，取决于每个位的值，没有使用映射表。

# android - 移动调试连接USB时如何导入外部sqlite数据库编程？

> ID：14599209
> 
> 赞同：1
> 
> 时间：2013-01-30T08:05:43.297
> 
> 标签：android, sqlite, debugging

我可以`data/data/com..../ ...`直接在模拟器中拉目录中的数据库。但是当我连接手机时它不能。

我不想用文件IO来写这个目录。

有没有直接拉的方法？或者使用一些 cmd 命令。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:14:37.447

将你的 sqlite 数据库文件放入 assets 文件夹，并将该文件复制到本地内存中......

试试这个链接

[http://androidrocksonmobility.blogspot.in/2011/09/how-to-get-sqlite-path-in-asset-folder.html](http://androidrocksonmobility.blogspot.in/2011/09/how-to-get-sqlite-path-in-asset-folder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:14:57.937

如果您的设备已植根。您应该先将其复制到 SDCARD。使用：

1.  猫/数据/数据/com。*** /database/*.db > /sdcard/dest.db
2.  拉出来。

如果您的设备没有植根。如果你真的想复制它。将其复制到您的程序中。

# quartz-graphics - Quartz Display Services 替换已弃用的函数 CGWaitForScreenRefreshRects

> ID：14599210
> 
> 赞同：1
> 
> 时间：2013-01-30T08:05:48.470
> 
> 标签：quartz-graphics, screensharing

方法 CGWaitForScreenRefreshRects 在 Mac OS X v10.8 中已弃用。类参考（CGRegisterScreenRefreshCallback）中提到的替代方法也已弃用。

我应该使用什么来获取 10.8 中的屏幕更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:02:01.287

查看 CGDisplayStream.h。这是10.8 中添加的[一组新 API 。](https://developer.apple.com/librarY/mac/#releasenotes/General/APIDiffsMacOSX10_8/ApplicationServices.html)他们是关于它的罕见文档。

# java - 使用休眠 sessionFactory 或 JPA entityManager？

> ID：14599216
> 
> 赞同：13
> 
> 时间：2013-01-30T08:06:12.410
> 
> 标签：java, spring, hibernate, jpa

我正在开发一个使用 Hibernate 4.1、Spring 3.1 和 JPA 2.0 的项目，我想验证我从互联网上收集到的内容是否正确。

我正在尝试决定是使用 JPA entityManager 还是特定于休眠的 sessionFactory。

起初，我计划使用 entityManager 和完整的 JPA 规范，这样我的项目将与 Hibernate 分离，如果后来有什么想法让我信服，我可以把它换成其他东西，比如 EclipseLink。

但是，entityManager 似乎有一些非常重要的限制。

我的问题：

我想要使​​用完整的 JPA 规范和 entityManager 的唯一原因是能够相对轻松地为不同的 JPA 2.0 兼容 ORM 切换 Hibernate，对吗？使用 entityManager 真的没有性能/功能/易于编程的好处吗？

其次，似乎休眠 sessionFactory 比 entityManager 有很多好处。到目前为止，我遇到了 entityManager 无法执行实体列表的批量插入的问题，我读过 sessionFactory 可以。我还读到 sessionFactory 可以自动返回自动生成的实体 ID，而使用 entityManager 您需要结束事务/刷新持久性上下文以提取新生成的 ID。

我喜欢我的项目与 Hibernate 相对分离的想法，但我更希望能够从一开始就编写高效的数据库更新。所以我应该切换到为 hibernate 和 sessionFactory 配置的项目，对吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-09-13T00:45:35.407

我会坚持使用 JPA2，就像您使用的那样，`List`而不是`ArrayList`：您更喜欢接口（或抽象）而不是实现。除了 HQL 知道比 JPQL 或外来特性“更多”的东西之外，没有太大区别。还要记住 JPA 是在 Hibernate 之后制作的，而 Hibernate 是 JPA 背后的“灵感”。

对于奇异的特性：Hibernate Entity Manager 包装一个 Hibernate Session。如果您真的需要它们，您可以将`EntityManager`转换为 Hibernate 接口 ( `org.hibernate.jpa.HibernateEntityManager`)，并使用该会话。但如果我说我试过了，那我就是在骗你。

我还评论了您的部分问题：

> 我想要使​​用完整的 JPA 规范和 entityManager 的唯一原因是能够相对轻松地为不同的 JPA 2.0 兼容 ORM 切换 Hibernate，对吗？使用 entityManager 真的没有性能/功能/易于编程的好处吗？

从 Hibernate 切换到 EclipseLink 并不意味着您“只需要交换 jar”。映射和注释解析不一样，您会遇到可能会阻止您切换的问题。

您可以在此处阅读[我的问题，](https://stackoverflow.com/questions/21103795/schema-generation-with-eclipselink-and-hibernate-jpa2-1-foreignkey-ignored)了解我在使用两者时遇到的问题示例（这是一个 maven 项目，其配置文件可将 JPA2.1 impl 从 EclipseLink 切换到 Hibernate）。我放弃了 EclipseLink，因为我无法像我想要的那样命名数据库对象（或者更确切地说，指定数据库对象的名称）。

> 其次，似乎休眠 sessionFactory 比 entityManager 有很多好处。到目前为止，我遇到了 entityManager 无法执行实体列表的批量插入的问题，我读过 sessionFactory 可以。我还读到 sessionFactory 可以自动返回自动生成的实体 ID，而使用 entityManager 您需要结束事务/刷新持久性上下文以提取新生成的 ID。

这取决于您如何生成实体 ID。但是想一想：在持久化上下文需要持久化它之前，您的实体不会持久化。这就是你没有身份证的原因。刷新它，也就是发送带有生成 id 的插入查询，是唯一的方法。

这同样适用于会话工厂。

但是，您可能能够从 Hibernate 访问序列生成器，但您也可以在本机 SQL 中使用`EntityManager`.

> 我喜欢我的项目与 Hibernate 相对分离的想法，但我更希望能够从一开始就编写高效的数据库更新。所以我应该切换到为 hibernate 和 sessionFactory 配置的项目，对吗？

您可以将其视为针对 ORM 的巨魔，但为了高效的数据库更新，请使用普通 JDBC（或 Spring Jdbc 模板）。至少您会知道数据何时会更新，并且您将能够更好地优化（批量更新等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T11:07:21.753

JPA 是 Hibernate 上的一个接口，它是 jdbc 上的一个接口，因此您离 jdbc 越近，您对查询的控制就越多，但您离对象/关系持久性越远。是的，Hibernate 可能有一些 jpa 目前可能无法提供的工具（即 hibernate 空间） Hibernate 很有趣，并且可以使用 JPA 注释来映射域模型（如果您在 .hbm 文件上使用注释方式）。@Transactional 注释在 Spring 中的工作方式无论您使用 hibernate 还是 jpa 都无关紧要，因为您不需要 session.open() ... session.beginTranscation ...session.close ...etc ...所有这些冗长休眠代码不见了！有关于 Hibernate 的很棒的文档和很棒的书籍。至于 JPA，我不能说我找到了 umber 书……

# awk - awk 命令中的变量声明

> ID：14599217
> 
> 赞同：0
> 
> 时间：2013-01-30T08:06:16.947
> 
> 标签：awk

我正面临`awk`指挥问题。实际上我使用了一个变量`DELETION_COMMAND`，该变量的值是`rm -rf`. 之后我试图执行下面的行然后它给出了一个错误。而如果我将`rm`用作相同变量的值`DELETION_COMMAND`。然后它工作正常。

```
awk '{print "'${DELETION_COMMAND}'"" ""'${COMPLETE_PATH}'""/"$1"/*"}' ${DB_FEED_FILE} > ${TEMP_FEED_FILE} 
```

**错误 ：**

```
awk: {print "rm
awk:        ^ unterminated string 
```

请建议。
我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:12:43.780

突出显示已经表明您的错误。您将 awk 表达式放在单引号之间，然后在表达式中使用单引号。awk 认为你的表达是这样的：

```
awk '{print "' 
```

要解决此问题，请使用反斜杠转义单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:15:29.827

使用该`-v`标志将 shell vars 传递给`awk`，并且不要忘记引用：

```
awk -v com="${DELETION_COMMAND}" -v path="${COMPLETE_PATH}" '{ print com, path, "/", $1, "/" }' "${DB_FEED_FILE}" > "${TEMP_FEED_FILE}" 
```

# html - CSS“和”选择器 - 我可以选择具有多个类的元素吗？

> ID：14599218
> 
> 赞同：76
> 
> 时间：2013-01-30T08:06:20.983
> 
> 标签：html, css

我正在尝试选择同时具有`.checked`和`.featured`标签的所有元素。所以基本上，我正在寻找的是一个“和”选择器；我不知道有没有。

像这样的情况有什么解决方法吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-30T08:08:02.323

你同时使用（*它们之间没有空格*）

```
.checked.featured{
   // ...
} 
```

参考：[http ://www.w3.org/TR/selectors/#class-html](http://www.w3.org/TR/selectors/#class-html)

* * *

例子

```
div{margin:1em;padding:1em;}

.checked{color:green;}
.featured{border:1px solid #ddd;}

.checked.featured{
       font-weight:bold;
    }
```

```
<div class="checked">element with checked class</div>
<div class="featured">element with featured class</div>
<div class="featured checked">element with both checked and featured classes</div>
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-30T08:07:52.487

你可以像这样“加入”两个类：`.checked.featured`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-30T08:10:59.580

要表达 AND，您只需连接您的类，这些类可能不会与作为后代选择器`.checked.featured`的流行混淆。`.checked .featured`

看看官方[文档](http://www.w3.org/TR/CSS2/selector.html#class-html)

# mysql - 计算一列中具有相同 id 的重复项

> ID：14599220
> 
> 赞同：0
> 
> 时间：2013-01-30T08:06:31.797
> 
> 标签：mysql, sql, database, count

嗨，我试图计算相同值的行数，

```
id,value
1 | a
2 | b
3 | c
4 | d
5 | e 
```

我的查询是

```
select value, count(*) as Count from mytable  where id in('4','2','4','1','4') group by value having count(*) > 1 
```

我的预期输出将是，

```
value,Count
 d |  3
 b |  1
 a |  1 
```

谢谢，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:25:48.920

```
SELECT t.id, t.value, COUNT(t.id) 
FROM 
  test t
  JOIN 
    ( SELECT 1 AS id
      UNION ALL SELECT 3
      UNION ALL SELECT 3
      UNION ALL SELECT 4
      UNION ALL SELECT 1
      UNION ALL SELECT 1 ) AS tmp
    ON t.id = tmp.id
GROUP BY t.id 
```

[sqlfiddle.com](http://www.sqlfiddle.com/#!2/1e58f/13)上的示例

另请参阅：[强制 MySQL 从 WHERE IN 子句返回重复项而不使用 JOIN/UNION？](https://stackoverflow.com/questions/2259160/force-mysql-to-return-duplicates-from-where-in-clause-without-using-join-union)

当然，您的 IN 参数将是动态的，因此您必须为 tmp 表生成相应的 SQL 语句。

这是唯一的 SQL 方法。另一种可能性是让查询像您在问题中一样，然后以编程方式将行与传递给 IN 参数的计数相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:16:18.010

试试看：

```
 SELECT value, count(value) AS Count 
  FROM mytable m
    WHERE value = m.value
    GROUP BY value 
```

# ios - JQM:ios prev/next 改变了风格

> ID：14599224
> 
> 赞同：0
> 
> 时间：2013-01-30T08:06:58.643
> 
> 标签：ios, cordova, jquery-mobile

我已经使用 phonegap+jquerymobile 来开发我的移动应用程序。我注意到以下情况：（step.1）我点击一个文本区域输入一些东西（step.2）我点击一个带有ios表单控件的选择按钮（prev/next），然后样式发生了很大变化。所有元素都被放大了。

我在安卓中测试我的应用程序。但是，一切都按预期进行。该情况仅在 IOS 中显示。

任何的想法？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:02:27.753

要在选择输入元素时防止缩放，请使用此视口元标记：

安卓：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

IOS：

```
<meta name="viewport" content="width=device-width,user-scalable=0" /> 
```

# perl - Daemon::Generic 锁在 Solaris 上的守护进程中消失

> ID：14599225
> 
> 赞同：1
> 
> 时间：2013-01-30T08:07:00.687
> 
> 标签：perl, locking, solaris, daemon, file-locking

我正在尝试使用[Daemon::Generic](http://search.cpan.org/~muir/Daemon-Generic-0.82/lib/Daemon/Generic.pod)，它似乎正是我所需要的，除了在 Solaris 上似乎锁定 pid 文件不起作用。结果，`status`总是报告进程已经死了，即使它很明显还活着。

例如，以下内容：

```
use Daemon::Generic;

sub gd_run
{
  sleep (60);
}

sub gd_preconfig
{
  return ();
}

newdaemon(pidfile => "/tmp/myproc.pid"); 
```

...总是报告进程已死。

请注意，它`/tmp`是在本地安装的，因此似乎应该避免网络驱动器上的锁定问题。

任何想法如何让它发挥作用？

**编辑：**

经过仔细调查，通过`sleep 60`在各个点输入命令，`Generic.pm`似乎锁在函数的某个地方丢失了`gd_daemonize`。锁不能在 Solaris 上的分叉中存活吗？有没有办法确保锁在这个`daemonize`过程中存活下来？

# android - 在 fontfamily 后备调用中加载所有字体系列

> ID：14599227
> 
> 赞同：0
> 
> 时间：2013-01-30T08:07:01.343
> 
> 标签：android, css, google-chrome, truetype, webfonts

我在做 ：

```
<div class="testing"
    style="font-family:  Carrington,'Black Rose', Champagne, 'England Hand'">testing</div> 
```

所有这些系列都使用@font-face 嵌入。虽然 Windows 和 Linux 上的 Chrome 加载了后备中提到的所有字体系列（通过控制台中的网络加载选项进行检查），但它在 Android 平板电脑上没有这样做（这已被检查，因为我在此之后使用字体创建了更多 div家庭黑玫瑰和见证 FOUT 问题在 chrome 上）。

这是 Chrome 在 Android 上的普遍行为，它只会加载找到的第一个家庭而忽略其他家庭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:42:53.243

它只加载找到的第一个字体系列的原因是它找到了它。

您将更多字体添加到字体系列的原因是“**以防万一**”可能找不到首选字体。这就是为什么大多数字体系列看起来像：

```
font-family: 'Trebuchet MS', Verdana, Arial, sans-serif; 
```

**浏览器解读：**

如果计算机浏览器没有“Trebuchet MS”字体，则加载 Verdana。如果它没有 Verdana，则加载 Arial。如果出于某种奇怪的原因 Arial 不是一个选择，则加载默认的无衬线字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:38:47.620

真正奇怪的不是字体系列的运作方式。我想大多数人都明白它是如何工作的。

真正奇怪的是，当您使用系统上的常见系统字体（如 trebuchet ms）时，浏览器却找不到它。

我在使用 Trebuchet 时遇到过这个问题。莫名其妙的，在我的安卓手机上，我的普通浏览器没有问题，但Chrome就不行。

字体在那里。但是 Chrome 看不到它。

# c++ - 使用 Visual Studios 2012 进行 C++ 编码时，如何自动完成在 IntelliSense 中选择的代码？

> ID：14599232
> 
> 赞同：3
> 
> 时间：2013-01-30T08:07:14.637
> 
> 标签：c++, c, autocomplete, visual-studio-2012, intellisense

使用 IntelliSense 时，通常会在对话框中显示函数、成员等。通常在对话框的最顶部，IntelliSense 会自动选择与用户键入的内容最相关的 C++ 代码。

我希望 IntelliSense 帮助我自动完成我正在输入的单词，但是每当我按下 Enter 键时，它只会插入一个新行，而不是为我自动完成它。

对我来说唯一的解决方法是按向下键，然后按 Enter，以实现此目的。有没有其他方法可以使这个过程更容易？按 Enter 键时，我无法自动完成 C++ 代码，这很烦人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T08:07:14.637

在 C++ 中，按 TAB 键以自动完成。

# javascript - XSLT 中的 JavaScript

> ID：14599238
> 
> 赞同：0
> 
> 时间：2013-01-30T08:07:33.103
> 
> 标签：javascript, xslt, xslt-1.0, exslt, xslt-grouping

在 XSLT 中，我必须为特定元素分配一些值，并且它应该使用 Javascript 进行打印。例如，123 是我的输入元素数据，我希望使用 XSLT 中的 Javascript 代码以使元素显示“123 3456”的方式输出。（我使用的是 XSLT 1.0）。

如果有人能解决这个问题，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T04:46:43.687

结合使用 jQuery 构造函数和属性值模板语法：

```
<!--XSLT assignment -->
<xsl:variable name="foo" select="'123'"/>

<!--Hidden input DOM reference-->
<input id="foo" type="hidden" value="{$foo} 3456"/>

<!--JavaScript output via jQuery constructor-->
<script>
<![CDATA[
$("<span/>",{"html":$("#foo").val()}).appendTo("body");
]]>
</script> 
```

现代替代品：

```
<!--JavaScript output via HTML5 data- attributes-->
<script data-foo="{$foo} 3456" class="xslt">
<![CDATA[
$("<span/>",{"html":$("script.xslt").attr("data-foo")}).appendTo("body");
]]>
</script> 
```

# php - 不返回选定的图片名称

> ID：14599240
> 
> 赞同：0
> 
> 时间：2013-01-30T08:07:43.650
> 
> 标签：php, mysql

我有一个包含图片的数据库，我可以通过在弹出窗口中选择一个单选按钮来删除或在网站的不同部分使用它们。问题是每次点击图片时，我点击图片中第一张图片的名称数据库出现不是我点击的图片中的那个。怎么了？我使用 PHP 5.3 和 HeidiSQL

```
<?php

// ...

$result=mysql_query("SELECT * FROM imagini WHERE menu_id=6");

while($data=mysql_fetch_row($result)){ ?>

    <div class="tag">
            <div id='container_poze_originale'>

                <a href="javascript:show_popup('my_popup')" class="buton">Alege alt rol </a>    

                <div id="my_popup" style="display:none;border:1px dotted gray;padding:.3em;background-color:white;position:absolute;width:auto;left:100px;top:100px">
                    <a href="javascript:hide_popup('my_popup')">close</a>

                    <form action="popup.php" method="post" >
                        <input type="text" name="alt-rol" value="<?php echo $data[1];?>"  /> //always returns the name of the first picture in the database not the one i select
                        <input type="submit" value="Adauga imagine" class="buton_imagine"  />
                        <div class="radio">
                                <input type="radio" name="tip_imagine" value="0"/><label for="tip_imagine" class="radio2">Logo</label>
                                <input type="radio" name="tip_imagine" value="1"/><label for="tip_imagine" class="radio2">Slider</label>
                                <input type="radio" name="tip_imagine" value="2"/><label for="tip_imagine" class="radio2">Hot destinations</label>
                                <input type="radio" name="tip_imagine" value="3"/><label for="tip_imagine" class="radio2">Pachete</label>
                                <input type="radio" name="tip_imagine" value="4"/><label for="tip_imagine" class="radio2">Reclama</label>
                                <input type="radio" name="tip_imagine" value="5"/><label for="tip_imagine" class="radio2">Background</label>
                        </div>
                    </form>
                </div>  

                <div class="imagine_originala">
                        <img src= "../upload/original/<?php echo $data[1];?>"   /></a>  
                </div>

                <div class="Btag" style="display:none;">

                    <div id="buton_slide4" >
                        <a href="delete.php?id_imagini=<?php echo $data[0];?>&nume_imagini=<?php echo $data[1]?>&id_menu=<?php echo $data[2]; ?>" class="buton">Sterge</a></td>
                    </div>

                </div>

            </div>

    </div>  

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:53:24.040

我想我理解你的问题。你正在点击

```
<a href="javascript:show_popup('my_popup')" class="buton">Alege alt rol</a> 
```

你很惊讶`<div>`总是出现同样的情况吗？

好吧，这仅仅是因为 an`id`应该是唯一的。如果你循环浏览你的图像，你`<div>`每次都会创建一个新的`id`：**my_popup**。当点击链接时（无论是哪一个），JavaScript 都会选择`<div>`它找到的第一个带有 id 的链接`my_popup`。所以你应该只为每个分配一个**唯一的**id，`div`这样你的 JavaScript 就知道要打开哪个。您可以通过将图像 id 附加到 div id 来做到这一点（假设您在 中具有唯一的图像 id `$data[1]`）。

所以将其更改为（缩短）：

```
<? while($data=mysql_fetch_row($result)) { ?>
      <div class="tag">
         <div id="container_poze_originale">
            <a href="javascript:show_popup('my_popup<?=$data[1]?>')" class="buton">Alege alt rol</a>    

            <div id="my_popup<?=$data[1]?>" style="display:none;border:1px dotted gray;padding:.3em;background-color:white;position:absolute;width:auto;left:100px;top:100px">
              ...
            </div>
         </div>
      </div>
<? } ?> 
```

哦，将所有这些巨大的内联 CSS 属性放入外部样式表可能会很好，这样以后维护/更改您的网页会更容易。它使事情更具可读性...... :-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T08:16:12.843

我认为当您单击收音机时您的表单可以，但当您单击标签时则不行。标签的 for 属性需要一个 ID 作为参考，如下所示：

```
<input type="radio" name="tip_imagine" value="0" id="tip0" /><label for="tip0" class="radio2">Logo</label>
<input type="radio" name="tip_imagine" value="1" id="tip1"/><label for="tip1" class="radio2">Slider</label>
<input type="radio" name="tip_imagine" value="2" id="tip2"/><label for="tip2" class="radio2">Hot destinations</label>
<input type="radio" name="tip_imagine" value="3" id="tip3"/><label for="tip3" class="radio2">Pachete</label>
<input type="radio" name="tip_imagine" value="4" id="tip4"/><label for="tip4" class="radio2">Reclama</label>
<input type="radio" name="tip_imagine" value="5" id="tip5"/><label for="tip5" class="radio2">Background</label> 
```

使用您的实际代码，FOR 始终相同，因此您始终是第一个。

# gcc - GCC 内在函数对齐问题

> ID：14599248
> 
> 赞同：1
> 
> 时间：2013-01-30T08:07:59.810
> 
> 标签：gcc, assembly, alignment, intrinsics

我有一个令人不安的问题，使用 g++ 内在函数实现一个简单的非并行平均方法。这里是相关的c++部分，其中p_oNumPoints是数组p_pValues的长度，它本身就是一个double*类型的函数参数。

```
inline void arithmeticAvg (double &p_rAvg, const unsigned int p_oNumPoints, const double *p_pValues, double &p_rSum)
{
unsigned int i;
double oTmp[2] __attribute__((aligned(16))) = {0,0};

register __m128d XMM0 = _mm_setzero_pd();
register __m128d XMM1;
register __m128d XMM2;

const unsigned int oLooplength = (p_oNumPoints / 4);
for (i=0; i < (oLooplength*4); i += 4)
{
  XMM1 = _mm_loadu_pd(&p_pValues[i]);
  XMM2 = _mm_loadu_pd(&p_pValues[i+2]);
  XMM0 = _mm_add_pd(XMM0, XMM1);
  XMM0 = _mm_add_pd(XMM0, XMM2);
}
_mm_storeu_pd(oTmp, XMM0);
p_rAvg = oTmp[0] + oTmp[1]; 
```

gcc，使用选项 -O2 -S -msse4.1，提供以下程序集

```
b8b3c29e:   xorpd %xmm0,%xmm0
"b8b3c2a2:   movapd %xmm0,-0xa8(%ebp)"
b8b3c2aa:   mov 0xc(%ebp),%eax
b8b3c2ad:   shr $0x2,%eax
b8b3c2b0:   mov %eax,-0x10(%ebp)
b8b3c2b3:   movl $0x0,-0xc(%ebp)
b8b3c2ba:   jmp 0xb8b3c35c <_ZN8precitec4math13arithmeticAvgERdjPKdS1_+252>
b8b3c2bf:   mov -0xc(%ebp),%eax
b8b3c2c2:   shl $0x3,%eax
b8b3c2c5:   add 0x10(%ebp),%eax
b8b3c2c8:   mov %eax,-0x14(%ebp)
b8b3c2cb:   mov -0x14(%ebp),%eax
b8b3c2ce:   movupd (%eax),%xmm0
"b8b3c2d2:   movapd %xmm0,-0xb8(%ebp)"
b8b3c2da:   mov -0xc(%ebp),%eax
b8b3c2dd:   add $0x2,%eax
b8b3c2e0:   shl $0x3,%eax
b8b3c2e3:   add 0x10(%ebp),%eax
b8b3c2e6:   mov %eax,-0x18(%ebp)
b8b3c2e9:   mov -0x18(%ebp),%eax
b8b3c2ec:   movupd (%eax),%xmm0
b8b3c2f0:   movapd %xmm0,-0xc8(%ebp)
b8b3c2f8:   movapd -0xa8(%ebp),%xmm0
b8b3c300:   movapd %xmm0,-0x28(%ebp)
b8b3c305:   movapd -0xb8(%ebp),%xmm0
b8b3c30d:   movapd %xmm0,-0x38(%ebp)
b8b3c312:   movapd -0x38(%ebp),%xmm0
b8b3c317:   movapd -0x28(%ebp),%xmm1
b8b3c31c:   addpd %xmm1,%xmm0
b8b3c320:   movapd %xmm0,-0xa8(%ebp)
b8b3c328:   movapd -0xa8(%ebp),%xmm0
b8b3c330:   movapd %xmm0,-0x48(%ebp)
b8b3c335:   movapd -0xc8(%ebp),%xmm0
b8b3c33d:   movapd %xmm0,-0x58(%ebp)
b8b3c342:   movapd -0x58(%ebp),%xmm0
b8b3c347:   movapd -0x48(%ebp),%xmm1
b8b3c34c:   addpd %xmm1,%xmm0
b8b3c350:   movapd %xmm0,-0xa8(%ebp) 
```

尽管循环部分的翻译很糟糕（我尝试使用**asm("xmm")**属性但没有成功），但这仍然在引号中的行处崩溃。调试时，执行 _mm_setzero_pd() 命令时会发生这种情况，我认为这是由于重新排序所致。

VS 2010 翻译这个非常不同而不会崩溃任何东西。

知道问题是什么以及如何解决问题吗？

谢谢你的帮助，G。

# python - 我需要掌握python的哪一部分才能进行渗透测试和安全性

> ID：14599252
> 
> 赞同：-1
> 
> 时间：2013-01-30T08:08:13.167
> 
> 标签：python, security, penetration-testing

我想进入网络安全和渗透测试领域。

有人告诉我，我需要知道至少一种编程语言，这样我才能在需要时编写自己的工具。

我从 python 开始。但是由于python非常大，我想知道我需要掌握哪些python领域。任何可以帮助我的模块、插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:53:37.283

同意其他评论者的观点，这是一个过于宽泛的问题，是[https://security.stackexchange.com/questions/15705/using-python-for-security](https://security.stackexchange.com/questions/15705/using-python-for-security)的副本，但我读过的最好的安全相关 python 书是灰帽蟒。我会花很多时间阅读 OSS 代码，以及玩 Volatility、W3AF 和 Scapy 等项目。

# c# - 列表 容量增加与字典 容量增加？

> ID：14599253
> 
> 赞同：20
> 
> 时间：2013-01-30T08:08:16.590
> 
> 标签：c#, .net

为什么`List<T>`将其容量增加 2 倍？

```
private void EnsureCapacity(int min)
{
    if (this._items.Length < min)
    {
        int num = (this._items.Length == 0) ? 4 : (this._items.Length * 2);
        if (num < min)
        {
            num = min;
        }
        this.Capacity = num;
    }
} 
```

为什么`Dictionary<K,V>`要用素数作为容量？

```
private void Resize()
{
    int prime = HashHelpers.GetPrime(this.count * 2);
    int[] numArray = new int[prime];
    for (int i = 0; i < numArray.Length; i++)
    {
        numArray[i] = -1;
    }
    Entry<TKey, TValue>[] destinationArray = new Entry<TKey, TValue>[prime];
    Array.Copy(this.entries, 0, destinationArray, 0, this.count);
    for (int j = 0; j < this.count; j++)
    {
        int index = destinationArray[j].hashCode % prime;
        destinationArray[j].next = numArray[index];
        numArray[index] = j;
    }
    this.buckets = numArray;
    this.entries = destinationArray;
} 
```

为什么它不也只是乘以 2？两者都在处理寻找*持续的内存位置*......对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:20:40.790

哈希表大小通常使用素数，因为它降低了冲突的可能性。

哈希表通常使用模运算来查找条目所属的存储桶，如您在代码中所见：

```
int index = destinationArray[j].hashCode % prime; 
```

假设您的 hashCode 函数产生以下 hashCodes 以及其他 {x , 2x, 3x, 4x, 5x, 6x...}，那么所有这些都将聚集在 m 个桶中，其中 m = table_length/GreatestCommonFactor(表长度，x)。（验证/推导这一点很简单）。现在您可以执行以下操作之一来避免集群：

1.  确保您不会生成太多的 hashCodes，这些 hashCodes 是另一个 hashCode 的倍数，例如 {x, 2x, 3x, 4x, 5x, 6x...}。但是如果您的 hashTable 应该有，这可能有点困难数以百万计的条目。

2.  或者简单地通过使 GreatestCommonFactor(table_length, x) 等于 1 使 m 等于 table_length，即通过使 table_length 与 x 互质。如果 x 几乎可以是任何数字，那么请确保 table_length 是质数。

（来自[http://srinvis.blogspot.com/2006/07/hash-table-lengths-and-prime-numbers.html](http://srinvis.blogspot.com/2006/07/hash-table-lengths-and-prime-numbers.html)）

```
HashHelpers.GetPrime(this.count * 2) 
```

应该返回一个素数。查看 HashHelpers.GetPrime() 的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:41:26.737

`Dictionary`需要一些启发式方法，以便桶之间的哈希码分布更加均匀。

.NET`Dictionary`使用质数的桶来做到这一点，然后像这样计算桶索引：

```
int num = this.comparer.GetHashCode(key) & 2147483647; // make hash code positive
// get the remainder from division - that's our bucket index
int num2 = this.buckets[num % ((int)this.buckets.Length)]; 
```

当它增长时，它会使桶的数量增加一倍，然后再增加一些以*使数字再次成为质数*。

这不是唯一可能的启发式方法。`HashMap`例如，Java采用了另一种方法。桶的数量总是 2 的幂，并且在增长时它只*会使桶的数量增加一倍*：

```
resize(2 * table.length); 
```

但是在计算存储桶索引时，它会修改哈希：

```
static int hash(int h) {
    // This function ensures that hashCodes that differ only by
    // constant multiples at each bit position have a bounded
    // number of collisions (approximately 8 at default load factor).
    h ^= (h >>> 20) ^ (h >>> 12);
    return h ^ (h >>> 7) ^ (h >>> 4);
}
static int indexFor(int h, int length) {
    return h & (length-1);
}

// from put() method
int hash = hash(key.hashCode()); // get modified hash
int i = indexFor(hash, table.length); // trim the hash to the bucket count 
```

`List`另一方面，不需要任何启发式，所以他们没有打扰。

**加法**：成长行为根本不会影响`Add`'s 的复杂性。`Dictionary`，`HashMap`并且每个都具有O(1) 的`List`摊销复杂度。`Add`

增长操作需要 O(N) 但只发生第 N 次，因此要进行增长操作，我们需要调用`Add`N 次。对于 N=8，执行 N `Add`s 所需的时间具有值

> O(1)+O(1)+O(1)+O(1)+O(1)+O(1)+O(1)+O(N) = O(N)+O(N) = O(2N) = O(N)

所以，N `Add`s 取 O(N)，然后一个`Add`取 O(1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:28:05.637

来自SO中的一个[问题](https://stackoverflow.com/questions/4181531/net-concurrentdictionary-initial-capacity-set-to-arbitrary-prime-number-rather)；

> 字典或散列表依赖于散列键以获得较小的索引来查找相应的存储（数组）。所以哈希函数的选择非常重要。典型的选择是获取一个键的哈希码（这样我们得到良好的随机分布），然后将代码除以一个素数，并使用提醒索引到固定数量的桶中。这允许将任意大的哈希码转换为一组有界的小数字，我们可以为其定义一个要查找的数组。因此，将数组大小设为素数很重要，然后大小的最佳选择成为大于所需容量的素数。这正是字典实现所做的。

`List<T>`使用`array`s 存储数据；并且增加数组的容量需要将数组复制到新的内存位置；这很耗时。我想，为了降低复制数组的发生率，list 的容量会增加一倍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T08:28:09.210

我不是计算机科学家，但...

很可能它与[HashTable](http://en.wikipedia.org/wiki/Hash_table)的[负载因子](http://en.wikipedia.org/wiki/Load_factor_%28aeronautics%29)有关（最后一个链接只是一个数学定义），并且为了不造成更多混乱，对于不是数学听觉，定义这一点很重要：

```
loadFactor = FreeCells/AllCells 
```

这我们可以写成

```
loadFactor = (AllBuckets - UsedBuckets)/AllBuckets 
```

`loadFactor`定义哈希映射中的碰撞*概率。*因此，通过使用[质数](http://en.wikipedia.org/wiki/Prime_number)，一个数字

> ..是一个大于 1 的自然数，除了 1 和它本身之外没有正除数。

我们减少（但不消除）哈希图中发生冲突的风险。

如果`loadFactor`趋于`0`，我们有更安全的哈希图，所以我们总是必须保持它尽可能低。通过 MS[博客](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/8a2fb4ad-b3e0-45dd-9c96-7f80409b0ee1)，他们发现那个`loadFactor`（最佳值）的值必须是 arround `0.72`，所以如果它变大，我们会增加最接近素数的容量。

**编辑**

为了更清楚地说明这一点：拥有*一个质数*，尽可能确保在我们在 .NET 字典中的哈希的具体实现中均匀分布哈希。这与检索值的效率无关，而是与内存使用效率和碰撞风险降低有关。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T08:17:25.357

Dictionary 根据其 GetHashCode 值将其所有对象放入桶中，即
`Bucket[object.GetHashCode() % DictionarySize] = object;`
它使用质数作为大小以避免发生冲突的机会。据推测，具有许多除数的大小对于设计不佳的哈希码是不利的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T09:36:32.387

当需要调整大小以保证一些摊销的运行时间时，将容量增加一个常数因子（而不是例如通过一个附加常数增加容量）。例如，在基于数组的列表的末尾添加或删除需要`O(1)`时间，除非您必须增加或减少复制列表内容所需的容量并因此需要`O(n)`时间。将容量更改为常数因子可确保摊销运行时间仍为`O(1)`. 该因子的最佳值取决于预期的使用情况。[有关Wikipedia](http://en.wikipedia.org/wiki/Dynamic_array#Geometric_expansion_and_amortized_cost)的更多信息。

选择哈希表的容量为素数用于改善项目的分布。如果不是均匀分布，如果是素数，`bucket[hash % capacity]`将产生更均匀的分布。（我不能给出背后的数学，但我正在寻找一个很好的参考。）这与第一点的结合正是实现的目的 - 将容量增加（至少）2倍，并确保容量是主要的。`hash``capacity`

# php - php json 格式

> ID：14599254
> 
> 赞同：0
> 
> 时间：2013-01-30T08:08:16.520
> 
> 标签：php, json, jquery-post

[我在这个url](http://knowyourdj.staging.techliance.com/webservices?action=GetSoundCloud&UID=1)中有一个 json 响应，我必须从这个[站点](http://jsonformat.com/#jsondataurllabel)进行验证。

我已经通过许多解决方案坚持了下来，但我不知道这里出了什么问题。

我非常感谢任何帮助建议。

这是代码

```
header('Content-type: application/json');
$obj=array();
$UID=isset($_REQUEST['UID'])?$_REQUEST['UID']:'';
if($UID!='')
{
    $sound_cloud=getLatestSound($UID);
    if($sound_cloud==false)
    {
        $sound_cloud['status']="No Record Found";
        $obj['status']="No Record Found";   
    }
    else
    {
        $sound_cloud['status']="successfull";           
    }
}
else
{
    $sound_cloud['errors']="required UID";
}

print stripslashes(json_encode($sound_cloud));
exit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:16:33.963

```
<?php

$json = '{"stream_url":"http://api.soundcloud.com/tracks/74950626/stream?client_id=b45b1aa10f1ac2941910a7f0d10f8e28","title":"Klaypex-Jump","status":"successfull"}';
$arrayval = json_decode($json);
print_r($arrayval);

// OR

$url = 'http://knowyourdj.staging.techliance.com/webservices?action=GetSoundCloud&UID=1';
$json = file_get_contents($url);
$arrayval = json_decode($json);
print_r($arrayval);
?> 
```

结果：

```
stdClass Object ( [stream_url] => http://api.soundcloud.com/tracks/74950626/stream?client_id=b45b1aa10f1ac2941910a7f0d10f8e28 [title] => Klaypex-Jump [status] => successfull ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:28:11.197

You can make an ajax call with jquery to your php like this

```
$.ajax({
   type:"POST",
   url:'/example.php', //your url
   data:{'seguros':a, 'esp':esp,'cont':cont}, //your variables 
   success: function(data){
      //handle your answer here
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:33:13.870

回显它，而不是打印。试试看~

```
print stripslashes(json_encode($sound_cloud));

=>

echo  stripslashes(json_encode($sound_cloud)); 
```

- - - - - - - - - 编辑

如果这不是解决方案，我认为这是一种同源策略问题。

仔细检查您的网址，它应该与网页服务器具有相同的域。

[参考 - 同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)

使用 jquery jsonp，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T08:20:39.083

利用

```
               $json = file_get_contents('http://knowyourdj.staging.techliance.com/webservices?action=GetSoundCloud&UID=1');//从服务器获取内容
               $json = json_decode($json); // 解析获取的内容
               如果（！空（$josn））{
                          print_r($json);
               }别的{
echo '没有找到结果';
                }

             //让我们找到我们解析的内容

```

# css - 在 Wordpress 中设置活动链接的样式

> ID：14599255
> 
> 赞同：0
> 
> 时间：2013-01-30T08:08:22.753
> 
> 标签：css, wordpress, wordpress-theming, selecteditem

我希望在 CSS / JS 中使用与非活动链接不同的颜色来设置当前选定链接的样式。

我找到了插入到我的页面中的这段代码

```
.current_page_item a.active {color: blue;} 
```

我相信这是当前选定项目中的一个类，但它似乎失败了。

网站是： http: [//www.milknhny.co.uk/ShopTest](http://www.milknhny.co.uk/ShopTest)

这对js可行吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:49:08.473

我实际上已经回答了这个问题，因为我将它放在一个特定的 DIV 中，我必须先声明它，所以这是正确的代码：

```
#menuwrap ul li.current-menu-item a 
```

谢谢你的帮助。

# c - 如何检查库是为哪个平台构建的

> ID：14599257
> 
> 赞同：0
> 
> 时间：2013-01-30T08:08:25.230
> 
> 标签：c, linux

我正在为 linux 下的 RX 平台进行交叉编译，但是如何检查该库是否是为正确的平台构建的？

有谁知道linux下的命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:13:01.283

您可以使用命令`file`查看[手册页](http://linux.die.net/man/1/file)来获取文件的元信息。例如，编译它的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:10:35.600

如果输出是 ELF 格式（您可以通过键入来确定`file <filename>`），那么您可以使用`readelf`and/or`objdump`命令来检查它。

# android - 下载 JSON 时出错

> ID：14599259
> 
> 赞同：0
> 
> 时间：2013-01-30T08:08:30.723
> 
> 标签：android, json, amazon-web-services, android-asynctask

我正在使用我的网络服务`JSON`在我的应用程序中下载数据。但是，有时我无法下载`JSON`数据并返回空值。我还必须提到我正在为我的服务器使用 Amazon Web Service。

由于有时数据下载没有错误并且有时会引发空异常，因此我很困惑它是否必须对有故障的 Web 服务或我的代码做某事。我正在下载数据`AsyncTask`并使用下面给出的代码：

请帮帮我！

```
public synchronized JSONArray getJSONArrayFromUrl(String url) {
    JSONArray jArray = null;
    String json = getJSONString(url);
    try {
        jArray = new JSONArray(json);
    } catch (Exception e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }
    return jArray;

}

public synchronized JSONObject getJSONObjectFromUrl(String url) {

    JSONObject jObj = null;

    String json = getJSONString(url);
    try {
        jObj = new JSONObject(json);
    } catch (Exception e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }
    return jObj;
}

public synchronized String getJSONString(String url)
{

    try {
           URL url1 = new URL(url);
           URLConnection tc = url1.openConnection();
           tc.setConnectTimeout(timeout);
           tc.setReadTimeout(timeout);
           BufferedReader br = new BufferedReader((new InputStreamReader(tc.getInputStream())),8000);
           StringBuilder sb = new StringBuilder();
           String line;
           while ((line = br.readLine()) != null) {
                    sb.append(line+"\n");
                }
                br.close();
                return sb.toString();
        }
    catch(Exception e)
    {
        Log.d("Error","In JSON downloading");
    }

    return null;
} 
```

**日志猫：**

```
01-30 09:55:09.232: E/JSON Parser(18228): Error parsing data java.lang.NullPointerException
01-30 09:55:09.232: W/System.err(18228): java.lang.NullPointerException
01-30 09:55:09.232: W/System.err(18228):    at com.ex.feeds.SetupFeeds.doInBackground(SetupFeeds.java:69)
01-30 09:55:09.232: W/System.err(18228):    at com.ex.feeds.SetupFeeds.doInBackground(SetupFeeds.java:1)
01-30 09:55:09.232: W/System.err(18228):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-30 09:55:09.232: W/System.err(18228):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-30 09:55:09.232: W/System.err(18228):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-30 09:55:09.232: W/System.err(18228):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-30 09:55:09.232: W/System.err(18228):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-30 09:55:09.232: W/System.err(18228):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-30 09:55:09.237: W/System.err(18228):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:23:23.357

AWS 很少失败。您是否配置了健康检查和通知？可能不是，因为你在问这个问题——为什么不设置这个？

有趣的是，您从不调用`connect()`您的 URLConnection，是吗？你真的应该。;)

大多数时候，在 NullPuinterException 之前，您的代码应该能够生成一条消息；你看到哪一个？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T11:18:24.503

first take like this public class Quesans extends Activity{JSONParser jsonParser = new JSONParser();ArrayList questionDatas = new ArrayList();JSONObject json;JSONArray groups = null;int i, k = 0;RadioGroup btn_practicerg;RadioButton btn_practice1;RadioButton btn_practice2; RadioButton btn_practice3;RadioButton btn_practice4;private ProgressDialog pDialog; private String name = "";private String tid = ""; private String lid = "";private String gid = "";private String id = ""; private static final String TAG_SUCCESS = "success";private static final String TAG_GROUP = "group";private static final String TAG_QUES = "ques";private static final String TAG_QUESID = "id";private static final String TAG_ANSW = "answ";private static final String TAG_TOPICNAME = "tname";private static final String TAG_TOPICID = "topicid";private static final String TAG_LEVELID = "levelid";private static final String TAG_GROUPID = "groupid";private ArrayList ques1 = new ArrayList();private ArrayList quesid = new ArrayList();private ArrayList answ1 = new ArrayList();TextView txtque;int counter = 1;

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T08:21:17.940

在公共同步 String getJSONString(String url) {...... ...... return null; 您正在返回空值。在结尾也传递 sb.tostring

# android - Google Maps API v2 调用点击 mylocationbutton 的行为

> ID：14599268
> 
> 赞同：3
> 
> 时间：2013-01-30T08:09:04.913
> 
> 标签：android, google-maps

我有一个完整的工作`GoogleMap`，我可以通过电话显示我的用户位置

```
mMap.setMyLocationEnabled(true); 
```

我想要完成的是实际单击现在出现在按钮上的功能`GoogleMap`（即使用正确的缩放等将地图动画到用户位置）。

该功能已经存在于 GoogleMap 对象中，我该如何使用它？

我不想使用 a`LocationListener`或这样来完成此操作，我只想“调用相同的代码”，当我单击地图上的按钮时会调用该代码。可以这么简单吗？

提前致谢。

编辑：

我基本上想要做的是将地图置于用户位置的中心，就像我单击按钮时 GoogleMap 以用户位置为中心的方式一样。像这样：

```
 GoogleMap mMap = this.getMap();
    if(mMap != null) {
        mMap.setMyLocationEnabled(true);
        //TODO center the map on mylocation
    } 
```

编辑：

显然谷歌正在努力解决这个问题。[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4644](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4644)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:07:24.140

当我们获得第一次位置更新时，这就是我导航到地图中心的方式。

我的班级标题：

```
public class FragActivity extends SherlockFragmentActivity implements  OnMyLocationChangeListener

private GoogleMap mMap; 
```

我的 mMap 设置：

```
 if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = customMapFragment.getMap();

        // Check if we were successful in obtaining the map.
        if (mMap != null)
            setUpMap();
    } 
```

setUpMap 方法：

```
private void setUpMap() {
    mMap.setMyLocationEnabled(true);
    mMap.setOnMyLocationChangeListener(this);
} 
```

和我的位置变化：

```
@Override
public void onMyLocationChange(Location lastKnownLocation) {
    CameraUpdate myLoc = CameraUpdateFactory.newCameraPosition(
            new CameraPosition.Builder().target(new LatLng(lastKnownLocation.getLatitude(),
                    lastKnownLocation.getLongitude())).zoom(6).build());
    mMap.moveCamera(myLoc);
    mMap.setOnMyLocationChangeListener(null);
} 
```

奇迹般有效

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-05T23:42:43.843

不太确定为什么其他答案都在谈论`OnMyLocationChangeListener`s。这不是 OP 中所要求的。所问的是如何复制单击 MyLocationButton的*确切行为，这实际上比仅将相机动画到用户位置更复杂。*该按钮根据您当前所处的缩放级别执行不同的操作。

例如，当您被缩小时，单击按钮将在放大时将您动画到您的位置*，*而如果您已经处于某些缩放级别，单击按钮只会将*您*动画到您的位置，同时*保持*当前缩放级别。

与其费力地尝试复制这种行为，不如我们可以简单地获得对 MyLocationButton 的引用，然后单击它，这不是很好吗？好吧，这是我发现的目前最好的方法：

```
@OnClick(R.id.fabMyLocation)
public void onMyLocationClick(FloatingActionButton fabMyLocation) {
    View myLocationButton = ((View) mapFragment.getView().findViewById(Integer.parseInt("1")).getParent())
            .findViewById(Integer.parseInt("2"));

    myLocationButton.performClick();
} 
```

是的，它并不漂亮，并且依赖于在未来版本的 Google Maps API 中可能会更改的硬编码 ID。但是这种检索按钮的方法是基于[2013 年的这个高度评价的答案，](https://stackoverflow.com/questions/14489880/how-to-change-the-position-of-maps-apis-get-my-location-button)到目前为止，截至 Google Play Services 8.4.0，仍然可以完美运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T05:46:39.270

2013 年 2 月更新：

现在这是可能的。您现在可以设置地图的 OnMyLocationChangeListener。根据需要接收更新并相应地移动相机。

~~这是不可能的。我发现 Android 中的 GoogleMap 提供给您的信息非常有限。它根本不会让您直接访问用户位置更新或用户可以按下的按钮（您只能启用/禁用它，而不是模拟按下）。~~

您必须实现 LocationSource 和 LocationListener 接口并使用 LocationManager 从设备获取更新并使用它们将它们发送到地图。

然后，您可以将自己的自定义按钮添加到叠加层以复制默认按钮，并使用您自己的相机和缩放控件来模拟功能。

~~资料来源：搜索时间~~

# jquery - 页面加载后重新打开 Jquery 菜单

> ID：14599272
> 
> 赞同：0
> 
> 时间：2013-01-30T08:09:42.327
> 
> 标签：jquery, html, javascript-events

我有一个垂直的 2 级 jquery 菜单，我需要在单击链接并加载新页面后，菜单保持打开状态并突出显示所选链接。这是我的菜单代码：

```
<div id="my-menu">
    <ul>
        <li><span class="toggle">Una Passione</span>
            <ul>
                <li><a href="Trefratelli.aspx">Tre Fratelli</a></li>
                <li><a href="Conlenostremani.aspx">Con le nostre mani</a></li>
                <li><a href="#">La nostra storia</a></li>
                <li><a href="#">Il video</a></li>
                <li><a href="Libro.aspx">Il libro</a></li>
            </ul>
        </li>
        <li><span class="toggle">Icone</span>
            <ul>
                <li><a href="Icone_Brera.aspx">Brera</a></li>
                <li><a href="Icone_Magenta.aspx">Magenta</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

这里是jQuery代码：

```
$(document).ready(function() {

    $("span.toggle").next().hide();
    $("span.toggleinterno").next().hide();

    $("#my-menu a, #my-menu span.toggle").click(function() {
        $(this).stop().animate( {
            color:"red"
        }, 300);
    });

    $("span.toggle").click(function() {
        if ($(this).hasClass('second')) {
            $(this).removeClass('second');
        } else {
            $(this).addClass('second');
        }
    });  

    $("#my-menu a, #my-menu span.toggleinterno").click(function() {
        $(this).stop().animate( {
            fontSize:"17px",
            //paddingLeft:"10px",
            color:"black"
        }, 300);
    }, function() {
        $(this).stop().animate( {
            //fontSize:"14px",
            paddingLeft:"15",
            color:"#808080"
        }, 300);
    });

    $("span.toggle").css("cursor", "pointer");
    $("span.toggleinterno").css("cursor", "pointer");

    $("span.toggle").click(function() {
        $(this).next().toggle(1000);
    });

    $("span.toggleinterno").click(function() {
        $("span.toggleinterno").css("width", "100px");
        $(this).next().toggle(1000);
    });
}); 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:13:06.910

你可以尝试这样的事情：

```
var url = window.location.pathname.match(/.*\/(.*)$/)[1];
var $activelink =  $('#my-menu a[href="' + url + '"]');
var $openmenu = $('#my-menu ul ul').has(activelink);

$activelink.addClass('hilight');
$openmenu.show(); 
```

# ios - ASIHTTPRequest .Net Web 服务解析器

> ID：14599273
> 
> 赞同：0
> 
> 时间：2013-01-30T08:09:49.693
> 
> 标签：ios, objective-c, soap, asynchronous, asihttprequest

我正在制作一个 xml/soap 请求类，它从 .NET Web 服务异步获取数据。我从另一个视图控制器类中调用这个类。现在的问题是，由于它是异步的，我不知道什么时候会出现结果并触发委托，并且需要将数据返回到视图控制器类。

**问题**：如何在视图控制器类中等待数据？

*注意：不能使用通知*

# ruby-on-rails-3 - 如何使用 rspec 测试 Thinking Sphinx delta 索引

> ID：14599275
> 
> 赞同：0
> 
> 时间：2013-01-30T08:09:52.570
> 
> 标签：ruby-on-rails-3, rspec, thinking-sphinx

[我在我的项目中使用了 Thinking sphinx，并使用类似于此处](https://stackoverflow.com/a/9277295/985051)`Rspec`的设置为我的搜索功能使用了测试用例

我还在我的项目中使用了广泛的 Delta 索引。如何在此处使用 rspec 测试我的 delta 索引结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:56:34.853

问题是由于[https://github.com/pat/thinking-sphinx/issues/148](https://github.com/pat/thinking-sphinx/issues/148)（增量索引在 rspec 测试用例中默认禁用）

我必须将以下标志设置为 true 才能运行测试用例：

```
ThinkingSphinx.deltas_enabled  = true
ThinkingSphinx.updates_enabled = true 
```

# javascript - svgElement 在 chrome 中不起作用

> ID：14599278
> 
> 赞同：0
> 
> 时间：2013-01-30T08:09:58.847
> 
> 标签：javascript, html, svg

html标签

```
<svg  width="550px" height="300px">
    <g transform="translate(275, 150)"> 
        <circle id="mySquare" cx="0" cy="0" r="10" style=" fill: orange; />
    </g>
</svg> 
```

js脚本

```
mySquare.currentTheta += 0.3;
mySquare.transform.baseVal.getItem(0).setRotate(mySquare.currentTheta, 0, 0); 
```

此脚本在 IE9 中运行

但在铬，不工作

chrome 不支持 svgElement？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:14:44.613

使用类似[`getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)之前的方法来获取相应的元素：

```
var mySquare = document.getElementById( 'mySquare' );
mySquare.currentTheta += 0.3;
mySquare.transform.baseVal.getItem(0).setRotate(mySquare.currentTheta, 0, 0); 
```

所有具有 id 的元素都获得具有该 id 的全局变量的功能/错误并非在所有浏览器中都存在。

# vb.net - 为什么 Chr 函数没有在立即窗口中返回结果

> ID：14599283
> 
> 赞同：0
> 
> 时间：2013-01-30T08:10:20.817
> 
> 标签：vb.net, visual-studio-2010

我希望在即时窗口`?Chr(65)`中返回`A`，但我得到以下信息：

![在此处输入图像描述](../Images/69a5b1048ba8d9ed7f03380e8e9228f3.png)

在`Excel-VBA`s 即时窗口中，它可以满足我的期望：

![在此处输入图像描述](../Images/a6f18606819bc9bbc5294fd2dfcc4ecf.png)

如何修改 VB 即时窗口中的代码以使其返回`A`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:19:32.737

尝试使用`?System.Convert.ToChar(65)`或`?Microsoft.VisualBasic.Chr(65)`

# iphone - DES解密objectiveC类似于C#解密

> ID：14599289
> 
> 赞同：0
> 
> 时间：2013-01-30T08:10:38.010
> 
> 标签：iphone, ios, objective-c, encryption, des

在我的项目中，我从服务器获得了一个 DES 加密密钥，我需要在我的 iOS 应用程序中对其进行解密。

**这是服务器中使用的代码，**

```
public static string DecryptLicenseKey(string EncryptedLicense)
{
    string str;
    byte[] rgbIV = new byte[] { 10, 20, 30, 40, 50, 60, 70, 80 };
    byte[] buffer = new byte[EncryptedLicense.Length + 1];

    try
    {
        //Decrypt the license
        //-----------------------------------
        byte[] bytes = Encoding.UTF8.GetBytes("!$@$%^%&");
        DESCryptoServiceProvider provider = new DESCryptoServiceProvider();
        buffer = Convert.FromBase64String(EncryptedLicense);
        MemoryStream stream2 = new MemoryStream();
        CryptoStream stream = new CryptoStream(stream2, provider.CreateDecryptor(bytes, rgbIV), CryptoStreamMode.Write);
        stream.Write(buffer, 0, buffer.Length);
        stream.FlushFinalBlock();
        str = Encoding.UTF8.GetString(stream2.ToArray());
        //-----------------------------------
    }
    catch (Exception ex)
    {
        return null;
    }

    return str;
} 
```

**这是我尝试的代码，**

```
- (void)DESDecrypt {
    if (!self.key) {
        self.key = @"!$@$%^%&";
    }

    const void *constkey = (const void *) [self.key UTF8String];

    self.inputData = [Base64Converter decode:self.inputString];
    const void *dataIn = (const void *) self.inputData;
    size_t dataInLength = [self.inputData length];

    uint8_t *dataOut = NULL;

    size_t dataOutAvailable = 0;
    size_t dataOutMoved = 0;

    dataOutAvailable = (dataInLength + kCCBlockSizeDES) & ~(kCCBlockSizeDES - 1);
    dataOut = malloc( dataOutAvailable * sizeof(uint8_t));
    memset((void *)dataOut, 0x0, dataOutAvailable);

    Byte iv [] = {10, 20, 30, 40, 50, 60, 70, 80};

    //    CCCryptorStatus CCCrypt(
    //                            CCOperation op,         /* kCCEncrypt, etc. */
    //                            CCAlgorithm alg,        /* kCCAlgorithmAES128, etc. */
    //                            CCOptions options,      /* kCCOptionPKCS7Padding, etc. */
    //                            const void *key,
    //                            size_t keyLength,
    //                            const void *iv,         /* optional initialization vector */
    //                            const void *dataIn,     /* optional per op and alg */
    //                            size_t dataInLength,
    //                            void *dataOut,          /* data RETURNED here */
    //                            size_t dataOutAvailable,
    //                            size_t *dataOutMoved)
    //    __OSX_AVAILABLE_STARTING(__MAC_10_4, __IPHONE_2_0);

    CCCryptorStatus ccStatus = CCCrypt(kCCDecrypt,
                                       kCCAlgorithmDES,
                                       kCCOptionECBMode,
                                       constkey,
                                       kCCKeySizeDES,
                                       iv,
                                       dataIn,
                                       dataInLength,
                                       (void *)dataOut,
                                       dataOutAvailable,
                                       &dataOutMoved);

    NSLog(@"CCStatus : %d",ccStatus);
    if (ccStatus == kCCSuccess) {
        self.outputData = [NSData dataWithBytes:(const void *)dataOut length:(NSUInteger)dataOutAvailable];
        self.outputString = [[NSString alloc] initWithBytes:dataOut length:dataOutAvailable encoding:NSUTF8StringEncoding];
    }
} 
```

我得到了 CCStatus Success 并且收到的数据是（self.outputData），self.outputString 是空的。我哪里错了，

提前致谢

# c++ - 取值范围（最小值和最大值）

> ID：14599292
> 
> 赞同：0
> 
> 时间：2013-01-30T08:10:51.893
> 
> 标签：c++, range, definition

任何定义类型的最大值和最小值到底是多少？这可能吗？

```
unsigned int maximum_uint = (maximum_value)(unsigned int);
short minimum_short = (minimum_value)(short);
float maximum_float = (maximum_value)(float); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:17:11.913

你写的可能是不可能的。

*C风格*的C++头文件`climits`和C++头文件中提供了各种类型的限制`limits`

看 ：

[`climits`](http://www.cplusplus.com/reference/climits/)

[`limits`](http://www.cplusplus.com/reference/limits/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:26:07.093

```
#include <limits>

unsigned int maximum_uint = std::numeric_limits<unsigned int>::max();
short minimum_short = std::numeric_limits<short>::min();
float maximum_float = std::numeric_limits<float>::max(); 
```

# php - 按相关性对php数组进行排序

> ID：14599296
> 
> 赞同：0
> 
> 时间：2013-01-30T08:10:59.970
> 
> 标签：php, arrays, sorting

我想以一种与某个字符串进行比较的方式对 php 数组进行排序，并且

1.  字符串的完全匹配在顶部
2.  其余的需要根据与字符串的相关性进行排序。最相似的字符串是下一个，依此类推。

**我正在远程获取数组，所以我无法控制**
我搜索过的 sql 语句并且找不到令人满意的答案。
先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:17:26.787

您可以使用`usort`利用[levenshtein()](http://www.php.net/manual/en/function.levenshtein.php)对数组进行排序的回调函数。

# java - Lucene 从 3.x 迁移到 4.1.0 和索引优化

> ID：14599297
> 
> 赞同：0
> 
> 时间：2013-01-30T08:11:00.570
> 
> 标签：java, migration, lucene

我已经从 lucene 3.x 迁移到 4.1.0。创建新索引后，我意识到索引目录中有更多文件。lucene 3 使用 IndexWriter.optimize() 来折叠文件。[v4](https://stackoverflow.com/questions/9483083/forcemerge-function-in-indexwriter-class)中的继任者是[IndexWriter.forceMerge(int maxNumSegments)](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/index/IndexWriter.html#forceMerge%28int%29)。我已经尝试使用 maxNumSegments 的不同值进行 forceMerge 并且我总是得到相同的索引文件。我希望将这些文件合并为一个或至少更少的索引文件。我错了吗？你知道怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T09:59:18.577

除了意识形态（更少文件比更多文件更好）之外，您需要更少文件是否有任何实际原因？提供给定索引的总字节数大致相同，有什么区别？

删除优化的原因是因为它效率低下：它会破坏搜索性能，结果负载峰值等。在多个段上搜索的性能已经提高，并且`.optimize()` 不再需要这样做。Lucene 现在使用`TieredMergePolicy`它来[很好地平衡负载](http://blog.mikemccandless.com/2011/02/visualizing-lucenes-segment-merges.html)并从不同的角度解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T10:39:49.533

也许您正在寻找 Lucene 的复合文件格式，它将所有逻辑索引文件存储在单个实际文件中。请参阅[MergePolicy.setUseCompoundFile(true)](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/index/TieredMergePolicy.html#setUseCompoundFile%28boolean%29)。

# java - 如何在 appengine/J 中捕获 DeadLineExceedException？

> ID：14599301
> 
> 赞同：0
> 
> 时间：2013-01-30T08:11:19.273
> 
> 标签：java, google-app-engine, jakarta-ee

我尝试捕获 DeadlineExceededException。

```
try
{
    Client restletClient  =  new Client(Protocol.HTTP);
    Request req    =  new Request(Method.GET, urltocall);
    Response res    =  restletClient.handle(req);
    log.info("The status of the response : " + res.getStatus());
    responseContent   =  res.getEntity().getText();
    log.info("Content is  : " + responseContent);
    }
    catch(DeadlineExceededException e)
    {
         log.log(java.util.logging.Level.SEVERE,e.getMessage(),e);
         log.info("Inside catch block send mail to client service team!");
         response.sendRedirect("/Messages");
    } 
```

但是，我无法捕捉。有没有其他方法可以捕捉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:13:56.497

> 但是，我无法捕捉

这意味着有些要么没有抛出异常，要么抛出的异常不同`DeadlineExceededException`。

> 有没有其他方法可以捕捉？

任何带有异常的 catch 块或任何其他比处理此异常`DeadlineExceededException`更通用的异常。`DeadlineExceededException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:18:10.193

我们在这里讨论两个例外：`DeadlineExceededException`和`HardDeadlineExceededError`.

当`DeadlineExceededException`您达到某些限制时，例如 HTTP 请求调用应在 60 秒内完成它们的处理等，就会抛出。这是您可以在代码中捕获的内容。

但是，当您捕获该异常时，这意味着您必须非常快速地完成处理（通常不到一秒），否则将`HardDeadlineExceededError`引发异常并且您无法在应用程序中捕获该异常。

因此，最有可能发生的是您能够捕获该异常，但您的代码可能需要太多时间才能在 catch 处理程序中完成，因此会`HardDeadlineExceededError`被抛出。有时，当 App Engine 运行时太忙而无法引发时，也会发生这种情况，`DeadlineExceededException`结果它只是抛出了`HardDeadlineExceededError`，而您无法捕捉到。

有关更多详细信息，请参阅[https://developers.google.com/appengine/articles/deadlineexceedederrors](https://developers.google.com/appengine/articles/deadlineexceedederrors)。

# mysql - 使用MySql获取一个季度最后一个月的最后一个工作日

> ID：14599302
> 
> 赞同：1
> 
> 时间：2013-01-30T08:11:20.693
> 
> 标签：mysql

以下查询的结果是给我一个月的最后一个工作日。

```
select  DATE_FORMAT(max(dates), '%m-%d-%Y')  Last_day
from
(select dates,@r := @r + 1 as r
FROM
(SELECT @r := 0) r1,
(SELECT @row := @row + 1 as row, DATE_ADD('2013-03-01', INTERVAL @row-1 DAY) dates
From
(SELECT @row := 0) r,
(select 1 n union all select 2 n union all select 3 n union all select 4 n union all     select 5 n union all select 6 n) t1,
(select 1 n union all select 2 n union all select 3 n union all select 4 n union all select 5 n union all select 6 n) t2
) num_seq 
where 
dates<DATE_ADD('2013-03-01', INTERVAL 1 MONTH)
and DAYNAME(dates) not in ('Saturday','Sunday') 
order by dates )rTable; 
```

以下查询的结果是给我特定日期四分之一的最后一天。

```
select MAKEDATE(YEAR('2013-03-01'), 1)+ INTERVAL QUARTER('2013-03-01') QUARTER - INTERVAL 1 DAY a; 
```

我遇到的问题是从上一季度、现在和下一季度获得最后一个工作日。有没有一种方法可以将上述两个 sql 合二为一。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:15:45.190

如果您只想要上一季度、本季度和下一季度的最后一个工作日，那么在应用程序代码中计算这些日期然后将它们传递到数据库可能会容易得多。

# highcharts - 仅将 1 个数据系列发送到图表时，x 轴位置和格式错误

> ID：14599306
> 
> 赞同：0
> 
> 时间：2013-01-30T08:11:25.253
> 
> 标签：highcharts

当我输入只有 1 个数据条目的日期时间序列时，我发现图表（highcharts 2.3.5）存在问题，它在 x 轴上的位置不正确和点格式错误。

这是示例：http: [//jsfiddle.net/LAcSw/](http://jsfiddle.net/LAcSw/)

```
$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },
    xAxis: {
        type: 'datetime'
    },

    series: [{
        data: [
            [Date.UTC(2010, 0, 1), 29.9]
        ]
    }]
  });
}); 
```

是否有修复知识或其他东西（在 2.2.5 上很好）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:36:50.847

由于您只有一个点，HighCharts 正在对 yAxis 范围以及 xAxis 点上的标签进行最佳猜测。您没有为 xAxis 日期时间标签定义任何类型的格式 - 并且 HighCharts 只有一个点可以使用，因此它默认为时间。如果您[`formatter`](http://api.highcharts.com/highcharts#xAxis.labels.formatter)为 xAxis 标签分配 a，您可以让它做您想做的事情。

这里有一些粗略的代码来告诉你这是做什么的：

```
xAxis: {
    type: 'datetime',
    labels: {
        formatter: function() {
            return Highcharts.dateFormat('%d %b %Y', this.value);
        }
    }
},
yAxis: {
    min: 0,
    max:50
}, 
```

这是您的[jsFiddle](http://jsfiddle.net/wergeld/xu5e2/)更新。

# python - 如何使用 for 循环将 2 个列表/数组与 python 进行比较？

> ID：14599307
> 
> 赞同：2
> 
> 时间：2013-01-30T08:11:26.090
> 
> 标签：python, arrays, list

我想将 ListA[0] 与 ListB[0]...等进行比较。

```
ListA = [itemA, itemB, itemC]
ListB = [true, false, true]

for item in ListA:
    if ListB[item] == True:
        print"I have this item" 
```

当前的问题是 [item] 不是数字，因此 ListB[item] 将不起作用。如果我想做这样的事情，正确的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:13:52.057

您可以通过这种方式遍历**列表**。

```
for a, b in zip(ListA, ListB):
    pass 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T08:16:15.307

您可以使用`itertools.compress`：

```
Docstring:
compress(data, selectors) --> iterator over selected data

Return data elements corresponding to true selector elements.
Forms a shorter iterator from selected data elements using the
selectors to choose the data elements. 
```

* * *

```
In [1]: from itertools import compress

In [2]: l1 = ['a','b','c','d']

In [3]: l2 = [True, False, True,False]

In [4]: for i in compress(l1,l2):
   ...:     print 'I have item: {0}'.format(i)
   ...:     
I have item: a
I have item: c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:41:42.840

尝试这个

```
for name,value in itertools.izip(ListA, ListB):
    if value == True:
        print "Its true" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T08:15:36.523

您可以使用枚举。

看这个例子：

[http://codepad.org/sJ31ytWk](http://codepad.org/sJ31ytWk)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T08:15:41.843

尝试这个：

```
for item, have_it in zip(ListA, ListB):
    if have_it:
        print "I have item", item 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T08:44:39.923

If you want to compare each element of ListA with the corresponding element of ListB (in other words the elements at the same index numbers), you can use a for loop that iterates over the index **numbers** rather than iterating over the actual elements of one list. So your code would be: (note that range(len(ListA)-1) gives you a list of the numbers from 0 to the length of ListA, minus 1 since it's 0-indexing)

```
for i in range(len(ListA)-1):
      //ListA[i] will give you the i'th element of ListA
      //ListB[i] will give you the i'th element of ListB 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-30T08:13:48.513

或者你可以这样做：

```
[ a for a,b in zip(ListA,ListB) if b==True ] 
```

# jakarta-ee - 在 Java EE 中构建诊所管理系统

> ID：14599311
> 
> 赞同：0
> 
> 时间：2013-01-30T08:11:36.393
> 
> 标签：jakarta-ee

我很想用 Java EE 开发一个简单的 CMS 应用程序。它包含以下模块：

1.  添加/搜索患者
2.  患者预约时间
3.  医生区（诊断、处方等）
4.  管理区域（添加/修改系统用户..等）

但是我对使用什么框架感到困惑：JSF，Grails id Struts。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:15:08.953

我真的推荐你 Grails 框架。您编写的所有活动都可以非常快速地实施。如果你对 Grails 不太了解，我向你推荐这本书： http: [//www.infoq.com/minibooks/grails-getting-started](http://www.infoq.com/minibooks/grails-getting-started)

它适用于旧版本的 Grails，但很多东西并没有改变，因此您可以快速启动您的项目。Grails 也有很好的文档，我在那里找到的大多数答案。

对于用户管理，我会推荐你​​ Spring Security Core 插件，它允许你实现角色管理等功能。

不要害怕 Groovy 语言，它与纯 Java 非常相似。很多程序员会准确地说：它是 Java。

祝你的项目好运！:)

# machine-learning - 如何评价 svd 类似项目？

> ID：14599313
> 
> 赞同：1
> 
> 时间：2013-01-30T08:11:42.340
> 
> 标签：machine-learning, recommendation-engine, svd

对于像为用户推荐商品这样的任务，我可以将数据集一分为二：训练数据集和测试数据集，我可以使用平均绝对误差来评估结果。但是，当我需要查找一个项目的相似项目时，我不知道如何评估结果。例如，

输入：

```
    userid,itemid,score
    1、123、5
    2, 222, 1
    ……

```

```
svd.similar(123) 
```

输出可能是：(222,0.98),(121,0.78)...我不知道从svd找到的类似项目好坏，如何评估结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:47:20.807

您可能想先定义一个相似函数（距离函数），例如余弦距离/欧几里得距离。然后可以确定和比较相似性。

# css - css中突出显示的字符占用的像素

> ID：14599315
> 
> 赞同：0
> 
> 时间：2013-01-30T08:11:50.383
> 
> 标签：css

我有一个宽 940 像素、高 40 像素的盒子

```
<!doctype html>
<head>
<meta charset='utf-8' />
<title>Html Positioning</title>
<style type='text/css'>
.top{
width:940px;
border:1px solid pink;
display:block;
min-height:40px;
}
.orange{
font-size:16px;
background-color:orange;
}
</style>
</head>
<body>
<p class="top"><span class="orange">v</span></p>
</body>
</html> 
```

我有`v`一个 `font-size 16 px`突出显示的字符，我想知道字符突出显示需要多少宽度和高度。

我有小提琴[http://jsfiddle.net/thiswolf/hzm65/](http://jsfiddle.net/thiswolf/hzm65/)

css 是否提供了一种了解此类突出显示的宽度和高度的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:53:04.773

通过“突出显示”，您显然是指给元素一些特殊的背景颜色。

没有办法知道 CSS 中的尺寸。宽度由字形的度量决定。高度由元素的行高确定（在示例情况下，由给定字体大小的浏览器默认字体的浏览器默认行高确定）。

In JavaScript, you can query them using the `offsetWidth` and `offsetHeight` properties.

# java - Hashmap 持有不同的数据类型作为值，例如 Integer、String 和 Object

> ID：14599317
> 
> 赞同：68
> 
> 时间：2013-01-30T08:12:06.127
> 
> 标签：java, types, hashmap

我需要创建一个键为整数的哈希图，它应该包含不同数据类型的多个值。例如，如果键是 msg id 并且值是

1.  字符串类型的消息
2.  时间类型的时间戳
3.  整数类型的计数
4.  整数类型的版本

那么如何将具有单个键的不同数据类型的值存储到hashmap中呢？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-30T09:01:18.420

如果你没有自己的数据类，那么你可以设计你的地图如下

```
`Map<Integer, Object> map=new HashMap<Integer, Object>();`
```

在从 MAP 检索值时，不要忘记使用“instanceof”运算符。

如果您有自己的 Data 类，那么您可以按如下方式设计地图

`Map<Integer, YourClassName> map=new HashMap<Integer, YourClassName>();`

```
import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

public class HashMapTest {
public static void main(String[] args) {
    Map<Integer,Demo> map=new HashMap<Integer, Demo>();
    Demo d1= new Demo(1,"hi",new Date(),1,1);
    Demo d2= new Demo(2,"this",new Date(),2,1);
    Demo d3= new Demo(3,"is",new Date(),3,1);
    Demo d4= new Demo(4,"mytest",new Date(),4,1);
    //adding values to map
    map.put(d1.getKey(), d1);
    map.put(d2.getKey(), d2);
    map.put(d3.getKey(), d3);
    map.put(d4.getKey(), d4);
    //retrieving values from map
    Set<Integer> keySet= map.keySet();
    for(int i:keySet){
        System.out.println(map.get(i));
    }
    //searching key on map
    System.out.println(map.containsKey(d1.getKey()));
    //searching value on map
    System.out.println(map.containsValue(d1));
}

}
class Demo{
    private int key;
    private String message;
    private Date time;
    private int count;
    private int version;

    public Demo(int key,String message, Date time, int count, int version){
        this.key=key;
        this.message = message;
        this.time = time;
        this.count = count;
        this.version = version;
    }
    public String getMessage() {
        return message;
    }
    public Date getTime() {
        return time;
    }
    public int getCount() {
        return count;
    }
    public int getVersion() {
        return version;
    }
    public int getKey() {
        return key;
    }
    @Override
    public String toString() {
        return "Demo [message=" + message + ", time=" + time
                + ", count=" + count + ", version=" + version + "]";
    }

} 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-09-27T06:36:39.737

在 Java 语言中有一些不同类型的变量，如下所示：

```
 message of type string
 timestamp of type time
 count of type integer
 version of type integer 
```

如果您使用像这样的 HashMap：

```
HashMap<String,Object> yourHash = new HashMap<String,Object>();
yourHash.put("message","message");
yourHash.put("timestamp",timestamp);
yourHash.put("count ",count);
yourHash.put("version ",version); 
```

如果你想使用 yourHash：

```
for(String key : yourHash.keySet()){
  String message = (String) yourHash.get(key);
  Datetime timestamp= (Datetime) yourHash.get(key);
  int timestamp= (int) yourHash.get(key);
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-01-30T08:19:57.260

首先定义一个类来存储你的数据

```
public class YourDataClass {

    private String messageType;
    private Timestamp timestamp;
    private int count;
    private int version;

    // your get/setters
    ...........
} 
```

然后初始化你的地图：

```
Map<Integer, YourDataClass> map = new HashMap<Integer, YourDataClass>(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-30T08:15:48.727

创建一个对象，该对象包含具有**适当名称**的以下属性。

1.  信息
2.  时间戳
3.  数数
4.  版本

并将其用作地图中的值。

如果您不希望使用对象相等性进行比较（例如，在将值插入地图时） ，还可以考虑相应地覆盖**equals()**和**hashCode()方法。**

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-06T08:01:22.013

只需像下面这样......

```
HashMap<String,Object> yourHash = new HashMap<String,Object>();
yourHash.put(yourKey+"message","message");
yourHash.put(yourKey+"timestamp",timestamp);
yourHash.put(yourKey+"count ",count);
yourHash.put(yourKey+"version ",version); 
```

返回时对值进行类型转换。例如：

```
 int count = Integer.parseInt(yourHash.get(yourKey+"count"));
//or
int count = Integer.valueOf(yourHash.get(yourKey+"count"));
//or
int count = (Integer)yourHash.get(yourKey+"count"); //or (int) 
```

# java - OpenGL ES 2.0 - 渲染深度缓冲区

> ID：14599319
> 
> 赞同：1
> 
> 时间：2013-01-30T08:12:14.530
> 
> 标签：java, opengl-es, opengl-es-2.0, libgdx, shadow-mapping

我已经阅读了一些教程并试图围绕 OpenGL ES 2.0。在尝试创建深度缓冲区时，我的 JVM 崩溃了。顺便说一句，我正在使用 LibGDX 框架。

```
 IntBuffer depthBuffer = BufferUtils.newIntBuffer(1);

  // AFAIK this puts 1 texture name into depthBuffer.
  Gdx.gl20.glGenTextures(1, depthBuffer);
  int depthBufferValue = depthBuffer.get();

  // I now bind the texture, so I can use it.
  Gdx.gl20.glBindTexture(GL20.GL_TEXTURE_2D, depthBufferValue); 
```

**我不知道做什么`glTexImage2D`，我想它应该生成深度纹理。**

下一行使 JVM 崩溃

```
Gdx.gl20.glTexImage2D(GL20.GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, Gdx.graphics.getWidth(),  Gdx.graphics.getHeight(), 0, GL_DEPTH_COMPONENT, GL_UNSIGNED_INT,  BufferUtils.newIntBuffer(1)); 
```

下一行导致`NullPointerException`

*我不知道我应该把什么作为`glTexImage2D`最后一个参数。我已经看到了他们放置的 iOS 示例`NULL`。*

```
Gdx.gl20.glTexImage2D(GL20.GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, Gdx.graphics.getWidth(), Gdx.graphics.getHeight(), 0, GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, null); 
```

其余代码

```
 // This code should attach the depth texture into frame buffer
  IntBuffer depthFrameBuffer = BufferUtils.newIntBuffer(1);
  glGenFramebuffers(1, depthFrameBuffer);
  int depthFrameBufferValue = depthBuffer.get();
  glBindFramebuffer(GL_FRAMEBUFFER, depthFrameBufferValue);
  glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, depthFrameBufferValue, 0);
  // I dont know what should I call next or what type of shader should I use 
```

请指出正确的方向，或者每当我在假设中犯了错误时。

最好有教程，我在 OpenGL ES 2.0 中没有找到太多关于阴影贴图的信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:33:05.147

libGDX 中有一个错误，要求`glTexImage2D`纹理参数不为空（这意味着必须始终有一些本地纹理数据要上传）。此更改已修复：[https](https://github.com/libgdx/libgdx/pull/228) ://github.com/libgdx/libgdx/pull/228 。这将是 0.9.8 之后版本的一部分（很可能是 0.9.9 版本）。

# javascript - javascript 自然排序

> ID：14599321
> 
> 赞同：2
> 
> 时间：2013-01-30T08:12:42.040
> 
> 标签：javascript, arrays, sorting, natural-sort

我有这个数组：

```
var columnArray =
['columnNumber1','columnNumber6','coulmnNumber7','columnNumber11','columnNumber12']; 
```

如果我这样做`columnArray.sort();`，它会给我：

```
columnArray:
['columnNumber1','columnNumber11','coulmnNumber12','columnNumber6','columnNumber7'] 
```

如何正确排序？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T08:19:24.427

试试这样：

```
arr = arr.sort(function(a, b) {
  return +/\d+/.exec(a)[0] - +/\d+/.exec(b)[0];
}); 
```

**编辑：**修复它现在工作，它有几个错误：http: [//jsbin.com/iwejik/1/edit](http://jsbin.com/iwejik/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:26:39.857

```
columnArray.sort(function(a,b) {
     return parseInt(a.match(/\d+/)[0],10) - parseInt(b.match(/\d+/)[0],10);
}); 
```

[演示](http://jsfiddle.net/rkZbu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-08T04:20:04.073

为此有一个 npm 包：[https](https://github.com/Bill4Time/javascript-natural-sort) : //github.com/Bill4Time/javascript-natural-sort。在许多情况下都可以正常工作。

# mysql - Mysql Grant 带有跳过数据库的选项

> ID：14599322
> 
> 赞同：0
> 
> 时间：2013-01-30T08:12:42.970
> 
> 标签：mysql, mysql5

我的一个数据库有大约 10000 个表（临时使用）。但是打开 phpmyadmin 的速度变慢了，我的版本是“2.6.0-pl2”。

由于这个版本，我不能使用`skip_db`phpmyadmin 的选项。

所以我决定让一个新用户有权访问除一个以外的所有数据库，但我不知道该怎么做。

那么有人可以告诉我如何在跳过一个数据库的情况下向所有数据库写入授权吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:17:06.223

无需为此问题创建用户。

使用 show database 命令，您将获得 db 列表。

在 phpmyadmin 版本 "2.6.0-pl2" 中，您可以使用 show_db 变量并设置所有表，您的问题将得到解决

# math - 计算机程序相对于数学公式的优势

> ID：14599331
> 
> 赞同：0
> 
> 时间：2013-01-30T08:13:01.080
> 
> 标签：math, numerical-analysis

我不确定这是否是问这个问题的正确地方，如果不是，如果你们告诉我，我会删除它，但我的问题与将数学技术转移到程序中有关。我的问题是：

如果我要使用程序通过以下方法求解二次方程**`ax^2+bx+c=0`**：

```
x_1 = (-b-sign(b)*sqrt(b^2-4*a*c) ) / (2*a) 

x_2 = (c) / (a * x_1) 
```

与普通公式相比，使用计算机有什么优势？我知道它会减少所涉及的错误，但除此之外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:34:52.173

我假设您在问使用代码有什么区别

```
x1 = -b+sqrt(b*b-4*a*c)/(2*a);
x2 = -b-sqrt(b*b-4*a*c)/(2*a); 
```

和代码

```
q = (-b-sign(b)*sqrt(b*b-4*a*c))/2;
x1 = q/a;
x2 = c/q; 
```

《*C 语言中的数值食谱-科学计算的艺术-第二版*》一书只是说第二个代码将为您提供更准确的根。[您可以在http://apps.nrbook.com/c/index.html](http://apps.nrbook.com/c/index.html)在线查阅本书，您将在第 183 页和第 184 页的第*5.6 节二次和三次方程*中找到公式。

Higham 教授的书*Accuracy and Stability of Numerical Algorithms, 2nd Edition*有介绍部分*1.8。求解*进一步详细说明第二个代码的二次方程。也许你可以通过谷歌书籍通过查询阅读它`higham 1.8\. solving a quadratic equation`；在我看来，他只是谈论第二个代码的准确性和稳健性，而没有描述任何额外的优势。

如需更长的解释（在 Python Scilab 上下文中），您可以查看Michael Baudin 的*Scilab is not naive ：http:* [//forge.scilab.org/index.php/p/docscilabisnotnaive/downloads/get/scilabisnotnaive_v2.2 .pdf](http://forge.scilab.org/index.php/p/docscilabisnotnaive/downloads/get/scilabisnotnaive_v2.2.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:47:49.520

计算机程序是我所知道的几乎立即获得数百万个 和 值的解决方案的唯一`a`方法。`b``c`

自动化和加速重复的微积分任务是计算机最近流行的原因之一。

# javascript - 在我的 Jquery 中增加不能正常工作？

> ID：14599335
> 
> 赞同：0
> 
> 时间：2013-01-30T08:13:17.483
> 
> 标签：javascript, jquery, increment, hidden-field

我想在jquery中增加隐藏字段值，但是当我在将值初始化为隐藏字段之前打印值时它不会增加只是打印“2”我的代码是，

```
<script type="text/javascript">
    var k=0,j=0;
        $(document).ready(function () {
            $("#btnAdd").click(function () {
                var field = $("#field").val();
                 var DDL_fromProfession="<select name='ParametersFromProf' id='DDL_FromProYear'>";
                 for(var i=1950;i<2012;i++)
                 {
                 DDL_fromProfession +="<option text='"+i+"' value='"+i+"'>"+i+"</option>";
                 }
                 DDL_fromProfession +="</select>";
                var DDL_ToProfession="<select name='ParametersToProf'  id='DDL_ToProYear'>";
                for(var i=1950;i<2012;i++)
                 {
                 DDL_ToProfession +="<option text='"+i+"' value='"+i+"'>"+i+"</option>";
                 }
                 DDL_ToProfession +="</select>";
             k+=1;
                var newRow1="<tr><td align='center' style='font-size: large; color: #212121;' height='35px'>from"
                +DDL_fromProfession +" to "+DDL_ToProfession +"</td></tr>"
                +"<tr><td align='center' style='font-size:large;color:#212121;' height'35px'>"
                +"<input type='checkbox' name='chkbx_CurrPro"+k+"' value='Yes'>I currently work here</input>"
                +"<input type='hidden' id='hide' name='hidden' value='"+k+"'></input>";
               // alert(document.getElementByName("valPro").value);
                //alert($('input').attr('hidden'));
                //alert($('input#hide').val());

                var input = "<input name='parameters' id='field' type='text' />";
                var input1="<input name='parametersCompany' id='field' type='text'/>"
                var newRow = "<tr><td align='center' style='font-size: x-large; color: #212121;' height='35px'>" 
                + input + " at " +input1 +"</td></tr>";
                $('#controls').append(newRow);
                $('#controls').append(newRow1);
                var value = parseInt($(":hidden[name='hidden']").val()) + 1;
                alert(value);
            });
        });
    </script> 
```

隐藏领域：

```
 +"<input type='hidden' id='hide' name='hidden' value='"+k+"'></input>"; 
```

印刷价值：

```
 var value = parseInt($(":hidden[name='hidden']").val()) + 1;
                alert(value); 
```

希望你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:22:57.433

我想你想要隐藏值（`:hidden[name='hidden']`）= 2（`value`写在`alert`）？

然后你必须在`var value = parseInt($(":hidden[name='hidden']").val()) + 1;`=>之后写一行`$(":hidden[name='hidden']").val(value);`

在这种情况下，您的隐藏值是`1`您可以测试的`alert(parseInt($(":hidden[name='hidden']").val()))`

# macos - CFRunLoopAddSource：运行模式立即执行

> ID：14599336
> 
> 赞同：1
> 
> 时间：2013-01-30T08:13:25.623
> 
> 标签：macos, cocoa, accessibility-api

我正在尝试将观察者添加到活动窗口（可以是任何程序，而不仅仅是我的），以便它告诉我它是否**正在移动**。以下是我将观察者添加到运行循环的方法：

```
AXObserverAddNotification(m_observer, (AXUIElementRef)activeWindow, kAXMovedNotification, (__bridge void*)self);
CFRunLoopAddSource( [[NSRunLoop currentRunLoop] getCFRunLoop], AXObserverGetRunLoopSource(m_observer),kCFRunLoopDefaultMode ); 
```

与观察者关联的回调当前只是在输出窗口中打印一些内容。我观察到的是，当我在活动窗口（同样，这可能是**任何**应用程序的窗口）周围拖动时，没有任何输出，但是一旦我停止，就会输出多个 printf 结果。似乎对回调的调用排队，直到有一些空闲时间让它一次执行。

有没有办法在不等待空闲时间的情况下执行回调？也许一个 CFRunLoopMode 可以做到这一点？

# javascript - javascript中匿名函数的返回值

> ID：14599345
> 
> 赞同：0
> 
> 时间：2013-01-30T08:13:51.533
> 
> 标签：javascript, scope, anonymous-function

有人可以向我解释`checkX()`' 范围有什么问题吗？我怀疑这是错误的，匿名函数以某种方式阻止了它，但我不确定如何绕过它。

```
storage = chrome.storage;

function checkX(){
    var x = false;

    storage.sync.get(function(data){
        if(data.x == true){
                x = true;
                console.log(x); // << x : true
        }
    });

            console.log(x); // << x : false
    return x;
} 
```

console.log 结果顺序：

```
x : false
x : true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:17:23.177

两件事可能——也可能会——让你失望：

1.  JavaScript 区分大小写
2.  您使用的`get`方法是*异步*的，您的 IIFE 在执行传递的回调函数之前返回，因此`x`无论如何它都会在回调更改它之前返回值。

*编辑：*
该`get`方法只是一个getter，足够公平，但是之间有一个主要区别`chrome.storage.sync.get`，它使用谷歌同步获取数据，和`chrome.storage.local.get`使用对象（几乎）相同`localStorage`，具有事件的额外好处。至少，[Google 的文档](http://developer.chrome.com/apps/storage.html)乍一看是这样告诉我的？

*来自下面的评论：*
这里的问题是 JS 如何以及何时调用回调函数。即使 OP 使用的 getter 正在获取*本地*数据，IIFE 也必须先返回，然后 JS 作为单线程才能调用回调。这就是 IIFE 回归的原因`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:17:04.713

Javascript 区分大小写。您正在做的是创建一个全局变量`x`，`true`而局部变量`X`仍然存在`false`。

```
storage = chrome.storage;

function checkX(){
    var X = false;

    storage.sync.get(function(data){
        if(data.x == true){
            x = true;  <--- global variable
        }
    });

    return x;
} 
```

* * *

另一个问题是，如果`storage.sync.get`从“checkX”异步运行，这意味着首先您返回 x，只有稍后（在您返回它之后）才会执行您的函数。如果 storage.sync.get 是一个 ajax 调用，这肯定会发生。

# ios - ios JPEG 优化

> ID：14599350
> 
> 赞同：0
> 
> 时间：2013-01-30T08:14:03.017
> 
> 标签：ios, performance, optimization, jpeg

UITableView 中显示了许多图像（600 宽，固定高度），我想实现类似于 instagram 的视觉效果，如下所示：

1.  平滑滚动

2.  图像滚动回屏幕时没有“空白到图像”效果

3.  最低的内存成本

我正在使用 SDWebImage 来执行此操作，但是当 SDWebImage 下载图像时，它会将解压缩的图像数据缓存在内存中，这样可以快速显示多次但会占用大量内存，当应用程序收到内存不足警告时 SDImageCache 将刷新所有缓存的图像，当显示图像滚动回屏幕时，我们得到“空白到图像”。

并且我修改了一些代码来实现缓存压缩图像而不是缓存解压缩图像，但是新的问题来了：图像解压太慢，这次虽然我们没有得到“空白到图像”，但是每当显示图像时滚动就会延迟。

最后，我发现延迟是由JPEG解压缩引起的，所以我认为我需要使用GPU解压缩JPEG。但我不知道该怎么做，或者
以这种方式优化是完全错误的。有人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:36:47.247

我也不知道你试过什么。但是根据我之前的项目。我是这样做的：首先使用延迟加载机制（您可以看到`LazyTableImages`演示：[https](https://github.com/taufikobet/Fast-LazyTableImages) ://github.com/taufikobet/Fast-LazyTableImages ）。仅下载或加载可见图像。您必须使用另一个线程下载图像

第二个用合适的尺寸存储图片，你可以处理图片的尺寸和存储图片使用另一个线程不要在主线程中，一个合适尺寸的图片会为你加载图片节省很多时间，如果你存储大小不合适，当你加载图片时，imageView会处理图片的大小。

当你存储JPEG时，如果你想压缩你可以使用下面的方法。

```
UIKIT_EXTERN NSData *UIImageJPEGRepresentation(UIImage *image, CGFloat compressionQuality);  // return image as JPEG. May return nil if image has no CGImageRef or invalid bitmap format. compression is 0(most)..1(least) 
```

这只是我的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:13:44.057

我最近经常处理大图像（2000*1000），所以我做了很多研究。

首先，您可以了解有关快速解码 jpeg 文件的第三部分库的一些信息：[libjpeg-turbo](http://www.libjpeg-turbo.org/)。一个使用这个库的例子：[link Github](https://github.com/dhoerl/PhotoScrollerNetwork)

以下是解压缩/渲染图像问题的一些信息：检查链接[1](http://www.cocoanetics.com/2011/10/avoiding-image-decompression-sickness/) [链接2](http://www.benmcdowell.com/blog/2012/01/12/speeding-up-cgcontextdrawimage-calls-in-ios-4/)

# php - PHP 将 html 转换为 pdf 或将 html 转换为图像

> ID：14599356
> 
> 赞同：-4
> 
> 时间：2013-01-30T08:14:19.910
> 
> 标签：php, html, imagecreatefrompng

请向我提供转换 html tp 图像或将 html 转换为 pdf 的建议，`PHP` 如果您有任何代码，请告诉我.....提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:18:41.490

对于 PDF 转换，它将为您提供帮助。这会将 HTML 页面转换为 PDF 页面

**[HTML 到 PDF 转换器](http://code.google.com/p/dompdf/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T08:21:23.047

要使用 PHP 将 html 转换为 pdf，请尝试[TCPDF](http://www.tcpdf.org/)

[TCPDF](http://www.tcpdf.org/)是一个用于生成 PDF 文档的 FLOSS PHP 类。

[演示： http](http://www.tcpdf.org/examples.php) ://www.tcpdf.org/examples.php

# macos - rsession 空闲时的 CPU 使用率

> ID：14599359
> 
> 赞同：5
> 
> 时间：2013-01-30T08:14:23.780
> 
> 标签：macos, r, rstudio

我最近注意到我的 R / RStudio 安装存在问题。当我打开 RStudio 时，活动监视器中的 CPU 使用率显示 rsession 和 kernel_task 进程的使用率徘徊在 30% 左右，即使 R 处于空闲状态且没有运行任何东西。我知道这是对该问题的非常模糊的描述，我希望这里有人可以给我指点如何调试此问题或发布更多相关信息。

谢谢你。

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-12T21:34:16.727

如果您在一个特定的 Rstudio 项目中工作，并且该项目有很多文件（数百或数千个），Rstudio 可能正在尝试索引这些文件 -

我通过以下方式解决了这个问题：

1.  在项目中从 Rstudio IDE 中，
2.  转到 `Tools`->`Project Options`
3.  现在点击代码编辑
4.  取消选择`Index R Source Files`
5.  关闭一切并重新启动 Rstudio

> 编辑
> 
> `Index R source files`— 确定项目目录中的 R 源文件是否为代码导航编制索引（即转到文件/函数，转到函数定义）。通常这应该保持启用，但是如果您有一个包含数千个文件的项目目录并且担心监视和索引它们的开销，您可以在此处禁用索引。
> `Insert spaces for tab`— 确定制表键是否插入多个空格而不是制表符（软制表符）。配置每个软标签的空格数。
> `Text encoding`— 指定源文件的默认文本编码。请注意，与默认编码不匹配的源文件仍然可以使用`File : Reopen with Encoding`菜单命令正确打开。[资源](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects)

# sql - 规范化包含月度、年度和季度数据的表

> ID：14599362
> 
> 赞同：1
> 
> 时间：2013-01-30T08:14:34.310
> 
> 标签：sql, database-design, database-normalization

如何规范化此表：

```
Frequency (PK)    Year (PK)    Quarter (PK)    Month (PK)    Value
Monthly           2013         1               1             1
Quarterly         2013         1               0             2
Yearly            2013         0               0             3 
```

该表不是第二范式，因为当频率 = 年度值取决于主键的子集（频率、年份）

我想添加一个代理键。然后 Quarter 和 Month 列可以为空。

```
Surrogate (PK)    Frequency    Year    Quarter     Month     Value
1                 Monthly      2013    1           1         1
2                 Quarterly    2013    1           NULL      2
3                 Yearly       2013    NULL        NULL      3 
```

但这并不能解决问题，因为第二范式定义也适用于候选键。根据频率将表分成三个表听起来不是一个好主意，因为它会在我的业务逻辑中引入 if 语句：

```
if (frequency == Monthly) then select from DataMonthly 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:37:03.467

我将假设几年的数据可能看起来像这样。如我错了请纠正我。（我将忽略使用零是个好主意还是坏主意的问题。）

```
Frequency    Year    Quarter     Month     Value
--
Monthly      2012    1           1         1
Monthly      2012    1           2         2
Monthly      2012    1           3         3
Monthly      2012    2           4         4
Monthly      2012    2           5         5
Monthly      2012    2           6         6
Monthly      2012    3           7         7
Monthly      2012    3           8         8
Monthly      2012    3           9         9
Monthly      2012    4           10        10
Monthly      2012    4           11        11
Monthly      2012    4           12        12
Quarterly    2012    1           0         2
Quarterly    2012    2           0         5
Quarterly    2012    3           0         8
Quarterly    2012    4           0         11
Yearly       2012    0           0         3
Monthly      2013    1           1         1
Monthly      2013    1           2         2
Monthly      2013    1           3         3
Monthly      2013    2           4         4
Monthly      2013    2           5         5
Monthly      2013    2           6         6
Monthly      2013    3           7         7
Monthly      2013    3           8         8
Monthly      2013    3           9         9
Monthly      2013    4           10        10
Monthly      2013    4           11        11
Monthly      2013    4           12        12
Quarterly    2013    1           0         2
Quarterly    2013    2           0         5
Quarterly    2013    3           0         8
Quarterly    2013    4           0         11
Yearly       2013    0           0         3 
```

从这些数据中，我们可以推断出两个函数依赖关系。函数依赖回答了这样一个问题：“给定一组属性‘X’的一个值，我们是否知道一组属性‘Y’的一个且只有一个值？”

*   {年、季度、月}->频率
*   {年、季度、月}->值

给定属性集 {Year, Quarter, Month} 的一个值，我们知道属性集 {Frequency} 的一个且只有一个值。并且给定属性集 {Year, Quarter, Month} 的一个值，我们知道属性集 {Value} 的一个且只有一个值。

您遇到的问题包括“频率”作为主键的一部分。真的不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:04:17.110

该表可能没有`[Frequency]`and`[Quarter]`列。

你为什么要把这些放进去？在此表中预先计算季度和年度值是否有任何附加值？*评论：因为它的价值不仅仅是它的月份的总和*。

所以`[Quarter]`是强制性的。

这也可以：

```
Year (PK)    Quarter (PK)    Month (PK)    Value
2013         1               1             1
2013         1               0             2
2013         0               0             3 
```

年度结果：

```
SELECT 
    [Value] 
FROM [Table1] 
WHERE [Year] = 2013 AND [Quarter] = 0 AND [Month] = 0 
```

季度业绩：

```
SELECT 
    [Value]
FROM [Table1] 
WHERE [Year] = 2013 AND [Quarter] = 1 AND [Month] = 0 
```

每月结果：

```
SELECT 
    [Value] AS [Results] 
FROM [Table1] 
WHERE [Year] = 2013 AND [Quarter] = 1 AND [Month] = 1 
```

这对你有用吗？

# javascript - `setInterval` 是否会阻止用户输入？

> ID：14599369
> 
> 赞同：1
> 
> 时间：2013-01-30T08:14:52.813
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我在我的网络应用程序中制作了聊天系统。
这是带有消息的输入字段的基本聊天。

我只包装了messages_section，然后我`setInterval`用来部分加载它，每1秒加载一次。
但是，我在这里发现了奇怪的行为。

当我在输入字段中输入内容时，每次`setInterval`加载时都会以某种方式输入输入的单词。

现在看来，这只影响使用 FireFox 浏览:(

我`setInterval`想不会影响输入字段，除非输入字段设置在

这些是我的代码。我想知道为什么以及如何解决

**jQuery**

```
<script type="text/javascript">
//<![CDATA[
        jQuery(document).ready(function () {
            refreshPartial();
            setInterval(refreshPartial, 1000)
        });

        function refreshPartial() {
          $.ajax({
            url: "/communities/setinterval_part?page=",
            type: "GET",
            dataType: "script",
          });
        }
//]]>
</script> 
```

**HTML**

```
 <form accept-charset="UTF-8" action="/communities/new_comments" class="new_comment" data-remote="true" id="new_comment" method="post">
      <input class="chat" id="input" name="comment[body]" type="text" />  
      <button type="submit" class="btn">submit</button>
  <form>

  <span id="messages_section">
       here comes messages!
  </span> 
```

**setinterval_part.js.erb**

```
$('#messages_section').html("<%= j(render(:partial => 'communities/comment')) %>");
<% if @post %>$('#body_input').val('');<% end %> 
```

**社区控制器.rb**

```
def setinterval_part
        @comments = @community.comment_threads.order("updated_at DESC").page(params[:page]).per(@number_of_comments_to_display)
        @comment = @community.comment_threads.build

    respond_to do |format|
        format.js 
    end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:27:36.187

首先，我建议您在这种情况下不要使用 setInterval。如果您的服务器需要超过 1 秒的时间来响应客户端怎么办？我认为您可以`refreshPartial()`直接从`setinterval_part.js.erb`.

因此，您需要在视图中对 JS-part 进行此更改：

```
jQuery(document).ready(function () {
  refreshPartial();
});

function refreshPartial() {
  $.ajax({
    url: "/communities/setinterval_part?page=",
    type: "GET",
    dataType: "script",
  });
} 
```

这要`setinterval_part.js.erb`：

```
$('#messages_section').html("<%= j(render(:partial => 'communities/comment')) %>");
<% if @post %>$('#body_input').val('');<% end %>
<% timeout_ms = 1000 %>
<% # some code that can determine current load of your server and increase timeout_ms %>
setTimeout(refreshPartial, <%= timeout_ms %>); 
```

# meteor - 我如何将 NewRelic 用于我的 Meteor 应用程序？

> ID：14599372
> 
> 赞同：9
> 
> 时间：2013-01-30T08:14:59.210
> 
> 标签：meteor

我在 Heroku 上托管我的 Meteor 应用程序，并希望拥有更多的监控功能，而不是`heroku logs --tail`. NewRelic 可能是一个不错的选择，尽管它的 node.js 代理仍处于测试阶段。有人尝试将它与 Meteor 应用程序一起使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-10T12:08:36.733

### 旧答案可在下面找到。

## 2014 年更新：

*撰写本文时的流星版本：`0.9.4`. 甜的。几乎是1.0！*

好的，我决定编辑它，因为它现在已经非常过时了。

在 Meteor 0.7+ 或附近（记不太清了），Meteor 中的 require 早就`__meteor_bootstrap__.require`从`Npm.require`

`var require = Npm.require; var newrelic = require('newrelic');`

这遵循**智能包模式中的 Npm**。[在此处阅读有关它的更多信息](http://www.meteorpedia.com/read/npm#NPM%20in%20a%20Smart%20Package)

懒人的摘录（感谢[Meteorpedia](http://www.meteorpedia.com)！）：

> ## 智能包中的 NPM
> 
> 1.  在您的`package.js`中，添加如下子句：
>     
>     
>     
>     Npm.depends({ "walk": "2.2.1" });
>     
>     
> 2.  使用`Npm.require`而不是要求，例如
>     
>     
>     
>     var http = Npm.require('http');

但说真的，请阅读流星百科的全部内容。值得你花时间。

**或者**，您也可以使用[arunoda](http://arunoda.me/)优秀的 NPM 智能包。在这里查看！[https://github.com/meteorhacks/npm](https://github.com/meteorhacks/npm)

### *旧答案*：

取自[本指南](https://coderwall.com/p/2fveyq)，您应该能够像安装任何其他 npm 模块一样安装 newrelic 代理。在您的流星项目文件夹中：

```
$ cd .meteor/local/build/server
$ npm install newrelic 
```

现在，您可以通过以下方式使用它`require`：

```
var require = __meteor_bootstrap__.require;
var newrelic = require('newrelic'); 
```

然后，按照此处指定的方式配置您的代理：[https ://github.com/newrelic/node-newrelic/#configuring-the-agent](https://github.com/newrelic/node-newrelic/#configuring-the-agent)

如果您需要使用该指南中指定的环境变量，请使用`meteor`设置的环境变量运行命令，例如：

```
$ NEW_RELIC_APP_NAME=mynodeapp meteor 
```

应该是这样，但我还没有真正广泛使用它，因为我还没有找到任何理由这样做。让我们知道你得到了什么！

# freeswitch - 我试图在 amazon linux Ami 服务器上安装 freeswitch。在让我收到以下错误期间：

> ID：14599374
> 
> 赞同：1
> 
> 时间：2013-01-30T08:15:28.350
> 
> 标签：freeswitch

```
 /usr/bin/ld: ../../libs/libedit/src/.libs/libedit.a(term.o): undefined reference
    /usr/bin/ld: note: 'tgetnum' is defined in DSO /lib64/libtinfo.so.5 so try addin
    /lib64/libtinfo.so.5: could not read symbols: Invalid operation
    collect2: ld returned 1 exit status
    make[5]: *** [fs_cli] Error 1
    make[4]: *** [/usr/src/freeswitch/libs/esl/libesl.so] Error 2
    make[3]: *** [mod_hash-all] Error 1
    make[2]: *** [all-recursive] Error 1
    make[1]: *** [all-recursive] Error 1
    make: *** [all] Error 2 
```

我尝试导出“ltinfo”库，并且我还将 LDFLAGS 设置为 -ltinfo，但这也很有效。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T08:27:30.870

I've got same error like you. You must install stable version.

```
git clone -b v1.2.stable git://git.freeswitch.org/freeswitch.git 
```

and follow the instruction again.

[http://wiki.freeswitch.org/wiki/Linux_Quick_Install_Guide](http://wiki.freeswitch.org/wiki/Linux_Quick_Install_Guide)

It will work.

# c++ - 我正在尝试将文本发送到 QTermWidget 的实例并人为地为用户按下回车键

> ID：14599377
> 
> 赞同：1
> 
> 时间：2013-01-30T08:15:34.937
> 
> 标签：c++, qt

我`QTermWidget`在我的 c++/qt4 项目中用作嵌入式终端，并且在模拟终端上的返回/输入按键时遇到问题。我在谷歌上花了几个小时寻找我能找到的任何东西，并通过所有`QTermWidget`.

我试过了

```
 QKeyEvent key(QEvent::KeyPress,Qt::Key_Return, Qt::NoModifier);
    QApplication::postEvent(console, &key); 
```

和

```
 QKeyEvent key(QEvent::KeyPress,Qt::Key_Return, Qt::NoModifier);
    QCoreApplication::postEvent(console, &key); 
```

也可以，但分别使用`QApplication::sendEvent()`and `QCoreApplication::sendEvent()`，其中*console*是`QTermWidget`. 我试图操纵。

我也试过

```
 QKeyEvent key(QKeyEvent::KeyPress, Qt::Key_Return, Qt::NoModifer); 
```

我是新手，所以请多多包涵，谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:52:34.827

我最终找到了答案，它是将转义序列发送到 QTermWidget 的实例

QTermWidget::sendText('\r')

# android - 带有图标和标题的 ActionBarSherlock 列表导航

> ID：14599385
> 
> 赞同：8
> 
> 时间：2013-01-30T08:16:06.320
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在开发一个应用程序，通过使用操作栏上的微调器来完成导航。微调器项目也需要包含图标，因此我为此创建了自定义布局。问题是微调器相对于其项目而言太宽了。我正在使用 ActionBarSherlock。到目前为止我写的代码：

**导航列表项.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" 
    android:layout_gravity="center_vertical"
    android:orientation="horizontal">

    <ImageView 
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:adjustViewBounds="true"
        android:padding="4dip"/>

    <TextView
        android:id="@+id/title"
        style="?attr/spinnerItemStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ellipsize="marquee"
        android:singleLine="true" 
        android:layout_gravity="center_vertical"/>

</LinearLayout> 
```

**navigation_list_dropdown_item.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="?attr/dropdownListPreferredItemHeight"
        android:adjustViewBounds="true"
        android:padding="4dip"/>

    <TextView
        android:id="@+id/title"
        style="?attr/spinnerDropDownItemStyle"
        android:layout_width="match_parent"
        android:layout_height="?attr/dropdownListPreferredItemHeight"
        android:ellipsize="marquee"
        android:singleLine="true" />

</LinearLayout> 
```

**NavigationListAdapter.java：**

```
public class NavigationListAdapter extends BaseAdapter{
    private Drawable[] mIcons;
    private String[] mTitles;
    private Context mContext;
    private LayoutInflater mInflator;

    public NavigationListAdapter(Context context, Drawable[] icons, String[] titles){
        mContext = context;
        mInflator = (LayoutInflater)mContext.getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        mIcons = icons;
        mTitles = titles;
    }

    @Override
    public int getCount() {
        return mTitles.length;
    }

    @Override
    public Object getItem(int position) {
        return mTitles[position];
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if(convertView == null){
            convertView = mInflator.inflate(R.layout.navigation_list_item, parent, false);
            holder = new ViewHolder();
            holder.icon = (ImageView)convertView.findViewById(R.id.icon);
            holder.title = (TextView)convertView.findViewById(R.id.title);
            convertView.setTag(holder);
        }else{
            holder = (ViewHolder)convertView.getTag();
        }

        holder.title.setText(mTitles[position]);
        holder.icon.setImageDrawable(mIcons[position]);

        return convertView;
    }   

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if(convertView == null){
            convertView = mInflator.inflate(R.layout.navigation_list_dropdown_item, parent, false);
            holder = new ViewHolder();
            holder.icon = (ImageView)convertView.findViewById(R.id.icon);
            holder.title = (TextView)convertView.findViewById(R.id.title);
            convertView.setTag(holder);
        }else{
            holder = (ViewHolder)convertView.getTag();
        }

        holder.title.setText(mTitles[position]);
        holder.icon.setImageDrawable(mIcons[position]);

        return convertView;
    }

    private class ViewHolder{
        public ImageView icon;
        public TextView title;
    }
} 
```

**活动的 onCreate 方法：**

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Context context = getSupportActionBar().getThemedContext();
        TypedArray ta = getResources().obtainTypedArray(R.array.leagues);
        Drawable[] logos = new Drawable[ta.length()];
        for(int i = 0; i < logos.length; i++){
            logos[i] = ta.getDrawable(i);
        }

        NavigationListAdapter adapter = new NavigationListAdapter(context, logos, 
                getResources().getStringArray(R.array.league_names));

        getSupportActionBar().setDisplayShowTitleEnabled(false);
        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
        getSupportActionBar().setListNavigationCallbacks(adapter, null);
    } 
```

问题说明： ![在此处输入图像描述](../Images/6eea5971b17200de0136833b5d8a5c55.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T07:59:40.903

也许将 navigation_list_dropdown_item.xml 中的 textview 的宽度更改为 wrap_content 会生效（如果更改 LinearLayout 的宽度不起作用）。你可以看到这个：[http](http://dandar3.blogspot.com.es/2013/03/actionbarsherlock-custom-list-navigation.html) ://dandar3.blogspot.com.es/2013/03/actionbarsherlock-custom-list-navigation.html 。

# eclipse - 如何更改 Eclipse 窗口图标

> ID：14599386
> 
> 赞同：0
> 
> 时间：2013-01-30T08:16:09.540
> 
> 标签：eclipse, window, icons, branding

我想永久更改我的 Eclipse 安装的图标。因此，当我运行 eclipse 时，它​​应该在**alt+tab列表中的****任务栏中**具有更改的图标（实际上无处不在，但那两个是我关心的）。不，我只有一个工作区。我只需要另一个图标。是否可以不安装其他插件？

 ****编辑：**
这个问题是关于编程的，因为我的编程效率低下，因为我必须在整个选项卡圆圈周围至少圈一次才能停在正确的图标处。我什至将 Alt+Tab 显示更改为看起来像 XP，因为它可以让眼睛快速识别正确的图标（-> 更有效的任务切换）。我喜欢旧的紫色圆圈，所以我可以在眨眼间找到它。不是它更灰，与背景融合得更多。

像这样（绿色“圆圈”是 Eclipse）：

![在此处输入图像描述](../Images/2897330ea288379358d0ea2238560952.png)

我使用：
**面向 Web 开发人员的 Eclipse Java EE IDE。
版本：Juno Service Release 1内部版本号
：20120920-0800
Windows 7**

eclipse 是否从 jar 文件运行？哪个负责主窗口？也许它包含图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:29:46.183

Eclipse 有一个用于标记的 API，可用于将 Eclipse 标记更改为自定义标记。这包括更改图标、应用程序名称、启动屏幕等。

[这篇 Eclipse 文章](http://www.eclipse.org/articles/Article-Branding/branding-your-application.html)描述了如何标记 Eclipse 3.x 应用程序。Eclipse 4.x 允许您创建自定义应用程序，它与 Eclipse 3.x 不同，但它还涉及为 XMl 文件提供一些细节，有关更多信息和教程，请参阅[Lars 的 Eclipse 产品和部署教程沃格尔](http://www.vogella.com/articles/EclipseProductDeployment/article.html)。

不幸的是，并非没有创建一个（非常）小插件。但是您确实需要将新图标存储在某个地方，因此创建这样的存储插件（包括带有一些扩展点的小 XML 文件）应该不会太困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:31:56.673

您可以按照所有 exe 文件通用的[How-to进行操作。](http://www.howtogeek.com/75983/stupid-geek-tricks-how-to-modify-the-icon-of-an-.exe-file/)

它涉及使用[Resource Hacker](http://www.angusj.com/resourcehacker/)来更改 exe 文件中使用的图标文件：

![在此处输入图像描述](../Images/0aaf985465da1c016252722d985d5900.png)

您可以在 eclipse.exe 上使用它，它应该会给您预期的结果。**

# java - 识别字符数组的有效字符

> ID：14599392
> 
> 赞同：0
> 
> 时间：2013-01-30T08:16:21.717
> 
> 标签：java, bytearray

我收到一个字符数组，其中包含有效和无效字符。我只需要检索有效的字符。我怎样才能做到这一点 ？

```
char[]ch = str.toCharacterArray();
for(int i=0;i<ch.length.i++){
    if(!Character.isLetter(ch[i]))
         system.out.println("not valid");
    else  
        system.out.println("valid");
} 
```

我认为上面的代码不起作用，因为我对字符数组中的所有有效和无效字符都无效。

通过含义字符我期待所有字母数字和特殊字符

**注意**：我从服务器获取值，因此字符数组包含有效和无效字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:09:58.633

尝试以下方法：

```
// assume input is not too large string
public static String extractPrintableChars(final String input) {
    String out = input;
    if(input != null) {
        char[] charArr = input.toCharArray();
        StringBuilder sb = new StringBuilder();  
        for (char ch : charArr) {
            if(Character.isDefined(ch) && !Character.isISOControl(ch)) {
                sb.append(ch);
            }
        }
        out = sb.toString();
    }
    return out;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:32:20.980

查看 Java 中可用的 Matcher 类。我认为在没有最大上限之前循环遍历所有字符是不明智的。

```
/[^0-9]+/g, '' 
```

使用上面的正则表达式，它将清除除数字以外的所有字符并注意。根据您的需要对其进行修改。

关于普尼斯

# windows - 如何修改win键盘快捷键？

> ID：14599395
> 
> 赞同：0
> 
> 时间：2013-01-30T08:16:30.243
> 
> 标签：windows, autohotkey

我将 Windows 任务栏设置为自动隐藏。所以我想要一个键盘快捷键可以快速显示它。“Win+T”可以做到，但是很难按。

所以，我想将“Win+T”修改为“Win+A”。我认为 AutoHotKey 可以做到，但我不知道如何编写脚本。

这是我想要做的：
1.当任务栏被隐藏时，“Win+A”可以显示它。
2.当任务栏显示时，“Win+A”可以隐藏它。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:51:10.290

您是否尝试过以下操作？

```
#a::Send, #t 
```

# postgresql - 如何正确使用 dblink_build_sql_insert (postgreSQL)

> ID：14599397
> 
> 赞同：1
> 
> 时间：2013-01-30T08:16:43.607
> 
> 标签：postgresql, dblink

我找不到一个例子来说明它应该如何用于只有一个 PK 字段的表。

我的尝试看起来像这样：

```
CREATE EXTENSION IF NOT EXISTS dblink;

select dblink_build_sql_insert('table_name'::text, '1'::int2vector, 1::int2, '{"12345"}'::text[], '{"column1", "column2", "column3", "column4"}'::text[]); 
```

它不断抛出错误“目标键数组长度必须匹配键属性的数量”。正如我所看到的，我告诉他键属性的数量是 1，目标键数组长度有 1 个项目。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:09:28.730

如果我正确阅读了这些示例，我认为您需要执行类似的操作

```
select dblink_build_sql_insert(
     'table_name'::text, 
     '1'::int2vector, 
      1::int2,  -- num of pkey values
      '{"12345"}'::text[], -- old pkey 
     '{"column1"}'::text[] -- new pkey
); 
```

# php - 如何将特定 URL 处的 .txt 文件导入 PHP 数组？

> ID：14599399
> 
> 赞同：1
> 
> 时间：2013-01-30T08:16:48.677
> 
> 标签：php, arrays, proxy, get

如何从 URL 的 .txt 文件中导入代理定义（文本格式）作为数组`http://domain.com/proxy.txt`？

这是代码：

（手动更新）

```
$proxy_array = array("IP:PORT:USER:PASSWORD",
"IP:PORT:USER:PASSWORD",
"IP:PORT:USER:PASSWORD",
"IP:PORT:USER:PASSWORD",
"IP:PORT:USER:PASSWORD",
"IP:PORT:USER:PASSWORD",
"IP:PORT:USER:PASSWORD"); 
```

（自动更新？）

```
$proxy_array = array("http://domain.com/proxy.txt"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:30:45.337

该[`file()`](http://www.php.net/manual/en/function.file.php)函数读取一个文件并为每行创建一个包含 1 个条目的数组。您也可以将它与 URL 一起使用。

```
$proxy_array = file("http://domain.com/proxy.txt"); 
```

# php - 如何获得 ISO 3166-1 兼容的国家代码？

> ID：14599400
> 
> 赞同：5
> 
> 时间：2013-01-30T08:16:49.410
> 
> 标签：php, iso-3166

我正在按国家/地区名称显示时区列表。

如此处回答： [PHP/Zend 框架中的国家到时区](https://stackoverflow.com/questions/2826419/country-to-timezones-in-php-zend-framework)

我想打电话`DateTimeZone::listIdentifiers(DateTimeZone::PER_COUNTRY, 'US')`按国家列出所有时区。

有没有简单的方法来获取 ISO 3166-1 兼容的国家代码列表及其在 PHP（PHP 5.3）中的相应名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T13:34:39.050

我刚刚从 Riccardo Zorn 提到的链接中编制了一份清单。

```
$country_name_to_code = array(
    'AFGHANISTAN' => 'AF',
    // 'AKROTIRI' => '*',
    'ALBANIA' => 'AL',
    'ALGERIA' => 'DZ',
    'AMERICAN SAMOA' => 'AS',
    'ANDORRA' => 'AD',
    'ANGOLA' => 'AO',
    'ANGUILLA' => 'AI',
    'ANTARCTICA' => 'AQ',
    'ANTIGUA AND BARBUDA' => 'AG',
    'ARGENTINA' => 'AR',
    'ARMENIA' => 'AM',
    'ARUBA' => 'AW',
    // 'ASHMORE AND CARTIER ISLANDS' => '*',
    'AUSTRALIA' => 'AU',
    'AUSTRIA' => 'AT',
    'AZERBAIJAN' => 'AZ',
    'BAHAMAS, THE' => 'BS',
    'BAHRAIN' => 'BH',
    // 'BAKER ISLAND' => '*',
    'BANGLADESH' => 'BD',
    'BARBADOS' => 'BB',
    // 'BASSAS DA INDIA' => '*',
    'BELARUS' => 'BY',
    'BELGIUM' => 'BE',
    'BELIZE' => 'BZ',
    'BENIN' => 'BJ',
    'BERMUDA' => 'BM',
    'BHUTAN' => 'BT',
    'BOLIVIA' => 'BO',
    'BOSNIA AND HERZEGOVINA' => 'BA',
    'BOTSWANA' => 'BW',
    'BOUVET ISLAND' => 'BV',
    'BRAZIL' => 'BR',
    'BRITISH INDIAN OCEAN TERRITORY' => 'IO',
    'BRUNEI' => 'BN',
    'BULGARIA' => 'BG',
    'BURKINA FASO' => 'BF',
    'BURMA' => 'MM',
    'BURUNDI' => 'BI',
    'CAMBODIA' => 'KH',
    'CAMEROON' => 'CM',
    'CANADA' => 'CA',
    'CAPE VERDE' => 'CV',
    'CAYMAN ISLANDS' => 'KY',
    'CENTRAL AFRICAN REPUBLIC' => 'CF',
    'CHAD' => 'TD',
    'CHILE' => 'CL',
    'CHINA' => 'CN',
    'CHRISTMAS ISLAND' => 'CX',
    // 'CLIPPERTON ISLAND' => '*',
    'COCOS (KEELING) ISLANDS' => 'CC',
    'COLOMBIA' => 'CO',
    'COMOROS' => 'KM',
    'CONGO (BRAZZAVILLE) ' => 'CG',
    'CONGO (KINSHASA)' => 'CD',
    'COOK ISLANDS' => 'CK',
    // 'CORAL SEA ISLANDS' => '*',
    'COSTA RICA' => 'CR',
    'CÔTE D’IVOIRE' => 'CI',
    'CROATIA' => 'HR',
    'CUBA' => 'CU',
    'CURAÇAO' => 'CW',
    'CYPRUS' => 'CY',
    'CZECH REPUBLIC' => 'CZ',
    'DENMARK' => 'DK',
    // 'DHEKELIA' => '*',
    'DJIBOUTI' => 'DJ',
    'DOMINICA' => 'DM',
    'DOMINICAN REPUBLIC' => 'DO',
    'ECUADOR' => 'EC',
    'EGYPT' => 'EG',
    'EL SALVADOR' => 'SV',
    'EQUATORIAL GUINEA' => 'GQ',
    'ERITREA' => 'ER',
    'ESTONIA' => 'EE',
    'ETHIOPIA' => 'ET',
    // 'ETOROFU, HABOMAI, KUNASHIRI, AND SHIKOTAN ISLANDS' => '*',
    // 'EUROPA ISLAND' => '*',
    'FALKLAND ISLANDS (ISLAS MALVINAS)' => 'FK',
    'FAROE ISLANDS' => 'FO',
    'FIJI' => 'FJ',
    'FINLAND' => 'FI',
    'FRANCE' => 'FR',
    'FRENCH GUIANA' => 'GF',
    'FRENCH POLYNESIA' => 'PF',
    'FRENCH SOUTHERN AND ANTARCTIC LANDS' => 'TF',
    'GABON' => 'GA',
    'GAMBIA, THE' => 'GM',
    // 'GAZA STRIP' => '*',
    'GEORGIA' => 'GE',
    'GERMANY' => 'DE',
    'GHANA' => 'GH',
    'GIBRALTAR' => 'GI',
    // 'GLORIOSO ISLANDS' => '*',
    'GREECE' => 'GR',
    'GREENLAND' => 'GL',
    'GRENADA' => 'GD',
    'GUADELOUPE' => 'GP',
    'GUAM' => 'GU',
    'GUATEMALA' => 'GT',
    'GUERNSEY' => 'GG',
    'GUINEA' => 'GN',
    'GUINEA-BISSAU' => 'GW',
    'GUYANA' => 'GY',
    'HAITI' => 'HT',
    'HEARD ISLAND AND MCDONALD ISLANDS' => 'HM',
    'HONDURAS' => 'HN',
    'HONG KONG' => 'HK',
    // 'HOWLAND ISLAND' => '*',
    'HUNGARY' => 'HU',
    'ICELAND' => 'IS',
    'INDIA' => 'IN',
    'INDONESIA' => 'ID',
    'IRAN' => 'IR',
    'IRAQ' => 'IQ',
    'IRELAND' => 'IE',
    'ISLE OF MAN' => 'IM',
    'ISRAEL' => 'IL',
    'ITALY' => 'IT',
    'JAMAICA' => 'JM',
    // 'JAN MAYEN' => '*',
    'JAPAN' => 'JP',
    // 'JARVIS ISLAND' => '*',
    'JERSEY' => 'JE',
    // 'JOHNSTON ATOLL' => '*',
    'JORDAN' => 'JO',
    // 'JUAN DE NOVA ISLAND' => '*',
    'KAZAKHSTAN' => 'KZ',
    'KENYA' => 'KE',
    // 'KINGMAN REEF' => '*',
    'KIRIBATI' => 'KI',
    'KOREA, NORTH' => 'KP',
    'KOREA, SOUTH' => 'KR',
    // 'KOSOVO' => '*',
    'KUWAIT' => 'KW',
    'KYRGYZSTAN' => 'KG',
    'LAOS' => 'LA',
    'LATVIA' => 'LV',
    'LEBANON' => 'LB',
    'LESOTHO' => 'LS',
    'LIBERIA' => 'LR',
    'LIBYA' => 'LY',
    'LIECHTENSTEIN' => 'LI',
    'LITHUANIA' => 'LT',
    'LUXEMBOURG' => 'LU',
    'MACAU' => 'MO',
    'MACEDONIA' => 'MK',
    'MADAGASCAR' => 'MG',
    'MALAWI' => 'MW',
    'MALAYSIA' => 'MY',
    'MALDIVES' => 'MV',
    'MALI' => 'ML',
    'MALTA' => 'MT',
    'MARSHALL ISLANDS' => 'MH',
    'MARTINIQUE' => 'MQ',
    'MAURITANIA' => 'MR',
    'MAURITIUS' => 'MU',
    'MAYOTTE' => 'YT',
    'MEXICO' => 'MX',
    'MICRONESIA, FEDERATED STATES OF' => 'FM',
    // 'MIDWAY ISLANDS' => '*',
    'MOLDOVA' => 'MD',
    'MONACO' => 'MC',
    'MONGOLIA' => 'MN',
    'MONTENEGRO' => 'ME',
    'MONTSERRAT' => 'MS',
    'MOROCCO' => 'MA',
    'MOZAMBIQUE' => 'MZ',
    'NAMIBIA' => 'NA',
    'NAURU' => 'NR',
    // 'NAVASSA ISLAND' => '*',
    'NEPAL' => 'NP',
    'NETHERLANDS' => 'NL',
    'NEW CALEDONIA' => 'NC',
    'NEW ZEALAND' => 'NZ',
    'NICARAGUA' => 'NI',
    'NIGER' => 'NE',
    'NIGERIA' => 'NG',
    'NIUE' => 'NU',
    'NORFOLK ISLAND' => 'NF',
    'NORTHERN MARIANA ISLANDS' => 'MP',
    'NORWAY' => 'NO',
    'OMAN' => 'OM',
    'PAKISTAN' => 'PK',
    'PALAU' => 'PW',
    // 'PALMYRA ATOLL' => '*',
    'PANAMA' => 'PA',
    'PAPUA NEW GUINEA' => 'PG',
    // 'PARACEL ISLANDS' => '*',
    'PARAGUAY' => 'PY',
    'PERU' => 'PE',
    'PHILIPPINES' => 'PH',
    'PITCAIRN ISLANDS' => 'PN',
    'POLAND' => 'PL',
    'PORTUGAL' => 'PT',
    'PUERTO RICO' => 'PR',
    'QATAR' => 'QA',
    'REUNION' => 'RE',
    'ROMANIA' => 'RO',
    'RUSSIA' => 'RU',
    'RWANDA' => 'RW',
    'SAINT BARTHELEMY' => 'BL',
    'SAINT HELENA, ASCENSION, AND TRISTAN DA CUNHA' => 'SH',
    'SAINT KITTS AND NEVIS' => 'KN',
    'SAINT LUCIA' => 'LC',
    'SAINT MARTIN' => 'MF',
    'SAINT PIERRE AND MIQUELON' => 'PM',
    'SAINT VINCENT AND THE GRENADINES' => 'VC',
    'SAMOA' => 'WS',
    'SAN MARINO' => 'SM',
    'SAO TOME AND PRINCIPE' => 'ST',
    'SAUDI ARABIA' => 'SA',
    'SENEGAL' => 'SN',
    'SERBIA' => 'RS',
    'SEYCHELLES' => 'SC',
    'SIERRA LEONE' => 'SL',
    'SINGAPORE' => 'SG',
    'SINT MAARTEN' => 'SX',
    'SLOVAKIA' => 'SK',
    'SLOVENIA' => 'SI',
    'SOLOMON ISLANDS' => 'SB',
    'SOMALIA' => 'SO',
    'SOUTH AFRICA' => 'ZA',
    'SOUTH GEORGIA AND SOUTH SANDWICH ISLANDS' => 'GS',
    'SOUTH SUDAN' => 'SS',
    'SPAIN' => 'ES',
    // 'SPRATLY ISLANDS' => '*',
    'SRI LANKA' => 'LK',
    'SUDAN' => 'SD',
    'SURINAME' => 'SR',
    // 'SVALBARD' => '*',
    'SWAZILAND' => 'SZ',
    'SWEDEN' => 'SE',
    'SWITZERLAND' => 'CH',
    'SYRIA' => 'SY',
    'TAIWAN' => 'TW',
    'TAJIKISTAN' => 'TJ',
    'TANZANIA' => 'TZ',
    'THAILAND' => 'TH',
    'TIMOR-LESTE' => 'TL',
    'TOGO' => 'TG',
    'TOKELAU' => 'TK',
    'TONGA' => 'TO',
    'TRINIDAD AND TOBAGO' => 'TT',
    // 'TROMELIN ISLAND' => '*',
    'TUNISIA' => 'TN',
    'TURKEY' => 'TR',
    'TURKMENISTAN' => 'TM',
    'TURKS AND CAICOS ISLANDS' => 'TC',
    'TUVALU' => 'TV',
    'UGANDA' => 'UG',
    'UKRAINE' => 'UA',
    'UNITED ARAB EMIRATES' => 'AE',
    'UNITED KINGDOM' => 'GB',
    'UNITED STATES' => 'US',
    'URUGUAY' => 'UY',
    'UZBEKISTAN' => 'UZ',
    'VANUATU' => 'VU',
    'VATICAN CITY' => 'VA',
    'VENEZUELA' => 'VE',
    'VIETNAM' => 'VN',
    'VIRGIN ISLANDS, BRITISH' => 'VG',
    'VIRGIN ISLANDS, UNITED STATES ' => 'VI',
    // 'WAKE ISLAND' => '*',
    'WALLIS AND FUTUNA' => 'WF',
    // 'WEST BANK' => '*',
    'WESTERN SAHARA' => 'EH',
    'YEMEN' => 'YE',
    'ZAMBIA' => 'ZM',
    'ZIMBABWE' => 'ZW');

$country_code_to_name = array(
    'AF' => 'Afghanistan',
    'AL' => 'Albania',
    'DZ' => 'Algeria',
    'AS' => 'American Samoa',
    'AD' => 'Andorra',
    'AO' => 'Angola',
    'AI' => 'Anguilla',
    'AQ' => 'Antarctica',
    'AG' => 'Antigua And Barbuda',
    'AR' => 'Argentina',
    'AM' => 'Armenia',
    'AW' => 'Aruba',
    'AU' => 'Australia',
    'AT' => 'Austria',
    'AZ' => 'Azerbaijan',
    'BS' => 'Bahamas, The',
    'BH' => 'Bahrain',
    'BD' => 'Bangladesh',
    'BB' => 'Barbados',
    'BY' => 'Belarus',
    'BE' => 'Belgium',
    'BZ' => 'Belize',
    'BJ' => 'Benin',
    'BM' => 'Bermuda',
    'BT' => 'Bhutan',
    'BO' => 'Bolivia',
    'BA' => 'Bosnia And Herzegovina',
    'BW' => 'Botswana',
    'BV' => 'Bouvet Island',
    'BR' => 'Brazil',
    'IO' => 'British Indian Ocean Territory',
    'BN' => 'Brunei',
    'BG' => 'Bulgaria',
    'BF' => 'Burkina Faso',
    'MM' => 'Burma',
    'BI' => 'Burundi',
    'KH' => 'Cambodia',
    'CM' => 'Cameroon',
    'CA' => 'Canada',
    'CV' => 'Cape Verde',
    'KY' => 'Cayman Islands',
    'CF' => 'Central African Republic',
    'TD' => 'Chad',
    'CL' => 'Chile',
    'CN' => 'China',
    'CX' => 'Christmas Island',
    'CC' => 'Cocos (keeling) Islands',
    'CO' => 'Colombia',
    'KM' => 'Comoros',
    'CG' => 'Congo (brazzaville) ',
    'CD' => 'Congo (kinshasa)',
    'CK' => 'Cook Islands',
    'CR' => 'Costa Rica',
    'CI' => 'CÔte D’ivoire',
    'HR' => 'Croatia',
    'CU' => 'Cuba',
    'CW' => 'CuraÇao',
    'CY' => 'Cyprus',
    'CZ' => 'Czech Republic',
    'DK' => 'Denmark',
    'DJ' => 'Djibouti',
    'DM' => 'Dominica',
    'DO' => 'Dominican Republic',
    'EC' => 'Ecuador',
    'EG' => 'Egypt',
    'SV' => 'El Salvador',
    'GQ' => 'Equatorial Guinea',
    'ER' => 'Eritrea',
    'EE' => 'Estonia',
    'ET' => 'Ethiopia',
    'FK' => 'Falkland Islands (islas Malvinas)',
    'FO' => 'Faroe Islands',
    'FJ' => 'Fiji',
    'FI' => 'Finland',
    'FR' => 'France',
    'GF' => 'French Guiana',
    'PF' => 'French Polynesia',
    'TF' => 'French Southern And Antarctic Lands',
    'GA' => 'Gabon',
    'GM' => 'Gambia, The',
    'GE' => 'Georgia',
    'DE' => 'Germany',
    'GH' => 'Ghana',
    'GI' => 'Gibraltar',
    'GR' => 'Greece',
    'GL' => 'Greenland',
    'GD' => 'Grenada',
    'GP' => 'Guadeloupe',
    'GU' => 'Guam',
    'GT' => 'Guatemala',
    'GG' => 'Guernsey',
    'GN' => 'Guinea',
    'GW' => 'Guinea-bissau',
    'GY' => 'Guyana',
    'HT' => 'Haiti',
    'HM' => 'Heard Island And Mcdonald Islands',
    'HN' => 'Honduras',
    'HK' => 'Hong Kong',
    'HU' => 'Hungary',
    'IS' => 'Iceland',
    'IN' => 'India',
    'ID' => 'Indonesia',
    'IR' => 'Iran',
    'IQ' => 'Iraq',
    'IE' => 'Ireland',
    'IM' => 'Isle Of Man',
    'IL' => 'Israel',
    'IT' => 'Italy',
    'JM' => 'Jamaica',
    'JP' => 'Japan',
    'JE' => 'Jersey',
    'JO' => 'Jordan',
    'KZ' => 'Kazakhstan',
    'KE' => 'Kenya',
    'KI' => 'Kiribati',
    'KP' => 'Korea, North',
    'KR' => 'Korea, South',
    'KW' => 'Kuwait',
    'KG' => 'Kyrgyzstan',
    'LA' => 'Laos',
    'LV' => 'Latvia',
    'LB' => 'Lebanon',
    'LS' => 'Lesotho',
    'LR' => 'Liberia',
    'LY' => 'Libya',
    'LI' => 'Liechtenstein',
    'LT' => 'Lithuania',
    'LU' => 'Luxembourg',
    'MO' => 'Macau',
    'MK' => 'Macedonia',
    'MG' => 'Madagascar',
    'MW' => 'Malawi',
    'MY' => 'Malaysia',
    'MV' => 'Maldives',
    'ML' => 'Mali',
    'MT' => 'Malta',
    'MH' => 'Marshall Islands',
    'MQ' => 'Martinique',
    'MR' => 'Mauritania',
    'MU' => 'Mauritius',
    'YT' => 'Mayotte',
    'MX' => 'Mexico',
    'FM' => 'Micronesia, Federated States Of',
    'MD' => 'Moldova',
    'MC' => 'Monaco',
    'MN' => 'Mongolia',
    'ME' => 'Montenegro',
    'MS' => 'Montserrat',
    'MA' => 'Morocco',
    'MZ' => 'Mozambique',
    'NA' => 'Namibia',
    'NR' => 'Nauru',
    'NP' => 'Nepal',
    'NL' => 'Netherlands',
    'NC' => 'New Caledonia',
    'NZ' => 'New Zealand',
    'NI' => 'Nicaragua',
    'NE' => 'Niger',
    'NG' => 'Nigeria',
    'NU' => 'Niue',
    'NF' => 'Norfolk Island',
    'MP' => 'Northern Mariana Islands',
    'NO' => 'Norway',
    'OM' => 'Oman',
    'PK' => 'Pakistan',
    'PW' => 'Palau',
    'PA' => 'Panama',
    'PG' => 'Papua New Guinea',
    'PY' => 'Paraguay',
    'PE' => 'Peru',
    'PH' => 'Philippines',
    'PN' => 'Pitcairn Islands',
    'PL' => 'Poland',
    'PT' => 'Portugal',
    'PR' => 'Puerto Rico',
    'QA' => 'Qatar',
    'RE' => 'Reunion',
    'RO' => 'Romania',
    'RU' => 'Russia',
    'RW' => 'Rwanda',
    'BL' => 'Saint Barthelemy',
    'SH' => 'Saint Helena, Ascension, And Tristan Da Cunha',
    'KN' => 'Saint Kitts And Nevis',
    'LC' => 'Saint Lucia',
    'MF' => 'Saint Martin',
    'PM' => 'Saint Pierre And Miquelon',
    'VC' => 'Saint Vincent And The Grenadines',
    'WS' => 'Samoa',
    'SM' => 'San Marino',
    'ST' => 'Sao Tome And Principe',
    'SA' => 'Saudi Arabia',
    'SN' => 'Senegal',
    'RS' => 'Serbia',
    'SC' => 'Seychelles',
    'SL' => 'Sierra Leone',
    'SG' => 'Singapore',
    'SX' => 'Sint Maarten',
    'SK' => 'Slovakia',
    'SI' => 'Slovenia',
    'SB' => 'Solomon Islands',
    'SO' => 'Somalia',
    'ZA' => 'South Africa',
    'GS' => 'South Georgia And South Sandwich Islands',
    'SS' => 'South Sudan',
    'ES' => 'Spain',
    'LK' => 'Sri Lanka',
    'SD' => 'Sudan',
    'SR' => 'Suriname',
    'SZ' => 'Swaziland',
    'SE' => 'Sweden',
    'CH' => 'Switzerland',
    'SY' => 'Syria',
    'TW' => 'Taiwan',
    'TJ' => 'Tajikistan',
    'TZ' => 'Tanzania',
    'TH' => 'Thailand',
    'TL' => 'Timor-leste',
    'TG' => 'Togo',
    'TK' => 'Tokelau',
    'TO' => 'Tonga',
    'TT' => 'Trinidad And Tobago',
    'TN' => 'Tunisia',
    'TR' => 'Turkey',
    'TM' => 'Turkmenistan',
    'TC' => 'Turks And Caicos Islands',
    'TV' => 'Tuvalu',
    'UG' => 'Uganda',
    'UA' => 'Ukraine',
    'AE' => 'United Arab Emirates',
    'GB' => 'United Kingdom',
    'US' => 'United States',
    'UY' => 'Uruguay',
    'UZ' => 'Uzbekistan',
    'VU' => 'Vanuatu',
    'VA' => 'Vatican City',
    'VE' => 'Venezuela',
    'VN' => 'Vietnam',
    'VG' => 'Virgin Islands, British',
    'VI' => 'Virgin Islands, United States ',
    'WF' => 'Wallis And Futuna',
    'EH' => 'Western Sahara',
    'YE' => 'Yemen',
    'ZM' => 'Zambia',
    'ZW' => 'Zimbabwe'); 
```

它可能对其他人有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-21T10:27:04.377

我已经维护[https://github.com/thephpleague/iso3166](https://github.com/thephpleague/iso3166)很长一段时间了。没什么花哨的，只是提供它所宣传的内容:-)

较早的版本支持 PHP 5.3，但我最近放弃了它，因为它完全报废了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-05T02:09:54.830

[您可以在http://country.io/names.json](http://country.io/names.json)获得一个包含国家代码到名称的 JSON 文件，您可以使用该文件将国家代码转换为名称：

```
// Either download the JSON in your code like this,
// or just paste the contents into your code
$country_names = json_decode(
    file_get_contents("http://country.io/names.json")
, true);

function get_name($cc) {
    return $country_names[$cc];
}

get_name("GB"); // => "United Kingdom" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T08:23:23.063

查看我能找到的最广泛和最新的列表：

*http earth-info.nima.mil/gns/html/gazetteers2.html*（旧链接见下文）

他们提供了一个 xls 下载，其中包含以下列：

```
FIPS      10-4  ISO 3166 digraph    ISO 3166 trigraph   ISO 3166 numeric    TLD IOC SOVEREIGNTY 
```

（查看 xls 文件中的第 4 页）

2016 年更新：链接失效，试试这个： http: [//geonames.nga.mil/gns/html/](http://geonames.nga.mil/gns/html/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-05T10:23:13.013

官方来源似乎是最新的，并且有不同的 ISO 3166 代码可用：

迎合：

*   阿尔法 2 代码
*   阿尔法 3 代码
*   数字

[https://www.iso.org/obp/ui/#search/code/](https://www.iso.org/obp/ui/#search/code/)

# php - mysql查询计算评分总和

> ID：14599401
> 
> 赞同：2
> 
> 时间：2013-01-30T08:16:50.270
> 
> 标签：php, mysql, sql, count

我有下表

```
id item_id rating 
 1    10     1
 2    10     2
 3    10     2
 4    10     3
 5    10     3
 6    10     3
 7    10     4 
```

如何编写查询以便获得如下结果：

```
$ratings = array(
    1 => 1,
    2 => 2,
    3 => 3,
    4 => 1,
    5 => 0
); 
```

我需要使用这个查询来编写一个 php 函数来计算这个函数的平均评分：

```
$total = 0;
$count = 0;
foreach($ratings as $number=>$frequency) {
  $total += $number * $frequency;
  $count += $frequency;
}
return $total / $count; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:18:58.580

```
SELECT
    rating,
    COUNT(rating) as Count
FROM rating
GROUP BY rating 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T08:19:12.440

表上的记录基本`COUNT`不会产生`5`，因为评级没有价值`5`。但是生成包含来自的值`1-5`并使用它们连接它们的子查询`LEFT JOIN`将达到您想要的结果。

```
SELECT a.rating, COUNT(b.rating) totalCount
FROM
    (
      SELECT 1 rating UNION SELECT 2 UNION
      SELECT 3 UNION SELECT 4 UNION
      SELECT 5
    ) a
    LEFT JOIN tableName b
      ON a.rating = b.rating
GROUP BY a.rating 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f879a/1)

# java - java-图像处理

> ID：14599405
> 
> 赞同：-9
> 
> 时间：2013-01-30T08:16:59.190
> 
> 标签：java, image, image-processing

我们执行时返回的值是多少

> 图像[i]>>18 & 0x30，图像[i]>>12 & 0xc，图像[i]>>6 & 0x3

到图像

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T08:23:22.800

它正在构建一个包含原始图像颜色的第 6、7、14、15、22 和 23 位的数字。即它正在从 24 位颜色生成粗略的 6 位颜色。

例如

```
000000000rrrrrrrrrggggggggbbbbbbbb 
```

成为最高位

```
rrbbgg 
```

# ios - IAP 测试用户出现未知错误

> ID：14599419
> 
> 赞同：0
> 
> 时间：2013-01-30T08:17:49.267
> 
> 标签：ios, in-app-purchase

我正在测试 IAP：

1）创建一个测试用户 2）在模拟器中运行应用程序 3）弹出iap对话框，说它在沙箱中 4）选择使用现有帐户，输入测试用户

但是它说“发生了未知错误”，为什么？

另外，我无法在设备上测试应用程序。它永远不会在沙盒环境中。是因为应用程序已经发布到 AppStore 了吗？我想添加新的 iaps，如何回到设备上的沙盒环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:30:58.690

对于应用内购买，请始终使用设备（切勿使用模拟器）。为此，请转到您的应用商店设置（通过设置应用程序）并注销任何可能已登录的真实用户。之后，进行测试购买并输入测试用户凭据。

# jakarta-ee - 在 JavaEE 6 中的 @PostConstruct 中出现异常后是否调用了 @PreDestroy？

> ID：14599421
> 
> 赞同：3
> 
> 时间：2013-01-30T08:18:10.217
> 
> 标签：jakarta-ee, jboss, ejb, java-ee-6, cdi

目前，我们在 JavaEE 6 上的 @PostConstruct 方法中遇到了一个更复杂的初始化问题。有几个地方可能会出错并且会出现异常。在那种情况下，我们可能有一个半初始化的 bean。

在这种情况下会调用@PreDestroy 方法吗？我们可以在那里检查我们的资源并在必要时释放它们。还是我们需要在@PostConstruct 中捕获所有异常并清理那里的所有内容？规范对此并不清楚（或者我可能没有找到）。

或者，由于缺乏规范，它是特定于供应商的吗？JBoss 7.x 上的情况如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:10:06.183

我认为 EJB3.1 规范在这种情况下很明确：如果您在 PostConstruct 中获取了非托管资源，那么您必须自己释放它们以防异常。

第 14.3.3 节 - 来自会话 Bean 容器操作的 PostConstruct 和 PreDestroy 方法的异常：记录异常或错误。如果是 Singleton，则回滚任何容器启动的事务。丢弃实例。

第 14.3.11 节 - 资源释放 当容器因为系统异常而丢弃一个实例时，容器应该释放该实例持有的所有资源，这些资源是通过在企业 bean 环境中声明的资源工厂获取的（参见第 16.7 小节）。

注意：虽然容器应该释放实例通过企业 bean 环境中声明的资源工厂获取的资源管理器的连接，但容器通常不能释放实例可能通过 JDK API 获取的“非托管”资源. 例如，如果实例打开了 TCP/IP 连接，大多数容器实现将无法释放连接。该连接最终会被 JVM 垃圾收集器机制释放。

以下 2 节指定当在 EJB 业务方法或 @PostContruct 内部发生 RuntimeException 时不调用 @PreDestroy 方法：

4.7.3 异常处理 RuntimeException 不是企业 bean 类的任何方法（包括业务方法和容器调用的生命周期回调拦截器方法）抛出的应用程序异常，导致转换到“不存在”状态. 异常处理在第 14 章中有详细描述。当多个此类方法应用于 bean 类时，有关生命周期回调拦截器方法的规则，请参见第 12.5.1 节。从客户端的角度来看，会话对象继续存在。客户端可以继续访问会话对象，因为容器可以将客户端的请求委托给另一个实例。

12.5.1Exceptions 生命周期回调拦截器方法可能会抛出系统运行时异常，但不会抛出应用程序异常。任何生命周期拦截器回调方法抛出的运行时异常都会导致 bean 实例及其拦截器在拦截器链展开后被丢弃 [59]。当 bean 和拦截器因此类异常而被丢弃时，不会调用 PreDestroy 回调：链中的生命周期回调拦截器方法应在拦截器链展开时执行任何必要的清理操作。

# android - 我们如何在 android 的 TabView 中创建子选项卡？

> ID：14599423
> 
> 赞同：0
> 
> 时间：2013-01-30T08:18:26.890
> 
> 标签：android, tabs

**我正在尝试创建一个在 Home_Tab Activity 中具有选项卡视图的 android 应用程序。它有 4 个标签。我想对视图进行一些修改，也就是说，当我单击第一个选项卡时，它会在该选项卡下显示 4 个子选项卡。如何创建它，我的代码如下**

```
 public class Home_tab extends TabActivity {

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home_main);

    Resources ressources = getResources(); 
    TabHost tabHost = getTabHost(); 

    // Android tab
    Intent intentAndroid = new Intent().setClass(this, CoalActivity.class);
    TabSpec tabSpecAndroid = tabHost

      .newTabSpec("Android")

      .setIndicator("", ressources.getDrawable(R.drawable.tab_dis))
      .setContent(intentAndroid);

    // Apple tab
    Intent intentApple = new Intent().setClass(this, EnergyActivity.class);
    TabSpec tabSpecApple = tabHost
      .newTabSpec("Apple")
      .setIndicator("", ressources.getDrawable(R.drawable.tab_foc))
      .setContent(intentApple);

    // Windows tab
    Intent intentWindows = new Intent().setClass(this, PowerActivity.class);
    TabSpec tabSpecWindows = tabHost
      .newTabSpec("Windows")
      .setIndicator("", ressources.getDrawable(R.drawable.tab_nor))
      .setContent(intentWindows);

    // Blackberry tab
    Intent intentBerry = new Intent().setClass(this, TopNewsActivity.class);
    TabSpec tabSpecBerry = tabHost
      .newTabSpec("Berry")
      .setIndicator("", ressources.getDrawable(R.drawable.tab_sel))
      .setContent(intentBerry);

    // add all tabs 
    tabHost.addTab(tabSpecAndroid);
    tabHost.addTab(tabSpecApple);
    tabHost.addTab(tabSpecWindows);
    tabHost.addTab(tabSpecBerry);

    //set Windows tab as default (zero based)
    tabHost.setCurrentTab(0);

              }

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:31:53.140

您需要再次创建类 (CoalActivity) 扩展 tabactivity。并创建新的标签规范简单......

# python - Python 中的输出格式：用定义的变量替换 %s

> ID：14599427
> 
> 赞同：0
> 
> 时间：2013-01-30T08:18:46.173
> 
> 标签：python

如何将 %s 替换为已定义/非空的变量字符串？或者更确切地说，这样做的 Pythonic 或语法糖是什么？

例子：

```
# Replace %s with the value if defined by either vehicle.get('car') or vehicle.get('truck')
# Assumes only one of these values can be empty at any given time
# The get function operates like http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.get
logging.error("Found duplicate entry with %s", vehicle.get('car') or vehicle.get('truck')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:24:44.227

你有没有尝试过这样的事情？

```
logging.error("Found duplicate entry with %s" % (vehicle.get('car') or vehicle.get('truck'))) 
```

或者如果`truck`也是空的，你可以返回一个默认值：

```
logging.error("Found duplicate entry with %s" % (vehicle.get('car') or vehicle.get('truck', 'default'))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:24:16.987

我想你想要这个：

```
'Found duplicate entry with %s' % (vehicle.get('car') or vehicle.get('truck')) 
```

这将用`'%s'`非空字符串替换 （假设只有一个是非空的）。如果两者都包含文本，它将被替换为的输出`vehicle.get('car')`

您还可以使用这种类型的字符串格式：

```
'Found duplicate entry with {0}'.format(vehicle.get('car') or vehicle.get('truck')) 
```

这将返回相同的结果。

# php - 如何从 PHP 中的 p7b 文件中提取证书

> ID：14599429
> 
> 赞同：1
> 
> 时间：2013-01-30T08:18:51.057
> 
> 标签：php, openssl, certificate

在命令行中，我可以成功地从我的 p7b 文件中提取所有 3 个证书：

```
openssl pkcs7 -in mscep.p7b -inform der -print_certs -outform PEM -out certfile.pem 
```

有没有办法在 PHP 中也能做到这一点？我试图四处搜索，但只有 openssl_pkcs7_.... 处理加密和解密的函数。

基本上我需要从我从 MSCEP 返回的链中提取 CA 根证书

# winapi - 如何显示“你好，世界！” 不使用高级汇编程序的好处？

> ID：14599430
> 
> 赞同：3
> 
> 时间：2013-01-30T08:18:54.737
> 
> 标签：winapi, assembly, x86, x86-64

我正在尝试显示“你好，世界！” 在 64 位 Windows 7 机器上使用 FASM，而无需使用现代汇编程序似乎大量提供的拐杖。

事实证明，这个相当简单的任务令人惊讶地令人沮丧，因为我能找到的每个示例和教程都坚持使用宏，包括预先编写的代码，或从高级语言导入库。我认为想要学习汇编的人通常这样做是为了对计算机的工作原理有一个直接而深入的了解。所有这些抽象和混淆似乎有损于该目的。

除了咆哮，我正在寻找可以显示“你好，世界！”的代码。在控制台上，除了直接访问 Windows API 之外，无需重用、包括和导入任何内容。尽管我知道许多汇编程序都附带提供对 Windows API 的访问的文件，但我宁愿不依赖它们。

此外，如果您对我可以使用哪些汇编程序或教程来更好地促进我的学习方法有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:07:27.600

“纯”Windows 编程的一个大问题是 Windows 要求程序包含导入部分，即必须向程序提供来自系统 DLL 的哪些函数——所谓的导入表。

该表不是程序的一部分，与汇编编程本身无关。此外，导入表结构复杂，手动构建不太方便。这就是为什么 FASM 为用户提供了一些标准的方式来构建这些导入表。

如果您的目标是学习汇编，那么正确的方法是阅读 FASM 手册，其中描述了这些宏，然后阅读任何 FASM 发行版中提供的示例代码，然后开始使用它们并专注于汇编编程.

**适度使用宏不会让你的程序少写汇编！**

[FASM 留言板](http://board.flatassembler.net)是提出问题和寻求帮助的好地方，但你毕竟必须做功课。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:50:18.677

Windows 下的每个运行进程都会将 kernel32 或 kernalbase 加载到其地址空间中，使用这一事实和 PEB 内部，您可以轻松访问任何 Windows 功能（前提是您具有正确的访问权限）。

[此](http://www.ciphermonk.net/message-box-fun.php)博客条目详细介绍了如何执行此操作以显示带有`MessageBoxA`.

老实说，除非您有一些极端的理由这样做，否则您最终只会浪费时间，而是使用提供的工具（在这种情况下是链接器，因此您可以访问任何 Windows API 而无需经过 10000 个障碍和循环）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:25:27.730

1.  向谷歌寻求帮助：[http ://board.flatassembler.net/topic.php?t=14034](http://board.flatassembler.net/topic.php?t=14034)
2.  自己试试

* * *

```
 ; Example of 64-bit PE program 

format PE64 GUI 
entry start 

section '.text' code readable executable 

  start: 
      sub     rsp,8*5         ; reserve stack for API use and make stack dqword aligned 

    mov     r9d,0 
    lea     r8,[_caption] 
    lea     rdx,[_message] 
    mov    rcx,0 
    call    [MessageBoxA] 

    mov     ecx,eax 
    call    [ExitProcess] 

section '.data' data readable writeable 

  _caption db 'Win64 assembly program',0 
  _message db 'Hello World!',0 

section '.idata' import data readable writeable 

  dd 0,0,0,RVA kernel_name,RVA kernel_table 
  dd 0,0,0,RVA user_name,RVA user_table 
  dd 0,0,0,0,0 

  kernel_table: 
    ExitProcess dq RVA _ExitProcess 
    dq 0 
  user_table: 
    MessageBoxA dq RVA _MessageBoxA 
    dq 0 

  kernel_name db 'KERNEL32.DLL',0 
  user_name db 'USER32.DLL',0 

  _ExitProcess dw 0 
    db 'ExitProcess',0 
  _MessageBoxA dw 0 
    db 'MessageBoxA',0 
```

* * *

使用[nasm](http://www.nasm.us/)编译从[这里](http://en.wikipedia.org/wiki/List_of_Hello_world_program_examples)获取的这个 hello world（16 位）代码：

```
.model tiny
.code
org 100h

main  proc

      mov    ah,9                       ; Display String Service
      mov    dx,offset hello_message    ; Offset of message (Segment DS is the right segment in .COM files)
      int    21h                        ; call DOS int 21h service to display message at ptr ds:dx

      retn                              ; returns to address 0000 off the stack 
                                        ; which points to bytes which make int 20h (exit program)

hello_message db 'Hello, world!$'

main  endp
end   main 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-01T06:22:17.163

我设法仅链接到一个库 ( `kernel32.dll`) 并引用了 3 个函数：

```
GetStdHandle

WriteConsole

ExitProcess 
```

下面的代码是我详尽的谷歌搜索的结果，以及我自己对 MS 文档的参考。

```
format PE console
entry start

include 'include\win32a.inc'

section '.data' data readable writable
     msg     db 'Hello World!',13,10,0
     len = $-msg
     dummy   dd ?

section '.code' readable writable executable

  start:

push STD_OUTPUT_HANDLE
call [GetStdHandle] ;STD_OUTPUT_HANDLE (DWORD)-11

push 0      ;LPVOID  lpReserved
push dummy  ;LPDWORD lpNumberOfCharsWritten
push len    ;DWORD   nNumberOfCharsToWrite
push msg    ;VOID    *lpBuffer;
push eax    ;HANDLE  hConsoleOutput
call [WriteConsole]

push 0
call [ExitProcess]

section '.idata' data import readable writable

library kernel32,'KERNEL32.DLL' 
include 'include\api\kernel32.inc' 
```

# php - 重新声明 random() 错误

> ID：14599432
> 
> 赞同：-2
> 
> 时间：2013-01-30T08:19:03.037
> 
> 标签：php

我基本上是想在我的用户系统的 index.php 文件中包含一个 php 文件。但是我遇到了一个错误。这是我使用的代码：

```
<?php include("usersystem/index.php"); ?> 
```

**错误：**

> 致命错误：无法在第 35 行的 /homepublic_html/global.php 中重新声明 random()（之前在 /home/public_html/upload.php:2 中声明）

**Upload.php**：[http](http://pastebin.com/YcJYF2hb) ://pastebin.com/YcJYF2hb global.php 在第 35 行我有：`}`，部分文件位于[http://pastebin.com/gMsiPa7Z](http://pastebin.com/gMsiPa7Z)

我不明白这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:24:21.597

您不能声明两个具有相同名称的函数。上面包含的两个片段都包含一个名为 random 定义的函数。我建议您将它们重命名为更具体。

# jquery - jQuery on() 方法，点击和元素类名称在页面上的任何位置触发

> ID：14599438
> 
> 赞同：0
> 
> 时间：2013-01-30T08:19:15.287
> 
> 标签：jquery, jquery-on

最近我将 jQuery 升级到 1.9，我现在的主要问题是将所有 live() 方法转换为 on()。

我在一些情况下取得了成功，但我还有一些其他的方法表现得很奇怪。

以以下为例：

```
$(document).on('click', '.clickReplace', function(e) {
     e.preventDefault();
     ...
}); 
```

'clickReplace' 类可以分配给 'a'、'span' 或 'div' 标记，并且可以在 ajax 调用后（动态）添加到 DOM。

当我使用上述内容时，每次单击页面上未分配此类的任何链接都会触发 e.preventDefault() - 我无法在页面之间导航 - 就好像它已绑定到“文档”而不是比文档树中具有指定类的元素。

知道可能是什么原因造成的，我应该怎么做才能使它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:39:55.557

我向每个人表示诚挚的歉意 - 你是绝对正确的 - 有一些不同的东西导致了这种行为，事实上我是用类而不是类名作为第二个参数传递对象（因为它是内部的一个方法对象字面量，它在外部调用，参数指示应该触发哪个元素）。

我有这种方式，这显然是行不通的：

```
$(document).on('click', $('.clickReplace'), function(e) { 
```

感谢大家的参与。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:27:58.047

使用时应小心`e.preventDefault()`。您有效地阻止了链接上点击事件的冒泡到达浏览器，这就是导致您的链接停止响应的原因。

* * *

回复评论 - 使用`on`相当于这样做：

```
$(document).click(function(e){
   if($(e.target).parents(".clickReplace").length>0){
      // run your code
   }
}); 
```

它不会在你没有绑定它们的元素上运行，所以问题不在这里

# jquery - 在 jquery 的“更改主题”菜单中删除一个类

> ID：14599440
> 
> 赞同：1
> 
> 时间：2013-01-30T08:19:22.247
> 
> 标签：jquery, twitter-bootstrap

我刚刚使用引导程序创建了一个测试网站，并且我有一个菜单，当您单击或悬停在链接上时，我会在其中获得一些突出显示效果。我用不同颜色的下拉列表更改我的主题。

如果我在主题列表中向下走，一切正常，但如果我转到第二个元素（例如）然后返回第一个元素，则单击突出显示与第二个元素相同。我的意思是，例如，如果第一个`li`是红色主题，第二个是蓝色，如果我选择蓝色，则单击和悬停突出显示为蓝色，但如果我切换回红色主题，则悬停为红色，但单击/活动突出显示为蓝色的。

我怎样才能解决这个问题？

这是一些代码

HTML

```
<div class="span3 well">
    <ul class="nav nav-list">
        <li class="nav-header">Menu</li>
        <li class="divider"></li>
        <li><a class="vald" id="home_knapp" href="#">Home</a></li>
        <li><a id="products_knapp" href="#">Products/Services</a></li>
        <li><a id="about_knapp" href="#">About me</a></li>
        <li><a id="contact_knapp" href="#">Contact</a></li>
        <li class="divider"></li>
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Themes<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li class="nav-header">Themes</li>
                <li><a id="default_theme" onclick="default_theme(); return false;" href="#">Default</a></li>
                <li><a id="red_theme" onclick="red_theme(); return false;" href="#">Red</a></li>
                <li><a id="green_theme" onclick="green_theme(); return false;" href="#">Green</a></li>
                <li><a id="yellow_theme" onclick="yellow_theme(); return false;" href="#">Yellow</a></li>
                <li><a id="pink_theme" onclick="pink_theme(); return false;" href="#">Pink</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

CSS

```
.default {
    text-shadow: none;
    color: #000000;
    background: #04928B;
    background-color: #04928B;
}

.red {
    text-shadow: none;
    color: #000000;
    background: #c41414;
    background-color: #c41414;
} 
```

jQuery

```
function default_theme() {
    $('html body').css({backgroundColor: '#04928B'});
        $("div .nav li a").click(function(){
            $(".nav .default").removeClass("default");
            $(this).addClass("default");
        });
        $(".nav a").hover(function() {
            $(".nav a").css({background: ''});
            $(this).css({background: '#04928B'});
        }, function() {
            $(".nav a").css({background: ''});
        });
}

function red_theme() {
    $('html body').css({backgroundColor: '#C41414'});
        $("div .nav li a").click(function(){
            $(".nav .red").removeClass("red");
            $(this).addClass("red");
        });
        $(".nav a").hover(function() {
            $(".nav a").css({background: ''});
            $(this).css({background: '#c41414'});

        }, function() {
            $(".nav a").css({background: ''});
        });
} 
```

# java - Spring 3 是否与 Acegi Security 一起使用？

> ID：14599444
> 
> 赞同：1
> 
> 时间：2013-01-30T08:19:37.487
> 
> 标签：java, spring, spring-security

我目前正在尝试将使用旧技术（Java 5、Spring 2.5、Hibernate 3、Acegi Security 等）的应用程序迁移到更新的技术。

但是，我想一步一步地做，这样我就不会在不知道它们来自哪里的情况下面临大量问题。到目前为止，我只设法升级到 Java 7。

现在，我想迁移到 Spring 3.2，但我不知道我的应用程序是否可以在没有重大更改的情况下使用 Spring 3.2 和 Acegi Security 运行。现在我知道我应该改用 Spring Security，但正如我所说，我想逐步迁移。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:40:06.580

它可能会起作用，它们不像 Spring Security 那样紧密耦合

# c# - 在 sqldatasource (aspnet) 中声明表变量

> ID：14599445
> 
> 赞同：0
> 
> 时间：2013-01-30T08:19:37.867
> 
> 标签：c#, asp.net, sql-server, sqldatasource

我有一个在 Microsoft SQL Server Management Studio 中尝试的查询，并且该查询工作正常：

```
DECLARE @tableVariable TABLE (fecha DATE, valor Float);
INSERT @tableVariable SELECT fecha, valor FROM table1;
SELECT * FROM @tableVariable 
```

当我转到 VisualStudio 并将此查询粘贴到 sqldatasource 中时，不起作用。

任何人都可以帮助我吗？

谢谢

**解决了**

最后，问题解决了，将标签移除`<SelectParameters> <asp:Parameter Name = "tableVariable" /> </SelectParameters>`到sqldatasource中。

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:22:09.300

尝试创建一个[存储过程](http://msdn.microsoft.com/en-us/library/ms187926.aspx)，如下所示：

```
CREATE PROCEDURE ComplexQuery
as
    DECLARE @tableVariable TABLE (fecha DATE, valor Float);
    INSERT @tableVariable SELECT fecha, valor FROM table1;

    -- more complex logic in here

    SELECT * FROM @tableVariable

go 
```

然后，在您的数据源中指定过程的名称。

例子：

```
 <asp:SqlDataSource
            id="SqlDataSource1"
            runat="server"
            ConnectionString="..."
            SelectCommandType="StoredProcedure"                
            SelectCommand="ComplexQuery">
        </asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:53:06.273

将声明的表转换为临时表不值得吗？

```
CREATE TABLE #tableVariable (fecha DATE, valor Float) 
```

稍后您将需要一个 DROP TABLE #tableVariable 以确保您正在清理内存，但我相信它会产生预期的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:01:28.817

我认为您不应该将长而复杂的查询放入 SqlDataSource - 这实际上是为了将表或视图绑定到数据网格，而不必在后面的代码中乱七八糟。如果您想运行一个复杂的查询，您应该设置一个存储过程来执行它并从 SqlCommand 调用它，或者将查询的文本放入 SqlCommand。无论哪种方式，我都不认为 SqlDataSource 是去这里的方式。

# ios - 有没有办法使用我的 ios 应用在 google+ 墙上发布图片？

> ID：14599446
> 
> 赞同：0
> 
> 时间：2013-01-30T08:19:40.583
> 
> 标签：ios, objective-c, google-plus

我检查了 API，但它允许发布 URL 而不是图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:23:44.430

根据我在互联网上阅读的内容，Google+ API ( [https://developers.google.com/+/mobile/ios/](https://developers.google.com/+/mobile/ios/) ) 目前不允许这样的上传。

相反，有些人一直在使用 Picasa Web SDK ( [https://developers.google.com/picasa-web/](https://developers.google.com/picasa-web/) )，因为它是 Google+ 图像的动力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:16:33.480

目前，无法以任何形式写入用户的 Stream。但是，您可以在我们的问题跟踪器中提出此功能请求，您可以在[https://developers.google.com/+/support](https://developers.google.com/+/support)找到它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T08:33:58.397

**编辑**：Google+ 历史记录已于 2013 年 2 月 26 日弃用

查看[Google+ 历史开发者预览版](https://developers.google.com/+/history/learn-more)。

History API 允许您记录不同[类型（文档）](https://developers.google.com/+/history/api/moments)的用户交互。

目前，这些交互仅显示在“历史记录”选项卡中（以及该帐户的所有其他 Google 活动）。从那里，用户可以分享到它的时间线。

这是一个开发者预览版，使用使用它的应用程序上线可能不是一个好主意。但它让您有机会开始为未来发展。我可以想象一个用户未来可以选择将某些类型的历史自动发布到它的时间线。

# wpf - 无法在 WPF 中编辑文本块内容

> ID：14599449
> 
> 赞同：10
> 
> 时间：2013-01-30T08:19:52.193
> 
> 标签：wpf, xaml, textblock

我正在开发我的第一个 WPF 应用程序，我注意到我无法编辑任何文本块中的文本值。

我似乎在这里找不到任何会阻止我更改它的错误...

```
<Label Content="Line Terminator" Grid.Row="0" Grid.Column="0" Margin="5"></Label>
<Border BorderThickness="1" BorderBrush="LightBlue" Grid.Row="0" Grid.Column="1" Margin="5">
    <TextBlock x:Name="txtLineTerm" Focusable="True" IsManipulationEnabled="True" Padding="3"></TextBlock>
</Border>
<Label Content="Field Terminator" Grid.Row="0" Grid.Column="2" Margin="5"></Label>
<Border BorderThickness="1" BorderBrush="LightBlue" Grid.Row="0" Grid.Column="3" Margin="5">
    <TextBlock x:Name="txtFieldTerm" Focusable="True" IsManipulationEnabled="True" Padding="3"></TextBlock>
</Border> 
```

任何人都可以看到问题吗？我觉得这里缺少一个概念。任何解释将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-30T08:21:45.760

TextBlock 不可编辑。请改用文本框。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T09:04:01.577

您可以使用[EditableTextBlock](http://www.codeproject.com/Articles/72544/Editable-Text-Block-in-WPF)如链接所示

# android - 在android中找不到PhoneGap类错误

> ID：14599459
> 
> 赞同：4
> 
> 时间：2013-01-30T08:20:43.377
> 
> 标签：android, cordova

我的 PhoneGap(Android) 应用程序遇到了一些问题。到目前为止，我明白，我已经做好了一切。这是我所做的。

1.  在 Eclipse 中创建项目后，我在 libs 文件夹中添加了 cordova-2.2.0.jar。
2.  然后我编辑了 AndroidManifest.xml 和 MainActivity.java
3.  我在 assets 文件夹中创建了 www 文件夹并保留了 cordova-2.2.0.js 和 index.html

所以，到目前为止一切都很好。但是当我运行这个程序时，它显示一个错误。我附上了屏幕截图和示例代码。

![在此处输入图像描述](../Images/548bc46cf07808de9d884592cece62ee.png)

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.hellopgap"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
        />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

MainActivity.java

```
package com.example.hellopgap;

import android.app.Activity;
import android.os.Bundle;
import org.apache.cordova.*;

public class MainActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }   
} 
```

索引.html

```
<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
        <script type="text/javascript" charset="utf-8">

            // Wait for Cordova to load
            //
            document.addEventListener("deviceready", onDeviceReady, false);

            // Cordova is ready
            //
            function onDeviceReady() {
                // Empty

            }

            // alert dialog dismissed
            function alertDismissed() {
                // do something
            }

            // Show a custom alertDismissed
            //
            function showAlert() {
                navigator.notification.alert(
                    'You are the winner!',  // message
                    alertDismissed,         // callback
                    'Game Over',            // title
                    'Done'                  // buttonName
                );
            }

    </script>

        <title>Notification Example</title>
    </head>
    <body>
        <div class="app">
            <h1>Apache Cordova</h1>
            <h3>This is sample PhoneGap apps</h3>
            <p><a href="#" onclick="showAlert(); return false;">Show Alert</a></p>
        </div>

    </body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-23T06:47:12.783

我以前也有同样的问题。我只需按照以下步骤操作即可开始工作：

*   转到选定项目的属性
*   转到java构建路径
*   选择“订购和导出”
*   启用所有检查（依赖项目）
*   现在只需清理并再次运行应用程序。

这个对我有用...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-18T22:43:37.510

好像您的应用程序 res/xml 目录中缺少 config.xml 。它作为 phonegap 发行版的一部分包含在 lib/android/res/xml/config.xml 中。将该文件复制到您的 res/xml 目录中，您应该没问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-13T10:35:23.180

我遇到了类似的问题，今天我发现在 Javascript 中，除非调用了 deviceready 事件；**导航**器、设备**等**仍未**定义**。

文档中没有提到这件事。

# ruby - 我可以在不保存文件的情况下拥有包含内容的文件实例吗？

> ID：14599462
> 
> 赞同：1
> 
> 时间：2013-01-30T08:21:01.007
> 
> 标签：ruby, file, paperclip, render, temporary-files

对于回形针，我有一个以编程方式添加的文件。该文件是生成的 PDF。所以基本上我不需要将此文件保存到我的服务器的硬盘驱动器中。我现在要做的是：

```
@tempfile = Tempfile.open( ['','.pdf'], nil, 'wb', encoding: "ASCII-8BIT") do |file|
  file << render_to_string( pdf: "pdf_file.pdf", layout: "pdf", template: "projects/generatePDF" )
end

@export.pdf = File.open( @tempfile.path )     # Paperclip Attachment 
```

这是三个步骤：创建、写入、打开。所以我想知道我们是否可以更轻松地做到这一点，如下所示会很棒：

```
@export.pdf = File.new( render_to_string( pdf: "pdf_file.pdf", layout: "pdf", template: "projects/generatePDF" ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:53:17.250

尝试使用 stringio - 这是 IO 的子类，由字符串而不是文件支持。

# pymongo - pymongo 多次更新 $in

> ID：14599463
> 
> 赞同：0
> 
> 时间：2013-01-30T08:21:06.413
> 
> 标签：pymongo

以下命令不起作用：

**collection.update({'somefield':{'$in':somelist}}, {'$set':{'processed':1}}, False, True)**

在 MongoDb 中是否可以在 MySQL 中进行类似的操作：

**更新 sometable set processes=1 where id in (value1,value2,value3,etc)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:20:33.310

update() 方法的默认行为更新单个文档，并对应于带有 LIMIT 1 的 SQL UPDATE 语句。使用 multi 选项，update() 方法将对应于没有 LIMIT 子句的 SQL UPDATE 语句。

# wpf - 如何在使用表达式编码器 sdk 时为实时设备源设置更高的帧大小

> ID：14599468
> 
> 赞同：2
> 
> 时间：2013-01-30T08:21:25.870
> 
> 标签：wpf, webcam, expression-encoder-sdk

我正在尝试使用表达式编码器 sdk 和 wpf c#.net 显示网络摄像头预览、录制视频和抓取快照

我使用了来自[http://www.codeproject.com/Articles/285964/WPF-Webcam-Control](http://www.codeproject.com/Articles/285964/WPF-Webcam-Control)和[http://www.projectcn.org/my-dotnet-softwares/my-webcam](http://www.projectcn.org/my-dotnet-softwares/my-webcam)的代码。

使用

```
WebcamPanel.Size = new System.Drawing.Size(1280, 960); \\ xaml control
System.Drawing.Size framesize = new System.Drawing.Size(800, 600);
LiveDeviceSource.PickBestVideoFormat(framesize, 30);
LiveJob.OutputFormat.VideoProfile.Size = framesize; 
```

似乎只能拉伸 320x280 视频，而录制的视频看起来很糟糕（大像素和抖动）。我正在使用高清网络摄像头，从 Windows 8 相机应用程序录制的视频看起来非常好。

网络摄像头.cs：

```
using Microsoft.Expression.Encoder.Devices;
using Microsoft.Expression.Encoder.Live;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Project
{
    public class WebCam
    {
        public List<EncoderDevice> VideoDevices { get; set; }
        public LiveJob LiveJob { get; set; }
        public LiveDeviceSource LiveDeviceSource { get; set; }
        public EncoderDevice SelectedVideoDevice { get; set; }
        public bool isConnected { get; set; }
        public bool isRecording { get; set; }
        public FileArchivePublishFormat FileArchivePublishFormat { get; set; }

        public WebCam()
        {
            VideoDevices = new List<EncoderDevice>();
            isConnected = false;
        }
        public int InitializeListVideoDevices()
        {
            int nb = 0;
            foreach (EncoderDevice encoderDevice in EncoderDevices.FindDevices(EncoderDeviceType.Video))
            {
                VideoDevices.Add(encoderDevice);
                nb++;
            }
            return nb;
        }
        public bool StartWebcam()
        {
            if (SelectedVideoDevice == null) return false;
            LiveJob = null;
            LiveJob = new LiveJob();
            LiveDeviceSource = LiveJob.AddDeviceSource(SelectedVideoDevice, null);
            System.Drawing.Size framesize = new System.Drawing.Size(800, 600);
            LiveDeviceSource.PickBestVideoFormat(framesize, 30);
            LiveJob.OutputFormat.VideoProfile.Size = framesize;
            LiveJob.ActivateSource(LiveDeviceSource);
            isConnected = true;
            return true;
        }
        public void StopWebcam()
        {
            LiveJob.RemoveDeviceSource(LiveDeviceSource);
            LiveDeviceSource = null;
            isConnected = false;
        }
        public bool StartRecording()
        {
            FileArchivePublishFormat = new FileArchivePublishFormat();
            FileArchivePublishFormat.OutputFileName = @"C:\temp.wmv";
            LiveJob.PublishFormats.Add(FileArchivePublishFormat);
            LiveJob.StartEncoding();
            isRecording = true;
            return true;
        }
        public void StopRecording()
        {
            LiveJob.StopEncoding();
            isRecording = false;
        }
    }

} 
```

捕获.xaml.cs：

```
using Microsoft.Expression.Encoder.Devices;
using Microsoft.Expression.Encoder.Live;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;

namespace Project
{
    /// <summary>
    /// Interaction logic for Capture.xaml
    /// </summary>
    public partial class Capture : Window
    {
        public WebCam webcam { get; set; }

        public Capture()
        {
            InitializeComponent();
            webcam = new WebCam();
        }
        public Capture(EncoderDevice d)
            : this()
        {
            webcam.SelectedVideoDevice = d;
        }

        private void btnStart_Click(object sender, RoutedEventArgs e)
        {
            webcam.StartRecording();
            btnStart.IsEnabled = false;
            btnStop.IsEnabled = true;
            btnSnapshot.IsEnabled = false;

        }

        private void btnStop_Click(object sender, RoutedEventArgs e)
        {
            if (webcam.isRecording)
            {
                webcam.StopRecording();
                btnStop.IsEnabled = false;
                btnStart.IsEnabled = true;
                btnSnapshot.IsEnabled = true;
            }
        }

        private void btnSnapshot_Click(object sender, RoutedEventArgs e)
        {
            var md = new MediaDetails();
            md.Owner = this;
            md.ShowDialog();
        }

        private void Window_Loaded_1(object sender, RoutedEventArgs e)
        {
            try
            {
                //WebcamPanel.Size = new System.Drawing.Size(1280, 960);
                webcam.StartWebcam();
                webcam.LiveDeviceSource.PreviewWindow =
                new PreviewWindow(new HandleRef(WebcamPanel, WebcamPanel.Handle));
                btnStart.IsEnabled = true;
                btnSnapshot.IsEnabled = true;
            }
            catch
            {
                this.Close();
            }
        }

        private void Window_Closing_1(object sender, System.ComponentModel.CancelEventArgs e)
        {
            if (webcam.isRecording)
                webcam.StopRecording();
            if (webcam.isConnected)
                webcam.StopWebcam();
        }

    }
} 
```

捕获.xaml：

```
<Window x:Class="Project.Capture"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
        Title="Capture" SizeToContent="WidthAndHeight" Loaded="Window_Loaded_1" Closing="Window_Closing_1">
    <Grid Margin="0,10,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Button  x:Name="btnStart" Content="Start" Padding="5" Margin="10,0,0,0" Background="#FFDDDDDD" Click="btnStart_Click" IsEnabled="False" />
            <Button Grid.Column="1" x:Name="btnStop" Content="Stop" Margin="10,0,0,0" Padding="5" Click="btnStop_Click" IsEnabled="False" />
            <Button Grid.Column="2" x:Name="btnSnapshot" Content="Grab" Margin="10,0,0,0" Padding="5" Click="btnSnapshot_Click" IsEnabled="False"/>
        </Grid>
        <WindowsFormsHost Grid.Row="1" Margin="10,10,0,0" Name="WinFormHost" Background="{x:Null}" Width="800" Height="600" HorizontalAlignment="Left" VerticalAlignment="Top">
            <wf:Panel x:Name="WebcamPanel"  />
        </WindowsFormsHost>
    </Grid>
</Window> 
```

# php - 无法加载所有 iframe

> ID：14599475
> 
> 赞同：2
> 
> 时间：2013-01-30T08:21:52.677
> 
> 标签：php, jquery

我无法在 iframe 中加载所有网站，例如 youtube、facebook 和 twitter。我从数据库中加载所有页面，其他网站加载正常。

我试过：

js：

```
function showeffect(sUrl,sName)
    {

        $('#effect').hide(1000);
        $('#effect').show(2200);
        $('#website').attr("src", sUrl);

    } 
```

php:

```
 <?php 

            $sql = "SELECT naam, url FROM items";
            $database = new PDO('mysql:host=localhost;dbname=startandhome','root','');
            $results = $database->query($sql); 

            $contentregel = 'contentregelblauw';
            foreach($results as $row) 
            { 

                $itemnaam = $row['naam'];
                $itemUrl = $row['url'];

                echo "<div class=\"" .$contentregel ."\"><a href=\"#\" onclick=\"showeffect('".$itemUrl ."','".$itemnaam ."'); return false;\">" .$itemnaam ."</a></div>";

                if ($contentregel == 'contentregelgrijs')
                {
                    $contentregel = 'contentregelblauw';
                }
                else
                {
                    $contentregel = 'contentregelgrijs';
                }
            }

        ?> 
```

html:

```
<iframe id="website" class="website" src=""></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:38:15.007

这是因为 facebook 限制在其他域框架中托管页面。通常通过附加`X-Frame-Options`标题来完成。[X 框架选项](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)

1.  Facebook 和 twitter 网站有 x-frame-options，这意味着它们不允许跨源调用。他们通过 x-frame-options 进行限制。

# jquery - 如何使用get方法跨域jquery ajax响应？

> ID：14599481
> 
> 赞同：0
> 
> 时间：2013-01-30T08:22:31.830
> 
> 标签：jquery, jsonp

如何使用 jQuery 或 node.js 对 json 文件进行异步跨域请求（GET）？我有我的 api，我只需要向文件发出请求

```
$.ajax({
    type: 'GET',
    url: "https://api.flightstats.com/flex/airports/rest/v1/json/active?appId=3a311b8b&appKey=5d67203e8afab7fe8d01e0debf177171",
    processData: true,
    data: {},
    dataType: "json"

}); 
```

结果

```
XMLHttpRequest
XMLHttpRequest cannot load https://api.flightstats.com/flex/airports/rest/v1/json/active?appId=3a311b8b&appKey=5d67203e8afab7fe8d01e0debf177171\. Origin https://developer.flightstats.com is not allowed by Access-Control-Allow-Origin. 
```

或者

```
$.ajax({
    type: 'GET',
    url: "https://api.flightstats.com/flex/airports/rest/v1/json/active?appId=3a311b8b&appKey=5d67203e8afab7fe8d01e0debf177171?callback?",
    processData: true,
    data: {},
    dataType: "jsonp"        
}); 
```

结果

```
undefined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:27:40.207

您的 url 回调函数丢失`=`。这是正确的网址。然后尝试一下。

1.  确保您没有在控制台中收到任何 404 错误。
2.  检查控制台是否有任何其他错误。

    ```
    $.ajax({
        type: 'GET',
        url: "https://api.flightstats.com/flex/airports/rest/v1/json/active?appId=3a311b8b&appKey=5d67203e8afab7fe8d01e0debf177171?callback=?",
        processData: true,
        data: {},
        dataType: "jsonp",
        success:function(data){//do some thing with data},
        error:function(xhr, ajaxOptions, thrownError){//do with ajax errors}
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:30:40.763

尝试这个：

```
$.ajax({
   type: 'GET',
   url: "https://api.flightstats.com/flex/airports/rest/v1/json/active?appId=3a311b8b&appKey=5d67203e8afab7fe8d01e0debf177171?callback=?",
   dataType: "jsonp",
   success:function(data){
       console.log(data);
   }      
}); 
```

# c# - 最小倍数

> ID：14599487
> 
> 赞同：0
> 
> 时间：2013-01-30T08:22:38.397
> 
> 标签：c#, performance

我在这里有一个用 C# 编写的代码，可以找到从 1 到 20 的所有数字的最小倍数。但是，我发现它非常低效，因为执行需要一段时间才能产生正确的答案。我想知道我可以采取哪些不同的方法来改进代码。谢谢你。

```
 public static void SmallestMultiple()
    {
        const ushort ARRAY_SIZE = 21;
        ushort[] array = new ushort[ARRAY_SIZE];
        ushort check = 0;
        for (uint value = 1; value < uint.MaxValue; value++)
        {
            for (ushort j = 1; j < ARRAY_SIZE; j++)
            {
                array[j] = j;
                if (value % array[j] == 0)
                {   
                    check++;
                }
            }
            if (check == 20)
            {
                Console.WriteLine("The value is {0}", value);
            }
            else
            {
                check = 0;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:29:36.423

由于结果还必须能被 19（最大的素数）整除，直到 20，您可能只能循环遍历 19 的倍数。

这应该以大约 19 倍的速度获得结果。

这是执行此操作的代码：

```
public static void SmallestMultiple()
{
    const ushort ARRAY_SIZE = 21;
    ushort[] array = new ushort[ARRAY_SIZE];
    ushort check = 0;

    for (uint value = 19; value < uint.MaxValue; value += 19)
    {
        for (ushort j = 1; j < ARRAY_SIZE; j++)
        {
            array[j] = j;
            if (value % array[j] == 0)
            {
                check++;
            }
        }
        if (check == 20)
        {
            Console.WriteLine("The value is {0}", value);
            return;
        }
        else
        {
            check = 0;
        }
    }
} 
```

在我的机器上，这会`232792560`在 2 秒多一点的时间内找到结果。

### 更新

另外，请注意初始程序在达到解决方案时并未停止；我添加了一个`return`声明以使其停止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:34:11.917

您只是在寻找从 1 到 20 的数字的[LCM ：](http://en.wikipedia.org/wiki/Least_common_multiple)

![公式](../Images/36c1682037e55e62c42fbccff44166a0.png)

其中 GCD 可以使用[欧几里得算法](http://en.wikipedia.org/wiki/Euclidean_algorithm)有效计算。

我不懂 C#，但这个 Python 解决方案应该不难翻译：

```
def gcd(a, b):
    while b != 0:
       a, b = b, a % b

    return a

def lcm(a, b):
    return (a * b) / gcd(a, b)

numbers = range(1, 20 + 1)

print reduce(numbers, lcm) 
```

它也非常快：

```
>>> %timeit reduce(lcm, range(1, 20000))
1 loops, best of 3: 258 ms per loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T08:36:32.770

```
 static void Main(string[] args)
    {
        int[] nums = Enumerable.Range(1, 20).ToArray();
        int lcm = 1;

        for (int i = 0; i < nums.Length; i++)
        {
            lcm = LCM(lcm, nums[i]);
        }
        Console.WriteLine("LCM = {0}", lcm);
    }

    public static int LCM(int value1, int value2)
    {
        int a = Math.Abs(value1);
        int b = Math.Abs(value2);

        // perform division first to avoid potential overflow
        a = checked((a / GCD(a, b)));
        return checked((a * b));
    }

    public static int GCD(int value1, int value2)
    {
        int gcd = 1;     // Greates Common Divisor

        // throw exception if any value=0
        if (value1 == 0 || value2 == 0)
        {
            throw new ArgumentOutOfRangeException();
        }

        // assign absolute values to local vars
        int a = Math.Abs(value1);            // local var1
        int b = Math.Abs(value2);            // local var2

        // if numbers are equal return the first
        if (a == b) { return a; }
            // if var "b" is GCD return "b"
        if (a > b && a % b == 0) { return b; }
            // if var "a" is GCD return "a"
        if (b > a && b % a == 0) { return a; }

        // Euclid algorithm to find GCD (a,b):
        // estimated maximum iterations: 
        // 5* (number of dec digits in smallest number)
        while (b != 0)
        {
            gcd = b;
            b = a % b;
            a = gcd;
        }
        return gcd;
    }
} 
```

* * *

资料来源：[快速整数算法：最大公约数和最小公约数，.NET 解决方案](http://www.codeproject.com/Tips/161824/Fast-Integer-Algorithms-Greatest-Common-Divisor-an)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T09:04:08.343

**编辑：** v2.0 - 主要速度改进

基于 w0lf 的解决方案。更快的解决方案：

```
public static void SmallestMultiple()
{
    // this is a bit quick and dirty
    //   (not too difficult to change to generate primeProduct dynamically for any range)
    int primeProduct = 2*3*5*7*11*13*17*19;
    for (int value = primeProduct; ; value += primeProduct)
    {
       bool success = true;
        for (int j = 11; j < 21; j++)
        {
            if (value % j != 0)
            {
                success = false;
                break;
            }
        }
        if (success)
        {
            Console.WriteLine("The value is {0}", value);
            break;
        }
    }
} 
```

您不需要检查 1-10，因为如果某物可以被 x 整除（例如 12），那么它可以被 x/n 整除（例如 12/2 = 6）。最小的倍数将始终是所有涉及的素数的乘积的倍数。

没有对 C# 解决方案进行基准测试，但等效的 Java 解决方案在大约 0.0000006 秒内运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T08:30:15.010

好吧，我不确定您到底想在这里完成什么，但是您的外部 for 循环将运行大约 4,294,967,295 次（uint.MaxValue）。所以这需要一些时间...

如果您有办法避免使用 uint.MaxValue - 例如在完成所需的工作后打破循环 - 这将加快速度。

此外，由于您将 array[j] 设置为等于 j ，然后显然不再使用该数组，为什么不这样做：

```
value % j 
```

代替

```
value % array[j] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T08:34:09.720

还使用 W0lf 编写的代码（抱歉，我不能评论你的帖子）我会改进它（只有一点）删除我认为没用的数组..

```
public static void SmallestMultiple()
{
    const ushort ARRAY_SIZE = 21;
    ushort check = 0;
    for (uint value = 1; value < uint.MaxValue; value++)
    {
        for (ushort j = 1; j < ARRAY_SIZE; j++)
        {
            if (value % j == 0)
            {   
                check++;
            }
        }
        if (check == 20)
        {
            Console.WriteLine("The value is {0}", value);
        }
        else
        {
            check = 0;
        }
    }
} 
```

# ios - 如何将 UIWebView 放入框架中

> ID：14599491
> 
> 赞同：0
> 
> 时间：2013-01-30T08:22:59.507
> 
> 标签：ios, uiwebview

我会给出`UIWebView`一些特定的尺寸。例如，我将在`UIWebView`. 我使用 IB 调整了`UIWebView`小部件的大小，但是当我运行应用程序时，我总是得到一个全屏视图，并且我放在下面的小部件`UIWebView`被叠加到小部件上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:43:32.467

你应该把它作为一个子视图：

```
[UIWebView *aWebView =[[UIWebView alloc] initWithFrame:CGRectMake(x,y,width,height)];
aWebView.delegate=self; 
[self.view addSubview:aWebView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:31:19.683

从理论上讲，您应该能够将您的`UIWebView`作为子视图添加到`UIView`这样的：

```
UIView *containerView  = [[UIView alloc]initWithFrame:CGRectMake(50,50,50,50)];

[containerView addSubview:yourWebview];
[self.view addSubView:containerView]; 
```

此代码段不是用任何形式的 IDE 编写的，因此它可能根本无法编译，也可能根本不编译，它也没有经过测试，但看起来很可信。

# x86 - 如何像 SSE movlps/movhps 一样将 AVX/AVX2(YMM) 寄存器中的较低或较高值存储到内存中？

> ID：14599495
> 
> 赞同：8
> 
> 时间：2013-01-30T08:23:14.873
> 
> 标签：x86, sse, simd, avx, avx2

是否有任何现有指令可以将 256 位 AVX/AVX2(YMM) 寄存器中的较低或较高值存储到内存地址，就像 SSE 指令 movlps/movhps 一样？

或者还有其他方法可以实现吗？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-08T06:51:18.003

将 low128 存储为`vmovdqu [rdi], xmm0`.

将 high128 存储为`VEXTRACTI128 xmm1/m128, ymm2, 1`. 可能您可以通过将提取的结果分配给内存引用来让编译器生成对内存的存储。

`vextracti128 / f128`即使在融合域（Haswell）中也需要 2 微指令，所以 IDK 使用立即操作数 0 对其进行编码的意义是什么。（直到 AVX512，当立即索引而不是 a`movh`变得相关时，因为他们不知道他们将用 EVEX 替换 VEX 用于 AVX512）。将 AVX2 与 xmm regs 和 AVX2 与 ymm regs 混合没有任何惩罚，因此您只需使用 xmm 版本的 128b 存储来获得低 128，就像您可以通过引用`eax`而不是`rax`.

使用内在函数时转换东西可能很烦人，所以幸运的是编译器将编译`_mm256_extracti128_si256 (vec, 0)`为`vmovdqu`相应的 xmm reg。但是如果你的编译器没有，如果你让它生成，你的代码会更快`vmovdqu`。（就像地址对齐`movdqu`一样快`vmovdqa`，就像非 mov AVX 内存访问一样。）

# .net - MVC 3 中的视图和局部视图有什么区别？

> ID：14599497
> 
> 赞同：0
> 
> 时间：2013-01-30T08:23:16.933
> 
> 标签：.net

MVC3-视图和部分视图的确切区别是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:25:52.943

局部视图是完整视图的子组件。它旨在替换在您站点的多个位置发现的重复组件。一种看待它的方式是，它是一个函数的视觉等价物。

# android - 如何在使用新的 eclipse ADT 环境时增加堆大小

> ID：14599504
> 
> 赞同：0
> 
> 时间：2013-01-30T08:23:28.797
> 
> 标签：android, windows-7

![Android 开发者工具环境](../Images/0912efc493cc47d0d3070c1f7583fa1e.png)

我是新的 Android 应用程序开发工作环境的新手。上面我提到了在特定部分上标记为红色的图像，所以如果有人知道如何将给定的数字 742 变为更大的数字。因为当它达到最大值时工作时环境崩溃。Windows 7 是操作系统

我用于 android 应用程序开发和从网站下载的环境[ANDROID DEVELOPER OFFICIAL SITE](http://developer.android.com/sdk/index.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:34:51.410

编辑 eclipse.ini 文件

```
-startup
plugins/org.eclipse.equinox.launcher_1.0.100.v20080501.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.100.v20080428-1330
-showsplash
org.eclipse.platform
-vm
/usr/lib/jvm/java-1.5.0-sun/jre/bin/java
-vmargs
-Xms512m
-Xmx1024m
-XX:+UseParallelGC
-XX:PermSize=256M
-XX:MaxPermSize=512M 
```

将 -XX:MaxPermSize=512M 增加到 1024M 以增加堆大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:32:59.893

在eclipse安装路径找到eclipse.ini文件

并更改：

-`Xmx1024m`

# java - 部署 Java WAR 文件时出错：严重：为上下文修复 docBase 异常

> ID：14599507
> 
> 赞同：9
> 
> 时间：2013-01-30T08:23:42.783
> 
> 标签：java, windows, macos, tomcat, jruby

我已经解决了这个问题，但它可能会帮助那些偶然发现这个问题的人。Stackoverflow 在过去看似晦涩难懂的 IT 问题上为我节省了无数时间。

这是我在 Windows 上将 WAR 文件部署到 Tomcat 时遇到的错误。WAR 文件是在 Mac 上使用 JRuby 和 Warbler 构建的。

```
SEVERE: Exception fixing docBase for context [/XYZ] java.io.IOException: 
The filename, directory name, or volume label syntax is incorrect 
```

根据 SO 上的其他人的说法，WAR 文件已损坏，不应通过任何 Zip 工具打开。此情况并非如此。

相反，经过数小时的调查，事实证明我在 Warbler 路径中有一个文件，文件名中有管道“|” 特点。这个文件名不是故意分配的 虽然这在 Mac 上很好，但 Windows 不喜欢它。

解决方案：删除带有“|”的文件 在文件名中，瞧，WAR 文件部署成功！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:47:04.927

如上所述：
**解决方案：**删除带有“|”的文件 在文件名中，瞧，WAR 文件部署成功！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-14T08:12:56.227

`:Zone.identifier`我遇到了类似的问题，但在我的情况下，WAR中有一些以“”结尾的文件。**当我在rdp 会话**中时，我将一些文件从 Windows 服务器直接复制到我的 Mac 的映射文件夹上的项目资源中，这些文件就来了。这些文件在 mac 上没有引起任何问题，并且 WAR 在这些文件来自的机器上也没有出现问题。在所有其他 Windows 机器上，由于文件名中的“：”，战争在某种程度上被破坏了。

所以不要只搜索带有**“|”的文件** , 其他字符也会造成这种麻烦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-27T10:09:30.413

我有一个类似的问题，我的问题和罗比一样

所以我认为我们不应该添加一些奇怪的字符，比如“|” “-”到我们的战争文件名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-28T06:43:59.563

在 Windows 10 中以管理员模式运行为我解决了这个问题

# c# - 存储敏感硬编码值的理想方法

> ID：14599512
> 
> 赞同：0
> 
> 时间：2013-01-30T08:23:55.617
> 
> 标签：c#, wpf, oauth

我的应用程序需要使用特定的消费者密钥和固定值的消费者秘密发布到 Twitter。

我无法确定在我的应用程序中安全存储这些值的最佳方式（用户不应该能够使用另一个 Twitter 应用程序 - 只有我的）。

以下是我已经尝试过的一些事情：

*场景一：存储在 App.Settings 中*

**失败**- App.Settings 最初未加密。

*场景 2：存储为硬编码值并使用 Dotfuscator*

**失败**- 变量在被混淆后在反射器中清晰可见。

*场景 3：加密并存储为硬编码值。*

**失败**- 虽然这通过了场景 1，但密钥本身将被硬编码（以确保它生成正确的解密值）并且对于场景 2 可见。

我遇到的主要问题是，为了让 Twitter 识别我的消费者密钥/秘密，它们需要被解密，但是我不希望在应用程序本身中明确设置这个值。

我解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:45:04.563

正如斯蒂芬 C. 提到的那样，作为[我如何保护 OAuth 密钥免受用户反编译我的项目的答案？](https://stackoverflow.com/questions/7623335/how-do-i-protect-oauth-keys-from-a-user-decompiling-my-project?rq=1)，你无能为力。

我最好的选择是让它尽可能地难，但要意识到它从来都不是真正安全的事实。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T08:32:25.943

> App.Settings 最初未加密

您可以使用[`ProtectedData`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)类对此类数据进行加密/解密，并将加密值存储在`.settings`：

```
 public static String Encrypt(this String unSecuredString)
    {
        if (String.IsNullOrEmpty(unSecuredString))
            return unSecuredString;

        var decryptedData = Encoding.UTF8.GetBytes(unSecuredString);
        var encryptedData = ProtectedData.Protect(decryptedData, null, DataProtectionScope.CurrentUser);

        return Convert.ToBase64String(encryptedData);
    }

    public static String Decrypt(this String securedString)
    {
        if (String.IsNullOrEmpty(securedString))
            return securedString;

        var encryptedData = Convert.FromBase64String(securedString);
        var decryptedData = ProtectedData.Unprotect(encryptedData, null, DataProtectionScope.CurrentUser);

        return Encoding.UTF8.GetString(decryptedData);
    } 
```

# powershell - 无法捕获 GetWMICOMException

> ID：14599513
> 
> 赞同：0
> 
> 时间：2013-01-30T08:24:02.093
> 
> 标签：powershell

像这样的代码，

```
try { $NIC = Get-WmiObject Win32_NetworkAdapterConfiguration -ComputerName $Computername -Credential $Credential -filter "IPEnabled = $TRUE" }

catch [GetWMICOMException]
{
    "Error 1"
}
catch [System.UnauthorizedAccessException]
{
    "Error 2"
} 
```

收到如下错误：

> 找不到类型 [GetWMICOMException]：
> 
> 捕捉 [COMException] 相同
> 
> catch [System.Runtime.InteropServices.COMException] 只是被忽略了

我怎么能抓住它？

```
Get-WmiObject : RPC server was unavailable. (Exception HRESULT: 0x800706BA)
F:\PowerShell Scripts\Project1.NetReconfigurer\proj1.ps1:36 :33
+             $NIC = Get-WmiObject <<<<  Win32_NetworkAdapterConfiguration -ComputerName $Computername -Credential $Credential -filter "IPEnabled = $TRUE"

+ CategoryInfo          : InvalidOperation: (:) [Get-WmiObject], COMException
+ FullyQualifiedErrorId : GetWMICOMException,Microsoft.PowerShell.Commands.GetWmiObjectCommand 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:32:40.353

第一的。该错误是非终止错误，因此它只是通知。如果要捕获非终止错误，请使用`-ErrorAction Stop`. 另外，我不认为`COMException`你可以捕捉到一个例外。试试这个：

```
try { $NIC = Get-WmiObject Win32_NetworkAdapterConfiguration -ComputerName $Computername -Credential $Credential -filter "IPEnabled = $TRUE -ErrorAction Stop}
catch [System.UnauthorizedAccessException]
{
    "Error 2"
}
catch [Exception]
{
    if ($_.Exception.GetType().Name -eq "COMException") {
        "Error 1"
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T00:44:42.087

我遇到了同样的问题，并遇到了这个页面。Frode F 的想法是对的，但我对这个答案并不满意，所以我一直在搞砸，直到得到我想要的行为。我想我会添加一点，以防其他人在未来遇到这个页面：

*   正如弗罗德所说，您必须使用 -ErrorAction Stop 来捕获此异常，因为它是非终止的
*   如果使用完全限定名称 [System.Runtime.InteropServices.COMException]，则可以捕获 COMException
*   如果您只想在错误记录显示 GetWMICOMException 时捕获 COMException，就像在 Get-WMIObject 抛出时一样，您可以使用 if 语句检查错误记录，如果不是您正在查找的异常，则重新抛出异常为了。在这种情况下这样做可能有点过分，因为您的 try 块仅包含一个命令。Get-WMIObject 是否会引发任何其他类型的 COM 异常是值得怀疑的。但是，这在管道很长或 try 块中有多个命令的情况下可能很有用。

将捕获任何 COMException 的更简单的版本：

```
try { $NIC = Get-WmiObject Win32_NetworkAdapterConfiguration -ComputerName $Computername -Credential $Credential -Filter "IPEnabled = $TRUE" -ErrorAction Stop}

catch [System.Runtime.InteropServices.COMException]
{
    "Error 1"
}
catch [System.UnauthorizedAccessException]
{
    "Error 2"
} 
```

如果它是 Get-WMIObject 抛出的“GetWMICOMException”，则只会捕获 COMException 的更复杂的版本：

```
try { $NIC = Get-WmiObject Win32_NetworkAdapterConfiguration -ComputerName $Computername -Credential $Credential -Filter "IPEnabled = $TRUE" -ErrorAction Stop}

catch [System.Runtime.InteropServices.COMException]
{
    if ($_.FullyQualifiedErrorId.StartsWith("GetWMICOMException")
    {
        "Error 1"
    }
    else { throw }
}
catch [System.UnauthorizedAccessException]
{
    "Error 2"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:33:46.093

您只能捕获终止错误。将“-ErrorAction Stop”添加到 Get-WmiObject 以将错误转换为终止错误并重试。附带说明一下，我还建议您在使用 ping 请求对其运行 wmi 查询之前测试与目标系统的连接，它可以加快执行速度，尤其是在您查询大量计算机时（wmi 超时会减慢您的脚本）。

```
try { 
    $NIC = Get-WmiObject Win32_NetworkAdapterConfiguration -ComputerName $Computername -Credential $Credential -filter "IPEnabled = $TRUE" 
}
catch
{
    $_
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-05T23:53:20.197

我设法使用 Try{}Catch 和 -ErrorVariable 在 ErrorAction 模式“SilentlyContinue”中处理任何类型的错误：

```
 foreach ($Server in $Server_List)
    {
        $ErrorVar = $null
        $Server_Model = $null

        try
        {
            $Server_Info= Get-WmiObject -Class Win32_ComputerSystem -ComputerName $Server -Credential $Credential -ErrorAction SilentlyContinue -ErrorVariable ErrorVar | Select Model
        }
        catch [System.UnauthorizedAccessException] # here $ErrorVar.Exception doesn't exist but $ErrorVar.ErrorRecord.Exception
        {
            $Msg = "Powershell cmdlet on $Server : DCOM unauthorized access"
            $Msg | Write-Warning
        }

        if ($ErrorVar.Exception)
        {
            switch ($ErrorVar)
            {
                { $_.Exception.GetType().Name -eq "COMException" }
                {
                    $Msg = "Powershell cmdlet on $Server : RPC server is unavailable"
                    $Msg | Write-Warning

                    break
                }
                { $_.Exception.GetType().Name -eq "ManagementException" }
                {
                    $Msg = "Powershell cmdlet on $Server : user credentials cannot be used for local connections.`nRetrying without credential."
                    $Msg | Write-Warning
                    $Server_Info = Get-WmiObject -Class Win32_ComputerSystem -ComputerName $Server | Select Model # when the script is hosted on a computer within the Server_List

                    break
                }
                default
                {
                    $Msg = "Powershell cmdlet on $Server : unexpected error"
                    $Msg | Write-Warning
                }
            }
        }

        if ($Server_Info)
        {
                $Server_Info_Pso =  New-Object PSObject -Property @{
                    HostName = $Server
                    Model = $Server_Info.Model
                }
        }
        else
        {           
            $Server_Info_Pso =  New-Object PSObject -Property @{
                HostName = $Server
                Model = 'Unavailable'
            }
        }

        $Server_Info_PsoCol = $Server_Info_PsoCol + @($Server_Info_Pso)
    } 
```

# android - AndroidRuntime java.lang.NullPointerException

> ID：14599519
> 
> 赞同：0
> 
> 时间：2013-01-30T08:24:25.710
> 
> 标签：android

我是新手，试图调用库中存在的类的对象。基本上我的目标是从 PHP 应用程序验证用户。com.test.app.library 文件的代码如下：

```
package com.test.app.library;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import android.util.Log;

/* Helper class for sending requests to our system
* AND MANAGEMENT RESPONSE. */
public class Httppostaux {

InputStream is = null;
String result = "";

public JSONArray getserverdataMapp(ArrayList<NameValuePair> parameters,
        String urlwebserver) {

    httppostconnect(parameters, urlwebserver);

    if (is != null) {// si obtuvo una respuesta

        getpostresponse();

        return getjsonarray();

    } else {

        return null;

    }

}

// peticion HTTP
private void httppostconnect(ArrayList<NameValuePair> parametros, String urlwebserver) {
    Log.e("Test","Inside  post.");
    //
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(urlwebserver);
        httppost.setEntity(new UrlEncodedFormEntity(parametros));
        // ejecuto peticion enviando datos por POST
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

}

public void getpostresponse() {

    // Convierte respuesta a String
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();

        result = sb.toString();
        Log.e("getpostresponse", " result= " + sb.toString());
    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }
}

public JSONArray getjsonarray() {
    // parse json data
    try {
        JSONArray jArray = new JSONArray(result);

        return jArray;
    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
        return null;
    }

} 
```

}

当我尝试调用以下代码时：

```
package com.test.app;

import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import com.test.app.library.Httppostaux;
import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.annotation.TargetApi;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.SystemClock;
import android.os.Vibrator;
import android.text.TextUtils;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.inputmethod.EditorInfo;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

/**
 * Activity which displays a login screen to the user, offering registration as
 * well.
 */
public class LoginActivity extends Activity {
// private UserLoginTask mAuthTask = null;
  Httppostaux post;
  String URL_connect = "http://devstagemp.zerocall.com/b2c.php/pScripts/appLogin";

/**
 * Keep track of the login task to ensure we can cancel it if requested.
 */

// Values for user name and password at the time of the login attempt.
private String mUserName;
private String mPassword;
private String mPincode;

// UI references.
private EditText mUserNameView;
private EditText mPasswordView;
private EditText mPincodeView;
private View mLoginFormView;
private View mLoginStatusView;
private TextView mLoginStatusMessageView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_login);

    // Set up the login form.

    mUserNameView = (EditText) findViewById(R.id.username);
    mPasswordView = (EditText) findViewById(R.id.password);
    mPincodeView = (EditText) findViewById(R.id.pincode);
    mPasswordView
            .setOnEditorActionListener(new TextView.OnEditorActionListener() {
                @Override
                public boolean onEditorAction(TextView textView, int id,
                        KeyEvent keyEvent) {
                    if (id == R.id.login || id == EditorInfo.IME_NULL) {
                        attemptLogin();
                        return true;
                    }
                    return false;
                }
            });

    mLoginFormView = findViewById(R.id.login_form);
    mLoginStatusView = findViewById(R.id.login_status);
    mLoginStatusMessageView = (TextView) findViewById(R.id.login_status_message);

    findViewById(R.id.sign_in_button).setOnClickListener(
            new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    attemptLogin();
                }
            });
}

// @Override
// public boolean onCreateOptionsMenu(Menu menu) {
// super.onCreateOptionsMenu(menu);
// getMenuInflater().inflate(R.menu.activity_login, menu);
// return true;
// }

/**
 * Attempts to sign in or register the account specified by the login form.
 * If there are form errors (invalid user name, missing fields, etc.), the
 * errors are presented and no actual login attempt is made.
 */
public void attemptLogin() {
    // if (mAuthTask != null) {
    // return;
    // }
    // Reset errors.
    mUserNameView.setError(null);
    mPasswordView.setError(null);
    mPincodeView.setError(null);
    // Store values at the time of the login attempt.
    mUserName = mUserNameView.getText().toString();
    mPassword = mPasswordView.getText().toString();
    mPincode = mPincodeView.getText().toString();

    boolean cancel = false;
    View focusView = null;

    // Check for a valid password.
    if (TextUtils.isEmpty(mPassword)) {
        mPasswordView.setError(getString(R.string.error_field_required));
        focusView = mPasswordView;
        cancel = true;
    } else if (mPassword.length() < 6) {
        mPasswordView.setError(getString(R.string.error_invalid_password));
        focusView = mPasswordView;
        cancel = true;
    }

    // Check for a valid user name.
    if (TextUtils.isEmpty(mUserName)) {
        mUserNameView.setError(getString(R.string.error_field_required));
        focusView = mUserNameView;
        cancel = true;
    } else if (mUserName.length() < 4) {
        mUserNameView.setError(getString(R.string.error_invalid_username));
        focusView = mUserNameView;
        cancel = true;
    }

    // Check for the Input

    if (TextUtils.isEmpty(mPincode)) {
        mPincodeView.setError(getString(R.string.error_field_required));
        focusView = mPincodeView;
        cancel = true;
    }

    if (cancel) {
        // There was an error; don't attempt login and focus the first
        // form field with an error.
        focusView.requestFocus();
    } else {
        // Show a progress spinner, and kick off a background task to
        // perform the user login attempt.
        mLoginStatusMessageView.setText(R.string.login_progress_signing_in);
        // Authentication;
        new asynclogin().execute(mUserName, mPassword,mPincode);
    }
}

/**
 * Shows the progress UI and hides the login form.
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
private void showProgress(final boolean show) {
    // On Honeycomb MR2 we have the ViewPropertyAnimator APIs, which allow
    // for very easy animations. If available, use these APIs to fade-in
    // the progress spinner.
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
        int shortAnimTime = getResources().getInteger(
                android.R.integer.config_shortAnimTime);

        mLoginStatusView.setVisibility(View.VISIBLE);
        mLoginStatusView.animate().setDuration(shortAnimTime)
                .alpha(show ? 1 : 0)
                .setListener(new AnimatorListenerAdapter() {
                    @Override
                    public void onAnimationEnd(Animator animation) {
                        mLoginStatusView.setVisibility(show ? View.VISIBLE
                                : View.GONE);
                    }
                });

        mLoginFormView.setVisibility(View.VISIBLE);
        mLoginFormView.animate().setDuration(shortAnimTime)
                .alpha(show ? 0 : 1)
                .setListener(new AnimatorListenerAdapter() {
                    @Override
                    public void onAnimationEnd(Animator animation) {
                        mLoginFormView.setVisibility(show ? View.GONE
                                : View.VISIBLE);
                    }
                });
    } else {
        // The ViewPropertyAnimator APIs are not available, so simply show
        // and hide the relevant UI components.
        mLoginStatusView.setVisibility(show ? View.VISIBLE : View.GONE);
        mLoginFormView.setVisibility(show ? View.GONE : View.VISIBLE);
    }
}

/**
 * Represents an asynchronous login/registration task used to authenticate
 * the user.
 */

public void err_login() {
    Vibrator vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
    vibrator.vibrate(200);
    Toast toast1 = Toast.makeText(getApplicationContext(),
            "Error:Nombre de usuario o password incorrectos",
            Toast.LENGTH_SHORT);
    toast1.show();
}

public boolean loginstatus(String username, String password,String pincode) {
    int logstatus = -1;

    /*
     * Creamos un ArrayList del tipo nombre valor para agregar los datos
     * recibidos por los parametros anteriores y enviarlo mediante POST a
     * nuestro sistema para relizar la validacion
     */
    ArrayList<NameValuePair> postparameters2send = new ArrayList<NameValuePair>();

    postparameters2send.add(new BasicNameValuePair("username", username));
    postparameters2send.add(new BasicNameValuePair("password", password));
    postparameters2send.add(new BasicNameValuePair("pincode", pincode));

    // realizamos una peticion y como respuesta obtenes un array JSON
    Log.e("URL",postparameters2send.toString());
    JSONArray jdata = post.getserverdataMapp(postparameters2send, URL_connect);

    /*
     * como estamos trabajando de manera local el ida y vuelta sera casi
     * inmediato para darle un poco realismo decimos que el proceso se pare
     * por unos segundos para poder observar el progressdialog la podemos
     * eliminar si queremos
     */
    SystemClock.sleep(950);

    // si lo que obtuvimos no es null
    if (jdata != null && jdata.length() > 0) {

        JSONObject json_data; // creamos un objeto JSON
        try {
            json_data = jdata.getJSONObject(0); // leemos el primer segmento
                                                // en nuestro caso el unico
            logstatus = json_data.getInt("logstatus");// accedemos al valor
            Log.e("loginstatus", "logstatus= " + logstatus);// muestro por
                                                            // log que
                                                            // obtuvimos
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // validamos el valor obtenido
        if (logstatus == 0) {// [{"logstatus":"0"}]
            Log.e("loginstatus ", "invalido");
            return false;
        } else {// [{"logstatus":"1"}]
            Log.e("loginstatus ", "valido");
            return true;
        }

    } else { // json obtenido invalido verificar parte WEB.
        Log.e("JSON  ", "ERROR");
        return false;
    }

}

class asynclogin extends AsyncTask<String, String, String> {

    String user, pass,pin;

    protected void onPreExecute() {
        // para el progress dialog

    }

    protected String doInBackground(String... params) {
        // obtnemos usr y pass
        user = params[0];
        pass = params[1];
        pin = params[2];

        // enviamos y recibimos y analizamos los datos en segundo plano.
        if (loginstatus(user, pass,pin) == true) {
            return "ok"; // login valido
        } else {
            return "err"; // login invalido
        }

    }

    /*
     * Una vez terminado doInBackground segun lo que halla ocurrido pasamos
     * a la sig. activity o mostramos error
     */
    protected void onPostExecute(String result) {

        Log.e("onPostExecute=", "" + result);

        if (result.equals("ok")) {

            Intent i = new Intent(LoginActivity.this, DashBoard.class);
            i.putExtra("user", user);
            startActivity(i);

        } else {
            err_login();
        }

    }

}

} 
```

我收到以下错误

```
E/AndroidRuntime(1591): FATAL EXCEPTION: AsyncTask #1
                        E/AndroidRuntime(1591): java.lang.RuntimeException: An error occured while executing doInBackground()
                        E/AndroidRuntime(1591):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
                        E/AndroidRuntime(1591):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
                        E/AndroidRuntime(1591):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
                        E/AndroidRuntime(1591):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
                        E/AndroidRuntime(1591):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
                        E/AndroidRuntime(1591):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
                        E/AndroidRuntime(1591):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
                        E/AndroidRuntime(1591):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
                        E/AndroidRuntime(1591):     at java.lang.Thread.run(Thread.java:856)
                        E/AndroidRuntime(1591): Caused by: java.lang.NullPointerException
                        E/AndroidRuntime(1591):     at com.test.app.LoginActivity.loginstatus(LoginActivity.java:237)
                        E/AndroidRuntime(1591):     at com.test.app.LoginActivity$asynclogin.doInBackground(LoginActivity.java:295)
                        E/AndroidRuntime(1591):     at com.test.app.LoginActivity$asynclogin.doInBackground(LoginActivity.java:1)
                        E/AndroidRuntime(1591):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
                        E/AndroidRuntime(1591):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
                        E/AndroidRuntime(1591):     ... 5 more 
```

互联网权限在 android 清单文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:33:46.737

您在 LoginActivity.java:237 处有一个 NPE 确保没有任何参数为空，并确保它们在传递它们**之前**已配置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:41:37.107

`post`一片空白。记得在访问它之前实例化它。

# android - 如何在水平滚动视图中获取当前焦点元素？

> ID：14599521
> 
> 赞同：1
> 
> 时间：2013-01-30T08:24:27.637
> 
> 标签：android, focus, scrollview

我实现滚动视图以显示视图元素...![在中心滚动视图，左右按钮上有两个按钮以移动滚动](../Images/4dc2c0fd0b4d5f6ea5782be90335221c.png)

现在在这种情况下，我想将焦点从滚动视图转移到按钮。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-08T09:58:09.157

选项 I：`getLocationOnScreen`在内部的所有子视图上使用`ScrollView`

1.  获取滚动视图的实例。

    `ScrollView scrollView = findViewById(R.id.scrollViewID);`

2.  类型转换到 ViewGroup

    `ViewGroup viewGroup = (ViewGroup)scrollView;`

3.  查找所有子视图`ViewGroup` （检查 Android 文档）

    通过调用获取表示子视图在屏幕上位置的矩形 - getLocationOnScreen

    getLocationOnScreen 将 x,y 坐标存储在 Rect 对象中，比较 rect x,y 坐标以查看 Rectangles 是否位于屏幕边界内。（您可以在 Content View / Root View 上使用 getLocationOnScreen 获取屏幕）

选项二： `getGlobalVisibleRect`在里面的所有子视图上`ScrollView` （快速简单）

1.  获取 ScrollView 中的所有子视图。调用`getGlobalVisibleRect`每个子视图，如果它返回 true，则意味着至少有一部分子视图是可见的。

# php - 试图在同一个 html 页面上收集和显示访问者的评论

> ID：14599524
> 
> 赞同：0
> 
> 时间：2013-01-30T08:24:32.407
> 
> 标签：php, mysql, select

我需要您的帮助：我正在尝试通过 html 页面上的表单收集访问者的评论，然后将它们显示在同一 html 页面的底部。我可以使用 php 脚本收集评论并将它们写入数据库，但评论显示在 php 页面上，而不是在我的原始 html 页面上。到目前为止，我在访问过的论坛中没有找到任何相关的答案。您的帮助将不胜感激。

这是代码：

1.  html 页面（通过表单收集评论，我也想在其中显示所有收集的评论）：

    你的评论：

    您的姓名： 您的电子邮件地址：

2.  脚本：post_comment.php：

    ```
    $db_sitename ="xxx";
    $hostname    = "xxx";
    $username    = "xxx";
    $dbname      = "xxx";
    $password    = "xxx";
    $usertable   = "xxx";

    $con = mysql_connect($hostname, $username, $password);
    mysql_select_db($dbname, $con);
    $sql="INSERT INTO $usertable (Comments, Full_Name, Email) VALUES ('$_POST[comments]','$_POST[full_name]','$_POST[email]')";

    if (!mysql_query($sql,$con))
    {
        die('Error: ' . mysql_error());
    }

    echo "1 record added";

    $result = mysql_query("SELECT * FROM $usertable");

    echo "<table border='1'>  <tr>  <th>Commentaires:</th>  <th>Nom:</th> </tr>";

    while($row = mysql_fetch_array($result))
    {
        echo "<tr>";
        echo "<td>" . $row['Comments'] . "</td>";
        echo "<td>" . $row['Full_Name'] . "</td>";
        echo "</tr>";
    }

    echo "</table>";

    mysql_close($con);
    ?> 
    ```

谁能帮我解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:41:50.013

多谢你们！感谢您的指导，我找到了问题的答案：实际上，我不会在我的表单 () 中引用外部 php 页面，而是简单地引用我的初始页面，即包含所有 html 文本的页面，使用以下代码： “ method="post">。这允许将html文本和php脚本代码保持在同一页面上，从而解决我的问题。

非常感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:40:23.390

你的意思是评论显示在 php 页面上，而不是在我原来的 html 页面上。您可以使用`include"php.page"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:33:58.017

如果要在 html 页面上显示所有现有评论，则需要使用 javascript 和 ajax 从数据库中获取数据并将其显示在页面上。

更常用的方法是对表单和现有评论都使用 php 页面。- 那么如果你愿意，你也可以添加一些ajax来动态更新页面。

但也要记住警告——如果你想把它作为某种公共页面，你应该对传入的评论进行一些认真的分析，以检查各种潜在的问题，特别是但可能不限于 html、javascript 和 sql .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T08:59:22.013

评论应该通过 ajax 和 jquery 保存在数据库中，这样您就不必使用提交，因为每次发布评论时都要重新加载页面会很烦人。

另一方面，评论的实时获取将使用 ajax 和 jquery。创建一个函数，该函数将从数据库中获取评论并每隔 2 秒左右调用一次。并将输出附加到现有线程上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T08:31:19.387

这里是你的样子 4 的链接。

[http://www.dreamincode.net/forums/topic/147416-display-the-users-comments-on-same-page/](http://www.dreamincode.net/forums/topic/147416-display-the-users-comments-on-same-page/)

[http://www.daniweb.com/web-development/php/threads/141184/show-results-on-same-page#](http://www.daniweb.com/web-development/php/threads/141184/show-results-on-same-page#)

# python - Python正则表达式通过对属于同一类别的元素进行分组

> ID：14599528
> 
> 赞同：1
> 
> 时间：2013-01-30T08:24:50.740
> 
> 标签：python, regex

我有一个这样的文件：

```
<table>
<span clas="city"> Miami </span> <span><a href="miami" > Miami </a> </span>
<span clas="city"> Orlando </span> <span><a href="orlando" > orlando </a></span>
</table>
<table>
<span clas="city"> Los Angeles </span> <span><a href="Los Angeles" > </a> </span>
<span clas="city"> San Diego </span>  <span><a href="Los Angeles" > San Diego</a> </span>
</table> 
```

当表结束（没有while循环）时，如何将此正则表达式扩展`re.compile('city">([^<]+)</span>')`到属于同一州（表）的城市组，例如

```
State 1: Miami, Orlando
State 2: Los Angeles, San Diego 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:31:10.720

使用适当的 HTML 解析器：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(open(...).read())
states = {}
for i, table in enumerate(soup("table")):
    for city in table("span"):
        states.setdefault(i, []).append(city.text.strip()) 
```

这会给

```
states
{0: [u'Miami', u'Orlando'], 1: [u'Los Angeles', u'San Diego']} 
```

# java - Android：列表视图中的字符串转换错误

> ID：14599540
> 
> 赞同：0
> 
> 时间：2013-01-30T08:25:52.520
> 
> 标签：java, android, string

我正在尝试构建列表视图，并且列表视图中的每个项目都会打开其特定的新活动。但我收到一些字符串转换错误。请帮忙。我收到此错误：

```
Type mismatch: cannot convert from java.lang.String to com.example.cprograms.String Array.java 
```

这是我的java文件：

```
package com.example.cprograms;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Ctypes extends ListActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ctypes);

    String[] types = new String[] {"Arrays", "Strings" };

    setListAdapter(new ArrayAdapter<String>(this,R.layout.ctypes, types));

    ListView list = getListView();
    list.setTextFilterEnabled(true);
    list.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View v, int position,
                long arg3) {
            switch(position)
            {
                case 0:  Intent newActivity = new Intent(v.getContext(), Array.class);     
                         startActivity(newActivity);
                         break;
                case 1:  Intent newActivity1 = new Intent(v.getContext(), String.class);     
                         startActivity(newActivity1);
                         break;
            }
         }
    });
} 
```

}

这是我的 xml 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Ctypes" >

<ListView
    android:id="@+id/list_ctypes"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >"
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:33:56.990

```
 case 0:  Intent newActivity = new Intent(v.getContext(), Array.class);     
                     startActivity(newActivity);
                     break;
            case 1:  Intent newActivity1 = new Intent(v.getContext(), String.class);     
                     startActivity(newActivity1);
                     break; 
```

我认为您不能使用 Array 和 String 类，因为它们是 Android 活动。

```
setListAdapter(new ArrayAdapter<String>(this,R.layout.ctypes, types)); 
```

在这里，您还有另一个大错误。根据文档，数组适配器的第二个参数必须是包含`TextView`在实例化视图时使用的布局文件的资源 ID，而不是 ListView 本身。您应该阅读文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:40:06.497

```
import java.lang.String;

public class MainActivity extends ListActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.ctypes);

    String[] types = new String[] { "Arrays", "Strings" };

    setListAdapter(new ArrayAdapter<String>(this, R.layout.ctypes, types));

    ListView list = getListView();
    list.setTextFilterEnabled(true);
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View v, int position,
                long arg3) {
            // TODO Auto-generated method stub

            switch (position) {
            case 0:
                Intent newActivity = new Intent(v.getContext(), com.example.cprograms.Array.class);
                startActivity(newActivity);
                break;
            case 1:
                Intent newActivity1 = new Intent(v.getContext(),
                        com.example.cprograms.String.class);
                startActivity(newActivity1);
                break;

            }

        }

    });

}
} 
```

# yii - YII中过滤器的主要用途是什么？

> ID：14599541
> 
> 赞同：3
> 
> 时间：2013-01-30T08:25:57.280
> 
> 标签：yii, yii-filters

正如标题阐明了 Yii 中过滤器的主要目的是什么？我是 Yii 的新手，对过滤器和验证器有点困惑？任何人都可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:39:43.833

验证器将验证模型中的属性是否应为：an，integer，date，小于给定大小，...

例子：

```
public function rules()
{
    return array(
        //username and password are required
        array('username, password', 'required'),
        //myInt is a number between 0 and 255
        array('myInt', 'numerical', 'min'=>0, 'max'=> 255),
    );
} 
```

`$model->validate()`调用或时将测试验证规则`$model->save()`。如果其中一个验证器未通过，则会向用户抛出错误。

你可以知道调用抛出的错误`$model->getErrors()`

来源：[模型规则验证](http://www.yiiframework.com/wiki/56/#hh16)

过滤器定义为：

> 可以在执行操作之前和之后应用过滤器。它可以修改动作要运行的上下文或修饰动作生成的结果。

所以基本上它会在调用控制器方法之前（所以在屏幕上渲染任何东西之前）或在控制器完成之后（所以它可能在数据被验证并添加到数据库之后）执行一些工作。例如，我们可以说：

*   检查用户权限
*   实现 HTTP 缓存
*   ...

要将过滤器应用于操作，我们需要重写 CController::filters() 方法。该方法应返回一个过滤器配置数组。例如，

```
public function filters()
{
    return array(
       'postOnly + edit, create',
        array(
            'application.filters.PerformanceFilter - edit, create',
            'unit'=>'second',
        ),
    );
} 
```

使用加号和减号运算符，我们可以指定过滤器应该和不应该应用于哪些操作。在上面，`postOnly`过滤器将应用于`edit`和`create`动作，而`PerformanceFilter`过滤器将应用于除`edit`和之外的所有动作`create`。如果过滤器配置中既没有出现加号也没有出现减号，则过滤器将应用于所有操作。

来源：[Yii API 关于 CFilter](http://www.yiiframework.com/doc/api/1.1/CFilter)和[Yii 指南](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter)

所以如果你想验证一些数据，那么使用验证器，如果你想做的不依赖于模型（即检查用户是否登录，......）那么你应该实现一个过滤器。一般来说，过滤器和验证器之间的区别非常明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T08:53:48.597

Validators are used for preventing inserting or updating wrong data in db. Filters could be used to make some preparation before or after validating

```
class LoginForm extends CFormModel
{
    public $mail;
    public $password;
    public $rememberMe;

    public function rules()
    {
        return array(
            array('mail, password', 'filter'=>'trim'),
            array('mail', 'filter'=>'mb_strtolower'),
            array('mail, password', 'required'),
            array('mail', 'email'),
            array('rememberMe', 'boolean'),
            array('password', 'authenticate'),
        );
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:06:06.443

**过滤器** 主要用于过滤你的 URL。这里还包括 accessControl。这意味着当您设置 URL 以访问任何操作时。然后那些过滤器检查是否允许这些用户执行操作。此外，如果您设置此控制器删除操作只能通过 POST 方法访问，那么您将无法使用 GET 方法进行删除。那些所有类型的访问....由过滤器控制。

另一方面，**Validator**用于验证您提交的任何输入是否符合您的意愿。就像最小值，最大值，整数一样，它是否是唯一的，这个字段是否需要。此字段是否为电子邮件类型......以及更多类型的输入字段验证......

在 Single Word 中可以说“**验证器用于输入验证，过滤器用于输出验证**”

# java - 发送 JSON 响应时 Struts2 JSON Writer 异常

> ID：14599542
> 
> 赞同：0
> 
> 时间：2013-01-30T08:25:57.937
> 
> 标签：java, json, struts2, action, gson

我遇到了很多我认为对解决我的问题没有帮助的异常，

这是他们

```
Class org.apache.struts2.json.JSONWriter can not access a member of class org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl$EntityInstrumentationMetadataImpl with modifiers "public"
java.lang.IllegalAccessException: Class org.apache.struts2.json.JSONWriter can not access a member of class org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl$EntityInstrumentationMetadataImpl with modifiers "public"
org.apache.struts2.json.JSONException: java.lang.IllegalAccessException: Class org.apache.struts2.json.JSONWriter can not access a member of class org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl$EntityInstrumentationMetadataImpl with modifiers "public"
org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.IllegalAccessException: Class org.apache.struts2.json.JSONWriter can not access a member of class org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl$EntityInstrumentationMetadataImpl with modifiers "public"
org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.IllegalAccessException: Class org.apache.struts2.json.JSONWriter can not access a member of class org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl$EntityInstrumentationMetadataImpl with modifiers "public"
org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.IllegalAccessException: Class org.apache.struts2.json.JSONWriter can not access a member of class org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl$EntityInstrumentationMetadataImpl with modifiers "public"
org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.IllegalAccessException: Class org.apache.struts2.json.JSONWriter can not access a member of class org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl$EntityInstrumentationMetadataImpl with modifiers "public"
org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.IllegalAccessException: Class org.apache.struts2.json.JSONWriter can not access a member of class org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl$EntityInstrumentationMetadataImpl with modifiers "public" 
```

这是我返回 JSON 的操作类

```
public class GetTagsAction extends ActionSupport{       
    public String execute(){

        Gson gson = new Gson();
        String tags = gson.toJson(audioTaggingService.findTagsByName(q));
        System.out.println(tags);

        return Action.SUCCESS;
    }

    public String getQ() {
        return q;
    }

    public void setQ(String q) {
        this.q = q;
    }

    public AudioTaggingService getAudioTaggingService() {
        return audioTaggingService;
    }

    public void setAudioTaggingService(AudioTaggingService audioTaggingService) {
        this.audioTaggingService = audioTaggingService;
    }

    public String getTags() {
        return tags;
    }

    public void setTags(String tags) {
        this.tags = tags;
    }

    private String q;
    private AudioTaggingService audioTaggingService;
    private String tags;
} 
```

这是包裹

```
<package name="default" namespace="/" extends="json-default">
    <!--  Get AJAX Related Actions -->
    <action name="tags" class="tags">
        <result type="json" />
    </action>
</package> 
```

我正在使用`Struts2-JSON-plugin`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:02:48.077

错误是由于插件正在尝试转换整个对象图，并且看起来插件正在尝试通过 audioTaggingService 转换您的数据库层。您需要在 struts XML 中指定“root”参数

```
<action name="tags" class="tags">
    <result type="json">
      <param name="root">tags</param>
    </result>
</action> 
```

并在您的操作中提供一个 getTags() 方法。

但是，我不确定这是否会有所帮助。我不确定当您尝试对已经包含 JSON 数据的字符串进行 JSON 化处理时会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:53:12.450

您需要在 xml 中编辑以下行

```
 <action name="tags" class="tags"> 
```

属性`class`正在寻找详细的类名称，例如`com.your.package.YourAction`

详细[在这里](http://struts.apache.org/2.2.3/docs/json-plugin.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T07:19:56.910

如果 JSON 数据之一为空，则有时会出现此错误，转换时不会出错，但在处理数据时会出错。

# salesforce - 是否可以将查询参数添加到查找页面

> ID：14599546
> 
> 赞同：0
> 
> 时间：2013-01-30T08:26:07.743
> 
> 标签：salesforce, visualforce

以下 url 带走一个查找页面，该页面返回所有联系人记录。

[https://c.cs7.visual.force.com/_ui/common/data/LookupPage?lkfm=j_id0:j_id2&lknm=j_id0:j_id2:j_id30:who&lktp=003&lksrch=](https://c.cs7.visual.force.com/_ui/common/data/LookupPage?lkfm=j_id0:j_id2&lknm=j_id0:j_id2:j_id30:who&lktp=003&lksrch=)

我想限制查找页面中返回的联系人记录。是否有类似的查询参数：

```
lkqry=SELECT FirstName FROM Contact WHERE id='012345678912345' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:59:58.637

无法自定义标准查找弹出页面。

相反，您必须创建自己的。创建它并不太难，但需要一些时间进行测试和所有这些。

Jeff Douglas 有一个我用过的很棒的教程。

[http://blog.jeffdouglas.com/2011/08/12/roll-your-own-salesforce-lookup-popup-window/](http://blog.jeffdouglas.com/2011/08/12/roll-your-own-salesforce-lookup-popup-window/)

# .net - 使用 Windows 7 为 WCF 创建证书？

> ID：14599547
> 
> 赞同：0
> 
> 时间：2013-01-30T08:26:17.877
> 
> 标签：.net, wcf, windows-7, certificate

我需要为 .NET WCF TCP Selfhost 应用程序获取一个简单的证书（根证书和证书）。我知道该证书仅用于测试。

这是一个展示如何创建自签名证书的网站：http: [//www.deepakkapoor.net/generate-self-signed-certificates-on-windows-7/](http://www.deepakkapoor.net/generate-self-signed-certificates-on-windows-7/)但这只会给我一个文件？我不需要 2 个文件（根和证书）吗？

同样重要的是，此证书将在另一个域中工作（不知道颁发证书的计算机）。

我只需要一个证书来加密基于 WCF/TCP/Selfhost/Winforms 的服务和客户端之间的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:05:29.197

我没有尝试过，但我认为 Windows 非服务器版本没有内置/易于查找的功能来设置您自己的根目录。

我将使用 OpenSSL 生成根并生成证书并用根签名。

这是一个指南，告诉您如何做到这一点。

[http://thephuck.com/virtualization/creating-your-own-root-ca-with-openssl-on-windows-and-signing-vcenter-or-srm-certs/](http://thephuck.com/virtualization/creating-your-own-root-ca-with-openssl-on-windows-and-signing-vcenter-or-srm-certs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:46:36.637

我最终在本文中使用了第 8 点：[http ://robbincremers.me/2011/12/29/wcf-message-security-and-client-certificate-authentication-with-self-signed-certificates/](http://robbincremers.me/2011/12/29/wcf-message-security-and-client-certificate-authentication-with-self-signed-certificates/)

# php - 我的 CURL 到谷歌电子表格表单应该使用什么文本编码？

> ID：14599548
> 
> 赞同：0
> 
> 时间：2013-01-30T08:26:29.630
> 
> 标签：php, curl, encoding

Google 电子表格可以创建允许您将数据发布到电子表格的表单。这不是通过 Google API 完成的。

我正在使用以下代码将数据发布到表单：

```
<?php
$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL,$googleformURL);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
curl_setopt ($ch, CURLOPT_TIMEOUT, 60);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata);
curl_setopt ($ch, CURLOPT_POST, 1);
$data = curl_exec ($ch);
curl_close($ch);
//echo $data;
//Redirect to your thank you page
header( "Location: $thankyou" ) ;
?> 
```

这很好用，但是，当我查看 Google 电子表格中的数据时，所有特殊字符（例如 ÅÄÖ）都丢失了。我猜这是一个编码错误。我应该如何更改代码才能使其正常工作？以下是原始表格的示例。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><link rel="shortcut icon" href="//ssl.gstatic.com/docs/spreadsheets/forms/favicon_jfk2.png" type="image/x-icon">
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Untitled form</title>

<link href='/static/spreadsheets/client/css/779923916-published_form_compiled.css' type='text/css' rel='stylesheet'>
</head>
<body class="ss-base-body" dir="ltr" itemscope itemtype="http://schema.org/CreativeWork/FormObject"><meta itemprop="name" content="Untitled form">

<meta itemprop="embedUrl" content="https://docs.google.com/spreadsheet/embeddedform?formkey=dGJ3ZTdNQ0xwQUJKeGp0dVpDbElVTHc6MQ">
<meta itemprop="faviconUrl" content="//ssl.gstatic.com/docs/spreadsheets/forms/favicon_jfk2.png">

<div class="ss-form-container">
<div class="ss-form-heading"><h1 class="ss-form-title">Untitled form</h1>
<p></p>

<hr class="ss-email-break" style="display:none;">
</div>
<div class="ss-form"><form action="https://docs.google.com/spreadsheet/formResponse?formkey=dGJ3ZTdNQ0xwQUJKeGp0dVpDbElVTHc6MQ&amp;ifq" method="POST" id="ss-form">

<br>
<div class="errorbox-good">
<div class="ss-item  ss-text"><div class="ss-form-entry"><label class="ss-q-title" for="entry_0">Namn
</label>
<label class="ss-q-help" for="entry_0"></label>
<input type="text" name="entry.0.single" value="" class="ss-q-short" id="entry_0"></div></div></div>
<br> <div class="errorbox-good">
<div class="ss-item  ss-text"><div class="ss-form-entry"><label class="ss-q-title" for="entry_1">Gatuadress
</label>
<label class="ss-q-help" for="entry_1"></label>
<input type="text" name="entry.1.single" value="" class="ss-q-short" id="entry_1"></div></div></div>
<br> <div class="errorbox-good">
<div class="ss-item  ss-text"><div class="ss-form-entry"><label class="ss-q-title" for="entry_2">Postnummer
</label>
<label class="ss-q-help" for="entry_2"></label>
<input type="text" name="entry.2.single" value="" class="ss-q-short" id="entry_2"></div></div></div>
<br> <div class="errorbox-good">
<div class="ss-item  ss-text"><div class="ss-form-entry"><label class="ss-q-title" for="entry_3">Ort
</label>
<label class="ss-q-help" for="entry_3"></label>
<input type="text" name="entry.3.single" value="" class="ss-q-short" id="entry_3"></div></div></div>
<br> <div class="errorbox-good">
<div class="ss-item  ss-text"><div class="ss-form-entry"><label class="ss-q-title" for="entry_4">E-post
</label>
<label class="ss-q-help" for="entry_4"></label>
<input type="text" name="entry.4.single" value="" class="ss-q-short" id="entry_4"></div></div></div>
<br> <div class="errorbox-good">
<div class="ss-item  ss-text"><div class="ss-form-entry"><label class="ss-q-title" for="entry_5">Sort
</label>
<label class="ss-q-help" for="entry_5"></label>
<input type="text" name="entry.5.single" value="" class="ss-q-short" id="entry_5"></div></div></div>
<br> <div class="errorbox-good">
<div class="ss-item  ss-paragraph-text"><div class="ss-form-entry"><label class="ss-q-title" for="entry_7">Story
</label>
<label class="ss-q-help" for="entry_7"></label>
<textarea name="entry.7.single" rows="8" cols="75" class="ss-q-long" id="entry_7"></textarea></div></div></div>
<br>
<input type="hidden" name="pageNumber" value="0">
<input type="hidden" name="backupCache" value="">

<div class="ss-item ss-navigate"><div class="ss-form-entry">
<input type="submit" name="submit" value="Submit"></div></div></form>
<script type="text/javascript">

      (function() {
var divs = document.getElementById('ss-form').
getElementsByTagName('div');
var numDivs = divs.length;
for (var j = 0; j < numDivs; j++) {
if (divs[j].className == 'errorbox-bad') {
divs[j].lastChild.firstChild.lastChild.focus();
return;
}
}
for (var i = 0; i < numDivs; i++) {
var div = divs[i];
if (div.className == 'ss-form-entry' &&
div.firstChild &&
div.firstChild.className == 'ss-q-title') {
div.lastChild.focus();
return;
}
}
})();
      </script></div>
<div class="ss-footer"><div class="ss-attribution"></div>
<div class="ss-legal"><span class="ss-powered-by">Powered by <a href="http://docs.google.com">Google Docs</a></span>
<span class="ss-terms"><small><a href="https://docs.google.com/spreadsheet/reportabuse?formkey=dGJ3ZTdNQ0xwQUJKeGp0dVpDbElVTHc6MQ&amp;source=https://docs.google.com/spreadsheet/viewform?formkey%3DdGJ3ZTdNQ0xwQUJKeGp0dVpDbElVTHc6MQ">Report Abuse</a>
-
<a href="http://www.google.com/accounts/TOS">Terms of Service</a>
-
<a href="http://www.google.com/google-d-s/terms.html">Additional Terms</a></small></span></div></div></div></body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:48:26.880

如果您想模拟 html 表单发出的 POST 请求，您需要确保：

*   `Content-Type`请求中的标头设置为`application/x-www-form-urlencoded`. 这已经由 CURL 自动完成，因为您设置`CURLOPT_POST=1`
*   您的发布数据采用`key1=value&key2=value2`格式，其中键和值是 url 编码的

在 PHP 中，只要调用`urlencode` 键和值字符串（不要对分隔符进行 urlencode`&`和`=`，当它们充当分隔符时 - 只是键和值）就足够了，只要它们在物理上是 UTF-8 字符串。

PHP 字符串的物理编码完全取决于它的来源。如果您在源文件中逐字写入字符串，则编码取决于 PHP 源文件的编码，该编码是在用于保存文件的文本编辑器的设置中设置的。如果从 MySQL 等数据库中检索字符串，则取决于连接编码。

您可以像这样从数组构建 postdata 字符串：

```
function arrayToPostData($data) {
    $ret = array();

    foreach( $data as $key => $value ) {
        $ret[] = urlencode($key) . "=" . urlencode($value);
    }

    return implode("&", $ret );
} 
```

在哪里给它一个 UTF-8 编码的键值对数组：

```
arrayToPostData(array(
        "ö" => "ä",
        "å" => "aaa"
)); 
```

如果数组中的字符串物理上是 UTF-8，您将看到正确的结果：

```
%C3%B6=%C3%A4&%C3%A5=aaa 
```

这是您作为 postdata 传递给 curl 的内容

# config - SONAR：为 java 项目配置重复行

> ID：14599554
> 
> 赞同：2
> 
> 时间：2013-01-30T08:27:14.897
> 
> 标签：config, sonarqube, duplication

也许这是一个愚蠢的问题，但我不知道在哪里可以配置最少的代码行以在 SONAR 中进行重复检查。在项目设置中只有一个开关可以打开跨项目检查。有任何想法吗？

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:40:56.020

我们对此有公开票：http: [//jira.codehaus.org/browse/SONARJAVA-91](http://jira.codehaus.org/browse/SONARJAVA-91)

作为背景：自 2011 年底以来，Sonar 一直在使用自己的重复检测机制（来自 Sonar 2.11 IIRC）。当时决定行数或令牌数不应该是可配置的，以防止欺骗引擎的可能性。但是，由于检测机制尚未完善 ;-)，我们将允许同时设置“sonar.cpd.java.minimumLines”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:40:28.923

此功能仅适用于 Java 以外的语言 ( [http://docs.codehaus.org/display/SONAR/Analysis+Parameters#AnalysisParameters-Duplications](http://docs.codehaus.org/display/SONAR/Analysis+Parameters#AnalysisParameters-Duplications) )

# javascript - jQuery 工具提示添加换行符

> ID：14599562
> 
> 赞同：30
> 
> 时间：2013-01-30T08:27:51.667
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

所以，我想获取我有几个 div 的内容`<br/>`，然后使用 jQuery 工具提示小部件将其作为标题属性传递。我希望这些线条出现在工具提示内的另一个下方。谢谢。到目前为止的代码是：

**CSS**

```
.Lines {
    width: 125px;
    height:20px;
    overflow:auto;
} 
```

**JavaScript**

```
$(function () {
    $(document).tooltip();

    $(".Lines").hover(function () {
        IaTxt = $(this).html()

        $(this).prop('title', IaTxt)

    })
}); 
```

**HTML**

```
<div class="Lines">
    First line.
    <br/>Second line.
    <br/>Third line!
    <br/>Fourth line?
</div> 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-08-28T08:37:56.383

有一个纯 CSS 解决方案。使用 \n 换行，并添加此 CSS 样式：

```
.ui-tooltip {
    white-space: pre-line;
} 
```

如果要保留空格，也可以使用 pre 或 pre-wrap 代替 pre-line。请参阅[https://developer.mozilla.org/en-US/docs/Web/CSS/white-space](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-30T08:35:14.417

只需将实体`&#10;`用于标题属性中的换行符。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-18T20:33:18.703

这是我用最新的 jquery / jqueryui 来做的技巧（假设你想要工具提示的所有项目都有类'jqtooltip'，它们有标题标签，并且标题有一个管道字符作为行分隔符：

```
$('.jqtooltip').tooltip({ 
  content: function(callback) { 
     callback($(this).prop('title').replace('|', '<br />')); 
  }
}); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-30T08:34:34.300

您可以使用工具提示小部件的“内容”选项。也可以看看：

[http://jqueryui.com/tooltip/#custom-content](http://jqueryui.com/tooltip/#custom-content)

简短的例子：

```
 $(function() {
    $( document ).tooltip({
      content: function() {
        return 'foo'
      }
    });
  }); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-10-02T08:41:45.280

您可以将 HTML 直接输入到 Title 属性中，然后简单地调用以下命令：

```
$(document).tooltip({
  content: function (callback) {
     callback($(this).prop('title'));
  }
}); 
```

这样，您的 HTML 将被呈现，而不是被转义和字面书写。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-12T14:47:56.193

更好地使用这个：

```
$(document).tooltip({
   content: function () {
     return $( this ).prop( 'title' ).replace( '|', '<br />' );
   }
}); 
```

我有`function(callback)`一个工具提示问题，它没有关闭

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-06-10T12:36:25.333

我用这个：

```
 $("[title]").each(function(){
            $(this).tooltip({ content: $(this).attr("title")});
        }); 
```

这意味着所有具有 title 属性的元素都将使用 jquery 工具提示，并且工具提示内容将使用 title 属性的值。内容允许html。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-11-08T17:45:11.980

我选择了 ScottRFrost 答案的修改版本。他的示例的问题是 .replace 仅替换字符串中字符的第一个实例。这是一个修改后的版本，它将使用正则表达式的 /g （全局）来修改整个字符串中字符的所有实例。

```
$('.jqtooltip').tooltip({ 
   content: function (callback) {
      callback($(this).prop('title').replace(new RegExp("\\|", "g"), '<br />'));
   }
}); 
```

# php - Doctrine 1.2 hasOne 覆盖 hasMany 关系

> ID：14599569
> 
> 赞同：0
> 
> 时间：2013-01-30T08:28:10.540
> 
> 标签：php, doctrine, doctrine-1.2

在一个 Doctrine 1.2 项目中，我们有一个用户

```
User:
  columns:
    id:
      type: integer(4)
      autoincrement: true
      primary: true
    payment_method:
      type: integer(4)
  relations:
    DefaultPaymentMethod:
      class: PaymentMethod
      local: payment_method
      foreignAlias: Users
      foreign: id
      type: one 
```

用他的 PaymentMethods

```
PaymentMethod:
  actAs:
    BS_Db_Template_SoftDelete:
  columns:
    id:
      type: integer(4)
      primary: true
      autoincrement: true
    user:
      type: integer(4)
  relations:
    User:
      local: user
      foreign: id
      foreignAlias: PaymentMethods
      type: one 
```

如果我尝试设置他的一种付款方式和他的默认付款方式...

```
$user = new User();

$paymentMethod = new PaymentMethod();
$paymentMethod->set('User',$user);

$user->set('DefaultPaymentMethod',$paymentMethod);

$user->save(); 
```

...这条线

```
$user->set('DefaultPaymentMethod',$paymentMethod); 
```

...删除他的付款方式（因此未设置 PaymentMethod 的用户），当我尝试保存它时。

我做错了什么（逻辑问题）还是这是一个教义错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:43:27.157

为什么要两次定义付款方式？

你的外键`PaymentMethod`是`payment_method`. 所以，如果你定义一次，就可以了。

你可以试试：

```
$user = new User();

$paymentMethod = new PaymentMethod();
$paymentMethod->setUser($user);
$paymentMethod->save();

$user->setDefaultPaymentMethod($paymentMethod);
$user->save(); 
```

`set`方法使用关系名称来定义关系。

# magento - Magento API 重复 SKU

> ID：14599572
> 
> 赞同：1
> 
> 时间：2013-01-30T08:28:15.113
> 
> 标签：magento, duplicates

使用 Magento API 导入 ~60.000 产品我设法在 Magento 中导入重复的 SKU，通常这会引发“重复 SKU”异常，但不知何故它只是添加了双重产品。

任何人都知道出了什么问题（一些索引缓存或什么？）？

这是导入脚本代码的（相关）部分：

```
<?php 
/** 
 * @param      $data 
 * @param bool $retry 
 * @return bool 
 */ 
public function updateProduct($data, $retry = true) { 
    //Calculate product hash 
    $hash  = md5(serialize($data)); 

    try { 
        $manageStock = 0; 
        if($data->qty <= 0) { 
            $manageStock = 1; 
        } 
        $result = $this->client->catalogProductUpdate($this->session, $data->prefixed_sku, array( 
            'categories' => $data->categories, 
            'status' => empty($data->status) ? '1' : (int) $data->status, 
            'cost'  => $data->cost, 
            'price' => $data->price, 
            'tax_class_id' => '2', 
            'visibility' => '4', 
            'stock_data' => array( 
                'qty' => $data->qty, 
                'is_in_stock' => $data->is_in_stock, 
                'manage_stock' => $manageStock 
            ), 
            'additional_attributes' => array('cost' => $data->cost) 
        ), null, 'sku'); 
    } 
    catch (Exception $e) { 
        $result = $this->exceptionLogAndRetry($e, 'updateProduct', $retry, $data); 
    } 
    return $result; 
} 

/** 
 * @param      $data 
 * @param bool $retry 
 * @return bool 
 */ 
public function addProduct($data, $retry = true) { 
    //Calculate product hash 
    $hash = md5(serialize($data)); 

    if(!$this->attributeSet) { 
        $attributeSets = $this->client->catalogProductAttributeSetList($this->session); 
        foreach($attributeSets as $attributeSet) { 
            if(strtolower($attributeSet->name) == 'default') { 
                $this->attributeSet = $attributeSet; 
            } 
        } 
        if(!$this->attributeSet) { 
            $this->attributeSet = current($attributeSets); 
        } 
    } 
    try { 
        $stock = array( 
            'qty' => $data->qty, 
            'is_in_stock' => $data->is_in_stock, 
            'use_config_manage_stock' => $data->use_config_manage_stock 
        ); 

        if($data->qty <= 0) { 
            $stock['manage_stock'] = 1; 
        } 

        $result = $this->client->catalogProductCreate($this->session, 'simple', $this->attributeSet->set_id, $data->prefixed_sku, array( 
            'categories' => $data->categories, 
            'websites' => array($data->website_id), 
            'name' => $data->name, 
            'description' => $data->description, 
            'short_description' => $data->short_description, 
            'weight' => $data->weight, 
            'cost'  => $data->cost, 
            'status' => empty($data->status) ? '1' : (int) $data->status, 
            'url_key' => $data->url_key, 
            'url_path' => $data->url_path, 
            'visibility' => '4', 
            'price' => $data->price, 
            'tax_class_id' => '2', 
            'meta_title' => $data->meta_title, 
            'meta_keyword' => $data->meta_keyword, 
            'meta_description' => $data->meta_description, 
            'stock_data' => $stock, 
            'additional_attributes' => array('cost' => $data->cost) 
        )); 
    } 
    catch (Exception $e) { 
        $result = $this->exceptionLogAndRetry($e, 'addProduct', $retry, $data); 

     } 

    for ($i = 1; $i <= 5; $i++) 
    { 
        $cur = $i; 
        if ($cur == 1) 
        { 
            $cur = ''; 
        } 

        if (!empty($data->{"product_image$cur"}) && file_exists($data->{"product_image$cur"}) && is_numeric($result)) 
        { 
            $file = array( 
                'content' => base64_encode(@file_get_contents($data->{"product_image$cur"})), 
                'mime'    => $data->{'product_mime'.$cur} 
            ); 
            try { 
                $imgRes = $this->client->catalogProductAttributeMediaCreate( 
                    $this->session, 
                    $result, 
                    array('file' => $file, 'label' => '', 'position' => '100', 'types' => array('thumbnail', 'small_image', 'image'), 'exclude' => 0) 
                ); 
            } 
            catch (Exception $e) { 
                //Do nothing 
            } 
        } 

    } 

    $return = $result; 

    return $return; 
} 
```

# selenium - Cucumber，一个总是会被调用的方法？硒网络驱动程序。

> ID：14599574
> 
> 赞同：0
> 
> 时间：2013-01-30T08:28:17.463
> 
> 标签：selenium, cucumber, selenium-webdriver, web-testing

我正在使用带有黄瓜的 selenium webdriver 编写测试。该网页非常基于ajax。我想要做的是，每当黄瓜调用一个方法时，它应该总是调用其他方法。

所以在我的功能文件中说我有：

当我打招呼时

调用方法

问好（）

在这之后我想要

等待Ajax()

被称为。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:01:59.117

如果要在每个 Cucumber 步骤之后调用该方法，可以使用 AfterStep 钩子：

```
AfterStep do |scenario|
  # Do something after each step.
end 
```

# java - 从另一个类添加已声明组件的操作侦听器

> ID：14599583
> 
> 赞同：-3
> 
> 时间：2013-01-30T08:29:46.097
> 
> 标签：java, swing, actionlistener

在这里，我想在 B 类中注册 newBTN 的动作监听器。

注意 :: newBTN 未添加且未初始化。此外，A 类不在我的控制范围内，无法更改。

```
class A {
    private JButton newBTN = null;
} 
```

如何访问 A 类的 newBTN，以便从 B 类注册 newBTN 的动作侦听器？

```
class B {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:54:48.983

[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)将允许您访问现有类的字段。

**警告**：这是一种*非常*糟糕的做法，在开始这条道路之前，您应该尝试探索所有可能的途径。这可能会*严重*损害您正在访问的类的功能。你必须问自己，*“为什么这个领域是私有的？”*

```
public class TestReflection {

    public static void main(String[] args) {
        new TestReflection();
    }

    public TestReflection() {

        PrivateAccessOnly instance = new PrivateAccessOnly();

        try {
            Field field = PrivateAccessOnly.class.getDeclaredField("field");
            field.setAccessible(true);
            System.out.println("Current value = " + field.get(instance));
            field.set(instance, new JButton("Testing"));
            System.out.println("New value = " + field.get(instance));
        } catch (NoSuchFieldException | SecurityException | IllegalArgumentException | IllegalAccessException exp) {
            exp.printStackTrace();
        }

    }

    public class PrivateAccessOnly {

        private JButton field;

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:39:18.647

您需要考虑很多事情。

1.  A 类的实例应该可以被 B 类访问，或者 B 类的实例应该能够创建 A 类的实例。
2.  在 A 类中创建按钮的实例。
3.  在 A 类中编写“getter”方法，该方法将返回 A 中的按钮实例（请记住，您必须在此之前完成第 2 步。如果您不在 A 类中创建按钮实例，您将从 getter 方法返回 null 并且它将导致 NullPointerException）。
4.  从类 B 的实例调用此 getter 方法。
5.  在 getter 方法返回的按钮对象上添加动作监听器。

# android - ArrayAdapter 上更新 UnsupportedOperationException 为什么？

> ID：14599587
> 
> 赞同：0
> 
> 时间：2013-01-30T08:29:58.030
> 
> 标签：android, android-fragments, android-arrayadapter

升级 ArrayAdapter 时出现 UnsupportedOperationException。这是我的 ArrayAdapter：

```
public class UserArrayAdapter extends ArrayAdapter<String>{
private final Context context;
private final String[] values;

public UserArrayAdapter(Context context, String[] values) {
    super(context, R.layout.list_user, values);
    this.context = context;
    this.values = values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.list_user, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
    textView.setText(values[position]);

    // Change icon based on name
    String s = values[position];

    System.out.println(s);

    if (s.equals("WindowsMobile")) {
        imageView.setImageResource(R.drawable.search_marker);
    } else if (s.equals("iOS")) {
        imageView.setImageResource(R.drawable.androidmarker);
    } else if (s.equals("Blackberry")) {
        imageView.setImageResource(R.drawable.balloon_disclosure);
    } else {
        imageView.setImageResource(R.drawable.androidmarker);
    }

    return rowView;
}
} 
```

我用这个方法在我的 ListFragment 类上调用它：

```
 String[] user = 
        new String[] { "Android", "iOS", "WindowsMobile", "Blackberry"};
.
.
.
private void setListUser(){

    if(getListAdapter()==null){
        // init adapter
        adapter=new UserArrayAdapter(getActivity(),
                user);
        setListAdapter(adapter);  
    }
    else{           
        adapter.add("try");
        adapter.notifyDataSetChanged();
    }           

} 
```

在创建时我可以正确查看我的列表但是当我更新我的列表时我明白了为什么？

```
01-30 09:25:54.439: E/AndroidRuntime(22634): FATAL EXCEPTION: main
01-30 09:25:54.439: E/AndroidRuntime(22634): java.lang.UnsupportedOperationException
01-30 09:25:54.439: E/AndroidRuntime(22634):    at java.util.AbstractList.add(AbstractList.java:404)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at java.util.AbstractList.add(AbstractList.java:425)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at android.widget.ArrayAdapter.add(ArrayAdapter.java:179)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at com.map.manager.AddUser.setListUser(AddUser.java:79)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at com.map.manager.AddUser.SearchByEmailOrName(AddUser.java:98)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at com.map.manager.AddUser.access$0(AddUser.java:84)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at com.map.manager.AddUser$1.onQueryTextSubmit(AddUser.java:110)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at android.widget.SearchView.onSubmitQuery(SearchView.java:1100)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at android.widget.SearchView.access$900(SearchView.java:91)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at android.widget.SearchView$8.onEditorAction(SearchView.java:1078)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at android.widget.TextView.onEditorAction(TextView.java:3790)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at com.android.internal.widget.EditableInputConnection.performEditorAction(EditableInputConnection.java:104)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:297)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:77)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at android.os.Looper.loop(Looper.java:137)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at android.app.ActivityThread.main(ActivityThread.java:4575)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at java.lang.reflect.Method.invokeNative(Native Method)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at java.lang.reflect.Method.invoke(Method.java:511)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
01-30 09:25:54.439: E/AndroidRuntime(22634):    at dalvik.system.NativeStart.main(Native Method) 
```

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T08:45:18.510

public View getView(int position, View convertView, ViewGroup parent) { change to

public View getView(int position, View rowView , ViewGroup parent) {

```
View rowView = inflater.inflate(R.layout.list_user, parent, false); 
```

change to

rowView = inflater.inflate(R.layout.list_user, parent, false);

Just change these 2 lines

# regex - 使用正则表达式强制执行密码规则

> ID：14599588
> 
> 赞同：0
> 
> 时间：2013-01-30T08:30:04.077
> 
> 标签：regex

我发现了可以强制执行一个特殊符号和一个数字以及最少字符的正则表达式模式。

但是有没有人有一个更现实的例子来说明执行 f.ex 的正则表达式。

2 个或更多数字 2 个或更多字母 2 个或更多非字母非数字

最小长度 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:35:15.307

你可以使用这样的东西：

*   2位或更多位：`\d{2,}`
*   2个或更多字母：`[A-Za-z]{2,}`
*   2 个或更多非字母：`[^A-Za-z0-9]{2,}`.

我建议您为不同的检查使用单独的正则表达式。这将有助于制定更可维护的解决方案。出于长度目的，我建议使用`length`大多数语言提供的属性。

# javascript - 在动态创建的 div 中插入视频标签

> ID：14599591
> 
> 赞同：0
> 
> 时间：2013-01-30T08:30:18.990
> 
> 标签：javascript

我是 javascript 的初学者。我想动态创建一个 div，然后我想在该 div 中设置一个视频标签。之后将这个 div 写入正文中，另一个需要是该正文中的所有元素应该不可见。唯一可见的项目必须是该视频。下面的代码是我的尝试。但是它在视频播放时显示了 p 标签元素。请帮帮我。。谢谢。。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">
function dyna()
{

var dynaDiv = document.createElement("div");

dynaDiv.style.background = "red";
dynaDiv.style.color = "white";
dynaDiv.innerHTML = "<video autoplay><source type='video/mp4' src='video/BigBuck_converted.mp4'/></video>";
document.body.appendChild(dynaDiv);
}
</script>
</head>

<body onload="dyna();">
<p>demo</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:45:38.763

得到了答案。我刚刚添加了下面的代码

```
document.body.innerHTML=""; 
```

后

```
dynaDiv.innerHTML = "<video autoplay><source type='videos/mp4' src='videos/Wildlife.mp4'/></video>"; 
```

它可以根据我的需要正常工作..非常感谢.. :)

# ruby - 尝试安装 gem 时如何解决常见错误：检查 sth.(method name) in sth

> ID：14599592
> 
> 赞同：0
> 
> 时间：2013-01-30T08:30:20.587
> 
> 标签：ruby, windows, gem

错误：在某事中检查某事。（方法名）。*** extconf.rb 失败 *** 在 extconf.rb 中，你会看到 ruby​​ 方法 "have_library"

当缺少必要的库和/或头文件时会发生此错误。我已经多次看到这个错误，每次都花费我很多时间。

谁能告诉我如何***在 Windows***上解决这个问题的基础知识？如何***在 windows 上***手动添加必要的库？

# jms - 无法在 nagios 中将数据公开为图形

> ID：14599608
> 
> 赞同：1
> 
> 时间：2013-01-30T08:31:57.320
> 
> 标签：jms, jmx, nagios

我正在使用 Nagios 监控 JMS 队列的消息计数属性。为此，我正在使用 check_jmx 插件，它的输出为“JMX OK MessageCount=400”。我为此服务配置了图表，但是当单击图表图标时，它显示没有可用数据。此服务不生成任何 rrd 文件。如何为我的消息计数监控服务配置图表？在图中我想显示消息计数/小时。我是否必须使用另一个插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:53:39.990

Nagios 绘图插件（例如 PNP4Nagios）使用插件输出的性能数据，即`|`. 在命令行上运行插件，看看它是否在输出性能数据，并通过添加`-vvv`到`check_jmx`.

[有关性能数据的更多信息](http://nagiosplug.sourceforge.net/developer-guidelines.html#AEN201)

[check_jmx 用法](http://code.google.com/p/jmxquery/wiki/Usage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:26:21.047

由于我无法从您的文字中看出您正在使用哪个插件来生成图表，因此我本人推荐 PNP4Nagios。安装后，它工作得非常好。

对于您的问题：

> 它给出的输出为“JMX OK MessageCount=400”。

如果这是消息/小时，您甚至不必更改任何内容。

如果不是，您可以在您的 nagios 的当前版本中包含插件的代码来解决您的问题或自己修改（存储/获取消息计数和时间戳以计算您的消息/小时）

# pdf - 如何在固定位置向现有pdf添加文本？

> ID：14599609
> 
> 赞同：0
> 
> 时间：2013-01-30T08:31:58.093
> 
> 标签：pdf, itext

我必须在现有 A4 pdf 的固定位置插入一个数字。我已经尝试了以下作为第一次测试，但这不起作用（未添加文本）。出了什么问题？这是我的代码：

```
byte[] omrMarks = omrFrame.getOmrImage();
Jpeg img = new Jpeg(omrMarks);
PdfImportedPage page = stamper.getImportedPage(source, pageNum);
PdfContentByte pageContent = stamper.getOverContent(pageNum);

pageContent.addImage(
  img, img.getWidth(), 0, 0, img.getHeight(), 15f, (page.getHeight() - 312));
pageContent.moveTo(10, 200);
pageContent.beginText();
pageContent.setLiteral("Test");
pageContent.endText(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:43:58.790

这个问题有很多问题。

这肯定是错误的：

```
pageContent.moveTo(10, 200);
pageContent.beginText();
pageContent.setLiteral("Test");
pageContent.endText(); 
```

*   该`moveTo()`方法没有意义；它对文本状态对象没有影响。
*   文本状态对象是非法的，因为没有`setFontAndSize()`（很奇怪，这不会抛出 a `RuntimeException`，您使用的是过时的 iText 版本吗？）
*   该`setLiteral()`方法只能用于向内容流添加一些文字 PDF 语法。

例如，类似：

```
pageContent.setLiteral("\n100 100 m\n100 200 l\nS\n"); 
```

仅当您了解以下 PDF 语法画一条线时才应使用：

```
100 100 m
100 200 l
S 
```

从您的问题中可以清楚地看出您不了解 PDF 语法，因此您不应该使用这些方法。相反，您应该使用方便的方法，例如`showTextAligned()`方法，它隐藏了 PDF 的复杂性并为您节省了几行代码。

也许您有充分的理由选择“硬方式”，但在这种情况下，您应该阅读文档，否则您将继续使用诸如`setLiteral()`代替`showText()`、`moveTo()`代替等方法`moveText()`，从而导致您不使用的代码不想让你的雇主看到。

此外，您假设页面的左下角有坐标`(0,0)`。对于在野外发现的大多数 PDF 文档而言，这可能是正确的，但并非所有 PDF 文档都是如此。`MediaBox`不一定是，`[0 0 595 842]`也可能是`[595 842 1190 1684]`。此外：如果有一个`CropBox`？也许您正在添加不可见的内容，因为它被裁剪掉了......

# javascript - 根据正则表达式搜索结果替换单词

> ID：14599611
> 
> 赞同：1
> 
> 时间：2013-01-30T08:32:05.900
> 
> 标签：javascript, regex, replace

我正在尝试找出正则表达式。我对它相当陌生，我想知道我是否可以只用几行代码来完成以下操作。我试图避免在这里使用 switch 语句，所以我想出了执行以下操作的想法：

首先，让我解释一下这将做什么：获取一个字符串并用方法中本地已经存在的变量替换键。像这样的东西：

```
var a = 'item a',
    b = 'item b',
    string = '@a@ and @b@ have been replaced!',
    regex = /\@[a|b]\@/g;

 //now somehow replace this conditionally

 return string.replace(regex, this[replacerResut]); 
```

输出将是这样的： `item a and item b have been replaced!`

不确定是否可能，但很想知道一种方法。有两个以上的局部变量，所以你可以看到为什么我不想使用开关，我的菜鸟说这就是我会做的！所以我知道这是错误的。我正在尝试编写多态代码。感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:37:23.153

这是可能的，因为 Javascript`String#replace`支持回调，但是您应该将替换收集到一个对象（无法以一种干净的方式获得 know 的值）`var a`：`"a"`

```
var replacement={
      a : 'item a',
      b : 'item b'
    },
    string = '@a@ and @b@ have been replaced!',
    regex = /\@([ab])\@/g; //note the added capturing group

 return string.replace(regex, function(whole, key){
   return replacement[key];
 }); 
```

或者：

```
var a = 'item a',
    b = 'item b',
    string = '@a@ and @b@ have been replaced!',
    regex = /\@[ab]\@/g; 

 var replacement = {"@a@":a, "@b@":b};
 return string.replace(regex, function(whole){
   return replacement[whole];
 }); 
```

* * *

边注：

您的正则表达式`@[a|b]@`将匹配`@a@`and `@b@`，而且`@|@`. 使用交替（`@(a|b)@`，或字符组（`@[ab]@`）。不要将它们混淆在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:50:15.837

Jan Dvorak 的回答是前进的方向。就像附录一样，他提供的代码可以变得更加*“干净”*，通过使用替换对象作为闭包对象，因此可以在`replace`调用返回后对其进行 GC：

```
string.replace(expression, (function()
{
    var replacement = {a: 'item a',
                       b: 'item b'};
    return function(match)
    {//the actual callback
        return replacement[match];
    };
}()));//IIFE
//console.log(replacement);//undefined, can't be referenced anymore and may be flagged for GC 
```

你不需要走这么远，但你知道：即使你不能在 JS 中进行实际的内存管理，你也可以通过闭包和作用域来影响标志和清除垃圾收集器......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:44:16.080

如果它们不是局部变量，则可以使用`window`（尽管我称之为邪恶）：

```
string.replace(regex, function (match, group) {
    return window[group];
}); 
```

如果可以的话，将它们放在一个对象中，字符串匹配作为键，替换作为值。

我推荐这个正则表达式：

```
regex = /@(\w+?)@/g; 
```

[http://jsfiddle.net/p4uvW/](http://jsfiddle.net/p4uvW/)

# php - 使用 .htaccess 路由到 codeigniter 中的两个不同应用程序

> ID：14599614
> 
> 赞同：1
> 
> 时间：2013-01-30T08:32:20.057
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite

我有两个类似于此[示例](http://ellislab.com/codeigniter/user-guide/general/managing_apps.html)的 codeigniter 应用程序。我已经创建了两个`index.php`文件，如示例所述（第二个文件名为 oglasnik.php）。我想调用没有调用所需应用程序的文件名的应用程序。

我[以此](https://stackoverflow.com/q/3531504/847773)为例。所以我现在的 .htaccess 文件是：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /PublishWall/
    DirectoryIndex indexl.php

    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ indexl.php?/$1 [L]

    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ indexl.php?/$1 [L]

    RewriteCond $1 !^(indexl\.php|oglasnik\.php|images|robots\.txt)
    RewriteRule ^oglasnik$ oglasnik.php [L]

 </IfModule>

 <IfModule !mod_rewrite.c>

    ErrorDocument 404 /index.php
 </IfModule> 
php_value date.timezone "Europe/Ljubljana"
AddDefaultCharset utf-8 
```

当我路由到 oglasnik 我得到 404 Page Not Found，不应该这条规则：

```
RewriteRule ^oglasnik$ oglasnik.php [L] 
```

将其重写为 oglasnik.php。当我去 oglasnik.php 它工作正常。

我也很想知道这个路由是如何工作的。重写的 url 是否再次访问 .htacces 文件，这是我在[这个答案](https://stackoverflow.com/a/1612329/847773)中看到的。

重写日志：

```
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (3) [perdir C:/wamp/www/PublishWall/] strip per-dir prefix: C:/wamp/www/PublishWall/oglasnik -> oglasnik
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (3) [perdir C:/wamp/www/PublishWall/] applying pattern '^(.*)$' to uri 'oglasnik'
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (4) [perdir C:/wamp/www/PublishWall/] RewriteCond: input='/PublishWall/oglasnik' pattern='^system.*' => not-matched
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (3) [perdir C:/wamp/www/PublishWall/] strip per-dir prefix: C:/wamp/www/PublishWall/oglasnik -> oglasnik
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (3) [perdir C:/wamp/www/PublishWall/] applying pattern '^(.*)$' to uri 'oglasnik'
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (4) [perdir C:/wamp/www/PublishWall/] RewriteCond: input='oglasnik' pattern='!^(indexl\.php|oglasnik\.php|images|robots\.txt)' => matched
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (4) [perdir C:/wamp/www/PublishWall/] RewriteCond: input='/PublishWall/oglasnik' pattern='^application.*' => not-matched
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (3) [perdir C:/wamp/www/PublishWall/] strip per-dir prefix: C:/wamp/www/PublishWall/oglasnik -> oglasnik
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (3) [perdir C:/wamp/www/PublishWall/] applying pattern '^(oglasnik)$' to uri 'oglasnik'
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (2) [perdir C:/wamp/www/PublishWall/] rewrite 'oglasnik' -> 'oglasnik.php'
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (3) [perdir C:/wamp/www/PublishWall/] add per-dir prefix: oglasnik.php -> C:/wamp/www/PublishWall/oglasnik.php
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (2) [perdir C:/wamp/www/PublishWall/] trying to replace prefix C:/wamp/www/PublishWall/ with /PublishWall/
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (4) add subst prefix: oglasnik.php -> /PublishWall/oglasnik.php
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#15b10d8/initial] (1) [perdir C:/wamp/www/PublishWall/] internal redirect with /PublishWall/oglasnik.php [INTERNAL REDIRECT]
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#151b500/initial/redir#1] (3) [perdir C:/wamp/www/PublishWall/] strip per-dir prefix: C:/wamp/www/PublishWall/oglasnik.php -> oglasnik.php
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#151b500/initial/redir#1] (3) [perdir C:/wamp/www/PublishWall/] applying pattern '^(.*)$' to uri 'oglasnik.php'
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#151b500/initial/redir#1] (4) [perdir C:/wamp/www/PublishWall/] RewriteCond: input='/PublishWall/oglasnik.php' pattern='^system.*' => not-matched
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#151b500/initial/redir#1] (3) [perdir C:/wamp/www/PublishWall/] strip per-dir prefix: C:/wamp/www/PublishWall/oglasnik.php -> oglasnik.php
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#151b500/initial/redir#1] (3) [perdir C:/wamp/www/PublishWall/] applying pattern '^(.*)$' to uri 'oglasnik.php'
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#151b500/initial/redir#1] (4) [perdir C:/wamp/www/PublishWall/] RewriteCond: input='oglasnik.php' pattern='!^(indexl\.php|oglasnik\.php|images|robots\.txt)' => not-matched
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#151b500/initial/redir#1] (3) [perdir C:/wamp/www/PublishWall/] strip per-dir prefix: C:/wamp/www/PublishWall/oglasnik.php -> oglasnik.php
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#151b500/initial/redir#1] (3) [perdir C:/wamp/www/PublishWall/] applying pattern '^(oglasnik)$' to uri 'oglasnik.php'
127.0.0.1 - - [30/Jan/2013:23:35:36 +0100] [localhost/sid#991d38][rid#151b500/initial/redir#1] (1) [perdir C:/wamp/www/PublishWall/] pass through C:/wamp/www/PublishWall/oglasnik.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:43:27.663

你可能想试试这个：

```
RewriteCond %{REQUEST_URI} !^(indexl\.php|oglasnik\.php|images|robots\.txt)
RewriteRule ^oglasnik.*$ oglasnik.php?/$1 [L] 
```

# javascript - 带有javascript全局变量的Phonegap

> ID：14599615
> 
> 赞同：1
> 
> 时间：2013-01-30T08:32:20.263
> 
> 标签：javascript, android, html, cordova

我现在正在学习如何使用phonegap。我在Android方面有一点经验。

由于Android是基于Java的，如果我们想要有全局变量，我们可以简单地定义一个静态变量来处理它。因此，我们将能够在应用程序中的所有活动中引用静态变量。

但是 phonegap 是基于 javascript 的，我将如何创建能够在所有 html 页面中使用的全局变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:39:08.927

Javascript 提供本地存储。

看看这个答案：[“应用程序设置”的电话差距实现](https://stackoverflow.com/questions/7845260/phone-gap-implementation-of-application-settings)

# php - 在 PHP 中的数组对象中搜索值

> ID：14599619
> 
> 赞同：1
> 
> 时间：2013-01-30T08:32:30.703
> 
> 标签：php, arrays, object, arrayobject

```
Array
(
    [0] => Array
        (
            [ADADCD] =>       
        )
    [1] => Array
        (
            [ADADCD] => ?     
        )

    [2] => Array
        (
            [ADADCD] => HOSP1 
        )

    [3] => Array
        (
            [ADADCD] => HOSP2 
        )

    [4] => Array
        (
            [ADADCD] => H1    
        )

) 
```

我们有一个这样的数组，我想搜索一个特定的值，比如**HOSP2**，获取索引值的过程是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:35:31.337

试试看[`array_search`](http://php.net/array_search)

```
$key = array_search(array('ADADCD' => 'HOSP1'), $inputArray); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T08:35:47.680

遍历数组并返回找到所需值的索引。

```
$searchIndex = -1;
foreach ( $yourArray as $k => $v ) {
  if ( $v['ADADCD'] == 'search value' ) {
    $searchIndex = $k;
    break;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:36:09.643

### 您可以使用[`foreach()`](http://php.net/manual/en/control-structures.foreach.php)和的组合[`in_array()`](http://php.net/manual/en/function.in-array.php)。

因此，首先使用 . 遍历数组的所有索引`foreach()`。

```
foreach ($array as $key => $subarray)
   if (in_array($string, $subarray))
       return $key; 
```

所以，现在对于这样的数组：

```
Array
(
    [0] => Array
        (
            [ADADCD] =>       
        )
    [1] => Array
        (
            [ADADCD] => ?     
        )

    [2] => Array
        (
            [ADADCD] => HOSP1 
        )

    [3] => Array
        (
            [ADADCD] => HOSP2 
        )

    [4] => Array
        (
            [ADADCD] => H1    
        )
) 
```

### 输出

```
2 
```

### 小提琴： http: [//phpfiddle.org/main/code/t6b-g9r](http://phpfiddle.org/main/code/t6b-g9r)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-30T08:35:01.257

```
<?php
$array = your array;
$key = array_search('HOSP2', $array);
echo $key;
?> 
```

输出： ADADCD

[http://php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)

# shell - bash 中的参数检查

> ID：14599621
> 
> 赞同：0
> 
> 时间：2013-01-30T08:32:39.267
> 
> 标签：shell

我正在尝试检查传递给脚本的参数。它至少应该有 2 个参数，最多可以有 3 个参数。如果存在，第三个参数应该是“-I”。我虽然可以做到这一点，但它不起作用。

```
if [  \( ! $# = 2 \) -o \( $# = 3 -a "$3" != "-I" \)  ];then
exit 0
fi 
```

我究竟做错了什么？有关如何使其工作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:34:07.003

在`bash`中，您可以执行以下操作：

```
#!/bin/bash

if [[ $# -eq 3 ]] ; then
    if "$3" != "-I ]] ; then
        echo "Argument 3 must be '-I' if present"
        exit
    fi
fi

if [[ $# -ne 2 && $# -ne 3 ]] ; then
    echo "Needs two or three arguments"
    exit
fi

echo "[$1]"
echo "[$2]"
echo "[$3]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:45:39.970

Try this

```
#!/bin/bash
MAX_ARGUMENTS=3
echo $#
if [ $# -eq $MAX_ARGUMENTS ]
then
    echo "hi"
    last=${!#}
    if [ $last == "-l" ]
    then
            echo "its l"
    else
            echo "its not l"
    fi
    else
    echo "bye"
fi 
```

# c# - 如何在电子邮件正文部分发送外部图像？

> ID：14599623
> 
> 赞同：2
> 
> 时间：2013-01-30T08:32:41.517
> 
> 标签：c#, html, .net, image, email

我想发送包含`HTML contents with images`. 因此，任何在正文内容中发送外部图像的方式都不是作为附件。

我的图像位于`image`我的项目文件夹下...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:42:41.247

假设您使用的是 .net类型`MailMessage`，您可以像通常使用绝对路径（例如.`IsBodyHtml = true;``<img>``www.example.com/images/image.png`

为了清洁起见，我从 XML 文件中读取我的 HTML，例如

```
private MailMessage GetHtmlEmail()
{
    MailMessage mail = new MailMessage();
    XmlTextReader xReader = new XmlTextReader(Server.MapPath("~/ConfigFiles/Email.xml"));

    while (xReader.Read())
    {
        switch (xReader.Name)
        {
            case "ToAddress":
                mail.To.Add(xReader.ReadElementContentAs(typeof(string), null).ToString());
                break;
            case "FromAddress":
                mail.From = new MailAddress(xReader.ReadElementContentAs(typeof(string), null).ToString());
                break;
            case "Subject":
                mail.Subject = xReader.ReadElementContentAs(typeof(string), null).ToString();
                break;
            case "EmailBody":
                mail.Body = xReader.ReadElementContentAs(typeof(string), null).ToString();
                break;
            default:
                break;
        }
    }

    return mail;
} 
```

和 XML 文件...

```
<?xml version="1.0" encoding="utf-8" ?>
<Email>
    <FromAddress>website@domain.co.uk</FromAddress>
    <ToAddress>to@domain.co.uk</ToAddress>
    <Subject>Contact us enquiry</Subject>
    <EmailBody>
        <![CDATA[
        <html>
           <head>
              <title>Customer Enquiry</title>
           </head>
            <div valign="top">
                <!-- center -->
                <font color="#666666" face="Arial, Helvetica, sans-serif, Verdana" size="2">
                  <p>You have recieved a new customer enquiry.</p>
                  <p><strong>Name: </strong>{0}<br />
                  <strong>Email: </strong>{1}<br />
                  <strong>Tel: </strong>{2}<br /></p>
                  <p><strong>Message: </strong>{3}</p>
                </font>
            </div>
          </html> 
      ]]>
    </EmailBody>
</Email> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:22:47.307

```
Guid contentId = Guid.NewGuid().ToString();

AlternateView htmlView = AlternateView.CreateAlternateViewFromString(
  "This is a image:<br /><img src=\"cid:" + contentId + "\" />", 
  null, "text/html");

ContentType ct = new ContentType(MediaTypeNames.Image.Jpeg);

LinkedResource embedded = new LinkedResource("c:\\image1.jpg", ct);
embedded.ContentId = contentId;
htmlView.LinkedResources.Add(embedded);

mail.AlternateViews.Add(altView);
SmtpClient client = new SmtpClient();
client.Send(mail); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T08:36:25.477

我可能会通过将图像存储在我的托管服务上并使用普通标签链接到它来做到这一点，其中 src 是指向它存储位置的链接。这样，只要您的主机没有出现故障，您就可以随时获取图像。

请记住确保电子邮件的 HTML 值设置为 true，这样就可以了。

# python - 查找网站下的所有链接

> ID：14599629
> 
> 赞同：-1
> 
> 时间：2013-01-30T08:33:01.123
> 
> 标签：python, brute-force, penetration-testing

如何找到网站下的所有目录和链接？请注意，没有从主页到所有其他页面的链接。例如，如果我有一个像 users.company.com 这样的域，每个用户都会有一个类似 users.company.com/john、users.company.com/peter 等的链接。但我不知道有多少用户什么是所有链接，我想强力检查所有链接。如果我想编写一个 python 脚本来完成这项工作，我可以从哪里获得在 python 中开发它的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:44:10.120

由于您没有任何从主页指向其他页面的链接。您拥有的唯一信息是主页的 URL 和用于访问用户的 URL 模式。

然后我看到它的唯一可能性是使用名称字典，或所有可能的长度有限的字符串排列。然后访问其中的每一个。

查看[http://docs.python.org/2/library/urllib.html](http://docs.python.org/2/library/urllib.html)以了解如何创建 HTTP 请求/打开 URL。

然后编写一个循环遍历所有名称/字符串排列并调用 URL。

您可能会考虑同时执行此操作，这应该相对容易实现：[http ://en.wikipedia.org/wiki/Embarrassingly_parallel](http://en.wikipedia.org/wiki/Embarrassingly_parallel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:48:53.950

您可以为此目的使用第三方工具，而不是先编写 python 脚本。

1）第一步创建目标网站的镜像，然后解析它。[您可以使用“wget -mk http://www.targetwebsite.com](http://www.targetwebsite.com) ”创建目标网站的镜像

[http://www.gnu.org/software/wget/](http://www.gnu.org/software/wget/)

比你可以用python解析镜像代码。

2) Google dorking 示例查询：

```
site:stackoverflow.com
site:stackoverflow.com intitle:"index of"
site:stackoverflow.com ext:html ext:php 
```

它适用于没有 robots.txt 文件的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:07:04.943

检查“机械化”python 模块。使用起来非常方便。这些页面对我帮助很大 - 信息的重要来源： [http://stockrt.github.com/p/emulating-a-browser-in-python-with-mechanize/](http://stockrt.github.com/p/emulating-a-browser-in-python-with-mechanize/) [https://scraperwiki.com/views/python_mechanize_cheat_sheet /编辑/](https://scraperwiki.com/views/python_mechanize_cheat_sheet/edit/)

只是为了让您了解“机械化”可以做什么，这是一个简单的函数，它将列出来自给定 url 的所有链接：

```
import mechanize

def test():
    headers = ('User-Agent','Mozilla/4.0')
    url = 'http://www.google.com'

    browser = mechanize.Browser()
    browser.addheaders=[headers]

    response = browser.open(url)
    for link in browser.links():
        print link

if __name__ == '__main__':
    test() 
```

# android - 用于开发的 Android HW：不支持外部 SD 卡时在外部存储上？

> ID：14599630
> 
> 赞同：0
> 
> 时间：2013-01-30T08:33:11.437
> 
> 标签：android, hardware, software-design, nexus-7

**背景：**我正在考虑购买*参考*平板电脑 Nexus 7，用于在开发过程中测试应用程序。我现在不能告诉你究竟是什么样的应用程序。它们可能只是大型 IT 应用程序（数据库应用程序、基于 Web 服务的通信）的便携式客户端。我在 C++ 方面相当出色，但我没有 Java 实践经验。只是研究官方的Android网页。

从我目前了解到的情况来看，Android 支持*内部存储*和*外部存储*——每个都有特定的功能。从这个意义上说...

**问题：** Nexus 7 是否以某种方式实现了*外部存储*？缺少外部 SD（对于 Nexus 7）是否与*外部存储*相关？在设计/开发某些类型的应用程序时，缺少外部 SD 会成为限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:44:52.250

```
Does Nexus 7 implement the external storage somehow? Is the lack of the external SD (for Nexus 7) 
related to the external storage as a term at all? Can the lack of external SD be a limitation 
when designing/developing some sorts of applications? 
```

由于**Nexus 7**没有外部存储卡，但它在内部对其进行管理。当您调用`Environment.getExternalStorageDirectory()`它时，它会返回到`/mnt/sdcard/`作为外部存储内置的路径。

所以开发应用程序没有问题。

# javascript - 自动查找用户位置

> ID：14599643
> 
> 赞同：1
> 
> 时间：2013-01-30T08:34:08.593
> 
> 标签：javascript, jquery, django, stripe-payments

我正在为我的 Django 应用程序集成 Stripe 支付。付款的必填字段之一是国家/地区。我的问题是如何知道用户的当前位置？我不需要地图。我只想要一个国家名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:37:57.443

添加带有国家下拉列表的表单字段并让用户选择。

您可以使用 geoip 作为第一个猜测，但这*只能*用作此类下拉列表的默认值，因为用户可能正在使用代理。

**编辑：**

由于您使用的是 Django，我建议您使用随附的电池：[https ://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/)

我宁愿*不*为此使用外部服务。这会减慢您的网站速度，导致不必要的依赖。

Django 视图的示例代码：

```
from django.contrib.gis.geoip import GeoIP
g = GeoIP()
c = g.country(request.META['REMOTE_ADDR'])
# c.country_code and c.country_name do now contain
# The data you want. Simply pass it to a template,
# form and/or use it for the stripe API. 
```

# sql - 将服务器名、数据库名和架构自动放在 select 语句中的表名之前

> ID：14599646
> 
> 赞同：1
> 
> 时间：2013-01-30T08:34:13.053
> 
> 标签：sql, sql-server, stored-procedures

我有一个存储过程，负责将数据从数据库 A 导入数据库 B。我有客户，他们都有自己的数据库 B（具有相同的表等）。他们也有自己的数据库 A。存储过程将是在数据库 B 上执行（部署）。

**问题：**
每个客户对 A 和 B 都有另一个数据库名称。我还发现数据库 A 可以位于不同的服务器/实例上。我需要一种通用方法来自动将 A 中的服务器/实例名称和数据库名称放入我的存储过程中，以从那里选择数据。每个客户都有一个连接到数据库 A 的连接字符串，该连接字符串已经存在于数据库 B 中。所以从连接字符串中，我可以获得服务器/实例名称和 A 的数据库名称。（我已经创建了一个链接服务器）

**1.将服务器/实例名称和数据库名称放在表名之前的最佳方法是什么？**

**存储过程**
在我的存储过程中，我使用了很多变量（声明）表来插入数据库 A 中的数据。有很多关于使用动态 sql 的文章，但是我找不到带有声明表的示例。

**我的解决方案**
我正在考虑将数据库 A 中的所有数据插入到变量表中。我正在从 7 个表中导入数据，因此我需要声明 7 个表，并且在我的 SP 中，我可以从声明表中选择数据。请注意，空洞存储过程非常庞大。

**问题**
2.您如何看待我的解决方案？

3.您有其他解决方案吗？

4.如何使用动态sql插入我的声明表？

**请注意，我使用的是 sql server 2005。

```
 I have a few statements like below:

 declare @Temp table (Id int, etc
 insert into @Temp (Id, etc)
 Select Id, etc
 From [databasename].dbo.TableName   //hardcoded
 Where .......

 // doing staff like selecting from the @Temp table etc.

I also have subqueries, but I can change if it is necessary. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:40:30.580

您不能使用动态 sql 进入声明表，因为临时表仅在会话中可用。执行任何新的 sql 即通过动态 sql 将创建一个新会话。

您可以通过不使用任何声明或临时表而是使用普通表来解决它。动态 sql 将可以访问它，并且您对它所做的任何事情都不会丢失。

您可以在普通表前面加上 Temp_ 之类的东西，只是为了注意它们是临时表，然后确保在每个查询的开头删除它们，即

```
DROP TABLE TEMP_Table 
```

您可以通过执行调用多个本地数据库

```
SELECT * FROM [DatabaseName].dbo.[TableName] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:22:45.720

与其创建#temp，不如将其创建为[TempDB].[DBO].[Temp]，它可以在动态SQL 之外访问。但是，请记住在完成后显式删除表格

```
DECLARE @sql VARCHAR(200)
SET @sql = 'CREATE TABLE tempdb.dbo.temp(id INT IDENTITY(1,1), DESCRIPTION VARCHAR(100))
INSERT INTO tempdb.dbo.temp SELECT ''1'' SELECT * FROM tempdb.dbo.temp'
PRINT (@sql)
EXEC (@sql)
SELECT * FROM tempdb.dbo.temp

DROP TABLE tempdb.dbo.temp 
```

拉吉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:57:41.720

检查此项以在动态查询中创建临时表

```
DECLARE @sql VARCHAR(200)
SET @sql = 'CREATE TABLE #temp(id INT IDENTITY(1,1), DESCRIPTION VARCHAR(100))
INSERT INTO #temp SELECT ''1'' SELECT * FROM #temp'
PRINT (@sql)
EXEC (@sql) 
```

[SQLFiddle](http://sqlfiddle.com/#!3/d41d8/8223)

准确地说

```
DECLARE @sql VARCHAR(1000)
SET @sql = 
    'DECLARE @Temp TABLE (
                Id INT,
                etc
                INSERT INTO @Temp (Id, etc)
                SELECT Id,
                etc
                FROM [databasename].dbo.TableName / / hardcoded
                WHERE ....... SELECT * FROM @temp'

    PRINT (@sql)
EXEC (@sql) 
```

# c#-4.0 - 使用 Range.TextToColumns 转换为多列不起作用

> ID：14599647
> 
> 赞同：0
> 
> 时间：2013-01-30T08:34:13.880
> 
> 标签：c#-4.0, csv, vsto, excel-addins

我的目标是使用 .csv 将单个 csv 字符串转换为 excel 中的多列`Range.TextToColumns()`。

我有一个 csv 文件，其列中可以包含逗号，在这种情况下，列值周围有双引号。所以为了避免这个问题，我只是在行尾拆分以获得单独的行。我的计划是将每个 csv 行放在每个 excel 行的单个单元格中，并使用 Text to columns 函数来使我的列值以一种正确的方式获得，而不必担心列值中的逗号。

当前代码：

```
string row = lines[i - 1]; //single CSV row
var startCell = (Range)worksheet.Cells[i, 1];
var endCell = (Range)worksheet.Cells[i, 1];
var writeRange = worksheet.get_Range(startCell, endCell);

writeRange.Value2 = row;                                   

startCell.TextToColumns(startCell, XlTextParsingType.xlDelimited
, XlTextQualifier.xlTextQualifierDoubleQuote, false
, false, false, true, false, false, false
, XlColumnDataType.xlGeneralFormat, false, false, false); 
```

执行此代码后发生的情况是，我在每行的单个单元格中获取所有行数据，而不是拥有多个列。

我已经编写了与我们在 Excel 表中执行 Text to Columns 时使用的手动方法并行的代码，手动方法产生了预期的结果，但是在 c# 中完成时同样的事情失败了。

如果我的方法中有任何错误，请指出错误，或者指出一些出路。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:23:40.493

好的，找到了解决方案。原来 msdn 的家伙搞砸了这个页面上的文档：
[Range.TextToColumns 文档 @msdn](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.texttocolumns%28v=office.14%29.aspx)

```
startCell.TextToColumns(startCell, Excel.XlTextParsingType.xlDelimited,
Excel.XlTextQualifier.xlTextQualifierDoubleQuote, missing,
missing, missing, true, missing, missing, missing, missing,
missing, missing, missing); 
```

所以，我应该写失踪，而不是写错，以使其正常工作。

[这个页面帮助我解决了这个问题](http://msdn.microsoft.com/en-us/library/04b02wh9%28v=VS.80%29.aspx)

# ruby-on-rails - Rails3 在不使用隐藏字段的情况下从 link_to 填充关联？

> ID：14599653
> 
> 赞同：0
> 
> 时间：2013-01-30T08:34:42.443
> 
> 标签：ruby-on-rails, ruby

如何在不使用隐藏表单字段的情况下设置 :foo_id 的值？我可以以某种方式将值从 link_to 传递给新方法而不在客户端公开它吗？

即：单击“bar 5”的“Create foo”并将此变量传递给新方法，而客户端无法修改它？

对不起，如果我不能更详细地回答这个问题，如果我能更好地表述它，我相信谷歌或 SO 现在会帮助我。

```
class Bar < ActiveRecord::Base
  has_one :foo
end

class Foo < ActiveRecord::Base
  belongs_to :bar
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:57:38.857

您可以创建一个伪键/令牌表。

它是一个简单的 2 列表。您生成一个令牌并将其与密钥一起存储。您将令牌作为隐藏字段发送。在返回令牌时，您获取正确的密钥，然后删除令牌/密钥记录。

> [http://rubydoc.info/stdlib/securerandom/1.9.2/SecureRandom](http://rubydoc.info/stdlib/securerandom/1.9.2/SecureRandom)

# wordpress - Wordpress wp_editor 特色缩略图图像不显示

> ID：14599657
> 
> 赞同：1
> 
> 时间：2013-01-30T08:34:57.713
> 
> 标签：wordpress, wordpress-theming

我正在开发一些可以在前端创建新帖子的主题。我的问题是，当“添加媒体”上传照片时，一切正常，除了当我为该帖子设置“设置特色图片”时，帖子发布时“缩略图”上没有显示。

这是 wp_editor 代码设置：

```
<?php 
$setupev = array(
         'media_buttons'=>1, 
         'textarea_name'=>'post_ne', 
         'tinymce' => true );
wp_editor('content here', 'create_nepost', $setupev); 

?> 
```

这是我用来发布新帖子的代码：

```
$the_contnt = $_POST['post_ne'];
$new_post = array(
'post_title' => $get_title,
'post_content' => $the_contnt,
'post_date' => date('YmdHis'),
'post_status' => 'publish',
'post_author' => 1,
'post_category' => array(8,5)
);

wp_insert_post( $new_post ); 
```

是否有一些代码可用于获取附件缩略图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:08:22.263

你需要使用`set_post_thumbnail()`功能。您需要此功能的两件事`$post_id`是您提供给的 id`wp_insert_post()`和`$attach_id`附件的 id。

`set_post_thumbnail( $post_id, $attach_id );`

你已经`$post_id`找到了`$attach_id`

`$attachment = array(`

```
'post_mime_type' => $wp_filetype['type'],
'post_title' => sanitize_file_name($filename),
'post_content' => '',
'post_status' => 'inherit'` 
```

`);` `$attach_id = wp_insert_attachment( $attachment, $file, $post_id );` `require_once(ABSPATH . 'wp-admin/includes/image.php');` `$attach_data = wp_generate_attachment_metadata( $attach_id, $file );` `wp_update_attachment_metadata( $attach_id, $attach_data );`

# apache-camel - 没有明显原因的骆驼停下来

> ID：14599658
> 
> 赞同：1
> 
> 时间：2013-01-30T08:35:00.827
> 
> 标签：apache-camel

我有一个 bean 生产者和一个 bean 消费者，在一条路线中使用。生产者是通过一个线程产生的，并在 hazelcast 队列上侦听数据（它可以是其他任何东西，我相信甚至可以是本地随机生成的数据）。

数据被发送到 seda 端点，以确保并发。消费者获取数据并将其转发到另一个 hazelcast 队列。但同样，它可能是其他任何东西。

它运行良好，但一段时间后，骆驼关闭，我找不到原因。

以下是我看到的一些消息：

处理大量数据...

```
[                          main] MainSupport                    INFO  Apache Camel 2.10.3 stopping
[                          main] DefaultCamelContext            INFO  Apache Camel 2.10.3 (CamelContext: camel-1) is shutting down
[                          main] DefaultShutdownStrategy        INFO  Starting to graceful shutdown 1 routes (timeout 300 seconds)
[el-1) thread #2 - ShutdownTask] DefaultShutdownStrategy        INFO  Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 300 seconds. 
```

然后在 300 秒内继续处理并停止。

这里有一些代码：

制片人：

```
 public void run()
    {
        try
        {
            IRequest service = ProxyHelper.createProxy(context.getEndpoint("seda:echo"), IRequest.class);

            BlockingQueue<Request> q = client.getQueue(MainApp.sQueueReceive);

            while(true)
            {
                Request request;
                request = q.take();
                // no response awaited
                service.request(request);
            }
        } 
```

消费者：

```
 public void onMessage(Request request)
    {
        nb_forwarded++;
        BlockingQueue<Request> q = MainApp.client.getQueue(MainApp.sQueueForward);
        try
        {
            q.put(request);
        }
        catch (InterruptedException e)
        {
            exit(2);  --> it does not happen
        } 
```

最后，路线：

```
from("seda:echo")
.setExchangePattern(ExchangePattern.InOnly)
.bean(new HazelcastForwarder(), "onMessage"); 
```

它在 InOnly 中，因为没有等待生产者的响应，它只是一个转发。

那么为什么骆驼会停下来。那些说它正在停止的人没有任何消息。Camel 中是否存在这样的默认行为。在哪些情况下？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:38:54.350

启用 DEBUG 或 Trace 日志记录来揭示骆驼停止的真正原因。可能是封闭容器正在停止（如果您在某物内运行骆驼）或类似情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T06:58:06.300

我遇到了类似的问题，Camel Context 在启动过程后立即关闭。我在这里发帖，以便它也可以帮助其他有类似问题的人。

就我而言，我使用 Spring 使用“ **FileSystemXmlApplicationContext** ”加载 Camel 上下文并在 try 块中对其进行实例化，

```
try(AbstractXmlApplicationContext appContext = new FileSystemXmlApplicationContext(camelContextPath)) {

} 
```

因为我的 Eclipse 抱怨资源泄漏。因此，一旦调用来自 try/catch，它就会关闭 Spring 上下文，这又会关闭 Camel 上下文。

要解决此问题，需要在 try 块之外初始化 Spring 上下文。

```
AbstractXmlApplicationContext appContext = null;
try {
    appContext = new FileSystemXmlApplicationContext(camelContextPath);

} 
```

# c - 段错误返回的进程是什么错误代码？

> ID：14599670
> 
> 赞同：14
> 
> 时间：2013-01-30T08:35:43.993
> 
> 标签：c, linux, unix, segmentation-fault, runtime-error

段错误返回的进程是什么错误代码？从我的实验来看，它似乎是“139”，但我想知道为什么会这样以及它有多标准。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T08:45:03.840

当进程终止时，shell 只存储一个 8 位返回码，但如果进程异常终止，则设置高位。但是因为您的进程因分段错误而终止，所以通常发送的信号是 SIGSEGV（无效内存引用），其值为 11。

因此，因为您的进程异常终止，所以您有一个 128，然后您添加终止该进程的信号值 11，您得到 139。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-30T08:40:03.047

相关的系统调用（给出终止进程的状态）是[waitpid(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/waitpid.2.html)。139 用于`WIFSIGNALED`等`WTERMSIG`...在 Linux 上，实际位在`/usr/include/bits/waitstatus.h`包含在`<sys/wait.h>`标头中的内部文件中描述

`wait`,`waitpid`调用[在 POSIX 中是标准的](http://pubs.opengroup.org/onlinepubs/009695399/functions/wait.html)，宏名称（如`WTERMSIG`等）也是标准的。这些宏的实际实现，以及实际的信号编号，因此 shell 给出的代码，是特定于实现的。

[signal(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html) Linux 手册页给出了信号的数量。

# css - 如何设置格式为“数字：1、2、3、4、5”的表单样式？

> ID：14599671
> 
> 赞同：0
> 
> 时间：2013-01-30T08:35:44.457
> 
> 标签：css

```
<ul>
    <li>number</li> 
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
</ul> 
```

和样式表：

```
ul {
    list-style-type: none
}

ul li {
    float: left;
}

li:after {
    content: ", "
}

li:before {
    content: ": "
}

li:last-child:after {
    content: "."
}

li:first-child:before {
    content: ""
} 
```

结果是：

```
number, 1, 2, 3, 4, 5. 
```

如何解决此结果：

```
number: 1, 2, 3, 4, 5. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:38:16.570

添加这个：

```
li:first-child:after {
    content: ": "
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:56:15.440

尝试使用 `li:first-child:after {content: ": "}`too add : after number line And `li:not(:first-child):after {content: ", "}`too add , after any other line

完整的解决方案

```
ul {list-style-type: none}
ul li {float: left;}
li:not(:first-child):after {content: ", "}
li:last-child:after {content: "."}
li:first-child:after {content: ": "} 
```

您可以查看 dabblet 要点：[http ://dabblet.com/gist/4681763](http://dabblet.com/gist/4681763)

# iphone - 如何设置圆形自动滚动视图？

> ID：14599679
> 
> 赞同：0
> 
> 时间：2013-01-30T08:36:01.717
> 
> 标签：iphone, ios, uiscrollview

如何使循环自动滚动视图，在滚动视图中，如果最后一个图像到达则再次开始第一个图像连续滚动。此任务的任何示例源代码。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:40:01.493

在 Apple 文档中，您可以找到有关如何完成此操作的示例，请看[这里](http://developer.apple.com/library/ios/#samplecode/StreetScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011102)，特别是`InfiniteScrollView`类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:29:37.627

我只是创建一个演示它可能对你有帮助这是一个屏幕截图：-

![在此处输入图像描述](../Images/1e979c0a6d23fed6dd3abd56ecceefdb.png)

这是一个演示链接希望它可以帮助你

[http://www.sendspace.com/file/2yz9dn](http://www.sendspace.com/file/2yz9dn)

# javascript - 将小图像拉伸到窗口

> ID：14599681
> 
> 赞同：2
> 
> 时间：2013-01-30T08:36:12.457
> 
> 标签：javascript, jquery, image, fancybox, stretch

如何通过 Fancybox 将图像完全拉伸到窗口？（Fancybox 2）fancybox 的长度与图像大小一样大，但不会更远。

我注意到许多 CSS 限制卡在 fancybox css 中，例如：

```
.fancybox-image, .fancybox-iframe {
    display: block;
    width: 100%;
    height: 100%;
}

.fancybox-image {
    max-width: 100%;
    max-height: 100%;
} 
```

取出`max-width/height`并设置让我们说`width/height`拉伸`200%`图像，但包含矩形本身（即：fancybox）的大小相同，并且不再居中。

我正在使用内联方法，例如：`jQuery(".fancybox").fancybox()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:36:43.960

i-pretty-much-gives-up-except-for-some-cool-but-useless-stuff 方法：

```
.fancybox({
 afterLoad  : function () {
  function gcd (x, y) {while (y != 0) {var z = x % y; x = y; y = z;} return x}
  var body = $(document.body)
  if (this.width/this.height > 1) {
   // Max size is document body width.
   var body_width = body.width()
   var current_multiplier = gcd (this.width, body_width)
   if (current_multiplier == 1) current_multiplier = body_width
  } else {
   // Max size is document body height.
   var body_height = body.height()
   var current_multiplier = gcd (this.height, body_height)
   if (current_multiplier == 1) current_multiplier = body_height
  }
  this.width  = this.width  * current_multiplier
  this.height = this.height * current_multiplier
 }
}) 
```

# html - 父 div 不采用背景颜色

> ID：14599683
> 
> 赞同：1
> 
> 时间：2013-01-30T08:36:19.013
> 
> 标签：html, css, jquery-mobile

我创建了一个带有 2 个子 div 的父 div 的 jquery 移动页面。我想要整个 div 的后轮颜色。所以我已经将背景颜色应用于 new1 Id。但是我不能申请。我在这里附上我的代码

```
<div id="new1">

       <div id = "c1">

       Welcome 
       </div>

    <div id = "c2">
       <fieldset data-role="controlgroup" data-type="horizontal" data-role="fieldcontain" data-mini="true">

        <label for="select-choice-1" class="select"></label> 
                    <select name="select-choice-1" id="select-choice-1" data-theme="a" >

                        <option value="select">Select</option> 
                        <option value="approve">Approve</option> 
                        <option value="reject">Reject</option>
                                        </select></fieldset>

       </div>

       </div> 
```

CSS

```
#new1
{
background-color:#E32E18;
 position: relative;

}

#c1{
    position: absolute;
    left:0;
    margin-top: 5px;
margin-left:2px;

}

#c2{
    position: absolute;
    right:0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:41:45.067

您不能为没有尺寸的东西赋予背景颜色：

这是一个例子：http: [//jsfiddle.net/Gajotres/bPjLn/](http://jsfiddle.net/Gajotres/bPjLn/)

```
#new1
{
   background-color:#E32E18;
   position: relative;
   width: 300px;
   height: 300px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:44:22.580

的内容`new1`是`position:absolute`所以它的尺寸不会被应用到`new1`。

所以你需要给`height: xpx`容器（`new`）一个。

另一种解决方案是使用`float`而不是定位。

```
#new1
{
background-color:#E32E18;
position: relative;
}

#c1{
    float: left;
    margin-top: 5px;
    margin-left:2px;
}

#c2{
    float: right;
}

.clearfix{*zoom:1}
.clearfix:before,.clearfix:after{display:table;line-height:0;content:""}
.clearfix:after{clear:both} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/rA6n7/2/)。

该`clearfix`课程来自[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。

# wpf - 自定义动画：从哪里获取“来自”值？

> ID：14599685
> 
> 赞同：0
> 
> 时间：2013-01-30T08:36:30.850
> 
> 标签：wpf, animation

我正在自定义类型上实现自定义动画（继承自 AnimationTimeline）。当我在 VisualStateManager 中使用动画时，我不能使用 From 属性——所以我什至没有费心去创建它。但我确实有一个 To 依赖属性。

现在，在 GetCurrentValue() 内部，我有三个参数，我指望使用第一个参数（“defaultOriginValue”）作为动画属性的原始值。显然，它不是原始值，而是默认值（在动画属性的 FrameworkProperyMetadate 中指定）。

我如何获得实际的属性值来制作动画？

# c# - Oledb 连接 C# 到远程文件

> ID：14599692
> 
> 赞同：0
> 
> 时间：2013-01-30T08:36:48.480
> 
> 标签：c#, odbc, oledb

> **可能重复：**
> [System.Data.OleDb.OleDbException：互联网地址无效。如何使用 OleDb 连接到位于网络服务器上的 excel 文件](https://stackoverflow.com/questions/226524/system-data-oledb-oledbexception-invalid-internet-address-how-do-you-connect-t)

我在服务器中上传了一个 excel 文件。http://mysite.com/docs/excelFile.xlsx”。我需要通过建立 oledb 连接来读取这个 excel 文件，而不必将文件保存到磁盘。知道吗？下面的代码给出“无效的 Internet 地址错误”。如何我可以为位于服务器中的文件创建连接字符串吗？

```
String connectionString = String.Empty;
connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;
Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", 
"http://mysite.com/docs/excelFile.xlsx"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:52:31.890

文件上传控件将为您提供文件流。您可以使用此方法从 csv 中解析数据

[http://www.knowdotnet.com/articles/creatingandparsingcsvfiles.html](http://www.knowdotnet.com/articles/creatingandparsingcsvfiles.html)

# wso2 - 简单 ETL：Smooks 或 ETL 产品

> ID：14599698
> 
> 赞同：1
> 
> 时间：2013-01-30T08:37:13.093
> 
> 标签：wso2, etl, smooks

我对这个主题相当陌生，正在做一些研究。我有一个 ESB（使用 WSO2 ESB）并希望从传递的消息（如客户、订单等）中提取主数据并将它们存储在数据库中以作为参考数据保存。源数据是来自 Web 服务的 XML。所以需要一个能够维护主数据的组件：插入新对象、删除旧对象和更新更改（如果有数据事件也很好，这样 ESB 可以相应地路由数据）。基本上，逻辑将类似于任何实体类型，为所有新实体类型自动生成它可能是个好主意......

我现在看到的选项：

1.  将 Smooks 与 SQLExecutor 或 Hibernate 一起使用，以实现所有匹配逻辑的持久性，这些逻辑要么写在 smooks 配置中，要么写在 DAO 注释中
2.  使用一些开源 ETL 工具（如 Talend、Kettle、Clover 等）。所以数据将被传递给 ETL，所有的转换逻辑都在那里定义。当它们出现或可能是过度杀伤时，也可以适应未来的场景。

.

如果您分享您的想法并指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:56:11.733

你最好把你的数据库部分留给另一个工具。

如果您的消息流中有相当数量的数据库交互，您可以预期您的性能会严重下降。

但是，对于您解释的用例，您不需要 ETL。您可以使用 WSO2 DSS 通过创建服务来插入或更新数据库中的数据来简单地完成此操作。

我们一直将它用于 ESB 旁边的消息记录目的（在 DB 内部），并且对此感到满意。最好将它用作 ESB 内消息流中的非阻塞即发即弃 Web 服务。希望这可以帮助。

# javascript - 水平和垂直滑块（图片库）

> ID：14599700
> 
> 赞同：0
> 
> 时间：2013-01-30T08:37:26.260
> 
> 标签：javascript, jquery, slider

我需要创建一个滑块库，我可以在其中水平和垂直滑动图像。像这样：

[http://o7.no/TVvsjj](http://o7.no/TVvsjj)

点击左移至上一张图片，点击下查看与当前图片对应的图片，点击右移至下一张图片。

有人知道在哪里可以找到具有此功能的滑块吗？或者哪个滑块注定要实现这一目标？

非常感谢！

问候凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:59:44.770

试试[彩盒](http://www.jacklmoore.com/colorbox)。查看演示。

# .net - 路径可能与 WebDAV 中的文件名无关

> ID：14599703
> 
> 赞同：2
> 
> 时间：2013-01-30T08:37:52.503
> 
> 标签：.net, webdav

我正在使用 IT-Hits WebDAV 实现中的 .NET-Server，但无法从文档中找出我的问题。

WebDAVEngine 使用一个名为`IHierarchyItem`wich 的类，它具有 Properties`Path`和`Name`. 所以我的问题是：路径是否与项目名称直接相关？因此，如果路径是 /folder/file.txt 的名称是 file.txt 或者我可以提供一个通用名称吗？因此，如果路径是 /abc.txt，名称可能是别的吗？或者这会影响客户吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:03:23.080

我没有使用过那个特定的 webdav 服务器，但我知道对于 webdav，通常有一个 display-name 属性，它独立于资源 href。

但大多数 webdav 客户端**不使用**此属性。相反，webdav 客户端通常只使用最后一个路径段作为文件名并忽略 display-name 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:36:38.853

大多数 WebDAV 客户端，包括 Microsoft Mini-redirector 和 Microsoft Office 都会忽略 dispaly-name 属性（位于[IHierarchyItem.Name](http://doc3.webdavsystem.com/ITHit.WebDAV.Server.IHierarchyItem.Name.html)后面）。但是，我已经看到使用 dispaly-name 的 WebDAV 客户端，如果它丢失、为空或损坏，则此类客户端无法正常运行。

为避免混淆并支持最大数量的 WebDAV 客户端，我建议始终保持 IHierarchyItem.Name 和 IHierarchyItem.Path 同步。例如，如果 IHierarchyItem.Path 返回 'folder/file.txt'，则 IHierarchyItem.Name 必须返回 'file.txt'

# html - 使用 CSS 样式表

> ID：14599707
> 
> 赞同：0
> 
> 时间：2013-01-30T08:38:06.187
> 
> 标签：html, css, html-table

我有一个简单的表：

```
<table class="caspGrid">
    <thead></thead>
    <tbody>
        <tr class="caspRow">
            <td class="caspColEntity">
                <input type="checkbox"/>
                <span>Favorites</span>
                <p>(<span>2</span>)</p>
            </td>
            <td class="caspColSummary">
                <p>FY13 SPM Mobility Strategy</p>
                <p>FY13 SPM Mobility Strategy</p>
                <p>FY13 SPM Mobility Strategy</p>
            </td>
            <td class="caspColTeam">
                <p>Tim Smith</p>
                <p>Tim Smith</p>
                <p>Tim Smith</p>
            </td>
        </tr>               
    </tbody>
</table> 
```

我希望表格跨越整个页面高度，但我希望每个`<tr>`都环绕内容，最后一个`<tr>`跨越其余部分，我该怎么做？

[这是一个小提琴](http://jsfiddle.net/Dvr2b/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:32:51.683

您可以使用[最后一个类型的 CSS3 伪类](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3alast-of-type)：

```
tr:last-of-type {  
    height: 100%;
} 
```

这将仅针对最后一个 tr。

演示：http: [//jsfiddle.net/5L7fb/](http://jsfiddle.net/5L7fb/)

如果您在一页中有多个表格，那么您应该使用`descendant`or`child`选择器：

```
/* Descendant */
table tr:last-of-type {  
    height: 100%;
}

/* Child */
table > tr:last-of-type {  
    height: 100%;
} 
```

# vb.net - GroupBox 中每个控件的数据源

> ID：14599709
> 
> 赞同：1
> 
> 时间：2013-01-30T08:38:12.880
> 
> 标签：vb.net, winforms, controls

这有可能吗。我在下面粘贴代码，希望任何人都可以向我展示正确的方法。

```
 For Each tbbox As TableLayoutPanel In GroupBox3.Controls
'looping through all controls in my tablelayoutpanle
            For Each ctl As Control In tbbox.Controls
                If ctl.Name.StartsWith("cb_barva") Then
'im stuck here...
                    With (ctl)
                        .DataSource = ds_barve.Tables("moje_barve")
                        .DisplayMember = "barva"
                        .ValueMember = "barva"
                        .SelectedIndex = 0
                    End With

                End If
            Next
        Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:19:38.747

您需要类型转换

```
With (ctl) 
```

将 ctl 转换为 ComboBox

```
ctype(ctl,ComboBox) 
```

如果您无法使用“With”语句转换控件，请更改代码的每一行，如下所示......

```
 ctype(ctl,ComboBox).DataSource = ds_barve.Tables("moje_barve")
        ctype(ctl,ComboBox).DisplayMember = "barva"
        ctype(ctl,ComboBox).ValueMember = "barva"
        ctype(ctl,ComboBox).SelectedIndex = 0 
```

# vb.net - 如何使绘制的矩形名称来自变量

> ID：14599714
> 
> 赞同：1
> 
> 时间：2013-01-30T08:38:17.867
> 
> 标签：vb.net, draw, rectangles

我知道如何使用变量名制作按钮，如下所示：

```
Dim newbuttonname As String = TextBox1.Text
Dim createdButton = New Button()
createdButton.Name = newbuttonname
'... 
```

以类似的方式，我想从一个变量中命名我自己的矩形：

```
Dim variablename As New Rectangle(10, 10, 200, 200)
g.DrawRectangle(Pens.Blue, rect:=variablename) 
```

我想`rect:=`是动态的，所以我可以使用相同的代码来构建许多唯一命名的变量，但当然在这里它只有名称“variablename”。

# html - 试图让页脚扩展到文本的底部

> ID：14599718
> 
> 赞同：0
> 
> 时间：2013-01-30T08:38:42.843
> 
> 标签：html, css, footer

我试图让页脚（#sitemap）扩展到文本的底部。

这是一件简单的事情，但我尝试使用我认为可行的代码：

```
clear: both; 
```

它不工作。请帮我。

这是该网站的链接：http: [//students.thenet.ca/jlandon/new/](http://students.thenet.ca/jlandon/new/)

HTML

```
<head>
<link rel="stylesheet" type="text/css" href="http://meyerweb.com/eric/tools/css/reset/reset.css"/>
<link rel="stylesheet" type="text/css" href="css/isolatedhowlv2-1.css"/>
<title>Isolated Howl Web Design &amp; Development</title>
<meta name="description" content="Isolated Howl is a web design and development company owned and operated by a single design student. Isolated Howl offers web &amp; graphic design, development &amp; programming, social media and website maintenance." />
<meta charset="UTF-8"/>
<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="images/favicon.ico">
</head>

<body>
<div id="page">

<header id="main">
    <figure id="logo">
        <img src="images/logo.gif" id="howllogo" alt="logo"/>
    </figure>
    <h1>Isolated Howl</h1>
</header>

<nav id="mainnav">
    <ul>
        <li><a href="workshop/index.html">Workshop</a></li>
        <li><a href="services/index.html">Services</a></li>
        <li><a href="school/index.html">School</a></li>
        <li><a href="about/index.html">About</a></li>
        <li><a href="contact/index.html">Contact</a></li>
    </ul>
</nav>

<article id="mission">
    <p>If you've come here looking for a quick-fix, simple website: you've come to the wrong place. If you're looking for a refreshing, stimulating &amp; captivating website: have a seat and let's talk.</p>
    <br />
    <p>Isolated Howl is more than a studio. Inspiring content is collected and put through a sorting machine called relevance. It's filtered down until it is refined into the absorbing material it was meant to be. The cherry on top is the design which will be easy to use and understand - built for the user. Add in some compelling visuals and viola! The perfect-for-you website is born out of the mist.</p>
    <br />
    <footer><p>If this has inspired you, please check out the <a href="#">contact</a> page.</p>
    <p>If you need another push in the right direction, check out the <a href="#">workshop</a>.</p>
    <p>For more information, check out Isolated Howl's <a href="#">about</a> page.</p></footer>
</article>

<footer id="sitemap">
    <nav>
    <div class="col"><h1><a href="workshop/index.html">Workshop</a></h1>
        <ul>
            <li><a href="http://students.bcitwebdev.ca/jlandon">Isolated Howl V1.0</a></li>
            <li><a href="/ihv2/index.php">Isolated Howl V2.0</a></li>
            <li><a href="http://students.bcitwebdev.ca/jlandon/school/finalproject/nomcover.html">Restaurant Mock-Up</a></li>
            <li><a href="geordieirving/index.php">Geordie Irving's Portfolio</a></li>
            <li><a href="#">West Coast Finance</a></li>
            <li><a href="#">Insider Films</a></li>
            <li><a href="#">Shawn Muys' Portfolio</a></li>
            <li><a href="#">Rayne Longboards</a></li>
        </ul>
    </div>
    <div class="col"><h1><a href="services/index.html">Services</a></h1>
        <ul>
            <li><a href="#">Web &amp; Graphic Design</a></li>
            <li><a href="#">Development &amp; Programming</a></li>
            <li><a href="#">Social Media</a></li>
            <li><a href="#">Website Maintenance</a></li>
        </ul>
    </div>
    <div class="col"><h1><a href="school/index.html">School</a></h1>
        <ul>
            <li><a href="school/week1/index.html">Week 1</a></li>
            <li><a href="school/week2/index.html">Week 2</a></li>
            <li><a href="school/week3/index.html">Week 3</a></li>
        </ul>
    </div>
    <div class="col"><a href="about/index.html"><h1>About</h1></a></div>
    <div class="col2"><a href="contact/index.html"><h1>Contact</h1></a></div>
    </nav>
    <div id="connect"><h2>Stay Connected</h2>
        <a href="FACEBOOK" onMouseOver="document.facebook.src='images/facebook2.gif';" onMouseOut="document.facebook.src='images/facebook.gif';"><img src="images/facebook.gif" alt="facebook" id="facebook"></a>
        <a href="TWITTER" onMouseOver="document.twitter.src='images/twitter2.gif';" onMouseOut="document.twitter.src='images/twitter.gif';"><img src="images/twitter.gif" alt="twitter" id="twitter"></a>
        <a href="GOOGLE+" onMouseOver="document.google.src='images/google2.gif';" onMouseOut="document.google.src='images/google.gif';"><img src="images/google.gif" alt="google" id="google"></a>
    </div>
    <div id="copyright">Copyright &copy; Isolated Howl 2012-2013 Vancouver, British Columbia, Canada</div>
</footer>

</div>

</body>
</html> 
```

CSS

```
@font-face  {
font-family: "scala";
src: url('../fonts/sketchscalasans.ttf');
}

@font-face  {
font-family: "district";
src: url('../fonts/districtthin.ttf');
}

body    {
background-image: url('../images/space.jpg');
background-attachment:fixed;
color: #FFFFFF;
font: normal 100%;
background-color: #000000;
}

#page   {
width: 80%;
margin-right: auto;
margin-left: auto;
}

#logo   {
width: 52.08333333333333%; /* 500px / 960px */
margin-left: auto;
margin-right: auto;
}

#howllogo   {
width: 100%;
}

#main {
width: 100%;
}

#main h1    {
font-family: "scala";
font-size: 4.5em; /* 72px / 16px */
font-weight: normal;
text-align: center;
}

#mainnav    {
font-family: "scala";
font-size: 1.5em; /* 18px / 16px */
font-weight: normal;
text-align: center;
width: 68.75%; /* 660px / 960px */
margin-left: auto;
margin-right: auto;
}

#mainnav li {
list-style-type: none;
display: inline;
width: 19.6969696969697%;
text-align: center;
}

#mainnav ul {
width: 100%;
}

#mainnav a:link, a:visited  {
color: #FFFFFF;
text-decoration: none;
}

#mainnav a:hover    {
color: #6986AE; /* light blue */
text-decoration: none;
}

#mission    {
width: 68.75%; /* 660px / 960px */
margin-right: auto;
margin-left: auto;
margin-top: 1.04166666666667%; /* 10px / 960px */
padding: 3.03030303030303%; /* 20px / 660px */
font-family: "district";
font-size: 1em;
color: #000000;
font-weight: normal;
background-color: #FFFFFF;
}

#mission a:link, a:visited  {
color: #3F5068; /* dark blue */
text-decoration: underline;
}

#mission a:hover    {
color: #6986AE; /* light blue */
text-decoration: none;
}

#sitemap    {
width: 68.75%; /* 660px / 960px */
margin-right: auto;
margin-left: auto;
padding: 3.03030303030303%; /* 20px / 660px */
font-family: "district";
font-size: 0.625em; /* 10px / 16px */
color: #FFFFFF;
background-color: #000000;
}

#sitemap a:link, a:visited  {
color: #FFFFFF;
text-decoration: none;
}

#sitemap a:hover    {
color: #FFFFFF;
text-decoration: underline;
}

#sitemap h1 {
font-size: 1.6em; /* 16px / 10px */
font-family: "scala";
}

#sitemap h1 a:link, a:visited   {
color:#FFFFFF;
text-decoration: none;
}

#sitemap h1 a:hover {
color: #6986AE;
text-decoration: none;
}

#sitemap h2 {
font-size: 1.4em; /* 14px / 10px */
}

.col    {
width: 18.18181818181818%; /* 120px /660px */
margin: 0 0 3.03030303030303% 0; /* 20px / 660px */
padding: 0;
float: left;
}

.col2   {
width: 18.18181818181818%; /* 120px /660px */
margin: 0;
padding: 0;
float: left;
}

#connect    {
width: 15.15151515151515%;
text-align: center;
float: right;
}

#copyright  {
width: 53.03030303030303%; /* 350px / 660px */
text-align: right;
float: right;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:10:08.193

您可以使用`display:table`您的`#sitemap`页脚；

```
#sitemap    {
width: 68.75%; /* 660px / 960px */
margin-right: auto;
margin-left: auto;
padding: 3.03030303030303%; /* 20px / 660px */
font-family: "district";
font-size: 0.625em; /* 10px / 16px */
color: #FFFFFF;
background-color: #000000;
display: table;
} 
```

注意：**IE7 及更低版本不**`display: table`支持。

# java - final 字段可能没有/已经被初始化

> ID：14599721
> 
> 赞同：10
> 
> 时间：2013-01-30T08:38:50.210
> 
> 标签：java, initialization, field, final

> **可能重复：**
> [如何处理引发检查异常的静态最终字段初始化程序](https://stackoverflow.com/questions/1866770/how-to-handle-a-static-final-field-initializer-that-throws-checked-exception)

在此示例中，我收到错误*The blank final field myClass may **not** have been initialized*：

```
private final static MyClass myClass; // <-- error

static {
    try {
        myClass = new MyClass(); // <-- throws exception
        myClass.init();
    } catch (Exception e) {
        // log
    }
} 
```

***在该示例中***，我收到错误*The final field myClass may have been assigned***：**

 **```
private final static MyClass myClass;

static {
    try {
        myClass = new MyClass(); // <-- throws exception
        myClass.init();
    } catch (Exception e) {
        myClass = null; // <-- error
        // log
    }
} 
```

有解决这个问题的办法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T08:45:06.407

```
private final static MyClass myClass;

static {
    MyClass my;
    try {
        my = new MyClass();
        my.init();
    } catch (Exception e) {
        my = null;
        // log
    }
    myClass = my; //only one assignment!
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-30T08:40:46.737

这是一个解决方案：

```
private final static MyClass myClass = buildInstance();

private static MyClass buildInstance() {
    try {
        MyClass myClass = new MyClass();
        myClass.init();
        return myClass;
    } catch (Exception e) {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T08:43:37.057

如果你的类是最终的，它一旦被初始化就不能改变值。您在第二个片段中所做的是首先将其分配给`new MyClass()`，然后如果在您身上抛出异常，`init()`则将其更改为`null`.

这是不允许的。如果`new MyClass()`不抛出异常，为什么不把它放在最上面呢？

但是警告，如果`init()`抛出异常，您仍然会有一个未初始化的`MyClass`. 您使用此类的方式似乎与其设计的工作方式不匹配。**

# android - 如何知道 TextToSpeech 何时结束讲话？

> ID：14599730
> 
> 赞同：1
> 
> 时间：2013-01-30T08:39:13.353
> 
> 标签：android, text-to-speech

我正在为 Android 应用程序工作文本到语音。我对找到一种在完成 Text to Speech 时调用的方法感到困惑。我尝试调用以下方法，但未调用完成，请查看以下代码并建议我。

```
 tts= new TextToSpeech(MainActivity.this, new OnInitListener() {

         @Override
         public void onInit(int status) {

             tts.setOnUtteranceCompletedListener(new OnUtteranceCompletedListener() {

                @Override
                public void onUtteranceCompleted(final String utteranceId) {
                            System.out.println("Completed");

                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                        //UI changes
                        }
                    });
                }
            });

         }
        }); 
```

请给我建议。我正在使用 API 级别 17。

* * *

**编辑：**

最低 API 级别为 12；

我在控制台中收到以下错误：

```
01-30 09:19:14.149: E/ActivityThread(660): Service com.android.exchange.ExchangeService

    has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce0ef0 that was originally bound here
01-30 09:19:14.149: E/ActivityThread(660): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce0ef0 that was originally bound here
01-30 09:19:14.149: E/ActivityThread(660):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-30 09:19:14.149: E/ActivityThread(660):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-30 09:19:14.149: E/ActivityThread(660):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-30 09:19:14.149: E/ActivityThread(660):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-30 09:19:14.149: E/ActivityThread(660):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-30 09:19:14.149: E/ActivityThread(660):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
01-30 09:19:14.149: E/ActivityThread(660):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
01-30 09:19:14.149: E/ActivityThread(660):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
01-30 09:19:14.149: E/ActivityThread(660):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
01-30 09:19:14.149: E/ActivityThread(660):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
01-30 09:19:14.149: E/ActivityThread(660):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
01-30 09:19:14.149: E/ActivityThread(660):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
01-30 09:19:14.149: E/ActivityThread(660):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-30 09:19:14.149: E/ActivityThread(660):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-30 09:19:14.149: E/ActivityThread(660):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-30 09:19:14.149: E/ActivityThread(660):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-30 09:19:14.149: E/ActivityThread(660):  at java.lang.Thread.run(Thread.java:856)
01-30 09:19:14.169: E/StrictMode(660): null
01-30 09:19:14.169: E/StrictMode(660): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce0ef0 that was originally bound here
01-30 09:19:14.169: E/StrictMode(660):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-30 09:19:14.169: E/StrictMode(660):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-30 09:19:14.169: E/StrictMode(660):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-30 09:19:14.169: E/StrictMode(660):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-30 09:19:14.169: E/StrictMode(660):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-30 09:19:14.169: E/StrictMode(660):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
01-30 09:19:14.169: E/StrictMode(660):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
01-30 09:19:14.169: E/StrictMode(660):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
01-30 09:19:14.169: E/StrictMode(660):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
01-30 09:19:14.169: E/StrictMode(660):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
01-30 09:19:14.169: E/StrictMode(660):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
01-30 09:19:14.169: E/StrictMode(660):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
01-30 09:19:14.169: E/StrictMode(660):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-30 09:19:14.169: E/StrictMode(660):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-30 09:19:14.169: E/StrictMode(660):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-30 09:19:14.169: E/StrictMode(660):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-30 09:19:14.169: E/StrictMode(660):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T09:27:03.907

问题不在于`onUtteranceComplete`function ，它很可能被调用，但您正在尝试将输出打印到`System.out`，请`android.utils.Log("tag", "success")`改用，看看会发生什么。

此外，您需要`onUtteranceComplete`在调用`tts.speak`方法之前设置 UtteranceID 才能开始工作。所以总结一下：

```
 TextToSpeech tts= new TextToSpeech(MainActivity.this, new OnInitListener() {

         @Override
         public void onInit(int status) {

             tts.setOnUtteranceCompletedListener(new OnUtteranceCompletedListener() {

                @Override
                public void onUtteranceCompleted(final String utteranceId) {
                            System.out.println("Completed");

                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                        //UI changes
                        }
                    });
                }
            });

         }
    });
    Map<String,String> ttsParams = new HashMap<String, String>();
    ttsParams.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID,
            MainActivity.this.getPackageName());

    mTts.speak(text, TextToSpeech.QUEUE_FLUSH, ttsParams); 
```

并且您得到的异常与该方法无关`onUtteranceComplete`，如果是因为 tts 引擎很可能您在完成活动时没有请求销毁您的实例。

修复那个添加

```
@Override
onDestroy(){
super.onDestroy();
mTts.shutdown(); //mTts is your TextToSpeech Object
} 
```

到你的活动课

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-16T20:48:07.717

简单的方法

```
textToSpeech=new TextToSpeech(this, new TextToSpeech.OnInitListener() {
    @Override
    public void onInit(int status) {
        if (status==TextToSpeech.SUCCESS){
            int result=textToSpeech.setLanguage(Locale.ENGLISH);

            if (result==TextToSpeech.LANG_MISSING_DATA||result==TextToSpeech.LANG_NOT_SUPPORTED){
                Log.i("TextToSpeech","Language Not Supported");
            }

            textToSpeech.setOnUtteranceProgressListener(new UtteranceProgressListener() {
                @Override
                public void onStart(String utteranceId) {
                    Log.i("TextToSpeech","On Start");
                }

                @Override
                public void onDone(String utteranceId) {
                    Log.i("TextToSpeech","On Done");
                }

                @Override
                public void onError(String utteranceId) {
                    Log.i("TextToSpeech","On Error");
                }
            });

        }else {
            Log.i("TextToSpeech","Initialization Failed");
        }
    }
});

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    textToSpeech.speak(text,TextToSpeech.QUEUE_FLUSH,null,TextToSpeech.ACTION_TTS_QUEUE_PROCESSING_COMPLETED);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:41:10.237

从 API 级别 15 开始，您必须使用`setOnUtteranceProgressListener`而不是`setOnUtteranceCompletedListener`

查看[官方文档](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#setOnUtteranceCompletedListener%28android.speech.tts.TextToSpeech.OnUtteranceCompletedListener%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-11T23:54:22.390

试试这个：

```
if(tts.myTTS.isSpeaking()) 
```

你得到一个布尔值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-10T14:28:38.037

我发现“话语”是针对合成文件的。

对于说话我使用**while(!utteranceDone){thread.sleep...}**和这段代码：

```
 brTTS = new BroadcastReceiver(){
                                public void onReceive(Context p1, Intent p2) {
                                    //Log.d(TAG,"TTS ACTION_TTS_QUEUE_PROCESSING_COMPLETED, p2.getAction()="+p2.getAction()+", ? "+TextToSpeech.ACTION_TTS_QUEUE_PROCESSING_COMPLETED);
                                    if (p2.getAction().equals(TextToSpeech.ACTION_TTS_QUEUE_PROCESSING_COMPLETED) && tts != null) {
                                        utteranceDone=true;
                                    }
                                }
                            };
                            registerReceiver(brTTS, new IntentFilter(TextToSpeech.ACTION_TTS_QUEUE_PROCESSING_COMPLETED)); 
```

# powershell - (Powershell) 循环从 FTP 位置删除文件

> ID：14599731
> 
> 赞同：1
> 
> 时间：2013-01-30T08:39:17.120
> 
> 标签：powershell, ftp

早上好！

我已经完成了脚本中的最后一个（也是相当关键的）阶段，即循环从目录中删除文件。我不会假装我在 Powershell 方面知识渊博（远非如此），所以我有点像我在网上找到的代码块，即兴创作并希望它有效。

我希望有人能破译我在这里尝试做的事情，看看我做错了什么！

```
#   Clear FTP Directory
$DelLoop=1
$server = "www.newsbase.com"
$dir = "/usr/local/tomcat/webapps/newsbasearchive/monitors/asiaelec/"
"open $server
user Canttell Youthis
binary  
cd $dir    
" +(
For ($DelLoop=1; $DelLoop -le 5; 5)
    {
        $FileList[$DelLoop] | %{ "delete ""$_""`n" }
        $DelLoop++
    })| ftp -i -in 
```

我知道“开放连接”部分有效，它只是循环。它只是不断抱怨错误的操作符，当我修复这些时，它不会抛出任何错误 - 但它也没有做任何事情。

我昨天花了 4 个小时的大部分时间研究这个，我希望你们中的一个可以帮助我。

提前致谢！

附录：

根据要求，这是更多代码：

```
#   Clear existing .htm file to avoid duplication
Get-ChildItem -path ".\" -recurse -include index.jsp | ForEach-Object {
Clear-Content "index.jsp"
}

#   Set first part of .JSP Body
$HTMLPart1="</br><tr><td colspan=9 align=center><p style=""font-family:Arial"">Here are the links to the last 3 AsiaElec PDFs:</br><ul>"

#   Recurse through directory, looking for 3 most recent .PDF files 3 times
$Directory="C:\PDFs"
$HTMLLinePrefix="<li><a style=""font-family:Arial""href="""
$HTMLLineSuffix="</a></li>"
$HTMLLine=@(1,2,3,4)
$Loop=1
$PDF=@(1,2,3,4)
Get-ChildItem -path $Directory -recurse -include *.pdf | sort-object -Property LastWriteTime -Descending | select-object -First 3 | ForEach-Object {
        $PDF[$Loop]=$_.name
        $HTMLLine[$Loop]=$HTMLLinePrefix + $_.name + """>" + $_.name + $HTMLLineSuffix
        $Loop++
    }

#   Final .JSP File Assembly
Get-Content "header.html" >> "index.jsp"
$HTMLPart1 >> "index.jsp"
$LineParse=""
$Loop2=1
For ($Loop2=1; $Loop2 -le 3; 3)
    {
        $HTMLLine[$Loop2] >> "index.jsp"
        $Loop2++
    }
Get-Content "tail.html" >> "index.jsp"

#   Prepare File List
$FileList=@(1,2,3,4,5)
$FileList[2]=$PDF[2]
$FileList[3]=$PDF[3]
$FileList[4]="index.jsp"

#   Clear FTP Directory
$DelLoop=1
$server = "www.newsbase.com"
$dir = "/usr/local/tomcat/webapps/newsbasearchive/monitors/asiaelec/"
"open $server
user derek bland1ne
binary  
cd $dir    
" +(
For ($DelLoop=1; $DelLoop -le 5; 5)
    {
        $FileList[$DelLoop] | %{ "delete ""$_""`n" }
        $DelLoop++
    })| ftp -i -in 
```

这还不是全部，但我相信它包含所有相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:16:22.360

你的 $dir 路径看起来像你在一个 unix 系统上，所以这可能有点不同，但你需要做的就是稍微改变你的最终循环：

```
For ($DelLoop=1; $DelLoop -le 5; $DelLoop++)
{
    $FileList[$DelLoop] | % { rm $FileList[$DelLoop] }
} 
```

这是假设 $FileList 包含您要删除的文件，而不仅仅是（我猜是虚拟的）数字。我还建议您下载 @Graimer 提到的模块，然后将其放入 WindowsPowerShell > Modules > %ModuleFolder% > %Module.psm1% 并从您的配置文件中导入。

然后，您可以只使用`PS> Remove-FTPItem -Path "/myFolder" -Recurse`删除您的 FTP 内容。让您的生活更轻松。

调整这篇文章的解决方案也可能有助于[使用 PowerShell 通过 FTP 上传文件](https://stackoverflow.com/questions/1867385/upload-files-with-ftp-using-powershell)

例如：

用于`$ftp.Method = [System.Net.WebRequestMethods+Ftp]::DeleteFile`删除文件，

并`$response = $ftp.GetResponse()`了解事情是否顺利。

**编辑**

[在从这里http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/17a3abbc-6144-433b-aadd-1f776c042bd5](http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/17a3abbc-6144-433b-aadd-1f776c042bd5)进行一些研究后编写了这个函数，并从 Accepted在上面的链接以及@Graimer 谈到的模块中回答。

```
function deleteFTPSide 
{
    Param(
        [String] $ftpUserName = "muUserName",
        [String] $ftpDomain = "ftp.place.com", # Normal domains begin with "ftp" here
        [String] $ftpPassword = "myPassword",
        [String] $ftpPort = 21, # Leave as the default FTP port
        [String] $fileToDelete = "folder.domain.com/subfolder/file.txt"
    )

    # Create the direct path to the file you want to delete
    [String] $ftpPath = "ftp://"+"$ftpUserName"+":"+"$ftpPassword@$ftpDomain"+":"+"$ftpPort/$fileToDelete"

    # create the FtpWebRequest and configure it
    $ftp = [System.Net.FtpWebRequest]::Create($ftpPath)

    $ftp.Method = [System.Net.WebRequestMethods+Ftp]::DeleteFile

    $ftp.Credentials = new-object System.Net.NetworkCredential($ftpUserName,$ftpPassword)

    $ftp.UseBinary = $true
    $ftp.UsePassive = $true

    $response = [System.Net.FtpWebResponse]$ftp.GetResponse()
    $response.Close()
} 
```

虽然，诚然，这不是编写的最优雅的解决方案之一，但我已经对其进行了测试，它可以从 FTP 服务器上删除指定的文件。

# asp.net - ASP.NET 和 System.Web.Optimization 不捆绑 css / js 文件

> ID：14599737
> 
> 赞同：0
> 
> 时间：2013-01-30T08:39:30.837
> 
> 标签：asp.net, bundle

我正在尝试使用 System.Web.Optimization 的捆绑功能来缩小我的 css 和 java 脚本。

我已经通过 NuGet 安装了预发行版

```
Install-Package Microsoft.Web.Optimization -Pre 
```

并将以下引用添加到我的 web.config 文件中

/Views/Web.config

```
<pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    .....
    <add namespace="System.Web.Optimization" />
  </namespaces>
</pages> 
```

/Web.config

```
<pages>
  <namespaces>
    .....
    <add namespace="System.Web.Optimization" />
  </namespaces>
</pages> 
```

我正在添加这样的捆绑包

```
bundles.Add(new StyleBundle("~/Styles").IncludeDirectory("~/Styles", "*.css"));
bundles.Add(new ScriptBundle("~/Scripts/App").IncludeDirectory("~/Scripts/App", "*.js")); 
```

并像这样渲染到我的页面

```
@Styles.Render("~/Styles")
@Scripts.Render("~/Scripts/App") 
```

在我关闭调试之前效果很好

```
<compilation debug="false" targetFramework="4.0" /> 
```

添加到我的页面的链接和脚本标签是

```
<link href="/Styles?v=NMwU-eYeuzJZeywD3xbes6ngUXXJURhda30SEe9mb7Y1" rel="stylesheet">
<script src="/Scripts/App?v=NIL6McOTiWu9OPTVvgMfbmjFtYQhKZDQpRIbKK2kzSk1"></script> 
```

查看 Chromes 网络选项卡，我得到一个 302 重定向到

```
/Styles
/Scripts/App 
```

其次是 404 :(

我似乎无法让它工作....有没有人看到类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:24:01.093

您可能与您的路由代码有冲突吗？

[Rick Anderson 有一篇](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)关于捆绑/缩小功能的博客文章，其中包括一条说明，您必须小心避免路由冲突。您还没有发布您的路由部分，但值得一看。

# javascript - 如何通过拖动使对象旋转，如何使用 sin 或 cos 获得围绕原点的旋转点？

> ID：14599738
> 
> 赞同：10
> 
> 时间：2013-01-30T08:39:37.447
> 
> 标签：javascript, jquery, css, math

我已经搜索了很长时间，但找不到更好的方法来解决我的问题，
使 div 可拖动，通过每个手柄旋转和调整大小，就像这些 2 示例[1](http://vremenno.net/examples/jquery-ui-rotation/) [2](http://fabricjs.com/kitchensink/)，现在它可以拖动，但是旋转..

关于[Prasanth KC](https://stackoverflow.com/a/10330295/1775888) , [Chango](https://stackoverflow.com/a/11067482/1775888) , [Yijiang](https://stackoverflow.com/a/3438798/1775888) .. 的回答，这些代码可能不正确，
**1\. 它应该有一个围绕原点的旋转点。
2.需要考虑半径。**
但我不知道如何在这里使用 sin 或 cos 来使旋转考虑半径？
任何建议将不胜感激。 [http://jsfiddle.net/tBgLh/8/](http://jsfiddle.net/tBgLh/8/)

```
var dragging = false, target_wp;   
$('.handle').mousedown(function(e) {
    var o_x = e.pageX, o_y = e.pageY; // origin point
    e.preventDefault();
    e.stopPropagation();
    dragging = true;
    target_wp=$(e.target).closest('.draggable_wp');

    $(document).mousemove(function(e) {
        if (dragging) {
            var s_x = e.pageX, s_y = e.pageY; // start rotate point
            if(s_x !== o_x && s_y !== o_y){ //start rotate
                var s_rad = Math.atan2(s_y, s_x);
                var degree = (s_rad * (360 / (2 * Math.PI)));
                target_wp.css('-moz-transform', 'rotate(' + degree + 'deg)');
                target_wp.css('-moz-transform-origin', '50% 50%');
                target_wp.css('-webkit-transform', 'rotate(' + degree + 'deg)');
                target_wp.css('-webkit-transform-origin', '50% 50%');
                target_wp.css('-o-transform', 'rotate(' + degree + 'deg)');
                target_wp.css('-o-transform-origin', '50% 50%');
                target_wp.css('-ms-transform', 'rotate(' + degree + 'deg)');
                target_wp.css('-ms-transform-origin', '50% 50%');
            }
        }
    })
    $(document).mouseup(function() {
        dragging = false
    })
})// end mousemove 
```

html

```
<div class="draggable_wp">
    <div class="el"></div>
    <div class="handle"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-02T22:57:00.180

你的方法有两个问题：

1.  原点不应该是用户单击的位置（即句柄），而是 div 中的固定点：

    ```
    target_wp=$(e.target).closest('.draggable_wp');
    //var o_x = e.pageX, o_y = e.pageY; // origin point
    var o_x = target_wp.offset().left,
        o_y = target_wp.offset().top; // origin point 
    ```

    您**还将**使用单击的点，但用于其他用途（稍后会详细介绍）：

    ```
    var h_x = e.pageX, h_y = e.pageY; // clicked point 
    ```

    最后，原点应该是固定的（即不应该在旋转之间改变）。这样做的一种方法是将其保留为`data`属性（但还有其他选项）：

    ```
    if ( !target_wp.data("origin") )
        target_wp.data("origin", { left:target_wp.offset().left,
                                   top:target_wp.offset().top    });
    var o_x = target_wp.data("origin").left, 
        o_y = target_wp.data("origin").top; // origin point 
    ```

    **更新：**原点的一个很好的候选者是 CSS 属性[`transform-origin`](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin)，如果存在的话 - 它应该确保鼠标尽可能靠近手柄。但是，这是一项实验性功能，因此实际结果可能会有所不同。PS我不确定将其设置`50% 50%`为一个好主意，因为转换本身可能会改变元素的宽度和高度，顶部和左侧。

2.  要找到角度，您不应该只调用`atan2`鼠标点，因为它只会计算该点与页面左上角之间的角度。你想要那个点和原点之间的角度：

    ```
    var s_rad = Math.atan2(s_y - o_y, s_x - o_x); // current to origin 
    ```

    这会让你[走到一半](http://jsfiddle.net/mgibsonbr/tBgLh/9/)，但它仍然会表现得很奇怪（它会围绕元素原点旋转，但不会像你期望的那样跟随手柄）。要使其跟随手柄，您应该调整相对于点击点的角度 - 这将作为旋转量的基础：

    ```
    s_rad -= Math.atan2(h_y - o_y, h_x - o_x); // handle to origin 
    ```

    之后，您可以进行轮换[（](http://jsfiddle.net/mgibsonbr/tBgLh/10/)至少对于一个用户迭代）。

您会注意到手柄没有精确地跟随鼠标，原因是原点的选择 - 默认为元素的上/左角。将其调整到元素内部的某个位置（可能使用`data-`属性），它应该可以按预期工作。

但是，如果用户多次与手柄交互，仅**设置**旋转角度是不够的，您必须**更新**上次迭代期间的任何内容。所以我添加了一个`last_angle`变量，它将在第一次单击时设置，然后在拖动过程中添加到最终角度：

```
// on mousedown
last_angle = target_wp.data("last_angle") || 0;

// on mousemove
s_rad += last_angle; // relative to the last one

// on mouseup    
target_wp.data("last_angle", s_rad); 
```

这是最后的[工作示例](http://jsfiddle.net/mgibsonbr/tBgLh/11/)。（注意：我修复了鼠标处理程序的嵌套，因此每次单击后不会再次添加它们）

```
$(function () {
    var dragging = false,
        target_wp,
        o_x, o_y, h_x, h_y, last_angle;
    $('.handle').mousedown(function (e) {
        h_x = e.pageX;
        h_y = e.pageY; // clicked point
        e.preventDefault();
        e.stopPropagation();
        dragging = true;
        target_wp = $(e.target).closest('.draggable_wp');
        if (!target_wp.data("origin")) target_wp.data("origin", {
            left: target_wp.offset().left,
            top: target_wp.offset().top
        });
        o_x = target_wp.data("origin").left;
        o_y = target_wp.data("origin").top; // origin point

        last_angle = target_wp.data("last_angle") || 0;
    })

    $(document).mousemove(function (e) {
        if (dragging) {
            var s_x = e.pageX,
                s_y = e.pageY; // start rotate point
            if (s_x !== o_x && s_y !== o_y) { //start rotate
                var s_rad = Math.atan2(s_y - o_y, s_x - o_x); // current to origin
                s_rad -= Math.atan2(h_y - o_y, h_x - o_x); // handle to origin
                s_rad += last_angle; // relative to the last one
                var degree = (s_rad * (360 / (2 * Math.PI)));
                target_wp.css('-moz-transform', 'rotate(' + degree + 'deg)');
                target_wp.css('-moz-transform-origin', '50% 50%');
                target_wp.css('-webkit-transform', 'rotate(' + degree + 'deg)');
                target_wp.css('-webkit-transform-origin', '50% 50%');
                target_wp.css('-o-transform', 'rotate(' + degree + 'deg)');
                target_wp.css('-o-transform-origin', '50% 50%');
                target_wp.css('-ms-transform', 'rotate(' + degree + 'deg)');
                target_wp.css('-ms-transform-origin', '50% 50%');
            }
        }
    }) // end mousemove

    $(document).mouseup(function (e) {
        dragging = false
        var s_x = e.pageX,
            s_y = e.pageY;

        // Saves the last angle for future iterations
        var s_rad = Math.atan2(s_y - o_y, s_x - o_x); // current to origin
        s_rad -= Math.atan2(h_y - o_y, h_x - o_x); // handle to origin
        s_rad += last_angle;
        target_wp.data("last_angle", s_rad);
    })
})
```

```
.draggable_wp {
    position: absolute;
    left: 150px;
    top: 150px;
}
.el {
    width: 25px;
    height: 50px;
    background-color: yellow;
}
.handle {
    position: absolute;
    left:0;
    top:-75;
    width: 25px;
    height: 25px;
    background-color: blue;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<div class="draggable_wp">
    <div class="el"></div>
    <div class="handle"></div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:59:16.670

他们在变换属性中使用矩阵函数。您可以通过旋转矩阵通过多重播放矩阵（元素坐标）来旋转元素。

```
transform:  matrix(a, c, b, d, tx, ty) 
```

更多信息和示例在这里：[数学挑战者的 CSS3 矩阵（）变换](http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/)

# jquery - 更改块 ui 的显示文本和字体大小

> ID：14599739
> 
> 赞同：3
> 
> 时间：2013-01-30T08:39:37.600
> 
> 标签：jquery, blockui

我在我的第一个项目中使用了 blockUI。下面的脚本显示了我是如何使用它的：

```
$(document).ready(function(){
    $('#elem').click(function(e){

            $.blockUI({ css: { 
                border: 'none', 
                padding: '15px', 
                backgroundColor: '#000', 
                '-webkit-border-radius': '10px', 
                '-moz-border-radius': '10px', 
                opacity: .5, 
                color: '#fff' 
            } }); 

            setTimeout($.unblockUI, 2000);  

    });
}); 
```

当单击事件发生时，将显示该块，并带有文本“请稍候...”。我不知道这段文字来自哪里，我想将文字修改如下：

*   更改用于显示文本的字体大小
*   将纺车的图像添加到“请稍候..”文本

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:44:34.223

`message`为此使用选项。

在此处记录[http://jquery.malsup.com/block/#options](http://jquery.malsup.com/block/#options)

例如，

```
$.blockUI({message:'<img src="your-image-path-here" alt="Please Wait" />',...}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-29T06:45:19.850

试试这种方式：

```
 $.blockUI(
    {
        css: { 
            border: 'none', 
            padding: '15px', 
            backgroundColor: '#000', 
            '-webkit-border-radius': '10px', 
            '-moz-border-radius': '10px', 
            opacity: .5, 
            color: '#fff',
            fontSize:'16px'
        },
        message: 'Your custom message'
    }); 
```

# ios - 在目标 c 中创建简单的 OCMock 单元测试

> ID：14599740
> 
> 赞同：0
> 
> 时间：2013-01-30T08:39:40.893
> 
> 标签：ios, objective-c, unit-testing, ocmock

我将 OCMock 配置到我的静态类库中，并创建了这样的简单方法。

```
#import "IOSExample.h"
@implementation IOSExample

-(NSString *)MyTest
{
return @"Nuwanga";
}

-(int *)MyAge
{
    int a=5;
    int b=5;
    int product=a*b;
    return product;
}
 @end 
```

在 OCUnit 测试中，我创建了这个方法，如下所示。

```
-(void)testMyAge
{
    int a=5;
    int b=5;
    int product=a*b;
    STAssertTrue((product > 0), @"The Product was less than zero");
} 
```

我的问题是如何在 OCMock 单元测试中创建返回类型测试方法？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T08:25:27.930

对于 TDD，您可以如下修改您的代码

```
-(int *)MyAge:(int)inA and:(int)inB
{
    int product=inA*inB;
    return product;
} 
```

而你的测试用例会变成这样

```
-(void)testMyAge
{
    int product=[sut MyAge:5 and:5];
    STAssertTrue((product > 0), @"The Product was less than zero");
} 
```

在这种情况下，我认为不需要嘲笑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:15:12.730

也许你想做类似的事情

```
-(void)testMyAge
{
    IOSExample *exampleUndertest = [[IOSExample alloc] init];

    STAssertTrue(([exampleUndertest MyAge] > 0), @"The Product was less than zero");
} 
```

问候，昆汀

# arrays - 将对象添加到 nsmutable 数组模型

> ID：14599751
> 
> 赞同：0
> 
> 时间：2013-01-30T08:40:15.990
> 
> 标签：arrays, object, model, nsmutablearray, add

我有一个 nsmutable 数组，这是它的内容：

```
Longitude, Latitude, Name, Town 
```

这 4 个条目在我的数组中是 14 次。

我的问题是，我无法将“距离”添加到我的数组中。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:52:31.317

您只能将对象添加到 NSMutableArray，而不是例如浮点数。因此，如果“距离”是一个类，并且您实例化了它，则可以使用 addObject: 方法添加实例。

# c# - 正则表达式创建时的 ArgumentException

> ID：14599752
> 
> 赞同：3
> 
> 时间：2013-01-30T08:40:20.167
> 
> 标签：c#, .net, regex, exception

创建以下正则表达式时我有一个奇怪的行为：

```
new System.Text.RegularExpressions.Regex( "^\\)$" ); 
```

有时我得到 ArgumentException，但它很少发生，我无法解释原因。应用程序在 .net 4.0 上运行，目标为 x86。你能帮我解决这个问题吗？

# c++ - 用户定义的文字作为可变参数模板

> ID：14599754
> 
> 赞同：2
> 
> 时间：2013-01-30T08:40:22.030
> 
> 标签：c++, gcc, c++11

GCC 4.7.2 似乎只有为数字实现的可变字符模板文字运算符：

```
template<char... chars>
constexpr size_t operator "" _size() { return sizeof...(chars); }

int main()
{
    std::cout << 42_size;    // (1) works
    std::cout << "foo"_size; // (2) does not
} 
```

*   是否有支持此代码的 GCC 版本？
*   (2) 甚至是标准的一部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:10:24.510

C++11 标准的 2.14.8.5 声明

> 如果 L 是用户定义字符串文字，则令 str 为不带 ud 后缀的文字，令 len 为 str 中的代码单元数（即，其长度不包括终止空字符）。文字 L 被视为对形式 operator "" X (str, len) 的调用

因此，将您的代码重写为：

```
#include <iostream>

// (1)
template<char... chars>
constexpr size_t operator "" _size() { return sizeof...(chars); }

// (2)
constexpr size_t operator "" _size( const char* str, size_t sz ) { return sz; }

int
main(void)
{
  std::cout << 42_size << std::endl;    // (1)
  std::cout << "foo"_size << std::endl; // (2)

  return 0;
} 
```

为 (2) 明确指定正确的形式

# html - svg中的自定义字体

> ID：14599755
> 
> 赞同：17
> 
> 时间：2013-01-30T08:40:22.310
> 
> 标签：html, fonts, svg

我想在嵌入网页的 svg 中使用自定义字体。使用 setattribute 我可以使用 Arial... 字体。我认为这些字体嵌入在浏览器中，我可以使用它。但是我该怎么做才能使用自定义字体呢？在 Firefox 中，当我在 css 中使用 @font-face ....

```
@font-face {

                font-family: "ITCGothicBold";
                src: url('fonts/ITCGothicBold.ttf') format("truetype");

} 
```

该字体系列适用于 Html 网页。

另一方面，例如，在 svg 文本中：

```
<text xml:space="preserve" text-anchor="middle" font-family="ITCGothicBold.ttf" font-size="24" id="svg_1" y="72.83333" x="74.75" stroke-width="0" stroke="#000000" fill="#000000">HELLO</text> 
```

我想以 ITCGothicBold.ttf 为例。使用 setattribute 我可以将 ITCGothicBold.ttf 放在 font_family 属性中，但没有任何改变：HELLO 文本没有改变。有谁知道如何使用嵌入网页的 svg 中的自定义字体？谢谢

注意：我使用的完整代码是：

```
<svg width="612" height="394" xmlns="http://www.w3.org/2000/svg">
    <defs>
  <style type="text/css">@font-face {

                font-family: "ITCGothicBold.ttf";
                src: url('fonts/ITCGothicBold.ttf') format("truetype");

}</style>
 </defs>
 <g>
  <title>Calque 1</title>
  <text fill="#000000" stroke="#000000" stroke-width="0" x="75.75" y="72.83333" id="svg_1" font-size="24" font-family="ITCGothicBold.ttf" text-anchor="middle" xml:space="preserve">HELLO</text>
 </g>
</svg> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-12T20:44:55.427

您可以像在 css 中一样更改 svgs 中的字体。

```
<style>
    @font-face {
        font-family: font;
        src: url(font.woff);
    }
    svg{
        font-family: font, fallBackFonts, sans-serif;
    }
</style 
```

尽管我建议您更详细地定义它以获得更好的兼容性。这样您就可以提供各种后备方案。

```
@font-face { 
    font-family: 'font'; 
    src: url('font.eot');
    src: url('location/of/font.eot?#iefix') format('eot'), 
         url('location/of/font.woff') format('woff'), 
         url('location/of/font.ttf') format('truetype'), 
         url('location/of/font.svg#webfont') format('svg'); 
    font-weight: 400; 
    font-style: normal; 
} 
```

提供字体转换（用于 eot、woff、truetype 和 svg 文件）的服务是...
[https://github.com/briangonzalez/fontprep](https://github.com/briangonzalez/fontprep)
[http://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)

话虽这么说，如果您真的想在 svg 中分配字体，您将像您一样添加属性 font-family 。虽然我不会在命名方案中包含文件扩展名 (.ttf)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-25T17:36:59.513

以下是我从另一个 SVG 文件中引用 SVG 字体的方式：

```
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="1000">

  <defs>
    <font-face>
      <font-face-src>
        <font-face-uri href="file:///.../DejaVuSans.svg"/>
      </font-face-src>
    </font-face>
  </defs>

  <text x="0" y="400" font-family="DejaVu Sans" font-size="200">
    Abc
  </text>
</svg> 
```

# lambda - 重复列表

> ID：14599758
> 
> 赞同：3
> 
> 时间：2013-01-30T08:40:28.763
> 
> 标签：lambda, prolog

假设我需要一个谓词 rep( *?List* , *?Times* , *?TList* )，如果*List在**TList*中重复*Times*次，则该谓词为真（例如，）。只要实例化了两个参数，它就应该起作用。这是一个有点工作的版本：*`rep([a,c],2,[a,c,a,c])`*

 *```
rep(_,0,[]).
rep(List,1,List).
rep(List,Times,TList) :- integer(Times), Times>1,
    succ(RemTimes,Times), append(List,RemList,TList),
    rep(List,RemTimes,RemList).
rep(List,Times,TList) :- var(Times),
    append(List,RemList,TList),
    rep(List,RemTimes,RemList), !,
    succ(RemTimes,Times). 
```

两个问题：

1.  是不是有一些内置的（我找不到）可以做到这一点？
2.  有没有更直接的方法来做到这一点？就像摆脱最后一个子句一样？这是必要的，因为当*Times*没有实例化时，我找不到表达*Times*和*RemTimes之间关系的方法。*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:43:19.617

你使用 SWI-Prolog，所以你可以这样做：

```
:- use_module(library(lambda)).

rep(Lst, N, R) :-
    (   numlist(1,N, NL)
    ->  foldl(\_X^Y^Z^append(Y, Lst, Z), NL, [], R)
    ;   R = []). 
```

为了解决 CapelliC 的评论，**不报告 X 绑定到 rep(X,2,[a,b,a,b])** 你必须写

```
foldl(Lst +\_X^Y^Z^append(Y, Lst, Z), NL, [], R) 
```

[编辑] 谢谢@false！有趣的是

```
rep(Lst, N, R) :-
    (   nonvar(N)
    ->  length(NL, N),
        foldl(Lst +\_^Y^append(Y, Lst), NL, [], R)
    ;   foldl(Lst +\_^Y^append(Y, Lst), NL, [], R),
        length(NL, N)),
    !. 
```

但不幸的是，它与 rep([a,b], N, [a,c,a,c]) 循环！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:40:23.757

一个简单（但可能效率低下）的策略是扫描第二个列表并每次检查第一个是否是其余部分的子列表。

要进行检查，您可以使用[`prefix/2`](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.12%27,swi%28%27/doc/Manual/lists.html%27%29%29)SWI-Prolog 中的运算符。

```
sublist_count(L, R, Times) :-
    sublist_count(L, R, 0, Times).
sublist_count(L, [], Times, Times).
sublist_count(L, [R | Tail], Times, End) :-
    prefix(L, [R | Tail]), !,
    NewTimes is Times + 1,
    sublist_count(L, Tail, NewTimes, End).
sublist_count(L, [R | Tail], Times, End) :-
    sublist_count(L, Tail, Times, End). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:55:02.553

我不知道一个专门的内置。[这是一个使用长度](http://www.swi-prolog.org/pldoc/doc_for?object=length/2)/2的生成能力的过程

```
rep(List, Times, TList) :-
    ( var(Times) ; Times > 0 ),  % after joel76' comment...
    ( var(List) ; is_list(List) ), % after false' comment...
    ( var(TList) ; is_list(TList) ), % idem...
    length(List, LA), LA > 0,
    length(TList, LT), LT > 0,
    Times is LT / LA,
    findall(List, between(1, Times, _), [List|Ls]),
    append([List|Ls], TList), !. 
```

当任何列表空闲时，最终剪切避免循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:14:33.173

以下是否有意义。（我不处理`Times`未定义的情况。）

```
rep(List, Times, TList) :-
    length(List, ListLen),
    PrefixLen is ListLen * Times,
    open_list(List, OpenList, OpenList),
    length(TList, PrefixLen),
    append(TList, _, OpenList). 
```

其中`open_list/3`定义为：

```
open_list([], X, X).
open_list([H | T1], [H | T2], X) :-
    open_list(T1, T2, X). 
```

这个想法是创建一个无限列表，然后切断所需的前缀。

使用示例：

```
?- rep([a, c], 2, TList).
TList = [a, c, a, c].

?- rep(List, 2, TList).
List = TList, TList = [] ;
List = [_G886],
TList = [_G886, _G886] ;
List = [_G886, _G889],
TList = [_G886, _G889, _G886, _G889] ; 
```**

# c# - 转换 Func<> 类型

> ID：14599763
> 
> 赞同：11
> 
> 时间：2013-01-30T08:40:47.330
> 
> 标签：c#, functional-programming

```
Cannot convert type 'System.Func<int,bool>' to 'System.Func<object,bool>' 
```

尝试将 f2 转换为 f1：

```
 Func<object, bool> f1 = x => true;
    Func<int, bool> f2 = x => true;
    f1 = (Func<object, bool>)f2; 
```

尝试了地图功能来解决，但是这次我得到了

```
Argument 1: cannot convert from 'C' to 'A' 
```

例外。关于 transform(a) 函数

```
 Func<int, bool> f3 = Map(f2, x => x);

    Func<C, B> Map<A, B, C>(Func<A, B> input, Func<A, C> transform)
    {
        return x => input(transform(x));
        // return x => input(transform((A)x)); not working
    } 
```

有解决办法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T08:45:27.820

这应该有效：

```
f1 = p => f2((int)p); 
```

但是，如果您`f1`将`InvalidCastException`无法转换为`int`.

可以创建一个通用实用程序函数来执行此操作，前提是输入类型`f2` 继承自输入类型`f1`（在您的示例中为真 -`int`派生自`object`）：

```
static Func<TOut, TR> ConvertFunc<TIn, TOut, TR>(Func<TIn, TR> func) where TIn : TOut
{
    return p => func((TIn)p);
} 
```

然后你可以像这样使用它：

```
f1 = ConvertFunc<int, object, bool>(f2); 
```

但这并不比我的第一个例子更简洁，而且我认为第二种方法比第一种方法可读性差一些。

* * *

顺便说一句，`Map()`如果您将类型参数按正确的顺序放置，则可以编译您的方法：

```
static  Func<TNewIn, TOut> Map<TOrigIn, TNewIn, TOut>(Func<TOrigIn, TOut> input, 
                                                      Func<TNewIn, TOrigIn> convert)
{
    return x => input(convert(x));
} 
```

你可以这样称呼它：

```
f1 = Map(f2, (object x) => (int)x); 
```

您需要明确指出`NewIn`类型，因为编译器无法推断它。

# c++ - 原子“检查信号并进入系统调用”操作

> ID：14599770
> 
> 赞同：3
> 
> 时间：2013-01-30T08:41:25.507
> 
> 标签：c++, linux, signals, posix

我正在尝试在 C++ 中实现我自己的取消点机制。该代码主要针对 Linux，但我希望它可以在 POSIX 系统中移植。

出于显而易见的原因，每个阻塞系统调用都必须是一个取消点，否则线程可能会永远阻塞并且没有任何东西能够唤醒它。目前我使用信号来实现这一点。当线程接收到表示取消请求的特殊信号时，信号处理程序设置线程本地标志。如果该线程在某些系统调用上被阻塞，它将失败并显示`errno == EINTR`. 然后它将有机会检查标志。

但很快我发现上述方法并不完美。如果信号先出现，然后线程进入阻塞系统调用，它也会进入永远阻塞状态。在每次阻塞调用之前检查标志并不能使事情变得足够好。信号可能会在检查之后出现：

```
if(cancelled)
    throw CancellationException();
 // <--- The signal comes here. ---> //
blocking_call(); 
```

这是我的问题：有没有办法确保当我进入系统调用时，取消标志没有设置？如果不是，设计此类取消点的常见做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:35:17.517

我会把它作为一个实际的答案。

如果您正在寻找取消 pthread 的工作，请查看[pthread 取消处理程序](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_cleanup_push.3.html)。从那里抛出异常可能有用吗？

# internet-explorer - 使用 IE selenium webdriver 时用户代理标头错误

> ID：14599775
> 
> 赞同：1
> 
> 时间：2013-01-30T08:41:36.943
> 
> 标签：internet-explorer, selenium, webdriver, selenium-webdriver, user-agent

我有奇怪的问题。通常，我正在测试的网站是为 IE8 及更高版本制作的。它检查用户代理标头。当我手动执行此操作时，它可以完美运行，但是当我尝试使用 webdriver (IEDriverServer) 进行连接时，它不起作用。

当我在手动连接到我的站点时查看（使用提琴手）用户代理标头时，它是正确的：

`User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; GTB7.4; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; MAAU; .NET4.0C; InfoPath.2; .NET4.0E)`

但是当使用 webdriver 时，它看起来像使用了 IE5.5：

`User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0; Trident/4.0; GTB7.4; .NET CLR 2.0.50727; SLCC2; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; MAAU; .NET4.0C; Tablet PC 2.0; .NET4.0E)`

我在用着 ：

*   selenium-java-2.28.0（之前用过 2.20、2.29，也没有用）
*   Win7 家庭高级版 sp1
*   IE8.0
*   `client: java -jar selenium-server-standalone-2.28.0.jar -role webdriver -hub http:// localhost:4444/grid/register -browser browserName=iexplore,platform=WINDOWS, version="8.0"`
*   集线器：java -jar selenium-server-standalone-2.29.0.jar -role hub
*   日食，Java。

谷歌说我不能为 IE 切换用户代理。仅适用于 FF 和 Chrome。不幸的是，我被迫使用 IE。

有什么提示吗？建议？这是一个错误还是我错过了什么？在此先感谢您的帮助。

# php - Wordpress 自动创建帖子

> ID：14599781
> 
> 赞同：-2
> 
> 时间：2013-01-30T08:42:00.973
> 
> 标签：php, wordpress, post

您好，如何在我的 index.php 文件中创建自定义帖子，以便当有人安装模板时它会自动创建 5 个帖子？

我绑了这个：

```
<?php // Create post object
$my_post = array(
  'post_title'    => 'My post1',
  'post_content'  => 'This is my post8.',
  'post_status'   => 'publish',
  'post_author'   => 1,
  'post_category' => array(8,39)
);

// Insert the post into the database
wp_insert_post( $my_post ); ?> 
```

但它没有用。我想做的是在`<div>`标签内创建自定义帖子。因此，当用户安装主题时，他们已经使用主题创建，并且帖子将单独显示。例如：

```
<div class="demo">

                <?php // Create post object
$my_post = array(
  'post_title'    => 'My post1',
  'post_content'  => 'This is my post8.',
  'post_status'   => 'publish',
  'post_author'   => 1,
  'post_category' => array(8,39)
);

// Insert the post into the database
wp_insert_post( $my_post ); ?>
            </div>

            <div class="description">
                <span class="big"><?php // Create post object
$my_post = array(
  'post_title'    => 'My post2',
  'post_content'  => 'This is my post7.',
  'post_status'   => 'publish',
  'post_author'   => 1,
  'post_category' => array(8,39)
);

// Insert the post into the database
wp_insert_post( $my_post ); ?> </span>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:37:26.590

看起来您正在使用[wp_insert_post()](http://codex.wordpress.org/Function_Reference/wp_insert_post)中的示例。

1.  确保您确实拥有带有 ID`8`和`39`.
2.  使用类似的东西`$var = wp_insert_post($your_args)`。然后回`$var`显以获取创建的帖子的 ID。

# bluetooth-lowenergy - BLE iOS 设备可以同时是外围设备和中央设备吗？

> ID：14599784
> 
> 赞同：1
> 
> 时间：2013-01-30T08:42:17.770
> 
> 标签：bluetooth-lowenergy, peripherals, cbcentralmanager

是否有可能同时使用外围模式和中央模式？在这种情况下，我们在收听其他设备的广告时将其作为外围设备进行广告。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:16:07.683

是的 - 你可以虽然同一设备同时作为中央和外围设备不是标准的 pe 蓝牙当前规范，iOS 目前支持它

# android - 单击下一步按钮时如何从数组中获取下一个问题

> ID：14599793
> 
> 赞同：-1
> 
> 时间：2013-01-30T08:43:05.170
> 
> 标签：android, button, textview

我是安卓新手。。

我面临下一个按钮的问题..

我可以在 textview 中显示第一个问题，当我单击下一个按钮时，我无法在我的 textview 中看到下一个问题...

我做错了什么，我错过了什么？

> ```
>  protected void onPostExecute(String args) {
>         pDialog.dismiss();  
>         List<NameValuePair> params = new ArrayList<NameValuePair>();
>         params.add(new BasicNameValuePair("tid", tid));
>         JSONObject json = jsonParser.makeHttpRequest(url_get_quesid, "GET", params);
>         json = jsonParser.makeHttpRequest(url_get_quesurl, "GET", params);
>          try {
>         int success = json.getInt(TAG_SUCCESS);
>         if (success == 1) {
>         System.out.println("Success");
>         groups = json.getJSONArray(TAG_GROUP);
>         System.out.println("Result Success+++"+groups);
>         for (int i = 0; i < groups.length();i++) {
>         JSONObject c = groups.getJSONObject(i);
>         String questionid = c.getString(TAG_QUESID);
>         String question = c.getString(TAG_QUES);
>         String answer = c.getString(TAG_ANSW);
>         System.out.println("Checking ::"+questionid);
>         id=questionid;         
>         quesid.add(questionid);
>                 class QuestionData {
>         private String questionid;
>         private String question;
>         private String answer;
>         public String getQuestionid() {
>         return questionid;
>         }
>         public void setQuestionid(String questionid) {
>               this.questionid = questionid;
>         }
>         public String getQuestion() {
>               return question;
>         }
>         public void setQuestion(String question) {
>               this.question = question;
>         }
>         public String getAnswer() {
>               return answer;
>            }
>         public void setAnswer(String answer) {
>               this.answer = answer;
>          }
>             }
>     final ArrayList < QuestionData > questionDatas = new ArrayList < QuestionData > ();
>     //questionDatas.add(questionData);      
>     if (firstQuestionParsed) {
>         TextView txtque = (TextView) findViewById(R.id.que_txt);
>             txtque.setText(question);   *// here im getting last question in the    
>                                            //textview im not gettin the first question..                         
>     }
>      QuestionData questionData = new QuestionData();
>      questionData.setQuestionid(questionid);
>      questionData.setQuestion(question);
>      questionData.setAnswer(answer);
>      questionDatas.add(questionData);
>          Button nextQuestion = (Button) findViewById(R.id.nxt_btn);
>          nextQuestion.setOnClickListener(new OnClickListener() {
>           public void onClick(View v) {
>          int counter=0;
>          if (counter < questionDatas.size()) {
>          QuestionData question = questionDatas.get(counter);
>          showNextQuestion(question);
>          TextView txtque = (TextView) findViewById(R.id.que_txt);
>          txtque.setText((CharSequence) question);  *// here i didnt get any question...
>          counter++;
>        }
>     }
>     private void showNextQuestion(
>     QuestionData question) {
>     // TODO Auto-generated method stub
>     }
>      });
>       }
>     } else {
>       showAlert();
>     }
>     } catch (JSONException e) {
>     System.out.println("Error "+e.toString());
>     } 
> ```

同时我想在单选按钮中显示多个答案选项..如何设置单选按钮和单选按钮文本..

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:27:26.600

您没有在公共 void onClick(View v) {} 中为 OnClickListener() 编写任何代码，您应该在 onClick() 中应用值

# python - 为什么 Python 的标准库对发送电子邮件的支持很弱

> ID：14599796
> 
> 赞同：0
> 
> 时间：2013-01-30T08:43:14.577
> 
> 标签：python, email, standard-library

Python 被宣传为“包含电池”的语言。所以，我想知道为什么它的标准库不包括对电子邮件的高级支持：

我发现您需要对 MIME 有很多了解才能创建与您在典型电子邮件客户端中可以实现的功能等效的电子邮件，例如处理 HTML 内容、嵌入的图像和文件附件。

为此，您需要对[消息进行低级组装](https://stackoverflow.com/questions/920910/python-sending-multipart-html-emails-which-contain-embedded-images)，例如：

*   处理`MIMEMultipart`部分，并了解`related`,`alternate`等。
*   了解文件编码，例如`base64`

如果您刚刚了解 MIME 足以组装这样的电子邮件，则很容易陷入陷阱，例如错误的部分嵌套，并创建一些电子邮件客户端可能无法正确查看的消息。

我不需要了解 MIME 就能正确发送电子邮件。高级库支持应该[封装所有这些 MIME 逻辑](http://code.activestate.com/recipes/473810/)，允许您编写如下内容：

```
m = Email("mailserver.mydomain.com")
m.setFrom("Test User <test@mydomain.com>")
m.addRecipient("you@yourdomain.com")
m.setSubject("Hello there!")
m.setHtmlBody("The following should be <b>bold</b>")
m.addAttachment("/home/user/image.png")
m.send() 
```

非标准库解决方案是[`pyzmail`](http://www.magiksys.net/pyzmail/)：

```
import pyzmail
sender=(u'Me', 'me@foo.com')
recipients=[(u'Him', 'him@bar.com'), 'just@me.com']
subject=u'the subject'
text_content=u'Bonjour aux Fran\xe7ais'
prefered_encoding='iso-8859-1'
text_encoding='iso-8859-1'
pyzmail.compose_mail(
        sender,  recipients, 
        subject, prefered_encoding,  (text_content, text_encoding), 
        html=None, 
        attachments=[('attached content', 'text', 'plain', 'text.txt',
                      'us-ascii')]) 
```

是否有任何理由不在“包含电池”标准库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:06:01.157

我认为问题更多是关于电子邮件结构的复杂性，而不是 Python 中 smpt 库的弱点。

[PHP 中的这个示例](https://stackoverflow.com/questions/8431327/send-email-with-attachment-using-php)似乎并不比您的 Python 示例简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:50:29.243

```
import smtplib
smtp = smtplib.SMTP()
smtp.connect()
smtp.sendmail("me@somewhere.com", ["you@elsewhere.com"],
    """Subject: This is a message sent with very little configuration.

    It will assume that the mailserver is on localhost on the default port
    (25) and also assume a message type of text/plain.

    Of course, if you want more complex message types and/or server
    configuration, it kind of stands to reason that you'd need to do
    more complex message assembly. Email (especially with embedded content)
    is actually a rather complex area with many possible options.
    """
smtp.quit() 
```

# visual-studio-2010 - 如何控制VS2010上的trace颜色？

> ID：14599807
> 
> 赞同：1
> 
> 时间：2013-01-30T08:43:43.123
> 
> 标签：visual-studio-2010, customization

我在 VS2010 上使用深色主题，但在跟踪代码时得到以下信息。在堆栈跟踪点之间移动会自动选择调用代码并以下列方式突出显示它。

截图在这里：[http](http://picpaste.com/vs2010_trace-zPXJFz8y.jpg) ://picpaste.com/vs2010_trace-zPXJFz8y.jpg 由于我是新用户，所以无法在此处发布图片...

我查看了所有字体和颜色设置，但找不到正确的设置来更改它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:33:44.760

我发现哪一个是我所追求的正确项目：

`Tools -> Options -> Environment -> Fonts and Colors -> Read-Only Region`

尽管我已经尝试更改其中很多，但我并没有将*只读区域*视为可能的嫌疑人。只有在 C. Lang 的建议之后，我才尝试了这些我标记为“不相关”的方法。

无论如何，谢谢，这个黑暗的主题再次可以用来阅读代码:)

# facebook - 将 Facebook 登录和身份验证添加到现有用户帐户系统

> ID：14599810
> 
> 赞同：0
> 
> 时间：2013-01-30T08:43:55.603
> 
> 标签：facebook, facebook-javascript-sdk

我目前有一个现有的网站登录系统，我想增加用户通过 Facebook 注册我的网站的能力。

这是我的用户模型的样子。

用户模型：

*   电子邮件
*   电话
*   密码
*   脸书用户名
*   oauth 令牌

您可以通过提供电子邮件、电话和密码的常规方式进行注册。

或者您可以在 Facebook 上注册，您只需通过 Facebook 进行身份验证并提供您的电话号码。

我为此使用[Facebook 注册插件](https://developers.facebook.com/docs/plugins/registration/) ，因为我需要电话号码字段。我已将redirect-uri 设置为[http://mysite.com/fb_process](http://mysite.com/fb_process)，它将解析signed_request 并使用数据在我的数据库中创建一个用户。这部分工作非常顺利。

我不知道如何处理让已验证我的网站的用户返回以使用 Facebook 重新登录。

我正在使用 Javascript SDK，然后使用 jquery 将 Facebook 用户 ID 发布到 mysite.com/fb_login，该用户在数据库中查找具有相应 Facebook 用户 ID 的用户并将该用户登录。它在技术上有效，但它只是没有看起来不合适或不安全。您可以使用 mysite.com/fb_login?id={facebook_user_id} 登录某人。见代码：

```
 window.fbAsyncInit = function() {
        FB.init({
            appId   : 'APPID',
            channelUrl : 'http://mysite.com/channel',
            status  : true, // check login status
            cookie  : true, // enable cookies to allow the server to access the session
            xfbml   : true // parse XFBML
    });

    function fbLogin() {
      FB.login(function(response) {
        if (response.authResponse) { 
          FB.api('/me', function(response) {
            console.log('Good to see you, ' + response.name + '.', response);
            $.post('fb_login', {id:response.id})
            .done(function() {
              window.location = 'http://mysite.com/user/dashboard'
            });
          });

        } 
        else {
          console.log('User cancelled login or did not fully authorize.');
        }
      });
    }

    $('#fb-login').click(fbLogin); 
```

这样做的正确方法是什么？

此外，对于用户注册，我宁愿不使用注册插件，而是更喜欢我在大多数其他地方看到的流程，您单击“使用 Facebook 注册”，弹出一个窗口进行身份验证，然后将您带到另一个屏幕以输入其余详细信息，例如电话号码。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:19:10.220

当用户第一次访问您的站点时，您会将用户的详细信息保存在数据库中。完成后，用户将被授权。

现在，您可以使用[FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)或 OAuth 检查用户是否已获得授权。如果是，则无需以 dB 为单位保存详细信息（因为授权用户的详细信息已以 dB 为单位保存），只需将他重定向到所需的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:41:25.250

我想出了如何将 id 安全地发送到我的登录处理程序。我发送签名请求而不是原始用户 ID。然后我使用 app secret 来解析包含 user_id 的签名请求。

```
 function fbLogin() {
      FB.login(function(response) {
        if (response.authResponse) { 
          FB.api('/me', function(response) {
            console.log('Good to see you, ' + response.name + '.', response);
          });
          var signedRequest = response.authResponse.signedRequest;
          window.location = '/fb_login?signed_request=' + signedRequest;
        } 
        else {
          console.log('User cancelled login or did not fully authorize.');
        }
      });
    } 
```

# python - 是否可以在 python cmd 库上创建会话？

> ID：14599811
> 
> 赞同：0
> 
> 时间：2013-01-30T08:43:59.180
> 
> 标签：python, session-variables, command-line-arguments

我需要创建一个会话来处理命令给出的对象和参数，当它被提交时，我会将此会话对象解析为 json 或插入数据库。有没有办法像这样工作？

假设：

```
cmd:~$ start -session
New session started with PID:12312313
cmd:~$ add -object stackoverflow
Session variable stackoverflow created
cmd:~$ add -param foo -t stackoverflow
New param foo added to stackoverflow object
cmd:~$ commit -s 123123123
Session 123123123 committed to the database. Congrats. 
```

这就是我梦想它应该如何处理的方式。有没有人协助完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:58:47.127

我认为有一些工作要做来实现你的梦想，但这似乎是可以实现的！

对于命令行界面，我在[pyCLI](http://packages.python.org/pyCLI/)模块上取得了很大的成功。

它对构建应用程序有很大帮助。然后，您将最终填充挂钩以将临时对象存储在变量中并提交到数据库。

对于处理数据库接口，有[许多选项](http://docs.python.org/2/library/persistence.html)。可以使用[DBM](http://docs.python.org/2/library/dbm.html)实现一个简单的工作解决方案。

# matlab - 使用 MATLAB 计算能量

> ID：14599816
> 
> 赞同：1
> 
> 时间：2013-01-30T08:44:16.810
> 
> 标签：matlab, image-processing, energy, glcm

能量，具体如下：

![在此处输入图像描述](../Images/097d3fc5c59e08f043b395b4e405ca83.png)

可以使用以下命令根据[MA​​TLAB](http://en.wikipedia.org/wiki/MATLAB)文档找到：

```
stats = graycoprops(glcm, properties) 
```

例如，我输入了这个：

```
>> a = [1 2; 3 4]

a =

     1     2
     3     4

>> stats = graycoprops(a, {'energy'})

stats =

    Energy: 0.3000 
```

如果我们要*手动*执行此操作，我们如何获得上图所示的**能量值？**

这是我没有弄清楚的部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:50:47.440

如果我没记错的话：

```
ans=sum(a(:).^2)/sum(a(:)).^2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-28T10:42:50.757

在能源网络中，有一个供应点 (i) 和一个接收点 (j)。如果我们遵循这个能量在这两点之间进行的规则，那么根据能量守恒定律，节点“i”的总能量消耗应该等于节点“j”提供的总能量。由于发送到能量系统中的接收点的概念，我将其称为能量流。然后，“i”是发送者，“j”是功率的接收者，我们可以写出入口能量流减去出口能量流（需求）的总和：

```
Total_Power = sum(Inlet_energy(:,:))-sum(Outlet_energy(:,:));
print (Total_Power); 
```

# python - 如何使用 sikuli 执行 python 脚本文件（filename.py）

> ID：14599820
> 
> 赞同：1
> 
> 时间：2013-01-30T08:44:23.517
> 
> 标签：python, sikuli

我有一个写在单独文件中的 python 代码（name.py），现在我想使用 sikuli 执行该代码。

我已经尝试过 openApp 但它可能无法正常工作我犯了一些错误但仍在寻找工作逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:57:45.170

尝试这个：

```
run(python name.py) 
```

我使用类似的方法来运行我的 ruby​​ 脚本。我的问题是它会等待你的脚本完成，但在 90% 的情况下它不应该成为问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:27:27.513

openApp 用于运行应用程序，例如：openApp("calc.exe")。请阅读有关导入[python 模块](http://docs.python.org/2/tutorial/modules.html)的信息。从技术上讲，这与Sikuli无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T17:14:47.947

您想将该文件作为可执行脚本运行还是使用其内容？

作为一个可执行脚本，请确保该文件是一个有效的脚本，并且在调用时会执行某些内容，然后使用`suprocess.Popen()`另一个 .py 文件来执行该文件。

要使用模块的内容，请确保该文件位于 PYTHONPATH 上并使用`import name`，名称中的所有内容现在都可以使用。

# ruby - How to define Fabricator for namespace class

> ID：14599830
> 
> 赞同：8
> 
> 时间：2013-01-30T08:44:56.257
> 
> 标签：ruby, mongoid, fabrication-gem

I want to define Fabricator for class has namespace like 'Foo::Bar'.
Tell me the way it can work.

Here my codes.

models/foo.rb

```
class Foo
  include Mongoid::Document
  embedded_in :foo_container, polymorphic: true

  field :xxx ....
end 
```

models/foo/bar.rb

```
class Foo::Bar < Foo
  field :yyy ....
  field :zzz ....
end 
```

data/fabricators/foo_bar_fabricator.rb

```
Fabricator(:foo_bar, class_name: 'Foo::Bar') do
   yyy 'MyString'
   zzz 'MyString'
end 
```

When I tried to create Fabricatior object on parino console but error occurred.

```
> Fabricate(:foo_bar)
> NoMethodError: undefined method `new?' for nil:NilClass
  .... stack messages 
```

When I tried to create other Fabricator object wasn't namespace class like 'User', it went right.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-04T19:36:00.280

根据 Fabrication 关于[创建对象](http://www.fabricationgem.org/#!defining-fabricators)的文档：

> 要使用与类不同的名称，您必须指定`from: :symbolized_class_name`为第二个参数。

所以以下应该工作：

```
Fabricator(:foo_bar, from: 'Foo::Bar') do
  yyy 'MyString'
  zzz 'MyString'
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T10:13:28.143

这对我有用

```
Fabricator(:foo_bar, class_name: :'Foo::Bar') do
    xxx {Faker::Company.name}
    yyy 'Mystring'
end 
```

# eclipse - JSP eclipse中的sysout

> ID：14599836
> 
> 赞同：1
> 
> 时间：2013-01-30T08:45:10.447
> 
> 标签：eclipse, jsp, editor, content-assist

**Eclipse 特定：内容辅助**

**问题陈述：**

如果我在 JSP 中键入 sysout 并按 ctrl+空格键，那么它应该扩展为 System.out.println

**描述**

我在 Java 中使用 sysout 已经有一段时间了。但是每当我尝试在 JSP 中使用 sysout 时，我都会收到错误，因为该位置不提供内容辅助

我还尝试为 sysout 插入 JSP 编辑器的模板（从 Java 编辑器的模板复制），但我仍然遇到同样的错误。

任何人都可以提出解决方案或任何我可以得到帮助的参考资料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:48:12.170

如果你喜欢捷径：

```
syso is a shortcut for sysout 
```

嘿，你可以定义一个带有值的jsp模板

（窗口->首选项->web->jspfiles->编辑器->模板）

```
<%System.out.println("${cursor}");%> 
```

`Ctrl`所以你可以使用++切换到JSP- `Spacebar`Templates`Spacebar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:23:00.040

JSP 编辑器中不提供 Java 模板。目前正在按设计工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T06:39:30.047

有趣的是，我还发现了另一种方法如果您打开 Snippets 视图（Windows-->Views-->other-->Snippets）并且如果我复制该语句

```
System.out.println(); 
```

并右键单击片段视图并选择粘贴为片段并创建片段它也可以工作，唯一的区别是如果我想包含 sysout 我需要双击片段。

# javascript - Given an evenly spaced array of integers, find between which 2 values an integer falls

> ID：14599838
> 
> 赞同：1
> 
> 时间：2013-01-30T08:45:25.353
> 
> 标签：javascript

Hi I'm having a bit of trouble writing some logic with javascript Given an array (arr1) and test value (test)

```
arr1 = [5, 12, 19, 27]
test =15 
```

Return a value of 3 for test=15, where test<5 = 1, 5< test >12=2, etc. Test can be any integer between 1 and 31 inclusive.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:50:22.667

你可以做一个简单的 for 循环，如果数字小于第 i 个单元格上的数字，你将 retyrn i。

如果从 i=0 开始，则只能执行 3 个 if-else 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:51:04.240

尝试这个：

```
var arr1 = [5, 12, 19, 27];
var test = 15;
var i;
for(i = 0; i < arr1.length && test > arr1[i]; i++);
console.log(i+1); 
```

日志`3`。

您的标题说“均匀间隔”，但是如果应该是这种情况（`27`应该是`26`），您的数组有一个小错误。

但是，如果数组*是*均匀分布的，您可以在没有循环的情况下执行此操作：

```
// Assuming the array = [5, 12, 19, 26];
var test = 15;
console.log(Math.ceil((test - 5)/7)+1); 
```

所以，基本上：

```
Math.ceil((test - startingNumber) / spacing)+1 
```

# excel - How to find if a cell is merged and read the value?

> ID：14599841
> 
> 赞同：7
> 
> 时间：2013-01-30T08:45:31.317
> 
> 标签：excel, vba

How do I detect if a cell is merged?

If the cell is merged how do I read the value?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T09:38:49.103

我认为没有任何公式可以告诉您单元格是否已合并。您可以编写自己的公共[vba](/questions/tagged/vba "显示标记为“vba”的问题")函数，将其放入代码模块中，然后在工作表上使用它：

```
Function IsMerged(rCell As Range) As Boolean
' Returns true if referenced cell is Merged        
          IsMerged = rCell.MergeCells        
End Function 
```

然后作为一个 Excel 公式来测试单元格`A1`：

```
=IsMerged(A1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-10T13:48:44.500

这是在 VBA 中读取单元格值的方法，无论它是否被合并。

`C.MergeArea.Cells(1, 1).Value`

`C`您要查看的单元格在哪里。其工作方式是，如果单元格未合并，则 MergeArea 要么与单元格本身完全相同；要么 否则 MergeArea 是已合并的单元格范围。合并单元格时，该值保留在最左上角的单元格中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-10T09:58:16.543

欢呼！想出一种方法来检查一个单元格是否被合并并返回该单元格的值：

```
Sub checkCellMerged1()
'With ThisWorkbook.ActiveSheet
Set ma = ActiveCell.MergeArea

On Error GoTo errHand
If ma = ActiveCell Then MsgBox ActiveCell.Address & " is not merged"
GoTo final

errHand:
If Err.Number = 13 Then MsgBox "Merged Address = " & ma.Address _
& vbCrLf & "Value = " & ma(1).Value

final:
On Error GoTo 0
'End With
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-06T15:03:16.383

如果总是填充 B 和 C，则有一个简单的非 VBA 方法来确定单元格是否被合并。只需执行 COUNTA(B2,C2) 并检查总数。如果 B2 与 C2 合并，则总数为 1，否则计数为 2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-04T15:09:43.113

一个常见的需求是仅针对合并范围中的第一个单元格。这段代码就是这样做的。

If 语句结果仅对第一个单元格为真；合并与否。

```
Sub RunOnlyForFirstCell()
    Dim c As Range
    Dim MergedCellsArea As Range

    For Each c In Selection.Cells
        Set MergedCellsArea = c.MergeArea
        If c.Address = MergedCellsArea(1, 1).Address Then
            '''run your sub
            Debug.Print c.Address; Selection.Cells.Count; MergedCellsArea(1, 1).Address
        End If
    Next c
 End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-17T16:06:00.777

以下代码回答了这两个问题

```
Function GetValue(iRow As Integer, iCol As Integer) As String
    Dim rCell As Range
    Set rCell = oSheet.Cells(iRow, iCol)

    sText = ""

    If Not rCell.MergeCells Then
        sText = rCell.Value
    End If

    GetValue = sText
End Function
...
Set oSheet = Worksheets("Sheet1") 
```

我写了一个小数独表，我使用一个宏来测试一个单元格是否被合并。

[![在此处输入图像描述](../Images/42be185b9555f9749201bd23cb504fd5.png)](https://i.stack.imgur.com/qsnfL.png)

如果一个单元格已经合并，它包含一个找到的数字，我不使用它。

# android - 如何在 Google Maps Android API v2 中显示具有不同图标的多个标记？

> ID：14599842
> 
> 赞同：3
> 
> 时间：2013-01-30T08:45:31.687
> 
> 标签：android, google-maps, google-maps-markers, google-maps-android-api-2, google-maps-mobile

我正在解析一个 XML 文件，其中包含我的 Android 应用程序的数据，该数据将使用 Google Maps Android API v2 显示在地图上。XML 文件的示例格式为：

```
<markers>
  <marker name="San Pedro Cathedral"
          address="Davao City"
          lat="7.0647222"
          long="125.6091667"
          icon="church"/>
  <marker name="SM Lanang Premier"
          address="Davao City"
          lat="7.0983333"
          long="125.6308333"
          icon="shopping"/>
  <marker name="Davao Central High School"
          address="Davao City"
          lat="7.0769444"
          long="125.6136111"
          icon="school"/>
</markers> 
```

现在，我想根据marker元素中icon的属性值，在地图上用不同的图标显示每个标记。我当前通过循环添加标记的代码是：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse("http://dds.orgfree.com/DDS/landmarks_genxml.php");

NodeList markers = doc.getElementsByTagName("marker");

for (int i = 0; i < markers.getLength(); i++) {
    Element item = (Element) markers.item(i);
    String name = item.getAttribute("name");
    String address = item.getAttribute("address");
    String stringLat = item.getAttribute("lat");
    String stringLong = item.getAttribute("long");
    String icon = item.getAttribute("icon"); //assigned variable for the XML icon attribute
    Double lat = Double.valueOf(stringLat);
    Double lon = Double.valueOf(stringLong);
    map = ((MapFragment) getFragmentManager().findFragmentById(
            R.id.map)).getMap();

    map.addMarker(new MarkerOptions()
            .position(new LatLng(lat, lon))
            .title(name)
            .snippet(address)
            //I have a coding problem here...
            .icon(BitmapDescriptorFactory
                    .fromResource(R.drawable.icon)));

    // Move the camera instantly to City Hall with a zoom of 15.
    map.moveCamera(CameraUpdateFactory.newLatLngZoom(CITYHALL, 15)); 
```

我的可绘制文件夹中有教堂、购物、学校等的所有不同图标。但我的线路有问题：

```
.icon(BitmapDescriptorFactory.fromResource(R.drawable.icon) 
```

因为`R.drawable`仅与可绘制文件夹中的文件有关。如何根据 XML 上的图标属性动态地为每个标记显示不同的图标？

任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:58:22.667

获取资源：

```
getResources().getIdentifier(icon,"drawable", getPackageName()) 
```

上面使用的是为 XML属性`icon`分配的变量`icon`

使用它来`icon`动态获取：

```
.icon(BitmapDescriptorFactory
   .fromResource(getResources().getIdentifier(icon,"drawable", getPackageName())) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T09:19:03.067

尝试如下：

```
// Creates a marker rainbow demonstrating how to 
// create default marker icons of different.
int numMarkersInRainbow[] = 
{
    R.drawable.arrow,
    R.drawable.badge_nsw,
    R.drawable.badge_qld,
    R.drawable.badge_victoria
};
for (int i = 0; i < markers.getLength(); i++) {
    mMap.addMarker(new MarkerOptions()
        .position(position(new LatLng(lat, lon)))
        .title(name)
        .icon(BitmapDescriptorFactory.fromResource(numMarkersInRainbow[i])));
} 
```

# c# - GetType() 是方法还是类？

> ID：14599843
> 
> 赞同：6
> 
> 时间：2013-01-30T08:45:36.867
> 
> 标签：c#, .net, reflection

我遇到了这段代码：

```
int myInt = 0;
textBox1.Text = myInt.GetType().Name; 
```

根据[.NET 文档](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.OBJECT.GETTYPE%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-CSHARP%29&rd=true)，GetType() 是一种方法，而不是类。

我的问题是，我怎样才能用这样的方法使用点`GetType().Name`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T08:48:01.813

一个方法可以返回一个类实例，这里它是一个类的实例`Type`。在此对象上，您可以访问属性、其他方法等。

你的代码可以这样写：

```
int myInt = 0;
Type t = myInt.GetType();
textBox1.Text = t.Name; 
```

也许这样更容易理解。

编辑：方法调用就像`GetType()`执行该方法，并且您在该方法之后所做的一切都`.`适用于该方法的返回值，在这种情况下是一个类型的对象`Type`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T08:47:18.040

`GetType()`是一个方法，它*返回*一个类的实例（在这种情况下，一个[`Type`类](http://msdn.microsoft.com/en-us/library/system.type.aspx)的实例.

`Type`通过点语法访问该返回实例的成员。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T08:47:39.847

因为`GetType()`返回一个对象的实例，所以您可以使用点来访问它返回的对象的属性或方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T08:53:51.677

该术语通常称为链接（当然在 C# 和 JavaScript 中）或流式接口。

因此，正如其他两个答案所建议的那样，您将返回一个实例并执行属于该类的方法。

引用维基百科：

> 在软件工程中，流畅的接口（最初由 Eric Evans 和 Martin Fowler 创造）是面向对象 API 的实现，旨在提供更易读的代码。
> 
> 流畅的接口通常是通过使用方法链接来传递指令>后续调用的上下文来实现的（但流畅的接口不仅仅需要方法链接）。通常，上下文是通过被调用方法自引用的返回值定义的，其中新的上下文等效于通过返回 void 上下文而终止的最后一个上下文。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T08:54:34.063

从[*`MSDN`*](http://msdn.microsoft.com/en-us/library/dfwy45w9%28v=vs.110%29.aspx);

```
Return Value
Type: System.Type
The exact runtime type of the current instance. 
```

所以基本上，它返回一个*类实例*。这就是为什么您也可以访问其属性的原因。让我们看看这个例子；

```
int i = 0;
Console.WriteLine(i.GetType()); // Gets the System.Type of the current instance.
Console.WriteLine(i.GetType().Name); // Gets the name of the current member. 
```

输出将是

```
System.Int32
Int32 
```

这是一个[`DEMO`](http://ideone.com/yNG0rn).

在这种情况下，`Name`财产就是[`MemberInfo.Name`](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.name%28v=vs.71%29.aspx)财产。它包括[`System.Reflection`](http://msdn.microsoft.com/en-us/library/system.reflection.aspx)命名空间。

> 获取此成员的名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T08:51:37.263

[`Object.GetType()`](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)返回`current instance`.

* * *

例子 ：

```
using System;

public class MyBaseClass {
}

public class MyDerivedClass: MyBaseClass {
}

public class Test 
{
   public static void Main() 
   {
      MyBaseClass myBase = new MyBaseClass();
      MyDerivedClass myDerived = new MyDerivedClass();
      object o = myDerived;
      MyBaseClass b = myDerived;

      Console.WriteLine("mybase: Type is {0}", myBase.GetType());
      Console.WriteLine("myDerived: Type is {0}", myDerived.GetType());
      Console.WriteLine("object o = myDerived: Type is {0}", o.GetType());
      Console.WriteLine("MyBaseClass b = myDerived: Type is {0}", b.GetType());
   }
}
// The example displays the following output: 
//    mybase: Type is MyBaseClass 
//    myDerived: Type is MyDerivedClass 
//    object o = myDerived: Type is MyDerivedClass 
//    MyBaseClass b = myDerived: Type is MyDerivedClass 
```

* * *

参考：[MSDN](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-30T08:52:33.887

因为 GetType() 返回一个对象，所以 C# 语言允许您调用正在返回的对象的任何成员，因此您的代码是一个非常有效的示例。

编辑：检查 Jobo 的答案，以更好地了解如何以更易于理解的形式编写代码

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-30T09:25:25.543

GetType() 获取表示指定类型的 Type 对象。类型代表类类型、接口类型、数组类型、值类型、枚举类型、类型参数、泛型类型定义。在类型上，您可以访问方法或属性。

# php - PHP - Broken variable content

> ID：14599856
> 
> 赞同：3
> 
> 时间：2013-01-30T08:46:28.307
> 
> 标签：php

as the subject, I have a problem with the content of a variable. Within into this variable is inserted a `base64` of a file (extracted from an xml) and PHP the base64 to save the file in the filesystem. Everything is fine as long as there are small files (about 10MB) ... however the `base64` with a file bigger the `base64` seems to be "broken" after 9999993 characters. I say seems because if I go to the debug display the value of the variable I see all of the `base64` string.

The problem is not in saving the file, because the file is created and saved correctly, but the content of the variable. Are there any limits to be set on php.ini? Or are there ways to remedy the problem? I also tried to split the string in chunks or in an array, but the problem remains.

I put the code I use to extract data from XML:

```
 $reader = new XMLReader(); 

    if (!$reader->open($GLOBALS['conf']['filepath'] . '/' . $xmlfile)) { 
        print "Error to open XML: $xmlfile\n"; 
    } else { 
        while ($reader->read()) { 
            $name = $reader->name; 
            $type = $reader->nodeType; 
            if (($type == XMLReader::ELEMENT) && in_array($name, $allowedNodes)) { 
                $xml = $reader->readOuterXml(); 

                $doc = new DOMDocument('1.0', 'UTF-8'); 
                $xml = simplexml_import_dom($doc->importNode($reader->expand(), true)); 

                //Other code
            } 
        } 
    } 
```

Note: the variable `$allowedNodes` is a variable saved in a configuration file, so you do not see its value.

Thanks for the answers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:24:45.920

您是否尝试过用 gzcompress 替换 base64？

前段时间我也遇到过类似的问题，我用过，效果很好。我做了一个小的基准测试，内存不是一个大问题。

# c# - 将数据库连接设置传递给功能

> ID：14599857
> 
> 赞同：0
> 
> 时间：2013-01-30T08:46:29.097
> 
> 标签：c#, database, connection

c# 中是否有代表数据库连接设置的类或接口？我想将连接设置传递给如下函数：

```
public DoWorkOnDb(IDbConnectionSettings settings)
{
   SqlConnection connection = new SqlConnection(settings.ConnectionString);
   ...
} 
```

我不想做的是：

*   传递一个连接，因为该函数应该自己处理连接
*   传递一个连接字符串，因为这样你就可以传递所有类型的字符串
*   传递多个字符串，如服务器、数据库、用户、密码，因为那时我必须在函数中构建连接字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:48:16.163

据我了解，您需要[SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)。然后你需要调用[ToString()](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnectionstringbuilder.tostring.aspx)或[TryGetValue()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.trygetvalue.aspx)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:50:43.227

[SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)

```
SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder();
builder["Data Source"] = "(local)";
builder["integrated Security"] = true;
builder["Initial Catalog"] = "AdventureWorks";
Console.WriteLine(builder.ConnectionString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:51:14.707

也许您正在寻找[`ConnectionStringSettingsCollection`](http://msdn.microsoft.com/en-us/library/system.configuration.connectionstringsettingscollection%28v=vs.110%29.aspx)包含[`ConnectionStringSettings`](http://msdn.microsoft.com/en-us/library/system.configuration.connectionstringsettings%28v=vs.110%29.aspx)具有[`ConnectionString`](http://msdn.microsoft.com/en-us/library/system.configuration.connectionstringsettings.connectionstring.aspx)or[`ProviderName`](http://msdn.microsoft.com/en-us/library/system.configuration.connectionstringsettings.providername.aspx)属性的 -class。

也许您想将它与[`DbConnectionStringBuilder`](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnectionstringbuilder.aspx).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T08:54:48.597

就个人而言，我会通过一个函数：

```
public DoWorkOnDb(Func<SqlConnection> connectionFactory)
{
    using (var connection = connectionFactory())
    {
        // ...
    }
} 
```

# grails - Grails OpenId Plugin Error

> ID：14599859
> 
> 赞同：2
> 
> 时间：2013-01-30T08:46:32.190
> 
> 标签：grails, spring-security, buildconfig

I am trying to do the tutorial of the Grails openId plugin. I created a test app and followed exactly the steps from the tutorial of Burt Beckwith [http://grails-plugins.github.com/grails-spring-security-openid/docs/manual/guide/3.%20Tutorials.html](http://grails-plugins.github.com/grails-spring-security-openid/docs/manual/guide/3.%20Tutorials.html)

But when I am already on the steps of doing this: $ grails s2-quickstart com.openidtest User Role

it displays an error:

Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information):

*   com.google.code.guice:guice:2.0

Can someone please tell me why? I already added this to the BuildConfig.groovy: mavenRepo "[http://guice-maven.googlecode.com/svn/trunk/](http://guice-maven.googlecode.com/svn/trunk/)" but it still doesnt work.

Please help, thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:22:27.890

Guice 2 在 Maven Central 中，但在不同的组 ID 下。您可以通过在 BuildConfig 中声明插件而不是使用来使其工作，`install-plugin`这样您就可以排除传递依赖

```
plugins {
  compile(':spring-security-openid:1.0.4') {
    excludes 'guice'
  }
} 
```

然后在依赖项部分显式引入正确的依赖项

```
dependencies {
  compile('com.google.inject:guice:2.0') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T17:58:19.927

将以下行添加到 buildConfig.groovy 文件的“存储库”部分为我修复了它。

mavenRepo " [https://repository.jboss.org/nexus/content/repositories/thirdparty-uploads/](https://repository.jboss.org/nexus/content/repositories/thirdparty-uploads/) "

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:00:37.493

你看到[http://jira.grails.org/browse/GPSPRINGSECURITYOPENID-23](http://jira.grails.org/browse/GPSPRINGSECURITYOPENID-23) - 我正在修复。

# sql - java.sql.SQLSyntaxErrorException: ORA-00907: 缺少右括号

> ID：14599861
> 
> 赞同：2
> 
> 时间：2013-01-30T08:46:41.533
> 
> 标签：sql, oracle, servlets

我需要为我的相册创建一个表格。当我执行我的代码时，它显示错误 java.sql.SQLSyntaxErrorException: ORA-00907: missing right parenthesis 我不明白这是什么意思。我尝试使用 sql 进行相同的查询，并且显示相同的错误。但是在 sql 开发人员表中创建成功。

```
Statement st21=con.createStatement();
StringBuilder sb21=new StringBuilder(1024);
sb21.append("create table ").append(uname).append("album(ALBUMID NUMBER NOT NULL AUTO_INCREMENT, ALBUMNAME VARCHAR2(225) NOT NULL, CONSTRAINT USERALBUM_PK PRIMARY KEY(ALBUMID)ENABLE);CREATE INDEX USERALBUM_INDEX ON USERALBUM (ALBUMNAME);");
String Query21=sb21.toString();
st21.executeUpdate(Query21);

Statement st2=con.createStatement();
StringBuilder sb2=new StringBuilder(1024);
sb2.append("create table ").append(uname).append("image(IMAGEID NUMBER NOT NULL AUTO_INCREMENT, IMAGENAME VARCHAR2(225) NOT NULL, IMAGEFULL BLOB NOT NULL, IMAGEDISC VARCHAR2(225), ALBUMID NUMBER NOT NULL, CONSTRAINT USERIMAGE_PK PRIMARY KEY(IMAGEID)ENABLE);ALTER TABLE USERIMAGE ADD CONSTRAINT USERIMAGE_USERALBUM_FK1 FOREIGN KEY(ALBUMID)REFERENCES USERALBUM(ALBUMID)ENABLE;CREATE INDEX USERIMAGE_INDEX ON USERIMAGE (IMAGENAME);");
String Query2=sb2.toString();
st2.executeUpdate(Query2); 
```

请告诉我这些陈述中的错误是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:52:44.590

Oracle 不支持关键字`AUTO_INCREMENT`。

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/d4156)

以下是有关如何模拟`AUTO_INCREMENT`ing 场的指南

*   [Oracle 的自动增量主键](http://www.databaseanswers.org/sql_scripts/ora_sequence.htm)
*   [使用触发器自动增加字段](http://www.datanamic.com/support/autoinc-oracle.html)

# mongodb - MongoDB REST 接口

> ID：14599863
> 
> 赞同：0
> 
> 时间：2013-01-30T08:46:54.583
> 
> 标签：mongodb, rest, database, nosql

我有带有 HTTP REST 接口的 MongoDB 数据库。我想从 db 中提取其中一项。例如，当我运行此 url 时：`http://localhost:80/dbname/collection/4fed0591d17011868cf9c982`我收到此数据：

```
{
   "offset":0,
   "rows":[
      {
         "_id":{
            "$oid":"5106e87b44ae0333fce5af69"
         },
         "nazwa_wydarzenia":"Opener",
         "data_rozpoczecia":{
            "$date":1356994800000
         },
         "data_zakonczenia":{
            "$date":1359759600000
         },
         "opis_wydarzenia":"Impreza muzyczna",
         "koordynaty":[
            {
               "szerokosc":23.4533,
               "wysokosc":52.1234234
            },
            {
               "szerokosc":26.4533,
               "wysokosc":55.1234234
            },
            {
               "szerokosc":28.4533,
               "wysokosc":57.1234234
            },
            {
               "szerokosc":30.4533,
               "wysokosc":58.1234234
            },
            {
               "szerokosc":31.4533,
               "wysokosc":59.1234234
            }
         ],
         "telefony_abonentow":[
            {
               "id_telefonu":"5106e87a44ae0333fce5af64",
               "numer_telefonu":"48520078426",
               "data_modyfikacji":{
                  "$date":1346450400000
               },
               "data_wejscia":{
                  "$date":59960905200000
               },
               "data_wyjscia":{
                  "$date":59960905200000
               },
               "czywObszarze":false,
               "czyWyslanoSMS":false
            },
            {
               "id_telefonu":"5106e87a44ae0333fce5af65",
               "numer_telefonu":"48658355395",
               "data_modyfikacji":{
                  "$date":1346450400000
               },
               "data_wejscia":{
                  "$date":59960905200000
               },
               "data_wyjscia":{
                  "$date":59960905200000
               },
               "czywObszarze":false,
               "czyWyslanoSMS":false
            },
            {
               "id_telefonu":"5106e87a44ae0333fce5af66",
               "numer_telefonu":"48248421652",
               "data_modyfikacji":{
                  "$date":1346450400000
               },
               "data_wejscia":{
                  "$date":59960905200000
               },
               "data_wyjscia":{
                  "$date":59960905200000
               },
               "czywObszarze":false,
               "czyWyslanoSMS":false
            },
            {
               "id_telefonu":"5106e87a44ae0333fce5af67",
               "numer_telefonu":"48951188325",
               "data_modyfikacji":{
                  "$date":1346450400000
               },
               "data_wejscia":{
                  "$date":59960905200000
               },
               "data_wyjscia":{
                  "$date":59960905200000
               },
               "czywObszarze":false,
               "czyWyslanoSMS":false
            },
            {
               "id_telefonu":"5106e87a44ae0333fce5af68",
               "numer_telefonu":"48299181345",
               "data_modyfikacji":{
                  "$date":1346450400000
               },
               "data_wejscia":{
                  "$date":59960905200000
               },
               "data_wyjscia":{
                  "$date":59960905200000
               },
               "czywObszarze":false,
               "czyWyslanoSMS":false
            }
         ],
         "statystyki":{
            "ilosc_uczestnikow":3,
            "ilosc_wyslanych_smsow":2,
            "data_statystyki":{
               "$date":1359407227788
            }
         }
      }
   ],
   "total_rows":1,
   "query":{

   },
   "millis":0
} 
```

所以，我仍然想知道如何只提取值

> “statystyki”

这将是

> “ilosc_uczestnikow”：3

和

> “ilosc_wyslanych_smsow”：2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:22:46.130

从您提供的格式中很难看到您的数据结构，但在 JQuery 中：

```
$.get('http://localhost:80/dbname/collection/4fed0591d17011868cf9c982', function(data){
    var statystyki = data.rows[0].statystyki;
}, 'json'); 
```

会给你：

```
{ 
    "ilosc_uczestnikow" : 3, "ilosc_wyslanych_smsow" : 2, "data_statystyki" : { "$date" : 1359407227788 } 
} 
```

在一个变量中，您可以使用它再次选择，例如：

```
statystyki.ilosc_uczestnikow 
```

这给出了 的结果`3`。

那应该行得通。

# ruby-on-rails - 获取请求不返回值

> ID：14599872
> 
> 赞同：0
> 
> 时间：2013-01-30T08:47:32.677
> 
> 标签：ruby-on-rails, json, rest, protocols

我正在尝试使用这篇文章：[https ://github.com/Licensario/licensario-rest-protocol/blob/master/rest-api.md#feature-usage](https://github.com/Licensario/licensario-rest-protocol/blob/master/rest-api.md#feature-usage)

所以我写道：

```
## get request
feature_allocation_req = Net::HTTP::Get.new("/api/v1/users/external/#{user_id}/features/VIEW_TASKSed8e919e60/alloc?paymentPlanId=SUBSCRIPTI33dbf5e82a");

## add the headers
feature_allocation_req.add_field('ISV_API_KEY', 'bcffa3335a9068ab37ad51a68b4b47ea72f32a49c8f0b4f299a629edad04cdc3'); 
feature_allocation_req.add_field('ISV_API_SECRET', '14c990f3d4ee6354ee86fffdb057b3584f885c0d79cd3b354123e1b9acdc2227');

## start the get request
feature_allocation_result = nil
Net::HTTP.start("localhost", 3000) {|http|
    feature_allocation_result = http.request(feature_allocation_req)
}

## print the number of the response (I got 200 - OK)
puts feature_allocation_result.code

## deserialize JSON objects
feature_allocation_parameters = Yajl::Parser.parse(feature_allocation_result.body);
total_parameter = feature_allocation_parameters["total"];
used_parameter = feature_allocation_parameters["used"];
available_parameter = feature_allocation_parameters["available"];

## print them
puts "***********************"
puts total_parameter, used_parameter, available_parameter 
```

但它什么也没打印。我写错了什么吗？（我认为如果我有问题，问题是在“反序列化JSON对象”的步骤中发现的，但我尝试了：`JSON.parse`它也不起作用）..

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:07:44.530

我会尝试的第一件事是打印`feature_allocation_result.body`. 这将允许我确定对方是否发送了正确的 JSON 并且错误是我的。有时我得到一个 HTML 错误页面而不是 JSON，因为我的请求是错误的。印刷`body`有助于澄清这一点。

现在您已经完成了，我们看到该服务向您发送了有效的 JSON，但所有值都是 nil。

```
{"total":null,"used":null,"available":null} 
```

我们的解析是好的（但如果它更复杂的话，它也可能不是）。无论如何，现在我们必须找出为什么服务没有向我们发送我们期望的数据。

# c++ - Octave C++ API (feval)-如何将多个参数传递给 feval？

> ID：14599873
> 
> 赞同：1
> 
> 时间：2013-01-30T08:47:33.460
> 
> 标签：c++, visual-studio-2010, octave

**环境**：Windows 7 Professional + octave 3.6.2 + Visual C++

根据教程，我试图将 octave 嵌入到独立的 C++ 程序中：

[http://www.gnu.org/software/octave/doc/interpreter/Standalone-Programs.html#Standalone-Programs](http://www.gnu.org/software/octave/doc/interpreter/Standalone-Programs.html#Standalone-Programs)

我设法运行第一个程序没有问题，但第二个给出错误消息。

**第二个程序的简化版**：

```
int main (void)
{
    string_vector argv (2);
    argv(0) = "embedded";
    argv(1) = "-q";
    octave_main (2, argv.c_str_vec(), 1);

    Matrix a_matrix = Matrix (1, 2);
    std::cout << "GCD of [12, 16] is ";

    a_matrix(0)=12;
    a_matrix(1)=16;

    octave_value_list in = octave_value (a_matrix);
    octave_value_list out = feval ("gcd", in, 1);

    std::cout<<out(0).matrix_value()<<std::endl;
    return 0;

} 
```

带有“feval”的行未能执行。原因是在 octave **3.6.2**中，函数**gcd 不再接受值列表作为参数**，必须调用**gcd(value1, value2, ...)**而不是 gcd([value1, value2, ...]) ，它在 octave 3.2.4 中得到支持，所以这里提出了我的主要问题：

**如何将多个参数作为单独的值传递给 feval，以便我可以通过 octave 的 C++ API 调用 gcd(value1, value2, ...) 之类的函数？**

最终，我需要在 GUI 应用程序中进行一些图形处理，所以我可能需要在 C++ 端调用 conv2 之类的函数（遗憾的是，这也需要多个函数参数）

预先感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T19:49:50.777

好吧，我刚刚做了下面的替换：

```
//octave_value_list in = octave_value (a_matrix);
octave_value_list in;
for (octave_idx_type i = 0; i < n; i++)
   in(i) = a_matrix (i); 
```

它工作......但我得到一个jre错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T03:19:35.057

事实证明，直接将**octave_value_list**作为输入传递，而不是使用 octave_value 将Matrix**转换为 octave_value_list** **，**效果**很好**。（也许**octave_value**是罪魁祸首？）

 ****所以**octave 3.6.2**下的工作代码是这样的：

```
int main (void)
{
    string_vector argv (2);
    argv(0) = "embedded";
    argv(1) = "-q";
    octave_main (2, argv.c_str_vec(), 1);

    std::cout << "GCD of [12, 16] is ";

    // Use octave_value_list directly as input
    octave_value_list in(2);    
    in(0)=12;
    in(1)=16;

    octave_value_list out = feval ("gcd", in, 1);

    std::cout<<out(0).int_value()<<std::endl;
    return 0;

} 
```****

# apple-push-notifications - Apple Push Notification Service 的奇怪行为

> ID：14599884
> 
> 赞同：1
> 
> 时间：2013-01-30T08:47:49.957
> 
> 标签：apple-push-notifications, apns-php

我现在正在使用[apns-php](http://code.google.com/p/apns-php/)开发 Apple Push Notification Service 和 iPhone 应用程序。

正如每个使用 APNS 的人都知道，使用它时有一个限制——我们不能在每条消息中发送超过 256 个字节的有效负载。但是，我发现一个网站说还有另一个限制，即禁止在连接中发送网络使用量超过 5000 到 7000 字节的有效负载。

我一直在寻找这种现象的证据或官方文件，但一无所获。

您能否让我知道是否存在这样一个未记录的 APN 限制才能成功发送有效负载？您在使用 APN 的过程中是否遇到过其他奇怪的经历？

网站就[在这里](http://liginc.co.jp/programmer/archives/2355)（对不起，是日语。）

它说：

*   不要发送超过 256 字节的消息。
*   如果您尝试发送 5000 到 7000 字节的消息并且 APNS 破坏了您的会话，您将被禁止使用 APNS。然后你需要在睡觉时重新创建一个 APN 会话。

任何意见或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:09:48.470

我从未听说过 5000-7000 字节的限制。相反，Apple 鼓励您批量发送多条消息以提高效率。

来自 APN 开发指南：

> 二进制接口对本质上是流式传输的二进制内容使用纯 TCP 套接字。为获得最佳性能，您应该通过接口在一次传输中批量处理多个通知，无论是显式地还是使用 TCP/IP Nagle 算法。

如果你仍然需要官方证明没有这样的限制，那就是这个（取自[这里](http://developer.apple.com/library/ios/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG44)）：

> **推送通知吞吐量和错误检查**
> 
> 使用 APN 没有上限或批量大小限制。iOS 6.1 新闻稿称，APNs 自成立以来已发送超过 4 万亿条推送通知。在 WWDC 2012 上宣布，APN 每天发送 70 亿条通知。
> 
> 如果您看到吞吐量低于每秒 9,000 条通知，则您的服务器可能会受益于改进的错误处理逻辑。

# asp.net-mvc - Nuget预发布版，使用安全吗？

> ID：14599885
> 
> 赞同：1
> 
> 时间：2013-01-30T08:47:57.637
> 
> 标签：asp.net-mvc, nuget

在 PRODUCTION 上安装和使用 Nuget 的预发布包是否安全？

我对[http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.1.0-alpha1](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.1.0-alpha1)感兴趣，这是预发布版本。这个包允许在捆绑这些文件时优化 css/js 文件。

我应该等待稳定版本还是可以安全地使用这个版本？

使用预发布版本有什么缺点（如果有的话）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:50:33.403

这取决于你想用它做什么——对于生产代码，我不认为我会这样做，我会搜索另一个可以做同样事情的包，直到它超出 beta - err - alpha 和 beta。对于不太重要的事情，为什么不呢。

# javascript - Chrome toLocaleTimeString()

> ID：14599893
> 
> 赞同：1
> 
> 时间：2013-01-30T08:48:16.467
> 
> 标签：javascript, html

我正在一个网站上工作，该网站应该显示我使用的浏览器的本地时间。

我将语言环境时间保存在 konckout observable 中

```
self.startTimeText(time.toLocaleTimeString("HH:MM:ss")); 
```

在 Opera、Safari 或 Firefox 中使用它不会导致任何问题，只是在 Chorme 中它不起作用。什么都没有显示，程序似乎停止工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:16:53.503

time.toUTCString() 可能更适用于 chrome。我还没有测试过。但你可以试一试。

# jquery - $(selector).load 问题仅在 Opera 浏览器中随机工作

> ID：14599895
> 
> 赞同：1
> 
> 时间：2013-01-30T08:48:24.153
> 
> 标签：jquery, dom, opera, document-ready

我想在使用 CSS 隐藏页面加载时淡入一些图像（显示：无；）。
这在 Firefox、Chrome、Safari、 On Opera（最新版本：12.12）上运行**良好**
，img 随机显示...

这是Jquery代码：

```
$(document).ready(function () {
        $('img:hidden').load(function () {
            $('img:hidden').fadeIn(1000);
        });
    }); 
```

有人知道为什么它会在 Opera 上随机运行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:56:48.377

首先，如果图像可见，“加载”事件会更好地触发。此外，根据我自己的经验，在某些情况下（例如 IE），以下技巧有助于解决问题。

```
$(document).ready( function() {

  if ( $.browser.opera ) {
    $('img:hidden').each( function() {
      $('img:hidden').fadeIn(1000);
    });
  }
  else {
    $('img:hidden').load( function() {
      $('img:hidden').fadeIn(1000);
    });
  }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:51:42.210

好吧，你真的不能错过 jQuery Docu 中的相应注释。字体大小就像[500px](http://api.jquery.com/load-event/) ...也许太大而无法识别？;-D

> 与图像一起使用时加载事件的注意事项
> 
> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些都是：
> 
> 它不能始终如一地工作，也不能可靠地跨浏览器
> 
> 如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> 
> 它没有正确地冒泡 DOM 树
> 
> 可以停止对已经存在于浏览器缓存中的图像进行触发

# asp.net - 如何隐藏或删除线系列 RadChart 中的零值

> ID：14599897
> 
> 赞同：3
> 
> 时间：2013-01-30T08:48:41.377
> 
> 标签：asp.net, wcf, silverlight-4.0, telerik, radchart

我正在使用 Radchart，我想删除显示为零的线系列。是否有任何可能的方法来隐藏或删除显示为零的值。请提供任何解决方案或代码。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:56:13.353

经过 2 天的奋斗，我找到了如何隐藏或删除包含零的线系列的解决方案。我在第 4 线系列中有四个线系列包含零，我想隐藏那些零值，我已经完成了。

实施前

![在此处输入图像描述](../Images/52b1eb398b5b1531c443b5b3a78b67aa.png)

实施后

![在此处输入图像描述](../Images/fcb7a2f0669c4cdebee049f87643e321.png)

代码

```
 //-------------------Styling------------------------           
        RadChart1.DefaultView.ChartLegend.Background = new SolidColorBrush(Color.FromArgb(255, 75, 119, 255));

        RadChart1.DefaultView.ChartArea.AxisY.StripLinesVisibility = Visibility.Collapsed;
        RadChart1.DefaultView.ChartArea.AxisY.MajorGridLinesVisibility = Visibility.Visible;

        RadChart1.DefaultView.ChartLegend.UseAutoGeneratedItems = true;
        RadChart1.DefaultView.ChartLegend.Header = "";

        RadChart1.DefaultView.ChartLegendPosition = Telerik.Windows.Controls.Dock.Bottom;
        RadChart1.DefaultView.ChartLegend.Foreground = new SolidColorBrush(Colors.White);
        RadChart1.DefaultView.ChartLegend.LegendItemStyle = new Style() { TargetType = typeof(ChartLegendItem) };
        RadChart1.DefaultView.ChartLegend.LegendItemStyle.Setters.Add(new Setter() { Property = Control.ForegroundProperty, Value = new SolidColorBrush(Colors.White) });

        ChartLegendItem ch1 = new ChartLegendItem() { Label = "FY10", Background = new SolidColorBrush(Colors.Blue), Foreground = new SolidColorBrush(Colors.White) };
        ChartLegendItem ch2 = new ChartLegendItem() { Label = "FY11", Background = new SolidColorBrush(Colors.Brown), Foreground = new SolidColorBrush(Colors.White) };
        ChartLegendItem ch3 = new ChartLegendItem() { Label = "FY12", Background = new SolidColorBrush(Colors.Green), Foreground = new SolidColorBrush(Colors.White) };
        ChartLegendItem ch4 = new ChartLegendItem() { Label = "FY13", Background = new SolidColorBrush(Colors.Black), Foreground = new SolidColorBrush(Colors.White) };

        ChartLegendItemCollection chC = new ChartLegendItemCollection();
        chC.Add(ch1);
        chC.Add(ch2);
        chC.Add(ch3);
        chC.Add(ch4);

        RadChart1.DefaultView.ChartLegend.UseAutoGeneratedItems = false;
        RadChart1.DefaultView.ChartLegend.Items.Clear();
        RadChart1.DefaultView.ChartLegend.Items.Add(chC[0]);
        RadChart1.DefaultView.ChartLegend.Items.Add(chC[1]);
        RadChart1.DefaultView.ChartLegend.Items.Add(chC[2]);
        RadChart1.DefaultView.ChartLegend.Items.Add(chC[3]);

        Style pathStyle1 = new Style(typeof(System.Windows.Shapes.Path));
        pathStyle1.Setters.Add(new Setter(Shape.StrokeProperty, new SolidColorBrush(Colors.Blue)));
        pathStyle1.Setters.Add(new Setter(Shape.StrokeThicknessProperty, 2));

        Style lineStyle1 = new Style(typeof(Telerik.Windows.Controls.Charting.LineSeries));
        lineStyle1.Setters.Add(new Setter(LineSeries.BorderLineStyleProperty, pathStyle1));

        Style pathStyle2 = new Style(typeof(System.Windows.Shapes.Path));
        //  pathStyle2.Setters.Add(new Setter(Shape.StrokeDashArrayProperty, "1"));
        pathStyle2.Setters.Add(new Setter(Shape.StrokeProperty, new SolidColorBrush(Colors.Brown)));
        pathStyle2.Setters.Add(new Setter(Shape.StrokeThicknessProperty, 2));

        Style lineStyle2 = new Style(typeof(Telerik.Windows.Controls.Charting.SelfDrawingSeries));
        lineStyle2.Setters.Add(new Setter(SelfDrawingSeries.BorderLineStyleProperty, pathStyle2));

        Style pathStyle3 = new Style(typeof(System.Windows.Shapes.Path));
        //  pathStyle3.Setters.Add(new Setter(Shape.StrokeDashArrayProperty, "1"));
        pathStyle3.Setters.Add(new Setter(Shape.StrokeProperty, new SolidColorBrush(Colors.Green)));
        pathStyle3.Setters.Add(new Setter(Shape.StrokeThicknessProperty, 2));

        Style lineStyle3 = new Style(typeof(Telerik.Windows.Controls.Charting.SelfDrawingSeries));
        lineStyle3.Setters.Add(new Setter(SelfDrawingSeries.BorderLineStyleProperty, pathStyle3));

        Style pathStyle4 = new Style(typeof(System.Windows.Shapes.Path));
        //pathStyle4.Setters.Add(new Setter(Shape.StrokeDashArrayProperty, "1"));
        pathStyle4.Setters.Add(new Setter(Shape.StrokeProperty, new SolidColorBrush(Colors.Black)));
        pathStyle4.Setters.Add(new Setter(Shape.StrokeThicknessProperty, 2));

        Style lineStyle4 = new Style(typeof(Telerik.Windows.Controls.Charting.SelfDrawingSeries));
        lineStyle4.Setters.Add(new Setter(SelfDrawingSeries.BorderLineStyleProperty, pathStyle4));

        DataSeries line1 = new DataSeries() { Definition = new LineSeriesDefinition() { ShowItemLabels = false, ShowPointMarks = false, SeriesStyle = lineStyle1 } };
        DataSeries line2 = new DataSeries() { Definition = new LineSeriesDefinition() { ShowItemLabels = false, ShowPointMarks = false, SeriesStyle = lineStyle2 } };
        DataSeries line3 = new DataSeries() { Definition = new LineSeriesDefinition() { ShowItemLabels = false, ShowPointMarks = false, SeriesStyle = lineStyle3 } };
        DataSeries line4 = new DataSeries() { Definition = new LineSeriesDefinition() { ShowItemLabels = false, ShowPointMarks = false, SeriesStyle = lineStyle4 } };

        //-------------------------Data Binding---------------------------
        List< WebService. RadChart1Data > objListAPS = new List<WebService.RadChart1Data>();
        objListAPS = (List< WebService. RadChart1Data >)e.Result.ToList();

        foreach (RadChart1Data obj in objListAPS)
        {
            line1.Add(new DataPoint(obj.Week, obj.BlueLine));
            line2.Add(new DataPoint(obj.Week, obj.RedLine));
            line3.Add(new DataPoint(obj.Week, obj.GreenLine));
            if (obj.BlackLine != 0)
                line4.Add(new DataPoint(obj.Week, obj. BlackLine));
        }

        RadChart1.DefaultView.ChartArea.DataSeries.Add(line1);
        RadChart1.DefaultView.ChartArea.DataSeries.Add(line2);
        RadChart1.DefaultView.ChartArea.DataSeries.Add(line3);
        RadChart1.DefaultView.ChartArea.DataSeries.Add(line4);

        RadChart1.DefaultView.ChartArea.AxisX.LayoutMode =  Telerik.Windows.Controls.Charting.AxisLayoutMode.Inside; 
```

如果发现此答案有用，请将其标记为正确答案，它可能对其他人有帮助。

谢谢

迪内什·哈拉维尔

# mysql - 让我的 SQL 查询更高效

> ID：14599898
> 
> 赞同：0
> 
> 时间：2013-01-30T08:48:44.433
> 
> 标签：mysql, sql, optimization

我的数据库中有数百万个条目。

因为我用的是 3！！内部连接并放置大范围的日期，这个查询需要很长时间，比如几分钟。

有没有办法改进这个查询并仍然获得相同的数据？

这是我的查询：

```
SELECT 
    subscriptions.service_id, 
    service_send_type.usage, 
    service_send_type.price, SUM(IF(msg_t.status LIKE 'Success%', 1, 0)) AS s, 
    COUNT(1) AS t 
FROM (`subscriptions`) 
    INNER JOIN 
        `msg_t` ON `subscriptions`.`phone` = `msg_t`.`phone` AND subscriptions.id = msg_t.sub_id 
    INNER JOIN
        `msg` ON `msg`.`id` = `msg_t`.`msg_id` 
    INNER JOIN `service_send_type` ON `msg`.`service_id` = `service_send_type`.`service_id` 
        AND msg.sushi_service_id = service_send_type.sushi_service_id 
        AND msg.send_type = service_send_type.name 
        AND msg.service_id = subscriptions.service_id 

    WHERE 
        `subscriptions`.`service_id` IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16) 
        AND 
        `subscriptions`.`added` >= '2013-01-28 00:00:00' 
        AND 
        `subscriptions`.`added` <= '2013-01-28 23:59:59' 
        AND 
        `msg_t`.`send_time` >= '2013-01-28 00:00:00' 
        AND 
        `msg_t`.`send_time` <= '2013-01-28 23:59:59' 

    GROUP BY 
        `subscriptions`.`service_id`, 
        `service_send_type`.`usage`, 
        `service_send_type`.`price` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:52:35.600

您可以尝试[通过分析解释计划来优化查询](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)，包括[索引优化](http://dev.mysql.com/doc/refman/5.0/en/optimization-indexes.html)，如果您的表上仍然没有 idnex，这将非常有用。关于语句优化看[这里](http://dev.mysql.com/doc/refman/5.0/en/select-optimization.html)。

希望这可以进一步帮助您

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:54:29.597

你总是需要`IN`查询吗？在您的查询中，可以将 IN 子句替换为`subscriptions.service_id < 17`，这将产生巨大的影响。当您有离散值列表时，IN 查询是合适的。

还要查看表上的索引。您应该在`where`条件和`group by`子句中的列上设置索引。

# node.js - 使用 Node.js 从 SSL 证书中读取到期日期和公用名

> ID：14599901
> 
> 赞同：6
> 
> 时间：2013-01-30T08:49:01.807
> 
> 标签：node.js, ssl, ssl-certificate

在启用 https 的 Node.js 中，我将证书作为`.pem`文件。

现在我想从该文件中读取一些数据以获取有关证书的信息，例如其到期日期和通用名称。

正如我所见，Node 自己的[tls 模块](http://nodejs.org/api/tls.html)和[ursa](https://github.com/Obvious/ursa)等模块都不支持此功能。

当然，我可能会调用`openssl`一个子进程并解析它的输出流（我认为这个任务应该可以使用 OpenSSL 来完成），但我更喜欢一个不依赖路径中外部程序可用性的解决方案。

我怎么能这样做？

**更新：**同时，我找到了[pem 模块](https://github.com/andris9/pem)，它`readCertificateInfo`成功地提供了通用名称，即使使用 Node.js 0.8.18 （这与它的文档声明不支持 0.7+ 是相反的）。不幸的是，它不会返回到期日期。

**更新 2：**在内部，pem 只是`openssl`使用子进程调用命令。当然我可以自己做，因此我可以直接检索所需的信息`openssl`。无论如何，如果有人有更好的想法（在这种情况下意味着纯 JavaScript / Node.js 解决方案）我会很高兴:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T23:08:42.283

同时我找到了答案：PEM 格式基本上是使用 Base64 加密的 ASN.1。

因此，您需要先进行 Base64 解码，然后将结果解析为 ASN.1。结果是证书的数据结构，其中包含适当的值。

就是这样 ：-）！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T23:21:43.557

如果您从`tls.connect`可以调用的方式获取证书`getPeerCertificate()`，您将得到一个看起来像这样的结构（连接到 github.com）：

```
{ subject: 
   { C: 'US',
     ST: 'California',
     L: 'San Francisco',
     O: 'GitHub, Inc.',
     CN: '*.github.com' },
  issuer: 
   { C: 'US',
     O: 'DigiCert Inc',
     OU: 'www.digicert.com',
     CN: 'DigiCert High Assurance CA-3' },
  subjectaltname: 'DNS:*.github.com, DNS:github.com',
  modulus: 'EF45CDFAEC13EF3E0CD38685530109CA9A3A4E5AF980CBC1BD51509C9944A8CDEB61EA951D4F3053C69FD6D355EDD13A3A43E96DD437C98813DA458E5C99F0811D7A0736EAB1DF0E3C600590A212DB3566D6E077A8A37951A653104F37BC46E38EDC101393990D6AB3101D8714DD78607B547B34A9F2E9E33B5F51B56AA76220BF9DE12A757D9424524A8DCD2D9B5C962FD8DFE8FD38BD80AC116061E7B3B7BF81AE8321C9EB7488F27D116603425FA755F4EC00ABF123BB5AABFBCA7C13AB288C0EC122F99424CA06A4D2A846D6D44618E5CF21B6B9D6D9518639506604A906600F1D6FA8A09B82AF7143645577A656B16D35EC7CAF48AD012E762D16E6D7C1',
  exponent: '10001',
  valid_from: 'Apr 30 00:00:00 2012 GMT',
  valid_to: 'Jul  9 12:00:00 2014 GMT',
  fingerprint: 'B1:4B:A1:6F:5C:EE:28:DA:C4:86:CD:D9:F2:80:8F:2E:A7:4A:51:F4',
  ext_key_usage: [ '1.3.6.1.5.5.7.3.1', '1.3.6.1.5.5.7.3.2' ] } 
```

不过，对不起，我还没有找到一种体面的方法来解析任意本地证书。

# ios - 修改 UIDatePicker 选择指示器的色调颜色

> ID：14599905
> 
> 赞同：2
> 
> 时间：2013-01-30T08:49:13.607
> 
> 标签：ios, objective-c, cocoa-touch, uidatepicker

是否可以修改 a 的选择指示器的色调`UIDatePicker`？还是可以将其删除，以便我可以添加自己的选择指示器图像？

我知道在's 的情况下，`UIPickerView`您可以禁用选择指示器，以便您可以提供自己的选择指示器图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:36:38.313

默认情况下没有更改选择指示器颜色的选项。你可以做一个解决方法。我会添加一个简单`UIView`的带有您选择的颜色和透明度的 alpha 值。根据原始选择指示器设置大小和坐标以覆盖它（尺寸为 280x44，标准选择器的坐标为 20/130 - 不确定，所以找出正确的值以防它们不匹配）。

```
UIView *overlayIndicator = [[UIView alloc] initWithFrame:CGRectMake(20, 130, 280, 44)];
overlayIndicator.backgroundColor = [UIColor redColor];
overlayIndicator.alpha = 0.5f;
[yourDatePicker addSubview:overlayIndicator]; 
```

希望这是你可以开始的东西。

![在此处输入图像描述](../Images/86e41dedb957139abb1f665176471a9e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T04:53:53.153

这是我对放置在 UITableViewCell 内的 UIDatePicker 所做的，并且完全使用自动布局约束来调整大小。（我建议继承 UIDatePicker）。

```
let upperSelectorView = UIView()
let lowerSelectorView = UIView()

required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)

        upperSelectorView.backgroundColor = UIColor(colorLiteralRed: 127, green: 139, blue: 131, alpha: 0.45)
        self.addSubview(upperSelectorView)

        lowerSelectorView.backgroundColor = UIColor(colorLiteralRed: 127, green: 139, blue: 131, alpha: 0.45)
        self.addSubview(lowerSelectorView)
    }

    override func layoutSubviews() {
        super.layoutSubviews()
        print(self.frame.size.height)
        if (self.frame.size.height == 216) { //height it used in portrait.
            upperSelectorView.frame = CGRect(x: 0, y: 91, width: self.frame.size.width, height: 0.5)
            lowerSelectorView.frame = CGRect(x: 0, y: 125, width: self.frame.size.width, height: 0.5)
        }

        if (self.frame.size.height == 162) { //height it used in landscape.
            upperSelectorView.frame = CGRect(x: 0, y: 63, width: self.frame.size.width, height: 0.5)
            lowerSelectorView.frame = CGRect(x: 0, y: 98, width: self.frame.size.width, height: 0.5)
        }

    } 
```

经测试可在 iPhone 6 和 iPhone 6+ 上运行。

# blackberry - 在黑莓中将一个字段置于中心，将另一个字段置于底部

> ID：14599907
> 
> 赞同：0
> 
> 时间：2013-01-30T08:49:17.500
> 
> 标签：blackberry, user-interface, bitmapfield

我想`BitmapField`在整个屏幕的中心显示一个，在屏幕底部再显示一个。

我无法生成正确的 UI。

我试过这样 - 使用它我可以在底部放置一个位图，但不能保持中心`BitmapField`。

请任何人帮我解决这个问题。

```
VerticalFieldManager vfm = new VerticalFieldManager(VerticalFieldManager.USE_ALL_HEIGHT
   | VerticalFieldManager.USE_ALL_WIDTH) {
    //Override the paint method to draw the background image.
    public void paint(Graphics graphics) {
        graphics.setBackgroundColor(Color.DEEPSKYBLUE);
        graphics.clear();
        super.paint(graphics);
    }
};

add(vfm);
HorizontalFieldManager customManager = new HorizontalFieldManager(HorizontalFieldManager.USE_ALL_WIDTH)
{
    /* (non-Javadoc)
    * Applying background color for that Manager
    * @see net.rim.device.api.ui.Manager#paint(net.rim.device.api.ui.Graphics)
    */
    public void paint(Graphics graphics)
    {
        graphics.setBackgroundColor(Color.DEEPSKYBLUE);//blue
        graphics.clear();
        super.paint(graphics);
    }

    /* (non-Javadoc)
    * Placing the Fields
    * @see net.rim.device.api.ui.container.HorizontalFieldManager#sublayout(int, int)
    */
    protected void sublayout(int width, int height) {       
        setPositionChild(getField(0), 0, 0);
        layoutChild(getField(0), getField(0).getPreferredWidth(),
                    getField(0).getPreferredHeight());

        setPositionChild(getField(1),
                         Display.getWidth()/2 - getField(1).getPreferredWidth()/2,
                         0);
        layoutChild(getField(1), getField(1).getPreferredWidth(),
                    getField(1).getPreferredHeight());

        setPositionChild(getField(2),
                         Display.getWidth() - getField(2).getPreferredWidth(),
                         0);
        layoutChild(getField(2), getField(2).getPreferredWidth(),
                    getField(2).getPreferredHeight());

        setExtent(width, 50);
    }
};

//To display About icon
final Bitmap bmp1 = Bitmap.getBitmapResource("a.png");
BitmapField bmpfield1 = new BitmapField(bmp1, BitmapField.FOCUSABLE | BitmapField.FIELD_LEFT){
    //To Perform action on clicking the bitmap field
    protected boolean navigationClick(int status, int time)
    {            
        UiApplication.getUiApplication().pushScreen(new AboutScreen());
        onUnfocus();
        return true;
    }

    protected void onFocus(int direction) {
        super.onFocus(direction);    
    }

    protected void onUnfocus() {
        super.onUnfocus();
        invalidate();
    }
};

//To display Help icon
final Bitmap bmp2 = Bitmap.getBitmapResource("b.png");
BitmapField bmpfield2 = new BitmapField(bmp2,BitmapField.FOCUSABLE | BitmapField.FIELD_RIGHT){
    //To Perform action on clicking the bitmap field
    protected boolean navigationClick(int status, int time)
    {            
        UiApplication.getUiApplication().pushScreen(new  
            OpenBrowserScreen(""));
        onUnfocus();
        return true;
    }

    protected void onFocus(int direction) {
        super.onFocus(direction);            
    }

    protected void onUnfocus() {
        super.onUnfocus();
        invalidate();
    }
};

//To display Title Bitmap
final Bitmap bmp3 = Bitmap.getBitmapResource("c.png");
BitmapField bmpfield3 = new BitmapField(bmp3, BitmapField.FIELD_VCENTER | BitmapField.FOCUSABLE);
bmpfield3.setBitmap(bmp3);

//Adding the Three fields to the manager
customManager.add(bmpfield1);
customManager.add(bmpfield3);
customManager.add(bmpfield2);
vfm. add(customManager);

bmpfield3.setFocus();

HorizontalFieldManager hfm = new HorizontalFieldManager(Field.FIELD_HCENTER);
//VerticalFieldManager vfmfields = new VerticalFieldManager(VerticalFieldManager.FIELD_HCENTER|Field.USE_ALL_HEIGHT);
bmpscan = Bitmap.getBitmapResource("test1.png");
bmpfieldscan = new BitmapField(bmpscan,BitmapField.FOCUSABLE |Field.FIELD_VCENTER);
hfm.add(bmpfieldscan);
vfm.add(hfm);
HorizontalFieldManager hfmacnts = new HorizontalFieldManager(HorizontalFieldManager.USE_ALL_HEIGHT | HorizontalFieldManager.FIELD_BOTTOM);

bmpacnts = Bitmap.getBitmapResource("test2.png");
bmpfieldacnts = new BitmapField(bmpacnts,BitmapField.FOCUSABLE | Field.FIELD_BOTTOM) {
    protected boolean navigationClick(int status, int time)
    {
        return true;
    }
};
hfmacnts.add(bmpfieldacnts);
vfm.add(hfmacnts); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:20:52.043

像这样试试

```
VerticalFieldManager vfm = new VerticalFieldManager(USE_ALL_HEIGHT);

BitmapField btf1 = new BitampField(bitmap,FIELD_HCENTER);
BitmapField btf2 = new BitampField(bitmap1,FIELD_HCENTER);

HorizontalFieldManager hfm1 = new HorizontalFieldManager(USE_ALL_WIDTH | FIELD_VCENTER);
HorizontalFieldManager hfm2 = new HorizontalFieldManager(USE_ALL_WIDTH | FIELD_BOTTOM);

hfm1.add(btf1);
hfm2.add(btf2);

vfm.add(hfm1);
vfm.add(hfm2);

add(vfm); 
```

# css - 将 img 添加到 div 标签

> ID：14599915
> 
> 赞同：0
> 
> 时间：2013-01-30T08:49:45.620
> 
> 标签：css, image, html

我意识到这个问题之前可能已经被触及过，但在这里。

我已经编写了我正在处理的页面的顶部横幅。

我现在需要在下面添加一个图像，上面有一个文本以及一个表单域和按钮。

理想情况下，这需要位于 div 标签内。但是，这不起作用，无论我多么努力，它对我的​​编码都没有反应。每次我尝试在包含中心内容的 div 中放置背景图像时，它都不会显示。

因此，我最终将 div 内的图像作为普通图像放置，并将我的文本和表单字段定位为绝对位置。

这似乎工作正常，接近项目结束时，我决定在 Firefox 和一些不同的分辨率上检查它。

这导致该部分中的表单字段和内容向右移动！

有人可以在这里帮助我吗？

真的很想找到一种方法来解决这个问题。

[您可以在http://codepen.io/anon/pen/JpLkE](http://codepen.io/anon/pen/JpLkE)找到我的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:26:13.563

据我了解，我已经检查过，您的第一个问题是 - 背景图像没有进入，所以将宽度和高度放在里面，看起来像

```
<img src="your_background_image.gif" alt="" height="42" width="42"> 
```

第二个是导航和页脚没有进入那里....放在外面并在css中固定位置。

# ios - iOS：如何使用 URL 作为文件名？

> ID：14599917
> 
> 赞同：0
> 
> 时间：2013-01-30T08:49:54.573
> 
> 标签：ios, url, encoding

我的意思是如何对 URL 进行编码，以便将其转换为与文件名兼容的字符串，并且还可以将其解码回原始 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:01:47.590

首先[下载 base64 编码/解码类](http://www.imthi.com/wp-content/uploads/2010/08/base64.zip) ，然后使用下面的代码进行编码和解码。

对于编码：

```
[Base64 initialize];

NSString *str=@"http://www.cogzentappz.com";

NSData *data1 = [str dataUsingEncoding:NSUTF8StringEncoding];

NSString *data2=[Base64 encode:data1];

NSLog(@"data2=%@",data2); 
```

对于以下代码的解码：

```
 NSData * data3 = [Base64 decode:data2]; // data2 is encoded string

NSString * actualString = [[NSString alloc] initWithData:data3 encoding:NSUTF8StringEncoding];
NSLog(@"actualString=%@",actualString); 
```

# android - sql lite where类错误

> ID：14599918
> 
> 赞同：0
> 
> 时间：2013-01-30T08:49:58.210
> 
> 标签：android, sqlite, where-clause

我想从表中获取特定数据..我已插入查询，但它给了我错误...我的应用程序将崩溃...活动代码是

```
public Cursor getpicSpecfic(String st)
    {
        return db.query(DATABASE_TABLE_PIC, 
                new String[] {"id", "pic_name", "pic_place","pic_fellows","pic_purpose","pic_location","pic_jeoPoint_longi","pic_jeoPoint_lati","pic_sd_card","pic_time","pic_date"}, 
            "pic_name"+"="+st, null, null, null, null);
    } 
```

而logcat中的错误是

```
01-31 01:43:13.033: E/AndroidRuntime(877): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.imagegallary/com.example.imagegallary.FullImageDetail}: android.database.sqlite.SQLiteException: no such column: nnn (code 1): , while compiling: SELECT id, pic_name, pic_place, pic_fellows, pic_purpose, pic_location, pic_jeoPoint_longi, pic_jeoPoint_lati, pic_sd_card, pic_time, pic_date FROM Img WHERE pic_name=nnn 
```

我正在传递一个字符串 nnn，它是图片名称 ..我通过 sqllite 浏览器看到这将存在 nnn ......任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:45:47.790

在该`query()`方法中，有一个参数在很大程度上被忽略了，因为这里提出的问题数量直接来自不使用它。

`selectionArgs`是将准备并插入到查询中的参数列表。使用它非常好，因为它可以保护查询免受任何类型的注入（自愿或非自愿）并逃避一切。此外，它（理论上）可以通过识别具有不同参数的相同查询来帮助数据库优化查询。

它还通过使查询 args 自由来简化查询，因此可以进行分组、常量和独立审查。

它的使用如下：

```
String[] projection = {...}; // your projection
String selection = "pic_name = ?"; // ? is replaced by the selectionArgs in order
String[] selectionArgs = new String[] { st }; // no need to quote, escape or anything
Cursor res = db.query(DATABASE_TABLE_PIC, projection, selection, selectionArgs, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:56:20.547

一个很常见的错误。
尝试`' '`像这样在 st 周围添加：

```
public Cursor getpicSpecfic(String st)
    {
        return db.query(DATABASE_TABLE_PIC, 
                new String[] {"id", "pic_name", "pic_place","pic_fellows","pic_purpose","pic_location","pic_jeoPoint_longi","pic_jeoPoint_lati","pic_sd_card","pic_time","pic_date"}, 
            "pic_name"+"='"+st + "'", null, null, null, null);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:02:44.620

`' '`通过将单引号添加到 where 条件的传递值来尝试这种方式，如下所示：

> ```
> public Cursor getpicSpecfic(String st)
> {
>     return db.query(DATABASE_TABLE_PIC, 
>             new String[] {"id", "pic_name", "pic_place","pic_fellows","pic_purpose","pic_location","pic_jeoPoint_longi","pic_jeoPoint_lati","pic_sd_card","pic_time","pic_date"}, 
>         "pic_name"+"="+ "'" + st + "'", null, null, null, null); <<--- see the difference in this line.
> } 
> ```

# javascript - javascript中需要有序点击两个提交按钮

> ID：14599920
> 
> 赞同：-3
> 
> 时间：2013-01-30T08:50:04.340
> 
> 标签：javascript, button, click, submit

我有两个提交按钮。我希望用户单击第一个提交按钮，然后转到第二个。直到第二个提交按钮应该被禁用，等待第一个被点击。我不知道如何为此编写 JavaScript。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:56:28.467

```
<button class='first-btn />
<button class='second-btn' disabled />

$(function() {
    $('.first-btn').on('click', function() {
        $('.second-btn').removeAttr('disabled');
    });
}); 
```

像这样的东西应该可以解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:32:34.087

首先，这将帮助您禁用第二个按钮

```
document.getElementById("2ndbutton").disabled = true; 
```

获取您的第一个按钮的 onclick 功能，如果您的回答满意，那么

```
 document.getElementById("2ndbutton").disabled = false; 
```

然后你就可以继续了。

# android - Proguard在android apk上使用命令行检查？

> ID：14599922
> 
> 赞同：1
> 
> 时间：2013-01-30T08:50:09.637
> 
> 标签：android, command-line, proguard

有什么方法可以检查是否`apk`受到`proguard`保护而不违反它？

例如，使用某些命令或任何其他类似方式。

# android - Android确定程序中的内存泄漏

> ID：14599924
> 
> 赞同：0
> 
> 时间：2013-01-30T08:50:10.587
> 
> 标签：android, memory, memory-leaks, mat

好的，所以我已经做了好几天了，我仍然可以理解 Eclipse 的 MAT 程序。我可以说我有内存泄漏，因为在运行我的应用程序时，我只有大约 2% 的可用内存。这是来自 mat [http://i.imgur.com/ASjbxOx.png](http://i.imgur.com/ASjbxOx.png)的图像，显​​示了内存泄漏。如果你想下载我在这里发布的转储[http://www.mediafire.com/?y1ve41ti1ai5dti](http://www.mediafire.com/?y1ve41ti1ai5dti)任何帮助，这将是伟大的。

应用程序的一些背景知识：主屏幕有几个按钮可带您进入新活动。第二个按钮将您带到游戏开始屏幕。从这里按下开始调用企鹅活动，该活动创建一个新的游戏视图类，它将位图加载到哈希图中并在整个游戏中用于在画布上绘画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:02:30.770

您应该使用“支配树”按钮来了解问题所在。它打开整个堆的支配树。它将允许您轻松识别最大的保留内存块。

# html - 如何在 GWT 中使用 HTML5 部分标记？

> ID：14599926
> 
> 赞同：0
> 
> 时间：2013-01-30T08:50:13.450
> 
> 标签：html, gwt

我有一个 GWT 项目，我想知道 GWT 如何创建 HTML5**标签。**

 **经过几个小时的搜索，我来这里问，有没有办法用 GWT 构建 HTML5 部分标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:10:31.893

是的，您可以创建自己的小部件。

```
public class SectionPanel extends ComplexPanel implements
    InsertPanel.ForIsWidget {
/**
 * Creates an empty section panel.
 */

public SectionPanel() {
 setElement(DOM.createElement("section"));
}

/**
 * Adds a new child widget to the panel.
 * 
 * @param w
 *            the widget to be added
 */
@Override
public void add(Widget w) {
    add(w, getElement());
}

... etc. ... 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-09T01:09:39.707

无需创建新的小部件类型 - 您只需使用泛型`HTMLPanel`并指定要使用的标签。

**UiBinder 选项**

如果您使用`UiBinder`，您的`.ui.xml`文件将包含如下内容：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
             xmlns:g="urn:import:com.google.gwt.user.client.ui">
    ...
    <g:HTMLPanel tag="section">
        (your section content here)
    </g:HTMLPanel>
    ...
</ui:UiBinder> 
```

**手动选项**

如果您更喜欢以编程方式执行此操作：

```
HTMLPanel section = new HTMLPanel("section", "(your section content here)"); 
```

第一个参数指定您要使用的标签；如果您未指定第一个参数，则默认值为`div`.

在这两种情况下，它都会在您的 HTML 输出中生成：

```
<section>
    (your section content here)
</section> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:24:21.050

你可以在 Ui:Binder 中添加任何你喜欢的 HTML：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)**

# c# - 获取 ASP.NET 开发服务器使用的所有端口的代码

> ID：14599928
> 
> 赞同：2
> 
> 时间：2013-01-30T08:50:15.947
> 
> 标签：c#, asp.net, .net, vb.net, port

在我的解决方案中，我有 5 个网站在 Visual Studios 上本地运行`ASP.NET Development Server`。

在可以找到 ASP.NET 开发服务器使用的所有端口的站点之一的代码中是否有一些代码（C# 或 VB.NET）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:16:47.510

查看[Web Administration API](http://msdn.microsoft.com/en-us/library/microsoft.web.administration%28VS.90%29.aspx)，您将需要特别查看[Site](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.site%28v=vs.90%29.aspx)对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:58:09.973

尝试。[请求.Url.Port](http://msdn.microsoft.com/en-us/library/system.web.httprequest.url.aspx)

```
Request.Url.Port // will give the port of the server. 
```

# matlab - 是否可以在 matlab R2010b 中制作桌面应用程序？

> ID：14599932
> 
> 赞同：1
> 
> 时间：2013-01-30T08:50:29.953
> 
> 标签：matlab, desktop

如何创建应用程序安装文件？我只找到了 Matlab R2012b.Thx 的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:13:26.283

使用 mcc，您可以创建独立的可执行文件。更多信息可在此处获得：[http](http://www-rohan.sdsu.edu/doc/matlab/toolbox/compiler/mcc.html) ://www-rohan.sdsu.edu/doc/matlab/toolbox/compiler/mcc.html 。

# php - PHP：在 get 变量中发送和获取 url

> ID：14599942
> 
> 赞同：0
> 
> 时间：2013-01-30T08:51:21.167
> 
> 标签：php, cakephp, cakephp-1.3

在索引页面成功登录后的我的应用程序中，我想重定向页面（无论在 goto 变量中）

举一个我想`page1.php?name=ss&age=75`作为 goto 变量的例子。

```
www.example.com/index.php?goto=page1.php?name=ss&age=75 
```

但我只`page1.php?name=ss`从`$_REQUEST['goto']`

请为我提供获取整个网址的最佳方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:55:37.503

您需要对您的变量进行[urlencode](http://php.net/urlencode)`urlencode('page1.php?name=ss&age=75')` ，这样做将为您提供`page1.php%3Fname%3Dss%26age%3D75`可以插入查询字符串而不会被误解的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:57:38.877

`www.example.com/index.php?goto=page1.php?name=ss&age=75`不是有效的 URL。例如，它包含两个`?`。

您将不得不以`goto`其他方式传递参数。您可以在将其放入 URL 之前对其进行 base64 编码，然后在需要重定向用户时对其进行 base64 解码。

或者你可以简单地对它进行 url 编码/解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:21:13.090

在 url goto 变量中用 @ 符号替换所有 &`page1.php@name=ss@age=45`

并将接收到的 goto 变量中的所有 @ 符号替换为 &

# events - Windows 商店应用程序点击事件非常慢

> ID：14599947
> 
> 赞同：0
> 
> 时间：2013-01-30T08:51:44.297
> 
> 标签：events, performance, pressed

在我的新 Windows 商店应用程序上运行了一些性能测试后，我意识到所有点击事件都比按下事件慢得多。

我不知道为什么，但问题是：我需要它。

我不能改用按下事件，因为有时我需要实现一个右击事件。

进行右键点击时，（正常）点击事件将被忽略。这就是我想要的。不幸的是，按下事件不会被忽略，但总是被调用。

那么 - 我现在能做什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T08:44:22.500

通常，点击事件在按下事件之后触发。因为输入系统会等到指针点被释放，以确定该动作是否应该被点击、保持或其他一些手势，所以你不能在用户触摸屏幕的那一刻被点击。

# c++ - 多线程死锁：这种设计会导致死锁吗？

> ID：14599953
> 
> 赞同：0
> 
> 时间：2013-01-30T08:51:59.360
> 
> 标签：c++, multithreading

线程A：设置变量m_bPaused，m_pPauseEvent是一个信号量对象，提供wait()和set()接口。线程 A 调用它来暂停：

```
PausePlay(){
    m_bPaused = true;           // A1

    m_pPauseEvent->Wait(0);     //A2 wait for the B thread is enter to the waiting
} 
```

线程 B：

```
 if (m_bPaused)
   {
       m_pPauseEvent->Set();    //B1
       m_pPauseEvent->Wait(0);  //B2 0 wait forever 
   } 
```

并调用线程 A 继续线程 B：

```
 m_bPaused = false;    //A3

    m_pPauseEvent->Set(); //A4 
```

当我暂停时，我等到B1执行完毕。线程A返回。这里会死锁吗？当我在线程 A 中调用 continue 并运行到 A3 时。同时线程 B 仍然在 B1 和 B2 之间，然后线程 A 完成行 m_pPauseEvent->Set()。线程B永远不会收到A4发送的信号。死锁！这会发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:09:12.540

由于您没有发布事件类的实现，因此您的代码中可能存在多个问题。

1.  如前所述，您对 m_bPaused 的访问可能是一个问题。
2.  线程 B`Set()`在`Wait(0)`. 您确定线程 A 会收到通知还是线程 B 会使用通知。
3.  在几乎所有的多线程类中都存在虚假唤醒的问题。您的线程 B 似乎不受此保护。

所以很难判断这段代码是否会无死锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:56:08.793

不能肯定地说。`m_bPaused`可能是一个非原子变量，这意味着并发访问是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:27:34.550

Windows 事件不保证信号会唤醒当前的服务员之一。这是已知问题`PulseEvent`和错过唤醒的原因，因为事件已设置然后清除，但等待线程可能看不到该设置。

在这种情况下，`Wait`调用之后的`Set`调用可能会唤醒，而不是`Wait`另一个线程上的调用。这意味着对 UB 的访问没有同步保护`m_bPaused`，也意味着唤醒了错误的线程。

# matlab - 使用 MATLAB 在具有指定尺寸的窗口上查找能量

> ID：14599956
> 
> 赞同：-2
> 
> 时间：2013-01-30T08:52:06.090
> 
> 标签：matlab, energy

> **可能重复：**
> [使用 MATLAB 计算能量](https://stackoverflow.com/questions/14599816)

能量定义如下：

![在此处输入图像描述](../Images/b25c0385c44991728bfc3991ba730cf1.png)

我打算做以下事情：

1-在图像上滑动尺寸为 4X4 的窗口

2-对于每个窗口计算`energy`

3-找到直方图

对于在图像上滑动窗口，我知道我们可以使用`nlfilter`，但这需要`fun`. 这个函数会是能量吗？我怎么能用这个`nlfiler`？

那么，您认为我如何在 MATLAB 中使用 1,2 和 3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:08:15.143

总结你从以前的问题中得到的所有答案（一些是我的）：

```
fun = @(x) sum(x(:).^2)/sum(x(:)).^2; 
en= nlfilter(img,[4 4],fun);
bins= 100 ; %# or whatever number of bins you want
hist(en(:),linspace(min(en(:)),max(en(:)),bins)); 
```

# oauth-2.0 - Google 自定义搜索 API 的 OAuth2 范围

> ID：14599957
> 
> 赞同：10
> 
> 时间：2013-01-30T08:52:14.780
> 
> 标签：oauth-2.0, google-oauth

我创建了一个 CSE，需要以编程方式更新促销。这是在后端系统中完成的，因此身份验证过程中的用户交互不是一种选择。

可以通过 HTTP 使用其自定义搜索 API 更新促销。此过程需要一个身份验证令牌。

他们的文档说自定义搜索仅支持“ClientLogin”身份验证。这已被 Google 弃用，并且它还涉及 CAPTCHA，因此这不是一个选项。他们还声明所有身份验证现在都应该通过 OAuth2 完成。

**我已经实现了 OAuth2，无需用户与 Google Analytics API 进行交互。**

我的问题是： **我找不到自定义搜索 API 与 OAuth2 一起使用的范围值。**有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:21:19.147

I believe you can use the API Key function (which is not an OAuth 2 key) to access CSE apis.

here's the documentation. [https://developers.google.com/custom-search/v1/using_rest?hl=en](https://developers.google.com/custom-search/v1/using_rest?hl=en)

Is there some reason the API key doesn't work and you need OAuth2?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-23T14:56:57.473

尽管[https://www.googleapis.com/auth/cse](https://www.googleapis.com/auth/cse)是一个有效的 API 范围，但遗憾的是它没有为返回的令牌列出任何 API 操作。

随着 2015 年 4 月 20 日截止日期的临近，他们将停止支持 CLientLogin，我希望有一个可用的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-12T12:43:05.710

对于遇到此问题的任何人，都可以使用 oAuth2 进行自定义搜索的 google 范围。请记住，您必须在添加范围后重新获取令牌。

Google 自定义搜索的范围如下：

```
https://www.googleapis.com/auth/cse 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-31T14:43:45.460

任何更新 ？还试图通过 OAuth2 实现自定义搜索，但在 Google Developers 文档中没有任何线索……我想我们做不到。

我使用的 PHP 库返回无效范围：

```
Some requested scopes were invalid. {invalid=[https://www.googleapis.com/auth/customsearch]} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-07T19:52:40.800

如果您查看[Google OAuth Playground](https://developers.google.com/oauthplayground/ "谷歌 OAuth 游乐场")，您不会发现自定义搜索是可用范围之一。不幸的是，您只能访问那里列出的服务（及其各种范围）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-30T15:41:07.017

有没有人确定如何使用 OAuth 2.0 通过 API 添加、编辑或删除 CSE 促销？这在 ClientLogin 下很容易，Google 文档仍然说要使用。

在我们的帐户中添加 CSE 范围后，结果显示“返回有关执行搜索的元数据、有关用于搜索的自定义搜索引擎的元数据以及搜索结果。” 没有提到即将与Promotions合作。

-肯

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-22T23:42:47.747

我在 CSE 促销活动中遇到了同样的问题，因此我联系了 Google 支持并得到了以下回复：

“你好，

来自 Google for Work 支持团队的问候！

正如我从您的消息中了解到的那样，您正在尝试以编程方式使用 GSS 功能，我想向您更新 GSS 仅支持客户端登录身份验证以以编程方式访问搜索引擎及其功能，但客户端登录已被弃用，它不再适用于 GSS .

GSS 目前也不支持 Oauth 2.0。

我们已经有一个功能请求 #6043481 来提供对带有 GSS 的 Oauth 2.0 的支持。但是，我没有预计何时实施。

由于这个原因，目前无法以编程方式添加促销。我建议您通过在浏览器中打开 GSS 控制面板并根据您的要求从 GSS 控制面板->搜索功能->促销->添加来手动使用搜索引擎控制面板和相应的功能。

请从您那里检查相同的内容，如果您需要任何进一步的帮助，请告诉我。”

简而言之，我们被淹没了。

# jakarta-ee - 如何将 Java EE 组件标记为必需组件？

> ID：14599965
> 
> 赞同：1
> 
> 时间：2013-01-30T08:52:40.053
> 
> 标签：jakarta-ee, jboss

我正在构建一个 Java EE Web 应用程序。有时我会收到这样的错误

> JBAS011006：由于异常，未安装**可选**组件 com.example.MyServlet：[..]DeploymentUnitProcessingException：JBAS011054：找不到类的默认构造函数

但是，com.example.MyServlet 对我的应用程序非常重要。我如何将其标记为强制性？

编辑： com.example.MyServlet ；我之前没有包括它，因为我想要一个一般性的答案。

```
/**
 * Class to use JSR299 in ServiceLocators
 */
@WebServlet(value = "/gwtRequest", name = "InjectingRequestFactoryServlet")
//<!-- You'll need to compile with -extras and move the symbolMaps directory
//        to this location if you want stack trace deobfuscation to work -->
@WebInitParam(name = "symbolMapsDirectory", value = "WEB-INF/classes/symbolMaps/")
public class InjectingRequestFactoryServlet extends RequestFactoryServlet {
    @Inject
    public InjectingRequestFactoryServlet(InjectingServiceDecorator serviceDecorator) {
        super(new DefaultExceptionHandler(), serviceDecorator);
    }
} 
```

# jakarta-ee - 一个用户使用 Grails 和 Spring Security Core 访问多个域

> ID：14599966
> 
> 赞同：0
> 
> 时间：2013-01-30T08:52:40.320
> 
> 标签：jakarta-ee, grails, spring-security

我正在尝试实施管理面板来管理几个域。功能要求是只有管理员才能添加新用户。

我决定将管理面板实现为连接到同一数据库（即 MySQL）的单独应用程序，并将所有管理员的活动移至该面板。

一切看起来都很好，两个域都可以使用内容和子页面，但问题在于用户。我在 AdminPanel 的 BootStrap 类中创建了管理员，用户保存在数据库中，我可以登录到管理面板，但我无法登录**到**第二个域。

我发现 Spring Security Core 在用户表中创建了列**类**，我认为这是问题所在：

```
+----+----------+-----------------+
| id | username | class           |
+----+----------+-----------------+
|  1 | admin    | adminpanel.User |
+----+----------+-----------------+ 
```

我无法手动更改它，因为一个用户应该能够登录到由管理员管理的几个域（单独的应用程序）（管理员决定用户可以访问哪些域**）**。

最后的问题是：如何解决这个问题？如何使用户的登录操作独立于创建帐户的应用程序？

# ios - 服务端内购失败如何处理？（消耗品）

> ID：14599973
> 
> 赞同：1
> 
> 时间：2013-01-30T08:52:59.297
> 
> 标签：ios, in-app-purchase, server-side, recovery

我们有一个服务器，除其他事项外，它需要在将消耗品退还给用户之前从第三方（通过 API 调用）购买一些东西。显然，它会事先检查 Apple 收据。

处理服务器端应用程序内故障的最佳方法是什么，比如 3rd 方服务失败？此时用户的体验是已经支付但没有收到消耗品，再次尝试会导致他们花费更多的钱。

到目前为止，我想出了：

**在设备上**

1.  当 inapp 完成时，将该 productId 的收据存储为“无人认领”
2.  像往常一样联系服务器。
3.  如果成功则清除无人认领的收据/productId
4.  如果错误，那么下次用户尝试相同的应用程序时，**跳过实际购买**部分并直接进入 2\. 之前的收据。

**然后在服务器上**

1.  与苹果核对收据
2.  检查我们是否尚未为用户提供该收据的消耗品（防止重复使用收据）
3.  给第 3 方打电话
4.  成功返回消耗品。
5.  在失败时回复错误（此时客户端将保持收据无人认领并在重试时重新发送）。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:59:46.787

我的方法是使它成为一种事务：
将您的步骤 2 分成 2a、2b、2c 和 2d 并涉及客户端服务器

### 服务器：

=> 2a = 检查我们没有使用收据（在我们的已用和已交付货物的内部数据库中）
-> 如果未使用则交付

### 客户：

-> 购买并执行 2b
=> 2b 告诉服务器我们收到了数据！

### 服务器：

=> 2c：等待客户确认 => 2cd= 将收据标记为已烧毁（在我们的数据库中），因为我们已经交付了它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:26:04.943

据我了解，您的主要问题是与购买消耗品相关的 UI/UX。

我不知道您的消耗品如何对用户“可见/可用”，但我的关键是让用户清楚地知道与服务器的交易进入了“临时失败”状态。当您的应用下载遇到任何障碍时，这与在 App Store 中发生的情况相同。它可以标记为“加载/等待”，如果您可以明确指出只需要下载耗材（“安装/重试/下载/回收”而不是“购买”而不是“购买”，那将是很好的） ）。

在同一个地方有一个“在出现问题时联系我们”选项也是非常好的。我不知道为什么您的第 3 方连接可能会失败，但如果它以一种不那么零星的方式发生，我敢打赌，不止几个用户需要抱怨。

至于问题的客户端 - 服务器协议方面，你所描述的对我来说似乎很好。这里的关键是服务器会跟踪哪个收据已经被成功认领；原则上，客户端可以尝试多次重用收据，它只会在第一次尝试时成功（在服务器将收据标记为已交付之前）。如果你想要更多的弹性，我会引入一个从客户端到服务器的显式*确认*阶段，确认消耗品已成功计算。

希望能帮助到你。

# c# - 如何防止参数被再次使用？

> ID：14599976
> 
> 赞同：0
> 
> 时间：2013-01-30T08:53:05.367
> 
> 标签：c#, .net, unique

在这个答案之后：

[为什么这些哈希码相等？](https://stackoverflow.com/questions/14585041/why-are-these-hashcodes-equals/14586264#14586264)

我意识到 GetHashCode 的目的不是为对象提供唯一标识符。

这个测试的目的是我有一个带有 6 个参数的业务功能：

*   `customerId`
*   `serviceId`
*   `startDate`
*   `EndDate`
*   `cmsThematicId`

而且我不想用相同的值多次调用这个函数

这些参数被插入到数据库中，我可以使用 (`customerId = @customerId`和`serviceId = @serviceId`...) 进行查询，但是我需要通过很多组合来提高效率，所以这不是一个解决方案。

编辑 ：

例子 ：

假设我有一个超级用户，他需要注册客户。注册由 5 个参数组成：customerId、serviceId、startDate、EndDate、cmsThematicId。注册过程是这样的：

*   您选择服务（例如“用大红色按钮显示嗨”）
*   您选择客户（购买服务的人）
*   您选择 cmsThematicId （如果需要，可以选择网页）
*   您选择开始日期（在下拉列表中）
*   您选择 endDate（在下拉列表中）

我的表单无法显示一组已使用的参数。

例如，一旦客户 1 在 1 月份的“纽约假期”页面上注册了“大红色按钮”服务，超级用户将不会在表单中看到这些参数集。

所以我的过程是这样的： - 创建所有可能性 - 计算列表中每个可能性的哈希码 - 获取每个已经使用的可能性的哈希码（从数据库中） - 从列表中删除已经使用的可能性 - 显示表格

问题是：哈希码不是唯一的，所以即使没有使用，我也可能会删除一个项目。

更清楚了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:01:29.347

每次调用后，将您的 6 个值存储在具有组合索引的历史表中。在您的业务功能中，我将添加一个代码来验证这些值是否已经在您的历史记录表中，如果我找到这些值，则立即退出。

稍后编辑：这就是你应该如何查询历史表：

```
IF EXISTS
  (SELECT customerId FROM HIstory WITH (NOLOCK) WHERE customerId='<value>' AND serviceId='<value>' AND <add all your fields here>)
    SELECT 1
ELSE
    SELECT 0 
```

这样，如果已经有记录（意味着您的业务函数已经使用您正在测试的参数调用），则上述查询返回 1，否则返回 0。

所以如果1，你需要停下来。

如果为 0，则需要将值添加到历史表并执行业务逻辑。或：执行业务逻辑然后将值添加到历史表。

**EDIT2：** 最初，您的历史记录表是空的。对您的函数的每次调用都将：

1.  在 Hitory 表中查询与作为参数传递给函数的值匹配的现有值

2.  如果需要，填充历史记录表。

也就是说，您的函数所做的第一件事是查询 History 表并（如果需要）在该表中插入一组新值。基本上每次调用您实现的函数时都会执行查询，因为查询是在该函数内部完成的。

# python - SQLAlchemy 等效于 ActiveRecord 中的命名范围

> ID：14599978
> 
> 赞同：7
> 
> 时间：2013-01-30T08:53:09.190
> 
> 标签：python, orm, sqlalchemy, named-scope

是否有相当于 AR 的命名范围？命名范围基本上是过滤器，可以包装在方法中，然后链接。

[这是来自http://archives.ryandaigle.com/articles/2008/8/20/named-scope-it-s-not-just-for-conditions-ya-know](http://archives.ryandaigle.com/articles/2008/8/20/named-scope-it-s-not-just-for-conditions-ya-know)的示例：

```
class Article < ActiveRecord::Base

  # Get all articles that have been published
  named_scope :published, :conditions => ['published = ?', true]

  # Get all articles that were created recently
  named_scope :recent, lambda { { :conditions => ['created_at >= ?', 1.week.ago] } }

end

# Get all recently created articles that have been published
Article.published.recent 
```

这是一个使用 Django ORM 的示例：http: [//furrybrains.com/2009/06/22/named-scopes-for-django/](http://furrybrains.com/2009/06/22/named-scopes-for-django/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-31T00:12:42.973

SQLAlchemy 具有[混合属性](http://docs.sqlalchemy.org/en/latest/orm/extensions/hybrid.html)，您可以使用它来构建任何类型的系统：

```
from sqlalchemy.ext.hybrid import hybrid_property

class Article(Base):
    @hybrid_property
    def published(self):
        return self.is_published == True

    @hybrid_property
    def recent(self):
        # this relies on the date arithmetic of the target backend
        return datetime.now() - self.created_at >= datetime.timedelta(days=7)

articles = query(Article).filter(Article.published, Article.recent).all() 
```

# sql - SQL LIKE 运算符在应该显示的时候没有显示任何结果

> ID：14599990
> 
> 赞同：3
> 
> 时间：2013-01-30T08:53:45.730
> 
> 标签：sql, sql-server, tsql, sql-like

我有一个载有大量信息的 Vehicle 表，但其中一列是 MSSQL 表中的“所有者”

但是当我使用时我无法选择其中一位所有者，`LIKE`但如果我使用则可以`=`

'Silkeborg Distributionscenter' 是所有者（是的，表格和参数中都有一个双空格）

所以参数是：

```
DECLARE @Owners nvarchar(MAX) = 'Silkeborg  Distributionscenter' 
```

我试过：

```
SELECT * FROM Vehicle WHERE @Owners = Owner 
--This gave me all the correct results 
```

然后：

```
SELECT * FROM Vehicle WHERE @Owners LIKE Owner
--No result 
```

然后：

```
SELECT * FROM Vehicle WHERE @Owners COLLATE Danish_Norwegian_CI_AS LIKE Owner COLLATE Danish_Norwegian_CI_AS
--No result 
```

我需要使用 LIKE，因为我需要能够一次选择一组所有者。所以原来的select语句是这样的

```
SELECT * FROM Vehicle WHERE ('|' + @Owners + '|' like '%|' + Owner + '|%')
--No result 
```

有任何想法吗？

**编辑：** 一切正常@Owners 是“Fredericia Distributionscenter”但不是“Silkeborg Distributionscenter”，它们都在表内。

“Silkeborg Distributionscenter”文本中的内容是否有效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T10:42:23.583

*按要求提升为答案。*

Vehicle 表中 Owner 字段的末尾有一些空格字符。'=' 运算符跳过尾随空格，'like' 运算符不跳过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T08:55:46.430

尝试交换列和参数

```
SELECT * 
FROM   Vehicle 
WHERE  Owner LIKE '%' + @Owners + '%' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T09:27:51.370

以下运行正常，我怀疑缺少信息

```
declare @t  table (
    owner nvarchar(50)
)

insert into @t values ('Silkeborg  Distributionscenter'), ('rzrzezer')

declare @owner nvarchar(max) = 'Silkeborg  Distributionscenter'

select * from @t
-- two lines
select * from @t where @owner = owner
-- one line
select * from @t where @owner like owner
-- one line 
```

仍然适用于

```
set @owner = 'Silkeborg  Distributionscenter|another one'
select * from @t where '|' + @owner + '|'  like '%|' + owner + '|%'
-- one line 
```

但如果失败

```
insert into @t values ('Silkeborg  Distributionscenter|abc')
select * from @t where '|' + @owner + '|'  like '%|' + owner + '|%'
-- one line, you may expect 2 in this case consider using a many to many relation 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T08:57:29.840

您的查询不正确。像这样写：

```
SELECT * FROM Vehicle WHERE Owners like '%' + @Owners + '%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T09:19:40.213

```
DECLARE @Owners nvarchar(MAX) = '%Silkeborg  Distributionscenter%'

SELECT * 
FROM   Vehicle 
WHERE  Owner LIKE @Owners 
```

或者你也可以传递一个修改过的参数，这在从前端传递参数时使用

# api - LinkedIn API 中是否有一些地方可以获取谁查看了我的个人资料？

> ID：14599994
> 
> 赞同：2
> 
> 时间：2013-01-30T08:53:51.037
> 
> 标签：api, linkedin

我想显示来自我正在开发的应用程序的此信息，作为来自linkedIn 的频繁更新数据的一部分。我已经阅读了linkedin 文档并完成了我的研究，但找不到任何我可能使用的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:48:49.480

到目前为止，这是不可能的：http: [//developer.linkedin.com/forum/search-appearances-and-profile-views](http://developer.linkedin.com/forum/search-appearances-and-profile-views)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T01:28:55.273

如果我大胆猜测，这是人们升级为高级会员的卖点之一。因此，如果他们公开获取此数据的免费增值版本（最后 5 人），您可以轻松编写一个应用程序来投票并获取所有数据，从而消除每月给他们 30 美元的最大理由之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-03T11:22:28.853

我想如果您可以自动打开 LinkedIn 网站并废弃页面以获取视图信息并将其记录在某处，您可以随着时间的推移整理列表以捕获记录。

我相信他们会做任何事情来识别机器人活动并阻止它们，但你可能会这样做。

同样适用于应用程序。我猜应用程序会更容易破解，因为应用程序中不会提供太多保护。

# linux - Apache 域到 IP：端口映射

> ID：14599996
> 
> 赞同：2
> 
> 时间：2013-01-30T08:53:56.847
> 
> 标签：linux, apache, tcp, port

我的客户有一台安装了一些软件的 Linux 机器。
其中一个使用端口号 80，但不是 Web 服务。

现在，我必须听普通人在浏览器中输入 url 并向他们展示
网页。

1\. 我们有一个地址 m.info.mditac.or.kr。
2\. 人们会使用这个地址来访问网络服务。
3\. AFAK，http 使用端口 80。
4\. 端口 80 被另一个服务占用，并且该服务经理说他们没有提供该端口使用。
5\. 目前网络服务使用端口 8085

我如何让 m.info.mditac.or.kr 转到 123.someIp:8085 ？
或者以某种方式神奇地 m.info.mditac.or.kr 使用端口 8085 ？

据我在互联网上发现，多个进程无法侦听同一个端口。（但并非不可能，正如他们所说）

谢谢

**编辑**
这个问题已被选民关闭。我不明白为什么。
我在问如何配置您的 Linux 主机文件、Apache httpd.conf 文件和 Tomcat server.xml
和/或任何其他相关配置。
谁能告诉我我问问题的方式有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:01:47.640

有多种选择：

*   如果服务器前面有防火墙，请将流向端口 80 的流量重定向到您的新主机。如果旧服务仍然需要在端口 80 上保持从外部可访问，这不是一个选项。否则，您可以说服端口 80 上的服务的所有者通过例如端口 8080 访问它 - 将所有到达端口 8080 的数据包重定向到端口 80，并将到达端口 80 的所有数据包重定向到您的服务。
*   旧服务可以实现应用程序协议检查，或者您可以引入一个检查应用程序数据的代理，如果它看到 HTTP，则所有流量都可以代理到您的新主机，如果它看到旧服务器应用程序数据，则将流量发送到旧主机服务器。
*   防火墙/路由器中的 L7 分类和重定向并不是一个真正的选项，因为在 TCP 握手期间您无法告诉任何有关 L7 数据的信息。

# ide - 用于编辑和调试的 Qt Creator 自定义拆分视图设置

> ID：14599998
> 
> 赞同：8
> 
> 时间：2013-01-30T08:54:10.860
> 
> 标签：ide, qt-creator

Qt Creator 中的编辑和调试模式是否可以有不同的拆分设置？

我是：

*   使用两台显示器
*   垂直分割编辑器
*   将分割对齐到监视器之间的边缘

现在当我切换调试模式时：

*   变量列被挤入
*   我的编辑器分割边缘被推离监视器边缘

我可以以某种方式告诉 Qt Creator 记住每个拆分吗？

（我在选项或窗口菜单中找不到此设置）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-29T08:37:10.713

虽然这不是我正在寻找的解决方案，但它在某种程度上符合我的目的：

1.  使用 QtCreator 而不拆分窗口
2.  去：窗口->在新窗口中打开
3.  根据需要重复 2
4.  根据需要放置新窗口

这将提供第二个/第三个编辑器窗口。
现在，如果您在第一个窗口中在 Editor 和 Debug 之间切换，第二个窗口不会关心这个。

但是，这只适用于 2.8.0 或更高版本。

*旁注：*
它还不完美：QtCreator 在调试时使用哪个窗口有点创意 - 它几乎总是我不看的窗口;-)