# StackOverflow 问答 16199000-16199999

# c# - c#streamreader 读取目录中子文件夹中的文件

> ID：16199000
> 
> 赞同：0
> 
> 时间：2013-04-24T17:57:05.677
> 
> 标签：c#, stringbuilder, ftpwebrequest, webresponse

我需要在一个目录中找到所有文件和所有子文件夹。我省略了 FtpWebRequest。这是我到目前为止所写的：

```
 private string[] fileList () {

    StringBuilder result = new StringBuilder();
    WebResponse response = null;
    FtpWebRequest reqFtp = null;

    //makes request to ftp server

    StreamReader reader = new StreamReader(response.GetResponseStream());
    string line = reader.ReadLine();

    //reads everything in directory but does not open the subfolders    
    while (line != null)
    {
        result.Append(line);
        result.Append("\n");
        line = reader.ReadLine();
    }

    result.Remove(result.ToString().LastIndexOf('\n');
    return result.ToString().Split('\n');
} 
```

这向我显示了指定目录中的所有文件和文件夹。但是，我的问题是：如何读取此目录中每个子文件夹中的文件？

有没有办法检测到我已经到达一个文件夹，以便我可以将路径保存为 string[] 中的索引，并继续阅读直到没有更多文件夹？

我的意图是用从 Ftp 服务器读取的文件覆盖我本地机器上的每个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:09:36.487

获得文件和/或目录列表后，您必须执行新的 ftp 请求才能获取该列表中的项目。例如，如果我请求目录的内容并获取文件列表，那么您将需要遍历该列表以请求每个文件。然后在循环内覆盖您的本地副本。您基本上会像处理本地文件一样处理它，仅使用 ftp 请求并读取您通常打开文件并读取流的流。

这个问题展示了如何递归地获取当前目录和子目录中的所有文件。 [如何递归列出C#目录中的所有文件？](https://stackoverflow.com/questions/929276/how-to-recursively-list-all-the-files-in-a-directory-in-c)

如果您在同一个域中，则可以将 UNC 路径与普通 dir/file 对象一起使用，并完全放弃 ftp 请求。

# asp.net-mvc-3 - razor 脚本 MVC 3 将小数呈现为整数，用于小数为零的小数

> ID：16199001
> 
> 赞同：0
> 
> 时间：2013-04-24T17:57:07.160
> 
> 标签：asp.net-mvc-3, razor, integer, decimal

razor 脚本 MVC 3 将小数呈现为整数，用于小数为零的小数

就像 300.00 到 300 和 39.09 一样 39.09

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:05:35.743

假设是您的视图使用的模型上的`Model.Blah`一个属性：`Decimal`

```
if (Convert.ToInt32(Model.Blah) == Model.Blah)
{ 
    <p>@Model.Blah.ToString("N0")</p> 
} else {
    <p>@Model.Blah.ToString("N2")</p>
} 
```

# debugging - 如何查看/重播与内容一起保存的 chrome 网络调试器 har 文件？

> ID：16199002
> 
> 赞同：152
> 
> 时间：2013-04-24T17:57:14.117
> 
> 标签：debugging, google-chrome, har

我喜欢网络调试器，话虽如此，有哪些程序可以让我在多个“hars”中前进和后退，以便我可以重播它们？如果“hars”与内容一起保存，重播也可以处理吗？

现在我只是在文本板中通读，但如果我必须展示我的任何发现，一个好的“har 播放器”可以极大地帮助非技术人员。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2014-07-11T16:32:25.660

您可以使用 Jan Odvarko 开发的 HAR 查看器。您可以在以下位置使用在线版本

*   [http://www.softwareishard.com/har/viewer/](http://www.softwareishard.com/har/viewer/)（旧版本）
*   [http://gitgrimbo.github.io/harviewer/master/](http://gitgrimbo.github.io/harviewer/master/)（最新的主分支）

[或者在https://github.com/janodvarko/harviewer](https://github.com/janodvarko/harviewer)下载源代码。

编辑：Chrome 62 DevTools 包括 HAR 导入功能。 [https://developers.google.com/web/updates/2017/08/devtools-release-notes#har-imports](https://developers.google.com/web/updates/2017/08/devtools-release-notes#har-imports)

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2017-11-07T18:22:33.067

Chrome 开发工具的“网络”工具现在允许您通过拖放到窗口中来导入 HAR 文件。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-08-19T19:28:08.950

有几个在线、离线工具可以做到这一点：

*   [HAR 查看器](http://www.softwareishard.com/har/viewer/)
*   [HAR分析仪](https://toolbox.googleapps.com/apps/har_analyzer/)

但我最喜欢的是[浏览器扩展](https://chrome.google.com/webstore/detail/http-archive-viewer/ebbdbdmhegaoooipfnjikefdpeoaidml?hl=en)（在 chrome 中尝试过，希望它可以在其他浏览器中使用）。安装后，它在[您的应用程序](http://chrome://apps/)中显示为**HAR 查看器**。然后你可以上传你的 HAR 文件并看到如下内容：

[![在此处输入图像描述](https://i.stack.imgur.com/EjyAE.jpg)](https://i.stack.imgur.com/EjyAE.jpg)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-04-08T00:15:14.400

重播 har 文件最可靠的方法是使用**Fiddler**之类的免费工具，该工具始终免费且可以快速下载。打开 har 文件的站点都是错误的，无法打开大文件。Fiddler 适用于所有平台。

[https://www.telerik.com/download/fiddler](https://www.telerik.com/download/fiddler)

**转到文件菜单-> 导入会话...**

[![打开提琴手](https://i.stack.imgur.com/3pG1y.png)](https://i.stack.imgur.com/3pG1y.png)

**选择“HTTPArchive”选项**

[![选择 Http 存档选项](https://i.stack.imgur.com/11VXC.png)](https://i.stack.imgur.com/11VXC.png)

**浏览到您的 HAR 文件**

[![在此处输入图像描述](https://i.stack.imgur.com/HpHjU.png)](https://i.stack.imgur.com/HpHjU.png)

HAR 文件将在提琴手窗口上打开并重播。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2018-03-07T22:36:48.703

Chrome 现在支持加载 HAR 文件。打开 Chrome，按 F12，单击网络选项卡。拖放 .har 文件完成！

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-01-11T06:27:15.170

编辑：Harhar 现在是开源的。我已经更新了下面的网址。

如果您使用 Avalanche 负载生成器，您可以使用 Harhar 在非常高的负载下重放 HAR 文件：[https ://acastaner.github.io/harhar/](https://acastaner.github.io/harhar/)

当您“保存为带有内容的 HAR”时，此工具会处理您使用的“内容”。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-07-21T21:01:03.467

拖放是最好的解决方案。我只是通过单击 HAR 导入图标来展示另一种导入方式： [![在此处输入图像描述](https://i.stack.imgur.com/SaSql.png)](https://i.stack.imgur.com/SaSql.png)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-03-13T04:21:28.380

如果我不迟到......

对于 Firefox，可以从“网络”选项卡导入相同的 har 文件。[![带有导入 HAR 文件的 Firefox 网络选项卡](https://i.stack.imgur.com/thWdz.png)](https://i.stack.imgur.com/thWdz.png)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-07-30T08:36:29.290

[Hardiff.com](http://hardiff.com/)是一个非常有用的工具。它允许您比较一个或多个`.har`文件。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-12-19T19:10:47.747

1.  打开 Chrome 并单击 F12
2.  点击网络
3.  **将har**文件拖放到 chrome 网络选项卡中。

[![在此处输入图像描述](https://i.stack.imgur.com/tf6Om.png)](https://i.stack.imgur.com/tf6Om.png)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-11-03T22:00:09.013

HAR 导入在 Firefox 中无缝工作：打开 Web 开发人员 -> 网络选项卡 -> HAR -> 导入 ...（Web 开发人员工具的右上角）

[HAR 导入选项](https://i.stack.imgur.com/ixqSq.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-03T10:13:49.027

打开 chrome 浏览器。右键单击页面上的任意位置 > 检查元素 > 转到网络选项卡 > 拖放 .har 文件您应该会看到日志。

# java - 开始 Java：'for' 循环

> ID：16199007
> 
> 赞同：0
> 
> 时间：2013-04-24T17:57:26.330
> 
> 标签：java

我想要一个打印以下内容的程序： (3,0), (2,1) , (1,2) 和 (0,3)

但我无法正确理解，请参见下面的代码。得到我想要的东西的合适语法是什么？

```
public class experiment1 {
    public static void main(String[] args) {
        for(int i = 3, int j = 0; i >= 0, j <= 3; i--, j++)
        {
            System.out.println(i + "\t"+ j);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T18:00:42.797

您不需要在该循环中包含两个变量。一般来说，尽量避免通过添加额外的变量/不必要的机制来过度复杂的代码。

试试这个：

```
for(int i = 0; i <= 3; i++){
   System.out.println((3-i) + "\t" + i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:59:48.867

你可以：

*   使用 && 而不是逗号： (i >= 0) && (j <= 3)
*   使用单个变量，并在循环体中对其执行算术运算： System.out.println( i + "," + (3-i))

逗号运算符接受两个表达式，执行这两个表达式，并返回最后一个的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:37:51.903

您的解决方案是正确的，除了语法错误。在不更改太多代码的情况下，修复后的“for”将如下所示：

```
for (int i = 3, j = 0; i >= 0; i--, j++) 
{
     System.out.println(i + "\t"+ j);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T18:05:41.087

我能想到的最好的方法是使用模数。

```
for(int i = 0; i < 3; i++) {
    System.out.println("(" + i % 3 + "," + i + "));
} 
```

这消除了对第二个变量的需要。

# php - 带有连接和计数的 mySQL 查询

> ID：16199012
> 
> 赞同：0
> 
> 时间：2013-04-24T17:57:43.057
> 
> 标签：php, mysql

我有一个我的 sql 数据库并使用 php 来访问它。

我的表看起来像：

> 航班表 航班 ID、时间、机场

座位表 航班号、座位号

我有以下查询：

```
SELECT f.FlightID 'ID', Count(*) 'Seats Booked' FROM flights f, seats s  GROUP BY f.FlightID 
```

我希望输出是

> 已预订的航班 ID 座位
> 
> ID Num 座位预订

目前的问题是它显示了这一点：

```
[{"ID":"0","Seats Booked":"37"},{"ID":"1234","Seats Booked":"37"}] (The output is JSON encoded) 
```

如果你关注我，应该是 10 点和 27 点？它似乎不是正确的加入。

请解释我做错了什么，而不仅仅是一个答案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:07:25.703

LMC,

您没有使用该子句进行连接。这就是为什么您为每个分组指令获得总和的原因。

使用您的语法的正确指令应该是这样的：

```
SELECT f.FlightID 'ID', Count(*) 'Seats Booked' 
FROM flights f, seats s  
where s.FlightId = f.FlightId
GROUP BY f.FlightID 
```

使用内连接语法应该是这样的：

```
SELECT f.FlightID 'ID', Count(*) 'Seats Booked' 
FROM flights f
inner join seats s  
on  s.FlightId = f.FlightId
GROUP BY f.FlightID 
```

您可以在不使用飞行表的情况下执行此操作。飞行表没有任何区别，因为您要返回一组飞行ID。桌子座位有flightid。下面的陈述应该足够了。如果您不担心没有预订座位的航班，这是真的

```
SELECT s.FlightID 'ID', Count(*) 'Seats Booked' 
FROM seats s  
GROUP BY s.FlightID 
```

如果您想显示没有预订座位的航班，那么您应该使用左连接到航班。下面的语句将解决这个问题。

```
SELECT f.FlightID 'ID', Count(*) 'Seats Booked' 
FROM flights f
left join seats s  
on  s.FlightId = f.FlightId
GROUP BY f.FlightID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:13:13.840

如果您只需要航班表中的航班 ID，为什么不这样做：

> SELECT s.FlightID, COUNT(s.id) FROM seat s GROUP BY s.FlightID

如果您还需要计算没有座位的航班，请使用：

> SELECT f.flightID, COUNT(s.id) FROM 航班 f LEFT JOIN 座位 s ON s.flightID=f.flightID GROUP BY f.flightID

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T18:06:52.780

在这里，您的方法的问题是您没有加入您的表格。我的意思是“Table1”与“Table2”有某种关系。在您的情况下，它是航班号。因此，在另一个表（座位表）中，您将拥有座位数据，但可用于任何特定航班。因此，为了获得匹配的记录，您需要根据 flightid 加入这两个表，以便您为每个航班获得不同数量的座位。

试试这个 sql。

```
select f.flightid as 'id', count(s.seat_number) as seats_booked
from flight f, seats s
where f.flightid=s.flightid
group by f.flightid 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T18:00:58.490

首先，您应该使用下面显示的连接语法，因为您的语法有些过时。二、一定要包含`where`子句

```
SELECT f.FlightID 'ID', count(*) as "seat count"
INNER JOIN seats s On
f.FlightID = s.FlightID
Where f.FlightID = 'some_id'
GROUP BY f.FlightID 
```

# php - 为什么这种 mongo 排序在 PHP 中不起作用？

> ID：16199015
> 
> 赞同：6
> 
> 时间：2013-04-24T17:57:48.617
> 
> 标签：php, mongodb

我正在按照 PHP 文档中的示例对集合中的一些记录进行排序：

```
 $cursor = $mongo->party_scores->find()->limit(10);
    $cursor = $cursor->sort(array("score",-1));
    foreach($cursor as $doc) {
        print_r($doc);
    } 
```

这样做，我以随机顺序（未排序）查看文档。

但是从 mongo 控制台执行此查询会产生正确排序的响应：

```
db.party_scores.find().sort({score : -1 }) 
```

我觉得一定有一些明显的东西我错过了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T18:38:39.920

我想我看到了问题。而不是这样做：

```
$cursor->sort(array("score",-1)) 
```

尝试这个：

```
$cursor->sort(array("score" => -1)) 
```

很容易犯错，但如果你没有马上看到它，就会很沮丧。

# java - 可用的最常用 Java 类的频率列表？

> ID：16199017
> 
> 赞同：0
> 
> 时间：2013-04-24T17:57:52.337
> 
> 标签：java, class

我想将最常用的 Java 类的频率列表提供给初学者编程课程中的学生，作为他们自己探索 Java 库时的方便工具。是否有人已经编译了这样的列表，例如通过在 Github 上挖掘源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:01:53.643

您可以查看[AP Java 子集](https://apstudent.collegeboard.org/apcourse/ap-computer-science-a/about-the-exam/java-subset)，看看里面有什么和没有什么。

# validation - 在 VBA 中使用动态列表验证

> ID：16199027
> 
> 赞同：1
> 
> 时间：2013-04-24T17:58:35.013
> 
> 标签：validation, vba

我是 VBA 编程新手，我正在尝试使用 Excel 工作表中的列表验证数据。问题是每次我从下拉列表中选择不同的标准时，列表的大小都会有所不同。

例如：当我选择中国时，列表变成了 10 个不同的卖家。范围 A1 到 A10，但是当我选择日本时，我只有 5 个卖家，从 A1 到 A5。

所以我每次都需要在**Formula1部分有一个新的范围。**

```
With Selection.Validation
    .Delete
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:="=$Z$1:$Z$30"
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With 
```

最好的方法是什么？

我知道如果我离开一个固定的范围，它可以工作，但它看起来并不好，因为它留下了很多空白，而且看起来也不整洁。

我希望这是可以理解的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:09:09.997

您可以使用以下内容获取列的 las 非空单元格

```
Worksheets("Sheet1").Range("A1").End(xlDown) 
```

然后，您只需将您的 Formula1 属性从 A1 构建到结果。

```
Dim strFormula1 as string
strFormula1 = "=$A$1:" & Worksheets("Sheet1").Range("A1").End(xlDown).Address() 
```

希望对你有帮助，没测试过可能有错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:09:38.950

使用带有公式的命名范围

要创建名称，请转到公式/名称管理器/新建

在 RefersTo 中选择一个名称，例如 DataValidation

```
=OFFSET(Sheet1!$Z$1,0,0,COUNTA(Sheet1!$Z:$Z),1) 
```

现在，您有了一个动态区间，可以在您的验证中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:09:30.427

其他两个答案更简单，但如果您有需要在验证列表中的非连续非空白单元格，则将不起作用。这种方法应该克服这一点:)

您可以在 VBA 中使用自定义函数来返回过滤后的字符串地址。**这将返回过滤后的地址，或者如果**过滤后的地址不是有效范围，它将返回原始地址。

**注意**如果返回的地址超过 255 个字符的限制，这可能会失败。

```
With Selection.Validation
.Delete
.Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
xlBetween, Formula1:=GetAddress(Range("$Z$1:$Z$30"))
.IgnoreBlank = True
.InCellDropdown = True
.InputTitle = ""
.ErrorTitle = ""
.InputMessage = ""
.ErrorMessage = ""
.ShowInput = True
.ShowError = True
End With 
```

将函数放在普通代码模块中。

```
Function GetAddress(myRange As Range) As String

Dim cl As Range
Dim c As Long: c = 1
Dim tmpAddress As String

For Each cl In myRange
    If cl.Value <> vbNullString Then
        'Create a string value of cell address matching criteria'
        If tmpAddress = vbNullString Then
            tmpAddress = myRange.Cells(c).Address
        Else:
            tmpAddress = tmpAddress & "," & myRange.Cells(c).Address
        End If
    End If
    c = c + 1
Next

If Not Range(tmpAddress) Is Nothing Then
    GetAddress = "=" & tmpAddress
Else:
    MsgBox "There are no non-empty cells in this range.", vbInformation
    GetAddress = "=" & myRange.Address
End If

End Function 
```

# asp.net - 为什么 Visual Studio 会这样做，有没有办法阻止它？

> ID：16199028
> 
> 赞同：1
> 
> 时间：2013-04-24T17:58:44.060
> 
> 标签：asp.net, visual-studio-2012

我在 Visual Studio 编辑器中遇到了烦恼（我记得自 VS2002 以来使用的每个 VS 版本都会发生这种情况）。也许我应该把它吸起来并继续前进，但也许有人知道可以缓解我的痛苦。:-)

在使用 ASP.NET 的页面编辑器中，它喜欢以奇怪的方式重新排列我的页面代码。好吧，我要停止这种干扰！一个温和的例子如下：

```
EnableClientScript="true">
</asp:RangeValidator>           

<%--                
<br />
<cc1:TimePicker ID="StartTimePicker" runat="server" 
ToolTipText="Choose a time." AccessKey="i" TimeLabelText="* T<u>i</u>me " 
```

……变成了……

```
EnableClientScript="true">
</asp:RangeValidator><%--                
<br />
<cc1:TimePicker ID="StartTimePicker" runat="server" 
ToolTipText="Choose a time." AccessKey="i" TimeLabelText="* T<u>i</u>me " 
```

我见过更糟糕的，但这是一个典型的例子。

如果这很重要，为什么要这样做？更重要的是，是否有一些设置阻止它做这种事情？这种将元素的文本混合在一起不会影响运行时的页面外观，但它会让我更难用我的肉眼在代码中找到东西。

**编辑添加：**

在@RouteMapper 的提示之后，我找到了一个可以为 HTML 格式化进行格式设置的地方：

工具 > 选项 > 文本编辑器 > HTML > 格式化 > 标记特定选项 > ASP.NET 控件

由于 asp:CustomValidator 不在列表中，我使用 New Tag 添加它，然后编辑标签格式。特别是我将它设置为在结束标记后有 2 个换行符。我以为这会做到。

不，它没有生效。在构建时，代码编辑器像往常一样将下一个控件塞回它上面。退出 VS 并重新启动没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:34:44.850

因为 Microsoft 的 Visual Studio 开发人员认为他们拥有 One True Code Layout Standard。对于 VS（VS 2008+？）的“最新版本”，您可以调整一堆编辑器设置（工具..选项..文本编辑器）。

您需要调整 HTML 编辑器和 C#/VB 的设置。

我和你在一起，朋友：我关心我的代码的外观，并花时间让它对人类可读。我不需要我的编辑为我“修复”事情。它和微软公正诽谤的 Clippy 一样糟糕。但我离题了。

如果向下钻取，您可以调整 HTML、CSS 以及 C# 和 VB 的格式设置规则。如果您深入了解 HTML 选项，您还可以控制标准 ASP.Net 控件在每个标记的基础上发生的情况。您可能要确保清除的一个选项是工具..选项..文本编辑器..HTML..杂项下的“粘贴时格式化 HTML”复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:07:56.570

它究竟什么时候会影响格式？在编辑期间或保存/关闭/重新打开文件时？

您是否有机会按自动格式化快捷键 Ctrl + K, Ctrl +D ？

当您按下自动格式化快捷方式时，您可以更改 Visual Studio 格式化文档的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:02:16.220

Visual Studio 将自动格式化您的代码，因为它使代码美观。时期。

有处理它的设置。您可以在此处找到 C# 的这些设置：

工具 > 选项 > 文本编辑器 > C# > 格式化

# sql-server - 运行此 sql 查询时出现 500 错误

> ID：16199031
> 
> 赞同：0
> 
> 时间：2013-04-24T17:58:55.203
> 
> 标签：sql-server, sql-server-2008, coldfusion

真的很奇怪它在一天的日期范围内工作，但过去我收到 500 服务器错误。不过，该查询在管理工作室中运行良好。

```
SELECT tblCAPMessages.*, tblCADSNotes.Notes 
FROM tblCAPMessages 
  LEFT JOIN tblCADSNotes ON tblCAPMessages.Identifier = tblCADSNotes.Identifier 
WHERE tblCAPMessages.MsgSent BETWEEN {ts '2013-04-23 10:15:00'} AND {ts '2013-04-23 11:15:59'} 
ORDER BY MsgSent, tblCAPMessages.Identifier 
```

这是冷融合代码，这是所有遗留代码。我不久前继承了这个系统，但还不知道它的一切。我被告知该页面大约在一个月前工作，但我没有看到任何证据。

```
<CFQUERY NAME="GetIncidents" DATASOURCE="#CADS_Datasource#" CachedWithin="#CreateTimeSpan(0,1,0,0)#">
    SELECT  #CADS_Table#.*, tblCADSNotes.Notes  
    FROM    #CADS_Table# LEFT JOIN tblCADSNotes ON #CADS_Table#.Identifier = tblCADSNotes.Identifier
    WHERE   
            #CADS_Table#.MsgSent BETWEEN #Stdate# AND #Enddate# 
            <CFIF IsDefined("attributes.IncidentID")>
                AND #CADS_Table#.IncidentID = #attributes.IncidentID# 
            </CFIF>

            <CFIF IsDefined("attributes.ReportCriteria")>
                <CFLOOP LIST="#attributes.ReportCriteria#" INDEX="criteria">
                    AND #CADS_Table#.#criteria# = '#evaluate( "attributes." & criteria )#'
                </CFLOOP>
            </CFIF>

            <CFIF IsDefined("attributes.Group")>
                    AND #CADS_Table#.DispatchGroup ='#TRIM(attributes.DispatchGroup)#'
            </CFIF>

            <CFIF IsDefined("attributes.ID")>
                    AND #CADS_Table#.Identifier >='DIV#TRIM(attributes.Identifier)#'
            </CFIF>

            <CFIF IsDefined("attributes.Division")>
                AND ( (0=1)
                <CFLOOP LIST="#attributes.Division#" INDEX="criteria">
                    OR (#CADS_Table#.Division = '#criteria#')
                </CFLOOP>
                )
            </CFIF>
    ORDER BY MsgSent, #CADS_Table#.Identifier   
</CFQUERY>

<TABLE Width="100%">
    <TR>
        <TD Align="CENTER">
            <FONT Color="red"><H3>Complete CADS Event Report</H3></FONT>
        </TD>
    </TR>
</TABLE>

    <TABLE Align="Center" Border="1">
    <TR bgcolor="Silver">
        <TH CLASS="ReportHeaderCell">MsgSent</TH>
        <TH CLASS="ReportHeaderCell">Identifier</TH>
        <TH CLASS="ReportHeaderCell">MsgType</TH>
        <TH CLASS="ReportHeaderCell">TenCode</TH>
        <TH CLASS="ReportHeaderCell">Severity</TH>
        <!--- <TH CLASS="ReportHeaderCell">Certainty</TH> --->
        <TH CLASS="ReportHeaderCell">Status</TH>
        <!--- <TH CLASS="ReportHeaderCell">Division</TH> --->
        <TH CLASS="ReportHeaderCell">DispatchGroup</TH>
        <TH CLASS="ReportHeaderCell">DutyPost</TH>
        <TH CLASS="ReportHeaderCell">Change</TH>
        <TH CLASS="ReportHeaderCell">CountyCode</TH>
    </TR>
    <CFIF GetIncidents.RecordCount NEQ 0>
        <CFOUTPUT QUERY="GetIncidents">
            <TR>
                <TD Align="center">#DateFormat(MsgSent,"mm/dd/yyyy")#<BR>#TimeFormat(MsgSent,"h:mmtt")#</TD>
                <TD Align="center"><FONT Color="Blue">#TRIM(Identifier)#</FONT></TD>
                <TD Align="center">
                    <CFIF TRIM(MsgType) EQ "Alert">
                        <FONT Color="Red"><B>#TRIM(MsgType)#</B></FONT>
                    <CFELSEIF TRIM(MsgType) EQ "CANCEL">
                        <FONT Color="Green"><B>#TRIM(MsgType)#</B></FONT>
                    <CFELSE>
                        <B>#TRIM(MsgType)#</B>
                    </CFIF>
                </TD>
                <TD Align="center">#TRIM(TenCode)#</TD>
                <TD Align="center">#TRIM(SeverityType)#</TD>
                <!--- <TD>#TRIM(Certainty)#</TD> --->
                <TD Align="center">
                    <CFIF TRIM(CADStatus) EQ "Waiting">
                        <FONT Color="Red"><B>#TRIM(CADStatus)#</B></FONT>
                    <CFELSEIF TRIM(CADStatus) EQ "Cleared">
                        <FONT Color="Green"><B>#TRIM(CADStatus)#</B></FONT>
                    <CFELSEIF TRIM(CADStatus) EQ "">
                        &nbsp;
                    <CFELSE>
                        <B>#TRIM(CADStatus)#</B>
                    </CFIF>
                </TD>
                <!--- <TD>#TRIM(Division)#</TD> --->
                <TD Align="center">#TRIM(DispatchGroup)#</TD>
                <TD Align="center">
                    <CFIF TRIM(DutyPost) EQ "">
                        &nbsp;
                    <CFELSE>
                        #TRIM(DutyPost)#
                    </CFIF>
                </TD>
                <TD Align="center">
                    <CFIF TRIM(ChangeAudit) EQ "">
                        &nbsp;
                    <CFELSE>
                        #TRIM(ChangeAudit)#
                    </CFIF>
                <TD Align="center">
                    <CFIF TRIM(Jurisdiction) EQ "">
                        &nbsp;
                    <CFELSE>
                        #TRIM(Jurisdiction)#
                    </CFIF>
                </TD>
            </TR>
            <TR>
                <TD ColSPAN="12">
                    <B>HEADLINE:</B> #TRIM(Headline)#<BR>
                    <B>DESCRIPTION:</B> #TRIM(AreaDescription)#<BR>
                    <B>NOTE:</B> #TRIM(Note)#                   
                    <CFIF Notes NEQ "">
                        <CFSET NotesReplaced = Trim(Replace( Notes, "&##39", "","ALL" ))>
                        <CFSET NotesReplaced = Replace( NotesReplaced, """", "","ALL" )>
                        <CFSET NotesReplaced = Replace( NotesReplaced, CrLf, "<BR>","ALL" )>                    
                        <BR>Dispatcher Notes:  #NotesReplaced#
                    </CFIF>
                </TD>
            </TR>
            <TR>
                <TD ColSPAN="12" bgcolor="##0033FF">&nbsp;</TD>
            </TR>
        </CFOUTPUT>
    <CFELSE>
        <TR>
            <TD ColSPAN="12" Align="Center">No CADS messages found!</TD>
        </TR>
    </CFIF> 
</TABLE> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:37:37.650

事实证明这不是代码或数据库问题。我进入 Coldfusion 管理员并更改了此最大 JVM 堆大小 (MB)，将其设置为 512，将其翻倍，现在一切正常。

# spring - SpringBeanAutowiringInterceptor-created context 中容器中的 EntityManager

> ID：16199033
> 
> 赞同：1
> 
> 时间：2013-04-24T17:59:12.777
> 
> 标签：spring, hibernate, jpa, ejb, entitymanager

我有一个注释如下的 EJB：

```
@Stateless
@Interceptors(SpringBeanAutowiringInterceptor.class) 
```

`SpringBeanAutowiringInterceptor`创造了一个，而`ClassPathXmlApplicationContext`后者又创造了一些`@Component`s。其中一个`@Component`是 DAO，因此喜欢被`EntityManager`注入。最好这应该是 EJB 的容器管理`EntityManager`（根据我目前的见解）。

如果我将以下内容添加到 EJB 中，则效果很好：

```
@PersistenceContext
EntityManager entityManager; 
```

但是，如果我在我的 DAO 上执行后者（在 Spring 中，它是它自己的上下文），那是行不通的。不管我是否明确地喊出单位名称（`unitName="test"`, " `No bean named 'test' is defined`" 与 " `No unique bean of type [javax.persistence.EntityManagerFactory]`"）。

我`jee:jndi-lookup`在 Spring 中尝试过，但我不知道如何使实体管理器在 JNDI 中可用以使其正常工作。是否应该以某种方式在我的`persistence.xml`或什至在另一个层面上完成？

我在 JBOSS 中运行所有这些作为 Arquillian 测试，但我的目标环境是 WAS。因此，我也应该避免使用特定于容器的解决方案。这不是一个 WAR 项目，而是将 EJB JAR 压缩到 EAR 中。

我想我在这里寻找一般概念或最佳实践，以推动我前进。（因此我限制了问题中包含的代码数量，但如果有帮助，我很乐意分享一些细节。）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:19:01.287

将以下内容添加到您的 Spring Config

```
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" /> 
```

# perl - BioPerl 模块 Bio::DB::EntrezGene 不再工作

> ID：16199037
> 
> 赞同：1
> 
> 时间：2013-04-24T17:59:29.717
> 
> 标签：perl, bioinformatics, bioperl

我一直在使用[`Bio::DB::EntrezGene`](https://metacpan.org/module/Bio::DB::EntrezGene)模块 from[`BioPerl`](https://metacpan.org/module/BioPerl)来检索给定数字 ID 的 Entrez 基因名称。

这工作了几个月，最近就在两周前。不过，最近它只返回一个错误。

（对我来说）最奇怪的是，即使我只是运行文档中的示例代码，也会发生这种情况。例如，如果我运行这个：

```
#!/usr/bin/perl

use strict;
use warnings;
use Bio::DB::EntrezGene;

my $db = Bio::DB::EntrezGene->new;

my $seqio = $db->get_Stream_by_id([2, 4693, 3064]); # Gene ids
    while ( my $seq = $seqio->next_seq ) {
            print "id is ", $seq->display_id, "\n";
    }

exit; 
```

我明白了：

```
Replacement list is longer than search list at /Library/Perl/5.12/Bio/Range.pm line 251.
UNIVERSAL->import is deprecated and will be removed in a future perl at /Library/Perl/5.12/Bio/Tree/TreeFunctionsI.pm line 94
Data Error: none conforming data found on line 1 in /var/folders/2f/55z0d46n3l10bq650j6svgw89rmqw1/T/mkguvw1MOO/VR86iPUDSJ!
first 20 (or till end of input) characters including the non-conforming data:
::= {
  {
    track-
 at /Library/Perl/5.12/Bio/SeqIO/entrezgene.pm line 171 
```

如果有人对可能发生的事情以及如何解决它有任何想法，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:04:03.353

您似乎在此模块所依赖的数据中有错误。这个文件夹里有什么？

```
/var/folders/2f/55z0d46n3l10bq650j6svgw89rmqw1/T/mkguvw1MOO/VR86iPUDSJ! 
```

它是如何产生的？

* * *

**更新**

你可能很高兴知道我也犯了同样的错误。数据是从互联网上下载的，来源已损坏。我不知道该联系谁，但这就是问题所在。

# codeigniter - 启用 CI 分析器会导致 json 解析错误

> ID：16199040
> 
> 赞同：0
> 
> 时间：2013-04-24T17:59:31.600
> 
> 标签：codeigniter

我有这样的 CI 探查器： $this->output->enable_profiler(TRUE) 在我的控制器中。

这给出了 JSON.parse: unexpected non-whitespace character 错误。当我关闭分析器时，它就可以了。

我发现 ajax 响应文本也有分析器信息。

有人可以启发我吗。如何在 CI 中打开分析器并避免 jason 解析错误。提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:21:09.693

我在我的核心控制器类中这样做（扩展 CI_Controller 并且是我所有应用程序控制器的父类）：

```
if(!$this->input->is_ajax_request()) {
    $this->output->enable_profiler(TRUE);
} 
```

你也可以放：

```
$this->output->enable_profiler(FALSE); 
```

在您的 ajax 控制器方法中，因此该方法不包括探查器数据/字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-28T00:16:42.797

首先，是的，我知道这个问题已经有 4 年的历史了，但是从 2013 年到 2017 年，Ajax 调用在我们的网站/网络系统上变得更加流行，并且没有关于服务器端性能的反馈不是一种选择对我来说，这就是我所做的：

application\core\MY_Controller.php：（将分析器加载为库）

```
<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class MY_Controller extends CI_Controller {

    public function __construct(){
        parent::__construct();
        if(ENVIRONMENT === 'development'){
            $this->load->library('profiler'); //(don't use: $this->output->enable_profiler(FALSE), use it as a library!)
        }
    }
} 
```

何时何地你需要它得到输出，就像：（记住扩展 MY_Controller 而不是 CI_Controller）

```
<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Somecontroller extends MY_Controller {

    function ajaxCall()
    {
        // Do some stuff
        $ret = array(
            'something' => 'yada yada yada',
            '_profiler' => $this->profiler->run()
            );
        header("Content-type:application/json");
        return print(json_encode($ret));
    }

} 
```

现在在您的 Javascript 中附加探查器输出，而不会破坏您的 JSON 结构：

```
<script>
    var ajaxReturn; // Your prefered ajax call (native JS or jQuery or wathever)
    if ( typeof ajaxReturn === 'string') {
        ajaxReturn = JSON.parse(ajaxReturn);
    }
    //-- Do some stuff
    //-- Append the profiler output
    document.getElementByTagName('body')[0].append(ajaxReturn._profiler); //-- or jQuery: $('body').append(ajaxReturn._profiler);
</script> 
```

最后注意事项：

当然，这种方法会使用用于分析器的大量 HTML 来污染您的 ajax 调用，所以永远不要让这个分析器在 PRODUCTION 中处于活动状态，即使在 DEVELOPMENT 中，只要在您实际分析应用程序时使用它，否则您可能会更好没有它。

希望它对其他人有帮助，因为它对我有用。

# python - 是否有 Python 等效的 shell 命令 `cp -r `?

> ID：16199042
> 
> 赞同：0
> 
> 时间：2013-04-24T17:59:38.193
> 
> 标签：python, shell, command-line

在 bash 中，如果我有一个目录`foo`但没有目录`bar`，那么命令

> cp -r foo bar

将创建目录`bar`，该目录将包含`foo`. 与此等效的 Python 是`shutil.copytree("foo", "bar")`.

但是，如果我有一个目录`foo`和一个目录`bar`，那么命令

> cp -r foo bar

`foo`将在下面创建一个`bar`包含所有内容的新目录`foo`。

有没有与此等效的 Python

> `os.system` a) 使用或调用实际命令
> 
> b）手动提取目录的基本名称`foo`，将其附加到 bar using `os.path.join`，然后运行`copytree`

也就是Python有复制**到**目录的概念吗？

更新：这两个“重复”问题都有不复制“到”目录而是“复制”目录的解决方案。使用此类解决方案将需要手动提取目录的基本名称，将`foo`其附加到. 我正在明确寻找不需要这个的解决方案。`bar``distutils.dir_util.copy_tree`

如果`bar`已经存在，`cp -r foo bar`将创建一个包含所有内容的新`foo`内部。另一方面将把所有东西都放在里面而不创建一个新的.`bar``foo``distutils.dir_util.copy_tree``foo``bar``foo`

# google-app-engine - 生成 Cloud Endpoint 遇到错误且未完成

> ID：16199053
> 
> 赞同：3
> 
> 时间：2013-04-24T18:00:06.593
> 
> 标签：google-app-engine, google-cloud-endpoints, gae-eclipse-plugin

标题行是当我右键单击我的项目到`Google > Generate Cloud Endpoint Client Library`. 我可以正常运行端点，`Web Application`因此我或编译器可以检测到的代码中没有错误。有谁知道为什么会发生错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:32:13.103

目前，Google Cloud Endpoints 似乎普遍存在问题。

按照这个 Stackoverflow 问题：[生成谷歌云端点客户端库时出错](https://stackoverflow.com/questions/16158013/error-generating-google-cloud-endpoint-client-libraries)

并与 Google 代码相关的问题：[https ://code.google.com/p/googleappengine/issues/detail?id=9214](https://code.google.com/p/googleappengine/issues/detail?id=9214)

# windows-phone-8 - 如何在 Windows Phone 8 上扩展 Internet Explorer 的共享选择器？

> ID：16199055
> 
> 赞同：5
> 
> 时间：2013-04-24T18:00:09.617
> 
> 标签：windows-phone-8

我现在正试图弄清楚如何轻松共享从 IE 到我的应用程序的链接。我试图弄清楚如何扩展 Internet Explorer 的共享选择器。
例如，在WP8上运行IE时，可以调出底部菜单，点击“分享页面”。在此菜单中，我想将我的应用程序添加为选项。选择后，我希望它将当前页面的 URL 发送到我的应用程序。

我发现[了这一点](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff967563%28v=vs.105%29.aspx)，但该示例仅扩展了照片应用程序的共享选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:30:00.687

无法以这种方式扩展 IE mobile 中的共享选项。

# python - pygame 和 QlineEdit 框错误

> ID：16199057
> 
> 赞同：1
> 
> 时间：2013-04-24T18:00:16.483
> 
> 标签：python, pygame, qlineedit

我找到了一个游戏：memory.py [here](http://joel-murielle.perso.sfr.fr/)（向下滚动）或[直接链接](http://joel-murielle.perso.sfr.fr/memory.py)或[快照](http://webcache.googleusercontent.com/search?q=cache%3ahttp://joel-murielle.perso.sfr.fr/memory.py)。

我正在修改它。我要做的第一件事是从 QlineEdit 框中设置等待时间。

我改变了这个：

```
pygame.time.wait(500) 
```

对此：

```
pygame.time.wait(self.ui.lineEdit.text()) 
```

并得到了他的错误：

```
pygame.time.wait(self.ui.lineEdit.text()) typeError: delay requires one integer argument 
```

然后我用：

```
pygame.time.wait(int(self.ui.lineEdit.text())) 
```

并得到了他的错误：

```
ValueError: invalid literal for int() with base 10: '' 
```

我不知道该怎么办，有人知道如何解决这个问题吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:13:51.027

文本框返回一个空字符串。您应该首先检查字符串是否为空。

```
text = self.ui.lineEdit.text()
if text:
    time= 0 #or some default value if no time is specified
else
    time = int(text)
pygame.time.wait(time) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T13:31:24.057

@salva Nicolas 是对的。

最好的检查方法是检查是否输入了文本。虽然这有问题。

如果你只是在行编辑中输入一个空格，你会得到一个错误。它仍然不是一个万无一失的方法。

要检查是否在 QLineEdit 中输入了有效文本，您需要使用验证器。

或者

您可以尝试使用 try 将 qlineedit 转换为整数或浮点数，如果它引发异常，您可以执行其他操作。

```
try:
    x_min=ast.literal_eval(str(self.ui.x_min_3d.text())) # Try to convert
except:
    x_min=0 # else do something else 
```

# java - 反转 ArrayList 中每个条目中的字符顺序

> ID：16199060
> 
> 赞同：0
> 
> 时间：2013-04-24T18:00:25.940
> 
> 标签：java, arraylist

我有一个包含多个条目的 ArrayList，我想颠倒顺序或字符，所以如果我的代码如下所示：

```
public class Test {

ArrayList<String> aa = new ArrayList<String>();

aa.add("hello");
aa.add("goodbye");

(reverse them in some way)

} 
```

那么我希望 ArrayList 包含的是：

```
olleh
eybdoog 
```

我只设法用 Collections.reverse 更改了整个 ArrayList 中条目的顺序，但这并没有达到我想要的效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:07:27.240

该类（可变字符串）包含一个反向操作，用于切换 StringBuilder[`StringBuilder`的](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)字符。

```
int size = aa.size();
for(int i = 0; i < size; ++i)
{
    StringBuilder builder = new StringBuilder(aa.get(i));
    builder.reverse();    //reverse the StringBuilder
    aa.set(i, builder.toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:10:56.883

快速而肮脏的版本 - 改变`Strings`原来的内部`ArrayList`：

```
for(int i = 0; i < aa.size(); i++) {
    aa.set(i, new StringBuilder(aa.get(i)).reverse().toString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:12:03.100

这是一个线性时间实现，在适当的位置修改列表。

```
public void reverseStr(List<String> theArgs) {
   for(int i = 0; i < theArgs.size(); i++) {
       String s = theArgs.get(i);
       theArgs.set(i, new StringBuffer(s).reverse().toString());
   }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-24T18:08:18.303

像这样做：

[反转字符串的最佳方法](https://stackoverflow.com/questions/228038/best-way-to-reverse-a-string)

```
 static void Main(string[] args)
    {
        var aa = new List<String>();

        aa.Add("hello");
        aa.Add("goodbye");

        var x = from s in aa select Reverse(s);

        foreach (var c in x)
            Console.WriteLine(c.ToString( ));

        Console.ReadLine();
    }

    public static string Reverse(string s)
    {
        char[] charArray = s.ToCharArray();
        Array.Reverse(charArray);
        return new string(charArray);
    } 
```

# javascript - Asp.net 渲染控件-> javascript 错误

> ID：16199064
> 
> 赞同：0
> 
> 时间：2013-04-24T18:00:41.747
> 
> 标签：javascript, asp.net, webforms, google-visualization, rendercontrol

我有一个用户控件，其中包含来自 Google 图表 api 的一些图表。

当用户控件被服务器加载和呈现时，一切都按预期工作。但是，当我使用 ajax webservice 渲染控件异步并使用 ajax 返回 html 并将其添加到页面时，我在 firebug 中遇到一些脚本错误（chrome 将其称为 ReferenceError）：

> “谷歌未定义”

![图片](https://i.stack.imgur.com/QmZiC.png)

我的项目是带有一些 javascript 的 ASP.Net MVP Webforms。
**我制作了一个示例项目，在其中重新创建了问题。[在这里下载](https://dl.dropboxusercontent.com/u/2084871/TestControlRendererGoogleChartApi.zip)。**

控制渲染器代码：

```
public virtual string RenderControlToString(string path, bool htmlEncode)
{
    StringWriter stringWriter = new StringWriter();
    this.RenderControl(path, (TextWriter)stringWriter);
    string s = stringWriter.ToString();
    if (!htmlEncode)
        return s;
    else
        return HttpContext.Current.Server.HtmlEncode(s);
}

public virtual void RenderControl(string path, TextWriter writer)
{
    var page = new PageForRendering();
    page.Controls.Add(page.LoadControl(path));
    HttpContext.Current.Server.Execute((IHttpHandler)page, writer, true);
} 
```

（省略“需要在表单中”错误 - 控件添加到的页面上有一个表单）

```
public class PageForRendering : Page
{
    public override void VerifyRenderingInServerForm(Control control)
    {}
} 
```

用户控件上的脚本：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    console.log("Loading Google Charts...");
    google.load('visualization', '1.0', { 'packages': ['corechart'] });
    console.log("Google Charts loaded!");

    google.setOnLoadCallback(function () {
        ...some code...
    });
</script> 
```

使用 firebug，我发现[https://www.google.com/jsapi](https://www.google.com/jsapi)加载正常，但只打印了我的第一个控制台日志。

我认为这可能是某种范围问题... google 变量将在此脚本中定义：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

但在这种情况下，它在下一个脚本块中是不可访问的。通过正常渲染，它可以正常工作。要么脚本在 google.load 调用之前没有完成加载，要么 google 变量现在以某种方式定义在另一个范围内，因为呈现方法不同。

如果我查看 firebug DOM，google 变量的定义如下[所示](https://stackoverflow.com/questions/5556953/google-is-not-defined-using-google-visualization-api-possibly-jquerys-fault)。但是我发现如果我在 line: 处放置一个断点`google.load('visualization', '1.0', { 'packages': ['corechart'] });`，我发现此时 google 变量没有在 DOM 中定义。所以它也可能是关于加载脚本的一些想法。但是该行在`<script type="text/javascript" src="https://www.google.com/jsapi"></script>`它之前，应该同步执行，对吗？当我在 firebug 中检查网络时，我还发现文件已正确下载。

我可能还需要提到加载 ajax 代码的用户控件如下所示：

```
<div id="statisticsContent">&nbsp;</div>

<script type="text/javascript">
    $(document).ready(function () {
        function getStatisticsView() {
            var id = $(".chooseStatisticsToShow input:radio:checked").val();
            var statisticsType = (id == $(".choosePlayingGroupDropDownList option:selected").val() ? 1 : 0);

            $.ajax({
                cache: false,
                global: false,
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: '/Services/StatisticsService.svc/GetStatisticsView',
                data: JSON.stringify({
                    statisticsType: statisticsType,
                    id: id
                }),
                success: function (data) {
                        $("#statisticsContent").html(data.d.ViewHtml);
                }
            });
        }
        getStatisticsView();

        $(".chooseStatisticsToShow").change(function () {
            getStatisticsView();
        });
    });
</script> 
```

**我制作了一个示例项目，在其中重新创建了问题。[在这里下载](https://dl.dropboxusercontent.com/u/2084871/TestControlRendererGoogleChartApi.zip)。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:43:29.623

在您的服务发送响应并使用`$("#statisticsContent").html(data.d.ViewHtml);`浏览器添加响应后，它会解释 html 并开始并行加载和执行脚本。我怎么知道？只是经验-在我的项目中，每次我尝试注入`<script src='...'>`浏览器时都不会等待脚本加载，并且`script`带有自定义代码的下一个标签会立即执行。

这是您的情况，您需要等待`jsapi`加载，然后才执行将加载包并执行图表渲染的代码。这是代码：

```
<div id="chart_div"></div>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    waitForGoogleApiAndLoadPackages();
    function waitForGoogleApiAndLoadPackages() {
        if (typeof (google) === 'undefined')
            setTimeout(waitForGoogleApiAndLoadPackages, 100);
        else {
            google.load('visualization', '1.0', { 'callback': 'renderChart', 'packages': ['corechart'] });
        }
    }

    function renderChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([['Mushrooms', 3], ['Onions', 1], ['Olives', 1], ['Zucchini', 1], ['Pepperoni', 2]]);

        var options = { 'title': 'How Much Pizza I Ate Last Night', 'width': 400, 'height': 300 };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    }
</script> 
```

另一个有趣的部分是功能`else`块`waitForGoogleApiAndLoadPackages`。这是[为什么 google.load 会导致我的页面变为空白？](https://stackoverflow.com/questions/9519673/why-does-google-load-cause-my-page-to-go-blank)问题。

* * *

引用[为什么 google.load 会导致我的页面变为空白？](https://stackoverflow.com/questions/9519673/why-does-google-load-cause-my-page-to-go-blank)：

> 看起来 google.load 正在使用 document.write() 将脚本添加到页面，如果在页面加载后使用，则会清除 html。

# python - 模拟对象进入 Django 单元测试

> ID：16199069
> 
> 赞同：3
> 
> 时间：2013-04-24T18:00:48.667
> 
> 标签：python, django, unit-testing, mocking, django-testing

**编辑：**这最初不起作用，因为导入使用不同的导入到视图和模拟中。我`project.app.views.Model`在测试模拟中使用过，而在导入中`views.py`实际上是`app.views.Model`.

因此这个问题实际上得到了解决，但这个问题可能对其他人有用，因为它强调了在模拟中导入一致性的必要性。（Michael Foord（模拟创作者）在他的[演讲](https://www.youtube.com/watch?v=yFA-FFaEZPo)中提到的东西）。

这个问题围绕着模拟 Django 模型管理器返回 factory_boy 对象的方法，从而避开数据库。我有一个“目的地”模型：

```
class Destination(models.Model):
    name = models.CharField(max_length=50)
    country = models.CharField(max_length=50) 
```

和一个基于 DestinationView 类的视图。在其中，我尝试使用 url 提供的名称来检索数据库对象：

```
from app.models import Destination

class DestinationView(View):

    def get(self, request, **kwargs):

        [snip - gets the name from the URL request]

        try:
            destination = Destination.objects.get(name=name)
        except:
            return HttpResponse('No such destination', status=400) 
```

我现在想模拟上面的单元测试。我为我的单元测试使用[factory_boy](https://github.com/dnerdy/factory_boy)实例将它们从数据库中取出，并试图在调用时将其中一个作为[return_value](http://www.voidspace.org.uk/python/mock/mock.html#mock.Mock.return_value)`get`交还：

```
def test_mocked_destination(self):
    with patch('app.views.Destination') as mock_destination:
        rf = RequestFactory()
        mock_destination.objects.get.return_value = DestinationFactory.build()
        request = rf.get('/destination/', {'destination': 'London'})
        response = DestinationView.as_view()(request) 
```

然而，这并没有按计划工作，因为假模拟似乎永远不会被调用。如何正确覆盖`Destination`对象的`get()`return_value 以便从数据库中模拟出整个视图？

# ruby - 无法安装 posix-spawn

> ID：16199070
> 
> 赞同：0
> 
> 时间：2013-04-24T18:00:50.900
> 
> 标签：ruby, xcode, gem

我通过 安装了 Xcode 4.6.2 命令行工具`Xcode > Preferences > Downloads > Components > Command Line Tools`，它的状态是“已安装”，但是在重新启动我的 mac 后，在 Mac OS 10.8.3 上运行，我没有`/Developer`文件夹，当我尝试运行时`sudo gem install posix-spawn`出现此错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing posix-spawn:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
creating Makefile

make
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common  -Wall   -c posix-spawn.c
xcrun: Error: could not stat active Xcode path '/Developer'. (No such file or directory)
cc -arch i386 -arch x86_64 -pipe -bundle -undefined dynamic_lookup -o posix_spawn_ext.bundle posix-spawn.o -L. -L/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib -L. -arch i386 -arch x86_64     -lruby  -lpthread -ldl -lobjc
clang: error: no such file or directory: 'posix-spawn.o'
make: *** [posix_spawn_ext.bundle] Error 1

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/posix-spawn-0.3.6 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/posix-spawn-0.3.6/ext/gem_make.out 
```

[其他问题](https://stackoverflow.com/questions/9552292/failed-to-build-gem-native-extension)建议安装 Xcode 命令行工具，但我已经这样做了。`/usr/bin/gcc-4.2`存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:51:17.153

解决方案是运行`sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/`，然后`sudo gem install posix-spawn`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-23T07:54:17.147

重新安装 Xcode 对我有用。运行`xcode-select --install`然后使用`gem install posix-spawn`.

# java - 如何根据元数据中的横向纵向信息禁用 html 中 img 的自动旋转？

> ID：16199072
> 
> 赞同：0
> 
> 时间：2013-04-24T18:00:53.153
> 
> 标签：java, html, image, metadata, landscape-portrait

我有用 iPhone 拍摄的照片。因此，他们的元数据中有横向纵向信息。这些照片会被保存，以便在使用 mspaint 打开时它们可以正确旋转。当我们在网站中使用这些图像时，就会出现问题。可以从 iPhone 上毫无问题地查看网站中的图像。然而，我笔记本电脑中的 chrome 浏览器使用这些元数据并再次尝试更正旋转。由于我们已经处理了肖像照片被视为向左旋转的问题。如何根据元数据中的横向纵向信息禁用 html 中 img 的自动旋转？顺便说一句，如果我使用没有任何元数据信息网页的照片，可以在 iPhone 和 chrome 中查看没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-30T15:52:41.477

有一种非常干净的方法可以解决这个问题。安装 ImageMagick 并使用命令行：

`mogrify -strip yourpicture.jpg`

这将删除exif信息。

如果您有更多图片，请运行：

```
for i in *.jpg; do
    mogrify -strip $i
done 
```

# http - 是否可以使用 HTTP 协议连接计算机？

> ID：16199079
> 
> 赞同：-4
> 
> 时间：2013-04-24T18:01:17.767
> 
> 标签：http, networking, ip-address, http-protocols

让我们看看我有一个

> GSM调制解调器

连接到一个`computer that having a valid Static IP Address`. 现在作为一名 PHP 开发人员，我想`connect to that computer and have to listen the COM1 port`。这正是我正在寻找的。

这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:10:51.813

```
telnet {remote_computer's_ip_address} 80
telnet> get / 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:27:27.723

当您通过浏览器点击某个页面时，您所写的内容总是完成 ;-) 正是您的计算机使用 HTTP 协议连接到 Web 服务器。所以我猜您正在寻找类似 HTTP 上的远程桌面之类的东西？所以 AFAIK 你有两个选择写你自己的网络服务器/客户端软件来完成这个任务，或者你可以做一些隧道（如果它只是开放端口/协议的米）。

# ios - 无限会话与 facebook ios sdk FBLoginView

> ID：16199080
> 
> 赞同：1
> 
> 时间：2013-04-24T18:01:18.360
> 
> 标签：ios, objective-c, facebook

我正在首次尝试将 FB 与 iOS SDK 集成。

到目前为止，我已经成功地与我的 fb 应用程序建立了连接`FBLoginView`。

这是我相应的调用：

```
-(void)loginViewShowingLoggedInUser:(FBLoginView *)loginView{
   NSLog(@"logged in");
}
-(void)loginViewShowingLoggedOutUser:(FBLoginView *)loginView{
   NSLog(@"logged out");
   [FBSettings setLoggingBehavior:[NSSet setWithObjects:FBLoggingBehaviorFBRequests, nil]];
   if (FBSession.activeSession.isOpen) {
      [FBRequestConnection startForMeWithCompletionHandler:^(FBRequestConnection *connection,id<FBGraphUser> user,NSError *error) {
         if (!error) {
            NSString *fbID = user.id;
            NSLog(@"UserID: %@",fbID);
            NSLog(@"TESTING: %@",user.name);
         }
      }];
   }
}
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                            user:(id<FBGraphUser>)user {
   NSLog(@"Hello %@!", user.first_name);
}
- (void)loginView:(FBLoginView *)loginView handleError:(NSError *)error {
   NSLog(@"FBLoginView encountered an error=%@", error);
} 
```

我有 1 个小问题和 1 个大问题（主题）。

**小**：请求得到满足，我得到了一个很好的日志：

```
Response Body:
(
        {
        body =         {
            gender = male;
            id = ###;
            ...
        };
        code = 200;
    }
) 
```

但不知何故，我的 2 个测试日志没有显示，有什么想法吗？

**大（主题）：**我在我的应用程序的指定控制器中建立了该连接。我的问题是，每次重新启动应用程序时，连接都会以某种方式丢失（会话不再处于活动状态）。有没有办法使用建立无限连接`FBLoginView`？

我在我的 appdelegate 中添加了以下调用和方法：

```
//upon start: 
if (![FBSession activeSession].isOpen) {
  [self connectWithFacebook];
}

- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI
{
   //..  
   return [FBSession openActiveSessionWithReadPermissions:permissions
                                             allowLoginUI:allowLoginUI
                                        completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                           if (error) {
                                              NSLog (@"Handle error %@", error.localizedDescription);
                                           } else {
                                              [FBSession setActiveSession:session];
                                              [self checkSessionState:state];
                                           }
                                        }];
}
- (void) connectWithFacebook {

   [self openSessionWithAllowLoginUI:YES];
}

- (void) checkSessionState:(FBSessionState)state {
   switch (state) {
      case FBSessionStateOpen:
         break;
      case FBSessionStateCreated:
         break;
      case FBSessionStateCreatedOpening:
         break;
      case FBSessionStateCreatedTokenLoaded:
         break;
      case FBSessionStateOpenTokenExtended:
         // I think this is the state that is calling
         break;
      case FBSessionStateClosed:
         break;
      case FBSessionStateClosedLoginFailed:
         break;
      default:
         break;
   }
} 
```

这允许重新登录，但每次打开应用程序时都会再次显示登录屏幕，这不是很用户友好。有没有解决方案，如果是，我错过了什么或我可以朝什么方向前进？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:09:42.250

这是我的实现，保持会话打开 60 天（FB SDK 3.2.1 允许的最大时间）

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI
{
    NSArray *readPermissions = @[@"email",@"friends_birthday",@"friends_likes",@"friends_interests",@"user_birthday",@"user_interests",@"user_likes",@"user_location"];

    return [FBSession openActiveSessionWithReadPermissions:readPermissions
                                                allowLoginUI:allowLoginUI
                                           completionHandler:^(FBSession *session,
                                                               FBSessionState state,
                                                               NSError *error) {
                                               [self sessionStateChanged:session
                                                                   state:state
                                                                   error:error];
                                           }];
}

- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState)state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen: {
            // We have a valid session
            NSLog(@"User session found");
            if (FBSession.activeSession.isOpen) {
                [FBRequestConnection
                 startForMeWithCompletionHandler:^(FBRequestConnection *connection,
                                                   id<FBGraphUser> user,
                                                   NSError *error) {
                        if (!error) {
                            NSLog(@"accessToken: %@ userID: %@",[FBSession activeSession].accessTokenData.accessToken,user.id);
                            self.userID = user.id;
                            [[NSUserDefaults standardUserDefaults] setValue:user.first_name  forKey:@"first_name"];
                            [[NSUserDefaults standardUserDefaults] setValue:user.last_name  forKey:@"last_name"];
                            NSString *accessToken = [FBSession activeSession].accessTokenData.accessToken;
                            if (accessToken) {
                                [[NSNotificationCenter defaultCenter] postNotificationName:FacebookLoginInProgressNotification object:nil];
                                [self submitFacebookUserID:user.id andAccessToken:accessToken];
                            }
                            else {
                                NSLog(@"no access token for userID: %@",user.id);
                                [[NSNotificationCenter defaultCenter] postNotificationName:FacebookLoginFailureNotification object:nil];
                            }
                        }
                        else {
                            //handle error retrieving User ID
                            NSLog(@"error retrieving User ID [%@]",[error localizedDescription]);
                            [[NSNotificationCenter defaultCenter] postNotificationName:FacebookLoginFailureNotification object:nil];
                        }
                 }];
            } else {
                [FBSession setActiveSession:session];
            }

            // Pre-fetch and cache the friends for the friend picker as soon as possible to improve
            // responsiveness when the user tags their friends.
            FBCacheDescriptor *cacheDescriptor = [FBFriendPickerViewController cacheDescriptor];
            [cacheDescriptor prefetchAndCacheForSession:session];
        }
            break;
        case FBSessionStateClosed: {
            [FBSession.activeSession closeAndClearTokenInformation];
        }
            break;
        case FBSessionStateClosedLoginFailed: {
            [FBSession.activeSession closeAndClearTokenInformation];
        }
            break;
        default:
            break;
    }

    [[NSNotificationCenter defaultCenter]
     postNotificationName:FBSessionStateChangedNotification
     object:session];

    if (error) {
        NSLog(@"Facebook Error %@", error);
    }
} 
```

# jquery - 使用按钮值编辑文本，然后存储在数组中以比较答案

> ID：16199081
> 
> 赞同：0
> 
> 时间：2013-04-24T18:01:21.817
> 
> 标签：jquery, arrays

[http://jsfiddle.net/Victoriamisu/jKvvU/](http://jsfiddle.net/Victoriamisu/jKvvU/)

用户将看到给定的 n 个字母，比如说两个，然后将在小提琴中显示屏幕并单击他们看到的两个字母。

假设首先显示的字母数组是

```
var letters = new Array();
            letters = [
                { seq:  1, correct: 'C', display:"C", response:" "},
                { seq:  2, correct: 'X',  display:"X", response:" "}

            ]; 
```

我想要它，这样当用户单击其中一个按钮时，比如说她单击 C，它会将 C 打印到第一个框中，然后将他/她选择的任何内容打印到小提琴右侧的下一个框中。

之后，单击输入按钮将显示一个新屏幕，将答案与正确答案进行比较。因此 .response 将更新并与 .correct 进行比较。

我可以在我的屏幕数组中加载一个新屏幕，但我该如何做才能存储每个按钮的值作为响应？

我在想类似的东西

```
if( screens[curScreen].lettershow )   // I have the screen set so that it's lettershow:true
                {

            var responseRaw = new String;

            letters[curTrial].response = responseRaw; 
```

并以某种方式使其显示 responseRaw = $("#C").val(); （不确定 val 是否正确，而 C 只是这些按钮中的任何一个的按钮 ID）

此屏幕上的文本将显示正确：您回答了 _ _（无论用户单击了什么）或错误，使用相同的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:13:10.680

我更新了您的 jsfiddle，以便将用户单击的字母添加到右侧面板。 [http://jsfiddle.net/jKvvU/5/](http://jsfiddle.net/jKvvU/5/)

我使用了以下jQuery：

```
$(document).ready(function() {
    $(".btnControlLeft").on("click", function() {
        var letterbox = 1;
        while (letterbox < 7 && $("#" + letterbox).html() != "&nbsp;") {
            letterbox++;
        }

        if (letterbox < 7) {
            $("#" + letterbox).html($(this).attr("id"));
        }
    });
}) 
```

# ruby-on-rails - 删除资源名称并使用 mongoid_slug gem 获得 404 响应

> ID：16199082
> 
> 赞同：0
> 
> 时间：2013-04-24T18:01:24.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, routes, mongoid

```
namespace :blog do
 resources :posts, :only => [:index, :show], :path => "/"
end 
```

如果我写：

```
http://localhost:3000/blog/post1 
```

它工作正常。但是，如果我写：

```
http://localhost:3000/blog/invalid_id_fkdkflskdfl 
```

我在日志中收到 200 响应：

```
Processing by Blog::PostsController#show as HTML
  Parameters: {"id"=>"invalid_id_fkdkflskdfl"}
  MOPED: 127.0.0.1:27017 QUERY        database.............................
Completed 200 OK in 60ms 
```

在我的模型中：

```
class Post
 include Mongoid::Document
 include Mongoid::Slug
 #slug
 slug :title
 #fields
 field :title
end 
```

这是我的动作秀：

```
def show
 @post = Post.find(params[:id])
end 
```

我正在使用[mongoid_slug](https://github.com/digitalplaywright/mongoid-slug)宝石

**`invalid_id_fkdkflskdfl`如果这个 id不存在，为什么我没有收到 404 响应？**

**如何获得 404 响应？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:24:51.957

如果要呈现 404 响应，可能会捕获此异常并引发路由错误。您可以在控制器中执行此操作，例如：

在您的`application_controller.rb`文件中：

```
class ApplicationController < ActionController::Base

  rescue_from Mongoid::Errors::DocumentNotFound, :with => :render_not_found

  def render_not_found
    render file: "#{Rails.root}/public/404", formats: [:html], status: 404, layout: false
  end

  ...

end 
```

我你的`posts_controller.rb`文件：

```
def show
 @post = Post.find(params[:id]) || render_not_found
end 
```

感谢此[链接中的 digitalplaywright](https://github.com/digitalplaywright/mongoid-slug/issues/128)

问候！

# google-drive-api - Google Drive API - 错误 500 - 简单的 API 访问

> ID：16199088
> 
> 赞同：2
> 
> 时间：2013-04-24T18:01:46.557
> 
> 标签：google-drive-api, google-drive-realtime-api

几个月来，我一直在使用 Google Drive API 进行简单访问，以获取有关公开共享文档 ID 的元数据。大约一周前（4 月 16 日）它突然停止工作。

我已经在不同的机器（PC 和 Linux 服务器）上反复尝试使用浏览器、cURL 和 WGET，我什至创建了新的 Google API 帐户来尝试使用不同的 API 密钥，但它 100% 的时间都失败了。

示例请求 URL：

```
https://www.googleapis.com/drive/v2/files/0By7D4SJX3kYEaGpneE1VaUN6OG8?key=MYAPIKEY 
```

回复正文：

```
{
 "error": {
  "code": 500,
  "message": null
 }
} 
```

响应标头：

```
HTTP/1.1 500 Internal Server Error
status: 500 Internal Server Error
version: HTTP/1.1
cache-control: private, max-age=0
content-encoding: gzip
content-length: 66
content-type: application/json; charset=UTF-8
date: Wed, 24 Apr 2013 17:39:49 GMT
expires: Wed, 24 Apr 2013 17:39:49 GMT
server: GSE
x-content-type-options: nosniff
x-frame-options: SAMEORIGIN
x-xss-protection: 1; mode=block 
```

Google Drive 服务器上是否存在其他人不知道的技术问题？我只看到过另一个零反馈的关于这个问题的报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:21:06.813

现在已修复此问题，对此问题深表歉意。

# svg - SVG 缩放的最佳方法是什么？变换比例或视图框？

> ID：16199089
> 
> 赞同：17
> 
> 时间：2013-04-24T18:01:53.087
> 
> 标签：svg

当我双击该区域时，我创建了代码来缩放我的 SVG 区域。我使用了变换比例属性来实现这一点，将当前比例乘以一个因子（例如 1.2 给出 20% 的缩放）。

我可以对[viewbox](http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute)属性的第二个和第三个参数执行相同的操作。减少它们将导致区域元素缩放，反之亦然。

对这两种不同方法的优缺点有何看法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-20T00:25:04.953

我认为 viewbox 在现实世界的应用程序中实际上会更快，而性能基准将指示相反的信息。

## 有点科学的时间：

我创建了一个 jsPerf：http: [//jsperf.com/transform-scale-vs-viewbox-scale](http://jsperf.com/transform-scale-vs-viewbox-scale)

jsPerf 似乎给我的测试用了多长时间的数字不正确，因此会扭曲结果，但这是肯定的：转换测试的代码更短，有 0 个字符串操作，并且在更短的时间内运行了更多次。

*   Transform Scale：运行 150k 次
*   ViewBox 修改：90k 次

显然，变换规模更快。代码看起来更快，测试被破坏，但观察测试运行表明更多的转换运行。但是，我仍然觉得 viewbox 在现实世界的应用程序中更快。

## 为什么？

1.  在任何一种情况下，我都想存储一个单独的对象来指示我的视图框的当前状态。这个单独的对象对于更新范围滑块或当前缩放级别的某些指示器很有用。计算完后写入视图框很容易。
2.  平移仍然需要接触 DOM。
3.  通常在缩放时，您还需要平移到中心位置，这意味着您无论如何都需要弄乱视图框。
4.  它实际上不会影响性能，因为您每秒可以执行很多这样的操作。

结论：电脑速度快；使用视图框；它的工作量更少；在这里优化可能不会给你带来巨大的性能提升。

# scala - 分阶段的 Play 2.1 应用程序在哪里查找配置文件？

> ID：16199091
> 
> 赞同：0
> 
> 时间：2013-04-24T18:01:53.843
> 
> 标签：scala, playframework-2.1

我最近在完成我的 Play 2 项目后遇到了一个令人惊讶的事实。当我暂存应用程序时，我有两个配置文件**application.conf**和**prod.conf**被放置到**target/scala-2.10/staged/classes/**中。当我调用**./start -Dconfig.resource=application.conf**或**./start -Dconfig.resource=prod.conf**时，应用程序会使用指定的配置文件启动。**但是当我从target/scala-2.10/staged/classes/**中删除两个配置文件时**，应用程序仍然启动！**

 **出于这个原因，我认为这些配置文件必须被烘焙到其他地方的应用程序中。应用程序实际上在哪里寻找配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:49:40.213

在 target/staged 文件夹中是所有 JAR 播放使用，包括您的 Web 应用程序的 JAR 和配置文件。**

# php - MySQL 基于页面的查询

> ID：16199097
> 
> 赞同：0
> 
> 时间：2013-04-24T18:02:24.683
> 
> 标签：php, mysql

我目前正在尝试为我正在处理的内容网站开发分页系统。

目前，用户每页将看到 10 个结果。当用户访问[http://www.mydomain.com/page/1](http://www.mydomain.com/page/1)时，它应该显示表中的前 10 个条目。如果他们访问[http://www.mydomain.com/page/2](http://www.mydomain.com/page/2)它应该会显示接下来的 10 个结果。

以下是我当前执行任务的功能，在访问页面时它似乎不起作用 - 有什么想法可能导致这种情况吗？

```
function getPagedPosts() {
$pageid = $_GET[page];
$page = $pageid - 1 * 10;
$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'); 
$db = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options); 
$query = " 
    SELECT *
    FROM content
    LIMIT '$page', 10
"; 

    try 
    { 
        $stmt = $db->prepare($query); 
        $stmt->execute(); 
    } 
    catch(PDOException $ex) 
    { 
        die("Failed to run query: " . $ex->getMessage()); 
    } 

    $rows = $stmt->fetchAll(); 
foreach($rows as $row):
    print '<tr><td><a href="post/' . $row['id'] . '">' . $row['title'] . '</a><div class="sub ' . $row['subject'] . '">' . $row['subject'] . '</div></td></tr>';
endforeach; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:28:36.533

我创建了一个称为分页的函数：

```
<?php

function pagination($query, $per_page = 10,$page = 1, $url = '?'){        
    $query = "SELECT COUNT(*) as `num` FROM {$query}";
    $row = mysql_fetch_array(mysql_query($query));
    $total = $row['num'];
    $adjacents = "2"; 

    $page = ($page == 0 ? 1 : $page);  
    $start = ($page - 1) * $per_page;                               

    $prev = $page - 1;                          
    $next = $page + 1;
    $lastpage = ceil($total/$per_page);
    $lpm1 = $lastpage - 1;

    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<ul class='pagination'>";
                $pagination .= "<li class='details'>Page $page of $lastpage</li>";
        if ($lastpage < 7 + ($adjacents * 2))
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<li><a class='current'>$counter</a></li>";
                else
                    $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))
        {
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class='current'>$counter</a></li>";
                    else
                        $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                }
                $pagination.= "<li class='dot'>...</li>";
                $pagination.= "<li><a href='{$url}page=$lpm1'>$lpm1</a></li>";
                $pagination.= "<li><a href='{$url}page=$lastpage'>$lastpage</a></li>";      
            }
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<li><a href='{$url}page=1'>1</a></li>";
                $pagination.= "<li><a href='{$url}page=2'>2</a></li>";
                $pagination.= "<li class='dot'>...</li>";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class='current'>$counter</a></li>";
                    else
                        $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                }
                $pagination.= "<li class='dot'>..</li>";
                $pagination.= "<li><a href='{$url}page=$lpm1'>$lpm1</a></li>";
                $pagination.= "<li><a href='{$url}page=$lastpage'>$lastpage</a></li>";      
            }
            else
            {
                $pagination.= "<li><a href='{$url}page=1'>1</a></li>";
                $pagination.= "<li><a href='{$url}page=2'>2</a></li>";
                $pagination.= "<li class='dot'>..</li>";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class='current'>$counter</a></li>";
                    else
                        $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                }
            }
        }

        if ($page < $counter - 1){ 
            $pagination.= "<li><a href='{$url}page=$next'>Next</a></li>";
            $pagination.= "<li><a href='{$url}page=$lastpage'>Last</a></li>";
        }else{
            $pagination.= "<li><a class='current'>Next</a></li>";
            $pagination.= "<li><a class='current'>Last</a></li>";
        }
        $pagination.= "</ul>\n";        
    }

    return $pagination;
} 
?> 
```

然后在php页面顶部添加以下代码进行分页：

```
<?php
//get the function
include_once ('include/functions/pagination.php');

    $page = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);
    $limit = 5;
    $startpoint = ($page * $limit) - $limit;

    //to make pagination
    $statement = "`prodcat_mst`"; //table name 'prodcat_mst'
?> 
```

我的 SQL 查询：

```
$sqryprodcat_mst = "select prodcatm_id,prodcatm_name,prodcatm_mnimg,prodcatm_sts,prodcatm_prty from {$statement} {$ordrby} LIMIT {$startpoint}, {$limit}"; 
```

显示分页：

```
<?php
    echo pagination($statement,$limit,$page);
?> 
```

希望这可以帮助。

# python - 列表被奇怪地打印出来python

> ID：16199100
> 
> 赞同：0
> 
> 时间：2013-04-24T18:02:29.517
> 
> 标签：python, list

我有一个这样的清单

`[796, 829, 1159, 1162]`

我也有一个这样的列表：

`['144 154', '145 151', '145 152', '145 153', '145 154', '146 152', '146 153', '146 154', '147 153', '147 154']` 这些不是按比例的

我想要做的是使用第一个列表元素作为最后一个数组的索引

我试过这段代码：

```
contacts = []
for i in findres:
    contacts += rulelines[i]
print contacts 
```

`findres`第一个列表和最后一个列表在哪里但是这会奇怪地`rulelines`打印出列表：`contacts`

`['5', ' ', '7', '2', '5', ' ', '1', '0', '5', '7', ' ', '1', '5', '0', '7', ' ', '1', '5', '3']`

我敢肯定这很容易，但我哪里错了？

我认为理想的输出是`['5 72','5 105', '7 150',7 153']`

我没有放下所有的列表元素，因为每个元素都有 100 多个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:06:22.137

看起来当您分配时，`contacts = rulelines[i]`您实际上是在分配`rulelines[i]`字符串。您应该`contacts.append(rulelines[i])`将联系人添加到列表中，否则您会不断覆盖上次分配的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:07:42.913

将此用作模板：

```
findres = [5, 7, 15, 22]
contacts = list('abcdefghijklmnopqrstuvwxyz') # dummy list

result = [ contacts[index] for index in findres ]
print result

# ['f', 'h', 'p', 'w'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:15:03.907

如果我理解正确，您需要提取 first 的每个元素中的`findres`第一个数字。然后，使用这些提取的数字作为另一个数组的索引

```
>>> findres = ['144 154', '145 151', '145 152', '145 153', '145 154', '146 152', '146 153', '146 154', '147 153', '147 154']
>>> first_elements = [c.split()[0] for c in findres]
>>> print first_elements 

['144', '145', '145', '145', '145', '146', '146', '146', '147', '147']

>>> contact = []
>>> for i in first_elements:
        contacts.append(rulelines[i]) 
```

# javascript - javascript中的按钮值显示未定义

> ID：16199101
> 
> 赞同：0
> 
> 时间：2013-04-24T18:02:30.513
> 
> 标签：javascript, button, getelementsbytagname

```
[pure javascript code without the html body]
<script language="Javascript">
    [ creating buttons with the alphabets on it and its values the same]

  for(var a=1;a<=26;a++)
  {
  document.write("<input type='button' size='1' value="+String.fromCharCode(a +64)+" id='btn"+a+"' onclick='see()' >");
  }

document.write("<input type='text' size='10' id='box1' style='background-color:red'>")               

[normal textbox which should contain the data]
    function see()
      {
      [trying to put the value of button on textbox on buttonclick but gives me  undefined]

       var text;
       text=*document.getElementsByTagName*("button").value;
       document.getElementById("box1").value=text;
      }

</script> 
```

我已经尝试过 document.getElementsByTagName 甚至通过 Id 给出未定义的位置，因为我希望按钮的值位于文本框上。我使用了 forloop，因为我必须创建大约 26 个按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:04:57.070

```
"...value='" + String.fromCharCode(a +64) + "'..." 
```

您缺少单引号。

# c++ - 为什么 libstdc++ 和 libc++ 都不检查默认 unique_ptr 构造函数的指针和引用类型 D？

> ID：16199103
> 
> 赞同：3
> 
> 时间：2013-04-24T18:02:35.517
> 
> 标签：c++, unique-ptr

标准说：

> D 应满足 DefaultConstructible 的要求（表 19），并且该构造不应抛出异常。

对于这两个构造函数：

```
constexpr unique_ptr() noexcept;
explicit unique_ptr(pointer p) noexcept; 
```

然而 libc++ 和 libstdc++ 都只检查`is_pointer<D>`. 为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:35:37.340

构造函数只需要检查类型是否为指针，因为函数指针是唯一可以初始化值并最终无效的有效删除器类型。

这些构造函数都尝试对删除器类型进行值初始化（`libstdc++`至少，但我猜`libc++`是相同的）。如果`D`是不满足的引用类型或函数对象类型，则不会编译`DefaultConstructible`。但是，如果它`D`是一个函数指针，它会编译，并且你最终会得到一个无效的函数指针作为删除器，因此指针检查是必要的。

如果他们明确检查是否键入 is ，则结果错误消息可能会更清晰`DefaultConstructible`，但这样做并不是绝对必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:51:59.190

该要求是对用户的约束，而不是对实现的约束。如果您尝试使用没有默认构造函数的删除器，则行为未定义。所以你可以通过实现来尝试弄清楚你的实现做了什么，或者你不能这样做。`<g>`.

# java - 如何运行 HTTPPost 调用服务？

> ID：16199106
> 
> 赞同：0
> 
> 时间：2013-04-24T18:02:45.143
> 
> 标签：java, rest, post, http-post, http-get

我有 RESTfull 服务（比如说，[http:](http://apc.tr.re.er:5050/testxyz/service/loaninfo/) //apc.tr.re.er:5050/testxyz/service/loaninfo/ ），我需要运行 POST 服务。我正在使用以下课程：

```
HttpClient client = new DefaultHttpClient();  
HttpPost post = new HttpPost('above rest url'); <----- 
```

如果我用上面的客户端运行代码并发布，我不会得到我在soapUI工具中看到的响应。我看到了来自soapUI 工具的成功响应，因为我将复制和粘贴具有POST 方法要使用的输入值的“XML”。

当我开始使用 java 在 POST 请求之上运行时，我被卡住了。我需要一些关于“如何将输入的“XML”传递给 POST 服务”的帮助？

注意：我已经成功运行 HTTPRest 请求并获得了所需的输出，因为请求服务不需要任何输入，我没有看到任何复杂情况。我使用 JAVA 作为代码语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:27:41.507

您必须执行以下操作。

```
MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
entity.addPart("xml", new StringBody("YOUR XML DATA"));
post.setEntity(entity); 
```

# python - 在 django 中，如何允许用户使用他们的 twitter 帐户登录

> ID：16199109
> 
> 赞同：0
> 
> 时间：2013-04-24T18:03:09.567
> 
> 标签：python, django, authentication, web, oauth

我只是想使用社交身份验证来帮助人们登录我的网站，我不想制作自己的注册应用程序，所以在我网站的数据库中，它只有一个包含 2 个列的表，有 uid 和 twitter-id。如果用户连接到我的网站，该表将包含他的个人资料。我不需要在桌子上做更多的cols。我认为这对我来说已经足够了。

但是如何检查用户是否登录？

我可以从 twitter 获取访问令牌和 session-id，但是接下来我应该怎么做呢？如果我得到一个会话 ID，如何保留它并在我的网站上验证用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:05:22.370

更成熟的身份验证应用程序的竞争者是[https://github.com/pennersr/django-allauth](https://github.com/pennersr/django-allauth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:14:27.277

试试[django social auth](https://github.com/omab/django-social-auth/)，它支持许多社交网络和身份验证提供商。

# java - 按下按钮时如何更改 JTextArea 中的文本？

> ID：16199110
> 
> 赞同：0
> 
> 时间：2013-04-24T18:03:13.453
> 
> 标签：java, swing, jbutton, jtextarea, preferredsize

我正在尝试制作一个选择你自己的冒险游戏，当我按下一个按钮时，文本会变为正确的场景。但是，在第 71 行，当我尝试设置 TextArea 的文本时，它显示“线程中的异常“AWT-EventQueue-0”java.lang.Error：未解决的编译问题：无法解决 AdventureArea”。请帮忙？！

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.border.Border;

public class TheGame extends JPanel implements ActionListener{

/**
 * @param args
 */
private int numClicks1 = 0;
private int numClicks2 = 0;
String gameText = "You wake up in the morning feeling like a sir. As is tradition, you need electronics of any kind to keep your mind running (going outside is out of the question. Nothing exciting in the real world). There are many options available to you, but the internet and games are the ones that appeal the most. Do you want to surf the web or use an app?";

private static final long serialVersionUID = 1L;
 JButton option1;
 JButton option2;

    public TheGame(){
        JPanel buttonPane = new JPanel(new BorderLayout(1,1));
        JPanel textPane = new JPanel(new BorderLayout(1,1));

        option1 = new JButton("Click here for teh interwebs");
         option1.addActionListener(this);
        option1.setPreferredSize(new Dimension(300, 50));
         option1.setVisible(true);

        option2 = new JButton("Click here for teh entertainments");
        option2.addActionListener(this);
         option2.setPreferredSize(new Dimension(300, 50));
         option2.setVisible(true);

        JTextArea adventureArea = new JTextArea();
        adventureArea.setFont(new Font("Serif", Font.PLAIN, 16));
        adventureArea.setLineWrap(true);
        adventureArea.setWrapStyleWord(true);
        adventureArea.setEditable(true);
        adventureArea.setText(gameText);

        JScrollPane adventureScroll = new JScrollPane(adventureArea);
        adventureScroll.setPreferredSize(new Dimension(350, 350));
        adventureScroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        Border adventureSpace = BorderFactory.createEmptyBorder(0,10,10,10);
        Border adventureBorder = BorderFactory.createTitledBorder(adventureSpace, "TECHNOLOGY!!!");
        adventureScroll.setBorder(adventureBorder);
        adventureScroll.setVisible(true);

        textPane.add(adventureScroll, BorderLayout.CENTER);
        buttonPane.add(option1,BorderLayout.NORTH);
        buttonPane.add(option2,BorderLayout.SOUTH);

        add(buttonPane, BorderLayout.SOUTH);
        add(textPane, BorderLayout.CENTER);

        setVisible(true);
        buttonPane.setVisible(true);
        textPane.setVisible(true);

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if(e.getSource()==option1){
            //numClicks1++;
            //gameText="The internet: A wondrous place full of knowledge, videos, stories, memes, and everything else. Like every place, it has a dark and a light side. Where go?";
            adventureArea.append("The internet: A wondrous place full of knowledge, videos, stories, memes, and everything else. Like every place, it has a dark and a light side. Where go?");
        }else if (e.getSource()==option2){
        numClicks2++;
        };

      /* if(numClicks1==1){
           gameText="The internet: A wondrous place full of knowledge, videos, stories, memes, and everything else. Like every place, it has a dark and a light side. Where go?";
       }else if (numClicks2==1){

       };*/
    }

    private static void createAndShowGUI() {

        JFrame frame = new JFrame("The Game");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        TheGame theContentPane = new TheGame();
        theContentPane.setOpaque(true); 
        frame.setContentPane(theContentPane);

        JFrame.setDefaultLookAndFeelDecorated(true);

        frame.pack();
        frame.setSize(800, 600);
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:26:14.767

这仅仅是因为`adventureArea`它是构造函数的本地字段，而不是类的成员。

相反，在`JButton option2;`add的声明下方`private final JTextArea adventureArea;`

在你的构造函数中`TheGame`，而不是`JTextArea adventureArea = new JTextArea();`用`this.adventureArea = new JTextArea();`

旁注：

*   永远不要使用`setPreferredSize()`，而是使用适当的`LayoutManager`或提供您想要实现的目标的提示。例如，您的按钮可以放在`JPanel`带有 a 的 a 中`GridLayout`（以便它们都具有相同的大小），然后您将该面板`SOUTH`放在`BorderLayout`. 对于`JTextArea`，请指明您想要的行数和列数（例如 24 行 x 80 列）：`new JTextArea(24, 80);`。这将自动传播到滚动窗格，然后传播到父窗口。
*   尝试正确缩进你的代码，它可以避免愚蠢的错误，并且让其他人更容易阅读你的代码。
*   不要同时调用`frame.pack();`and `frame.setSize(800, 600);`，最后一个会赢。赞成。`pack()`_`setSize()`
*   默认情况下所有组件都是可见的，无需调用`setVisible(true)`它们。只有顶级容器 (Windows) 需要显式可见。

# javascript - 如何将字符串的每个字母保存在不同的数组位置？并组合回单个字符串？

> ID：16199112
> 
> 赞同：1
> 
> 时间：2013-04-24T18:03:27.487
> 
> 标签：javascript

我正在制作简单的游戏，计划使用 Fisher-Yates Shuffle 来打乱单词。

如何用字符串的每个字母填充数组？在算法完成后，我如何用加扰的单词填充字符串？

对于第二部分，我可以想象它只是循环遍历数组并将当前数组位置内容添加到字符串中，但不确定代码会是什么样子。

我对javascript不是很有经验，如果这是一个广泛的问题，我可以理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:05:42.070

您可以使用：

```
var str = "A long string here...",
var lettersArray = str.split(''); //["A", " ", "l", "o", "n", "g", " ", "s", "t", "r", "i", "n", "g", " ", "h", "e", "r", "e", ".", ".", "."]
//Doing some stuff here...
var scramble = lettersArray.join('')); //"A long string here..." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:20:52.370

//使用Fisher-Yates：

```
function scrambleWord(word){
    var A= word.split(''),
    i, temp, L= A.length;
    while(--L){
        i= Math.floor(Math.random()*L);
        temp= A[i];
        A[i]= A[L];
        A[L]= temp;
    }
    return A.join('');
}

var alpha= 'supercalifragelisticexpialadocious';
scrambleWord(alpha);

/*  returned value: (String)
xgitellpcuecpuraaiasrideloiasfscio
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:11:52.710

这可以通过使用[String.split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)和[Array.join](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

简单地实现 请参阅 js [fiddle](http://jsfiddle.net/Xotic750/CBWWW/)

上的示例 此代码会将字符串拆分为一个数组，然后将数组内容返回为一个字符串，其中字符按原始顺序排列。

```
var string = "hocus pocus",
    array = string.split(""),
    newString = array.join("");

alert(newString); 
```

在 ECMAScript6 (Harmony) 中，还有一个名为[String.toArray的新方法](http://wiki.ecmascript.org/doku.php?id=harmony%3astring_extras)

我不相信任何[当前的浏览器](http://kangax.github.io/es5-compat-table/es6/)都支持它。

已经为此提供了一个[shim](https://github.com/paulmillr/es6-shim)，因此您可以根据需要立即开始使用此语法。

只是对即将推出的功能的有趣说明。

# ruby-on-rails - 更改记录对象中的属性名称

> ID：16199119
> 
> 赞同：1
> 
> 时间：2013-04-24T18:03:54.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, hash, attributes

我有一个从表中选择组记录的查询。

```
@groups = Group.all 
```

属性之一与`id`处理从控制器发送给它的 JSON 的前端框架不兼容。

我的问题是，在获得组列表后`@groups`，如何将每个属性的 id 更改为不同的名称，即`group_id`？

我不会将它用于视图或其他任何东西，我只需要将键名更改`id`为`group_id`.

例如，假设我运行`@groups.first`. 它应该返回...

```
=> #<Group id: 1, owner_id: 81, name: "my awesome group", updated_at: "2013-04-23 20:58:27", created_at: "2013-04-23 20:58:27"> 
```

当我将其格式化为 json 时，我有 key value `id: 1`。实际上我需要它`group_id: 1`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:25:09.247

`as_json`您可以在类的方法中覆盖名称`Group`：

```
def as_json(*args)
    super.tap { |hash| hash["group_id"] = hash.delete "id" }
end 
```

请参阅： [Rails 如何在渲染 json 时更改属性名称？](https://stackoverflow.com/questions/8948787/rails-how-to-change-attribute-name-when-rendering-json)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:24:09.940

您可以滥用 ActiveRecord[`select`](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-select)方法：

```
@groups = Group.select("id AS group_id, owner_id, name,...") 
```

# php - PHP 或 Javascript 功能 - 如果可能，只需单击 1 次即可强制退出 Facebook

> ID：16199122
> 
> 赞同：-1
> 
> 时间：2013-04-24T18:04:08.947
> 
> 标签：php, javascript, facebook

如果可能的话，我想在我的网站上为 facebook 打开一个 iframe，并创建一个按钮，该按钮将强制注销我当前使用的帐户，而不管时间线样式和元素类等如何。有没有办法强制断开会话以便下次访问该页面时需要登录？通过 php 或 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:14:10.230

我推荐使用 Facebook 提供的 SDK，因为你现在这样做的方式看起来有点老套，甚至可能违反 Facebook 的服务条款。

Facebook Javascript SDK： [https ://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

Facebook 注销功能： [https ://developers.facebook.com/docs/reference/javascript/FB.logout/](https://developers.facebook.com/docs/reference/javascript/FB.logout/)

您可以通过单击按钮触发此功能：

```
FB.logout(function(response) {
  // user is now logged out
}); 
```

# ruby-on-rails - 将另一个视图添加到现有视图中

> ID：16199124
> 
> 赞同：0
> 
> 时间：2013-04-24T18:04:17.073
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

您好，我已经在 Rails 应用程序中创建了 header.html.erb 视图，并希望将其添加到不同的视图中。怎么可能需要其他视图来呈现它，是否可以在不创建另一个控制器的情况下完成。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:07:20.250

将其设置为部分。将名称更改为 _header.html.erb，然后，在每个要包含标题的文件中，呈现部分

```
<%= render "header" %> 
```

另一种选择是设置一个包含该标题的布局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T18:08:00.383

```
<%= render "shared/header" > 
```

假设你的标题住在`app/views/shared/_header.html.erb`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T19:28:51.467

您不需要单独的控制器。如果您想将标题应用到所有页面，只需将其添加到布局中的 application.html.erb 即可。

或如下共享，您可以创建一个部分并在与视图对应的控制器操作中呈现它

# dart - watcher.dart 和 observe.dart 有什么区别？

> ID：16199127
> 
> 赞同：2
> 
> 时间：2013-04-24T18:04:25.960
> 
> 标签：dart, dart-webui

这两个库，`watcher.dart`似乎`observe.dart`提供了非常相似的功能。为什么它们都是`web_ui`包装的一部分？

我可以直接使用和包含它们，还是仅通过包含`web_ui.dart`库？

我试图将其包含`observe.dart`在我的项目中，但它破坏了单向和双向数据绑定。这种行为有什么理由吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:16:21.777

图书馆`watcher.dart`正在慢慢被淘汰。现在推荐使用观察者来创建单向和双向数据绑定。暂时，两者`watcher.dart`都`observe.dart`得到支持，但不要依赖支持`watcher.dart`在未来继续。

有关如何使用观察者的示例，请参阅[http://www.dartlang.org/docs/cookbook/#web-ui](http://www.dartlang.org/docs/cookbook/#web-ui)。

# jquery - 单击下一个或上一个使页面滚动

> ID：16199128
> 
> 赞同：0
> 
> 时间：2013-04-24T18:04:31.590
> 
> 标签：jquery, html, css, jquery-ui

首先请访问这个小提琴：http: [//jsfiddle.net/XvAR6/](http://jsfiddle.net/XvAR6/)

现在向下滚动查看。

这里我使用了 jQuery ui。但是，这不是问题，主要问题是当我单击下一个或上一个时，页面会自动滚动到顶部。我不想要滚动。我可以得到解决方案吗？

这是jQuery代码：

```
$("#tab1, #tab2").tabs({active: 1});

var all = $('.udtalelse').addClass("passiv");

var i = -1;

$('#prev').click(function() {
    ctrlKunder( i = !i ? all.length - 1 : --i );
});
$('#next').click(function() {
    ctrlKunder( i = ++i % all.length );
}).click();

function ctrlKunder(ele) {
    all.removeClass("active").addClass("passiv");
    all.eq(ele).removeClass("passiv").addClass("active");
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:06:20.830

`event`在 的 中添加对`callback function`的引用`click`。我们在这里用变量引用它`e`。然后使用`e.preventDefault()`; 停止默认页面跳转。

```
$('#prev').click(function(e) {
    e.preventDefault(); // add this
    ctrlKunder( i = !i ? all.length - 1 : --i );
});
$('#next').click(function(e) {
    e.preventDefault(); // add this
    ctrlKunder( i = ++i % all.length );
}).click(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:06:57.867

您的锚标签的 href 为`#`，因此当它们被点击时，页面的哈希值会更新为`#`滚动到顶部。阻止默认操作使其停止。

```
$('#prev').click(function(e) {
    e.preventDefault();
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:06:58.120

您可以在此处使用[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)或`return false;`：

```
$('#prev').click(function(e) {
   e.preventDefault(); // return false;
   ctrlKunder( i = !i ? all.length - 1 : --i );
});
$('#next').click(function() {
   e.preventDefault(); // return false;
   ctrlKunder( i = ++i % all.length );
}).click(); 
```

你也可以用`return false;`。`return false;`也将停止事件冒泡。

* * *

## 从文档：

### 描述：

> 如果调用该方法，则不会触发事件的默认动作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T18:07:58.440

你有两个选择。

`href`将下一个/上一个链接中的更改为`javascript:;`OR

将点击事件更改为：

```
$('#prev').click(function(e) {
    ctrlKunder( i = !i ? all.length - 1 : --i );
    e.preventDefault();
});

$('#next').click(function(e) {
    ctrlKunder( i = ++i % all.length );
    e.preventDefault();
}).click(); 
```

# xslt - 找不到它属于哪个 XPath 函数

> ID：16199135
> 
> 赞同：1
> 
> 时间：2013-04-24T18:04:59.233
> 
> 标签：xslt, xpath, transform

我目前正在尝试了解我正在处理的 XSL 文档并遇到了这个问题

```
<xsl:when test="(string(@hideIfHardwareIs)='')> 
```

我发现在 XSLT 2.0 中有 fn:string()。上面的 string() 是一样的吗？这意味着它将返回它在 hideIfHwardwareIs 找到的字符串版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:15:06.207

是的，你是对的。`string()`产生其参数的字符串值。在这种情况下，它和另一组括号是多余的，因为与的比较`''`应该自动将其转换为字符串。这应该没问题：

```
<xsl:when test="@hideIfHardwareIs = ''"> 
```

[XPath 1.0 规范中的 string() 函数](http://www.w3.org/TR/xpath/#section-String-Functions)

# git - 如何对远程 GIT 存储库进行分组

> ID：16199139
> 
> 赞同：-2
> 
> 时间：2013-04-24T18:05:15.763
> 
> 标签：git

我曾经有一个设置，我以某种方式将 3 个远程存储库（为方便起见）分组，我曾经将更改推送到所有 3 个远程。我怎样才能再次实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:09:13.240

您可以通过添加多个遥控器来完成此操作[例如在此 SO 帖子中：[从多个远程位置拉/推](https://stackoverflow.com/questions/849308/pull-push-from-multiple-remote-locations)]，然后使用推送到所有三个远程存储库的 git commit/push/pull 别名，或通过[git 挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks).

# actionscript-3 - AS3：如何在容器中添加孩子？

> ID：16199145
> 
> 赞同：0
> 
> 时间：2013-04-24T18:05:37.460
> 
> 标签：actionscript-3, containers, addchild

我现在无法解决几个小时;(。我想在容器中添加一个孩子。这是我到目前为止所做的。所有问题都在 Creator 类中。这一行 par2.addChild(ship); // 有效, 但是这一行 par2.containerSDv.addChild(ship); //error:1119.

谢谢

```
 public class Main extends MovieClip
{
    private var containerSD:Container = new Container;
    private var ship:Ship2;

    public function Main()
    {
        // constructor code
        stage.addChild(containerSD);
        //ship = new Ship2;
        //containerSD.addChild(ship);

    }
} 
```

.

```
 public class AddChild2 extends SimpleButton
{
    private var creatorche:Creator = new Creator;
    private var s:Ship2;

    public function AddChild2()
    {
        // constructor code
        addEventListener(MouseEvent.CLICK, onCLICK)
    }

    private function onCLICK(e:MouseEvent)
    {
        s = new Ship2;
        creatorche.onCreator(s, stage);
    }
} 
```

.

```
 public class Creator extends MovieClip
{
    private var ship:MovieClip;
    private var containerSDv:Container = new Container;

    public function Creator()
    {
        // constructor code
    }

    public function onCreator(par1:MovieClip, par2:Stage)
    {
        ship = par1;
        //par2.addChild(ship); //works
        par2.containerSDv.addChild(ship); //error:1119
        ship.x = Math.random() * 200;
        ship.y = Math.random() * 200;
    }

} 
```

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:29:20.993

我认为您可能需要退后一步，重新评估您的整体设计和目标。

考虑这种方法：

```
public class Main extends MovieClip
{
    private var container:Sprite = new Sprite;
    private var newShipButton:NewShipButton = new NewShipButton;
    private var creator:Creator;

    public function Main()
    {
        creator = new Creator;
        addChild(container);
        addChild(newShipButton);

        newShipButton.addEventListener(MouseEvent.CLICK, newShipButtonHandler);

    }

    private function newShipButtonHandler(e:MouseEvent):void
    {
        // shipStyle would be a MovieClip of the artwork for a given ship.
        var ship:Ship = creator.makeShip(shipStyle, speed, power, container);
        ship.x = Math.random() * 200;
        ship.y = Math.random() * 200;
    }

} 
```

下面是一个 Creator 类的例子

```
public class Creator
{

    public function Creator()
    {
        // constructor code
    }

    public function makeShip(style:MovieClip, speed:Number, power:Number, container:MovieClip):Ship
    {
        var ship:Ship = new Ship(style);
        ship.speed = speed;
        ship.power = power;
        container.addChild(ship);
        return ship;
    }

} 
```

我做了一些假设，比如你有一个 Ship 类将扩展一个 MovieClip/Sprite 并拥有艺术作品，并且你的 NewShipButton 类将扩展 SimpleButton 并拥有艺术作品。

如果这不符合您的需求，请解释您正在尝试做的事情不适合这个极其简单的设计。

我看过你的一些帖子，这些帖子似乎让事情变得比他们需要的要困难得多。也许有一个很好的理由，但如果是这样，请解释为什么上述方法不适用于您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:52:18.013

如果我给容器命名并取消选中设置中的严格模式，我的代码就可以工作。我发现关于 DisplayObjectContainer 的非常有用的文章[http://joshblog.net/2007/07/12/disabling-actionscript-3-strict-mode-in-flash-cs3/](http://joshblog.net/2007/07/12/disabling-actionscript-3-strict-mode-in-flash-cs3/)

```
 public class Creator extends MovieClip
{
    private var ship:MovieClip;
    private var containerSDv:Container = new Container;

    public function Creator()
    {
        // constructor code
    }

    public function onCreator(par1:MovieClip, par2:Stage)
    {
        ship = par1;
        //par2.addChild(ship); //works
        par2.getChildByName("contain").addChild(ship); //error:1119
        ship.x = Math.random() * 200;
        ship.y = Math.random() * 200;
    }

} 
```

.

```
 public class Main extends MovieClip
{
    private var containerSD:Container = new Container;
    private var ship:Ship2;

    public function Main()
    {
        // constructor code
        stage.addChild(containerSD).name = "contain";
        containerSD.x = 0;
        containerSD.y = 0;

    }
} 
```

# distributed-computing - 获取有关 splayd 的信息

> ID：16199146
> 
> 赞同：0
> 
> 时间：2013-04-24T18:05:37.627
> 
> 标签：distributed-computing, luabind

我正在为分布式应用程序使用 SPLAY 模拟器，我想提交一个简单的程序，显示一条消息和一些关于执行该功能的 splayd 的信息（如 ID、名称等），但我不知道如何获取有关信息张开的。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:42:14.643

我找到了解决方案。我使用 job.position 作为我的 ID，使用 job.me.ip 作为我的 IP 和其他属性。谢谢。

# java - 测试 JPA java.lang.ClassNotFoundException: play.db.jpa.JPABase

> ID：16199147
> 
> 赞同：0
> 
> 时间：2013-04-24T18:05:37.733
> 
> 标签：java, maven, jpa, junit4

我正在尝试测试我的 JPA 实体并一直在关注本教程：

[http://eskatos.wordpress.com/2007/10/15/unit-test-jpa-entities-with-in-memory-database/](http://eskatos.wordpress.com/2007/10/15/unit-test-jpa-entities-with-in-memory-database/)

到目前为止，我有一个测试正在运行并且它们都通过了，但是我得到了异常：

```
java.lang.ClassNotFoundException: play.db.jpa.JPABase 
```

在运行时（对于我的每个测试），即使测试完全运行并通过，

我在 JBOSS 7.1 中使用 maven 并尝试导入 play-db 1.1 但这没有帮助，

有人可以帮我吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:09:42.940

如果您想使用带有外部库的工具，您需要将这些库放入您的 jboss 目录或 ear/war 存档中的 lib/ 文件夹中。

# php - post方法卡在处理上

> ID：16199152
> 
> 赞同：0
> 
> 时间：2013-04-24T18:05:45.267
> 
> 标签：php, javascript

Javascript 请求卡在...处理中。

这是我的javascript：

```
function checklink() {
    var hr = new XMLHttpRequest();
    var url = "new_item.php";
    var tratata = document.getElementById("yl1").value;
    var vars = "yl=" + tratata;

    hr.open("POST", url, true);

    hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

    hr.onreadystatechange = function () {
        if (hr.readyState == 4 && hr.status == 200) {
            var return_data = hr.responseText;
            document.getElementById("status2").innerHTML = return_data;
        }
    }

    hr.send(vars);
    document.getElementById("status2").innerHTML = "processing...";
} 
```

这是位于同一页面上的php：

```
<?php
if (isset($_POST["yl"])) {
  $yli = $_POST["yl"];
      /* ... */
} 
```

# python - Cocoa：制作一个与 python 子程序耦合的应用程序有多安全？

> ID：16199153
> 
> 赞同：0
> 
> 时间：2013-04-24T18:05:45.627
> 
> 标签：python, cocoa

我想做一个 Cocoa OS X 应用程序。我更喜欢在它的核心中使用 python 脚本。但是，不确定它有多安全。我知道python渗透率很高，但是版本冲突和迁移呢？将整个 python 运行时捆绑到 OS X 应用程序中是否值得？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:08:33.863

你应该使用[py2app](http://wiki.python.org/moin/MacPython/py2app)。它将一个 Python 可执行文件、您需要的所有库和您的脚本捆绑到一个可执行文件中。然后，您可以将其他可执行文件（例如您的 Objective-C 部分）添加到该应用程序包中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:23:17.880

所以....这真正归结为跨版本的兼容性问题，脚本语言在维护方面是出了名的糟糕。Python 做得比大多数都好，但它仍然存在很大问题。

正是出于这个原因，Apple*通常在系统上发布了旧版本的解释器。*因此，如果您确实依赖系统安装的 Python，我建议您锁定到特定版本。即使用`/usr/bin/python2.6`而不是通用的`/usr/bin/python`.

替代方案如您所说；将 python 解释器和任何需要的资源捆绑到您的应用程序中。这有点麻烦，但它解决了兼容性问题。或多或少; 现实情况是，Python 实际上是操作系统的一个接口，因此它非常大，有可能突破任何版本。不过，你对此无能为力。

另一种可能性是走@kindall 建议的路线；使用 PyObjC 并完全或大部分在 Python 中实现您的 Cocoa 应用程序。工作正常。坦率地说，去过那里，做过，不会再做，因为大型脚本应用程序的维护/调试问题很讨厌。

作为替代方案，您可能希望使用 Lua ( [http://www.lua.org](http://www.lua.org) ) 进行调查，因为它非常适合嵌入到应用程序中。Lua 有一个小型解释器，您可以完全控制在运行时可以访问应用程序的哪些功能。例如，魔兽世界的 UI 主要是作为 Lua 实现的，它把一组快速的 UI 原语粘合在一起。在客户端完全可定制，当您考虑安全隐患时，这确实令人印象深刻。

# maven - Maven release:prepare ：无法准备发布，因为您有本地修改

> ID：16199154
> 
> 赞同：13
> 
> 时间：2013-04-24T18:05:52.643
> 
> 标签：maven, maven-release-plugin, continuum

我在 continuum 的 release:prepare 阶段遇到了一个问题，该阶段在 scm-check-modifications 步骤中失败并出现错误：

> [错误] org.apache.maven.shared.release.ReleaseFailureException：无法准备发布，因为您有本地修改：[pom.xml:modified]

我做了什么 ：

1.  我将所有更改（*.java 和 pom.xml）提交到 SVN
2.  我在 Continuum 中构建了项目
3.  我启动了发布的准备工作。

我知道 scm-check-modifications 调用 ScmCheckModificationsPhase 类，该类验证与 SCM 上的内容相比没有本地更改。

我知道如果我只使用 Maven，如果有一些本地更改，或者本地代码和 SVN 之间的任何差异，例如，release:prepare 将不起作用，因为它首先检查修改；但是使用 Continuum，我不知道为什么它应该是本地代码和 SVN 存储库之间的差异？所以我不知道为什么 Continuum 中的 release:prepare 目标面临这个问题。

我的 pom 示例：

```
 <build>
      <plugins>
    ...
       <plugin>
          <artifactId>maven-release-plugin</artifactId>
          <configuration>
                <useReleaseProfile>false</useReleaseProfile>
          </configuration>
       </plugin>

    ...     
      </plugins>

    </build>

<scm>
  <connection>scm:cvs:ext:url:/var/cvs:application_name</connection>         <developerConnection>scm:cvs:ext:url:/var/cvs:application_name</developerConnection>
</scm>

.....
</project> 
```

在父 pom.xml 中：

```
...
    <pluginManagement>

        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-release-plugin</artifactId>
          <version>2.2.2</version>
          <configuration>
            <useReleaseProfile>false</useReleaseProfile>
            <goals>deploy</goals>
            <arguments>-Prelease</arguments>
          </configuration>
        </plugin>
..... 
```

有关信息，项目的构建和发布一直运行良好，直到现在。

有一个绕过解决方案解决了我的问题，但我仍在寻求了解这个问题的根源。

旁路解决方案：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-release-plugin</artifactId>
  <version>2.2.2</version>
  <configuration>
    ...
    <checkModificationExcludes>
      <checkModificationExclude>pom.xml</checkModificationExclude>
    </checkModificationExcludes>
  </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-12-02T11:45:12.080

我可以确认，添加插件或将其配置为排除`pom.xml`检查确实有效：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-release-plugin</artifactId>
  <configuration>
    <checkModificationExcludes>
        <checkModificationExclude>pom.xml</checkModificationExclude>
    </checkModificationExcludes>
  </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-22T16:35:01.257

从源代码管理中删除我的项目`target`文件夹为我解决了这个问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-03T12:50:23.193

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-release-plugin</artifactId>
<configuration>
    <checkModificationExcludes>
        <checkModificationExclude>pom.xml</checkModificationExclude>
        <checkModificationExclude>**</checkModificationExclude>
    </checkModificationExcludes>
</configuration> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-21T18:42:09.130

对于不想更改`pom.xml`命令行选项的每个人来说都是诀窍：

`mvn [...] -DcheckModificationExcludeList=pom.xml,.maven/spy.log`

我在我们的 hudson / jenkins CI 环境中遇到了问题，它抱怨`.maven/spy.log`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-30T17:25:26.417

对我来说，解决方案是暂存并提交 pom.xml 或任何其他更改的文件来推送 git

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-09T16:53:57.897

这只是错误的解决方法。我在使用 maven-release 插件版本 2.5.3 时遇到了同样的错误，只是使用 maven-release 2.3.2 对错误进行了排序

# asp.net - 具有可变命名元素的用户控件

> ID：16199155
> 
> 赞同：0
> 
> 时间：2013-04-24T18:05:59.883
> 
> 标签：asp.net, html

我一直在阅读有关 msdn 上的用户控件的信息，我想知道如何处理可能可变的元素 ID？

例如，假设我的页面上有 usercontrol1.ascx，其中包含：

```
<div id="myPageDiv1">
     <div id="container1">
         Contents
     </div>
</div> 
```

如果我需要不同页面的 ID 不同怎么办？

也许我需要另一个看起来像这样的页面：

```
 <div id="myPageDiv2">
     <div id="container3">
         Contents 
     </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:08:58.060

您可以向用户控件添加一个属性，以便您可以逐页更改它：

**用户控制**

```
Public Property SomeDivID as String 
```

**ASPX**

```
<div id="<%= Me.SomeDivID %>">

</div> 
```

**页**

```
<control:yourusercontrol SomeDivID="myPageDiv1" runat="server" />

<control:yourusercontrol SomeDivID="myPageDiv2" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:10:48.880

您可以在用户控件中定义属性。

```
Public Property DivName As String 
```

您可以在代码隐藏中将其设置为您想要的名称。您甚至可以从您的控制页面传递它。

```
DivName = "MyDesiredDivName" 
```

然后，您可以在标记中使用鳄鱼语法来呈现属性的值。

```
<div id="<%= Me.DivName %>">
     <div id="container1">
         Contents
     </div>
</div> 
```

# c++ - 元组和压缩对有什么区别？

> ID：16199158
> 
> 赞同：13
> 
> 时间：2013-04-24T18:06:15.343
> 
> 标签：c++, boost, tuples

我已经看到两者都用于相同的目的，但我想知道结果会有什么不同（如果有的话）以及为什么要使用它。

对文档的引用：[`compressed_pair`](http://www.boost.org/doc/libs/1_53_0/libs/utility/compressed_pair.htm)和[`tuple`](http://en.cppreference.com/w/cpp/utility/tuple).

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-24T18:24:10.763

C++ 要求所有[完整类型](https://en.cppreference.com/w/cpp/language/type#Incomplete_type)的大小都大于 0。如果一个类型的大小*可以*为 0，那么数组索引和其他指针数学就会出错。

```
class EmptyClass { };

std::cout << sizeof( EmptyClass );  // Prints "1" (typically) 
```

A`boost::compressed_pair`是一个由两个元素组成的元组，对于一种只有 1 大小的类型不需要额外的存储空间，因为禁止使用 0 的大小。

```
if ( sizeof( compressed_pair<int,EmptyClass> ) == sizeof(int) )
{
   std::cout << "EmptyClass was compressed.";  // (This will print)
} 
```

这是通过[空基优化](https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Empty_Base_Optimization)实现的。两种类型都放在一个类包装器中，如果一种类型是“空的”，则该类成为另一个的父类。

# c - 找到数组中最常用的字符？

> ID：16199161
> 
> 赞同：-6
> 
> 时间：2013-04-24T18:06:25.593
> 
> 标签：c, arrays, character

这是我在数组中查找最常用字符的代码。请调试它并找出错误。它大部分时间都在工作，但在某些情况下输出不正确。请在这件事上给予我帮助

```
#include <stdio.h>
#define size 100
int main()
{
char a[size]={0};
int i,j, k, n;
char c, e;

printf("enter size of array\n");
scanf("%d", &n);
a[n]=0;

printf("enter the characters??\n");

for(i=0; i<n; i++)
  {
    scanf(" %c", & a[i]);
  }

for(j=0; j<n; j++)
{
for(k=0; k<n; k++)
   {
     if(j==k)
       {
        continue;
       }

      else if(a[j]=a[i])
           {
              e=a[j];
           }
      else if(a[j]!=a[k])
           {
            continue;
           }
   }
}
printf("the most frequently occuring character is %c", e);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:17:59.870

为了好玩，请自担风险用于作业：

```
 int count[256];
const char input[] = "hjkshrjkhsfh2389r2jhfjkjfljsdjklf";

int main()
{
    int i;
    for(i=0; input[i]; i++)
    {
        count[input[i]]++; 
    }

    int best = 0;
    char letter = 0;

    for(i=0; i<256; i++)
    {
        if(count[i] > best)
        {
             best = count[i];
             letter = (char)i;
        } 
    }

    printf("letter: %c, best: %d\n", letter, best); 

    return 0;
} 
```

为了让它成为一个教训，这里有一些“糟糕”的事情，现实世界会给你带来麻烦：

*   代表所有字节大小的幻数 256
*   我的 strlen 检查输入非常不安全。
*   不处理“巨大”列表 - 仅允许出现 2^31 次。
*   O(strlen) + O(256) = O(n) 时间 - 可能会有所改善。
*   `i`重用而不是作用域。变量名称可能更具描述性。
*   暂无评论...

享受和其他人欢迎烧烤我，因为它给出了这样的家庭作业级别的答案。只是想看看我能多快把它放在一起。

# android - 在短信接收上用相机拍照

> ID：16199166
> 
> 赞同：0
> 
> 时间：2013-04-24T18:06:36.287
> 
> 标签：android, camera, sms, broadcast

我有这个活动（MakePhotoActivity）类，可以在您打开应用程序时拍照。我已将其设置为使用前置摄像头。

然后我有另一个类，它是一个已经在工作的 SMS 广播接收器。

现在，我想让它在收到短信时，使用我当前的班级拍照。但是我怎样才能将它们整合在一起呢？

当我尝试将方法（surfaceChanged 等）复制到我的广播接收器类时，在接收短信时，我将代码放在 onCreate 内（在 MakePhotoActivity 中）。它不工作。

```
public class MakePhotoActivity extends Activity implements SurfaceHolder.Callback
{
    //a variable to store a reference to the Image View at the main.xml file
    private ImageView iv_image;
    //a variable to store a reference to the Surface View at the main.xml file
    private SurfaceView sv;

    //a bitmap to display the captured image
    private Bitmap bmp;
    private int cameraId = 0;

    //Camera variables
    //a surface holder
    private SurfaceHolder sHolder; 
    //a variable to control the camera
    private Camera mCamera;
    //the camera parameters
    private Parameters parameters;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //get the Image View at the main.xml file
        iv_image = (ImageView) findViewById(R.id.imageView);

        //get the Surface View at the main.xml file
        sv = (SurfaceView) findViewById(R.id.surfaceView);

        //Get a surface
        sHolder = sv.getHolder();

        //add the callback interface methods defined below as the Surface   View callbacks
        sHolder.addCallback(this);

        //tells Android that this surface will have its data constantly replaced
        sHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    private int findFrontFacingCamera() {
        int cameraId = -1;
        // Search for the front facing camera
        int numberOfCameras = Camera.getNumberOfCameras();
        for (int i = 0; i < numberOfCameras; i++) {
            CameraInfo info = new CameraInfo();
            Camera.getCameraInfo(i, info);
            if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
                Log.d("A", "Camera found");

                cameraId = i;
                break;
            }
        }
        return cameraId;
    }

    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3)
    {
        //get camera parameters
        parameters = mCamera.getParameters();

        //set camera parameters
        mCamera.setParameters(parameters);
        mCamera.startPreview();

        //sets what code should be executed after the picture is taken
        Camera.PictureCallback mCall = new Camera.PictureCallback()
        {

            public void onPictureTaken(byte[] data, Camera camera)
            {
                //decode the data obtained by the camera into a Bitmap
                bmp = BitmapFactory.decodeByteArray(data, 0, data.length);
                //set the iv_image
                iv_image.setImageBitmap(bmp);
                FileOutputStream outStream = null;
                try{
                    outStream = new FileOutputStream("/sdcard/Image"+System.currentTimeMillis()+".jpg");
                    outStream.write(data);
                    outStream.close();
                } catch (FileNotFoundException e){
                    Log.d("CAMERA", e.getMessage());
                } catch (IOException e){
                    Log.d("CAMERA", e.getMessage());
                }
            }
        };

        mCamera.takePicture(null, null, mCall);
    }

    public void surfaceCreated(SurfaceHolder holder)
    {
        // The Surface has been created, acquire the camera and tell it where
        // to draw the preview.

        if (mCamera == null) {
            cameraId = findFrontFacingCamera();
            mCamera = Camera.open(cameraId);
            try {
                mCamera.setPreviewDisplay(holder);

                // TODO test how much setPreviewCallbackWithBuffer is faster
                // mCamera.setPreviewCallback((PreviewCallback) this);
            } catch (IOException e) {
                mCamera.release();
                mCamera = null;
            }
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder)
    {
        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);
            mCamera.release();
            mCamera = null;
        }
    } 

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        if (mCamera!=null)
        {
            mCamera.stopPreview();
            mCamera.release();
            mCamera=null;
        }
    }
} 
```

更新：这就是我所做的。投入服务，但我得到一个错误，说应用程序通过了 NULL 表面，相机服务器死了！，ICamera 死了，错误 100。

我引用了[http://easyandroidtutorials.blogspot.in/2012/09/capture-image-without-preview-as.html](http://easyandroidtutorials.blogspot.in/2012/09/capture-image-without-preview-as.html)中的代码并做了一些小改动，仍然无法工作。

```
public class CameraService extends Service
{
    //Camera variables
    //a surface holder
    private SurfaceHolder sHolder; 
    //a variable to control the camera
    private Camera mCamera;
    //the camera parameters
    private Parameters parameters;
    SurfaceView sv;
    private int cameraId = 0;
    /** Called when the activity is first created. */
    @Override
    public void onCreate()
    {
        super.onCreate();
        Log.i("Service", "Service started");

    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        try {

                if (mCamera == null) {
                    cameraId = findFrontFacingCamera();
                    mCamera = Camera.open(cameraId);

                try {
                    // Thread.sleep(3000);
                    sv = new SurfaceView(getApplicationContext());
                    mCamera.setPreviewDisplay(sv.getHolder());
                    parameters = mCamera.getParameters();

                    //set camera parameters
                    mCamera.setParameters(parameters);
                    mCamera.startPreview();
                    mCamera.takePicture(null, null, mCall);

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    mCamera.release();
                    mCamera = null;
                    e.printStackTrace();
                }

                //Get a surface
                //sHolder = sv.getHolder();
                //tells Android that this surface will have its data constantly replaced
                // sHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return Service.START_STICKY;
    }

    private int findFrontFacingCamera() {
        int cameraId = -1;
        // Search for the front facing camera
        int numberOfCameras = Camera.getNumberOfCameras();
        for (int i = 0; i < numberOfCameras; i++) {
            CameraInfo info = new CameraInfo();
            Camera.getCameraInfo(i, info);
            if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
                Log.d("A", "Camera found");

                cameraId = i;
                break;
            }
        }
        return cameraId;
    }

    Camera.PictureCallback mCall = new Camera.PictureCallback()
    {

        public void onPictureTaken(byte[] data, Camera camera)
        {
            //decode the data obtained by the camera into a Bitmap

            FileOutputStream outStream = null;
            try{
                outStream = new FileOutputStream("/sdcard/Image.jpg");
                outStream.write(data);
                outStream.close();
            } catch (FileNotFoundException e){
                Log.d("CAMERA", e.getMessage());
            } catch (IOException e){
                Log.d("CAMERA", e.getMessage());
            }

        }
    };

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    } 
```

有人对此有任何帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:25:09.987

在您的 sms 广播接收器的 onReceive 方法中执行以下操作：

```
Intent intent = new Intent(this, MakePhotoActivity.class);
startActivity(intent); 
```

检查[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)以获取有关启动活动的更多信息

要在服务中拍照，您需要创建一个虚拟表面视图。这是一个应该解释如何做到这一点的链接： [如何在没有从服务或线程预览的情况下进行相机捕捉？](https://stackoverflow.com/questions/9744790/android-possible-to-camera-capture-without-a-preview)

如果你想禁用快门声音：camera.enableShutterSound(false); [http://developer.android.com/reference/android/hardware/Camera.html#enableShutterSound(boolean)](http://developer.android.com/reference/android/hardware/Camera.html#enableShutterSound%28boolean%29)

# python - 从节点云中查找几何（形状）

> ID：16199172
> 
> 赞同：3
> 
> 时间：2013-04-24T18:07:06.150
> 
> 标签：python, matlab, numpy, geometry, scipy

我正在编写一些代码，这些代码需要识别一些基于节点云的相当基本的几何图形。我有兴趣检测：

*   板（简单有界平面）
*   圆柱体（两个节点循环）
*   半圆柱（弧线+弧线+弧线+线）
*   圆顶（n*loop+顶部节点）

我尝试搜索“来自节点云的几何”、“从节点获取几何”，但我找不到很好的参考。这可能有一个完整的领域，有人可以指点我吗？我已经开始编写一些东西了，但我想重新发明轮子......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:18:58.473

一个好的开始是使用[Grahams 算法](http://en.wikipedia.org/wiki/Graham_scan)或[QuickHull 获取](http://en.wikipedia.org/wiki/QuickHull)节点的凸包（可以围绕节点云的最紧密拟合多边形） 。请注意，QuickHull 更容易编码并且可能更快，除非你真的很倒霉。这里有一个 QuickHull 的纯 python[实现。](http://members.home.nl/wim.h.bakker/python/quickhull2d.py)但我确信快速谷歌搜索会显示许多其他结果。

通常凸包是大多数其他形状识别算法的起点，如果你的云可以描述为一系列笔画，那么有很多算法和方法：

[识别多笔画几何形状：实验评估](http://link.springer.com/chapter/10.1007/3-540-40953-X_23#page-1)

这可能会更好，一旦你有了凸包，将多边形分解为顶点对并运行此算法以根据与训练数据的相似性进行匹配：

[使用多边形逼近和动态对齐的分层形状识别](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=196754&url=http%3A%2F%2Fieeexplore.ieee.org%2Fiel2%2F723%2F5035%2F00196754.pdf%3Farnumber%3D196754)

这两篇论文都相当老了，所以你可以使用谷歌学者来查看谁引用了这些论文，并且在那里你有一个很好的尝试解决这个问题的文献线索。

有许多不同的方法和方法，这在文献中已经得到了很好的研究，您采用哪种方法实际上取决于您希望达到的准确度水平、您想要识别的形状数量以及您的输入数据集。

无论哪种方式，使用凸包算法从点云中生成多边形是第一步，通常会输入到更复杂的算法中。

**编辑：**

我没有考虑 3D 案例，因为他们在计算机图形学中有很多非常有趣的工作，都专注于这一点，例如这篇论文[Efficient RANSAC for Point-Cloud Shape Detection](http://cg.cs.uni-bonn.de/en/publications/paper-details/schnabel-2007-efficient/)

**摘自摘要：**

> > 我们提出了一种自动算法来检测无组织点云中的基本形状。该算法将点云分解为一个简洁的、由固有形状和一组剩余点组成的混合结构。每个检测到的形状都充当一组对应点的代理。我们的方法基于随机采样并检测平面、球体、圆柱体、圆锥体和环面……我们证明了即使存在许多异常值和高度噪声的情况下，该算法也是稳健的……此外，该算法在概念上很简单并且易于实施...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:16:21.990

为了补充 Josiah 的回答——因为你没有说在你的点云中是否有一个这样的对象被检测到——一个好的解决方案可以是使用（广义）[霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)。

这个想法是每个点都会在您正在考虑的形状的参数空间中投票给一组候选者。例如，如果您认为当前对象是一个圆柱体，那么您有一个 7D 参数空间，由圆柱体中心 (3D)、方向 (2D)、高度 (1D) 和半径 (1D) 以及点云中的每个点组成将投票给与该点观察一致的所有参数。这样做允许通过获取具有最高票数的参数集来找到实际圆柱体的参数。对平面、球体等做同样的事情，会给你最好的匹配形状。

这种方法的一个优点是它允许在同一个点云中存在多个对象。

# c - 静态 const 函数指针 C

> ID：16199174
> 
> 赞同：1
> 
> 时间：2013-04-24T18:07:18.313
> 
> 标签：c, arrays, function-pointers

我的问题非常接近这个问题： [你如何声明一个 const 函数指针数组？](https://stackoverflow.com/questions/2200646/how-do-you-declare-a-const-array-of-function-pointers)

我在我的包含文件中成功创建了静态 const 函数指针数组。

```
void fun1( void* );
void fun2( void* );
typedef void ( *funPointer )( void* );
funPointer myFunPointer[2] = { &fun1, &fun2 }; 
```

现在我发现了以下内容：我的编译器（gcc 4.6.3）在我抱怨时

(1) 编译包含此标头的不同 *.o 文件，然后将它们链接在一起（多个定义） - 它有助于在数组声明中使用 static 关键字（编辑：实际上必须将函数声明为静态）。

(2) 编译一个包含头文件的文件，而不是设置数组 const。（myFunPointer 已声明但未使用）

```
static const myFunPointer[2] .... 
```

抓住两个错误/警告。

现在的问题是：我可以解释前一种行为，因为 static 使用“预定义”内存地址，并且函数的几个声明将在该地址处合并。这个解释正确吗？如何解释没有 const 声明的警告？编译器是否有能力自动删除文件中不必要的部分......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:11:35.677

在你的头文件中...

```
void fun1( void* );
void fun2( void* );
typedef void ( *funPointer )( void* );
extern funPointer myFunPointer[2]; 
```

并在您的**一个****源**文件中...

```
funPointer myFunPointer[2] = { fun1, fun2 }; 
```

# android - libgdx box2d 插值不能很好地工作

> ID：16199177
> 
> 赞同：2
> 
> 时间：2013-04-24T18:07:25.470
> 
> 标签：android, box2d, libgdx, interpolation

我正在使用 libgdx 和 box2d 开发一款 Android 游戏。我的问题是 box2d 中身体的插值效果不佳......身体有点滞后。没有插值，身体“更少滞后”。这是我的代码的一部分：

```
public void gameRunning()
{
    mAccumulator += Gdx.graphics.getDeltaTime();

    if(mAccumulator > 1f)
    {
        mAccumulator = 1f;
    }

    while(mAccumulator >= BOX_STEP)
    {
        resetSmooth();
        mWorld.step(BOX_STEP, BOX_VELOCITY_ITERATIONS, BOX_POSITION_ITERATIONS);
        mAccumulator -= BOX_STEP;
    }

    mWorld.clearForces();
    smooth();
}

public void smooth()
{
    float ratio = mAccumulator/BOX_STEP;
    float oneMinusRatio = 1.f-ratio;

    mSmoothedX = ratio*mBowl.getPosition().x+oneMinusRatio*mPreviousX;
    mSmoothedY = ratio*mBowl.getPosition().y+oneMinusRatio*mPreviousY;

    mBowl.setTransform(mSmoothedX, mSmoothedY, 0f);
}

public void resetSmooth()
{
    mSmoothedX = mPreviousX; 
    mSmoothedY = mPreviousY; 

    mPreviousX = mBowl.getPosition().x;
    mPreviousY = mBowl.getPosition().y;
} 
```

问题出在哪里？抱歉我的英语不好，提前谢谢... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T00:08:38.240

你不应该像那样移动 box2d 物体，而是应用力/脉冲。否则，它们在物理模拟中将无法正确运行。

另外，您的 Interpolation 实现对我来说似乎很奇怪，为什么不使用[Interpolation 类](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/Interpolation.html)。

例子：

```
 mSmoothedX = Interpolation.linear.apply(startx, endx, <time>); 
```

# java - SQLite 数据库错误 [致命异常错误]

> ID：16199180
> 
> 赞同：0
> 
> 时间：2013-04-24T18:07:26.310
> 
> 标签：java, android, android-contentprovider, android-sqlite, sqliteopenhelper

mp 应用程序在启动时崩溃。我收到“java.lang.RuntimeException: Unable to get provider”错误。我假设这与我的 sqlite 数据库有关，因为我的contactprovider 现在拥有创建数据库的代码。任何帮助找出造成这种情况的原因都将受到赞赏。我的 Logcat、DB 类和 provicer 类如下。

日志猫：

```
 04-24 12:59:07.305: E/AndroidRuntime(1482): FATAL EXCEPTION: main
 04-24 12:59:07.305: E/AndroidRuntime(1482): java.lang.RuntimeException: Unable to get provider com.loginplus.home.ListProvider: java.lang.NullPointerException
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.app.ActivityThread.installProvider(ActivityThread.java:4240)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.app.ActivityThread.installContentProviders(ActivityThread.java:3992)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3946)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.app.ActivityThread.access$1300(ActivityThread.java:123)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.os.Handler.dispatchMessage(Handler.java:99)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.os.Looper.loop(Looper.java:137)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.app.ActivityThread.main(ActivityThread.java:4424)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at java.lang.reflect.Method.invokeNative(Native Method)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at java.lang.reflect.Method.invoke(Method.java:511)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at dalvik.system.NativeStart.main(Native Method)
 04-24 12:59:07.305: E/AndroidRuntime(1482): Caused by: java.lang.NullPointerException
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.database.DatabaseUtils.getSqlStatementType(DatabaseUtils.java:1318)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1893)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1839)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at com.loginplus.home.dataStore.onCreate(dataStore.java:27)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:165)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at com.loginplus.home.ListProvider.onCreate(ListProvider.java:75)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.content.ContentProvider.attachInfo(ContentProvider.java:944)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    at android.app.ActivityThread.installProvider(ActivityThread.java:4237)
 04-24 12:59:07.305: E/AndroidRuntime(1482):    ... 12 more 
```

数据库类：

```
 public class dataStore extends SQLiteOpenHelper {

//Table attributes
private static final String DATABASE_NAME = "SiteLogindb";
private static  String DSTORE_CREATE;
private static final int DATABASE_VERSION = 2;

dataStore(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(DSTORE_CREATE);

    }           
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        if(oldVersion == 1 && newVersion == 2){
            //Upgrade the database  
    }

        }

            } 
```

内容提供商：

```
 public class ListProvider extends ContentProvider {

// Content Provider Uri and Authority
private static String AUTHORITY = "com.loginplus.home.ListProvider";
public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
        + "/infotable" );

// Used for searching words or looking up a single definition
public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
        + "/mt-tutorial";
public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
        + "/mt-tutorial";

//Database Columns
public static final String COLUMN_ROWID = "_id";
public static final String COLUMN_NAME_SITE = "sName";
public static final String COLUMN_NAME_ADDRESS = "wUrl";
public static final String COLUMN_NAME_USERNAME = "uName";
public static final String COLUMN_NAME_PASSWORD = "pWord";
public static final String COLUMN_NAME_NOTES = "lNotes";

// Database related Constants
public static final String DATABASE_NAME = "SiteLogindb";
public static final int DATABASE_VERSION = 2;
public static final String TABLE_NAME_INFOTABLE = "infoTable";

public static final String DSTORE_CREATE = "create table if not exists " +
        TABLE_NAME_INFOTABLE + " ("+ COLUMN_ROWID + " integer primary key autoincrement,"

                    + COLUMN_NAME_SITE + " text not null,"
                    + COLUMN_NAME_ADDRESS + " text not null,"
                    + COLUMN_NAME_USERNAME + " text not null,"
                    + COLUMN_NAME_PASSWORD + " text not null,"
                    + COLUMN_NAME_NOTES + " text not null);";

//UriMatcher stuff
private static final int LIST = 1;
private static final int LIST_ID = 2;
private static final UriMatcher sURIMatcher = buildUriMatcher();

private SQLiteDatabase lDB;

private static UriMatcher buildUriMatcher() {

    UriMatcher matcher = new UriMatcher(UriMatcher.NO_MATCH);

    // get definitions
    matcher.addURI(AUTHORITY, "infoTable", LIST);
    matcher.addURI(AUTHORITY, "infoTable/#", LIST_ID);
    return matcher;

}

@Override
public boolean onCreate() {
    lDB = new dataStore(getContext()).getWritableDatabase();
    return true;
}

 @Override
public Cursor query(Uri uri, String[] ignored1, String ignored2,
        String[] ignored3, String ignored4) {

    String[] projection = new String[] {

            ListProvider.COLUMN_ROWID,
            ListProvider.COLUMN_NAME_SITE,
            ListProvider.COLUMN_NAME_ADDRESS,
            ListProvider.COLUMN_NAME_USERNAME,
            ListProvider.COLUMN_NAME_PASSWORD,
            ListProvider.COLUMN_NAME_NOTES };

    Cursor c;
    switch (sURIMatcher.match(uri)) {

    case LIST:
        c = lDB.query(ListProvider.TABLE_NAME_INFOTABLE, projection, null, null, null, null, null);
        break;

    case LIST_ID:
        c = lDB.query(ListProvider.TABLE_NAME_INFOTABLE, projection, ListProvider.COLUMN_ROWID + "=?", 
                new String[] { Long.toString(ContentUris.parseId(uri)) },
                    null, null, null, null);

       if (c !=null && c.getCount() > 0) {
           c.moveToFirst();
       }
        break;

    default:
        throw new IllegalArgumentException("Unknown URI");
    }

    c.setNotificationUri(getContext().getContentResolver(), uri);
    return c;
  }

   //Inserting DB entries
    @Override
    public Uri insert(Uri uri, ContentValues values) {

        values.remove(ListProvider.COLUMN_ROWID);
        long id = lDB.insertOrThrow(TABLE_NAME_INFOTABLE, null, values);
        getContext().getContentResolver().notifyChange(uri, null);
        return ContentUris.withAppendedId(uri, id);
    }
//Deleting DB entries
@Override
public int delete(Uri uri, String ignored1, String[] ignored2) {
    int count = lDB.delete(ListProvider.TABLE_NAME_INFOTABLE, ListProvider.COLUMN_ROWID + "=?", 
    new String[] { Long.toString(ContentUris.parseId(uri)) });

    if (count > 0)
        getContext().getContentResolver().notifyChange(uri, null);
    return count;

}

//updating DB entries
@Override
public int update(Uri uri, ContentValues values, String ignored1,
        String[] ignored2) {
    int count = lDB.update(TABLE_NAME_INFOTABLE, values, COLUMN_ROWID + "=?",new String[] {
            Long.toString(ContentUris.parseId(uri)) });
    if( count>0)
        getContext().getContentResolver().notifyChange(uri, null);
    return count;
}

@Override
public String getType(Uri uri) {
    // TODO Auto-generated method stub
    switch (sURIMatcher.match(uri)) {

    case LIST:
        return CONTENT_ITEM_TYPE;
    case LIST_ID:
        return CONTENT_TYPE;
    default:
        throw new IllegalArgumentException("Unsupported URI: " + uri);  
    }
}
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:21:00.680

**可能的解释：**在 onCreate() 内部的 db.execSQL(DSTORE_CREATE) 调用它之前，我看不到你在哪里初始化 DSTORE_CREATE 字符串？您已经在内容提供程序中定义了它，但 dataStore 对象不知道您在内容提供程序类中所做的此声明。

**可能的解决方案：** 如果您只是想摆脱它，请将 DSTORE_CREATE 定义到 dataStore 类而不是 ListProvider 类中。

希望这可以帮助。如果仍有问题，请发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:14:20.307

您必须在 dataStore 类中初始化 DSTORE_CREATE 或使用 ListProvider 中的那个。

# java - Java井字游戏，Gui不工作

> ID：16199184
> 
> 赞同：-6
> 
> 时间：2013-04-24T18:07:34.400
> 
> 标签：java, user-interface, tic-tac-toe

我的 GUI 不适用于我的井字游戏……我想知道我做错了什么/出了什么问题，为什么这不能正常工作？游戏应该有九个盒子和井字游戏，然后能够点击盒子来获得 X 和 O，直到有人获胜。

这几乎是我现在的问题。如问题中所述，GUI 不起作用。它会询问玩家姓名以及您想成为哪个字母，X 或 O。就是这样。我想知道为什么带有九个框的 GUI 不显示。

这是我的代码：

* * *

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

import javax.swing.JOptionPane;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

//Tic Tac Toe

@SuppressWarnings("serial")
public class TicTacToeSwing extends JFrame implements ActionListener {  

//JButtons

//private JButton button1 = new JButton("");    
private JButton jbtnTicTacToe1;
private JButton jbtnTicTacToe2;
private JButton jbtnTicTacToe3;
private JButton jbtnTicTacToe4;
private JButton jbtnTicTacToe5;
private JButton jbtnTicTacToe6;
private JButton jbtnTicTacToe7;
private JButton jbtnTicTacToe8;
private JButton jbtnTicTacToe9;

private JButton jbtnExit = new JButton("Exit"); 
private JButton jbtnReset = new JButton("Reset");

//JFrame window = new JFrame("Tic-Tac-Toe Swing ");
private JFrame window = new JFrame("Tic-Tac-Toe");

//labels
JLabel lblTitle = new JLabel("Tic-Tac-Toe!");
private JLabel jlblPlayerX = new JLabel ("X");
private JLabel jlblPlayerO = new JLabel ("O");

//text fields
JTextArea txtMessage = new JTextArea();
JTextField jtfName = new JTextField(20);
private JTextField jtfPlayerX = new JTextField("X");
private JTextField jtfPlayerO = new JTextField("O");

//Panels
JPanel jpnlMain = new JPanel ();
    JPanel jpnlFamily = new JPanel();
    JPanel jpnlNorth = new JPanel();
    JPanel jpnlSouth = new JPanel();
    JPanel jpnlCenter = new JPanel();
    JPanel jpnlTop = new JPanel();
    JPanel jpnlBottom = new JPanel();

//Class Constructor
public TicTacToeSwing () {

    //Prepare JFrame/Window
    super ("Tic Tac Toe");
    setSize(400,400);
    setTitle("Tic Tac Toe Swing");
    setDefaultCloseOperation(JF3rame.EXIT_ON_CLOSE);

    String n1 = JOptionPane.showInputDialog("Enter Player X name");
    String n2 = JOptionPane.showInputDialog("Enter Player O name"); 

    String input = JOptionPane.showInputDialog("Please select player X or player O: \n1) X\n2) O"); }

    private int Player1;
    private int Player2;

    //Calculate Who's turn is it

    public void actionPerformed1(ActionEvent a) {    
        int count = 0;

    if(count == 1 || count == 3 || count == 5 || count == 7 || count == 9){
    int letter = Player1;
    }

    else if(count == 2 || count == 4 || count == 6 || count == 8 || count == 10){
    int letter = Player2;
    }

    //Set the layouts for 3 rows and 3 columns
    jpnlMain.setLayout(new BorderLayout(3,3));
    jpnlCenter.setLayout(new GridLayout());
    jpnlSouth.setLayout(new GridLayout());
    jpnlTop.setLayout(new BorderLayout());
    jpnlBottom.setLayout(new BorderLayout());

    //Center Panel
    jpnlCenter.add(jlblPlayerX);
    jpnlCenter.add(jlblPlayerO);

    //identify each JButton
    jbtnReset.setActionCommand("Reset");
    jbtnExit.setActionCommand("Exit");

    //register JButton for event handling by using the THIS keyword - THIS class will handle the events
    jbtnReset.addActionListener(this);
    jbtnExit.addActionListener(this);

    /*Add Buttons To The Window*/
    window.add(jbtnTicTacToe1);
    window.add(jbtnTicTacToe2);
    window.add(jbtnTicTacToe3);
    window.add(jbtnTicTacToe4);
    window.add(jbtnTicTacToe5);
    window.add(jbtnTicTacToe6);
    window.add(jbtnTicTacToe7);
    window.add(jbtnTicTacToe8);
    window.add(jbtnTicTacToe9);

    /*Add The Action Listener To The Buttons
    button1.addActionListener(this);
    button2.addActionListener(this);
    button3.addActionListener(this);
    button4.addActionListener(this);
    button5.addActionListener(this);
    button6.addActionListener(this);
    button7.addActionListener(this);
    button8.addActionListener(this);
    button9.addActionListener(this);
    */

    jbtnTicTacToe1.addActionListener(this);
    jbtnTicTacToe2.addActionListener(this);
    jbtnTicTacToe3.addActionListener(this);
    jbtnTicTacToe4.addActionListener(this);
    jbtnTicTacToe5.addActionListener(this);
    jbtnTicTacToe6.addActionListener(this);
    jbtnTicTacToe7.addActionListener(this);
    jbtnTicTacToe8.addActionListener(this);
    jbtnTicTacToe9.addActionListener(this);

    //South Button Panel
    jpnlSouth.add(jbtnReset);
    jpnlSouth.add(jbtnExit);

    /* Instantiate JButtons, put into a method for efficiency
    jbtn1 = instantiateJButton("1", Color.PINK);
    jbtn2 = instantiateJButton("2", Color.PINK);
    jbtn3 = instantiateJButton("3", Color.PINK);
    jbtn4 = instantiateJButton("4", Color.PINK);
    jbtn5 = instantiateJButton("5", Color.PINK);
    jbtn6 = instantiateJButton("6", Color.PINK);
    jbtn7 = instantiateJButton("7", Color.PINK);
    jbtn8 = instantiateJButton("8", Color.PINK);
    jbtn9 = instantiateJButton("9", Color.PINK);
    */

    //Finalize screen layout and publish to the display
    jpnlMain.add(jpnlCenter, BorderLayout.NORTH);
    jpnlMain.add(jpnlSouth, BorderLayout.CENTER);

    //Prepare the container
    Container ca = getContentPane();
    ca.setBackground (Color.LIGHT_GRAY);
    ca.add(jpnlMain);
    setContentPane (ca);

    setVisible(true);
    //end constructor       
}

//CLASS EVENT HANDLER
public void actionPerformed(java.awt.event.ActionEvent e)
{
    //find out which JButton was pressed by using the Action Command
    String sActionCommand = e.getActionCommand();

    //EXIT JButton
    if (sActionCommand.equals("Exit"))
    {
        System.exit(0);
    }

    //RESET JButton
    else if (sActionCommand == "Reset")
    {
        jtfPlayerX.setText("");
        jtfPlayerO.setText("");
    }
}   //end ACTIONPERFORMED (java.awt.event.ActionEvent e)

/**
 * @param args
 */
public static void main(String[] args) {
    //EXECUTION STARTING POINT

    //TicTacToeSwing TicTacToeSwing = new TicTacToeSwing();

    //TicTacToeSwing TicTacToeObject = new TicTacToeSwing();

    new TicTacToeSwing();

}//end main(String[] args)

}//end TicTacToeSwing class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:17:22.490

您有两个 JFrame、类本身和 window 变量。一个 JFrame 窗口获取所有按钮，而另一个则显示。我建议您不要让您的类扩展 JFrame，而是显示窗口 JFrame。

# grails - 在 grails vs playframework 中显示照片

> ID：16199188
> 
> 赞同：0
> 
> 时间：2013-04-24T18:07:42.837
> 
> 标签：grails, playframework-2.0, grails-controller

我一直在使用 Grails 框架进行一些测试，现在我正在尝试在 playframework 中做类似的事情。

基本上，我想显示一些图片，但要隐藏（为了能够避免任何爬行并能够更改托管）图片路径。

gsp页面：

```
<g:each in="${images}"  var="img">
        <img class="thumbnail" src='${createLink(controller: "images", action: "displayImage", params:[img: img.name])}'/>
</g:each> 
```

控制器：

```
def displayImage() {
        File image = new File(IMAGES_DIR.absolutePath +'/' + params.img)
        if(!image.exists()) {
            response.status = 404
        } else {
            response.setContentType("application/jpg")
            OutputStream out = response.getOutputStream();
            out.write(image.bytes);
            out.close();
        }
} 
```

html 生成的页面如下所示：

```
<img class="thumbnail" src='/myhost/images/displayImage?img=blabla.jpg' /> 
```

我的问题：

*   这是最好的方法吗？

*   关于性能？

*   这比使用 http 显示图片慢吗？

*   我可以在 Playframework 中做这样的事情吗？如果是，如何？

谢谢。

抄送

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:56:41.130

对于**静态**和**公共**资源，最有可能使用原始 HTTP 服务器将是最快的解决方案，所以我认为不需要通过 Java 控制器“拖动”它。实际上，您可以使用非常相似的 Play 来做到这一点，但更容易 - 因为 Play 允许您直接返回 a`File`作为响应主体，即（从我的头顶写下）：

```
public static Result displayImage(String imagePath) {
    File image = new File(SOME_CONFIGURED_FOLDER_WITH_IMAGES +'/' + imagePath)
    if(!image.exists()) return notFound();
    return ok(image).as("image/jpg");
} 
```

无论如何，您应该仅在以下情况下使用它：

*   你**不会**使用额外的 HTTP 服务器（记住，Play 已经内置了一个？）
*   你需要带一些访问控制
*   您想要执行一些操作，即。缩放、裁剪等（在这种情况下，恕我直言，最好只使用 Play 来创建缩略图，并使用通用 HTTP 服务器提供它......）

感谢这种方法：

*   您不会浪费处理器的资源，因为 HTTP 服务器只需要提供存储在磁盘上的文件，而不是将其重写为`Result`.
*   您的应用程序可以专注于其他动态操作，因此速度更快。
*   您可以（并且应该）使用典型的网站管理员技术来优化服务静态内容，例如`cookie free domains`，高级`caching headers`等（您也可以在 Play 控制器中这样做，但是......）

# javascript - 无法弄清楚为什么不应该更新数组？

> ID：16199191
> 
> 赞同：0
> 
> 时间：2013-04-24T18:07:47.670
> 
> 标签：javascript, jquery, arrays, debugging, canvas

我正在使用 Javascript 和 HTML5 Canvas 构建康威的生活游戏。此处的代码位于 gameOfLife 对象的上下文中：

```
this.cells = [];
this.nextCellState = []; 
```

填充`this.cells`我的单元格对象后，我填充`this.nextCellState`如下：

```
this.nextCellState = this.nextCellState.concat(this.cells); 
```

在鼠标单击时，相应的单元格对象属性 isAlive 变为 true：

```
function clickAlive(x, y) {
    for (var i in this.cells) {
        if (x.between(this.cells[i].x, this.cells[i].x + cellsize) && y.between(this.cells[i].y, this.cells[i].y + cellsize)) {
            this.cells[i].isAlive = true;
            console.log('Breakpoint');
        }
    }
} 
```

问题是，查看断点处`cells`的`nextCellState`数组，它们都将单击的单元格激活为`true`.

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:15:40.787

当您复制`cells`into的内容时`nextCellState`，您正在制作数组的浅表副本。对象本身现在由两个数组别名（即，`cells[0]`并`nextCellState[0]`引用同一个对象）。

您需要在其中创建新对象`nextCellState`才能独立更改对象的内部状态。最简单的方法是您的单元格对象具有复制构造函数。然后你可以做这样的事情：

```
this.nextCellState = this.nextCellState.concat(
    this.cells.map(function(cell) {
        return cell.copy();  // or whatever your copy constructor is
    })
); 
```

# python - FInd (X, Y) 对和相关的 Z 坐标

> ID：16199197
> 
> 赞同：0
> 
> 时间：2013-04-24T18:07:58.777
> 
> 标签：python, list

我有一个列表列表`DataCoord`：

```
[nodeID, X, Y, Z] 
```

多行。一些节点将具有相同的`X`坐标`Y`和不同的`Z`坐标。例如，假设我有：

```
Pair (X,Y) = (0,0):
[1, 0, 0, 0,]: level 0
[m, 0, 0, 200]: level m
[n, 0, 0, 100]: level n #the DataCoord list may not be ordered 
```

我想`z`为这对识别和排序不同的级别`(x,y)`。
对于共享相同`X`和`Y`坐标的其他部分也是如此。

任何帮助表示赞赏。

编辑：作为一个例子`DataCoord`：

```
[['173', '0.', '0.', '0.'], ['183', '1000.', '0.', '0.'], ['184', '0.', '1000.', '0.'], ['194', '1000.', '1000.', '0.'], ['195', '0.', '0.', '1000.'], ['205', '1000.', '0.', '1000.'], ['206', '0.', '1000.', '1000.'], ['216', '1000.', '1000.', '1000.'], ['217', '0.', '0.', '2000.'], ['227', '1000.', '0.', '2000.'], ['228', '0.', '1000.', '2000.'], ['238', '1000.', '1000.', '2000.'], ['239', '0.', '0.', '3000.'], ['249', '1000.', '0.', '3000.'], ['250', '0.', '1000.', '3000.'], ['260', '1000.', '1000.', '3000.'], ['261', '0.', '0.', '4000.'], ['271', '1000.', '0.', '4000.'], ['272', '0.', '1000.', '4000.'], ['282', '1000.', '1000.', '4000.'], ['283', '0.', '0.', '0.'], ['293', '0.', '1000.', '0.'], ['294', '1000.', '0.', '0.'], ['304', '1000.', '1000.', '0.'], ['305', '0.', '0.', '1000.'], ['315', '0.', '1000.', '1000.'], ['316', '1000.', '0.', '1000.'], ['326', '1000.', '1000.', '1000.'], ['327', '0.', '0.', '2000.'], ['337', '0.', '1000.', '2000.'], ['338', '1000.', '0.', '2000.'], ['348', '1000.', '1000.', '2000.'], ['349', '0.', '0.', '3000.'], ['359', '0.', '1000.', '3000.'], ['360', '1000.', '0.', '3000.'], ['370', '1000.', '1000.', '3000.'], ['371', '0.', '0.', '4000.'], ['381', '0.', '1000.', '4000.'], ['382', '1000.', '0.', '4000.'], ['392', '1000.', '1000.', '4000.'], ['436', '-1000.', '0.', '0.'], ['446', '0.', '0.', '0.'], ['447', '-1000.', '1000.', '0.'], ['457', '0.', '1000.', '0.'], ['458', '-1000.', '1000.', '1000.'], ['468', '0.', '1000.', '1000.'], ['469', '-1000.', '1000.', '2000.'], ['479', '0.', '1000.', '2000.'], ['480', '-1000.', '1000.', '3000.'], ['490', '0.', '1000.', '3000.'], ['491', '-1000.', '0.', '0.'], ['501', '-1000.', '1000.', '0.'], ['502', '-1000.', '1000.', '4000.'], ['512', '0.', '1000.', '4000.'], ['513', '-1000.', '0.', '1000.'], ['523', '0.', '0.', '1000.'], ['524', '-1000.', '0.', '2000.'], ['534', '0.', '0.', '2000.'], ['535', '-1000.', '0.', '3000.'], ['545', '0.', '0.', '3000.'], ['546', '-1000.', '0.', '4000.'], ['556', '0.', '0.', '4000.'], ['557', '-1000.', '0.', '1000.'], ['567', '-1000.', '1000.', '1000.'], ['568', '-1000.', '0.', '3000.'], ['578', '-1000.', '1000.', '3000.'], ['579', '-1000.', '0.', '2000.'], ['589', '-1000.', '1000.', '2000.'], ['590', '-1000.', '0.', '4000.'], ['600', '-1000.', '1000.', '4000.'], ['687', '0.', '2000.', '0.'], ['697', '1000.', '2000.', '0.'], ['698', '0.', '2000.', '1000.'], ['708', '1000.', '2000.', '1000.'], ['709', '0.', '2000.', '2000.'], ['719', '1000.', '2000.', '2000.'], ['720', '0.', '2000.', '3000.'], ['730', '1000.', '2000.', '3000.'], ['731', '0.', '2000.', '4000.'], ['741', '1000.', '2000.', '4000.'], ['742', '0.', '1000.', '0.'], ['752', '0.', '2000.', '0.'], ['753', '1000.', '1000.', '1000.'], ['763', '1000.', '2000.', '1000.'], ['764', '1000.', '1000.', '3000.'], ['774', '1000.', '2000.', '3000.'], ['775', '1000.', '1000.', '0.'], ['785', '1000.', '2000.', '0.'], ['786', '1000.', '1000.', '2000.'], ['796', '1000.', '2000.', '2000.'], ['797', '1000.', '1000.', '4000.'], ['807', '1000.', '2000.', '4000.'], ['808', '-1000.', '1000.', '0.'], ['818', '-1000.', '2000.', '0.'], ['819', '0.', '1000.', '1000.'], ['829', '0.', '2000.', '1000.'], ['830', '0.', '1000.', '2000.'], ['840', '0.', '2000.', '2000.'], ['841', '0.', '1000.', '3000.'], ['851', '0.', '2000.', '3000.'], ['852', '0.', '1000.', '4000.'], ['862', '0.', '2000.', '4000.'], ['863', '-1000.', '2000.', '0.'], ['873', '0.', '2000.', '0.'], ['874', '-1000.', '2000.', '1000.'], ['884', '0.', '2000.', '1000.'], ['885', '-1000.', '2000.', '2000.'], ['895', '0.', '2000.', '2000.'], ['896', '-1000.', '2000.', '3000.'], ['906', '0.', '2000.', '3000.'], ['907', '-1000.', '2000.', '4000.'], ['917', '0.', '2000.', '4000.'], ['918', '-1000.', '1000.', '1000.'], ['928', '-1000.', '2000.', '1000.'], ['929', '-1000.', '1000.', '3000.'], ['939', '-1000.', '2000.', '3000.'], ['940', '-1000.', '1000.', '2000.'], ['950', '-1000.', '2000.', '2000.'], ['951', '-1000.', '1000.', '4000.'], ['961', '-1000.', '2000.', '4000.']] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:12:07.867

循环您的值并收集每个 X、Y 对的 Z 坐标；using使这更容易一些，将每个键[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)的默认值设置为空：`set`

```
from collections import defaultdict

levels = defaultdict(set)

for node_id, x, y, z in list_of_datacoords:
    levels[x, y].add(z) 
```

现在`levels`是将坐标映射`x, y`到一组唯一`z`值的字典。

对于您的示例输入，这将导致：

```
>>> pprint(dict(levels))
{('-1000.', '0.'): set(['0.', '1000.', '2000.', '3000.', '4000.']),
 ('-1000.', '1000.'): set(['0.', '1000.', '2000.', '3000.', '4000.']),
 ('-1000.', '2000.'): set(['0.', '1000.', '2000.', '3000.', '4000.']),
 ('0.', '0.'): set(['0.', '1000.', '2000.', '3000.', '4000.']),
 ('0.', '1000.'): set(['0.', '1000.', '2000.', '3000.', '4000.']),
 ('0.', '2000.'): set(['0.', '1000.', '2000.', '3000.', '4000.']),
 ('1000.', '0.'): set(['0.', '1000.', '2000.', '3000.', '4000.']),
 ('1000.', '1000.'): set(['0.', '1000.', '2000.', '3000.', '4000.']),
 ('1000.', '2000.'): set(['0.', '1000.', '2000.', '3000.', '4000.'])} 
```

您现在可以获得每`x, y`对级别的排序列表：

```
for (x, y), z in levels.iteritems():
    z = sorted(z)
    # now you have x, y and a sorted list of `z` values. 
```

上面的`pprint()`调用已经按排序顺序打印了集合；这是因为`pprint()`默认情况下对 python 序列的输出进行排序。

# notepad++ - 记事本++从和过去复制到字符串上的特定位置

> ID：16199202
> 
> 赞同：2
> 
> 时间：2013-04-24T18:08:21.793
> 
> 标签：notepad++, copy-paste, forms

我有一个巨大的 HTML 表单。

```
<form>
    <input type="checkbox" value="whatever1" id=""><label for="">whatever1</label>
    <input type="checkbox" value="whatever2" id="" ><label for="">whatever2</label>
    <input type="checkbox" value="whatever3" id=""><label for="">whatever3</label>
    <input type="checkbox" value="whatever4" id=""><label for="">whatever4</label>
    <input type="checkbox" value="whatever5" id=""><label for="">whatever5</label>
    ...
</form> 
```

我想知道是否可以使用 Notepad++ 从 value="[copy this]" 复制文本并将其粘贴到每行的 id="[paste here]" 和 for="[paste here]" 中。

如果有人对此有解决方案，那么每个 Web 开发人员都会非常高兴：D

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:19:28.823

您可以将正则表达式与带有替换功能的 Notepad++ 一起使用。请务必选中“正则表达式”复选框。

在“查找内容”输入中：`<input type="checkbox" value="(.*)" id="(.*)"><label for="(.*)">(.*)</label>`

在“替换为”输入中：`<input type="checkbox" value="\1" id="\1"><label for="\1">\4</label>`

现在，您可以“全部替换”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:37:45.847

如果您希望它移动包含“value”、“id”和“for”属性的任何行的值，您可以使用这个通用正则表达式查找和替换：

找到什么=`^(.+value=")([^"]+)(".*id=")[^"]*(".*for=")[^"]*(".*)$`

替换为=`\1\3\2\4\2\5`

如果您不关心元素的名称或“类型”等其他属性的内容，这将很有用。

# javascript - 在 HTML5 画布中绘制任意形状

> ID：16199207
> 
> 赞同：2
> 
> 时间：2013-04-24T18:08:49.013
> 
> 标签：javascript, html, html5-canvas

我正在尝试使用 HTML5 画布元素绘制图表。该图由顶点和连接这些顶点的边组成。我用小圆圈表示顶点，用连​​接圆圈的线表示边缘。

在我的项目中，我想在按下“下一步”按钮时更改顶点的位置。下图是页面首次加载时画布的状态：

![在此处输入图像描述](https://i.stack.imgur.com/mwaVi.png)

单击“下一步”按钮时，将根据顶点的新坐标重新绘制图形。但是，渲染似乎有错误，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/PTngK.png)

奇怪的是，我没有在任何地方使用 fill() 函数，所以我无法理解为什么要填充部分。以下是用于绘制图形的 draw() 函数的代码：

```
function draw(position)
{
    var canvas_elem = document.getElementById('drawing');

    // Check the element is in the DOM and the browser supports canvas
    if(canvas_elem.getContext)
    {
        // Initaliase a 2-dimensional drawing context
        var canvas = canvas_elem.getContext('2d');

        // Clear canvas
        canvas.clearRect(0, 0, canvas_elem.width, canvas_elem.height);

        var data = data_array[num_vertices+1+position].split(",");

        // Draw all vertices
        for( var i=0; i<num_vertices; i++)
        {
            canvas.arc(data[2*i], data[2*i+1], radius, 0, 2 * Math.PI, false);
            canvas.fillStyle = 'black';
            canvas.fill();
        }

        // Connect vertices by lines according to adjacency matrix
        for(var i=0;i<num_vertices; i++)
        {
            for(var j=i; j<num_vertices; j++)
            {
                if(adjacency[i][j]==1)
                {
                    canvas.beginPath();
                    canvas.moveTo(data[2*i],data[2*i+1]);
                    canvas.lineTo(data[2*j],data[2*j+1]);
                    canvas.stroke();
                }
            }
        }
    }
    else
    {
        alert("Please use an HTML5 compatible browser.");
    }
} 
```

关于这里可能发生的事情的任何线索？

* * *

取这些变量的以下值进行调试：

```
data_array=[
"10",
"0,1,1,0,0,0,0,0,0,0",
"1,0,0,1,0,0,0,0,0,1",
"1,0,0,0,1,0,0,0,0,1",
"0,1,0,0,0,1,0,0,1,1",
"0,0,1,0,0,0,1,0,1,1",
"0,0,0,1,0,0,0,1,1,0",
"0,0,0,0,1,0,0,1,1,0",
"0,0,0,0,0,1,1,0,0,0",
"0,0,0,1,1,1,1,0,0,0",
"0,1,1,1,1,0,0,0,0,0",
"10,2,35.4,23.3,88.9,100,210,350,70,500,412,208,336,112,45,32,89,92,102,23",
"30,4,19.4,35.3,80.9,90,230,310,120,440,400,220,330,105,40,29,80,89,90,18"
]

num_vertices=10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:36:26.170

该`.arc()`方法向当前路径添加点，该`.fill()`方法填充当前路径。如果您继续调用`.arc()`，则您将重复使用相同的路径，因此最终会被填满。使用以下命令开始新路径`.beginPath()`：

```
// Draw all vertices
for( var i=0; i<num_vertices; i++)
{
    canvas.beginPath();
    canvas.arc(data[2*i], data[2*i+1], radius, 0, 2 * Math.PI, false);
    canvas.fill();
} 
```

[http://jsfiddle.net/PAPr5/2/](http://jsfiddle.net/PAPr5/2/)

或者，使用`.moveTo()`. 这让您只需一次调用即可绘制所有点`.fill()`。

```
// Draw all vertices
for (var i = 0; i < num_vertices; i++) {
    var x = data[2 * i];
    var y = data[2 * i + 1]
    canvas.moveTo(x, y);
    canvas.arc(x, y, radius, 0, 2 * Math.PI, false);
}
canvas.fill(); 
```

[http://jsfiddle.net/PAPr5/5/](http://jsfiddle.net/PAPr5/5/)

[根据规范](http://www.w3.org/TR/2dcontext/#dom-context-2d-arc)，`.arc()`不应创建新路径或子路径。Google Chrome 中的实现`.arc()`不符合规范。在 Chrome 中，每次调用都会`.arc()`创建一个新的子路径。这种行为是非标准的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:49:20.470

好吧，一个愚蠢的错误。画完每条线后我忘记调用 closePath() 了。

# angularjs - AngularJS：来自指令的广播事件

> ID：16199212
> 
> 赞同：55
> 
> 时间：2013-04-24T18:09:05.950
> 
> 标签：angularjs, angularjs-scope

我已经看到人们在他们的代码中的任何地方都这样做：

```
$rootScope.$broadcast('someEvent', someParameter); 
```

然后在一些控制器中：

```
$rootScope.$on('someEvent', function(event, e){ /* implementation here */ }); 
```

现在，我想从指令中广播一个事件。在 rootScope 级别广播它是一种好习惯吗？我想在控制器中处理这个事件。我可以使用 $scope 吗，还是我还需要收听 $rootScope ？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-24T19:31:07.243

> 就我而言，我只想将一个事件从指令广播到视图的控制器，我在其中使用指令。那么使用广播还有意义吗？

我会让指令调用控制器上的方法，该方法在使用指令的 HTML 中指定：

对于使用隔离范围的指令：

```
<div my-dir ctrl-fn="someCtrlFn(arg1)"></div>

app.directive('myDir', function() {
  return {
    scope: { ctrlFn: '&' },
    link: function(scope, element, attrs) {
       ...
       scope.ctrlFn({arg1: someValue});
    } 
```

对于不使用隔离范围的指令：

```
<div my-dir ctrl-fn="someCtrlFn(arg1)"></div>

app.directive('myDir', function($parse) {
  return {
    scope: true,  // or no new scope -- i.e., remove this line
    link: function(scope, element, attrs) {
       var invoker = $parse(attrs.ctrlFn);
       ...
       invoker(scope, {arg1: someValue} );
    } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-24T18:42:00.690

不使用 $rootScope 通常是个好主意，因为它是全局的，除非你真的知道你在做什么，否则你不应该污染它。我建议你阅读[这篇关于服务、指令和控制器之间通信的文章](http://www.yearofmoo.com/2012/10/more-angularjs-magic-to-supercharge-your-webapp.html#communication-between-services-and-controllers)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T12:25:32.927

这是一个 TypeScript 示例，说明如何从嵌入式指令回调控制器上的方法。需要注意的最重要的一点是，回调的指令参数名称在定义时使用 &，并且在调用该回调时，您不应使用位置参数，而应使用具有目标中参数名称的属性的对象。

在创建应用模块时注册指令：

```
module MyApp {
    var app: angular.IModule = angular.module("MyApp");
    MyApp.Directives.FileUploader.register(app);
} 
```

注册码如下：

```
module MyApp.Directives.FileUploader {
  class FileUploaderDirective implements angular.IDirective {
      public restrict: string = "E";
      public templateUrl: string = "/app/Directives/FileUploader/FileUploaderDirective.html";

      //IMPORTANT - Use & to identify this as a method reference
      public scope: any = {
        onFileItemClicked: "&"
      };
      public controller: string = "MyApp.Directives.FileUploader.Controller";
      public controllerAs: string = "controller";
      public bindToController: boolean = true;
      public transclude: boolean = true;
      public replace: boolean = true;
  }

  export function register(app: angular.IModule) {
      app.controller("MyApp.Directives.FileUploader.Controller", Controller);
      app.directive("fileUploader", () => new FileUploaderDirective());
  }
} 
```

指令的控制器看起来像这样

```
module MyApp.Directives.FileUploader {
    export class Controller {
        public files: string[] = ["One", "Two", "Three"];
        //The callback specified in the view that created this directive instance
        public onFileItemClicked: (fileItem) => void;

        // This is the controller method called from its HTML's ng-click
        public fileItemClicked(fileItem) {
            //IMPORTANT: Don't use comma separated parameters,
            //instead use an object with property names to act as named parameters
            this.onFileItemClicked({
                fileItem: fileItem
            });
        }
    }
} 
```

指令的 HTML 看起来像这样

```
<ul>
  <li ng-repeat="item in controller.files" ng-click="controller.fileItemClicked (item)">
    {{ item }}
  </li>
</ul> 
```

主视图将具有您的指令的实例，如下所示

```
<body ng-app="MyApp" ng-controller="MainController as controller">
  <file-uploader on-file-item-clicked="controller.fileItemClicked(fileItem)"/>
</body> 
```

现在你的 MainController 上只需要一个方法

```
public fileItemClicked(fileItem) {
  alert("Clicked " + fileItem);
} 
```

# slickgrid - Slick Grid 允许点击进入 Formatter 对象

> ID：16199216
> 
> 赞同：0
> 
> 时间：2013-04-24T18:09:25.797
> 
> 标签：slickgrid

我有一个叫做面板格式化程序的东西，它只是在单元格中放置了一些内联可配置的 html 元素。

但是，当前单击元素被光滑网格的代码阻止。我试过这种方法：

```
gridObj.onClick.subscribe(function(e,args) {
    var target = $(e.target);

    if (target.hasClass("panelFormatter")) {
        e.stopImmediatePropagation(); 
```

但是，这不允许事件归档到此面板对象。有没有办法进行点击（并悬停）。流向格式化程序 html 对象？

或者是将这个对象移动到网格之外并绝对定位它的唯一方法？

-蒂姆

# c# - C#.Net 中的可选返回

> ID：16199227
> 
> 赞同：68
> 
> 时间：2013-04-24T18:09:52.680
> 
> 标签：c#, .net, nullable, optional

Java 1.8 正在接收这个`Optional<T>`类，它允许我们明确说明一个方法何时可以返回一个 null 值并“强制”它的使用者在使用它之前验证它是否不是 null ( `isPresent()`)。

我看到 C# has `Nullable<T>`，它做了类似的事情，但具有基本类型。它似乎用于数据库查询，以区分值何时存在且为 0 与不存在且为 null 时。

但似乎 C#`Nullable<T>`不适用于对象，仅适用于基本类型，而 Java`Optional<T>`仅适用于对象，不适用于基本类型。

C# 中是否有一个 Nullable/Optional 类，它迫使我们在提取和使用对象之前测试它是否存在？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-24T18:14:48.173

不是语言，不，但您可以自己制作：

```
public struct Optional<T>
{
    public bool HasValue { get; private set; }
    private T value;
    public T Value
    {
        get
        {
            if (HasValue)
                return value;
            else
                throw new InvalidOperationException();
        }
    }

    public Optional(T value)
    {
        this.value = value;
        HasValue = true;
    }

    public static explicit operator T(Optional<T> optional)
    {
        return optional.Value;
    }
    public static implicit operator Optional<T>(T value)
    {
        return new Optional<T>(value);
    }

    public override bool Equals(object obj)
    {
        if (obj is Optional<T>)
            return this.Equals((Optional<T>)obj);
        else
            return false;
    }
    public bool Equals(Optional<T> other)
    {
        if (HasValue && other.HasValue)
            return object.Equals(value, other.value);
        else
            return HasValue == other.HasValue;
    }
} 
```

请注意，您将无法模拟 的某些行为`Nullable<T>`，例如将没有值的可空值装箱为空的能力，而不是装箱的可空值，因为它具有对该（和其他一些）行为的特殊编译器支持.

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-09-25T18:42:23.123

在我看来，任何`Option`暴露`HasValue`属性的实现都是整个想法的失败。可选对象的要点是您可以无条件地调用它们的内容，而无需测试内容是否存在。

如果您必须测试可选对象是否包含值，那么与普通`null`测试相比，您没有做任何新的事情。

这是我详细解释可选对象的文章：[C# 中 Option/Maybe 类型的自定义实现](http://codinghelmet.com/?path=howto/custom-implementation-of-the-option-maybe-type-in-cs)

这是包含代码和示例的 GitHub 存储库：[https ://github.com/zoran-horvat/option](https://github.com/zoran-horvat/option)

如果您不愿意使用重量级的 Option 解决方案，那么您可以轻松构建一个轻量级的解决方案。您可以创建自己的`Option<T>`实现`IEnumerable<T>`接口的类型，以便您可以利用 LINQ 扩展方法将调用变为可选。这是最简单的可能实现：

```
public class Option<T> : IEnumerable<T>
{
    private readonly T[] data;

    private Option(T[] data)
    {
        this.data = data;
    }

    public static Option<T> Create(T value)
    {
        return new Option<T>(new T[] { value });
    }

    public static Option<T> CreateEmpty()
    {
        return new Option<T>(new T[0]);
    }

    public IEnumerator<T> GetEnumerator()
    {
        return ((IEnumerable<T>)this.data).GetEnumerator();
    }

    System.Collections.IEnumerator
        System.Collections.IEnumerable.GetEnumerator()
    {
        return this.data.GetEnumerator();
    }
} 
```

使用这种`Option<T>`类型是通过 LINQ 完成的：

```
Option<Car> optional = Option<Car>.Create(myCar);
string color = optional
  .Select(car => car.Color.Name)
  .DefaultIfEmpty("<no car>")
  .Single();  // you can call First(), too 
```

您可以在这些文章中找到有关可选对象的更多信息：

*   [C#中选项/可能类型的自定义实现](http://codinghelmet.com/?path=howto/custom-implementation-of-the-option-maybe-type-in-cs)
*   [了解选项（可能）功能类型](http://codinghelmet.com/?path=howto/understanding-the-option-maybe-functional-type)
*   [如何降低圈复杂度：期权功能类型](http://codinghelmet.com/?path=howto/reduce-cyclomatic-complexity-option-functional-type)

您可以参考我的视频课程，了解有关如何使用`Option`类型和其他方式简化控制流的更多详细信息：[让您的 C# 代码](http://codinghelmet.com/?view=making-your-cs-code-more-functional)[在 .NET 中](http://codinghelmet.com/?view=tactical-design-patterns-in-net-control-flow)更具功能性和 战术性设计模式：控制流

第一个视频课程（[让您的 C# 代码更具功能性](http://codinghelmet.com/?view=making-your-cs-code-more-functional)）详细介绍了面向铁路的编程，包括`Either`和`Option`类型以及如何使用它们来管理可选对象和处理异常情况和错误。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-03-26T11:33:15.597

在 C# 中有更好的选项类型实现。您可以在 Pluralsight.com 上的 Zoran Horvat[的 .NET 中的战术设计模式中](https://www.pluralsight.com/courses/tactical-design-patterns-dot-net-control-flow)找到这个实现。它包括解释为什么以及如何使用它。基本思想是将选项类实现为 IEnumerable<> 接口的实现。

```
public class Option<T> : IEnumerable<T>
{
    private readonly T[] data;

    private Option(T[] data)
    {
        this.data = data;
    }

    public static Option<T> Create(T element)
    {
        return new Option<T>(new[] { element });
    }

    public static Option<T> CreateEmpty()
    {
        return new Option<T>(new T[0]);
    }

    public IEnumerator<T> GetEnumerator()
    {
        return ((IEnumerable<T>) this.data).GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-24T18:32:32.330

没有内置的，但您可以定义自己的。请注意，如果`Option<T>`不定义 map/bind 操作符，实现是没有意义的。

```
public struct Option<T>
{
    private bool hasValue;
    private T value;

    public Option(T value)
    {
        if (value == null) throw new ArgumentNullException("value");
        this.hasValue = true;
        this.value = value;
    }

    public Option<TOut> Select<TOut>(Func<T, TOut> selector)
    {
        return this.hasValue ? new Option<TOut>(selector(this.value)) : new Option<TOut>();
    }

    public Option<TOut> SelectMany<TOut>(Func<T, Option<TOut>> bind)
    {
        return this.hasValue ? bind(this.value) : new Option<TOut>();
    }

    public bool HasValue
    {
        get { return this.hasValue; }
    }

    public T GetOr(T @default)
    {
        return this.hasValue ? this.value : @default;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-25T18:27:00.947

在项目“C# 功能语言扩展” [https://github.com/louthy/language-ext](https://github.com/louthy/language-ext) 中存在 F# 的 Option 对象以及其他功能模式

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-05T10:58:22.713

`Microsoft.FSharp.Core.FSharpOption<T>`您可以从程序集中使用，而不是编写自己的类`FSharpCore.dll`。不幸的是，在 C# 中使用时，F# 类型有点笨拙。

```
//Create
var none = FSharpOption<string>.None;
var some1 = FSharpOption<string>.Some("some1");
var some2 = new FSharpOption<string>("some2");

//Does it have value?
var isNone1 = FSharpOption<string>.get_IsNone(none);
var isNone2 = OptionModule.IsNone(none);
var isNone3 = FSharpOption<string>.GetTag(none) == FSharpOption<string>.Tags.None;

var isSome1 = FSharpOption<string>.get_IsSome(some1);
var isSome2 = OptionModule.IsSome(some1);
var isSome3 = FSharpOption<string>.GetTag(some2) == FSharpOption<string>.Tags.Some;

//Access value
var value1 = some1.Value; //NullReferenceException when None
var value2 = OptionModule.GetValue(some1); //ArgumentException when None 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-12-09T16:16:08.043

也许这更接近 F# Option 类型

```
public struct Option<T>
{
    private T value;
    private readonly bool hasValue;

    public bool IsSome => hasValue;

    public bool IsNone => !hasValue;

    public T Value
    {
        get
        {
            if (!hasValue) throw new NullReferenceException();
            return value;
        }
    }

    public static Option<T> None => new Option<T>();

    public static Option<T> Some(T value) => new Option<T>(value);

    private Option(T value)
    {
        this.value = value;
        hasValue = true;
    }

    public TResult Match<TResult>(Func<T, TResult> someFunc, Func<TResult> noneFunc) =>
        hasValue ? someFunc(value) : noneFunc();

    public override bool Equals(object obj)
    {
        if (obj is Option<T>)
        {
            var opt = (Option<T>)obj;
            return hasValue ? opt.IsSome && opt.Value.Equals(value) : opt.IsNone;
        }
        return false;
    }

    public override int GetHashCode() =>
        hasValue ? value.GetHashCode() : 0;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-07T08:25:27.183

不久前，我决定使用最后一个 C# 版本来实现某种 Optional<> Java 类原型。

这里是：

```
public sealed class Optional<T>
{
    private static readonly Optional<T> EMPTY = new Optional<T>();
    private readonly T value;

    private Optional() => value = default;
    private Optional(T arg) => value = arg.RequireNonNull("Value should be presented");

    public static Optional<T> Empty() => EMPTY;
    public static Optional<T> Of(T arg) => new Optional<T>(arg);
    public static Optional<T> OfNullable(T arg) => arg != null ? Of(arg) : Empty();
    public static Optional<T> OfNullable(Func<T> outputArg) => outputArg != null ? Of(outputArg()) : Empty();

    public bool HasValue => value != null;

    public void ForValuePresented(Action<T> action) => action.RequireNonNull()(value);

    public IOption<T> Where(Predicate<T> predicate) => HasValue 
        ? predicate.RequireNonNull()(value) ? this : Empty() : this;

    public IOption<TOut> Select<TOut>(Func<T, TOut> select) => HasValue 
        ? Optional<TOut>.OfNullable(select.RequireNonNull()(value)) 
        : Optional<TOut>.Empty();

    public IOption<IOption<TOut>> SelectMany<TOut>(Func<T, IOption<TOut>> select) => HasValue 
        ? Optional<IOption<TOut>>.OfNullable(select.RequireNonNull()(value)) 
        : Optional<IOption<TOut>>.Empty();

    public T Get() => value;
    public T GetCustomized(Func<T, T> getCustomized) => getCustomized.RequireNonNull()(value);
    public U GetCustomized<U>(Func<T, U> getCustomized) => getCustomized.RequireNonNull()(value);

    public T OrElse(T other) => HasValue ? value : other;
    public T OrElseGet(Func<T> getOther) => HasValue ? value : getOther();
    public T OrElseThrow<E>(Func<E> exceptionSupplier) where E : Exception => HasValue ? value : throw exceptionSupplier();

    public static explicit operator T(Optional<T> optional) => OfNullable((T) optional).Get();
    public static implicit operator Optional<T>(T optional) => OfNullable(optional);

    public override bool Equals(object obj)
    {
        if (obj is Optional<T>) return true;
        if (!(obj is Optional<T>)) return false;
        return Equals(value, (obj as Optional<T>).value);
    }

    public override int GetHashCode() => base.GetHashCode();
    public override string ToString() => HasValue ? $"Optional has <{value}>" : $"Optional has no any value: <{value}>";
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-24T18:22:05.123

> C# 中是否有一个 Nullable/Optional 类，它迫使我们在提取和使用对象之前测试它是否存在？

创建 Nullables 以便原始类型可以为 null。它们的默认值不必是实际值（如 int，没有可空值，它的默认值为 0，那么 0 是指 0 还是未设置为 0？）

不，您无法强制程序员检查对象是否为空。不过那很好。这样做会产生巨大的开销。如果这是一项语言功能，您会多久强制检查一次？首次分配变量时是否需要它？如果变量稍后指向另一个对象怎么办？你会强迫它在每个方法和属性之前检查，如果它失败了你会抛出异常吗？你现在得到了一个空引用异常。强迫别人做你已经拥有的东西，你会得到很少的好处。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-04T21:10:47.703

从 Zoran Horvat 的回答中学到了很多东西。这是我的代码。optional 可以有一个实值或一个空值。在消费端，相同的代码处理它们。

```
void Main()
{
    var myCar = new Car{ Color =  Color.Black, Make="Toyota"};

    Option<Car> optional = Option<Car>.Create(myCar);

    // optional is an Empty 50% of the time.
    if(new Random().NextDouble() > 0.5)
        optional = Option<Car>.CreateEmpty();

    string color = optional
    .Select(car => car.Color.Name)
    .DefaultIfEmpty("<no car>")
    .Single();
    Console.Write(color);
}

class Car {
    public Color Color { get; set; }
    public string Make { get; set;}
}

public class Option<T> : IEnumerable<T>
{
    private readonly T[] data;

    private Option(T[] data)
    {
        this.data = data;
    }

    public static Option<T> Create(T value)
    {
        return new Option<T>(new T[] { value });
    }

    public static Option<T> CreateEmpty()
    {
        return new Option<T>(new T[0]);
    }

    public IEnumerator<T> GetEnumerator()
    {
        return ((IEnumerable<T>)this.data).GetEnumerator();
    }

    System.Collections.IEnumerator
        System.Collections.IEnumerable.GetEnumerator()
    {
        return this.data.GetEnumerator();
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-19T15:23:43.253

**使用`T?`可为空的引用而不是`Option<T>`**

从 C#8 开始，您应该弃用自定义`Option<T>`实现。现在完全解决了无效的困境。

`T?`是完全替代`Option<T>`

C# 具有以下处理 null 的功能：

1.  空合并运算符
2.  空条件运算符
3.  不可为空和可以为空的引用类型（C#8 起）
4.  可配置的编译错误/警告

请记住，

```
Option<Car> optional = Option<Car>.Create(myCar);
string color = optional
  .Select(car => car.Color.Name)
  .DefaultIfEmpty("<no car>")
  .Single();  // you can call First(), too 
```

是相同的

```
string color = myCar?.Color.Name ?? "<no car>"; 
```

此外，*字符串颜色*也是一个不能为空的引用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-12T10:50:27.497

如果您不喜欢烘焙自己的解决方案，我会使用[Language Ext](https://github.com/louthy/language-ext)。它在 nuget 上可用。我最近开始使用这个库，空引用的安全性是惊人的！我不是这个库的专家，但它可以满足您的要求，甚至更多。

以下是可以做的事情：

```
using System;
using LanguageExt;
using static LanguageExt.Prelude;

public class Demo
{
    public static Option<int> ToEvenOrNone(int i) =>
        i % 2 == 0
            ? i.Apply(Optional)
            : None;

    public static void PrintToDebug(Option<int> value) => 
        value
            .Some(Console.WriteLine)
            .None(() => Console.WriteLine("Value is not Even!"));

    public static void Test()
    {
        for (int i = 0; i < 10; i++)
        {
            PrintToDebug(ToEvenOrNone(i));
        }
    }
} 
```

这是输出：

```
0
Value is not Even!
2
Value is not Even!
4
Value is not Even!
6
Value is not Even!
8
Value is not Even! 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-24T15:58:15.917

[https://github.com/mcintyre321/OneOf](https://github.com/mcintyre321/OneOf)

我认为这个 oneOf 类很好地重新创建了选项类型。它甚至包括一个带有模式匹配的 .switch/.match ，最重要的是它在运行时工作，这是您对 Option 模式的期望。

# php - MySQL：偶尔 SQLSTATE [HY000] [2003] 无法从 PDO PHP 脚本连接到 MySQL 服务器

> ID：16199228
> 
> 赞同：0
> 
> 时间：2013-04-24T18:09:53.360
> 
> 标签：php, mysql, pdo

我有一个 MySQL 数据库和一个使用 PDO 连接到它的 PHP 脚本。

MySQL 数据库与 PHP 脚本在同一台服务器上运行。

这是我用来连接的代码：

```
$dbh = new PDO('mysql:host=' . $db_info[0]['hostname'] . ';dbname=' . $db_info[0]['db'], $db_info[0]['username'], $db_info[0]['password'], array( PDO::ATTR_PERSISTENT => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::ATTR_EMULATE_PREPARES => true ));
$dbh->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, true); 
```

我的脚本是多线程的，可以同时打开多个连接。

我看到的是，在运行大约 30 秒后，脚本会死掉并返回`SQLSTATE[HY000] [2003] Can't connect to MySQL server`错误，但是 MySQL 服务器正在运行并且没有重新启动或任何东西：

```
mysql> show status like "%uptime%";
+---------------------------+---------+
| Variable_name             | Value   |
+---------------------------+---------+
| Uptime                    | 1033900 |
| Uptime_since_flush_status | 1033900 |
+---------------------------+---------+
2 rows in set (0.00 sec) 
```

我很困惑，因为我的脚本在短时间内可以正常工作，直到（看似）随机的一个线程无法获得与服务器的连接，并返回该错误并崩溃。

我应该在哪里调试为什么在连接到正在运行的本地 MySQL 服务器时会收到该错误？

我确实看到了这看起来有点令人担忧：

```
mysql> show status like "%connections%";
+-----------------------------------+-------+
| Variable_name                     | Value |
+-----------------------------------+-------+
| Connection_errors_max_connections | 0     |
| Connections                       | 1197  |
| Max_used_connections              | 45    |
+-----------------------------------+-------+
3 rows in set (0.00 sec) 
```

这会导致问题吗？

# django - Django - 将模型名称作为参数传递给通用视图

> ID：16199232
> 
> 赞同：4
> 
> 时间：2013-04-24T18:10:03.540
> 
> 标签：django, django-generic-views

假设我有一些继承自基类 Animal 的模型。我可以使用通用视图并将 Cat/12 路由到详细视图，并将 Dod/10 路由到具有不同上下文的相同详细视图。但我想从 url 中获取模型名称，这样我就不必定义路由。

我有这样的事情：

```
url(r'^cat/(?P<slug>[-\w]+)/$',
    DetailView.as_view(
        queryset=Cat.objects.filter(),
        model=Cat,
        context_object_name='animal',
        template_name='animal/detail.html'),
    name='detail'),
url(r'^dog/(?P<slug>[-\w]+)/$',
    DetailView.as_view(
        queryset=Dog.objects.filter(),
        model=Dog,
        context_object_name='animal',
        template_name='animal/detail.html'),
    name='detail'),
... 
```

显然，这是太多重复的代码。我宁愿做这样的事情：

```
url(r'^?P<my_animal>\w+/(?P<slug>[-\w]+)/$',
    DetailView.as_view(
        queryset=my_animal.objects.filter(),
        model=my_animal,
        context_object_name='animal',
        template_name='animal/detail.html'),
    name='detail'),
... 
```

我可以这样做吗？

**编辑**

感谢达尔文的帮助，这就是我最终得到的结果。它避免了 if/else 来获取模型名称：

```
class AnimalDetailView(DetailView):
    context_object_name='animal'
    template_name='animals/detail.html'

    def dispatch(self, request, *args, **kwargs):
        my_animal = kwargs.get('my_animal', None)
        self.model = get_model('animals',my_animal.capitalize())
        try:
            ret = super(AnimalDetailView, self).dispatch(request, *args, **kwargs)
        except AttributeError:
            raise Http404
        return ret

    def get_queryset(self):
        return self.model.objects.filter() 
```

下次我有关于继承的问题，我会咨询达尔文！哈哈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T18:25:18.833

您可以从 DetailView 继承并覆盖*dispatch*方法来构建您自己的规则，如下所示：

```
class AnimalDetailView(DetailView):
    context_object_name='animal'
    template_name='animal/detail.html'

    def dispatch(self, request, *args, **kwargs):
        my_animal = kwargs.get('my_animal', None)
        if my_animal == 'dog':
            self.model = Dog
        elif my_animal == 'cat':
            self.model = Cat

        return super(AnimalDetailView, self).dispatch(request, *args, **kwargs)

    def get_queryset(self):
        return self.model.objects.filter() 
```

并使用这样的 urlpattern：

```
url(r'^?P<my_animal>\w+/(?P<slug>[-\w]+)/$', AnimalDetailView.as_view()) 
```

**编辑**：我上次犯了一个错误，因为我们不能实例化视图类，只能使用'as_view（）'方法。尝试新方法，我认为这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:18:15.600

`?P<my_animal>`是的，您的 url 中的任何命名参数（即）[将自动作为关键字参数传递给您的视图，](https://docs.djangoproject.com/en/1.4/topics/class-based-views/#dynamic-filtering)：

> 让这个 [Class Based Views] 工作的关键部分是，当调用基于类的视图时，各种有用的东西都存储在 self 上；以及请求 (self.request) 这包括根据 URLconf 捕获的位置 (self.args) 和基于名称的 (self.kwargs) 参数。

`self.kwargs['my_animal']`因此您可以像在视图中一样访问它们。

如果您[查看`__init__``BaseDetailView`](http://ccbv.co.uk/projects/Django/1.5/django.views.generic.detail/BaseDetailView/)(from which inherits) 的[方法，](http://ccbv.co.uk/projects/Django/1.5/django.views.generic.detail/BaseDetailView/)`DetailView`您会发现它所做的只是获取`kwargs`并将它们分配给实例属性，因此您可以轻松地执行以下操作：

```
url(r'^?P<model>\w+/(?P<slug>[-\w]+)/$',... 
```

并且视图应该自动将 URL 中传递的值分配给`self.model`. 当然，您需要小心并确保在此处验证输入，但这是从用户指定的模型中动态抓取对象的好方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-22T14:06:39.783

另一种方法是直接传递您的模型，而不是通过变量传递它

网址.py

```
from django.urls import path
from . import views
# Common url
urlpatterns = [
    path('', views.MoneyIndex.as_view(), name='money_index'),
    path('cat', views.CatListView.as_view(), name='cat_list'),
    path('dog', views.DogListView.as_view(), name='dog_list'),
    ]

# Dynamic url
MYMODELS = ['Cat','Dog',]
for modelX in MYMODELS:
    urlpatterns = urlpatterns + [
        path('{0}/add'.format(modelX.lower()), views.MyCreateView.as_view(model=modelX), name='{0}_create'.format(modelX.lower())),
        path('{0}/<pk>'.format(modelX.lower()), views.MyDetailView.as_view(model=modelX), name='{0}_detail'.format(modelX.lower())),
        path('{0}/<pk>/upd'.format(modelX.lower()), views.MyUpdateView.as_view(model=modelX), name='{0}_update'.format(modelX.lower())),
        path('{0}/<pk>/del'.format(modelX.lower()), views.MyDeleteView.as_view(model=modelX), name='{0}_delete'.format(modelX.lower())),
    ] 
```

视图.py

```
from django.views import generic
from .models import Cat, Dog
from .forms import CatForm, DogForm

class MyDetailView(generic.DetailView):     
        def __init__(self, *args, **kwargs):
            super(MyDetailView, self).__init__(*args, **kwargs)
            modeltxt = self.model
            self.model = eval(modeltxt)

 class MyCreateView(generic.CreateView):
    def __init__(self, *args, **kwargs):
        super(MyCreateView, self).__init__(*args, **kwargs)
        modeltxt = self.model
        self.model = eval(modeltxt)
        self.form_class = eval('{0}Form'.format(modeltxt))
        self.success_url = reverse_lazy('{0}_list'.format(modeltxt.lower()))    

class MyUpdateView(generic.UpdateView):
    def __init__(self, *args, **kwargs):
        super(MyUpdateView, self).__init__(*args, **kwargs)
        modeltxt = self.model
        self.model = eval(modeltxt)
        self.form_class = eval('{0}Form'.format(modeltxt))
        self.success_url = reverse_lazy('{0}_list'.format(modeltxt.lower())) 

class MyDeleteView(generic.DeleteView):
    def __init__(self, *args, **kwargs):
        super(MyDeleteView, self).__init__(*args, **kwargs)
        modeltxt = self.model
        self.model = eval(modeltxt)
        # Must be done because default points to modelname_confirm_delete.html
        self.template_name = 'appname/{0}_detail.html'.format(modeltxt.lower())
        self.success_url = reverse_lazy('{0}_list'.format(modeltxt.lower())) 
```

# c# - ReSharper 接口命名

> ID：16199233
> 
> 赞同：0
> 
> 时间：2013-04-24T18:10:08.890
> 
> 标签：c#, resharper

在 ReSharper 中，如果我对一个类使用“实现接口”操作，它会创建一个名为 `Implementation of IInterface`. 但是，如果我手动实现接口然后运行代码清理，它会将我的接口成员包装在一个名为`IInterface Members`.

为什么它使用两种不同的命名约定？如果有办法标准化这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:51:53.157

根据[Reordering Type Members](http://www.jetbrains.com/resharper/webhelp/Code_Cleanup__Usage_Scenarios__Reordering_Type_Members.html)的 R# 文档，代码清理应重新排序并将实现的接口包装在命名区域中：

![R# ImplementsInterface XML 规则](https://i.stack.imgur.com/dlmT3.png)

> 此 XML 代码匹配实现接口的成员，用区域包围它们，并按实现的接口的名称进行排序。${ImplementsInterface} 变量包含正在实现的接口的名称。如果您不想在接口实现周围插入区域，请删除 Group 标签，ReSharper 将根据成员正在实现的接口的名称对成员进行排序。

检查您的设置，看看您是否可能覆盖了默认行为。另一方面，我没有亲自测试代码清理与重新排序和区域包装，所以这是一个最好的猜测。但是，希望它可以为您指明正确的方向。

**编辑**
更详细地查看文档并使用 R# 探索所有可编辑模板后，我认为没有办法编辑区域标签的文本。

我反编译`JetBrains.ReSharper.Feature.Services.CSharp.dll`并发现了我认为是该地区标签的来源：

*   命名空间：`JetBrains.ReSharper.Feature.Services.CSharp.Generate`
*   班级：`CSharpGeneratorContext`
*   方法：`InsertWithRegions`或`CSharpGeneratorContext`

这两种方法都将字符串`"Implementation of " + <some code>`嵌入到 dll 中，因此您似乎无法编辑默认文本。

# sql - 将 ISNUMERIC() 与 sql_variant SQL Server 一起使用

> ID：16199234
> 
> 赞同：2
> 
> 时间：2013-04-24T18:10:16.220
> 
> 标签：sql, tsql, sql-server-2008-r2

如何使用数据类型`ISNUMERIC()`的函数`sql_variant`？

以下代码不起作用

```
DECLARE @x sql_variant 
SET @x = 3 
IF ISNUMERIC(@x) = 1 
 SELECT 'Numeric'
 ELSE
SELECT ' NOT' 
```

错误 ：

> 消息 8116，级别 16，状态 1，第 4 行
> 参数数据类型 sql_variant 对于非数字函数的参数 1 无效。

但这有效

```
IF ISNUMERIC(CAST(@x AS INT)) = 1 
```

有没有办法让这件事发生`CAST()`

在谷歌上没有找到任何有用的关于这个问题的东西谢谢，我正在使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:14:51.207

投射到`int`并没有真正的意义。您的转换将失败（当出现除整数以外的其他内容时）并且您将收到错误消息。

但是，您可以强制转换为`nvarchar(max)`- 这*应该*始终有效，并且您的`ISNUMERIC`函数将按预期运行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T18:49:17.893

如果您想知道*底层数据类型*是否为数字，您可以使用[`SQL_Variant_Property`](http://msdn.microsoft.com/en-us/library/ms178550.aspx)来查找；

```
DECLARE @x sql_variant 
SET @x = 3.2

SELECT CASE 
       WHEN SQL_Variant_Property(@x, 'Precision') = 0 
       THEN 'NO' 
       ELSE 'YES' 
       END 
```

# jquery - 带有jQuery跨平台调整大小的边框图像？

> ID：16199235
> 
> 赞同：0
> 
> 时间：2013-04-24T18:10:19.847
> 
> 标签：jquery, html, css

我正在尝试使用 jQuery 来调整 div 的大小以适应浏览器的视口，并且我能够在 Chrome、Firefox 和 IE 中使其大小合适。然而，由于某种原因，边框图像仅出现在 Chrome 中。

这就是我在 CSS 中的内容：

```
div.header, div.sidebar, div.content {
    border-width:          10px;
    -webkit-border-image:  url(images/borderimage.gif) 10 10 10 10 stretch stretch;
       -moz-border-image:  url(images/borderimage.gif) 10 10 10 10 stretch stretch;
            border-image:  url(images/borderimage.gif) 10 10 10 10 stretch stretch;
} 
```

这就是我在脚本方面的内容：（减去的数字用于格式化）

```
$("#over").css("height", document.documentElement.clientHeight+"px");
$("#over").css("width", document.documentElement.clientWidth+"px");

var overinner = $("div.overallinner");
$(".header").css("width", overinner.innerWidth()+"px");
$(".content").css("width", (overinner.innerWidth()-290)+"px");

var headr = $("div.header");
$("#head").css("width", headr.innerWidth()-5+"px");
$("#head").css("height", headr.innerHeight()-5+"px");

var sideb = $("div.sidebar");
$("#side").css("width", sideb.innerWidth()-5+"px");
$("#side").css("height", sideb.innerHeight()-5+"px");

var contn = $("div.content");
$("#cont").css("width", contn.innerWidth()-10+"px");
$("#cont").css("height", contn.innerHeight()-+"px"); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:28:22.830

jQuery 代码不是问题。这是 CSS 浏览器支持的问题。

**火狐**

在 Firefox 中，您必须指定 a`border-style`和`border-width`, 才能使`border-image`样式生效。

```
div.header, div.sidebar, div.content {
    border-width:          10px;
    border-style:          solid;
    -webkit-border-image:  url(images/borderimage.gif) 10 10 10 10 stretch stretch;
       -moz-border-image:  url(images/borderimage.gif) 10 10 10 10 stretch stretch;
            border-image:  url(images/borderimage.gif) 10 10 10 10 stretch stretch;
} 
```

**IE**

`border-image`[IE10 或更早版本](http://caniuse.com/#search=border-image)不支持。在 IE 中模拟它需要一些额外的 jQuery 代码和/或修改静态 HTML。

**选项**

两种最干净的方法是：

1.  如果IE10不需要边框图片，那么只为支持该`border-image`样式的浏览器提供（渐进式增强）。
2.  如果在 IE10 中必须有边框图像，那么由于 IE10 需要不同的方法，您也可以对 Chrome 和 Firefox 使用相同的方法（并且根本不使用该`border-image`样式）。这样您就不必在同一个网站上维护两个不同的实现。

# ios - iOS 应用 http post/get 请求

> ID：16199238
> 
> 赞同：2
> 
> 时间：2013-04-24T18:10:37.020
> 
> 标签：ios, http

我需要一些教程，如何使用来自我的 iOS 应用程序的 HTTP POST（或 GET）请求。我想将一个字符串发送到我的服务器，然后将其写入数据库。我找到了这段代码：

```
NSString *post = @"key1=val1";
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:@"http://www.nowhere.com/sendFormHere.php"]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData]; 
```

我将它添加到 UIAction 按钮，但它不会向我的服务器发送任何内容。在我的服务器上，我有一个 PHP 脚本，它从 post 中获取“key1”，然后将其写入 db。

```
<?
    $postr = $_POST["key1"];
    $con0 = mysql_connect("server","db","pass");
    mysql_select_db("table", $con0);
    mysql_set_charset('utf8',$con0);
    mysql_query("INSERT INTO tok (token) VALUES ('$postr')");
    mysql_close();
?> 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:47:58.650

[AFNetworking](https://github.com/AFNetworking/AFNetworking)是一个非常强大的库，可以帮助您减少创建 HTTP 请求的工作量，您可以在其 github 页面上找到有关如何使用该库的几个示例。

您可能会发现此答案对您的需求很有用：[AFNetworking Post Request](https://stackoverflow.com/questions/7623275/afnetworking-post-request)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:50:03.083

查看 AFnetworking 并通过他们的 api 工作。使用 api 发送 post 请求非常快，并且是大多数应用程序用于 Web 连接的方式。

也请不要因讽刺评论而气馁。您应该将 iOS 项目标记为 iOS 而不是 xcode（除非您确实需要实际程序 xcode 的帮助）。但我不认为骚扰每个进来并犯此错误的人是有成效的。一种更委婉的方式是个人信息，而不是公开反驳

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

# macos - 你如何安装模块命令，如 ins mod 等

> ID：16199240
> 
> 赞同：0
> 
> 时间：2013-04-24T18:10:40.737
> 
> 标签：macos, terminal, kernel, insmod

我必须加载内核模块才能运行程序。我在网上搜索，发现我需要使用诸如 insmod 之类的命令来执行此操作。但是该命令似乎没有安装在我的笔记本电脑中。我正在使用 Mac。我尝试通过 sudo 命令以管理员身份运行。尝试了所有命令，如 whereis、location 和 find 仍然没有得到 ans。任何人都可以请帮忙。如果有加载内核模块以在其上运行某些程序文件的替代方法，我们将不胜感激。

错误：您可能需要加载内核模块以支持 tap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:06:48.277

OS X 使用与 Linux 完全不同的内核扩展模型。如果你有一个兼容的内核扩展，你可以使用[`kextload(8)`](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man8/kextload.8.html)它来加载它。

# iphone - 未找到 iPhone 崩溃报告

> ID：16199247
> 
> 赞同：0
> 
> 时间：2013-04-24T18:10:56.223
> 
> 标签：iphone, xcode, organizer

我正在尝试调试我正在使用单声道触控开发的应用程序，但是当我尝试在 Xcode Organizer 中访问崩溃报告时，我找不到任何内容（而且我知道该应用程序至少崩溃了 10 次）。我只看到 5 个进程名称为“未知”的文件。我试图找到崩溃报告

> ~/库/日志/CrashReporter/MobileDevice

但即使在那里我也找不到报告。

任何想法我缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:25:54.483

之前在查看持久连接日志时也发生过类似的事情，也许对你有帮助。原来我正在查看 /Library/Logs 而不是 ~/Library/Logs，后者的库文件夹不可见，但前者是。

我建议您尝试在“控制台”应用程序中找到它们，默认情况下它会显示隐藏文件。如果控制台找不到它们，则日志记录应该有问题。

# c# - 将 JPEG 和其他类型转换为 TGA

> ID：16199249
> 
> 赞同：0
> 
> 时间：2013-04-24T18:11:01.940
> 
> 标签：c#, .net, vb.net, jpeg, tga

我正在尝试为常见图像类型创建一个海量图像转换器。我能够找到一个[TGA 阅读器](http://www.codeproject.com/Articles/31702/NET-Targa-Image-Reader)，并且可以将 TGA 转换为 .NET 库支持的图像类型。但是，除了带有 .NET 包装器的外部 dll 文件外，在 .NET 中没有“某物”到 TGA 的转换器。我对 GDI+ 对象没有任何经验，这些对象显然是转换的关键。那么有什么例子或想法可以让我开始吗？还是我缺少一种非常简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:13:58.593

[http://www.imagemagick.org/](http://www.imagemagick.org/) - ImageMagick 是一个非常有用的跨平台工具，用于从一种图像类型转换为另一种图像类型。您可以使用包含的命令行实用程序进行批量转换。它支持 TGA（在许多其他格式中）。

# git - 更新 github 上的分叉存储库

> ID：16199254
> 
> 赞同：3
> 
> 时间：2013-04-24T18:11:25.403
> 
> 标签：git, github, git-fork

我从 github 分叉了一个存储库——它叫做 bootstrap。

我已经克隆了我的叉子：

```
git clone https://github.com/Fowowski/bootstrap.git 
```

bootstrap 项目有一个 master 分支和一个 3.0.0-wip 分支 - 将在 3.0.0-wip 上工作

所以接下来我要做的（因为我在 master 上并且它是 2.3.x 稳定版）是切换到 3.0.0-wip 并添加一个遥控器：

```
git checkout 3.0.0-wip
git remote add upstream https://github.com/twitter/bootstrap.git 
```

现在我在 1 文件中进行了一些更改......几天后，当我完成后，我意识到 3.0.0-wip 中有一些更改，并且我的分叉存储库不再是实际的。

我应该如何更新我的分叉存储库以使其尽可能干净，因为它可能仅用于在拉取请求中推送它？我听说我应该做 fetch/rebase。

我曾经`pull`通过乌龟 git 做过一次，在我推送之后，我的拉取请求中几乎没有我的提交...... - 你可以在这里看到它：[https ://github.com/twitter/bootstrap/pull/7641#commits- push-2eb9053](https://github.com/twitter/bootstrap/pull/7641#commits-pushed-2eb9053) - 我假设我没有做重要的事情，但不知道到底是什么。

我对我的问题进行了一些研究，发现我可能应该运行：

```
git fetch upstream

git merge upstream/master

git push 
```

我的问题是——这就是我对 git 最不了解的部分：git merge upstream/master——我不能合并上游/master，因为 master 是 bootstrap 2.3.x 而不是 3.0.0-wip？我错过了这个命令还是什么？

你能告诉我如何通过 git bash 正确更新我的分叉存储库吗？更改克隆的 fork 存储库中的文件后，我需要运行哪些正确步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:20:06.980

fetch / rebase 的想法很好，特别是如果你还没有推送你的工作：

```
git fetch
# Assuming you are in the right 3.0.0-wip
git rebase upstream/3.0.0.-wip 
```

您甚至可以使用以下命令更快地做到这一点[`pull --rebase`](https://stackoverflow.com/questions/3357122/git-pull-vs-git-fetch-git-rebase)：

```
git pull --rebase upstream 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:20:20.933

在我看来，而不是`git merge upstream/master`你应该做

```
git merge upstream/3.0.0-wip 
```

（顺便说一句，正如您被告知的那样，做 a 可能是一个更好的主意`git rebase`）

# clojure - 如何将方法列表传递给 gen-class？

> ID：16199258
> 
> 赞同：1
> 
> 时间：2013-04-24T18:11:47.787
> 
> 标签：clojure, gen-class

当使用`gen-class`这个编译罚款：

```
(ns clj.sandbox)

(defn -hello
  [this]
  "Hello World")

(gen-class
  :name com.sandbox.GeneratedClass
  :methods [[hello [] String]]) 
```

但如果你这样做：

```
(ns clj.sandbox)

(def my-methods (atom [[hello [] String]]))

(defn -hello
  [this]
  "Hello World")

(gen-class
  :name com.sandbox.GeneratedClass
  :methods @my-methods) 
```

你得到这个错误：

> CompilerException java.lang.RuntimeException: Unable to resolve symbol: hello in this context, 编译:(clj\sandbox.clj:3:17)

有没有办法解决这个错误？我希望能够传入`:methods`值而不是内联定义它。

* * *

如果它很重要，这是我用来生成它的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">    
    <artifactId>sandbox</artifactId>
    <groupId>com.sandbox</groupId>
    <version>1.0-SNAPSHOT</version>    
    <packaging>clojure</packaging>
    <modelVersion>4.0.0</modelVersion>    
    <build>        
        <plugins>
            <plugin>
                <groupId>com.theoryinpractise</groupId>
                <artifactId>clojure-maven-plugin</artifactId>
                <version>1.3.13</version>
                <extensions>true</extensions>
                <configuration>
                  <sourceDirectories>
                    <sourceDirectory>src</sourceDirectory>
                  </sourceDirectories>
                </configuration>
            </plugin>
        </plugins>        
    </build>
    <dependencies>        
        <dependency>
            <groupId>org.clojure</groupId>
            <artifactId>clojure</artifactId>
            <version>1.5.1</version>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:31:40.567

Because gen-class is a macro and passing @my-methods to it will cause the macro to get `(deref my-method)` as value of method argument which is not what is expected. You need to create a wrapper macro and then call it as shown below:

```
(defn -hello []
  "Hello world")

(def my-methods (atom '[[hello [] String]]))

(defmacro my-class []
  `(gen-class
    :name com.sandbox.GeneratedClass
    :methods ~(deref my-methods)))

(my-class) 
```

Also note that the atom value is quoted otherwise you will get `hello not found` exception because it tries to resolve hello var which is not there.

# c# - 从 MVC 视图模型中保存重新排序的列表项

> ID：16199266
> 
> 赞同：2
> 
> 时间：2013-04-24T18:12:22.997
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

我有一个视图模型，它绑定到一个“TreasureHuntDetails”对象，其中包含一个线索列表。这是它的数据模型的一部分。

```
 public TreasureHuntDetails()
    {
        Clues = new List<Clue>();
    }

    [Key]
    public int TreasureHuntId { get; set; }

    public List<Clue> Clues { get; set; } 
```

在页面上，我有一张桌子。foreach 循环遍历线索列表以将它们添加到表中，例如

```
@for (int i = 0; i < Model.Clues.Count; i++) 
```

for 循环中的表格元素非常大，但这里有一个表格元素列的示例：

```
<td>@Html.DisplayFor(m => Model.Clues[i].Location)</td> 
```

到目前为止一切都很好。然后我使用 JQuery UI 允许使用拖放重新排序表的项目，如下所示：

```
 <script type="text/javascript">
        $(document).ready(function()
        {
            $("#clueTable tbody").sortable().disableSelection();
        });
        </script> 
```

一切都很好，我可以拖放元素。

问题是我不知道如何保存元素的新顺序并将它们保存回数据库。

我尝试的第一件事是简单地将线索列表传递给控制器​​方法，但我发现一旦线索列表到达控制器方法，它总是为空。

例如：

```
@Url.Action("ViewCluePage", @Model.Clues) 
```

即使我发送整个@Model，其中的线索列表也始终为空。从数据模型的构造函数中删除新的列表实例化并不能解决这个问题。

我尝试的另一件事是将整个表格包装成 HTML 表单，但线索列表仍然为空。

所以基本上，这个问题实际上是两个问题：

1）为什么将模型对象发送到控制器后，线索列表总是为空。

2）如何保存项目列表的新顺序？

更新：根据@recursive 的建议，我看到在尝试将线索元素提交到 HTML 表单时出错的地方。

我在迭代线索元素的 for 循环之外使用了它：

```
@Html.HiddenFor(m => m.Clues) 
```

我必须在 for 循环内添加 HiddenFor 行（对于每个线索项），以及线索项的每个属性，例如

```
@Html.HiddenFor(m => m.Clues[i].Id) 
```

因此，能够将列表项发送到控制器是向前迈出的一步，但我认为我仍然需要能够反映发送到控制器时线索项的新顺序的代码。目前，在使用 JQuery sortable() 方法重新排列屏幕上元素的顺序时，这不会更改元素的顺序，因为它们存储在绑定到视图 (@Model.Clues) 的数据模型中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T18:29:05.667

1）正如@resursive 在他的评论中所说，您需要在页面上隐藏映射到您的`Clue`类中的属性的元素。

2）至于保持线索的顺序，您需要在数据库中添加一列来保存列表中每个线索的位置，并将位置属性添加到您的类中。所以你的班级需要包括

```
public int Position {get;set;} 
```

创建页面时应该从数据库中提取。然后在渲染页面之前，您应该根据 Position 变量重新排序线索列表。

编辑：使用 jquery 的 sortable 属性。[查看此线程以供参考。](https://stackoverflow.com/questions/8148145/drag-event-for-jquery-ui-sortable)在停止拖动事件中（或在您提交之前），循环遍历每个可拖动对象并设置对象的每个隐藏位置属性的值。

```
var positionIndex = 0;
$('.draggableObjectClass).each(function () {
    $(this).find('input[id$=_Position]').val(positionIndex++);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:52:49.583

> 但我认为我仍然需要在发送到控制器时反映线索项目新顺序的代码。

您不会，因为您现在正在循环中迭代它们`for`，它们将按照您将它们发送到视图的顺序进行索引。您的订单必须已被维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:05:05.660

从这里已经发布的答案中得到建议，我想出了以下解决方案。

已经有了这个方法来实现 UI 元素的拖放重新排序，

```
 $(document).ready(function()
    {
        $("#clueTable tbody").sortable().disableSelection();
    }); 
```

我需要一种能够以新的项目顺序读取并将其发送到 MVC 控制器的方法。为此，我使用 Razor @Html.AttributeEncode 方法将每个项目的 Id 写入表的每一行的列中，如下所示：

```
<td class="Ids" id="@Html.AttributeEncode(Model.Clues[i].Id)">@{var number = i + 1; @number}</td> 
```

（这被包裹在一个遍历项目列表的 for 循环中。）

然后，我创建了以下 Javascript 函数，该函数从我放置在元素表上方的“SaveNewOrder”按钮调用（用户在完成对表中项目的重新排序后按下此按钮）：

```
 function getNewOrder()
    {
        var positions = new Array();
        for (var i = 0; i < $('.Ids').length; i++)
        {
            positions[i] = $('.Ids')[i].id;
        }
        $.ajax(
            {
                type: "POST",
                url: "@Url.Action("ReorderClues", "Clues")",
                data:{ treasureHuntDetails: $("form").serialize(), ids: JSON.stringify(positions) }
                contentType:'application/json'
            }).done(function()
            {
                 window.location.href = '@Url.Action("Clues", Model)';  
            }).   
    } 
```

它的作用是从每个表项中读取 Id 元素，并将它们写入数组 - 所以这个数组包含 Id 的新顺序。重新排序表元素后，包含项目的数据模型不会改变，因此这是必要的。

然后，它使用 JQuery Ajax 方法在我的“Clues”MVC 控制器上调用“ReOrderClues”方法，传递数据模型的序列化版本（包含原始顺序的线索项目列表）和包含线索 ID 的顺序是新的。当从控制器 (.done) 返回结果时，我调用一个刷新页面元素的控制器。

因此，不必维护与每个线索相关联的位置值（这将涉及代码中其他地方的重大重构），我正在做的是交换线索的内容以反映新顺序，但保持 Id 在相同的位置。

这就是我使用 MVC 控制器实现这一目标的方式：

```
public ActionResult ReorderClues(TreasureHuntDetails treasureHuntDetails, int[] ids)
{
    using (var db = new TreasureHuntDB())
    {
        var clues = treasureHuntDetails.Clues;
        var newClues = NewOrderList(clues, ids);

        // Save the changes of each clue
        for (var i = 0; i < newClues.Count;i++ )
        {
            db.Entry(clues[i]).CurrentValues.SetValues(newClues[i]);
            db.SaveChanges();
        }

        treasureHuntDetails.Clues = newClues;
        TempData["Success"] = "Clues reordered";
    }

    return RedirectToAction("Clues", treasureHuntDetails);
}

public List<Clue> NewOrderList(List<Clue> clues, int[] ids)
{
    var newClueOrder = new List<Clue>();

    // For each ID in the given order
    for (var i = 0; i < ids.Length; i++)
    {
        // Get the original clue that matches the given ID
        var clue = clues.First(clue1 => clue1.Id == ids[i]);

        var newClue = Clue.Clone(clue);

        // Add the clue to the new list. 
        newClueOrder.Add(newClue);

        // Retain the ID of the clue 
        newClueOrder[i].Id = clues[newClueOrder.Count - 1].Id;
    }

    return newClueOrder;
} 
```

在上面的代码片段中，TreasureHuntDB 是我的实体框架数据库上下文。

# scikit-learn - 在 mac osx 10.7.5 上安装 scikit-learn 时遇到问题

> ID：16199273
> 
> 赞同：1
> 
> 时间：2013-04-24T18:12:44.790
> 
> 标签：scikit-learn

通过以下设置，我正在尝试安装 scikit-learn - 最终目标是将 scikit-learn 与 python 笔记本一起使用 pandas 进行数据操作。

尝试了 pip 相同的错误，尝试了 easy_install 相同的错误，尝试了 scipy 超级包，但它使用 64 位 python 发行版不能与 pandas 一起工作。因此，使用当前设置如何使 easy_install 为 scikit 工作。发生故障表明它无法找到 C++ 头文件我该如何解决这个问题。

```
which python 
/Library/Frameworks/Python.framework/Versions/Current/bin/python

python
Enthought Python Distribution (EPD) free version -- www.enthought.com
Version: 7.3-2 (32-bit)
(type 'upgrade' or see www.enthought.com/epd/upgrade to get the full EPD)
Python 2.7.3 |EPD_free 7.3-2 (32-bit)| (default, Apr 12 2012, 11:28:34) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin

Python version 2.7.3
scipy==0.10.1
numpy==1.6.1
pandas==0.10.1

easy_install -U scikit-learn
Searching for scikit-learn
Reading http://pypi.python.org/simple/scikit-learn/
Reading http://scikit-learn.org
Reading http://sourceforge.net/projects/scikit-learn/files/
Reading http://scikit-learn.sourceforge.net
Best match: scikit-learn 0.13.1
Downloading http://pypi.python.org/packages/source/s/scikit-learn/scikit-learn-0.13.1.tar.gz#md5=acba398e1d46274b8470f40d0926e6a4
Processing scikit-learn-0.13.1.tar.gz
Writing /tmp/easy_install-FrggHE/scikit-learn-0.13.1/setup.cfg
Running scikit-learn-0.13.1/setup.py -q bdist_egg --dist-dir /tmp/easy_install-FrggHE/scikit-learn-0.13.1/egg-dist-tmp-mGaDaU
Partial import of sklearn during the build process.
In file included from /private/tmp/easy_install-FrggHE/scikit-learn-0.13.1/sklearn/svm/src/libsvm/libsvm_template.cpp:6:
/private/tmp/easy_install-FrggHE/scikit-learn-0.13.1/sklearn/svm/src/libsvm/svm.cpp:53:18: error: math.h: No such file or directory
/private/tmp/easy_install-FrggHE/scikit-learn-0.13.1/sklearn/svm/src/libsvm/svm.cpp:54:19: error: stdio.h: No such file or directory

..etc 
```

# iphone - 如何从 UICollectionView 中删除项目？

> ID：16199275
> 
> 赞同：1
> 
> 时间：2013-04-24T18:12:57.757
> 
> 标签：iphone, ios, uicollectionview, uicollectionviewcell

我正在显示图像。`collection view`我想删除每个项目。`button click`现在我可以删除项目`didSelect method`。

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    [array removeObjectAtIndex:indexPath.row];
    [self.colleVIew deleteItemsAtIndexPaths:[NSArray arrayWithObject:indexPath]];
} 
```

我已经放置`CollectionCell`了按钮，可以找到`indexpath.row` `on click`。但是如何删除

```
-(void)chat:(int)i 
{
    NSLog(@"index path%d",i);
    [array removeObjectAtIndex:i]; // array object is getting removed,how to delete the CollectionviewCell
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:16:33.963

如果您也知道该部分：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:i inSection:0];
[self.colleVIew deleteItemsAtIndexPaths:[NSArray arrayWithObject:[indexPath]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T21:20:24.823

只需`reloadData`确保您`array`的用于`numberOfItemsInSection`. 这将重新加载`dataSource`。

```
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return [yourArray count];
}

-(void)chat:(int)i 
{
    NSLog(@"index path%d",i);
    [yourArray removeObjectAtIndex:i]; 
     // array object is getting removed,how to delete the CollectionviewCell
    [self.collectionView reloadData];
} 
```

# android - Android：文件位置

> ID：16199281
> 
> 赞同：-2
> 
> 时间：2013-04-24T18:13:22.950
> 
> 标签：android, windows, file

我正在写入路径 mnt/sdcard/foldername。我没有收到错误并且文件已写入，但是当我浏览手机的内部存储时，我找不到该文件夹​​。该文件夹将位于何处？我有银河系？

代码在这里：

```
 File sdCard = Environment.getExternalStorageDirectory();
             File directory = new File (sdCard.getAbsolutePath() + "/statReporter/");
             directory.mkdirs();
             Log.d("Tag", directory.toString());
             //Path and name of XML file
             File file = new File(directory, appendTimeStamp("phoneNum") + ".csv");
             FileOutputStream fOut = new FileOutputStream(file);
             OutputStreamWriter osw = new OutputStreamWriter(fOut);

             //Write to CSV File
             osw.write(message);
             osw.write(',');

             //Flush and close OutPutStreamWriter and close FileOutputStream
             osw.flush();
             osw.close();
             fOut.close();

             Log.d("File Logger:", "File write successfully!"); 
```

在 Windows Computer\Galaxy Nexus\Internal Storage 中找不到它，但会出现所有其他文件夹。

我使用了一个名为 OI File Managaer 的应用程序，我可以在手机上查看文件夹和文件，但是如何通过 Windows 操作系统查看呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:38:41.980

如果您真的想在您的设备上查找文件，我会推荐您可以找到的 Google Play 应用程序之一（我个人喜欢[ASTRO 文件管理器](https://play.google.com/store/apps/details?id=com.metago.astro)），或者，您可以在 PC 上使用（例如）[Android Commander](http://androidcommander.com/)（顺便提一下，将允许您使用将在开发环境中使用的相同文件路径结构）。

我相信 Android 设备在您浏览它时实际上不会向您显示所有路径和可用文件，例如，使用 Windows 资源管理器。

如果您使用的是 Eclipse，则可以在 DDMS 透视图中浏览设备的文件结构。在您的右侧，您有“文件资源管理器”，据我所知，它是一个非常完整的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:17:46.657

不要使用 /mnt/sdcard 访问外部存储。您可以使用 Environment.getExternalStorageDirectory() 访问外部存储的路径。这可能因设备而异。

# javascript - Mongoose 子文档排序

> ID：16199283
> 
> 赞同：3
> 
> 时间：2013-04-24T18:13:30.560
> 
> 标签：javascript, node.js, express, mongoose

这实际上是两个问题。

使用 MongooseJS

1.  您可以为 Schema 设置默认排序顺序吗？
2.  你能控制子文档的排序方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T16:15:21.433

查看[可用于创建模式的选项](http://mongoosejs.com/docs/api.html#schema_Schema)，看起来这不是一个可用的选项：

```
autoIndex: bool - defaults to true
bufferCommands: bool - defaults to
true capped: bool - defaults to false
collection: string - no default
id: bool - defaults to true
_id: bool - defaults to true
minimize: bool - controls document#toObject behavior when called manually - defaults to true
read: string
safe: bool - defaults to true.
shardKey: bool - defaults
to null strict: bool - defaults to true toJSON - object - no default
toObject - object - no default
versionKey: bool - defaults to "__v" 
```

您也许可以制作一个[插件](http://mongoosejs.com/docs/plugins.html)来完成您正在尝试做的事情。

# php - 字符串比较运算符如何在 Twig 中工作？

> ID：16199284
> 
> 赞同：41
> 
> 时间：2013-04-24T18:13:31.413
> 
> 标签：php, twig

这怎么可能？这似乎是一个非常非常奇怪的问题（除非我遗漏了一些非常简单的东西）：

代码：

```
{{ dump(nav) }}
{% if nav == "top" %}
    <div class="well">This would be the nav</div>
{% endif %} 
```

输出：

```
boolean true
<div class="well">This would be the nav</div> 
```

![截屏](https://i.stack.imgur.com/jLTQy.png)

基本上，如果为真，它会输出，但它并不意味着检查是否为真。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-24T18:28:36.210

这很容易重现：

```
{% set nav = true %}
{% if nav == "top" %}
ok
{% endif %} 
```

显示`ok`。

根据[文档](http://twig.sensiolabs.org/doc/templates.html)：

> Twig 允许在任何地方表达。这些工作与普通 PHP**非常相似**，即使您不使用 PHP，您也应该对它感到满意。

如果您在纯 PHP 中测试以下表达式：

```
$var = true;
if ($var == "top") {
  echo 'ok';
} 
```

也会显示ok。

关键是：你不应该比较不同类型的变量。在这里，您将 bool 与 string 进行比较：如果您的字符串不为空或不包含仅零，它将评估为 true。

您还可以查看[PHP 手册](http://php.net/manual/en/language.operators.comparison.php)，了解如何与不同类型进行比较。

## 编辑

您可以使用[sameas](http://twig.sensiolabs.org/doc/tests/sameas.html)测试进行严格的比较，并避免类型杂耍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-24T21:25:40.570

如果有人需要否定字符串比较语句的结果，请使用下一个构造：

```
{% set is_training = course_type == 'training' %}
...
{% if not is_training %}
... 
```

# python - Matplotlib 是否支持 Qt5？

> ID：16199286
> 
> 赞同：5
> 
> 时间：2013-04-24T18:13:33.210
> 
> 标签：python, matplotlib

Matplotlib 支持`Qt5`吗？

## 更新：

阅读下面@tcaswell 的答案和评论，它看起来像`QT4Agg`targets `Qt4`，但目前没有 target 的后端，`Qt5`这是正确的吗？（例如，看起来[PyQt 支持 Qt5](http://www.riverbankcomputing.com/news/pyqt-4101)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T20:24:08.880

`Qt5Agg`matplotlib v1.4 及更高版本通过后端支持 Qt5 。

* * *

后端都使用`*Agg`Agg 渲染器进行绘图，它们使用的 gui UI 的唯一区别。非 gui 后端用于生成文件并且可以很好地处理矢量图形。排除文件限制（并非所有格式都支持`alpha`）和错误，所有后端都应该得到同等支持。

后端以 QT4为`QT4Agg`目标，将使用`PySide`or `PyQT`（处理其余要求）。后端针对`QtAgg`QT3 并已被删除。

有一个 PR（[https://github.com/matplotlib/matplotlib/pull/3072](https://github.com/matplotlib/matplotlib/pull/3072)）增加了对已合并的 Qt5 的支持。Qt5 对 py3k 的支持将在 1.4 版中。

# java - 如何避免类似接口产生的转换错误

> ID：16199287
> 
> 赞同：1
> 
> 时间：2013-04-24T18:13:35.297
> 
> 标签：java, generics, casting, comparator, comparable

我在 Java 中有一个泛型类：

```
public class PriorityList<T extends Number> implements Comparable<T> {  

    T[] array = (T[]) new Object[10]; 
```

我有一个错误

> java.lang.ClassCastException：[Ljava.lang.Object；不能转换为 [Ljava.lang.Number;

此转换**(T[]) new Object[10]**会产生错误。

我需要比较方法，因为我需要对数组元素进行排序。所以我不能像这样声明类

```
public class PriorityList<T extends Number> 
```

其他有一定意义的选项是由我自己的链表制作的，以保持 T 值。但这是解决这个铸造问题的另一种方法

```
(T[]) new Object[10]; 
```

?

禁止使用 PS 收藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:54:32.187

T 的擦除是 Number，所以：

```
Number[] array = new Number[10]; 
```

会让你足够接近。`T`可以在该数组中存储 Number 的任何子类（例如 any ）。（注意：这也应该解释为什么转换为`(T[])new Object[10]`aka`(Number[])new Object[10]`会导致异常。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:22:36.120

您不能将数组`Object`转换为数组，`Number`因为`Object`数组可以包含任何类型的对象 - 不仅是`T`类型。但是`new T[]`由于类型错误而不正确 - 即 java 运行时不知道`T`.

一种方法是制作`a`一个`Object[]`数组。

另一种方法是：

```
public PriorityList(Class<T> type) {
    T[] a = (T[])Array.newInstance(type, 10);
} 
```

或者，如前所述 - 使用 Java 集合 - 它们更通用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:22:36.900

您不能将保留的数组转换为未知类型的数组。我建议您以这种方式为 T 对象使用数组工厂：

```
public interface ArrayFactory<T extends Number> {
    T[] create(int size);
}

public class PriorityList<T extends Number> implements Comparable<T> {

    private ArrayFactory<T> factory=...;
    T[] array = factory.create(10); 
```

然后，您可以为 PriorityList 提供 ArrayFactory 的实现。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T18:40:08.993

Number**是 Object**，但 Object**不是 Number**

此方法 from`java.util.Arrays`包含您想要的逻辑。它可以创建一个类型为 T 的数组

```
 public static <T,U> T[] copyOf(U[] original, int newLength, Class<? extends T[]> newType) {
        T[] copy = ((Object)newType == (Object)Object[].class)
            ? (T[]) new Object[newLength]
            : (T[]) Array.newInstance(newType.getComponentType(), newLength);
        System.arraycopy(original, 0, copy, 0,
                         Math.min(original.length, newLength));
        return copy;
    } 
```

# python - 在 python txt 文件中打印特定的列

> ID：16199288
> 
> 赞同：1
> 
> 时间：2013-04-24T18:13:37.020
> 
> 标签：python, file-io

我正在尝试读取存储在包含 25 列的文本文件中的数据，例如

```
erd,thr,yui 
```

我想选择第 4 列和第 13 列并将它们并排写入文本文件，例如

```
Mark , baseball 
```

我已经研究并找到了可以为单个列执行此操作的代码，但我无法让它为两个列工作，有人知道该怎么做吗？

这是我试图使用的代码

```
col = 2 # third column
filename = '4columns.txt'
third_column = [line[:-1].split('\t')[col] for line in open(filename,
'r')] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:19:19.540

Python 有一个“csv”模块（逗号分隔值），您可以将其用于类似的事情。

```
import csv

with open( "myfile.txt", "r" ) as f:
    for row in csv.reader( f ):
        print row[3], ",", row[13] 
```

# php - 如何捕获 php 中不存在的子对象引发的错误？

> ID：16199291
> 
> 赞同：0
> 
> 时间：2013-04-24T18:13:54.197
> 
> 标签：php, plugins, error-handling

我正在努力思考如何在 php 中实现一个好的插件系统。我读了很多关于挂钩系统和实现这些东西的不同方法的文章，但直到现在我还没有找到任何适合我需要的方法或现有系统。

我想要一个对象（让它成为 $plugins），其中所有使用的插件都可以作为子对象（$plugin->$blog）。到目前为止，这没有问题。但是我怎么能捕捉到一个不存在的插件呢？

如果在代码中的某个地方我会使用 $plugin->$blog->loadArticle 或类似的东西调用插件 $blog 并且插件系统没有加载插件，则会引发致命错误。是否可以在调试类中捕获和处理这些错误？

谢谢你的想法！请原谅我的英语...... ;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:18:58.803

好吧，您可以使用魔术 __get() 像这样实现您的 Plugin 对象

```
class Plugins {
   private $plugins = array();

   public function __get($name) {
       if (!isset($this->plugins[$name]) {
          throw new PluginNotInstalledException(); //this can be catched with try / catch
       }
       return $this->plugins[$name];
   }

   ... //methods addPlugin() etc..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:19:09.707

每当您设置`$blog`属性时，最好检查传递的参数是否为`=== NULL`，如果是则抛出异常。所以你会确定它`$plugin->blog`不为空。

如果您的插件必须实现接口或继承抽象类，那就更好了。因此，每当您设置属性时，您都可以检查传递的参数是否`instanceof`是该类/接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:22:51.727

一个简单的方法是提供一个 getPlugin() 方法。

```
function getPlugin($plugin)
{
  if(! isset($this->$plugin)) return false;

  return $this->$plugin;
}

$blog = $plugins->getPlugin('blog');
if($blog === false)
{//error condition

} 
```

# javascript - 调整由 JS 添加的特定 TinyMCE 编辑器的大小

> ID：16199296
> 
> 赞同：2
> 
> 时间：2013-04-24T18:14:11.823
> 
> 标签：javascript, resize, tinymce

我正在通过两个不同的 javascript 点击/调用使用 TinyMCE 添加/替换两个文本区域。它们具有不同的 ID，并且通过“execCommand”调用正确添加：

```
tinymce.execCommand('mceAddControl',true,'comment1'); 
```

但是，当屏幕上有多个对象时，我无法调整对象的大小。如果只有一个，我可以使用“activeEditor”成功调用“resizeTo”来调整对象的大小，如下所示：

```
tinymce.execCommand('mceAddControl',true,'comment1');
var ed = tinymce.activeEditor;
ed.theme.resizeTo(400, 200); 
```

但是当有多个编辑器时，我不能使用“activeEditor”并且我不知道如何选择特定的编辑器来调整大小。我尝试了以下方法，但没有奏效：

```
var edd = tinymce.get('comment2');
edd.theme.resizeTo(350,306); 
```

有什么帮助/建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:29:39.767

为了必须使用 textareas 作为源元素的 tinymce 编辑器，您为每个 testareas 提供了一个唯一的 id。此 id 将帮助您获得正确的编辑器实例。

利用

```
var editor = tinymce.get('your_textarea_id'); 
```

获得正确的编辑器。就这样。

# sql - PL SQL 函数 - 如何调用

> ID：16199301
> 
> 赞同：0
> 
> 时间：2013-04-24T18:14:20.077
> 
> 标签：sql, function, parameters, plsql, oracle-apex

我在 PL/SQL 中有如下函数（在 Oracle APEX 中使用）：

```
create or replace FUNCTION User_Levels(result OUT VARCHAR2)
RETURN VARCHAR2 IS

v_user_types employee.user_type%TYPE;
BEGIN
    SELECT user_type
INTO v_user_types
FROM Employee
WHERE upper(username) = v('APP_USER');
IF v_user_types = 1
THEN
result := 'TRUE';
ELSE
result := 'FALSE';
END IF; 
END User_Levels;​ 
```

我如何调用它只是为了在普通 SQL 中查看它的当前输出，即它在运行时是否评估为 True 或 False。

我真的需要名为结果的 OUT 参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:39:51.753

从 SQL*Plus：

```
var result varchar2(10);
var rc varchar2(10);

exec :rc := user_levels(:result);

print rc
print result 
```

但是，您的函数无效，因为您没有`return`子句。由于您唯一可以返回的是`result`，因此将其作为输出参数和返回值是多余的。你保留哪一个取决于你想如何使用它，但我建议一个函数在这里更灵活和合适。

```
create or replace FUNCTION User_Levels
RETURN VARCHAR2 IS
    v_user_types employee.user_type%TYPE;
BEGIN
    SELECT user_type
    INTO v_user_types
    FROM Employee
    WHERE upper(username) = v('APP_USER');

    IF v_user_types = 1 THEN
        RETURN 'TRUE';
    ELSE
        RETURN 'FALSE';
    END IF;
END User_Levels;​
/ 
```

...假设`v('APP_USER')`做一些明智的事情。然后你可以这样做：

```
select user_levels from dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:57:19.243

应该管用。通常，您会创建一个变量（如 v_user_types）并返回它（p_result）。此外，您需要确保您的 v('APP_USER') 也是大写的。

此外，您不能从 SQL*PLUS 或任何命令提示符运行它，因为 v('APP_USER') 是应用程序变量；因此，您必须在 APEX 页面上对此进行测试。

```
create or replace FUNCTION User_Levels(p_result OUT VARCHAR2)
RETURN VARCHAR2 IS

v_user_types employee.user_type%TYPE;
p_result VARCHAR2(10);

BEGIN
    SELECT user_type
    INTO v_user_types
    FROM Employee
    WHERE upper(username) = v('APP_USER');

    IF (v_user_types = 1) THEN
       p_result := 'TRUE';
    ELSE
       p_result := 'FALSE';
    END IF; 

 RETURN p_result;

END User_Levels;​ 
```

# c# - 在 C# 中使用结构是否有任何内存或 CPU 开销

> ID：16199304
> 
> 赞同：1
> 
> 时间：2013-04-24T18:14:28.203
> 
> 标签：c#, memory, struct

使用 struct shim 替换锯齿状数组是否有任何开销？

举一个具体的例子

```
vertices = new KeyValuePair<uint, EdgeData>[][]; 
```

对比

```
private struct Vertex
{
    public KeyValuePair<uint, EdgeData>[] Arcs { get; set; }
}

vertices = new KeyValuePair<uint, Vertex>[]; 
```

EdgeData 是一个类，如果它有任何区别
显然结​​构示例中的意图更清晰，但它需要能够保存大量图表，因此任何内存开销都很重要

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:00:27.953

A`struct`可能会或可能不会在堆栈上分配。引用类型**永远**不能在堆栈上分配；它们总是在堆上分配。

来自标准 (ISO 23270)，第 8.8 节：

> **8.8 结构** 类和结构之间的相似之处很长——结构可以实现接口，并且可以具有与类相同类型的成员。然而，结构与类在几个重要方面有所不同：结构是值类型而不是引用类型，结构不支持继承。结构值存储在“堆栈上”或“内联”。细心的程序员有时可以通过明智地使用结构来提高性能。
> 
> 例如，对 Point 使用结构而不是类可以在运行时执行的内存分配数量上产生很大差异。下面的程序创建并初始化一个包含 100 个点的数组。
> 
> 作为`Point`一个类实现，101 个单独的对象被实例化——一个用于数组，一个用于 100 个元素。
> 
> ```
> class Point
> {
>   public int x, y;
>   public Point(int x, int y)
>   {
>     this.x = x;
>     this.y = y;
>   }
> 
> }
> class Test
> {
>   static void Main()
>   {
>     Point[] points = new Point[100];
>     for (int i = 0; i < 100; i++)
>     {
>       points[i] = new Point(i, i*i);
>     }
> } 
> ```
> 
> If`Point`被实现为结构，如
> 
> ```
> struct Point
> {
>   public int x, y;
>   public Point(int x, int y)
>   {
>     this.x = x;
>     this.y = y;
>   }
> } 
> ```
> 
> 只有一个对象被实例化——用于数组的那个。Point 实例在数组中内联分配。这种优化可能会被滥用。使用结构而不是类也会使应用程序运行速度变慢或占用更多内存，因为按值传递结构实例会导致创建该结构的副本。

所以答案是“也许”。

对于您的示例，将数组（引用类型）包装在`struct`（值类型）中并不意味着什么：该数组仍分配在堆上。

但是，如果您将类更改`EdgeData`为结构，则可以（但可能不会）在数组中内联分配它。`EdgeData`因此，例如，如果您的类的大小为 16 个字节，并且您创建并填充了`EdgeData[]`100 个条目，那么您实际上分配了 1 个数组实例（其后备存储大小可容纳 100 个对象引用和您的`EdgeData`类的 100 个单独实例.

如果`EdgeData`是一个结构，则分配 1 个数组，其后备存储大小可容纳 100 个`EdgeData`实例（在本例中为 1600 个字节，因为我们假设的`EdgeData`结构大小为 16 个字节。）

遍历数组的类版本，特别是如果数组非常大，可能会导致分页，因为当您跳过整个堆以访问各个`EdgeData`实例时，您可能会丢失引用的局部性。

对数组版本的迭代`struct`保留了引用的局部性，因为`EdgeData`实例是内联的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T20:40:18.480

结构数组往往相当有效，尽管在您的特定示例中，每行都有一个额外的 uint。此外，避免暴露结构类型的属性，并且如果结构表示与胶带绑定在一起的独立值的集合（例如点的坐标），则只需将这些项目作为字段公开。虽然在很多情况下 JIT 会将属性访问转换为字段访问，但也有很多情况下它不能。

如果要比较以下效率：

```
struct FloatPoint2D {public float X,Y;}
FloatPoint3D[] MyArray; 
```

相对

```
float[] MyXCoords, MyYCoords; 
```

使用上面定义的结构，以随机顺序访问项目的 X 和 Y 将比使用一对单独的数组（通常是一个缓存未命中而不是两个）更快，但只访问顺序中许多项目的 X 或 Y 坐标如果使用单独的数组会更快（每个缓存行将获取两倍的*有用坐标）。*

在您的特定示例中，尚不清楚您的类型需要封装哪些数据；您的结构和非结构示例包含不同的数据，因此很难说一个“更有效”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T19:05:28.183

将 2D 数组替换为 1D 结构数组不会导致任何问题。这实际上是您如何查看数据的问题。如果将其建模为结构数组更有意义，每个结构都包含一个弧数组，那么这就是您应该在代码中表达它的方式。

它们的存储方式存在*一些细微差别。*特别是，您的一维数组方法将比二维数组方法占用更多的内存。`uint`基本上，每一行都有一个额外的。

紧随其后。它正在讨论 struct 方法和 2D 数组（即 ）之间的区别，而不是OP 正在使用`[,]`的锯齿状数组（ ）。`[][]`

~~实际上，使用的总内存会更多。在二维数组方法`(row * col) KeyValuePair`中，数组中有结构。该数组在 64 位运行时有大约 50 个字节的分配开销（如果我记得的话，在 32 位运行时大约有 40 个字节）。在一维数组方法中，您仍然有`(row * col) KeyValuePair`结构，但每个结构都包含一个具有相同 50 字节分配开销的数组。此外，您还有`vertices`包含`(row) KeyvaluePair`结构的数组。~~

但是，您的二维数组（只是数组）需要`(rows * cols * (4 + sizeof(IntPtr)))`字节。一维`vertices`数组只需要`(rows * (4 + sizeof(IntPtr)))`字节。如果单个数组的大小限制为 2 GB（就像您在 .NET 4.0 和更早版本中一样，或者在 .NET 4.5 中，除非您启用非常大的对象），那么您可能会使用一维数组拥有更多的项目结构比二维数组。当然，假设您有足够的内存来保存这么多`KeyValuePair<uint, EdgeData>`实例。

所以你的整体内存使用会增加，但你最大的单个分配会小得多。

# ios - 如何使用自动布局动画视图更改视图层次结构？

> ID：16199306
> 
> 赞同：0
> 
> 时间：2013-04-24T18:14:35.750
> 
> 标签：ios, animation, view, subview

我有名为 self.myMainView 的超级视图

在那个视图中，我有三个子视图： UIView *view1（绿色视图）、UIView *view2（灰色视图）、UIImageView *view3

我想动画视图3的移动

当视图 3 完成此动画时，我想更改视图层次结构，例如示例屏幕截图。

这是示例图像：

![前：](https://i.stack.imgur.com/7LUrr.png)

![在我们的操纵之后，它必须是](https://i.stack.imgur.com/zLffo.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:20:13.443

您正在做的是更改视图分层顺序的正常标准方法。所以问题不在于这个，而用你的话来说“但是，它违反了我的动画”和“粉碎我的动画”。那么，问题在于你的动画，如果它可以通过重新排列图层来“违反”和“粉碎”。但是，在您的问题中，您没有提供有关动画的任何信息！然而，这显然是问题的核心。

编辑：既然你已经发布了动画代码，我就可以测试了，我明白了问题所在。问题是您正在使用自动布局。

`view3`由约束定位。当您为 的位置设置动画时`view3`，您违反了这些约束，但这不会立即变得明显。但是当你交换 和 的分层顺序时`view1`，`view2`就会进行布局！`view3`然后强制执行对 的约束。由于这些约束并没有改变，我们会看到`view3`你最初拥有它的地方。

最简单的解决方案是在不需要时关闭自动布局。否则，您将不得不在动画之后或作为动画的一部分更改约束。事实上，您可以`view3`通过为其位置约束设置动画来重新定位。我在我的书中描述了这一切，在这里：[http ://www.aeth.com/iOSBook/ch17.html#_animation_and_autolayout](http://www.apeth.com/iOSBook/ch17.html#_animation_and_autolayout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:38:27.747

如果你想要做的只是切换你的 2 个子视图中的哪一个在另一个之上，你可以简单地使用`[UIView bringSubviewToFront:]`而不是直接弄乱你的子视图数组的顺序吗？这可能会解决动画问题。我会尝试的另一件事是`if( finished )`围绕您的电话进行`exchangeSubviewAtIndex`，以确保它不会干扰其他动画视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T20:17:09.463

问题出在视图 3 的约束中，它在动画后不会改变，当我们想要操纵视图层次结构时，动画会停止正常工作。马特在他的回答中谈到了这一点，他还从他的好书中提供了一个解决方案：[http](http://www.apeth.com/iOSBook/ch17.html#_animation_and_autolayout) ://www.aeth.com/iOSBook/ch17.html#_animation_and_autolayout 谢谢你的马特。

我稍微更改了此解决方案，并决定将其发布在此处以供需要此解决方案的任何人使用。但如果你想更好地理解这一点，我强烈建议你阅读书中关于动画的章节，链接在上面。

首先，我们需要为视图 3 的移动设置动画，然后更改我们的约束，并且只有在此之后才更改视图层次结构。在书中找到了几种方法来做到这一点，但在我看来，这是最好的：

```
layout = -35.0; //  new constraint constant of self.view3

NSArray *constraintsForAnimation = self.myMainView.constraints; // all constraints of superview 

NSUInteger indexOfconstraintsAttribute = [constraintsForAnimation
indexOfObjectPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop){ // get index of constraint of view 3

    NSLayoutConstraint *constraint = obj;

    return (([constraint.firstItem isEqual: self.view3])) ? idx : NO; // return this index if we found constraint of view 3

}];

constraint.constant = layout; // changing the constraint of view3 

[UIView animateWithDuration:0.3 animations:^{ // animation
   [self.view3 layoutIfNeeded]; // apply new constraints to view3
}];

[self.myMainView exchangeSubviewAtIndex:3 withSubviewAtIndex:4];// toggle view 1 with view 2 
```

我们仅在约束的帮助下移动视图 3，我们不设置框架或中心视图属性。好的，我们完成了，这就像我想要的那样工作。希望这对你也有帮助。

# javascript - 如何在动态站点上轻松阅读 xls 文档？

> ID：16199312
> 
> 赞同：0
> 
> 时间：2013-04-24T18:14:57.583
> 
> 标签：javascript, python, xls

在这里编程菜鸟。我正在一个网站上工作，用户填写表格并根据他们的输入在页面上显示来自大型 excel 表的给定值。我知道 JS、jQuery、HTML/CSS 和 Python，但我还没有学会如何使用像 Django 这样的框架。我想知道如何最轻松地从 xls 文档中读取值。看起来 xlrd 是一个不错的选择。不过，我在紧迫的期限内完成这个项目，所以我不确定我是否有时间学习像 Django 这样的框架，而且对于像这样简单的事情来说，这似乎有点矫枉过正。我可以在不学习框架的情况下将 xlrd 用于网站吗？更广泛地说，实现此解决方案的最简单方法是什么（即从 XLS 文档中读取值到网页上）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:41:02.273

Django 是一个大框架，可以考虑使用[Flask](http://flask.pocoo.org/)微框架（你应该不会花费超过 4 个小时来获得基础知识并组装简单的应用程序）。

最简单的方法是使用 Microsoft 技术堆栈 - 您可以很容易地将 Excel 表公开为 Web 服务，因此网页可以将其数据读取为 JSON 或 XML。

# iphone - 仅当一个用户都拥有该应用程序时，如何让一个用户向另一个用户发送请求？

> ID：16199320
> 
> 赞同：0
> 
> 时间：2013-04-24T18:15:23.670
> 
> 标签：iphone, ios, cocos2d-iphone

我想让一个用户发送请求以与另一个用户一起玩该应用程序，但前提是另一个用户也有该应用程序。我已经在 snapchat 中看到了这一点，它可以让你添加（或朋友）也有 snapchat 的人。我认为用户必须授予应用程序访问联系人的权限，但在那之后我很迷茫。有没有人有任何讨论这个的链接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:52:38.693

许多应用程序要求电子邮件登录，或者他们要求提供手机号码，然后使用包含该数据的通讯录查找朋友。

您请求访问他们的联系人并将其上传到您的服务器。确保你清楚正在发生的事情。Path 在没有明确披露的情况下这样做了，[人们开始担心了。](http://www.theverge.com/2012/2/8/2785217/path-ios-address-book-upload-ceo-apology)

没有[办法以编程方式获取](https://stackoverflow.com/questions/193182/programmatically-get-own-phone-number-in-ios)iPhone 的电话号码，所以你必须要它。

TLDR：

1.  询问电子邮件或手机号码
2.  请求联系人的权限
3.  匹配您服务器上的那些并返回结果。

理论上你也可以使用 Facebook，但我对那个 API 没有任何经验。

# php - AJAX 返回 false 但我不明白为什么？

> ID：16199323
> 
> 赞同：0
> 
> 时间：2013-04-24T18:15:44.323
> 
> 标签：php, javascript, ajax

我正在尝试立即对输入更改的关键字进行数据库查询。现在，我得到了一个成功的查询，所有结果都存储了，但是在`GET`显示它们时，我的`ajax`函数返回 false。为什么这样做？

控制台输出：

```
POST http://example.com/functions/ajax.php

response: the data i need to display 
```

其次是

```
GET http://example.com/functions/ajax.php

response: false 
```

这是我的 JS：

```
<script id="source" language="javascript" type="text/javascript">
$(function () {
    $('#url').bind('input', function () {
        $(this).val() // get  value
        $.ajax({
            type: 'POST',
            url: 'functions/ajax.php',
            data: {
                url: $('#url').val()
            },
            success: function (data) //on receive of reply
            {
                $(function () {

                    $.ajax({
                        url: 'functions/ajax.php', //the script to call to get data          
                        data: "", //you can insert url arguments here to pass to api.php
                        //for example "id=5&parent=6"
                        dataType: 'json', //data format      
                        success: function (data) //on receive of reply
                        {
                            var namePHP = data[1];
                            var categoryPHP = data[2];

                            //--------------------------------------------------------------------
                            // 3) Update html content
                            //--------------------------------------------------------------------

                            $('#name').html(namePHP); // # name and #category are input fields I want autofilled
                            $('#category').html(categoryPHP);

                        }
                    });
                });
            }
        });
    });
});
</script> 
```

ajax.php

```
<?php
require_once ('DBconnect.php');

$url = $_POST['url'];

$url = mysqli_real_escape_string($con, $url);

$query = "SELECT * FROM `inserted_posts` WHERE `search_name` = '$url'";
$result = mysql_query($query);

$array = mysql_fetch_array($result);

echo json_encode($array);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:17:43.017

您的`ajax.php`文件依赖于`$_POST`变量。这意味着您必须使用该`POST`方法发送数据。否则，PHP 就是看不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:18:11.873

将 $url 的变量分配更改为从 $_REQUEST 而不是 $_POST

```
$url = $_POST['url']; 
```

至

```
$url = $_REQUEST['url']; 
```

# actionscript-3 - away3d 和 cs6 外部 as3 文件

> ID：16199325
> 
> 赞同：0
> 
> 时间：2013-04-24T18:15:49.330
> 
> 标签：actionscript-3, flash, away3d

我需要一些帮助来午餐外部动作脚本文件假设我有这个文件：

Basic_SkyBox.as

这是它的代码：

```
package
{
    import away3d.cameras.lenses.*;
    import away3d.containers.*;
    import away3d.entities.*;
    import away3d.materials.*;
    import away3d.materials.methods.*;
    import away3d.primitives.*;
    import away3d.textures.*;
    import away3d.utils.*;

    import flash.display.*;
    import flash.events.*;
    import flash.geom.Vector3D;

    [SWF(backgroundColor="#000000", frameRate="60", quality="LOW")]

    public class Basic_SkyBox extends Sprite
    {
        // Environment map.
        [Embed(source="../embeds/skybox/snow_positive_x.jpg")]
        private var EnvPosX:Class;
        [Embed(source="../embeds/skybox/snow_positive_y.jpg")]
        private var EnvPosY:Class;
        [Embed(source="../embeds/skybox/snow_positive_z.jpg")]
        private var EnvPosZ:Class;
        [Embed(source="../embeds/skybox/snow_negative_x.jpg")]
        private var EnvNegX:Class;
        [Embed(source="../embeds/skybox/snow_negative_y.jpg")]
        private var EnvNegY:Class;
        [Embed(source="../embeds/skybox/snow_negative_z.jpg")]
        private var EnvNegZ:Class;

        //engine variables
        private var _view:View3D;

        //scene objects
        private var _skyBox:SkyBox; 
        private var _torus:Mesh;

        /**
         * Constructor
         */
        public function Basic_SkyBox()
        {
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;

            //setup the view
            _view = new View3D();
            addChild(_view);

            //setup the camera
            _view.camera.z = -600;
            _view.camera.y = 0;
            _view.camera.lookAt(new Vector3D());
            _view.camera.lens = new PerspectiveLens(90);

            //setup the cube texture
            var cubeTexture:BitmapCubeTexture = new BitmapCubeTexture(Cast.bitmapData(EnvPosX), Cast.bitmapData(EnvNegX), Cast.bitmapData(EnvPosY), Cast.bitmapData(EnvNegY), Cast.bitmapData(EnvPosZ), Cast.bitmapData(EnvNegZ));

            //setup the environment map material
            var material:ColorMaterial = new ColorMaterial(0xFFFFFF, 1);
            material.specular = 0.5;
            material.ambient = 0.25;
            material.ambientColor = 0x111199;
            material.ambient = 1;
            material.addMethod(new EnvMapMethod(cubeTexture, 1));

            //setup the scene
            _torus = new Mesh(new TorusGeometry(150, 60, 40, 20), material);
            _view.scene.addChild(_torus);

            _skyBox = new SkyBox(cubeTexture);
            _view.scene.addChild(_skyBox);

            //setup the render loop
            addEventListener(Event.ENTER_FRAME, _onEnterFrame);
            stage.addEventListener(Event.RESIZE, onResize);
            onResize();
        }

        /**
         * render loop
         */
        private function _onEnterFrame(e:Event):void
        {
            _torus.rotationX += 2;
            _torus.rotationY += 1;

            _view.camera.position = new Vector3D();
            _view.camera.rotationY += 0.5*(stage.mouseX-stage.stageWidth/2)/800;
            _view.camera.moveBackward(600);

            _view.render();
        }

        /**
         * stage listener for resize events
         */
        private function onResize(event:Event = null):void
        {
            _view.width = stage.stageWidth;
            _view.height = stage.stageHeight;
        }
    }
} 
```

好的，然后我创建新的操作脚本页面我如何引用上面的文件脚本以在 flash cs6 的项目主页中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:19:34.243

您需要将文档类设置为 Basic_Skybox。确保 .fla 和 Basic_Skybox.as 位于同一目录中。

这是一个关于这样做的教程：http: [//active.tutsplus.com/tutorials/actionscript/quick-tip-how-to-use-a-document-class-in-flash/](http://active.tutsplus.com/tutorials/actionscript/quick-tip-how-to-use-a-document-class-in-flash/)

# ios - BannerViewController 干扰 hidesBottomBarWhenPushed

> ID：16199335
> 
> 赞同：3
> 
> 时间：2013-04-24T18:16:35.633
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, iad

我正在实施基于 iAdSuite 中 TabbedBanner 示例的设计。我在第一个选项卡中有一个 UINavigationController。在那个 UINavigationController 我有一个视图控制器，它只是有一个按钮，可以推送到另一个视图控制器。推送的视图控制器在 Interface Builder 中设置为 Hide Bottom Bar On Push。

这是我设置 UITabBarController 的代码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:[[NSBundle mainBundle].infoDictionary objectForKey:@"UIMainStoryboardFile"] bundle:[NSBundle mainBundle]];

    _tabBarController = [storyboard instantiateViewControllerWithIdentifier:@"TabBarController"];
    _tabBarController.delegate = self;

    FirstViewController *firstView = [storyboard instantiateViewControllerWithIdentifier:@"FirstViewController"];
    UINavigationController *firstNav = [[UINavigationController alloc] initWithRootViewController:firstView];

    _tabBarController.viewControllers = @[[[BannerViewController alloc] initWithContentViewController:firstNav], ];

    self.window.rootViewController = _tabBarController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

当我推送到下一个视图控制器时，除了 TabBar 没有隐藏之外，一切正常。我曾尝试使用 Interface Builder 复选框以及使用 nextViewController.hidesBottomBarWhenPushed = YES 隐藏 TabBar，但两种方法都不起作用。

如果我删除 BannerViewController 实现，TabBar 将完全隐藏。在我看来， BannerViewController 正在干扰 UINavigationController 能够隐藏 TabBar。

在这种类型的设置中，是否可以使用“按下时隐藏底部栏”来隐藏 TabBar？

谢谢

注意：我意识到上面的代码只有一个选项卡。为了清楚起见，我删除了其他选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T16:14:03.650

我认为这是因为 BannerViewController 本身只是一个容器 viewController 并且它从未真正推动另一个视图控制器。视图控制器被推送到容器中。

# javascript - onchange 1 个下拉菜单上的 2 个函数

> ID：16199336
> 
> 赞同：1
> 
> 时间：2013-04-24T18:16:41.137
> 
> 标签：javascript, forms, jquery, drop-down-menu

我想从一个下拉菜单中调用 2 个函数。看来我只能让一个工作，但不能同时工作。寻求一些帮助来解决这个问题。这是代码，谢谢。

功能一

```
<script type="text/javascript">
function getCredit(str)
{
if (str=="")
  {
  document.getElementById("credit").innerHTML="";
return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("credit").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getcredit.php?id="+str,true);
xmlhttp.send();
}
window.onload = function() {
document.getElementsByName('company')[0].onchange();
}
</script> 
```

这是功能2。

```
<script type="text/javascript">
function getTerms(str)
{
if (str=="")
  {
  document.getElementById("terms").innerHTML="";
return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("terms").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","customertermsdropdownquery.php?id="+str,true);
xmlhttp.send();
}
window.onload = function() {
document.getElementsByName('company')[0].onchange();

}

</script> 
```

这是调用它们的表单下拉列表。

```
<td><select name="company" onchange="getTerms(this.value);getCredit(this.value);">
<?php while($row = mysql_fetch_array($result)) {
  echo "<option value=\"".$row['company']."\">".$row['company']." (".$row['first']." ".$row['last'].")</option>"; } ?></select></td> 
```

我在表单中使用 div 来显示 php。

```
<div id="terms"></div>
and
<div id="credit"></div> 
```

我可以让任何一个单独工作，但不能一起工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:40:21.097

完全可以理解你想让它们分开。如何创建一个这样的新功能。

```
function getTermsAndCredits(value) {
   getTerms(value);
   getCredits(value);
} 
```

然后在 onchange 事件中像这样调用它

```
<td><select name="company" onchange="getTermsAndCredits(this.value);"> 
```

这是一个[小提琴](http://jsfiddle.net/nuclearghost/b7r7W/1/)，它应该会给你一个更好的主意。我认为没有必要像您当前在代码中那样调用 onload 函数。

# sql - 访问 2013 数据类型

> ID：16199338
> 
> 赞同：0
> 
> 时间：2013-04-24T18:16:51.680
> 
> 标签：sql, ms-access

我刚开始使用 Access 2013，有两种新的数据类型，短文本和长文本。我需要以编程方式在 SQL 中添加一个表，我曾经使用过`TEXT(100)`或类似的东西，但是我用什么来创建类型的列`Long Text`？我需要该字段类似于以前版本的 Access 中的备忘录类型，基本上是无限的或非常大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:21:42.860

你可以`Long Text`像这样使用`memo type`：

> 在早期版本（A2007 之前）中，我们有备注字段的 RTF 演示。实现是 - IIRC - 以 Word RTF 格式存储您在屏幕上的文本，并在 {} 中使用一些神秘代码来指示格式。在 A2007 中，它们更改为称为富文本的新格式。这存储在带有 HTML 标记的备注字段中实现格式化。他们现在改变的不是这些字段的 UI，而是数据库中数据类型的名称。它不再叫 MEMO，现在叫 LONG TEXT。格式化的文本应该仍然以与 HTML 编码文本相同的方式存储。当您从纯文本切换到富文本时，您什么也不做，然后告诉 Access 使用另一个 UI 来显示数据库中数据的内容。保存的还是一样的。

[你可以从这里](http://social.msdn.microsoft.com/Forums/en-US/accessdev/thread/db74d3c8-6068-46b9-bffb-a1d3953a9ac5/)阅读更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:21:12.150

哎呀，我找到了。这只是长文本。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms714540(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714540%28v=vs.85%29.aspx)

# python - 如何在系统调用未返回值时向前迈进

> ID：16199341
> 
> 赞同：0
> 
> 时间：2013-04-24T18:17:07.653
> 
> 标签：python, linux

假设我`su`通过 python 调用命令`os.system("su")`并且在进入 root 模式后，我希望 python 在这个新进入的 root/超级用户模式下执行命令列表。如何在不退出 root 模式的情况下获得过早的返回值？

# android - 在Android上获取多个复选框的值

> ID：16199345
> 
> 赞同：0
> 
> 时间：2013-04-24T18:17:26.777
> 
> 标签：android, sqlite, dynamic, android-checkbox

我一周中的每一天都有一个：

```
mondayRadioButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View view) {
        if (mondayRadioButton.isChecked()){
            deleteAppointmentsLayout.removeAllViews();
            daySelected = 1;
            for(Iterator<Appointment> i = appointments.iterator(); i.hasNext();){
                 Appointment item = i.next();
                     if(item.getDay() == 1){
                         checkBox = new CheckBox(DeleteAppointmentActivity.this);
                         System.out.println("fucken did work");
                         id = item.getId();
                         time = item.getTime();
                         duration = item.getDuration();
                         description = item.getDescription();
                         boxText = time + ", " + duration + ", " + description;
                         checkBox.setText(boxText);
                         checkBox.setTextSize(12);
                         checkBox.setId((int) id);
                         deleteAppointmentsLayout.addView(checkBox);
                     }
                     else {
                         System.out.println("fucken didnt work");
                     }
                }
            }
        }
    }); 
```

当激活按钮的 onclick 时，我想检索当前选定日期的每个选定复选框的信息（复选框以编程方式生成）。当删除按钮的 onclick 被激活时，如何检查选择了哪些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:25:50.230

创建一个成员变量`Array`，如

```
public class MyClass extends Activity
{
     ArrayList<CheckBox> cbArray = new ArrayList<CheckBox>(); 
```

然后当您创建一个复选框时，将其添加到`ArrayList`. 现在，当您单击删除时，`Button`使用 a`for loop`迭代`ArrayList`并调用`isChecked()`每个。然后将其删除或添加到选中`Array`以执行您需要的任何操作

```
for (int i=0; i<cbArray.size(); i++)
{
   if (cbArray.get(i).isChecked())
  {
      // do whatever here 
```

# java - Java聊天客户端jtextfield vs jtextarea

> ID：16199346
> 
> 赞同：1
> 
> 时间：2013-04-24T18:17:38.467
> 
> 标签：java, user-interface, jtextfield, jtextarea

我正在编写一个简单的服务器聊天客户端，使用 gui 来制作聊天框等等。我只是想知道如果有人想写长消息，我是否应该使用 jtextarea 而不是 jtextfield，因为 jtextfield 不允许自动换行。

如果我使用 jtextfield 的 jtextarea 或者是否有特定的理由不使用 jtextarea 作为我的输入框，这有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:19:46.923

我猜：

*   您可能需要 JTextField*和*JTextArea（或其他多行文本组件）。
*   JTextField 将供用户输入他们要发送的聊天消息。这将是可编辑的。
*   JTextArea 将显示传入的聊天以及用户发送的聊天。它是不可编辑的。
*   考虑将 JTextArea 放在 JScrollPane 中
*   考虑将两者放置在使用 BorderLayout 的容器中，其中 JScrollPane 将 JTextArea 放置在 CENTER 位置，将 JTextField 放置在 SOUTH 位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:31:33.293

JTextField 更容易使用。您可以向其添加一个 ActionListener ，以便当用户点击 Enter 时可以调用 Action 并发送消息。当然，您仍然可以拥有“发送”JButton。用户也可以点击。

使用 JTextArea，Enter 键将添加一个新行，因此您希望用户能够在使用 Enter 时发送文本，您将需要自定义处理，也许通过使用键绑定。我更喜欢文本区域，因为我希望看到尽可能多的文本，就像我现在在回答这个问题时所做的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-05T22:39:01.047

从 oracle 文档和个人经验来看，JTextField 使生活变得更加轻松，因为默认设置了 ActionEventListener，因此在字段中设置的操作（字符或文本）被复制到 JTextArea，这就像在字段中执行的活动日志.

所以球在你的球场上。您可以将 JTextField 与 JTextArea 或 JTextArea 单独一起使用，并编写侦听器类以满足您的目的，并确定添加一个可侦听的事件，例如按钮。

此外，始终指定字段的大小以避免可能影响应用程序 Ui 的布局问题，因为如果未正确指定大小，则始终存在动态调整大小。

# jquery - Jquery 和 Asp.net MVC ...在这种情况下如何使它工作：

> ID：16199348
> 
> 赞同：0
> 
> 时间：2013-04-24T18:17:43.733
> 
> 标签：jquery, asp.net-mvc

我用空模板创建了一个 Asp.net Mvc WebAplication；....

在主控制器的索引视图中，我有这个：

```
<script type="text/javascript" src="~/Scripts/jquery-2.0.0.js"></script>
<script type="text/javascript" src="~/Scripts/Javascript1.js"></script>

<div class="letters">
<div class="letter" id="letter-a">
<h3><a href="#">A</a></h3>
</div> 
```

我创建了一个 Javascript1.js 文件并将其放入：

```
$(document).ready(function () {
    $('#letter-a a').click(function () {
           alert('Loaded!');
       });
}); 
```

但我在运行时收到此错误：

```
Unhandled exception at line 349, column 1 in http://localhost:55573/Scripts/jquery-2.0.0.js

 Microsoft JScript: 'JSON' is not defined 
```

这是代码停止的行：

```
jQuery.extend({
// Unique for each copy of jQuery on the page
expando: "jQuery" + ( core_version + Math.random() ).replace( /\D/g, "" ), 
```

我已经安装了所有我能找到的 Json 包……我现在该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:19:57.660

您的 jQuery 版本不支持您的 IE 版本。

IE <= 8 支持[在 jQuery 2.0 中被删除](http://blog.jquery.com/2013/04/18/jquery-2-0-released/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T20:35:55.147

把它放在你的 cshtml 或 aspx 的 head 元素中：

```
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

X-UA-Compatible 元标记允许 Web 作者选择应呈现页面的 Internet Explorer 版本。

# linux - sed 查找并替换 IP 地址后包含字符串的行

> ID：16199351
> 
> 赞同：0
> 
> 时间：2013-04-24T18:17:46.463
> 
> 标签：linux, bash, shell, sed, awk

我正在尝试使用 sed 在 IP 地址之后查找包含字符串的行并替换该行。为了说明，我有一个像这样的文本文件......

```
192.168.10.155 Mike
8.8.8.8 Googley
123.231.123.3 Tom
192.238.8.10 Matt 
```

假设我想查找并替换 Tom 的线路，并且我想在一个 Tom 之后匹​​配一个 IP 地址和一个空格。IP 地址的每个八位字节可以有 1 到 3 位数字。目前，我有...

```
newIpAddress="111.111.111.111"
sed -i "/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3} Tom/c\$newIpAddress Tom" file 
```

但这似乎不起作用。关于如何修复第一部分以在每个八位字节 1 到 3 位数字的任何 IP 地址上正确动态匹配的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:31:54.233

这是`awk`方法：

```
$ new_ip=1.1.1.1    

$ awk -v ip="$new_ip" '$2=="Tom"{$1=ip}1' file
192.168.10.155 Mike
8.8.8.8 Googley
1.1.1.1 Tom
192.238.8.10 Matt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:24:53.410

```
sed -ri "/[0-9]{1,3}(\.[0-9]{1,3}){3} Tom$/c$newip Tom" file 
```

# sql - LINQ to SQL - 对 SELECT 语句使用 TransactionScope - 是否需要调用 Complete()？

> ID：16199358
> 
> 赞同：2
> 
> 时间：2013-04-24T18:18:08.033
> 
> 标签：sql, linq, transactionscope

我正在使用 LINQ to SQL 类来定义查询，然后调用执行查询的 ToList() 方法。ToList() 调用包含在“使用 TransactionScope”块中以实现“NOLOCK”提示。该查询是只读的，因此我不确定在这种情况下是否需要调用 TransactionScope.Complete()。这是我遵循的示例，它没有进行此调用：[Getting LINQ to SQL and Entities to use NOLOCK](http://www.hanselman.com/blog/GettingLINQToSQLAndLINQToEntitiesToUseNOLOCK.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:27:27.177

我想没有。C# 中的 Complete() 与 SQL 中调用 Commit 相同，但由于这是一条选择语句，因此无需提交任何内容。TransactionScope 产生的任何其他剩余构造将在 using { } 块的末尾处理，因此我认为 Complete() 在您的情况下是不必要的。

# asp.net-mvc-3 - 仅在实时服务器上找不到动作，在本地服务器上工作正常

> ID：16199361
> 
> 赞同：4
> 
> 时间：2013-04-24T18:18:16.953
> 
> 标签：asp.net-mvc-3, jquery, knockout.js

> 在控制器“Flazingo.Controllers.PositionController”上找不到公共操作方法“AddPromoCode”。在 System.Web.Mvc.Controller.HandleUnknownAction(String actionName) 在 System.Web.Mvc.Controller.ExecuteCore() 在 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 在 System.Web.Mvc.MvcHandler。< >c__DisplayClass6.<>c__DisplayClassb.b__5() 在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.b__0() 在 System.Web.Mvc.MvcHandler。<>c__DisplayClasse.b__d() 在 System.Web.HttpApplication .CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

这是ajax调用：

```
$.ajax({
            url: '/Position/AddPromoCode',
            type: 'POST',
            dataType: "json",
            contentType: "application/json; charset:utf-8",
            data: ko.toJSON(viewModel),
            success: function(result){
                if(result.TypeId == 1){
                    viewModel.promoOff(viewModel.grandTotal() * (result.Value / 100));
                    viewModel.PromoCodes.push(promoCode + ": "+ result.Value + "% off");
                }else{
                    viewModel.PromoCodes.push(promoCode + ": "+ result.Value + "days free");
                }
            },
            error: function (xmlHttpRequest, textStatus, errorThrown) {
                var errorData = jQuery.parseJSON(xmlHttpRequest.responseText);
                var errorMessages = [];
                //this ugly loop is because List<> is serialized to an object instead of an array
                for (var key in errorData)
                {
                    errorMessages.push(errorData[key]);
                }
                toastr.error(errorMessages.join("<br />"), 'Uh oh');
            }
        }); 
```

编辑：发布方法

```
[HttpPost]
        public ActionResult AddPromoCode(PaymentViewModel model)
        {
            List<string> errors = new List<string>();
            try
            {

                var position = db.Positions.SingleOrDefault(x => x.PositionId == model.PositionId);
                if (position != null)
                {
                    var promo = db.Promotions.SingleOrDefault(x => x.Code.ToLower() == model.PromoCode.ToLower() && x.IsUserEntered);
                    if (promo != null)
                    {
                        var promoUsage = db.PromoCodeUsages.SingleOrDefault(x => x.PromotionId == promo.PromotionId && x.ClientId == position.Client.Id);
                        int used = 0;
                        if (promoUsage != null)
                        {
                            used = promoUsage.Used;
                        }

                        if (used < promo.QuantityUsage)
                        {
                            if (DateTime.Today >= promo.StartDate && DateTime.Today <= promo.EndDate)
                            {
                                position.PromoCodes.Add(new PositionPromoCode
                                {
                                    PromotionId = promo.PromotionId
                                });

                                var clientPC = position.Client.PromoCodes.SingleOrDefault(x => x.PromotionId == promo.PromotionId);
                                if (clientPC != null)
                                {
                                    clientPC.Used = used + 1;
                                }
                                else
                                {
                                    clientPC = new PromoCodeUsage()
                                    {
                                        PromotionId = promo.PromotionId,
                                        Used = used + 1
                                    };
                                    position.Client.PromoCodes.Add(clientPC);
                                }

                                db.SaveChanges();

                                Response.StatusCode = (int)HttpStatusCode.OK;
                                return Json(new { Value = promo.Value, TypeId = promo.PromotionTypeId });

                            }
                            else
                            {
                                Response.StatusCode = (int)HttpStatusCode.BadRequest;
                                errors.Add("Sorry seems like this promotion code has expired");
                                db.SaveChanges();
                                return Json(errors);
                            }
                        }
                        else
                        {
                            Response.StatusCode = (int)HttpStatusCode.BadRequest;
                            errors.Add("Sorry seems like you have already used this code, or its not applicable anymore!");
                            db.SaveChanges();
                            return Json(errors);
                        }
                    }
                    else
                    {
                        Response.StatusCode = (int)HttpStatusCode.BadRequest;
                        errors.Add(string.Format("Sorry we don't have '{0}' promocode in our system!", model.PromoCode));
                        db.SaveChanges();
                        return Json(errors);
                    }
                }

                Response.StatusCode = (int)HttpStatusCode.BadRequest;
                errors.Add("We coudn't find this position in our system!");
                db.SaveChanges();
                return Json(errors);
            }
            catch (Exception ex)
            {
                logger.Log(LogLevel.Error, string.Format("{0} \n {1}", ex.Message, ex.StackTrace));
                Response.StatusCode = (int)HttpStatusCode.BadRequest;
                errors.Add("Sorry there was internal errors, flazingo.com has been notified.");
                return Json(errors);
            }
        } 
```

JSON结构：

```
{"PositionTitle":"Testing B Syntax Error","PromoCode":"FREECB","FirstName":null,"LastName":null,"Address":null,"SuiteNumber":null,"PhoneNumber":null,"City":null,"State":null,"ZipCode":null,"CreditCardNumber":null,"ExperationMonth":null,"ExperationYear":null,"CCV":null,"ClientId":2,"CustomerProfileId":64277420,"PositionId":78,"EmailAddress":"jmogera@gmail.com","Years":[{"Selected":false,"Text":"2013","Value":"2013"},{"Selected":false,"Text":"2014","Value":"2014"},{"Selected":false,"Text":"2015","Value":"2015"},{"Selected":false,"Text":"2016","Value":"2016"},{"Selected":false,"Text":"2017","Value":"2017"},{"Selected":false,"Text":"2018","Value":"2018"},{"Selected":false,"Text":"2019","Value":"2019"},{"Selected":false,"Text":"2020","Value":"2020"},{"Selected":false,"Text":"2021","Value":"2021"},{"Selected":false,"Text":"2022","Value":"2022"}],"MonthList":[{"Selected":false,"Text":"Jan","Value":"01"},{"Selected":false,"Text":"Feb","Value":"02"},{"Selected":false,"Text":"Mar","Value":"03"},{"Selected":false,"Text":"Apr","Value":"04"},{"Selected":false,"Text":"May","Value":"05"},{"Selected":false,"Text":"Jun","Value":"06"},{"Selected":false,"Text":"Jul","Value":"07"},{"Selected":false,"Text":"Aug","Value":"08"},{"Selected":false,"Text":"Sep","Value":"09"},{"Selected":false,"Text":"Oct","Value":"10"},{"Selected":false,"Text":"Nov","Value":"11"},{"Selected":false,"Text":"Dec","Value":"12"}],"IsAddingNewCard":false,"HaveCardOnFile":true,"AddOns":[{"PositionId":78,"ProductId":2,"Description":"The heart and soul, we take you through the hiring process, start to finish and give you every tool you need to make a great hire along the way.","Price":39,"HasAdded":true,"AutoRenew":true,"Name":"Complete Hiring System","AddOnId":122}],"CreditCards":[{"CreditCardId":16,"LastFour":"1060","HolderName":"Barrett Kuethen","ExpDate":"/Date(1422766800000)/","IsDefault":true}],"CardOnFile":{"CreditCardId":16,"LastFour":"1060","HolderName":"Barrett Kuethen","ExpDate":"/Date(1422766800000)/","IsDefault":true},"PromoCodes":[],"__ko_mapping__":{"CardOnFile":{},"ignore":[],"include":["_destroy"],"copy":[],"observe":[],"mappedProperties":{"PositionTitle":true,"PromoCode":true,"FirstName":true,"LastName":true,"Address":true,"SuiteNumber":true,"PhoneNumber":true,"City":true,"State":true,"ZipCode":true,"CreditCardNumber":true,"ExperationMonth":true,"ExperationYear":true,"CCV":true,"ClientId":true,"CustomerProfileId":true,"PositionId":true,"EmailAddress":true,"Years[0].Selected":true,"Years[0].Text":true,"Years[0].Value":true,"Years[1].Selected":true,"Years[1].Text":true,"Years[1].Value":true,"Years[2].Selected":true,"Years[2].Text":true,"Years[2].Value":true,"Years[3].Selected":true,"Years[3].Text":true,"Years[3].Value":true,"Years[4].Selected":true,"Years[4].Text":true,"Years[4].Value":true,"Years[5].Selected":true,"Years[5].Text":true,"Years[5].Value":true,"Years[6].Selected":true,"Years[6].Text":true,"Years[6].Value":true,"Years[7].Selected":true,"Years[7].Text":true,"Years[7].Value":true,"Years[8].Selected":true,"Years[8].Text":true,"Years[8].Value":true,"Years[9].Selected":true,"Years[9].Text":true,"Years[9].Value":true,"Years":true,"MonthList[0].Selected":true,"MonthList[0].Text":true,"MonthList[0].Value":true,"MonthList[1].Selected":true,"MonthList[1].Text":true,"MonthList[1].Value":true,"MonthList[2].Selected":true,"MonthList[2].Text":true,"MonthList[2].Value":true,"MonthList[3].Selected":true,"MonthList[3].Text":true,"MonthList[3].Value":true,"MonthList[4].Selected":true,"MonthList[4].Text":true,"MonthList[4].Value":true,"MonthList[5].Selected":true,"MonthList[5].Text":true,"MonthList[5].Value":true,"MonthList[6].Selected":true,"MonthList[6].Text":true,"MonthList[6].Value":true,"MonthList[7].Selected":true,"MonthList[7].Text":true,"MonthList[7].Value":true,"MonthList[8].Selected":true,"MonthList[8].Text":true,"MonthList[8].Value":true,"MonthList[9].Selected":true,"MonthList[9].Text":true,"MonthList[9].Value":true,"MonthList[10].Selected":true,"MonthList[10].Text":true,"MonthList[10].Value":true,"MonthList[11].Selected":true,"MonthList[11].Text":true,"MonthList[11].Value":true,"MonthList":true,"IsAddingNewCard":true,"HaveCardOnFile":true,"AddOns[0].PositionId":true,"AddOns[0].ProductId":true,"AddOns[0].Description":true,"AddOns[0].Price":true,"AddOns[0].HasAdded":true,"AddOns[0].AutoRenew":true,"AddOns[0].Name":true,"AddOns[0].AddOnId":true,"AddOns":true,"CreditCards[0].CreditCardId":true,"CreditCards[0].LastFour":true,"CreditCards[0].HolderName":true,"CreditCards[0].ExpDate":true,"CreditCards[0].IsDefault":true,"CreditCards":true,"CardOnFile":true,"PromoCodes":true},"copiedProperties":{}},"addNewCreditCardValidationGroup":{"FirstName":null,"LastName":null,"Address":null,"City":null,"State":null,"CreditCardNumber":null,"ExperationMonth":null,"ExperationYear":null,"CCV":null,"errors":[]},"promoOff":0,"grandTotal":39} 
```

注意：调用是在敲除点击函数中进行的。注意：我创建了另一个问题，认为这是客户端问题。这是相关的。 [Uncaught SyntaxError: Unexpected token B on live but not local server](https://stackoverflow.com/questions/16069730/uncaught-syntaxerror-unexpected-token-b-on-live-but-not-local-server?noredirect=1#comment22944514_16069730)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:12:45.567

找不到`AddPromoCode`，好像是url问题。您应该在服务器中的 ajax 代码中添加应用程序名称，例如`url: '/ApplicationName/Position/AddPromoCode'`.

您也可以使用 url.action html 助手来执行此操作，例如：

```
// In layout or view:
@Html.Hidden("urlPrefix", Url.Action("", ""))

// In Javascript
var baseUrl = $("input#urlPrefix").val();

$.ajax({ url: baseUrl + '/Position/AddPromoCode', ... 
```

零件动态`Url.Action("", "")`创建`'/ApplicationName'`零件。

# c++ - 嵌套类是否可以访问其所有者的私有变量？

> ID：16199364
> 
> 赞同：1
> 
> 时间：2013-04-24T18:18:30.280
> 
> 标签：c++, variables

这让我大吃一惊。如果需要，我会发布代码，前提是答案是“不，它不应该那样做”。

问题很简单：

**嵌套在“拥有”类中的类（因为没有更好的词）是否应该能够通过自己指向拥有类实例的指针访问拥有类的私有变量？**

因为这就是我所看到的；我正在使用 2011 版的 C++。这是预期的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:30:59.970

引用 C++ 标准 N3485 `class.access.nested`：

> 嵌套类是成员`type`，因此具有与任何其他成员相同的访问权限。封闭类的成员对嵌套类的成员没有特殊的访问权限；应遵守通常的访问规则（第 11 条）

```
class E {
    int x;
    class B { };
    class I {
       B b; // OK: E::I can access E::B
       int y;
       void f(E* p, int i) {
          p->x = i; // OK: E::I can access E::x
       }
   };
   int g(I* p) {
      return p->y; // error: I::y is private
   }
}; 
```

您可以在此处找到有关第 11 条的信息： [C++ 标准论文 N3485](https://github.com/cplusplus/draft/blob/master/papers/N3485.pdf)（需要通过链接查看文件或下载文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:22:02.260

所有者类中定义的变量在其范围内是私有的：即该范围内的任何东西，包括嵌套类都可以访问它们。如果这不是您想要的行为，则将嵌套类的定义移到所有者类之外

# java - Spring webflow URI映射到包含斜杠（“/”）的流ID

> ID：16199365
> 
> 赞同：1
> 
> 时间：2013-04-24T18:18:32.553
> 
> 标签：java, spring-webflow, spring-webflow-2

我们要求在我们网站的一个子部分中处理登录和注册的方式略有不同。我们需要为以下每个 URI 提供单独的流。

/login
/signup
/subsection/登录
/subsection/signup

我们的 flow-registry 是使用 webflow 文档中的位置模式配置的：

```
 <flow:flow-registry id="flowRegistry" base-path="/WEB-INF/flow" flow-builder-services="flowBuilderServices">
      <flow:flow-location-pattern value="/**/*-flow.xml" />
   </flow:flow-registry> 
```

流 XML 文件的结构如下：

```
./root/src/main/webapp/WEB-INF/flow
|-- subsection
|   |-- login
|   |   `-- subsection-login-flow.xml
|   `-- signup
|       `-- subsection-signup-flow.xml
|-- login
|   `-- login-flow.xml
`-- signup
    `-- signup-flow.xml 
```

启用 DEBUG 日志记录后，我可以在日志中看到使用 ID“login”、“signup”、“subsection/login”和“subsection/signup”创建了四个流：

```
24-Apr 09:21:50,887 DEBUG RMI TCP Connection(2)-127.0.0.1 definition.registry.FlowDefinitionRegistryImpl -  Registering flow definition 'ServletContext resource [/WEB-INF/flow/subsection/login/subsection-login-flow.xml]' under id 'subsection/login'   
24-Apr 09:21:50,887 DEBUG RMI TCP Connection(2)-127.0.0.1 definition.registry.FlowDefinitionRegistryImpl -  Registering flow definition 'ServletContext resource [/WEB-INF/flow/subsection/signup/subsection-signup-flow.xml]' under id 'subsection/signup'   
24-Apr 09:21:50,888 DEBUG RMI TCP Connection(2)-127.0.0.1 definition.registry.FlowDefinitionRegistryImpl -  Registering flow definition 'ServletContext resource [/WEB-INF/flow/login/login-flow.xml]' under id 'login'   
24-Apr 09:21:50,889 DEBUG RMI TCP Connection(2)-127.0.0.1 definition.registry.FlowDefinitionRegistryImpl -  Registering flow definition 'ServletContext resource [/WEB-INF/flow/signup/signup-flow.xml]' under id 'signup' 
```

当我访问[http://mysite.com/login](http://mysite.com/login)或[http://mysite.com/signup](http://mysite.com/signup)时，一切正常。

但是，当我访问[http://mysite.com/subsection/login](http://mysite.com/subsection/login)或[http://mysite.com/subsection/signup](http://mysite.com/subsection/signup)时，URI 会映射到“登录”（而不是“子部分/登录”）或“注册” ”（而不是“小节/注册”）：

```
24-Apr 09:32:16,917 DEBUG ajp-bio-8009-exec-5 mvc.servlet.FlowHandlerMapping -  Mapping request with URI '/subsection/signup' to flow with id 'signup' 
```

我在调试器中对此进行了跟踪，DefaultFlowUrlHandler.getFlowId 方法仅根据最后一个“/”之后的任何内容返回流 ID，因此对于 URI“/subsection/signup”，返回的流 ID 只是“注册” .

我在这里做错了什么？有什么方法可以强制执行所需的流映射？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:15:33.253

我想通了。DefaultFlowUrlHandler 的文档指出：

> 期望启动流程的 URL 采用以下模式：
> 
> ```
> http://<host>/[app context path]/[app servlet path]/<flow path> 
> ```

所以对于 URI“/subsection/signup”，应用上下文路径为空（对于我们的 webapp），应用 servlet 路径为“subsection”，流路径为“signup”。因此，这是映射到“signup”flowId 而不是“subsection/signup”。

我通过继承 DefaultFlowUrlHandler 并覆盖 getFlowId 方法来解决这个问题：

```
public class UriFlowUrlHandler extends DefaultFlowUrlHandler
{
   @Override
   public String getFlowId(HttpServletRequest request)
   {
      // Strip off leading "/" and any file extension (e.g., ".jsp")
      String uriNoExtension = StringUtils.substringBeforeLast(request.getRequestURI().substring(1), ".");

      if (StringUtils.isNotEmpty(uriNoExtension))
         return uriNoExtension;
      else
         return super.getFlowId(request);
   }
} 
```

然后我将这个 bean 注入到我的 webflow 上下文中的 FlowHandlerMapping 中：

```
 <bean id="uriFlowUrlHandler" class="com.mycompany.web.spring.UriFlowUrlHandler" />

   <bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
      <property name="flowRegistry" ref="flowRegistry" />
      <property name="alwaysUseFullPath" value="true" />
      <property name="flowUrlHandler" ref="uriFlowUrlHandler" />
   </bean> 
```

也许有更好的方法，但这有效。

# html - xquery 对包含 xml 的隐藏字段执行 xquery

> ID：16199366
> 
> 赞同：0
> 
> 时间：2013-04-24T18:18:42.063
> 
> 标签：html, xml, xquery

您好，我的页面的隐藏字段中包含一些标准 xml。我希望能够在加载我的页面时针对该字段中包含的 xml 执行页面中包含的 xquery。这有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:42:56.920

使用[XQIB](http://www.xqib.org)，您应该能够针对隐藏字段中的值执行 XQuery 脚本：

```
<script type="application/xquery">
  let $x := b:dom()//input[@name='hidden-field-name]
  (: do stuff with $x:)
  return (: result :)
</script> 
```

如果您需要动态创建 XQuery，我认为您可以在 JS 函数中执行类似的操作（未经测试）：

```
var s = document.createElement('script');
s.type = 'application/xquery';
s.appendChild(document.createTextNode('*xquery code goes here*'));
document.body.appendChild(s); 
```

# google-app-engine - Google 应用引擎：502 网关错误

> ID：16199367
> 
> 赞同：0
> 
> 时间：2013-04-24T18:18:42.927
> 
> 标签：google-app-engine

我在 Google 应用引擎上的所有项目现在都无法访问云端点。只是想知道这是我自己的问题还是谷歌应用引擎现在关闭了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:45:01.800

是的，Google 端出现了中断。：[https ://stackoverflow.com/a/16199616/1300982](https://stackoverflow.com/a/16199616/1300982)

我想该服务现在必须启动并运行。请检查！

# matlab - Matlab 函数作为 Simulink 块

> ID：16199368
> 
> 赞同：1
> 
> 时间：2013-04-24T18:18:48.790
> 
> 标签：matlab, simulink, matlab-cvst, matlab-coder

我尝试在 Simulink 中编写一个 Matlab 函数。我的第一个函数是这样的：

```
function y = fcn(u, v)
coder.extrinsic('detectSURFFeatures');
boxPoints = detectSURFFeatures(u);
%scenePoints = detectSURFFeatures(v);
vBoxPoints = boxPoints.selectStrongest(100);
y = 0;
y = vBoxPoints; 
```

但我看到错误： 1\. 尝试从“mxArray”中提取字段“selectStrongest”。2.未定义的函数或变量'vBoxPoints'。对局部变量的第一次赋值决定了它的类。3\. 端口宽度或尺寸错误。“detecting_cross/MATLAB Function/v”的输出端口 1 是一个 [400x239] 矩阵。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T02:42:08.950

从外部函数返回的数据是 mxArray 类型。如果您想从这些 mxArrays 中获取值，您需要预先声明它们，以便外部函数的结果可以自动转换为该类型。你可以使用类似的东西

```
boxPoints = struct('selectStrongest',zeros(100,1)); 
```

在调用detectSUTFFeatures 之前。如果 mxArray 与函数中的不匹配，您将收到运行时错误。您的错误 2 和 3 是因为第一个问题。

# django - django-filer、easy_thumbnails 和 S3：图像已保存但拇指未保存

> ID：16199370
> 
> 赞同：1
> 
> 时间：2013-04-24T18:18:52.027
> 
> 标签：django, amazon-s3

我正在尝试使用 django-filer 设置我的 S3 存储后端。当我通过文件管理器管理界面上传图像时，图像实际上已上传（我可以在我的存储桶/filer_public/...中看到它），但是，我在剪贴板上看到的是“未定义”并且没有图像图标。我也看不到“更改图像”视图中的预览，尽管“全尺寸预览”链接是正确的，当我单击它时，我可以看到来自 S3 的图像。

看起来唯一的问题是easy_thumbnails无法将文件上传到S3，我尝试了许多不同的设置（比如设置THUMBNAIL_DEFAULT_STORAGE）但没有任何效果，无论如何，我认为默认值应该可以开箱即用。

我正在使用 django-filer 0.9.4、Django 1.4.3、easy_thumbnails 1.2 和 Python 2.7。

我的设置：

```
####### S3 Storage setup ########
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
AWS_ACCESS_KEY_ID = os.environ.get('AWS_ACCESS_KEY_ID')
AWS_SECRET_ACCESS_KEY = os.environ.get('AWS_SECRET_ACCESS_KEY')
AWS_STORAGE_BUCKET_NAME = os.environ.get('AWS_STORAGE_BUCKET_NAME') 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T23:20:12.433

问题是我在没有 JPEG 支持的情况下安装了 PIL（或 Pillow）。为了解决这个问题，我只需要安装 libjpeg-dev 并重新安装 PIL：

```
sudo apt-get install libjpeg-dev
sudo pip install -I Pillow 
```

# ios - 如何在 iOS6 中将 kAudioUnitSubType_Varispeed audiounit 添加到 AUGraph

> ID：16199380
> 
> 赞同：2
> 
> 时间：2013-04-24T18:19:30.073
> 
> 标签：ios, core-audio, audiounit

我正在研究 iOS 中的 AudioUnits 并尝试实现这样的图表：

```
    ------------------ -----
   | | | |
-->| 格式转换器 | --->| 总线 0 |
   | （变速）| | |
   -------------------- | 多通道 |
   -------------------- | 搅拌机 |
   | | | | --------------------
-->| 格式转换器 | --->| 巴士1 | | |
   | （变速）| | | --->| 远程IO | ----->
   -------------------- | | | 单位 |
   -------------------- | | | |
  | | | | --------------------
->| 格式转换器 | --->| 巴士2 |
  | （变速）| | |
  --------------------- | |         
                              -----------------

```

首先，我尝试在没有 kAudioUnitSubType_Varispeed Unit 的情况下使用 AudioUnits。它工作正常，声音播放。但现在我想（分别）实现每个声音的音高，这就是为什么我决定添加变速单元来控制每个声音的音高。

我正在使用以下代码：

```
OSStatus 结果 = noErr;

    //................................................................ ......................
    // 指定音频单元的音频单元组件描述为
    // 添加到图表中。

    // 输入输出单元
    AudioComponentDescription iOUnitDescription;
    iOUnitDescription.componentType = kAudioUnitType_Output；
    iOUnitDescription.componentSubType = kAudioUnitSubType_RemoteIO;
    iOUnitDescription.componentManufacturer = kAudioUnitManufacturer_Apple;
    iOUnitDescription.componentFlags = 0;
    iOUnitDescription.componentFlagsMask = 0;

    // 多通道混音器单元
    AudioComponentDescription MixerUnitDescription;
    MixerUnitDescription.componentType = kAudioUnitType_Mixer;
    MixerUnitDescription.componentSubType = kAudioUnitSubType_MultiChannelMixer;
    MixerUnitDescription.componentManufacturer = kAudioUnitManufacturer_Apple;
    MixerUnitDescription.componentFlags = 0;
    MixerUnitDescription.componentFlagsMask = 0;

    //变速单元
    AudioComponentDescription varispeedUnitDescription;
    MixerUnitDescription.componentType = kAudioUnitType_FormatConverter;
    MixerUnitDescription.componentSubType = kAudioUnitSubType_Varispeed;
    MixerUnitDescription.componentManufacturer = kAudioUnitManufacturer_Apple;
    MixerUnitDescription.componentFlags = 0;
    MixerUnitDescription.componentFlagsMask = 0;

    //................................................................ ......................
    // 将节点添加到音频处理图。
    NSLog(@"添加节点到音频处理图");

    AUNode iONode; // I/O 单元的节点
    AUNode 混合器节点；// 多通道混合器单元的节点
    AUNode 变速Node0；
    AUNode 变速Node1；
    AUNode 变速Node2；

    //................................................................ ......................
    // 创建一个新的音频处理图。
    结果 = NewAUGraph(&processingGraph);

    if (noErr != result) {[self printErrorMessage: @"NewAUGraph" withStatus: result]; 返回;}

    //................................................................ ......................
    // 打开音频处理图
    结果 = AUGraphOpen（处理图）；

    if (noErr != result) {
        [self printErrorMessage: @"AUGraphOpen" withStatus: result];
        返回;
    }

    //................................................................ ......................
    // 将节点添加到音频处理图中
    结果 = AUGraphAddNode(
                             处理图，
                             &varispeedUnit描述，
                             &varispeedNode0);

    if (noErr != result) {
        [self printErrorMessage: @"AUGraphNewNode failed for varispeedNode0 unit" withStatus: result];
        返回;
    }

    结果 = AUGraphAddNode (
                             处理图，
                             &varispeedUnit描述，
                             &varispeedNode1);

    if (noErr != result) {
        [self printErrorMessage: @"AUGraphNewNode failed for varispeedNode1 unit" withStatus: result];
        返回;
    }

    结果 = AUGraphAddNode (
                             处理图，
                             &varispeedUnit描述，
                             &varispeedNode2);

    if (noErr != result) {
        [self printErrorMessage: @"AUGraphNewNode failed for varispeedNode2 unit" withStatus: result];
        返回;
    }

    结果 = AUGraphAddNode (
                             处理图，
                             &iOUnit描述,
                             &iONode);

    if (noErr != result) {
        [self printErrorMessage: @"AUGraphNewNode failed for I/O unit" withStatus: result];
        返回;
    }

    结果 = AUGraphAddNode (
                             处理图，
                             &MixerUnit描述，
                             &mixer节点);

    if (noErr != result) {
        [self printErrorMessage: @"AUGraphNewNode failed for Mixer unit" withStatus: result];
        返回;
    }

```

当我运行应用程序时，出现以下错误：

```
2013-04-24 21:44:59.335 Drumpads[327:c07] *** AUGraphNewNode 因 varispeedNode0 单元错误而失败：ˇˇ¯+
2013-04-24 21:44:59.338 Drumpads[327:c07] Error.domain = NSOSStatusErrorDomain, code=-2005, descr =Error Domain=NSOSStatusErrorDomain Code=-2005 “操作无法完成。（OSStatus 错误 - 2005 年。）”
```

根据 MacErrors.h -2005 表示“badComponentType”。

因此，似乎变速单元甚至无法添加到 AUGraph。一切似乎都正确，所以我不知道为什么添加变速节点会导致错误。

我使用[了 developer.apple.com 代码中的示例代码](http://developer.apple.com/library/mac/#samplecode/CAPlayThrough/Listings/CAPlayThrough_cpp.html)作为参考（我知道，它适用于 OSx，但 Varispeed 现在可用于 iOS5 和 6，所以我决定可以使用此代码作为参考）。

我需要控制每个声音的音调变化。我选择了 Varispeed，但我也阅读了有关 NewTimePitch 节点的信息。我试过 NewTimePitch （在同一张图中），但也没有成功。

有谁知道我的代码有什么问题以及为什么添加变速节点会导致错误？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:53:41.107

经过一天的研究并试图找到有关 FormatConverter 和 Varispeed 的更多信息并阅读大量信息后，我终于找到了答案。

当然，修复它非常困难，但我很幸运！哈哈

这是我之前的代码：

```
AudioComponentDescription varispeedUnitDescription;
MixerUnitDescription.componentType          = kAudioUnitType_FormatConverter;
MixerUnitDescription.componentSubType       = kAudioUnitSubType_Varispeed;
MixerUnitDescription.componentManufacturer  = kAudioUnitManufacturer_Apple;
MixerUnitDescription.componentFlags         = 0;
MixerUnitDescription.componentFlagsMask     = 0; 
```

这是新的：

```
AudioComponentDescription varispeedUnitDescription;
varispeedUnitDescription.componentType          = kAudioUnitType_FormatConverter;
varispeedUnitDescription.componentSubType       = kAudioUnitSubType_Varispeed;
varispeedUnitDescription.componentManufacturer  = kAudioUnitManufacturer_Apple;
varispeedUnitDescription.componentFlags         = 0;
varispeedUnitDescription.componentFlagsMask     = 0; 
```

所以...这是非常糟糕的组件类型（-2005），因为实际上没有正确描述 varispeedUnitDescription。

# windows - 从 bootcamp Win7 访问 mac 分区

> ID：16199381
> 
> 赞同：-1
> 
> 时间：2013-04-24T18:19:37.500
> 
> 标签：windows, macos, bootcamp

我可以访问我的 mac 分区上的大多数文件夹，但有些我不能......没有模式......它说“无法访问 xxxx。找不到元素。”

另外我注意到在某些文件夹中有一个旧的“快照”..文件已经移动但它没有从 Windows 端反映出来......奇怪的是我仍然可以打开一些实际上没有的文件更长的时间（例如，他们移动到一个子文件夹）。

到底是怎么回事？我可以让我的所有 Mac 文件始终可靠地访问吗？

谢谢你！大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:21:54.000

解决方案：我在我的 Win7 中安装了 MacDrive 程序。现在 Mac 分区可以可靠读取，我也可以写入它。

# python - 保存在 OS X 10.8 上的纯文本文件和保存在 Windows 8 上的纯文本文件有什么区别？

> ID：16199382
> 
> 赞同：0
> 
> 时间：2013-04-24T18:19:41.823
> 
> 标签：python, windows, text, encoding, osx-mountain-lion

我用 Python 编写了一个脚本，它以 .bfb 格式为 3D 打印机输出一些 G 代码，它本质上是一个带有 ASCII 字符的纯文本文件。

但是由于某种原因，只有在 Windows 8 上使用 Wordpad 输出然后再次保存的文件才能工作，而在我的 Mac 上使用 Textedit、Sublime Text 2 等保存的任何文件都不起作用。

为什么会这样？

谢谢你的帮助。

这是用于从脚本保存文件的代码：

```
# creates function that writes to output file
writeFile = open(fileName + ".bfb", "w") 
```

# c++ - 最多两个值，其中一个不能等于预定义值

> ID：16199383
> 
> 赞同：0
> 
> 时间：2013-04-24T18:19:42.130
> 
> 标签：c++, max

我正在寻找一种很好的可读方式来编写这个（a 和 b 是输入）：

```
int value = 50;
if(a == value) return b;
if(b == value) return a;
return max(a,b); 
```

这很长。我想出了这个，但这还不够清楚：

```
return (a==value)?b:((b==value)?a:max(a,b)) 
```

有没有办法只用最大定义来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:27:49.423

代码应该易于阅读和理解。您说的第一个代码太长了，非常清晰，三行代码对于 C 或 C++ 来说并不是不合理的代码量。

如果您经常这样做，请将其打包在一个函数中并调用该函数。如果禁止数字可以更改，请将其作为函数的参数。

请注意，三元表达式本质上与使用`if`语句的代码相同。他们可能会编译成相同的代码。

# java - Hibernate：如何重新附加具有@ElementCollection 的外部化实体

> ID：16199384
> 
> 赞同：3
> 
> 时间：2013-04-24T18:19:44.907
> 
> 标签：java, hibernate

### **语境**

多年来，Stackoverflow 对我来说一直是无价之宝，我想通过发布问题*和*答案来回馈我最近花费大量时间的事情。

### **背景**

在我的情况下，我将实体的序列化 JSON 存储在 Memcached 中。由于各种原因，我不喜欢 hibernate 的缓存（二级和查询缓存）的工作方式，所以我决定编写自己的缓存层。但这产生了一个问题：似乎没有简单的方法可以将先前缓存的 POJO 重新附加回休眠会话，尤其是在`@ElementCollection`涉及到的情况下。

这是我想从 JSON 反序列化并重新附加到休眠会话的一些 POJO 的大致定义：

```
@Entity
@Table
public class User extends AbstractModel {

    @ElementCollection
    @CollectionTable (name = "UserAttribute", joinColumns = { @JoinColumn (name = "UserId") })
    @MapKeyColumn (name = "Name")
    @Column (name = "Value")
    private Map<String, String> attributes = new HashMap<String, String>();
    ...
}

@Entity
@Table
public class Content extends AbstractModel {

    @ManyToOne(cascade = CascadeType.ALL) @JoinColumn (name = "UserId")
    private User user;

    @ElementCollection
    @CollectionTable(name = "ContentAttribute", joinColumns = { @JoinColumn(name = "ContentId") })
    @MapKeyColumn(name = "Name")
    @Column(name = "Value")
    private Map<String, String> attributes = new HashMap<String, String>();
    ...
} 
```

在我寻找这个问题的答案时，最接近的匹配项是：

*   [Hibernate 有没有办法在不首先加载整个实体对象的情况下获取实体加载的 PersistentCollection？](https://stackoverflow.com/questions/4060126/is-there-a-way-in-hibernate-to-obtain-an-entitys-loaded-persistentcollection-wi)
*   [在 Hibernate 中重新附加分离对象的正确方法是什么？](https://stackoverflow.com/questions/912659/what-is-the-proper-way-to-re-attach-detached-objects-in-hibernate)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:34:50.837

从问题中的链接中找出海报离开的地方，这是我如何设法重新附加的近似/相关代码。下面是正在发生的事情的概述。

```
@Repository
public abstract class DaoHibernate<T> implements Dao<T> {

    @Override
    public T reattach(T entity) {
        if (getCurrentSession().contains(entity)) {
            return entity;
        }
        if (entity instanceof User) {
            return (T) reattachedUser((User) entity);
        }
        if (entity instanceof Content) {
            Content content = (Content) entity;
            User user = content.getUser();
            if (!currentSession().contains(user)) {
                content.setUser(reattachedUser(user));
            }
            content.setAttributes(persistentAttributesMap(content.getId(), content.getAttributes(), Content.class);
            getCurrentSession().lock(content, LockMode.NONE);
            return entity;
        }
        throw new UnsupportedOperationException("reattach is not supported for entity: " + entity.getClass().getName());
    }

    private User reattachedUser(User user) {
        user.setAttributes(persistentAttributesMap(user.getId(), user.getAttributes(), User.class));
        getCurrentSession().lock(user, LockMode.NONE);
        return user;
    }

    @SuppressWarnings ("unchecked")
    private Map<String, String> persistentAttributesMap(long id, Map<String, String> attributes, Class clazz) {
        SessionFactory sessionFactory = getSessionFactory();
        Session currentSession = sessionFactory.getCurrentSession();
        String role = clazz.getName() + ".attributes";
        CollectionPersister collectionPersister = ((SessionFactoryImplementor) sessionFactory).getCollectionPersister(role);
        MapType mapType = (MapType) collectionPersister.getCollectionType();
        PersistentMap persistentMap = (PersistentMap) mapType.wrap((SessionImplementor) currentSession, attributes);
        persistentMap.setOwner(id);
        persistentMap.setSnapshot(id, role, ImmutableMap.copyOf(attributes));
        persistentMap.setCurrentSession(null);
        return persistentMap;
    }

    ...
} 
```

### **走过**

如您所见，我们必须确保我们永远不会尝试重新附加当前会话中已经存在的实体，否则休眠将引发异常。这就是为什么我们必须`getCurrentSession().contains(entity)`在`reattach()`. 此处必须小心使用`contains()`，因为 hibernate 不会使用`entity.hachCode()`来查找实体，而是使用 来`System.identityHashCode(entity)`确保它不仅是等效实例，而且与会话中可能已经存在的*完全相同的实例。*换句话说，您必须适当地管理重用实例。

只要关联实体标有`Cascade.ALL`，hibernate 就应该做正确的事情。也就是说，除非你有一个像我们`@ElementCollection`的属性映射这样的休眠托管集合。在这种情况下，我们必须手动创建一个`PersistentCollection`(`PersistentMap`准确地说) 并在其上设置正确的属性，如 in `persistentAttributesMap`，否则 hibernate 将抛出异常。简而言之，在 上`PersistentMap`，我们必须：

*   将所有者和快照键设置为拥有实体的 id
*   将快照角色设置为完全限定的 entity.property 名称，正如 hibernate 所看到的那样
*   将快照`Serializable`参数设置为现有集合的不可变副本
*   将会话设置为`null`休眠状态不会认为我们尝试将其附加到现有会话两次

要完成重新连接，请调用`session.lock(entity, LockMode.NONE)`。在这一点上，据我的测试可知，hibernate 尊重这个实体，并在你调用`saveOrUpdate()`.

### **注意事项**

我意识到这不是适用于所有情况的通用解决方案。这只是对我的特定问题的快速解决方案，其他人希望可以利用和改进。软件是迭代的。

# c++ - 使用映射的结构/类的 C++ 访问成员

> ID：16199386
> 
> 赞同：0
> 
> 时间：2013-04-24T18:19:53.550
> 
> 标签：c++, list, search, mapping, member

我需要搜索由指向名为 Person 的结构的指针的链接列表组成的数据库。在 Person 里面有一堆数据——名字、姓氏、社会保障等等。这些都是虚构的和无关紧要的。我的问题是我需要根据用户输入进行搜索，这决定了结构的哪个部分正在与搜索进行比较。由于所有数据都存储为 struct Person 的成员，我认为最好的方法（如不编写 8 个搜索函数）是通过映射，但我对映射的掌握非常差，几乎不存在. 以下是相关代码：

```
List * find(List * database, //mapping stuff, string name)
{
     //run search
     return database;
}

void search(List * database)
{
    string field, searchtype, userinput;
    cout << "To search for a person, enter information in this format: 'field equal
    value' or 'field begins value'. Type 'clear' to 
    return to original database. Type 'exit' to leave the program\n";

while(field != "exit")
{
    cin >> field >> searchtype >> userinput;
    if(userinput == "firstname")  //this is just for example, I would have to write one of these out for each parameter.
    {
        List * smallerdb = find(database, map(//mapping stuff?), string userinput);
    }
}
} 
```

这是给学校的，所以请不要建议我只使用另一个图书馆，因为我不能。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:30:51.290

每种数据类型都必须进行不同的比较，因此如果不明确知道数据类型，您就不走运了。字符串按字母顺序比较，数字按值比较，我不确定您是否有任何其他自定义数据类型。

因此，除了逐案处理之外，您在这里实际上没有太多选择。例如

```
 if type == 'name'                // compare each Person.name as string
    else if type == 'socialSecurity' // compare Person.socialSecurity as int
    else if ... 
```

这是使此代码更加健壮的建议。

无需在每种情况下处理搜索逻辑，您可以简单地返回一个函数指针，而不是告诉您如何比较两个`Persons`. *实际*的函数可能是按姓名、年龄、社会保障等进行比较，但是一旦您的搜索函数有了告诉它如何比较两个`Person`对象的函数指针，它就不必关心这些了。

# parameters - 在 LoadRunner 中的动作块之间传递参数

> ID：16199388
> 
> 赞同：0
> 
> 时间：2013-04-24T18:20:02.180
> 
> 标签：parameters, loadrunner

在我的 vugen 脚本中有 8 个单独的操作块，每个 web_custom_request() 包含一个 web 服务测试（我正在使用 web html/http）协议，我想捕获一个 ID 以在每个后续 web 服务请求中使用8个动作块。我将在通过 Web 自定义请求调用 Web 服务之前使用 web_reg_save_param() 并在其他操作块中引用它。可能吗？我可以在同一个 VUGen 脚本中跨多个操作引用保存的参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:44:16.923

使用 web_reg_save_param() 创建的任何 LoadRunner 变量都是全局变量。所以，是的，您可以通过 action*n* 在 action1 中收集和在 action2 中使用

# php - 如何在 PHP 中解析 Ruby 的 YAML（sfYaml 和 Spyc 不会做对）

> ID：16199392
> 
> 赞同：1
> 
> 时间：2013-04-24T18:20:18.630
> 
> 标签：php, yaml

我在 MySQL 中具有以下值（由 ChiliProject 制作）：

```
--- 
author_id: 
- 0
- 1
status_id: 
- 0
- 1
subject: 
- ""
- !binary |
  0KHQtNC10LvQsNGC0Ywg0LPRgNCw0LzQvtGC0L3Ri9C5INCy0L3QtdGI0L3Q
  uNC5INCy0LjQtCDQtNC70Y8g0LjQvNC10Y7RidC10LPQvtGB0Y8=

start_date: 
- 
- 2012-04-30
priority_id: 
- 0
- 4
tracker_id: 
- 0
- 2
description: 
- 
- ""
project_id: 
- 0
- 2
created_on: 
- 
- 2012-04-30 17:51:08.596410 +04:00 
```

sfYaml 说：无法在第 11 行解析（靠近“0KHQtNC10LvQsNGC0Ywg0LPRgNCw0LzQvtGC0L3Ri9C5INCy0L3QtdGI0L3Q”）。

Spyc 将“-”项添加到与 author_id、status_id 等相同的级别。看起来很合理（因为没有间距），但是 Ruby 的 YAML 很好地解释了它。Spyc 也忽略了 base64。

sfYaml 和 Spyc 还不够可靠吗？

有什么建议该怎么做吗？我可以使用哪个解析器或技巧从 PHP 处理这个数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:00:51.887

这是我的解决方案：

**RubyYaml.php：**

```
<?php

class RubyYaml
{
    static public function parse($data)
    {
        $descriptorSpec = array(
            0 => array("pipe", "r"),  // stdin
            1 => array("pipe", "w"),  // stdout
            //2 => array("pipe", "a"),  // stderr
        );

        $process = proc_open('ruby '.__DIR__.'/yaml2json.rb', $descriptorSpec, $pipes);

        if (!is_resource($process))
            throw new CException('Cannot start YAML parser');

        fwrite($pipes[0], $data);
        fclose($pipes[0]);

        $json = stream_get_contents($pipes[1]);
        fclose($pipes[1]);

        proc_close($process);

        $result = json_decode($json, true);
        if ($result === null) // Don't your YAMLs contain plain NULL ever?
            throw new CException('YAML parsing failed: '.$json);

        return $result;
    }
} 
```

**yaml2json.rb：**

```
require "json"
require 'yaml'

def recursion(v)

  if v.class == String
    v.force_encoding('utf-8')

  elsif v.class == Array
    v.each do |vv|
      recursion(vv)
    end

  elsif v.class == Hash
    v.each do |k, vv|
      recursion(vv)
    end

  end

end

thing = YAML.load(STDIN.read)

recursion(thing)

puts thing.to_json 
```

# java - 在条件语句中声明变量及其类型

> ID：16199395
> 
> 赞同：0
> 
> 时间：2013-04-24T18:20:35.167
> 
> 标签：java, variables, netbeans, conditional, httpurlconnection

我正在尝试在 Java 中执行此操作：

```
if(this.ssl == true) {
    HttpsURLConnection connection = (HttpsURLConnection) new URL(address).openConnection();
}
else {
    HttpURLConnection connection = (HttpURLConnection) new URL(address).openConnection();
}
connection.setDoOutput(true);
connection.setRequestMethod("POST"); 
```

但是最后两行抛出一个错误，说找不到变量。这在Java中是不可能的吗？我知道在这种情况下使用相同类型声明一个变量（在条件之外声明它并在条件内部初始化它），但在这种情况下，类型根据条件不同。

作为参考，到目前为止，这是我的课程：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import javax.net.ssl.HttpsURLConnection;

public class Post {

    private String data;
    private boolean ssl;

    public Post(boolean ssl) {
        this.ssl = ssl;
    }

    public String sendRequest(String address) throws IOException {

        //Only send the request if there is data to be sent!
        if (!data.isEmpty()) {
            if (this.ssl == true) {
                HttpsURLConnection connection = (HttpsURLConnection) new URL(address).openConnection();
            } else {
                HttpURLConnection connection = (HttpURLConnection) new URL(address).openConnection();
            }
            connection.setDoOutput(true);
            connection.setRequestMethod("POST");
            OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream());
            writer.write(data);
            BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            StringBuilder response = new StringBuilder();
            reader.close();
            writer.close();
            return response.toString();
        } else {
            return null;
        }
    }

    public void setData(String[] keys, String[] values) throws UnsupportedEncodingException {
        //Take in the values and put them in the right format for a post request
        for (int i = 0; i < values.length; i++) {
            this.data += URLEncoder.encode(keys[i], "UTF-8") + "=" + URLEncoder.encode(values[i], "UTF-8");
            if (i + 1 < values.length) {
                this.data += "&";
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:23:40.587

这是一个范围问题。

将其更改为

```
public String sendRequest(String address) throws IOException {
   HttpURLConnection connection = null;
   //Only send the request if there is data to be sent!
   if (!data.isEmpty()) {
       if (this.ssl) {
         connection = (HttpsURLConnection) new URL(address).openConnection();
       } else {
         connection = (HttpURLConnection) new URL(address).openConnection();
       }
   }
   connection.setDoOutput(true);
   connection.setRequestMethod("POST");
   ... 
```

在语句`connection`中定义它时，您正试图访问。`if`因此，没有其他人可以访问此变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:23:41.817

看到这个。[在java中，如何根据url创建HttpsURLConnection或HttpURLConnection？](https://stackoverflow.com/questions/945003/in-java-how-to-create-httpsurlconnection-or-httpurlconnection-based-on-the-url)

基本上，由于`HttpsURLConnection`extends`HttpUrlConnection`您不需要在 if 语句中声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:23:45.570

您的`connection`变量在非常短的块中声明，并且在您尝试对其调用方法时它们已超出范围。

在块之前声明一个`connection`变量，并在每种情况下设置它，以便在调用方法时该变量仍在范围内。

```
HttpURLConnection connection;
if(this.ssl == true) {
    connection = (HttpsURLConnection) new URL(address).openConnection();
}
else {
    connection = (HttpURLConnection) new URL(address).openConnection();
}
connection.setDoOutput(true);
connection.setRequestMethod("POST"); 
```

# mongodb - 在 MongoDB 中，如何保持对另一个集合的 _id 值的引用？

> ID：16199402
> 
> 赞同：1
> 
> 时间：2013-04-24T18:20:59.720
> 
> 标签：mongodb

基本上我有两个系列。建筑物和蓝图。建筑物具有以下结构：

{_id:ObjectID("blabla")，蓝图：ObjectID("tralala")}

蓝图有一个结构

```
{_id:ObjectID("tralala" ) } 
```

我简化了它们。

现在，我应该如何从建筑物中保留蓝图字段？我想将它们保留为“tralala”格式，而不是 ObjectID(“tralala”)，因为我将这些值发送给我的客户，我不想序列化和反序列化它们。如果我将它们保留为“tralala”，则它只是一个没有问题的字符串。

但是，如果它不重要，他们为什么要让它成为 ObjectID 呢？

如何最好地存储对蓝图集合的引用？

```
{_id:ObjectID("blabla"), blueprint: ObjectID("tralala" )}
or
{_id:ObjectID("blabla"), blueprint: "tralala"} 
```

与此相关，将它们保留为 ObjectID 是否有助于索引或诸如此类？

# php - array_multisort 与多维对象数组

> ID：16199407
> 
> 赞同：2
> 
> 时间：2013-04-24T18:21:06.843
> 
> 标签：php, object, multidimensional-array

我想对一个多维数组进行排序，其中每个数组都是一个对象。示例位于

[http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

表示需要创建要排序的列的数组

```
foreach ($data as $key => $row) {
    $volume[$key]  = $row['volume'];
    $edition[$key] = $row['edition'];
}

array_multisort($volume, SORT_DESC, $edition, SORT_ASC, $data); 
```

但是如果我以这种格式格式化我的请求，我会收到以下错误：

> 可捕获的致命错误：stdClass 类的对象无法转换为字符串

代码如下，带有一个键/值对的姓氏，键为 last_name：

```
foreach ($mw_users as $key => $value) {
$last_name[$key]  = $row['last_name'];
}

array_multisort($last_name, SORT_ASC, $mw_users); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:49:09.823

为要排序的每一列定义一个数组，并使用对象引用语法添加列值：

```
// Obtain a list of columns
foreach ($mw_users as $mw_user) {
    $lastnames[]  = $mw_user->last_name;
    $firstnames[] = $mw_user->first_name;
}

// Sort the data with volume descending, edition ascending
// Add $mw_users as the last parameter, to sort by the common key
array_multisort($lastnames, SORT_ASC, $firstnames, SORT_ASC, $mw_users); 
```

它类似于对数据库结果进行排序：[http://php.net/...array-multisort.php](http://php.net/manual/en/function.array-multisort.php#example-5130) ...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T19:24:46.383

在 PHP 中对对象数组进行排序时，它有助于覆盖 __tostring() 魔术方法。这样，各种排序方法将对象视为可比较的对象。例如，员工对象可以输出该员工的姓名或员工 ID。

# spring-data - Spring-data @Query 注解和接口

> ID：16199415
> 
> 赞同：2
> 
> 时间：2013-04-24T18:21:49.277
> 
> 标签：spring-data, spring-data-mongodb

**Spring-data-mongodb 1.1.2-Released (Spring-data-common-core 1.4.1.Released)**

我在使用带有接口的@Query 注释时遇到了一些麻烦。例如，如果我定义了以下接口：

```
public interface Person {
    String getName();
    Integer getAge();
} 
```

并定义了以下存储库：

```
public interface PersonRepository extends MongoRepository<Person, String> {

    @Query(value="{ 'name': ?0}")
    List<Person> findPeople(String name);
} 
```

尝试查询时出现以下异常：

```
java.lang.IllegalArgumentException: No property name found on com.abc.People!
    at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentPropertyPath(AbstractMappingContext.java:225)
    at org.springframework.data.mongodb.core.convert.QueryMapper.getPath(QueryMapper.java:202)
    at org.springframework.data.mongodb.core.convert.QueryMapper.getTargetProperty(QueryMapper.java:190)
    at org.springframework.data.mongodb.core.convert.QueryMapper.getMappedObject(QueryMapper.java:86)
    at org.springframework.data.mongodb.core.MongoTemplate.doFind(MongoTemplate.java:1336)
    at org.springframework.data.mongodb.core.MongoTemplate.doFind(MongoTemplate.java:1322)
    at org.springframework.data.mongodb.core.MongoTemplate.find(MongoTemplate.java:495)
    at org.springframework.data.mongodb.repository.query.AbstractMongoQuery$Execution.readCollection(AbstractMongoQuery.java:123) 
```

如果我的 @Query 更新为：

```
public interface PersonRepository extends MongoRepository<Person, String> {
    @Query(value="{ 'abcd': ?0}")
    List<Person> findPeople(String name);
} 
```

如果我从界面中删除 getName() 函数，这也不会发生。

有没有人遇到过这个问题，可以告诉我我做错了什么或者这是否是一个已知问题？我将在 Spring-data 项目中打开一个 JIRA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:05:21.123

我想你在[这个问题](https://jira.springsource.org/browse/DATACMNS-311)上绊倒了。这已在[此处](http://blog.springsource.org/2013/04/25/spring-data-arora-sr1-released/)宣布的版本中得到修复。您应该通过升级到 Spring Data MongoDB 1.2.1 来看到这一点（它会传递地引入 Spring Data Commons 1.5.1）。

# javascript - 如何使用 Angular JS 设置引导导航栏活动类？

> ID：16199418
> 
> 赞同：312
> 
> 时间：2013-04-24T18:22:10.177
> 
> 标签：javascript, twitter-bootstrap, angularjs, angularjs-directive, navbar

如果我在引导程序中有一个带有项目的导航栏

```
Home | About | Contact 
```

当它们处于活动状态时，如何为每个菜单项设置活动类？也就是说，我该如何设置`class="active"`角度路线在

1.  `#/`家用
2.  `#/about`关于页面
3.  `#/contact`联系页面

* * *

## 回答 #1

> 赞同：600
> 
> 时间：2013-09-01T19:59:37.510

一个非常优雅的方法是使用 ng-controller 在 ng-view 之外运行单个控制器：

```
<div class="collapse navbar-collapse" ng-controller="HeaderController">
    <ul class="nav navbar-nav">
        <li ng-class="{ active: isActive('/')}"><a href="/">Home</a></li>
        <li ng-class="{ active: isActive('/dogs')}"><a href="/dogs">Dogs</a></li>
        <li ng-class="{ active: isActive('/cats')}"><a href="/cats">Cats</a></li>
    </ul>
</div>
<div ng-view></div> 
```

并包含在 controllers.js 中：

```
function HeaderController($scope, $location) 
{ 
    $scope.isActive = function (viewLocation) { 
        return viewLocation === $location.path();
    };
} 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-04-04T06:08:15.620

我只是写了一个指令来处理这个问题，所以你可以简单地将属性添加`bs-active-link`到父`<ul>`元素，并且每当路由发生变化时，它会找到匹配的链接，并将`active`类添加到相应的`<li>`.

你可以在这里看到它的作用：http: [//jsfiddle.net/8mcedv3b/](http://jsfiddle.net/8mcedv3b/)

示例 HTML：

```
<ul class="nav navbar-nav" bs-active-link>
  <li><a href="/home">Home</a></li>
  <li><a href="/contact">Contact</a></li>
</ul> 
```

Javascript：

```
angular.module('appName')
.directive('bsActiveLink', ['$location', function ($location) {
return {
    restrict: 'A', //use as attribute 
    replace: false,
    link: function (scope, elem) {
        //after the route has changed
        scope.$on("$routeChangeSuccess", function () {
            var hrefs = ['/#' + $location.path(),
                         '#' + $location.path(), //html5: false
                         $location.path()]; //html5: true
            angular.forEach(elem.find('a'), function (a) {
                a = angular.element(a);
                if (-1 !== hrefs.indexOf(a.attr('href'))) {
                    a.parent().addClass('active');
                } else {
                    a.parent().removeClass('active');   
                };
            });     
        });
    }
}
}]); 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-04-26T08:24:17.240

您可以查看[AngularStrap](http://mgcrea.github.io/angular-strap)，导航栏指令似乎是您正在寻找的：

[https://github.com/mgcrea/angular-strap/blob/master/src/navbar/navbar.js](https://github.com/mgcrea/angular-strap/blob/master/src/navbar/navbar.js)

```
.directive('bsNavbar', function($location) {
  'use strict';

  return {
    restrict: 'A',
    link: function postLink(scope, element, attrs, controller) {
      // Watch for the $location
      scope.$watch(function() {
        return $location.path();
      }, function(newValue, oldValue) {

        $('li[data-match-route]', element).each(function(k, li) {
          var $li = angular.element(li),
            // data('match-rout') does not work with dynamic attributes
            pattern = $li.attr('data-match-route'),
            regexp = new RegExp('^' + pattern + '$', ['i']);

          if(regexp.test(newValue)) {
            $li.addClass('active');
          } else {
            $li.removeClass('active');
          }

        });
      });
    }
  };
}); 
```

要使用此指令：

1.  [从http://mgcrea.github.io/angular-strap/](http://mgcrea.github.io/angular-strap/)下载 AngularStrap

2.  在 bootstrap.js 之后在您的页面上包含脚本：
    `<script src="lib/angular-strap.js"></script>`

3.  将指令添加到您的模块：
    `angular.module('myApp', ['$strap.directives'])`

4.  将指令添加到导航栏：
    `<div class="navbar" bs-navbar>`

5.  在每个导航项上添加正则表达式：
    `<li data-match-route="/about"><a href="#/about">About</a></li>`

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2013-08-06T03:31:32.487

这是一种适用于 Angular 的简单方法。

```
<ul class="nav navbar-nav">
    <li ng-class="{ active: isActive('/View1') }"><a href="#/View1">View 1</a></li>
    <li ng-class="{ active: isActive('/View2') }"><a href="#/View2">View 2</a></li>
    <li ng-class="{ active: isActive('/View3') }"><a href="#/View3">View 3</a></li>
</ul> 
```

在您的 AngularJS 控制器中：

```
$scope.isActive = function (viewLocation) {
     var active = (viewLocation === $location.path());
     return active;
}; 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-05-06T15:50:12.910

如果您使用 Angular 路由器，[RouterLinkActive 指令](https://angular.io/docs/ts/latest/api/router/index/RouterLinkActive-directive.html)可以非常优雅地使用：

```
<ul class="navbar-nav">
  <li class="nav-item"><a class="nav-link" routerLink="home" routerLinkActive="active">Home</a></li>
  <li class="nav-item"><a class="nav-link" routerLink="gallery" routerLinkActive="active">Gallery</a></li>
  <li class="nav-item"><a class="nav-link" routerLink="pricing" routerLinkActive="active">Prices</a></li>
  <li class="nav-item"><a class="nav-link" routerLink="contact" routerLinkActive="active">Contact</a></li>
</ul> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-04-24T21:28:59.357

首先，这个问题可以通过很多方式解决。这种方式可能不是最优雅的，但它确实有效。

这是一个简单的解决方案，您应该能够添加到任何项目中。您可以在配置可用于关闭的路由时添加“pageKey”或其他一些属性。此外，您可以在 $route 对象的 $routeChangeSuccess 方法上实现一个侦听器，以侦听路由更改的成功完成。

当您的处理程序触发时，您将获得页面键，并使用该键来定位需要为此页面“激活”的元素，然后应用 ACTIVE 类。

请记住，您需要一种使所有元素“处于活动状态”的方法。如您所见，我在导航项目上使用 .pageKey 类将它们全部关闭，并且我正在使用 .pageKey_{PAGEKEY} 单独打开它们。将它们全部切换为非活动状态，将被认为是一种幼稚的方法，通过使用先前的路线仅使活动项目处于非活动状态，您可能会获得更好的性能，或者您可以更改 jquery 选择器以仅选择要使其处于非活动状态的活动项目。使用 jquery 选择所有活动项目可能是最好的解决方案，因为它可以确保为当前路由清理所有内容，以防上一个路由上可能存在任何 css 错误。

这意味着更改这行代码：

```
$(".pagekey").toggleClass("active", false); 
```

对这个

```
$(".active").toggleClass("active", false); 
```

这是一些示例代码：

给定一个引导导航栏

```
<div class="navbar navbar-inverse">
    <div class="navbar-inner">
        <a class="brand" href="#">Title</a>
        <ul class="nav">
            <li><a href="#!/" class="pagekey pagekey_HOME">Home</a></li>
            <li><a href="#!/page1/create" class="pagekey pagekey_CREATE">Page 1 Create</a></li>
            <li><a href="#!/page1/edit/1" class="pagekey pagekey_EDIT">Page 1 Edit</a></li>
            <li><a href="#!/page1/published/1" class="pagekey pagekey_PUBLISH">Page 1 Published</a></li>
        </ul>
    </div>
</div> 
```

还有一个角度模块和控制器，如下所示：

```
<script type="text/javascript">

    function Ctrl($scope, $http, $routeParams, $location, $route) {

    }

    angular.module('BookingFormBuilder', []).
        config(function ($routeProvider, $locationProvider) {
            $routeProvider.
                when('/', { 
                   template: 'I\'m on the home page', 
                   controller: Ctrl, 
                   pageKey: 'HOME' }).
                when('/page1/create', { 
                   template: 'I\'m on page 1 create', 
                   controller: Ctrl, 
                   pageKey: 'CREATE' }).
                when('/page1/edit/:id', { 
                   template: 'I\'m on page 1 edit {id}', 
                   controller: Ctrl, pageKey: 'EDIT' }).
                when('/page1/published/:id', { 
                   template: 'I\'m on page 1 publish {id}', 
                   controller: Ctrl, pageKey: 'PUBLISH' }).
                otherwise({ redirectTo: '/' });

            $locationProvider.hashPrefix("!");
        }).run(function ($rootScope, $http, $route) {

            $rootScope.$on("$routeChangeSuccess", 
                           function (angularEvent, 
                                     currentRoute,
                                     previousRoute) {

                var pageKey = currentRoute.pageKey;
                $(".pagekey").toggleClass("active", false);
                $(".pagekey_" + pageKey).toggleClass("active", true);
            });

        });

</script> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-07-14T21:52:41.250

您实际上可以使用[**angular-ui-utils**](http://angular-ui.github.io/ui-utils/#/routing) '`ui-route`指令：

```
<a ui-route ng-href="/">Home</a>
<a ui-route ng-href="/about">About</a>
<a ui-route ng-href="/contact">Contact</a> 
```

或者：

### 标头控制器

```
/**
 * Header controller
 */
angular.module('myApp')
  .controller('HeaderCtrl', function ($scope) {
    $scope.menuItems = [
      {
        name: 'Home',
        url:  '/',
        title: 'Go to homepage.'
      },
      {
        name:   'About',
        url:    '/about',
        title:  'Learn about the project.'
      },
      {
        name:   'Contact',
        url:    '/contact',
        title:  'Contact us.'
      }
    ];
  }); 
```

### 索引页面

```
<!-- index.html: -->
<div class="header" ng-controller="HeaderCtrl">
  <ul class="nav navbar-nav navbar-right">
    <li ui-route="{{menuItem.url}}" ng-class="{active: $uiRoute}"
      ng-repeat="menuItem in menuItems">
      <a ng-href="#{{menuItem.url}}" title="{{menuItem.title}}">
        {{menuItem.name}}
      </a>
    </li>
  </ul>
</div> 
```

如果您正在使用 ui-utils，您可能还对用于管理部分/嵌套视图的[**ui-router感兴趣。**](https://github.com/angular-ui/ui-router)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-02-28T17:32:29.033

我发现所有这些答案对我来说有点过于复杂，抱歉。所以我创建了一个小指令，应该在每个导航栏的基础上工作：

```
app.directive('activeLink', function () {
    return {
        link: function (scope, element, attrs) {
            element.find('.nav a').on('click', function () {
                angular.element(this)
                    .parent().siblings('.active')
                    .removeClass('active');
                angular.element(this)
                    .parent()
                    .addClass('active');
            });
        }
    };
}); 
```

用法：

```
<ul class="nav navbar-nav navbar-right" active-link>
    <li class="nav active"><a href="home">Home</a></li>
    <li class="nav"><a href="foo">Foo</a></li>
    <li class="nav"><a href="bar">Bar</a></li>
</ul> 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-06-28T23:29:18.413

我使用带有 $location 的 ng-class 指令来实现它。

```
<ul class="nav">
<li data-ng-class="{active: ($location.path() == '/') }">
    <a href="#/">Carpeta Amarilla</a>
</li>
<li class="dropdown" data-ng-class="{active: ($location.path() == '/auditoria' || $location.path() == '/auditoria/todos') }">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
        Auditoria
        <b class="caret"></b>
    </a>
    <ul class="dropdown-menu pull-right">
        <li data-ng-class="{active: ($location.path() == '/auditoria') }">
            <a href="#/auditoria">Por Legajo</a>
        </li>
        <li data-ng-class="{active: ($location.path() == '/auditoria/todos') }">
            <a href="#/auditoria/todos">General</a>
        </li>
    </ul>
</li>
</ul> 
```

它要求导航栏位于可以访问 $location 服务的主控制器内，如下所示：

```
bajasApp.controller('MenuCntl', ['$scope','$route', '$routeParams', '$location', 
   function MenuCntl($scope, $route, $routeParams, $location) {
   $scope.$route = $route;
   $scope.$location = $location;
   $scope.$routeParams = $routeParams;
}]); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-05-30T16:14:44.710

您可以通过角度表达式中的条件来实现这一点，例如：

```
<a href="#" class="{{ condition ? 'active' : '' }}">link</a> 
```

话虽如此，我确实发现角度指令是更“正确”的方式，即使外包大量这种迷你逻辑可能会在某种程度上污染您的代码库。

我在开发过程中每隔一段时间就使用条件来进行 GUI 样式设置，因为它比创建指令要快一点。我无法告诉你一个实例，尽管它们实际上在代码库中保留了很长时间。最后我要么把它变成一个指令，要么找到一个更好的方法来解决这个问题。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-04-15T05:55:34.343

如果您使用[ui-router](https://github.com/angular-ui/ui-router)，则以下示例应根据@DanPantry 对已接受答案的评论满足您的需求，而无需添加任何控制器端代码：

```
<div class="collapse navbar-collapse" ng-controller="HeaderController">
    <ul class="nav navbar-nav">
        <li ui-sref-active="active"><a ui-sref="app.home()" href="/">Home</a></li>
        <li ui-sref-active="active"><a ui-sref="app.dogs()" href="/dogs">Dogs</a></li>
        <li ui-sref-active="active"><a ui-sref="app.cats()" href="/cats">Cats</a></li>
    </ul>
</div>
<div ng-view></div> 
```

您可以查看[文档](https://github.com/angular-ui/ui-router/wiki/Quick-Reference#ui-sref-active)以获取更多信息。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-04-15T12:56:40.807

如果您不想使用[AngularStrap](http://mgcrea.github.io/angular-strap/)，那么这个指令应该可以解决问题！这是对[https://stackoverflow.com/a/16231859/910764](https://stackoverflow.com/a/16231859/910764)的修改。

**JavaScript**

```
angular.module('myApp').directive('bsNavbar', ['$location', function ($location) {
  return {
    restrict: 'A',
    link: function postLink(scope, element) {
      scope.$watch(function () {
        return $location.path();
      }, function (path) {
        angular.forEach(element.children(), (function (li) {
          var $li = angular.element(li),
            regex = new RegExp('^' + $li.attr('data-match-route') + '$', 'i'),
            isActive = regex.test(path);
          $li.toggleClass('active', isActive);
        }));
      });
    }
  };
}]); 
```

**HTML**

```
<ul class="nav navbar-nav" bs-navbar>
  <li data-match-route="/home"><a href="#/home">Home</a></li>
  <li data-match-route="/about"><a href="#/about">About</a></li>
</ul> 
```

**注意：**以上 HTML 类假设您使用的是[Bootstrap 3.x](http://getbootstrap.com/)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-06-13T17:33:04.260

这是我的看法。在这篇文章中找到了一些答案的组合。我有一个稍微不同的情况，所以我的解决方案包括将菜单分离到它自己的模板中，以便在指令定义对象中使用，然后将我的导航栏添加到我需要它的页面上。基本上，我有一个我不想在其中包含菜单的登录页面，所以我使用 ngInclude 并在登录时插入此指令：

# 指示：

```
module.directive('compModal', function(){

return {
    restrict: 'E',
    replace: true,
    transclude: true,
    scope: true,
    templateUrl: 'templates/menu.html',
    controller: function($scope, $element, $location){
        $scope.isActive = function(viewLocation){

            var active = false;

            if(viewLocation === $location.path()){
                active = true;
            }

            return active;

        }
    }
 }
}); 
```

# 指令模板 (templates/menu.html)

```
<ul class="nav navbar-nav">
  <li ng-class="{ active: isActive('/View1') }"><a href="#/View1">View 1</a></li>
  <li ng-class="{ active: isActive('/View2') }"><a href="#/View2">View 2</a></li>
  <li ng-class="{ active: isActive('/View3') }"><a href="#/View3">View 3</a></li>
</ul> 
```

# 包含指令的 HTML

```
<comp-navbar/> 
```

希望这可以帮助

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-09-03T09:10:50.290

扩展 myl 答案，我需要它来处理这样的结构。

-指数

-events<-active
---event-list
---event-edit
---event-map <-clicked

-places
---place-list
---place-edit
---place-map

因此，我不得不使用 indexOf，而不是匹配，以验证格式化为匹配条件的子链接。所以对于“事件”：

```
<li ng-class="{ active: isActive('/event')}" class="divider-vertical dropdown">

function NavController($scope, $location) { 
$scope.isActive = function (viewLocation) {
    var s=false;
    if($location.path().indexOf(viewLocation) != -1){
     s = true;
    }
    return s;
};} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-11-18T21:38:08.443

这是一个简单的解决方案

```
<ul class="nav navbar-nav navbar-right navbar-default menu">
  <li ng-class="menuIndice == 1 ? 'active':''">
    <a ng-click="menuIndice = 1" href="#/item1">item1</a>
  </li>
  <li ng-class="menuIndice == 2 ? 'active':''">
    <a ng-click="menuIndice = 2" href="#/item2">item2</a>
  </li>
  <li ng-class="menuIndice == 3 ? 'active':''">
    <a ng-click="menuIndice = 3" href="#/item3">item3</a>
  </li>
</ul> 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-01-20T21:24:45.867

使用对象作为开关变量。
您可以通过以下方式非常简单地内联：

```
<ul class="nav navbar-nav">
   <li ng-class="{'active':switch.linkOne}" ng-click="switch = {linkOne: true}"><a href="/">Link One</a></li>
   <li ng-class="{'active':switch.linkTwo}" ng-click="switch = {link-two: true}"><a href="/link-two">Link Two</a></li>
</ul> 
```

每次单击链接时，开关对象都会被一个新对象替换，其中只有正确的开关对象属性为真。未定义的属性将评估为假，因此依赖于它们的元素将不会分配活动类。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-10-18T17:08:25.340

**JavaScript**

```
/**
 * Main AngularJS Web Application
 */

var app = angular.module('yourWebApp', [
    'ngRoute'
]);

/**
 * Setup Main Menu
 */

app.controller('MainNavCtrl', [ '$scope', '$location', function ( $scope, $location) {
    $scope.menuItems = [
        {
            name: 'Home',
            url:  '/home',
            title: 'Welcome to our Website'
        },
        {
            name: 'ABOUT',
            url:  '/about',
            title: 'Know about our work culture'
        },
        {
            name:   'CONTACT',
            url:    '/contact',
            title:  'Get in touch with us'
        }
    ];

    $scope.isActive = function (viewLocation) {
        return viewLocation === $location.path();
    };
}]); 
```

**HTML**

```
 <div class="navbar-collapse collapse" ng-controller="MainNavCtrl">
    <ul id="add-magic-line" class="nav navbar-nav navbar-right">
      <li data-ng-class="{current_page_item: isActive('{{ menuItem.url }}')}" data-ng-repeat="menuItem in menuItems">
        <a data-ng-href="#{{menuItem.url}}" title="{{menuItem.title}}">
          {{menuItem.name}}
        </a>
      </li>
    </ul>
  </div> 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-09-19T13:30:01.723

结合@Olivier 的 AngularStrap 答案，我还实现了 kevinknelson 的答案：[https](https://github.com/twbs/bootstrap/issues/9013) ://github.com/twbs/bootstrap/issues/9013 。

原生地，Bootstrap3 导航栏不是为单页（例如 Angular）应用程序设计的，因此在小屏幕上单击时菜单不会折叠。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-05-26T12:28:32.877

感谢[@Pylinux](https://stackoverflow.com/users/1465640/pylinux)。我已经使用了他的技术并对其进行了修改以支持“一级”下拉菜单（sub ul/li），因为这正是我所需要的。在下面的小提琴链接中查看它的实际效果。

根据 pylinux 的回答更新了 Fiddle - [http://jsfiddle.net/abhatia/en4qxw6g/](http://jsfiddle.net/abhatia/en4qxw6g/)

为了支持一级下拉菜单，我做了以下三处更改：
1\. 为需要有子 ul 列表的 li 下的 "a" 元素添加了 dd (dropdown) 的类值。

```
 <li><a class="dd">This link points to #/fun5</a>
          <ul>
            <li><a href="#/fun6?some=data">This link points to #/fun6</a>
            </li>
            <li><a href="#/fun7?some=data">This link points to #/fun7</a>
            </li>
            <li><a href="#/fun8?some=data">This link points to #/fun8</a>
            </li>
            <li><a href="#/fun9?some=data">This link points to #/fun9</a>
            </li>
          </ul>
        </li> 
```

2\. 更新 Javascript 以添加以下新逻辑。

```
 if(angular.element(li).parent().parent().children('a').hasClass("dd"))
 {angular.element(li).parent().parent().children('a.dd').addClass('active');} 
```

3\. 更新 CSS 以添加以下内容：

```
a.active {background-color:red;} 
```

希望这对希望实现单级下拉菜单的人有所帮助。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-07-06T05:49:19.003

我建议在链接上使用指令。 [这](http://jsfiddle.net/kprajapati22/aREmw/)是小提琴。

但它还不完美。当心hashbangs ;)

这是指令的javascript：

```
angular.module('link', []).
  directive('activeLink', ['$location', function(location) {
    return {
      restrict: 'A',
      link: function(scope, element, attrs, controller) {
        var clazz = attrs.activeLink;
        var path = attrs.href;
        path = path.substring(1); //hack because path does not return including hashbang
        scope.location = location;
        scope.$watch('location.path()', function(newPath) {
          if (path === newPath) {
            element.addClass(clazz);
          } else {
            element.removeClass(clazz);
          }
        });
      }
    };
  }]); 
```

以下是它在 html 中的使用方式：

```
<div ng-app="link">
  <a href="#/one" active-link="active">One</a>
  <a href="#/two" active-link="active">One</a>
  <a href="#" active-link="active">home</a>
</div> 
```

之后使用 css 进行样式设置：

```
.active{ color:red; } 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-04-17T16:24:03.393

您还可以使用此活动链接指令[https://stackoverflow.com/a/23138152/1387163](https://stackoverflow.com/a/23138152/1387163)

*当位置匹配/url*时，父 li 将获得活动课程：

```
<li>
    <a href="#!/url" active-link active-link-parent>
</li> 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-07-02T13:09:21.393

这对我有用：

```
 var domain = '{{ DOMAIN }}'; // www.example.com or dev.example.com
  var domain_index =  window.location.href.indexOf(domain);
  var long_app_name = window.location.href.slice(domain_index+domain.length+1); 
  // this turns http://www.example.com/whatever/whatever to whatever/whatever
  app_name = long_app_name.slice(0, long_app_name.indexOf('/')); 
  //now you are left off with just the first whatever which is usually your app name 
```

然后你使用jquery（也适用于角度）来添加类活动

```
$('nav a[href*="' + app_name+'"]').closest('li').addClass('active'); 
```

当然还有CSS：

```
.active{background:red;} 
```

如果您的 html 如下所示，则此方法有效：

```
<ul><li><a href="/ee">ee</a></li><li><a href="/dd">dd</a></li></ul> 
```

如果您在 www.somesite.com/ee thaen ee 是“应用程序”并且它将处于活动状态，这将使用页面 url 自动添加活动类并将您的背景颜色为红色

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-07-28T20:52:05.187

只是为了在辩论中添加我的两分钱，我制作了一个纯角度模块（没有 jquery），它也适用于包含数据的哈希 url。（[伊格](http://www.elearnenglishlanguage.com/blog/english-mistakes/eg-vs-ie/) `#/this/is/path?this=is&some=data`）

您只需将模块作为依赖项添加`auto-active`到菜单的祖先之一。像这样：

```
<ul auto-active>
    <li><a href="#/">main</a></li>
    <li><a href="#/first">first</a></li>
    <li><a href="#/second">second</a></li>
    <li><a href="#/third">third</a></li>
</ul> 
```

模块如下所示：

```
(function () {
    angular.module('autoActive', [])
        .directive('autoActive', ['$location', function ($location) {
        return {
            restrict: 'A',
            scope: false,
            link: function (scope, element) {
                function setActive() {
                    var path = $location.path();
                    if (path) {
                        angular.forEach(element.find('li'), function (li) {
                            var anchor = li.querySelector('a');
                            if (anchor.href.match('#' + path + '(?=\\?|$)')) {
                                angular.element(li).addClass('active');
                            } else {
                                angular.element(li).removeClass('active');
                            }
                        });
                    }
                }

                setActive();

                scope.$on('$locationChangeSuccess', setActive);
            }
        }
    }]);
}()); 
```

*（你当然可以只使用指令部分）

** 同样值得注意的是，这不适用于空哈希（[ig](http://www.elearnenglishlanguage.com/blog/english-mistakes/eg-vs-ie/) `example.com/#`或 just `example.com`），它需要至少`example.com/#/`或 just `example.com#/`。但这会在 ngResource 之类的情况下自动发生。

*   这是小提琴：http: [//jsfiddle.net/gy2an/8/](http://jsfiddle.net/gy2an/8/)
*   这是 github：[https ://github.com/Karl-Gustav/autoActive](https://github.com/Karl-Gustav/autoActive)
*   这是我的原始答案：[https ://stackoverflow.com/a/22282124/1465640](https://stackoverflow.com/a/22282124/1465640)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-07-05T16:43:41.277

这是很长的回答，但我想我会分享我的方式：

```
.run(function($rootScope, $state){
 $rootScope.$state = $state;
}); 
```

模板：

```
<ul class="nav navbar-nav">
    <li ng-class="{ active: $state.contains('View1') }"><a href="...">View 1</a></li>
    <li ng-class="{ active: $state.contains('View2') }"><a href="...">View 2</a></li>
    <li ng-class="{ active: $state.contains('View3') }"><a href="...">View 3</a></li>
</ul> 
```

对于那些使用`ui-router`：

```
<ul class="nav navbar-nav">
        <li ui-sref-active="active"><a href="...">View 1</a></li>
        <li ui-sref-active="active"><a href="...">View 2</a></li>
        <li ui-sref-active="active"><a href="...">View 3</a></li>
</ul> 
```

对于完全匹配（例如嵌套状态？）使用`$state.name === 'full/path/to/state'`或`ui-sref-active-eq="active"`

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-08-07T10:15:58.353

这是任何可能感兴趣的人的另一种解决方案。这样做的好处是它具有较少的依赖关系。哎呀，它也可以在没有网络服务器的情况下工作。所以它完全是客户端。

HTML：

```
<nav class="navbar navbar-inverse" ng-controller="topNavBarCtrl"">
<div class="container-fluid">
    <div class="navbar-header">
        <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-home" aria-hidden="true"></span></a>
    </div>
    <ul class="nav navbar-nav">
        <li ng-click="selectTab()" ng-class="getTabClass()"><a href="#">Home</a></li>
        <li ng-repeat="tab in tabs" ng-click="selectTab(tab)" ng-class="getTabClass(tab)"><a href="#">{{ tab }}</a></li>
    </ul>
</div> 
```

解释：

在这里，我们使用指令从 angularjs 模型动态生成链接`ng-repeat`。魔术发生在方法上`selectTab()`，并`getTabClass()`在控制器中为下面介绍的此导航栏定义。

控制器：

```
angular.module("app.NavigationControllersModule", [])

// Constant named 'activeTab' holding the value 'active'. We will use this to set the class name of the <li> element that is selected.
.constant("activeTab", "active")

.controller("topNavBarCtrl", function($scope, activeTab){
    // Model used for the ng-repeat directive in the template.
    $scope.tabs = ["Page 1", "Page 2", "Page 3"];

    var selectedTab = null;

    // Sets the selectedTab.
    $scope.selectTab = function(newTab){
       selectedTab = newTab;
    };

    // Sets class of the selectedTab to 'active'.
    $scope.getTabClass = function(tab){
       return selectedTab == tab ? activeTab : "";
    };
}); 
```

解释：

`selectTab()`使用`ng-click`指令调用方法。所以当链接被点击时，变量`selectedTab`被设置为这个链接的名字。在 HTML 中，您可以看到在没有任何 Home 选项卡参数的情况下调用此方法，以便在页面加载时将其突出显示。

该`getTabClass()`方法通过`ng-class`HTML 中的指令调用。此方法检查它所在的选项卡是否与变量的值相同`selectedTab`。`ng-class`如果为真，则返回“活动”，否则返回“”，通过指令将其用作类名。然后，您应用于类的任何 CSS 都`active`将应用于选定的选项卡。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-10-30T23:35:03.630

只是您必须添加所需的`active`-class 和所需的颜色代码。

前任：`ng-class="{'active': currentNavSelected}" ng-click="setNav"`

# ruby-on-rails - 切换数据库问题

> ID：16199419
> 
> 赞同：0
> 
> 时间：2013-04-24T18:22:11.217
> 
> 标签：ruby-on-rails, postgresql

我刚刚将我的应用程序从 SQLite3 切换到 PostgreSQL，当我尝试加载页面`http://localhost:3000/`或运行 rake db:migrate 时，我得到：

```
could not connect to server: Connection refused (0x0000274D/10061)
    Is the server running on host "localhost" (::1) and accepting
    TCP/IP connections on port 5432?
could not connect to server: Connection refused (0x0000274D/10061)
    Is the server running on host "localhost" (127.0.0.1) and accepting
    TCP/IP connections on port 5432? 
```

数据库 YAML：

```
development:
  adapter: postgresql
  database: store_delevopment
  pool: 5 
```

（现在我正在使用默认 Rails 服务器在开发模式下设置服务器。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:28:58.067

`data/pg_hba.conf`在 PostgreSQL文件中将这些条目的方法更改为“信任” ：

```
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust 
```

# javascript - 实现文本搜索的最佳方式

> ID：16199422
> 
> 赞同：0
> 
> 时间：2013-04-24T18:22:21.667
> 
> 标签：javascript, jquery, algorithm

想象一下，我们有下一个元素：

```
<input type="text" data-search />
<div data-container>
  <div>text 1</div>
  <div>text 2 <span>some other</span> <strong>text</strong></div>
</div> 
```

在输入`[data-search]`输入后，输入的短语应在容器中突出显示`[data-container]`（如果已找到短语）。

此搜索应该是“实时的”。可以跳过对元素的搜索（`some other text`不会给出任何结果），但如果您知道如何实现此功能 - 那就太好了。

所以简单的正则表达式和替换所有内容是相当繁重的操作，因为`[data-container]`内容可能很大。

另一种方法是在找到的文本下绘制矩形。但是同样，如何在不更新容器的情况下检测文本位置（我们可以在文本中添加一些包装器并计算其坐标然后将其删除）？

也许你可以给我一个平静的建议，我应该朝哪个方向前进。

谢谢。

# javascript - Angularjs使用promise在另一个之后加载资源

> ID：16199425
> 
> 赞同：0
> 
> 时间：2013-04-24T18:22:29.130
> 
> 标签：javascript, angularjs, promise

在服务内部，我想使用 $http 加载资源。加载资源后，我想将其存储在变量中。然后，我需要加载一个子资源并存储它。我知道 promise 是为这种工作而设计的，但似乎有太多如何使用它，我有点困惑。这是我的代码：

```
var project = {};
var todo = {};

function init(){
        var idProject = 21;
        var idTodo = 6;            

        // If idProject is specified
        if ( idProject != null ) {

            // First, load project data
            var promise = WorkspaceManager.getProject($rootScope.workspace, idProject);

            // Then save project data
            promise.then(function(response){
                project = response.data;                    
                return project;
            });

            if ( idTodo != null ) {
                //  Then load todo data
                promise.then(function(project){   
                    return ProjectManager.getTodo(project, idTodo);
                });

                // Then save todo data
                promise.then(function(response){
                    todo = response.data;                    
                    return todo;
                });
            }       
        }

        console.log(project); // returns {}
    }

init() 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:07:09.747

你这样做的方式，你正在创建从第一个承诺派生的“兄弟”承诺。一旦 Promise 被解决，所有的 Promise 都会`WorkspaceManager.getProject`被解决。我相信你想要的是将它们全部链接起来，这样当第一个承诺得到解决时，你会要求 Todo 数据，当你得到它时，你要求保存它。如果是这种情况，您应该从每个 Promise 中获取派生的 Promise。

```
// Then save project data
promise = promise.then(function(response){
  project = response.data;
  return project;
});

//  Then load todo data
promise = promise.then(function(project){   
  return ProjectManager.getTodo(project, idTodo);
});

// Then save todo data
promise.then(function(response){
  todo = response.data;                    
  return todo;
}); 
```

试图说明更多一点，第一种方法是这样的：

```
var mainPromise = ...;
mainPromise.then(function loadTodo(mainPromiseReturn){});
mainPromise.then(function saveTodo(mainPromiseReturn){}); 
```

`loadTodo`和是平行的`saveTodo`，它们没有相互链接。他们都收到相同的`data`。

我建议的方法是：

```
var mainPromise = ...;
mainPromise
  .then(function loadTodo(mainPromiseReturn){})
  .then(function saveTodo(loadTodoReturn){}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T22:13:16.980

如果我理解正确，这比乍一看要棘手。您似乎需要一个函数来链接两个异步进程并返回一个包含由第一个*和*第二个进程获取的数据的复合值的承诺。

至少有两种方法可用：

*   **简单但不优雅**：在每个异步过程中，将所需的值累积为外部对象的属性。
*   **优雅但笨拙**：从每个异步进程中，将所需的值作为对象的属性累积，并返回其承诺。

下面的代码采用第一种方法：

```
function init() {
    var idProject = 21;
    var idTodo = 6;
    var projectObj = {};//This object acts as a "bank" for asynchrounously acquired data.
    if ( idProject != null ) {
        return WorkspaceManager.getProject($rootScope.workspace, idProject).then(function(response) {
            projectObj.project = response.data;//put `response.data` in the bank as .project.
            if( idTodo != null ) {
                return ProjectManager.getTodo(response.data, idTodo);
            }
        }).then(function(toDo) {
            projectObj.toDo = toDo;//put `toDo` in the bank as .toDo .
            return projectObj;
        });
    }
}

init().then(function(projectObj) {
    console.log(projectObj.project);
    console.log(projectObj.toDo);
}); 
```

或者（仍然是第一种方法）使用错误处理程序：

```
function init() {
    var idProject = 21;
    var idTodo = 6;
    var projectObj = {};//This object acts as a "bank" for asynchrounously acquired data.
    if ( idProject != null ) {
        return WorkspaceManager.getProject($rootScope.workspace, idProject).then(function(response) {
            projectObj.project = response.data;//put `response.data` in the bank as .project.
            if( idTodo != null ) {
                return ProjectManager.getTodo(response.data, idTodo);
            }
            else {
                $q.defer().reject('idTodo invalid');
            }
        }).then(function(toDo) {
            projectObj.toDo = toDo;//put `toDo` in the bank as .toDo .
            return projectObj;
        });
    }
    else {
        return $q.defer().reject('idProject invalid');
    }
}

init().then(function(projectObj) {
    console.log(projectObj.project);
    console.log(projectObj.toDo);
}, function(errorMessage) {
    console.log(errorMessage);
}); 
```

*未经测试*

# python - Python：使用 unicode 验证的列表理解

> ID：16199426
> 
> 赞同：0
> 
> 时间：2013-04-24T18:22:29.033
> 
> 标签：python, list-comprehension

假设我有一个包含字符串的列表：ta, fa, ba, ut，让我们调用我们的列表`some_list = ['ta', 'fa', 'ba', 'ut']`

我想要做的是，用伪代码：

```
for x in some_list:
    if unicode(x, 'utf-8') == another_unicoded_string:
       do something: 
```

但我想以pythonic方式使用列表理解来做到这一点：

所以这就是我的做法，但这并没有真正奏效：

```
if [x for x in some_list if unicode(x, 'utf-8') == 'te']: 
```

在上述情况下，它不应该匹配，因此根据我写的内容不应该真正进入循环它不会以任何一种方式进入语句：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:26:42.593

尝试：

```
for x in (x for x in some_list if unicode(x, 'utf-8') == 'te'):
    do_something 
```

或（效率较低-感谢jamaylak的建议），

```
for x in [x for x in some_list if unicode(x, 'utf-8') == 'te']:
    do_something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:26:49.467

你正在做什么返回一个过滤列表。所以我的猜测是你正在尝试做这样的事情。

```
[do_something(x) for x in some_list if unicode(x, 'utf-8') == u'te'] 
```

稍微详细一点：

```
>>> some_list
['ta', 'fa', 'ba', 'te', 'ut', 'te']
>>> [x for x in some_list if unicode(x, 'utf-8') == u'te']
['te', 'te']
>>> [unicode(x) for x in some_list if unicode(x, 'utf-8') == u'te']
[u'te', u'te'] 
```

# jquery - 动画我的时髦菜单

> ID：16199427
> 
> 赞同：2
> 
> 时间：2013-04-24T18:22:35.887
> 
> 标签：jquery, animation

我一直在为我正在为朋友建立的网站上考虑导航的想法。这一切都将在一个页面上，各种导航链接只是在单击时显示/隐藏内容。

但是，我正在寻求帮助的是在单击链接后为导航设置动画-我在下面创建了一个模型：

[http://jsfiddle.net/LimeBlast/pp9Hk/](http://jsfiddle.net/LimeBlast/pp9Hk/)

如您所见，我有一堆盒子，每个都比上一个小。如果您单击其中一个链接，它将自动跳转到外边缘框，原本位于其上方/外部的所有内容现在都出现在其下方/内部。

我为此创建的 jQuery 如下：

```
$('#navigation').on('click', 'li', function(){
    var $self = $(this);
    $self.prevAll().addClass('clone');
    $('.clone').clone().removeClass('clone').appendTo('#navigation');
    $('.clone').remove();
}); 
```

我不知道这是否是正确的方法，但它似乎有效 - 我现在想要实现的只是添加某种类型的动画效果，即：让选定的元素慢慢形成到外边缘，因为它上面的元素出现在里面......

（如果你明白我的意思？）

任何人都可以帮我解决这个问题吗？我对 jQuery 不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:31:05.980

我注意到的一个问题是每个菜单项只能选择一次，因为您的克隆版本不会附加 jQuery 单击侦听器。我通过委托事件解决了这个问题，如下所示：

```
$('#navigation').on('click', 'li', function () {
    var $self = $(this);
    $self.prevAll().addClass('clone');

    $('.clone').clone().removeClass('clone').appendTo('#navigation');
    $('.clone').remove();
}) 
```

在这里演示：http: [//jsfiddle.net/mchail/pp9Hk/4/](http://jsfiddle.net/mchail/pp9Hk/4/)

**更新**

我在做动画时很努力。在这里演示：http: [//jsfiddle.net/mchail/pp9Hk/5/](http://jsfiddle.net/mchail/pp9Hk/5/)

我将定位从 css 移到了 javascript 中。当一个元素被点击时，它被移动到`li`s 列表的开头，并且每个元素都根据它在列表中的新顺序重新定位。jQuery 的`animate`功能使得在这种位置变化期间添加动画变得很容易（它也比使用 css3 过渡更兼容浏览器）。

`animate`如果您想使用缓动，请查看此处的文档：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:30:22.220

由于您正在克隆元素，因此您需要使用事件委托：

```
$('#navigation').on('click', 'li', function(){ 
```

这是你的问题，但不是你原来的小提琴。

但是，您只需将选定的`li`（及其后面的项目）添加到列表中，就可以省去很多麻烦。这样做将移动现有元素，无需克隆任何东西。

```
var $self = $(this);
$self.nextAll().addBack().prependTo('#navigation'); 
```

[http://jsfiddle.net/mblase75/8KrHh/](http://jsfiddle.net/mblase75/8KrHh/)

# json - JSON - 是否可以在 SuperObject 中编组方法原型？

> ID：16199430
> 
> 赞同：1
> 
> 时间：2013-04-24T18:22:40.100
> 
> 标签：json, delphi, rtti, superobject

在超级对象中，ISuperObject 有一个名为“AsMethod”的方法，它的作用是什么？我如何使用它？

假设我有这段代码，我如何编组到 json 签名本身（带参数），以便我可以轻松地为 SOInvoke 准备好它？感谢大家。

例如，假设我有`procedure hey('sup', 45, false);`，我可以将它编组为`{method: "hey", Arg0: "sup", Arg1: 45, Arg2: false}`吗？

```
procedure TForm1.Test(const MyType: TMyType; const s: string);
begin
  case MyType of
    mtTry:
      showmessage('Try');
    mtHey:
      showmessage('Hey');
  else
    showmessage('Else');
  end;

  showmessage(s);
end;

procedure TForm1.Button1Click(Sender: TObject);
type
  TTestProc = procedure (const MyType: TMyType; const s: string) of object;
var
  Ctx: TSuperRttiContext;
  Sig: TTestProc;
begin
   Ctx := TSuperRttiContext.Create;

   Ctx.AsJson<TTestProc>(Sig(mtHey, 'hey'));

  // SOInvoke(Self, 'test', SO('{MyType: 1, Param: "shit"}'));

   Ctx.Free;
end; 
```

# google-apps-script - 谷歌电子表格脚本不更新动态信息

> ID：16199433
> 
> 赞同：2
> 
> 时间：2013-04-24T18:22:57.823
> 
> 标签：google-apps-script, google-sheets

所以，我为 Minecraft 制作了一个电子表格，并为游戏制作了一个“Feed The Beast”的模组包。我的电子表格列出了为最新版本的 Minecraft 更新的所有模组。最近我制作了一个脚本来解析页面以获取 mod 版本号。他们每天每小时更换一次，我宁愿不手动进行。

```
function GetVersion(url, slice, num1, num2) {
  var r = UrlFetchApp.fetch(url).getContentText();
  var version = r.slice(r.indexOf(slice)).slice(num1, num2);

  return version;
} 
```

在其中一个单元格中，我将有以下内容

```
 =GetVersion("http://files.minecraftforge.net", "Build 7.", 12, 15) 
```

现在这工作正常，让我得到我正在寻找的版本号。问题是，当更新发生并且新版本出现时，即使我关闭窗口并重新打开电子表格或重新加载或其他任何东西，解析器也不会反映这一点！如果我稍微更改以上内容，例如将 15 更改为 16，它将刷新，但随后会再次卡在那里，直到我再次手动更改它。

我如何获得它，以便在我重新加载工作表时至少刷新它？

**编辑：**好吧，首先我尝试进入资源和触发器，并在每次打开文档时都进行非常分钟的触发器。这没有用........

然后我试着变得聪明。注意到每当我更改公式时都会重新评估它，我推测公式本身或单元格参数需要更改才能发生这种情况。所以我在公式中传递了一个虚拟参数并更改该参数以更新单元格。

但这很烦人，让我不得不编辑（或按下按钮）只是为了让狗屎刷新。

所以我得到了一个脑电波，我现在在虚拟参数中传递了 GoogleClock()。所有单元格现在每 60 秒自行更新一次。耶

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:26:08.160

如果您想使用自定义 cel 公式，最好使用 googleclock 作为参数。而是从菜单项和/或 onOpen / time 触发器中调用更新函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T20:53:18.057

除了`GoogleClock()`作为参数传递的解决方法（我同意这是最好的自定义函数），另一个选项是取消自定义函数，并使用 GAS 将结果直接写入单元格，例如：

```
SpreadsheetApp.getActiveSpreadsheet().getRange('Sheet1!A1').setValue(version); 
```

然后在资源，当前项目的触发器中，您可以设置“编辑时”和时间驱动的触发器（要清楚：这些触发器不适用于从电子表格单元格调用的自定义函数；所有“工作”必须是由脚本本身完成）。

# objective-c - 我是否需要 Block_copy 一个我传递给 NSOperation 的 setCompletionBlock: 的块？

> ID：16199435
> 
> 赞同：2
> 
> 时间：2013-04-24T18:23:02.397
> 
> 标签：objective-c, objective-c-blocks, nsoperation

我有一个 NSOperation 的子类，我想做这样的事情：

```
@interface MyOperation : NSOperation...

MyOperation *myOperation = [[MyOperation alloc] init];

[myOperation setCompletionBlock = [^{
    [myOperation doSomething]; // Do something with myOperation and other classes captured from original environment

    [myOperation setCompletionBlock:nil]; // Manually setting to nil avoid retain cycles;
} copy]; <- is this "copy" needed here? 
```

所以我对这段代码的问题是标题问题：

**我是否需要复制 (Block_copy()) 我传递给 setCompletionBlock: 的块：或者 NSOperation 会为我做这件事？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:25:42.660

从[-[NSOperation setCompletionBlock:] 参考](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591-RH2-SW36)：

> 操作完成时要执行的块。此方法创建指定块的副本。块本身应该没有参数并且没有返回值。

所以不，你不需要复制块，因为 NSOperation 已经为你做了这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T23:34:17.583

任何显式采用块类型参数的 API 都必须已经考虑是否复制它。

只有当您将块传递给采用通用对象指针类型参数的 API 时，您才需要担心是否复制它。

# transactions - JAX-WS 和 WS-Transaction

> ID：16199437
> 
> 赞同：1
> 
> 时间：2013-04-24T18:23:12.290
> 
> 标签：transactions, websphere, jax-ws, ibm-rad

帖子： 53 发布 今天 1:48:38 PM 0
我正在 RAD 8.0.4 中开发一个 jax-ws Web 服务概念验证，并在 WebSphere 7 中运行。我们的应用程序使用 Spring 和 Hibernate，但我们都不是这方面的专家。我们需要使用我们的 Web 服务启用全局事务，以便它可以处理客户端应用程序的事务。我按照我在包括 IBM 在内的各种网站上找到的说明进行操作，我认为我配置了所有内容但它不起作用。每个事务（客户端和服务）独立工作，但我在客户端提交之前强制异常。这会回滚客户端事务，但不会回滚服务事务。此外，websphere 上的日志记录（不是简单的 systemout ......来自管理控制台的跟踪）吐出一些 gobbledy-gook，这对我来说意味着客户端没有提供任何事务上下文。

我最初在 RAD 的服务视图和管理控制台中都设置了策略，但我已经读过，如果你同时设置，它就不起作用。但从那以后我只尝试了一个，另一个都没有。这是我所做的：

在我的 wsdl 中，我添加了：

```
<wsp:Policy wsu:Id="ATPolicy">   
  <wsp:ExactlyOne>   
      <wsat11:ATAssertion/>   
      <wsat10:ATAssertion/>   
      <!-- omitted assertions -->   
  </wsp:ExactlyOne>   
</wsp:Policy> 
```

和 wsp:PolicyReference 行

```
<binding name="TxPortBinding" type="tns:TxDelegate">   
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>   
<operation name="insertDBTrans">   
 <wsp:PolicyReference URI="#ATPolicy" required="true"/>         
  <soap:operation soapAction=""/>   
  <input>   
    <soap:body use="literal"/>   
  </input>   
  <output>   
    <soap:body use="literal"/>   
  </output>   
</operation>   
</binding> 
```

在管理控制台版本中，导入 WS-Transaction 策略后，我导航到 Services->Service Providers->TxService，并选中所有三个级别的复选框，TxService、TxPort 和 insertDBTrans。选择附加策略集->WSTransaction。单击服务上的禁用链接，然后选择“导出的 WSDL”。确定并保存。

然后到Services->Service Clients->TxService。检查客户端，附加客户端策略集->WSTransaction。选择的客户和供应商政策。

但这没有用。所以我删除了它们，转而进入 RAD 的服务视图。右键单击服务，管理策略集。将 WSTransaction 放在第一页上，并附上 Provider Sample 作为绑定。它一直设置为操作名称 - insertDbTrans。

在服务视图的客户端下，我将客户端设置为用户提供者策略，第二页，选择 WSTransaction 作为默认条目，并将其设置为“客户端和提供者”。

我实际上尝试了比这更多的排列。但他们都没有工作。

有什么想法我在这里做错了吗？或者至少缩小一般问题的范围？我接近正确吗？

# c# - Jquery JSON 和 C#：从 C# HttpHandler 读取 JSON 回复

> ID：16199443
> 
> 赞同：0
> 
> 时间：2013-04-24T18:23:30.750
> 
> 标签：c#, jquery, json

我在阅读从我的 HttpHandler 返回的 JSON 时遇到了一些麻烦。

返回的数据是这样的（根据 Firebug）：

```
[{"ID":2,"Name":"Fred Johnson","PhoneNumber":"444-444-4444","Notes":"Note Data","Representative":1,"StreetNumber":76547,"StreetName":"Juniper St.","City":"Burbank"}] 
```

## HttpHandler 代码

```
public class RequestHandler : IHttpHandler
{
    public RequestHandler()
    { }

    public bool IsReusable
    {
        get { return false; }
    }

    public void ProcessRequest(HttpContext context)
    {
        var thisID = Convert.ToInt32(context.Request["Id"]);
        List<WW.Data.Customer> thisCustomer = WW.Business.Customer.getCustomerByID(thisID);
        JavaScriptSerializer javaScriptSerializer = new JavaScriptSerializer();
        string lookedUpCustomer = javaScriptSerializer.Serialize(thisCustomer);
        context.Response.ContentType = "text/html";
        context.Response.Write(lookedUpCustomer);
    }
} 
```

## 查询代码

```
<script type="text/javascript">
    function sendData() {
        alert("start");
        var thisID = $("#Text1").val()
        var arr = { ID: thisID};
        $.ajax(
           {
               url: "jsonpost.ww",
               type: "POST",
               data: arr,
               dataType: 'json',
               async: true,
               success: function (data) {
                   $("#Text2").val = data.Name;
                   $("#Text3").val = data.StreetNumber;
                   $("#Text4").val = data.StreetName;
                   $("#Text5").val = data.City;
                   $("#Text6").val = data.PhoneNumber;
               }
           }
        );
        alert("end");
    }
</script> 
```

所以基本上，当它成功返回时，我无法读取该 JSON 字符串数据。有人看到会导致这种情况的任何东西吗？

任何帮助表示赞赏。

谢谢， CSS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:27:18.360

您得到的`json`响应应该是`()`：

```
 $("#Text2").val(data.Name);
     $("#Text3").val(data.StreetNumber);
     $("#Text4").val(data.StreetName);
     $("#Text5").val(data.City);
     $("#Text6").val(data.PhoneNumber); 
```

这是给 赋值的正确方法`inputs`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:26:14.467

您的 JSON 已格式化，因此您需要的对象是数组的第一个元素。所以在你的成功回调中`data.name`，你需要做而不是做`data[0].name`。

# cakephp - CakePHP 路由和 HTML 助手链接歧义

> ID：16199445
> 
> 赞同：0
> 
> 时间：2013-04-24T18:23:35.093
> 
> 标签：cakephp, hyperlink, routing, cakephp-2.0, ambiguity

我有一个使用 CakePHP 2.x 的站点。有一个后端界面，其中动作使用标准的 Cake 布局和视图，但其中一些动作也作为“对话框”向前端用户公开（相同的功能，只是可以放入 iframe 中的布局）。

在`app/Config/router.php`我添加了以下内容：

```
Router::connect('/dialog/:controller', array('action' => 'index'));
Router::connect('/dialog/:controller/:action');
Router::connect('/dialog/:controller/:action/**'); 
```

这可以正常工作，但是当尝试使用 HTML 助手的`link()`方法时问题就开始了。如果我尝试创建如下链接：

```
$this->Html->link('edit account', array('controller' => 'users', 'action' => 'edit')); 
```

我得到以下信息：

```
<a href="/dialog/users/edit">edit account</a> 
```

当链接在对话框中时，这很好用，但我不希望非对话框页面链接到对话框。

**如何控制在特定页面中使用两个 URL 中的哪一个？**

一旦我知道正在呈现的页面是否是对话框，或者甚至在调用中的`link()`某些内容允许我覆盖它，我是否可以从 AppController 中调用某些内容。

我知道有一个“前缀”选项，它允许像这样的 URL，`/user/dialog_edit`但如果可能的话，我想保持`/dialog/users/edit`格式。我也知道我可以硬编码 URL 与在数组中传递控制器/动作/id/等，并且我预计路径/模型名称不会改变，但我想用 CakePHP 的惯用方式来做这件事，如果可能的。

# c++ - 复制构造函数会在这里工作吗？

> ID：16199447
> 
> 赞同：1
> 
> 时间：2013-04-24T18:23:38.173
> 
> 标签：c++, reference

```
void setCurrentTransformations(const NodeTransformations& theSet){
    m_currentTransformations=theSet;
} 
```

我想确认我完全理解这一点，因为`theSet`在调用此函数之后就超出了范围。

这实际上会*复制* `theSet`到`m_currentTransformations`，对吗？换句话说，它是安全的，无论`theSet`调用者的范围如何。

事实上，如果这是一个指针而不是一个引用，我知道它是*不安全*的。但我在这里假设它非常好，并且`m_currentTransformations`会复制`theSet`，这样引用的原始值会发生什么并不重要`theSet`，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:25:52.367

> 这实际上是将 theSet 复制到 m_currentTransformations 中，对吗？

当然，这是要复制的。但是，它将使用类的赋值运算符来执行此操作`NodeTransformations`，因此您可能需要注意它的定义方式。如果定义了复制构造函数，通常还需要赋值运算符和析构函数（[通常称为*三规则*](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)）。

# clojurescript - 将 Clojurescript 协议添加到 Google Closure 元素

> ID：16199451
> 
> 赞同：0
> 
> 时间：2013-04-24T18:23:42.377
> 
> 标签：clojurescript

如何使用 Clojurescript 协议扩展 Google Closure 元素。我试过这个，但它似乎不起作用：

```
(ns my-stuff.main
    (:require
      [goog.dom :as dom))

 (defprotocol ds 
      (-set-text [this text]))

(extend-type js/HTMLDivElement
  ds
  (-set-text
    [this text]  (dom/setTextContent this text)))

(set-text (.getElementById js/document "a") "howdy") 
```

：我认为我必须做一些基本的错误，因为我的 HTML 页面上 ID 为“a”的元素永远不会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T12:09:13.957

我工作太晚了，没有发现丢失的 - （减号）：

```
(ns my-stuff.main
    (:require
      [goog.dom :as dom))

 (defprotocol ds 
      (-set-text [this text]))

(extend-type js/HTMLDivElement
  ds
  (-set-text
    [this text]  (dom/setTextContent this text)))

(-set-text (.getElementById js/document "a") "howdy") 
```

# javascript - 如何使用 XPath 替换 getElementById("id").textContent 语句？

> ID：16199458
> 
> 赞同：2
> 
> 时间：2013-04-24T18:24:04.140
> 
> 标签：javascript, dom, xpath

我正在尝试学习 XPath，但遇到了问题。我用来检索一些获取相应 dom 元素并询问其值的文本。例如：如果我正在编写 Greasemonkey 脚本并且我的浏览器位于：[http](http://en.m.wikipedia.org/wiki/Hello_World) ://en.m.wikipedia.org/wiki/Hello_World那么，我会：

```
alert(
   document.getElementById("section_0").textContent
); 
```

所以，我需要对 xpath 做同样的事情。我试过了：

```
var xpathResult = document.evaluate( "//section_0", document, null, XPathResult.ANY_TYPE, null); 
alert(xpathResult); 
```

但我真的不明白为什么它不起作用。我认为是 xpathExpression，但我找不到显示等同于`getElementById`、`getElementsByTagname`或`getElementByClassName`句子的指南。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:29:07.477

等价物：

```
getElementById(someid)
//*[@id='someid']

getElementsByTagname(tagname);
//tagname

getElementsByClassName(classname)
//*[contains(concat(' ', @class, ' '),' classname ')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:26:35.697

您的 XPath 应该是：

```
//*[@id="section_0"] 
```

# cakephp - 编辑时选中的复选框 - HABTM 模型

> ID：16199459
> 
> 赞同：0
> 
> 时间：2013-04-24T18:24:07.203
> 
> 标签：cakephp, checkbox, has-and-belongs-to-many

我有 2 个模型：`Attorney`和`Powers`.

地点：`Attorney`HABTM`Powers`

当我添加一个新的律师时，我选择了许多与权力相对应的复选框。

我的问题是：当我编辑律师时，如何使复选框显示为选中状态？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:50:05.093

您需要实际检索 HABTM 数据。

因此，例如，您可以使用[CakePHP 的 Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)并像这样获得它们：

```
$attorney = $this->Attorney->find('first', array(
    'conditions' => array(
        'id' => $id
    ),
    'contain' => array(
        'Power'
    )
)); 
```

然后，假设您正确命名表单字段，它们将自动填充选中或未选中。

没有它，您只会收到 Attorney 数据，而 View 将不知道要检查哪个。

# php - Phonegap 中的响应式图像

> ID：16199460
> 
> 赞同：0
> 
> 时间：2013-04-24T18:24:07.653
> 
> 标签：php, image, cordova, responsive-design

我想在我的 Phonegap 应用程序中有响应图像但是如何使用来自 mysql 数据库和 php 作为服务器端的图像来完成。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T19:04:08.657

您需要对所述图像应用一些 CSS 以使它们具有响应性，无论图像是从`img` `src`'s 还是 mysql 数据库加载都无关紧要。

试试这个 CSS：

```
img {
    max-width: 1000px;  //upper-bound
    min-width: 320px;  //lower-bound
    width: 100%;  //set the image to be the width of whatever the screen width is now
} 
```

# django - 不了解 Django 管理员登录

> ID：16199463
> 
> 赞同：1
> 
> 时间：2013-04-24T18:24:17.617
> 
> 标签：django, redirect, django-admin

我正在尝试使用 Django 中的管理员登录机制，并重定向到请求的页面，我得到一个 404，因为它试图重定向到发布的 url，而不是下一个参数表示的 url。我显然不明白什么，因为当我单步执行 contrib.auth.login 视图时，它根本没有解析下一个参数。例如，我有以下视图（网站的主页）

```
@login_required(login_url='/sdc/admin/login')
def cb_index(request):
    #snip
    return render_to_response('chargeback_base.html', variables) 
```

因此，当我输入 cb_index 视图的 URL /sdc/chargeback/ 时，它会正确重定向到登录页面，下一个变量设置为 /sdc/chargeback/，如下所示。

```
http://localhost:8000/sdc/admin/login/?next=/sdc/chargeback/ 
```

但是，来自 contrib.auth.views 的默认登录视图使用完整的 url 作为 redirect_to 而不是下一个参数，所以我总是得到 404 而不是被重定向到下一个 url。我可以通过添加来修复它

```
redirect_to = request.GET.get('next','') 
```

到视图的 POST 部分，但我认为这应该是内置的功能，但它不起作用。更重要的是，由于这是对基本视图的编辑，我必须记住每次更新时都要修复这个问题，我不想这样做。我不明白什么？

编辑：登录网址遵循管理网站网址

```
url(r'^sdc/admin/', include(admin.site.urls)), 
```

登录模板是管理站点中包含的登录模板，没有更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:16:44.197

django auth 应用程序有一个登录视图，您应该直接将其明确包含在您的 url 模式中。

```
(r'^accounts/login/$', 'django.contrib.auth.views.login', name='login'), 
```

有关更多信息，请参阅[有关 auth 视图的文档](https://github.com/django/django/blob/master/django/contrib/admin/sites.py#L318)。您无需选择`/accounts/login/`作为您的登录网址。我只是想明确一点，此视图与管理应用程序是分开的。

更新您的设置，然后您在使用 login_required 装饰器时[`LOGIN_URL='/accounts/login/'`](https://docs.djangoproject.com/en/1.5/ref/settings/#login-url)不必使用该参数。`login_url`

目前，`/sdc/admin/login/`由管理应用程序处理，但管理应用程序确实为此提供了登录视图。如果您单步执行代码，您可以看到该[`AdminSite.login`](https://github.com/django/django/blob/master/django/contrib/admin/sites.py#L318)方法处理了请求。此方法将`REDIRECT_FIELD_NAME`（在您的情况下为“下一个”）设置为请求路径，然后调用身份验证登录视图。

# python - 如何在python中打印已经解释的html数据

> ID：16199466
> 
> 赞同：0
> 
> 时间：2013-04-24T18:24:29.377
> 
> 标签：python

我有一个具有以下数据结构的 HTML 文件：

```
<tr>
    <td valign="top"><img src="img.jpg"></td>
    <td><a href="file.zip">file.zip</a></td>
    <td align="right">24-Apr-2013 12:42 </td>
    <td align="right">200K</td>
</tr>
... 
```

它基本上是一个简单的表格，当在 Firefox 中查看时，它看起来像这样：

```
file.zip   22-Apr-2013 12:42   200K 
```

我想提取这三个值（文件名、日期、大小），我可以这样做，`split()`但我想知道是否可以在 python 中打印“html 解释形式”？

```
import xyz
print xyz.htmlinterpreted(htmlfile.html)
>>> file.zip   22-Apr-2013 12:42   200K 
```

这样我就可以轻松地将数据拆分为`split(" ")`. 这在python中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:26:20.447

使用 HTML 解析器。[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)使这变得轻而易举：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(html_source)
print list(soup.stripped_strings) 
```

演示：

```
>>> from bs4 import BeautifulSoup                                                                                                   >>> soup = BeautifulSoup('''<tr><td valign="top"><img src="img.jpg"></td><td><a href="file.zip">file.zip</a></td><td align="right">24-Apr-2013 12:42 </td><td align="right">200K</td></tr>''')
>>> print list(soup.stripped_strings)
[u'file.zip', u'24-Apr-2013 12:42', u'200K'] 
```

# usb - 用另一台 PC 模拟 USB 设备

> ID：16199468
> 
> 赞同：0
> 
> 时间：2013-04-24T18:24:30.983
> 
> 标签：usb

任务：在 PC 笔记本电脑上测试生产软件，无需通过 USB 连接生产单元，也无需更改生产软件。

目标：用另一台 PC 模拟生产设备。测试应用程序在第二台 PC 上运行以模拟我们的设备命令/响应。

挑战：使用 USB 桥接电缆或其他设备需要我们可以更改 PID/VID 以使其看起来像我们的设备。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:28:47.487

您[需要](http://www.analog.com/en/evaluation/usb-emulatorbf/eb.html)第二台 PC 上的[硬件](http://www.kanecomputing.co.uk/emulators_usb.htm) [设备](http://www.ti.com/devnet/docs/catalog/embeddedsoftwarefulldetails.tsp?actionPerformed=productFolder&productId=9976)来执行此类仿真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:36:01.463

普通 PC 上的 USB 端口是 USB 主机端口。两个这样的端口不能直接相互连接。USB 设备（或 USB OTG 可切换）端口可以在可编程智能手机（[Android](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)，也许还有其他）和一些类似的开发板上[找到](http://www.calao-systems.com/articles.php?lng=en&pg=5940)。我认为您可能需要使用智能手机或开发板而不是普通 PC 作为 USB 设备模拟器。

# rapidsql - 有没有办法查看 Rapid SQL 为存储过程执行的 SQL？

> ID：16199469
> 
> 赞同：-1
> 
> 时间：2013-04-24T18:24:43.283
> 
> 标签：rapidsql

使用 Embarcadero Rapid SQL 客户端工具，您可以列出数据库中的程序，右键单击一个并选择“执行”打开一个对话框，您可以在其中输入输入参数值，然后单击执行按钮运行程序并查看结果网格。

但是我没有看到任何地方可以显示该工具最终运行的 SQL - 有没有办法启用此输出，以便我可以查看、复制、与同事共享或在需要时直接运行 SQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:34:18.037

如果您正在使用 SQL Server，您可以运行 SQL Server Profiler（在 Tools/SQL Server Profiler 下）并跟踪您在数据库引擎中运行它的查询。在应用程序名称列中，您将看到“Rapid”或类似名称。这对于跟踪引擎中执行的所有 T-SQL（顺便包括存储过程）语句非常有用。

# java - Java中的lxml替代品？

> ID：16199475
> 
> 赞同：2
> 
> 时间：2013-04-24T18:25:13.443
> 
> 标签：java, python, lxml

我一直在广泛使用 lxml 来开发算法。但是现在，由于[性能](https://stackoverflow.com/questions/16134973/approach-to-achieve-speed-and-practicality)问题，我不得不迁移到 Java。道德是，我能在 Java 中找到像 lxml dom 解析器一样棒的东西吗？

**> 关键要求：**

> 1) 像 text_content() 2) iterchildren 和 3) iterparent() 和 itersiblings() 之类的功能---（如果 xpath 在那里，我认为我们可以进行这样的遍历，不确定）。

Jsoup在那里很有名，但不确定是否一切都可以完成。我只想移植算法而不是大量重写。请建议。

谢谢。

为什么选择 Java：我正在做复杂的 nlp 和 dom 解析任务。Python 是第一选择，并且将继续存在。编写 c 扩展是一回事，执行复杂的 nlp 任务是另一回事，合并两者是另一回事。因此Java。没有什么冒犯的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:48:59.073

在我看来，撒克逊人是你最好的选择[http://saxon.sourceforge.net](http://saxon.sourceforge.net)。可以在此下载的 saxon-resources9-4.zip 中找到一堆示例：http: [//sourceforge.net/projects/saxon/files/Saxon-HE/9.4/](http://sourceforge.net/projects/saxon/files/Saxon-HE/9.4/)，例如 xpath 表达式：

```
 XPathExpression findLine =
        xpe.compile("//LINE[contains(., $word)]");
    XPathExpression findLocation =
        xpe.compile("concat(ancestor::ACT/TITLE, ' ', ancestor::SCENE/TITLE)");
    XPathExpression findSpeaker =
        xpe.compile("string(ancestor::SPEECH/SPEAKER[1])"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T04:45:29.973

[xerces](http://xerces.apache.org/xerces2-j/) is a great for xml. You would use xerces via [JAXP](http://docs.oracle.com/javase/tutorial/jaxp/intro/index.html).

# xsd - Sybase ASE - 带有 xml 模式的 xmlvalidate

> ID：16199478
> 
> 赞同：1
> 
> 时间：2013-04-24T18:25:18.713
> 
> 标签：xsd, sap-ase, xml-validation

我以 xml 形式接收到过程的输入，并且我已经准备了 xml 模式，并希望使用该模式验证输入，如果输入不符合要求则抛出错误。我正在尝试使用 xmlvalidate() 选项“schemavalidate=yes”，但不知道在哪里存储我的 xml 架构。这些示例将 http url 指示为 xml 架构，但我应该托管我的 xml 架构吗？还是应该将其存储为数据库“文本”列？有人可以指导我如何存储和使用 xml 模式来使用 xmlvalidate() 吗？我们在 Sybase ASE 15.7

感谢你的帮助！

* * *

只需在我的下一步中添加以下问题即可：

我已经托管了我的 xml 架构并尝试使用 xmlvalidate，如下所示：

```
xmlvalidate(@purgeTableInfo, option 'schemavalidate=yes,  nonamespaceschemalocation="http://myhost:5000/purgeschema"') 
```

已向托管数据库的 unix box/login 提供了对此清除模式的所需访问权限。我们可以从运行 sybase 的 unix 机器上 ping 到“myhost”。但是，我仍然收到以下错误。

```
"XMLVALIDATE(): XML parser fatal error <<An exception occurred!
Type:NetAccessorException, Message:Could not create the socket for URL
'{0}'. Error={1>> at line 0, offset 0.
Sybase error code=14702
Severity Level=16, State=0, Transaction State=0" 
```

有谁知道是什么原因，我应该如何解决这个问题？

对此的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:37:55.540

根据[文档](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc30020.1570/html/xmlb/BCEJGHEE.htm)，要针对 dtd 进行验证，需要托管您的架构。您的 xml 应该存储在数据库中的文本列中，而不是您的 xml 架构中。文档中有许多示例，它们应该可以引导您朝着正确的方向前进。

# c# - 在数据表中查找重复行的成本更低的方法？

> ID：16199482
> 
> 赞同：0
> 
> 时间：2013-04-24T18:25:32.917
> 
> 标签：c#, datatable

我想在 DataTable 中查找所有行，其中每组列都是重复的。我目前的想法是获取多次出现的所有行的索引列表，如下所示：

```
public List<int> findDuplicates_New()
        {
            string[] duplicateCheckFields = { "Name", "City" };
            List<int> duplicates = new List<int>();
            List<string> rowStrs = new List<string>();
            string rowStr;

            //convert each datarow to a delimited string and add it to list rowStrs
            foreach (DataRow dr in submissionsList.Rows)
            {
                rowStr = string.Empty;
                foreach (DataColumn dc in submissionsList.Columns)
                {
                    //only use the duplicateCheckFields in the string   
                    if (duplicateCheckFields.Contains(dc.ColumnName))
                    {
                        rowStr += dr[dc].ToString() + "|";
                    }
                }
                rowStrs.Add(rowStr);
            }

            //count how many of each row string are in the list
            //add the string's index (which will match the row's index)
            //to the duplicates list if more than 1
            for (int c = 0; c < rowStrs.Count; c++)
            {
                if (rowStrs.Count(str => str == rowStrs[c]) > 1)
                {
                    duplicates.Add(c);
                }
            }
            return duplicates;
        } 
```

但是，这不是很有效：遍历字符串列表并获取每个字符串的计数是 O(n^2)。我查看了[这个解决方案](https://stackoverflow.com/a/6584728/619177)，但不知道如何将它用于超过 1 个字段。我正在寻找一种更便宜的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:30:46.890

尝试这个：

[如何在每行有 70 多列的表中检查完全匹配？](https://stackoverflow.com/questions/16044961/how-can-i-check-for-an-exact-match-in-a-table-where-each-row-has-70-columns/16045146#16045146)

本质是创建一个集合来存储行的哈希，并且只在具有冲突哈希的行之间进行比较，复杂度将是 O(n)

...

如果您有**大量**行并且存储哈希本身是一个问题（不太可能发生，但仍然......），您可以使用[Bloom filter](https://en.wikipedia.org/wiki/Bloom_filter)。布隆过滤器的核心思想是计算每一行的[几个](http://hur.st/bloomfilter?n=4&p=1.0E-20)不同的哈希值，并将它们用作位图中的地址。当您扫描行时，您可以仔细检查已经在位图中设置了所有位的行。

# java - 如何直接将java程序自动连接到MySQL数据库？

> ID：16199483
> 
> 赞同：1
> 
> 时间：2013-04-24T18:25:39.897
> 
> 标签：java, mysql, database

我想将 MySQL 用于我的 Java 应用程序，但非常重要的是用户在启动应用程序之前没有启动或安装任何程序，所以，我如何安装 MySQL（如果有必要）并直接启动 MySQL 服务器代码？我必须使用其他数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:33:11.903

您可以使用[Nullsoft Scriptable Install System (NSIS)](http://nsis.sourceforge.net/Main_Page)之类的工具在用户计算机上安装 MySQL 以及您的 Java 应用程序。您的 Java 应用程序必须创建 Java 应用程序所需的所有表。

您的另一种选择是使用 Java 嵌入式数据库，例如[HSQLDB](http://hsqldb.org/)。您的用户只需安装您的 Java 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T21:41:54.833

MySQL 已发布[此演示文稿](http://en.oreilly.com/mysql2009/public/schedule/detail/6895)，详细说明如何在需要时执行此操作。它列出了这三个选项：

*   嵌入式库
*   静音窗口安装
*   启动mysql表单命令行

查看演示文稿以了解详细信息（页面上链接的 .zip 中的 .pdf）。

请注意，您还必须符合许可证才能执行此操作。GPL 对 GPL，商业对商业。

# java - JpaRepository 的 TargetEntity 属性

> ID：16199487
> 
> 赞同：1
> 
> 时间：2013-04-24T18:25:53.090
> 
> 标签：java, generics, jpa, spring-data-jpa

我正在试验 spring-data-jpa 项目并实现了一些任意 API，并将 JPA 实体定义放在实现类中。(one) Repository 定义如下：

```
@Repository
public interface RecipeRepository extends JpaRepository<RecipeEntity, Long> 
```

我的实体类定义为

```
@Entity
@Table(name = "recipes")
public class RecipeEntity implements Recipe 
```

所以我正在建立一个这样的食谱：

```
Recipe pasta = Kitchen.createRecipe("Pasta"); 
```

当然，我不能像这样简单地坚持这个食谱：

```
recipeRepository.save(pasta); 
```

因此，如果我可以像这样定义存储库，那就太好了：

```
@Repository(targetEntity=RecipeEntity.class)
public interface RecipeRepository extends JpaRepository<Recipe, Long> 
```

就像我从 RecipeEntity 中引用关联实体一样，例如成分：

```
@OneToMany(targetEntity=IngredientEntity.class)
private List<Ingredient> ingredients; 
```

# plone - Plone 4 - 自定义“相关项目”屏幕

> ID：16199488
> 
> 赞同：1
> 
> 时间：2013-04-24T18:25:53.670
> 
> 标签：plone

如何自定义“相关项目”屏幕？我想显示日期（有效）并使列表按时间顺序显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:40:35.213

相关项目是 Products.ATContentTypes 包中声明的 Archetypes 字段：

[https://github.com/plone/Products.ATContentTypes/blob/master/Products/ATContentTypes/content/schemata.py#L38](https://github.com/plone/Products.ATContentTypes/blob/master/Products/ATContentTypes/content/schemata.py#L38)

您可以通过猴子补丁覆盖小部件的模板，在您自己的内容类型或所有现有的 Plone 内容中：

[https://developer.plone.org/reference_manuals/old/plone_3_theming/buildingblocks/skin/templates/customizing-at-templates/customizing-widgets.html](https://developer.plone.org/reference_manuals/old/plone_3_theming/buildingblocks/skin/templates/customizing-at-templates/customizing-widgets.html)

# java - 如何处理工厂方法返回的对象的 bean 依赖关系

> ID：16199490
> 
> 赞同：0
> 
> 时间：2013-04-24T18:26:00.797
> 
> 标签：java, spring

我很难弄清楚这一点，我将首先提到类结构：

*   汽车经销商
*   汽车厂
*   汽车（接口）
*   BlueCar（汽车的实现）
*   RedCar（汽车的实现）
*   胎

CarFactory 类有一个返回 Car 的工厂方法。在 Spring XML 文件 (test-spring.xml) 中，bean 定义如下所示：

```
<bean id="carDealer" class="...CarDealer>
    <property name="car" ref="car"/>
</bean>
<bean id="carFactory" class="...CarFactory" />
<bean id="car" factory-bean="carFactory" factory-method="createCar" />

<bean id="tire" class="...Tire" /> 
```

工厂将返回 RedCar 或 BlueCar，调用代码不知道是哪一个。然而，假设这个例子，它返回 RedCar。

在我正在测试 RedCar 的测试类中，它的设置如下：

```
@SuppressWarnings("PMD")
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:test-spring.xml" })
public class RedCarTest {

    @Autowired
    Car redCar; 
```

在 RedCar 类中，它具有轮胎的属性：

```
public RedCar implements Car {
    @AutoWired
    private Tire tire;
} 
```

在测试示例中，这工作正常，从工厂返回的 redCar 也被初始化，它的依赖项 Tire 也被初始化。问题是当我尝试从我的应用服务器运行它时。

在应用程序代码中，CarDealer 类引用了汽车：

```
public CarDealer {
    private Car redCar;
} 
```

调用此代码时，将创建 CarDealer（通过 spring）并创建 Car（通过 spring），但是 Car 的 Tire 属性为 null。我不明白为什么在测试代码下会创建 Tire 属性，但在应用程序中却没有。希望这是一个比之前提出的问题更清晰的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:36:41.467

您是否尝试过使用*@Resource(name="SomeRedProperty")*而不是*@Autowired*？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:44:37.037

> 当工厂返回汽车（“RedCar”）时，如何确保初始化依赖属性。

`@Autowired`不起作用，因为您的工厂类正在实例化 bean 本身，Spring 在创建 bean 时只能自动装配依赖项（并作用于注释）。

确保工厂返回的对象具有所有属性集的最简单方法是设置工厂类/方法中的所有属性。

所以实际上，工厂可以有一个`SomeRedProperty`字段，用于将它传递给`RedCar`它创建的 s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:53:16.930

我同意@matt b 的观点，即确保所有属性都可以由您在工厂本身内完成。但是，如果您确实希望 Spring 管理 Blue 和 Red Car 实例的依赖项，您可以按照以下步骤操作：

1.  你的工厂必须实现 Spring 的 `BeanFactoryAware' 接口。从接口实现方法后，Spring 将提供对创建它的 bean 工厂的类访问。这基本上是您的应用程序上下文。

2.  在上下文中连接您的红色和蓝色汽车。（不管它们是否与工厂在同一个文件中，只要所有 xml 都加载到上下文中）。如果您希望工厂方法的每次调用都提供一个新的完全注入的实例，请确保将红色和蓝色汽车 bean 标记为具有“原型”范围。

3.  在您的工厂类中，实现`setBeanFactory(BeanFactory beanFactory)`，只需保存对 bean 工厂的引用。

4.  在您的工厂`createCar`方法中，一旦您决定要返回哪辆车，就从 bean 工厂中查找合适的 bean 并返回给调用者。

希望这可以帮助。

# ios - iOS SDWebImage - 如何正确处理不同设备上的视网膜图像？

> ID：16199492
> 
> 赞同：1
> 
> 时间：2013-04-24T18:26:06.447
> 
> 标签：ios, retina-display, ios-universal-app, sdwebimage

我在我的应用程序中使用 SDWebImage 库进行图像缓存，但无法让视网膜图像正确显示。

我知道在 github 页面上有很多关于下载视网膜图像的讨论，但无法确定它是否已完全解决，也没有任何“官方”操作方法。

因为我的应用程序是通用的，所以我下载的每张图片都会有 4 种变体。这是一个例子：

*   iPhone：[http ://www.DOMAIN.com/my-image~iphone.png](http://www.DOMAIN.com/my-image~iphone.png)
*   iPhone 视网膜：[http ://www.DOMAIN.com/my-image@2x~iphone.png](http://www.DOMAIN.com/my-image@2x~iphone.png)
*   iPad：[http ://www.DOMAIN.com/my-image~ipad.png](http://www.DOMAIN.com/my-image~ipad.png)
*   iPad 视网膜：[http ://www.DOMAIN.com/my-image@2x~ipad.png](http://www.DOMAIN.com/my-image@2x~ipad.png)

下载这些图像并让设备使用正确的 SDWebImage 的正确方法是什么？

我尝试在我的 iPhone 5 上下载 @2x-iphone.png 图像，但它显示的图像被放大和像素化，就好像它不知道这是一个 @2x 图像。

使用多种设备类型处理视网膜图像的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:26:07.097

首先，原因 - UIImage 不知道图像是视网膜图像还是常规图像。当您调用`-[UIImage imageNamed:]`它时，它会`-[UIImage imageWithData:scale:]`以适当的比例值调用。

您的问题是由 SDWebImage 中的错误引起的。见[源](https://github.com/rs/SDWebImage/blob/master/SDWebImage/SDWebImageCompat.m#L42)。如果它不存在，请继续并[提交错误。](https://github.com/rs/SDWebImage/issues)

问题是 SDWebImage 只查找 @2x.png/jpeg 文件名来确定它是否是视网膜图像。您可以继续修复该函数以检查@2x~iphone.png/@2x~ipad.png 文件名。

或者，如果您不想接触 SDWebImage 代码，请在`webImageManager:didFinishWithImage:forURL:userInfo:`回调中检查文件名是否为视网膜图像，如果是，请执行以下操作：

```
image = [UIImage imageWithCGImage: image.CGImage scale: [UIScreen mainScreen].scale] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:46:21.933

发现 SDWebImage 仅使用以下过滤器来确定图像是否为视网膜（位于 SDWebImageCompat.m 中）：

```
NSRange range = [path rangeOfString:@"@2x." options:0 range:NSMakeRange(path.length - 8, 5)]; 
```

因为它只搜索“@2x”。（注意句号）并且只有当它落在字符串的末尾时，名称如“my-image@2x~iphone.png”的图像才会被检测为视网膜。

更新了代码以在整个图像 URL 中搜索“@2x”。唯一关心的是你不能在 url 中的任何其他地方使用“@2x”（但是哪个开发人员曾经使用过这种命名约定？）：

```
NSRange range = [path rangeOfString:@"@2x" options:0 range:NSMakeRange(0,path.length)]; 
```

我还在 SDWebImage GitHub 页面 ( [https://github.com/rs/SDWebImage/pull/370](https://github.com/rs/SDWebImage/pull/370) )上提交了拉取请求

# javascript - 字体大小异常变化

> ID：16199494
> 
> 赞同：5
> 
> 时间：2013-04-24T18:26:09.867
> 
> 标签：javascript, jquery, html, css, google-chrome

我的非常简单的网站有问题。在某些情况下，字体大小似乎异常变化。例如，当我单击主页中的链接时，打开的新页面具有不同的字体大小。而且这种行为似乎只发生在 Chrome 上。请看下面的图片。对于每张图片，您可以在左侧看到主页中的字体大小，在右侧您可以看到点击链接打开的页面中的字体大小。

Internet Explorer（字体大小还可以）

![在此处输入图像描述](https://i.stack.imgur.com/s1BUo.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/V5rrl.jpg)

火狐（字体大小还可以）

![在此处输入图像描述](https://i.stack.imgur.com/rcUS3.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/8M424.jpg)

Chrome（字体大小不同）

![在此处输入图像描述](https://i.stack.imgur.com/m5acG.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/2dS7i.jpg)

这是两个网页使用的我的 CSS 代码（在此之前有一个重置标准文件）：

```
@charset "utf-8";
/* CSS Document */

body
{
    background-color:#FFF;
    font-size:100%;
    font-family:Verdana, Geneva, sans-serif;

}

.centered
{
    margin:0 auto;
}

.centered-content
{
    text-align:center;
}
div.article-header
{

    background-image:url(../img/articleheaderback.png);
    background-position:bottom;
    background-repeat:repeat-x;
    width:100%;
    margin-bottom:10px;

}
div.article-title
{
    width:69%;
    display:inline-block;
    padding-left:1%;
    padding-bottom:10px;
}
div.article-more
{
    text-align:right;
    font-style:italic;
    display:inline-block;
    color:#690000;
    width:29%;
    padding-right:1%;
}
div.article-content
{
    width:94%;
    padding-right:3%;
    padding-left:3%;
}
div.article
{
    padding-top:10px;
    padding-bottom:10px;
    padding-left:3%;
    padding-right:3%;
    width:94%;  
}
div.section
{
    padding-top:10px;
    padding-bottom:10px;
    width:100%;
    text-align:center;
}
div.section-title
{
    text-transform:uppercase;
    width:100%;
}
div.container
{
    width:100%;
    margin:10px 0;
    padding-top:20px;
    padding-bottom:10px;
    background-color:#cbcb63;
}
div.content
{
    width:90%;
    background-color:#fff59b;
    margin:15px auto;
    padding-top:10px;
    padding-bottom:10px;
}

div#contacts
{
    width:90%;
    background-color:#fff59b;
    margin:0 auto;
}
.dark-background
{
    background-color:#1b5e5e;
}
div.header
{
    text-align:center;
    width:100%;
}
div.footer
{
    text-align:center;
}
h1
{
    font-size:1.5em;
    font-weight:bold;
    color:#690000;
}

img#logo
{
    max-width:100%;
}

li.basic
{
    padding-top:5px;
    padding-bottom:5px;
    line-height:1.5;
}

li.nav
{
    color:#5c7304;
    padding-top:25px;
    text-align:center;
    font-weight:bold;
    text-transform:uppercase;
}
li.contacts
{
    display:inline-block;
    width:25%;
}
p
{
    line-height:1.5;
}
ul.nav
{
    margin-top:10px;
    padding:0;
    list-style:none;
    width:100%;
}
ul.basic
{
    list-style-type:disc;
    list-style-position:inside;
}
ul.contacts
{
    width:100%;
    margin-top:30px;
    margin-bottom:10px;
} 
```

这是html主页：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html lang="it">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Responsive Site</title>
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/princstyle.css">
<meta name="viewport" content="width=device-width, user-scalable=no, 
initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
<script src="js/jquery-1.9.1.min.js"></script>

<script language="javascript">
$(document).ready(function(){
    $("#section-list").hide();  

    $("#section-title").click(function(){
        $("#section-list").toggle();
    });
});
</script>

</head>

<body>
    <!-- container contains HEADER + NAV + CONTENT-->
    <div class="container">

        <!-- header -->
        <div class="header">
            <img id="logo" alt="Logo: Matteo Puccinelli profile" src="img/logoridim.png"> 
        </div>

        <!-- sections -->
        <div class="content">
            <!-- Article: sections -->
            <div class="section">
                <div id="section-title" class="section-title">
                    <h1>
                        Sections
                    </h1>
                </div>
                <div id="section-list">
                    <ul class="nav">
                        <li class="nav"><a href="prova.html">Home</a></li>
                        <li class="nav"><a href="#personaldata">Dati personali</a></li>
                        <li class="nav"><a href="#work">Esperienze lavorative</a></li>
                        <li class="nav"><a href="#education">Educazione</a></li>
                        <li class="nav"><a href="#passions">Passioni</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- content -->
        <div class="content">
            <!-- Article: personal data -->
            <div id="personaldata" class="article">
                <div class="article-header">
                    <div class="article-title">
                        <h1>
                            Dati personali
                        </h1>
                    </div>
                </div>
                <div class="article-content">
                    <ul class="basic">
                        <li class="basic">Data di nascita: 18-01-1987</li>
                        <li class="basic">Luogo di nascita: Lucca</li>
                        <li class="basic">Nazionalità: italiana</li>
                        <li class="basic">Residenza: [privata]</li>
                    </ul>
                </div>
            </div>

            <!-- Article: work experiences -->
            <div id="work" class="article">
                <div class="article-header">
                    <div class="article-title">
                        <h1>
                            Esperienze lavorative
                        </h1>
                    </div><!--
                 --><div class="article-more">
                        <a href="work.html">+ more</a>  
                    </div>
                </div>
                <div class="article-content">
                    <ul class="basic">
                        <li class="basic">(dal 2011) Redattore per il portale <a href="http://www.libro-mania.com/" target="_blank">Libro-Mania</a>.</li>
                        <li class="basic">(dal 2007) Lavori occasionali.</li>
                        <li class="basic">(2011-2012) Tirocinio formativo presso l'azienda <a href="http://www.intecs.it/" target="_blank">Intecs SpA</a>.</li>
                    </ul>
                </div>
            </div>

            <!-- Article: education -->
            <div id="education" class="article">
                <div class="article-header">
                    <div class="article-title">
                        <h1>
                            Educazione
                        </h1>
                    </div><!--
                 --><div class="article-more">
                        <a href="education.html">+ more</a> 
                    </div>
                </div>
                <div class="article-content">
                    <ul class="basic">
                        <li class="basic">(dal 2012) Laurea di secondo livello in Scienze Informatiche, facoltà di Scienze matematiche, fisiche e naturali di Pisa.</li>
                        <li class="basic">(2012) Laurea in Scienze Informatiche, facoltà di Scienze matematiche, fisiche e naturali di Pisa. Votazione 106/110.</li>
                        <li class="basic">(2007) Diploma di perito industriale capotecnico all'istituto industriale E. Fermi di Lucca con specializzazione Informatica. Votazione 100/100.</li>
                    </ul>
                </div>
            </div>

            <!-- Article: passions -->
            <div id="passions" class="article">
                <div class="article-header">
                    <div class="article-title">
                        <h1>
                            Passioni e Hobby
                        </h1>
                    </div><!--
                 --><div class="article-more">
                        <a href="passions.html">+ more</a>  
                    </div>
                </div>
                <div class="article-content">
                    <p>
                        prova
                    </p>
                </div>
            </div>

        </div> <!--content end -->
    </div> <!-- container end -->

    <!-- footer -->
    <div class="footer centered-content">
        <ul class="contacts">
            <li class="contacts"><img alt="facebook social icon" src="img/fbsmall.png"></li><!--
         --><li class="contacts"><img alt="twitter social icon" src="img/twittersmall.png"></li><!--
         --><li class="contacts"><img alt="feed RSS" src="img/rsssmall.png"></li><!--
         --><li class="contacts"><img alt="feed RSS" src="img/mail.png"></li>
        </ul>
        <p title="copyright" style="margin-top:15px; margin-bottom:15px;">
            Copyright 2013 Matteo Puccinelli
        </p>  
    </div>

</body>
</html> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:29:23.540

**1-**字体大小的百分比是根据参考计算的。
**2-**字体大小是继承的。

在您的情况下，您尚未定义参考，因此这些元素**的父**级浏览器的默认字体大小是计算的基础。

对于同一个元素，不同的浏览器可以有不同的默认字体大小。

这就是为什么您会看到差异。

您可以在正文上设置字体大小，然后将百分比用于其他任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-19T09:24:47.227

em 和 % 几乎是一回事 - 2em = 200%。对于大多数可能被覆盖的内容，每个浏览器都有一个默认字体大小。将 * 与 !important 一起使用是一种非常粗略的处理方式，因为如果您想随后覆盖任何内容，则必须使用 !important。

理想情况下，您需要使用：

```
html, body, table {
    font-size: 13px;
} 
```

此外，您可以执行以下操作，而不是使用空白页脚导航之间的空间：

```
.footer ul {
    font-size: 1px;
}
.footer li {
    font-size: 13px;
} 
```

[http://jsfiddle.net/hDLry/](http://jsfiddle.net/hDLry/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T19:06:23.977

首先，您确定第二页处于相同的缩放级别吗？

我*认为*问题在于使用 % 而不是 em。

首先要做的是确定将元素设置为 em 是否可以解决新选项卡上大小更改的问题。之后，您可以计算出将每个元素设置为的 em。

```
*
{
    font-size: 20em !important;

} 
```

# ios - 应用商店描述特殊字符

> ID：16199498
> 
> 赞同：8
> 
> 时间：2013-04-24T18:26:24.280
> 
> 标签：ios, app-store

应用商店描述中不能再使用星号等特殊字符了吗？

我收到此错误：描述不得包含标记语言（例如 HTML 标记）。描述不得包含以下字符：★</p>

提前致谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T12:35:49.413

仍然允许使用一些 Unicode 字符。以下字符已经过测试并且仍然有效： • ◆ √ ▸</p>

至于现在（2013 年 4 月 26 日），它们运行良好，但可以肯定的是，Apple 可以随时再次更改条件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-21T00:21:08.173

我刚刚使用了 • ◆ √ ▸ 字符，它有效！2014 年 10 月

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-17T10:57:14.083

这些也在 2015 年 5 月 17 日生效：

▶ ◀

# android - 从 android 访问 IIS 站点

> ID：16199500
> 
> 赞同：1
> 
> 时间：2013-04-24T18:26:29.983
> 
> 标签：android, iis

我正在使用 Windows 8 Pro x64。当我尝试使用我父母的 Android 4.1 平板电脑连接到我的笔记本电脑时，我只是得到主机名无法解析。

我发现它适用于 IP 地址，但我需要主机名。原因是 ajax 调用和 https。知道如何让它工作吗？

# android - 在商家列表中销售 Android 应用程序

> ID：16199505
> 
> 赞同：-2
> 
> 时间：2013-04-24T18:26:49.027
> 
> 标签：android, google-app-engine

我想注册一个商家帐户，但我的国家不在列表中。但是我在美国有一个银行账户。我可以在设置商家帐户时使用它还是不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:29:45.687

如果您只使用银行账户而不是美国公民，则会出现法律问题。

我的解决方案是在美国注册一家公司，在该公司下开设一个银行账户并通过该账户进行销售。我已经使用它近 2 年了，到目前为止没有任何问题。

# vim - vim：不同文件扩展名的相同语法突出显示

> ID：16199507
> 
> 赞同：11
> 
> 时间：2013-04-24T18:26:49.403
> 
> 标签：vim

有没有办法为不同的文件扩展名制作相同的语法突出显示？

例如：相同的突出显示

```
foo.c and foo.my_c_extension 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T18:34:44.477

Vim 将根据缓冲区的`filetype`. 您可以设置`filetype`via`autocmd`以匹配多个文件扩展名。

例如，当在具有`.c`或`.my_c_extension`扩展名的缓冲区中加载或创建文件时，`filetype`将设置为`c`：

```
" In .vimrc, for example:
autocmd BufRead,BufNewFile *.c,*.my_c_extension set filetype=c 
```

请参阅`:help filetype`和`:help autocmd`了解更多信息。

根据`filetype`帮助，您可以创建`~/.vim/ftdetect/file_extension.vim`包含`autocmd`. 这将在其他规则之后加载，允许您覆盖以前由 Vim 或插件所做的设置。这可能比在你的`.vimrc`.

```
" File: ~/.vim/ftdetect/my_c_extension.vim
autocmd BufRead,BufNewFile *.my_c_extension set filetype=c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:45:33.873

如果您不希望文件类型相同（可能会有一些不需要的副作用），并且只想设置语法，则可以使用以下内容：

```
autocmd BufRead,BufNewFile *.my_c_extension set syntax=c 
```

# c - C 程序 — 当 n 为奇数时，对给定 n 的数字进行编码？

> ID：16199509
> 
> 赞同：-2
> 
> 时间：2013-04-24T18:26:57.823
> 
> 标签：c

我必须显示用户给定的下图（两个三角形截距），其中 n 是奇数。该图在此链接中：http: [//i.imgur.com/mQxarLz.jpg](http://i.imgur.com/mQxarLz.jpg)

```
*******
 *****
  ***
   *
   *
  ***
 *****
******* 
```

我已经写了这段代码，但我不知道如何给出 n，其中 n 是奇数。而且我的代码无法编译；它说：“在第五行，for 之前的语法错误”。

```
#include <stdio.h>
int main (void) {
    int n,i,k,m;

    for(m=0;m<2;m++)
        for  (i=1;i<=n;i++){ 
            if(m==0){    
                for(k = 1; k<=n-i; k++){        
                    printf("  ");      
                }   
            } 
        }
    for (k=1;k<2*i;k++){   
        printf("%s","*");   
        //printf("%d",i);
    }

    scanf("%d",&n);

    for (k = 1; k<=i;k++)
        for (k=1;k<(n-i)*2;k++)
           for (i=1;i<=n;i++) {   
               printf("\n$"); 
           }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:39:03.200

首先，*“如何检查整数是否为奇数”*的答案：您只需除以 2 并检查余数是 0（偶数）还是 1（奇数）。在 C 和大多数相关语言中，这就是模运算符 "%" 的作用：

```
if ((n % 2) == 1) {
    // The number is odd.
} 
```

但是你应该确保你在一开始就阅读了你的*n*，因为在你提交的代码中，*n*在你真正写东西之前在你的第二个“for”循环中被读取。这意味着，此时*n*包含垃圾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T20:34:12.920

好的编程是以你能找到的最简单的方式解决问题。这个特定的算法是非常基础的东西，因此你不应该得到比这更复杂的东西：

```
#include <stdio.h>
#include <stdbool.h>

void print_chars (char symbol, int n)
{
  for(int i=0; i<n; i++)
  {
    printf("%c", symbol);
  }
}

void print_triangle (int base_size, int height, bool pointing_up)
{
  int star_count = pointing_up ? 1 : base_size;

  for(int row = 0; row < height; row++)
  {
    int spaces = base_size - star_count;

    print_chars (' ', spaces/2);
    print_chars ('*', star_count);
    print_chars (' ', spaces/2);

    printf("%\n");
    star_count += pointing_up ? 2 : -2;
  }
}

int main (void)
{
  print_triangle(7, 4, false);
  print_triangle(7, 4, true);
} 
```

请注意，如果三角形的底边与其高度不同步，上面的代码会表现得很奇怪——我故意把它省略了，随时可以进一步改进程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:56:59.993

```
#include <stdio.h>

void printAsterisk(int n, int length){
    int i, slen = (length - n)/2;
    for(i=0;i < slen;++i)
        putchar(' ');
    for(i=0;i < n;++i)
        putchar('*');
    putchar('\n');
}
/* non-recursive
void printTriangle(int n, int length){//n isn't required as an argument
    int d= -2;
    for(; n < length + 1; n += d){
        if(n < 0) n += (d *= -1);
        printAsterisk(n, length);
    }
}
*/    
void printTriangle(int n, int length){
    if(n < 1) return;
    printAsterisk(n, length);
    printTriangle(n - 2, length);
    printAsterisk(n, length);
}

int main(void){
    int n;
    do{
        printf("input odd number:");
        scanf("%d", &n);
    }while(n % 2 == 0);

    printTriangle(n, n);

    return 0;
} 
```

# javascript - 从javascript调用ajax函数

> ID：16199511
> 
> 赞同：-1
> 
> 时间：2013-04-24T18:27:15.173
> 
> 标签：javascript, jquery, ajax, json

抱歉，如果这个问题没有意义，我仍在尝试理解 ajax、JavaScript 和 jQuery。所以这是我的问题。

这是我的 JavaScript 代码：

```
if (colorToCheck == gup("Player1")) {
    document.getElementById('win').innerHTML=player1+" wins";
    //add ajax call to update my json file
    redScore += 1
} else if (colorToCheck == gup("Player2")) {
    document.getElementById('win').innerHTML=player2+" wins";
    //add ajax call to update my json file
    blackScore += 1
} 
```

所以我想从这个块中调用 ajax。我搜索了网络，但没有得到我的答案。提前致谢。任何帮助高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:46:53.113

看起来你在这里有一个很好的答案。我只是想确保您知道将 JQuery 库包含在您的页眉中。如果您不想下载，可以使用 Google 托管的库版本。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script> 
```

更多库可在...

[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

jQuery 教程

[http://docs.jquery.com/Tutorials](http://docs.jquery.com/Tutorials)

AJAX简介

[http://www.w3schools.com/jquery/jquery_ajax_intro.asp](http://www.w3schools.com/jquery/jquery_ajax_intro.asp)

博客

[http://net.tutsplus.com/tutorials/javascript-ajax/15-resources-to-get-you-started-with-jquery-from-scratch/](http://net.tutsplus.com/tutorials/javascript-ajax/15-resources-to-get-you-started-with-jquery-from-scratch/)

YouTube 也是一个了解更多信息的好地方。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:36:46.817

使用这样的东西：

```
$('#win').html(colorToCheck == gup("Player1") ? player1:player2 + " wins");

if (colorToCheck == gup("Player1")) 
   redScore += 1
else if (colorToCheck == gup("Player2")) 
  blackScore += 1

$.post("update-score.php", { player: x, score: y } ); 
```

...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T18:34:34.860

```
 $.ajax({
  type: "POST",
  url: "home.aspx", //you can call any function you want to execute in this url
  data: datastring,
    success: function(msg){
       alert( "This is ajax call:" + msg );
           // some code to exec on success
    }
 }); 
```

这是一个示例 ajax 调用。如果您正在寻找 JSON，那么请通过此[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# oracle - 使用 TADOQuery 转换负数

> ID：16199517
> 
> 赞同：4
> 
> 时间：2013-04-24T18:27:33.310
> 
> 标签：oracle, delphi, casting, activex, bcd

我有一个很大的问题`TADOQuery`：

这是我的 SQL：

```
select cast(-10 as number(9)) foo, -10 bar 
  from dual 
```

当您添加“foo”字段时，将创建一个 TIntegerField 而不是 TBCDField，因为此时类型已更改：

```
procedure TCustomADODataSet.InternalInitFieldDefs;

    if (F.Type_ = adNumeric) and (F.NumericScale = 0) and
       (F.Precision < 10) then
      FieldType := ftInteger; 
```

功能：

```
function TCustomADODataSet.GetFieldData(Field: TField; Buffer: Pointer;
  NativeFormat: Boolean): Boolean; 
```

此时不考虑信号：

```
 ftAutoInc, ftInteger:
      Integer(Buffer^) := lVal; 
```

TIntegerField的值为`tagVariant`：

(14, 32768, 0, 0, 10, 10, 10, 1.4012984643e-44, 4.9406564584e-323, True, 10, 0.001, 4.9406564584e-323, , $A, $A, $A, $A, $ A, $A, $A, $A, $A, $A, $A, $A, $A'', $A, $A, $A, $A, $A, #10, 10, 10, 10, 10, $A, , $A, $A, $A, $A)

这与 TBCDField 相同：

(14, 32768, 0, 0, 10, 10, 10, 1.4012984643e-44, 4.9406564584e-323, True, 10, 0.001, 4.9406564584e-323, , $A, $A, $A, $A, $ A, $A, $A, $A, $A, $A, $A, $A, $A'', $A, $A, $A, $A, $A, #10, 10, 10, 10, 10, $A, , $A, $A, $A, $A)

foo 值为 10，bar 值为 -10。

这是一个错误吗？
有解决方法吗？
修好了？

我使用 Microsoft OLEDB provider for Oracle 和 Oracle Provider for OLEDB 进行了测试。所有测试均使用 Delphi 6 完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T09:12:44.173

我不知道我是否理解正确，但是尝试这种方式：

```
select cast(replace(-10,'-','') as number(9)) foo, -10 bar 
  from dual; 
```

# sql-server-2008 - Access 安装后 Microsoft.ACE.OLEDB.12.0 “提供程序未注册”

> ID：16199526
> 
> 赞同：0
> 
> 时间：2013-04-24T18:27:57.343
> 
> 标签：sql-server-2008

我在 Windows 64 位 Windows Server(2007) 上有一个 SQL Server 2008。当我使用任务从 SQL Server Management Studio 中的 Excel 文件导入数据时没问题。

然后我从 64-bit office 2010 安装了 Access for OLE DB driver `Microsoft.ACE.OLEDB.12.0`。之后，我可以再使用 Tasks 导入 excel 文件。错误信息是：

```
The provider is not registered on the local machine(system.data) 
```

但`Microsoft.ACE.OLEDB.12.0`很好，可以在代码中使用`OpenQuery`。

使困惑。如何解决这个问题？

# iphone - GKTurnBasedMatch 推送通知非常不一致

> ID：16199528
> 
> 赞同：7
> 
> 时间：2013-04-24T18:27:58.547
> 
> 标签：iphone, ios, push-notification, game-center, gkturnbasedmatch

我正在测试两个设备之间的回合制游戏。据我了解，`[GKTurnBasedMatch endTurnWithNextParticipants:]`例如，发送带有 的回合应该会自动向对手推送游戏中心通知。有时，这会像预期的那样工作：轮到发送并立即在另一台设备上显示横幅通知。一切都很好。

令我困惑的是，其他时候，即使回合本身已正确发送（我可以判断，因为当对手刷新比赛时，比赛是最新的），**没有推送通知进来**。

我的理解有什么漏洞吗？如果我理解正确，不一致的通知应该与我的代码无关，因为这里的问题不是我如何*处理*通知，而是根本没有通知。换句话说，`[handleTurnEventForMatch:]`（一种`GKTurnBasedEventHandlerDelegate`方法）与它没有任何关系（我不认为），因为如果没有收到通知，那么无论如何都不会调用它。

所以，我只是想知道是否有人对此有任何经验。这是否可能是由于我的代码中的某些内容？或者，游戏中心沙盒是否有可能对不一致负责，而我对此无能为力？

任何想法或想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T22:28:38.963

这是 GameCenter 的沙盒模式的问题。为了让您的设备进入沙盒模式，您必须打开/运行您的应用程序并验证游戏中心。如果您说，在您的游戏打开后打开另一个（已发布）游戏，它将离开沙盒模式并返回到常规游戏中心模式。

即使您的游戏在后台运行，只要它是最后一个启用游戏中心的游戏，您就应该正常收到推送通知。但是如果你打开游戏，然后杀死进程，你将不再处于沙盒模式，也不会收到推送通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-06T17:16:50.783

对于那些遇到类似问题的人：这原来是一个游戏中心沙盒问题。它与我的代码无关，并且在 App Store 版本中一切正常。因此，请仔细阅读此处的评论，并确保没有其他因素影响您遇到的任何问题......但要知道，您可能只是遇到了一些您无法控制的 Game Center 沙盒问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T19:35:32.123

我也面临同样的问题。我的游戏停止接收来自 Game Center 的回合事件和回合通知，我完成了游戏并正在测试，但本周，问题开始发生。它就像一个魅力，但突然之间实例开始在几天内没有收到转弯事件。

我正在使用 iOS7 SDK 并以 iOS7 为目标（回合事件处理与以前的 iOS 版本不同，我需要在即将到来的游戏功能中进行交流，这就是我使用 iOS7 的原因）。

然后我做了一个测试应用程序来检查它是否与 iOS6 和以前的 SDK 相同，但没有帮助，它是相同的。所以不要浪费你的时间来升级你的代码到iOS7，希望它能工作，问题就在那里。我也尝试了很多东西，比如重置设备和设置，使用新用户等。

我还通过下载源代码尝试了 Ray Wenderlich 的 iOS 5 回合制游戏教程，但它也不起作用。

问题是，通常当我启动游戏时，游戏会收到回合事件，但在几个回合之后，它就停止了，当它停止接收时，就像永远停止一样。如果我重新加载比赛，我可以获得更新的比赛并且它的数据也会更新，所以我可以转弯。这意味着比赛在游戏中心更新。因此，要么 Game Center 没有将数据推送给用户（这可能是因为当游戏处于后台时用户无法接收来自 Game Center 的通知），或者 GameKit 没有向处理程序触发事件。

我不知道它为什么会发生，或者为什么会开始发生，但我不能像这样发布我的游戏，希望它能在沙盒之外运行。我将尝试更多的事情（比如尝试转提醒 iOS7，看看他们是否将其推送给用户），然后我会询问 Apple 的支持团队。我打算做的另一件事是将我的测试应用程序放到 App Store 中，看看它是否可以在沙盒之外运行。

希望这是一个沙盒问题。

# .net - 修改 jpeg 元数据而不重新采样

> ID：16199529
> 
> 赞同：1
> 
> 时间：2013-04-24T18:28:03.873
> 
> 标签：.net, c#-4.0

我见过几个需要使用[SetPropertyItem](http://msdn.microsoft.com/en-us/library/system.drawing.image.setpropertyitem.aspx)的例子。但是，这会导致在保存图像时重新采样 jpeg 图像，从而降低图像质量。

.NET 是否有一种内置方法可以在不重新采样图像的情况下修改 jpeg 元数据（评论、作者、主题等）？我宁愿不必自己解析 jpeg。

# javascript - 使用 JavaScript 原型并访问基类字段。

> ID：16199530
> 
> 赞同：0
> 
> 时间：2013-04-24T18:28:08.563
> 
> 标签：javascript

我是 JavaScript 中的伪类和原型的新手，我在正确实现它时遇到了一些困难。我想要做的是有一个带有一些字段的基“类”，然后创建该基类的原型，并将我的方法定义为对象文字。我在这样做和只在我的基类中使用单例作为我的方法之间左右为难。我认为虽然这样做更优雅一点，但我认为我实际上并不是每次创建新对象时都创建每个方法。

无论如何，我遇到的一个小问题是在我的方法中引用我的基类的字段。因为当我尝试将它们引用为 this.field 时，这指的是当前函数/范围，但我希望它引用新创建的对象。是否有解决此问题的方法，或者我应该改变创建方法的方式。

下面是一些我认为可以更清楚地说明我在做什么以及我遇到的问题的代码。

```
function BaseClass() {
    this.items[];
    this.fieldOne = "asdasd";
}

BaseClass.prototype = {
    methodOne: function (input) {
        function addElement(a. b) {
            var element = {};
            element.prop1 = a;
            element.prop2 = b;
            //The issue I am having is that items is undefined, how can I refernce the parent class object. 
            this.items.push(element);
        }
        function traverse() {
            //go through a list and add a bunch of elements
            addElement("ASdasd", 324);
        }
    },
    methodTwo: function () {
        //see now fieldOne is asdasd
        console.log("fieldOne" + fieldOne);
    }
}

var forTest = new BaseClass();
forTest.methodTwo(); 
```

所以是的，我希望在父类中有一些可以从任何方法访问的字段，但我宁愿不只是将函数放在我的基类中，这样我就不会在每次从 BaseClass 创建新对象时创建每个方法。是否有解决方法或更好的方法来实现这一点？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:33:11.937

您正在丢失对`this`嵌套函数内部的引用。您可以通过以下方式解决：

```
methodOne: function (input) {
    var self = this;
    function addElement(a. b) {
        var element = {};
        element.prop1 = a;
        element.prop2 = b;
        //The issue I am having is that items is undefined, how can I refernce the parent class object. 
        self.items.push(element);
    }
    function traverse() {
        //go through a list and add a bunch of elements
        addElement("ASdasd", 324);
    }

    // You never called anything?
    // is traverse() what you wanted?
    traverse();
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:34:13.193

```
 methodOne: function (input) {
    function addElement(a. b) {
        var element = {};
        element.prop1 = a;
        element.prop2 = b;
        //The issue I am having is that items is undefined, how can I refernce the parent class object. 
        this.items.push(element);
    } 
```

这里的问题是您遇到了 javascript 设计错误，即`this`在 sub`function`中绑定到错误的对象。通常的解决方法如下：

```
methodOne: function (input) {
  var that = this;
  function addElement(a, b) {
    ...
    that.items.push(element);
  }
} 
```

实际上它绑定到全局对象：

```
var o = {
  f : function(){
    var g = function(){
      this.name = "test";
    };
    g();
  }
};
o.f();
console.log(name); // "test" 
```

# windows-8 - Visual Studio 2012 Ultimate 中没有 javascript 项目

> ID：16199532
> 
> 赞同：0
> 
> 时间：2013-04-24T18:28:25.843
> 
> 标签：windows-8, visual-studio-2012, windows-store-apps

我已经为 Windows 8 商店应用程序安装了 Visual Studio Ultimate 2012，但它没有在新项目中显示 JavaScript。
设置很好，我在使用相同的设置之前已经安装了它，但我现在不知道是什么问题..

我也尝试过 Visual Studio Express，但遇到了同样的问题..还有一件事 BLEND 也不起作用两种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:12:34.287

你找对地方了吗？它们可以“隐藏”在“其他语言”中搜索“新项目”右上角的 javascript 以确定。

确保您在以下更新中也是最新的，这是一个很好的衡量标准

[http://support.microsoft.com/kb/2797912](http://support.microsoft.com/kb/2797912)

[http://www.microsoft.com/en-us/download/details.aspx?id=38188](http://www.microsoft.com/en-us/download/details.aspx?id=38188)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T08:51:50.850

卸载当前的 VS，然后删除所有注册表，最后安装 Vs 2012 Ultimate 后，修复了该问题。

# php - 使用 php mime_parser 获取附件信息

> ID：16199534
> 
> 赞同：1
> 
> 时间：2013-04-24T18:28:29.333
> 
> 标签：php, parsing, email-attachments

我正在尝试从一个 XML 文件中获取信息，该文件作为 php 电子邮件的附件发送。我正在使用 mime_parser.php 来解析电子邮件。这是我正在使用的代码：

```
$email = "";
while (!feof($fd)) {
$email .= fread($fd, 1024);
}
fclose($fd);

//SET UP EMAIL PARSER CLASS
$mime=new mime_parser_class;
$mime->ignore_syntax_errors = 1;
$parameters=array('Data'=>$email,);

//RESULTS GET ADDED TO $decoded VARIABLE
$mime->Decode($parameters, $decoded);

//---------------------- GET EMAIL HEADER INFO -----------------------//

//get the name and email of the sender
$fromName = $decoded[0]['ExtractedAddresses']['from:'][0]['name'];
$fromEmail = $decoded[0]['ExtractedAddresses']['from:'][0]['address'];

//get the name and email of the recipient
$toEmail = $decoded[0]['ExtractedAddresses']['to:'][0]['address'];
$toName = $decoded[0]['ExtractedAddresses']['to:'][0]['name'];

//get the subject
$subject = $decoded[0]['Headers']['subject:'];

$removeChars = array('<','>');

//get the message id
$messageID = str_replace($removeChars,'',$decoded[0]['Headers']['message-id:']);

//get the reply id
$replyToID = str_replace($removeChars,'',$decoded[0]['Headers']['in-reply-to:']);
//---------------------- END GET EMAIL HEADER INFO -----------------------//

//---------------------- FIND THE BODY -----------------------//
//get the message body
if(substr($decoded[0]['Headers']['content-type:'],0,strlen('text/plain')) == 'text/plain' && isset($decoded[0]['Body'])){
    $body = $decoded[0]['Body'];
} elseif(substr($decoded[0]['Parts'][0]['Headers']['content-type:'],0,strlen('text/plain')) == 'text/plain' && isset($decoded[0]['Parts'][0]['Body'])) {
    $body = $decoded[0]['Parts'][0]['Body'];
} elseif(substr($decoded[0]['Parts'][0]['Parts'][0]['Headers']['content-type:'],0,strlen('text/plain')) == 'text/plain' && isset($decoded[0]['Parts'][0]['Parts'][0]['Body'])) {
    $body = $decoded[0]['Parts'][0]['Parts'][0]['Body'];
}
//---------------------- END FIND THE BODY -----------------------// 
```

我找不到有关如何获取附件信息的任何信息。一些例子表明它是标题的一部分，但据我所知不是。如果有人知道附件信息在哪里，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T04:45:29.317

你可以试试这个 PHP Mime Mail Parser[链接](https://code.google.com/p/php-mime-mail-parser/)。

列举的例子：

```
<?php
require_once('MimeMailParser.class.php');

$path = 'path/to/mail.txt';
$Parser = new MimeMailParser();
$Parser->setPath($path);

$to = $Parser->getHeader('to');
$from = $Parser->getHeader('from');
$subject = $Parser->getHeader('subject');
$text = $Parser->getMessageBody('text');
$html = $Parser->getMessageBody('html');
$attachments = $Parser->getAttachments();    
?> 
```

# python - 根据输入生成 N 个输出。Python

> ID：16199536
> 
> 赞同：0
> 
> 时间：2013-04-24T18:28:34.773
> 
> 标签：python, function, operating-system, output

```
import os,random

def randomizer(input,sample_size,output='NM_controls.xls'):

#Input file with query

    query=open(input,'r').read().split('\n')
    dir,file=os.path.split(input)    
    temp = os.path.join(dir,output)    
    out_file=open(temp,'w')

    name_list = 833 #### got this from input

    output_amount = (name_list)/(sample_size) #### = 3.6 but I want the floor value so its fine 
```

* * *

我现在正在编写一个函数，输出的数量取决于输入。所以在我的函数中，它接收一个文件，然后扫描它并对名称和其他数据进行分区。

下一部分互斥并从此列表中随机抽样。我希望它生成一定数量的文件，但这取决于列表中有多少名称。

**无论如何使用'os'模块来创建一定数量的我没有在变量中指定的列表？**

在这种情况下，它将是 3 个输出 ['output_1.txt','output_2.txt','output_3.txt']

*** *抱歉造成混乱！所以我正在使用 OS 模块，因为我想在输入文件所在的同一目录中创建不存在的文件。这是我知道怎么做的唯一方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:46:37.043

如果您想“创建一定数量的列表”（直到运行时才知道该数量），这很容易：

```
my_lists = []
for _ in range(certain_number):
    my_lists.append(make_another_list()) 
```

或者，更简单地说：

```
my_lists = [make_another_list() for _ in range(certain_number)] 
```

或者，如果您有动态数量的输入列表，并且想要为每个列表创建一个输出列表，您甚至不需要计算数量：

```
my_lists = [transform_a_list(input_list) for input_list in input_lists] 
```

显然，这里没有特定于列表的内容。如您所知，除了and函数`list`名称中出现的单词之外，我没有利用您创建一定数量的东西是列表的事实。你可以用同样的方法创建一定数量的字符串、数字、数组、线程、文件、数据库等。`make_another_list``transform_a_list`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:43:21.560

如果您想写入`output_amount`文件（如`the out_file`变量所示），那么以下应该可以工作。

```
for n in range(output_amount):
    outfile = open('%s_%d.txt'%(temp, n), 'w')
    # Now write the data to output file n 
```

如果您想创建一个包含`n`项目的列表，请参阅 abarnert 的答案。

# javascript - 将文本的周期性变化合并到一行中

> ID：16199541
> 
> 赞同：0
> 
> 时间：2013-04-24T18:28:38.600
> 
> 标签：javascript, html, css, text, hyperlink

[尝试将这个想法/解决方案/功能](https://stackoverflow.com/questions/2771789/changing-text-periodically-in-a-span-from-an-array-with-jquery)合并到一个链接中，我没有太多运气，例如：

```
<a href="/" title="index">HOME</a> 
```

在理想的世界中，文本*HOME*将能够在各种其他词之间切换..

任何意见，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:44:01.143

这是一个可能的解决方案

```
<a id="link" href="#" title="home">HOME</a>  

var array = [];

array.push("home");
array.push("away");
array.push("there");
array.push("there");
array.push("back");
array.push("moon");
array.push("stars");

var link = document.getElementById("link");
var index = 0;
var length = array.length;
var period = 1000; // miliseconds
var id;

function changeLink() {
    index += 1;
    if (index >= length) {
        index = 0;
    }

    link.textContent = array[index].toUpperCase();
    link.title = array[index];
}

id = setInterval(changeLink, period); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/x6VmY/)

# mysql - MySQL好友表查询

> ID：16199543
> 
> 赞同：0
> 
> 时间：2013-04-24T18:28:56.960
> 
> 标签：mysql

我有一个朋友表，其中包含这样的列：

```
requester_user_id //the user initiating the request
requested_user_id //the user responding to the request
established //bool, true is 'these two are friends' 
```

我还有其他一些专栏，但它们对于这个问题并不重要。

我需要的是一个查询，它将获取您所有朋友 ID 的列表。问题是，您的 ID 可能在请求者或请求者中，具体取决于发起请求的人。

我觉得必须有一个简单的方法，但如果不做多个`if`s 我就无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:39:30.603

单程：

```
select distinct 
       case requester_user_id 
            when @myid then requested_user_id 
            else requester_user_id 
       end id
from friends
where @myid in (requester_user_id, requested_user_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:32:45.580

```
SELECT distinct id from (
SELECT requested_user_id as id FROM friends where requester_user_id = @myid
UNION
SELECT requester_user_id as id FROM friends where requested_user_id = @myid
) 
```

# ios - 由于 NSObjectInaccessible 异常，无法更新 NSManagedObject

> ID：16199546
> 
> 赞同：1
> 
> 时间：2013-04-24T18:29:00.423
> 
> 标签：ios, objective-c, cocoa-touch, core-data, magicalrecord

我正在构建一个用于显示资产（PDF、视频等）的应用程序。

它首先下载一个 JSON 并将其解析为核心数据对象 <-- 这部分工作正常。

这些对象是一组层次结构的节点，它们在我的模型中设置了关系。每个节点可以是 FILE 或 FOLDER。<--没问题。

然后我在我的 NSManagedObject 子类中内置了实例方法，这些方法将下载与该对象关联的文件（即 PDF）。然后它设置

`self.isAvailable = [NSNumber numberWithBool:YES];`

同时，我有一个显示资产列表的 UITableView。最终它将实时更新，但现在这是我遇到问题的地方。我首先让视图控制器保留一个指向 CoreData 对象的指针，该对象代表它显示的文件夹，但似乎如果上下文得到更新，则指针变得无效（即故障失败）。

核心数据并没有非常具体地说明问题是什么，甚至问题发生在哪里，但是当我设置 isAvailable 时它似乎崩溃了

`*** Terminating app due to uncaught exception 'NSObjectInaccessibleException', reason: 'CoreData could not fulfill a fault for '0x1d5f9e50 <x-coredata://EDE66B97-B142-4E87-B445-76CAB965B676/Node/p58>''`

我觉得问题在于我不应该只保留对核心数据对象的强引用作为我的模型。有没有更好（不那么崩溃）的方法来做到这一点？

我已经开始使用 NSFetchedResultsController 并改用 objectID，但我还没有到任何地方。

```
- (void)populateChildren {

    NSString * urlString = [NSString stringWithFormat:@"%@/%@", [CMPConstants hostURLString], self.SBUCode];

    NSURL *url = [NSURL URLWithString:urlString];

    NSURLRequest * request = [NSURLRequest requestWithURL:url];
    [NSURLConnection sendAsynchronousRequest:request queue:self.downloadQueue completionHandler:^(NSURLResponse * response, NSData * data, NSError * error) {
        if (data) {
            NSDictionary * dict = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
            [self processParsedObject:dict];
        } else {
            NSLog(@"%@", urlString);
        }

    }];
}

#pragma mark - Parse JSON into NSManagedObjects

- (void)processParsedObject:(id)object {
    [self processParsedObject:object depth:0 parent:nil key:nil];
    [[NSManagedObjectContext MR_contextForCurrentThread] MR_saveToPersistentStoreAndWait];
}

- (void)processParsedObject:(id)object depth:(int)depth parent:(Node *)parent key:(NSString*)key {
    if ([object isKindOfClass:[NSDictionary class]]) {

        if (depth == 0) {    

                // Grab content node if depth is 0;
            object = [object valueForKey:@"content"];
        }

            // FIXME: Change this to a real primary key once we get one.
        static NSString * primaryKey = @"name";

            // Look for existing object
        Node * testNode = [Node MR_findFirstByAttribute:primaryKey withValue:[object valueForKey:primaryKey]];

            // Create new node pointer
        Node * newNode;

        if (testNode) {
                // Update existing Node
            newNode = testNode;
        } else {
                // Build a new Node Object
            newNode = [Node MR_createEntity];
            newNode.isAvailable = [NSNumber numberWithBool:NO];
        }

            // Get keys
        NSArray * keys = @[@"name",
                           @"type",
                           @"index",
                           @"size",
                           @"videoDemensions",
                           @"videoId",
                           @"fileName",
                           @"fileType",
                           @"path"];

        if ([[object valueForKey:@"type"] isEqual:[NSNull null]]) {
            NSLog(@"%@", object);
        }

            // Loop to set value for keys.
        for (NSString * key in keys) {

            id value = [object valueForKey:key];

            if (![[object valueForKey:key] isKindOfClass:[NSNull class]]) {
                [newNode setValue:value forKey:key];
            }
        }

            // Set calculated properties.
        [newNode setSbu:[self SBUCode]];
        [newNode setParent:parent];
        [[NSManagedObjectContext MR_contextForCurrentThread] MR_saveToPersistentStoreAndWait];
            // Sync local file.
        if (!newNode.isAvailable.boolValue) {
            [newNode aquireFileInQueue:self.downloadQueue];
        }

            // Process children
        for(NSString * newKey in [object allKeys]) {
            id child = [object objectForKey:newKey];
            [self processParsedObject:child depth:depth+1 parent:newNode key:newKey];
        }

    } else if ([object isKindOfClass:[NSArray class]]) {
        for(id child in object) {
            [self processParsedObject:child depth:depth+1 parent:parent key:nil];
        }
    } else {
            // Nothing here, this processes each field.
    }
} 
```

此方法是 Node 类的实例方法。

```
- (void)aquireFileInQueue:(NSOperationQueue *)queue {

    if ([self.type isEqualToString:@"VIDEO"]) {

            // Videos are available, but not downloaded.
        self.isAvailableValue = YES;
        return;
    }

    if (self.path == nil || self.fileName == nil) {
        NSLog(@"Path or Filename for %@ was nil", self.name);
        return;
    }

        // Build the download URL !! MAKE SURE TO ADD PERCENT ESCAPES, this will protect against spaces in the file name
        // Also make sure to slash-separate the path and fileName
    NSURL * downloadURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@",
                                                [self.path stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                                                [self.fileName stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];

        // Build the download request
    NSURLRequest * downloadRequest = [NSURLRequest requestWithURL:downloadURL];

        // FIXME: Authentication Code for JSON service

        // Show network activity indicator
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

        // Send Asynchronus Request for fileData
    [NSURLConnection sendAsynchronousRequest:(NSURLRequest *)downloadRequest queue:queue completionHandler:^(NSURLResponse * response, NSData * data, NSError * error) {

            // Hide network activity indicatior
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

            // Cast URL Response to HTTPURLResponse
        NSHTTPURLResponse * httpResponse = (NSHTTPURLResponse *)response;

            // If statusCode is 200 (successful) and data is not nil, save data
        if (httpResponse.statusCode == 200 && data) {
            [data writeToURL:[self fileURL] atomically:NO];
            [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                [self setIsAvailable:[NSNumber numberWithBool:YES]];
            }];

        }
    }];
}

- (void)prepareForDeletion {

        // Remove file from Filesystem
    [[NSFileManager defaultManager] removeItemAtURL:[self fileURL] error:nil];
}

- (NSURL *)fileURL {
        // Return local file URL
    return [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@", [Node applicationDocumentsDirectory], self.fileName]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:04:58.380

**我不熟悉 MagicalRecords**

当上下文持有无故障对象（对象存根）但数据库中的实际对象不存在（已删除或从未保存）时，会发生“无法完成故障”错误。

我的第一个建议：
如果您在多线程环境中工作，请尝试保存有故障的对象。
使用`-existingObjectWithId:error:`和获取请求：

```
[fetchRequest setReturnsObjectsAsFaults:NO];
[fetchRequest setIncludesPropertyValues:YES];
[fetchRequest setRelationshipKeyPathsForPrefetching:/*relationships you can afford to prefetch*/]; 
```

我的第二个建议（调试您的问题）：在每次保存到商店之前
打印您`deletedObjects`设置的内容，以查看导致故障的上下文。

我的第三个建议：
合并对主要上下文的更改（我的猜测是 MagicalRecords 会为你做这件事）。

> > 注意 1：可能会隐含删除（例如，您不会`deleteObject:`通过在级联/拒绝模式下设置关系来明确使用）
> > 
> > 注意 2：在多线程环境（AFAIK）中，您无法避免此异常，除非您通过主上下文（使用`parentContext`）或始终使用预取对象（不直接使用关系）传递所有保存。

# mysql - MySQL更新没有更新

> ID：16199547
> 
> 赞同：0
> 
> 时间：2013-04-24T18:29:03.550
> 
> 标签：mysql

```
<?php
require("header.inc.php");
?>

<?php
if (isLoggedIn()) {
    if (isset($_POST['CKey_Button'])) {
        if (!isset($_POST['CKey'])) {
            die("Error: The Character Key field was not set.");
        }
    }

    $CKey = $_POST['CKey_Button'];

    mysql_select_db("samp");

    $query = mysql_query("SELECT `id` FROM `players` WHERE `CharacterKey` = '" . mysql_real_escape_string($_POST['CKey']) . "' LIMIT 1");

    if (mysql_num_rows($query)) {
        mysql_select_db("ucp");
        mysql_query("UPDATE `users` SET `CharacterID` = '" . $CKey . "' WHERE `name` = '" . $user['name'] . "'");
        header("./Dashboard.php");
        exit;
    }
    else {
        header("./index.php");
        exit;
    }
}
else {
    header("./index.php");
    exit;   
}
?> 
```

那是代码，但它没有更新，它只是一个空白屏幕，有谁知道为什么会发生这种情况（我刚刚开始编写 php，所以如果这是一个新手错误，那就太好了）。

编辑：我已经修复它我使用 $CKey 作为按钮而不是实际的键，希望这是有道理的，我也将 = '" . $CKey . "' 更改为 = " . $CKey

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:33:40.863

用于`mysql_error()`查看您的查询是否有任何错误

```
mysql_query($query) or die ('Error updating database: '.mysql_error()); 
```

# .net - 搜索替换什么都不做

> ID：16199551
> 
> 赞同：-5
> 
> 时间：2013-04-24T18:29:18.973
> 
> 标签：.net, vb.net, io, replace

我正在尝试编辑文件夹（textbox4）中的所有 txt 文件。如果它找到搜索的单词 (textbox2)，它将替换为其他 (textbox3)。但是代码什么都不做。

```
Dim mydir As String = TextBox4.Text
Dim savetxt As New List(Of String)
For Each txtfile As String In System.IO.Directory.GetFiles(mydir, "*.txt") 
For Each line As String In System.IO.File.ReadAllLines(txtfile)
If line.Contains(TextBox2.Text) Then
line.Replace(TextBox2.Text, TextBox3.Text)
End If
savetxt.Add(line)
Next
System.IO.File.WriteAllLines(txtfile, savetxt.ToArray)
savetxt.Clear()
Next 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:31:00.153

`string.Replace()`返回新值而不是修改现有实例。如果需要，您需要存储结果：

```
line = line.Replace(TextBox2.Text, TextBox3.Text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:35:42.670

尝试这个：

```
Private Function GetFiles(Path As String) As String()
            Dim Files() As String = IO.Directory.GetFiles(Path)
            Return Files
        End Function

Private Sub ProcessFiles(Files As String(), Find As String, Replace As String)
    Dim txt As String

    For Each file In Files
        txt = IO.File.ReadAllText(file)
        If txt.Contains(Find) = True Then
            IO.File.WriteAllText(file, txt.Replace(Find, Replace))
        End If
    Next
End Sub 
```

* * *

然后像这样实现：

```
Private Sub Initate(Path As String, Find As String, Replace As String)
        'get the files paths
        Dim files() As String = GetFiles(Path)

        'find the text and replaces it
        ProcessFiles(files, Find, Replace)
    End Sub 
```

到 [Find] 、 [Replace] 和 [Path] 是 textbox.text

# selenium - 如何从命令行运行 TestNG 套件

> ID：16199554
> 
> 赞同：0
> 
> 时间：2013-04-24T18:29:37.150
> 
> 标签：selenium, command-line, webdriver, testng

我想从命令行`TestNG Suite`运行`Linux`。我正在使用`eclipse`运行测试，但我有命令行问题。我知道我需要`testng.jar`拥有它，并且我将它放在`/home/karcio/dev/testng-6.4.jar`我的套件 xml 所在的位置`/home/karcio/git/java-test-automation/Automation/test-output/Default suite/TestSuite.xml`。命令我尝试过的，

1.  设置类路径`/home/karcio/dev/testng-6.4.jar`
2.  cd /location 到我的套件 xml 文件：`java org.testing.TestNG TestSuite.xml`

这是我看到的错误：

`Exception in thread "main" java.lang.NoClassDefFoundError: org/testing/TestNG Caused by: java.lang.ClassNotFoundException: org.testing.TestNG`

我是那些路径和类路径的新手，我有点困惑:(

谢谢

一点点更新，我想我做得很好，现在当我进入终端时：`java org.testng.TestNG Test.xml` 我遇到了这个错误：

> 线程“主”org.testng.TestNGException 中的异常：在 org.testng 的 org.testng.TestNG.privateMain(TestNG.java:1010) 的 org.testng.TestNG.checkConditions(TestNG.java:1170) 处未指定源目录.TestNG.main(TestNG.java:997)

所有路径都被导出，所以也许这是错误的版本，`testng.jar`尝试使用版本、、、、，但我认为只有版本在工作，`5.5``6.4``6.5``6.6``6.7``5.5`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T22:49:50.453

类包中有错字 `org.testing.TestNG`

应该 `org.testng.TestNG`

（没有 i 在 .testng. 部分）

[http://testng.org/javadoc/org/testng/TestNG.html](http://testng.org/javadoc/org/testng/TestNG.html)

# sql - 将子查询变成连接

> ID：16199556
> 
> 赞同：0
> 
> 时间：2013-04-24T18:29:40.257
> 
> 标签：sql, join, subquery

我有一个运行速度非常慢的子查询，但我不知道如何将其编写为连接以加快速度。子查询位于 WHERE 子句中的 AND OR 部分下方。

```
select 'Fall ' || (x.syrsdhe_year - 1) "Term",
       count(x.syrsdhe_ssn_id) "Cohort",
       (sum((select '1' from dual where r1.syrsdhe_year = (x.syrsdhe_year))) /         count(x.syrsdhe_ssn_id))*100  "Fall_to_Spring",
       (sum((select '1' from dual where r2.syrsdhe_year = (x.syrsdhe_year + 1))) / count(x.syrsdhe_ssn_id))*100   "One_Year",
       (sum((select '1' from dual where r3.syrsdhe_year = (x.syrsdhe_year + 2))) / count(x.syrsdhe_ssn_id))*100   "Two_Year"

from irdeptq.syrsdhe x
 left join irdeptq.syrsdhe r1
        on r1.syrsdhe_ssn_id = x.syrsdhe_ssn_id
       and r1.syrsdhe_term = '2'
       and r1.syrsdhe_student_level in ('01','02','03','04')
       and r1.syrsdhe_year = (x.syrsdhe_year)
left join irdeptq.syrsdhe r2
        on r2.syrsdhe_ssn_id = x.syrsdhe_ssn_id
       and r2.syrsdhe_term = '1'
       and r2.syrsdhe_student_level in ('01','02','03','04')
       and r2.syrsdhe_year = (x.syrsdhe_year + 1)
left join irdeptq.syrsdhe r3
        on r3.syrsdhe_ssn_id = x.syrsdhe_ssn_id
        and r3.syrsdhe_term = '1'
        and r3.syrsdhe_student_level in ('01','02','03','04')
        and r3.syrsdhe_year = (x.syrsdhe_year + 2)

where x.syrsdhe_enroll_status = '01'
  and x.syrsdhe_attend_status = '0'
  and x.syrsdhe_degree_intent != '3'
  and x.syrsdhe_term = '1'
  and x.syrsdhe_year  >=  '2006'
  and x.syrsdhe_housing is not null
  and ((x.syrsdhe_year = '2006' and x.syrsdhe_pidm not in (select sgrchrt_pidm from sgrchrt where sgrchrt_term_code_eff = x.syrsdhe_banner_term and sgrchrt_chrt_code in ('HRC','SRC')))
   or (x.syrsdhe_year = '2007' and x.syrsdhe_pidm not in (select sgrchrt_pidm from sgrchrt where sgrchrt_term_code_eff = x.syrsdhe_banner_term and sgrchrt_chrt_code in ('HRC','SRC','SDRC')))
   or (x.syrsdhe_year = '2008' and x.syrsdhe_pidm not in (select sgrchrt_pidm from sgrchrt where sgrchrt_term_code_eff = x.syrsdhe_banner_term and sgrchrt_chrt_code in ('HRC','SRC','SDRC')))
   or (x.syrsdhe_year = '2009' and x.syrsdhe_pidm not in (select sgrchrt_pidm from sgrchrt where sgrchrt_term_code_eff = x.syrsdhe_banner_term and sgrchrt_chrt_code in ('HRC','SRC','SDRC')))
   or (x.syrsdhe_year = '2010' and x.syrsdhe_pidm not in (select sgrchrt_pidm from sgrchrt where sgrchrt_term_code_eff = x.syrsdhe_banner_term and sgrchrt_chrt_code in ('HRC','SRC','SDRC')))
   or (x.syrsdhe_year = '2011' and x.syrsdhe_pidm not in (select sgrchrt_pidm from sgrchrt where sgrchrt_term_code_eff = x.syrsdhe_banner_term and sgrchrt_chrt_code in ('HRC','SRC','SDRC','STEM')))
   or (x.syrsdhe_year = '2012' and x.syrsdhe_pidm not in (select sgrchrt_pidm from sgrchrt where sgrchrt_term_code_eff = x.syrsdhe_banner_term and sgrchrt_chrt_code in ('HRC','SDRC','STEM','EDGE')))
   or (x.syrsdhe_year = '2013' and x.syrsdhe_pidm not in (select sgrchrt_pidm from sgrchrt where sgrchrt_term_code_eff = x.syrsdhe_banner_term and sgrchrt_chrt_code in ('HRC','STEM','EDGE','STARS')))
   )
  **and x.syrsdhe_pidm not in (select rpratrm_pidm
                         from rpratrm where x.syrsdhe_banner_term = rpratrm_term_code
                         and x.syrsdhe_pidm = rpratrm_pidm
                         and rpratrm_paid_amt >0
                         and rpratrm_fund_code in ('HCSCH','HCFADJ','HCFULL','HCPRRM','HCBSCH','HCSUPP'))**

  Group By 'Fall ' || (X.Syrsdhe_Year - 1)
  order By 'Fall ' || (X.Syrsdhe_Year - 1) 
```

我已经单独测试了子查询，它快速拉动了必要的 PIDMS 照明，但是一旦我将它写为子查询，它就会减慢整个查询的速度。我过去曾多次遇到过这个问题，所以如果有人知道它背后的逻辑，那将会很有帮助。

数据库管理系统——甲骨文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:47:41.027

`NOT IN`变成 JOIN的常用方法是：

```
SELECT whatever
FROM table1
WHERE somecol NOT IN (SELECT othercol FROM ...) 
```

是：

```
SELECT whatever
FROM table1
LEFT JOIN (SELECT othercol FROM ...) t2 ON somecol = othercol
WHERE othercol IS NULL 
```

根据子查询的结构，有可能将其 WHERE 子句移动到 JOIN 的 ON 子句中，例如

```
SELECT whatever
FROM table1
LEFT JOIN table2 ON somecol = othercol AND table2.date > '2013-04-01' 
```

如果子查询中的行可以有多个匹配项`table1`，则应`SELECT DISTINCT`在子查询中使用以防止结果中出现重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:48:32.313

首先，您似乎`table1`在`from`子句中有一个额外的内容。这可能会导致您的问题。考虑一下：

```
table1_id not in (select table2_id
                             from table2
                             where table1.table1_term = table2_term
                             and table2_paid_amt >0
                             ) 
```

下面将此版本转换为`left outer join`. 然后该`where`子句执行查询的“不存在”部分：

```
select . . .
from table1 t1 left outer join
     table2 t2
     on t1.table1_term = t2.table2_term and
        t2.table2_paid_amt > 0
where t2.table2_id is null 
```

# c# - 我做错了什么还是无法并行提取 zip 文件？

> ID：16199557
> 
> 赞同：12
> 
> 时间：2013-04-24T18:29:40.380
> 
> 标签：c#, .net, asynchronous, tpl-dataflow

我创建了这个来测试并行提取：

```
 public static async Task ExtractToDirectoryAsync(this FileInfo file, DirectoryInfo folder)
    {

        ActionBlock<ZipArchiveEntry> block = new ActionBlock<ZipArchiveEntry>((entry) =>
        {
            var path = Path.Combine(folder.FullName, entry.FullName);

            Directory.CreateDirectory(Path.GetDirectoryName(path));
            entry.ExtractToFile(path);

        }, new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 2 });

        using (var archive = ZipFile.OpenRead(file.FullName))
        {
            foreach (var entry in archive.Entries.Where(e => e.Name != string.Empty))
            {
                block.Post(entry);
            }
            block.Complete();
            await block.Completion;
        }

    } 
```

以及以下用于测试的单元测试：

```
 [TestMethod]
    public async Task ExtractTestAsync()
    {
        if (Resources.LocalExtractFolder.Exists)
            Resources.LocalExtractFolder.Delete(true);
        //  Resources.LocalExtractFolder.Create();
        await Resources.WebsiteZip.ExtractToDirectoryAsync(Resources.LocalExtractFolder);
    } 
```

MaxDegreeOfParallelism = 1 时，一切正常，但 2 时则不行。

```
Test Name:  ExtractTestAsync
Test FullName:  Composite.Azure.Tests.ZipFileTests.ExtractTestAsync
Test Source:    c:\Development\C1\local\CompositeC1\Composite.Azure.Tests\ZipFileTests.cs : line 21
Test Outcome:   Failed
Test Duration:  0:00:02.4138753

Result Message: 
Test method Composite.Azure.Tests.ZipFileTests.ExtractTestAsync threw exception: 
System.IO.InvalidDataException: Unknown block type. Stream might be corrupted.
Result StackTrace:  
at System.IO.Compression.Inflater.Decode()
   at System.IO.Compression.Inflater.Inflate(Byte[] bytes, Int32 offset, Int32 length)
   at System.IO.Compression.DeflateStream.Read(Byte[] array, Int32 offset, Int32 count)
   at System.IO.Stream.InternalCopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at System.IO.Compression.ZipFileExtensions.ExtractToFile(ZipArchiveEntry source, String destinationFileName, Boolean overwrite)
   at System.IO.Compression.ZipFileExtensions.ExtractToFile(ZipArchiveEntry source, String destinationFileName)
   at Composite.Azure.Storage.Compression.ZipArchiveExtensions.<>c__DisplayClass6.<ExtractToDirectoryAsync>b__3(ZipArchiveEntry entry) in c:\Development\C1\local\CompositeC1\Composite.Azure.Storage\Compression\ZipArchiveExtensions.cs:line 37
   at System.Threading.Tasks.Dataflow.ActionBlock`1.ProcessMessage(Action`1 action, KeyValuePair`2 messageWithId)
   at System.Threading.Tasks.Dataflow.ActionBlock`1.<>c__DisplayClass5.<.ctor>b__0(KeyValuePair`2 messageWithId)
   at System.Threading.Tasks.Dataflow.Internal.TargetCore`1.ProcessMessagesLoopCore()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Composite.Azure.Storage.Compression.ZipArchiveExtensions.<ExtractToDirectoryAsync>d__8.MoveNext() in c:\Development\C1\local\CompositeC1\Composite.Azure.Storage\Compression\ZipArchiveExtensions.cs:line 48
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Composite.Azure.Tests.ZipFileTests.<ExtractTestAsync>d__2.MoveNext() in c:\Development\C1\local\CompositeC1\Composite.Azure.Tests\ZipFileTests.cs:line 25
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult() 
```

### 更新 2

这是我自己的并行操作，它也不起作用:) 请记住在 continueWith 中处理异常。

```
public static void ExtractToDirectorySemaphore(this FileInfo file, DirectoryInfo folder)
        {

            int MaxDegreeOfParallelism = 2;
            using (var archive = ZipFile.OpenRead(file.FullName))
            {

                var semaphore = new Semaphore(MaxDegreeOfParallelism, MaxDegreeOfParallelism);

                foreach (var entry in archive.Entries.Where(e => e.Name != string.Empty))
                {
                    semaphore.WaitOne();

                    var task = Task.Run(() =>
                    {
                        var path = Path.Combine(folder.FullName, entry.FullName);

                        Directory.CreateDirectory(Path.GetDirectoryName(path));
                        entry.ExtractToFile(path);
                    });
                    task.ContinueWith(handle =>
                    {
                        try
                        {
                            //do any cleanup/post processing
                        }
                        finally
                        {
                            // Release the semaphore so the next thing can be processed
                            semaphore.Release();
                        }
                    });
                }
                while(MaxDegreeOfParallelism-->0)
                    semaphore.WaitOne(); //Wait here until the last task completes.

            }

        } 
```

这是异步版本：

```
public static Task ExtractToDirectorySemaphoreAsync(this FileInfo file, DirectoryInfo folder)
        {
            return Task.Factory.StartNew(() =>
            {
                int MaxDegreeOfParallelism = 50;
                using (var archive = ZipFile.OpenRead(file.FullName))
                {

                    var semaphore = new Semaphore(MaxDegreeOfParallelism, MaxDegreeOfParallelism);

                    foreach (var entry in archive.Entries.Where(e => e.Name != string.Empty))
                    {
                        semaphore.WaitOne();

                        var task = Task.Run(() =>
                        {
                            var path = Path.Combine(folder.FullName, entry.FullName);

                            Directory.CreateDirectory(Path.GetDirectoryName(path));
                            entry.ExtractToFile(path);
                        });
                        task.ContinueWith(handle =>
                        {
                            try
                            {
                                //do any cleanup/post processing
                            }
                            finally
                            {
                                // Release the semaphore so the next thing can be processed
                                semaphore.Release();
                            }
                        },TaskContinuationOptions.AttachedToParent); // the outher task will wait for all.
                    }

                }
            });
        } 
```

### 更新 3

在handle.Exception 中会抛出以下异常。

```
{"Block length does not match with its complement."}  
[0] = {"A local file header is corrupt."} 
```

必须找出 ZipFile 是否是线程安全的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T00:18:49.917

Disclamer：它只是一个概念证明。

将代码中的示例中的 ZipFile.OpenRead 替换为 ParallelZipFile.OpenRead，所有 4 个单元测试都通过了。

```
 public class ParallelZipFile
    {
        public static ParallelZipArchive OpenRead(string path)
        {

            return new ParallelZipArchive(ZipFile.OpenRead(path),path);
        }
    }
    public class ParallelZipArchive : IDisposable
    {
        internal ZipArchive _archive;
        internal string _path;
        internal ConcurrentQueue<ZipArchive> FreeReaders = new ConcurrentQueue<ZipArchive>();

        public ParallelZipArchive(ZipArchive zip,string path)
        {
            _path = path;
            _archive = zip;
            FreeReaders.Enqueue(zip);
        }

        public ReadOnlyCollection<ParallelZipArchiveEntry> Entries
        {
            get
            {
                var list = new List<ParallelZipArchiveEntry>(_archive.Entries.Count);
                int i = 0;
                foreach (var entry in _archive.Entries)
                    list.Add(new ParallelZipArchiveEntry(i++, entry, this));

                return  new ReadOnlyCollection<ParallelZipArchiveEntry>(list);
            }
        }

        public void Dispose()
        {
            foreach (var archive in FreeReaders)
                archive.Dispose();
        }
    }
    public class ParallelZipArchiveEntry
    {
        private ParallelZipArchive _parent;
        private int _entry;
        public string Name { get; set; }
        public string FullName { get; set; }

        public ParallelZipArchiveEntry(int entryNr, ZipArchiveEntry entry, ParallelZipArchive parent)
        {
            _entry = entryNr;
            _parent = parent;
            Name = entry.Name;
            FullName = entry.FullName;
        }

        public void ExtractToFile(string path)
        {
            ZipArchive value;
            Trace.TraceInformation(string.Format("Number of readers: {0}", _parent.FreeReaders.Count));

            if (!_parent.FreeReaders.TryDequeue(out value))
                value = ZipFile.OpenRead(_parent._path);

            value.Entries.Skip(_entry).First().ExtractToFile(path);

            _parent.FreeReaders.Enqueue(value);
        }
    } 
```

## 单元测试

```
[TestClass]
    public class ZipFileTests
    {
        [ClassInitialize()]
        public static void PreInitialize(TestContext context)
        {
            if (Resources.LocalExtractFolderTruth.Exists)
                Resources.LocalExtractFolderTruth.Delete(true);

            ZipFile.ExtractToDirectory(Resources.WebsiteZip.FullName, Resources.LocalExtractFolderTruth.FullName);
        }

        [TestInitialize()]
        public void InitializeTests()
        {
            if (Resources.LocalExtractFolder.Exists)
                Resources.LocalExtractFolder.Delete(true);

        }

        [TestMethod]
        public void ExtractTest()
        {

            Resources.WebsiteZip.ExtractToDirectory(Resources.LocalExtractFolder);

            Assert.IsTrue(Helpers.DirectoryTools.CompareDirectories(
                Resources.LocalExtractFolderTruth, Resources.LocalExtractFolder));

        }
        [TestMethod]
        public async Task ExtractAsyncTest()
        {

            await Resources.WebsiteZip.ExtractToDirectoryAsync(Resources.LocalExtractFolder);

            Assert.IsTrue(Helpers.DirectoryTools.CompareDirectories(
               Resources.LocalExtractFolderTruth, Resources.LocalExtractFolder));
        }
        [TestMethod]
        public void ExtractSemaphoreTest()
        {

            Resources.WebsiteZip.ExtractToDirectorySemaphore(Resources.LocalExtractFolder);
            Assert.IsTrue(Helpers.DirectoryTools.CompareDirectories(
               Resources.LocalExtractFolderTruth, Resources.LocalExtractFolder));
        }
        [TestMethod]
        public async Task ExtractSemaphoreAsyncTest()
        {

            await Resources.WebsiteZip.ExtractToDirectorySemaphoreAsync(Resources.LocalExtractFolder);
            Assert.IsTrue(Helpers.DirectoryTools.CompareDirectories(
               Resources.LocalExtractFolderTruth, Resources.LocalExtractFolder));
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-03T01:55:47.367

最近从事相同的任务，这是我的结果：

我在我的 Xeon 1socket、8cores、16cpu 上使用**DotNetZip.reduced (Ionic.Zip.Reduced.dll v1.9.1.8) ；**32GB 内存；**SSD驱动器**。

**压缩文件 | 包装尺寸 | 解压文件 | 开箱尺寸**

*   小文件1 | 778 MB | 4,926 个文件 | 1.4GB
*   大文件2 | 6 GB | 29,557 个文件 | 10.0 GB

我有 5 种方法：首先在一个线程中执行所有操作，另外 4 种方法使用 PLINQ 和 TPL Parallel 类。

优胜者是**V4 和 V5**，它们的工作速度比 V1 快 6 倍。以下是详细结果和代码。

*   V1 使用 ExtractAll
*   V2 并行提取条目（不是线程安全的）
*   V3 通过为每个条目打开新文件句柄来并行提取条目
*   V4 仅使用 N+1 个文件句柄并行提取条目
*   V5 最终版

性能结果表 **Zip 文件 | V1，秒 | V2，秒 | V3，秒 | *V4* , 秒 | *V5* ,秒**

*   小文件1 | 32 | 例外 | 8 | 8 | 5
*   大文件2 | 200 | 例外 | 2000 | **35** | **30**

**小文件处理** [![小文件处理](https://i.stack.imgur.com/zyJqR.png)](https://i.stack.imgur.com/zyJqR.png)

**V1 处理大文件** [![V1 处理大文件](https://i.stack.imgur.com/UZL73.png)](https://i.stack.imgur.com/UZL73.png)

**V4 处理大文件** [![V4 处理大文件](https://i.stack.imgur.com/IL5HB.png)](https://i.stack.imgur.com/IL5HB.png)

**V5大文件处理** [![V5大文件处理](https://i.stack.imgur.com/b3nR9.png)](https://i.stack.imgur.com/b3nR9.png)

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Threading;
using System.Threading.Tasks;
using Ionic.Zip;
using Ionic.Zlib;

namespace A1
{
    public static class Program
    {
        static void Main(string[] args)
        {
            Console.ReadKey();

            CancellationToken cancellationToken = CancellationToken.None;

            string path = @"e:\1\";
            string zf1 = Path.Combine(path, "1.zip");
            string zf2 = Path.Combine(path, "2.zip");
            Stopwatch sw = new Stopwatch();

            List<string> zipFiles = new List<string>
            {
                zf1,
                zf2,
            };
            List<Action<string, string, CancellationToken>> methods = new List<Action<string, string, CancellationToken>>
            {
                ExtractAllFilesFromZipFileV1,
                //ExtractAllFilesFromZipFileV2,
                //ExtractAllFilesFromZipFileV3,
                ExtractAllFilesFromZipFileV4,
                ExtractAllFilesFromZipFileV5,
                ExtractAllFilesFromZipFileV4,
                ExtractAllFilesFromZipFileV5,
                ExtractAllFilesFromZipFileV4,
                ExtractAllFilesFromZipFileV5,
            };

            zipFiles.Reverse();
            methods.Reverse();

            zipFiles.ForEach(f => methods.ForEach(m =>
            {
                string fileName = Path.GetFileName(f);
                string targetDirectory = path + Guid.NewGuid().ToString("N");
                sw.Restart();
                // Unzip
                try
                {
                    m(f, targetDirectory, cancellationToken);
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
                sw.Stop();
                Console.WriteLine("{0} processed by {1} in {2} seconds", fileName, m.GetMethodInfo().Name, sw.Elapsed.TotalSeconds.ToString("F3"));
                Thread.Sleep(5 * 1000);
                Directory.Delete(targetDirectory, true);
                Thread.Sleep(5 * 1000);
            }));
        }

        private static void ExtractAllFilesFromZipFileV1(string zipFileName, string targetDirectory, CancellationToken cancellationToken)
        {
            using (ZipFile zipFile = new ZipFile(zipFileName))
            {
                zipFile.ExtractAll(targetDirectory);
            }
        }

        private static void ExtractAllFilesFromZipFileV2(string zipFileName, string targetDirectory, CancellationToken cancellationToken)
        {
            using (ZipFile zipFile = new ZipFile(zipFileName))
            {
                zipFile.Entries
                    .AsParallel()
                    .ForAll(v =>
                    {
                        v.Extract(targetDirectory);
                    });
            }
        }

        private static void ExtractAllFilesFromZipFileV3(string zipFileName, string targetDirectory, CancellationToken cancellationToken)
        {
            using (ZipFile zipFile = new ZipFile(zipFileName))
            {
                int count = zipFile.Entries.Count;

                Enumerable.Range(0, count)
                    .AsParallel()
                    .ForAll(v =>
                    {
                        cancellationToken.ThrowIfCancellationRequested();

                        using (ZipFile zf = new ZipFile(zipFileName))
                        {
                            // Get the right entry to extract
                            zf.Entries
                                .Skip(v)
                                .First()
                                .Extract(targetDirectory);
                        }
                    });
            }
        }

        private static void ExtractAllFilesFromZipFileV4(string zipFileName, string targetDirectory, CancellationToken cancellationToken)
        {
            using (ZipFile zipFile = new ZipFile(zipFileName))
            {
                // Get count of files, files and keep the lock on the file
                int count = zipFile.Entries.Count();

                // Cache instances of ZipFile used by threads
                // Make sure that we have only open zip file not more than N times, where N is maxDop.
                ConcurrentDictionary<int, ZipFile> dictionary = new ConcurrentDictionary<int, ZipFile>();

                try
                {
                    Parallel.For(0, count,
                        () =>
                        {
                            // GetOrAdd. Use existing open ZipFile or open a new one for this thread.
                            return dictionary.GetOrAdd(Thread.CurrentThread.ManagedThreadId, v =>
                            {
                                return new ZipFile(zipFileName);
                            });
                        },
                        (int i, ParallelLoopState loopState, ZipFile zf) =>
                        {
                            cancellationToken.ThrowIfCancellationRequested();

                            // Get the right entry to extract
                            ZipEntry entry = zf.Entries
                                .Skip(i)
                                .First();

                            // Extract to a file
                            entry.Extract(targetDirectory);

                            return zf;
                        },
                        zf =>
                        {
                        });
                }
                finally
                {
                    // Dispose cached ZipFiles
                    foreach (ZipFile zf in dictionary.Values)
                    {
                        zf.Dispose();
                    }
                }
            } // using
        }

        private static void ExtractAllFilesFromZipFileV5(string zipFileName, string targetDirectory, CancellationToken cancellationToken)
        {
            using (ZipFile zipFile = new ZipFile(zipFileName))
            {
                // Get count of files, files and keep the lock on the file
                ICollection<ZipEntry> zipEntries = zipFile.Entries;
                int count = zipEntries.Where(v => !v.IsDirectory).Count();

                // Caclulate max DOP
                int maxDop = (int)1.5 * Math.Min(count, Environment.ProcessorCount);

                List<Tuple<int, long>> entries = zipEntries
                    .Select((v, i) => Tuple.Create(i, v))
                    .Where(v => !v.Item2.IsDirectory)
                    .Select(v => Tuple.Create(v.Item1, v.Item2.UncompressedSize))
                    .ToList();

                // Load balance between threads
                List<List<Tuple<int, long>>> groupedItems = entries.ToBuckets(maxDop, v => v.Item2 + 10 * 1024 * 1024).ToList();

                // Ensure seq reading from zip file.
                for (int i = 0; i < groupedItems.Count; ++i)
                {
                    groupedItems[i] = groupedItems[i].OrderBy(v => v.Item1).ToList();
                }

                // Cache instances of ZipFile used by threads
                // Make sure that we have open zip file not more than N times, where N is maxDop.
                ConcurrentDictionary<int, Tuple<ZipFile, List<ZipEntry>>> dictionary = new ConcurrentDictionary<int, Tuple<ZipFile, List<ZipEntry>>>(maxDop, maxDop);
                ParallelOptions parallelOptions = new ParallelOptions { MaxDegreeOfParallelism = maxDop, };

                try
                {
                    Parallel.For(0, maxDop, parallelOptions,
                        () =>
                        {
                            // GetOrAdd. Re-use existing open ZipFile or open a new one for this thread.
                            return dictionary.GetOrAdd(Thread.CurrentThread.ManagedThreadId, v =>
                            {
                                ZipFile zf = new ZipFile(zipFileName) { ExtractExistingFile = ExtractExistingFileAction.Throw, FlattenFoldersOnExtract = false, ZipErrorAction = ZipErrorAction.Throw, };
                                zf.ExtractProgress += (sender, e) =>
                                {
                                    cancellationToken.ThrowIfCancellationRequested();
                                };
                                return Tuple.Create(zf, zf.Entries.ToList());
                            });
                        },
                        (int j, ParallelLoopState loopState, Tuple<ZipFile, List<ZipEntry>> zf) =>
                        {

                            List<Tuple<int, long>> list = groupedItems[j];
                            for (int n = 0; n < list.Count; ++n)
                            {
                                cancellationToken.ThrowIfCancellationRequested();

                                int i = list[n].Item1;

                                // Get the right entry to extract
                                ZipEntry entry = zf.Item2[i];
                                Debug.Assert(entry.UncompressedSize == list[n].Item2);

                                // Extract to a file
                                entry.Extract(targetDirectory);
                            }

                            return zf;
                        },
                        zf =>
                        {
                        });
                }
                finally
                {
                    // Dispose cached ZipFiles
                    foreach (Tuple<ZipFile, List<ZipEntry>> zf in dictionary.Values)
                    {
                        try
                        {
                            zf.Item2.Clear();
                            zf.Item1.Dispose();
                        }
                        catch (ZlibException)
                        {
                            // There is a well known defect in Ionic.ZLib
                            // This exception may happen when you read only part of file (not entire file)
                            // and close its handle.
                            // Ionic.Zlib.ZlibException: Bad CRC32 in GZIP trailer. (actual(D202EF8D)!=expected(A39D1010))
                        }
                    }
                }
            }
        }

        private static IEnumerable<List<T>> ToBuckets<T>(this IEnumerable<T> list, int bucketCount, Func<T, long> getWeight)
        {
            List<T> sortedList = list.OrderByDescending(v => getWeight(v)).ToList();

            List<long> runningTotals = Enumerable.Repeat(0L, bucketCount).ToList();
            List<List<T>> buckets = Enumerable.Range(0, bucketCount)
                .Select(v => new List<T>(sortedList.Count / bucketCount))
                .ToList();

            foreach (T item in sortedList)
            {
                // MinBy runningTotal
                int i = runningTotals.IndexOfMin();
                // Add to bucket
                runningTotals[i] += getWeight(item);
                buckets[i].Add(item);
            }

            return buckets;
        }

        public static int IndexOfMin<T>(this IEnumerable<T> source, IComparer<T> comparer = null)
        {
            if (source == null)
            {
                throw new ArgumentNullException(nameof(source));
            }

            if (comparer == null)
            {
                comparer = Comparer<T>.Default;
            }

            using (IEnumerator<T> enumerator = source.GetEnumerator())
            {
                if (!enumerator.MoveNext())
                {
                    return -1; // or maybe throw InvalidOperationException
                }

                int minIndex = 0;
                T minValue = enumerator.Current;

                int index = 0;
                while (enumerator.MoveNext())
                {
                    ++index;
                    if (comparer.Compare(enumerator.Current, minValue) < 0)
                    {
                        minIndex = index;
                        minValue = enumerator.Current;
                    }
                }

                return minIndex;
            }
        }

        public static int IndexOfMinBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> selector, IComparer<TKey> comparer = null)
        {
            if (source == null)
            {
                throw new ArgumentNullException(nameof(source));
            }

            if (comparer == null)
            {
                comparer = Comparer<TKey>.Default;
            }

            using (IEnumerator<TSource> enumerator = source.GetEnumerator())
            {
                if (!enumerator.MoveNext())
                {
                    return -1; // or maybe throw InvalidOperationException
                }

                int minIndex = 0;
                TKey minValue = selector(enumerator.Current);

                int index = 0;
                while (enumerator.MoveNext())
                {
                    ++index;
                    TKey value = selector(enumerator.Current);
                    if (comparer.Compare(value, minValue) < 0)
                    {
                        minIndex = index;
                        minValue = value;
                    }
                }

                return minIndex;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:56:37.640

问题是您只用一个句柄打开文件一次。一个句柄有一个读取位置，如果您在同一个句柄上进行并行读取，则读取位置会变得混乱。用多个句柄多次打开文件，你应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-26T13:13:36.557

我同意 Floste 的回答，但我建议采用不同的方法。如果您的文件在 zip 文件中类似于 ~50k：

1) 为每个文件创建一个字节数组队列。2) 队列的每个成员都是一个提取的 zip 文件条目。3）尝试将文件从zip文件中提取到字节数组中，并在提取完成后将其添加到队列中。4）提取线程应该是单线程，没有并行性。5) 当提取线程正在执行它的工作时，创建另一个线程/任务来清空队列。这些任务将从队列中提取数据并将它们写入磁盘。由于它们是不同的文件，因此不会有竞争条件或不可用的资源。

队列可能需要互斥锁或锁。这可能不是最好的方法，但我相信你会得到一些速度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-06T22:29:46.033

我需要对大型存档（约 30 GB，约 45k 可变大小条目）进行并行解压缩，并利用 DotNetZip 提出了这个解决方案：

```
 public static void ParallelExtract(
        string archivePath,
        string destinationPath,
        string password,
        CancellationToken token,
        ProgressReportDelegate progress // Could also be Progress<T> or whatever you prefer.
        )
    {
        if (String.IsNullOrEmpty(archivePath))
            throw new ArgumentNullException("archivePath");

        if (String.IsNullOrEmpty(destinationPath))
            throw new ArgumentNullException("destinationPath");

        Stopwatch elapsed = new Stopwatch();
        Stopwatch progressReportingTimer = new Stopwatch();

        elapsed.Start();
        progressReportingTimer.Start();

        object obj = new object();

        int count = -1;
        long bytesExtracted = 0;
        long bytesTotal = -1;

        List<Task> decompressors = new List<Task>();

        for (int i = 0; i < Environment.ProcessorCount; i++)
        {
            decompressors.Add(Task.Run(() =>
            {
                using (ZipFile zipFile = new ZipFile(archivePath))
                {
                    if (!String.IsNullOrEmpty(password))
                        zipFile.Password = password;

                    zipFile.ExtractProgress += delegate (object zipSender, ExtractProgressEventArgs zipArgs)
                    {
                        // Report progress after each EntryBytesWritten event, as long as it's been at least 250ms since the last report, so as to not overwhelm listeners like a progress bar. 
                        // Fire regardless upon completion (bytesExtracted == bytesTotal) to provide a final update before finishing.
                        if ((zipArgs.EventType == ZipProgressEventType.Extracting_EntryBytesWritten && progressReportingTimer.ElapsedMilliseconds >= 250) || bytesExtracted == bytesTotal)
                        {
                            int percentage = Percentage(bytesExtracted, bytesTotal);

                            lock (obj)
                            {
                                progress?.Invoke(); // <-- Handle your progress updates here.

                                progressReportingTimer.Restart();
                            }
                        }
                    };

                    // Block all threads until we sum the total size of all entries so that when we begin processing on the threadpool we 
                    // can report progress relative to the total.
                    lock (obj)
                        if (bytesTotal == -1)
                            foreach (var entry in zipFile.Entries)
                                bytesTotal += entry.CompressedSize;

                    var array = zipFile.Entries.ToArray();

                    int index;
                    ZipEntry zipEntry;

                    // Iterate through the archive's entries sequentially despite being on multiple threads.
                    while (count < zipFile.Entries.Count && !token.IsCancellationRequested)
                    {
                        index = Interlocked.Increment(ref count);

                        if (index >= zipFile.Entries.Count)
                            return;

                        zipEntry = array[index];

                        Interlocked.Add(ref bytesExtracted, zipEntry.CompressedSize);

                        zipEntry.Extract(destinationPath, ExtractExistingFileAction.OverwriteSilently);
                    }
                }
            },
            token
            ));
        }

        Task.WaitAll(decompressors.ToArray());
    } 
```

* * *

**结果：**

硬件：Intel Core i7-4710HQ @ 3.50 GHz（4 核，8 个超线程），16 GB RAM，(SATA) SSD，Win10x64 1903：

存档：44.5k 条目，~30 GB DEFLATE（存储）

```
Threads:    Time:
-----------------
1           35:20 (NOTE: This is virtually identical to ZipArchive.ExtractAll())
2           22:14
3           18:40
4           16:49
8           14:42 
```

# php - 带有ajax和php问题的jquery datepicker ui

> ID：16199559
> 
> 赞同：-1
> 
> 时间：2013-04-24T18:29:44.343
> 
> 标签：php, jquery, mysql, ajax, datepicker

我想使用 jquery datepicker 来选择一个日期，然后在选择它时根据所选日期从数据库中选择查询我已经寻找并找到了这个问题 [jQuery datepicker with php and mysql](https://stackoverflow.com/questions/6602986/jquery-datepicker-with-php-and-mysql) 他们说我应该使用 ajax 来做它，但我无法理解他们所做的实现！任何人都可以帮助我尝试做类似的事情

```
 <script>

$(function() {

    $( "#datepicker" ).datepicker({minDate: 0, showAnim: "bounce",
     onSelect: function(dateText, inst) {<?php mysql_select_db($database_conn, $conn);
$query_time = "SELECT reservation.R_time FROM reservation WHERE reservation.R_date='"?>dateText<?php "'" ;
$time = mysql_query($query_time, $conn) or die(mysql_error());</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:55:42.093

更改您的 JS 以在 onSelect 中发送 ajax 调用，传递`dateText`.

```
$( "#datepicker" ).datepicker({
    minDate: 0, 
    showAnim: "bounce",
    onSelect: function(dateText, inst) {
        $.ajax({
            type: 'POST',
            url: 'select_time.php',
            data: {date : dateText},
            success: function(resp){
                if(false !== resp){
                    alert(resp);
                }
            }
        });
    }
}); 
```

然后在`select_time.php`

```
<?php
    if(!empty($_POST['date'])):
        $mysqli = new mysqli('connection info'); //mysqli connection
        $stmt= $mysqli->prepare('SELECT reservation.R_time FROM reservation WHERE reservation.R_date = ?'); //prepare the statement
        $stmt->bind_param('s', $_POST['date']); //bind our parameters
        $stmt->execute(); //execute our query
        $stmt->store_result(); // store result so we can check rows
        $stmt->bind_result($resTime); //we only want the reserveration time
        $stmt->fetch(); //fetch the rows
        if($stmt->num_rows() > 0):
            echo $resTime;  //return the time from the database
            $stmt->close(); //close the statement
        else:
            return false; //row doesn't exist, return false
        endif;
    endif;    
?> 
```

这是未经测试的，但我看不出它不应该工作的任何原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T18:40:17.667

我认为你混淆了几件事：

首先，PHP 将始终在页面加载之前运行（因此 jQuery 也是如此），因此在 jQuery 选择器上调用 PHP 将永远不会起作用。

您需要做的是创建一个将在 jQuery 的 onSelect 上触发的 ajax 函数（如果它是一个弹出日历，我通常使用 onClose 事件）。

Javascript：

```
$( "#datepicker" ).datepicker({
minDate: 0, 
showAnim: "bounce",
onClose: function(dateText, inst) {
   $.post('select_time.php?dateText=' + dateText, function(queryResult){
         // do something with the return query
   });
}
}); 
```

PHP页面：

```
$connection = mysqli_connect("localhost","username","password","db");

$sql = "SELECT reservation.R_time FROM reservation WHERE reservation.R_date={$_post['dateText']}";

if ($result = mysqli_query($connection , $sql))
  {
     while ($getData = mysqli_fetch_field($result))
       {
          echo $getData->R_time;
       }
     mysqli_free_result($result);
  }

mysqli_close($connection); 
```

# javascript - HTML 5 Canvas - 文本到多边形

> ID：16199561
> 
> 赞同：1
> 
> 时间：2013-04-24T18:29:57.890
> 
> 标签：javascript, html, canvas

我需要创建一个点数组（多边形），这些点表示在 Javascript 中绘制到画布上的字符串的轮廓。类似于 Java 2D Shape API，您可以在其中从文本创建多边形对象。

关于我如何去做这件事的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:05:32.453

我不知道有任何库可以直接将字符字形转换为画布路径。

但是，是的，这是一个可行的想法，但它不是很直接。

使用 Adob​​e Illustrator 将文本字符转换为路径轮廓。

然后使用 ai->canvas 将 Illustrator 路径转换为 ​​Html Canvas 路径

顺便说一句，ai->canvas 是一个**了不起的库！**——向迈克·斯旺森致敬：

你可以在这里获得图书馆：http: [//blog.mikeswanson.com/post/29634279264/ai2canvas](http://blog.mikeswanson.com/post/29634279264/ai2canvas)

如果您想要的字体提供 svg 版本，您可以使用上一篇文章中的信息避免 Illustrator 步骤： [如何将文本转换为 SVG 路径？](https://stackoverflow.com/questions/7742148/how-to-convert-text-to-svg-paths)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T10:04:07.577

您可能想要结帐`typeface.js`。这包括将 True Type 字体转换为可由 canvas 或 webgl 呈现的字形数据的工具。

# mysql - 如何从 mysql 设置 cakephp 单选按钮？

> ID：16199562
> 
> 赞同：0
> 
> 时间：2013-04-24T18:30:10.717
> 
> 标签：mysql, cakephp, radio-button

这个用于编辑 mysql 记录的 cakephp 表单需要从 mysql 数据库中加载单选按钮的状态。mysql payment_type 是 enum('Account', 'Credit')。所有其他非单选按钮表单输入都从数据库重新加载，payment_type 使用以下方法正确显示在另一个表单上：

```
<?php echo h($purchaseOrder['PurchaseOrder']['payment_type']); ?> 
```

为什么这不能正确设置 payment_type 的单选按钮？

```
$options = array('account' => 'Account', 'credit' => 'Credit');
$attributes = array('legend' => false, 'value' => 'payment_type');
echo $this->Form->radio('payment_type', $options, $attributes); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:44:41.473

在您的属性数组中，您应该分配默认情况下要保持选中的值。

例如，您希望默认选择帐户，然后在值中分配“帐户”。所以你的最终属性将是：

```
$attributes = array('legend' => false, 'value' => 'account'); 
```

# matlab - Matlab - 标记特定点

> ID：16199563
> 
> 赞同：1
> 
> 时间：2013-04-24T18:30:14.943
> 
> 标签：matlab, plot

我有一个由一组向量 {Time1Vector,Height1Vector,Time2Vector,Height2Vector,Time3Vector,Height3Vector} 给出的图表，这些图表使用以下方法绘制：

```
plot(Time1Vector,Height1Vector,'g',Time2Vector,Height2Vector,'b',Time3Vector,Height3Vector,'r'); 
```

剧情：![在此处输入图像描述](https://i.stack.imgur.com/CaN54.jpg)

我想标记图形改变颜色的点，或者实际上，时间/高度数据从 1 变为 2 和 2 变为 3 的点。我怎样才能完成这个必须使它们静止（输入数据是在代码的开头要求，因此无法修复这些点）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:50:32.937

您可以在每个向量的端点上绘制点：

例如

```
plot(Time1Vector,Height1Vector,'g',Time2Vector,Height2Vector,'b',Time3Vector,Height3Vector,'r');
hold on
plot(Time1Vector(end),Height1Vector(end),'k^','markerfacecolor',[1 0 0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:48:26.237

这是一个如何在基本 matlab 图中标记点的示例

```
x= 0:0.001:pi;
y= sin(x);
z = (y<0.9);
z1 = (y>0.4);
z = xor(z,z1);
plot(x,y);hold on
plot(x(z),y(z),'o') 
```

![在此处输入图像描述](https://i.stack.imgur.com/kGHL1.png)

# spring - 在 Spring 项目中使用 AspectJ 拦截 MongoDB 调用

> ID：16199565
> 
> 赞同：1
> 
> 时间：2013-04-24T18:30:25.987
> 
> 标签：spring, aspectj, mongodb-java

我正在使用 Spring 和 MongoDB java 驱动程序，我试图拦截对 mongo DBCursor 对象的所有调用，以在查询被执行之前查看它们。

我一直在尝试使用外部 jar 的 aspject-maven-plugin 来做到这一点。

[http://mojo.codehaus.org/aspectj-maven-plugin/weaveJars.html](http://mojo.codehaus.org/aspectj-maven-plugin/weaveJars.html)

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>aspectj-maven-plugin</artifactId>
    <version>1.4</version>
    <configuration>
         <verbose>true</verbose>
      <privateScope>true</privateScope>
      <complianceLevel>1.5</complianceLevel>
        <weaveDependencies>
        <weaveDependency>
          <groupId>org.mongodb</groupId>
          <artifactId>>mongo-java-driver</artifactId>
        </weaveDependency>
      </weaveDependencies>
    </configuration>
    <executions>
      <execution>
        <goals>
          <goal>compile</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

我已经在使用 Spring AOP 并在 java 代码中配置了 aspecj

```
@EnableAspectJAutoProxy 
```

然后，我将以下内容添加到使用 @Aspect 注释的类中。（其他拦截在我项目源代码中的自定义类上运行良好）

```
@Pointcut("execution(* com.mongodb.DBCursor..*.*(..))")
public void interceptAndLog(ProceedingJoinPoint invocation){

          _loggingService.Info("intercepted DBCursor");

 } 
```

我也尝试用@Before 替换@Pointcut，但都不起作用。

提前致谢，

罗南

# c - 不同位置函数调用的不同答案

> ID：16199566
> 
> 赞同：0
> 
> 时间：2013-04-24T18:30:30.173
> 
> 标签：c, arrays

我有这个代码：

```
//function to delete the occurence of c in s
void squeeze(char s[], int  c) {
  int i,j;
  for(i=j=0;s[i]!='\0';i++)
    if(s[i]!=c)
       s[j++]=s[i];
  s[j]='\0';
}

//function to concatenate string 
void strca(char c[],char b[]){
  int i,j;
  i=j=0;
  while(c[i]!='\0')
    i++;
  c[i++]=' ';
  while((c[i++]=b[j++])!='\0')
    ;
} 
```

现在当我调用 main() 中的函数时

```
int main(void){
 1 char test[]="carmakarchile";
 2  //squeeze(test,'a');
 3 //printf("%s\n",test);
 4 char f[]="Magnificent";
 5 char n[]="King Rex";
 6 strca(f,n);
 7 squeeze(test,'a');
 8 printf("%s\n",test);
 9 printf("%s",f);
  } 
```

给出操作：

> ```
>  King Rex
>    Magnificent King Rex 
> ```

同时删除第 2 行和第 3 行中的注释行并在第 7 行和第 8 行添加注释给了我：

> ```
>  crmkrchile
>       Magnificent King Rex 
> ```

我只想知道为什么以及如何产生差异？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:34:25.127

```
char f[]="Magnificent"; 
```

使数组`f`足够大以容纳 string `"Magnificent"`，包括 0 终止符。

```
char n[]="King Rex";
strca(f,n); 
```

愉快地在数组边界之外写入，调用未定义的行为，显然在这种情况下会覆盖您的其他数组`test`。

如果您声明的数组足够大以容纳连接的结果，

```
char f[32] = "Magnificent"; 
```

例如，一切都会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:37:01.537

您的连接函数写入 c[] 数组。如果要连接字符串，则需要确保为两个字符串分配足够的内存（包括 terminating `\0`）。

现在在您的示例中，您只是“幸运”了 f[] 和 n[] 恰好在内存中彼此相邻，因此当您用空格替换终止 null 时，它似乎是一个连接字符串.

# java - 10.3.0 和 10.3.6 之间的 WebService WSDL 差异

> ID：16199568
> 
> 赞同：0
> 
> 时间：2013-04-24T18:30:43.500
> 
> 标签：java, web-services, wsdl, weblogic-10.x, weblogic11g

我正在开发一个 Web 服务，当我在 Weblogic 10.3.0 上部署它和在 10.3.6 上部署它时，我遇到了它的 WSDL 的差异。基本上，有一个小的变化几乎改变了例如soapUI 解释的内容。

这是我发现的不同之处：

WL 10.3.0：
`<xs:complexType name="auth">
<xs:sequence>
<xs:element minOccurs="0" name="user" type="tns:userPassword"/>
</xs:sequence>`

WL 10.3.6：

```
<xs:complexType name="auth">
<xs:sequence>
<xs:element minOccurs="0" ref="tns:user"/>
</xs:sequence> 
```

如您所见，在 WL 10.3.6 中，它使用 ref 代替，这导致soapUI 以下列方式显示请求：

```
 <ser:auth>
     <ser:user>?</ser:user>
  </ser:auth> 
```

我正在为此实现使用 CXF 和注释。

有没有人知道发生了什么？

提前非常感谢！

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:21:09.230

我能够确定问题所在。问题是在 WS 接口上，我将其中一个参数声明为 @WebParam(name = "user") ，它没有引用我拥有的任何类型。所以我将它更新为我的问题，它在 WSDL 和soapUI 上看起来都很好。

# php - preg_replace 返回空字符串（不匹配）

> ID：16199569
> 
> 赞同：0
> 
> 时间：2013-04-24T18:30:44.780
> 
> 标签：php, regex, preg-replace

我想在字符串上使用 preg_replace，但是虽然字符串不匹配，但我得到一个空字符串作为返回字符串。

```
PHP Code:
    $sql = "k1 LIKE 'n' OR k2 LIKE 'n' OR k3 LIKE 'n' OR k4 LIKE 'n' OR k5 LIKE 'n' OR k6 LIKE '1' ";
    print "SQL: $sql<br>";
    $sql_A = preg_replace("/^([\w]+ LIKE\s?'?.*?'? OR )+ $/", "##$1##", $sql);
    print "=> $sql_A<br>"; 
```

返回：

> ```
> SQL: k1 LIKE 'n' OR k2 LIKE 'n' OR k3 LIKE 'n' OR k4 LIKE 'n' OR k5 LIKE 'n' OR k6 LIKE '1'
> => 
> ```

奇怪的是，正则表达式甚至不匹配。我试图在得到相同结果的同时尽可能地简化字符串。我也可能会在 end-$ 之前添加一个 OR。但是，只要我放下一些或添加一些东西。否则，我会得到正常行为和正确的替换。

有谁知道为什么会这样？也许我犯了一个我没有看到的错误，也许这是一个错误？我迷路了...

（在 LINUX 服务器上使用 PHP 版本 5.3.21）

--- 2013-04-24 21:30 ---

编辑：

如果有帮助，我最初使用的数据是：

```
$sql = "SELECT count(*) AS anz FROM xxx_table LEFT JOIN yyy_table on yyy_table.devo=xxx_table.devo LEFT JOIN zzz_table ON (yyy_table.status=zzz_table.sid AND lang=1 AND yyy_table.for =zzz_table.for) LEFT JOIN kunde k on k.kd_nr = yyy_table.kd_nr LEFT JOIN locations l on l.lok_nr = yyy_table.lok_nr WHERE xxx_table.clear!='Y' AND xxx_table.ign!='Y' AND name NOT LIKE 'Container:%' AND name LIKE '%' AND event_prio LIKE '%' AND zzz_table.show='Y' AND ( k.ikd_nr LIKE '%n%' OR k.such LIKE '%n%' OR k.adr1 LIKE '%n%' OR k.adr2 LIKE '%n%' OR k.ort LIKE '%n%' OR k.strasse LIKE '%n%' )";
$sql_A = preg_replace("/(\((\s*[\w\.\-\`]+ (LIKE\s|=)\s*'?.+?'?\s*OR)* [\w\.\-\`]+ LIKE '%' (OR [\w\.\-\`]+ (LIKE\s|=)\s*'?.+?'?\s*)*\))/i", "", $sql); 
```

再一次，结果是 NULL（不是我学到的空字符串；）（这个 preg_replace 的目的是用 LIKE '%' 模式识别 SQL 语句中的 OR 条件，以删除那些不必要的 OR 条件。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:38:02.733

您的正则表达式的构建方式会消耗大量回溯：

```
 echo preg_ last_ error() 
```

产量`2`( `PREG_BACKTRACK_LIMIT_ERROR`)

你当然可以增加回溯：

```
 ini_set("pcre.backtrack_limit",100000000); 
```

...这会使这个正则表达式不起作用（因为它不匹配），但它至少会返回原始字符串。创建一个更高效的正则表达式似乎更有吸引力，但要实现这一点，我需要一个所需的输入和输出。

**编辑：**

再看一遍，我认为这个正则表达式可能会对您有所帮助：

```
$sql_A = preg_replace(
   "/(\w+ LIKE\s*('(\\\.|[^'\\\]|)*'|[^\s]+))/",
   "##<$1>##",
   $sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:58:42.090

尝试这个：

```
$sql = "k1 LIKE 'n' OR k2 LIKE 'n' OR k3 LIKE 'n' OR k4 LIKE 'n' OR k5 LIKE 'n' OR k6 LIKE '1' ";
$pattern = "~(?>\w++(?>\.\w++)?\h++LIKE\h++'[^']++'\h++OR\h++)*+\w++(?>\.\w++)?\h++LIKE\h++'[^']++'~";
$result = preg_replace($pattern, "##$0##",$sql);
echo '<pre>' . print_r($result, true) . '</pre>'; 
```

# macos - 在 macOS 中从终端打开 Sublime Text

> ID：16199581
> 
> 赞同：490
> 
> 时间：2013-04-24T18:31:35.440
> 
> 标签：macos, terminal, sublimetext3, sublimetext

当我使用终端时`.subl`

它返回`-bash: .subl: command not found`

有人知道如何从 macOS 的命令行打开 Sublime Text 3 吗？

* * *

## 回答 #1

> 赞同：713
> 
> 时间：2013-05-11T08:21:24.367

我终于让它在我的 OSX 盒子上工作了。我使用这些步骤来让它工作：

1.  `subl`从您的 ST 安装进行测试：

    首先，导航到终端中您希望 ST 打开的一个小文件夹，然后输入以下命令：

    ```
     /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl . 
    ```

    *注意：*您可能需要`Sublime\ Text.app`在上面的命令中替换为`Sublime\ Text\ 3.app`或`Sublime\ Text\ 2.app`取决于应用程序在您的`Applications`目录中的存储位置。上述`.`命令末尾的 将打开您所在的当前工作目录（再次确保您位于仅包含几个文件的目录中！）。

    如果您没有打开当前工作目录的 Sublime Text，那么下一组步骤将不起作用。如果什么也没有发生，或者你从终端收到错误，那是因为它找不到 Sublime Text 应用程序。这意味着您必须检查您输入的内容（拼写等）或未安装 Sublime Text！

2.  检查“.bash_profile”：

    现在是时候在您的`PATH`文件夹中创建符号链接了，但是，在我们这样做之前，让我们使用`nano ~/.bash_profile`. 这些是与`subl`在 Sublime Text 的命令行上工作有关的以下行：

    ```
     export PATH=/bin:/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:$PATH
     export EDITOR='subl -w' 
    ```

    第一行设置您希望终端在您的机器上查找二进制文件的位置，我将把我的符号链接存储在`/usr/local/bin`目录中 - 我想您可以将它存储在任何地方，只要您通知终端在哪里查找二进制文件。

    第二行是可选的，只是将 Sublime Text 设置为默认编辑器。该标志`-w`已添加，您可以通过访问 Sublime Text 文档了解有关标志的更多信息：[ST4 subl](http://www.sublimetext.com/docs/command_line.html)、[ST3 subl](http://www.sublimetext.com/docs/command_line.html#ver-3.2)或[ST2 subl](http://www.sublimetext.com/docs/2/osx_command_line.html)

    如果您在关闭此文件后对其进行了任何编辑，则需要运行以下命令：

    ```
     source ~/.bash_profile 
    ```

    编译您新应用的编辑。如果您在获取文件后发现任何错误，请先修复它们，然后再进行最后一步。

3.  创建一个指向 Sublime Text 的符号链接：

    现在在您选择的路径（我使用`/usr/local/bin`）中，您现在输入以下命令：

    ```
     ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl 
    ```

    与您在上面的步骤 1 中输入并验证为工作的`/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl`位置完全相同。作为`/usr/local/bin/subl`您希望符号链接所在的位置 - 必须是`PATH`上述步骤 2 中的位置之一。

    现在，当您导航到要在 Sublime Text 中打开的文件夹或文件时，您现在只需输入`subl`后跟文件名或`.`打开当前工作目录。

* * *

## 回答 #2

> 赞同：410
> 
> 时间：2013-09-17T06:45:16.680

对于 MAC 10.8+：

```
sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl 
```

工作。

* * *

## 回答 #3

> 赞同：198
> 
> 时间：2015-08-02T11:08:07.143

假设：

*   您已经安装了 Homebrew。
*   /usr/local/bin 在你的 $PATH 中。
*   你在优胜美地或 El Capitain。

MacOS Sierra 10.12.5 与 David Rawson 确认的效果一样好，MacOS Sierra 10.12.6 由 Alexander K. 确认。

在终端中运行以下脚本以创建特定的符号链接。

```
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

然后：

```
subl . 
```

点击`Return`它应该会立即打开 Sublime Text。

* * *

## 回答 #4

> 赞同：70
> 
> 时间：2013-10-24T03:24:47.577

我在 Mac OSX Mavericks 上使用 oh-my-zsh 并且符号链接对我不起作用，所以我在 .zshrc 文件中添加了一个别名：

```
alias subl="/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl" 
```

打开一个新的终端，你应该很高兴，然后输入`subl`.

* * *

## 回答 #5

> 赞同：70
> 
> 时间：2013-09-06T22:06:49.617

这对我有用（我正在使用 OS X Mavericks）

首先，创建一个符号链接：

```
sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/bin/subl 
```

现在你可以打开 sublime

```
subl "/a/path/to/the/directory/you/want/to/open" 
```

* * *

## 回答 #6

> 赞同：54
> 
> 时间：2014-01-30T01:51:47.940

我将使用的一个非常简单。

```
open -a "sublime text" [file] 
```

这会立即打开崇高的文本。您可以将要打开的文件指定为可选参数，例如在当前目录中打开“myfile.txt”。

* * *

## 回答 #7

> 赞同：33
> 
> 时间：2017-04-07T19:14:31.367

您可以在终端中创建一个新别名：

```
nano ~/.bash_profile 
```

复制这一行并将其粘贴到编辑器中：

```
alias subl='open -a "Sublime Text"' 
```

点击`control`+ `x`，然后`y`，然后`enter`保存并关闭它。

关闭所有终端窗口并再次打开它。

就是这样，您现在可以使用`subl filename`或`subl .`

**zsh 更新**：

自 macOS 10.15 Catalina 起，默认 shell 已更改为 zsh。

```
nano ~/.zshrc 
```

其余步骤保持不变。

* * *

## 回答 #8

> 赞同：28
> 
> 时间：2014-04-08T13:58:57.483

有一个简单的方法可以做到这一点。它只需要几个步骤，您不需要过多地使用命令行。如果您不熟悉命令行，这就是执行此操作的方法。

***步骤1：找到bin文件以放入subl可执行文件***

1.  打开终端
2.  输入`cd ..`------------这应该返回一个目录
3.  键入`ls`------------以查看目录中的文件列表
4.  输入`cd ..`---------直到你得到一个包含**usr的文件夹**
5.  输入`open usr`---------------这应该打开查找器，你应该看到一些文件夹
6.  打开**bin**文件夹--------这是您将复制您的崇高可执行文件的地方。

***步骤 2：查找可执行文件***

1.  打开**查找器**
2.  在文件下打开一个新的查找器窗口（CMD + N）
3.  导航到**应用程序**文件夹
4.  找到 Sublime Text 并右键单击，这样你会得到一个下拉菜单
5.  点击显示包内容
6.  打开内容/SharedSupport/bin
7.  复制**subl**文件
8.  将它粘贴到我们之前找到的**usr**文件夹中的bin文件夹中
9.  在终端输入`subl`-------------- 这应该打开 Sublime Text

确保它被复制并且它不是快捷方式。如果确实有问题，请将 usr/bin 文件夹作为图标查看，然后将**subl**粘贴到文件夹中的空白区域。图标图像中不应有快捷箭头。

* * *

## 回答 #9

> 赞同：21
> 
> 时间：2017-08-29T20:33:34.583

尝试这个。

```
ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl 
```

* * *

## 回答 #10

> 赞同：17
> 
> 时间：2016-08-17T07:36:16.640

[Sublime Text 3](https://www.sublimetext.com/docs/3/osx_command_line.html)文档中的 Symlink 命令将不起作用，因为`~/bin/`Mac OS X El Capitan 或更高版本的主位置中没有目录。

因此，我们需要将符号链接放在 上，因为*在大多数情况下*`/usr/local/bin`，这条路径会在我们的`$PATH`变量中。

 *因此，以下命令应该可以解决问题：

```
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

正确创建符号链接后，您将能够像这样运行 Sublime Text 3：（`subl .` *。表示当前目录）*

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2014-12-09T09:56:42.367

请注意不要写入`/usr/bin`，而是写入`/usr/local/bin`. 第一个是用于将自己的二进制文件写入系统的应用程序，最新的是用于制作我们自己的系统范围二进制文件的特定用途（这是我们在符号链接时的情况）。

也`/usr/local/bin`可以在之后阅读`/usr/bin`，因此也是覆盖任何默认应用程序的好地方。

考虑到这一点，正确的符号链接将是：

`ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl`

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2017-01-09T08:08:22.020

关闭崇高。运行此命令。它会卸载它。你不会失去你的偏好。然后再次运行它。它会自动绑定`subl`。

```
brew install Caskroom/cask/sublime-text 
```

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2014-07-09T16:41:12.353

在运行 Sublime Text 2 的 OS X Mavericks 中，以下内容对我有用。

```
sudo ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/bin/subl 
```

在查找器中找到文件并将其拖放到终端窗口中很方便，这样您就可以确定路径是正确的，我不是一个庞大的终端用户，所以这对我来说更舒服。然后您可以转到路径的开头并开始添加其他部分，例如速记 UNIX 命令。希望这可以帮助

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2020-09-28T23:10:13.690

**以下对我有用**

```
open -a Sublime\ Text file_name.txt
open -a Sublime\ Text Folder_Path 
```

**您可以使用别名使其事件变得简单，例如**

将以下行添加到您的

> ~/.bash_profile

```
alias sublime="open -a Sublime\ Text $@" 
```

**然后下次您可以使用以下命令打开文件/文件夹**

```
sublime file_name.txt
sublime Folder_Path 
```

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2016-12-22T16:53:11.610

有用 ！！！！在 MacOS Sierra 10.12.2 上对我来说

```
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

并在终端中找到它`subl`

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2016-05-15T19:01:30.503

将此添加到您的 .bashrc 或 .zshrc 是一个简单的解决方案。

```
alias sublime="open -a /Applications/Sublime\ Text.app" 
```

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2013-04-24T18:33:03.630

如果您已将 subl 设置为从命令行调用，则打开当前目录的正确命令是：

`subl .`

“ [OS X 命令行](http://www.sublimetext.com/docs/2/osx_command_line.html)” 是一个关于如何确保一切都设置好的链接。

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2015-11-15T06:34:03.600

除非确实需要，否则不应污染 /usr/bin 目录。对于那些不受分发包管理器管理的二进制文件，我总是使用 /usr/local/bin。为什么？因为如果包管理器得到更新，它总是会替换 /usr/bin 中的文件。

所以我要做的是

`sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl`

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2016-02-02T20:54:58.917

您可以添加一个别名

```
alias subl='/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl' 
```

然后你应该能够打开一个文件夹或任何东西

```
subl <path> 
```

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2021-07-22T14:50:11.113

根据[Sublime 设置文档](https://www.sublimetext.com/docs/command_line.html#mac)

```
echo 'export PATH="/Applications/Sublime Text.app/Contents/SharedSupport/bin:$PATH"' >> ~/.zprofile 
```

工作正常。

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2021-12-12T18:05:32.780

从 macOS Catalina (ver 10.15) 开始使用 zsh。要允许 Sublime 从命令行运行，`.zshrc`请在您的主目录中进行编辑（`cd`不带参数将带您到达那里）并添加以下行：

```
export PATH="$PATH:/Applications/Sublime Text.app/Contents/SharedSupport/bin" 
```

要从命令行运行 Sublime Text，请使用`subl [filename]`

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2016-12-29T18:44:24.293

对于任何想从终端在 Mac 上使用 Sublime 打开文件的人

```
open 'path/file.txt' -a '/Applications/Sublime Text.app' 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2017-07-25T04:06:51.907

这是为了让它作为别名而不是符号链接工作！

这将允许您在终端中运行其他命令而不会中断 subl 会话。在此处使用许多符号链接答案 ( `ln -s`)，导致终端进程在使用 Sublime 文本时持久。如果您想要分离，请在 Bash 配置文件中创建一个别名，如下所示：

1.  `subl`从您的 ST 安装进行测试：

    首先，导航到终端中您希望 ST 打开的文件夹，然后输入以下命令：

    ```
    /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl . 
    ```

    *注意：*您可能需要`Sublime\ Text.app`在上面的命令中替换为`Sublime\ Text\ 3.app`或`Sublime\ Text\ 2.app`取决于应用程序在您的`Applications`目录中的存储位置。上述`.`命令末尾的 将打开您所在的当前工作目录（再次确保您位于仅包含几个文件的目录中！）。

    如果您没有打开当前工作目录的 Sublime Text，那么下一组步骤将不起作用。如果什么也没有发生，或者你从终端收到错误，那是因为它找不到 Sublime Text 应用程序。这意味着您必须检查您输入的内容（拼写等）或未安装 Sublime Text！

2.  检查并更新“.bash_profile”：

    现在在您的 Bash Profile 中添加别名。通过打开它`vim ~/.bash_profile`。这些是与`subl`在 Sublime Text 的命令行上工作有关的以下行：

    ```
    ## For Sublime Text 3 alias
    alias subl='/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl'
    ## For Sublime Text global editor preference **Optional
    export EDITOR='subl -w' 
    ```

    我建议总是在这里评论你的代码`##`。第二行是可选的，只是将 Sublime Text 设置为默认编辑器。该标志`-w`已添加，您可以通过转到 Sublime Text 文档了解有关标志的更多信息：[ST3 subl](http://www.sublimetext.com/docs/3/osx_command_line.html)或[ST2 subl](http://www.sublimetext.com/docs/2/osx_command_line.html)

    如果您在关闭此文件后对其进行了任何编辑，则需要`source`在当前会话中编辑此文件或关闭终端（选项卡）并打开一个新文件。在进入最后一步之前，您可以`source`通过运行命令解决任何错误来获取此文件。`source ~/.bash_profile`

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2014-01-20T20:26:31.380

我要补充一点，如果您从 Sublime Text 2 升级，请先进入 /usr/bin 并删除旧的 subl，然后再按照上述相同的说明进行操作。值得升级。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2015-08-25T08:17:44.087

我只用终端中的一行来实现这一点（使用 Sublime 3）：

```
alias subl='/usr/local/bin/sublime' 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2017-12-05T11:24:53.373

**我正在使用 mac airbook 打开你的终端并输入**

```
 sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/bin/subl 
```

**然后输入简单的 subl 和文件名**

```
 subl index.py 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2019-05-12T17:43:17.523

总结您可以完成它的不同方法：

1.  从终端打开崇高文本

```
open /Applications/Sublime\ Text.app/ 
```

2.  使用崇高文本打开当前路径中的特定文件（或提供您需要打开的文件的路径）

```
open -a /Applications/Sublime\ Text.app/ myFileToOpen.txt 
```

3.  通过引入一个名为“sublime”的新别名来缩短命令并使用它

    一个。打开 bash_profile：

    `nano ~/.bash_profile`

    湾。复制此行以创建别名并保存并重新启动终端

    `alias sublime="open -a /Applications/Sublime\ Text.app"`

    C。用法：apple.txt 将以 sublime 文本打开（必要时提供文件路径）

    `sublime apple.txt`

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-12-06T17:11:12.837

*在默认*路径中创建文件**对我不起作用，**因为该`Menu.sublime-menu`文件已经覆盖了几乎所有其他菜单选项，**只剩**下自定义选项。

对我有用的是在路径中创建以下文件`~/Library/Application Support/Sublime Text 3/Packages/User/Main.sublime-menu`（注意目录*User*而不是*Default*）：

```
[
    {
        "caption": "File",
        "mnemonic": "F",
        "id": "file",
        "children":
        [
            {
                "caption": "Open Recent More",
                "children":
                [
                    { "command": "open_recent_file", "args": {"index": 1 } },
                    { "command": "open_recent_file", "args": {"index": 2 } },
                    { "command": "open_recent_file", "args": {"index": 3 } },
                    { "command": "open_recent_file", "args": {"index": 4 } },
                    { "command": "open_recent_file", "args": {"index": 5 } },
                    { "command": "open_recent_file", "args": {"index": 6 } },
                    { "command": "open_recent_file", "args": {"index": 7 } },
                    { "command": "open_recent_file", "args": {"index": 8 } },
                    { "command": "open_recent_file", "args": {"index": 9 } },
                    { "command": "open_recent_file", "args": {"index": 10 } },
                    { "command": "open_recent_file", "args": {"index": 11 } },
                    { "command": "open_recent_file", "args": {"index": 12 } },
                    { "command": "open_recent_file", "args": {"index": 13 } },
                    { "command": "open_recent_file", "args": {"index": 14 } },
                    { "command": "open_recent_file", "args": {"index": 15 } },
                    { "command": "open_recent_file", "args": {"index": 16 } },
                    { "command": "open_recent_file", "args": {"index": 17 } },
                    { "command": "open_recent_file", "args": {"index": 18 } },
                    { "command": "open_recent_file", "args": {"index": 19 } },
                    { "command": "open_recent_file", "args": {"index": 20 } },
                    { "command": "open_recent_file", "args": {"index": 21 } },
                    { "command": "open_recent_file", "args": {"index": 22 } },
                    { "command": "open_recent_file", "args": {"index": 23 } },
                    { "command": "open_recent_file", "args": {"index": 24 } },
                    { "command": "open_recent_file", "args": {"index": 25 } },
                    { "command": "open_recent_file", "args": {"index": 26 } },
                    { "command": "open_recent_file", "args": {"index": 27 } },
                    { "command": "open_recent_file", "args": {"index": 28 } },
                    { "command": "open_recent_file", "args": {"index": 29 } },
                    { "command": "open_recent_file", "args": {"index": 30 } },
                    { "command": "open_recent_file", "args": {"index": 31 } },
                    { "command": "open_recent_file", "args": {"index": 32 } },
                    { "command": "open_recent_file", "args": {"index": 33 } },
                    { "command": "open_recent_file", "args": {"index": 34 } },
                    { "command": "open_recent_file", "args": {"index": 35 } },
                    { "command": "open_recent_file", "args": {"index": 36 } },
                    { "command": "open_recent_file", "args": {"index": 37 } },
                    { "command": "open_recent_file", "args": {"index": 38 } },
                    { "command": "open_recent_file", "args": {"index": 39 } },
                    { "command": "open_recent_file", "args": {"index": 40 } },
                    { "command": "open_recent_file", "args": {"index": 41 } },
                    { "command": "open_recent_file", "args": {"index": 42 } },
                    { "command": "open_recent_file", "args": {"index": 43 } },
                    { "command": "open_recent_file", "args": {"index": 44 } },
                    { "command": "open_recent_file", "args": {"index": 45 } },
                    { "command": "open_recent_file", "args": {"index": 46 } },
                    { "command": "open_recent_file", "args": {"index": 47 } },
                    { "command": "open_recent_file", "args": {"index": 48 } },
                    { "command": "open_recent_file", "args": {"index": 49 } },
                    { "command": "open_recent_file", "args": {"index": 50 } }
                ]
            }
        ]
    }
] 
```

* * *

## 结果：

（出于安全原因，需要对图像的某些部分进行模糊处理）

[![打开-recent-more.png](https://i.stack.imgur.com/TYILv.jpg)](https://i.stack.imgur.com/TYILv.jpg)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-07-12T09:14:29.290

`sublime`我正在使用 Oh-My-Zshell 并且之前声明的别名对我不起作用，所以我编写了一个简单的 bash 函数，它允许您通过在编辑器中打开当前文件夹从命令行打开 Sublime 。具有指定要从中打开编辑器的文件的附加功能。

```
# Open Sublime from current folder or specified folder
sublime(){
  /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl ./$1
} 
```

在终端中打开当前文件夹的用法：

```
$ sublime 
```

打开特定文件夹的用法：

```
$ sublime path/to/the/file/to/open 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2022-02-20T12:10:00.837

对于 Sublime 4+，使用 Bash 更简单：

```
echo 'export PATH="/Applications/Sublime Text.app/Contents/SharedSupport/bin:$PATH"' >> ~/.bash_profile 
```

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2016-02-26T22:10:50.343

我在 Mac 上，这对我有用：

```
open /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl 
```*

# java - jasperreport 呈现空的pdf

> ID：16199582
> 
> 赞同：0
> 
> 时间：2013-04-24T18:31:41.990
> 
> 标签：java, jasper-reports

有： - 一个报告生成器类（Test.class）。此类使用虚拟非空值填充 JRBeanArrayDataSource。

*   javabean (OficioSipoData)
*   一份简单的报告

我得到的只是一个空白的pdf。

*   检查异常。main() 方法不抛出任何东西
*   传递给 DataSource 的值列表不为空。

谢谢

课程：

```
public class Test {
    public static void main(String[] args)  {
        Test t = new Test();
        try {
            t.dostuff();
        } catch (JRException e) {               
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void dostuff() throws JRException, IOException {        
        Map<String,Object> params = new HashMap<String, Object>();                              
        File f = new File("C:\\report1.jrxml");
        InputStream fis = new FileInputStream(f); 
        JasperReport jrsub = JasperCompileManager.compileReport(fis);

        List<OficioSipoData> l = new ArrayList<OficioSipoData>();
        for (int i = 0; i < 5; i++) {
            addDummyOSD(l,i);
        }       

        Object[] os = l.toArray();
        JRDataSource ds = new JRBeanArrayDataSource(os);        
        JasperRunManager.runReportToPdf(jrsub, params, ds);
        byte[] bytes = JasperRunManager.runReportToPdf(jrsub, params, ds);
        FileOutputStream fos = new FileOutputStream(new File("C:\\report1.pdf"));
        fos.write(bytes);
        fos.close();
        System.out.println("fine");
    }

    private void addDummyOSD(List<OficioSipoData> lista, int i) {
        OficioSipoData osd = new OficioSipoData();
        osd.setDireccion("asasa " + i);
        osd.setFecha("11/11/2013");
        osd.setOperativo("dsdsds" + i);
        lista.add(osd);
    }           
}

public class OficioSipoData {
    private String fecha;
    private String direccion;
    private String operativo;

    public String getDireccion() {
        return direccion;
    }
    public void setDireccion(String direccion) {
        this.direccion = direccion;
    }

    public String getFecha() {
        return fecha;
    }
    public void setFecha(String fecha) {
        this.fecha = fecha;
    }

    public String getOperativo() {
        return operativo;
    }
    public void setOperativo(String operativo) {
        this.operativo = operativo;
    }
} 
```

JRXML

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="c79c5925-d8ca-40e8-bad2-1eaadb05c38f">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <field name="direccion" class="java.lang.String"/>
    <field name="fecha" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="113" splitType="Stretch">
            <staticText>
                <reportElement uuid="e412065c-5a73-462f-9390-0096e54f80b3" x="226" y="23" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[wiii]]></text>
            </staticText>
        </band>
    </title>
    <pageHeader>
        <band height="58" splitType="Stretch">
            <staticText>
                <reportElement uuid="ffc0130b-fee2-4861-b33a-a1078456813f" x="216" y="13" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[waaa]]></text>
            </staticText>
        </band>
    </pageHeader>
    <columnHeader>
        <band splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="132" splitType="Stretch">
            <staticText>
                <reportElement uuid="e34f4c70-8e1c-405b-b3f7-90e11e5e9b7e" x="0" y="4" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[direccion]]></text>
            </staticText>
            <textField>
                <reportElement uuid="ab77eb85-4dfa-44da-aa5e-3ad98b7b426e" x="100" y="4" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{direccion}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:52:22.057

您已调用该方法[`JasperRunManager.runReportToPdf(JasperReport , java.util.Map<java.lang.String,java.lang.Object>, JRDataSource)`](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JasperRunManager.html#runReportToPdf%28net.sf.jasperreports.engine.JasperReport,%20java.util.Map,%20net.sf.jasperreports.engine.JRDataSource%29)两次。

这很*糟糕*，因为在第一次调用期间，引擎已经迭代了集合。您可以`JRDataSource.next()`在第二次调用方法之前检查方法的结果`JasperRunManager.runReportToPdf`。

您正确的代码将是：

```
private void dostuff() throws JRException, IOException {
    Map<String, Object> params = new HashMap<String, Object>();
    File f = new File("C:\\report1.pdf");
    InputStream fis = new FileInputStream(f);
    JasperReport jrsub = JasperCompileManager.compileReport(fis);

    List<OficioSipoData> l = new ArrayList<OficioSipoData>();
    for (int i = 0; i < 5; i++) {
        addDummyOSD(l, i);
    }

    byte[] bytes = JasperRunManager.runReportToPdf(jrsub, params, 
            new JRBeanArrayDataSource(l.toArray()));
    FileOutputStream fos = new FileOutputStream(new File(""C:\\report1.pdf""));
    fos.write(bytes);
    fos.close();
    System.out.println("fine");
} 
```

* * *

您可以查看使用 Exporters 优化代码的[JavaBean Data Sources](http://jasperreports.sourceforge.net/sample.reference/datasource/index.html#javabeandatasources)示例和其他示例（随*JasperReports*库包 -`jasperreports-x.y.z\demo\samples\`文件夹分发）。

# php - 如何在 ci 中动态创建方法

> ID：16199584
> 
> 赞同：0
> 
> 时间：2013-04-24T18:31:47.670
> 
> 标签：php, codeigniter

我正在为我的图片网站编写一个控制面板。我有一个名为 category 的控制器，如下所示：

```
class category extends ci_controller
{
    function index(){}// the default and when it called it returns all categories 

    function edit(){}

    function delete(){}

    function get_posts($id)//to get all the posts associated with submitted category name
    { 

    }
} 
```

我需要的是，当我调用时，我`http://mysite/category/category_name`无需调用 get_posts() 方法即可获得所有帖子，而不必从 url 调用它。

我想在不使用 .haccess 文件或路由的情况下做到这一点。

有没有办法在 CodeIgniter 中动态创建方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:40:09.600

```
function index(){
    $category = $this->uri->segment(2);
    if($category)
    {
        get_posts($category); // you need to get id in there or before. 
    }

    // handle view stuff here

} 
```

我阅读您的请求的方式是您希望索引根据 uri 段中是否存在类别来处理所有内容。你可以那样做，但真的，你为什么要这样做？

坚持不使用框架的正常功能而不解释您为什么不想要的原因是不合逻辑的。如果您有权访问此控制器，则您可以访问路由。那么你为什么不想使用它们呢？

编辑

```
$route['category/:any'] = "category/get_posts"; 
```

那将发送编辑和删除到 get_posts，但您也可以只定义类别路线上方的那些

```
$route['category/edit/:num'] = "category/edit";
$route['category/delete/:num'] = "category/delete";
$route['category/:any'] = "category/get_posts"; 
```

这将解决类别获取之前的编辑和删除问题。由于您只有 2 种冲突的方法，因此这应该不是那么大的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:58:22.527

动态创建方法 yii 是 PHP 框架中最好的。Gii 和 CRUD 非常简单和强大

[http://www.yiiframework.com/doc/guide/1.1/en/quickstart.first-app](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.first-app)

但我是 CI 的忠实粉丝，不是 Yii。yii 也很酷。

但 Codeigniter 有另一种网络解决方案。

[http://formigniter.org/](http://formigniter.org/)在这里。

# jquery - 数组中的每个项目到每个匹配的元素中

> ID：16199594
> 
> 赞同：1
> 
> 时间：2013-04-24T18:32:16.770
> 
> 标签：jquery, arrays, object, loops, each

我正在使用 $.getJSON 返回一个简单的数组，例如：

```
["5","10","15","20"] 
```

然后，我想将这些值中的每一个添加到一个元素中。我了解如何遍历数组并执行功能，例如：

```
$(data).each(function(i,data){      
 console.log(data);         
}); 
```

我无法弄清楚数组中的每个项目如何将其添加到每个匹配的元素中，例如：

```
$('#element h2').each(function(){   
    $(this).before('<h1>' + data + '</h1>')
}); 
```

我希望实现的是：

```
<div id="element">
  <h1>5</h1>
    <h2>Apples</h2>
  <h1>10</h1>
    <h2>Oranges</h2>
  <h1>15</h1>
    <h2>Bananas</h2>
  <h1>20</h1>
    <h2>Kiwis</h2>
</div> 
```

感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:33:54.387

您可以使用索引：

```
$('#element h2').each(function(index) {   
    $(this).before('<h1>' + data[index] + '</h1>')
}); 
```

# api - Foursquare 用户/自我端点返回不正确的朋友数

> ID：16199600
> 
> 赞同：0
> 
> 时间：2013-04-24T18:32:41.653
> 
> 标签：api, foursquare

目前，用户/自己为我的帐户返回一个好友块，计数为 10，而用户/自己/朋友返回的计数为 65。

通常，“count”值表示集合中元素的总数，而不仅仅是返回的元素数。这是一个已知的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T07:41:23.567

该错误已由foursquare api 团队解决。

# regex - .htaccess mod 重写为 10 个字母字母数字“单词”

> ID：16199601
> 
> 赞同：1
> 
> 时间：2013-04-24T18:32:43.510
> 
> 标签：regex, .htaccess, mod-rewrite

我正在尝试将在我的域末尾添加亚马逊 ASIN（10 个字母/数字）的人重定向...

mydomain.com

我希望他们像这样格式化他们的网址：mydomain.com/B008XCFLTM

有人给我：

```
RewriteEngine on
RewriteRule ^[a-zA-Z0-9]{10}/(.*) /check.php?asin=$1 [L,R=301] 
```

这有效，只有当他们像这样放置斜杠时：

mydomain.com/B008XCFLTM/

以下（删除斜线）：

```
RewriteEngine on
RewriteRule ^[a-zA-Z0-9]{10}(.*) /check.php?asin=$1 [L,R=301] 
```

有点工作....我认为它有效，但任何超过 10 个字符的文件都会被重写规则捕获并发送到 check.php。

有什么办法可以限制在 10 个字符以内？因此，如果 mydomain.com/ 之后的任何内容为 9 个字母或更少或 11 个字母或更少，它将正常工作...如果它只有 10 个字符，是否将其重定向到 check.php？

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:13:59.097

您不是要获取 ASIN 编号吗？分组（括号）需要围绕 ASIN，而不是后面的任何内容：

```
RewriteEngine on
RewriteRule ^([a-zA-Z0-9]{10})/?$ /check.php?asin=$1 [L,R=301] 
```

# objective-c - 目标 C 中的 Nil 对象引用

> ID：16199602
> 
> 赞同：3
> 
> 时间：2013-04-24T18:32:44.280
> 
> 标签：objective-c, cocoa-touch, ios6, null

我从外部类调用类方法以获得对象引用，在本例中是对 UIImage 的引用。我可以成功调用它并从内部取回它`myOtherClass`，但是当我从 调用方法时`myClass`，它总是返回 nil。

```
@implementation myClass
...
- (UIImage *) gethThumb: (UIImage *) originalImage {

     // always comes back nil:
     UIImage* thumb = [MyOtherClass makeThumb: originalImage];
     return thumb;
}
...
@end

@implementation MyOtherClass

 ...
+ (UIImage*) makeThumb: (UIImage *) fullImage  {
    CGSize imageSize = [fullImage size];
    int shortestEdge = MIN(imageSize.width, imageSize.height);

    CGRect rect = CGRectMake((imageSize.width - shortestEdge)/2, (imageSize.height - shortestEdge)/2, shortestEdge, shortestEdge);
    CGImageRef imageRef = CGImageCreateWithImageInRect([fullImage CGImage], rect);
    UIImage *thumb = [UIImage imageWithCGImage:imageRef]; 
    CGImageRelease(imageRef);

    CGSize thumbsize = CGSizeMake(180, 180);
    UIGraphicsBeginImageContext(thumbsize);
    [thumb drawInRect:CGRectMake(0, 0, thumbsize.width, thumbsize.height)];
    UIImage *scaledThumb = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();

    //scaledThumb is not nil here:
    return scaledThumb;
}
...
@end 
```

我逐步查看了这个值，我可以看到它在 makeThumb 方法中指向一个有效的内存地址，但是一旦它返回了指向外部类的指针，内存地址突然变成了 0。

我尝试将其编写为实例方法并实例化一个对象，然后使用调用该方法

```
thumb = [self.myInstanceOfOtherClass makeThumb: originalImage]; 
```

并更改方法以接受对象引用：

```
UIImage *thumbRef = nil;
thumb = [self.myInstanceOfOtherClass makeThumb: originalImage thumbRef:thumbRef]; 
```

-- 在 myOtherClasss 中：

```
- (UIImage*) makeThumb: (UIImage *) fullImage thumbRef:(UIImage *) thumbRef {
    ...
    thumbRef = scaledThumb;
    ...
} 
```

...我认为这会阻止 ARC 丢失对对象的引用（如果这就是这里发生的情况）。

我对Objective C比较陌生，我希望有人能向我解释为什么会这样。对象是否在返回外部类之前被释放？我是否必须将其转换为外部类中强大的属性，以便引用不会被丢弃？

忘了提一下：引用指向的是从 UIImagePickerControllerDelegate 方法 didFinishPickingMediaWithInfo 中对相机图像的引用创建的图像。在创建此拇指之前，Camera UIView 将被关闭。我想也许这就是我失去参考的原因。

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-16T18:49:41.467

您从未为图像分配内存。请执行下列操作：

```
UIImage *myimage =[ [ UIImage alloc] init]. 
```

# jquery - 在标签后立即选择 div

> ID：16199607
> 
> 赞同：0
> 
> 时间：2013-04-24T18:33:04.323
> 
> 标签：jquery

我需要在 :first 标签之后立即向 div 添加一个类。

我的 HTML 是这样的：

```
<label class="twc-first active">3DTV</label>
<div class="content mobile">
    <ul class="content">
    </ul>
    <h3>Secondary Topic Content</h3>
    <ul class="secondaryContent">
    </ul>
</div>

<label>Auto HD</label>
<div class="content">
    <ul class="content">
    </ul>
    <h3>Secondary Topic Content</h3>
    <ul class="secondaryContent">
    </ul>
</div> 
```

我已经在使用 jQuery 来查找 label:first 并添加类 twc-first 和 active。我现在需要的是抓住

```
<div class="content"> 
```

并使它：

```
<div class="content mobile"> 
```

紧接着

```
<label class="twc-first active">. 
```

我已经尝试了 , 等的多种组合[`.closest()`](http://api.jquery.com/closest/)，[`.next()`](http://api.jquery.com/next/)但没有运气。

我认为这很接近，但绝对不是没有雪茄。（在这一点上，前两行工作得很好）

```
$('.twc-FAQTopics label:first').addClass('twc-first').addClass('active');
$('.twc-FAQTopics label:last').addClass('twc-last');

$('.twc-FAQTopics label:first').next('div.content').addClass('mobile'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:46:32.953

[`.next()`](http://api.jquery.com/next/) ***仅***当`div`紧随其后`label`。

`label`如果在和之间有另一个元素`div`，它将不起作用。
演示：http: [//jsfiddle.net/dirtyd77/uPHk6/6/](http://jsfiddle.net/dirtyd77/uPHk6/6/)

否则，您将不得不使用[`.nextAll()`](http://api.jquery.com/nextAll/)：

`$('label:first').nextAll('div:eq(0)').addClass('classHere')`

演示：http: [//jsfiddle.net/dirtyd77/uPHk6/7/](http://jsfiddle.net/dirtyd77/uPHk6/7/)

* * *

***更新：***

您还可以使用[`Next Siblings Selector (~)`](http://api.jquery.com/next-siblings-selector/)：

```
//without :first in div:first, it will return all subsequent divs
$('label:first ~ div:first').addClass('classHere'); 
```

演示：http: [//jsfiddle.net/dirtyd77/uPHk6/10/](http://jsfiddle.net/dirtyd77/uPHk6/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:34:23.783

您可以使用`.next()`从标签中查找 div。我看不出有任何理由`:first`用作选择器，因为第一个标签已经有一个类，而第二个标签没有。

```
$('label.twc-first').next('div.content').addClass('someClass'); 
```

[在此处查看行为](http://jsfiddle.net/z2tQV/5/)

# c++ - 试图将文件读入 char 数组

> ID：16199608
> 
> 赞同：0
> 
> 时间：2013-04-24T18:33:04.813
> 
> 标签：c++, arrays, char

我正在尝试将文件中的所有字符读入数组。假设所有变量都被声明，为什么所有字符都没有被读入我的数组。当我输出“storeCharacters[]”数组中的一些字符时，会返回垃圾。请帮忙。

这是我的功能：

```
void countChars(ifstream& input, char storeCharacters[])
{
int i = 0;
    while( !input.eof() )
    {
        input.get(storeCharacters[i]);
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:35:15.200

在 while 循环之后尝试添加`storeCharacters[i] = '\0'`到 null 终止字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T00:10:30.560

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
#include <cstdlib>

using namespace std;

void getFileName(ifstream& input, ofstream& output)  //gets filename
{
string fileName;

cout << "Enter the file name: ";
cin >> fileName;
input.open(fileName.c_str());   
if( !input )
    {
        cout << "Incorrect File Path" << endl;
        exit (0);
    }
output.open("c:\\users\\jacob\\desktop\\thomannProj3Results.txt");
}

void countWords(ifstream& input)  //counts words
{
bool notTrue = false;
string words;
int i = 0;

while( notTrue == false )
{
    if( input >> words )
    {
        i++;
    }
    else if( !(input >> words) )
        notTrue = true;
}
cout << "There are " << i << " words in the file." << endl;
}

void countChars(ifstream& input, char storeCharacters[], ofstream& output)  // counts characters
{
int i = 0;

        while( input.good() && !input.eof() )
        {
                input.get(storeCharacters[i]);
                i++;
        }
        output << storeCharacters[0];
}

void sortChars()  //sorts characters
{
}

void printCount()  //prints characters
{
}

int main()
{

ifstream input;
ofstream output;

char storeCharacters[1000] = {0};

getFileName(input, output);
countWords(input);
countChars(input, storeCharacters, output);

return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T20:36:19.110

如果您知道文件的最大大小，则可以轻松解决您的问题，然后只需将数组设置为具有该大小并使用`\0`.

假设您的文件中的最大字符数是`10000`.

```
#define DEFAULT_SIZE 10000
char  storeCharacters[DEFAULT_SIZE];
memset (storeCharacters,'\0',DEFAULT_SIZE) ; 
```

下面的帖子应该是使用缓冲区读取文件的正确方法，它具有内存分配以及您需要知道的所有内容：

[将文本文件读入 C 中的缓冲区的正确方法？](https://stackoverflow.com/questions/2029103/correct-way-to-read-a-text-file-into-a-buffer-in-c)

# python - Python 的 freeze.py 无法在 Windows 上安装

> ID：16199613
> 
> 赞同：1
> 
> 时间：2013-04-24T18:33:16.203
> 
> 标签：python, python-3.x

我一直在寻找`freeze.py`应该在 Python 3.3 Windows 安装中与 Python 3 捆绑在一起的实用程序（尽管已安装`distribute`并`pip`已安装），但尚未找到。该实用程序可以直接从 Python svn 存储库下载[，](http://svn.python.org/view/%2acheckout%2a/python/trunk/Tools/freeze/freeze.py)但我想知道：是否`freeze`附带标准的 Windows Python 3 安装？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T19:14:29.347

`freeze`看起来该工具不附带 Python 的 Windows 二进制安装。这显然是有充分理由的。根据源代码树中的`freeze` [自述文件：](http://hg.python.org/cpython/file/3.3/Tools/freeze/README#l194)

> 在 Windows 95 或 NT 下，您*必须*使用 -p 选项并将其指向 Python 源代码树的顶部。

如果您阅读了整个部分，可以归结为：在 Windows 上，`freeze`仅当您从源代码构建 Python 并且生成的树用于冻结时才有效。因此，没有充分的理由为您`freeze`提供二进制安装。

* * *

同时，我可能一开始就应该问这个，但是……你确定你`freeze`一开始就想要吗？

freeze 实用程序非常过时（您可能已经从 README 中猜到需要 VC++ 5.0、Windows 95 或 NT 4.0 等）。它也从未在 Windows 上运行得那么好（正如您从将其描述为实用程序“......为 Unix 系统编译可执行文件”的文档中看到的那样）[。](http://wiki.python.org/moin/Freeze)而且有很多事情它不能处理，或者处理不好。在这一点上，应该更多地将其视为示例代码而不是有用的工具。

有许多第三方替代品：[`cx_freeze`](http://cx-freeze.sourceforge.net)、[`py2exe`](http://www.py2exe.org)、[`PyInstaller`](http://www.pyinstaller.org)等。如果您在[PyPI 中搜索“冻结”](https://pypi.python.org/pypi?:action=search&term=freeze&submit=search)（以及其他看起来合理的术语），您会发现很多这样的替代品。如果您的目标是从您的 Python 脚本中创建一个独立的可执行文件（顺便说一句，`freeze`这在 Windows 上永远无法实现），请尝试其中的一些并选择您最喜欢的一个。

如果您的目标不同，那么正确的工具也会有所不同——您最好使用`venv`或只是压缩用户站点包目录或创建本地 PyPI 服务器。

* * *

在评论中，你说：

> 我真正想要的是一种将 Python 代码转换为 C 代码的工具。显然，这是不可能的。

这不是*不可能*的，只是不是`freeze`（或其继任者/竞争对手）所做的。[Cython](http://www.cython.org)几乎将 Python 的严格超集编译为 C 代码，尽管它是使用 Python 运行时对象的 C 代码（除非您使用 C 类型显式静态声明变量和函数）。如果 C++ 是 C 的可接受替代方案，[Shed Skin](http://code.google.com/p/shedskin/)编译 Python 2.6 的受限子集（使用本机 C++ 对象，并使用类型推断，因此您不必静态声明您的类型）。

问题是为什么要将 Python 代码编译为 C。

如果您希望优化一些慢速代码，Cython 非常适合加速小段瓶颈代码。这需要一些努力（决定将什么转移到 Cython，放入什么静态类型声明等），但付出的回报曲线相当稳固。Shed Skin 所付出的努力要少得多——如果它有效，它只会自动加速一切——但这也意味着你一开始就不能编写很多惯用的 Python 代码。但实际上，在查看其中任何一个之前，您应该考虑[PyPy](http://pypy.org)，它是 Python 2.7.3（希望很快 3.3）在 JIT 编译解释器中的完整实现，它通常提供类似的加速，几乎没有任何折衷。或者，您可能只需要重写慢代码以利用已经优化的库（`numpy`而不是映射到列表，`itertools`而不是显式循环，`lxml`而不是`html.parse`，...）。

如果您正在寻找可以直接与 C 代码交互的 Python 代码，而无需`ctypes`担心（或手动构建 Python 绑定），Cython 再次得分。Cython 代码可以有效地本地调用 Python 代码和 C 代码，编译器使这一切都像魔术一样工作。

如果您希望获得可以阅读、维护和改进的 C 代码……那您就太不走运了。而这可能实际上是不可能的。惯用的 Python 代码与惯用的 C 代码是如此不同，以至于很难想象如何将一种代码翻译成另一种。

* * *

如果您想知道根本问题是什么：

据我所知，`freeze`对事物的布局做了很多假设。拥有任何可以构建 C 扩展模块和嵌入应用程序的 Python 安装应该就足够了，但事实并非如此，因为`freeze`在幕后并期望构建以特定方式工作。几乎每个 *nix 平台上的标准二进制安装最终看起来都符合`freeze`预期*，但 Windows 上的标准二进制安装看起来完全不同。

使用 Windows 符号链接（至少如果你有 Vista 或更高版本以及具有现代版本 NTFS 的驱动器）来破解所有东西并不是不可能的`freeze`（我发现一个博客有人用 2.7.1 做到了这一点...... )，但实际上，我认为不值得尝试。这将是很多工作（尤其是如果您只是在学习这些东西），并且不能保证您不会立即遇到另一个问题。

* 这实际上不是真的。在 Mac 上，Apple 预装的 Python 和 python.org 上的二进制安装程序实际上都为您提供了作为 Mac 框架组织的文件——但它们提供了一堆模拟传统布局的符号链接，这已经足够好了。在大多数 Linux 发行版和许多其他平台上，二进制 python 包根本不包含任何开发文件——但是一旦你安装了一个名为 python-devel 之类的附加二进制包，那么你就得到了正确的布局。无论如何，这些对你来说都不重要，因为如果你想了解 dpkg 依赖项或框架构建，你就不会使用 Windows，对吧？

# list - 快一个；在哪里可以找到用于批处理脚本的斜杠命令列表？

> ID：16199614
> 
> 赞同：1
> 
> 时间：2013-04-24T18:33:18.503
> 
> 标签：list, batch-file

如果你能帮助我，我有一个简短的问题要问大家，我将不胜感激。我今天早上学习了批处理脚本，虽然我相信我已经掌握了很多概念——我已经开始为我的工作制作自己的功能批处理脚本——

我想知道：
**是否有我在使用批处理脚本时看到的那些“斜线”命令的列表？**

例如：

*   `/A`= 算术
*   `/p`= 用户输入
*   `/D`（我不知道它到底代表什么，但我制作了一个脚本，我使用 cd /DC 可以更快地更改目录:...）

如果有人能帮我找到这个，我将不胜感激。我一直在寻找这些命令分散的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:40:48.360

查看[**AllHelp**](http://www.robvanderwoude.com/allhelp.php)：创建所有批处理命令的 html 文档页面的批处理脚本。您也可以从该链接下载已创建的页面。

该页面包含每个命令的内置文档，全部在一个页面中，可在您选择的浏览器中搜索。

当然，Rob van der Woude 的网站本身就是与批处理相关的所有内容的巨大资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:54:51.303

正如其他人已经说过的那样，“斜杠”不是命令，而是命令的选项（开关）。你的问题让我想起了我曾经为我编写的批处理文件设计开关时使用的程序。该程序在 HELP 命令的输出中搜索所有命令，并报告在哪些命令中找到了给定的开关。

```
@echo off
setlocal EnableDelayedExpansion

rem SeekSwitch.bat - Antonio Perez Ayala

if "%~1" neq "" if "%~1" neq /? goto begin
echo Seek for given switches in DOS commands displayed by HELP
echo/
echo SeekSwitch switch1 switch2 ...
echo/
echo/
echo Creating the COMMAND.TXT help files for all commands, if not exists

pushd "%~P0"
for /F "skip=2 delims=" %%a in ('help ^| more /T8') do (
   set "line=%%a"
   if "!line:~0,2!" neq "  " (
      for /F %%b in ("%%a") do (
         if not exist "%%b.txt" (
            echo Creating "%%b.txt" help file...
            help %%b > "%%b.txt"
         )
      )
   )
)
popd
goto :EOF

:begin

pushd "%~P0"
rem Insert a "\" prefix before each switch
set switches=
for %%a in (%*) do set "switches=!switches!\%%a "
rem Seek the switches in the help files
findstr /I "%switches%" *.txt
popd 
```

例如，要知道在哪些命令中使用了 /A 和 /P 开关：

```
SeekSwitch /A /P 
```

当这个程序在没有参数的情况下执行时，它会创建用于后验搜索的辅助文件。但是，HELP 命令只是用 /? 执行给定的命令。switch 并且有几个命令不会以这种方式显示帮助（例如 DISKPART），因此您应该在这些情况下取消这些命令，甚至在某些情况下使用 Ctrl-C 取消 SeekSwitch.bat 本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T20:10:11.850

您使用了错误的术语，不存在通用的“斜杠命令”，即“ **X** ”命令的开关（参数）。例如**/A**和**/P**是**SET**命令的参数，所以您需要做的就是在控制台上查看命令帮助：

```
Set /? 
```

**/D**开关相同， **DIR**和**FOR**命令使用它：

```
Dir /?

For /? 
```

当然**/D**开关对**DIR**命令做一件事，而在将它用于**For**命令时做另一件事，就像我说的那样，它不是通用运算符/开关。

您可以查看控制台上的**帮助**命令以查看大量可用命令，并且每个命令都有其帮助开关**/?** .

这是一个很棒的站点，您可以在其中了解有关任何命令的使用的所有信息：http: [//ss64.com/nt/](http://ss64.com/nt/)

在这里您可以了解有关如何使用批处理语法和运算符的所有内容：http: [//ss64.com/bash/syntax.html](http://ss64.com/bash/syntax.html)

您也有 Rob Van Der woude 站点，您可以在其中找到许多扩展代码示例：[http ://www.robvanderwoude.com/batchfiles.php](http://www.robvanderwoude.com/batchfiles.php)

# android - GridLayout、TableLayout 或 GridView 中单元格的边框线？

> ID：16199625
> 
> 赞同：10
> 
> 时间：2013-04-24T18:33:42.737
> 
> 标签：android, android-gridview, android-tablelayout, android-gridlayout

我正在尝试为我的应用程序中的某些项目创建一个表格/网格，我希望在每个单元格周围都有一个边框来划分项目，并使设置与项目保持一致的关联。这个应用程序将用于工业环境中，可能会有不熟悉 Android 的人需要使用它，因此尽量让它变得简单。

表格/网格将包含`TextView`、`EditText`、`Spinner`和`Button`, 并且也可以滚动（通过`ScrollView`父级）。

我读到了`GridView`，发现它（似乎）只能以编程方式获取项目，如果我错了，请纠正我。我觉得这是不必要的，因为我知道我想要什么以及在哪里。另外，我还没有尝试以编程方式将项目添加到布局中，所以我想我会先尝试其他选项。此外，如果自动显示边界线，或者您是否可以显示它们，[`GridView`文档](http://developer.android.com/reference/android/widget/GridView.html)并没有说明一种或另一种方式。

我从 a 开始，`TableLayout`并且能够使除边界线之外的所有东西都可以工作。我试图`android:divider`得到线路，但没有奏效。我的一个想法是创建一堆`TextView`具有黑色背景和~2dp 宽度/高度的 s 来制作我自己的边框线。不过，这感觉像是一种巨大的浪费。然后我还阅读了[TableLayout 文档](http://developer.android.com/reference/android/widget/TableLayout.html)，发现：**“TableLayout 容器不会为其行、列或单元格显示边框线。”**

然后我尝试了`GridLayout`，结果与`TableLayout`. 我试过了`padding`，`margins`也没有用。此外，[GridLayout 文档](http://developer.android.com/reference/android/widget/GridLayout.html)指出：**“网格由一组无限细的线组成，这些线将查看区域分成单元格。”**

我的问题是：

1.  是否有我错过的属性`TableLayout`或者`GridLayout`会通过 xml 给我边界线？

2.  如果没有，那么`GridView`会给我我想要的台词吗？

3.  我能否将我想要的所有以前提到的项目添加到`GridView`?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T19:40:04.213

实际上，我可以通过`android:background="#000000"`在`GridLayout`视图中设置，然后在子项中设置`android:background="#8CDD81"`（只是一些绿色）并结合`android:layout_margin="2dp"`我能够获得我想要的“网格”线来实现所需的外观。不过，感谢 CommonsWare 让我想到了一个新的方向，最终变成了一个解决方案。

**编辑：** 这并不像预期的那样工作。您需要`android:layout_alignLeft/Right`这些只能通过`RelativeLayout`才能获得子项目的正确宽度。还没有使用这个想法测试这个，`child items`在.`RelativeLayout``GridLayout`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T18:39:03.487

> 是否有我在 TableLayout 或 GridLayout 中错过的属性会通过 xml 给我边框线？

不。

> 如果不是，那么 GridView 会给我想要的线条吗？

不。

> 我能否将我想要的所有先前提到的项目添加到 GridView 中？

是的，虽然像 a 这样的东西有多好用`Spinner`，我不能说。

最简单的方法，在我的脑海中，给你你想要的线条是让每个单元格`TableLayout`或者`GridLayout`是一些包含该单元格的小部件的容器，在那里你给容器一个背景是你的线条. [A`ShapeDrawable`](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)可以在 XML 中为该背景定义，它可以根据单元格的实际要求很好地调整大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-28T09:31:54.187

对于未来的访客，这就是我的做法`TableLayout`：

**表.xml**

```
<TableLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:background="#969696">
        <!-- table heading -->
        <TableRow>
            <Button android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Name"
                android:background="#d2d2d2"
                android:layout_margin="1dp"
                />
            <Button android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Address"
                android:background="#d2d2d2"
                android:layout_margin="1dp"
                />
        </TableRow>
        <!-- table data -->
        <TableRow>
            <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Ahtisham"
                android:layout_margin="1dp"
                android:background="#f1f1f1"
                />
            <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Kashmir"
                android:layout_margin="1dp"
                android:background="#f1f1f1"
                />
        </TableRow>            
 </TableLayout> 
```

# javascript - 资产未出现在开发环境中

> ID：16199627
> 
> 赞同：1
> 
> 时间：2013-04-24T18:34:01.157
> 
> 标签：javascript, css, ruby-on-rails, ruby

我`rake assets:clean`在尝试使用我的 rails 应用程序整理某些东西时使用过。这是我第一次这样做，我犯了一个错误的做法，即在没有完全理解我在做什么的情况下尝试命令。尽管如此，该过程导致所有样式和 .js 在站点加载时不会被加载。

于是我又试了试`rake assets:precompile`，没有成功。

我觉得好像有些事情我并不完全了解我所做的事情或如何解决这个问题，尽管这可能是一个非常简单的解决方法。我确实阅读了[rails docs](http://guides.rubyonrails.org/asset_pipeline.html)中的资产管道。也许我错过了那里的一些重要信息（时间比较短）。

如果有人可以对这个问题有所了解，并且可能对与我的特定问题相关的信息（* cue office space bill lumberg voice）进行简洁的解释（网址或其他），那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:59:24.200

`rake assets:clean` [删除已编译的资产](http://guides.rubyonrails.org/command_line.html#assets)。

确保您的文件夹中没有资产`public/assets`，然后尝试运行`rake assets:precompile`

**更新：**

在开发中关闭调试模式：

配置/环境/development.rb

```
config.assets.debug = false 
```

[http://guides.rubyonrails.org/asset_pipeline.html#in-development](http://guides.rubyonrails.org/asset_pipeline.html#in-development)

[为什么 rake assets:precompile 在开发中会导致问题，但在我的生产环境中却没有](https://stackoverflow.com/questions/10520724/why-does-rake-assetsprecompile-in-development-cause-problems-but-not-in-my-prod)

# django - 使用 Redis 作为 REST API 的中间缓存

> ID：16199630
> 
> 赞同：11
> 
> 时间：2013-04-24T18:34:10.033
> 
> 标签：django, rest, redis

我们有一个通过 REST API 与 django 服务器对话的 iOS 应用程序。大多数数据由相当大的 Item 对象组成，其中涉及一些相关模型，这些模型呈现为单个平面字典，并且这些数据很少更改。

我们发现，查询这对 Postgres 来说不是问题，但生成 JSON 响应需要相当长的时间。另一方面，项目集合因用户而异。

我想到了一个渲染系统，我们只需为 Item 对象构建一个字典并将其作为 JSON 字符串保存到 redis 中，这样我们就可以直接从 redis 提供 API（例如 HMGET（用户库中项目的 id），速度很快，并且使重新生成“渲染实例”变得相对容易，基本上只是几个`post_save`信号。

我想知道这个设计有多好，它有什么重大缺陷吗？也许有更好的方法来完成这项任务？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T19:18:18.607

当然，我们公司也这样做，使用 Redis 存储的不是 JSON，而是大型 XML 字符串，这些字符串是从后端数据库为 RESTful 请求生成的，它节省了大量的网络跃点和开销。

如果这是您第一次使用 Redis，请记住几件事...

**专用 Redis 服务器**
Redis 是单线程的，应部署在具有足够 CPU 能力的专用服务器上。不要错误地将其部署在您的应用程序或数据库服务器上。

**高可用性**
使用主/从复制设置 Redis 以实现高可用性。我知道 Redis [cluster](http://redis.io/topics/cluster-spec)取得了很大进展，因此您可能也想检查一下 HA。

**Cache Hit/Miss**
在检查 Redis 是否有缓存“命中”时，如果连接已死或发生任何异常，请不要使请求失败，只需默认到数据库即可；缓存应该始终是“尽力而为”，因为数据库始终可以作为最后的手段。

# java - 在 JFrame 中处理 javaFX webengine

> ID：16199631
> 
> 赞同：2
> 
> 时间：2013-04-24T18:34:10.330
> 
> 标签：java, swing, javafx-2, javafx

我的 JFrame 中有一个网络浏览器，我想我无法让它在退出应用程序时处理它。

这是我试图实现这一目标的代码：

```
Platform.runLater(new Runnable() {
    @Override
    public void run() {
        webBrowserEngine.getLoadWorker().cancel();
        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                Platform.exit();
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        getMainFrame().dispose(); // Is set to dispose on close
                        // SwingUtilities.invokeLater(new Runnable() {
                            // @Override
                            // public void run() {
                                // System.exit(0);
                            // }
                        // });
                    }
                });
            }
        });
    }
}); 
```

窗口关闭，但 java 进程仍然存在，并且此行始终返回 false：

```
webBrowserEngine.getLoadWorker().cancel(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-29T12:29:02.790

```
Platform.exit(); 
```

强制 FXApplicationThread 终止。与它相关的一切最终都会最终确定。您可以通过扩展和覆盖 WebEngine 类来测试这一点，以便在 finalize() 触发器上处理不同的事情。

此外，还存在与 WebEngine 本身内的 url 处理例程相关的 self-disposers 的实现。

另外，WebEngine 处理一些 URLLoader 用于资源处理。由于它们位于 DLL 中，因此擦除它们有点奇怪……如此原生。

解决这个问题会导致一堆需要逻辑解决方法的 MemoryAccessViolation 异常。

# jquery - 无法获得 :visible 以使用 index()

> ID：16199633
> 
> 赞同：1
> 
> 时间：2013-04-24T18:34:15.307
> 
> 标签：jquery, indexing, visible

这是我的平面设计作品集网站，我的过滤器有点问题。我使用 jQuery 和类创建了它。当点击一个链接时，它会隐藏所有不是它的“.tags”。所有这些都正常工作。（第 5-19 行）

从第 21 行开始，我创建了一个在项目下方动态添加 div 和内容的函数。它找到存在多少元素，当前元素的位置，并找到新 div 应该插入的位置（在 3 列行的末尾）。所有这些都可以自行正常工作。

**问题是当过滤一些“.tags”时，第二个函数没有正确找到当前元素的位置。**这是因为我实际上并没有从源代码中删除元素，只是将它们隐藏起来——我想保持这种状态，这样我就不需要继续重新加载内容了。

```
var portfolio = '#portfolio > a';
var elements = $(portfolio).children(':visible').length; //finds how many elements are in the portfolio
var getPosition = $(portfolio).siblings('a :visible').addBack().index(this);  //find the position of the div 
```

上面的代码是问题区域（第 25-26 行），但这里是整个代码供参考：http: [//jsfiddle.net/cQUMs/5/](http://jsfiddle.net/cQUMs/5/)

无论是否使用过滤器，我的变量*元素都可以轻松获得正确数量的元素。****getPosition*在过滤任何内容之前获取正确的位置，但保留该数字；我需要它动态更新。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:36:12.670

问题是`this`您要索引的是一个`a`元素。所以试试这个（[更新的演示](http://jsfiddle.net/Mottie/cQUMs/6/)）：

```
//find the position of the div
var getPosition = $(portfolio).children(':visible').index( $(this).children() ); 
```

# javascript - 在字符串中查找单词的循环

> ID：16199635
> 
> 赞同：0
> 
> 时间：2013-04-24T18:34:22.817
> 
> 标签：javascript

所以，我正在研究一个“for”循环，它将识别我的名字 Andrew，并将其推送到一个数组中，但它有问题

```
/*jshint multistr:true */

var text = ("Andrew is really awesome and Andrew should be working on the project, but there is honestly nothing for Andrew to do.");
var myName = ("Andrew");
var hits = [];
for (var i = 0; i < text.length; i ++) {
    if (text[i] === "A") {
        for (var j = i; i + nyName.length; i ++) {
            hits.push(text[j]);
        }
    }
} 
```

此外，第二个循环应该在到达 myName 的末尾时停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:40:23.183

您正在使用 JSHINT，因此只需阅读错误消息，它就会准确地告诉您出了什么问题。

> **错误：**
> 
> *   第 7 行：`for (var j = i; i + nyName.length; i ++) {`
>     
>     
>     
>     'nyName' 未定义。
>     
>     
> *   第 3 行：`var myName = ("Andrew");`
>     
>     
>     
>     'myName' 已定义但从未使用过。

如果您不注意它告诉您的内容，JSHINT 就不是很好。

* * *

此外，您的内部循环看起来很奇怪。

```
for (var j = i; i + nyName.length; i ++) { 
```

似乎它会导致无限循环。你可能想要`j`一个不同的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:36:46.607

您在 for 循环语法中拼写错误`myName`并改为键入`nyName`，因此脚本很可能在到达该行时立即死亡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:36:54.817

想要引用的 for 循环中的拼写错误`myName`似乎是一个大问题：

```
for (var j = i; i + nyName.length; i ++)
                    ^ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T18:45:41.967

拼写错误`myName`并不是唯一失败的部分。您的 for 循环将永远不会结束循环，因为`i + myName.length`将始终评估为`true`. 您还需要增加 的值，`j`否则它将始终在 index 处获取字符`i`。

这是更正后的循环。

```
for (var i = 0; i < text.length; i ++) {
    if (text[i] === "A") {
        for (var j = 0; j < myName.length; i++, j++) {
            hits.push(text[i]);
        }
    }
} 
```

# mysql - 如何在 SQL 中将文件插入到表中？

> ID：16199638
> 
> 赞同：1
> 
> 时间：2013-04-24T18:34:25.860
> 
> 标签：mysql, sql, database, file

我还没有看到任何可以在 SQL 中存储文件的数据类型。有没有类似的东西？我特别要说的是我想在我的表格中插入一个源代码。最好的方法是什么？它可以作为格式良好的文本存储在我的数据库中，也可以更好地（我真正想要的）将其存储为单个文件。请注意，我使用的是 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:46:46.203

最好不要将文件存储在 SQL 数据库中，而是将文件的路径存储在服务器中或应用程序可以自行检索的任何其他 UNC 路径，并对其进行不必要的处理。

看到这个：[https ://softwareengineering.stackexchange.com/questions/150669/is-it-a-bad-practice-to-store-large-files-10-mb-in-a-database](https://softwareengineering.stackexchange.com/questions/150669/is-it-a-bad-practice-to-store-large-files-10-mb-in-a-database)

还有这个： [在 MySQL 数据库中存储大文件的更好方法？](https://stackoverflow.com/questions/3894282/better-way-to-store-large-files-in-a-mysql-database)

如果您仍想将文件存储在数据库中。这是一个示例： http: [//mirificampress.com/permalink/saving_a_file_into_mysql](http://mirificampress.com/permalink/saving_a_file_into_mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:42:35.470

您还可以使用有一些差异的 BLOB ( [http://dev.mysql.com/doc/refman/5.0/en/blob.html )。](http://dev.mysql.com/doc/refman/5.0/en/blob.html)通常我只是将文件存储在文件系统中，并在数据库中存储一个指针，这使得通过 HTTP 之类的服务返回它更容易一些，并且不会使数据库膨胀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:36:58.343

如果您可以序列化文件，您可以将其存储为二进制文件，然后在需要时反序列化 [http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T23:52:42.547

仅当您需要在该代码中进行搜索时，将文件存储在表中才有意义。在其他情况下，您应该只存储文件的 URL。

如果要存储文本文件，请使用 TEXT 数据类型。由于它是源代码，您可以考虑使用 ASCII 字符集来节省空间 - 但请注意，这会在查询期间导致字符集转换，从而影响性能。此外，如果它是 ASCII，您可以使用 REGEXP 进行搜索（该运算符不适用于多字节字符集）。

要加载文件，如果文件与 MySQL 位于同一服务器上，则可以在 INSERT 中使用 FILE() 函数。

# html - 如何将没有设置宽度的列表块居中？

> ID：16199640
> 
> 赞同：0
> 
> 时间：2013-04-24T18:34:33.710
> 
> 标签：html, css, css-float

我正在处理一个`UL`可以缩小和增长的块，一个导航菜单。它充满了向左浮动的列表项，并且是用户定义的任意长度。它没有固定宽度，我无法更改 HTML 或使用 javascript。我所能做的就是添加CSS。使列表居中的最安全方法是什么？

我必须使用的一个简单示例：http: [//jsfiddle.net/DCYn2/1/](http://jsfiddle.net/DCYn2/1/) 请记住，我只能添加 CSS。我无法添加 html、js 或删除现有的 css。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:41:54.780

使 ul 居中的最简单方法是将其 display 属性更改为 table 并修改边距。

[http://tinker.io/c5ff0](http://tinker.io/c5ff0)

```
ul {
    border: 1px solid;
    padding: 0;
    display: table;
    margin-left: auto;
    margin-right: auto;
}

li {
    border: 1px solid red;
    display: inline-block;
} 
```

# javascript - 在没有 JQuery 的情况下在 IE 中使用 Javascript 检索“占位符”值

> ID：16199646
> 
> 赞同：3
> 
> 时间：2013-04-24T18:34:53.960
> 
> 标签：javascript, internet-explorer

我有一些 Javascript 代码可以检查浏览器是否支持占位符，如果不支持，它会自行创建它们。现在这适用于一些较旧的浏览器，但不是全部，尤其是 IE。

我需要做的就是获取“占位符”值，此时 IE9 中的占位符是“未定义的”。

这是我的代码：

```
//Test if Placeholders are supported
var test = document.createElement("input");
if ("placeholder" in test) {
  var testholder = true;
  }
else {
  var testholder = false;
  }

//Fix unsupported placeholders
function placeHolder(id)
{
var demo = document.getElementById(id);

    demo.className = "fix-hint";
    demo.value = demo.placeholder;

    demo.onfocus = function()
    {
        if (this.className == "fix-hint")
        { 
        this.value = ""; this.className = "fix-nohint"; 
        }
    };

    demo.onblur = function()
    {
        if (this.value === "")
        { 
        this.className = "fix-hint"; this.value = demo.placeholder; 
        }
    };
    return false; 
```

我用的是0%的Jquery，感觉解决小问题太笨重了，另外想学纯Javascript。Modernizr 也不是，尽管我可能会在某个时候开始使用它。

**更新**

这是工作代码。在 IE 8 和 9 中测试。（函数调用在“placeSupport”的 if/else 中。）

```
//Check if placeholders are supported

placeholderSupport = ("placeholder" in document.createElement("input"));
if(!placeholderSupport){
  var placeSupport = false;
}else{
    var placeSupport = true;}

//Support placeholders in older browsers

function placeHolder (id)
{
var el = document.getElementById(id);
var placeholder = el.getAttribute("placeholder");

el.onfocus = function ()
{
    if(this.value == placeholder)
    {
        this.value = '';
        this.className = "fix-nohint";
    }
};

el.onblur = function ()
{
    if(this.value.length == 0)
    {
        this.value = placeholder;
        this.className = "fix-hint";
    }
};

el.onblur(); 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T18:37:03.663

*如果您不确定是否能够使用某些功能/属性，请尝试[caniuse.com](http://caniuse.com/input-placeholder) - 您会注意到占位符在 IE9 中不可用。*

尝试使用[`getAttribute("placeholder")`](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute)

> getAttribute() 返回指定元素上命名属性的值。如果命名属性不存在，则返回的值为 null 或 ""（空字符串）；有关详细信息，请参阅注释。

[**例子**](http://jsfiddle.net/ChaseWest/Zfq7v/)

**HTML**

```
<input id="demo" placeholder="Rawr" /> 
```

**JavaScript**

```
var placeholder = document.getElementById("demo").getAttribute("placeholder");
console.log(placeholder); 
```

# php - 显示页面中的一些信息

> ID：16199650
> 
> 赞同：1
> 
> 时间：2013-04-24T18:35:11.100
> 
> 标签：php, minecraft

我正在为 Minecraft 服务器制作控制台查看器，但是当我进入只需要在浏览器中显示文本的阶段时，它不会让我出现此错误：

致命错误：第 17 行 C:\xampp\htdocs\testingfile.php 中允许的内存大小为 134217728 字节已用尽（尝试分配 36 字节）

我猜它不会显示因为文件太大？该文件约为 4.5MB。我想显示文件中最近的 10 行。

这是我的代码：

```
 <?php

// define some variables
$local_file = 'C:\Users\Oscar\Desktop\worked.txt';
$server_file = 'NN7776801/server.log';
$ftp_server="Lol.Im.Not.Thick";
$ftp_user_name="Jesus";
$ftp_user_pass="ReallyLongPassWordThatYouWontGuessLolGoodLuckMateGuessingThisPass";

$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

// try to download $server_file and save to $local_file
if (ftp_get($conn_id, $local_file, $server_file, FTP_BINARY)) {
    $contents = file($local_file); 
    $string = implode($contents); 
    echo $string;

    for ($i = 0; $i < 6; $i++) {
    echo $local_file[$i] . "\n";
}
}
else {
    echo "There was a problem\n";
}
// close the connection
ftp_close($conn_id);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:37:25.730

在变量中增加以下内容，`php.ini`以便您的页面执行不会停止：

```
max_input_time
memory_limit
max_execution_time 
```

要获得 10 行，您可以尝试以下操作：

```
$filearray = file("filename");
$lastfifteenlines = array_slice($filearray,-15); 
```

或者使用一个函数：

```
function read_last_lines($fp, $num)
{
    $idx   = 0;

    $lines = array();
    while(($line = fgets($fp)))
    {
        $lines[$idx] = $line;
        $idx = ($idx + 1) % $num;
    }

    $p1 = array_slice($lines,    $idx);
    $p2 = array_slice($lines, 0, $idx);
    $ordered_lines = array_merge($p1, $p2);

    return $ordered_lines;
}

// Open the file and read the last 15 lines
$fp    = fopen('C:\Users\Oscar\Desktop\worked.txt';', 'r');
$lines = read_last_lines($fp, 10);
fclose($fp);

// Output array 
 echo '<pre>'.print_r($my_array).'</pre>'; 
```

要打印内容，请添加：

```
$withlines= implode ("<br>\n",$my_array); //Change $my_array with the name you used!
echo $withlines; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:28:30.537

如果只需要最后 10 行，可以使用 tail

```
$lines = `tail -n 10 $local_file`; 
```

[这里](https://stackoverflow.com/questions/11068203/php-getting-the-last-500-lines-of-a-100mb-log-file)还有一些关于如何使用 fseek 获取最后几行的信息。

# shell - 从一个 Shell 脚本运行多个 Shell 脚本

> ID：16199653
> 
> 赞同：2
> 
> 时间：2013-04-24T18:35:27.593
> 
> 标签：shell, ubuntu, terminal

这是我正在尝试做的事情。我有 4 个 shell 脚本。脚本 1 需要先运行，然后是 2，然后是 3，然后是 4，并且它们必须按此顺序运行。脚本 1 需要运行（并在后台等待）2 才能正常运行，但是脚本 1 需要大约 3 秒才能准备好使用。我尝试做 ./1.sh & ./2.sh & ./3.sh & ./4.sh，但这会导致一团糟，因为当 1 尚未准备好时 2 开始从 1 请求东西。所以，我的问题是，从一个 shell 脚本，我如何让它启动脚本 1，等待 5 秒，启动脚本 2，等待 5 秒等，而不停止任何先前的脚本运行（即它们都必须在后台运行任何更高编号的脚本才能工作）。我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:39:43.810

我可以给你介绍一下这个`sleep`命令吗？

```
./1.sh & 睡眠 5
./2.sh & 睡眠 5
./3.sh & 睡眠 5
./4.sh
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T17:06:19.227

```
#!/bin/sh
./1.sh &; sleep 5;./2.sh &; sleep 5; ./3.sh &; sleep 5; ./4.sh 
```

# ruby-on-rails - 在 cap deploy:cold - 找不到 /etc/init.d/unicorn 的命令

> ID：16199654
> 
> 赞同：1
> 
> 时间：2013-04-24T18:35:29.577
> 
> 标签：ruby-on-rails, ruby, ubuntu, capistrano, unicorn

我非常接近让我的第一个 Rails 应用程序在 Linode VPS 上运行，但在 cap deploy:cold 快结束时不断收到一条奇怪的错误消息。我一直在关注 railscasts 335，使用 nginx、Unicorn、PostgreSQL、rbenv 等将我的 Rails 应用程序部署到 VPS（不幸的是，我使用的是 Windows 机器）。我在 Linode Ubuntu 10.04 LTS Profile 上托管。在部署快结束时，我收到以下错误消息：

```
 * ←[32m2013-04-24 13:08:13 executing `deploy:start'←[0m
  * ←[33mexecuting "sudo -p 'sudo password: ' /etc/init.d/unicorn_wheretoski start"←[0m
    servers: ["xxx.xx.xxx.242"]
    [xxx.xx.xxx.242] executing command
 ** [out :: xxx.xx.xxx.242]
 ** [out :: xxx.xx.xxx.242] sudo: /etc/init.d/unicorn_wheretoski: command not found
 ** [out :: xxx.xx.xxx.242]
    ←[2;37mcommand finished in 309ms←[0m
failed: "env PATH=$HOME/.rbenv/shims:$HOME/.rbenv/bin:$PATH sh -c 'sudo -p '\\''
sudo password: '\\'' /etc/init.d/unicorn_wheretoski start'" on xxx.xx.xxx.242 
```

当我转到服务器时，它会找到文件

```
:~/apps/wheretoski/current$ ls /etc/init.d/unicorn_wheretoski
/etc/init.d/unicorn_wheretoski 
```

从部署.rb

```
namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      sudo "/etc/init.d/unicorn_#{application} #{command}"
    end
  end 
...... 
```

来自 unicorn_init.sh

```
#!/bin/sh
set -e

# Feel free to change any of the following variables for your app:
TIMEOUT=${TIMEOUT-60}
APP_ROOT=/home/deployer/apps/wheretoski/current
PID=$APP_ROOT/tmp/pids/unicorn.pid
CMD="cd $APP_ROOT; bundle exec unicorn -D -c $APP_ROOT/config/unicorn.rb -E production"
AS_USER=deployer
set -u

OLD_PIN="$PID.oldbin"

sig () {
  test -s "$PID" && kill -$1 `cat $PID`
}

oldsig () {
  test -s $OLD_PIN && kill -$1 `cat $OLD_PIN`
}

run () {
  if [ "$(id -un)" = "$AS_USER" ]; then
    eval $1
  else
    su -c "$1" - $AS_USER
  fi
}

case "$1" in
start)
  sig 0 && echo >&2 "Already running" && exit 0
  run "$CMD"
  ;; 
```

然后我前往 VPS 并尝试执行各种命令，但在执行以下命令时出现错误：

```
deployer@li543-242:~/apps/wheretoski/current$ bundle exec unicorn -D -c $/home/apps/wheretoski/current/config/unicorn.rb -E production
/home/deployer/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/rubygems_integration.rb:214:in `block in replace_gem': unicorn is not part of the bundle. Add it to Gemfile. (Gem::LoadError)
        from /home/deployer/.rbenv/versions/1.9.3-p125/bin/unicorn:22:in `<main>' 
```

这是我在 VPS 上通过 echo $PATH 得到的：/home/deployer/.rbenv/shims:/home/deployer/.rbenv/bin:/usr/local/sbin:/usr/local/bin:/usr/ sbin:/usr/bin:/sbin:/bin:/usr/games:/home/deployer/.rbenv/versions/1.9.3-p125/bin

我已经尝试过使用生产组下的独角兽 gem 和作为主要 gem 的一部分，两者都产生了相同的错误消息。当我打开服务器上当前文件夹中的 Gemfile.lock 时，Unicorn 仅显示在依赖项下，而不是规范下。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T19:31:56.207

好吧，这里有几个问题。

1 - 我的本地机器和服务器上有不同版本的捆绑程序。

2 - 在 Windows 机器上开发。我不得不将独角兽 gem 放在我的 gemfile 中的生产组下，无论出于何种原因，结果 gemfile.lock 都没有成功创建。有一个使用 mac 的朋友拉我的代码，将独角兽移动到 gemfile 的主要部分，然后捆绑安装它。这创建了一个很好的 Gemfile.lock，它现在在服务器上使用。

不确定这是否对其他人有帮助，这是一个奇怪的错误。

# c++ - CL.exe 在 Visual Studio 2012 中崩溃

> ID：16199655
> 
> 赞同：1
> 
> 时间：2013-04-24T18:35:30.347
> 
> 标签：c++, visual-studio-2012, cl.exe

我最近安装了 Visual Studio 2012，但由于 IDE 报告 CL.exe 中的崩溃，我似乎无法正确构建我的解决方案。

它报告的唯一错误是`error MSB6006: "CL.exe" exited with code 1073741855`. 除此之外，我收到了很多关于`Microsoft.CppCommon.targets`. 许多错误的形式是“未声明'x'属性”。

这似乎是一个愚蠢的问题，但我不明白它为什么这样做。

根据[这个问题](https://stackoverflow.com/questions/4532457/program-and-debugger-quit-without-indication-of-problem)中接受的答案，错误代码意味着`STATUS_WX86_BREAKPOINT`。我不清楚这与我正在做的事情有什么关系。

我创建了一个空解决方案并输入以下代码：

```
int main() {
    return 0;
} 
```

只是看看问题是否仍然存在。确实如此。

可能有用的信息：

*   操作系统：Windows 7
*   IDE 构建：11.0.50727.1 RTMREL

问题：

*   为什么会这样？
*   我该怎么做才能弄清楚发生了什么？
*   我能做些什么来解决这个问题？
*   这个问题中的信息是否足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T21:01:57.810

我已经通过更新 Visual Studio 2012 解决了这个问题。这个可以忽略。很抱歉浪费您的时间。

自我注意：无论您拥有多少带宽，都不要忽略更新。;_;

# java - 如何在java spring mvc应用程序中取消以前的操作

> ID：16199658
> 
> 赞同：2
> 
> 时间：2013-04-24T18:35:44.567
> 
> 标签：java, ajax, spring, jakarta-ee, spring-mvc

我正在开发一个 Spring MVC 应用程序。我遇到了一个有趣的案例。

为了更容易解释，我以顶部的 stackover 流程​​按钮为例（我的意思是那些问题、标签、用户、徽章、未回答的按钮）。

现在在我的应用程序中，我有类似的按钮。当用户单击任何按钮时，它会通过传递适当的参数进行 ajax 调用。服务器进行 sql 查询并返回结果。

现在假设有一个像我这样的疯狂用户，不停地点击这些按钮。所以每次点击都会进行一次ajax调用。哪个完成了它的操作就会出现在前端。因此，即使用户最后点击标签按钮，它也可能会出现，并且再次点击需要很长时间才能返回前端的问题可能会覆盖页面。我该如何解决？（我希望显示标签数据，因为它是用户最后一次点击）

首先，我知道当用户首先点击问题然后点击标签时，我不再需要查询 sql 的问题按钮。有什么方法可以让我停止处理问题按钮的 sql 查询。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:38:52.890

处理此问题的最佳方法是通过用户界面 - 如果用户采取了需要在后端进行大量处理的操作（单击图像），您的 UI 应阻止页面上的其他操作向后端发送更多消息，直到原始请求已完成。

从视觉上解决这个问题的方法是禁用/灰显其他元素，使某些工作明显正在进行（使用微调器、进度条）等。

在服务器端，由于每个 HTTP 请求都是独立的，因此在服务器上添加逻辑以检测发出当前请求的用户是否有另一个正在进行的请求当前正在处理是很麻烦和困难的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:07:40.253

您可能需要借助 cookie。当第一次操作完成时，写一些 cookie。每次，在处理之前检查该 cookie。

您不能简单地禁用 UI 中的链接或按钮，并希望用户不能这样做。它总是可以通过多种方式完成。必须进行额外检查。

（我还没有完全阅读你的帖子。但是从我从第一个答案中了解到的......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T20:24:33.833

我有一个类似的问题，我是这样解决的。

我做了手工编码的ajax调用（与jQuery等相反）

我有一个全局 XMLHTTPRequest。

```
var xhr = new XMLHTTPRequest(); 
```

当用户单击需要 ajax 调用的某些内容时，如果已在运行，我会中止先前的调用。

```
if( xhr.readystate !=0 || xhr.readystate !=4 )
   xhr.abort(); 
```

然后创建一个新的 XHR 实例，然后做你的事情。

```
xhr = new XMLHTTPRequest();
xhr.open("GET", myUrl, true);
//attach callback function etc and do the send 
```

# iphone - UITableView：可以通过点击手势检测单元格选择，但不能检测 didSelectRowAtIndexPath

> ID：16199659
> 
> 赞同：0
> 
> 时间：2013-04-24T18:35:51.163
> 
> 标签：iphone, ios, objective-c, xcode, ipad

[我在WEPopover](https://github.com/werner77/WEPopover)中嵌入了一个 UITableView 。我可以看到整个视图并选择除了底部的单元格之外的单元格。按下底行不会导致调用 didSelectRowAtIndexPath。我尝试在视图中添加一个 UITapGestureRecognizer 来拦截触摸并使用下面的代码计算相应的单元格，发现它可以工作。我试图理解为什么即使表视图正在接收触摸事件也没有调用 didSelectRowAtIndexPath 。

```
CGPoint touchLocation = [sender locationInView:self.tableView];
NSIndexPath *tappedIndexPath = [self.tableView indexPathForRowAtPoint:touchLocation];
NSInteger row = [tappedIndexPath row]; 
```

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T20:45:02.787

摆脱 UITapGestureRecognizer，你不需要它。我的猜测是

1) 你的 WEPopover 比你的 UITableView 小。将 WEPopover 上的 clipsToBounds 属性设置为 YES 并查看是否仍然存在此问题。您还可以仔细检查 UITableView 框架和 WEPopover 框架的高度，并确保它们相同。

2）你有一些覆盖底部单元格的透明视图。检查您的视图层次结构并将透明视图的颜色设置为 [UIColor redColor] 之类的颜色，并确保您的 UITableView 顶部没有任何东西。

你能触摸底部的单元格并滚动吗？

# wordpress - WordPress 资源使用

> ID：16199662
> 
> 赞同：2
> 
> 时间：2013-04-24T18:36:22.883
> 
> 标签：wordpress, performance, optimization

我正在尽力优化 Wordpress。到目前为止我所做的：

*   WP-Cron 禁用，通过 cron-tab 查询调用（每 10 分钟一次）
*   禁用所有不需要的插件
*   与 WP Minify 一起安装/配置 WP Super Cache
*   禁用修订（但后来重新启用它，因为我收到空帖子（奇怪）
*   将子域作为图像和脚本的 CDN

这是我的控制面板上的经典资源使用报告：

```
 57.0% .../index.php () 
    7.0%  php -q ../wp-cron.php () 
    5.0%  httpd (...) 
```

眼镜 ：

*   每天约有 5000 名独立访客

我想避免移动到专用服务器（这是一个共享主机），或者至少在移动之前尽我所能尝试......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T17:44:55.310

正如 Ahmad Suhendri 所指出的，专用服务器是个好主意。我搬到了专用服务器，现在网站速度非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:24:18.740

我使用免费版本的 Total Cache 插件，它工作得很好。我对新帖子没有任何问题。

[http://wordpress.org/extend/plugins/w3-total-cache/](http://wordpress.org/extend/plugins/w3-total-cache/)

这个插件可以做所有事情，还可以缩小 html、javascript 和 css

# c++ - 傅里叶逆变换 FFT3W

> ID：16199665
> 
> 赞同：1
> 
> 时间：2013-04-24T18:36:33.790
> 
> 标签：c++, fft, fftw, ifft

我正在使用 C++ 函数来查找傅里叶逆变换。

```
int inYSize = 170; int inXSize = 2280;

float* outData = new float[inYSize*inXSize];
fftwf_plan mReverse = fftwf_plan_dft_c2r_2d(inYSize, inXSize,(fftwf_complex*)temp, outdata,  
FFTW_ESTIMATE);
fftwf_execute(mReverse); 
```

我的输入是带有复数的二维数组 temp。所有元素的实数为 1，虚数为 0。

所以我期望`InverseFFT`这样的数组应该是具有实际值的二维数组。输出数组的 SPIKE 应该为 0,0 并且所有值都为 0。但是即使在使用数组的总大小进行归一化之后，我也会在输出数组中获得所有不同的值。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:24:55.023

当涉及到多维 DFT 和复数到实数变换时，FFTW 并不是那么容易处理的。

1.  在对 MxN 行主要数组进行 C2R 变换时，由于结果的对称性，第二维被减半：`outData`比需要的大两倍，但这不是您的问题的原因（而不是您的情况你在做 C2R 而不是 R2C）。关于这个曲折问题的更多信息：[http ://www.fftw.org/doc/One_002dDimensional-DFTs-of-Real-Data.html](http://www.fftw.org/doc/One_002dDimensional-DFTs-of-Real-Data.html)

    “好人建议”：仅使用 C2C“更简单”的做事方式，如果您不知道如何处理结果，请取输出的模数，但不要将时间浪费在 nD Complex to Real 转换上。

2.  由于精度有限，由于 DFT 的数值实现，由于无从属的醉酒位，即使非常小，也可以获得不为 0 的值。这是 FFT 算法的正常行为。

除了仔细阅读用户手册（[http://www.fftw.org/doc/](http://www.fftw.org/doc/)），即使它真的很痛苦（我在这个库中浪费了几天时间，只是为了让 3D 转换工作，只是为了了解数据是如何缩放的）

*   在进行 C2C 2D 和 C2R 2D 之前，您应该尝试使用 C2C 1D 转换，以确保您以某种方式了解自己在做什么。
*   什么是平面常数的逆 FFT，其中“频率平面”的每个 bin 都填充了一个？您是否正在寻找定义 +inf 或 -inf 的新方法？在这种情况下，我宁愿从更容易除以 0 ^^ 开始。如您所描述的，直接 FFT 应该是 a，正确缩放的 SPIKE 为 1，很确定相反不是。

不要犹豫，为您的问题增加精确度，祝您好运 FFTW

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:01:21.630

有了这么少的信息，很难说清楚。我可以想象的是，由于窗口选择，您会出现频谱泄漏（有关泄漏的详细信息，请参阅[此 Wikipedia 文章](http://en.wikipedia.org/wiki/Spectral_leakage)）。

您可以做的是尝试使用另一个窗口函数来减少泄漏或重新定义窗口大小。

# java - 如何使用 Android 手动发送 NdefMessage？

> ID：16199666
> 
> 赞同：1
> 
> 时间：2013-04-24T18:36:36.393
> 
> 标签：java, android, eclipse, nfc

我有我的 NFC 课程，我假设人们知道如果您正在查看这个问题，它会是什么样子。所以 OnCreate，我这样做：

```
mNfcAdapter.setNdefPushMessageCallback(this, this); 
```

能够发送消息，然后我这样做：

```
public NdefMessage createNdefMessage(NfcEvent event){        
    NdefMessage msg;

                msg = new NdefMessage(new NdefRecord[] {
                        createApplicationRecord(this.messageToSend.getBytes())
                });
                return msg;
} 
```

发送我的信息。我也有一些代码可以接收消息，但是我想在设备仍处于“已连接”模式时发回另一条消息。如何手动发出“发送消息”命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:58:49.453

您的应用程序有一次机会使用 setNdefPushMessageCallback 发送消息。传输消息后，您将获得 completionCallback（如果您愿意）。之后，您将无法再与 NFC 交互。

不幸的是，API 无法在完成后发送第二条消息，因为它是正确的。

顺便说一下，从技术上讲，这是没有理由的。谷歌可以轻松添加该功能。他们只需要一两天。在 Android 2.3 中，已经有一种从应用程序访问 LLCP（Android Beam 的基本协议）协议的未公开方式。从 Android 3.0 开始就没有了

# matlab - 在 MATLAB 2013 中使用 ichol 代替 chol

> ID：16199671
> 
> 赞同：0
> 
> 时间：2013-04-24T18:36:46.103
> 
> 标签：matlab

我有一个以前在 MATLAB 2012 中运行没有任何问题的代码。但是当我切换到 MATLAB 2013 时，我的代码不再工作，并且出现以下错误：

> CHOLINC 已被删除。请改用 ICHOL。

我正在使用这行代码，它位于 cvx 包中，特别是在 quad_form.m 文件中：

> [ R, p ] = chol( Q );

所以我想知道如何替换`chol`为`ichol`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:22:34.577

正如@Dan 所建议的那样，matlab`chol`可能被`chol`内部调用`cholinc`（现在`ichol`）的用户或工具箱定义“覆盖”。

但更重要的是，您应该了解您的问题发生了什么。Cholesky facotrizations ( `chol`) 仅在您的矩阵`Q`是 Hermitian 和半正定矩阵时才有效。

可能有人编写了自己的`chol`尝试 Cholesky 因式分解，如果失败，则执行不完整的 Cholesky 因式分解 ( `ichol` / `cholinc`)。

您可以自己实现，例如假设矩阵`Q`是实值的：

```
%untested.
R = [];
p = [];

if Q==Q'  && all(eig(Q) >= 0)
   [R,p] = chol(Q);
else
   [R,p] = ichol(Q);
end 
```

* * *

**添加**

如果您想完全确定没有隐藏的警告/错误消息导致您的程序退出，您可能想要使用`try`&`catch` 而不是`if`& 。`else`

* * *

**编辑**

将条件更改`Q`为实际检查正半定性。感谢您指出@woodchips。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:00:11.773

首先你应该阅读文档，可以通过输入`help ichol`或找到它`doc ichol`。这里也是一个副本： http: [//www.mathworks.nl/help/matlab/ref/ichol.html](http://www.mathworks.nl/help/matlab/ref/ichol.html)

我不是 100% 确定，但我的第一次尝试是检查更改`chol`为是否`ichol`可以解决问题。

* * *

如果问题是函数调用是在您无法更改的代码中进行的，那么（在您确定调用应该是什么之后）您可以创建自己的`chol`调用`ichol`.

# c - C语言控制台应用程序中的双语程序

> ID：16199678
> 
> 赞同：3
> 
> 时间：2013-04-24T18:36:56.347
> 
> 标签：c, dll

我一直在尝试实现一种使我的程序双语的方法：用户可以选择程序应该显示法语还是英语（在我的情况下）。我做了很多研究和谷歌搜索，但我仍然找不到一个很好的例子来说明如何做到这一点：/

我阅读了有关 gettext 的信息，但由于这是针对学校的项目，我们不允许使用外部库（我必须承认，即使我尝试过，我也不知道如何使它工作！）

有人还建议我为每种语言使用一个数组，我绝对可以完成这项工作，但我发现解决方案非常难看。

我想到的另一种方法是必须拥有不同的文件，每行都有句子，我可以在需要时检索正确的语言的正确行。我想我可以完成这项工作，但它似乎也不是最优雅的解决方案。

最后，一位朋友说我可以使用DLL。我已经对此进行了调查，它确实似乎是我能找到的最好方法之一......问题是我能找到的关于这件事的大多数资源都是为 C# 和 C++ 编码的，我仍然不知道我会怎么做在 C 中实现：/ 我可以掌握它背后的想法，但不知道如何在 C 中处理它（完全不知道！我不知道如何创建 DLL，调用它，从中检索正确的东西或任何东西>_<)

有人可以指出一些我可以使用的有用资源，或者编写一段代码来解释事情的工作方式或应该完成的方式吗？这将是非常棒的！

非常感谢提前！

（顺便说一句，我使用 Visual Studio 2012 和 C 代码）^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:00:30.533

如果您不能使用第三方库，请编写自己的库！不需要dll。

基本思想是每个[语言环境](http://en.wikipedia.org/wiki/Locale)都有一个文件，其中包含文本资源的映射（键=值）。

文件名可能类似于

```
resources_<locale>.txt 
```

哪里`<locale>`可能是`en`,`fr`等`de`。

当您的程序启动时，它首先读取指定语言环境的资源文件。

最好将每个键/值对存储在一个简单的`struct`.

您的读取函数将所有键/值对读取到[哈希表中](http://en.wikipedia.org/wiki/Hash_table)，这提供了非常好的访问速度。另一种方法是对包含键/值对的数组进行排序`key`，然后在查找时使用[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)（不是最佳选择，但比每次迭代所有条目要好得多）。

然后，您必须编写一个函数`get_text`，将要查找的文本资源的键作为参数，并返回为指定语言环境读取的相应文本。你必须处理没有映射的键，最简单的方法是返回键。

这是一些示例代码（使用[qsort](http://linux.die.net/man/3/qsort)和[bsearch](http://linux.die.net/man/3/bsearch)）：

```
#include<stdio.h> 
#include<stdlib.h>
#include<string.h>

#define DEFAULT_LOCALE "en"
#define NULL_ARG "[NULL]"

typedef struct localized_text {
    char* key;
    char* value;
} localized_text_t;

localized_text_t* localized_text_resources = NULL;
int counter = 0;

char* get_text(char*);
void read_localized_text_resources(char*);
char* read_line(FILE*);
void free_localized_text_resources();
int compare_keys(const void*, const void*);
void print_localized_text_resources();

int main(int argc, char** argv)  
{
    argv++;
    argc--;

    char* locale = DEFAULT_LOCALE;

    if(! *argv) {
        printf("No locale provided, default to %s\n", locale);
    } else {
        locale = *argv;
        printf("Locale provided is %s\n", locale);
    }

    read_localized_text_resources(locale);

    printf("\n%s, %s!\n", get_text("HELLO"), get_text("WORLD"));
    printf("\n%s\n", get_text("foo"));

    free_localized_text_resources();

    return 0;  
} 

char* get_text(char* key)
{
    char* text = NULL_ARG;
    if(key) {
        text = key;
        localized_text_t tmp;
        tmp.key = key;
        localized_text_t* result = bsearch(&tmp, localized_text_resources, counter, sizeof(localized_text_t), compare_keys);
        if(result) {
            text = result->value;
        }
    }    
    return text;
}

void read_localized_text_resources(char* locale)
{
    if(locale) {
        char localized_text_resources_file_name[64];
        sprintf(localized_text_resources_file_name, "resources_%s.txt", locale);
        printf("Read localized text resources from file %s\n", localized_text_resources_file_name);
        FILE* localized_text_resources_file = fopen(localized_text_resources_file_name, "r");
        if(! localized_text_resources_file) {
            perror(localized_text_resources_file_name);
            exit(1);
        }
        int size = 10;
        localized_text_resources = malloc(size * sizeof(localized_text_t));
        if(! localized_text_resources) {
            perror("Unable to allocate memory for text resources");
        }

        char* line;
        while((line = read_line(localized_text_resources_file))) {
            if(strlen(line) > 0) {
                if(counter == size) {
                    size += 10;
                    localized_text_resources = realloc(localized_text_resources, size * sizeof(localized_text_t));
                }
                localized_text_resources[counter].key = line;
                while(*line != '=') {
                    line++;
                }
                *line = '\0';
                line++;
                localized_text_resources[counter].value = line;
                counter++;
            }
        }
        qsort(localized_text_resources, counter, sizeof(localized_text_t), compare_keys);
        // print_localized_text_resources();
        printf("%d text resource(s) found in file %s\n", counter, localized_text_resources_file_name);
    }
}

char* read_line(FILE* p_file)
{
    int len = 10, i = 0, c = 0;
    char* line = NULL;

    if(p_file) {
        line = malloc(len * sizeof(char));
        c = fgetc(p_file);
        while(c != EOF) {
            if(i == len) {
                len += 10;
                line = realloc(line, len * sizeof(char));
            }
            line[i++] = c;
            c = fgetc(p_file);
            if(c == '\n' || c == '\r') {
                break;
            }
        }

        line[i] = '\0';

        while(c == '\n' || c == '\r') {
            c = fgetc(p_file);
        }
        if(c != EOF) {
            ungetc(c, p_file);
        }

        if(strlen(line) == 0 && c == EOF) {
            free(line);
            line = NULL;
        }
    }

    return line;
}

void free_localized_text_resources()
{
    if(localized_text_resources) {
        while(counter--) {
            free(localized_text_resources[counter].key);
        }
        free(localized_text_resources);
    }
}

int compare_keys(const void* e1, const void* e2)
{
    return strcmp(((localized_text_t*) e1)->key, ((localized_text_t*) e2)->key);
}

void print_localized_text_resources() 
{
    int i = 0;
    for(; i < counter; i++) {
        printf("Key=%s  value=%s\n", localized_text_resources[i].key, localized_text_resources[i].value);
    }
} 
```

与以下资源文件一起使用

`resources_en.txt`

```
WORLD=World
HELLO=Hello 
```

`resources_de.txt`

```
HELLO=Hallo
WORLD=Welt 
```

`resources_fr.txt`

```
HELLO=Hello
WORLD=Monde 
```

**跑**

```
(1) out.exe     /* default */
(2) out.exe en
(3) out.exe de
(4) out.exe fr 
```

**输出**

```
(1) Hello, World!
(2) Hello, World!
(3) Hallo, Welt!
(4) Hello, Monde! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:58:45.320

gettext 是显而易见的答案，但在您的情况下似乎不可能。嗯。如果你真的，真的需要一个定制的解决方案......在这里抛出一个疯狂的想法......

1：创建自定义多语言字符串类型。好处是您可以在之后轻松添加新语言，如果您愿意的话。您将在 #4 中看到的缺点。

```
//Terrible name, change it
typedef struct
{
    char *french;
    char *english;
} MyString; 
```

2：根据需要定义您的字符串。

```
MyString s;
s.french = "Bonjour!";
s.english = "Hello!"; 
```

3：实用枚举和函数

```
enum
{
    ENGLISH,
    FRENCH
};

char* getLanguageString(MyString *myStr, int language)
{
    switch(language)
    {
        case ENGLISH:
            return myStr->english;
            break;
        case FRENCH:
            return myStr->french;
            break;
        default:
            //How you handle other values is up to you. You could decide on a default, for instance
            //TODO
    }
} 
```

4：创建包装函数而不是使用普通的旧 C 标准函数。例如，而不是`printf`：

```
//Function should use the variable arguments and allow a custom format, too
int myPrintf(const char *format, MyString *myStr, int language, ...)
{
    return printf(format, getLanguageString(myStr, language));
} 
```

那部分是痛苦的：您需要覆盖*使用字符串的每个函数*来处理自定义字符串。您还可以指定一个全局默认语言变量以在未指定时使用。

再说一遍：gettext 好多了。仅在您确实需要时才执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:16:30.170

使程序可翻译的主要思想是在所有使用文本的地方使用任何类型的 id。然后在显示测试之前，您可以使用相应语言表的 id 获取文本。

**例子：**

而不是写

```
printf("%s","Hello world"); 
```

你写

```
printf("%s",myGetText(HELLO_WORLD)); 
```

通常使用本地语言字符串本身而不是 id。例如：

```
printf("%s",myGetText("Hello world")); 
```

最后，myGetText 函数通常实现为宏，例如：

```
printf("%s", tr("Hello world")); 
```

外部解析器（如在 gettext 中）可以使用此宏来识别要在源代码中翻译的文本并将它们作为列表存储在文件中。

myGetText 可以按如下方式实现：

```
std::map<std::string, std::map<std::string, std::string> > LangTextTab;
std::string GlobalVarLang="en"; //change to de for obtaining texts in German

void readLanguagesFromFile()
{

  LangTextTab["de"]["Hello"]="Hallo";
  LangTextTab["de"]["Bye"]="Auf Wiedersehen";
  LangTextTab["en"]["Hello"]="Hello";
  LangTextTab["en"]["Bye"]="Bye";
}

const char * myGetText( const char* origText )
{
  return LangTextTab[GlobalVarLang][origText ].c_str();
} 
```

请将该代码视为伪代码。我没有编译它。许多问题仍然需要提及：unicode、线程安全等......但是我希望这个例子能给你如何开始的想法。

# azure - 优化 Windows Azure 表存储？

> ID：16199683
> 
> 赞同：0
> 
> 时间：2013-04-24T18:37:07.147
> 
> 标签：azure, cloud, azure-storage, azure-table-storage

我有大约 28GB 的​​数据输入，用于存储在 Windows Azure 表存储中的超过 1350 万行。

6 列，除 1 个十进制数和 1 个日期时间外的所有整数。分区键长约 10 个字符。RowKey 是一个向导。

这是为了我的理智检查——这看起来对吗？

我从中迁移数据的 Sql 数据库有更多数据，只有 4.9GB。

有没有办法缩小尺寸？我不怀疑重命名属性会对此产生巨大影响。

*请注意，这只是用于估算长期成本的数据样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:53:23.377

嗯……有些事情似乎不太对劲。

*   每个属性都是一个键/值对，因此在计算中包含属性名称。
*   数据本身可能约为 75-100 个字节，包括平均每个 10 个字符的属性名称。4 个整数等于 16 个字节，十进制（双精度？） 8 个字节，时间戳 8 个字节。因此，让我们将每个实体最多舍入 100 个字节。
*   在 1400 万个实体中，您将拥有 100*1350 万，即大约 1.35 GB。

你的数字是大约。大一个数量级（每个实体大约 2,000 字节）。即使考虑到序列化的批量，我也不知道您是如何获得如此大的尺寸的。只是好奇：您是如何计算当前表大小的？而且...您是否进行了多次测试，从而从以前的运行中获得了更多数据？您是在测量表大小，还是在存储帐户中使用的总存储空间？如果是后者，可能还有其他表（例如诊断）也在消耗空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:55:48.200

重命名持久化实体中的属性应该会对大小产生一些影响。不幸的是，这仅适用于将来保存的数据。现有数据不会因为您重命名属性而改变

# php - 使用正则表达式解析维基百科列表和描述

> ID：16199686
> 
> 赞同：0
> 
> 时间：2013-04-24T18:37:18.857
> 
> 标签：php, regex

对正则表达式不太熟悉，我需要找到一种方法来解析来自维基百科的项目列表。我使用 Wikipedia 的 api.php 提取了内容，剩下的数据如下所示：

```
 ==Formal fallacies==
    A [[formal fallacy]] is an error in logic that...

    * [[Appeal to probability]] –  takes something for granted because...
    * [[Argument from fallacy]] –  assumes that if an argument ...
    * [[Base rate fallacy]] –  making a probability judgement...
    * [[Conjunction fallacy]] –  assumption that an outcome simultaneously...
    * [[Masked man fallacy]] –  ...

    ===Propositional fallacies===

    * [[Affirming a disjunct]] –  concluded that ...
    * [[Affirming the consequent]] –  the [[antecedent...
    * [[Denying the antecedent]] –  the [[consequent]] in... 
```

所以，我需要一种方法来提取数据，以便：

*   我们只关注以 * [[ 开头的行
*   * [[ ]] 之间的任何内容都是名称
*   - 后面的剩余内容是描述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:53:05.080

这可以完成工作：

```
preg_match_all('~^\h*+\*\h*\[\[(?<name>[a-z ]++)]]\h*+[-–]\h*+(?<description>.++)$~imu', $text, $results, PREG_SET_ORDER);
foreach($results as &$result) { 
    foreach($result as $key=>$value) {
        if (is_numeric($key)) unset($result[$key]); }
}
echo '<pre>' . print_r($results, true) . '</pre>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:50:07.303

首先更换

```
^((?!\*\s\[\[).)*$ 
```

与空白。这将删除不包含 * [[

删除换行符替换

```
^\n|\r$ 
```

与空白。

这是获取标题和描述的正则表达式：

```
^\s+\*\s\[\[([^\]\]]*)\]\]\s–(.*)
Title: "$1", Description: "$2" 
```

# css - 如何仅在 CSS 中定位 Chrome DevTools 窗口？

> ID：16199688
> 
> 赞同：2
> 
> 时间：2013-04-24T18:37:21.590
> 
> 标签：css, google-chrome, customization, google-chrome-devtools

几天前我遇到了[这个线程，希望摆脱 DevTools 窗口中的纯白色背景。](http://darcyclarke.me/design/skin-your-chrome-inspector/)`chrome-devtools://devtools/devTools.css`一件事导致另一件事，我开始使用基本 CSS 文件 ( ) 作为指南为更多元素添加规则。

**正在修改的文件可以在以下位置找到：**

**苹果电脑：** `~/Library/Application Support/Google/Chrome/Default/User StyleSheets/Custom.css`

**个人电脑：** `C:UsersYourUsernameAppDataLocalGoogleChromeUser DataDefaultUser StyleSheetsCustom.css`

**Ubuntu（铬）：** `~/.config/chromium/Default/User StyleSheets/Custom.css`

* * *

在中途，我在使用非常常见的选择器修改规则时开始遇到问题。我遇到的前两个是`#main`和`#toolbar`。在为更常见的选择器添加规则时，如果网页也使用这些相同的选择器（即 google 搜索），那么这些规则也适用于这些页面或站点。

我明白为什么会这样。我的问题是...

## 有没有办法通过这个 Custom.css 文件只针对 Chrome 中的 DevTools 窗口而不影响任何其他域？

我尝试过使用`@moz-document domain ()`and`@moz-document url-prefix ()`声明，但无法弄清楚...

我现在放弃太远了，所以我希望有人可以提供帮助。

* * *

这是我到目前为止的进度截图：![Chrome 开发者工具模组](https://i.stack.imgur.com/9MCmZ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:59:43.750

好的，所以在挖掘之后，我注意到我实际上错过了原始文章页面顶部的通知：

> 自从发表这篇文章以来，Chrome 团队已经为 Chrome 开发工具的容器添加了一个唯一的 ID。ID 是`#-webkit-web-inspector`（[Trac 参考](http://trac.webkit.org/changeset/99933/trunk/Source/WebCore/inspector/front-end/inspector.html)）

所以，我上面的帖子的修复是添加`body#-webkit-web-inspector`到你所有的选择器，它工作得很好，因此只针对 chromes DevTools 窗口。此外，**非常重要**......对于那些想要创建更完整主题的人，**强烈建议**通过“检查检查员”来完成。可以在此处找到有关如何执行此操作的更多信息：[如何检查 chrome 中的网络检查器？](https://stackoverflow.com/questions/12291138/how-do-you-inspect-the-web-inspector-in-chrome)

请参阅下面的“检查检查员”屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/txftn.jpg)

# android - 带有 ListActivity BackButton 的 Android 选项卡

> ID：16199692
> 
> 赞同：0
> 
> 时间：2013-04-24T18:37:36.763
> 
> 标签：android, android-layout, android-intent, android-widget

我有 3 个标签

表 1、表 2、表 3

```
public Class TabLayout extends TabActivity {
    Tab1,Tab2,Tab3
} 
```

每个 Tab 包含一个 ListActivity

这意味着

Tab1>>>Tab1ListActivity（包含图像和文本的列表）

Tab2>>>Tab2ListActivity（包含图像和文本的列表）

Tab3>>>Tab3ListActivity(带图片和文字的列表)

如果我单击（Tab1ListActivity，Tab2ListActivity 等......）中的任何列表项

我正在转发另一个活动（Tab1ListItemActivity、Tab2ListItemActivity 等......）

但我的实际要求是，如果假设我从 Tab2ListItemActivity 单击后退按钮，那么我

应该可以转发到 Tab2ListActivity

但是，如果我这样写我的代码

```
public class Tab2ListItemActivity extends Activity
{

    //on Back Button Pressed

    Intent intent=new Intent(Tab2ListItemActivity.this,TabLayout.class);

    startActivity(intent);

    Tab2ListItemActivity.this.finish();
} 
```

当我执行上面的代码时，我可以转发到我的 TabLayout(Tab1ListActivity) 但不能转发到 Tab2ListActivity？，因为

**Tab2ListItemActivity 与 Tab2ListActivity 相关**

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:46:16.847

1.  你为什么要覆盖后退按钮？我的意思是，让默认行为发生，然后按后退按钮将带您进入上一个活动。

2.  如果您真的想按照自己的方式进行操作，那么您需要**`tab id`**在启动 TabLayout 活动之前设置，并且在 TabLayout 内部**`onCreate()`**您需要检查**`tab id`**并启动相应的 ListActivity。这**`tab id is 1 by default`**就是为什么它把你带到`Tab1ListActivity`永远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:48:36.523

为什么不保留默认行为（不要覆盖 onBackPressed）？它将恢复到以前的活动。

**解决方案 1**：

不要完成 TabLayout 活动。并在 Tab2ListItemActivity 活动中保留后退按钮的默认实现。

**解决方案2**（硬，强制方式）：

在应该打开的选项卡上添加额外的意图。

```
Intent intent = new Intent(Tab2ListItemActivity.this, TabLayout.class);
intent.putExtra(TabLayout.EXTRA_TAB_TO_OPEN, 1);
startActivity(intent);
Tab2ListItemActivity.this.finish(); 
```

在 TabLayout 活动中

```
@Override
protected void onPostCreate(Bundle state) {
    super.onPostCreate(state);
    handleTab(getIntent());
}

@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    handleTab(intent);
}

private void handleTab(Intent intent) {
    // init tabs
    final int tab = intent.getIntExtra(EXTRA_TAB_TO_OPEN, -1);
    if (tab != -1) {
        getTabHost().setCurrentTab(tab);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T04:43:55.447

我遇到了同样的问题，但我使用这个解决方案来解决。

**TabSample.class**

```
public class TabSample extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TabHost tabHost = getTabHost();      

      tabHost.addTab(tabHost.newTabSpec("tab1")
              .setIndicator("OPT")
              .setContent(new Intent(this, TabGroup1Activity.class)));

      tabHost.addTab(tabHost.newTabSpec("tab2")
              .setIndicator("EDIT")
              .setContent(new Intent(this, TabGroup2Activity.class)));

      tabHost.setCurrentTab(1); 
    }
} 
```

**TabGroup1Activity.class**

```
public class TabGroup1Activity extends TabGroupActivity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        startChildActivity("OptionsActivity", new Intent(this,OptionsActivity.class));
    }
} 
```

**OptionsActivity.class**

```
public class OptionsActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.optionspage);

        Button back = (Button) findViewById(R.id.BackButton1);
        Button next = (Button) findViewById(R.id.NextButton1);

        OnTouchListener backListener = new OnTouchListener() {
                public boolean  onTouch  (View  v, MotionEvent  event) {
                    if (event.getAction()==MotionEvent.ACTION_UP){
                        finish();
                    }
                    return false;
                }
            };

        OnTouchListener nextListener = new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                 if (event.getAction()==MotionEvent.ACTION_UP){
                     Intent edit = new Intent(getParent(), EditActivity.class);
                    TabGroupActivity parentActivity = (TabGroupActivity)getParent();
                    parentActivity.startChildActivity("EditActivity", edit);
                    return true;
                 }
                 return false;
            }
        };

        back.setOnTouchListener(backListener);
        next.setOnTouchListener(nextListener);
    }
} 
```

最后通过**TabGroupActivity.class**保存所有 stat 实例。

```
public class TabGroupActivity extends ActivityGroup {
    private ArrayList<String> mIdList;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);       
        if (mIdList == null) mIdList = new ArrayList<String>();
    }

  @Override
  public void finishFromChild(Activity child) {
      LocalActivityManager manager = getLocalActivityManager();
      int index = mIdList.size()-1;

      if (index < 1) {
          finish();
          return;
      }

      manager.destroyActivity(mIdList.get(index), true);
      mIdList.remove(index); index--;
      String lastId = mIdList.get(index);
      Intent lastIntent = manager.getActivity(lastId).getIntent();
      Window newWindow = manager.startActivity(lastId, lastIntent);
      setContentView(newWindow.getDecorView());
  }

  public void startChildActivity(String Id, Intent intent) {     
      Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
      if (window != null) {
          mIdList.add(Id);
          setContentView(window.getDecorView()); 
      }    
  }

  @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_BACK) {
          //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
          return true;
      }
      return super.onKeyDown(keyCode, event);
  }

  @Override
  public boolean onKeyUp(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_BACK) {
          onBackPressed();
          return true;
      }
      return super.onKeyUp(keyCode, event);
  }

  public void  onBackPressed() {
      int length = mIdList.size();
      if ( length > 1) {
          Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
          current.finish();
      }  
  }
} 
```

这是一个很棒的解决方案，你可以试试这个。并进行适当的`manifest`输入。

# extjs4.2 - Extjs 重绘组件滞后

> ID：16199695
> 
> 赞同：0
> 
> 时间：2013-04-24T18:37:53.883
> 
> 标签：extjs4.2

我在 ExtJS 中有一个边框布局，其中有一个北面板，而北面板又嵌套了几个面板。

“父”北面板是可折叠的并且有一个分离器。问题是，每当我移动分离器时，其他面板都重新粉刷得太晚了。

示例：如果我的面板是 300 像素并且我将其调整为 320 像素，我的面板仍然是 300 像素。如果我再次调整大小，例如 350 像素，则面板将调整为 320 像素。

父面板的布局模式默认设置为“自动”。

当我将父面板的布局模式设置为“vbox”时，其他面板的宽度会相应调整。但是，这些子面板也是可展开/可折叠的，并且使用 vbox 布局我无法再流畅地展开它们。

任何人都知道发生了什么/如何解决滞后？

编辑：经过进一步调查，它似乎只影响面板的**标题**，而不是面板本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:51:38.150

我通过将以下内容添加到父面板来修复它（现在），即使它很滞后......

```
listeners: {
    resize: function() {
        Ext.each(this.items.items, function(child){
            var w = child.getWidth();
            child.getHeader().setWidth(w);
        });
    } 
} 
```

# internet-explorer - IE 7 和 8 的 CSS 内框阴影

> ID：16199699
> 
> 赞同：1
> 
> 时间：2013-04-24T18:38:12.920
> 
> 标签：internet-explorer, css

我有一个内盒阴影可以处理这个：

```
filter: progid:DXImageTransform.Microsoft.dropShadow (OffX='-2', OffY='0', Color='#e2e3e7') 
```

但它在 div 内形成了更多的实线......而不是渐变阴影。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:42:53.930

试试这个黑客：

```
filter: progid:DXImageTransform.Microsoft.DropShadow(OffX=-2, OffY=0, Color='#e2e3e7')
filter: progid:DXImageTransform.Microsoft.Blur(pixelradius=2) 
```

# java - 为什么我的 doFilterInternal 方法没有被调用？

> ID：16199700
> 
> 赞同：3
> 
> 时间：2013-04-24T18:38:22.080
> 
> 标签：java, spring, spring-security

我正在尝试实现一个过滤器，最终将记录系统内的用户导航。

我的春季环境是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<b:beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:b="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:sec="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                        http://www.springframework.org/schema/context
                        http://www.springframework.org/schema/context/spring-context-3.2.xsd
    http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!-- <sec:global-method-security secured-annotations="enabled" /> -->
<!-- Importa configuracion de seguridad de ldap -->
<import resource="classpath:/spring/ldap-config.xml" />

<sec:http pattern="/resources" security="none" />

<sec:http use-expressions="true" auto-config="true">

    <sec:intercept-url pattern="/seguridad/login.xhtml"
        access="permitAll" />
    <sec:intercept-url pattern="/*.jsp" access="isAuthenticated()" />
    <sec:intercept-url pattern="/" access="isAuthenticated()" />
    <sec:intercept-url pattern="/views/**" access="isAuthenticated()" />

    <sec:form-login login-page="/seguridad/login.xhtml"
        authentication-failure-url="/seguridad/login.xhtml" />

    <sec:logout invalidate-session="true" />

    <sec:access-denied-handler error-page="/seguridad/accesoDenegado.xhtml" />

    <sec:custom-filter ref="navegationFilter" after="FILTER_SECURITY_INTERCEPTOR" />
</sec:http>

<sec:authentication-manager alias="authenticationManager">
    <sec:authentication-provider
        user-service-ref="userDetailService" />
</sec:authentication-manager>

<b:bean id="navegationFilter" class="com.praxis.desvucem.web.service.seguridad.NavegationFilter" /> 
```

我的过滤器类是这样的：

```
package com.praxis.desvucem.web.service.seguridad;

import java.io.IOException;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.log4j.Logger;

import org.springframework.web.filter.RequestContextFilter;

import javax.servlet.http.HttpSession;

public class NavegationFilter extends RequestContextFilter {

protected static Logger logger = Logger.getLogger("service");

@Override
// @LogMe
protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)
        throws ServletException, IOException {

    logger.debug("Running Navegation filter");

    HttpSession session = request.getSession(false);

    if (session != null) {
        logger.debug("User is trying to access site for the second time");
        logger.debug("Request URI: " + request.getRequestURI());
    }
    else {
        logger.debug("Session is null");
    }

    logger.debug("Continue with remaining filters");
    filterChain.doFilter(request, response);
} 
```

}

所以当我运行它时，我没有收到任何错误，我的过滤器甚至被触发了，但它从来没有调用我的 doFilterInternal 方法。这是日志的摘录：

```
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.security.web.FilterChainProxy - /seguridad/login.xhtml at position 6 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.security.web.FilterChainProxy - /seguridad/login.xhtml at position 7 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9054b1a2: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@1c07a: RemoteIpAddress: 192.168.4.148; SessionId: 1v5ehc9tvkn7u1bft3w17n6wtv; Granted Authorities: ROLE_ANONYMOUS'
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.security.web.FilterChainProxy - /seguridad/login.xhtml at position 8 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.security.web.FilterChainProxy - /seguridad/login.xhtml at position 9 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.security.web.FilterChainProxy - /seguridad/login.xhtml at position 10 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.s.web.util.AntPathRequestMatcher - Checking match of request : '/seguridad/login.xhtml'; against '/seguridad/login.xhtml'
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /seguridad/login.xhtml; Attributes: [permitAll]
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9054b1a2: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@1c07a: RemoteIpAddress: 192.168.4.148; SessionId: 1v5ehc9tvkn7u1bft3w17n6wtv; Granted Authorities: ROLE_ANONYMOUS
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@9604a9e, returned: 1
13:33:02.889 [168531621@qtp-1002845369-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
13:33:02.890 [168531621@qtp-1002845369-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
13:33:02.890 [168531621@qtp-1002845369-5] DEBUG o.s.security.web.FilterChainProxy - /seguridad/login.xhtml at position 11 of 11 in additional filter chain; firing Filter: 'NavegationFilter'
13:33:02.890 [168531621@qtp-1002845369-5] DEBUG o.s.security.web.FilterChainProxy - /seguridad/login.xhtml reached end of additional filter chain; proceeding with original chain 
```

那么为什么不调用我的 doFilterInternal 呢？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:42:04.293

你为什么要延长`RequestContextFilter`？

`RequestContextFilter`是 的子类`OncePerRequestFilter`，其中包含防止每个请求多次调用过滤器类的逻辑。

# c# - 将散列和引号转义为正则表达式

> ID：16199701
> 
> 赞同：0
> 
> 时间：2013-04-24T18:38:27.243
> 
> 标签：c#, .net, regex, escaping

我正在尝试定义一个正则以与正则表达式验证器一起使用，该正则表达式验证器将文本框的内容限制为仅字母数字字符、斜杠 (/)、哈希 (#)、左右括号 (())、句点 (.)、撇号 (')、引号 (")、连字符 (-) 和空格。

我在使用哈希和引号时遇到问题，其他限制正在起作用，但是当我插入其中一个字符时，评估失败并且我收到错误消息。我试图在没有并使用逐字记录的情况下转义这些字符，这是我最后一次尝试。

```
@"[ a-zA-ZÀ-ÿ/().\'-""#]" 
```

对这些有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:40:36.220

正则表达式语言足够聪明，可以理解字符类中的句点和括号实际上是指字符，而不是它们通常出现在字符类之外时的模式。

在您的字符类中，您需要转义斜杠 ( `\`) 和连字符 ( `-`)，仅此而已：

```
@"[ a-zA-ZÀ-ÿ/().\\'\-""#]" 
```

如果您将连字符移动到字符类的末尾，您甚至不需要转义：

```
@"[ a-zA-ZÀ-ÿ/().\\'""#-]" 
```

当然，这仍然只匹配一个字符。如果要确保整个字符串仅包含这些字符，则需要在字符类之后使用 start ( `^`) 和 end ( `$`) 锚点和量词 ( `*`or `+`)。

我相信你的最终模式应该是这样的：

```
@"^[ a-zA-ZÀ-ÿ/().\\'""#-]*$" 
```

# mysql - Rails 3.2 + MySQL：错误：字段“created_at”没有默认值：INSERT INTO

> ID：16199710
> 
> 赞同：15
> 
> 时间：2013-04-24T18:38:50.783
> 
> 标签：mysql, ruby-on-rails, ruby, timestamp, insert-into

我创建了一个新的迁移，其中提到

```
...
t.timestamps 
```

在创建的表中添加了这两列

```
...
| created_at  | datetime   | NO (Null)  |     | NULL (Default)   |                
| updated_at  | datetime   | NO (Null)  |     | NULL (Default)   |
... 
```

当我想创建一个新项目时，我总是收到错误消息

```
Mysql2::Error: Field 'created_at' doesn't have a default value: INSERT INTO `table_name` (`first_col`, `second_col`) VALUES ('a', 'b') 
```

我错过了什么吗？我将此迷你应用程序发送给我的一个朋友，他能够成功运行它 -> 记录在数据库中创建。

我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-13T20:14:20.183

我刚刚在 Mac OS 上全新安装 MySql 时遇到了类似的情况。

我最终将其缩小到默认情况下打开“严格模式”的较新版本的 MySql 的组合，以及我的项目有一个带有一些可疑约束的表。有问题的表是`:has_and_belongs_to_many`关系中使用的“连接表”。不知何故，该表是用`:created_at`, 和对它们`:updated_at`有约束的属性创建的`:null => false`。Rails 3.2 不会自动填充连接`:habtm`关系表的时间戳字段。当关闭严格模式时，MySql 只会用归零日期填充 cols，例如`0000-00-00 00:00:00`. 打开严格模式会引发异常。

为了解决这个问题，我进行了迁移以允许时间戳字段为空。像这样：

```
class ChangeNullableForTimestampsOnThing1sThing2s < ActiveRecord::Migration
  def up
    change_column(:thing1s_thing2s, :created_at, :datetime, :null => true)
    change_column(:thing1s_thing2s, :updated_at, :datetime, :null => true)
  end

  def down
    change_column(:thing1s_thing2s, :created_at, :datetime, :null => false)
    change_column(:thing1s_thing2s, :updated_at, :datetime, :null => false)
  end
end 
```

老实说，如果不需要列，最好直接删除它们，但我们有几个特殊情况，它们实际上是手动设置的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-06T19:19:42.357

要添加到 Jeremy 的答案，在 Mac 上，您可以删除严格模式

```
> vi /usr/local/opt/mysql/my.cnf 
```

然后替换

```
sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION" 
```

和

```
sql-mode="NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION" 
```

# mysql - Mysql SET GLOBAL wait_timeout 可以只为 1 个数据库设置它吗？

> ID：16199711
> 
> 赞同：0
> 
> 时间：2013-04-24T18:38:52.000
> 
> 标签：mysql

我的 MySQL 服务器上有几个数据库。在其中一个上，我需要设置`wait_timeout`为最大值。其他数据库不需要这个。我想知道我是否可以为一个特定的数据库设置它？就像是：

```
SET database_name wait_timeout = 999999999 
```

另外，如果我将其设置为全局值，这会给我的其他数据库带来麻烦吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:57:15.697

毫不奇怪，全局变量是全局的。

为所有东西设置它会有什么害处吗？可能如果您的代码依赖于实际超时的查询，但通常这些都是错误。

你能处理在每个连接的基础上设置一些这些东西吗？

# javascript - 在javascript中选择框日期验证

> ID：16199717
> 
> 赞同：1
> 
> 时间：2013-04-24T18:39:17.007
> 
> 标签：javascript, validation, date

我什至对 javascript 都不陌生。只是通过一些教程学习，但我在 html 中有三个 slelct 框，如下所示。

html格式。

```
<table>
<form id="enrolment" name="enrolment"  onsubmit="return datevalidate();" action=""    method="POST" >
<div style="text-align: center"><h3>Enrolement Form</h3></div>
<hr>
<div style="text-align: center"><h4>Personal details.</h4></div>
<hr>
<tr>
<td align="left">Course Date:</td>
<td align="left"> 
<select name="Coursedate" id="Coursedate">
<option selected="" value="Default">Date</option>
<option value="1">1</option>
<option value="2">2</optio

n>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>
<option value="25">25</option>
<option value="26">26</option>
<option value="27">27</option>
<option value="28">28</option>
<option value="29">29</option>
<option value="30">30</option>
<option value="31">31</option>
</select>
<select name="coursemonth" id="coursemonth">
<option selected="" value="Default">Month</option>
<option value="01">01</option>
<option value="02">02</option>
<option value="03">03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
</select>
<select name="courseyear" id="courseyear">
<option selected="" value="Default">year</option>
<option value="2014">2014</option>
<option value="2013">2013</option>
<option value="2012">2012</option>
<option value="2011">2011</option>
<option value="2010">2010</option>
<option value="2009">2009</option>
<option value="2008">2008</option>
<option value="2007">2007</option>
<option value="2006">2006</option>
<option value="2005">2005</option>
<option value="2004">2004</option>
<option value="2003">2003</option>
<option value="2002">2002</option>
<option value="2001">2001</option>
<option value="2000">2000</option>
<option value="1999">1999</option>
<option value="1998">1998</option>
<option value="1997">1997</option>
<option value="1996">1996</option>
<option value="1995">1995</option>
<option value="1994">1994</option>
<option value="1993">1993</option>
<option value="1992">1992</option>
<option value="1991">1991</option>
<option value="1990">1990</option>
<option value="1989">1989</option>
<option value="1988">1988</option>
<option value="1987">1987</option>
<option value="1986">1986</option>
<option value="1985">1985</option>
<option value="1984">1984</option>
<option value="1983">1983</option>
<option value="1982">1982</option>
<option value="1981">1981</option>
<option value="1980">1980</option>
<option value="1979">1979</option>
<option value="1978">1978</option>
<option value="1977">1977</option>
<option value="1976">1976</option>
<option value="1975">1975</option>
<option value="1974">1974</option>
<option value="1973">1973</option>
<option value="1972">1972</option>
<option value="1971">1971</option>
<option value="1970">1970</option>
<option value="1969">1969</option>
<option value="1968">1968</option>
<option value="1967">1967</option>
<option value="1966">1966</option>
<option value="1965">1965</option>
<option value="1964">1964</option>
<option value="1963">1963</option>
<option value="1962">1962</option>
<option value="1961">1961</option>
<option value="1960">1960</option>
<option value="1959">1959</option>
<option value="1958">1958</option>
<option value="1957">1957</option>
<option value="1956">1956</option>
<option value="1955">1955</option>
<option value="1954">1954</option>
<option value="1953">1953</option>
<option value="1952">1952</option>
<option value="1951">1951</option>
<option value="1950">1950</option>
<option value="1949">1949</option>
<option value="1948">1948</option>
<option value="1947">1947</option>
<option value="1946">1946</option>
<option value="1945">1945</option>
<option value="1944">1944</option>
<option value="1943">1943</option>
<option value="1942">1942</option>
<option value="1941">1941</option>
<option value="1940">1940</option>
<option value="1939">1939</option>
<option value="1938">1938</option>
<option value="1937">1937</option>
<option value="1936">1936</option>
<option value="1935">1935</option>
<option value="1934">1934</option>
<option value="1933">1933</option>
<option value="1932">1932</option>
<option value="1931">1931</option>
<option value="1930">1930</option>
<option value="1929">1929</option>
<option value="1928">1928</option>
<option value="1927">1927</option>
<option value="1926">1926</option>
<option value="1925">1925</option>
<option value="1924">1924</option>
<option value="1923">1923</option>
<option value="1922">1922</option>
<option value="1921">1921</option>
<option value="1920">1920</option>
<option value="1919">1919</option>
<option value="1918">1918</option>
<option value="1917">1917</option>
<option value="1916">1916</option>
<option value="1915">1915</option>
<option value="1914">1914</option>
<option value="1913">1913</option>
</select>
</td>
</tr>
<tr>
<td>
<input type="submit" name="submit" value="validate">
</td>
</tr>
</form>
</table> 
```

而javascript如下

```
 <script>
function datevalidate()
{
var d = new Date();
var date = d.getDate();
var month = d.getMonth()+1;
var year = d.getFullYear();
var cdate = document.getElementById("Coursedate").value;
var cmonth = document.getElementById("coursemonth").value;
var cyear = document.getElementById("courseyear").value;
if (cdate > date && cmonth >= month && cyear >= year)
{
alert("Date is greater");
}
else 
if(cdate < date && cmonth > month && cyear >= year)
{
alert("Month and year greater");
}
else 
if(cdate < date && cmonth >= month && cyear > year)
{
alert(" year greater");
}
else 
if(cdate > date && cmonth < month && cyear > year)
{
alert(" year greater");
}

}
</script> 
```

不知何故，我觉得 mysqlf 这不是很令人印象深刻。

如何在 javascript 中获得完整的验证。有教程吗？我需要日期不应超过当前日期。

提前致谢

印度阿莫德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:06:13.477

为了更好地处理 Javascript 中的日期，请查看另一个问题：[使用 JavaScript 比较两个日期](https://stackoverflow.com/questions/492994/compare-dates-with-javascript)。

话虽如此，既然您在谈论验证，因为 Javascript 是一种客户端语言，您永远无法使用您的代码获得完整的日期验证。有人可以通过禁用 Javascript 来完全禁用代码，或者他们可以重写代码并将其用作 XSS 攻击的框架。

最好的方法是使用 PHP、.Net、Java 等服务器端语言。

最终，您将让代码仅打印今天日期之前的日期，然后有人可以在未来提交日期的唯一方法是他们传递修改后的变量。然后，与其使用客户端语言进行过滤，不如使用服务器端语言来验证代码，并在将查询传递到数据库之前确保变量在参数内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:17:12.087

```
// day : 1-31
// month : 1-12
function dateIsValid(day, month, year) {
    return !isNaN(new Date([month, day, year].join('/')).getDate());
} 
```

它不是最漂亮的，但我依赖于这样一个事实，即传递给 JavaScript 中 Date 类的构造函数的无效日期将为您返回一个时间戳为 NaN 的日期对象。

所以很明显，这可以处理像闰年这样的极端情况。

编辑：

实际上，这并不是万无一失的。天数（最多 31 天）可以溢出到下个月。

```
new Date([2, 31, 2012].join('/')); // Fri Mar 02 2012 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-25T08:52:52.207

我已经使用 javascript 完成了日期验证，例如日、月和年验证

```
<html>
<head>
        <title></title>
        <script language = "Javascript">
                // Required variable
                var digits="0123456789";
                //non-digit Characters which are allowed in phone number
                var phoneNumChacters="()-";
                //Chacter are allowed in international phone numeber
                var validWorldPhoneCars=phoneNumChacters+ "+";
                var minDigitsphoneNum=9;

                function isInteger(k)
                {
                        var i;
                        for(i=0; i<k.lenght; i++)
                        {
                                var h=k.charAt(i);
                                if((h<"0") ||(h>"9"))
                                        return false;
                        }
                        // all are numbers
                        return true;
                }
                function trim(k)
                {
                        var i;
                        var returnStringValue ="";
                        //character is not a whitespace, append to returnString.
                        for(i=0; i<k.lenght; i++)
                        {
                                var h=k.charAt(i);
                                if(h!=" ")
                                        returnStringValue +=h;
                        }
                        return returnStringValue;
                }
                function stripCharsInBag(k, bag)
                {
                        var i;
                        var returnStringValue="";
                        for(i=0; i<k.lenght; i++)
                        {
                                var h=k.charAt(i);
                                if(bag.indexOf(h)==-1)
                                        returnStringValue +=h;
                        }
                        return returnStringValue;
                }
                function CheckInternationalPhoneNum(strPhone)
                {
                        var bracket =3;
                        strPhone=trim(strPhone);
                        if(strPhone.indexOf("+")>1)
                                return false;
                        if(strPhone.indexOf("-")!=-1)
                                bracket=bracket+1;
                        if(strPhone.indexOf("(")!=-1 && strPhone.indexOf("(")>bracket)
                                return false;
                        var brchr=strPhone.indexOf("(");
                        if(strPhone.indexOf("(")!=-1 && strPhone.charAt(brchr+2)!=")")
                                return false;
                        if(strPhone.indexOf("(")==-1 && strPhone.indexOf(")")!=-1)
                                return false;
                        k=stripCharsInBag(strPhone,validWorldPhoneCars);
                        return (isInteger(k) && k.lenght>=minDigitsphoneNum);
                }
                function ValidateForm()
                {
                        var phoneNumber =document.sampleForm.txtPhone;

                        if((phoneNumber.value==null)||(phoneNumber.value==""))
                        {
                                alert ("Please enter you phone number");
                                phoneNumber.focus();
                                return false;
                        }
                        if(phoneNumber.value<9)
                        {
                                alert("Number is Less then 9 ");
                                phoneNumber.focus();
                                return false;
                        }
                        if(CheckInternationalPhoneNum(phoneNumber.value)==false)
                        {
                                alert("Enter a valid number");
                                phoneNumber.value="";
                                phoneNumber.focus();
                                return false;
                        }
                }

        </script>
</head>
<body>
        <center>
        <form name="sampleForm" method="post" action="" onSubmit="return ValidateForm()">
        <p>Enter a phone number : <input type="text" name="txtPhone"></p>
        <p><input type="submit" name="Submit" value="Submit"></p>
    </form>
   </center>
</body>
</html> 
```

# php - 根据回答的问题总结分数

> ID：16199720
> 
> 赞同：0
> 
> 时间：2013-04-24T18:39:41.187
> 
> 标签：php, sum, match

该代码是单门课程的简答测验。我想做的是将学生的反应与存储在数据库中的答案相匹配。匹配的答案（或关键字）计为一分。我无法计算总分。preg_match() 结果已经正确。这是代码：

```
 <?php
    ini_set('display_errors',1);
    error_reporting(E_ALL ^ E_NOTICE);
    include("dbconn.php");
    session_start();

    if(isset($_POST['Submit']))
    {   
    $id = $_SESSION['tf1_sid'];
    $qno = $_POST['q_no'];
    ?>

    <head></head>
    <body>
    <form id="form1" name="form1" method="post" action="">
    <table width="590" border="1" cellpadding="2" align="center">
    <?php

    //db query to obtain i_id - to insert to RESULT table
    $sql_i = "SELECT i_id FROM ins_stud WHERE s_id = '$id'";
    $query_i = mysql_query($sql_i) or die("MySQL Error: " . mysql_error());
    $data_i = mysql_fetch_assoc($query_i);
    $ins_id = $data_i['i_id'];
    //echo $ins_id;

    //$correct = 0;
    $total = 0;
    $arr_ind = 1;
    $atext = array(1);
    $ans = array(1);

    for($i=1;$i<=$qno;$i++){
    $repStr = str_replace("1", $i, "answer_1");
    //echo "Question ". $i .": ". $repStr;
    $ans[] = $_POST[$repStr];
    //echo $ans;

    $sql_check = "SELECT q_ans FROM question WHERE q_id='$i'";
    $query_ch = mysql_query($sql_check) or die("MySQL Error: " . mysql_error());
    $data_ch = mysql_fetch_assoc($query_ch);
    $atext[] = $data_ch['q_ans'];

    // insert answer to table
    //$sql_eval = "INSERT INTO eval_set (s_id, q_id, response, response_value, created) VALUES ('" . $id . "', '" . $i . "', '" . $ans . "', '" . $correct . "', CURDATE())";
    //mysql_query($sql_eval) or die ("Error: " . mysql_error());        
    }

    // insert result to table
    //$sql_result = "INSERT INTO result (r_score, s_id, i_id) VALUES ('" . $total . "','" . $id . "','" . $ins_id . "')";
    //mysql_query($sql_result) or die ("Error: " . mysql_error());

    // db query for questions
    $sql_q  = "SELECT q_id, q_no, q_text, q_ans, q_help FROM question";
    $query_q = mysql_query($sql_q) or die("MySQL Error: " . mysql_error());

    // start loop for questions & answers
    $rad = 1;
    while($data_q = mysql_fetch_array($query_q, MYSQL_ASSOC)){     

    echo "<tr><td width='20' align='center' valign='top'><label><br><input name='q_no' size='1' type='hidden' value=". $data_q['q_no'] .">". $data_q['q_no'] ."</label></td>";
    echo "<td><p align='justify'>". $data_q['q_text'] ."<br />";

    if(preg_match_all("/". $ans[$arr_ind]. "/i", " . $atext[$arr_ind] . ")){
    echo "Something matches";
$total = total + 1;
}
    //else if (preg_match("/^$/", " . $atext[$arr_ind] . "))
    //echo "Empty string";
    else
    echo "Wrong";

    echo "<p align='justify'><b>YOUR ANSWER: </b>". $ans[$arr_ind]. "</p>";
    echo "<p align='justify'><label><b>SUGGESTED ANSWER:</b> <br><input name='answer_".$rad."' type='hidden' value=''>". $atext[$arr_ind] . "</label></p>";

    $rad++;
    $arr_ind++;
    }
    mysql_free_result($query_q);
    include("dbconn.php");

    echo "</table>";
    echo "<h2>" . $total . " questions correct. - Answer Review</h2>";  
    echo "</form>";
    ?>
    </body>
    </html>
    <?php
    }
    else
    {
    header("Location:s_login.php");
    }
    // close db connection
    mysql_close($dbconn);
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:02:49.023

你错过了一个 $ ：

```
$total = total + 1; 
```

或者只是使用：

```
$total++; 
```

# php - 以粉丝页面而非用户身份发布照片（以用户身份发布 100%）

> ID：16199722
> 
> 赞同：0
> 
> 时间：2013-04-24T18:39:48.227
> 
> 标签：php, facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试使用 Facebook API 在我的粉丝页面上发布照片，但帖子显示为我的用户而不是粉丝页面。

我知道我应该使用页面访问令牌而不是应用程序用户访问令牌，但是当我放置页面访问令牌时，我得到：

**致命错误：未捕获的 OAuthException：请求此资源需要用户访问令牌。**

我应该怎么做才能将图像作为粉丝页面本身而不是应用程序所有者发布？

这是工作代码：

```
require_once('src/facebook.php');

$pageid = "xxxxxxxxxxxxx";
$accessToken = "xxxxxxxxxxxxxxxx";

$facebook = new Facebook(array(
    "appId"  => "xxxxxxxxxxxxxx",
    "secret" => "xxxxxxxxxxxxxxxxxxxx",
    "cookie" => true,
));

$args = array(
    'access_token' => $accessToken,
    "url"      => "http://example.com/image.jpg",
    "message"  => "Picture Caption",
    );    

$facebook->api("/$pageid/photos?access_token='.$accessToken","post",$args); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:07:34.853

我只是弄清楚出了什么问题。我使用了错误的页面访问令牌，获取**正确**页面访问令牌的正确方法是通过以下链接：

[https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN](https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN)

您甚至可以在调试工具上尝试新的访问令牌：

[https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)

如果您这样做，您将看到一个名为“个人资料 ID”的字段，该字段必须与您的粉丝页面 ID 相同，并且可能会。

现在我所有的帖子都显示为我的粉丝页面。

希望其他人觉得这很有用。

# clojure - 在 Korma 中将计算列添加到查询结果中

> ID：16199724
> 
> 赞同：3
> 
> 时间：2013-04-24T18:39:54.243
> 
> 标签：clojure, korma

我该怎么做

```
SELECT *, id=1 AS calc_column FROM table 
```

在科尔马？（显然，`id=1`只是一个简单的例子）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T05:48:35.260

Korma has `sqlfn`which can be used in `fields`as show [here](https://github.com/korma/Korma/blob/master/test/korma/test/core.clj#L234)。如果这不符合您的需要，那么您始终可以[`raw`](https://github.com/korma/Korma/blob/master/src/korma/core.clj#L394)在主查询中输入原始 sql。

# javascript - JavaScript - 数字多拆分

> ID：16199730
> 
> 赞同：0
> 
> 时间：2013-04-24T18:40:20.720
> 
> 标签：javascript

我在 JS 中有一个数字，例如`2,5`或`2.5`

我想使用多重拆分，例如

```
'2.5'.split(/,|./) 
```

但它给了我错误的输出，为什么？：

```
["", "", "", ""] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:41:40.033

`/,|./`是不正确的正则表达式。它应该在字符类中`/[,.]/`或被转义`/,|\./`

这有效：`'2.5'.split(/[.,]/)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T18:42:26.187

逃脱. 正则表达式元字符

```
'2.5'.split(/,|\./) 
```

# c# - 针对嵌套的 OData 创建动态 linq 表达式树

> ID：16199734
> 
> 赞同：3
> 
> 时间：2013-04-24T18:40:35.627
> 
> 标签：c#, linq, dynamic, odata, expand

我需要为针对 OData Web 服务的动态搜索创建一个动态 linq 表达式。基本搜索正在工作，但有嵌套表不起作用。

格式为 webservice/Books('id')/Author

我可以让它工作

```
var authors = from p in webservice.Books.Expand("Author")                        
where p.Title.Equals("Watership Down") && p.Author.FirstName.Equals("Richard") 
select p; 
```

我已将其更改为以下内容：

```
var authors = webservice.Books.Expand("Author").Where(condition); 
```

我构造条件如下：

```
ParameterExpression pe = Expression.Parameter(typeof(webservice.Books), "p");

Expression left = Expression.Property(pe, "Title");
Expression right = Expression.Constant("Watership Down"); 
Expression predicateBody = Expression.Equal(left, right);             

Expression<Func<webservice.Books, bool>> condition = Expression.Lambda
            <Func<webservice.Books, bool>>(predicateBody, new ParameterExpression[] { pe }); 
```

哪个有效。

所以如果我尝试

```
ParameterExpression pe = Expression.Parameter(typeof(webservice.Books), "p");

Expression left = Expression.Property(pe, "Title");
Expression right = Expression.Constant("Watership Down"); 
Expression e = Expression.Equal(left, right);             

left = Expression.Property(pe, "Author.FirstName");
right = Expression.Constant("Richard"); 
Expression e2 = Expression.Equal(left, right);             

Expression predicateBody = Expression.And(e, e2);             

Expression<Func<webservice.Books, bool>> condition = Expression.Lambda
            <Func<webservice.Books, bool>>(predicateBody, new ParameterExpression[] { pe }); 
```

但它不起作用。它不将 Author.FirstName 识别为属性。我认为这是因为我将 pe 声明为 Books 类型，所以它看不到嵌套的 Author 但我不知道如何声明它，所以它会看到嵌套的数据。

确切的错误消息是没有为类型“webServices.Books”定义实例属性“Author.FirstName”

有谁知道如何做到这一点？甚至可能吗？感谢任何人对此提供的任何帮助。

为了解决这个错误，我必须做的是改变 left = Expression.Property(pe, "Author.FirstName"); to Expression property = Expression.Property(pe, "Author"); left = Expression.Property(property, "FirstName");

现在它起作用了！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:19:53.090

在这种情况下

```
left = Expression.Property(pe, "Author.FirstName"); 
```

“Author.FirstName”是*属性路径*，而不是*属性*。属性路径通常适用于数据绑定，但不适用于表达式树 - 您需要更加明确。你需要把它改成这样

```
var author = Expression.Property(pe, "Author");
left = Expression.Property(author, "FirstName"); 
```

# r - 数据帧，带文件的输入和输出

> ID：16199738
> 
> 赞同：0
> 
> 时间：2013-04-24T18:40:36.963
> 
> 标签：r

我正在寻找一种简单的方法来读取/写入基本数据框：

```
symbMat <- matrix("AJY", "6A", "6J", 0, 0, ncol=5)
colnames(symbMat) <- c("Symb1","Symb2","Symb3","lastVstamp","completedRows")
testFrame<-List(symbMat,matrix(c("date1","date2"))) 
```

所以 testFrame 现在看起来像

```
[[1]]
 Symb1 Symb2 Symb3 lastVstamp completedRows
[1,] "AJY" "6A"  "6J"  "0"        "0"          

[[2]]
     [,1]   
[1,] "date1"
[2,] "date2" 
```

所以问题是 read.table("MultiTable", header=TRUE) 给了我一个文件，将其全部视为一个 2x6 矩阵（最后一列的名称混乱）

```
"Symb1" "Symb2" "Symb3" "lastVstamp" "completedRows" "structure.c..date1....date2.....Dim...c.2L..1L.."
"1" "AJY" "6A" "6J" "0" "0" "date1"
"2" "AJY" "6A" "6J" "0" "0" "date2" 
```

尽管

```
 install.packages("MASS")
 library(MASS)
 write.matrix(testFrame,file="MultiTable") 
```

只是做一个文件

AJY, 6A , 6J , 0 , 0
日期1, 日期2

这显然是相当多的信息丢失。此外，没有 read.matrix() 所以我不知道那个函数的意义是什么

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:59:01.650

首先，`testFrame`不是一个`data.frame`。A`data.frame`是 R 中非常特殊的对象类型。但是，这不会影响保存和重新加载数据的能力。有两组用于保存和加载数据的函数：`save()`/`load()`和`dump()`/ `source()`。第一个创建二进制格式，第二个创建文本格式（尽管结构与屏幕上打印的不同）。

修复示例中的拼写错误：

```
symbMat <- matrix(c("AJY", "6A", "6J", 0, 0), ncol=5)
colnames(symbMat) <- c("Symb1","Symb2","Symb3","lastVstamp","completedRows")
testFrame<-list(symbMat,matrix(c("date1","date2"))) 
```

`testFrame`是

```
> testFrame
[[1]]
     Symb1 Symb2 Symb3 lastVstamp completedRows
[1,] "AJY" "6A"  "6J"  "0"        "0"          

[[2]]
     [,1]   
[1,] "date1"
[2,] "date2" 
```

`save()`和`load()`：_

```
save(testFrame, file="temp.RData")
load(file="temp.RData") 
```

`dump()`和`source()`：_

```
dump("testFrame", file="temp.R")
source(file="temp.R") 
```

注意的第一个参数`dump()`被引用。 `temp.R`那么是

```
testFrame <-
list(structure(c("AJY", "6A", "6J", "0", "0"), .Dim = c(1L, 5L
), .Dimnames = list(NULL, c("Symb1", "Symb2", "Symb3", "lastVstamp", 
"completedRows"))), structure(c("date1", "date2"), .Dim = c(2L, 
1L))) 
```

它以相同的方式表示对象`dput()`。

# c# - 如何在同一个 MVC4 解决方案中的单独项目中使用类库？

> ID：16199739
> 
> 赞同：2
> 
> 时间：2013-04-24T18:40:44.777
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

所以我试图从我在一个单独的项目中但在同一个 MVC4 解决方案中编写的自定义类库中访问几个 IsInteger/IsNumeric 函数。

我有一个名为 MyHelpers（类库项目）的类库，另一个名为 Portal（一个 Web 应用程序项目），因此在同一个 MVC4 解决方案中有两个独立的项目。在成功构建 MyHelpers 并将 .dll 放入 Portal 项目的 bin 文件夹并添加对 MyHelpers.dll 的引用后，在添加“使用 MyHelpers;”时，我仍然无法在我的 Controller .cs 文件中找到对它的引用；陈述。

为什么会这样？我错过了什么吗？我认为如果我添加对 .dll 的引用并使用“使用”语句，它将让我引用类库中的函数。是什么赋予了？

请提前提供帮助和感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:46:52.987

在您的 MVC4 项目中，添加对 MyHelpers 项目的引用。这样，当您再次构建 MyHelpers 时，您的 MVC4 项目将在 bin 目录中拥有最新版本的 MyHelpers.dll。除非您已将输出目录更改为 MVC4 项目的 bin 目录，否则不应直接直接引用 dll。请务必检查您的输出目录并确保所有必要的 dll 都在您的 MVC4 应用程序的目录中。

# ios - 贝塞尔路径的透明区域不允许用户交互

> ID：16199743
> 
> 赞同：1
> 
> 时间：2013-04-24T18:40:53.220
> 
> 标签：ios, objective-c, events, transparency, uibezierpath

我有一个或多或少具有弧形的 BezierPath，问题是我希望用户能够在弧内点击（它可能是更清晰的门）但不是在弧上. 但我不能这样做，就像弧内的空间也是 BezierPath 的一部分，但唯一的是它是透明的。

创建 BezierPath 的代码如下：

```
- (UIImageView*)drawBezierPath {
    //// Bezier Drawing
    UIBezierPath* bezierPath = [UIBezierPath bezierPath];
    [bezierPath moveToPoint: CGPointMake(55.5, 643.5)];
    [bezierPath addLineToPoint: CGPointMake(55.5, 417)];
    [bezierPath addLineToPoint: CGPointMake(63, 399)];
    [bezierPath addLineToPoint: CGPointMake(69.5, 381.5)];
    [bezierPath addLineToPoint: CGPointMake(79, 363.5)];
    [bezierPath addLineToPoint: CGPointMake(91, 346)];
    [bezierPath addLineToPoint: CGPointMake(102, 331)];
    [bezierPath addLineToPoint: CGPointMake(114.5, 314.5)];
    [bezierPath addLineToPoint: CGPointMake(127.5, 301.5)];
    [bezierPath addLineToPoint: CGPointMake(142.5, 286)];
    [bezierPath addLineToPoint: CGPointMake(156.5, 273.5)];
    [bezierPath addLineToPoint: CGPointMake(171, 260)];
    [bezierPath addLineToPoint: CGPointMake(189.5, 247.5)];
    [bezierPath addLineToPoint: CGPointMake(207.5, 234.5)];
    [bezierPath addLineToPoint: CGPointMake(229.5, 222.5)];
    [bezierPath addLineToPoint: CGPointMake(250, 211)];
    [bezierPath addLineToPoint: CGPointMake(272.5, 202)];
    [bezierPath addLineToPoint: CGPointMake(295.5, 194)];
    [bezierPath addLineToPoint: CGPointMake(321, 186.5)];
    [bezierPath addLineToPoint: CGPointMake(349, 180.5)];
    [bezierPath addLineToPoint: CGPointMake(375, 179)];
    [bezierPath addLineToPoint: CGPointMake(398, 177.5)];
    [bezierPath addLineToPoint: CGPointMake(424.5, 177.5)];
    [bezierPath addLineToPoint: CGPointMake(448.5, 180.5)];
    [bezierPath addLineToPoint: CGPointMake(473, 184.5)];
    [bezierPath addLineToPoint: CGPointMake(498.5, 192)];
    [bezierPath addLineToPoint: CGPointMake(521.5, 200)];
    [bezierPath addLineToPoint: CGPointMake(544.5, 209.5)];
    [bezierPath addLineToPoint: CGPointMake(565.5, 220)];
    [bezierPath addLineToPoint: CGPointMake(584, 231)];
    [bezierPath addLineToPoint: CGPointMake(603, 244)];
    [bezierPath addLineToPoint: CGPointMake(623.5, 259)];
    [bezierPath addLineToPoint: CGPointMake(640.5, 274)];
    [bezierPath addLineToPoint: CGPointMake(657.5, 290.5)];
    [bezierPath addLineToPoint: CGPointMake(673, 308)];
    [bezierPath addLineToPoint: CGPointMake(688.5, 327)];
    [bezierPath addLineToPoint: CGPointMake(702.5, 346.5)];
    [bezierPath addLineToPoint: CGPointMake(715, 368)];
    [bezierPath addLineToPoint: CGPointMake(727, 392.5)];
    [bezierPath addLineToPoint: CGPointMake(736.5, 414.5)];
    [bezierPath addLineToPoint: CGPointMake(736.5, 644)];
    [bezierPath addLineToPoint: CGPointMake(789.5, 644.5)];
    [bezierPath addLineToPoint: CGPointMake(789.5, 1)];
    [bezierPath addLineToPoint: CGPointMake(2.5, 1)];
    [bezierPath addLineToPoint: CGPointMake(2, 645)];
    [bezierPath addLineToPoint: CGPointMake(55.5, 643.5)];
    [bezierPath closePath];
    [[UIColor blackColor] setFill];
    [bezierPath fill];
    [[UIColor blackColor] setStroke];
    bezierPath.lineWidth = 1;
    [bezierPath stroke];

    UIGraphicsBeginImageContext(CGSizeMake(800, 800));

    //this gets the graphic context
    CGContextRef context = UIGraphicsGetCurrentContext();

    //you can stroke and/or fill
    CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
    CGContextSetFillColorWithColor(context, [UIColor blackColor].CGColor);
    [bezierPath fill];
    [bezierPath stroke];

    //now get the image from the context
    UIImage *bezierImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    UIImageView *bezierImageView = [[UIImageView alloc]initWithImage:bezierImage];
    bezierImageView.alpha = 0;
    bezierImageView.frame = CGRectMake(115, 92, bezierImageView.frame.size.width, bezierImageView.frame.size.height);
    return bezierImageView;
} 
```

在这种方法中，我创建了 bezierPath 并将其保存在 UIImageView 中，以便将其添加到另一个视图中。

我以为 bezierPath 用于绘制奇怪的表格并只占用该表格的空间，但现在我不知道该怎么想！

有什么想法吗？谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:15:03.183

第 1 步：添加`QuartzCore.Framwork`您的项目

第 2 步：`#import <QuartzCore/QuartzCore.h>`在您的 .h 文件中

`UIBezierPath *path;`第 3 步：在 .h 文件中定义一个变量

`viewDidLoad`第 4 步：在您的方法中绘制三角形

```
path = [UIBezierPath bezierPath];
[path moveToPoint:CGPointMake(100, 100)];
[path addLineToPoint:CGPointMake(50, 200)];
[path addLineToPoint:CGPointMake(150, 200)];
[path closePath];
[path setLineWidth:2.0f];

// Draw a shape Layer with Triangle Path
CAShapeLayer *shapeLayer = [CAShapeLayer layer];
shapeLayer.fillColor   = [UIColor redColor].CGColor;
shapeLayer.strokeColor = [UIColor yellowColor].CGColor;
shapeLayer.lineWidth   = 2;
shapeLayer.path = path.CGPath;

// Add it to your view
[self.view.layer addSublayer:shapeLayer]; 
```

第 5 步：实现以下触摸方法来检测视图和形状上的触摸

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    CGPoint currentPoint = [touch locationInView:self.view];
    if([path containsPoint:currentPoint])
    {
        NSLog(@"its Inside Triangle Path");
    }
    else
    {
        NSLog(@"OutSide Shape");
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];
    if([path containsPoint:currentPoint])
    {
        NSLog(@"its Inside Triangle Path");
    }
    else
    {
        NSLog(@"OutSide Shape");
    }
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];
    if([path containsPoint:currentPoint])
    {
        NSLog(@"its Inside Triangle Path");
    }
    else
    {
        NSLog(@"OutSide Shape");
    }
} 
```

您可以像这样创建任何形状并进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:42:41.657

如何绘制视图（您的贝塞尔路径）与它们如何与用户交互（触摸）没有太大关系。

我认为您应该[`-pointInside:withEvent:`](https://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW2)在您的`UIView`子类中实现，此方法确定触摸事件是否在视图内。`NO`当该点不可触摸时，您应该返回。

类似`-touchesBegan:`的方法也可以使用，但稍微复杂一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:26:51.870

您需要在视图中查找触摸事件（例如 TouchesBegan、TouchesMoved、TouchesEnded、TouchesCancelled）。当触摸发生时，您可以在视图中获取触摸的位置。您可以使用此位置并检查该点是否在您的路径内。

看到这篇文章：[路径交互](https://stackoverflow.com/questions/6432770/how-to-draw-and-interact-with-uibezierpath)

# javascript - Javascript警报显示两次

> ID：16199745
> 
> 赞同：3
> 
> 时间：2013-04-24T18:41:04.863
> 
> 标签：javascript

我正在尝试在 Drupal 7 中使用一个名为 disclaimer 的模块，但警告“您必须输入您出生的年份”。显示两次，然后继续重定向到您不应该看到的 URL，直到您确认您已超过 18 岁。

我尝试了这些建议，但它仍然出现了两次。我认为问题可能是输入按钮操作。这是它的功能。

```
 Drupal.behaviors.disclaimer = {
  attach: function (context, settings) {
    // action on enter button
    $('#disclaimer_enter', context).click(function () {
      var check = true;
      // age form is set
      if (settings.disclaimer.ageform == 1) {
        var check = Drupal.checkAge();
      }
      // everything good, add cookie and close colorbox
      if (check) {
        $.cookie(settings.disclaimer.cookie_name, '1', { path: settings.disclaimer.cookie_path });
        $.colorbox.remove();
      }
    });
  },
}; 
```

}

```
 Drupal.checkAge = function () {
    var now = new Date();
    var date = now.getDate();
    var month = now.getMonth() + 1;
    var year = now.getFullYear();
    var optmonth = jQuery("#edit-disclaimer-age-month option:selected").val();
    var optday = jQuery("#edit-disclaimer-age-day option:selected").val();
    var optyear = jQuery("#edit-disclaimer-age-year option:selected").val();
    var age = year - optyear;
    if (optmonth > month) {age--;} else {if(optmonth == month && optday >= date) {age--;}}
    // if current year, form not set
    if (optyear == year) {
      alert(Drupal.t("You must enter the year you were born in."));
      return alert;
    // if under age, alert and redirect !
    } else if (age < Drupal.settings.disclaimer.limit) {
      alert(Drupal.t("Sorry, you are Under age limit and are prohibited from entering this site!"));
      location.replace(Drupal.settings.disclaimer.exiturl);
      return false;
    } else {
      // age limit ok
      return true;
    }
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T18:43:18.647

因为您要**返回 alert**。这将显示两次警报，并且因为您没有返回`false`，所以它会继续到下一页。

尝试这个：

```
if (optyear == year) {
    alert(Drupal.t("You must enter the year you were born in."));
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:43:32.550

不需要*返回警报*。

```
alert(Drupal.t("You must enter the year you were born in."));
//return alert; 
```

只需使用 alert(); 就会触发警报；

# vb.net - 如何使用 LINQ 从列表 A 和列表 B 中获取元素

> ID：16199748
> 
> 赞同：0
> 
> 时间：2013-04-24T18:41:14.927
> 
> 标签：vb.net, linq

如果列表 B 为空，如何使用 LINQ EVEN 从列表 A 和列表 B 中获取元素（仍将返回列表 A 的元素，但列表 B 的元素将为空）

这个想法是能够基于列表 A 和 B 的元素重新创建单个匿名对象。

```
From elemListA In data.ListA_
From elemListB In elemListA.ListB _
   Select New With { _
         .ElementA = elemListA.ElementA, _
         .ElementB = elemListA.ElementB, _
         .ElementC = elemListB.ElementA, _
         .elementD = elemListB.ElementB, _
   }).ToList() 
```

**问题是，如果 ListB 为空，它会崩溃。另一个问题是，如果我放一个 where 它不会包含 ListA 的元素，因为它们被 where 子句过滤掉了，我想拥有它们。**

我会做一个连接，但问题是这两个对象之间没有关系。除了 ListA 中的一个元素有一个 ListB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:34:33.123

当无法进行连接时，要获得外连接效果非常困难。基本上，我可以看到两种方法：

1.  为 null时，用一个空 ( ) 元素替换`elemListA.ListB`数组。`Nothing``ListB`

    ```
    Dim array(0) as Nullable(of ElementB)
    ...
    From elemListB In If(elemListA.ListB, array) 
    ```

2.  使用`Union`：首先查询有的`ListA`对象，`ListB`并与没有的对象联合。在这两个查询中，您必须创建完全相同的匿名类型，因此在第二部分中，您必须将声明的`.ElementB = emptyB`位置放在.`emptyB``Dim emptyB As ElementB = Nothing`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:00:24.907

听起来您所描述的是左外连接。Microsoft[编写了一个](http://msdn.microsoft.com/en-us/library/vstudio/bb397895.aspx)关于使用 LINQ 执行此操作的教程。

具体解决您的问题，您需要检查空值。在他们的示例中，如果值为 null，Microsoft 使用三元运算符返回一个空字符串。

```
var query = from person in people
                    join pet in pets on person equals pet.Owner into gj
                    from subpet in gj.DefaultIfEmpty()
                    select new { person.FirstName, PetName = (subpet == null ?    String.Empty : subpet.Name) }; 
```

# objective-c - isCancelled 上的 NSOperation 崩溃

> ID：16199749
> 
> 赞同：0
> 
> 时间：2013-04-24T18:41:30.297
> 
> 标签：objective-c, nsoperation, nsoperationqueue

我已经实现了并发 nsoperation 并启用了 ARC。现在我的客户遇到了我无法重现的崩溃。他给我发了以下崩溃日志：

```
Date/Time:       2013-04-24 12:23:34.925 -0400
OS Version:      Mac OS X 10.8.3 (12D78)
Report Version:  10

Interval Since Last Report:          30946 sec
Crashes Since Last Report:           1
Per-App Interval Since Last Report:  33196 sec
Per-App Crashes Since Last Report:   1
Anonymous UUID:                      FB8460EE-5199-C6FB-55DC-F927D7F81A80

Crashed Thread:  15  Dispatch queue: com.apple.root.default-priority

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: EXC_I386_GPFLT

Application Specific Information:
objc_msgSend() selector name: isCancelled

Thread 15 Crashed:: Dispatch queue: com.apple.root.default-priority
0   libobjc.A.dylib                 0x00007fff877f1250 objc_msgSend + 16
1   Myapp   0x000000010a608807 0x10a601000 + 30727
2   Myapp   0x000000010a650575 0x10a601000 + 324981
3   com.apple.Foundation            0x00007fff8b66212f -[NSBlockOperation main] + 124
4   com.apple.Foundation            0x00007fff8b638036 -[__NSOperationInternal start] + 684
5   com.apple.Foundation            0x00007fff8b63f861 __block_global_6 + 129
6   libdispatch.dylib               0x00007fff832d0f01 _dispatch_call_block_and_release + 15
7   libdispatch.dylib               0x00007fff832cd0b6 _dispatch_client_callout + 8
8   libdispatch.dylib               0x00007fff832ce1fa _dispatch_worker_thread2 + 304
9   libsystem_c.dylib               0x00007fff87d19d0b _pthread_wqthread + 404
10  libsystem_c.dylib               0x00007fff87d041d1 start_wqthread + 13 
```

我的代码如下所示：

```
-(void)start
{        
    // Always check for cancellation before launching the task.
    if ([self isCancelled])
    {
        // Must move the operation to the finished state if it is canceled.
        [self onCancelSyncOperation];
        return;
    }

    // If the operation is not canceled, begin executing the task.
    [self willChangeValueForKey:@"isExecuting"];
    [NSThread detachNewThreadSelector:@selector(main) toTarget:self withObject:nil];
    executing = YES;
    [self didChangeValueForKey:@"isExecuting"];
}

- (void)onCancelSyncOperation
{
    [self willChangeValueForKey:@"isFinished"];
    [self willChangeValueForKey:@"isExecuting"];

    executing = NO;
    finished = YES;

    [self didChangeValueForKey:@"isExecuting"];
    [self didChangeValueForKey:@"isFinished"];
} 
```

nsoperation 好像已经发布了？当它尝试检查 isCancelled 时？

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T09:39:39.420

我认为没有人可以通过查看此日志来告诉您应用程序崩溃的原因。我没有看过你的代码，但是你删掉了你的崩溃日志，所以它只显示系统模块（lib.dispatch ...，com.apple ...）。通常，错误出现在“com.myname ...”的第一次出现中。

如果这种崩溃`EXC_BAD_ACCESS (SIGSEGV)`与 一起出现`objc_msgSend()`，则**可能**意味着您正在尝试向不再存在的对象（或换句话说：调用对象的方法）发送消息。如果您调用该对象，则很有可能会找到它，如果您将其称为延迟的或在另一个线程上或从块中调用，则它会更复杂一些。

找出原因的最佳机会是使用 Instrument 检查您的应用程序，使用启用 NSZombies（这是默认设置）的 Allocations 或 Leaks 工具。您可以从 Xcode 中启动 Instruments。然后尝试重现您的崩溃。如果你成功了，你也许能够找到发生崩溃的类和位置。

如果您不知道如何处理此答案，请查看 Apple 的 WWDC 开发者视频，其中有一些展示了如何使用 Instruments 分析您的应用程序（您需要一个 [免费] 开发者帐户才能访问这些视频）。

祝你好运！

# c++ - LNK1169 和 LNK2005 错误

> ID：16199751
> 
> 赞同：2
> 
> 时间：2013-04-24T18:41:34.603
> 
> 标签：c++, visual-c++

在我的 C++ 项目中，当我在头文件中声明一个全局变量时，我在 Visual Studio 2012 中得到 LNK2005（x 已在 y.obj 中定义）和 LNK1169（一个或多个多重定义的符号找到 z.exe）错误，但是当我用 const 标识符声明全局变量时，我没有收到错误。从我在 msdn 的研究中，我了解到这是因为项目属性。但我无法用属性修复它们。它只能用 const 标识符修复。但是我在 C++ 中找不到任何关于它的规则。它是 C++11 中的新功能吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:49:51.857

这是一个全局变量的**声明：**

```
extern int my_global; 
```

Thie 是一个全局变量的**定义：**

```
int my_global; 
```

全局变量的*声明*说“这是一个对象的名称”。定义说“这是一个对象的名称，请为它分配存储空间” *。*

你可以有任意多的全局变量声明（这样任何源文件中的任何人都可以引用同一个对象），但你只能有一个定义，因为当对象只能存在于内存中的一个位置时程序运行。

链接器抱怨您对同一对象有多个定义，因为您将*定义*放在头文件中，并且该头文件包含在多个源文件中。因此，当这些源文件被编译时，您会得到多个定义，而链接器无法做到这一点。

解决方案是在头文件中*只放一个声明*，然后将定义放在*一个源文件*中。例如：

```
// MyVariables.h
extern int my_global;

// MyVariables.cpp
int my_global = 42; 
```

您使用`const`关键字看到不同行为的原因是因为`const`提供了全局变量*internal links*，这意味着它们对其他源文件不可见。实际上，这意味着每个包含您的标头的源文件都会获得自己的常量副本。这会占用更多内存，但不会很明显。因为它是一个常数，所以没有人会注意到不同的常数指的是内存中的不同位置。

C++11 没有改变任何这种行为。这些结构在以前的 C++ 版本中的行为方式都相同。

# javascript - Javascript函数在webkit浏览器中不起作用

> ID：16199753
> 
> 赞同：0
> 
> 时间：2013-04-24T18:41:47.000
> 
> 标签：javascript, google-chrome

我的 JavaScript 函数在 Firefox 中运行良好，但在 Google-Chrome 和其他 webkit 浏览器中无法正常运行，并在控制台中出现以下错误，

> “不安全的 JavaScript 尝试从 URL 'y' 的框架访问 URL 'x' 的框架。域、协议和端口必须匹配。”

以下是功能代码：

```
function xyz() {
    if (mainFrame.location.href === "x" || mainFrame.location.href === "y") {
        console.log('no');
    } else {
        mainFrame.location.replace("y");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:44:06.630

作为安全措施，您不能跨域访问帧。确保即使子域匹配。`domain.com`不同于`www.domain.com`

# c# - resharper 可以生成包含所有类属性的 tostrings 吗？

> ID：16199759
> 
> 赞同：9
> 
> 时间：2013-04-24T18:41:59.637
> 
> 标签：c#, resharper, log4net

我使用 IntelliJ (java) IDE，它可以轻松地为任何包含所有属性等的类生成一个非常好的 toString()。

所以在我的 log4net 中，我想输出一个类的反序列化版本。

resharper 可以这样做还是我必须自己手动完成？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T19:03:51.013

是的，它可以。查看帮助主题[生成格式化成员](http://www.jetbrains.com/resharper/webhelp/Code_Generation__Formatting_Members.html)。

# button - 如何在 flexigrid 按钮中添加属性？

> ID：16199766
> 
> 赞同：0
> 
> 时间：2013-04-24T18:42:17.917
> 
> 标签：button, custom-attributes, flexigrid

我正在处理一个必须使用 Flexigrid.js 的项目；但是我发现插件中缺少很多东西。比如我想禁用一些我最初不想启用的按钮。所以，我不能那样做。

所以，我更新了 flexigrid.js 并为每个人制作了它。

希望这会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:42:17.917

如果我们想添加额外的属性，如标题、禁用等，该怎么做？

答：我已经为此更新了我的 flexigrid.js。我已经更改了以前的 js 并将 fbutton div>span 替换为输入标签。

更改以下代码

```
 btnDiv.innerHTML = ("<div><span>") + (btn.hidename ? "&nbsp;" : btn.name) + ("</span></div>");
            if (btn.bclass) $('span', btnDiv).addClass(btn.bclass).css({
                paddingLeft: 20
            });
            if (btn.bimage) // if bimage defined, use its string as an image url for this buttons style (RS)
                $('span',btnDiv).css( 'background', 'url('+btn.bimage+') no-repeat center left' );
                $('span',btnDiv).css( 'paddingLeft', 20 );

            if (btn.tooltip) // add title if exists (RS)
                $('span',btnDiv)[0].title = btn.tooltip; 
```

和

```
 btnDiv.innerHTML = ("<input type='button' value='"+ (btn.hidename ? "&nbsp;" : btn.name)+"' name='"+ (btn.hidename ? "&nbsp;" : btn.name)+"'/>") ;
            if (btn.bclass) $('input', btnDiv).addClass(btn.bclass).css({
                paddingLeft: 20
            });
            if (btn.bimage) // if bimage defined, use its string as an image url for this buttons style (RS)
                $('input',btnDiv).css( 'background', 'url('+btn.bimage+') no-repeat center left' );
            $('span',btnDiv).css( 'paddingLeft', 20 );

            if (btn.tooltip) // add title if exists (RS)
                $('input',btnDiv)[0].title = btn.tooltip; 
```

然后，检查属性属性是否存在并设置属性

```
//checking attribute property is available or not
//Start
  if (btn.attribute) {   
    var attributes = btn.attribute; //getting the attributes 
    for(var key in attributes){
        if(key!="style" && key!="disable")  
            $('input',btnDiv).attr(key,attributes[key]);
        else if(key=="disable" && attributes[key]){
            $('input',btnDiv).attr("disabled","disable");
        }
        else if(key=="style"){ //getting style value in css
            for(var style in attributes[key]){
                $('input',btnDiv).css(style,attributes[key][style]);
            }
        }
    }     
}
//End 
```

现在更改输入的 CSS。

```
.flexigrid div.fbutton input
    {
        float: left;
        display: block;
        padding: 3px;
        border : none;
    } 
```

完成工作。现在在按钮中设置您的属性。

例子 ：

```
buttons : [
                {name: 'Add', bclass: 'add', onpress : test, attribute: {title:"add",disable:true,style:{'border':'1px solid black;'}}}
                ], 
```

如果发现任何错误，请回复我。

谢谢

# apache-flex - 状态文本中的错误

> ID：16199771
> 
> 赞同：0
> 
> 时间：2013-04-24T18:42:40.973
> 
> 标签：apache-flex, flash-builder

在这一行

```
<mx:Label x="132" y="105" id="statusText"/> 
```

我收到一个错误 -

> 尝试使用不兼容类型“mx.controls.Label”的值初始化“spark.components.supportClasses.TextBase”类型的继承属性“statusText”。

我使用 flex 4.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:28:01.050

当您在 mxml 中声明`id`已在超类中使用的某些内容时，您会收到此错误。通常它只会使用你的定义，如果存在的话，它会覆盖超类之一。

但是在您的代码类型中，此 id 的定义和此 id 的超类定义不同，因此您会收到此错误。

如我所见，您无意覆盖超类定义，因此您只需为标签*重命名 id即可。*

# python - 如何有效地确定应用程序生成的数据包

> ID：16199772
> 
> 赞同：1
> 
> 时间：2013-04-24T18:42:45.813
> 
> 标签：python, network-programming, cpu-usage, scapy

在从事研究项目时，我已经能够通过运行 psutil 的 get_connections 并将远程地址与 scapy (python) 中的数据包的 IP 目标匹配，成功地将出站数据包与其源应用程序匹配。目标是识别所有出站数据包的源应用程序并通过安全检查运行它们。不幸的是，get_connections 似乎具有极高的 CPU 使用率。在我的脚本工作时运行`top`显示 python 持续占用 30% 到 100.5% 的 CPU（嗯，后者只是短暂的）。是否有更好（更有效）的方法来确定哪个应用程序正在生成数据包？如果不是直接的，是否有更有效的方法来匹配已建立的应用程序连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:04:16.303

看看 Hone 项目 - [https://github.com/HoneProject/Linux-Sensor](https://github.com/HoneProject/Linux-Sensor)

# cocos2d-x - cc.BuilderReader 未定义

> ID：16199773
> 
> 赞同：0
> 
> 时间：2013-04-24T18:42:49.023
> 
> 标签：cocos2d-x

我已经下载了 Cocos2d-html5-v2.1.0 并将下面的代码添加到示例（main.js）中：

```
var scene = cc.BuilderReader.loadAsScene("ccb/Menu.ccbi");?         
cc.Director.getInstance().replaceScene(scene); 
```

但我收到以下错误：

> 类型错误：cc.BuilderReader 未定义

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T13:17:47.610

你需要添加

```
loadExtension:true, 
```

在你用来定义 cocos 行为的文件中，比如 showFPS 和 box2d 等，（你可能称之为 cocos2d.js）

# jsf - Icefaces设置焦点不起作用

> ID：16199780
> 
> 赞同：0
> 
> 时间：2013-04-24T18:43:05.530
> 
> 标签：jsf, icefaces, jsf-1.2, icefaces-1.8

我正在尝试将焦点设置到 Icefaces 1.8.2 中的一个组件，但它不起作用可能是因为该组件在方法调用时没有被渲染。有任何想法吗？

```
JavascriptContext.addJavascriptCall(getContext(),
                "document.getElementById('"+ getClientId(component) + "').focus();"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:49:06.050

这行得通，我以前在某个地方搞砸了..

```
JavascriptContext.applicationFocus(getContext(), getClientId(component));

public static String getClientId(UIComponent component) {
    return component.getClientId(getContext());
}

public static FacesContext getContext() {
    return FacesContext.getCurrentInstance();
} 
```

# ios - 我已经制作了一个应用程序，但现在我被告知它要向后兼容以前的 iOS 版本

> ID：16199781
> 
> 赞同：2
> 
> 时间：2013-04-24T18:43:07.273
> 
> 标签：ios, objective-c, ios6

我是编写应用程序的新手，但正在慢慢掌握它。我完成了自己制作的应用程序，但现在客户告诉我它也需要兼容`iOS 5`。我使用了很多`iOS 6`看似不向后兼容的功能。（Embed Segue、Social Framework、Tint Color 等）

有什么简单的方法可以使这些工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:53:28.380

就 Embed Segue 而言，这里有一个答案： [Embed Segue - iOS 5](https://stackoverflow.com/questions/14432310/embed-segue-ios-5)

对于社交框架，您只需将框架链接从项目概述的目标>摘要部分中的“必需”更改为可选。然后在使用任何 API 之前使用 if 语句检查软件版本。

检查设备版本：

```
NSString *ver = [[UIDevice currentDevice] systemVersion]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T21:58:39.233

您应该查看[Deploymate](http://www.deploymateapp.com)以捕获一些对于 iOS 5 部署目标不可用的不太明显的 API 调用。它将在漂亮的 UI 中向您显示使用不兼容或不可用 API 的特定行。

# c# - 将形状调整为窗口大小

> ID：16199782
> 
> 赞同：1
> 
> 时间：2013-04-24T18:43:16.407
> 
> 标签：c#, wpf

几天来，我一直试图找出一个非常简单的事情，但我就是不明白。我想要的是一个带有**两个不同容器**中的按钮和多边形的窗口。

调整窗口大小时，我希望按钮保持其大小和相对位置（例如，到左上角，而不被其他容器覆盖）并调整多边形的大小（它不应保持其宽度/高度比）而不改变它的行程厚度。

非常**重要**的是，我可以完全从代码隐藏创建多边形，在 xaml 中定义它**根本没有**帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:46:44.230

您在 WPF 中没有锚点。有许多布局控件，每一个都有不同的方式来设置控件的位置。

例如，放置在网格中的控件使用边距和它们的大小来定位。Canvas 中的控件使用`Canvas.Top`、`Canvas.Left`和`Canvas.Right`来`Canvas.Bottom`定位。控件`StackPanels`使用边距来获得分离。

我建议你看看这些关于 WPF 中布局的文章得到你想要的：

> [http://www.codeproject.com/KB/WPF/WPFLayoutQS.aspx](http://www.codeproject.com/KB/WPF/WPFLayoutQS.aspx)
> 
> [http://www.c-sharpcorner.com/UploadFile/dpatra/105202009083754AM/1.aspx](http://www.c-sharpcorner.com/UploadFile/dpatra/105202009083754AM/1.aspx)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:50:54.957

您可以创建一个带有缩放的[PathGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.pathgeometry.aspx)的路径，该路径使用其容器的宽度和高度作为缩放因子。因此，您可以完全在逻辑坐标中指定几何，在任一方向上从 0 到 1：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Button HorizontalAlignment="Left" Margin="5" Content="Button"/>
    <Canvas x:Name="polylineCanvas" Grid.Row="1">
        <Path Stroke="Blue" StrokeThickness="3">
            <Path.Data>
                <PathGeometry x:Name="polyline">
                    <PathGeometry.Transform>
                        <ScaleTransform
                            ScaleX="{Binding ActualWidth, ElementName=polylineCanvas}"
                            ScaleY="{Binding ActualHeight, ElementName=polylineCanvas}"/>
                    </PathGeometry.Transform>
                </PathGeometry>
            </Path.Data>
        </Path>
    </Canvas>
</Grid> 
```

现在您可以在代码中指定几何图形，如下所示：

```
var points = new Point[]
{
    new Point(0.1, 0.1),
    new Point(0.9, 0.1),
    new Point(0.9, 0.9),
    new Point(0.1, 0.9)
};

var figure = new PathFigure
{
    StartPoint = points[0],
    IsClosed = true
};

var segment = new PolyLineSegment(points.Skip(1), true);
figure.Segments.Add(segment);
polyline.Figures.Add(figure); 
```

您也可以使用[StreamGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.streamgeometry.aspx)代替 PathGeometry。

# mysql - 在mysql中运行bash变量

> ID：16199783
> 
> 赞同：1
> 
> 时间：2013-04-24T18:43:17.633
> 
> 标签：mysql, bash, variables

我正在编写一个脚本来从 wp-config.php 文件中提取数据库信息，并使用它登录到 mysql，然后运行一个命令来创建一个新用户。

是的，这听起来像是一个主要的黑客脚本，但我更想排除故障。

为了缩短这篇文章，我将总结第一部分：

```
db=user_database
usr=user_databaseuser
ps=database_password
qr=mysql command

mysql --user=$usr --password=$ps $db 
```

现在这是我遇到麻烦的地方，我有另一个变量 $qr，一旦登录到 mysql，我就会尝试调用它。我努力了：

```
-e $qr 
```

在那个mysql命令的末尾登录。当我尝试使用该方法时，它什么也没做。我也试过：

```
mysql --user=$usr --password=$ps $db < cat $qr or < echo $qr 
```

有了这些，我得到一个语法错误报告 cat 和 echo 作为未知命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T18:30:51.303

利用

```
echo $qr | mysql --user=$usr --password=$ps $db 
```

或者

```
mysql --user=$usr --password=$ps $db -e "$qr" 
```

# javascript - 使用 Google Drive API 列出共享文件

> ID：16199786
> 
> 赞同：2
> 
> 时间：2013-04-24T18:43:31.587
> 
> 标签：javascript, google-drive-api

我无法使用 Google Drive API获取*与我共享的文件列表。*我要从这里的文档中删除代码。 [https://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)

它适用于列出我创建的文件。例如，我的初始请求看起来像这样，以显示尚未被丢弃的文件。这对我来说很好。

```
var initialRequest = gapi.client.request({
    'path': '/drive/v2/files',
    'method': 'GET',
    'params': {"q": "mimeType != 'application/vnd.google-apps.folder' and trashed=false"}
}); 
```

但是，如果我尝试像这样显示*与我共享的*文件，它会返回一个空的项目列表。

```
var initialRequest = gapi.client.request({
    'path': '/drive/v2/files',
    'method': 'GET',
    'params': {"q": "sharedWithMe"}
}); 
```

但是，在 Google 的 OAuth 2.0 Playground 中发送请求[https://www.googleapis.com/drive/v2/files?q=sharedWithMe](https://www.googleapis.com/drive/v2/files?q=sharedWithMe)确实有效，并且响应包含*与我共享*的所有文件的列表。

我不明白为什么它在 Playground 而不是我的网站上工作。

# dojo - 更改道场图表 ThreeD 主题的颜色

> ID：16199789
> 
> 赞同：0
> 
> 时间：2013-04-24T18:43:38.820
> 
> 标签：dojo, dojox.charting

我正在使用来自 dojo 图表的 ThreeD 主题显示图表。当我修改数据以便为图表中的某些条形显示不同的颜色时，我失去了 3D 外观。

ThreeD 的默认颜色是红色

{y:"15",tooltip: "15 警报",fill: 'yellow'}

在数据项上添加“填充：黄色”会将条形更改为黄色，但我失去了 3D 外观。

关于更改主题颜色和保持 3D 外观的最佳方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:08:37.920

我可以通过从 ThreeD.js 获取代码并将其应用到我的应用程序来完成此操作：

```
var colors = ["#f00", "#0f0", "#00f", "#ff0", "#0ff", "#f0f", "dojox/charting/themes/common"];
var defaultFill = {type: "linear", space: "shape", x1: 0, y1: 0, x2: 100, y2: 0};
    // 3D cylinder map is calculated using dojox.gfx3d
var cyl3dMap = [
        {o: 0.00, i: 174}, {o: 0.08, i: 231}, {o: 0.18, i: 237}, {o: 0.30, i: 231},
        {o: 0.39, i: 221}, {o: 0.49, i: 206}, {o: 0.58, i: 187}, {o: 0.68, i: 165},
        {o: 0.80, i: 128}, {o: 0.90, i: 102}, {o: 1.00, i: 174}
        ];

var hiliteIndex = 2;
var hiliteIntensity = 100;
var lumStroke = 50;
var cyl3dFills = ArrayUtil.map(colors, function(c){
    var fill = lang.delegate(defaultFill);
    var colors = fill.colors = gradientGenerator.generateGradientByIntensity(c, cyl3dMap),
        hilite = colors[hiliteIndex].color;
        // add highlight
        hilite.r += hiliteIntensity;
        hilite.g += hiliteIntensity;
        hilite.b += hiliteIntensity;
        hilite.sanitize();
        return fill;
}); 
```

当我为图形数据创建 JSON 字符串时，我使用 cyl3dFill[x] 来设置颜色：

```
{y: "10", tooltip: "10 Alarms", fill: cyl3dFill[3]}  //Sets 3D Yellow fill 
```

如果未向数据记录添加填充，则采用默认颜色（红色）。不确定这是否是一个坏方法，但我喜欢它....

不确定下一个方法对 ThreeD 主题做了什么，但看起来它改变了主题的颜色。无法使用该方法...

[https://dojotoolkit.org/api/dojox/charting/themes/ThreeD](https://dojotoolkit.org/api/dojox/charting/themes/ThreeD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:08:41.267

只需基于 ThreeD 创建一个新主题，然后将颜色变量更改为您要使用的颜色。我建议你 ：

*   阅读这篇博文：[http ://www.sitepen.com/blog/2010/07/26/dojo-chart-theming/](http://www.sitepen.com/blog/2010/07/26/dojo-chart-theming/)
*   将 dojox/charting/themes/ThreeD.js 克隆到您自己的主题文件中
*   编辑你的新文件（你应该只需要修改顶部的“颜色”数组）
*   使用您新创建的主题...

# java - Windows Java 的服务总线？

> ID：16199790
> 
> 赞同：0
> 
> 时间：2013-04-24T18:43:42.030
> 
> 标签：java, servicebus

我们正在评估将 Windows Server 1.0 的服务总线用作现场服务总线，并且非常喜欢它的安装、配置、管理等简单性，并且开发利用它的 .NET 应用程序也非常容易。

公司的一部分虽然使用 Java，但我们希望能够利用这两个代码库中的任何服务总线实现。由于 Windows 服务总线和 Azure 服务总线之间有很多功能对等，我们可以使用 Azure SDK for Java 与我们的本地服务总线交互吗？

我找到了几个 Java SDK 的代码示例，但它们都面向 Azure 总线，所以我不太确定在尝试连接时要提供什么值。

例如，一切都围绕着创建一个`ServiceBusContract`实例，它接受一个`Configuration`由`ServiceBusConfiguration.configureWithWrapAuthentication`or`ServiceBusConfiguration.configureWithConnectionString`方法创建的实例。

在该`.condifureWithWrapAuthentication`方法的情况下，我应该为`serviceBusRootUri`（示例说使用'.servicebus.Windows.net'；这显然不会在本地工作）和`wrapRootUri`（示例说使用'-sb.accesscontrol.windows .net/WRAPv0.9'；同样，这在本地不起作用）参数？我确实偶然发现了[这篇文章](http://www.rqgg.net/topic/myrkv-azure-service-bus-and-java.html)，它说 JavaDocs 提供了您认为的更多信息，包括本地配置，但我从上到下阅读了大约 6 次，并没有看到任何关于它的本地信息。

有谁知道或有一个示例来展示如何使用 Java 和 v0.4.2 SDK 访问本地服务总线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:02:24.043

您可以获取服务器命名空间的连接字符串（在 Service Bus Powershell 中使用[此命令）。](http://msdn.microsoft.com/en-us/library/windowsazure/jj248758%28v=azure.10%29.aspx)这应该向您显示名称空间的 serviceBusRootUri。

**编辑：**服务器不支持 ACS——它只支持 SaS 和 Windows 身份验证。我不相信 Java SDK 本身就支持这些，所以我不相信它会满足你的需要。

# multithreading - 简单的线程事件示例

> ID：16199793
> 
> 赞同：28
> 
> 时间：2013-04-24T18:43:52.570
> 
> 标签：multithreading, python-3.x

我正在阅读 Python 3 的[Threading 文档](http://docs.python.org/3.3/library/threading.html#with-locks)，但我无法理解这些材料。

我已经让两个计时器并排运行，但我不知道如何让这两个线程相互交互。锁定，传递事件或任何事情。

有人可以在这里转储一个简单的完整示例，并简要说明它的作用吗？

我正在尝试学习 3.3，所以如果可能的话，您能否发布适用于该版本的代码。我还发现我找到的教程并没有让我知道他们正在使用的 Python 版本。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-25T06:10:18.467

基于`queue` [文档](http://docs.python.org/3/library/queue.html?highlight=queue#module-queue)的示例：

```
#!python3
import threading
from queue import Queue
import time

# lock to serialize console output
lock = threading.Lock()

def do_work(item):
    time.sleep(.1) # pretend to do some lengthy work.
    # Make sure the whole print completes or threads can mix up output in one line.
    with lock:
        print(threading.current_thread().name,item)

# The worker thread pulls an item from the queue and processes it
def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

# Create the queue and thread pool.
q = Queue()
for i in range(4):
     t = threading.Thread(target=worker)
     t.daemon = True  # thread dies when main thread (only non-daemon thread) exits.
     t.start()

# stuff work items on the queue (in this case, just a number).
start = time.perf_counter()
for item in range(20):
    q.put(item)

q.join()       # block until all tasks are done

# "Work" took .1 seconds per task.
# 20 tasks serially would be 2 seconds.
# With 4 threads should be about .5 seconds (contrived because non-CPU intensive "work")
print('time:',time.perf_counter() - start) 
```

输出：

```
Thread-3 2
Thread-1 0
Thread-2 1
Thread-4 3
Thread-3 4
Thread-1 5
Thread-2 6
Thread-4 7
Thread-3 8
Thread-1 9
Thread-2 10
Thread-4 11
Thread-3 12
Thread-1 13
Thread-2 14
Thread-4 15
Thread-1 17
Thread-3 16
Thread-2 18
Thread-4 19
time: 0.5017914706686906 
```

# c - 链表 C 字符集姓氏添加到每个人

> ID：16199794
> 
> 赞同：0
> 
> 时间：2013-04-24T18:43:55.633
> 
> 标签：c, linked-list, char

我写了一个程序用作线路组织者，但是当显示一个人的名字时，它会将最后一个人添加到所有其他人中。我该如何解决？如果我更改 中的信息`struct`，它会出错；但是，如果有人可以帮助我，我会很高兴。

```
#include<stdio.h>
#include<stdlib.h>

struct node {
  int priority;
  int info;
  struct node *link;
} *front = NULL;

void insert(char person[20], int person_priority);
int del();
void display();
int isEmpty();

int main() //!! fixed
{
  int choice, person_priority;
  char person[20];

  while (1) {
    printf("1.Insert Person\n");
    printf("2.Attend Client\n");
    printf("3.Show Queue\n");
    printf("4.Exit\n");
    printf("Type choice : ");
    scanf("%d", &choice);

    switch (choice) {
    case 1:
      printf("Type persons name:");
      scanf("%s", &person);
      printf("Its Priority:\n1 Pregnant\n2 Older\n3 Standard: ");
      scanf("%d", &person_priority);
      insert(person, person_priority);
      system("cls");
      break;
    case 2:
      system("cls");
      printf("Person was attended", del());
      break;
    case 3:
      system("cls");
      display();
      break;
    case 4:
      exit(1);
    default:
      printf("Invalid Choice\n");
    }                           /*end of switch */
  }                             /*end of while */
  return 0;   //!! fixed
}                               /*end of main() */

void insert(char person[20], int person_priority)
{
  struct node *tmp, *p;

  tmp = (struct node *) malloc(sizeof(struct node));

  if (tmp == NULL) {
    printf("No Memory available\n");
    return;
  }

  tmp->info = person;
  tmp->priority = person_priority;
/*Starting list*/
  if (isEmpty() || person_priority < front->priority) {
    tmp->link = front;
    front = tmp;
  }
  else {
    p = front;
    while (p->link != NULL && p->link->priority <= person_priority)
      p = p->link;
    tmp->link = p->link;
    p->link = tmp;
  }
}                               /*end of insere() */

int del()
{
  struct node *tmp;
  int person;

  if (isEmpty()) {
    printf("Empty Queue\n");
    exit(1);
  }
  else {
    tmp = front;
    person = tmp->info;
    front = front->link;
    free(tmp);
  }

  return person;
}                               /*end of del() */

int isEmpty()
{
  if (front == NULL)
    return 1;
  else
    return 0;
}                               /*end of emtpy verification (isEmpty()) */

void display()
{
  struct node *ptr;
  ptr = front;
  if (isEmpty())
    printf("Empty Queu\n");
  else {
    printf("Line :\n");
    printf("Priority       Name\n");
    while (ptr != NULL) {
      printf("%5d        %5s\n", ptr->priority, ptr->info);
      ptr = ptr->link;
    }
    printf("\n\n\n");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:56:54.203

您的结构节点有一个名为“info”的元素，其类型为 int。每次添加一个人时，都使用 scanf() 将人的姓名读入字符数组，然后将该字符数组的地址传递给 insert()，insert() 将地址存储在整数“info”中。你分配的每一个`struct node`，你都在其中存储同一个变量的相同地址。每次你 scanf() 时，你都会覆盖相同的内存。

你的结构节点应该有一个元素`char info[20]`，当你创建一个新节点时，你应该`strcpy()`把这个人的名字放到 tmp->info 中。

另请注意，您将变量交替视为 char* 类型和 int 类型的方式会导致未定义的行为。

# c - 从另一个线程中杀死一个线程

> ID：16199795
> 
> 赞同：0
> 
> 时间：2013-04-24T18:43:58.757
> 
> 标签：c, pthreads, kill

我有这个问题：

*   如何`pthread_cancel()`从另一个线程中杀死一个线程（可能使用 ）？

这是示例代码。我需要当我按 1 时，另一个线程被杀死。（我必须从一个线程中强制杀死而不在另一个线程中添加`pthread_exit()`。）

```
pthread_t THR_INPUT, THR_QUEUE;

void *thr_in(void *null) {
    int opt;
    while(1){
        printf("1\. Kill the other thread\n");
        scanf("%d", &opt);

        switch (opt)
        {
            case 1: 
                pthread_cancel(THR_QUEUE);
                pthread_exit(NULL);
            default:
                printf("ATTENZIONE: Scelta %i non corretta. Riprovare.\n",opt);

        }
    }
}

void *thr_qu(int reparto) {
    while(1){
    sleep(2);
    printf("I'm alive!");    
    }
}

int main(int argc, const char * argv[]){
    void *result;   

    printf("-------start-------\nMenu:\n");
    pthread_mutex_init(&mutex, NULL);
    pthread_create(&THR_INPUT, NULL, thr_in, NULL);
    pthread_create(&THR_QUEUE, NULL, thr_qu(reparto), NULL);
    pthread_join(THR_INPUT, &result);
    pthread_join(THR_QUEUE, &result);
    printf("---end---\n");
    exit(EXIT_SUCCESS);
} 
```

我想了一个解决方案，但我不知道它有多干净；这样做：

```
int main(int argc, const char * argv[]){
    void *result;
    sem = semget(SEM_KEY, 0, 0); 
    pthread_mutex_init(&mutex, NULL);
    int pid=getpid();
    pid=fork();
    if(!pid){
    printf("-------START-------\nMenu:\n");
    pthread_create(&THR_INPUT, NULL, thr_in, NULL);
    pthread_create(&THR_QUEUE, NULL, thr_qu(reparto), NULL);
    pthread_join(THR_INPUT, &result);
    pthread_join(THR_QUEUE, &result);
    }
    else{
        wait(sem,0);
        pthread_cancel(THR_QUEUE);
        printf("---END---\n");
    }
    exit(EXIT_SUCCESS);
} 
```

并在第一个线程中放置一个信号，当它被要求退出时，向主线程中的信号量发出信号以执行`pthread_cancel()`. 但它仍然无法正常工作，我不知道为什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:38:30.160

你可以使用`pthread_cancel`，但它只是对目标线程的请求，而不是强行杀死。取消与其他形式的请求（例如通过条件变量通信的标志）的区别在于：

1.  取消会在某些标准库调用（称为*取消点*）处自动执行，除非目标线程已明确暂停取消。

2.  即使目标线程被*阻塞*等待 IO 或某些其他可能永远不会完成的事件（在这种情况下，这是停止它们的唯一方法），取消也可以工作。

要正确使用取消，您必须在每个级别的资源分配或主要状态更改上*大量*使用`pthread_cleanup_push`以确保在取消线程时撤消所有部分更改，或者您必须`pthread_setcancelstate`在某些点阻止取消只需很少或根本不需要清理工作，就可以安全地对取消采取行动。

# java - Android - 如何将画布保存到内存中的图像

> ID：16199799
> 
> 赞同：0
> 
> 时间：2013-04-24T18:44:13.397
> 
> 标签：java, android, android-canvas

嗨，我正在制作一个允许用户在屏幕上绘图的 Android 应用程序。我有一个按钮，按下时我希望画布作为图像保存到内部存储器中。我尝试了以下代码，但我不断收到`FileNotFoundException open failed: EACCES (permission denied)`：

```
 String path = Environment.getDataDirectory().getAbsolutePath();
        File file = new File(path+"image.png");

        Bitmap bitmap = Bitmap.createBitmap(100,200,Bitmap.Config.ARGB_8888);

        FileOutputStream ostream;

        try {
            ostream = new FileOutputStream(file);
            bitmap.compress(CompressFormat.PNG, 100, ostream);
            ostream.flush();
            ostream.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:50:23.563

尝试 context.openFileInput(String fileName) 创建文件输出流。

```
bitmap.compress(CompressFormat.PNG, 100, context.openFileInput(fileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:21:50.983

在这部分尝试更改为：

```
File file = new File(path + File.separator + "image.png"); 
```

并确保您的清单中有这些：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# jquery - jQuery 未读取 ajax 注入的表单值

> ID：16199802
> 
> 赞同：0
> 
> 时间：2013-04-24T18:44:21.953
> 
> 标签：jquery

**问题总结：**

当下拉列表改变时，jQuery 触发 AJAX 来获取选定项目的 PM。项目中已有的 PM 数量在 PHP var`$num_pms`中。（在下面的 AJAX 中，这是作为第二个隐藏输入字段 #num_pms 的值插入的。）

在 AJAX 成功回调 fn 中，`input#num_pms.val()`读取并用于初始化一个计数器——但数字总是错误的。

为了排除故障，我试图从 读取该值`input#num_pms`，将其递增并将其重新写入`input#test`. 但是，提交表单后，test 的值为空。*但是*，*奇怪*的是，值`input#num_pms`是正确的！

我必须做错事来读取`input#num_pms`字段值......？

* * *

HTML：下拉菜单触发 jQuery 运行 AJAX 搜索。结果放入#reportstable div。

```
Project*:<br />
<?php include 'inc/widgets/dropdown_all_projects.php';?>

<form action="" method="post" name="updatepm" enctype="multipart/form-data" id="TheForm">
    <div id="reportstable">
    </div>
</form> 
```

* * *

阿贾克斯：

```
$project_num = $_POST['project_num'];
$project_id = get_project_id_from_project_num($project_num);

$aPMs = get_climgr_for_project($project_id,'user_id','first_name','last_name');
$num_pms = mysql_num_rows($aPMs);

//>Snippet< -- Inject following markup into #reportstable div.
echo
'<th width="50">
    Action
    <input type="hidden" name="project_id" value="'.$project_id.'">
    <input type="hidden" name="num_pms" id="num_pms" value="'.$num_pms.'">
    <input type="hidden" name="test" id="test" value="">
</th>
'; 
```

* * *

jQuery：触发 AJAX，将结果返回到#reportstable

```
$('#project_pick').change(function(e) {
    $('#project_pick').css('width', '500');
    $.ajax({
        type: "POST",
        url: "ajax/ax_all_ajax_fns.php", 
        data: "project_num=" + $(this).val(),
        success:function(data){
            $('#reportstable').html(data);

            //Tried adding this first
            var count = $('#num_pms').val() + 1;
            $('#test').val(count);

            //Tried this after above wouldn't work. It didn't either.
            //var count = 80;
        } //END success fn
    }); //END $.ajax()
}); //END dropdown .change() event 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:37:35.313

尝试：

```
var count = parseInt($('#num_pms').val()) + 1; 
```

还要确保`#num_pms`DOM 中只有一个元素。

# javascript - 我怎么知道点击了哪个 div？

> ID：16199806
> 
> 赞同：-2
> 
> 时间：2013-04-24T18:44:32.997
> 
> 标签：javascript, html, css

我正在使用 HTML5、CSS 和 JavaScript 制作井字游戏。我已经确定了获胜模式以及或多或少如何使其发挥作用。不涉及人工智能；它旨在成为**同一台计算机上的玩家对玩家的**游戏。

![在此处输入图像描述](https://i.stack.imgur.com/4FRVj.png)

我想做的就是：

*   知道何时单击 div*   知道点击**了哪个**div

请告诉我这是否可能。如果是，如何。步骤赞赏，不要发布完整的代码:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T18:47:51.183

[将事件侦听](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener?redirectlocale=en-US&redirectslug=DOM%2Felement.addEventListener)器绑定到容器，然后检查事件对象的[`target`属性](https://developer.mozilla.org/en-US/docs/DOM/event.target)以确定单击了哪个元素。

认真考虑将`<div>`s替换为 s，`<button>`因为它们被设计为可交互的（因此具有自动出现在焦点顺序中的好处）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:48:08.803

`this`，如果你使用jquery，它可以超级简单：

```
$("div.box").on("click", function() { $(this).addClass("clicked"); }); 
```

上面将检查任何具有“box”类的 div，并向其添加“clicked”类

不知道为什么这被否决了..这是一个显示它工作的例子..即使是我认为需要的样本。

[http://jsfiddle.net/LCKr6/1/](http://jsfiddle.net/LCKr6/1/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-24T18:46:30.437

有可能，您应该为此使用 javascript (JQuery)。您可以为鼠标单击注册侦听器，您可以在其中捕获被单击的 div 的 id

# datagridview - 可以编辑绑定到 LINQ to Objects 查询的 DataGridView 吗？

> ID：16199810
> 
> 赞同：0
> 
> 时间：2013-04-24T18:45:13.453
> 
> 标签：datagridview

这把我逼上了最近的墙。我有一个`List<MyClass>`包含多个条目的对象（我们称之为 MyList），并且我有一个`DataGridView`控件。我可以将控件的 DataSource 属性设置为 MyList。我得到了 MyList 中的所有元素，MyClass 对象的每个成员都有单独的列，非常好。如果我更改任何成员，然后我可以使用调试器查看 MyList 并查看更改的值。

但是假设 MyList 有 10,000 个条目，而我只想查看其中的 10 个。我可以使用 LINQ to Objects 来过滤列表，如下所示：

```
query = from myObect 
in MyList 
where SomeField == SomeGoodValue select new {myObject.SomeMember};
MyDataGridView.DataSource = query.ToList(); 
```

这显示了我想要的数据（好吧，在这种情况下，它选择每个对象的一个​​成员），但不能再编辑数据。

有什么方法可以将过滤后的列表放入 a`DataGridView`中，并使视图控件可编辑？我正在收集由`new`块生成的匿名类型的使用使得这不可能。那是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:48:28.253

我不是 100% 确定，但我相信如果您希望您的单元格是可编辑的，您可以从网格中取消绑定您的源并稍后重新绑定它。这并不理想，但是，我会在加载网格视图时取消绑定我的源，然后在保存之前重新绑定它。

```
Dim myCurrencyManager As CurrencyManager = DirectCast(BindingContext(DataGridView1.DataSource), CurrencyManager)

myCurrencyManager.SuspendBinding()

myCurrencyManager.ResumeBinding() 
```

# c++ - 在 C++ 中插入线程二叉树

> ID：16199815
> 
> 赞同：0
> 
> 时间：2013-04-24T18:45:36.767
> 
> 标签：c++

我无法将一些值插入到线程二叉树中。在我的主要功能中，如果我尝试插入这些值 a.Insert(10); a.插入（27）；a.插入（20）；a.插入（20）；a.插入（5）；a.插入（18）；a.插入（4）；a.插入（19）；

一切正常，但如果我切换 27 和 20，我会收到分段错误。

这是我的代码和工作输出。

```
 struct bstNode{  
    int data;
    bool lthread;
    bool rthread;
    bstNode *left;
    bstNode *right;
    bstNode(int value){
        lthread = false;
        rthread = false;
        data = value;
        left = NULL;
        right = NULL;
    };
    int GetData() {return data;}
    void SetLeft(bstNode *l){ left = l;}
    bstNode *GetLeft() {return left;}
    bstNode *GetRight() {return right;}
    void SetRight(bstNode *r){ right = r;}
    void SetLeftThread(bool value){lthread = value;}
    void SetRightThread(bool value){rthread = value;}
    bool GetLeftThread() {return lthread;}
    bool GetRightThread() {return rthread;}
    bool IsLeft(){
        if(left == NULL)
            return false;
        else
            return true;
    }
    bool IsRight(){
        if(right == NULL)
            return false;

        return true;
    }
};

    class BinarySearchTree{
    public:
    BinarySearchTree(){root = NULL;};
    void Insert(int);
    void Display();
    bstNode* search(int key);
    bstNode* root;
    bstNode* current;
};

        void BinarySearchTree::Insert(int value){
    bstNode *node = new bstNode(value);
    if (root == NULL){
        root = node;
        return;
    }

    bstNode *ptr = root, *parent = NULL;

    while (ptr !=NULL){
        if(value == ptr->GetData()){
            cout << "Attempted to insert duplicate value: " << value <<" -- Ignored." << endl;
            delete node;
            return;
        }
        parent = ptr;

        if(value < ptr->GetData()){
            if(ptr->GetLeftThread())
                break;
            else
                ptr = ptr->GetLeft();}
        else{
            if(ptr->GetRightThread())
                break;
            else{
                ptr = ptr->GetRight();}

        }
    }

    if (ptr == NULL)
    {
        if(value < parent->GetData())
        {
            parent->SetLeft(node);
            node->SetRight(parent);
            node->SetRightThread(true);

        }
        else
        {
            parent->SetRight(node);
            node->SetLeft(parent);
            node->SetLeftThread(true);
        }
    }
    else
    {
        if(value < ptr->GetData())
        {
            node->SetLeft(ptr->GetLeft());
            node->SetLeftThread(true);
            node->SetRight(ptr);
            node->SetRightThread(true);
            ptr->SetLeft(node);
            ptr->SetLeftThread(false);
        }

        else
        {
            node->SetRight(ptr->GetRight());
            node->SetRightThread(true);
            node->SetLeft(ptr);
            node->SetLeftThread(true);
            ptr->SetRight(node);
            ptr->SetRightThread(false);

        }
    }
return;
}

void BinarySearchTree::Display(){
    if(root == NULL){
        cout << "Empty" << endl;
        return;
    }
    bstNode *p, *q;

    p = root;
    do
    {
        while(p != NULL){
            q = p;
            if(p->GetLeftThread())
                break;
            else
                p = p->GetLeft();
        }
        cout << q->data << "'s right thread is "<< q->right->data << "\n";

        p = q->GetRight();

        while(q->GetRightThread()){
            cout << p->data << "'s left thread is " << p->left->data << "\n";
            q = p;
            p = q->GetRight();
        }

    } while(p != NULL);
}

bstNode* BinarySearchTree::search(int value){
    bstNode* current = root;
    while (current) {
        if(current->data == value){
            cout << current->data << " does exist!" << endl;
            return current;
        }

        else if (value < current->data){
            current = current->left;

        } 

        else current = current->right;

    }
    cout << "No "<< value << endl;
    return NULL;
}

main(){
    BinarySearchTree a;
    a.Insert(10);
    a.Insert(20);
    a.Insert(27);
    a.Insert(20);
    a.Insert(5);
    a.Insert(18);
    a.Insert(4);
    a.Insert(19);
    a.Display();
    a.search(19);

    cout << "\n" <<endl;

    return 0;
} 
```

并输出：

```
Attempted to insert duplicate value: 20 -- Ignored.
4's right thread is 5
5's left thread is 4
10's left thread is 5
18's right thread is 19
19's right thread is 20
20's left thread is 18
27's left thread is 20
19 does exist!

[Finished in 0.3s] 
```

无效输出：

```
 Attempted to insert duplicate value: 20 -- Ignored.
bash: line 1: 26586 Segmentation fault: 11  '/Users/Gnedelka/Desktop/Assignment 6/new/selfcopy'
[Finished in 0.5s with exit code 139] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:25:47.297

`insert`这个位置有一个错误：

```
 else
    {
        node->SetRight(ptr->GetRight());
        node->SetRightThread(true); 
```

您不检查是否`ptr->GetRight()`返回`NULL`，这意味着`ptr`它将位于树的最右侧，因此不应该有正确的继任者。这会导致您稍后看到的问题（在下一个示例中`insert`）。

修复只是在`ptr`不是时才执行这两条指令`NULL`：

```
 else
    {
        if (ptr->GetRight() != NULL) {
            node->SetRight(ptr->GetRight());
            node->SetRightThread(true);
        } 
```

对于最左侧的情况，相同的错误对称地出现在前面的块中。

以下是完整的函数的完整代码：

```
void BinarySearchTree::Insert(int value){
    bstNode *node = new bstNode(value);
    if (root == NULL){
        root = node;
        return;
    }
    bstNode *ptr = root, *parent = NULL;

    while (ptr !=NULL){
        if(value == ptr->GetData()){
            cout << "Attempted to insert duplicate value: " << value <<" -- Ignored." << endl;
            delete node;
            return;
        }
        parent = ptr;

        if(value < ptr->GetData()){
            if(ptr->GetLeftThread())
                break;
            else
                ptr = ptr->GetLeft();}
        else {
            if(ptr->GetRightThread())
                break;
            else
                ptr = ptr->GetRight();}
        }
    }

    if (ptr == NULL) {
        if(value < parent->GetData()) {
            parent->SetLeft(node);
            node->SetRight(parent);
            node->SetRightThread(true);
        } else {
            parent->SetRight(node);
            node->SetLeft(parent);
            node->SetLeftThread(true);
        }
    } else {
        if(value < ptr->GetData()) {
            if (ptr->GetLeft() != NULL) {
                node->SetLeft(ptr->GetLeft());
                node->SetLeftThread(true);
            }
            node->SetRight(ptr);
            node->SetRightThread(true);
            ptr->SetLeft(node);
            ptr->SetLeftThread(false);
        } else {
            if (ptr->GetRight() != NULL) {
                node->SetRight(ptr->GetRight());
                node->SetRightThread(true);
            }
            node->SetLeft(ptr);
            node->SetLeftThread(true);
            ptr->SetRight(node);
            ptr->SetRightThread(false);
        }
    }
} 
```

* * *

无关：

您可以更简洁地编写`IsLeft`（并且类似`IsRight`地）如下：

```
bool IsLeft(){
    return (left == NULL);
} 
```

关于您的节点实现，您可以依靠大多数平台的指针以 4 的倍数对齐的事实，这意味着至少 2 个最低有效位始终为零。因此，您可以简单地设置指针的 lsb 以指示它们是常规指针还是线程指针，而不是将`lthread`and标志存储在单独的变量中。`rthread`当然，这是速度和空间消耗之间的权衡。

# git - Gerrit 会失去同步吗

> ID：16199816
> 
> 赞同：2
> 
> 时间：2013-04-24T18:45:37.310
> 
> 标签：git, gerrit

我是 Git 和 Gerrit 的新手。

我想知道我是否通过 Gerrit 进行前几次提交，然后通过绕过 Gerrit 直接向 Git 提交一些提交，这会导致 Gerrit 不同步吗？

由于直接提交，进一步的提交是否会出现一些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:46:54.533

不，不会有任何问题。但是您可能需要在合并之前重新调整之前上传的更改[如果这些 CL 的父级由于绕过的更改而更改]。除此之外，您在尝试合并更改时可能会遇到冲突。对未来的提交不会有任何影响..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:15:55.523

检查文档，看起来答案是[否定的；这是支持的](https://gerrit-review.googlesource.com/Documentation/user-upload.html#bypass_review)。

# paypal - 第一次尝试进行masspay并收到错误。

> ID：16199821
> 
> 赞同：3
> 
> 时间：2013-04-24T18:45:53.517
> 
> 标签：paypal, masspay

我正在尝试创建一个针对masspay 的虚拟请求并且遇到了麻烦。masspay正在崩溃并返回这个。

com.paypal.sdk.exceptions.TransactionException：底层连接已关闭：接收时发生意外错误。---> System.Reflection.TargetInvocationException：调用的目标已抛出异常。---> System.Net.WebException：底层连接已关闭：接收时发生意外错误。---> System.IO.IOException: Unable to read data from the transport connection: 一个现有的连接被远程主机强行关闭。---> System.Net.Sockets.SocketException: 远程主机在 System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 处强制关闭现有连接 --- End of inner异常堆栈跟踪---在 System.Net.FixedSizeReader 的 System.Net.Sockets.NetworkStream.Read(Byte[] 缓冲区，Int32 偏移量，Int32 大小)。

这是我的代码的样子。有人可以告诉我我做错了什么： Dim MassPayReqItem As New MassPayRequestItemType MassPayReqItem.Amount = New BasicAmountType MassPayReqItem.Amount.currencyID = CurrencyCodeType.USD MassPayReqItem.Amount.Value = 15.0 MassPayReqItem.Note = "test mass payment" MassPayReqItem.ReceiverEmail =“用户@email.com”

```
 Dim MassPayReqItem1 As New MassPayRequestItemType
    MassPayReqItem1.Amount = New BasicAmountType
    MassPayReqItem1.Amount.currencyID = CurrencyCodeType.USD
    MassPayReqItem1.Amount.Value = 5.0
    MassPayReqItem1.Note = "test mass payment1"
    MassPayReqItem1.ReceiverEmail = "user1@email.com"

    Dim massPayItemsArray(1) As MassPayRequestItemType
    massPayItemsArray.SetValue(MassPayReqItem, 0)
    massPayItemsArray.SetValue(MassPayReqItem1, 1)

    Dim MassPayReqType As New MassPayRequestType
    MassPayReqType.MassPayItem = massPayItemsArray
    MassPayReqType.Version = "51.0"
    MassPayReqType.EmailSubject = "Mass Payment from  from me " _
    & Date.Now.ToLongTimeString

    Dim profile As IAPIProfile = ProfileFactory.createSignatureAPIProfile()

    Dim caller As New com.paypal.sdk.services.CallerServices()

    profile.APIUsername = "fsadsfdafsdasfad1.gmail.com"
    profile.APIPassword = "fafsdafafaddsaf"
    profile.APISignature = "Alq1UN0gL5pSkR-311R7KRCKujzNfdsaasgasgsagsagcOvcvz-hn5Rd"

    caller.APIProfile = profile

    Try
        'send request, return response

        Dim MPRes As New MassPayResponseType
        MPRes = DirectCast(caller.[Call]("MassPay", MassPayReqType), MassPayResponseType)

        Select Case MPRes.Ack

            Case AckCodeType.Success

                Response.Write("API response: <b>" & MPRes.Ack.ToString _
                & "</b><br> Timestamp: <b>" & MPRes.Timestamp.ToLongTimeString _
                & "</b><br> Version: <b>" & MPRes.Version.ToString)

            Case Else
                Response.Write("API response: <b>" & MPRes.Ack.ToString _
                & "</b><br> Timestamp: <b>" & MPRes.Timestamp.ToLongTimeString _
                & "</b><br> Version: <b>" & MPRes.Version.ToString _
                & "</b><br> Error code: <b>" & MPRes.Errors(0).ErrorCode _
                & "</b><br> Short error: <b>" & MPRes.Errors(0).ShortMessage _
                & "</b><br> Long error: <b>" & MPRes.Errors(0).LongMessage)

        End Select

    Catch ex As Exception

        Response.Write(ex.ToString)

    End Try 
```

# eclipselink - 如何将自定义转换器 org.eclipse.persistence.mappings.converters.Converter 与 EclipseList 一起使用？

> ID：16199823
> 
> 赞同：0
> 
> 时间：2013-04-24T18:45:55.343
> 
> 标签：eclipselink, converter

我正在尝试`org.eclipse.persistence.mappings.converters.Converter`在我的 orm.xml 中实现使用它。大多数示例向我展示了如何使用注释来做到这一点。就像`@TypeConverter`在实体类中使用一样。但我不能使用注释。我如何尝试使用 java 创建 orm.xml（基于使用 xjc 工具基于 orm_2_1.xsd 生成的 java 类）。由于某种原因，xsd 定义中缺少类型转换器。

所以我的问题是如何在不使用注释的情况下使用自定义转换器。如何得到它到 orm.xml？

[这个链接](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_typeconverter.htm#CEGBJCIH)说：

> “...每个 TypeConverter 必须唯一命名，并且可以在类、字段和属性级别定义，并且可以在 Entity、MappedSuperclass 和 Embeddable 类中指定。TypeConverter 始终使用 @Convert 注释指定”

那么这是否意味着我们不能在 orm.xml 中提及转换？它的设计有什么原因吗（在 orm_2_1.XSD 中跳过了类型转换？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T10:15:29.340

这在[eclipselink 文档](http://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#sthash.EuXgG2t4.dpuf)中有描述：

在 eclipselink-orm.xml

```
<entity class="Employee"> 
... 
  <attributes> 
  ...
    <basic name="gender">
      <convert>genderConverter</convert>
      <converter name="genderConverter" class="org.myorg.converters.GenderConverter"/>
    </basic> 
  ... 
  </attributes> 
</entity> 
```

# jquery - 删除第一个 X 元素的选择器

> ID：16199830
> 
> 赞同：6
> 
> 时间：2013-04-24T18:46:36.600
> 
> 标签：jquery, jquery-selectors

我有一个带有以下标记的列表：

```
<div id="myList">
    <div data-role="collapsible">
            //...
    </div>

    <div data-role="collapsible">
            //...
    </div>

    //...

</div> 
```

如果我想删除列表的第一个 X（X 是特定数字）子项，我可以在以下语句中使用哪个选择器：

```
$("#myList").remove("???"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T18:54:20.367

您可以使用[slice()](http://docs.jquery.com/Traversing/slice)执行此操作：

```
$("#myList > div").slice(0,n).remove(); 
```

其中 n 是您要删除的项目数量。[**小提琴**](http://jsfiddle.net/YTBqe/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T18:48:16.617

您可以使用`:lt()`选择器：

```
$('#myList > div:lt(x)').remove(); 
```

其中 x 是您要删除的项目数量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T18:52:16.560

您可以切片和删除。见下文，

```
$('#myList').children().slice(0, X).remove(); 
```

**演示：http:** [//jsfiddle.net/NUYcY/1/](http://jsfiddle.net/NUYcY/1/)

# c# - C# - 从另一台服务器远程 ping

> ID：16199831
> 
> 赞同：-2
> 
> 时间：2013-04-24T18:46:37.013
> 
> 标签：c#, windows-services, ping, remote-server

我有一个包含 3 个服务器的场景`A`：`B`和`C`. 该服务器`A`包含一个 C# Windows 服务，它定期 ping 服务器`B`和`C`. 问题是服务器 A 无法访问服务器`C`（防火墙问题）。服务器`B`到达服务器`C`没有问题。

是否有可能以 C# 编程方式从服务器上的 Windows 服务`A`登录服务器`B`并 ping 服务器`C`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:51:34.003

您可以 telnet 进入服务器 B 并 ping C，然后捕获输出。

# java - Java中的复数方法

> ID：16199833
> 
> 赞同：0
> 
> 时间：2013-04-24T18:46:37.803
> 
> 标签：java, pluralize

Java有一个简单的方法来复数一个单词吗？如果没有，我想知道为什么 Rails 有它时它不可用。

有什么具体原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:53:16.017

jtahlborn 在语言特异性方面有一个很好的观点。也就是说，这就是我为在我们的应用程序中使用而编写的内容。它并不全面，但很容易在遇到异常时添加异常。

这是 C#，但应该足够接近，否则您可以适应：

```
public string GetPlural(string singular)
{
    string CONSONANTS = "bcdfghjklmnpqrstvwxz";

    switch (singular)
    {
        case "Person":
            return "People";
        case "Trash":
            return "Trash";
        case "Life":
            return "Lives";
        case "Man":
            return "Men";
        case "Woman":
            return "Women";
        case "Child":
            return "Children";
        case "Foot":
            return "Feet";
        case "Tooth":
            return "Teeth";
        case "Dozen":
            return "Dozen";
        case "Hundred":
            return "Hundred";
        case "Thousand":
            return "Thousand";
        case "Million":
            return "Million";
        case "Datum":
            return "Data";
        case "Criterion":
            return "Criteria";
        case "Analysis":
            return "Analyses";
        case "Fungus":
            return "Fungi";
        case "Index":
            return "Indices";
        case "Matrix":
            return "Matrices";
        case "Settings":
            return "Settings";
        case "UserSettings":
            return "UserSettings";
        default:
            // Handle ending with "o" (if preceeded by a consonant, end with -es, otherwise -s: Potatoes and Radios)
            if (singular.EndsWith("o") && CONSONANTS.Contains(singular[singular.Length - 2].ToString()))
            {
                return singular + "es";
            }
            // Handle ending with "y" (if preceeded by a consonant, end with -ies, otherwise -s: Companies and Trays)
            if (singular.EndsWith("y") && CONSONANTS.Contains(singular[singular.Length - 2].ToString()))
            {
                return singular.Substring(0, singular.Length - 1) + "ies";
            }
            // Ends with a whistling sound: boxes, buzzes, churches, passes
            if (singular.EndsWith("s") || singular.EndsWith("sh") || singular.EndsWith("ch") || singular.EndsWith("x") || singular.EndsWith("z"))
            {
                return singular + "es";
            }
            return singular + "s";

    }
} 
```

附加使用说明...正如您可能看到的，它希望您传入的任何单词的第一个字母大写（如果不在例外列表中则无关紧要）。有无数种不同的处理方式。它只是满足我们的特殊需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-22T15:59:48.013

看看[JBoss 的 Inflector 类](https://docs.jboss.org/jbossdna/0.1/apidocs/org/jboss/dna/common/text/Inflector.html)。即使您不使用 JBoss，您也可以了解源代码以获得实现此目的的综合方法。

# php - PHP 注意：数组到字符串的转换

> ID：16199838
> 
> 赞同：1
> 
> 时间：2013-04-24T18:46:55.700
> 
> 标签：php, postgresql, type-conversion

我似乎无法弄清楚这一点。我写了一个 PHP 脚本，我不断得到一个**数组到字符串的转换......**在尝试执行 postgres 查询时注意一个错误：

```
$tables = array(array('a','table1'),array('c','table2'));
$table = $tables[0][1];
$query = "SELECT * FROM " . $table . " WHERE id = :id LIMIT 1";
$select = $dbconn->prepare($query);
$id = $_GET['id'];
if($select->execute()){
}else{
    echo $select->errorInfo();
} 
```

我正在使用 PostgreSQL 版本 9.2.1 和最新的 PHP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:51:39.253

[`PDOStatement::errorInfo()`返回一个数组](http://www.php.net/manual/en/pdostatement.errorinfo.php)，但您直接回显它，这将始终导致字符串`Array`。您必须存储其返回的数组，并访问您希望读取的组件：

```
$err = $select->errorInfo();
print_r($err);

// Example as lifted from PHP docs linked above:
PDO::errorInfo():
Array
(
    [0] => HY000
    [1] => 1
    [2] => near "bogus": syntax error
) 
```

顺便说一句，`E_NOTICE`for 数组到字符串的转换是 PHP 5.4 中的新功能。PHP 5.3 中的相同代码将`Array`作为字符串输出，但不会发出`E_NOTICE`.

由于您使用的是 PHP 5.4，因此`[2]`如果您愿意，可以直接取消引用该消息：

```
// 5.4+ only...
echo $select->errorInfo()[2]; 
```

### 现在为什么你会收到错误：

至于为什么要进入`else`块首先报告错误，您有一个占位符，但您在执行查询之前`:id`从未绑定过变量。`$id`

您可以使用

```
$select->execute(array(':id', $id)) 
```

或者

```
$select->bindParam(':id', $id, PDO::PARAM_INT); // assuming an integer $id. Use PDO::PARAM_STR for strings 
```

# c# - 串行端口分别读取每个字符

> ID：16199839
> 
> 赞同：0
> 
> 时间：2013-04-24T18:47:02.487
> 
> 标签：c#, winforms, serial-port

我正在尝试从串行端口读取字节并将它们作为字符串写入文本框。

我的问题是代码将每个字母/字符单独写入框中，而不是一个长字符串，所以如果我收到“Hello”它将写“H”，然后清除该框，然后是“e”..etc

```
public partial class Form1 : Form
    {
        static SerialPort serial;
        public string line;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            inputBox.Text = "Enter some text, then press enter";

            serial = new SerialPort("COM3", 9600, Parity.None, 8, StopBits.One);
            serial.Open();

            serial.DataReceived += new SerialDataReceivedEventHandler(serial_DataReceived);
        }

        public void serial_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {

            // wait for the buffer
            System.Threading.Thread.Sleep(300);

                byte[] bytes = new byte[serial.BytesToRead];
                serial.Read(bytes, 0, bytes.Length);

                line = System.Text.Encoding.UTF8.GetString(bytes);

            if (line != null)
            {
                writeRecieved(line);
            }
        }

        public void writeRecieved (string line)
        {
            if (outputBox.InvokeRequired)
            {
                outputBox.Invoke((MethodInvoker)delegate { outputBox.Text = line; });
            }
            else
            {
                outputBox.Text = line;
            }
        } 
```

但是，在调试时，它似乎只命中了这些行中的每一行，并且本地视图将变量行显示为“Hello”

*编辑：* 我尝试追加（outputBox.Text += line;），但是每次收到新消息时文本框都会填满文本。我试着放一个 outputBox.Clear(); 在 datarecieved 处理程序中，但由于某种原因它在每个字节之后执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:52:11.177

您的计算机能够以比 9600 bps 快得多的速度读取数据。当它调用时，它会读取*当时*`serial.Read`缓冲区中可用的尽可能多的字符。

 *因此，您要么需要继续阅读，直到获得换行符，要么按照评论中的建议进行操作并将阅读的文本附加到文本框中。

针对您在评论中的问题，您所要求的内容是不可能的。除非发送者包含一些文本结束字符，否则接收者无法知道发送者何时完成发送所有数据。发件人可能会发送`"Hello"`，然后立即跟进`"World"`。数据是按字符接收的。除非发送者在每个单词之后发送某种终止符，否则它只是一个字节流到接收者。

是的，这`Thread.Sleep`是低效的，不应该用于这种事情。

通常，这种事情是通过让发件人在每行的末尾添加换行符来处理的。然后接收器可以读取字符并在换行符上拆分接收到的文本以导出行。

使用 a`Sleep`也会给你带来麻烦。假设发送方发送`"Hello"`后跟`"World"`，由于某种原因，您的线程可能会休眠 4320 毫秒（可能发生在繁忙的系统上）而不是 300 毫秒，并且您得到`"HelloWo"`第一个单词。哎呀。*

# mysql - 在返回的mysql结果中查找行数（nodejs）

> ID：16199842
> 
> 赞同：28
> 
> 时间：2013-04-24T18:47:08.630
> 
> 标签：mysql, node.js

node.js使用felixge的mysql时，如何查询result对象返回的行数？我有一个相当昂贵的查询，所以我不想运行`COUNT(*)`第一次，只是为了第二次运行查询。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-24T18:50:20.357

如果是选择查询，只需取返回数组的长度即可。

```
connection.query(sql, [var1,var2], function(err, results) {
    numRows = results.length;
}); 
```

如果它是更新/删除查询，则返回的字典将有一个受影响的Rows 变量。

```
connection.query(sql, [var1,var2], function(err, result) {
    numRows = result.affectedRows;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:05:02.803

如果您使用自述文件中的示例，只需查看行对象的长度属性（即 rows.length）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-04-13T18:13:16.850

使用截至 2015 年 4 月 13 日的 mssql 2.1.2 版本：

从 DeviceAccountLinks 中删除，其中 DeviceAccountId = @deviceAccountId 和 DeviceType = @deviceType

语句不会产生“未定义”的结果

我已将声明更改为：

从 DeviceAccountLinks 中删除，其中 DeviceAccountId = @deviceAccountId 和 DeviceType = @deviceType；选择@@rowcount "rowCount"

得到输出：[{rowCount:1}]

# ruby-on-rails - rails 3 获取具有多个关联记录的记录数（has_many）

> ID：16199845
> 
> 赞同：7
> 
> 时间：2013-04-24T18:47:20.523
> 
> 标签：ruby-on-rails, activerecord

我可以获得具有多个用户的帐户集合：

```
Account.group('accounts.id HAVING count(users.id) > 1').joins(:users) 
```

但是，一旦我在那个对象上调用 .count ，我就会得到一个巨大的爆炸：

(0.3ms) SELECT COUNT(*) AS count_all, accounts.id HAVING count(users.id) > 1 AS accounts_id_having_count_users_id_1 FROM "accounts" INNER JOIN "users" ON "users"."account_id" = "accounts"."id " GROUP BY accounts.id HAVING count(users.id) > 1 ActiveRecord::StatementInvalid: PG::Error: ERROR: 在“AS”第 1 行或附近出现语法错误：...unt_all, accounts.id HAVING count(users .id) > 1 个 AS 帐户...

似乎在 postgres 中，我想要的实际查询是：

```
select count(*) from (SELECT accounts.id FROM "accounts" INNER JOIN "users" ON "users"."account_id" = "accounts"."id" GROUP BY accounts.id HAVING count(users.id) > 1) as a; 
```

如何获得 activerecord 来生成这个（或类似的）查询？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-11T06:06:48.953

活动记录支持“拥有”作为一种方法。因此，您可以通过以下方式进行查询：

```
Account.joins(:users).select('accounts.id').group('accounts.id').having('count(users.id) > 1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:34:04.533

你为什么不从用户模型中尝试这个，在那里你通过用户模型中的 account_id 分组

`User.count(:group => :account_id)` 这可能会返回显示 {:account_id => count_of_users } 的哈希，例如 {1 => 3, 2 => 5, 3 => 2}

现在选择用户数大于 1 的 account_id。

# algorithm - O(nlogn) 算法最小化 abs(x+y)

> ID：16199848
> 
> 赞同：1
> 
> 时间：2013-04-24T18:47:38.510
> 
> 标签：algorithm, modulus

我最近在一次采访中被问到一个问题。我无法解决这个问题。对算法设计感兴趣的人可能会喜欢这个问题。

给定一个实数数组 S，在 S 中找到一对使 |x+y| 最小化的数 x&y。相同的算法应该设计为在 O(nlogn) 中运行。

我找不到解决方案。任何人都可以指导我正确的方向来解决这个问题吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:00:44.580

对数字进行排序。对于每个元素 x 对 -x 进行二分搜索。你得到最接近的数字 y 以最小化 |x+y|。

注意：您也可以优化第二部分。从第一个和最后一个元素的索引开始：i=0，j=n-1。在每次迭代中计算总和，更新最小总和，如果 sum<0 或递减 j（当 sum>=0），则增加 i。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:09:11.973

面试官的问题 - 或您的重述 - 似乎缺乏两个方面。

1）实数非常非常难以在计算机中表示。它们可以用符号格式表示，也可以表示为浮点数的子集，以及实数的子集（如整数）

2) Mod 有两个参数，它们的声明是最小化 mod(x+y) 而不是 mod(x,y)。

这可能是一个旨在挑战问题陈述错误的面试问题吗？

维基百科将“mod”定义为“给定两个正数，a（被除数）和 n（除数），模 n（缩写为 mod n）是 a 除以 n 的欧几里得除法的余数。” 和“欧几里得除法”作为“在算术中，欧几里得除法是两个整数相除产生商和余数的常规过程。”

更多关于实数的“mod”没有意义：[http ://www.abstractmath.org/MM/MMNumberTheory.htm](http://www.abstractmath.org/MM/MMNumberTheory.htm)

如果问题被定义为在 O(nlogn) 中最小化 mod(x,y) 的整数数组，那似乎很容易处理。您对数组进行排序，并为每个元素应用——本质上——对每对的二进制搜索进行扭曲。正如人们所说，在 mod-space 上进行二进制搜索留给读者。

我有几个面试题，我以同样的方式使用，找出候选人是否有勇气质疑这个问题。这个问题可能具有两者的元素，必须质疑实数和实数上的模型的想法，然后解决一个易于处理的问题（一个相当传统的搜索数据结构问题）。

当我提出这些问题时，第一部分可能是一个“陷阱”问题，我会让他们对这个问题困惑几分钟，然后将问题重新呈现为一个易于处理的问题，只是为了移动一起采访。

# javascript - ACE 中的双重语法高亮显示

> ID：16199849
> 
> 赞同：2
> 
> 时间：2013-04-24T18:47:39.740
> 
> 标签：javascript, python, ace-editor

我想使用 ACE 编辑器在 python 脚本中启用 JS 的语法突出显示。具体来说，我想要这样的东西：

```
#python stuff...
foo_dict = {}

foo = """<script> var foo = 3 </script>""" 
```

其中 script 标签中的所有内容都针对 JS 进行了格式化，其余的都针对 python 进行了格式化。

我被困在第一方，在手动组合一个新的“模式”之前，我希望你们都有一个简洁的答案。提前致谢。

# ruby-on-rails - ActiveRecord 可以调用本机数据库函数吗？

> ID：16199853
> 
> 赞同：1
> 
> 时间：2013-04-24T18:47:53.870
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

无论如何在 ActiveRecord 中使用本机数据库功能？

示例：假设我想在 Postgres 中使用 now()。我不想使用 Time.now 因为我希望使用数据库时间，而不是 Rails 服务器时间。

像这样的东西，显然是行不通的。

```
TableCommon.new( {:upd_date => now()} ) 
```

注意：这是一个***人为的***例子。我不想使用 now()，但我想使用其他数据库函数，并想知道如何通过 ActiveRecord 使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:57:11.860

是的，您可以通过连接直接访问它

```
TableCommon.new( :upd_date => TableCommon.connection.select_value("now()") ) 
```

connection.select_value 返回一个结果，忽略其余部分：

```
 ActiveRecord::Base.connection.select_value("select 1,2")  #returns 1 
```

connection.select 以获取哈希值：

```
 ActiveRecord::Base.connection.select("select 1 as a ,2 as b")  #{"a"=>1, "b" =>2} 
```

connection.select_all 将给出一个哈希数组，每行一个，如 select。

connection.select_values 将给出一个数组，其中包含每行中第一个值的值。它就像 select_value 但有多行。

# linux - 如何使用 Grub2 配置 kgdb？

> ID：16199856
> 
> 赞同：2
> 
> 时间：2013-04-24T18:48:00.797
> 
> 标签：linux, ubuntu, kernel, grub, kgdb

我需要设置一个内核调试会话，以便我可以在 PCIe 硬件设备上查看和查看一些寄存器。我使用的是使用 Grub2 的 Ubuntu 12.04。根据我的 /boot/config-3.5.0-23-generic 文件，内核已经构建了 KGDB 支持，但显然没有支持 kgdb-over-ethernet。为此，我正在重建内核。

同时，我试图弄清楚如何修改我的 Grub2 配置文件以添加 KGDB 条目。我能找到的唯一教程都参考了传统的 Grub 风格的语法来做到这一点：

```
title 2.6.15.5-kgdb
    root (hd0,0)
    kernel /boot/vmlinuz-2.6.15.5-kgdb ro root=/dev/hda1 kgdbwait kgdb8250=1,115200 
```

Grub2 的语法明显不同，因为“kernel”命令似乎已被“linux”取代，而且我还看到了许多其他差异。这让我对期望旧语法“正常工作”的希望渺茫。

我还没有找到任何在线使用 Grub2 配置 KGDB 的说明。这样做的正确方法是什么？有人可以提供使用 Grub2 语法的示例吗？

另外，由于我是 Linux 内核调试的新手，也许我什至没有以正确的方式解决这个问题。请让我知道我是否应该为此使用不同的方法，例如，如果其他人由于已知的以太网问题而使用串行调试，或者其他任何情况。

谢谢！

# c# - 如何检查是否有其他应用程序实例正在运行

> ID：16199858
> 
> 赞同：1
> 
> 时间：2013-04-24T18:48:09.337
> 
> 标签：c#, .net

我用 C# 编写了一个应用程序，它放置在我们的服务器上。当有人需要使用它时，应用程序直接从服务器启动，从我们局域网中任何连接的 PC 启动。

有没有简单的方法来检查有多少实例正在运行？或者更确切地说，如果有任何其他实例而不是我开始的实例？

* * *

编辑：

这不是提供的帖子的副本，因为我不想确保只有一个实例正在运行（如“不要同时运行超过 1 个应用程序”），但只是检查一下，如果我以外的其他人正在运行它（在正常情况下，它必须在多台 PC 上同时工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:16:50.040

没有简单的方法可以知道程序实例在同一二进制文件的某些机器上运行 - 您的程序需要以某种方式将“我正在运行”报告到某个共享位置，而不是检查是否有其他实例正在运行。

如果您只需要检查单个实例，则可以从同一位置打开文件，如果多个实例尝试打开它，它将失败。

共享位置计数实例的几个选项：

*   用机器名更新一些文件
*   一些要 ping 的 Web 服务/站点
*   共享数据库

请注意，这也意味着如果程序终止，则共享位置中可能不会报告有关此特定实例已完成的报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:53:08.500

有几种方法可以做，例如，使用套接字、数据库。一种最简单的方法（但不那么安全）可能是使用文件来记录实例的数量，您可能需要改进它。

```
void WriteToFile(int x, int millisecondsTimeout) {
    for(; ; Thread.Sleep(millisecondsTimeout))
        try {
            using(var file=File.Open("instances.bin", FileMode.OpenOrCreate)) {
                var bytes=new byte[sizeof(int)];
                file.Read(bytes, 0, sizeof(int));
                var instances=x+BitConverter.ToInt32(bytes, 0);

                if(instances>-1)
                    file.Write(BitConverter.GetBytes(instances), 0, sizeof(int));

                break;
            }
        }
        catch(IOException ex) {
        }
}

void Increment() { // invoke on program starts
    WriteToFile(1, 1000);
}

void Decrement() { // invoke on program exits
    WriteToFile(-1, 1000);
} 
```

请注意，该文件`"instances.bin"`应该是位于服务器上的文件。

`AppDomain.CurrentDomain.UnhandledException`一旦程序意外终止，您可能还想编写一个处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:25:12.433

通常，为了只允许应用程序的 N 个并发实例，您可以使用命名信号量，因为它们在系统中是可见的。

当您启动应用程序时，尝试使用指定允许的实例数量的参数创建一个命名[信号量。](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)如果`WaitOne`失败，这意味着所有实例都在使用中，因此您退出应用程序。

这是示例代码（在我的脑海中，掩盖了一些微妙的问题，没有错误处理等）

```
 const int MAX_INSTANCES = 2; // set desired number of concurrent instances
    var s = new Semaphore(MAX_INSTANCES, MAX_INSTANCES, "unique_name_of_semaphore");
    if (s.WaitOne(0)) // zero timeout - exit immediately if exhausted
    {
      // good, we're in, run the app
      Application.Run(new Form()); // run the app - a winforms example
      s.Release();   // release the semaphore
    }
    else
    {
      // oops, exhausted:
      MessageBox.Show("too many instances running !!");
    } 
```

您还可以使用 Semaphore.OpenExisting() 的变体，具体取决于您的应用程序需求。

编辑：哎呀，只是注意到您实际上不需要这个，而是验证在不同机器上运行的实例 - 如果没有向服务器报告的机制，这会更难。

# visual-c++ - 创建一个MinGW可以链接的MSVC库

> ID：16199859
> 
> 赞同：4
> 
> 时间：2013-04-24T18:48:13.577
> 
> 标签：visual-c++, mingw, static-libraries, name-mangling

我正在尝试使用 MS Visual Studio 2012 创建一个静态库，MinGW 将能够链接到该库（我正在使用 Code::Blocks 处理此过程的 MinGW 端）。

为避免[名称混淆](http://en.wikipedia.org/wiki/Name_mangling)问题，库接口在`extern "C"`块内声明，并且仅使用[C 和 C++ 共有的数据类型](http://en.wikipedia.org/wiki/Plain_old_data_structure)。尽管有这种预防措施，MinGW 在尝试编译链接到库的项目时会给出未定义的引用错误。

库文件在 VS 2012 中从两个文件 LibTest.h 和 LibTest.cpp 编译（这些是展示问题的简化示例）。

```
// LibTest.h

#ifndef LIBTEST_H
#define LIBTEST_H

extern "C" {

int Test(int input);

}

#endif 
```

* * *

```
// LibTest.cpp

#include "LibTest.h"

extern "C" {

int Test(int input){
    return (input + 5);
}

} 
```

VS 2012 将其编译为静态库 (LibTest.lib)，没有任何抱怨。我对 MinGW 的测试程序如下：

```
// LibTest.lib is linked in the project settings
#include "LibTest.h" // Same LibTest.h as above

int main(){

    int x = 5;
    int a = Test(x);

    return 0;
} 
```

当我尝试编译它时，该过程因未定义的引用错误而失败（与尝试链接名称损坏的库会产生相同的错误）。我希望使用`extern "C"`来防止名称修改问题，但由于这是我第一次尝试创建与交叉编译器兼容的库，因此我可能错过了其他一些东西。

任何建议或意见将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-23T08:55:21.690

我想说微软编译器需要 __declspec(dllexport) ！

这是一个msdn链接：

[https://msdn.microsoft.com/en-US/en-en/library/a90k134d.aspx](https://msdn.microsoft.com/en-US/en-en/library/a90k134d.aspx)

# ghostscript - ghostscript 8.7 显示嘈杂的灰色背景

> ID：16199862
> 
> 赞同：0
> 
> 时间：2013-04-24T18:48:16.927
> 
> 标签：ghostscript

我有 pdf 文件，主要是旧报纸页面的大图像。使用 gs 9.06 这些可以正确渲染，但在我的网站上（使用 ghostscript 8.70），它们以嘈杂的灰色背景显示。以下链接给出了一个示例（从 gs 下载单个页面）：

[http://mvtm.ca/collections/php/serve_pdfpage.php?file=1940-04-11&page=01](http://mvtm.ca/collections/php/serve_pdfpage.php?file=1940-04-11&page=01)

实际的 gs 命令是： gs -q -sDEVICE=pdfwrite -r200 -dNOPAUSE -dBATCH -dSAFER -dFirstPage=01 -dLastPage=01 -sOutputFile=- mypdffile.pdf

似乎没有显示图像层（唯一应该渲染的东西）。pdf 还由 OCR 程序处理，以添加用于搜索的背景文本。

这个确切的过程在我的本地机器（Mac OS X）上正确运行。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:30:55.770

我不完全确定您认为什么是问题。您说使用最新版本的 Ghostscript 可以“正常”工作，而使用旧版本则不行？

这只是向我暗示，在过去四年中的某个时间已经修复了一个错误。在我看来，您应该升级您的 8.70 安装。

但请注意，通过查看损坏的输出并不能说太多，我需要在原始文件损坏之前查看原始文件，以便猜测错误是什么。

单独来看，我的“猜测”是原始文件使用 JBIG2 或 JPX 编码的图像作为背景，并且我们的 JBIG2 解码器有一个错误（一些已修复）或者在 JPX 的情况下 JasPER解码器有一个错误。我们停止使用 JasPER，因为它速度慢、内存占用大、漏洞百出且实际上不受支持，而是转而使用 OpenJPEG。

但是，也许我错过了您的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T00:11:14.103

我不确定你从哪里来或要去哪里。您提取一个pdf的一页并输出另一个pdf，但链接是.png。查看输入和中间 .pdf 可能会有所帮助

我看到的是单色位图。您可以添加 -dProcessColorModel=/DeviceGray 或 -dProcessColorModel=/DeviceRGB 这将允许输出 pdf 具有色调，而不仅仅是黑白。

另一种可能性是添加一条转换曲线，它可以使背景变亮，同时使黑色变暗，但似乎还有其他事情发生。输出中的标题似乎缺少字母。即使灰度和更好的黑白对比度，似乎正在发生其他事情。

# c++ - 在模板参数列表中跳过较早的隐式模板参数，但不是稍后

> ID：16199863
> 
> 赞同：1
> 
> 时间：2013-04-24T18:48:21.820
> 
> 标签：c++, templates, c++11

我只是好奇：

在下面的示例中，我展示了我的意思，而不是`/*implicit*/`. 有没有办法让它留空？如您所见，typename T 不能是第一个。

```
template<typename C1, typename C2, typename T = decltype(typename C1::value_type() * typename C2::value_type())>
T dot(const C1 &v1, const C2 &v2);

int main()
{
    std::vector<float> vec1;
    std::vector<double> vec2;
    // typical:
    auto result1 = dot(vec1, vec2); // auto -> double
    // avoid numerical unstable situations:
    auto result2 = dot</*implicit*/,/*implicit*/,long double>(vec1, vec2); // auto -> long double
    //auto result2 = dot<decltype(vec1),decltype(vec2),long double>(vec1, vec2);
} 
```

在最后一行，我提供了一个解决方案，女巫不是超级臃肿。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:56:49.860

只需重新排序参数，然后有条件地执行：

```
// short notation for `std::declval<typename C::value_type&>()`
template<class C>
typename C::value_type& value_in();

// if T == void, find actual result type, else use T
template<class T, class C1, class C2>
using DotResult = typename std::conditional<std::is_void<T>::value,
    decltype(value_in<C1>() * value_in<C2>()), T>::type;

// void can't be a valid value_type
template<class T = void, class C1, class C2>
DotResult<T,C1,C2> dot(C1 const& c1, C2 const& c2); 
```

但是，我不得不承认......我真的看不出它的用途 - 你可以直接转换结果，或者隐式转换它......`long double x = dot(v1, v2);`

# android - Android 使用应用程序状态与意图在活动和服务之间共享对象

> ID：16199866
> 
> 赞同：2
> 
> 时间：2013-04-24T18:48:26.757
> 
> 标签：android

我正在寻找一些关于意图与应用程序上下文的一般建议。

当您的应用程序具有执行诸如线程网络侦听器之类的服务和/或收集位置信息以与主 Activity 在结构化集中共享的服务时，主 Activity 将不得不在用户输入时调整所述数据，什么在这些级别之间共享这些数据是最聪明的方式吗？

现在我有一个使用 Intents 的设置，但我不喜欢它，尽管它现在可能会做。我无法完整地序列化数据，所以我在这里和那里广播位。主要问题是我的 Intent 用于更新的主要数据集存储在主 Activity 中。

我想将数据集移动到我的服务中，或者将其存储在应用程序上下文中。但是我担心线程安全，因为主 Activity 偶尔会调整数据。例如，单击一次，更改布尔值，或从数据集中删除项目等...

我明白了意图的意义，但我想将意图广播为需要存储在应用程序上下文中的数据的函数的触发器，而不是作为在应用程序周围改组数据（部分数据）的工具。

我是否可以合理地使用 Application 上下文以安全的方式在 Service 和 Activity 之间更新和共享数据？我希望我的服务在后台运行，并且活动在用户返回应用程序或更改方向时拉取或更新数据集。谢谢。

**更新/澄清**

这个怎么样。访问绑定的服务 getter/setter 方法进行数据共享是否安全？我绑定到我的服务以通过公共方法启动/停止线程函数，（自从我跳回去并意识到我正在绑定以来已经有一段时间了）我可以以这种方式安全地调用 getter/setter 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:16:31.337

我建议您不要尝试创建自己的解决方案，而是考虑 MVC 模型。

如果您需要在两个 [C] 控制器（例如 Activity、Fragment 等）之间传递数据，您应该将它们保存在 [M]odel 中，它以您可以（反）序列化数据的方式实现。

是否使用 SQlite（或某些 ORM）、SharedPreferences、文件存储（可能是序列化 json）、文件内的二进制 blob（请参阅`ObjectOutputStream`、`ObjectInputStream`）或其他 [M]odel 实现，完全取决于您的自定义用例。

在上下文中静态存储数据通常是**非常讨厌的**想法，因为系统和用户如何使用您的应用程序。

考虑更多的用例，例如制作独立线程来获取数据并将数据持久保存到 [M] 模型中。如果您的 [M] 模型将是某种静态变量或应用程序上下文变量，您将始终需要坚持使用它并处理同步、等待/加入/通知等混乱。如果您的 [M] 模型将是独立的 SQL（或 noSQL）数据库，您可以使用观察者来通知 [M] 模型更改并且根本不需要上下文。

从 中可以看出`android.os.NetworkOnMainThreadException`，您应该对数据进行任何异步处理。无论数据是在线存储、存储在本地数据库、文件系统还是上下文中。坚持这些知识，并尝试提出自己的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:03:01.633

要传达活动和服务，您可以部署 ResultReceiver 或 LocalBroadcast。Service 可以完成繁重的工作并通过 metioned 方法发送结果来与 Activity 交互。您可以在 Activity 的生命周期的 onStart 和 onStop 方法上将 Activity 连接到服务，以确定 Activity 是否在前台，并相应地更新 UI。

希望能帮助到你。

注意：根据我的个人经验，我与两者都合作过，他们做得很好。我不建议绑定到服务，因为它给 Activity 带来了复杂性。

# json - MVC4 Json Null 对象处理

> ID：16199870
> 
> 赞同：1
> 
> 时间：2013-04-24T18:48:34.477
> 
> 标签：json, asp.net-mvc-4, null, string

MVC Framework 4.0，有些动作返回HTML，有些需要返回Json。下面的模型是我使用返回的 C# 对象的示例`Json(myObject);`

```
public class resultModel 
{    
    public string status;
    public string message;

    public subResultModel myChild;
}

public class subResultModel
{
    public string status;
    public string message;
} 
```

该`Json()`方法可以很好地解释一个完全实例化的对象，但是，如果`myChild`是`null`，则键的 Json 值是`null`。为了满足更广泛的网络标准，我希望结果是`""`. 我不知道该怎么做，我`Json()`在代码中的很多地方都使用了，为了避免开销，我宁愿不必切换到 Json.NET。

即从

```
{
   "status":"success",
   "message":"",
   "myChild":null
} 
```

至

```
{
   "status":"success",
   "message":"",
   "myChild":""
} 
```

# ios - 应用程序因内存不足而崩溃

> ID：16199871
> 
> 赞同：4
> 
> 时间：2013-04-24T18:48:36.257
> 
> 标签：ios, memory-management, automatic-ref-counting, afnetworking, didreceivememorywarning

![仪器应用](https://i.stack.imgur.com/xGlDW.png)

我有一个**类似 Instagram 的**应用程序，带有无尽的提要和相机。我正在使用`ARC`. 为了加载（和缓存）我正在使用的图像`AFNetworking`。

当我滚动提要时，它会分配并分配大量内存，有时会被释放。因此，如果我的应用程序占用超过 10-13mb 并且我打开相机，它就会崩溃。我的提要`NSMutableArray`由以下实体组成：

```
@interface Post : NSObject 
@property (readonly) NSString *postId;
@property (readonly) NSURL *imageURL;
@property (readonly) NSString *text;
@end 
```

我究竟做错了什么？我应该在 didreceivememorywarning 方法中做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T15:11:40.040

当您收到 didReceiveMemoryWarning 时，您可以处置任何可以重新创建的资源。

```
- (void)didReceiveMemoryWarning
{    
    [self setBackBtn:nil];
    [self setDataSource:nil];
    [self setPendingDataSource:nil];
    [self setSelectionView:nil];
    [self setTitleForFormBarButtons:nil];
    [self setType:nil];

    [super didReceiveMemoryWarning];
} 
```

# python - Numpy - 列表的数组，向量中未自动设置维度

> ID：16199875
> 
> 赞同：1
> 
> 时间：2013-04-24T18:48:46.867
> 
> 标签：python, numpy

我有一个数字列表

```
l = [ 1 , 3, 5] 
```

我想将其转换为 numpy 数组向量

```
import numpy as np
vec = np.asarray(l) 
```

但是 vec 的尺寸没有设置

```
vec.shape
Answer: (3,) 
```

我知道我能做到

```
vec.shape = (vec.shape[0], 1) 
```

但是有没有更快、更短的方法将第二维设置为一维？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T18:53:17.290

```
>>> vec = np.asarray(l).reshape((1,-1)) 
>>> vec.shape
(1, 3) 
```

我想这就是你想要的......也许

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:06:07.607

我认为阅读这个（对我来说）更简单的方法是使用`np.newaxis`：

```
a = np.array([1,3,5])
a.shape
#(3,)

b = a[np.newaxis,...]
print b
#[[1, 3, 4]]

b.shape
#(1, 3) 
```

但这不是列向量......，也许你想要：

```
c = a[...,np.newaxis]
print c
#[[1],
# [3],
# [4]]

c.shape
#(3, 1) 
```

您也可以使用新轴`None`来代替`np.newaxis`您想要的任何位置：

```
a[...,None]
#[[1],
# [3],
# [4]] 
```

# spring - maven + jpa + 休眠 + 春天。太慢了

> ID：16199876
> 
> 赞同：2
> 
> 时间：2013-04-24T18:48:50.407
> 
> 标签：spring, hibernate, maven, jpa

我正在用 maven、jpa、spring 和 hibernate 做一个项目。
TopicFacadeTest 类需要 20 分钟 o_O
插入和删除非常慢。
CPU 在 1% 到 3% 之间。
我有 6G 内存。
有什么问题？？这个是正常的？
数据库最初是空的。

[链接 下载 Netbeans 项目](https://dl.dropboxusercontent.com/u/80642164/QuestionWeb/Mavenproject1.zip)

这些是配置文件：

**persistence.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="mycompanyPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
</persistence-unit>

</persistence> 
```

**测试上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

<!-- holding properties for database connectivity /-->
<context:property-placeholder location="classpath:jdbc.properties"/>

<!-- enabling annotation driven configuration /-->
<context:annotation-config/>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username"  value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean>

<bean id="entityManagerFactory"
      class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
      p:dataSource-ref="dataSource"
      p:jpaVendorAdapter-ref="jpaAdapter">
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
    </property>                             
    <property name="persistenceUnitName" value="mycompanyPU"></property>
</bean>

<bean id="jpaAdapter"
      class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
      p:database="${jpa.database}"
      p:showSql="${jpa.showSql}"/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
      p:entityManagerFactory-ref="entityManagerFactory"/>

<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true" />

<!-- Scans the classpath of this application for @Components to deploy as beans -->
<context:component-scan base-package="com.mycompany.repository" />
<context:component-scan base-package="com.mycompany.service" /> 
```

**jdbc.properties**

```
jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://192.168.1.12:3306/mydatabase
jdbc.username=root
jdbc.password=root
hibernate.dialect=org.hibernate.dialect.MySQLDialect

jpa.database = MYSQL
hibernate.generate_statistics = true
hibernate.show_sql = true
jpa.showSql = true
jpa.generateDdl = true 
```

Java 类：

**主题.java**

```
package com.mycompany.domain;

import java.io.Serializable;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "topic")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = Topic.FIND_ALL, query = "SELECT t FROM Topic t"),
    @NamedQuery(name = Topic.FIND_BY_ID, query = "SELECT t FROM Topic t WHERE t.id = :id"),
    @NamedQuery(name = Topic.FIND_BY_NAME, query = "SELECT t FROM Topic t WHERE t.name = :name"),
    @NamedQuery(name = Topic.FIND_BY_ID_CHAR, query = "SELECT t FROM Topic t WHERE t.idChar = :idChar")})
public class Topic implements Serializable {

private static final long serialVersionUID = 1L;
public static final String FIND_ALL = "Topic.findAll";
public static final String FIND_BY_ID = "Topic.findById";
public static final String FIND_BY_NAME = "Topic.findByName";
public static final String FIND_BY_ID_CHAR = "Topic.findByIdChar";
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Basic(optional = false)
@Column(name = "id", unique = true, insertable = false, updatable = false)
private Long id;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 255)
@Column(name = "name")
private String name;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 45)
@Column(name = "idChar")
private String idChar;

public Topic() {
}

public Topic(String name, String idChar) {
    this.name = name;
    this.idChar = idChar;
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getIdChar() {
    return idChar;
}

public void setIdChar(String idChar) {
    this.idChar = idChar;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (id != null ? id.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof Topic)) {
        return false;
    }
    Topic other = (Topic) object;
    if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "com.mycompany.domain.Topic[ id=" + id + " ]";
}
} 
```

**AbstractFacade.java**

```
 package com.mycompany.repository;

import java.util.List;
import javax.persistence.EntityManager;
import org.springframework.transaction.annotation.Transactional;

public abstract class AbstractFacade<T> {
private Class<T> entityClass;

public AbstractFacade(Class<T> entityClass) {
    this.entityClass = entityClass;
}

protected abstract EntityManager getEntityManager();

@Transactional
public void create(T entity) {
    if (entity != null) {
        getEntityManager().persist(entity);
    }
}

@Transactional
public void edit(T entity) {
    if (entity != null) {
        getEntityManager().merge(entity);
    }
}

@Transactional
public void remove(T entity) {
    if (entity != null) {
        getEntityManager().remove(getEntityManager().merge(entity));
    }
}

@Transactional(readOnly = true)
public T find(Object id) {
    return getEntityManager().find(entityClass, id);
}

@Transactional(readOnly = true)
public List<T> findAll() {
    javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
    cq.select(cq.from(entityClass));
    return getEntityManager().createQuery(cq).getResultList();
}

@Transactional(readOnly = true)
public List<T> findRange(int[] range) {
    javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
    cq.select(cq.from(entityClass));
    javax.persistence.Query q = getEntityManager().createQuery(cq);
    q.setMaxResults(range[1] - range[0]);
    q.setFirstResult(range[0]);
    return q.getResultList();
}

@Transactional(readOnly = true)
public int count() {
    javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
    javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
    cq.select(getEntityManager().getCriteriaBuilder().count(rt));
    javax.persistence.Query q = getEntityManager().createQuery(cq);
    return ((Long) q.getSingleResult()).intValue();
}
} 
```

**主题门面**

```
package com.mycompany.repository;

//<editor-fold defaultstate="collapsed" desc="imports">
import com.mycompany.domain.Topic;
import java.util.List;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.NoResultException;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;
//</editor-fold>

@Stateless
@Repository
public class TopicFacade extends AbstractFacade<Topic> implements TopicFacadeLocal {

@PersistenceContext
private EntityManager em;

@Override
protected EntityManager getEntityManager() {
    return em;
}

public TopicFacade() {
    super(Topic.class);
}

@Transactional(readOnly = true)
@Override
public Topic findByName(String name) {
    try {
        Query query = em.createNamedQuery(Topic.FIND_BY_NAME);
        query.setParameter("name", name);
        return (Topic) query.getSingleResult();
    } catch (NoResultException ex) {
        return null;
    }
}

@Transactional(readOnly = true)
@Override
public List<Topic> findByIdChar(String t) {
    Query query = em.createNamedQuery(Topic.FIND_BY_ID_CHAR);
    query.setParameter("idChar", t);
    return query.getResultList();
}
} 
```

**TopicFacadeTest.java**

```
package com.mycompany.repository;

//<editor-fold defaultstate="collapsed" desc="imports">
import com.mycompany.domain.Topic;
import java.util.ArrayList;
import java.util.List;
import javax.ejb.embeddable.EJBContainer;
import junit.framework.Assert;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import static org.junit.Assert.*;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
//</editor-fold>

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:test-context.xml"})
public class TopicFacadeTest {

//<editor-fold defaultstate="collapsed" desc="attributes">
@Autowired()
private TopicFacade topicFacade;
private Topic topic0;
private Topic topic1;
private Topic topic2;
private Topic topic3;
private Topic topic4;
private Topic topic5;
private Topic topic6;
private Topic topic7;
private Topic topic8;
private Topic topic9;
private List<Topic> topics;
//</editor-fold>

public TopicFacadeTest() {
}

//<editor-fold defaultstate="collapsed" desc="testCycle">
@BeforeClass
public static void setUpClass() {
}

@AfterClass
public static void tearDownClass() {
}

@Before
public void setUp() {
    topic0 = new Topic("tema0", "t");
    topic1 = new Topic("tema1", "t");
    topic2 = new Topic("tema2", "t");
    topic3 = new Topic("tema3", "t");
    topic4 = new Topic("tema4", "t");
    topic5 = new Topic("tema5", "t");
    topic6 = new Topic("tema6", "t");
    topic7 = new Topic("tema7", "t");
    topic8 = new Topic("tema8", "d");
    topic9 = new Topic("tema9", "k");

    topicFacade.create(topic0);
    topicFacade.create(topic1);
    topicFacade.create(topic2);
    topicFacade.create(topic3);
    topicFacade.create(topic4);
    topicFacade.create(topic5);
    topicFacade.create(topic6);
    topicFacade.create(topic7);
    topicFacade.create(topic8);
    topicFacade.create(topic9);

    topics = new ArrayList();
    topics.add(topic0);
    topics.add(topic1);
    topics.add(topic2);
    topics.add(topic3);
    topics.add(topic4);
    topics.add(topic5);
    topics.add(topic6);
    topics.add(topic7);
    topics.add(topic8);
    topics.add(topic9);

}

@After
public void tearDown() {
    topicFacade.remove(topic0);
    topicFacade.remove(topic1);
    topicFacade.remove(topic2);
    topicFacade.remove(topic3);
    topicFacade.remove(topic4);
    topicFacade.remove(topic5);
    topicFacade.remove(topic6);
    topicFacade.remove(topic7);
    topicFacade.remove(topic8);
    topicFacade.remove(topic9);

    topic0 = null;
    topic1 = null;
    topic2 = null;
    topic3 = null;
    topic4 = null;
    topic5 = null;
    topic6 = null;
    topic7 = null;
    topic8 = null;
    topic9 = null;

    topics = null;
}
//</editor-fold>

/**
 * Test of create method, of class TopicFacade.
 */
@org.junit.Test
public void testCreate() throws Exception {
    System.out.println("create");
    Topic topic = new Topic();
    topic.setName("tema99");
    topic.setIdChar("t");
    topicFacade.create(topic);
    assertTrue(true);
    topicFacade.remove(topic);
}

/**
 * Test of edit method, of class TopicFacade.
 */
@org.junit.Test
public void testEdit() throws Exception {
    System.out.println("edit");
    topic1.setIdChar("vf");
    topicFacade.edit(topic1);
    assertTrue(true);
    assertEquals("vf", topicFacade.find(topic1.getId()).getIdChar());
}

/**
 * Test of remove method, of class TopicFacade.
 */
@org.junit.Test
public void testRemove() throws Exception {
    System.out.println("remove");
    topicFacade.remove(topic0);
    assertEquals(null, topicFacade.find(topic0.getId()));
}

/**
 * Test of find method, of class TopicFacade.
 */
@org.junit.Test
public void testFind() throws Exception {
    System.out.println("find");
    assertEquals(topic0, topicFacade.find(topic0.getId()));
    assertNotSame(topic0, topicFacade.find(topic1.getId()));
    assertEquals(null, topicFacade.find(null));
    assertEquals(null, topicFacade.find(-747474));
}

/**
 * Test of findAll method, of class TopicFacade.
 */
@org.junit.Test
public void testFindAll() throws Exception {
    System.out.println("findAll");
    List<Topic> topicsFindAll = topicFacade.findAll();
    assertNotNull(topicsFindAll);
    assertEquals(10, topicsFindAll.size());
}

/**
 * Test of findRange method, of class TopicFacade.
 */
@org.junit.Test
public void testFindRange() throws Exception {
    System.out.println("findRange");
    int[] range = {4, 10};
    List<Topic> topics = topicFacade.findRange(range);
    for (Topic topic : topics) {
        System.out.println(topic);
    }

}

/**
 * Test of count method, of class TopicFacade.
 */
@org.junit.Test
public void testCount() throws Exception {
    System.out.println("count");
    assertEquals(10, topicFacade.count());
    tearDown();
    assertEquals(0, topicFacade.count());
}

/**
 * Test of findByName method, of class TopicFacade.
 */
@Test
public void testFindByName() throws Exception {
    System.out.println("findByName");
    assertEquals(topic0, topicFacade.findByName("tema0"));
    assertNotSame(topic0, topicFacade.findByName("tema1"));
    assertNotSame(null, topicFacade.findByName("tema0"));
    assertEquals(null, topicFacade.findByName("jafasdg"));
}

/**
 * Test of findByIdChar method, of class TopicFacade.
 */
@Test
public void testFindByIdChar() throws Exception {
    System.out.println("findByIdChar");
    List<Topic> topicsByIdChar = topicFacade.findByIdChar("t");
    assertEquals(8, topicsByIdChar.size());
    for (Topic topic : topicsByIdChar) {
        System.out.println(String.format("%s-%s", topic.getId(), topic.getIdChar()));
    }
    tearDown();
    topicsByIdChar = null;
    topicsByIdChar = topicFacade.findByIdChar("t");
    assertTrue(true);
}
} 
```

**已编辑：可能的解决方案 | datasource（连接池），添加依赖**

**测试上下文.xml**

```
<bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username"  value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean> 
```

**pom.xml**

```
 <dependency>
        <groupId>org.apache.tomcat</groupId> 
        <artifactId>tomcat-jdbc</artifactId>
        <version>7.0.39</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T19:34:51.257

首先，替换`DriverManagerDataSource`为实际汇集连接的数据源。此数据源仅委托给驱动程序管理器以打开/关闭每个事务的连接

# android - 将值从一个活动中的 Spinner/EditText 传递到另一个活动

> ID：16199878
> 
> 赞同：0
> 
> 时间：2013-04-24T18:49:02.597
> 
> 标签：android, android-intent, android-edittext, android-spinner

当我将值直接从字符串传递到另一个活动时，它可以工作。但是，如果我从 EditText 和 Spinner 检索相同的值并单击按钮（启动新活动），应用程序将崩溃。

有了这个我的应用程序工作：

```
 String key;
    String para;
    Button btnViewProducts;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_screen);
        //StrictMode.enableDefaults();

        // Buttons
        btnViewProducts = (Button) findViewById(R.id.btnViewProducts);
        key = "kq";
        para = "Taxi_No";

        // View products click event
        btnViewProducts.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // Launching All products Activity
                Intent i = new Intent(getApplicationContext(), AllProductsActivity.class);

                i.putExtra("keyval", key);
                i.putExtra("paraval",para);
                startActivity(i);
            }
        });

        // View products click event
    }
} 
```

但这不起作用：

```
 String key;
    String para;
    Spinner spin;
    EditText keyw;
    Button btnViewProducts;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_screen);
        //StrictMode.enableDefaults();

        btnViewProducts = (Button) findViewById(R.id.btnViewProducts);
        Spinner spin = (Spinner)findViewById(R.id.spinpara);
        EditText keyw = (EditText)findViewById(R.id.kser);
        key = keyw.getText().toString();
        para = spin.getSelectedItem().toString();

        // View products click event
        btnViewProducts.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // Launching All products Activity
                Intent i = new Intent(getApplicationContext(), AllProductsActivity.class);
                i.putExtras(b);
                i.putExtra("keyval", key);
                 i.putExtra("paraval",para);
                startActivity(i);
            }
        });

        // View products click event
    }
} 
```

这是我的[LogCat](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)输出：

```
04-25 00:58:31.634: W/ResourceType(335): Skipping entry 0x7f040003 in package table 0 because it is not complex!
04-25 00:58:31.644: W/dalvikvm(335): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-25 00:58:31.695: E/AndroidRuntime(335): FATAL EXCEPTION: main
04-25 00:58:31.695: E/AndroidRuntime(335): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidhive/com.example.androidhive.MainScreenActivity}: android.view.InflateException: Binary XML file line #10: Error inflating class android.widget.Spinner
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.os.Looper.loop(Looper.java:123)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-25 00:58:31.695: E/AndroidRuntime(335):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 00:58:31.695: E/AndroidRuntime(335):     at java.lang.reflect.Method.invoke(Method.java:507)
04-25 00:58:31.695: E/AndroidRuntime(335):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-25 00:58:31.695: E/AndroidRuntime(335):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-25 00:58:31.695: E/AndroidRuntime(335):     at dalvik.system.NativeStart.main(Native Method)
04-25 00:58:31.695: E/AndroidRuntime(335): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class android.widget.Spinner
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
04-25 00:58:31.695: E/AndroidRuntime(335):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-25 00:58:31.695: E/AndroidRuntime(335):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.app.Activity.setContentView(Activity.java:1657)
04-25 00:58:31.695: E/AndroidRuntime(335):     at com.example.androidhive.MainScreenActivity.onCreate(MainScreenActivity.java:30)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-25 00:58:31.695: E/AndroidRuntime(335):     ... 11 more
04-25 00:58:31.695: E/AndroidRuntime(335): Caused by: java.lang.reflect.InvocationTargetException
04-25 00:58:31.695: E/AndroidRuntime(335):     at java.lang.reflect.Constructor.constructNative(Native Method)
04-25 00:58:31.695: E/AndroidRuntime(335):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
04-25 00:58:31.695: E/AndroidRuntime(335):     ... 22 more
04-25 00:58:31.695: E/AndroidRuntime(335): Caused by: java.lang.NullPointerException
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.content.res.AssetManager.getResourceTextArray(AssetManager.java:214)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.content.res.Resources.getTextArray(Resources.java:361)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.content.res.TypedArray.getTextArray(TypedArray.java:628)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.widget.AbsSpinner.<init>(AbsSpinner.java:73)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.widget.Spinner.<init>(Spinner.java:56)
04-25 00:58:31.695: E/AndroidRuntime(335):     at android.widget.Spinner.<init>(Spinner.java:52)
04-25 00:58:31.695: E/AndroidRuntime(335):     ... 25 more 
```

我必须从文本字段和微调器选择值中获取这些参数。必须对代码进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:52:42.853

阅读logcat，这里的这一行告诉我们问题所在

```
 Caused by: java.lang.NullPointerException
    04-25 00:58:31.695: E/AndroidRuntime(335):  at
    android.content.res.AssetManager.getResourceTextArray(AssetManager.java:214) 
```

告诉我们`Array`用于你的`Spinner`是`null`. 检查您使用的名称是否`Array`正确`Spinner`

另请注意，除非您确实需要`Activity Context`，否则似乎通常使用它会更好。`Application Context`你`Intent`可能是

```
Intent i = new Intent(ActivityName.this, AllProductsActivity.class); 
```

这显然不是您的问题，但需要牢记

**日志猫**

Logcat 一开始可能会很棘手，但要查找那一行，`Caused by:NullpointerException, IllegalArgument, etc...`然后在引用您的项目之后的第一行代码通常是一个不错的起点

# html - 跨度与剩余宽度的 div 对齐问题

> ID：16199880
> 
> 赞同：0
> 
> 时间：2013-04-24T18:49:08.790
> 
> 标签：html, css

我试图将跨度与 div 一起使用，以使最后一个跨度占据 div 的剩余宽度

```
<div class='data'>
    <span class='one'>dddd:</span>
    <span class='last'>ssss</span>
</div>

.data{width:100%;display:block;} 
span.one{width:30%; border:1px solid red;float: left;}
span.last{width:33%; border:1px solid red;display:inline-block;} 
```

所以你可以在这里看到

[http://jsfiddle.net/gTPjh/3/](http://jsfiddle.net/gTPjh/3/)

它不会占用所有剩余空间:)

有人可以提出解决方案吗，thnx伙计们:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:56:17.120

显示为块以填充空间：

```
.data{width:100%;display:block;border:1px solid red; overflow: hidden;} 
span.one{width:30%; border:1px solid red;float: left;}
span.last{ border:1px solid green; display: block; overflow: hidden;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:42:24.550

使用 display: table 和 table-cell 作为[http://jsfiddle.net/gTPjh/33/](http://jsfiddle.net/gTPjh/33/)显示它有效:-) （我喜欢 display:table;）

```
.data{ width:100%; display:table; border:1px solid red;} 
span.one{ width:30%; display:table-cell; border:1px solid red;}
span.last{ width:70%; display:table-cell; border:1px solid red;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:00:42.907

您还可以使用更现代的方式与 css3 `box-sizing: border-box;`（[工作小提琴。](http://jsfiddle.net/gTPjh/29/)）。

```
.data{width:100%;display:block;border:1px solid red;} 
span {box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;}
span.one{width:30%; border:1px solid red;float: left; }
span.last{width:70%; border:1px solid red; display:inline-block;} 
```

这包括计算 30% 和 70% 宽度时的边界。[但是请查看caniuse](http://caniuse.com/#feat=css3-boxsizing)上当前的浏览器支持。

例如，为了让它在 IE7 中工作，可以[使用 css 表达式来模拟行为](http://www.maratz.com/blog/archives/2012/08/01/emulate-box-sizing-in-ie7/)。在仅限 IE7 的样式表中使用它，您可以像这样链接：

```
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="ie7_fix.css" />
<![endif]--> 
```

# php - 想用 AJAX 自动填充输入栏

> ID：16199886
> 
> 赞同：0
> 
> 时间：2013-04-24T18:49:24.863
> 
> 标签：php, javascript, ajax

我想使用 AJAX 自动填充一些输入栏，我有一个小问题

这是HTML：

```
<input type="text" name="url" id="url">

<input type="text" name="name" id="name">

<input type="text" name="catagory" id="catagory"> 
```

所以，当 url 被填满时，这个 javascript 就会运行

```
<script id="source" language="javascript" type="text/javascript">
$(function () {
    $('#url').bind('input', function () {
        $(this).val() // get  value
        $.ajax({
            type: 'POST',
            url: 'functions/ajax.php',
            data: {
                url: $('#url').val()
            },
            success: function (data) //on recieve of reply
            {
                $(function () {

                    $.ajax({
                        url: 'functions/ajax.php', 
                        data: "",
                        dataType: 'json', //data format      
                        success: function (data) //on recieve of reply
                        {
                            var namePHP = data[1]; 
                            var catagoryPHP = data[3];

                            $('#name').html(namePHP);
                            $('#catagory').html(catagoryPHP);

                        }
                    });
                });
            }
        });
    });
});
</script> 
```

根据控制台，我在有效击键时得到 2 个响应，我得到一个用我的数据响应的 POST，我得到一个返回 false 的 GET？

如果你想看的话，我的 ajax.php 就在这里

```
<?php
require_once ('DBconnect.php');

$url = $_REQUEST['url'];

$url = mysqli_real_escape_string($con, $url);

$query = "SELECT * FROM `inserted_posts` WHERE `search_name` = '$url'";
$result = mysql_query($query);

$array = mysql_fetch_array($result);

echo json_encode($array);
?> 
```

我得到了我需要的数据，但它没有插入到输入字段中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:50:58.230

您必须使用[`val()`](http://api.jquery.com/val/)来设置输入的内容，rg

```
$('#name').val(namePHP); 
```

此外，您没有在第二个 ajax 请求中发送任何数据

# r - 访问数组的给定维度

> ID：16199887
> 
> 赞同：0
> 
> 时间：2013-04-24T18:49:34.027
> 
> 标签：r

假设 X 是一个 D 维数组。

我想写一个有两个参数的函数：

```
foo<-function(X,d){
   ....
} 
```

其中 foo 必须在 X 的第 d^th 维上运行。例如，提取 X 的第 d^th 维的元素。

如何做到这一点（我宁愿使用数组而不是列表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:13:46.903

如果您的数组具有 D 维，则不能通过指定标量来引用单个维。相反，您需要提供一个维度向量。例如，如果您的数组是：

```
set.seet(123)
X <- array(data=rnorm(12),dim=c(2,2,3)) 
```

然后例如`X[2]`会给你一个数组的单个元素。如果你尝试`X[2,1]`，你会得到关于不正确的维数的错误。因此，获取整个维度的唯一选择是提供一个长度为 D 的向量，其中一个元素将为空，例如`X[1,1,]`。这将为您提供数组的相应维度，在这个由 3 个元素组成的特定示例中，它对应于定义。

自然，其他（指定）尺寸可以在定义的边界内变化，例如`X[1,2,]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:28:07.757

看`?apply`，这是一个简单的例子：

```
x = array(c(1:8), dim = c(2,2,2))
#, , 1
#
#     [,1] [,2]
#[1,]    1    3
#[2,]    2    4
#
#, , 2
#
#     [,1] [,2]
#[1,]    5    7
#[2,]    6    8

apply(x, 3, sum)
#[1] 10 26 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T21:17:05.073

以下是我最终解决它的方法：目标是找到一种`apply()`用 a无缝替换 a 的标准方法`lapply()`（因为后者可以很容易地并行化）。这是一个简单的例子`apply()`

```
#data
n<-10
p<-5
k<-15
x<-array(rnorm(n*p*k),dim=c(n,p,k))

fx01<-function(ll,x,d0,dm,fun1){
    dm[[d0]]<-ll
    gotfun<-get(fun1)
    gotfun(x[dm[[1]],dm[[2]],dm[[3]]])
}

#housekeeping:
d0<-3
lx<-length(dim(x))
dm<-vector("list",lx)
for(i in 1:lx) dm[[i]]<-1:dim(x)[i]

#the actual computations:
res<-lapply(1:dim(x)[d0],fx01,x=x,d0=d0,dm=dm,fun1="mean")
c(res,recursive=TRUE)
#compare with the real thing:
apply(x,d0,mean) 
```

# ruby-on-rails - 迁移失败

> ID：16199890
> 
> 赞同：0
> 
> 时间：2013-04-24T18:49:38.763
> 
> 标签：ruby-on-rails, postgresql

我在生产服务器上运行了 sevreal 迁移（添加表 Subscription，将表 Stat 重命名为 Order），但随后遇到了问题。我不知道该怎么做才能解决这个问题。这是我在rails控制台中的错误消息：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  relation "subscriptions" does not exist
LINE 5:              WHERE a.attrelid = '"subscriptions"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod),
                     pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"subscriptions"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum 
```

编辑：我已经制作了 rake db:migrate 编辑 2：[https](https://gist.github.com/anonymous/0963ec46f079699a56a0) ://gist.github.com/anonymous/0963ec46f079699a56a0（这里是我的 schema.rb） 编辑 3：我的应用程序是 Alwaysdata 上的主机，我已经重新启动它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:28:28.973

我发现解决方案不好：

```
RAILS_ENV=production rake db:migrate 
```

# r - 访问数据框列会导致 sort.list(y) 中的错误：对于“sort.list”，“x”必须是原子的

> ID：16199897
> 
> 赞同：2
> 
> 时间：2013-04-24T18:50:00.617
> 
> 标签：r, vector, indexing, dataframe

目前我正在尝试使用 knnMCN()

我正在以这种格式进行...

```
knnMCN(data, classification, data2, K=1, ShowObs=T) 
```

文件 data、classification 和 data2 都是 .csv 文件。'data' 是我的训练数据，'classification' 是分类的单列文件（分类为 0、1 或 2），data2 是我要分类的数据集。

这些文件中只有数值。每当我运行此命令时，我都会收到错误消息：

```
Error in sort.list(y) : 'x' must be atomic for 'sort.list'
Have you called 'sort' on a list? 
```

有人知道这里出了什么问题吗？有没有更好/不同的方法来做 K-Nearest Neighbors？

编辑：这些是 dput(head(data/classification/data2)) 的结果

数据：

```
structure(list(down = c(1L, 2L, 3L, 1L, 2L, 1L), yards_to_first = c(10L, 
7L, 7L, 10L, 7L, 10L), yards_to_endzone = c(84L, 81L, 81L, 73L, 
70L, 40L), score_difference = c(0L, 0L, 0L, 0L, 0L, 0L), quarter = c(1L, 
1L, 1L, 1L, 1L, 1L), seconds_remaining = c(3595L, 3560L, 3554L, 
3523L, 3476L, 3450L)), .Names = c("down", "yards_to_first", "yards_to_endzone", 
"score_difference", "quarter", "seconds_remaining"), row.names = c(NA, 
6L), class = "data.frame") 
```

分类：

```
structure(list(play_type = c(0L, 1L, 1L, 0L, 1L, 1L)), .Names = "play_type",
row.names = c(NA,6L), class = "data.frame") 
```

数据2：

```
structure(list(down = c(1L, 2L, 3L, 4L, 1L, 2L), yards_to_first = c(10L, 
5L, 8L, 8L, 10L, 10L), yards_to_endzone = c(58L, 53L, 56L, 56L, 
98L, 98L), score_difference = c(0L, 0L, 0L, 0L, 0L, 0L), quarter = c(1L, 
1L, 1L, 1L, 1L, 1L), seconds_remaining = c(3593L, 3556L, 3515L, 
3507L, 3496L, 3460L)), .Names = c("down", "yards_to_first", "yards_to_endzone", 
"score_difference", "quarter", "seconds_remaining"), row.names = c(NA, 
6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:04:20.013

将分类作为向量而不是作为具有一列的数据框传递：

```
knnMCN(data, classification$play_type, data2, K=1, ShowObs=T) 
```

说明：虽然文档`knnMCN`说分类应该是“矩阵或数据框”，但这似乎是错误的，因为函数的代码试图将分类视为向量。引发错误的行是：

```
OrigTrnG = as.factor(OrigTrnG) 
```

因为`as.factor`不能在数据框上使用。

# delphi - 编辑路径中的第一个 INI 文件

> ID：16199899
> 
> 赞同：1
> 
> 时间：2013-04-24T18:50:01.053
> 
> 标签：delphi

我的软件使用一个 DLL，它是由一个 INI 文件配置的。它获取第一个具有特定名称的名称（如果重要，则为 Bemafi32.ini），它可以在系统路径中找到。

我想在我的软件中添加编辑此文件的功能。如果我的系统有两个或多个同名文件（这是非常非常常见的），我不想弄错一个。我如何保证获得正确的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T20:35:40.420

要找到路径上的第一个 INI 文件，然后使用另一个[答案](https://stackoverflow.com/a/16200673/33732)和。DLL 更有可能使用与自身位于同一目录中的 INI 文件，而不是路径上的第一个文件。否则， DLL 的*所有*副本将使用*相同*的INI 文件，因为所有进程的路径通常相同。`FileSearch``GetEnvironmentVariable`

 **要在与 DLL 相同的目录中获取 INI 文件，您需要知道 DLL 在哪里，这可能需要知道您将加载哪个 DLL 副本。这不是最容易弄清楚的事情，因此您可以将负担转移到操作系统：

1.  自己加载 DLL `LoadLibrary`。操作系统将使用其正常的搜索算法来查找 DLL。
2.  调用`GetModuleFileName`以找出您加载的 DLL 的路径。
3.  打开与 DLL 位于同一目录中的 INI 文件。

（如果您的程序已经加载了 DLL，因为它*使用*了 DLL，那么您可以调用`GetModuleHandle`而不是`LoadLibrary`.）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T19:34:20.630

> @user539484，我想你的评论可能是一个更好的答案......

没问题，我可以将其作为**答案**，但只有当您真正确定您的 DLL 的行为与您在问题中描述的完全一样时，这才是一个**解决方案。**请记住，[DLL 搜索策略](http://msdn.microsoft.com/library/windows/desktop/ms682586)比仅在`PATH`.

```
var
  IniPathName: TFileName;
begin
  IniPathName := FileSearch('Bemafi32.ini', GetEnvironmentVariable('PATH')); { do not localize }
  Assert(IniPathName <> '', 'Unable to locate file');
  { ... } 
```

### 参考：

*   [`GetEnvironmentVariable`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.GetEnvironmentVariable)
*   [`FileSearch`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.FileSearch)**

# math - 数据的 3D 到 nD 表示

> ID：16199901
> 
> 赞同：0
> 
> 时间：2013-04-24T18:50:04.243
> 
> 标签：math

如果我有三个信号（例如数据向量与时间），我可以轻松绘制 3D 图，结果表面可以帮助我以一个表示形式查看整个数据之间的关系。我的问题是如何将其扩展到 n 维？我在考虑 n 维欧几里得空间或类似超曲面的东西，但我不确定哪个概念可以提供更好的帮助。我最终想要的是可以为我提供相对行为的数据表示。如果我能收到提示，它会很有帮助。（我正在处理的数据来自某种算法，输入是 10x2000 矩阵，输出也是 10x2000 数据。如果您需要，我可以提供数据）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:59:05.357

执行此操作的标准方法是使用多图。基本上，您分别绘制每对变量，然后将它们呈现在网格中。

[使用开源工具进行数据分析](https://rads.stackoverflow.com/amzn/click/com/0596802358)这本书很好地概述了这种和其他可视化技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T16:23:15.340

如果信号彼此完全不相关，最好的方法是在 2D 图中相互叠加，因为它们之间不共享任何信息。

如果它们以某种方式相关，您可以使用主[成分分析](https://en.wikipedia.org/wiki/Principal_component_analysis)将问题的维度从 nD 减少到 3D 甚至更少。它通常用于可视化数据集。该链接给出了 wiki 过于复杂的定义，但[Matlab](http://www.mathworks.com/help/stats/princomp.html)可以为您计算。

# firebase - 试图让 Firebase 从 Plunker 工作

> ID：16199906
> 
> 赞同：0
> 
> 时间：2013-04-24T18:50:21.130
> 
> 标签：firebase, plunker

我已将[plnkr.co](http://plnkr.co)添加到我的 Firebase 有权从其接收查询的域列表中，但我从 Plunker 向 Firebase 读取或写入数据的努力没有成功。是否存在阻止 Plunker 与 Firebase 交互的安全原因？

# asp.net - 在asp.net中通过文件号从文件夹中获取文件

> ID：16199910
> 
> 赞同：1
> 
> 时间：2013-04-24T18:50:37.633
> 
> 标签：asp.net, vb.net, file

我想根据其编号从文件夹中获取特定文件。例如，我想要 c: 驱动器中 ASP 文件夹中的第 3 个文件，或者我想要同一文件夹中的第 10 个文件，那么我如何使用 VB.NET 获得它？

我已经尝试了以下代码，但我不知道具体的文件。

```
Dim Files() As String
Files = IO.Directory.GetFiles("C:\VB") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:15:56.580

!st 从目录中获取所有文件并将其存储在一个数组中。之后，使用 FileInfo 类通过传递所需的文件号来获取特定文件。

```
Dim arr As String() = System.IO.Directory.GetFiles("C:\VB")
Dim file As New FileInfo(arr(5)) 
```

# html - eclipse 语法高亮以区分普通和前缀 HTML/导入的 JSP 标记库

> ID：16199911
> 
> 赞同：1
> 
> 时间：2013-04-24T18:50:40.153
> 
> 标签：html, eclipse, jsp, syntax-highlighting, jsp-tags

无论如何通过标记库在 Eclipse 中突出显示 JSP 中的语法？假设我们有这样的事情：

```
 <%@ taglib uri="/path/to/a" prefix="a"%>
    <%@ taglib uri="/path/to/b" prefix="b"%>
    <a:tag>
       <p>Some text</p>
       <b:anotherTag>
          <p>More text!</p>
       </b:anotherTag>
    </a:tag> 
```

每个 JSP 标记的复杂性要高得多，而且我正在处理一个大型的现有代码库，该代码库具有 1k+ 行 JSP 和多层嵌套，我希望能够轻松地看到 HTML 标记之间的差异可能输出与正在使用的各种不同的标签库。

到目前为止，我发现的 eclipse、eclipse web 平台和所有其他 eclipse 插件编辑器中的默认行为是所有标签都以相同的方式突出显示。我正在寻找至少标准的非前缀标签以与前缀标签不同的颜色突出显示的东西。有了这个，我可以很容易地看到可能来自 JSP 的 HTML 标记。

在上面的示例中（引用 SO 的突出显示），最好看到带有前缀的 JSP 标记，`<a:tag>`并且`<b:tag>`是绿色的，而没有前缀的标记，`<p>`是正常的语法突出显示颜色（红色）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:21:56.453

在 Web 工具平台上，只要我在 JSP Syntax Coloring 首选项页面上为标记名称设置不同的颜色，并且实际上为前缀设置了 taglib 指令，这些自定义标记的颜色就会不同。

# c++ - 人工模板

> ID：16199918
> 
> 赞同：4
> 
> 时间：2013-04-24T18:51:03.963
> 
> 标签：c++, templates

所以，我有以下问题一直困扰着我一段时间。

*着色器*绘制顶点*组*。因为它是从文本文件加载到 GPU 中的，所以 OpenGL*根本不需要输入它*。

```
struct Shader
{
    // Load that shader from filename
    Shader( string filename ... ) ;
} ; 
```

在我的代码中**输入**了一组顶点

```
VertexArray<VertexPTC> ptcVerts ; // PTC is position, texcoord, color. 
```

一个数组`ptcVerts` **只能**由 a 绘制`ptcShader`。`pcVerts`尝试使用 a绘制数组`ptShader`是错误的（因为颜色值将被解释为 texcoords）。

所以我希望编译器标记出这种错误。就是这样：

```
template<typename T> struct Shader 
```

现在着色器，*虽然它从不使用，但它是`T`在*编译时输入的。编译器现在强制执行 a`VertexArray<VertexPTC>`由 a 绘制的限制`Shader<VertexPTC>`。

这是***好事还是坏事***？着色*器不需要或使用`T`*，所以我担心我对模板的使用在某种程度上是一种滥用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T20:48:17.753

**这是一种误用**。模板的使用不是*免费*的，当您模板化一个您愿意处理的类时会增加一些困难，因为在那里*使用模板的优势*。

很久以后，当我需要一种通用的方法来处理 a 时，我遇到了麻烦`Shader`——我需要一种方法来禁用 last bound `Shader`，它是什么类型并不重要。

我必须人为地考虑派生的子类，或者只是从 Shader 类中`Shader<T>`删除模板参数。`T`

但实际上我找到了一种更好的方法来做到这一点。只需正常定义您的类：

```
struct Shader
{
  // complete, untemplatized definition.  If it doesn't use T
  // internally, THEN DO NOT INTRODUCE ARTIFICIAL DEPENDENCE ON T!
} ; 
```

但后来我定义：

```
template <typename T> struct TShader : public Shader { } ; 
```

所以现在，*当您希望*编译器强制执行类型时，请使用第二个`TShader<T>`定义。如果您不需要编译器强制类型，请使用功能齐全的基类`Shader`定义。

这为您提供了两全其美的体验。您始终可以在需要时将 a`TShader<T>`视为其未模板化的基类，而不会丢失功能或在不需要时编写抽象接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:02:13.893

您在代码中表达了现实世界的约束。你在这里的例子实际上并没有表明在这里给你买任何东西，所以继续证据我想知道表达它是否是多余的，或者与实际出现的任何情况无关。但是，如果您要为不同类型的顶点数据集使用不同类型的着色器，我会说您在这里找到了完全正确的表达方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:28:42.950

如果您希望编译器防止您做错事，一种方法是这样做：

```
class ShaderPTC
{
public:
   ShaderPTC( string filename, <other params> );
   void Draw( VertexArray<VertexPTC>& Vertices );
   ~ShaderPTC();
private:
   Shader m_shader;
} 
```

和

```
class ShaderPC
{
public:
   ShaderPC( string filename, <other params> );
   void Draw( VertexArray<VertexPC>& Vertices );
   ~ShaderPC();
private:
   Shader m_shader;
} 
```

您确保构造函数在内部创建适当的着色器并通过指针/引用传递此类的对象，这样您就不必关心复制包装的着色器（您可能也希望将复制构造函数/赋值设为私有） .

由于该`Draw`函数只接受正确类型的顶点数组并且内部着色器未公开，因此您不能传递错误的参数。

如果您必须在构造函数中编写的代码和`Draw`函数是通用的，您可以将其设为模板类。否则，无论如何您都必须专门化模板，从而使模板方法没有真正的好处。

虽然正确命名变量*可能会*防止此类问题，但正确*键入*变量将更难破解。

# java - 对于通用外部类，为什么我需要将嵌套类声明为静态？

> ID：16199919
> 
> 赞同：7
> 
> 时间：2013-04-24T18:51:05.977
> 
> 标签：java, generics, nested-class

我正在尝试使用链接为哈希表编写数据结构。当我从嵌套类中删除关键字“static”时，出现“无法创建SeparateChaining.Node 的通用数组”的错误消息？在我使用 new 为 hmap 分配内存的行上。

使用 static 关键字它可以正常工作。有人可以指出关键字 static 在这里的意义以及它产生的区别吗？我正在创建一个对象数组，那么它如何在错误（Eclipse）中显示通用数组？

```
public class SeparateChaining<Key,Value> {

    private int m;

    private Node[] hmap;

    private int n;

    public SeparateChaining()
    {
        m=5;
        n=0;

        //error here on removal of static keyword from the node  class declaration
                hmap=new Node[m];

    }

    private ____ class Node //works fine with static. Otherwise shows error
    {
        private Object key;
        private Object value;
        private Node next;

        public Node(Object k, Object v)
        {

            key=k;
            value=v;
        }

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:58:51.253

如果将内部`Node`类声明为`static`，则该类与外部类相关联`SeparateChaining`。`Node`那么其实就是`SeparateChaining.Node`。

如果没有`static`，它将与 的实例相关联，该实例`SeparateChaining`需要几个类型参数，因此内部`Node`类也需要这些类型参数。`Node`那么实际上是`SeparateChaining<Key, Value>.Node`；在 Java 中，[创建泛型数组](http://www.cs.washington.edu/education/courses/cse332/10sp/otherNotes/genericArrays.html)是不合法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:58:02.393

好吧，它是通用的。如果内部类不是静态的，那么类型是`SeparateChaining<Key,Value>.Node`. 当您添加静态时，它会被视为普通类

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T19:00:55.153

嵌套类声明中的keyowrd`static`的意思是“我不想引用外部类的对象，非常感谢”。如果你不放`static`，那么内部类的任何对象都会引用外部类的某个对象。

因此，只能在外部类对象的非静态方法内部创建内部非静态类的对象。

# .net - 作为用户控件或窗口的视图

> ID：16199921
> 
> 赞同：1
> 
> 时间：2013-04-24T18:51:13.493
> 
> 标签：.net, wpf, mvvm, caliburn.micro

我对此很陌生，因此可能是个白痴。也就是说，我希望我的视图是 UC 还是 Windows？我猜这取决于我的使用场景，也许......

我有一个主视图，上面有用于不同操作的“按钮”，例如 CreateThis 或 ModifyThat。当用户单击这些“按钮”之一时，我想在对话框类型场景中显示适当的视图。这*看起来*像是一个窗口，但我不确定[窗口管理器](http://www.mindscapehq.com/blog/index.php/2012/03/13/caliburn-micro-part-5-the-window-manager/)是如何影响这一点的。

此外，当我进行 Winforms 开发时，我将所有“视图”UC 都嵌入到一个可重用的窗口中，以便它们更加灵活，这适用吗？

有人指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:14:12.923

我假设 WPF 因为你提到`Window`而不是`ChildWindow`，但通常你想创建`UserControls`.

`WindowManager`根据您是否调用自动确保您的内容显示在适当的容器中`ShowPopup`，`ShowDialog`或者`ShowNotification`使它们成为 UC 使事情变得更加灵活（实际上`WindowManager`为 WPF 应用程序设置了初始窗口，为您的引导程序开始的任何 ViewModel 解析视图并确保在视图还不是窗口的情况下创建一个窗口）

至于复合视图，您需要做的就是将您的子视图模型作为复合容器的属性（即另一个将托管它们的视图模型）并使用 a`ContentControl`和 CMs 约定绑定它们

例如，将显示 2 个 UC 的 VM 可能如下所示：

```
public class SomeCompositeViewModel : Screen
{
    public SomeOtherViewModel SomeOtherView { get; set; } // You probably want INPC here as per usual
    public YetAnotherViewModel YetAnotherView { get; set; } 

    public SomeCompositeViewModel()
    {
         // Setup as you need - direct instantiation, IoC/DI, use MEF, whatever works for you
         SomeOtherView = new SomeOtherViewModel();
         YetAnotherView = new YetAnotherViewModel();

    }
} 
```

和 XAML

```
<UserControl x:Class="SomeAssembly.Yadda.Yadda.SomeComposititeViewModel">
    <StackPanel>
        <!-- Bind to SomeOtherViewModel via the SomeOtherView property etc -->
        <ContentControl x:Name="SomeOtherView" /> 
        <ContentControl x:Name="YetAnotherView" />
    </StackPanel>
</UserControl> 
```

（布局更有创意，不是吗！）

如果您希望所有项目都具有生命周期，则可以使用`Conductor<T>.Collection.AllActive`，但听起来更像是在寻找复合视图，而不是工具窗口

# c# - DataGridView唯一单元格值c#

> ID：16199922
> 
> 赞同：0
> 
> 时间：2013-04-24T18:51:14.180
> 
> 标签：c#, datagridview

我在保持datagridview中单元格的值唯一时遇到了一点问题......让我解释一下：所以，我的数据库表包含2个属性，ownerID（主键）和ownerName......

假设我的数据库中有 3 个条目：

```
 1 A
    2 B
    3 C 
```

当我在 datagridview 中删除 B 并更新 DB 时，我剩下：

```
 1 A
    3 C 
```

当我尝试添加新所有者时，假设它是 D，我希望他的 ID 为 4，因为它是主键，但我得到的是：

```
 1 A
    3 C
    3 D 
```

所以，我显然需要保持我的 ownerID 唯一。我正在使用这行代码来完成这项工作，但它产生了上面的结果：

```
 private void bindingNavigatorAddNewItem_Click(object sender, EventArgs e)
    {
            dataGridViewOwner.CurrentRow.SetValues(dataGridViewOwner.RowCount);
    } 
```

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:49:11.280

```
private void bindingNavigatorAddNewItem_Click(object sender, EventArgs e)
    {
            int max=0;
            for(int i=0;i<dataGridViewOwner.Rows.Count;i++)
              if(dataGridViewOwner.Rows[i].Cells[0].Value!=null && dataGridViewOwner.Rows[i].Cells[0].Value!=DBNull.Value )
              {
                  try
                   {
                         int pre= int.Parse(dataGridViewOwner.Rows[i].Cells[0].Value.ToString());
                        if(pre>max)
                              max=pre;
                   }
                  catch
                 {
                   }
              }//if
             max++;
            dataGridViewOwner.CurrentRow.Cells[0].Value=max;//if assume crrent row is target new row
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:15:09.800

要保持 datagridview 中单元格的值唯一，您应该在数据库中设置唯一值。为此： 1.ownerID 应该是数据库中的 IDENTITY 您可以在表设计器或脚本中设置它来创建表：

CREATE TABLE [dbo].[YorTableName] ([ownerID] [int] IDENTITY(1,1) NOT NULL,

```
[ownerName] [varchar](50) NULL 
```

) 开 [主要]

1.  插入语句：插入 YorTableName (ownerName) Values (@ownerName) 选择 @@Identity 您只插入 ownername ，数据库为 ownerID 创建唯一值并将其插入行中 Select @@Identity 检索此唯一值

3.使用从数据库返回的值更新datagridviewer中的字段ownerID

# python - 文件处理：如何取出标点和大写字母？

> ID：16199924
> 
> 赞同：1
> 
> 时间：2013-04-24T18:51:21.893
> 
> 标签：python, string, file, python-3.x

我试图弄清楚如何打开文件，将文件中的所有字母变成小写，然后取出所有标点符号。我已经尝试了一些我在网上和我的书中看到的东西，但我似乎无法弄清楚。

```
import string

def ReadFile(Filename):
    try:
        F = open(Filename)
        F2=F.read()
    except IOError:
        print("Can't open file:",Filename)
        return []
    F3=[]
    for word in F2:
        F3=F2.lower()
    exclude = set(string.punctuation)
    F3= ''.join(ch for ch in F3 if ch not in exclude)
    return F3

Name = input ('Name of file? ')
Words = ReadFile(Name)
print (F3) 
```

给定一个句子，例如，

```
Then he said, "I'm so confused!". 
```

成为

```
then he said im so confused 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:59:32.523

您的代码的问题在于最后一行：

```
print (F3) 
```

`F3`是函数内部的局部变量的名称。你不能从这里访问它。

但是您可以访问该变量中的相同*值*，因为函数返回了它，并且您将它存储在`Words`.

所以，只需这样做：

```
print(Words) 
```

现在，您的代码可以工作了。

* * *

话虽如此，它可以改进。

最重要的是，看看这部分：

```
F3=[]
for word in F2:
    F3=F2.lower() 
```

`for word in F2:`实际上循环遍历 中的每个字符*，*因为`F2`这就是字符串的工作方式。如果你想逐字逐句，你需要做类似的事情`for word in F2.split():`

同时，在循环内部，您`F3`每次都通过循环重新分配，并且永远不会对以前的值做任何事情，所以整个事情最终成为一种非常奇特（而且很慢）的方式来完成最后一次分配。

幸运的是，最后一个赋值`F3=F2.lower()`将整个 string 小写`F2`，这正是您想要做的，所以无论如何它都可以解决。这意味着您可以将所有这三行替换为：

```
F3=F2.lower() 
```

* * *

您还应该始终关闭您打开的文件。由于这可能很棘手（例如，在您的函数中，您必须记住在成功和错误的情况下都关闭它），最好的方法是自动使用`with`子句。替换这两行：

```
F = open(Filename)
F2=F.read() 
```

和：

```
with open(Filename) as F:
    F2=F.read() 
```

* * *

在那之后，除了使用非 PEP-8 样式，如果你有大文件会出现性能问题，你的代码真的没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:11:19.063

关于这个话题有很多讨论，一个简单有效的方法是：

```
s="Then he said, \"I\'m so confused!\"." 
s.translate(string.maketrans("",""), string.punctuation) 
```

类似的讨论可以在这里找到：

[从 Unicode 格式的字符串中删除标点符号](https://stackoverflow.com/questions/11066400/remove-punctation-from-unicode-formatted-strings/11066687#11066687)

[Python正则表达式标点识别](https://stackoverflow.com/questions/9195599/python-regex-punctuation-recognition)

[从 Python 中的字符串中去除标点符号的最佳方法](https://stackoverflow.com/questions/265960/best-way-to-strip-punctuation-from-a-string-in-python)

# formatting - 格式化 Infragistics UltraWinGrid 中的单元格值

> ID：16199927
> 
> 赞同：2
> 
> 时间：2013-04-24T18:51:29.627
> 
> 标签：formatting, infragistics, ultrawingrid

我有一个绑定到数据源的 Infragistics UltraWinGrid，并且该数据源中的一列包含布尔值。我`Style`将列的属性设置为，`Edit`以便它显示文本而不是复选框。但是，我不想显示值`True`or `False`，而是希望它显示`Yes`or `No`。

如何格式化单元格的值以显示布尔值是或否？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T21:01:24.797

您可以定义一个 ValueList 并设置该列的 ValueList 属性

```
private void ultraGrid1_InitializeLayout(object sender, InitializeLayoutEventArgs e)
{
    ValueList vl=new ValueList();
    vl.ValueListItems.Add(true, "Yes");
    vl.ValueListItems.Add(false, "No");
    e.Layout.Bands[0].Columns["ColumnBoolean"].ValueList=vl;
} 
```

# asp.net - ASP.NET + SQL Server 用户管理——最佳实践？

> ID：16199928
> 
> 赞同：0
> 
> 时间：2013-04-24T18:51:32.140
> 
> 标签：asp.net, .net, sql, sql-server-2008

我想知道如何在 ASP.NET WebForms 应用程序和 SQL Server 2008 中处理用户组织的主题。

*   创建 SQL Server 内置登录名/用户

或者

*   创建一个用户名/用户并使用它连接到数据库。使用密码（salt）保存在表中的用户数据。

第二个选项是一个好的选择吗？如果属实，请用你的知识支持我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:03:03.137

对于 ASP.NET 应用程序，您应该选择第二个选项。

您**肯定**需要一个配备相当长的盐的强大哈希算法，以确保您的密码安全。

就算法而言，您应该看一下[Bcrypt之类的东西，它在](http://en.wikipedia.org/wiki/Bcrypt)[Security](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage) StackExchange上享有很高的声誉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:04:17.050

听起来表单身份验证可以极大地帮助您：

[http://support.microsoft.com/kb/301240](http://support.microsoft.com/kb/301240)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T20:46:26.467

我会使用第二个选项，我不喜欢内置登录系统。在我的一个旧项目中，有记住我的系统，现在它不起作用，我无法弄清楚为什么它不起作用。

做自己的登录系统总是更好。

# c# - 如何获取 TextBlock 的 TextTrimming 的位置

> ID：16199933
> 
> 赞同：0
> 
> 时间：2013-04-24T18:51:40.577
> 
> 标签：c#, xaml, windows-8

如果我有一长串文本，其中字体大小和系列是可调整的，并且它在 TextBlock 的窗口中被修剪了几行，我如何获得点或 IndexOf 或字符串被截断的任何点？

我想一种说法是，就像一篇跨越两页的文章，我想获取第一页末尾的索引，这样我就可以知道文章中的下一个单词从第二页开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:03:29.957

您可以通过迭代调用来搜索截止点`GetPositionFromCharIndex`。

# c# - IList和数据表之间的Linq语句

> ID：16199941
> 
> 赞同：0
> 
> 时间：2013-04-24T18:52:22.467
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有一个 IList，它是通过 linq 从一个表中查询到实体后得到的。通过其他方式，我也得到了一个数据表，它代表数据库中的一个表。两个表都有相同的列。我想搜索那些在 IList 中可用但在数据表中不可用的 EmployeeID。任何人请建议 ica 如何通过使用 linq 语句来做到这一点。我在网上搜索并发现了许多条款，但我仍然很困惑如何做到这一点。

例如，我在帖子上找到了这段代码

```
from c in db.Customers
where !db.Products.Any(p => p.ProductID == c.ProductID)
select c; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:10:30.537

假设这些：

```
DataTable dt; //your datatable

var results = from c in db.Customers
              where !db.Products.Any(p => p.ProductID == c.ProductID)
              select c; 
```

然后你可以这样做：

```
var ids = results
    .Where(r => !dt.Rows.AsEnumerable
        .Any(d => d.ItemArray["EmployeeID"] == r.EmployeeID)
    .Select(r => r.EmployeeID); 
```

# java - Android客户端/服务器套接字客户端未接收

> ID：16199942
> 
> 赞同：1
> 
> 时间：2013-04-24T18:52:27.047
> 
> 标签：java, android, sockets, client-server

我已经很长时间了，我遇到的问题很简单，我无法将数据从服务器打印到客户端，其他一切都在正常工作，只是当服务器向客户端发送消息时，它永远不会获取或打印电话任何见解或帮助都会很棒，而且我没有错误

客户

```
 package com.example.handy;

    import java.io.BufferedReader;
    import java.io.DataInputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.io.PrintWriter;
    import java.net.InetAddress;
    import java.net.InetSocketAddress;
    import java.net.ServerSocket;
    import java.net.Socket;
    import java.io.OutputStream;
    import java.net.UnknownHostException;
    import java.util.Date;
    import java.util.Scanner;

    import android.R.integer;
    import android.app.Activity;
    import android.content.ContentResolver;
    import android.database.Cursor;
    import android.net.Uri;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.os.StrictMode;
    import android.provider.ContactsContract;
    import android.text.format.DateFormat;
    import android.util.Log;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.Toast;

    public class MainActivity extends Activity
    {

        private EditText ipaddress;
        private Button connect;
        private Button wipe;
        private static String myIp;

        @Override
        protected void onCreate(Bundle savedInstanceState)
        {
            StrictMode.ThreadPolicy policy = new StrictMode.
            ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy); 

            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            ipaddress = (EditText) findViewById(R.id.ipaddress_felid);

            connect = (Button) findViewById(R.id.connect);
            wipe =(Button) findViewById(R.id.wipe);

            //Button press event listener
            connect.setOnClickListener(new View.OnClickListener()
            {
                public void onClick(View v)
                 {
                     setMyIp(ipaddress.getText().toString());
                    // myComs.sending_data(getMyIp() , "Got connected");
                    try
                     {
                        new Incomingdata().execute();
                        InetAddress inet = InetAddress.getByName(getMyIp());
                        Socket s = new Socket(inet, 2000);
                        OutputStream o = s.getOutputStream();
                        PrintWriter p = new PrintWriter(o);

                         p.println("You are connected");
                         p.flush();

                         readContacts();
                         readSms();

                     }

                     catch (UnknownHostException e) 
                     {
                        ipaddress.setText("Unknown host");
                           e.printStackTrace();
                     }
                    catch (IOException e)
                    {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                 }

             });
            wipe.setOnClickListener(new View.OnClickListener()
            {
                public void onClick(View v)
                 {
                    String kill = "5";
                     myComs.sending_data(MainActivity.getMyIp(), kill);
                     finish();

                 }
                 });
        }
    public class Incomingdata extends AsyncTask<Void,Void,Void>
    {
        @Override
        protected Void doInBackground(Void... params) 
        {
            try
            {   System.out.println("Test123");
                ServerSocket serverSocket = new ServerSocket(2000);
                Socket s = serverSocket.accept();
                System.out.println("Test1234");
                InputStream in = s.getInputStream();
                Scanner r = new Scanner(in);
                System.out.println("Test1235");
                while(s.isConnected())
                {
                    String input =r.nextLine();
                    System.out.println("Client"+input);
                }
                in.close();
            }
            catch (UnknownHostException e) 
            {
                ipaddress.setText("Unknown host");
                   e.printStackTrace();
            }
            catch (IOException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

} 
```

服务器

```
 package handy_server.simple_gui;

import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

//imports for server
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;
import java.net.UnknownHostException;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author Pandaboy
 */
class ServerGUI extends JFrame implements ActionListener
{
    private Socket connection;
    private InetAddress ip;
    private JTextField t1 = new JTextField(null);
    private JTextField t2 = new JTextField(null);
    private JTextField t3 = new JTextField(null);
    private JButton b2 = new JButton("Send");
    private JButton b1 = new JButton("Working");

    private JPanel p1 = new JPanel();
    private ServerSocket listeningSocket;
    private int port= 0;
    private ArrayList<Contact> myContacts = new ArrayList<Contact>();

      //-------------------------serverGui------------------------------------------------------------
    public ServerGUI(int port){
        this.port = port;
        init();

    }
    public  void init()
    {

        Container content = getContentPane();
        content.setLayout(new FlowLayout());
        Font f = new Font("TimesRoman", Font.BOLD, 20);
        p1.setLayout(new GridLayout(2, 2));
        content.add(p1);
        p1.add(t1);
        p1.add(b1);
        p1.add(t2);
        p1.add(t3);
        p1.add(b2);
        b1.addActionListener(this);
         b2.addActionListener(this);
        setSize(210, 300);
        setVisible(true);
        System.out.println("Just about to start the server...");
        startServer();
    }

    public void actionPerformed(ActionEvent e)
    {
        Object target = e.getSource();
        if (target == b1)
        {

            t1.setText("Button working");
            MyHelpers.buildConversations(this, myContacts);
        }

        if(target == b2)
        {
              t1.setText("button working2");
            String number = t2.getText();
            int phone_length = number.length();
            if (phone_length <= 20)
            {
                for(int a=1; a <=(20 - phone_length); a++ )
            {
                    number += " ";
            }
            }
            String msg = t3.getText();
            String text = "7"+number+msg;
            System.out.print(""+text);
             OutputStream o = null;
            try
            {
                o = connection.getOutputStream();
            }
            catch (IOException ex)
            {
                Logger.getLogger(ServerGUI.class.getName()).log(Level.SEVERE, null, ex);
            }
            PrintWriter p = new PrintWriter(o);
            p.println(text);
            p.flush();
            System.out.print("text sent"+text);

        }
    }
     //-----------------------------------------------------------------------------------------------------
    //------------------------------startServer------------------------------------------------------------
    private void startServer() 
    {
        SwingWorker <Void, String> runningServer = new SwingWorker<Void, String>(){
            protected Void doInBackground() 
            {
                System.out.println("in startserver...");
                try 
                {
                    listeningSocket = new ServerSocket(port);
                    try
                    {
                        ip = InetAddress.getLocalHost();
                        System.out.println("Please enter this in your phone " + ip.getHostAddress());

                    }
                    catch (UnknownHostException e)
                    {
                        e.printStackTrace();
                    }
                    while (true)
                    {
                        System.out.println("Waiting for connection");
                        connection = listeningSocket.accept();

                        InputStream in = connection.getInputStream();
                        Scanner r = new Scanner(in);
                        OutputStream o = connection.getOutputStream();
                        PrintWriter p = new PrintWriter(o);

                        String message = r.nextLine();
                        System.out.println("" + message);
                        t1.setText(message);

                        // get the message type
                        // 0 sms 1 contact 2 incoming call 
                        System.out.println(message);
                        if(message.startsWith("0"))
                        {
                            System.out.println(message);
                            String type = message.substring(1,2);
                            int theType = Integer.parseInt( type );
                            String number = message.substring(7, 21).trim();
                            String theText = message.substring(21);
                            String theName = MyHelpers.getName(number, myContacts);
                            System.out.println("Number = "+number);
                            System.out.println("Sender = "+theName);
                            System.out.println("Text = "+theText);
                            Contact cRef = MyHelpers.getContactReference(number, myContacts);
                            if (cRef != null)
                            {
                                cRef.addsms(theType, theName, theText);
                            }
                        }    

                        if(message.startsWith("1"))
                        {
                           System.out.println(message);
                          String name = message.substring(1, 31).trim();
                          String pnumber = message.substring(31, 51).trim();
                          String email = message.substring(51, 91).trim();

                          myContacts.add(new Contact(name, pnumber, email));
                          System.out.println( name + pnumber + email);  
                        }

                        if(message.startsWith("2"))
                        {
                           String unkown = message.substring(0, 1).trim();

                           String number = message.substring(1, 14).trim();
                           String theName = MyHelpers.getName(number, myContacts);
                           System.out.println(""+unkown+""+theName+" Is calling you");
                        }
                        if(message.startsWith("5"))
                        {
                            System.exit(0);
                        } 
```

任何帮助都会很棒，我对此感到困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T04:53:37.567

在您的服务器中将 '\n' 附加到响应的末尾，因此请更改此

```
 PrintWriter p = new PrintWriter(o);
            p.println(text);
            p.flush();
            System.out.print("text sent"+text); 
```

对此：

```
 PrintWriter p = new PrintWriter(o);
            p.println(text + "\n");
            p.flush();
            System.out.print("text sent"+text); 
```

我认为它挂起的原因是因为 readLine() 正在寻找 '\n' 并且它从未收到它

```
while(s.isConnected())
{
    String input =r.nextLine();
    System.out.println("Client"+input);
} 
```

# android - Android：AsyncTask 在 onCreate 中表现怪异

> ID：16199943
> 
> 赞同：0
> 
> 时间：2013-04-24T18:52:28.440
> 
> 标签：android, android-asynctask

我`onCreate()`以两种不同的方式执行几乎相同的代码（除了 return 语句）：

*   一次在线程中（有效）
*   一次在 AsyncTask 中

不知何故，甚至无法调试 AsyncTask 中引发的异常...您知道为什么此代码在 AsyncTask 中不起作用以及为什么我无法调试 de Exception 吗？（它不作为变量存在）

```
public class TrainingProgressActivity extends ActivityTemplate {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_training_progress);        

        // the not working AsyncTask variant
        new ProgressGetterTask().execute("");

        // the working Thread variant
        new Thread(new Runnable() {
        public void run() {
            try {
                RestTemplate restTemplate = RestTemplateFactory.createRestTemplate();
                FeatureSetCollectionProgress i = restTemplate.postForObject(URLHelper.BASE_PATH+"training/progress", getDevice(), FeatureSetCollectionProgress.class);
                System.out.println(i.getMobilityProgress().get(0).getTransportationMeanType().toString());
            } catch(Exception e) {
                System.out.println("ex");
                e.printStackTrace();
            }
        }}).start();
    }

    /**
     * ProgressGetterTask. (not working ???)
     */
    private class ProgressGetterTask extends AsyncTask<String, FeatureSetCollectionProgress, FeatureSetCollectionProgress> {

        protected FeatureSetCollectionProgress doInBackground(String... urls) {
            try {
                RestTemplate restTemplate = RestTemplateFactory.createRestTemplate();
                return restTemplate.postForObject(URLHelper.BASE_PATH+"training/progress", getDevice(), FeatureSetCollectionProgress.class);
            } catch(Exception e) {
                e.printStackTrace();
                return null; // setting breakpoint here, 'e' cannot be resolved to a variable.
            }
        }

        protected void onPostExecute(FeatureSetCollectionProgress featureSetCollectionProgress) {
            if(featureSetCollectionProgress!=null) {

            } else {

            }
        }
    }
} 
```

# android - 两个 ListViews，1 个活动 - 并拉动刷新？

> ID：16199944
> 
> 赞同：0
> 
> 时间：2013-04-24T18:52:29.093
> 
> 标签：android, listview, android-arrayadapter, pull-to-refresh

我不知道该怎么做。这是我的要求`Activity`：

1.  标题
2.  `ListView`共 10 项
3.  标题
4.  `ListsView`共 10 项

`ListViews`它们来自两个不同的数据源，可能有两种不同的行布局。所以我想我需要制作两个自定义`adapter`类（两个`getView()'s`等）。

这是踢球者，我希望能够拉动刷新整个列表并同时更新`ListViews`. 如果这太多了，我会用一个刷新按钮来解决（谷歌似乎更喜欢这个按钮）；目前我使用`com.handmark.pulltorefresh.library.PullToRefreshListView`

这可能吗？如果是这样，完成这项工作的最佳步骤是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:05:50.850

MergeAdapter 将帮助您将任意数量的标头和适配器合并为一个。所以基本上在你的活动中只需要一个 ListView 并且这个 ListView 应该使用一个带有两个标题和两个自定义适配器的合并适配器。

[合并适配器](https://github.com/commonsguy/cwac-merge)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:10:45.153

很有可能。方法可以是一个**ScrollView 和一个 LinearLayout child(vertical orientation)**。现在两个 ListView 作为线性布局的子视图。正如您已经说过的，您将需要两个适配器（具有不同的行布局）。每个列表都可以有自己的标题视图。

对于 PulltoRefresh 功能， **[您可以查看 pulltorefresh library](https://github.com/chrisbanes/Android-PullToRefresh)** 这允许您将任何 View 设置为 pull to refresh。正如我上面解释的，你需要 ScrollView 作为根视图，所以你需要使用上面库中的**PullToRefreshScrollView**。

# django - Django 对象不可迭代

> ID：16199945
> 
> 赞同：0
> 
> 时间：2013-04-24T18:52:30.453
> 
> 标签：django, django-templates

我有一个我试图在我的模板中迭代的对象。

我的问题是其中一个字段**响应**包含**json**数据，我收到此错误消息

**交易'对象不可迭代**

```
{% for item in transaction %}
    {{ item.notjson_fields}}

    {% for jsonItem in item.response %} 

       {{jsonItem}}

    {% endfor %}

{% endfor %} 
```

**模型：**

```
 date_created = models.DateTimeField(auto_now_add=True)
 request = JSONField()
 response = JSONField() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:22:07.670

您正在尝试迭代`Transaction`不可迭代的对象。

尝试类似的东西

```
{{ transaction.notjson_fields}}

{% for jsonItem in transaction.response %} 
    {{ jsonItem }}
{% endfor %} 
```

我无法确定，但不知道是什么`Transaction`样子

* * *

编辑：

由于 response 是 JSONField，因此您可以像 dict 一样访问它。做就是了

```
{{ transaction.response.amount }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:48:31.523

如果像 Ngenator 所说的那样，您的字段不是 JSON 对象而是字符串，您可能需要先加载它。首先注册一个新的模板标签

```
 from django import template
    register = template.Library()
    import json

    @register.filter
    def load_json(value):
        return json.loads(value) 
```

然后获取（仅）模板中的金额

```
 {% with transaction.response|load_json as jsondict %}
    {% for k, v in jsondict.items %}
        {% if k == "amount" %}
            <td>{{ v }}</td>
        {% endif %}   
    {% endfor %}
    {% endwith %} 
```

祝你好运。

# haskell - Haskell“解析”没有终止特定类型的字符串

> ID：16199946
> 
> 赞同：1
> 
> 时间：2013-04-24T18:52:31.927
> 
> 标签：haskell, xml-parsing

```
parse' :: Parser a -> String -> [(a,String)]
parse' p inp = p `with` inp

parse :: Parser a -> String -> [a]
parse p inp = [ v | (v,[]) <- parse' p inp ]

mkMany1 :: (Parser a -> Parser [a]) -> Parser a -> Parser [a]
mkMany1 many p = do x <- p
                    xs <- many p
                    return (x:xs)

many1L :: Parser a -> Parser [a]
many1L = mkMany1 manyL

manyL :: Parser a -> Parser [a]
manyL p = (many1L p) ||| (success []) 
```

我正在尝试为许多不包含字符或(空格) 的子字符串解析字符串`'<'`，但我的解析器似乎没有终止。有人可以给我一些关于我缺少什么的指示吗？`'>'``' '`

```
textValid :: Char -> Bool
textValid c =  c /= '<' && c /= '>' && not (isSpace c)      

text :: Parser String 
text = manyL (sat textValid) 
```

当我尝试运行以下命令时，它永远不会终止。

```
parse (manyL text) "abc def <" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T19:23:18.470

问题是`manyL parser`可以在不消耗输入的情况下成功（返回一个空列表）。

并且一个人不能通过一个解析器，它可以在不消耗输入作为参数的情况下成功`manyL`，因为在这种情况下，你得到的正是你所处的无限循环。

在第一次`text`使用`"abc"`输入的前缀后，您会得到`" def <"`一个`String`以空格开头的开头。所以尝试`text`这样做，它会消耗`textValid`与开头一样多的字符`String`- 即 0 - 并返回它们 - `[]`。这留下了相同的输入。现在`manyL text`尝试`text`另一次，看看是否也成功......

您可能应该定义

```
text = many1L (sat textValid) 
```

所以如果`text`不消耗输入就不会成功，并且每次成功解析后从剩余输入的开头消耗空格可能是个好主意，比如

```
text = do
    result <- many1L (sat textValid)
    skipSpaces
    return result 
```

（`skipSpaces`留待实施）。

# c++ - C++ qsort 问题

> ID：16199948
> 
> 赞同：0
> 
> 时间：2013-04-24T18:52:42.113
> 
> 标签：c++

我写了以下内容来尝试使用 qsort() 函数。我的目标是输入几行文本并打印每个单词的字母列表。每次我运行这段代码时它都会崩溃，我不确定为什么或如何修复它。我还需要添加一些东西来计算单词出现的次数并打印出来，但我不太确定该怎么做。任何建议都会非常有帮助。谢谢！

```
#include <algorithm>
#include <iostream>
#include <string>
using namespace std;

struct to_lower 
{
  int operator() ( int ch )
  {
    return tolower ( ch );
  }
};

int compare (const void * a, const void * b)
{ 
  //return ( *(int*)a - *(int*)b );
  return (strcmp(*(const char **)a, *(const char **)b));
}

int main()
{
  string list[900];
  int nLength;
  int i=0, q=0;
  string nTemp; 
  int word[900];

  cout
      << "Enter some lines of text  "
      << "(Enter Ctrl-Z on a line by itself to exit)\n"
      << endl;

  while ( !cin.eof() )
  {
    cin >> list[i];

    transform(list[i].begin(), list[i].end(), list[i].begin(), to_lower());
    word[q]=1;  

    if (list[i]==list[i-1])
    {
      word[q]=+1;
    }
    i++;
  }

  nLength = i;

  cout << "The sorted words would be:\n";

  qsort(list, nLength, sizeof list[0],&compare);

  int n;
  for (n = 0; n < nLength; n++) 
  {
    cout <<" \n"<< n << list[n]<< word[n];  
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:59:35.667

`std::string`不是`char*`您的 qsort compare 函数所假装的。此外，您永远不应该将 qsort 与 C++ 对象一起使用。qsort 不了解对象，不会调用复制构造函数，可能会损坏内部结构。

当 i=0 时，使用 list[i-1] 是一个错误。

您需要在排序*后*计算重复的单词，否则您无法保证重复的单词彼此相邻。

# macos - NSTableViewHeaderView 没有在 NSScroller 上绘制

> ID：16199951
> 
> 赞同：2
> 
> 时间：2013-04-24T18:52:48.407
> 
> 标签：macos, nsscroller, nstableheaderview

我有一个自定义 NSTableHeaderView 自定义 NSTableHeaderCell 对象绘制自定义标题。我遇到的问题是当 NSScroller 条出现时，滚动条上方绘制的标题是默认的，而不是我的自定义绘图。

![在此处输入图像描述](https://i.stack.imgur.com/q4KNN.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:29:00.823

原来控制这个部分的视图（在滚动条上，标题的右侧）被称为cornerView，并且 NSTableView 有一个 -setCornerView:(NSView *)view 方法来设置它。我通过子类化 NSView 并使用自定义绘图将角图像绘制到视图中来解决我的问题，然后使用前面提到的方法设置该子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-19T09:51:58.490

**Mac Mojave 左角视图**

最近，当我在 Mac Mojave 上为我的一个应用程序提供支持时，我发现了表格视图左上角视图背后的罪魁祸首。如果我们将像下面这样从 xib 设置角视图，也可以将其删除。

**如果 Automatically Hide Scroller 属性设置为 YES 并且未设置角视图，则会出现此问题**

[![补丁显示在表格视图的左上角](https://i.stack.imgur.com/Ifwfe.png)](https://i.stack.imgur.com/Ifwfe.png)

**解决方案：**

[![设置角视图属性](https://i.stack.imgur.com/Ze2Nt.png)](https://i.stack.imgur.com/Ze2Nt.png)

# applescript - 如何测试是否输入了命令行参数？

> ID：16199954
> 
> 赞同：3
> 
> 时间：2013-04-24T18:52:50.440
> 
> 标签：applescript

对于我的脚本，我从命令行上的用户输入获取参数，并且我想确保用户不会忘记输入参数。所以基本上，我想让我的脚本做这样的事情：

```
on run argv
    if (item 1 of argv exists) then
        return "defined"
    else
        return "undefined"
    end if
end run 
```

现在说（argv 的第 1 项存在）的部分不起作用，但我希望有人能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T19:13:01.607

```
on run argv
    if (count of argv) > 0 then
        return "defined"
    else
        return "undefined"
    end if
end run 
```

# statistics - 如何在 SPSS 中对我的数据执行混合模型分析？

> ID：16199955
> 
> 赞同：4
> 
> 时间：2013-04-24T18:52:54.533
> 
> 标签：statistics, regression, spss, mixed-models

在我的论文中，我试图发现哪些因素会影响公司的 CSR（企业社会责任`GSE_RAW`）行为。已经确定了两组可能的因素/变量：特定于公司的和特定于国家的。

首先，公司特定的变量是（除其他外）

*   `MKT_AVG_LN`: 公司市值
*   `SIGN`：公司签署的CSR条约数量
*   `INCID`：公司参与的社会责任事件报告数量

其次，数据集中的 4,000 家公司中的每一家都将总部设在 35 个国家之一。对于每个国家，我收集了一些特定国家的数据，其中包括：

*   `LAW_FAM`: 国家法律体系的法律家族（法语、英语、斯堪的纳维亚语或德语）
*   `LAW_SR`：国家公司法对股东的相对保护（例如，在公司违约的情况下）
*   `LAW_LE`：国家法律体系的相对有效性（价值越高意味着越有效，例如腐败越少）
*   `COM_CLA`: 衡量内部市场竞争的强度
*   `GCI_505`: 初等教育质量测量
*   `GCI_701`: 衡量中等教育质量
*   `HOF_PDI`：权力距离（更高的价值意味着更多的等级社会）
*   `HOF_LTO`: 国家时间方向（越高意味着更长期的方向）
*   `DEP_AVG`: 各国人均国内生产总值
*   `CON_AVG`: 各国在 2008-2010 年期间的平均通货膨胀率

为了对这个数据进行分析，我把国家层面的数据“提升”到了公司层面。例如，如果比利时的`COM_CLA`值为 23，则数据集中的所有比利时公司的`COM_CLA`值都设置为 23。该变量`LAW_FAM`分为 4 个虚拟变量（`LAW_FRA`、`LAW_SCA`、`LAW_ENG`、`LAW_GER`），每个公司的其中一个虚拟变量为 1 .

这一切都会产生这样的数据集：

```
COMPANY MKT_AVG_LN .. INCID .. LAW_FRA LAW_SCA .. LAW_SR LAW_LE COM_CLA .. etc
------------------------------------------------------------------------------
   1      1.54         55          0       1          34     65     53
   2      1.44         16          0       1          34     65     53
   3      0.11          2          0       1          34     65     53
   4      0.38         12          1       0          18     40     27
   5      1.98        114          1       0          18     40     27
   .       .            .          .       .           .      .      .
   .       .            .          .       .           .      .      .
 4,000    0.87          9          0       1           5     14     18 
```

在这里，公司 1 到 3 来自同一个国家 A，而公司 4 和 5 来自 B 国。

首先，我尝试使用 OLS 进行分析，但模型似乎非常“不稳定”，如下图所示。第一个模型的 r 平方为 0.516：

![OLS 1](https://i.stack.imgur.com/9l9iB.png)

仅添加两个变量会改变许多 beta 和显着性水平，以及 r 平方 (.591)。当然，当添加变量时，r 平方会增加，但这与 0.516 相比增加了很多：

![OLS 2](https://i.stack.imgur.com/3jy4O.png)

最终，在[另一篇文章](https://stats.stackexchange.com/questions/56891/why-do-coefficients-and-significance-levels-change-so-much-in-my-ols-do-i-need)中建议我不应该在这里使用 OLS，而是使用混合模型，因为分类计数级别的数据。但是，我对如何在 SPSS 中执行此操作感到困惑。我在网上找到的示例与我的无法比较，所以我不知道在下面的混合模型对话中要填写什么：

![SPSS 混合模型 SPSS 对话](https://i.stack.imgur.com/dnjjI.png)

有人可以使用 SPSS 请帮我解释如何执行此分析，以便我可以得出回归模型 (CSR = b1*MKT_AVG_LN + b2*SIGN + ... + b13*CON_AVG) 以便我可以得出结论是否确定了 CSR通过公司特征或国家特征（或两者都不是或两者）？

我相信我必须将公司级变量作为协变量插入，将国家级变量作为因素插入。这个对吗？其次，我不确定如何处理`LAW_SCA`虚拟`LAW_ENG`变量。

任何帮助是极大的赞赏！

# mongodb - 在 MVC Ajax 应用中搜索 MongoDB 内容的建议

> ID：16199956
> 
> 赞同：0
> 
> 时间：2013-04-24T18:52:56.687
> 
> 标签：mongodb, mongodb-.net-driver

我们的数据库存储相册和照片。每张专辑都有标题、标签、描述。每张照片都有标题、标签和描述。

我想要的只是用户在搜索框中输入一个词后立即显示 5 个搜索结果的能力。

然后每页显示 50 个搜索结果，依此类推。

1.  我应该索引哪些字段 - 仅标题或标签（嵌入数组）或两者兼而有之？
2.  使用什么来获得最佳搜索体验 - 已归档的 MongoDB 索引或其他类型的索引？解决方案必须随着数据的增长而扩展。

如果有人可以帮助我提供一些有关如何进行的指示，那就太好了。

我仍在使用旧版本的 MongoDB 1.8

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T00:51:31.580

如果您只需要根据上一条评论搜索标题，那么您可以简单地使用 $regex 运算符：

[http://docs.mongodb.org/manual/reference/operator/regex/#op._S_regex](http://docs.mongodb.org/manual/reference/operator/regex/#op._S_regex)

如果您锚定正则表达式（即/^something/），那么它甚至会使用您的索引，这将非常快。

不过，它在大型数据库上的性能不会很棒。

否则，正如 WiredPrairie 建议的那样，请查看关键字搜索：

[http://docs.mongodb.org/manual/tutorial/model-data-for-keyword-search/](http://docs.mongodb.org/manual/tutorial/model-data-for-keyword-search/)

# css - 带有 ID 的测试变量标题 - selenium ide

> ID：16199961
> 
> 赞同：1
> 
> 时间：2013-04-24T18:53:13.303
> 
> 标签：css, unit-testing, testing, xpath, selenium

使用 selenium IDE 我测试我的网站

在某些页面中，我有一个带有可变 ID 的链接

例如：（[http://yourorder.com/135046](http://yourorder.com/135046)）

每次用户单击此链接站点时，他都会处理页码（135046），所以这个数字总是在变化（变量）

所以我不能用

```
<tr>
    <td>click</td>
    <td>link=yourorder.com/135046</td>
</tr> 
```

我可以做什么 ？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:37:49.800

**在SELENIUM IDE**中选择目标还有各种其他选项。

选择目标值的顺序如下：

1.  **ID**

2.  **姓名**

3.  **关联**

4.  **DOM**

5.  **CSS**

6.  **路径**

**XPATH**的结构是`//html tag[@property='value']`

所以你可以试试这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T21:46:32.030

您通过此 xpath 定位元素：

```
"//td[contains(text(), 'link=yourorder.com')]" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T15:11:05.850

```
click > //html/body/div[6]/div[3]/div/div/div/table/tbody/tr/td[2]/a 
```

谢谢大家

# php - PHP 表单验证

> ID：16199965
> 
> 赞同：0
> 
> 时间：2013-04-24T18:53:16.980
> 
> 标签：php, html

我正在制作一个表单来提交数据，但问题是错误没有回显。如果所有字段都输入正确，则表单成功提交数据，但当没有数据时，不会返回错误输出。我把这个回声语句放在标题下面

这是表格...

```
<label for="Name"> Names:</label>
                  <input type="text" name="Name" maxlength="25" size="24"  class="input"/>

<label for="Email">Email Address:</label>

                              <input type="text" name="Email" maxlength="30" size="24"  class="input"/>

<label for="Subject">Subject:</label><br/>
                              <input type="text" name="Subject" maxlength="25" size="25"  class="input"/>

<label for="Comments">Comments</label><br/>
                              <textarea rows="6"   cols="50" name="Ujumbe"size="140" class="textarea"></textarea>
  <input type="submit" value="Send Mail" name="submit" /> 
```

这是验证码...

```
<?php
     if(isset($_POST['submit'])){ $error= array();

                   if(empty($_POST['Name'])) {  $error[]='Your  name ';  }
                     else if (!empty ($_POST['Name'])){ $Name=mysql_real_escape_string(htmlentities($_POST['Name']));  }

                   if(empty($_POST['Email']))    {$error[]='Your  email address. ';  }

                      else if(preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/",$_POST['Email'])){
                           $Email = mysql_real_escape_string($_POST['Email']);
                          }
                           else {
                                 $error[]='That you entered e-mail address is invalid.';
                                }

                  if(empty($_POST['Comments'])){   $error[]='Enter a comment ';    }
                                         else if (!empty ($_POST['Comments']))
                                        {
                                         $Comments=mysql_real_escape_string(htmlentities($_POST['Comments']));  
                                        }

                  if(empty($_POST['Subject'])){   $error[]='Enter the subject ';    }
                                                   else if (!empty ($_POST['Comments'])){ $Subject=mysql_real_escape_string(htmlentities($_POST['Subject']));  }

      if (empty ($error)){

                header("messages.php?x=3");

                         }
       else{
             $error_message ='<br/><br/><span class="error"><br />You did not submit the following required information!<br/><br/>' ;
             foreach($error as $key => $values) {
                       $error_message.= "<br/>$values<br/>";
                }
                    $error_message.="</span> <br/><br/><br/>";
                            }}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:11:01.063

将代码的最后一部分更改为如下所示：

```
if (empty ($error)){
        header("messages.php?x=3");
    } else {
        $error_message ='<br/><br/><span class="error"><br />You did not submit the following required information!<br/><br/>' ;
        foreach($error as $key => $values) {
            $error_message.= "<br/>$values<br/>";
        }

        $error_message.="</span> <br/><br/><br/>";

        echo 'Please see the below error Messages: <br>' . $error_message;
    } 
```

此外，您可以简单地创建一个无序列表，见下​​文，并使用它来分隔列表项，而不是在您的代码中添加无数`<br>`既*丑陋*又*不必要的代码。*`margins`

```
 if (empty ($error)){
            header("messages.php?x=3");
        } else {
            $error_message ='<span class="error">You did not submit the following required information!</span>
<ul id="error-list">
' ;
            foreach($error as $key => $values) {
                $error_message.= "<li>$values</li>";
            }

            $error_message.="</ul>";

            echo 'Please see the below error Messages: <br>' . $error_message;
        } 
```

CSS：

```
.error{
    margin: 15px 0 10px 0;
}

#error-list li{
    margin-top: 10px;
} 
```

# actionscript - 提供的 DisplayObject 必须是调用者的子对象

> ID：16199966
> 
> 赞同：0
> 
> 时间：2013-04-24T18:53:18.267
> 
> 标签：actionscript, removechild

是的，我知道这个问题一直被问到，但我的经验不足使我无法找到答案。如果单击按钮，我只是想从屏幕上删除一个对象-

```
 public function but1click(evtObj:MouseEvent)
    {
        trace("button one clicked");
        if (gracestate == "grace")
        {
            removeChild(grace);
        trace("grace removed");
                }
    } 
```

我跟踪了对象的父对象（grace），它返回为空。这让我发疯，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:19:07.357

问题尚不清楚，尽管最可能的问题似乎是您正在将一个值存储到正在被垃圾收集/删除的优雅中。

如果您在函数内部创建了一个变量，但在函数外部不存在对该变量的引用，它将被 GC 处理。基本上任何没有被其他东西引用的东西都会被删除，唯一不适用的对象是时间线。这可以防止 Flash 播放器滞后并避免 RAM 变满时出现错误。因此：

```
 function createGrace () {
      var grace = new Object();
      addChild(grace);
    }
    trace (grace); // returns null

    var grace:Object;
    function createGrace () {
      grace = new Object();
      addChild(grace);
    }
    trace (grace); // returns [Object] 
```

# php - PHP登录功能不起作用

> ID：16199967
> 
> 赞同：0
> 
> 时间：2013-04-24T18:53:19.360
> 
> 标签：php, login, passwords, validation

我有一个登录系统，用户必须登录才能访问主网站。但是，验证不起作用。

主要是`password`功能不正常。任何建议为什么？

```
<?php

session_start();

$login = mysql_real_escape_string($_POST['login']);
$password = mysql_real_escape_string($_POST['password']);

if ($login&&$password)
{

$connect = mysql_connect("localhost", "root", "") or die("Couldn't connect");
mysql_select_db("a&e") or die("Couldn't find db");

$query = mysql_query("SELECT * FROM users WHERE login='$login'");

$numrows = mysql_num_rows($query);

if ($numrows==!0)
{
//code to login

while ($row = mysql_fetch_assoc($query))
{
    $dbusername = $row['login'];
    $dbpassword = $row['password'];
}

//check to see if they match
if($login==$dbusername&&$password==$password)
{
$_SESSION['login']=$username;
$_SESSION['password']=$password;
     sleep(5);
    header('Location: nindex.php');
    die(); 
}
else
die ("incorrect password");

}
else
    die("That user does not exist");
}
else
    die("please provide a  username and password");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:07:51.903

你的代码有问题，试试这个

```
<?php

session_start();

$login = mysql_real_escape_string($_POST['login']);
$password = mysql_real_escape_string($_POST['password']);

if ($login&&$password)
{

$connect = mysql_connect("localhost", "root", "") or die("Couldn't connect");
mysql_select_db("a&e") or die("Couldn't find db");

$query = mysql_query("SELECT * FROM users WHERE login='".$login."' AND password='".$password."'");

$numrows = mysql_num_rows($query);

    if ($numrows > 0)
    {
    //code to login
        header('Location: nindex.php');
        die(); 
    }
    else
    {
    echo "incorrect username or password";
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:04:39.813

我注意到了 4 件事。

1）当您检查它们是否匹配时，您将 $password 与 $password 而不是“$dbpassword”进行比较

2) 你为什么叫“sleep(5)”？

3）您需要在存储到数据库之前对密码进行加密，因为如果您的网站被黑客入侵，您的用户密码最终将落入坏人之手。

4）你不应该在会话变量中存储密码（出于安全原因）

# c# - 程序运行时 C# 程序的初始形式不可用

> ID：16199968
> 
> 赞同：2
> 
> 时间：2013-04-24T18:53:26.587
> 
> 标签：c#

我在让程序中的主表单按我想要的方式运行时遇到问题。我正在使用 C#。在我最初的主窗体 (Form1) 上，我有一个运行长程序的命令按钮。在程序的中间，我希望用户能够返回到初始表单并单击一些新的复选框，这些复选框我将从 C# 程序中放置在初始表单上。下面的代码只是冻结了初始表单。我不需要让下面的代码完全工作。我只需要它来允许我访问使用命令按钮启动的程序中间的主要初始表单。

为此，我有一个调用计时器的无限 while 循环。这是正确的方法吗？我不需要下面的程序来工作。我只需要能够在程序中间访问那个初始表单。由于它不起作用，似乎它不是这样做的方法，但正确的方法是什么？

下面的代码运行下面的 OnTimedEvent 函数（方法）。该函数用于建立消息框，但我将其注释掉。我不需要该功能才能工作。它仅用于测试目的。我的目标是我需要初始主表单，以便在从命令按钮运行时输入更多信息。下面的函数运行了大约 15 次，我得到了错误

> 引发了“System.OutOfMemoryException”类型的异常。

上线`aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent)`；

代码如下：

```
System.Timers.Timer aTimer;
// Create a timer with a one second interval.
aTimer = new System.Timers.Timer(100);

while (true)
{
    // Hook up the event handler for the Elapsed event.
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

    // Only raise the event the first time Interval elapses.
    aTimer.AutoReset = false;
    aTimer.Enabled = true;  // uncommented this now
    //addded  below
    aTimer.Start();
} 
```

我已经尝试过几种不同的方式，但主窗体总是冻结。我只是希望能够在主窗体 ( `Form1`) 上选择事物（例如复选框），因此可能不需要下面的代码。上面的计时器调用`OnTimedEvent`下面的计时器。

```
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
  // MessageBox.Show("Hello World");
} 
```

在网络上的许多地方（包括stackoverflow），我应该使用计时器来使主要的初始表单可用，但上面的代码只会导致表单被冻结，并且我在表单顶部获得了栏表示它没有响应。我使用的是 Windows XP 和 Visual Studio 2008。如上所述，我使用的是 C#。

总而言之，上面的代码是在命令按钮运行后获取主初始表单的正确方法吗？如果是，我做错了什么？如果这不是正确的方法，那是什么？

[顺便说一句，我在这里](https://stackoverflow.com/questions/14589943/reading-and-writing-from-a-serial-port-in-c-sharp-part-2)问了一个关于这个项目的完全不相关的问题

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:54:39.637

您应该简单地删除 while 循环

```
 System.Timers.Timer aTimer;
    // Create a timer with a one second interval.
    aTimer = new System.Timers.Timer(1000);
    // Hook up the event handler for the Elapsed event.
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

    // Only raise the event the first time Interval elapses.
    aTimer.AutoReset = false;
    aTimer.Enabled = true;  // uncommented this now
    //addded  below
    aTimer.Start(); 
```

当你启动它时，定时器在一个单独的线程上运行。您的 while 循环只是一遍又一遍地启动计时器。

[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:56:44.890

> 为此，我有一个调用计时器的无限 while 循环。这是正确的方法吗？

不会。while 循环会阻塞 UI 线程，从而使程序冻结。没有理由有`while`循环，因为您已经使用计时器来触发事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T18:57:48.763

如果没有看到完整的、实际的代码，很难说，但是在不锁定 UI 的情况下执行长时间运行的进程的传统方法是使用 C# 中的线程。

您可以在自己的线程中执行长时间运行的操作，以免锁定 UI 线程吗？

这是一个教程： http: [//msdn.microsoft.com/en-us/library/aa645740 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645740(v=vs.71).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T18:59:40.560

不要使用while循环。如果你想`OnTimedEvent`每秒运行一次你的方法，使用类似这样的东西：

```
Timer myTimer = new Timer();
myTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
myTimer.Interval = 1000; // 1000 ms is one second
myTimer.Enabled = true;
myTimer.Start(); 
```

# yii - Mailchimp API 和 YII 框架

> ID：16199970
> 
> 赞同：2
> 
> 时间：2013-04-24T18:53:32.557
> 
> 标签：yii, mailchimp, yii-extensions, yii-components

有没有人使用带有 YII 框架的 Mailchimp api？是否有一个有据可查的扩展？我找到了一个扩展，但它没有文档[https://github.com/jamesmoey/Yii-MailChimp](https://github.com/jamesmoey/Yii-MailChimp)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:01:08.060

mailchimp有一个有据可查的[php api](http://apidocs.mailchimp.com/api/downloads/#php)，不需要 yii 扩展。只需包含`MCAPI.class.php`并使用您的 api 密钥创建一个 MCAPI 对象。您将拥有所有可用的功能，例如`listSubscribe($id, $email_address)`等。

**编辑**

您所指的扩展是官方包装器的简单包装器。您将有相同的方法可用。

# autohotkey - 发送命令，AutoHotkey 是不是有问题？

> ID：16199971
> 
> 赞同：1
> 
> 时间：2013-04-24T18:53:33.887
> 
> 标签：autohotkey

所以我有这个游戏，叫AirMech。它还不能将鼠标按钮识别为控件，所以我尝试使用 AutoHotkey 来规避它，直到它被实现。

```
#IfWinActive, AirMech
  XButton1::Send c 
```

没用。所以我尝试了`SendGame`，`SendPlay`其他一切，也没有工作。我用谷歌搜索了一下，发现有些游戏根本无法识别任何发送命令。

在放弃之前，我只是尝试了一个简单的映射：

```
#IfWinActive, AirMech
  XButton1::c 
```

它确实奏效了。

是否预期没有发送命令有效，但后者有效？如果我想触发其他操作（例如，'c' 加上一个 MsgBox）怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:58:06.983

AutoHotkey 能够以各种不同的方式（SendRaw / SendInput / SendPlay / SendEvent）发送击键。我不太确定简单**键**::**键**映射使用什么方法，但它必须是其中之一。我的猜测是 SendRaw、SendInput、SendPlay 或 SendEvent 之一的工作方式与**key** :: **key**相同。

此外，#IfWinActive 有时不能完全按照您的预期工作，尤其是在全屏游戏中。所以我通常在没有#IfWinActive 的情况下测试我的 AHK 脚本，以确保它们正常工作。一旦它工作，我介绍条件。

* * *

**更新**

从[http://www.autohotkey.com/docs/misc/Remap.htm](http://www.autohotkey.com/docs/misc/Remap.htm)：

> 启动脚本时，每个重新映射都会转换为一对热键。例如，包含**a::b**的脚本实际上包含以下两个热键：

```
*a::
SetKeyDelay -1   ; If the destination key is a mouse button, SetMouseDelay is used instead.
Send {Blind}{b DownTemp}  ; DownTemp is like Down except that other Send commands in the script won't assume "b" should stay down during their Send.
return

*a up::
SetKeyDelay -1  ; See note below for why press-duration is not specified with either of these SetKeyDelays. If the destination key is a mouse button, SetMouseDelay is used instead.
Send {Blind}{b Up}
return 
```

* * *

我的笔记：

我怀疑原因`a::b`是有效的，但`a::Send b`不是因为 a::b 如何将 button down 和 button up 处理程序分解为两个单独的映射。游戏的游戏循环可能会轮询游戏键的“keydown”状态，如果 AHK 正在合成重复，则不会始终保持这种状态。重新映射 a_down->b_down 和 a_up->b_up 可能会使 AHK 更准确地模拟按住键的行为，这对于以特定方式测试键状态的程序（GetAsyncKeyState？）可能很重要。

映射中的星号表示“即使按下了额外的修饰符，也要触发热键”。

# php - 为什么 PHP 有两个不同的版本更新？

> ID：16199972
> 
> 赞同：1
> 
> 时间：2013-04-24T18:53:34.393
> 
> 标签：php, release-management

据我从[changelog](http://php.net/ChangeLog-5.php)中可以看出，有两个不同的主要版本。5.4 和 5.3。有什么不同 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:28:44.313

您的答案是，与 5.3 相比，PHP5.4 为共享托管环境添加了重大更改，包括：

*   safe_mode 离开（连同它的所有朋友）
*   magic_quotes 消失（并且由于许多遗留代码依赖它来清理，因此将其删除是一个坏主意）
*   *调用时PBref*已被删除（这会导致遗留代码出现大量警告）
*   register_globals 被扔掉了。这完全破坏了一些遗留代码。

因此，出于这个原因，目前，他们同时保持 PHP5.4 和 PHP5.3 都是最新的。不过，这是第一次以这种方式发生。您可以在此处找到重大更改的完整列表：http: [//php.net/manual/en/migration54.incompatible.php](http://php.net/manual/en/migration54.incompatible.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:00:14.320

有许多主要版本，而不仅仅是两个。包括 5.0、5.1、...以及 5.3 和 5.4。

您引用的变更日志正是查找任何版本的特定详细信息的正确位置。

您还可以在 Google 上搜索“PHP 5.4 版本”或“PHP 5.3 版本”以获取简短摘要。例如：

*   [http://php.net/releases/5_4_0.php](http://php.net/releases/5_4_0.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T22:40:39.353

目前，PHP 分支 5.3.* 和 5.4.* 正在稳定开发中，PHP 5.5.* 即将推出。通常 PHP.net 并行支持两个稳定版本，因此您可以更快地从一个版本转到另一个版本。

[https://wiki.php.net/rfc/releaseprocess](https://wiki.php.net/rfc/releaseprocess)

# ruby-on-rails - 无法从 Michael Hartl 教程中获取这个简单的代码

> ID：16199973
> 
> 赞同：0
> 
> 时间：2013-04-24T18:53:50.463
> 
> 标签：ruby-on-rails, ruby, html, railstutorial.org

所以我对 Rails 很陌生，我正在学习本教程并遇到以下问题。

所以我已经像这样设置了我的视图/helpers/application_helper.rb：

```
module ApplicationHelper
# Returns the full title on a per-page basis.
 def full_title(page_title)
  base_title = "Ruby on Rails Tutorial Sample App"
  if page_title.empty?
   base_title
  else
  "#{base_title} | #{page_title}"
  end
 end 
end 
```

我的视图/布局/application.html.erb 是这样的：

```
<!DOCTYPE html>
<html>
<head>
<title><%= full_title(yield(:title)) %></title>
<%= stylesheet_link_tag "application", :media => "all" %> <%= javascript_include_tag     "application" %>
<%= csrf_meta_tags %>
</head>
<body>
<%= yield %>
</body>
</html> 
```

和 view/layouts/about.html.erb 像这样：

```
<% provide(:title, 'About Us') %>
<h1>About Us</h1>
<p>
The <a href="http://railstutorial.org/">Ruby on Rails Tutorial</a> is a project to make      a book and screencasts to teach web development with <a href="http://rubyonrails.org/">Ruby     on Rails</a>. This
is the sample application for the tutorial.
</p> 
```

现在，根据我的理解，这意味着它应该像这样显示“关于我们”页面标题

“Ruby on Rails 教程示例应用程序 | 关于我们”

正确的？

但是我看到的是：

“关于我们”

我试过删除

```
<% provide(:title, 'About Us') %> 
```

并将其放置在所有地方。

有什么建议么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:11:15.057

应用程序助手中的 full_title 方法仅更改 html 页面的*标题*（参见应用程序布局的第 4 行）。h1“关于我们”将保持静止。

请注意，如果您使用的是 Chrome 浏览器，您将无法在浏览器顶部看到标题（请参阅Hartl's Rails 教程的第[3.3.1节）。](http://ruby.railstutorial.org/chapters/static-pages#sec-testing_a_title_change)

# javascript - 如果在 javascript 函数中不起作用

> ID：16199976
> 
> 赞同：-2
> 
> 时间：2013-04-24T18:54:08.027
> 
> 标签：javascript, jquery, validation, numbers

我使用这个函数来验证一个输入元素：

```
function validerInput(qte, qtemax) {
    var floatRegex = /^((\d+(\.\d *)?)|((\d*\.)?\d+))$/;
    if (floatRegex.test(qte.value)) {
        var a = qte.value;
        var b = qtemax;
        if (a > b) {
            alert('if qtemax : ' + qtemax + ', qte : ' + qte.value);
            qte.value = '';
        }
        else {
            alert('else qtemax : ' + qtemax + ', qte : ' + qte.value);
        }
    }
    else {
        qte.value = '';
    }
} 
```

但问题始终是 else 的警报被启动并且第一个从来没有我不知道问题

你有什么主意吗 ：

启动的警报包含例如 234 和 5.66

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T18:58:10.703

输入元素的`value`属性存储为字符串，因此如果要将其视为数字，则需要将其转换为 1。你可能对 too 的值也有类似的问题`qtemax`，这是不可能的。按字母顺序比较字符串“234”在“5.66”之前，尽管在数字上它（很多）更大。使用[`parseFloat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)功能：

```
var a = parseFloat(qte.value),
    b = parseFloat(qtemax); 
```

# ipad - 从 iPad 触控笔获取生物特征信息

> ID：16199979
> 
> 赞同：-2
> 
> 时间：2013-04-24T18:54:17.430
> 
> 标签：ipad, biometrics, jot-touch-sdk

使用 Jot Touch 或 Pogo Connect 等触控笔，当用户在 iPad 上签名时（使用 Objective-C），我如何获取坐标 (X,Y) 压力 (T)、笔划速度 (S) 等生物特征信息？

我应该使用哪种方法或库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:05:53.760

iOS SDK 提供 X/Y 坐标。它不提供对冲程速度或压力的访问。

`UIPanGestureRecognizer`计算速度，大概只是通过距离/时间来计算。它可能计算距离/时间的移动平均值。你可以自己做。

如果您使用 Jot Touch ，[Jot Touch SDK](https://github.com/Adonit/JotTouchSDK)提供对压力数据的访问。

如果您使用 Pogo Connect ，则[Pogo Manager SDK](http://www.tenonedesign.com/t1pogomanager.php)提供对压力数据的访问。

如果您想同时支持两种测针，则必须同时使用这两种 SDK。

如果您不想将应用放到 App Store 中，[可以使用私有 API 来确定触摸大小](https://stackoverflow.com/a/2103715/77567)（这可能是压力的一个很好的代理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:01:11.763

你看过 Jot Touch 或 Pogo API 吗？对此没有 Apple 方法或库。它的第 3 方硬件。苹果不支持压力。您可以使用 touchesBegan: 和 touchesMoved: 函数获取触摸时的 x,y 数据，然后计算速度。您还可以使用手势识别器来检测运动和速度。

# c# - C#如何获取Windows监视器名称

> ID：16199982
> 
> 赞同：-1
> 
> 时间：2013-04-24T18:54:20.633
> 
> 标签：c#, windows, pinvoke

我正在尝试制作一个显示所有显示器和监视器名称的函数。但是我第二次调用 enumDisplayDevices 时，如果第一个参数是 lpDisplayDevice.DeviceName，则会出现错误。我知道这是第一个参数，因为如果它设置为“IntPtr.Zero”，则没有错误。

我找不到另一个如何在 C# 中执行此操作的示例。

```
 public static void show_display_devices()
    {
        DISPLAY_DEVICE lpDisplayDevice = new DISPLAY_DEVICE(0);     // OUT
        int devNum = 0;
        while(true)
        {
            bool success = EnumDisplayDevices( IntPtr.Zero,  devNum,  ref lpDisplayDevice,  0);
            if( !success )
                break;

            Console.WriteLine("\ndevNum =" + devNum);
            Console.WriteLine("cb =" + lpDisplayDevice.cb);
            Console.WriteLine("DeviceID =" + lpDisplayDevice.DeviceID);
            Console.WriteLine("DeviceKey =" + lpDisplayDevice.DeviceKey);
            Console.WriteLine("DeviceName =" + lpDisplayDevice.DeviceName.Trim());
            Console.WriteLine("DeviceString =" + lpDisplayDevice.DeviceString.Trim());
            // Show monitor name:
            DISPLAY_DEVICE monitor_name = new DISPLAY_DEVICE(0);        // OUT

               >>>>>>>>>>>   NEXT LINE HAS ERROR:  <<<<<<<<<<<<<<<
            EnumDisplayDevices(lpDisplayDevice.DeviceName, 0, ref monitor_name, 0);  <<<<<<<<<<<<<<<<<  "lpDisplayDevice.DeviceName" causes error  <<<<<<
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^ - CAUSES ERROR <<<<<<

            Console.WriteLine("Monitor name =" + lpDisplayDevice.DeviceString.Trim());

            ++devNum;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:56:32.137

问题出在声明“private static extern bool EnumDisplayDevices()”中。我将 lpDevice 从 IntPtr 更改为字符串，它对我有用。

下面的源代码在“输出”窗口中生成以下内容：

devNum =0 cb =424 DeviceID =PCI\VEN_10DE&DEV_0402&SUBSYS_0440196E&REV_A1 DeviceKey =\Registry\Machine\System\CurrentControlSet\Control\Video{B757E378-AF2E-4826-BA9E-927C5B81B139}\0000 DeviceName =\.\DISPLAY1 DeviceString =NVIDIA GeForce 86线程“RunPowerStatusMonitor 线程”(0x2108) 已退出，代码为 0 (0x0)。监视器名称 = 通用 PnP 监视器

devNum =1 cb =424 DeviceID =PCI\VEN_10DE&DEV_0402&SUBSYS_0440196E&REV_A1 DeviceKey =\Registry\Machine\System\CurrentControlSet\Control\Video{B757E378-AF2E-4826-BA9E-927C5B81B139}\0001 GTName =\.\DISPLAY2 DeviceString =NVIDIA GeForce 86监视器名称 = 通用 PnP 监视器

```
 public static void show_display_devices()
    {
        DISPLAY_DEVICE lpDisplayDevice = new DISPLAY_DEVICE(0);     // OUT
            DISPLAY_DEVICE monitor_name = new DISPLAY_DEVICE(0);        // OUT

        int devNum = 0;
        while (EnumDisplayDevices(null, devNum, ref lpDisplayDevice, 0))
        {

            Console.WriteLine("\ndevNum =" + devNum);
            Console.WriteLine("cb =" + lpDisplayDevice.cb);
            Console.WriteLine("DeviceID =" + lpDisplayDevice.DeviceID);
            Console.WriteLine("DeviceKey =" + lpDisplayDevice.DeviceKey);
            Console.WriteLine("DeviceName =" + lpDisplayDevice.DeviceName.Trim());
            Console.WriteLine("DeviceString =" + lpDisplayDevice.DeviceString.Trim());
            // Show monitor name:

            EnumDisplayDevices( lpDisplayDevice.DeviceName, 0, ref monitor_name, 0);
            Console.WriteLine("Monitor name =" + monitor_name.DeviceString.Trim());

            ++devNum;
        }
    }

    [DllImport("User32.dll")]
    private static extern bool EnumDisplayDevices(
        string lpDevice, int iDevNum,
        ref DISPLAY_DEVICE lpDisplayDevice, int dwFlags);

    [StructLayout(LayoutKind.Sequential)]
    public struct DISPLAY_DEVICE
    {
        public int cb;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
        public string DeviceName;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 128)]
        public string DeviceString;
        public int StateFlags;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 128)]
        public string DeviceID;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 128)]
        public string DeviceKey;

        public DISPLAY_DEVICE(int flags)
        {
            cb = 0;
            StateFlags = flags;
            DeviceName = new string((char)32, 32);
            DeviceString = new string((char)32, 128);
            DeviceID = new string((char)32, 128);
            DeviceKey = new string((char)32, 128);
            cb = Marshal.SizeOf(this);
        }
    } 
```

# c# - 是否可以注册多点文件扩展名？

> ID：16199986
> 
> 赞同：2
> 
> 时间：2013-04-24T18:54:32.980
> 
> 标签：c#, windows, registry

在我们的应用程序中，我们有一个像这样的文件扩展名：

```
filename.applicationName.zip 
```

现在我想注册它的文件扩展名

```
.applicationName.zip 
```

**问：这可能吗？**

（我知道如何注册文件扩展名，这不是重点）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:56:46.900

扩展名被定义为出现在文件名中最后一个点之后的字符。文件扩展名由简单的文本处理确定。您从文件名的末尾开始并向后走，直到找到一个点。

使用您的示例，文件扩展`filename.applicationName.zip`名为`zip`. 您可能认为文件的扩展名是，`applicationName.zip`但系统没有。重要的是系统的规则。

因此，文件扩展名不能包含点。因此，虽然您可以使用点注册文件扩展名，但系统永远不会将任何文件识别为与您的扩展名匹配。

# ios - 从 iOS 应用请求的 URL 中的时区

> ID：16199987
> 
> 赞同：1
> 
> 时间：2013-04-24T18:54:33.367
> 
> 标签：ios, timezone, url-parameters

我正在尝试从iOS 应用程序中`www.myurl.com/a?timezone=+n.n`使用的表单的 url 请求数据。或参考发出请求的设备的时区。`NSMutableURLRequest``+n.n``-n.n`

**如何在 url 中填充这个时区参数？**

我四处搜索并没有找到与上述格式的时区相关的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:05:43.723

我们需要逐步解决这个问题。首先，让我们得到一个几乎是您想要的字符串（注意，未经测试）：

```
NSDateFormatter *formatter;
NSString *almostThere;

formatter = [[NSDateFormatter alloc] initWithDateFormat:@"ZZZZZ" allowNaturalLanguage:NO];
almostThere = [formatter stringFromDate:[NSDate date]];
[formatter release]; 
```

现在`almostThere`应该类似于`-08:00`根据[日期格式字符串文档](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)（NSDateFormatter 使用 Unicode 格式并引用此文档）。

所以现在剩下的就是用点替换冒号：

```
NSString *tz;

tz = [almostThere stringByReplacingOccurrencesOfString:@":" withString:@"."]; 
```

最后，网址：

```
NSURL *theURL;
NSString *urlString;

urlString = [NSString stringWithFormat:@"http://www.myurl.com/a?timezone=%@", tz]
theURL = [NSURL URLWithString:urlString]; 
```

# sql - 查找表 SQL 上的最后一个寄存器

> ID：16199989
> 
> 赞同：0
> 
> 时间：2013-04-24T18:54:38.700
> 
> 标签：sql, function, field

我有这个：

表**客户**：

```
CLI_ID   STUDENT
   1     name1
   2     name2
   3     name3 
```

表**大学**：

```
UNIV_ID   CLI_ID    NAME
1...........1      harvard (2012)
2...........1      oxford(2013)
3...........2      yale 
```

我需要：

```
STUDENT    UNIVERSITY
name1      oxford
name2      yale 
```

但我得到：

```
STUDENT    UNIVERSITY
name2      yale 
```

我只得到最高的数字。并非所有 id 最高的学生（上一所大学）

我已经试过这个：

```
**SELECT** C.cli_id, UNIV.UNIV_ID **FROM** cliente C

**INNER JOIN** UNIVERSITY UNIV **ON** C.Cli_id = UNIV.cli_id

**WHERE** UNIV_ID = ( **SELECT MAX** (UNIV_ID) **FROM** UNIVERSITY ) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:33:29.133

您需要在`where`子句中使用相关子查询以获得每个学生的最大值：

```
SELECT C.cli_id, UNIV.UNIV_ID 
FROM cliente C INNER JOIN
     UNIVERSITY UNIV
     ON C.Cli_id = UNIV.cli_id
WHERE UNIV_ID = ( SELECT MAX(UNIV_ID) FROM UNIVERSITY u2 where u2.cli_id = c.cli_id) 
```

你得到了所有学生的最大值，你只想要每个学生的最大值。

# ruby-on-rails - ruby on rails 3.2中的背景图像

> ID：16199992
> 
> 赞同：0
> 
> 时间：2013-04-24T18:54:45.657
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试附加 a 以将图像附加到背景，但它不会显示。

我当前的代码路径是 assets > stylesheets > application.css 和 assets > stylesheets > style.css.scss

什么是正确的 url 路径我当前的代码如下：

```
background: #F4F4F4 url("/assets/images/background.jpg"); 
```

我一直在环顾四周，但没有一个解决方案一直在起作用，我们将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:17:14.807

请试试这个

```
background: #F4F4F4 url("background.jpg") 
```

# node.js - 带有 HTTP 响应的 MongoDB 文档流式传输？

> ID：16199995
> 
> 赞同：0
> 
> 时间：2013-04-24T18:54:56.327
> 
> 标签：node.js, mongodb, socket.io, mongoose, derbyjs

在对 node.js 实时框架/包装器（derby.js、meteor、socketIO ...）进行了一整天的研究之后，我意识到，更老式（抱歉）的 restful API 方式满足了我的所有需求。

我认为我必须使用正在进行的套接字连接的原因之一是因为我想从数据库中流式传输我的 MongoDB 文档，而不是将它们全部加载到服务器上的内存中。我认为这是推荐的方式，因为它最大限度地减少了服务器资源的使用。

但问题是：

一个简单的文档查询流式处理是否适用于普通的 HTTP 请求/响应模型，或者我们是否必须建立一个持续的套接字连接才能将所有文档流式传输到客户端？

注意：我只需要在 ajax 调用上加载文档 - 无需将新文档推送到客户端（因此实际上不需要实时）。

有什么特别需要考虑的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:49:32.243

您可以使用标准 HTTP 请求/响应 API 流式传输查询结果。

调用的一般顺序是：

```
res.writeHead(<header content>)
res.write(<data>)
...
res.write(<data>)
res.end(); 
```

但是您通过查询中的流事件驱动异步进行这些调用。

# java - 如何在 vaadin 7 中正确导航身份验证视图

> ID：16199996
> 
> 赞同：0
> 
> 时间：2013-04-24T18:54:58.640
> 
> 标签：java, exception, vaadin, navigator

我正在尝试从我的登录视图导航到另一个视图......这个过程是通过我编写的身份验证方法进行的。我可以从登录视图转到另一个视图，但是，当我刷新窗口时，我得到一个丑陋的异常，告诉我没有我想访问的视图。我已经尝试过拥有 2 个 UI。一个用于登录，另一个用于其他所有内容，在第一个中，我想通过`setContent()`方法设置另一个 UI，但我给了我更丑陋的异常，然后我发现它是被禁止的或类似的东西，所以我再次尝试了视图和导航器但失败了。请你帮助我好吗？我的用户界面中设置导航器的代码去..

```
navigator = new Navigator(this, this);

navigator.addView("",new LoginView()); 
```

在我调用的身份验证方法中：

```
getUI().getNavigator().addView("kniznica", new LoggedInView());
getUI().getNavigator().navigateTo("kniznica"); 
```

向 ui 添加一个新视图，然后导航到它。

刷新称为“kniznica”的视图后的异常：

```
java.lang.IllegalArgumentException: Trying to navigate to an unknown state 'kniznica' and an error view provider not present
at com.vaadin.navigator.Navigator.navigateTo(Navigator.java:525)
at com.vaadin.ui.UI.doInit(UI.java:534)
at com.vaadin.server.AbstractCommunicationManager.getBrowserDetailsUI(AbstractCommunicationManager.java:2468)
at com.vaadin.server.AbstractCommunicationManager.handleBrowserDetailsRequest(AbstractCommunicationManager.java:2362)
at com.vaadin.server.VaadinServlet.service(VaadinServlet.java:325)
at com.vaadin.server.VaadinServlet.service(VaadinServlet.java:201)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T10:42:37.310

可能它没有首先导航到登录视图。尝试这个：

```
public static String LOGINVIEW ="LoginView";
public static String LOGGEDINVIEW = "kniznica";

navigator = new Navigator(this, this);

navigator.addView(LOGINVIEW ,new LoginView());
navigator.navigateTo(LOGINVIEW ); 
```

在身份验证方法调用中：

```
getUI().getNavigator().addView(LOGGEDINVIEW, new LoggedInView());
getUI().getNavigator().navigateTo(LOGGEDINVIEW); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-02T05:55:40.760

在您的 UI 类中，在 init 方法的末尾使用以下内容：

```
this.navigator.setErrorView(myView); 
```

它将使用空片段修复错误。

# sql-server - 如何处理数据迁移脚本中的唯一约束违规？

> ID：16199997
> 
> 赞同：0
> 
> 时间：2013-04-24T18:55:07.450
> 
> 标签：sql-server, sql-server-2008, insert, constraints, unique-constraint

在这里，我试图将一些数据从表列迁移到一个全新的表，其中目标列具有唯一约束。基本上我正在尝试：

```
INSERT INTO FooTable VALUES (SELECT BarTable.Code FROM BarTable) 
```

FooTable 只有 2 列：ID 和 Code（具有唯一约束的列）。

但是在 BarTable.Code 上，也许有一些重复的值我需要处理并将它们适合新的约束（可能是：Code = Code + 1 或其他）。

关于如何做到这一点的任何想法？

我正在使用 MS SQL Server 2008 R2。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:13:53.087

您可以使用[MERGE](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.100%29.aspx)命令并在代码匹配时插入不同的记录。

这是一个基于您的场景的示例：

```
MERGE FooTable AS T
USING BarTable AS S
ON (T.Code = S.Code) 
WHEN NOT MATCHED BY TARGET 
    THEN INSERT(Code) VALUES(S.Code)
WHEN MATCHED 
    THEN INSERT(Code) VALUES(S.Code+1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:07:52.973

您可以使用`Not Exists`

```
INSERT INTO FooTable VALUES (SELECT distinct br.Code FROM BarTable br where NOT EXISTS(SELECT * FROM FooTable bs where br.code=bs.code  ) ) 
```

# c - Linux 内核中 ATOMIC_INIT 宏的用途

> ID：16199998
> 
> 赞同：5
> 
> 时间：2013-04-24T18:55:16.010
> 
> 标签：c, linux, gcc, linux-kernel, c99

我正在在线阅读[Linux Device Drivers 3rd Edition](http://www.makelinux.net/ldd3/)书籍，但无法理解[原子变量](http://www.makelinux.net/ldd3/chp-5-sect-7#chp-5-sect-7.2)的初始化宏：

```
static atomic_t foobar = ATOMIC_INIT(1); 
```

我查看了**Linux 内核 v3.2**的源代码，但我只提出了两个定义：

```
#define ATOMIC_INIT(i) { (i) } 
```

和

```
#define ATOMIC_INIT(i) ((atomic_t) { (i) }) 
```

宏定义的第二个版本在功能上似乎与第一个版本相同——事实上，当值无论如何都会被隐式强制转换为`atomic_t`. 为什么有两个版本的定义？

如果在 Linux 内核的未来版本中结构发生变化，宏的目的是否`ATOMIC_INIT`只是为了防止代码中断？`atomic_t`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:37:40.007

许多原子操作必须为每个架构单独实现。各种宏和函数的目的`atomic.h`是隐藏架构之间的差异。

在实践中，所有架构都使用单个 32 位变量来实现，因此各种宏`atomic_t`没有实际区别；`ATOMIC_INIT`所有有趣的事情都发生在操作中。但是内部结构可能会改变（并且对于 32 位 SPARC*确实改变过一次），因此您始终应该使用官方 API。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:18:42.933

两种不同形式的区别在于`ATOMIC_INIT`，第一种只能用在初始化中，第二种可以用在初始化和赋值中。乍一看，这听起来好像第二种更可取，但它有一个无法应用的重要用例：使用`static`存储规范声明的块范围变量。在块范围内

```
static atomic_t foobar = ((atomic_t) { (1) }); 
```

对标准 C 无效，因为初始化器不是编译时常量表达式。（在文件范围内，复合文字将被静态分配，因此它可以在那里工作。）

我隐约记得内核列表上的一个讨论，其中提到 gcc 有一个允许此类代码的扩展，这是他们不转向 C99 而是坚持将 gnu89 作为 C 方言的原因之一。