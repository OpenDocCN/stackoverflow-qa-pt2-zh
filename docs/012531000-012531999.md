# StackOverflow 问答 12531000-12531999

# excel - 使用 BIRT 报告工具（开源版本）在同一个 excel 输出中获取多张工作表

> ID：12531001
> 
> 赞同：6
> 
> 时间：2012-09-21T12:53:26.287
> 
> 标签：excel, birt

我需要在 excel fromat 的最终报告输出中获得多选项卡式输出。我正在使用 birt 4.2.0。有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:02:34.720

根据我收集到的信息，在 BIRT 上搞砸了，只有使用用于 xls 的自定义发射器才能获得多表（我假设这是您在术语多选项卡式输出下考虑的内容）的唯一方法。

有关更多信息，请查看以下网站：

*   [替换默认的 birt 发射器](http://birtworld.blogspot.com/2011/07/replacing-default-birt-xls-emitter.html)
*   [如何在excel中创建多个工作表](http://www.birt-exchange.org/org/forum/index.php/topic/24629-how-to-create-multiple-sheets-in-excel-reports/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T13:57:23.703

```
 options = new EXCELRenderOption(outputFormat: "xls")
     options.setEmitterID("uk.co.spudsoft.birt.emitters.excel.XlsEmitter" ) 
```

这为我创造了每张 40 条记录。我认为除了发射器之外别无选择，所以请尝试一下，但我的问题是如何在一张表中列出所有记录。

# ckeditor - 动态更改 CKEditor 工具栏

> ID：12531002
> 
> 赞同：15
> 
> 时间：2012-09-21T12:53:30.890
> 
> 标签：ckeditor

如何动态更改 CKEditor 工具栏（不使用预定义的工具栏）？

CKEditor [Developer's Guide](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)仅告诉您如何在初始化期间设置工具栏。

我正在使用 CKEditor 3.6.4。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T13:37:13.843

按照[mb21](https://stackoverflow.com/users/214446/mb21)的建议，我设法通过重新初始化整个编辑器来加载新工具栏：

```
CKEDITOR.instances.editor.destroy();
CKEDITOR.replace('editor', configWithNewToolbar); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-13T12:28:05.310

```
var editor = CKEDITOR.instances['text_id'];
if (editor) { editor.destroy(true); }

CKEDITOR.config.toolbar_Basic = [['Bold','Italic','Underline',
'-','JustifyLeft','JustifyCenter','JustifyRight','-','Undo','Redo']];
CKEDITOR.config.toolbar = 'Basic';
CKEDITOR.config.width=400;
CKEDITOR.config.height=300;
CKEDITOR.replace('text_id', CKEDITOR.config); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T14:03:08.460

您可以使用以下代码重新加载或更改工具栏，而无需重新加载编辑器：

```
 CKEDITOR.editor.prototype.loadToolbar = function(tbName) {
    // If the 'themeSpace' event doesn't exist, load the toolbar plugin
    if (!this._.events.themeSpace) {
      CKEDITOR.plugins.registered.toolbar.init(this);
    // causes themeSpace event to be listened to.
    }
    // If a different toolbar was specified use it, otherwise just reload
    if (tbName) this.config.toolbar = tbName;

    // themeSpace event returns a object with the toolbar HTML in it
    var obj = this.fire( 'themeSpace', { space: 'top', html: '' } );

    // Replace the toolbar HTML 
    var tbEleId = "cke_"+this.config.toolbarLocation+"_"+this.name;
    var tbEle = document.getElementById(tbEleId);
    tbEle.innerHTML = obj.html;
  } // end of loadToolbar 
```

在 editor.prototype 中添加函数使其成为任何编辑器实例的方法。您的编辑器对象可能是 CKEDITOR.instances.editor1

loadToolbar 的参数是要加载的工具栏的名称，如果为 null，则重新加载当前工具栏。当前工具栏的名称在 CKEDITOR.instances.editor1.config.toolbar 中。如果您指定工具栏“foo”，则必须有一个定义工具栏内容的 CKEDITOR.instances.editor1.config.toolbar_foo 数组。

您可以从当前工具栏数组变量中添加或删除内容，然后使用以下命令重新加载它： edObj.loadToolbar(null);

* * *

（不影响上述方法的元问题：我不明白为什么在编辑器最初加载主题后，'themeSpace' 事件的侦听器消失了。（工具栏插件 init() 方法执行 event.on("themeSpace" ...）但在编辑器初始化后监听消失了。我没有看到它在哪里做了 removeListener()。所以调用 ...toolbar.init(this) 需要重新建立那些事件监听器，所以工具栏代码将重建新的工具栏。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-19T13:26:02.540

根据 [CKEditor 文档][1]，他们已经放弃了“主题”的概念，因此必须对上面提到的“loadToolbar()”方法进行一些修改才能与最新版本的 CKEditor 一起使用。

这对我有用（CKEditor 4.4.4）：

```
CKEDITOR.editor.prototype.setToolbar = function(tbName) {
		if (!this._.events.themeSpace) {
		  CKEDITOR.plugins.registered.toolbar.init(this);
		// causes themeSpace event to be listened to.
		}
		// If a different toolbar was specified use it, otherwise just reload
		if (tbName){
			this.config.toolbar = tbName;
		}
		//According to CKEditor documentation
		var obj = this.fire( 'uiSpace', { space: 'top', html: '' } ).html;
		console.log("Received from themespace:");
		console.log(obj);
		// Replace the toolbar HTML 
		var tbEleId = this.id +"_" + this.config.toolbarLocation;
		console.log("Editor element id: " + tbEleId);
		var tbEle = document.getElementById(tbEleId);
		//tbEle.innerHTML = obj.html;
		$(tbEle).html(obj);
      }
```

[1]：[http ://docs.ckeditor.com/#!/guide/dev_api_changes](http://docs.ckeditor.com/#!/guide/dev_api_changes)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T12:44:27.200

只是一个快速的。

如果您的工具栏包含 textcolor 和/或 backgroundcolor 按钮，您可能需要将此行添加到 loadToolbar 函数：

```
//Need to call init for colorbutton so that we can re-draw the color buttons
CKEDITOR.plugins.registered.colorbutton.init(this); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-19T11:55:13.547

至少对我来说这有点复杂......

并回答我认为我会分享工作代码的问题。

我有一个用户定义的文本片段——在我需要加载的 ckeditor 用语中称为模板。我还根据窗口宽度动态更改工具栏，并在窗口调整大小时动态调整大小。每个浏览器尺寸都有自己的自定义工具栏。（XS，SM，MD）。我希望所有带有 CKEDITOR 的元素都有一个 .ckeditor 类，并且它们分配了一个 ID。此外，我设置了一个模糊 ajax 保存处理程序，因此如果需要，当失去焦点时，控件会自动保存（通过 ajax_post 函数）。

我使用 setupCKEdit 调用该过程。感谢 hpique 提供了删除旧对象并创建新实例的灵感。在调整大小事件上，我会稍微延迟（resizeTimeout= 200 毫秒），因此在更改窗口大小时它不会经常触发。

```
// ********* ck editor section starts **************

var resizeTimeout;
var ckeditorXSToolbar = Array(
    { name: 'clipboard', groups: [ 'clipboard', 'undo' ], items: [ 'Cut', 'Copy', 'Paste','-', 'Undo', 'Redo' ] },
    { name: 'document', groups: [ 'mode' ], items: [ 'Source'] },
    { name: 'tools', items: [ 'Maximize'] },
    { name: 'styles', items: [ 'Format', 'Font', 'FontSize'] ,class:'hidden-xs'},
    { name: 'basicstyles', groups: [ 'basicstyles'], items: [ 'TextColor','Bold', 'Italic'] }

);

var ckeditorSMToolbar = [
    { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize'] ,class:'hidden-xs'},
    { name: 'clipboard', groups: [ 'clipboard', 'undo' ], items: [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo' ] },
    { name: 'editing', groups: [ 'find', 'selection' ], items: [ 'Find', 'Replace', '-', 'SelectAll' ] },
    { name: 'document', groups: [ 'mode', 'document', 'doctools' ], items: [ 'Source', '-', 'Save', 'NewPage', 'Preview', 'Print'] },

    { name: 'forms', items: [ 'Form', 'Checkbox', 'Radio', 'TextField', 'Textarea', 'Select', 'Button', 'ImageButton', 'HiddenField' ] },
    { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'TextColor','Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },
    { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock', '-', 'BidiLtr', 'BidiRtl', 'Language' ] },
    { name: 'tools', items: [ 'Maximize', 'ShowBlocks' ] }
];
var ckeditorMDToolbar = [
    { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize'] ,class:'hidden-xs'},
    { name: 'clipboard', groups: [ 'clipboard', 'undo' ], items: [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo' ] },
    { name: 'editing', groups: [ 'find', 'selection', 'spellchecker' ], items: [ 'Find', 'Replace', '-', 'SelectAll', '-', 'Scayt' ] },
    { name: 'document', groups: [ 'mode', 'document', 'doctools' ], items: [ 'Source', '-', 'Save', 'NewPage', 'Preview', 'Print'] },

    { name: 'forms', items: [ 'Form', 'Checkbox', 'Radio', 'TextField', 'Textarea', 'Select', 'Button', 'ImageButton', 'HiddenField' ] },
    { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'TextColor','Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },
    { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock', '-', 'BidiLtr', 'BidiRtl', 'Language' ] },
    { name: 'links', items: [ 'Link', 'Unlink', 'Anchor' ] },
    { name: 'insert', items: [ 'Image', 'Flash', 'Table', 'HorizontalRule', 'Smiley', 'SpecialChar', 'PageBreak', 'Iframe' ] },

    { name: 'tools', items: [ 'Maximize', 'ShowBlocks' ] },
    { name: 'others', items: [ '-' ] },
    { name: 'about', items: [ 'About' ] }
];

function setupCKEdit(selector){
    if (typeof(o.snippets) == 'object'){
        var template = {
            imagesPath:url_img ,
            templates: o.snippets
        };
        CKEDITOR.addTemplates('myTemplate', template);
    }   
    resizeCKEdit();

    $('.ckeditor',selector).not('.hasCKEDITOR').each(function(index,element){
        $(this).addClass('hasCKEDITOR');
        var ckConfig = {
            templates_replaceContent:false,
            scayt_slang:'en_GB',
            scayt_autoStartup:scayt_autoStartup,
            toolbarCanCollapse:true,
            extraPlugins:'templates,colorbutton',
            toolbar:getCKtoolbar(),
            toolbarStartupExpanded:getCKToolbarStartup()
        };
        // inject the snippets after the toolbar[].name = 'document'
        if (typeof(o.snippets) == 'object'){
            ckConfig.templates = 'myTemplate';
            for(var i = 0 ; i < ckConfig.toolbar.length ; i++){
                if (ckConfig.toolbar[i].name == 'document'){
                    // iterate throught each document element to make sure template is not already there.
                    var hasTemplate = false;
                    for ( var j = 0 ; j < ckConfig.toolbar[i].items.length; j++){
                        if (ckConfig.toolbar[i].items[j] == 'Templates'){
                            hasTemplate = true;
                        }
                    }
                    if (hasTemplate == false){
                        ckConfig.toolbar[i].items.push('-'); // add to documents group.
                        ckConfig.toolbar[i].items.push('Templates');
                    }

                }
            }           
        }
        $(this).ckeditor(ckConfig);
        var editor = CKEDITOR.instances[this.id];
        if(typeof(editor) == 'object'){
            editor.on('blur',function(event){
                if (event.editor.checkDirty()){
                    var ta = $('#'+event.editor.name); // ta = textarea
                    if ( (typeof(ta) == 'object')
                        && (typeof(ta[0]) == 'object')
                        && ( $(ta[0]).hasClass('noajax') == false )
                        && ( $(ta[0]).data('id')) 
                        && ( ta[0].name)) {
                        var data = {
                            field_name:ta[0].name,
                            field_value:event.editor.getData(),
                            id:$(ta[0]).data('id')
                            };
                        data[ta[0].name]=event.editor.getData();
                        ajax_post(url_ajax + 'update_field', data);
                        event.editor.resetDirty();
                    }
                }
            });
        }
    });
}
function getCKtoolbar(){
    // returns the CK editor toolbar array based on window width
    var dw = $(document).width();
    if (dw < 768){
        return ckeditorXSToolbar;
    } else if(dw < 991){
        return ckeditorSMToolbar;
    }
    else {
        return ckeditorMDToolbar;
    }
}

function getCKToolbarStartup(){
    // returns the toolbarStartupExpanded parameter, based on window width
    var dw = $(document).width();
    if (dw < 768){
        return false;
    } else if(dw < 991){
        return true;
    }
    else {
        return true;
    }
    return true;
}
function resizeCKEdit(){
    // when there is a document resize, update the toolbar buttons.
    if ($('body').data('resize_enabled') == undefined){
        $('body').data('resize_enabled',true);
        $(window).resize(function(event){
            // only do the reize 100msec after the resizing finishes.
            window.clearTimeout(resizeTimeout);
            resizeTimeout = window.setTimeout(function(){

            // iterate through all CKEDITOR instances, and update their toolbars.
                var ckConfig = {
                    templates_replaceContent:false,
                    scayt_slang:'en_GB',
                    scayt_autoStartup:scayt_autoStartup,
                    toolbarCanCollapse:true,
                    extraPlugins:'templates,colorbutton',
                    toolbar:getCKtoolbar(),
                    toolbarStartupExpanded:getCKToolbarStartup()
                };
                if (CKEDITOR.editor.length){
                    // need to get all instances before deleting them,
                    var instances = Array();
                    var i = 0;
                    for (var instance in CKEDITOR.instances) {
                        instances[i] = instance;
                        i++;
                    }
                    for (i = 0 ; i < instances.length ; i ++){
                        CKEDITOR.instances[instances[i]].destroy();
                        $('#'+instances[i]).removeClass('hasCKEDITOR');
                        setupCKEdit($('#'+instances[i]).parent());
                    }
                }
            },200);

        });
    }
}
// ********* ck editor section ends ************** 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-01T10:11:30.633

或者：

```
 $(document).ready(function() {
      CKEDITOR.config.customConfig = 'configSimple';
   }); 

   //the configSimple.js file is the same folder with config.js 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-29T00:02:28.010

如果您想要一种在不同区域交换工具栏的简单方法，您只需将工具栏添加到配置中，然后在实例化编辑器时选择您想要的工具栏。

在 config.js 中：

```
CKEDITOR.editorConfig = function(config)
{
// default toolbar
config.toolbar = [
    { name: 'source',       items: [ 'ShowBlocks', 'Source' ] },
    { name: 'clipboard',    items: [ 'Undo', 'Redo', '-', 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord'  ] },
    { name: 'editing',      items: [ 'Find', 'Replace', 'SelectAll', 'Scayt' ] },

    { name: 'p2',           items: [ 'Blockquote', 'Outdent', 'Indent', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock' ] },
    { name: 'links',        items: [ 'Link', 'Unlink', 'Anchor' ] },
    { name: 'paragraph',    items: [ 'NumberedList', 'BulletedList' ] },
    { name: 'insert',       items: [ 'CreatePlaceholder', 'CreateDiv', 'Image', 'Table', 'HorizontalRule', 'SpecialChar', 'Iframe' ] },

    //{ name: 'styles',         items: [ 'Styles', 'Format' ] },
    { name: 'basicstyles',  items: [ 'Bold', 'Italic', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },
    { name: 'styles',       items: [ 'Format' ] },
    { name: 'morestyles',   items: [ 'Font', 'FontSize' ] },
    { name: 'colors',       items: [ 'BGColor', 'TextColor' ] }
];

// here is one custom toolbar
config.toolbar_mycustom1 = [
    { name: 'source',       items: [ 'ShowBlocks', 'Source' ] },
    { name: 'clipboard',    items: [ 'Undo', 'Redo', '-', 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord'  ] },
    { name: 'editing',      items: [ 'Find', 'Replace', 'SelectAll', 'Scayt' ] }
];

// here is another custom toolbar
config.toolbar_mycustom2 = [
    { name: 'styles',       items: [ 'Format' ] },
    { name: 'morestyles',   items: [ 'Font', 'FontSize' ] },
    { name: 'colors',       items: [ 'BGColor', 'TextColor' ] }
];

// ...other config vars here 
```

在您实例化编辑器实例的页面中，这样做：

```
<script>
    CKEDITOR.replace('MyObject', {toolbar: 'mycustom2'});
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-25T09:01:39.760

您可以根据需要动态创建工具栏。我发现最好的方法是监听关于实例创建的 CKE 事件。

```
CKEDITOR.on('instanceCreated', function(event) {
    var editor = event.editor;
    editor.config.toolbar = [
        { name: 'basicstyles', groups: [ 'basicstyles'], items: [ 'Bold', 'Italic','Subscript', 'Superscript' ] },
    ]; // could be from synchronous!!! XHR as well 
});

CKEDITOR.on('instanceReady', function(event) {
    var editor = event.editor;
    editor.config.toolbar = [
        { name: 'basicstyles', groups: [ 'basicstyles'], items: [ 'Bold', 'Italic','Subscript', 'Superscript' ] },
    ];
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-26T03:58:24.843

我假设您想通过插件文件添加按钮。这里是如何。将按钮添加到 ui。

```
editor.ui.addButton('ButtonName', {
  label: lang.lockediting.locked,
  icon: this.path + 'icons/locked.png',
  command: 'lockediting'}); 
```

然后您可以将 ButtonName 推送到工具栏。

```
//Here it is pushed as a new group
editor.config.toolbar.push(['ButtonName']); 
```

如果你检查 console.log(editor.config.toolbar); 您将看到工具栏是一个对象，其工具栏组为数组 [Array[10]、Array[2]、Array[5]]。[Array[10] 表示第一组有 10 个按钮。您可以将按钮推入任何这些阵列。

# windows - 无法在 Windows 上启动 JBoss 7.0.2

> ID：12531004
> 
> 赞同：2
> 
> 时间：2012-09-21T12:53:38.147
> 
> 标签：windows, exception, jboss, jboss7.x, java.util.logging

我在 Windows 7 上启动 JBoss 版本 7.0.2 时遇到问题。我在 Jboss 7.1.1 和 7.1.0 中也遇到了这个错误，所以我认为恢复到更旧和更稳定的版本可以解决问题，但没有用。

以下是问题 - LogManager 未正确安装。

![在此处输入图像描述](../Images/38a8978684e0cbfffa157e9d2c71e652.png)

我没有部署任何可能使用记录器或任何东西的东西，我只是在全新安装并重新启动后运行standalone.bat。我发现[了这个问题](https://issues.jboss.org/browse/AS7-1)，但它似乎已经解决了......

有趣的是，我能够从 Eclipse（Indigo 和 Juno EE 版本）启动它。

有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:12:33.517

问题是 JAVA_OPTS 中的 JMX 参数。在我删除它们之后，它毫无例外地开始了。

# java - 视频未运行。我想使用 java 获取视频

> ID：12531011
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:54:13.637
> 
> 标签：java, video

我使用 Orbit 下载器下载了一个大尺寸的 .flv 视频，该下载器将文件分成八部分，然后将它们重新连接起来。下载后，我发现视频没有运行并在一段时间后停止。我想提取所有视频并使用java程序将其保存在另一个文件中。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:05:15.923

为此，您需要了解 FLV 文件格式。查看[http://www.adobe.com/devnet/f4v.html](http://www.adobe.com/devnet/f4v.html)。

通常 flv 文件包含标头字段，其中一些字段指定轨道长度，如果文件在两者之间停止，则您的标头字段未存储正确的值。

# .net - 从 CXF-Web 服务返回 BigDecimal

> ID：12531016
> 
> 赞同：0
> 
> 时间：2012-09-21T12:54:43.943
> 
> 标签：.net, web-services, cxf, bigdecimal

我一直在使用带有 aegis 绑定的**Xfire**一段时间，现在我正在使用 aegis 迁移到 CXF，并且正在使用 .Net 客户端。问题是对于所有返回**BigDecimal**值的方法，在 .Net 端生成的相应方法返回 void，而是有两个额外参数：out decimal return，out bool returnSpecified。有没有办法将返回类型改回**十进制？**. 仅供参考，所有其他参考类型均已正确表示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:35:07.607

我找到了使用 aegis 配置的解决方法，并将 wsdl 中返回值的 minOccurs 属性强制为“1”（默认情况下在 aegis 中设置为“0”）。

# jsp - 比较 JSP 中的请求参数

> ID：12531020
> 
> 赞同：0
> 
> 时间：2012-09-21T12:55:04.983
> 
> 标签：jsp, exception, compare

我有一个 servlet，我想在其中比较请求参数。我正在使用以下代码

```
 <body>
    <%
        if(request.getParameter("type")!=null)
               {
            if(request.getParameter("type").equals("recover"))
                                   {
    %>
                <h1>Recover</h1>
    <%
               }
                           }
                   else if(request.getParameter("type")!=null)
                           {
                       if(request.getParameter("type").equals("reset"))
                                                         {
    %>
    <h1>Reset</h1>
    <%
           }
                                                 }
        %>
</body> 
```

但是这个jsp给出了一个编译时异常堆栈跟踪如下

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /recover.jsp at line 16

 </head>
<body>
     <%
         if(request.getParameter("type").equals("recover")) <--- line16
               {
    %>
     <h1>Recover</h1> 
```

我不知道出了什么问题，因为这是比较字符串的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:02:06.893

为什么不改用 JSTL：

```
<c:if test="${param.type == 'recover'}">
    <h1>Recover</h1>
</c:if>
<c:if test="${param.type == 'reset'}">
    <h1>Reset</h1>
</c:if> 
```

您不必关心参数是否为空，它会更干净。不应再使用小脚本。在很长一段时间内都是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:58:13.337

`request.getParameter()`可以返回 null，您可能需要在执行之前检查并确保返回值不为 null `.equals()`。

# c# - 在运行应用程序之前，属性信息的设计视图没有变化

> ID：12531021
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:55:07.433
> 
> 标签：c#, wpf, wpf-controls

当我直接从属性信息更改依赖属性时，在我运行应用程序之前，我的设计视图中没有立即得到结果。

```
 <local:OnOffToggleButton HorizontalAlignment="Left" Margin="35,34,0,0" x:Name="onOffToggleButton1" VerticalAlignment="Top" StateOf4="3" GotFocus="onOffToggleButton1_GotFocus" Loaded="onOffToggleButton1_Loaded" />

public class OnOffToggleButton : Control// ToggleButton
{

    public static readonly DependencyProperty StateOf4Property;

    static OnOffToggleButton()
    {

        OnOffToggleButton.StateOf4Property = DependencyProperty.Register("StateOf4", typeof(int), typeof(OnOffToggleButton));
    }

    public int StateOf4
    {
        get
        {
            return (int)this.GetValue(OnOffToggleButton.StateOf4Property);
        }
        set
        {
            SetValue(OnOffToggleButton.StateOf4Property, value);
        }          
    }
} 
```

}

这是我的切换按钮的默认值、模板和样式

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:WpfApplication3">

<Style TargetType="{x:Type local:CustomControl1}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:CustomControl1}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                </Border>                   
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<ControlTemplate x:Key="buttonTemplate" TargetType="{x:Type local:OnOffToggleButton}" >
    <StackPanel>
        <Grid>
            <Ellipse x:Name="btnEllipse" StrokeThickness="2"  Stroke="DarkBlue" Width="128" Height="131">
                <Ellipse.Fill>
                    <RadialGradientBrush Center="0.3,0.2" RadiusX="0.5" RadiusY="0.5">
                        <GradientStop Color="Azure" Offset="0.1" />
                        <GradientStop Color="Red" Offset="1.1" />
                    </RadialGradientBrush>

                </Ellipse.Fill>
            </Ellipse>
        </Grid>
    </StackPanel>
    <ControlTemplate.Triggers>
        <Trigger Property="StateOf4" Value="1">
            <Setter TargetName="btnEllipse" Property="Fill">
                <Setter.Value>
                    <RadialGradientBrush Center="0.3,0.2" RadiusX="0.5" RadiusY="0.5">
                        <GradientStop Color="Green" Offset="0.1" />
                        <GradientStop Color="GreenYellow" Offset="1.1" />
                    </RadialGradientBrush>
                </Setter.Value>
            </Setter>
        </Trigger>
        <Trigger Property="StateOf4" Value="2">
            <Setter TargetName="btnEllipse" Property="Fill">
                <Setter.Value>
                    <RadialGradientBrush Center="0.3,0.2" RadiusX="0.5" RadiusY="0.5">
                        <GradientStop Color="BlueViolet" Offset="0.1" />
                        <GradientStop Color="Pink" Offset="1.1" />
                    </RadialGradientBrush>
                </Setter.Value>
            </Setter>
        </Trigger>
        <Trigger Property="StateOf4" Value="3">
            <Setter TargetName="btnEllipse" Property="Fill">
                <Setter.Value>
                    <RadialGradientBrush Center="0.3,0.2" RadiusX="0.5" RadiusY="0.5">
                        <GradientStop Color="Maroon" Offset="0.1" />
                        <GradientStop Color="Pink" Offset="1.1" />
                    </RadialGradientBrush>
                </Setter.Value>
            </Setter>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>
<Style TargetType="{x:Type local:OnOffToggleButton}">
    <Setter Property="Control.Template" Value="{StaticResource buttonTemplate}" />
</Style> 
```

你能帮我吗！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:06:50.457

我认为触发器在 VS 设计器中不起作用。

解决方法是使用 VisualStateManager 并将 StateOf4 值转换为不同的视觉状态。这也适用于设计师。

# c - C 中的 Switch() { case: } 性能

> ID：12531024
> 
> 赞同：8
> 
> 时间：2012-09-21T12:55:28.937
> 
> 标签：c, performance, switch-statement

> **可能重复：**
> [为什么切换/案例而不是如果/否则如果？](https://stackoverflow.com/questions/1028437/why-switch-case-and-not-if-else-if)

我想了解编译器如何将`switch() case:`C 中的语句翻译成汇编器操作码。

具体来说，我有兴趣了解一系列`if then else`分支的区别。

性能比较是主要话题。

关于词汇的几句话：我熟悉汇编程序的主要概念，很久以前就为更简单的系统编写过汇编程序，但现在肯定对 x86 汇编程序语义一无所知。所以直接汇编输出将没有用。伪代码更受欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T12:58:09.523

编译器可以决定将其实现为等效的`if`/`else if`语句系列，也可以决定使用[分支表](http://en.wikipedia.org/wiki/Branch_table)对其进行优化。这取决于几个参数，例如分支数和包含您检查的所有值的最小范围的大小。

**更新：**我记得在某处读到过，除非有至少 4 个或更多开关案例，否则编译器通常不会费心创建分支表；Stephane Rouberol 在下面的[信息性评论](https://stackoverflow.com/questions/12531024/switch-case-performance-in-c#comment16871131_12531073)专门记录了如何为 GCC 配置此阈值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T13:02:00.540

根据编译器中的各种启发式方法，生成的代码最终可能只是一个简单的“if else if”语句链。在某些情况下，case空间较小时，编译器可以做一个跳转表，例如：

```
switch (foo) {
case 0:
    a();
case 1:
    b();
case 2:
    c();
case 3:
    d();
default:
    e();
} 
```

可以翻译成类似的东西：

```
if (foo < 0 || foo > 3) goto label_default;
else goto internal_jump_table[foo];

internal_jump_table = { label_0, label_1, label_2, label_3 };
label_0: a();
label_1: b();
label_2: c();
label_3: d();
label_default: e(); 
```

还有其他可以做的优化。编译器可以构建 if 语句的层次结构来二进制搜索正确的值，而不是检查相等性。或者你可能有一堆适合跳转表的值和一些完成正常搜索的异常值。或者也许只是两个跳表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T13:01:07.870

共同的反应总是“取决于”。性能可能取决于平台/CPU 类型、编译器、编译器选项等。

我确实认为，在适当的情况下，`switch()`构造将具有复杂性 log(n)，其中 n 是`case:`语句的数量。这是通过“二分搜索”实现的。

[这个页面](http://www.codeproject.com/Articles/100473/Something-You-May-Not-Know-About-the-Switch-Statem)有很多细节（专注于微软的编译器，但我认为一般的想法适用）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T13:17:23.570

考虑“足够大”的数量`switch cases`（足以让编译器选择生成分支表而不是简单的*if / else if*）：

*   switch-case 将有恒定时间 (O(1)) 访问要执行的正确代码块，

*   而一系列`if/else if`语句将具有线性时间（O（*n*），其中*n*是评估（`if`语句）的条件数，因为n> =“足够大”）

**更新：**当然这些考虑没有考虑编译器优化！

# javascript - 如何在同时满足 setVersion 和 onUpgradeNeeded 的同时获取新旧版本的 IndexedDB 数据库？

> ID：12531027
> 
> 赞同：2
> 
> 时间：2012-09-21T12:55:38.253
> 
> 标签：javascript, indexeddb

已经有这样的问题和答案

[使用 Javascript 将索引添加到 IndexedDB 中预先存在的 ObjectStore](https://stackoverflow.com/questions/11532935/add-index-to-pre-existing-objectstore-in-indexeddb-using-javascript)

但我看不出该代码如何满足 setVersion 和 onUpgradeNeeded 方法的增量版本。类似于以下伪代码..

 `if (oldVersion < 1)
createObjectStore
if (oldVersion < 2)
createNewIndex
etc etc etc...`

即我知道如何为 setVersion 方法获取 oldVersion（检查 db.serVersion 是否存在，然后查询 db.version 的值），但我不知道如何为较新的 onUpgradeNeeded 方法获取旧版本。

从[http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#request-api](http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#request-api)也不是很明显:-(

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:07:10.697

那么有几种方法。首先是数据库的新版本，就是你打开db时提供的版本号。

```
var version = 2;
var request = indexeddb.open("name", version) 
```

因此，如果您使用变量，则可以这样做。但是onupgradeneeded事件也提供了eventdata

```
request.onupgradeneeded = function (e) {
     var transaction = request.result;
     var oldVersion = e.oldVersion;
     var newVersion = e.newVersion;
}; 
```

如您所见，事件数据作为参数传递给 onupgradeneeded 回调

# android - Android - 如何检测自定义形状按钮的点击区域的透明度

> ID：12531028
> 
> 赞同：2
> 
> 时间：2012-09-21T12:55:39.680
> 
> 标签：android, button, transparent, shape

我有一些不规则形状的按钮，创建为 ImageButtons。ImageButtons 的“android:src”属性是具有透明背景的 .PNG 文件。并且这些 ImageButtons 的父布局有一个自定义的背景图像，它是用“android:background”属性定义的。所以活动的背景不是透明的或者只是黑色的。

我的问题是；如何检测单击按钮是在源图像的透明区域还是在源图像的可见部分？

我尝试使用 onTouchListener 来获取事件的坐标，并根据像素的颜色做出决定；但由于背景是彩色的，我无法达到目的。

很感谢任何形式的帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T13:31:33.510

嗨，兄弟，我认为此链接可能会对您有所帮助。

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/view/View.java#View.dispatchTouchEvent%28android.view.MotionEvent%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/view/View.java#View.dispatchTouchEvent%28android.view.MotionEvent%29)

如果点不在所需区域，您需要在自定义按钮中覆盖此方法以返回 false。我建议你这样做：

```
public static class MyButton extends ImageButton {
    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        int iX = (int) event.getX();
        int iY = (int) event.getY();

        // TODO Or use a more sophisticated, pixel value-based condition
        if (!(iX >= 0 & iY >= 0 & iX < TheBitmap.getWidth() & iY < TheBitmap.getHeight())) {
            return false;
        }
        return super.dispatchTouchEvent(event)
    }
} 
```

# smartphone - 将图标快捷方式放在手机上

> ID：12531031
> 
> 赞同：1
> 
> 时间：2012-09-21T12:55:49.633
> 
> 标签：smartphone

我有一个移动网站，我的客户可以通过网络导航到该网站。我希望能够在他们的手机上添加一个图标快捷方式，这样一旦他们点击它，他们就会直接进入网站。我想知道是否有办法让这更容易？例如，当他们第一次访问移动网站时，他们单击一个按钮，该按钮后面的脚本会自动下载我的图标，将其放在他们的智能手机上，并将此图标链接到我的移动网站。有人可以建议我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:27:37.120

我只是在谷歌上搜索同样的问题，我发现了这个网站...... [http://socialmedia.biz/2012/02/21/encourage-visitors-to-save-your-site-as-a-mobile-shortcut/](http://socialmedia.biz/2012/02/21/encourage-visitors-to-save-your-site-as-a-mobile-shortcut/)

不确定这是否正是您所追求的，但听起来是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T00:10:35.867

IPhone

1.  第 1 步：确保 Safari 处于活动状态。在设置中执行此操作。
2.  第 2 步：打开 Safari 并键入您想要的网页
3.  第 3 步：一旦网站显示在屏幕上，底部中间就会出现一个选择。点击它，会出现一个显示各种图标的屏幕。
4.  第 4 步：找到底部带有加号的那个，上面写着*添加到屏幕* 选择它
5.  第 5 步：您将看到现在您只需点击新的快捷方式即可访问网页。

# opengl - opengl：为什么当我站在阴影中时阴影会消失？

> ID：12531032
> 
> 赞同：2
> 
> 时间：2012-09-21T12:55:50.013
> 
> 标签：opengl, shadow, stencil-buffer

如果我不站在阴影中，阴影效果看起来很完美。但是当我在阴影中时，阴影消失了。我不知道为什么？

这是我实现阴影效果的代码。

```
void  CastShadow(SECTOR &sec, float *lp)
{//lp is the relative position to the sec
    unsigned int    i, j, k, jj;
    unsigned int    p1, p2;
    VECTOR          v1, v2;
    float           side;

    for (i=0;i<sec.numplanes;i++)
    {
        side =sec.planes[i].planeeq.a*lp[0]+sec.planes[i].planeeq.b*lp[1]+sec.planes[i].planeeq.c*lp[2]+sec.planes[i].planeeq.d*lp[3];
        if (side>0) 
            sec.planes[i].visible = TRUE;
        else
            sec.planes[i].visible = FALSE;
    }

    glDisable(GL_LIGHTING);
    glDepthMask(GL_FALSE);
    glDepthFunc(GL_LEQUAL);
    glEnable(GL_STENCIL_TEST);
    glColorMask(0, 0, 0, 0);
    glStencilFunc(GL_ALWAYS, 1, 0xffffffff);

    // first pass, stencil operation decreases stencil value
    glFrontFace(GL_CCW);
    glStencilOp(GL_KEEP, GL_KEEP, GL_INCR);
    for (i=0; i<sec.numplanes;i++)
    {
        if (sec.planes[i].visible)
            for (j=0;j<3;j++){
                k = sec.planes[i].neigh[j];
                if ((!k) || (!sec.planes[k-1].visible))//如果以第k个点开始的邻边没有相邻平面或者相邻平面不可见
                {
                    // here we have an edge, we must draw a polygon
                    p1 = sec.planes[i].p[j]-1;//邻边的起点
                    jj = (j+1)%3;           
                    p2 = sec.planes[i].p[jj]-1;//邻边的终点

                    //calculate the length of the vector
                    v1.x = (sec.points[p1].vec.x - lp[0])*100;
                    v1.y = (sec.points[p1].vec.y - lp[1])*100;
                    v1.z = (sec.points[p1].vec.z - lp[2])*100;

                    v2.x = (sec.points[p2].vec.x - lp[0])*100;
                    v2.y = (sec.points[p2].vec.y - lp[1])*100;
                    v2.z = (sec.points[p2].vec.z - lp[2])*100;

                    glBegin(GL_TRIANGLE_STRIP);//将光源连到邻边的起点并延长,将光源连到邻边的终点的并延长,最后延长出来的梯形,画了过后模板缓冲区的值加1
                        glVertex3f(sec.points[p1].vec.x,sec.points[p1].vec.y,sec.points[p1].vec.z);
                        glVertex3f(sec.points[p1].vec.x + v1.x,sec.points[p1].vec.y + v1.y,sec.points[p1].vec.z + v1.z);
                        glVertex3f(sec.points[p2].vec.x,sec.points[p2].vec.y,sec.points[p2].vec.z);
                        glVertex3f(sec.points[p2].vec.x + v2.x,sec.points[p2].vec.y + v2.y,sec.points[p2].vec.z + v2.z);
                    glEnd();
                }
            }
    }

    // second pass, stencil operation increases stencil value
    glFrontFace(GL_CW);//这句表示画的多边形,只看到里面
    glStencilOp(GL_KEEP, GL_KEEP, GL_DECR);
    for (i=0; i<sec.numplanes;i++){
        if (sec.planes[i].visible)
            for (j=0;j<3;j++){
                k = sec.planes[i].neigh[j];
                if ((!k) || (!sec.planes[k-1].visible))//如果以第k个点开始的邻边没有相邻平面或者相邻平面不可见
                {
                    // here we have an edge, we must draw a polygon
                    p1 = sec.planes[i].p[j]-1;//邻边的起点
                    jj = (j+1)%3;           
                    p2 = sec.planes[i].p[jj]-1;//邻边的终点

                    //calculate the length of the vector
                    v1.x = (sec.points[p1].vec.x - lp[0])*100;
                    v1.y = (sec.points[p1].vec.y - lp[1])*100;
                    v1.z = (sec.points[p1].vec.z - lp[2])*100;

                    v2.x = (sec.points[p2].vec.x - lp[0])*100;
                    v2.y = (sec.points[p2].vec.y - lp[1])*100;
                    v2.z = (sec.points[p2].vec.z - lp[2])*100;

                    glBegin(GL_TRIANGLE_STRIP);//将光源连到邻边的起点并延长,将光源连到邻边的终点的并延长,最后延长出来的梯形,画了过后模板缓冲区的值加1
                        glVertex3f(sec.points[p1].vec.x,sec.points[p1].vec.y,sec.points[p1].vec.z);
                        glVertex3f(sec.points[p1].vec.x + v1.x,sec.points[p1].vec.y + v1.y,sec.points[p1].vec.z + v1.z);
                        glVertex3f(sec.points[p2].vec.x,sec.points[p2].vec.y,sec.points[p2].vec.z);
                        glVertex3f(sec.points[p2].vec.x + v2.x,sec.points[p2].vec.y + v2.y,sec.points[p2].vec.z + v2.z);
                    glEnd();
                }
            }
    }

    glFrontFace(GL_CCW);
    glColorMask(1, 1, 1, 1);

    //draw a shadowing rectangle covering the entire screen
    glColor4f(0.0f, 0.0f, 0.0f,0.4f);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glStencilFunc(GL_NOTEQUAL, 0, 0xffffffff);
    glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
    glPushMatrix();
    glLoadIdentity();
    glBegin(GL_TRIANGLE_STRIP);
        glVertex3f(-0.1f, 0.1f,-0.0010f);
        glVertex3f(-0.1f,-0.1f,-0.0010f);
        glVertex3f( 0.1f, 0.1f,-0.0010f);
        glVertex3f( 0.1f,-0.1f,-0.0010f);
    glEnd();
    glPopMatrix();
    glDisable(GL_BLEND);

    glDepthFunc(GL_LEQUAL);
    glDepthMask(GL_TRUE);
    glEnable(GL_LIGHTING);
    glDisable(GL_STENCIL_TEST);
    glShadeModel(GL_SMOOTH);

} 
```

和类 SECTOR 是这样的：

```
class SECTOR
{
public:
    int numpoints;
    int numplanes;
    vector<VERTEX> points;
    vector<PLANE> planes;
    MATERIAL material;
    bool read();
    bool loadtexture();
    bool build();
    bool plane_calc();
    void SetConnectivity();
    SECTOR& SECTOR::subdivide(long depth);
    SECTOR(string str1,string str2):modelfilename(str1),texturefilename(str2)
    {
        numpoints=0;
        numplanes=0;

    }
    SECTOR()
    {
        numpoints=0;
        numplanes=0;

    }

private:
    FILE *modelfilein,*texturefilein;
    string modelfilename,texturefilename;
    char oneline[255];
    UINT texturename;
    AUX_RGBImageRec *TextureImage;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:31:41.950

由于您已经在近剪辑平面处理了“覆盖”阴影体积，因此您可能会遇到问题，即相机位于相机后面的物体投射的阴影体积内。您可以通过移动相机使其位于阴影体积内（出现问题的位置）来测试这一点，然后旋转相机使对象位于近裁剪平面的前面。

使用“深度失败”算法来处理这种特殊情况会更容易，尽管您必须能够计算和渲染阴影体积远端的上限。[您可以在wikipedia](http://en.wikipedia.org/wiki/Shadow_volume)上大致了解阴影体积算法之间的差异。

# python - 处理正则表达式的最快方法

> ID：12531035
> 
> 赞同：0
> 
> 时间：2012-09-21T12:55:53.757
> 
> 标签：python, regex, perl, bash, sed

我在 python 中有一个脚本来处理日志文件 - 它解析值并简单地将它们与`tab`.

```
p = re.compile(
    "([0-9/]+) ([0-9]+):([0-9]+):([0-9]+) I.*"+
    "worker\\(([0-9]+)\\)(?:@([^]]*))?.*\\[([0-9]+)\\] "+
    "=RES= PS:([0-9]+) DW:([0-9]+) RT:([0-9]+) PRT:([0-9]+) IP:([^ ]*) "+
    "JOB:([^!]+)!([0-9]+) CS:([\\.0-9]+) CONV:([^ ]*) URL:[^ ]+ KEY:([^/]+)([^ ]*)"
  )

for line in sys.stdin:
  line = line.strip()
  if len(line) == 0: continue
  result = p.match(line)
      if result != None:
    print "\t".join([x if x is not None else "." for x in result.groups()]) 
```

但是，脚本的运行速度很慢，处理数据需要很长时间。

如何以更快的方式实现相同的行为？Perl/SED/PHP/Bash/...？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:48:11.287

没有看到您的输入很难知道，但看起来您的日志文件由以空格分隔且内部不包含任何空格的字段组成。如果是这样，您可以先拆分空格，将各个日志字段放入数组中。IE

```
line.split()      #Split based on whitespace 
```

或者

```
line.split(' ')   #Split based on a single space character 
```

之后，使用一些小的正则表达式甚至简单的字符串操作从您想要的字段中提取数据。

它可能会更有效率，因为大部分行处理都是通过简单的规则完成的。您不会有潜在回溯的陷阱，并且您将拥有更易读且不太可能包含错误的代码。

我不懂 Python，所以我无法写出完整的代码示例，但这是我在 Perl 中采用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:59:21.617

我正在编写 Perl，而不是 Python，但最近我使用这种技术来解析非常大的日志：

1.  将输入文件划分为多个块（例如，每个 FileLen/NumProcessors 字节）。
2.  将每个块的开始和结束调整为 \n，这样你就可以为每个工人采取完整的行。
3.  fork() 创建 NumProcessors 工作人员，每个工作人员
    从文件中读取自己的字节范围并写入自己的输出文件。
4.  如果需要，合并输出文件。

当然，你也应该努力优化正则表达式，例如少用 .* ，因为它会创建很多回溯，这很慢。但无论如何，这个正则表达式 99% 的 CPU 都会遇到瓶颈，所以在 8 个 CPU 上工作应该会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:28:54.720

在 Perl 中，可以使用预编译的正则表达式，如果您多次使用它们会更快。

[http://perldoc.perl.org/perlretut.html#Compiling-and-saving-regular-expressions](http://perldoc.perl.org/perlretut.html#Compiling-and-saving-regular-expressions)

“qr// 运算符出现在 perl 5.005 中。它编译正则表达式，但不应用它。”

如果数据很大，那么值得通过将数据拆分为多个片段来并行处理它。CPAN 中有几个模块使这更容易。

# templates - 在 Joomla K2 子模板中使用模块

> ID：12531036
> 
> 赞同：1
> 
> 时间：2012-09-21T12:55:53.683
> 
> 标签：templates, joomla, joomla-k2

我有一个与我对 Joomla\K2 的了解很少有关的快速问题。我正在使用子模板为不同的页面创建不同的布局。当我在子模板上声明模块位置时：

```
<jdoc:include type="modules" name="position-7" /> 
```

什么都没发生。我已经为主模板文件尝试了相同的代码并且它有效，但似乎它没有被解析为子模板。我对吗？那么如何将模块包含到子模板中呢？

在此先感谢，迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:56:29.403

jdoc 标签仅适用于 joomla 核心模板。如果您想在您的 k2 子模板中加载特定位置的模块，请在该子模板中您想要的位置编写以下代码。

```
$module = JModuleHelper::getModules('xxxx');
// xxxx is any virtual position, no need to create it anywhere.
echo JModuleHelper::renderModule($module[0]); 
```

将 xxxx 替换为您想要的职位名称。

# jquery - 通过 XHR 动态创建的表不完整显示

> ID：12531047
> 
> 赞同：0
> 
> 时间：2012-09-21T12:56:36.690
> 
> 标签：jquery, html, ajax

我正在使用 jquery 加载异步 HTML 表并将其附加到现有的 div 元素上。这很好用！

但是如果 HTML 表格的内容非常大，那么我的表格会被浏览器窗口的长度截断，我无法向下滚动到表格的末尾。

有谁知道我该如何解决这个问题。

非常感谢塔索

```
var root=document.getElementById('tabPrNr');

var tab=document.createElement('table');
tab.className="mytable";
var tbo=document.createElement('tbody');
var row, cell;

for(var i=0;i<100;i++){
    row=document.createElement('tr');
     for(var j=0;j<5;j++){
      cell=document.createElement('td');
      cell.appendChild(document.createTextNode(i+' '+j))
      row.appendChild(cell);
     }
tbo.appendChild(row);
}
tab.appendChild(tbo);
root.appendChild(tab); 
```

# jquery - Ajax 数据丢失且无法检索

> ID：12531051
> 
> 赞同：0
> 
> 时间：2012-09-21T12:56:59.980
> 
> 标签：jquery, ajax

我使用 GET 发送 Ajax 请求。参数之一 (to) 丢失并且无法使用 $_GET["to"] 在被调用文件上检索。

现在有什么问题？一些文件可以很好地使用这个功能！

```
function SendEmail(To, Subject, Message) 
{
var URL = 'mail-service.php?&msg=' + escape(Message) + 'to=' + escape(To) + '&subject=' + escape(Subject);
$.ajax({
    url: URL,
    type: 'GET',
    success: function (res) {
        alert("Message Sent to : " + res);
    }
});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:00:31.673

检查你的ajax url获取参数我想你忘记添加`&`

```
var URL = 'mail-service.php?&msg=' + escape(Message) + '&to=' + escape(To) + '&subject=' + escape(Subject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:00:19.760

不要使用 URL 参数，使用该`data:`字段来`$.ajax`：

```
$.ajax({
    url: URL,
    type: 'GET',
    data: {
        msg: Message,
        to: To,
        subject: Subject
    },
    success: function (res) {
        alert("Message Sent to : " + res);
    }
}); 
```

这将自动确保所有参数都正确转义和编码以发布到 PHP 脚本。

FWIW，使用`GET`似乎有点奇怪 - 我希望使用`POST`.

# mysql - MySQL：获取特定时区的本地时间

> ID：12531052
> 
> 赞同：10
> 
> 时间：2012-09-21T12:57:01.973
> 
> 标签：mysql, timezone

这是表格的简单版本`users`：

```
+--------------+-------------------+
|      id      |     timezone      |
+--------------+-------------------+
|       1      | 'Europe/Helsinki' |
|       2      |  'Europe/Paris'   |
+--------------+-------------------+ 
```

我想知道每个用户的当地时间是什么（取决于他们的时区），以便我可以选择例如下午 4 点的用户。

我正在使用 LAMP 堆栈，但我想只使用 MySQL 来做到这一点（不选择所有用户并在 PHP 循环中运行它们）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T13:54:08.017

为此使用 CONVERT_TZ：http: [//dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz)

```
SELECT * FROM users WHERE hour(CONVERT_TZ(now(), server_tz, `timezone`))=16 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T13:17:25.223

您可以使用以下命令更改时区`set time_zone`：

```
mysql> set time_zone='Europe/Helsinki';
mysql> select now();
2012-09-21 16:15:06
mysql> set time_zone='Europe/Paris';
mysql> select now();
2012-09-21 15:15:40 
```

例如，使用它，您可以定义一个返回用户时区当前时间的函数：

```
create function current_time_in_tz(tz varchar(40)) returns datetime 
begin
set @old_tz = @@session.time_zone;
set time_zone=tz;
set @now = now();
set time_zone=@old_tz;
return @now;
end

select id, current_time_in_tz(timezone) from users; 
```

请注意，DATE、TIME 和 DATETIME 值不依赖于时区，因此查询时不会自动调整这些类型的列中的值。TIMESTAMP 值被调整：

```
mysql> create temporary table tbl (dt datetime, ts timestamp);
mysql> insert into tbl values (now(),now());
mysql> select * from tbl;
+---------------------+---------------------+
| dt                  | ts                  |
+---------------------+---------------------+
| 2012-09-21 15:21:56 | 2012-09-21 15:21:56 |
+---------------------+---------------------+
mysql> set time_zone='Europe/Helsinki';
mysql> select * from tbl;
+---------------------+---------------------+
| dt                  | ts                  |
+---------------------+---------------------+
| 2012-09-21 15:21:56 | 2012-09-21 16:21:56 |
+---------------------+---------------------+ 
```

如果`set time_zone`失败并出现此错误：

```
ERROR 1298 (HY000): Unknown or incorrect time zone: 'Europe/Helsinki' 
```

您需要使用如下命令将时区信息加载到 mysql 中：

```
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql 
```

有关更多信息，请参阅[http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-16T16:35:20.700

比 Nin 的答案更通用（不取决于服务器的时区）的解决方案是：

```
SELECT * FROM users WHERE hour( CONVERT_TZ(UTC_TIMESTAMP(), 'UTC', timezone) )=16 
```

如果 MySQL 有一个像 NOW_TZ(timezone) 这样的函数，那就太好了。

# derby - 检索存储在声纳 Derby 中的项目特定信息

> ID：12531053
> 
> 赞同：0
> 
> 时间：2012-09-21T12:57:02.287
> 
> 标签：derby, sonarqube

请帮助我访问存储在我的 Sonar 默认服务器 derby 中的项目特定信息。因为对它的了解很少。

我要检索的内容很简单：就是每个声纳主页（http://localhost:9000/）上显示的信息，即项目名称、规则合规指标、代码覆盖率指标和建造时间...

您的指导将是可观的..

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:59:19.150

您不应尝试直接从数据库中检索信息，因为数据库不是 API，可能随时更改，恕不另行通知。

如果您想检索 Sonar 存储的信息，请改用 Sonar [Web Service API](http://docs.codehaus.org/display/SONAR/Web+Service+API)。

# ffmpeg - 增加 ffmpeg 的比特率容差以创建电影的屏幕截图

> ID：12531056
> 
> 赞同：3
> 
> 时间：2012-09-21T12:57:13.523
> 
> 标签：ffmpeg

`bitrate tolerance too small for bitrate`到目前为止，我收到错误没有问题。我知道有几个开关可以增加它，但没有任何效果。

```
ffmpeg -y -r 1/30 -b:v 999999k -bt 999999k -maxrate 999999k -i in.flv out%03d.jpg 
```

该命令行的来源[直接来自 ffmpeg](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20thumbnail%20image%20every%20X%20seconds%20of%20the%20video)。但这会崩溃：

```
ffmpeg version N-44123-g5d55830 Copyright (c) 2000-2012 the FFmpeg developers
  built on Sep  2 2012 20:23:29 with gcc 4.7.1 (GCC)
  [...]
Input #0, flv, from 'in.flv':
  Duration: 00:05:00.13, start: 0.000000, bitrate: 259 kb/s
    Stream #0:0: Video: flv1, yuv420p, 320x240, 1k tbr, 1k tbn, 1k tbc
    Stream #0:1: Audio: nellymoser, 22050 Hz, mono, s16
[mjpeg @ 04356860] bitrate tolerance too small for bitrate
[mjpeg @ 04317540] ff_frame_thread_encoder_init failed
Output #0, image2, to 'out%03d.jpg':
    Stream #0:0: Video: mjpeg, yuvj420p, 320x240, q=2-31, 200 kb/s, 90k tbn, 0.03 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (flv -> mjpeg)
Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

一些想法我做错了什么？

# linq-to-entities - 如果 DbContext 包装在接口中，则无法翻译 LINQ 查询

> ID：12531057
> 
> 赞同：1
> 
> 时间：2012-09-21T12:57:14.077
> 
> 标签：linq-to-entities, entity-framework-4.3, dbcontext

我有一个讨厌的问题，我真的无法理解。

基本上我有一个定义如下的 DbContext

```
public interface ISettingsContext : IDisposable 
{
    IDbSet<Site> Sites { get; }
    IDbSet<SettingGroup> Groups { get; }
    IDbSet<SettingProperty> Properties { get; }

    int SaveChanges();
}

public class SettingsContext : DbContext, ISettingsContext
{
    public SettingsContext(string connectionStringName) : base(connectionStringName)
    {
        Sites = Set<Site>();
        Groups = Set<SettingGroup>();
        Properties = Set<SettingProperty>();
    }

    public SettingsContext() : this("DefaultTestConnectionString") { }

    public IDbSet<Site> Sites { get; private set; }

    public IDbSet<SettingGroup> Groups { get; private set; }

    public IDbSet<SettingProperty> Properties { get; private set; }

    #region Model Creation

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        MapSite(modelBuilder.Entity<Site>());
        MapGroup(modelBuilder.Entity<SettingGroup>());
        MapProperty(modelBuilder.Entity<SettingProperty>());
        MapValue(modelBuilder.Entity<SiteSettingValue>());
        MapXmlValue(modelBuilder.ComplexType<XmlValue>());
        MapXmlType(modelBuilder.ComplexType<XmlTypeDescriptor>());
    }

    private void MapXmlType(ComplexTypeConfiguration<XmlTypeDescriptor> complexType)
    {
        complexType.Ignore(t => t.Type);
    }

    private void MapXmlValue(ComplexTypeConfiguration<XmlValue> complexType)
    {
        complexType.Ignore(t => t.Value);
    }

    private void MapValue(EntityTypeConfiguration<SiteSettingValue> entity)
    {
        entity.HasKey(k => new { k.PropertyId, k.SiteId }).ToTable("SiteValues", "settings");

        entity.Property(k => k.PropertyId).HasColumnName("FKPropertyID");

        entity.Property(k => k.SiteId).HasColumnName("FKSiteID");

        entity.Property(k => k.Value.RawData).HasColumnName("Value").IsMaxLength();

        entity.HasRequired(k => k.Site).WithMany(s => s.Settings).HasForeignKey(k => k.SiteId);

        entity.HasRequired(k => k.Property).WithMany().HasForeignKey(k => k.PropertyId);
    }

    private void MapProperty(EntityTypeConfiguration<SettingProperty> entity)
    {
        entity.HasKey(k => k.Id).ToTable("Properties", "settings");

        entity.Property(k => k.Id);

        entity.Property(k => k.Name);

        entity.Property(k => k.GroupId).HasColumnName("FKGroupID");

        entity.Property(k => k.PropertyDescriptor.RawData).HasColumnName("TypeDescriptor").IsMaxLength();

        entity.Property(k => k.DefaultValue.RawData).HasColumnName("DefaultValue").IsMaxLength();

        entity.HasRequired(k => k.Group).WithMany(k => k.Properties).HasForeignKey(k => k.GroupId);
    }

    private void MapGroup(EntityTypeConfiguration<SettingGroup> entity)
    {
        entity.HasKey(k => k.Id).ToTable("Groups", "settings");

        entity.Property(k => k.Id);

        entity.Property(k => k.Name);

        entity.HasMany(k => k.Properties).WithRequired(k => k.Group).HasForeignKey(k => k.GroupId);
    }

    private void MapSite(EntityTypeConfiguration<Site> entity)
    {
        entity.HasKey(k => k.Id).ToTable("Sites", "site");

        entity.Property(k => k.Id);

        entity.Property(k => k.Domain);
    }

    #endregion
} 
```

由于我正在进行一些测试，我开始在这个上下文中工作，而不关心 IoC 和 DI，所以我直接针对具体类本身工作。

所以我写了这个查询：

```
public class SiteSettingsLoader : ILoader<SiteSettingsModel, int> {
...
var qSiteValues = from site in context.Sites
                  let settings = site.Settings
                  select new
                  {
                          SiteId = site.Id,
                          Settings = from value in settings
                                     join property in context.Properties on value.PropertyId equals property.Id into props
                                     from property in props
                                     select new
                                     {
                                             PropertyId = property.Id,
                                             Name = property.Name,
                                             GroupId = property.GroupId,
                                             Value = value.Value,
                                             CanBeInherited = property.CanBeInherited
                                     }
                  }; 
```

一切都很好。当我开始将上下文作为它实现的接口而不是它的真实类型传递时，问题就开始了。

```
using (ISettingsContext context = new SettingsContext())
using (SiteSettingsLoader loader = new SiteSettingsLoader(context))
{
    SiteSettingsStore store = new SiteSettingsStore(loader);
    dynamic settings = store.GetItem(1);
} 
```

这是错误

> 无法创建“Settings.Entities.SettingProperty”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

这怎么可能？微软是否在反射方面玩了一些肮脏的把戏？

**编辑**： XmlValue 和 XmlTypeDescriptor 都是以下接口的实现，我们使用它来自动将 XML 字段的内容读入适当的对象。

```
public interface IXmlProperty
{
    string RawData { get; set; }
    void Load(string xml);
    XDocument ToXml();
} 
```

基本上我们将字段的内容映射到 RawData 属性；在它的 setter 和 getter 中，我们解析/生成包含数据库 XML 的字符串。我知道这是一个丑陋的把戏，但它有效并完成了工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:30:55.920

基于[这个](https://stackoverflow.com/a/8935255/270591)对一个非常相似的问题的回答，问题的原因似乎是 EF 不将自定义接口类型的属性理解为可查询的表达式，并将`context.Properties`集合视为`SettingsProperty`您想要传递的类型的常量对象的集合。查询。EF 不支持使用非原始常量对象，这会导致您的异常。

基本上，您需要使用 EF 知道如何转换为 SQL 片段以合并到整个查询中的（编译时）类型。那将是一个`DbContext.DbSet<T>`本身或一个`IQueryable<T>`：

```
IQueryable<SettingProperty> properties = context.Properties;
var qSiteValues = from site in context.Sites
                  let settings = site.Settings
                  select new
                  {
                      SiteId = site.Id,
                      Settings = from value in settings
                                 join property in properties
                                    on value.PropertyId equals property.Id
                                    into props
                                 from property in props
                                 select new
                                 {
                                     PropertyId = property.Id,
                                     Name = property.Name,
                                     GroupId = property.GroupId,
                                     Value = value.Value,
                                     CanBeInherited = property.CanBeInherited
                                 }
              }; 
```

可能有必要使用相同的技巧，`context.Sites`但我不确定。

（如果上述作品不要忘记支持 Eranga 的链接答案，因为它太棒了。）

# javascript - 在javascript中使用dojo的简单时钟

> ID：12531058
> 
> 赞同：0
> 
> 时间：2012-09-21T12:57:15.823
> 
> 标签：javascript, time, dojo

我需要一个没有任何用户界面的简单时钟应用程序，就像这样 >

```
Time: 15.06.2012 18:34:21 
```

它应该实时变化。我的意思是第二个应该是`15.06.2012 18:34:22` 我应该使用`timer`吗？或者是什么？

我正在使用道场 1.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:45:49.023

您需要使用 setInterval 函数：

HTML：

```
<span id="time">TIME:</span> 
```

Javascript：

```
var elem = document.getElementById("time");
setInterval(function(){
    var time = (new Date()).toLocaleString();
    elem.innerHTML = "TIME: " +time;              
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:00:16.797

就像@Andrei 说的：http: [//jsfiddle.net/8DnVU/](http://jsfiddle.net/8DnVU/)

# wifi - 从单个物理 Wi Fi 适配器模拟多个 MAC

> ID：12531059
> 
> 赞同：1
> 
> 时间：2012-09-21T12:57:19.010
> 
> 标签：wifi, simulation, wireless

对于一个模拟项目，我试图从一个物理适配器模拟多个 MAC 地址。我基本上想要的是为两个虚拟 MAC 地址发送原始 WiFi 帧（包括数据和管理），以便它们都与无线 AP 相关联。对于 AP，它们应该看起来好像两个不同的无线设备/适配器（具有不同的 MAC 地址）与其关联并正在发送流量。我只是想确认这是否可行。我过去用有线 LAN 实现了同样的事情，但想确认 WiFi 也是如此。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:06:30.997

是的，这是可行的。确保虚拟 MAC 地址不是随机的，而是采用可接受的格式 - [http://en.wikipedia.org/wiki/MAC_address](http://en.wikipedia.org/wiki/MAC_address)，否则 AP 可能会拒绝连接尝试。

# ios - 如何初始化自定义视图（控制器），以便它以编程方式和在 Interface Builder 中工作？

> ID：12531061
> 
> 赞同：3
> 
> 时间：2012-09-21T12:57:24.030
> 
> 标签：ios, uitableview, uiview, uiviewcontroller, interface-builder

假设您实现了一个自定义表格视图和一个自定义视图控制器（它主要模仿`UITableViewController`s 的行为，但是当以编程方式初始化时，...

```
@interface Foo : MyCustomTableViewController ...

Foo *foo = [[Foo alloc] init]; 
```

...`foo.view`是一种类，`MyCustomTableView`而不是`UITableView`：

```
// MyCustomTableView.h

@protocol MyTableViewDelegate <NSObject, UITableViewDelegate>

// ...

@end

@protocol MyTableViewDataSource <NSObject, UITableViewDataSource>

// ...

@end

@interface MyCustomTableView : UITableView

// ...

@end

// MyCustomTableViewController.h

@interface MyCustomTableViewController : UIViewController

// ...

@end 
```

您应该如何`init`以正确的顺序/方式实现/覆盖方法，以便您可以通过以编程方式进行子类化或通过在 Interface Builder 中将自定义类类型设置为任何自定义 nib 文件来创建和使用`MyCustomTableView`这两种方法的实例？`MyCustomTableViewController``MyCustomTableView`

需要注意的是，这正是目前`UITableView`（主要是 UIKit）的工作方式：开发人员可以通过编程方式或从 nib 创建和使用，无论是`File owner`主`view`视图还是更复杂层次结构中的某个子视图，只需分配数据源或委托，你很高兴......

到目前为止，如果您子类化，我设法让它工作，我将在`MyCustomTableViewController`其中创建一个实例`MyCustomTableView`并将其分配给方法；但无法弄清楚, , , , 或其他任何操作方式。我迷失在生命周期链中，每次都以黑色视图/屏幕结束。`self.view``loadView``initWithNibName:bundle:``initWithCoder:``awakeFromNib``awakeAfterUsingCoder:`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T07:55:10.227

UITableViewController 如何加载它的表，无论是否连接到界面构建器，这都是一个真正的谜，但是我想出了一个很好的方法来模拟这种行为。

我想用一个包含 MKMapView 的可重用视图控制器来实现这一点，我想出了一个技巧，通过检查视图的背景颜色来实现它。

这很难的原因是因为任何对 self.view 的调用都会导致情节提要加载或加载默认的 UIView（如果不存在）。如果用户真的没有设置视图，则无法确定这两个步骤之间是否存在。所以诀窍是来自故事板的那个有颜色，默认的颜色是零。

所以现在我有一个 mapViewController 可以在代码或情节提要中使用，甚至不关心是否设置了地图。很酷。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //magic to work without a view set in the storboard or in code.
    //check if a view has been set in the storyboard, like what UITableViewController does.
    //check if don't have a map view
    if(![self.view isKindOfClass:[MKMapView class]]){
        //check if the default view was loaded. Default view always has no background color.
        if([self.view isKindOfClass:[UIView class]] && !self.view.backgroundColor){
            //switch it for a map view
            self.view = [[MKMapView alloc] initWithFrame:CGRectZero];
            self.mapView.delegate = self;
        }else{
            [NSException raise:@"MapViewController didn't find a map view" format:@"Found a %@", self.view.class];
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T15:18:18.347

这就是我解决自己问题的方法：

```
- (void)loadView
{
    if (self.nibName) {
        // although docs states "Your custom implementation of this method should not call super.", I am doing it instead of loading from nib manually, because I am too lazy ;-)
        [super loadView];
    }
    else {
        self.view = // ... whatever UIView you'd like to create
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T14:47:54.527

我在编写此类类时使用的策略是尽可能晚地推迟我的自定义初始化代码。如果我可以等待`viewDidLoad`或`viewWillAppear`进行任何设置，并且不编写任何自定义代码或类似方法`init`，`initWithNibName:bundle:`我将知道我的对象已像父类一样被初始化，无论它以何种方式实例化。我经常设法编写我的类而不重写这些`init`方法。

如果我发现我需要将初始化代码放入`init`方法中，我的策略是只编写一个版本的初始化代码，将其放入单独的方法中，然后覆盖所有的 init 方法。被覆盖的方法调用自己的超类版本，检查是否成功，然后调用我的内部初始化方法。

如果这些策略失败了，那么这个类的对象的实例化方式真的会有所不同，我将为各种方法中的每一个编写自定义`init`方法。

# database - 应用程序数据库中的印象笔记用户

> ID：12531062
> 
> 赞同：3
> 
> 时间：2012-09-21T12:57:26.097
> 
> 标签：database, authentication, membership, evernote

在您的应用程序数据库中保留（或不保留）印象笔记用户的最佳实践或常用方法是什么？

我应该创建自己的会员系统并创建与 Evernote 帐户的连接吗？

我应该将 Evernote 用户数据（或仅部分数据）存储在我自己的应用程序中并让用户仅使用 Evernote 登录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:29:21.753

**摘要：**您必须保护他们的数据，但*如何*保护数据取决于您自己。使用整数`edam_userId`来识别数据。

我认为[API 许可协议](http://dev.evernote.com/documentation/reference/api_license.php)涵盖以下条款的保护：

*您同意，在使用 API 时，您不会直接或间接采取或允许他人采取以下任何行动：... 1.8.4 规避或修改 Evernote 或 API 采用的任何密钥或其他安全机制；*

如果您缓存人们的数据并且您的基于服务器的应用程序缺乏安全性以防止人们查看其他人的数据，那么我认为您显然违反了该条款。我觉得写的很优雅！

将其与责任条款 1.2 结合起来

*您对使用您的密钥进行的所有活动负全部责任，无论此类活动是由您还是第三方进行。*

因此，如果您不保护某人的缓存数据并且其他用户能够获取它，那么您将承担明确的责任。

在澄清了您有义务（如您所料）保护人们数据的问题之后，问题是您如何存储它？

第 4.3 条非常直接地涵盖了标识符，尽管它有点过时了，因为我们都被迫使用 oAuth -**没有任何**密码输入到任何其他 web 视图中。但是，移动或桌面客户端应用程序*必须为用户提供注销机制，该机制必须从应用程序及其持久存储中完全删除用户名和密码。*

对于 Web 应用程序，您甚至无法保存用户名：*如果您的应用程序在多用户服务器上作为 Internet 服务运行，则不得要求、查看、存储或缓存 Evernote 用户的登录名或密码帐户。*

好消息是，您可以依赖在`edam_userId`oAuth 令牌凭据响应中返回给您的值，如此[处](http://dev.evernote.com/documentation/cloud/chapters/Authentication.php)所述。

当您查看[Data Model](http://dev.evernote.com/documentation/cloud/chapters/Data_structure.php)时，您可以看到 User 下的唯一 id 并进入[User struct](http://dev.evernote.com/documentation/reference/Types.html#Struct_User)，看到令人放心的定义*帐户的唯一数字标识符，在帐户的整个生命周期内都不会改变。*

考虑后果，因为在您登录服务之前您无法获取用户 ID，如果您想为人们提供本地登录，则必须将您的本地凭据链接到用户 ID。如果他们必须输入两次用户名但无能为力，这可能会让一些人感到厌烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:27:18.427

您可以允许用户通过 OAuth 登录。这是有关该过程如何工作的[指南](http://dev.evernote.com/documentation/cloud/chapters/Authentication.php)。

但是您可能还希望在数据库中存储最少量的用户数据，至少是一个唯一标识符，这样您就可以执行诸如创建用户与其笔记本和标签之间的关系之类的操作。有关这些关系，请参阅 Evernote[数据模型](http://dev.evernote.com/documentation/cloud/chapters/Data_structure.php)。如果您使用的是 Rails，这也将帮助您利用 Rails 约定。

# jsp - 如何在spring框架中定义一个常量String并在JSP中使用？

> ID：12531064
> 
> 赞同：0
> 
> 时间：2012-09-21T12:57:37.987
> 
> 标签：jsp, spring-mvc

我想检查是否在下拉菜单中选择了特定项目。假设我的 JSP 中有这样的内容：

```
<sf:select path="xItem" >
    <sf:option value="val1" />
    <sf:option value="val2" />
</sf:select> 
```

在我相应的java bean中，我想将其检查为

```
if (xItem.equals("val1")) xItem = doSomething(); 
```

但是，如果我将“val1”定义为常量，即 ，`final static String mytext="val1"`并将我的 jsp 文件更改为`<sf:option value="${MyClass.mytext}" />`，Spring 会抱怨这`mytext`不是 MyClass 的属性。反正有没有将此文本定义为常量并在 JSP 和相应的 Java 类中引用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:05:29.200

该`${MyClass.mytext}`表达式适用于 bean 和属性，特别是它意味着服务器期望找到一个保存在当前上下文中的`MyClass`bean 并在该 bean 上调用一个名为`getMyText`（它是 a [`jspContext.FindAttribute`](http://docs.oracle.com/javaee/1.4/api/javax/servlet/jsp/JspContext.html#findAttribute%28java.lang.String%29)）的 getter，这不是这里的情况，因为你有一个类的静态成员。

以下是我想到的一些解决方法：

*   使用 scriptlet 并引用静态成员（如果您可以在 JSP 中使用 scriptlet）；
*   将值保存在[模型](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/ui/Model.html)中某个键下的控制器中，并通过该键在 JSP 中引用它；
*   定义一个自定义标签，给定一个类名和静态成员调用它并将它放在页面范围内的某个键下，您可以从那里使用 if（请参阅本文中的示例：[无脚本 JSP 页面：常量常量惊吓](http://www.javaranch.com/journal/200601/Journal200601.jsp#a3)）；
*   定义一个返回常量值的 EL 函数（请参阅同一篇文章[Scriptless JSP Pages: The Constant Constants Consternation](http://www.javaranch.com/journal/200601/Journal200601.jsp#a3)中的示例，滚动到它的末尾）。

如果您经常在 JSP 中引用常量，或者在控制器中的某个模型键下设置它（如果它是一次性使用），那么我个人会定义一个 EL 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:04:58.573

它不允许，因为它需要 getter setter 属性和 final 静态变量你不能有 setter，所以在这种情况下你必须删除 final static。

# objective-c - Objective C - 这个方法和代码行的含义？

> ID：12531066
> 
> 赞同：0
> 
> 时间：2012-09-21T12:57:42.773
> 
> 标签：objective-c, ios, objective-c-blocks, semantics

第一的，

```
 + (void)allOpenRequestsWithBlock:(void (^)(NSArray *requests, NSError *error))block 
```

有人可以深入解释这种方法的语义是什么吗？什么是加号与减号。
有人可以解释 (void (^)(NSArray *requests, NSError *error)) 块吗？这是一个保留请求和错误的空块？

这行代码：

```
 [[AFChangeRequestAPIClient sharedClient] getPath:@"example.json" parameters:[NSDictionary      dictionaryWithObject:@"false" forKey:@"include_entities"] success:^(AFHTTPRequestOperation *operation, id JSON) 
```

这是调用具有上述参数的get Path方法吗？字典仅通过 1 个键/值 include_entities/false 传递？成功块部分是什么意思？是返回值吗？

我基本上是在尝试理解 AFNetworking 框架，它似乎使用了我不熟悉的语法。

谢谢！艾伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:09:30.000

这是一个非常广泛的问题。您不应期望仅通过示例来学习一门语言，而应先阅读Apple 文档中的[Objective-C 语言简介，然后再继续学习。](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)通过提出问题，您似乎试图同时理解所有内容，而您似乎并不了解语言本身的基础知识，这不是学习语言的好方法。

无论如何要回答您的问题：

*   该`+`符号表示它是一个类方法。该`-`符号表示它是一个实例方法。
*   方法的语义`- (returntype)methodName:(type1)param1 nameContinuation:(type2)param2 ;`在`-`这里表示它是一个实例方法，返回类型是`returntype`，该方法具有名称`methodName:nameContinuation:`并具有两个参数，一个`type1`由变量标识`param1`的类型和一个由变量`type2`标识的类型`param2`
*   `+ (void)allOpenRequestsWithBlock:(void (^)(NSArray *requests, NSError *error))block` 那么，在合成器中，`void(^)(NSArray* requests, NSError* error)`是第一个参数的类型。这种类型描述了一个**Objective-C 块**，它与函数指针非常相似，但它允许闭包（和变量捕获）。有关块的更多信息，请再次[阅读专门的 Apple 文档](http://developer.apple.com/library/ios/#featuredarticles/Short_Practical_Guide_Blocks/_index.html)。

* * *

对于第二个问题，方法调用不完整，错过了块体。

```
[[AFChangeRequestAPIClient sharedClient] getPath:@"example.json"
                                      parameters:[NSDictionary dictionaryWithObject:@"false" forKey:@"include_entities"]
                                         success:^(AFHTTPRequestOperation *operation, id JSON)
 {
   /* block body here */
 }]; 
```

这会调用`getPath:parameters:success:`返回的对象上的方法`[AFChangeRequestAPIClient sharedClient]`（因此这与上面的方法完全不同）。这个方法传递了三个参数，第一个是`@"example.json"`，第二个是`NSDictionary`只包含一个键/值对，最后一个是 Objetive-C 块。该块分别采用两个参数类型`AFHTTPRequestOperation`和`id`。

*同样，在理解基础知识（例如实例与类方法、方法的基本语言语法等）之前，您似乎真的试图学得太快并使用高级的东西（例如块及其语法）。花点时间学习东西，你不是一天就能盖房子的，更重要的是你在屋顶之前打好地基；）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:10:41.213

加号表示类级别的方法，减号表示实例方法。

块类似于函数。该块有两个参数（an`NSArray*`和 an `NSError*`）和 'returns' `void`。

对于第二个问题，我不能完全回答你。

我不知道那个框架，你发布了一行代码，但是那行缺少一些东西（至少块体不存在）。

# java - 自动管理 Java 对象

> ID：12531069
> 
> 赞同：2
> 
> 时间：2012-09-21T12:57:54.890
> 
> 标签：java, object

我对 Java 还有些陌生，我对应该如何使用对象感到很困惑。我知道

```
object object = new object(); 
```

但这些必须手动访问。

说我想创建一个粒子效果。屏幕中央出现小白点，并以随机角度缓慢移动到屏幕边缘。当他们靠近时，他们走得更快。最后，如果它们超出视图区域，它们将被移除。

如果我想对对象执行此操作，我需要能够：

*   自动制作对象
*   从每个对象（它们的 X 和 Y 坐标）收集数据，以便可以渲染它们
*   让对象每帧更新一次，以便提高速度
*   当它们超出范围时销毁对象。

我将如何自动制造/销毁对象，并从所有对象中获取数据，而与存在多少对象无关？现在，我的游戏（嗯，我只用 Java 制作过 1 个）仅限于使用数组和一种元胞自动机，但这不适用于更大的游戏。

这可能以前被问过，或者可能有关于这个的教程，但我设法找到的只是手动制作对象。我可能正在寻找错误的东西，如果是这种情况，请见谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:03:28.950

在java中你不会破坏对象。有垃圾收集器，它会销毁未使用的对象。将空值分配给保存对象的变量就足够了。

您可以通过 System.gc() 手动调用垃圾收集器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:19:07.943

## 创建对象

我不确定“自动创建对象”是什么意思，但这就是构造函数的用途。当您定义构造函数时，您可以在其中添加各种实现和初始化细节，这些细节将完全按照您希望的方式创建变量。请参阅[“为您的类提供构造函数”](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)。所以说你有道理...

```
public Point(int x, int y) {
    this.xPos = x;
    this.yPos = y;
    this.color = Color.BLUE;
    this.size = Constants.DEFAULT_POINT_SIZE;
    // ... etc.
} 
```

## 从对象收集数据

在这些类中获取和设置信息将通过 getter 和 setter（也称为[accessors 和 mutators](http://docs.oracle.com/javaee/6/tutorial/doc/gjbbp.html)）来实现。

```
public int getX() {
    return x;
}

public void setX(int x) {
    this.xPos = x;
} 
```

要从存在的所有对象中收集数据，无论有多少，只需将它们全部添加到`List`某种对象中即可。您甚至可以将它们添加到`private static ArrayList<T>`您的构造函数中并`ArrayList<T>`静态访问您的信息，而无需程序的另一部分“知道”有多少。

## 增量 GUI 更改

有几种方法可以实现逐帧更改，但我更喜欢使用 a`Timer`和 an `ActionListener`。这允许您设置帧速率，并在`public void actionPerformed(ActionEvent)`方法中执行您需要的操作。这对于初学者来说有些复杂，因此您可能需要做大量的阅读和测试。请参阅[“如何编写动作侦听器”](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)和[“如何使用 Swing 计时器”](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来帮助您入门。

## 销毁对象

Java 中没有析构函数，就像 C++ 之类的语言中那样。相反，有一个[*垃圾收集器*](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html)会定期（偶尔）运行，它会销毁它认为不再有指向它们的引用的所有对象。因此，如果您希望垃圾收集器在对象超出范围时拾取它们，只需将对它们的所有引用分配给**null**。虽然这不会立即销毁对象，但它确保垃圾收集器在下一次运行时将它们“标记”。

如前所述，`System.gc()`是一种“调用”垃圾收集器的方法。但是，您不应该假设调用它会*强制*垃圾收集器运行。在 API 中，它说这个调用“建议”系统应该运行垃圾收集器。最终，它是不可靠的，垃圾收集通常超出了您的控制范围。

从[API](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#gc%28%29)：

> 调用 gc 方法表明 Java 虚拟机花费精力回收未使用的对象，以使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，Java 虚拟机已尽最大努力从所有丢弃的对象中回收空间。

此外，作为一个侧面的选择，请确保在创建对象时将类名大写。:)

```
Object object = new Object(); 
```

* * *

**对于 OP 的特定目的：**如果您担心“绘制所有存在的东西”的游戏环境（因此您想*立即*销毁对象以确保游戏正确运行），请考虑使用`List`or`Set`并使用你想画的东西，然后在它们离开屏幕时将它们移除。

* * *

**参考：**

*   [http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)
*   [http://docs.oracle.com/javaee/6/tutorial/doc/gjbbp.html](http://docs.oracle.com/javaee/6/tutorial/doc/gjbbp.html)
*   [http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)
*   [http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)
*   [http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.htm](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.htm)
*   [http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#gc()](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#gc())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:21:09.393

> 自动制作对象

**答：**您总是需要`new` `newInstance`在 java 中创建对象。这将基于算法。只是举个例子。您可以有一个二维数组来保存对象，并且基于 X、Y 位置，您可以将对象放入该数组中并使用 Random 类来生成 X、Y 位置。

例如

```
 //Initialize pallete
    Point [][] pallete = Point int [800][600];
    //Generate Objects

    Random random = new Random();
    int x = random.nextInt(800);
    int y = random. nextInt(600);

    Point point = new Point(x,y);

    //Put inside Pallete

    pallete[point.x][point.y] = point; 
```

> 从每个对象（它们的 X 和 Y 坐标）收集数据，以便可以渲染它们

**答：**如上所示，为您想要的对象声明属性，就像我为 Point [x, y] 声明的那样

> 让对象每帧更新一次，以便提高速度

**答：**使用循环或定时器等提高生成速度。

> 当它们超出范围时销毁对象。

**回答：**只需将其初始化为 null，它就会被 GC 处理。如果您遇到 OutOfMemory 问题，那么有几种方法可以解决它，但除非有需要，否则您不应该专注于此。

```
 point = null;//This is it. 
```

# java - Jersey 的路径匹配“沙盒”或空字符串

> ID：12531076
> 
> 赞同：4
> 
> 时间：2012-09-21T12:58:16.200
> 
> 标签：java, regex, path, jersey, jax-rs

我在使用 Jersey @Path 时遇到问题，我希望为我的系统实现沙箱环境。基本上通过给定的 url 禁用或启用沙盒模式，如下所示：

沙盒网站

> 获取：../MyProject/沙盒/数据

常规站点

> 获取：../MyProject/数据

我想去哪里使用正则表达式连接到我的项目根类的路径。

```
@Path("/{mode:sandbox|}")
public class JerseyResource{

    boolean isSandbox = false;

    public JerseyResource(@PathParam("mode") String mode) {
        if(mode.equals("sandbox"))
            isSandbox = true;
    }

    @GET
    @Path("data")
    @Produces(MediaType.TEXT_PLAIN)
    public Response data() {
        if(isSandbox) 
            return Response.ok("Sandbox is on").build();
        return Response.ok("Sandbox is off").build();
    }
} 
```

尝试“GET：../MyProject/sandbox/data”效果很好，它返回“Sandbox is on”。但是当我执行“GET：../MyProject/data”时，它只会返回一个未找到的 404 页面。

这里有没有办法在 Jersey 中使用空字符串作为路径 url 的参数，同时采用固定字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:27:48.623

尝试使用：

```
@Path("{mode:(/sandbox)?}") 
```

您还需要将模式比较更改为：

```
if (mode.endsWith("sandbox"))
    isSandbox = true; 
```

和您的数据资源：

```
@Path("/data") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:06:19.223

我通过编辑 web.xml 文件找到了解决方案！

```
<servlet-mapping>
    <servlet-name>myProject</servlet-name>
    <url-pattern>/sandbox/*</url-pattern>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

这允许我有多个 url 指向同一个项目，并在代码中编写：

```
@Path("")
public class JerseyResource{

    boolean isSandbox = false;

    public JerseyResource(@Context HttpServletRequest req) {
        if(req.getRequestURI().startsWith("/nexus/sandbox"))
            isSandbox = true;
    } 
```

这对我来说非常有效，它允许有一个空的类路径，也允许子路径。

# javascript - Javascript，onbeforeunload 事件在 IE 中提交表单时起作用

> ID：12531081
> 
> 赞同：1
> 
> 时间：2012-09-21T12:58:34.990
> 
> 标签：javascript

我正在为我为 xhtml 页面制作的 javascript 编写一些建议。我让它主要在 IE、FF 和 chrome 上工作（Safari 仍然给我一些悲伤，但那是另一个主题。）我遇到的问题是，即使有人提交了一个不是我的表单，IE 也会运行 beforeunload 事件想要发生，因为 beforeunload 脚本会导致信息被重置。当我按 F5 时它甚至会这样做，这也不是我想要的。现在 FF 和 Chrome 在提交表单时没有这个问题，但不知道为什么。这是我到目前为止编写的代码。

```
<script type="text/javascript"> 
window.onbeforeunload = function() {
var hiddenBtn = document.getElementById("kioskform:broswerCloseSubmit");
return  hiddenBtn.click();
           }   </script> 
```

只是想知道如何解决这个问题，任何建议都非常感谢，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:06:09.447

定义一个 html 隐藏变量。为用户提交表单的时间分配一个值。然后在你的卸载函数中，检查隐藏变量。如果它填充了任何值，则离开该函数。

```
<script type="text/javascript"> 
 window.onbeforeunload = function() {
  if (document.getElementById("wasformsubmitted").value != "Y") {
    var hiddenBtn = document.getElementById("kioskform:broswerCloseSubmit");
    return  hiddenBtn.click();
  }
}   
function SetSubmitVariables()
{
 document.getElementById("wasformsubmitted").value = "Y";
 return true;
}
</script>
<body>
  <form ... onsubmit="return SetSubmitVariables();">
    <input type="hidden" id="wasformsubmitted" value="N" />
    ... 
  </form>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:23:11.590

提交表单时，您可以从窗口中删除 onBeforeUnload 侦听器

例如，如果您使用 id="form1" 提交表单，那么您可以添加此代码。

```
 document.getElementById('form1').onsubmit = function(){
        window.onbeforeunload=function(){};
    } 
```

# python - django - 表单 - 出现空白（灰色）页面

> ID：12531083
> 
> 赞同：0
> 
> 时间：2012-09-21T12:58:43.907
> 
> 标签：python, django, forms

当我尝试查看表单时，我只是得到一个空白的 html 页面

我尝试的网址是：http://:8000/catalog/enter_product/

[http://screencast.com/t/16JpxtvMTd](http://screencast.com/t/16JpxtvMTd)

尽管存在模块名称：

正如您在此处看到的，settings.py 位于“SOWL”文件夹中，而 CATALOG 是同一级别的不同文件夹 [http://screencast.com/t/bsHiglMl7](http://screencast.com/t/bsHiglMl7)

settings.py 有以下内容。您可以看到“目录”正在其中。

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.humanize',
    'CATALOG',
    'SOWLAPP',
    'registration',
) 
```

在 SOWL/URls.py 中，您可以看到以下代码。在主 URL 中调用“目录”时的位置。它查找 CATALOG.urls 文件。

```
urlpatterns = patterns('',
     url    (r'^user/(\w+)/$', user_page),
    (r'^login/$', 'django.contrib.auth.views.login'),
    # (r'^catalog/$', home),
    (r'^static/(?P<path>.*)$', 'django.views.static.serve',
        { 'document_root' : 'C:/SHIYAM/Personal/SuccessOwl/SOWL0.1/SOWL/SOWL/static'}),
    # (r'^admin/', include('django.contrib.admin.urls')),
    (r'^catalog/', include('CATALOG.urls')),
    (r'^accounts/', include('registration.urls')),
    (r'^$', main_page),
)

CATALOG.urls

from django.conf.urls.defaults import *
from CATALOG.views import *

urlpatterns = patterns('SOWL.catalog.views',
    (r'^$', 'index', { 'template_name':'catalog/index.html'}, 'catalog_home'),
    (r'^category/(?P<category_slug>[-\w]+)/$', 'show_category', {'template_name':'catalog/category.html'},'catalog_category'),
    (r'^product/(?P<product_slug>[-\w]+)/$', 'show_product', {'template_name':'catalog/product.html'},'catalog_product'),
    (r'^enter_product/$',enter_product),
) 
```

CATALOG/models.py 有这个类

```
class Product(models.Model):
    name = models.CharField(max_length=255, unique=True)
    slug = models.SlugField(max_length=255, unique=True, help_text='Unique value for product page URL, created from name.')
    brand = models.CharField(max_length=50)
    sku = models.CharField(max_length=50)
    price = models.DecimalField(max_digits=9,decimal_places=2)
    old_price = models.DecimalField(max_digits=9,decimal_places=2, blank=True,default=0.00)
    image = models.CharField(max_length=50)
    is_active = models.BooleanField(default=True)
    is_bestseller = models.BooleanField(default=False)
    is_featured = models.BooleanField(default=False)
    quantity = models.IntegerField()
    description = models.TextField()
    meta_keywords = models.CharField(max_length=255, help_text='Comma-delimited set of SEO keywords for meta tag')
    meta_description = models.CharField(max_length=255, help_text='Content for description meta tag')
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    categories = models.ManyToManyField(Category)
    user = models.ForeignKey(User)

    class Meta:
        db_table = 'products'
        ordering = ['-created_at']

    def __unicode__(self):
        return self.name

    @models.permalink
    def get_absolute_url(self):
        return ('catalog_product', (), { 'product_slug': self.slug })

    def sale_price(self):
        if self.old_price > self.price:
            return self.price
        else:
            return None 
```

CATALOG/forms.py 有这个类：

```
class Product_Form(forms.Form):
    name = forms.CharField(label='name', max_length=30)
    slug = forms.SlugField(label='Unique Name for the URL', max_length=30)
    brand = forms.CharField(label='Unique Name for the URL', max_length=30)
    price = forms.DecimalField(label='Price',max_digits=9,decimal_places=2)
    old_price = forms.DecimalField(max_digits=9,decimal_places=2,initial=0.00)
    quantity = forms.IntegerField()
    description = forms.CharField()
    meta_keywords = forms.CharField(max_length=255)
    meta_description = forms.CharField(max_length=255)
    categories = forms.CharField(max_length=255)
    user = forms.IntegerField()

    prepopulated_fields = {'slug' : ('name',)} 
```

CATALOG/views.py 有这个：

```
# Create your views here.
from CATALOG.forms import *
from django.template import RequestContext
from django.shortcuts import render_to_response

def enter_product(request):
    if request.method == 'POST':
        form = Product_Form(request.POST)
        if form.is_valid():
            user = User.objects.create_user(
                username=form.clean_data['username'],
                password=form.clean_data['password1'],
                email=form.clean_data['email']
            )
            return HttpResponseRedirect('/')
    else:
        form = Product_Form()
    variables = RequestContext(request, {
            'form': form
        })

    return render_to_response('catalog/enter_product.html',variables) 
```

SOWL\templates\catalog\enter_product.html 有以下代码

```
{% extends "base.html" %}
{% block title %}blah{% endblock %}
{% block head %}blah{% endblock %}
{% block content %}
<form method="post" action=".">
{{ form.as_p }}
<input type="submit" value="Enter" />
</form>
{% endblock %} 
```

SOWL\templates\catalog\base.html 有以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Django Bookmarks |
{% block title %}{% endblock %}</title>
<link rel="stylesheet" href="/site_media/style.css"
type="text/css" />
</head>
<body>
<div id="nav">
<a href="/">home</a> |
{% if user.is_authenticated %}
welcome {{ user.username }}
(<a href="/logout">logout</a>)
{% else %}
<a href="/login/">login</a>
{% endif %}
</div>
<h1>{% block head %}{% endblock %}</h1>
{% block content %}{% endblock %}
</body>
</html> 
```

我有一种感觉，这与我的观点是如何产生的这一事实有关。我没有看到视图的 product_form 类根本没有被使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:17:29.817

考虑到以下几点

```
render_to_response(template[, dictionary][, context_instance][, mimetype]) 
```

在您的`CATALOG/views.py`文件中，您传递的是`context_instance`in位置，因此请在函数`dictionary`中进行以下更改；`enter_product`

```
variables = dict(
    form=form
) 
```

# c# - 处理 webbrowser 控件的新窗口事件

> ID：12531087
> 
> 赞同：0
> 
> 时间：2012-09-21T12:58:49.437
> 
> 标签：c#, windows

在我的 Windows 应用程序中，单击某些链接弹出窗口在 IE 中打开后，我有 WebBrowser 控件，我想访问该弹出窗口的 URL。

我尝试了浏览器控件的 NewWindow 事件，但它给了我父窗口的对象作为发送者和事件。

我读到了 COM 组件 Web 浏览器控件，它具有相同的 NewWindow 事件，它给了我弹出窗口的 URL。如何使用这个 COM 组件代替 .NET 控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:35:18.717

我建议不要使用 COM 组件，它有一些缺点，例如内存管理、异常处理和 DLL Hell 问题。

要获取弹出窗口的 URL，您可以将 WebBrowser.ActiveXInstance 转换为 SHDocVx.WebBrowser 对象，然后处理其 NewWindow3 事件以检索弹出窗口的 URL。

算法.-

在页面加载时将 WebBrowser 转换为 SHDocVx.WebBrowser。取消 .NET 控件的 NewWindow 事件。并在 NewWindow3 事件中编写代码。

# java - 插入语句处的 java.sql.SQLSyntaxError

> ID：12531091
> 
> 赞同：0
> 
> 时间：2012-09-21T12:59:01.860
> 
> 标签：java, sql, insert, hsqldb

我目前正在用插入语句填充我的 hsql 数据库，但它不起作用，我看不到错误......

这是我的 INSERT 语句：

```
INSERT INTO Waren VALUES(name, kategorie, geloescht, haltbar, preis, altersfreigabe) VALUES
('Schnitzel', 'Speisen', FALSE, 'TRUE', 1.20, 0);
INSERT INTO Waren VALUES('Apfel', 'Speisen', FALSE, 'TRUE', 2.00, 0);
INSERT INTO Waren VALUES ('Kokosnüsse', 'Speisen', FALSE, 'TRUE', 1.00, 0);
INSERT INTO Waren VALUES('Suppe', 'Speisen', FALSE, 'TRUE', 2.00, 0);
INSERT INTO Waren VALUES('Karotte', 'Speisen', FALSE, 'TRUE', 1.00, 0);
INSERT INTO Waren VALUES('Kaiserschmarn', 'Speisen', FALSE, 'TRUE', 2.90, 0);
INSERT INTO Waren VALUES('Schnaps', 'Getraenke', FALSE, 'TRUE', 2.90, 18);
INSERT INTO Waren VALUES('Cola Rum', 'Getraenke', FALSE, 'TRUE', 2.70, 18);
INSERT INTO Waren VALUES('Wein', 'Getraenke', FALSE, 'TRUE', 1.20, 18);
INSERT INTO Waren VALUES('Bier', 'Getraenke', FALSE, 'TRUE', 3.00, 16);
INSERT INTO Waren VALUES('Dead Killer Drink', 'Getraenke', FALSE, 'TRUE', 7.00, 18); 
```

我很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:01:08.403

删除第一个`VALUES`：

```
INSERT INTO Waren (name, kategorie, geloescht, haltbar, preis, altersfreigabe) VALUES
('Schnitzel', 'Speisen', FALSE, 'TRUE', 1.20, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:02:33.107

我认为你的价值观太多了。

```
INSERT INTO Waren **VALUES**(name, kategorie, ... 
```

应该被删除。

# c# - 如何在 c# 注释中添加 xaml 代码？

> ID：12531099
> 
> 赞同：4
> 
> 时间：2012-09-21T12:59:30.747
> 
> 标签：c#, xaml, xml-documentation

```
/// <summary>
/// 
/// </summary>
/// <remarks
/// 
/// </remarks> 
```

如何在上述注释中添加 xaml 代码，避免代码解析器创建不存在的链接（CTRL + 单击消息）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T13:05:12.700

在 XAML 视图中，放置一些您想要用作注释的 XAML

然后用

```
<!-- #region XAML Snippet -->
<StackPanel>
  <Button Content="Click me, I do nothing!" />
</StackPanel>
<!-- #endregion --> 
```

注意：我把它放在 MainWindow.xaml 文件中，但它可以是任何 XAML 文件。

现在在 C# 中，将其用作注释：

```
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
/// <example>
/// <code source="MyProject.Namespace/MainWindow.xaml" region="XAML snippet" lang="XAML" title="A linked *.xaml file treated as XAML"/>
/// </example> 
```

SandCastle 理解这种语法，并会生成适当的文档（如在 MSDN 中），但是这不会出现在智能感知上。

您可以使用和代替符号来格式化常规`<summary>`正文以模仿 XAML 语法，但这会很痛苦。`&gt;``&lt;``< >`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T13:23:32.997

你有两个选择：

1.  标准 XML 转义

    `/// &lt;TextBlock Text=&quot;Hello World!&quot;/&gt;`

2.  CDATA 部分

    `/// <![CDATA[<TextBlock Text="Hello World!"/>]]>`

使用第一个选项，Visual Studio Intellisense 将正确显示未转义的 XML 序列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T13:02:47.263

使用 CDATA 标签？

```
/// <summary>
/// <![CDATA[<StackPanel />]]>
/// </summary> 
```

注意：这不会出现在 Intellisense 中，因此如果这是要求，则此方法不适用于您的场景。

但是，为什么要将 XAML 添加到代码文件中？

# c# - 来自多个线程的 C# 数据表添加方法？

> ID：12531103
> 
> 赞同：1
> 
> 时间：2012-09-21T12:59:50.277
> 
> 标签：c#, datatable

我正在使用 .net 3.5 数据表并从多个线程向数据表添加行。当不使用锁时，我得到 datatablr 行数和最大索引之间的不匹配。尝试序列化表时出现异常`there is no rows at poitions X`。当然我可以锁定数据表，但我想知道是什么原因。我希望该`row.count()`方法基于行最大索引 +1 返回，而不是具有非独立计数器。另外，我在哪里可以找到`rows.Add`(params) 方法的内部实现？即使在某些情况下添加在同一行上，每次添加似乎计数器都会增加。

**编辑：**感谢您的评论。我确实知道它不是线程安全的写入并且已经通过在同步根对象上使用锁定来解决它。我想看看 add 方法内部发生了什么，看看计数在哪里搞砸了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:11:30.960

原因很简单：`DataTable`不是线程安全的。它没有*声称*是线程安全的（针对竞争性写入），也不*需要*是线程安全的。大多数代码***都不***是线程安全的，除非有明确说明“我在以下情况下是线程安全的”，否则您应该假设它不是。

最常见的是，在这种情况下，它意味着以下之一：

*   索引更新正在丢失，即两者同时进行`count++`，仅增加 1
*   当数组被复制、增长、缩小或重新排列时，操作会导致疯狂的数据

修复很简单：如果任何线程正在更改表，它必须具有独占访问权限。所以同步。`lock`是最简单的选择，但`ReaderWriterLockSlim`存在更多奇特的选择。

然后下一步是决定：我们*真的*想要使用`DataTable`吗？

# media-queries - 断点和“字体大小”参数

> ID：12531111
> 
> 赞同：2
> 
> 时间：2012-09-21T13:00:12.877
> 
> 标签：media-queries, breakpoints, compass-sass, font-size, susy-compass

有没有人有过在断点混合中使用“字体大小”参数的经验？

在文档中，它说明了以下内容...

```
 <$font-size>: When using EMs for your grid, the font size is important. Default: $base-font-size 
```

在我正在使用的设计中，我采用移动优先方法，因此 $base-font-size = 12px。

然后我在 50em 处添加一个断点（此示例为任意值），如下所示...

```
 @include at-breakpoint(50em 12, 16px) {
      .container{
        @include container;
      }
    } 
```

我不确定我是否正确理解了这一点，但我期待，因为我已经为“font-size”指定了一个值，一旦屏幕超过 50em，我的字体大小将增加到 16px。

但是，我认为我可能对这个“字体大小”参数的用途有误解，因为字体大小在任何大小下都保持在 12 像素。

有谁知道这个参数有什么影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:23:56.603

似乎该功能没有很好的记录。它不是设置字体大小，而是修复基于 em 的媒体查询。如果您使用的基本字体大小为`12px`，这非常重要。

浏览器总是根据默认浏览器字体大小 (16px) 交互基于 em 的媒体查询。这根本没有任何意义，但他们就是这样做的。所以，为了让你在 50em (*12px) 处下断点，我们必须将断点设置在 37.5em (*16px，浏览器默认)。传递您的基本字体大小允许我们进行调整。

这应该更好地记录下来，并且应该更好地命名参数。我[在 GitHub 上创建了一个问题](https://github.com/ericam/susy/issues/115)。

# javascript - 有没有办法在 wp_editor 函数中应用字符限制？

> ID：12531113
> 
> 赞同：2
> 
> 时间：2012-09-21T13:00:17.093
> 
> 标签：javascript, wordpress, tinymce, frontend

我正在尝试找出如何在前端提交表单的资源框中组合此代码，但我需要将其限制为一定数量的字符。

```
<?php wp_editor( get_option('resource'), 'resource', array('textarea_name' => 'resource', 'class'=>'requiredField', 'textarea_rows'=>'6','id'=>'resource' ,'onkeyup'=>'countChar(this)','media_buttons' => false)  );?><?php if(isset($_POST['resource'])) { if(function_exists('stripslashes')) { echo stripslashes($_POST['resource']); } else { echo $_POST['resource']; } } ?> 
```

此代码检查该字段是否为空：

```
<?php if(isset($_POST['resource'])) { if(function_exists('stripslashes')) { echo stripslashes($_POST['resource']); } else { echo $_POST['resource']; } } ?> 
```

如何在 wp_editor 函数中进行检查？我需要这个来允许和简化我的资源框中的 html 给用户......

这是我在里面使用的 javascript 函数 ('onkeyup'=>'countChar(this)') 但它不起作用。

我在这里坠落吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:39:37.257

首先，您需要更正 wp_editor 的实现。你的代码应该是这样的：

```
<?php wp_editor( get_option('resource'), 'resource', array('textarea_name' => 'resource', 'editor_class'=>'requiredField', 'textarea_rows'=>'6', 'media_buttons' => false)  );?> 
```

请注意，[wp_editor 函数](http://codex.wordpress.org/Function_Reference/wp_editor)不接受 javascript 方法的参数，并且“editor_class”有一个参数，但它本身没有“class”。

接下来，您需要将 keyup 事件（或 keydown 事件）绑定到 TinyMCE 编辑器。这需要在编辑器初始化时完成。[这个其他问答](https://wordpress.stackexchange.com/questions/24113/hook-the-keydown-event-in-the-tinymce-post-editor)帮助我为您找到了解决方案。您需要在您的 functions.php 文件中添加类似于以下内容的内容：

```
add_filter( 'tiny_mce_before_init', 'wpse24113_tiny_mce_before_init' );
function wpse24113_tiny_mce_before_init( $initArray )
    {
        $initArray['setup'] = <<<JS
                [function(ed) {
                ed.onKeyDown.add(function(ed, e) {
                   if(tinyMCE.activeEditor.editorId=='resource') || (tinyMCE.activeEditor.editorId=='the_other_editor_id_you_want_to_limit') {
                        countChar(tinyMCE.activeEditor.getContent());
                     }
                });
            }][0]
            JS;
    return $initArray;
    } 
```

这将更改 TinyMCE 初始化以为您添加事件。当事件被触发（按键被按下）时，该函数将检查活动编辑器的 ID，以查看它是否是您希望限制其字符数的编辑器之一。然后它抓取编辑器的内容并将其传递给您的 countChar 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:14:34.347

我根据自己的需要稍微修改了 Bryan Gentry 的解决方案，并且效果很好。如果您需要类似的功能，这是我的代码。

```
add_filter( 'tiny_mce_before_init', 'wpse24113_tiny_mce_before_init' );
function wpse24113_tiny_mce_before_init( $initArray )
{
    $initArray['setup'] = <<<JS
[function(ed) {
    ed.onKeyDown.add(function(ed, e) {
        if(tinyMCE.activeEditor.editorId=='content-id') {
            var content = tinyMCE.activeEditor.getContent();
            var max = 300;
            var len = content.length;
            if (len >= max) {
              $('#charNum').html('<span class="text-error">You've got more then '+max+' characters!</span>');
            } else {
             var charCount = max - len;
             $('#charNum').html(charCount + ' characters left');
            }
         }
    });

}][0]
JS;
    return $initArray;
} 
```

# jmeter - JMeter 中的 CSV 数据配置

> ID：12531114
> 
> 赞同：2
> 
> 时间：2012-09-21T13:00:18.313
> 
> 标签：jmeter

在我的项目中，我需要为每个线程传递 1 个值，并且相同的值将用于任意次数。
JMeter有什么选择吗？

**例如：**

我的问题很简单。

在一个线程组中，我将分配 2 个线程和 10 个循环（每个线程 10 个循环）。

我的要求是，我必须将第一行数据用于第一个线程，并且相同的数据应该用于 10 个循环，第二行数据用于第二个线程，并且相同的数据应该用于 10 个循环。

例如：
在 csv 文件中，我将声明如下：

```
43
42
45
46 
```

在执行期间，线程 1 应始终占用 43，即使是 10 个循环，线程 2 应始终占用 42。
如果我在测试计划中仅声明 2 个线程，则永远不应使用 45 和 46。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:17:06.067

您可以这样做：

```
Thread Group (2 threads, iteration : 1)
+-- Debug Sampler with Name : T-${__threadNum}-${__StringFromFile(/Volumes/HD2/csv.csv, line)}
+-- Loop Controller (Iterations : 10)
    +-- Debug Sampler to show you get what you need : T-${__threadNum}-DS-${line} 
```

测试计划：

```
<?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2" properties="2.3" jmeter="2.8-SNAPSHOT.20120923">
  <hashTree>
    <TestPlan guiclass="TestPlanGui" testclass="TestPlan" testname="Test Plan" enabled="true">
      <stringProp name="TestPlan.comments"></stringProp>
      <boolProp name="TestPlan.functional_mode">false</boolProp>
      <boolProp name="TestPlan.serialize_threadgroups">false</boolProp>
      <elementProp name="TestPlan.user_defined_variables" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">
        <collectionProp name="Arguments.arguments"/>
      </elementProp>
      <stringProp name="TestPlan.user_define_classpath"></stringProp>
    </TestPlan>
    <hashTree>
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="Thread Group" enabled="true">
        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">false</boolProp>
          <stringProp name="LoopController.loops">1</stringProp>
        </elementProp>
        <stringProp name="ThreadGroup.num_threads">2</stringProp>
        <stringProp name="ThreadGroup.ramp_time">1</stringProp>
        <longProp name="ThreadGroup.start_time">1348513661000</longProp>
        <longProp name="ThreadGroup.end_time">1348513661000</longProp>
        <boolProp name="ThreadGroup.scheduler">false</boolProp>
        <stringProp name="ThreadGroup.duration"></stringProp>
        <stringProp name="ThreadGroup.delay"></stringProp>
      </ThreadGroup>
      <hashTree>
        <DebugSampler guiclass="TestBeanGUI" testclass="DebugSampler" testname="T-${__threadNum}-${__StringFromFile(/Volumes/HD2/csv.csv, line)}" enabled="true">
          <boolProp name="displayJMeterProperties">false</boolProp>
          <boolProp name="displayJMeterVariables">true</boolProp>
          <boolProp name="displaySystemProperties">false</boolProp>
        </DebugSampler>
        <hashTree/>
        <LoopController guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">true</boolProp>
          <stringProp name="LoopController.loops">10</stringProp>
        </LoopController>
        <hashTree>
          <DebugSampler guiclass="TestBeanGUI" testclass="DebugSampler" testname="T-${__threadNum}-DS-${line}" enabled="true">
            <boolProp name="displayJMeterProperties">false</boolProp>
            <boolProp name="displayJMeterVariables">true</boolProp>
            <boolProp name="displaySystemProperties">false</boolProp>
          </DebugSampler>
          <hashTree/>
          <ResultCollector guiclass="ViewResultsFullVisualizer" testclass="ResultCollector" testname="View Results Tree" enabled="true">
            <boolProp name="ResultCollector.error_logging">false</boolProp>
            <objProp>
              <name>saveConfig</name>
              <value class="SampleSaveConfiguration">
                <time>true</time>
                <latency>true</latency>
                <timestamp>true</timestamp>
                <success>true</success>
                <label>true</label>
                <code>true</code>
                <message>false</message>
                <threadName>true</threadName>
                <dataType>false</dataType>
                <encoding>false</encoding>
                <assertions>true</assertions>
                <subresults>false</subresults>
                <responseData>false</responseData>
                <samplerData>false</samplerData>
                <xml>false</xml>
                <fieldNames>false</fieldNames>
                <responseHeaders>false</responseHeaders>
                <requestHeaders>false</requestHeaders>
                <responseDataOnError>false</responseDataOnError>
                <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>
                <assertionsResultsToSave>0</assertionsResultsToSave>
                <bytes>true</bytes>
                <hostname>true</hostname>
                <threadCounts>true</threadCounts>
                <sampleCount>true</sampleCount>
              </value>
            </objProp>
            <stringProp name="filename"></stringProp>
          </ResultCollector>
          <hashTree/>
        </hashTree>
      </hashTree>
    </hashTree>
  </hashTree>
</jmeterTestPlan> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T21:12:34.943

*   将线程组循环设置为 1。
*   在 CSV 数据集配置**之后**输入具有所需循环数（在您的情况下为 10）的循环控制器。将共享模式设置为：当前线程组。
*   将 HTTP 请求采样器添加为 Loop Controler 的子项，您就知道了：)

![在此处输入图像描述](../Images/0a3fdae24450cd8ead2f0640959d3813.png)

# java - Java GUI 编程策略？

> ID：12531116
> 
> 赞同：4
> 
> 时间：2012-09-21T13:00:20.107
> 
> 标签：java, swing, user-interface, methods

Java初学者。

嗨，我没有太多的 GUI 编程经验。因此，我正在寻求有关如何处理下一个项目的一些提示。希望我能很好地解释自己。

[![计划](../Images/bae7fc6180370457e0420e3caab8fe01.png)](https://i.stack.imgur.com/Pi4Ac.jpg)
[（来源：[mobilehomeservicesltd.com](http://mobilehomeservicesltd.com/2010images/decking/mhs10.jpg)）]

（参见上面的照片作为参考）我的程序的这个 GUI 方面将是一个 2D - 静态大篷车和用基本形状制成的阳台/阳台的鸟瞰图。所以通常大篷车将由一个矩形表示（只是一个矩形，忽略填充图）。有时，静态大篷车的前部形状是多边形，而不是矩形。所有的规模都取决于用户的输入，因为所有的大篷车都有各自的尺寸。

大篷车单元就位后，我需要在大篷车周围绘制另一个多边形，代表阳台/游廊，全部按比例绘制。到此为止了？？好的。这是挑战部分（无论如何对我来说）。

在代表阳台的多边形上，我需要能够绘制线条来表示将被钉在表面上的甲板（如上图）。现在因为大篷车可能有一个成形的前部，所以甲板必须遵循大篷车的形状。换句话说，如果大篷车的前部是椭圆形或有角度的，则必须切割甲板以遵循该形状。

不会让你对细节感到厌烦。这个想法是让用户决定他们是否希望以这样的方式安装甲板，使其与大篷车的运行方向相同，或者相反。一旦用户决定，我将尝试根据图纸计算（因为它将按比例）建造这个阳台（以及其他各种项目）需要多少全长的甲板。

现在我的知识仅限于 GUI，但我已经掌握了面板和绘制线条、矩形、多边形等...我最初的想法是使用 g.drawLine 方法手动绘制大篷车，与阳台相同，然后我的计算基于像素计数来计算所有各种组件。

我是不是在尝试这个，或者这是相对容易编程的东西？有没有一种更有效的方法可以在尝试之前先查一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T13:12:07.793

你想做的事情是可以实现的，但它不是最简单的任务。但不要让这让你慢下来。

您需要先了解如何在 Swing 中绘图。看一眼

*   [图形 2D](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [定制绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

您还需要熟悉 Swing

*   [使用 Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/index.html)

缩放的基本概念是为像素分配权重。一个像素负责的距离越远，你的图像就会变得越小

# data-structures - 如何在表/元表中添加/删除元素？- Lua 脚本

> ID：12531119
> 
> 赞同：-2
> 
> 时间：2012-09-21T13:00:30.590
> 
> 标签：data-structures, lua

好吧，我知道如何使用它们的初始值创建一个表/元表，但我不知道如何在创建后插入或删除元素。如何使用 Lua Script 中的最佳实践来做到这一点？有什么标准功能可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:10:55.083

这里几乎是在 Lua 表中插入和删除的所有方法；首先，对于数组样式表：

```
local t = { 1, 2, 3 }

-- add an item at the end of the table
table.insert(t, "four")
t[#t+1] = 5  -- this is faster

-- insert an item at position two, moving subsequent entries up
table.insert(t, 2, "one and a half")

-- replace the item at position two
t[2] = "two"

-- remove the item at position two, moving subsequent entries down
table.remove(t, 2) 
```

对于哈希样式表：

```
local t = { a = 1, b = 2, c = 3 }

-- add an item to the table
t["d"] = 4
t.e = 5

-- remove an item from the table
t.e = nil 
```

# web-services - 如何在 Metro Web 服务中更改 schemaLocation 的协议

> ID：12531120
> 
> 赞同：1
> 
> 时间：2012-09-21T13:00:33.343
> 
> 标签：web-services, service, web, wsdl, java-metro-framework

我在防火墙后面部署了一个 Web 服务。防火墙和 WS 之间的连接在 8080 端口上，但防火墙仅在 443 端口上接受来自外部的请求。

问题是当我从外部打开 wsdl 时，**schemaLocation**属性的值错误 - 以**http://host:8080**开头，但不是以**https://host:443**

我可以按照此处所述更改端口：http: [//metro.java.net/2.0/guide/HTTP_address_in_soap_address_and_import_locations.html](http://metro.java.net/2.0/guide/HTTP_address_in_soap_address_and_import_locations.html) 但它会导致错误：**http://host:443**
有谁知道如何从**http修复****schemaLocation**属性的***协议***到**https**？

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-06T16:03:14.980

它在这里：[地铁用户指南的新位置](https://javaee.github.io/metro/doc/user-guide/ch05.html#http-address-in-soapaddress-and-import-locations)******

# javascript - 检查正则表达式匹配时如何避免多个 if 语句

> ID：12531124
> 
> 赞同：1
> 
> 时间：2012-09-21T13:00:40.957
> 
> 标签：javascript, node.js

目前我有这样的代码..

```
var result = line.match( some regexp );
  if (result !== null) {
      return callback({ a: 'aaaaa', b: bvariable });
    });
  }

var result = line.match( some other regexp );
  if (result !== null) {
      return callback({ d: 'ddddd', c: bvariable });
    });
  } 
```

我有大约 10 个这些都具有不同的正则表达式和回调，并且列表会变得更大。有没有更好/更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:04:26.563

您可以将正则表达式和回调重构为“关联数组”（对象），然后概括其余部分：

```
var regexs = { 
    regex1: {
        regex: /./,
        callback: function () {
            // callback stuff here
        }
    },
    regex2: {
        regex: /[a-z]/,
        callback: function () {
            // callback stuff here
        }
    }
};

var result = line.match(regexs.regex1.regex);
if (result !== null) {
    return regexs.regex1.callback();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:05:08.137

创建一个关联数组对。每对中的第一个元素是一个正则表达式，第二个是回调。遍历数组并匹配正则表达式，如果有匹配则调用回调。

```
var assoc = [
    { r: /\d+/, f: function (m) { console.log(m[1]); } },
    { r: /\w+/, f: function (m) { console.log(m[2] + m[3]); } }
];

for (var i = 0; i < assoc.length; i++) {
    var m = line.match(assoc[i].r);
    if (m) {
        return assoc[i].f(m);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:25:27.447

考虑：

```
input = "foo bar baz"
regexes = [
    /aa/,
    /ba./,
    /quux/,
]

regexes.some(function(re) {
    if(re.test(input)) {
        // do stuff
        return true;
    }
    return false;
}) 
```

`match`请注意，除非您实际使用它返回的内容，否则您不需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:33:55.023

您可以摆脱结果变量

```
if(line.match( some regexp )) {
  return callback({ a: 'aaaaa', b: bvariable });
}

if(line.match( some other regexp )) {
  return callback({ d: 'ddddd', c: bvariable });
} 
```

由于 match 函数总是返回 null 或数组，因此可以安全地假设如果匹配失败，返回的 null 将被强制转换为 false，如果匹配成功，则返回的数组（无论它有多少元素）都将被强制转换为真。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T04:42:38.873

如果您的正则表达式模式是简单的字符串，并且假设您希望第一个模式在第二个之前匹配，您可以：

```
var pattern1='aaa',
    pattern2='bbb',
    RE=new RegExp('('+pattern1+'|'+pattern2+')'); // matches pattern1 OR pattern2

if(line.match(RE)){
    var result=RegExp.$1; // content of first pair of capturing parens
    if(result===pattern1) {
        return callback(/* args specific to first pattern */);
    }
    else if(result===pattern2){
        return callback(/* args specific to second pattern */);
    }
    else {
        return callback(/* args for no match */);
    }
} 
```

# shell - 生成 5 分钟间隔

> ID：12531125
> 
> 赞同：0
> 
> 时间：2012-09-21T13:00:43.990
> 
> 标签：shell, date, seq

我需要编写一个 shell 脚本来创建一个包含 5 分钟间隔时间的列表。

```
00-00
00-05
00-10
00-15
...
...
23-50
23-55 
```

这是我开始使用的命令。

```
# date
Fri Sep 21 18:14:35 IST 2012

# date '+%H-%M'
18-14

# date '+%H-%M' --date='5 minute ago'
18-18 
```

如何编写脚本来生成列表？如果太复杂，我会手动完成，因为它是一次性任务。

* * *

更新：

以下脚本正在运行。但它会生成个位数，比如 7-5 实际上应该是 07-05

```
#!/bin/sh
for hour in `seq 0 24`
do
for minute in `seq 0 5 59`
do
echo $hour-$minute
done
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:18:41.337

一个简单的 bash 解决方案（版本 4 或更高版本）：

```
printf "%s\n" {00..23}-{00..55..5} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:18:41.977

如果您需要在给定日期开始，您可以使用：

```
ITERATIONS=100 # adjust here
D=$(date +%s)
for ((i=0; i<$ITERATIONS; i++))
do 
  date '+%H-%M' -d @$((D+5*60*i))
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:49:21.853

以下 shell 脚本正在返回所需的数据

```
#!/bin/sh
for hour in `seq -w 0 24`
do
for minute in `seq -w 0 5 59`
do
echo $hour-$minute
done
done 
```

# android - 如何使用 PhoneGap 在 Android 模拟器上上传图片？

> ID：12531128
> 
> 赞同：1
> 
> 时间：2012-09-21T13:01:03.390
> 
> 标签：android, cordova

我正在尝试使用 Android 模拟器将图片上传到服务器，但出现一些错误，包括：

1.  服务器上的 FileNotFoundException
2.  FileTransfer.upload 上的错误
3.  FileTransfer.execute 上的错误
4.  IOException：从服务器收到错误。
5.  “http_status”：500，“代码”：3

我尝试清除模拟器上的缓存，使用模拟器上的网络浏览器上传图像，并且可以正常工作。我还设置`options.chunkedMode = false;` 了我正在使用 Cordova 2.0.0 并使用 Android 4.1 运行模拟器。

任何人都可以帮我解决这个问题，或者如果有人遇到过同样的错误，请帮助我。

PS：代码如下图：

```
function uploadPhoto() {
var options = new FileUploadOptions();
options.fileKey="file";
options.fileName=_img.substr(_img.lastIndexOf('/')+1);      
options.mimeType="image/jpeg";

var params = new Object();
params.HCPracticeNumber = "11331";
params.ServiceDate = "12 Sep 2012";
params.AmountClaimed = "200";

options.params = params;
options.chunkedMode = false;

var ft = new FileTransfer();
ft.upload(_img, "http://172.20.09.12/asd123", win, fail, options, true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T12:18:13.510

确保在您的服务器端代码中，您正在寻找代码中指定的“文件”一词。请参阅我在下面引用的内容：

```
options.fileKey="file"; 
```

例如在 PHP 服务器代码中：

```
$_FILES['file']['name'] 
```

如果您在“文件”旁边使用任何其他词，则会收到错误消息。

# c# - 是否有警告（错误），类似于 C# 的 C4061

> ID：12531132
> 
> 赞同：7
> 
> 时间：2012-09-21T13:01:15.533
> 
> 标签：c#, enums, switch-statement, compile-time

通常，如果我在 C# 中对枚举使用 switch，我必须编写类似的内容：

```
switch (e)
{
    case E.Value1:
        //...
        break;

    case E.Value2:
        //...
        break;

        //...
    default:
        throw new NotImplementedException("...");
} 
```

在 C++（用于 VS）中，我可以为此开关启用警告 C4061 和 C4062，使它们出错并进行编译时检查。在 C# 中，我必须将此检查移至运行时...

有谁知道在 C# 中我如何在编译时检查这个？也许有一个警告，默认情况下禁用，我错过了，或者其他方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T13:04:09.527

不，没有编译时检查——拥有一个只处理一些命名值的开关/案例是合法的。本来*可以*包含它，但存在一些问题。

首先，枚举值没有任何“命名”值是完全有效的（不幸的是）：

```
enum Foo
{
    Bar = 0,
    Baz = 1
}
...
Foo nastyValue = (Foo) 50; 
```

鉴于*任何*值在 switch/case 中都是可行的，编译器无法知道您并不是要尝试处理未命名的值。

其次，它不适用于`Flags`枚举——编译器并不真正知道哪些值是方便的组合。它*可以*推断出这一点，但它会有点恶心。

第三，它并不总是你想要的——有时你真的只想回应几个案例。我不想有规律地抑制警告。

您可以使用[`Enum.IsDefined`](http://msdn.microsoft.com/en-us/library/system.enum.isdefined.aspx)它预先检查这一点，但这相对低效。

我同意所有这一切都有点痛苦——当涉及到 .NET 时，枚举是一个令人讨厌的领域:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-28T18:42:07.803

我知道这是 necroposting，但在编译器内部的这个区域并没有真正改变。因此，我为 switch 语句制作了 Roslyn 分析器。您可以下载[SwitchAnalyzer 软件包。](https://www.nuget.org/packages/SwitchAnalyzer) 这是 Roslyn 分析器，它支持

*   操作枚举 | 和 & 为他们。因此，您也可以检查标志（但不像单个 int 值）

*   当前数据上下文中的接口实现（模式匹配）。

0.4 版还没有实现类的模式匹配（但我希望尽快实现）。*要使用它，只需将此包添加到您的项目中，如果您没有**默认**分支或抛出异常*，您将收到所有未发现案例的警告。当然，您可以为您的项目启用“将警告视为错误”选项以获取所有或特定警告。如果您发现任何错误，请随时与我联系。

# c# - c# 接口引用

> ID：12531133
> 
> 赞同：0
> 
> 时间：2012-09-21T13:01:29.950
> 
> 标签：c#, interface, reference, project

![在此处输入图像描述](../Images/70a3cf114042529130f4d157220f9b62.png)

大家好

目前我有以下参考结构：

DSFinalProject 有`"DAL"`项目和`"DataStructure"`项目的参考。

`DataStructure`也有`DAL`项目的参考……</p>

现在我希望它`DSFinalProject`不会引用该`DAL`层，但能够使用该类的接口。

有什么方法可以`"tunnel"`将 DAL 项目中的接口连接到 DSFinalProject 而不实际在它们之间进行引用？

也许使用 DataStructure 项目？还是别的什么？

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:05:23.730

我不知道在没有引用项目（或程序集）的情况下从 DSFinalProject 引用 DAL 项目中的接口（或其他任何东西）的任何方法。

如果您认为它使依赖项更清晰，您可以将它们移动到*另一个*项目 - 如果您将接口放在 DataStructure 项目中 - 您会遇到循环引用，它需要 DAL 而 DAL 需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:09:58.640

最简单的方法是将它们放入 中`DataStructure`，这还不错，因为任何引用接口的东西也需要引用`DataStructure`。

我的投票是将它们放在那里，直到您遇到*需要*将接口放在单独的程序集中的场景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:34:24.997

我不相信无论如何你问什么。如果您考虑序列化对象时会发生什么，您仍然需要程序集来提供字段在数据流中的布局方式的低级结构。它需要接口中的代码说前 4 个字节是双精度，等等。

所以唯一要做的就是将你的接口移动到一个新的interfaces.dll中，它可以被所有东西引用。您将看到这种模式在许多示例中重复出现，包括 EnterpriseLibrary。

但是...您犯了一个典型的错误。你为什么要把你的代码分成这么多项目？项目确实应该被视为我们代码的运行时打包，而不是设计时间隔离机制。通过拆分成这么多程序集，您可以做三件事。

1.  您会减慢构建系统的速度，因为编译器会做更多的工作来获取其他程序集。
2.  您会减慢 Visual Studio 的速度，因为加载所有项目并保持它们之间的引用更加困难。我曾经研究过一个包含 140 个项目的解决方案，只需要 15 分钟就可以打开（但我总是早上喝咖啡）。
3.  您降低了运行时性能，因为 DotNet 必须四处搜索另一个 4k dll（这是最小值，即使只有一行代码）。尝试查看融合日志或使用 SysMon 来了解这个简单的操作涉及多少工作。

看看这个例子[关于如何优化代码的提示](http://codebetter.com/patricksmacchia/2007/12/16/hints-on-how-to-componentize-existing-code/)确实会看到随着您的解决方案变得更加复杂会发生什么。

与其像这样拆分它，不如使用命名空间，您仍然可以进行分隔，但不必使用这么多引用，您现在可以通过类中的 using 语句进行控制。您将轻松查看是否在设计为 DSFinalProject 层的类中使用 DAL 引用。您可以在项目下创建一个文件夹并在那里添加您的类。摆脱所有项目，仍然有一个适当的分层系统。

随着您的解决方案的增长，等到您至少有两个可执行文件，然后再开始引入项目，然后考虑运行时影响。如果您总是要加载两个程序集，请将它们合并为一个（我最近看到一些开源项目也使用 ilmerge 合并到第三方库中）。

# facebook - 使用 graph api explorer 在 Facebook 上进行投票

> ID：12531135
> 
> 赞同：1
> 
> 时间：2012-09-21T13:01:49.543
> 
> 标签：facebook, api, facebook-graph-api, explorer

我正在尝试使用 Graph Api Explorer 创建一个新问题，如何在 options[] 参数中包含数组值。它给了我回应

{ "error": { "type": "Exception", "message": "请至少添加两个选项。", "code": 1525025 } }

如何在图形 API 资源管理器中包含数组值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:11:10.537

```
Eventually i was able to do so , below is the request format for testing out posting of questions through Graph Api Explorer

question => "your Question" 
option => ['123','1342','1'] 
allow_new_options  => true or false // only two  values accepted.

This is the perfect request example to post a question on facebook. 
```

# javascript - 引导时间选择器

> ID：12531146
> 
> 赞同：2
> 
> 时间：2012-09-21T13:02:42.640
> 
> 标签：javascript, html, twitter-bootstrap, timepicker

我正在尝试找到一个与引导样式兼容的时间选择器小部件。我真的很喜欢[jdewit](https://github.com/jdewit/bootstrap-timepicker)小部件的风格，但它有大量的错误。我正在努力快速完成这个项目，所以我不想陷入修复库错误的困境。

其他人可以推荐一个可以生产的光滑时间选择器吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T00:57:49.613

我是 jdewit/timepicker 的作者。

我终于花了一些时间来解决所有报告的问题。希望它能满足你的需求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T06:26:41.247

~~你可以试试我们的[https://github.com/Bloafer/bootstrap-timepicker](https://github.com/Bloafer/bootstrap-timepicker)~~

我们现在正在使用这个[https://github.com/Eonasdan/bootstrap-datetimepicker](https://github.com/Eonasdan/bootstrap-datetimepicker)因为它正在积极开发中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T07:01:49.660

我尝试使用[https://github.com/Bloafer/bootstrap-timepicker](https://github.com/Bloafer/bootstrap-timepicker)，它并没有发现它很有帮助，因为它需要将时间格式设置为 HH:MM，而我的提供为 HH:MM:SS . 造型也不是最好的。

这对我来说也是一个问题，我尝试了 4 个时间选择器，并且它们在引导下都有某种问题，我也希望看到这个问题的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-30T18:00:08.390

你可以试试这个：[https ://github.com/jonataswalker/timepicker.js](https://github.com/jonataswalker/timepicker.js)

我是这个东西的作者。

你会使用这样的东西：

```
var timepicker = new TimePicker(['field1', 'field2'], {
  theme: 'dark', // or 'blue-grey'
  lang: 'pt' // 'en', 'pt' for now
});
timepicker.on('change', function(evt){
  console.info(evt);

  var value = (evt.hour || '00') + ':' + (evt.minute || '00');
  evt.element.value = value;
}); 
```

# iphone - 跨应用会话记住值

> ID：12531147
> 
> 赞同：0
> 
> 时间：2012-09-21T13:02:45.690
> 
> 标签：iphone, objective-c

我的应用程序中有一个文本字段。

当用户输入文本时，我需要一种方法来“记住”文本字段中的值，以便在用户退出应用程序并稍后重新启动时可以调用它。

请你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:10:53.327

您可以`NSUserDefaults`用来存储/检索您的文本字段数据。

```
//To store
[[NSUserDefaults standardUserDefaults] setValue:@"Hello World" forKey:@"anyKey"];
[[NSUserDefaults standardUserDefaults] synchronize];

//To retrieve
yourTextField.text = [[NSUserDefaults standardUserDefaults] valueForKey:@"anyKey"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:09:55.380

最简单的方法是使用[`NSUserDefaults`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

NSUserDefaults 实际上是一种在应用程序会话之间存储设置和配置选项的方法（例如，如果用户选择静音，游戏可能会使用它来“记住”）。

你可以用它来做这个，但它根本不是问题。阅读我在上面链接到您的课程参考，如果您遇到困难，请回来询问任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:12:57.483

将值存储在 NSUserDefaults standardDefaults 中，第一次输入这样的值时，..

```
[[NSUserDefaults standardDefaults]setValue:textField.text forKey:@"username"]; //key is user defined 
```

然后

查看

```
if (! [[[NSUserDefaults standardDefaults]valueForkey:@"username"]isEqualToString:@""]){
        textField.text =(NSString *) [[NSUserDefaults standardDefaults]valueForkey:@"username"];
    } 
```

# drupal-7 - 如何删除我的 drupal 上不需要的广告

> ID：12531149
> 
> 赞同：-1
> 
> 时间：2012-09-21T13:02:49.980
> 
> 标签：drupal-7, ads

我在我的 drupal 网站上看到了一些广告。不知道它们来自哪里，但我想摆脱它们。任何帮助表示赞赏

[![广告弹出底部](../Images/a0af1845b0d104e357a98e3f3334ee54.png)](https://i.stack.imgur.com/2BkkF.png)

这个不时从屏幕底部出现。你可以最小化它，但它不会消失，除非我关闭我的网页，然后再次打开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:49:35.433

它与 Softonic 工具栏有关，与 Drupal 无关。

我删除了所有工具栏或我安装的那种不需要的程序（没有良心），然后用 Malwarebytes 和 CCleaner 清理。

现在一切都很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T22:47:44.813

我有同样的问题。我通过停用广告选项解决了这个问题。为此，只需点击广告底部的“广告选项”。您将获得一个页面，其中提到了有关广告的不同内容。点击“停用”链接。它将转到另一个页面，您可以在其中停用广告。它不会回来了。

# sql - 在 ruby on rails 中将数据从一个表添加到另一个表

> ID：12531150
> 
> 赞同：0
> 
> 时间：2012-09-21T13:02:51.510
> 
> 标签：sql, ruby-on-rails, migration

在我当前的项目中，我必须在一个表的列中获取一些数据并将它们放到第二个表中。第一个表数据已保存为哈希，如下所示：

```
--- 
- werweqr
- test
- B1
- B2
- B3
- xvxczv 
```

我在迁移文件中编写了以下代码，以将第一个表中的数据添加到第二个表中。但是数据不是从第一个发送到第二个。

```
 @scenario_response = ScenarioResponse.where("selected_barriers != ?", "");
    @scenario_response.each do |p|
      p.selected_barriers.each do |barrier|
        Settings.test = barrier
        # SelectedBarriers.create(:scenario_response_id => p.id, :barrier => barrier)

      end
    end 
```

如果我的代码有问题，谁能告诉我。

如果是这样如何解决？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:07:42.713

我认为您不需要在 p.selected_barriers 上调用“each”。尝试删除 each 并执行以下操作： `Settings.test=p.selected_barriers`。我也是 RoR 的新手。据我说，scenario_response 是一个集合，它返回所有将 selected_barriers 设为“”的实例。由于您正在对集合进行 each，因此您将只有一个 selected_barriers 项目用于它们中的每一个。请试试这个，如果我错了，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:14:13.493

你也没有做update_attributes。尝试做`Settings.update_attributes(params[:test])`之后`Settings.test = barrier`。

# java - 多线程环境下重用ResultSet成员变量

> ID：12531155
> 
> 赞同：0
> 
> 时间：2012-09-21T13:03:25.167
> 
> 标签：java, mysql, jdbc, resultset

我正在实现一个使用 JDBC 驱动程序的代码。

下面是我制作的代码。

```
public class MysqlUtils {
    public Connection conn;
    public ResultSet rs;
    public PreparedStatement stmt;

    public MysqlUtils(String address, String id, String passwd) {
        try {
            conn = DriverManager.getConnection(address, id, passwd);
            stmt = null;
            rs = null;
        } catch (SQLException e) {
            // error management
        }
    }

    public void getSomeData(long id) {
        try {
            stmt = conn.prepareStatement("SELECT * FROM some_table");
            rs = stmt.executeQuery();
            rs.next();
            System.out.println(rs.getString("some_column");
        } catch (SQLException e) {
            // error management
        }
    }
} 
```

我已将 Connection conn、ResultSet rs、PreparedStatement stmt 声明为成员变量，因为我认为这可能有助于提高性能。

我有一些问题。

1.  如果我连续调用 getSomeData() ，每次都会为 stmt 和 rs 分配新对象吗？

2.  不管上面问题的答案如何，如果我在多线程环境（使用 MysqlUtils 类的多个线程）中运行这段代码，会不会因为我没有在 getSomeData() 中声明 ResultSet rs 而造成混淆？

3.  将 Connection conn、ResultSet rs、PreparedStatement stmt 声明为成员变量是一个糟糕的选择吗？换句话说，我的 JDBC 实现是可行的吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:21:19.420

1.  是的。该方法将被执行，因此`stmt`将`rs`采用新值。当然，您的类可能有多个实例，因此这两个字段也有多个实例。
2.  是的。这段代码是完全线程-* *un* *安全的。一般来说，公共领域几乎总是应该避免的。特别是在多线程环境中
3.  是的，这是一个糟糕的选择。变量的范围应尽可能小。并且这些变量在单个方法中使用，并且每次都重新分配。它们应该是局部变量。

还：

*   一个方法`getSomeData()`应该返回一些东西，而不仅仅是打印一些东西
*   ResultSet 和 Statement 应该在 finally 块中关闭
*   我希望错误管理不在于吞下异常

我建议使用 spring-jdbc，它会为您处理所有管道代码，并避免您的代码当前存在的所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:20:33.197

不要在方法之外使用 ResultSet .... 使用 while(rs.next) (rs=resultSet) 您正在循环访问数据库表并检索值！

# sql-server-2008 - 在生产性 SQL Server 2008 上安装 Reporting Services 时需要注意什么

> ID：12531156
> 
> 赞同：0
> 
> 时间：2012-09-21T13:03:25.190
> 
> 标签：sql-server-2008, reporting-services

我有一个正在运行的 sql server 安装，我想在其上安装报告服务模块。现在因为它自己保持可用和运行而没有任何中断的 sql 服务器非常重要，所以我对这一步有点害怕。

现在我的问题。在安装模块之前，我必须注意哪些陷阱？例如，在安装过程中服务器是否重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:35:29.557

你可以先在虚拟机中尝试这种变化吗？

例如，使用 Disk2vhd 应用程序 (http://technet.microsoft.com/en-us/sysinternals/ee656415.aspx) 制作当前生产系统的快照。然后，使用在 Microsoft Virtual PC、Hyper-V 或 Windows 7 本机 VHD 引导中创建的 VHD。

如果您尝试使用虚拟机进行测试，请在启动虚拟机之前禁用网络或创建专用网络！在您的网络上拥有两个具有相同名称和 SID 的服务器是一件坏事。

（如果您不使用虚拟机，是不是时候？:)

# java - 从 ServletContextListener 访问位于 WAR 文件根目录中的文件

> ID：12531159
> 
> 赞同：1
> 
> 时间：2012-09-21T13:03:41.337
> 
> 标签：java, servlets, servlet-listeners

我有一个`.war`文件。我需要访问位于里面的文件`ROOT_OF_WAR/someFolder/myfile.txt`

我如何使用它来访问它`ServletContextListener`？

是否`ContextClassLoader#getResourceAsStream(resourceName)`指向网络应用程序的根目录（即文件的根`.war`目录）？

或者我需要使用它来访问它`ServletContextEvent#getServletContext().getResourceAsStream("someFolder/myfile.txt");`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:11:04.350

```
ServletContext context = servletContextEvent.getServletContext();    
File file = new File(context.getRealPath("/someFolder/myFile.txt")); 
```

这就是你所需要的。[见这里](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)。

# jquery - jQuery：获取最后点击的 element.id

> ID：12531161
> 
> 赞同：0
> 
> 时间：2012-09-21T13:03:43.013
> 
> 标签：jquery, menu, element

我需要你的帮助。我想创建一个带有slideUp 和slideDown 效果的小菜单。我找到了解决方案，但我想问您是否有“更清洁”和更好的解决方案。

这是我的代码：

```
var menu_id = "";
$('.menu li a').click(function(){
    var currentId = $(this).attr('id');
    if(menu_id != ""){
        $('#frame-' + menu_id).slideUp();
    }
    if(currentId != menu_id){
        $('#frame-' + currentId).slideDown();
        menu_id = currentId;
    }
    else{
        menu_id = "blank"
    }
}); 
```

问候达里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:09:26.563

这也应该有效：

```
$(".menu li a").click(function() {
    var frame = $('#frame-' +  this.id);
    if (!$(frame).is(":visible")) {
        $("[id^='frame-']").slideUp();
        $(frame).slideDown();
    } else {
        $(frame).slideUp();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:51:05.653

根据 sp00m 的帖子，试试这个

```
$(".menu li a").click(function() {
   var frame = $('#frame-' +  this.id);
   if ($(frame).is(":visible")) {
       $(frame).slideUp();
   }
   else{
       if($("[id^='frame-']:visible").length == 0)
       {
           $(frame).slideDown();
       }
       else if($("[id^='frame-']:visible").length == 1)
       {
           $("[id^='frame-']:visible").slideUp(function(){
               $(frame).slideDown();
           });
       }                   
   }
}); 
```

# java - maven 在编译时获取属性

> ID：12531162
> 
> 赞同：2
> 
> 时间：2012-09-21T13:03:44.963
> 
> 标签：java, maven

我们如何在编译时获取源文件中的 Maven 属性

```
pom.xml

<artifactId>myApp</artifactId>
<version>1.0.0</version>

Main.java

public class Main {
  private static final String artifactId = "project.artifactId";
  private static final String version = "project.version";
} 
```

课堂上可以硬编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:09:59.853

您可以使用 maven 属性在 generate-src 目录中创建 java 源文件，并通过 build helper maven 插件将其附加到源文件夹列表中。

您将控制 java 文件的内容。

创建源 java 文件的一种方法是使用带有内联的 groovy maven 插件。

# javascript - Kendo UI - 从不同网格复制的批量编辑行导致两个网格中的行都被更新

> ID：12531167
> 
> 赞同：1
> 
> 时间：2012-09-21T13:04:10.377
> 
> 标签：javascript, jquery, kendo-ui

我正在做的是将行从一个网格复制到另一个网格。原始网格不可编辑，但目标网格可编辑。

因此，当我连续加载并更改它时，它也会更改原始网格中的值。

此外，如果我将原始网格中的一行添加到目标网格两次，我会遇到更多问题。目标网格中任一行上的一个数据更改会更改目标表中另一行中的数据，以及原始网格中的“只读”版本。

我怀疑这是由于所有复制的行都保留了从中复制它的父**项的数据 uid 。**如果有人可以确认/否认这一点并可能给我一个解决方法，我将非常感激！

旁注：由于实现要求，所有这些代码都必须是客户端，所以我不能通过控制器方法来完成这项工作。我确实让它以这种方式工作，但是对于我需要它做的事情来说还不够好。

**原始网格（复制自）：**

```
@(Html.Kendo().Grid(Model)
.Name("ProductBookGrid")
.Columns(columns =>
{
    columns.Bound(i => i.FreightClass).Width(70);
    columns.Bound(i => i.Length).Width(70);
    columns.Bound(i => i.Width).Width(70);
    columns.Bound(i => i.Height).Width(70);
    columns.Bound(i => i.DimensionUOM).Width(70);
    columns.Bound(i => i.QuantityValue).Width(70);
    columns.Bound(i => i.QuantityUOM).Width(70);
    columns.Bound(i => i.WeightValue).Width(70);
    columns.Bound(i => i.WeightUOM).Width(70);
    columns.Bound(i => i.NMFC).Width(75);
    columns.Bound(i => i.Description).Width(150);
})
.ToolBar(toolbar =>
{
    toolbar.Custom().Text("Add").Url("#_").HtmlAttributes(new { onclick = "PopulateItemGrid()" });
})
.Pageable()
.Sortable()
.Scrollable()
.Filterable()
.Resizable(resize => resize.Columns(true))
.Reorderable(reorder => reorder.Columns(true))
.DataSource(dataSource => dataSource
    .Ajax()
    .Model(model =>
    {
        model.Id(i => i.ItemModelID);
    })
)
.Selectable(selectable => selectable.Mode(GridSelectionMode.Multiple)) 
```

)

**复制功能：**

```
 function PopulateItemGrid() {
var productBookGrid = $("#ProductBookGrid").data("kendoGrid");
var itemGrid = $("#QuoteItemGrid").data("kendoGrid");

productBookGrid.select().each(function () {
    var dataItem = productBookGrid.dataItem($(this));
    itemGrid.dataSource.add(dataItem); 
});

$("#ProductBookMenu").data("kendoMenu").close("#Item1"); 
```

}

**目标网格：**

```
@(Html.Kendo().Grid(Model.ItemModelList)
.Name("QuoteItemGrid")
.Columns(columns =>
{
    columns.Bound(i => i.FreightClass)
        .EditorTemplateName("ItemGrid_RefFreightClassListing")
        .Width(50);
    columns.Bound(i => i.Length)
        .EditorTemplateName("ItemGrid_Length")
        .Width(30);
    columns.Bound(i => i.Width)
        .EditorTemplateName("ItemGrid_Width")
        .Width(30);
    columns.Bound(i => i.Height)
        .EditorTemplateName("ItemGrid_Height")
        .Width(30);
    columns.Bound(i => i.DimensionUOM)
        .EditorTemplateName("ItemGrid_RefUOMListingDimension")
        .Width(50);
    columns.Bound(i => i.QuantityValue)
        .EditorTemplateName("ItemGrid_QuantityValue")
        .Width(30);
    columns.Bound(i => i.QuantityUOM)
        .EditorTemplateName("ItemGrid_RefUnitTypeListing")
        .Width(50);
    columns.Bound(i => i.WeightValue)
        .EditorTemplateName("ItemGrid_WeightValue")
        .Width(30);
    columns.Bound(i => i.WeightUOM)
        .EditorTemplateName("ItemGrid_RefUOMListingWeight")
        .Width(50);
    columns.Bound(i => i.NMFC).Width(50);
    columns.Bound(i => i.Description).Width(100);
    columns.Bound(i => i.IsSaved).Width(20);
    columns.Command(command =>
    {
        command.Destroy();
    }).Width(60);
})
.ClientDetailTemplateId("ItemDetails")
.ToolBar(toolbar =>
{
    toolbar.Create();
    //toolbar.Save();
})
.Editable(editable => editable.Mode(GridEditMode.InCell).CreateAt(GridInsertRowPosition.Bottom))
.Pageable()
.Sortable()
.Scrollable()
.Resizable(resize => resize.Columns(true))
.DataSource(dataSource => dataSource
    .Ajax()
    .Batch(true)
    .ServerOperation(false)
    .Events(events =>
    {
        events.Error("QuoteItemGrid_ErrorHandler");
    })
    .Model(model =>
    {
        model.Id(i => i.ItemModelID);
        model.Field(i => i.DimensionUOM).DefaultValue("in");
        model.Field(i => i.WeightUOM).DefaultValue("lbs");
    })
    .Create(create => create.Action("CreateProducts", "ItemGrid"))
    .Read(read => read.Action("GetProducts", "ItemGrid"))
    .Update(update => update.Action("UpdateProducts", "ItemGrid"))
    .Destroy(destroy => destroy.Action("DeleteProducts", "ItemGrid"))
) 
```

)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T07:08:47.543

您可以使用[toJSON](http://docs.kendoui.com/api/framework/observableobject#tojson)方法获取原始数据：

```
var dataItem = productBookGrid.dataItem($(this));

itemGrid.dataSource.add(dataItem.toJSON()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T01:39:14.073

```
var userListGrid = $("#grid1").data("kendoGrid");
var selectedUserListGrid = $("#grid2").data("kendoGrid");

//Clear data.
$("#grid2").data('kendoGrid').dataSource.data([]);

for (var i = 0; i < userListGrid._data.length; i++) {

    var dataitem = userListGrid._data[i];
    //Some condition before add [IsChecked is a model property]
    if (dataitem.IsChecked == true) {
        selectedUserListGrid.dataSource.add(dataitem);
    }
} 
```

# php - 从 POST 方法调用 JSON 事件后需要返回完整日历

> ID：12531168
> 
> 赞同：0
> 
> 时间：2012-09-21T13:04:12.380
> 
> 标签：php, json, forms, post, fullcalendar

我正在使用 JQuery Full Calendar 来显示来自我的 mysql localhost 的 JSON 提要的结果。最初它使用 更新日历功能`events: "json-events.php",`，但我也尝试`json-events.php`使用 POST 方法和提交按钮从表单上的提交按钮运行。虽然 JSON 提要效果很好，但我只能得到结果的 ECHO，并且无法返回 index.php 以在日历上显示结果。json-events.php 的代码...

```
<?php

$year = date('Y');
$month = date('m');
$day = date('d');

$link = mysql_connect('localhost','root','');
if (!$link) { die('Could not connect: ' . mysql_error()); }
mysql_select_db('jauntUK');

$latevent = $row['Lat'];
$lngevent = $row['Long'];
$tgtlat = $_POST['searchlat'];
$tgtlatstring = number_format($tgtlat, 16, '.', '');
$tgtlng = $_POST['searchlong'];
$tgtlngstring = number_format($tgtlng, 16, '.', '');

if($_POST) {

    $result = mysql_query("SELECT *, ( 3959 * acos( cos( radians( `Lat` ) ) * cos( radians(" . $tgtlatstring . ") ) * cos( radians(" . $tgtlngstring . ") - radians( `Long` ) ) + sin( radians( `Lat` ) ) * sin( radians(" . $tgtlatstring . ") ) ) ) AS distance FROM EventData HAVING distance < 5")
or die (mysql_error());

// Initializes a container array for all of the calendar events
$jsonArray = array();

while($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
    var_dump($row);

 $eventtitle = $row['Title'];
 $eventdate = $row['StartDate'];
 $eventend = $row['EndDate'];
 $eventallday = $row['FullDay'];
 $eventURL = $row['URL'];
 $Description = $row['Description'];
 $Address1 = $row['Address1'];
 $Address2 = $row['Address2'];
 $Address3 = $row['Address3'];
 $Address4 = $row['Address4'];
 $PostCode = $row['PostCode'];
 $Admission = $row['Admission'];

 // Stores each database record to an array
 $buildjson = array('title' => "$eventtitle", 'start' => "$eventdate", 'end' => "$eventend", 'allday' => "$eventallday", 'eventURL' => "$URL", 'description' => "$Description", 'Address1' => "$Address1", 'Address2' => "$Address2", 'Address3' => "$Address3", 'Address4' => "$Address4", 'PostCode' => "$PostCode", 'Admission' => "$Admission");

 // Adds each array into the container array
 array_push($jsonArray, $buildjson);
}
// Output the json formatted data so that the jQuery call can read it
echo json_encode($jsonArray);   
header('location: index.php');

 } else { 

 echo json_encode(array(

        array(
            'id' => 001,
            'title' => "Search for events near you",
            'start' => "$year-$month-$day",

        )

    ));
}
?> 
```

有什么建议吗？- 在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:02:28.907

您是否要保留旧事件并添加新事件？还是只显示新事件？如果是前者，您可以尝试使用 AJAX 而不是提交表单并重定向回 index.php。您可以返回成功的数据并使用[http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/](http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/) 来呈现它。像这样的东西

```
('#submit-button').on("click",function(){

  $.ajax({
        type:"POST",
        url: "json-events.php",
        data: $('#your-form').serialize(),
        success: function(data){
                        $.each(data, function(index, event){
                          $('#calendar').fullCalendar('renderEvent', event);
                        );
        }
    });
    return false;  // to stop the form from actually submitting
}); 
```

您需要在日历页面上的文档就绪功能内的任何位置添加此代码。当在您的表单上单击提交按钮时，它会将数据从您的表单发送到您的 json-events.php 页面。在那里您查询您的数据库并使用 json_encode 返回事件。然后在成功函数中呈现您刚刚从数据库中提取的每个事件。[我从fullcalendar js](https://stackoverflow.com/questions/8218224/fullcalendar-js-fetching-more-events-with-ajax)中借用了上面的示例：使用 ajax 获取更多事件不知道它是否有效，但您可以看到这个想法。

如果您不想显示旧事件，您可以查看添加

```
('#calendar').fullCalendar('removeEvents'); 
```

在添加新的之前。

# ruby-on-rails - Geokit 以英语和其他语言返回结果

> ID：12531170
> 
> 赞同：1
> 
> 时间：2012-09-21T13:04:20.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, geokit

我只是尝试使用 Geokit 1.6.0 对简单地址“东京”进行地理编码，地理编码器返回东京都而不是“东京”。

如何要求地理编码器始终以英文返回结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:31:47.120

Geokit 不允许您指定语言选项（即使您使用的提供者可以使用它）。如果您使用 Google 作为您的提供商，您至少可以覆盖该`do_geocode`方法以接受语言选项（例如[此处](https://groups.google.com/forum/?fromgroups=#!searchin/geokit/language/geokit/WyS0xoH2jb4/oSJinHCEUHgJ)）。

或者，我建议使用[Geocoder gem](http://www.rubygeocoder.com/)：

```
$ gem install geocoder
$ geocode 'Tokyo'
Latitude:         35.6894875
Longitude:        139.6917064
Full address:     Tokyo, Japan
City:             
State/province:   Tokyo
Postal code:      
Country:          Japan
Google map:       http://maps.google.com/maps?q=35.6894875,139.6917064 
```

默认情况下，Geocoder gem 使用 Google 的地理编码 API，默认语言为英语。但是 Geocoder 有一个语言选项。让我们试试俄语：

```
$ geocode -l ru 'Tokyo'
Latitude:         35.6894875
Longitude:        139.6917064
Full address:     Токио, Япония
City:             
State/province:   Токио
Postal code:      
Country:          Япония
Google map:       http://maps.google.com/maps?q=35.6894875,139.6917064 
```

以下是Google 地理编码 API 支持[的语言和语言代码列表。](https://spreadsheets.google.com/pub?key=p9pdwsai2hDMsLkXsoM05KQ&gid=1)

# javascript - 遍历列表 使用 jQuery

> ID：12531172
> 
> 赞同：1
> 
> 时间：2012-09-21T13:04:40.087
> 
> 标签：javascript, jquery

`<div>`在以下示例中，我想使用 jQuery 遍历 s 列表：

```
<div id="selectedDefinitionsDiv">
    <div id="selectedDef1" class="myclass">
        <textarea class="textClass" style="margin-left:5px;width:600px;height:80px;">an adoptive country</textarea>
        <input type="button" onclick="removeSelectedDefinition(1)" value="Delete">
    </div>
    <div id="selectedDef2" class="myclass">
        <textarea class="textClass" style="margin-left:5px;width:600px;height:80px;">my adopted state</textarea>
        <input type="button" onclick="removeSelectedDefinition(2)" value="Delete">
    </div>
</div> 
```

我想提取每个文本区域中的数据。在上面的例子中，这将 `an adoptive country` **是** `my adopted state`

我试过了

```
$(#selectedDefinitionsDiv).children('myclass').each(function(i) { 
    var val = $(this).children('textClass').value;
    processString( val );
}); 
```

但它根本没有进入循环。知道我的 jQuery 有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:07:47.907

选择器中缺少引号

**改变**

```
$(#selectedDefinitionsDiv) 
```

**到**

```
$("#selectedDefinitionsDiv") 
```

*还将值更改为 val() 并添加 . 在选择器中的类名之前*

```
$("#selectedDefinitionsDiv").children('.myclass').each(function(i) { 
    var val = $(this).children('.textClass').val();
    processString( val );
}); 
```

关于关闭`>`第一个 div 的更多内容

**[jsBin 上的现场演示](http://jsbin.com/uselaf/1/edit)**

**[jsFiddle 上的现场演示](http://jsfiddle.net/rajaadil/y3Gsu/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:08:19.450

1.  您需要引号： $("#selectedDefinitionsDiv")
2.  取而代之的是价值，你需要使用 val()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:10:00.920

只是看起来需要整理一下 -`myclass`需要以 a 为前缀，`.`并且`id`需要用引号引起来。

`children('.textClass')`还需要一个`.`前缀：

```
$("#selectedDefinitionsDiv").children(".myclass").each(function(i)
{
   var val = $(this).children('.textClass').val();
   processString( val );
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T13:11:23.133

使用您现有的代码，您可能会收到 JavaScript 错误，因为语法是非法的。这解释了为什么代码没有执行。非法语法是

```
$(#selectedDefinitionsDiv) 
```

像这样缺少周围的引号`$('#selectedDefinitionsDiv')`。

然而，虽然这修复了语法错误，但选择器还有其他问题。

第二个和第三个选择器中的 CSS 类选择器`children('myclass')`缺少`.children('textClass')`前导`.`- 它应该是`.myclass`并且`.textClass`您需要使用 jQuery`.val()`而不是纯 JavaScript `.value`，因为您正在调用的对象`.value`是 jQuery 对象。

一个更简单的解决方案是只提供一个更具体的选择器：

```
$('#selectedDefinitionsDiv .textClass').each(function(i) {  
    var val = $(this).val();
    processString(val);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T13:36:36.477

试试这个：

```
$('textarea').each(function(i) { 
    var val = $(this).val();
    processString( val );
}); 
```

希望这可以帮助。

# android - 当目标 sdk 版本大于 10 时，Android Action Bar 菜单不显示。为什么？

> ID：12531174
> 
> 赞同：5
> 
> 时间：2012-09-21T13:04:43.210
> 
> 标签：android, android-actionbar, android-menu

我有一个不会总是显示的应用程序范围的菜单。具体来说，我的问题是，当我将没有硬件菜单按钮的设备的目标 sdk 版本设置为 16 时，实际上应该出现的 3 个点（操作栏？）却没有。

我有以下清单条目

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10" /> 
```

在没有硬件按钮的 avd 模拟器中，我看到操作栏菜单的 3 个点

但是如果我将目标设置为 16

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" /> 
```

没有操作栏出现

我在各种资源文件夹中设置了样式 - values、values-v11 和 values-v14

特别是在 values-v14 中，我有一个 styles.xml 文件，其中指出

```
<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar" /> 
```

设置主题的清单条目是

```
<application android:label="@string/app_name"
android:name="uk.co.pjadult.mobile.adult_reader_lib.BookLib"
android:icon="@drawable/ic_launcher"
android:theme="@style/AppTheme"> 
```

我想知道是否需要为所有 sdk 版本设置具有样式的资源文件夹？

我不知道正确的方法应该是什么才能设置 android:targetSdkVersion="16" 并显示操作栏（3个点）菜单

***更新*****我现在使用 ActionBarSherlock 没有问题**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T04:25:24.627

有关该问题的更多信息，请参阅@Mr.S 提供的链接，[Android 缺少 MENU 按钮](http://techblog.rokoder.com/android-missing-menu-button/)。

但要回答你的问题：

> 我想知道是否需要为所有 sdk 版本设置具有样式的资源文件夹？

不，它将采用*最高*可用的 API。例如，如果您有：

*   `values.xml`
*   `values-v11.xml`
*   `values-v16.xml`

以下示例 Android OS API 级别将使用：

*   API 4：`values.xml`
*   API 10：`values.xml`
*   API 11：`values-v11.xml`
*   API 13：`values-v11.xml`
*   API 16：`values-v16.xml`

等等。

> 我不知道正确的方法应该是什么才能设置 android:targetSdkVersion="16" 并显示操作栏（3个点）菜单

如果活动是全屏的，任何高于 10 的 API 级别（最低或目标）都会导致点消失。解决这个问题的唯一方法是编写自己的菜单系统，或者使用像[ActionBarSherlock](http://actionbarsherlock.com/)这样的垫片库。

如果活动通常有标题栏，但您想将 API 级别设置为 10 以上，则必须`Holo.Theme`为活动设置输入代码。请参阅此[Holo Everywhere](http://android-developers.blogspot.com/2012/01/holo-everywhere.html)博客文章和[Android 主题、全屏和操作栏](https://stackoverflow.com/q/12569450/2291)，了解如何执行此操作。

更新：请注意，较新的 Android 硬件指南不需要硬件菜单按钮。而且这个hack只适用于使用软按钮的设备（比如Nexus 7）。对于两者都不提供的设备（例如许多 HTC 设备），用户将无法进入菜单——即使有这个 hack。强烈*建议*切换到操作栏概念。

# android - 将变量传递给 onOptionsItemSelected

> ID：12531176
> 
> 赞同：2
> 
> 时间：2012-09-21T13:04:57.500
> 
> 标签：android, variables

我对 Android 还很陌生，如果我的问题看起来很基本，我很抱歉。我昨晚整晚都在寻找它，但找不到解决方案（这让我觉得我想要实现的目标可能存在根本缺陷）。

基本上，我试图从 onOptionsItemSelected 内部调用一个方法。在 Android 开发者文档（[http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)）中，他们给出了这个例子：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
// Handle item selection
switch (item.getItemId()) {
    case R.id.new_game:
        newGame();
        return true;
    case R.id.help:
        showHelp();
        return true;
    default:
        return super.onOptionsItemSelected(item);
}
} 
```

但是，在我的应用程序中，我有需要输入的 onOptionsItemSelected 调用的方法。在我从 Android 开发者网站使用的示例的上下文中，这相当于我想要将整数“myint”传递给 newGame 方法：

```
@Override
public boolean onOptionsItemSelected(MenuItem item, int myint) {
// Handle item selection
switch (item.getItemId()) {
    case R.id.new_game:
        newGame(myint);
        return true;
    case R.id.help:
        showHelp();
        return true;
    default:
        return super.onOptionsItemSelected(item);
}
} 
```

当我这样做时，Eclipse 出现“public boolean onOptionsItemSelected(MenuItem item) {”行的错误，说我需要删除“@Override”命令。

我无法在互联网上找到任何人们以这种方式通过 onOptionsItemSelected（或 onConfigurationChanged 之类的方法）传递变量的示例，这就是为什么我认为我可能对它的工作原理存在根本性的误解。不幸的是，我不确定从哪里开始正确解决这个问题。目前我正在使用“公共静态”变量，所以我的方法（在这个例子中是 newGame）可以访问它们，但我意识到使用这些类型的变量似乎通常不受欢迎。

如果有人可以帮助我，甚至指出我需要搜索/阅读的方向，我将不胜感激。

谢谢

斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:10:11.467

你可以在你的类中有一个私有的非静态变量，当你选择菜单项时，你可以阅读：

```
case R.id.new_game:
    newGame(this.myint);
    return true; 
```

并在您的班级中名列前茅：

```
class MyActivity extends Activity {
    private int myint; 
```

您只需确保在用户单击菜单项之前为其分配了一个值！

# delphi - 使用 RTTI 从类中获取常量字段

> ID：12531178
> 
> 赞同：3
> 
> 时间：2012-09-21T13:04:59.813
> 
> 标签：delphi, rtti

我可以从一个类中枚举常量（const）吗？

我试过了

```
MyClass = class
const
  c1 = 'c1';
  c2 = 'c2';
  c3 = 'c3';
end;

procedure GetConst();
var
  ctx: TRttiContext;
  objType: TRttiType;
  field: trttifield;
  s: string;
begin
  ctx := TRttiContext.Create;
  objType := ctx.GetType(MyClass.ClassInfo);
  for field in objType.GetDeclaredFields do
    s:= field.Name;
end; 
```

我想得到c1，c2，c2。

这可能吗？

编辑：我想做的是为一些外部符号定义一些键（对于 cad 程序）

```
symbol1=class
    const
    datafield1='datafield1';
    datafield2='datafield2';
end;
symbol2=class
    const
    datafield21='datafield21abc';
    datafield22='datafield22abc';
end 
```

我不喜欢为此使用字段，因为我不喜欢将声明和初始化分开。我不能使用枚举，因为我不能将值定义为字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:55:18.380

您无法通过 RTTI 获得这些常数。我怀疑您最好的解决方案是使用属性。这不仅有实际工作的好处，而且我认为这听起来像是一个更清洁、更简单的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T15:47:56.807

如果您使用枚举，则可以使用`TypInfo`将字符串转换为枚举值，并将枚举值转换为代码中的字符串：

```
type
  TDataFieldName = (datafield1, datafield2, datafield3);

uses TypInfo;

var df: TDataFieldName;
begin
  df := TDataFieldName(GetEnumValue(TypeInfo(TDataFieldName), 'datafield1'));

  ShowMessage(GetEnumName(TypeInfo(TDataFieldName), Ord(df)));

  case df of
    datafield1:;
    datafield2:;
    datafield3:;
  end;
end; 
```

（从我的脑海中输入 - 没有测试过这个......）

这样 cad 程序可以将字符串传递给您的 Delphi 应用程序，您可以将它们翻译为枚举，或者您可以将枚举翻译为字符串以传递给 cad 程序。做一个`case`原始值是字符串的语句也很容易，转换为枚举。由于 Delphi 不支持`string`case 语句，因此这非常方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T20:54:49.363

我决定在我的课程中使用字段。由于我不想复制用于声明和初始化的字段，因此我使用 rtti 将字段初始化为字段的值。

好处是： 运行时没有 rtti 开销。rtti 仅在应用启动期间执行。我还可以使用继承，这对我的项目非常有用。

# java - Tomcat 无法通过 JDBC 连接器连接到 mysql

> ID：12531186
> 
> 赞同：1
> 
> 时间：2012-09-21T13:05:28.933
> 
> 标签：java, mysql, tomcat

我有一个 Web 应用程序，我尝试将它部署在带有 java6、tomcat6 和 mysql5.5 的远程 Windows 2003 服务器上。在我点击应用程序 url 部署应用程序后，我收到以下错误。我做了一些谷歌，发现一些链接说要更改`localhost`连接字符串`127.0.0.1`但没有用，一些链接说要检查连接字符串，所以我在同一台 Windows 机器上创建了一个简单的 java 类来测试连接字符串、用户名和密码。当我运行该类时，它运行良好，没有任何错误，但是当我运行使用相同连接字符串以及用户名和密码的 Web 应用程序时，它会抛出错误。还有一些链接建议修改`my.ini`mysql，但我在mysql安装目录中没有找到任何my.ini。

我没有任何线索来处理这个错误，所以请你指导我。完整的堆栈跟踪如下

```
INFO: Server startup in 2832 ms
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link fai
lure

The last packet sent successfully to the server was 0 milliseconds ago. The driv
er has not received any packets from the server.
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstruct
orAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingC
onstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
        at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1
117)
        at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
        at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2408)
        at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2
445)
        at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
        at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
        at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstruct
orAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingC
onstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
        at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java
:334)
        at java.sql.DriverManager.getConnection(DriverManager.java:582)
        at java.sql.DriverManager.getConnection(DriverManager.java:185)
        at com.adxchange.utils.DBConnectionSingleton.getConnection(DBConnectionS
ingleton.java:28)
        at com.adxchange.utils.ADXchange.getStates(ADXchange.java:402)
        at org.apache.jsp.homepage_jsp._jspService(homepage_jsp.java:252)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper
.java:388)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:3
13)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:206)
        at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatc
her.java:416)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:293)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcesso
r.java:877)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.pr
ocess(Http11AprProtocol.java:594)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:16
75)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:529)
        at java.net.Socket.connect(Socket.java:478)
        at java.net.Socket.<init>(Socket.java:375)
        at java.net.Socket.<init>(Socket.java:218)
        at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.ja
va:259)
        at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
        ... 38 more
getStates: Error in database connection 
```

可能是一些许可问题吗？

**编辑：**

我还在系统变量中创建了**CLASSPATH**变量，并在其中添加了**java\lib**和**tomcat\lib**路径，但仍然没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:34:31.067

对不起朋友让你努力寻找和回答我的问题，但我找到了解决方案。实际上，我对所有 db 和其他可更改的东西都使用了 .properties 文件是我的愚蠢错误，问题是我修改了错误的属性文件。太尴尬了，我为简单的事情弄得一团糟。无论如何，非常感谢你们的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:08:08.163

我认为您可能需要查看 tomcat 配置，这些现代设置上的一个常见错误是 mysql 或 tomcat 正在尝试使用 IPV6 进行连接，因此您需要确保仅在 IPV4 上侦听才能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:11:08.623

我还想看看你的 Tomcat 和 MySQL 之间是否有防火墙。您可能需要防火墙规则来为 MySQL 打开端口。

您可以通过从 Tomcat 服务器 ping MySQL IP 地址来判断。如果你不能 ping，你的应用程序也不能。

主机应该是 MySQL 服务器的名称，而不是 localhost。

数据库是否与 Tomcat 在同一个机器上运行？这不是一个好的设计。

你确定 MySQL 正在运行吗？您可以登录管理控制台并访问您的 Java 应用程序需要访问的数据库吗？如果是，Java 应用程序是否使用适当的凭据？（请不要告诉我你给了它管理员 root 访问权限。）

# ios - UIView/CALayer 批量加载以改善渲染

> ID：12531188
> 
> 赞同：1
> 
> 时间：2012-09-21T13:05:46.077
> 
> 标签：ios, uiview, calayer, nsoperation, nsoperationqueue

我有一个视图，其中包含许多子视图和子层，这些子视图和子层是使用 NSOperation 从后台线程构建的。然后我在将它们添加到已经显示的 UIView 时调用回主线程。当一切都完成渲染时，性能和响应能力非常好。但是，主线程似乎需要很长时间来对我的视图进行初始渲染，从而在初始渲染发生时导致性能问题。

如果我的 NSOperation 将子视图/子图层添加到当前可见的 UIView 中，我能够解决此性能问题，但在被点击之前它不会出现。调用 setNeedsDisplay 方法无法解决此问题。

我想知道他们是否是一种告诉主线程我正在添加一堆视图以便它知道更优化地执行此操作的方法？类似于 addSubviewRange 而不是 addSubview 的东西？

# node.js - express.compress() 和 express.responseTime() 不适用于控制器的输出

> ID：12531192
> 
> 赞同：2
> 
> 时间：2012-09-21T13:06:12.477
> 
> 标签：node.js, express, connect

我有以下脚手架快递应用程序：

```
var 
    express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path')
  , _ = require('underscore');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 5000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.compress());
  app.use(express.responseTime());
  app.use(require('less-middleware')({ src: __dirname + '/public' }));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
}); 
```

我对 express 生成器生成的代码所做的唯一修改：

```
 app.use(express.compress());
  app.use(express.responseTime()); 
```

问题：处理到 LESS 的文件被 gzip 压缩并且具有 X-HTTP-header 和响应时间，但是来自我的控制器（HTML 页面）的输出不是 gzipped 并且没有标题。

也许我理解连接中间件错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:29:20.423

对于要压缩的路由生成的页面（我假设这就是控制器的意思），您需要移动此行：

```
app.use(app.router); 
```

在这一行之后：

```
app.use(express.compress()); 
```

`express.compress`只影响在它之后添加的那些组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-11T10:59:52.650

对于express 4，需要安装模块。

```
var compress = require('compression')();
app.use(compress); 
```

# javascript - ExtJS Grid 自动存储单元状态

> ID：12531194
> 
> 赞同：-1
> 
> 时间：2012-09-21T13:06:24.647
> 
> 标签：javascript, gridview, extjs

我正在将相当大的软件移植到 ExtJS Grid。大量数据（我的意思是大量数据）按需加载到放置在网格单元格内的跨度中。

想象一下网格单元格`<span id="foo_bar'></span>`作为内容，并且特殊的 ajax 处理程序正在轮询后端以获取更新的信息，一旦可用，跨度就会被它填充。

现在，如果我折叠网格的某些部分然后再次重新展开它们，我会丢失所有自动填充的单元格内容，并留下空跨度（我首先从这里开始）。

我知道正确的方法是设置存储并将所有数据推送到存储中。但正如我上面提到的：我正在将相当多的遗留软件移植到 ExtJS，我在这里并没有太多选择。

有没有办法自动将网格单元格值推送到商店？

**更新：**

假设一个网格加载了 2000 个单元格（这可能会有很大差异）。每个单元格都包含各种等级的 HTML，主要是 . ，但这几乎可以是任何东西（包括一个单元格中的多个跨度或 div）。在后台有一个彗星进程几乎实时地将新数据推送到 HTML 页面。此数据根据其 ID 或类或两者填充到相应的 SPANS 和 DIV。

我想要实现的是：a）网格的模型使用单元格的新 html 内容自动更新（我该如何实现）？b) 当折叠/展开树的节点时，模型数据不会重新加载。

a 或 b 都可以吗？如果是这样 - 怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:56:46.910

只需在“特殊 ajax 处理程序”成功返回值时更新您的商店。避免手动弄乱dom。

所以在成功回调中执行类似 -> [loadData()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-loadData)

**编辑：**

似乎您正在使用非常糟糕的遗留代码:) 如果向 ajax 处理程序添加一行简单的代码是一项巨大的工作。但是您可以附加 dom 侦听器，但这是非常糟糕的做法。[这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-event-DOMSubtreeModified)有一些要听的事件

**编辑：**

[这](http://jsfiddle.net/Vandeplas/nRwGM/3/)是一个使用如何监听 dom 事件的示例，它是一个纯粹的 js 解决方案，但是，嗯.. 它可以工作..

# asp.net - 从文本框 ASP.NET 中的逗号分隔值填充下拉列表

> ID：12531198
> 
> 赞同：1
> 
> 时间：2012-09-21T13:06:38.377
> 
> 标签：asp.net, drop-down-menu, textbox, datasource, populate

我想用文本框中的逗号分隔值填充下拉列表。我有以下代码：

```
sDDvalues = txtValues.Text

Me.DropDownList1.Items.Clear()
Dim months() As String = {sDDvalues}
Me.DropDownList1.DataSource = months
Me.DropDownList1.DataBind() 
```

我在文本框中输入了：value1、value2 和“value1”、“value2”和“value1”、“value2”，但每个组合都作为 1 个选项返回：

```
<option value="'value1', 'value2'">'value1', 'value2'</option> 
```

输入months() 的实际值，例如： {"value1", "value2"} 返回正确的下拉列表：

```
<option value="value1">value1</option>
<option value="value2">value2</option> 
```

有谁知道如何解决这个问题，所以它从文本框中的值填充？

提前致谢！

马切利诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:21:34.240

采用

```
Dim months() As String = txtValues.Text.Split(New Char() {", "c})
Me.DropDownList1.DataSource = months 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:33:51.307

它应该是：

```
Me.DropDownList1.DataSource = txtValues.Text.Split(New Char() {" "c, "-"c}) 
```

就这样完成了：

```
Me.DropDownList1.Items.Clear()
Me.DropDownList1.DataSource = txtValues.Text.Split(New Char() {" "c, "-"c})
Me.DropDownList1.DataBind() 
```

文本框中的输入如下：`value1 value2 value3`

如果您想将其以逗号分隔，请使用：

```
Me.DropDownList1.DataSource = txtValues.Text.Split(",") 
```

在文本框中输入如下：这是我的 value1，这是我的 value2，这是我的 value3

感谢您的回复！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:08:38.857

只需拆分字符串并编写这将为您工作

```
Me.DropDownList1.DataSource = txtValues.Text.Split(New Char() {", "c}) 
```

# spring-mvc - 将 JFreeChart 与 SpringMVC 集成会引发异常：getOutputStream() 已为此响应调用

> ID：12531200
> 
> 赞同：1
> 
> 时间：2012-09-21T13:06:41.513
> 
> 标签：spring-mvc, jfreechart

我想在我的 web 应用程序中显示一个简单的图表，所以我决定将 JFreeChart 集成到 Spring MVC 中。我找到了以下解决方案：

```
@RequestMapping("/seeGraph")
    public String drawChart(HttpServletResponse response) {

        response.setContentType("image/png");
        XYDataset pds = createDataset();
        JFreeChart chart = createChart(pds);
        try {
            ChartUtilities.writeChartAsPNG(response.getOutputStream(), chart, 600, 400);            
            response.getOutputStream().close();

        } catch (Exception e) {

        }
        return "graph";
    } 
```

我想这不太好。尽管它确实显示了图形，但它也会引发异常：

```
getOutputStream() has already been called for this response] with root cause
java.lang.IllegalStateException: getOutputStream() has already been called for this response. 
```

我做了一些研究，发现应用程序可以在任何给定的响应上调用 getOutputStream 或 getWriter ，但不允许两者都做。

但是由于 ChartUtilities.writeChartAsPNG() 我必须调用 getOutputstream，而 Spring 将调用 getWriter()。

是否有任何巧妙的解决方案来避免这种异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:00:45.280

目前，您要求 Spring`graph`在执行控制器方法后渲染一个视图（通过从该方法返回视图名称）。但是，如果您将数据写入控制器内的输出，则不应继续查看渲染阶段。

因此，您需要改用一种`void`方法：

```
@RequestMapping("/seeGraph")
public void drawChart(HttpServletResponse response) { ... } 
```

# opengl - Android和PC上的OpenGL渲染？

> ID：12531213
> 
> 赞同：1
> 
> 时间：2012-09-21T13:07:38.023
> 
> 标签：opengl, opengl-es, cross-platform

我正在尝试制作某种可在 PC 和 Android 上使用的 OpenGL 包装器。

我的方法是拥有某种具有所有 OpenGL 函数的抽象 OpenGL 类，然后为每个平台使用一个专门的类来扩展该类。但是，在 Android 上似乎没有办法做到这一点，因为您需要一个 GL10 对象，该对象只能从诸如之类的函数中获取`onDrawFrame()`。您无法保存该 GL10 对象并在我的扩展抽象 OpenGL 的 Android GL 类中使用它。如果我尝试，什么都不会呈现，我不知道为什么。

那么有什么解决方法吗？如果在 Android GL 类中调用 OpenGL 函数，我需要有某种方法来执行`onDrawFrame()`渲染器类中的所有调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:21:57.890

如果您需要在 PC 和 Android 设备上运行 OpenGL 应用程序，您可以考虑使用[libgdx引擎。](http://code.google.com/p/libgdx/)这比创建自己的包装器更合理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:23:44.020

[jPCT](http://www.jpct.net/)是另一个不错的选择。基于 Java 并支持 PC 和 Android。

# sphinx - sphinx 得到非词干结果

> ID：12531216
> 
> 赞同：0
> 
> 时间：2012-09-21T13:07:50.243
> 
> 标签：sphinx

当我查询 sphinx 时，它首先将词干应用于我的输入关键字，并返回一组匹配的单词的结果。问题是结果关键字也被阻止了。

有没有办法从 sphinx 中获取原始搜索关键字而不是词干关键字。例如，如果我使用以下单词进行批量查询：

*   信用卡
*   在职的
*   走了

并假设 sphinx 找到了信用卡的匹配项。问题是 sphinx 返回我“信用卡”，我必须手动检查（通过比较字符串）与文档匹配的上述关键字之一。在我的情况下，这可能非常低效。

有什么建议吗？

# c# - 如何更改 Windows 资源管理器中使用的图标？

> ID：12531220
> 
> 赞同：2
> 
> 时间：2012-09-21T13:08:10.063
> 
> 标签：c#, windows

> **可能重复：**
> [Shell 图标覆盖 (C#)](https://stackoverflow.com/questions/843506/shell-icon-overlay-c)

Tortoise 会更改图标，以便您知道本地更改了哪些文件。这就是我想做的。

我想编写一个在特定条件下更改应用程序图标的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:12:41.347

它称为 shell 扩展，[Microsoft 建议不要在托管代码中编写它们](http://connect.microsoft.com/VisualStudio/feedback/details/587815/managed-net-4-shell-extension-hangs-explorer-only-in-xp-on-shutdown)。

这是[有关如何创建图标覆盖的官方 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144122.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:17:31.510

还请看：

*   [如何在 C# 2.0 中更改桌面快捷方式的图标？](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/ce3ba993-2578-48b5-acb4-5421af950b05)
*   [以编程方式更改可执行文件的图标](https://stackoverflow.com/questions/2539095/programmatically-change-the-icon-of-the-executable)

# html - 将标题嵌入到我网站的每个网页中

> ID：12531237
> 
> 赞同：0
> 
> 时间：2012-09-21T13:09:26.313
> 
> 标签：html, include

是否可以在您的普通网页中包含页眉和页脚，这样您就不必在每个页面上重复如此多的代码？

我知道你可以用 php 做到这一点，但是如果你建立一个纯粹基于 html 的网站呢？

如果没有答案或无法解决这个问题，这是否意味着我必须在每个页面上重复我的导航条码？

感谢您的任何帮助

戴尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:14:38.873

有一些不使用服务器端包含的解决方案，但它们非常糟糕：

*   框架/iframe
*   用 javascript 加载内容（AJAX 请求，或者将 HTML 存储在 js 文件中）

如果您不能使用其中任何一个，那么可以 - 您必须在每个文件中重复您的代码。如果服务器端包含是您的一个选项，您应该只使用它们。

# iphone - iPhone：将类对象发送到不同的函数

> ID：12531241
> 
> 赞同：-1
> 
> 时间：2012-09-21T13:09:32.673
> 
> 标签：iphone, objective-c

我是**IOS**开发的新手。我被困在一个地方，我想在我从该 void 函数调用的某个其他函数中使用 void 函数中的对象。你能告诉我怎么做吗？

这是代码：

```
-(void)buttonPressed: (id) sender withEvent: (UIEvent *) event{

UIButton *mybtn= (UIButton*) sender;
UserDetails *user;    (user is the object of the UserDetails class which I want to use).
user= [searchResult objectAtIndex.:mybtn.tag];

[self sendInviteData];  (I want to use "user" in this function).

} 
```

`SearchResult`是具有来自搜索栏的搜索结果的数组。每个单元格中都有一个。当我单击一个按钮时，我想在用户对象中获取该数据并将其发送到`sendInvite`函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:14:50.013

做这样的事情

```
-(returntype)sendInviteDataForUser:(UserDetails *)user{
    // do something
} 
```

然后你用

```
[self sendInviteDataForUser:user]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:13:55.880

为什么不让你的 sendInviteData 方法带一个参数呢？

```
- (void)sendInviteData:(UserDetails *)user {
... 
```

然后把它传进去？

```
[self sendInviteData:user]; 
```

# cygwin - Cygwin 和 PHP 可执行文件

> ID：12531243
> 
> 赞同：2
> 
> 时间：2012-09-21T13:09:36.983
> 
> 标签：cygwin

在 Windows 中，使用 Cygwin：如何在 shell 文件中获取 shebang 行以加载 PHP 解释器？我正在使用**prggmr**库。

默认情况下，在**shell**文件中，这就是我所拥有的

```
#!/usr/bin/php 
```

如果我在**Cygwin**中输入它，它会起作用：

```
php c:/path/to/file 
```

我的**环境路径**中有 PHP 和这个库设置，所以我可以输入**prggmr**。所以通过输入“prggmr”它应该可以工作，但我不断得到

```
/cygdrive/c/lib/prggmr/bin/prggmr: /cygdrive/c/wamp/bin/php/php5.4.3: 
bad interpreter: Permission denied 
```

我试过这些没有运气，和上面一样的错误：

```
#!/c/wamp/bin/php/php5.4.3
#!/cygdrive/c/wamp/bin/php/php5.4.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:59:51.513

如果我正确地阅读了您的路径，那么您已经安装了要与 PHP 一起使用的 Win32 PHP。通常，我会说不要这样做，因为事情会变得混乱。最好直接在 Cygwin 中安装 PHP imo。那里有一些资源，看看 [这个是](http://smehome.net/joomla/index.php?option=com_content&id=67%3ainstall-php-and-apache-on-cygwin)一个很好的起点。

# c++ - 如何获得程序分配的内存大小？

> ID：12531245
> 
> 赞同：5
> 
> 时间：2012-09-21T13:09:43.723
> 
> 标签：c++, c, qt, memory, opencv

我用 c 用 opencv 编写我的项目。我想打印有关分配的内存或程序使用的内存的信息。是否有功能可以提供有关内存的信息？最后我使用 Qt for Linux and Windows ，

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:21:29.643

您可以编写包装器`malloc`并`free`跟踪您正在使用的内存量。

编辑：如果您还想在外部库中拦截对 malloc 和 free 的调用，则必须在共享库中定义它们并在 libc 之前加载它。你如何做到这一点取决于你的操作系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T13:27:27.820

在 Linux 上，您可以查看[自己的进程信息伪文件](http://linux.die.net/man/5/proc)：

```
/proc/[pid]/statm
Provides information about memory usage, measured in pages. The columns are:
size       total program size
           (same as VmSize in /proc/[pid]/status)
resident   resident set size
           (same as VmRSS in /proc/[pid]/status)
share      shared pages (from shared mappings)
text       text (code)
lib        library (unused in Linux 2.6)
data       data + stack
dt         dirty pages (unused in Linux 2.6) 
```

在 Windows 上，您查看自己的进程[Process Object](http://msdn.microsoft.com/en-us/library/ms804621.aspx)性能计数器：

> `Private Bytes`显示此进程已分配但不能与其他进程共享的当前字节数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T18:10:13.737

如果您检查 elf、转储或映射文件，您还可以在构建期间对代码/数据段进行某种程度的内存分析。堆栈使用的 GCC 命令行选项是：**-fstack-usage 和 -fcallgraph-info。**

# javascript - JavaScript 数组命令历史

> ID：12531249
> 
> 赞同：0
> 
> 时间：2012-09-21T13:09:58.173
> 
> 标签：javascript, jquery, arrays

我正在编写一个非常简单的终端仿真器（ish）应用程序，并且正在尝试构建将`up-arrow`上一个命令加载到输入中的功能。到目前为止，我已经很接近了，但是我在数学中遗漏了一些东西，并且它无法正常工作...

```
command_history = {};
command_counter = -1;
history_counter = -1;

$('#term-command').keydown(function(e){
    code = (e.keyCode ? e.keyCode : e.which);
    // Enter key - fire command
    if(code == 13){
        var command = $(this).val();
        command_history[command_counter++] = command;
        history_counter = command_counter;
        alert('Run Command: '+command); 
        $(this).val('').focus(); 
    // Up arrow - traverse history
    }else if(code == 38){
        if(history_counter>=0){
            $(this).val(command_history[history_counter--]);
        }
    }
}); 
```

...`#term-command`我的输入在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:16:01.337

我认为您尝试访问 -1 的数组索引的问题

```
command_history[command_counter++] = command; 
```

command_counter = -1 首先尝试将其初始化为 0 或使用预增量（++command_counter）（如果它存在于 javascript 中）。还将 command_history 声明为数组。我会做的改变：

```
command_counter = 0; 
```

和

```
command_history = []; 
```

命令历史是一个数组 -

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:16:24.387

我会说问题是您将其定义`command_history`为 object`{}`而不是 array `[]`，因为您将它用作数组。

另外，我认为你想预先减少`--history_counter`

看到这个工作小提琴：

[http://jsfiddle.net/5DZxs/1/](http://jsfiddle.net/5DZxs/1/)

所以你的javascript看起来像：

```
command_history = []; //<-- Change here
command_counter = -1;
history_counter = -1;

$('#term-command').keydown(function(e){
    code = (e.keyCode ? e.keyCode : e.which);
    // Enter key - fire command
    if(code == 13){
        var command = $(this).val();
        command_history[command_counter++] = command;
        history_counter = command_counter;
        alert('Run Command: '+command); 
        $(this).val('').focus(); 
    // Up arrow - traverse history
    }else if(code == 38){
        if(history_counter>=0){
            $(this).val(command_history[--history_counter]); //<-- Change here
        }
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:17:11.790

变更声明

```
command_history[command_counter++] = command; 
```

到

```
command_history[++command_counter] = command; 
```

并将您的 command_history 变量设置为数组`command_history = [];`

它会解决你的问题

# android - 创建可在android应用程序中使用的服务器

> ID：12531252
> 
> 赞同：-3
> 
> 时间：2012-09-21T13:09:59.633
> 
> 标签：android, webserver

我将创建一个安卓拼车应用程序，用户可以在其中使用移动应用程序注册并发布拼车优惠。其他用户只能使用他们的移动应用程序搜索优惠。所以我想创建一个服务器来存储拼车报价和注册详细信息，并在其他用户搜索报价时也显示相同的内容。我不知道如何创建此服务器，我有另一台可以作为服务器的 PC，但我不知道应用程序将如何从该服务器发送/接收数据......或者如果我可以通过任何其他方式创建服务器，请指导.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:17:09.373

您不必创建*服务器*，而是创建一个*网络应用程序*或*网络服务*应用程序并通过`Apache Http client API`. 我想建议 - [Jersey RESTful Web 服务。](http://jersey.java.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:18:57.967

基本装备：

*   tomcat apache（或任何应用服务器）
*   mysql（或任何数据库）
*   java用于创建后端来管理数据

您可以创建一些 Web 服务（查找[jersey](http://jersey.java.net/)）来管理使用 JSON 检索和发送数据的请求（[gson](http://code.google.com/p/google-gson/)是一个很好且可靠的库）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:40:07.963

有很多方法可以为你的 android 应用程序创建服务器——这对你来说是最好的取决于你在服务器端得到了什么。在任何情况下，您都需要在您控制的某个域上拥有自己的网络服务器，并可以创建动态内容。

一些杂七杂八的想法：

从 android 客户端的角度来看，最简单的方法是一些基于 REST HTTP 的服务，可以进行用户身份验证。您可以考虑使用安全连接（以防万一）

认证将是必要的。最简单的两种实现方式是对您的应用程序进行一些基本的身份验证，但它不是很安全。使用 OAuth 之类的身份验证可以实现合理的安全性。

对您来说最好的解决方案是使用一些云托管服务（如 amazon、gae、heroku 或其他）。大多数云托管服务将为您提供开箱即用的 REST 样式框架、与身份提供者的集成以及一些方便的数据库引擎。

不要害怕成本，因为几乎每个云服务都会为您提供具有一定处理能力的免费帐户，如果您超出基本服务的范围，您可能会有足够大的用户群来支付这笔费用。

# sql - 客户端不需要安装什么数据库？

> ID：12531254
> 
> 赞同：-1
> 
> 时间：2012-09-21T13:10:03.120
> 
> 标签：sql, database

我正在为桌面编写一个数据库应用程序来保存数据，但是有些客户端没有安装 sql server，mysql。所以，我不打算使用它们。是否有不需要在客户端安装的数据库管理？例如：什么是数据库管理器(http://www.voidtools.com/download.php) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:12:58.593

那么[http://www.sqlite.org/](http://www.sqlite.org/)呢？

一个文件保存数据，SQL 可以获取它们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:13:03.297

使用 Sqlite。您无需安装任何东西，只需将库附加到您的应用程序即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:13:22.023

您可以使用[SQLite](http://sqlite.org)，它是一个单文件数据库。它没有任何特定的客户要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:13:24.117

如果您使用的是 a `java web application`，则可以使用`Derby DB`. 它是一个简单的 jar，您需要指定需要存储数据的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T13:13:38.610

看看向量和链表。这些可以作为文本文件保存在任何硬盘驱动器上的任何位置。然后，您可以使用套接字连接从任何客户端计算机连接到具有数据的计算机。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T13:14:17.267

尝试 sql compact edition sdf 文件或 ms 访问 mdb 或 accdb 文件以获取有关 sfd 文件的更多信息

[http://social.msdn.microsoft.com/Forums/en-US/vcprerelease/thread/20fee924-e267-4c1a-b0fe-3321f86e1bb5](http://social.msdn.microsoft.com/Forums/en-US/vcprerelease/thread/20fee924-e267-4c1a-b0fe-3321f86e1bb5)

# ubuntu - Ubuntu 服务器上的 Gitlab+Gitolite：为什么它不能与 Windows 客户端一起使用？

> ID：12531255
> 
> 赞同：2
> 
> 时间：2012-09-21T13:10:06.640
> 
> 标签：ubuntu, gitolite, gitlab

我试图在 Ubuntu 上设置 gitolite 和 [GitLab][1] 并且它正在工作。`admin@local.host`我可以在 Linux中通过克隆、推送和拉入。**但它不适用于 Windows**。
我通过 GitLab 创建了用户并在该用户（Windows 用户）中添加了 ssh 密钥。

当我尝试克隆存储库时，出现密码提示。
这就像 Ubuntu 和 Windows 上的密钥不同步。我做了`chmod: 700- .ssh and 600- authorized_keys`，但它不工作。所以我不知道我在这里错过了什么。

```
>   [1] OH IMPORTANT! You need to convert putty key into openssh key and
> put it in the account. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:28:18.863

在 Windows 上检查环境变量`%HOME%`：

默认情况下未定义，您的 ssh 将需要它来查找您的公钥和私钥（存储在 下`%HOME%\.ssh\id_rsa(.pub)`）

在这种情况下，[OP Sam Mie](https://stackoverflow.com/users/1688895/sam-mie)确认这是一个服务器地址解析问题：

> 我已经将服务器的名称更改为像 from `git@localhost`into这样的 IP 地址`git@198.xxx.x.x`，它可以工作。

# sql-server - 数据库连接错误时自动切换连接字符串

> ID：12531258
> 
> 赞同：1
> 
> 时间：2012-09-21T13:10:22.603
> 
> 标签：sql-server, entity-framework, sql-server-ce, database-connection, connection-string

我正在使用 DbContext 处理带有 EntityFramework 主干的 C# 应用程序。该应用程序有两个选择：连接到远程 SQL 服务器 express 或连接到本地 SQL compact 4.0 数据库，以防网络连接不可用。当我的应用程序启动时，一个线程正在检查是否可以连接到远程数据库。否则，它会自动需要切换连接字符串和提供程序才能连接到本地数据库。到目前为止，我试图通过修改 app.config 中的连接字符串部分并在保存配置后强制应用程序刷新该部分来解决此问题。这种方法不是最好的，因为我需要有访问权限才能写入 app.config 文件。你能建议一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:21:35.907

将连接字符串的管理封装在一个类中，使该类成为单例，并使用它来获取活动的连接字符串，如下所示：

```
public delegate void ConnectionChangedEventHandler(object sender, EventArgs e);

class ConnStringManager {
    static public ConnStringManager Instance {get;private set;}
    static {
        Instance = new ConnStringManager();
    }
    public event ConnectionChangedEventHandler Changed;
    private readonly string localConn;
    private readonly string remoteConn;
    public string ConnectionString {get; private set;}
    private ConnStringManager() {
        localConn = ... // Get local connection string from the config
        remoteConn = ... // Get remote connection string from the config
        TestAndSetConnectionString();
    }
    public void TestAndSetConnectionString() {
        bool canUseRemote = true;
        if (...) {
             // Do some testing to see if remote DB is accessible
        }
        // Switch the connection string
        var nextString = canUseRemote ? remoteConn : localConn;
        bool changed = nextString != ConnectionString;
        ConnectionString = nextString;
        if (changed && Changed != null) {
             Changed(this, EventArgs.Empty);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:22:17.007

DbContext[构造](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)函数接受连接字符串的名称或您要选择的实际连接字符串。

您可以做的是测试您的初始连接字符串 - 可能使用快速 ado 连接或简单的东西，然后如果它连接使用它，否则使用您的另一个连接。

一些伪代码：

```
 YourDbContext YourContext;
        if (TestConnection())
        {
            YourContext = new YourDbContext("ConnectionString1");
        }
        else
        {
            YourContext = new YourDbContext("ConnectionString2");
        } 
```

# c# - 来自数据库的通知而不是轮询。可能吗？

> ID：12531262
> 
> 赞同：3
> 
> 时间：2012-09-21T13:10:40.497
> 
> 标签：c#, .net, sql, sql-server-2008

嗨，伙计们，

为了监视数据库上的指定表，我每隔几毫秒（10-20 毫秒）轮询一次。

是否有机会获得通知（避免 SqlDependency，在我的场景中太慢）而不是轮询？

你有什么主意吗？

我的场景是 .net + Sql Server 2008

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:24:12.473

可以使用将调用 WCF/或 Web 服务的 CLR 存储过程来完成。这不是一件很难做到的事情。

这实际上需要 2 个步骤。

1.  数据的修改。修改数据后，您必须将数据发送到 clr 存储过程。最简单的方法是将其写入一个或多个临时表。

2.  clr 存储过程。clr 存储过程将连接到数据库

    “上下文连接=真”

这样您就可以访问所需的存储过程。加载数据后，您将其发送到服务器（WCF/webservice）。在 CLR 中，您只需添加所需的服务引用。同样在服务器上，您必须注册一些 dll 供服务器使用：

```
system.web
smdiagnostics
system.runtime.serialization
system.identitymodel
system.identitymodel.selectors
system.messagng
system.transactions.bridge
system.servicemodel 
```

其他一切都是调用 WCF/Web 服务的纯 .NET 代码。这种方法非常快速且非常可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-06T09:31:06.713

要在 SQL 中获取 onChange 事件通知，您可以使用构建在 Server Broker 上的[查询通知功能。](https://docs.microsoft.com/en-us/sql/relational-databases/native-client/features/working-with-query-notifications?view=sql-server-ver15)

替代方案是：

1.  数据库触发器
2.  信号R
3.  变更数据捕获
4.  更改跟踪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:16:02.540

您可以使用[SqlChangeMonitor 类](http://msdn.microsoft.com/en-us/library/system.runtime.caching.sqlchangemonitor.aspx)，但它将 SqlDependency 包装在缓存数据场景中。不过，您的问题对于您为什么要这样做有点含糊。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:19:04.150

可以将调用应用程序更改为写入[队列](http://en.wikipedia.org/wiki/Message_queue)吗？

如果不是，我猜数据库上的触发器调用了[CLR 存储过程](http://msdn.microsoft.com/en-us/library/ms131094%28v=SQL.90%29.aspx)？这可以触发所需的任何类型的事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T13:32:28.927

我看到您说您需要**通知**（并且`SqlDependency`可用），但也许您不需要即时通知，并且定期有效地阅读更改将完成任务。如果是这样，去谷歌`Change Data Capture`，和`Change Tracking`。

# matlab - 求解方程的变量

> ID：12531265
> 
> 赞同：0
> 
> 时间：2012-09-21T13:10:45.703
> 
> 标签：matlab

我想在matlab中求解方程，例如。

```
100+a/2=173*cos(b) 

sqrt(3)*a/2=173*sin(b） 
```

代码是：

```
[a,b]=solve('100+a/2=173*cos(b)','sqrt(3)*a/2=173*sin(b)','a','b') 
```

但是，如果我想将 100 作为变量，例如

```
for k=1:100

  [a,b]=solve('k+a/2=173*cos(b)','sqrt(3)*a/2=173*sin(b)','a','b')

end 
```

会有错误，怎么弄？

```
degree=140/1000000;
p=42164000;
a=6378136.5;
b=6356751.8;
x_1=0;
y_1=p;
z_1=0;

for i=451:550
    for j=451:550
    alpha=(1145-i)*degree;
    beta=(1145-j)*degree;

    x_2=p/cos(alpha)*tan(beta);
    y_2=0;
    z_2=p*tan(alpha);

    syms x y z x_1 x_2 y_1 y_2 z_1 z_2 a b
    eq = [(x-x_1)*(y2-y_1)-(x_2-x_1)*(y-y_1),(x-x_1)*(z_2-z_1)-(x_2-x_1)*(z-z_1), b^2*(x^2+y^2)+a^2*(y^2)-a^2*b^2 ]; 
    sol = solve(eq(1),x,eq(2),y, eq(3),z); 
    sol.x
    sol.y
    sol.z        
   end
end 
```

我得到了表达式值，我如何得到 x,y,z 的数值？

```
[['x(1)=';'x(2)='],num2str(double(sol.x))] 
```

不工作，显示？？？使用 ==> mupadmex 时出错 MuPAD 命令中的错误：DOUBLE 无法将输入表达式转换为双精度数组。

如果输入表达式包含符号变量，请改用 VPA 函数。

==> sym.sym>sym.double 中的错误 927 Xstr = mupadmex('mllib::double', Ss, 0);

==> f2 在 38 处出错 [['x(1)=';'x(2)='],num2str(double(sol.x))]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:25:04.017

如果您有权访问 Symbolic Toolkit，那么您可以执行以下操作：

```
syms a b k
eq = [k+a/2-173*cos(b), sqrt(3)*a/2-173*sin(b)];
sol = solve(eq(1),a,eq(2),b);

sol.a = simplify(sol.a);
sol.b = simplify(sol.b);

% There are two solutions for 'a' and 'b'
% check residuals for example k=20

subs(subs(eq,{a,b},{sol.a(1),sol.b(1)}),k,20)
% ans = 0.2e-13

subs(subs(eq,{a,b},{sol.a(2),sol.b(2)}),k,20)
% ans = 0.2e-13 
```

**编辑 1**

基于 OP 的新代码，解决此问题的 matlab 脚本是：

```
clear all
clc
syms alpha beta
degree=140/1000000;
p=42164000;
a=6378136.5;
b=6356751.8;
x_1=0;
y_1=p;
z_1=0;
x_2 = p/cos(alpha)*tan(beta);
y_2 = 0;
z_2 = p*tan(alpha);
syms x y z

eq = [(x-x_1)*(y_2-y_1)-(x_2-x_1)*(y-y_1);...
    (x-x_1)*(z_2-z_1)-(x_2-x_1)*(z-z_1); ...
    b^2*(x^2+y^2)+a^2*(y^2)-a^2*b^2 ];

sol = solve(eq(1),x,eq(2),y,eq(3),z);
sol.x  = simplify(sol.x);
sol.y  = simplify(sol.y);
sol.z  = simplify(sol.z);
pt_1 = [sol.x(1);sol.y(1);sol.z(1)]    % First Solution Point
pt_2 = [sol.x(2);sol.y(2);sol.z(2)]    % Second Solution Point
x = zeros(100,100);
y = zeros(100,100);
z = zeros(100,100);
for i=451:550
    disp(['i=',num2str(i)])
    for j=451:550        
        res = double(subs(pt_1,{alpha,beta},{(1145-i)*degree,(1145-j)*degree}));
        x(i-450, j-450) = res(1);
        y(i-450, j-450) = res(2);
        z(i-450, j-450) = res(3);
    end
end
disp('x=');
disp(x);
disp('y=');
disp(x);
disp('z=');
disp(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:12:54.417

我会尝试

```
for i=1:100
    k=num2str(i)
    [a,b]=solve('100+a/2=173*cos(b)','sqrt(3)*a/2=173*sin(b)','a','b')
end 
```

然后解方程

# asp.net - Entity Framework 中 DBContext 和 Object 上下文的区别

> ID：12531270
> 
> 赞同：0
> 
> 时间：2012-09-21T13:10:54.173
> 
> 标签：asp.net, asp.net-mvc, entity-framework

> **可能重复：**
> [ObjectContext vs DbContext](https://stackoverflow.com/questions/9176967/objectcontext-vs-dbcontext)

实体框架中的 DBContext 和 Object 上下文有什么区别？它们仅在属性上有所不同还是有任何其他显着差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:15:16.130

EF v4.0 的 ObjectContext 以及使用设计器生成的模型和 DbContext 用于 EF v4.1 代码优先模型时。

尽管它们几乎相同，但 DbContext 需要更少的代码来实现相同的功能。

# iphone - 计算objective-c中2个数字之间的差异

> ID：12531281
> 
> 赞同：0
> 
> 时间：2012-09-21T13:11:20.437
> 
> 标签：iphone, objective-c, ios, macos

[我知道以前用 C# 2 个数字之间的差异](https://stackoverflow.com/questions/339961/difference-between-2-numbers)问过类似的问题

但我需要知道objective-c是否提供了一些函数来找出2个数字之间的差异，（具体来说是2个NSIntegers）

例如：

100 和 25 是 75

-25 和 100 是 125

100 和 -25 也是 125

-100 和 -115 是 15

//我知道我使用的是和前面一样的例子

很感谢任何形式的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T13:15:47.267

我认为基本数学是每种编程语言都会做的事情：`abs(num1 - num2)`会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:00:05.100

请记住，abs() 适用于整数，除了执行绝对值函数外，还会自动舍入任何非整数参数。我的程序往往充满了小数数据，所以我最终经常使用 fabs()。

# c++ - 串口编程 RS485

> ID：12531289
> 
> 赞同：10
> 
> 时间：2012-09-21T13:11:50.507
> 
> 标签：c++, c, serial-communication, baud-rate, rs485

我的任务是通过 RS485 2 线系统实现 ModBus 协议。（实际上是三根线，A/B 和 GND）。ModBus 不是重点，但在此之前的步骤……通过接口进行简单的 I/O。

我正在使用 FTDI USB-RS485 转换器将 Linux 主机（不可互换）连接到 Windows 主机（可与另一台 Linux 主机互换，但我想避免这种情况）

编码应该是 19200, 8, n, 1。但它似乎不起作用。

我手头没有确切的代码，但在 Linux 上我正在这样做：

```
 int fd = open("/dev/ttyS3", O_RDWR | O_CTTY);
 if(fd == -1) return "Error while opening the port"; 
```

接下来，我配置端口。

```
struct termios tty;

tcgetattr(fd, &tty);

cfsetispeed(&tty, B19200);
cfsetospeed(&tty, B19200);

tty.c_cflag  = CS8;              //Empties the cflags and sets the character width.
tty.c_cflag |= (CLOCAL | CREAD); //Sets 'recommended' options.

tty.c_lflag  = 0;
tty.c_iflag  = 0;
tty.c_oflag  = 0;

tcgetattr(fd, TCSANOW, &tty); 
```

目前还没有计划奇偶校验和流量控制，因为最终结果将连接到一个低级电路板，我需要自己处理信号。此外，没有任何电线可以实现“不受限制的通信”。（毕竟我不希望 XON/XOFF 字符限制我可以传输的字节范围）

所有这些功能都正确执行并设置了数据。

在 Windows 上，我像这样打开串行端口：

```
DCB SP;
HANDLE hSerial = CreateFile("COM6", GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, 0, NULL);
if(hSerial == INVALID_HANDLE_VALUE) return "Error while opening the port";
GetCommState(hSerial, &SP); 
```

奇偶校验和流量控制被禁用。字节大小设置为 8。

编辑：既然有人问过，这是我在 Windows 上的波特率代码（来自内存） SP.DCBlength= sizeof(SP); SP.BaudRate = 19200; SP.奇偶校验 = 无奇偶校验；SP.StopBits = ONESTOPBIT；SetCommState(hSerial, &SP);

同样，所有这些功能都可以完美运行。

现在，对于让我头疼的测试用例。

在 Linux 主机上，我创建了一个 256 字节大小的字节缓冲区。这个缓冲区填充了从 0 到 255 的字符值......然后通过网络通过写入发送。同时，对方正在用“ReadFile”等待数据到达。

使用此配置，对于“其他 Linux 主机”以及 Windows 主机，256 字节到达......但是它不是 0-255 的数字，而是 00 06 等。

当我在设置我真正想要的选项之前将 termios 结构的所有成员设置为 0 时，我可以让 Linuxhost 工作。我猜，这是因为控制字符......但是如果我这样做，Windows 主机要么只接收 256 个字节中的 4 个。

正如我所说，不幸的是我手头没有代码。如果有人知道我可以从什么角度解决这个问题，我将不胜感激。一旦我再次可以访问它，我将发布更多代码。

我如何实现读取操作：

```
DWORD nBytes = 0;
char Buffer[256], *ptr = Buffer;
int Rem = 256;

while(Rem) {
    ReadFile(hSerial, ptr, Rem, &nBytes, 0);
    Rem -= nBytes;
    ptr += nBytes;
}

//Evaluate Buffer 
```

需要注意的是，我确实设置了超时，但不记得确切的值。

编辑：因为我现在可以再次访问我的工作地点，所以这是实际的（当前）代码。

```
const char *InitCOM(const char *TTY) {
    struct termios tty;
    hSerial = open(TTY, O_RDWR | O_NOCTTY | O_NDELAY);
    if(hSerial == -1) return "Opening of the port failed";
    fcntl(hSerial, F_SETFL, 0);
    if(tcgetattr(hSerial, &tty) != 0) return "Getting the parameters failed.";
    if(cfsetispeed(&tty, B19200) != 0 || cfsetospeed(&tty, B19200) != 0) return "Setting the baud rate failed.";

    //CFlags
    //Note: I am full aware, that there's an '=', and that it makes the '&=' obsolete, but they're in there for the sake of completeness.
    tty.c_cflag  = (tty.c_cflag & ~CSIZE) | CS8;    //8-bit characters
    tty.c_cflag |= (CLOCAL | CREAD);und erlaubt 'Lesen'.
    tty.c_cflag &= ~(PARENB | PARODD);          
    tty.c_cflag &= ~CSTOPB;
    tty.c_cflag &= ~CRTSCTS;                    

    //Input Flags
    tty.c_iflag     &= ~IGNBRK;             
    tty.c_iflag &= ~(IXON | IXOFF | IXANY);         

    //Local Flags
    tty.c_lflag  = 0;                   

    //Output Flags
    tty.c_oflag  = 0;

    //Control-Characters
    tty.c_cc[VMIN]   = 0;
    tty.c_cc[VTIME]  = 5;
    if(tcsetattr(hSerial, TCSAFLUSH, &tty) != 0) return "Setting the new parameters failed";
return NULL; 
```

}

至于实际的发送/接收代码：

```
int main(int argc, char* argv[]) {
    #if defined FOR_PC
        const char *err = InitCOM("/dev/ttyUSB0");
    #else
        const char *err = InitCOM("/dev/ttyS3");
    #endif

    if(err) printf("Error while initalizing: %s ErrNum: %d\n", err, errno);
    else {
    /*unsigned char C[256];    //Original code with the array
    int nBytes;
    #ifdef FOR_PC
        int Rem = 256, ReqCount = 0;
        unsigned char *ptr = C;
        while(Rem > 0) {    
            fd_set fds;
            FD_ZERO(&fds);
            FD_SET(hSerial, &fds);
            select(hSerial+1, &fds, NULL, NULL, NULL);
            nBytes = read(hSerial, ptr, Rem);
            if(nBytes > 0) {
                Rem -= nBytes;
                ptr += nBytes;
                ++ReqCount;
            }
        }
        printf("Number of received Bytes: %d in %d sends.\n\n", 256 - Rem, ReqCount);
        for(int i = 0; i < 256; ++i) {
            printf("%02X ", C[i]);
            if((i%32) == 31) printf("\n");
        }
    #else
        for(int i = 0; i < 256; ++i) C[i] = i;
        nBytes = write(hSerial, C, 256);
        printf("\nWritten Bytes: %d\n", nBytes);
    #endif*/

    //Single-Byte Code
    unsigned char C = 0x55;
    #ifdef FOR_PC
        while(true) {   //Keeps listening
            fd_set fds;
            FD_ZERO(&fds);
            FD_SET(hSerial, &fds);
            select(hSerial+1, &fds, NULL, NULL, NULL);
            read(hSerial, &C, 1);
            printf("Received value 0x%02X\n", C);
        }
    #else
        write(hSerial, &C, 1);  //Sends one byte
    #endif
    close(hSerial);
}
return 0; 
```

}

至于示波器：我已经测试了发送的两个方向。两人都非常出色地完成了他们的工作。

0x55 的信号在 50 微秒的长度上是一个恒定的 Up/Down（应该如此，因此设置波特率也没有问题）。

那么我的“接收”代码中有什么我做错了吗？“选择”错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:14:30.247

1.  您是否还在 Windows 端设置了正确的波特率？
2.  使用示波器检查电线上的实际数据。调试串行通信是示波器的发明目的。几乎。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:32:42.007

您的阅读功能很容易爆炸。如果您接近缓冲区的末尾，并且您读取的数量超过了填充它的数量，您将复制超出缓冲区的末尾，覆盖堆栈。

在 Linux 发送端，您应该查看“原始模式”，例如 cfmakeraw()。这样你就不会被系统“帮助”你所困扰（比如在你发送换行符时添加 CR——真的搞砸了二进制数据......）。微软有办法做到这一点，但我忘记了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T12:51:39.450

在 Windows 端，您是否在 DCB 结构中设置了 DCBLength 字段？

```
dcb.DCBlength = sizeof(dcb); 
```

# c# - 如何使用 Quartz.NET 在数据库中插入 JOB/TRIGGER？

> ID：12531294
> 
> 赞同：2
> 
> 时间：2012-09-21T13:12:18.373
> 
> 标签：c#, quartz-scheduler, quartz.net

我正在使用 Quart.NET ( [http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/) ) 来安排我的工作。这非常有效，我可以以编程方式运行创建作业和触发器，但我想使用数据库来存储和创建新触发器。

**石英.config**更改文件如下：

> quartz.jobStore.type = Quartz.Impl.AdoJobStore.JobStoreTX，Quartzquartz.jobStore.driverDelegateType = Quartz.Impl.AdoJobStore.OracleDelegate，Quartz quartz.jobStore.tablePrefix = QRTZ_quartz.jobStore.dataSource = myDS quartz.dataSource.myDS。 connectionString = *******我的 oracle 连接字符串***** ***** quartz.dataSource.myDS.provider = OracleODP-20 quartz.jobStore.useProperties = true

我正在使用 Quartz.NET 的最新稳定版本为 2.0.1 的解决方案示例，名为**Quartz.Server.2010**，该项目正常播放并每 15 秒（或多或少）在表 a 中执行*SELECT ，但我如何**插入*数据在石英表里？

我的数据库已使用脚本**tables_oracle.sql进行配置**

我不会在表中手动执行*INSERT*，因为数据库的模式石英非常困难。

我有另一个项目 WEB 我将使用它来安排新作业，该项目将在表中插入数据，并且我的项目服务器 Quartz.Server.2010 将被执行。

我可以使用 CronExpression 方法每 1 分钟安排一次作业吗？如下所示：

> Quartz.CronExpression cron = new Quartz.CronExpression("0 0/1 * 1/1 * ? *");

但我想把它放在数据库中，供石英服务器使用，不要在我的网络项目中运行。

谢谢朋友，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:29:49.270

您将 Web 服务器配置为使用与 Quartz Server 相同的设置，并以相同的方式初始化调度程序，但实际上并不启动调度程序（否则作业将开始在 Web 服务器上运行）。

当您使用 API 创建作业时，请确保您记得调用 .StoreDurably()

有关语法的更多详细信息，请参阅我对[这个 SO 问题的回答。](https://stackoverflow.com/questions/11904667/quartz-job-store-is-related-to-active-data/11917294#11917294)

# interface - 像类一样向 Visio UML 界面添加属性

> ID：12531296
> 
> 赞同：3
> 
> 时间：2012-09-21T13:12:22.993
> 
> 标签：interface, attributes, visio, uml

是否可以将属性添加到 Visio（在我的情况下为 2007 年）UML 图接口对象？它在其属性对话框中显示操作，但遗憾的是没有属性部分。我真的希望有人想到了解决这个问题的方法（不查看第三方应用程序）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:00:41.943

可以实现相同的视觉效果：接口表示为具有原型的类`<<interface>>`。因此，您可以转到 UML/Stereotypes/New 并输入“interface”作为 Stereotype 名称，然后选择 Class 作为基础。现在您可以创建一个新类，对其进行编辑并选择新的接口原型。这样做之后，您就有了可以保存属性的界面的可视化表示。

也许这适合您的需求。这些模型的内部表示仍然不符合 UML 2（但 Visio 在这方面还有其他缺陷）。

# python - mongoengine 调用导致 django 视图被调用两次

> ID：12531302
> 
> 赞同：2
> 
> 时间：2012-09-21T13:12:46.960
> 
> 标签：python, django, mongodb, mongoengine

当我创建一个新对象时，它会两次插入到 mongodb 中，
当我尝试删除一个时，它会这样做，然后再试一次，只是告诉我它找不到对象
它可能在查询中做同样的事情太难了它不是现在真的是个问题

我正在使用 django 1.4.1 和 mongoengine 0.7.5

我的删除视图的代码是

```
def delbadge(request, oid):
    log.info('searching')
    try:
        badg = BgBadge.objects(id=oid)[0]
    except:
        log.error('not found')
        raise Http404
    badg.delete()
    log.info('deleted')
    return HttpResponseRedirect('/badge/')
    #raise Http404 
```

它给我的是

```
searching
deleted
searching
not found 
```

如果我删除`badg.delete()`我得到

```
searching
deleted 
```

当我替换`return HttpResponseRedirect('/badge/')`by`raise Http404`

所以我测试了 django 的 mongoengine 代码和没有 mongoengine 的 django 代码，它们都工作得很好

编辑：
处理程序`/badge/`是`url(r'^badge/$', AllBadges.as_view()),`
我检查了http请求，它似乎不是原因

更新：
我在另一台计算机上尝试过并得到相同的行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:48:29.230

事实证明问题是由 django-debug-toolbar 引起的，更具体地说是分析面板，其挂钩导致所有视图被调用两次。
卸下`debug_toolbar.panels.profiling.ProfilingDebugPanel`面板可以解决问题。
[https://github.com/django-debug-toolbar/django-debug-toolbar/issues/267](https://github.com/django-debug-toolbar/django-debug-toolbar/issues/267)
开发人员知道这个问题，应该在回购中修复。

# python - 在 Python 中将值存储和检索到云上的文件

> ID：12531309
> 
> 赞同：-3
> 
> 时间：2012-09-21T13:13:12.353
> 
> 标签：python, web

我使用 Python 开发了一个搜索引擎。每当我运行我的程序时，都需要花费大量时间来将关键字收集到索引中，因为这是一个非常大的过程。

所以我只是将关键字存储到一个文件中，以便我可以随时检索它。

我可以将文件放在云服务器上以便在其中存储和检索值吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:16:54.193

我不太明白您要完成什么，但亚马逊有一个很好支持的非常流行的 python 库，用于与他们的大多数（如果不是全部）云服务进行交互。

[https://github.com/boto/boto](https://github.com/boto/boto)

包括s3

# android - 从自己的 android 应用程序将图像共享到 instagram

> ID：12531310
> 
> 赞同：0
> 
> 时间：2012-09-21T13:13:14.110
> 
> 标签：android, instagram

我正在尝试将图像从我的 android 应用程序共享到 instagram 应用程序…………我无法上传图像…………

```
@SuppressWarnings("unchecked")
public Map<String, String> doUpload() {
Log.i(TAG, "Upload");
Long timeInMilliseconds = System.currentTimeMillis()/1000;
String timeInSeconds = timeInMilliseconds.toString();
MultipartEntity multipartEntity = new     
MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
Map returnMap = new HashMap<String, String>();
// check for cookies
/*  if( httpClient.getCookieStore() == null ) {
 returnMap.put("result", "Not logged in");
        return returnMap;
    }*/

    try {
        // create multipart data
         System.out.println("image path name : "+processedImageUri.getPath());
         System.out.println("image file path : "+ImgFilePath);
        File imageFile = new File(ImgFilePath);//processedImageUri.getPath());
        FileBody partFile = new FileBody(imageFile);
        StringBody partTime = new StringBody(timeInSeconds);

        multipartEntity.addPart("photo", partFile );
        multipartEntity.addPart("device_timestamp", partTime);
    } catch ( Exception e ) {
        Log.e(TAG,"Error creating mulitpart form: " + e.toString());
        returnMap.put("result", "Error creating mulitpart form: " + e.toString());
        return returnMap;
    }

    // upload
    try {
        System.out.println("111111111111111111");
        System.out.println("multipart entity value : "+multipartEntity.toString());
        HttpPost httpPost = new HttpPost(Utils.UPLOAD_URL);
        httpPost.setEntity(multipartEntity);
        System.out.println("http post vlaue : "+httpPost.toString());
        System.out.println("http client value : "+httpClient.toString());
        HttpResponse httpResponse = httpClient.execute(httpPost);
        System.out.println("Http response value : "+httpResponse.toString());
        HttpEntity httpEntity = httpResponse.getEntity();
        Log.i(TAG, "Upload status: " + httpResponse.getStatusLine());
        System.out.println("staus entity value : "+httpResponse.getStatusLine().toString());
        System.out.println("http status : "+HttpStatus.SC_OK);

        // test result code
        if( httpResponse.getStatusLine().getStatusCode() != HttpStatus.SC_OK ) {
            Log.e(TAG, "Login HTTP status fail: " + httpResponse.getStatusLine().getStatusCode());
            returnMap.put("result", "HTTP status error: " + httpResponse.getStatusLine().getStatusCode() );
            return returnMap;
        }

        // test json response
        // should look like
        /*
        {"status": "ok"}
        */
        if( httpEntity != null ) {
            BufferedReader reader = new BufferedReader(new InputStreamReader(httpEntity.getContent(), "UTF-8"));
            String json = reader.readLine();
            System.out.println("Entity value : "+json);
            JSONTokener jsonTokener = new JSONTokener(json);
            JSONObject jsonObject = new JSONObject(jsonTokener);
            Log.i(TAG,"JSON: " + jsonObject.toString());

            String loginStatus = jsonObject.getString("status");

            if( !loginStatus.equals("ok") ) {
                Log.e(TAG, "JSON status not ok: " + jsonObject.getString("status"));
                returnMap.put("result", "JSON status not ok: " + jsonObject.getString("status") );
                return returnMap;
            }
        }
    } catch( Exception e ) {
        Log.e(TAG, "HttpPost exception: " + e.toString());
        returnMap.put("result", "HttpPost exception: " + e.toString());
        return returnMap;
    }

    // configure / comment
    try {
        HttpPost httpPost = new HttpPost(Utils.CONFIGURE_URL);
        String partComment = txtCaption.getText().toString();
        List<NameValuePair> postParams = new ArrayList<NameValuePair>();
        postParams.add(new BasicNameValuePair("device_timestamp", timeInSeconds));
        postParams.add(new BasicNameValuePair("caption", partComment));
        httpPost.setEntity(new UrlEncodedFormEntity(postParams, HTTP.UTF_8));
        System.out.println("http client value : "+httpClient.toString());
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

        // test result code
        if( httpResponse.getStatusLine().getStatusCode() != HttpStatus.SC_OK ) {
            Log.e(TAG, "Upload comment fail: " + httpResponse.getStatusLine().getStatusCode());
            returnMap.put("result", "Upload comment fail: " + httpResponse.getStatusLine().getStatusCode() );
            return returnMap;
        }

        returnMap.put("result", "ok");
        return returnMap;
    } catch( Exception e ) {
        Log.e(TAG, "HttpPost comment error: " + e.toString());
        returnMap.put("result", "HttpPost comment error: " + e.toString());
        return returnMap;
    } 
```

以上是我用来上传图片的代码，网址是 UPLOAD_URL = "http://instagr.am/api/v1/media/upload/" ...... .请谁能帮我把图片上传到instagram.......提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:45:20.047

Instagram API 尚不支持上传。

来自 Instagram API 文档：

> **目前，无法通过 API 上传。我们有意识地选择不添加它，原因如下：**
> 
> Instagram 是关于你在旅途中的生活——我们希望鼓励从应用程序中拍摄照片。但是，将来我们可能会根据具体情况授予对单个应用程序的白名单访问权限。我们要打击垃圾邮件和低质量的照片。一旦我们允许从其他来源上传，就很难控制进入 Instagram 生态系统的内容。尽管如此，我们正在努力确保用户在我们的平台上获得一致且高质量的体验。

# c# - 如何将数组转换为双这么大的数组？

> ID：12531311
> 
> 赞同：2
> 
> 时间：2012-09-21T13:13:20.467
> 
> 标签：c#

我有一个元素类型：

```
public class FieldInfo
{
  public string Label { get; set; }
  public string Value { get; set; }
} 
```

我有一个充满`FieldInfo`对象的数组。

```
FieldInfo[] infos = new FieldInfo[]
                      {
                        new FieldInfo{Label = "label1", Value = "value1"},
                        new FieldInfo{Label = "label2", Value = "value2"}
                      }; 
```

现在我想将该数组转换为包含以下值的新数组：

```
string[] wantThatArray = new string[] {"label1", "value1", "label2", "value2"}; 
```

有没有一种简单的方法可以将数组从类似的数组转换为类似`infos`的数组`wantThatArray`？
也许使用 LINQ 的 Select？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T13:19:01.820

```
string[] wantThatArray = infos
    .SelectMany(f => new[] {f.Label, f.Value})
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T13:17:09.673

我会保持简单：

```
string[] wantThatArray = new string[infos.Length * 2];
for(int i = 0 ; i < infos.Length ; i++) {
   wantThatArray[i*2] = infos[i].Label;
   wantThatArray[i*2 + 1] = infos[i].Value;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T13:23:36.303

与 Marc Gravell 的解决方案略有不同的变体

```
string[] wantThatArray = new string[infos.Length * 2];
for (int i = 0, k = 0; i < infos.Length; i++, k += 2) {
   wantThatArray[k] = infos[i].Label;
   wantThatArray[k + 1] = infos[i].Value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:29:42.140

另一种变体：

```
string[] yourarray = infos.Select(x => string.Format("{0},{1}", x.Label, x.Value))
                          .Aggregate((x, y) => string.Format("{0},{1}", x, y))
                          .Split(','); 
```

嗯，但不是很好.. :( 与其他人相比！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-21T13:17:55.877

```
FieldInfo[,] infos = new FieldInfo[,]{
                    new FieldInfo{"label1", "value1"},
                    new FieldInfo{"label2", "value2"}
                  };

string[] to = infos.Cast<FieldInfo>().ToArray(); 
```

现在您可以简单地转换`to`为`infos`.

# rally - 按迭代结束日期在 Rally 查询结果中对 US 进行排序

> ID：12531314
> 
> 赞同：1
> 
> 时间：2012-09-21T13:13:24.483
> 
> 标签：rally

我需要编写一个查询以从 Rally 中提取具有自定义字段和版本名称的给定值的用户故事（HierarchicalRequirement），并在 Java 应用程序中按迭代结束日期和用户故事排名作为第二个参数对它们进行排序。

我可以自己编写工作查询，但迭代结束日期的订单条件不起作用 *排名条件很简单：“排名降序”）

为了按迭代结束日期排序，我将字符串“Iteration.EndDate desc”传递给 SOAP API 的“order”参数，但它不起作用。

这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:36:23.660

我不知道如何使用 SOAP 但使用 REST api 很简单：http: [//developer.rallydev.com/help/java-toolkit-rally-rest-api](http://developer.rallydev.com/help/java-toolkit-rally-rest-api)

```
 RallyRestApi restApi = new RallyRestApi(new URI("https://rally1.rallydev.com"), 
    "user@company.com", "password");

 QueryRequest stories = new QueryRequest("hierarchicalrequirement");
 stories.setFetch(new Fetch("FormattedID", "Name", "ScheduleState"));
 stories.setOrder("Iteration.EndDate DESC,Rank DESC");

 QueryResponse queryResponse = restApi.query(stories);
 if (queryResponse.wasSuccessful()) {
     for (JsonElement result : queryResponse.getResults()) {
         JsonObject story = result.getAsJsonObject();
         System.out.println(String.format("\t%s - %s: ScheduleState=%s",
             story.get("FormattedID").getAsString(),
             story.get("Name").getAsString(),
             story.get("ScheduleState").getAsString()));
     }
 } 
```

# javascript - document.write Javascript 错误

> ID：12531315
> 
> 赞同：0
> 
> 时间：2012-09-21T13:13:32.403
> 
> 标签：javascript, document.write

现在我收到以下错误：*';'expected*

```
 document.write("<script type='text/javascript'>var twitterwind_option     = {'isOnlyMe':true,'twitterwind_logo':'','twitterwind_logo_bgcolor':'FFFFFF','twitterwind_logo_color':'333303','followers_color':'000000','followers_bgcolor':'FFFFFF','twitterwind_max_length':'39','twitterwind_username':'table-row','twitterwind_username_color':'333333','twitterwind_username_bgcolor':'FFFFFF','twitterwind_twit':'block','twitterwind_twit_color':'333333','twitterwind_twit_bgcolor':'FFFFFF','twitterwind_twit_link_color':'0084B4','twitterwind_twit_scroll_color':'C0DEED','twitterwind_twit_scroll_bg_color':'FFFFFF','twitterwind_follower':'inherit','twitterwind_follower_bgcolor':'FFFFFF','twitterwind_frame_width':200,'twitterwind_frame_height':480,'twitterwind_frame_border':'false','twitterwind_frame_border_color':'C0DEED','twitterwind_base_font_size':12,'twitterwind_me_font_size':14,'twitterwind_caption_font_size':16,'twitterwind_scroll_height':336,'eusn':'rdK1y36H5sM='}';var twitterwind_url        = 'http://www.tweetswind.com/en/twitterwind.php';<\/script><script type='text/javascript' src='http://www.tweetswind.com/en/js/twitterwind.js'><\/script><div style='font-size:12px; text-align:right; width:200px'><a target='_blank' href='http://www.tweetswind.com/en/en/'>TweetsWind: a Twitter widget</a></div>");src='http://www.tweetswind.com/en/js/twitterwind.js'></script><div style='font-size:12px; text-align:right; width:200px'><a target='_blank' href='http://www.tweetswind.com/en/en/'>TweetsWind: a Twitter widget</a></div>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:16:47.390

**1.**

`var twitterwind_option = '{'isOnlyMe' ... }';var twitterwind_url`

需要是

`var twitterwind_option = \"{'isOnlyMe' ... }\";var twitterwind_url`

**2.**

`"twitterwind_twit_scroll_color:"C0DEED",`

需要是

`"twitterwind_twit_scroll_color":"C0DEED",`

**3.**转义`</script>`到`<\/script>`

这是一个工作版[DEMO](http://jsfiddle.net/mplungjan/rK2fB/)

```
document.write('<script type="text/javascript"> window.twitterwind_option = \'{ "isOnlyMe":true, "twitterwind_logo":"", "twitterwind_logo_bgcolor":"FFFFFF", "twitterwind_logo_color":"333303", "followers_color":"000000", "followers_bgcolor":"FFFFFF", "twitterwind_max_length":"39", "twitterwind_username":"table-row", "twitterwind_username_color":"333333", "twitterwind_username_bgcolor":"FFFFFF", "twitterwind_twit":"block", "twitterwind_twit_color":"333333", "twitterwind_twit_bgcolor":"FFFFFF", "twitterwind_twit_link_color":"0084B4", "twitterwind_twit_scroll_color":"C0DEED", "twitterwind_twit_scroll_bg_color":"FFFFFF", "twitterwind_follower":"inherit", "twitterwind_follower_bgcolor":"FFFFFF", "twitterwind_frame_width":200, "twitterwind_frame_height":480, "twitterwind_frame_border":"false", "twitterwind_frame_border_color":"C0DEED", "twitterwind_base_font_size":"12", "twitterwind_me_font_size":14, "twitterwind_caption_font_size":16, "twitterwind_scroll_height":336, "eusn":"rdK1y36H5sM="}\'; var twitterwind_url = "http://www.tweetswind.com/en/twitterwind.php";<\/script> <script type="text/javascript" src="http://www.tweetswind.com/en/js/twitterwind.js"><\/script> <div style="font-size:12px; text-align:right; width:200px"><a target="_blank" href="http://www.tweetswind.com/en/en/">TweetsWind: a Twitter widget</a></div>') 
```

​</p>

还要确保在页面呈现后不要 document.write

```
<body>
<script>
document.write(...)
</script>
</body> 
```

可以，但这不是：

```
<head>
<script>
window.onload=function() {
  document.write(...)
}
</script>
<body>
</body> 
```

# iphone - 如何正确地向用户提供网络反馈？

> ID：12531317
> 
> 赞同：0
> 
> 时间：2012-09-21T13:13:35.690
> 
> 标签：iphone, ios, cocoa-touch, networking, nsurlconnection

我的应用程序使用后台 GCD 队列中的同步 NSURLConnection 从 Web 服务检索货币汇率，如下所示：

```
// This method is called in background queue
- (NSData*)fetchDataWithURLStr:(NSString*)urlStr {
    NSData *jsonData = nil;

   [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    NSURL *url = [NSURL URLWithString:urlStr];
    NSURLResponse *response = nil;
    NSError *error = nil;
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    jsonData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    if (error != nil) {
        NSString *errorMsg = nil;
            NSInteger ec = [error code];

        if (ec == NSURLErrorTimedOut || ec == NSURLErrorCannotConnectToHost) {
            errorMsg = @"Data temporarily not available.";
        }

        // Call on main thread
        dispatch_async(dispatch_get_main_queue(), ^{
            // Present the error
            [self showErrorWithCode:ec title:@"ERROR" message:errorMsg];
        });

        jsonData = nil;
    }

    return jsonData;
} 
```

但问题通常是应用程序试图获取数据，并且下载似乎永远运行并且没有任何反应。没有状态更新什么都没有。通常我的 WiFi 只是停滞不前，我必须转到设置，禁用并重新启用它。或者我家中的 WiFi 路由器的互联网连接已关闭，但设备已连接到 WiFi。

我真正想做的是对网络上正在发生的事情给出准确的反馈。例如

“正在尝试联系服务器……”“等待……仍在尝试……”“您的互联网似乎坏了……”“重试……”“收到响应……”“已下载 20%”“已下载” 40%” “完成！”

只是关于正在发生的事情的准确反馈。

有人推荐了 MKNetworkKit，但感觉就像死了一样，没有任何反馈。

是否有适用于 iOS 的此问题的解决方案？

编辑：我有可达性，但它没有给我这种我想在联网期间显示的反馈。此外，当有 WiFi 连接但互联网停止时，可达性并没有告诉我发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:24:42.577

这里的基本问题是不可能（是**不可能**的）根据您的应用程序可用的信息对网络问题进行可靠的诊断。可能的原因太多了，如果不了解实际网络和/或访问其他诊断信息源，其中一些根本无法区分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:21:54.773

你可以使用可达性类。

[这](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007324)是使用此可达性类的示例代码，并通知我们正在使用哪种类型的连接。示例代码来自苹果。

以相同的方式查看和实施。

为了向用户显示进度，我建议使用`NSURLConnection`其委托方法，您可以轻松获取连接/请求的状态。

在其委托之一中，它给出了错误描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:24:31.537

您应该改用**异步**API。在单独的工作线程/队列中使用同步 API 通常不是正确的方法（请参阅有关这些主题的 WWDC'12 视频）

更好的解决方案是使用较新的`NSURLConnection`API 和`+sendAsynchronousRequest:queue:completionHandler:`方法，而不是使用`sendSynchronousRequest: returningResponse: error:`. 这样，您将避免阻塞您的 API 并在请求失败时收到通知（启动失败或运行时失败，因为网络出现故障等）。

```
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse*, NSData*, NSError*) {
     // Code that will be executed asynchronously
     // when the response to the request has been received 
 }];
// After the call to this method above, the code will continue executing
// WITHOUT WAITING for the network request to have its response. 
```

这样，您的 UI 不会“冻结”，其余代码将继续运行，因此您可以在视图上显示一些进度指示器，等等。仅当响应到达时，块中的代码`completionHandler`才会被异步调用（独立于您的其余代码）。

此外，要在网络本身无法访问（出现故障等）时得到通知，请对该 [EDIT] 使用 Reachability 您似乎已经这样做了，因为您在问题的编辑中添加了这一点，因此您应该已经了解这一点并且在这种情况下能够通知用户）

* * *

提示：您还可以使用一些第三方框架，例如优秀的 [ `AFNetworking`(https://github.com/AFNetworking/AFNetworking)，它允许您在发送网络请求时做更多事情，例如拥有 Objective-C 代码块在网络请求过程中调用，让您轻松了解下载进度。

将`AFNetworking`项目集成到工作区后，您将能够执行以下操作：

```
AFHTTPRequestOperation* reqOp = [[[AFHTTPRequestOperation alloc] initWithRequest:request] autorelease];
[reqOp setCompletionBlockWithSuccess: ^(AFHTTPRequestOperation *operation, id responseObject)
 {
    // Code to execute asynchronously when you successfully received the whole page/file requested
    // The received data is accessible in the responseObject variable.
 } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    // Code to execute asynchronously when you request failed, for example if you have a network error, or received some 404 error code, etc.
    progressLabel.text = [NSString stringWithFormat:@"Download error: %@", error];
 }];
[reqOp setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead)
 {
    // Code to execute periodically each time a partial chunk of data is received
    // So that you can update your progression. For example:
    progressLabel.text = [NSString stringWithFormat:@"Downloading %.1f%%", (float)totalBytesRead*100.f/totalBytesExpectedToRead];
 }];
[reqOp start]; // start the request
// The rest of the code will continue to execute, and the blocks mentioned above will be called asynchronously when necessary. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T13:24:24.533

这是我检查互联网连接的方法。您需要先添加可达性。

```
+ (BOOL) checkNetworkStatus
{
   Reachability *reachability = [Reachability reachabilityForInternetConnection];
   NetworkStatus networkStatus = [reachability currentReachabilityStatus];
   return !(networkStatus == NotReachable);
} 
```

# javascript - JavaScript 或 jQuery “你确定吗？” 链接对话框？

> ID：12531324
> 
> 赞同：34
> 
> 时间：2012-09-21T13:14:06.597
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-21T13:22:17.793

```
<a class="confirm" href="/DoSomethingDangerous">do something dangerous</a> 
```

查询：

```
$(function() {
    $('.confirm').click(function(e) {
        e.preventDefault();
        if (window.confirm("Are you sure?")) {
            location.href = this.href;
        }
    });
}); 
```

甚至更简单：

```
$(function() {
    $('.confirm').click(function() {
        return window.confirm("Are you sure?");
    });
}); 
```

本机确认框无法设置样式。如果你想要风格，那么你可以使用`jQuery.UI.dialog`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-09-01T11:47:45.313

如果我们知道 DOM 函数在“是”和“否”上`window.confirm()`返回布尔值，我们的链接可以简化一点：`true``false`

```
<a href="/DoSomething" onclick="return confirm('Are you sure?');">Link</a> 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-09-21T13:22:15.127

我认为最简单的解决方案是

`<a href="/DoSomethingDangerous" onclick="if (!confirm('Are you sure?')) return false;">Link test</a>`

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-09-21T13:25:22.197

```
$('a').click(function(e)
{
    if(confirm("Are you sure?"))
    {
        alert('navigate!');
    }
    else
    {
        e.preventDefault();
    }
}); 
```

演示：http: [//jsfiddle.net/PDj9H/](http://jsfiddle.net/PDj9H/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T13:20:24.427

我建议您使用 jQuery UI[`modal-confirmation`](http://jqueryui.com/demos/dialog/#modal-confirmation)对话框 - [http://jqueryui.com/demos/dialog/#modal-confirmation](http://jqueryui.com/demos/dialog/#modal-confirmation)。

# xpages - 如何从视图中打开另一个应用程序中的文档

> ID：12531325
> 
> 赞同：0
> 
> 时间：2012-09-21T13:14:11.280
> 
> 标签：xpages

我已经修改了表单的 Web 访问，显示 xPage 属性并尝试使用与文档表单选项关联的 xPage 在运行时打开选定的文档，但这不起作用。当前数据库添加在 URL 的开头：

```
http://localhost/Requ%C3%AAtes852.nsf/%24%24OpenDominoDocument.xsp?databaseName=CN=Jocelyn%20Smith/OU=CSSS%20IUGS/OU=Reg05/O=SSSS!!iugs%5Cphysiosad.nsf&documentId=08FF9DFFD10070F585257A7F0053C282&action=editDocument 
```

我一定错过了一些非常基本的东西。有人有工作吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:40:46.127

I found a work around by using a redirection page that reads the document id and database name from the URL parameters then redirects. I'ld be interested in improving upon this solution though.

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view
xmlns:xp="http://www.ibm.com/xsp/core"
rendered="false"
viewState="nostate">
<xp:this.afterPageLoad><![CDATA[#{javascript://Redirects to a page in another   application

var docid = param.documentId;  
var paramdbname = param.databaseName;
var hostname = context.getUrl().getHost();

//Get dbName without host
start = paramdbname.indexOf('!!');
dbName = paramdbname.slice(start+2);

var redirectstring = 'http://'+hostname+'/'+dbName+'/%24%24OpenDominoDocument.xsp?documentId='+docid+'&action=editDocument';

try{

facesContext.getExternalContext().redirect(redirectstring);
}
catch(err)
 {
//Handle errors here
 }}]]></xp:this.afterPageLoad>
    <xp:br></xp:br>
Redirects to a page in another application 
```

# php - 在 PHP 数组的最后一个单词之前添加一个字符

> ID：12531329
> 
> 赞同：-1
> 
> 时间：2012-09-21T13:14:25.913
> 
> 标签：php, arrays, implode

> **可能重复：**
> [使用“，”内爆数组并在最后一项之前添加“和”](https://stackoverflow.com/questions/8586141/implode-array-with-and-add-and-before-last-item)

在 Wordpress 中，我使用 PHP implode 用逗号分隔一系列字符串，这些字符串存储在一个数组中，如下所示：

Wordpress 循环遍历这个：

```
<?php unset($credits); ?>
<?php if(get_field('song_credits')):
    while(has_sub_field('song_credits')): 
       $credits[] = get_sub_field('artist_name');
    endwhile; ?>
    <p><?php echo implode(', ', $credits); ?>.</p>
<?php endif; ?> 
```

基本上，一系列字符串存储到 $credits 数组中，然后我使用 implode 将每个字符串用逗号分隔。

我需要在最后一个单词之前添加一个＆符号而不是逗号。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:19:20.683

`implode`不能直接做到这一点，但这并不难：

```
switch (count($credits)) {
    case 0:
        $result = '';
        break;
    case 1:
        $result = reset($credits);
        break;
    default:
        $last = array_pop($credits); // warning: this modifies the array!
        $result = implode(', ', $credits).' & '.$last;
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:23:48.790

取自：[带有“，”的内爆数组，并在最后一项之前添加“和”](https://stackoverflow.com/questions/8586141/implode-array-with-and-add-and-before-last-item)

`<p><?php echo join(' and ', array_filter(array_merge(array(join(', ', array_slice($credits, 0, -1))), array_slice($credits, -1)))); ?></p>`

这很好用

# objective-c - 使用 AVAudioPlayer 播放 .mov 文件的声音

> ID：12531330
> 
> 赞同：1
> 
> 时间：2012-09-21T13:14:28.937
> 
> 标签：objective-c, ios, audio, avaudioplayer, mov

我想播放声音，并且只播放我用 ipad 相机录制的视频的声音。该文件是一个 .mov 文件。

我成功播放了 .mp4 文件的声音。我将向您展示我是如何处理 mp4 文件的。

我的玩家班有 2 名成员。audioPlayer 一个 AVAudioPlayer 和 _urlOfVideoToPlay 一个带有本地视频的 NSURL。

```
NSError *audioError;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:_urlOfVideoToPlay error:&audioError];
bool prep2play = [audioPlayer prepareToPlay];

NSLog(@"%i", prep2play);

if(audioError) {
    NSLog([audioError localizedDescription]);
} 
```

结果是：

```
2012-09-21 14:50:23.312 AppName[2201:907] 0
2012-09-21 14:50:23.315 AppName[2201:907] The operation couldn’t be completed. (OSStatus error 1954115647.) 
```

第一个输出为 0，这意味着 prep2play 为 NO（假）。第二个输出是错误。

你对此有什么想法吗？

问候

# php - 我可以在文件（mp3、图像等）中嵌入服务器端操作吗？

> ID：12531333
> 
> 赞同：1
> 
> 时间：2012-09-21T13:14:36.713
> 
> 标签：php, ajax, upload, download, mp3

我正在寻找一种向用户发送常规文件（mp3 或图片）的方法，并在**不通过 HTML/PHP 页面的情况下**计算该文件被访问的次数。

例如，用户将他的浏览器指向 bla.com/file.mp3 并开始下载它，而服务器端脚本将执行诸如将数据保存到数据库之类的操作。

知道我应该从哪里开始吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:23:53.800

您将需要通过一个 php 脚本，您可以做的是将要跟踪的扩展（最好是在文件夹级别）重写为一个 php 脚本，该脚本然后执行您需要的计算并将文件提供给用户。

例如：

如果您想跟踪 /downloads/ 文件夹，您将在您的网络服务器上创建一个重写，以重写所有或仅重写 php 文件的特定扩展，我们将在此示例中调用 proxy.php。

一个示例 uri 将是 proxy.php?file=file.mp3 proxy.php 脚本清理文件参数，检查用户是否有权下载（如果适用），检查文件是否存在，将文件提供给客户端并执行任何后端所需的操作，如数据库更新等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:25:07.910

你的意思是你不希望你的用户看到一个特定的页面并打断他们的流程吗？如果这样做，您仍然可以通过以下步骤使用 PHP 页面。（我不是最新的 PHP 所以它会是伪代码，但你会明白的）

*   提供指向您文件的链接（例如）[http://example.com/trackedDownloader.php?id=someUniqueIdentifer](http://example.com/trackedDownloader.php?id=someUniqueIdentifer)
*   在 tracedDownloader.php 文件中，确定与唯一 id 相关的服务器上的真实位置（例如，12345 可以映射到 /uploadedFiles/AnExample.mp3）
*   在输出中设置适当的内容类型标头。
*   将请求记录到您的数据库。
*   直接将文件内容作为页面输出返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:42:08.727

您需要扫描日志文件。无论如何，您很可能希望将计数器存储在数据库中？

使用 PHP 提供静态文件有一个很好的解决方案：

[https://tn123.org/mod_xsendfile/](https://tn123.org/mod_xsendfile/)

# algorithm - 给定堆的前序遍历，构造堆

> ID：12531337
> 
> 赞同：3
> 
> 时间：2012-09-21T13:14:46.020
> 
> 标签：algorithm, heap, tree-traversal

在互联网的某个地方看到这个问题并试图解决它。对于堆是严格二叉树的情况（通过重复划分前序遍历），我可以解决它，但当堆只是一棵完整的二叉树时无法找出算法。

例如，如果`1, 2, 3, 4, 5, 6, 7`是最小堆的前序遍历，

堆的大小是`7`

`1`是堆中的第一个元素（考虑到堆表示为数组）

下一个`(size - 1) / 2`元素将在左子树中`1`

`2, 3, 4`将在的左子树中`1`

最后一个`(size - 1) / 2`元素将在右子树中`1`

`5, 6, 7`将在的右子树中`1`

可以通过递归应用此逻辑来构造完整的堆。

该解决方案适用于堆是严格二叉树的情况

```
 1
    2     3
  4   5  6  7 
```

但显然，这在非叶元素有一个或没有子元素的堆的情况下不起作用。例如，

```
 1                1
       2     3         2     3
     4   5  6        4     5 
```

我想不出任何干净的算法可以做到这一点。任何解决方案/建议都会有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:46:43.833

看几个例子会让这更容易。随着孩子数量的增加，我们看到以下模式：

*   如果孩子的数量为 2，则拆分为： (1, 1)
*   如果孩子的数量为 3，则拆分为： (2, 1)

当孩子的数量在 2 到 6 之间时继续这种方式，我们得到以下拆分：

```
(1, 1), (2, 1), (3, 1), (3, 2), (3, 3) 
```

当孩子的数量在 6 到 14 之间时，我们得到：

```
(3, 3), (4, 3), (5, 3), (6, 3), (7, 3), (7,4), (7, 5), (7, 6), (7, 7) 
```

所以当孩子的数量在 (2^k-2) 和 (2^{k+1}-2) 之间时，我们得到：

```
 either a split of the form (2^{k-1}-1+l, 2^{k-1}-1) where   0 <= l <= 2^{k-1} or
                            (2^k-1, 2^{k-1}-1+l)     where   0 <= l <= 2^{k-1} 
```

然后的逻辑是找到 ak 使得 (2^k-2) <= childCount <= (2^{k+1}-2) 并拆分如下：

```
Let l = childCount - (2^k-2)
If  l <= 2^{k-1} 
    split with (2^{k-1}-1+l, remaining)
Else 
    split with (2^k-1, remaining) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T16:57:19.123

通过前序遍历，按排序顺序生成其元素的堆是由向量 (1,2,5,3,4,6,7) 表示的堆。不存在中序遍历按排序顺序生成键的堆。这是因为在堆中，父级总是小于其所有子级或大于其所有子级。由 (7,3,6,1,2,4,5) 表示的堆是在后序遍历期间按排序顺序生成其键的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:22:05.210

将前序遍历转换为标准堆表示应该很简单。预购访问自己，左，右。对于基于 1 的数组中的堆，节点 N 的左子节点为 2N，右子节点为 2N+1。这直接导致了这个算法：

```
def constructHeap(preorder, pidx, heap, hidx)  
    return pidx if (hidx>=heap.size)         #no more children
    heap[hidx] = preorder[pidx]              #self
    pidx = constructHeap(preorder, pidx+1, heap, hidx*2) #left
    return constructHeap(preorder, pidx, heap, hidx*2+1) #right
end

preorder = [1,2,3,4,5,6,7]
heap = Array.new(preorder.size+1)            #create storage
constructHeap(preorder, 0, heap, 1)
puts heap 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:26:58.600

您试图通过仅应用提供给您的两条信息之一来解决此问题。

你掌握的信息是：

*   你有一棵二叉树
*   所述树是堆排序的

现在，虽然确实您通常需要两次二叉遍历才能获得第三次遍历（前、后、按顺序为三），但在这里，您有一个额外的信息：*二叉树是一个[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)*。

二叉堆*总是*一棵完全二叉树。*完全二叉树*就是这样一棵二叉树，其中树的所有层都是满的，也许最后一层除外，它总是从左到右被填满。换句话说，堆不可能有一个内部节点少于两个子节点。

# jquery - jQuery selector: Double :not not working

> ID：12531339
> 
> 赞同：1
> 
> 时间：2012-09-21T13:14:52.163
> 
> 标签：jquery, jquery-selectors

Having this html:

```
<div><h1>1</h1></div>
<div>2</div>
<div><h1>3</h1></div> 
```

This is returning 0:

```
$("div").filter(":not(:not(:has(h1)))").length 
```

I've made some [testing here](http://jsfiddle.net/paska/h5PAm/2/) and the first two selectors are ok (without any filtering, and then just with one not).

This is a simpler model than my code. I really can't avoid both not's because one is added by a plugin and the other is being received in its options.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:14:52.163

Don't know why this is happening but it got fixed on version 1.8\. [Here is the same code with jQuery 1.8 working](http://jsfiddle.net/paska/h5PAm/1/).

If you can't change your version for some reason one workaround is changing the `.filter` for `.not`. [Here](http://jsfiddle.net/paska/h5PAm/3/) it is working.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:41:27.583

Have you tried removing the double 'not's like this ?

```
alert($("div").length);
alert($("div").filter(":not(:has(h1))").length);
alert($("div").filter(":has(h1)").length);​ 
```

# c# - 将数据从多个 CSV 文件导入 Excel 工作表

> ID：12531342
> 
> 赞同：3
> 
> 时间：2012-09-21T13:15:03.993
> 
> 标签：c#, excel, csv

我需要将 50 个类似 csv 文件中的数据导入到单个 Excel 表中。有没有办法从每个文件中只获取选定的列并将它们放在一张纸上。

我的 csv 文件的结构：所有文件中的几列完全相同。（我希望它们在 excel 中）然后一列具有相同的列名但不同的数据，我想在 excel 表中以不同的名称彼此相邻放置。我不希望 csv 文件中的所有其他剩余列。

简而言之，

1.  读取所有 csv 文件，
2.  获取所有 csv 共有的所有列并放入 excel 表中。
3.  现在，从每个具有相同标题但数据不同的文件中取出一列，并在 Excel 表中以 csv 文件名命名。
4.  留下剩余的列。
5.  将excel表写入excel文件。

最初我认为这很容易做到，但考虑到我在学习阶段的编程能力，这对我来说很难。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:01:10.747

`Microsoft Text Driver`允许您读取 DataSet 中的 CSV 数据，使数据操作变得容易。

[这个 Stack Overflow 问题](https://stackoverflow.com/q/4395845/999042)是一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:20:29.357

最快的方法可能是使用[FileHelpers](http://filehelpers.sourceforge.net/)将 CSV 读入 DataTable ：

[http://filehelpers.sourceforge.net/FileHelpers.CommonEngine.CsvToDataTable_overload_4.html](http://filehelpers.sourceforge.net/FileHelpers.CommonEngine.CsvToDataTable_overload_4.html)

然后使用[EPPlus](http://epplus.codeplex.com/)在 excel 中导出该 DataTable，使用此代码段中的 DataTableToExcelXlsx 方法：

[https://stackoverflow.com/a/9569827/351383](https://stackoverflow.com/a/9569827/351383)

使用 EPPlus，您不必在执行此代码的机器上安装 Excel，您可以在服务器 (ASP.NET) 上使用它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T15:36:31.437

通过非常简单的编码，我能够读取文件。现在，我们唯一需要做的就是让这段代码有点花哨，以循环遍历给定文件夹中的所有 CSV 文件并收集数据。一旦我们读取数据，就可以根据需要对其进行过滤并放入 Excel。当然，excel可以自己导入CSV，但是每次都这样做，并不实用。同样，我们可以将代码添加到应用程序以灵活使用，这正是我想要做的。

```
public static System.Data.DataTable GetDataTable(string strFileName)

{
        System.Data.OleDb.OleDbConnection dbConnect = new System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0; Data Source = " + System.IO.Path.GetDirectoryName(strFileName) + ";Extended Properties = \"Text;HDR=YES;FMT=TabDelimited\"");
        dbConnect.Open();
        string strQuery = "SELECT * FROM [" + System.IO.Path.GetFileName(strFileName) + "]";
        System.Data.OleDb.OleDbDataAdapter adapter = new System.Data.OleDb.OleDbDataAdapter(strQuery, dbConnect);
        System.Data.DataSet dSet = new System.Data.DataSet("CSV File");
        adapter.Fill(dSet);
        dbConnect.Close();
        return dSet.dbTables[0];
 } 
```

# ios - 应用程序运行一秒钟，然后立即关闭

> ID：12531343
> 
> 赞同：0
> 
> 时间：2012-09-21T13:15:05.253
> 
> 标签：ios, xcode

这是一个非常基本的应用程序。编译时，它显示“构建成功”（“没有问题”）。当我单击模拟器中的应用程序图标时，它会运行一秒钟，然后自动关闭。我可以看到没有错误（比如运行时错误）。我应该在哪里寻找提示？

ClickButtonViewController.m 文件：

```
 #import "ClickButtonViewController.h"

@implementation ClickButtonViewController;

@synthesize decisionText ; 

-(IBAction)buttonPressed:(id)sender 
{
    decisionText.text = @"Go for it!" ;
}

-(void)dealloc{
    [decisionText release];
    [super dealloc] ; 

}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

@end 
```

ClickButtonViewController.h 文件：

```
#import <UIKit/UIKit.h>

@interface ClickButtonViewController : UIViewController {

    IBOutlet UILabel *decisionText ; 

}

@property (nonatomic,retain) IBOutlet UILabel *decisionText ;

-(IBAction)buttonPressed:(id)sender; 

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:38:25.237

构建不会将应用程序安装到模拟器，您需要运行目标。

如果您选择了不可运行的目标（例如静态库），则运行选项将执行构建。

# jquery - 在 Firefox 中，我的 jquery 点击功能不起作用，MVC3

> ID：12531348
> 
> 赞同：0
> 
> 时间：2012-09-21T13:15:22.720
> 
> 标签：jquery, asp.net-mvc-3, click

在我的 controller.js 中，我具有以下功能：

```
$(MyModel.addMyButtonTag).live("click", function () {
    MyModel.addRecord();
}); 
```

在我的 model.js 中，我有：

```
var MyModel = {    
    addMyButtonTag: "#AddButton",

    addRecord: function () {

       //Show modal
       $(MyModel.addMyButtonTag).modal();
       $('#simplemodal-container').css('height', '230px');
       $('#simplemodal-container').css('min-height', '0');
   }
} 
```

这些 jquery 在 IE8-9 中运行良好，但在 Firefox 中它们根本不起作用。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:29:04.690

```
addMyButtonTag: "#AddButton" 
```

结尾找不到逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:19:56.847

jQuery .live() 已弃用 使用 .on() 代替

欲了解更多信息，请查看这里[http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:25:54.103

确保在您的实时函数之前定义您的类“MyModel”。首先包含您的类定义 js。

它对我有用：

```
<input type="button" id="AddButton" />
<script type="text/javascript">

        var MyModel = {
            addMyButtonTag: "#AddButton",
            addRecord: function () {

                //Show modal
                alert("ITS OK");
            }
        }

    $(MyModel.addMyButtonTag).live("click", function () {
    MyModel.addRecord();
});

</script> 
```

# get - XDomainRequest 在 IE9 中不起作用

> ID：12531350
> 
> 赞同：0
> 
> 时间：2012-09-21T13:15:32.120
> 
> 标签：get, xmlhttprequest, httpwebrequest, xdomainrequest

我正在尝试加载不在 Web 应用程序文件夹中但通过 GET 请求升级的 XML 文档。loadXMLDoc 适用于 FF 和 chrome，但 XDR 不适用于 IE。

我正在调用这样的方法：

```
xmlDoc = loadXMLDoc("../XML/stops_group1.xml"); 
```

我被引导相信问题在于根目录中的上一级，因为它适用于同一目录文件夹

```
function loadXMLDoc(url) {

    if (typeof XDomainRequest != 'undefined') {

        var xdr = new XDomainRequest();
        xdr.contentType = "text/plain";
        xdr.timeout = 5000;
        if (xdr) {
            xdr.onerror = function () {
                alert('XDR onerror');
                alert("Got: " + xdr.responseText);
            };
            xdr.ontimeout = function () {
                alert('XDR ontimeout');
                alert("Got: " + xdr.responseText);
            };
            xdr.onprogress = function () {
                alert("XDR onprogress");
                alert("Got: " + xdr.responseText);
            };
            xdr.onload = function () {
                alert('onload' + xdr.responseText);
                callback(xdr.responseText);
            };
            // 2\. Open connection with server using GET method
            xdr.open("get", url);
            // 3\. Send string data to server
            xdr.send("");
        } else {
            alert('failed to create xdr');
        }
        return xdr.responseXML;
    }
    var xhr = createCORSRequest('GET', url);
    if (!xhr) {
        throw new Error('CORS not supported');
    }

    xhr.send("");
    return xhr.responseXML;
}

function createCORSRequest(method, url) {
    var xhr = new XMLHttpRequest();
    if ("withCredentials" in xhr) {
        // Check if the XMLHttpRequest object has a "withCredentials" property.
        // "withCredentials" only exists on XMLHTTPRequest2 objects.
        xhr.open(method, url, true);
    } else if (typeof XDomainRequest != "undefined") {
        // Otherwise, check if XDomainRequest.
        // XDomainRequest only exists in IE, and is IE's way of making CORS requests.
        xhr = new XDomainRequest();
        xhr.open(method, url);
    } else {
        // Otherwise, CORS is not supported by the browser.
        xhr = null;
    }
    return xhr;
} 
```

我已经尝试在 web.config 文件中添加 Access-Control-Allow-Origin

```
<system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
      </customHeaders>
    </httpProtocol>
  </system.webServer> 
```

但仍然会收到 onError 的警报消息，其中 responseText 为空...

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:59:43.570

感谢您的回复...实际上我的问题是其他...似乎IE无法处理xml文件中存在的UTF-16编码...更改为utf-8，现在一切都很好

# jquery - jquery 水平手风琴点击收缩

> ID：12531353
> 
> 赞同：0
> 
> 时间：2012-09-21T13:15:54.310
> 
> 标签：jquery, accordion

我有这个脚本用于水平手风琴。您可以在此处查看功能：http: [//jsfiddle.net/vXpPg/](http://jsfiddle.net/vXpPg/)

我也希望在点击时关闭打开的幻灯片。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:22:27.327

干得好：

[http://jsfiddle.net/vXpPg/1/](http://jsfiddle.net/vXpPg/1/)

我修改了您的`click`功能以检查您首先单击的部分的宽度。如果这个宽度等于你写的，`maxWidth`那么我们知道我们只想折叠它（将其宽度更改为`minWidth`设置）。如果不是，那么我们知道它必须是一个小部分，并且需要像平常一样扩展（您已经拥有的代码）。

```
$("ul li").click(

function() {
    /*
     * I added this
     */
    if ($(this).width() == maxWidth) {
        $(this).animate({
            width: minWidth + "px"
        }, {
            queue: false,
            duration: 400
        });
    } else {
        /*
         * You had this
         */
        $(lastBlock).animate({
            width: minWidth + "px"
        }, {
            queue: false,
            duration: 400
        });
        $(this).animate({
            width: maxWidth + "px"
        }, {
            queue: false,
            duration: 400
        });
    }
    lastBlock = this;
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:25:46.280

我认为这应该解决它：

```
lastBlock = $("#a1");
maxWidth = 450;
minWidth = 50;

$("ul li").click(

function() {
    if (lastBlock != this) {
        $(lastBlock).animate({
            width: minWidth + "px"
        }, {
            queue: false,
            duration: 400
        });
        $(this).animate({
            width: maxWidth + "px"
        }, {
            queue: false,
            duration: 400
        });
        lastBlock = this;
    } else {
        $(this).animate({
            width: minWidth + "px"
        }, {
            queue: false,
            duration: 400
        });
    }
});​ 
```

# objective-c - Web服务调用时io6应用程序崩溃

> ID：12531356
> 
> 赞同：2
> 
> 时间：2012-09-21T13:16:01.667
> 
> 标签：objective-c, ios, xcode, web-services

在这里我收到这样的错误：我的代码在 ios 4/5 上工作，但在 ios6.0 上崩溃 在这些行之后，我的应用程序将崩溃

self.con = [[NSURLConnection alloc] initWithRequest:rq delegate:self] if (self.con) {

NSLog(@"CON 连接") myWebData = [[NSMutableData 数据] 保留] }

```
 ========================================
This method not calling 
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
-(void)connectionDidFinishLoading:(NSURLConnection *)connection

and here below crash log have you see:

        libicucore.A.dylib`ucol_getVersion:
        0x30f92570:  ldr.w  r2, [r0, #204]
        0x30f92574:  cbnz   r2, 0x30f925ae            ; ucol_getVersion + 62
        0x30f92576:  ldr    r2, [r0, #36]
        0x30f92578:  movs   r3, #56
        0x30f9257a:  ldrb.w r2, [r2, #68]
        0x30f9257e:  orr.w  r3, r3, r2, lsr #2
        0x30f92582:  lsls   r2, r2, #6
        0x30f92584:  strb   r3, [r1]
        0x30f92586:  strb   r2, [r1, #1]
        0x30f92588:  ldr    r2, [r0, #36]
        0x30f9258a:  ldrb.w r2, [r2, #69]
        0x30f9258e:  strb   r2, [r1, #2]
        0x30f92590:  ldr    r0, [r0, #32]
        0x30f92592:  cbz    r0, 0x30f925a8            ; ucol_getVersion + 56
        0x30f92594:  ldr    r2, [r0, #36]
        0x30f92596:  ldrb.w r0, [r2, #72]
        0x30f9259a:  ldrb.w r2, [r2, #73] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:55:57.773

刚刚使用 Xcode 版本 4.5.1 (4G1004) 和部署目标 6.0 进行了尝试，这里没有崩溃。

您能否提供有关您的环境的更多信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:28:48.763

当我从 iPod 媒体库导出歌曲并在导出完成时显示警报视图时，我遇到了类似的崩溃。我发现[这个](https://stackoverflow.com/a/12531275/662096)答案很有帮助。

> 实际上这个故事的寓意是，如果你在做多线程，任何 UI 渲染任务都应该在 MainThread 上完成。

我希望这有帮助。

[资源](https://stackoverflow.com/q/12525857/662096)

# .htaccess - 使用 .htaccess 用多个参数重写 perl cgi-bin URL

> ID：12531362
> 
> 赞同：0
> 
> 时间：2012-09-21T13:16:29.543
> 
> 标签：.htaccess, url, mod-rewrite, seo, rewrite

我正在开发一个使用 medoc 电子商务系统的 PERL 网站，我发现它吐出了对用户或搜索引擎没有意义的非常丑陋的 URL： [https ://www.example.com/cgi-bin /live/ecommerce.pl?site=test.com&dept_id=01&sub_dept_id=01&menu=currency&zone=test](https://www.example.com/cgi-bin/live/ecommerce.pl?site=test.com&dept_id=01&sub_dept_id=01&menu=currency&zone=test)

我想重写它，所以它很简单，例如[https://www.example.com/travel-money/home-delivery](https://www.example.com/travel-money/home-delivery)

有什么想法我会怎么做？

可能有 50 个不同的 cgi-bin URL，每个都有多个参数，我想单独重写所有这些。

我想出了两个不同的重写规则，但都没有奏效。我找不到任何具有多个参数的示例：

选项1：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /
RewriteCond %{QUERY_STRING} ^site=test.com&dept_id=01&sub_dept_id=01&menu=currency&zone=test$
RewriteRule ^/cgi-bin/live/ecommerce.pl https://www.example.com/travel-money/home-delivery [L,R=301] 
```

选项 2：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /
RewriteCond %{QUERY_STRING} ^(.*)test.com&dept_id=01&sub_dept_id=01&menu=currency&zone=ice$
RewriteRule ^cgi-bin/live/ecommerce.pl$ travel-money/home-delivery? [R=301,L] 
```

谢谢，

# git - 标准输出上的 Git 包

> ID：12531371
> 
> 赞同：0
> 
> 时间：2012-09-21T13:16:52.777
> 
> 标签：git, bundle

我想用 git 生成一个包，但由于某些重要原因，我需要它在标准输出上而不是在文件中。是否有替代命令`git bundle`来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:20:35.167

`-`用作*文件*参数`git bundle`：_

```
$ git bundle create - HEAD~10.. > outfile    
Counting objects: 83, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (67/67), done.
Writing objects: 100% (68/68), 8.42 KiB, done.
Total 68 (delta 55), reused 0 (delta 0)
$ file outfile
outfile: Git bundle
$ ls -l outfile
-rw-r--r-- 1 author author 8789 2012-09-21 15:20 outfile 
```

**注意：**从 git 2.17.0 开始，上述命令只有在工作树的根目录调用时才能正常工作。（在其他目录中，`-`会创建一个文件并`outfile`最终为空。）

# asp.net-mvc-3 - 如何在 Windows azure 上使用 ADO .NET EF 部署 ASP.NET MVC 3 项目？

> ID：12531390
> 
> 赞同：0
> 
> 时间：2012-09-21T13:17:56.923
> 
> 标签：asp.net-mvc-3, c#-4.0, azure-connect

我正在使用 asp.net mvc 3 web 角色在 Windows azure 上工作。我正在尝试使用 ADO.NET Entity Framework 列出表中的所有记录。我已经使用以下连接字符串来绑定模型。

```
<add name="CalMedEntities" connectionString="metadata=res://*/Models.CalMedModel.csdl|res://*/Models.CalMedModel.ssdl|res://*/Models.CalMedModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=STELLENT-PC.database.windows.net;initial catalog=CalMed;persist security info=True;user id=sa;password=#stellent10;multipleactiveresultsets=True;Encrypt=True;erverCertificate=False;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

当我在本地运行我的项目时，它在 Windows azure 模拟器中工作正常。但我收到一个错误

**基础提供程序在打开时失败。**

将我的项目发布到 Windows azure 门户后。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:16:06.027

您的连接字符串应该看起来像这样（您将从 azure 门户获取数据库参数）：

```
<add name="CalMedEntities"
    connectionString="Server=tcp:u0ngf29abc.database.windows.net,1433;
    Database=myentities;User ID=youname-admin@u0ngf29abc;Password=mypassword;
    Trusted_Connection=False;Encrypt=True;
    MultipleActiveResultSets=True;PersistSecurityInfo=True;"
    providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:49:45.920

我认为连接字符串不是指向您的 Azure 数据库，而是指向您的本地数据库。您需要设置与 Azure 为您提供的连接

# php - 在 Zend Framework 视图脚本中使用 baseUrl() 重要吗？

> ID：12531396
> 
> 赞同：2
> 
> 时间：2012-09-21T13:18:35.417
> 
> 标签：php, zend-framework

有些人报告了`baseUrl()`在视图脚本中访问、设置或获取正确值的问题。但我想知道为什么有必要使用它，至少在像我这样的情况下，ZF 应用程序位于虚拟私有主机（Amazon EC2）上，我可以完全控制目录结构和 apache 重写规则，以及路线。

例如，我知道在文件系统`foo.jpg`中存在`public/images/foo.jpg`，并且应用程序的 mod_rewrite 会将所有请求定向到`public`- 所以在我看来脚本中，编写类似的东西要简单/清晰和高效得多

```
<img src="/images/foo.jpg" /> 
```

代替

```
<img src="<?php echo $this->baseUrl();?>/images/foo.jpg" /> 
```

`baseUrl()`使用真正提供了什么样的面向未来的稳健性或其他好处？到目前为止，我还没有使用它，也没有任何问题。但是我继承了一些使用它的代码，我倾向于在编辑包含它们的视图脚本时去掉这些用途。我以后会后悔吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:17:22.203

用这种方式，它不是真的有用，但是另一方面，这种方式使用它

```
echo $this->baseUrl('/images/foo.jpg') 
```

将来可能会被证明是有用的，因为您可以在打印 URL 之前添加逻辑。想象一下，几年后您的网站增长超出您的预期，您必须将所有静态内容移动到`Content delivery network (CDN)`您必须手动（或使用搜索和替换）更正所有图像/css/js 实例 URL 的位置。使用`baseUrl()`（或命名它`assetUrl()`）您只需要添加您的 CDN 的 url，它将在您的应用程序的任何地方得到修复。

**编辑**

`baseUrl()`我在你继承的代码中发现了一个用途：

如果您的网站不在域的根目录下，它将允许您向所有链接和引用添加公共 URL 部分

```
i.e. : www.mysite.com/zf-app/ 
```

在您的配置文件中，您只需添加

```
resources.frontController.baseUrl = "/zf-app/" 
```

让它工作，你所有的链接都会在那个部分前面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T15:11:07.197

完美的例子。我有几个在不同系统上构建的基本 Zend-y 实用程序。在我的测试平台上，我只是用自己的文档根虚拟主机。通常我通过远程 Web 浏览器访问这些工具，但这需要我通过 VPN 连接到运行它的系统，因为我没有将这些工具创建在子网之外的任何东西上，也不想将它们暴露给面向 Internet 的站点. 因此，随之而来的是 android 手机和诸如 bitweb 服务器之类的东西，它允许您在袖珍手机上以最小化的形式运行 lighttpd、php 和 mysql。唯一的问题是，它并没有真正强大到足以在 android 操作系统上进行虚拟主机。没问题，它将允许基本的混叠，所以我只是将所有工具都移动到我的 sdcard 上它们自己的子目录中，并使用 lighttpd mod_alias 定义指向每个工具，然后为每个子目录创建重写规则。但这导致我写这篇文章和其他喜欢它的人来修复所有指向 href="/some/path/to/static/content" 的静态 url，我什至不得不将一些 url 更新为 zend 工具，这些工具是使用的绝对路径{view}->url() 改为调用。通过将 baseUrl 调用添加到静态内容的前面，并使用视图 url() 方法调用控制器操作，我现在可以将任何一个独立工具的整个 Zend MVC 移动到我想要的任何目录中并让它们运行从我想要的网络树深处。Zend 完成了剩下的工作，只需要在 lighttpd conf 文件中设置 2-3 个格式正确的条目。

# function - 如何将变量发送到方案中的函数？

> ID：12531403
> 
> 赞同：1
> 
> 时间：2012-09-21T13:19:03.030
> 
> 标签：function, variables, scheme

我是新来的计划。当我运行以下代码时

```
(define lst '(1))

(let ((func1 (lambda lst 
               (begin (display lst)
                      lst))))
  (begin (display lst) 
         (func1 lst))) 
```

我得到了`(1)((1))'((1))`，这意味着 lst`(1)`在第四行调用时显示为，但是当将其发送到函数`func1`时，它变为`((1))`. 这里究竟发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:25:23.813

`(lambda Args E)`意思是：将此函数的变长参数列表绑定到`Args`. 例如

```
(define f (lambda args `(got ,(length args) arguments)))
(display (f 'foo 'bar 'baz)) 
```

将打印`(got 3 arguments)`。如果将`lambda`表达式更改为

```
(lambda (lst) (begin (display lst) lst))
;;;     ^---^ 
```

然后该函数将打印并返回其单个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:42:23.090

在一个`lambda`表格中，当你写这个时：

```
(lambda x <body>) 
```

...您声明这`x`是一个包含零个或多个元素的参数*列表*。另一方面，这是：

```
(lambda (x) <body>) 
```

...说明这`x`是一个参数。在问题中，此代码（`begin`a 中的正文部分不需要`lambda`）：

```
((lambda lst (display lst) lst) '(1)) 
```

... 将显示并返回参数列表；如果我们通过`'(1)`它，它将评估为`'((1))`：一个带有单个元素的列表，恰好是一个列表。

您肯定打算这样做：

```
((lambda (lst) (display lst) lst) '(1)) 
```

...它将显示并返回它接收到的单个参数 - 如果传递`'(1)`上述表达式`'(1)`，则将评估为参数本身。

# php - 设置 PHP tmp 目录 - PHP 上传不起作用

> ID：12531408
> 
> 赞同：33
> 
> 时间：2012-09-21T13:19:15.510
> 
> 标签：php, file-upload, valums-file-uploader

[我正在使用Valums 文件](https://github.com/valums/file-uploader)上传器通过带有进度条的网页上传文件。几乎一切正常，但我无法更改默认的 tmp 目录，该目录在上传**期间**存储文件。

文件应该存储在`/upload`目录中，而不是默认系统`/tmp`目录中，因为`/tmp`它安装在一个大小限制为 4 MB 的 RAM 磁盘中，用户将上传大约 10 MB 的文件。

我搜索了很多网页，但没有一个解决方案有效。我在以下位置设置了临时目录`php.ini`：

```
upload_tmp_dir =/upload 
```

我已经设置了该目录的权限`/upload`，并且 apache 是该文件的所有者，所以该目录绝对是 PHP 可写的。

我已将文件上传器中的目标路径设置为`/upload`，因为我希望文件在上传后也存储在此目录中。最终的结果是小文件上传成功，但大于 4 MB 的文件上传失败——我想到这种行为的唯一原因是文件`/tmp`在上传过程中被存储。可以肯定的是，我已经检查过了`sys_get_temp_dir()`，结果是 - 所以`/tmp`PHP 会忽略我的 php.ini 指令，或者还有其他方法可以设置上传期间文件的存储位置。

哦，最后一个信息：`open_basedir`没有设置，所以 PHP 对磁盘的访问仅受文件权限的限制。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-18T19:35:17.037

这里描述的问题很久以前就被我解决了，但我真的不记得上传不起作用的主要原因是什么。有很多事情需要修复，以便上传可以正常工作。我创建了可能会帮助其他有类似问题的人的清单，我将对其进行编辑以使其尽可能有用。正如我之前在聊天中所说，我正在研究嵌入式系统，因此在非嵌入式系统上可能会跳过一些要点。

*   签`upload_tmp_dir`入 php.ini。这是 PHP 在上传时存储临时文件的目录。

*   签`open_basedir`入 php.ini。如果已定义，它将 PHP 读/写权限限制为指定路径及其子目录。确保它`upload_tmp_dir`在此路径内。

*   签`post_max_size`入 php.ini。如果您想上传 20 MB 的文件，请尝试更大一点的文件，例如`post_max_size = 21M`. 这定义了您在上传期间可能使用的最大 POST 消息大小。

*   签`upload_max_filesize`入 php.ini。这指定了可以上传的最大文件。

*   签`memory_limit`入 php.ini。这是脚本可能消耗的最大内存量。很明显，它不能小于上传大小（老实说我不太确定——PHP 在复制临时文件时可能正在缓冲）。

*   确保您正在检查正确的 php.ini 文件，该文件是 PHP 在您的网络服务器上使用的文件。最好的解决方案是使用此处描述的指令执行脚本[http://php.net/manual/en/function.php-ini-loaded-file.php](http://php.net/manual/en/function.php-ini-loaded-file.php)（`php_ini_loaded_file`函数）

*   检查 php 以什么用户身份运行（请参阅此处如何操作：[如何检查 php 以什么用户身份运行？](https://stackoverflow.com/questions/7771586/how-to-check-what-user-php-is-running-as)）。我曾在不同的发行版和服务器上工作过。有时它是`apache`，但有时它可以`root`。无论如何，请检查该用户是否有权在您要上传到的临时目录和目录中进行读写。检查路径中的所有目录，以防您上传到子目录（例如`/dir1/dir2/`-check both`dir1`和`dir2`.

*   在嵌入式平台上，您有时需要限制对根文件系统的写入，因为它存储在闪存卡上，这有助于延长该卡的使用寿命。如果您使用脚本来启用/禁用文件写入，请确保在上传之前启用写入。

*   在某些平台上，我在基于会话的 PHP >5.4 上传监控方面遇到了严重问题（如此处所述[http://phpmaster.com/tracking-upload-progress-with-php-and-javascript/ ）。](http://phpmaster.com/tracking-upload-progress-with-php-and-javascript/)首先尝试一些简单的东西（比如这里：[http](http://www.dzone.com/snippets/very-simple-php-file-upload) ://www.dzone.com/snippets/very-simple-php-file-upload ）。如果它有效，您可以尝试更复杂的机制。

*   如果您在 php.ini 中进行任何更改，请记住重新启动服务器，以便重新加载配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-02T15:00:27.340

我在这个问题上挣扎了很长时间......我的解决方案是修改包含 php 脚本的文件夹中的 php.ini 文件。这很重要，因为修改根目录下的 php.ini 并不能解决问题（我在每个文件夹中都有一个 php.ini 用于精细控制）。我的 php.ini 中的相关条目看起来像这样......（这个问题可能不需要 output_buffering）

```
output_buffering = On 
upload_max_filesize = 20M 
post_max_size = 21M 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-12T17:35:11.477

使用以下命令创建 php 文件：

```
<?php
    print shell_exec( 'whoami' );
?> 
```

或者

```
<?php echo exec('whoami'); ?> 
```

在您的网络浏览器中尝试输出。 **如果输出不是您的用户示例：www-data** 然后继续下一步

以root身份打开：

> /etc/apache2/envvars

寻找这些行：

> 导出 APACHE_RUN_USER=用户名
> 
> 导出 APACHE_RUN_GROUP=组名

例子：

> 导出 APACHE_RUN_USER=www-数据
> 
> 导出 APACHE_RUN_GROUP=www-data

在哪里：

用户名 = 有权访问您正在使用的文件夹的用户名 group = 您已授予读 + 写 + 执行访问权限的组

将其更改为：

> 导出 APACHE_RUN_USER="用户名"
> 
> 导出 APACHE_RUN_GROUP="组"

如果您的用户还没有访问权限：

> sudo chmod 775 -R "你想授予 r/w/x 访问权限的文件夹目录"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-30T06:25:35.627

我的问题是selinux ...

去 *sestatus*

如果 *当前模式：执行*

然后 *chcon -R -t httpd_sys_rw_content_t /var/www/html*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-10T11:12:21.410

我也面临同样的问题 2 天，但现在终于可以正常工作了。

第 1 步：使用此内容创建一个 php 脚本文件。

```
<?php 
 echo 'username : ' . `whoami`;
 phpinfo();
?> 
```

记下用户名。记下 phpinfo 核心部分下的 open_basedir。还要记下phpinfo核心部分下的upload_tmp_dir。

这里有两件事很重要，看看upload_tmp_dir 值是否在open_basedir 目录之一中。（php 不能在 open_basedir 目录之外上传文件）。

第 2 步：以 root 访问权限打开终端并转到 upload_tmp_dir 位置。（在我的情况下是“/home/admin/tmp”。）

```
 => cd /home/admin/tmp 
```

但在我的情况下没有找到它，所以我创建了它并为我在步骤 1 中获得的 php 用户添加了 chown （在我的情况下为“admin”）。

```
 => mkdir /home/admin/tmp
  => chown admin /home/admin/tmp 
```

这就是解决文件上传问题所要做的一切。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-03-01T21:20:00.147

就我而言，它是定义的 open_basedir 。我将其注释掉（默认），我的问题已解决。我现在可以在任何地方设置上传目录。

# javascript - 带有确认框的 FormNavigate 是 否 按钮

> ID：12531412
> 
> 赞同：1
> 
> 时间：2012-09-21T13:19:34.083
> 
> 标签：javascript, jquery, jquery-ui

当用户离开 JSP 页面时，我需要显示一个确认按钮“是否”按钮“你有未保存的更改。你想离开它而不保存吗？”。如果用户按下“确定”，则用户转到他/她正在导航的页面。否则，如果按下“否”，用户将停留在页面上。我的代码在这里：

```
 var formdata_original=false;
    jQuery(".outConfirmPlugin").click(function () {

        if (formdata_original == false) {
            con();
        }
        return formdata_original;
    });
    function con() {
        $.confirm({
            'title':'',
            'message':settings.jsMessage,
            'buttons':{
                'Yes':{
                    'class':'blue',
                    'action':function () {
                        formdata_original = true;

                    }
                },
                'No':{
                    'class':'gray',
                    'action':function () {

                    }
                }
            }
        });
    }; 
```

我知道我的错误是：函数“ `con`”和“ `return formdata_original;`”-它们不同步。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:35:26.743

尝试从你的函数返回简单的值，我的意思是

```
action':function () {
                       return true;
                    } 
```

当你调用'con'函数时，你将能够编写

```
 formdata_original = con(); 
```

在这种情况下，您不必担心 sinhronize

第二个选项是创建属于 ot window 或 $ 的全局对象。所以试试

```
window["formdata_original"] = false 
```

并在确认对话框中的代码中

```
window["formdata_original"]=true. 
```

# php - ZF2 动态菜单与 Zend\Navigation\Navigation

> ID：12531423
> 
> 赞同：5
> 
> 时间：2012-09-21T13:20:13.810
> 
> 标签：php, dynamic, menu, navigation, zend-framework2

我想问你这个问题。使用 Zend\Navigation\Navigation 创建动态菜单需要什么？

在 ZF1 中，我是这样制作的：

```
$container = new Zend_Navigation();
$pages = array(
array(
    'label'  => 'Save',
    'action' => 'save',
),
array(
    'label'  => 'Delete',
    'action' => 'delete',
),
);
// add two pages
$container->addPages($pages); 
```

然后在视图中：

```
$this->navigation()->menu(); 
```

但在 ZF2 中，页面取自配置。现在我创建 \config\autoload\nav.global.php 并在这里创建页面数组。但我需要在方法中做页面数组并将其发送到导航助手，但我不知道如何（（

我试图在我的控制器中这样做：

```
use Zend\Navigation\Navigation;
$pages =array(
        // All navigation-related configuration is collected in the 'navigation' key
        'navigation' => array(
            // The DefaultNavigationFactory we configured in (1) uses 'default' as the sitemap key
            'default' => array(
                // And finally, here is where we define our page hierarchy
                'account' => array(
                    'label' => 'faq',
                    'route' => 'faq',
                    'pages' => array(
                        'news' => array(
                            'label' => 'news',
                            'route' => 'news',
                            ),
                            'manual' => array(
                            'label' => 'manual',
                            'route' => 'manual',
                            ),               
                    ),
                ),
            ),
        ),
    );
$Menu = new Navigation($pages); 
```

然后考虑到这一点：

```
$this->Menu()->menu(); 
```

但我有很多错误...

我想你明白我的问题。请帮忙。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-19T09:54:52.183

> 按照这些简单的步骤动态创建多级菜单步骤 1：创建部分 menu.phtml 文件并将其保存在布局文件夹或模块中，例如 application/view/layout/menu.phtml

```
 <ul  id="menu" >

    <?php foreach ($this->container as $page): ?>

        <li <?= $page->isActive()? 'class="active"' : 'class="drop"' ?>>

            <?php echo $this->navigation()->menu()->htmlify($page). PHP_EOL ?>

     <div class="dropdown_2columns" >

                           <?php  foreach ($page as $catpage) :?>

                    <div  class="col_1" >

                              <h3 <?= $page->isActive()? 'class="active"' : 'class="drop"' ?> >
            <?= $this->navigation()->menu()->htmlify($catpage). PHP_EOL ?>
                   </h3>
                        <ul  >

                           <?php  foreach ($catpage as $subpage) :?>

                           <li  <?= $subpage->isActive()? 'class="active"' : 'class="drop"' ?>>
            <?= $this->navigation()->menu()->htmlify($subpage). PHP_EOL ?>

                           <?php endforeach; ?>
                        </ul>   

                    </div>

                      <?php endforeach; ?>

                </div><!-- End dropdown container -->

                    </li>

                <?php endforeach; ?>
 </ul> 
```

> module.php 中的第 2 步

```
public function getServiceConfig()
    {
        return array(
                'initializers' => array(
                        function ($instance, $sm) {
                            if ($instance instanceof \Zend\Db\Adapter\AdapterAwareInterface) {
                                $instance->setDbAdapter($sm->get('Zend\Db\Adapter\Adapter'));
                            }
                        }
                ),
                'invokables' => array(
                        'menu' => 'Application\Model\MenuTable',

                ),

                'factories' => array(
                        'Navigation' => 'Application\Navigation\YourNavigationFactory'
                )
        );
    } 
```

> 在模块的 src/navigation 文件夹中创建 YourNavigation.php 和 YourNavigationFactory.php

```
namespace Application\Navigation;

use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\Navigation\Service\DefaultNavigationFactory;
use Admin\Model\Entity\Tablepages;
class YourNavigation extends DefaultNavigationFactory
{

    protected function getPages(ServiceLocatorInterface $serviceLocator)
    {

        if (null === $this->pages) {

            $fetchMenu = $serviceLocator->get('menu')->fetchAll();

            $configuration['navigation'][$this->getName()] = array();

            foreach($fetchMenu as $key=>$row)
            {

                $subMenu = $serviceLocator->get('menu')->fetchAllSubMenus($row['id']);

           if($subMenu){
              $pages = array();
                foreach($subMenu as $k=>$v)
                {
                    foreach($v as $field=>$value){
                        $page['label'] =$value['heading'];
                        $page['route'] = 'visas';
                        if ($value['path'] == $row['path']){
                        $page['params'] = array('action'=>'index',
                                                 'category'=> $this->$row['path'],

                        );

                        }

                        $subCatMenu = $serviceLocator->get('menu')->fetchAllSubCatMenus($value['id']);

                        $subcatpages = array();
                        $subcatgroup = array();
                        $group = array();
                        if($subCatMenu>0){

                        foreach($subCatMenu as $k=>$v)
                        {
                            foreach($v as $field=>$value1){

                                $subpage['label'] =$value1['heading'];
                                $subpage['route'] = 'visas';
                                if ($value['path'] ==$row['path']){

                                    $subpage['params'] = array('action'=>'index',
                                          'category'=> $row['path'],
                                          'sub_category'=> $value1['path']);

                                }elseif($row['id'] ==76){
                                    $subpage['params'] = array('action'=>'index',
                                            'category'=>$value['path'],
                                            'sub_category'=>$value1['path']);

                                }else{

                                $subpage['params'] = array('action'=>'index',
                                            'category'=> $row['path'],
                                            'sub_category'=> $value['path'],
                                            'id'=> $value1['path']);
                                }

                            }
                            $group[] =$subpage;

                         }

                       $page['pages'] =$group;
                       $pages[] =$page;

                        }

                        }

               }

           }

               $configuration['navigation'][$this->getName()][$row['name']] = array(
                    'label' => $row['name'],

                     'route' => 'visas',
                    'params'       => array(
                            'action' => 'index',
                            'category' => $row['path'],

                    ),

                   'pages' =>  $pages,

                );

            }

            if (!isset($configuration['navigation'])) {

                throw new Exception\InvalidArgumentException('Could not find navigation configuration key');
            }
            if (!isset($configuration['navigation'][$this->getName()])) {

                throw new Exception\InvalidArgumentException(sprintf(
                    'Failed to find a navigation container by the name "%s"',
                    $this->getName()
                ));
            }

            $application = $serviceLocator->get('Application');

            $routeMatch  = $application->getMvcEvent()->getRouteMatch();

            $router      = $application->getMvcEvent()->getRouter();
            $pages       = $this->getPagesFromConfig($configuration['navigation'][$this->getName()]);

            $this->pages = $this->injectComponents($pages, $routeMatch, $router);
        }

        return $this->pages;
    }
} 
```

> YourNavigationFactory.php

```
 namespace Application\Navigation;

    use Zend\ServiceManager\FactoryInterface;
    use Zend\ServiceManager\ServiceLocatorInterface;

        class YourNavigationFactory implements FactoryInterface
        {
            public function createService(ServiceLocatorInterface $serviceLocator)
            {
                $navigation =  new MyNavigation();
                return $navigation->createService($serviceLocator);
            }
        } 
```

> 在你的 layout.phtml

```
 <?php  echo $this->navigation('navigation')->menu()->setPartial('menu')->render();  ?> 
```

> 从导航创建动态站点地图

```
 $this->navigation('navigation')
          ->sitemap()
          ->setUseXmlDeclaration(false)
          ->setServerUrl('http://www.yourdomain.com')
          ->setFormatOutput(true);?>

   echo $this->navigation()->menu()->setMinDepth(null)->setMaxDepth(null)->setOnlyActiveBranch(false)->setRenderInvisible(true); 
```

> 创建面包屑

```
echo $this->navigation()
                  ->breadcrumbs()
                  ->setLinkLast(true)                 
                  ->setMaxDepth(1)                     
                  ->setSeparator(' ▶' . PHP_EOL); 
```

> 我希望它可以帮助您节省时间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T08:56:43.843

对于某些背景，您可能会在另一个类似的问题上阅读[此答案](https://stackoverflow.com/questions/12972316/how-to-set-up-2-navigations-in-zf2/12973806#12973806)`Zend\Navigation`。关键是您希望 MVC 页面和 Zend Framework 2 中的 MVC 页面需要一种方法来组合 url 并找到我们的 url 是否处于活动状态。

每个 MVC 页面都有一个路由名称。路由堆栈路由请求并获得路由匹配。您必须将此路由匹配注入到导航中，以便每个页面都可以根据匹配的路由检查自己的路由。

与 url 程序集类似。如果要将路由名称转换为 url，则需要路由堆栈（'router'）。在您的应用程序中也注入路由器，您就可以组装了。

简而言之：

```
use Zend\Navigation\Service\ConstructedNavigationFactory;

class MyController extends AbstractActionController
{

  public function indexAction()
  {
    $config = array(
      // your config here
    );

    $factory    = new ConstructedNavigationFactory($config);
    $navigation = $factory->createService($this->getServiceLocator());

    return new ViewModel(array(
        'navigation' => $navigation;
    ));
  }
} 
```

在您看来，与上述答案类似：

```
<?php echo $this->navigation($navigation)->menu()?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-23T17:18:34.347

我之前的回答不正确。以下代码有效。一页。在控制器中，编辑操作：

```
$page = new \Zend\Navigation\Page\Mvc(array(
    'route' => 'application/default',
    'controller' => 'album',
    'action'     => 'edit',
    'use_route_match' => true,
));

$r = $this->getEvent()->getRouter();
$rm = $this->getEvent()->getRouteMatch();
$page->setRouter($r);
$page->setRouteMatch($rm);

echo $page->isActive() ? 'true' : 'false'; // true
echo $page->getHref(); // /test_app/public/application/album/edit/id1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T04:33:48.253

你需要这样做

在控制器中

```
$pages = new \Zend\Navigation\Page\Mvc(array(
        'pages'=>
            array(
                'album' => array(
                    'label' => 'Album3',
                    'controller' => 'album',
                    'action' => 'edit',
                    'params' => array('id'=>2),
                    'route' => 'album/default',
                )
            )
));

$navigation = new \Zend\Navigation\Navigation();
$serviceLocator = $this->getServiceLocator()->get('Application');
$routeMatch  = $serviceLocator->getMvcEvent()->getRouteMatch();
$router      = $serviceLocator->getMvcEvent()->getRouter();
$pages->setRouteMatch($routeMatch);
$pages->setDefaultRouter($router);

$navigation->addPage($pages); 
```

在视图中

```
<?php echo $this->navigation($this->navigation)->menu() ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T15:14:03.693

Eremite的答案并没有真正错。我已经测试了这里给出的所有建议，实际上当默认路由有几个 child_routes 标记为默认时，菜单没有正确标记活动标志。因此需要将匹配的路由作为参数传递。但也许我做错了什么。

干杯

# java - 需要 Web 开发插件，但用于特定的 Eclipse 安装

> ID：12531426
> 
> 赞同：1
> 
> 时间：2012-09-21T13:20:27.860
> 
> 标签：java, html, plugins, myeclipse, eclipse-3.4

我必须使用 Eclipse Ganymede `3.4.2`。请不要让我升级到另一个版本。它不在我的手中。

为了将可视化编辑器用于`html`、`xml`文件和一般的 Web 开发，我应该安装什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:29:39.333

我不知道您是否正在寻找带有正版[MyEclipse Visual Web Designer的](http://www.myeclipseide.com/module-htmlpages-display-pid-12.html)[MyEclipse 7.0](http://www.myeclipseide.com/Article85.html) 另请查看[MyEclipse HTML Designer Tutorial](http://www.myeclipseide.com/documentation/quickstarts/webdesigner/)

# oop - 数据分类、时序、程序

> ID：12531431
> 
> 赞同：1
> 
> 时间：2012-09-21T13:20:51.320
> 
> 标签：oop, class, orm

我有一个风格/好的代码问题。这是那些“不那么重要，因为它正在工作”的事情之一，但我仍然想从社区中获得一些见解。我在 C# 中，但该方法可以适用于任何 OOP

所以我有一个类，它本质上是一个数据容器。我将类传递给数据库，而不是传递 10 个参数。数据库写入类将每个数据成员放入其各自的 SQL 参数中，并在我的数据库中执行存储过程。

我的问题是，当我将数据收集到课程中时，我将所有数据都附加到 Change 事件中。喜欢

```
private void chkIce_CheckedChanged(object sender, EventArgs e)
    {
        CheckBox chk = (CheckBox)sender;

        if (chk.CheckState == CheckState.Checked)
            outTruck.setWeather(2, true);
        else
            outTruck.setWeather(2, false);

    } 
```

和

```
 private void txtTrailer_TextChanged(object sender, EventArgs e)
    {
        TextBox txt = (TextBox)sender;
        newRecord.TrailerNumber = txt.Text.ToString();
    } 
```

这会根据用户的选择将我的班级的冰值设置为真/假。或设置文本。这很简单，但是有一点代码开销，因为每个控件都有自己的事件（发送者行上的强制转换也可能是矫枉过正）。另一种方法是在提交时收集所有数据。然后把它全部放到课堂上。还有一些叫做实体框架和 ORM 的东西，但我目前停留在 .NET 3.5 中（我们与时俱进），我读过这在你到达 4.0 之前并不适用。如果有标准，我还没有真正阅读过，它似乎比任何东西都更偏好。那么，堆栈overlowieans 的同胞......你的想法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:48:03.643

由于看起来您在一个带有回发的网页中，因此我认为在您实例化对象的地方使用提交按钮处理程序函数并手动将每个属性设置为其相应 UI 元素的值会更容易。在每个事件处理程序上进行数据设置（选择更改、焦点移出等）将需要重新加载整个页面。（然后，您将不得不在这些回帖中保留该对象 - 尽管可行，但这是一项乏味且容易出错的壮举。）

即使在桌面项目中，我也会在提交按钮的事件处理程序中收集所有 UI 元素中的所有值来构建我的对象。

如果该 UI 元素中的状态更改将影响对象本身以外的其他内容，则您可能希望在某些 UI 元素上实现事件处理程序。例如，一个复选框可以确定用户是否能够提交 - 因为选中它可能会添加一个成本更高的功能，其中他们的订单总价格可能超过他们当前的余额。这是您检查提交按钮是否应该保持启用或禁用的时候。

# grails - 在 Grails 中处理查询最安全、最易于维护的做法是什么？

> ID：12531433
> 
> 赞同：0
> 
> 时间：2012-09-21T13:20:51.413
> 
> 标签：grails, grails-orm, dry

我是 Grails 的新手。我注意到大多数教程都显示了在控制器中创建和存储的查询。随着时间的推移，这似乎真的会使控制器膨胀，尤其是随着查询数量和复杂性的增加。

在我的研究中，我读到控制器应该尽可能保持精简（与向/从模型/视图请求和提交数据有关，并且不鼓励繁重的查询。

您是如何为 Grails 应用程序创建、存储和调用查询的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:41:20.243

[这里](http://www.infoq.com/articles/grails-best-practices)有一篇关于 Grails 最佳实践的好文章。根据帖子：

> 不要让控制器接管另一个角色。控制器的作用是接受传入的请求，检查权限等，向域或服务请求结果，以所需的格式（如 HTML、JSON 或 XML）将结果返回给请求者。保持控制器尽可能薄。不要在控制器中执行业务逻辑、查询或更新。

所以如果你有更复杂的逻辑，我建议你构建服务：

> 服务是复杂业务逻辑或粗粒度代码的正确候选者。如果需要，可以轻松地将服务 API 公开为 RESTful/SOAP Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:42:09.493

这就是服务的用途。将所有域操作逻辑放在服务中，并将控制器限制为“中间人”的角色 - 绑定和验证请求参数，调用服务并呈现结果。

# iphone - NSOperation 上的属性不变

> ID：12531434
> 
> 赞同：0
> 
> 时间：2012-09-21T13:20:52.023
> 
> 标签：iphone, objective-c, ios, nsoperation, nsoperationqueue

我`NSOperation`在后台线程上运行，我想`runSpeed`在主线程上收到内存警告时更改它的一个属性，一个名为 的浮点数。但是，下次后台线程达到 runSpeed 时，它似乎与之前的值相同。

`NSOperation`当我在主线程上更改它时，如何确保它在线程中更改？

编辑：

最初没有发布代码，因为我认为我想错了。这是我的代码：

**应用委托**

```
-(void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    NSLog(@"memory warning");
    if (dataUpdateIsActive) {
        NSLog(@"data update is active");
        dataUpdate.runSpeed = 10;
        [NSTimer scheduledTimerWithTimeInterval:10
                                         target:self
                                       selector:@selector(resetRunSpeed)
                                       userInfo:nil
                                        repeats:NO];
    }
} 
```

然后在一个方法中：

```
 NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init];

    dataUpdate = [[JDataUpdate alloc] init];

    [dataUpdate setOldPSC:[oldContext persistentStoreCoordinator]];
    [dataUpdate setCurrentPSC:[newContext persistentStoreCoordinator]];
    [dataUpdate setRunSpeed:0.5];
    [dataUpdate setEntriesToCreate:250];
    [dataUpdate setSaveFrequency:10];

    dataUpdateIsActive = YES;
    [operationQueue addOperation:dataUpdate]; 
```

这两个`NSLogs`都会被触发。

**NSOperation**

```
- (void)main
{
    for (NSInteger index = 0; index < [self entriesToCreate]; ++index) {
        [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:[self runSpeed]]];
    }
} 
```

# javascript - 如果语句未在 json 数组上编译

> ID：12531440
> 
> 赞同：0
> 
> 时间：2012-09-21T13:21:23.037
> 
> 标签：javascript, json

我有一个看起来像这样的 Json 数组：

```
Test = [
     {
      "adj" : [
                {
                  "nodeTo" : "x",
                  "nodeFrom" : "y",
                  "data": 
                      {
                        "$type" : "line",
                        "$color" : "#A989BC",
                        "$value" : "number"
                      }
                 }
               ],

      "id" : "id1",
      "name" : "name1"
     },
     {
      "adj" : [ ..... ]   // I have many element in the Test array 
```

而且我需要通过测试中的所有元素。我已经这样做了：

```
list = [];
for (i = 0; i < Test.lenght; i++) {
    if (x == Test[i]["name"])
           list.push(x + "->" + Test[i]["adj"][0]["nodeTo"] + ":" + Test[i]["adj"][0]["data"]["$value"]);
 } 
```

但它不起作用。提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:23:21.787

可能只是一个（非常常见的）错字： `i < Test.length;`

# objective-c - 如何在基于页面的应用程序中使用轻击手势来实现其他功能，而不是用于滑动页面

> ID：12531445
> 
> 赞同：0
> 
> 时间：2012-09-21T13:21:39.153
> 
> 标签：objective-c, ios, xcode, ipad, uipageviewcontroller

我正在为我的一个应用程序使用基于页面的应用程序。在这种情况下，如果 v 点击一次它会滑动到下一页。

我的要求是我不希望这个轻击手势用于滑动页面，而是我希望这个轻击手势用于其他一些功能，比如一旦点击它就会放大或者如果我点击其他一些标签栏应该出现..

我知道我们可以通过代码在 viewdidload 方法中删除此点击手势。但我不想删除此手势，而是想将此点击手势用于其他功能，例如放大等。所以有人告诉我这可能吗？ ??如果有可能如何实现它???谁能通过代码给我打电话???如果它不可能那么还有什么其他选择????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:12:51.977

我认为你可以实现这样的事情：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
        if ([touch tapCount] == 2) {
            //your code here
        }
    //other code
    } 
```

# c++ - 将静态类与友元函数链接时出现奇怪的错误

> ID：12531446
> 
> 赞同：1
> 
> 时间：2012-09-21T13:21:53.427
> 
> 标签：c++, linker, static-libraries, friend

我的 C++ 代码有很多问题，但我不明白为什么。

我正在开发一个包含 myclass.h 和 myclass.cpp 的静态库 libmylib.a。

我遇到的问题是这样的：

```
// myclass.h
class myClass{
   public:
      myclass();
      myclass(a,b);

     // some methods.

   private:
    int a ;
    int b ;
}; 
```

在 myclass.cpp 中，我定义了构造函数方法等，一切正常：我可以在 main.cpp 代码中使用该库。

然后我添加了一个朋友功能：

```
// myclass.h
class myClass{
   public:
      myclass();
      myclass(a,b);
      friend void foo() ;

     // some methods.

   private:
    int a ;
    int b ;
}; 
```

我像这样在 myclass.cpp 中定义 foo 函数

```
// myclass.cpp
void foo(){
  cout << "In foo function " ;
} 
```

问题是，如果我尝试在 main.cpp 中使用 foo() ，我会收到一个编译错误，指出：

```
//main.cpp
#include "myclass.h" // foo() is declared here!

foo() ; 
```

> main.cpp:62:6：错误：“foo”未在此范围内声明

现在我真的不明白问题出在哪里。我注意到在添加朋友功能后，链接器似乎不再使用 mylib，但我不明白为什么。而且这很奇怪，因为如果我在 main.cpp myclass 中注释 foo() 并且它的方法可以毫无问题地使用。

我究竟做错了什么？我花了两个小时试图弄清楚，但真的无法理解！

**解决方案：按照答案中的建议：**

```
// myclass.h
void foo() ; // the function has to be declared outside the class

class myClass{
   public:
      myclass();
      myclass(a,b);
      friend void foo() ; // but here you have to specify that 
                          // is a friend of the class!
     // some methods.

   private:
    int a ;
    int b ;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:27:05.217

这不是链接器错误，而是编译器错误。编译器告诉你它不知道如何调用 function `foo`，因为它缺少它的定义或声明。

将函数声明为友元并不能替代正确的声明。当你说`foo`是朋友时，你不也介绍`foo`成一个范围。从某种意义上说，友谊声明是你班级的一个私人细节，从外面看是不可见的。

为了在 C++ 中使用函数，您需要先声明它。这通常通过与实现文件对应的头文件来完成，但您可以简单地这样做：

无效的富（）；

如果`foo`在与 相同的文件中定义`main`，您可以`foo`提前`main`解决问题（编译器可以在第一次使用之前查看函数定义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:26:15.383

使用前是否声明`foo`过：

```
#include "header_where_foo_is_declared.h"
int main()
{
   foo();
} 
```

或者

```
void foo();
int main()
{
   foo();
} 
```

？？？

# r - R 工作流程：如何处理手动清理数据

> ID：12531448
> 
> 赞同：13
> 
> 时间：2012-09-21T13:21:53.817
> 
> 标签：r

首先让我说，我刻意避免手动清理数据，而是使用正则表达式等。然而，偶尔也是不可避免的。

我通常使用类似[Load-Clean-Func-Do](https://stackoverflow.com/questions/2258092/what-best-practices-do-you-use-for-programming-in-r)工作流程，所以这显然适合清洁阶段。但是，如果需要更新，任何手动编辑都会破坏在手动清理之前运行这些内容的能力。

我至少可以想到三种方法来处理这个问题：

1.  尽可能早地将手动更改放在工作流程中，以便之后的所有内容都可以运行。
2.  为每一次更改写出正则表达式或赋值操作。
3.  在您关闭进行更改的电子表格后，使用为您生成 (2) 的工具。

2 的问题是它可能非常笨重。3 的问题是我不知道 R 存在任何此类工具。Stata 对此有非常好的实现。

所以问题是：

*   哪个导致最可复制的代码和最不令人沮丧的代码编写？
*   (3) 中的工具是否存在？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T20:58:17.327

我同意手清洁通常是一个相当糟糕的主意。然而，有时它是不可避免的。我建议两者之一，或两者兼而有之：

1.  保留一个带有“数据修复”的单独数据文件，其中包含三个变量“case_id”、“variable_name”、“value”。使用它来存储有关原始数据中哪些值需要替换的信息。您可以在有关清理的额外信息中添加一些附加变量（例如，为什么需要将变量“variable_name”的值替换为“case_id”的“值”等）。然后有一小段 R 代码，它加载您的原始数据，然后使用“修复”文件中的附加信息对其进行清理。

2.  也许您应该开始使用一些版本控制系统，例如 git 或 subversion（还有其他 progs）。对数据的每一次手工更改都可以作为单独的提交记录在系统中。到一天结束时，您将能够轻松地查看日志，了解您对数据进行了哪些更改以及何时更改。此外，您将能够生成将原始数据文件转换为已清理数据文件的补丁文件。对您的 R 代码文件进行版本控制也是有益的。

# eclipse - java.lang.ClassCastException：[Ljava.lang.Object；从 Double [] 名称绘制路径时出错？

> ID：12531450
> 
> 赞同：0
> 
> 时间：2012-09-21T13:22:08.187
> 
> 标签：eclipse, google-maps, object, android-emulator

我有这个错误 java.lang.ClassCastException: [Ljava.lang.Object; 从点列表中绘制路线是我的绘图代码

公共类 MyOverlay 扩展 Overlay{

```
List<Double> location;
List<Double> lt;
List<Double> ln;
MapView mapView ;

Double[]lat;
Double[]lon;

public MyOverlay(List<Double> location, List<Double> lt, List<Double> ln, MapView mapView) {
    // TODO Auto-generated constructor stub
    this.location = location;
    this.mapView = mapView;
    this.ln =ln;
    this.lt = lt;
}

@Override
public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow) {
    super.draw(canvas, mapView, false);

    lat = (Double[])lt.toArray();

    lon = (Double[]) ln.toArray();
    Path path1 = new Path();
    Point p1 = new Point();
    Path path2 = new Path();
    Point p2 = new Point();
    Point p3 = new Point();
    Point p4 = new Point();

    Projection projection = mapView.getProjection();
    int a = lat.length;
    int b = lon.length;
    int sum = a+b;

     Paint paint = new Paint();
     paint.setAntiAlias(true);
     paint.setColor(Color.RED);
     paint.setStyle(Paint.Style.STROKE);
     paint.setStrokeWidth(5);
     paint.setAlpha(90);

        Path p = new Path();
        Point from = new Point();
        Point to = new Point();
        for (int i = 1; i < sum; i++)
        {
            if (i == sum - 1)
            {
                break;
            }

        GeoPoint point1 =  new GeoPoint((int)(lat[i]*1E6) , (int)(lon[i]*1E6));
     (int)(Double.valueOf(lon[i+1])*1E6));
        projection.toPixels( point1, from);
        //projection.toPixels(point2, to);
        if(i ==1)
        {
        p.moveTo(from.x, from.y);
        }
        else
        {
             p.lineTo(to.x, to.y);
        }

        canvas.drawPath(p, paint);

} 
```

} 告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:25:41.587

`List.toArray()`返回一个对象数组：`Object[]`. 并且 an`Object[]`不能转换为 a `Double[]`。

你应该使用

```
lat = lt.toArray(new Double[lt.size()]); 
```

它返回一个`Double[]`. 请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T%5B%5D%29)。

# php - 在php中修剪一个字符串

> ID：12531456
> 
> 赞同：0
> 
> 时间：2012-09-21T13:22:27.223
> 
> 标签：php, string, if-statement, trim, equality

我对编程还是很陌生，所以请原谅。

我需要执行以下操作：

现在我有一个带有两个值的字符串输出：一个带有字符和数字，一个逗号，第二个带有一个布尔值。

```
9fjrie93, 1 
```

我想修剪字符串，使其仅作为布尔值输出。例如

```
1 
```

然后我需要对布尔值执行相等性检查。如果它是 1 做一件事，否则做另一件事。一个简单的 if 语句就足够了吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:24:11.020

怎么样：

```
$vals = explode(", ", "9fjrie93, 1");
if ($vals[1]) ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T13:29:26.687

如果它始终是最后一个字符，则无需爆炸。

```
<?php
$val = '9fjrie93, 1';
if( substr( $val, -1 ) === '1' ) {
    // do stuff.
}
else {
    // do stuff. Just other stuff.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:30:49.097

您还可以使用`list`来命名返回的结果：

```
$original_str = '9fjrie93, 1';
list($characters, $boolean) = explode(', ', $original_str);
echo $boolean; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:27:11.380

```
 $output = str_replace(',', '', strstr('9fjrie93, 1', ','));
 if( $output == '1' ) {
   ....do something
  } else {
  ...do something else
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T13:27:48.193

试试这个：

```
 $str = '9fjrie93, 1';
    $str = explode(', ', $str); //it returns array('9fjrie93', '1')
    $str = end($str); //takes the last element of the array 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T13:28:15.737

```
$mystring = '9fjrie93, 1';
$findme   = ',';
$pos = strpos($mystring, $findme);
$i= substr($mystring,$pos); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T13:28:31.737

```
$string = "9fjrie93, 1";
$val = substr($string, (strrpos($string, ',')+1)); 
```

不要使用爆炸，因为它更慢

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-21T13:30:03.337

如果 1 总是在行尾，你可以这样做：

```
$line = '9fjrie93, 1'
if ( $line[strlen([$line])-1] == '1' ) {
    // do stuff
} else {
    // do other stuff
} 
```

至少应该比`explode`,`str_replace`和`substr`解决方案表现更好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-21T13:31:23.357

```
$pos = strpos($source_str, ',');
substr($source_str, $x_pos + 1); 
```

希望这能解决它。

# php - 为什么 file_put_contents 显示对话框保存文件？

> ID：12531457
> 
> 赞同：-2
> 
> 时间：2012-09-21T13:22:34.423
> 
> 标签：php

使用以下代码我`.csv`在服务器上保存一个文件

```
foreach($list as $item)
{ 
    $csv .= join("\t", $item) . "\r\n"; 
}  

$csv = chr(255).chr(254).mb_convert_encoding($csv,"UTF-16LE","UTF-8");
header("Content-type: application/x-msdownload");
header("Content-disposition: csv; filename=CSV_".date("YmdHis").".csv; size=".strlen($csv));
$filename='CSV_'.$dateTimeNow.".csv";
file_put_contents($filename, $csv); // Create temp file 
```

已`.csv`成功保存，但客户端仍在接收下载对话。如何停止显示下载对话框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:27:06.137

如果 CSV 文件不打算发送到客户端系统，那么您不应该设置暗示您正在向客户端发送 .csv 文件的标题，即删除`header`导致客户端响应的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:37:07.370

```
 // header("Content-type: application/x-msdownload");
  // header("Content-disposition: csv; filename=CSV_".date("YmdHis").".csv; size=".strlen($csv)); 
```

# java - 如何以适合 JAXB 和 Java 的方式表示 XML 模式中的对象层次结构

> ID：12531458
> 
> 赞同：1
> 
> 时间：2012-09-21T13:22:46.350
> 
> 标签：java, jaxb, xsd, object-graph

我有一个代表分类的数据模型。分类是类别的层次结构，例如

```
Food
 +- Pasta
     +- Spaghetti 
```

我想将此表示为

```
<taxonomy>
  <category id="cat001" name="Food"/>

  <category id="cat002" name="Pasta">
    <parentCategory>
      <category ref="cat001"/>
    </parentCategory>
  </category>

  <category id="cat003" name="Spaghetti">
    <parentCategory>
      <category ref="cat002"/>
    </parentCategory>
  </category>
</taxonomy> 
```

在 XML 模式 (XSD) 中表示它的最佳方式是什么？

另外，我怎样才能确保在使用 JAXB 时，我可以获得类似的东西

```
class Category {
  String name;
  Category parentCategory;
} 
```

此外，如果我的分类不是一棵严格的树，而是一个图表，其中可能有多个父关系，这样 Spaghetti 就属于 Pasta 和 Noodles

```
<taxonomy>
  <category id="cat001" name="Food"/>

  <category id="cat002" name="Pasta">
    <parentCategories>
      <category ref="cat001"/>
    </parentCategories>
  </category>

  <category id="cat003" name="Noodles">
    <parentCategories>
      <category ref="cat001"/>
    </parentCategories>
  </category>

  <category id="cat004" name="Spaghetti">
    <parentCategories>
      <category ref="cat002"/> <!-- Pasta -->
      <category ref="cat003"/> <!-- Noodles -->
    </parentCategory>
  </category>
</taxonomy> 
```

然后使用 JAXB，我想生成类似的东西

```
class Category {
  String name;
  List<Category> parentCategories;
} 
```

请注意，Java 代码被简化仅用于说明目的。使用 JAXB 代码生成，我不介意拥有一个容器对象，例如具有类别属性的 parentCategory

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:47:13.637

**推荐 - 从 Java 对象开始**

对于您的用例，我建议从您想要的对象模型开始，然后应用[**JAXB 注释**](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/package-summary.html)将其映射到所需的 XML 表示。以下示例应该会有所帮助：

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted)

**XML 模式**

如果您随后需要一个 XML 模式，您可以从您的 JAXB 模型生成一个。

```
import java.io.IOException;
import javax.xml.bind.*;
import javax.xml.transform.Result;
import javax.xml.transform.stream.StreamResult;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(SpThread.class);

        jc.generateSchema(new SchemaOutputResolver() {

            @Override
            public Result createOutput(String namespaceUri, String suggestedFileName) throws IOException {
                StreamResult result = new StreamResult(System.out);
                result.setSystemId(suggestedFileName);
                return result;
            }

        });
    }

} 
```

**共享参考**

您可以使用`@XmlID`和`@XmlIDREF`在 XML 文档中创建基于键的引用。

*   [http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html](http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html)

# ios - UITableView 在应用程序运行时添加行

> ID：12531462
> 
> 赞同：0
> 
> 时间：2012-09-21T13:22:58.167
> 
> 标签：ios, objective-c, cocoa-touch

我创建了一个新的视图控制器并添加了“表格视图”。我将出口添加到控制器代码中，并在 viewDidLoad 方法中尝试添加新行。

我有带有文本的简单数据源 NSMutableArray（该表类似于“名人堂”）。

请问如何插入包含数组文本的行？

```
@property (strong, nonatomic) IBOutlet UITableView *fameTable;
@property (weak, nonatomic) NSMutableArray *dataSource;
...
[self.dataSource addObject:@"New Item"];
[self.dataSource addObject:@"New Item 2"];
[self.dataSource addObject:@"New Item 3"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:28:29.707

看看表格视图的 insertRowAtIndex 方法..它插入行而不重新加载整个表格视图..在发布此类问题之前请做一个小研究..这是一个非常常见的问题..仍然希望它对您有所帮助！干杯！！

她是一个关于表格视图基础的小教程：

[http://www.mobisoftinfotech.com/blog/iphone/introduction-to-table-view/](http://www.mobisoftinfotech.com/blog/iphone/introduction-to-table-view/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:30:42.687

```
after adding is done ..

    [fameTable reloadData];

dont forget to implement the datasource method

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

   return  [datasource count];

    } 
```

# entity-framework - 在实体框架5中添加关联

> ID：12531468
> 
> 赞同：1
> 
> 时间：2012-09-21T13:23:26.590
> 
> 标签：entity-framework, entity-framework-5

在旧产品中，我有以下两个表：

```
Create Table City (
    Id int identity not null,
    Gid uniqueidentifier not null,
    Name varchar(25) not null,
    constraint PK_City Primary Key(Id)
    )   
Create Table CityExtra(
    Gid uniqueidentifier not null,
    CityGid  uniqueidentifier not null,
    ExtraName varchar(25) not null,
    constraint PK_CityExtra Primary Key(Gid)
    ) 
```

在 EF 编辑器中，我想在这两个实体之间创建一对一的关系。创建关联不是问题，但是如何创建 City.Gid 和 CityExtra.CityGid 之间的关联映射（City.Gid 不是键）？或者这是不可能的？

# c# - 使用包含表格的动态按钮

> ID：12531473
> 
> 赞同：0
> 
> 时间：2012-09-21T13:23:45.003
> 
> 标签：c#, asp.net, dynamic

我有这段代码，它将在一行中列出所有内容。但是，我想将其格式化为： A. 按钮位于 texbox 和标签的底部 B. 每个标签和 texbox 组之间都有一个表格单元格。

这是它现在的结果：

![它现在在做什么](../Images/8fd87ea21fe42895405c901e531dffab.png)

这是我需要的：

![我需要的](../Images/c6602eec7211d87d94132edaf15ff4bd.png)

```
public partial class Testing : System.Web.UI.Page
{
 protected void Page_Load(object sender, EventArgs e)
{
// Add any controls that have been previously added dynamically
Response.Write("<tr><td class='table-text'>");
for (int i = 0; i < TotalNumberAdded; ++i)
{
    AddControls(i + 1);
}
Response.Write("</td></tr>");
// Attach the event handler to the button
//Button1.Click += new EventHandler(Button1_Click);
}
protected void Button1_Click(object sender, EventArgs e)
{    
// Increase the number added and add the new label and textbox
TotalNumberAdded++;
AddControls(TotalNumberAdded);

 }
 private void AddControls(int controlNumber)
 {
var newPanel = new Panel();
var natureLabel = new Label();
var dateLabel = new Label();
var fatalLabel = new Label();
var injurLabel = new Label();
var natureTextbox = new TextBox();
var dateTextbox = new TextBox();
var fatalTextbox = new TextBox();
var injurTextbox = new TextBox();

// textbox needs a unique id to maintain state information
natureTextbox.ID = "NatureTextBox_" + controlNumber;
dateTextbox.ID = "DateTextbox_" + controlNumber;
fatalTextbox.ID = "fatalTextbox_" + controlNumber;
injurTextbox.ID = "injurTextbox_" + controlNumber;

natureLabel.Text = "Nature Of Accident";
dateLabel.Text = "Date:";
atalLabel.Text = "Fatalities:";
 njurLabel.Text = "Injuries:";

// add the label and textbox to the panel, then add the panel to the form
newPanel.Controls.Add(natureLabel);
newPanel.Controls.Add(natureTextbox);
newPanel.Controls.Add(dateLabel);
newPanel.Controls.Add(dateTextbox);

newPanel.Controls.Add(fatalLabel);
newPanel.Controls.Add(fatalTextbox);
newPanel.Controls.Add(injurLabel);
newPanel.Controls.Add(injurTextbox);
form1.Controls.Add(newPanel);
}

 protected int TotalNumberAdded
{
get { return (int)(ViewState["TotalNumberAdded"] ?? 0); }
set { ViewState["TotalNumberAdded"] = value; }
 } 
} 
```

我在这里发现了一些与我所做的类似的其他代码，但我似乎无法将两者与面板结合起来：

```
protected void Button2_Click(object sender, EventArgs e)
{
TableRow row;
TableCell cell;
for (int i = 0; i < 3; ++i)
{
    TextBox txt = new TextBox();
    txt.Text = i.ToString();
    row = new TableRow();
    cell = new TableCell();
    cell.Controls.Add(txt);
    row.Controls.Add(cell);
    Table1.Controls.Add(row);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:39:31.750

我自己想出来的是正确的代码（添加了文字来做 HTML）：

```
 private void AddControls(int controlNumber)
    {

        var newPanel = new Panel();
        var natureLabel = new Label();
        var dateLabel = new Label();
        var fatalLabel = new Label();
        var injurLabel = new Label();
        var natureTextbox = new TextBox();
        var dateTextbox = new TextBox();
        var fatalTextbox = new TextBox();
        var injurTextbox = new TextBox();

        // textbox needs a unique id to maintain state information
        natureTextbox.ID = "NatureTextBox_" + controlNumber;
        dateTextbox.ID = "DateTextbox_" + controlNumber;
        fatalTextbox.ID = "fatalTextbox_" + controlNumber;
        injurTextbox.ID = "injurTextbox_" + controlNumber;

        natureLabel.Text = "Nature Of Accident: ";
        dateLabel.Text = "Date: ";
        fatalLabel.Text = "Fatalities: ";
        injurLabel.Text = "Injuries: ";

        // add the label and textbox to the panel, then add the panel to the form
        newPanel.Controls.Add(new LiteralControl("<table><tr>"));
        newPanel.Controls.Add(new LiteralControl("<br />"));
        newPanel.Controls.Add(new LiteralControl("<td class='title-text'  >"));
        newPanel.Controls.Add(natureLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'width='180px'>"));
        newPanel.Controls.Add(natureTextbox);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text' >"));
        newPanel.Controls.Add(dateLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(dateTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr>"));

        newPanel.Controls.Add(new LiteralControl("<tr><td class='title-text'>"));
        newPanel.Controls.Add(fatalLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(fatalTextbox);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(injurLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(injurTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr></table>"));
        form1.Controls.Add(newPanel);

    }

    protected int TotalNumberAdded
    {
        get { return (int)(ViewState["TotalNumberAdded"] ?? 0); }
        set { ViewState["TotalNumberAdded"] = value; }
    } 
```

# php - 正则表达式 PHP

> ID：12531476
> 
> 赞同：-2
> 
> 时间：2012-09-21T13:24:02.357
> 
> 标签：php, regex, preg-match, expression

我是 PHP 中 Regex 的新手，我想知道如何匹配彼此相等或相似的单词。

**例子：**

我有“设计师”这个词和“设计”这个词，如果我们尝试将设计师与设计匹配将返回 false，但如果我们尝试将设计与设计师匹配，它将返回匹配。我需要使用一个 preg_match 语句来匹配这两种情况。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:46:03.897

我相信您正在寻找词干： [http ://en.wikipedia.org/wiki/Stemming](http://en.wikipedia.org/wiki/Stemming)

如果您只想匹配这两个词，请按照 nickb 的建议进行操作并保持简单。如果你想在很多词上复制这种匹配，那么你可以使用这个 PorterStemmer 类：[http ://tartarus.org/~martin/PorterStemmer/php.txt](http://tartarus.org/~martin/PorterStemmer/php.txt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:26:23.143

我认为您正在寻找的是可选匹配项：

```
/design(?:er)?/ 
```

括号将“er”分组，“？：”使其不被捕获，而“？” 以下使该组可选。

更一般地说，如果您想捕获一个单词或该单词的任何更长版本：

```
/design\w*/ 
```

匹配“设计”和零个或多个（“*”）字字符（“\w”）。

# iphone - dateByAddingTimeInterval 在 IOS 应用程序开发中没有给出预期的结果

> ID：12531478
> 
> 赞同：1
> 
> 时间：2012-09-21T13:24:05.860
> 
> 标签：iphone, objective-c, ios, xcode, cordova

我有以下目标 C 代码：

```
 NSString *dateStr = @"2012-09-21 05:00:00";

// Convert string to date object
NSDateFormatter *formatter2 = [[NSDateFormatter alloc] init];
[formatter2 setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
NSDate *dateNew = [formatter2 dateFromString:dateStr];  
//NSLog(@"date new %@" , [dateNew description]);

NSDate *dateConverted = [dateNew dateByAddingTimeInterval:interval];
//NSLog(@"date converted=%@",dateConverted);

NSString *dateConvertedStr = [formatter2 stringFromDate:dateConverted];
NSLog(@"date conv str=%@",dateConvertedStr); 
```

在这里，我尝试首先将日期字符串转换为日期对象（dateNew）。然后将一个间隔添加到它以获取新的 dateConverted。最后，此日期对象再次转换为字符串并打印。但我没有得到想要的结果。例如：对于给定的日期字符串，如果间隔是 45000.00，那么它基本上是 12.5 小时。所以，我的 dateConvertedStr 应该给出 '2012-09-21 17:30:00'。但它没有给出预期的结果。任何人都可以建议。我是不是错过了什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:12:41.150

这里的问题是您提供的格式字符串。在您的示例中（假设该间隔为`45000.00f`），它返回`date conv str=2012-09-21 5:30:00`是因为您使用基于 12h 的格式。

试试这个（注意大写`H`）：

```
[formatter2 setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

现在你`dateConvertedStr`的`2012-09-21 17:30:00`正如预期的那样。

# android - 如何一键拍摄两张不同的照片

> ID：12531484
> 
> 赞同：-4
> 
> 时间：2012-09-21T13:24:15.140
> 
> 标签：android, android-camera, image

![在此处输入图像描述](../Images/26c5e01ff86fa62a8efb7fa575fe537a.png)

我想一键拍两张不同的照片。我不想一键并排拍摄两张相同的图像。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:27:46.690

对于简单的答案，当您只有一个相机喷枪时，这是不可能的。但是，如果您太渴望这样做，那么您可以创建两个线程并执行此操作，但要小心，您的相机很可能会损坏，电池会消耗更多，并且可能是您的设备被挂起。

# twitter-bootstrap - 淘汰赛验证成功课程？

> ID：12531489
> 
> 赞同：3
> 
> 时间：2012-09-21T13:24:26.373
> 
> 标签：twitter-bootstrap, knockout-2.0, knockout-validation

我正在使用[Knockout Validation](https://github.com/ericmbarnard/Knockout-Validation)并让一切按我的意愿工作。我将它与 Twitter Bootstrap 一起使用，并在遇到错误时设置正确的类。

使用 jQuery Validation，我还可以在经过验证的元素通过验证时设置类。例如，当用户输入有效信息时，您可以将输入框变为绿色。

有没有办法通过淘汰赛验证来做到这一点？有人有例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T14:52:24.143

目前，Knockout-Validation 不支持将 "validationSuccess" 类添加到元素中（如果已验证值`isValid`）。（但我们确实接受拉取请求）。

但是，如果您只是想在一个元素上表示成功，您可以执行以下操作：

```
<input type="text" data-bind="value: lastName, css: { success: lastName.isModified() && lastName.isValid() }"/> 
```

如果您希望这是默认行为，只需查看覆盖 `ko.bindingHandlers['validationMessage']`and `ko.bindingHandlers['validationElement']`功能。

我有一个在这里工作的例子（在 Chrome 中使用 JSBin）：http://jsbin.com/miqanineva/2/edit?html,css,js, [output](http://jsbin.com/miqanineva/2/edit?html,css,js,output)

# hyperlink - JavaFX - 带有指向另一个页面的超链接的按钮

> ID：12531490
> 
> 赞同：1
> 
> 时间：2012-09-21T13:24:30.073
> 
> 标签：hyperlink, javafx-2, mouseclick-event, hbox

我想在 JavaFX-2 中创建一个基于“主”页面和“附加”页面的两个页面的应用程序。在主页中，我添加了一个 Hbox 功能，其中包括一个名为“extras”的按钮。如何定义第二个页面以及如何设置按钮的超链接（onMouseClicked 事件？），以引用附加页面？我找不到与此问题相关的鼠标事件的任何示例。感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:56:09.623

看看[JFX Flow](http://www.zenjava.com/jfx-flow/)框架 - 它似乎具有您所要求的功能，具有前后导航和场景之间的转换。

我创建了一个[简单的向导实现](https://gist.github.com/1887631)来响应[论坛帖子](https://forums.oracle.com/forums/thread.jspa?messageID=10370734)，它有助于执行一些场景到场景风格的导航。我还创建了一个小[的动画滑动窗格](https://gist.github.com/1437374)的进出屏幕示例，这也是我之前创建的。这两个概念的代码没有联系在一起，但是代码很简单，所以联系起来并不难。

FXExperience 项目中有大量的[Canned 动画资源，以及 JavaFX 中的大量内置](http://fxexperience.com/2012/03/canned-animations/)[转换](http://docs.oracle.com/javafx/2/animations/basics.htm#CJAJJAGI)。

# cocoa - 如何使基于 trackingAreas 的 NSTableRowView drawBackgroundInRect 在滚动时更新得足够快？

> ID：12531497
> 
> 赞同：3
> 
> 时间：2012-09-21T13:24:46.793
> 
> 标签：cocoa, nstableview

我正在使用带有自定义 NSTableRowView 的基于视图的 NSTableView。我想通过 drawBackgroundInRect 使用自定义行背景绘图，基于使用 trackingAreas 的鼠标位置。目标是为鼠标当前悬停的未选择行绘制自定义背景。

这与WWDC 2011 会话*View Based NSTableView Basic to Advanced中的*[HoverTableView 示例](http://developer.apple.com/library/mac/#samplecode/HoverTableDemo/Introduction/Intro.html)几乎相同。您可以在右侧帐户类型表格视图的*邮件、联系人和日历*系统首选项窗格中看到该行为。

 **与示例不同，我的表格视图中有数千行。除非我快速滚动表格视图（例如，通过触控板用两指轻弹），否则一切都与示例中的一样。在这种情况下，似乎调用 updateTrackingAreas 的速度不够快。在鼠标下方滚动的行会突出显示，但不会通知鼠标离开其跟踪区域并因此保持突出显示。结果是显示鼠标悬停突出显示的多行，并且由于重用队列，这些行将滚动到表格视图的一端并重新出现在另一端（当然具有不同的数据）仍然突出显示，就好像它们被悬停一样. 慢慢滚动可以解决问题；但考虑到我希望滚动成千上万行，缓慢滚动并不是预期的用户行为。

我尝试了 NSTrackingAreaOptions 的各种组合都无济于事，现在我很难过。任何有关解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:08:46.970

我认为这个问题的答案是“你不能”，即`updateTrackingAreas`for`NSTableRowView`在快速滚动`NSTableView`中，在运行循环上的发生速度不够快，无法依赖它来确定指针是否在行视图内。再次，请参阅[HoverTableView 示例代码](http://developer.apple.com/library/mac/#samplecode/HoverTableDemo/Introduction/Intro.html)以了解在何处`updateTrackingAreas`使用。

我确实认为我有一个合适的解决方案。我注意到 Mac 版 Twitter ( [RIP](http://techcrunch.com/2012/09/06/reportedly-development-to-cease-for-twitters-mac-client/) ) 的鼠标悬停视图随着鼠标移动而出现，但在滚动时消失，这与我希望实现的鼠标悬停高亮非常相似。

为了执行此操作，我基本上让我的自定义`NSTableRowView`有一个委托（我的自定义`NSTableViewController`），它会询问它是否应该在悬停时突出显示。`NSScrollView`我为我使用了一个习惯`NSTableView`并打电话给

```
 [self.contentView setPostsBoundsChangedNotifications:YES]; 
```

并使其`awakeFromNib`注册`self`为该通知的观察员。在收到该通知时，这意味着我的表格视图正在滚动，我的自定义`NSScrollView`将一条消息转发到我的`NSTableViewController`.

当我`NSTableViewController`收到表格视图正在滚动的消息时，它会在鼠标悬停时禁用高亮显示，如果之前的通知中还没有运行有效的计时器，则在滚动停止后触发一个短计时器以重新启用鼠标悬停时的高亮显示. 作为额外的预防措施，在鼠标悬停时启用和禁用突出显示之间的状态转换时，我`NSTableViewController`使用`enumerateAvailableRowViewsUsingBlock`清除`mouseInside`每个行视图。

不确定这是否一定是最好的方法，但它达到了我想要的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T09:07:27.217

此处描述了此问题的解决方案：[mouseExited is not called when mouse leave trackingArea while scrolling](https://stackoverflow.com/questions/8979639/mouseexited-isnt-called-when-mouse-leaves-trackingarea-while-scrolling)

我的 updateTrackingAreas 方法现在看起来像：

```
- (void)updateTrackingAreas {
    if (trackingArea)
        [self removeTrackingArea:trackingArea];

    [trackingArea release];

    trackingArea = [[NSTrackingArea alloc] initWithRect:NSZeroRect
                                                options:NSTrackingInVisibleRect |
                                                        NSTrackingActiveAlways |
                                                        NSTrackingMouseEnteredAndExited
                                                  owner:self
                                               userInfo:nil];

    [self addTrackingArea:trackingArea];

    NSPoint mouseLocation = [[self window] mouseLocationOutsideOfEventStream];
    mouseLocation = [self convertPoint: mouseLocation fromView: nil];

    if (NSPointInRect(mouseLocation, [self bounds]))
        [self mouseEntered:nil];
    else
        [self mouseExited:nil];

    [super updateTrackingAreas];
} 
```**

# osx-lion - 在 Mac OS X 10.7.4 上安装 Octave 失败（使用自制软件）

> ID：12531500
> 
> 赞同：7
> 
> 时间：2012-09-21T13:25:04.737
> 
> 标签：osx-lion, octave, homebrew

我正在尝试通过自制软件在我的 macbook pro 上设置八度。我的自制软件已更新，我的 XCode 及其命令行工具也是如此。

这是我得到的错误：

```
Undefined symbols for architecture x86_64:
  "_append_history", referenced from:
      _octave_append_history in liboctave_la-oct-rl-hist.o
     (maybe you meant: _octave_append_history)
  "_history_list", referenced from:
      _octave_history_list in liboctave_la-oct-rl-hist.o
     (maybe you meant: _octave_history_list)
  "_read_history_range", referenced from:
      _octave_read_history_range in liboctave_la-oct-rl-hist.o
     (maybe you meant: _octave_read_history_range)
  "_rl_basic_quote_characters", referenced from:
      _octave_rl_set_basic_quote_characters in liboctave_la-oct-rl-edit.o
  "_rl_char_is_quoted_p", referenced from:
      _octave_rl_set_char_is_quoted_function in liboctave_la-oct-rl-edit.o
  "_rl_clear_screen", referenced from:
      _octave_rl_clear_screen in liboctave_la-oct-rl-edit.o
     (maybe you meant: _octave_rl_clear_screen)
  "_rl_filename_dequoting_function", referenced from:
      _octave_rl_set_dequoting_function in liboctave_la-oct-rl-edit.o
  "_rl_filename_quote_characters", referenced from:
      _octave_rl_set_filename_quote_characters in liboctave_la-oct-rl-edit.o
  "_rl_filename_quoting_desired", referenced from:
      _octave_rl_filename_quoting_desired in liboctave_la-oct-rl-edit.o
     (maybe you meant: _octave_rl_filename_quoting_desired)
  "_rl_filename_quoting_function", referenced from:
      _octave_rl_set_quoting_function in liboctave_la-oct-rl-edit.o
  "_rl_free_undo_list", referenced from:
      _octave_rl_clear_undo_list in liboctave_la-oct-rl-edit.o
  "_rl_history_search_backward", referenced from:
      _octave_rl_history_search_backward in liboctave_la-oct-rl-edit.o
     (maybe you meant: _octave_rl_history_search_backward)
  "_rl_history_search_forward", referenced from:
      _octave_rl_history_search_forward in liboctave_la-oct-rl-edit.o
     (maybe you meant: _octave_rl_history_search_forward)
  "_rl_re_read_init_file", referenced from:
      _octave_rl_set_name in liboctave_la-oct-rl-edit.o
      _octave_rl_re_read_init_file in liboctave_la-oct-rl-edit.o
     (maybe you meant: _octave_rl_re_read_init_file)
  "_rl_resize_terminal", referenced from:
      _octave_rl_resize_terminal in liboctave_la-oct-rl-edit.o
     (maybe you meant: _octave_rl_resize_terminal)
  "_rl_undo_list", referenced from:
      _octave_rl_clear_undo_list in liboctave_la-oct-rl-edit.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[3]: *** [liboctave.la] Error 1
make[2]: *** [all] Error 2
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

我的构建环境：

```
HOMEBREW_VERSION: 0.9.3
HEAD: bb9952a88dab92850145c2ebca797429f43e1839
CPU: quad-core 64-bit sandybridge
OS X: 10.7.4-x86_64
Xcode: 4.5
CLT: 1.0.0.9000000000.1.1249367152
X11: 2.6.4 => /usr/X11
CC: cc
CXX: c++
LD: cc
CFLAGS: -D_REENTRANT
CXXFLAGS: -D_REENTRANT
MAKEFLAGS: -j4
CMAKE_PREFIX_PATH: /usr/local/opt/texinfo:/usr/local/opt/readline:/usr/local
CMAKE_INCLUDE_PATH: /usr/X11/include/freetype2:/usr/include/libxml2:/usr/X11/include
CMAKE_LIBRARY_PATH: /usr/X11/lib
PKG_CONFIG_PATH: /usr/local/lib/pkgconfig:/usr/X11/lib/pkgconfig:/usr/X11/share/pkgconfig
ACLOCAL_PATH: /usr/local/share/aclocal
PATH: /usr/local/Library/ENV/4.3:/usr/local/opt/texinfo/bin:/usr/local/bin:/usr/X11/bin:/usr/bin:/bin:/usr/sbin:/sbin 
```

非常感谢您可以给我的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:54:47.313

我通过从高性能计算网站安装 GCC 编译器设法解决了这个问题：

[http://hpc.sourceforge.net/](http://hpc.sourceforge.net/)

# jboss - JMX 监控软件

> ID：12531509
> 
> 赞同：0
> 
> 时间：2012-09-21T13:25:42.163
> 
> 标签：jboss, monitoring, jmx

我正在尝试为测试目的编写的简单的 hello world 应用程序找到一个好的监控软件。

到目前为止，我已经尝试过 SCOM 12 和 OP5 ......我不喜欢它们，因为我想要更直接且易于配置的东西？

欢迎所有建议

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T12:24:05.380

您可能会看一下**Jolokia**，它是一种用于远程访问 JMX MBean 的监控解决方案。它附带一个代理，该代理使用基于 HTTP 的 JSON 以 REST 风格的方式进行通信。
看看这个[Jolokia 教程](http://www.mastertheboss.com/jboss-monitoring/monitor-jboss-as-with-jolokia)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:31:54.987

看看这些：

*   [视觉虚拟机](http://visualvm.java.net/)
*   [应用动力学](http://info.appdynamics.com/FreeJavaPerformanceDownload.html?c1=GAW_SE_NW&source=USA_app&kw=_PLUS_java_applications_monitoring&cr5=14880621715&cr4=1t3)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T13:44:35.770

[Nagios](http://www.nagios.org/)提供[JMX 监控](http://www.nagios.com/solutions/jmx-monitoring)。我认为 JMX 方面是商业的，建立在开源框架之上。

另请参阅与 JMX/Nagios 相关的[ServerFault 问题。](https://serverfault.com/questions/153252/recommended-jmx-plugin-for-nagios)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T13:50:09.197

如果您只想查看 JMX 输出，请使用`jconsole`，它是 JDK 的一部分（JDK 7 将要求您安装插件，但这一切都可以在应用程序中实现）。

如果您想要一个支持 JMX 的真正监控应用程序，我建议您使用[`Zabbix`](http://www.zabbix.com/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-18T14:09:08.703

试试[VisualVM](http://visualvm.java.net/)，它很容易使用，并且像 jconsole 一样提供漂亮的图表视图。对于监视器 MBean，您必须安装一个插件，这更好，因为您可以拥有一个 int 类型属性的图表视图，该属性在可配置的轮询周期内刷新。意味着您不需要一直点击“刷新”！

# c# - WM_MOUSEWHEEL 消息不会传播到父级

> ID：12531510
> 
> 赞同：1
> 
> 时间：2012-09-21T13:25:44.470
> 
> 标签：c#, winforms

我有一个 ScrollBars 设置为 None 的 RichTextBox。根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645617%28v=vs.85%29.aspx)

> DefWindowProc 函数将消息传播到窗口的父级。不应该有消息的内部转发，因为 DefWindowProc 将它向上传播到父链，直到它找到一个处理它的窗口。

我将其解释为，我不需要连接到消息泵 ( [IMessageFilter](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.aspx) ) 并手动将 WM_MOUSEWHEEL 事件转发到包含富文本框的父窗体。当我在 RichTextBox 内并执行鼠标滚动时，表单不会滚动。为什么不？如何让表单滚动？

请记住，RichTextBox 的滚动条设置为 none，并为 Form 启用。那么为什么表单没有得到滚动事件呢？

```
public partial class Form4 : Form
{
    public Form4()
    {
        InitializeComponent();
        this.AutoScroll = true;
        richTextBox1.ScrollBars = RichTextBoxScrollBars.None;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T16:35:38.727

对于我的派生文本框，我不想像上面那样忽略鼠标滚轮，而是想将它传递给我的父控件……在我看来，这是文本框在任何情况下都应该做的。这是我在派生的 TextBox 的 WndProc 中放入的内容：

```
switch (m.Msg)
{
    case 0x020A: // WM_MOUSEWHEEL
    case 0x020E: // WM_MOUSEHWHEEL
        if (this.ScrollBars == ScrollBars.None && this.Parent != null)
            m.HWnd = this.Parent.Handle; // forward this to your parent
        base.WndProc(ref m);
        break;

    default:
        base.WndProc(ref m);
        break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:33:57.043

表单不会滚动，因为 RichTextBox 自己处理 WM_MOUSEWHEEL 并且不会调用`DefWindowProc`将其转发给其父级。显然，禁用滚动条时这不会改变。

因此，您需要实现`IMessageFilter`或创建 RichTextEdit 的子类，它将转发 WM_MOUSEWHEEL，[如下所示](http://cboard.cprogramming.com/csharp-programming/115629-disable-richtextbox-mouse-wheel.html)：

```
public class NoScrollRichTextBox : RichTextBox
{
   const int WM_MOUSEWHEEL = 0x020A;

   protected override void WndProc(ref Message m)
   {
      // This will completely ignore the mouse wheel, which will disable zooming as well
      if (m.Msg != WM_MOUSEWHEEL)
         base.WndProc(ref m);
   }
} 
```

# css - Webkit 浏览器与属性选择器和伪元素不兼容？

> ID：12531516
> 
> 赞同：2
> 
> 时间：2012-09-21T13:26:02.450
> 
> 标签：css, webkit, css-selectors, pseudo-element

> **可能重复：**
> [结合 CSS 属性和伪元素选择器？](https://stackoverflow.com/questions/8951822/combine-css-attribute-and-pseudo-element-selectors)

[http://jsfiddle.net/BC3Td/](http://jsfiddle.net/BC3Td/)

我已经在 firefox 和 opera 中对此进行了测试，没有任何问题，但是 chrome、safari 和 mobile safari 都忽略了第二个伪元素 css 并默认为第一个，谁能解释这里发生了什么？

以及如何在不添加类/ID的情况下实现这一点？

**回答：**

这是一个 webkit 的 bug，修复比较简单，如果你添加下面的 css（或任何纯涉及（非伪）元素的 css 规则，它就会自行修复。

```
#test-div a[href*="tel"],
#test-div a[href*="mail"] { display:block; } 
```

多么奇怪？

更新（工作）小提琴在这里：http: [//jsfiddle.net/BC3Td/3/](http://jsfiddle.net/BC3Td/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:30:56.897

听起来像是 Webkit 选择中的错误。但是，如果也直接选择了元素，则伪选择器确实有效（此处使用了有效的 no op）：

[http://jsfiddle.net/BC3Td/2/](http://jsfiddle.net/BC3Td/2/)

# hibernate - Left Join 抛出 Hibernate 注解

> ID：12531521
> 
> 赞同：0
> 
> 时间：2012-09-21T13:26:29.117
> 
> 标签：hibernate, annotations, left-join

我有这样的注释：

```
@ManyToOne(optional = true, fetch = FetchType.LAZY)
@JoinColumn(name = "ACK_BY", referencedColumnName = "USER_ID", nullable = true)
public User ackBy; 
```

当我想按用户名过滤主表时，它会生成如下 sql 查询：

```
from ALARMS alarm0_ cross join USER user1_ where alarm0_.ACK_BY=user1_.USER_ID and (user1_.key not like 'value' or user1_.key is null) 
```

怎么说**休眠**我想像这样使用左连接：

```
ALARMS alarm0_ left join USER user1_ on alarm0_.ACK_BY=user1_.USER_ID (user1_.key not like 'value' or user1_.key is null) 
```

**UPD：**我不能使用 HQL 来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:55:30.960

所以看起来它不可能抛出注释。对于这种情况，您应该使用 HQL。

# sql - 使用 Dynamic Pivot/Unpivot 正确显示

> ID：12531522
> 
> 赞同：2
> 
> 时间：2012-09-21T13:26:54.333
> 
> 标签：sql, sql-server, sql-server-2005, pivot, unpivot

我相信我将不得不同时使用 Pivot 和 UnPivot 来获取我想要的数据。

我当前的数据如下所示：

```
var_date    var_attribute   var_out_of_ad   var_per_ad
9/4/2012    Aux1            0               0
9/5/2012    Aux1            0               0
9/4/2012    Aux2            1680            0.733333333
9/5/2012    Aux2            1680            0.733333333
9/4/2012    Aux3            1500            0.791666667
9/5/2012    Aux3            1500            0.791666667
9/4/2012    Aux4            0               0
9/5/2012    Aux4            0               0
9/4/2012    Aux5            0               0
9/5/2012    Aux5            0               0
9/4/2012    Aux6            26640           0.766929134
9/5/2012    Aux6            26640           0.766929134
9/4/2012    Aux7            28800           0
9/5/2012    Aux7            28800           0
9/4/2012    Aux8            3600            0
9/5/2012    Aux8            3600            0 
```

我希望能够通过辅助代码（将通过动态）分解列`var_out_of_ad`，`var_per_ad`所以我希望我的数据看起来像这样：

```
var_date  Aux1_per   Aux1_out   Aux2_per   Aux2_out ...
9/4/2012  0          0           .733      1680
9/5/2012  0          0           .733      1680 
```

我已将测试数据放入 sql fiddle：[http](http://sqlfiddle.com/#!3/7f06d/1) ://sqlfiddle.com/#!3/7f06d/1以及我使用动态枢轴所做的所有工作。

有人可以指导我下一步该怎么做吗？我搞不清楚了。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:44:41.050

由于您正在尝试`PIVOT`两列数据，因此您需要`UNPIVOT`先应用一个`PIVOT`：

```
DECLARE @colsPivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsPivot = Stuff((Select distinct ',' 
                           + QuoteName([var_attribute] + x.type) 
                    from mytable
                    cross apply
                    (
                      select '_per' type
                      union all
                      select '_out' type
                    ) x
            FOR XML Path(''), Type
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'select var_date, ' + @colsPivot + '
              from
              (
                select var_date, 
                  val,
                  case col when ''var_out_of_ad'' 
                              then VAR_ATTRIBUTE + ''_out''  
                          when ''var_per_ad'' 
                              then VAR_ATTRIBUTE + ''_per'' end var_attribute 
                from
                (
                  select var_date, var_attribute,
                      cast(var_out_of_ad as float) var_out_of_ad,
                      var_per_ad
                  from mytable
                ) x
                unpivot
                (
                  val
                  for col in (var_out_of_ad, var_per_ad)
                ) u
              ) x1
              pivot
              (
                max(val)
                for var_attribute in ('+@colsPivot +')
              )p'

exec(@query) 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7f06d/14)

# c# - 在 Windows8 Metro App 中的 Bing/Google 地图中绘制线路/路线

> ID：12531536
> 
> 赞同：0
> 
> 时间：2012-09-21T13:27:44.623
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我有一个包含纬度和经度序列的列表，例如（示例）

*   [28.608329,77.198782]
*   [27.608329,78.198782]
*   [29.608329,79.198782]
*   [30.608329,87.198782]
*   [31.608329,97.198782]

我已经得到了一个代码，它使用 2 个 lant/long 组合进行绘制。

`I have to draw line/route (like in Google Maps/Navigation) using all this sequence of sequence of latitude and longitude`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:39:17.837

你有 X 点

*   **解决方案1：**绘制（X-1）条路线
*   **解决方案 2：**用 X 点绘制一条折线（以[MapPolyline 为例](http://msdn.microsoft.com/en-us/library/hh846499.aspx)（用于地铁风格应用的 Bing 地图））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:42:25.900

为 Bing 地图控件使用形状绘图工具箱：[http ://bingmapsv7modules.codeplex.com/wikipage?title=Shape%20Toolbox%20Module](http://bingmapsv7modules.codeplex.com/wikipage?title=Shape%20Toolbox%20Module)

# google-api - 用于 DotNet 的 Google 联系人 API 上的 Oauth2 - 令牌无效 - AuthSub 令牌的范围错误

> ID：12531551
> 
> 赞同：0
> 
> 时间：2012-09-21T13:28:30.023
> 
> 标签：google-api, oauth-2.0

我创建了一个类，它授权 vb.net 应用程序使用 Oauth2 访问 Google Fusion Tables。如果需要，它会以某种形式打开 Web 浏览器，加密并存储刷新令牌，并且运行良好。我可以访问融合表数据。

但是，我也想访问联系人。我已请求用户访问联系人。

我可以检索适用于融合表的 AccessToken，并尝试了不同的技术来处理联系人，但没有运气。我不断收到 401 未经授权的错误。但是如果我使用客户端登录，我**可以**让联系人工作。

任何帮助将非常感激。

我最近的尝试：

```
Dim rs As New RequestSettings("App Name", p.AccessToken) 'String retrieved from class
Dim cr As New ContactsRequest(rs)
Dim q As New FeedQuery
q.Uri = New Uri("http://www.google.com/m8/feeds/contacts/<EMAIL>/full/<IDCODE>")
Dim c As New Contact
c = cr.Retrieve(Of Contact)(q) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:12:33.610

您必须请求访问 Contacts API OAuth 范围，即`https://www.google.com/m8/feeds/`.

.NET 客户端库包含一个使用联系人 API 的 OAuth 2.0 示例：

[https://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs](https://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:46:38.873

感谢 Claudio Cherubino 的建议。我实际上已经在使用那个范围了。谢天谢地，我现在终于找到了答案。

我真的错过了一个字母：

```
q.Uri = New Uri("http://www.google.com/m8/feeds/contacts/<EMAIL>/full/<IDCODE>") 
```

...是错误的，因为我要求的范围确实是：

```
https://www.google.com/m8/feeds/ 
```

所以 Uri 需要与 httpS 匹配。我添加了's'并且它有效。正确代码如下：

```
q.Uri = New Uri("https://www.google.com/m8/feeds/contacts/<EMAIL>/full/<IDCODE>") 
```

非常感谢这篇文章的回答： [http ://www.geoffmcqueen.com/2010/03/14/token-invalid-authsub-token-has-wrong-scope-oauth-google-problem](http://www.geoffmcqueen.com/2010/03/14/token-invalid-authsub-token-has-wrong-scope-oauth-google-problem)

# c++ - Qt - TableView 标题数据变得不可见？

> ID：12531556
> 
> 赞同：2
> 
> 时间：2012-09-21T13:28:52.230
> 
> 标签：c++, qt

我的 TableView 早些时候显示了标题数据，我继续在完全不同的部分上处理我的软件，不知何故，在测试时我意识到标题数据完全消失了，尽管我可以看到列表。请注意，在 Qt 编辑器中启用了“SetHeaderVisible”。这是我用来设置标题的代码：

```
itemModel = new QStandardItemModel();

    //setting Column count and labeling them
    itemModel->setColumnCount(5);
    itemModel->setHeaderData(0, Qt::Horizontal, "Item Name");
    itemModel->setHeaderData(1, Qt::Horizontal, "Price");
    itemModel->setHeaderData(2, Qt::Horizontal, "Date Released");
    itemModel->setHeaderData(3, Qt::Horizontal, "Bugs");
    itemModel->setHeaderData(4, Qt::Horizontal, "Suggestions");
    //set the itemModel to TableView
    ui->tableView->setModel(itemModel); 
```

# iphone - ios 6 中的 dataWithContentsOfURL 错误 256

> ID：12531558
> 
> 赞同：1
> 
> 时间：2012-09-21T13:29:07.127
> 
> 标签：iphone, objective-c, xcode, ios6, xcode4.5

我用过

`[NSData dataWithContentsOfURL:url options:NSDataReadingUncached error:&error]`

在我的 iOS 5 应用程序代码中（使用 xcode 4.3）

现在我想从同一个 URL 获取数据，但对于 ios 6 应用程序（使用 xcode 4.5），它给了我 256 错误（读取错误（原因未知））

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:32:10.053

正如我在评论中所说，现在看来这就是答案。

URL 必须是具有正确 http:// 标识符的正确格式的 URL。

# asp.net - 自定义 HttpModule 在 vs 2012 中不起作用

> ID：12531559
> 
> 赞同：1
> 
> 时间：2012-09-21T13:29:09.160
> 
> 标签：asp.net, httpmodule

我通过实现 IHttpModule 接口编写了一个自定义 HTTPModule。然后我在 web.config 文件中注册了它

```
<configuration>
  <system.web>
    <httpModules >
      <add name="AuthHttpModule" type="AuthHttpModule" />
    </httpModules>
  </system.web>
</configuration> 
```

但是当我尝试访问任何页面时它会引发错误

> 已检测到不适用于集成托管管道模式的 ASP.NET 设置。

注意：我使用的是 VS2012 和 C#。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T13:37:31.710

如果您使用**集成模式，请在****system.webServer**而不是**system.web**中配置处理程序和模块。

```
<configuration>
    <system.webServer>
      <handlers>

      </handlers>
      <modules>

      </modules>
    </system.webServer>
</configuration> 
```

或者

如果您想使用现有设置，您可以使用**“经典模式”**。

# wcf - WCF 服务中添加的新功能未反映添加 Web 引用

> ID：12531564
> 
> 赞同：0
> 
> 时间：2012-09-21T13:29:19.957
> 
> 标签：wcf, .net-3.5

我正在尝试添加对 WCF 服务的 Web 引用。通过项目浏览器浏览到该服务时，添加到该服务的新功能未列出。

这是我在 *.svc 文件中的代码

```
public class Service1 : IService1
{
    public string GetData(int value){;}
    public CompositeType GetDataUsingDataContract(CompositeType composite){;}
    public double Undo(double value, bool isPound){;}
} 
```

现在，在将我的服务引用为 UndoService 时，我的 Undo 方法没有出现。智能感知显示以下内容：

```
(class) CompositeType
(interface) Service1
(interface) Service1Channel
(class) Service1Client 
```

这可能是一个幼稚的问题，但我无法继续。我可能在这里遗漏了一些重要的东西。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:59:34.033

这`Service1Client`是您的代理类，必须实例化该类才能调用服务方法。

```
var proxy = new Service1Client();
proxy.Undo(..) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:31:18.113

如果您添加了新功能，则需要更新参考。您可以通过右键单击现有参考条目并选择更新来执行此操作，这将下载更新的服务合同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:05:13.153

您很可能忘记将方法添加到您的合同接口或使用`[Operationcontract]`属性装饰合同方法。

编辑：我有点误读了这个问题，在任何事情之前应用标记答案。

# ios - 将存储在 sqlite 中的用户数据迁移到应用升级中的核心数据

> ID：12531568
> 
> 赞同：2
> 
> 时间：2012-09-21T13:29:37.337
> 
> 标签：ios, core-data

我是 Stack Overflow 的新手，并且只编程了一年，所以仍然是这个东西的新手（即，请多多包涵！）。我正在升级在 xcode 3 中创建的旧应用程序，它使用 sqlite 数据库来存储用户生成的数据。升级后的应用程序需要与 iCloud 配合使用，所以我决定切换到 Core Data（因为 sqlite 本身无法与 iCloud 同步）。我实现核心数据结构没有问题，但我的问题是如何允许用户保留他们现有的数据。

我已经看过这些主题：[如何将预先存在的 sqlite 文件导入核心数据？](https://stackoverflow.com/questions/6577019/how-to-import-a-pre-existing-sqlite-file-into-core-data)并且[需要从 SQLite 数据库填充核心数据](https://stackoverflow.com/questions/6978425/need-to-populate-core-data-from-sqlite-database)，虽然我可以创建一个实用程序应用程序来导入现有数据，但这没有用，因为初始应用程序包中没有现有数据，数据由用户存储。

我真的很感激我能得到的任何帮助，我已经完全把自己绑在了一个大结上！也许我最好完全避免核心数据并找到另一种将sqlite数据保存在iCloud中的解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T06:14:46.253

您可以使用核心数据。创建您的核心数据模型和堆栈，您的迁移过程包括从您的 sqlite 数据库中查询数据以将它们插入到核心数据数据库中。

假设您的 sqlite 中有三个表。人员、车辆和财产。您将在核心数据模式中创建等效实体，然后您必须从这些表中查询信息以将它们插入核心数据。您需要熟悉如何将数据插入核心数据数据库，以及如何在多线程环境中使用它（以避免在迁移过程中锁定应用程序）。

这里有几件事要记住：

*   尝试分块保存。不要将所有内容都加载到内存中，而且您必须避免对 NSManagedObjectContext 实例进行多次保存调用。对上下文的每个保存调用都是 IO。根据您的数据使用情况平衡 IO 和内存。
*   索引现有实体上可以索引的属性。这将帮助您建立关系（如果有的话）
*   在开始迁移之前向系统询问时间。使用 UIApplication 的 beginBackgroundTaskWithExpirationHandler: 以确保系统有足够的时间继续迁移（以防用户将应用程序发送到后台）。
*   不要费心清理 sqlite 数据库。完成后删除数据库文件。

这些是我现在可以给你的一些建议。如果我想到更多，我会编辑这篇文章。祝你好运。

# xslt - XSLT 1.0：递归展平/非规范化结构

> ID：12531570
> 
> 赞同：3
> 
> 时间：2012-09-21T13:29:50.453
> 
> 标签：xslt, recursion

我正在尝试递归地展平/规范化下面的结构，但没有运气。

```
<models>
  <model name="AAA" root="true">
    <items>
        <item name="a"/>
        <item name="b"/>
    </items>
    <submodels>
        <submodel ref="BBB"/>
        <submodel ref="CCC" />
    </submodels>
  </model>
  <model name="BBB">
    <items>
        <item name="c"/>
        <item name="d"/>
    </items>
    <submodels>
        <submodel ref="CCC" />
    </submodels>
  </model>
  <model name="CCC">
    <item name="e" />
  </model>
</models> 
```

预期结果如下：

```
/AAA
/AAA/a
/AAA/b
/AAA/BBB
/AAA/BBB/c
/AAA/BBB/d
/AAA/BBB/CCC
/AAA/BBB/CCC/e
/AAA/CCC
/AAA/CCC/e 
```

我尝试过以递归方式使用。但主要问题是多个模型可以引用一个模型。例如。AAA -> CCC 和 BBB -> CCC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:59:41.233

**这个简短而简单的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>

  <xsl:key name="kmodelByName" match="model" use="@name"/>
  <xsl:key name="ksubmodelByRef" match="submodel" use="@ref"/>

  <xsl:template match="/*">
   <xsl:apply-templates select="model[not(key('ksubmodelByRef', @name))]"/>
  </xsl:template>

    <xsl:template match="model|item">
      <xsl:param name="pPath"/>
      <xsl:value-of select="concat('&#xA;', $pPath, '/', @name)"/>
      <xsl:apply-templates select="item|*/item|*/submodel">
       <xsl:with-param name="pPath" select="concat($pPath, '/', @name)"/>
      </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="submodel">
      <xsl:param name="pPath"/>
      <xsl:apply-templates select="key('kmodelByName', @ref)">
        <xsl:with-param name="pPath" select="$pPath"/>
      </xsl:apply-templates>
    </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<models>
    <model name="AAA" root="true">
        <items>
            <item name="a"/>
            <item name="b"/>
        </items>
        <submodels>
            <submodel ref="BBB"/>
            <submodel ref="CCC" />
        </submodels>
    </model>
    <model name="BBB">
        <items>
            <item name="c"/>
            <item name="d"/>
        </items>
        <submodels>
            <submodel ref="CCC" />
        </submodels>
    </model>
    <model name="CCC">
        <item name="e"/>
    </model>
</models> 
```

**产生想要的正确结果**：

```
/AAA
/AAA/a
/AAA/b
/AAA/BBB
/AAA/BBB/c
/AAA/BBB/d
/AAA/BBB/CCC
/AAA/BBB/CCC/e
/AAA/CCC
/AAA/CCC/e 
```

**说明**：

1.  正确使用键可以使转换变得简短、易于表达和*高效*。

2.  正确使用模板。

3.  正确使用参数 - 传递给模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:44:30.143

首先，我怀疑您想计算标记为根的**模型**

```
<xsl:apply-templates select="model[@root='true']" /> 
```

然后，您将有一个模板来匹配**模型**元素，但该模板需要一个包含父模型的当前“路径”的参数

```
<xsl:template match="model">
   <xsl:param name="path" /> 
```

您可以像这样输出完整路径

```
<xsl:variable name="newpath" select="concat($path, '/', @name)" />
<xsl:value-of select="concat($newpath, '&#13;')" /> 
```

然后您可以输出**项目**，但将新路径作为参数传递

```
<xsl:apply-templates select="items/item|item">
   <xsl:with-param name="path" select="$newpath" />
</xsl:apply-templates> 
```

为了匹配子模型，理想情况下可以使用密钥

```
<xsl:key name="models" match="model" use="@name" /> 
```

然后你可以像这样匹配子模型

```
<xsl:apply-templates select="key('models', submodels/submodel/@ref)">
   <xsl:with-param name="path" select="$newpath" />
</xsl:apply-templates> 
```

这将递归匹配相同的模型模板。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text" indent="yes"/>
   <xsl:key name="models" match="model" use="@name" />

   <xsl:template match="/models">
      <xsl:apply-templates select="model[@root='true']" />
   </xsl:template>

   <xsl:template match="model">
      <xsl:param name="path" />

      <xsl:variable name="newpath" select="concat($path, '/', @name)" />
      <xsl:value-of select="concat($newpath, '&#13;')" />

      <xsl:apply-templates select="items/item|item">
         <xsl:with-param name="path" select="$newpath" />
      </xsl:apply-templates>

      <xsl:apply-templates select="key('models', submodels/submodel/@ref)">
         <xsl:with-param name="path" select="$newpath" />
      </xsl:apply-templates>

   </xsl:template>

   <xsl:template match="item">
      <xsl:param name="path" />
      <xsl:value-of select="concat($path, '/', @name, '&#13;')" />
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
/AAA
/AAA/a
/AAA/b
/AAA/BBB
/AAA/BBB/c
/AAA/BBB/d
/AAA/BBB/CCC
/AAA/BBB/CCC/e
/AAA/CCC
/AAA/CCC/e 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:51:21.897

我不确定你的转换规则是什么。这有点猜测，但以下 XSLT 1.0 样式表确实将您提供的输入转换为预期的输出。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>

<xsl:template match="/">
  <xsl:apply-templates select="models/model[@root='true']">
    <xsl:with-param name="base" select="''" />
  </xsl:apply-templates>  
</xsl:template>

<xsl:template match="model|item">
  <xsl:param name="base" />
  <xsl:variable name="new-base" select="concat($base,'/',@name)" />
  <xsl:value-of select="concat($new-base,'&#x0A;')" />
  <xsl:apply-templates select="items/item | item | submodels/submodel/@ref">
    <xsl:with-param name="base" select="$new-base" />
  </xsl:apply-templates>  
</xsl:template>

<xsl:template match="@ref">
  <xsl:param name="base" />
  <xsl:apply-templates select="../../../../model[@name=current()]">
    <xsl:with-param name="base" select="$base" />
  </xsl:apply-templates>  
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:44:28.360

可能有一种更简单的方法可以做到这一点，但我能够使用以下 xslt 获得您想要的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" exclude-result-prefixes="exsl" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:exsl="http://exslt.org/common">

    <xsl:variable name="root" select="/models/model[@root = 'true']/@name"/>

    <xsl:template match="models">
        <xsl:for-each select="model">

            <xsl:variable name="savedNode" select="."/>

            <xsl:variable name="precedingValue">
                <xsl:call-template name="preceding">
                    <xsl:with-param name="modelName" select="@name"/>
                </xsl:call-template>
            </xsl:variable>

            <xsl:if test="not(exsl:node-set($precedingValue)/preceding)">
                <xsl:call-template name="model">
                    <xsl:with-param name="node" select="$savedNode"/>
                </xsl:call-template>
            </xsl:if>            

            <xsl:for-each select="exsl:node-set($precedingValue)/preceding">
                <xsl:sort select="position()" data-type="number" order="descending"/>
                <xsl:variable name="precedingTmp" select="normalize-space(.)"/>
                <xsl:variable name="normalizedPreceding" select="translate($precedingTmp, ' ', '')"/>  

                <xsl:call-template name="model">
                    <xsl:with-param name="node" select="$savedNode"/>
                    <xsl:with-param name="preceding" select="$normalizedPreceding"/>
                </xsl:call-template>
            </xsl:for-each>

        </xsl:for-each>
    </xsl:template>

    <xsl:template name="model">
        <xsl:param name="node"/>
        <xsl:param name="preceding"/>
        \<xsl:value-of select="$preceding"/><xsl:value-of select="$node/@name"/>
        <xsl:for-each select="$node/items/item">
            \<xsl:value-of select="$preceding"/><xsl:value-of select="$node/@name"/>\<xsl:value-of select="@name"/>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="preceding">
        <xsl:param name="modelName"/>

        <xsl:for-each select="preceding::model">
            <xsl:for-each select="submodels/submodel">
                <xsl:choose>
                    <xsl:when test="contains(@ref, $modelName)">
                        <preceding>
                            <xsl:call-template name="preceding">
                                <xsl:with-param name="modelName" select="$modelName"></xsl:with-param>
                            </xsl:call-template>
                            <xsl:value-of select="../../@name"/>\
                        </preceding>
                    </xsl:when>
                </xsl:choose>    
            </xsl:for-each>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="items">
        <xsl:for-each select="item">

        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

输入

```
<models>
    <model name="AAA" root="true">
        <items>
            <item name="a"/>
            <item name="b"/>
        </items>
        <submodels>
            <submodel ref="BBB"/>
            <submodel ref="CCC" />
        </submodels>
    </model>
    <model name="BBB">
        <items>
            <item name="c"/>
            <item name="d"/>
        </items>
        <submodels>
            <submodel ref="CCC" />
        </submodels>
    </model>
    <model name="CCC">
        <items>
        <item name="e"/>
        </items>
    </model>
</models> 
```

输出

```
\AAA
\AAA\a
\AAA\b
\AAA\BBB
\AAA\BBB\c
\AAA\BBB\d
\AAA\BBB\CCC
\AAA\BBB\CCC\e
\AAA\CCC
\AAA\CCC\e 
```

我希望它有所帮助。

# postgresql - 如何验证运行不同版本的大型 postgresql 数据库是否具有相同的数据而不转储

> ID：12531575
> 
> 赞同：0
> 
> 时间：2012-09-21T13:30:05.833
> 
> 标签：postgresql, dump, verification, database-comparison

我将如何验证 8.3 postgresql 数据库中的数据与 9.0 数据库中的数据相同

当我在示例表上执行 sql 转储时，我们发现了许多差异，但这是由于 9.0 在日期字段的末尾和开头截断 0，转储的顺序也不是固定的，即使这可以用排序（没有双关语）。它不允许验证，因为它会丢失它所属的表，因为已排序的 sql 转储将是一堆毫无意义的 sql 命令，其中包含额外的转储设置。

count(*) 也不够。

我想 100% 确定一个中的数据与另一个中的数据相同，尽管存在版本差异以及至少在 9.0 中保存日期的方式。

我应该补充一下，我有数百个表和数百 GB 的数据。所以我需要一个像 diff DUMPa.sql DUMP2.sql 这样的自动化过程，数据的 SHA（不是格式）是个好主意，但是由于众所周知的原因，不能区分 PostgreSQL 的二进制转储。我知道 mysql 具有校验和功能，但我使用的是 postgresql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:53:41.560

首先是坏消息。如果不将所有数据加载到中间程序并直接进行比较，就无法提供您想要解决的全部问题。这将需要时间，并且会拖累您的系统负载，因此我的建议是设置某种复制并比较副本。

您可能能够做的一件事是使用 Slony 或 Bucardo 之类的东西进行复制，然后触发将数据移动到辅助子分区并将它们复制到合并服务器上进行比较。然后您可以在 PostgreSQL 中进行比较。这将减少负载，这意味着与其他方法相比，您的报告数据将相对容易管理。但是所有数据都必须逐行加载和比较。

# java - 在 Java 中解压缩 GZIP 字符串

> ID：12531579
> 
> 赞同：9
> 
> 时间：2012-09-21T13:30:33.407
> 
> 标签：java

> **可能重复：**
> [如何解压缩字节数组中的压缩数据？](https://stackoverflow.com/questions/270268/how-to-decompress-a-gzipped-data-in-a-byte-array)

我有一个 Gzip 字节数组，我只想解压缩它并打印输出。是这样的：

```
byte[] gzip = getGZIPByteArray();

/* Code do uncompress the GZIP */

System.out.print(uncompressedGZIP); 
```

任何人都可以帮我解决中间的代码吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T13:46:58.960

```
// With 'gzip' being the compressed buffer
java.io.ByteArrayInputStream bytein = new java.io.ByteArrayInputStream(gzip);
java.util.zip.GZIPInputStream gzin = new java.util.zip.GZIPInputStream(bytein);
java.io.ByteArrayOutputStream byteout = new java.io.ByteArrayOutputStream();

int res = 0;
byte buf[] = new byte[1024];
while (res >= 0) {
    res = gzin.read(buf, 0, buf.length);
    if (res > 0) {
        byteout.write(buf, 0, res);
    }
}
byte uncompressed[] = byteout.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-21T13:38:06.773

下面的方法可能会给你一个开始：-

```
 public static byte[] decompress(byte[] contentBytes){
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        try{
            IOUtils.copy(new GZIPInputStream(new ByteArrayInputStream(contentBytes)), out);
        } catch(IOException e){
            throw new RuntimeException(e);
        }
        return out.toByteArray();
    } 
```

确保您的类路径中包含以下内容，并且`import`在您的代码中包含这些内容。

```
import java.util.zip.*;
import org.apache.commons.io.IOUtils; 
```

# macos - 带有 Automator 的 Whois 终端脚本

> ID：12531583
> 
> 赞同：0
> 
> 时间：2012-09-21T13:30:48.067
> 
> 标签：macos, terminal, automator

我想从我的终端获取一个 IP 地址，右键单击，选择服务 > Whois 并以某种方式返回结果。

这不存在，所以我想创建一个简单的 Automator 脚本来做到这一点。但是，我遇到了一些问题。

这就是我所做的 - Automator Actions：

1.  获取指定文本（这将是 IP 地址）

2.  为 "$@" 中的 x 运行 Shell 脚本；谁是 $x; 完毕

3.  查看结果

但我在查看结果中得到的只是：

```
(
  ""
) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:34:52.590

您必须打印结果，使用`echo`.

对于单个 IP 地址，请使用“ **$@** ”而不是使用循环。

```
echo $(whois "$@") 
```

# c# - 将基类的集合转换为派生类的集合

> ID：12531585
> 
> 赞同：-3
> 
> 时间：2012-09-21T13:30:52.387
> 
> 标签：c#

您能帮我将 BaseClass 的 ObservableCollection 转换为 DerivedClass 的 IEnumerable 吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:32:42.793

如果您知道所有项目都是派生对象，请使用 LINQ `Enumerable.Cast`：

```
var enumerable = collection.Cast<DerivedClass>(); 
```

如果集合中的任何项目实际上不是`DerivedClass`.

如果集合可能包含非派生对象并且您只想要那些派生对象：

```
var enumerable = collection.OfType<DerivedClass>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:32:45.597

如果您确定所有项目实际上都是派生类型，则使用`Cast`

```
IEnumerable<DerivedClass> results = observableCollection.Cast<DerivedClass>(); 
```

如果有些可能不是那种类型，那么使用

```
IEnumerable<DerivedClass> results = observableCollection.OfType<DerivedClass>(); 
```

`Cast`如果无法投射任何项目，将引发异常，`OfType`根本不会将它们包含在结果中。

# c++ - 使用 std::list 推回数据

> ID：12531589
> 
> 赞同：-1
> 
> 时间：2012-09-21T13:31:04.367
> 
> 标签：c++, list, std

我有一个定义的类型并创建了一个这种类型的列表。

```
Message theMessage;
std::list<Message> LM; 
```

现在这个说法

```
LM.push_back(theMessage); 
```

给我这个错误：

```
/../gcc-4.1.2/lib/gcc/i686-pc-linux-gnu/4.1.0/../../../../include/c++/4.1.0/ext/new_allocator.h:104: error: no matching function for call to ‘
SharedTypes::Message::Message(const SharedTypes::Message&)’ 
```

构造函数看起来像

```
explicit Message(Message & aMsg)
{} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:32:27.710

我的错：

```
explicit Message(const Message & aMsg)
{} 
```

`explicit`确实有效，但您必须通过`const`引用传递参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:39:44.907

正如建议的构造函数应该是：

1.  `explicit Message(const Message & aMsg)`

2.  声明为`public`

如果您无法更改此设置，请考虑使用智能指针容器，例如`std::list<std::shared_ptr<Message>>`，或`boost::ptr_list<Message>`

# iphone - 更新到 iOS 6 后，所有取消按钮在 sharekit 中都不起作用

> ID：12531591
> 
> 赞同：1
> 
> 时间：2012-09-21T13:31:16.163
> 
> 标签：iphone, ios, sharekit

```
- (void)cancel
{   
[[SHK currentHelper] hideCurrentViewControllerAnimated:YES];
} 
```

上面给出的是 sharekit twitter 表单上取消按钮的代码，但它不起作用。我相信它在更新到 iOS 6 之前可以工作。在更新到 iOS 6 之后，我替换了不推荐使用的那些。

```
- (void)hideCurrentViewControllerAnimated:(BOOL)animated
{
if (isDismissingView)
    return;

if (currentView != nil)
{
    // Dismiss the modal view
    if ([currentView parentViewController] != nil)
    {
        self.isDismissingView = YES;
        [[currentView parentViewController] dismissViewControllerAnimated:YES completion:nil];
    }

    else
        self.currentView = nil;
}
} 
```

我替换了dismissModalViewControllerAnimated:YES 为dismissViewControllerAnimated:YES 完成：nil。

现在我注意到取消按钮在 pinboardform、SHKShareMenu、Instapaper 和所有其他表单中都不起作用。

任何人都知道为什么在更新到 iOS 6 后 Sharekit 上的这个取消按钮停止工作。单击取消按钮时，没有任何反应。

这是为什么。是什么原因。

有任何想法吗。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:07:07.127

修复。它必须**呈现**ViewController 而不是parentViewController。

下面是代码

```
- (void)hideCurrentViewControllerAnimated:(BOOL)animated
{
if (isDismissingView)
    return;

if (currentView != nil)
{
    // Dismiss the modal view
    if ([currentView presentingViewController] != nil)
    {
        self.isDismissingView = YES;
        [[currentView presentingViewController] dismissViewControllerAnimated:YES completion:nil];
    }

    else
        self.currentView = nil;
}
} 
```

SHK.m 中的这种代码更改使所有取消工作。现在所有取消都在 Sharekit 中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:54:10.243

添加这行代码：

```
[self dismissModalViewControllerAnimated:YES]; 
```

在这两种方法的最后：

```
- (void)cancel {

 [self dismissModalViewControllerAnimated:YES];
} 
```

和 ：

```
- (void)save {
 [self dismissModalViewControllerAnimated:YES];
} 
```

在 中`SHKTwitterForm.m`，它对我有用。

# iphone - 从视频中删除音频

> ID：12531594
> 
> 赞同：0
> 
> 时间：2012-09-21T13:31:30.550
> 
> 标签：iphone, objective-c, ios, avfoundation

我用图像选择器选择一部电影。问题是我不知道如何从资产中删除音频。任何想法？这是我用来检索电影的代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    NSURL *url =  [info objectForKey:UIImagePickerControllerMediaURL];
    if ([[NSFileManager defaultManager]fileExistsAtPath:movie.id]) {
        [[NSFileManager defaultManager]removeItemAtPath:movie.id error:nil];
        [[NSFileManager defaultManager]removeItemAtPath:movie.convertedID error:nil];
    }
    movie.convertedID=nil;

    [self dismissModalViewControllerAnimated:YES];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self saveNewMovieAt:url];
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:54:52.800

**播放时静音 MPMoviePlayerController**的更好方法是尝试从资产中删除音频:)

据我所知，没有其他方法可以做到这一点。

```
[[MPMusicPlayerController applicationMusicPlayer] setVolume:0];

                          or

        [myMPMoviePlayerController setVolume:0]; 
```

# java - 添加 log4J 库以构建路径失败？

> ID：12531595
> 
> 赞同：0
> 
> 时间：2012-09-21T13:31:35.857
> 
> 标签：java, eclipse, logging, log4j

我正在使用 eclipse 作为我的 ide。我想将 log4j 添加到构建路径。因此，我从 log4j 站点下载了 zip 文件。事实上，我将我的库作为引用库，但是 IDE 无法识别记录器......![在此处输入图像描述](../Images/4347e4c4590a3fcff414b58e15f479c1.png)

我很欣赏你的回答！！！

PS.：我使用的导入是：

```
import org.apache.log4j.Logger; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:39:10.003

在我看来，您有一个 zip 文件作为引用库，而不是实际的 log4j jar 文件。

解压缩您的文件并从中提取 jar 并将其放置在您的构建路径中。

此外，您使用的 log4j 版本 2 仍处于 alpha 版本且与 log4j 1.x 不兼容

你需要[这个](http://logging.apache.org/log4j/1.2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:38:34.393

右键项目 -> BuidPath -> 配置构建路径

选择库选项卡 使用添加 jar 或添加外部 jar 以将 jar 包含在项目类路径中。

希望能帮助到你 ...

# android - 即使活动最小化如何保留android弹出窗口

> ID：12531598
> 
> 赞同：2
> 
> 时间：2012-09-21T13:31:48.087
> 
> 标签：android, popupwindow

我想知道即使按下主页按钮，Android 中是否可以保留显示在活动顶部的弹出窗口。示例：我有一个包含按钮的活动。单击按钮时会显示一个弹出窗口，现在我按下主页按钮。我想要的是活动应该关闭而不是弹出窗口:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:36:43.423

不，对话框/弹出窗口附加到活动的窗口并依赖于活动的生命周期。因此，一旦父窗口离开（或处于停止状态），您就无法保留/显示对话框。

要完成此操作，您可以使用**AndroidManifest.xml**中定义`Activity`的主题启动一个新主题。这会将您的活动模拟为对话框/弹出窗口，并将包含其自己的生命周期。`android:theme="@android:style/Theme.Dialog"`

# jquery - jquery & x-tmpl

> ID：12531599
> 
> 赞同：1
> 
> 时间：2012-09-21T13:31:52.023
> 
> 标签：jquery, jquery-templates, blueimp

我在我的代码中使用 blueimp 上传器，我想稍微修改一下代码。这是我要修改的部分代码。

```
 <script id="template-download" type="text/x-tmpl">
        {% for (var i=0, file; file=o.files[i]; i++) { %}
              <tr class="template-download fade">
                  {% if (file.error) { %}
        <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
    {% } else { %}
        <td class="preview">{% if (file.thumbnail_url) { %}
            <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
        {% } %}</td>
        <td class="name">
            <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
    {% } %}
    <td class="delete">
         <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
            <i class="icon-trash icon-white"></i>
            <span>{%=locale.fileupload.destroy%}</span>
        </button>
        <input type="checkbox" name="delete" value="1">
    <input type="hidden" id="imagename" name="imagename" value="{%=file.name%}"/>

    </td>
</tr>
{% } %} 
```

我在代码的最后添加了一个隐藏输入：

```
 <input type="hidden" id="imagename" name="imagename" value="{%=file.name%}"/> 
```

我想要做的是，每当我上传图像时，我都想获取它的名称以便存储到数据库中。问题是我无法获得隐藏输入的唯一名称。假设我上传了三张图片，每个隐藏字段的名称都相同。

我厌倦了使用 for 循环中的可变“i”来连接类似“imagename+i”但无法做到。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:15:45.063

你试过了吗 `id="imagename-{%=i}"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T15:20:13.727

[这里](https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-form-data#setting-formdata-on-upload-start-for-each-individual-file-upload)的***fileuploadsubmit***绑定应该可以解决问题。

# sqlite - 如何运行 lsqlite3 示例

> ID：12531600
> 
> 赞同：1
> 
> 时间：2012-09-21T13:31:51.773
> 
> 标签：sqlite, debugging, lua, package

我已经下载了 LUA 5.1 和 lsqlite3 源代码，并轻松准备了一个 Visual C++ express 项目，该项目可以正常编译和运行，并添加了 SQLite3 和 lsqlite3（只有几个 .c 和 .h 文件）。

我使用 lua.c 作为其“主要”功能的入口点，并且我已从 Visual Studio 项目 luac.c 文件中删除。当我启动 .exe 时，它​​会向我显示一个解析基本 lua 命令（例如`print("hello world")`）的命令行，这很好用。启动标准 Lua (5.1) 示例之一也可以正常工作（例如键入`dofile("bisec.lua")`），但如果我尝试来自 lsqlite3 的一个 .lua 文件，则会出现以下错误：

```
statement.lua:1: module 'lsqlite3' not found:
        no field package.preload['lsqlite3']
        no file '.\lsqlite3.lua'
        no file 'C:\Projects\lua-5.1.5_lsqlite3_integration\lua_5.1_lsqlite3_int
egration\Debug\lua\lsqlite3.lua'
        no file 'C:\Projects\lua-5.1.5_lsqlite3_integration\lua_5.1_lsqlite3_int
egration\Debug\lua\lsqlite3\init.lua'
        no file 'C:\Projects\lua-5.1.5_lsqlite3_integration\lua_5.1_lsqlite3_int
egration\Debug\lsqlite3.lua'
        no file 'C:\Projects\lua-5.1.5_lsqlite3_integration\lua_5.1_lsqlite3_int
egration\Debug\lsqlite3\init.lua'
        no file 'C:\Program Files (x86)\Lua\5.1\lua\lsqlite3.luac'
        no file '.\lsqlite3.dll'
        no file 'C:\Projects\lua-5.1.5_lsqlite3_integration\lua_5.1_lsqlite3_int
egration\Debug\lsqlite3.dll'
        no file 'C:\Projects\lua-5.1.5_lsqlite3_integration\lua_5.1_lsqlite3_int
egration\Debug\loadall.dll'
stack traceback:
        [C]: in function 'require'
        statement.lua:1: in main chunk
        [C]: in function 'dofile'
        stdin:1: in main chunk
        [C]: ? 
```

如何注册 lsqlite3 包？我发现了一个我怀疑与此有关的文件：“lsqlite3-0.8-1.rockspec”，但如果它对我的目的有用，也不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:44:54.730

> 我想我明白了。
> 
> 添加“LUA_API int luaopen_lsqlite3(lua_State *L);” 到 lua.h
> 
> 在文件 lua.c 中，在函数 "static int pmain (lua_State *L)" 行 "luaL_openlibs(L); /* 打开库 */" 后添加行 "luaopen_lsqlite3(L);"
> 
> 将所有 lsqlite3 示例文件中的第一行从 "require("lsqlite3")" 更改为 "require("sqlite3")"
> 
> 完成这 3 点后，示例脚本运行良好，或者至少没有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:30:46.747

1.  加载 sqlite3 源并构建它们 -> sqlite3.dll 将是你的。

2.  加载 lsqlite 源并构建它们（这将需要 sqlite3.a 和一些头文件）-> 你将获得 lsqlite3.dll。

3.  将 lsqlite3.dll 放到你的 Lua clibs 目录 (\Lua\5.1\clibs)

4.  尝试这个：

    ```
    require("lsqlite3")
    local db = assert( sqlite3:open_memory() ) 
    ```

# url - 如何对 URI 进行编码以安全地存储在 TableServiceEntity 的 RowKey 中？

> ID：12531602
> 
> 赞同：7
> 
> 时间：2012-09-21T13:32:02.900
> 
> 标签：url, uri, azure-storage, azure-table-storage

我真的*非常*想将 URI 作为 RowKey 值存储在 Azure 表存储中。根据[文档](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)，RowKeys 不能包含 URI 中常见的字符（/、\、#、？）。

解决方案似乎很简单：只需对 URI 进行编码。但这不起作用。无论出于何种原因，可以插入任何包含*序列* **%2f**（正斜杠的编码值）的值，但即使 '%2f' 不包含任何禁止字符，也不能查询。

好的，那么base64编码怎么样？没有。它偶尔会产生正斜杠字符，这是不允许的。

那么是否有一种方法可以对可以可靠地存储为 Azure Table 中的 RowKey 的字符串（URI）进行编码？最好但不一定是人类可读的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T18:13:02.163

使用 base64 编码后用 _ 替换 / 应该可以工作。[从编码和解码可能有斜杠的字符串中](https://stackoverflow.com/questions/6730815/encoding-and-decoding-a-string-that-may-have-slashes-in-it)得到这个建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:17:32.737

将 URL 中的所有非法行键字符（\、/、?）替换为 URLS 中的非法字符（例如 <、>、%）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T00:22:24.760

离题但相关：我正在动态创建表格，并且如果您需要它，我的代码可以帮助您，尽管表格和 PK/RK 的规则完全不同。“^[A-Za-z][A-Za-z0-9]{2,62}$”。

也许您可以使用它来激发您自己的解决方案

解码一个字符串

```
 string edit1 = host
            .Replace("qqu", "_")
            .Replace("qqh", "-")
            .Replace("qqp", ".")

            // NOTE: qqn is reserved leading sequence

            .Replace("qqt", "qqu")
            .Replace("qqo", "qqp")
            .Replace("qqg", "qqh")
            ;

        if (edit1.StartsWith("qqn"))
        {
            edit1 = edit1.Substring(3, edit1.Length);
        }
        if (edit1.StartsWith("qq"))
        {
            edit1 = edit1.Substring(2, edit1.Length);
        } 
```

编码字符串的方法

```
 string edit1 = this.originalName.ToLower().Trim()
                .Replace("qqu", "qqt")
                .Replace("qqp", "qqo")
                .Replace("qqh", "qqg")

                // NOTE: qqn is reserved leading sequence

                .Replace("_", "qqu")
                .Replace("-", "qqh")
                .Replace(".", "qqp");

            string test = "qq";
            if (edit1.StartsWith(test))
                return test + "n" + edit1;

            test = "0";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "1";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "2";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "3";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "4";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "5";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "6";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "7";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "8";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "9";
            if (edit1.StartsWith(test))
                return "qq" + edit1;

            test = "0";
            if (edit1.StartsWith(test))
                return "qq" + edit1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T22:23:19.573

几种可能性：

1.  使用某些特定编码（例如，UTF-8）转换字节，然后将字节编码为十六进制。用它作为关键。但是，有些 URI 可能会很长，而 key 会更长，因此您可能会遇到 RowKey 的最大长度。
2.  散列 URI（例如，使用 MD5）。十六进制编码这些字节并将它们用作密钥。请注意，有可能发生冲突，但您的 PartitionKey 可能会消除这种可能性。由于哈希是恒定长度，因此最大 RowKey 长度不应该有问题。

我敢肯定还有其他想法，我很想听听他们的意见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-08T00:38:04.943

```
public static string Encode(string rawText)
    {
        return Regex.Replace(rawText, @"[/\?\:@\&=\+,\$]", delegate(Match m)
        {
            switch (m.Value)
            {
                case "/": return "{#sl}";
                case "?": return "{#qm}";
                case ":": return "{#cl}";
                case "@": return "{#at}";
                case "&": return "{#am}";
                case "=": return "{#eq}";
                case "+": return "{#pl}";
                case ",": return "{#cm}";
                case "$": return "{#dl}";

                default: return m.Value;
            }
        });
    }

public static string Decode(string encodedText)
    {
        return Regex.Replace(encodedText, @"\{#[a-z]{2}\}", delegate(Match m)
        {
            switch (m.Value)
            {
                case "{#sl}": return "/";
                case "{#qm}": return "?";
                case "{#cl}": return ":";
                case "{#at}": return "@";
                case "{#am}": return "&";
                case "{#eq}": return "=";
                case "{#pl}": return "+";
                case "{#cm}": return ",";
                case "{#dl}": return "$";

                default: return m.Value;
            }
        });
    } 
```

# matlab - mbuild 不工作

> ID：12531607
> 
> 赞同：0
> 
> 时间：2012-09-21T13:32:44.897
> 
> 标签：matlab

我正在使用 R2008b 版本的 matlab 并尝试运行“mbuild -setup”，但出现错误：??? 'char' 类型的输入参数的未定义函数或方法 'mbuild'。

我查看了安装目录，没有什么叫做 mbuild，matlab 的路径似乎指向很多工具箱，所以我在 bin 和 bin\win64 目录中添加了，但仍然没有。我的环境变量 PATH 也指向 win64。有人对我所缺少的有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:38:22.920

您需要 MATLAB 编译器工具箱。它不附带基本的matlab安装..

# iphone - 如何为 TheOs 设置框架路径？

> ID：12531609
> 
> 赞同：0
> 
> 时间：2012-09-21T13:32:47.280
> 
> 标签：iphone, jailbreak

我想使用 SpringBoardservice.Framework 但 TheOs 似乎不知道它。谁能帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:10:42.730

要使用 SpringBoardServices.framework，您必须使用 class-dump 或**class-dump-z**（首选）自己转储它，可以通过添加 repo 从 Cydia 安装 class-dump-z：

`ininjas.com/repo/`

然后你必须安装**移动终端**（来自 Cydia）并运行

类转储-z -H /System/Library/Frameworks/SomeFramework/SomeFrameworkBinary -O /var/mobile/somefolder

获取 var/mobile/somefolder 中的标题

无论如何，您总是可以使用**rpetrich 的转储标头**（我个人作为 Cydia 开发人员自己使用）这是链接[https://github.com/rpetrich/iphoneheaders](https://github.com/rpetrich/iphoneheaders)

然后你必须将所有框架头文件夹放在 /var/theos/include 中（无论你的 theos 文件夹在哪里，在我的设备上，因此是 var/theos/include）

之后，您必须添加该行

```
#import <SomeFramework/SomeFramework.h> 
```

在您的tweak.xm/tweak.mm 中。快乐编码！

# rest - RESTEasy - 获取整个查询字符串

> ID：12531611
> 
> 赞同：0
> 
> 时间：2012-09-21T13:32:55.723
> 
> 标签：rest, web-services, get, resteasy

我想在 GET 方法中获取整个查询字符串。例如，如果 uri 是

主机：端口/应用程序？param1=123¶m2=xyz¶m3=4

我想得到“param1=123¶m2=xyz¶m3=4”部分。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:14:05.500

你可以得到[HttpServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)，在那里你会找到一切。例如，在您的资源中：

```
public class MyResource {
  @Context
  private HttpServletRequest request;
  @GET
  public void get() {
    this.request.getQueryString();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-17T17:39:40.177

真的老了……但是：

您应该映射@Context 并按如下方式获取查询部分： .getRequestUri().getQuery()

```
 @POST
    @Path("/{path}")
    public Response transform(@PathParam String path, @Context UriInfo uriInfo, String inputData) {
...
        String query = uriInfo.getRequestUri().getQuery();
        System.out.println(query); // null if no query parameter is supplied
... 
```

# c# - C# 线程不会停止

> ID：12531613
> 
> 赞同：0
> 
> 时间：2012-09-21T13:33:12.663
> 
> 标签：c#, multithreading

updater.SearchByFunctionName 在 5-10 秒后返回，我想在进度条工作时增加它的值，但它永远不会停止。

我是线程新手，所以也许这是非常基本的东西，我不知道。

```
 Thread t = new Thread(delegate()
            {
                updater.SearchByFunctionName(testsuiteBox.SelectedValue.ToString(), functionNameBox.Text);
            });

            t.Start();

            progressBar.Value = 0;

            while(t.IsAlive)
            {

                Thread.Sleep(1000);

                if (progressBar.Value >= 200 )

                    {

                        progressBar.Value = 0;
                    }

                    progressBar.Value += 20;
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:37:29.433

您正在阻止 UI 线程，这会阻止对进度条的任何更新。

您应该使用`Timer`, 将事件附加到`Tick`事件并在其中放置代码以更新进度条。

您似乎也在手动制作 Marquee 风格的进度条。 `ProgressBar`对此内置支持。您只需添加：

```
myProgressBar.Style = ProgressBarStyle.Marquee; 
```

您可以将其设置`MarqueeAnimationSpeed`为合适的值。之后，您无需为此做任何事情。

# vbscript - VBS 窗口重新定位

> ID：12531615
> 
> 赞同：0
> 
> 时间：2012-09-21T13:33:18.253
> 
> 标签：vbscript

我正在尝试将具有特定标题的窗口重新定位到屏幕上的某个位置。如何使用 VBS 实现这一点。任何数量的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:34:16.773

您不能在 VBS 中重新定位 msgbox 或输入框对话框，您最好的选择是使用*InternetExplorer.Application*或*TPFSoftware.ScriptDialog*对象来创建您自己的对话框/窗口。

**IE 应用程序参考：http:** [//blogs.technet.com/b/heyscriptingguy/archive/2007/07/19/how-can-i-create-a-custom-dialog-box.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2007/07/19/how-can-i-create-a-custom-dialog-box.aspx)
**TPFSoftware：** [http://tpfsoftware .com/webhelp/products/scriptdialogs10/htmldlg040.html](http://tpfsoftware.com/webhelp/products/scriptdialogs10/htmldlg040.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:55:21.910

我不认为这可以在 VBScript 中完成。我可以建议使用[AutoIt](http://www.autoitscript.com/site/autoit/)之类的东西来完成这类任务吗？

# c# - C# 无法将字符串转换为字节数组以获得所需的结果？

> ID：12531619
> 
> 赞同：2
> 
> 时间：2012-09-21T13:33:30.253
> 
> 标签：c#, string, bytearray

我有一个只存储 1 和 0 的字符串。现在我需要将它转换为字节数组。我试过 ..

```
System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
                        byte[] d = encoding.GetBytes(str5[1]); 
```

但它给了我 ASCII 的字节数组，如 48 和 49，但我想要 1 和 0 在我的字节数组中......任何人都可以帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:34:39.027

这是编码的正确结果。编码产生*字节*，而不是*位*。如果你想要*bits*，那么使用按位运算符来检查每个字节。IE

```
foreach(var byte in d) {
    Console.WriteLine(byte & 1);
    Console.WriteLine(byte & 2);
    Console.WriteLine(byte & 4);
    Console.WriteLine(byte & 8);
    Console.WriteLine(byte & 16);
    Console.WriteLine(byte & 32);
    Console.WriteLine(byte & 64);
    Console.WriteLine(byte & 128);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:41:29.283

```
System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
                    byte[] d = encoding.GetBytes(str5[1]);
var dest[] = new byte();
var iCoun = 0;
var iPowe = 1;
foreach(var byte in d)
{
  dest[i++] = (byte & iPowe);
  iPowe *= 2;
}
foreach(var byte in dest)
{
  Console.WriteLine(byte);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:42:22.403

不需要 UTF 编码，你说你有一个`'0'`s 和`'1'`s （字符）的字符串，你想得到一个`0`s 和`1`s （字节）的数组：

```
var str = "0101010";
var bytes = str.Select(a => (byte)(a == '1' ? 1 : 0)).ToArray(); 
```

# visual-studio-2010 - 我的 Visual Studio 2010 安装遇到严重的性能问题，我可以采取哪些方法来找出原因？

> ID：12531620
> 
> 赞同：0
> 
> 时间：2012-09-21T13:33:35.917
> 
> 标签：visual-studio-2010, performance

我正在使用 VS2010，并且遇到了严重的性能问题。例如，我可以加载，创建一个“HelloWorld”项目，开始调试它，而 VS 正在使用 700MB 的 RAM，并且每当我开始打字时表现迟缓。

现在，鉴于我提供的信息很少，我无法期望我必须给出问题的确切原因。相反，我会要求一些**通用的方法来找出 VS 性能问题的原因**。

例如：

VS 是否会保留每次启动时加载的先前会话的某种形式的缓存？如果是这样，它住在哪里？

扩展通常是一个问题吗？是否有任何工具可以显示每个单独的内存/CPU 使用情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:40:10.210

700MB 内存真的没什么大不了的。真的。但是，跟不上您的打字速度。

要诊断此问题，请尝试禁用或删除任何和所有加载项......诸如重新锐化、源代码控制插件等之类的东西，然后一次重新启用它们，直到找到哪个（S）它很慢。

# mysql - Mysql查询链接表

> ID：12531624
> 
> 赞同：1
> 
> 时间：2012-09-21T13:33:45.987
> 
> 标签：mysql

我有一个搜索表格，人们可以在其中选择公司的多项服务，表格如下：

**企业**business_id、business_name

**业务数据**

1、王子父子

2、史密斯有限公司

3、布朗队

**服务**service_id、service_name

**服务数据**

1、抛丸清理

2、绘画

3 蒸汽清洗

**业务**_服务业务_id, service_id

1, 1

1, 2

2, 2

3 1

3 2

因此，如果用户选择搜索一项，例如 Shot Blasting，则 sql 将是：

```
Select * FROM business 
Inner Join business_service On business_service.business_id  = business.business_id  
Inner Join service On service.service_id  = business_service.service_id 
WHERE business_service.service_id = 1 
```

哪个工作正常，但如果用户搜索提供“喷丸”和“绘画”的企业，我希望他们看到 business_id 1 和 3。我知道下面的 sql 不起作用，但我想我会显示我在哪里不得不这样做。

```
Select * FROM business 
Inner Join business_service On business_service.business_id  = business.business_id  
Inner Join service On service.service_id  = business_service.service_id 
WHERE business_service.service_id = 1 And business_service.service_id = 2 
```

我知道这真的很简单，但我似乎无法理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:40:14.393

你可以使用`IN`

```
Select * FROM business 
Inner Join business_service On business_service.business_id  = business.business_id  
Inner Join service On service.service_id  = business_service.service_id 
WHERE service.service_id IN (1, 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:37:57.037

使用 OR 代替 AND。使用 AND 表示返回 bussines_service，其中服务 ID 同时为 1 和 2。相反，您想要服务 id = 1 或服务 id = 2 的行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:41:04.187

您可以使用`in`，而不是`where`理想情况下，您应该有`"OR"`service id 1 或 2 的条件。你查询会是这样的

```
 Select * FROM business 
Inner Join business_service On business_service.business_id  = business.business_id  
Inner Join service On service.service_id  = business_service.service_id 
WHERE business_service.service_id in (1,2) 
```

# php - 无法构建异步文件上传器（jQuery 插件）

> ID：12531625
> 
> 赞同：0
> 
> 时间：2012-09-21T13:33:46.337
> 
> 标签：php, jquery, jquery-plugins, file-upload

我正在尝试构建一个非常简单但跨浏览器兼容的异步文件上传器，作为 jQuery 插件，我在上传文件时遇到了一些麻烦。

该插件基于通过*iframe*提交带有文件输入的表单的原则。下面是插件代码：

```
(function( $ ) {
    $.fn.asyncFileUpload = function(options) {

        // Create some defaults, extending them with any options that were provided
        $.fn.asyncFileUpload.defaults = {
            action : "",
            onStart : function(){},
            onComplete : function(){}
        };

        var settings = typeof options != "undefined" ? $.extend($.fn.asyncFileUpload.defaults, options) : $.fn.asyncFileUpload.defaults;        

        return this.each(function(){

            var date = new Date(),
                form = $(this), 
                formID = form.attr("id"),               
                iframe = $(document.createElement("iframe")),
                iframeID = "iframe-"+date.getTime();    // generate a unique ID for every iframe created (one iframe is associated with a single HTML form)

            iframe.attr({"id":iframeID, "name":iframeID}).css("display","none").appendTo("body");
            form.attr({ "target" : iframeID, "action" : settings.action });

            form.on("submit", function(event){
                iframe.load(function(event){
                    alert("iframe loaded");
                });   
            });

        });
    };
})( jQuery ); 
```

的HTML：

```
<form id="image-upload-form" method="post" enctype="multipart/form-data">
     Browse: <input type="file" id="image-to-upload" style="margin-left:5px;" />
     <input type="hidden" name="tag" value="a file" />
     <input type="submit" value="submit" />
</form>

<script>
     $("#image-upload-form").asyncFileUpload({
          action : "uploadimage.php"
     });
</script> 
```

在服务器端，我只编写了一个小脚本来检查文件的情况：

```
<?php   
    echo "tag: ".$_POST["tag"]; echo "<br />";
    echo "error: ".$_FILES["image-to-upload"]["error"];
?> 
```

结果是文件没有上传，但是“标签”输入值以某种方式到达了服务器脚本，因为它被返回了（我正在使用*Chrome 的代码检查器-> 网络*对此进行测试）。我说文件没有被上传，因为返回的值为`$_FILES["image-to-upload"]["error"]`空，Chrome 的进度条也没有出现，尽管我一直在尝试上传的文件相当大。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:44:29.693

文件输入没有`name`属性 - 这将导致它不被提交。

给你的文件输入 a`name`以便它可以`$_FILES`在脚本中的数组中访问。

```
<form id="image-upload-form" method="post" enctype="multipart/form-data">

     Browse: <input type="file" 
                    id="image-to-upload" 
                    style="margin-left:5px;" 
                    name="image-to-upload"/>

     <input type="hidden" name="tag" value="a file" />
     <input type="submit" value="submit" />
</form> 
```

进一步阅读：http: [//www.w3.org/TR/html401/interact/forms.html#control-name](http://www.w3.org/TR/html401/interact/forms.html#control-name)

我找不到规范的特定部分来阐明在提交没有名称的输入时会发生什么，但至少在 Firefox 和文件输入的情况下，似乎数据没有被发送。

# c# - 在 LINQ to SQL 中使用 GROUP BY 左连接

> ID：12531628
> 
> 赞同：0
> 
> 时间：2012-09-21T13:34:00.573
> 
> 标签：c#, linq-to-sql

我对 Linq 很陌生，现在我遇到了以下问题。我有以下功能：

```
 public Dictionary<DateTime, List<PloegenRooster_Uitzonderingen>> GetPloegenRoosterUitzonderingen(char ploeg, DateTime fromDate, DateTime toDate)
    {
        return (
            from item in this.GetTable<PloegenRooster_Uitzonderingen>()
            join itemType in PloegenRooster_Uitzondering_Types on item.UitzonderingTypeId equals itemType.Id
            group item by item.Datum
        ).ToDictionary(d => d.Key, d => d.ToList());
    } 
```

这完美地工作。但是，现在我正试图将其变成 LEFT JOIN。我最终得到以下结果：

```
 public Dictionary<DateTime, List<PloegenRooster_Uitzonderingen>> GetPloegenRoosterUitzonderingen(char ploeg, DateTime fromDate, DateTime toDate)
    {
        return (
            from item in this.GetTable<PloegenRooster_Uitzonderingen>()
            join itemType in PloegenRooster_Uitzondering_Types on item.UitzonderingTypeId equals itemType.Id into itemTypeJ
            from itemTypeS in itemTypeJ.DefaultIfEmpty()
            group item by item.Datum
        ).ToDictionary(d => d.Key, d => d.ToList());
    } 
```

但是现在我遇到了以下异常：

```
The null value cannot be assigned to a member with type System.Int32 which is a non-nullable value type. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:46:00.123

在第一个示例中的 (Inner)Join 中，仅选择与另一个表中的行匹配的行。

在左连接中，选择了表 A 中的所有行。如果第二个表中没有适合连接的行，则第二个表的列将填充 NULL 值。创建的对象具有整数属性。整数属性不包括 NULL 值。

您要么必须将 Integer 属性更改为可为空的数据类型，要么将 Integer 属性设置为可为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:04:10.597

在您的第一次尝试中，有一个等值连接，并且连接中的两个表都有一个结果。但是，当使用左连接时，您的一个表会导致空值，因为两个表之间没有匹配的键。

正如@TheJoelaut 所提到的，通过添加一个 select 子句使您的属性可以为空，或者在 null 的情况下分配零或有效的整数数据：

选择 itemTypeS == null ？(Int32)0.00 : itemTypeS.property

# java - 如何在java中以编程方式使用按钮制作表格布局？

> ID：12531633
> 
> 赞同：0
> 
> 时间：2012-09-21T13:34:10.373
> 
> 标签：java, android, android-layout, button, android-tablelayout

我叫帕维尔。

我想要这样的布局：

![布局](../Images/41b1977fddd5a7bedc260f5034912d78.png)

我想在java中进行布局，因为按钮的数量会改变。方块是按钮。布局包括：

```
<LinearLayout>  
    <Button/>  
    <TableLayout>  
        <TableRow>  
            <Button1/>  
            <Button2/>  
        </TableRow>  
        <TableRow>  
            <Button3/>  
            <Button4/>  
        </TableRow>  
    <TableLayout>  
    <Button/>  
</LinearLayout> 
```

我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        int title = getIntent().getIntExtra(KEY, MainScreen.CHOICE_COMPUTER);

        switch(title)
        {
            case MainScreen.CHOICE_COMPUTER:
                setTitle("Computer");
                break;
            case MainScreen.CHOICE_LAPTOP:
                setTitle("Laptop");
                break;
            case MainScreen.CHOICE_TV:
                setTitle("Tv");
                break;
            case MainScreen.CHOICE_FRIDGE:
                setTitle("Fridge");
                break;
        }

        LinearLayout choiceLayout = new LinearLayout(this);
        choiceLayout.setOrientation(LinearLayout.VERTICAL);
        choiceLayout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        choiceLayout.setPadding(15, 15, 15, 15);
        choiceLayout.setGravity(Gravity.CENTER);
        choiceLayout.setBackgroundResource(R.drawable.background);

        button1 = new Button(this);
        LinearLayout.LayoutParams buttonParameters = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        buttonParameters.setMargins(50, 20, 50, 70);
        button1.setLayoutParams(buttonParameters);
        button1.setGravity(Gravity.CENTER);
        button1.setPadding(10, 10, 10, 10);
        button1.setBackgroundResource(R.drawable.background_button);
        switch(title)
        {
            case MainScreen.CHOICE_COMPUTER:
                button1.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.icon_button_computer, 0, 0);
                button1.setText("Computer");
                break;
            case MainScreen.CHOICE_LAPTOP:
                button1.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.icon_button_laptop, 0, 0);
                button1.setText("Laptop");
                break;
            case MainScreen.CHOICE_TV:
                button1.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.icon_button_tv, 0, 0);
                button1.setText("Tv");
                break;
            case MainScreen.CHOICE_FRIDGE:
                button1.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.icon_button_fridge, 0, 0);
                button1.setText("Fridge");
                break;
        }

        TableLayout choiceTableLayout = new TableLayout(this);
        TableLayout.LayoutParams param1 = new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        param1.setMargins(20, 20, 20, 20);
        choiceTableLayout.setLayoutParams(param1);
        choiceTableLayout.setGravity(Gravity.CENTER);
        choiceTableLayout.setStretchAllColumns(true);

        TableLayout.LayoutParams rowLayout = new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        TableRow row1 = new TableRow(this);
        TableRow row2 = new TableRow(this);

        row1.setLayoutParams(rowLayout);
        row2.setLayoutParams(rowLayout);

        LinearLayout.LayoutParams buttonLayout = new LinearLayout.LayoutParams(0, LayoutParams.WRAP_CONTENT, 1.0f);
        buttonLayout.setMargins(10, 10, 10, 10);

        buttonOption1 = new Button(this);
        buttonOption1.setLayoutParams(param1);
        buttonOption1.setId(objectCounter++);
        Log.d("Counter: ", Integer.toString(objectCounter));
        Log.d("ID", Integer.toString(buttonOption1.getId()));
        buttonOption1.setGravity(Gravity.CENTER);
        buttonOption1.setBackgroundResource(R.drawable.option_off_background_button);
        buttonOption1.setTextSize(19);
        buttonOption1.setTextColor(getResources().getColor(R.color.color_text_button));
        buttonOption1.setText("Off");
        buttonOption1.setBackgroundResource(R.drawable.option_off_background_button);
        buttonOption1.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.option1, 0, 0);

        buttonOption2 = new Button(this);
        buttonOption2.setLayoutParams(buttonLayout);
        buttonOption2.setId(objectCounter++);
        buttonOption2.setGravity(Gravity.CENTER);
        buttonOption2.setBackgroundResource(R.drawable.option_background_button);
        buttonOption2.setTextSize(19);
        buttonOption2.setTextColor(getResources().getColor(R.color.color_text_button));
        buttonOption2.setText(R.string.button_text_option2);
        buttonOption2.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.option2, 0, 0);

        buttonOption3 = new Button(this);
        buttonOption3.setLayoutParams(buttonLayout);
        buttonOption3.setId(objectCounter++);
        buttonOption3.setGravity(Gravity.CENTER);
        buttonOption3.setBackgroundResource(R.drawable.option_background_button);
        buttonOption3.setTextSize(19);
        buttonOption3.setTextColor(getResources().getColor(R.color.color_text_button));
        buttonOption3.setText(R.string.button_text_option3);
        buttonOption3.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.option3, 0, 0);

        buttonOption4 = new Button(this);
        buttonOption4.setLayoutParams(buttonLayout);
        buttonOption4.setId(objectCounter++);
        buttonOption4.setGravity(Gravity.CENTER);
        buttonOption4.setBackgroundResource(R.drawable.option_background_button);
        buttonOption4.setTextSize(19);
        buttonOption4.setTextColor(getResources().getColor(R.color.color_text_button));
        buttonOption4.setText(R.string.button_text_option4);
        buttonOption4.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.option4, 0, 0);

        buttonSend = new Button(this);
        LinearLayout.LayoutParams buttonSendParameter = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        buttonSendParameter.gravity = Gravity.RIGHT|Gravity.BOTTOM;
        buttonSend.setLayoutParams(buttonSendParameter);
        buttonSend.setId(objectCounter++);
        buttonSend.setGravity(Gravity.RIGHT|Gravity.BOTTOM);
        buttonSend.setBackgroundResource(R.drawable.background_button);
        buttonSend.setBackgroundResource(R.drawable.button_send);

        row1.addView(buttonOption1);
        row1.addView(buttonOption2);
        row2.addView(buttonOption3);
        row2.addView(buttonOption4);
        choiceTableLayout.addView(row1);
        choiceTableLayout.addView(row2);
        choiceLayout.addView(button1);
        choiceLayout.addView(choiceTableLayout);
        choiceLayout.addView(buttonSend);

        setContentView(choiceLayout);

        buttonOption1.setOnClickListener(this);
        buttonOption2.setOnClickListener(this);
        buttonOption3.setOnClickListener(this);
        buttonOption4.setOnClickListener(this);
        buttonSend.setOnClickListener(this);
    } 
```

日食中的错误：

09-21 12:41:09.062: E/AndroidRuntime(758): java.lang.ArithmeticException: 除以零

我认为它与拉伸柱有关。

我的问题是：如何在 android 中纠正这个问题，使布局如图所示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:05:58.430

更改此行

```
LinearLayout.LayoutParams buttonLayout = 
             new LinearLayout.LayoutParams(0, LayoutParams.WRAP_CONTENT, 1.0f); 
```

至

```
TableRow.LayoutParams buttonLayout = 
             new TableRow.LayoutParams(LayoutParams.FILL_PARENT, 
                                       LayoutParams.WRAP_CONTENT); 
```

当您扩展所有字段时，我觉得不需要 weight 参数。与 FILL_PARENT 相同

# java - 在 Tomcat 上部署应用程序时出现 NoSuchMethodException/SAXParseException

> ID：12531634
> 
> 赞同：0
> 
> 时间：2012-09-21T13:34:16.447
> 
> 标签：java, hibernate, primefaces, jersey

我的项目正在使用 Java、Jersey、MyfacesCODI、primefaces、Hibernate。在这种环境中，当我在 Tomcat 中部署我的项目时，出现错误提示

```
java.lang.NoSuchMethodException: 
    org.apache.catalina.deploy.WebXml addResourceEnvRef 
```

和

```
org.xml.sax.SAXParseException; 
systemId: jndi:/localhost/School/WEB-INF/web.xml;
lineNumber: 13;
columnNumber: 22;
Error at (13, 22) :
   org.apache.catalina.deploy.WebXml addResourceEnvRef 
```

可能是什么问题？有任何与环境相关的问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T15:10:26.963

通常你可以简单地添加

`<WatchedResource>your project/target/classes</WatchedResource>`

到你的 tomcat 服务器 context.xml 文件来解决这个问题。但是由于某种原因它并不总是有效。所以这里有另一个解决方案：

然后添加`<Loader delegate="true" />`到你的 tomcat 服务器 context.xml 可能也可以解决这个问题。

# shell - 多次访问shell脚本

> ID：12531637
> 
> 赞同：0
> 
> 时间：2012-09-21T13:34:20.120
> 
> 标签：shell

我正在使用 PHP 中的 shell 命令将 doc 文件转换为 pdf。每个用户都可以随时将其文件转换为 PHP。是否有可能多个用户可以同时访问我的转换器来转换他们的文件？

我在专用服务器上使用 CENTOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:15:55.117

让我们定义您的 php 转换实用程序的可能层。

```
 terminal # user enters commands here, sees output

      shell  # the terminal automatically starts a shell process
             # so users can type commands and get work done

          /path/to/your/conversion/tool.php  doc1.doc doc1.pdf 
             # here is the user, accessing your script. 
             # one solution to conversions is to allow for 1 input and 1 ouput file
             # I have done that to keep things simple, your solution may be different

             phpcode shell("externalconverter", "doc1.doc","doc1.pdf", "/path/to/tmpWrkSpace"?)                 
             # again, a guess, your php is asking to execute a external command
             # and we're passing the arguments

                  "externalconverter" "doc1.doc" "doc1.pdf"  tmp="/path/to/tmpWrkSpace" 
                  # again, a guess 
```

因此，这取决于您或 exteranlconverter 是否创建任何具有静态（或非唯一）名称的临时文件。即 2 个用户同时使用不同的文件名启动程序，是否创建了任何具有完全相同名称的临时文件？可能不会，但确实会发生这种事情，值得提前检查。

为了确认你是安全的，设置一个带有 2 个终端窗口的测试，提前输入两个命令，使用专门为此测试创建的 .doc 文件，没关系，同时执行两个命令（尽可能快尽可能）。您将需要一个足够大（或在任何情况下）的文件以花费很长时间来处理您确定两个文件正在同时处理。

一般来说，假设是 Linux/Unix 操作系统，大多数程序都允许同时运行多个副本。但测试是你最好的防御。

如果这不能回答您的问题，请考虑使用上述大纲来编辑您的问题，以向我们展示您的转换工具中元素的层次结构。

IHTH。

# r - R使用查找表

> ID：12531639
> 
> 赞同：1
> 
> 时间：2012-09-21T13:34:25.230
> 
> 标签：r, dataframe, lookup-tables

我正在尝试找出一种优雅的方式来执行以下操作：

我有两个数据框：

`multipFactors`：

```
structure(list(Library = c("FT259", "EL259", "FT261", "EL261", 
"FT325", "EL325"), Vol = c(2.5, 1, 2.5, 1, 2.5, 1), Dfactor = c(5000L, 
1000L, 5000L, 1000L, 5000L, 1000L)), .Names = c("Library", "Vol", 
"Dfactor"), row.names = c(NA, 6L), class = "data.frame") 
```

和`concvals`

```
structure(list(FT265 = c(1.87143067658684, 6.42164423157045, 
3.2067011263946, 38.6127973672561, 31.413779293588, 35.5528208255031
), EL265 = c(17.1144442552411, 17.3273656558687, 14.7909715401529, 
NaN, NaN, NaN), FT325 = c(35.3550952814249, 37.9458212939415, 
29.8197141318635, 35.1760971346751, 36.7065424286613, 42.9943003679566
), wellid = structure(c("A1", "B1", "C1", "D1", "E1", "F1"), .Dim = c(6L, 
1L))), .Names = c("FT265", "EL265", "FT325", "wellid"), row.names = c(NA, 
6L), class = "data.frame") 
```

我试图找到一种方法来根据列名`Dfactor`从中选择正确的并乘以适当的. 乘法既可以在原地完成，也可以在新的数据框中完成，我不介意。 `multipFactors``concvals``concvals['FT325']``Dfactor`

有没有一种“R”的方式来做这样的事情，或者它会是一个循环的机会？

抱歉 - 仅看示例，`DFactor`它不是 R 意义上的因子，它是稀释因子的缩写，实际上是一个数字。在此示例中，看起来只有两个稀释因子（5000、1000），但可能还有其他稀释因子。抱歉，不清楚。

谢谢H

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:57:59.090

这应该有效：

```
mapply("*", concvals[multipFactors$Library], multipFactors$Dfactor) 
```

# asp.net-mvc-3 - 如何在我的所有视图上获得服务堆栈会话？

> ID：12531644
> 
> 赞同：3
> 
> 时间：2012-09-21T13:34:41.580
> 
> 标签：asp.net-mvc-3, session, servicestack

我目前正在构建一个带有 servicestack Web 应用程序的 mvc3。我正在使用 servicestack 凭据身份验证并使用 servicestack 会话。

我已经知道我可以通过以这种方式在 ViewBag 中检索和设置会话来访问视图中的会话：

```
public partial class HomeController : ControllerBase {
    public virtual ActionResult Index() {
        ViewBag.UserSession = base.UserSession;
        return View();
    }   
} 
```

我真的不想在我的每个方法中重复这段代码，我正在寻找一种在我的视图中访问会话的通用方法，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:01:52.237

如果您有机会更改视图的基类，您可以从[基础 ServiceStack MVC Controller](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ServiceStackController.cs#L62-66)复制代码，例如：

```
protected object userSession;
protected TUserSession SessionAs<TUserSession>()
{
    return (TUserSession)(userSession ?? (userSession = Cache.SessionAs<TUserSession>()));
} 
```

[ServiceStack.ServiceInterface 命名空间](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/SessionExtensions.cs#L171)`ICacheClient.SessionAs<T>`中的扩展方法在哪里。但是，如果您没有机会使用自定义基类，则对类型化会话的完全限定访问是：

```
EndpointHost.AppHost.TryResolve<ICacheClient>().SessionAs<TUserSession>(); 
```

还要确保您安装了最新版本的 ServiceStack。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-28T03:45:21.897

使用[servicestack v4](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Mvc/ServiceStackController.cs)并根据我对[这个答案的理解](https://stackoverflow.com/a/27673118/329367)

我有以下**CustomWebViewPage**允许我在我的视图中使用**UserSession ：**

```
public abstract class CustomWebViewPage : WebViewPage
{
    private IServiceStackProvider _serviceStackProvider;
    public virtual IServiceStackProvider ServiceStackProvider
    {
        get
        {
            return _serviceStackProvider ?? (_serviceStackProvider =
                new ServiceStackProvider(new AspNetRequest(base.Context)));
        }
    }

    private object _userSession; // Cache locally
    private TUserSession SessionAs<TUserSession>()
    {
        //ServiceStackProvider.SessionAs<T> always gets the Session from the ICacheClient
        return (TUserSession)(_userSession ?? (_userSession = ServiceStackProvider.SessionAs<TUserSession>()));
    }
    //I have strongly-typed as IAuthSession for now, until I see a need to add my own Custom Session
    protected IAuthSession UserSession
    {
        get { return SessionAs<IAuthSession>(); }
    }

    public virtual bool IsAuthenticated
    {
        get { return ServiceStackProvider.IsAuthenticated; }
    }
}

public abstract class CustomWebViewPage<TModel> : WebViewPage<TModel>
{
    //EXACTLY the same as above...
} 
```

# nuget - 使用具有特定框架版本的 NuGet 安装包

> ID：12531645
> 
> 赞同：10
> 
> 时间：2012-09-21T13:34:48.480
> 
> 标签：nuget, nuget-package

每次我想用 NuGet 安装一个包时，根据包的不同，安装了很多不同版本的包。

例如，如果我尝试安装 Ninject，当我转到文件夹“packages/Ninject/lib”时，我为库的创建者支持的每个版本的框架都有一个文件夹。

![在此处输入图像描述](../Images/4f85b429f247979372e1bfb501a338ec.png)

我是否必须手动删除所有我不想要的文件夹，或者是否有任何功能可以防止创建与我的项目具有不同框架版本的文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:31:49.877

NuGet 包始终完全提取到磁盘上。在安装到特定项目时，我们会参考对您的项目重要的项目。我们没有花时间只解压缩正在安装的项目所需的内容，因为大多数人不会将他们的包提交到源代码控制（[http://docs.nuget.org/docs/workflows/using-nuget-without-提交包](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)）。此外，硬盘空间很便宜:)。

# haproxy - 新贵工作（代理）

> ID：12531648
> 
> 赞同：3
> 
> 时间：2012-09-21T13:35:08.320
> 
> 标签：haproxy, upstart

我正在使用以下命令启动 HA 代理：
**sudo etc/init.d/haproxy start**
并使用以下命令停止 HA 代理：
**sudo etc/init.d/haproxy stop**

如何为 sudo etc/init.d 编写基本的新贵脚本/某事开始或停止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:36:12.677

以下脚本将起作用。把它放在“/etc/init/haproxy.conf”中，然后就可以用“service haproxy start”启动haproxy服务了。一定要检查配置文件的位置

```
# HAProxy 

description     "HAProxy"

start on runlevel [2345]
stop on runlevel [016]

respawn
respawn limit 2 5

env CONF=/etc/haproxy/haproxy.cfg

pre-start script
    [ -r $CONF ]
end script

exec /usr/local/sbin/haproxy -db -f $CONF 
```

# wcf - 无法从 Azure 网站连接到 Azure 服务管理 API

> ID：12531650
> 
> 赞同：1
> 
> 时间：2012-09-21T13:35:09.317
> 
> 标签：wcf, azure, wcf-binding, azure-web-app-service

我正在尝试连接到 Azure 服务管理 API（这是一个带有证书的 WCF https 调用）。获取“**无法使用权​​限‘management.core.windows.net’为 SSL/TLS 建立安全通道。**内部异常：**请求被中止：无法创建 SSL/TLS 安全通道。** ”错误

我尝试了互联网上建议的以下设置：

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;
ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, sslPolicyErrors) => true; 
```

证书作为通过字节数组序列化的对象附加。它不在证书存储中，因此从证书存储读取它没有权限问题。

这是我们 web.config 的 system.serviceModel 中的相关部分

```
<bindings>
      <webHttpBinding>
        <binding name="WindowsAzureServiceManagement_WebHttpBinding" closeTimeout="00:05:00" openTimeout="00:05:00" receiveTimeout="00:10:00" sendTimeout="00:10:00">
          <readerQuotas maxStringContentLength="10000000" maxBytesPerRead="10000000" />
          <security mode="Transport">
            <transport clientCredentialType="Certificate" />
          </security>
        </binding>
      </webHttpBinding>
</bindings>
<client>
    <endpoint address="https://management.core.windows.net" 
                        binding="webHttpBinding" 
                        bindingConfiguration="WindowsAzureServiceManagement_WebHttpBinding" 
                        contract="AzureWatch.WindowsAzure.ServiceManagement.IServiceManagement" 
                        name="WindowsAzureEndPoint" />
  <endpoint address="https://api.authorize.net/soap/v1/Service.asmx" binding="basicHttpBinding" bindingConfiguration="ServiceSoap" contract="Service.ServiceSoap" name="ServiceSoap" />
</client> 
```

有什么建议么？

# jquery - 打开新模式时如何隐藏 Bootstrap 以前的模式？

> ID：12531653
> 
> 赞同：36
> 
> 时间：2012-09-21T13:35:10.230
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我有这样的麻烦：我有使用 Bootstrap 模态进行的身份验证。

当用户打开登录模式时，他可以去注册模式（或其他）。所以，我需要关闭前一个。

现在我像这样关闭它们：

```
$(document).ready(function(){
  $("a").click(function() {
  $("#login").hide();
  $("#sign_up").hide();
 })  
}); 
```

但是当我这样做时 - 在我刷新页面之前，我无法重新打开登录模式（点击从登录中注册后）。

**有人可以建议如何检查我单击链接的模式并在调用另一个模式时关闭它？有没有通用的方法来关闭以前的模式？**

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-09-21T13:51:44.883

您可以通过以下方式隐藏 Bootstrap 模态：

```
$('#modal').modal('hide'); 
```

说`$().hide()`使匹配的元素不可见，但就模态相关的代码而言，它仍然存在。[请参阅Modals 文档](http://getbootstrap.com/2.3.2/javascript.html#modals)中的方法部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-10T22:52:36.800

切换两种模式

```
$('#modalOne').modal('toggle');
$('#modalTwo').modal('toggle'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-24T22:18:51.853

我能做的最好的就是

```
$(this).closest('.modal').modal('toggle'); 
```

这将获取包含您触发事件的 DOM 对象的模态（猜测您正在单击一个按钮）。获取最近的父 '.modal' 并切换它。显然只有效，因为它在您单击的模式内。

但是，您可以这样做：

```
$(".modal:visible").modal('toggle'); 
```

这将获取正在显示的模式（因为您一次只能打开一个），并触发“切换”如果没有“：可见”，这将无法工作

# c# - 无法加载不在应用程序文件夹中的图像

> ID：12531655
> 
> 赞同：0
> 
> 时间：2012-09-21T13:35:15.397
> 
> 标签：c#, asp.net-mvc, image-loading

我在显示不在应用程序文件夹中而是在 C:\tmp\Somename\somepic.jpg 中的图像时遇到问题我一直在搜索和尝试，但无济于事。

到目前为止我所拥有的（我认为与这个问题有关）是：在控制器中

```
public ActionResult Edit(int? id)
{
    if (id.HasValue)
    {
        var model = GetItems(id.Value);

        ViewBag.Images = Directory.GetFiles(WebConfigurationManager.AppSettings["itemPath"] + model.ContentId.ToString().Substring(0, 3) + "\\", model.ContentId + "*.jpg");
        return View(model);
    }

    return View("Notfound", "Home");
} 
```

并且在视图中

```
<div class="row">
@foreach (var item in ViewBag.Images)
{
    <img src="@Url.Content(item)" alt="hello"/>

} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:42:34.873

该问题似乎是由在 URL 中使用绝对文件路径引起的，例如

```
<img src="c:\tmp\myimage.jpg" /> 
```

这不起作用，原因有以下三个：

*   URI 使用斜杠，而不是反斜杠
*   浏览器通常不知道如何使用它不理解的协议来处理 url（尽管为方便起见，它们确实支持在浏览器中输入时显示本地文件）
*   当用户打开此类网页时，浏览器将导航到其本地计算机上的文件，而不是 Web 服务器上的文件。浏览器禁止这样做，因为这是一个巨大的安全漏洞。

这也包含在[src 绝对路径问题中](https://stackoverflow.com/questions/5157772/src-absolute-path-problem)

# c# - 服务器端分页和排序最佳实践？

> ID：12531660
> 
> 赞同：6
> 
> 时间：2012-09-21T13:35:33.483
> 
> 标签：c#, jquery, asp.net-mvc-2, jqgrid, jqgrid-asp.net

我正在使用以下方法来获取我的 jqgrid 子网格的数据，并且它的工作完全正常。

请注意，此方法用于实现服务器端排序和分页。

现在我的查询就像您在该行中看到的那样

`List<SomeEntity> myList = _service.GetSomeData(id);`这里进行了数据库调用并获取了所有记录。

所以我不是很确定，所以我只是想知道这是否符合实现服务器端分页的最佳实践和

```
public JsonResult GetData(string folderId, string sidx, string sord, int page, int rows) {
    int id = int.Parse(folderId);
    List < SomeEntity > myList = _service.GetSomeData(id);

    const int pageSize = 5;

    // total
    double totalPages = Math.Ceiling((double) myList.Count() / pageSize);

    // sort
    if (sord == "asc") {
        myList = myList.OrderBy(m = > m.Name).ToList();
    }
    else {
        myList = myList.OrderByDescending(m = > m.Name).ToList();
    }

    // paging
    myList = myList.Skip((page - 1) * pageSize).Take(pageSize).ToList();

    var jsonData = new {
        total = totalPages, records = domainList.Count, page,

        rows = myList
    };

    return Json(jsonData, JsonRequestBehavior.AllowGet);
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:03:06.323

看起来您正在从服务 (_service) 返回所有数据，然后对结果进行分页。此外，看起来您每次发出寻呼请求时都会发出相同的请求。如果属实，那么我认为这是低效的。

您的服务 (_service) 应该处理 Take 和 Skip 功能（作为参数传递），从而减少通过网络获取和发送的记录数量。您没有发布 GetSomeData(id) 方法的代码。它是返回 IEnumerable 还是 IQueryable？这也将对性能/效率产生影响。

我希望我没有误解您的代码或问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:12:08.877

您的主要问题是您将结果分配给`_service.GetSomeData(id)`to `List<SomeEntity>`。无论如何，您应该使用`ObjectQuery<SomeEntity>`或`IQueryable<SomeEntity>`（取决于使用的数据库技术）能够**在 SQL Server 端**使用排序和配对。您当前的代码只是获取所有数据，然后对其进行排序并在下一条语句中获取所需的页面。我可以建议您查看答案中的代码[或](https://stackoverflow.com/a/5501644/315935)[另一个答案](https://stackoverflow.com/a/10871428/315935)中的最新代码，更多示例如何为 jqGrid 实现数据的排序、分页和过滤。

# .net - 超过 8192 的错误请求内容长度未达到 WCF

> ID：12531665
> 
> 赞同：0
> 
> 时间：2012-09-21T13:35:59.730
> 
> 标签：.net, rest, iis, iis-6

我们有一个托管 2 个网站的服务器（IIS 6.0）

一个是代理，另一个是 WCF RESTful API

现在的问题是，当代理网站访问内容长度超过 8000 的 API 时，例如前 9747 或 8398，它会在代理中给出 400 Bad request，而在 API 中，这就是它发生的情况。

未调用 WCF Dispatcher Before Call

WCF Dispatcher BeforeSendReply 被调用，内容长度为 0。

我们在绑定中有这个配置

```
<webHttpBinding >
<binding name="binding1" closeTimeout="00:01:00" openTimeout="00:01:00"
        receiveTimeout="00:10:00" sendTimeout="00:01:00" maxBufferSize="73400320"
        maxBufferPoolSize="73400320"
        maxReceivedMessageSize="73400320"
        transferMode="Buffered"
        useDefaultWebProxy="true">
          <readerQuotas maxDepth="73400320" maxStringContentLength="73400320"
           maxArrayLength="73400320" maxBytesPerRead="73400320" maxNameTableCharCount="73400320" />
          <security mode="None">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
</webHttpBinding> 
```

可以做什么，我猜是内容长度问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:27:31.767

我错过了将 binding1 添加到端点中的 bindingConfiguration

```
<endpoint address="" binding="webHttpBinding" bindingConfiguration="binding1"
                  contract="RESTService.IService" behaviorConfiguration="web"> 
```

# tfs - 如何自定义 TFS 2012 Web 访问欢迎页面？

> ID：12531667
> 
> 赞同：2
> 
> 时间：2012-09-21T13:36:18.397
> 
> 标签：tfs

tfs 2012 Web 访问欢迎页面包含指向管理网站的链接。链接标题为“Administer Team Foundation Server”，网址为`http://<server>:8080/tfs/_admin`.

我想从欢迎页面中删除此链接，因为我不希望 tfs 用户在管理站点周围闲逛。虽然用户实际上无法编辑任何内容，但他们可以看到一些我希望保持隐藏的安全设置。

是否可以自定义欢迎页面（即删除管理员链接），如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:44:54.640

你不能，不直接编辑 html 页面。如果你想走这条路，你可以在你的 TFS 服务器、应用层上找到它们。

但是，你为什么要首先这样做呢？你的开发人员会做什么？

# gcc - Makefile.am 中 --static 和 -static LD_FLAGS 的区别

> ID：12531670
> 
> 赞同：3
> 
> 时间：2012-09-21T13:36:31.433
> 
> 标签：gcc, linker, makefile, static-libraries

我正在调试一个库链接问题，我遇到了一些我没想到的东西。这是问题所在。我正在使用构建工具来生成我的 Makefile，所以我只需要编写 Makefile.am。最终目标是构建一个共享库（**srv.so**）。我想静态链接一些库，所以我想使用“静态”标志到 LD。我的 Makefile.am 有这样的 LD_FLAGS

```
srv_la_LDFLAGS= -module -avoid-version 
```

现在，当我添加“静态”标志时，它变成了我们有 2 种单独的解释

**第一**

```
srv_la_LDFLAGS= -module -avoid-version -static /path/to/lib.a 
```

**第二**

```
srv_elastica_la_LDFLAGS= -module -avoid-version --static /path/to/lib.a 
```

**注意--static**和**-static**之间的区别。

第**一个**生成运行**ar**的链接器行并尝试生成**srv.a**而不是**srv.so**

```
/bin/bash ../../libtool --tag=CC   --mode=link gcc -I../../include/  
-Wno-unused-label     -DMONGO_HAVE_STDINT   -g -O2 -Wall -D_REENTRANT -g -O2 -Wall 
-DCI_BUILD_MODULE -I/usr/local /c_icap/include/c_icap -module -avoid-version -z defs 
-static /usr/local/lib/libmongoc.a  -o srv.la -rpath /usr/local/lib/c_icap_modules 
 srv_la-srv.lo -lrt -lcre2 -lre2 -lcurl -lpthread -lbson 

*** Warning: Linking the shared library srv_elastica.la against the
*** static library /usr/local/lib/libmongoc.a is not portable!
libtool: link: ar cru .libs/srv.a /usr/loc/lib/libmongoc.a                     
.libs/srv_la-srv.o 
```

而**第二**个生成正确的链接器行（-shared ）以输出**srv.so**

```
/bin/bash ../../libtool --tag=CC   --mode=link gcc -I../../include/ -Wno-unused-label  
-DMONGO_HAVE_STDINT   -g -O2 -Wall -D_REENTRANT -g -O2 -Wall -DCI_BUILD_MODULE -I/usr
/local/c_icap/include/c_icap -module -avoid-version -z defs --static /usr/local
/lib/libmongoc.a  -o srv.la -rpath /usr/local/lib/c_icap_modules srv_la-srv.lo
-lrt -lcre2 -lre2 -lcurl -lpthread -lbson 

*** Warning: Linking the shared library srv_elastica.la against the
*** static library /usr/local/lib/libmongoc.a is not portable!
libtool: link: gcc -shared  -fPIC -DPIC  .libs/srv_la-srv.o
/usr/local/lib/libmongoc.a -lrt -lcre2 -lre2 /usr/lib/x86_64-linux-gnu/libcurl.so 
-lpthread -lbson  -O2 -O2   -Wl,-soname -Wl,srv.so -o .libs/srv.so 
```

**这有点奇怪。这种类型的ld**的联机帮助页上没有提到任何内容。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:21:42.447

测试库从您的构建测试库中请求静态库。它应该在 Makefile.am 中定义如下

```
srv_elastica_la_LDFLAGS= -module -avoid-version --static -L/path/to/lib_test_name -llib_test_name 
```

如果您在 name_LDFLAGS 中声明 -static 标志。我们定义 -static 是为了链接项目上的动态库。

# javascript - Greasemonkey 提交登录表单但未填写用户名和密码？

> ID：12531674
> 
> 赞同：2
> 
> 时间：2012-09-21T13:36:38.810
> 
> 标签：javascript, firefox, greasemonkey, autologin

我想使用 Greasemonkey 脚本在页面中提交表单。表单中的名字和密码被火狐记住了，所以当页面加载的时候，名字和密码就已经填好了。所以只想提交自动登录。

表格代码：

```
<form class="enableAutoFocus" method="post" id="login_form" action="http://localhost/plan/login_form">
    <div id="login-form">
        <input name="came_from" value="" type="hidden">
        <input name="next" type="hidden">
        <input name="ajax_load" type="hidden">
        <input name="ajax_include_head" type="hidden">
        <input name="target" type="hidden">
        <input name="mail_password_url" type="hidden">
        <input name="join_url" type="hidden">
        <input name="form.submitted" value="1" type="hidden">
        <input name="js_enabled" id="js_enabled" value="0" type="hidden">
        <input name="cookies_enabled" id="cookies_enabled" value="" type="hidden">
        <input name="login_name" id="login_name" value="" type="hidden">
        <input name="pwd_empty" id="pwd_empty" value="0" type="hidden">
        <div class="field">
            <label for="__ac_name">Login Name</label>

            <input style="margin-right: 0px; padding-right: 0px;" size="15" name="__ac_name" value="" id="__ac_name" type="text"><img title="Max field length is unknown" style="position:relative; z-index: 999; cursor:pointer; vertical-align: bottom; border: 0; width: 14px; height: 19px; display:none;" class="ife_marker" src="chrome://informenter/skin/marker.png" id="__ac_name_ife_marker_1">
    </div>
    <div class="field">
            <label for="__ac_password">Password</label>
            <input style="margin-right: 0px; padding-right: 0px;" size="15" name="__ac_password" id="__ac_password" type="password"><img title="Max field length is unknown" style="position:relative; z-index: 999; cursor:pointer; vertical-align: bottom; border: 0; width: 14px; height: 19px; display:none;" class="ife_marker" src="chrome://informenter/skin/marker.png" id="__ac_password_ife_marker_2">
    </div>
        <div class="formControls">
            <input class="context" name="submit" value="Log in" type="submit">
        </div>
    </div>
</form> 
```

在页面上，第一个表单是一个搜索表单，所以我首先尝试了`document.forms[0].submit();`
它的工作原理。

然后我将代码更改为：

```
document.forms[1].submit(); 
```

错误控制台报告：

```
Error: document.forms[1].submit is not a function 
```

然后我搜了一下，找到了下面的代码，试了一下。

```
function ClicktheButton(obj) {
var evt = document.createEvent("MouseEvents");
evt.initMouseEvent("click", true, true, window,
  0, 0, 0, 0, 0, false, false, false, false, 0, null);
 var canceled = !obj.dispatchEvent(evt);      
 }
 var StupidButton = document.querySelector('input[type="submit"][value="Log in"]');
 ClicktheButton(StupidButton); 
```

点击功能有效，但名称和密码为空，所以不接受登录。

有人可以做一些解释和帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:25:31.303

浏览器填写用户名和密码需要一点时间。
当页面第一次加载并且 Greasemonkey 脚本触发时，它们在那一刻仍然是空白的。

因此，您需要等待这些字段被填写。像这样的东西：

```
var numIntervals    = 0;    
var pwFilledTimer   = setInterval ( function () {
        var usrNameInp  = document.getElementById ("__ac_name");
        if (usrNameInp  &&  usrNameInp.value != "") {

            var passWrdInp  = document.getElementById ("__ac_password");
            if (passWrdInp  &&  passWrdInp.value != "") {

                clearInterval (pwFilledTimer);

                var submitButton = document.querySelector (
                    'input[type="submit"][value="Log in"]'
                );
                var clickEvent  = document.createEvent ('MouseEvents');
                clickEvent.initEvent ('click', true, true);
                submitButton.dispatchEvent (clickEvent);
            }
        }
        numIntervals++;
        if (numIntervals > 10) {
            /*--- Stop the timer after about 2 seconds so it doesn't 
                interfere with manual logins.
            */
            clearInterval (pwFilledTimer);
        }
    },
    200
); 
```

# java - 非常大的堆大小，但使用的内存很小

> ID：12531679
> 
> 赞同：1
> 
> 时间：2012-09-21T13:36:50.587
> 
> 标签：java, memory, garbage-collection, heap-memory

我在我的应用程序中看到非常大的堆大小，但使用的内存非常小：

堆大小：10 GB+，已用内存：500 MB

这是什么解释？为什么堆大小没有减少。 [![内存图](../Images/7b83891a71c53a73f1c4c2104541412b.png)](https://i.stack.imgur.com/g8rfD.png)

我的java内存参数如下：

> -Xms8448m -Xmx12544m -XX:PermSize=192m -XX:MaxPermSize=256m -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=60

请指教，为什么会出现这种奇怪的行为。我可以在图中看到已用内存被垃圾收集，但是堆内存有什么问题？？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:40:12.460

参数中的初始堆大小

```
-Xms8448m 
```

超过8GB。此外，该

```
-Xmx12544m 
```

允许 JVM 让它增长到超过 12GB，如果内存可用并且感觉这是最好的堆大小，它可能会这样做并且永远不会释放它。规范中根本没有说 JVM 应该尽量保持堆大小很小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T10:40:04.723

HotSpot JVM 中的堆大小永远不会下降。尽管一些 GC 算法可以将内存还给操作系统。但是在以后的情况下，JConsole 不会显示内存减少（在 JConsole 中，您会看到为堆保留的地址空间范围），您应该使用 OS 进程内存监控来查看 JVM 实际释放内存。

可以将未使用的内存还给操作系统的算法是

*   串行收集器（-XX:+UseSerialGC）
*   G1 (-XX:+使用G1GC)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:41:16.107

删除上面的 -Xms8448m 。它指定初始堆大小。如果您删除它，它应该可以按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:41:42.867

您将初始堆大小指定为 ~8.5GB，使用`-Xms8448m`. java 的一些实现不支持实际缩小堆（通常由于系统限制）。减小该值以获得更小的初始堆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T13:52:13.063

JVM 将启动时的最大堆大小保留为虚拟内存。该内存中有多少是主内存取决于使用了多少。

当您设置最小内存时，它并不能保证它会被使用，但它只会进行最少的尝试来限制内存使用量。

> 但是为什么堆大小几乎是 12 GB？

这就是你设置的。

# jquery - 我可以只使用 CSS 来更改每个单词首字母的颜色和字体大小吗

> ID：12531680
> 
> 赞同：5
> 
> 时间：2012-09-21T13:37:01.413
> 
> 标签：jquery, css

与问题标题一样，是否可以更改每个单词首字母的颜色和字体大小。例如，如下图所示：

![在此处输入图像描述](../Images/6fb9cc1e7ad927a7faf4a064c8b77689.png)

是否可以*仅使用*CSS 执行此操作？我可以使用 jQuery，但前提是不能使用纯 CSS 或 CSS3 解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T13:39:17.177

您可以使用以下 CSS 生成每个单词都大写的小型大写文本：

```
h1 {
    font-variant: small-caps;
    text-transform: capitalize;
} 
```

但是你不能单独使用 CSS 来改变首字母的颜色；您将不得不使用 jQuery 将`span`元素添加到您的文本中，然后设置这些元素的样式。像这样的东西：

```
$('h1').html(function() {
    // Very crude regex I threw together in 2 minutes
    return $(this).text().replace(/\b([a-z])/gi, '<span class="caps">$1</span>')
}); 
```

使用这个 CSS：

```
h1 {
    font-variant: small-caps;
    text-transform: capitalize;
}

h1 .caps {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:44:17.923

[**JSFiddle**](http://jsfiddle.net/wjF2S/)

干得好 -

```
<p class="each-word">First letter of every word is now red!</p>

.first-letter {
    color: red;
  }

window.onload = function(){
  var elements = document.getElementsByClassName("each-word")
  for (var i=0; i<elements.length; i++){
    elements[i].innerHTML = elements[i].innerHTML.replace(/\b([a-z])([a-z]+)?\b/gim, "<span class='first-letter'>$1</span>$2")
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:39:41.070

使用 psedo-element `:first-letter`，例如：

```
.word:first-letter
{ 
   font-size:200%;
   color:#8A2BE2;
} 
```

正如评论所暗示的，这需要每个单词都在自己的元素中，例如。`<span>`

但这是你越接近 OP 在纯 CSS 中想要的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:45:54.053

HTML

```
<h1>The title of this page goes here</h1>​ 
```

jQuery

```
$(document).ready(function() {
var words = $('h1').text().split(' ');
var html = '';
$.each(words, function() {
    html += '<span style="font-size:200%">'+this.substring(0,1)+'</span>'+this.substring(1) + ' ';
    });
    $('h1').html(html);
});​ 
```

**[JSFIDDLE](http://jsfiddle.net/hCvsu/1/)**

# r - 如何通过 SSH 从 R 查询 SAS

> ID：12531681
> 
> 赞同：5
> 
> 时间：2012-09-21T13:37:01.643
> 
> 标签：r, ssh, sas

我想从 R 中查询一个 SAS 数据库并将数据返回到 R，我必须通过 SSH 连接到 SAS 数据库。我该如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:41:39.230

要使用 ssh 执行此操作，您可以尝试运行一个远程命令，将结果“管道”（即发送到标准输出）返回 ssh 客户端。让 R 直接捕获这些结果，或者使用操作系统将它们通过管道传输到文件，然后将它们导入 R。

如果远程计算机正在运行 SAS，这应该更容易，因为您只需执行 sas 并告诉它将结果打印到标准输出。

所以你的命令看起来像这样：

```
C:\Progra~1\ICW\bin\ssh.exe servername -l username -i c:\id_rsa " sas -sysin myquery.sas " > results.txt 
```

上面调用远程系统上的 sas 并告诉它运行一个名为 myquery.sas 的 sas 程序。使该查询将结果打印到标准输出，然后将其返回给客户端。客户端将所有结果保存到 results.txt 中，然后您可以使用 R 将其导入。

抱歉，我不知道 R，所以我无法帮助您处理代码的 R 部分。如果其他人确实可以随意编辑/添加到此。

# batch-file - 让任务调度程序在共享目录上执行批处理文件

> ID：12531682
> 
> 赞同：0
> 
> 时间：2012-09-21T13:37:05.277
> 
> 标签：batch-file, scheduled-tasks, scheduler, shared-directory

我想知道是否有人知道任务调度程序不会在共享目录上执行批处理的问题。

我知道的唯一方法是创建一个具有用户名和密码访问权限的方法，但是因为我没有我维护的 17 台电脑中的任何一台（用户隐私）的这些详细信息，如果我以系统权限运行任务，我必须找到另一种方法它不会运行位于共享目录上的批处理。

我还尝试查看链接到批处理的快捷方式是否会欺骗系统，或者调用这些 hared 目录上的原始批处理的批处理是否可以工作，但要么失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:49:06.033

我假设“共享目录”是指网络共享，例如`//server/c/directory/whatever`.

批处理文件在网络共享方面存在问题，因为您无法将网络共享设置为您的当前目录，因为当前目录出于某种原因需要驱动器号。您可以**访问**网络共享上的数据甚至程序和批处理文件，但不能**在**网络共享中运行批处理文件。

您需要做的是将网络驱动器映射到驱动器号。您可以使用`net use`命令从命令提示符或批处理文件中执行此操作。仅在需要时才允许创建和销毁自动连接。WiFi 上的永久连接是有问题的，因为 Windows 可能会在您获得 IP 地址之前尝试（并且失败）重新连接它们。

```
:: Things inside hard bracksts [] are optional
net use [DRIVE_LETTER:] \\server\Path [/user:domain\UserName] [Password]

:: To remove that mapped drive
net use DRIVE_LETTER: /delete 
```

所以，一个例子是：

```
:: Make a 'drive' z: and connect it to \\Linda-PC\c\Downloads
::  Drive: \\Share    \Path               Domain\User   Password
net use z: \\Linda-PC\c\Downloads
net use z: \\Linda-PC\c\Downloads /user:Linda-PC\James
net use z: \\Linda-PC\c\Downloads /user:Linda-PC\James T@ste7heRainbovv

:: The same command will close any connection and remove any associated
:: drive letter. Like so:
net use z: /delete

. 
```

* * *

**`\\Linda-PC\c\Downloads`只有在不需要用户名或密码的情况下，**第 1 行**才能可靠地工作。如果`\\Linda-PC\c\Downloads` **确实**需要用户名和密码，它**可能会**提示您输入它们，它可能只是失败，或者它可能看起来连接但无法读取任何文件或目录。（除非您在两台 PC 上使用具有相同域和密码的用户名。就像网络管理员一样。）**

 ****仅当您在该 PC 上具有用户名和密码时，第 2 行**才有效（除非您的用户在两台 PC 上具有相同的域、用户名和密码。）如果您使用并登录到具有相同域的帐户，两台 PC 上的用户名和密码，它不会询问您的密码。

**仅当您在该 PC 上拥有用户名和密码时，**第 3 行才有效（除非您的用户在两台 PC 上具有相同的域、用户名和密码。）。****

 ***   **注意：****不必**在两台机器上使用相同的用户。

可以浏览和使用挂载点以外的任何子目录，尽管您可能需要在它们中传播权限，或者您可以按组或用户为每个单独的目录设置用户访问权限。除非您有权查看隐藏的文件和文件夹，否则它们将被隐藏，但仅在使用`dir /a:h`命令时才会隐藏。普通文件和文件夹属性可以通过`ATTRIB.EXE`.

您可以将许多不同的驱动器号连接到同一台机器上的许多不同的挂载点，并为它们提供所有相同或不同的用户权限和要求集。

因此，您可以连接：至：

```
 W:     \\Linda-PC\c
         X:     \\Linda-PC\c\Downloads
         Y:     \\Linda-PC\c\Users\John
         Z:     \\Linda-PC\c\Users\Public\Documents 
```

所以在合适的情况下（Windows 7 使用户权限和权限变得更加复杂），驱动器`W:`（或`\\Linda-PC\c`）可以访问整个 C: 驱动器`Linda-PC`，但只能访问管理员组上的成员`Linda-PC`。

驱动器`X:`或网络共享`\\Linda-PC\c\Downloads`，您可以授予`Read`对组的访问权限`Everyone`，从而在连接、浏览或下载文件时无需使用用户名或密码。

Drive `Y:`，或者`\\Linda-PC\c\Users\John`您可以从“Linda-PC”授予`Full-Control`用户访问权限。`John`

和云端硬盘`Z:`，或者您可以向群组访客授予读/写访问权限，并将访问权限限制为在群组中`\\Linda-PC\c\Users\Public\Documents`拥有帐户的人。`Guests``DansPc`

所有这些权限都必须在托管或*提供文件的机器上设置，并且要授予在 上***没有**帐户的组或用户的访问权限`SERVER`，该服务器必须具有对另一台机器的管理网络访问权限。因此，您可以连接用户`DansPC\Dan`访问 drive `Y:`，但必须能够交谈，并且同时让用户登录或连接到两台机器，同时对这两台机器具有管理权限`DansPc`。`Linda-PC`****

# coldfusion - 如何将 Dwolla 与 Coldfusion 一起使用？

> ID：12531687
> 
> 赞同：0
> 
> 时间：2012-09-21T13:37:19.627
> 
> 标签：coldfusion, payment-gateway, coldfusion-9, dwolla

好的，我有一个网站，之前使用过信用卡处理。以下是它如何运行的简单介绍：

用户进入页面 ----> 用户填写订单总额的表格 ----> 提交 ----> Coldfusion 到 Authorize.net 处理卡 ----> 结果返回（批准、拒绝、错误) ----> CFIF 卡已获批准，将表格中的信息输入数据库 ----> 向用户发送电子邮件收据 ----> 向用户显示订单页面 ----> 完成。

这对我来说是有道理的，这一切都发生在单击提交的单击中。

但是，当有人必须外出并在不同的站点付款时，我该如何保持这种交易的进行呢？当他们在 Dwolla 付款时，我如何阻止 CF 在“提交”之后处理所有这些步骤，我怎么知道他们已经付款？

他们没有关于 ColdFusion 的任何文档，我很想为我的站点构建它，但我只需要一个正确方向的一般点。我需要记住什么才能完成这项工作？Dwolla 的流程与我在 Authorize.net 中使用的流程有何不同？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:01:12.290

在我看来，您所描述的过程就是他们所说的“[直接提交](http://developers.dwolla.com/dev/docs/gateway#submit-directly)”

同步这一点的关键是您向它们提供回调 URL 作为参数。[看起来他们的服务向您的应用发布了成功消息](http://developers.dwolla.com/dev/docs/gateway#checkout-workflow)。

从您对流程的描述中可以看出，在付款成功之前您可能不会存储购物篮/订单。这留下了付款成功的可能性，但浏览器在返回您的网站之前崩溃/断开连接。

理想情况下，您可能会在用户外出付款之前将购物篮存储为处于“未付款”状态的订单，并且当调用此回调时，您会将其更改为“已付款”并启动您需要的任何履行流程。看起来整个 Dwolla API 都围绕着在您开始付款流程之前有一个订单 ID 的概念工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:17:03.803

整个方法应该不同。Dwolla 的异地网关可以向您的服务器发送回调和有关交易详细信息的附加 webhook 通知。

@barnyr 非常正确。正确的方法是在您从我们的 webhook 通知中收到“已处理”通知之前不处理订单。

# shopify - 如何为 API 创建的 webhook 触发测试 POST？

> ID：12531691
> 
> 赞同：1
> 
> 时间：2012-09-21T13:37:32.817
> 
> 标签：shopify, webhooks

我正在从管理面板测试我的手工 webhook，但现在我已经使用 API 创建了一个，如何启动测试 POST？

谢谢，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:10:53.630

在这一点上，我已经找到了我的问题的解决方案，经过一番挖掘后发现，您必须输入 1、2 或 3 作为信用卡号才能在我的测试店中生成订单，因此，启动我的 API 的 POST 请求创建了订单/付费 webhook。

谢谢，凯文

# facebook - 将应用程序添加为页面选项卡

> ID：12531692
> 
> 赞同：1
> 
> 时间：2012-09-21T13:37:35.137
> 
> 标签：facebook

> **可能重复：**
> [向 facebook 页面添加标签](https://stackoverflow.com/questions/1370636/adding-a-tab-to-facebook-page)

我创建了一个 Facebook 应用程序，并在“页面选项卡”选项中输入了选项卡名称以及一个 http url 和一个 https url 到我服务器上的 wordpress 页面。

一年前我用其他应用程序没有问题，但现在我无法在此处将新应用程序添加为选项卡：http: [//i.imgur.com/6CVF9.jpg](https://i.imgur.com/6CVF9.jpg)

它没有出现。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:47:15.240

[http://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL](http://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL)

# sql-server - 将新作业添加到任何其他服务器时更新一个服务器中的表

> ID：12531699
> 
> 赞同：1
> 
> 时间：2012-09-21T13:38:07.913
> 
> 标签：sql-server, sql-server-2008

我有一堆服务器和一个服务器来保存所有这些服务器的库存。

我想创建一个存储过程`Job Information`，每当将新作业添加到任何其他服务器时，它将自动更新在我的库存服务器中调用的表。

该`Job Information`表具有以下列：

```
Server Name, Job Name, Date Created , Date Modified 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:50:10.503

首先，您的每个服务器都可以访问您的库存服务器。

使用存储过程将您的作业添加到您的其他服务器。在该过程中，为您的库存服务器的插入作业编写一个额外的插入语句。

```
INSERT INTO [SERVER].[dbo].[DATABASE].[TABLENAME] (Field1,Field2) VALUES ('Field1', 'Field2'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:50:59.540

一种方法是在指向您的库存服务器的每台服务器上创建一个链接服务器。我假设您已经设置了它并且链接服务器名称是`InventoryServer`.

然后你可以在每台服务器上创建一个触发器：

```
USE msdb;
GO
CREATE TRIGGER dbo.UpdateNewJob
ON dbo.sysjobs
FOR INSERT
AS
BEGIN
  SET NOCOUNT ON;

  INSERT InventoryServer.DatabaseName.dbo.[Job Information]
    ([Server Name],[Job Name],[Date Created],[Date Modified])
    SELECT @@SERVERNAME, name, date_created, date_modified
      FROM inserted;
END
GO 
```

要更新该`Date Modified`列，您可以添加一个额外的触发器（或者您可以将逻辑组合成一个）：

```
USE msdb;
GO
CREATE TRIGGER dbo.UpdateExistingJob
ON dbo.sysjobs
FOR UPDATE
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE j
    SET [Date Modified] = i.date_modified
    FROM  InventoryServer.DatabaseName.dbo.[Job Information] AS j
    INNER JOIN inserted AS i
    ON i.name = j.name
    WHERE j.[Server Name] = @@SERVERNAME;
END
GO 
```

`InventoryServer`现在您还需要在此错误处理之上添加 - 例如，当无法访问时您想做什么？如果工作名称更改了怎么办？`job_id`（除了名称之外，您的中央库存表可能还应该包含 。）

顺便说一句，请尽量避免使用空格或其他特殊字符命名表和列 - 这只会迫使您`[square brackets]`在大多数地方使用。你觉得哪个可读性最高/最不可读？说实话：

```
[Date Modified]

DateModified

Date_Modified 
```

# java - Win32 文件属性对话框未通过 JNI 在 Java Swing 应用程序中显示

> ID：12531700
> 
> 赞同：1
> 
> 时间：2012-09-21T13:38:10.190
> 
> 标签：java, winapi, java-native-interface

我有一个 Java Swing 应用程序，其中包含一些通过 JNI 添加的本机功能。此应用程序所做的一件事是显示文件系统的树形视图。我试图编写一个小 JNI，以便在 Windows 系统上，我可以提供一个“属性...”上下文菜单项，该菜单项显示来自 Windows 的标准文件“属性”对话框。

我在互联网上搜索了执行此操作所需的 Win32 代码，并想出了这个：

```
JNIEXPORT jboolean JNICALL Java_com_foobar_showFilePropertiesDialogImpl
  (JNIEnv *env, jobject obj, jlong hwnd, jstring fileName)
{
    LPITEMIDLIST pidl;
    LPCITEMIDLIST pidlItem;
    HRESULT hr;
    IShellFolder *pFolder;
    IContextMenu *pContextMenu;
    CMINVOKECOMMANDINFO cmi;
    const wchar_t *pszFile;

    if (!coInitialized)
    {
#ifdef DEBUG
        MessageBoxW(NULL, L"Initializing COM (should happen just once)...", L"Initializing COM...", MB_OK);
#endif
        CoInitialize(NULL);
        coInitialized = true;
    }

    /* Get the name of the file. */
    pszFile = (wchar_t *)env->GetStringChars(fileName, NULL);
    if (pszFile==NULL) { /* Exception occurred */
        return JNI_FALSE;
    }

    hr = SHGetDesktopFolder(&pFolder);
    if (FAILED(hr))
    {
        env->ReleaseStringChars(fileName, (const jchar *)pszFile);
        return JNI_FALSE;
    }

    hr = pFolder->ParseDisplayName(HWND_DESKTOP, NULL, (LPTSTR)pszFile, NULL, &pidl, NULL);
    pFolder->Release();
    if (FAILED(hr))
    {
        env->ReleaseStringChars(fileName, (const jchar *)pszFile);
        return JNI_FALSE;
    }

    hr = SHBindToParent(pidl, IID_IShellFolder, (void **)&pFolder, &pidlItem);
    if (FAILED(hr))
    {
        SHFree(pidl);
        env->ReleaseStringChars(fileName, (const jchar *)pszFile);
        return JNI_FALSE;
    }

    hr = pFolder->GetUIObjectOf(HWND_DESKTOP, 1, (LPCITEMIDLIST *)&pidlItem, IID_IContextMenu, NULL, (void **)&pContextMenu);
    pFolder->Release();
    if(SUCCEEDED(hr))
    {
        ZeroMemory(&cmi, sizeof(cmi));
        cmi.cbSize = sizeof(cmi);
        if (hwnd>0)
        {
            cmi.hwnd = (HWND)hwnd;
        }
        cmi.lpVerb = "properties";
        cmi.nShow = SW_SHOWNORMAL;
        hr = pContextMenu->InvokeCommand(&cmi);
#ifdef DEBUG
        if (FAILED(hr))
        {
            wchar_t msg[2048];
            wsprintf(msg, L"InvokeCommand failed: %d - %x", SUCCEEDED(hr), hr);
            MessageBoxW(NULL, pszFile, msg, MB_OK);
        }
        else
        {
            MessageBoxW(NULL, L"InvokeCommand successful!", L"InvokeCommand Status", MB_OK);
        }
#endif
    }

    pContextMenu->Release();
    SHFree(pidl);
    env->ReleaseStringChars(fileName, (const jchar *)pszFile);

    return JNI_TRUE;
} 
```

在 Java 中，我从 EDT 运行此方法。不幸的是，*如果*未定义 DEBUG，则不会显示属性对话框。好像我定义DEBUG的话，在“InvokeCommand成功！”之后会弹出属性对话框 消息框。

我注意到的另一件事是，当未定义 DEBUG 时，我调用此方法（并且不显示属性对话框），如果我打开不同的“本机”窗口，它将*稍后*显示在应用程序中。例如，我有通过 SHFileOperation 打开本机删除对话框的代码（有效）；一旦我显示该对话框，任何最初未显示的文件属性对话框都会突然出现。

好像我在错误的线程上做事。EDT 不是我想从中显示本机窗口的线程吗？但我很困惑，因为删除对话框再次正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:45:47.260

与其手动挖掘 Shell 接口，不如尝试使用`ShellExecute()`并让操作系统为您完成繁重的工作：

```
JNIEXPORT jboolean JNICALL Java_com_foobar_showFilePropertiesDialogImpl 
  (JNIEnv *env, jobject obj, jlong hwnd, jstring fileName) 
{ 
    /* Get the name of the file. */ 
    const wchar_t *pszFile = (wchar_t *)env->GetStringChars(fileName, NULL); 
    if (pszFile==NULL) { /* Exception occurred */ 
        return JNI_FALSE; 
    } 

    int iErr = (int) ShellExecuteW((HWND)hwnd, L"properties", pszFile, NULL, NULL, SW_SHOWNORMAL);
    env->ReleaseStringChars(fileName, (const jchar *)pszFile); 

    /*
    wchar_t msg[36];
    if (iErr > 32)
        wsprintfW(msg, L"ShellExecute successful!"); 
    else 
        wsprintfW(msg, L"ShellExecute failed: %d", iErr); 
    MessageBoxW((HWND)hwnd, pszFile, msg, MB_OK); 
    */

    return JNI_TRUE; 
} 
```

# mysql - 查找缺少的序列间隙mysql

> ID：12531701
> 
> 赞同：1
> 
> 时间：2012-09-21T13:38:12.623
> 
> 标签：mysql, sequence

> **可能重复：**
> [如何在 SQL 中的组内按顺序查找缺失值？](https://stackoverflow.com/questions/727392/how-to-find-missing-value-in-sequence-within-groups-in-sql)

我有像这样的值的列

```
MAC00006300
MAC00006301
MAC00006302
MAC00006305
.....
LED00006002
...........
LED00006008
ALD18965
ALD18967
ALD18968
.......
ALD19000 
```

我需要值之间的缺失

```
MAC00006303,MAC00006304 
LET00006003 ..... LET00006007
ALD18969,ALD18970.....ALD18989

SELECT NAME, VALUE + 1
FROM testmissingexampledata  mo
WHERE   NOT EXISTS
        (
        SELECT  NULL
        FROM    testmissingexampledata mi 
        WHERE   mi.VALUE = mo.VALUE + 1
        )
ORDER BY
        VALUE; 
```

当我执行上述查询时，我只能检索下一条丢失的记录。有人可以向我建议如何检索所有丢失的记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:42:49.290

如果没有要针对的所有可能数值的列表，您将无法返回丢失的行`LEFT JOIN`。

这个查询（感觉它可能会更好/更强/更快，但它有效）会找到你的差距：

```
set @last_prefix = null;
set @last_value = null;
select result from (
    select @last_prefix, @last_value, name,
      @prefix := substring(name,1,3) as prefix,
      @value := substring(name,4) as value,
      case when @prefix = @last_prefix and @value != @last_value +1
        then concat ("gap from ", @prefix, ": ", @last_value+1, " to ", @value-1)
        else "ok" end as result,
      @last_prefix := @prefix, @last_value := @value
      from t20120921
) foo
where result != "ok"; 
```

# c# - 使用 Jquery 在转发器中动态查找控件

> ID：12531703
> 
> 赞同：2
> 
> 时间：2012-09-21T13:38:16.967
> 
> 标签：c#, javascript, jquery, asp.net

我很难在我的转发器控件中找到文本框值。单击按钮时，我需要获取与单击的按钮内部的文本框相对应的文本框值。

所以我有 ：

Textbox1 ---> 必须与 Button1 绑定 TextBox2 ----> 与 Button2 绑定

```
<span>Question :</span><span>my second content <br /></span><span>Answer : </span><input name="ctl00$MainContent$ctl00$ctl00$TextArea" type="text" id="MainContent_ctl00_TextArea_0" value="6454" /> 
```

添加问题

* * *

问题：abcddf
答案：添加问题

现在我有 jquery 函数，它被点击：

```
 $(".addAnswerButton").click(function () {

        //var quantityBox = $("#TextArea", $(this).parent());
        var tr = $(this).closest("text")
        alert(tr.val());
        //quantityBox.text = "Hello there";
        //var currentValue = quantityBox.val();
        $(this).siblings('input[type="text"]').first().val("clicked");

        //quantityBox.val(parseInt(currentValue) + 1);
    }); 
```

我已经让它部分工作：

```
$(this).siblings('input[type="text"]').first().val("clicked"); 
```

我在哪里设置文本框文本，但是再一次，如果我单击第二个按钮，什么也没有发生。

我做错了什么？如何从特定文本框中获取价值？

**更新**

现在我采用向每个控件添加自定义属性的解决方案：

```
 <span>Question :</span>
<span>my second content <br /></span>
<span>Answer : </span>
<input name="ctl00$MainContent$ctl00$ctl00$TextArea" type="text" id="MainContent_ctl00_TextArea_0" value="654" mydataid="2" />

    <button id="MainContent_ctl00_answerQuestion_0" Class="addAnswerButton" onclick="Click()" mydataid="2" >Add Question</button><hr /><span>Question :</span><span>abcdedf <br /></span>

    <span>Answer : </span><input name="ctl00$MainContent$ctl00$ctl01$TextArea" type="text" mydataid="1" id="MainContent_ctl00_TextArea_1" value="654" />

    <button id="MainContent_ctl00_answerQuestion_1" Class="addAnswerButton" onclick="Click()" mydataid="1">Add Question</button>​ 
```

所以现在我可以通过这样做从 onclick 事件中获取自定义属性：

```
$(".addAnswerButton").click(function() {
    var pos = $(this).attr("mydataid");
    alert(pos);
 //   $(this).siblings('input[type="text"]').first().val("clicked");
}); 
```

但是我如何获得具有相同自定义属性名称作为按钮的文本框控件？

**更新 2**

经过 70 次尝试后，我终于弄明白了（我第一次尝试使用 Jquery）

**解决方案**

```
$(".addAnswerButton").click(function() {
    var pos = $(this).attr("mydataid");
    results = $('input[type = "text"][mydataid="'+pos+'"]').first();
    alert(results.val());
}); 
```

所以重点是，您正在获取自定义属性“名称”，然后搜索具有相同属性名称的文本框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:00:21.443

您可以使用某些属性从服务器标记它们并在您的 jQuery 代码中使用它。

服务器的输出将是这样的：

```
<input type='text' data-item-id='1'>First</input>
<inpyt type='button' data-item-id='1'></input>

 <input type='text' data-item-id='2'>Second</input>
    <inpyt type='button' data-item-id='2'></input> 
```

按下按钮后，获取它的 data-item-id 并搜索具有相同属性值的文本框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:16:55.890

评论后编辑。

我前往您的 jsfiddle 并使其与此一起使用：

```
$('[id*="answerQuestion"]').click(function () {
    $(this).parent().children('[id*="TextArea_' + $(this).attr('id').substring($(this).attr('id').length - 1) + '"]').val('clicked');
}); 
```

解释：

1.  我意识到你的 id 是按钮的 answerQuestion 和 txt 的 TextArea。
2.  在函数中，我制作了一个使用 TextArea id 的选择器（子字符串将索引添加到它）

而已！这有点棘手，但这是我找到的最佳解决方案。

希望这可以帮助！

问候，如果有一些英文不一致，对不起:)！

# apache-flex - flex 4.6 移动应用程序：我可以用它制作 .exe 吗？

> ID：12531704
> 
> 赞同：0
> 
> 时间：2012-09-21T13:38:18.680
> 
> 标签：apache-flex, air, flex4, flex4.5, flex4.6

我正在使用 Flex4.6 开发移动应用程序。我可以为 ipad 和 android 创建一个输出。

我还可以创建一个 AIR 应用程序。

是否可以从此 AIR 为 PC 创建一个 .EXE ？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:05:14.900

> 是否可以从此 AIR 为 PC 创建一个 .EXE ？

是的，您可以创建一个在 Windows 上构建 .exe 的 AIR 项目。为此，当您生成发布版本时，您必须使用“捕获运行时”功能来执行此操作。

在 Flash Builder 中，您无法创建将针对移动设备（AKA iOS 和 Android）和桌面设备（Mac 和 PC）的单个项目。如果这是您的目的，那么您应该考虑将尽可能多的代码移入库项目；然后在 Flex 项目（针对桌面）和 Flex 移动项目（针对 iOS 和 Android）之间共享该库项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:56:04.813

最好用你所有的公共基础代码（即几乎所有东西）创建一个库项目，然后创建两个其他项目，一个用于移动设备，一个用于引用库项目的桌面。

在桌面版中，如果您想拥有完全相同的外观和感觉，您还需要将移动皮肤引用导入到项目中。

我自己刚刚做了这个。我有一个 iPad 版本和一个桌面版本，但它们都使用相同的库和移动皮肤。

然后，您还可以在桌面和移动项目中设置单独的启动 mxml，并包含不同的 css 样式表，以满足您可能想要的任何其他差异。

# watir - 如何在 PageObject 中使用 css 获取元素

> ID：12531705
> 
> 赞同：2
> 
> 时间：2012-09-21T13:38:19.277
> 
> 标签：watir, page-object-gem

在我添加测试的项目中，我有一些复杂的“获取”元素。
我的 textarea 的 html ：

```
<div class="quote">        
 <div class="clearfix">          
  <div class="icon"></div>            
   <div class="text">
    <span class="yui3-widget yui3-inputwidget yui3-textareawidget yui3-textareawidget-focused" style="">
     <span class="yui3-textareawidget-content">
      <textarea name="" placeholder=""></textarea>
     </span>
    </span>
   </div>        
   <div class="author">
    (...) other text_field 
   </div>
  </div>        
 </div>    
</div> 
```

目前，我使用这条线来设置值

```
@browser.element(:css => ".quote textarea").send_keys "test" 
```

在 PageObject 中，我应该声明元素并使用它：

```
# declaration at the top
element(:quote_text, :css => ".quote textarea") 
# use it where I need
self.quote_text = "text" 
```

但是当我使用时出现此错误：

```
undefined method `quote_text=' for #<PublishPage:0x33843c0> (NoMethodError) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:52:30.267

When you do `element(:quote_text, :css => ".quote textarea")`, it will only generate the methods (see [doc](http://rubydoc.info/github/cheezy/page-object/master/PageObject/Accessors#element-instance_method)):

```
quote_text #Returns the text of the element
quote_text_element #Returns the element
quote_text? #Returns if the element exists 
```

Since you know it is a text area and want the text area methods, you should declare it as:

```
text_area(:quote_text, :css => ".quote textarea") 
```

This will give you the `quote_text=` method you expect (see [doc](http://rubydoc.info/github/cheezy/page-object/master/PageObject/Accessors#text_area-instance_method)).

**Update** - Since Watir-Webdriver only support css-selectors at the element class (see [Issue 124](https://github.com/watir/watir-webdriver/issues/124)), you will also need to change the locator. Two alternative declarations for `quote_text` that seem to work:

```
#Using a block to locate the element:
text_area(:quote_text){ div_element(:class => "quote").text_area_element }

#Using xpath:
text_area(:quote_text, :xpath => '//div[@class="quote"]//textarea') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:51:25.583

我认为您不需要`self`那里（但我可能是错的）。

尝试这个

```
quote_text = "text" 
```

代替

```
self.quote_text = "text" 
```

# javascript - 动态监听 Backbone.js 视图的渲染函数被调用

> ID：12531711
> 
> 赞同：0
> 
> 时间：2012-09-21T13:38:38.433
> 
> 标签：javascript, backbone.js

我正在尝试动态扩展 Backbone.js 视图的渲染功能。在这样做时，我希望能够在调用渲染之前和之后触发一个事件。我尝试覆盖该函数并调用旧函数，该函数有效，但所有绑定到渲染函数的模型都失去了它们的绑定。我目前拥有的代码如下，如果我传入创建的 Backbone.js 视图：

```
function bindRenders(view) {

    view.render = (function() {
        var cachedRender = view.render;

        return function() {
            console.log("before render");
            cachedRender.apply(this, arguments);
            console.log("after render");
        };
    }());
} 
```

同样，上面的代码可以工作，但所有模型都通过以下方式绑定到渲染函数：

```
 this.model.on('change', this.render, this); 
```

休息。我找到的唯一解决方案是在覆盖函数后重新绑定模型的 .on('change') 事件。然而，并不是每个视图的模型都会以这种方式绑定。很感谢任何形式的帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:58:50.873

你是什​​么意思'打破'？当模型更改时，您之前的渲染代码仍然会被调用？

那是因为绑定到“更改”事件的函数不是您的新函数，您只是更改视图的“渲染”属性，而不是更改时执行的内容。我想如果您的绑定是：`this.model.on('change', function(){return this.render()}, this)`

但我不明白你为什么想要那个。在我看来，你应该使用继承来应用这种常见的行为。

类似的东西（非常简化）

```
var MyBaseView = Backbone.View.extend({
  ...
  render: function(){
    this.trigger('beforeRender');
    this.beforeRender()

    //do something generic
    ...

    this.afterRender()
    this.trigger('afterRender');
  }
  ...
});

var MyOtherView = MyBaseView.extend({
  ...
  beforeRender: function(){
    //do something specific
  }

  //do NOT override "render"

  afterRender: function(){
    //do some other specific things
  }
  ...
}); 
```

或者像这样一个更好的解决方案[Backbone.js 视图继承](https://stackoverflow.com/questions/7735133/backbone-js-view-inheritance/7736030#7736030)

另外我认为[https://github.com/tbranyen/backbone.layoutmanager](https://github.com/tbranyen/backbone.layoutmanager)有很多你想要实现的目标。

# utf-8 - 如何确定具有不同编码代码的文件大小？

> ID：12531713
> 
> 赞同：1
> 
> 时间：2012-09-21T13:38:38.303
> 
> 标签：utf-8, computer-science, utf-16

《兰集序》被誉为中国文学史上的“亭行书”之巅。最引人入胜的一句话是“我知道说生死是一回事是骗人的，长寿和早死没有区别唉！”通过计算整个内容的字符（中文版），结果应为 391（包括标点符号）。对于写入文本文件的这些字符，请选择可能的文件大小而不会损坏任何数据。

A、UTF-16编码782字节
B、UTF-16编码784字节
C、UTF-8编码1173字节
D、UTF-8编码1176字节
E、以上
都不是正确答案？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:52:44.057

**TL;博士**

正如上校 Panic 指出的那样，您需要对 391 个字符段落中的每个字符进行详细分析才能真正解决这个问题。但看起来你的考官有一种非常邪恶的幽默感 - 所有 4 个答案都可以说是正确的，假设所有字符都适合 BMP 并取决于是否使用 BOM。您最好的选择是寻找一个不在 BMP 上的不常见字符，它将 UTF8 和 UTF16 推到一个额外的转义序列中，在这种情况下，答案不是上述任何一种。

**详细地**

[在 UTF-8](http://en.wikipedia.org/wiki/UTF-8)中，所有 ASCII 字符（值 0 到 127）对应一个字符

似乎大多数“常见”CJK 字符使用 3 个字节，尽管不太常见的 CJK 字符可能需要完整的 4 个字节进行编码。当然，这取决于您的操作系统是否需要[字节顺序标记](http://en.wikipedia.org/wiki/UTF-8#Byte_order_mark) 。

因此，例如，如果 391 个字符段落中的所有字节都是*普通*汉字并且没有 BOM，则 UTF-8 应该是 1173 个字节。对于 BOM，这将是 1176 字节。

在 UTF-16 中，似乎大多数常见的 CJK 字符都在[Basic Multilingual Plane](http://en.wikipedia.org/wiki/Basic_Multilingual_Plane#Basic_Multilingual_Plane)上，因此对每个字符进行编码只需要 2 个字节。即 391 * 2 = 782。

UTF 16 几乎总是有一个 2 字节[字节顺序标记](http://unicode.org/faq/utf_bom.html#bom1)（FE FF 或 FF FE）——即 784 字节。

FWIW，您提供的 6 个字符（兰亭集序行书）都在 BMP 上 -[在这里查看](http://rishida.net/tools/conversion/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:43:39.640

**需要更多信息**。UTF-8 和 UTF-16（但不是 UTF-32）都是可变宽度编码。在 UTF-8 中，一些字符被编码为一个 8 位字节（一个八位字节），而其他字符则多达四个八位字节。

# javascript - 获取 html.textboxfor() 中的值？

> ID：12531716
> 
> 赞同：1
> 
> 时间：2012-09-21T13:39:01.257
> 
> 标签：javascript, json, asp.net-mvc-3

我的aspx中有这个：

```
 <div class="col2-input" id="Launch-Height-value">
  <input type="hidden" name="Launch-Height" id="Launch-Height" value="<%: Model.LaunchHeight %>" />
  <%:  Html.TextBoxFor(model => model.LaunchHeight) %>
</div>
<div class="col3">
  <div id="save-launch-height">
    <a href="javascript:saveLaunchHeight();" class="button">Save</a>
  </div>
</div> 
```

保存启动高度：

```
 function saveLaunchHeight() {
    $("#Launch-Height").val($("#Launch-Height").val());
    updateSaveButtons();
    var jqxhr = $.getJSON("<%= Url.Action("UpdateLaunchHeight", "Scorm", new { area = "Admin" }) %>?scormModuleId=<%: Model.ScormModuleId %>&value=" + $("#Launch-Height").val(), function (data) {
        alert($("#Launch-Height").val($("#Launch-Height").val()));
   });
 } 
```

然后更新保存按钮：

```
 function updateSaveButtons() {
  if ($("#LaunchWidth").val() != $("#PassScoreHidden").val())
      $("#save-pass-score-button").show();
   } 
```

在视图中，我可以更改宽度值并单击保存，它会更新 html.textboxfor，但仅此而已...

然后是控制器中的httpget

```
 [HttpGet]
[NoCache]
public JsonResult UpdateLaunchWidth(int scormModuleId, short value)
{
    if (value > 0)
    {
        var module = ZincService.ScormService.GetScormModule(scormModuleId);
        if (module != null)
        {
            try
            {
                module.LaunchWidth = value;
                ZincService.ScormService.UpdateScormModuleSettings(module);
                ZincService.SaveChanges();
                return Json(new { success = true }, JsonRequestBehavior.AllowGet);
            }
            catch (Exception ex)
            {
                Logger.Error(ex, "Error setting new value for LaunchWidth property for scorm module with Id " + scormModuleId);
                return Json(new { success = false }, JsonRequestBehavior.AllowGet);
            }
        }
        else
            return Json(new { success = false }, JsonRequestBehavior.AllowGet);
    }
    else
        return Json(new { success = false }, JsonRequestBehavior.AllowGet);
} 
```

这不会保存我的新价值。我没有编写此代码，因此无法对其工作方式进行太多更改。如果我可以获取 html.textboxfor 中的值...请帮忙？

谢谢

# scala - Playframework文件上传错误

> ID：12531719
> 
> 赞同：0
> 
> 时间：2012-09-21T13:39:15.343
> 
> 标签：scala, file-upload, playframework-2.0

我正在使用[处理文件上传](http://www.playframework.org/documentation/2.0.3/ScalaFileUpload)示例。上传文件时，服务器显示错误：`Missing boundary header`

这是我正在做的事情：

```
def upload = Action(parse.multipartFormData) {implicit request =>
    request.body.file("picture").map { picture =>
      import java.io.File
      val filename = picture.filename
      val contentType = picture.contentType
      picture.ref.moveTo(new File("/users/pictures"))
      Ok("File uploaded")
    }.getOrElse {
      Redirect(routes.Application.index).flashing(
        "error" -> "Missing file"
      )
    }
  } 
```

在我的表格中，我已经这样做了：

```
@helper.form(action = routes.Application.upload, 'enctype -> "multipart/form-data") {

<input type="file" name="picture">

<p>
    <input type="submit">
</p>

} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:07:37.270

我创建了一个新游戏！项目并使用了您的代码，它似乎工作正常（在 OSX 上使用了最新的 Chrome）。如果您没有`'enctype`参数，我会理解该错误。

[这是整个项目](https://dl.dropbox.com/u/58279793/my_app.zip)。看看这是否有效。

# prestashop - Prestashop 中的组合通过 PHP 将库存更改为主要库存

> ID：12531723
> 
> 赞同：0
> 
> 时间：2012-09-21T13:39:23.143
> 
> 标签：prestashop

我正在使用 prestashop 作为商店。

我想知道是否有人知道一个快速的 php mod 来阻止组合产品具有自己的库存水平。问题是我们的供应商没有向我们提供我们销售的遥控车的各个外壳颜色的库存水平。这辆车要么有货，要么没货。我们使用 csv 导入来管理我们的库存。

显然，这些组合具有不同的库存水平。我真的需要“主要”库存水平来反映组合水平。

有没有一种快速修改 php 的方法来做到这一点？

我在想类似的东西

```
$id_product_attribute['quantity'] == '$qty'; 
```

`$qty`主要数量在哪里。另一个问题是，如果您有组合，当您使用 csv 更新时，它不会更新主要库存。我认为它在 AdminProducts.php 中。

我还在用`1.4.7.0`。

我认为它在 AdminProducts.php 中。*（我会在这里发布 php 文件，但它太大了。）*

![](../Images/6dc317a1885db9d465dc2081d5ab8cea.png)

![](../Images/73a9ca1c782650c98c47a5a8b87c7c99.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:45:28.627

将下面的代码放入`<prestashop root>/overrides/classes/StockMvt.php`

该代码将所有组合的数量保持在同一水平。即当您有 5 种组合并且每个组合的库存为 10 时，如果一件商品售出，则所有 5 种组合的库存将减少到 9。

```
<?php
class StockMvt extends StockMvtCore {
    public function add($autodate = true, $nullValues = false, $update_quantity = true) {
            if (!$update_quantity)
                    return true;
            if ($this->id_product_attribute) {
                    $product = new Product((int) $this->id_product, false, Configuration::get('PS_LANG_DEFAULT'));
                    return (Db::getInstance()->Execute(
                            'UPDATE `' . _DB_PREFIX_ . 'product_attribute`
                            SET `quantity` = quantity+' . $this->quantity . ' WHERE `id_product` = ' . (int) $this->id_product) &&
                    $product->updateQuantityProductWithAttributeQuantity());
            }
            else
                    return Db::getInstance()->Execute('
    UPDATE `' . _DB_PREFIX_ . 'product`
    SET `quantity` = quantity+' . (int) $this->quantity . '
    WHERE `id_product` = ' . (int) $this->id_product);
    }
}
?> 
```

然而，我不能把代码归功于代码。Eggbert74 在此线程中提出了解决方案：[http](http://www.prestashop.com/forums/topic/43828-combination-quantity/page__st__40) [: *//www.prestashop.com/forums/topic/43828-combination-quantity/page_st_40*](http://www.prestashop.com/forums/topic/43828-combination-quantity/page__st__40)

# c - 写系统调用，字节数限制是多少？

> ID：12531728
> 
> 赞同：9
> 
> 时间：2012-09-21T13:39:52.560
> 
> 标签：c, linux, types

写系统调用原型为：

```
ssize_t write(int fd, const void *buf, size_t count); 
```

count 参数是无符号的，返回值是有符号的。

帮助页面说：

成功时，返回写入的字节数（零表示未写入任何内容）。出错时，返回 -1，并`errno`进行适当设置。

但是，它没有说明 count 参数的限制是什么。它仍然没有说明 count 大于时的行为`SSIZE_MAX`。

考虑到 write 是一个可用于通用设备/文件/任何东西的系统调用，如果设备支持大于 SSIZE_MAX 的写入操作，则返回类型无法处理写入的实际字节数。

能够传递无符号字节数并返回有符号字节数对我来说没有意义。为什么不只传递一个签名号码？

感觉就像 write 函数的原型有点容易出错，或者至少它在路径上留下了一个可能的漏洞。

有谁知道它的详细信息或我在哪里可以找到这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:52:15.063

我认为没有硬性限制，这取决于`fd`指向什么。例如，如果它是文件系统上的文件，那么如果超过“最大文件大小限制”，文件系统驱动程序将阻塞，返回 EFBIG 错误：

**EFBIG**试图写入超过实现定义的最大文件大小或进程文件大小限制的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:30:55.853

谷歌搜索：

*如果 nbyte 的值大于*{SSIZE_MAX} *，则结果是实现定义的。*

来源： http: [//pubs.opengroup.org/onlinepubs/009695399/functions/write.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/write.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:45:08.423

我想记住系统分配给函数的字节数。但我不确定。也许您应该尝试 size_t 和 ssize_t 手册页。

# fonts - 我可以将嵌入的 base64 编码字体转换为字体文件吗？

> ID：12531731
> 
> 赞同：25
> 
> 时间：2012-09-21T13:40:04.997
> 
> 标签：fonts, font-face, typeconverter

我有一个@font-face 规则，它看起来像这样：

```
@font-face{
    font-family:'F';
src:url("") format("embedded-opentype"),
url(data:application/x-font-woff;charset=utf-8;base64,d09GRgABAA ... ETC... ETC 
```

我可以将其转换为字体文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-21T14:39:41.953

复制 base64 编码部分并进行转换。有很多方法可以做到这一点。

**Linux**

```
base64 -d base64_encoded_font.txt > font.woff 
```

**Mac OS X**

```
openssl base64 -d -in base64_encoded_font.txt -out font.woff 
```

**视窗**

转到[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)并粘贴文本。选择“从 Base64 字符串解码数据（base64 解码）”和“导出到二进制文件”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-10T18:50:15.137

@mcrumley 的回答是正确的，但是对于那些无法弄清楚和/或害怕命令行的人来说，我有另一种方法。

我刚刚搜索了您的问题，发现[http://base64converter.com/](http://base64converter.com/)可以将任何 base64 文件转换/解码（和编码）回其原始格式。过去我用它来编码和解码 base64 图像，但这是我第一次尝试使用字体。作为测试，我插入了在随机网页的 css 文件中找到的嵌入式 base64 字体信息。您不想要整个条目，请留下 css 信息，否则转换将失败。

1.  （例如）删除base64之前的这个信息：

    ```
    @font-face{font-family:"Example";src:url(data:application/x-font-woff;base64, 
    ```

2.  从最后删除：

    ```
    ;font-weight:400;font-style:normal} 
    ```

3.  您将留下 base64 编码数据，将其粘贴到“输入”字段中，为输出选择“解码”并按下按钮。它将创建一个名为`download.bin`: 点击它下载它的文件。然后将文件扩展名从更改`bin`为`woff`（您的字体文件类型可能不同，但它会在 css 中说明）。我能够打开 .woff 文件并且转换工作完美；不仅所有的轮廓都被保存了，字形名称、opentype 特征、字距调整和所有内容也都保存了。

当然，就像任何用于翻录 webfonts 的方法一样，输出的字形数量可能仅限于相关页面上使用的字形。

如果`woff`文件不是您需要的，有很多在线工具可以转换`woff`为您选择的格式。或者，如果您需要离线工具，请查看我提出的这个问题以及我收到的答案：

[修改 Python 脚本以批量转换目录中的所有“WOFF”文件](https://stackoverflow.com/questions/34185115/modify-python-script-to-batch-convert-all-woff-files-in-directory)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-25T22:05:25.190

1.  复制：

    ```
    data:application/x-font-woff;charset=utf-8;base64,d09GRgABAA ...ETC 
    ```

2.  粘贴到浏览器地址栏中，按回车键。

    ```
    - A save as window appear - 
    ```

3.  选择要保存到的文件夹（例如：mywebsite/fonts），文件名：myfont.woff

    ```
    - you now have myfont.woff in a folder - 
    ```

4.  包含在 css 中：

    ```
    @font-face {
       font-family: 'myfont';
       src: url('fonts/myfont.woff');
       font-weight: normal;
       font-style: normal;
    } 
    ```

5.  添加到类：

    ```
    .headline {
    font-family: 'myfont', Helvetica, Arial, sans-serif;
    } 
    ```

完毕。

（请注意，您必须使用与 data:URI 语法中声明的文件格式相同的文件格式。在您的情况下`application/x-font-woff`......因此 myfont.woff）

# jquery - Firefox 边框 CSS 问题

> ID：12531738
> 
> 赞同：0
> 
> 时间：2012-09-21T13:40:35.883
> 
> 标签：jquery, css, firefox, border

在 Firefox 中，当我尝试使用 jQuery 删除表格单元格的边框时

```
jQuery(td-selector).css({'border' : 'none'}); 
```

它仍然在表格单元格的某些（不是所有边缘）上显示出奇怪的边框。当我尝试使用 Firebug 检查单元格时，边框消失了。

有没有其他人遇到同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:50:11.460

将此添加到您的 CSS 中：

```
table{
    border-collapse: collapse;
} 
```

[MDN 参考](https://developer.mozilla.org/en-US/docs/CSS/border-collapse)

# java - 将列表的python排序转换为java代码。

> ID：12531739
> 
> 赞同：1
> 
> 时间：2012-09-21T13:40:35.807
> 
> 标签：java, python

我正在尝试将这个对我的`items`列表进行排序的 python 代码转换为 java 代码。我怎样才能在java中进行这种排序？

`python code:`

```
import re
items = ['10H', '10S', '2H', '3S', '4S', '6C', '7D', '8C', '8D', '8H', '11D', '11H', '12H']
sortedItems = sorted(items, key=lambda x:int(re.findall(r'(\d+)[A-Z]*$',x)[0]))

#print sortedItems will result to the following sorted data which is what i wanted
#['2H', '3S', '4S', '6C', '7D', '8C', '8D', '8H', '10H', '10S', '11D', '11H', '12H'] 
```

到目前为止，我所拥有的`java`是以下内容：

```
//code something like this
ArrayList<String> items = new ArrayList<String>(Arrays.asList("10H", "10S", "2H", "3S", "4S", "6C", "`7D", "8C", "8D", "8H", "11D", "11H", "12H"));
Collections.sort(items) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:43:29.930

您需要使用自定义`Comparator`来代替 Python 脚本中声明的 lambda 表达式。

```
Collections.sort(items,  new Comparator<String>() {
    private Pattern p = Pattern.compile("(\d+)[A-Z]*)");
    public int compare(String o1, String o2) {
        Matcher m1 = p.matcher(o1);
        Matcher m2 = p.matcher(o2);

        return Integer.valueOf(m1.group(0)).compareTo(Integer.valueOf(m2.group(0)));
    }
}); 
```

请注意，这`Comparator`不会比较字母组件，因为 lambda 表达式也不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:45:26.293

Collections.sort 也接受比较器。

所以，你可以这样做——

```
Collections.sort(items, new Comparator<String>() {
    @Override
    public int compareTo(String s1, String s2) {
           // do your magic here , by extracting the integer portion, comparing those
           // and then comparing the string to return 1 , 0 , -1
    }
}); 
```

# javascript - 车把模板和动态图像

> ID：12531743
> 
> 赞同：11
> 
> 时间：2012-09-21T13:40:53.977
> 
> 标签：javascript, templates, handlebars.js

在我的模板中，我正在做类似的事情

```
<img class="someClass" src="{{imgURL}}"> 
```

图像已正确加载，但我收到如下警告：

```
GET http://localhost:8888/%7B%imgURL%7D%7D 404 (Not Found) 
```

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T17:17:01.927

你有两个问题：

1.  您缺少结束语，`<img>`但这没什么大不了的。
2.  您的模板存储在`<div>`包含 HTML 的隐藏或类似元素中。

如果你这样说：

```
<div id="t" style="display: none">
    <img class="someClass" src="{{imgURL}}">
</div> 
```

浏览器会将其解释`<img>`为真实图像并尝试加载`src`属性中指定的资源，这就是您的 404：

```
GET http://localhost:8888/%7B%imgURL%7D%7D 404 (Not Found) 
```

来自。模板很少是有效且格式正确的 HTML，因此您需要阻止浏览器尝试将模板解释为 HTML。通常的方法是将模板存储在`<script>`带有非 HTML 的 a 中`type`：

```
<script id="t" type="text/x-handlebars-template">
    <img class="someClass" src="{{imgURL}}">
</script> 
```

然后你可以说`Handlebars.compile($('#t').html())`得到你编译的模板，浏览器不会尝试将`#t`内容解释为 HTML。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-29T16:18:44.353

没有一个答案对我有用。我通过将图像转换为 base64 并将其作为车把模板内的 img src 发送来让它工作

模板.hbs

```
{{#if img_src}}
    <img src="{{{img_src}}}" alt=""/>
{{/if}} 
```

源码.js

```
data = {
         img_src: base64img.base64Sync('./assets/img/test.png');
       } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T18:04:58.020

我知道已经很晚了，但这里是如何做你想做的事：

```
var view = Ember.View.create({templateName: 'myTemplate', myPicture: 'http://url_of_my_picture.png'});

view.appendTo('#myDiv');

<script type="text/x-handlebars" data-template-name="myTemplate">
    <img {{bindAttr src="myPicture"}}>
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-27T02:58:49.903

我发现使用三重括号可以正常工作。

```
<img src="{{{your source}}}" alt={{{your alt}}} /> 
```

# database - 防止 Django 在并发请求时将同一个对象多次保存到数据库中

> ID：12531746
> 
> 赞同：2
> 
> 时间：2012-09-21T13:41:03.763
> 
> 标签：database, django, model, save, simultaneous

对于我们的博客平台，我们有一个“文章”模型，其中包含一个“更新的”日期时间字段：

```
class Article(models.Model):
    updated = models.DateTimeField(null=True, blank=True)
    ... 
```

当一篇文章在 24 小时内第一次被访问者打开时，我们会对不同的模型字段进行一些耗时的计算，然后将模型保存到数据库中。有了这个，我们还将我们的“更新”字段更新为当前的 datetime.now()。

```
if (datetime.now() - article.updated).days > 1:
    # do some time consuming calculations
    article.updated = datetime.now()
    article.save() 
```

当一篇文章或多或少同时被请求时，第一次请求的耗时操作尚未完成，导致每天一次的操作在同一个对象上再次开始（article.updated 仍然具有旧值）。在开始计算之前另外调用 article.save() 是否有帮助？还是将这些数据从保存到数据库中推迟到请求完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:17:34.107

一些建议：

*   最好将耗时的计算从请求-响应周期转移到后台。这里可以使用消息队列（如流行的[celery](http://celeryproject.org/)）。我认为这是最好的解决方案，但它可能需要一些额外的管理，这对于简单的任务来说可能是多余的；
*   如果你使用缓存，你可以设置一个标志对象被锁定。如果缓存对于不同的解释器（如 memcached）是通用的，那么即使您有许多运行您的应用程序的 Python 解释器，它也可以工作；
*   您可以安排更新过程（使用 cron 和自定义 Django 管理命令）来更新 > 24 小时前更新的所有对象。除非你有大量的对象和相当长的处理时间，否则它会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:27:43.583

使用Django 1.4 中引入的查询集[select_for_update ，它在数据库中进行行级锁定。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-for-update)所有匹配的条目都将被锁定，直到事务块结束，这意味着其他事务将被阻止更改或获取对它们的锁定。有一些特定于 datgabase 后端的陷阱，因此请确保在完全依赖它之前阅读并测试它。

其他一些独立于实现的方法是通过自定义模型以具有`locked`布尔属性。不是很整洁，但一个可行的解决方案。请参阅[在 Django 中锁定对象的最简单方法是什么](https://stackoverflow.com/questions/698950/what-is-the-simplest-way-to-lock-an-object-in-django)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T16:54:43.183

精简版：

```
@transaction.commit_on_success
def update_article( article_id ):
    article = Article.objects.select_for_update().get( pk = article_id )
    if (datetime.now() - article.updated).days > 1:
        # do some time consuming calculations
        article.updated = datetime.now()
        article.save() 
```

`select_for_update()`锁定数据库行（ID 为 article_ID 的文章）。`update_article()`该行在事务结束时解锁，因为它被包裹在函数的末尾`@transaction.commit_on_success`。

Ps：从 Django 1.4 开始可用

# node.js - 查询 MongoDB（通过 MongooseJS）并将结果保存在 Javascript 变量中？

> ID：12531757
> 
> 赞同：1
> 
> 时间：2012-09-21T13:41:48.110
> 
> 标签：node.js, mongodb, mongoose, nowjs-sockets

服务器端：

```
var test;

UserModel.findOne({name: 'guest'}, function(err, user) {
    test = user.name;
});

console.log(test); 
```

这不起作用。“test”的值没有记录在控制台中。不过，在“UserModel.findOne”回调函数中移动 console.log 是可行的。

**问题**

如何将“user.name”从我的数据库中取出并放入变量中？

**额外细节**

我这样做的原因是因为我想像这样将 Mongoose 与 NowJS 一起使用（从 MongoDB 中获取一些细节，使用 NowJS 等将其发送给客户端）：

```
nowjs.on('connect', function () { 

    var test;

    UserModel.findOne({name: 'guest'}, function(err, user) {
            test = user.name;
            }); 

    this.now.receiveMessage(test);
}); 
```

但这严格来说不是关于 NowJS 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:46:59.800

您必须将 NowJS 调用放在回调中：

```
var now = this.now;
UserModel.findOne({name: 'guest'}, function(err, user) {
    now.receiveMessage(user.name);
}); 
```

# grails - 如何使用 grails 在引导程序的测试中存储角色对象的引用

> ID：12531763
> 
> 赞同：1
> 
> 时间：2012-09-21T13:42:01.707
> 
> 标签：grails

我试图在运行服务器时将用户管理数据插入到测试中。Bootstrap 类执行成功，但记录未插入表中。我在这里粘贴我的角色、用户和引导文件

**我的角色域**

```
package com.mediacast
class Role {    
    static mapWith="mongo"
    String roleType     

    static constraints = {
        roleType(nullable:false,blank:false)
    }
    static mapping = {          
    }
} 
```

**我的测试域**

```
package com.mediacast

class Tests {
    static mapWith="mongo"
    //static hasMany = [roles: Role]    
    String userName 
    String password 
    String mailId            
    String pwdSet
    String role
    Role roles
    static constraints = {
        userName nullable:false,blank:false, unique:true        
        mailId blank:false              
    }
    static mapping={
        version false
    }
} 
```

**我的引导类是**

```
import com.mediacast.User
import com.mediacast.Role
import com.mediacast.Tests
class BootStrap {
    def springSecurityService
    def init = { servletContext ->

        if (!Tests.count()) {       
            createData()                    
        }       
    }
    private void createData(){  
        def roleInstance = Role.findByRoleType("Admin") 
        System.out.println("--------Instance-----------"+roleInstance.roleType);
        //def password = springSecurityService.encodePassword("admin")
        def userSec =new Tests(userName:"admin",password:"admin",mailId:"raghurame@techaffinity.com",roles:roleInstance,pwdSet:"Y").save(flush:true)
        System.out.println("--------Instance-----------"+userSec);
    }
    def destroy = {
    }
} 
```

它正在执行，但记录未插入引导程序。请在这方面提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:15:47.037

首先，为了调试东西，一个

```
.save(flush:true, failOnError:true) 
```

优于标准

```
.save(flush:true) 
```

如果验证失败，第二个将继续而不保存您的对象。

如果验证失败，第一个将引发异常并终止项目的启动。

加入一些 println 或更好的 log.debug 语句来查看 createDate() 是否真的执行也是一个好技巧。（`if (!Domain.count())`不是我最喜欢的风格 - 它工作正常吗？我更喜欢`if (Domain.count()==0)`......）

由于我总是手动设置 nullable:true|false 约束，我不知道默认值是什么，但我想这将是你的问题 - failOnError:true 将导致可见的验证异常，它会告诉你必须设置其他领域也...

请尝试一下，如果您不成功，请写评论...

# java - 从 JAR 中运行 *.exe 文件

> ID：12531766
> 
> 赞同：2
> 
> 时间：2012-09-21T13:42:10.667
> 
> 标签：java, maven, jar, exe, maven-shade-plugin

我有一个巨大的 JAR 文件，它是用`Maven Shade`插件创建的。

我用 运行它`java -jar foo.jar`，然后我的 UI 打开。现在我想执行`*.exe`文件，它也在那个 JAR 文件中，我该怎么做？

我尝试将 exe 放入我的类路径并从那里运行它，但在尝试后我发现类路径实际上是我的 JAR 所在的位置。

**有什么建议么？**

在这里找到了这个东西，但这真的是最好的解决方案吗？看起来工作量很大，我想我在这里有不同的情况，因为我可以自己定义 exe 的位置，而 JAR 是由我创建的。

[运行打包在jar中的exe](https://stackoverflow.com/questions/600146/run-exe-which-is-packaged-inside-jar)

为什么我需要这个？

**我想给用户一个可以运行的单个文件可执行文件，但我的程序正在使用 *.exe。我应该把 exe 放在我的 jar 旁边，会有 2 个文件还是有我的要求的解决方案？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:55:46.093

将文件复制到临时位置并运行它是可行的方法。您链接到的答案做了更多必要的工作，因为您可以将 exe 文件作为 InputStream 并将其复制到具有 Apache Commons IO 等实用程序的文件中`FileUtils.copy(in, out)`

请参阅[如何将文本文件从 jar 复制到 jar 外部的文件中？](https://stackoverflow.com/questions/463972/how-do-i-copy-a-text-file-from-a-jar-into-a-file-outside-of-the-jar?rq=1)例如。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:54:11.273

这与位置无关，而是关于您需要告诉操作系统运行 exe 的事实，不幸的是，您无法通过在 jar 中提供位置来做到这一点。

# r - 隔离具有相同值的列

> ID：12531768
> 
> 赞同：0
> 
> 时间：2012-09-21T13:42:19.710
> 
> 标签：r

我正在尝试隔离所有观察值都具有相同值的数据框的那些列（忽略 NA）。请参阅下面的假设示例：

```
ForestName <- rep("Planige", 4)
TreeNumber <- c(1:4)
Height <- c(2.3, 2, 2.1, 2.9)
Type <- c("AA", "AA", NA, "AA")
df <- data.frame(ForestName, TreeNumber, Height, Type)
df 
```

新数据框应包含 ForestName 和 Type。具有不相等值（TreeNumber 和 Height）的列应包含在另一个数据框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:50:13.810

您可以使用`unique`并检查这是否简化为单个元素：

```
df[sapply(df,function(x) length(unique(x[!is.na(x)])))==1]
  ForestName Type
1    Planige   AA
2    Planige   AA
3    Planige <NA>
4    Planige   AA 
```

或测试`all`元素是否等于第一个非`NA`：

```
df[sapply(df, function(x) all(x==na.omit(x)[1],na.rm=T))]
  ForestName Type
1    Planige   AA
2    Planige   AA
3    Planige <NA>
4    Planige   AA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:49:36.683

在许多其他方式中，我确信：

```
df[,sapply(df,function(x) {length(unique(x[!is.na(x)])) > 1})]

   TreeNumber Height
1          1    2.3
2          2    2.0
3          3    2.1
4          4    2.9 
```

您可以否定`sapply`表达式以获取其他列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:43:21.680

使用相同基本原理的稍微更紧凑的方法

```
 Filter(function(x){length(unique(x[!is.na(x)])) <=1}, df) 
```

# testing - 这是编写 BDD 测试场景的正确方法吗？

> ID：12531774
> 
> 赞同：0
> 
> 时间：2012-09-21T13:42:59.523
> 
> 标签：testing, cucumber, bdd

我可以将 BDD 测试方案一分为二：

要求：

如果预订是**, 和***不符合签入条件，然后显示以下消息：'成功，一旦选择 OK，则显示 BP。***

 ***测试场景：

背景：

鉴于我已选择签到并且我在线

场景大纲：***** - 返程航班不符合 BP 页面的条件

```
 GIVEN I am on the 'D' Page
   WHEN i select the  'YES' selection tab
   THEN  the following  message is displayed ‘ Success, <Pax Name> '

    GIVEN i have selected 'YES' on the D Page
    WHEN i select 'OK' on the displayed message
    THEN the BP page is displayed 
```

还：

要求：

包括是和否的选择选项卡，以允许用户确认他们是乘客。（默认突出显示为是）是 - 如果选择将 xxxxx b。否 - 如果选中，则将用户返回到 aaaaaaaaa

背景：

鉴于我已选择签到并且我在线

鉴于我在“D”页面上，那么该页面应该有一个“是”和“否”选择选项卡，并且“是”选择选项卡被突出显示

鉴于我在“D”页面上当我选择“否”选择选项卡时，我返回到签到页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:42:07.340

您可以随时混合和匹配步骤。例如，第一个场景可以按如下方式完成：

```
Scenario: Return Flight is NOT eligible for BP page
   GIVEN I am on the 'D' Page
   WHEN i select the  'YES' selection tab
   THEN  the following  message is displayed ‘ Success, <Pax Name> '
   WHEN i select 'OK' on the displayed message
   THEN the BP page is displayed 
```***

# mysql - 带有子查询循环的mysql查询？

> ID：12531775
> 
> 赞同：1
> 
> 时间：2012-09-21T13:43:08.393
> 
> 标签：mysql, loops

我有一个查询

```
SELECT 
  count(product) as amount,
  product, 
  sum(price) AS price 
FROM `products` 
WHERE 
  brid = 'broker' 
AND 
  cancelled is null 
GROUP BY product 
WITH ROLLUP 
```

是否可以查询一个表以获取代理 ID，然后为每个代理运行上面写为 1 个查询的查询？

几乎像：

```
SELECT brid FROM membership
THEN

SELECT 
  count(product) as amount,
  product, 
  sum(price) AS price 
FROM `products` 
WHERE 
  brid = membership.brid 
AND 
  cancelled is null 
GROUP BY product 
WITH ROLLUP

THEN
SELECT NEXT brid 
```

这可能吗？我知道如何在 PHP 中做到这一点，但我更喜欢 1 个可以创建数组的查询，而不是每个查询的大量查询。

谢谢亚当。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:49:16.300

当然，您可以对“brid”字段和“product”字段进行分组。如下所述，`WITH ROLLUP`将导致它先按“brid”排序，然后按“product”排序：

```
SELECT
  brid, 
  count(product) as amount,
  product, 
  sum(price) AS price 
FROM `products` 
WHERE 
  brid IN (SELECT brid FROM membership)
AND 
  cancelled is null 
GROUP BY brid, product 
WITH ROLLUP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:49:11.330

```
SELECT 
  count(product) as amount,
  product, 
  sum(price) AS price 
FROM `products` 
INNER JOIN membership on membership.brid = products.brid
WHERE 
  cancelled is null 
GROUP BY product 
WITH ROLLUP 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:55:36.920

据我从您的示例中可以理解，您所需要的只是`inner join between membership and products on brid`

举个例子：

`products`桌子：

```
CREATE TABLE `test` (
  `price` int(11) DEFAULT NULL,
  `product` varchar(20) DEFAULT NULL,
  `brid` varchar(20) DEFAULT NULL,
  `cancelled` varchar(20) DEFAULT NULL
) 
```

`membership`桌子：

```
CREATE TABLE `membership` (
  `brid` varchar(20) DEFAULT NULL
) 
```

以下是我`query`的要求：

```
SELECT 
  t.brid, count(t.product) as amount,
  t.product, 
  sum(t.price) AS price 
FROM products t, membership m
WHERE 
  t.brid = m.`brid`
AND 
  cancelled is null 
GROUP BY product 
```

希望有帮助！

# login - cloudfoundry - 带有外部 uri 的 vmc 注册错误

> ID：12531777
> 
> 赞同：1
> 
> 时间：2012-09-21T13:43:22.767
> 
> 标签：login, cloud-foundry, vmc

我使用 -D 选项安装了 cloudfoundry 来更改默认域。Cloudfoundry 可以正常安装并启动，但是当我尝试 vmc in 时出现错误：

`swampfox@swampcf:~$ vmc target api.mydomain.com` `Successfully targeted to [http://api.mydomain.com]`

`swampfox@swampcf:~$ vmc register --email emailid@gmail.com --passwd mypass Creating New User: OK Attempting login to [http://api.mydomain.com] Problem with login to 'http://api.mydomain.com', target refused connection (getaddrinfo: Name or service not known), try again or register for an account.`

`swampfox@swampcf:~$ vmc register --email emailid@gmail.com --passwd mypass Creating New User: Error 100: Bad request`

有人可以帮忙吗。我需要有外部 uri，否则这对我来说没用。

如果我采用默认的 api.vcap.me，这可以正常工作，但它仅适用于该 vm，并且无法从其他基础设施访问，这非常无用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:53:03.910

我发现了这个问题。vmc-0.3.21 中有一个错误。将其备份到 vmc-0.3.18，现在一切正常。

缂！如何打开针对 vmc 的错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:21:04.633

实际上我最初安装的是默认的 api.vcap.me。然后我用-D mydomain.com彻底重新安装了客人。我随后使用 api.vcap.me 在不同的客户机上安装了另一个 CF 以进行比较。

检查了配置 /home/cfadmin/cloudfoundry/.deployments/devbox/config/uaa.yml 并没有对 api.swampnet.com 或 api.vcap.me 的敬畏。

只是一个简短的说明。我可以从 emc.com 等外部域成功登录，但无法在本地机器或同一子网中的机器上登录。缂！

我注意到控制器的外部 uris 为 false，所以我将它们设置为 ture，但这并没有什么区别。如果我在 api.vcap.me 实例上将它们设置为 true，是否允许我使用外部 uri 推送和应用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:53:25.947

当您尝试过 api.vcap.me 时，您是否只是通过更改 config/cloud_controller.yml 中的端点地址来做到这一点？如果是这样，可能值得检查设置是否在所有其他配置文件（uaa.yml）中正确设置了端点，尤其是在这种情况下，因为您遇到登录问题。

我一直使用标准配置（api.vcap.me），然后使用 sed 手动更改所有配置文件中的端点，例如从 config 目录；

```
sed -i 's/\.vcap\.me/.newdomain.com/g' *.yml 
```

# javascript - Rails：包含外部 JavaScript

> ID：12531783
> 
> 赞同：13
> 
> 时间：2012-09-21T13:43:44.733
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, asset-pipeline

我想使用 jQuery 插件之类的 JavaScript 库。我是否使用 Rails 资产管道？或者我应该用 javascript_include_tag 包含它吗？我有哪些选择，推荐的做法是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-21T13:43:44.733

您会只在几个页面上还是在整个应用程序中使用 JavaScript 库？如果您将在整个应用程序中使用它，请通过将资产管道添加到*vendor/assets/javascripts*文件夹来使用它。如果您计划在单个页面上使用该库，请使用`javascript_include_tag`.

以下是指导您在 Rails 中使用 JavaScript 的经验法则：

*   *在app/assets/javascripts/*文件夹中逻辑地组织您的站点范围的脚本。

*   将外部 JavaScript 库（例如 jQuery 插件）复制到*vendor/assets/javascripts*文件夹。

*   *在app/assets/javascripts/application.js*清单中列出站点范围的脚本。

*   让 Rails 资产管道将它们全部组合到一个最小化的*application.js*文件中。

*   对于在访问量很少的几个页面上使用的脚本，加载为特定于页面的 JavaScript。

*   将特定于页面的 JavaScript 放在*lib/assets/javascripts*文件夹中。

对于特定于页面的 JavaScript，`<%= yield(:head) %>`请在​​应用程序布局和`<% content_for :head ... %>`视图中使用。

有关所有详细信息的完整说明，请参阅我的文章：

> **[在 Rails 中包含外部 JavaScript 文件](http://railsapps.github.com/rails-javascript-include-external.html)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-06T07:50:01.177

在单个文件上访问 Javascript`javascript_include_tag`是最好的选择。

有了这个，你可以做的就是将 ' `Rails.application.config.assets.precompile += %w( yourfilename.js )`' 添加到你的 ' `config/initializers/assets.rb`' 文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-03T20:47:54.030

在哈姆

```
= javascript_include_tag "example" 
```

加载文件`assets/javascripts/example.js`

# post - 用于接收 AWS SNS 确认消息的 JSP POST 脚本？

> ID：12531789
> 
> 赞同：1
> 
> 时间：2012-09-21T13:44:01.060
> 
> 标签：post, amazon-web-services, autoscaling, amazon-sns

我正在实施 AWS SNS 功能。我定义的端点是具有 HTTP 协议的网页的 URL(jsp) 我想编写一个 POST 脚本，该脚本将从 AWS SNS 接收消息并接受确认。

# python - 使用 python 访问 Chrome DOM 树

> ID：12531790
> 
> 赞同：3
> 
> 时间：2012-09-21T13:44:01.893
> 
> 标签：python, google-chrome, dom

使用 Chrome DevTools，您可以看到页面的 DOM 树。有没有办法使用 python 访问和拉出那棵树？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:35:05.967

我发现最好的方法是使用`selenium.webdriver`：

```
import selenium.webdriver as webdriver
import lxml.html as lh
import lxml.html.clean as clean

browser = webdriver.Chrome() # Get local session of Chrome
browser.get("http://www.webpage.com") # Load page

content=browser.page_source
cleaner=clean.Cleaner()
content=cleaner.clean_html(content) 
doc=lh.fromstring(content) 
```

doc 将 DOM 获取为`lxml.html.HtmlElement`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:25:13.107

你用过 BeautifulSoup 库吗？本教程的这一部分可能会回答您的问题。 [http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#The)解析树

然后，您还需要导入 Requests 库。

```
from BeautifulSoup import BeautifulSoup
import requests
url = 'http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html'
page = requests.get(url)
soup = BeautifulSoup(page.content)
print soup 
```

# java - 如何在不知道文件扩展名的情况下获取图像类型？

> ID：12531797
> 
> 赞同：2
> 
> 时间：2012-09-21T13:44:47.230
> 
> 标签：java

我需要知道文件扩展名而没有文件扩展名？java IO API可以做到这一点吗？

读取 JPG 文件时出现以下异常：

```
javax.imageio.IIOException: Unsupported Image Type 
```

有谁知道如何解决这个问题？

当我尝试在 Mac OS X 或 Windows 的普通图像查看器中打开图像时，它工作得很好。

文件是否有可能被重命名为不同的类型并且它的原始类型与扩展名不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:47:37.573

您可以使用此代码获取 mime 类型。

```
String imageName = "C:\\Documents and Settings\\home\\Desktop\\P092870.jpg";
File input = new File(imageName);
System.out.println("System Type description of " + input.getName() + " is " + 
          FileSystemView.getFileSystemView().getSystemTypeDescription(input));
System.out.println("Mime Type of " + input.getName() + " is " +
          new MimetypesFileTypeMap().getContentType(input)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:01:29.800

您可以使用[mime-util](http://sourceforge.net/projects/mime-util/)库。我的示例代码将获取文件的 mime 类型。

```
 String imagePath = "filepath";
    File file = new File(imagePath);

    if (MimeUtil.getMimeDetector(MagicMimeMimeDetector.class.getName()) == null)  {
        MimeUtil.registerMimeDetector(MagicMimeMimeDetector.class.getName());
    }
    Collection<MimeType> mimeTypes = MimeUtil.getMimeTypes(file);
    for (MimeType mimeType : mimeTypes) {
        System.out.println(mimeType.getMediaType());
    } 
```

# android - 如何在不更改 android 中的 Spinner 选择的情况下保留文本？

> ID：12531798
> 
> 赞同：-2
> 
> 时间：2012-09-21T13:44:50.287
> 
> 标签：android, drop-down-menu, android-listview, android-spinner

我想在android中实现一个带有标签“CATEGORY”的下拉菜单。

在这里，当我单击“类别”按钮时，应填充一个列表。但是，当我选择该列表中的任何项目时，我不想更改标签“CATEGORY”。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:10:27.113

一旦您了解了微调器的工作原理，这将变得很容易。:)

微调器使用`getView`方法来填充关闭的微调器，并使用`getDropDownView`方法来创建下拉列表。使用此信息，您可以创建一个自定义适配器，该适配器可以在关闭视图中显示当前选择之外的其他内容。这还可以让您避免在数据中包含非数据（如“CATEGORY”一词）。

一个简单的例子：

```
public class CustomAdapter extends ArrayAdapter { 
    private Context context; 
    private int textViewResourceId; 
    private String[] objects; 

    public CustomAdapter(Context context, int textViewResourceId, 
            String[] objects) { 
        super(context, textViewResourceId, objects); 
        this.context = context; 
        this.textViewResourceId = textViewResourceId; 
        this.objects = objects; 
    } 

    @Override 
    public View getView(int position, View convertView, ViewGroup parent) { 
        if (convertView == null) 
            convertView = View.inflate(context, textViewResourceId, null); 
            TextView tv = (TextView) convertView; 
            tv.setText("CATEGORY"); 
        } 
        return convertView; 
    } 
} 
```

微调器的其余部分将正常运行，因此您可以在`onItemSelectedListener`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:53:18.047

在您的`OnItemSelectedListener`方法中，获取您选择的值并将其存储在共享首选项的某个位置并使用`spinnersetSelection(0);`:) 如果再次单击微调器，则从共享首选项加载值:)

# ios - iOS - iPad 背景图像被截短

> ID：12531803
> 
> 赞同：0
> 
> 时间：2012-09-21T13:45:24.030
> 
> 标签：ios, ipad

我有一个 iPad/iPhone 应用程序，iPhone 背景看起来不错，但是当我为 iPad 版本使用相同的图像时，它看起来好像在页面中间被切断了。

这是一个屏幕截图：

![在此处输入图像描述](../Images/96acc342a3e10dd2b207ef7d5b1287c4.png)

该图像称为buildings.png，我有2 个版本，即用于iPad 的buildings.png 和building@2x。

我让图像在后台渲染的方式来自如下代码：

```
- (void)viewDidAppear:(BOOL)animated
{
    UIImage *image = [UIImage imageNamed:@"building"];
    self.view.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

对我来说，解决在 iPad 视图上像这样被截断的图像问题的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:54:22.040

我认为这`colorWithPatternImage`就是您的图像被这样剪切的原因。为什么不创建一个`UIImageView`包含您的图像，将其添加到您的视图并调用`[self.view sendSubviewToBack:yourImageView]`？

编辑
这是你的代码片段

```
UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"building"]];
imgView.frame = self.view.bounds; // to set the frame to your view's size
[self.view addSubview:imgView];
[self.view sendSubviewToBack:imgView]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-08-23T23:23:11.130

这对我有用 -

UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];

imgView.frame = [[UIScreen mainScreen] bounds]; // 将框架设置为视图的大小

[self.view addSubview:imgView]; [self.view sendSubviewToBack:imgView];

# jquery - DIV 标记高度不会拉伸以填充父空间

> ID：12531805
> 
> 赞同：1
> 
> 时间：2012-09-21T13:45:27.737
> 
> 标签：jquery, css, html, height

我正在尝试获取包含 Object 标记的嵌套 DIV 标记，以拉伸到其父容器的剩余空间。

我拥有的是由 3 个 DIV 标签组成的页眉内容页脚模板。内容 DIV 有一个包含另一个 HTML 页面的对象。页眉和页脚的高度设置为绝对像素值。我希望内容 DIV 占用剩余空间。无论我做什么，似乎我能想到的最好的办法就是将 DIV 内容标签设置为屏幕高度的 100%。这是代码：

```
<body>
<div id="pageWrap">
<div id="page">
    <div id="header" style="height:68px;"></div>
    <script type="text/javascript">
            $(document).ready(function() {
                $("#header").load('header.jsp');
            });
    </script>
    <div id="mapLocation" style="width:100%; height:100%; overflow:auto;">
    <object type="text/html" style="width:100%; height:100%;" data="top/index.html"></object>
    </div>
    <div id="footer"></div>
    <script type="text/javascript">
        $(document).ready(function() {
                $("#footer").load('footer.jsp');
        });
    </script>
</div>
</div>
</body> 
```

任何解决方案都很好，jQuery、CSS 或其他！

谢谢您的帮助

吉尔曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:53:14.710

如果您为页眉和页脚提供绝对位置，那么您可以只使用百分比值吗？

就像是：

```
#header {
height:20%;
}

#footer {
height: 20%;
}

#div {
height: 60%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:07:24.410

认为这与我几周前回答的问题相同： [页面填充窗口，内容填充空白](https://stackoverflow.com/questions/12284561/page-fills-window-with-content-filling-the-gap/12285338#12285338)

# excel - 如何格式化这些数字？

> ID：12531806
> 
> 赞同：2
> 
> 时间：2012-09-21T13:45:29.857
> 
> 标签：excel, excel-2007

以当前数字的以下示例为例，以及我希望它们的格式：

```
1             001
65            065
651           651
651001        651.001
651001001     651.001.001 
```

我怎样才能做到这一点？它需要是**格式** *而不是*公式（这实际上将用于 SQL 查询中的 MS Access 项目，它接受相同的格式）。

我试过使用`###"."###"."000`，但它在前几个例子中显示了额外的点：

```
..001
..065
..651
.651.001
651.001.001 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:01:00.927

您可以尝试将其作为自定义格式输入：

```
[>999999]000"."000"."000;[>999]000"."000;000 
```

# mercurial - 为什么我的 dll 不包含在我导出的补丁中？

> ID：12531807
> 
> 赞同：7
> 
> 时间：2012-09-21T13:45:36.700
> 
> 标签：mercurial, tortoisehg

我使用 TortoiseHg 从 Mercurial 存储库中导出了一些变更集。

这很好，除了 SignalR dll 不包含在我添加这些 dll 的变更集的补丁中。

为什么他们不被包括在内？如果我查看我机器上的变更集，我可以看到 dll 已添加到变更集中。

如何将这些 dll 添加到补丁中！？

我通过 nuget 安装了 SignalR。

提前致谢。

编辑：我还注意到对该文件的另一个更改也不包含在该更改集的补丁中。

编辑：当我在记事本++中打开补丁时，我看到提到的文件：
diff -r b10c68a2d387 -r 74aa5e71d315 MyProject/_sln/packages/SignalR.Server.0.5.3/lib/net40/SignalR.dll
二进制文件 MyProject/_sln /packages/SignalR.Server.0.5.3/lib/net40/SignalR.dll 已更改

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T20:28:26.790

看起来您没有将`--git`选项传递给[`hg export`](http://www.selenic.com/mercurial/hg.1.html#export). 不`--git` `hg export`包括对二进制文件（或权限等）的更改。

就个人而言，我认为这应该是现在以某种形式产生差异的所有东西的默认设置，但它仍然不是。

> 文件 -> 设置

![在此处输入图像描述](../Images/bd3d0cf1603dc9233f8d323c66836c6b.png)

# c# - 读取 C# 中 WinRT 文本框的行

> ID：12531816
> 
> 赞同：-1
> 
> 时间：2012-09-21T13:46:02.220
> 
> 标签：c#, windows, textbox, windows-runtime, line

我如何在 C# 中读取 Windows 8 WinRT TextBox 行的内容？我没有找到解决这个问题的方法？它不像在.Net中那样工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:53:12.223

```
var lines = textboxName.Text.Split(Environment.NewLine.ToCharArray(), StringSplitOptions.RemoveEmptyEntries); 
```

会给你一个文本框中的行，根据框的内容显式拆分。（删除空条目说明实际上`Environment.NewLine`是两个字符长。）

如果您想在多行文本框中（即发生换行的位置）中由 UI 拆分字符串，则必须更详细地测量字符串等，但我不推荐它，除非您*绝对必须拥有UI 列出的字符串*

# php - 检测同时上传过程

> ID：12531820
> 
> 赞同：2
> 
> 时间：2012-09-21T13:46:07.230
> 
> 标签：php, jquery, ajax, session, cookies

使用 php，我在一个进程中将文件上传到两个单独的服务器。可能，这需要一些时间才能完成。

在这里，最终用户可能会打开另一个窗口进行另一个上传，这样同时处理的数量会增加。因此，这将影响当前正在运行的上传过程以输出不需要的结果。

所以我想禁用多个（或至少第三个）同时文件上传过程。当用户在其他人完成之前第二次或第三次尝试上传文件时，他应该得到警告。

任何人都请指导我如何使用 php session cookies / Jquery Ajax 实现？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:42:14.233

您可以使用 Memcache 轻松实现此目的，因为您将在多个服务器上工作，您需要一个可用于跟踪上传过程的中央系统

例子

```
$maxAllowedProcess = 1;
$uploadKey = "uploadProcess";
$memcache = new \Memcache();
$memcache->connect('localhost', 11211);
$runtime = (int) $memcache->get($uploadKey);

if ($runtime >= $maxAllowedProcess) {
    echo "Sorry you can not upload at the moment tay again in 30mins" ;
} else {
    $runtime ++;
    $memcache->set($uploadKey, $runtime);

    // Stat upload Process on any server
    // example move_uploaded_file($filename, $destination) ;;

    $runtime = (int) $memcache->get($uploadKey);
    $runtime = ($runtime < 1) ? 0 : $runtime ++;
    $memcache->set($uploadKey, $runtime);

    echo "Upload Sucessfull" ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:50:21.593

您可以读取 session_id 并在某处保存该会话的标志，直到完成上传。在接受新的上传之前检查标志是否存在（或值计数）。上传完成后，删除（或减小值）该标志。存储可以是数据库或服务器中的文件。或者使用 user_id 代替 session_id，除非您有匿名上传 - 无论如何这不是一个好主意。

# java - java.io.EOFException 杰克逊处理器

> ID：12531822
> 
> 赞同：0
> 
> 时间：2012-09-21T13:46:13.757
> 
> 标签：java, jquery, jsp, spring-mvc, jackson

我正在将 Spring MVC 与杰克逊处理器一起使用。当 JSON 请求作为 POST 请求发送到服务器时，@RequestBody 将被反序列化为我需要的对象。发送 GET 请求时出现问题，它实际上显示 Http 500 Internal Server 错误。抛出的异常是：

```
java.io.EOFException: No content to map to Object due to end of input 
org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2022) 
org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:1974) 
org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1331) 
org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal  (MappingJacksonHttpMessageConverter.java:135) 
org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:154) 
org.springframework.web.bind.annotation.support.HandlerMethodInvoker.readWithMessageConverters(HandlerMethodInvoker.java:633) 
org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveRequestBody(HandlerMethodInvoker.java:597) 
 org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments  (HandlerMethodInvoker.java:346) 
org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171) 
org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426) 
org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414) 
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790) 
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) 
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) 
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:617) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

不发送空字符串，并且将正确的 JSON 发送到服务器。我不确定为什么会这样。下面是我的代码：

JSP - index.jsp

```
<%@page language="java" contentType="text/html"%>
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>  
<script type="text/javascript">
$(function() {  
$('#myForm').submit(function() { 
    var form = $( this ), 
        url = form.attr('action'), 
        userId = form.find('input[name="userId"]').val(),
        dat = JSON.stringify({ "userId" : userId }); 

    $.ajax({ 
        url : url, 
        type : "GET", 
        traditional : true, 
        contentType : "application/json", 
        dataType : "json", 
        data : dat, 
        success : function (response) { 
            alert('success ' + response); 
        }, 
        error : function (response) { 
            alert('error ' + response); 
        }, 
    }); 

    return false; 
   }); 
 }); 
</script>
</head>
<body>
<h2>Application</h2>
<form id="myForm" action="/application/user/find" method="GET">
    <input type="text" name="userId" value="user1">
    <input type="submit" value="Submit">
</form>
      </body>
</html> 
```

一旦我在 JSP 和控制器方法中将请求类型更改为 POST，一切似乎都正常工作。

```
package com.web;

@Controller
@RequestMapping("/user/*")
public class UserController {

@RequestMapping(value = "find", method = RequestMethod.GET, headers = {"content-type=application/json"})
public @ResponseBody UserResponse save(@RequestBody User user) throws Exception {
    UserResponse userResponse = new UserResponse();
                System.out.println("UserId :" + " " + user.getUserId());
    return userResponse;
} 
```

豆类.xml

```
<context:component-scan base-package="com.web"/>

<mvc:annotation-driven/>

<context:annotation-config/> 
```

用户.java

```
public class User implements Serializable {

private String userId;

public User() {

}

// Getters and setters
} 
```

当发送 GET 请求时，浏览器通常会显示 %%user%%。这只是一个例子。Jackson 处理器是否仍会读取 GET 请求？

我不知道问题出在哪里。我希望你能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:18:46.680

[我在http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)阅读了以下关于 jQuey.ajax() 中 data 参数的作用的描述：

要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。……

所以它被附加到 URL 并且没有请求正文。这是与 GET 语义一致的行为，如果要发布数据，请使用 POST。

# python - python - 请帮助无法弄清楚如何添加数组的用户输入

> ID：12531825
> 
> 赞同：0
> 
> 时间：2012-09-21T13:46:32.560
> 
> 标签：python, arrays, range

如何使用 python 编写一个函数 sum(a)，它接受一个数字数组 a 并返回它们的总和？

我试过了，但我无法弄清楚如何让用户输入数字数组这是我到目前为止所拥有的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:48:02.580

您采用内置功能[`sum()`](http://docs.python.org/library/functions.html#sum)：

```
>>> sum(range(10))
45 
```

从文档中：

> 从左到右`start`对可迭代对象的总和和项目并返回总数。`start`默认为`0`. 可迭代的项目通常是数字，并且`start`值不允许是字符串。

如果用户输入是字符串的形式，你需要先把它们变成整数。生成器表达式可以为您做到这一点：

```
>>> user_input = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']
>>> sum(int(v) for v in user_input)
45 
```

# c# - 通过 LinkBut ton 从 asp gridview 中删除行

> ID：12531826
> 
> 赞同：0
> 
> 时间：2012-09-21T13:46:36.323
> 
> 标签：c#, gridview

我花了很长时间研究如何做到这一点，但没有运气。

```
<asp:GridView runat="server" ID="TBDSPCGrid"
                    AutoGenerateColumns="false"
                    AllowPaging="true"
                    AllowSorting="false"
                    DataKeyNames="SPID,CategoryId,Category,RowNum, PurchaseDate, Title, Description,SFItemId" 
                    OnRowDataBound="TBDSPC_RowDataBound"
                    OnRowCreated="TBDSPC_RowCreated"
                    OnRowCommand="TBDSPC_Command"
                    OnPageIndexChanging="TBDSPC_PageIndexChanging"
                    OnRowDeleting="TBDSPC_OnRowDeleting">
                    <Columns>
                        <asp:TemplateField HeaderText="Timeouts" ItemStyle-Width="40px" ItemStyle-Wrap="false"
                            ItemStyle-CssClass="padding-right">
                            <ItemTemplate>
                                <div class="targeted-icons">
                                    <asp:LinkButton runat="server" id="LinkButton1" CommandName="delete" CommandArgument='<%#Eval("SFItemId")%>'
                                    ><img src="delete.png" /></asp:LinkButton>
                                </div>
                            </ItemTemplate>
                        </asp:TemplateField> 
```

那么我应该在这里做什么？

```
protected void TBDSPCGrid_OnRowDeleting(object     sender, GridViewDeleteEventArgs e)
    {
        // do something
    } 
```

我试过了，但它不起作用......它给了我一个“对象引用未设置为对象实例”的错误

```
protected void TBDSPC_Command(object sender, GridViewCommandEventArgs e)
    {
        GridView gv = (GridView)sender;
        switch (e.CommandName)
        {
            case "delete":
                {
                    DataTable test = TargetedSpView.ToTable();
                    test.Rows[0].Delete();
                    test.AcceptChanges();
                    TargetedSpView = test.DefaultView;
                    this.TBDSPCGrid.DataSource = this.TargetedSpView;
                    this.TBDSPCGrid.DataBind();
                }
                break;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:42:13.567

```
protected void TBDSPC_Command(object sender, GridViewCommandEventArgs e)
{
    GridView gv = (GridView)sender;
    switch (e.CommandName)
    {
        case "delete":
            {
                    DataTable test = RetrieveData(0, 0); // this is a function I used to get a datatable
                    test.Rows[0].Delete();
                    test.AcceptChanges();
                    TargetedSpView = test.DefaultView;
                    TBDSPCGrid.DataSource = TargetedSpView;
                    TBDSPCGrid.DataBind();
            }
            break;
}
} 
```

# android - 可以在 android 4.0 Enumator 中添加 Exchange 帐户

> ID：12531827
> 
> 赞同：0
> 
> 时间：2012-09-21T13:46:39.560
> 
> 标签：android, android-calendar

我正在尝试在 Android 4.0 模拟器中添加事件，因为我必须添加一个 Exchange 帐户。这就是我得到的回应。

![回复](../Images/f367ef89bf450c26bea721c992f092c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:25:18.543

我自己找到了答案

输入`m.google.com`服务器地址。并在设置过程中选择该`SSL`选项。

# php - PHP 函数 json_decode 将浮点值解码为 int，点后为零

> ID：12531828
> 
> 赞同：4
> 
> 时间：2012-09-21T13:46:39.913
> 
> 标签：php, json

我有一个 JSON 字符串，其中包含一些具有以下值的键：123.00。当我使用 json_decode 函数时，我得到了前一个键等于 123，而不是 123.00 的解码字符串。有没有办法纠正解码这些值而不用引号括起来？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T13:51:22.820

这是目前作为 PHP 错误提出的：

**错误报告**：[https ://bugs.php.net/bug.php?id=50224](https://bugs.php.net/bug.php?id=50224)

将来，可能会有通过`options`参数传递标志以进行更严格输入的功能。然而，现在，用引号括起来就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:52:23.617

我不认为这是可能的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:15:49.097

```
//convert the json to a string before json_decode
$res = preg_replace( '/next_cursor":(\d+)/', 'next_cursor":"\1"', $json ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:51:38.977

```
number_format($number, 2) 
```

通过那个输出数字？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-28T12:59:51.437

您可以使用该`JSON_BIGINT_AS_STRING`选项，例如：

```
$json = json_decode($input, true, 512, JSON_BIGINT_AS_STRING); 
```

不过要小心，这只适用于 PHP 5.4+！

# tcl - 关于tcl中的全局变量

> ID：12531830
> 
> 赞同：0
> 
> 时间：2012-09-21T13:46:44.327
> 
> 标签：tcl, global

我对 TCL 中的全局变量有疑问：

```
set gvar "abc"

proc justTest {} {
    global gvar
    puts $global
} 
```

如果在全局空间中声明了一个变量，我们应该`global`在proc内部使用关键字来访问全局变量，但是如果在哪里没有声明全局变量，但是我们`global`在函数内部使用关键字，会发生什么？例如：

### 没有声明全局变量

```
proc justTest {} {
        global gvar
        set here $gvar
        puts $here
    } 
```

那么会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:55:16.957

就像您尝试访问从未声明过的局部变量一样。

```
can't read "gvar": no such variable 
```

在相关说明中，如果您`set`是 proc 中的变量，您*将*能够从主范围访问它（当然在调用 proc 之后）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:58:55.397

### 案例 1：您正在引用全局变量

在这种情况下，您正在使用它的值，但没有设置它。**在定义**proc`gvar`之前，您不必设置全局变量。您只需要在**调用**您的 proc之前进行设置。未事先设置将导致错误。**`gvar`**`gvar`****

 ****### 案例2：你设置了全局变量的值

在这种情况下，您无需在调用 proc 之前创建全局变量。调用您的 proc 后，全局变量将被创建并可用。****

# knockout.js - 清除 CSS 绑定

> ID：12531831
> 
> 赞同：0
> 
> 时间：2012-09-21T13:46:48.430
> 
> 标签：knockout.js

我有一个这样的计算 css 绑定

```
this.iconCss = ko.computed(function () {
    var css = { icon: true };
    css[this.state().toLowerCase()] = true;
    return css;
}, this); 
```

它的作用是显示一个图标，可视化工作流中每个步骤的状态，例如，我希望 css 看起来像这样`class="icon running`“或`class="icon failed"`等等

问题是css绑定不会清除旧类，所以如果我首先拥有这个`class="icon queued"`并将状态更改为运行新类将`class="icon queued running"`是错误的，我为它分配一个新的对象文字并不重要，旧类不会被清除，一种方法是存储对象文字并对其进行迭代并将其所有属性设置为false。如果没有内置清除 css 绑定的清洁器，那是我最后的手段。

**编辑：**这是一个解决方案，但我不喜欢它

```
this.iconCssState = {};

this.iconCss = ko.computed(function () {
    for (var index in this.iconCssState) {
        this.iconCssState[index] = false;
    }

    this.iconCssState.icon = true;
    this.iconCssState[this.state().toLowerCase()] = true;
    return this.iconCssState;
}, this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:52:33.663

[`class`](https://github.com/SteveSanderson/knockout/wiki/Bindings---class)你可以用我的绑定做你想做的事。（请注意，在下一个版本的 Knockout 2.2 中，您将能够以`css`相同的方式使用绑定。）

```
<div class="icon" data-bind="class: state().toLowerCase()"></div> 
```

# javascript - Javascript RegEx：在顺序数组中提取单词和分隔符

> ID：12531835
> 
> 赞同：0
> 
> 时间：2012-09-21T13:46:53.587
> 
> 标签：javascript, regex

如何在 JavaScript 中解析字符串并仅提取单词，但在结果数组中保留分隔单词的其他文本部分。

```
"  This is - a string.  With two  and one spaces!" 
```

至：

```
['  ', 'This', ' - ', 'a', ' ', 'string', '.  ', 'With'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:49:14.410

你可以写：

```
var resultArray = origString.split(/\b/); 
```

链接：

*   [MDN 页面在`String.split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)
*   [正则表达式上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)的 MDN 页面（搜索页面`\b`或“单词边界”）

# drupal - Drupal 6：Zencoder 和 S3 访问问题

> ID：12531839
> 
> 赞同：1
> 
> 时间：2012-09-21T13:47:03.217
> 
> 标签：drupal, video, amazon-s3

我的 2 个基本问题是让 zencoder 将转换后的视频保存到我的 s3 存储桶并让 drupal 正确访问 s3。我设置了 zencoder、s3 以及您可以在网上找到的每个“在 drupal 中设置 s3 和 zencoder”教程中提到的所有其他视频模块，并完成了所有必需的配置，但仍然无法解决我遇到的问题。

当视频上传到我的网站时，它会同时保存到我的 dev.myurl.com/sites/default/files/videos/original/ 文件夹和我的 s3 存储桶中的 sites/default/files/videos/original 文件夹中，已转码到 mp4 然后 5 个缩略图保存在我的 s3 存储桶中的正确文件夹中，但转换后的视频被发送到 zencoder 自己的临时位置，而不是它应该在我的 s3 存储桶中创建的站点/默认/文件/视频/转换文件夹。当我尝试播放视频时，它显示“此视频正在处理中。请稍候。”。当我去编辑视频并从那里播放时，它会从我的 dev.myurl.com/sites/default/files/videos/original/ 文件夹中播放。s3 中的缩略图也没有被使用，我坚持使用默认值。

我知道这似乎是一个常见问题，可以通过阅读其他主题来解决，但我整个星期都在阅读它们，但收效甚微。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:50:43.773

我今天早上刚修好了。这是通过重新安装视频模块解决的数据库中视频预设表的问题。我的印象是视频的编码和存储在我的网站上无法正常工作，因为 Zencoder 或 S3 设置不正确，并且错误发生在 drupal 之外，但事实证明视频配置中的转换预设从未携带由于数据库中缺少表而结束。重新安装会重新创建表，从而消除数据库问题。

# c++ - C++ 从 back_insert_iterator 转换为仿函数内的迭代器

> ID：12531841
> 
> 赞同：0
> 
> 时间：2012-09-21T13:47:09.277
> 
> 标签：c++, iterator

我有点尝试实现一种复制运算符。目的是有两个类：一个浏览容器，一个用它做一些事情。Browse 类还（出于某种原因）在输出容器上维护一个迭代器，另一个可以用它计算增量。

不幸的是，编译器似乎无法将 back_insert_iterator 转换为输出迭代器。为什么？

```
#include <iostream>
#include <iterator>
#include <vector>

typedef std::vector<int> Vec;

// An operator that copy an item onto another
template< class TIN, class TOUT >
class DoCopy
{
    TOUT operator()( const typename TIN::iterator i_in, const typename TOUT::iterator i_out )
    {
        const typename TOUT::iterator i_incr = i_out;
        (*i_incr) = (*i_in);
        std::advance( i_incr, 1 );
        return i_incr;
    }
};

// The class that iterate over a container, calling an operator for each item
template< class TIN, class TOUT >
class Browse
{
    public:
        // We keep a reference to the operator that really do the job
        DoCopy<TIN,TOUT> & _do;
        Browse( DoCopy<TIN,TOUT> & op ) : _do(op) {}

        // Iterate over an input container
        TOUT operator()(
                const typename TIN::iterator in_start,
                const typename TIN::iterator in_end,
                const typename TOUT::iterator out_start
            )
        {
            TOUT i_out = out_start;

            for( TIN i_in = in_start; i_in != in_end; ++i_in ) {
                // it is not shown why here, but we DO want the operator to increment i_out
                i_out = _do(i_in, i_out);
            }
        }
};

int main()
{
    // in & out could be the same type or a different one
    Vec in;
    Vec out;
    DoCopy<Vec,Vec> do_copy;
    Browse<Vec,Vec> copy(do_copy);

    std::back_insert_iterator< Vec > insert_back(out);

    // Here, g++ cannot find the corresponding function :
    copy( in.begin(), in.end(), insert_back );

} 
```

g++ 编译失败，出现以下错误：

```
$ g++ test.cpp && ./a.out
    test.cpp: In function ‘int main()’:
    test.cpp:54:49: erreur: no match for call to ‘(Browse<std::vector<int>, std::vector<int> >) (std::vector<int>::iterator, std::vector<int>::iterator, std::back_insert_iterator<std::vector<int> >&)’
    test.cpp:22:11: note: candidate is:
    test.cpp:30:18: note: TOUT Browse<TIN, TOUT>::operator()(typename TIN::iterator, typename TIN::iterator, typename TOUT::iterator) [with TIN = std::vector<int>, TOUT = std::vector<int>, typename TIN::iterator = __gnu_cxx::__normal_iterator<int*, std::vector<int> >, typename TOUT::iterator = __gnu_cxx::__normal_iterator<int*, std::vector<int> >]
    test.cpp:30:18: note:   no known conversion for argument 3 from ‘std::back_insert_iterator<std::vector<int> >’ to ‘__gnu_cxx::__normal_iterator<int*, std::vector<int> >’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:16:28.160

这是问题的主要来源：`std::back_insert_iterator< V<T> >`并且`std::vector<T>::iterator`在它们的继承树中没有直接关系：

*   `std::vector<T>::iterator`是一个`__normal_iterator<T>`（没有其他超类）（查看`stl_vector.h`for`std::vector<T>::iterator`和`stl_iterator.h`for `__normal_iterator`）
*   `std::back_insert_iterator< V<T> >`是一个迭代器（没有其他超类）（查看`stl_iterator.h`for`std::back_insert_iterator`和`stl_iterator_base_types.h`for `std::iterator`）。

它们不能向任何方向转换。

因此，第二个模板参数应该直接是 the`std::back_insert_iterator`或 the `iterator<>`，第一个参数表明这是一个输出运算符。

，`std::advance( iterator, 1 )`我假设您的意思是`++iterator`，这是为迭代器转到下一个元素的标准方法。

此外， out 迭代器不应该是`const`，否则它们不会实现做作`operator=`。

第 38 行，`i_in`应该是 type`typename TIN::iterator`而不是`TIN`。Browse`operator()`还必须返回 out 迭代器。

最终代码如下所示：

```
#include <iostream>
#include <iterator>
#include <vector>

typedef std::vector<int> Vec;

// An operator that copy an item onto another
template< class TIN, class TOUT >
class DoCopy
{
    public:

    TOUT operator()( const typename TIN::iterator i_in, const TOUT i_out )
    {
        TOUT i_incr = i_out;
        (*i_incr) = (*i_in);
        //std::advance( i_incr, 1 );
        ++i_incr;
        return i_incr;
    }
};

// The class that iterate over a container, calling an operator for each item
template< class TIN, class TOUT >
class Browse
{
    public:
        // We keep a reference to the operator that really do the job
        DoCopy<TIN,TOUT> & _do;
        Browse( DoCopy<TIN,TOUT> & op ) : _do(op) {}

        // Iterate over an input container
        TOUT operator()(
                const typename TIN::iterator in_start,
                const typename TIN::iterator in_end,
                const TOUT out_start
            )
        {
            TOUT i_out = out_start;

            for( typename TIN::iterator i_in = in_start; i_in != in_end; ++i_in ) {
                // it is not shown why here, but we DO want the operator to increment i_out
                i_out = _do(i_in, i_out);
            }
            return i_out;
        }
};

int main()
{
    // in & out could be the same type or a different one
    Vec in;

    in.push_back(1);
    in.push_back(3);
    in.push_back(3);
    in.push_back(7);

    Vec out;
    DoCopy<Vec, std::back_insert_iterator<Vec> > do_copy;
    Browse<Vec, std::back_insert_iterator<Vec> > copy(do_copy);

    std::back_insert_iterator< Vec > insert_back(out);

    // Here, g++ cannot find the corresponding function :
    copy( in.begin(), in.end(), insert_back );

    for( unsigned i = 0, s = out.size(); i < s; ++i )
    {
        std::cout << out[i] << " ";
    }
    std::cout << std::endl;
} 
```

感谢*clang++*，它使 C++ 错误更加清晰。

# sql-server - 在选择查询中添加动态列 - MS SQL

> ID：12531843
> 
> 赞同：0
> 
> 时间：2012-09-21T13:47:16.963
> 
> 标签：sql-server

我使用 Ms SQL 数据库，我的表看起来，

```
SrNo  Emp_ID   Date          Time 
------------------------------------
  1    25     03-Sep-12    9:35:35 AM  
  2    25     03-Sep-12   10:31:32 AM 
  3    25     03-Sep-12   10:34:13 AM 
  4    25     03-Sep-12   11:05:08 AM 
  5    25     03-Sep-12   11:08:39 AM 
  6    25     04-Sep-12   09.05.40 AM 
```

预期的输出是

```
 SrNo  Emp_ID   Date          Time     Type 
---------------------------------------------
  1    25     03-Sep-12    9:35:35 AM  IN
  2    25     03-Sep-12   10:31:32 AM  OUT
  3    25     03-Sep-12   10:34:13 AM  IN
  4    25     03-Sep-12   11:05:08 AM  OUT
  5    25     03-Sep-12   11:08:39 AM  IN
  6    25     04-Sep-12   09.05.40 AM  IN 
```

对于员工，必须在特定日期同时添加“输入”和“输出”。对于下一个日期或下一个/同一员工，类型必须以“IN”开头。任何 1 都可以帮助我编写 sql 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:02:53.870

您可以使用附加列来实现此目的

`ROW_NUMBER() OVER (PARTITION BY Emp_ID, Date ORDER BY Time) AS RN`

然后检查模数 2，如果余数为 1，则为 IN，如果为 0，则为 OUT，根据您的要求。

进一步来说

```
CASE WHEN 
  ROW_NUMBER() OVER (PARTITION BY Emp_ID, Date ORDER BY Time) % 2 = 1 
     THEN 'IN' 
     ELSE 'OUT' 
  END AS [Type] 
```

# nhibernate - 重新编译 NHibernate 2 源

> ID：12531844
> 
> 赞同：0
> 
> 时间：2012-09-21T13:47:18.547
> 
> 标签：nhibernate

我们正在使用 NH 2 并且需要 NH 3 ( `JOIN ...`**`AND (...)`**) 的一些功能。从源头复制它们很容易。所以我想知道在重新编译NH 2并使用而不是NH开发人员编译的那个之后，应用程序中是否会出现任何意外错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:36:43.000

如果您有其他引用特定 NH 版本的预构建程序集，则可能会出现问题。在这种情况下，您可能需要执行[程序集绑定重定向](http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs.71%29.aspx)。就个人而言，如果我想要它的功能，我会尝试将所有东西升级到 NH 3，因为这样我就不必担心管理程序集的分叉版本。

# algorithm - 困难算法：1的最优解

> ID：12531845
> 
> 赞同：0
> 
> 时间：2012-09-21T13:47:31.173
> 
> 标签：algorithm

这是那些困难的算法之一，只是因为有很多选择。想象一个数字“N”和一组小于 10 的素数，即 {2, 3, 5, 7}。目标是不断除以 N 直到我们达到 1。如果在任何步骤 N 都不能被任何给定的素数整除，那么您可以进行以下操作：

i) N= N-1 或 ii) N=N+1

这将确保 N 是偶数，我们可以继续。

应在使用最少操作数的同时实现该目标。

请注意，这听起来可能微不足道，即您可以在算法中实施一个步骤，即“如果 N 可被任何素数整除，则除以它”。但这并不总是产生最佳解决方案

例如，如果 N=134：现在 134 可以被 2 整除。如果你除以 2，你会得到 67。67 不能被任何素数整除，所以你做一个运算，N 将是 66/68，这两个都需要另一个运算。所以总共2次操作。

或者，如果 N=134 并且您执行操作 N=N+1 即 N=135，在这种情况下，达到 1 所需的总操作数为 1。所以这是最佳解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:02:41.050

除非这个问题有一些数学解决方案（如果您正在寻找数学解决方案，[math.SE](https://math.stackexchange.com/)更适合这个问题） - 您可以**将问题简化为[最短路径问题](http://en.wikipedia.org/wiki/Shortest_path_problem)**。

将问题表示为`G=(V,E)`（`V = N`所有自然数）和`E = {(u,v) | you can get from u to v in a single step }`¹的图。

现在，您需要运行从源（输入数字）到目标（数字 1）的经典搜索算法。获得最佳解决方案的一些选择是：

1.  [BFS](http://en.wikipedia.org/wiki/Breadth-first_search) - 由于简化图没有加权，BFS 保证既是完整的（如果存在则找到解决方案）和最优的（找到最短的解决方案）。
2.  启发式[A*](http://en.wikipedia.org/wiki/A*_search_algorithm) - 也是完整且最优的²，如果你有一个好的启发式函数 - 应该比不知情的 BFS 更快。

**优化说明：**
图形可以“即时”构建，无需将其创建为预处理。为此，您将需要一个`next:V->2^V`（从一个节点到一组节点）函数，这样`next(v) = {u | (v,u) is in E}`

**PS**复杂性评论：BFS 解决方案是伪多项式（在输入数最坏的情况下是线性的），因为您将开发的“最高”顶点是`n+1`，所以解决方案基本上是`O(n)`最坏的情况 - 尽管我相信更深入的分析可以将其限制为更好的限制。

* * *

(1) 如果您只对 +1/-1 计为 ops 感兴趣，您可以在完成除法后根据目标创建边。
(2) 如果使用了[允许的启发式函数](http://en.wikipedia.org/wiki/Admissible_heuristic)。

# javascript - 如何解析这个javascript数组？

> ID：12531846
> 
> 赞同：0
> 
> 时间：2012-09-21T13:47:31.873
> 
> 标签：javascript, parsing, multidimensional-array, menuitem

我正在尝试使用对象解析一个 javascript 数组，类似于：

```
function Obj(MenuText, stuff, someStuff) {
    this.text = MenuText;
    this.stuff = stuff;
        this.someStuff = someStuff;
}

myArray[0] = new Array();
myArray[0][1] = new Obj('MenuText', 'A', 'F');
myArray[0][2] = new Obj('MenuText2', 'A', 'F');
myArray[1] = new Array();
myArray[1][1] = new Obj('Submenu Option', 'A', 'F');
myArray[2] = new Array();
myArray[2][1] = new Obj('Submenu Option', 'A', 'F'); 
```

我需要以一种可以通过这种方式创建列表的方式解析数组：

```
<ul>
<li>MenuText
<ul>
<li>Submenu Option</li>
</ul>
</li>
<li>MenuText2
<ul><li>Submenu Option2</li></ul>
</li>
</ul> 
```

因此，菜单项的菜单选项包含在下一个主要位置，例如，菜单项 4 的按钮将位于 myArray[0][3].MenuText，但将显示的选项位于 myArray[3 ][1...N]，就像你必须反转索引一样。

我希望我已经足够清楚了，非常感谢你们，任何建议或想法都将不胜感激，这是一个给我带来的错误很少且我无法解决的问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:53:43.900

您不需要 jQuery，但您的对象结构似乎很奇怪。

以与嵌套在 DOM 结果中相同的方式将子菜单嵌套在对象结构中会更有意义。

```
var myArray = [];

function Obj(MenuText, stuff, someStuff) {
    this.text = MenuText;
    this.stuff = stuff;
    this.someStuff = someStuff;
}

myArray[0] = new Obj('MenuText', 'A', 'F');
myArray[0].submenu = new Obj('Submenu Option', 'A', 'F');

myArray[1] = new Obj('MenuText2', 'A', 'F');
myArray[1].submenu = new Obj('Submenu Option', 'A', 'F'); 
```

然后创建一个迭代数组的递归函数，并在找到子菜单时进行递归调用。

```
function makeMenu(menu, parent) {
    var li = parent.appendChild(document.createElement("li"));
    li.appendChild(document.createTextNode(menu.text));

    if (menu.submenu)
        makeMenu(menu.submenu, li.appendChild(document.createElement("ul")));
}

var container = document.body.appendChild(document.createElement("ul"));

for (var i = 0; i < myArray.length; i++)
    makeMenu(myArray[i], container); 
```

这假设您在一个菜单下不会有多个子菜单。这似乎不太可能。

* * *

如果一个菜单下实际上可能有多个子菜单，那么您将创建一个子菜单数组。

```
function Obj(MenuText, stuff, someStuff) {
    this.text = MenuText;
    this.stuff = stuff;
    this.someStuff = someStuff;
    this.submenus = []; // holds the sub menus
}

myArray[0] = new Obj('MenuText', 'A', 'F');
myArray[0].submenus.push(new Obj('Submenu Option', 'A', 'F'));

myArray[1] = new Obj('MenuText2', 'A', 'F');
myArray[1].submenus.push(new Obj('Submenu Option', 'A', 'F')); 
```

并稍微更改一下代码。

```
function makeMenus(menus, parent) {
    for (var i = 0; i < menus.length; i++) {
        var li = parent.appendChild(document.createElement("li"));
        li.appendChild(document.createTextNode(menus[i].text));

        makeMenus(menus[i].submenus, li.appendChild(document.createElement("ul")));
    }
}

makeMenus(myArray, document.body.appendChild(document.createElement("ul"))); 
```

这种结构比您现有的结构更自然。

# php - Codeigniter - 如何对我的数据库结果对象进行排序（对 php 对象进行排序）

> ID：12531858
> 
> 赞同：1
> 
> 时间：2012-09-21T13:48:23.857
> 
> 标签：php, database, codeigniter, object

显然活动记录不能处理临时表——在我看来是巨大的疏忽。（参考：[Codeigniter 2 活动记录 — 如何创建临时表以应用第二个排序顺序？](https://stackoverflow.com/questions/12518069/codeigniter-2-active-record-how-do-i-create-temporary-table-to-apply-second-so)）

鉴于此，我正在寻找一种方法来对我的查询产生的结果对象进行排序。

这是我的查询：

```
 $this->db
                ->select('*')
                ->from('item_categories')
                ->where('item_categories.cat_id', $c)
                ->or_where('item_categories.parent_id', $c)
                ->or_where('item_categories.gparent_id', $c)
                ->join('item_categories_rel', 'item_categories_rel.cat_id = item_categories.cat_id', 'right')
                ->join('item_entries', 'item_entries.item_id = item_categories_rel.item_id','right')
                ->join('ratings_total', 'ratings_total.item_id = item_entries.item_id')
                ->order_by("item_name", "asc")
                ->limit($l, $s);
            $result = $this->db->get(); 
```

因此，例如，我的结果包含一个名为 site_rating 的字段，其类型为 decimal(2,1) ，我如何按 asc/desc 顺序按 site_rating 对结果对象进行排序？非常感谢任何帮助。

需要明确的是，我不想更改当前顺序，我想对第一个结果集应用第二个排序顺序 - 我发现我不能对活动记录执行此操作，因此如果可能的话，我想通过对结果对象进行排序来做到这一点.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:50:18.167

```
 $this->db
                ->select('*')
                ->from('item_categories')
                ->where('item_categories.cat_id', $c)
                ->or_where('item_categories.parent_id', $c)
                ->or_where('item_categories.gparent_id', $c)
                ->join('item_categories_rel', 'item_categories_rel.cat_id = item_categories.cat_id', 'right')
                ->join('item_entries', 'item_entries.item_id = item_categories_rel.item_id','right')
                ->join('ratings_total', 'ratings_total.item_id = item_entries.item_id')
                ->order_by("site_rating", "DESC")
                ->limit($l, $s);
            $result = $this->db->get(); 
```

# wpf - 创建具有重叠内容的用户控件

> ID：12531860
> 
> 赞同：0
> 
> 时间：2012-09-21T13:48:50.580
> 
> 标签：wpf, xaml, wpf-controls

我需要制作一个（用户/自定义）控件，当“折叠打开”时，它会在其他控件上显示内容。

就像弹出、组合或菜单一样，除了内容仍会打开（想想切换按钮样式）。

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:16:35.433

取决于很多问题。

我知道至少有两种方法可以实现它。首先 - 使用`<Popup />`. 很容易将其**IsOpen**属性绑定到 bool 变量。如果你需要关闭它，我有一些聪明的行为（当按下**Esc**键或失去焦点时关闭弹出窗口）。

第二种方法是`<ContentControl />`有一个样式，它有一个触发器，它根据你想要的改变 ContentTemplate ：

```
<ContentControl Grid.Row="3" Grid.ColumnSpan="2" Grid.RowSpan="2" Content="{Binding}">
    <ContentControl.Style>
        <Style>
            <Setter Property="ContentControl.ContentTemplate" Value="{StaticResource OneTemplate}"/>
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding Property1}" Value="False"/>
                        <Condition Binding="{Binding Property2}" Value="True"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="ContentPresenter.ContentTemplate" Value="{StaticResource TwoTemplate}"/>
                 </MultiDataTrigger>
              </Style.Triggers>
          </Style>
       </ContentControl.Style>
   </ContentControl> 
```

我相信存在更多可能的方法来解决您的问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:28:49.317

简化描述。

**主要形式**

```
<Window>
  <StackPanel Orientation="Vertical">
    <ToolButton StackPanel.ZIndex="999"/>
    <TextBlock>Other content</TextBlock>
  </StackPanel>
</Window> 
```

*您需要 ZIndex 来指示溢出控件位于顶部*

**自定义控件**

```
<UserControl x:Class="ToolButton" Height="32">
  <Canvas>
    <ToggleButton x:Name="button">
      <TextBlock>Content</TextBlock>
    </ToggleButton>
    <TextBlock Canvas.Top="32" Visibility="{Binding ElementName=button, Path=IsChecked, Converter={converter:BooleanToVisibility}}">Popup</TextBlock>
  </Canvas>
</UserControl> 
```

**布尔到可见性转换器**

```
 public sealed class BooleanToVisibility : MarkupExtension, IValueConverter
  {
    public BooleanToVisibility() { }

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
      var flag = false;
      if (value is bool)
      {
        flag = (bool)value;
      }
      else if (value is bool?)
      {
        var nullable = (bool?)value;
        flag = nullable.GetValueOrDefault();
      }
      if (parameter != null)
      {
        if (bool.Parse((string)parameter))
        {
          flag = !flag;
        }
      }
      if (flag)
      {
        return Visibility.Visible;
      }
      else
      {
        return Visibility.Collapsed;
      }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
      var back = ((value is Visibility) && (((Visibility)value) == Visibility.Visible));
      if (parameter != null)
      {
        if ((bool)parameter)
        {
          back = !back;
        }
      }
      return back;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
      return this;
    }
  } 
```

# android - 果酱 SDK 小部件

> ID：12531861
> 
> 赞同：2
> 
> 时间：2012-09-21T13:48:51.193
> 
> 标签：android, sdk, widget, marmalade

我正在使用 Marmalade SDK，我想创建一个应用小部件。我用纯 Android 写了这个，现在我遇到了一个问题：如何将它附加到我的 Marmalade 项目中？我可以访问 AndroidManifest.xml，我必须在其中添加一个接收器部分，但我现在不知道如何将我的类和资源附加到 Marmalade。

编辑：感谢您的回答 Max。

我添加了

> `android-manifest=AndroidManifest.xml`
> 
> `android-external-res=android-external-res`
> 
> `android-external-jars="libs/Widget.jar"`

到我的 .mkb 文件和这个

```
<receiver android:name="WidgetProvider" android:label="@string/widget1name">
<intent-filter>
<action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
</intent-filter>
<meta-data android:name="android.appwidget.provider"
android:resource="@xml/widget_info" />
</receiver> 
```

到我的 AndroidManifest.xml

现在，当我启动我的应用程序时，我没有错误，但我的小部件没有显示在小部件列表中。

有任何想法吗？我也应该使用这个吗？

> `android-custom-activity`
> 
> `android-extra-application-manifest`

我应该如何使用它？

编辑：好的，我找到了，部分接收器不应该在活动中，而是在应用程序中。但下一个问题是我的小部件中的文件 R.java。果酱应用程序看不到它。我必须把它放在哪里？当我启动我的小部件时，出现异常：android.widget.RemoteViews$ActionException：找不到视图：0x ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:46:21.237

您需要配置选项：

*   android-external-jars
*   安卓外部资源
*   安卓自定义活动
*   机器人清单
*   android-extra-application-manifest

[http://developer.roolez.com/marmaladesdk/deploy/deploymenttoolsettings/configurationsettings/androidconfigurationsettings.html](http://developer.roolez.com/marmaladesdk/deploy/deploymenttoolsettings/configurationsettings/androidconfigurationsettings.html)

# javascript - 如何在 jqplot 折线图中设置/绘制带有分钟的图表？

> ID：12531863
> 
> 赞同：1
> 
> 时间：2012-09-21T13:48:51.440
> 
> 标签：javascript, jquery-ui, charts, jqplot, linechart

我想动态绘制图表.. 取决于用户的选择。下面是屏幕截图.. ![在此处输入图像描述](../Images/ac4cbebccc7ecec2ac0bc6fa0d3c0d6d.png)

在这我做了一些事情。

```
var plot2 = $.jqplot(div, mainArray, {
                            title:chartValue[1],
                            seriesDefaults: {
                                lineWidth:1,
                                markerOptions: { show:true, size:3 },
                                rendererOptions: {
                                    smooth: true
                                }
                            },
                            axesDefaults: {
                                labelOptions:{textColor:'#313233', fontSize:'11px',fontWeight:'Bold', fontFamily:'Arial'}
                            },
                            axes:{
                                xaxis:{
                                    renderer: $.jqplot.DateAxisRenderer,
                                    rendererOptions:{
                                        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                                        tickInset:0
                                    },
                                    //tickRenderer:$.jqplot.CanvasAxisTickRenderer,
                                    tickOptions:{
                                        autoscale:true,
                                        fontSize:'10px',
                                        fontFamily:'Arial',
                                        angle:-90,
                                        formatString: dFormat
                                    },
                                    //min: minDate,
                                    //max: maxDate,
                                    tickInterval:timeInterval
                                },
                                yaxis:{
                                    min: 0,
                                    max: maxV.length > 1 ? parseInt(maxV) + ((parseInt(maxV)/10)): parseInt(maxV)+2,
                                    tickOptions: {
                                        formatString: '%d',
                                        fontSize:'10px',
                                        fontFamily:'Arial',
                                        showGridline: true,
                                        showLabel: true
                                    },
                                    base: Math.E,
                                    forceTickAt0: true
                                }
                            },

                            legend: {
                                show: true,
                                labels: legendNames,
                                //placement: 'outsideGrid'
                                renderer:$.jqplot.EnhancedLegendRenderer,
                                location: 'ne',     // compass direction, nw, n, ne, e, se, s, sw, w.
                                xoffset: 10,        // pixel offset of the legend box from the x (or x2) axis.
                                yoffset: 10        // pixel offset of the legend box from the y (or y2) axis.
                            },

                            cursor:{
                                show:true,
                                style:'auto',
                                followMouse:true,
                                zoom:true,
                                looseZoom:true,
                                showTooltip:false
                            }

                        }); 
```

在这个从 12.00 开始的时间。但我希望它靠近数据。这怎么可能？

笔记：

```
mainArray = data
dFormat = string format for date time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:58:17.823

我认为你只需要设置`min`你在下面注释掉的属性`xaxis`。

根据您`mainArray`的格式化方式，您可以使用`mainArray[0][0][0]`或获取第一个日期值`mainArray[0][0]`。或者，您可能必须设置/传递变量`minDate`。

# java - 硒有什么替代品吗？

> ID：12531871
> 
> 赞同：4
> 
> 时间：2012-09-21T13:49:23.967
> 
> 标签：java, selenium-webdriver, webtest

我使用 Selenium а web 驱动程序编写了测试网站的测试。当我使用 Firefox 网络驱动程序时没有问题，但我必须使用 IE 网络驱动程序并且它有问题。

我阅读了很多关于使用 IE Web 驱动程序的建议，但什么时候`.click()`不起作用，但我找不到解决这个问题的灵丹妙药。我尝试使用**JS** insted`.click()`但这并没有解决我的问题，因为我遇到了许多其他问题。那么可能有人知道 Selenium 的替代品，我可以在哪里使用 IE 进行测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:02:45.560

Sahi (http://sahi.co.in/) 应该是硒的最佳替代品。sahi 脚本可以使用 java 或 javascript，也可以使用 php 和 ruby​​ 驱动程序（没有使用 Ruby 或 php 的个人经验）。跨浏览器和跨平台非常有效。

一些可爱的功能是： 不需要明确的等待。对于元素识别 _near、_under、_in 等 ApI 非常有用。记录/报告，功能内置于 Sahi。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:57:07.730

Telerik 有自己的：

[http://www.telerik.com/automated-testing-tools/free-testing-framework.aspx](http://www.telerik.com/automated-testing-tools/free-testing-framework.aspx)

Watin 也是另一个，但它通常是废弃软件。

但是我会警告你，他们所有人都在使用 IE 时遇到了问题。这不是测试框架开发者的错，更多的是IE的错。

Selenium 家伙的封面为什么 IEDriver 在这里更加不稳定：

[http://code.google.com/p/selenium/wiki/InternetExplorerDriver](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:53:46.050

工作中我们使用[sikuli](http://sikuli.org/)，简单易用

# entity-framework - 为实体加载特定的人员并将其分配为对另一个实体的引用

> ID：12531874
> 
> 赞同：0
> 
> 时间：2012-09-21T13:49:37.840
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first, dbcontext

例子：

我正在输入新发票。对于这张发票，我需要输入一个客户。假设我们检索了一个客户列表：

```
var list = Context.Set<Customer>().ToList(); 
```

在这里，我看到两个问题：

1) 我不需要为客户带来所有信息，我只需要 Id, Code 和 Name

2）当前 DbContext 中的客户是只读的，所以如果可以告诉 DbContext 不要监视他们的状态以提高性能，那就太好了。

问题：

1）我们可以只为客户加载部分数据，但仍然可以将其分配给发票（见下面的代码）？

2）我们可以告诉 DbContext 不要监视客户的更改，并且仍然可以这样做：

```
Invoice.Customer = CustomerList[10]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:41:05.827

没有直接的方法可以**完全按照**您的意愿行事，但您可以通过一些妥协来实现您的目标。

> 我不需要为客户带来所有信息，我只需要 Id, Code 和 Name

EF 无法创建部分加载的实体，但您可以创建匿名类型：

```
Context.Customers.Select(c => new {Id = c.CustomerId, Code = c.Code, Name = c.Name}).Tolist() 
```

如果您可以使用新的匿名类型，然后使用它，或者您可以遍历该列表，创建实际的客户对象。

> 当前 DbContext 中的客户是只读的，因此如果可以告诉 DbContext 不要监视其状态以提高性能，那就太好了。

EF 提供了[AsNoTracking()](http://msdn.microsoft.com/en-us/library/gg679352%28v=vs.103%29.aspx)的扩展，它将完全满足您的需求：

```
var list = Context.Set<Customer>().AsNoTracking().ToList(); 
```

根据您从上面选择的内容，以下代码可能会更改，但此代码确实实现了您正在寻找的内容。部分加载客户，但仍允许您将客户附加到发票。

**注意**：您需要先将客户附加到您的上下文中，然后才能使用它，然后将其设置为 Unchanged 状态将防止它覆盖现有数据。

```
 m = new Model();

        var list = m.Customers.Select(c => new {Id = c.CustomerId, Code = c.Code, Name = c.Name});

        List<Customer> customerList = new List<Customer>();
        foreach (var item in list)
        {
            customerList.Add(new Customer()
                {
                    CustomerId = item.Id,
                    Code = item.Code,
                    Name = item.Name
                });
        }

        Invoice i = new Invoice();
        var customer = customerList.First();
        m.Customers.Attach(customer);
        m.Entry(customer).State = EntityState.Unchanged;

        i.Customer = customer;

        m.Invoices.Add(i);
        m.SaveChanges(); 
```

# wordpress - 如何在 Wordpress/Woocommerce 的一个部分中禁用功能

> ID：12531875
> 
> 赞同：0
> 
> 时间：2012-09-21T13:49:39.180
> 
> 标签：wordpress, hook, woocommerce

我正在使用 Woocommerce 的产品插件插件，这很棒 - 允许产品的许多自定义选项（雕刻等）。这可以很好地显示在主产品页面上并且效果很好。

但是在商店页面和任何其他部分（如相关产品）中，这些选项也会显示，这会破坏这些部分的外观。

我正在等待插件开发人员的回复，但只是想知道这里是否有人可以指出我至少应该在哪里解决这个问题的大致方向 - 已经研究了好几天了。我是删除操作等的新手。

谢谢（我知道这里没有足够的信息，但建议会很好）

戴夫

# dapper - Dapper-Dot-Net 示例代码

> ID：12531877
> 
> 赞同：7
> 
> 时间：2012-09-21T13:49:57.043
> 
> 标签：dapper, sample

这是从 Dapper 示例中截取的代码：

```
var p = new DynamicParameters();
p.Add("@a", 11);
p.Add("@b", dbType: DbType.Int32, direction: ParameterDirection.Output);
p.Add("@c", dbType: DbType.Int32, direction: ParameterDirection.ReturnValue); 
cnn.Execute("spMagicProc", p, commandType: commandType.StoredProcedure);
int b = p.Get("@b");
int c = p.Get("@c"); 
```

**任何人**：在提供的示例中的上述代码中，我收到一个错误，“无法解析 .Execute”——指的是`cnn.Execute`. 我查看了连接对象，没有执行的方法。Dapper 显然运作良好，那我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T16:11:26.483

我相信这应该可以解决您的问题：

```
using( var connection = new SqlConnection( connectionString ) )
{
    try
    {
        var p = new DynamicParameters();
        p.Add( "a", 11 );
        p.Add( "b", dbType: DbType.Int32, direction: ParameterDirection.Output );
        p.Add( "c", dbType: DbType.Int32, direction: ParameterDirection.ReturnValue );
        connection.Open();
        connection.Execute( "MyDamnStoredProc", p, commandType: CommandType.StoredProcedure );
        int b = p.Get<int>( "b" );
        int c = p.Get<int>( "c" );
    }
    catch( Exception ex )
    {
        Console.WriteLine( ex.Message );
    }
} 
```

**备注**：

1.  参数不需要@ 符号；dapper 会为你处理。
2.  一定要使用命名参数；请参阅指定`commandType:`参数的更新的 connection.Execute 方法。这样做是为了可以从方法调用中省略可选参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T10:05:46.547

> “无法解决。执行”

这将导致您的扩展方法丢失，您是否`using Dapper;`在文件顶部。

另请参阅：http: [//msdn.microsoft.com/en-us/library/bb308966.aspx#csharp3.0overview_topic3](http://msdn.microsoft.com/en-us/library/bb308966.aspx#csharp3.0overview_topic3)

# ios - 如何解码 xml 中的挪威语或任何特殊字符以在 TextView 中显示它

> ID：12531878
> 
> 赞同：1
> 
> 时间：2012-09-21T13:50:00.213
> 
> 标签：ios, xml, ipad, nsstring, special-characters

我在我的项目中处理字符串，其中我将一些数据（字符串）发送到服务并且服务用一些数据（字符串）响应我的 XML。之前我在发送特殊字符（如 &、、、'、 <,>,$,%,(,) 等在字符串中。

然后我在发送之前对字符串进行编码，如下所示：

```
NSString *str=@"Â£&@)(;:/-.,?!'"[]{}#%^*+=Â¥$â¬><~||_~<.,?!'m"";
NSString *stringToSend=[str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

那么发送的数据如下：“ **%C2%A3%26%40%29%28%3B%3A%2F-.%2C%3F%21%27%22%5B%5D%7B%7D%23%25 %5E%2A%2B%3D%C2%A5%24%E2%82%AC%3E%3C~%7C%7C_~%3C.%2C%3F%21%27m%22** "

然后服务器根据需要处理数据。

从服务器接收数据时，我进行如下解码：

```
NSString *strReceived=@"%C2%A3%26%40%29%28%3B%3A%2F-.%2C%3F%21%27%22%5B%5D%7B%7D%23%25%5E%2A%2B%3D%C2%A5%24%E2%82%AC%3E%3C~%7C%7C_~%3C.%2C%3F%21%27m%22";
NSString *str=[str stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

那么收到的数据是：**Â£&@)(;:/-.,?!'"[]{}#%^*+=Â¥$â¬><~||_~<.,?!'m “**正如预期的那样。

**问题/问题**

现在，如果我的字符串包含挪威字符，如 å、ø、Ø、æ 等。响应的字符串包含 (%E5 for å) (%E6 for æ) and (%D8 for Ø) and (%F8 for ø).

**在执行“ stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding** ”之后，我得到的字符串无效。

有人可以建议如何处理 xml 中收到的所有字符并完美解析它们。请帮助您输入...

提前Tnx。

# c# - 带有表单身份验证的 silverlight - 重定向到 login.aspx

> ID：12531884
> 
> 赞同：0
> 
> 时间：2012-09-21T13:50:15.930
> 
> 标签：c#, silverlight-4.0, forms-authentication, iis-7.5

我有一个使用表单身份验证的 Silverlight 应用程序。我试图在我的新测试服务器上部署和运行它，但它真的很奇怪。我激活了匿名和表单身份验证。

当我运行 [serverip] 时，我被重定向到 Login.aspx（它不存在），我不知道为什么。

当我运行 [serverip]/Default.aspx 时，我得到一个空白页。Fiddler 向我展示了 Default.aspx 页面已加载，但获取嵌入式 Silverlight xap 文件会导致重定向到 Login.aspx。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:19:48.297

我通过文件系统部署了应用程序。不幸的是，用户“每个人”都无法访问 ClientBin 文件夹。授予“每个人”访问此文件夹的权限解决了我的问题。

# ios - 如何使用新的 iOS 6.0 地图在两个地址之间进行路由？

> ID：12531889
> 
> 赞同：3
> 
> 时间：2012-09-21T13:50:28.900
> 
> 标签：ios, ipad, ios6, mapkit, ios6-maps

我正在使用 iOS 6.0 SDK，我想使用 Apple 的新 iOS 6.0 地图在两个不同的地址（不是纬度和经度）之间进行路由。我也想显示迹象。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:36:58.387

上周我考虑这样做，但没有找到办法。似乎您可以提供目的地，并且您可以提供的不仅仅是坐标，但它始终假定您的起始位置是当前位置。当您可能正在计划旅行而您当前不在起始位置时，这会受到限制。（但也许我只是没有看到它是如何完成的，如果这是真的，我希望有人能纠正我。）

不久前，我研究了 iOS 6 的路由选项并在这里收集了结果......

[您将如何为地图上各点之间的路线提供路线？缺失的部分是什么？](https://stackoverflow.com/questions/11229467/how-would-you-providing-routing-for-directions-between-points-on-a-map-what-are#comment14753468_11229467)

您可能仍然无法使用您想要的确切路线打开 Apple Maps，但也许您可以在您自己的实例 MKMapView 上绘制带有覆盖和注释的路线。这可能是你目前能做的最好的事情。

下面是我用来路由到某个位置并为目的地提供至少一个标签的代码，而不是只保留坐标。我发现简单地给目的地一个带有完整地址详细信息的标签是行不通的，所以我只提供一个值。

```
if (flag != DirectionsFlag_PublicTransit && itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {
    NSDictionary *address = @{ (NSString *)kABPersonAddressStreetKey : location.title };
    MKPlacemark *destinationPlacemark = [[MKPlacemark alloc] initWithCoordinate:location.coordinate addressDictionary:address];

    MKMapItem *destinationMapItem = [[MKMapItem alloc] initWithPlacemark:destinationPlacemark];
    if (flag == DirectionsFlag_Driving) {
        [destinationMapItem openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving}];
    }
    else if (flag == DirectionsFlag_Walking) {
        [destinationMapItem openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeWalking}];
    }
} 
```

此代码特别不处理公共交通路线，因为 Apple Maps 不这样做。相反，我让它使用我之前使用的 URL 打开谷歌地图，现在打开 Safari 以获取这些方向。该标志是驾驶、步行或公共交通的枚举值。该位置是一个模型，其中包含各种详细信息，包括标题和坐标。

# git - 设置 jenkins 以使用 unfuddle git 存储库

> ID：12531890
> 
> 赞同：0
> 
> 时间：2012-09-21T13:50:37.433
> 
> 标签：git, jenkins, unfuddle

我们使用 unfuddle 来托管我们的 git 存储库。当我们克隆一个存储库时，我们使用：

```
git@oursubdomain.unfuddle.com:oursubdomain/repositoryname.git 
```

然而，詹金斯期待一个网址并说：

```
Specify the URL of this remote repository. This uses the same syntax as your git clone command. 
```

在为此的高级信息中，它说：

```
Specify the repository to track. This can be a URL or a local file path. Note that for super-projects (repositories with submodules), only a local file path or a complete URL is valid. For instance, user@host:/path is not a valid URL 
```

所以，我需要知道的是我应该指定什么 URL 才能使其正常工作。甚至，我应该能够让它工作吗？我尝试了一些事情，但想知道是否有人已经解决了这个问题。

附加信息：

*   我正在使用[https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin)作为 git 插件 - Jenkins GIT 插件 1.1.23
*   我在 Windows 机器上使用 Jenkins - Jenkins 版本。1.482

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:03:37.577

经过几次尝试，我终于弄清楚了网址

```
git@oursubdomain.unfuddle.com:oursubdomain/repositoryname.git 
```

可以按原样使用，尽管有帮助建议。

我现在可以使用它，但是确实需要按照[此处的说明为本地系统帐户设置 SSH 密钥等](http://computercamp.cdwilson.us/jenkins-git-clone-via-ssh-on-windows-7-x64)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T06:13:57.513

git plugin help 确实是错误的，我已经解决了这个问题：[https ://github.com/jenkinsci/git-plugin/commit/0b7874d7d8d0ae783697ed55fa25125fecc015d6](https://github.com/jenkinsci/git-plugin/commit/0b7874d7d8d0ae783697ed55fa25125fecc015d6)

# qt - Qt 中的 QIntValidator 错误

> ID：12531900
> 
> 赞同：1
> 
> 时间：2012-09-21T13:51:02.977
> 
> 标签：qt, validation

我编写了代码的以下部分，将两个数字相加并输出结果：

```
QIntValidator *validator = new QIntValidator(0,50,this);
ui->firstNumber->setValidator(validator);
...
... 
```

在这种情况下，我收到以下错误：

```
CS2039:  'setValidator': is not a member of QTextEditor 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:16:18.190

使用支持验证的文本输入类。你可能想要`QLineEdit`

# javascript - 调整元素大小

> ID：12531903
> 
> 赞同：0
> 
> 时间：2012-09-21T13:51:10.763
> 
> 标签：javascript, jquery, css, html

我正在寻找允许您调整任何 html 元素或只是 div 大小的 JS 或 jQuery（仅限核心依赖）代码 - 可以使用 div 容器作为内容。

我在使用 jQuerys resizeable() 函数时遇到的问题是它与 UI 的依赖关系以及会给我相当精简的代码库带来的臃肿。此外，它仅使用角手柄来调整我希望界面更符合 TinyMCE 中表格和图像调整大小的工作方式。

也就是说，要调整大小的元素周围有一个虚线边框，可以拖动 8 个点。如果您在他们的网站上尝试 TinyMCE 演示，您就会明白我的意思。它允许根据拖动点保持纵横比和扭曲。

我在调整大小时获得的大多数点击是一次调整图像大小以适应页面宽度，但我很乐意指出正确的方向，以防我错过了一个片段或 jquery 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:00:50.603

几个月前我遇到了同样的“问题”，不想使用 jquery UI 但想调整大小......我遇到了这个“自定义事件”插件。很轻，可以完成工作。

[threedubmedia jquery.event.drag](http://threedubmedia.com/code/event/drag)

您可以在页面底部看到调整大小的演示。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:13:56.767

您可以使用 CSS3 的`resize`.

[http://jsfiddle.net/BramVanroy/uAzVY/](http://jsfiddle.net/BramVanroy/uAzVY/)

不过，没有你想要的那么多功能。

# javascript - 非标准confirm()函数如何实现阻塞UI？

> ID：12531907
> 
> 赞同：0
> 
> 时间：2012-09-21T13:51:33.707
> 
> 标签：javascript, modal-dialog

我要实现`confirm`网站的自定义功能。还有什么更好的方法呢？当然我可以使用`ok`和`cancel`回调，但我也想使用如下结构：

```
if ( confirm('something') ) {
    // some action
} 
```

而且我不想提供无限循环......有什么想法吗？

谢谢。

# c# - 事务性接收超时

> ID：12531911
> 
> 赞同：1
> 
> 时间：2012-09-21T13:51:40.737
> 
> 标签：c#, .net, transactions, msmq, message-queue

我有一个从消息队列中读取消息列表的方法。签名是：

```
IList<TMsg> Read<TMsg>(MessageQueue queue, int timeout, MessageQueueTransaction tx); 
```

基本功能是它将使用给定事务在超时内从队列中读取尽可能多的消息。我遇到的问题是决定如何最好地执行超时。我目前有两个工作版本。这些都是：

*   使用 BeginPeek 超时。如果成功，则使用事务性 Receive 调用删除消息。BeginPeek 的超时在每次调用后根据读取开始的时间和当前时间重新计算。
*   使用带有超时值的接收，并在超时到期时捕获异常。

第一种方法的问题是它需要在 DenySharedReceive 模式下读取队列，否则无法保证消息在 Peek 和 Receive 之间仍然存在。第二种方法的问题是需要抛出和处理异常（尽管是内部透明的），这可能不是一个好的设计，因为每次调用*总是*以异常结束，这违背了仅在异常情况下抛出异常的想法情况。

有没有人对我如何实现这一点有任何其他建议，或者对这两种技术和我的担忧发表评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:54:33.970

您可以使用[响应式扩展](http://msdn.microsoft.com/en-us/data/gg577609.aspx)来创建消息生产者，使用[Observable.Buffer](http://msdn.microsoft.com/en-us/library/hh229308%28v=vs.103%29.aspx)来管理超时，然后订阅该生产者

```
public IEnumerable<Message> GetMessage()
{
    //do the peek and receive a single message
    yield return message;
}

//and then something like
var producer = GetMessage().ToObservable();

// this is where your timeout goes
var bufferedMessages = producer.Buffer(TimeSpan.FromSeconds(3));

var disp = bufferedMessages.Subscribe(messages =>
    {
        Console.WriteLine("You've got {0} new messages", messages.Count());
        foreach (var message in messages)
            Console.WriteLine("> {0}", message); // process messages here
    });

disp.Dispose(); // when you no longer want to subscribe to the messages 
```

有关更多反应性示例，请查看[此处](http://rxwiki.wikidot.com/101samples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T01:05:03.060

经过一番调查，斧头的评论是最接近“答案”的，​​至少就 .NET 而言。包装的本机方法为 'TIMEOUT' 提供返回值（而不是错误值），但这被 .NET 视为异常，重新包装本机代码是不值得的。我试过。:p

# ruby - 在 Ruby 中定义“<”和“>”

> ID：12531913
> 
> 赞同：1
> 
> 时间：2012-09-21T13:51:41.353
> 
> 标签：ruby

我是一名高中新生，手头有一些时间，我认为编写一些程序来演示常用函数的作用是有益的。我一直想知道大于和小于运算符到底是什么，所以我开始自己定义它们。我遇到的唯一障碍是如何断言一个值是负数或正数，而不使用大于或小于运算符。到目前为止，我有一些看起来像这样的东西：

```
a = 34
b = 42
c = a - b
puts "A is Greater than B" while is_positive?(c) 
```

有人对我如何定义有想法`is_positive?(c)`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:14:56.700

1.  这个问题不应该被标记为红宝石，而是数学。
2.  那么你绝对需要相等运算符。
3.  如果您想将自己限制在`+`and`-`运算符，那么您没有其他方法来确定是否`a`大于`b`，只能从 0 开始计数并查看您首先达到的值（当然这是使用相等运算符进行测试的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:02:13.997

你的意思`<=>`是返回`-1`第一个参数小于，`0`如果相等，`1`如果大于第二个？或者，也许您的意思是如果参数小于 0、如果是 0 或大于 0，则返回[符号函数](http://en.wikipedia.org/wiki/Sign_function)？`-1``0``1`

# autofixture - 如何找出 AutoFixture 抛出 Kernel.OmitSpecimen 异常的原因

> ID：12531920
> 
> 赞同：5
> 
> 时间：2012-09-21T13:52:11.507
> 
> 标签：autofixture

我正在研究一个相当嵌套的模型，它有一些循环引用。它还使用实体框架，因此所有列表都是`ICollection<T>`. 为了适应这一点，我正在配置 AutoFixture，如下所示：

```
_fixture = new Fixture().Customize(new MultipleCustomization());
_fixture.Behaviors.Remove(new ThrowingRecursionBehavior());
_fixture.Behaviors.Add(new OmitOnRecursionBehavior()); 
```

当我尝试创建类型时

```
_fixture.CreateAnonymous<Session>(); 
```

AutoFixture 有问题并抛出以下错误

> System.InvalidCastException：无法将“Ploeh.AutoFixture.Kernel.OmitSpecimen”类型的对象转换为“The.Model.Language”类型

如果我排除`Session`type中的集合`Language`，AutoFixture 会为图中的另一种类型抛出相同的异常。

有没有办法从 AutoFixture 中提取更多信息，例如导致错误的属性？

为什么 AutoFixture 试图将我的类型转换为 OmitSpecimen 以及在此过程中可能发生了什么来阻止它被转换？

我在[这里](https://gist.github.com/3766612)为堆栈跟踪创建了一个要点。

## 更新

我设法重现了这个问题。给定这对对象

```
public class Session
{
    public Language Language { get; set; }
}

public class Language
{
    public ICollection<Session> Sessions { get; set; }
} 
```

调用`_fixture.CreateAnonymous<Session>();`将抛出强制转换异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-12T06:53:41.507

这适用于较新版本的`AutoFixture`（例如 3.31.3）。

此代码确实运行：

```
 public class Session
    {
        public Language Language { get; set; }
    }

    public class Language
    {
        public ICollection<Session> Sessions { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var fixture = new Fixture();
            fixture.Behaviors.Add(new OmitOnRecursionBehavior());

           var session = fixture.Create<Session>();

            Debug.Assert(session != null, "Session should not be null");
        }
    } 
```

# symfony - Symfony2：使用 Doctrine 查询数据库

> ID：12531923
> 
> 赞同：0
> 
> 时间：2012-09-21T13:52:17.453
> 
> 标签：symfony, doctrine

我有一个与 Symfony2 项目连接的小型数据库。我有我的控制器、实体等。

当我尝试使用方法 find() 时，我总是得到一个空值。

以下是调用 find 方法的方式：

```
 public function loginsuccessAction()
{

$em = $this->getDoctrine()->getEntityManager();
$user = $em->getRepository('MDPILoginBundle:Users')->find(1);

var_dump($user);
} 
```

我的 Users 实体类具有所需的 getter 和 setter。我的表用户填充良好。

我错过了什么？symfony 的新手，我第一次尝试这样做，阅读一些教程。

非常感谢你。

PS：如果您需要更多详细信息，请随时问我。

编辑：添加了实体 Users.php

这是 Users.php 实体

```
<?php

namespace MDPI\LoginBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * MDPI\LoginBundle\Entity\Users
 *
 * @ORM\Table(name="users")
 * @ORM\Entity
 */
class Users
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $id;

/**
 * @var integer $editorId
 *
 * @ORM\Column(name="editor_id", type="integer", nullable=true)
 */
private $editorId;

/**
 * @var string $email
 *
 * @ORM\Column(name="email", type="string", length=255, nullable=false)
 */
private $email;

/**
 * @var string $password
 *
 * @ORM\Column(name="password", type="string", length=255, nullable=false)
 */
private $password;

/**
 * @var integer $titleId
 *
 * @ORM\Column(name="title_id", type="integer", nullable=true)
 */
private $titleId;

/**
 * @var string $firstname
 *
 * @ORM\Column(name="firstname", type="string", length=255, nullable=true)
 */
private $firstname;

/**
 * @var string $lastname
 *
 * @ORM\Column(name="lastname", type="string", length=255, nullable=true)
 */
private $lastname;

/**
 * @var string $department
 *
 * @ORM\Column(name="department", type="string", length=255, nullable=true)
 */
private $department;

/**
 * @var string $organization
 *
 * @ORM\Column(name="organization", type="string", length=255, nullable=true)
 */
private $organization;

/**
 * @var string $address1
 *
 * @ORM\Column(name="address1", type="string", length=255, nullable=true)
 */
private $address1;

/**
 * @var string $address2
 *
 * @ORM\Column(name="address2", type="string", length=255, nullable=true)
 */
private $address2;

/**
 * @var string $city
 *
 * @ORM\Column(name="city", type="string", length=50, nullable=true)
 */
private $city;

/**
 * @var string $state
 *
 * @ORM\Column(name="state", type="string", length=50, nullable=true)
 */
private $state;

/**
 * @var string $zipcode
 *
 * @ORM\Column(name="zipcode", type="string", length=50, nullable=true)
 */
private $zipcode;

/**
 * @var integer $countryId
 *
 * @ORM\Column(name="country_id", type="integer", nullable=true)
 */
private $countryId;

/**
 * @var string $telephone
 *
 * @ORM\Column(name="telephone", type="string", length=25, nullable=true)
 */
private $telephone;

/**
 * @var string $fax
 *
 * @ORM\Column(name="fax", type="string", length=25, nullable=true)
 */
private $fax;

/**
 * @var integer $workplaceId
 *
 * @ORM\Column(name="workplace_id", type="integer", nullable=true)
 */
private $workplaceId;

/**
 * @var integer $jobtypeId
 *
 * @ORM\Column(name="jobtype_id", type="integer", nullable=true)
 */
private $jobtypeId;

/**
 * @var string $researchKeywords
 *
 * @ORM\Column(name="research_keywords", type="string", length=255, nullable=true)
 */
private $researchKeywords;

/**
 * @var string $ip
 *
 * @ORM\Column(name="ip", type="string", length=15, nullable=true)
 */
private $ip;

/**
 * @var boolean $status
 *
 * @ORM\Column(name="status", type="boolean", nullable=false)
 */
private $status;

/**
 * @var boolean $active
 *
 * @ORM\Column(name="active", type="boolean", nullable=false)
 */
private $active;

/**
 * @var bigint $dateRegistered
 *
 * @ORM\Column(name="date_registered", type="bigint", nullable=false)
 */
private $dateRegistered;

/**
 * @var string $alertFrequency
 *
 * @ORM\Column(name="alert_frequency", type="string", length=10, nullable=true)
 */
private $alertFrequency;

/**
 * @var datetime $alertLastSuccess
 *
 * @ORM\Column(name="alert_last_success", type="datetime", nullable=false)
 */
private $alertLastSuccess;

/**
 * @var text $signature
 *
 * @ORM\Column(name="signature", type="text", nullable=true)
 */
private $signature;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set editorId
 *
 * @param integer $editorId
 */
public function setEditorId($editorId)
{
    $this->editorId = $editorId;
}

/**
 * Get editorId
 *
 * @return integer 
 */
public function getEditorId()
{
    return $this->editorId;
}

/**
 * Set email
 *
 * @param string $email
 */
public function setEmail($email)
{
    $this->email = $email;
}

/**
 * Get email
 *
 * @return string 
 */
public function getEmail()
{
    return $this->email;
}

/**
 * Set password
 *
 * @param string $password
 */
public function setPassword($password)
{
    $this->password = $password;
}

/**
 * Get password
 *
 * @return string 
 */
public function getPassword()
{
    return $this->password;
}

/**
 * Set titleId
 *
 * @param integer $titleId
 */
public function setTitleId($titleId)
{
    $this->titleId = $titleId;
}

/**
 * Get titleId
 *
 * @return integer 
 */
public function getTitleId()
{
    return $this->titleId;
}

/**
 * Set firstname
 *
 * @param string $firstname
 */
public function setFirstname($firstname)
{
    $this->firstname = $firstname;
}

/**
 * Get firstname
 *
 * @return string 
 */
public function getFirstname()
{
    return $this->firstname;
}

/**
 * Set lastname
 *
 * @param string $lastname
 */
public function setLastname($lastname)
{
    $this->lastname = $lastname;
}

/**
 * Get lastname
 *
 * @return string 
 */
public function getLastname()
{
    return $this->lastname;
}

/**
 * Set department
 *
 * @param string $department
 */
public function setDepartment($department)
{
    $this->department = $department;
}

/**
 * Get department
 *
 * @return string 
 */
public function getDepartment()
{
    return $this->department;
}

/**
 * Set organization
 *
 * @param string $organization
 */
public function setOrganization($organization)
{
    $this->organization = $organization;
}

/**
 * Get organization
 *
 * @return string 
 */
public function getOrganization()
{
    return $this->organization;
}

/**
 * Set address1
 *
 * @param string $address1
 */
public function setAddress1($address1)
{
    $this->address1 = $address1;
}

/**
 * Get address1
 *
 * @return string 
 */
public function getAddress1()
{
    return $this->address1;
}

/**
 * Set address2
 *
 * @param string $address2
 */
public function setAddress2($address2)
{
    $this->address2 = $address2;
}

/**
 * Get address2
 *
 * @return string 
 */
public function getAddress2()
{
    return $this->address2;
}

/**
 * Set city
 *
 * @param string $city
 */
public function setCity($city)
{
    $this->city = $city;
}

/**
 * Get city
 *
 * @return string 
 */
public function getCity()
{
    return $this->city;
}

/**
 * Set state
 *
 * @param string $state
 */
public function setState($state)
{
    $this->state = $state;
}

/**
 * Get state
 *
 * @return string 
 */
public function getState()
{
    return $this->state;
}

/**
 * Set zipcode
 *
 * @param string $zipcode
 */
public function setZipcode($zipcode)
{
    $this->zipcode = $zipcode;
}

/**
 * Get zipcode
 *
 * @return string 
 */
public function getZipcode()
{
    return $this->zipcode;
}

/**
 * Set countryId
 *
 * @param integer $countryId
 */
public function setCountryId($countryId)
{
    $this->countryId = $countryId;
}

/**
 * Get countryId
 *
 * @return integer 
 */
public function getCountryId()
{
    return $this->countryId;
}

/**
 * Set telephone
 *
 * @param string $telephone
 */
public function setTelephone($telephone)
{
    $this->telephone = $telephone;
}

/**
 * Get telephone
 *
 * @return string 
 */
public function getTelephone()
{
    return $this->telephone;
}

/**
 * Set fax
 *
 * @param string $fax
 */
public function setFax($fax)
{
    $this->fax = $fax;
}

/**
 * Get fax
 *
 * @return string 
 */
public function getFax()
{
    return $this->fax;
}

/**
 * Set workplaceId
 *
 * @param integer $workplaceId
 */
public function setWorkplaceId($workplaceId)
{
    $this->workplaceId = $workplaceId;
}

/**
 * Get workplaceId
 *
 * @return integer 
 */
public function getWorkplaceId()
{
    return $this->workplaceId;
}

/**
 * Set jobtypeId
 *
 * @param integer $jobtypeId
 */
public function setJobtypeId($jobtypeId)
{
    $this->jobtypeId = $jobtypeId;
}

/**
 * Get jobtypeId
 *
 * @return integer 
 */
public function getJobtypeId()
{
    return $this->jobtypeId;
}

/**
 * Set researchKeywords
 *
 * @param string $researchKeywords
 */
public function setResearchKeywords($researchKeywords)
{
    $this->researchKeywords = $researchKeywords;
}

/**
 * Get researchKeywords
 *
 * @return string 
 */
public function getResearchKeywords()
{
    return $this->researchKeywords;
}

/**
 * Set ip
 *
 * @param string $ip
 */
public function setIp($ip)
{
    $this->ip = $ip;
}

/**
 * Get ip
 *
 * @return string 
 */
public function getIp()
{
    return $this->ip;
}

/**
 * Set status
 *
 * @param boolean $status
 */
public function setStatus($status)
{
    $this->status = $status;
}

/**
 * Get status
 *
 * @return boolean 
 */
public function getStatus()
{
    return $this->status;
}

/**
 * Set active
 *
 * @param boolean $active
 */
public function setActive($active)
{
    $this->active = $active;
}

/**
 * Get active
 *
 * @return boolean 
 */
public function getActive()
{
    return $this->active;
}

/**
 * Set dateRegistered
 *
 * @param bigint $dateRegistered
 */
public function setDateRegistered($dateRegistered)
{
    $this->dateRegistered = $dateRegistered;
}

/**
 * Get dateRegistered
 *
 * @return bigint 
 */
public function getDateRegistered()
{
    return $this->dateRegistered;
}

/**
 * Set alertFrequency
 *
 * @param string $alertFrequency
 */
public function setAlertFrequency($alertFrequency)
{
    $this->alertFrequency = $alertFrequency;
}

/**
 * Get alertFrequency
 *
 * @return string 
 */
public function getAlertFrequency()
{
    return $this->alertFrequency;
}

/**
 * Set alertLastSuccess
 *
 * @param datetime $alertLastSuccess
 */
public function setAlertLastSuccess($alertLastSuccess)
{
    $this->alertLastSuccess = $alertLastSuccess;
}

/**
 * Get alertLastSuccess
 *
 * @return datetime 
 */
public function getAlertLastSuccess()
{
    return $this->alertLastSuccess;
}

/**
 * Set signature
 *
 * @param text $signature
 */
public function setSignature($signature)
{
    $this->signature = $signature;
}

/**
 * Get signature
 *
 * @return text 
 */
public function getSignature()
{
    return $this->signature;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:02:36.213

确保您在 find 方法中使用的值与实体中定义的主键 (@ID) 相同。

# asp.net - Asp.net IIS7 不断提示非管理员用户的用户凭据

> ID：12531926
> 
> 赞同：1
> 
> 时间：2012-09-21T13:52:23.460
> 
> 标签：asp.net, iis, telerik

我有一个设置为在 Windows 身份验证上运行的 ASP.net 网站。它在具有 Windows 身份验证的 IIS7 上运行。不是来自管理员组的每个用户，Internet Explorer 都会不断提示输入用户凭据。尽管当用户单击取消时，只要用户不单击任何页面控件，网站就可以正常运行。

我有一个带有 Telerik 控件的母版页。此页面包含 AJAX 管理器和 ScriptManager。如果用户调用没有母版页的 aspx 页面，则不会出现凭据窗口。Telerik 资源在 web.config 中注册..正如我所说，该网站对管理员组来说没有问题。普通用户也来自同一个域..但是对他们来说登录窗口不断出现......有什么想法吗？该网站未在受信任的 Intranet 站点下注册..但这应该不是问题，否则管理员也会收到错误消息。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:03:26.693

我正在回答我自己的问题，因为它可能对其他人也有帮助。在 Process Monitor 的帮助下，我终于能够找到问题所在。[http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx) 原来，其中一个 CSS 文件没有足够的权限供普通用户使用。

# android - 如何访问父activity绑定的服务

> ID：12531930
> 
> 赞同：0
> 
> 时间：2012-09-21T13:52:39.913
> 
> 标签：android, android-activity, android-service

我有一个绑定到服务的活动。该服务提供与 XMPP 服务器交互的功能。

然后，该活动启动需要访问相同服务的第二个活动（例如发起语音呼叫）。

我正在考虑将第二个活动再次绑定到同一个服务，但这似乎有点矫枉过正，因为当第二个活动启动时，服务应该已经存在并且应该在那里直到第一个活动故意破坏它（再次绑定意味着创建一个新连接并等待绑定在使用服务之前异步发生）。

目前我正在使用 startActivityForResult() 启动第二个活动，然后等待结果并从第一个活动访问服务，但我想更改逻辑（第二个活动必须与服务交互，然后当从服务接收到信号时，第一个负责关闭第二个活动）。

关于如何将服务对象传递给第二个活动的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:10:41.093

将 2 个活动绑定到同一个服务并不过分。这实际上是做我理解您正在尝试做的事情的正确方法：访问由 2 个不同活动的服务提供的 xmpp 功能。

通过绑定第二个活动，您将不会再次启动该服务，因为它已经启动。它将连接到与第一个活动相同的服务。

当然，您可以将所有绑定放在一个地方，例如单例或 Application 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:02:54.887

[您可以在应用程序](http://developer.android.com/reference/android/app/Application.html)中存储对它的引用，然后从您的第二个活动中访问它。

# java - Java 中的 3D 模拟

> ID：12531931
> 
> 赞同：0
> 
> 时间：2012-09-21T13:52:40.387
> 
> 标签：java, 3d, physics, simulation, java-3d

我从未做过任何 3D 编程，将从事 3D 飞机碰撞模拟。我打算用 Java 来做，虽然我知道 C++ 在这类事情上可能更受欢迎，但我没有这方面的经验，而且时间有限。

谁能推荐任何引擎或包装器？我知道有 Java3D，但它现在不是有点老了吗？我也看过 JMonkey Engine，虽然那是用于游戏的，但我确定它对于模拟软件来说会很好吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T03:40:48.000

在获得真正有用​​的答案之前，您必须确定您的保真度要求。一些观察：

**Java 3D** - 自 2008 年以来，它似乎没有太多活跃的开发（尽管它看起来已经被移植到使用 JOGL）。如果它满足您的需求，请继续使用它，但不要指望它会很快获得任何新功能（除非您想自己编写它们）。由于它主要是一个场景图管理器，它可能是用来显示的，但它没有任何物理模拟能力。

**JOGL** - 这是 Java 的 OpenGL 绑定。它最新的稳定版本也有大约 4 年的历史，但有迹象表明它正在进行一些开发以利用更新的 OpenGL 功能。

**jBullet** - 这是一个用于游戏目的的物理引擎。它本质上是 C++ Bullet Physics 引擎的 Java 端口。

**jMonkey** - 这是一个游戏引擎，它将渲染引擎 (Java 3D) 和物理引擎 (jBullet) 组合到一个包中。

回到我的主要观点。如果您的要求可以通过游戏引擎满足，那么您可以使用 jMonkey 之类的东西，或者如果您想将其剥离，只需使用 JOGL 和 jBullet。

缺点是大多数用于游戏的物理引擎不像碰撞检测和受限运动那样处理空气动力学。jBullet 似乎有一些飞行模拟器扩展，但我无法对它们的质量提出任何建议......我怀疑它们也是用于游戏目的。

如果您想出于工程分析等目的开始处理结构失效模拟，您也许可以使用这些工具进行渲染，并且至少有一小部分与它相关的物理特性。但是为游戏调整的物理引擎不太适合这种分析。为此，您将需要一个专业的工程包，或具有航空、机械工程、建模和仿真背景的专业工程师......并且知道如何使用 Java 编程。

至于

> 空域内其他飞机的情况、飞机管制员采取的行动和碎片场。

其中大部分不会包含在任何物理引擎中，即使是适合工程分析的引擎。涉及一些航空和机械工程，但这只会限制可能的情况。你所说的涉及压力情况下的人类行为。这是许多研究的重点，但您不太可能找到任何可用的开源或商业软件来满足您项目的这一部分。

最重要的是，更好地了解您的要求。如果您事先没有这种理解，那么您将解决错误的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:25:01.587

其他替代方案是：

**lwjgl**（[网站](http://www.lwjgl.org)）一个游戏库，包括 GL 绑定和对控件和声音的支持。

**ode4j** ([网站](http://www.ode4j.org/)) 一个 3D 游戏物理库。这是 ODE C/C++ 物理库的 Java 端口。

# php - PHP：将图像分类到数据库中

> ID：12531934
> 
> 赞同：0
> 
> 时间：2012-09-21T13:52:57.487
> 
> 标签：php, mysql

我正在用 PHP 建立一个网站来分享我的漫画。我想实现分类以允许人们过滤他们想看的漫画。

我以前问过这个问题，但当时我的网站架构没有使用数据库。我已经实现了一个数据库（这太棒了，顺便说一句），所以我需要改变一下。

我在想这样做的方法是：

1）制作2个表格：1个类别，1个图像

2）根据图像所在的文件系统文件夹将图像插入各自的表中并分配该表ID

3) 使用新分配的类别 ID 将所有图像插入 All_Images 表

4) 接受用户输入来决定显示哪些图像。因此，如果用户输入 = cat 1，则显示具有类别 1 id 的图像。

所以，基本上我需要一种方法来在图像从文件系统进入时为它们分配类别。**有没有更简单的方法来做到这一点？我必须创建多个表吗？**

对此有什么想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:58:57.350

正常的方法是有一个图像表（可能是文件名而不是实际图像？），然后与类别建立一对多的关系，以便每个漫画可以有多个：

```
Table:Image
-----------
rowid: integer identity
displayname: varchar
filename: varchar

Table:Category
--------------
rowid: integer identity
displayname: varchar

Table:ImageCategoryLink
-----------------------
imageid: integer foreign key references Image:rowid
categoryid: integer foreign key references Category:rowid 
```

清除？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:58:03.487

一个带有 id 和名称等的表类别，一个带有 id src 名称等的图像表。

之后的两个选择：

*   如果图像只有一个类别，则在表 image 中放置一个字段 id_category
*   如果一个图像可以有多个类别，则使用 id_image 和 id_category 创建另一个表 image_category

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:02:17.540

由于您是初学者（没有冒犯），我认为桌子上不会有数百万或卡通片。为您的类别使用 SET 字段（或 ENUM，如果您的卡通只能有一个类别）。

有些人会投票反对，因为使用它会产生一些负面影响（主要是当您想要更改类别时）。但是对于相对较小的表，这不会产生任何影响。

这将是最简单的解决方案。如果您希望网站变得更大，请为您的类别使用第二个表格并加入这些表格。

# java - JavaCC：如何处理包含常用词的标记

> ID：12531935
> 
> 赞同：1
> 
> 时间：2012-09-21T13:53:04.500
> 
> 标签：java, parser-generator, javacc

我正在尝试为这样的源代码创建解析器：

```
[code table 1.0]
code table code_table_name
    id = 500
    desc = "my code table one"
end code table 
```

...下面是我定义的语法：

```
PARSER_BEGIN(CodeTableParser)
...
PARSER_END(CodeTableParser)

/* skip spaces */
SKIP: {
         " "
    |    "\t"
    |    "\r"
    |    "\n"
}

/* reserved words */
TOKEN [IGNORE_CASE]: {
        <CODE_TAB_HEADER:     "[code table 1.0]">
    |   <CODE_TAB_END:        "end" (" ")+ <CODE_TAB_BEGIN>>
    |   <CODE_TAB_BEGIN:      <IDENT> | "code" (" ")+ "table">
    |   <ID:                  "id">
    |   <DESC:                "desc">
}

/* token images */
TOKEN: {
        <NUMBER:  (<DIGIT>)+>
    |   <IDENT:   (<ALPHA>)+>
    |   <VALUE:   (<ALPHA> ["[", "]"])+>
    |   <STRING:  <QUOTED>>
}

TOKEN: {
        <#ALPHA:  ["A"-"Z", "a"-"z", "0"-"9", "$", "_", "."]>
    |   <#DIGIT:  ["0"-"9"]>
    |   <#QUOTED: "\"" (~["\""])* "\"">
}

void parse():
{
}
{
    expression() <EOF>
}

void expression():
{
    Token tCodeTab;
}
{
    <CODE_TAB_HEADER>
    <CODE_TAB_BEGIN>
    tCodeTab = <IDENT>
    (
        <ID>
        <DESC>
    )*
    <CODE_TAB_END>
} 
```

问题是解析器正确识别了令牌（“代码表”）......但它没有识别令牌 IDENT（“code_table_name”），因为它包含已经包含在令牌 CODE_TAB_BEGIN 中的单词（即“代码”）。解析器抱怨说“代码后面跟着无效字符_”......

话虽如此，我想知道为了让解析器正常工作，我缺少什么。我是新手，任何帮助将不胜感激;-)

谢谢，j3d

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:43:11.897

你的词法分析器永远不会产生一个 IDENT，因为产生

```
<CODE_TAB_BEGIN:      <IDENT> | "code" (" ")+ "table"> 
```

表示每个 IDENT 都可以是一个 CODE_TAB_BEGIN，并且由于这个产生式首先出现，它通过第一个匹配规则击败了 IDENT 的产生式。(RTFFFAQ)

将该生产替换为

```
<CODE_TAB_BEGIN:      "code" (" ")+ "table"> 
```

你会在 ID 和 DESC 方面遇到麻烦，但这会让你通过第二行输入。

# ruby - Ruby - 通过 gsub 和 regexp 替换字符串

> ID：12531940
> 
> 赞同：1
> 
> 时间：2012-09-21T13:53:23.717
> 
> 标签：ruby, regex, gsub

如何替换字符串 'nEEdle' 以获得以下结果：

```
"haystackhaystacknEEdlehaystack" -> "haystackhaystack<b>nEEdle</b>haystack" 
```

在我的应用程序中，我只有小写的搜索参数，所以我想获取最后一个正则表达式结果 ($~) 并将其用作替换字符串。以下方法不起作用：

```
n = "needle"
haystack.gsub(/#{n}/i, "<b>#{$~}</b>") 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:58:01.163

尝试：

```
heystack.g­sub(/#{n}/­i, '<b>\0</b>') 
```

# javascript - 使链接在弹出窗口中显示 div

> ID：12531941
> 
> 赞同：0
> 
> 时间：2012-09-21T13:53:35.343
> 
> 标签：javascript, asp.net, html

我正在尝试获取在弹出窗口中显示 div 的链接。

这是我的链接：

```
<li><a class="newAttachmentType" onclick="getFiles(true)">Move to somewhere</a></li> 
```

这是我试图调用并放入弹出窗口的 div：

```
<div id="ddlFiles">
    <label>
        Select new CaseFile:</label>
    <asp:DropDownList runat="server" ID="ddlCaseFilesNew" DataSourceID="dsCaseFiles"
        DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="300px" />
    <label>
        Select old CaseFile:</label>
    <asp:DropDownList runat="server" ID="ddlCaseFilesOld" DataSourceID="dsCaseFiles"
        DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="300px" />
</div> 
```

这是我迄今为止在“getFiles()”中尝试过的：

```
$('.newAttachmentType').click(function () {
   $('#newAttachmentDialog').dialog({
       autoOpen: true,
       height: 'auto',
       width: 'auto',
       modal: true,
       buttons: {
         "Save": function () {
            var attachmentName = $('#txtNewAttachmentName').val();
            if (attachmentName != "") {
                 var res;
                 PageMethods.addNewAttachmentType(attachmentName, reloadAttachmentTypes, res);
                 $(this).dialog('close');
            }
      },
      Cancel: function () {
            $(this).dialog('close');
      }
   },
   beforeClose: function () { $('#txtNewAttachmentName').val(''); }
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:57:26.567

您正在 onclick 方法内分配点击处理程序。为时已晚，没有任何效果。

无需像那样分配点击处理程序，只需直接执行代码即可。基本上解开内部函数：

```
$('#newAttachmentDialog').dialog({ 
   //Your code
}); 
```

# iphone - 如何在 MKNetworkKit 或 MKNetworkEngine 中禁用缓存？

> ID：12531943
> 
> 赞同：2
> 
> 时间：2012-09-21T13:53:41.203
> 
> 标签：iphone, ios, ipad, networking, mknetworkengine

我正在尝试使用 MKNetworkEngine 但标题谈论缓存。这对我的应用程序来说是完全不利的，因为它需要下载货币汇率 JSON 文件并且缓存是不行的。

有没有办法为整个 MKNetworkEngine 实例关闭缓存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:43:41.560

首先要做的事情：你*真的*确定你的缓存用例吗？大多数提供 Web 服务的股票都将其 Cache-Pragma/ETags 标头设置为合理的值。如果他们这样做了，MKNetworkKit 将做正确的事情，并且只会以缓存命中响应您的代码，如果这对您的请求有效。

尽管如此，您可以通过两种方法控制缓存的利用率。来自[MKNetworkEngine.h](https://github.com/MugunthKumar/MKNetworkKit/blob/master/MKNetworkKit/MKNetworkEngine.h#L211 "MKNetworkEngine.h")：

```
 /*!
 *  @abstract Enqueues your operation into the shared queue.
 *  
 *  @discussion
 *  The operation you created is enqueued to the shared queue. 
 *  When forceReload is NO, this method behaves like enqueueOperation:
 *  When forceReload is YES, No cached data will be returned even if cached data is available.
 *  @seealso
 *  enqueueOperation:
 */
-(void) enqueueOperation:(MKNetworkOperation*) operation forceReload:(BOOL) forceReload; 
```

`enqeueOperation:forceReload:`将forceReload 设置为调用`YES`就可以了。像这样：

```
-(MKNetworkOperation *)myNetworkOperation onCompletion:(MYComplectionBlock)completionBlock onError:(MKNKErrorBlock)errorBlock {

    MKNetworkOperation *op = [self operationWithPath:kURLPath params:nil httpMethod:@"GET" ssl:NO];
    [op onCompletion:^(MKNetworkOperation *completedOperation) {
        // handle the response
        completionBlock(...)
    } onError:^(NSError *error) {
        errorBlock(error);
    }];

    [self enqueueOperation:op forceReload:YES];
    return op;  
} 
```

此外，您可以在子类内部调用`[self emptyCache]`before显式清空缓存（注意这意味着清空所有请求的缓存） 。`[self enqueueOperation:op]``MKNetworkEngine`

```
-(MKNetworkOperation *)myNetworkOperation onCompletion:(MYComplectionBlock)completionBlock onError:(MKNKErrorBlock)errorBlock {

    MKNetworkOperation *op = [self operationWithPath:kURLPath params:nil httpMethod:@"GET" ssl:NO];
    [op onCompletion:^(MKNetworkOperation *completedOperation) {
        // handle the response
        completionBlock(...)
    } onError:^(NSError *error) {
        errorBlock(error);
    }];

    [self emptyCache];
    [self enqueueOperation:op];
    return op;  
} 
```

# java - 将视图声明为不可见或将背景设置为透明并在需要时更改其背景资源是否更有效？

> ID：12531948
> 
> 赞同：0
> 
> 时间：2012-09-21T13:53:56.087
> 
> 标签：java, android, xml, performance, dynamic

尝试充分利用我的应用程序意味着编写更高效的代码来帮助用户获得更好的体验。因此，如果有人可以帮助我并让我知道哪个是提高效率的更好选择，我一直在徘徊。

我的视图在程序中的不同时间通过动画变得栩栩如生，但它们的位置仍保留在主布局中，因此按钮始终存在。我试图弄清楚继续在xml代码中设置背景资源是否更有效，只需将可见性设置为不可见，然后在需要视图时将其动态更改回可见，或者更好地设置背景资源透明并在需要时动态更改后台资源？

我知道差异很小，但是在尝试使用应用程序时，最令人沮丧的事情可能是速度，因此即使加载时间缩短四分之一秒也是向用户提供更高效和更完整体验的一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:57:46.220

如果您担心布局中有许多很少使用的视图，请查看[ViewStub](http://developer.android.com/reference/android/view/ViewStub.html)类。它基本上是一个占位符，您可以使用它来延迟初始化可能并不总是需要的视图。

# php - 在 125 个字符后将文本字段拆分为两部分

> ID：12531949
> 
> 赞同：0
> 
> 时间：2012-09-21T13:53:57.197
> 
> 标签：php, arrays, string

我需要将文本分成此函数所做的两部分，但它会在单词中间中断，我需要它来计算单词的开头或结尾，给或取几个字符。

我不能基于字数，因为我需要字符范围不超过 130 个字符。

```
$str = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem     Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown     printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum"

$first125 = substr($str, 0, 125);
$theRest = substr($str, 125); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:02:41.253

尝试：

```
<?php
$str = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem     Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown     printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum";
$str = explode(' ', $str);
$substr = "";

foreach ($str as $cur) {
    if (strlen($substr) >= 125) {
        break;
    }
    $substr .= $cur . ' ';
}
echo $substr;
?> 
```

**密码板：[http :](http://codepad.org/EhgbdDeJ) **//codepad.org/EhgbdDeJ****

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:00:22.153

这是一个非常基本的解决方案，可以帮助您入门

```
$first125 = substr($str, 0, 125);
$theRest = substr($str, 125);

$remainder_pieces = explode(" ", $theRest, 2);

$first125 .= $remainder_pieces[0];
$theRest = $remainder_pieces[1];

echo $first125."</br>";
echo $theRest; 
```

但是还有更多的事情需要考虑，例如在该解决方案中，如果第 125 个字符是一个单词结束后的空格，它将包含除此之外的另一个单词，因此您可能需要添加一些额外的检查方法来尝试使其尽可能准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:00:01.960

不确定是否有一个本机 php 函数不在我的脑海中，但我认为这应该适合你。当然，您需要添加一些内容来检查是否至少有 125 个字符以及假设的第 125 个字符之后是否有空格。

```
 $k = 'a';
    $i = 0;
    while($k != ' '):
       $k = substr($str, (125+$i), 1);
       if($k == ' '):
         $first125 = substr($str, 0, (125+$i));
         $theRest = substr($str, (125+$i+1));
       else:
             $i++;
       endif;
    endwhile; 
```**

# c#-4.0 - MongoDB中的数组

> ID：12531950
> 
> 赞同：0
> 
> 时间：2012-09-21T13:54:05.487
> 
> 标签：c#-4.0, mongodb

如何使用其 objecID 获取单个数组元素文档？例如，集合有一个数组，但该数组有自己的 objectid 和其他属性。

`Dc.Collection.FindOne(query);`如果我传递了数组元素 objectid，则无法获取特定的数组文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:18:32.573

数组是否包含嵌入式文档，如

```
{
    ObjectId : // some ID,
    ArrayField : [ 
        {
            ObjectId: // id,
            key: value
        },  
        {
            ObjectId: // id, 
            key: value2
        }
    ]
} 
```

? 在这种情况下，您可能希望使用点表示法进行查询，例如：

`findOne({"ArrayField.key" : value1 })`

将匹配此文档。看看这个页面上的第五个代码示例：

[http://www.mongodb.org/display/DOCS/Dot+Notation+(Reaching+into+Objects](http://www.mongodb.org/display/DOCS/Dot+Notation+(Reaching+into+Objects) )

# c++ - 如何安全地将任何文件读入字符串？

> ID：12531951
> 
> 赞同：-3
> 
> 时间：2012-09-21T13:54:04.110
> 
> 标签：c++, string, file

> **可能重复：**
> [在 C++ 中将文件啜饮到 std::string 中的最佳方法是什么？](https://stackoverflow.com/questions/116038/what-is-the-best-way-to-slurp-a-file-into-a-stdstring-in-c)

我正在尝试为 C++ 模仿 PHP 的 file_get_contents() 函数。

但是，当我将 char 数组转换为字符串时，它会在 nullbyte 处停止：

```
fread(charbuf, 1, file_size, fp);
string str(charbuf); 
```

如何将字符串初始化为静态大小数组，并将文件内容直接读取到该容器？另外，我如何检查它的错误，例如，如果没有足够的内存来初始化该字符串。这也将使我摆脱我目前正在使用的临时内存分配，我想摆脱它。

安全性如何？是否有可能许多进程同时读取同一个文件和/或其中一个进程在我读取它时同时写入它？我该如何避免此类事情发生？

我希望您可以回答“字符串不是二进制容器”以外的其他方式。

**我要求重新提出这个问题：** “显然，这个问题与以往一样重要：两年后，两个最有效的解决方案仍然将整个文件内容复制到内存中，并且优化器无法删除这个副本。这个是一种非常不令人满意的事态。--Konrad Rudolph 2010 年 10 月 25 日在 6:25"在[将整个文件读入 C++ 中的 std::string 的最佳方法是什么？](https://stackoverflow.com/questions/116038/what-is-the-best-way-to-slurp-a-file-into-a-stdstring-in-c)或者你想让我创建一个新问题，要求在没有额外的字符串副本的情况下读取文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T13:57:32.667

```
std::ifstream fin("somefile.txt");
std::stringstream buffer;
buffer << fin.rdbuf();
std::string result = buffer.str(); 
```

此代码段会将您的所有文件放入 std::string

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:58:09.920

> *我希望您能以其他方式回答“字符串不是二进制容器。*

`std::string` **是**一个二进制容器，但您选择的构造函数将 C 风格的字符串作为参数。尝试不同的构造函数：

```
std::fread(charbuf, 1, file_size, fp);
std::string str(charbuf, file_size); 
```

* * *

**编辑**：考虑到避免内存分配的要求：

```
std::string str(file_size, 0);
std::fread(&str[0], 1, file_size, fp); 
```

# c# - 在调用之前确定控制器操作是否被授权

> ID：12531954
> 
> 赞同：6
> 
> 时间：2012-09-21T13:54:13.297
> 
> 标签：c#, asp.net-mvc, authorization

我试图解决的问题对我来说似乎很简单：我的应用程序有一个站点范围的菜单，用户可以从中导航到各个区域。菜单项只是指向 ActionResult 方法的链接。我在操作上使用自定义 AuthorizeAttribute 来强制执行用户的授权角色。这很好用，因为如果用户没有适当的角色，它会阻止用户执行操作。但是，如果他们无权执行，我什至不显示导航到该操作的菜单选项。

所以，在最简单的层面上，我希望能够做这样的事情：

```
var isAuthorized = IsAuthorized("ControllerName", "ActionName", currentUser); 
```

然后 IsAuthorized 方法将查看操作上的任何 AuthorizeAttributes，并评估给定用户是否能够执行它。

这种方法存在吗？假设我们在进行此评估时没有控制器实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:44:03.277

寻找解决方法的第二遍实际上正是我正在寻找的结果。我将把这个问题留在这里，以防它导致其他人得到这个答案。

[为 ASP.NET MVC 3 创建授权操作链接扩展](http://vivien-chevallier.com/Articles/create-an-authorized-action-link-extension-for-aspnet-mvc-3)

该实现几乎完全使用了我正在寻找的语法，并且在实践中有效。

# iphone - Change the edge color for UIButton in iOS 6.0

> ID：12531958
> 
> 赞同：0
> 
> 时间：2012-09-21T13:54:18.593
> 
> 标签：iphone, objective-c, ios6

For some reason, iOS 6 draws a standard RoundedRect differently. The old rounded button (top) has black as the edge when selected or highlighted. The same code draws the button with white as the edge in iOS 6.0 (below). I can't find a way to change the color back to Black as in iOS 5\. Any idea?

The code is simply

```
_loadButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[_loadButton setFrame:CGRectMake(200, 130, 115, 40)];
[_loadButton setTitle:@"Load Game" forState:UIControlStateNormal]; 
```

![enter image description here](../Images/6e4b8ce1d3b252a8c1a09244fee69c1e.png)

![enter image description here](../Images/b627dc3cd8442eafc94d657450de1bae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:26:01.803

Try this:

```
[button.layer setBorderColor:(__bridge CGColorRef)([UIColor blackColor])]; 
```

For rounded edges:

```
button.layer.cornerRadius = 8; 
```

You can also add this:

```
[button.layer setMasksToBounds:YES];
[button.layer setBorderWidth:1.0f]; 
```

# regex - 在“\d+”正则表达式模式中排除一组特定数字

> ID：12531960
> 
> 赞同：4
> 
> 时间：2012-09-21T13:54:19.643
> 
> 标签：regex

假设我有一些字符串：

```
some50
some51/x
some52/y
some53/z
some510
some511/x
some512/y
some513/z 
```

我想测试我的字符串是否为`some`+ 数字 + 任何形式。

我使用模式 : 来满足这个要求`^some\d+`，它返回了我所有的匹配项。

现在我需要排除一些数字。例如，我必须从匹配项中排除 51 和 52。正确的表达方式是什么？

我已经尝试过（我承认比尝试更多的是猜测）：

*   `^some(\d+|(?!(51|52)))`
*   `^some((\d+)(?!(51|52)))`
*   `^some(\d+)^(?!(51|52)))`
*   `^some(\d+)(?!(51|52)))`

但他们都没有返回预期的结果，即：

```
some50
some53/z
some510
some511/x
some512/y
some513/z 
```

PS：不知道是否重要，但正则表达式在 PowerShell 脚本中使用。

**[编辑]**扩展问题以表明不应排除 51x

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:01:39.350

您正在寻找一个否定的前瞻断言。我不熟悉 PowerShell 脚本，但在 perl 兼容的正则表达式中，这有效：

```
^some(?!(51$|52$))\d+$ 
```

这也将不匹配`some510`。如果这不是故意的，请删除`$`after`51`和`52`

更新：从字符串边界更改为单词边界（在字符串的末尾）

```
^some(?!(51\b|52\b))\d+\b 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T14:01:49.107

这是一种方式，可能不是最优雅的： `^some([0-46-9]\d*|5([03-9]|\d\d+)|5)`

# android - 首次启动时的帮助屏幕（9 个补丁）

> ID：12531965
> 
> 赞同：2
> 
> 时间：2012-09-21T13:54:37.610
> 
> 标签：android, android-layout, android-ui, nine-patch

我正在尝试为首次启动应用程序开发帮助屏幕。为了在所有尺寸的设备上完成这项工作，我做了一个 9patch 文件（不要看它完全原始的设计。我只是想为设计师做一个概念证明）

![在此处输入图像描述](../Images/e0f41c984da35e18ffc8e185f952b53a.png)

如您所见，我想垂直重复（根据屏幕大小）左侧空间和水平“滑动到”和“你已经完成”之间的空间。

我已将 png 放入 hdpi 文件夹中，并且我的活动包含以下资源布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/helper"
        android:scaleType="fitXY" />
</RelativeLayout> 
```

这是一张 720px 大的图片的结果： ![720像素](../Images/93e61bfe894aeedaa79425fd28d2e040.png)

这是一张 480px 大的图片的结果： ![480像素肖像](../Images/e0f41c984da35e18ffc8e185f952b53a.png) ![480px横向](../Images/ac05b6e723d0702a8914da59b70c5185.png)

这是一张 240px 大的图片的结果： ![240 像素肖像](../Images/023b106931e0028928359803c5b0dabc.png) ![240 像素横向](../Images/ea70d9d3d6673507534ea5991a29283f.png)

我想我必须使用一个好的维度和 ldpi/mdpi/hdpi/xhdpi 文件夹，也许还可以使用派生的 ldpi-landscap/mdpi-landscape ....

有没有办法做到这一点？我的图像应该有什么尺寸？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:03:47.763

我认为你应该检查这个自定义视图：[ShowcaseView](https://github.com/Espiandev/ShowcaseView)

它会以一种更简单、更轻松、更兼容的方式完成您需要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:58:49.387

正如 Thomas Clayson 建议的那样，我没有拍 4 张，而是拍了 2 张图片：

*   顶部：2 个箭头和相应的文字
*   底部：“切换到显示”和“点击关闭”

这是我的“测试”布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@color/my_translucent_background_color" >

<ImageView
    android:id="@+id/imageview_top"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/helper_top"
    android:paddingLeft="20dp"
    android:layout_weight="1"
    android:layout_gravity="top|right" />

<ImageView
    android:id="@+id/imageview_bottom"
    android:layout_width="400dp"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:paddingRight="20dp"
    android:src="@drawable/helper_bottom"
    android:layout_weight="2"
android:layout_gravity="bottom|center_horizontal" /> 
```

顶部区域在调整大小时仍然存在一些问题，它不适合正确的顶部角度。

# iphone - iOS 开发：为什么 self.navigationController.navigationBar.frame.size.height 返回零？

> ID：12531968
> 
> 赞同：0
> 
> 时间：2012-09-21T13:54:47.997
> 
> 标签：iphone, ios, ios6

我有一个带有导航栏的模式弹出视图，当我尝试使用语句从当前加载的视图访问该导航栏的高度时...

```
self.navigationController.navigationBar.frame.size.height; 
```

...它返回 0。为什么会这样？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:59:24.140

这可能是因为您在表达式中使用的对象之一是`nil`.

例如，这可能就是`self.navigationController`它本身。也许您误解了视图层次结构？（尝试`NSLog(@"%@", self.navigationController);`检查它是否`nil`并确定）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:55:57.577

不知道为什么，但如果你没有改变任何东西，导航栏的高度总是 44 像素

# c# - 将 wsHttpBinding 绑定更改为 webHttpBinding

> ID：12531970
> 
> 赞同：1
> 
> 时间：2012-09-21T13:55:02.333
> 
> 标签：c#, wcf

我正在努力解决 WCF 服务配置的问题。我有以下配置：

```
<behaviors>
  <serviceBehaviors>
    <behavior name="SampleWebBehavior">
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
    <behavior name="MyServiceTypeBehaviors">
      <serviceMetadata httpGetEnabled="false" httpsGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<protocolMapping>
  <add binding="basicHttpsBinding" scheme="https"/>
</protocolMapping>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="false"/> 
```

它工作得很好，我可以尝试使用 WcfTestClient.exe 的方法并获得正确的响应。但我需要绑定是 webHttpBinding，这样我才能在浏览器中看到结果并创建 JSON 请求和响应。但是当我将绑定更改为**webHttpBinding**时，它会引发错误：

*由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action '' 的消息。这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。*

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:06:47.197

要实现这一点，您需要在配置中做一些事情

1）向您的服务添加另一个端点，您可以在下面看到我同时拥有 basicHttp 和 webHttp

```
 <system.serviceModel>
        <services>
          <service name="<serivceclass>" behaviorConfiguration="DefaultBehavior">
            <endpoint binding="basicHttpBinding" contract="<serviceinterface>" bindingConfiguration="soapBinding"/>
            <endpoint address="json" binding="webHttpBinding" behaviorConfiguration="jsonBehavior" contract="<serviceinterface>" bindingConfiguration="jsonBinding"/>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
          </service>
 </system.serviceModel> 
```

2）添加你的绑定配置（你会再次看到web和basichttp）

```
<system.serviceModel>
<bindings>
      <basicHttpBinding>
        <binding name="soapBinding" maxBufferPoolSize="9000000" maxBufferSize="9000000" maxReceivedMessageSize="9000000">
          <readerQuotas maxArrayLength="9000000" maxBytesPerRead="9000000" maxDepth="9000000" maxNameTableCharCount="9000000" maxStringContentLength="9000000"/>
          <security mode="None">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </basicHttpBinding>
      <webHttpBinding>
        <binding name="jsonBinding">
          <security mode="None">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </webHttpBinding>
    </bindings>   
  </system.serviceModel> 
```

3) 设置您的行为 - 注意名称以及它们如何与步骤 1 中列出的端点相关联

```
<system.serviceModel>    
<behaviors>
          <endpointBehaviors>
            <behavior name="jsonBehavior">
              <webHttp defaultOutgoingResponseFormat="Json" />
            </behavior>
          </endpointBehaviors>
          <serviceBehaviors>
            <behavior name="DefaultBehavior">
              <serviceMetadata httpGetEnabled="true" />
              <serviceDebug includeExceptionDetailInFaults="true" />
              <dataContractSerializer maxItemsInObjectGraph="9000000" />
            </behavior>
          </serviceBehaviors>
        </behaviors>
</system.serviceModel> 
```

虽然我启用和配置的一些东西是可选的，但这允许您以两种方式访问​​服务，一种方式使用 web 和 json 内容，另一种方式使用 Visual Studio 内置的工具，当您不使用 javascript 等时。

注意1：使用 json 部分时的端点将是例如[http://myhost.com/myservice.svc/json/MyMethodName](http://myhost.com/myservice.svc/json/MyMethodName)，您可以通过为您的服务修改相应端点行上的“地址”属性来更改它（查看基本地址如何为空，webHttp 为 'json'）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:11:30.433

此错误来源的一种可能性是：当您更改配置时，您在服务器或客户端上进行了更改，但不是在两者上都进行了更改。服务器和客户端上的配置必须匹配。

# regex - 在 Word 中的下划线文本前插入 *

> ID：12531971
> 
> 赞同：0
> 
> 时间：2012-09-21T13:55:08.453
> 
> 标签：regex, ms-word, replace

我有一页充满了这样的文本（**注意：**带`c.`下划线，但你不能在markdown中为文本加下划线。）

> 1.  这是示例问题文本。作者提出这个问题的方式不是很好吗？上帝，它让我想唱歌，只是读它。和答案！等到你得到答案选择；那是他们真正闪耀的地方。
> 
> 一个。这是第一个答案
> 
> 湾。砰！第二个答案
> 
> C。这里是正确答案
> 
> d。你错过了！最后一个是正确的

我想`*`在下划线之前插入一个，`c.`所以它看起来像

> 1.  这是示例问题文本。作者提出这个问题的方式不是很好吗？上帝，它让我想唱歌，只是读它。和答案！等到你得到答案选择；那是他们真正闪耀的地方。
> 
> 一个。这是第一个答案
> 
> 湾。砰！第二个答案
> 
> *C。这里是正确答案
> 
> d。你错过了！最后一个是正确的

我知道有一种方法可以使用 Word 中的“查找/替换”对话框来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:03:33.000

[本教程](http://www.wambooli.com/help/word/find_formatting/)正是您要找的。您可以搜索格式并替换为[此处所述的占位符](http://office.microsoft.com/en-us/help/add-power-to-word-searches-with-regular-expressions-HA001087305.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:04:31.127

使用查找和替换对话框中的 [更多>>]、[格式] 和 [特殊] 按钮

```
Find what:     ^$
Format:        Underline

Replace with:  *^& 
```

# javascript - JavaScript 的 this 关键字惊喜

> ID：12531972
> 
> 赞同：1
> 
> 时间：2012-09-21T13:55:11.243
> 
> 标签：javascript, this, prototype

我以为我知道 JavaScript 的`this`关键字是如何工作的，但我又被吓了一跳。考虑到这个片段：

```
function foo()
{
    return 'Foobar';
}
foo.valueOf = function()
{
    return this();//this points to foo
};
foo.toString = foo;//alternatively
console.log(foo + '');//logs Foobar as you'd expect 
```

在`valueOf`方法中，`this`会指向函数对象，因为我定义的是函数对象的一个​​属性。但是当我尝试对`location`对象做同样的事情时：

```
location.origin = function()
{
    return this.protocol + '//' + this.hostname;
};
location.origin.valueOf = location.origin;
location.origin.toString = function()
{
    return this();
}
console.log(location.origin + '/uri');//undefined//undefined/uri ?
console.log(location.origin.toString());//undefined//undefined ?
console.log(location.origin.valueOf());//undefined//undefined ? 
```

使它起作用的唯一方法是更改`this()`​​为`location.origin()`. 有人能解释一下这个`location`物体有什么不同吗？我可以随意分配属性和方法，但我注意到`Location`构造函数及其原型不像其他原型那样*“可访问”*。在 Chrome 中你必须使用 `Object.getPrototypeOf(location);`，而 FF 允许`Location.prototype`。

基本上，我有两个问题：上面
的`location.origin`东西和：

```
var foo = {bar:function(){return 'Foobar';}};
foo.bar.valueOf = function(){return this();};
console.log(foo.bar + '');//logs Foobar! 
```

其次
，还有其他类似行为的对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:08:04.583

的值`this`完全由函数的调用方式或[Function.prototype.bind](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)设置。

> 在 valueOf 方法中， this 将指向函数对象，因为我正在定义函数对象的属性。

不，不是。在函数中，`this`引用`foo`是因为你**调用**函数的方式，而不是你定义它的方式。

```
> location.origin = function() {
>     return this.protocol + '//' + this.hostname;
> };
>
> location.origin.valueOf = location.origin; 
```

请注意，这`location`是一个主机对象。在 Safari 中，`origin`是只读的，上面什么都不做：

```
alert(typeof location.origin); // string, not function 
```

Firefox 中的结果不同，正如 OP 中所述。

javascript 中的一条黄金法则是：“不要将宿主对象视为原生对象”。那是因为它们不一定表现得像原生对象。您观察到的行为与`this`设置方式无关，而与弄乱宿主对象及其属性有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:21:07.447

foo.valueOf 不指向 'foo' 而是指向 'Foobar'。这是因为 return this(); // 这后面的括号表示执行了 foo 并最终返回了它的结果 (=foobar)

在第二个示例中，location.origin.valueOf 是一个函数

```
location.origin = function()
{
    return this.protocol + '//' + this.hostname;
};
location.origin.valueOf = location.origin();  //<-- Note the parenthesis here
location.origin.toString = function()
{
    return this();
}
console.log(location.origin() + '/uri'); //<-- again parenthesis here
console.log(location.origin.toString);// function
console.log(location.origin.valueOf);  //<-- parenthesis removed here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:27:42.343

我在想，因为`window.location`它是一个宿主对象，它不遵守“本机”JS 对象语义，这就是为什么你在`location`做与`foo`.

[http://jibbering.com/faq/#nativeObject](http://jibbering.com/faq/#nativeObject)

# d - 为什么目标文件中有模板递归的中间结果？

> ID：12531973
> 
> 赞同：3
> 
> 时间：2012-09-21T13:55:13.490
> 
> 标签：d

在 D 中使用模板递归时，我发现经典阶乘的中间结果仍在目标文件中。我想它们也在可执行文件中......？

我可以看到实际执行的代码只包含值（或指向它的指针）但是：

**不应该有一个`mov`语句没有无缘无故保存中间数据吗？**

这是代码：

```
int main()
{
  static int x = factorial!(5);
  return x;//factorial!(5);
}

template factorial(int n)
{
  static if (n == 1)
    const factorial = 1;
  else
    const factorial = n * factorial!(n-1);
} 
```

这是输出`obj2asm test.o`：

（为方便起见：1！= 1h，2！= 2h，3！= 6h，4！= 18h，5！= 78h）

```
FLAT    group   
;File = test_fac_01.d
    extrn   _main
    public  _deh_beg
    public  _deh_end
    public  _tlsstart
    public  _tlsend
    public  _D11test_fac_014mainFZi1xi
    extrn   _GLOBAL_OFFSET_TABLE_
    public  _Dmain
    public  _D11test_fac_0112__ModuleInfoZ
    extrn   _Dmodule_ref
    public  _D11test_fac_017__arrayZ
    public  _D11test_fac_018__assertFiZv
    public  _D11test_fac_0115__unittest_failFiZv
    extrn   _d_array_bounds
    extrn   _d_unittestm
    extrn   _d_assertm
.text   segment
    assume  CS:.text
:
        mov EAX,offset FLAT:_D11test_fac_0112__ModuleInfoZ[018h]@32
        mov ECX,offset FLAT:_Dmodule_ref@32
        mov RDX,[RCX]
        mov [RAX],RDX
        mov [RCX],RAX
        ret
.text   ends
.data   segment
_D11test_fac_0112__ModuleInfoZ:
    db  004h,000h,000h,0ffffff80h,000h,000h,000h,000h   ;........
    db  074h,065h,073h,074h,05fh,066h,061h,063h ;test_fac
    db  05fh,030h,031h,000h,000h,000h,000h,000h ;_01.....
    db  000h,000h,000h,000h,000h,000h,000h,000h ;........
    dq  offset FLAT:_D11test_fac_0112__ModuleInfoZ@64
.data   ends
.bss    segment
.bss    ends
.rodata segment
.rodata ends
.tdata  segment
_tlsstart:
    db  000h,000h,000h,000h,000h,000h,000h,000h ;........
    db  000h,000h,000h,000h,000h,000h,000h,000h ;........
.tdata  ends
.tdata. segment
_D11test_fac_014mainFZi1xi:
    db  078h,000h,000h,000h ;x...
.tdata. ends
.text._Dmain    segment
    assume  CS:.text._Dmain
_Dmain:
        push    RBP
        mov RBP,RSP
        mov RAX,FS:[00h]
        mov RCX,_D11test_fac_014mainFZi1xi@GOTTPOFF[RIP]
        mov EAX,[RCX][RAX]
        pop RBP
        ret
        nop
        nop
        nop
.text._Dmain    ends
.data._D11test_fac_0117__T9factorialVi5Z9factorialxi    segment
_D11test_fac_0117__T9factorialVi5Z9factorialxi:
    db  078h,000h,000h,000h ;x...
.data._D11test_fac_0117__T9factorialVi5Z9factorialxi    ends
.data._D11test_fac_0117__T9factorialVi4Z9factorialxi    segment
_D11test_fac_0117__T9factorialVi4Z9factorialxi:
    db  018h,000h,000h,000h ;....
.data._D11test_fac_0117__T9factorialVi4Z9factorialxi    ends
.data._D11test_fac_0117__T9factorialVi3Z9factorialxi    segment
_D11test_fac_0117__T9factorialVi3Z9factorialxi:
    db  006h,000h,000h,000h ;....
.data._D11test_fac_0117__T9factorialVi3Z9factorialxi    ends
.data._D11test_fac_0117__T9factorialVi2Z9factorialxi    segment
_D11test_fac_0117__T9factorialVi2Z9factorialxi:
    db  002h,000h,000h,000h ;....
.data._D11test_fac_0117__T9factorialVi2Z9factorialxi    ends
.data._D11test_fac_0117__T9factorialVi1Z9factorialxi    segment
_D11test_fac_0117__T9factorialVi1Z9factorialxi:
    db  001h,000h,000h,000h ;....
.data._D11test_fac_0117__T9factorialVi1Z9factorialxi    ends
.ctors  segment
    dq  offset FLAT:@64
.ctors  ends
.text._D11test_fac_017__arrayZ  segment
    assume  CS:.text._D11test_fac_017__arrayZ
_D11test_fac_017__arrayZ:
        push    RBP
        mov RBP,RSP
        sub RSP,010h
        mov RSI,RDI
        mov RDI,offset FLAT:_D11test_fac_0112__ModuleInfoZ@64
        call      _d_array_bounds@PC32
        nop
        nop
.text._D11test_fac_017__arrayZ  ends
.text._D11test_fac_018__assertFiZv  segment
    assume  CS:.text._D11test_fac_018__assertFiZv
_D11test_fac_018__assertFiZv:
        push    RBP
        mov RBP,RSP
        sub RSP,010h
        mov RSI,RDI
        mov RDI,offset FLAT:_D11test_fac_0112__ModuleInfoZ@64
        call      _d_assertm@PC32
        nop
        nop
.text._D11test_fac_018__assertFiZv  ends
.text._D11test_fac_0115__unittest_failFiZv  segment
    assume  CS:.text._D11test_fac_0115__unittest_failFiZv
_D11test_fac_0115__unittest_failFiZv:
        push    RBP
        mov RBP,RSP
        sub RSP,010h
        mov RSI,RDI
        mov RDI,offset FLAT:_D11test_fac_0112__ModuleInfoZ@64
        call      _d_unittestm@PC32
        leave
        ret
.text._D11test_fac_0115__unittest_failFiZv  ends
    end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:31:05.257

You shouldn't use templates when what you want is compile-time function execution. Just write the function as you would and call it in a static context.

```
int main()
{
  static int x = factorial(5); // static causes CTFE
  return x;
}

int factorial(int n)
{
  if (n == 1)
    return 1;
  else
    return n * factorial(n-1);
} 
```

This won't result in any extra symbols because `factorial` is *evaluated* at compile time. There are no symbols other than `factorial` itself. Your template trick *instantiates* symbols to achieve the same effect, but it's not symbols you want.

Alternatively, if you still want to use templates, but don't want symbols then you can use manifest constants via `enum`.

```
template factorial(int n)
{
  static if (n == 1)
    enum factorial = 1;
  else
    enum factorial = n * factorial!(n-1);
} 
```

Notice the change from `const` to `enum`. `enum` values are purely compile-time, so they produce no symbols or data in the object files.

# c# - 使用 DirectoryInfo 枚举连接字符串文字并添加引号。

> ID：12531976
> 
> 赞同：1
> 
> 时间：2012-09-21T13:55:30.777
> 
> 标签：c#, concatenation, double-quotes, directoryinfo, lpr

这似乎是一个晦涩难懂的问题，但在这里：

有没有办法将字符串文字与 DirectoryInfo 枚举（包含文件路径）连接起来，同时在文件路径周围添加引号？此外，在将 DirectoryInfo 枚举转换为字符串时，如何防止反斜杠加倍？我的情况如下：

```
DirectoryInfo filePathDirectory = new DirectoryInfo(filePath);
Process a = new Process();

a.StartInfo.FileName = "C:\\Windows\\system32\\lpr.exe";
a.StartInfo.Arguments = "-SServername.Domain.net -Plp " + "\"" + filePathDirectory + "\"";
a.StartInfo.UseShellExecute = false;
a.Start();
a.WaitForExit(); 
```

`filePathDirectory`以以下值开头：

```
{\\ServerName\Share\Folder\Folder\FileName.xls} 
```

我认为它一旦连接起来就会转换成一个字符串，`a.StartInfo.Arguments`它被分配了以下值：

```
-SServername.Domain.net -Plp \"\\\\ServerName\\Share\\Folder\\Folder\\FileName.xls\" 
```

这很糟糕，因为路径中的反斜杠数量增加了一倍。如何确保没有反斜杠添加到路径中？

最重要的是，为了添加引号，我使用了反斜杠转义序列；但是这个转义序列的反斜杠被无意中添加到我的字符串中。如何在包含的文件路径周围添加引号`a.StartInfo.Arguments`？

PS我希望这是有道理的，如果您需要澄清，请提出问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:59:53.470

反斜杠不加倍，引号的反斜杠也“不存在”。您可以通过`Console.WriteLine(a.StartInfo.Arguments)`或进行验证`MessageBox.Show(a.StartInfo.Arguments)`。

您所看到的 - 在我假设的调试器中 - 是*未*翻译转义字符的字符串表示 - 就像您需要在 IDE 中输入它一样。

例子：

```
string s = "\""; 
```

这将在调试器中`"\""`显示为，但在屏幕上显示为`"`：

![在此处输入图像描述](../Images/a9718b71fa26fc7252e4345d217825c1.png)

# javascript - Backbone.js 事件总是被激活

> ID：12531977
> 
> 赞同：0
> 
> 时间：2012-09-21T13:55:33.367
> 
> 标签：javascript, backbone.js, backbone-events

> **可能重复：**
> [Javascript，事件处理程序总是被调用，即使事件没有被引发](https://stackoverflow.com/questions/6941622/javascript-event-handler-is-always-called-even-if-the-event-is-not-raised)

我是 Backbone.js 的新手，我遇到了一个事件问题。

在我的 appView.js 中，我只有这个：

```
var languagesView = new app.LanguagesView(); 
```

而这 languageView.js ：

```
var app = app || {};

$(function() {

app.LanguagesView = Backbone.View.extend({

    initialize: function(){
        this.on("foo", this.fooFunction());
    },

    fooFunction: function() {
        console.log("---FOO----")
    }

});
}); 
```

我的应用程序中没有触发器，我不明白为什么`fooFunction`打开页面时总是调用。我对这些事件有什么误解吗？

# c# - 如何在C#中每10条评论后进行分页

> ID：12531979
> 
> 赞同：0
> 
> 时间：2012-09-21T13:55:39.950
> 
> 标签：c#, asp.net, .net, pagination

我有一个评论列表。客户希望每 10 条评论后有一个新页面，因此评论 11 将出现在第 2 页上，以此类推，直到他们获得的页面数。由于我在常规 .aspx.cs 页面上遇到的问题，因此在 .ashx 页面上形成了评论。简而言之，我该如何做到这一点？

这是 .ashx 页面的代码：

```
public void ProcessRequest (HttpContext context) 
{

    // ****************************************
    if (context.Request["postform"] == "1")
    {

        videomessage myVideoMessage = new videomessage();

        myVideoMessage.video_id = context.Request["video_id"];
        myVideoMessage.first_name_submitter = context.Request["first_name_submitter"];
        myVideoMessage.last_initial_submitter = context.Request["last_initial_submitter"];
        myVideoMessage.message = context.Request["message"];
        myVideoMessage.status = "0";

        myVideoMessage.Save();
    }
    // ****************************************

    // ****************************************
    StringBuilder myStringBuilder = new StringBuilder();

    // PULL VIDEOMESSAGES FOR VIDEO_ID
    videomessage[] myCommentsList = new videomessage().Listing("video_id", context.Request["video_id"], "entry_date" , "DESC");

    // FORM COMMENTS IF MORE THAN ONE COMMENT EXISTS
    foreach (videomessage tmpMessage in myCommentsList)
    {
        if (tmpMessage.status == "0" || tmpMessage.status == "1")
        {
            myStringBuilder.Append("<div class=\"comment_box\">");
            myStringBuilder.Append("<p class=\"comment_date\">");
            myStringBuilder.Append(Utility.FormatShortDate(tmpMessage.entry_date) + " " + tmpMessage.first_name_submitter + " " + tmpMessage.last_initial_submitter + "." + "</p>");

            if (!String.IsNullOrEmpty(tmpMessage.message))
            {
                myStringBuilder.Append("<p>" + tmpMessage.message + "</p>");
                myStringBuilder.Append("</div>");
            }
        }
    }
    string return_str = myStringBuilder.ToString();

    // IF NO COMMENTS RETURN THIS
    if( String.IsNullOrEmpty(return_str) )  return_str = "<p>No comments currently exist for this video.</p>";
    // ****************************************

    // RETURN STRING        
    context.Response.ContentType = "text/plain";
    context.Response.Write(return_str);
} 
```

我知道需要涉及一些数学并将其分配给变量，但我对 .NET 仍然很陌生，因此将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:35:10.077

使用 Linq

```
const int pageSize = 10;
var paginatedComments = comments.Skip((page ?? 0) * pageSize).Take(pageSize).ToList(); 
```

(*) 页面是从请求中输入的

可能有点过时了，但是看看 nerddinner 教程（[http://aspnetmvcbook.s3.amazonaws.com/aspnetmvc-nerdinner_v1.pdf](http://aspnetmvcbook.s3.amazonaws.com/aspnetmvc-nerdinner_v1.pdf)），它描述了使用自定义 PaginatedList 类的 MVC 分页原理

```
 public class PaginatedList<T> : List<T> {
        public int PageIndex  { get; private set; }
        public int PageSize   { get; private set; }
        public int TotalCount { get; private set; }
        public int TotalPages { get; private set; }

        public PaginatedList(IQueryable<T> source, int pageIndex, int pageSize) {
             PageIndex = pageIndex;
             PageSize = pageSize;
             TotalCount = source.Count();
             TotalPages = (int) Math.Ceiling(TotalCount / (double)PageSize);
             this.AddRange(source.Skip(PageIndex * PageSize).Take(PageSize));
        }

        public bool HasPreviousPage {
           get {
              return (PageIndex > 0);
           }
        }

        public bool HasNextPage {
            get {
               return (PageIndex+1 < TotalPages);
            }
        }
   } 
```

替代解决方案是使用 jquery 方法（请参阅[http://www.jquery4u.com/plugins/10-jquery-pagination-plugins](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins)），但我对本网站建议的任何一个插件都没有经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:02:27.493

看看这个

```
currentPage=1
NextPageFirstRecord=(currrentpage-1)*noRecordsPerPage
pageCount=totalrecords/noRecordsPerPage 
```

希望这可以帮助

# ios - iOS 加载一半图像

> ID：12531982
> 
> 赞同：0
> 
> 时间：2012-09-21T13:55:50.167
> 
> 标签：ios, cordova

我的应用程序是使用 PhoneGap 完成的，它从 http 服务器加载图像，有时它只加载一半图像，其余部分变为灰色。非常奇怪的错误，我不知道如何解决这个问题，是 iOS 错误，还是我的应用程序有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:19:41.867

这可能是因为图像仍在下载中。所以在显示它之前，请检查它是否已 100% 下载。

# java - Java NIO MappedByteBuffer OutOfMemoryException

> ID：12531984
> 
> 赞同：6
> 
> 时间：2012-09-21T13:56:09.200
> 
> 标签：java, file-io, nio, bytebuffer, filechannel

我真的遇到了麻烦：我想使用`FileChannel`s 和`MappedByteBuffer`s 读取超过几 GB 的巨大文件 - 我发现的所有文档都表明使用该`FileChannel.map()`方法映射文件相当简单。当然，2GB 是有限制的，因为所有 Buffer 方法都使用 int 来表示位置、限制和容量——但是低于该限制的系统隐含限制呢？

实际上，我遇到了很多关于`OutOfMemoryException`s! 的问题！而且根本没有真正定义限制的文档！那么 - 我如何才能将适合 int-limit 的文件安全地映射到一个或几个`MappedByteBuffer`s 而不会出现异常？

我可以在尝试之前询问系统我可以安全地映射文件的哪个部分`FileChannel.map()`吗？如何？为什么有关此功能的文档很少？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T14:05:36.450

我可以提供一些工作代码。这是否解决了你的问题很难说。这会在文件中寻找`Hunter`.

请参阅出色的文章[Java 技巧：如何快速读取文件](http://nadeausoftware.com/articles/2008/02/java_tip_how_read_files_quickly)以进行原始研究（不是我的）。

```
// 4k buffer size.
static final int SIZE = 4 * 1024;
static byte[] buffer = new byte[SIZE];

// Fastest because a FileInputStream has an associated channel.
private static void ScanDataFile(Hunter p, FileInputStream f) throws FileNotFoundException, IOException {
  // Use a mapped and buffered stream for best speed.
  // See: http://nadeausoftware.com/articles/2008/02/java_tip_how_read_files_quickly
  FileChannel ch = f.getChannel();
  long red = 0L;
  do {
    long read = Math.min(Integer.MAX_VALUE, ch.size() - red);
    MappedByteBuffer mb = ch.map(FileChannel.MapMode.READ_ONLY, red, read);
    int nGet;
    while (mb.hasRemaining() && p.ok()) {
      nGet = Math.min(mb.remaining(), SIZE);
      mb.get(buffer, 0, nGet);
      for (int i = 0; i < nGet && p.ok(); i++) {
        p.check(buffer[i]);
      }
    }
    red += read;
  } while (red < ch.size() && p.ok());
  // Finish off.
  p.close();
  ch.close();
  f.close();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T14:38:07.090

我使用的是`List<ByteBuffer>`每个 ByteBuffer 映射到 16 MB 到 1 GB 块中的文件。我使用 2 的幂来简化逻辑。我用它来映射高达 8 TB 的文件。

内存映射文件的一个关键限制是您受到虚拟内存的限制。如果您有一个 32 位 JVM，您将无法进行很多映射。

我不会继续为文件创建新的内存映射，因为这些映射永远不会被清理。您可以创建很多这些，但在某些系统上似乎有大约 32K 的限制（无论它们有多小）

我发现 MemoryMappedFiles 有用的主要原因是它们不需要被刷新（如果你可以假设操作系统不会死机）这允许你以低延迟的方式写入数据，而不必担心如果应用程序因不得不 write() 或 flush() 而死掉或性能过高。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T14:04:12.237

您不使用`FileChannel`API 一次写入整个文件。相反，您将文件分部分发送。请参阅 Martin Thompson 比较 Java IO 技术性能的帖子中的示例代码：[Java Sequential IO Performance](http://mechanical-sympathy.blogspot.com/2011/12/java-sequential-io-performance.html)

此外，没有太多文档，因为您正在进行依赖于平台的调用。来自`map()`JavaDoc：

> 内存映射文件的许多细节本质上依赖于底层操作系统，因此未指定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T21:54:50.520

文件越大，您就越不希望一次将其全部存储在内存中。设计一种方法来处理文件一次缓冲区，一次一行等。

MappedByteBuffers 尤其成问题，因为没有定义的映射内存释放，所以一次使用多个基本上肯定会失败。

# java - 为 android canvas 从 Double 转换为 float

> ID：12531985
> 
> 赞同：3
> 
> 时间：2012-09-21T13:56:12.613
> 
> 标签：java, android

我正在尝试从 Double 类型转换为 float 类型。我有这个：

```
Double doubleValue = new Double( result[0].X() );
canvas.drawCircle( doubleValue.floatValue(), doubleValue.floatValue(), ... ); 
```

结果是一个点数组。由于某种原因，result[0].X() 中的值等于 128.0，但是当我执行 floatValue() 时，我得到的是 -100.0。

从原始类型 Double 转换为 float 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:01:40.903

实际上，浮点值是正确的（通过调试验证）。但是 drawCircle 不会在指定的位置绘制它......这是一个完全不同的问题。谢谢大家。

# php - jQuery 设置 PHP $_GET 数组

> ID：12531986
> 
> 赞同：0
> 
> 时间：2012-09-21T13:56:38.760
> 
> 标签：php, jquery, arrays, get

问候 Stackoverflow

如何从 Jquery 设置 php $_GET[] 数组？我有一个与此类似的字符串：`$sample_string = "Hi there, this text contains space and the character: &";`. 我还有一个包含目的地名称的变量：`$saveAs = "SomeVariable";`. 在 PHP 中，它看起来如下：`$_GET["$SomeVariable"] = $sample_string;`.

**我如何在 Jquery 中做到这一点？**

在此先感谢，拉斯穆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:06:00.357

如果您使用 jQuery，则必须在客户端设置一个 AJAX 请求，该请求将 GET 请求发送到服务器。`$_GET[]`然后，您可以从服务器端的阵列中提取您在请求中提供的数据。

```
$(function() {
    var data =  { 
        sample_string: "hi",
        saveAs: "something"
    };
    $.get('/path/to/script.php', data, function(response) {
        alert(response); // should alert "some response"
    });
}); 
```

并在`script.php`：

```
<?php
$sample = $_GET['sample_string']; // == "hi"
$saveAs = $_GET['saveAs']; // == "something"
// do work
echo "some response";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:08:10.860

无法判断您是要从 javascript 获取 GET 参数还是从 jQuery 设置 GET 参数。如果是前者，我喜欢使用这段代码（从我不记得在哪里偷来的）：

```
var urlParams = {};
(function () {
    var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query  = window.location.search.substring(1);

    while (match = search.exec(query))
       urlParams[decode(match[1])] = decode(match[2]);
})(); 
```

然后你可以打电话

```
var cake = urlParams['cake']; 
```

[获取http://someurl.com?cake=delicious](http://someurl.com?cake=delicious)指定的 $_GET 参数

如果要发送 $_GET 参数，可以使用 jQuery 的 $.get() 或 $.ajax() 函数。$.get 函数更简单，这里有文档[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

对于 $.ajax 你会做这样的事情：

```
var trickystring = "Hi there, this text contains space and the character: &";
$.ajax({
  url:'path/to/your/php/script.php',
  data: {
    'getParam1':trickystring,
    'getParam2':'pie!'
  },
  type:'GET'
}); 
```

现在在 PHP 中，您应该能够通过以下方式获得这些：

```
$trickystring = $_GET['getParam1'];
$pie = $_GET['getParam2']; 
```

希望这些例子能得到你想要的东西。（得到它？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:06:53.857

如果`$sample_string`是你在 jquery 中想要的，你可以做 `var sample_str = '<?php echo $sample_string; ?>';`，然后在`sample_str`任何你想要的地方使用 js 变量。

现在，如果您想在 jquery 中设置 $_GET，则可以使用 ajax 函数。

```
 $.ajax({
 url:'path/to/your/php_script.php',
 data: {
'param1': 'pqr',
'param2': 'abc'
},
 type:'GET'
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:12:44.007

你的意思是你认为这看起来像 $_GET[$saveAs] = $sample_string 。$_GET 是一个变量，用于通过 URL 将信息从一个页面发送到另一个页面。在不是服务器端的 jQuery 中这样做是没有意义的。如果要动态设置 $_GET 变量以将其发送到另一个页面，则必须将其包含在 URL 中，例如：

```
/index.php?'+javascriptVariable_name+'='+javascriptVariable_value+'; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-21T13:57:52.283

$_GET 只是一个 URL 参数。所以你可以像这样访问`/index.php?id=1`：

```
echo $_GET['id']; 
```

看看这篇文章，它展示了使用 ajax 加载东西的所有方法：

[http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

# android - 在带有标题的图像列表中显示图形而不是字符串

> ID：12531991
> 
> 赞同：2
> 
> 时间：2012-09-21T13:57:19.650
> 
> 标签：android, imagelist

目前我正在从我的数据库中获取项目并将它们添加到一个名为 result 的字符串中，我将其返回并设置到我的 TextView 中：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.level);
    loadDataBase();

    int level = Integer.parseInt(getIntent().getExtras().getString("level"));

    questions = new ArrayList<Question>();
    questions = myDbHelper.getQuestionsLevel(level);

    tvQuestion = (TextView) findViewById(R.id.tvQuestion);

    i = 0;
        String data = getAllItems();
        tvQuestion.setText(data);
}
private String getAllItems() {
    result = "";

    for (i = 0; i<9; i++){
        result = result + questions.get(i).getQuestion() + "\n";
    }

    return result;
    // TODO Auto-generated method stub

} 
```

问题是，所有这些项目在数据库中也有一个标题（字符串）和图形拇指（字符串）。我想如下图所示展示它们，每个上面都有一个 onclicklistener，而不是一个无聊的项目列表。每个项目都有一个图片和标题。自从我开始编程技能以来，我想知道如何最好地做到这一点，如果你知道任何很好的教程可以很好地解释它吗？ ![图像列表](../Images/edbbebf857a450e975d551e290dd7132.png) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:42:52.747

如果我理解您的问题，您需要创建一个自定义适配器。

像这样创建一个新的简单类，其中包含一个字符串和一张图片

```
 Class ObjectHolder {
      int Image;
      String Title;
    } 
```

并为这两个创建一个 getter 和 setter

然后创建自定义 ArrayAdapter

```
 Class CustomArrayAdapter extends ArrayAdapter<ObjectHolder> {

      public CustomArrayAdapter(Context C, ObjectHolder[] Arr) {
        super(C, R.layout.caa_xml, Arr);
      }

    @Override
    public View getView(int position, View v, ViewGroup parent)
    {
    View mView = v ;
    if(mView == null){
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mView = vi.inflate(R.layout.cpa_xml, null);
    }
    TextView text = (TextView) mView.findViewById(R.id.tv_caarow);
    ImageView image = (ImageView) mView.findViewById(R.id.iv_caarow);
    if(mView != null )
    {   text.setText(getItem(position).getText());
        image.setImageResource(getItem(position).getImage());
    return mView;
    }
    } 
```

并在 res\layout\ 中创建 caa_xml.xml

```
 <?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" >
     <ImageView
       android:id="@+id/iv_caarow"
       android:src="@drawable/icon"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" />
     <TextView
       android:id="@+id/tv_caarow"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:paddingBottom="15dip"
       android:layout_BottomOf="@+id/iv_caarow" />
   </RelativeLayout> 
```

并像这样使用它。

```
 GridView GV= (GridView) findViewById(R.Id.gv); // reference to xml or create in java
   ObjectHolder[] OHA;
   // assign your array, any ways!
   mAdapter CustomArrayAdapter= CustomArrayAdapter(this, OHA);
   GridView.setAdapter(mAdapter); 
```

# php - 在 javascript 对象中应用 php/MySql while 循环

> ID：12531993
> 
> 赞同：-1
> 
> 时间：2012-09-21T13:57:21.137
> 
> 标签：php, javascript, mysql, while-loop, javascript-objects

我想采用以下 php/mysql 循环，并将结果： $test,$test1,$test2 应用于 javascript 代码中的 var Data 对象。这将使 var Data 动态化，从数据库中提取其数据以构造对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:35:40.317

```
<?php
include("regDBConnect.php");

// collect all the results
$rows = array();

$result1 = mysql_query("SELECT * FROM Phase where Pid = 1", $db) or die("cannot select");
while($row = mysql_fetch_array($result1)) {
  $rows []= array(
    'id' => $row['id'],
    'parent' => $row['parent'],
    'name' => $row['name'],
  );

  /*
     if you remove the line above and uncomment this instead,
     javascript objects will see all the properties you selected from the DB 
   */
  // $rows []= $row;
}
?>

<script type="text/javascript">
// now output the collected results
var treeData = <?php echo json_encode($rows); ?>;
</script> 
```

请注意，我所说的关于 PDO/MySQLi 的内容仍然适用，这只是回答这个特定问题的一个最小示例。（一般来说，你应该只选择那些你需要的列，而不是`*`。）

# iphone - 修改从不同类创建的对象的值并将其发送到服务器

> ID：12531996
> 
> 赞同：0
> 
> 时间：2012-09-21T13:57:24.143
> 
> 标签：iphone, objective-c

我是IOS开发的新手。我有一个类`UserDetails`，其中包含用户的详细信息，例如，`id`等。我想在另一个类中创建它的对象并修改一些参数，然后将详细信息发送到最终以 json 格式将其发送到服务器。你能告诉我怎么做吗？`name``type``NSDictionary`

这就是我正在做的事情：

```
NSDictionary * UserReference = [[UtilityClass sharedInstance] createUserDictionary:userDetails]; 
```

我想知道如何初始化`userDetails`对象（从`UserDetails`类），然后在另一个类中修改它的值（`int`和）。`string`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:20:15.917

首先，您必须研究有关 OOPS 概念的更多细节

当您再次对 UserDetails 类调用**alloc 和 init**时，旧值（用户名、用户标识、用户类型）将丢失。因为您正在为已经创建的 UserDetails 类创建一个**新对象**。

因此，尝试将之前创建的 UserDetails 对象（作为方法的参数或任何其他方式）传递给您计划再次修改属性的类。

# c# - 无法让我的 DataGridView 进行排序

> ID：12531997
> 
> 赞同：0
> 
> 时间：2012-09-21T13:57:25.750
> 
> 标签：c#, .net

我有一个绑定到一个 DataGridView`List<MyType>`

自动排序不起作用，所以我尝试以编程方式解决它。

Sort 方法采用我创建和使用的非泛型 IComparer，但出现错误：

> DataGridView 控件是数据绑定的。控件不能使用比较器来执行排序操作。

有什么想法可以让我对此进行排序吗？

编辑：更多研究表明，您应该在绑定的情况下对源进行排序。我正在使用 a`BindingSource`但它没有 Sort() 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:19:20.110

在 dataGridView 上有一个名为 Sort 的方法。使用方法如下：

```
this.dataGridView1.Sort(this.dataGridView1.Columns["Name"],ListSortDirection.Ascending); 
```

希望这可以帮助：）

# javascript - 在每个空格后标记一个特定的单词

> ID：12531999
> 
> 赞同：0
> 
> 时间：2012-09-21T13:57:31.383
> 
> 标签：javascript, jquery, filter

如果用户在文本区域中键入了不需要的单词，我会尝试警告用户。

它只是对某些单词的一点验证。

我做了这样的事情：

```
var words = "hello";
$("textarea").keyup(function(e){
    var spliting = $("textarea").val().split(" ");
    if(e.keyCode == 32){ // when the user hits space bar
        if($.inArray(words, spliting) != -1){
            $("span").css("background","red");
        }else{
            $("span").css("background","green");
        }
    }
});​ 
```

这是最好的方法吗？

如果我需要检查多个单词，我如何将变量迁移`words`为 a ？`array`

[**演示**](http://jsfiddle.net/f5TDk/25/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:02:35.450

要使用数组，您需要遍历其中的每个单词并遍历拆分数组中的每个单词。但是，您可以在第一场比赛中返回：

```
var words = ["hello","goodbye"];
$("textarea").keyup(function(e){

        var spliting = $("textarea").val().split(" ");

        for (var i=0; i<words.length; i++) {
          if($.inArray(words[i], spliting) != -1){
              $("span").css("background","red");
              // break on first match since there is no need to continue looping
              // if it is already red.
              break;
          }else{
              $("span").css("background","green");
          }
        }
});​ 
```

我已经删除了空格检查。即使它使功能更有效，您也需要警惕有人返回正确拼写并以无效单词结尾的情况。按照您的方式，除非稍后键入空格，否则这些情况将永远不会导致找到标记的单词。

建议也为事件调用此函数`onchange`，`blur`因为键入不是用户将输入输入到表单输入的唯一方式。

[这是更新的演示](http://jsfiddle.net/f5TDk/28/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:06:00.267

您不需要`.split`每次按下键时都输入，这是首选正则表达式的情况：

**[检查更新的小提琴](http://jsfiddle.net/f5TDk/26/)**

要基于数组生成表达式：

```
var blackList = ['hello','world'];
var expression = new RegExp('\\b(' + blackList.join('|') + ')\\b','i');

$("textarea").keyup(function(e)
{
  //if (e.keyCode === 32)
  //{in comment after reading the answer posted by Michael Berkowski
        if ($(this).val().match(expression))
        {
            $("span").css("background","red");
            return;
        }
        $("span").css("background","green");
  //}
});​ 
```