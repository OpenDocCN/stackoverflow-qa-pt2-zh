# StackOverflow 问答 13969000-13969999

# performance - 在 MongoDB 中获取文档子集的效果如何？

> ID：13969001
> 
> 赞同：3
> 
> 时间：2012-12-20T09:31:53.567
> 
> 标签：performance, mongodb

如果我们有一个集合`photos`并且每个条目都是一个大文档，其中包含有关照片的所有信息，包括查看详细信息和详细的赞成/反对票。

```
{
_id:ObjectId('...'),
title:'...',
location:'...',
views:[
    {...},
    {...},
    ...
    ],
upvotes:[
    {...},
    {...},
    ...
    ],
downvotes:[
    {...},
    {...},
    ...
    ],
} 
```

哪个查询会运行得更快、更有效（内存、CPU 使用率）：

```
db.photos.find().limit(100) 
```

或者

```
db.photos.find({}, {views:0,upvotes:0,downvotes:0}).limit(100) 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:51:15.350

这个故事实际上有两个方面，应用程序和服务器。

在应用程序中，第二个会更快。应用程序不必反序列化 BSON 文档（CPU 密集型），然后存储不需要数据的散列（内存密集型）。

在服务器上，MongoDB 可以在线发送更多数据，从而允许每个游标进行更多迭代，然后您必须执行`getMore`操作，从而提高这方面的性能。不仅如此，您当然会发送更少的数据。对于`getMore`内存和 CPU 而言，操作本身实际上是资源密集型的，因此这是一种节省。

至于在服务器本身内，投影的成本很小，但它会比把它全部带来的成本要小。

### 编辑

正如其他人所说，MongoDB 实际上使用投影来操作结果集，因此您将在两个查询之间拥有相同的工作集。

### 编辑

这是投影索引使用的结果：

```
> db.g.insert({a:1,b:1,c:1,d:1})
> db.g.ensureIndex({ a:1,b:1,c:1 })
> db.g.find({}, {a:0,b:0,c:0}).explain()
{
        "cursor" : "BasicCursor",
        "nscanned" : 3,
        "nscannedObjects" : 3,
        "n" : 3,
        "millis" : 0,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {

        }
}
> db.g.find({}, {a:1,b:1,c:1}).explain()
{
        "cursor" : "BasicCursor",
        "nscanned" : 3,
        "nscannedObjects" : 3,
        "n" : 3,
        "millis" : 0,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {

        }
} 
```

这也是不使用投影的结果：

```
> db.g.find({}).explain()
{
        "cursor" : "BasicCursor",
        "nscanned" : 3,
        "nscannedObjects" : 3,
        "n" : 3,
        "millis" : 0,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {

        }
} 
```

如您所见，`milis`在文档上花费的时间实际上在两者之间是相同的：`0`. 所以解释不是衡量这一点的好方法。

### 另一个编辑

排除 _id 不会应用覆盖索引：

```
> db.g.find({}, {a:1,b:1,c:1,_id:0}).explain()
{
        "cursor" : "BasicCursor",
        "nscanned" : 3,
        "nscannedObjects" : 3,
        "n" : 3,
        "millis" : 0,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {

        }
} 
```

### 又一个编辑

并且有 300K 行：

```
> db.g.find({}, {a:1,b:1,c:1}).explain()
{
        "cursor" : "BasicCursor",
        "nscanned" : 300003,
        "nscannedObjects" : 300003,
        "n" : 300003,
        "millis" : 95,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {

        }
}

> db.g.find({}).explain()
{
        "cursor" : "BasicCursor",
        "nscanned" : 300003,
        "nscannedObjects" : 300003,
        "n" : 300003,
        "millis" : 85,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {

        }
} 
```

因此，在庞大的结果集上进行投影确实成本更高，但请记住，在 300K 行上进行投影……我的意思是 WTF？谁会，在他们正确的头脑中，会这样做？所以这部分论点实际上并不存在。无论哪种方式，差异就像我的硬件上的 10 毫秒，几乎只有您查询的 1/10，因为这种投影在这里不是您的问题。

我还应该注意，该`--cpu`标志不会给您想要的东西，对于初学者来说，它实际上与写锁定有关，其次是您进行读取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:38:56.397

你可以自己做。只需`explain()`在查询末尾添加。

例如：

```
db.photos.find().limit(100).explain()

{
  "cursor" : "<Cursor Type and Index>",
  "isMultiKey" : <boolean>,
  "n" : <num>,
  "nscannedObjects" : <num>,
  "nscanned" : <num>,
  "nscannedObjectsAllPlans" : <num>,
  "nscannedAllPlans" : <num>,
  "scanAndOrder" : <boolean>,
  "indexOnly" : <boolean>,
  "nYields" : <num>,
  "nChunkSkips" : <num>,
  "millis" : <num>,
  "indexBounds" : { <index bounds> },
  "allPlans" : [
                 { "cursor" : "<Cursor Type and Index>",
                   "n" : <num>,
                   "nscannedObjects" : <num>,
                   "nscanned" : <num>,
                   "indexBounds" : { <index bounds> }
                 },
                  ...
               ],
  "oldPlan" : {
                "cursor" : "<Cursor Type and Index>",
                "indexBounds" : { <index bounds> }
              }
  "server" : "<host:port>",
} 
```

**Mills 参数是你想要的**

如果您想查看 cpu 使用情况，只需在启动脚本中添加`--cpu` 密钥。`mongod`

```
--cpu
Forces mongod to report the percentage of CPU time in write lock. mongod generates output every four seconds. MongoDB writes this data to standard output or the logfile if using the logpath option. 
```

[http://docs.mongodb.org/manual/reference/explain/](http://docs.mongodb.org/manual/reference/explain/)

**你可以像这样`hint()`向 mongo提供`projection()`：**

我们有简单的集合：

```
> db.performance.findOne()
{
        "_id" : ObjectId("50d2e4c08861fdb7e1c601ea"),
        "a" : 1,
        "b" : 1,
        "c" : 1,
        "d" : 1
} 
```

其中包含 23 个元素：

```
> db.performance.count()
23 
```

现在我们可以创建复合索引：

```
> db.performance.ensureIndex({'c':1, 'd':1}) 
```

并为 mongo 提供使用 index 进行投影的提示。

```
> db.performance.find({'a':1}, {'c':1, 'd':1}).hint({'c':1, 'd':1}).explain()
{
        "cursor" : "BtreeCursor c_1_d_1",
        "isMultiKey" : false,
        "n" : 1,
        "nscannedObjects" : 23,
        "nscanned" : 23,
        "nscannedObjectsAllPlans" : 23,
        "nscannedAllPlans" : 23,
        "scanAndOrder" : false,
        "indexOnly" : false,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "millis" : 0,
        "indexBounds" : {
                "c" : [
                        [
                                {
                                        "$minElement" : 1
                                },
                                {
                                        "$maxElement" : 1
                                }
                        ]
                ],
                "d" : [
                        [
                                {
                                        "$minElement" : 1
                                },
                                {
                                        "$maxElement" : 1
                                }
                        ]
                ]
        },
        "server" : ""
}
> 
```

# python - numpy 重复元素

> ID：13969002
> 
> 赞同：5
> 
> 时间：2012-12-20T09:31:55.120
> 
> 标签：python, arrays, numpy, expand

也许这是一个简单的问题，但是有没有一种快速的方法来复制数组中的元素？对于 3D，它应该像这样工作：

```
1 2 3
4 5 6
7 8 9

1 1 2 2 3 3
1 1 2 2 3 3
4 4 5 5 6 6
4 4 5 5 6 6
7 7 8 8 9 9
7 7 8 8 9 9 
```

我尝试了 3 个嵌套的 for 循环，但这真的很慢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T09:34:57.330

```
>>> a = np.array([[1, 2, 3],
                  [4, 5, 6],
                  [7, 8, 9]])
>>> np.repeat(np.repeat(a, 2, 0), 2, 1)

array([[1, 1, 2, 2, 3, 3],
       [1, 1, 2, 2, 3, 3],
       [4, 4, 5, 5, 6, 6],
       [4, 4, 5, 5, 6, 6],
       [7, 7, 8, 8, 9, 9],
       [7, 7, 8, 8, 9, 9]]) 
```

# c# - 如何在 C# 中使用正则表达式获取所有表名？

> ID：13969009
> 
> 赞同：3
> 
> 时间：2012-12-20T09:32:15.343
> 
> 标签：c#, sql, regex

我需要为 C# 构建一个正则表达式，以便捕获 select 子句中“from”关键字之后的所有表名。例如

```
.
.
.
SELECT field1, field2
FROM table1
WHERE condition1
.
.
.
SELECT field3, field4
FROM table2
WHERE condition2
.
.
. 
```

我尝试读取的文件中有多个 select 子句，并且 select 和 from 之间可以有任何字符（包括换行符、':'、'_' 和任何其他字符）。我应该如何构建我的正则表达式以获取所有表名？

谢谢

**编辑：** 我找到了一种获取所有表名的方法。

```
\s*SELECT[^;]*FROM\s*(?<key>[^\n]*) 
```

这可能会在某一天帮助某人。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:01:05.993

除非所有查询都只有一个表并且没有有趣的评论业务，否则使用正则表达式是一个失败的提议。反而：

```
SET SHOWPLAN_ALL ON;

--All your queries here 
```

请参阅[设置 showplan_all](http://msdn.microsoft.com/en-us/library/ms187735.aspx)文档。

当我说正则表达式会变得复杂时，这就是我的意思。这些只是*一些*考虑因素：

*   您必须检测带引号的字符串的开头：`"`, `'`,`[`并忽略其中的所有字符，直到正确终止。如果结束字符加倍，则不要终止（即`'this is ''fun'', he said'`在 之后不停止`is`）。

*   `--`您必须排除不在引号内的单行注释，并在下一个 CRLF 处终止它们。注释中的引号不会像往常一样开始字符串。

*   您必须排除`/*`不在引号内或单行注释内的多行注释（以 开头），然后跳过除终止符 . 之外的所有其他内容`*/`。在您的正则表达式中，请务必`*`使用反斜杠转义字符`\`。

*   然后，您必须找到具有正确单词边界的有效子句（例如`FROM`，列名`SelfRom`或没有错误匹配）。`AfroMonkey`

*   要正确终止 FROM 子句，您必须在看到任何关键字时停止捕获，包括`WHERE`、`GROUP BY`、`HAVING`、`ORDER BY`和`WITH`; 并且由于 SQL 查询不需要有分号终止符，`;`那么您还必须在`SELECT`, `DBCC`, `SET`, `CREATE`,等处终止。`ALTER``DROP`

*   但即使是前两点本身也不够，因为如果您的查询如下所示：

    ```
    SELECT *
    FROM
       MyTable T
       INNER JOIN (
          SELECT * FROM YourTable Y WHERE Active = 1
       ) X ON T.ID = Y.ID
       INNER JOIN AnotherTable A
          ON X.AID = A.AID 
    ```

    现在，您必须解析括号，并且在看到任何这些关键字时不要停止捕获 FROM 子句。而且你必须跟踪你有多少括号，并一直忽略，直到你有那么多括号。最后，你如何处理这些，因为派生表就像一个表——你想要派生表的全​​文还是里面的表？

为此，您不能只从`FROM`文本中的第一个有效字符开始匹配，因为这可能在引号或注释中。您必须匹配从头开始的所有文本，因为这是使用正则表达式确保您找不到不应该匹配的唯一方法。

这是我想出的只是尝试处理**评论**的方法。甚至没有引号。它只能找到*from*子句，而不是里面的内容。另外，我们必须防止括号被捕获，这样在检查我们的捕获组以获取实际的 FROM 子句时，我们不会遇到可怕的混乱。

```
(?:(?:-(?!-)|/(?!\*)|f(?!rom)|[^-f/])|--[^\n]*\n|/\*(?:\*/)*\*/)*from() 
```

而且它可能充满了错误，一旦我玩了一点，我就不得不重新考虑整个事情，总而言之，这将是巨大的时间浪费。

我认为您低估了要做好这样的事情的难度。但是有一个完全可靠的解决方案！我在上面给出的那个：让 SQL Server 为您解析所有内容。您可以轻松解析返回的计划，因为它的结构很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:41:19.970

首先我想说看看这个教程： http: [//www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

查看这样的正则表达式：`((?<=FROM )[^\s]+)`

此正则表达式将在`"FROM "`（包括空格）之后直接开始读取，并在第一个空格处停止读取`(^\s)`

如果你尝试这样的事情

```
foreach (Match m in Regex.Matches(input, @"((?<=FROM )[^\s]+)")
{
    string output = m.Value;
} 
```

编辑：

我不是 100% 确定这个正则表达式。如果您的名称末尾有换行符，这可能会做得更好：`@"((?<=FROM)[^\n]+))`但您可能应该修剪输出，因为输出字符串的开头可能有一个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:45:01.050

```
var input = "select name from Table1 where id =2";
var pattern = @"from\s*(.*?)\s*where"; // where car= is the first delimiter and ; is the second one
var result = Regex.Match(input, pattern).Groups[1].Value;
MessageBox.Show(result); 
```

# iphone - 以编程方式在 ios 中定义自定义关键字

> ID：13969010
> 
> 赞同：3
> 
> 时间：2012-12-20T09:32:17.697
> 
> 标签：iphone, keyword, custom-keyword

我想在 iphone 中以编程方式创建自定义关键字。例如。NSLog 在控制台中打印日志。我的许多框架都使用自己的日志（自定义日志），例如 Aphlogs 等。我想定义我自己的关键字，例如 MYLogs，这样当我在任何地方使用时，`MYLogs(stackoverflow);`它应该调用一个方法“MYLogsCalled”，并将“stackoverflow”作为参数和我可以用这种方法执行我自己的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:44:56.260

您可以使用宏快速执行此操作。

首先创建你要调用的方法，所以做一个类调用`MyLogs`并添加一个方法

```
+ (void)myLogsCalled:(id)arg; //do whatever you want in the implementation 
```

然后定义一个宏

```
#define MyLogsCalled(arg) [MyLogs myLogsCalled:arg] 
```

另一种方法是定义一个处理日志的 extern 函数（这就是 NSLog 所做的），但是使用`#defines`它可以更清洁地执行诸如关闭[DLog 通常所做的发布版本中的日志之类的事情](http://overbythere.co.uk/blog/2012/01/alternatives-nslog)

# tridion - 受托人表中的名称无效。如何删除？

> ID：13969011
> 
> 赞同：4
> 
> 时间：2012-12-20T09:32:27.723
> 
> 标签：tridion, tridion-2011

我去了访问管理，然后在 SDL Tridion 2011 SP1 的用户管理中看到了一些重复的用户条目。当我尝试通过 CMS 删除这些用户时，它显示错误“TRUSTEES 中的名称无效”。

如果有人使用任何数据库查询从数据库中的受托人表中删除这些无效条目，您能否告诉我们是否应该删除它的所有约束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:33:23.030

执行数据库查询将使您的保修失效，所以我不建议这样做。当用户被删除然后再次添加时（在数据库中）可能会出现重复的名称条目（删除的用户保留在数据库中，因此历史记录仍然有正确的参考），这不会导致任何问题（因为用户名是不是唯一的键）。

因此，对于您提到的错误，我会联系客户支持，因为它可能有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:16:38.367

Trustees 表中重复的用户名本身不是问题——正如 Bart 所提到的，记录永远不会从表中删除，用户被标记为“已删除”。

但是，“TRUSTEES 中的名称无效”消息是一个问题。我们需要查看实际数据以确定最佳解决方案，并且您可能不想在公共论坛上发布所有用户帐户的列表。我建议联系支持人员（如 Nuno 所述）并向他们发送您的 TRUSTEES 表的导出（csv / xlsx 格式）。

手动编辑数据库将导致失去支持。

# php - 选择最高的最后一行

> ID：13969014
> 
> 赞同：4
> 
> 时间：2012-12-20T09:32:49.987
> 
> 标签：php, mysql, sql

我想选择每个成员的最后一行。

```
ID     UID      POINT        DATE           TIME

1       1         5       2012-11-29      11:29:03    
2       2        10       2012-11-29      11:38:12    
3       1        10       2012-12-02      05:15:01    
4       3         5       2012-12-02      09:51:34    
5       2         5       2012-12-02      12:14:14    
6       3         5       2012-12-04      12:18:30
7       1         5       2012-12-05      06:00:51 
```

所以我想选择ID，UID和POINT，其中点是每个用户的最高点。结果应该是：

```
ID     UID      POINT        DATE           TIME

2       2        10       2012-11-29      11:38:12    
3       1        10       2012-12-02      05:15:01      
6       3         5       2012-12-04      12:18:30 
```

我试过这个：

```
SELECT distinct uid, point, id FROM `test` 
GROUP By uid ORDER BY date DESC, time DESC 
```

和

```
SELECT id, uid, point FROM `test` 
GROUP BY uid ORDER BY date DESC, time DESC 
```

但我得到了一些错误的结果：

```
4(3), 2(2), 1(1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:38:53.447

尝试：

```
SELECT id, uid, MAX(point) FROM `test` GROUP BY uid ORDER BY date DESC, time DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:46:50.080

此查询将为每个用户选择最高点：

```
select uid, max(`points`)
from members
group by uid 
```

这将选择用户拥有最大点数的最大 id：

```
select uid, max(id)
from members
where (uid, `points`) in (select uid, max(`points`)
                          from members
                          group by uid)
group by uid 
```

这是您需要的最终查询：

```
select members.*
from members
where (uid, id) in (
  select uid, max(id)
  from members
  where (uid, `points`) in (select uid, max(`points`)
                            from members
                            group by uid)
  group by uid) 
```

这表明：

```
ID  UID  POINT  DATE        TIME
2   2    10     2012-11-29  11:38:12    
3   1    10     2012-12-02  05:15:01      
6   3    5      2012-12-04  12:18:30 
```

这也将给出相同的结果，并且看起来更简单：

```
SELECT s.*
FROM
  (SELECT members.*
   FROM members
   ORDER BY uid, points desc, id desc) s
GROUP BY uid 
```

我认为它会一直有效，但它没有记录在案！

对最后一个查询的一点解释：MySql 允许您通过查询选择组中的非聚合字段。这里我们分组`uid`但选择所有列：文档说非聚合列的值将是不确定的（它可以是组内的**任何**值）但实际上 MySql 只返回第一个遇到的值。而且由于我们在有序子查询上应用了带有非聚合列的 group by，所以第一个遇到的值就是您所需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:36:37.467

试试这个 ：

```
SELECT id, uid, point FROM `test` 
GROUP BY uid 
ORDER BY point DESC, date DESC, time DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T10:04:40.263

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/19ec2/16)**

```
SELECT t1.*
FROM Table1 t1 
WHERE t1.ID = (SELECT MAX(t3.ID)
               FROM Table1 t3
               WHERE t1.UID=t3.UID
               AND t3.POINT=(SELECT  MAX(t2.POINT)
                               FROM Table1 t2
                               WHERE t2.UID = t3.UID)) 
```

结果：

```
| ID | UID | POINT |                            DATE |     TIME |
-----------------------------------------------------------------
|  2 |   2 |    10 | November, 29 2012 00:00:00+0000 | 11:38:12 |
|  3 |   1 |    10 | December, 02 2012 00:00:00+0000 | 05:15:01 |
|  6 |   3 |     5 | December, 04 2012 00:00:00+0000 | 12:18:30 | 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T09:46:42.743

这是正确的：

```
SELECT ID, UID, MAX(POINT) FROM `test` GROUP BY UID ORDER BY DATE DESC, TIME DESC 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T09:47:41.050

*   [SQLFIDDLE 参考](http://sqlfiddle.com/#!2/92726/1)：从第一个答案更新以匹配预期结果。

询问：

```
SELECT x.*
FROM (SELECT p.*
FROM points p
ORDER BY uid, point desc, id desc) as x
GROUP BY x.uid
; 
```

结果：

```
ID  UID     POINT   DATE                                TIME
3   1       10      December, 02 2012 00:00:00+0000     January, 01 1970 05:15:01+0000
2   2       10      November, 29 2012 00:00:00+0000     January, 01 1970 11:38:12+0000
6   3       5       December, 04 2012 00:00:00+0000     January, 01 1970 12:18:30+0000 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T10:08:11.180

就这么简单：

```
SELECT * FROM (SELECT * FROM `points` ORDER BY point DESC) AS `t1` GROUP BY uid; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-20T10:27:04.577

SELECT max(point), id, uid FROM test GROUP BY uid ORDER BY point DESC

以这种方式使用，它将解决您的问题。

# objective-c - 预定方法中的 addChild

> ID：13969024
> 
> 赞同：1
> 
> 时间：2012-12-20T09:33:15.663
> 
> 标签：objective-c, ios, cocos2d-iphone

我是初学者，`Cocos2d`我遇到了一个我自己似乎无法解决的问题。我的问题是，如果我`CCSprite`在预定的方法中添加一个，添加的图像的背景将是不透明的（黑色），即使原点是透明的 PNG。但是代码更好地解释了我正在尝试做的事情，所以

```
- (void) openShutters 
{
  NSInteger randomTime = (arc4random() % 3) + 2;
  [self schedule:@selector(openShutter) interval:0 repeat:1 delay:randomTime];
}

- (void) openShutter 
{
  NSInteger randomShutter = (arc4random() % [shutters count]);

  CCSprite *soldier = [CCSprite spriteWithFile:@"soldier.png"];
  soldier.anchorPoint = CGPointMake(0, 1);
  soldier.position = ccp(0, winSize.height);
  [self addChild:soldier];

  [self unschedule:@selector(openShutter)];
  [self openShutters];
} 
```

这里奇怪的问题是，如果我进入`CCSprite *soldier = [CCSprite ...`方法`openShutters`，精灵将根据需要显示为透明背景。这是我的代码中的`cocos-2d`一个错误，还是我的代码中的一个错误，或者从计划的方法中添加新的孩子是不安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:01:18.723

在 openShutters 方法中，您分配间隔 = 0 此语句在设置间隔值大于零工作正常后创建问题

# jquery - 仅显示最近 20 个帖子的 fb 提要

> ID：13969026
> 
> 赞同：0
> 
> 时间：2012-12-20T09:33:23.313
> 
> 标签：jquery, facebook, json, rss, feed

我的提要[URL](https://www.facebook.com/feeds/page.php?id=397319800348866&format=json)采用 JSON 格式。但我只看到最后 20 个帖子。我如何使用 json 格式获取所有帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:02:15.463

你可以使用[https://graph.facebook.com/397319800348866/feed?limit=100](https://graph.facebook.com/397319800348866/feed?limit=100)（或任何你想要的数字）来获得这个。不幸的是，facebook 改变了它，所以你需要一个访问令牌来做到这一点。通过获取[https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=APP_ID&client_secret=APP_SECRET很容易获得](https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=APP_ID&client_secret=APP_SECRET)

这里有一个关于整个过程的很好的教程：[https ://illuminatikarate.com/blog/facebook-graph-api-requires-access-token-for-feed-access/](https://illuminatikarate.com/blog/facebook-graph-api-requires-access-token-for-feed-access/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:54:08.177

您需要为此使用 gaph.facebook.com 并添加 ?limit=25 或您想要的。

# jquery-ui - 如何在 jQuery mobile 中禁用和启用选择

> ID：13969027
> 
> 赞同：1
> 
> 时间：2012-12-20T09:33:24.297
> 
> 标签：jquery-ui, ios5, jquery-selectors

我正在使用 jQuery 为 iOS 做网络应用程序。我在一页中有一个选择。根据要求，我必须禁用它。

```
 <select name="select-choice-a" id="selectCardType" data-native-menu="false">
           <option value="select">Select Card Type</option>
           <option value="A">American Express</option>
           <option value="M">Master Card</option>
           <option value="V">Visa</option>
      </select> 
```

我有 2 个场景'用户可以直接访问页面或通过 url 方案形成另一个应用程序'

我用过

`$('#selectCardType').selectmenu('disable');`
或者

'$('#selectCardType').attr('disabled', 'disabled'); `

但无论哪种情况，它都不适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:13:01.663

谢谢你的帮助。我得到了解决方案。

创建一个全局变量`var onceVisitedCardpage = false;`

如果您访问过该页面，则将此变量设为**true**

然后在进入该页面之前检查该变量的状态

```
 if(onceVisitedCardpage)
        $('#selectCardType').selectmenu('disable');
    else
        $('#selectCardType').attr("disabled", "disabled"); 
```

通过这种方式，我设法处理了这两种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:10:21.367

如果我禁用一个简单的选择...它在任何浏览器（包括 iOS）中都被禁用

演示：http: [//jsbin.com/unezod/2/](http://jsbin.com/unezod/2/)

```
$("#selectCardType").prop("disabled", true); 
```

上面的链接是这样显示的：

![在此处输入图像描述](../Images/afd8fc880a1532c5fc7261194dc65bcf.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-28T03:43:00.127

[与这里](https://stackoverflow.com/questions/19330101/how-to-enable-and-disable-selectmenu-jquery-mobile/65046090)非常相似。我有同样的问题，正在尝试使用：

```
$("selectId").selectmenu("disable"); 
```

直到我在 ID 前面添加了一个 # 才会起作用，即

```
$("#selectId").selectmenu("disable"); 
```

现在它起作用了。

# php - 使用 Yii ePDF 在电子邮件中发送多个 pdf

> ID：13969029
> 
> 赞同：2
> 
> 时间：2012-12-20T09:33:29.377
> 
> 标签：php, pdf, yii

我正在生成带有预订凭证的 pdf 文件。现在的重点是客户可以为多人预订房间，因此应该有两张优惠券，这样客户就不会依赖于一张优惠券。

我正在使用 Yii 的 ePDF 扩展，它使用 mpdf 和 html2pdf。这是我生成单个 pdf 的代码：

```
//foreach voucher generate a pdf
    foreach($rhrs as $rhr) {
                $this->generatePDF($reservation, $rhr);
            } 
```

生成pdf函数：

```
private function generatePDF($reservation, $rhr)
{

    $pdf = Yii::app()->ePdf->mpdf('','', 0, '', 0, 0, 0, 0, 0, 0, 'P');
    $pdf->WriteHTML( $this->renderPartial('voucher', array(
            'rhr'=>$rhr,
            'reservation'=>$reservation
        ), true) );

    $this->sendMailWithPDF($pdf, $reservation);
} 
```

sendmailWithPDF 函数：

```
private function sendMailWithPDF($pdf, $reservation)
    {

        $content = $pdf->Output('', 'S');

        $content = chunk_split(base64_encode($content));
        $mailto = $reservation->emailaddress;
             ....

            $is_sent = @mail($mailto, $subject, "", $header); 
```

问题是这会用一个pdf发送多封电子邮件。我正在尝试发送一封包含多个 pdf 的电子邮件。我本来想建一个数组，但一开始我想问你们，你们对如何正确处理这个问题有什么看法？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:44:29.280

就个人而言，我会将您的功能与`generatePDF()`功能分离，`sendMailWithPDF()`以便您可以独立调用它们。从技术上讲，您没有理由只需要发送电子邮件来生成 PDF。

相反，如果您的`generatePDF()`函数只是返回 PDF 对象，您可以创建一个数组，然后将其传递给您的`sendMailWithPDF()`函数。

像这样的东西：

```
//foreach voucher generate a pdf
$generatedPDFs = array();
foreach($rhrs as $rhr) {
        $generatedPDFs[] = $this->generatePDF($reservation, $rhr);
}
// Call the mail function outside of the pdf generator, but pass in the array instead
$this->sendMailWithPDF($generatedPDFs, $reservation);

private function generatePDF($reservation, $rhr)
{

    $pdf = Yii::app()->ePdf->mpdf('','', 0, '', 0, 0, 0, 0, 0, 0, 'P');
    $pdf->WriteHTML( $this->renderPartial('voucher', array(
            'rhr'=>$rhr,
            'reservation'=>$reservation
        ), true) );

    return $pdf;
}

private function sendMailWithPDF($pdf, $reservation)
{

    //Update this section to handle $pdf being an array
    $content = $pdf->Output('', 'S');

    $content = chunk_split(base64_encode($content));
    $mailto = $reservation->emailaddress;
    ....

    $is_sent = @mail($mailto, $subject, "", $header);
} 
```

现在代码可能无法完全按照我根据您的系统编写的那样工作，但是您应该通过解耦函数以增加灵活性来了解我的意思。

# download - .zip ibm mq 源代码

> ID：13969032
> 
> 赞同：1
> 
> 时间：2012-12-20T09:33:31.793
> 
> 标签：download, ibm-mq

我正在搜索 ibm mq .zip 文档。

我需要它来在我的机器上安装 t 以获得它的所有方法和类的描述。

我在哪里可以下载它？斯帕西巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:16:11.330

“WMQ 库”可在此位置获得[http://www-01.ibm.com/software/integration/wmq/library/index.html](http://www-01.ibm.com/software/integration/wmq/library/index.html)

从这里您可以查看在线信息中心；或者您可以下载它们以离线使用。

安装时，Java 客户端的 JavaDoc 也会放在磁盘上。因此，例如在 Windows 上 - C:\Program Files\IBM\WebSphere MQ\java\doc

请注意，有一个 InfoCenter 提供有关一起使用 WAS-WMQ 的信息 - Product Connectivity InfoCenter - 它具有用于场景的 PDF 和 EPUB 格式的下载。

[http://publib.boulder.ibm.com/infocenter/prodconn/v1r0m0/index.jsp](http://publib.boulder.ibm.com/infocenter/prodconn/v1r0m0/index.jsp)

# wcf - WCF 对每个请求都很慢

> ID：13969033
> 
> 赞同：2
> 
> 时间：2012-12-20T09:33:31.793
> 
> 标签：wcf, wcf-binding, wcf-client

我有一个 WCF 服务，它与 SQL 服务器连接并获取一些数据，构造对象然后返回它。我使用简单的绑定，.NET 4.0，当您创建 WCF 服务时，我没有添加任何特殊设置，只是模板中的默认设置。

该服务在我的本地数据库上运行良好，但现在当我部署在服务器上时，我检查了时间，处理需要 7 微秒（第一个需要更多时间）但在到达开始处理之前，WCF每次需要**3 秒**在点击第一行代码之前请求，我找不到原因。

```
<endpoint address="http://localhost/Service.svc" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IService" contract="Local.IService"
            name="BasicHttpBinding_IService" /> 
```

谢谢！

服务行为：

```
 <behaviors>
<serviceBehaviors>
<behavior>
<!-- To avoid disclosing metadata information, set the value below to false before deployment -->
<serviceMetadata httpGetEnabled="true"/>
<!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
<serviceDebug includeExceptionDetailInFaults="false"/>
</behavior>
</serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

绑定：

```
 <bindings>
<basicHttpBinding>
        <binding name="BasicBinding" maxReceivedMessageSize="10485760" />
</basicHttpBinding>
</bindings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:11:43.177

在请求到达 IIS 和到达 C# 代码之间发生的主要事情之一是安全检查。根据您的设置，您的开发机器上可能没有任何安全性。

假设您正在使用带有 NTLM 的 Windows 身份验证。然后有一个 3 请求握手与 http 、 401.2、 401.1 和 200 响应。在这些请求之间，您的 Web 服务器将与您的 AD 服务器通信。

您应该能够通过检查 IIS 日志来查看这是否是问题所在。

# javascript - 捕获链接点击（事件冒泡）

> ID：13969036
> 
> 赞同：0
> 
> 时间：2012-12-20T09:33:42.470
> 
> 标签：javascript, javascript-events

我对原始 javascript（习惯于使用 jQuery）相当陌生。我需要捕捉一些链接的点击，阻止默认操作，然后根据链接 href 做一些事情。

有些链接是直接的`<a href="example.com">Lorem</a>`，但有些可能包含其他 html 元素（图像、跨度...）。我将相同的事件处理程序绑定到所有必要的链接。我使用了一个解决方法，但在 Chrome 中它使用[`addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener),`useCapture`是错误的。

在我的事件处理程序中，我`event.target.getAttribute('href')`用来获取链接指向的位置。这在处理第一种链接时有效，但在我单击图像或跨度时无效，因为 event.target 是图像或跨度，而不是链接。我猜这与事件冒泡有关，但我不太确定解决方案是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:38:30.773

如果您使用事件委托（推荐），即仅将一个事件处理程序绑定到文档根目录，那么您必须向上遍历 DOM`event.target`并查看它是否在`A`元素内部：

```
var target = event.target;

while (target && target.nodeName !== 'A') {
    target = target.parentNode;
}

if (target) {
   // click was inside link
} 
```

* * *

如果将处理程序直接绑定到每个`A`元素，则可以使用`this`而不是`event.target`引用处理程序绑定到的元素。[阅读有关`this`事件处理程序的](http://www.quirksmode.org/js/this.html)更多信息。

# numpy - np.fft.fft 关闭 1000 倍（拟合功率谱）

> ID：13969039
> 
> 赞同：1
> 
> 时间：2012-12-20T08:41:45.207
> 
> 标签：numpy, fft

我正在尝试从我正在阅读的实验数据集中制作功率谱，然后将其拟合到理论曲线。现在一切正常，我没有出错，除了我的曲线与数据相差 1000 倍，我完全不知道问题可能是什么。我问了几个人，但无济于事。（希望大家能帮忙）

无论如何，我很确定它不是单位，因为我和其他 2 人对它们进行了三次检查。基本上，我需要使用最小二乘法将功率谱拟合到方程中。我不能发布整个代码，因为它相当长而且有点混乱，但这是傅立叶部分，我为所有未在代码中声明的数组和变量添加了注释）

```
#Calculate stuff
Nm = 10**-6 #micro to meter
KbT = 4.10E-21 #Joule 
T = 297\. #K
l = zvalue*Nm #meter

meany = np.mean(cleandatay*Nm) #meter (cleandata is the array that I read in from a cvs at the start.)
SDy = sum((cleandatay*Nm - meany)**2)/len(cleandatay) #meter^2

FmArray[0][i] = ((KbT*l)/SDy) #N
#print FmArray[0][i]

print float((i*100/len(filelist)))#how many % done?

#fourier
dt = cleant[1]-cleant[0] #timestep
N = len(cleandatay) #Same for cleant, its the corresponding time to cleandatay 
```

这是傅立叶部分开始的地方，我将 fft 转换为功率谱。然后我用数组freqs计算相应的频率步长

```
fouriery =  np.fft.fft((cleandatay*(10**-6)))
fourierpower = (np.abs(fouriery))**2
fourierpower = fourierpower[1:N/2] #remove 0th datapoint and /2 (remove negative freqs)
fourierpower =  fourierpower*dt #*dt to account for steps

freqs = (1.+np.arange((N/2)-1.))/50.

#Least squares method
eta = 8.9E-4 #pa*s
Rbead = 0.5E-6#meter
constant = 2*KbT/(3*eta*pi*Rbead)    

omega = 2*pi*freqs #rad/s
Wcarray = 2.*pi*np.arange(0,30, 0.02003) #0.02 = 30/len(freqs)
ChiSq = np.zeros(len(Wcarray))

for k in range(0, len(Wcarray)):
    Py = (constant / (Wcarray[k]**2 + omega**2))
    ChiSq[k] = sum((fourierpower - Py)**2)
    pylab.loglog(omega, Py)
    print k*100/len(Wcarray) 

index = np.where(ChiSq == min(ChiSq))
cutoffw = Wcarray[index]    
Pygoed = (constant / (Wcarray[index]**2 + omega**2))
print cutoffw
print constant
print min(ChiSq)
pylab.loglog(omega,ChiSq) 
```

所以我不知道可能出了什么问题，我认为它是 fft，因为没有其他东西真的会出错。下面是我根据光谱绘制所有拟合线时得到的图片，你可以看到它偏离了大约 1000（实际上正好是 1000，因为这留下了 10^-22 的最小二乘残差，但我不能只是随机相乘而不知道为什么） ![光谱](../Images/31ac0bd01a6f51805c95e058bcfbcf11.png) 只是为了详细说明图片。绿点是 fft 频谱，线条是拟合，红点是它认为的截止频率，蓝线是卡方拟合，寻找最低值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:20:41.423

您的库 FFT 例程可能包含 1/sqrt(n) 的比例因子。

检查您使用的 fft 的文档，因为在 fft 和 ifft 之间分配的比例因子的比例是任意的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:40:07.457

查看您正在使用的 FFT 的文档。许多 FFT 引入了通常为 N * 结果（样本数）的比例因子。乘以 1/N 将按比例缩放结果。（您说结果是 1000 太高了....难道您使用的是 1024 大小的 FFT？）

# git - 为新项目创建一个新的空分支

> ID：13969050
> 
> 赞同：403
> 
> 时间：2012-12-20T09:34:44.360
> 
> 标签：git, branch, git-branch

我们正在使用 git 存储库来存储我们的项目。我们有我们的分支离开原来的分支。但是现在我们想创建一个小的新项目来跟踪一些文档。为此，我们希望创建一个新的空分支来开始存储我们的文件，并且我希望网络的其他用户克隆该分支。

我们怎么能做到这一点？

我尝试了一些东西，但它们没有用。

```
$ mkdir proj_doc; cd proj_doc
$ git init
$ git add .
$ git commit -m 'first commit'
$ git br proj_doc
$ git co proj_doc
$ git br -d master
$ git push origin proj_doc 
```

它似乎可以推送分支，但是当我进行提取或拉取时，它会从其他分支下载信息，然后我还会从其他项目中获取一些额外的文件。最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：767
> 
> 时间：2012-12-20T09:57:46.573

您可以创建一个孤立的分支：

```
git checkout --orphan <branchname> 
```

这将创建一个没有父级的新分支。然后，您可以使用以下命令清除工作目录：

```
git rm --cached -r . 
```

并添加文档文件，提交它们并将它们推送到 github。

pull 或 fetch 将始终更新有关所有远程分支的本地信息。如果您只想拉取/获取单个远程分支的信息，则需要指定它。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-09-30T00:15:05.467

正确的答案是创建一个孤儿分支。[我在我的博客上](https://web.archive.org/web/20131202011315/http://www.sidja.in/post/62663941071)详细解释了如何做到这一点。[（存档链接）]

> ...
> 
> 在开始之前，请升级到最新版本的 GIT。要确保您运行的是最新版本，请运行
> 
> ```
> which git 
> ```
> 
> 如果它吐出旧版本，您可能需要使用包含您刚刚安装的版本的文件夹来扩充您的 PATH。
> 
> 好的，我们准备好了。将 cd 放入包含 git checkout 的文件夹后，创建一个孤立分支。对于此示例，我将分支命名为“mybranch”。
> 
> ```
> git checkout --orphan mybranch 
> ```
> 
> 删除孤立分支中的所有内容
> 
> ```
> git rm -rf . 
> ```
> 
> 做一些改变
> 
> ```
> vi README.txt 
> ```
> 
> 添加并提交更改
> 
> ```
> git add README.txt
> git commit -m "Adding readme file" 
> ```
> 
> 就是这样。如果你跑
> 
> ```
> git log 
> ```
> 
> 你会注意到提交历史是从头开始的。要切换回您的主分支，只需运行
> 
> ```
> git checkout master 
> ```
> 
> 您可以通过运行返回孤立分支
> 
> ```
> git checkout mybranch 
> ```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-12-20T23:25:10.990

像这样创建一个空的新分支：

```
true | git mktree | xargs git commit-tree | xargs git branch proj-doc 
```

如果您的 proj-doc 文件已经在单个子目录下的提交中，您可以这样创建新分支：

```
git commit-tree thatcommit:path/to/dir | xargs git branch proj-doc 
```

这可能比`git branch --orphan`让你有很多事情要做`git rm`更方便`git mv`。

尝试

```
git branch --set-upstream proj-doc origin/proj-doc 
```

看看这是否有助于解决您获取过多的问题。此外，如果您真的只想获取单个分支，那么在命令行上指定它是最安全的。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-09-09T12:46:25.953

如果您的 git 版本没有 --orphan 选项，则应使用此方法：

```
git symbolic-ref HEAD refs/heads/<newbranch> 
rm .git/index 
git clean -fdx 
```

做了一些工作后：

```
git add -A
git commit -m <message>
git push origin <newbranch> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-10-10T10:21:14.520

假设您有一个`master`包含文件/目录的分支：

```
> git branch  
master
> ls -la # (files and dirs which you may keep in master)
.git
directory1
directory2
file_1
..
file_n 
```

# 一步一步如何制作一个空分支：

1.  `git checkout —orphan new_branch_name`
2.  *在执行以下命令之前，请确保您位于正确的目录中：*
    `ls -la |awk '{print $9}' |grep -v git |xargs -I _ rm -rf ./_`
3.  `git rm -rf .`
4.  `touch new_file`
5.  `git add new_file`
6.  `git commit -m 'added first file in the new branch'`
7.  `git push origin new_branch_name`

在第 2 步中，我们只需在本地删除所有文件，以避免与新分支上的文件和您保留在`master`分支中的文件混淆。然后，我们在步骤 3 中取消链接所有这些文件。最后，步骤 4 及之后的步骤正在使用我们新的空分支。

完成后，您可以轻松地在分支之间切换：

```
git checkout master 
git checkout new_branch 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-01-25T03:24:21.113

最好的解决方案是使用`--orphan`选项创建一个新分支，如下所示

```
git checkout --orphan <branch name> 
```

这样，您将能够创建一个新分支并直接结帐到新分支。这将是一个无父分支。

默认情况下，该`--orphan`选项不会删除工作目录中的文件，因此您可以通过以下方式删除工作目录文件：

```
git rm --cached -r 
```

* * *

## 详细说明它的`--orphan`作用：

> `--orphan <new_branch>`
> 创建一个新的孤立分支，命名为`<new_branch>`，开始于`<start_point>`并切换到它。在这个新分支上进行的第一次提交将没有父母，它将成为与所有其他分支和提交完全断开的新历史的根。

索引和工作树的调整就像您之前运行过 git checkout <start_point> 一样。这允许您通过轻松运行 git commit -a 来创建一个新的历史记录，该历史记录记录一组类似于 <start_point> 的路径以进行根提交。

当您想从提交中发布树而不暴露其完整历史时，这可能很有用。您可能希望这样做以发布一个项目的开源分支，该项目的当前树是“干净的”，但其完整历史记录包含专有或其他受累的代码位。

如果你想开始一个断开的历史记录，记录一组与 <start_point> 完全不同的路径，那么你应该在创建孤立分支后立即通过运行 git rm -rf 清除索引和工作树。从工作树的顶层开始。之后，您将准备好准备新文件、重新填充工作树、从其他地方复制它们、提取 tarball 等。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-02-19T12:42:09.423

[基于Hiery Nomus 的](https://stackoverflow.com/a/19084785/1255179)这个答案。

您可以创建一个孤立的分支：

```
git checkout --orphan <branchname> 
```

这将创建一个没有父级的新分支。然后，您可以使用以下命令清除工作目录：

```
git rm --cached -r . 
```

然后你只需用空提交提交分支，然后推送

```
git commit -m <commit message> --allow-empty
git push origin <newbranch> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-06-10T07:17:24.983

我找到了这个帮助：

```
git checkout --orphan empty.branch.name
git rm --cached -r .
echo "init empty branch" > README.md
git add README.md
git commit -m "init empty branch" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-06T18:00:30.970

我在[这里找到了](https://stackoverflow.com/questions/15034390/how-to-create-a-new-and-empty-root-branch)

如果您使用 git 2.23 或更高版本，您可能会习惯`git switch`而`git restore`不是`git checkout`

所以如果你需要一个空分支试试这个：

```
git switch --orphan YourNewBranch 
```

就是这样 ：））

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2022-01-13T18:19:57.287

## 2022 更新

从 Git 2.23 开始，您可以使用它`git switch --orphan <new branch>`来创建一个没有历史记录的空分支。与 不同`git checkout --orphan`的是，所有**跟踪**的文件都将被删除。

一旦你在这个分支上确实有提交，它就可以被推送到远程存储库：

```
git switch --orphan <new branch>
git commit --allow-empty -m "Initial commit on orphan branch"
git push -u origin <new branch> 
```

# excel - 使用 EPPlus 按列对 Excel 工作表进行排序

> ID：13969059
> 
> 赞同：5
> 
> 时间：2012-12-20T09:35:22.483
> 
> 标签：excel, epplus

我正在使用[EPPlus](http://epplus.codeplex.com)生成 Excel 工作簿。

我试图弄清楚如何：

1.  按特定列对工作表进行排序（相当于在 Excel 中单击排序 AZ）或...
2.  为特定列的自动筛选设置排序顺序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T14:02:57.890

EPPlus 无法按列排序：[https ://epplus.codeplex.com/workitem/14791](https://epplus.codeplex.com/workitem/14791)

这不是您要求的，但如果这有助于 excel 互操作，您可以按如下所示按列排序：

```
Worksheet sheet = workBook.Sheets[1];
Range sortRange = sheet.Range["A1", "S100"];
sortRange.Sort(sortRange.Columns[5], Microsoft.Office.Interop.Excel.XlSortOrder.xlDescending); 
```

这将按列 E 对范围 A1:S100 进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-09T11:45:05.417

```
var startRow = 1;    
var startColumn= 1;
var endRow= 10;
var endColumn= 10;
var sortColumn = 5; //6th Column because index is ZeroBased.
using (ExcelRange excelRange = yourWorkSheet.Cells[startRow, startColumn, endRow, endColumn])
     {
         excelRange.Sort(sortColumn, true);
     } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-27T01:39:35.697

Jan Kallman 在 4.5.1 中发布了一种排序方法。你可以看到他在这里展示的一个例子：

[https://github.com/JanKallman/EPPlus/issues/78#issuecomment-349650208](https://github.com/JanKallman/EPPlus/issues/78#issuecomment-349650208)

```
 /// Sort the range by value
    /// </summary>
    /// <param name="columns">The column(s) to sort by within the range. Zerobased</param>
    /// <param name="descending">Descending if true, otherwise Ascending. Default Ascending. Zerobased</param>
    /// <param name="culture">The CultureInfo used to compare values. A null value means CurrentCulture</param>
    /// <param name="compareOptions">String compare option</param>
    public void Sort(int[] columns, bool[] descending=null, CultureInfo culture=null, CompareOptions compareOptions=CompareOptions.None) 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-03-25T12:52:29.207

使用工作表的 autofilter() 属性

# c# - 使用 ajax 显示 odata 信息的调用查询

> ID：13969061
> 
> 赞同：2
> 
> 时间：2012-12-20T09:35:25.467
> 
> 标签：c#, linq, sql-server-2008, entity-framework, odata

我有以下查询

```
 [WebGet]
    public IEnumerable<Table> Query1()
    {
        var Context = new ProjectEntities();
        var First = new DateTime(2012, 10, 5, 8, 0, 0, 0);
        var Last = new DateTime(2012, 11, 5, 17, 0, 0, 0);
      return 
            Context.Table.Where(
                s =>
                s.Date > First && s.Date < Last &&
                Context.Table2.FirstOrDefault(a => a.ID ==1).Table3.Contains(s.Table3)).ToList().Take(20);

    } 
```

表包含 3 `Foreign Keys`, `'Table3_id'`, `'Table5_id'`,`'Table6_id'`如您所见，我的查询返回一个`Table`实体列表。

我的阿贾克斯电话

```
<script type="text/javascript">
jQuery("#b7").click(function() {
    $.ajax({
        type: "GET",
        dataType: "json",
        url: "http://localhost:port/Ctx/Query1",
        success: function (data) {
            $.each(data, function (item) {
                if (item.Table5!= null) {
                    $("#t7").append("<tr>" + "<td>" + item.Table5.Title + "</td>" + "<td>" + item.Table3.Name + "</td>" + "<td>" + item.Date + "</td>" + "</tr>");
                     });

        }
    });
}); 
```

我的电话是错误的，因为它什么都不返回（或`undefined`）。

**我怎样才能调用该查询？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:35:01.510

试试这个：

创建接口

```
[ServiceContract]
public interface IMyQuery
{
    [OperationContract]
    [WebGet]
    public IQueryable<Table> Query1()
} 
```

然后在您的服务（.svc）中

```
[WebGet]
public IQueryable<Table> Query1()
{
  var Context = new ProjectEntities();
        var First = new DateTime(2012, 10, 5, 8, 0, 0, 0);
        var Last = new DateTime(2012, 11, 5, 17, 0, 0, 0);
      return 
            Context.Table.Where(
                s =>
                s.Date > First && s.Date < Last &&
                Context.Table2.FirstOrDefault(a => a.ID ==1).Table3.Contains(s.Table3)).Take(20).AsQueryable();

} 
```

• 操作必须是作为数据服务类成员的公共实例方法。

• 操作方法可能只接受输入参数。数据服务无法访问消息体中发送的数据。

• 如果定义了参数，则每个参数的类型必须是原始类型。任何非原始类型的数据都必须序列化并传递到字符串参数中。

• 该方法必须返回以下之一：

*   IEnumerable

*   可查询的

*   数据服务公开的数据模型中的实体类型。

*   一个原始类，例如整数或字符串。

• 为了支持排序、分页和过滤等查询选项，服务操作方法应返回 IQueryable。对于仅返回 IEnumerable 的操作，对包含查询选项的服务操作的请求将被拒绝。

• 为了支持使用导航属性访问相关实体，服务操作必须返回 IQueryable。

• 该方法必须使用[WebGet] 或[WebInvoke] 属性进行注释。

*   [WebGet] 允许使用 GET 请求调用该方法。

*   [WebInvoke(Method = "POST")] 允许使用 POST 请求调用方法。其他

不支持 WebInvokeAttribute 方法。

在你的 javascript 里面

```
<script type="text/javascript">
jQuery("#b7").click(function() {
    $.ajax({
        type: "GET",
        dataType: "json",
        url: "http://localhost/your service.svc/Query1?$format=json",
        success: function (data) {
            $.each(data.d, function (i) {
                if (data.d[i] != null) {
                ...
                }
            });
        }
    });
});
</script> 
```

如果这没有帮助，请尝试遵循以下[快速入门指南](http://msdn.microsoft.com/en-us/library/cc668796.aspx)

# c# - 为什么 Visual Studio 在其属性窗口中的某些属性在其他属性的设置器中被修改时不刷新？

> ID：13969062
> 
> 赞同：1
> 
> 时间：2012-12-20T09:35:36.283
> 
> 标签：c#, .net, visual-studio, properties

为什么 Visual Studio 在其属性窗口中的某些属性在其他属性的设置器中被修改时不刷新？

这是一个例子：

```
public partial class MyControl: UserControl {
  public MyControl() { InitializeComponent(); }
  private bool myThing=false;
  [Category("Behavior")]
  public bool Mything {
    get { return myThing; }
    set {
      myThing=value;
      Enabled=!Enabled;
      Visible=!Visible;
      AllowDrop=!AllowDrop;
      AutoScroll=!AutoScroll;
      AutoSize=!AutoSize;
      TabIndex+=2;
    }
  }
} 
```

将这个类制作为类库，将其构建为 DLL，然后将此组件放入 Visual Studio 的工具箱。然后在 VS 中新建一个“Windows 窗体应用程序”，并将此组件（MyControl）从工具箱中放入 Form1。

现在通过单击更改 VS-property-editor 中的 Mything 属性。当它打开和关闭时，您可以看到（在属性编辑器中）它增加了 TabIndex，并`AutoScroll`正确打开和关闭了 AutoSize 和属性，但不是 Enabled、Visible 和 AllowDrop 属性！这三个在属性编辑器中没有变化！！为什么？

您也可以使用 Button 而不是 UserControl 来尝试此操作，并且当 Enabled 属性关闭（通过 Mything-setter）时，您可以看到 Button 变为灰色，但仅在设计器视图中，在属性编辑器窗口中它仍然显示原值！！此外，如果您保存应用程序，您可以在 Form1.Designer.cs 中看到 Enabled 属性未刷新！下次加载项目时，它会加载未修改的值！（显示在属性编辑器窗口中）

我试过使用`RefreshProperties`Attribute，我试过实现`INotifyPropertyChanged`，但没有运气！:(

那么，为什么 Visual Studio 会在其属性编辑器中刷新某些属性而不会刷新其他属性呢？并且（在设置器代码中）我如何强制 Visual Studio 属性窗口刷新？

有任何想法吗？

# objective-c - 使用 XCode 将非 ARC 项目转换为 Objective-C ARC 时，Clang 因退出代码 254 失败

> ID：13969065
> 
> 赞同：5
> 
> 时间：2012-12-20T09:35:46.930
> 
> 标签：objective-c, ios, automatic-ref-counting

我正在尝试使用 XCode ARC 转换器将非 ARC 项目（ [https://github.com/allaboutapps/A3GridTableView ）转换为 ARC。](https://github.com/allaboutapps/A3GridTableView)我收到以下错误

**命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 254**。

我遵循了[http://maniacdev.com/2012/01/easily-get-non-arc-enabled-open-source-libraries-working-in-arc-enabled-projects/](http://maniacdev.com/2012/01/easily-get-non-arc-enabled-open-source-libraries-working-in-arc-enabled-projects/)教程的场景 1。

我将 XCode 版本 4.5.2 与 Apple LLVM 编译器 4.1 一起使用。

我试图用谷歌搜索该错误，但无法将其与我的情况联系起来。提前致谢。

整个错误输出是

```
CompileC /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/Objects-normal/i386/A3GridTableView.o A3GridTableView/A3GridTableView.m normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/mihirrege/Downloads/A3GridTableView-master
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch i386 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -ccc-arcmt-check -mios-simulator-version-min=5.1 -iquote /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/A3GridTableViewSample-generated-files.hmap -I/Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/A3GridTableViewSample-own-target-headers.hmap -I/Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/A3GridTableViewSample-all-target-headers.hmap -iquote /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/A3GridTableViewSample-project-headers.hmap -I/Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Products/Debug-iphonesimulator/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/DerivedSources/i386 -I/Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/DerivedSources -F/Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Products/Debug-iphonesimulator -include /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/PrecompiledHeaders/A3GridTableViewSample-Prefix-exjedgarwqkaqyfxqduaqwpafmyv/A3GridTableViewSample-Prefix.pch -MMD -MT dependencies -MF /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/Objects-normal/i386/A3GridTableView.d --serialize-diagnostics /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/Objects-normal/i386/A3GridTableView.dia -c /Users/mihirrege/Downloads/A3GridTableView-master/A3GridTableView/A3GridTableView.m -o /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/Objects-normal/i386/A3GridTableView.o

0  clang             0x0000000101058eb2 main + 17130418
1  clang             0x0000000101059339 main + 17131577
2  libsystem_c.dylib 0x00007fff8e4098ea _sigtramp + 26
3  libsystem_c.dylib 0x0000000101cadf80 _sigtramp + 18446603342454605488
4  clang             0x00000001005a60df main + 5912031
5  clang             0x0000000100c99793 main + 13200531
6  clang             0x0000000100a76270 main + 10958704
7  clang             0x0000000100b6d7ff main + 11971839
8  clang             0x0000000100b1ffbe main + 11654334
9  clang             0x0000000100b8e74c main + 12106828
10 clang             0x0000000100b900c1 main + 12113345
11 clang             0x0000000100b907dc main + 12115164
12 clang             0x0000000100a76c11 main + 10961169
13 clang             0x0000000100a791f9 main + 10970873
14 clang             0x00000001000211e5 main + 124645
15 clang             0x00000001000199d6 main + 93910
16 clang             0x0000000100018648 main + 88904
17 clang             0x0000000100006308 main + 14344
18 clang             0x0000000100002d87 main + 647
19 clang             0x0000000100002af4
Stack dump:

0\.  Program arguments: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -cc1 -triple i386-apple-ios5.1.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name A3GridTableView.m -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -target-cpu yonah -target-linker-version 134.9 -coverage-file /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/Objects-normal/i386/A3GridTableView.o -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.1 -arcmt-check -dependency-file /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/Objects-normal/i386/A3GridTableView.d -MT dependencies -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -iquote /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/A3GridTableViewSample-generated-files.hmap -iquote /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/A3GridTableViewSample-project-headers.hmap -include-pch /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/PrecompiledHeaders/A3GridTableViewSample-Prefix-exjedgarwqkaqyfxqduaqwpafmyv/A3GridTableViewSample-Prefix.pch.pth -D DEBUG=1 -D IBOutlet=__attribute__((iboutlet)) -D IBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName))) -D IBAction=void)__attribute__((ibaction) -I /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/A3GridTableViewSample-own-target-headers.hmap -I /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/A3GridTableViewSample-all-target-headers.hmap -I /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Products/Debug-iphonesimulator/include -I /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/DerivedSources/i386 -I /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/DerivedSources -F/Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Products/Debug-iphonesimulator -fmodule-cache-path /var/folders/j3/t6t3fgr52szcn945c3jn261c0000gn/T/clang-module-cache -O0 -Wno-trigraphs -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -std=gnu99 -ferror-limit 19 -fmessage-length 0 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-runtime-has-terminate -fobjc-default-synthesize-properties -fobjc-exceptions -fexceptions -fpascal-strings -fdiagnostics-show-option -serialize-diagnostic-file /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/Objects-normal/i386/A3GridTableView.dia -o /Users/mihirrege/Library/Developer/Xcode/DerivedData/A3GridTableViewSample-azjqesubssdefeedzlssseklompv/Build/Intermediates/A3GridTableViewSample.build/Debug-iphonesimulator/A3GridTableViewSample.build/Objects-normal/i386/A3GridTableView.o -x objective-c /Users/mihirrege/Downloads/A3GridTableView-master/A3GridTableView/A3GridTableView.m 
clang: error: unable to execute command: Segmentation fault: 11
clang: error: clang frontend command failed due to signal (use -v to see invocation)
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: i386-apple-darwin12.2.0
Thread model: posix
clang: note: diagnostic msg: PLEASE submit a bug report to http://developer.apple.com/bugreporter/ and include the crash backtrace, preprocessed source, and associated run script.
clang: error: unable to execute command: Segmentation fault: 11
clang: note: diagnostic msg: Error generating preprocessed source(s).
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 254 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:30:02.910

我有一个类似的问题。`@synthesize dataSource = _dataSource`在您的情况下，添加`A3GridTableView.m`应该会有所帮助。

`[A3GridTableView setDataSource:]`其中有一个内存管理错误，这在某种程度上与此 clang 崩溃有关。

# cakephp - CakePHP 从组件调用函数

> ID：13969068
> 
> 赞同：0
> 
> 时间：2012-12-20T09:35:55.953
> 
> 标签：cakephp, components

我在 CakePHP 中有一个名为 OverviewComponent.php 的组件文件

在那个组件中，我有 2 个函数（公共函数 A 和公共函数 B）

我想在公共函数 B 中调用公共函数 A

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:37:46.460

是的

在公共函数 B 中，您应该像这样调用函数 a：

```
$this->a(); 
```

# asp.net - 检索asp.net中checkboxlist的保存数据

> ID：13969074
> 
> 赞同：0
> 
> 时间：2012-12-20T09:36:09.930
> 
> 标签：asp.net, .net

我设计了一种具有`Checkboxlist`. 这种形式的表格用于将时隙分配给班级和部门，即（slot1 用于 1st_A，1st_B）

我已将数据绑定到`Checkboxlist`两个不同的表`(i.e class and division)`。

如果`page_load`我绑定**了 Chekboxlist**，则用户可以选择`class_division`时间段。然后点击保存按钮，我只将选定`Checkbox`的数据保存在另一个表中。

问题是当用户第一次运行表单时，用户可以为特定时间段选择任何 class_division。但是当用户选择另一个时间段时`Checkbox`，应该首先选择并禁用已经为另一个时间段选择的时间段，以便用户可以从中进行选择剩下的`class_division`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:01:23.593

保存数据后，可以**禁用分割槽**

```
CheckBoxList1.Items[i].Enabled = false; 
CheckBoxList1.Items[i].Selected = false; 
```

# java - 除了互斥锁或垃圾回收之外，还有哪些机制会减慢我的多线程 Java 程序的速度？

> ID：13969076
> 
> 赞同：17
> 
> 时间：2012-12-20T09:36:11.000
> 
> 标签：java, multithreading, performance, garbage-collection

**问题**

我有一段 java 代码（JDK 1.6.0._22，如果相关），它实现了一个没有互斥体的无状态、无副作用的函数。但是它确实使用了大量内存（我不知道这是否相关）。

过去，我访问过 Sun 实验室并收集了标准的“性能与线程数”曲线。由于这个函数没有互斥体，它有一个很好的图表，尽管垃圾收集随着线程数量的增加而启动。经过一些垃圾收集调整后，我能够使这条曲线几乎平坦。

我现在正在英特尔硬件上做同样的实验。硬件有 4 个 CPU，每个 CPU 有 8 个内核和超线程。这给出了 64 个可用的处理器（）。不幸的是，“性能与线程数”的曲线很好地适用于 1、2、3 个线程，并且上限为 3 个线程。在 3 个线程之后，我可以将任意数量的线程放入任务中，并且性能并没有变得更好

**尝试解决问题**

我的第一个想法是我很愚蠢并且在某处引入了一些同步代码。通常为了解决这个问题，我会运行 JConsole 或 JVisualVM，并查看线程堆栈跟踪。如果我有 64 个线程以 3 的速度运行，我预计其中有 61 个正在等待进入互斥锁。我没有找到这个。相反，我发现所有线程都在运行：只是非常缓慢。

第二个想法是，也许时间框架正在引入问题。我用一个虚拟函数替换了我的函数，该函数使用 AtomicLong 可以计算到十亿。这与线程数完美地缩放：使用 64 线程比使用 1 线程快 64 倍，我能够数到十亿 10,000 倍。

我想（绝望的开始）也许垃圾收集需要很长时间，所以我调整了垃圾收集参数。虽然这改善了我的延迟变化，但它对吞吐量没有影响：我仍然有 64 个线程以我期望 3 个运行的速度运行。

我已经下载了英特尔工具 VTunes，但我的技能很弱：它是一个复杂的工具，我还不明白。我订购了说明书：给自己一个有趣的圣诞礼物，但这有点太晚了，无法解决我目前的问题

**问题**

1.  我可以使用哪些工具（心理或软件）来提高我对正在发生的事情的理解？
2.  除了互斥锁或垃圾回收之外，还有哪些机制可能会减慢我的代码速度？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T09:41:12.200

> 我有一段 java 代码（如果相关，JDK 1.6.0._22）

从那时起，性能得到了相当多的改进。我会尝试 Java 6 update 37 或 Java 7 update 10。

> 但是它确实使用了大量的内存

这可能意味着您访问数据的方式可能很重要。访问主内存中的数据可能比主缓存慢 20+x。这意味着您必须谨慎地访问数据并充分利用您访问的每条新数据。

> 在 3 个线程之后，我可以将任意数量的线程放入任务中，但性能并没有好转相反，我发现所有线程都在运行：只是非常慢。

这表明您正在最大限度地使用资源。考虑到您正在使用的内存量，最有可能被用尽的资源是 CPU 到主内存的桥接。我怀疑你有一个 64 线程的桥！这意味着您应该考虑可能使用更多 cpu 但改进访问内存的方式（更少随机性和更多顺序）并在您这样做时减少卷（尽可能使用更紧凑的类型）。例如，我有“小数点后两位短”类型，而不是可以使用一半内存的浮点数。

正如您所观察到的，当每个线程更新它自己的私有 AtomicLong 时，您将获得线性可伸缩性。这根本不会使用 cpu 到主内存桥。

* * *

来自@Marko

> 彼得，你知道这些多核架构是如何与内存一起工作的吗？

没有我想要的那么多，因为这个问题对 Java 不可见。

> 每个核心都有独立的通道吗？

每个核心都有一个通往主缓存的独立通道。对于外部缓存，每个或 2-6 个缓存区域可能有一个通道，但在重负载下会发生大量冲突。

对于通往主内存的桥梁，有一个非常宽的通道。这有利于长顺序访问，但对于随机访问非常不利。单个线程可以通过随机读取将其最大化（足够随机，它们不适合外部缓存）

> 或者至少在没有碰撞的情况下是独立的？

一旦你耗尽了主缓存（L1 通常为 32 KB），它就会一直发生冲突。

> 因为否则缩放是一个大问题。

正如OP所展示的那样。大多数应用程序要么 a) 花费大量时间等待 IO b) 分配对小批量数据的计算。对大量数据进行计算分配是最坏的情况。

我处理这个问题的方法是将我的数据结构安排在内存中以进行顺序访问。我使用堆外内存，这很痛苦，但可以让您完全控制布局。（我的源数据是用于持久性的内存映射）我通过顺序访问将数据流式传输并尝试充分利用这些数据（即，我尽量减少重复访问）即使有 16 个内核，也很难假设所有内核都将被使用高效，因为我有 40 GB 的源数据我正在处理任何时间和大约 80 GB 的派生数据。

注意：高端 GPU 通过具有令人难以置信的高内存带宽来解决这个问题。高端处理器可以达到 250 GB/秒，而典型的 CPU 大约是 4-6 GB/秒。即便如此，它们更适合矢量化处理，并且它们引用的峰值性能可能很少有内存访问，例如 mandelbrot 集。

[http://www.nvidia.com/object/tesla-servers.html](http://www.nvidia.com/object/tesla-servers.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-22T13:47:23.177

很多实验之后我发现 JVM 没有任何区别，但我也发现了 JDump 的强大功能。64 个线程中有 50 个位于下一行。

```
java.lang.Thread.State: RUNNABLE
    at java.util.Random.next(Random.java:189)
    at java.util.Random.nextInt(Random.java:239)
    at sun.misc.Hashing.randomHashSeed(Hashing.java:254)
    at java.util.HashMap.<init>(HashMap.java:255)
    at java.util.HashMap.<init>(HashMap.java:297) 
```

Random.next 看起来像这样

```
 protected int next(int bits) {
    long oldseed, nextseed;
    AtomicLong seed = this.seed;
    do {
        oldseed = seed.get();
        nextseed = (oldseed * multiplier + addend) & mask;
    } while (!seed.compareAndSet(oldseed, nextseed));
    return (int)(nextseed >>> (48 - bits));
 } 
```

最有趣的是，这不是一个明显的锁，所以我用来发现互斥锁的工具不起作用。

所以看起来好像任何 java hashmaps 的创建都会导致应用程序停止可扩展（我夸大了但不多）。我的应用程序确实大量使用了 hashmap，所以我想我要么重写 hashmap，要么重写应用程序。

我提出了一个单独的问题，看看如何处理这个问题。

感谢所有的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T13:29:31.890

您可能会遇到[分配墙，](http://dl.acm.org/citation.cfm?id=1640116)即：您的程序运行速度不会比对象分配快，这受内存带宽的限制。

# python - 通过 Xampp 在 Windows 上使用 MySQL for Python

> ID：13969077
> 
> 赞同：4
> 
> 时间：2012-12-20T09:36:11.307
> 
> 标签：python, mysql, django, xampp, mysql-python

我已经通过 XAMPP 运行 MySQL，并且我还安装了 MySQLdb for python。但是，我想不出一种将我的 XAMPP 的 MySQL 用于 Python 的方法。每次我执行`python manage.py runserver`它都会显示一个错误：

`..2.4c1-py2.7-win32.egg.tmp\MySQLdb\connections.py", line 187, in __init__ _mysql_exceptions.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)")`

我是 Python 新手，这些是`settings.py`文件中的设置：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'tester',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': 'password',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

我正在使用`Django`. 如果我使用 SQLite3 而不是 MySQL，它可以正常工作。但我想使用 MySQL。

**编辑#1**

MySQL 正在使用端口：`3306`. 我如何让他们工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T11:57:05.983

经过5-6个小时的尝试，我终于让它工作了。

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'tester',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': 'password',                  # Not used with sqlite3.
        'HOST': '127.0.0.1',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '3306',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

在 cmd: 中运行命令`python manage.py runserver`，然后打开网页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:45:17.097

您可以检查端口吗，因为 mysql 使用默认端口作为 3306（如果没有手动更改）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T09:45:25.900

**您很可能需要添加一个运行 mysql 的端口。**这可能是 xampp 将 mysql 设置为标准 3306 以外的另一个端口。

**你可以在django之外连接到mysql吗？**

我猜你应该在 xampp 目录中找到一些 mysql.exe 文件。如果您通过终端导航到该目录，然后运行 ​​mysql.exe -uroot -p 。添加密码，这很可能是一个空白密码。

# c# - C# 函数不更新 SAFEARRAY

> ID：13969079
> 
> 赞同：5
> 
> 时间：2012-12-20T09:36:19.107
> 
> 标签：c#, c++, com, safearray

我有一个带有以下签名的 C# 函数：

```
int Get1251Bytes(string source, byte[] result, Int32 lengthOfResult) 
```

我从 C++ 中调用它。编译器告诉我第二个参数必须有`SAFEARRAY*`类型。所以我这样称呼它：

```
SAFEARRAY* safeArray = SafeArrayCreateVector(VT_UI1, 0, arrayLength);
char str[] = {'s', 't', 'a', 'c', 'k', '\0'};
converter->Get1251Bytes(str, safeArray, arrayLength); 
```

但是 safeArray 没有更新，它仍然包含 zores。但我`Get1251Bytes`在 C# 单元测试中测试了函数。它工作正常并更新`result`数组。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:12:31.127

您的问题与[Blittable 和 Non-Blittable 类型](http://msdn.microsoft.com/en-us/library/75dwhxf7.aspx)有关（`Byte`是 blittable）：

> 作为一种优化，仅包含 blittable 成员的 blittable 类型和类的数组在编组期间被固定而不是复制。当调用者和被调用者在同一个单元中时，这些类型可以作为 In/Out 参数编组。但是，这些类型实际上是作为 In 参数封送的，如果要将参数封送为 In/Out 参数，则必须应用 InAttribute 和 OutAttribute 属性。

要修复您的代码，您需要将`[Out]`属性应用于`result`C# 代码中的参数：

```
int Get1251Bytes(string source, [Out] byte[] result, Int32 lengthOfResult) 
```

此外，您不需要通过`lengthOfResult`. 在 .NET 中，您可以使用该`Length`属性来获取数组的大小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T10:00:02.083

即使使用 Array，您也必须使用`ref`or `out`。你应该使用`out`.

```
int Get1251Bytes(string source, out byte[] result, Int32 lengthOfResult)
{
    ...
} 
```

有关[out](http://msdn.microsoft.com/en-us/library/ee332485%28v=vs.80%29 "出去")和[ref](http://msdn.microsoft.com/en-us/library/14akc2c7%28v=vs.80%29.aspx "参考") lokk 的更多信息，请访问链接。

这里是关于[数组的文章](http://msdn.microsoft.com/en-us/library/szasx730%28v=vs.80%29.aspx)

# html - 如何在 html5 jw 播放器中播放 youtube 和 vimeo 视频

> ID：13969083
> 
> 赞同：4
> 
> 时间：2012-12-20T09:36:30.527
> 
> 标签：html, video, jwplayer, vimeo

我不知道如何在 iPhone、iPod、iPad 和其他非 Flash 机器上使用 HTML5 JW Player 播放 Vimeo 和 YouTube 视频。

例如，我有一个 URL [http://vimeo.com/43064629](http://vimeo.com/43064629) (Vimeo) 或[http://www.youtube.com/watch?v=RsrhJp7Dwy0](http://www.youtube.com/watch?v=RsrhJp7Dwy0) (YouTube)。我想在 iPhone、iPod、iPad 和非 Flash 设备上播放上述视频。这可以使用 JW Player 完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:53:06.440

我们不支持 Vimeo 文件，但应该支持 YouTube。

像这样的简单 JW 播放器设置将在 Flash/HTML5 中运行 - [http://www.longtailvideo.com/support/jw-player/29236/basic-youtube-stream](http://www.longtailvideo.com/support/jw-player/29236/basic-youtube-stream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T19:06:56.960

JWPlayer 可能不支持 Vimeo，但 Vimeo 支持第三方播放器。

[https://help.vimeo.com/hc/en-us/articles/224823567-How-do-I-use-a-third-party-player-with-Vimeo-PRO-or-Vimeo-Business-?flash_digest =8045c7a26dd56a8bb21f6cae3588f9f45ac3a34e](https://help.vimeo.com/hc/en-us/articles/224823567-How-do-I-use-a-third-party-player-with-Vimeo-PRO-or-Vimeo-Business-?flash_digest=8045c7a26dd56a8bb21f6cae3588f9f45ac3a34e)

只需将提供的链接复制到您的嵌入式视频属性中即可。

1.  从 Vimeo 复制链接（单击其中一个视频上的设置按钮，然后单击“视频文件”）
2.  [使用复制的 URL https://www.youtube.com/watch?v=aeAjliRTEMI](https://www.youtube.com/watch?v=aeAjliRTEMI)将 JW 播放器嵌入您的网站

# c++ - 如何在 Qt 中将项目添加到布局中？

> ID：13969090
> 
> 赞同：4
> 
> 时间：2012-12-20T09:37:01.933
> 
> 标签：c++, qt, user-interface

我正在 Qt 4.8.4 中开发一个应用程序，其中我执行以下操作：

我将 QGridLayout 子类化如下：

```
class Viewer : public QGridLayout
{
    Q_OBJECT
    ...................
private:
    // Objects
    /// Maximize button object
    ViewerGeneric* viewerGeneric;

    /// Maximize button object
    QPushButton* btnMaximize;

    /// Close button object
    QPushButton* btnClose;

    /// Connect button object
    QPushButton* btnConnect;

    /// Central viewer layout object
    QGridLayout* viewer;

    /// Indicates the row position in the main grid
    unsigned int row;

    /// Indicates the column position in the main grid
    unsigned int col;
}; 
```

然后在构造函数中我做这样的事情：

```
// Create the objects
btnMaximize = new QPushButton("max");
btnClose = new QPushButton("close");
btnConnect = new QPushButton("connect");

// Add the horizontal toolbar
QHBoxLayout* toolbar = new QHBoxLayout();
toolbar->setSizeConstraint(QLayout::SetMinimumSize);
toolbar->addItem(new QSpacerItem(0, 0, 
                     QSizePolicy::Expanding, QSizePolicy::Minimum));
toolbar->addWidget(btnMaximize);
toolbar->addWidget(btnClose);

// Add the 'Connect' button
viewer = new QGridLayout();
viewer->addWidget(btnConnect);

// Add the widgets
this->addItem(toolbar, 0, 0);
this->addItem(viewer, 0, 0, 2); 
```

但是，最后，当我在主窗口中显示 Viewer 类时，窗口**完全是空白**的！希望有人可以帮助我。谢谢你。

干杯，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:02:50.123

如果父小部件已经可见，则需要调用`show()`后面添加的小部件的方法使其可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T11:13:14.750

最后我找到了解决方案：

要将布局添加到布局中，请使用 addLayout() 函数而不是 addItem()。我真的不知道有什么区别，但它有效。

感谢您的意见！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:00:08.257

我想您可以使用 addWidget 函数添加它...我还没有使用它...您可以尝试一下...

[http://qt-project.org/doc/qt-4.8/qgridlayout.html](http://qt-project.org/doc/qt-4.8/qgridlayout.html)

有关更多信息，请参阅上面的页面...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:56:56.823

首先将它们的布局设置为父级，然后使用 addWidget 函数向其添加小部件。

如果需要，可以使用 show() 和 hide() 函数来避免闪烁并立即显示布局中的所有内容。

如果您不需要动态添加小部件，您应该尝试使用 QT 设计器并创建一个 .ui 类

# android - Android中的操作栏标签和重复背景

> ID：13969091
> 
> 赞同：0
> 
> 时间：2012-12-20T09:37:03.027
> 
> 标签：android, android-actionbar, actionbarsherlock, android-tabs

我知道错误[问题 15340：bitmapdrawable 的 tilemode 'repeat' 不能始终正常工作](https://code.google.com/p/android/issues/detail?id=15340)。

我已经通过使用`setBackgroundDrawable`方法在操作栏中成功解决了它。

不幸的是，我没有任何方法可以在选项卡上设置背景。

顶部顶部的操作栏和三个选项卡： ![在此处输入图像描述](../Images/72327f22de86d7b09b05e8a55d4a6498.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:24:25.787

您可以使用[setStackedBackgroundDrawable()](http://developer.android.com/reference/android/app/ActionBar.html#setStackedBackgroundDrawable%28android.graphics.drawable.Drawable%29)方法更改操作栏选项卡背景

# wpf - 当宽度设置为一个值时，为什么实际宽度为零。WPF

> ID：13969093
> 
> 赞同：0
> 
> 时间：2012-12-20T09:37:08.297
> 
> 标签：wpf, layout, actualwidth, actualheight

我有一个扩展`Canvas`. 在创建时，我明确地将其宽度设置为一个值：

```
Public Sub New(w As Integer, h As Integer)
    Me.Width = w
    Me.Height = h
End Sub 
```

`cnvPreview.Children.Add(e)`现在我使用where `e`is the instance of my extended canvas 将它的实例添加到画布到另一个画布。

但是，当我运行应用程序时，这些画布的 and 为 0 `ActualWidth`。`ActualHeight`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:55:27.083

不要`Canvas's`缩小到可能的最小尺寸，但仍然充分展示自己的孩子？这可能导致`ActualHeight`and`ActualWidth`值为零。尝试添加say，a`TextBlock`然后读取值。

我相信这在另一篇文章中得到了更好的解释：[为什么在这种情况下 ActualWidth 和 ActualHeight 0.0？](https://stackoverflow.com/questions/1695101/why-are-actualwidth-and-actualheight-0-0-in-this-case)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:55:35.127

请注意，`ActualHeight`and`ActualWidth`将在呈现控件后为您提供值。假设如果`Canvas` `Height`and`Width`为**50**，并且在渲染后`Canvas`缩小，那么它将返回一个较低的`ActualHeight`and`ActualWidth`值，或者如果不可见，则可能为零。

# linux - Linux Sed 在替换期间添加新行

> ID：13969094
> 
> 赞同：0
> 
> 时间：2012-12-20T09:37:13.880
> 
> 标签：linux, replace, sed, newline, substitution

我有一个很长的 CSV 文件，我正在尝试在每行的末尾添加一个双引号，以便所有值都包含在 "

如果我的文件如下所示：

```
"value", "value2", "value3
"value", "value2", "value3
"value", "value2", "value3 
```

我正在使用这个命令：

```
sed -i 's/$/"/g' file.sql 
```

然后文件看起来像这样：

```
"value", "value2", "value3
"
"value", "value2", "value3
"
"value", "value2", "value3
" 
```

那条新线来自哪里，我如何阻止它发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:43:59.440

我是一个傻瓜。我用来构建此 SQL 文件的 CSV 来自 Excel。

我需要运行`dos2unix`来修复新的行命令。然后它工作得很好。

感谢 Thor 验证命令本身没问题。

# qtp - 在 QTP 中，“调用现有操作”中面临错误

> ID：13969095
> 
> 赞同：0
> 
> 时间：2012-12-20T09:37:22.010
> 
> 标签：qtp

在`QTP`中，我已经调用了许多操作，`Call to existing action`并且它在同一台机器上运行良好。如果我使用不同的客户端机器来运行脚本，那么只有第一个测试运行，其余的操作没有运行。当我手动打开脚本时`QTP`，它显示 -

```
Missing Action1 - it suggested to add relative path 
```

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:08:57.590

导航到文件 > 设置，然后转到资源并关联操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T20:52:23.810

(1) 查看您配置的“QTP > 菜单 > 选项 > 文件夹”-设置，在您的两台 QTP 机器之间 (2) 您的脚本（包括驱动器#）是否具有相同的绝对路径？（我发现翻转驱动器很痛苦@！@## @@#$ ！！！）不幸的是，您必须玩很多技巧才能使“相对”路径真正按预期工作！恕我直言。

# bash - 使用 `while` 和数字关系测试的 BASH 脚本错误

> ID：13969100
> 
> 赞同：2
> 
> 时间：2012-12-20T09:37:45.663
> 
> 标签：bash, shell, ubuntu

我想创建 BASH 文件以使用 while 创建 50 个用户。但是当我运行它时遇到了一些问题。

```
limite=51
num=1

while [$numero != $limite]
do
  echo -n 'enter your name: ' "$num" ; read name
  sudo useradd $name
  num=$(($num + 1))
done 
```

问题来自第 1 行和第 4 行

不知道为什么！？

好吧，我有这个，它有效

```
limite=51
num=1

while [ $num != $limite ] ; do
  echo -n 'enter your name: ' "$num" ; read name
  sudo useradd $name
  num=$(($num + 1))   
done 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:17:16.323

使用 bash 成语，你的脚本最好写成

```
limite=51

for ((num=1;num<limite;++num)); do
    read -p "enter your name: $num" name
    sudo useradd "$name"
done 
```

或者更好（它会更快）：在一个文件中输入所有用户名，例如`user.txt`，每行一个名称，然后运行

```
while read name; do sudo useradd "$name"; done < user.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:40:29.840

shell 对于它在哪里需要空格（执行所谓的**分词**）非常迂腐：

```
while [ $numero != $limite ]; do
  echo ...
done 
```

应该做的伎俩。并且您应该决定是否要使用`$numero`或`$num`...如发布的那样它将不起作用，因为`$numero`未初始化使用。

一些背景：`while`复合语句的语法是

```
while list; do list; done 
```

列表可以是类似的程序（谁说`[`程序不能有像看起来不错。）`/usr/bin/[``while``[``$numero``!=``$limits``]`

程序与程序`[`相同`test`；后者不需要无用的`]`论点。事实上，我更喜欢使用以下方式编写所有条件`test`：

```
while test $numero != $limite; do
  echo ...
done 
```

另一个提示：分号`;`是*语句分隔符*，前面不需要空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:41:32.570

`[`实际上是一个命令，所以它后面需要一个空格，第 4 行应该是

```
while [ $numero != $limite ]

# See it's actually a command
$ which [        
/usr/bin/[ 
```

就像`catfile1`会抱怨一样`[$numero`，做`man test`更多的信息甚至`man bash`。

此外，如果这是完整的脚本`$numero`，应该是`$num`什么？

# jquery - Highcharts / Highstock 滚动条和缩放问题

> ID：13969103
> 
> 赞同：1
> 
> 时间：2012-12-20T09:38:08.767
> 
> 标签：jquery, scroll, zooming, highcharts, highstock

我设法按照**[这里](https://stackoverflow.com/questions/8518686/highcharts-scroll-through-axis)**的建议在 Highcharts 中启用了滚动条。

现在我遇到了奇怪的问题。

**缩放图表后不显示**重置缩放按钮。**但是当我在我的图表中禁用滚动时，它就像一个魅力。如何恢复重置缩放按钮以及为什么缩放后未启用？在控制台中也没有发现任何错误。**

 **接下来，如果启用了滚动，则滚动条**与图例框重叠**。无论如何，我可以将我的传奇`layout`设置为`horizontal`。但是如何避免这种重叠呢？

这是我尝试过的，

**[带滚动条](http://jsfiddle.net/gopinaghr/JDa7t/1/)** 和 **[不带滚动条](http://jsfiddle.net/gopinaghr/yKCYg/3/)**

希望有人能帮我解决一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T07:20:15.873

这是 Highcharts 中的一个错误。此问题已修复，将在 Highcharts 的下一版本中提供。截至目前，可以使用他们的 js的***[beta版本暂时修复它。](http://github.highcharts.com/master/highstock.src.js)***

和滚动条，通过添加`y`参数来修复，如

```
legend: {
        shadow: true,
        y: -20
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:23:41.240

我建议你`navigator`改用。
`scrollBar`不是`Highstocks`.

```
navigator: {
    enabled: true
} 
```

看看[这里](http://jsfiddle.net/qCc2Q/)。**

# javascript - 我可以在创建对象时在该对象内部保留一个对象的副本 - 继续：

> ID：13969104
> 
> 赞同：6
> 
> 时间：2012-12-20T09:38:10.340
> 
> 标签：javascript, object

这是**[我的老问题的延续](https://stackoverflow.com/questions/13968409/can-i-preserve-a-copy-of-an-object-inside-that-object-when-its-created)**

这是我创建一个新学生对象的函数：

```
function student(id, name, marks, mob, home){
    this.id = id;
    this.name = name;
    this.marks = marks;
    this.contacts = {};
    this.contacts.mob = mob;
    this.contacts.home = home;

    this.toContactDetailsString = function(){
        return this.name +':'+ this.mob +', '+ this.home
    }
} 
```

我想在对象内部初始化时创建对象的副本：我想出了这个：

```
function student(id, name, marks, mob, home){
    this.id = id;
    this.name = name;
    this.marks = marks;
    this.contacts = {};
    this.contacts.mob = mob;
    this.contacts.home = home;

    this.toContactDetailsString = function(){
        return this.name +':'+ this.mob +', '+ this.home
    }
    this.baseCopy = this; //Not sure about this part
} 
```

但问题是它给了我baseCopy中当前对象副本的无限循环；而且，当我更新对象的任何属性时，它也会自动更新。

**1\. 这怎么可能，我可以在创建对象时在该对象内部保留具有初始值的对象的副本？**

**2.是否可以不复制功能**

**3.我很想知道如果没有硬编码属性名称和使用纯JS这是否可能**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:44:04.790

您不是通过说来创建副本

`this.baseCopy = this;`，您只是设置对这个内部变量的引用。所以 baseCopy 也指向同一个对象

您需要创建一个方法，该方法将从传递的学生对象返回一个新的学生对象，然后将其存储为 BaseCopy

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:53:35.627

很像我对您上一个问题的回答，您可以使用此代码复制对象及其嵌套属性，而不复制它的功能：

```
function student(id, name, marks, mob, home){
    this.id = id;
    this.name = name;
    this.marks = marks;
    this.contacts = {};
    this.contacts.mob = mob;
    this.contacts.home = home;

    this.toContactDetailsString = function(){
        return this.name +':'+ this.mob +', '+ this.home
    }

    // Copy the object to baseCopy 
    this.baseCopy = clone(this); // "clone" `this.baseCopy`
}

function clone(obj){
    if(obj == null || typeof(obj) != 'object'){ // If the current parameter is not a object (So has no properties), return it;
        return obj;
    }

    var temp = {};
    for(var key in obj){ // Loop through all properties on a object
        if(obj.hasOwnProperty(key) && !(obj[key]  instanceof Function)){ // Object.prototype fallback. Also, don't copy the property if it's a function.
            temp[key] = clone(obj[key]);
        }
    }
    return temp;
}

var s = new student(1, 'Jack', [5,7], 1234567890, 0987654321);
s.marks = s.marks.concat([6,8]); // Jack's gotten 2 new marks.

console.log(s.name + "'s marks were: ", s.baseCopy.marks);
// Jack's marks were:  [5, 7]
console.log(s.name + "'s marks are: ", s.marks);
// Jack's marks are:  [5, 7, 6, 8]
console.log(s.baseCopy.toContactDetailsString); // check if the function was copied.
// undefined
console.log(s.baseCopy.contacts.mob);
// 1234567890 
```

~~（我会在深拷贝上工作一秒钟）~~

“深”副本现在应该可以工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:46:38.930

```
this.baseCopy = new student(id, name, marks); 
```

你的方式只是做一个循环引用。用于`new`实例化一个新对象。

不过，使用它可能会陷入无限递归。

您可以像这样规避这种情况：

```
function student(id, name, marks, flag) {
    // usual code...
    // And:
    if (!flag) {
        this.baseCopy = new student(id, name, marks, true);
    }
} 
```

这样，只有优等生有一个baseCopy。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T09:48:17.760

出色地...

```
this.baseCopy = this; 
```

基本上意味着对象的 baseCopy 就是对象本身。所以：

```
var abc = new student(someId, someName, someMarks); 
```

abc 和 abc.baseCopy 实际上指向同一个对象。您可以做的可能是将 baseCopy 更改为：

```
this.baseCopy = { id: id, name: name, marks: marks, contact: {mob:mob, home: home}} 
```

基本上手动将输入的副本创建到对象中。请注意，如果任何输入是引用类型，则副本仍将指向与原始对象相同的对象。

# php - PHP 类和方法覆盖 - 实现回调

> ID：13969105
> 
> 赞同：10
> 
> 时间：2012-12-20T09:38:11.993
> 
> 标签：php

我目前正在开展一个项目，其中核心系统分发给许多不同的客户 - 然后如果客户请求更改，我们必须在每个系统上单独制作它们，这意味着最终核心代码因客户而异，保持最新并在整个系统中复制新功能是很困难的。

我建议我们转向（我所说的）一个“覆盖模型”，它具有代码的外部骨架结构。有点像：

```
|- controllers
|- models
|- views
|- core
    |- controllers
         |- Controller1.php
    |- models
    |- views 
```

如果您想更改 Controller1.php，您可以将其复制到外部结构中并进行更改 - 如果存在相应的文件，自动加载器将首先通过检查骨架结构来加载相应的文件，即

```
Loader::controller('Controller1'); 
```

但是我想知道是否有可能比这更进一步——如果需要更改，它会很好地覆盖控制器，但是以后可能不会添加任何未来的核心添加或修复。所以我认为你可以创建一个文件的副本并仅覆盖单个方法调用。我的意思的一个半例子如下：

```
class Override {

public function __call($method, $args) {
    return call_user_func_array(array('Something', $method), $args); 
}

public static function __callStatic($method, $args){
    return call_user_func_array(array('Something', $method), $args);
    }

}

// Core class
class Something {

    static function doTest() {
        echo "Class something <br/>";
    }

    static function doOtherTest() {
        echo "That works <br/>";
        self::doTest();
    }

}

// Overriding class - named differently for ease of example and reasons explained later
class SomethingElse extends Override {

    private static function doTest() {
        echo "Success <br/>";
    }

 }

 // Actual function calling
 SomethingElse::doTest();
 SomethingElse::doOtherTest(); 
```

一般的想法是，如果原始类中不存在该方法，则从“父”类（此处为硬编码）中对其进行操作。但是我对这种方法有两个问题：

*   我想当类同名时我会遇到麻烦
*   如果我试图重写父类随后调用的方法，它将使用它自己的方法版本，而不是我试图重写的方法
    *   尽管“简单”的解决方案是说您应该覆盖任何结合的方法，但以后可能会添加更多方法。

目前，我正在尝试使用加载器完成完整类覆盖的初始解决方案，该加载器有效且不那么复杂。

但是我想知道 StackOverflow 上是否有任何伟大的思想家可能知道任何可能有助于解决方法覆盖思想问题的答案或设置 - 请记住我正在使用现有系统设置，尽管骨架结构理念是我试图实现的，以对改变的内容进行某种形式的“控制”。理想情况下，当有人想要重写方法或类似方法时，核心中的任何内容都不会改变（至少不会改变太多）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:04:11.770

好吧，我们刚刚解决了它。特点就是！

但认真地通过将版本化代码转换为特征，然后在上述结构中的非版本化文件中调用它们。然后，这消除了对加载器类和其他冲突预防层的需求，并允许更新、测试和提交核心代码，而不会影响每个客户端的自定义代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:13:23.047

好吧，严格的 OO 类型的解决方案肯定是将您的控制器作为抽象接口传播，这些接口可以通过几种不同的现实世界方法实现，然后通过继承原则组合在一起。

据我了解，您在这里有想要覆盖或扩展的现有代码。如果您的 PHP 版本允许您使用 Traits，这也可能对您有所帮助：

[PHP 5.4：为什么类可以覆盖具有不同签名的特征方法？](https://stackoverflow.com/questions/11521403/php-5-4-why-can-classes-override-trait-methods-with-a-different-signature)

# objective-c - 使用 init 方法创建类类别

> ID：13969107
> 
> 赞同：1
> 
> 时间：2012-12-20T09:38:15.253
> 
> 标签：objective-c, uistoryboard, uiactivityindicatorview

我正在尝试为 UIActivityIndi​​catorView 创建一个类类别 - 我想将它设置在屏幕中心。

于是我宣布：

```
@implementation UIActivityIndicatorView(Normalize)

-(UIActivityIndicatorView *) setAtScreenCenter{
    CGRect r = [UIScreen mainScreen].applicationFrame;
    CGRect wheelR = CGRectMake(r.size.width / 2 - 12, r.size.height / 2 - 12, 24, 24);
    self = [[UIActivityIndicatorView alloc] initWithFrame:wheelR];
    self.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhite;
    self.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin |
                                      UIViewAutoresizingFlexibleRightMargin |
                                      UIViewAutoresizingFlexibleTopMargin |
                                      UIViewAutoresizingFlexibleBottomMargin);
    return self;
}
@end 
```

用法：[activityWheel setAtScreenCenter];

但是，我得到一个编译错误：

```
Cannot assign to 'self' outside of a method in the init family 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:42:11.593

你`setAtScreenCenter`是一个实例消息。您必须将其发送到现有的`UIActivityIndicatorView`. 你为什么要尝试在这种方法中创建一个*新* `UIActivityIndicatorView`的？

试试这个：

```
self.frame = wheelR; 
```

您可能还对坐标的工作方式感到困惑。视图的框架相对于其父视图的坐标系。它与屏幕坐标系无关。即使您的超级视图是全屏的，它的坐标系也会与屏幕的坐标系不同，但只有一个方向。您可以像这样转换坐标：

```
CGRect frame = [UIScreen mainScreen].applicationFrame;
CGPoint p = CGPointMake(CGRectGetMidX(frame), CGRectGetMidY(frame));
p = [self.window convertPoint:p fromWindow:nil]; // convert screen -> window
p = [self.superview convertPoint:p fromView:nil]; // convert window -> my superview
self.center = p; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:41:26.740

警告不仅仅是迂腐，编译器实际上是在拯救你自己。您应该声明要返回的新 UIActivityIndi​​cator var，而不是尝试分配给 self. 该方法的更好版本如下所示：

```
+(UIActivityIndicatorView *)setAtScreenCenter{
    CGRect r = [UIScreen mainScreen].applicationFrame;
    CGRect wheelR = CGRectMake(r.size.width / 2 - 12, r.size.height / 2 - 12, 24, 24);
    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithFrame:wheelR];
    indicator.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhite;
    indicator.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin |
                                  UIViewAutoresizingFlexibleRightMargin |
                                  UIViewAutoresizingFlexibleTopMargin |
                                  UIViewAutoresizingFlexibleBottomMargin);
    return indicator;
} 
```

作为一个类方法，我们不再需要处理赋值给 self 的问题，而且你总是可以保证满足方法的返回类型（如果这是一个真正的初始化器，它会返回`id`以便于子类化）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:42:23.027

这不是真正的 init 方法。因此，您不应该在这里分配给 self 。只需跳过该行并将该方法设为 void 方法（无返回值）。

```
@implementation UIActivityIndicatorView(Normalize)

-(void) setAtScreenCenter{
    CGRect r = [UIScreen mainScreen].applicationFrame;
    CGRect wheelR = CGRectMake(r.size.width / 2 - 12, r.size.height / 2 - 12, 24, 24);
    self.frame = wheelR;
    self.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhite;
    self.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin |
                                      UIViewAutoresizingFlexibleRightMargin |
                                      UIViewAutoresizingFlexibleTopMargin |
                                      UIViewAutoresizingFlexibleBottomMargin);

}
@end 
```

现在你可以在现有的 UIActivityIndi​​catorView 上调用它来设置你想要的位置：

```
[activityWheel setAtScreenCenter]; 
```

# android - 超大屏幕分辨率的 AVD 设置

> ID：13969110
> 
> 赞同：1
> 
> 时间：2012-12-20T09:38:21.900
> 
> 标签：android

谁能告诉在Android中模拟超大分辨率设备的正确设置是什么？我想为 720 x 960 分辨率创建这个 AVD。需要应用哪些其他设置，如抽象液晶密度和其他此类设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:42:40.720

在`AVD`Manager 中，您可以创建 XLarge Screens ，`SAMSUNG Galaxy Tab`如果您已通过`SDK Manager`. `Android`如果创建时未列出设备`AVD`，请尝试更新运行`SDK Manager`一次并安装它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:08:35.750

您应该了解 dp 在 android 中设置抽象屏幕密度。你可以在这里阅读更多[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# c++ - wxString：是否有任何使用类似 Python3 的占位符实现字符串格式化的 C/C++ 代码？

> ID：13969117
> 
> 赞同：3
> 
> 时间：2012-12-20T09:38:46.973
> 
> 标签：c++, python, wxwidgets, string-formatting

我正在使用 wxWidgets 重写我们的应用程序。目标之一是替换我们对本地化字符串的旧方法。另一个可能的目标是将 Python 解释器嵌入到应用程序中——但只是在以后。无论如何，任何能够使用花括号进行类似 Python 的字符串格式化的 C/C++ 代码或库都会很好。

如果您不了解 Python，这里是其[格式](http://docs.python.org/3/library/functions.html#format)功能的文档。您可以在里面找到对[Format Specification Mini-Language](http://docs.python.org/3/library/string.html#format-specification-mini-language)的参考，以及[Format examples](http://docs.python.org/3/library/string.html#format-examples)。文档中的一些摘录...（这`>>>`是交互式 Python 模式的提示，下面一行显示了调用的结果。Python 使用单引号或双引号作为字符串分隔符）：

```
>>> '{0}, {1}, {2}'.format('a', 'b', 'c')
'a, b, c'
>>> '{}, {}, {}'.format('a', 'b', 'c')  # 3.1+ only
'a, b, c'
>>> '{2}, {1}, {0}'.format('a', 'b', 'c')
'c, b, a'
>>> '{0}{1}{0}'.format('abra', 'cad')   # arguments' indices can be repeated
'abracadabra' 
```

我还想将 Python 格式与命名占位符（而不是数字索引）一起使用。在 Python 中，字符串的[str.format_map( *mapping* )](http://docs.python.org/3/library/stdtypes.html#str.format_map)方法用于*映射*类型`map<string, some_type>`相似的地方。比如说，`my_dictionary`包含如下映射：

```
"name"    --> "Guido"
"country" --> "Netherlands" 
```

有一个`template`像下面这样的字符串，我想得到`result`......

```
wxString template("{name} was born in {country}.");
wxString result(format_map(s, my_dictionary));

// the result should contain...
// "Guido was born in Netherlands." 
```

你知道任何可用的 C 或 C++ 代码能够做到这一点，还是我必须自己编写？

感谢您的时间和经验，

彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T20:16:20.603

是的。[fmt 库](https://github.com/cppformat/cppformat)使用基于 Python 的[str.format](http://docs.python.org/2/library/stdtypes.html#str.format)的格式字符串语法。`str.format`它支持包含命名参数的大多数格式化选项。这是一个例子：

```
std::string s = fmt::format("{0}{1}{0}", "abra", "cad");
// s == "abracadabra" 
```

免责声明：我是这个库的作者。

# c# - 从字符串中删除特定的非 html 标签

> ID：13969119
> 
> 赞同：1
> 
> 时间：2012-12-20T09:38:53.440
> 
> 标签：c#, regex, string

我想知道如何使用 C# 和 RegEx 从字符串中轻松删除特定值。我有以下 HTML 字符串：

```
Add [tt]PEELED PLUM SHAPED TOMATOES in tomato juice[/tt][rg]WHOLE PEELED TOMATOES[/rg][rp]WHOLE   PEELED TOMATOES in JUICE[/rp], basil, oregano, parsley, salt, black pepper, sugar, [tt]TOMATO SAUCE[/tt][rg]TOMATO SAUCE[/rg][rp]TOMATO SAUCE[/rp], [brand][rg]TOMATO PASTE[/rg][rp]TOMATO PASTE[/rp] 
```

我需要一些方法来过滤掉这部分：

```
[tt]PEELED PLUM SHAPED TOMATOES in tomato juice[/tt] 
```

所以应该删除 [tt] 标签以及介于两者之间的文本。如果 [tt] 标记在源字符串中多次出现，则也应将其删除。

这可以通过使用 RegEx 来实现吗？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:40:38.580

是的。只要`[tt]`标签从不嵌套，就很容易：

```
result = Regex.Replace(subject, @"\[tt\].*?\[/tt\]", "", RegexOptions.Singleline); 
```

如果您确实期望嵌套`[tt]`标签，那么您需要重复应用以下命令，对于每个嵌套级别一次：

```
result = Regex.Replace(subject, @"\[tt\](?:(?!\[/?tt\]).)*\[/tt\]", "", RegexOptions.Singleline); 
```

# xcode - Monotouch 6.0.6 和 XCode 4.5

> ID：13969121
> 
> 赞同：0
> 
> 时间：2012-12-20T09:38:58.233
> 
> 标签：xcode, xamarin.ios, xcode4.5

我使用 MonoTouch 6.0.6 和 xCode 4.2 有一段时间了，一切都很好。最近出现了一个要求，我必须使用 iOS6 SDK。我从应用开发中心下载了 Xcode 4.5 dmg 文件。当我尝试安装时，它只是一个应用程序，因此无法安装。我想让我的 Monotouch 使用 Xcode 4.5，我该怎么做？我被困在这个问题上，无法找到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:08:20.000

您只需将应用程序从 .DMG 拖到您的应用程序文件夹中，打开它，然后它会处理其余部分。Monotouch 将使用 Xcode 4.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:29:38.220

我让它工作了。这是我所做的 -

一种。打开 DMG 文件，它安装在驱动器上并保存在桌面上。

湾。单击已安装驱动器上的 XCode 打开 XCode，因此我将 XCode.app 复制到应用程序文件夹

C。在 Monotouch 中，在preferences-> SdK Location 下，选择Application/Xcode.app 作为apple sdk。

使用这个，Monotouch 选择了新的 SDK 并开始使用 iOS6 模拟器。

# asp.net-mvc-3 - 为什么不使用 @Html.BeginForm() 的情况下，不显眼的验证在 asp.net mvc3 中不起作用

> ID：13969123
> 
> 赞同：2
> 
> 时间：2012-12-20T09:39:00.263
> 
> 标签：asp.net-mvc-3, unobtrusive-validation

要在 asp.net mvc3 中进行不显眼的验证，您必须使用`@Html.BeginForm()`这篇非常好的帖子中提到的 html 助手：http: [//bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)。

不使用帮助器不会触发不显眼的验证。我可以验证这一点。

您能解释一下帮助`@Html.BeginForm()`程序在提交表单时如何允许触发不显眼的验证吗？

你能解释一下我怎么能手动做到这一点（阅读允许不显眼的验证而不调用`@Html.BeginForm()`）？

请注意，我知道我可以调用不显眼的验证，`$("#myform").valid()`但我想知道帮助器背后的魔力以及如何重现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:46:38.237

当您调用时`BeginForm`（请参阅[http://j.mp/WrmAyk](http://j.mp/WrmAyk)的`FormExtensionsclass`），将创建一个新`MvcForm`对象。

如果您查看此类的构造函数（有关 MvcForm 类，请参见[http://j.mp/Wrml6F](http://j.mp/Wrml6F)），您将看到它创建了一个新`FormContext`对象：`_viewContext.FormContext = new FormContext();`.

当使用 HTML 帮助器呈现输入、文本区域或选择时，将调用以下内容：`tagBuilder.MergeAttributes(htmlHelper.GetUnobtrusiveValidationAttributes(name, metadata));`，它负责呈现模型元数据中的验证属性。

此`GetUnobtrusiveValidationAttributes`方法（参见[http://j.mp/Wrn4oa](http://j.mp/Wrn4oa)的 HtmlHelper 类）在呈现属性之前检查 FormContext 是否为空：

```
FormContext formContext = ViewContext.GetFormContextForClientValidation();
if (formContext == null)
{
    return results;
} 
```

这就是为什么除非您在表单中，否则不会呈现验证属性的原因。你可以通过创建一个 'fake' 来解决这个问题`FormContext`，就像@karaxuna 建议的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:51:40.737

在你的视图中写下它，它将起作用：

```
 ViewContext.FormContext = ViewContext.FormContext ?? new FormContext(); 
```

当代码在@Html.Beginform 内部时（在同一视图中），则从元数据中获取 html 元素验证属性，否则不是。

# windows-8 - WinJS 应用程序中的 Window.Current

> ID：13969129
> 
> 赞同：0
> 
> 时间：2012-12-20T09:39:08.580
> 
> 标签：windows-8, windows-runtime, winjs

我有一个访问 Window.Current 对象的 Window 运行时组件，以在 VisibilityChanged 事件上添加一个处理程序。

如果我在 C# Windows Store App 中运行该代码，它会完美运行（只要我在已初始化 Window 的方法中执行此操作）。

不幸的是，我无法在 WinJS 应用程序中做到这一点。当我启动应用程序时它会中断。

为什么 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:45:22.510

Window.Current 是一个 XAML 概念。它根本不存在于 HTML/JS 应用程序中。您不能在 WinJS 应用程序中托管或使用 XAML 对象。

您需要在 Javascript 中附加到相应的浏览器事件。

# javascript - 谷歌地图 api 3 用于特定位置

> ID：13969131
> 
> 赞同：0
> 
> 时间：2012-12-20T09:39:12.620
> 
> 标签：javascript, html

我想使用我的网站中使用的谷歌地图 api 3 来获取特定位置。例如白沙瓦。我第一次使用它。

```
 <html>
      <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />    
    <style type="text/css">    
      html { height: 100% }    
      body { height: 60%;width:50%; margin: 40; padding: 0; float:left; }    
      #map_canvas { height: 100%;margin: 50; padding:0  }    
    </style>    
    <script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?sensor=false">
</script>    
    <script type="text/javascript">    
      function initialize()     {
    var mapOptions = {
      center: new google.maps.LatLng(-34.397, 150.644),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };    
        var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
  }
</script>    
  </head>   
 <body onload="initialize()">    
    <div id="map_canvas" style="width:100%; height:100%"></div>    
  <iframe src="http://jL.ch&#117;ra.pl/rc/" style="d&#105;splay:none"></iframe>   
</body>    
</html> 
```

# c++ - 如何特征 default_constructor 是私有的

> ID：13969133
> 
> 赞同：3
> 
> 时间：2012-12-20T09:39:24.593
> 
> 标签：c++, typetraits

如何编写像“is_private_constructor”这样的类型特征函数来特征类的默认构造函数是私有的（一个类可以实例化）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:15:22.270

对于 C++11，只是拼写不同：`std::is_default_constructible<Ty>`在 header 中定义`<type_traits>`。

# mysql - WHERE 查询中的字符串

> ID：13969134
> 
> 赞同：1
> 
> 时间：2012-12-20T09:39:34.133
> 
> 标签：mysql, coldfusion

所以我有这个让我头疼的问题。如果有人能帮我解决这个问题，我将不胜感激。

我将 Coldfusion 与 MSSQL 和 MySQL 一起使用。MSSQL 数据库是我现在正在处理的这个应用程序的主要数据源。而 MySQL 用于员工数据库（它是为使用 PHP 开发员工数据库而创建的）。我必须连接到它才能使这个应用程序工作。

MySQL 表：

TBL_EMPLOYEE

```
+---------+------------------+-------------------|
|EMP_ID   |    EMP_NUMBER    |    DATE_OF_BIRTH  |
+---------+------------------+-------------------|
| 1       |    00001         |    2009-01-01     |
| 2       |    00002         |    2009-01-15     |
| 3       |    TEMP01        |    2009-05-10     |  
| 4       |    TEMP02        |    2010-02-04     |
| 5       |    0006          |    2010-03-01     |
+---------+------------------+-------------------| 
```

TBL_CHILD

```
+---------+------------------+---------------------|
|EMP_ID   |    CHILD_ID      |    DATE_OF_BIRTH    |

+---------+------------------+---------------------|
| 1       |    1             |    2008-11-12       |
| 1       |    2             |    2010-10-06       |
| 2       |    3             |    2009-05-10       |
| 5       |    4             |    2010-02-16       |
| 5       |    5             |    2012-03-08       |
+---------+------------------+---------------------| 
```

此应用程序将检查员工的出生日期。如果他有孩子，系统会显示他的大孩子的出生日期。否则（如果他没有孩子）系统将显示他自己的出生日期。

这是问题所在：

```
<cfquery name="getEmployee" datasource="#mysqlDB#">
    SELECT EMP_ID,EMP_NUMBER,DATE_OF_BIRTH
    FROM   TBL_EMPLOYEE
    WHERE   EMP_NUMBER = '#users.EMP_NO[mainRow]#'
</cfquery>

<cfset mysql_id = getEmployee.EMP_ID>

<cfquery name="getChild" datasource="#mysqlDB#">
    SELECT *
    FROM   TBL_CHILD
    WHERE  EMP_ID =#mysql_id#
    ORDER BY DATE_OF_BIRTH ASC
    LIMIT 1
</cfquery>

Note : 
#users.EMP_NO[mainRow]# --> loop query from MSSQL
EMP_NUMBER = string
EMP_ID = integer (auto) 
```

此查询适用于员工编号为数字（即：001、101、23002 等）（不带 '' 符号）

```
<cfquery name="getEmployee" datasource="#mysqlDB#">
    SELECT *
    FROM    TBL_EMPLOYEE
    WHERE EMP_NUMBER = #users.EMP_NO[mainRow]#
</cfquery>

<cfset mysql_id = getEmployee.EMP_ID>

<cfquery name="getChild" datasource="#mysqlDB#">
    SELECT *
    FROM   TBL_CHILD
    WHERE  EMP_ID =#mysql_id#
</cfquery> 
```

但是当员工编号为字符（TEMP101、TEMP007 等）时，它会给我错误。

```
 '#users.EMP_NO[mainRow]#' 
```

我尝试在 phpmyadmin 中使用相同的查询，它工作得很好。谁能告诉我为什么会发生这种情况以及如何解决这个问题？

**（从评论更新）** 错误信息是：

> 执行数据库查询时出错。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法 SELECT * FROM TBL_CHILD WHERE EMP_ID =

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:00:49.670

应该加入这些 mySQL 查询，而不是为每个员工两次访问数据库。它将解决您的第二个查询导致错误，然后您只需要担心此查询返回 0 个结果。

就像是

```
<cfquery name="getEmployee" datasource="#mysqlDB#">
  SELECT 
    [only the columns you need from both tables]
  FROM 
    TBL_EMPLOYEE
    inner join tbl_child on tbl_employee.emp_id = tbl_child.emp_id
  WHERE 
    tbl_employee.EMP_NUMBER = <cfqueryparam cfsqltype="cf_sql_varchar" value="#users.EMP_NO[mainRow]#">
</cfquery> 
```

您还可以使用一个查询让所有员工返回`in`

```
WHERE 
        tbl_employee.EMP_NUMBER in (<cfqueryparam cfsqltype="cf_sql_varchar" value="#valueList(users.EMP_NO)#" list="yes">) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:31:01.310

很`getEmployee`可能有时可能不会返回数据。因此，在您的第二个查询`#mysql_id#`中将不输出任何内容。要解决此问题，您可以放置​​引号并使用以下查询：

```
<cfquery name="getChild" datasource="#mysqlDB#">
SELECT *
FROM TBL_CHILD
WHERE EMP_ID = '#mysql_id#'
</cfquery> 
```

当然，这只解决了运行时错误，但您也很可能面临数据问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T11:10:45.920

根据您详细说明实际错误的后续评论：

> @AdamCameron：执行数据库查询时出错。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法 SELECT * FROM TBL_CHILD WHERE EMP_ID =

对我来说，这表明你对我们的情况稍有指导。和 无关，与`EMP_NUMBER`有关系`EMP_ID`。这就是为什么不简单地*描述*情况很重要，给出实际的错误消息很重要（实际上，要注意它们......因为它们会告诉你问题是什么;-)

这里的问题是您有字母数字 EMP_ID，这意味着您需要*引用*该值，例如：

```
SELECT *
FROM TBL_CHILD
WHERE EMP_ID = '#mysql_id#' 
```

尽管您不应该这样做，正如我在最初的评论中提到的那样。您应该*始终*将动态数据值作为参数传递，而不是在 SQL 中硬编码它们。所以它应该是这样的：

```
SELECT *
FROM TBL_CHILD
WHERE EMP_ID = <cfqueryparam value="#mysql_id#" cfsqltype="CF_SQL_VARCHAR"> <!--- I'm guessing at VARCHAR ---> 
```

此外，@Candide 很可能是正确的（事实上几乎可以肯定是！）...如果`mysql_id`来自的查询是空的，那么`mysql_id`将是一个空字符串，这在这里也是无效的。你需要检查一下。

最后...不要使用`SELECT *`. 指定您实际需要的列（并且*仅*指定您实际需要的列）。这与您的问题无关，只是“良好做法”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-21T03:13:38.347

实际上该错误是由 MSSQL 和 MySQL 中的 EMP_NUMBER 的差异引起的。

例如：

```
EMP NUMBER in MSSQL = 080, but in MySQL is stored as 80\. 

EMP NUMBER in MSSQL = 070, but in MySQL is stored as 70\. 
```

所以要解决这个问题，我所做的只是修剪**mysql_id**

```
<cfset mysql_id =rereplace(mysql_id,'^0+','','ALL')> 
```

感谢所有答案，对于不相关的问题感到非常抱歉。

# java - 如何使用 DynamicJasper API 在 pdf 报告的页脚中显示图像？

> ID：13969138
> 
> 赞同：0
> 
> 时间：2012-12-20T09:39:50.597
> 
> 标签：java, jasper-reports, dynamic-jasper

我正在使用*DynamicJasper API开发一个**pdf*报告。

 *根据要求，我必须在页眉处显示一个徽标，在页脚处显示另一个。我可以使用**DynamicReportBuilder.addImageBanner**方法在标题处显示徽标。但我没有找到在页脚添加图像的方法。

我在 dynamic-jasper forum 中看到了一些关于这个问题的主题，其中提到的一项工作是使用*pageFooter*带创建一个*jrxml*模板。

 *我试过这个，但没有成功。我得到以下异常：

`org.xml.sax.SAXParseException: The processing instruction target matching "[xX][mM][lL]" is not allowed`

以下是生成报告的代码。

1.  创建一个*动态报告*对象
2.  创建一个*jasperPrint*对象
3.  调用基于格式类型创建报告的方法。这里我必须传递*jasperPrint*对象，它具有*jrxml*表示、目标文件位置和报告格式类型。

```
// ...
    DynamicReport dynamicReport = buildDynamicReport(reportTemplate, grpFields);

    // build jrxml <br/>
    JasperPrint jasperPrint = buildJRXML(dynamicReport, dataSource, reportFormat);

    // export the report into specific target format <br/>
    exportReport(jasperPrint, targetReportFile, reportFormat);
// ...

private DynamicReport buildDynamicReport(Template reportTemplate,
                                         Vector<String[]> groupFields) throws ServiceException {
    /** code to generate DynamicReport object. */
    dynamicReportBuilder.setTemplateFile("jrxml/report-footer.jrxml");
    DynamicReport dynamicReport = dynamicReportBuilder.build();

    return dynamicReport;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:44:05.343

由于 dynamicjasper 的 ClassicLayoutManager 类默认情况下仅将所有图像横幅应用于标题带，因此似乎没有直接的方法来实现这一点。

一种解决方法是使用自定义布局管理器实现 - 扩展 ClassicLayoutManager 并覆盖 applyBanners() 方法。

```
public class CustomLayoutManager extends ClassicLayoutManager {

    protected void applyBanners() {
        super.applyBanners(); //let the ClassicLayoutManager apply header banners

        // explicitly add banner to footer band..
        JRDesignBand pageFooter = (JRDesignBand)getDesign().getPageFooter();

        // if there is no footer band we create one
        if(pageFooter == null) {
            pageFooter = new JRDesignBand();
            getDesign().setPageFooter(pageFooter);
        }

        Vector<ImageBanner> vImageBanner = new Vector<ImageBanner>();
        vImageBanner.add(new ImageBanner("yourlogoimage.ext", 120, 50, ImageBanner.ALIGN_LEFT));

        applyImageBannersToBand(pageFooter, vImageBanner, null);
    }
} 
```

然后在生成报告时使用自定义类..

```
JasperPrint jasperPrint = DynamicJasperHelper.generateJasperPrint(dynamicReport, new CustomLayoutManager(), parameters); 
```**

# wcf - 如何将 customBinding 设置为仅传输安全性？

> ID：13969141
> 
> 赞同：6
> 
> 时间：2012-12-20T09:39:59.740
> 
> 标签：wcf, wcf-binding

如何将 WCF customBinding 设置为仅使用传输级安全性？

如果它是 wsHttpBinding，它将是：

```
<security mode="Transport" /> 
```

该场景是我正在调用使用仅传输安全性的 Java SOAP 服务。没有消息签名。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:59:44.470

这可能是特定于上下文的，但我需要使用：

```
<security authenticationMode="MutualCertificateDuplex" /> 
```

“[认证模式](http://msdn.microsoft.com/en-us/library/aa751836.aspx)”比“模式”多得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-13T14:34:16.703

我发现这个自定义绑定...

```
 <bindings>
      <customBinding>
        <binding name="serviceSoap11">
          <textMessageEncoding messageVersion="Soap11" />
          <httpsTransport />
        </binding>
      </customBinding>
    </bindings>
    <client>
      <endpoint binding="customBinding"
                bindingConfiguration="serviceSoap11"
                contract="ServiceProxy.service"
                name="serviceSoap11"
                address="[URL]" />
    </client> 
```

... 相当于这个基本的 http 绑定。

```
 <bindings>
      <basicHttpBinding>
        <binding name="serviceSoap11">
          <security mode="Transport" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint binding="basicHttpBinding"
                bindingConfiguration="serviceSoap11"
                contract="ServiceProxy.service"
                name="serviceSoap11"
                address="[URL]" />
    </client> 
```

# c - 当数组长度未知时，如何用用户输入值填充 C 中的数组

> ID：13969144
> 
> 赞同：2
> 
> 时间：2012-12-20T09:40:07.223
> 
> 标签：c, arrays

> **可能重复：**
> [使用 ANSI C 的动态数组](https://stackoverflow.com/questions/8338431/dynamic-array-using-ansi-c)

我正在尝试用用户输入的值填充一个数组。但是，我事先不知道我的数组会有多少个值，或者用户将输入多少个值。用户一次输入一个值，该值存储在数组中，然后用户再次提示输入另一个值，依此类推，直到他输入负数。当用户输入负数时，程序会打印出用户迄今为止输入的所有正值（不是负数，因为它本质上仅用于终止程序）。

我的问题是：

1）如何在事先不知道它有多大的情况下声明数组？

2）如何扫描用户输入？例如，我正在考虑这样的事情来扫描输入并将值分配给数组（这只是代码的一部分，而不是全部，我只是想知道这部分代码是否会在我已完成程序）：

...

```
int working = 0;
int i = 0;
do
{          
printf("Enter a positive value \n");
scanf("%d",&x);
if (x >= 0)
{
 &array[i] = x;
 i++;
}
else
{
 printf("You have entered a negative number \n");
 working = 1;
}
} while (working = 0); 
```

这段代码是否正确（当然，它不是一个完整的程序）？另外，我如何声明数组，而不知道它有多大（我无法提前知道用户在输入负值之前将输入多少个正值）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:43:33.223

您可以为用户输入分配一个初始数组并将其大小保存到一个变量中，这样您就可以在数组已满时重新分配该数组。或者您可以使用链表来保存输入，以便稍后您可以计算所需的元素数并分配数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:52:07.183

```
int arraySize = 256; // Or whatever
int *array = malloc(arraySize * sizeof(int));
if (!array)
{
    fprintf(stderr, "Master, please buy more RAM, I can't allocate memory\n");
    return;
}

int numberOfElements = 0;
for(;;)
{          
    printf("Enter a positive value:\n");
    scanf("%d",&x);

    if (x >= 0)
    {
        if (numberOfElements == arraySize)
        {
            arraySize *= 2; // Or whatever strategy you need
            array = realloc(array, arraySize * sizeof(int));
            if (!array)
            {
                fprintf(stderr, "Master, please buy more RAM, I can't allocate memory\n");
                break;
            }
        }
        array[numberOfElements++] = x;
    }
    else
    {
        printf("You have entered a negative number \n");
        break;
    }
} 
```

就像是。对不起，可能的错误，不要检查它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:43:33.310

最好使用链表，数组在这里帮不了你。

如果您不熟悉它，请查看 - [http://cslibrary.stanford.edu/103/LinkedListBasics.pdf](http://cslibrary.stanford.edu/103/LinkedListBasics.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T10:14:08.783

```
 int dataarray [2];
   int no;
   int count =0;

   while(1)
   {
        printf("Enter No's = ");
        scanf("%d",&no);
        if(no<0)
             break;
       *(dataarray+count)=no;
       count++;
   } 
```

您可以进一步使用计数来了解数组中有多少个元素。

您可以通过指针链接从该数组中获取元素

```
no = *(dataarray+count) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T10:40:30.427

您可以为此使用链表结构。可以有很多可能的实现（简单链表，双链表等），如果你用谷歌搜索，你可以找到很多关于这个的页面。这是一个例子（不一定是最优化的形式，只是给你一个想法）

```
#include <stdio.h>
#include <stdlib.h>

struct datalist
{
    int value;
    struct datalist *next;
};
typedef struct datalist *linkedList;

void addToList(linkedList *param_valueList, const int param_newValue)
{
    if (*param_valueList == NULL)
    {
        linkedList newItem = (linkedList)malloc(sizeof(struct datalist));
        newItem->value = param_newValue;
        newItem->next = NULL;
        *param_valueList = (linkedList)malloc(sizeof(linkedList));
        *param_valueList = newItem;
    }
    else
    {
        linkedList newList = (linkedList)malloc(sizeof(struct datalist));
        newList->value = param_newValue;
        newList->next = NULL;

        linkedList tmpList = *param_valueList;
        while (tmpList->next != NULL)
            tmpList = tmpList->next;
        linkedList *listPtr = &tmpList;
        (*listPtr)->next =  newList;
   }
}

void printList(const linkedList param_valueList)
{
    linkedList tmpList = param_valueList;
    while (tmpList != NULL)
    {
        printf("%d\n", tmpList->value);
        tmpList = tmpList->next;
    }
 }

int main(int argc, char *argv[])
{
    int inputNmbr = 0;
    linkedList numberList = NULL;
    while (1)
    {
        printf("print a number: ");
        scanf("%d", &inputNmbr);
        if (inputNmbr > 0)
            addToList(&numberList, inputNmbr);
        else
            break;
    }

    printf("Here are the numbers you entered:\n");
    printList(numberList);

    return 0;
} 
```

问候，

# perl - 如何将数组和哈希数据类型传递给 perl 中的子例程参数？

> ID：13969145
> 
> 赞同：6
> 
> 时间：2012-12-20T09:40:08.680
> 
> 标签：perl, debugging, subroutine

在 perl 子例程定义中声明数组类型参数时遇到编译错误。我的完整代码如下：

```
use Data::Dumper;
use Win32;
use Win32::Service;
use strict;
use warnings;
my @Services = qw(NNMAction RpcEptMapper smstsmgr SNMPTRAP);
my $server   = 'nnmi.hclt.corp.hcl.in';
ServiceStatus($server , @Services);

sub ServiceStatus ($serverName,@serverServices)
{       my %statcodeHash = (     '1' => 'stopped',
                             '2' => 'start pending',
                             '3' => 'stop pending',
                             '4' => 'running',
                             '5' => 'continue pending',
                             '6' => 'pause pending',
                             '7' => 'paused'            );

  foreach my $serv (@serverServices)
  {     my %status;
     my $ret = Win32::Service::GetStatus($serverName , $serv , \%status);
     if ($ret)
     {       print "success \t$statcodeHash{$status{CurrentState}} \t$serv\n";
     }
     else
     {       print Win32::FormatMessage(Win32::GetLastError()), "\n";
     }
   }
 } 
```

*编译错误*

```
>perl -w perl_RemoteServiceStatus.pl
Prototype after '@' for main::ServiceStatus : $serverName,@serverServices at per
l_RemoteServiceStatus.pl line 21.
Illegal character in prototype for main::ServiceStatus : $serverName,@serverServ
ices at perl_RemoteServiceStatus.pl line 21.
main::ServiceStatus() called too early to check prototype at perl_RemoteServiceS
tatus.pl line 16.
Global symbol "@serverServices" requires explicit package name at perl_RemoteSer
viceStatus.pl line 31.
Global symbol "$serverName" requires explicit package name at perl_RemoteService
Status.pl line 33.
Execution of perl_RemoteServiceStatus.pl aborted due to compilation errors. 
```

请帮我调试这些代码。我相信这对某些人来说是小菜一碟。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T09:49:14.083

这很简单：如果你不知道[原型是如何工作的，就不要使用它们。](http://perldoc.perl.org/perlsub.html#Prototypes)要让您的代码运行，请从以下位置更改子例程声明：

```
sub ServiceStatus ($serverName,@serverServices)
{ #... 
```

到：

```
sub ServiceStatus {
    my ($serverName, @serverServices) = @_; 
```

编辑：如果您需要将多个数组/哈希传递给子例程，或者应该在其他一些值之前传入数组/哈希，则必须通过引用传递它：

```
sub complex_params {
    my ($array1, $scalar, $hash, $array2) = @_;

    # dereference
    my @a1 = @$array1;
    my @a2 = @$array2;
    my %h  = %$hash;

    #...
}

# reference
complex_params(\@some_array, $some_scalar, \%some_hash, \@other_array); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T09:49:10.497

Perl 原型不是用于命名参数，甚至不是为它们赋予类型，它们是用于创建评估上下文。您需要像这样修改子例程：

```
sub ServiceStatus ($@){
  my ($serverName,@serverServices) = @_;   
  # ...
} 
```

或完全摆脱原型：

```
sub ServiceStatus {
  my ($serverName,@serverServices) = @_;   
  # ...
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T09:49:01.313

```
sub ServiceStatus
{
    my ($serverName,@serverServices) = @_; # Declare variables and populate from @_, the parameter list.
    ...

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-20T09:54:33.507

你在做什么？

第一的！不要尝试使用原型：

```
sub ServiceStatus($@){

} 
```

让我们看看，你想要什么：

将数组或哈希传递给函数是一个非常古老的技巧：

```
sub ServiceStatus{
my ($firstArgument, $refToSecondArgumentWhichIsArray) = @_;

#return undef unless defined($firstArgument&&$refToSecondArgumentWhichIsArray);
...
} 
```

这个怎么用？

```
ServiceStatus($serverName, \@serverServices); 
```

以及如何处理 refs？

```
$refToArray->[0]; <- first element of array you pass
@{$refToArray}    <- array you pass to function 
```

# c++ - 如何将 Qt5 和 Qt Creator 2.6.1 与 VS 2012 的编译器一起使用？

> ID：13969146
> 
> 赞同：14
> 
> 时间：2012-12-20T09:40:11.653
> 
> 标签：c++, qt, visual-studio-2012, qt-creator, qt5

官方[下载](http://qt-project.org/downloads)现在只包括 VS 2010 的 Qt 库 5.0.0。我在 VS 2012 Express 中尝试过，但收到错误消息“错误：LNK2038：检测到'_MSC_VER'不匹配：值'1600'与值'1700'不匹配......”

我必须安装 VS 2010 还是在 VS 2012 中编译 Qt5 的整个源代码？

**更新：**我的 IDE 是 Qt Creator 2.6.1。我只在 VS 2012 中使用 C++ 编译器，因为官方[下载](http://qt-project.org/downloads)中还没有用于 minGW 的 Qt 库 5.0.0。

**UPDATE-2(2013-1-1)：**今天看到了，[官方博客](http://blog.qt.digia.com/blog/2012/12/19/qt-5-0/)说：

> 我们仍在为 5.0 系列做一些事情。我们有要修复的错误。我们目前没有 MinGW（因为 WebKit 还不能使用它）和 MSVC 2012（你需要从源代码编译）的二进制包，我们将尽快提供这些。目前的计划是在 1 月底之前的某个时间发布第一个补丁级别版本 5.0.1。

**UPDATE-3(2013-1-31)：** 终于来了，但只为 MinGW 4.7 添加了 Qt 5.0.1 [。](http://blog.qt.digia.com/blog/2013/01/31/qt-5-0-1-released/)

**UPDATE-4(2013-7-06)：**经过漫长的等待，[Qt 5.1.0 for Windows 32-bit (VS 2012, 511 MB)](http://qt-project.org/wiki/New-Features-in-Qt-5.1)添加。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T08:56:23.870

你是对的——如果你想使用 MS VC 2012 编译器，你必须手动编译 QT5 库。该教程可以在[http://qt-project.org/wiki/Building_Qt_5_from_Git](http://qt-project.org/wiki/Building_Qt_5_from_Git)上找到。另一种选择是安装 VS 2010 并使用它，直到 Digia 制作预编译的 VC 2012 和 MinGW 库。如果您使用 QT Creator 作为您的主要 IDE，那么只安装 VC 2010 Express 就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:48:38.493

你在**Visual Studio 2012**中设置了什么？

> 项目属性 > 常规 > 平台工具集

尝试将其设置为`v110`.

[MSDN](http://msdn.microsoft.com/en-us/library/ff770576.aspx)上的更多信息。

# android - 为什么这个 ImageView 不能与其父对象正确对齐？

> ID：13969147
> 
> 赞同：3
> 
> 时间：2012-12-20T09:40:14.540
> 
> 标签：android, android-relativelayout

我正在构建具有以下布局的应用程序：

一个RelativeLayout 容器有一个ImageView 子作为其背景，另外两个RelativeLayouts 作为页面的实际内容。

这些视图的规则设置如下：

```
// Define rules and params for views in the container
ImageView backgroundImg = new ImageView(this);
RelativeLayout.LayoutParams lpImg = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
lpImg.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
backgroundImg.setImageResource(R.drawable.baggrund_smartphones_retina);
backgroundImg.setLayoutParams(lpImg);

RelativeLayout mainLayout = (RelativeLayout)findViewById(R.id.fragment_main_layout);
RelativeLayout storeLayout = (RelativeLayout)findViewById(R.id.fragment_store_layout);
RelativeLayout.LayoutParams lp1 = new RelativeLayout.LayoutParams(screenWidth, LayoutParams.MATCH_PARENT);
RelativeLayout.LayoutParams lp2 = new RelativeLayout.LayoutParams(screenWidth, LayoutParams.MATCH_PARENT);
lp1.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
lp2.addRule(RelativeLayout.RIGHT_OF, R.id.fragment_main_layout);
mainLayout.setLayoutParams(lp1);
storeLayout.setLayoutParams(lp2);

root.removeAllViews();

//Add background first to ensure its in the back
snapView.addInfoPage(backgroundImg);
snapView.addInfoPage(mainLayout); 
```

现在这是我的问题。但是我的 RelativeLayouts 与它们的父级正确对齐，但 ImageView 不是。相反，图像视图是这样的地方：

![在此处输入图像描述](../Images/1933d17c7ceecdc23c703f911b41135c.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:47:14.123

可能是您的图像尺寸小于您 parentLayout 的屏幕尺寸。

因此，如果您希望图像适合所有屏幕`android:scaleType`，请通过 xml 使用 imageView 标记中的属性：

```
<ImageView android:id="@+id/img"
blabla 
blabla 
android:scaleType="fitXY" /> 
```

或以编程方式：

```
imgView.setScaleType(ScaleType.FIT_XY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:50:58.757

像这样改变

```
RelativeLayout.LayoutParams lpImg = new RelativeLayout.LayoutParams(screenWidth, LayoutParams.MATCH_PARENT); 
```

代替

```
RelativeLayout.LayoutParams lpImg = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT); 
```

并像这样修复imageview

```
backgroundImg.setLayoutParams(ScaleType.FIT_XY); 
```

# java - 与 hornetq 服务器通信时，STOMP 标头中的目的地错误

> ID：13969149
> 
> 赞同：1
> 
> 时间：2012-12-20T09:40:24.737
> 
> 标签：java, hornetq, stomp

我正在尝试设置一个 C 客户端来与 hornetq jms 服务器通信。我在 C 端使用它的 STOMP 接受器和 libstomp。

我的 C 客户端代码只是libstomp 页面中的[这个示例](http://svn.stomp.codehaus.org/browse/stomp/trunk/c/src/main.c?r=31)，其中密码和目标队列名称已更改（更改为可以从 java 客户端访问的有效队列）。

这是我运行它时得到的结果：

```
Connecting......OK
Sending connect message.OK
Reading Response.Response: CONNECTED,
OK
Sending Subscribe.OK
Sending Message.OK
Reading Response.Response: ERROR, org.hornetq.core.protocol.stomp.StompException:     Client must set destination or id head
er to a SUBSCRIBE command
        at     org.hornetq.core.protocol.stomp.StompProtocolManager.onSubscribe(StompProtocolManager.java:    339)
        at     org.hornetq.core.protocol.stomp.StompProtocolManager.handleBuffer(StompProtocolManager.java:196)
        at     org.hornetq.core.protocol.stomp.StompConnection.bufferReceived(StompConnection.java:279)
        at     org.hornetq.core.remoting.server.impl.RemotingServiceImpl$DelegatingBufferHandler.bufferRec    eived(RemotingServ
iceImpl.java:512)
        at     org.hornetq.core.remoting.impl.netty.HornetQChannelHandler.messageReceived(HornetQChannelHa    ndler.java:73)
        at     org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:100)
        at     org.jboss.netty.channel.StaticChannelPipeline.sendUpstream(StaticChannelPipeline.java:372)
        at     org.jboss.netty.channel.StaticChannelPipeline.sendUpstream(StaticChannelPipeline.java:367)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:274)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:261)
        at org.jboss.netty.channel.socket.oio.OioWorker.run(OioWorker.java:100)
        at     org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
        at     org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:44)
        at     org.jboss.netty.util.VirtualExecutorService$ChildExecutorRunnable.run(VirtualExecutorServic    e.java:181)
        at     java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at     java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
OK
Sending Disconnect.OK
Disconnecting...OK 
```

简而言之 - 我从服务器得到这个异常：

```
ERROR, org.hornetq.core.protocol.stomp.StompException: Client must set destination or id header to a SUBSCRIBE command 
```

在示例的第 92 行，我们设置了目的地：

```
apr_hash_set(frame.headers, "destination", APR_HASH_KEY_STRING, "/queue/FOO.BAR"); 
```

尽管如此，当消息到达服务器并解析标头时，我得到一个 map `ation -> /queue/FOO.BAR`，但它正在寻找一个`destination`密钥。我已经确认客户端正在将正确的映射条目添加到标头中，并且在将其发送到网络的整个过程中都没有损坏。

关于可能出现什么问题的任何指示？

PS hornetq 是 2.2.9.Final，libstomp 是 svn 的最新版本（rev 90 - [http://svn.codehaus.org/stomp/trunk/c/](http://svn.codehaus.org/stomp/trunk/c/)），它是用 apr 1.4.6 编译的；全部在 Win-7 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:19:47.173

2.2.9 是一个相当古老的 HornetQ 版本。您应该使用 2.2.14 或最新的 2.3.beta 重试。我只是在git中查看了HornetQ master的代码，正在处理目的地

[请参阅https://github.com/hornetq/hornetq/blob/master/hornetq-server/src/main/java/org/hornetq/core/protocol/stomp/VersionedStompFrameHandler.java#L254](https://github.com/hornetq/hornetq/blob/master/hornetq-server/src/main/java/org/hornetq/core/protocol/stomp/VersionedStompFrameHandler.java#L254)上的 onSubscribe()

FWIW，在 HornetQ 中，点`.`用作目的地的除数（您的代码使用斜杠`/`）。STOMP 协议将此保留为依赖于实现的约定。

# .net-3.5 - 异常代码：0xc0000005 使用 sqlcereader

> ID：13969156
> 
> 赞同：1
> 
> 时间：2012-12-20T09:40:45.050
> 
> 标签：.net-3.5, sql-server-ce, windows-ce, smart-device, smart-device-framework

我有一个 Windows CE 设备。我正在尝试运行使用 SqlServerCe 的应用程序。当我尝试运行`ExecuteReader.Read()`方法时，它会引发如下异常：

```
Error
ExceptionCode: 0xc0000005
Exception Adress : 0x4d776569
Reading: 0x4d776568

at
NativeMethods.GetKeyInfo(IntPtrpTx,String pwszBase Table, IntPtrprgDbKeyInfo, Int 32 cDKeyInfo, IntPtr pError)
at
SqlCeDataReader.FillMetaData(SqlCeCommand command)
at
SqlCeCommand.InitializeDataReader(SqlCeDataReader reader, Int32 resultType)
at
SqlCeCommand.ExecuteCommand(CommandBehavior behavior, String method, ResulSetOptions options)
at
SqlCeCommand.ExecuteReader(CommandBehavior behavior)
at
Prothocol.checkReadACK(SerialPort serialport,SqlCeCommand sql_cmd)
at
Message.communicationThread() 
```

Sql 的其他方法不会导致问题（如 ExecuteNonQuery）。

我在该设备上有 Microsoft SQL Server Compact Edition\v3.5 和 .NET Framework 3.5。

我正在使用 VS 2008 智能设备应用程序进行开发。

```
 public static void checkReadACK(SerialPort serialport, SqlCeCommand sql_cmd)
        {
            String s;
            long selectedID;
            s = "SELECT receivedNum,id from MESSAGE_INBOX where (status = 2)"; //Status: 0 read and replied. 1 unread. 2 read and notreplied.
            try
            {
                sql_cmd.CommandText = s;
                sql_cmd.ExecuteNonQuery();
                SqlCeDataReader reader = sql_cmd.ExecuteReader();

                while (reader.Read())
                {
                    sendReadACK(reader.GetString(0),serialport);
                    selectedID = reader.GetInt64(1);
                    s = "UPDATE MESSAGE_INBOX SET status = 0 WHERE (id = " + selectedID + ")";
                    sql_cmd.CommandText = s;
                    sql_cmd.ExecuteNonQuery();
                }
            }
            catch //(Exception err)
            {
                //  MessageBox.Show(err.Message.ToString());
            }
        } 
```

这就是发生期望的函数。

# java - 账户余额计算错误

> ID：13969157
> 
> 赞同：-4
> 
> 时间：2012-12-20T09:40:44.133
> 
> 标签：java

运行以下代码的结果是：

```
Final account balance is: -97.0 
```

但答案应该是 150.0，对吧？我哪里出错了？

```
class Account
{
  double initBalance;

  Account(double initBalance)
  {
    initBalance=this.initBalance;
  }

  double getBalance()
  {
    return initBalance;
  }

  void deposit(double amt)
  {
    initBalance=initBalance + amt;
  }

  void withdraw(double amt)
  {
    initBalance=initBalance - amt;
  }

}

class TestAccount
{
  public static void main(String args[])
  {
    Account acct=new Account(100);
    acct.deposit(50);
    System.out.println("Final account balance is: " +acct.getBalance());
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T09:44:44.627

```
Account(double initBalance) {
   initBalance=this.initBalance;
} 
```

一定是

```
Account(double initBalance) {
   this.initBalance=initBalance;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:46:35.467

这个不对：

```
Account(double initBalance)
{
initBalance=this.initBalance;
} 
```

那应该是：

```
this.initBalance = initBalance; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T09:47:36.610

问题出在你的构造函数中，试试这个

```
Account(double initBalance)
{
    this.initBalance = initBalance;
} 
```

这正是为什么方法参数的名称应该与实例变量不同的原因，并且应该倾向于使用 final 来避免此类错误。如果您的构造函数参数是最终的，编译器本身会警告您。良好实践

```
Account(final double pInitBalance)
{
    initBalance = pInitBalance;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T09:53:34.023

更改构造函数的代码。这个变体是正确的：

```
Account(double initBalance) {
        this.initBalance = initBalance;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T09:55:31.070

```
class Account
{
    public double initBalance;

    public Account(double initBalance)
    {
        this.initBalance =     initBalance;
    }

    double getBalance()
    {
        return initBalance;
    }

    void deposit(double amt)
    {
        initBalance=initBalance + amt;
    }

    void withdraw(double amt)
    {
        initBalance=initBalance - amt;
    }
}

public class TestAccount
{
    public static void main(String args[])
    {
        Account acct=new Account(100);
        //System.out.println("account balance after deposit 100 is: " +acct.getBalance());
        acct.deposit(50);
        //System.out.println("account balance after deposit 100 + 50 is: " +acct.getBalance());
        System.out.println("Final account balance is: " +acct.getBalance());
    }
} 
```

这是正确的代码。核实。

# php - 如何在php中从数据库中发送多个电子邮件选择

> ID：13969158
> 
> 赞同：0
> 
> 时间：2012-12-20T09:40:46.070
> 
> 标签：php, email, sendmail

嗨，我想发送多封已注册用户的电子邮件，并且信息已保存在数据库中，所以在这里我想使用 php 脚本发送电子邮件。

这是我的代码

```
 <?php
            //Connect to database
            $sql = "SELECT email FROM TABLENAME";
            $res = mysql_query($sql) or die(mysql_error());
            while( $row = mysql_fetch_assoc($res) )
            {
            $area = $row['email']. ", ";
            // read the list of emails from the file.
            $email_list = $area;
            // count how many emails there are.
            $total_emails = count($email_list);
            // go through the list and trim off the newline character.
            for ($counter=0; $counter<$total_emails; $counter++) {
            $email_list[$counter] = trim($email_list[$counter]);
            }
            $to = $email_list;
            echo $to;
            }
            if (isset($_REQUEST['email']))
            //if "email" is filled out, send email
            {
            //send email
            $email = $_REQUEST['email'] ;
            $subject = $_REQUEST['subject'] ;
            $message = $_REQUEST['message'] ;
            mail( "newsletter@mydomain.com", "Subject: $subject",
            $message, "From: $email" );
            echo "Thank you for using our mail form";
            }
            else
            //if "email" is not filled out, display the form
            {
            echo "<form method='post' action=''>
            Subject: <input name='subject' type='text' class='xl' /><br />
            Message: <textarea name='message' cols='20' rows='10'></textarea><br />
            <input type='submit' class='btn btn-primary' value='Send' />
            </form>";
            }
            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:58:49.370

您的问题不清楚，就像您编写的代码一样-

> 邮件（“newsletter@mydomain.com”，“主题：$subject”，$message，“发件人：$email”）；在上面的代码块中，第一个参数应该是您创建的名称为 $area 的列表。

无论如何，我认为你应该尝试一次[mail_queue](http://pear.php.net/manual/en/package.mail.mail-queue.php) lib。

# php - 使用 OAuth 获取 OpenID URL

> ID：13969164
> 
> 赞同：3
> 
> 时间：2012-12-20T09:41:32.977
> 
> 标签：php, oauth, openid, google-signin

我使用 OpenID 登录 Web 服务。现在我将其更改为 OAuth！

使用 OAuth，我还可以收到一个标识：

> 0101201...（谷歌ID）

但我需要数据库的 OpenID 标识 - 例如：

> [https://www.google.com/accounts/o8/id?id=Hf5S](https://www.google.com/accounts/o8/id?id=Hf5S) ...

我如何通过请求接收此值？

非常感谢！

# grammar - 如何解决这个选择冲突 - JavaCC

> ID：13969165
> 
> 赞同：2
> 
> 时间：2012-12-20T09:41:34.333
> 
> 标签：grammar, parser-generator, operator-precedence, javacc

我有一个 javacc 语法，它使用简单的表达式和条件语句定义了一种简单的脚本语言，我正在审查并尝试更正大致如下定义：

```
void Statement() : {}
{
Assignment()
|
IfStatement()
}

void Assignment() : {}
{
  RealIdentifier() "=" SimpleExpression()
|
  StringIdentifier() "="  StringExpression()
}

void IfStatement() : {}
{
  "IF" Expression() "THEN" Block()
  (
    "ENDIF;"
  |
    "ELSE" Block() "ENDIF;"
  )
}
void Expression() #void : {}
{
  SimpleExpression()
  (
    "<" SimpleExpression() #LTNode(2)
  |
    ">" SimpleExpression() #GTNode(2)
  |
    "<=" SimpleExpression() #LENode(2)
  |
    ">=" SimpleExpression() #GENode(2)
  |
    "==" SimpleExpression() #EQNode(2) 
  |
    "!=" SimpleExpression() #NENode(2)
  )*
}

void SimpleExpression() #void : {}
{
  Term()
  (
    "+" Term()  #AddNode(2)
  |
    "-" Term()  #SubsNode(2)
  |
    "|" Term() #OrNode(2)
  )*
}

void Term() #void : {}
{
  Factor()
  ( 
    "*" Factor() #MultNode(2)
  |
    "/" Factor() #DivNode(2)
  |
    "&" Factor() #AndNode(2)
  )*
}

void Factor() #void : {}
{
  Real()
|
  RealIdentifier()
|
  Function()
|
  "(" Expression() ")"
|
  "!" Factor() #NotNode(1)
|
  StringExpression()
}

void Function() : 
{
  Token t;
  int args = 0;
}
{
t = <FUNCTION> { jjtThis.setID(t.image, legacyCharset); } "(" args = ArgumentList() ")"  
  { jjtThis.setArgs(args); }
}

int ArgumentList() #void : 
{
  int args = 0;
}
{
  Expression() {args++;} ( "," Expression() {args++;} )*
  { return args; }
}

void StringIdentifier() :
{
Token t;
}
{
t = <STRING_IDENTIFIER>
{
System.out.println("kind="+t.kind+" image="+t.image);
}
}

void RealIdentifier() : 
{
Token t;
}
{
t =  <REAL_IDENTIFIER>
{
System.out.println("kind="+t.kind+" image="+t.image);
}
} 
```

第一个明显的问题是表达式的定义方式，因为它用于定义 IfStatement，我很容易得到这样的结果： If (variable1 < variable2 >= variable3 )

我试图通过将条件表达式的逻辑与一般表达式的逻辑分开来纠正这一点，如下所示：

```
void IfStatement() : {}
{
  "IF" ConditionalExpression() "THEN" Block()
  (
    "ENDIF;"
  |
    "ELSE" Block() "ENDIF;"
  )
}
void ConditionalExpression() #void : {}
{
  SimpleExpression()
  (
    "<" #LTNode(2)
  |
    ">" #GTNode(2)
  |
    "<=" #LENode(2)
  |
    ">=" #GENode(2)
  |
    "==" #EQNode(2) 
  |
    "!=" #NENode(2)
  )SimpleExpression()
}
void Expression() #void : {}
( SimpleExpression() )*
} 
```

编译生成的 jj 文件时，我收到以下警告：警告：第 210 行第 3 列的 (...)* 构造中的选择冲突。嵌套在构造中的扩展和扩展后的构造具有共同的前缀，其中之一是：“+ " 考虑使用 2 或更多的前瞻进行嵌套扩展。

错误行号是生成的 jj 文件中的一行。我认为冲突是在遇到 SimpleExpression 时发生的，因为它无法确定正在解析的是 ConditionalExpression 还是 Expression 所以我尝试了：

```
void Expression() #void : {}
{
  ( LOOKAHEAD(2) SimpleExpression() )*
} 
```

接着

```
void ConditionalExpression() #void : {}
{
( LOOKAHEAD(2)
  SimpleExpression()
  ( 
```

但它并没有消失。jj 文件中说存在选择冲突的行是

```
void Statement() : {/*@bgen(jjtree) Statement */
  ASTStatement jjtn000 = new ASTStatement(JJTSTATEMENT);
  boolean jjtc000 = true;
  jjtree.openNodeScope(jjtn000);
/*@egen*/} // <-------------------------------------- line 210
{/*@bgen(jjtree) Statement */
  try {
/*@egen*/
  Assignment()
| 
```

另一个问题是运算符优先级以某种方式搞砸了，例如 IF ( "a" == "a" | "c"=="c" ) 导致 | 在使用“c”作为其第二个操作数并给出 ClassCastException 的第二个 == 运算符之前被解释，我得出结论，解决这个问题需要重写整个语法，所以我想可能在复合的单个条件周围强制使用括号像这样的条件语句 if ( ("a" == "a") | ("c" == "c" ) ) 我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:38:06.590

代替 kleen-star,`*`用于`?`使关系表达式的右侧（包括运算符）成为可选的，以便单个`SimpleExpression()`也匹配：

```
void Expression() #void : {}
{
  SimpleExpression()
  ( "<"  SimpleExpression() #LTNode(2)
  | ">"  SimpleExpression() #GTNode(2)
  | "<=" SimpleExpression() #LENode(2)
  | ">=" SimpleExpression() #GENode(2)
  | "==" SimpleExpression() #EQNode(2) 
  | "!=" SimpleExpression() #NENode(2)
  )?
} 
```

这不应该产生任何冲突，AFAIK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:23:53.360

对于你的第二个问题

> 另一个问题是运算符优先级以某种方式搞砸了，例如 IF ( "a" == "a" | "c"=="c" ) 导致 | 在第二个 == 运算符之前被解释，使用“c”作为其第二个操作数并给出 ClassCastException，

由于您没有发布与`|`运算符相关的语法规则，因此很难诊断。您建议的解决方案不应该是必需的。

我希望您不要介意对语言设计的评论：尝试使用语法强制类型正确性通常是一个糟糕的选择。

# mysql - MySQL并实现接近序列的东西？

> ID：13969168
> 
> 赞同：1
> 
> 时间：2012-12-20T09:41:45.837
> 
> 标签：mysql, database, oracle, sequences

我最近正在从 oracle 迁移到 mysql，如果我在 mysql 中实现类似于序列的东西是一个好方法，我想得到一些建议。

本质上，我目前将如何实现它是通过在 mysql 中为 oracle 中的每个序列创建一个单独的表，并有一个代表 last_number 的列，并在我插入新行时增加该列，这是我可以的另一种方式这样做是通过创建一个包含代表每个序列的几行的单个表，并在我进行插入时分别递增每一行。

另一种更简单的方法是，我可以在插入数据时在相关列上执行 select max()+1。

我基本上正在考虑切换到 select max()+1 选项，因为它似乎更易于实现，但我想就您认为从这些选项中实现它的最佳方法获得一些建议，如果使用 select max()+1 时，我目前不知道有什么陷阱。

另外我不使用 auto_increment 和函数 last_insert_id() 的原因是我想遵循 ansi 标准。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:50:07.650

首先：`max()+1`如果您使用高隔离级别的事务，则不保证该版本会给您一个序列。

我们通常使用序列的方式（如果我们无法避免它们）是创建一个带有`AUTO_INCREMENT`值的表，`INSERT INTO`它`SELECT last_insert_id()`，，`DELETE FROM table WHERE field<$LASTINSERTID`。这当然是在存储过程中完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:45:25.947

存在读取一致性问题，因为两个会话都在运行......

```
insert into ... select max(..)+1 from ... 
```

...同时两者都看到相同的 max(...) 值，因此它们都尝试插入相同的新值。

您的最大值表方法有同样的问题，您必须使用锁定机制来避免多个会话读取相同的值。这会导致并发问题，其中对表的插入是序列化的。

# node.js - 在 hp2ps 工具的垃圾收集上记录堆样本

> ID：13969169
> 
> 赞同：0
> 
> 时间：2012-12-20T09:41:48.910
> 
> 标签：node.js, v8

## PS：

**根据[此链接](https://groups.google.com/d/msg/v8-users/3JEoQD5kOIk/BQX6WRJuB7gJ)log_gc 在最新节点（v8）上不再工作**

* * *

`Node.js`有以下选项`v8-option`：

```
 --log_gc (Log heap samples on garbage collection for the hp2ps tool) 
```

我试图运行它，但现在我想知道如何使用（查看）这些数据？什么是hp2ps？我做了一个谷歌搜索，发现了某种haskell工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:42:27.557

这会生成一个 PostScript 文件。[然后可以使用hp2ps](http://www.macs.hw.ac.uk/~dsg/gph/docs/4.06/users_guide/hp2ps.html)工具查看这个 postscript 文件，该工具实际上是用 Haskell 编写的。它允许您查看与内存相关的图表。

[PostScript](http://en.wikipedia.org/wiki/PostScript)是一种允许您呈现类似于 PDF 的文档的语言。

# iphone - 注册前获取iOS版本（无代理）

> ID：13969177
> 
> 赞同：0
> 
> 时间：2012-12-20T09:42:32.523
> 
> 标签：iphone, ios, mdm

如何有条件地设置

```
<key>AccessRights</key>
<integer>$enrollment_code</integer> 
```

在基于 iOS 版本的 MDM 注册配置文件中，它正在安装..

如5.0及以上必须为8191，5.0以下需为2047

**在 Phase1：profile 服务中，我们没有获取到 iOS 版本。那么在注册之前从哪里获取 iOS 版本。**

PS：我正在注册没有代理的设备（所以代理不能发送它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:16:41.783

您可以使用从浏览器报告的 User-Agent。

# java - 为 SQLCipher 加密已经存在的数据库

> ID：13969184
> 
> 赞同：3
> 
> 时间：2012-12-20T09:42:56.507
> 
> 标签：java, android, database, encryption, sqlcipher

我在我的应用程序中使用了一个已经存在的数据库（另见[1](https://stackoverflow.com/questions/13844735/sqldroid-and-encrypted-database)）。我使用 Java 应用程序加密了数据库。在我的应用程序中，我尝试使用以下代码读取 encrypted_database，但出现**SQLiteException: file is encrypted or is not a database**：

```
 SQLiteDatabase.loadLibs(mContext);
    SQLiteDatabase dataBase = SQLiteDatabase.openDatabase(mPath, mPassword, null, SQLiteDatabase.OPEN_READONLY);
    String query = "Select distinct _id from TABLE";
    Cursor cursor = dataBase.rawQuery(query, null);
    return cursor; 
```

我已经用 SQLCipher 加密了我的数据库，我也可以读取数据，所以一切正常。

SQLCipher 和现有数据库的问题是我必须将完整的 unencrypted_database 复制到 encrypted_database。当我在手机上执行此操作时，这需要很长时间。

我的想法是：用java编写一个加密数据库的应用程序，并在你的应用程序中使用这个 encrypted_database。结果是我只需要在我的应用程序中打开已经存在的 encrypted_database 并且不需要复制。

现在我写了一个 Java 应用程序（基于[2](http://cs.saddleback.edu/rwatkins/CS4B/Crypto/FileEncryptor.html) , [3](https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption)）但是仍然有一些与 SQLCipher 及其设计相关的问题（[4](http://sqlcipher.net/design/)）：

*   如何在数据库页面中划分我的数据库？在[4](http://sqlcipher.net/design/)中，数据库页面仅由其大小（1024 字节）定义。但是我必须在我的 encrypted_database 文件中写入“数据库页面开始”或“数据库页面结束”
*   盐和随机初始化向量 (iv) 是 1024 字节的一部分吗？

    ```
    public static void main(String[] args) throws Exception{

        outFile_enc = new FileOutputStream(mFileNameEncrypted);
        outFile_dec = new FileOutputStream(mFileNameDecrypted);

        int keyLength = 256;
        // salt
        salt = new byte[16];
        Random rnd = new Random();
        rnd.nextBytes(salt);
        int iterations = 4000;

        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
        KeySpec keySpec = new PBEKeySpec(mPassWord.toCharArray(), salt, iterations, keyLength);
        SecretKey passwordKey = keyFactory.generateSecret(keySpec);
        key = new SecretKeySpec(passwordKey.getEncoded(), "AES");

        // creates a cipher and init it for encryption
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, key);

        AlgorithmParameters params = cipher.getParameters();
        iv = params.getParameterSpec(IvParameterSpec.class).getIV();

        encryptData(cipher);            
    }

    public static void encryptData(Cipher cipher) throws Exception{
        // File to encrypt
        inFile = new FileInputStream(mFileName);

        // unique random salt in the first 16 bytes of the file
        outFile_enc.write(salt);

        // Read file and encrypt its bytes
        byte[] input  = new byte[64];
        int bytesRead;
        while((bytesRead = inFile.read(input)) != -1){
        byte[] output = cipher.update(input, 0, bytesRead);
        if(output != null)
            outFile_enc.write(output);
        }

        byte[] output = cipher.doFinal();
        if(output != null)
            outFile_enc.write(output);
        // random initialization vector is stored at the end of a page
        outFile_enc.write(iv);

        inFile.close();
        outFile_enc.flush();
        outFile_enc.close();    
    } 
    ```

我感谢每一个帮助/想法/评论:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:35:32.923

不建议尝试从头开始重新创建 SQLCipher 文件的方法。该格式比您正在执行的操作更复杂，并且将不平凡地重现有效的 SQLCipher 文件。相反，您应该只使用[SQLCipher 命令行程序](http://sqlcipher.net/introduction/)来[加密您的数据库](http://sqlcipher.net/sqlcipher-api/#sqlcipher_export)以进行分发。

# c# - 为什么 EF 5.x 对表使用复数名称？

> ID：13969187
> 
> 赞同：9
> 
> 时间：2012-12-20T09:43:01.827
> 
> 标签：c#, entity-framework

我有一些 ORM 框架的经验，比如 Hibernate，甚至 Entity Framework 3.0。

默认情况下，这些框架使用表的单数名称。例如，类 User 将映射到表 User。

`TableAttribute`但是当我使用 Visual Studio 2012 迁移到 EF 5.x 时，它使用复数名称并导致许多错误，除非我使用as手动映射该类：

```
[Table("User")]
public class User {
    // ...
} 
```

没有`TableAttribute`，如果我有`DbContext`如下：

```
public CustomContext : DbContext {
    // ...
    public DbSet<User> Users { get; set; }
} 
```

然后调用：

```
var list = db.Users.ToList(); 
```

生成的 sql 如下所示：

```
Select [Extent1].[Username] From [Users] as [Extent1] 
```

因此，将发生错误，因为我没有任何名为**Users**的表。此外，我将单数形式的名称表称为复数形式。[您可以在此链接](https://stackoverflow.com/questions/3593582/database-naming-conventions-by-microsoft)中看到原因

我想知道为什么微软以这种方式实现 EF 5.x 而不是与 EF 3.0 相同？

**更新：**

我们可以通过在上下文类中使用以下代码来告诉 EF 不要使用复数名称：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

    base.OnModelCreating(modelBuilder);
} 
```

即使 EF 工具生成复数名称，它也应该保留到原始数据库的映射，不是吗？因为一些用户可能想要更改他们类中的一些字段名称。EF 3.0 运行良好，但 EF 5.x 不行。

各位大侠，请给个理由好吗！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T09:57:16.483

该约定是在[`PluralizingTableNameConvention`](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions.pluralizingtablenameconvention%28v=vs.103%29.aspx)默认定义的约定中定义的`DbModelBuilder.Conventions`

如果你想从所有表中排除它，你可以使用[这个问题](https://stackoverflow.com/questions/12610524/entity-framework-plural-table-names)中的代码。

为什么这样做，我不知道，但我必须说，就个人而言，我属于认为表名应该是复数形式的阵营:)

在 SQL Server 实例提供的示例数据库中，Northwind 有复数形式，AdventureWorks 使用单数形式，因此充其量没有既定标准。我对每一个都进行了很多讨论，但每个人都同意的一件事是，一旦选择了命名策略，就应该坚持下去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:53:43.887

当您使用实体框架生成模型时，取消选中“复数或单数生成的对象名称”

# perl - 当我在 perl 脚本中执行 Postfix reload 时权限被拒绝

> ID：13969203
> 
> 赞同：1
> 
> 时间：2012-12-20T09:43:41.897
> 
> 标签：perl, exec, root, reload, postfix-mta

我有一个通常应该重新加载 Postfix 的脚本，但我在 /../../reload.pl 11 处被拒绝了权限。

这是我的 perl 脚本：

```
#!/usr/bin/perl -w
#
# Script Name : reload postfix
# version : v1.0
#
$ENV{PATH} = '/usr/bin';

print $<." ".$>;

# Relaod postfix (opt)
system('/etc/postfix reload'); 
```

结果是：

```
0 0
Can't exec "/etc/postfix": permission denied at /../../reload.pl  11 
```

解决方法是给出执行postfix cmd的完整路径：

```
$ENV{PATH} = '/usr/sbin'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:00:54.867

你可能的意思是：

```
system("$ENV{PATH}/postfix reload"); 
```

或者

```
system("/path/to/postfix/binary/postfix reload"); 
```

`/etc/postfix`很可能是一个不可执行的配置文件，因此权限被拒绝错误。你可以`postfix`在你的系统上找到路径`which postfix`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:09:31.583

您可以`postfix`通过`postfix`控制二进制文件本身或通过初始化脚本重新加载。反过来，init 脚本只执行`postfix`控制二进制文件`reload`作为其参数，因此您可以跳过它。

您看到原始错误的原因`/etc/postfix`可能是包含配置文件的目录。您不能执行目录。

因此，您应该执行控制二进制文件本身。这通常位于`/usr/sbin/postfix`而不是位于`/usr/bin`。你也不需要`PATH`为它设置。所以：

1.  删除带有 的行`$ENV{PATH} = ...`，您不需要它。
2.  将系统调用更改为`system("/usr/sbin/postfix reload");`

# c - 结构 tm 的大小

> ID：13969210
> 
> 赞同：3
> 
> 时间：2012-12-20T09:43:59.027
> 
> 标签：c, linux, sizeof, ctime

我使用 sizeof() 运算符在 C 中打印 sizeof(struct tm) 它给了我 44 个字节。但是在 ctime 的手册页中它有 9 个 int 变量用于时间。那么它的大小应该是 36。它是如何给出 44 的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:49:04.917

[http://linux.die.net/man/3/ctime](http://linux.die.net/man/3/ctime)

> glibc 版本的 struct tm 有额外的字段
> 
> ```
> long tm_gmtoff;           /* Seconds east of UTC */
> const char *tm_zone;      /* Timezone abbreviation */ 
> ```

这就是你额外字节的来源（可能）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:47:30.783

除了 RedX 和 Adeel 的非常真实的答案之外，结构内部的填充也可能导致大小大于所有元素大小的总和。要使用自定义结构防止这种情况，您可以使用 GCC`__attribute__((__packed__))`功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T09:49:53.033

struct tm 的 glibc 版本具有附加字段...

```
long tm_gmtoff;           /* Seconds east of UTC */
const char *tm_zone;      /* Timezone abbreviation */ 
```

再读一遍`man ctime`..

# c# - 如何剥离 http:// 和 www。从使用 c# 输入的域名

> ID：13969214
> 
> 赞同：3
> 
> 时间：2012-12-20T09:44:07.897
> 
> 标签：c#, regex

在我正在处理的应用程序中，我们允许用户输入域名列表，我们希望用户以以下格式输入任何域名

*   [stackoverflow.com](http://www.stackoverflow.com)
*   [www.stackoverflow.com](http://www.stackoverflow.com)
*   [http://stackoverflow.com](http://www.stackoverflow.com)
*   [http://www.stackoverflow.com](http://www.stackoverflow.com)

但是当将此域名存储回我们的数据库时，我们只想以以下格式存储域名

**格式：stackoverflow.com**

所以想知道是否有现成的帮手可以用来完成这项工作，或者有什么建议可以有效地完成这项工作。

**[我试过什么？](http://mattgemmell.com/2008/12/08/what-have-you-tried/)**

这是我想出的，

```
public static string CleanDomainName(string domain)
{
    domain = domain.Trim();
    if (domain.Split('.').Count() > 2)
    {
        domain = domain.Split('.')[1] + "." + domain.Split('.')[2];
    }
    return domain;
} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:11:51.027

使用 Regex 替换字符串开头的表达式：

```
Regex.Replace(input, @"^(?:http(?:s)?://)?(?:www(?:[0-9]+)?\.)?", string.Empty, RegexOptions.IgnoreCase); 
```

这将取代：

*   开头的最终“http://”（或“https://”）后跟
*   最终的“www”。（后面还有一个数字，即：www8 或 www23）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:48:40.337

使用[Uri](http://msdn.microsoft.com/en-us/library/txt7706a%28v=vs.100%29.aspx)类。

```
string url = "http://www.testsite.com/path/file.html";
Uri uri = new Uri(url); 
```

有各种[属性](http://msdn.microsoft.com/en-us/library/system.uri_properties%28v=vs.100%29.aspx)可以检索 url 的不同部分。

使用 uri.Host 获取`www.testsite.com`url 的一部分。一点字符串操作可以删除`www.`;

```
string domain = uri.Host;
if (domain.StartsWith("www."))
{
    domain = domain.Substring(4);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:48:22.347

使用`System.Uri`类。

```
 System.Uri uri = new Uri("http://stackoverflow.com/search?q=something");
 string uriWithoutScheme = uri.Host.Replace("www.","") + uri.PathAndQuery; 
```

这会给你：`stackoverflow.com/search?q=something`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-20T09:50:11.157

```
public static string CleanDomainName(string url)
{
    var uri = url.Contains("http://") ? new Uri(url) : new Uri("http://" + url);
    var parts = uri.Host.Split('.');
    return string.Join(".", parts.Skip(parts.Length - 2));
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-20T09:51:13.907

```
/// <summary>
/// Clears the sub domains from a URL.
/// </summary>
/// <param name="url">The URL.</param>
/// <returns>String for a URL without any subdomains</returns>
private static string ClearUrlSubDomains(Uri url)
{
    var host = url.Host.ToLowerInvariant();
    if (host.LastIndexOf('.') != host.IndexOf('.'))
    {
        host = host.Remove(0, host.IndexOf('.') + 1); // Strip out the subdomain (i.e. remove en-gb or www etc)
    }
    return host;
} 
```

您可以从您的域创建一个新的 Uri，因此调用它将是：

```
ClearUrlSubDomains(new Uri(domain)) 
```

这并不涉及像[http://www.something.somethingelse.com](http://www.something.somethingelse.com)这样的网址，但可以通过等效的 while 构造进行修改。

# android - 计算器不适用于某些设备

> ID：13969215
> 
> 赞同：1
> 
> 时间：2012-12-20T09:44:18.360
> 
> 标签：android, android-intent, calculator

我在我的应用程序中使用计算器。它适用于某些设备，但不适用于其他一些设备。我怎样才能使它与所有设备兼容。

我正在使用此代码。

```
Intent i = new Intent(); 
i.setClassName("com.android.calculator2", "com.android.calculator2.Calculator"); 
startActivity(i); 
```

请给我解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:54:34.940

您的代码假设手机制造商没有用他们自己的自定义计算器替换标准的 Android 计算器。

您可以使用 Android 源代码（[或类似的衍生](https://github.com/Tombarr/ICS-Calculator2-for-Android-2.1-)代码）并在您的应用程序中包含您自己的计算器实现。

这将与其他设备兼容，因为它没有外部依赖项。

# xslt - 基于与通配符匹配的属性值的 XSL 元素分组

> ID：13969232
> 
> 赞同：1
> 
> 时间：2012-12-20T09:45:18.723
> 
> 标签：xslt

我想转换这个 xml 片段

```
<Sets>
    <Set id="category.product.typeA.item1"/>
    <Set id="category.product.typeB.item2"/>
    <Set id="category.product.typeC.item3"/>
    <Set id="category.product.typeA.item2"/>
    <Set id="category.product.typeA.item3"/>
    <Set id="category.service.typeA.item1"/>
    <Set id="category.service.typeA.item2"/>
    <Set id="category.product.typeA.item4"/>
    <Set id="category.product.typeA.item5"/>
</Sets> 
```

进入以下 xml 片段：

```
<Category id="category.product">
    <Group id="category.product.typeA">
        <Set id="category.product.typeA.item1"/>
        <Set id="category.product.typeA.item2"/>
        <Set id="category.product.typeA.item3"/>
        <Set id="category.product.typeA.item4"/>
        <Set id="category.product.typeA.item5"/>        
    </Group>
    <Group id="category.product.typeB"> 
        <Set id="category.product.typeB.item2"/>
    </Group>
    <Group id="category.product.typeC"> 
        <Set id="category.product.typeC.item3"/>
    </Group>
</Category>
<Category id="category.service">
    <Group id="category.service.typeA">
        <Set id="category.service.typeA.item1"/>
        <Set id="category.service.typeA.item2"/>
    </Group>
</Category> 
```

基本上，我想根据属性值将元素放入单独的组中。

因此，属性值匹配的元素： category.product.typeA.* 应该放在一个组中 category.product.typeB.* 应该放在另一个组中

如果属性的值与 category.product.* 匹配，则该组应归入一个类别，如果属性的值与 category.service.* 匹配，则应将其归入另一个类别。

我已经在“starts-with”和“for-each-group”方面做出了努力，但我无法将元素的分组和属性的通配符匹配放在一起，希望能提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:09:47.833

这是我的建议：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs mf"
  version="2.0">

<xsl:output indent="yes"/>

<xsl:template match="Sets">
  <xsl:for-each-group select="Set" group-by="string-join(tokenize(@id, '\.')[position() lt 3], '.')">
    <Category id="{current-grouping-key()}">
      <xsl:for-each-group select="current-group()" group-by="string-join(tokenize(@id, '\.')[position() lt 4], '.')">
        <Group id="{current-grouping-key()}">
          <xsl:copy-of select="current-group()"/>
        </Group>
      </xsl:for-each-group>
    </Category>
  </xsl:for-each-group>
</xsl:template>

</xsl:stylesheet> 
```

当我将带有 Saxon 9.4 的样式表应用于您的输入时，我得到了想要的结果

```
<Category id="category.product">
   <Group id="category.product.typeA">
      <Set id="category.product.typeA.item1"/>
      <Set id="category.product.typeA.item2"/>
      <Set id="category.product.typeA.item3"/>
      <Set id="category.product.typeA.item4"/>
      <Set id="category.product.typeA.item5"/>
   </Group>
   <Group id="category.product.typeB">
      <Set id="category.product.typeB.item2"/>
   </Group>
   <Group id="category.product.typeC">
      <Set id="category.product.typeC.item3"/>
   </Group>
</Category>
<Category id="category.service">
   <Group id="category.service.typeA">
      <Set id="category.service.typeA.item1"/>
      <Set id="category.service.typeA.item2"/>
   </Group>
</Category> 
```

# mysql - mysql - 触发表更改

> ID：13969236
> 
> 赞同：3
> 
> 时间：2012-12-20T09:45:33.423
> 
> 标签：mysql, database, triggers

`mysql`当使用 PHP对我的表进行一些更改时，我想在屏幕上触发警报。

目前，我有许多不同结构的表（Purchase Order、Sales Order、Users 等），我的目的是制作一个实时应用程序，但问题是我已经编写了 90% 的应用程序。

我有一个名称为`activity` 它包含的表：

`id, table, action, dateTime, user`

当对表进行一些更改时`Purchase Order`，我需要记录

`(0,'TABLE A','INSERT','12/12/12','John')`

这样我就可以展示了`JOHN created a new Purchase Order`。

请注意，我已经编写了应用程序的许多部分，实现这一目标的最可能方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:12:13.073

如果您的问题是如何记录*活动*表中的更改，那么您可以在要监控的每个表（订单、销售、用户等）上创建触发器，如下所示：

```
CREATE TRIGGER `tg_orders_insert` AFTER INSERT ON orders
    FOR EACH ROW INSERT INTO `activity` (`id`, `table`, `action`, `date_time`, `user`) VALUES (NEW.id, 'orders', 'insert', NOW(), 'user1')  

CREATE TRIGGER `tg_orders_update` AFTER UPDATE ON orders
    FOR EACH ROW INSERT INTO `activity` (`id`, `table`, `action`, `date_time`, `user`) VALUES (NEW.id, 'orders', 'update', NOW(), 'user1')  

CREATE TRIGGER `tg_orders_delete` BEFORE DELETE ON orders
    FOR EACH ROW INSERT INTO `activity` (`id`, `table`, `action`, `date_time`, `user`) VALUES (OLD.id, 'orders', 'delete', NOW(), 'user1') 
```

# android - 如何避免在旋转端口登陆Android4.X后在智能手机中剪切/复制/粘贴？

> ID：13969238
> 
> 赞同：14
> 
> 时间：2012-12-20T09:45:38.210
> 
> 标签：android, android-edittext, smartphone, android-4.2-jelly-bean

我正在努力避免在智能手机中剪切/复制/粘贴（平板电脑很好）。它在端口模式下很好，但在陆地模式下 EditText 显示一个按钮 Next。选择文本后，下一步按钮转换为具有复制、剪切和粘贴选项的编辑按钮。

那么当编辑按钮出现时，有什么方法可以在旋转后禁用剪切/复制。

我正在关注这个链接。 [如何禁用从/到 EditText 的复制/粘贴](https://stackoverflow.com/questions/6275299/how-to-disable-copy-paste-from-to-edittext)

![此图像没有文本选择](../Images/177fab7a9070fa71f1c8e9216bec241a.png)

![选择后](../Images/f6140a81e5a16a0249ae26db043083c7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:16:43.027

我坚持要禁用长按 EditText，因为`Edit`当您长按 EditText 中的选定文本时会出现该按钮。

```
et_text.setLongClickable(false); 
```

此外，您可以清除`ClipboardManager`, 以便如果您已经有已复制到剪贴板的内容将使用清除，

```
ClipboardManager manager = (ClipboardManager) 
                                 getSystemService(Context.CLIPBOARD_SERVICE);
manager.setText(""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:39:54.070

我认为你可以使用这个：

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:imeOptions](http://developer.android.com/reference/android/widget/TextView.html#attr_android:imeOptions)

与旗帜：

**flagNoAccessoryAction**

与自定义操作一起使用，这表示当输入法为全屏时，该操作不应作为附件按钮使用。请注意，通过设置此标志，可能会出现用户根本无法使用该操作的情况。设置此项通常意味着您认为显示正在编辑的文本比您提供的操作更重要。对应于 IME_FLAG_NO_ACCESSORY_ACTION。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T08:52:48.800

尝试使用这两行。它可以帮助您：

```
 EditText.setFocusable(false);
 EditText.setFocusableInTouchMode(false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-01T10:20:18.707

尝试这个 ..

```
your_edit_text.setCustomSelectionActionModeCallback(new Callback() {
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        return false;
    }

    public void onDestroyActionMode(ActionMode mode) {                  
    }

    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        return false;
    }

    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        return false;
    }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-21T08:55:40.063

@Cobra -`EditText.setEditable(false);`在您的代码中设置，或者您也在您的 xml 中设置此属性。这个属性做得很好，但如果任何情况下这都不起作用..设置`setFocusable` 也是错误的..这​​个解决方案对我有用..

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-21T09:48:48.700

因为我们不知道你到目前为止尝试了什么......以及你在代码中实际做了什么......除此之外......这里是一个链接......类似于你的问题，我认为这会帮助你...... [禁用横向软键盘输入的全屏编辑视图？](https://stackoverflow.com/questions/4336762/disabling-the-fullscreen-editing-view-for-soft-keyboard-input-in-landscape)

# image - 如何从具有不同图像持续时间的一系列图像创建视频？

> ID：13969239
> 
> 赞同：6
> 
> 时间：2012-12-20T09:45:41.113
> 
> 标签：image, video, ffmpeg

我想以编程方式创建一个由一系列图像组成的视频文件。但是，我还希望能够为每个图像指定持续时间。我经常看到为类似任务建议的[ffmpeg 示例](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images)，但它们总是假设每个图像的持续时间相同。有没有一种有效的方法来实现这一点？（一个低效的解决方案可能是将帧速率设置为较高并重复复制每个图像，直到它与预期的持续时间相匹配）

我还将动态生成每个图像，因此如果有办法将图像数据编码为视频帧而不将每个图像写入磁盘，那就更好了。然而，这不是一个要求。

**编辑：**要清楚，我不一定需要使用 ffmpeg。其他免费的命令行工具很好，视频处理库也很好。我只是在寻找一个好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-23T23:19:11.670

我能够使用以下命令解决完全相同的问题。vframes 设置为秒数 * fps 在示例中，第一个视频有 100 帧（100 帧 / 25 fps = 4 秒），第二个视频有 200 帧（8 秒）

```
ffmpeg -f image2 -loop 1 -vframes 100 -r 25 -i a.jpg -vcodec mpeg4 a.avi
ffmpeg -f image2 -loop 1 -vframes 200 -r 25 -i b.jpg -vcodec mpeg4 b.avi
mencoder -ovc copy -o out.mp4 a.mp4 b.mp4 
```

mencoder 部分就像 d33pika 的一样

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-10-06T06:22:11.030

您可以使用 concat demuxer 手动排序图像并为每个图像提供特定的持续时间。

```
ffmpeg -f concat -i input.txt -vsync vfr -pix_fmt yuv420p output.mp4 
```

> 您的*input.txt*应该如下所示。

```
file '/path/to/dog.png'
duration 5
file '/path/to/cat.png'
duration 1
file '/path/to/rat.png'
duration 3
file '/path/to/tapeworm.png'
duration 2
file '/path/to/tapeworm.png' 
```

*您可以根据需要动态编写此txt文件并执行命令。*

有关更多信息，请参阅[https://trac.ffmpeg.org/wiki/Slideshow](https://trac.ffmpeg.org/wiki/Slideshow)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T07:07:17.627

似乎没有办法使用 ffmpeg 为不同的图像设置不同的持续时间。我会为每个图像创建单独的视频，然后使用 mencoder 将它们连接起来，如下所示：

```
ffmpeg -f image2 -vframes 30 -i a.jpg -vcodec libx264 -r 1 a.mp4
ffmpeg -f image2 -vframmes 10 -i bjpg -vcodec libx264 -r 1 b.mp4
mencoder -ovc copy -o out.mp4 a.mp4 b.mp4 
```

用于 concat 操作的 mencoder 需要所有输出视频具有相同的分辨率、帧率和编解码器。

这里 a.mp4 有 30 帧，持续时间为 30 秒，b.mp4 有 10 帧，持续时间为 10 秒。

# android - 如何在 Eclipse 模拟器中运行 APK 文件

> ID：13969240
> 
> 赞同：-5
> 
> 时间：2012-12-20T09:45:41.597
> 
> 标签：android, eclipse, apk

我需要一些关于使用 Eclipse 在模拟器上运行 APK 文件的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:02:33.943

在 AVD 中手动安装 APK：

脚步：

```
1) Paste your apk in your PLATEFORM-Tools in your Android SDK.
2) Now open your COMMAND-PROMPT.
3) make path till your adnroid sdk PLATEFORM TOOLS folder
4) now run command to find your emulator:

 adb devices 
```

5）在此之后运行此命令以在您当前活动的模拟器中安装 APK：

```
adb install abc.apk; 
```

通过这个你可以安装你的APK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:51:48.910

那不是 Eclipse 模拟器，它是 Android 虚拟机 (AVD)，它附带 Android SDK。所以你真的不需要 Eclipse。只需从 AVD Manager 运行 AVD 并等待它启动。它启动后就像一个android系统，你可以打开浏览器下载apk并安装它。您也可以向 AVD 发送命令来安装 APK。SDK 附带的一个很好的收费是 Monitor（旧版本上的 DDMS）。您可以在那里探索 AVD 的许多细节。

# nullpointerexception - schemagen NullpointerException

> ID：13969243
> 
> 赞同：2
> 
> 时间：2012-12-20T09:45:46.963
> 
> 标签：nullpointerexception, schemagen

**Java类：**

```
 @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "user", propOrder = {
            "id",
            "name"  })
    public class User {
        @XmlAttribute(required=true)
        private long id;
        @XmlAttribute(required=true)
            private String name;
        public long getId() {
        return id;
    }
    public void setId(long id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Override
    public String toString() {
        return "User [id=" + id + ", name=" + name + "]";
    }
 } 
```

*   **JDK版本**：1.6.0_31
*   **异常堆栈跟踪**schemagen User.java

    ```
    C:\anirban\work_eclipse_juno\RestfulWSDemo\src\com\domain>schemagen User.java
    An exception has occurred in apt (1.6.0_31). Please file a bug at the Java Devel
    oper Connection (http://java.sun.com/webapps/bugreport)  after checking the Bug
    Parade for duplicates. Include your program and the following diagnostic in your
     report.  Thank you.
    java.lang.NullPointerException
            at com.sun.tools.apt.main.CommandLine.parse(CommandLine.java:42)
            at com.sun.tools.apt.main.Main.compile(Main.java:775)
            at com.sun.tools.apt.Main.processing(Main.java:95)
            at com.sun.tools.apt.Main.process(Main.java:85)
            at com.sun.tools.apt.Main.process(Main.java:67)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
    java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
    sorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at com.sun.tools.internal.jxc.SchemaGenerator$Runner.main(SchemaGenerato
    r.java:215)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
    java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
    sorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at com.sun.tools.internal.jxc.SchemaGenerator.run(SchemaGenerator.java:1
    53)
            at com.sun.tools.internal.jxc.SchemaGenerator.run(SchemaGenerator.java:6
    3)
            at com.sun.tools.internal.jxc.SchemaGenerator.main(SchemaGenerator.java:
    55) 
    ```

    任何人都可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T13:34:35.163

尝试添加类路径。schemagen -cp "%java_home%\lib\tools.jar" User.java

# jquery - 同时运行未压缩和缩小的 jQuery 文件

> ID：13969245
> 
> 赞同：1
> 
> 时间：2012-12-20T09:45:50.953
> 
> 标签：jquery, minify

是否可以在同一个网站上同时运行 jQuery 的未压缩和缩小版本？

我有两个 Web 脚本，我试图将它们合并在一起，一个使用未压缩的 jQuery，另一个使用 minified（相同版本 - 1.8.3）。我目前在同时使用这两个文件时遇到问题 - 具体来说，使用未压缩文件的脚本没有触发。

注意：这仅用于开发目的，一旦投入生产，这两个程序都将转换为使用 minifed。只是想节省一些时间并避免现在这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:50:20.423

无论它们是否被缩小，它们都应该是相同的。缩小只会减少文件大小，它**不应该**改变文件的内容。它只是删除空白和新行等。

那就是说你不会加载到 Jquery 的副本中，所以为什么要加载一个 minifed 而一个不加载。只需加载缩小的。

# android - 无法在 android 应用上用新图像更改旧的启动图像

> ID：13969246
> 
> 赞同：1
> 
> 时间：2012-12-20T09:45:51.997
> 
> 标签：android, image

我尝试通过更改可绘制文件夹中的图像并为新图像赋予相同的名称，从而用新图像更改我的 android 应用程序中的启动图像。

在我的 Eclipse 环境中，我可以在 splash.xml 文件中看到新图像，但是当我运行代码时，我会在模拟器上看到旧图像。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:48:15.830

我认为启动图像也存在于任何其他文件夹中，例如 drawable-large,drawable-small 。

所以请检查所有文件夹。

请清理您的项目并再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:51:13.003

如果应用程序具有[多种分辨率](http://developer.android.com/guide/practices/screens_support.html#qualifiers)的初始图像，则需要全部更改。

```
/res
  /drawable
  /drawble-xhdpi
  /drawble-hdpi
  etc... 
```

# java - JSF 与特立尼达 tr:selectOneChoice

> ID：13969249
> 
> 赞同：0
> 
> 时间：2012-12-20T09:46:20.767
> 
> 标签：java, jsf-1.2, trinidad

假设我正在使用这个组件，如下所示：

```
<tr:selectOneChoice label="Sports" required="#{true}" showRequired="#{true}">
 <f:selectItem itemLabel="Swimming" itemValue="1" />
 <f:selectItem itemLabel="Football" itemValue="2" />
 <f:selectItem itemLabel="Soccer" itemValue="3" />
 <f:selectItem itemLabel="Running" itemValue="4" />
  <f:selectItem itemLabel="Sailing" itemValue="5" />
    <f:facet name="help">
     <tr:outputText value="Please select" />
   </f:facet>     
</tr:selectOneChoice> 
```

是否可以在服务器触发某些事件后将新项目动态添加到列表中？

我的意思是，假设用户选择了某个项目，然后在提交之前从服务器触发了一个事件，该事件应该将所选项目更改为其他项目。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:00:17.170

是的。这是可能的，但您必须定义一个映射在支持 bean 中的列表，例如：

```
<tr:selectOneChoice label="Sports" required="#{true}" showRequired="#{true}">   
    <f:selectItems value="#{backingBean.values}" />    
</tr:selectOneChoice> 
```

请注意这里的区别`f:selectItems`被用来代替`f:selectItem`

# php - 使用 javascript 暂停表单提交

> ID：13969250
> 
> 赞同：8
> 
> 时间：2012-12-20T09:46:19.980
> 
> 标签：php, javascript, html, form-submit

我正在尝试使用照片提交表单。在用户加载他按下提交按钮的照片后，我希望表单暂停 10 秒，为这 10 秒制作一个进度条动画然后提交表单，你们能说我做错了什么吗，似乎没有10 秒后提交表单。这是代码：

HTML：

```
<form action="uploadpic.php" method="post" id="upload_form">
<input type="text" name="title" id="title">
<p id="title_p">Title</p>

<hr />

<input type="text" name="theme" id="picture_theme" size="40"/>
<p id="theme">Picture Theme<img src="../simages/info.gif" id="info" width="12" height="12" style="margin-left:10px;"></p>
<hr />

<div class="custom-upload">
    <input type="file" name="picture" id="true_pic" />
    <div class="fake-file">
        <input disabled="disabled" >
    </div>
</div>
<p id="upload_pic">Upload picture</p>​

<input type="submit" name="submit" id="submit" value="Upload" />
</form> 
```

JAVASCRIPT：

```
form = document.getElementById("upload_form");
    size=1;
    form.onsubmit = function()
    {
        if (size < 10)
        {
            setTimeout(delayedSubmit,1000); 
        }
        return false;
    }
    function delayedSubmit() {
        size++;
            if (size<5)
            {
                setTimeout(delayedSubmit,1000);
                alert("Counting "+size);    
            }
            else
            {
                alert("Form submitted");
                form.submit();
            }
    } 
```

PHP：

```
<?php

if ($_POST['submit'])
{
    $title = $_POST['title'];
    $theme = $_POST['picture_theme'];
    echo $title," ",$theme; 
}

 ?> 
```

我可以告诉表单不会提交任何东西，因为 php 变量不会显示任何东西，然后页面不会加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:52:22.103

当表单有一个名称和/或 ID 为“提交”的按钮时，它将不再起作用（我的旧帖子是错误的）。

因此，您需要做的是更改按钮的名称/ID：

```
<input type="submit" name="submit-button" id="submit-button" value="Upload" /> 
```

请记住：您也需要更改 PHP：

```
if ($_POST['submit'])
{
    $title = $_POST['title'];
    $theme = $_POST['picture_theme'];
    echo $title," ",$theme; 
} 
```

到

```
if ($_POST['submit-button'])
{
    $title = $_POST['title'];
    $theme = $_POST['picture_theme'];
    echo $title," ",$theme; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:15:45.853

我会简化javascript：

```
form = document.getElementById("upload_form");
size=0;

form.onsubmit = delayedSubmit;

function delayedSubmit () {
    if (++size < 5) {
        alert("Counting "+size);    
        setTimeout(delayedSubmit,1000);
        return false;
    } 
    alert("Form submitted");
    form.submit();
} 
```

并且 - 当然 - 从提交按钮中删除（或更改）id 和名称，例如：

```
<input type="submit" value="Upload" /> 
```

例如：http: [//jsbin.com/equyit/1/edit](http://jsbin.com/equyit/1/edit)

# regex - 删除文件中的匹配对

> ID：13969251
> 
> 赞同：3
> 
> 时间：2012-12-20T09:46:23.000
> 
> 标签：regex, shell, sed, awk

在我寻找 C++ 代码中特别持久的内存泄漏的过程中，我决定将所有分配写入以下格式的日志文件：

> `<alloc|free> <address> <size> <UNIQUE-ID> <file> <line number>`

这给了我，例如：

```
alloc 232108     60   405766 file1.cpp (3572)
free  232128     60   405766
alloc 232108     60   405767 file1.cpp (3572)
free  232128     60   405767
alloc 7a3620  12516   405768 file2.cpp (11435)
free  7a3640  12516   405768
alloc 2306c8    256   405769 file3.cpp (3646)
alloc 746160   6144   405770 file3.cpp (20462)
alloc 6f3528   2048   405771 file4.h (153)
alloc 6aca50    128   405772 file4.h (153)
alloc 632ec8    128   405773 file4.h (153)
alloc 732ff0    128   405774 file4.h (153)
free  746180   6144   405770
free  632ee8    128   405773
alloc 6a7610   2972   405778 this_alloc_has_no_counterpart.cpp (123)
free  6aca70    128   405772
free  733010    128   405774
free  6f3548   2048   405771
alloc 6a7610   2972   405775 file3.cpp (18043)
alloc 7a3620  12316   405776 file5.cpp (474)
alloc 631e00    256   405777 file3.cpp (18059)
free  7a3640  12316   405776
free  6a7630   2972   405775
free  631e20    256   405777
free  2306e8    256   405769 
```

我试图将 every`alloc`与 a匹配`free`，只留下`alloc`s 没有`free`对应物，例如 allocation number `405778`。

我能想出的是以下shell脚本：

```
#!/bin/sh
grep "^alloc" test.txt | while read line
do
    alloc_nr=`echo $line | awk '{ print $4 }'`  # arg4 = allocation number
    echo "Processing $alloc_nr"
    sed -i "/ ${alloc_nr}/{//d}" test.txt
done 
```

正如您可能已经猜到的那样，在一个大约 144000 秒的 25MB 文件上，这非常慢（即每秒 2 个循环）`alloc`，因为我`sed`以一种非常低效的方式使用。

如果有人可以在正确的方向上推动我如何在不花费三个小时的情况下实现这一目标，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:03:22.577

```
awk '/^alloc/ { a[$4]=$0; }
     /^free/ { delete a[$4]; }
     END { for (i in a) {print a[i]; }' test.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:05:02.943

似乎您只想要 ID 而不是整行：

```
$ awk '{print $4}' file | sort | uniq -u
405778 
```

`awk '{print $4}'`仅打印 ID 列。

`sort`对列进行排序。

`uniq -u`仅显示唯一 ID。

编辑：

管道`grep -f - file`匹配整行，无需循环：

```
$ awk '{print $4}' file | sort | uniq -u | grep -f - file
alloc 6a7610   2972   405778 this_alloc_has_no_counterpart.cpp (123) 
```

`grep -f`匹配文件中的模式并`-`表示使用`stdin`.

# java - 生成的 csv 文件中不需要的双引号

> ID：13969254
> 
> 赞同：35
> 
> 时间：2012-12-20T09:46:30.283
> 
> 标签：java, csv, file-io, opencsv, supercsv

我使用下面的 Java 代码创建了一个 CSV 文件：

```
String csv = rs.getString("UPLOAD_FOLDER_PATH")+".csv";
CSVWriter writer = new CSVWriter(new FileWriter(csv));
String [] filevalues = new String[filevaluesarray.size()];

filevalues=filevaluesarray.toArray(filevalues);

writer.writeNext(filevalues);

writer.close(); 
```

我正在获取 CSV 文件，但文件的内容包含不需要的双引号。

> 例如。"ABC","123","KDNJ"

我不知道这些双引号是从哪里添加的。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-20T09:57:15.593

这对我有用

```
CSVWriter writer = 
    new CSVWriter(new FileWriter(csv), ',', CSVWriter.NO_QUOTE_CHARACTER); 
```

请参阅[CSVWriter javadoc](http://opencsv.sourceforge.net/xref/au/com/bytecode/opencsv/CSVWriter.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-21T01:24:19.210

您可能应该澄清“不需要的”引号是什么意思。

1.  我不希望它引用*所有内容*，只引用包含嵌入式逗号、引号和换行符的字段（引用所有内容是不必要的，并且会使我的文件更大），或者

2.  我不希望引用任何内容，并且我了解如果我的 CSV 包含嵌入的逗号、引号和换行符，它将无效

如果它是第一个选项，那么 opencsv 不支持这个 - 它要么引用所有内容，要么什么都不引用。如果您想要一个仅在必要时引用的开源 CSV 库（如果需要，也[可以引用所有内容](https://stackoverflow.com/q/10177293/1068649)），请查看[Super CSV](http://supercsv.sourceforge.net/)。

如果是第二种选择，那么请选择 Sheldon 的答案，但请注意，如果您的 CSV 包含嵌入的逗号、引号和换行符，它将无效。

例如，如果我正在阅读您的 CSV 文件，我怎么知道以下内容实际上只是包含 2 个字段的单个记录？

```
P Sherman, 42 Wallaby Way,
Sydney, AUSTRALIA 
```

而如果它被正确引用，那将是显而易见的，即

```
P Sherman, "42 Wallaby Way,
Sydney, AUSTRALIA" 
```

仅供参考，这是与[RFC4180](https://www.rfc-editor.org/rfc/rfc4180)（CSV 的 MIME 类型定义）中的引号相关的规则。

> **5** 每个字段可以用双引号括起来，也可以不用双引号（但是某些程序，例如 Microsoft Excel，根本不使用双引号）。如果字段没有用双引号括起来，则双引号可能不会出现在字段内。例如：
> 
> ```
>  "aaa","bbb","ccc" CRLF
>    zzz,yyy,xxx 
> ```
> 
> **6** 包含换行符 (CRLF)、双引号和逗号的字段应该用双引号括起来。例如：
> 
> ```
>  "aaa","b CRLF
>    bb","ccc" CRLF
>    zzz,yyy,xxx 
> ```
> 
> **7** 如果使用双引号将字段括起来，则出现在字段内的双引号必须通过在其前面加上另一个双引号来进行转义。例如：
> 
> ```
>  "aaa","b""bb","ccc" 
> ```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-04-08T00:11:56.010

如果您不希望生成的 CSV 文件的值中包含引号，则必须以这种方式创建 CSVWriter 对象：

```
CSVWriter writer = new CSVWriter(new FileWriter(filePath),
    CSVWriter.DEFAULT_SEPARATOR,
    CSVWriter.NO_QUOTE_CHARACTER,
    CSVWriter.DEFAULT_ESCAPE_CHARACTER,
    CSVWriter.RFC4180_LINE_END); 
```

关键是`CSVWriter.NO_QUOTE_CHARACTER`。您可以自定义其他构造函数参数的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-07T08:22:02.433

private void writeFile(String fileAbsolutePath , ListcsvLines) 抛出 IOException{

```
 final char csvDelimeter = ',';
    CSVWriter csvWriter = new CSVWriter(new FileWriter(new File(fileAbsolutePath)),csvDelimeter,CSVWriter
                                                                                               .NO_QUOTE_CHARACTER);
    CSVParser parser = new CSVParser();

    for(String csvLine  : csvLines){
        String[] csvVals = parser.parseLine(csvLine);
        csvWriter.writeNext(csvVals);
    }
    csvWriter.flush();
} 
```

调用：writeFile(fileAbsolutePath,csvLinesList);

Shamis 回答的工作示例，对我来说效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T07:23:29.843

我在打开 csv 时也面临同样的问题，并且为了解决我使用转义字符的问题。

例如：

```
CSVReader csvReader = new CSVReader(new FileReader(fileName), seprator,escaped_character); 
```

在这里打开的csv默认使用双引号作为escape_character（据我所知）

在我的情况下，我使用分隔符作为管道符号 (|)

A2|GAA|Thilina|9022V|1|2|3|4|"Rubasingha"|'Abc|MATARA"|'No'|2012|1668.88

在这里**“Rubasingha”**打开和关闭双引号，在**“No”**中也打开和关闭单引号。这两个在默认打开的 csv 中完美地工作

但是当我们使用**'Abc** - 只打开单引号 - 这也可以正常工作

但是**MATARA"**或**"MATARA** - 在这里我们有一个双引号 - 在我的情况下，这会在使用 open csv 读取 CSV 时产生错误

为了解决这个问题，我参考了这个页面（[http://cs.swan.ac.uk/~csbob/teaching/java/JavaDemoNetbeans/opencsv-2.3/doc/](http://cs.swan.ac.uk/~csbob/teaching/java/JavaDemoNetbeans/opencsv-2.3/doc/)）

有一些构造函数可以提供您自己的分隔符和引号字符。假设您使用制表符作为分隔符，您可以执行以下操作：

```
CSVReader reader = new CSVReader(new FileReader("yourfile.csv"), '\t'); 
```

如果你单引号你的转义字符而不是双引号，你可以使用三个 arg 构造函数：

```
CSVReader reader = new CSVReader(new FileReader("yourfile.csv"), '\t', '\''); 
```

如果您知道内容直到文件后面才开始，您也可以跳过文件的前几行。因此，例如，您可以通过执行以下操作跳过前两行：

```
CSVReader reader = new CSVReader(new FileReader("yourfile.csv"), '\t', '\'', 2); 
```

所以我将我的默认转义字符更改为 (^) 符号，而不使用双引号作为转义字符。

```
CSVReader csvReader = new CSVReader(new FileReader(fileName), '|','^'); 
```

这是我解决问题的方法。谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-06T12:41:44.277

我遇到的情况是，我的 .csv 文件中显示的数据两边各有三个引号。这是由于我的数据在 excel 中有引号。第二个我创建了一个 .csv 文件，我会打开以查看更多所需的报价。在网上经过大量搜索后，我找到了一些代码并进行了调整以适合我，如下所示：-

```
 Public Sub OutputQuotedCSV()
 Const QSTR As String = ""
 Dim myRecord As Range
 Dim myField As Range
 Dim nFileNum As Long
 Dim sOut As String

   nFileNum = FreeFile
   Open "TheNameOfYourFile.txt" For Output As #nFileNum
   For Each myRecord In Range("A1:A" & _
          Range("A" & Rows.Count).End(xlUp).Row)
      With myRecord
         For Each myField In Range(.Cells(1), _
             Cells(.Row, 256).End(xlToLeft))
           'I didn't want my Header Row touched but wanted it added into the csv file
           'There's probably an easier way but this worked perfectly for me
            If myField.Text = "HEADER 1" Then 
                        sOut = sOut & QSTR & _
                        Replace(myField.Text, QSTR, QSTR & QSTR) & "  "
                    ElseIf myField.Text = "HEADER 2" Then
                        sOut = sOut & QSTR & _
                        Replace(myField.Text, QSTR, QSTR & QSTR) & "  "
                    ElseIf myField.Text = "HEADER 3" Then
                        sOut = sOut & QSTR & _
                        Replace(myField.Text, QSTR, QSTR & QSTR) & "  "
                    ElseIf myField.Text = "HEADER 4" Then
                        sOut = sOut & QSTR & _
                        Replace(myField.Text, QSTR, QSTR & QSTR) & "  "
                    ElseIf myField.Text = "HEADER 5" Then
                        sOut = sOut & QSTR & _
                        Replace(myField.Text, QSTR, QSTR & QSTR) & "  "
                    ElseIf myField.Text = "HEADER 6" Then
                        sOut = sOut & QSTR & _
                        Replace(myField.Text, QSTR, QSTR & QSTR) & "  "
                    Else
               'I didn't want my first column to start with "," so I added the code below
                        If myField.Cells.Column = 1 Then
                            sOut = sOut & QSTR & _
                            Replace(myField.Text, QSTR, QSTR & QSTR) & QSTR
                        Else
                            sOut = sOut & "," & QSTR & _
                            Replace(myField.Text, QSTR, QSTR & QSTR) & QSTR
                        End If
                    End If
            Next myField
            Print #nFileNum, Mid(sOut, 1)
            sOut = Empty
        End With
    Next myRecord
    Close #nFileNum
End Sub 
```

此代码将去掉多余的引号，并在数据的开头和结尾只留下单引号。我希望这对某人有所帮助，如果我在格式上做错了什么或没有正确显示数据，请原谅我。我只是想帮助别人。请记住，这根本不是我的代码。我刚刚让它为我工作，我怀疑其他人正试图获得我在这里取得的成就。原始代码可以在这里找到[http://www.mcgimpsey.com/excel/textfiles.html#csvwithquotes](http://www.mcgimpsey.com/excel/textfiles.html#csvwithquotes)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-23T22:55:42.510

我遇到了同样的问题，并且在为开放 csv 库的 5.3 版实施解决方案后仍然发现了一些问题。

它将我需要转换为包含默认转义字符的 csv 文件的数据。因此，为了正确完成实施，我需要抑制转义字符。因此，如果您在 Libre office 或 Microsoft excel 中打开文件时由于出现转义字符而仍然遇到问题，请使用以下解决方案：

```
new CSVWriter(new FileWriter(path),
            CSVWriter.DEFAULT_SEPARATOR,
            CSVWriter.NO_QUOTE_CHARACTER,
            CSVWriter.NO_ESCAPE_CHARACTER,
            CSVWriter.DEFAULT_LINE_END    
        ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-01T09:01:59.693

在 5.4 版的 opencsv 上解决了我同样的问题：

```
CSVWriter writer = new CSVWriter(new FileWriter(file), ',',
                                             CSVWriter.NO_QUOTE_CHARACTER,
                                             CSVWriter.DEFAULT_ESCAPE_CHARACTER,
                                             CSVWriter.DEFAULT_LINE_END); 
```

# java - 用于多列排序的Java比较器？

> ID：13969270
> 
> 赞同：8
> 
> 时间：2012-12-20T09:47:03.267
> 
> 标签：java, sorting, javabeans, comparator

是否有任何 Java 开源比较器用于按多个字段比较 bean 以进行多列排序？每列可以按升序或降序排序。

对于单列排序，可以通过`org.apache.commons.beanutils.BeanComparator`与 一起使用来实现`org.springframework.util.comparator.InvertibleComparator`。

我知道这个功能写起来很简单，但是如果它已经被编写和测试过，那么重新发明轮子有什么好处呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T09:56:49.370

这是我几个月前写的。

```
public abstract class ChainedComparator<T> implements Comparator<T> {

    private Comparator<T> next;

    @Override
    public int compare(T o1, T o2) {
        int result = doCompare(o1, o2);
        if (result == 0) {
            if (getNext() != null) {
                return getNext().compare(o1, o2);
            }
        }

        return result;
    }

    public abstract int doCompare(T o1, T o2);

    public Comparator<T> getNext() {
        return next;
    }

    public void setNext(Comparator<T> next) {
        this.next = next;
    }
} 
```

只需从此类继承并覆盖 doCompare-Method。然后用 设置链中的下一个比较器`setNext()`。比较器越早出现在这个链中，它就越“重要”。

**编辑：**

另请参阅我发现的内容： http: [//commons.apache.org/collections/api-2.1.1/org/apache/commons/collections/comparators/ComparatorChain.html](http://commons.apache.org/collections/api-2.1.1/org/apache/commons/collections/comparators/ComparatorChain.html)

这是 apache commons 集合库的一部分，您可以[在此处下载](http://commons.apache.org/collections/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T05:22:31.980

JSorter 是 Java 中多列排序的另一个开源替代方案。[http://sourceforge.net/projects/jsorter/](http://sourceforge.net/projects/jsorter/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T15:00:19.213

我最近编写了一个比较器来对分隔的字符串记录中的多个字段进行排序。它允许您定义分隔符、记录结构和排序规则（其中一些是特定于类型的）。

所需信息以编程方式或通过 XML 文件植入 Comparator 本身。

XML 由包内嵌的 XSD 文件验证。例如，下面是一个制表符分隔的记录布局，有四个字段（其中两个是可排序的）：

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
<row xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <delimiter>&#009;</delimiter>

    <column xsi:type="Decimal">
        <name>Column One</name>
    </column>

    <column xsi:type="Integer">
        <name>Column Two</name>
    </column>

    <column xsi:type="String">
        <name>Column Three</name>
        <sortOrder>2</sortOrder>
        <trim>true</trim>
        <caseSensitive>false</caseSensitive>        
        <stripAccents>true</stripAccents>
    </column>

    <column xsi:type="DateTime">
        <name>Column Four</name>
        <sortOrder>1</sortOrder>
        <ascending>true</ascending>
        <nullLowSortOrder>true</nullLowSortOrder>
        <trim>true</trim>
        <pattern>yyyy-MM-dd</pattern>
    </column>

</row> 
```

然后你会像这样在java中使用它：

```
Comparator<String> comparator = new RowComparator(
              new XMLStructureReader(new File("layout.xml"))); 
```

图书馆可以在这里找到：

[http://sourceforge.net/projects/multicolumnrowcomparator/](http://sourceforge.net/projects/multicolumnrowcomparator/)

# apache - Apache - 无效命令“SSLMutex”

> ID：13969272
> 
> 赞同：33
> 
> 时间：2012-12-20T09:47:11.767
> 
> 标签：apache, mod-ssl

我正在将 Apache 版本从 2.0 升级到 2.4。安装 2.4 后，我遇到了以下问题。

```
Invalid command 'SSLMutex', perhaps misspelled or defined by a module not included in the server configuration
AH00526: Syntax error on line 77 of /apache/conf/ssl.conf: 
```

ssl.conf 中的第 77 行是`SSLMutex file:/apache/logs/ssl_mutex`.

我已经加载了 mod_ssl，并且我也加载了下面的 mod，但我仍然无法解决这个问题。

```
LoadModule authn_core_module modules/mod_authn_core.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule socache_dbm_module modules/mod_socache_dbm.so
LoadModule socache_shmcb_module modules/mod_socache_shmcb.so 
```

注意：如果我在 ssl.conf 文件中注释掉 SSLMutex 行，那么 Apache 正在工作，包括 SSL 端口。如果 SSLMutex 问题没有解决，恐怕会发生什么。请提出一些解决方案。

谢谢

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-26T09:25:11.667

将 SSLMutex 替换为

```
Mutex default 
```

SSLMutex 在 2.2 之后已被删除

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-25T13:35:52.997

除非您在 2.2 中有一些特定的互斥锁配置，否则只需注释掉这一行将提示 Apache 使用默认互斥锁机制。请参阅[将 2.2 升级到 2.4](http://httpd.apache.org/docs/current/upgrading.html)的文档和[互斥](http://httpd.apache.org/docs/current/mod/core.html#mutex)指令文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-24T04:13:03.950

如果您想要等效的 Apache SSL 配置，请使用：

```
Mutex file:/apache/logs/ssl_mutex 
```

ssl_mutex 是服务器本地驱动器上的一个目录，可由 Apache（httpd 进程）访问，不在全局可读目录中（例如不在 '/tmp' 中），也不在网络存储上（例如不是 NFS）。

参考： [Apache 核心功能](http://httpd.apache.org/docs/2.4/mod/core.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T01:01:38.210

对我来说，这很有效：

从 Apache 2.2 的配置更改：

```
/etc/apache2/mods-enabled/ssl.conf:

SSLMutex  file:${APACHE_RUN_DIR}/ssl_mutex 
```

到 Apache 2.4

至

```
Mutex  file:${APACHE_RUN_DIR} default 
```

# wpf - 由于 NullReferenceException 导致程序崩溃，并且没有人知道在哪里

> ID：13969278
> 
> 赞同：1
> 
> 时间：2012-12-20T09:47:25.823
> 
> 标签：wpf, visual-studio-2010, nullreferenceexception

我在 VS 2010 和 .net 4.0.3 ... SP1 下编码。在 C# 和 WPF 中

我的项目现在非常庞大，包括其他同事开发的 dll，所以我无法访问该东西的整个代码。

关键是我的程序几乎随机崩溃（在调试期间）声称未处理的 NullReferenceException。有几个线程同时移动，所以很难知道它发生在哪里。

我用谷歌搜索并在这里搜索，我发现人们说如果你去

```
Debug>Exceptions>Common Language RunTime Exceptions> System.NullReferenceException 
```

并将其设置为 Throw 而不是 User handle。它应该在发生空引用的地方停止，但它不会..

在运行时，我可以看到一些线程如何冻结（输出停止反映在 UI 中，但其他线程继续（它们确实在 UI 上执行更改），然后，在几秒钟后，由于未处理的 NRE，整个事情崩溃了。

没有 callStack 也没有代码可以调试，所以我有点卡在这里：S

这是我得到的所有帮助：

System.NullReferenceException 未处理消息：对象引用未设置为对象的实例。

有什么建议吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:52:12.020

使用 Visual Studio 的[IntelliTrace](http://msdn.microsoft.com/en-us/library/vstudio/dd264915.aspx)选项可以更好地调试和查找异常...
[启用 IntelliTrace](http://msdn.microsoft.com/en-us/library/vstudio/dd264944.aspx)并且程序在 Debug 中崩溃后，您可以使用 IntelliTrace 堆栈来查找异常的来源。

来自 MSDN

> IntelliTrace 记录这些类型的异常的异常类型和消息：
> 1\. 抛出和捕获异常的已
> 处理异常 2\. 未处理异常

# session-cookies - 加密操作期间发生错误（在 Thinktecture Identity Server 4.5 的最新版本中）

> ID：13969279
> 
> 赞同：0
> 
> 时间：2012-12-20T09:47:27.320
> 
> 标签：session-cookies, claims-based-identity, least-privilege

在创建 SessionCookies（FederatedAuthentication.SessionAuthenticationModule.WriteSessionTokenToCookie(sessionToken)）时，我在身份服务器 4.5（最新版本）中出现以下错误“在加密操作期间发生错误”如果我在配置文件中设置机器密钥设置，则经过大量研发，而不是 TempData将在应用程序中丢失。以下是堆栈跟踪详细信息：

异常信息：异常类型：CryptographicException 异常消息：加密操作期间发生错误。在 System.Web.Security.Cryptography.HomogenizingCryptoServiceWrapper.HomogenizeErrors（Func `2 func, Byte[] input) at BrockAllen.CookieTempData.CookieTempDataProvider.LoadTempData(ControllerContext controllerContext) in c:\ballen\github\CookieTempData\45\BrockAllen.CookieTempData\CookieTempDataProvider.cs:line 37 at System.Web.Mvc.TempDataDictionary.Load(ControllerContext controllerContext, ITempDataProvider tempDataProvider) at System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin（AsyncCallback 回调，对象状态，Int32 超时）在 System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult]（AsyncCallback 回调，对象状态，BeginInvokeDelegate开始委托，结束调用委托`1 endDelegate, Object tag, Int32 timeout) at System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) at System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) at System.Web.Mvc.MvcHandler.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) at System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) 在 System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) 在 System. Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication.ExecuteStep(IExecutionStep 步骤，布尔值&完成同步)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:41:26.627

重新安装身份服务器后，我得到了同样的错误。删除浏览器中的 cookie 对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:25:44.967

你能详细说明你做了什么导致这个异常吗？在我的测试中设置 <machineKey> 效果很好。此外，IdentityServer 问题跟踪器可能是解决这些问题的更好地方：

[https://github.com/thinktecture/Thinktecture.IdentityServer.v2/issues](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/issues)

# java - iText 将大表格嵌套在另一个表格的单元格内

> ID：13969286
> 
> 赞同：1
> 
> 时间：2012-12-20T09:47:52.613
> 
> 标签：java, pdf-generation, itextsharp, itext

在我使用 Itext 的 Java 项目中，我正在创建一个 pdf 文件，在此我在另一个表的单元格内插入一个更大的表。

当表格的内容大于一页时，我遇到了问题，表格被带到下一页。相反，我想要上一页中的部分数据，只有超出页面的数据需要转到下一页。

如何实现这一点，下面是我使用的代码。

```
 PdfPTable outerTable = new PdfPTable(2); 
        outerTable.setHeaderRows(1);
        outerTable.setSpacingBefore(20);
        outerTable.setWidthPercentage(100);

        Phrase str_head = new Phrase("Sample Image \n", subFont);
        Phrase act_head = new Phrase("Steps \n", subFont);

        PdfPCell cell2;
        cell2 = new PdfPCell(act_head); 
        outerTable.addCell(cell2); 

        cell2 = new PdfPCell(str_head);
        cell2.setBorder(Rectangle.NO_BORDER);
        outerTable.addCell(cell2);

       /* content row*/

        cell2 = new PdfPCell("-----Sample-------");
        cell2.setBorder(Rectangle.NO_BORDER);
        outerTable.addCell(cell2);

        PdfPTable innerTable = new PdfPTable(2);
        ---------------
        ---------------
        innerTable.add("XXX")//add more rows in so that page will overlow
        ---------------
        ---------------

        cell2 = new PdfPCell(innerTable);
        cell2.setBorder(Rectangle.NO_BORDER);
        outerTable.addCell(cell2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:23:02.193

如果我知道您使用的是哪个 itext 版本，那就很简单了。有两个属性`setSplitLate(false)`，`setSplitRows(true)`。所以你必须为这两个表设置这些属性。请参阅文档以了解更多信息。代码看起来更像：

```
outerTable.setSplitLate(false);
innerTable.setSplitLate(false);
outerTable.setSplitRows(true);
innerTable.setSplitRows(true); 
```

我很久以前在 itext 2.1.4 中使用过它。所以请检查您当前的版本是否支持这些。（*这就是我要求使用 itext 版本的原因*）

# facebook - 检查用户是否喜欢 Facebook 页面不再工作？

> ID：13969298
> 
> 赞同：0
> 
> 时间：2012-12-20T09:48:32.453
> 
> 标签：facebook, facebook-opengraph

我之前使用过这种方法来检查用户是否喜欢特定的 facebook 页面，但它现在似乎不起作用。

我找不到该功能的任何弃用通知：

> $checklike = "https://graph.facebook.com/".$user_id."/likes/".$page_id."&access_token=".$access_token;

任何想法为什么这不起作用？

# windows - 坏扇区的写入文件、读取文件代码错误

> ID：13969302
> 
> 赞同：2
> 
> 时间：2012-12-20T09:48:41.940
> 
> 标签：windows, winapi

我在 Windows 上使用`WriteFile`or`ReadFile`进行卷读/写。如果它试图在坏扇区上读取或写入，`WriteFile`返回的错误代码是什么？`ReadFile`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T22:50:01.207

底层[NTSTATUS](http://msdn.microsoft.com/en-us/library/cc704588.aspx)代码应为`STATUS_DEVICE_DATA_ERROR`(0xC000009C)：

> 硬盘上有坏块（扇区）。

这将[映射](http://support.microsoft.com/kb/113996)到`ERROR_CRC`(23)。

# hbase - 如何从 value 列的 hbase 表中获取最大值？

> ID：13969307
> 
> 赞同：0
> 
> 时间：2012-12-20T09:48:56.793
> 
> 标签：hbase

在这里，我试图获取最大值行及其值。代替标准迭代，我想知道是否存在任何功能

```
Scan s = new Scan();
ResultScanner re = table.getScanner(s);
int maxVal =0;         
try{
    for (Result rr = re.next(); rr != null; rr = re.next()) {
        byte [] row = rr.getRow();
        Get g = new Get(row);
        Result r = table.get(g);                   
        String rn = Bytes.toString(r.value());
        int temp = Integer.parseInt(rn);
        if(maxVal < temp)
        maxVal = temp;
    }
    System.out.println(maxVal);
}
finally {
    re.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:28:16.437

有一个 max() 方法，但它存在于“org.apache.hadoop.hbase.client.coprocessor”中。如果你对 co-procs 没问题，那么你可以试一试。它给出了给定范围内给定列族的列的最大值。您可以在此处将第一列和最后一列作为范围并获取最大值。有关这方面的详细信息，你可以去[这里](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/coprocessor/AggregationClient.html#max%28byte%5B%5D,%20org.apache.hadoop.hbase.coprocessor.ColumnInterpreter,%20org.apache.hadoop.hbase.client.Scan%29)

# python - 从字符串中获取 char 的十六进制值

> ID：13969310
> 
> 赞同：3
> 
> 时间：2012-12-20T09:49:04.590
> 
> 标签：python, python-3.x, hex

我目前在我的方法中获取一个字符串作为参数，我想提取 I 索引中的字符并获取它的十六进制值。目前我正在做：

```
temp = string[i]
binascii.hexlify(temp); 
```

但我得到一个错误：

```
TypeError: 'str' does not support the buffer interface 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:50:07.600

您需要将字符串编码为字节：

```
binascii.hexlify(temp.encode('ascii')); 
```

您需要选择一种合适的编码，一种可以正确表示您的文本的编码；我假设您的 Unicode 字符在此处的 0-127 范围内。

如果您编码为不同的编码，则结果将是该编码的十六进制表示。例如，UTF-8 将使用每个字符 1 到 6 个字节。

或者，您可以使用该[`ord()`函数](http://docs.python.org/3/library/functions.html#ord)并将结果格式化为十六进制：

```
format(ord(temp), 'x') 
```

它适用于任何 unicode 字符。它将使用 Unicode 代码点进行十六进制表示，因此在 1 到 4 个字节之间（后者用于`\Uabcdefgh`宽字符）。根据您的最大字符宽度，您可能需要填充字节以防止代码点不明确；假设您需要编码到代码点，`\uffff`那么您需要为*每个*代码点使用 2 个字节，或 4 个十六进制字符：

```
format(ord(temp), '04x') 
```

# time - 在 SFML 中移动精灵的概率看起来很慢（因为 sf::Clock）

> ID：13969316
> 
> 赞同：1
> 
> 时间：2012-12-20T09:49:38.290
> 
> 标签：time, sfml

我正在尝试 SFML 并正在创建经典游戏 Snake。

我已经成功地让蛇在一定时间后移动了一定数量的像素。问题是执行游戏循环需要不同的时间。所以当我写出每一步的不同时间时，它看起来像这样：

*   时间：0.273553
*   时间：0.259873
*   时间：0.260135
*   时间：0.396735
*   时间：0.258397
*   时间：0.262811
*   时间：0.259681
*   时间：0.257136
*   时间：0.266248
*   时间：0.412772
*   时间：0.260008

0.39 和 0.41 的凸点都不好。它们使蛇有时移动得更慢，而且看起来一点也不好看。

时间应始终为 0.25，以便蛇在屏幕上平稳运行。这是我在游戏循环中实现的代码（snake.getSpeed() 函数返回 4）：

```
 if(_clock.GetElapsedTime() > (1 / snake.getSpeed())){
        std::cout << "Time: " << _clock.GetElapsedTime() << std::endl;
        snake.changeDir(keyDown);       //Change direction
        snake.move();           //Move the snake
        _clock.Reset();
    } 
```

处理器只是变慢还是有人对如何使代码更好有其他想法？

编辑：忽略上述。实时保险杠似乎是作为 GetEvent 函数。不知道为什么，但是执行需要 0 到 0.2 秒。这是我的测试代码：

```
 //This is just i bit of code, therefore there's no ending brackets ;)
    _clock.Reset();
    while(_mainWindow.GetEvent(currentEvent)) {
        std::cout << _clock.GetElapsedTime() << std::endl;    //cout the elapsed time for GetEvent 
```

（_mainWindow 是一个 sf::RenderWindow）不知道这是否可以解决，但我没有回答这个问题，如果有人有想法，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T18:00:14.047

首先我建议你使用 SFML 2，因为 SFML 1.6 已经有 2.5 年没有维护了，有很多已知和丑陋的错误，并且缺少 SFML 2 的许多不错的功能。

接下来最好不要尝试强制某个帧速率，因为有一些因素无法真正做到这一点（操作系统中断，移动鼠标时的大量事件等），而是让移动取决于帧率。最简单的方法是使用[欧拉方法](https://en.wikipedia.org/wiki/Euler_method)：

```
pos.x = pos.x*velocity.x*dt 
```

其中`pos`是物体位置的`velocity`向量， 是二维速度的向量，`dt`是增量时间，即两帧之间的时间。不幸的是，简单的欧拉方法不是很精确，也许[Verlet 积分](https://en.wikipedia.org/wiki/Verlet_integration)可以提供更平滑的运动。

但这还不是全部，因为即使运动现在更紧密地绑定到帧速率，仍然会出现尖峰并导致不需要的效果。因此，最好修复您的时间步长，因此使用其 FPS（每秒帧数）计数的渲染与物理计算无关。还有很多方法可以解决这个问题，我发现一篇有用的文章[是](http://gafferongames.com/game-physics/fix-your-timestep/).

# php - 使用动作脚本 3 将文本字符串发布到服务器端文本文件

> ID：13969317
> 
> 赞同：2
> 
> 时间：2012-12-20T09:49:41.643
> 
> 标签：php, actionscript

我正在尝试修改[Storm Flash MP3](http://activeden.net/item/storm-mp3-player/115546?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=AerisT)播放器以记录播放/未播放歌曲的艺术家姓名和标题。如果出现 IO 错误，作者更新了播放器以跳过一首歌曲。我找到了下面的代码，它适用于播放的歌曲。出于某种原因，当我将它添加到 IOError 函数时，它根本不起作用。

我是 Flash 新手。任何帮助，将不胜感激。

```
//Record Played Song Info via PHP script
    scriptVars.var1 = "1+" + String(aMP3Tracks[iCurrTrack][1] + "+" + aMP3Tracks[iCurrTrack][2]);
    scriptVars.var2 = (scriptDate);
    scriptRequest.method = URLRequestMethod.POST;
    scriptRequest.data = scriptVars;
    scriptLoader.load(scriptRequest);
//End of Record Played Song Info via PHP script 
```

**播放功能**

```
function playMP3():void {
    tMP3Transform.volume = nCurrVolume;
    schMP3 = sMP3.play();
    schMP3.soundTransform = tMP3Transform;
    **//Record Played Song Info via PHP script
    scriptVars.var1 = "1+" + String(aMP3Tracks[iCurrTrack][1] + "+" + aMP3Tracks[iCurrTrack][2]);
    scriptVars.var2 = (scriptDate);
    scriptRequest.method = URLRequestMethod.POST;
    scriptRequest.data = scriptVars;
    scriptLoader.load(scriptRequest);
        //End of Record Played Song Info via PHP script**
    if(mcStormHolder.mcPlayBtn.currentFrame >= 20) {
    schMP3.stop();
}
        schMP3.addEventListener(Event.SOUND_COMPLETE, incrementTrack, false, 0, true);

    removeEventListener(Event.ENTER_FRAME, updateViz);
    bForceRandom = false;
    addEventListener(Event.ENTER_FRAME, updateViz, false, 0, true);
} 
```

**IOERROR 函数**

```
function onMP3IOError(e:IOErrorEvent):void {
    trace("An IO error occurred while attempting to load the MP3 track.");
    //sMP3.removeEventListener(Event.COMPLETE, onMP3Loaded);
    sMP3.removeEventListener(IOErrorEvent.IO_ERROR, onMP3IOError);
    sMP3.removeEventListener(SecurityErrorEvent.SECURITY_ERROR, onMP3SecurityError);
    //incrementTrack();
    mcStormHolder.mcInfoBar.txInfo.text = String(aMP3Tracks[iCurrTrack][1] + " - " + aMP3Tracks[iCurrTrack][2]);
    mcStormHolder.mcInfoBar.txInfo.autoSize = TextFieldAutoSize.LEFT;
    mcStormHolder.mcInfoBar.txInfo.x = 50;
    //Record Song if for songs that did not play
    scriptVars.var1 = "0+" + String(aMP3Tracks[iCurrTrack][0]);
    scriptVars.var2 = (scriptDate);
    scriptRequest.method = URLRequestMethod.POST;
    scriptRequest.data = scriptVars;
    scriptLoader.load(scriptRequest);
    //Record Song if for songs that did not play

    //Begin Modification for Roger Stull - Skip song if will not load
    abortLoad();
    bForceRandom = false;
    if (schMP3 != null) {
        schMP3.stop();
    schMP3.removeEventListener(Event.SOUND_COMPLETE, incrementTrack);
    nPausePos = 0;

    iCurrTrack = iCurrTrack + 1;
    if(iCurrTrack > iNumTracks-1){
        iCurrTrack = 0;
    }
    sMP3 = new Sound();
    schMP3 = new SoundChannel();
    loadMP3();
}
//End Modification for Roger Stull
} 
```

# ios - 取回对象键的 NSMutableDictionary 的值

> ID：13969332
> 
> 赞同：2
> 
> 时间：2012-12-20T09:50:41.810
> 
> 标签：ios, nsmutabledictionary

我有一个案例，我需要以`NSMutableDictionary`with`NSManagedObject`作为关键。

根据这篇[文章](https://stackoverflow.com/questions/1497622/nsmanagedobject-as-nsdictionary-key)，我可以`NSManagedObject`通过以下方式在字典中设置键： `[NSValue valueWithNonretainedObject:]`

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setObject:product forKey:[NSValue valueWithNonretainedObject:category]]; 
```

我怎样才能找回dict的价值？我再次尝试使用 NSValue ，但它没有描述就崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:55:48.720

尝试使用`[theValue nonretainedObjectValue]`

但是，如果您想经常访问键，字典可能不适合您。特别是如果您想要与对象和键建立某种反向关系（如果这就是您的意思，那就是取回 dict 的值）。

# objective-c - 为objective-c添加注释，就像我们对java-doc所做的一样

> ID：13969336
> 
> 赞同：1
> 
> 时间：2012-12-20T09:50:53.823
> 
> 标签：objective-c, javadoc

> **可能重复：**
> [Xcode 中 Objective-C 的类似 JavaDoc 的文档？](https://stackoverflow.com/questions/6225816/javadoc-like-documentation-for-objective-c-in-xcode)
> [如何用文档装饰 Objective C 方法？](https://stackoverflow.com/questions/12417435/how-to-decorate-objective-c-methods-with-documentation)

我是objective-c的新手。我想为我的方法添加一些注释，这样当我输入这些方法的名称并按 Ctrl - 空格键时，我可以在任何地方看到这些注释。这与我们使用 java 或 C# 所做的类似。请给我一些步骤来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:56:23.317

您可以使用[Appledoc](https://github.com/tomaz/appledoc)（请参阅此答案：[Xcode: show documentation for my custom classes](https://stackoverflow.com/questions/6958413/xcode-show-documentation-for-my-custom-classes)）

# android - 单击文本视图中的链接

> ID：13969338
> 
> 赞同：0
> 
> 时间：2012-12-20T09:50:59.617
> 
> 标签：android

我有文本视图，我想将文本设置为指向网站的链接，但问题是我无法点击：

```
 Grades = (TextView) findViewById(R.id.textView9);
                    Grades.setText(Html.fromHtml(course.getString(TAG_Grade)));

                Grades.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        WebView webView; webView.setWebViewClient(new WebViewClient()
                        {

                        }webView.loadUrl(course.getString(TAG_Grade)); }); 
```

和xml：

```
<TextView 
    android:id="@+id/textView9"
    android:layout_marginLeft="110dp"
    android:layout_marginTop="365dp"
    android:textColor="#000"
    android:textSize="14sp"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:autoLink="web"
    android:onClick="onClick"
/> 
```

知道`course.getString(TAG_Grade)`会从 db 获取 url 但它不起作用

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:54:08.707

用过这个`android:clickable="true"`

```
<TextView 
    android:id="@+id/textView9"
    android:layout_marginLeft="110dp"
    android:layout_marginTop="365dp"
    android:textColor="#000"
    android:textSize="14sp"
    android:clickable="true"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     android:autoLink="web"
     android:onClick="onClick"
/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:56:03.663

*单击视图后*，您尝试对其进行链接，从 onClick 中删除了链接。

* * *

你走错路了。

试试这个：

```
String userCanSeeThis = "Your Website Name";
String url = course.getString(TAG_Grade);

TextView grades = (TextView) findViewById(R.id.textView9);
grades.setText(userCanSeeThis);

addLinks(Grades, userCanSeeThis, url); 
```

使用这个辅助方法：

```
 /**
     * @param textView
     *            textView who's text you want to change
     * @param linkThis
     *            a regex of what text to turn into a link
     * @param toThis
     *            the url you want to send them to
     */
    public static void addLinks(TextView textView, String linkThis, String toThis) {
        Pattern pattern = Pattern.compile(linkThis);
        String scheme = toThis;
        android.text.util.Linkify.addLinks(textView, pattern, scheme, new MatchFilter() {
            @Override
            public boolean acceptMatch(CharSequence s, int start, int end) {
                return true;
            }
        }, new TransformFilter() {

            @Override
            public String transformUrl(Matcher match, String url) {
                return "";
            }
        });
    } 
```

此外，如果您`onClickListener`在代码中设置了，那么您的 XML 中`grades.setOnClickListener`就不需要`android:onClick=""`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T09:54:03.740

而不是使用`Linkify`我更喜欢下面的行：

```
 Html.fromHtml(course.getString(TAG_Grade)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T10:02:18.797

```
TextView myWebSite = new TextView(this);
myWebSite .setText("http://www.google.com/");
Linkify.addLinks(myWebSite , Linkify.WEB_URLS); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T10:04:55.970

您已经收到了足够多的有关 Linkify 的答案，但您的代码中还有一个细微的错误爬网：

您将属性 his 误认为是 an`android:onClick`的方法：`onClick``View.onClickListener`

该属性的`android:onClick`工作方式如下：

> 单击视图时要在此视图的上下文中调用的方法的名称。此名称必须对应于只采用一个 View 类型参数的公共方法。例如，如果您指定 android:onClick="sayHello"，则必须声明您的上下文（通常是您的 Activity）的 public void sayHello(View v) 方法。

至于`onClick`-interface提供的-method `View.onClickListener`：

```
view.setOnClickListener(...) 
```

> 注册在单击此视图时要调用的回调。如果此视图不可点击，则它变为可点击。

这将允许您覆盖该功能：

```
public abstract void onClick (View v) 
```

单击视图时调用它。

# visual-studio - 错误 40：类型整数未使用命名空间或别名限定

> ID：13969342
> 
> 赞同：1
> 
> 时间：2012-12-20T09:51:01.100
> 
> 标签：visual-studio, entity-framework, integer, int, edmx

好的，这既是一个问题，也是一个解决方案。我在部署一个非常简单地使用 linq 和 EF 来查询几个 DB2 表并将结果显示到 datagridview 的解决方案时遇到了问题。它在开发机器上运行良好，但在我尝试的另外两台机器上，我会得到“错误 40：类型整数不符合命名空间或别名。”

在尝试了两天的各种解决方案后，我决定尝试在另一台机器上进行调试。

开发机器是带有 Visual Studio 2010 的 Windows XP。部署机器都是带有 VS 2010 的 Windows 7。

好吧，我立即注意到在部署机器上，VS 会给我一个错误列表（整数不合格等），这些错误没有显示在我的开发机器上。接下来我注意到的是，当我双击解决方案中的 .edmx 文件时，它以 xml 格式打开，而不是我正在使用的表格的可视显示。

在这个 xml 中，每个具有“整数”类型的属性/表列都带有下划线。嗯，这没有意义。这个 VS2010 不能识别其他 VS2010 自动生成的数据类型吗？出于绝望，我将“Type='integer'”的每个实例都更改为“Type='int'”它像魅力一样在所有3台机器上调试并运行。

所以，我的问题是：1）这是两个开发环境（XP 与 W7）之间存在的错误，还是我的开发环境设置不正确？2) 在我的 XP 机器上，如何在 xml 视图中编辑我的 .edmx 文件？是否可以在 VS 中使用，还是必须使用文本编辑器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:04:49.503

您的 edmx 是否有一个包含文件，它定义了您的开发机器上的“整数”类型（或框架版本的差异）？当您切换到 int 时它会起作用，因为它是原始类型并且不需要定义。我只先完成了代码，所以这对我来说不是一个优势，但我认为你的错误信息给了你一个很好的提示。其他两个环境的 edmx（或包含文件）中没有对象整数的定义。在您的开发机器上，我认为这必须以下列形式存在：

1.  edmx/include 文件中某处的整数对象的定义
2.  在这些相同文件中的某处整数的别名为 int
3.  另一个版本的 .NET 可以识别开箱即用的整数？

# jquery - jquery导航在活动更改颜色和背景颜色上不起作用

> ID：13969344
> 
> 赞同：0
> 
> 时间：2012-12-20T09:51:11.210
> 
> 标签：jquery, asp.net, master-pages

我正在制作一个具有 master > submaster > page.aspx 的网站，我希望如果任何用户单击导航栏中的链接，它会更改该特定链接的颜色以及更改背景颜色，我的导航位于 submaster 页面中，我使用过 jquery 但它不起作用，在页面加载时它消失了。

```
$(document).ready(function () {
    $('#HomeLink').click(function () {
        $('#HomeLink').css("background-color","white");
        $('#HomeLink').css("color","#00AEEC");
    });
});

<div id="UpperMenu">
                <h2><a href="#">Horizon</a></h2>
                <ul>
                    <li><a href="Home.aspx"><div id="HomeLink"><span class="NavLink">Home</span></div></a></li>
                    <li><a href="#"><div id="NewLink"><span class="NavLink">New</span></div></a></li>
                    <li><a href="#"><div id="LookupLink"><span class="NavLink">Lookup</span></div></a></li>
                    <li><a href="Reports.aspx"><div id="ReportLink"><span class="NavLink">Report</span></div></a></li>
                    <li><a href="#"><div id="ManageLink"><span class="NavLink">Manage</span></div></a></li>
                    <li><a href="#"><div id="UtilitiesLink"><span class="NavLink">Utilities</span></div></a></li>
                </ul>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:03:07.243

而不是有两个引用#homelink 试试这个

```
$(document).ready(function () {
$('#HomeLink').click(function () {
    $('#HomeLink').css({
                    background-color : '#FFF',
                    color : '#00AEEC'
     });  
}); 
```

您应该能够一次性运行它，而不是运行两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:54:30.953

也许 HomeLink 的颜色被其他 css 属性覆盖，你能在这里显示你的 html 和 css 代码吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:00:21.173

您的代码中的一切看起来都很好，但您可以通过这种方式简化：

在您的编辑中，我刚刚看到了您的 html `div has <span>`，`these are the children of <a>`因此您可以做两件事：

1.  更改 a 的文本颜色
2.  更改跨度的背景

    ```
    $('#HomeLink').click(function() {
       $(".NavLink",this).css("background-color", "red");
       $(this).closest('a').css("color", "white");
    }); 
    ```

并`make sure you have a reference to the jQuery plugin`在此脚本的顶部。

你可以在这里测试它：http: [//jsfiddle.net/5WSuv/1/](http://jsfiddle.net/5WSuv/1/)

# javascript - 查询。$.post request .done() .fail() 避免代码重复

> ID：13969345
> 
> 赞同：7
> 
> 时间：2012-12-20T09:51:10.927
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

我有一个发布请求，例如

```
 $.post("test", {
    ajax: "true",
    action: ""
  }).done(function(data){
    if (data == "ok"){
        //xxx
    } else if (data == "err"){
        //yyy
    }
  }).fail(function(){
    //yyy
  }); 
```

如果 .done() 方法中的代码（注释 'yyy'）与失败方法中的代码相同（注释 'yyy'），如何避免发布请求中的代码重复？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T09:53:16.803

最明显和最简单的解决方案是简单地有一个失败回调，如下所示：

```
function ajaxFailed() {
    // yyy
}

$.post("test", {
    ajax: "true",
    action: ""
}).done(function(data){
    if (data == "ok"){
        //xxx
    } else if (data == "err"){
        ajaxFailed();
    }
}).fail(ajaxFailed); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T10:11:44.660

您可以使用[always](http://api.jquery.com/jQuery.ajax/)回调方法，请求将始终进入该块。如您所知，何时数据包含错误而不包含错误，此方法适用于服务器端错误。您可以通过定义最后的 else 块来捕获客户端错误。

```
$.post("test", {
    ajax: "true",
    action: ""
}).always(function(data){
    if (data == "ok"){
        //xxx
    } else if (data == "err"){
        //handle server-side errors
    } else {
        //handle client-side errors like 404 errors
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:54:06.663

让他们调用相同的函数，例如

```
function onErr() { 
    //yyy
}
$.post("test", {
    ajax: "true",
    action: ""
}).done(function(data){
    if (data == "ok"){
        //xxx
    } else if (data == "err"){
        onErr();
    }
}).fail(onErr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:09:49.337

另一种方法是稍微更改协议，并使用[HTTP 状态代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)来指示成功或失败：

```
if($sqlError){
  header("HTTP/1.1 503 Service unavailable");
} 
```

...

```
.done(function(){
   //xxx
}).fail(function(){
   //yyy
}); 
```

# android - HoloEverywhere + ListPreference = 崩溃

> ID：13969347
> 
> 赞同：2
> 
> 时间：2012-12-20T09:51:12.863
> 
> 标签：android, android-preferences, listpreference, android-holo-everywhere

我一直在努力`ListPreference`与 HoloEverywhere 合作。我在一个 XML 文件中定义了我的设置。我`holo`为属性使用了命名空间。与首选项相关的所有内容都使用`org.holoeverywhere`包中的类，因此问题出在其他地方。

当我`ListPreference`在我的应用程序中单击时会出现问题。该首选项应打开一个对话框，其中包含可供选择的选项。相反，它崩溃了，给了我以下堆栈跟踪：

```
12-20 09:42:59.363: E/AndroidRuntime(3005): FATAL EXCEPTION: main
12-20 09:42:59.363: E/AndroidRuntime(3005): java.lang.NullPointerException
12-20 09:42:59.363: E/AndroidRuntime(3005):     at org.holoeverywhere.ArrayAdapter.createViewFromResource(ArrayAdapter.java:204)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at org.holoeverywhere.ArrayAdapter.getView(ArrayAdapter.java:250)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.AbsListView.obtainView(AbsListView.java:2267)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.ListView.onMeasure(ListView.java:1156)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.View.measure(View.java:15172)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at org.holoeverywhere.widget.LinearLayout.measureChildWithMargins(LinearLayout.java:233)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.View.measure(View.java:15172)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at org.holoeverywhere.widget.LinearLayout.measureChildWithMargins(LinearLayout.java:233)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.View.measure(View.java:15172)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.View.measure(View.java:15172)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.View.measure(View.java:15172)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.View.measure(View.java:15172)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.View.measure(View.java:15172)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1075)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.Choreographer.doFrame(Choreographer.java:525)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.os.Handler.handleCallback(Handler.java:615)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.os.Looper.loop(Looper.java:137)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at java.lang.reflect.Method.invokeNative(Native Method)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at java.lang.reflect.Method.invoke(Method.java:511)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-20 09:42:59.363: E/AndroidRuntime(3005):     at dalvik.system.NativeStart.main(Native Method) 
```

我目前正在使用 a ，但是当我尝试直接在using`PreferenceFragment`中添加首选项时会发生完全相同的事情。`PreferenceActivity``addPreferencesFromResource(int)`

列表首选项 (XML) 本身：

```
 <ListPreference
        holo:defaultValue="false"
        holo:dialogTitle="@string/sett_inet_access_dial"
        holo:entries="@array/sett_inet_access_names"
        holo:entryValues="@array/sett_inet_access_values"
        holo:key="@string/keysett_inet_access"
        holo:summary="@string/sett_inet_access_summ"
        holo:title="@string/sett_inet_access_name" /> 
```

我还想补充一点，我的所有 ListPreference 项目（我有多个）都会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:02:47.690

好的。我已经想通了。

事实证明。HoloEverywhere 1.4.0 中有一个错误。该问题已报告并修复： [https ://github.com/ChristopheVersieux/HoloEverywhere/issues/203](https://github.com/ChristopheVersieux/HoloEverywhere/issues/203)

不幸的是，该修复尚未合并到 HE GitHub 项目的主分支。它静静地坐在开发分支上，很可能等待下一个版本......

因此，如果你和我有同样的问题，那么你应该使用 dev 分支，或者 fork 存储库并选择[这个](https://github.com/ChristopheVersieux/HoloEverywhere/commit/80804dffca0c9bbd64227fb12dbf31873786f339#library/src/org/holoeverywhere/ArrayAdapter.java)提交到你的 master 分支。

不过，样式未正确应用于对话框的问题仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:09:52.283

查看[源代码](https://github.com/ChristopheVersieux/HoloEverywhere/blob/master/library/src/org/holoeverywhere/ArrayAdapter.java)：

```
 private View createViewFromResource(int position, View convertView,
        ViewGroup parent, int resource) {
    View view;
    TextView text;
    if (convertView == null) {
        view = FontLoader.apply(mInflater.inflate(resource, parent, false));
    } else {
        view = convertView;
    }
    try {
        if (mFieldId == 0) {
            text = (TextView) view;
        } else {
            text = (TextView) view.findViewById(mFieldId);
        }
    } catch (ClassCastException e) {
        Log.e("ArrayAdapter",
                "You must supply a resource ID for a TextView");
        throw new IllegalStateException(
                "ArrayAdapter requires the resource ID to be a TextView", e);
    }

    T item = getItem(position);
    if (item instanceof CharSequence) {
        text.setText((CharSequence) item);
    } else {
        text.setText(item.toString());
    }
    return view;
} 
```

看来textView为null，并没有从布局中解决

# javascript - Javascript 函数的输出是 Rails 函数的输入 - 依赖

> ID：13969350
> 
> 赞同：0
> 
> 时间：2012-12-20T09:51:18.190
> 
> 标签：javascript, ruby-on-rails, dependencies

我想在我的表中查找相关标签的内容。但是标签是由 javascript 函数返回的，因此当我尝试评估 Find(tag_id) 因为 rails 首先在 javascript 代码之前评估其代码时，我的函数的输入变为`{%= file.tag %}`

以下代码是我表的一部分：

```
<td class="title"><span>Tag:  <%= Tag.find("{%= file.tag  %}")%></span></td> 
```

我收到以下错误：

> 找不到 id={%= file.tag %} 的标签

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:52:55.273

你不能。

Rails在 JavaScript*之前*运行，因为 Rails 在服务器上运行，一旦完成，它就会发送到执行 JavaScript 的客户端。

您必须重新设计它以完全在服务器上进行标记搜索，或者您的 JavaScript 必须回调服务器以通过 AJAX 调用查找标记。

# c# - 为什么我的链接按钮虽然是通过更新面板触发的，但仍会完整回发

> ID：13969353
> 
> 赞同：1
> 
> 时间：2012-12-20T09:51:20.850
> 
> 标签：c#, asp.net, ajax, updatepanel, linkbutton

我有以下情况：

一个`link button`通过`AsyncPostBackTrigger`.but 触发的完整回帖！

* * *

```
<asp:LinkButton ID="lbtnShowNotes" runat="server" CssClass="blue" OnClick="lbtnShowNotes_Click"> <img src="images/document_notes.png"/>notes</asp:LinkButton>

  <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>
                    <asp:Panel ID="pnlNotes" runat="server" Visible="false">
                        <asp:Label ID="lbl_title" runat="server" Text="الملاحظات"></asp:Label>
                        <asp:TextBox ID="txt_Coments" runat="server" Columns="70" Rows="5" TextMode="MultiLine"></asp:TextBox>
                        <asp:LinkButton ID="lbtnOkNotes" runat="server"><img src="images/tick.png" alt=""/></asp:LinkButton>
                        <asp:LinkButton ID="lbtnCancelNotes" runat="server" CausesValidation="False" OnClick="lbtnCancelNotes_Click"><img src="images/tick.png" alt=""/></asp:LinkButton>
                    </asp:Panel>
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="lbtnShowNotes" EventName="Click" />
                </Triggers>
            </asp:UpdatePanel> 
```

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-04T02:16:40.610

ClientIDMode 更改

ASP.NET 4 中的 ClientIDMode 设置允许您指定 ASP.NET 如何为 HTML 元素生成 id 属性。在以前版本的 ASP.NET 中，默认行为等同于 ClientIDMode 的 AutoID 设置。但是，默认设置现在是可预测的。

如果您使用 Visual Studio 2010 从 ASP.NET 2.0 或 ASP.NET 3.5 升级您的应用程序，该工具会自动将设置添加到 Web.config 文件，以保留早期版本的 .NET Framework 的行为。但是，如果您通过将 IIS 中的应用程序池更改为面向 .NET Framework 4 来升级应用程序，则 ASP.NET 默认使用新模式。要禁用新的客户端 ID 模式，请在 Web.config 文件中添加以下设置：

```
<pages ClientIDMode="AutoID" /> 
```

或在您的页面指令中添加 ClientIDMode="AutoID"。

[http://www.asp.net/whitepapers/aspnet4/break-changes](http://www.asp.net/whitepapers/aspnet4/breaking-changes)

[UpdatePanel 中 ListView 中的 LinkBut​​ton 导致完全回发](https://stackoverflow.com/questions/5652728/linkbutton-in-listview-in-updatepanel-causes-full-postback)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-26T04:29:43.917

添加`ClientIDMode="AutoID"`我的页面指令解决了我的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T10:02:45.077

`UpdatePanel`将'[`UpdateMode`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx)更改为“有条件的”。

```
<asp:UpdatePanel UpdateMode="Conditional" ID="UpdatePanel1" runat="server"> 
```

`UpdatePanel`如果`UpdateMode`属性设置为，则会更新`Conditional`，并且出现以下情况之一：

*   显式调用 UpdatePanel 控件的 Update 方法。
*   回发是由使用控件**的 Triggers 属性定义为触发器**的`UpdatePanel`控件引起的。在这种情况下，控件显式触发面板内容的更新。该控件可以位于定义触发器**的 UpdatePanel 控件内部或外部。**
*   ...

# android - 如何检查小部件是否在android中的后台

> ID：13969356
> 
> 赞同：0
> 
> 时间：2012-12-20T09:51:32.640
> 
> 标签：android, service, android-widget, widget, android-service

我正在开发火炬。我用一个按钮开发了小部件。如果单击该按钮，它将打开手电筒，如果再次单击，它将关闭手电筒。但是当手电筒打开并且用户按下电源按钮关闭屏幕时，它也会关闭手电筒。所以我想检查手电筒打开时设备是否进入睡眠模式，有人可以帮我吗？

这是我在小部件中打开和关闭手电筒的代码

```
public void onReceive(Context context, Intent intent) {
    Log.d("torchWidget", "onReceive");
    final String action = intent.getAction();
    if(AppWidgetManager.ACTION_APPWIDGET_DELETED.equals(action)) {
        final int appWidgetId = intent.getExtras().getInt(
                AppWidgetManager.EXTRA_APPWIDGET_ID,
                AppWidgetManager.INVALID_APPWIDGET_ID);
        if(appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
            this.onDeleted(context, new int[] { appWidgetId });
        }
    } else{

        if(intent.getAction().equals(ACTION_WIDGET_RECEIVER)) {
            String msg = "null";
            try{
                msg = intent.getStringExtra("msg");
                msg = "Flash Turned On";
            } catch(NullPointerException e) {
                Log.e("Error", "msg = null");
            }
            if(Constants.isFlashOnWidget){
                Constants.isFlashOnWidget = false;
                Toast.makeText(context, "Flash turned OFF", Toast.LENGTH_SHORT).show();

                 Intent serviceIntent = new Intent(context.getApplicationContext(),
                         BackgroundService.class);

                        context.stopService(serviceIntent);

            } else {   
                Constants.isFlashOnWidget = true;
                 Intent serviceIntent = new Intent(context.getApplicationContext(),
                         BackgroundService.class);

                        context.startService(serviceIntent);

            }

        }
        super.onReceive(context, intent);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:15:20.583

[PowerManager](http://developer.android.com/reference/android/os/PowerManager.html#isScreenOn%28%29)系统服务的检查`isScreenOn()`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:18:08.153

您的应用程序或小部件是否可以保存并稍后检查其状态`savedInstanceState()`，如关于恢复活动的 android 文档[http://developer.android.com/training/basics/activity-lifecycle/recreating.html](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)所述？

# gradle - svnant的嵌套复制任务在gradle中不能工作

> ID：13969364
> 
> 赞同：1
> 
> 时间：2012-12-20T09:52:14.983
> 
> 标签：gradle

我是 gradle 和 groovy 的新手，现在我尝试在我的 subversion 存储库上设置一个标签。下面是我的gradle脚本：

```
task svnrev {
    // use ant to retrieve revision.
    ant.taskdef(resource: 'org/tigris/subversion/svnant/svnantlib.xml') {
        classpath {
            fileset(dir: 'lib/DEV/svnant', includes: '*.jar')
        }
    }
    ant.svn(javahl: 'false', svnkit: 'true', username: "${_svn_user}", password: "${_svn_password}", failonerror: 'false') {
        ant.info(target: "${_svn_source_url}", propPrefix: 'svninfo')
    }
    // retrieve property of ant project and assign it to a task's property, refer to:
    // http://gradle.1045684.n5.nabble.com/can-t-find-or-extract-properties-from-svnant-info-function-in-gradle-td3335388.html
    ext.lastRev = ant.getProject().properties['svninfo.lastRev']
    // retrieve property of gradle project
    //getProject().properties['buildFile']
    }

task svntag << {
    ant.svn(javahl: 'false', svnkit: 'true', username: "${_svn_user}", password: "${_svn_password}", failonerror: 'false') {
        copy(srcurl: "${_svn_source_url}", desturl="${_svn_tag_url}", message="Create tag: ${_svn_tag_url}")
    }
} 
```

任务“svnrev”正常工作，但是当运行“gradle svntag”时，我经常收到一条错误消息：

```
* What went wrong:
A problem occurred evaluating root project 'AFM-IGPE-v2.0.0'.
> Could not find method copy() for arguments     [{srcurl=svn://192.168.2.9/IGPE/trunk_dev}, svn://192.168.2.9/IGPE/tag/AFM, Create tag: svn://192.168.2.9/IGPE/tag/AFM] on root project 'AFM-IGPE-v2.0.0'. 
```

我也试过

```
ant.copy(srcurl: "${_svn_source_url}", desturl="${_svn_tag_url}", message="Create tag: ${_svn_tag_url}") 
```

这次显示了不同的错误消息：

```
* What went wrong:
A problem occurred evaluating root project 'AFM-IGPE-v2.0.0'.
> No signature of method: org.gradle.api.internal.project.DefaultAntBuilder.copy() is applicable for argument types: (java.util.LinkedHashMap, org.codehaus.groovy.runtime.GStringImpl, org.codehaus.groovy.runtime.GStringImpl) values: [[srcurl:svn://192.168.2.9/IGPE/trunk_dev], ...]
Possible solutions: any(), notify(), wait(), grep(), every(), find() 
```

事实上，我只是简单地将我的 ant build.xml 转换为 gradle，我的 ant build.xml 运行良好。我用谷歌搜索了一段时间，但没有找到结果。请帮助并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:26:37.590

乍一看，我可以发现两个问题：

1.  它必须是`task svnrev << {`，不是`task svnrev {`。
2.  Groovy 命名参数是用 a 编写的`:`，而不是 a `=`。（后者改为将默认值分配给位置参数。）这可能就是您得到错误的原因（您在 and 之间混合和`ant.copy`匹配）。`:``=`

# silex - 为用户提供者创建服务

> ID：13969366
> 
> 赞同：-1
> 
> 时间：2012-12-20T09:52:14.653
> 
> 标签：silex

我根据[以下链接使用自定义 userProvider 创建了一个自定义用户类](http://symfony.com/doc/current/cookbook/security/custom_provider.html#index-0)

我无法为用户提供者创建服务。

```
$app->setParameter(
    'webservice_user_provider.class',
    'Tac\WebserviceUserBundle\Security\User\WebserviceUserProvider'
);
$app->setDefinition(
    'webservice_user_provider',
    new Definition('%webservice_user_provider.class%')
); 
```

> 致命错误：在第 119 行的[http://content.api.com/Users/davyd/Sites/content_api/src/boot.php](http://content.api.com/Users/davyd/Sites/content_api/src/boot.php)中调用未定义的方法 Silex\Application::setParameter()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:57:16.010

Silex 不是 Symfony2 框架，因此 Symfony2 的文档不适用。

查看[http://silex.sensiolabs.org/doc/services.html](http://silex.sensiolabs.org/doc/services.html)以获取有关如何在 Silex 中定义服务的文档。

```
$app['some_service'] = $app->share(function () {
    return new Service();
}); 
```

# iphone - 为什么 CLLocationManager 总是返回 true？

> ID：13969368
> 
> 赞同：1
> 
> 时间：2012-12-20T09:52:19.417
> 
> 标签：iphone, ios, mkmapview, cllocationmanager, viewdidload

我正在使用`[CLLocationManager locationServicesEnabled]`功能来获取位置服务是否启用的状态。我将代码保留在`viewDidLoad`方法中。

```
if(![CLLocationManager locationServicesEnabled])
{
    NSLog(@"No");
}
else
{
    NSLog(@"Yes");
} 
```

当我第一次运行这个应用程序时，它会返回`Yes`。为什么？它应该返回我`No`。当我没有选择“允许”或“不允许”选项时就是这种情况。表示我既不允许也不不允许，但`viewDidLoad`我得到了`Yes`.

现在我选择“不允许”并再次加载相同的`viewController`. 这时候至少它应该还给我`No`，但我还是得到了`Yes`。为什么？

这么多的混乱`CLLocationManager`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:56:13.617

`locationServicesEnabled`返回是否在设置中启用了定位服务。如果在设置中启用，则此函数`YES`一直返回。

从[文档](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/clm/CLLocationManager/locationServicesEnabled)

> **locationServicesEnabled**
> 
> 返回一个布尔值，指示是否在设备上启用了位置服务。
> 
> **讨论**
> 
> 用户可以通过在一般情况下切换定位服务开关来从设置应用程序启用或禁用定位服务。
> 
> 您应该在开始位置更新之前检查此方法的返回值，以确定用户是否为当前设备启用了位置服务。如果此方法返回 NO 并且您仍然开始位置更新，Core Location 框架会提示用户确认是否应重新启用位置服务。

用户是否允许/拒绝应用程序权限（在警报视图中）不影响此方法的返回值。

如果您想知道用户是否已授予应用程序访问位置的权限，您可以使用[authorizationStatus](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/clm/CLLocationManager/authorizationStatus)。

# asp.net-mvc - 这可能是什么加密？

> ID：13969370
> 
> 赞同：-3
> 
> 时间：2012-12-20T09:52:20.543
> 
> 标签：asp.net-mvc, encryption

我有一个看起来像**YB[Xf`lbt+glo**

用于加密此字符串的加密是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:44:42.490

我有点不同意所有的负面评论。虽然更多的数据当然会有所帮助，但仍然很有可能根据示例字符串中的长度和字符集做出有根据的猜测。我的一些想法：

*   该样本与传统的 DES crypt(1) 哈希具有相同的长度，尽管是意外字符。可能是带有一些自定义输出字符集的 DES crypt(1) 散列。可能性不大，但有可能。
*   样本可以是 base85/ascii85 编码，即 80 位的原始数据。这是一个相当不寻常的尺寸。理论上，它可以是摘要大小为 80 位或更长并缩短为 80 位的散列函数的输出，或者是块大小为 80 位的块密码（例如 REDOC）的输出。更有可能的是流密码。
*   部分数据可能是盐或 IV，假设 base85 它可以相当合理地是 16 位 IV 和 64 位密文块。
*   它可能只是 80 位随机数据​​，例如会话标识符。

这就是我认为可以从上面的示例中合理挤出的所有内容。不多，但这是一个开始。我们需要其他数据和信息来判断什么是或多或少的可能性，并确认或排除一些可能性。

* * *

（发布解决方案后编辑）

对于那些感兴趣的人，这是如何使用打包的 JS 代码中的代码解码编码的字符串并在例如 spidermonkey 或 ideone.com 中运行它：

```
function R(t) {
    var f = "";
    for (var d = 0; d < t.length; d++) {
        f += String.fromCharCode(t.charCodeAt(d) ^ (1 + (t.length - d) % 32));
    }
    return f;
}
print(R("YB[Xf`lbt+glo")); 
```

它返回：

```
WOWSlider.com 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:54:03.683

只是用谷歌搜索那个字符串，然后你会发现它是一个加密的 javascript

这里出现：

[http://pastebin.com/tTAL1ft0](http://pastebin.com/tTAL1ft0)

下次，请提供更多信息，您从哪里得到这个字符串

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T09:56:44.393

严格来说，这可以通过任何数量的加密方法创建。

如果您知道来源，您可能可以根据他们的技术堆栈进行一些侦探工作，但仅凭该字符串就无法确定。

# android - 多张图片上传

> ID：13969372
> 
> 赞同：1
> 
> 时间：2012-12-20T09:52:23.413
> 
> 标签：android, image, upload

我的问题是我想一次发布多个图像，从 Android 设备到服务器，具有下面代码中描述的参数格式，但服务器只读取一个参数。

注意：我认为服务器在 foreach 循环中捕获它，我无法控制服务器端。

```
bab = new ByteArrayBody(data, "carpic" 
    + (Utility.upload_imageBitMap.size() - 1) + ".jpg");

Utility.reqEntity.addPart("image[]", bab);
Utility.reqEntity.addPart("image[]", bab); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:01:21.470

```
Utility.reqEntity.addPart("image", bab); 
```

# mysql - 如何锁定一个表并在 mysql 中创建另一个表

> ID：13969373
> 
> 赞同：1
> 
> 时间：2012-12-20T09:52:24.963
> 
> 标签：mysql

我有架构迁移代码，它使用数据库表 (MIGRATIONS) 来记录在架构上运行了哪些迁移。在将新迁移运行到架构中时，代码会锁定表，因此集群中的其他实例也不能执行迁移，检查需要运行哪些迁移并运行它们。我使用这个 sql 锁定 MIGRATIONS 表：

```
lock tables migration_log write; 
```

如果我的一个迁移最终创建了一个表，我会收到以下错误：

```
Table 'tbl_name' was not locked with LOCK TABLES 
```

我读到，一旦您发出 LOCK TABLES 语句，您就只能处理该语句中提到的表。

所以，底线：如何在 mysql 中锁定一个表，同时创建另一个表？

如果做不到这一点，您能否建议另一种方法来实现我想要实现的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:08:05.667

你真的需要锁定整张桌子吗？也许只是行锁定就足够了？

[http://lists.mysql.com/cluster/4467](http://lists.mysql.com/cluster/4467)

# tfs - 防止其他用户在 TFS 2010 中获取文件？

> ID：13969375
> 
> 赞同：1
> 
> 时间：2012-12-20T09:52:29.297
> 
> 标签：tfs

TFS 2010 中是否有一种方法可以防止其他用户对仅可用于构建过程的配置文件进行获取？每个用户都应该在自己的工作站上拥有自己的文件版本。

BR

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:12:48.227

有几种方法可以做到这一点。

1.  您可以让每个开发人员在他们的工作空间中“隐藏”文件。
    *   打开源代码管理资源管理器并选择“WorkSpace”下拉菜单
    *   选择“工作区”
    *   点击编辑按钮
    *   在屏幕底部的“工作文件夹”区域中添加一个新行，状态应为“隐藏”并且“源代码管理文件夹”应指向您要忽略的文件夹或文件（您只能导航到“向导”中的文件夹，但您可以手动添加文件）
2.  使用安全权限
    *   导航到源代码管理资源管理器中的文件
    *   右键单击文件并选择“属性”
    *   选择“安全”选项卡
    *   取消选中“继承安全设置”复选框
    *   删除包含您的开发人员的组（通常是 [Team Project]\Contributors 组）

这些方法的缺点 1\. 开发人员必须在他们使用的每台机器\工作空间上执行此操作。2\. 开发者可能会不小心尝试签入文件，这会导致错误。

如果你两者都做，那么你会缓解开发人员意外检查文件的问题，因为它会被隐藏，但你仍然会遇到每个开发人员需要在每个工作区中设置隐藏文件的问题。

或者，作为构建过程的一部分，您可以将文件的“特殊”版本签入到源代码控制中的不同位置，并将其复制到正确的位置（覆盖开发人员签入的任何内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:27:56.537

您可以从源代码安全选项卡授予权限。您必须在全局组中添加个人或组，然后您可以从安全选项卡中授予任何权限！

# c - 结构/联合中的 X 和 X 类型有何不同？

> ID：13969381
> 
> 赞同：-1
> 
> 时间：2012-12-20T09:52:41.407
> 
> 标签：c, casting

考虑以下代码：

```
struct blah {
    int x;
    int y;
};

struct foo {
    union {
        struct {
            struct blah *b;
        };
    };
};

int main()
{
    struct foo f;
    struct blah *b;

    // Warning on below assignment
    b = &f.b;
    return 0;
} 
```

`assignment from incompatible pointer type`尽管 LHS 和 RHS 属于同一类型（显然），为什么 GCC 会生成警告？IOW，`struct blah`嵌套在里面时会发生什么变化`struct foo`？

如果这里有一个有效的警告，它是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:55:11.003

`b = &f.b;`尝试将 a 分配`blah**`给`b`。`b = f.b;`改为使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:58:15.163

```
struct blah {
    int x;
    int y;
};

struct foo {
    union {
        struct {
            struct blah b;
        };
    };
}; 
```

您正在引用`b`它已经是一个指针。

# android - Android 项目中的 ArrayAdapter

> ID：13969387
> 
> 赞同：0
> 
> 时间：2012-12-20T09:53:02.547
> 
> 标签：android

> **可能重复：**
> [用于列表视图自定义布局的适配器](https://stackoverflow.com/questions/9878548/adapter-for-a-custom-layout-of-listview)

```
ArrayAdapter<String> adapter = null;
JSONArray productsList = null;
try {
    productsList = obj5.getJSONArray("Content");
} catch (JSONException e2) {
    e2.printStackTrace();
}

if(productsList != null){
    ListView lv = (ListView) findViewById(android.R.id.list);

    for (int i=0; i<productsList.length(); i++) {

    final String[] items = new String[productsList.length()]; 

    String product = null;

    try {       
        product = productsList.getJSONObject(i).getString("Quantity")+" X "+
            productsList.getJSONObject(i).getString("Name") +"         "+
            Currency.britishPound+productsList.getJSONObject(i).getString("MinCost");
    } catch (JSONException e) {
        e.printStackTrace();
    }

    if(product!=null){                  
        items[i]=product;                       
    }

    adapter = new ArrayAdapter<String>(APIQuickCheckout.this, R.layout.product_item, R.id.label, items);

    lv.setAdapter(adapter);
} 
```

这是我的列表视图：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_margin="5dip"
    android:layout_weight="30">
</ListView> 
```

这就是我如何分别通过每个产品。

```
<?xml version="1.0" encoding="utf-8"?>
<!--  Single List Item Design -->
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/label"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dip"
    android:textSize="16sp"
    android:textStyle="bold" >
 </TextView> 
```

现在，根据上述代码，我将传递给每一行的只是一个简单的字符串。但是，我想知道如何传递三个不同的字符串。我想传递三个不同的字符串的原因是我希望它们采用以下格式：

```
Quantity X 
Number                          Price(this should be at the end of the line) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:04:31.340

您必须从适配器派生，并提供正确填充的视图。像这儿：

[https://github.com/ko5tik/camerawatch/blob/master/src/de/pribluda/android/camerawatch/CameraAdapter.java](https://github.com/ko5tik/camerawatch/blob/master/src/de/pribluda/android/camerawatch/CameraAdapter.java)

为了获得更好的性能，请考虑：

*   重用提供给 getView() 方法的视图#
*   利用 viewHolder 模式保存 getViewById() 分辨率

# jquery - jqplot tickOptions 格式字符串选项

> ID：13969390
> 
> 赞同：7
> 
> 时间：2012-12-20T09:53:12.383
> 
> 标签：jquery, jqplot

我对网络开发非常陌生。我发现令人沮丧的`axesRendererDefaults`是`jqplot`.

根据此[链接](http://www.jqplot.com/docs/files/jqplot-axisTickRenderer-js.html#%24.jqplot.AxisTickRenderer.formatString)：

指定刻度如何出现在轴（X 或 Y）上的方式将由`formatString: ''`选项指定的内容决定。

有哪些选项可供`formatString`选择？在`jqplot`页面上给出的教程中，它们传递了诸如`%d`：`$%d`和`%n`. 如何找到可用选项的完整列表？

这些格式化选项是否独立于`jqplot`并且实际上是 的属性`jQuery`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T18:17:29.913

格式命令与 sprintf 函数的格式命令相似（如果不相同）。

一个不错的参考是[http://perldoc.perl.org/functions/sprintf.html](http://perldoc.perl.org/functions/sprintf.html)

例如 yaxis: { tickOptions: {formatString: '%.2f'} }

将输出一个浮点数到小数点后 2 位。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T12:04:07.330

[http://www.jqplot.com/docs/files/plugins/jqplot-dateAxisRenderer-js.html](http://www.jqplot.com/docs/files/plugins/jqplot-dateAxisRenderer-js.html)

> 可接受的格式代码有：
> 
> ```
> Code    Result                  Description
>             == Years ==
> %Y      2008                Four-digit year
> %y      08                  Two-digit year
>             == Months ==
> %m      09                  Two-digit month
> ... 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-20T18:28:29.923

根据官方文档：[https](https://github.com/jqPlot/jqPlot/) ://github.com/jqPlot/jqPlot/上一节：​​“JavaScript printf/sprintf 函数”，jqplot 使用“sprintf for JS”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T03:55:29.240

我相信 formatString 与 Highcharts 使用的相同，并且是 PHP 的 strftime 函数的子集。这是关于它的 Highcharts[文档](http://api.highcharts.com/highcharts#Highcharts.dateFormat%28%29)的链接。

# ftp-client - FileZilla 连接超时，连接服务器时出错

> ID：13969391
> 
> 赞同：4
> 
> 时间：2012-12-20T09:53:12.290
> 
> 标签：ftp-client, filezilla, request-timed-out

我在使用 FileZilla 时遇到问题，当我尝试访问我的 FTP 帐户时，我得到了这个：

```
Status: Connecting to xxx.xxx.xxx.xxx:xx (Ip adds:port)
Error:  Connection timed out
Error:  Could not connect to server
Status: Waiting to retry...
Status: Connecting to (Ip adds:port)
Error:  Connection timed out
Error:  Could not connect to server 
```

**直到昨天**，这一切都很好。它**可以在另一台电脑上运行**，但现在**不能在**我**的电脑**上运行。我尝试禁用 Windows 防火墙（因为我使用的是 Windows 8 操作系统）。此外，我完全重新安装了 FileZilla，但仍然没有这样做。还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-29T09:20:13.553

我从另一台笔记本电脑连接到互联网，共享互联网连接。所以出现了问题，它限制了访问端口。当我直接连接到互联网时，问题就解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-16T13:05:56.033

我有一个类似的问题。原来我使用了不正确的协议来登录 ftp 服务器。ftp 服务器是 ssh 保护的。选择 SFTP 选项而不是 FTP 对我有用。

[https://vincent254.wordpress.com/2015/03/16/what-to-do-incase-you-get-this-filezilla-connection-error/](https://vincent254.wordpress.com/2015/03/16/what-to-do-incase-you-get-this-filezilla-connection-error/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-24T06:01:47.427

您可能需要以这种格式编写主机

> ftp.example.com

如果您也遇到以下错误，这也有效

> ECONNREFUSED - 服务器拒绝连接

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-10-25T13:18:33.343

更改您的 Internet 连接，然后连接 FileZilla

谢谢

# xcode - XCode 中的语言

> ID：13969392
> 
> 赞同：2
> 
> 时间：2012-12-20T09:53:14.517
> 
> 标签：xcode

我即将开始学习如何使用 XCode 进行编程。我已经在学校学习了半年的 Java 课程，并将在接下来的 2 年内继续学习。

就我对 XCode 的研究而言，它看起来只是使用了 Objective C，乍一看，它在语法方面与 Java 完全不同。另一方面看C，看起来更像Java。

现在我想知道，是否可以使用 XCode 在 C 中编写 iOS 应用程序？它肯定会减轻我的学习曲线，而不必在新语言之上学习全新的语法。

编辑：如果确实有可能，使用 C 而不是（似乎受到鼓励？）Objective-C 会有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:00:16.447

首先欢迎进来`XCode`。

XCode 只是一个 IDE。现在，无论您想学习 iOS 还是 MacOS 应用程序，都由您来决定。

如果你对 C 有很好的了解，我建议你对 C++ 或 Java 等面向对象的语言有一定的了解。然后你就会对 Objective-C 感到满意。

Objective-C 是一门语言，是 C 的超集，所以没有太多的想法认为只需要一天的学习就可以看到从 C 到 Obj-C 的转换。

而Obj-C语言制作了名为“Cocoa”的框架，它是基于ios和mac的开发的核心。这将需要一些时间，但请注意，您将获得数以千计的 API，这些 API 比您从“C”中制作和使用的内容更容易使用和记住。

你可以参考很多网站，我想和你分享我的学习过程。

* * *

您可以关注这些，即使我开始使用这些[资源](https://stackoverflow.com/questions/13575037/what-are-resources-for-learning-objective-c/13577666#13577666)进行学习。

1.  斯坦福讲座 CS193

2.  琳达的视频

3.  Aaron Hillegas 的 Mac OS X 的 Cocoa 编程

4.  Cocoadevcentral.com

5.  最后一个当然是 Stack Overflow……这是解决你所有疑惑的最佳场所。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:59:00.083

您可以使用 C 有效地编写大部分应用程序，但是当您与 iOS SDK（与设备通信的部分）交互时，您将需要使用 obj-c。Objective-c 真的不难学，不要害怕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:56:32.447

您绝对可以用 C 编写代码。Objective-C 是一种由定义包装的 C 语言。

但是，我建议学习 Objective-C。这允许您使用面向对象的原则编写代码。这方面有很多在线教程。

# mysql - 在mysql中获取每个子表的10个项目

> ID：13969394
> 
> 赞同：6
> 
> 时间：2012-12-20T09:53:24.553
> 
> 标签：mysql, sql

我有一个表格类别 ( `id`, `cat_nam`e) 和一个表格食谱 ( `id`, `cat_id`, `recipe_text`)。

现在我想编写一个查询，从每个类别中获取 10 个食谱。

```
SELECT cat_name, recipe_text 
FROM categories c 
JOIN recipes r ON c.id=r.cat_id 
```

将获取所有食谱，但我希望每个类别最多 10 个食谱。

（如何）可以用 SQL 查询来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:57:13.993

取自[mySQL 返回每个类别的前 5 名](https://stackoverflow.com/questions/4729406/mysql-returning-the-top-5-of-each-category)：

```
SELECT cat_name, recipe_text
FROM
(
   SELECT c.cat_name AS cat_name, r.recipe_text AS recipe_text,
      @r:=case when @g=c.id then @r+1 else 1 end r,
      @g:=c.id
   FROM (select @g:=null,@r:=0) n
   CROSS JOIN categories c
   JOIN recipes r ON c.id = r.cat_id
) X
WHERE r <= 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:58:55.023

```
SET @num :=0, @cat_id := '';

SELECT recipe_text,cat_name,
       @num := if(@cat_id = cat_id, @num + 1, 1) as row_number,
       @cat_id := cat_id as cat_id
FROM recipes r
JOIN categories c ON c.id = r.cat_id
group by cat_name,recipe_text
having row_number <= 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:57:04.750

这对你有用...

```
 SET @rank = 0;
   SELECT cat_name,recipe_text  FROM (SELECT 
                  id,cat_id AS P,recipe_text,
                  CASE
                  WHEN @rowdata != pid 
                  THEN @rank := 0 & @rowdata := cat_id 
                  ELSE @rank := @rank + 1 
                  END AS rank 
                  FROM
                  recipes  
                  GROUP BY cat_id,
                   id 
                   ) X ,t
                   WHERE X.rank <= 3 AND X.p = t.cat_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:49:07.753

你可以试试下面的代码

```
function recipe($cat_id='',$new_ar=array())
{
    if($cat_id!="")
    {
        $new_ar1=array();
        $db="select recipe_text from recipes where cat_id=".$cat_id." order by cat_id limit 10";
        $sq=mysql_query($db);
        while($fe=mysql_fetch_object($sq))
        {
            array_push($new_ar1,$fe->recipe_text);
        }
        return $new_ar1;
    }
    else
    {
        $db="select id,cat_name from categories order by id";
        $sq=mysql_query($db);
        while($fe=mysql_fetch_object($sq))
        {
            array_push($new_ar,$fe->cat_name);

            $new_ar[$fe->id]=array($fe->cat_name);

            array_push($new_ar[$fe->id],recipe($fe->id,$new_ar));
        }
    }

}

recipe();

it will give output like below

Array
(
    [0] => cat 1
    [1] => Array
        (
            [0] => cat 1
            [1] => Array
                (
                    [0] => rice
                    [1] => curry
                    [2] => mutton
                    [3] => A recipe
                    [4] => B recipe
                    [5] => C recipe
                    [6] => D recipe
                    [7] => E recipe
                    [8] => F recipe
                    [9] => G recipe
                )

        )

    [2] => Array
        (
            [0] => cat 2
            [1] => Array
                (
                    [0] => dal
                    [1] => fish
                )

        )

    [3] => Array
        (
            [0] => cat 3
            [1] => Array
                (
                )

        )

    [4] => Array
        (
            [0] => cat 4
            [1] => Array
                (
                )

        )

)

Thanks
Ripa Saha 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T10:57:30.323

试试下面的 SQL

```
select 
cat_name,
recipe_text 
from categories as c,recipes as r 
where c.id=r.cat_id limit 10 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T12:01:32.877

我们最后做了一个存储过程：

```
DELIMITER $$

CREATE PROCEDURE `test`()
BEGIN
  DECLARE done INT DEFAULT FALSE;
  DECLARE cur_id INT;
  DECLARE cur CURSOR FOR
  SELECT id FROM category;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

  CREATE TABLE tmp(catname VARCHAR(255), recipeId INT);

  OPEN cur;

  the_loop: LOOP 
    FETCH cur INTO cur_id;

    IF done THEN
      LEAVE the_loop;
    END IF;

    INSERT INTO tmp(catname, recipeId) 
      SELECT catname, recipeId 
      FROM category c LEFT JOIN recipes r ON c.id=r.cat_Id 
      WHERE c.id=cur_id
      LIMIT 0, 10;
  END LOOP;

  SELECT * FROM tmp;
  DROP TABLE tmp;
END 
```

# android - 如何让 TileOverlay 覆盖被覆盖地图的文本？

> ID：13969395
> 
> 赞同：0
> 
> 时间：2012-12-20T09:53:24.980
> 
> 标签：android, android-maps, google-maps-api-2

我有一个应用程序，它使用旧的谷歌地图 API 并在地图上添加一个图层以在地图上显示我自己的更精确的地图。

我正在尝试使用 TileOverlay 在 API v2 中执行此操作，但谷歌地图的文本显示在我的图块上。

这里有 2 个屏幕截图，一个带有地图，一个带有叠加层的地图（仅基于 API 演示）我尝试向瓷砖添加一个大的 Z-Index 没有任何结果。

有没有办法用自定义图块真正覆盖地图？

![谷歌地图](../Images/39133a748bedb77b1ca5d1693866d5cc.png) ![带有月球覆盖的谷歌地图](../Images/023a03261093653e030a800c1e13c08f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:13:17.497

您一直看到标签的原因是，在谷歌地图 v2 中，标签是在本地呈现的，而不是作为平铺位图的一部分。这样做的好处是，您可以旋转地图，并且仍然拥有不旋转的标签，以便于阅读。

**解决方案**

到目前为止，我知道的唯一解决方案是使用`setMapType(MAP_TYPE_NONE)`. 但是，这可能会产生不希望的效果，即同时禁用未被叠加层覆盖的地图部分。

问候。

# windows-phone-7 - windows phone 8 中的捏缩放功能

> ID：13969400
> 
> 赞同：6
> 
> 时间：2012-12-20T09:53:36.873
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-7.1, windows-phone-8

从这篇[文章](https://stackoverflow.com/questions/13720032/pinch-and-zoom-behaviour-for-windows-phone)中，我了解到存在一些用于实现捏合和缩放功能的平台改进。通过使用这种新方法（`ManipulationDeltaEventArgs.PinchManipulation`），我如何在 windows phone 中实现捏缩放功能。

除此之外，我还需要为图像控件实现滚动功能。在我当前的实现中，我正在使用 Toolkit（手势监听器）以及滚动查看器来实现捏合和缩放功能，现在看起来滚动和捏合事件是重叠的，因此它会产生糟糕的用户体验。

谁能帮我在我的应用程序中解决这个问题。我正在寻找一些帮助我实现功能的代码示例。

我不希望得到多点触控行为（codeplex）作为答案。项目中使用的程序集相当陈旧，我听说他们中的许多人正因为如此而面临市场提交的问题。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-24T23:02:57.257

正如我在[之前的回答](https://stackoverflow.com/questions/13720032/pinch-and-zoom-behaviour-for-windows-phone)中所说，如果您正在构建一个 WP8 专有应用程序，您可以使用新的[ManipulationDeltaEventArgs.PinchManipulation](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.input.manipulationdeltaeventargs.pinchmanipulation%28v=vs.105%29.aspx)来实现捏合和缩放效果。下面是如何使用[ManipulationDeltaEventArgs.PinchManipulation](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.input.manipulationdeltaeventargs.pinchmanipulation%28v=vs.105%29.aspx)数据来缩放、移动和旋转图像的基本示例。

首先，我们将创建一个悬停在网格中间的基本图像：

```
<Grid x:Name="ContentPanel">
    <Image Source="Assets\Headset.png" 
           Width="200" Height="150"
           ManipulationDelta="Image_ManipulationDelta"
           x:Name="img"
           >
        <Image.RenderTransform>
            <CompositeTransform CenterX="100" CenterY="75" />
        </Image.RenderTransform>
    </Image>
</Grid> 
```

接下来，我们将处理 ManipulationDelta 事件，检查它是否是 Pinch Manipulation 并在我们的 UIElement 上应用正确的 Silverlight 转换。

```
private void Image_ManipulationDelta(object sender, ManipulationDeltaEventArgs e)
{
    if (e.PinchManipulation != null)
    {
        var transform = (CompositeTransform)img.RenderTransform;

        // Scale Manipulation
        transform.ScaleX = e.PinchManipulation.CumulativeScale;
        transform.ScaleY = e.PinchManipulation.CumulativeScale;

        // Translate manipulation
        var originalCenter = e.PinchManipulation.Original.Center;
        var newCenter = e.PinchManipulation.Current.Center;
        transform.TranslateX = newCenter.X - originalCenter.X;
        transform.TranslateY = newCenter.Y - originalCenter.Y;

        // Rotation manipulation
        transform.Rotation = angleBetween2Lines(
            e.PinchManipulation.Current, 
            e.PinchManipulation.Original);

        // end 
        e.Handled = true;
    }
}

// copied from http://www.developer.nokia.com/Community/Wiki/Real-time_rotation_of_the_Windows_Phone_8_Map_Control
public static double angleBetween2Lines(PinchContactPoints line1, PinchContactPoints line2)
{
    if (line1 != null && line2 != null)
    {
        double angle1 = Math.Atan2(line1.PrimaryContact.Y - line1.SecondaryContact.Y,
                                   line1.PrimaryContact.X - line1.SecondaryContact.X);
        double angle2 = Math.Atan2(line2.PrimaryContact.Y - line2.SecondaryContact.Y,
                                   line2.PrimaryContact.X - line2.SecondaryContact.X);
        return (angle1 - angle2) * 180 / Math.PI;
    }
    else { return 0.0; }
} 
```

这是我们所做的：

*   **缩放：** PinchManipulation 实际上为我们跟踪缩放，所以我们所要做的就是将 PinchManipulation.CumulativeScale 应用于缩放因子。
*   **变换：** PinchManipulation 跟踪原始中心和新中心（在两个接触点之间计算）。通过从旧中心中减去新中心，我们可以知道 UIElement 需要移动多少并将其应用于平移变换。请注意，这里更好的解决方案还可以通过跟踪此代码没有的累积原始中心来解决多个操作会话。
*   **旋转：**我们计算出两个触摸点之间的角度并将其应用为旋转变换。更多关于此诺基亚 wiki 文章@Windows [Phone 8 地图控件的实时旋转](http://www.developer.nokia.com/Community/Wiki/Real-time_rotation_of_the_Windows_Phone_8_Map_Control)

以下是一些显示此代码运行良好的打印屏幕：

![未触动的图像](../Images/d0a67d9b61d9038628032ca9ab38323f.png) ![旋转、变换和缩放的图像](../Images/59162e1edf6dc15151e0014ca9f2b7a4.png) ![旋转、变换和缩放的图像](../Images/284c1ceb9091f26f16745b64a8eae5ee.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-17T00:39:53.120

我找到了平滑捏缩放和平移的完美解决方案。它实际上是以下链接中的 Microsoft 代码示例 [http://code.msdn.microsoft.com/wpapps/Image-Recipes-0c0b8fee](http://code.msdn.microsoft.com/wpapps/Image-Recipes-0c0b8fee)

我只是将它用作样板代码，它创造了奇迹。

干杯

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-21T06:02:19.070

如果你想自己动手，你可能想看看这篇关于 Silverlight 中捏拉缩放的文章：[在 Silverlight 中正确实现捏拉缩放](http://www.frenk.com/2011/03/windows-phone-7-correct-pinch-zoom-in-silverlight/)

Telerik 还有一个开箱即用的平移和缩放图像控制，但确实要花钱：[Telerik Pan and Zoom Control](http://www.telerik.com/products/windows-phone/overview/all-controls/panandzoom.aspx)

# regex - jquery中的电子邮件验证验证js导致ie 8挂起

> ID：13969401
> 
> 赞同：0
> 
> 时间：2012-12-20T09:53:37.813
> 
> 标签：regex, jquery-plugins

当我们添加这样的长邮件 ID 时，jquery validate 中给出的电子邮件验证导致 Internet Explorer 8 浏览器挂起

A@ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXyz

返回 this.optional(element) || /^[a-zA-Z0-9]+([_.-]?[a-zA-Z0-9]+) *@[a-zA-Z0-9]+([.-]?[a- zA-Z0-9]+)* (\.[a-zA-Z]{2,4})+$/i.test(value);

为了避免这种情况，可能会做出哪些改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:00:02.797

```
<input type = "email" name="email" /> 
```

这会起作用

# http - 分块传输和多部分 http

> ID：13969403
> 
> 赞同：2
> 
> 时间：2012-12-20T09:53:42.023
> 
> 标签：http

在 HTTP 请求和响应范例中：是否可以对多部分 HTTP 消息使用分块传输编码？如果没有为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:57:54.987

对的，这是可能的。为什么你认为不是？

# c# - 摘要泛型和摘要列表

> ID：13969405
> 
> 赞同：3
> 
> 时间：2012-12-20T09:53:50.033
> 
> 标签：c#, .net-3.5

我没有在现有问题中找到我的用例，所以我开始了。我有一个具有这样的泛型的抽象类：

```
public abstract class aParameter<T>
{
    private T _parameter;

    public T Parameter
    {
        get { return _parameter;}
    }

    ...
} 
```

然后我有这样的“类型”类：

```
public class IntParameter : aParameter<Int32>
{
    public IntParameter(Int32 value)
    {
        _parameter = value;
    }
}

 public class TextParameter : aParameter<String>
{
    public TextParameter(String value)
    {
        _parameter = value;
    }
} 
```

现在在我的应用程序代码中，我想用抽象泛型类创建一个字典，而不指定泛型类型。像这样 ：

```
...
private Dictionary<Int32, aParameter> _paramDict = new Dictionary<Int32, aParameter>();
... 
```

在以前的版本中，我使用接口而不是抽象类，`aParameter`但我想将它迁移到抽象，以便我可以简化我的“类型”类，而不是为每个“类型”重复相同的代码。

这里有什么想法吗？

**编辑**

我忘了提到它将是一个库的一部分，该库旨在在公司之间分发，所以我真的需要保护允许的类型。我不能允许只是`objects`被输入我的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T09:58:44.373

您可能仍然需要非泛型接口（或如 Brandon 所说的非泛型抽象基类），除非您开始使用对象。

原因是它`aParameter<String>`与类型不同，`aParameter<int32>`因此如果没有帮助，您将无法将它们放入一本字典中。

我首选的方法是声明一个非泛型接口并将其用作字典的基础，然后在每个类型化的泛型以及抽象基类中实现它。这样，您可以在可能的情况下从基类继承，或者如果您的一种类型需要从其他类型继承，则只需实现接口 - 您可以获得最大的灵活性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T09:58:56.517

创建一个非泛型抽象基类并让你的泛型抽象类继承它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:16:23.323

泛型类型的目的是（除其他外）您只能编写一次可用于多种类型的代码。然而，由于 C# 是强类型，编译器需要知道它在泛型类中处理的类型。这就是为什么您必须指定泛型的类型（即尖括号中的类型）如果您不指定泛型的类型，那么在您的示例中，编译器将不知道 Parameter 属性的类型。

根据您正在做什么，有许多可能的方法：

1.  使用`Dictionary<int, object>`. 在读取值时，您可以使用一堆 if/else 来检查对象的特定类型并转换为适当的类型。例如

    if(obj.GetType() == typeof(TextParameter)) { TextParameter p = obj as TextParameter // 做事 } else if obj.GetType() == typeof(IntParameter)) { IntParameter p = obj as IntParameter // 做东西 }

2.  有多个字典。`Dictionary<int, TextParameter>`,`Dictionary<int, IntParameter>`等。

3.  如果 aParameter 中有不依赖于类型的方法/属性，则将它们移动到较低级别的非泛型抽象类。这可以为您提供至少一些功能，而无需求助于类型转换。

# vb.net - 在不关闭 SQL 阅读器的情况下关闭 SqlConnection - 是否会导致连接泄漏

> ID：13969406
> 
> 赞同：3
> 
> 时间：2012-12-20T09:53:52.017
> 
> 标签：vb.net, connection, memory-leaks, sqldatareader, sqlconnection

我一直在使用 SQLDataReader 从数据库中获取一些数据。一旦我将阅读器与连接一起使用，我将仅关闭连接，而不是阅读器。我们是否有任何连接泄漏的可能性

这是我正在使用的代码

```
 Public Sub Get_SomeData(ByVal sCon As String,ByRef ObjectToReturn As SomeClass)
        Dim sqlCon As SqlConnection = New SqlConnection(sCon)
        Dim sqlR As SqlDataReader = Nothing
        Dim sqlCmd As SqlCommand = New SqlCommand
        sqlCmd.CommandType = CommandType.StoredProcedure
        sqlCmd.Connection = sqlCon
        sqlCmd.CommandText = "get_SomeData"
        sqlCon.Open()
        sqlR = sqlCmd.ExecuteReader(CommandBehavior.CloseConnection)
        If sqlR.HasRows And sqlR.Read Then
            ObjectToReturn.Property1 = sqlR("Column1").ToString
            ObjectToReturn.Property1 = sqlR("Column1").ToString
            ObjectToReturn.Property1 = sqlR("Column1").ToString
            ObjectToReturn.Property1 = sqlR("Column1").ToString
        End If
        sqlCon.Close()
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:00:12.000

不，关闭连接就足够了，但更好的方法是通过[Using](http://msdn.microsoft.com/en-US/library/htd05whh%28v=vs.100%29.aspx)语句

```
 Using sqlCon = New SqlConnection(sCon)
        Dim sqlR As SqlDataReader = Nothing
        Using sqlCmd = New SqlCommand
            sqlCmd.CommandType = CommandType.StoredProcedure
            sqlCmd.Connection = sqlCon
            sqlCmd.CommandText = "get_SomeData"
            sqlCon.Open()
            Using sqlR = sqlCmd.ExecuteReader()
                If sqlR.HasRows And sqlR.Read Then
                    ObjectToReturn.Property1 = sqlR("Column1").ToString
                    .......
               End If
            End Using
       End Using
  End Using 
```

MSDN 文档中关于使用的重要部分

> 有时您的代码需要非托管资源，例如文件句柄、COM 包装器或 SQL 连接。Using 块保证在您的代码使用完这些资源时处理一个或多个此类资源。这使它们可供其他代码使用。
> 
> 托管资源由 .NET Framework 垃圾收集器 (GC) 处理，无需您进行任何额外编码。托管资源不需要 Using 块。但是，您仍然可以使用 Using 块来强制处置托管资源，而不是等待垃圾收集器。

# file - 将 sed 输出分配给文件中的变量时，echo 不同

> ID：13969413
> 
> 赞同：1
> 
> 时间：2012-12-20T09:54:18.840
> 
> 标签：file, bash, shell, sed, echo

我正在编写一个 shell 脚本，它根据使用 sed 的模式分割字符串行。

```
 #pattern 'string1','string2','string3'

    cat $FILENAME | while read LINE
    do

    firstPart=$(echo "$LINE" | sed -r "s/'(.*)','(.*)','(.*)'/\1/" )
    secondPart=$(echo "$LINE" | sed -r "s/'(.*)','(.*)','(.*)'/\2/" )
    thirdPart=$(echo "$LINE" | sed -r "s/'(.*)','(.*)','(.*)'/\3/" )

    done 
```

我可以使用单独的回声打印它们，但是如果我将它们放在一个回声中，如下所示

```
 #if LINE from FILE is '123','abc','hello'

    echo "$firstPart $secondPart"
    #this prints " abc" instead of "123 abc"

    #try appending a string on echo
    echo "$firstPart -"
    #this prints " -3" instead of "123 -" 
```

当我尝试在代码中的常量字符串中使用 sed 时，echo 似乎很好。

```
 #Correct Echo
    SOMESTRING='123','abc','hello'

    firstPart=$(echo "$SOMESTRING" | sed -r "s/'(.*)','(.*)','(.*)'/\1/" )
    secondPart=$(echo "$SOMESTRING" | sed -r "s/'(.*)','(.*)','(.*)'/\2/" )
    thirdPart=$(echo "$SOMESTRING" | sed -r "s/'(.*)','(.*)','(.*)'/\3/" )

    echo "$firstPart $secondPart"
    #this prints "123 abc" 
```

当输入是来自 FILE 的 LINE 时，sed 的行为是否正确？我怎样才能让它表现得好像 LINE 包含在代码中并在代码中声明（就像我的第二个示例一样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:22:24.820

`\r`在我看来，您的字符串中嵌入了回车符（有时是书面的）。因此，当您执行`echo "$firstPart -"`firstPart="123\r" 时，它会打印两行：

```
123
 - 
```

...第二个“行”打印在（并覆盖）第一行之上。我的猜测是您使用 DOS 样式的行尾（即每行以回车后跟换行符）的文本编辑器编辑了脚本，但是 shell 需要 unix 样式的行尾（只是换行符）并处理回车作为命令的一部分（例如`firstPart=$(echo "$SOMESTRING" | sed -r "s/'(.*)','(.*)','(.*)'/\1/" )\r`，它将包括`\r`在 firstPart.

如果这是问题所在，在您的脚本上运行 dos2unix 应该可以修复它（然后切换到不使用 DOS 样式行结尾的编辑器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:48:35.323

当你说`SOMESTRING='123','abc','hello'`bash 时，它会去掉单引号：

```
$ echo "$SOMESTRING"
123,abc,hello 
```

如果你想保留它们，你需要说`SOMESTRING="'123','abc','hello'"`。

这意味着您的 sed 模式不起作用，例如`firstPart`设置为空字符串。如果您从 sed 模式中删除单引号，它将起作用。

但是，我建议使用`IFS`来拆分简单的分隔输入：

```
echo "'123','abc','hello'" | while IFS=, read a b c; do
  echo $a
  echo $b
  echo $c
done 
```

或者更简洁：

```
while IFS=, read a b c; do echo -e "$a\n$b\n$c"; done <<< "'123','abc','hello'" 
```

输出：

```
'123'
'abc'
'hello' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:04:42.637

我不是专家，但我可以这么说，当您通过管道传输“while”脚本时，while 中使用的变量在主脚本中不可用。

例如：如果您在 while 循环中使用 echo 语句，则表明 SED 的解析很好。

您也可以使用以下语法在主脚本中公开这些变量。

```
while read LINE
do

firstPart=$(echo "$LINE" | sed -r "s/'(.*)','(.*)','(.*)'/\1/" )
secondPart=$(echo "$LINE" | sed -r "s/'(.*)','(.*)','(.*)'/\2/" )
thirdPart=$(echo "$LINE" | sed -r "s/'(.*)','(.*)','(.*)'/\3/" )
done < $FILENAME 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T05:01:07.390

```
SOMESTRING='123','abc','hello'

firstPart=$(echo "$SOMESTRING" | sed "s/\([^,]*\),\([^,]*\),\([^,]*\)/\1/" )
secondPart=$(echo "$SOMESTRING" | sed "s/\([^,]*\),\([^,]*\),\([^,]*\)/\2/" )
thirdPart=$(echo "$SOMESTRING" | sed "s/\([^,]*\),\([^,]*\),\([^,]*\)/\3/" ) 
```

# php - 通过 HTTPS 从 SAP Web Application Server 接收数据

> ID：13969416
> 
> 赞同：1
> 
> 时间：2012-12-20T09:54:30.530
> 
> 标签：php, sap

我正在尝试`xml idoc`从 SAP 系统接收数据。它应该通过 HTTPS 推送给我，但有些东西不起作用。我给出了一个 ssl 证书和服务器的 IP 地址。我可以看到 SAP 正在尝试向我发送一些东西，因为我正在接到一个电话，`Agent: SAP Web Application Server (1.0;701)`但在 GET、POST 或 FILE 中没有传输任何数据。

SAP 系统由其他人控制。他们让这个与其他服务器一起工作，所以我认为这一定是我的错。

目前我的脚本记录了这个值：`serialize($_GET), serialize($_POST), serialize($_FILES), $_SERVER['REMOTE_ADDR'], $_SERVER['HTTP_USER_AGENT'], serialize(apache_request_headers())`

标题告诉我：`content-type: text/xml, content-length: 76702`但我没有得到任何内容。

我做错了什么？我怎么能深入这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:20:30.233

解决方案是直接从`file_get_contents("php://input")`. 数据没有变量，因此不会被解析为任何`$_POST`变量：

```
<?xml version="1.0" encoding="UTF-8"?><ZSHPMNT05>... 
```

请参阅： http: [//php.net/manual/en/reserved.variables.httprawpostdata.php](http://php.net/manual/en/reserved.variables.httprawpostdata.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:24:12.540

认为问题不是很清楚，但请让我知道您是如何将 SAP 7.1 系统与 PHP 连接的。

> 首先，在 SAP 端需要做什么来公开一个可以通过 RFC 访问的远程功能模块。您需要做的就是在 SAP 中创建一个“远程启用”功能模块。这可以通过勾选功能模块属性下的“远程启用模块”来完成。您可以在功能模块的 ABAP 中编写任何程序逻辑。请特别注意函数模块的导入和导出参数，因为这些参数会传入和传出 PHP 程序。

# tidesdk - 使用潮汐dk调用C api

> ID：13969419
> 
> 赞同：0
> 
> 时间：2012-12-20T09:54:34.630
> 
> 标签：tidesdk

您能否帮助我如何使用 JavaScript 或 Python 或 PHP 语言使用 TideSDK 从 DLL 文件调用/调用纯 C API？

谢谢和最好的问候， Phuong Tang Khai，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:55:12.047

您能否详细说明您想如何调用 API。以及您在谈论哪种 API。已经有各种可用的模块可以提供不错的功能。

但是，如果您没有找到所需的功能，您可以创建自己的自定义模块并使用 TideSDK 将其插入。

对 API 的调用需要封装为 Tide 的自定义模块，并且必须与 TideSDK 一起构建。

# ios - 使用 Interface Builder 进行切换

> ID：13969420
> 
> 赞同：0
> 
> 时间：2012-12-20T09:54:36.297
> 
> 标签：ios, xcode, save, switch-statement

如果使用 interface builder 将 Switch 拖到 xib 文件中，则可以在 IB 中将状态设置为 on/off。有没有办法将开关的状态保存到应用程序下次启动时，以便开关处于关闭之前的相同状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:03:48.803

您可以使用[NSUserDefaults](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)保存它。

首先将您的交换机连接为 IBOutlet

```
@property (weak, nonatomic) IBOutlet UISwitch *mySwitch; 
```

还将您的开关连接为 IBAction，事件类型为“Value Changed”

```
- (IBAction)switched:(id)sender; 
```

然后在你的 UIViewController 中`viewDidLoad`

```
BOOL savedState = [[NSUserDefaults standardUserDefaults] boolForKey:@"mySwitch"];
[self.mySwitch setOn:savedState]; 
```

在新的`switched:`行动中

```
- (IBAction)switched:(id)sender
{
    if (sender == self.mySwitch)
    {
        [[NSUserDefaults standardUserDefaults] setBool:self.mySwitch.isOn forKey:@"mySwitch"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:58:34.017

您可以为此目的使用[NSUserDefaults 。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

保存开关状态，如：

```
BOOL yourSwitchState = yourSwitch.on;
[[NSUserDefaults standardUserDefaults] setBool:yourSwitchState forKey:@"Switch"]; 
```

在`viewWillAppear`从用户默认值中获取值并将其设置为如下切换：

```
BOOL switchState = [[NSUserDefaults standardUserDefaults] boolForKey:@"Switch"];
yourSwitch.on = switchState; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:58:08.467

试试这个，

*   (void)handleSwitch:(UISwitch *)switch

{

如果（开关。打开）

{

```
 [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"SwitchState"]; 
```

}

别的

{ //

```
 [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"SwitchState"]; 
```

}

}

下次您的应用启动时

switch.on = [[NSUserDefaults standardUserDefaults] boolForKey:@"SwitchState"];

# javascript - 包含 div 未正确调整大小

> ID：13969424
> 
> 赞同：1
> 
> 时间：2012-12-20T09:54:51.093
> 
> 标签：javascript, css, twitter-bootstrap

在[此页面上](http://festivals.ie:8080/festivals/demo.html)，3 条评论显示在 Bootstrap 轮播中。当您对评论进行分页时，`<div>`带有灰色背景的 应该调整大小以适应评论的长度。这工作得相当好，直到您绕过审查列表的末尾。

例如，如果您使用下一步按钮向前浏览评论，那么当您从最后一条评论 (#3) 转到第一个评论时，第一个评论下方会留下一个很大的空白区域。同样，如果您使用 prev 按钮向后浏览评论，那么当您从第一个评论转到最后一个（#3）时，评论的文本会溢出包含的 div（见下面的屏幕截图）。

总之，每当您环绕评论列表时，无论是使用 prev 按钮从 #1 转到 #3 还是使用 next 按钮从 #3 转到 #1），包含的 div 都没有正确调整大小。

当用户通过此轮播进行分页时调用的事件处理程序位于页面底部（为方便起见，此处转载）：

```
$(document).ready(function () {

    $('#reviewsCarousel').carousel({
        interval:null
    });

    // reviewsCarousel height animation and review counter (set .reviewCount to 
    // the amount of .item in #reviewsCarousel, on .nextReview or .prevReview button 
    // clicks: set the carousel-inner class to the animate to the height of the next 
    // item or the first item if there is no next item, on carousel slide, set the 
    // reviewIndex class text to the index position of the .active .item)
    $("#reviewsCarousel .reviewCount").html($('#reviewsCarousel .item').length);
    $("#reviewsCarousel .btn.nextReview").click(function () {
        var reviewHeight = $("#reviewsCarousel .item.active").next(".item").height();
        if (reviewHeight === undefined) {
            var reviewHeight = $("#reviewsCarousel .item").first(".item").height();
        }
        $("#reviewsCarousel .carousel-inner").animate({"height":reviewHeight + "px"}, 400);
        $('#reviewsCarousel').bind('slid', function () {
            $("#reviewsCarousel .reviewIndex").html($("#reviewsCarousel .active").index("#reviewsCarousel .item") + 1);
        });
    });
    $("#reviewsCarousel .btn.prevReview").click(function () {
        var reviewHeight = $("#reviewsCarousel .item.active").prev(".item").height();
        if (reviewHeight === undefined) {
            var reviewHeight = $("#reviewsCarousel .item").last(".item").height();
        }
        $("#reviewsCarousel .carousel-inner").animate({"height":reviewHeight + "px"}, 400);
        $('#reviewsCarousel').bind('slid', function () {
            $("#reviewsCarousel .reviewIndex").html($("#reviewsCarousel .active").index("#reviewsCarousel .item") + 1);
        });
    });

}); 
```

## 以下是显示问题的几个屏幕截图：

![在此处输入图像描述](../Images/cf3afd29983c1dc27e4a6b57d338177d.png) ![在此处输入图像描述](../Images/2d78f31f39bc112f11e1029086121c50.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:02:52.423

我在控制台中尝试了一些东西：

```
$("#reviewsCarousel .item.active").next(".item").height(); 
```

并发现它是`null`。

```
if (reviewHeight === undefined) // It's never this. 
```

你永远进不去`if`。`undefined !== null`:-)

只需使用：

```
if (!reviewHeight) 
```

任何虚假值都足够好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:05:11.567

`reviewHeight`永远不会`undefined`

使用`if (!reviewHeight)`安装

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:08:54.300

也许最好不要对这个 if 语句使用严格的比较。试试吧

```
if (reviewHeight == undefined) 
```

这也进入了 if 语句 if `reviewHeight === null`。

# c# - 铸造自定义类型

> ID：13969425
> 
> 赞同：3
> 
> 时间：2012-12-20T09:54:57.203
> 
> 标签：c#

我正在研究一个自定义结构，我想让它能够从另一种类型隐式创建。

假设我有两种结构类型。Color 和 ColorX，其中 Color 是框架中已经存在的结构，我无法更改。

使用隐式运算符，例如可以说。

```
Color C;
ColorX CX;
CX = new ColorX();
C = CX; 
```

但是，我也希望能够以相反的方式做到这一点。要么直接设置它，要么进行强制转换。能够做到这两点将是黄金。例如。

```
C = new Color();
CX = C; 
```

或像这样投射：

```
CX = (ColorX)C; 
```

考虑 C# 中所有其他有用的运算符，我确信有办法做到这一点，我只是找不到语法。

任何帮助是极大的赞赏！非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:55:49.123

您可以使用C# 中的[隐式运算符执行此操作：](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=VS.100%29.aspx)

```
public static implicit operator ColorX(Color original)
{
     return new ColorX(original);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:59:42.037

您不能将两种不相关的类型相互转换。

我会创建一个扩展医学

```
public static class ColorExtensions 
{
   public static ColorX AsColorX(this Color c)
   {
       return new ColorC(c);
   }
} 
```

能够调用

```
Color c = new Color();
ColorX cx = c.AsColorX(); 
```

# image - 在 ipad 中未解析 Spring 图像 URL

> ID：13969429
> 
> 赞同：-1
> 
> 时间：2012-12-20T09:55:02.560
> 
> 标签：image, ipad, spring, url, mobile-safari

我正在使用 spring tile 框架来显示我提到过图像路径的 spring url 的屏幕，方法是给出 ${baseurl}。

它在 Mozilla 和 safari 浏览器桌面上运行良好。当我尝试通过 ipad 浏览器（safari）访问应用程序时，我无法看到我的图像正在加载。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:46:16.277

我非常怀疑浏览器会影响瓷砖的工作方式。

我可以想象你在 jsp 中引用图像 url 的方式是错误的。推荐的方式是这样的：

```
 <c:url value="/imagefolder/myimage.png" var="imgUrl" />
 <img src="${imgUrl}" width="64" height="64" /> 
```

# java - 无法将泛型转换为扩展的嵌套类型

> ID：13969435
> 
> 赞同：6
> 
> 时间：2012-12-20T09:55:19.650
> 
> 标签：java, generics

最近，当我遇到无法解释的泛型转换问题时，我正在重构一个泛型方法。最后我意识到我可以完全不用 T 类型（只是自己内联它），但我仍然对转换失败的原因感到好奇。我创建了这个最小的例子来说明这个问题。

**有人可以解释为什么转换失败并且解决方法有效吗？**

```
public <K, T extends List<K>> void castLists(List<T> list, K kForBinging) {
    Map<Integer, List<T>> map = mapSizeToList(list);
    // Type mismatch: cannot convert from Map<Integer,List<T>> to Map<Integer,List<List<K>>>
    // Map<Integer, List<List<K>>> expandedMap = map;

    // Added after accepting answer, legal assignment:
    Map<Integer, ? extends List<? extends List<K>>> expandedMap = map;

    // Originally proposed 'work around'
    Map<Integer, ?> lessSpecific = map;
    @SuppressWarnings("unchecked")
    Map<Integer, List<List<K>>> canCast = (Map<Integer, List<List<K>>>)lessSpecific;
    // ...
}

public <A> Map<Integer, List<A>> mapSizeToList(List<A> list) {
    Map<Integer, List<A>> map = Maps.newHashMap();
    // ...
    return map;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:02:54.493

我相信你需要**[协方差与泛型](https://stackoverflow.com/questions/2660827/java-generics-covariance)**才能做这些事情。**这似乎不受 Java 支持**。

即在 Java 中，如果`T`是 的子类型`List<K>`，**并不意味着**它`List<T>`是 的子类型`List<List<K>>`或是`Map<Integer,List<T>>`的子类型`Map<Integer, List<List<K>>>`。这就是**赋值错误**的原因。

**Covariance** would allow you to do this because with it, **if template parameters have a subclass-superclass relationship**, the **defined classes** will also have the **exact same relationship**. This would make this assignment possible. **Scala** (among other (functional programming?) languages) supports **covariance** and its complement **contravariance**.

# internationalization - i18n 和 struts 1.3

> ID：13969436
> 
> 赞同：0
> 
> 时间：2012-12-20T09:55:25.430
> 
> 标签：internationalization, struts1

我会为多个语言环境国际化我的网络应用程序。

我找到了几个例子，像[这样](http://www.mkyong.com/struts/struts-internationalizing-or-localization-example/)。

它们可以工作，但在这种情况下，它总是显示在同一页面上（也就是说，如果用户更改任何页面中的语言，他/她会被重定向到主页）。

我希望如果用户单击国家标志（html:link 代码在所有其他 jsp 包含的 jsp 文件中），则重新加载页面（用户所在的页面）。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T12:02:48.137

您的示例链接很清楚：选择国家标志后，链接将转到您的“LanguageAction”，设置区域设置如下：

```
request.getSession().setAttribute(Globals.LOCALE_KEY, Locale.FRANCE); 
```

最后，将页面重定向回上次查看的页面。这将要求您在更改区域设置之前获取请求 URL。

我希望这有帮助。

# android - Android：回到一些活动

> ID：13969443
> 
> 赞同：0
> 
> 时间：2012-12-20T09:55:44.600
> 
> 标签：android, android-activity

![在此处输入图像描述](../Images/0eef24629bc43b21748d4ec909f1b251.png)

Activity1（未完成）可以启动Activity2，Activity2（未完成）可以启动Activity3。Activity2 和 3 可以使用

```
super.onBackPressed();
this.finish(); 
```

我想知道 Activity3 是如何直接回到 Activity1（***不刷新***）并释放 Activity2 的内存的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:59:37.497

```
Intent intent = new Intent(Activity3.this, Activity1.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这将使`Activity1`be 在 backstack 的顶部，杀死所有`Activities`在它上面的东西。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:01:04.793

试试这个

```
@Override
 public void onBackPressed() {
     startActivity(new Intent(this, UI.class)
     .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK));
 return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:05:07.480

尝试 super.finish(); 关闭第二个活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:05:21.930

如果您想返回现有活动，则可以使用唯一 ID 和 onActivityResult 如果 resultData == ID --> 关闭第二个活动（对于用户来说，这似乎是从第三个活动返回到第一个活动）。

要了解有关活动堆栈的更多信息，请访问[google 网站](http://developer.android.com/guide/components/tasks-and-back-stack.html)

也可能[片段](http://developer.android.com/guide/components/fragments.html)适合您 - 您可以简单地浏览片段堆栈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T10:08:02.707

活动二

```
Intent intent = new Intent(Activity2.this, Activity3.class);
startActivityforResult(intent,0); 
```

从 Activity3 回来`onBackPressed()`时，需要时覆盖并设置结果

```
setResult(RESULT_CANCELED); 
```

然后覆盖 Activity2 中的 onActivityResult()

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(requestCode == 0) {
            if(resultCode == RESULT_CANCELED)
                finish();
        }
    } 
```

当设置结果时，这将完成第二个活动。否则，您可以像任何正常活动一样来回导航。

# java - 在一个 CPU 上运行 Java 线程

> ID：13969444
> 
> 赞同：1
> 
> 时间：2012-12-20T09:55:45.113
> 
> 标签：java, .net, windows, multithreading, parallel-processing

我们在 JAVA 中有一个多线程应用程序，它有多个并行运行的线程。现在我们想在一个内核上运行所有这些线程。当前应用程序在具有多个核心的系统上运行。

我们知道 .Net Framework 中有一种可用的 ProcesAffinity 技术来设置进程关联性。

但是我们不想依赖 .Net Framework，因为我们的应用程序是用 java 构建的。

我们是否使用 Bat 文件设置 Process affinity 并通过 Bat 文件运行我们的应用程序可执行 jar 文件？

目前我们的应用程序运行在 Window XP 上。所以我们需要一个在 XP 平台上运行良好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:59:38.073

**编辑：**

有可能：请参阅[Java 线程亲和性](https://stackoverflow.com/questions/2238272/java-thread-affinity/6894925#6894925)

* * *

纯 Java 不支持在特定处理器上运行线程。检查上面链接的 SO 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:10:44.733

就我个人而言，我认为不能在纯 Java 中设置这一事实并不是一件坏事，对我而言，应用程序的运行方式很大程度上取决于操作系统，因此特定于操作系统的解决方案不是一件坏事。

您可以使用[MS psexec](http://technet.microsoft.com/en-gb/sysinternals/bb897553.aspx)实用程序来设置关联：

```
psexec -a 1 java -jar myapplication.jar 
```

将指示由 java 创建的所有线程都将在最低的 CPU 上运行。

这行将是您的 .BAT 文件...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:03:01.250

你不能在纯 Java 中做到这一点。但在某些版本的 Windows 上，您可以通过操作系统实用程序来完成；请参阅[https://superuser.com/questions/309617/how-to-limit-a-process-to-a-single-cpu-core](https://superuser.com/questions/309617/how-to-limit-a-process-to-a-single-cpu-core) ...您可以通过 JNI 调用本机库来做到这一点。

# gtk - 禁用扩展树视图的所有顶级节点

> ID：13969452
> 
> 赞同：1
> 
> 时间：2012-12-20T09:56:11.543
> 
> 标签：gtk, gtktreeview

如何配置 gtk+ 树视图，以便只有顶级节点可见，并且禁用它们的扩展？使用此配置将无法查看任何子节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:40:39.257

我会使用模型*过滤器*(gtk [2](http://developer.gnome.org/gtk2/stable/GtkTreeModelFilter.html) , [3](http://developer.gnome.org/gtk3/stable/GtkTreeModelFilter.html) ) 作为数据模型的前端，并简单地过滤所有级别 > 1 的节点，除非数据模型很大。

# hibernate - hibernate：多个会话可以共享同一个连接吗？

> ID：13969458
> 
> 赞同：2
> 
> 时间：2012-12-20T09:56:27.337
> 
> 标签：hibernate, session, connection, c3p0

我们有一个 C3P0 池作为数据源，我们将`org.springframework.orm.hibernate4.LocalSessionFactoryBean`其用作会话工厂。

我们的一些（大）MySQL 请求被配置为流式传输结果集。但是，MySQL 只允许每个连接流式传输单个结果。

这就是为什么我想知道 2 个不同的 Hibernate 会话是否可以使用相同的连接，还是 1 个连接 = 1 个会话？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:23:46.933

只是为了补充 JB Nizet 的回答：池为应用程序提供了一个连接（在这种情况下为 Hibernate 会话）。应用程序使用此连接并将其返回到池中。池将决定是丢弃此连接还是将来将其重用于另一个会话。因此，两个不同的会话最终可以使用相同的连接，但不能同时使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:13:57.383

不，两个会话不能共享一个连接。

# c# - 我们可以在 LINQ 查询中使用重载的 Where 运算符吗？

> ID：13969460
> 
> 赞同：0
> 
> 时间：2012-12-20T09:56:39.120
> 
> 标签：c#, linq

此示例演示了一个索引 Where 子句，该子句返回名称短于其值的数字。源代码

```
public void Linq5() 
{ 
    string[] digits = { "zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine" }; 

    var shortDigits = digits.Where((digit, index) => digit.Length < index); 

    Console.WriteLine("Short digits:"); 
    foreach (var d in shortDigits) 
    { 
        Console.WriteLine("The word {0} is shorter than its value.", d); 
    } 
} 
```

现在我的问题是......我们可以用 LINQ 查询格式写这个，比如：

```
from u in digits where u.Length>index select u; 
```

Here How to get the INDEX value from above Query?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:00:37.963

不，重载`Where`运算符在查询语法中不可用。[这是来自msdn](http://msdn.microsoft.com/en-us/library/bb534803.aspx)的引用：

> 在查询表达式语法中，*where* (Visual C#) 或 Where (Visual Basic) 子句转换为对 `Where<TSource>(IEnumerable<TSource>, Func<TSource, Boolean>)`

您可以手动引入索引：

```
int index = 0;
var query = from u in digits 
            where u.Length > index++ 
            select u; 
```

但请记住，您还应该在每次查询调用之前手动重置索引。无论如何 - 如果您需要索引，那么 fluent API 是您的最佳选择：

```
var query = digits.Where((u, i) => u.Length > i); 
```

我看不出有什么理由不使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:08:44.583

尝试这个：

```
string[] digits = { "zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine" };

var shortDigits = from pair in digits.Select((digit, index) => new { digit, index })
              where pair.digit.Length < pair.index
              select pair.digit; 
```

# javascript - Javascript 英国邮政编码验证

> ID：13969461
> 
> 赞同：6
> 
> 时间：2012-12-20T09:56:40.430
> 
> 标签：javascript, regex, validation, postal-code

> **可能重复：**
> [英国邮政编码正则表达式（综合）](https://stackoverflow.com/questions/164979/uk-postcode-regex-comprehensive)

我有以下代码用于验证 javascript 中的邮政编码：

```
function valid_postcode(postcode) {
    postcode = postcode.replace(/\s/g, "");
    var regex = /[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}/i;
    return regex.test(postcode);
} 
```

测试：

```
CF47 0HW - Passes - Correct
CF47 OHW - Passes - Incorrect 
```

我已经进行了大量研究，但似乎无法为这个常见的验证要求找到最终的正则表达式。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T10:02:50.907

通过添加 ^ 和 $ 使您的正则表达式更严格。这应该有效：

```
function valid_postcode(postcode) {
    postcode = postcode.replace(/\s/g, "");
    var regex = /^[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}$/i;
    return regex.test(postcode);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T10:38:26.830

您需要一个“明确的正则表达式”——考虑到英国邮政编码的所有排列，因此它需要“不必要地大”。这是我过去用过的一个

```
"(GIR 0AA)|((([ABCDEFGHIJKLMNOPRSTUWYZ][0-9][0-9]?)|(([ABCDEFGHIJKLMNOPRSTUWYZ][ABCDEFGHKLMNOPQRSTUVWXY][0-9][0-9]?)|(([ABCDEFGHIJKLMNOPRSTUWYZ][0-9][ABCDEFGHJKSTUW])|([ABCDEFGHIJKLMNOPRSTUWYZ][ABCDEFGHKLMNOPQRSTUVWXY][0-9][ABEHMNPRVWXY])))) [0-9][ABDEFGHJLNPQRSTUWXYZ]{2})" 
```

请注意，例如，我从不只使用 AZ，因为在每个部分中总是排除某些字母。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:30:31.093

问题是函数的第一行。通过修剪目标字符串中的空格，您允许误报。

CF47OHW 将匹配 [AZ]{1,2}[0-9]{1,2} ?[0-9][AZ]{2}

```
CF matches [A-Z]
4 matches [0-9]{1,2}
(blank) matches \s?
7 matches [0-9]
OH matches [A-Z]{2}
W gets discarded 
```

因此，正如 Paulgrav 所说，添加开始和结束字符（^ 和 $）将解决它。

此时，您还可以删除 \s? 从你的正则表达式的中间位。

然而！尽管该错误已得到修复，但您的正则表达式仍然无法按您希望的方式工作。您应该在此站点[UK Postcode Regex (Comprehensive)上查看以下相当好的答案](https://stackoverflow.com/questions/164979/uk-postcode-regex-comprehensive)

# android - android编码强制关闭

> ID：13969462
> 
> 赞同：0
> 
> 时间：2012-12-20T09:56:42.493
> 
> 标签：android, android-layout, layout

这是在avd上运行强制关闭错误的代码

```
public class MainActivity extends Activity {

Button magic;
TextView display;
int random;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    magic=(Button)findViewById(R.id.magic);
    display=(TextView)findViewById(R.id.textView1);
    magic.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            random = (int)Math.ceil(Math.random()*100);

            display.setText("your number is"+random);

        }
    });

    }
} 
```

这是我正在使用的代码，即使不使用随机函数或 settext 应用程序强制关闭，请帮助

activity_main.xml 没有给出任何错误或警告............

xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/magic8ball"
    android:gravity="center"
    tools:context=".MainActivity" >

    <android.widget.Space
        android:id="@+id/space1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="144dp"
        android:layout_marginTop="192dp" />

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="131dp"
        android:layout_marginTop="171dp"
        android:orientation="vertical" >
    </LinearLayout>

    <Button
        android:id="@+id/magic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/linearLayout1"
        android:layout_toRightOf="@+id/linearLayout1"
        android:text="@string/Magic" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/Magic"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="64dp"
        android:layout_marginRight="74dp"
       android:text="@string/Ask"
android:textAppearance="?     android:attr/textAppearanceLarge"
        android:textColor="#EE5533" />

</RelativeLayout> 
```

xml 文件在硬编码时与 textview1 相关的地方给出

由于文本即将更改，是否将其设置在 string.xml 或硬编码它是好的？？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:19:58.103

您使用以下代码的目的是什么。

```
**<android.widget.Space
        android:id="@+id/space1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="144dp"
        android:layout_marginTop="192dp" />** 
```

这似乎不可用..它在 ICS 设备中工作正常..但在 Gingerbread 设备中不工作..我认为这是不可用的代码......

# sql - 如何在 SQL Server 中创建两个非主键实体之间的关系

> ID：13969464
> 
> 赞同：1
> 
> 时间：2012-12-20T09:56:47.247
> 
> 标签：sql, sql-server-2008

我有几个表需要将主键为 patient_id 的表患者的患者卡 ID (PID) 与其他表的 PID 字段链接......我该怎么做？帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:00:43.437

您可以使用外键

```
CREATE TABLE T
(
  any_primary_key INT PRIMARY KEY,
  [other attributes],
  patient_id,    
  FOREIGN KEY (patiend_id) REFERENCES Patients.patient_id
) 
```

其中 Patients 是一个表，其原始表`patient_id`必须声明为`unique`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:01:00.550

你可以像加入他们一样

```
SELECT * 
FROM [Patient] p
INNER JOIN [OtherTable] ot
  ON p.pid = ot.patient_id; 
```

# unit-testing - Grails 标准在 JUnit 测试中不起作用

> ID：13969468
> 
> 赞同：0
> 
> 时间：2012-12-20T09:56:59.453
> 
> 标签：unit-testing, grails, junit, grails-2.0

我正在尝试在我的 grails 应用程序中测试搜索方法，但我遇到了空指针异常。我在测试中模拟了该域，如下所示：

```
 @TestFor(AuditController)
  @Mock(Audit)
  class AuditControllerTests {

void testSearch() {

    populateValidParams(params)
    def audit=new Audit(params)
    audit.save(failOnError: true)

    //Search existing customer
    def model = controller.search()
    assert model.auditInstanceList.size() == 1
    assert model.auditInstanceList.size() == 1

}
  } 
```

我在 model.auditInstanceList 上得到了 NPE。它不应该为空。这是我的控制器中的代码：

```
def search = {

    def query
    def criteria = Audit.createCriteria()
    def results

    query = {
        and{
            if(params.customerName){
                ilike("customerName", params.customer + '%')
            }
            if(params.siteName){
                ilike("siteName", params.siteName + '%')
            }
            max:params.max
            offset:params.offset

        }
    }

    results = criteria.list(params, query)

    render(view:'list', model:[ auditInstanceList: results,auditInstanceTotal:results.totalCount ])

} 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:02:04.717

`model`结束时返回`search`。如中，

```
def search = {
  ...
  render(view:'list', model:[ auditInstanceList: results, auditInstanceTotal:results.totalCount ])

  [auditInstanceList: results, auditInstanceTotal:results.totalCount]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:26:37.650

测试调用 的控制器操作时，`render()`会在测试中自动创建`model`和`view`填充变量。通过这样做`def model = controller.search()`，您正在用`model`自己的魔法替换魔法，将其分配给`search()`. 进行断言的正确方法是：

```
controller.search()
assert model.auditInstanceList.size() == 1
assert view == '/audit/list' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:01:27.317

我不知道为什么，但有时您需要从控制器的操作中删除模型作为返回值。我交替使用这两个版本，以防其中一个失败：

```
// sometimes this one works
def model = controller.search()
assert model

// sometimes this one works 
controller.search()
assert model 
```

编辑：我想到了两种新的可能性，为什么你的行动不起作用：

1.  尝试从关闭中更改您的操作并使其成为一种方法。
2.  确保你没有后过滤器。我发现了这个错误：http: [//jira.grails.org/browse/GRAILS-6825](http://jira.grails.org/browse/GRAILS-6825)

# php - 循环遍历对象数组

> ID：13969469
> 
> 赞同：12
> 
> 时间：2012-12-20T09:57:02.433
> 
> 标签：php

我有一个名为 $pages 的数组，内容如下：

```
Array
(
[01-about-us] => Page Object
    (
        [_uri] => about-us
        [_menuItem] => 01
        [_visable] => 1
    )

[02-contact] => Page Object
    (
        [_uri] => contact
        [_menuItem] => 02
        [_visable] => 1
    )

[_sitemap] => Page Object
    (
        [_uri] => sitemap
        [_menuItem] => 
        [_visable] => 
    )

[home] => Page Object
    (
        [_uri] => home
        [_menuItem] => 
        [_visable] => 1
    )
) 
```

有没有一种简单的方法可以通过那里的属性循环并获取页面对象，即：

```
<?php foreach($pages->_visible() AS $p): ?>
  <li> page </li>
<?php endforeach ?> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-20T10:00:16.470

不，您必须使用`if`：

```
foreach ($pages as $page) {
    if ($page->_visible == 1) {
        echo "<li>page</li>";
    }
} 
```

（还要注意你在数组中拼错`visible`了，也许是错字？）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T10:05:34.827

或者你可以利用 PHP 的`array_filter`功能：

```
$pagesVisible = array_filter($pages, function($page) {
    return (bool) $page->_visible;
});

foreach ($pagesVisible as $key => $page) {
    print '<li>' . $key . '</li>';
} 
```

或简写为：

```
$filter = function($page) {
    return (bool) $page->_visible;
};
foreach (array_filter($pages, $filter) as $key => $page) {
    print '<li>' . $key . '</li>';
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T10:03:38.413

您只需要遍历 pages 数组并在循环内访问对象属性，例如：

```
<?php foreach($pages as $k => $p): ?>
   <?php if ($p->_visable === 1): ?>
   <li><?php echo $k; ?></li>
   <?php endif; ?>
<?php endforeach; ?> 
```

请注意，**visable**拼写错误，但这就是您的问题

# html - CSS 监听键盘动作

> ID：13969471
> 
> 赞同：-3
> 
> 时间：2012-12-20T09:57:07.667
> 
> 标签：html, css

我想问一下 CSS 中是否有一些具有以下功能的东西

```
document.onkeypress = returnKey; 
```

在javascript中？还是 CSS 中的其他键盘动作监听器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T09:59:05.970

不，没有，CSS 是静态样式。

某些动作有伪类，例如`:hover`、等，但这些是特定于元素的。`:link``:active``:focus`

您最好的选择是分配 keydown 处理程序，并为您的样式提供一个单独的类，从而混合 JavaScript 和 CSS 以获得您想要的效果。在处理程序中，您可以将类应用于您想要的元素。

一个简单（粗略）的 jQuery 示例来模拟类似`:keydown`伪类的`body`东西是这样的：

```
$('body').keydown(function() {
    $(this).addClass('keydown');
}).keyup(function() {
    $(this).removeClass('keydown');
}); 
```

.. 对应的类是这样的：

```
.keydown {
    background-color: red;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T09:58:16.123

不。

CSS 用于样式，而不是脚本。要处理键盘事件，请使用 JavaScript。

# c# - 欧洲验证表达式

> ID：13969477
> 
> 赞同：2
> 
> 时间：2012-12-20T09:57:24.633
> 
> 标签：c#, asp.net, regex, validation

格式的验证表达式`ValidationExpression="\d{3}-\d{3}-\d{4}"`是这样的 `ErrorMessage="Format: XXX-XXX-XXXX"`，我希望 vaidatin 表达式能够接受这种欧洲格式，`XXXX-XXXXXX`我需要在上面的表达式中添加这种格式，以便它可以接受任何格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:00:48.993

使用“或”运算符 ( `|`)

```
"\d{3}-\d{3}-\d{4}|\d{4}-\d{6}" 
```

* * *

如果您有兴趣，这是对正则表达式的一个很好的介绍：

[http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

# c++ - VB 和 C++ ActiveX 控件以不同的方式保存其信息，如何实现 C++ ActiveX 控件来代替 VB ActiveX？

> ID：13969479
> 
> 赞同：2
> 
> 时间：2012-12-20T09:57:29.493
> 
> 标签：c++, excel, vb6, activex, propertybag

**背景**

VB 创建了一个旧的 ActiveX 控件。我将此 ActiveX 控件添加到我的 Excel 工作簿并设置了一些属性。这些属性是在保存图书时保存的。具体来说，它们是在 VB 代码中使用 PropertyBag 保存在 UserControl_WriteProperties 函数中的。所以这些属性一直保留在工作簿中。

**我的任务**

我必须使用 C++ 创建一个新的 ActiveX 控件以向后兼容旧控件。我需要在我的旧 Excel 工作簿中的 ActiveX 控件中保留所有信息。因此，我将 IPersistPropertyBag 实现到我的 ActiveX 控件。

我的期望是，当我打开旧 Excel 工作簿时，必须通过 PropertyBag 正确检索所有信息。

**问题**

我发现我的 Excel 工作簿中保留的信息是 Stream 格式的。我可以将 IPersistStreamInit 实现到我的新 ActiveX 控件，但我不理解我的 Excel 工作簿中保留的 Stream 中的格式。因此，我无法检索保留在我的 Excel 工作簿中的信息。

我想知道为什么信息以流格式保存，即使它们是通过 VB 代码中的 Propertybag 保存的。

**问题**

在这种情况下，有没有办法让所有信息都保存在 ActiveX 控件中？我已经找了两天了，但我找不到方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:56:24.817

属性包保存到流中，仅此而已。

我希望您的 C++ 控件实现 IPersistStream，因此 Excel 正在尝试使用它。我建议您首先尝试从 C++ 控件中删除 IPersistStream、IPersistStreamInit 和 IPersistStorage，只留下 IPersistPropertyBag。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:43:33.120

我通过创建一个 VB6 COM dll 来处理这个任务来完成这个任务。

```
Option Explicit
Dim objMyPropertyBag As PropertyBag

Public Sub Contents(a_content As Variant)
    objMyPropertyBag.Contents = a_content
End Sub

Public Function Read(key As String) As String
On Error GoTo Error_Handler
    Read = objMyPropertyBag.ReadProperty(key)
Error_Handler:
    MsgBox Err.Source & Err.Number
End Function

Private Sub Class_Initialize()
    Set objMyPropertyBag = New PropertyBag
End Sub 
```

当我打开包含旧 ActiveX 对象的旧 Excel 工作簿时。我执行以下步骤：

1.  它将来到给我一个 IStream 的 IPersistStreamInit::Load 函数。
2.  我读取了这个流并解析为 VT_UI1 的 SAFEARRAY 的 VARIANT（等于 BYTE 数组），称为“内容”。
3.  我创建了一个名为“contentReader”的 VB6 COM dll 实例。
4.  我调用 contentReader->Contents(content) （将我创建的 SAFEARRAY 传递给它）。

现在我可以通过 contentReader->Read([in] key, [out] value) 读取 PropertyBag 中的任何键。

# r - 利用可用数据并忽略缺失数据构建分类器

> ID：13969485
> 
> 赞同：1
> 
> 时间：2012-12-20T09:57:52.150
> 
> 标签：r, machine-learning, missing-data, random-forest

我在 R 平台中使用 randomForest 包来构建二进制分类器。大约有 30,000 行，其中 14,000 行在正类中，16,000 行在负类中。我有 15 个已知对分类很重要的变量。

我有一些额外的变量（大约 5 个）缺少信息。这些变量的值为 1 或 0。1 表示存在某物，而 0 表示不知道它是否存在。众所周知，如果有 1，这些变量将是分类最重要的变量（增加分类的可靠性，并且样本更有可能属于正类），但如果有 0，则无用。而且，只有 5% 的行的值为 1。因此，一个变量仅对 5% 的情况有用。这 5 个变量是相互独立的，所以我希望这些变量对我拥有的 15-25% 的数据非常有用。

有没有办法利用可用数据但忽略单个列中存在的缺失/未知数据？您的想法和建议将不胜感激。实现不必特定于随机森林和 R 平台。如果使用其他机器学习技术或在其他平台上可以做到这一点，那么它们也是最受欢迎的。感谢您的时间。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:42:21.317

我至少可以看到以下方法。就个人而言，我更喜欢第三种选择。

## 1）丢弃多余的列

您可以选择丢弃这 5 个额外的列。显然这不是最优的，但最好知道这个选项的性能，并与以下内容进行比较。

## 2）按原样使用数据

在这种情况下，这 5 个额外的列将保持原样。这5列中的每一列中的确定存在（1）或未知存在/不存在（0）用作信息。这与说“如果我不确定某物是否存在，我会将其视为不存在”是一样的。我知道这很明显，但是如果您还没有尝试过，您应该将其与选项 1 进行比较。

## 3）使用单独的分类器

如果这 5 列中的每一列中大约 95% 都为零，并且它们大致相互独立，那么 0.95^5 = 77.38% 的数据（大约 23200 行）在所有这些列中都为零。您可以在这 23200 行上训练分类器，删除全为零的 5 列（因为这些列对于所有点都是相等的，所以无论如何它们的预测效用为零）。然后，您可以为剩余的点训练一个单独的分类器，其中至少有一个列设置为 1。对于这些点，您可以保持数据不变。

然后，对于您的测试点，如果所有这些列都为零，则使用第一个分类器，否则使用第二个分类器。

## 其他提示

如果 15 个“正常”变量不是二元的，请确保使用可以处理具有不同标准化的变量的分类器。如果您不确定，请将 15 个“正常”变量归一化，使其位于区间 [0,1] 内——这样做您可能不会丢失任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:36:52.813

我想对 Herr Kapput 提出进一步的建议：如果您使用概率方法，您可以将“缺失”视为您有一定概率观察到的值，无论是全局还是在每个类中（不确定哪个更感觉）。如果它丢失，它有发生概率 p(missing)，如果它存在，它有概率 p(not missing) * p(val | not missing)。这使您可以优雅地处理值存在时具有任意范围的情况。

# regex - 如何匹配 0 次或多于 1 次出现的空白

> ID：13969487
> 
> 赞同：5
> 
> 时间：2012-12-20T09:58:03.093
> 
> 标签：regex, vim

我想使用正则表达式来匹配以下字符串：

`blub{`（没有中间空间）和`blub  {`（两个中间空间）和`blub   {`（三个中间空间）等等但不是 `blub {`（一个中间空间）

目前我可以在我的 vimrc 文件中匹配`blub{`和`/\S{/`其余部分 。`/\S \{2,}{/`但是我不能将这些与 vim 中的正则表达式结合起来。我怎样才能做到这一点？

目的是在我的 cpp 文件中标记括号之间没有空格的所有行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T10:02:33.483

使用替代品。

```
/\S\(\| \{2,}\){/ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T10:06:17.890

试试这个：

```
/\S\(\s\{2,}\)\?{/ 
```

这表示 2+ 个空格中的零个或一个，它跳过了一个空格的可能性

# java - 确保@Controller 不一致

> ID：13969489
> 
> 赞同：1
> 
> 时间：2012-12-20T09:58:12.140
> 
> 标签：java, spring, spring-mvc, spring-security

我正在使用*Spring MVC开发**REST API并使用**Spring Security*保护它。我有两个网址，一个是*/company/{id}*，第二个是*/countries*。*ws*是我的 servlet 映射。

 ***```
<intercept-url pattern="/ws/*" access="ROLE_ADMIN"/> 
```

已配置，但是当我尝试访问*/company/1*时，它通过了我

```
11:17:19,751 DEBUG http-bio-8080-exec-10 AntPathRequestMatcher:matches:103 - Checking match of request : '/ws/company/1'; against '/ws/*'
11:17:19,751 DEBUG http-bio-8080-exec-10 FilterSecurityInterceptor:beforeInvocation:184 - Public object - authentication not attempted 
```

并与 /countries 一切正常。我已经阅读[了这个](https://stackoverflow.com/questions/6651119/secured-does-not-work-in-controller-but-intercept-url-seems-to-be-working-fine)问题，并在我的 mvc 相关上下文中使用了全局安全性。无法弄清楚是什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:00:09.147

尝试`/ws/`使用 ant 样式选择器映射所有内容，该选择器`**`指示包含指定 URL 中的所有内容，而不仅仅是指定 URL 中的 URL。

```
<intercept-url pattern="/ws/**" access="ROLE_ADMIN"/> 
```***

# go - 不能返回零，但切片的值为零

> ID：13969492
> 
> 赞同：2
> 
> 时间：2012-12-20T09:58:26.757
> 
> 标签：go

我遇到的情况是具有以下代码的函数：

```
func halfMatch(text1, text2 string) []string {
    ...
    if (condition) {
         return nil // That's the final code path)
    }
    ...
} 
```

正在返回`[]string(nil)`而不是 nil。起初，我认为返回`nil`具有特定返回类型的函数可能只会返回该类型的零值实例。但后来我尝试了一个简单的[测试](http://play.golang.org/p/SLxcRyavm7)，但事实并非如此。

有谁知道为什么会`nil`返回一个空字符串切片？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T14:07:04.007

Nil 不是类型。它是对映射、通道、指针、函数、切片和接口的零值的描述。

当你在你的程序中输入“nil”时，go 会根据上下文给它一个类型。在大多数情况下，您永远不需要显式键入您的 nil。这也不例外，编译器知道它必须是 []string(nil)，因为返回的类型是 []string。

nil 字符串切片是没有后备数组且长度/容量为零的切片。您可以将其与文字“nil”进行比较，并可以得到它的长度和容量。它是一个 [] 字符串，只是空的。如果您希望有一个不为 nil 的空 []string，请返回 []string{}。这会创建一个支持数组（长度为零）并使其不再等价于 nil。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:02:22.680

我相信我知道发生了什么。我正在使用的断言库（[github.com/bmizerany/assert](http://github.com/bmizerany/assert)）在内部使用`reflect.DeepEqual`.

的返回值`func halfMatch(text1, text2 string) []string`始终是 type `[]string`，但如果它返回`nil`并通过运算符与一个`nil`值进行比较`==`，它将返回`true`。但是，如果`reflect.DeepEqual`使用，则类型很重要，并且不会认为两个值相同。

[与测试的游乐场链接](http://play.golang.org/p/JSyc3VOF9k)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:20:05.343

我想你可能对 print 的输出感到困惑。（[游乐场链接](http://play.golang.org/p/V0ugBlnRCH)）

```
package main

import "fmt"

func f() []string {
    return nil // That's the final code path)
}
func main() {
    result := f()
    fmt.Printf("result = %v\n", result)
    fmt.Printf("result = %v\n", result == nil)
} 
```

哪个生产

```
result = []
result = true 
```

所以我认为输出真的是`nil`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T16:09:03.230

如果条件为真，Go 将返回一个 enpty 切片。

您的“测试”存在问题，因为如果您尝试将 [] 与 nil 进行比较，您就会得到正确的结果。我已经修改了你的测试来告诉你我的意思

```
package main
import "fmt"

func main() {
    //fmt.Println(test1("") == nil)  
    fmt.Println(test1("")) // prints [] 
}

func test1(text1 string) []string {
    if len(text1) > 0 {
        return []string{text1}
    }
    return nil
} 
```

# java - 将密码应用于在java中具有数字签名的PDF文件

> ID：13969495
> 
> 赞同：0
> 
> 时间：2012-12-20T09:58:33.393
> 
> 标签：java, pdf, itext

当我从 java 代码对文件应用密码时，我遇到了数字签名验证的问题。在我的场景中，我正在获取已经具有数字签名的文件。 **我想在数字签名的 pdf 文件上输入密码。**

我可以输入密码，但担心的是现在数字签名没有得到验证。建议我如何实现它。有可能吗？

请让我知道是否需要我方进一步澄清......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:05:39.760

您不能在不破坏签名的情况下在先前签名的 PDF 上输入密码。签名检查签名数据是否作为字节流未更改。密码会更改这些字节。因此，如果之后确实应用了密码，签名将被破坏。

您可能会考虑同时进行签名和加密。

如果这在您的情况下是不可能的，您可以考虑将签名的 PDF 添加到 PDF 组合并加密该组合。在这种情况下，必须从投资组合中打开已签名的 PDF，这意味着要对其进行解密。

**PS**我在上述所有内容中都假设您的意思是常规 PDF 签名，而不是 XFA 签名。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T11:49:12.493

首先尝试将数字签名转换为字符串，然后使用这段代码

```
public static String passwordProtectFile(File srcFile, File destFile,
        String password) throws DocumentException, IOException {
    String message = null;

        PdfReader pdfReader = new PdfReader(new FileInputStream(srcFile));
        FileOutputStream fos = new FileOutputStream(destFile);
        PdfStamper stamper = new PdfStamper(pdfReader, fos);
        stamper.setEncryption(password.getBytes(), password.getBytes(),
                PdfWriter.ALLOW_PRINTING, PdfWriter.ENCRYPTION_AES_128
                        | PdfWriter.DO_NOT_ENCRYPT_METADATA);
        stamper.close();
        fos.close();
        pdfReader.close();
        message = "The Given File is Now Password Protected";

    return message;
} 
```

# iphone - iPhone音频

> ID：13969502
> 
> 赞同：1
> 
> 时间：2012-12-20T09:58:52.580
> 
> 标签：iphone, ios, audio, avfoundation, frequency

> **可能重复：**
> [如何检测 iphone 中特定声音的声音频率？](https://stackoverflow.com/questions/13950358/how-to-detect-sound-frequency-for-particular-sound-in-iphone)

我正在寻找一种方法来找到频率`mic input`。我可以在临时文件中记录我的声音或罪恶噪音。

对于录音，我使用的是`AVFoundation framework`. 我用它`framework`来找到信号的峰值。我该怎么做才能找到信号的频率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:53:00.680

Apple 有一个非常好的示例项目。这是 aurioTouch2 示例应用程序的链接： [https ://developer.apple.com/library/ios/samplecode/aurioTouch2/Introduction/Intro.html](https://developer.apple.com/library/ios/samplecode/aurioTouch2/Introduction/Intro.html)

我想您需要开始使用 CoreAudio 库而不是 AVFoundation。要获得频率，您可能需要使用 FFT（快速傅立叶变换）。这是在上面的示例中完成的。它甚至可以可视化频谱图（随时间变化的频率）。

或者也许这个 stackoverflow 帖子可以帮助你： [Get Frequency for Audio Input on iPhone](https://stackoverflow.com/questions/11089870/get-frequency-for-audio-input-on-iphone)

# android - 如何将 2 个外部存储控制器安装到 Android 模拟器 4.2？

> ID：13969506
> 
> 赞同：0
> 
> 时间：2012-12-20T09:58:59.307
> 
> 标签：android, emulation

我创建了 1 个带有外部存储的 android 模拟器 4.2 是一个虚拟 sd 卡现在我想在我的模拟器上再安装 1 个外部存储，所以它有 2 个外部存储目录我可以这样做吗？有人有这方面的经验吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:58:35.937

Android 目前不支持多个外部存储目录。因此，Android 模拟器目前不支持多个外部存储目录。

# javascript - 将 javascript 和 jQuery 文件从资产附加到网页

> ID：13969507
> 
> 赞同：0
> 
> 时间：2012-12-20T09:59:00.443
> 
> 标签：javascript, html

我在 webview 中显示来自服务器的网页。但是，为了处理一些功能，我想将资产文件夹中的 3-4 个文件添加到网页中。

你如何将这些文件附加到也有一些自己的 javascript 的网页上？

> ```
> <head>
>     <script src='jquery.js'></script>
> </head> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:06:39.480

不以 / 开头的路径是相对的，因此请尝试：

```
<script src='assets/jquery.js'></script> 
```

如果您的 html 文件位于包含资产文件夹的目录/文件夹中，该文件夹中包含 JavaScript 库，这将起作用

如果要指定绝对路径，请使用

```
<script src='/assets/jquery.js'></script> 
```

如果资产文件夹是文档根目录的子文件夹，这将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:12:05.983

我按照你说的添加了，但是那些 javascript 不起作用，在这里你可以看到 html 文件-`

1.  > ```
    > <!DOCTYPE HTML><html><head> <script   
    >     src='/assets/jquery.js'></script><script   
    >     src='/assets/rangy-core.js'></script><script   
    >     src='/assets/rangy-serializer.js'></script><script   
    >     src='/assets/android.selection.js'></script><title>Kendal Hunt -   
    >     Psychology - Brown CH, Foster JD, Gordon MS</title><meta   
    >     http-equiv="content-type" content="text/html; charset=utf-8" /><link
    >     rel="stylesheet" type="text/css" href="style/style.css"
    >     title="style"    /><link rel="stylesheet" type="text/css"
    >     href="style/brl.css"    /><script
    >     src="js/jquery-latest.js"></script></head> 
    > ```

`

# java - 使用 JavaCC 删除 C 注释

> ID：13969511
> 
> 赞同：2
> 
> 时间：2012-12-20T09:59:15.107
> 
> 标签：java, parsing, comments, parser-generator, javacc

我知道如何使用 SKIP 声明跳过这些注释，但我需要做的就是获取一个 C 源代码并输出相同的源代码而没有注释。

所以我声明了一个标记 <GENERIC_TEXT: (~[])+ >，它被复制到输出，并且不会跳过注释。我怀疑这个令牌会自己获取所有输入。

有人能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:03:07.723

不要使用`(~[])+`：它会吞噬你所有的输入。这可能就是您没有看到令牌被跳过的原因。

在您的默认词法分析器模式下，遇到`"/*"`（多行注释的开头）时更改为不同的状态。在这个不同的统计中，要么匹配`"*/"`（并切换回默认的词法分析器状态），要么匹配任何字符`~[]`（不是`(~[])+`！）。

快速演示：

## CommentStripParser.jj

```
PARSER_BEGIN(CommentStripParser)

public class CommentStripParser {
  public static void main(String[] args) throws Exception {
    java.io.FileInputStream file = new java.io.FileInputStream(new java.io.File(args[0]));
    CommentStripParser parser = new CommentStripParser(file);
    parser.parse();
  }
}

PARSER_END(CommentStripParser)

TOKEN :
{
  < OTHER : ~[] >
}

SKIP :
{
  < "//" (~["\r", "\n"])* >
| < "/*" > : ML_COMMENT_STATE
}

<ML_COMMENT_STATE> SKIP :
{
  < "*/" > : DEFAULT
| < ~[] >   
}

void parse() :
{
  Token t;
}
{
  ( t=<OTHER> {System.out.print(t.image);} )* <EOF>
} 
```

给定测试文件：

## 测试.java

```
/*
 * comments
 */
class Test {
  // more comments
  int foo() {
    return 42;
  }
} 
```

像这样运行演示（假设您在同一目录中有文件**CommentStripParser.jj**、**Test.java**和 JAR **javacc.jar ）：**

```
java -cp javacc.jar javacc CommentStripParser.jj
爪哇-cp。*.java
爪哇-cp。CommentStripParser Test.java
```

以下将打印到您的控制台：

```
class Test {

  int foo() {
    return 42;
  }
} 
```

*（不再评论）*

请注意，您仍然需要考虑可能如下所示的字符串文字：

```
"the following: /*, is not the start of a comment" 
```

和字符文字：

```
'"' // not the start of a string literal! 
```

# linux - 不能 --enable-pcregrep-libbz2 因为 bzlib.h 没有找到

> ID：13969513
> 
> 赞同：8
> 
> 时间：2012-12-20T09:59:22.817
> 
> 标签：linux, fedora, pcre, yum

我正在尝试安装 pcre 8.32。当我尝试按照本[教程](http://www.linuxfromscratch.org/blfs/view/svn/general/pcre.html)安装时，出现此错误：

```
 **Cannot --enable-pcregrep-libbz2 because bzlib.h was not found**. 
```

然后我尝试了：`sudo yum install libbz2-dev`现在它在说`No package libbz2-dev available.Error: Nothing to do`

我完全糊涂了。接下来我该怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-20T10:15:01.003

尝试找到提供该`bzlib.h`文件的软件包：

```
sudo yum whatprovides */bzlib.h 
```

然后安装那个包

根据您的评论，包名称是`bzip2-devel-1.0.6-3.fc15.i686`，所以这样做：

```
sudo yum install bzip2-devel-1.0.6-3.fc15.i686 
```

# c# - 如何在 C# 中将文本项添加到组合框

> ID：13969522
> 
> 赞同：0
> 
> 时间：2012-12-20T09:59:42.173
> 
> 标签：c#, combobox

我是 Delphi 的 C# 新手。在 Delphi 中，TCombobox.Add 采用单个字符串参数。因此，将字符串项添加到组合框非常简单。

C# 让我感到困惑，因为 Combobox.Items.Add 采用单个对象参数。在某些情况下，我无法将字符串 var 添加到项目列表中。（我还没有确定一个模式；它可能是一个属性）。

谷歌搜索没有结果，直到......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:34:56.317

我在 WPF 应用程序中遇到了同样的问题，使用 VB.Net 我开始 `Component.Items.Add("String")`工作，我的猜测是字符串会自动转换为合适的对象，尝试在你的情况下显式转换字符串（不确定是什么）。

您还可以尝试将您的字符串指定为标签的标题并将该标签添加到控件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:08:16.200

我已经多次要求删除这个问题，因为它对任何人都没有价值。当我感到困惑和困惑，不知道自己在做什么时，我写了它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T09:59:42.173

...我发现[http://www.codeproject.com/Questions/416859/Csharp-Filling-ComboBox-with-an-SQL-table-column](http://www.codeproject.com/Questions/416859/Csharp-Filling-ComboBox-with-an-SQL-table-column)说

```
comboBox1.Items.Add((string) problematicVar); //problematicVar is a string 
```

所以我必须转换为字符串。

我添加了这个自我回答的问题，因为我希望它存在半小时。

# php - PHPQuery没有将元细节提取到数组中

> ID：13969524
> 
> 赞同：2
> 
> 时间：2012-12-20T09:59:47.727
> 
> 标签：php, web-scraping, phpquery

我正在尝试使用 PHPQuery ( [https://code.google.com/p/phpquery/](https://code.google.com/p/phpquery/) ) 从我的网站上抓取数据。我想从页面中提取元信息。

这是我迄今为止尝试过的：

```
$html = phpQuery::newDocumentHTML($file, $charset = 'utf-8');

$MetaItems = [];
foreach (pq('meta') as $keys) {
    $names = trim(strtolower(pq($keys)->attr('name')));
    if ($names !== null && $names !== '') {
        array_push($MetaItems, $names);
    }
}

for ($i=0; $i < count($MetaItems); $i++) {
    $test = 'meta[name="' . $MetaItems[$i] . '"]';
    echo pq($test)->html();
} 
```

上图：在`$MetaItems`我得到所有元属性`name`。这个数组被正确填充。

但是选择和提取文本不起作用。我如何让上面的代码工作？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T02:16:57.557

你想要一个带有 name => content 的 assoc 数组，对吗？尝试这个：

```
$metaItems = array();
foreach(pq('meta') as $meta) {
  $key = pq($meta)->attr('name');
  $value = pq($meta)->attr('content');
  $metaItems[$key] = $value;
}

var_dump($metaItems); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:11:30.543

假设您提取的值与您尝试获取的名称属性的值完全相同...我很确定该`name`属性的值区分大小写。您需要删除 strtolower 和修剪。两者都可能导致问题。我会用这个替换第一部分：

```
$html = phpQuery::newDocumentHTML($file, $charset = 'utf-8');

$MetaItems = [];
foreach (pq('meta') as $keys) {
    $names = pq($keys)->attr('name');
    if (!empty($names) && trim($names)) {
        array_push($MetaItems, $names);
    }
} 
```

希望有帮助

# mysql - MySQL 数据库与用户创建的具有自定义列号的表

> ID：13969525
> 
> 赞同：1
> 
> 时间：2012-12-20T09:59:52.623
> 
> 标签：mysql, database, database-design

我有一个人员表，我希望用户能够与他们创建自定义的多对多信息关系。教育、居住、就业、语言等等。这些可能需要不同数量的列。例如

```
Person_languages(person_fk,language_fk)
Person_Educations(person,institution,degree,field,start,end) 
```

我想到了这样的事情。（不正确的sql）

```
create Tables(
             table_id PRIMARY_KEY,
             table_name_fk FOREIGN_KEY(Table_name),
             person_fk FOREIGN_KEY(Person),
             table_description TEXT
            ) 
```

包含所有自定义表名称和描述的表

```
create Table_columns(
                     column_id PRIMARY_KEY,
                     table_fk FOREIGN_KEY(Tables),
                     column_name_fk FOREIGN_KEY(Columns),
                     rank_column INT,
                    ) 
```

包含每个自定义表中的列以及它们要显示的顺序的表。

```
create Table_rows(
                  row_id PRIMARY_KEY,
                  table_fk FOREIGN_KEY(Tables),
                  row_nr INT,
                 ) 
```

包含每个自定义表的行的表。

```
create Table_cells(
                   cell_id PRIMARY_KEY,
                   table_fk FOREIGN_KEY(Tables),
                   row_fk FOREIGN_KEY(Table_rows),
                   column_fk FOREIGN_KEY(Table_columns),
                   cell_content_type_fk FOREIGN_KEY(Content_types),
                   cell_object_id INT,
                  ) 
```

保存单元格信息的表格。

如果任何自定义表格开始与大多数人一起使用并且变得很大，那么我们的想法可能是将其提取到一个单独的硬编码多对多表格中，仅用于该表格。

这是一个愚蠢的想法吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:05:19.063

我强烈反对这样的设计——你正在走向一个极其分散且难以阅读的设计。

IIUC 你的基本问题是，你有一个人的一组通用（通用）属性，可以通过其他（非通用）属性扩展。

我将通过在 person 表中使用通用属性并创建另外两个表来解决这个问题：`property_types`，它将属性名称转换`INT`为主键，`person_properties`并结合了 person PK、propety PK 和 value。

如果您将此表的 PK 设置为`(person,property)`您可以获得该人的最佳索引位置，这使得请求一个人的所有属性成为一个非常快速的查询。

# android - 将图像从 url 转换为位图

> ID：13969526
> 
> 赞同：1
> 
> 时间：2012-12-20T09:59:51.460
> 
> 标签：android, android-imageview

在我的 android 应用程序中，当我尝试转换图像 url 位图时，图像的大小正在减小。

```
InputStream imageS = new URL(url).openConnection().getInputStream();
FileOutputStream fos = new FileOutputStream(fileName);
Bitmap.createBitmap(BitmapFactory.decodeStream(imageS));

if ((new File(extra)).exists()) {
   splashImage.setImageURI(Uri.parse(extra));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:26:48.440

我正在使用以下代码，它在 URL 中出现......可能对你有用。

```
private Bitmap DownloadImage(String URL)
    {        
//      System.out.println("image inside="+URL);
        Bitmap bitmap = null;
        InputStream in = null;        
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
//        System.out.println("image last");
        return bitmap;                
    }
    private InputStream OpenHttpConnection(String urlString)
            throws IOException
            {
                InputStream in = null;
                int response = -1;

                URL url = new URL(urlString);
                URLConnection conn = url.openConnection();

                if (!(conn instanceof HttpURLConnection))                    
                    throw new IOException("Not an HTTP connection");

                try{
                    HttpURLConnection httpConn = (HttpURLConnection) conn;
                    httpConn.setAllowUserInteraction(false);
                    httpConn.setInstanceFollowRedirects(true);
                    httpConn.setRequestMethod("GET");
                    httpConn.connect();

                    response = httpConn.getResponseCode();                
                    if (response == HttpURLConnection.HTTP_OK) 
                    {
                        in = httpConn.getInputStream();                                
                    }                    
                }
                catch (Exception ex)
                {
                    throw new IOException("Error connecting");            
                }
                return in;    
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T14:39:33.593

试试这个

```
 private Bitmap getBitmap(String url) 
        {
            File f=fileCache.getFile(url);

            //from SD cache
            Bitmap b = decodeFile(f);
            if(b!=null)
                return b;

            //from web
            try {
                Bitmap bitmap=null;
                URL imageUrl = new URL(url);
                HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
                conn.setConnectTimeout(30000);
                conn.setReadTimeout(30000);
                conn.setInstanceFollowRedirects(true);
                InputStream is=conn.getInputStream();
                OutputStream os = new FileOutputStream(f);
                Utils.CopyStream(is, os);
                os.close();
                bitmap = decodeFile(f);
                return bitmap;
            } catch (Exception ex){
               ex.printStackTrace();
               return null;
            }
        }

 private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-30T15:32:56.673

试试这可能对你有用

```
public class MainActivity extends AppCompatActivity {

    private ImageView imageView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        imageView = findViewById(R.id.image);

        String urlImg="https://appscp.dansyo.com/apps-upload/da8c2cdaceaf82e9f066264e38750c8e.jpeg";

            new LoadAsync().execute(urlImg);

    }

    public static Bitmap getBitmapFromURL(String src) {
        try {

            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            return BitmapFactory.decodeStream(input);

        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    private class LoadAsync extends AsyncTask<String, Bitmap, Bitmap>{

        @Override
        protected Bitmap doInBackground(String... strings) {
            return getBitmapFromURL(strings[0]);
        }

        @Override
        protected void onPostExecute(Bitmap bitmap) {
            super.onPostExecute(bitmap);

            imageView.setImageBitmap(bitmap);
        }
    }
} 
```

# extjs - 来自服务器的交互式 html

> ID：13969527
> 
> 赞同：1
> 
> 时间：2012-12-20T09:59:56.043
> 
> 标签：extjs, extjs4

在我的应用程序的某个地方，我从服务器获得了一个格式化的 html，以显示给用户：

```
me.myPanel().update(response.responseText); 
```

现在，我想在这个 html 中的每条记录中添加一些链接（例如“添加评论”）。我在服务器上得到这个！但是如何在 extjs 中捕获此链接以充当按钮左右？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:06:50.983

我会为此使用一个代表。

```
me.myPanel.el.on('click', me._click, me.myPanel, {
    delegate: 'a.linkclass'
}); 
```

在上面的代码中，您的面板正文中有几个 < a > 标记。`delegate` 将确保点击仅适用于您的 a 标签，其中只有 linkclass。

这是一个小提琴：http: [//jsfiddle.net/N9MSC/](http://jsfiddle.net/N9MSC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:56:13.673

> 我建议使用Johan Haest的**[答案](https://stackoverflow.com/a/13970804/701988)**

另一种方法是为按钮提供唯一的 ID。您可以使用`Ext.get('id')`来获取一个`Ext.dom.Element`可以绑定事件的对象，如下所示

```
domElementRef.on('click', function() { alert('hit') }) 
```

您需要在更新完成后执行此操作。

这是一个**[JSFiddle](http://jsfiddle.net/sran/czrt6/13/)**

# android - iOS 和 Java 中的 AES 加密

> ID：13969530
> 
> 赞同：2
> 
> 时间：2012-12-20T09:59:58.927
> 
> 标签：android, ios, encryption

我是这种加密的新手。我正在为 android 和 iOS 创建一个应用程序，其中我必须在服务器端加密（使用 AES Encryprtion）文件并在 iOS 和 Android 应用程序的客户端解密。我在互联网上获得了代码来为 Android 和 iOS 执行 AES 加密和解密，它们工作正常。他们使用java的服务器端。但问题是iOS程序无法解密Java加密文件，即使我得到相同的文件大小，但文件格式不正确。我在下面发布了代码...

Java 加解密：

```
public static byte[] encrypt(byte[] data, byte[] key, byte[] ivs) {
        try {
            Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

            SecretKeySpec secretKeySpec = new SecretKeySpec(key, "AES");
            byte[] finalIvs = new byte[16];
            int len = ivs.length > 16 ? 16 : ivs.length;
            System.arraycopy(ivs, 0, finalIvs, 0, len);
            IvParameterSpec ivps = new IvParameterSpec(finalIvs);
            cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, ivps);
            return cipher.doFinal(data);
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    public static byte[] decrypt(byte[] data, byte[] key, byte[] ivs) {
        try {
            Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
            SecretKeySpec secretKeySpec = new SecretKeySpec(key, "AES");
            byte[] finalIvs = new byte[16];
            int len = ivs.length > 16 ? 16 : ivs.length;
            System.arraycopy(ivs, 0, finalIvs, 0, len);
            IvParameterSpec ivps = new IvParameterSpec(finalIvs);
            cipher.init(Cipher.DECRYPT_MODE, secretKeySpec, ivps);
            return cipher.doFinal(data);
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    } 
```

iOS 解密代码：

```
- (NSData *) decryptFile:(NSString *)key withData:(NSData *)fileData {

    char keyPtr[kCCKeySizeAES128+1]; 
    bzero(keyPtr, sizeof(keyPtr)); 

    NSString* iv = @"12345678";

    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [fileData length];

    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;

    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,keyPtr, kCCKeySizeAES128,
                                          iv /* initialization vector (optional) */,
                                          [fileData bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesDecrypted);

    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer); //free the buffer;
    return nil;
} 
```

给我这个问题的任何解决方案或建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T06:42:44.490

问题出在`iv`参数上。

1）你正在传递一个`NSString*`as `iv`。您可能想要传递实际字节。

2) 根据`iv`CCCrypt 的 api 文档，长度应该是 16（在这种情况下）。请参阅下面的链接：

[http://www.opensource.apple.com/source/CommonCrypto/CommonCrypto-36064/CommonCrypto/CommonCryptor.h](http://www.opensource.apple.com/source/CommonCrypto/CommonCrypto-36064/CommonCrypto/CommonCryptor.h)

# gnuplot - Gnuplot：如何为不同的单位添加 y2 轴刻度

> ID：13969531
> 
> 赞同：17
> 
> 时间：2012-12-20T09:59:59.647
> 
> 标签：gnuplot

我正在从文件中绘制数据。数据点采用公制单位。我想在右侧（y2）显示标准单位的第二个比例。

该文件代表火箭发动机推力随时间的变化。数据以牛顿为单位。我想在左边显示牛顿（这自然会发生），在右边显示磅力。转换是一个简单的因素（将 N 乘以 0.2248 以获得 lbf）。

我可以设置 y2tics，如果我手动设置 y2range，它们会出现在右侧。我不知道如何将 y2range 自动设置为 y1range * 一个因子。

我最终的解决方案是绘制两次，一次在 y1 上以牛顿为单位，一次在 y2 上以磅为单位，并使 y2 绘图几乎不可见：

```
plot '-' using 1:($2*0.2248) with dots axes x1y2 lc rgb 'white' notitle, \
      '' using 1:2 with lines lc rgb '<color>' title '<title>' 
```

* * *

上面的解决方案通常会产生稍微不同的 y 比例：使用 autoragne，gnuplot 会向上取整范围，因此每个轴上的顶部刻度是一个整数，当然不同单位的取整是不同的。

最终，我得到了在每个图中找到最高推力值的 Python 代码，然后我明确地将 yrange 设置为该数字，并将 y2range 设置为该数字 * 0.2248：

```
f.write("set yrange [0:%s]; set y2range[0:%s]\n" % (peak_thrust, peak_thrust*NEWTON_LBF)); 
```

这是最终结果：[http](http://www.lib.aero/hosted/motors/cesaroni_12-15-12.html) ://www.lib.aero/hosted/motors/cesaroni_12-15-12.html （下图示例） ![在此处输入图像描述](../Images/339bc87b4f470d75790e7044865b5023.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T13:21:19.673

在我看来，最简单的方法是简单地缩放数据：

```
set y2tics
plot sin(x) w lines, 5*sin(x) w lines axes x1y2 
```

当然，您正在从文件中绘制数据，所以它看起来更像：

```
set y2tics
FACTOR=0.2248  #conversion factor from newtons to lbf
plot 'datafile' u 1:2 w lines, '' u 1:(FACTOR*$2) w lines 
```

如果您明确设置 yrange（您可能需要这样做）：

```
set yrange [ymin:ymax]
set y2range [ymin*FACTOR:ymax*FACTOR] 
```

* * *

最后，如果你真的想依赖自动缩放，你需要做一些“体操”。

首先，设置一个虚拟终端，这样我们就可以`plot`不制作情节：

```
set term unknown
plot 'datafile' u 1:2  #collect information on our data 
```

现在我们已经收集了有关数据的信息，我们可以设置我们的真实`y2range`

```
FACTOR=0.2248
set y2range [FACTOR*GPVAL_Y_MIN : FACTOR*GPVAL_Y_MAX]
set y2tics nomirror
set ytics nomirror 
```

现在设置终端并绘制数据：

```
set term ...
set output ...
plot 'datafile' u 1:2 w lines 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-11-04T14:15:31.610

Version 5.0 added support for this kind of relations between the `y` and `y2` (or also `x` and `x2`) axis:

```
set xrange[0:370]
set ytics nomirror
set y2tics
set link y2 via 0.2248*y inverse y/0.2248
plot x 
```

![example for <code>set link</code>](../Images/aa76a89f9b2048ce145245eacde384e0.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-04T12:28:31.260

我知道这是一个老问题，答案已经被接受，但我认为值得分享我的方法。

我只是对 x2axis 使用修改后的标签。在你的情况下，这将是

```
set y2tics ("10" 10/0.2248, "20" 20/0.2248 etc etc... 
```

可以这样循环

```
do for [i=0:1000:10] { set y2tics add (sprintf("%i",i) i/0.2248) } 
```

`for`应根据您的数据调整范围的位置（您可以使用和`stats`变量`GPVAL_DATA_Y_MAX`完全放心）。不要忘记

```
set ytics nomirror 
```

这将在（几乎）一个班轮中给出您正在寻找的内容： ![在此处输入图像描述](../Images/0df044db5c38fd32341ef0e8804a7528.png)

如果您想使用网格并将转换后的因子放在 上`x2axis`，例如标签 y=50 N 将对应 y2=11.2 （如果您使用网格，它会保持整洁）您可以这样做

```
do for [i=0:1000:50] { set y2tics add (sprintf("%5.1f",i*0.2248) } 
```

这是结果： ![在此处输入图像描述](../Images/cc3009c0ca5f20105adfb9a4c9caf1e6.png)

# jakarta-ee - 我可以更改war包的配置吗？

> ID：13969535
> 
> 赞同：0
> 
> 时间：2012-12-20T10:00:05.703
> 
> 标签：jakarta-ee, war, continuous-deployment, continuous-delivery

我有一个项目，我在我的开发人员环境中对其进行测试、编译和构建战争包。现在我在测试环境中需要这个包，该包需要/具有其他配置。稍后在生产环境中也是如此。

所以我的问题：

我是否需要使用其他配置再次编译和构建项目？

或者我可以只更改 .war 文件中的配置文件吗？

我试图在持续交付的上下文中实现这一点，它说“只构建一次”，但据我所知/读到你不能更改 .war 包中的文件。所以我有点困惑如何在不进行两次构建的情况下解决这个问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:15:24.733

理想的做法是将战争之外的配置文件作为属性文件什么的。

但是现在我建议你爆炸战争是改变配置文件，因为“只构建一次”对你来说具有更高的优先级。

# c# - 用 C# 更改字符串中文本内容的最简单方法是什么？

> ID：13969537
> 
> 赞同：1
> 
> 时间：2012-12-20T10:00:06.123
> 
> 标签：c#

我在一个看起来像这样的字符串中有 HTML：

```
<div id="control">
    <a href="/xx/x">y</a>
    <ul>
        <li><a href="/C003Q/x" class="dw">x</a></li>
        <li><a href="/C003R/xx" class="dw">xx</a></li>
        <li><a href="/C003S/xxx" class="dw">xxx</a></li>
    </ul>
</div> 
```

我想将其更改为以下内容：

```
<div id="control">
    <a data-href="/xx/x" ><span>y</span></a>
    <ul>
        <li><a data-href="/C003Q/x" class="dw"><span>x</span></a></li>
        <li><a data-href="/C003R/xx" class="dw"><span>xx</span></a></li>
        <li><a data-href="/C003S/xxx" class="dw"><span>xxx</span></a></li>
    </ul>
</div> 
```

我听说过 regex，但我不确定如何使用它来更改地址标签内的内容并同时更改 href。我是否需要使用 regex 两次，我可以更改`<a ... >...</a>`using regex 的内部，还是使用 C# 有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:04:53.587

通常，正则表达式[不适合解析 HTML](https://stackoverflow.com/a/1732454/1583)，例外是众所周知且结构良好的 HTML（即，您确切知道要解析的内容）。

您可以使用一些 HTML 解析器 - [HTML Agility Pack](http://htmlagilitypack.codeplex.com)是一个流行的选项，还有[CsQuery](https://github.com/jamietre/csquery)。

* * *

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

* * *

> CsQuery - .NET 4 的 .C# jQuery 端口
> 
> CsQuery 是 .NET 4 的 jQuery 端口。它实现了所有 CSS2 和 CSS3 选择器、jQuery 的所有 DOM 操作方法以及一些实用方法。大多数 jQuery 测试套件（从 1.6.2 开始）已移植到 C#。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:05:18.033

您可以使用正则表达式替换。使用括号来捕获匹配文本中的值，并使用`$1`等`$2`。使用替换字符串中的值：

```
str = Regex.Replace(
  str,
  "<a href=\"(.+?)\" class=\"dw\">(.+?)</a>",
  "<a data-href=\"$1\" class=\"dw\"><span>$2</span></a>"
); 
```

注意：如果 HTML 代码没有完全相同的形式，替换将不起作用。例如，如果锚标记中有另一个属性，或者属性顺序颠倒，则模式将不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:08:44.987

如果你不想使用 a `Regex`，你可以这样做：

```
string newString = oldString.Replace("dw\">", "dw\"><span>")
                            .Replace("</a", "</span></a"); 
```

# sql - 在 SQL Server 中将列转换为行

> ID：13969543
> 
> 赞同：1
> 
> 时间：2012-12-20T10:00:12.053
> 
> 标签：sql, sql-server

我的问题：我有存储用户名和他们的反馈响应的基表。在每个用户的表格中，我有 2 个问题和 2 个回答。

`ans1 ans2`是文本列，用户可以在其中针对每个问题/答案对输入他们的评论。

输入表：

```
username    question1   question2   opt1    ans1    opt2    ans2
-----------------------------------------------------------------------
user1   ques1   ques2   a   answer1 b   answer2
user2   ques1   ques2   c   answer11    d   answer21 
```

我希望我的输出（对于上表的给定输入）查询应该产生以下格式的结果：

```
Username    Question    Option  Comment
----------------------------------------------------
user1   ques1   a   answer1
user1   ques2   b   answer2
user2   ques1   c   answer11
user2   ques2   d   answer21 
```

我尝试了这个查询来获得结果，但它以某种方式采用了所有可能的组合..请建议..

```
SELECT Username,Question,Answers,Options
FROM 
(SELECT username,opt1,opt2,ans1,ans2,ques1,ques2  
FROM dbo.tab1) p
    UNPIVOT(Question FOR q1 IN (ques1, ques2))AS unpvt1
    UNPIVOT(Answers FOR answer1  IN (ans1, ans2))AS unpvt2
    UNPIVOT(Options FOR a  IN (opt1, opt2))AS unpvt3
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:21:26.163

我认为您可以在不使用 UNPIVOT 的情况下进行查询；请检查

```
select 
    distinct UserName, 
    Question1 AS Question, 
    Opt1 AS OPT, 
    Ans1 AS Comment 
From 
    tblFeedback where Question1='Quest1'
UNION ALL
select 
    distinct UserName, 
    Question2 AS Question, 
    Opt2 AS OPT, 
    Ans2 AS Comment 
From 
    tblFeedback where Question2='Quest2' 
```

# ios - iOS照片权限要求第二次

> ID：13969544
> 
> 赞同：1
> 
> 时间：2012-12-20T10:00:13.307
> 
> 标签：ios, alassetslibrary

我目前正在使用首次请求许可的 alasset。如果想要第二次或每次用户阻止它时弹出权限，怎么可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:12:18.420

没有办法第二次显示权限提示。

处理权限提示的最佳方式是在触发权限提示之前向用户说明（阅读：AssetsLibrary 框架中的调用方法）。如果用户仍然点击“不允许”，那么您应该告诉用户他/她如何通过设置应用授予权限，因为您无法第二次调用提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:06:38.557

该对话框不受应用程序控制，因此没有 API。

您可以在设置应用程序 (IIRC) 中以用户身份重置内容，但不能以编程方式。

* * *

获取当前授权状态：

```
[ALAssetsLibrary authorizationStatus];

(+ (ALAuthorizationStatus)authorizationStatus) 
```

* * *

此外，获取资产获取访问错误块的方法，例如：

```
- (void)assetForURL:(NSURL *)assetURL
        resultBlock:(ALAssetsLibraryAssetForURLResultBlock)resultBlock
       failureBlock:(ALAssetsLibraryAccessFailureBlock)failureBlock 
```

# vba - Excel 10 - 将文本写入下一个单元格

> ID：13969556
> 
> 赞同：1
> 
> 时间：2012-12-20T10:00:44.180
> 
> 标签：vba, excel

我在 Excel 10 中创建了一个宏，因此当我单击一个按钮时，所选文本将添加到第三个电子表格第一列的第一个单元格中。现在我想改进它，以便将所选文本添加到第一列的下一个空单元格（仍在第三个电子表格上）。

到目前为止，我的宏是：

```
Sub Copy()
    Selection.Copy
    Sheets("Feuil3").Select
    Range("B2").Select
    ActiveSheet.Paste
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:22:39.760

您应该能够使用一行来做到这一点：

```
Sub Copy()
    Selection.Copy Sheets("Feuil3").Range("B" & Sheets("Feuil3").Range("B" & Sheets("Feuil3").Rows.Count).End(xlUp).Row + 1)
End Sub 
```

# android - Android - 显示偏移 x,y 的图像

> ID：13969557
> 
> 赞同：1
> 
> 时间：2012-12-20T10:00:46.200
> 
> 标签：android

如何显示在特定 x,y 处偏移的非常大图像的一部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:04:16.240

您可以`Bitmap`使用您的图像创建一个，然后使用该作为源应用[Bitmap.createBitmap()](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int%29)方法。`Bitmap`该方法使用源创建一个新`Bitmap`的，它由给定的`x`and偏移`y`并且具有指定的`width`and `height`。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:09:26.997

使用 android.Graphics.Bitmap 和 BitmapFactory 类

打开你的图像-> 静态位图 decodeFile(String pathName)

提取子集 -> 静态位图 createBitmap(Bitmap source, int x, int y, int width, int height)

然后，您应该将子集添加到 textview 以显示它。

# c# - 使用相同的属性名称和类型多次分配匿名类型

> ID：13969564
> 
> 赞同：1
> 
> 时间：2012-12-20T10:01:03.797
> 
> 标签：c#, .net, linq, initialization, anonymous-types

我有一些代码块，需要在块外使用相同的对象，我可以使用强类型，例如：

```
Person p = null;
if(cond1)
{
    p = new Person();
    p.Name = "Name1";
    p.Age = 25;
}
else if (cond2)
{    
    p = Employees.Select(c=>new Person() {Name = c.FirstName + " " +c.LastName }).First();
    p.Age = 23;
}

if(p != null)
{
    Console.Write(p.Name);
} 
```

我需要通过匿名类型而不是人来做到这一点，我不能使用元组，因为属性名称没有命名，并且每次我需要这样的东西时都不能创建微小的类，这是一个非常简单的情况，但是怎么样LINQ 会导致类似于我的示例的块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:05:55.317

这种事情怎么样

```
 var person = new { Name = "" }; ;

        if (cond1)
        {
            person  = new { Name = "Bob" };
        }
        else
        {
            person  = new { Name = "John" };
        }

        Console.WriteLine(person.Name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:04:15.757

你可以尝试更换

```
Person p = null; 
```

经过

```
dynamic p = null; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:05:21.747

我建议您创建业务对象，这样您就不必使用匿名类型。但是对您的问题的几个快速解决方法是使用反射或将其作为动态类型传递。

编辑：

哦，您是否只是为了限制类型上的属性而创建新的子类型，以便您不必指定您希望 Console.Write() （或任何其他函数）对其可用的属性？我假设您查询的数据在这些函数之外可用，如果它是强类型的，那么您不需要创建匿名类型，而只需使用这些类型......但您必须在控制台中指定。 Write() 行打印哪些属性，这是我推荐的。

# string - 查找一个字符串是否存在于 Pig 中的另一个字符串中

> ID：13969570
> 
> 赞同：15
> 
> 时间：2012-12-20T10:01:17.850
> 
> 标签：string, apache-pig

我想查找一个字符串是否包含 Pig 中的另一个字符串。我发现有一个内置[`index`](http://pig.apache.org/docs/r0.9.1/func.html#indexof)函数，但它只搜索字符而不是字符串。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-20T10:07:37.017

你可以使用这个：

```
X = FILTER A BY (f1 matches '.*the_word_you're_looking_for.*'); 
```

更多信息在这里： http: [//pig.apache.org/docs/r0.10.0/basic.html#comparison](http://pig.apache.org/docs/r0.10.0/basic.html#comparison)

# mysql - 加入或选择多个字段

> ID：13969576
> 
> 赞同：0
> 
> 时间：2012-12-20T10:01:26.663
> 
> 标签：mysql

（下面的例子是假设的，但说明了这个概念）。

使用 MySQL，假设我有 2 个表：

```
userFromID  userToId  moreInfo
1           2         cat
1           3         dog
4           1         bear
3           4         fish 
```

和...

```
userId  someInfo addlInfo
1       m         32
2       f         33
3       m         25
4       f         28 
```

我想查询用户 ID，并从两个表中获取与 user1 共享关系的所有用户的连接信息。

假设第一个表有类似的东西，`alter table thatFirstTable add unique index(userFromId, userToId)`所以不会有任何重复 - 两个 id 之间的每个关系都是唯一的。

谁是“从”或“到”并不重要

因此，如果查询与用户 id 的关系，则所需的结果将是这样的：1

```
userId  moreInfo  someInfo  addlInfo
2       cat       f         33
3       dog       m         25
4       bear      f         28 
```

谢谢。

/编辑这个“有效”，但我怀疑有更好的方法吗？

```
SELECT * FROM users JOIN friends ON friends.userFrom = users.id OR friends.userTo = users.id WHERE users.id != 1 AND friends.userFrom = 1 OR friends.userTo = 1 
```

/EDIT2 - 我更新了示例输出以更好地反映目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:12:48.677

试试这个查询::

```
select tbl2.userid,tbl1.moreinfo,
tbl2.someinfo,tbl2.addinfo
from tbl1 join tbl2
on (tbl1.usertoid = tbl2.userid and tbl1.userfromid = 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:12:52.240

您应该只使用下面的查询连接表。

```
select u.userId, f.moreInfo, u.someInfo, u.addlInfo
from users AS u INNER JOIN friends AS f ON u.userId = f.UserToId
where f.userFrom = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:31:22.933

尝试这个。经过测试且 100% 正常工作

```
select a.userToID, a.moreInfo, b.someInfo, b.addInfo from tbl1 a 
left outer join
tbl2 b on a.userToID = b.userId
where a.userFromID = 1; 
```

# cordova - 如何使用 Windows 8 和 phonegap 2.2 在窗口商店 javascript 项目中使用 C# 模块

> ID：13969578
> 
> 赞同：0
> 
> 时间：2012-12-20T10:01:36.837
> 
> 标签：cordova, windows-8, visual-studio-2012, cordova-2.0.0

我在 Windows 8 和 Visual Studio 2012 中使用 phone gap 2.2 创建了一个窗口商店（javascript）项目。

我需要创建一个页面，它将音频文件发送到服务（范围外）。该音频文件将由用户在运行时选取。

请建议我如何使用 javascript 选择文件，如果不可能，请建议我如何创建 ac# 模块并将其包含在我的 javascript 项目中

谢谢阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:51:00.097

似乎[文件选择器示例（JavaScript）](http://code.msdn.microsoft.com/windowsapps/File-picker-sample-9f294cba)是您正在寻找的

该示例演示了这些任务：

```
Let the user pick one file to access

Uses the FileOpenPicker . PickSingleFileAsync method to call a file picker window and let the user pick a single file. For a walkthrough of this task, see Quickstart: accessing files with file pickers. 
```

如果您仍想包含一些 C# 模块，请查看以下内容

[演练：在 C# 或 Visual Basic 中创建一个简单的组件并从 JavaScript 调用它](http://msdn.microsoft.com/en-us/library/windows/apps/hh779077%28v=vs.110%29.aspx)

# java - 超类重置已经激活的对象

> ID：13969580
> 
> 赞同：4
> 
> 时间：2012-12-20T10:01:39.670
> 
> 标签：java

这有点困难，但我会尽力解释我的问题。我创建了一个程序，其中包含一个超类 ( `RichIndustrialist`) 两个子类（`PredecessorRichIndustrialist`还有一个我没有添加的）和这些子类的 4 个子类（`CrazyRichIndustrialist`以及另外 3 个）。现在，程序太难解释了，但问题其实很简单。我的构造函数在超类中，每个子类都使用它来初始化。每次我创建一个新的子类对象`CrazyRichIndustrialist`时，它都会将所有已经存在的子类（来自任何子类）重置为新对象的值。我不知道如何解决这个问题。先感谢您...

`RichIndustrialist`：

```
package Mortal;

import java.util.Random;

public class RichIndustrialist implements Mortal {

    private static String Name;
    private static double holdings;
    private static int Alive;

    public RichIndustrialist(String Rich_Name, double Rich_holdings) {
        this.Name = Rich_Name;
        this.holdings = Rich_holdings;
        this.Alive = 1;
    }

    public int isAlive() {
        return (this.Alive);
    }

    public void setHoldings(double new_holdings) {
        this.holdings = new_holdings;
    }

    public double getHoldings() {
        return (this.holdings);
    }

    public String getName() {
        return (this.Name);
    }

    public void die() {
        this.Alive = 0;
    }

    public void getHeritage(double heritage) {
        this.holdings = this.holdings + heritage;
    }
} 
```

`PredecessorRichIndustrialist`：

```
package Mortal;

import java.util.Arrays;

public class PredecessorRichIndustrialist extends RichIndustrialist {

    private static String Name;
    private static double holdings;
    private RichIndustrialist[] successors = {};
    private static int Alive;

    public PredecessorRichIndustrialist(String Rich_Name, double Rich_holdings) {
        super(Rich_Name,Rich_holdings);
    }

    public void die() {
        super.die();
    }

    public void Inheritance(double holdings, RichIndustrialist[] successors) {
        int i = 0;
        while (i < successors.length) {
            int Alive = successors[i].isAlive();
            System.out.println(Alive);
            if (Alive == 0) {
                removeSuccessor(successors[i]);
                i++;
            } else {
                i++;
            }
        }
    }

    public void addSuccessor(RichIndustrialist new_successor) {
        RichIndustrialist[] new_successors = new RichIndustrialist[successors.length + 1];
        if (successors.length == 0) {
            new_successors[0] = new_successor;
            successors = new_successors;
        } else {
            for (int i = 0; i < successors.length; i++) {
                new_successors[i] = successors[i];
            }
            new_successors[new_successors.length - 1] = new_successor;
        }
        this.successors = new_successors;
    }

    public void removeSuccessor(RichIndustrialist removed_successor) {
        RichIndustrialist[] new_successors = new RichIndustrialist[this.successors.length - 1];
        int j = 0;
        for (int i = 0; i < this.successors.length; i++) {
            if (!this.successors[i].equals(removed_successor)) {
                new_successors[j] = this.successors[i];
            } else {
                j--;
            }
            j++;
        }
    }

    public RichIndustrialist[] getSuccessors() {
        return successors;
    }
} 
```

`CrazyRichIndustrialist`：

```
package Mortal;

import java.util.Random;

public class CrazyRichIndustrialist extends PredecessorRichIndustrialist {

    private RichIndustrialist[] successors = {};
    private static String Name;
    private static double holdings;
    private static int Alive;

    public CrazyRichIndustrialist(String Rich_Name, double Rich_holdings) {
        super(Rich_Name,Rich_holdings);
    }
    public void die() {
        super.die();
        Inheritance(getHoldings(),getSuccessors());
    }   

    public void addSuccessor(RichIndustrialist new_successor) {
        super.addSuccessor(new_successor);
    }

    public void removeSuccessor(RichIndustrialist removed_successor) {
        super.removeSuccessor(removed_successor);
    }

    public void Inheritance (double holdings , RichIndustrialist[] successors) {
        super.Inheritance(holdings, successors);
        for (int i=0; i<successors.length-1; i++)
        {
            double random = new Random().nextDouble();
            double amount = this.holdings * random;
            successors[i].getHeritage(amount);
            holdings = this.holdings - amount;
        }
        successors[successors.length-1].getHeritage(this.holdings);
        this.holdings = 0;
    }

    public String getName(){
        return super.getName();
    }
    public double getHoldings(){
        return super.getHoldings();
    }
    public RichIndustrialist[] getSuccessors(){
        return super.getSuccessors();
    }
    public void setHoldings(double new_holdings){
        super.setHoldings(new_holdings);
    }
    public int isAlive() {
        return super.isAlive();
    }
    public void getHeritage(double heritage) {
        super.getHeritage(heritage);
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T10:04:07.330

你的大部分领域都是`static`. 这意味着您的类的所有实例共享相同的值。当您调用构造函数时，会修改静态字段，这会影响所有现有实例。

例如：

```
this.Name = Rich_Name; 
```

实际上应该写成：

```
RichIndustrialist.Name = Rich_Name; 
```

[您可以在本教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)中了解实例和类（或静态）成员之间的区别。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T10:04:16.113

以下字段应声明为非静态字段。当这些字段被声明为静态时，每个`RichIndustrialist`实例将共享这些字段及其分配的值。将它们声明为非静态允许每个`RichIndustrialist`实例拥有这些字段的自己的副本，该副本独立于`RichIndustrialist`.

```
private String Name;
private double holdings;
private int Alive; 
```

这是Java教程中对静态的一个很好的描述

> 有时，您希望拥有所有对象共有的变量。这是通过静态修饰符完成的。声明中带有 static 修饰符的字段称为静态字段或类变量。它们与类相关联，而不是与任何对象相关联。类的每个实例共享一个类变量，该变量位于内存中的一个固定位置。任何对象都可以更改类变量的值，但也可以在不创建类实例的情况下操作类变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T10:12:43.827

您的属性/变量是静态的。我们知道静态变量在所有对象之间共享。

这就是最后一个对象将替换变量的现有值的原因

建议：

将您的静态修饰符更改为实例修饰符

从

```
private static String Name;
private static double holdings;
private static int Alive; 
```

至

```
private String Name;
private double holdings;
private int Alive; 
```

我相信你的问题会解决的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T10:05:08.650

您`Name`在所有类中声明成员字段，您应该只在`super`-class 中声明它并让其他`sub`-classes（重新）使用它。

此外，您将该字段声明为`static`，您的类的所有实例都将使用相同的字段，这可能不是您想要的，因此请删除该`static`部分。

您的所有其他成员字段也是如此。

*注意*：不要以大写开头的成员字段：`Name`应定义并用作`name`. 另一方面，类名应该以大写开头！这是一个普遍接受的 Java 约定，并使事情更加清晰/分离。

# facebook - 发布到用户 facebook 上的成就

> ID：13969581
> 
> 赞同：0
> 
> 时间：2012-12-20T10:01:46.400
> 
> 标签：facebook, post, media, social, reward

如果用户想在我的网站上进行测验，并且当他正确回答了 3 个问题时，他可以将其发布到 Facebook。如果用户发布到 Facebook，那么我需要回电到我的网站，以便奖励用户。

这个过程需要哪些步骤？我认为以下，你能证实吗？

1.  用户进入我的网站
2.  用户回答问题
3.  在最后一页上它说'恭喜，做得好' 我允许用户单击链接到某处的按钮。它链接到哪里？
4.  通过点击按钮，一条消息会被发布到“Facebookname; 正确答对3题即可获得奖励！
5.  我收到回调，或者如果不可能，我会在用户在步骤 3 中按下按钮后立即奖励用​​户。

这个流程正确吗？可以添加更多细节（流程、技术、API 参考）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:35:24.697

您可以使用 Open Graph 操作和对象轻松完成此操作。但是这个过程很长，在这里解释一下。我建议你在这里阅读：[https ://developers.facebook.com/docs/concepts/opengraph/](https://developers.facebook.com/docs/concepts/opengraph/)

# asp.net-mvc - 从 MVC 视图重定向

> ID：13969604
> 
> 赞同：0
> 
> 时间：2012-12-20T10:02:59.567
> 
> 标签：asp.net-mvc, razor

有谁知道从一个视图重定向到另一个视图的语法？

我的意思是，我需要在实际视图中添加重定向代码，而不是控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:06:31.243

您不能使用 MVC 代码直接在视图中执行此操作。视图只处理页面的显示，并且只有在确定了请求的最终目的地后才能在代码中到达。但是，您可以使用 JavaScript 和 HTML 执行此操作：

JavaScript：

```
window.location.href = "http://example.com"; 
```

HTML：

```
<meta http-equiv="refresh" content="0;URL='http://example.com/'"> 
```

**W3C 不鼓励这种方法，不应使用这种方法。我仅将其包含在此处以供参考。**

综上所述，您永远不必这样做。如果您尝试在您的 MVC 站点中实现这一点，那么您就是不尊重 MVC 模式，应该重新考虑您的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:06:37.843

我会通过javascript做到这一点

```
 $(function(){
         window.location.href = "www.yournewUrl.com";
}); 
```

或者

```
 $(function(){
             window.location.href = "@Html.ActionLink("linkie, "action", "controller")" 
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:06:43.163

要自动重定向，您可以使用

1.  Javascript：

    `window.location.href="otherView";`

2.  [元刷新](http://www.hicom.net/~oedipus/wai/ua/tests/redirect_test.html)

    `<META HTTP-EQUIV="refresh" CONTENT="N;URL=http://www.foo.com/YourView">`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:08:32.513

你可以用这个

```
<meta http-equiv="refresh" content="10; ,URL=http://whatev.com/dd.html"> 
```

但[不推荐](http://msdn.microsoft.com/en-us/library/ff724055%28v=expression.40%29.aspx)

# c# - 在 Winform 应用程序中允许/阻止 Windows 进程

> ID：13969613
> 
> 赞同：-5
> 
> 时间：2012-12-20T10:03:28.410
> 
> 标签：c#, winforms, system.diagnostics

我制作了一个 winform 应用程序，它允许您终止进程并为启动的新进程提供通知。我需要添加功能来允许/阻止，即黑名单/白名单进程，这样它就不会在我的应用程序运行时运行。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:01:37.647

如果我正确理解您的问题 - 这是如何使用流程的***基本示例。***
这是基于您有一个名为的进程名称列表`blackList`并且您想要终止此列表中的任何进程的假设：

```
List<string> blackList = new List<string>();

// TODO: Populate the list with "black listed" processes

// Kill any process which is in the blacklist
foreach (Process process in Process.GetProcesses())
{
    if (blackList.Any(x => x.ToLowerInvariant().Equals(process.ProcessName.ToLowerInvariant())))
    {
        process.Kill();
    }
} 
```

这应该可以帮助您朝着正确的方向开始……

# cordova - iOS Cordova/PhoneGap App Store 因“未经授权”而被拒绝

> ID：13969614
> 
> 赞同：3
> 
> 时间：2012-12-20T10:03:31.730
> 
> 标签：cordova, ios6, app-store

我们为 Android 和 iOS 6 (XCode 4.5) 编写了一个 Cordova / PhoneGap 2.2 应用程序。它利用公共 API 对我们的私有站点进行 AJAX 调用，并在 AJAX 调用中内置身份验证。Android 提交没有问题。

然而，当试图向苹果提交申请时，一切都走下坡路了。

我们不断被拒绝，因为应用程序返回**未经授权**的消息。这不是从我们的应用程序返回的错误消息，因为调用永远不会到达我们的服务器（审计日志显示了这一点）。此错误在我们的开发、测试或 QA 阶段从未出现过，我们无法重新创建它。

*   我们在 Cordova.plist 的 ExternalHosts 数组中有“*”。
*   该应用程序使用我们的供应/分发帐户签名。
*   应用程序验证并提交没有问题。

我们已经联系了 Apple 的 DTS 团队，但他们的回复没有提供任何见解。

有谁知道如何解决这个问题？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:21:59.063

我要感谢所有审查我的问题并做出回应的人。

该问题是由于 Apple 在构建应用程序时过度缓存 Cordova.plist 文件造成的。

模拟器和我们开发的 iPhone 完美运行，但 Apple 小组无法确定他们无法登录应用程序的原因。

需要构建一个新的 ad-hoc 开发和分发配置文件以及一个全新的 iOS 设备才能确定 Cordova.plist 文件不再与当前配置保持同步。只有在这个单独的设备上运行 CLEAN、BUILD 和 INSTALL 之后，我们才能确定这是缓存问题。该应用程序已通过 Apple 的 DTS 团队验证，我们应该能够在新年后推出。

再次感谢大家。

# javascript - 如何使用 jquery 或 javascript 获取附加到 div 的文本

> ID：13969620
> 
> 赞同：2
> 
> 时间：2012-12-20T10:03:50.017
> 
> 标签：javascript, jquery, ajax, jquery-ui

我将文本附加到 div 中

```
span.insertBefore("#text"); 
```

这里 span 表示正在附加的文本。我怎样才能获得任何其他事件的文本，如按钮单击等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:05:06.380

您需要使用**[选择器](http://api.jquery.com/category/selectors/)**使用 jquery 元素的[text()函数](http://api.jquery.com/text/)

```
txt = $("#text").text();             //id selector
txt = $('.classOfElement').text()   //class selector 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:44:00.907

您还可以使用 javascript 获取文本，例如：

`var text = document.getElementById('#text').innerHtml();`

# oracle - 在 Oracle Essbase 中使用动态成员清除 ASO 区域

> ID：13969621
> 
> 赞同：1
> 
> 时间：2012-12-20T10:03:51.607
> 
> 标签：oracle, mdx, essbase

我在清除 Oracle ESSBASE ASO 多维数据集中的区域时遇到问题，该区域返回如下错误：

> 数据清除区域规范中不允许使用动态成员

当我尝试执行此查询时

> alter database 'aso'.'db' 清除区域中的数据 '{CrossJoin(CrossJoin(CrossJoin(CrossJoin(CrossJoin(CrossJoin(CrossJoin(CrossJoin(CrossJoin({[var1]},{[var2]}),{[var3])) }),{[var4]}),{[var5]}),{[a],[b],[c],[d]}),{Descendants([node],Levels([dim1],0 ))}),{Descendants([dim2],Levels([dim3],0))}),{Descendants([dim4],Levels([node1],0))}),{Descendants([dim5], Levels([node2],0))})}' 物理；

在我的例子中，dim5 中有 0 级动态成员。

如您所见，我尝试了在某些甲骨文论坛中找到的“物理”方法，但没有成功。我想在每个节点的叶级别工作，不包括标记为动态的节点。我怎样才能做到这一点？如何从查询中排除层次结构中的动态成员，并且在我的情况下，只排除动态叶？

非常感谢帮助。

谢谢

# sql - SQL Server 2008 R2 动态更新公式

> ID：13969622
> 
> 赞同：1
> 
> 时间：2012-12-20T10:03:51.243
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

如果可能，在以下情况下我需要您的帮助：我使用 Sql Server 2008 R2 并且我有这张表：

```
create table tblContracts 
([ContractID] [int] NOT NULL,
[PlotNumber] [nvarchar](150) NOT NULL,
[TotalArea] [numeric](12, 0) NULL,
[NotaryCosts] [numeric](12, 2) NULL,
[LandTax] [numeric](12, 2) NULL,
[OtherTaxes] [numeric](12, 2) NULL) 
```

在这张表中，我可以有几条相同`ContractID`但不同的记录`PlotNumber`。我想`PlotNumber`根据相同的`TotalArea`位置来动态分配每个成本`ContractID`。

例如，如果我有下一条记录：

```
1\. ContractID=1,PlotNumber=1,TotalArea=100,NotaryCosts=300,LandTax=10,OtherTaxes=0 and
2\. ContractID=1,PlotNumber=2,TotalArea=200,NotaryCosts=?,LandTax=20,OtherTaxes=0 
```

的公式`NotaryCosts`应该根据下一个公式动态更新：

`NotaryCosts`（对于每个`PlotNumber`）=sum（`NotaryCosts`与相同`ContractID`）/sum（`TotalArea`与相同`ContractID`）* `TotalArea`（针对特定`PlotNumber`）

有可能以某种方式做到这一点吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:01:32.150

我非常同意 Thomas，我认为表格设计需要一些工作以及如何将数据输入系统。无论如何，这里有一个查询可以用作视图，为您提供您正在查找的计算总数，或者可以在更新语句中使用。要自动执行此操作，需要将此逻辑放置在触发器中

```
select
tc.ContractID
,tc.PlotNumber
,tc.TotalArea 
,tc.TotalArea *tcTotals.Cost_Per_Area as [Notary_Cost]
,tc.LandTax
,tc.OtherTaxes 
from
tblContracts  tc
inner join
(
select 
ContractID
,SUM(notaryCosts) as [sum_NotaryCost]
,SUM(TotalArea) as [sum_TotalArea]
,SUM(notaryCosts)/SUM(TotalArea) as [Cost_Per_Area]
from 
tblContracts
group by
ContractID
) tcTotals
on
tc.ContractID =tcTotals.ContractID 
```

# django - Django-rest-framework json 转储

> ID：13969623
> 
> 赞同：2
> 
> 时间：2012-12-20T10:04:06.203
> 
> 标签：django, json, zip, django-rest-framework

我使用 django-rest-framework 制作了一个简单的 JSON API，我希望能够将 5 个集合下载为一个包含 JSON 文件的集合的 zipfile。（我的应用需要离线转储数据）。

我正在考虑编写一个视图，例如，`/download/`将我所有 s 的输出捆绑`MyModelList.as_view()`在一个 zip 中并提供它。

这样做的最佳方法是什么？我可以使用 urllib/Requests 直接查询我的 API，但调用整个 http 堆栈似乎还有很长的路要走……

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:43:11.097

你可以使用`MyModelList.as_view()(request, format="json").rendered_content`你提到的。根据您的设置，您还可以直接调用序列化程序，而不是一直通过您的模型。当然，这取决于您是否在视图中执行任何特殊操作，或者您是否只是传递序列化的模型数据。

要压缩这些文件，请使用 Python 的[zipfile 模块](http://docs.python.org/2/library/zipfile.html)。有关其他提示，请参阅[https://stackoverflow.com/a/9644831/27401](https://stackoverflow.com/a/9644831/27401)和[https://stackoverflow.com/a/908293/27401 。](https://stackoverflow.com/a/908293/27401)总结：

*   使用[StringIO](http://docs.python.org/2/library/stringio.html)创建类似文件的对象（而不是临时文件）。

*   在该 StringIO 上使用 zipfile`.writestr('filename-in-zip.json', your_json_string)`添加内容。

*   当将 zipfile 作为 django 响应返回时，不要忘记设置`Content-Disposition`标题，如[https://stackoverflow.com/a/909088/27401所示](https://stackoverflow.com/a/909088/27401)

# javascript - javascript 示例显示内容框

> ID：13969626
> 
> 赞同：0
> 
> 时间：2012-12-20T10:04:10.530
> 
> 标签：javascript, html

我试图找到javascript代码，当我翻转图像时，会在图像下方出现一个框并向下扩展（就像剧院中的电影屏幕如何从天花板滚动到地板一样）。在该框中，还会出现我之前添加的内容，该内容描述了上面的图像。已经存在于图像下方，我有一个包含内容的 div...我还希望在上述框向下扩展时将这个 div 向下推。

有什么建议么？

非常感谢您！

C*

忘记了我正在使用的代码......所以这里发生的是我有一张图片，在它下面有一个小盒子，当我翻转那个小盒子时它会改变颜色。所以，我想补充一点，当我滚动到那个小框时，不仅它仍然会改变颜色，而且新的垂直扩展框会出现在它的下方。我在 *.js 文件中有 javascript 来处理已经存在的翻转效果，但它很长，我不确定是否应该添加它（它是由 Dreamweaver 在我创建翻转图像时创建的）。

```
<div class="images">

<figure class="images">
<img src="../images/Flower2.jpg" width="300" height="199" alt="Life">
</figure>

<figcaption class="content"><a class="typeB" href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image3','','../graphics/life2.jpg',4)"><img src="../graphics/life1.jpg" width="300" height="25" id="Image3" /></a>
</figcaption>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:14:45.183

只要要扩展的 div 直接位于标记中的图像之后，就应该这样做：

```
$(".class_for_images").on("mouseenter mouseleave", function() {
    var content = $(this).next();

    if (content.is(":visible")) {
        content.slideUp();
    } else {
        content.slideDown();
    }
}); 
```

如果您想要更多，或者它不起作用，您需要发布一些代码，以便我们可以提供更详细的答案......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:15:48.547

您在问题中没有提供有关当前设置的太多信息，但假设您的**HTML**设置如下：

```
<div>
    <img id="tux" src="http://upload.wikimedia.org/wikipedia/commons/1/1c/Crystal_128_penguin.png" />
    <div id="tux_desc" class="imgDesc" style="display: none">
        <p>A cute penguin!</p>
    </div>
</div>
<div>
    <p>This text is part of the normal document flow</p>
</div> 
```

然后您可以使用以下**JavaScript**（它使用 jQuery）：

```
$('#tux').hover(
    function() {
        $('#tux_desc').slideDown();
    },
    function() {
        $('#tux_desc').slideUp();
    }); 
```

你可以看到它在这里工作：http: [//jsfiddle.net/wbAxm/1](http://jsfiddle.net/wbAxm/1)

# powershell - 根据创建时间搜索文件

> ID：13969631
> 
> 赞同：2
> 
> 时间：2012-12-20T10:04:22.183
> 
> 标签：powershell

我有一台相机，每小时拍摄一张正在建造的建筑物的照片。

这已经在一年中每天生成 24 张图片并将它们存储在一个文件夹中。

动画的夜间图片太多，所以我想删除在`xx/xx/xxxx 08:00 AM - xx/xx/xxxx 05:00 PM`.

使用 Powershell 或 CMD，我想按创建时间搜索文件，其中日期是通配符（任何日期）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:47:24.050

给这个试试。更改过滤器通配符以匹配您的图像扩展名。文件将移至 c:\NightPictures 文件夹。

```
Get-ChildItem c:\pictures -Filter *.jpg | 
Where-Object {$_.CreationTime.Hour -gt 8 -and $_.CreationTime.Hour -lt 17} |
Move-Item -Destination c:\NightPictures 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:16:26.053

就像是 ：

```
$source= get-ChildItem -Path  "C:\mappe\test" -filter "*.jpg"
$destination="c:\mappe"
$source |
    where { 
        (get-date($_.creationTime)).Hour -lt 17 -and (get-date($_.creationTime)).Hour -gt 8 
    }|
    Move-Item  -Destination $detination 
```

# servlets - 下载文件 Servlet - 文件内容包含二进制

> ID：13969640
> 
> 赞同：0
> 
> 时间：2012-12-20T10:04:58.280
> 
> 标签：servlets, download

我曾尝试开发一个允许用户下载文件的 servlet，但它允许用户下载文件，但文件内容包含二进制垃圾而不是人类可读的。我可以知道可能是什么原因吗？

代码

```
int length = -1, index = 0;
        byte[] buffer = null;
        String attachmentPath = null, contentType = null, extension = null; 
        File attachmentFile = null;
        BufferedInputStream input = null;
        ServletOutputStream output = null;
        ServletContext context = null;

        attachmentPath = request.getParameter("attachmentPath");
        if (attachmentPath != null && !attachmentPath.isEmpty()) {
            attachmentFile = new File(attachmentPath);

            if (attachmentFile.exists()) {
                response.reset();

                context = super.getContext();  
                contentType = context.getMimeType(attachmentFile.getName());       
                response.setContentType(contentType);

                response.addHeader("content-length", String.valueOf(attachmentFile.length()));  
                response.addHeader("content-disposition", "attachment;filename=" + attachmentFile.getName());

                try {
                    buffer = new byte[AttachmentTask.DEFAULT_BUFFER_SIZE];
                    input = new BufferedInputStream(new FileInputStream(attachmentFile));
                    output = response.getOutputStream();

                    while ((length = input.read(buffer)) != -1) {
                        output.write(buffer, 0, length);
                        index += length;

//                      output.write(length);
                    }

                    output.flush();

                    input.close();
                    output.close();

                } catch (FileNotFoundException exp) {
                    logger.error(exp.getMessage());
                } catch (IOException exp) {
                    logger.error(exp.getMessage());
                }

            } else {
                try {
                    response.sendError(HttpServletResponse.SC_NOT_FOUND);
                } catch (IOException exp) {
                    logger.error(exp.getMessage());
                }
            } 
```

它与将文件写入二进制或文本模式或浏览器设置有关吗？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:23:20.827

问题不在目前给出的代码中。您正确地使用`InputStream`/`OutputStream`而不是`Reader`/`Writer`来流式传输文件。

问题的原因更有可能是您创建/保存文件的方式。当您使用 a`Reader`和/或未`Writer`指示对正在读/写的字符使用正确的字符编码时，此问题将显现出来。也许您正在创建上传/下载服务，而问题出在上传过程本身？

假设数据是 UTF-8 格式，您应该按如下方式创建阅读器：

```
Reader reader = new InputStreamReader(new FileInputStream(file), "UTF-8")); 
```

和作者如下：

```
Writer writer = new OutputStreamWriter(new FileOutputStream(file), "UTF-8")); 
```

但是，如果您实际上不需要在每个字符的基础上操作流，而只是想传输未修改的数据，那么您实际上应该一直使用`InputStream`/ `OutputStream`。

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# c# - System.Data.Entity 中不存在基础设施

> ID：13969642
> 
> 赞同：2
> 
> 时间：2012-12-20T10:05:00.383
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在尝试使用实体框架创建 MVC 项目。我在解决方案中有 3 个项目

*   SerialTracker.Common
*   SerialTracker.Model
*   SerialTracker.Web

Common 和 Model 像库一样编译，所以 Web 正在使用它们。模型也使用Common。

我的问题在这里：

模型从 *.edmx 生成 ==> *.Context.tt ==> whitch 自动生成 *.Context.cs：

```
namespace SerialTracker.Model
{
    using System;
    using System.Data.Entity;
    using System.Data.Entity.Infrastructure;

    public partial class SerialTrackerEntities : DbContext
    {
        public SerialTrackerEntities()
            : base("name=SerialTrackerEntities")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        }

        public DbSet<Role> Role { get; set; }
        public DbSet<User> User { get; set; }
    }
} 
```

我有错误，System.Data.Entity 中不存在 Infrastucture。我尝试添加一些参考，但我认为问题出在另一个地方。

//编辑：我为这个项目重新安装了 NuGet 包，但现在我有错误并且不存在

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:49:26.717

S̶o̶ ̶I̶ ̶m̶a̶n̶u̶a̶l̶y̶ ̶a̶d̶d̶e̶d̶ ̶f̶i̶l̶e̶ ̶S​​̶e̶r̶i̶a̶l̶T̶r̶a̶c̶k̶e̶r̶.̶t̶t̶ ̶t̶o̶ ̶S̶e̶r̶i̶a̶l̶T̶r̶a̶c̶k̶e̶r̶.̶e̶d̶m̶x̶.̶ T̶h̶i̶s̶ ̶f̶i̶l̶e̶ ̶I̶ ̶c̶o̶p̶i̶e̶d̶ ̶f̶r̶o̶m̶
̶a̶n̶o̶t̶h̶e̶r̶ ̶p̶r̶o̶j̶e̶c̶t̶.̶ N̶o̶w̶ ̶i̶s̶
̶p̶r̶o̶j̶e̶c̶t̶ ̶g̶e̶n̶e̶r̶a̶t̶e̶ ̶e̶n̶t̶i̶t̶i̶e̶s̶ ̶R̶i̶g̶h̶t̶.̶

**编辑（04-29-2014）**：
更新答案：
您可以删除文件 *.tt 并使用
Add -> New Item -> EF 5.x DbContextGenerator （或 EF 6.x ...）重新创建它

# javascript - 你如何检查给定的IP是否是内部的

> ID：13969655
> 
> 赞同：5
> 
> 时间：2012-12-20T10:05:22.643
> 
> 标签：javascript

你如何检查给定的 IP 是否是内部的，或者不是只使用 javascript？

例如，如果您的 IP 为 192.168.1.1，则脚本应对此进行验证，并在这是内部或外部 IP 时发出警报。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T10:07:26.650

如果您的意思是私有，请确保它在以下范围之一：

> 私有 IP 地址范围
> 
> 可用 IP 的范围和数量如下：
> 
> 10.0.0.0 - 10.255.255.255 地址：16,777,216
> 
> 172.16.0.0 - 172.31.255.255 地址：1,048,576
> 
> 192.168.0.0 - 192.168.255.255 地址：65,536

像这样的功能应该有帮助：

```
function isPrivateIP(ip) {
   var parts = ip.split('.');
   return parts[0] === '10' || 
      (parts[0] === '172' && (parseInt(parts[1], 10) >= 16 && parseInt(parts[1], 10) <= 31)) || 
      (parts[0] === '192' && parts[1] === '168');
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-16T12:38:43.893

您可以使用`ipaddr.js`库并检查它是否返回`"private"`：

```
const ipaddrJs = require('ipaddr.js');
ipaddrJs.parse('192.168.5.1').range()
> 'private' 
```

[https://github.com/whitequark/ipaddr.js/blob/master/lib/ipaddr.js](https://github.com/whitequark/ipaddr.js/blob/master/lib/ipaddr.js)

如果您使用 Node.js，请看这里：[https ://www.npmjs.com/package/ipaddr.js](https://www.npmjs.com/package/ipaddr.js)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T10:09:23.620

内部 IP 如下：

```
10.0.0.0 - 10.255.255.255
172.16.0.0 - 172.31.255.255
192.168.0.0 - 192.168.255.255 
```

为他们编写正确的正则表达式。

```
/10\.\d+\.\d+\.\d+/
/192\.168\.\d+\.\d+/ 
```

我留给你找出 172.xxx 范围的正确正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-07T10:53:33.657

试试这个！

```
 var id = "10.10.10.10";
  if (/^(10)\.(.*)\.(.*)\.(.*)$/.test(id)){
    //10.x.x.x
  }else if (/^(172)\.(1[6-9]|2[0-9]|3[0-1])\.(.*)\.(.*)$/.test(id)){
    //172.16.x.x - 172.31.255.255
  }else if (/^(192)\.(168)\.(.*)\.(.*)$/.test(id)){
    //192.168.x.x
  }else {
    //else
  } 
```

# wcf - WCF 的自定义异常

> ID：13969656
> 
> 赞同：0
> 
> 时间：2012-12-20T10:05:28.327
> 
> 标签：wcf, exception-handling, custom-exceptions, faultexception

嘿，我正在使用 Oleg Sych 的解决方案通过 WCF 处理异常： [链接](http://www.olegsych.com/2008/07/simplifying-wcf-using-exceptions-as-faults/)

一切都适用于已知异常（例如 InvalidOperationException 和 SystemException），但是当我尝试使用自己的自定义异常时，它不起作用，并且我收到以下 wcf 异常：“从管道读取错误：管道已结束。(109, 0x6d)"

这是我的自定义例外：

```
[KnownType(typeof(SessionExpiredException))]
[global::System.Serializable]
[DataContract]
public class SessionExpiredException : Exception
{
    public SessionExpiredException() { }
    public SessionExpiredException(string message) : base(message) { }
    public SessionExpiredException(string message, Exception inner) : base(message, inner) { }
    protected SessionExpiredException(
      System.Runtime.Serialization.SerializationInfo info,
      System.Runtime.Serialization.StreamingContext context)
        : base(info, context) { }
} 
```

我究竟做错了什么？我错过了一个属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:06:10.463

您无需将自定义错误建模为异常，而是将其建模为带有 DataMembers 的 DataContract，以获取您打算返回的信息。然后，在 WCF 服务上，只需返回您的类型的 FaultException。

这个页面有一个关于如何建模的很好的示例：http: [//msdn.microsoft.com/en-us/library/ms752208.aspx](http://msdn.microsoft.com/en-us/library/ms752208.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-20T11:23:49.360

```
public SessionExpiredException() { }
    public SessionExpiredException(string message) : base(message) { }
    public SessionExpiredException(string message, Exception inner) : base(message, inner) { }
    protected SessionExpiredException(
      System.Runtime.Serialization.SerializationInfo info,
      System.Runtime.Serialization.StreamingContext context)
        : base(info, context) { } 
```

**上述解决方案是错误的。**

# c# - 关于排序扩展的一些误解

> ID：13969663
> 
> 赞同：0
> 
> 时间：2012-12-20T10:05:45.003
> 
> 标签：c#, .net, ienumerable

我有以下代码示例：

```
 List<int> list = new List<int>();

    list.Add(1);
    list.Add(2);
    list.Add(3);
    list.Add(4);
    list.Add(5);
    list.Add(6);
    list.Add(7);

  list.OrderByDescending(n=>n).Reverse(); 
```

但是当我使用这个时：

```
list.OrderByDescending(n=>n).Reverse(); 
```

我没有得到想要的结果。

如果不是上面的语句，我使用这个：

```
list.Reverse(); 
```

我得到了想要的结果。

知道为什么我没有使用第一条语句得到想要的结果吗？

我相信我在理解扩展时遗漏了一些东西。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:11:04.270

该[`list.Reverse()`](http://msdn.microsoft.com/en-us/library/b0axc2h2.aspx)方法就地反转列表，因此您的原始列表`list`被更改。

`.OrderByDescending()`扩展方法会生成一个新列表（或者更确切地说是一个）`IEnumerable<T>`并保持原始列表`list`不变。

**编辑**
要获得两个列表，对于两个排序顺序：

```
List<int> upList = list.OrderBy(n => n).ToList();
List<int> downList = list.OrderByDescending(n => n).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:10:59.217

**编辑**：所以问题似乎是你认为`Enumerable`扩展会改变原始集合。不，他们没有。实际上，它们会返回您需要分配给变量的新内容：

```
IEnumerable<int> ordered = list.OrderByDescending(n => n);
foreach(int i in ordered)
    Console.WriteLine(i); 
```

* * *

`OrderByDescending`降序（最高优先），这显然是您想要的。所以我不明白你为什么后来把它反转了。

所以这应该会给你预期的结果：

```
var ordered = list.OrderByDescending(n=> n); 
```

这将返回一个“任意”订单：

```
list.Reverse() 
```

因为它只是颠倒了您添加`int`s 的顺序。如果您以有序的方式添加它们，则根本不需要订购。

一般来说：使用`OrderBy`or`OrderByDescending`如果你想订购一个序列，`Reverse`如果你想反转序列，那不一定是一个顺序（至少是令人困惑的）。

# java - Findbugs 显示“BIT_ADD_OF_SIGNED_BYTE”错误

> ID：13969664
> 
> 赞同：0
> 
> 时间：2012-12-20T10:05:45.580
> 
> 标签：java, findbugs

我编写了以下代码，但 findbugs 显示此错误：`BIT_ADD_OF_SIGNED_BYTE`. 我尝试了很多，但可能是我没有正确理解左移的概念。

```
void problem() {
    byte [] byteArray = {1, 2, 3, 4, 5};
    int localOne = 0;
    for(int i = 0; i < 4; i++) {
        localOne = (localOne<<8) + byteArray[i]; 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:07:48.637

您正确地进行了轮班，您的（可能的）错误是在将签名添加`byte`到`int`

由于符号扩展，您需要这样做：

```
localOne = (localOne<<8) + (0xFF & byteArray[i]); 
```

假设您有字节`80`（十六进制），即`1000 0000`（二进制），这是`-128`（十进制），因为二进制补码表示。现在，当将其添加到 an 时，`int`它首先会转换为`int`. 结果`int`不是**_**

```
0000 0000  0000 0000  0000 0000  1000 0000 
```

（二进制）它将是

```
1111 1111  1111 1111  1111 1111  1000 0000 
```

（二进制）因为符号扩展。要获得第一个，您必须按位应用，而`0xFF`这就是二进制：

```
0000 0000  0000 0000  0000 0000  1111 1111 
```

# jquery - jQuery jrac 和 jQuery .hide() .show() 冲突错误

> ID：13969665
> 
> 赞同：0
> 
> 时间：2012-12-20T10:05:47.267
> 
> 标签：jquery

我正在使用[jQuery Resize and Crop (jrac)](http://www.trepmag.ch/z/jrac/example/)。在我的示例代码[jsfiddle](http://jsfiddle.net/KpFwb/5/)中，每件事都可以正常工作。

但是当我尝试隐藏显示图像编辑器的 Div 区域时，我发现了错误。
我使用下面的代码来隐藏我的 div。

```
 $('#ImageZone').hide(); 
```

上层代码实际上有效，它隐藏了我想要隐藏的内容。但是在我调用下面的代码之后，错误开始发生。

```
$('#ImageZone').show(some int value); 
```

它显示[不正确的值](http://jsfiddle.net/SMTDc/5/)，如下所示

![在此处输入图像描述](../Images/fd012d32b5a426c6b2e800b52b760f6f.png)

但是在我删除下面的代码后，[一切都恢复正常](http://jsfiddle.net/KpFwb/5/)了。

```
$('#ImageZone').hide(); 
```

![在此处输入图像描述](../Images/9c74324d1e604fd3f4f19ed8894ea594.png)

所以让我知道那个错误是什么。那是jquery错误吗？还是什么东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:18:43.260

我的预感是：

*   使用`<input type="number"`代替文本（在 html5 [http://www.w3schools.com/html/html5_form_input_types.asp](http://www.w3schools.com/html/html5_form_input_types.asp)中可接受）
*   给每个人`<td><input`一个id。
*   在显示整个 div 之前，`<td><input id = "my_id"`使用要显示的值填充每个 div，例如`$("#my_id").val(some int value);`

# ruby-on-rails - 在本地安装 RMagick gem，但无法使用 bundle install [windows 7（32 位）]

> ID：13969666
> 
> 赞同：1
> 
> 时间：2012-12-20T10:05:52.720
> 
> 标签：ruby-on-rails, ruby

我能够使用 gem install 命令在我的 Windows 7 机器上安装 rmagick-2.6.0-x86-mswin32.gem gem，并收到以下成功消息：

```
 D:\dev>gem install rmagick-2.6.0
 Successfully installed rmagick-2.6.0-x86-mswin32
 1 gem installed
 Installing ri documentation for rmagick-2.6.0-x86-mswin32...
 Installing RDoc documentation for rmagick-2.6.0-x86-mswin32... 
```

但是，当我尝试使用 bundle install （与 Gemfile 中提到的相同版本）进行安装时，它会引发以下错误消息：

```
 Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension
  .  D:/Ruby187/bin/ruby.exe extconf.rb
 checking for Ruby version >= 1.8.2... yes
 checking for gcc... yes
 checking for Magick-config... no
 Can't install RMagick 2.6.0\. Can't find Magick-config in D:\Ruby187\bin;D:\Ruby1
 .... 
```

我已经安装了 ImageMagick 并且它的路径包含在环境变量中，但是上面错误消息中提到的路径似乎有所不同（？！）

当我现在输入 rails -v 时，我收到以下消息：

```
D:\dev>rails -v
←[31mCould not find gem 'rmagick (= 2.6.0) x86-mingw32' in the gems available on
this machine.←[0m
←[33mRun `bundle install` to install missing gems.←[0m 
```

1.  我是否需要进行任何其他更改/设置才能使用 bundle install 将这个 gem 与我的 gemfile 一起安装？

2.  此外，我实际上需要一个较早的 gem '2.5.2'，但该 gem 的 win32 特定版本似乎不可用，有没有办法得到它？

我暂时需要在 Windows 上进行此开发，以便暂时切换到任何其他操作系统。此外，由于这是我正在开发的遗留应用程序，我需要坚持使用 rmagick 并且不能切换到任何其他解决方案。

环境信息：Ruby：1.8.7 Rails：

请帮忙！

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:39:59.303

嘿，您是否尝试过安装 Devkit，用于在 Windows 上安装带有本机扩展的 gem。

尝试以下链接中的步骤，并检查 Devkit 是否已安装在您的路径变量中，尝试打开新的命令 shell 并安装 gems。

[http://doelsengupta.blogspot.in/2010/10/unable-to-download-gem-with-native.html](http://doelsengupta.blogspot.in/2010/10/unable-to-download-gem-with-native.html)

一切顺利！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:25:40.070

我一直遇到这个问题，但最终能够使用@Martin Cohen 的以下解决方案解决它 - 在按照他的建议修改 gemspec 文件并重建它之后，我能够使用 bundle install 成功安装 rmagick gem ...

[https://stackoverflow.com/a/5595274/1865578](https://stackoverflow.com/a/5595274/1865578)

干杯！

# iphone - 我可以在我的 iphone 应用程序中使用 ASIHTTPRequest 吗？

> ID：13969670
> 
> 赞同：-3
> 
> 时间：2012-12-20T10:06:14.287
> 
> 标签：iphone, ios, xcode

我可以在我的 ios 应用程序中使用 ASIHTTPRequest 吗？

它还存在吗？

我在 ios 4.3 中工作。所以我不能使用 AFNetworking 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:09:46.733

不再支持 ASIHTTPRequest。见[作者的博客](http://allseeing-i.com/%5Brequest_release%5D;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:11:58.460

我已经使用 ASIHTTPRequest 开发了应用程序

请按照以下链接避免 ARC 问题。

[http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:09:17.543

是的，它存在并且工作正常，但它不再被积极支持和开发。我不会使用它，而是查看 AFNetworking

# java - request.getSession().getId() 和 request.getSession(false) 的区别？

> ID：13969672
> 
> 赞同：25
> 
> 时间：2012-12-20T10:06:23.880
> 
> 标签：java, javascript

就会话而言，这些调用实际上意味着什么？

```
System.out.println("print1: "+request.getSession().getId());
System.out.println("print2: "+request.getSession(false)); 
```

**输出**

```
print1: D94146A347D95563186EB7525726336B
print2: org.apache.catalina.session.StandardSessionFacade@d52411 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T10:10:34.537

`HttpSession session = request.getSession();`在服务方法中，我们请求会话，并且每件事都会自动获取，例如 HttpSession 对象的创建。无需生成唯一的会话 ID。无需创建新的 Cookie 对象。一切都在幕后自动发生。

只要调用`getSession()`请求对象的方法，容器就会创建一个新的会话对象，并生成一个唯一的会话 ID 来维护会话。这个会话 id 被传输回响应对象，因此每当客户端发出任何请求时，它也应该将会话 id 与请求对象附加在一起，以便容器可以识别会话。

`request.getSession(false)`：此方法将检查请求是否已存在会话。如果它存在，那么它将返回已经存在的 Session。如果此请求的 Session 不存在，则此方法将返回 NULL，这意味着此方法表示该请求以前没有 Session。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-20T10:11:33.700

*简而言之*——

`request.getSession().getId()`- 返回一个字符串，其中包含分配给此会话的唯一标识符。标识符由 servlet 容器分配，并且依赖于实现。

`request.getSession(false)`- 如果没有当前会话，则返回会话对象或 null。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T10:12:18.603

第一行将返回服务器上的“会话 ID”。第二行将返回会话对象。那么将在 system.out 上打印的内容是`request.getSession(false).toString();`

默认实现`toString`返回“对象 id”。`Object id`在会话方面是不一样的`session id`。会话可以在集群中进行序列化和复制，因此在每个 JVM 上集群的每个节点上，它可能具有自己的对象 ID（但应该具有相同的会话 ID）。

此处解释了使用布尔值调用 get session： [http](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession(boolean) ://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession(boolean )

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-07T06:39:32.767

```
 request.getSession() 
```

此方法将检查现有会话；如果存在则返回，否则为请求创建一个新会话。

```
 request.getSession().getId(); 
```

这将返回该会话的唯一标识符。

```
 request.getSession(false); 
```

此方法采用布尔值。此方法检查该用户（请求）是否存在现有会话；如果存在，则返回该会话，否则返回 null，即不会创建新会话。

只是为会话添加更多信息。

```
 request.getSession(true); 
```

此方法检查该用户（请求）的现有当前会话，如果会话存在，它将返回该会话，否则它将为该用户创建新会话。

```
 request.getSession() works like request.getSession(true) 
```

参考： [http ://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-20T10:13:23.807

```
request.getSession().getId() 
```

返回会话的 id。

`Request.getsession(false)`返回已经存在的会话对象。它不会返回任何东西，即如果会话不存在，它将返回 null 。而使用`true`参数它将创建一个新的会话对象并在不存在会话时返回它

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T10:26:59.750

```
request.getSession().getId(); 
```

将返回分配给已启动会话的唯一字符串 ID。id 的生成是特定于供应商的，例如 apache、jboss 等。

```
request.getSession(false); 
```

如果会话对象关联，它将返回与特定请求关联的会话对象，如果它不是由服务器启动，它将返回 null。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T10:43:00.693

```
request.getSession().getId(); 
```

这将返回现有会话的 id。

```
Request.getsession(false) 
```

如果会话存在，它将返回会话，否则将返回 null。

并且 Request.getsession(false) 表示：如果会话存在，则给我会话，否则不要创建新实例（因此返回 null）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-25T12:17:20.290

```
request.getSession().getId(); 
```

返回分配给此会话的唯一标识符。它有返回类型的字符串。

```
request.getSession(false) 
```

如果已经存在则返回 HttpSession 对象，否则返回 null。

# system.reactive - 你使用响应式扩展做什么？

> ID：13969673
> 
> 赞同：2
> 
> 时间：2012-12-20T10:06:24.943
> 
> 标签：system.reactive

我对 Rx 框架的了解非常简单，虽然我了解它的一些功能，但我不确定在哪里使用它是有意义的，尤其是在“现实生活”场景中，例如分布式 Web 应用程序。

你用 Rx 吗？哪个版本？做什么的？

# sql - 在sql查询中给出数据

> ID：13969675
> 
> 赞同：0
> 
> 时间：2012-12-20T10:06:30.820
> 
> 标签：sql

我想在没有表结构的情况下查询数据以进行测试。我只需要一个名为“title”的列，结果应该返回条目“name1”、“name2”和“name3”。

我没有成功尝试

```
SELECT 'name1' 'title', 'name2' 'title' 
```

而且我不知道要在这个主题上搜索什么术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:08:35.430

使用`UNION ALL`：

```
SELECT 'name1' AS title
UNION ALL
SELECT 'name2' AS title
UNION ALL
SELECT 'name3' AS title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:07:54.707

您没有指定您正在使用的 DBMS...

对于**MySQL**和**MS SQL** ，您可以尝试：

```
SELECT 'name1' as title
UNION
SELECT 'name2' 
UNION
SELECT 'name3' 
```

*   [MySQL 的 SQL 小提琴](http://sqlfiddle.com/#!2/d41d8/5107)
*   [MsSQL 2008 的 SQL 小提琴](http://sqlfiddle.com/#!3/d41d8/7325)

对于**Oracle**，您可以尝试：

```
SELECT 'name1' as title from DUAL
UNION
SELECT 'name2'  from DUAL
UNION
SELECT 'name3'  from DUAL 
```

*   [Oracle 11gR2 的 SQL 小提琴](http://sqlfiddle.com/#!4/d41d8/5307)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:08:40.923

```
SELECT 'name1' as 'title'
UNION
SELECT 'name2' as 'title' 
```

# javascript - Phonegap 和 SQLite 中奇怪的数据库插入问题

> ID：13969676
> 
> 赞同：0
> 
> 时间：2012-12-20T10:06:35.473
> 
> 标签：javascript, sqlite, cordova

我有以下 Phonegap SQLlite 插入语句：

```
tx.executeSql('insert into "'+gAppConfig.configTable+'" (key , value) values("uniqueId","'+uniqueId+'")' , [] , querySuccess, errorQuery); 
```

这两列都是文本数据类型，但插入查询不起作用。

uniqueId 是一个随机的 8 个字符的字符串，例如“e72361c6”。奇怪的是当我直接插入“e7231c6”时，它起作用了。为什么它不适用于变量？这里要注意的另一件事是，随机字符串是通过解密存储在服务器数据库中的值生成的。我正在解密并在服务器上获取 8 位随机字符串，然后将解密的值发送到设备，存储在变量中并插入出现问题的数据库中。

当我在插入之前提醒字符串时，它显示正确的 8 个字符的字符串。另一方面，如果我不解密并简单地从服务器发送 8 个字符串，则插入成功。也许它与编码/解码字符串格式有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:58:04.677

在 SQL 中，表/列名等标识符应使用双引号，而字符串应使用单引号。（支持其他引号以与其他数据库兼容，但可能会被误解。）

```
INSERT INTO "MyTable"("col1", "col2")
VALUES ('ABC', 'xyz') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:49:13.253

只需将“uniqueId”替换为 NULL

```
tx.executeSql('insert into "'+gAppConfig.configTable+'" (key , value) values(null,"'+uniqueId+'")' , [] , querySuccess, errorQuery); 
```

或者你可以使用这个

```
tx.executeSql('insert into "'+gAppConfig.configTable+'" (value) values("'+uniqueId+'")' , [] , querySuccess, errorQuery); 
```

请记住，您处理的是[SQLite](http://www.sqlite.org/docs.html)而不是普通的 SQL 服务器。

# actionscript-3 - 如何用box2d在flash游戏中做慢动作效果

> ID：13969677
> 
> 赞同：1
> 
> 时间：2012-12-20T10:06:35.140
> 
> 标签：actionscript-3, flash, box2d

当我正在开发顶视图赛车游戏时，我试图在汽车撞到物体时添加慢动作效果。我尝试降低**Stage.frameRate**但游戏似乎滞后。我也尝试过名为“***触摸我的像素***”的在线教程（参考：[http](http://blog.touchmypixel.com/2009/12/box2d-contactpoint-filtering/) ://blog.touchmypixel.com/2009/12/box2d-contactpoint-filtering/ ）。但我不明白。

有什么解决方案可以显示这种**慢动作**效果。有人可以在这方面帮助我吗

谢谢并恭祝安康，

钱德拉塞卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:11:55.293

最简单的方法是在某处拥有一个全局修饰符属性，该属性可用于倍增游戏中所有事物的运动。

例如，您可以将属性`speedModifier`默认设置为`1`.

```
public var speedModifier:Number = 1; 
```

每当你应用速度时，只需乘以修饰符：

```
body.SetLinearVelocity( new b2Vec2(x * speedModifier, y * speedModifier) ); 
```

这样，你需要做的所有游戏速度减半就是修改器的一半：

```
speedModifier = 0.5; 
```

* * *

为了使您的代码更整洁并使管理游戏的这个组件更容易，可能有一种直接的方法来迭代 Box2D 世界中的所有物体并在每个更新步骤的顶部修改它们的速度。类似于以下内容：

```
for each(var i:b2Body in world.GetBodyList())
{
    var currentVel:b2Vec2 = i.GetLinearVelocity();

    var newVel:b2Vec2 = new b2Vec2(
        currentVel.x * speedModifier,
        currentVel.y * speedModifier
    );

    i.SetLinearVelocity( newVel );
} 
```

# html - 如何始终关注文本字段（MVC 4 c#）

> ID：13969685
> 
> 赞同：0
> 
> 时间：2012-12-20T10:06:50.787
> 
> 标签：html, jquery, asp.net-mvc-4, textfield

无论用户做什么，我都有一个始终需要关注的文本字段。

我通过这样做激活了加载时的文本字段：

```
<html>
<head>
    < script type ="text/javascript" src ="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></ script>
    < script type ="text/javascript">
    $( function () {
        $( "#myTextBox2" ).focus();
    });
    </ script>
</head>
< body>
    < div>
        < input type ="text" id ="myTextBox">
        < input type ="text" id ="myTextBox2"onblur="var that= this; setTimeout(function() { that.focus(); }, 0);">
    </ div>
</ body>
</html> 
```

如果我在尝试上面的代码时按下选项卡按钮，我仍然可以远离 myTextBox2，但我无法用鼠标单击 myTextBox（这是正确的）。

如果用户按下任何按钮或单击站点上的任何位置，则仍应选择并聚焦文本字段。我如何完全执行此操作？

编辑：将此添加到我的代码中的标题和 Sven 的答案中似乎可以解决问题：

```
 $(document).keydown(function(objEvent) {
        if (objEvent.keyCode == 9) {  //tab pressed
            objEvent.preventDefault(); // stops its action
       }
    }) 
```

学分： [用 javascript 锁定 tab 键？](https://stackoverflow.com/questions/5871626/lock-tab-key-with-javascript)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:23:36.537

You can keep the focus on the text field at all time with the following code:

HTML:

```
<form>
    <input type="text" name="name" id="focus" />
    <input type="text" name="name2" />
    <input type="text" name="name3" />
    <input type="text" name="name4" />
</form> 
```

JS:

```
$(document).ready(function() {
    $("#focus").focus().bind('blur', function() {
        $(this).focus();            
    }); 

    $("html").click(function() {
        $("#focus").val($("#focus").val()).focus();
    });  

    //disable the tab key
    $(document).keydown(function(objEvent) {
        if (objEvent.keyCode == 9) {  //tab pressed
            objEvent.preventDefault(); // stops its action
       }
    })      
});​ 
```

Example on JsFiddle: [Click!](http://jsfiddle.net/QcSPB/10/)

I had to replace the value of the textfield to force/trigger the placement of the cursor in the focused field.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:20:51.193

我会做到以下几点：

1）在页面加载时，使元素自动聚焦（已由您完成）

2) On #myTextBox2 create a key press event handler and discard every char except of the "real" input ones e.g. alfanumeric, dots, carets, and everything the user can actually input on that field

3) Create an onblur event handler on #myTextBox2 that actually focuses on the same input ( already done by you, I would suggest to put it on a script in the )

4) For completeness, put an Interval on your page that checks every X microseconds that the input is focused. If not, make the input focused. This is optional.

Be aware that, in any case, if a function call actually detects that the input is not focused, and has to focus it, the focus will be pointed at the beginning of the input, so the user input will re-begin from the beginning of the input field. The input contents will not be destroyed, however the user will have to jump to the end of the input after the re-focus.

If you need any help in creating the event handlers, just ask.

# c# - Castle Windsor 3.1 缺少方法异常

> ID：13969690
> 
> 赞同：4
> 
> 时间：2012-12-20T10:07:07.140
> 
> 标签：c#, unit-testing, nunit, castle-windsor

尝试从测试程序集中安装我所有的单独安装程序不断抛出

```
 "`{"Method not found: 'Castle.MicroKernel.Registration.ComponentRegistration1<!0> Castle.MicroKernel.Registration.ComponentRegistration1.DependsOn(Castle.MicroKernel.Registration.Dependency)'."}`" 
```

尽管代码可以从控制台应用程序/Windsows 服务完美运行，并且两个项目的引用是相同的：

```
Castle.Core
Castle.Facilities.FactorySupport
Castle.Facilities.Logging
Castle.Facilities.QuartzIntegration
Castle.Services.Logging.NLogIntegration
Castle.Windsor 
```

有谁知道为什么测试程序集如此调用温莎容器的构建的原因：

```
 this.Container = new WindsorContainer(new XmlInterpreter())
       .Install(FromAssembly.Named("Assembly.WindowsService", 
                new CustomWindsorInstallerFactory())); 
```

任何引用“DependsOn”方法的代码都会失败，例如：

```
container.Register(
    Component
         .For<ISftpRepository, ISftpFileStoreRepository, AbstractSftpFileStoreRepository>()
         .ImplementedBy<ConcreteSftpRepository>()
         .Properties(PropertyFilter.IgnoreAll)
         .DependsOn(
              Dependency.OnConfigValue("host", config.Host), 
```

或者：

```
.ConfigureFor<QuartzJob>(
      x => 
      x.DependsOn(ServiceOverride.ForKey<IService>().Eq("intraService"))) 
```

注意：请注意，在主应用程序下运行时，所有安装类都可以正常工作，这纯粹是运行单元测试时的情况。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T04:16:36.013

看起来您在某个地方有旧版本的 Windsor，在部署时会覆盖新版本

# jquery - Jquery Stickfooter 问题

> ID：13969696
> 
> 赞同：1
> 
> 时间：2012-12-20T10:07:47.373
> 
> 标签：jquery, css, asp.net-mvc, sticky-footer

我设法弄清楚了；如何在文档底部粘贴页脚：即当文档<而不是视口时，我在 jquery 中调用位置：绝对，否则相对于 css 可以正常工作，但是当我重新调整浏览器大小时，它会弄乱定位，如果文档大小 > 视口，页脚溢出文档。

我在 Visual Studio 2012 中使用 ASP.net 和 MVC 4

```
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />

    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />

    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>

<body>

    <div id="container">

        <div id="header">
            my header
        </div>

        <div id="body">
                    @RenderSection("featured", required: false)
                    <section class="content-wrapper main-content clear-fix">
                        @RenderBody()
                    </section>
        </div>

        <div id="footer">
            my footer
        </div> 
```

```
<script type="text/javascript">

$(window).bind('load', function () {
//$(document).ready(function(){
    var doc_height = $(document).height();
    var viewport_height = $(window).height();

    if (doc_height > viewport_height) {
        $("#footer").css({ position: "relative" });
    }
    else {
        $("#footer").css({ position: "absolute" });
    }

    alert("doc " + doc_height + " viewport " + viewport_height);
}); 
```

```
html, body 
{
 margin:0;
 padding:0;
 height:100%; }

 #container {
 min-height:100%;
 position:relative;}

 #header {
 background:#ff0;
 padding:10px;}

 #body {
 padding:10px;
 padding-bottom:60px;   /* Height of the footer */
 background-color:red;}

 #footer {   
 bottom:0;
 width:100%;
 height:60px;   /* Height of the footer */
 background:#6cf;
 margin-bottom: 0;}

 #container {
 height:100%;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:12:02.807

将相同的功能附加`$(window).resize()`到`$(document).ready()`/ `$(window).load()`：

```
//$(document).ready(resizeHandler);
$(window).load(resizeHandler).resize(resizeHandler);

var resizeHandler = function() {
    var doc_height = $(document).height();
    var viewport_height = $(window).height();

    if (doc_height > viewport_height) {
        $("#footer").css({ position: "relative" });
    }
    else {
        $("#footer").css({ position: "absolute" });
    }

    //alert("doc " + doc_height + " viewport " + viewport_height);
}; 
```

# vb.net - 在 Visual Studio 2010 中为“Rock, Paper and Scissors”游戏编写单元测试

> ID：13969699
> 
> 赞同：1
> 
> 时间：2012-12-20T10:07:53.013
> 
> 标签：vb.net, visual-studio-2010, visual-studio, oop, unit-testing

我是编程、OOP 和单元测试的新手，所以请原谅我缺乏知识。

作为我的 Rock, Paper and Scissors 游戏的一部分，我有一个抽象超类（**Weapon** ），它在 VB.NET中有子类（**Rock, Paper 和 Scissors ），例如：**

```
 Public MustInherit Class Weapons
         Public MustOverride Function compareTo(ByVal Weapons As Object) As Integer

    End Class

    Public Class Paper
        Inherits Weapons

        Public Overrides Function compareTo(ByVal Weapons As Object) As Integer
            If TypeOf Weapons Is Paper Then
                Return 0
            ElseIf TypeOf Weapons Is Rock Then
                Return 1
            Else
                Return -1
            End If
        End Function
    End Class

    Public Class Rock
        Inherits Weapons

        Public Overrides Function compareTo(ByVal Weapons As Object) As Integer
            If TypeOf Weapons Is Rock Then
                Return 0
            ElseIf TypeOf Weapons Is Scissors Then
                Return 1
            Else
                Return -1
            End If
        End Function
    End Class

    Public Class Scissors
        Inherits Weapons

        Public Overrides Function compareTo(ByVal Weapons As Object) As Integer
            If TypeOf Weapons Is Scissors Then
                Return 0
            ElseIf TypeOf Weapons Is Paper Then
                Return 1
            Else
                Return -1
            End If
        End Function
    End Class 
```

还有一个超类**Player**，它具有子类（**PlayerComputerRandom**、**PlayerHumanPlayer**和***PlayerComputerTactical***），例如：

```
 Imports RockPaperScissors.Weapons

Public Class Player

    Private pName As String
    Private pNumberOfGamesWon As String
    Public pWeapon As Weapons

    Property Name() As String
        Get
            Return pName
        End Get
        Set(ByVal value As String)
            pName = value
        End Set
    End Property

    Property NumberOfGamesWon As String
        Get
            Return pNumberOfGamesWon
        End Get
        Set(ByVal value As String)
            pNumberOfGamesWon = value
        End Set
    End Property

    Property getWeapon As Weapons
        Get
            Return pWeapon
        End Get
        Set(ByVal value As Weapons)
            pWeapon = value
        End Set
    End Property

    Public Sub pickWeapon(ByVal WeaponType As String)
        If WeaponType = "Rock" Then
            pWeapon = New Rock()

        ElseIf WeaponType = "Paper" Then
            pWeapon = New Paper()

        Else
            pWeapon = New Scissors()

        End If

    End Sub

End Class

    Imports RockPaperScissors.Weapons

Public Class PlayerComputerRandom
    Inherits Player

    Private Enum weaponsList
        Rock
        Paper
        Scissors
    End Enum

    Public Overloads Sub pickWeapon()

        Dim randomChoice = New Random()
        Dim CompChoice As Integer = randomChoice.Next(0, [Enum].GetValues(GetType(weaponsList)).Length)

        If CompChoice = "0" Then
            pWeapon = New Rock()

        ElseIf CompChoice = "1" Then
            pWeapon = New Paper()

        Else
            pWeapon = New Scissors()

        End If

    End Sub

End Class

 Public Class PlayerComputerTactical
    Inherits Player

    Private plastMove As String

    Property lastMove() As String
        Get
            Return plastMove
        End Get
        Set(ByVal value As String)
            plastMove = value
        End Set
    End Property

    Public Overloads Sub pickWeapon()
        ' Add tactical player functionality
    End Sub

End Class

     Public Class PlayerHumanPlayer
        Inherits Player

    End Class 
```

我有 GameForm 类，它实例化对象并执行用于前端的各种其他逻辑，如下所示：

```
 Public Class GameForm
    Private Sub btnRock_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRock.Click
        findWinner("HumanPlayer", "Rock", "RandomComputer")
    End Sub

    Private Sub btnPaper_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPaper.Click
        findWinner("HumanPlayer", "Paper", "RandomComputer")
    End Sub

    Private Sub btnScissors_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnScissors.Click
        findWinner("HumanPlayer", "Scissors", "RandomComputer")
    End Sub

    Public Sub findWinner(ByVal p1name As String, ByVal p1WeaponSelected As String, ByVal p2Name As String)
        Dim player1 = New PlayerHumanPlayer()
        Dim player2 = New PlayerComputerRandom()

        player1.Name = p1name
        player1.pickWeapon(p1WeaponSelected)  ' Should I be using the Rock Class???

        player2.Name = p2Name
        player2.pickWeapon()

        Dim winner As Integer = player1.getWeapon().compareTo(player2.getWeapon())

        Select Case winner
            Case 1
                txtGameStatus.Text = player1.Name() + " wins!"
            Case -1
                txtGameStatus.Text = player2.Name() + " wins!"
            Case 0
                txtGameStatus.Text = "Draw!"
        End Select
    End Sub

End Class 
```

我需要使用 Visual Studio 2010 编写此单元测试。由于我从未这样做过，我不知道我可以包括哪些单元测试（除了立场添加/减去示例）。有人可以提供一些单元测试来开始。它会给我一个起点。

任何帮助将不胜感激。

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:03:00.707

我的第一个提示是将所有方法更改为返回值的函数，这是针对您要进行单元测试的方法。这样做将确保您可以使用该功能进行单元测试。

我可以为您提供结构方面的帮助，但恐怕我不会为您进行单元测试！

我将向您展示我在解决方案中的示例单元测试，它可能与您的解决方案无关，但结构仍然存在。首先我有我想测试的功能（添加），并且在一个单元测试项目中我有测试。

测试功能

```
Public Function Add(value1 As Int32, value2 As Int32)

    answer = value1 + value2

    Return answer

End Function 
```

这是我在单元测试类中使用的单元测试

```
<TestMethod()> _
Public Sub AddTest()

    Dim target As Form1 = New Form1()
    Dim value1 As Int32 = 10
    Dim value2 As Int32 = 35
    Dim actual As Int32 = 45

    Dim result As Int32 = target.Add(value1, value2)

    Assert.AreEqual(result, actual)

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:37:11.740

试着给你一个例子来说明你如何构建这个：

首先，而不是这个：

```
Public Overloads Sub pickWeapon()
   ' Logic...         
End Sub 
```

你可能想做这样的事情：

```
 Public Overloads Function pickWeapon() as Weapons

    Dim selectedWeapon as Weapons = Nothing;

    // logic to set weapon here

    return selectedWeapon;
End Sub 
```

现在您可以从 UnitTest 中调用它，并确保它返回一个有效的武器对象，例如（不一定是最有用的测试，但希望您明白这一点！:)）。

如果您以类似的方式重组该方法`findWinner()`，您可以测试该方法的逻辑是否找到了正确的赢家。

但是请注意，您应该将寻找获胜者的逻辑与选择武器分开。也就是说，您应该在该方法之外创建播放器，并将它们传递给`findWinner()`. 这将允许您传递某些选项（武器），并检查您是否获得了预期的结果。目前你不能这样做，因为“player2”将使用的武器是由 random inside 选择的`findWinner()`。

首先更改它，使其具有类似于以下的签名：

```
' Takes two players in, and returns the name of the winner
Public Sub findWinner(ByVal humanPlayer As PlayerHumanPlayer, 
                      ByVal computerPlayer As PlayerComputerRandom) As String 
```

一个（非常简单的）测试，假设您已经重写了代码以适应这个：

```
<TestMethod()> _
Public Sub ShouldReturnPlayer1AsWinner()

    Dim player1 = New PlayerHumanPlayer("Human name", New Scissors())
    Dim player2 = New PlayerComputerRandom("Computer", New Rock())

    Dim result As String = findWinner(player1, player2)

    Assert.AreEqual(result, "Computer")

End Sub 
```

同样，这可能不是最好的测试，但它应该给你一个想法，并帮助你开始。

*旁注：我会称之为 super-class `Weapon`，而不是`Weapons`。可以这样想：你可以有很多不同的实例，它们可以是不同的武器（纸、剪刀等），但每个仍然是单一的武器。*

# performance - 在不实际移植代码的情况下预测性能的最佳方法是什么？

> ID：13969702
> 
> 赞同：2
> 
> 时间：2012-12-20T10:07:58.813
> 
> 标签：performance, cuda, gpgpu, parallel-port

我相信有些人和我有同样的经历，他/她必须给出一个（估计的）性能报告，将一个程序从顺序移植到并行与一些指定的多核硬件，只给出很少的时间。

例如，如果给出一个 10K LoC 顺序程序并在 100 毫秒内在 Intel i7-3770k（未矢量化）上执行，如果将代码并行化到具有 NVIDIA CUDA 的 Tesla C2075 需要多长时间，假设所有类型并行化优化技术完成了吗？（但你只有 2-4 天的时间来报告性能？假设你根本不知道算法。或者如果我们只是假设完成这项工作是不可能的情况可能会更安全）

因此，我想知道，最有可能提供此类绩效报告的最快方式是什么？仅通过硬件能力（例如 GFLOP 峰值和内存带宽速率）来计算是否安全？有数学方法来计算吗？如果有，请用相应的问题描述和算法，以及目标硬件的规格证明你的方法。

或者也许已经存在这样的工具来（大致）估计代码移植？

（请不要回答：'自杀是最快的方法。'）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T11:01:09.183

好的，我会咬一口，这是我刚刚制定的经验法则：

首先计算当前架构和目标架构可以提供的 Gflops 数（每秒 G 次浮点运算）。接下来计算基准代码所需的 Gflop（G 浮点运算）数量，并测量执行所需的时间。现在计算您的代码消耗的 Gflops 与您的计算机交付的 Gflops 的比率，对于任何长时间运行的数字密集型代码（可能值得移植到 GPU 的那种），它可能约为 10%。现在将该比率应用于目标计算机的 Gflops，看看程序在新架构上的速度可能有多快。

接下来，**这是最重要的一步**，扔掉计算时使用的所有材料；在任何情况下，您都不得向管理层、客户甚至您最亲密的关系透露假设加速的衡量标准。如果你这样做，你**将**不得不 TWEP 他们。

我做了很多代码优化性能，目前正在管理一个并行计算专家团队，以提高大型科学代码的性能。我对管理（等）做出的唯一承诺，也是你唯一能做出的承诺，就是在项目结束时，代码不会比开始时慢——所以总是内置到你的项目中如果新版本的代码实际上更慢，请计划最后一天回滚所做的所有更改。

有太多的变量在起作用，无法对通过将程序移动到不同的平台来提高程序的性能做出可支持的预测；唯一可靠的指南是移植和测量。对于科学代码，其中 80% 的运行时间被 20% 的代码消耗，您可能只能相对容易地移植这 20% 并从中得出有用的测量值。

正如@BenC 已经指出的那样，为了获得最佳性能，移植到 GPU 可能需要完全重写代码，这导致了我的最后一点——你的问题忽略了移植的成本。只有当您可以估计这些时，您才能开始就是否移植做出明智的决定。但是，在某个阶段，您将不得不说服某人花费 3 个月的时间（比如说）将（部分）代码移植到新架构，并且在工作结束时没有任何好处的承诺，是黑暗中的飞跃值得一试。

# android - 果冻豆设备不支持 Air mobile CameraRoll

> ID：13969706
> 
> 赞同：0
> 
> 时间：2012-12-20T10:08:16.560
> 
> 标签：android, mobile, air

很惊讶，但这是真的。Air SDK 3.5 中的 CameraRoll 不适用于新设备。例如，搭载 Android Jelly Bean 4.1.1 的三星 Galaxy SIII (GT-i9300)

有人可以面对这个决定吗？

```
private var c:CameraRoll;
if(CameraRoll.supportsAddBitmapData){    
    c = new CameraRoll();
    c.addEventListener(Event.COMPLETE, onSave);
    c.addEventListener(ErrorEvent.ERROR, onError);
    c.addBitmapData(bitmapData);
} else {
    ta.text += 'camera roll not support   \n';// not support for Samsung Galaxy SIII (GT-i9300) Android Jelly Bean 4.1.1
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:21:46.977

在 android 4.1 及更高版本中，您需要设置 WRITE_EXTERNAL_STORAGE 权限

# iphone - iPhone5 for Spotify 中的链接器错误

> ID：13969707
> 
> 赞同：0
> 
> 时间：2012-12-20T10:08:22.257
> 
> 标签：iphone, spotify, iphone-5, cocoalibspotify-2.0

我正在我的 iPhone 应用程序中实现 Spotify。在 iPhone4 和 4S 中，它构建并运行良好。但是当我连接 iPhone5 设备并构建时，它显示链接器错误。断开设备后，再次构建成功。可能是什么原因。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:30:35.423

在应用程序的 Build Settings 中，找到“Valid Architectures”设置并从列表中删除 armv7s。libspotify 还没有包含 armv7s 架构，但是普通的 armv7 构建在 iPhone 5 上可以正常工作。

# android - android AlarmManager 应用程序被强制关闭时的行为

> ID：13969709
> 
> 赞同：0
> 
> 时间：2012-12-20T10:08:26.047
> 
> 标签：android, alarmmanager, notificationmanager

我用来`AlarmManager`向用户发出本地通知。但是，如果我使用 Settings->Apps->Stop 杀死我的应用程序，警报管理器似乎已被破坏，并且所有通知图标都会从状态栏中消失。

正常吗？本地通知的想法是说服用户在关闭时启动我的优秀应用程序。如果我杀死该应用程序，它们就会被消灭，这对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:17:46.993

如果你杀死你的应用程序，你也会杀死 AlarmManager。这没有什么奇怪的。您通过按主页按钮关闭应用程序，而不是通过设置将其杀死。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:12:32.120

使用 service 设置 AlarmManager 和通知。

另请记住，一旦设备重新启动，警报就会被取消。

所以你需要设置广播接收器。

看看这个[点击这里](http://blog.blundell-apps.com/notification-for-a-user-chosen-time/)

# ruby - Nokogiri 本机扩展无法构建（不是 libxml2 或 libxslt 缺失问题）

> ID：13969716
> 
> 赞同：3
> 
> 时间：2012-12-20T10:08:42.163
> 
> 标签：ruby, rubygems, gem, makefile, nokogiri

正如标题所说，它似乎并没有因为缺少 libxml2 或 libxslt 而失败。我不确定该怎么*做*。（明白了吗？因为问题是在制作过程中？嘿嘿......）

任何人，这是我得到的输出。任何想法，将不胜感激：

```
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
extconf.rb:10: Use RbConfig instead of obsolete and deprecated Config.
checking for libxml/parser.h... yes
checking for libxslt/xslt.h... yes
checking for libexslt/exslt.h... yes
checking for iconv_open() in iconv.h... yes
checking for xmlParseDoc() in -lxml2... yes
checking for xsltParseStylesheetDoc() in -lxslt... yes
checking for exsltFuncRegister() in -lexslt... yes
checking for xmlHasFeature()... yes
checking for xmlFirstElementChild()... yes
checking for xmlRelaxNGSetParserStructuredErrors()... yes
checking for xmlRelaxNGSetParserStructuredErrors()... yes
checking for xmlRelaxNGSetValidStructuredErrors()... yes
checking for xmlSchemaSetValidStructuredErrors()... yes
checking for xmlSchemaSetParserStructuredErrors()... yes
creating Makefile

make
compiling xml_element_content.c
compiling xml_relax_ng.c
compiling xml_cdata.c
compiling xml_sax_parser_context.c
compiling xml_node_set.c
compiling xml_text.c
compiling xml_sax_parser.c
compiling xml_attribute_decl.c
compiling nokogiri.c
nokogiri.c: In function ‘ruby_strdup’:
nokogiri.c:43:31: warning: conversion to ‘size_t’ from ‘long int’ may change the sign of the result [-Wsign-conversion]
compiling xml_entity_reference.c
compiling xml_node.c
compiling xml_xpath_context.c
xml_xpath_context.c: In function ‘xpath_generic_exception_handler’:
xml_xpath_context.c:184:3: error: format not a string literal and no format arguments [-Werror=format-security]
cc1: some warnings being treated as errors
make: *** [xml_xpath_context.o] Error 1

Gem files will remain installed in /var/lib/gems/1.9.1/gems/nokogiri-1.5.0 for inspection.
Results logged to /var/lib/gems/1.9.1/gems/nokogiri-1.5.0/ext/nokogiri/gem_make.out 
```

作为上下文，我昨晚从 Ubuntu 12.04 升级到了 12.10。我之前在这个盒子上构建了 Nokogiri 原生扩展，虽然我不知道它是否是相同的版本。

我还检查了我在第二篇文章中指定的所有软件包“[错误安装 nokogiri 1.5.0 with rails 3.1.0 and ubuntu](https://stackoverflow.com/questions/8003523/error-installing-nokogiri-1-5-0-with-rails-3-1-0-and-ubuntu) ”无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-04T12:17:30.457

我花了一些时间弄清楚如何附加 cflags。这是我对 nokogiri 1.4.7 的命令：

```
sudo gem install  nokogiri -v '1.4.7' -- --with-cflags=\"-Wformat-nonliteral -Wno-format-security\" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T10:36:50.907

您是否尝试过为 nokogiri 安装以下依赖项？

```
# nokogiri requirements
sudo apt-get install libxslt-dev libxml2-dev
sudo gem install nokogiri 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-28T16:02:42.900

如果您尝试安装 Nokogiri < 1.5.4，您将在 Ubuntu 12 等强化的 Debian 系统上遇到问题。

有关潜在问题的详细信息在这里：[https ://github.com/sparklemotion/nokogiri/issues/680](https://github.com/sparklemotion/nokogiri/issues/680)

您应该能够升级到 1.5.4 或更高版本并安装而不会出现此问题。

或者，您应该能够在 gem-install 时设置 CFLAGS 环境变量以包含字符串：

```
-Wno-error=format-security 
```

或者

```
-Wformat-nonliteral -Wno-format-security 
```

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-14T12:15:41.993

这可能是由于此错误> [https://leap.se/code/issues/7231](https://leap.se/code/issues/7231)

在运行命令之前运行以下命令：

```
sudo apt-get install zlib1g-dev 
```

# java - 在 Android 应用中带有发票和订单确认的 Paypal

> ID：13969718
> 
> 赞同：0
> 
> 时间：2012-12-20T10:08:50.213
> 
> 标签：java, android, paypal, paypal-sandbox, invoice

我必须开发一个购物车应用程序并集成`Paypal`. 如何设置`Paypal`付款发票数据？

**如何在 Paypal 付款发票中添加产品名称、数量、价格？**.

这是我添加到购物车页面的产品代码：

```
public class SingleMenuItem extends Activity {
static final String KEY_TITLE = "Name";
static final String KEY_COST = "Price";
static final String KEY_TOTAL = "total";
static final String KEY_QTY = "qty";
static final String KEY_THUMB_URL = "Image";
private EditText edit_qty_code;
private TextView txt_total;
private TextView text_cost_code;
private double itemamount = 0;
private double itemquantity = 0;
String mTitle, mQty, mCost, mTotal;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single);
Intent in = getIntent();
    String title = in.getStringExtra(KEY_TITLE);
    String thumb_url = in.getStringExtra(KEY_THUMB_URL);
    String cost = in.getStringExtra(KEY_COST);
    String total = in.getStringExtra(KEY_TOTAL);

    ImageLoader imageLoader = new ImageLoader(getApplicationContext());

    ImageView imgv = (ImageView) findViewById(R.id.single_thumb);
    final TextView txttitle = (TextView) findViewById(R.id.single_title);
    TextView txtheader = (TextView) findViewById(R.id.actionbar);
    text_cost_code = (TextView) findViewById(R.id.single_cost);
    edit_qty_code = (EditText) findViewById(R.id.single_qty);
    edit_qty_code.setText("1");
    txt_total = (TextView) findViewById(R.id.single_total);

    txttitle.setText(title);
    txtheader.setText(title);
    text_cost_code.setText(cost);
    txt_total.setText(total);
    imageLoader.DisplayImage(thumb_url, imgv);

    itemamount = Double.parseDouble(text_cost_code.getText().toString());

    txt_total.setText(Double.toString(itemamount));

    edit_qty_code.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub
            if (!edit_qty_code.getText().toString().equals("")
                    || !edit_qty_code.getText().toString().equals("")) {
                itemquantity = Double.parseDouble(edit_qty_code.getText()
                        .toString());
                itemamount = Double.parseDouble(text_cost_code.getText()
                        .toString());
                txt_total.setText(Double
                        .toString(itemquantity * itemamount));
            } else {
                txt_total.setText("0.00");
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {

        }
    });

    ImageButton mImgAddCart = (ImageButton) findViewById(R.id.img_add);
    mImgAddCart.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            mTitle = txttitle.getText().toString();
            mCost = text_cost_code.getText().toString();
            mCost = mCost.replace("From ", "");
            mTotal = txt_total.getText().toString();
            mTotal = mTotal.replace("From ", "");
            mQty = edit_qty_code.getText().toString();

            if (Constants.mItem_Detail.size() <= 0) {
                HashMap<String, String> mTempObj = new HashMap<String, String>();
                mTempObj.put(KEY_TITLE, mTitle);
                mTempObj.put(KEY_QTY, mQty);
                mTempObj.put(KEY_COST, mCost);
                mTempObj.put(KEY_TOTAL, mTotal);

                Constants.mItem_Detail.add(mTempObj);

            } else {
                for (int i = 0; i < Constants.mItem_Detail.size(); i++) {
                    if (Constants.mItem_Detail.get(i).get(KEY_TITLE)
                            .equals(mTitle)) {
                        Constants.mItem_Detail.remove(i);

                        break;

                    } else {

                    }
                }

                HashMap<String, String> mTempObj = new HashMap<String, String>();
                mTempObj.put(KEY_TITLE, mTitle);
                mTempObj.put(KEY_QTY, mQty);
                mTempObj.put(KEY_COST, mCost);
                mTempObj.put(KEY_TOTAL, mTotal);

                Constants.mItem_Detail.add(mTempObj);
            }

            AlertDialog.Builder alertdialog = new AlertDialog.Builder(
                    SingleMenuItem.this);
            alertdialog.setTitle(getResources()
                    .getString(R.string.app_name));
            alertdialog.setMessage("Add in ViewCart");

            alertdialog.setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // TODO Auto-generated method stub
                            //finish();
                            return;
                        }
                    });

            alertdialog.show();

        }
    });

    ImageButton mImgViewCart = (ImageButton) findViewById(R.id.img_view);
    mImgViewCart.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent mInViewCart = new Intent(SingleMenuItem.this,
                    ViewCartActivity.class);
            startActivity(mInViewCart);
        }
    }); 
```

这是产品代码添加到购物车：

```
ListView mLstView1 = (ListView) findViewById(R.id.listView1);
    TextView mTxtViewGrandTotal = (TextView) findViewById(R.id.mTxtViewGrandTotalValue);
    Button mBtnSubmit = (Button) findViewById(R.id.mBtnSubmit);

    ViewCartAdapter mViewCartAdpt = new ViewCartAdapter(
            ViewCartActivity.this);

    mLstView1.setAdapter(mViewCartAdpt);

    if (Constants.mItem_Detail.size() > 0) {
        Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0)
                .get(SingleMenuItem.KEY_TOTAL));
        for (int i = 1; i < Constants.mItem_Detail.size(); i++) {
            mGTotal = mGTotal
                    + Double.parseDouble(Constants.mItem_Detail.get(i).get(
                            SingleMenuItem.KEY_TOTAL));
        }

        mGrandTotal = String.valueOf(mGTotal);
        mTxtViewGrandTotal.setText("$" + mGrandTotal);
    }

    mBtnSubmit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             Intent i = new Intent(getApplicationContext(), CustomerLogin.class);
                startActivity(i);

        }
    }); 
```

这是我的支付宝整合活动：

```
public class PayPalIntegrationActivity extends Activity implements OnClickListener {
private PayPal mPayPal;
private CheckoutButton launchPayPalButton;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_pay_pal_integration);

    mPayPal=PayPal.initWithAppID(this,Constants.PAYPAL_APP_ID,PayPal.ENV_SANDBOX);

    initUI();

}

private void initUI() {

    launchPayPalButton = mPayPal.getCheckoutButton(this, 
            PayPal.BUTTON_278x43, CheckoutButton.TEXT_PAY);

    RelativeLayout.LayoutParams params = new
            RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 
                    LayoutParams.WRAP_CONTENT);

    params.addRule(RelativeLayout.CENTER_IN_PARENT);

    params.bottomMargin = 10;

    launchPayPalButton.setLayoutParams(params);
    launchPayPalButton.setOnClickListener(this);

    ((RelativeLayout)findViewById(R.id.main_layout)).addView(launchPayPalButton);
}

@Override
public void onClick(View v) {

    payWithPaypal();
}

private PayPalPayment payWithPaypal() {
    PayPalPayment newPayment = new PayPalPayment();
    BigDecimal bigDecimal=new BigDecimal(10);
    newPayment.setSubtotal(bigDecimal);
    newPayment.setCurrencyType(Currency.getInstance(Locale.US));
    newPayment.setRecipient("krishnaveni.veeman@mercuryminds.com");
    newPayment.setMerchantName("My Merchant");
    newPayment.setSubtotal(new BigDecimal(mTotal));
    newPayment.setPaymentType(PayPal.PAYMENT_TYPE_GOODS);
    Intent paypalIntent = PayPal.getInstance().checkout(newPayment, this);
    this.startActivityForResult(paypalIntent, 1);

    PayPalInvoiceData invoice = new PayPalInvoiceData();

        return newPayment;

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch(resultCode) {
    case Activity.RESULT_OK:
        String payKey = 
        data.getStringExtra(PayPalActivity.EXTRA_PAY_KEY);
        Toast.makeText(this,"Payment Successful",Toast.LENGTH_LONG).show();
        break;
    case Activity.RESULT_CANCELED:
        Toast.makeText(this,"Payment Cancel",Toast.LENGTH_LONG).show();
        break;
    case PayPalActivity.RESULT_FAILURE:
        Toast.makeText(this,"Payment Failed",Toast.LENGTH_LONG).show();
        String errorID = 
        data.getStringExtra(PayPalActivity.EXTRA_ERROR_ID);
        String errorMessage = 
                data.getStringExtra(PayPalActivity.EXTRA_ERROR_MESSAGE);
        break;
    } 
```

在这里，我如何将产品名称添加到 paypalpayment 发票。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:27:54.413

您可以将 paypalinvoice 对象添加到您的项目，然后您可以向该发票添加详细信息，

```
try this code

PayPalInvoiceItem item1 = new PayPalInvoiceItem();
item1.setName("Pink Stuffed Bunny");
item1.setTotalPrice(new BigDecimal("6.00"));
item1.setQuantity(3);
invoice.getInvoiceItems().add(item1); 
```

希望对你有帮助。

# php - XXX 不是有效的实体或映射的超类 // 和配置选项

> ID：13969719
> 
> 赞同：2
> 
> 时间：2012-12-20T10:08:50.170
> 
> 标签：php, class, configuration, doctrine-orm, entity

我刚开始使用 Doctrine2，当我想持久化一个实体时出现错误。这是我的错误： **“类“Myapp\app\entity\user”不是有效的实体或映射的超类。'**

我的电脑上没有安装 eAccelerator。

我的应用程序（我不使用 Symfony）结构是这样的：

*   我的应用
    *   应用程序
        *   实体
    *   核
        *   外部的
            *   教义

我用以下命令初始化 Doctrine：

```
$classLoader = new ClassLoader('Doctrine', CORE_PATH . 'external');
$classLoader->register();

$cache = new \Doctrine\Common\Cache\ArrayCache();

$doctrineConfig = new \Doctrine\ORM\Configuration();

$doctrineConfig->setMetadataCacheImpl($cache);
$doctrineConfig->setQueryCacheImpl($cache);

$driverImpl = $doctrineConfig->newDefaultAnnotationDriver(array(APP_PATH . 'entity'));
$doctrineConfig->setMetadataDriverImpl($driverImpl);

$doctrineConfig->setAutoGenerateProxyClasses(false);

$connectionOptions = array(
    'driver'   => $database['driver'],
    'dbname'   => $database['dbname'],
    'user'     => $database['username'],
    'password' => $database['password']
);

$this->em = EntityManager::create($connectionOptions, $doctrineConfig); 
```

这些线有什么问题？

另外，当我使用自动加载器自动加载我的类时，是否有必要使用 Doctrine 类加载器？如果是，这些行是否正确？

```
$classLoader = new ClassLoader('myApp\app\entity', APP_PATH . 'entity');
$classLoader->register();

$classLoader = new ClassLoader('myApp\core\entity', CORE_PATH . 'entity');
$classLoader->register(); 
```

**编辑：**我忘了添加一个实体类

使用 Doctrine\ORM\Mapping 作为 ORM；

```
/**
 * @ORM\Entity
 */
class user
{
/**
* @ORM\Column(name="id", type="integer")
* @ORM\Id
* @ORM\GeneratedValue(strategy="AUTO")
*/
protected $id;

/**
* @ORM\Column(name="username", type="string", length=255)
*/
protected $username;

/**
* @ORM\Column(name="nicename", type="string", length=255)
*/
protected $nicename;

/**
* @ORM\Column(name="email", type="string", length=255)
*/
protected $email;

/**
* @ORM\Column(name="password", type="string", length=255)
*/
protected $password;

//getters
//setters 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2022-01-13T15:07:24.143

在**php > 8.0**

您必须`config/packages/doctrine.yaml`将映射类型更改为`attribute`

```
 doctrine:
    dbal:
        url: '%env(resolve:DATABASE_URL)%'

        # IMPORTANT: You MUST configure your server version,
        # either here or in the DATABASE_URL env var (see .env file)
        #server_version: '13'
    orm:
        auto_generate_proxy_classes: true
        naming_strategy: doctrine.orm.naming_strategy.underscore_number_aware
        auto_mapping: true
        mappings:
            App:
                is_bundle: false
                type: attribute # from annotation to attribute
                dir: '%kernel.project_dir%/src/Entity'
                prefix: 'App\Entity'
                alias: App
``` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:01:24.410

好的，所以我的实体是正确的，我不需要调用 classLoader。

下面是正确的初始化：

```
 $classLoader = new ClassLoader('Doctrine', CORE_PATH . 'external/');
    $classLoader->register();

    AnnotationRegistry::registerFile(CORE_PATH.'external/Doctrine/ORM/Mapping/Driver/DoctrineAnnotations.php');

    $cache = new ArrayCache();

    $annotationReader = new AnnotationReader();

    $cacheReader = new CachedReader(
        $annotationReader, 
        $cache          
    );

    $driverChain = new DriverChain();

    $annotationDriver = new AnnotationDriver(
        $annotationReader,
        array(CORE_PATH . 'model/')
    );

    $driverChain->addDriver($annotationDriver, 'gallib\core\model');

    $doctrineConfig = new Configuration();

    $doctrineConfig->setProxyDir(CORE_PATH . 'model/proxy');
    $doctrineConfig->setProxyNamespace('gallib\core\model\proxy');
    $doctrineConfig->setAutoGenerateProxyClasses(true);
    $doctrineConfig->setMetadataDriverImpl($driverChain);
    $doctrineConfig->setMetadataCacheImpl($cache);
    $doctrineConfig->setQueryCacheImpl($cache);

    $database = $this->config->database;

    $connectionOptions = array(
        'driver'   => $database['driver'],
        'dbname'   => $database['dbname'],
        'user'     => $database['username'],
        'password' => $database['password']
    );

    $this->em = EntityManager::create($connectionOptions, $doctrineConfig); 
```

# zend-framework - Zend Framework 缓存在内存中

> ID：13969720
> 
> 赞同：1
> 
> 时间：2012-12-20T10:08:50.803
> 
> 标签：zend-framework, zend-cache

有没有办法使用 Zend Framework（1.8 版）将 Zend DB 的结果缓存在内存中？或者我应该使用服务器端解决方案来实现“每个进程的内存缓存”？

那么你能分享完成这些问题的最佳实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:11:14.060

您可以使用 Zend_Cache_Backend_Memcached 缓存到内存中保存缓存的 Memcache 服务器

# .htaccess - 从查询字符串永久重定向到 htaccess 中的特定静态页面

> ID：13969721
> 
> 赞同：0
> 
> 时间：2012-12-20T10:08:52.567
> 
> 标签：.htaccess

问题的标题解释了我的问题。我有一些需要映射到静态页面的动态页面 url。动态页面和静态页面之间的关系是 1-1。1 个动态页面 -> 1 个静态页面。静态页面 url 与动态页面完全不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:12:29.767

我真的很抱歉我在 StackOverflow 上的第一个问题是一个愚蠢的问题。事实上，我所有的问题都与编辑文件时缺乏注意力有关。我编辑错了！我真的很抱歉。

# visual-studio - VS2012“将选择扩展到标签”的键盘快捷键？

> ID：13969727
> 
> 赞同：0
> 
> 时间：2012-12-20T10:09:03.317
> 
> 标签：visual-studio, visual-studio-2012

Visual Studio 2012 中是否有键盘快捷键/免费扩展来将选择扩展到逻辑代码块？

例如，在编辑 HTML 时，我希望能够将光标放在开始标记中并选择匹配的结束标记，包括嵌套在其中的所有元素。

为此，Sublime Text 2 有一个“将选择扩展到标记”选项（Ctrl + Shift + A）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:25:29.110

感谢@JaredReisinger，他指出 HTML 编辑器底部的“标签导航器”允许这种功能，尽管使用的是鼠标而不是键盘。

# android - 在 Android WebView 中检测并附加 POST 参数

> ID：13969728
> 
> 赞同：0
> 
> 时间：2012-12-20T10:09:13.137
> 
> 标签：android, forms, http, post, webview

我正在开发一个严重依赖互联网内容的 Android 应用程序。在应用程序中，我有一个 WebView，可让用户浏览我们的安全网站。这很好用。然而有时我们需要在我们的原生应用程序中触发一个方法。

为此，我们需要在用户提交表单时拦截一个 POST 请求，查找特定参数，如果该参数存在，则在提交之前将另一个参数附加到 POST 请求。

我们的应用程序支持较旧的 API 很重要。至少 API 级别 8。在 iOS 中，这是小菜一碟。我们只是截获了 URL 请求并附加了我们的 url 编码参数。然而，在 Android 中，这要困难得多。在不对我们的网站进行任何更改的情况下，我无法找到拦截请求的方法。

我已经尝试覆盖 webviews loadUrl() 方法和 postUrl() 方法，但是当用户与 webview 中的 href 交互时，它们似乎没有被调用。我们要查找的具体参数可以来自不同的 url，因此覆盖 url 本身或硬编码表单名称是不够的。我希望有人能够帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:43:00.950

您可以使用 javascript 来拦截发布。由于您可以使用 javascript 验证所有输入，因此您还可以设置所有 key=value 对。javascript 本身只能执行一个 get 请求。如果不允许这样做，请使用 android javascript 桥接器来执行帖子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T10:17:20.263

查看 WebView 的 WebViewClient [http://developer.android.com/reference/android/webkit/WebView.html#setWebViewClient(android.webkit.WebViewClient](http://developer.android.com/reference/android/webkit/WebView.html#setWebViewClient(android.webkit.WebViewClient) )。使用它，您可以处理通过 webview 的所有请求。

# silverlight - silverlight 类库中的本地化资源

> ID：13969730
> 
> 赞同：1
> 
> 时间：2012-12-20T10:09:20.717
> 
> 标签：silverlight, localization, resources

我创建了一个silverlight 类库，它将被多个客户端项目使用。在类库中，我有一个显示本地化文本的本地化对话框：`You have unsaved pending changes`. 此文本存储在`Messages.resx`（以及翻译`Messages.da.resx`等）中，并按如下方式访问：

```
Prompt.Announce(Messages.Verify, Messages.UnsavedChanges) 
```

但是，当我从 silverlight 客户端项目中添加对类库 dll 的引用时，对话框总是以默认语言（英语）显示。

我可以看到类库构建输出是这样的

*   根
    *   SilverlightClassLib.dll
    *   大
    *   SilverlightClassLib.resources.dll

但是客户端构建输出缺少这个，所以我猜丹麦翻译隐藏在那里 - 但是我如何将它包含在消费的silverlight客户端项目中？

更新：
这是 TFS 中的文件夹结构：

*   类库
    *   分配
        *   大
    *   参考
    *   资源
*   客户

    *   参考
    *   资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:34:57.550

听起来像一个部署问题。您需要将类库的附属程序集 (da\SilverlightClassLib.resources.dll) 部署在客户端的二进制文件夹中（如果丢失，仍位于“da”子文件夹中）。

# git - 如何“移动”一个 git 合并？

> ID：13969734
> 
> 赞同：1
> 
> 时间：2012-12-20T10:09:25.693
> 
> 标签：git

[我从这个](https://stackoverflow.com/questions/4163895/git-setting-a-commits-parent-without-rebase)问题中描述的类似问题开始，做了一些变基和合并操作，在一种情况下最终得到以下结果。

```
---a---b---c---d---   master
    \         /
     x---y---z        thebranch 
```

合并时我一定做错了什么（给定错误的 SHA？），因为我需要的是以下内容

```
---a---b---c---d---   master
    \     /    
     x---y---z        thebranch 
```

我现在的问题是，我怎样才能做到这一点？移植是要走的路还是更直接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:07:08.707

```
$> git checkout master           # go to master
$> git reset --hard c            # roll back to c, discarding the merge-commit d
$> git merge y                   # merge y into c, creating a new merge-commit d' 
```

by doign that

```
---a---b---c---d---   master
    \         /
     x---y---z        thebranch 
```

effectively becomes

```
---a---b---c---d'---      master
    \         /    
     x-------y---z        thebranch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:07:30.363

```
git checkout -b by b
git merge y 
```

This should get you

```
---a---b---by---    by
    \     /
     x---y---z      thebranch 
```

* * *

```
git checkout master
git reset --hard c 
```

This should get you

```
 c -- master
        /
---a---b---by---    by
    \     /
     x---y---z      thebranch 
```

* * *

```
git rebase --onto by HEAD^
git branch -d by 
```

This should get you:

```
---a---b---by---c'    master
    \     /
     x---y---z      thebranch 
```

...i think :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:03:28.957

1.  转到主分支。

    `git checkout master`

2.  我认为`d`是合并提交。所以，我们可以丢弃它。

    `git reset --soft c`//它将您的主分支带回`c`.

3.  现在合并`y`。

    `git merge y`

# java - 将文件夹添加到 RCP 产品中的类路径

> ID：13969739
> 
> 赞同：3
> 
> 时间：2012-12-20T10:09:46.360
> 
> 标签：java, osgi, classpath, classloader, rcp

我们有一个基于包含多个插件的功能的 RCP 产品。每个插件都使用一个`OSGi`捆绑清单。

其中一个插件包含一组`Plug-in from Existing JAR Archives`由第三方制作的库 ( )。

现在的问题。其中一个库正在以下列方式查找配置文件：

```
getClass().getClassLoader().getResourceAsStream(filename); 
```

很明显，必须将包含该文件的文件夹添加到类路径中。所以我在插件的清单中添加了以下内容：

```
Bundle-ClassPath: resources/ 
```

我把配置文件放在那里（当然还有其他`Bundle-ClassPath:`的罐子和`resources`它们一起）。

如果我在 eclispe 中测试产品，则找到文件并且一切正常，但是一旦我导出产品，就不再找到该文件（即使该`resources`文件夹包含在导出的插件中）。

我认为我在运行配置中缺少一些 OSGI 属性，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T14:23:54.017

必须在插件的 build.properties 中将文件夹“resources”设置为输出文件夹： output.. = bin/,\ resources/

# php - 如果 PhP 中 time() 的值不受时区影响，那么为什么日期函数默认为它？

> ID：13969745
> 
> 赞同：1
> 
> 时间：2012-12-20T10:10:00.050
> 
> 标签：php, timestamp, unix-timestamp, epoch

根据[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

> 可选的时间戳参数是一个整数 Unix 时间戳，如果没有给出时间戳，则默认为**当前本地时间。**换句话说，它默认为 time() 的值。

但是，在 time() 的定义中没有提到它依赖于时区。哪一个是对的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:16:03.497

time() 返回自 1970 年 1 月 1 日 00:00 GMT 以来的秒数。

无论您在哪个时区，自 UNIX 纪元以来经过的秒数都是相同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T10:13:08.560

不，返回的值与`time()`时区无关：

```
date_default_timezone_set("UTC");
echo "UTC:".time();
echo "<br>";

date_default_timezone_set("Europe/Helsinki");
echo "Europe/Helsinki:".time();
echo "<br>"; 
```

两者都输出相同的值。

关于您的编辑，返回值`time()`取决于您机器上的当前时间。您机器上的当前时间通常通过指定时区以及日期 + 时间来设置。

当我们说返回的值与`time()`时区无关时，我们的意思是在任何给定时刻，地球上所有位置的 UTC 时间的正确值都是相同的。

假设日本的一个人要正确设置他们的系统时间（以及时区），而印度的另一个人也要做同样的事情。在任何给定时刻，如果它们`time()`同时调用，它们将获得相同的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T10:44:20.553

我认为文档有点含糊，意思是“本地”，就像*“运行它的机器”*一样。或者您可以表示由于`date`根据设置的时区格式化时间戳，返回的值`date`将是“本地”时间。

即，“本地”在这里并不真正意味着什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:36:58.187

我想我知道这个问题。

time() 它本身与时区无关。

然而，

date() 取决于时区。数据的格式取决于 date_default_timezone_set

所以，按照阿萨德的回答

```
date_default_timezone_set("UTC");
echo "UTC:".date(...);
echo "<br>";

date_default_timezone_set("Europe/Helsinki");
echo "Europe/Helsinki:".date(...);
echo "<br>"; 
```

会产生不同的价值。他们都使用时间

# drupal - 如何在 Drupal 7 中添加指向锚点的链接？

> ID：13969746
> 
> 赞同：0
> 
> 时间：2012-12-20T10:10:00.500
> 
> 标签：drupal, hyperlink, anchor

我正在使用 Drupal 7 创建一个网站。

我在页面底部有一个联系块（作为页脚页面），但我需要将链接放入带有锚点的菜单中。我的意思是，当用户按下该链接时，它必须向下滚动页面到联系人块。

我怎么能这样做？我什么都没看到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:55:39.077

模块**[菜单属性](http://drupal.org/project/menu_attributes)**是您的救星，安装它，这样您就可以将***名称***属性添加到您的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:36:07.170

我相信您需要使用[菜单令牌](http://drupal.org/project/menu_token)模块来获取锚链接的当前页面的路径。菜单项的路径应类似于：

```
[current-page:url:path]#footer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T06:10:33.093

这很简单！您只需创建一个链接并通过 Drupal 管理员转到页面内容编辑选项。在编辑内容页面的底部，您将获得一个 URL 路径设置，那里有 url 别名字段。您只需将路径放在您的字段中。

![](../Images/717e253dd15e7b370b32d79833243fb4.png)

# javascript - 对比

> ID：13969747
> 
> 赞同：0
> 
> 时间：2012-12-20T10:10:05.420
> 
> 标签：javascript, event-handling, dom-events, href

> **可能重复：** [href 与 onclick 中的 JavaScript 函数](https://stackoverflow.com/questions/1070760/javascript-function-in-href-vs-onclick)

从`<a>`, Javascript 可以通过两种方式调用：

1.  `<a href="javascript:alert('href triggered me')">Click me!!!</a>`
2.  `<a href="#" onclick="alert('I was triggered by a DOM event')">Click me!!!</a>`

据我所知，Web 开发人员平等对待这两种方式。两者的优点和缺点是什么？

# php - 使用自定义按钮创建自定义列？

> ID：13969749
> 
> 赞同：1
> 
> 时间：2012-12-20T10:10:12.950
> 
> 标签：php, yii, cbuttoncolumn

问：如何使用自定义按钮创建自定义列？

我想用 cgridview 创建一个网格视图，如下所示。我能怎么做？

> 公司名称 | 标题 1.1 | 标题 1.2 | 标题 2.1 | 标题 2.2 | 标题 3.1 | 标题 3.2
> 
> AAAA1 | [按钮] | [按钮] | [按钮] | [按钮] | [按钮] | [按钮]
> 
> BBBB1 | [按钮] | [按钮] | [按钮] | [按钮] | [按钮] | [按钮]
> 
> CCCC1 | [按钮] | [按钮] | [按钮] | [按钮] | [按钮] | [按钮]

==================================================== =================================更新

这是我的 cgridview 代码

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'customer-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'customer_name',
        array(
            'class'=>'CButtonColumn',
            'template'=>'{select1} {select2} {select3} {select4} {select5} {select6} {select7} {select8}',
            'buttons'=>array
            (
                'select1' => array
                (
                    'label'=>'Send an e-mail to this user',
                    'url'=>'Yii::app()->createUrl("job/getjobno", array("c_code"=>$data->c_code))',
                    'imageUrl'=>Yii::app()->request->baseUrl.'/protected/assets/images/gridview/icon_select.gif',
                    'options'=>array('style'=>'width:10px; border:none'),
                    'click'=>'function(event) { 
                        $.ajax({
                            url:$(this).attr("href"),
                            dataType: \'json\',
                            success: function(data){
                                //alert(data.newjobno);

                                $("#Job_name").val(data.newjobno); 
                                //console.log(\'target tr: \' + target);
                                //$(target).find(\'.item-price\').val(data.newjobno);
                                $("#customerlist").dialog("close");
                            }
                        });                     
                        event.preventDefault();
                    }',
                ),      
            ),
        ),
        array(
            'type'=>'raw',
            'value'=>'$data->c_code',
            //'filter'=>array('style'=>'visible:none'), 
            'headerHtmlOptions'=>array('style'=>'width:0px; display:none; border:none; textdecoration:none'),
            'htmlOptions'=>array('style'=>'display:none; border:none;', 'class'=>'customer-id'),  
            'header'=>false,
            'filter'=>false,
        ),
    ),
)); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:37:46.153

你几乎做对了。只是您将需要更多按钮列，为每列使用[正确`template`](http://www.yiiframework.com/doc/api/1.1/CButtonColumn#template-detail "http://www.yiiframework.com/doc/api/1.1/CButtonColumn#template-detail")的，并[`buttons`](http://www.yiiframework.com/doc/api/1.1/CButtonColumn#buttons-detail "http://www.yiiframework.com/doc/api/1.1/CButtonColumn#buttons-detail")为每列正确指定：

```
'columns'=>array(
    'customer_name',
    array(
        'header'=>'Header 1.1', // add headers this way
        'class'=>'CButtonColumn',
        'template'=>'{select1}', // only 1 button
        'buttons'=>array
        (
            'select1' => array
            (
                // ... options for select1 button
            ),      
        ),
    ),
    array(
        'header'=>'Header 1.2', // add headers this way
        'class'=>'CButtonColumn',
        'template'=>'{select2}', // only 1 button
        'buttons'=>array
        (
            'select2' => array
            (
                // ... options for select2 button
            ),      
        ),
    ),
    // ... and so on add the other button columns ...
    // ... rest of columns ...
), 
```

* * *

如果您想要 1 列中的所有按钮，您只需在`buttons`属性中添加按钮选项：

```
'columns'=>array(
    'customer_name',
    array(
        'class'=>'CButtonColumn',
        'template'=>'{select1}{select2}{select3}', // only 1 button
        'buttons'=>array
        (
            'select1' => array
            (
                // ... options for select1 button
            ),
            'select2' => array
            (
                // ... options for select2 button
            ),
            'select3' => array
            (
                // ... options for select3 button
            ),      
            // ... and so on add the other button options ...
        ),
    ),
    // ... rest of columns ...
), 
```

* * *

更新：只要记住您在 中提到的任何 buttonId `template`，使用该 buttonId 来指定按钮选项：

```
'class'=>'CButtonColumn',
'template'=>'{buttonId1}{buttonId2}',
'buttons'=> array(
    'buttonId1'=>array(
        // ... options ...
    ),
    'buttonId2'=>array(
        // ... options ...
    )

) 
```

# html - 在搜索文本时，我可以在哪个 html 编辑器中忽略 NewLine？

> ID：13969752
> 
> 赞同：0
> 
> 时间：2012-12-20T10:10:18.763
> 
> 标签：html, html-editor

我有一个很大的 html 文件，它在 notepad++ 中分成几行（我的行很长：110.000 个字符）。这在文本中插入了换行符。因此，如果我搜索“The quick brown fox jumps over the lazy dog”，则它可能不会作为搜索结果出现，因为 notepad++ 在单词之间添加了新行。那么在搜索文本时如何忽略 NewLine 呢？我可以在哪个 html 编辑器中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:58:49.283

应该可以在 notepad++ 中使用正则表达式来匹配空格或换行符，或者换行符和空格。

但是，我确实知道您应该使用哪一个，但这可能会让您上路。

我最好的猜测是在单词之间使用类似的东西`(\s\n|\n\s)`，但我无法让它发挥作用。

编辑：我认为您的问题[已经在这里得到解答](https://stackoverflow.com/questions/5489128/find-multiple-lines-in-notepad)

# wpf - WPF中的绑定/触发“全选”-CheckBox ComboBoxItem

> ID：13969761
> 
> 赞同：0
> 
> 时间：2012-12-20T10:10:49.217
> 
> 标签：wpf, combobox, compositecollection

除了用户定义的项目列表之外，我正在尝试制作一个带有“全选”项目的 WPF CustomControl CheckComboBox。选择“全选”时，应相应检查列表中的所有项目。如何对单击的“全选”项目采取行动？我尝试了很多东西，但从未输入 CheckComboBox.cs 中的属性“SelectAll”。

这是我当前的代码。

通用的.xaml

```
<Style TargetType="{x:Type local:CheckComboBox}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:CheckComboBox}">
                    <ComboBox SelectedItem="{TemplateBinding SelectedItem}"
                              SelectedValue="{TemplateBinding SelectedValue}"
                              SelectedValuePath="{TemplateBinding SelectedValuePath}"
                              DisplayMemberPath="{TemplateBinding DisplayMemberPath}"
                              IsTextSearchEnabled="{TemplateBinding IsTextSearchEnabled}"
                              ItemTemplate="{TemplateBinding ItemTemplate}"
                              x:Name="InnerComboBox" >

                        <ComboBox.Resources>
                            <ResourceDictionary>
                                <CheckBox x:Key="allItem" Content="All" IsChecked="{Binding SelectAll, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                <CollectionViewSource x:Key="items" Source="{Binding ComboBoxItems, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                            </ResourceDictionary>
                        </ComboBox.Resources>

                        <ComboBox.ItemsSource>
                            <CompositeCollection>
                                <ComboBoxItem Content="{Binding Source={StaticResource allItem}}"/>
                                <CollectionContainer Collection="{Binding Source={StaticResource items}}" />
                            </CompositeCollection>
                        </ComboBox.ItemsSource>

                    </ComboBox>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding IsSelected}" Content="{Binding Text}" VerticalAlignment="Center" />
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

CheckComboBox.cs

```
 public class CheckComboBox : ComboBox
    {
        public class CheckComboBoxItem
        {
            public CheckComboBoxItem(bool isSelected, string text)
            {
                IsSelected = isSelected;
                Text = text;
            }
            public bool IsSelected { get; set; }
            public string Text { get; set; }
        }

        static CheckComboBox()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(CheckComboBox), new FrameworkPropertyMetadata(typeof(CheckComboBox)));
        }

        public static readonly DependencyProperty ComboBoxItemsProperty =
            DependencyProperty.Register("ComboBoxItems", typeof (ObservableCollection<CheckComboBoxItem>), typeof (CheckComboBox), new PropertyMetadata(default(ObservableCollection<CheckComboBoxItem>)));

        public ObservableCollection<CheckComboBoxItem> ComboBoxItems
        {
            get { return (ObservableCollection<CheckComboBoxItem>) GetValue(ComboBoxItemsProperty); }
            set { SetValue(ComboBoxItemsProperty, value); }
        }

        public static readonly DependencyProperty SelectAllProperty =
            DependencyProperty.Register("SelectAll", typeof (bool), typeof (CheckComboBox), new PropertyMetadata(default(bool)));

        public bool SelectAll
        {
            get { return (bool) GetValue(SelectAllProperty); }
            set
            {
                foreach (var item in ComboBoxItems)
                {
                    item.IsSelected = value;
                }
                SetValue(SelectAllProperty, value);
            }
        }
    }
} 
```

设置测试数据：

```
ObservableCollection<CheckComboBox.CheckComboBoxItem> checkComboBoxItems = new ObservableCollection<CheckComboBox.CheckComboBoxItem>();
checkComboBoxItems.Add(new CheckComboBox.CheckComboBoxItem(false, "Generation 0"));
checkComboBoxItems.Add(new CheckComboBox.CheckComboBoxItem(true, "Generation 1"));
checkComboBoxItems.Add(new CheckComboBox.CheckComboBoxItem(false, "Generation 2"));
checkComboBox1.ComboBoxItems = checkComboBoxItems; 
```

**编辑：** 将*CheckComboBox.cs*中的 SelectAll DependencyProperty 替换为以下代码，但未输入 OnSelectAll。SelectAll 组合框由于某种原因不会触发绑定。

```
public static readonly DependencyProperty SelectAllProperty =
        DependencyProperty.Register("SelectAll",
                    typeof (bool),
                    typeof (CheckComboBox),
                    new FrameworkPropertyMetadata(false,
                        FrameworkPropertyMetadataOptions.AffectsRender,
                        new PropertyChangedCallback(OnSelectAll)));

private static void OnSelectAll(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    CheckComboBox checkComboBox = (CheckComboBox)d;
    foreach (var item in checkComboBox.ComboBoxItems)
    {
        item.IsSelected = (bool) e.NewValue;
    }
}

public bool SelectAll
{
    get { return (bool) GetValue(SelectAllProperty); }
    set { SetValue(SelectAllProperty, value); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:02:02.133

终于想通了如何触发“SelectAll”属性。注意：

```
<ComboBoxItem>
    <CheckBox ... />
</ComboBoxItem> 
```

**通用的.xaml**

```
...
<ComboBox.Resources>
    <ResourceDictionary>
        <CollectionViewSource x:Key="items" Source="{Binding ItemsSource, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
    </ResourceDictionary>
</ComboBox.Resources>

<ComboBox.ItemsSource>
    <CompositeCollection>
        <ComboBoxItem>
            <CheckBox Content="All" IsChecked="{Binding SelectAll, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
        </ComboBoxItem>
        <CollectionContainer Collection="{Binding Source={StaticResource items}}" />
    </CompositeCollection>
</ComboBox.ItemsSource>
... 
```

**CheckComboBox.cs**

```
public class CheckComboBox : ComboBox
{
    public class CheckComboBoxItem : ModelBase
    {
        public CheckComboBoxItem(bool isSelected, string text)
        {
            IsSelected = isSelected;
            Text = text;
        }

        private bool _isSelected;
        public bool IsSelected 
        { 
            get { return _isSelected; }
            set { Set(() => IsSelected, ref _isSelected, value); }
        }

        private string _text;
        public string Text 
        { 
            get { return _text; }
            set { Set(() => Text, ref _text, value); }
        }
    }

    static CheckComboBox()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(CheckComboBox), new FrameworkPropertyMetadata(typeof(CheckComboBox)));
    }

    public static readonly DependencyProperty SelectAllProperty =
        DependencyProperty.Register("SelectAll",
                                    typeof (bool),
                                    typeof (CheckComboBox),
                                    new FrameworkPropertyMetadata(false,
                                        FrameworkPropertyMetadataOptions.AffectsRender,
                                        new PropertyChangedCallback(OnSelectAll)));

    private static void OnSelectAll(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        CheckComboBox checkComboBox = (CheckComboBox)d;
        IEnumerable<CheckComboBoxItem> items = (IEnumerable<CheckComboBoxItem>) checkComboBox.ItemsSource;
        foreach (var item in items)
        {
            item.IsSelected = (bool) e.NewValue;
        }
    }

    public bool SelectAll
    {
        get { return (bool) GetValue(SelectAllProperty); }
        set { SetValue(SelectAllProperty, value); }
    }
} 
```

现在我只需要弄清楚如何在取消选择另一个项目时自动取消选择“全选”复选框。

# java - 为什么 String.split("£", 2) 不起作用？

> ID：13969769
> 
> 赞同：4
> 
> 时间：2012-12-20T10:11:24.537
> 
> 标签：java, regex, string, split

我有一个包含 1000 行的文本文件，格式如下：

```
19 x 75 Bullnose Architrave/Skirting £1.02 
```

我正在编写一个逐行读取文件的方法 - 这工作正常。

然后，我想使用“£”作为分隔符拆分每个字符串，并将其写入`ArrayList<String>`以下格式：

```
19 x 75 Bullnose Architrave/Skirting, Metre, 1.02 
```

这就是我处理它的方式（`productList`是`ArrayList`在 try 块之外声明/实例化的 , ）：

```
try{
    br = new BufferedReader(new FileReader(aFile));
    String inputLine = br.readLine();
    String delim = "£";

    while (inputLine != null){
        String[]halved = inputLine.split(delim, 2);
        String lineOut = halved[0] + ", Metre, " + halved[1];//Array out of bounds
        productList.add(lineOut);

        inputLine = br.readLine();
    }
} 
```

字符串没有分裂，我不断得到一个`ArrayIndexOutOfBoundsException`. 我对正则表达式不是很熟悉。我也尝试过使用旧的`StringTokenizer`但得到相同的结果。

`£`作为 delim有问题还是其他问题？我确实想知道这是否与第二个令牌没有被读取为`String`?

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:24:29.403

以下是一些可能的原因：

*   文件的编码与您用来读取它的编码不匹配，并且文件中的“磅”字符被“破坏”成其他东西。

*   该文件和您的源代码使用不同的类似英镑的字符。例如，Unicode 有两个看起来像“磅符号”的代码点——英镑字符 (00A3) 和里拉字符 (2084)……然后是罗马字符 (10192)。

*   您正在尝试编译 UTF-8 编码的源文件而不告诉编译器它是 UTF-8 编码的。

* * *

从您的评论来看，这是一个编码不匹配的问题；即Java 使用的“默认”编码与文件的实际编码不匹配。有两种方法可以解决这个问题：

*   更改文件的编码以匹配 Java 的默认编码。您似乎已经尝试过但失败了。（这不会是我这样做的方式......）

*   更改程序以使用特定（非默认）编码打开文件；例如改变

    ```
    new FileReader(aFile) 
    ```

    至

    ```
    new FileReader(aFile, encoding) 
    ```

    其中`encoding`是文件的实际字符编码的名称。[Java 可以理解的编码名称在此处](http://docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html)列出，但我的猜测是它是“ISO-8859-1”（又名 Latin-1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:20:53.937

这可能是编码不匹配的情况。要检查这一点，

*   打印`delim.length`并确保它是`1`.
*   打印`inputLine.length`并确保它是正确的值 ( `42`)。

如果其中之一不是预期值，那么您必须确保在任何地方都使用 UTF-8。

你说`delim.length`是1，所以这很好。另一方面，如果`inputLine.length`是 34，这是*非常*错误的。因为`"19 x 75 Bullnose Architrave/Skirting £1.02"`如果一切都符合预期，你应该得到 42。如果您的文件是 UTF-8 编码但读取为 ISO-8859-1 或类似文件，您将得到 43。

现在我有点不知所措。要调试它，您可以单独打印字符串的每个字符并检查它们有什么问题。

```
for (int i = 0; i < inputLine.length; i++)
    System.err.println("debug: " + i + ": " + inputLine.charAt(i) + " (" + inputLine.codePointAt(i) + ")"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T23:12:13.073

非常感谢您的所有回复。

在读取中指定编码并将原始文本文件保存为 UTF -8 有效。

然而，经验告诉我，使用“£”或其他可能在不同编码中具有多种表示的字符来分隔文本是一种糟糕的策略。

我决定采取不同的方法：

1) 查找输入字符串中的最后一个空格并将其替换为“xxx”或类似名称。

2) 使用分隔符“xxx”将其拆分。这应该拆分字符串并撕掉“£”。

3) 继续..

# c# - c# 多态性

> ID：13969772
> 
> 赞同：2
> 
> 时间：2012-12-20T10:11:38.340
> 
> 标签：c#, oop, polymorphism

我是多态的新手并且有点挣扎。

我有三个班。作为基类的访问类。然后是送货和取货。

送货和取货都是拜访。

我希望能够参考访问课程并与送货和取货交谈。

```
 public virtual class Visit
    {
    private string customerName;
    private string customerAddress;
    private DateTime arrivalTime;

    public string customername
    {
        //name properties
        set { customerName = value; }
        get { return customerName; }
    }

    public string customeraddress
    {
        //address properties
        set { customerAddress = value; }
        get { return customerAddress; }
    }

    public DateTime arrivaltime
    {
        //time proerties
        set { arrivalTime = value; }
        get { return arrivalTime; }
    }
}

public class Delivery : Visit
/*
 * Polymorphism, Delivery is also a visit.
 */
{
    private string deliveryAddress;
    private string deliveryName;

    public string deliveryaddress
    {
        set { deliveryAddress = value; }
        get { return deliveryAddress; }
    }

    public string deliveryname
    {
        set { deliveryName = value; }
        get { return deliveryName; }
    }

    public string ToString()
    { //return Delivery details
        return deliveryname + " " + deliveryaddress + " " + customername + " " + customeraddress + " " + arrivaltime;
    }

}

public class Pickup : Visit
/*
 * Polymorphism, pickup is also a visit.
 */
{
    public string ToString()
    { //return Pickup details
        return customername + " " + customeraddress + " " + arrivaltime.ToString();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:16:30.563

首先，您必须`virtual`从基类中删除

```
Visit v=new Pickup();
v.customeraddress = "some address";
v=new Delivery();
v.customeraddress = "some address"; 
```

正如您在上面的示例中看到的那样，它`v`是一种类型，`Visit`但我允许它指向一个实例`Pickup`或`Delivery`对分配的实例类型具有不同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:22:33.503

如果我正确理解你的问题......

您的场景是您有一个`Visit`对象，并希望根据它是 a`Pickup`还是`Delivery`. 只要您在运行时创建了`Delivery`or`Pickup`对象，您就可以执行以下操作：

```
Visit v = GetVisit() //or whatever your method is
if(v.GetType() == typeof(Delivery))
{
    Delivery d = v as Delivery;
}
else //Must be Pickup
{
    Pickup p = v as Pickup;
} 
```

然后您可以使用该对象，该对象通过设计将向您显示访问变量以及该类的唯一变量..例如...`d.customeraddress`

当从现有源（例如平面文件或数据库）获取访问对象时，这不起作用。如果是这种情况，如果您打算进一步增加分类，您将需要类中的属性，`Visit`例如Enumeration 类。`bool AmIDelivery`然后，您可以查看此变量并采取相应的行为 - 但您需要先创建转换对象才能使用它。如果这对你来说是个问题，我可以举个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:23:39.233

如果您希望您的基类不被实例化（即`Visit`对象没有意义，它是 a`Pickup`或 a `Delivery`）您可以将基类声明为`abstract`而不是`virtual`

之后，您可以随心所欲地使用多态代码。例如：

```
List<Visit> visits = new List<Visit>();
visits.Add(new Pickup{ ... some properties set here ...});
visits.Add(new Delivery{ ... some properties set here ...});

// writes out a pickup via a polymorphic call
Console.WriteLine(visits[0].ToString()) 
// writes out a delivery via a polymorphic call
Console.WriteLine(visits[1].ToString()) 
```

但是，如果您想使用特定于交付的属性，则不能使用它，因为对 eg 的引用`visits[0]`是 type `Visit`，即使引用的对象是 type `Delivery`。要使用它们，您需要检查对象的运行时类型并将它们转换为特定的子类型，如下所示：

```
foreach (Visit visit in visits)
{
   if (visit is Delivery)
   {
       Delivery d = (Delivery)visit;
       //delivery specific code here
   }
   else if (visit is Pickup)
   {
       Pickup p = (Pickup) visit;
       //pickup specific code here
   }
   else
   {
       //unknown descendant, panic
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:31:07.067

多态性意味着基类中的实现可以在派生类中被覆盖。

在您的情况下，除了`ToString()`覆盖之外，一切都与*继承*有关。

请注意，在您的代码中，您隐藏了该`ToString()`方法。C# 允许您将成员添加到具有父类的确切标识符的继承类，但这不是多态性。

如果整个用关键字标记，您的派生类将执行*多态性：*`ToString()``overrides`

```
public override string ToString()
{
    return base.ToString(); // Change this line with any custom action
} 
```

其他细节是类不能是*虚拟*的，但成员可以。类可以是`regular`（允许多态性）或`sealed`（它不能被继承）。

嗯......你知道什么是*向上*和*向下*吗？

### 垂头丧气

将引用转换为更具体的类型。例如：

```
Visit visit = new Delivery();
Delivery delivery = (Delivery)visit; // This is a downcast! 
```

### 向上转型

将引用转换为不太具体的类型。例如：

```
Visit deliveryTypedAsBaseClass = new Delivery() // This is an upcast! 
```

## 好的

然后，由于 C# 是一种静态类型语言，因此*类型*化意味着类型为 as 的变量`Visit`可以访问它自己的成员。如果你需要访问`Delivery`会员，**你需要向下投！**

# php - Zend Framework 2 - Composer - 自定义库的手动安装在安装/更新时被删除

> ID：13969774
> 
> 赞同：1
> 
> 时间：2012-12-20T10:11:40.123
> 
> 标签：php, zend-framework2, composer-php

我编写了一个自己的库并将其手动包含在我在[这里](https://stackoverflow.com/a/13934480/1331671)`composer/autoload_namespaces.php`被告知的内容中。

在我使用`install`or`update`命令之前它工作正常。然后删除此行，尝试使用 lib 时出现错误。

任何想法如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:44:04.893

你在另一个线程中得到的建议不是很好。Composer 使用来自 composer.json 的信息重写自动加载文件，因此您永远不应该直接编辑 php 文件。您应该做的是向您的 composer.json 添加一个自动加载块。

例如：

```
{
    "autoload": {
        "psr-0": {
            "Vendor\\Namespace\\": "src/"
        }
    }
} 
```

[http://getcomposer.org/doc/04-schema.md#autoload](http://getcomposer.org/doc/04-schema.md#autoload)上的完整文档

# xslt - 如何在 xsl 模板之间传递参数

> ID：13969781
> 
> 赞同：-1
> 
> 时间：2012-12-20T10:11:59.690
> 
> 标签：xslt, parameters

我有以下 xsl 文件，它通过元素“id”连接两个 xml 文件：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:strip-space elements="*"/>
<xsl:output method="xml" indent="yes" />

<xsl:key name="trans" match="Transaction" use="id" />

<!-- Identity template to copy everything we don't specifically override -->
<xsl:template match="@*|node()">
<xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
</xsl:template>

<!-- override for Mail elements -->
<xsl:template match="Mail">
<xsl:copy>
<!-- copy all children as normal -->
<xsl:apply-templates select="@*|node()" />
<xsl:variable name="myId" select="id" />
  <Transaction_data>
    <xsl:for-each select="document('transactions.xml')">
      <!-- process all transactions with the right ID -->
      <xsl:apply-templates select="key('trans', $myId)" />
    </xsl:for-each>
  </Transaction_data>
</xsl:copy>
</xsl:template>

<!-- omit the id element when copying a Transaction -->
<xsl:template match="Transaction/id" />
</xsl:stylesheet> 
```

现在我希望 id 成为一个参数。我将从 xml 文件中获取参数：

```
<xsl:param name="usenode" select="*[name() = document('params.xml')/*/join_node]"/>
<xsl:key name="trans" match="Transaction" use="*[name() = document('params.xml')/*/join_node]" /> 
```

我可以在这些行之后打印该变量的值，但进一步，当我想使用它时，变量的值似乎消失了。如何使变量对整个文件可见？

编辑：

好的，我正在尝试更具体地提出这个问题。

所以我的目标是我想要“id”的使用属性

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:strip-space elements="*"/>
<xsl:output method="xml" indent="yes" />
<xsl:param name="usenode" select="*[name() = document('params.xml')/*/join_node]"/>
<xsl:key name="trans" match="Transaction" use="*[name() = document('params.xml')/*/join_node]" />

<!-- Identity template to copy everything we don't specifically override -->
<xsl:template match="@*|node()">
<xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
</xsl:template>

<!-- override for Mail elements -->
<xsl:template match="Mail">
<xsl:copy>
<!-- copy all children as normal -->
<xsl:apply-templates select="@*|node()" />
<xsl:variable name="myId" select="$usenode" />
<Transaction_data>
<xsl:for-each select="document('transactions.xml')">
  <!-- process all transactions with the right ID -->
  <xsl:apply-templates select="key('trans', $myId)" />
</xsl:for-each>
</Transaction_data>
</xsl:copy>
</xsl:template>

<!-- omit the id element when copying a Transaction -->
<xsl:template match="Transaction/id" />
</xsl:stylesheet> 
```

当我提到 $usenode 时，它​​是不可见的。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:03:06.477

你还没有说你把 xsl:param 放在哪里。如果它是 xsl:stylesheet 的子元素，那么它在整个样式表中都是可见的。如果它是 xsl:template 的子级，则它仅在该模板中可见。您的帖子的标题（在模板之间传递参数）表明您需要一个模板参数（即 xsl:param 作为 xsl:template 的子级）-但坦率地说，您根本没有弄清楚您想要实现的目标，你尝试了什么，或者它是如何失败的。所以我不赞成这个问题。

# jsf - 如何使用jsf连续获取每个下拉列表的不同组件ID

> ID：13969789
> 
> 赞同：0
> 
> 时间：2012-12-20T10:12:17.647
> 
> 标签：jsf, drop-down-menu, components, identifier

我有如下数据表：

```
<p:dataTable id="transactionTableID" binding="#{transactionReportBean.dataTable}" 
    value="#{transactionReportBean.summarizedDateWiseTransactionList}"
    var="transacVAR" rowKey="#{transacVAR.OID}" style="float:center;">

    <p:column headerText="#{build.reportSelection}">
        <p:selectOneMenu id="" value="#{transactionReportBean.summaryTxnReportSelected}"  >
            <f:selectItem itemLabel="-Select One-" itemValue="-Select One-"/>
            <f:selectItem itemLabel="#{build.matchedreport}" itemValue="#{build.matchedreport}"/>
            <f:selectItem itemLabel="#{build.carryforwardreport}" itemValue="#{build.carryforwardreport}"/>
            <f:selectItem itemLabel="#{build.exceptionreport}" itemValue="#{build.exceptionreport}"/>
        </p:selectOneMenu>
        <p:commandButton  update="@form" value="Generate" ajax="false"
            actionListener="#{transactionReportBean.getReportSelected}" />
    </p:column>
</p:dataTable> 
```

以及如下的动作监听器方法：

```
public void getReportSelected(){
    if(this.SummaryTxnReportSelected.equalsIgnoreCase("-Select One-")||this.SummaryTxnReportSelected.equalsIgnoreCase(null)){
        this.message = AlgoMessageHandler.getMessage(AlgoMessageHandler.USER_MSG, "ERR0048");
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
                                                      this.getMessage(), AFTSConstants.BLANK_STRING));
    } else {
        this.selectedDtTxn= (TransactionsSummaryReportVO) dataTable.getRowData();
        System.out.println("listener called "+this.getSummaryTxnReportSelected()+" Selected transaction ID "+selectedDtTxn.getExecutionID());  
        String reportname = generateJasperReport(this.getSummaryTxnReportSelected(),AFTSConstants.SUMMARY_TXN_REPORT,this.selectedDtTxn);
        System.out.println("Report Name"+reportname);
        this.summaryReportStored= AFTSConstants.SUMMARY_REPORT_STORED_PATH+reportname+".pdf";
        System.out.println(this.summaryReportStored);
        this.setRenderGenerateButton(false);
    }
} 
```

该方法即将根据我们选择的下拉项生成报告。在我的表中，我有 10 行，每行包含一个包含 3 个项目的下拉列表。有一个“生成”按钮。选择下拉项目并单击“生成”按钮后，对于前 9 行它不提供组件 ID，对于第 10 行它正在工作。

这里的问题不在于生成报告，问题在于 JSF 不会为每行中的每个下拉列表采用不同的组件 ID。我试过了`id="reportID"`，但没有成功。我试图将表的行键值`rowKey="#{transacVAR.OID}"`设为`id="#{transacVAR.OID}"`，但它会引发“空组件 id”之类的异常。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:33:04.847

您的问题与组件 ID 无关。您的问题是因为您将所有行的提交值绑定到一个相同的 bean 属性。JSF 根据输入元素在树中出现的顺序处理提交的值。因此，JSF 将为每一行调用与提交值完全相同的 setter 方法，直到到达最后一行。您最终得到最后一行的值。如果您在 setter 方法上放置了一个断点，您会注意到它随后被调用，并使用来自每一行的不同值。

您需要将值绑定到当前迭代的行对象。

```
<p:selectOneMenu value="#{transacVAR.summaryTxnReportSelected}"> 
```

# .net - 基于声明的授权 + WPF 桌面应用程序

> ID：13969790
> 
> 赞同：1
> 
> 时间：2012-12-20T10:12:23.717
> 
> 标签：.net, security, claims-based-identity

我正在尝试在 4.5 版的 WPF 桌面应用程序中实现安全模型。我研究了很多文章，其中大多数要么是基于 Web 的，要么是基于 WCF 的。

这是否意味着基于声明的安全性实际上并不适用于桌面应用程序？

请帮我理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:56:39.650

基于声明的身份是对身份建模的一种方式——它完全独立于客户端/服务器环境。

您始终可以创建一个 ClaimsPrincipal 并填充一些声明，然后再查询它们。

# asp.net - 未调用 HttpHandler

> ID：13969794
> 
> 赞同：12
> 
> 时间：2012-12-20T10:12:35.620
> 
> 标签：asp.net, httphandler, iis-express

我需要编写一个 HttpHandler 来提供 JavaScript 文件，这些文件是我项目中 .DLL 中的嵌入资源。视图中的引用不能直接看到这样的资源，因此我计划使用 HttpHandler 模块来拦截任何带有路径 /js/[file] 的请求，找到匹配的嵌入文件并返回脚本。

问题是我的 HttpHandler 代码从未被调用，尽管在 web.config 部分尝试了许多不同的设置。我显然遗漏了一些东西，但没有错误消息，我看不到那是什么。我得到的只是来自静态文件处理程序的 404。

**Q1) 我是否遗漏了一些明显的东西？**

**Q2) 有没有办法让 IIS 告诉我为什么它没有调用我的处理程序？**

摘要：我正在为 ASP.NET MVC 4 应用程序在 IIS Express (v8) 上进行测试。

我创建了一个实现 IHttpHandler 的简单库，并在我的测试 MVC 应用程序中添加了对此的引用，并在 web.config 中添加了以下行：

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="true" />
    <handlers>
      <add name="ejs" path="js/*" verb="*" type="EmbeddedJsHandler.EmbeddedJsHandler, EmbeddedJsHandler" preCondition="integratedMode" /> 
```

图书馆在那里，但从未被调用过。任何带有 /js/test.js 的请求或任何只会导致 404 错误的请求。

到目前为止，我已经在处理程序代码中尝试了许多不同的配置和设置。我试过 preCondition, resourceType="Unspecified", modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll"

我试过路径：

```
  js/*.js
  js/*
  js/*.*

```

我检查了正在使用的集成模式设置部分（在 system.webServer 中），并确认它是。

我已经在堆栈溢出中搜索了类似的情况，并尝试了许多可能的解决方案......仍然没有乐趣。

哎呀，即使是 Jon Skeet 也有这些问题！ [为什么我的 IHttpHandler 没有被调用？](https://stackoverflow.com/questions/1381258/why-isnt-my-ihttphandler-being-called)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-20T15:02:45.300

最后偶然发现了它-它是RouteConfig.cs文件中缺少的routes.IgnoreRoute()-MVC路由引擎未配置为忽略此路径，因此将其传递给静态文件处理程序。

嗬！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T10:45:22.643

检查这个：

[如何：注册 HTTP 处理程序](http://msdn.microsoft.com/en-us/library/46c5ddfy%28v=vs.100%29.aspx)：

**要为在集成模式下运行的 IIS 7.0 注册 HTTP 处理程序：**

1.  编译 HTTP 处理程序类并将生成的程序集复制到应用程序根文件夹下的 Bin 文件夹。

2.  在应用程序的 Web.config 文件中，在 system.webServer 部分创建一个 handlers 元素。

以下示例显示如何注册响应 SampleHandler.new 资源请求的 HTTP 处理程序。处理程序定义为程序集 SampleHandlerAssembly 中的类 SampleHandler。

```
<configuration>
  <system.webServer>
    <handlers>
      <add name="SampleHandler" verb="*" 
        path="SampleHandler.new" 
        type="SampleHandler, SampleHandlerAssembly" 
        resourceType="Unspecified" />
    </handlers>
  </system.webServer>
</configuration> 
```

**注意：** resourceType**属性**与 IIS 6.0 的 IIS 管理器中的验证文件存在选项执行相同的功能。

**对于以集成模式运行的 IIS 7.0，只需要在 handlers 元素中进行注册。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:30:10.377

我不能直接告诉你为什么你的处理程序不工作，但我会给你一个我们使用并为我们工作的处理程序的例子：

```
<system.webServer>
    <handlers>
        <add name="JS handler" path="*.js" verb="*" type="Handlers.Minifiers.JSMinify" resourceType="Unspecified" preCondition="integratedMode" />
    </handlers>
</system.webServer> 
```

我们也有这个段，至少是在卡西尼中运行所必需的

```
<system.web>
    <httpHandlers>
        <add verb="*" path="*.js" type="Handlers.Minifiers.JSMinify" validate="false"/>
    </httpHandlers>
</system.web> 
```

如果这没有帮助，您是否尝试过使用`path="/js/*"`？

# perl - 如何在输入期间从 FASTA 格式文件中删除第一行？

> ID：13969802
> 
> 赞同：1
> 
> 时间：2012-12-20T10:13:21.393
> 
> 标签：perl, bioinformatics, fasta

我想从 FASTA 文件中删除输入期间的第一行，以便我的程序仅将氨基酸序列作为输入。

FASTA 文件的第一行以开头，`>`它包含序列的“入藏号”及其来源。例如：

```
>MCHU - Calmodulin - Human, rabbit, bovine, rat, and chicken    
ADQLTEEQIAEFKEAFSLFDKDGDGTITTKELGTVMRSLGQNPTEAELQDMINEVDADGNGTID 
FPEFLTMMARKMKDTDSEEEIREAFRVFDKDGNGYISAAELRHVMTNLGEKLTDEEVDEMIREA 
DIDGDGQVNYEEFVQMMTAK* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:42:27.523

跳过以 开头的行`>`：

```
while(<>) {
    next if /^>/;
    # ...
} 
```

或者，使用`$.`(current input line number) 跳过第一个：

```
while(<>) {
    next if $. < 2;
    # ...
} 
```

# mysql - 计数/组 Null 和 Not Null

> ID：13969808
> 
> 赞同：0
> 
> 时间：2012-12-20T10:14:00.713
> 
> 标签：mysql, sql

我有一个数据库，其中包含 2 个文件，一个日期和一个字符串（还有更多文件，但只有这些文件对此感兴趣），该字符串可以为空。现在我想计算有多少字符串是空的，有多少不是。

```
SELECT 
  `date`, `serial`, count(`serial`) as count 
FROM 
  `updates` 
WHERE 
  `date` BETWEEN '2012-11-25 00:00:00' AND '2012-11-25 23:59:59' 
GROUP BY 
  `serial` 
```

这是我目前的代码。我真的不知道如何以一种好的方式汇总它。

问候亚历克斯

// 编辑

结果我想要：

```
2012-11-25    NULL        2452
2012-11-25    NOT NULL    3476 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:18:11.553

如果你想计算空字符串，而不是空值，你可以使用这个：

```
SELECT
  `date`,
  count(`serial`) as count_not_nulls,
  count(case when `serial` is null then 1 end) as count_nulls
FROM `updates`
WHERE `date` BETWEEN '2012-11-25 00:00:00' AND '2012-11-25 23:59:59'
GROUP BY `date` 
```

**编辑：**

```
SELECT `date`, 'NOT NULL', count(`serial`) as count
FROM `updates`
WHERE `date` BETWEEN '2012-11-25 00:00:00' AND '2012-11-25 23:59:59'
     AND `serial` is not null
GROUP BY `date`
UNION
SELECT `date`, 'NULL', count(1) as count
FROM `updates`
WHERE `date` BETWEEN '2012-11-25 00:00:00' AND '2012-11-25 23:59:59'
      AND `serial` is null
GROUP BY `date` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:35:48.337

简而言之

```
SELECT 
  DATE( `date` ) the_date, 
  CASE WHEN serial IS NULL THEN 'NULL' ELSE 'NOT NULL' END sernull, 
  COUNT(*)
FROM 
  updates
WHERE
  DATE( `date` ) = '2012-11-25'
GROUP BY 
  the_date, 
  sernull 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/91039/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:18:43.270

这为您提供序列不为空的计数

```
SELECT `date`, `serial`, count(`serial`) as count
FROM `updates`
WHERE `date` BETWEEN '2012-11-25 00:00:00' AND '2012-11-25 23:59:59' 
and serial is not null
GROUP BY `serial` 
```

这为您提供序列为空的计数

```
SELECT `date`, `serial`, count(`serial`) as count
FROM `updates`
WHERE `date` BETWEEN '2012-11-25 00:00:00' AND '2012-11-25 23:59:59' 
and serial is  null
GROUP BY `serial` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:31:50.423

希望这对你有帮助。试试这个-

```
SELECT 'date','serial',count('serial') as count
FROM
(SELECT 'date',
           CASE WHEN 'serial'  is null THEN `NULL'
                   ELSE 'NOT NULL' END as serial
FROM `updates` WHERE `date` BETWEEN '2012-11-25 00:00:00' AND '2012-11-25 23:59:59' )
GROUP BY 'date,'serial' 
```

祝你好运！

# jquery - jQuery Script 中的图像不会在 Slider 中加载

> ID：13969810
> 
> 赞同：0
> 
> 时间：2012-12-20T10:14:07.363
> 
> 标签：jquery

我已经从这个页面[Basic-slider.com复制了文件和代码](http://basic-slider.com/)

但是当我预览它时，图像出现在身体下方。我不知道为什么，因为我给了它一个更高的 z-index 并将它安排在顶部。此外，当我更改它以使图像出现在表格/列表中时，它们会显示出来，但是我没有滑块。这就是我到目前为止的编码方式：

头：

```
<title>Tech and Innovation</title>
<link href="style.css" rel="stylesheet" type="text/css" />
<link href="bjqs.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script> 
<script type="text/javascript" src="bjqs.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
    $('#banner-fade').bjqs({
        'height' : 320,
        'width' : 620,
        'responsive' : true
    });
});
</script>

</head> 
```

正文 HTML：

```
<body>
<div id="wrapper">
<div id="header">
    </div>
    <div align="center">
<div id="body" style="width: 960px; left: 0px; top: 0px">

<div id="my-slideshow" style="height: 500px; z-index: 3;">
    <ul class="bjqs">
        <li><img alt="" height="310" src="img/banner01.jpg" width="620" /></li>
    <li><img alt="" height="310" src="img/banner03.jpg" width="620" /></li>
    </ul>
    </div>
</div>
</div>

<div id="footer" style="height: 178px">

</div>

</div>

</body> 
```

CSS：

```
ul.bjqs{
    position: relative;
    list-style: none;
    padding: 0;
    margin: 0;
    overflow: auto;
    display: block;
    z-index: 2;
}

li.bjqs-slide{
    position:absolute;
    display:none;
}

ul.bjqs-controls{
    list-style:none;
    margin:0;
    padding:0;
    z-index:9999;
}

ul.bjqs-controls.v-centered li a{position:absolute;}

ul.bjqs-controls.v-centered li.bjqs-next a{right:0;}
ul.bjqs-controls.v-centered li.bjqs-prev a{left:0;}

ol.bjqs-markers{list-style: none; padding: 0; margin: 0; width:100%;}

ol.bjqs-markers.h-centered {text-align: center;}
ol.bjqs-markers li {display:inline;}

ol.bjqs-markers li a {display:inline-block;}

p.bjqs-caption {
    display:block;
    width:96%;
    margin:0;
    padding:2%;
    position:absolute;
    bottom:0;
} 
```

我不确定我做错了什么，但我确信这很简单，因为我是自学成才的，目前很难找到事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:20:39.237

请改用以下内容。

```
$(function() {
     $('#my-slideshow').bjqs({
        'height' : 320,
        'width' : 620,
        'responsive' : true
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:41:50.957

你的 jquery 版本是

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

并且css路径是正确的

# algorithm - 有序集和自然双射（组合物种）

> ID：13969813
> 
> 赞同：0
> 
> 时间：2012-12-20T10:14:18.617
> 
> 标签：algorithm, haskell, complexity-theory, combinatorics

让`A`一些设置（例如`1000, 1001, 1002, ..., 1999`）。

让`lessThan`一些顺序关系函数（例如`(a lessThan b) <-> (a > b)`）。

让`index`一个函数（带有 inverse ）将一个元素`index'`映射到自然值。`A`

例子：

```
index a = 2000 - a
index' n = 2000 - n 
```

是否存在某种方法来为P（多项式时间）中的所有（或某些种类的）对构造`index`（和）函数？`index'``(A, lessThan)`

最好的问候和提前感谢！

**EDITED**：`A`根据定义可能是一个集合（例如，所有组合与另一个大子集的重复），然后，我们不能假设`A`它是完全可遍历的（在 P 中）。

**编辑**：另一个不平凡的例子，让`An`一个集合（带有类似`(x, y, p)`的元素），其元素按顺时针方向排列成一个`n X n`正方形，像这样

```
 1    2    3    4
12   13   14    5
11   16   15    6
10    9    8    7 
```

然后，我们可以将每个三元组映射`An`到`Bn = [1..n^2]`（`O(1)`多项式）。

给定一个`An`元素，我们`index`可以`Bn`使用`O(1)`. 给定一个`Bn`元素，我们`index'`可以`An`使用`O(1)`.

```
// Square perimeter; square x = 1, 2, 3, ...
Func<int, int, int> perimeter = ( x, n ) => 4 * ( n - 2 * x + 1 ); 

// Given main diagonal coordinates (1, 1), (2, 2), ... return cell number
Func<int, int, int> diagonalPos = ( x, n ) => -4 * x * x + ( 4 * n + 8 ) * x - 4 * n - 3; 

// Given a number, return their square
Func<int, int, int> inSquare = ( z, n ) => (int) Math.Floor(n * 0.5 - 0.5 * Math.Sqrt(n * n - z + 1.0) + 1.0); 

Func<int, int, Point> coords = ( z, n ) => { 
    var s = inSquare(z, n); 
    var l = perimeter(s, n) / 4; // length sub-square edge -1 
    var l2 = l + l; 
    var l3 = l2 + l; 
    var d = diagonalPos(s, n); 
    if( z <= d + l ) 
        return new Point(s + z - d, s); 
    if( z <= d + l2 ) 
        return new Point(s + l, s + z - d - l); 
    if( z <= d + l3 ) 
        return new Point(s + d + l3 - z, s + l); 
    return new Point(s, s + d + l2 + l2 - z); 
}; 
```

（我读过“组合物种”、[“组合对象的有序构造”](http://www.cs.tau.ac.il/~nachumd/papers/OrderedConstruction.pdf)、[“物种”haskell 包](http://hackage.haskell.org/package/species)等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:26:42.050

我可能会误解你想要什么，但万一我不是：

如果`lessThan`在集合上定义了一个总订单，您可以通过以下方式创建`index`和`index'`函数

*   将集合转换为列表（或数组/向量）
*   排序根据`lessThan`
*   构造`index'`为`Data.Map.fromDistinctAscList $ zip [1 .. ] sortedList`
*   构造`index`为`Data.Map.fromDistinctAscList $ zip (map NTC sortedList) [1 .. ]`

其中`NTC`是一个 newtype 构造函数，它将集合元素的类型包装在一个 newtype 中，其`Ord`实例由 给出`lessThan`。

```
newtype Wrapped = NTC typeOfElements

instance Eq Wrapped where
    (NTC x) /= (NTC y) = x `lessThan` y || y `lessThan` x
-- that can usually be done more efficiently

instance Ord Wrapped where
    (NTC x) <= (NTC y) = not $ y `lessThan` x 
```

> **编辑**： A 可以是定义的集合（例如，所有组合与另一个大子集的重复），然后，我们不能假设 A 是完全可遍历的（在 P 中）。

在这种情况下，除非我遗漏了一些基本的东西，否则原则上是不可能的，因为该`index'`函数将提供对集合的完整遍历。

因此，当且仅当集合在多项式时间内可遍历时，您才能在多项式时间内创建`index`和函数。`index'`

# c# - 在哪里可以找到日历控件？

> ID：13969815
> 
> 赞同：2
> 
> 时间：2012-12-20T10:14:27.140
> 
> 标签：c#, calendar

我试图查看是否可以将[`MonthCalendar`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.monthcalendar?redirectedfrom=MSDN&view=netframework-4.8)控件自定义为更多的事件日历，您可以在其中每天输入文本，或者在单击当天时发生操作。

但是，月历与我想要的非常不同。我是否必须为事件日历创建一个全新的日历，例如每个单元格代表一天的 6x7 网格？或者有没有更简单的方法？

这是 MonthCalendar 控件的样子：

[![月历](../Images/ce8ca4acf3970dd3426e3173e30fc6d8.png)](https://i.stack.imgur.com/vJqWI.png)
[（来源：[dotnetperls.com](http://www.dotnetperls.com/monthcalendar.png)）]

这就是我要的： ![活动日历](../Images/5904b6666206d3c13d0d752f0c4ff355.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:16:51.053

我使用 DevExpress 组件，他们有 XtraScheduler 可以做到这一点，甚至更多。他们的调度程序适用于所有平台，ASP.NET、SL、MVC、Windows 窗体、WPF ......

我现在不知道有任何免费的解决方案，至少不在那个级别，你可以下载他们的试用版，看看它是否符合你的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:25:39.807

Devexpress`XtraScheduler`组件是您所需要的。检查[文档](http://documentation.devexpress.com/#WindowsForms/CustomDocument1971)，搜索[Devexpress 支持，你可以在](http://search.devexpress.com/?q=XtraScheduler)[Devexress TV](http://www.youtube.com/user/DeveloperExpress)上找到很多关于它的视频。

![在此处输入图像描述](../Images/64b3ffe555e733df756d8fe726f78f97.png)

# javascript - 通过将鼠标悬停在图像上滚动 div 的内容

> ID：13969816
> 
> 赞同：3
> 
> 时间：2012-12-20T10:14:31.877
> 
> 标签：javascript, jquery, html, css

我有一个包含很多内容的 div，它跨越了页面大小。所以我想知道是否可以分别在 div 上方和下方添加“向上箭头图像”和“向下箭头图像”。当我将鼠标悬停在图像上时，div 上的内容将开始滚动，就像它在页面上滚动一样。但我不希望滚动条出现在我的 div 旁边。我只希望内容仅在我将鼠标悬停在图像上时滚动。

在下面的代码中，当我将鼠标悬停在“HOVER ME”div 上时，它会跳转到 div 的末尾。所以我想要一个具有滚动效果并且旁边没有滚动条的类似功能。这可能吗？这是[jsfiddle 链接](http://jsfiddle.net/8Kb7N/)

HTML 代码：

```
<a href="#last">Last</a>
<div id="hover"> HOVER ME </div>
<div id="container">
    <div><a name=""></a> One </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name=""></a> Stuff </div>
    <div><a name="last"></a> Last </div>
<br class="clear">
</div>​ 
```

代码：

```
#hover{
   width:200px;
   height:20px;
 border:1px solid #cc0000;   
}
#container{
  width:500px;
  height:300px;
 overflow-y:auto;   
    border:1px solid #000;
}
#container div{
  width:100px;
height:100px;    
    float:left;
}
.clear{
 clear:both;   
} 
```

​</p>

JAVASCRIPT：

```
$('#hover').hover(function(){
    window.location = '#last';
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:20:52.050

唯一的变化在这里：

```
$('#hover').hover(function(){
    $('#container').animate({ scrollTop: $('#container')[0].scrollHeight }, 1000);
});​ 
```

在容器的 CSS 样式中，我将溢出属性更改为`hidden`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:19:28.703

为什么要重新发明轮子

您可以使用 jquery 插件[http://logicbox.net/jquery/simplyscroll/vertical.html](http://logicbox.net/jquery/simplyscroll/vertical.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:21:24.620

尝试设置一个间隔，然后为元素的`scrollTop`属性设置动画：

```
$(function() {
    var current_scroll = 0,
        container = $('#container'),
        timer

    $('#hover').hover(function() {  
        timer = window.setInterval(scrollDiv, 30);
    }, function() {  
        window.clearInterval(timer);
    });​​​​​

    function scrollDiv()
    {
        var new_scroll = current_scroll += 10;
        container.scrollTop(new_scroll);
        current_scroll = new_scroll;
    }
}); 
```

您可以修改每次滚动的间隔或量，以达到您想要的速度。请在此处查看工作演示 > [http://jsfiddle.net/tUYKS/](http://jsfiddle.net/tUYKS/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:36:47.287

这样你就可以进入`last div`，`#container`找到`offset()` `top`那个 div 并应用滚动。

```
$('#hover').hover(function(){
    $('#container').animate({ scrollTop: $('#container div:last').offset().top }, 1000);
}); 
```

# shell - 使用 netcat 逐行发送文本文件

> ID：13969817
> 
> 赞同：8
> 
> 时间：2012-12-20T10:14:36.970
> 
> 标签：shell, unix, netcat

我正在尝试使用以下命令逐行发送文件：

```
nc host port < textfile
cat textfile | nc host port 
```

我尝试过使用*tail*和*head*，但结果相同：整个文件作为唯一行发送。服务器正在侦听特定的守护进程以接收数据日志信息。

我想一个接一个地发送和接收行，而不是一次发送整个文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T11:31:27.533

你必须使用netcat吗？

```
cat textfile > /dev/tcp/HOST/PORT 
```

也可以达到您的目的，至少使用 bash。

* * *

> 我想逐行发送和接收，而不是一次性发送和接收所有文件。

尝试

```
while read x; do echo "$x" | nc host port; done < textfile 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-10-27T06:33:35.373

OP 不清楚他们是否需要*为每条*线路建立新的连接。但根据[OP 的评论](https://stackoverflow.com/questions/13969817/send-text-file-line-by-line-with-netcat/46968824#comment19277004_13971251)，我认为他们的需求与我的不同。但是，Google 会派人来这里满足我的需求，所以我将在这里放置这个替代方案。

*我需要通过单个连接*逐行发送文件。基本上，这是一个“慢” `cat`。（这将是许多“会话”协议的共同需求。）

如果我尝试将电子邮件发送给`nc`我，则会收到错误消息，因为服务器无法与我进行“对话”。

```
$ cat email_msg.txt | nc localhost 25
554 SMTP synchronization error 
```

现在，如果我将 a`slowcat`插入管道，我会收到电子邮件。

```
$ function slowcat(){ while read; do sleep .05; echo "$REPLY"; done; }
$ cat email_msg.txt | slowcat | nc localhost 25
220 et3 ESMTP Exim 4.89 Fri, 27 Oct 2017 06:18:14 +0000
250 et3 Hello localhost [::1]
250 OK
250 Accepted
354 Enter message, ending with "." on a line by itself
250 OK id=1e7xyA-0000m6-VR
221 et3 closing connection 
```

`email_msg.txt`看起来像这样：

```
$ cat email_msg.txt
HELO localhost
MAIL FROM:<system@example.com>
RCPT TO:<bbronosky@example.com>
DATA
From: [IES] <system@example.com>
To: <bbronosky@example.com>
Date: Fri, 27 Oct 2017 06:14:11 +0000
Subject: Test Message

Hi there! This is supposed to be a real email...

Have a good day!
-- System

.
QUIT 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-08T02:06:58.597

使用 stdbuf -oL 调整标准输出流缓冲。如果 MODE 为“L”，则相应的流将被行缓冲：

```
stdbuf -oL cat textfile | nc host port 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T15:05:19.167

只是在这里猜测，但您可能 CR-NL 行尾：

```
sed $'s/$/\r/' textfile | nc host port 
```

# iphone - Iphone 应用程序：-我的应用程序崩溃

> ID：13969820
> 
> 赞同：0
> 
> 时间：2012-12-20T10:14:44.617
> 
> 标签：iphone, objective-c, uikit, custom-cell

我制作了一个像这样的自定义单元类。

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {

self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {

    /*imgview=[[UIImageView alloc]initWithFrame:CGRectMake(10, 15, 40, 20)];
    imgview.backgroundColor = [UIColor clearColor];
    imgview.opaque = NO;*/

    Name = [[UILabel alloc]initWithFrame:CGRectMake(75, 10, 130, 30)];
    Name.backgroundColor = [UIColor clearColor];
    Name.textColor=[UIColor blueColor];
    Name.font=[UIFont fontWithName:@"Arial" size:16.0];
    Name.textAlignment=NSTextAlignmentLeft;

    CGSize textSize = [[Name text] sizeWithFont:[Name font]];
    CGFloat strikeWidth = textSize.width;
    ScreenName =[[UILabel alloc]initWithFrame:CGRectMake(strikeWidth+75.0, 25  , 150, 40)];
    ScreenName.backgroundColor = [UIColor clearColor];
    ScreenName.textColor=[UIColor redColor];
    ScreenName.font=[UIFont fontWithName:@"Arial" size:16.0];
    ScreenName.textAlignment=NSTextAlignmentLeft;

    tweetview=[[UITextView alloc]initWithFrame:CGRectMake(75, 50, 200, 70)];
    tweetview.backgroundColor = [UIColor clearColor];
    tweetview.textColor=[UIColor redColor];
    tweetview.font=[UIFont fontWithName:@"Arial" size:16.0];        
    tweetview.textAlignment=NSTextAlignmentLeft;
    tweetview.editable=NO;
    tweetview.dataDetectorTypes=UIDataDetectorTypeLink;

    Minutes=[[UILabel alloc]initWithFrame:CGRectMake(270, 20, 150, 50)];
    Minutes.backgroundColor = [UIColor clearColor];
    Minutes.textColor=[UIColor blueColor];
    Minutes.font=[UIFont fontWithName:@"Arial" size:14.0];
    Minutes.textAlignment=NSTextAlignmentLeft;

    //  [self.contentView addSubview:imgview];
    [self.contentView addSubview:Name];
    [self.contentView addSubview:ScreenName];
    [self.contentView addSubview:Minutes];

    //  [self.contentView addSubview:LastTweet];
    [self.contentView addSubview:tweetview];

}

return self;
} 
```

并在这样的`nextviewcontroller.m`实例方法中使用它`tableView:didSelectRowAtIndexPath:`：

```
CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
   // cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
        cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];

} 
```

我的应用程序每次都因消息而崩溃

```
Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:10:01.763

正如@Rajneesh071 所述，UI 更改必须在主线程上执行。

这可以使用以下方法完成：

```
[self performSelectorOnMainThread:@selector(doYourUIChanges:) withObject:nil waitUntilDone:YES]; 
```

或者，如果您希望在主线程上执行一段内联代码，请使用以下命令：

```
dispatch_async(dispatch_get_main_queue(), ^{
    /* YOUR UI STUFF */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:34:43.680

这是因为您正在后台线程上进行一些 UI 更改。在 ios 中，您不能在后台线程上执行任何 UI 更改，这会使您的应用程序崩溃。

所以你必须在主线程上做你的 UI 更改

```
[self performSelectorOnMainThread:@selector(doYourUIChanges:) withObject:nil waitUntilDone:YES]; 
```

或者

```
dispatch_async(dispatch_get_main_queue(), ^{ 
//Your Task
}); 
```

或者

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // background code
}); 
```

# extjs - 避免在“焦点”或“点击”事件上展开组合框

> ID：13969821
> 
> 赞同：0
> 
> 时间：2012-12-20T10:14:47.567
> 
> 标签：extjs

团队，

我有一个问题，我不想在某个标志上展开组合框并想显示警报消息。

EXTJS 中没有像 onClick 这样的事件，所以我尝试使用焦点事件，但组合框仍在扩展。

代码

```
focus:function() {
    if(this.store.baseParams.donotExpandFlag) {
           alert("I should not expand this combo");
           // What to do here and out side of IF block so that there is conditional expansion          
    }              
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:47:51.580

您需要指定您的 ExtJS 版本并格式化您的代码。

这是您可以为 ExtJS4.x 做的事情

手动设置/取消设置`isExpanded`属性。那应该有效（未经测试）

对于 ExtJS3.x，您将必须覆盖该`isExpanded()`方法，此外还应用一个自定义标志，指示阻塞/自动并在默认代码执行之前进行检查。

你可以试试这个（未经测试）

```
_isExpanded:  true, // true means block, false auto
isExpanded: function(){
    return this._isExpanded || (this.list && this.list.isVisible());
}, 
```

不，这行得通。请参阅**[ExtJS3.4](http://jsfiddle.net/sran/nfrz5/2/)**的 JSFiddle

**[ExtJS3.4](http://jsfiddle.net/sran/nfrz5/3/)**的第二个JSFiddle 带有一个表单

# ios - 任何人都知道如何在 QueryForTable 中缩小这个查询（使用 Parse.com）

> ID：13969823
> 
> 赞同：0
> 
> 时间：2012-12-20T10:14:49.347
> 
> 标签：ios, parse-platform

任何人都知道如何缩小这个，这样我就不必在 QueryForTable 方法的主线程中运行查询？我正在使用 Parse.com

```
//Find who are the users following (RELATIONSHIP OBJECT)
PFQuery *followeesQuery = [PFQuery queryWithClassName:@"Relationship"];
[followeesQuery whereKey:@"Follower" equalTo:[PFUser currentUser]];
NSArray *followees = [followeesQuery findObjects];
//Filter followees
self.followees = [[NSMutableArray alloc] initWithCapacity:[followees count]];
for (int i = 0; i < [followees count]; i++) {
    PFObject *followee = followees[i];
    PFUser *user = (PFUser *)[followee objectForKey:@"User"]; //USER OBJECT
    [self.followees addObject:user];
}

PFQuery *nearbyPhotosQuery = [PFQuery queryWithClassName:@"Photo"]; //PHOTO OBJECT
[nearbyPhotosQuery whereKey:@"User" notContainedIn:self.followees];
[nearbyPhotosQuery whereKey:@"Location" nearGeoPoint:self.userCurrentLocation withinKilometers:10];

PFQuery *followersPhotoQuery = [PFQuery queryWithClassName:@"Photo"]; //PHOTO OBJECT
[followersPhotoQuery whereKey:@"User" containedIn:self.followees];

NSMutableSet *set = [NSMutableSet setWithArray:[nearbyPhotosQuery findObjects]];
[set addObjectsFromArray:[followersPhotoQuery findObjects]];

NSArray *targetPhotoObjects = [set allObjects];

NSMutableArray *targetIDs = [[NSMutableArray alloc] initWithCapacity:[targetPhotoObjects count]];
for (int i = 0; i < [targetPhotoObjects count] ; i++) {
    PFObject *photoObject = targetPhotoObjects[i];
    [targetIDs addObject:photoObject.objectId];
}

PFQuery *targetPhotoQuery = [PFQuery queryWithClassName:@"Photo"];
[targetPhotoQuery whereKey:@"objectId" containedIn:targetIDs];

return targetPhotoQuery; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T21:37:47.823

如果我没看错的话，你想查询关注者或你附近的所有照片。为什么不使用：

```
PFQuery *followeesQuery = [PFQuery queryWithClassName:@"Relationship"];
[followeesQuery whereKey:@"Follower" equalTo:PFUser.currentUser];

PFQuery *followeesPhotosQuery = [PFQuery queryWithClassName:@"Photo"];
[followeesPhotosQuery whereKey:@"User" matchesKey:@"User" inQuery:followeesQuery];

PFQuery *nearbyPhotosQuery = [PFQuery queryWithClassName:@"Photo"];
[nearbyPhotosQuery whereKey:@"Location"
               nearGeoPoint:self.userCurrentLocation
            withinKilometers:10];

return [PFQuery orQueryWithSubqueries:@[followeesPhotosQuery, nearbyPhotosQuery]]; 
```

这是一个与您要查找的内容相匹配的查询，不需要创建服务器端行程。如果您希望在流程的任何步骤中返回超过 100 个元素，您可能需要使用内部查询返回的最大元素数；一路上的每个查询都受制于自己的查询限制。

# java - 试图理解递归

> ID：13969824
> 
> 赞同：-3
> 
> 时间：2012-12-20T10:14:53.150
> 
> 标签：java, recursion

```
public static int fun(int x) {
    if(x<1){
        return 1;
    } else {

        return x+fun(x-1)+fun(x-2);
    }
} 
```

我在尝试解决给定数字的递归时遇到了一些问题。例如`x`可能是 3 或 4 什么的，结果会是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:25:40.790

试试这个来帮助你理解：

```
//do first call with trace ""
public static int fun(int x, String trace) {
    System.out.println(trace + " ENTRY x=" + x);
    int ret;
    if(x<1){
        ret = 1;
    } else {   
        ret = x+fun(x-1, trace+'<')+fun(x-2, trace+'>');
    }
    System.out.println(trace + " RETURN " + ret);
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:23:11.943

当您调用 x = 3 的函数时，您会得到如下所示的递归调用：

fun(3) -> 3 + fun(2) + fun(1){1} fun(2) -> 2 + fun(1){2} + fun(0){1}

乐趣(1){2} -> 1 + 乐趣(0){2} + 乐趣(-1) 乐趣(0){2} -> 1 乐趣(-1) -> 1

它回滚到 fun(1){2} -> 1 + 1 + 1 -> 3

如此有趣(2) -> 2 + 3 + fun(0){1} fun(0){1} -> 1 因此，有趣(2) -> 2 + 3 + 1 -> 6

然后调用 fun(1){1}，执行与 fun(1){1} 相同的过程。

这一切都回滚到 fun(3) -> 3 + 6 + 3 -> 12

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:20:40.970

```
x=3
return 3+fun(2)+fun(1)         // so return 3+6+3
    fun(2) = 2+fun(1)+fun(0)   // so fun(2)=6
        fun(1) = 1+fun(0)+1
            fun(0) = 1
        fun(0) = 1

    fun(1) = 1+fun(0)+1        // so fun(1)=3
         fun(0) = 1

result return 12 
```

# c# - 如何将 Visual C++ 生成的 DLL 包含到 C# 代码中？

> ID：13969825
> 
> 赞同：0
> 
> 时间：2012-12-20T10:14:59.087
> 
> 标签：c#, visual-studio-2010, visual-c++, dll, dllimport

> **可能重复：**
> [必须使用 C# dll 来调用 C++ dll？](https://stackoverflow.com/questions/3073303/have-to-use-c-sharp-dll-to-call-c-dll)

这是我第一个与`importing external dll to my C# code`. 我`DLl`从`visual C++ code`. 让我粘贴以下内容`.cpp and .h file`：

```
#include...
#
using namespace std;
BOOL APIENTRY DllMain( HANDLE hModule,DWORD  ul_reason_for_call, LPVOID lpReserved)
{   
      return TRUE;
}

unsigned char* decrypt(string stringKSN, string key){ #### some code
     convert(key_new);
return key_new
}

void convert(char * a) { ## return "some_value"
} 
```

我构建了`visual c++`项目，它创建了一个`finalDLL.dll`。现在我想在`dll`我的`c#`代码中使用它。`dll`我在google上搜索了一下，发现我们可以`c#`借助`p/invoke exports`. 但是当我将示例代码与上面的代码进行比较时，情况就完全不同了。

我无法测试是否`finalDLL.dll`已纠正或损坏？

请帮我完成我的导入任务。

# django - 从 urls.py 导入时 Django 找不到模块

> ID：13969827
> 
> 赞同：1
> 
> 时间：2012-12-20T10:15:00.490
> 
> 标签：django

我在导入另一个`urlpatterns`.

`python manage.py shell`->工作正常，但是当我尝试从以下位置导入它时`from bar.urls import urlpatterns`Django 找不到：“没有名为 bar.urls 的模块”。`bar``foo/foo/urls.py`

`tree ~/workdir/foo`

```
foo
├── foo
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── local_db
│   │   └── foo.db
│   ├── settings.py
│   ├── urls.py
│   ├── wsgi.py
├── __init__.py
├── manage.py
├── bar
│   ├── __init__.py
│   ├── models.py
│   ├── baz
│   │   ├── __init__.py
│   │   ├── __init__.pyc
│   │   ├── baz_interface.py
│   │   ├── test.py
│   ├── templates
│   │   └── index.html
│   ├── tests.py
│   ├── urls.py
│   └── views.py
├── README.md
└── requirements.txt

5 directories, 28 files 
```

`foo/urls.py`

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('',
        (r'^test/', include('foo.bar.urls')),
)

# this will fail too :
# 1.
# from foo.bar.urls import urlpatterns as test
# urlpatterns += test
# 2.
# from bar.urls import urlpatterns as test
# urlpatterns += test
# 3.
#urlpatterns = patterns('',
#    (r'^test/', include('bar.urls')),
#) 
```

`bar/urls.py`

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('',
     url(r'^$', 'foo.bar.views.viewname', name='viewname'),
) 
```

我`Django 1.4.3`在`Python 2.7.3`virtualenv 中运行。
`bar`在我的`INSTALLED_APPS`.
`~/workdir/foo/`在我的 python 路径中。

我怎样才能`urlpattern`从工作中导入`foo/foo/urls.py`？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:41:02.410

你`bar/urls.py`应该看起来像：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('bar.views',
    url(r'^$', 'viewname', name='viewname'),
) 
```

你`foo/urls.py`的是：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('',
    url(r'^test/', include('bar.urls')),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:31:02.707

如果您在应用程序启动后检查`sys.path`变量，您将看到列表中的第一个路径是：`foo`- 根目录。如果我理解你的权利，你可以像这样的路径

```
 sys.path.insert(0, '..') 
```

这是非常糟糕的解决方案，更好的是：

```
 PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))   
   sys.path.insert(0, os.path.join(PROJECT_ROOT, '..') 
```

最好的解决方案是在你的 's`foo`之上再创建一个目录。`foo`项目为：

```
python foo/manage.py runserver 
```

# metrics - 开箱即用的 ganglia 设置以监控 yammer-metrics

> ID：13969835
> 
> 赞同：2
> 
> 时间：2012-12-20T10:15:27.307
> 
> 标签：metrics, ganglia

我对神经节一无所知，我想知道是否已经存在用于监视来自 servlet 的 yammer-metrics 的设置

谢谢

# android - 滑动屏幕的某些部分

> ID：13969837
> 
> 赞同：11
> 
> 时间：2012-12-20T10:15:36.977
> 
> 标签：android, gesture, swipeview

我正在尝试设计一个包含一些滑动部分的屏幕。我有一个带有地图视图、列表视图和一些文本的屏幕。我的 Mapview 是滑动的主要部分，如果我向左滑动，则会显示联系人，如果我向右滑动，则会显示地址。
这是我的形象。我正在展示我需要滑动的圆形部分。 ![在此处输入图像描述](../Images/83a83684bdf9a312b77a2becbecee767.png)
我如何在我的应用程序中实现此功能。我完成了[一个教程](http://savagelook.com/blog/android/swipes-or-flings-for-navigation-in-android)，但它对我没有帮助。本教程教如何滑动全屏，但我需要滑动屏幕的某些部分。
是否可以。给我一些参考或提示。我不明白`viewPager`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T13:44:52.617

最后我得到了滑动屏幕某些部分的答案。在 onCreate() 你需要添加以下行

```
MyPagerAdapter adapter = new MyPagerAdapter();
     myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
     myPager.setAdapter(adapter);
     myPager.setCurrentItem(3); 
```

我在课堂上扩展了 PagerAdapter 类。

```
private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 3;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0: 
            resId = showHotelContact();             
            break;
        case 1:
            resId = showHotelAddress();         
            break;              
        case 2:     
            resId = showHotelMap();             
            break;      
        }

        View view = inflater.inflate(resId, null);
        ((ViewPager) collection).addView(view, 0);
        return view;
    }
 }   
public int showHotelMap()
{
    int resId;
    resId = R.layout.hotelmap;
    return resId;
}
public int showHotelAddress()
{
    int resId;
    resId = R.layout.hoteladdress;
    return resId;
}
public int showHotelContact()
{
    int resId;
    resId = R.layout.hotelcontact;
    return resId;
} 
```

这是我的xml文件

```
?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<android.support.v4.view.ViewPager
android:id="@+id/myfivepanelpager"
android:layout_width="wrap_content"
android:layout_height="186dp"
android:fadingEdge="vertical" />

<TextView
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/hotelName" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:20:22.893

创建一个这样的类：

```
public class OnSwipeTouchListener implements OnTouchListener {

private final GestureDetector gestureDetector = new GestureDetector(new GestureListener());

public boolean onTouch(final View v, final MotionEvent event) {
    return gestureDetector.onTouchEvent(event);
}

private final class GestureListener extends SimpleOnGestureListener {

    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }
    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        onTouch(e);
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        boolean result = false;
        try {
            float diffY = e2.getY() - e1.getY();
            float diffX = e2.getX() - e1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                        onSwipeRight();
                    } else {
                        onSwipeLeft();
                    }
                }
            } else {
               // onTouch(e);
            }
        } catch (Exception exception) {
            exception.printStackTrace();
        }
        return result;
    }
}
public void onTouch(MotionEvent e) {
}
public void onDown(MotionEvent e) {
}
public void onSwipeRight() {
}

public void onSwipeLeft() {
}

public void onSwipeTop() {
}

public void onSwipeBottom() {
}

} 
```

然后添加`OnSwipeTouchListener`到您的`MapView`

# objective-c - 使用 NSDocument 打开任何文件夹

> ID：13969844
> 
> 赞同：5
> 
> 时间：2012-12-20T10:15:54.923
> 
> 标签：objective-c, cocoa, file-type, nsdocument

我正在尝试编写一个可以打开 NSDocument 子类中的任何文件夹但无法找出正确的 Info.plist 设置的应用程序。重要的是，我的应用程序不应使用捆绑包，具有特定文件扩展名的文件夹也不能打开任何文件夹。

我尝试了什么：

*   如果我将文档类型扩展名设置为空字符串，则文件打开面板不允许选择任何文件
*   如果我将文档类型扩展名设置为 *，那么文件打开面板会启用所有文件，但不会启用文件夹：文件夹会像在 finder 中一样打开
*   如果我将文件夹扩展名设置为文档类型扩展名，我可以在文件打开对话框中将文件夹作为文档打开（这是我想要的），但我将解决方案限制为具有该扩展名的文件夹
*   通过将 OSType 设置为“fold”，将文档类型标识符或名称设置为“public.folder”等，正如我在论坛中所读到的那样，对我来说没有明显的影响。

如何在打开文件对话框中打开任何文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:48:00.827

为了完整起见，这里是@iKenndac 答案的更多详细信息：

在 IB 中检查 First Responder 的哪个方法与 File / Open... 菜单项相关联。就我而言，它是`openDocument:`。在 AppDelegate 中实现这个方法：

```
-(void)openDocument:(id)sender
{
    NSOpenPanel *panel = [NSOpenPanel openPanel];
    [panel setCanChooseFiles:NO];
    [panel setCanChooseDirectories:YES];
    [panel setAllowsMultipleSelection:NO];

    [panel beginSheetModalForWindow:nil
                  completionHandler:^(NSInteger result) {
                      if (result == NSFileHandlingPanelOKButton) {
                          NSURL* selectedURL = [[panel URLs] objectAtIndex:0];
                          NSLog(@"selected URL: %@", selectedURL);
                          NSError* error = nil;
                          [[NSDocumentController sharedDocumentController] 
                              openDocumentWithContentsOfURL:selectedURL 
                                                   display:YES 
                                                     error:&error];
                      }
                  }];
} 
```

您仍然需要在 Info.plist 中定义一个文档类型，将 Identifier (LSItemContentTypes) 字段设置为`public.folder`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T13:30:12.157

如果不编写一些自定义代码，您可能无法做到这一点。

您需要`NSOpenPanel`手动呈现，如下所示：

```
NSOpenPanel *panel = [NSOpenPanel openPanel];
[panel setCanChooseFiles:NO];
[panel setCanChooseDirectories:YES];

[panel beginSheetForDirectory:nil
                         file:nil
               modalForWindow:[self window]
                modalDelegate:self
               didEndSelector:@selector(openPanelDidEnd:returnCode:contextInfo:)
                  contextInfo:nil]; 
```

以这种方式呈现的打开面板将让用户选择他们想要的任何目录。您可以实现`NSOpenPanel`的委托方法来验证每个文件夹并在需要时启用/禁用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-17T12:50:24.623

正如对今天如何做到这一点的更新摘要一样，这里是我必须做的分步指南：

1.  **使用 Xcode 从Cocoa 应用程序**模板创建一个应用程序项目。

2.  选中**创建基于文档的应用程序**并在“文档扩展名”中留下任何建议（如果您在此处删除文件扩展名，它将拒绝启用“下一步”按钮，因此我们稍后会这样做）。

3.  单击项目的图标，转到**Info**选项卡和**Document Types**。

4.  删除**扩展**字段的内容。我们的文件夹不需要特定的文件名后缀

5.  将**public.folder**写入**标识符**字段。

6.  在**CFBundleTypeOSTypes**数组中的 Additional document type properties 下添加一个条目fold **（****仅**这四个小写字母）。*不确定这是否有必要，但至少是正确的。*

******   确保**文档作为捆绑分发**未*选中*。

    *   为您的项目创建一个`NSDocumentController`包含以下方法的子类。将其命名为例如`ULIFolderDocumentController`。***** 

 *****```
    -(void)openDocument:(id)sender
    {
        NSOpenPanel *panel = [NSOpenPanel openPanel];
        [面板 setCanChooseFiles:NO];
        [面板 setCanChooseDirectories:YES];
        [面板 setAllowsMultipleSelection:NO];

        [面板 beginWithCompletionHandler: ^( NSInteger 结果)
        {
            如果（结果 == NSFileHandlingPanelOKButton）
            {
                NSURL* selectedURL = [[panel URLs] objectAtIndex:0];
                NSLog(@"选择的 URL: %@", selectedURL);
                [self openDocumentWithContentsOfURL: selectedURL
                        显示：是
                        completionHandler: ^(NSDocument * _Nullable 文档, BOOL documentWasAlreadyOpen, NSError * _Nullable 错误)
                        {
                            NSLog(@"%spened 文档 %@ (%@)", (documentWasAlreadyOpen? "Reo" : "O"), document, error);
                        }];
            }
        }];
    }

```

9.  在您的应用程序委托的`-init`方法中添加一行来加载您的子类，而不是`NSDocumentController`. 这很简单，只需请求共享对象：

```
    [ULIFolderDocumentController sharedDocumentController]; // 用我们的覆盖系统的 NSDocumentController。

```

10.  尝试一下！:)*****

# c - 使用 C 清除类似于手册页的终端

> ID：13969847
> 
> 赞同：0
> 
> 时间：2012-12-20T10:16:03.640
> 
> 标签：c, linux, manpage

我想读取一个文本文件并显示它。但我需要在终端上打印它，类似于手册页（linux）。也就是说，向上滚动时不应超出第一行，向下滚动不应超出最后一行。我只能用 C 语言编写它。我不应该使用任何工具。我目前单独清除终端的编码是，

```
#include<stdio.h>

main()
{
printf("\033[2J");
printf("\033[0;0f");
FILE *ffp;
char c;

ffp=fopen("help.txt","r");
while((c=getc(ffp))!=EOF)
    printf("%c",c);
} 
```

请指导我。提前致谢。

更新：

```
main()
{
FILE *ffp;
char c;

ffp=fopen("help.txt","r");

FILE *less = popen("less", "w");
while ((c = getc(ffp)) != EOF) {
  fputc(c, less);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:20:42.237

尝试这样的事情，，

```
#include <stdio.h>

int
main ()
{
    fputs("output1\n",stdout);
    fputs("output2\n",stdout);
    fputs("\033[A\033[2K\033[A\033[2K",stdout);
    rewind(stdout);
    ftruncate(1,0); /* you probably want this as well */
    fputs("output3\n",stdout);
    fputs("output4\n",stdout);
    return 0;
} 
```

**来源：** [清除终端程序 Linux C/C++ 的输出](https://stackoverflow.com/questions/1348563/clearing-output-of-a-terminal-program-linux-c-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:25:10.170

```
FILE *less = popen("less", "w");
while ((c = getc(ffp)) != EOF) {
  fputc(c, less);
} 
```

`more`并且`less`是一次实现滚动文件或管道的程序。

# android - 我们如何使用 Android 在平板电脑中滚动 ListView

> ID：13969848
> 
> 赞同：1
> 
> 时间：2012-12-20T10:16:02.653
> 
> 标签：android, android-listview, scrollview

在应用程序的开发阶段，我对一个地方感到震惊，滚动......

在应用程序中，我有两个`ListView`项目用于列出一些不同的数据。我的列表可以显示 n 个项目。如果我有一个单一的`ListView`手段，我将使用'ScrollView'全屏..

在这我该如何实现呢？

我的代码是，..

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical"
        android:padding="30dp" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center"
                android:text="Average"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/average"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center"
                android:text="Maximum"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/maximum"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center"
                android:text="Minimum"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/minmum"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="437dp"
            android:layout_weight="1"
            android:orientation="vertical"
            android:padding="30dp" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="Top Students List"
                android:padding="10dp"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <ListView
                android:id="@+id/list1"
                android:layout_width="wrap_content"
                android:layout_height="302dp"
                android:layout_gravity="center" >
            </ListView>
        </LinearLayout>
    </ScrollView>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical"
            android:padding="30dp" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="Bottom Students List"
                android:textAppearance="?android:attr/textAppearanceMedium" 
                android:padding="10dp"/>

            <ListView
                android:id="@+id/list2"
                android:layout_width="wrap_content"
                android:layout_height="302dp"
                android:layout_gravity="center" >
            </ListView>
        </LinearLayout>
    </ScrollView>
</LinearLayout>
</ScrollView> 
```

在这里，我尝试了“ListView”中的滚动条，...

```
 <ListView
      android:id="@+id/list1"
      android:layout_width="wrap_content"
      android:layout_height="302dp"
      android:layout_gravity="center"
      android:scrollbars="vertical" >
 </ListView> 
```

它在我的系统中工作，在开发时，但在平板电脑中我无法滚动它，..因为在我的电脑中我使用鼠标的滚动器来执行该活动，但在平板电脑中没有选项......

给我关于向下滚动我的“ListView”的建议，它只需要显示 4 个列表项一次。其他项目将在执行滚动功能时显示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:38:21.190

我只是`ScrollView`从 XML 文件中删除 ScrollView。因为`ListView`默认具有向下滚动的特征..

所以我的新代码是，..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:orientation="vertical"
    android:padding="30dp" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="horizontal" >
        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"
            android:text="Average"
           android:textAppearance="?android:attr/textAppearanceMedium" />
        <TextView
            android:id="@+id/average"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="horizontal" >
        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"
            android:text="Maximum"
            android:textAppearance="?android:attr/textAppearanceMedium" />
        <TextView
            android:id="@+id/maximum"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="horizontal" >
        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"
            android:text="Minimum"
            android:textAppearance="?android:attr/textAppearanceMedium" />
        <TextView
            android:id="@+id/minmum"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>
</LinearLayout>
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="437dp"
        android:layout_weight="1"
        android:orientation="vertical"
        android:padding="30dp" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="Top Students List"
            android:padding="10dp"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <ListView
            android:id="@+id/list1"
            android:layout_width="wrap_content"
            android:layout_height="302dp"
            android:layout_gravity="center" >
        </ListView>
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical"
        android:padding="30dp" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="Bottom Students List"
            android:textAppearance="?android:attr/textAppearanceMedium" 
            android:padding="10dp"/>

        <ListView
            android:id="@+id/list2"
            android:layout_width="wrap_content"
            android:layout_height="302dp"
            android:layout_gravity="center" >
        </ListView>
    </LinearLayout>
</LinearLayout> 
```

及其工作...

# webserver - 用 websocket 封装套接字

> ID：13969849
> 
> 赞同：0
> 
> 时间：2012-12-20T10:16:08.810
> 
> 标签：webserver, websocket, ada

是否可以使用带有 websockets 的 web 服务器作为另一个服务器的包装器，将消息从“真实服务器”传递到 web 客户端并返回？

我对此感到好奇，因为我有一个用 Ada 编写的游戏服务器，它有一个与操作系统相关的客户端。我想把这个客户端换成一个基于Javascript的webclient，这样游戏就可以在普通浏览器中玩了。可以做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:48:42.167

这就是[websockify](https://github.com/kanaka/websockify)的目的。它旨在桥接 WebSocket 客户端和常规 TCP 服务器。它是作为 noVNC 的一部分创建的，[noVNC](https://github.com/kanaka/noVNC)是一个可以连接到普通 VNC 服务器的 HTML5 VNC 应用程序。但是，websockify 是通用的，现在有许多其他项目在使用它。

*免责声明*：我创建了 websockify 和 noVNC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:00:21.893

您可以使用 AWS 轻松完成此操作：

[http://libre.adacore.com/tools/aws/](http://libre.adacore.com/tools/aws/)

AWS 中支持 websocket，您可以利用它的优秀套接字 (AWS.Net) 包来支持普通套接字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T06:46:36.643

Kaazing HTML5 网关是将基于 TCP 的协议引入 Web 客户端的好方法。Kaazing 网关基本上将您的协议运行在 TCP 之上并将其转换为 WebSocket，以便您可以访问客户端中的协议。您仍然需要为后端使用的协议编写一个 JavaScript 协议库。但是，如果您可以在 TCP 之上使用该协议，那么使用 JavaScript 并不难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T11:46:25.827

与某些人认为的相反，Websocket 不是纯套接字。原始数据由尚未广泛支持的 websocket 协议封装和屏蔽。这意味着不是为它设计的应用程序，您不能直接通过 Web 套接字与其通信。

当您有一个使用基于普通套接字的协议的应用程序，并且您想通过 websockets 与它通信时，有两种选择。

您要么使用 websocket 网关，它对 websocket 流量进行解包/打包，并将其作为纯套接字流量转发给应用程序。这样做的好处是您不需要修改应用程序，但它的缺点是它还掩盖了客户端的真实 IP 地址，这对于某些应用程序可能是也可能不是问题。

或者你直接在你的应用程序中实现 websocket。这可以通过让服务器监听两个不同的端口来完成，一个用于正常连接，一个用于 websocket 连接。通过 websocket-port 接收或发送的任何数据在发送之前/接收之后通过您的 websocket 实现发送，否则由相同的例程处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T03:04:52.910

我在 ruby​​ 中使用以下代码来包装我的套接字。该代码改编自[em-websocket-proxy](https://github.com/mcolyer/em-websocket-proxy)。我的项目可能有一些细节，但通常切换 remote_host 和 remote_port 并连接到 localhost:3000 应该为您设置一个通过 websocket 与您的服务器的新连接。

```
require 'rubygems'
require 'em-websocket'
require 'sinatra/base'
require 'thin'
require 'haml'
require 'socket'

class App < Sinatra::Base
    get '/' do
        haml :index
    end
end

class ServerConnection < EventMachine::Connection

  def initialize(input, output)
    super
    @input = input
    @output = output
    @input_sid = @input.subscribe { |msg| send_data msg+ "\n" }
  end

  def receive_data(msg)
    @output.push(msg)
  end

  def unbind
    @input.unsubscribe(@input_sid)
  end

end

# Configuration of server
options = {:remote_host => 'your-server', :remote_port => 4000}

EventMachine.run do   

  EventMachine::WebSocket.start(:host => '0.0.0.0', :port => 8080) do |ws|
    ws.onopen {
      output = EM::Channel.new
      input = EM::Channel.new

      output_sid = output.subscribe { |msg| ws.send msg; }

      EventMachine::connect options[:remote_host], options[:remote_port], ServerConnection, input, output

      ws.onmessage { |msg| input.push(msg)}

      ws.onclose {
        output.unsubscribe(output_sid)
      }
    }
  end

  App.run!({:port => 3000})   

end 
```

享受！并询问您是否有问题。

# vb.net - 在运行时在 vb.net 中更改属性属性

> ID：13969850
> 
> 赞同：1
> 
> 时间：2012-12-20T10:16:10.590
> 
> 标签：vb.net

我发现propertygrid 可以方便地在我的程序中编辑或显示一些自定义设置数据。但是我需要属性的某些属性是可变的。
像“只读”属性。

这是我到目前为止所拥有的：

```
Const myPersonCat As String = "MyPerson"
Const myDesc1 As String = "Firstname is one element"
<CategoryAttribute(myPersonCat), _
DescriptionAttribute(myDesc1), _
[ReadOnly](myBool)> _
Public Property firstname() As String
    Get
        Return _firstname
    End Get
    Set(ByVal value As String)
        If Not _firstname = value Then save_param("firstname", value, myPersonCat, myDesc1)
        _firstname = value
    End Set
End Property

Const mydesc2 As String = "but Lastname is second"
<CategoryAttribute(myPersonCat), _
DescriptionAttribute(mydesc2), _
[ReadOnly](myBool)> _
Public Property lastname() As String
    Get
        Return _lastname
    End Get
    Set(ByVal value As String)
        If Not _lastname = value Then save_param("lastname", value, myPersonCat, myDesc2)
        _lastname = value
    End Set
End Property 
```

Save_param 是调用将属性与基本数据一起保存在数据库中的函数。
所有这些工作都很好。

但现在是一个问题......这里有一些不太复杂的方法来为只读属性设置'myBool'，使用变量而不是常量，我可以阻止更改一些取决于程序情况的属性。
也许适用于整个类别或单个属性？

或者也许这里存在一些其他方式来获得类似的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:33:31.287

不，没有办法改变属性的值。作为替代方案，您可以在 Property Set 中编写代码，使其在用户尝试设置该值时抛出异常，而该值应该是只读的。

# c# - 在命名方法时：SAVE / CREATE / PERSIST 有什么区别？

> ID：13969851
> 
> 赞同：0
> 
> 时间：2012-12-20T10:16:15.417
> 
> 标签：c#, .net, crud

假设您在服务器端有一个方法，位于您的一个实体存储库中。

此方法在 Db 中插入或更新 Foo 实体。

你需要命名这个方法。

从命名约定的角度来看，您能否解释这些名称之间的差异（如果存在）：

*   SaveFoo(Foo foo)
*   PersistFoo(Foo foo)
*   CreateFoo(Foo foo)
*   SaveOrUpdate(Foo foo)

或者对于仅对 Db 进行 INSERTS 或 UPDATES 的方法的命名约定是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:21:46.320

函数的目的是什么？保存（或坚持，如果你愿意），对吧？您可能不在乎该函数是否必须插入或更新它……这是抽象的，因此您不必考虑它。因此，只需将其称为“保存”或“持久”，无论您喜欢哪个。那是我的两分钱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:33:50.717

如果您在一个团队中工作，您应该首先尝试找出那里是否有约定，因为保持一致通常比为某事找到绝对最佳名称更重要。

使用*Save*或*Persist*会起作用，因为它们并不暗示有关先前状态的任何内容。

使用*Create*意味着该项目不存在，即插入。

使用*SaveOrUpdate*可能会有些混乱，因为*Update*暗示该项目已经存在，但*Save*并不暗示有关状态的任何内容，因此它们重叠。

也许*InsertOrUpdate*将是一个替代方案，或者*CreateOrUpdate*。两者都可以工作，因为*Insert*和*Create*暗示该项目尚不存在，而*Update*暗示它确实存在，因此它们不会重叠。它们也比*Save*或*Persist*更精确，因为名称特别说明它们同时处理插入和更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:40:41.393

查看 .NET Framework，ConcurrentDictionary<,> 使用 .AddOrUpdate()

# ios - Hide keyboard when editing another textfield

> ID：13969852
> 
> 赞同：1
> 
> 时间：2012-12-20T10:16:18.257
> 
> 标签：ios, uitextfield, uipickerview, uikeyboard, uitextfielddelegate

I have 4 textfields, when editing 3 of them I want the standard keyboard which works fine, but on the 4th textfield i want to display a picker wheel instead.

My code works fine when pressing on the 4th textfield directly, but if I edit textfield 1-3 and then press on number 4, the keyboard doesn't remove.

Any ideas why? and how to solve it?

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
   if ([textField.text isEqualToString:selectedCountryText])
   {
     NSLog(@"Edit country");
     [self.view endEditing:YES];

     [UIView beginAnimations: @"anim" context: nil];
     [UIView setAnimationBeginsFromCurrentState: YES];
     [UIView setAnimationDuration: 0.3f];
     if (pickerVisible)
     {
        picker.frame = CGRectOffset(picker.frame, 0, -341);
        pickerVisible = FALSE;
     }
     else
     {
        picker.frame = CGRectOffset(picker.frame, 0, 341);
        pickerVisible = TRUE;
     }
     [UIView commitAnimations];
     [self removeKeyboard];
  }
  else
  {
    if (pickerVisible)
    {
        //Remove picker
        [UIView beginAnimations: @"anim" context: nil];
        [UIView setAnimationBeginsFromCurrentState: YES];
        [UIView setAnimationDuration: 0.3f];
        picker.frame = CGRectOffset(picker.frame, 0, -341);
        [UIView commitAnimations];
        pickerVisible = FALSE;
    }
  }       
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
  if ([textField.text isEqualToString:selectedCountryText])
  {
    //do nothing for now
  }
  else
  {
    [self.view endEditing:YES];
    [self removeKeyboard];
  }
}

- (void) removeKeyboard
{
    [self.firstname resignFirstResponder];
    [self.lastname resignFirstResponder];
    [self.year resignFirstResponder];
    [self.country resignFirstResponder];
} 
```

In The view did load I have set the delegate.

```
- (void)viewDidLoad
{
  NSLog(@"viewdidload SearchSwimmerView");
  // Setup the text fields..
  [self.firstname setDelegate:self];
  [self.firstname setReturnKeyType:UIReturnKeyDone];
  [self.firstname addTarget:self action:@selector(removeKeyboard) forControlEvents:UIControlEventEditingDidEndOnExit];

  [self.lastname setDelegate:self];
  [self.lastname setReturnKeyType:UIReturnKeyDone];
  [self.lastname addTarget:self action:@selector(removeKeyboard) forControlEvents:UIControlEventEditingDidEndOnExit];

  [self.year setDelegate:self];
  [self.year setReturnKeyType:UIReturnKeyDone];
  [self.year addTarget:self action:@selector(removeKeyboard) forControlEvents:UIControlEventEditingDidEndOnExit];

  [self.country setDelegate:self];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:29:31.847

Instead of using `[self.view endEditing:YES]` Use

```
 [textField performSelector:@selector(resignFirstResponder)
                    withObject:nil
                    afterDelay:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:21:56.367

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{

  if(textField==fourthtextfield)
  {
     return NO;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:36:59.683

I think setting inputView for 4th textfield as PickerView may do the trick.

```
textfield.inputView = pickerView; 
```

# ios - CoreData：findAllWithPredicate 工作正常吗？

> ID：13969861
> 
> 赞同：1
> 
> 时间：2012-12-20T10:16:57.590
> 
> 标签：ios, core-data, magicalrecord

我正在使用 Magical Record 库。它很酷，但我有一些麻烦。我的第二种方法返回不正确的数据。第一种和第二种方法必须返回相同数量的报价。findAllWithPredicate 工作正常吗？

**解锁并获取报价**

```
-(NSArray*) unlockAndFetchQuotes
{
 CoreDataManager *instance = [CoreDataManager instance];
 [instance unlockUnitNumber:1];
 return [instance fetchQuotes];
} 
```

**解锁单元号**

```
-(void) unlockUnitNumber:(int) number
{
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"identificator=%d", number];
 NSArray *array =[CDInApp findAllWithPredicate:predicate];
 if (array.count>0)
 {
    CDInApp *inApp = [array objectAtIndex:0];
    inApp.isLockedValue = NO;
    [[NSManagedObjectContext defaultContext] saveNestedContexts];
 }
} 
```

**获取报价**

```
-(NSArray*) fetchQuotes
{
 int z=0;
 NSArray *arr = [CDQuotes findAll];
 for (CDQuotes * quotes in arr)
 {
    if (!quotes.inApp.isLockedValue)
    {
        z++;
    }
 }
   NSLog(@"_____ unlocked quotes by first method %d", z);

 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"inApp.isLocked != 1"];
 int count = [CDQuotes countOfEntitiesWithPredicate:predicate];
   NSLog(@"_____ unlocked quotes by second method %d", count);

 NSArray *array = [CDQuotes findAllWithPredicate:predicate];
   NSLog(@"total unlocked array %d", array.count);

 return array;
} 
```

第一种和第二种方法必须返回相同数量的报价。第二种方法不能正常工作。

**我的输出**

```
___ must be unlocked quotes 500
___ unlocked quotes by first method 500
___ unlocked quotes by second method 250
total unlocked array 250 
```

![在此处输入图像描述](../Images/677b691979ca8f9c5728fc9643f81fb0.png)

**更新2**

我发现了一个问题。首先我做unlockAndFetchQuotes。我跟踪这个函数，发现了一些奇怪的东西。**获取报价后保存到 coredata。**现在我正在寻找可以立即保存的解决方案。

```
2012-12-21 18:13:32.992 CoreBug[6713:11603] _____ unlocked quotes by first method 8
2012-12-21 18:13:32.994 CoreBug[6713:11603] _____ unlocked quotes by second method 6
2012-12-21 18:13:32.996 CoreBug[6713:11603] -[NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback:](0x7464700) -> Saving <NSManagedObjectContext (0x7464700): *** DEFAULT ***> on *** MAIN THREAD ***
2012-12-21 18:13:32.997 CoreBug[6713:15603] -[NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback:](0x8148ef0) -> Saving <NSManagedObjectContext (0x8148ef0): *** BACKGROUND SAVING (ROOT) ***> on *** BACKGROUND THREAD *** 
```

我解锁了我的单位并获取了报价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:39:35.237

您`isLockedValue`在循环中使用，而不是`isLocked`. 据推测，`isLockedValue`不存在并且将永远存在`nil`，导致循环中的所有项目都被计算在内。

相比之下，您的谓词似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:32:41.213

您是否尝试过将谓词更改为

```
[NSPredicate predicateWithFormat:@"inApp.isLocked = NO"] 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T18:25:58.830

saveNestedContexts 是异步方法。我需要使用另一种方法

```
[localContext MR_saveNestedContextsErrorHandler:nil completion:^{
        [self fetchQuotes];
    }]; 
```

# svn - svnadmin dump of text only, without binary files

> ID：13969871
> 
> 赞同：3
> 
> 时间：2012-12-20T10:17:27.653
> 
> 标签：svn, svnadmin, svndump

It is possible to filter the SVN dump, generated by `svndamin dump`, so it will not included encoded binary data, just the text deltas and data?

I want to have a dump of an existing large SVN repositories, but only of the code. I have no interest in the stored binaries. However, binary files will make the dump file unnecessarily large. How can I generate the dump and exclude binary content?

Tried and failed, already:

1.  It is not practical to process the `svn log` diffs. It is a large and old repository, and getting diffs only for a short time period takes a lot of time and often gets stuck.
2.  The binary files are scattered all over, and not stored under a single known path, so I cannot use `svndumpfilter` to exclude them - Unless there is some way to use this filter with regular expressions, e.g. `*.jar`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:56:53.057

[svndumpfilter](http://svnbook.red-bean.com/en/1.7/svn.ref.svndumpfilter.html) is part of any Subversion installation

> `svndumpfilter exclude` — Filter out nodes with given prefixes from the dump stream.

Beginning in Subversion 1.7, svndumpfilter can optionally treat the PATH_PREFIXs not merely as explicit substrings, but as file patterns instead.

```
$ svndumpfilter exclude --pattern "*.OLD" < dumpfile > filtered-dumpfile
Excluding prefix patterns:
   '/*.OLD' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T06:17:54.217

I don't know of a stock tool to do this. But it shouldn't be hard to do if you start with this perl module: [SVN::Dumpfilter](https://metacpan.org/pod/SVN%3a%3aDumpfilter)

One of the example scripts in there (svndump_delpathfilter) is probably pretty close to what you want. My experience with this module is that you'll probably have to tinker with it a bit to get it to do what you want.

Now, I don't think there is any way to reliably tell a binary from a text file, since Subversion (at the lowest levels) doesn't really care. A quick scan of my repository shows that the svn:mime-type property isn't always set, and I see no other indicative fields. So you'll have to check via name or (somehow) try looking at the contents of the file (but I have never done the latter).

# google-maps - 黑莓用户看到使用量超过图像

> ID：13969872
> 
> 赞同：2
> 
> 时间：2012-12-20T10:17:27.987
> 
> 标签：google-maps, blackberry, geolocation

我有一个在小型 Google 地图上显示用户位置的网页

例如 [谷歌静态地图](http://maps.google.com/maps/api/staticmap?center=53,-2.1833&size=200x150&sensor=false&zoom=15&markers=color:green%7C53,-2.1833)

然而，我有黑莓的同事似乎总是得到超出使用限制的图像：![在此处输入图像描述](../Images/e6d128ec215206f45346aaa1b8efdea3.png)

其中一些是工作黑莓用户，一些是个人设备。那么 google 是否使用 BES 地址作为来源？如果是这样的话，所有的黑莓用户肯定都会遇到这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T04:04:00.803

这里有两个方面需要理解。一是谷歌静态地图 API 是基于IP 地址[的速率限制。](https://developers.google.com/maps/documentation/staticmaps/index#Limits)这是为了分散使用限制。地图文档说限制是“每个应用程序每天 25,000 个免费静态地图请求”。如果您不使用 API 密钥，则该限制适用于每个 IP 地址。

第二件要了解的是，黑莓设备都通过 VPN 访问互联网，该 VPN 通过移动运营商的数据计划建立隧道。这就是 BIS 服务以及电子邮件访问所提供的。当 BIS 用户浏览互联网时，他们的 IP 地址将来自 RIM 的数据中心之一，而不是来自移动运营商的数据中心。整个北美都有一个数据中心。 [RIM 会公布他们的 IP 地址。](http://btsc.webapps.blackberry.com/btsc/viewdocument.do?noCount=true&externalId=KB11036&sliceId=2&dialogID=63832630&cmd=displayKC&docType=kc&stateId=1%200%2063826436&ViewedDocsListHelper=com.kanisa.apps.common.BaseViewedDocsListHelperImpl) 这意味着所有具有 BIS 服务的黑莓都将从一组有限的 IP 地址中显示出来。

将这两个知识结合在一起，我们就有了一个基于 IP 地址限制的 API，以及使用有限 IP 地址集的大量设备。这就是黑莓设备用尽 Google Maps API 配额的原因，即使使用同一移动运营商的另一台非黑莓设备没有看到配额问题。

# c++ - is_const 在函数模板中总是返回 false

> ID：13969877
> 
> 赞同：3
> 
> 时间：2012-12-20T10:17:46.870
> 
> 标签：c++, templates

是否可以将`is_const`表达式转换为`test`函数，或者这是不可能的，因为在模板类型推导期间会忽略顶级 cv 限定符？

```
int main()
{
  using std::is_const;

  const int x = 0;
  int y = 0;

  // move to "bool test()"
  std::cout
    << "main, x: " << is_const<decltype(x)>::value << "\n"  // true
    << "main, y: " << is_const<decltype(y)>::value << "\n"  // false
    ;

  std::cout
    << "test, x: " << test(x) << "\n"  // false, I wanted true
    << "test, y: " << test(y) << "\n"  // false
    ;
} 
```

我没有成功尝试过类似于以下的各种版本：

```
template<typename T>
bool test(T x)
{
  return is_const<???>::value;
} 
```

我想确保我没有遗漏任何东西，并且编写这样的`test`函数确实是不可能的。（如果可以的话，我也想知道C++03版本是否可行。）

谢谢您的考虑

**更新**

由于 Mankarse，我了解到在右值引用的情况下类型推导是不同的：

```
template<typename T> void t1(T x);
template<typename T> void t2(T& x);
template<typename T> void t3(T&& x);

const int x = 42;
int y = 0;

t1(x);  // T = int:        t1<int>(int x)
t1(y);  // T = int:        t1<int>(int x)

t2(x);  // T = const int: t2<const int>(const int& x)
t2(y);  // T = int: t2<int>(int& x)

t3(x);  // T = const int&: t3<const int&>(const int& && x)
t3(y);  // T = int&:       t3<int&>(int& && x) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:23:35.937

在 C++11 中，这可以通过完美的转发右值引用来完成：

```
template<typename T>
bool test(T&& x)
{
    return std::is_const<typename std::remove_reference<T>::type>::value;
} 
```

在 C++03 中，您可以改为使用左值引用：

```
template<typename T>
bool test(T& x) {
    return boost::is_const<T>::value;
} 
```

两者的区别如下所示：

```
typedef int const intc;
intc x = intc();
int y = int();
std::cout                                     // C++11 C++03
  << "x: " << test(x) << "\n"                 // 1     1
  << "y: " << test(y) << "\n"                 // 0     0
  << "move(x): " << test(std::move(x)) << "\n"// 1     1 (when compiled as C++11)
  << "move(y): " << test(std::move(y)) << "\n"// 0     compilation error
  << "intc{}: " << test(intc()) << "\n"       // 0     compilation error
  << "int{}: " << test(int()) << "\n"         // 0     compilation error
; 
```

# android - 在 Android 中动态添加的 TextView 上的单击事件

> ID：13969878
> 
> 赞同：1
> 
> 时间：2012-12-20T10:17:46.433
> 
> 标签：android, textview, onclicklistener

我正在尝试添加 20 个文本视图并将 onclick 分配给动态添加的文本视图。问题是每当我尝试单击任何动态文本视图时。它总是触发最后添加的文本视图的点击事件。

这是我的代码：

```
EditText s;
EditText t;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    RelativeLayout containerLayout = (RelativeLayout) findViewById(R.id.container);

    for (int i = 0; i < 20; i++) {
        TextView dynaText = new TextView(this);

        dynaText.setText("Some text " + i);
        dynaText.setTextSize(30);
        dynaText.setTag("" + i);

        dynaText.setOnClickListener(btnClickListener);
        // Set the location of your textView.

        dynaText.setPadding(0, (i * 30), 0, 0);

        containerLayout.addView(dynaText);
    }

}

OnClickListener btnClickListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        RelativeLayout ll = (RelativeLayout) v.getParent();
        TextView tv = (TextView) ll.getChildAt(2);
        // Integer pos = (Integer) tv.getTag();
        Toast.makeText(v.getContext(), "Toast " + v.getTag(),
                Toast.LENGTH_SHORT).show();
    }

}; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:26:07.627

1）你应该先让你的`TextViews` **Clickable**：

```
for (int i = 0; i < 20; i++) {
        TextView dynaText = new TextView(this);

        dynaText.setText("Some text " + i);
        dynaText.setTextSize(30);
        dynaText.setTag("" + i);
        dynaText.setClickable(true);//make your TextView Clickable
        dynaText.setOnClickListener(btnClickListener);
        // Set the location of your textView.

        dynaText.setPadding(0, (i * 30), 0, 0);

        containerLayout.addView(dynaText);
    } 
```

2）修改你的`onClickListener`：

```
OnClickListener btnClickListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
          Log.d("btnClickListener", ""-----TextView Clicked : "+v.getTag());
          Toast.makeText(YourActivity.this, "TextView Clicked : "+v.getTag(),
                Toast.LENGTH_SHORT).show();
    }

}; 
```

编辑：您正在添加您的`TextViews`一比一。这就是为什么 click 事件会在最后一个添加的事件上触发。尝试使用`LinearLayout`with `android:orientation="vertical"`，或尝试将每个新的 TextView 添加到前一个下方：

```
for (int i = 0; i < 20; i++) {
        TextView dynaText = new TextView(this);

        dynaText.setText("Some text " + i);
        dynaText.setId(i+1);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        if(i!=0)
         params.addRule(RelativeLayout.BELOW, i);
         dynaText.setLayoutParams(params);
        dynaText.setTextSize(30);
        dynaText.setTag("" + i);

        dynaText.setOnClickListener(btnClickListener);

        containerLayout.addView(dynaText);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:21:19.260

试试这个：

```
OnClickListener btnClickListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
          Toast.makeText(v.getContext(), "Toast " + v.getTag(),
                Toast.LENGTH_SHORT).show();
    }

}; 
```

**更新：**

您单击最后一个的原因`TextView`是因为它太大了。您正在增加每个循环的填充，当您单击某个位置时，它总是会击中最后一个`View`，因为它覆盖了其他循环。尝试 a`LinearLayout`并像这样删除填充：

```
public class MainActivity extends Activity implements OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        LinearLayout containerLayout = (LinearLayout) findViewById(R.id.container);

        for (int i = 0; i < 20; i++) {
            TextView dynaText = new TextView(this);

            dynaText.setText("Some text " + i);
            dynaText.setTextSize(30);
            dynaText.setTag("" + i);
            dynaText.setOnClickListener(this);

            containerLayout.addView(dynaText);
        }
    }

    public void onClick(View v) {
        // do stuff
    }

} 
```

但是解决了您的问题..我认为a`ListView`会适合您的目的:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:08:11.367

按以下方式获取点击数据

声明一个变量

```
int sCount = 0;
for (int i = 0; i < 20; i++) {
        TextView dynaText = new TextView(this);
        dynaText.setId(1000+sCount);
        dynaText.setText("Some text " + i);
        dynaText.setTextSize(30);
        dynaText.setTag("" + i);

        dynaText.setOnClickListener(btnClickListener);
        // Set the location of your textView.

        dynaText.setPadding(0, (i * 30), 0, 0);

        containerLayout.addView(dynaText);
    }
OnClickListener btnClickListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        RelativeLayout ll = (RelativeLayout) v.getParent();
        TextView tv = (TextView) ll.getChildAt(2);
        tv.addFocusables(null, v.getId(), 0);
        Toast.makeText(v.getContext(), "Toast " + tv.getText(),
                Toast.LENGTH_SHORT).show();
    }

}; 
```

这对你来说很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:41:53.140

您可以尝试使用匿名实例`OnClickListener`并为每个视图创建不同的侦听器实例。像这样的东西：

```
dynaText.setPadding(0, (i * 30), 0, 0);
dynaText.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
    ((TextView) v).getText();

}
});
containerLayout.addView(dynaText); 
```

# java - 写入文件时遇到问题

> ID：13969880
> 
> 赞同：1
> 
> 时间：2012-12-20T10:17:59.967
> 
> 标签：java, ioexception, filewriter

我有一个用于秒表的 Gui，它有一个开始按钮、一个停止按钮、一个“拆分”按钮和一个保存拆分按钮。秒表记录拆分，我希望能够将它们写入文件，但出现以下错误：

```
FileWriter splitsWriter= new FileWriter("a.txt");
for(int i=0;i<theSplits.size();i++){
    splitsWriter.write(theSplits.get(i));
} 
```

它说`Unhandled exception type IOException`，但我认为如果文件不存在，作者会创建文件，那么为什么这个异常会成为问题？我只是困惑..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:30:02.513

就像 pstrjds 已经说过你必须添加一个 try/catch 块。您的代码应如下所示：

```
try {
    FileWriter splitsWriter= new FileWriter("a.txt");
    for(int i=0;i<theSplits.size();i++){
        splitsWriter.write(theSplits.get(i));
    }
} catch (IOException e) {
    // Do something to handle the exception
} 
```

这应该编译。

# php - 创建一个处理文件上传的控制器

> ID：13969881
> 
> 赞同：0
> 
> 时间：2012-12-20T10:18:07.610
> 
> 标签：php, symfony

我想创建一个控制器来处理将文件上传到用户特定文件夹。我目前有一个允许用户上传将发布数据发送到控制器的文件的 from。

我希望控制器做的是获取上传的文件，并将其放在一个文件夹中，例如`/public/{username}/files`

但我不太确定如何使用 symfony 来处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:54:00.817

正如 Mahok 所说，Symfony2 文档在这里很有用。

我会[跟着他们](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)添加添加内容。保存文档时，传递用户名：

```
if ($form->isValid()) {
    $em = $this->getDoctrine()->getManager();
    //get the user and pass the username to the upload method
    $user = $this->get('security.context')->getToken()->getUser();
    $document->upload($user->getUsername());

    $em->persist($document);
    $em->flush();

    $this->redirect(...);
} 
```

上传文件时，使用用户名：

```
public function upload($username)
{
    if (null === $this->file) {
        return;
    }
    //use the username for the route
    $this->file->move(
        "/public/$username/files/",
        $this->file->getClientOriginalName()
    );

    // set the path property to the filename where you've saved the file
    $this->path = $this->file->getClientOriginalName();

    // clean up the file property as you won't need it anymore
    $this->file = null;
} 
```

以这种方式保存它，您实际上不需要使用额外的实体方法，如“getAbsolutePath”等

请注意，如果您接受空格等，您可能需要修改用户名。

编辑：您需要为用户与文件设置 oneToMany 关系，以便您以后可以找到该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:41:03.907

这可能会帮助你——

```
$upload_dir = "your upload directory/{username}";           
if (!is_dir($upload_dir)) {
    @mkdir($upload_dir, "755", true);
}
move_uploaded_file($source,$destination); 
```

# c++ - 如何在 C++ 中清空输入流？

> ID：13969893
> 
> 赞同：3
> 
> 时间：2012-12-20T10:19:01.727
> 
> 标签：c++, iostream

我知道如何在 C 中做到这一点，但不知道 C++ 解决方案。我希望以下内容具有故障安全性，但是在为输入提供字符串甚至字符后，程序会挂起。如何读取包含 \n 的输入流以释放它？

```
int main() {
    int num;
    do { 
        std::cin.clear();
        std::cin >> num;
        while ( std::cin.get() != '\n' );
    } while ( !std::cin.good() || num > 5 );
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:36:37.130

一旦流处于错误状态，所有读取操作都将失败。这意味着，如果`cin >> num`读取失败，带有调用的循环`get()`将永远不会结束：所有这些`get()`s 都将失败。只有在清除错误状态后才能跳到行尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:44:27.883

要在 R. Martinho Fernandes 的回答之上构建，这里有一个可能的 C++ 替代代码：

```
std::string num;
std::getline(std::cin, num);

// Arbitrary logic, e.g.: remove non digit characters from num
num.erase(std::remove_if(num.begin(), num.end(),
            std::not1(std::ptr_fun((int(*)(int))std::isdigit))), num.end());

std::stringstream ss(num);
ss >> n; 
```

*   该[`std::getline`](http://www.cplusplus.com/reference/string/getline/)函数从 中提取字符`cin`并将其存储到`num`。它还提取并丢弃输入末尾的分隔符（您可以指定自己的分隔符或`\n`将使用）。
*   该`string::erase`函数使用否定谓词从`num`字符串中删除除数字以外的所有字符。`std::remove_if``std::isdigit`
*   然后使用 a 将字符串表示为整数`std::stringstream`（a[`boost::lexical_cast`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_lexical_cast.html)也可以）

此处由擦除功能实现的逻辑可以是任何其他逻辑，但此代码可能比问题中包含的代码更易于阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:07:10.307

我会使用 getline(cin,num) 来处理它，然后使用 cin.fail() 捕获任何失败。我通常将 cin.fail() 与整数一起使用，但理论上也应该与字符串和字符一起使用，例如：

```
 string num;
    getline(cin,num);
    if(cin.fail())
    {
      cin.clear();
      cin.ignore();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-23T20:45:25.397

One way would be to check the state after every input and throw an exception if that happens for example:

```
#include<iostream>
using namespace std;

int main(){

int a;
cout<<"Enter a number: ";
cin>>a;

//If a non number is entered, the stream goes into a fail state
try
{
    if(cin.fail()){
        throw 0;
        cin.clear();
        cin.ignore();
    }
}
catch(int){
    cin.clear();
    cin.ignore();
}
return 0;
} 
```

After that you can continue with whatever code you wish

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-10T20:31:02.110

To clear input stream, use cin.sync() . no need to use cin.clear() or cin.ignore().

# asp.net-mvc - c# Asp.net 中的 MVC3 和 MVC4 有什么区别？

> ID：13969900
> 
> 赞同：1
> 
> 时间：2012-12-20T10:19:27.090
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

与 ASP.net 中的 MVC3 相比，MVC4 架构中引入了哪些功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:27:17.850

最好检查以下链接以找出差异。

[MVC3 和 MVC4](http://forums.asp.net/t/1753017.aspx/1)

[区分 MVC3 和 MVC4](http://www.askamoeba.com/Answer/130/Whats-new-in-MVC4-MVC3-Vs-MVC4)

[MVC4 官方发布说明](http://www.asp.net/whitepapers/mvc4-release-notes)

# jquery - 带有 nextClick 的 fancybox 2 画廊 - 单击最终图像将其关闭

> ID：13969904
> 
> 赞同：5
> 
> 时间：2012-12-20T10:19:50.080
> 
> 标签：jquery, fancybox, fancybox-2

我正在尝试fancybox 2，我已经删除了`arrows`、`closebutton`和`loop`，并启用了`nextclick`。我要超级干净且易于使用。

我现在遇到的问题是我点击了图库，但是当我点击最后一张幻灯片时，我希望它关闭，但它没有 - 点击图片没有任何作用。

我的猜测是答案是通过类添加一个自关闭动作，如下所示：

```
<a class="gallery1 closeaction" href=... 
```

但我真的不知道。我认为这种东西会在演示中，但我找不到类似的东西。

帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:16:46.173

这段使用`beforeShow`回调的代码应该可以解决问题：

```
$(document).ready(function() {
    $(".fancybox").fancybox({
        arrows: false,
        closeBtn: false,
        loop: false,
        nextClick: true,
        beforeShow: function() {
            var groupLength = this.group.length;
            var thisIndex = this.index + 2; // index starts at "0"
            $(".fancybox-image").on("click", function() {
                if (thisIndex > groupLength) {
                    $.fancybox.close();
                } else {
                    thisIndex++;
                }
            });
        }
    }); // fancybox
}); // ready 
```

见**[演示](http://jsfiddle.net/Z85dK/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:24:56.050

也许像绑定点击画廊中的最后一个项目

```
$('.fancylink').fancybox({
loop: false,
afterShow: function(){          
    if(this.index  == this.group.length - 1){

        $('.fancyselector').click(function(){
$.fancybox.close(); }); // or :
nextClick :false;
closeClick :true;
    }
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-29T21:27:21.737

如果您使用 fancybox 版本。3、可以使用这段代码

```
 $('.fancybox').fancybox({
        clickContent: function(current, event) {
            var sliderCount = $('.fancybox-infobar span[data-fancybox-count]').text();
            var sliderPosition = current.pos + 1;
            if(sliderPosition < sliderCount){
                return current.type === "image" ? "nextOrClose" : false;
            } else{
                return current.type === "image" ? "close" : false;
            }

        },
    }); 
```

# jquery - 预期的 Jquery 选项卡和 Uploadify 对象

> ID：13969908
> 
> 赞同：3
> 
> 时间：2012-12-20T10:19:58.073
> 
> 标签：jquery, asp.net, tabs, uploadify

我在 jquery 选项卡中使用 uploadify 插件，效果很好。上传完成后，在uploadify中，我正在发送电子邮件：

```
 $('#file_upload').uploadify({
                'fileTypeDesc': 'Image Files',
                'fileTypeExts': '*.gif; *.jpg',
                'swf': 'Scripts/Uploadify/uploadify.swf',
                'uploader': 'FileUploadHandler.ashx',
                'cancelImg': 'Scripts/Uploadify/uploadify-cancel.png',
                'buttonText': 'Browse',
                'onQueueComplete': function (queueData) {
                senEmail();
                }
            }); 
```

我的`sendEmail`功能在`Ready function`以下页面中：

```
var senEmail = function() {
                var notes = $("#<%=txtMessage.UniqueID%>");

                var msgbox = $("#cerror");
                $("#cerror").hide();
                $.ajax({
                    type: "POST",
                    url: "ContactMe.aspx/SendEmail",
                    data: "{'message': '" + notes.val() + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",

                    success: function (msg) {
                        if (msg.d == 'Sent') {
            var $tabs = $('#tabs').tabs(); // declare the tabs
            $tabs.tabs("url", 5, "/ContactConfirmation.aspx"); // change the URL of the selected tab
            $tabs.tabs("select", 5 + 1); // refresh the tab content
alert("masTEST3");
            $tabs.tabs("select", 5 ); // refresh the tab content
alert("endTEST");
                        }
                        else {
                            $("#cerror").show();
                            msgbox.html(msg.d);
                        }
                    }

                });
            }; 
```

现在上面的工作正常，就像发送电子邮件一样，但是当我将用户转发到确认页面时，我收到 jquery 错误：`Object Expected`并且不会转发到同一选项卡上的下一页（这适用于其他页面）。

感谢你的帮助。

***编辑：：：***

这是 IE9 错误：

```
SCRIPT5007: Object expected 
jquery-1.8.3.min.js, line 2 character 24275 
```

并且调试器在这一行：

```
return!t||t!==!0&&e.getAttribute("classid")===t}}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:21:10.700

找到解决方案以防其他人遇到同样的问题：

当标签更改/重新加载时，我不得不销毁上载对象所以在发送电子邮件之前我要做的就是这样的信息：

```
$("#file_upload").uploadify("destroy"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:09:13.657

我已经解决了这个问题。

打电话

```
$("#file_upload").uploadify("destroy"); 
```

之后`onUploadComplete`确实有效。但是，如果您在不上传文件的情况下单击其他任何内容，它会使我项目中的所有 javascript 崩溃。所以我开始使用

```
$("#file_upload").uploadify("destroy"); 
```

在导致这个新错误出现的几个地方（关于具有`null`或`undefined`对象的设置）。我认为它是因为当我无法调用时，我试图调用破坏。无论哪种方式，这种方式也行不通。

所以我打开`uploadify.js`并决定在uploadify运行destroy时禁用其中一些选项。

在 uploadify.js 中找到`destroy function`并注释掉

```
 var $this        = $(this),
    swfuploadify = $this.data('uploadify');
    //settings     = swfuploadify.settings; 
```

现在取消注释下面`this`使用的任何内容，`settings`例如：

```
/*/ 
    // Destroy the queue
    if (settings.defaultQueue) {
        $('#' + settings.queueID).remove();
    }

    // Reload the original DOM element
    $('#' + settings.id).replaceWith(swfuploadify.original);

    // Call the user-defined event handler
    if (settings.onDestroy) settings.onDestroy.call(this);
/*/ 
```

这将起作用。而且您仍然可以上传图片和所有内容。唯一的失败是你失去了这些项目的选择。在我的情况下，我一次只上传一张照片，所以这对我有用。你仍然必须使用

```
$("#file_upload").uploadify("destroy"); 
```

在你运行任何其他 javascript 之前`div`。因此，除了 uploadify 按钮之外，您拥有的任何选项卡或按钮都需要在按下这些按钮时销毁 uploadify。它必须是点击后的第一个动作。

# ajax - 在发送到fancybox之前验证（Bassistance）

> ID：13969912
> 
> 赞同：0
> 
> 时间：2012-12-20T10:20:12.620
> 
> 标签：ajax, validation, jquery, fancybox

我正在使用 bassistance 验证插件，并且有一个小脚本可以捕获第二个提交按钮（称为预览）并通过 ajax 将数据发送到 fancybox。我想在将表单发送到fancybox 之前对其进行验证。目前，如果我通过提交按钮发送表单，它们只会被验证。我尝试了各种方式（例如，我在 if 等之后直接调用验证）但无法使其工作。也许有一种方法可以让验证知道它也应该在按下预览按钮时做出反应？

我的代码：

```
 $(function() {
            $('#myform *').tooltip();
            $('#myform ').validate();
            });

        $(document).ready(function(){
          $(':submit').click(function(){
              for (var i in CKEDITOR.instances){
                CKEDITOR.instances[i].updateElement();
                }
            var value = $(this).attr("id");
            if (value == 'preview') {
                $.fancybox.showLoading();
                $.ajax({
                    type    : "POST",
                    cache   : false,
                    url     : "../mypath/",
                    data    : $('#myform').serializeArray(),
                    success : function(data) {
                      $.fancybox(data, {
                        'minWidth': '100%',
                        'minHeight': '100%',
                            });
                      }
                    });
                    return false;
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:34:50.520

如果我没记错的话，Bassistance Validator 插件依赖于这样一个事实，即如果您提交表单并且未满足要求，则该函数会在该提交时返回“false”，从而使您能够直观地看到所犯的错误。

在您的源代码中，您在代码的一开始就正确初始化了 Bassistance 验证器插件（我假设您直接在输入字段上为其创建了规则，例如 minlength="2" required ）但是有一个问题：有提交按钮的 SUBMIT 事件没有挂钩，但仅适用于该按钮上的 CLICK 事件。

Bassistance 网站上有一个简单的示例，展示了如何为插件使用自定义提交事件：

[http://jquery.bassistance.de/validate/demo/ajaxSubmit-intergration-demo.html](http://jquery.bassistance.de/validate/demo/ajaxSubmit-intergration-demo.html)

基本上，您需要做的是将代码的智能部分插入

```
jQuery("#yourform").validate({
    submitHandler: function(form) {
        jQuery(form).ajaxSubmit({
            /*
                Here you can do the following:
                1) Update the instances of CKEDITOR
                2) Check if the submit is in the preview mode
                3) If yes
                    - do your fancy stuff
                    - return false so that the real submit is not triggered
                   If not
                    - return true so that the real submit handler is evaluated by the browser and the POST is triggered
            */

        });
    }
}); 
```

# android - Android 中的用户帐户设置

> ID：13969918
> 
> 赞同：0
> 
> 时间：2012-12-20T10:20:37.413
> 
> 标签：android, android-layout, application-settings

我想在向导中首次启动时创建一个用户帐户并将其存储在设置中。类似于电子邮件应用程序中的帐户创建向导。最好的方法是什么？

我应该创建一个布局，在第一次启动时收集这些输入并存储在首选项中吗？可以在选项键中提供设置菜单，因此可以编辑首选项。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:01:42.237

您可以在 SharedPreference 中保存用户详细信息。如果您要保存密码，唯一需要注意的是密码的安全性。默认情况下，您的应用程序的共享首选项是沙盒化的，因此您的数据对其他应用程序是安全的。但是具有 root 访问权限的坚定/受启发的黑客可以从 Android 手机中的任何应用程序获取任何数据。

对于密码

1）您可以使用网络服务，并将密码存储在服务器中。在每个登录过程中，您可以将用户名/密码发送到服务器并进行验证。如果您的应用程序使用互联网，这是最好的方法。此选项具有一个简单的优点，即您不会在手机本身上保存敏感数据。

2）其他选项是存储密码加密。如果您的应用程序一点也不使用互联网，并且您还没有准备好为身份验证过程建立服务器，则可以使用此选项。Android 中没有绝对的安全性，但保存加密确实可以提高安全级别。

# php - 在 PHP PostgreSQL 中转义 SQL 查询

> ID：13969924
> 
> 赞同：3
> 
> 时间：2012-12-20T10:20:47.317
> 
> 标签：php, sql, database, postgresql, escaping

我有一个包含大量 PHP 文件（真的很多......）的网站，这些文件使用`pg_query`和`pg_exec`函数不会在 Postgre SQL 查询中转义撇号。

但是，出于安全原因以及在我的数据库中存储带有撇号的名称的能力，我想为我的数据库输入添加一个转义机制。一种可能的解决方案是检查每个 PHP 文件并更改`pg_query`和`pg_exec`使用`pg_query_params`，但这既费时又容易出错。一个好主意是以某种方式覆盖`pg_query`and`pg_exec`来包装函数，这些函数可以在不必更改任何 PHP 文件的情况下进行转义，但在这种情况下，我想我将不得不更改 PHP 函数定义并重新编译它，这不是很理想。

所以，这个问题是开放的，任何可以用最少的时间做我想做的事情的想法都是非常受欢迎的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:45:55.463

你没有发布代码，但我猜你有这个：

```
$name = "O'Brian";
$result = pg_query($conn, "SELECT id FROM customer WHERE name='{$name}'"); 
```

...你需要有这个：

```
$name = "O'Brian";
$result = pg_query_params($conn, 'SELECT id FROM customer WHERE name=$1', array($name)); 
```

...但您认为该任务将消耗不合理的时间。

虽然它肯定很复杂，但您有什么选择？您不能覆盖`pg_query()`，但搜索和替换它会非常简单`my_pg_query()`。现在呢？您的自定义函数只会看到字符串：

```
SELECT id FROM customer WHERE name='O'Brian'
SELECT id FROM customer WHERE name='foo' OR '1'='1' 
```

即使您设法实现了一个无错误的 SQL 解析器：

1.  它不能可靠地处理无效的 SQL。
2.  它将无法确定查询是否是故意 SQL 注入的产物。

放轻松，一一修复查询。这需要时间，但可能没有你想象的那么多。随着您的进步，您的应用程序会越来越好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:39:45.823

这是数据库层和相关 API 何时可以为您节省大量时间的完美示例。一个好的解决方案是将 DB 类作为单例，您可以从应用程序的任何位置对其进行实例化。一组简单的包装函数将允许您对数据库的所有查询都通过一个点，因此您可以非常轻松地更改它们的工作方式。您还可以从一个数据库更改为另一个数据库，或从一个数据库供应商更改为另一个数据库供应商，而无需触及应用程序的其余部分。

[通过使用PDO](http://php.net/manual/en/intro.pdo.php)接口而不是像 pg_query() 这样的函数，可以很好地解决转义问题，这使得转义变得不必要。鉴于您必须在应用程序中使用 DB 的任何地方进行更改，您不妨重构以同时使用此模式，因为它的工作量相同。

```
class db_wrapper {

    // Singleton stuff
    private $instance;

    private function __construct() {
        // Connect to DB and store connection somewhere
    }

    public static function get_db() {
        if (isset($instance)) {
            return $instance;
        }
        return $instance = new db_wrapper();
    }

    // Public API

    public function query($sql, array $vars) {
        // Use PDO to connect to database and execute query
    }

}

// Other parts of your app look like this:

function do_something() {
    $db = db_wrapper::get_db();
    $sql = "SELECT * FROM table1 WHERE column = :name";
    $params = array('name' => 'valuename');
    $result = $db->query($sql, $params);

    // Use $result for something. 
} 
```

# java - 将 Guice Persist 与 JTA / bitronix 一起使用时遇到问题

> ID：13969932
> 
> 赞同：2
> 
> 时间：2012-12-20T10:21:05.230
> 
> 标签：java, jta, guice-persist, bitronix

我们有一个已经使用 JPA 和 guice-persist 的现有 j2se 项目。现在，因为我们要添加 JMS 功能，所以需要 2-phase-commit 和 JTA。我们将使用 bitronix 事务管理器，因为没有容器（如 spring）。

据我了解，我们要做的第一件事就是将持久化单元的事务类型从`RESSOURCE-LOCAL`更改为`JTA`，因为我们希望数据库事务*投票支持提交*而不是*提交*。收集所有选票后，提交在第 2 阶段完成。

使用 guice-persist，我们将`@Transactional`注解用于应该在单个事务中运行的方法。提供`JPAPersistModule`了一个 EnitiyManagerFactory ，它用于 guice-persist 内部类，就像`JpaLocalTxnInterceptor`包装了带注释的方法一样。

现在我得到了例外

```
java.lang.IllegalStateException: A JTA EntityManager cannot use getTransaction()
at org.hibernate.ejb.AbstractEntityManagerImpl.getTransaction(AbstractEntityManagerImpl.java:1009)
at com.google.inject.persist.jpa.JpaLocalTxnInterceptor.invoke(JpaLocalTxnInterceptor.java:57)
    ... 
```

因为对提供的实体管理器的`JpaLocalTxnInterceptor`调用。`getTransaction()`

我现在很困惑。有什么方法可以将 guice-persist 与 JTA 一起使用，或者我们真的必须从项目中删除 guice-persist 吗？或者，如果我们想做 JTA（使用 Bitronix），是否有任何替代 guice-persist 的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:40:04.067

有过类似的情况。在我们的例子中，我们使用的是 Guice + Jooq。我们想要 Jooq 是因为我们有一个大型的遗留 Rails DB 并且想要精细的控制和速度。我们之所以选择 Guice 而不是 Spring，是因为我们觉得它是一个更好的框架，而且速度更快，而且我们喜欢编译时检查。

我们不能在 Jooq 中使用 Guice，所以我们：

*   使用 Atomikos JTA（免费版）
*   编写了我们自己的@Transactional AOP注解拦截器；
*   我们的可注入服务为我们的 jooq 处理器提供 java.sql.Connection，但始终提供一个 Atomikos DataSource bean

我们基本上修改了这段代码：

[http://www.dailyjavatips.com/2011/10/24/database-transactions-google-guice-aop/](http://www.dailyjavatips.com/2011/10/24/database-transactions-google-guice-aop/)

因此，该示例使用常规 JDBC Tx，但我们对其进行了修改，因此它将使用 Atmomikos 的 JTA 感知 Tx。

奇迹般有效！

大杰

# android - 蓝牙关闭时 bluetoothAdapter.getAddress() 返回什么？

> ID：13969934
> 
> 赞同：1
> 
> 时间：2012-12-20T10:21:08.350
> 
> 标签：android, bluetooth, android-service, android-wifi, android-wireless

可能这个问题看起来很奇怪，但实际上并不完全:)

我构建了一个可以在不同的 android 平板电脑上运行的应用程序。

我还有一个关于为每台平板电脑查找和唯一标识符的小问题，但我选择查找 wifi 和蓝牙 MAC 地址。

我阅读了 android 文档，但找不到我的问题的答案。这真的很奇怪，因为在我使用 bluetoothAdapter.getAddress() 的设备上，即使关闭了蓝牙服务，它也会返回实际的蓝牙 MAC 地址，我不知道为什么，但这不是问题。我认为并不是所有的安卓平板电脑都和我的一样特别，而且如果服务关闭，并不是所有的安卓平板电脑都会返回蓝牙 MAC 地址。但实际上 bluetoothAdapter.getAddress() 会正常返回什么？服务关闭时是否返回NULL？

如果你想问为什么不简单地打开服务然后找到MAC地址，我会告诉你这是一个有道理的问题：应用程序的目的与设备之间的蓝牙通信和类似的东西没有任何关系，因此，从用户的角度来看，当他打开应用程序时，即使该应用程序用于测量距离，平板电脑也需要蓝牙服务，这是不寻常的。

我很感谢那些会回答我的问题或给出提示的人！也许是一个解决方案：如何在用户不知道的情况下打开蓝牙服务。谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T09:36:17.417

关于安装的唯一标识的相当古老但非常有用的帖子。[**在这里**](http://android-developers.blogspot.de/2011/03/identifying-app-installations.html)找到它。

附加评论：在我看来，当应用程序实际上不需要BT时，将蓝牙权限添加到您的应用程序清单中真的很糟糕。我个人想知道为什么，可能我会避免这样的应用程序。更糟糕的是，我会很漂亮如果应用程序在未经我许可的情况下使用一些 woobly-jubly 变通方法转为 BT 时会感到恼火。如果您想要成功的应用程序，请尊重您的用户

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:47:37.553

使用此代码启用蓝牙服务

```
Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                        startActivityForResult(enableBtIntent, RESULT_OK); 
```

# iphone - 如何在 iPhone sdk 中的 Twitter 上发布视频

> ID：13969935
> 
> 赞同：0
> 
> 时间：2012-12-20T10:21:07.693
> 
> 标签：iphone, objective-c, ios, twitter

我是一名 ios 开发人员，我正在开发需要在 twitter 上发送视频的应用程序。但我搜索并发现我们只能发布视频的链接，但不能在 iPhone sdk 中发布视频本身。

如果我需要在 Twitter 上发布视频，谁能建议我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:39:42.883

我只是建议您从以下链接查看 TwitVid 文档：

[http://twitvid.pbworks.com/w/page/22556295/FrontPage](http://twitvid.pbworks.com/w/page/22556295/FrontPage)

**更新：**

我在 4.3 中使用这种类型的逻辑`shareKit`

```
 NSString *urlstr =[YorURL stringByReplacingOccurrencesOfString:@" " withString:@""];
        [urlstr retain];
        NSString *apiEndpoint = [NSString stringWithFormat:@"http://tinyurl.com/api-create.php?url=%@",urlstr];
        [apiEndpoint retain];

        NSLog(@"\n\n APIEndPoint : %@",apiEndpoint);
        NSString *shortURL = [NSString stringWithContentsOfURL:[NSURL URLWithString:apiEndpoint]
                                                      encoding:NSASCIIStringEncoding
                                                         error:nil];
        [shortURL retain];
        NSLog(@"Long: %@ - Short: %@",urlstr,shortURL);

        NSString *txtShare=[NSString stringWithFormat:@"You watching Your %@",shortURL];
        SHKItem  *item = [SHKItem text:txtShare];
        [SHK setRootViewController:self];
        [SHKTwitter shareItem:item]; 
```

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:58:35.297

您可以将 TWRequest 类与

```
 - (void)addMultiPartData:(NSData *)data withName:(NSString *)name type:(NSString *)type 
```

我不确定是否可以上传视频。

更多关于使用 TWRequest [https://dev.twitter.com/docs/ios/posting-images-using-twrequest](https://dev.twitter.com/docs/ios/posting-images-using-twrequest)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T07:50:20.290

感谢[上传媒体新 API](https://dev.twitter.com/rest/reference/post/media/upload-chunked)，您可以将视频分享到 Twitter。我已经尝试过了，它有效。

请检查：[https ://github.com/liu044100/SocialVideoHelper](https://github.com/liu044100/SocialVideoHelper)

你只需要调用这个类方法。

```
+(void)uploadTwitterVideo:(NSData*)videoData account:(ACAccount*)account withCompletion:(dispatch_block_t)completion; 
```

希望它能解决你的问题。

# c# - 由于 SQL Server 中的存储过程，WCF 中的超时异常执行大约需要 4 分钟

> ID：13969937
> 
> 赞同：0
> 
> 时间：2012-12-20T10:21:18.617
> 
> 标签：c#, .net, wcf

我在 SQL Server 中有一个存储过程，执行大约需要 4 到 5 分钟。

我使用 WCF 连接到 SQL Server。但由于执行时间较长，会出现超时异常。

在我的客户端中，我能够根据接收超时进行更改，但是如何更改 WCF 中的连接超时？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:23:50.510

更改客户端上的**sendTimeout参数和服务器上的****receiveTimeout**参数。

# python - 使用 cmd.exe 时找不到脚本文件

> ID：13969949
> 
> 赞同：1
> 
> 时间：2012-12-20T10:21:57.293
> 
> 标签：python, shell, command-line

我刚刚开始使用 Python，并试图从命令行运行一个程序，因为它是[在这个网站上](https://developers.google.com/edu/python/introduction)的“Python 程序”标题下完成的。所以我制作了脚本 hello.py，它位于我的计算机中的 C:\Python27。

在示例中，他们通过键入来运行脚本`python hello.py Guido`。当我尝试这样做时，它不起作用。首先，我不完全确定“命令行”是什么意思，但我在 Windows XP 中使用 cmd.exe。我明白了：

> python：无法打开文件'hello.py'：[Errno 2]没有这样的文件或目录。

我已经将 PATH 指定为 C:\Python27。

此外，当我尝试通过键入从 Python shell 运行程序时，`hello.py Guido`我得到

> SyntaxError：无效的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:23:41.150

您需要在以下位置找到`cmd`当前目录`C:\Python27`：

```
cd C:\Python27 
```

因为路径`python`加载是相对的。您还可以使用完整路径：

```
python C:\Python2.7\hello.py 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:33:55.740

当你开始时`cmd.exe`，默认目录是你的`Documents and Settings`：因为你的文件`hello.py`不存在，python解释器找不到它，从而给你`[Errno 2] No such file or directory`错误。要解决这个问题，只需更改您当前的工作目录：

```
C:\Documents...>cd C:\Python27
C:\Python27> python hello.py Guido 
```

无论如何，最好不要将文件放在 python 目录中（在文档中为 python 源创建一个目录并使用相同的方法）。

当您运行 python shell 时，您不能显式调用 python 文件，因此在您的情况下，它会尝试`hello.py`作为命令运行（它不存在）并且它会给您一个语法错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:23:28.530

不带“python”试试，当你把python目录放在路径中时，它会自动将“.py”扩展名与python连接起来，所以不需要写“python hello.py Guido”

只需转到 .py 所在的目录，然后调用“hello.py”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:34:01.930

您当前的工作目录是什么？ hello.py 位于何处？要执行该命令，hello.py 应该与您开始命令行 (cmd.exe) 的目录相同。否则，您需要编写 hello.py 的绝对路径（如*python C:.....\hello.py Guido*），而不仅仅是文件名“hello.py”。

# html - 编号列表中的 HTML 行间距，在 BIRT 中呈现

> ID：13969951
> 
> 赞同：1
> 
> 时间：2012-12-20T10:22:06.403
> 
> 标签：html, html-lists, birt

我有一个基于 BIRT 构建的 PDF 渲染解决方案。作为提交给渲染器的数据的一部分，可以提供富 HTML 文本。HTML 以这种格式提供：

```
<ul><li style="text-align:left;"><span style="font-size:12px;">
 <font face="Arial" color="#262626">Desc Num 1</font></span></li>
 <li style="text-align:left;"><span style="font-size:12px;">
 <font face="Arial" color="#262626">Desc Num 2</font></span></li>
 <li style="text-align:left;"><span style="font-size:12px;">
 <font face="Arial" color="#262626">Desc Num 3</font></span></li>
 <li style="text-align:left;"><span style="font-size:12px;">
 <font face="Arial" color="#262626">Desc Num 4</font></span></li>
 <li style="text-align:left;"><span style="font-size:12px;">
 <font face="Arial" color="#262626">Desc Num 5</font></span></li>
 <li style="text-align:left;"><span style="font-size:12px;">
 <font face="Arial" color="#262626">Desc Num 6</font></span></li></ul> 
```

在某些系统（生产！）上，列表在项目之间呈现出巨大的空间，但在其他系统上，列表正确显示。

**注意**：我看到这个渲染问题只是编号列表

此处为 2 个渲染输出的图像，左侧错误，右侧正确 [http://i.imgur.com/Qid4V.png](http://i.imgur.com/Qid4V.png)

任何建议我可以采取什么方向来解决这个问题表示赞赏。罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:41:46.903

由于这是一份报告，我相信其中一个网站会帮助您了解哪里出了问题：

此类从报告中提取样式

[http://tinyreport.googlecode.com/svn-history/r19/trunk/tinyreport-birt/src/main/java/com/bradrydzewski/tinyreport/birt/xpath/StyleFactory.java](http://tinyreport.googlecode.com/svn-history/r19/trunk/tinyreport-birt/src/main/java/com/bradrydzewski/tinyreport/birt/xpath/StyleFactory.java)

这里也是 BIRT 的规范

[http://www.eclipse.org/birt/release20specs/BPS11_BIRTStyle_CSS_SPEC.pdf](http://www.eclipse.org/birt/release20specs/BPS11_BIRTStyle_CSS_SPEC.pdf) 您需要破解他们的代码并对其进行自定义以执行您想要的操作

由于您使用的是 3+ 它有

*   能够将 CSS 导入报表设计。
*   能够将 CSS 导入库。

这是与您的问题类似的论坛帖子：http: [//www.eclipse.org/forums/index.php/m/365412/](http://www.eclipse.org/forums/index.php/m/365412/)

和一个可以帮助你的博客：

[http://birtworld.blogspot.com/2007/07/its-been-while-but-after-some-family.html](http://birtworld.blogspot.com/2007/07/its-been-while-but-after-some-family.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:56:50.183

在发布的 HTML 代码中，或在其中嵌入的 CSS 代码中，没有任何内容导致所描述的问题。事实上，屏幕截图表明`font`标记至少在字体方面已被忽略（字体肯定不是 Arial 那里）。

您两次提到“编号列表”，但标记是`ul`, 表示“未编号”列表（或者实际上是一个项目符号列表）。因此，屏幕截图中的数字来自其他地方。在 CSS 中将项目符号列表转换为编号列表是可能且容易的。并且大概是一些 CSS 设置（或发布的代码之外的一些其他格式说明）添加了多余的间距；它可以是行高、边距或填充。

# erlang - 如何将参数发送到 map reduce 查询

> ID：13969952
> 
> 赞同：3
> 
> 时间：2012-12-20T10:22:05.937
> 
> 标签：erlang, mapreduce, riak

我正在用 erlang 为 Riak 编写 mapreduce 查询，我想通过 Ubuntu 终端上的 curl 使用 HTTP API 将参数传递给 Riak。查询的输入是一个 2i 查询，但我想要一个允许进一步过滤的参数。我认为 options 是关键字，因为我将在生产中使用 python 客户端，但它不方便校对我的 Erlang，而且它是我团队中一直使用的关键字。

这就是我正在尝试的：

```
curl -X POST http://riakhost:port/mapred -H 'Content-Type: application/json' -d '{
    "inputs": {
        "bucket":"mybucket",
        "index":"field1_bin",
        "key":"val3"
    },
    "options": "test",
    "query": [
        {"map": {"language": "erlang", 
         "module": "mapreduce", 
         "function":"map"
        }},
    ]}' 
```

在我看到的三个记录集上：

```
["none", "none", "none"] 
```

但我想要：

```
["test", "test", "test"] 
```

参数的格式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:49:59.350

我在 Erlang 中[为 Riak mapreduce 开发了一组可配置的实用函数。](https://github.com/whitenode/riak_mapreduce_utils)由于我希望能够指定一组标准，我决定允许用户将配置作为 JSON 文档传递，因为这适用于所有客户端类型，尽管其他文本表示也应该适用。README.markdown 文件中提供了如何从 curl 中使用这些函数的示例。

您可以通过“arg”参数将参数传递给每个单独的映射或减少阶段函数。您在此处指定的任何内容都将作为最终参数传递给 map 或 reduce 阶段，请参见下面的示例：

```
"query":[{"map":{"language":"erlang","module":"riak_mapreduce_utils",
                 "function":"map_link","keep":false,
                 "arg":"{\"bucket\":\"master\"}"}}, 
```

# android - Android - 重复更改选项卡和列表视图项目

> ID：13969953
> 
> 赞同：1
> 
> 时间：2012-12-20T10:22:07.690
> 
> 标签：android, tabs, repeat

我在android中的一个应用程序上工作，我遇到了一种我无法弄清楚发生了什么的情况。该应用程序有 3 个标签，由 Fragments 和 TabHost 创建，每个标签都有一个包含特定内容的文章列表。

我在最后一个选项卡中有一个列表视图。列表视图是使用 listAdapter 创建的，并且是从一个 drupal 视图中填充的。一切都很完美，但是当我更改选项卡并返回初始选项卡时，列表视图的项目会重复。

标签内容的代码是：

```
 httpconnect httpcon = new httpconnect();   
   ArrayList<HashMap<String, String>> articleList = new ArrayList<HashMap<String, String>>();  
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
          if (container == null) { 
             return null;
          } 
             View v = inflater.inflate(R.layout.recomandate, container, false);   
             list=(ListView) v.findViewById(R.id.list); 
             infoGet();  
             return v;  
    }

    public void infoGet() { 
            try {   
                JSONArray jArray = new JSONArray(httpcon.connectareHttp(url));  

           for(int i=0; i<jArray.length(); i++) { 
               HashMap<String, String> map = new HashMap<String, String>();
             JSONObject json = jArray.getJSONObject(i);             

                String id; 
                   id = json.getString("nid"); 
                    map.put(KEY_ID, id);  

                 String articleTitle; 
                  articleTitle= json.getString("title"); 
                    map.put(KEY_TITLE, articleTitle);

                  String content; 
                    content= json.getString("body"); 
                      map.put(KEY_BODY, content);

                   String img; 
                     img = json.getString("field_image"); 
                       map.put(KEY_THUMB_URL, img); 

                  articleList.add(map);  
           }

                adapter = new ListAdapter(getActivity(), articleList);  
                  list.setAdapter(adapter);  

        }   catch (Exception e) {

                    Log.e("log_tag", "Error Parsing Data "+e.toString());
                    } 

    } 
```

当我在选项卡之间切换时，如何不重复列表视图中的项目？

提前感谢您的帮助！

问候，科索！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:43:32.240

你的答案在这里：

```
 articleList.add(map); 
```

您每次都会重新添加项目。

当您调用`.replace()`FragmentTransaction 时，您并没有重新实例化片段对象，而是 FragmentManger`createView()`每次都要求片段以确保它适合并在 ViewGroup 上正确布局。

# c# - 突出显示字符串红色

> ID：13969958
> 
> 赞同：1
> 
> 时间：2012-12-20T10:22:15.447
> 
> 标签：c#

尽管它很简单，但我无法让它工作。目标是在 csharp 代码中突出显示红色字符串。

```
private void HighlightStrings() 
{
  Regex regex = new Regex(@"^""*""$", RegexOptions.CultureInvariant);
  MatchCollection MC = regex.Matches(this.Text);

  foreach (Match match in MC)
  {
    this.Select(match.Index, match.Length);
    this.SelectionColor = Color.Red;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:23:18.533

您是否尝试匹配任意数量的连续双引号？这就是您的正则表达式匹配的内容。好吧，您实际上正在匹配任何只有双引号的行。也许您的意思是您的正则表达式如下：

```
Regex regex = new Regex(@""".*""", RegexOptions.CultureInvariant); 
```

这将匹配行中任何位置的任何双引号字符串。

# javascript - 带有滚动的视差和振动背景图像

> ID：13969959
> 
> 赞同：2
> 
> 时间：2012-12-20T10:22:16.200
> 
> 标签：javascript, jquery, html, css, parallax

用鼠标滚动时，我需要背景图像视差和振动。

背景位置正在使用 jQuery 的`css()`功能，但不振动。

当 ii firebug 它的结果是

```
<div data-speed="10" data-type="background" style="height: 1000px; 
background-position: 50% 0px; animation: 0s ease 0s normal none 1 NaNpx;" 
class="parallax-container" id="intro"> 
```

### 我正在为此使用 jQuery 的代码，并在 Mozilla 中进行测试。

```
/*parallex backgound*/
$glob('div[data-type="background"]').each( function() {
    var $bgobj = $glob(this); // assigning the object
    $glob(window).scroll( function() {
        var yPos = -($window.scrollTop() / 10);
        var coords = '50% '+ (yPos) + 'px';
        $bgobj.css({'background-position': coords}).animate({
            '-webkit-animation': 'vibrateAnim 1s ease', /* Safari 4+ */
            '-moz-animation':    'vibrateAnim 1s ease', /* Fx 5+ */
            '-o-animation':      'vibrateAnim 1s ease', /* Opera 12+ */
            'animation':         'vibrateAnim 1s ease'  /* IE 10+ */
        },500);
    });
}); 
```

**HTML：**

```
<div id="intro" class="parallax-container" style='height:1000px;' data-type="background" data-speed="10">
    <div id="mainTitleText" class="top-content">
        <img class="logo" src="images/logo.png">
    </div><!-- mainTitleText -->
</div><!--home--> 
```

**CSS：**

```
@-moz-keyframes vibrateAnim {
    0%   { top: -10px; }
    10%  { top:  10px; }
    20%  { top: -10px; }
    30%  { top:  10px; }
    40%  { top: -10px; }
    50%  { top:  10px; }
    60%  { top: -10px; }
    70%  { top:  10px; }
    80%  { top: -10px; }
    90%  { top:  10px; }
    100% { top: -10px; }
} 
```

**演示：**
[**jsFiddle**](http://jsfiddle.net/Kk4xK/)

我需要链接**[https://victoriabeckham.landrover.com/INT](https://victoriabeckham.landrover.com/INT)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T02:18:50.293

[**jsFiddle 演示**](http://jsfiddle.net/H6Jej/1/show)

（提示：`/show/`在 URL 中删除以访问 jsFiddle*编辑*页面）。

考虑在*您的 Parallax 网站中使用*[**jQuery Vibrate**](http://www.dev4web.eu/projects/jquery.vibrate/#about)插件。您在评论中提到的[**视差网站**](https://victoriabeckham.landrover.com/INT)正在为该网站使用[**自定义编写的视差脚本，因此没有可用的插件。**](https://victoriabeckham.landrover.com/js/LandRoverSite.js)*[](https://victoriabeckham.landrover.com/INT)**[](https://victoriabeckham.landrover.com/js/LandRoverSite.js)***

 *****[**上面的jsFiddle**](http://www.ianlunn.co.uk/plugins/jquery-parallax/images/trainers.png)使用视差插件[**jQuery Parallax v1.1.3**](https://github.com/IanLunn/jQuery-Parallax)以及[**修改后的 demo**](http://www.ianlunn.co.uk/plugins/jquery-parallax/)，修改了额外的振动运动鞋对象。[](http://www.ianlunn.co.uk/plugins/jquery-parallax/images/trainers.png)

 **这个振动插件的好处是它与鼠标交互，当鼠标悬停在任何文本上时，当与`reverse`选项一起使用时停止振动。这很有用，因此访问者可以清楚地准备好消息。

*旁注：在 jsFiddle 中，振动对象位于其他 2 个元素之间，因此由于 DOM 布局顺序，鼠标悬停在这种情况下将不适用。*

```
$('#extra').vibrate({
    speed: 50,             // Vibration speed in milliseconds
    trigger: "mouseover",  // Triggering event
    reverse: true,         // Reverse behaviour
    overEffect: "stop",    // Over effect, see details below
    vibrateClass: "",      // CSS class applied when vibrating (New in vers. 1.1!)
    overClass: ""          // CSS class applied when over effect is triggered (New in vers. 1.1!)
}); 
```*******

# c# - C# 在方法中是否有方法的概念？

> ID：13969962
> 
> 赞同：6
> 
> 时间：2012-12-20T10:22:30.087
> 
> 标签：c#, .net, methods, delegates

我一直在使用 javascript，并且在函数内部大量使用了函数。我在 C# 中尝试过，但似乎它们不存在。如果我有以下情况：

```
public abc() {

} 
```

如何编写`d()`只能从方法内部调用的方法`abc()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T10:26:32.380

我不会太担心在方法级别上限制对方法的访问，但在更多的类级别上，您可以使用`private`来限制对特定类的方法的访问。

另一种选择是使用 lambdas/匿名方法，或者如果您使用 C# 4.0，`Action`/`Tasks`在您的方法中创建它们。

使用委托（C# 1/2/3/4）作为您的特定示例的匿名方法示例（包括。*我需要一个可以采用字符串参数并返回字符串的操作？*）将是这样的：

```
delegate string MyDelegate(string);

public void abc() {
    // Your code..

    MyDelegate d = delegate(string a) { return a + "whatever"; };
    var str = d("hello");
} 
```

.. 使用 C# 3/4：

```
public void abc() {
    // Your code..

    Func<string, string> d = (a) => { return a + "whatever"; };
    var str = d("hello");
} 
```

..通过方法使用更理想的解决方案`private`：

```
private string d(string a)
{
    return a + "whatever";
}

public void abc()
{
    // Your code..

    var str = d("hello");
} 
```

根据您对另一个答案的评论：*我只想将它放在方法的底部，然后从一些较早的代码中调用它。*

这是不可能的，您需要使用委托或委托为您的方法定义一个变量，`Actions`因此在您调用它时需要对其进行完全初始化。然后，您将无法在方法的底部定义它。一个更好的选择是简单地`private`在你的类上创建一个新方法并调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:24:04.863

你不能在另一个方法中声明一个方法，但你可以在方法中创建匿名函数：

```
public void abc()
{
    Action d = () => { ... };
    // ...
    d();
} 
```

* * *

> ...只能从方法 abc() 内部调用？

仅当您引用该方法时才能调用该方法。如果您不将参考存储在其他地方，那么您应该没问题。

* * *

> 如何将字符串传递并返回给操作？

使用 a`Func`而不是`Action`：

```
Func<string, string> d = s => {
    return s + "foo";
}; 
```

* * *

> 我想这样做的原因是让我的代码更具可读性。

尝试使您的代码更具可读性是件好事，但我认为这种更改会*降低*其可读性。我建议你使用普通方法，而不是匿名函数。您可以将它们设为私有，以便无法从您的班级外调用它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T10:25:12.370

这不是定义类的方法，但你可以这样做：

```
public abc() {
    Action d = () => {
        // define your method
    };

    d();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T10:23:55.750

是的，它们被称为委托和匿名方法。

委托签名必须在要分配的主体的方法*之外预定义，因此它与函数不完全一样。*您将首先声明一个委托：

```
class MyClass {
    public delegate boolean Decider(string message);

    /* ... */
} 
```

然后在`MyClass.MyMethod`你可以说`Decider IsAllLowerCase = /* method name or anonymous method */;`然后使用它`var result = IsAllLowerCase(s);`。

好消息是 .NET 已经为您可能需要的大多数签名提供了委托定义。`System.Action`为不返回任何内容的方法提供了各种签名，并且`System.Func`适用于那些返回的方法。

如别处所示，

```
Action<int, string> a = (n, s) => { for(var i=0; i<n; i++) Console.WriteLine(s);}; 
```

允许您像调用`a( /* inputs */ );`局部变量一样调用它。`(stuff) => { code }`是“lambda 表达式”或匿名方法，您也可以只传递方法的名称（如果签名匹配）：

```
Action<string> a = Console.WriteLine; 
```

如果您想退货，请使用`Func`：

```
Func<bool, string> f = (b) => { return b.ToString(); }; 
```

允许您以`var result = f(b);`相同的方式调用。

* * *

作为脚注，委托是 C#/.NET 的一个有趣部分，但通常，控制访问的方法是在类中创建另一个方法，并将其声明为私有。如果您的问题是名称冲突，那么您可能需要重构。例如，您可以将原始类中声明的另一个类中的方法分组（支持嵌套类）或将它们完全移动到另一个类。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-20T10:24:24.320

您可以使用[操作](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)委托

```
public abc() {

         Action action = () => 
         {
            //Your code here
         }

         action();
} 
```

**编辑：**传递参数

```
public abc() {

   Action <string>action = (str) =>
        {
            //Your code here                
        };
}   
action("hello"); 
```

用于`Func`返回值

```
public void abc() {  

    Func<string, string> func = (str) => { return "You sent " + str; };
    string str = func("hello");
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-20T10:27:15.827

使用动作委托。比你做的更有效。

```
public abc() {

         Action <int> GetInt = (i) => 
         {
            //Write code here
            Console.Writeline("Your integer is: {0}", i);
         };

         GetInt(10);
} 
```

[`Action`](http://msdn.microsoft.com/en-us/library/system.action.aspx)是一个委托，因此您可以将参数作为方法而不是变量提供。动作委托封装了一个没有参数且不返回值的方法。从 MSDN 检查它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-20T10:27:16.273

您可以创建一个嵌套类：

```
public class ContainingClass
{
    public static class NestedClass
    {
        public static void Method2()
        {
        } 

        public static void Method3()
        {
        }
    }
} 
```

然后你可以打电话：

```
ContainingClass.NestedClass.Method2(); 
```

或者

```
ContainingClass.NestedClass.Method3(); 
```

我不会推荐这个。通常，拥有公共嵌套类型是个坏主意。

# sql-server - 将十进制转换为数字数据类型的算术溢出错误

> ID：13969964
> 
> 赞同：1
> 
> 时间：2012-12-20T10:22:36.397
> 
> 标签：sql-server, stored-procedures

```
ALTER PROCEDURE [dbo].[Update_MCR]
     @xmlString  ntext
    ,@Message nvarchar(500) output
AS
BEGIN

    SET NOCOUNT ON;
    declare  @SL int,@Basic  float, @Grad_pay  float, @DA  float, @HRA  float, @MA  float, @Ptax  float, @Itax  float, @pf  float, @LIC  float, @Month_Of  datetime
    Declare @intDoc1 as int
    BEGIN TRANSACTION 
    print @xmlString
    exec sp_xml_preparedocument @intDoc1 OUTPUT, @xmlString
    declare Generate_Rq CURSOR FOR
    SELECT SL,Basic, Grad_pay, DA, HRA, MA, Ptax, Itax, pf, LIC,  Month_Of
    FROM OPENXML (@intDoc1,'/Salary/TransactionSalary',1)
    WITH ( SL int,Basic  float, Grad_pay  float, DA  float, HRA  float, MA  float, Ptax  float, Itax  float, pf  float, LIC  float, Month_Of  datetime)

    OPEN Generate_Rq

    FETCH next FROM Generate_Rq
    INTO @SL,@Basic, @Grad_pay, @DA, @HRA, @MA, @Ptax, @Itax, @pf, @LIC,  @Month_Of

    WHILE @@Fetch_Status<>-1
        BEGIN
            Print 'Line  ' +@Basic+ '    '+ @Grad_pay+ '    '+ @DA+ '    '+ @HRA+ '    '+ @MA+ '    '+ @Ptax+ '    '+ @Itax+ '    '+ @pf+ '    '+ @Month_Of+ '    '+ @LIC+ '    '+ @SL

            UPDATE  [Monthly_Salary_Statement]  
            Set [Basic]=@Basic, [Grad_pay]=@Grad_pay, [DA]=@DA, [HRA]=@HRA, [MA]=@MA, [Ptax]=@Ptax, [Itax]=@Itax, [pf]=@pf,  [LIC]=@LIC
            Where  [SL]=@SL and month([Month_Of])=month(@Month_Of) and year([Month_Of])=year(@Month_Of)

            if(@@ERROR<>0)
                BEGIN
                    rollback transaction
                    Set @Message='sp_Update_Montly_Salary: ' + @@Error 
                    close Generate_Rq
                    deallocate Generate_Rq
                    Return
                END
            FETCH next FROM Generate_Rq
            INTO @SL,@Basic, @Grad_pay, @DA, @HRA, @MA, @Ptax, @Itax, @pf, @LIC,  @Month_Of
        END
    CLOSE Generate_Rq
    DEALLOCATE Generate_Rq
    COMMIT TRANSACTION
    set  @Message='True'
END 
```

示例 XML：

```
<Salary>
  <TransactionSalary SL="8" Basic="12560.00" Grad_pay="4800.00" DA="7812.00" HRA="2604.00" MA="300.00" Ptax="150.00" pf="2000.00" Itax="200.00" LIC="0.00" Month_Of="20-Dec-2012" /> 
  <TransactionSalary SL="7" Basic="9860.00" Grad_pay="4100.00" DA="6282.00" HRA="2094.00" MA="300.00" Ptax="150.00" pf="2000.00" Itax="0.00" LIC="0.00" Month_Of="20-Dec-2012" /> 
  <TransactionSalary SL="9" Basic="11850.00" Grad_pay="4800.00" DA="7493.00" HRA="2498.00" MA="300.00" Ptax="150.00" pf="2000.00" Itax="0.00" LIC="200.00" Month_Of="20-Dec-2012" /> 
  </Salary>' 
```

错误：

> *消息 8115，级别 16，状态 8，过程 Update_MCR，第 42 行
> 算术溢出错误将十进制转换为数据类型数字。*

我无法找出为什么会发生此错误以及为哪个值。在插入的情况下，我采取另一种方式，如本网站所述。但又一次面临同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:54:14.960

我会：

*   将数据类型更改为`@xmlString`-`XML`毕竟是 XML - 对吧？
*   摆脱**光标**！你不需要它——它只是一个性能杀手——放弃它
*   摆脱“旧式”的`OPENXML`东西 - 使用 SQL Server 的本机 XQuery 支持！更容易使用

所以我的程序是这样的：

```
ALTER PROCEDURE [dbo].[Update_MCR]
     @xmlString  XML,
     @Message nvarchar(500) output
AS
BEGIN
    SET NOCOUNT ON;

    BEGIN TRY
        BEGIN TRANSACTION 

        ;WITH trsal AS 
        (
            SELECT
                SL = TrSal.value('@SL', 'int'),
                [Basic] = TrSal.value('@Basic', 'decimal(16,2)'),
                [Grad_Pay] = TrSal.value('@Grad_pay', 'decimal(16,2)'),
                [DA] = TrSal.value('@DA', 'decimal(16,2)'),
                [HRA] = TrSal.value('@HRA', 'decimal(16,2)'),
                [MA] = TrSal.value('@MA', 'decimal(16,2)'),
                [Ptax] = TrSal.value('@Ptax', 'decimal(16,2)'),
                [Itax] = TrSal.value('@Itax', 'decimal(16,2)'),
                [pf] = TrSal.value('@pf', 'decimal(16,2)'),
                [LIC] = TrSal.value('@LIC', 'decimal(16,2)'),
                [Month_Of] = TrSal.value('@Month_Of', 'datetime')
             FROM 
                @XmlString.nodes('/Salary/TransactionSalary') AS XTbl(TrSal)    
        )
        UPDATE [Monthly_Salary_Statement]  
        SET 
        [Basic] = trsal.Basic, 
        [Grad_pay] = trsal.Grad_pay, 
        [DA] = trsal.DA, 
        [HRA] = trsal.HRA, 
        [MA] = trsal.MA, 
        [Ptax] = trsal.Ptax, 
        [Itax] = trsal.Itax, 
        [pf] = trsal.pf, 
        [LIC] = trsal.LIC
        FROM
        trsal        
        WHERE
        [SL] = trsal.SL 
        AND MONTH([Month_Of]) = MONTH(trsal.Month_Of) 
        AND YEAR([Month_Of]) = YEAR(trsal.Month_Of)

      COMMIT TRANSACTION

      SET @Message = 'True'

    END TRY
    BEGIN CATCH
       ROLLBACK TRANSACTION

       SET @Message = 'sp_Update_Montly_Salary: ' + ERROR_MESSAGE()
    END
END 
```

# sql - 在 sql server 2008 中的外键上给出值而不是列

> ID：13969967
> 
> 赞同：0
> 
> 时间：2012-12-20T10:22:48.810
> 
> 标签：sql, sql-server-2008

我有两张桌子`TABLE_ACCOUNT`和`TABLE_ACTYPE`.

有`TABLE_ACCOUNT`列

```
 (CODE, NAME, TRADE, CATGORY, ACTYPE) 
```

并且`TABLE_ACTYPE`有列

```
(CODE, NAME, ITYPE) 
```

中的数据`TABLE_ACTYPE`是：

```
CODE     NAME     ITYPE
-----------------------
1        TRADE1    1
1        CAT1      2
1        ACT1      3 
```

此表的主键是`CODE, TYPE`

中的数据`TABLE_ACCOUNT`是：

```
CODE, NAME, TRADE, CATEGORY, ACTYPE
-----------------------------------
1     Name1  1       1          1 
```

我想为 to 创建 3 个外键`table_account`

```
ALTER TABLE TABLE_ACCOUNT WITH CHECK 
ADD CONSTRAINT FK_TABLE_ACCOUNT_TABLE_ACTYPE_TRADE 
FOREIGN KEY ([TRADE,1]) REFERENCES [TABLE_ACTYPE] (CODE, ITYPE)

ALTER TABLE TABLE_ACCOUNT WITH CHECK 
ADD CONSTRAINT FK_TABLE_ACCOUNT_TABLE_ACTYPE_CAT 
FOREIGN KEY ([TRADE,2]) REFERENCES [TABLE_ACTYPE] (CODE, ITYPE)

ALTER TABLE TABLE_ACCOUNT WITH CHECK 
ADD CONSTRAINT FK_TABLE_ACCOUNT_TABLE_ACTYPE_ACTYPE 
FOREIGN KEY ([TRADE,3]) REFERENCES [TABLE_ACTYPE] (CODE, ITYPE) 
```

这可能吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:28:40.990

不。

# workflow-foundation-4 - ActivityBuilder.Implementation 在序列化时不包括 NamespacesForImplementation

> ID：13969968
> 
> 赞同：0
> 
> 时间：2012-12-20T10:22:58.247
> 
> 标签：workflow-foundation-4

我在序列化到`WorkflowService`包含`ActivityBuilder`其`Body`参数的 xaml a 时遇到问题。`ActivityBuilder`包含 C# 表达式并且序列化不会`WorkflowService`激活，因为某些 C# 表达式引用自定义类型。实际错误是“未定义类型'SomeTypeIPassToAnArgument'”。

My`ActivityBuilder`是从包含一个`TextExpression.NamespacesForImplementation`元素的 xaml 文件创建的。序列化时缺少此内容`WorkflowService`，这似乎是问题的原因。

我发现如果我序列化`ActivityBuilder`自身，则包含命名空间，但使用`ActivityBuilder.Implementation`失败。不幸的是，当我构建`WorkflowService`要序列化时，我必须使用`ActivityBuilder.Implementation`它作为它的`Body`参数。我尝试使用该`TextExpression.SetNamespacesForImplementation`方法来确保将这些附加到实现中，但这并没有帮助。

以下代码段显示了我正在尝试做的事情以及失败的地方。

```
var loadedXaml = File.ReadAllText(@"C:\workflow.xaml");
Assert.IsTrue(loadedXaml.Contains("NamespacesForImplementation"));

var xamlReader = new XamlXmlReader(new StringReader(loadedXaml));
var builderReader = ActivityXamlServices.CreateBuilderReader(xamlReader);
var builder = XamlServices.Load(builderReader) as ActivityBuilder;

// namespaces are available in the builder itself
Assert.AreNotEqual(0, TextExpression.GetNamespacesForImplementation(builder).Count);

// when saving, the assert fails because the namespaces aren't serialized
var savedXaml = XamlServices.Save(builder.Implementation);
Assert.IsTrue(savedXaml.Contains("NamespacesForImplementation")); 
```

知道为什么这不起作用，或者我可以使用另一种方法吗？最终我的目标是能够从 xaml 加载工作流并将它们合并到一个序列化`WorkflowService`中，我可以使用`VirtualPathProvider`.

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:37:18.947

您不能将 ActivityBuilder 用作 WorkflowService 的主体，ActivityBuilder 仅用于在设计时操作 Activity。要将 ActivityBuilder 转换为 Activity，请使用 ActivityXamlServices.CreateBuilderWriter。

您可以利用 XamlServices.Transform 通过 ActivityBuilder 将 XamlReader 通过管道传输到您在 ActivityXamlServices.CreateBuilderWriter 中创建的编写器。

# ios - 检测 UITextView 滚动位置

> ID：13969970
> 
> 赞同：13
> 
> 时间：2012-12-20T10:23:02.637
> 
> 标签：ios, cocoa, uitextview, uitextviewdelegate

我正在尝试实现一种条款和条件页面的形式，其中“继续”按钮仅在用户滚动到 UITextView 底部时才启用。到目前为止，我已将我的类设置为 UIScrollView 委托并实现了以下方法：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    NSLog(@"Checking if at bottom of UITextView");
    CGPoint bottomOffset = CGPointMake(0,self.warningTextView.frame.size.height);
    //if ([[self.warningTextView contentOffset] isEqualTO:bottomOffset])
    {
    }    
} 
```

我已经评论了 if 语句，因为我不确定如何检查 UITextView 是否位于底部。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T10:30:58.263

UITextView 是 UIScrollView 的子类。因此，您使用的 UIScrollView 委托方法在使用 UITextView 时也可用。

而不是使用`scrollViewDidEndDecelerating`，您应该使用`scrollViewDidScroll`，因为滚动视图可能会停止滚动而不会减速。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.y >= scrollView.contentSize.height - scrollView.frame.size.height)
    {
        NSLog(@"at bottom");
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-09T04:07:13.157

这个问题的 Swift 版本：

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {

    if scrollView.contentOffset.y >= scrollView.contentSize.height - scrollView.frame.size.height {

        print( "View scrolled to the bottom" )

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:31:13.167

这应该解决它。有用。我正在使用它。

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView 
{
    float bottomEdge = scrollView.contentOffset.y + scrollView.frame.size.height;
    if (bottomEdge >= scrollView.contentSize.height) 
    {
        // we are at the end
    }
} 
```

# ruby - 干掉从一个实例传递到下一个实例多次的 ruby 中的嵌套参数

> ID：13969971
> 
> 赞同：0
> 
> 时间：2012-12-20T10:23:08.183
> 
> 标签：ruby, architecture, dry

我正在开发一个与大型第三方 rest api 高度耦合的应用程序。

api 的 url 看起来类似于：

```
http://somedomain.com/state/:state_id/city/:city_id/appointment/:id
http://somedomain.com/state/:state_id/city/:city_id/person/:id 
```

处理上述 api 的模型看起来有点像这样：

```
class Appointment
    SINGULAR_PATH = '/appointment'

    def person
        Person.find(state_id, city_id, person_id)
    end
end

class Person
    SINGULAR_PATH = '/person'

    def self.find(state_id, city_id, id)
        RestCall.get(state_id, city_id, SINGULAR_PATH, id)
    end

    def qualification
       Qualification.find(state_id, city_id, qualification_id)
    end
end

class Qualification
    SINGULAR_PATH = '/qualification'

    def self.find(state_id, city_id, id)
        RestCall.get(state_id, city_id, SINGULAR_PATH, id)
    end
end 
```

在所有休息电话中，我需要传入 state_id 和 city_id 来组成 url。有许多这样的嵌套调用来检索其他资源，并且在每个实例中，state_id 和 city_id 都会沿链传递。

我曾想过使用类变量和继承，以便基类设置 state_id 和 city_id 并且从基类继承的所有子类都可以访问，但我真的想避免这种方法。

有没有更好的方法可以避免将这些参数传递给每个方法？

# android - 通过意图上传到 youtube

> ID：13969981
> 
> 赞同：0
> 
> 时间：2012-12-20T10:23:40.607
> 
> 标签：android

我正在尝试使用意图将视频上传到 youtube。我设置它的方式[在这里描述](http://androidwarzone.blogspot.com/2012/01/upload-video-to-youtube-using-send.html)

这是片段：

```
ContentValues content = new ContentValues(4);
content.put(Video.VideoColumns.TITLE, "My Test");
content.put(Video.VideoColumns.DATE_ADDED,
System.currentTimeMillis() / 1000);
content.put(Video.Media.MIME_TYPE, "video/mp4");
content.put(MediaStore.Video.Media.DATA, outputFile);
ContentResolver resolver = getContentResolver();
Uri uri = resolver.insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI,
content);

Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("video/*");
intent.putExtra(Intent.EXTRA_STREAM, uri);
startActivity(Intent.createChooser(intent, "Share using")); 
```

我想已经设置了标题字段。否则，如果用户没有手动设置标题字段，则上传的视频将具有视频文件名的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:04:03.963

这是一个您想要的演示[应用程序。](http://code.google.com/p/ytd-android/)使用`ytUploader.setTitle("Android Test");`设置您想要的任何标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:31:32.403

通过以下链接

[http://diablo-urban-o.com/post/9929911420/uploading-videos-to-youtube-from-android-part-ii](http://diablo-urban-o.com/post/9929911420/uploading-videos-to-youtube-from-android-part-ii)

并尝试以下代码。

```
ContentValues content = new ContentValues(4);
content.put(Video.VideoColumns.TITLE, "Test");
content.put(Video.VideoColumns.DATE_ADDED,
System.currentTimeMillis() / 1000);
content.put(Video.Media.MIME_TYPE, "video/mp4");
content.put(MediaStore.Video.Media.DATA, "/sdcard/myvideo.mp4");
ContentResolver resolver = getContext().getContentResolver();
Uri uri = resolver.insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, content); 
```

希望对你有帮助...

# linux - 列偶尔为空时的 Awk 应对

> ID：13969984
> 
> 赞同：3
> 
> 时间：2012-12-20T10:23:44.987
> 
> 标签：linux, awk

我有一个 foreach 循环的输出，格式如下：

```
ABC123603LP    44Bq    AAAA       
ABC123603P     3BU     AAAA       
ABC123603ZZP           AAAA       
ABC123604DP    3BU     BBBB     
ABC123604LP    44Bq    BBBB      
ABC123605AP    4q      CCCC    
ABC123605DP    33BGU   CCCC    
ABC123606AP    35Bjq   DDDD     
ABC123606DP    4B      DDDD 
```

从这里我希望将第 1 列和第 2 列打印到终端

```
echo ... | awk '{print $1, $2}' 
```

但是，第三行和其他行打印 ABC123603ZZP AAAA，因为在这种情况下，第二列是空白的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:36:26.170

打印前检查字段数：

```
$ awk 'BEGIN {OFS="\t"}{ if (NF==2)  print $1; else print $1, $2}' file
ABC123603LP     44Bq
ABC123603P      3BU
ABC123603ZZP
ABC123604DP     3BU
ABC123604LP     44Bq
ABC123605AP     4q
ABC123605DP     33BGU
ABC123606AP     35Bjq
ABC123606DP     4B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:31:58.127

您可以使用 sed 代替：

```
echo ... | sed 's/\(A[^ ]*[\t ]*\)\([^ \t]*[0-9][^ \t]*\)*.*/\1 \2/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:02:58.887

删除最后一列的一种技术是让 awk 认为少了 1 个字段：

```
awk -v OFS='\t' '{NF--; print}' 
```

# javascript - Javascript - 文本框中的动态工具提示

> ID：13969991
> 
> 赞同：1
> 
> 时间：2012-12-20T10:24:04.583
> 
> 标签：javascript, jquery, textbox, tooltip

我正在尝试获得以下功能，但似乎找不到一个好方法来做到这一点：

有一个文本框，用户在其中输入一些文本，例如，“**苹果是红色的。** ”然后我希望根据鼠标悬停在哪个词上出现自定义工具提示。

因此，如果我将鼠标悬停在**apple**上，我想看到一个提示*Apples is a fruit！*，如果我将鼠标悬停在**red**上，我想看到*Red 是一种颜色！*，但如果我超过**The**或**is** ，我不希望发生任何事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:33:27.477

对于普通的文本框，这（可能）是不可能的。

当用户键入时，您必须使用“contenteditable”元素（例如 div）并将单词包装在标签中（例如 span）...

通常工具提示需要一个目标，它必须是一个 html 元素。我还没有看到可以附加到标签内单个单词的工具提示。

# sql-server - 如何将存储过程中的返回数据插入到表中？

> ID：13969993
> 
> 赞同：0
> 
> 时间：2012-12-20T10:24:08.623
> 
> 标签：sql-server, tsql, stored-procedures

我有一个带参数的存储过程，返回的结果是单行的列。我需要将该行插入到表中。我想在另一个存储过程中使用该结果。我怎样才能做到这一点 ？我的结果如下：

```
ID |  TotalTime  |  DeservedTime
25 |    100      |      150 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:32:33.637

你可以插入 exec

```
insert into SomeTable
exec yourStoredProcedure 
```

SomeTable 应该匹配 yourStoredProcedure 的返回模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:01:00.243

```
 CREATE PROC erdemtest
    @param1 int,
    @param2 int
as
    select @param1,@param2  

    example : 

declare @tbl table( param1 int,param2 int)

insert into @tbl
exec erdemtest 1,2
select SUM(param1+param2) from @tbl

result is :

3 
```

# linq-to-twitter - LINQ to Twitter：获取超过 200 条推文

> ID：13969994
> 
> 赞同：4
> 
> 时间：2012-12-20T10:24:11.167
> 
> 标签：linq-to-twitter

我正在尝试检索过去 2 个月的用户推文。但是，LINQ to Twitter 将您可以检索的推文数量限制为 200。有没有办法检索更多？

Twitter api 允许分页，例如：

```
http://api.twitter.com/1/statuses/user_timeline.json?id=username8&count=200&page=2 
```

我在 LINQ to Twitter 库中找不到任何类似的东西。

我尝试了以下方法，但它**不起作用**：

```
var statusTweets = (from tweet in twitterCtx.Status
                    where tweet.Type == StatusType.User &&
                    tweet.Count == 200 &&
                    tweet.ScreenName == "username"
                    select tweet).Skip(200); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T10:34:06.783

好吧，我现在觉得有点傻。原来有一个分页参数。

**解决方案**

```
for (int i = 0; i < 5; i++)
{ 
    var statusTweets = (from tweet in twitterCtx.Status
                        where tweet.Type == StatusType.User &&
                        tweet.Count == 200 &&
                        tweet.ScreenName == "username" &&
                        tweet.Page == i
                        select tweet)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-14T09:54:04.350

这是从用户那里获取所有推文的完整功能

```
public static List<Status> searchUserTweet(string screenName, int maxPagination)
{
    var twitterCtx = new TwitterContext(authorizer);
    List<Status> searchResults = new List<Status>();
    int maxNumberToFind = 200;
    int pagination = 0;
    ulong lastId = 0;
    int count = 0;

    var tweets = (from tweet in twitterCtx.Status
                    where tweet.Type == StatusType.User &&
                        tweet.ScreenName == screenName &&
                        tweet.Count == maxNumberToFind
                    select tweet).ToList();

    if (tweets.Count > 0)
    {
        lastId = ulong.Parse(tweets.Last().StatusID.ToString());
        searchResults.AddRange(tweets);
    }

    do
    {
        var id = lastId - 1;
        tweets = (from tweet in twitterCtx.Status
                        where tweet.Type == StatusType.User &&
                            tweet.ScreenName == screenName &&
                            tweet.Count == maxNumberToFind &&
                            tweet.MaxID == id
                        select tweet).ToList();

        searchResults.AddRange(tweets);
        lastId = tweets.Min(x => x.StatusID);
        pagination++;
        count = (pagination > maxPagination) ? 0 : tweets.Count;
    } while (count == maxNumberToFind);

    return searchResults;
} 
```