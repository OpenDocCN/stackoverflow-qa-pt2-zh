# StackOverflow 问答 13523000-13523999

# jquery - jQuery - 分配给数字键 1-5 的土耳其语字符在 textarea 中没有正确显示

> ID：13523000
> 
> 赞同：2
> 
> 时间：2012-11-23T04:14:29.517
> 
> 标签：jquery

我正在尝试让 textarea 接受一些土耳其语字符，以便我可以直接将生成的文本剪切并粘贴到其他程序，而无需不断将 Windows 键盘从 US-ENGLISH 更改为 TURKISH-Q。

我已经让它工作到了一定程度。但是数字附加到文本区域。当我按下“clear textarea”按钮时，我只看到我的特殊土耳其字符 - 我之前的所有输入都被删除了。键盘编号 1-5 已用于分配特殊的土耳其语字符。我想知道为什么 e.peventdefault 不起作用？以及为什么我在按下明文按钮后会看到我的特殊输入？有什么帮助把它改正吗？这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Turkish Key input to textarea</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style type="text/css">
            body {margin:30px 50px;}
            textarea {font-family:verdana, sans-serif;font-size:16px;}
        </style>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript"></script> 
        <pre>
            <script type="text/javascript">
                $(document).ready(function(){
                    var nochar="",cced="ç",sced="ş",inodot="ı";ouml="ö",uuml="ü"
                    $('#write').keyup(function (e) {
                        //Key No1
                        if (e.keyCode == 49) {
                            e.preventDefault();
                            $('#write').append(cced).show();
                        }
                        //Key No2
                        if (e.keyCode == 50) {
                            e.preventDefault();
                            $('#write').append(sced).show();
                        }
                        //Key No3
                        if (e.keyCode == 51) {
                            e.preventDefault();
                            $('#write').append(inodot).show();
                        }
                        //Key No4
                        if (e.keyCode == 52) {
                            e.preventDefault();
                            $('#write').append(ouml).show();
                        }
                        //Key No5
                        if (e.keyCode == 53) {
                            e.preventDefault();
                            $('#write').append(uuml).show();
                        }
                    });
                });
            </script>
        </pre>  
    </head>

    <body>
        <h1>Input Turkish Characters - Copy and Paste</h1>
        <p>Use keyboard for all other characters.</p>
        <form>
            <textarea id="write"  rows="12" cols="50" style="border:solid navy;"></textarea><br><br>
            <input  type="reset"  value="Clear Box"/>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:36:15.883

尝试：

```
<html lang="tr" xml:lang="tr"> 
```

# wpf - Blend for VS2012 not showing project templates

> ID：13523001
> 
> 赞同：5
> 
> 时间：2012-11-23T04:14:39.740
> 
> 标签：wpf, visual-studio-2012, expression-blend

I started using Blend for VS 2012RC and when i open Blend and then go to `New Project`, I can not see the option of selecting the project type. It is totally empty as shown below. Can anyone give me a help to resolve this.

And I also tried to create a WPF project in VS2012RC and opened it in Blend but I can not get the design views.

![enter image description here](../Images/fa26fa504b8a61358b4ca68499f5edbf.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T20:03:50.647

What version of windows do you have? It is windows 7 Right? I think the Blend that comes with VS2012 **only** works for Metro Applications templates, so if you are on Windows 7, this templates are not available to you.

**Solution:** for working with WPF/Silverlight templates, you may use the VS2012's designer. VS2012 have a designer very similar to Blend, it is not as good as Blend, but works, and also have several Blend's utilities.

You may also use the old Blend 4 with VS2012 projects that have target framework 4.0 or lower. For more details please see this [question](https://stackoverflow.com/questions/13518417/how-to-edit-a-c-sharp-project-in-blend-4-that-was-created-with-vs2012/13518838#13518838).

Hope this could be helpful for you...

# nhibernate - 休眠加入另一个表

> ID：13523003
> 
> 赞同：3
> 
> 时间：2012-11-23T04:14:47.027
> 
> 标签：nhibernate, c#-4.0, fluent-nhibernate

我需要对客户执行联接。其中地址是主要的并填充 PrimaryAddress1 和 PrimaryCity 字段。客户映射已经与地址类有很多关系，但我不想获取所有地址（性能问题）。

请帮忙..

类：

```
public class Customer
{
    public Customer()
    {
        Addressess = new List<Address>();
    }
   public virtual int CustomerID { get; set; }
    public virtual int? BranchID { get; set; }
    public virtual int? CustTypeID { get; set; }
    public virtual string CompanyName { get; set; }
    public virtual string Prefix { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string MiddleName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string PrimaryAddress1 { get; set; }
    public virtual string PrimaryCity { get; set; }
    public virtual List<Address> Addresses { get; set; }
}

public class Address
{
    public Address()
    {
    }
    public virtual int LocationID { get; set; }
    public virtual int? CustomerID { get; set; }
    public virtual string LocationName { get; set; }
    public virtual string Address1 { get; set; }
    public virtual string Address2 { get; set; }
    public virtual string Address3 { get; set; }
    public virtual string City { get; set; }
    public virtual bool Primary { get; set; }
} 
```

映射：

```
public TblCustomerMap()
{
    Table("tblCustomers");
    LazyLoad();
    Id(x => x.CustomerID).GeneratedBy.Identity().Column("CustomerID");
    Map(x => x.ProfileID).Column("ProfileID");
    Map(x => x.BranchID).Column("BranchID");
    Map(x => x.DateEntered).Column("DateEntered");
    Map(x => x.DateTerminated).Column("DateTerminated");
    Map(x => x.CustTypeID).Column("CustTypeID");
    Map(x => x.CompanyName).Column("CompanyName").Not.Nullable().Length(50);
    Map(x => x.Prefix).Column("Prefix").Not.Nullable().Length(50);
    Map(x => x.FirstName).Column("FirstName").Not.Nullable().Length(50);
    Map(x => x.MiddleName).Column("MiddleName").Not.Nullable().Length(50);
    Map(x => x.LastName).Column("LastName").Not.Nullable().Length(50);
    HasMany(x => x.Address).KeyColumn("CustomerID");
    Map(x => x.PrimaryAddress1).Column("PrimaryAddress1") // from table tbladdress where address is primary and get data from address1 column
    Map(x => x.PrimaryCity).Column("PrimaryCity") // from table tbladdress where address is primary and get data from city column
} 
```

询问：

```
 var query = session
            .QueryOver<Customer>(() => customer)
            .JoinQueryOver(() => customer.Addresses, () => address)
            .Where(() => address.Primary)
            .List();

        foreach (var customer1 in query)
        {
            customer1.PrimaryAddress1 = customer1.Addresses[0].Address1;
            customer1.PrimaryCity = customer1.Addresses[0].City;
            customer1.PrimaryState = customer1.Addresses[0].StateOrProvince;

        } 
```

新查询：

```
 var query = session.Query<Customer>()
            .SelectMany(c => c.Addresses,
                        (c, a) => new {c, a})
            .Where(cust => cust.a.Primary)
            .Select(item => new CustomerView()
                              {
                                 CustomerID = item.c.CustomerID,
                                 CompanyName=  item.c.CompanyName,
                                 FirstName=  item.c.FirstName,
                                  LastName=item.c.LastName,
                                  Address1=item.a.Address1,
                                  Address2=item.a.Address2,
                                 Address3= item.a.Address3,
                                 City= item.a.City,
                                 StateOrProvince= item.a.StateOrProvince
                              });
        return query.ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:55:09.743

有（至少）两种方法可以实现这一点。

1）更直观易读的是扩展DB和调整*NHibernate*映射。我们将需要创建新*视图* `viewPrimaryAddress`。

```
SELECT ***columns*** FROM [tbladdress] WHERE Primary = true 
```

客户映射将如下所示：

```
Join("[viewPrimaryAddress]", 
{
  m.Fetch.Join();
  m.KeyColumn("CustomerID");
  m.Map(t => t.PrimaryAddress1).Column("PrimaryAddress1");
  m.Map(t => t.PrimaryCity).Column("PrimaryCity");
}); 
```

就是这样。将发出一条 SQL 语句，因此无需加载地址集合

*2) 第二种方法的概述*

第二种方法将通过新的类映射创建该视图，有点复杂，但只能在应用程序端（C# 和 NHiberante）完成。

`PrimaryAddress`将创建新类并在类级别定义上包含过滤器（xml 映射示例：

```
<class name="PrimaryAddress" ... where="Primary = true" > 
```

然后我们可以将`Customer`新*的多对一*关系扩展到`PrimaryAddress`。因此，获取列“PrimaryAddress1”和“PrimaryCity”的属性将通过在 WHERE 子句中过滤的 SQL 选择来完成。

### 扩展：

下一步应指导您如何创建新映射，将主地址定位为一对一属性 1) C# PrimaryAddress：

```
public class PrimaryAddress
{
    public virtual Customer Customer { get; set; }
    public virtual string Address { get; set; }
    public virtual string City { get; set; }
} 
```

2）映射：

```
public TblPrimaryAddressMap()
{
    Table("tbladdress");
    LazyLoad();
    Where("Primary = 1");
    // Id as AddressId
    References(x => x.Customer).Column("CustomerID");
    Map(x => x.Address).Column("PrimaryAddress1")
    Map(x => x.PrimaryCity).Column("PrimaryCity")
} 
```

3) 新物业`Customer`

```
public class Customer
{  
   ..
   public virtual PrimaryAddress PrimaryAddress { get; set; } 
```

4) `Customer` public TblCustomerMap() { ... HasOne(x => x.PrimaryAddress)的新映射

此时，当您`Customer`从会话中获取时。您可以访问

```
customer.PrimaryAddress.Address
customer.PrimaryAddress.City 
```

*我主要使用 XML 映射。但是从这些方面来看，这个概念应该很清楚......玩一些`fetch="join"`你可以加载的东西`Customer`，它`PrimaryAddress`在一个 SQL 选择中*

*如果您甚至需要客户属性`Customer.PrimaryAddress1`，只需将 PrimaryAddress.Address 包装在 getter 中即可。*

您将获得更多，可以通过这个新属性进行过滤和排序`PrimaryAddress`

**注意**：这种方法对于缓存来说是脆弱的。原因是，虽然您将更改真实`Address`实体，但没有建立驱逐 的机制`PrimaryAddress`。此外，您应该强制业务层仅允许将一个地址设置为 primary = true 的客户

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:03:23.823

我有一个类似的地址结构并为此苦苦挣扎。一个主要问题是确保在客户没有主要地址的情况下返回客户记录（不应该发生，但是......）。

如果您想在 Customer 实体中包含地址字段，请查看[连接映射。](http://ayende.com/blog/3961/nhibernate-mapping-join)

我的方法是使用数据传输对象（DTO 或视图），在本例中为 CompanyDto：

```
 internal static QueryOver<Company> GetCompanyDtoQuery()
    {
        Address addr = null;
        CompanyDto dto = null;

        var query = QueryOver.Of<Company>()
            .Left.JoinAlias(c => c.Addresses, () => addr)
            .SelectList(list =>
                        {
                            list.Select(c => c.CompanyId).WithAlias(() => dto.CompanyId)
                            list.Select(a -> addr.AddressId).WithAlias(() => dto.AddressId
                            return list;
                        })
            .Where(a => addr.AddressId == null || addr.IsPrimaryAddress)
            .TransformUsing(new AliasToDtoDeepTransformer<CompanyDto>("PrimaryAddress"));
        return query;
    } 
```

[编辑]

使用 Query 更容易做到这一点，例如：

```
 var target = (from c in session.Query<Company>()
                          from a in c.Addresses
                          where a.IsPrimaryAddress
                          select new
                              {
                                  c.CompanyId,
                                  a.Address1
                              })
                .Take(10).ToList();
            Assert.IsTrue(target.Any()); 
```

您发布的查询的问题是您通过按索引访问集合来强制延迟加载。您可以使用预先加载来一次选择获取所有地址：

```
 var target = session.QueryOver<Company>()
                                 .Fetch(c => c.Addresses).Eager
                                 .Take(10).List();
             Assert.IsTrue(target.Any()); 
```

但是，正如我在原始回复中所说，您应该查看 join 或其他方法，而不是在域模型中包含来自另一个表的字段。

# oracle - 在 Oracle Apex 中构建图表

> ID：13523005
> 
> 赞同：0
> 
> 时间：2012-11-23T04:15:02.907
> 
> 标签：oracle, charts, express

我正在尝试在 oracle apex 中构建图表，但无法解析 sql 查询。提前感谢您的帮助。

```
SELECT NULL LINK,
E.EquipmentDescription LABEL, 
sum(EC.TIMECHECKEDIN - EC.TIMECHECKEDOUT) VALUE
From EQUIPMENT_CHECKOUT EC
join EQUIPMENT E on E.EQUIPMENTID = EC.EQUIPMENTID
group by E.EQUIPMENTDESCRIPTION 
```

# html - 带锚和按钮的盒子模型

> ID：13523009
> 
> 赞同：0
> 
> 时间：2012-11-23T04:15:33.743
> 
> 标签：html, css

我有以下小提琴：**[我的按钮栏](http://jsfiddle.net/m2DJX/)**

我的问题很常见，尽管 inline-block 并没有像我希望的那样有帮助。如何使锚点和按钮的大小相同。蓝色按钮需要包含在灰色栏中，它们应该有一个小边框，并且大小相同，就像您对**按钮栏****所期望**的那样。

 **它只需要在 Firefox 和 chrome 中工作。我们不再为 IE 烦恼（*Chrome Frame*）。

**html 看起来像这样：**

```
<div class="buttons">
    <button class="inline-button" type="submit" name="action" value="Update"><span data-icon="icon-cog">icon</span>Save</button>
    <a href="#"><span data-icon="icon-cog">icon</span>Cancel</a>
</div> 
```

**我使用的 CSS 如下：**

```
div.buttons a, div.buttons button[type=submit] {
  position: static;
  display: inline-block;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  -ms-border-radius: 4px;
  -o-border-radius: 4px;
  border-radius: 4px;
  outline: 0;
  vertical-align: baseline;
  height: 100%;
  font-family: PTSansBold;
  font-size: 12pt;
  text-align: left;
  background-color: #051DC3;
  color: white;
  padding: 4px;
  margin: 3px;
  width: 8em;
  border: none;
  text-decoration: none;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:19:29.823

***[演示](http://jsfiddle.net/m2DJX/3/)***

**嗨，现在试试这个 css**这是**Css3** `Box-sizing : border-box`

```
div.buttons a, div.buttons button[type="submit"]{
-moz-box-sizing:border-box;
    box-sizing:border-box;
        -webkit-box-sizing:border-box;
    vertical-align:top;
} 
```

## ***[演示](http://jsfiddle.net/m2DJX/3/)***

* * *

***[更多关于这个盒子尺寸的信息](http://css-tricks.com/box-sizing/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:24:08.403

```
 <button class="inline-button" type="submit" name="action" value="Update"><span data-icon="icon-cog">icon</span>Save</button>
<button class="inline-button" type="submit" name="action" value="Update"><span data-icon="icon-cog">icon</span>Cancel</button> 
```

您没有为第二个按钮使用按钮标签。通过添加它可以完美地工作**

# javascript - jQuery函数在点击之前启动，为什么？

> ID：13523010
> 
> 赞同：0
> 
> 时间：2012-11-23T04:15:51.240
> 
> 标签：javascript, jquery, click, transition

所以我正在使用 jquery 和[jquery.transit](http://ricostacruz.com/jquery.transit/)制作一个简单的盒子旋转。

我正在使用一个`.click`调用另一个命名函数的基本函数。但是，命名函数在我单击按钮之前执行（在页面加载时立即执行），我想知道为什么会发生这种情况以及如何解决这个问题？

这是一个jsfiddle：http: [//jsfiddle.net/kdLSS/1/](http://jsfiddle.net/kdLSS/1/)

我的代码：

```
<!DOCTYPE html>
<html>
<head>
  <style>
    div {
      background-color:yellow;
      width:100px;
      border:1px solid blue;
      position:absolute;
      left:50px;
    }
  </style>
  <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js'></script>
  <script src='jquerytransit.js'></script> 
  <title>test</title>
</head>
<body>
  <script>
    $(function() {
      function hello() {
        $("#block").transition({
          perspective: '0px',
          rotateY: '180deg'
        }, 100 );
      }

      $("#go").click(hello())
    });
  </script>
  <button id="go"> Run</button>
  <div id="block">Hello!</div>
</body>
</html> 
```

非常感谢美国的人们，感恩节快乐！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T04:18:11.190

修复您的事件处理程序分配。它应该是：

```
$("#go").click(hello);

// not $("#go").click(hello()); 
```

您想传递对该`hello`函数的引用。您不想将`hello`函数的结果传递给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:18:37.667

在 javascript 中，在函数名后面添加 () 会立即执行该函数。您想为单击事件分配一个函数，请忽略 ()

IE

```
 $("#go").click(hello); 
```

然后单击#go 时将执行该函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:31:02.553

@Le Marcin

您犯了一些基本错误。例如，您已将您的归还`function hello`并`document.ready`没有正确关闭括号。`Dom`因此，一旦您准备好，它就会被视为运行。

更正的脚本。

```
$(function() {
    $("#go").click(function() {
        hello();
        alert("Hi")
     });
 });

function hello()
{
    $("#block").transition({ perspective: '0px',
    rotateY: '180deg' }, 5000 );
}​ 
```

# iphone - iPhone - 在选项卡视图出现之前强制验证表单

> ID：13523022
> 
> 赞同：0
> 
> 时间：2012-11-23T04:17:02.570
> 
> 标签：iphone, objective-c, ios

我是专门为 iPhone 开发 iOS 的新手。这是我的问题，我已经开始编写选项卡式应用程序，我希望当用户打开应用程序时，他首先强制查看身份验证表单（仅在他之前未通过服务器进行身份验证的情况下）并且*仅*成功登录后，他会看到不同的选项卡。

怎么做？

我已经设计了一个带有标签的情节提要并放置了一些代码，但是我不知道如何将它与身份验证表单结合起来，该表单是否应该成为情节提要的一部分？

将不胜感激任何答案，尤其是示例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:45:38.150

是的，您可以将身份验证表单放入情节提要中。从情节提要中使其成为初始视图控制器。完成身份验证后，您可以更改应用程序窗口的 rootViewController。将您的选项卡视图控制器设置为 rootViewController。

```
[[[[UIApplication sharedApplication] delegate] window] setRootViewController:tabsViewController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:38:59.340

您可以使用模型导航在第一个选项卡上打开登录页面，当视图控制器作为当前视图控制器打开时，选项卡栏不会显示在屏幕上。您可以打开登录视图动画或不，这是您的选择。

谢谢

# haskell - 将函数解释为具有多种类型

> ID：13523023
> 
> 赞同：2
> 
> 时间：2012-11-23T04:17:07.770
> 
> 标签：haskell, typeclass

这就是我想要做的：

```
data X = I Int | D Double deriving (Show, Eq, Ord)

{-
-- A normal declaration which works fine
instance Num X where
  (I a) + (I b) = I $ a + b
  (D a) + (D b) = D $ a + b
  -- ...   
-}                                          

coerce :: Num a => X -> X -> (a -> a -> a) -> X
coerce (I a) (I b) op = I $ a `op` b
coerce (D a) (D b) op = D $ a `op` b

instance Num X where
  a + b = coerce a b (+) 
```

编译时出现错误：

```
 tc.hs:18:29:
     Couldn't match type `Double' with `Int'
     In the second argument of `($)', namely `a `op` b'
     In the expression: I $ a `op` b
     In an equation for `coerce': coerce (I a) (I b) op = I $ a `op` b 
```

在`coerce`我想解释`op`为`Int -> Int -> Int`和`Double -> Double -> Double`。我想我应该能够做到这一点，因为 op 是 type `Num a => a -> a -> a`。

我的主要目标是抽象出功能 Num 子类中所需的重复：我更愿意像在未注释版本中那样编写它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T04:42:13.123

您对强制的定义将操作类型限制为`Int -> Int -> Int`第一个定义和`Double -> Double -> Double`第二个定义。如果您真的想说它`op`在 a for all`Num`类中是多态的，那么您应该使用`Rank2Types`它来使其工作。

```
coerce :: X -> X -> (forall a . Num a => a -> a -> a) -> X
coerce (I a) (I b) op = I $ a `op` b
coerce (D a) (D b) op = D $ a `op` b
coerce (I a) (D b) op = D $ op (fromIntegral a) b
coerce (D a) (I b) op = D $ op a (fromIntegral b) 
```

# sql - 如何在 sql server 2008 中为指向 Excel 工作表的列创建超链接

> ID：13523025
> 
> 赞同：0
> 
> 时间：2012-11-23T04:17:35.897
> 
> 标签：sql, sql-server-2008

我需要为指向 Excel 工作表的列创建一个链接。

如果我单击该列，则应打开 Excel 工作表。

在 SQL 中可以吗？如果可能的话，请让我知道

# python - 如何在python中求解多变量线性方程？

> ID：13523026
> 
> 赞同：2
> 
> 时间：2012-11-23T04:17:53.747
> 
> 标签：python, linear-algebra

我有 10,000 个变量。对于其中的 100 个，我确实知道确切的值。

其他的给出如下：

```
a = 0.x_1 * b + 0.y_2 * c+ 0.z_1 * d + (1 - 0.x_1 - 0.y_1 - 0.z_1) * a
b = 0.x_2 * c + 0.y_2 * d+ 0.z_2 * e + (1 - 0.x_2 - 0.y_2 - 0.z_2) * b

...

q = 0.x_10000 * p + 0.y_10000 * r+ 0.z_10000 * s + (1 - 0.x_10000 - 0.y_10000 - 0.z_10000) * q 
```

是的，我知道 0.x_n, 0.y_n, 0.z_n ... 的确切值（以 0\. 作为前缀意味着它小于 1 而大于 0）

我怎样才能在python中解决这个问题？如果你能提供一些例子，我真的很感激，简单的方程如下：

```
x - y + 2z =  5
    y -  z = -1
         z =  3 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T04:52:15.627

（使用[numpy](http://numpy.scipy.org/)）如果我们重写线性方程组

```
x - y + 2z =  5
    y -  z = -1
         z =  3 
```

作为矩阵方程

```
A x = b 
```

和

```
A = np.array([[ 1, -1,  2],
              [ 0,  1, -1],
              [ 0,  0,  1]]) 
```

和

```
b = np.array([5, -1, 3]) 
```

然后`x`可以使用`np.linalg.solve`：

```
import numpy as np

A = np.array([(1, -1, 2), (0, 1, -1), (0, 0, 1)])
b = np.array([5, -1, 3])
x = np.linalg.solve(A, b) 
```

产量

```
print(x)
# [ 1\.  2\.  3.] 
```

我们可以检查`A x = b`：

```
print(np.dot(A,x))
# [ 5\. -1\.  3.]

assert np.allclose(np.dot(A,x), b) 
```

# php - 如何在wordpress插件中添加菜单链接和页面（在前端）

> ID：13523027
> 
> 赞同：2
> 
> 时间：2012-11-23T04:18:02.870
> 
> 标签：php, wordpress, content-management-system

我正在创建一个 wordpress 插件，让用户登录和上传文件，并且在后端管理员用户可以登录和设置权限等

这是生成前端的 php 文件，我现在将其添加为模板并创建前端我想要做的就是将此代码也放入插件中......是否有任何相关的钩子但我没有找到合适的...... ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:30:33.567

如果我理解正确，您可以像这样添加页面：

```
function MyPluginPage() {
  $SettingsPath = MyPlugin_DIRNAME . '/mynewpage.php';
  add_menu_page( 'MyPlugin', 'MyPlugin', 'administrator', $SettingsPath, '', plugins_url( '/' . MyPlugin_DIRNAME . '/myplugin.png' ) );
}
add_action( 'admin_menu', 'MyPluginPage'); // Register Menus. 
```

# viewport - 更改平板电脑视口以准确显示固定尺寸元素

> ID：13523029
> 
> 赞同：2
> 
> 时间：2012-11-23T04:18:12.107
> 
> 标签：viewport

我有一个正好 1000 像素宽和 850 像素高的 HTML 元素（它实际上是一个 iFrame，在画布标签上包含一个 HTML5 游戏，但我希望这不会有关系）。

我希望将元素呈现在平板电脑上，以便视口缩放以始终显示整个元素，仅此而已。因此，当平板电脑处于横向模式时，您会期望两边都有空白；在纵向模式下，下方（和上方？）会有空白区域。

在 iPad2 上进行测试时，纵向模式似乎开箱即用，视口自动将元素放在顶部并缩放以准确显示整个图像；但在横向模式下，它会做同样的事情并切断底部。

`viewport`我已经尝试了元标记的各种组合，例如`<meta name="viewport" content="height=850"/>`，但似乎无法让它始终如一地工作。

欢迎使用 jQuery 根据窗口大小的变化调整大小的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T03:14:55.090

更好的解决方案是根据设备的屏幕宽度动态修改视口元标记。

例如，如果您的网站针对 1000 像素宽进行了优化（那么您希望将初始比例动态设置为将整个网站显示在视图中所需的精确缩放值。

1.  在您的脑海中放置没有“内容”属性的视口元数据。

    ```
     <head>
           <meta id='viewport' name="viewport"/>
      </head> 
    ```

2.  在文档正文中添加一个 javascript 片段

    ```
     //our desired page width
      var desiredPageWidth = 1000;

      //detect the device screen width
      var screenWidth = 0;
      if(window.innerWidth > 0)
      {
           screenWidth = window.innerWidth;
      }
      else if(screen.width > 0)
      {
           screenWidth = screen.width;
      }

      //if your screen width is less than the desired page width
      //then calculat the initial zoom
      if(screenWidth < desiredPageWidth)
      {
           //initial zoom is the screenWidth / desiredPageWidth
           var viewportContent = "width="+desiredPageWidth+", maximum-scale=1, initial-scale="+screenWidth/desiredPageWidth;

           //dynamically set the viewport content
           document.getElementById('viewport').setAttribute('content', viewportContent);
      } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T05:26:33.147

iPad 视口大小在横向模式下为 1024 x 690 像素，在纵向模式下为 768 x 946 像素。

如果您将视口元标记的初始比例和最大比例属性设置为 0.768，它将完全适合纵向模式，但在横向模式下仍不会被截断。

```
<meta name="viewport" content="width=device-width, initial-scale=0.768, maximum-scale=0.768"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T15:23:01.383

直接的解决方案如下：

1.  检查宽度是否小于指定宽度。
2.  如果小于指定宽度，则启动视口代码

所以解决方案如下：

```
$(document).ready(function(){
           if (screen.width < 767) {
                        var viewportContent = "width=device-width, maximum-scale=1, initial-scale=1";                            
                        document.getElementById('viewport').setAttribute('content', viewportContent);                         
            }
        }); 
```

而不是动态使用。此代码应该可以正常工作。

# iphone - 核心图中的 EXC_BAD_ACCESS

> ID：13523030
> 
> 赞同：0
> 
> 时间：2012-11-23T04:18:17.703
> 
> 标签：iphone, objective-c, ios, xcode, core-plot

我在我的应用程序中实现了**核心情节** ，它工作正常。但它只是第一次显示图表。当我再次尝试查看时，它显示我过度过度。

问题是**CPDStockPriceStore.m**中的所有数据都是第一次调用并尝试再次查看图表，然后**CPDStockPriceStore.m**中的断点没有出现，它会引导我**在 chartviewController 中的 Bad_Excess**

**我得到 bad_excess 的行代码：**

`NSInteger valueCount = [[[CPDStockPriceStore sharedInstance] datesInMonth] count];`

我认为 sharedInsance 存在问题。是这样吗？

不知道为什么会这样？？

**更新**

我在我的应用程序中实现了核心情节，它工作正常。但它只是第一次显示图表。当我再次尝试查看时，它显示了带有旧数据的图表。

问题是所有数据`CPDStockPriceStore.m`都是第一次调用并尝试再次查看图表，然后断点`CPDStockPriceStore.m`没有出现

我有一个表格视图并根据所选行显示具有不同数据的图表。但是现在，该`CPDStockprice`文件的调用次数不超过一次。所以，我不能用不同的数据显示图表。图表向我展示了我首先选择行的相同数据。如果我选择新行，那么它会向我显示以前数据的图表。

不知道为什么会这样？？帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:04:57.307

如果您尝试取消引用（即访问）对已被释放的目标 C 对象的引用，您将得到 EXC_BAD_ACCESS 错误（而不是 Bad_Excess，它不存在）。

换句话说，这是一个内存管理问题。问题是您的对象的保留计数已达到 0，并且运行时已解除分配该对象 - 它不再存在。

您在项目中使用 ARC 吗？

# sql-server-2008 - SQL Server 2008 - 插入表错误“表中标识列的显式值...”

> ID：13523038
> 
> 赞同：0
> 
> 时间：2012-11-23T04:19:21.300
> 
> 标签：sql-server-2008, insert, identity-column

我通过从现有表中复制所有数据创建了一个临时表。在原始表中有一个标识列`MemberNumber`。

每个月，我都需要通过比较`MemberNumber`我的临时表中是否存在，如果不存在则将其插入到我的临时表中来查找原始表中的任何新条目。但我收到以下错误

> *表中标识列的显式值....*

我怎样才能在`MemberNumber`没有身份的情况下按原样插入值？

我如何不让该列成为我的临时表中的标识列？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:24:27.613

`MemberNumber`不应该是临时表中的标识列，因为它本质上是对另一个表的外键引用。它应该只是一个非空整数列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:24:41.533

似乎最好的方法是重新创建没有身份属性的临时表。但是，如果由于某种原因您无法做到这一点，请注意，您可以通过使用将值插入标识列[`SET IDENTITY_INSERT OFF`](http://msdn.microsoft.com/en-us/library/ms188059.aspx)。

# jenkins - 从 Jenkins 自动签署构建工件

> ID：13523039
> 
> 赞同：1
> 
> 时间：2012-11-23T04:19:24.187
> 
> 标签：jenkins, gnupg

我正在编写一个使用 cmake 的库。我已经设置了构建以添加一个`make`构建 Debian 源包的目标，然后我可以将其上传到 Launchpad`dput`以创建一个 Ubuntu PPA。此过程的一部分是使用我的`gpg`密钥对包进行签名。当我`make`在登录到正常的 X 会话时运行此目标时，它会弹出一个框，要求我输入`gpg`密码。

我想让 Jenkins 自动执行此操作以上传每日快照构建。问题是如何让 Jenkins 自动签署包。我见过类似的问题，但他们从未真正回答过我正在寻找的内容。

我想我需要跑来`gpg-agent`处理这个问题，但这里有一些我不明白的事情：

1.) Jenkins 在`jenkins`用户下运行。我如何`gpg-agent`为这个用户运行。我已经看到`eval $(gpg-agent --daemon)`可以将其放入 shell 脚本启动文件中，但不会由 Jenkins 获取。

2.) 我如何`gpg-agent`知道我的密码。如果我登录到`jenkins`用户，`sudo su - jenkins`我可以`gpg`用来解密文件，但它会弹出`pinentry-curses`并询问我的密码。詹金斯将如何处理。我想输入一次密码并记住它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:57:06.943

1）你可以使用绝对路径`gpg-agent`吗？也许我没有让你正确..

2）您应该`--passphrase-fd 0`用作 gpg 的参数（例如：）`echo password | gpg --passphrase-fd 0 --decrypt / --encrypt`。更多信息[在这里](https://stackoverflow.com/questions/2530458/gnupg-shell-script-refuses-to-read-password)。

# ruby-on-rails - 如果在模型上设置了属性 - 即不是 nil，我可以触发回调吗？

> ID：13523044
> 
> 赞同：0
> 
> 时间：2012-11-23T04:19:47.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想做一个`after_save`，只有`self.firm`不是零。

我试过这个：

```
after_save :set_firm_size, :if => self.firm 
```

但这引发了错误。

我怎样才能让它工作？还是不能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:25:24.570

使用[`Proc`](http://www.ruby-doc.org/core-1.9.3/Proc.html)：

```
after_save :set_firm_size, :if => Proc.new { |a| a.firm.present? } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:34:07.087

您可以像 shioyama 所说的那样创建一个 Proc，或者您可以创建一个方法，然后将该方法名称作为符号发送。例如：

```
after_save :set_firm_size, :if => :firm_present?

def firm_present?
  self.firm.present?
end 
```

# sql - hive sql查找最新记录

> ID：13523049
> 
> 赞同：30
> 
> 时间：2012-11-23T04:20:27.777
> 
> 标签：sql, group-by, hive, max

表格是：

```
create table test (
id string,
name string,
age string,
modified string) 
```

像这样的数据：

```
id    name   age  modifed
1     a      10   2011-11-11 11:11:11
1     a      11   2012-11-11 12:00:00
2     b      20   2012-12-10 10:11:12
2     b      20   2012-12-10 10:11:12
2     b      20   2012-12-12 10:11:12
2     b      20   2012-12-15 10:11:12 
```

我想按id获取最新记录（包括每列id，姓名，年龄，修改）分组，如上数据，正确结果是：

```
1     a      11   2012-11-11 12:00:00
2     b      20   2012-12-15 10:11:12 
```

我喜欢这样：

```
insert overwrite table t 
select b.id, b.name, b.age, b.modified 
from (
        select id,max(modified) as modified 
        from test 
        group by id
) a 
left outer join test b on (a.id=b.id  and a.modified=b.modified); 
```

这条sql可以得到正确的结果，但是当大量数据时，它运行缓慢。

**没有左外连接有没有办法做到这一点？**

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-11-30T12:57:51.643

Hive SQL 有一个几乎没有记录的特性（我在他们的一个 Jira 错误报告中找到了它），它可以让你使用 struct()s 执行类似 argmax() 的操作。例如，如果您有如下表格：

```
test_argmax
id,val,key
1,1,A
1,2,B
1,3,C
1,2,D
2,1,E
2,1,U
2,2,V
2,3,W
2,2,X
2,1,Y 
```

你可以这样做：

```
select 
  max(struct(val, key, id)).col1 as max_val,
  max(struct(val, key, id)).col2 as max_key,
  max(struct(val, key, id)).col3 as max_id
from test_argmax
group by id 
```

并得到结果：

```
max_val,max_key,max_id
3,C,1
3,W,2 
```

我认为如果 val （第一个结构元素）存在关系，它将回退到第二列的比较。我还没有弄清楚是否有一种更简洁的语法可以将各个列从结果结构中取出，也许以某种方式使用 named_struct ？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-04-20T20:01:41.937

与先前答案中回答的方法略有不同。

下面的示例使用**hive 窗口**功能来查找最新记录，请[在此处阅读更多信息](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+WindowingAndAnalytics)

```
SELECT t.id
    ,t.name
    ,t.age
    ,t.modified
FROM (
    SELECT id
        ,name
        ,age
        ,modified
        ,ROW_NUMBER() OVER (
            PARTITION BY id ORDER BY unix_timestamp(modified,'yyyy-MM-dd hh:mm:ss') DESC
            ) AS ROW_NUMBER   
    FROM test
    ) t
WHERE t.ROW_NUMBER <= 1; 
```

修改后的是字符串，因此使用时间戳将其转换为`unix_timestamp(modified,'yyyy-MM-dd hh:mm:ss')`时间戳。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-09T15:24:25.093

Hive SQL 有一个相对较新的特性、[分析函数和 over 子句](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+WindowingAndAnalytics)。这应该可以在没有连接的情况下完成工作

```
select id, name, age, last_modified 
from ( select id, name, age, modified, 
              max( modified) over (partition by id) as last_modified 
       from test ) as sub
where   modified = last_modified 
```

这里发生的事情是子查询生成一个新行，其中包含一个额外的列 last_modified，该列具有相应人员 ID 的最新修改时间戳。（类似于 group by 会做的事情）这里的关键是子查询再次让您在原始表中每行一行，然后从中过滤。

即使是更简单的解决方案也有可能起作用：

```
select  id, name, age,  
        max( modified) over (partition by id) last_modified 
from test 
where   modified = last_modified 
```

顺便说一句，同样的代码也可以在 Impala 中运行。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-23T04:29:01.463

试试这个：

```
select t1.* from test t1
join (
  select id, max(modifed) maxModified from test
  group by id
) s
on t1.id = s.id and t1.modifed = s.maxModified 
```

[在这里](http://sqlfiddle.com/#!2/1beff/2)拉小提琴。

左外连接解决方[​​案在这里](http://sqlfiddle.com/#!2/1beff/1)。

让我们知道哪个跑得更快:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T15:52:51.773

如果您可以确保最大修改的行在同一 id 行集中也具有最大年龄。

尝试

```
select id, name, max(age), max(modified) 
from test
group by id, name 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T04:50:01.463

尝试这个

```
select id,name,age,modified from test
 where modified=max(modified)
 group by id,name 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T21:41:19.510

假设数据是这样的：

```
 id      name    age     modifed
    1       a       10      2011-11-11 11:11:11
    1       a       11      2012-11-11 12:00:00
    2       b       23      2012-12-10 10:11:12
    2       b       21      2012-12-10 10:11:12
    2       b       22      2012-12-15 10:11:12
    2       b       20      2012-12-15 10:11:12 
```

那么上面查询的结果会给你 - （注意重复的 2, b 具有相同的日期时间）

```
 1       a       11      2012-11-11 12:00:00
    2       b       22      2012-12-15 10:11:12
    2       b       20      2012-12-15 10:11:12 
```

此查询运行一个额外的 group by 并且效率较低但给出了正确的结果 -

```
 select collect_set(b.id)[0], collect_set(b.name)[0], collect_set(b.age)[0], b.modified
    from
        (select id, max(modified) as modified from test group by id) a
      left outer join
        test b
      on
        (a.id=b.id and a.modified=b.modified)
    group by
      b.modified; 
```

那么上面查询的结果会给你

```
 1       a       11      2012-11-11 12:00:00
    2       b       20      2012-12-15 10:11:12 
```

现在，如果我们稍微改进一下查询 - 然后代替 3 个 MR，它只运行一个 Keping 结果相同 -

```
 select id, collect_set(name)[0], collect_set(age)[0], max(modified)
    from test 
    group by id; 
```

注意 - 如果您的按字段分组产生大量结果，这将减慢速度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-23T00:10:02.790

您可以在不使用左外连接的情况下获得所需的结果，如下所示：

select * from test where (id, modified) in(select id, max(modified) from test group by id)

[http://sqlfiddle.com/#!2/bfbd5/42](http://sqlfiddle.com/#!2/bfbd5/42)

# c++ - 返回 tictactoe 的 minimax 算法中的 bestMove

> ID：13523050
> 
> 赞同：6
> 
> 时间：2012-11-23T04:20:34.950
> 
> 标签：c++, artificial-intelligence, minimax

我试图编写 Russel Norvig 的人工智能书中给出的井字游戏的极小极大算法。除了将 bestMove 返回给用户的方式之外，它拥有一切。我正在努力返回 bestMove，但无法决定何时选择 bestMove。帮助，有人吗？

```
moveT MiniMax(stateT state)
{
    moveT bestMove;

    max_move(state,bestMove);

    return bestMove;

}

int max_move(stateT state,int & bestMove)
{
    int v = -10000;
    if(GameIsOver(state))
    {
        return EvaluateStaticPosition(state);

    }

    vector<moveT> moveList;
    GenerateMoveList(state, moveList);
    int nMoves = moveList.size();

    for(int i = 0 ; i < nMoves ; i++)
    {
        moveT move = moveList[i];
        MakeMove(state, move);

        int curValue = min_move(state,bestMove);

            if(curValue > v)
            {
              v = curValue;
              bestMove = move;
            }
        RetractMove(state, move);

    }

    return v;

}

int min_move(stateT state, int &bestMove)
{
    int v = 10000;
    if(GameIsOver(state))
    {
      return EvaluateStaticPosition(state);

    }
    vector<moveT> moveList;
    GenerateMoveList(state, moveList);

    int nMoves = moveList.size();

    for(int i = 0 ; i < nMoves; i++)
    {
        moveT move = moveList[i];
        MakeMove(state, move);

        int curValue = max_move(state,depth+1,bestMove);

            if(curValue < v)
            {
              curValue = v;
            }
        RetractMove(state, move);

    }
    return v;
} 
```

PS：还有其他伪代码可以找到 minmax 值。但是，他们只专注于井字游戏，我正在尝试将其扩展到其他游戏。谢谢。

更新：整个代码可以在这里找到：http: [//ideone.com/XPswCl](http://ideone.com/XPswCl)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T14:34:20.553

在极小极大的最简单版本中，第一个玩家希望最大化他的分数，而第二个玩家希望最小化第一个玩家的分数。由于第一个和第二个玩家都只关心第一个玩家的分数，`EvaluateStaticPosition`因此应该返回一个值，指示第一个玩家的棋盘状态有多好。轮到谁不重要。

```
int EvaluateStaticPosition(stateT state)
{
        if(CheckForWin(state, FIRST_PLAYER))
        {
                return WINNING_POSITION;
        } 
        if(CheckForWin(state, Opponent(FIRST_PLAYER)))
        {
                return LOSING_POSITION;
        } 
        return NEUTRAL_POSITION;
} 
```

现在，当您想要最适合第一个玩家的移动时，请调用 MaxMove。当您想要最适合第二名玩家的移动时，请调用 MinMove。

```
moveT MiniMax(stateT state)
{
    moveT bestMove;
    int i = 0;
    if (state.whoseTurn == FIRST_PLAYER){
        i = MaxMove(state, bestMove);
    }
    else{
        i = MinMove(state,bestMove);
    }
    cout<<"i is "<<i<<endl;
    return bestMove;
} 
```

`MinMove`最后，你在and内部有一些问题`MaxMove`。当您分配`curRating`其中任何一个时，您不应将`bestMove`其作为第二个参数传递给`MaxMove`or `MinMove`。然后它将*对手的*最佳移动放入`bestMove`，这是没有意义的。相反，声明一个`opponentsBestMove`对象并将其作为第二个参数传递。（您实际上不会使用该对象，甚至不会在之后查看它的值，但这没关系）。通过该更改，您永远不会为`bestMove`within分配任何内容`MinMove`，因此您应该在`if(curRating < v)`块内执行此操作。

```
int MaxMove(stateT state, moveT &bestMove)
{
        if(GameIsOver(state))
        {
            return EvaluateStaticPosition(state);
        }
        vector<moveT> moveList;
        GenerateMoveList(state, moveList);
        int nMoves = moveList.size();
        int v = -1000;
        for(int i = 0 ;i<nMoves; i++)
        {
                moveT move = moveList[i];
                MakeMove(state, move);
                moveT opponentsBestMove;
                int curRating = MinMove(state, opponentsBestMove);
                if (curRating > v)
                {
                        v = curRating;
                        bestMove = move;
                }
                RetractMove(state, move);
        }
        return v;

}
int MinMove(stateT state,  moveT &bestMove)
{
        if(GameIsOver(state))
        {
                return EvaluateStaticPosition(state);
        }
        vector<moveT>moveList;
        GenerateMoveList(state, moveList);
        int nMoves = moveList.size();
        int v = 1000;
        for(int i = 0 ; i<nMoves; i++)
        {
                moveT move = moveList[i];
                MakeMove(state , move);
                moveT opponentsBestMove;
                int curRating = MaxMove(state,opponentsBestMove);
                if(curRating < v)
                {
                        v = curRating;
                        bestMove = move;
                }
                RetractMove(state, move);
        }
        return v;
} 
```

在这一点上，你应该有一个无与伦比的 AI！

```
The final position looks like this:

 O | O | X
---+---+---
 X | X | O
---+---+---
 O | X | X

Cat's game. 
```

* * *

**另一种方法**利用井字游戏是零和游戏这一事实。换句话说，在游戏结束时，玩家的得分总和将为零。对于两人游戏，这意味着一个玩家的分数将永远是另一个玩家的负数。这对我们来说很方便，因为最小化其他玩家的分数与最大化自己的分数是相同的。因此，我们可以让两个玩家都尝试最大化自己的分数，而不是让一个玩家最大化他的分数，而一个玩家最小化另一个玩家的分数。

改`EvaluateStaticPosition`回其原始形式，以便根据当前玩家的棋盘状态的好坏给出分数。

```
int EvaluateStaticPosition(stateT state)
{
        if(CheckForWin(state, state.whoseTurn))
        {
                return WINNING_POSITION;
        }
        if(CheckForWin(state, Opponent(state.whoseTurn)))
        {
                return LOSING_POSITION;
        }
        return NEUTRAL_POSITION;
} 
```

删除`MinMove`，因为我们只关心最大化。重写`MaxMove`，以便它选择给对手最差分数的移动。最好棋的得分是其他玩家最差得分的负数。

```
int MaxMove(stateT state, moveT &bestMove)
{
        if(GameIsOver(state))
        {
                return EvaluateStaticPosition(state);
        }
        vector<moveT> moveList;
        GenerateMoveList(state, moveList);
        int nMoves = moveList.size();
        int v = -1000;
        for(int i = 0 ;i<nMoves; i++)
        {
                moveT move = moveList[i];
                MakeMove(state, move);
                moveT opponentsBestMove;
                int curRating = -MaxMove(state, opponentsBestMove);
                if (curRating > v)
                {
                        v = curRating;
                        bestMove = move;
                }
                RetractMove(state, move);
        }
        return v;

} 
```

由于`MaxMove`用于两个玩家，我们不再需要在`MiniMax`函数中区分玩家。

```
moveT MiniMax(stateT state)
{
    moveT bestMove;
    int i = 0;
    i = MaxMove(state, bestMove);
    cout<<"i is "<<i<<endl;
    return bestMove;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T05:46:09.960

好吧，它看起来`MiniMax`为你正确地选择了它，只需用初始状态和深度调用它。（除非根据状态的第一个玩家是第二个玩家，那么你应该在 MiniMax 中调用 min_move。）

编辑：是的，我忽略了一些东西，bestMove 目前没有多大意义。在 max_move 中的程序中，您可以像这样更改循环：

```
for(int i = 0 ; i < nMoves ; i++)
{
    moveT move = moveList[i];
    MakeMove(state, move);

    int new_value = min_move(state, depth+1);
    if(new_value > v)
    {
      v=new_value;
    }
    RetractMove(state, move);

} 
```

在那之后你可以想想你bestMove是什么意思？我的想法是，您有兴趣找到井字游戏的“最佳”系列动作之一。为此，您需要一个 vector 甚至更好的[stack](http://www.cplusplus.com/reference/stl/stack/)。但这也意味着将其`std::stack<int>* best_moves`作为最后一个参数。

对于堆栈实现，在 min_move 中，您返回下一个动作，如果它们的值是最好的，您将把您推到堆栈`move`顶部。`best_moves`当然，在游戏结束时，您只需返回空堆栈即可。它需要一个面向对象的方法来正确地完成它，我会在有时间的时候做。

**如果您只需要最好的下一步行动**，那么我建议您将 min_move 和 max_moe 的返回类型更改为如下结构：

```
struct Value_move{
  int value;
  moveT best_move;
}; 
```

那么 max_move 的新实现如下所示：

```
const int MOVE_INVALID = -12345;
const int MOVE_NOTHING = -12346;

Value_move max_move(stateT state, int depth)
{
    Value_move best;
    best.value = -10000; best.best_move = MOVE_INVALID;

    if(GameIsOver(state))
    {
        best.value = EvaluateStaticPosition(state);
        best.best_move = MOVE_NOTHING;
        return best;
    }

    vector<moveT> moveList;
    GenerateMoveList(state, moveList);
    int nMoves = moveList.size();

    for(int i = 0 ; i < nMoves ; i++)
    {
        moveT move = moveList[i];
        MakeMove(state, move);
        Value_move curr = min_move(state, depth+1);
        if(curr.value > best.value)
        {
            best.value = curr.value;
            best.best_move = move;
        }
        RetractMove(state, move);

    }

    return v;

} 
```

您只需要在 MiniMax 函数的返回结构中提取 best_move 字段。

备注：
您必须承认，尽管这在许多方面都不像 c++ 程序，但更像是 ac 程序。否则，CapitalCamelCase 中的所有函数都应该是类方法，你应该通过 (const) ref 而不是 value 传递状态——但只有当状态真的是 typedef 后面的指针时，整个代码才有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:42:46.553

您的代码找到了正确的值，然后通过向下传递相同的引用来覆盖它。

```
int curValue = min_move(state,bestMove); 
```

应该成为

```
moveT nextMove; // No need to actually do anything with this value
int curValue = min_move(state,nextMove); 
```

您还需要在 min_move 函数中进行相同类型的更改。

注意：在`min_move`您的代码调用`max_move`中，参数比您为函数定义的要多。

# wpf - WPF 图像性能

> ID：13523055
> 
> 赞同：0
> 
> 时间：2012-11-23T04:21:28.477
> 
> 标签：wpf, performance, image

我有 2 个图像控件。一种以缩略图分辨率 (70x90) 显示图像，另一种以原始/源分辨率显示图像。缩略图图像从原始分辨率调整大小而不考虑纵横比。

我的问题是哪一个能产生更好的性能？

每个图像控件使用 2 个图像文件（相同图像，不同分辨率）

**XAML**

```
<Image Name="Img_Thumb"/>
<Image Name="Img_Original"/> 
```

**代码背后**

```
BitmapImage bmp_thumb = new BitmapImage();
bmp_thumb.BeginInit();
bmp_thumb.CacheOption = BitmapCacheOption.OnLoad;
bmp_thumb.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
bmp_thumb.UriSource = new Uri(thumbnails_directory);
bmp_thumb.EndInit();
Img_Thumb.Source = bmp_thumb;
Img_Thumb.Width = bmp_thumb.PixelWidth;
Img_Thumb.Height = bmp_thumb.PixelHeight;

bmp_ori = new BitmapImage();
bmp_ori.BeginInit();
bmp_ori.CacheOption = BitmapCacheOption.OnLoad;
bmp_ori.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
bmp_ori.UriSource = new Uri(original_image_directory);
bmp_ori.EndInit();
Img_Original.Source = bmp_ori;
Img_Original.Width = bmp_ori.PixelWidth;
Img_Original.Height = bmp_ori.PixelHeight; 
```

或者只使用 1 个图像文件（大的）并将其加载到 2 个具有自定义分辨率的不同图像控件。

**XAML**

```
<Image Name="Img_Thumb" width="70" height="90"/>
<Image Name="Img_Original"/> 
```

**代码背后**

```
BitmapImage bmp_thumb = new BitmapImage();
bmp_thumb.BeginInit();
bmp_thumb.CacheOption = BitmapCacheOption.OnLoad;
bmp_thumb.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
bmp_thumb.UriSource = new Uri(original_image_directory);
bmp_thumb.EndInit();
Img_Thumb.Source = bmp_thumb;

bmp_ori = new BitmapImage();
bmp_ori.BeginInit();
bmp_ori.CacheOption = BitmapCacheOption.OnLoad;
bmp_ori.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
bmp_ori.UriSource = new Uri(original_image_directory);
bmp_ori.EndInit();
Img_Original.Source = bmp_ori;
Img_Original.Width = bmp_ori.PixelWidth;
Img_Original.Height = bmp_ori.PixelHeight; 
```

# java - 抽象类实例化内部类

> ID：13523056
> 
> 赞同：2
> 
> 时间：2012-11-23T04:21:30.110
> 
> 标签：java, static, instance, instantiation, abstract

我有一个带有非静态非抽象内部类的抽象类，我必须从静态方法实例化它。如何才能做到这一点？

这基本上是我想要做的：

```
abstract class Program
{
    private static Window window;

    public static void main(String[] args)
    {
        Program program = new Program();
        window = program.new Window();
    }

    abstract void Update();

    class Window
    {
        public Window()
        {
            //some code
        }

        public void someMethod()
        {
            Update();
        }
    }
} 
```

我知道你不能实例化一个抽象类，你不能从一个没有外部类实例的静态方法实例化内部类，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:41:03.347

您可以做的只是创建一个扩展抽象类的类，然后在该类中实例化您的内部类，如下所示：

```
public class TestProgram extends Program
 {

  public static void main(String[] args)
   {
    Program program = new TestProgram();
    Window window = program.new Window();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:34:01.437

最简单的答案似乎是创建一个 Program 的实现，您可以使用它来实例化 Window 对象。

更一般地说，我认为你的悖论就是你的答案。您正在尝试设计一些在语言限制内不起作用的东西，您将不得不放弃 Program 的抽象性质或使 Window 成为您可以在 Program 之外创建的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:35:02.780

为什么你的 main 方法在里面`abstract class`？

这里更大的问题是设计。让那个 Window 类成为内部类有什么意义？如果您想从抽象类中实例化该对象，只需将 Window 设为自己的顶级类。

它似乎没有从它的包含类访问任何东西，那么为什么它是一个内部类呢？

# c# - 通过表单 POST 发送 base64 数据图像

> ID：13523058
> 
> 赞同：2
> 
> 时间：2012-11-23T04:21:36.263
> 
> 标签：c#, asp.net, .net, asp.net-mvc, base64

我有两张（有点）形式的图像：

```
<img src="data: base64, OIJQWEFOIJQWEFOIJQWEF..." />
<img src="data: base64, OIJQWEFOIJQWEFOIJQWEF..." /> 
```

在这件事上我别无选择，这些图像总是会被设置为 base64 数据。

如果我要使用一些客户端魔法来发布这些内容，我怎样才能将字符串转换为实际图像？

```
public ActionResult Combine(string imageA, string imageB)
{
    // imageA and imageB would be the strings.
    return View();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:24:48.610

使用[`Convert.FromBase64String`](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)方法。
这种方法：

> 将指定的字符串（将二进制数据编码为 base-64 位）转换为等效的 8 位无符号整数数组。

然后您可以使用程序集中的`WebImage`类`System.Web.Helpers.dll`将字节数组转换为实际图像并对其执行一些操作。

# html - 如何更改时间格式（12/24 小时）?

> ID：13523060
> 
> 赞同：85
> 
> 时间：2012-11-23T04:21:43.247
> 
> 标签：html

我将 HTML5 输入元素与`type=time`. 问题是它显示时间，`12 hours`但我希望它在`24 hours`一天内显示。我怎样才能做到24小时？

这是我的输入字段：

```
<input type="time" name="time" placeholder="hrs:mins" pattern="^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$" class="inputs time" required>
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-23T04:54:33.283

### HTML5 时间输入

这是最简单的日期/时间相关类型，允许用户选择 24/12 小时制的时间，通常取决于用户的操作系统区域设置。返回的值采用 24 小时`hours:minutes`格式，类似于`14:30`.

更多细节，包括每个浏览器的外观，可以在[MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/time)上找到。

```
<input type="time" name="time">
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-23T08:11:32.290

通过 HTML5 草案，[`input type=time`](http://www.w3.org/TR/html5/states-of-the-type-attribute.html#time-state-%28type=time%29)为一天中的时间输入创建了一个控件，预计将使用“用户的首选演示文稿”来实现。但这实际上意味着使用时间表示遵循*浏览器区域设置*规则的小部件。因此，与周围内容的语言无关，呈现方式因浏览器的语言、底层操作系统的语言或系统范围的区域设置（取决于浏览器）而异。例如，使用芬兰语版本的 Chrome，我认为该小部件使用标准 24 小时制。您的里程会有所不同。

因此，`input type=time`基于本地化的想法，它完全脱离了页面作者的控制。这是故意的；这个问题已经在 HTML5 讨论中多次提出，结果相同：没有变化。（除非可能在文本中添加了说明，使此行为按预期进行描述。）

注意`pattern`和`placeholder`属性是不允许的`input type=time`。而且`placeholder="hrs:mins"`，如果它被实施，可能会产生误导。当浏览器区域设置使用“.”时，用户很可能必须输入 12.30（带句点）而不是 12:30。有时作为分隔符。

我的结论是，您应该使用`input type=text`,`pattern`属性和一些 JavaScript 来检查本地不支持该`pattern`属性的浏览器上的输入是否正确。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-14T04:16:01.990

它取决于您的语言环境系统时间设置，设为 24 小时，然后它会显示 24 小时时间。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-09-14T01:01:12.280

*这取决于启动 Web 浏览器时*用户操作系统的时间格式。

所以：

*   如果您的计算机系统偏好设置为使用 24 小时制，浏览器会将`<input type="time">`元素呈现为`--:--`（时间范围：00:00–23:59）。
*   如果您将计算机的系统偏好更改为使用 12 小时，则在您退出并重新启动浏览器之前，输出不会改变。然后它将更改为`--:-- --`（时间范围：12:00 AM - 11:59 PM）。

而且（在撰写本文时），浏览器支持率仅为 75% 左右（[caniuse](http://caniuse.com/#feat=input-datetime)）。耶：Edge、Chrome、Opera、Android。嘘：IE、Firefox、Safari）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-04-21T02:25:45.000

如果你能够/愿意使用我写的这个 Timepicker 的一个小组件——https: [//github.com/jonataswalker/timepicker.js——](https://github.com/jonataswalker/timepicker.js)来满足我自己的需要。

用法是这样的：

```
var timepicker = new TimePicker('time', {
  lang: 'en',
  theme: 'dark'
});

var input = document.getElementById('time');

timepicker.on('change', function(evt) {

  var value = (evt.hour || '00') + ':' + (evt.minute || '00');
  evt.element.value = value;

});
```

```
body {
  font: 1.2em/1.3 sans-serif;
  color: #222;
  font-weight: 400;
  padding: 5px;
  margin: 0;
  background: linear-gradient(#efefef, #999) fixed;
}
input {
  padding: 5px 0;
  font-size: 1.5em;
  font-family: inherit;
  width: 100px;
}
```

```
<script src="http://cdn.jsdelivr.net/timepicker.js/latest/timepicker.min.js"></script>
<link href="http://cdn.jsdelivr.net/timepicker.js/latest/timepicker.min.css" rel="stylesheet"/>

<div>
  <input type="text" id="time" placeholder="Time">
</div>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-23T05:02:50.240

这种类型的支持仍然很差。Opera 以您想要的方式显示它。Chrome 23 以秒和 AM/PM 显示它，在 24 版本（此时为开发分支）中，它将消除秒（如果可能），但没有关于 AM/PM 的信息。
这不是您可能想要的，但在这一点上，我看到实现您的时间选择器格式的唯一选择是使用 javascript。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-16T14:24:03.007

HTML 仅提供`input type="time"`如果您使用的是引导程序，那么您可以使用 timepicker。您可以从这个 URL [http://jdewit.github.io/bootstrap-timepicker](http://jdewit.github.io/bootstrap-timepicker)获取代码 可能会对您有所帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-04T21:12:25.543

即使您看到 HH:MM AM/PM 格式的时间，在后端它仍然以 24 小时格式工作，您可以尝试使用一些基本的 javascript 来查看。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-16T23:32:35.663

我知道这个问题已经回答了很多次，我只是向可能对 jquery Plugin 感兴趣的人提出建议：

[https://github.com/fenix92/clickClock](https://github.com/fenix92/clickClock)

非常基本，清晰和直观。

（演示：[http](http://www.clamart-natation.com/clickclock/) ://www.clamart-natation.com/clickclock/ ）

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-11-12T11:47:23.790

你可以试试这个 html 方面

```
<label for="appointment-time">Choose Time</label>
<input class="form-control" type="time" ng-model="time" ng-change="ChangeTime()" />
<label class="form-control" >{{displayTime}}</label> 
```

JavaScript 端

```
function addMinutes(time/*"hh:mm"*/, minsToAdd/*"N"*/) 
{
        function z(n)
        {
           return (n<10? '0':'') + n;
        }
        var bits = time.split(':');
        var mins = bits[0]*60 + (+bits[1]) + (+minsToAdd);
        return z(mins%(24*60)/60 | 0) + ':' + z(mins%60); 
 }  

 $scope.ChangeTime=function()
 {
      var d = new Date($scope.time);
      var hours=d.getHours();
      var minutes=Math.round(d.getMinutes());
      var ampm = hours >= 12 ? 'PM' : 'AM';
      var Time=hours+':'+minutes;
      var DisplayTime=addMinutes(Time, duration);
      $scope.displayTime=Time+' - '+DisplayTime +' '+ampm;
 } 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2019-04-11T13:41:41.397

简单的 HTML 技巧来得到这个：

```
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet"/>
<div class="row" >

                        <div class="col-md-6">
                             <div class="row">
                                <div class="col-md-4" >
                                       <label for="hours">Hours</label>
          <select class="form-control" required>
                <option>  </option>
                <option value="1"> 1 </option>
                <option value="2"> 2 </option>
                <option value="3"> 3 </option>
                <option value="4"> 4 </option>
                <option value="5"> 5 </option>
                <option value="6"> 6 </option>
                <option value="7"> 7 </option>
                <option value="8"> 8 </option>
                <option value="9"> 9 </option>
                <option value="10"> 10 </option>
                <option value="11"> 11 </option>
                <option value="12"> 12 </option>
              </select>
             </div>
                <div class="col-md-4" >
                      <label for="minutes">Minutes</label>
              <select class="form-control" required="">
                <option selected disabled>  </option>
                <option value="00"> 00 </option>
                <option value="10"> 10 </option>
                <option value="20"> 20 </option>
                <option value="30"> 30 </option>
                <option value="40"> 40 </option>
                <option value="50"> 50 </option>
              </select>
             </div>
                 <div class="col-md-4" >
                       <label for="hours">Select Meridiem</label>
              <select class="form-control" required="" >
                <option selected="" value="AM"> AM </option>
                <option value="PM"> PM </option>
              </select>
              </div>
             </div></div>
                    </div>
```

# ruby-on-rails - 为什么activerecord不断发送整个表？

> ID：13523065
> 
> 赞同：0
> 
> 时间：2012-11-23T04:22:14.733
> 
> 标签：ruby-on-rails, activerecord

这是我检索数据的声明

```
@week_activities = Activity.where(:weeknum => 1) 
```

这就是我展示它的方式

```
<%= @week_activities.each do |d| %>
<%= d.id %>, <%= d.week %>, <%= d.day %> <br/>
<% end %> 
```

它以我想要的方式显示我想要的东西

```
1, 1, Monday 
2, 1, Tuesday 
3, 1, Wednesday 
4, 1, Thurday 
5, 1, Friday 
6, 1, Saturday 
7, 1, Sunday 
```

然后由于我忽略的原因，它将整个表显示为数组

```
[#<Activity id: 1, jog: 0, pushups: 0, situps: 0, bicycl: 0, squats: 0, 
 lunges: 0, foodid: 0, ccalor: 0, bcalor: 0, user_id: nil, 
 created_at: "2012-11-23 03:12:54", updated_at: "2012-11-23 03:12:54", week: 1, 
 day: "Monday"> ... and so on. 
```

有什么原因，它显示了整个表格的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:23:49.470

你正在使用`=`你不应该使用的地方。

```
<% @week_activities.each do |d| %> 
```

# python - 矩阵之和，偶数或奇数

> ID：13523067
> 
> 赞同：1
> 
> 时间：2012-11-23T04:22:35.493
> 
> 标签：python

此函数接收表示为行列表的数字矩阵，其中每一行又是一个列表。假设它是一个方阵：所有行都具有相同的长度，并且每行中的行数与元素数一样多。还假设矩阵的维度至少为 2 x 2（即矩阵至少有 2 行，每行有 2 个元素） 该函数应返回一个包含与行数一样多的元素的列表。结果列表中的元素 i 应该具有第 i 行中的值的总和。

例如，如果矩阵是

```
1   2   3
10  20  30
100 200 300 
```

那么这个函数应该返回列表`[6,60,600]`

也就是说， `addValuesInAllRows( [ [1,2,3], [10,20,30], [100,200,300] ] )` 应该返回`[6,60,600]`

是不是很相似，但是您将如何单独总结列表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T04:25:26.247

```
matrix = [ [1,2,3], [10,20,30], [100,200,300] ]
print [sum(row) for row in zip(*matrix)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T04:26:51.690

**列总和**

```
>>> def addValuesInAllCols(arr):
      return [sum(x) for x in zip(*arr)]

>>> addValuesInAllCols( [ [1,2,3], [10,20,30], [100,200,300] ] )
[111, 222, 333] 
```

**行总和**

```
>>> map(sum, [ [1,2,3], [10,20,30], [100,200,300] ] )
[6, 60, 600] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:33:04.960

另一种选择：

```
from operator import itemgetter

matrix = [ [1,2,3], [10,20,30], [100,200,300] ]

def addValuesInAllCols(arr):
    return map(sum, [map(itemgetter(i), arr) for i in range(len(a))]) 
```

其中[map 是一个内置函数](http://docs.python.org/2/library/functions.html#map)，可以重写为一个简单的 for。例如：

`[map(itemgetter(i), arr) for i in range(len(a))]`是相同的：

```
result = []
for i in range(len(a)):
    tmp = []
    for row in a:
        tmp.append(row[i])
    result.append(tmp) 
```

根据新测试编辑：

```
def addValuesInAllCols(arr):
    return map(sum, arr) 
```

或没有地图：

```
def addValuesInAllCols(arr):
    return [sum(row) for row in arr] 
```

# .net - 在 .NET 中合并两个相同类型的对象

> ID：13523069
> 
> 赞同：1
> 
> 时间：2012-11-23T04:22:49.370
> 
> 标签：.net

.NET 中是否有直接的方法来比较两个相同类型的对象。

是否有类似 Compare(Object1, Object2) 的东西可以根据对象属性值的相等性返回一个布尔值？

我已阅读有关 IComparable 和 IComparer 接口的信息，但我正在查看所有属性的比较，而不仅仅是一两个。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:25:03.373

通常，您所描述的是 Equals() 方法合同的一部分，具体取决于相关类的细节。

每个相关的类都应该根据自己的语义实现 Equals。

正式地，根据 Microsoft 文章

[http://msdn.microsoft.com/en-us/library/vstudio/336aedhh(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/336aedhh(v=vs.100).aspx)

合同是：

x.Equals(x) 返回真。

x.Equals(y) 返回与 y.Equals(x) 相同的值。

(x.Equals(y) && y.Equals(z)) 当且仅当 x.Equals(z) 返回 true 时才返回 true。

只要 x 和 y 引用的对象没有被修改，对 x.Equals(y) 的连续调用就会返回相同的值。

x.Equals(null) 返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:29:28.033

如果我还可以扩展您可以覆盖特定类的 == 和 != 运算符。我通常会覆盖所有 3 个（等于和 2 运算符），这样我就可以使用单元测试来做类似的事情

```
CustomClass customClass1 = new CustomClass("Robert");
CustomClass customClass2 = new CustomClass("Robert");

Assert.IsTrue(customClass1 == customClass2);
Assert.AreEqual(customClass1, customClass2); 
```

如果您问我，可以方便地提供所有选项。

# python - Python 复杂的字典键

> ID：13523070
> 
> 赞同：24
> 
> 时间：2012-11-23T04:23:01.427
> 
> 标签：python, dictionary, key

我的问题与字典键有关。我想为任何单个对象设置一个包含 3 个键的字典。键必须按顺序排列，并且可以具有广泛的值。例如，

```
dictionary = {(key1,key2,key3) : object} 
```

key1 可以是 1 到 10 之间的任何值 key2 可以是 11 到 20 之间的任何值 key3 可以是 21 到 30 之间的任何值

放置键的顺序很重要。

更具体地说，我的键对应于 x,y,z 笛卡尔坐标的范围，其中许多对象都在其中浮动。我希望能够根据对象的 x,y,z 位置对对象的相对位置进行排序。

有什么方法可以设置它还是我必须采取不同的方法？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T04:26:30.453

当然可以，也可以为此创建单个字符串键 - 只需为您的键合并字符串结果，例如 ','.join([k1,k2,k3])

[阅读有关词典的更多信息。](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)

> 字典由键索引，键可以是任何不可变类型；字符串和数字总是可以作为键。如果元组仅包含字符串、数字或元组，则元组可以用作键；如果元组直接或间接包含任何可变对象，则不能将其用作键。您不能将列表用作键，因为可以使用索引分配、切片分配或 append() 和 extend() 等方法就地修改列表。

因此，您尝试将元组用作键，这没关系。

请注意，python 中的字典没有排序。您可以为此使用 collections.OrderedDict。此外，要构建正确的排序，请使用带有指定参数键的[排序/排序函数来按照您想要的方式排序。](http://docs.python.org/2/library/functions.html#sorted)

编辑样本：

```
from itertools import product
myDict = {}
for x,y,z in product(range(10), range(10,20), range(20,30)):
    myDict[(x,y,z)] = sum([x,y,z]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T04:46:30.353

希望你会发现这很有用。

```
>>> from math import sqrt
>>> def dist(p1, p2):
...     x1, y1, z1 = p1
...     x2, y2, z2 = p2
...     xd = x1 - x2
...     yd = y1 - y2
...     zd = z1 - z2
...     return sqrt((xd ** 2 + yd ** 2 + zd ** 2))
>>> myPoint = (0,0,0)
>>> class MyObject: pass
>>> myDict = {(1,2,3):MyObject(), (4,5,6):MyObject()}
>>> sorted([dist(myPoint, point) for point in myDict])
10: [3.7416573867739413, 8.774964387392123] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T05:02:49.273

在我看来，您想要一个从键（有序三元组）到值（对象）的映射的可能无序集合。如果是这种情况，很容易从有序三元组中创建复合键：

假设`obj0`在 x,y,z 坐标处`(10,20,30)`并且`obj1`在 x,y,z 坐标处`(11,21,31)`。然后：

```
myObjects = {(10,20,30): obj0,
             (11,21,31): obj1
            } 
```

这是因为`tuple`s 和`int`s 都是不可变类型

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-03T15:45:12.560

我解决了这样做：

```
list = [
         [1,'a','school'],
         [2,'b','church'],
         [3,'c','library'],
         [4,'d','station']
    ]
dic_key = {}
for i in list:
   if (i[0],i[1]) not in dic_key:
      dic_key[i[0],i[1]] = []
   dic_key[i[0],i[1]].append(i[2])

print(dic_key) 
```

输出：{(1, 'a'): ['school'], (2, 'b'): ['church'], (3, 'c'): ['library'], (4, 'd '）： ['车站']}

# wpf - Visual Studio 2010 无法将控件从工具箱拖放到 wpf 窗口

> ID：13523071
> 
> 赞同：0
> 
> 时间：2012-11-23T04:23:07.217
> 
> 标签：wpf, visual-studio-2010

我知道这是一个愚蠢的问题，但我真的不知道发生了什么。
我只想创建一个 hello world WPF 应用程序。我想要的只是在主窗口上放置一个标签和一个文本框。
请参阅屏幕截图。
- 我拖放标签（好的，没问题）
- 我拖放文本框（哦，天哪，快疯了），当我放下文本框时，窗口只是“灰色”，无法添加文本框。 ![哦是的，它有一个标签，非常好](../Images/ebb54584781e532ab92735dd2baba9dd.png) ![无法添加文本框](../Images/b8e8f306b7d46b8df2bff6bd6249d859.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:17:25.027

WPF 布局使用 Xaml。你需要稍微改变一下设计者的思维，本质上更像是 HTML 和相对定位，而不是依赖于绝对定位的 Winforms。

首先阅读容器，例如`DockPanel`、`StackPanel`和`Grid`。从这里您可以定义控件的布局方式，然后定位控件。

您所看到的是标签占据了表单的整个控制区域（通常用于 Grid 或其他容器），当您尝试拖动文本框时，它试图将其放入标签内。（不允许。）

# python - 如何覆盖夹层文件？

> ID：13523072
> 
> 赞同：2
> 
> 时间：2012-11-23T04:23:14.903
> 
> 标签：python, django, mezzanine

我正在使用 Mezzanine + 墨盒并希望对其进行自定义。

我可以通过将模板放在我们的项目模板文件夹中来覆盖它们。

但我不知道如何覆盖视图和模型。因为我必须为我的项目编辑一些额外的功能。

例如 .. 在注册时保存 cookie，我通过编辑根文件来做到这一点。但是有人可以告诉我如何在我的项目中覆盖这些特定的功能。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:07:29.437

您可以通过两种主要方式来处理对 3rd 方应用程序的修改。

如果您想要的某些部分与 3rd 方应用程序提供的有很大不同，您可以考虑分叉项目，进行更改并将更改推送到其 git 存储库，然后通过重新安装您的分叉版本

```
pip install -e git+git://github.com/YourUsername/forked-django-app.git#egg=forked-django-app 
```

如果您认为这可能太麻烦，另一种方法是在您自己的项目的 urls.py 中声明一个特定的 url/view 函数（在 3rd 方应用程序中定义）。

在您的情况下，您要重新映射的是`mezzanine.accounts.urls`. 参考 - [https://github.com/stephenmcd/mezzanine/blob/master/mezzanine/accounts/urls.py](https://github.com/stephenmcd/mezzanine/blob/master/mezzanine/accounts/urls.py)

因此，您基本上可以在自己的项目的 urls.py 中声明要覆盖的 url，它将优先于 mezzanine 声明的 url，您可以将其指向您的自定义视图函数。

如果你真的需要修改一个夹层`models.py`，我建议你走上面提到的分叉路线。

# javascript - 我有一个 contentEditable=“true” 的 div，需要为输入的数字着色

> ID：13523077
> 
> 赞同：0
> 
> 时间：2012-11-23T04:23:57.430
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [我有一个 contentEditable=“true” 的 div，需要为输入的数字着色](https://stackoverflow.com/questions/13518512/i-have-a-div-with-contenteditable-true-and-need-to-color-the-numbers-entered)

这是我的代码，可以很好地为可编辑 div 中的数字着色，但光标将移到 div 的开头，当我按下键盘箭头按钮遍历字符串时，它应该可以正常工作，当我点击“home”和“结束”按钮，光标应该按预期移动......

```
jQuery(document).ready(function(){

   $("#richTextField").keyup(function() {

      var divContent = $(this).text();
      var pattern = /(\d)/g;
      var replaceWith = '<span class="numberClass"'+ '>$1</span>';
      var highlighted = divContent.replace(pattern,replaceWith);

      $(this).html(highlighted);

   });

}); 
```

# google-app-engine - 通过 App Engine 管理 Google Drive 文件

> ID：13523078
> 
> 赞同：3
> 
> 时间：2012-11-23T04:23:59.880
> 
> 标签：google-app-engine, google-drive-api

我正在使用应用引擎构建一个 Web 应用程序。在这个应用程序中，用户可以提交有关其任务的文本并上传/下载（从/到他们的本地计算机）相关文件。

我想使用 Drive SDK 改进上传/下载功能。因此，用户将能够通过应用引擎打开和编辑提交的文件。

有人知道我必须做些什么来集成这两种方法（应用程序引擎 + 驱动 sdk）并通过我的网络应用程序打开/编辑文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T07:47:19.580

Google Drive SDK 文档包含完整的示例应用程序和教程，适用于在与 Drive 集成的 App Engine 上运行的 Java 和 Python 应用程序：

[https://developers.google.com/drive/v3/web/quickstart/java](https://developers.google.com/drive/v3/web/quickstart/java)

[https://developers.google.com/drive/v3/web/quickstart/python](https://developers.google.com/drive/v3/web/quickstart/python)

# java - 我在android中的按钮有什么问题使应用程序停止工作

> ID：13523083
> 
> 赞同：0
> 
> 时间：2012-11-23T04:24:27.537
> 
> 标签：java, android

`portText`to`CONTEXT(this)`包含一些错误。因此，如果我评论它并且应用程序运行正确但界面中没有显示按钮。怎么了？

```
 private static Context CONTEXT;
    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
      /*portText = (TextView)this.findViewById(R.id.portText);
       ipText=(TextView)this.findViewById(R.id.ipText);
       goBut=(ImageButton)this.findViewById(R.id.goBut);
       forBut=(ImageButton)this.findViewById(R.id.forBut);
       backBut=(ImageButton)this.findViewById(R.id.backBut);
       leftBut=(ImageButton)this.findViewById(R.id.leftBut);
       rightBut=(ImageButton)this.findViewById(R.id.rightBut);
       kickBut=(ImageButton)this.findViewById(R.id.kickBut);
       goBut.setOnClickListener(this);
       forBut.setOnClickListener(this);
       backBut.setOnClickListener(this);
       leftBut.setOnClickListener(this);
       rightBut.setOnClickListener(this);
       accText.setText("AccelerometerStatus ");
       CONTEXT(this); */

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:31:15.020

在代码中

```
accText.setText("AccelerometerStatus "); 
```

accText 在哪里初始化？如果不是，则为空

# ios - ios 上的自定义控件（条目内的示例）

> ID：13523094
> 
> 赞同：1
> 
> 时间：2012-11-23T04:25:37.590
> 
> 标签：ios, user-interface, custom-controls

我有一个问题可能是因为我是 ios 开发的新手。我需要构建一个与此应用程序非常相似的控件：[https ://itunes.apple.com/us/app/erudio-student-organizer-for/id515879580?mt=8](https://itunes.apple.com/us/app/erudio-student-organizer-for/id515879580?mt=8)

有一些本机控件可以获取与第一张和第二张图像类似的界面吗？

如果我可以用一些原生的控制得到类似的结果，什么是最理想的或最理想的？

如果原生控件不能做我需要的结果，定制是不是很困难？使用 Quartz Core 就足够了吗，还是需要 openGL-ES？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:20:04.787

可能最适合您的本机控件是`UITableViewController`管理表格视图的控件。要完成您给出的界面示例的外观，需要对表格视图及其单元格进行大量自定义。前两个屏幕截图中说明了两种主要样式，分组样式和普通样式。您可能会发现 Quartz Core 中的例程很有帮助。据我所知，没有必要使用 OpenGL ES。

# javascript - magento 通过复选框将多个产品从愿望清单添加到购物车

> ID：13523095
> 
> 赞同：1
> 
> 时间：2012-11-23T04:26:17.083
> 
> 标签：javascript, magento, cart

**场景：**
想要通过复选框将多个产品从愿望清单添加到购物车，以便将所选产品及其数量转移到购物车，并将所选项目从愿望清单表中删除。
参考了很多博客。
我试图通过（应用）添加相关产品javascript（逻辑）来实现它。
但仍然没有得到。

**[更新]**

这是复选框列（时间是硬代码）

```
<input type="checkbox" class="checkbox related-checkbox" id="related-checkbox7" name="related_products[]" value="7"> 
```

为此部分添加了 Javascript：

```
<script type="text/javascript">
    //<![CDATA[
    $$('.related-checkbox').each(function(elem){
        Event.observe(elem, 'click', addRelatedToProduct)
    });

    var relatedProductsCheckFlag = false;
    function selectAllRelated(txt){
        if (relatedProductsCheckFlag == false) {
            $$('.related-checkbox').each(function(elem){
                elem.checked = true;
            });
            relatedProductsCheckFlag = true;
            txt.innerHTML="unselect all";
        } else {
            $$('.related-checkbox').each(function(elem){
                elem.checked = false;
            });
            relatedProductsCheckFlag = false;
            txt.innerHTML="select all";
        }
        addRelatedToProduct();
    }

    function addRelatedToProduct(){
        var checkboxes = $$('.related-checkbox');
        var values = [];
        for(var i=0;i<checkboxes.length;i++){
            if(checkboxes[i].checked) values.push(checkboxes[i].value);
        }
        if($('related-products-field')){
            $('related-products-field').value = values.join(',');
        }
    }
    //]]>
    </script> 
```

**添加到购物车**
`<button type="button" title="Add to Cart" class="button btn-cart" onclick="productAddToCartForm.submit(this)"><span><span>Add to Cart</span></span></button>`

这部分的javascript：

```
<script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                // Remove custom datetime validators
                for (var methodName in Validation.methods) {
                    if (methodName.match(/^validate-datetime-.*/i)) {
                        delete Validation.methods[methodName];
                    }
                }

                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:54:31.520

单击（全部添加到购物车）时，表单操作将转到本部分中的 /wishlist/update 部分。添加updatenew函数并添加以下代码

```
public function updatenewAction()
    {
            $post = $this->getRequest()->getPost();
            $product_id = $qtyarr=array();
            $product_id = $this->getRequest()->getPost('product123');
            $qtyarr = $this->getRequest()->getPost('qty');
            if($product_id)
            {
                $procol = Mage::getModel('catalog/product');                
                $cart = Mage::getModel('checkout/cart');
                foreach($product_id as $productid => $wishlistid)
                    {
                        $proid = $procol->load($productid);
                        $_product = $procol->load($productid);
                        $proname = $procol->getName();
                        $quantity = $qtyarr[$wishlistid] ;
                        $cart->init();
                        $cart->addProduct($productid,$quantity);
                        $cart->save();
                        Mage::getSingleton('core/session')->addSuccess($proname.' moved from Wishlist');

                        Mage::getModel('wishlist/item')->load($wishlistid)->delete();
                    }
                    return $this->_redirectUrl(Mage::helper('checkout/cart')->getCartUrl());
            }
        else
        {           
            Mage::getSingleton('core/session')->addError('No Product Selected');
            $this->_redirect('wishlist');
        }   

    } 
```

在上面的代码中，我们以编程方式将产品添加到购物车中，同时我们将其从愿望清单中删除。
首先进入`default/template/wishlist/item/column/image.phtml`

```
<input type="checkbox" class="checkbox related-checkbox" id="related-checkbox<?php echo $product->getId()?>" name="product123[<?php echo $product->getId() ?>]" value="<?php echo $item->getId() ?>" /> 
```

您可以相应地调整它。
现在在复选框部分通过 product_id 和 wishlist_id 以及 post 值中的产品数量（已经有 qty 字段）。
阿拉斯！！！

# vb.net - 从 pdf 生成器函数中分离冗余代码

> ID：13523099
> 
> 赞同：2
> 
> 时间：2012-11-23T04:26:35.463
> 
> 标签：vb.net, itextsharp

这是一个使用 itextsharp 库的 vb.net 应用程序。我遇到的是以下代码变得非常多余，在我看来这不是一种干净的做事方式。但我似乎无法弄清楚如何将它分离到一个单独的函数中，在该函数中我只需传入字符串 x_Cord、y_Cord、tilt 并让它要么 a) 在传递它时作为数组或b) 对需要它的每一行都执行此操作...然后该函数将返回 contentBytes 的必要信息...下面与我最终得到的高度冗余非常相似。

```
Dim cb As PdfContentByte = writer.DirectContent 
```

为了清楚起见，我将上述内容包括在内只是为了显示 cb 声明的内容。

```
cb.BeginText()
cb.SetFontAndSize(Californian, 36)
cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, "CERTIFICATE OF COMPLETION", 396, 397.91, 0)
cb.SetFontAndSize(Bold_Times, 22)
cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, name, 396, 322.35, 0)
cb.SetFontAndSize(Bold_Times, 16)
cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, _hours + " Hours", 297.05, 285.44, 0)
cb.SetFontAndSize(Bold_Times, 16)
cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, _dates, 494.95, 285.44, 0)
cb.SetFontAndSize(Bold_Times, 16)
cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, _class1, 396, 250.34, 0)
If Not String.IsNullOrWhiteSpace(_class2) Then
    cb.SetFontAndSize(Bold_Times, 16)
    cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, _class2, 396, 235.34, 0)
End If
cb.SetFontAndSize(Copper, 16)
cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, _conf_num + _prefix + " Annual Conference " + _dates, 396, 193.89, 0)
cb.SetFontAndSize(Bold_Times, 13)
cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, "Some Name", 396, 175.69, 0)
cb.SetFontAndSize(Bold_Times, 10)
cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, "Some Company Manager", 396, 162.64, 0)
cb.EndText() 
```

关于使其成为自己的功能的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:59:44.043

您正在“艰难地”添加内容。如果我是你，我会编写一个单独的类/工厂/方法来创建 a`Phrase`或 a`Paragraph`内容。例如：

```
protected Font f1 = new Font(Californian, 36);
protected Font f2 = new Font(Bold_times, 16);

public Phrase getCustomPhrase(String name, int hours, ...) {
  Phrase p = new Phrase();
  p.add(new Chunk("...", f1));
  p.add(new Chunk(name, f2);
  ...
  return p;
} 
```

然后我会使用 ColumnText 在正确的位置添加`Phrase`or `Paragraph`。在 a 的情况下`Phrase`，我会使用该`ColumnText.showTextAligned()`方法。在 的情况下`Paragraph`，我会使用这种结构：

```
ColumnText ct = new ColumnText(writer.DirectContent);
ct.setSimpleColumn(rectangle);
ct.addElement(getCustomParagraph(name, hours, ...));
ct.go(); 
```

前者（使用 a `Phrase`）是最好的，如果你只需要写一行不需要被包装，朝向你想要的任何方向。

如果要在特定矩形（由左下角和右上角的坐标定义）内添加文本，则后者（`Paragraph`在*复合模式下使用 a ）是最好的。*

您采用的方法有效，但是......它涉及几乎“手动”编写 PDF 语法。这更困难，因此更容易出错。你已经发现了，否则你不会问这个问题;-)

这是个好问题；我会赞成的。

# vbscript - 如何等待 shell 命令直到另一个命令完成

> ID：13523100
> 
> 赞同：4
> 
> 时间：2012-11-23T04:26:43.620
> 
> 标签：vbscript

我遇到了 vbscript 的问题。

大家好，

我有一个问题要等待 shell.run 完成。

如果我像下面那样运行 3 shell.run，我怎样才能让它们等到前面的命令完成？

```
srtCmd1 = "msiexec.exe /i c:\a.msi”
srtCmd2 = "msiexec.exe /i c:\b.msi”
srtCmd3 = "c:\c.bat”

objShell = CreateObject("WScript.Shell")
objShell.Run srtCmd1, 1, True
objShell.Run srtCmd2, 1, True
objShell.Run srtCmd3, 1, True 
```

但它们几乎同时运行。

我该如何解决。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:17:26.070

请参阅[等待 msiexec.exe 完成](http://blogs.msdn.com/b/heaths/archive/2005/11/15/493236.aspx "等待 msiexec.exe 完成")

在 msiexec.exe 之前添加“start /wait”（不带“）

尝试：

```
srtCmd1 = "start /wait msiexec.exe /i c:\a.msi”
srtCmd2 = "start /wait msiexec.exe /i c:\b.msi” 
```

# c - vs 2010 中的未定义标签错误

> ID：13523102
> 
> 赞同：0
> 
> 时间：2012-11-23T04:27:15.153
> 
> 标签：c

我正在使用 Vs 2010 并且我的应用程序在 C 中。我在一个函数中使用了 goto 来跳转到另一个函数中存在的 return 语句。我使用 goto 的函数在 label 存在的函数下方定义。标签定义和 goto 的顺序在 C 中是否重要。我收到错误“标签未定义”

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T04:34:08.860

goto 必须在定义标签的函数中是本地的。如果您想进行非本地跳转，您应该检查 setjmp/longjmp。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T04:34:35.223

正如[这个 Visual Studio 编译器错误的网页](http://msdn.microsoft.com/en-us/library/khfhbs6a%28v=vs.80%29.aspx)所说，“函数中不存在 goto 语句使用的标签。” 由于会导致局部变量定义的问题，您不能转到不同的函数。

# android - 使用phonegap/jquery设置一个按钮作为android设备中的默认后退按钮

> ID：13523104
> 
> 赞同：1
> 
> 时间：2012-11-23T04:27:30.903
> 
> 标签：android, cordova, button, back

我正在尝试使用此脚本在我的应用程序（html+css+js+jquery）上设置一个按钮，该按钮与 android 设备的默认按钮相同。

这是脚本：

```
 </script>
     <script type="text/javascript">
     $(document).ready(function(){
     $('a.back').click(function(){
         if(document.referrer.indexOf(window.location.hostname) != -1){
            parent.history.back();
            return false;
         }
      });
    });
 </script> 
```

然后我在使用脚本的代码中有类似的东西：

```
 <a class="back">
                <img src="back.png" id="back" style="width: 75%;"></a></div> 
```

这在互联网浏览器中运行良好，但在使用 PhoneGap 编译时不适用于 android 设备......

# javascript - 使用 V8 / node.js 创建一个空的 PixelArray

> ID：13523105
> 
> 赞同：4
> 
> 时间：2012-11-23T04:28:44.970
> 
> 标签：javascript, node.js, html5-canvas, v8

我希望能够制作一个空的 PixelArray 来与JavaScript 中[节点画布的输出进行比较。](https://github.com/LearnBoost/node-canvas)

例如：

```
var cleanData = new PixelArray ( 20 ); 
```

这可能吗？我是否使用了错误的 Node.js 版本？(0.8.3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:56:38.407

**Uint8ClampedArray**有效。

```
var cleanData = new Uint8ClampedArray( width * height * 4 ); 
```

一些背景：

[http://www.khronos.org/registry/typedarray/specs/latest/#7.1](http://www.khronos.org/registry/typedarray/specs/latest/#7.1)  定义了 Uint8ClampedArray 以替换 CanvasPixelArray。它的行为与其他类型化数组视图相同，除了设置器和构造器在转换传入数字值时使用钳位 [WEBIDL] 而不是模运算。

# cassandra - Cassandra 错误“./bin/nodetool decommission”

> ID：13523108
> 
> 赞同：1
> 
> 时间：2012-11-23T04:29:19.017
> 
> 标签：cassandra

我的 cassandra 集群的环正在跟随。

```
 Address         DC          Rack        Status State   Load            Effective-Ownership Token                                       
                                                                                           159798937583215624764598934804025953415     
172.16.228.113  datacenter1 rack1       Up     Normal  79.93 KB        37.41%              53308554391200048212055997923356692434      
172.16.228.111  datacenter1 rack1       Up     Normal  27.74 MB        7.20%               65566706948329075554413307447708030255      
172.16.228.112  datacenter1 rack1       Up     Normal  49.17 MB        55.38%              159798937583215624764598934804025953415 
```

由于维护，我想重新启动一个节点。所以我尝试执行“./bin/nodetool -h localhost decommission”。

几分钟过去后，我在“system.log”上收到以下错误消息。我没有得到“decommission”命令的响应，所以我用“CTRL + C”完成了这个过程。

```
ERROR [Thread-18] 2012-11-23 11:23:29,249 AbstractCassandraDaemon.java (line 135) Exception in thread Thread[Thread-18,5,main]
java.util.concurrent.RejectedExecutionException: ThreadPoolExecutor has shut down
    at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor$1.rejectedExecution(DebuggableThreadPoolExecutor.java:60)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:816)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1337)
    at org.apache.cassandra.net.MessagingService.receive(MessagingService.java:566)
    at org.apache.cassandra.net.IncomingTcpConnection.receiveMessage(IncomingTcpConnection.java:155)
    at org.apache.cassandra.net.IncomingTcpConnection.run(IncomingTcpConnection.java:113)
ERROR [Thread-5] 2012-11-23 11:23:29,251 AbstractCassandraDaemon.java (line 135) Exception in thread Thread[Thread-5,5,main]
java.util.concurrent.RejectedExecutionException: ThreadPoolExecutor has shut down
    at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor$1.rejectedExecution(DebuggableThreadPoolExecutor.java:60)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:816)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1337)
    at org.apache.cassandra.net.MessagingService.receive(MessagingService.java:566)
    at org.apache.cassandra.net.IncomingTcpConnection.receiveMessage(IncomingTcpConnection.java:155)
    at org.apache.cassandra.net.IncomingTcpConnection.run(IncomingTcpConnection.java:113) 
```

这个消息是什么意思，请给我解决方案。

# php - PHP启动mongo：无法初始化模块

> ID：13523109
> 
> 赞同：7
> 
> 时间：2012-11-23T04:29:19.307
> 
> 标签：php, mongodb, dll, installation, xampp

我目前正在使用*xampp* for *PHP*。我在我的系统中安装了 *mongo_db(1.8.5)* 并且还在我的系统中安装了*xampp-1.8.1-VC9*。为了为*mongoDB*配置 PHP ，我下载了 *php_mongo.dll*（尝试了`VC9 thread safe`和`non-thread safe`）并将*.dll*文件粘贴到*'../php/ext'*目录中，并添加`extension=php_mongo.dll`到了*php.ini*文件中。

现在，当我尝试在*xampp中启动**apache时，即使**apache*正在启动，它也会显示以下显示。

 **```
PHP startup mongo: Unable to initialize module
Module compiled with module API : 20090626
PHP compiled with module API : 20100525
These options need to match. 
```

我连接*Mongo的**.php*代码也不起作用。这意味着某处有问题。

 *我要去哪里错了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-23T05:06:53.520

看起来您正在尝试使用 PHP 5.4 安装为 PHP 5.3 编译的扩展；模块 API 版本需要与 PHP 的版本相匹配。

如果您从 Github下载[预编译的 MongoDB PHP 驱动程序](https://github.com/mongodb/mongo-php-driver)`php_mongo-1.2.12.zip`（例如当前的稳定版本），它包括多个 PHP 版本（例如 5.2、5.3 和 5.4）的 DLL。您需要为您的系统复制正确的 DLL 并将其重命名为 php_mongo.dll。

`phpinfo()`您可以从系统上的输出（或`php -i`从命令行）确定所需的版本。检查“Zend Extension Build”的值。

例如：

```
Zend Extension Build => API220100525,NTS,VC9 
```

.. 表示您应该使用 NTS（非线程安全）DLL。

在 64 位 Windows 上，这意味着复制`php_mongo-1.2.12-5.4-vc9-nts-x86_64.dll`到`php_mongo.dll`您的 PHP 扩展目录中。***

# python - Beautiful Soup with Scrapy 可以提高性能吗

> ID：13523115
> 
> 赞同：0
> 
> 时间：2012-11-23T04:29:33.573
> 
> 标签：python, beautifulsoup, scrapy

我正在用scrapy爬行所有东西。我看到很多人都在使用漂亮的 Soup 进行解析。

我只是想知道在速度、效率或更多 slectrors 等方面是否有任何优势，可以帮助我创建蜘蛛和爬虫，或者单独使用 scrapy 对我来说就足够了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:58:30.350

使用 BeautifulSoup 而不是 Scrapy 内置的解析器选择器机制的性能取决于很多事情：例如，它允许使用[不同的解析器](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#differences-between-parsers)；lxml 是其中最快的。还[可以做一些其他的事情](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#improving-performance)来提高 BeautifulSoup 的性能。总体而言，您可能会达到类似的性能，但总的来说，使用 BeautifulSoup 不会带来速度优势。

然而，BeautifulSoup 确实提供了一些 Scrapy 不提供的优势替代提取 API 和选择器机制。

尤其是[CSS 选择器](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors)，您可能会觉得非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:28:06.560

答案是您应该尝试使用**HtmlSelector**解析几个页面，然后使用**漂亮的 Soup**。并找到一些统计数据。

第二，大多数人使用**漂亮的 Soup**甚至**lxml**进行解析，因为他们已经习惯了使用它。

Scrapy 的基本动机是**Crawling**如果您对 Xpath 不满意，您可以使用**漂亮的 Soup**、**lxml**（尽管 lxml 包也支持 xpath）甚至**Only Regex** for **Parsing**。

# c# - 用滚动条创建动态大小的面板的方法是什么

> ID：13523119
> 
> 赞同：2
> 
> 时间：2012-11-23T04:30:18.963
> 
> 标签：c#, winforms

我正在为游戏制作关卡编辑器，你是标准的平台游戏。默认情况下，级别大小为 24_Height 和 32_Width 乘以 32 的图块大小。因此默认情况下，面板容器大小为 1024 x 768。

您可以使用重新调整面板大小的窗口形式更改行和列。这是我遇到问题的地方。默认大小看起来不错，但是当增加它的大小时，面板本身并没有锁定到当前大小，而是分别在宽度和高度上扩展。

我想要的是它被锁定在默认大小，并且当面板变得比默认值大时，滚动条出现在适当的位置。

出于这个原因，我查看了事件选项卡中的自动滚动选项，但将其设置为 true 似乎并没有什么不同（因为即使面板离开表单也不会出现）。我查看了更改最大大小值（当前为 32000、32000），认为我仍然可以通过代码重新调整它的大小，但不能以相同的方式以相同的方式显示它。它没有用。

![http://img4host.net/upload/2305134050aef7f46b283.png](../Images/14763d5da4769c75f57c31c2b189fe1a.png)

![http://img4host.net/upload/2305174350aef8e7b580f.png](../Images/b7eddb6a3bc844633f843e4b7e364808.png)

如果有必要，绘制代码，尽管考虑到我刚刚开始这个项目，它非常空。

```
private void MapPanel_Paint(object sender, PaintEventArgs e)
{
    if (MapPanel.Width < (oMapGrid.TileColsValue * oMapGrid.TileSizeValue))
        MapPanel.Width = (oMapGrid.TileColsValue * oMapGrid.TileSizeValue);

    if (MapPanel.Height < (oMapGrid.TileRowsValue * oMapGrid.TileSizeValue))
    {
        MapPanel.Height = (oMapGrid.TileRowsValue * oMapGrid.TileSizeValue);
        MapPanel.AutoScroll = true;
    }

    for (int Row = 0; Row < oMapGrid.TileRowsValue; Row++ )
    {
        oPen_and_Brush.ClassGraphics.DrawLine(oPen_and_Brush.ClassPen, 0, Row * oMapGrid.TileSizeValue, MapPanel.Width, Row * oMapGrid.TileSizeValue);
    }
    for (int Col = 0; Col < oMapGrid.TileColsValue; Col++)
    {
        oPen_and_Brush.ClassGraphics.DrawLine(oPen_and_Brush.ClassPen, Col * oMapGrid.TileSizeValue, 0, Col * oMapGrid.TileSizeValue, MapPanel.Height);
    }
} 
```

# iphone - 构建 dylib 使用 makefile 但它也回显“找不到头文件”

> ID：13523123
> 
> 赞同：0
> 
> 时间：2012-11-23T04:30:44.917
> 
> 标签：iphone, makefile

这是我的makefile

```
Compiler=/usr/bin/clang++
CC=/usr/bin/clang
Sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk
DEVICE_SUPPORT=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/5.1\ \(9B176\)/Symbols
UIKIT_HEADER=$(Sysroot)/System/Library/Frameworks/UIKit.framework/Headers
FOUNDATION_HEADER=$(Sysroot)/System/Library/Frameworks/Foundation.framework/Headers
FRAMEWORKS=/opt/iOSOpenDev/frameworks
INCLUDE=/opt/iOSOpenDev/include
LIB=/opt/iOSOpenDev/lib
MAIN=./main

LDFLAGS=        -lobjc \
                -framework Foundation \
                -framework UIKit \
                -framework CoreFoundation \
                -framework CoreLocation \
                -multiply_defined suppress \
                -L$(INCLUDE) \
                -L$(LIB) \
                -L$(Sysroot)/usr/lib \
                -F$(Sysroot)/System/Library/Frameworks \
                -F$(Sysroot)/System/Library/PrivateFrameworks \
                -dynamiclib \
                -init _mainInitialize \
                -Wall \
                -Werror \
                -lsubstrate \
                -licucore \
                -llockdown \
                -fobjc-exceptions \
                -fobjc-call-cxx-cdtors

CFLAGS= -arch armv7 -miphoneos-version-min=4.0 -isysroot $(Sysroot) -I$(UIKIT_HEADER) -I$(FOUNDATION_HEADER) -I$(FRAMEWORKS) -I$(INCLUDE) -I$(LIB) -I$(MAIN)

HookObjects= $(MAIN)/main.o 
```

如果我的 main.h 包含私有框架，它会在我构建时给出错误，就像：{./main/main.h:5:9: fatal error: 'Preferences/Preferences.h' file not found }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:44:59.223

只需检查可能是您导入 .m 文件而不是 .h 文件，还检查项目中添加的框架或不添加`CoreLocation`，路径中的`CoreFoundation`框架..`Build Phases->Link Binaries with Libraries->Add this frameworks`

我希望这对你有帮助..

# javascript - 如何将变量设置为 AJAX 响应数据？

> ID：13523127
> 
> 赞同：2
> 
> 时间：2012-11-23T04:31:17.027
> 
> 标签：javascript, jquery, ajax, function, scope

我正在使用 jQuery，我有以下代码：

```
var result = [];

if ( some_condition ) {
  result = [...]
} else {
  $.ajax({
    url:      some_url,
    data:     some_data,
    dataType: 'json',
    success:  function(data) {
      items = data
    }
  });

  result = items
}

// Playing with the 'result' variable... 
```

上面的代码在何时生成错误“ `items is not defined`” （我认为这`some_condition`是`false`因为变量范围不正确而发生的）。

我想将`result`变量设置为 AJAX 响应数据，但我不知道如何解决问题。

* * *

*注意*：我正在尝试这样做，因为我想在语句*之外*`result`使用变量（即在上述代码中的语句*之后）。**`if ... else`*`if ... else`**

 *** * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-25T19:29:13.807

只需使ajax函数不异步

```
var result = [];

if ( some_condition ) {
  result = [...]
} else {
    $.ajax({
    url:      some_url,
    data:     some_data,
    dataType: 'json',
    async: false, 
    success:  function(data) {
        items = data
    }
    });
   result = items
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T04:34:01.637

做这个：

由于您将其称为异步，因此您应该在回调函数中分配它

```
var result = []; 

if ( some_condition ) {
  result = [...]
} else {
  $.ajax({
    url:      some_url,
    data:     some_data,
    dataType: 'json',
    success:  function(data) {
      result = data;
      validateResult(result);
    }
  });
} 
```

为了您更好的理解。

您的结果数组是一个全局变量。

1.  最初它是一个长度 = 0 的数组；
2.  你调用你的ajax函数。
3.  结果数组的长度仍为 0。
4.  Ajax 调用完成并执行成功函数。
5.  在成功函数中，您将结果分配给响应数据。
6.  现在结果数组的长度不再为零了。
7.  全局更新值。
8.  您可以在代码中的任何位置使用结果数组**

# c# - 如何查询/解析 BMC AR System 票证？

> ID：13523129
> 
> 赞同：1
> 
> 时间：2012-11-23T04:31:45.673
> 
> 标签：c#, remedy

不幸的是，我没有开发人员许可证来加入 BMC 支持者社区以获取此信息。

在整个网络上，我发现了如何创建 BMC AR System 票证，但不知道如何查询它们，或者如何解析它们。例如，我想将它们中的数据添加到 ListView 或类似中。

那么有谁知道如何在 C# 中查询/解析 BMC AR System 票证，或者可能知道任何 API 或库可以让我与它们交互吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:11:52.190

查询 AR 系统补救措施 ARAPI764.NET C#

这是一个关于如何查询表单并返回指定字段值的示例

```
BMC.ARSystem.Server arserver = new BMC.ARSystem.Server();
arserver.Login("servername", "username", "password", "");

//Search a Remedy Form Start

string RequestID = "000000000000001";

string FromForm = ((BMC.ARSystem.EntryDescription)arserver.GetListEntry("someREMEDYform", string.Format("'1' = \"{0}\"", RequestID))[0]).Description;

string qualification = string.Format("'1' = "+ RequestID );

BMC.ARSystem.EntryListFieldList fieldList = new BMC.ARSystem.EntryListFieldList();
fieldList.Add(new BMC.ARSystem.EntryListField(8));
fieldList.Add(new BMC.ARSystem.EntryListField(3));

var entryList = arserver.GetListEntryWithFields("someREMEDYform", qualification, fieldList, 0, 0);

Console.WriteLine(entryList[0].FieldValues[8]);
Console.WriteLine(entryList[0].FieldValues[3]);

Console.ReadLine();

//Search a Remedy Form End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:14:50.437

在 C-API 指南中查找函数 ARGetList 和 ARGetEntry。ARGetList 将限定作为输入，并返回与您选择的表单的限定匹配的数组 EntryIDs。

ARGetEntry 接受一个 EntryID 和一个 ARFieldID 数组。它返回包含在字段列表（由 ARFieldIDs 指定）中的数据，用于由 EntryIDs 数组指定的记录。

麦克风

# android - 用户按确定时密码提示不执行任何操作

> ID：13523134
> 
> 赞同：1
> 
> 时间：2012-11-23T04:32:40.973
> 
> 标签：android, android-layout, android-intent

我正在制作一个需要设置页面密码的程序。目前我的做法是弹出一个带有文本字段和密码请求的警报。当输入正确的密码（目前硬编码为“test”但会更改）时，它应该启动设置活动，密码不正确会导致警报显示“不正确”。

目前，无论密码正确或错误，它都会关闭警报，没有消息或任何东西。

我正在学习，所以我确定我已经严重破坏了代码，有什么建议吗？

```
 public void Settings(View view) {
    final AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("Main User Only");
    alert.setMessage("Please enter password");

    // Set an EditText view to get user input 
    final EditText input = new EditText(this);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        String value = input.getText().toString();
      if (value == "test") 
     {Intent settings = new Intent(Bootscreen.this, ItemListActivity.class);
     startActivity(settings);}

      else
          if (!(value == "test")) { alert.setMessage("Incorrect");}}

    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
        // Canceled.
      }
    });

    alert.show();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T04:33:38.273

采用

```
if (value.equals("test")) 
```

代替

```
if (value == "test") 
```

用于比较字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:59:26.047

也可以使用`.equalsIgnoreCase`方法。在此它还考虑用于比较两个字符串的空白。

您的代码如下所示

```
if (value.equalsIgnoreCase("test")) 
```

# jquery - Rails 链接到一个类或迭代一个 Id

> ID：13523139
> 
> 赞同：0
> 
> 时间：2012-11-23T04:33:15.900
> 
> 标签：jquery, ruby-on-rails

我的应用程序的一部分显示了消息。我正在尝试使用灯箱在单击时显示每条消息的一部分。我的问题是我使用 ID 链接到隐藏的 div。由于我使用的是 ID，因此链接只会显示第一条消息，而不是随后的每条消息。我该如何更改这一点，以便每个迭代的消息都会显示它自己的消息而不是第一个消息？

我在下面包含了我的代码。我正在使用fancybox灯箱。

谢谢您的帮助。

```
<tbody>
    <% @messages.each do |m| %>
    <tr>

        <td><%= m.from.name %></td>
        <td><%= truncate(m.topic, length: 30) %></td>
        <td><%= link_to truncate(m.body, length: 35), "#user_message", class: 'fancybox'  %></td>
        <td>
        <%= link_to 'Mark Read', '#', confirm: 'Are you sure?', :class => 'btn btn-mini' %>
        <%= link_to 'Reply', '#', confirm: 'Are you sure?', :class => 'btn btn-mini btn-inverse' %>
        <%= link_to 'Delete', '#', confirm: 'Are you sure?', :class => 'btn btn-mini btn-danger' %>

        </td>
    </tr>
    <div style="display:none" id="user_message">
        <%= m.body %>
    </div>
    <% end %>
</tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:43:57.443

一个简单的解决方案是通过附加一些独特的东西来强制 ID 是唯一的，比如说消息的数字 ID：

```
<% @messages.each do |m| %>
  <tr>
    ...
    <td><%= link_to truncate(m.body, length: 35), "#user_message-#{m.id}", class: 'fancybox'  %></td>
    ...
  </tr>
  <div style="display: none" id="user_message-<%= m.id %>">
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:44:26.197

不看你的 JQuery 代码就很难告诉你一个确切的答案，但通常做这些事情的方式是附加一个动态值来区分 div

前任：

```
<tbody>
    <% @messages.each do |m| %>
    <tr>

        <td><%= m.from.name %></td>
        <td><%= truncate(m.topic, length: 30) %></td>
        <td><%= link_to truncate(m.body, length: 35), "#user_message{m.id}", class: 'fancybox'  %></td>
        <td>
        <%= link_to 'Mark Read', '#', confirm: 'Are you sure?', :class => 'btn btn-mini' %>
        <%= link_to 'Reply', '#', confirm: 'Are you sure?', :class => 'btn btn-mini btn-inverse' %>
        <%= link_to 'Delete', '#', confirm: 'Are you sure?', :class => 'btn btn-mini btn-danger' %>

        </td>
    </tr>
    <div style="display:none" id="user_message{m.id}">
        <%= m.body %>
    </div>
    <% end %>
</tbody> 
```

注意附加`{m.id}`部分

高温高压

# ruby-on-rails - 巫术规格运行非常缓慢

> ID：13523140
> 
> 赞同：0
> 
> 时间：2012-11-23T04:33:37.567
> 
> 标签：ruby-on-rails, rspec, factory-bot, sorcery

我正在尝试设置我的应用程序以使用 Sorcery。当我添加`authenticates_with_sorcery!`到我的用户模型时，我的规范开始运行非常慢（大约每秒一个）。是否有某种配置或设置可能导致巫术出现这种情况？

这是我的用户模型：

```
# This model represents a user of the application, disregarding that person's use of the system. For
# instance, a user could be a job hunter, an employer, an administrator, or some other stakeholder.
class User < ActiveRecord::Base
  authenticates_with_sorcery!

  attr_accessible :email, :password, :password_confirmation

  # validations
  validates :email, 
            :presence => true, 
            :uniqueness => true, 
            :format => /[^@]+@[^@]+\.[^@]+/

  validates :password, :presence => true, :confirmation => true

  validates :password_confirmation, :presence => true

  # before filters
  before_save :sanitize_email

  private

  # Strips and removes HTML tags from the email parameter.
  def sanitize_email
    self.email = email.strip

    # remove anything that looks like an email
    self.email = email.gsub(/<[^<>]+>/, "")
  end
end 
```

和我的用户工厂：

```
require 'factory_girl'
require 'ffaker'

FactoryGirl.define do

  sequence :email do |n|
    "email#{n}@example.com"
  end

  factory :user do |f|
    email
    password "password"
    password_confirmation "password"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:57:11.523

我的第一个猜测是慢速密码加密。例如在设计中我们有`config.stretches`配置变量，在测试环境中可以设置为一个小数字。

检查[设计的database_authenticable的“延伸”是什么意思？](https://stackoverflow.com/questions/3170282/what-does-the-stretches-of-database-authenticatable-of-devise-mean)

# android - 单击按钮不进入android中的下一个活动

> ID：13523142
> 
> 赞同：0
> 
> 时间：2012-11-23T04:33:40.480
> 
> 标签：android

当我单击 GO 按钮时，它不会进入下一个活动。我正在使用以下代码..有人可以纠正我哪里出错了吗？

```
 final Button button = (Button) findViewById(R.id.button1);
     button.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             // Perform action on click
             startActivity(new Intent(currentActivity.this, NextActivity.class));
         }
     }); 
```

# c# - C# httpwebrequest cookie

> ID：13523144
> 
> 赞同：1
> 
> 时间：2012-11-23T04:33:53.990
> 
> 标签：c#

我正在使用下面的代码来重用会话。

我会在grabUrl 响应cookie 上获得相同的会话ID 吗？

我如何知道两个请求是否使用相同的会话/cookie？

谢谢。

```
CookieContainer cookCon = new CookieContainer();

Httpwebrequest loginReq = (httpwebrequest) loginReq.create(loginurl);

loginReq.cookiecontainer = cookCon;

... All the response stuffs

Httpwebrequest grabReq = (httpwebrequest) grabReq.create(grabUrl);

grabUrl.cookiecontainer = cookCon 
```

当我添加下面的代码来查看容器内容时，它显示有一个会话 id：

```
 foreach (Cookie cook in cookieContainer.GetCookies(new Uri(loginurl)))
        {
            Console.WriteLine("Cookie_Get_Container:");
            Console.WriteLine("====================================================");
            Console.WriteLine("String: {0}", cook.ToString());
            Console.WriteLine("====================================================");
        } 
```

所以我在登录响应中添加了 cookie：

```
cookieContainer.Add(new Uri(domainUrl), loginRes.Cookies); 
```

当我尝试从 cookieContainer.grabRes.Cookies 获取时，我无法获取会话 ID。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:16:43.153

由于您没有显示从第一个响应中获取会话 cookie 的代码，我假设您不是，答案是“不，为第二个请求创建新会话”。

您想从第一个响应中获取会话 ID（和其他）并将它们设置为新请求（即通过将它们添加到容器中）。

旁注：根据身份验证方法，用于验证下一个请求的信息（不同于会话 ID）可能不会出现在 cookie 中。

# java - 无法从android中的远程ubuntu tomcat服务器连接mysql数据库

> ID：13523147
> 
> 赞同：0
> 
> 时间：2012-11-23T04:34:05.337
> 
> 标签：java, mysql, tomcat, jdbc, remote-server

我开发了一个 java 应用程序。在这里我必须在本地服务器上运行 java 类，这意味着右键单击项目 --- 运行方式 ---> java 应用程序。

所以我得到了输出。

但我希望将此java应用程序上传到我的远程tomcat服务器。所以我将我的项目导出为war文件。之后我必须在远程tomcat服务器中解压缩war文件。现在我必须运行这些项目。

java代码如下：

```
 public class Fetch {
 public String customerData(){
 String customerInfo = "";
 try{
 Class.forName("com.mysql.jdbc.Driver");
 Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/android","androiduser","AN124@7#7");
 //Find customer information where the customer ID is maximum
 PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers");
 ResultSet result = statement.executeQuery();
 while(result.next()){
  customerInfo = customerInfo + result.getString("login") + "&" + result.getString("password") + "&"+result.getString("firstname") + "&"+result.getString("email");
 //Here "&"s are added to the return string. This is help to split the string in Android application
  }
 }
catch(Exception exc){
System.out.println(exc.getMessage());
}
return customerInfo;
}
} 
```

我如何在我的远程 tomcat 服务器上运行这些 Fetch.java 类。请帮助我。我怎样才能获取检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:40:06.987

Tomcat 是一个实现 Servlet 和 JSP 规范的 Web 服务器。

因此，它不适用于像我们在命令提示符下使用`javac`和`java`命令那样运行普通的 java 应用程序。

您需要一个 Web 应用程序来从 servlet 运行您的文件。因此，首先您需要了解 servlet。[请参阅 StackOverflow 上的 Servlets Wiki 页面](https://stackoverflow.com/tags/servlets/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:41:14.853

您的代码使用服务器地址、用户名和密码的硬编码值。这些东西应该作为 Tomcat 服务器配置的一部分进行配置。我自己对 Tomcat 没有太多经验，但看看这篇文章，希望能让你走上正确的道路。

[http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)

# excel - 我必须按 Enter 才能运行公式？

> ID：13523151
> 
> 赞同：0
> 
> 时间：2012-11-23T04:34:36.493
> 
> 标签：excel, vbscript

我有一个宏可以做到这一点：

```
ActiveCell.FormulaR1C1 = "=COVAR(" & ticker & "!I:I," & MarketIndex & "!I:I)/VARP(" & MarketIndex & "!I:I)" 
```

其中插入：

```
=COVAR(BMY!I:I,GSPC!I:I)/VARP(GSPC!I:I) 
```

但它显示为`#NAME?`直到我单击单元格以显示公式并按 Enter 键。为什么它不会在没有干预的情况下自动运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:00:12.457

您正在尝试将`A1`样式引用分配给`R1C1`样式属性，您不能混合使用这些类型。

要么使用

```
ActiveCell.Formula = "=COVAR(" & ticker & "!I:I," & MarketIndex & "!I:I)/VARP(" & MarketIndex & "!I:I)" 
```

或者

```
ActiveCell.FormulaR1C1 = "=COVAR(" & ticker & "!C9," & MarketIndex & "!C9)/VARP(" & MarketIndex & "!C9)" 
```

# javascript - 如果年龄合适，我如何制作一个有年龄限制的网站，将人们带到另一个网站？

> ID：13523155
> 
> 赞同：0
> 
> 时间：2012-11-23T04:35:09.763
> 
> 标签：javascript, jquery, html, dreamweaver

我想创建一个小型调查/问卷，询问用户他们是否超过 18 岁。一旦他们按下 Enter 按钮，我想做两个选项。一：如果他们未超过 18 岁，它会将他们带到另一个网页。第二：如果他们超过 18 岁，它会将他们带到另一个网页。这让我想起了 Java 中的“if”“else”语句，但我知道这不是 Java。我正在使用 HTML (Dreamweaver)，但我无法弄清楚。有人可以指出我正确的方向吗？

我已经得到了它的基本信息：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>WAIT!</title>
</head>

<body>
<p>WAIT!</p>
<p>Let us know more about you.</p>
<p>Please fill out this form so that we can guide you to YOUR world. </p>
<p>&nbsp;</p>
<p>Are you a:</p>
<form>
<input type="radio" name="sex" value="male">Male<br>
<input type="radio" name="sex" value="female">Female
</form> 
<p> Age: </p>
<form>
<input type="radio" name="sex" value="male">
younger than 18<br>
<input type="radio" name="sex" value="female">
18+
</form> 
<p></p>
<form name="input" action="#" method="get">
<input type="submit" value="Enter">
</form> 
</body>
</html> 
```

要查看输出，请复制并粘贴上面的代码并[在此处](http://www.w3schools.com/js/tryit.asp?filename=tryjs_loc_assign)输入。然后按提交代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:41:22.967

这是一个示例脚本，可重定向用户检查使用 javascript 在收音机中选择的内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>WAIT!</title>
</head>
<script>
function redirect() {
    if(document.getElementById("m").checked == true)
    {
        window.open("http://www.codeforbrowser.com")
    }
    else {
        window.open("http://www.yahoo.com")
    }

}
</script>
<body>
<p>WAIT!</p>
<p>Let us know more about you.</p>
<p>Please fill out this form so that we can guide you to YOUR world. </p>
<p>&nbsp;</p>
<p>Are you a:</p>
<form>
<input type="radio" name="sex" value="male">Male<br>
<input type="radio" name="sex" value="female">Female
</form> 
<p> Age: </p>
<form>
<input type="radio" name="sex" value="male" id="m" >
younger than 18<br>
<input type="radio" name="sex" value="female"  id="f">
18+ 
</form> 
<p></p>
<form name="input" action="#" method="get">
<input type="submit" value="Enter" onclick="redirect();">
</form> 
</body>
</html> 
```

[**演示**](http://jsfiddle.net/refhat/LNpT6/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T04:47:43.430

给你的表格一些id；

```
<form id="sex_form">
<input type="radio" name="sex" value="male">
younger than 18<br>
<input type="radio" name="sex" value="female">
18+
</form> 
<input type="submit" onclick="validate()" value="Enter">

    <script type="text/javascript">
        function validate(){
            var form = document.getElementById('sex_form');
            if(form.firstElementChild.checked){
            alert('to younger');
                            //window.open('younger');
            }
            else if(form.firstElementChild.nextElementSibling.nextElementSibling.checked){
                            //window.open('older');
            alert('to 18+');
           }
            else
            alert('none selected');
        }

    </script> 
```

# facebook - WP 特色图片未在 Facebook 分享中显示

> ID：13523167
> 
> 赞同：0
> 
> 时间：2012-11-23T04:36:40.733
> 
> 标签：facebook, facebook-opengraph

当我将单个帖子页面的 URL 从我的网站粘贴到我的 FB 粉丝页面时，它会显示默认图像，而不是我选择作为预览图像的特色图像。

当我在 FB 的调试器页面中粘贴相同的 URL 时，它会显示我选择作为特色图像的图像作为 og:image

为什么我选为特色图片的图片没有显示为预览图片？我该如何修复它以使其正常运行？

这是我网站上的一个单独的帖子页面：

[http://www.cops.com/your-cousins-on-cops/](http://www.cops.com/your-cousins-on-cops/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:13:57.357

您可以尝试使用这样的开放图形标签：

```
    ......
    元属性="og:title" 内容=""
    元属性="og:type" 内容=""
    元属性="og:url" 内容=""
    元属性=“og：图像”内容=“”
    元属性="og:site_name" 内容=""
    ……

```

而不是这些：

```
    ...
    元属性="http://ogp.me/ns#site_name" 内容="COPS"
    元属性="http://ogp.me/ns#type" 内容="文章"
    元属性="http://ogp.me/ns#locale" 内容="en_US"
    ...

```

我想也许可以解决问题？

这是 fb 刮板给我看的照片：http: [//www.cops.com/wp-content/uploads/2012/11/The-Reverend-Peytons-Big-Damn-Band.jpg](http://www.cops.com/wp-content/uploads/2012/11/The-Reverend-Peytons-Big-Damn-Band.jpg)

# javascript - 错误 mousemove 事件无法在其他框架中显示按钮？

> ID：13523168
> 
> 赞同：0
> 
> 时间：2012-11-23T04:36:45.927
> 
> 标签：javascript, jquery

我有一个示例代码：

```
<div id="background-1" style="background: url('image1.png') no-repeat left center; width: 200px; height: 200px; float: left;">
    <div id="button-wrapper" style="position: absolute; opacity: 1; z-index: 100;">
       <input type="button" value="submit">    
    </div>
</div>

<div id="background-2" style="background: url('image2.png') no-repeat right center; width: 200px; height: 200px; float: right;">
    <div id="button-wrapper" style="position: absolute; opacity: 1; z-index: 100;">    
    </div>
</div>​ 
```

还有我的脚本：

```
jQuery(document).ready(function(){
    jQuery("div[id^=\'button-wrapper\']").parent().mousemove(function(e){
        var _top = e.pageY - 5;
        var _left = e.pageX - 5;
        var _c = jQuery(this);
        var _p = _c.position();;

        if (_top > (_p.top + _c.height())) _top = _p.top + _c.height();
        if (_left > (_p.left + _c.width())) _left = _p.left +_c.width();
        jQuery("div[id^=\'button-wrapper\']").css({
            top: _top,
            left: _left
        });
    });
});​ 
```

当我将鼠标悬停在 background-2 是 event mousemove not run button submit 时出错，如何解决？演示[在这里](http://jsfiddle.net/4An3E/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:47:13.190

你可以在这里看到[demo](http://jsfiddle.net/pPn3v/37/)，希望对你有帮助！！！

```
var yellow = $('div[id^=\'yellow\']');
var offset = yellow.offset();
var offsetWidth = offset.left + yellow.width();
var offsetHeight = offset.top + yellow.height();

var red = $('#red');

yellow.on('mousemove', function (e) {
    red.css("left", e.pageX);
    red.css("top", e.pageY);
});

red.on('mousemove', function (e) {
    if(e.pageX >= offset.left && e.pageY >= offset.top &&
       e.pageX <= offsetWidth && e.pageY <= offsetHeight) {
        red.css("left", e.pageX);
        red.css("top", e.pageY);  
    }               
}); 
```

# android - 如何在 Eclipse 中启用设备管理？

> ID：13523172
> 
> 赞同：1
> 
> 时间：2012-11-23T04:37:24.407
> 
> 标签：android, permissions, admin

好吧。我首先要为创建另一个问题道歉，因为我确实在 Google 上遇到了一些事情，但我只是不完全理解我发现的事情。我找到的三个链接是[让您的应用程序成为设备管理员](http://rootfs.wordpress.com/2010/09/09/android-make-your-application-a-device-administrator/)和[Android 开发者网站](http://developer.android.com/reference/android/app/admin/DeviceAdminReceiver.html%22)，[这](http://developer.android.com/reference/android/app/admin/DeviceAdminReceiver.html)

我完全理解整个 XML 部分，但我没有掌握的部分是我将要运行的代码放在哪里？就像我在执行一些代码后试图将设备置于待机模式一样。我知道我需要使用 PowerManager，但为了做到这一点，我需要让我的应用程序成为管理员。同样在第一个链接中，我不确定这意味着什么`startActivityForResult(intent, REQUEST_ENABLE);`以及为什么`REQUEST_ENABLE`用红色下划线给出**无法解决变量**错误，并且在教程中没有提到创建`REQUEST_ENABLE`变量或方法或类或任何东西。

感谢大家提前帮助我解决这个问题！

# css - HTML/CSS：布局问题

> ID：13523178
> 
> 赞同：0
> 
> 时间：2012-11-23T04:38:44.990
> 
> 标签：css, html, footer

基本上我正在尝试创建一个包含 3 行的简单网页模板。第一个是包含两列的标题，第二个只是主体，最后一个是页脚。

编码明智我正在做这种布局

```
<div id="wrapper">
    <div id="header">
        <header>
        </header>
        <div id="col2>
        </div>
    </div>
    <div="mainbody"></div>
    <footer></footer> 
```

基本上我现在遇到的麻烦是关于两列的第一行。基本上我在第一个有一张图片，在第二个有一堆按钮。理想情况下，我希望标题为 100% 宽度，以便它适合屏幕，第一列的内容贴在左侧，按钮贴在右侧。两者之间留有空白。所以可以说内容粘在两边。目前我`float:left`在 CSS 上使用第一列，我一直在搞乱浮动/对齐/位置，但我似乎无法得到任何工作。

因此，对此我有任何建议，我将不胜感激。

关于页脚，我还有另一个问题，基本上我什至不知道该怎么做。所以只是询问是否可能并指导在哪里寻找。

因此，对于页脚，我想知道是否有可能，如果在页脚和浏览器 x 轴之间有适合屏幕的空白区域并且主体会伸展。因为到目前为止，我的身体只处于里面内容的高度。所以基本上是关于 CSS 的一般建议，以帮助实现样式，使其适合屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:47:55.023

带有 2 列的标题

```
<div id="header">
<div id="column1" style="float:left;">Image</div>
<div id="column2" style="float:left;">Buttons</div>
</div> 
```

现在将所需的左边距添加到第二列 div。它将在 2 列之间创建空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:45:16.217

它是一个简单的结构，可以创建如下（[**这里是 DEMO**](http://jsfiddle.net/naveenksh/K2pwc/)）

HTML 是

```
<div id="wrapper">
    <div id="header">
        <header><img src='http://www.topnews.in/files/facebook-yahoo.jpeg' height=200 />
        </header>
        <div id="col2"><input type=Button value ="button 1" /><br><input type=Button value ="button 1" /><br><input type=Button value ="button 1" /><br>
        </div>
    </div>
    <div="mainbody">mainbody
    </div>
    <footer></footer>
</div> 
```

而 CSS 将是

```
#header{overflow:auto}
header{float:left}
#col2{float:right} 
```

希望它会帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:26:35.837

```
<div id="wrapper">
     <header>
       <div id="column1" style="float:left;">Image</div>
       <div id="column2" style="float:left;">Buttons</div>
      </header>

   <div class="mainbody">
     Content
   </div>

<footer></footer> 
```

用这个

# php - 分隔符不能是字母数字或反斜杠

> ID：13523182
> 
> 赞同：-2
> 
> 时间：2012-11-23T04:39:23.940
> 
> 标签：php, regex

这个正则表达式有什么问题？尽管使用`/i`.

```
$tokenregex = '/sid(.*)/i';

$bizresponse=curl_getinfo ($curlop1);
$bizresponse = print_r($bizch);

if (preg_match($tokenregex[1], $bizresponse))

{
do things
} 
```

bizresponse是这个

ttp://anonymouse.org/cgi-bin/anon-www.cgi/http://ca.isohunt.com/member.php?origin=/forum/index.php&ssl=no&sid=915625588370db24a51d713871a3ec1a [content_type] => 文本/html; charset=utf-8 [http_code] => 200 [header_size] => 1417 [request_size] => 627 [filetime] => -1 [ssl_verify_result] => 0 [redirect_count] => 1 [total_time] => 2.666479 [namelookup_time ] => 3.8E-5 [connect_time] => 0.168507 [pretransfer_time] => 0.168547 [size_upload] => 0 [size_download] => 39526 [speed_download] => 14823 [speed_upload] => 0 [download_content_length] => 415 [ upload_content_length] => 0 [starttransfer_time] => 0.778169 [redirect_time] => 1.383665 [certinfo] => 数组 () [redirect_url] => )

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T05:12:24.733

在`if (preg_match($tokenregex[1], $bizresponse))`中， 的值`$tokenregex[1]`是`s`在此处产生错误。替换`$tokenregex[1]`为`$tokenregex`

# android - 如何禁用光标但在android中显示选定的文本

> ID：13523183
> 
> 赞同：0
> 
> 时间：2012-11-23T04:39:27.467
> 
> 标签：android, android-layout

我想禁用编辑文本的光标，但从颜色中显示选定的文本。但是当我关闭光标时，选定的文本颜色也不可见。

这是我的编辑文本代码。

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/linearLayout2"
    android:layout_below="@id/linearLayout1"
    android:layout_gravity="center"
    android:padding="@dimen/padding_maintextview" >

    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="23dp"
            android:background="@null"
            android:gravity="right"
            android:inputType="none"
            android:padding="@dimen/padding_maintextview"
            android:text="@string/text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>
</ScrollView> 
```

另一个问题是虽然我在选择单词时禁用了输入类型，但键盘会弹出。我使用 sdk min 8 和 max 15

请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:04:39.243

在 Edittext 中添加以下属性

```
 android:focusableInTouchMode="false" 
```

> 然后，当您选择文本时，您将获得光标。代码如下

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/linearLayout2"
    android:layout_below="@id/linearLayout1"
    android:layout_gravity="center"
    android:padding="@dimen/padding_maintextview" >

    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="23dp"
            android:background="@null"
            android:gravity="right"
            android:inputType="none"
            android:focusableInTouchMode="false"
            android:padding="@dimen/padding_maintextview"
            android:text="@string/text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:05:08.917

```
Add below attribute in your edittext 
```

< EditText android:id=".." .. android:focusable="false" />

只需将 stateAlwaysHidden 属性放在清单中

```
<activity name="EditContactActivity"
        android:windowSoftInputMode="stateAlwaysHidden">
        ...
    </activity> 
```

# android - Eclipse r.java 构建失败

> ID：13523185
> 
> 赞同：-1
> 
> 时间：2012-11-23T04:39:46.377
> 
> 标签：android, eclipse, r.java-file

已经搜索了很长一段时间，还没有在这个网站或其他网站上偶然发现解决方案。出于某种原因（即使在全新安装 eclipse/ADK 工具之后）r.java 文件也没有生成。即使创建了一个新项目，也没有 r.java。尝试了典型的清洁/构建解决方案。有什么猜测吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:47:57.503

您可以尝试清理项目。这是IDE的问题。尝试清洁和建造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:49:53.603

如果您使用的是 Eclipse，

检查`project.properties`文件是否存在。如果没有，您可以从其他项目中复制它。复制项目时也可能丢失了一些隐藏文件，eclipse无法再次创建这些文件

检查项目中是否存在 Android jar 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:55:32.750

在eclipse中转到`project`菜单并点击`clean` 它应该重新生成你的`R.java`文件

也摆脱任何`android.R.*;`声明，然后再如`clean project`上所说。

**或者**

从代码中删除“import R.java”行。

并且在 main.xml 中进行更改，例如如果您遇到此问题，则表示您的内容不支持“match_parent”属性。相反，使用“fill_parent”。

# ruby-on-rails - 如何创建一个只有控制器/视图页面的简单 Rails 应用程序，避免我的应用程序中所有不必要的文件

> ID：13523187
> 
> 赞同：0
> 
> 时间：2012-11-23T04:39:57.237
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序，它包含一个控制器（带有一个方法）和一个视图页面。我想避免我的应用程序中所有不必要的文件，以便以一种简单的方式保持这一点。我需要一个带有控制器、路由和视图的应用程序。那么我应该如何构建我的 Rails 3 应用程序，使其只包含最少的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:49:09.187

如果您正在开发一个真正简单的应用程序，可能最适合您的是[sinatra](http://www.sinatrarb.com/)

那不是rails，而是用ruby实现的。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:00:25.040

您可以使用 rails 脚手架来非常具体地创建 MVC 的哪个部分。例如，

```
$ rails generate controller Comments 
```

或者

```
$ rails generate model Comment commenter:string body:text post:references 
```

我强烈建议阅读整个 Rails 入门指南。但是有一个特定的部分是关于使用脚手架[生成控制器的。](http://guides.rubyonrails.org/getting_started.html#generating-a-controller)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T04:56:35.070

您可以手动创建文件，尤其是当您只需要脚手架将创建的文件的一小部分时。

1）添加一个`statics_controller.rb`到应用程序/控制器目录。如果您实际上只需要一页，您可以简单地使用 index 操作（命名您的方法索引）。

2) 将`index.html.erb`（或 .haml）添加到 app/views/statics/ 目录。

3）在你`config/routes.rb`添加行`get '/statics' => 'static#index'`。`, as: 'your_preferred_url`如果要定义自己的 url，可以附加。

在上述所有内容中，将“静态”替换为您认为合适的任何名称。如果您计划与后端数据库交互，您还需要添加模型和迁移。

我个人觉得，当您刚接触 Rails 时，最初不使用脚手架很好，这样您就可以完全了解他们在做什么。脚手架并没有真正做任何花哨或神奇的事情。它通常只是在正确的目录中创建空文件（就像我上面概述的那样）。

# php - uploadify - 如何将uploadify.php 代码集成到我现有的编程中？

> ID：13523190
> 
> 赞同：0
> 
> 时间：2012-11-23T04:40:10.957
> 
> 标签：php, mysql, uploadify

我的 PHP 模块工作得很好，我可以上传视频标题和上传实际的视频文件。目前我也可以在我的网站上上传更大尺寸的视频，但不显示任何进度状态。所以我决定使用uploadify，但我对如何将uploadify.php 文件的代码集成到我现有的编程中有点困惑。因为在我现有的编程中，我会自动生成视频文件名并将视频文件保存在服务器上，并将视频详细信息存储到 MySQL 数据库表中。然后我尝试将 uploadify.php 代码放入 video_add_p.php 文件中，但它给出了错误。

当我编写 [uploader : 'uploadify.php'] 时，它可以正常工作并在服务器上上传文件，但不会将详细信息存储在数据库中。

当我写 [uploader : 'video_add_p.php'] 时，它会给出错误“HTTP Error (302)”。

请帮助解决这个问题，谢谢，KRA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:52:51.533

在 uplodify 中，您可以附加这样的数据，因此您可以抓取帖子或获取数据并保存到数据库中

**HTML**

```
<form name="upload" method="post" enctype="multipart/form-data">
  <input type="file" id="video_upload" name="video" placeholder="Select your file to upload">
  <input type="text" id="video_caption" name="caption" placeholder="video caption" />
</form> 
```

**jQuery**
，您可以通过“formData”变量发送任何内容

```
$('#video_upload').uploadify({
    'swf'       : '/includes/uploadify.swf',
    'uploader'  : '/includes/uploadify.php',
    'buttonText': 'browae file(s)...',
    'onUploadStart': function() {
       $("#video_upload").uploadify('settings', 'formData', {'caption':  $('#video_caption').val()});
    }
  }); 
```

**PHP**

```
<?php 
   $caption = $_POST['caption'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:54:46.040

使用以下代码使文件名唯一

```
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] .TARGET FOLDER NAME . '/';
$ext = substr($_FILES['Filedata']['name'], strrpos($_FILES['Filedata']['name'], '.') + 1);
$targetFile =  str_replace('//','/',$targetPath) . uniqid().'.'.$ext; 
```

# javascript - 将 D3 代码放入函数并调用

> ID：13523193
> 
> 赞同：0
> 
> 时间：2012-11-23T04:40:41.827
> 
> 标签：javascript, web-applications, d3.js, visualization

是否可以将 D3 代码放入函数中，然后调用该函数？

例如，我有兴趣使用这个直方图代码 [http://bl.ocks.org/3048450](http://bl.ocks.org/3048450)

如果我将代码放在一个函数中并调用

```
 function hist(bin, data) {
    //the D3 histogram plotting code
    // Generate an Irwin–Hall distribution of 10 random variables.
    var values = d3.range(1000).map(d3.random.irwinHall(10));

    // A formatter for counts.
    var formatCount = d3.format(",.0f");

    var margin = {top: 10, right: 30, bottom: 30, left: 30},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

    var x = d3.scale.linear()
    .domain([0, 1])
    .range([0, width]);

    // Generate a histogram using twenty uniformly-spaced bins.
    var data = d3.layout.histogram()
    .bins(x.ticks(20))
    (values);

    var y = d3.scale.linear()
    .domain([0, d3.max(data, function(d) { return d.y; })])
    .range([height, 0]);

    var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

    var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var bar = svg.selectAll(".bar")
    .data(data)
    .enter().append("g")
    .attr("class", "bar")
    .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; });

     bar.append("rect")
    .attr("x", 1)
    .attr("width", x(data[0].dx) - 1)
    .attr("height", function(d) { return height - y(d.y); });

     bar.append("text")
    .attr("dy", ".75em")
    .attr("y", 6)
    .attr("x", x(data[0].dx) / 2)
    .attr("text-anchor", "middle")
    .text(function(d) { return formatCount(d.y); });

     svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

}

hist(...); //call the function 

```

它没有情节。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:39:58.590

我找到了错误的原因。我把“功能”拼错为“功能”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:02:18.103

您在哪里包含并运行该代码？如果您在`<head>`元素中包含并运行它，那么当脚本执行时浏览器将不会知道该`<body>`元素。`d3.select("body")`将返回一个空选择，因此将没有任何内容可以附加和 svg 元素。

尝试将脚本放入`<body>`或使用 jQuery 之类的库（即`$(document).ready()`），以确保在执行脚本之前已加载文档。

# haskell - Haskell RSA 示例

> ID：13523200
> 
> 赞同：3
> 
> 时间：2012-11-23T04:41:52.707
> 
> 标签：haskell, rsa

我正在尝试使用`Crypto.Cipher.RSA`，并且正在努力进行加密和签名。我看过[hackage页面](http://hackage.haskell.org/packages/archive/cryptocipher/0.3.0/doc/html/Crypto-Cipher-RSA.html#t:HashASN1)。

`encrypt`我应该如何使用/`decrypt`和`sign`/`verify`进程实现往返示例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T06:34:10.217

你的问题让我很担心。也许我对文森特的工作太熟悉了，但我觉得如果您了解操作，那么使用该库将是直截了当的，或者您至少会有非常具体的问题。下面，我将介绍您要求的两个示例，并尝试停下来解释每个可能是“曲线球”的项目。

```
{-# LANGUAGE OverloadedStrings #-}
module Main where

import Crypto.Cipher.RSA
import Crypto.Random.AESCtr
import Crypto.Random
import qualified Data.ByteString.Char8 as B
import Crypto.Hash.SHA256 (hash) 
```

我们使用的包是：cryptocipher（您可能在问题中提到过）、cprng-aes（用于安全随机数生成器）、crypto-api（加密例程的接口，但我们将仅限于RNG 接口）、字节串和加密哈希（签名/验证操作通常可以通过哈希函数参数化）。

现在让我们加密和解密一个字符串，然后验证这是身份。

```
main = do
    g <- newGenIO :: IO AESRNG 
```

crypto-api 接口用于生成随机数。因为这是一个重载函数，我们明确指定了所需的随机数生成器类型，`AESRNG`.

```
 let Right ((pub,priv),g1) = generate g (512 {- number of bits large -}) (3 {- a prime -})
        msg = "This is my message"
        Right (ct,g2) = encrypt g1 pub msg 
```

生成密钥需要位大小（我们在这个演示中使用了一个相当低的值，512 位），任何超过 2 的素数都可以生成，我只选择了 3。

```
 print $ decrypt priv ct
    print $ decrypt priv ct == Right msg 
```

结果如预期：

```
Right "This is my message"
True 
```

签名并没有太大的不同，只是获取一个RNG，生成密钥，并且当你签名时一定要指定散列函数和你想绑定的任何元数据。我选择了 SHA256（参见上面的导入）并且没有元数据 ( `B.empty`)。

```
let Right sig = sign hash B.empty priv msg
print (verify hash B.empty pub msg sig) 
```

结果是`Right True`。

我希望大多数用户会为其中一些操作制作自己的功能。

```
mySign q msg = sign hash B.empty q msg
myVerify p msg sig = verify hash B.empty p msg sig 
```

我认为文森特和我将来可以做一些事情来帮助人们（请建议在此列表中添加）：

*   不是每个人都遵循从黑线鳕链接`CryptoRandomGen`到 crypto-api 的链接，那些这样做的人可能会使用指向`cprng-aes`和`drbg`包的指针。

*   用示例记录所有函数（糟糕的文档示例： 的`Integer`值`generation`？我阅读了源代码。验证的两个`ByteString`值的顺序？我猜测约定并阅读源代码以确认。）

*   在文森特的模块中提供这样的教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T10:33:31.010

您可以查看该软件包附带的基准和测试（可[浏览的源代码](https://github.com/vincenthz/hs-cryptocipher)）。

# file - 使用批处理脚本解析txt文件中的文本行？

> ID：13523202
> 
> 赞同：1
> 
> 时间：2012-11-23T04:42:19.023
> 
> 标签：file, parsing, batch-file

所以我目前正在处理一个扫描网络的批处理文件。我所做的是创建一个文本文件，其中只有网络上响应 ping 请求的每台计算机的 IP，并且 ping 请求的输出保存到名为 IPAdresses.txt ::===== 的文件中==================================================== ====================

```
setlocal enabledelayedexpansion
@echo off 
```

::文件重置和变量

```
echo. > %~dp0Logs\IPAddresses2.txt
SET fl=%~dp0Logs\IPAddresses.txt 
```

::此命令执行 ping 请求并仅将回复保存到 %~dp0Logs\IPAddresses.txt。::每个返回的 ping 都会在文件中创建一行，如下所示“Reply from 192.168.1.1: bytes=32 time=2ms TTL=64”。

```
FOR /L %%i IN (1,1,254) DO ping -n 1 192.168.1.%%i | FIND /i “Reply” >> %fl% 
```

::此命令解析文件中的“Reply from 192.168.1.1: bytes=32 time=2ms TTL=64”行并将输出保存到 %~dp0Logs\IPAddresses2.txt。

```
for /f "usebackq tokens=3" %%t in (`findstr /b /c:Reply from %fl% `) do (
echo %%t >> %~dp0Logs\IPAddresses2.txt
) 
```

：： - - - - - -问题 - - - - - -

::问题是解析。最后一条命令只会解析“192.168.1.1:”，这是因为它只需要行中的 3 个 Token（或字符串中的第三组字符）。我需要从“192.168.1.1:”中删除“:”。为了清楚起见，我想删除 IP 地址末尾的分号和以下空格。

::我试图将每一行放入一个变量并剪切尾随字符，但我无法让它工作。::或者有没有办法改变 FOR 命令来做到这一点？

我已经搜索了两天并尝试了各种解决方法，但没有运气。我只需要文本文件中的 IP 即可获得更多功能和网络范围的 NET 命令。

任何帮助将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T04:58:08.640

回答永远不会太晚，嗯？这可以让你大部分时间到达那里。可能有更干净的方法可以做到这一点，但我尽量遵循您的代码。

```
setlocal enabledelayedexpansion
@echo off
SET fl=%~dp0Logs\IPAddresses.txt
set net=10.2.10.
set start=71
set end=75

  FOR /L %%i IN (%start%,1,%end%) DO ping -n 1 %net%%%i | findstr /i Reply >> %fl%
  for /f "usebackq tokens=3" %%t in (`findstr /b /c:Reply from %fl% `) do (
  set ip=%%t
  set ip=!ip:~0,-1!
echo !ip!
) 
```

# vb.net - 如何通过字符串名称引用枚举？

> ID：13523205
> 
> 赞同：0
> 
> 时间：2012-11-23T04:42:40.287
> 
> 标签：vb.net, types, enums

我想通过根的字符串名称来引用枚举。请注意，我希望引用枚举，而不是枚举成员。

stackoverflow 上有很多帖子描述了如何通过其名称来引用枚举成员（例如 [，如何根据其名称检索枚举成员](https://stackoverflow.com/questions/8724387/how-to-retrieve-an-enum-member-given-its-name)），但我没有找到任何关于如何通过其根名称来引用枚举的信息。

进一步澄清；

```
Enum MyEnumA : Quiet : Noisy : End enum
Enum MyEnumB : Big : Small : Gigantic : End enum

Sub Foo(strAction as string)
    ' Depending on value of strAction, i want to create a list of either MyEnumA or MyEnumB members
    ' I know i can't do the following, it's just to make clear the direction i'm wanting to go -
    Dim lstMembers As New List(Of CType(strAction,[Enum]))   
    '....
end function 
```

按照下面的好建议，我已经尝试过了；

```
Dim enumType As Type = System.Type.GetType("ExcelInterface.clsBTAnalyseRslts+" & "strAction")
Dim lstFldIndx As New List(Of enumtype)   'Fails to compile this line as doesn't recognize enumtype as defined 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:10:16.177

试一试，它会创建一个数组，以便您稍后将其更改为 List(Of x...)：

```
Sub Foo(ByVal strAction As String)

    Dim exAssembly = Reflection.Assembly.GetExecutingAssembly

    Dim enumType = exAssembly.GetTypes.First(Function(f) f.Name = strAction)

    Dim myEnum = [Enum].GetValues(enumType)

End Sub 
```

[我在这里](https://stackoverflow.com/questions/9854900/instantiate-an-class-from-its-string-name)找到了一个有趣的帖子，它给了我一些方向。

用法：

```
Foo("MyEnumA") 
```

我会让你做一些错误处理和检查：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:30:15.650

这是一个代码块，它将枚举转换为字符串，然后根据字符串获取类型。它将向您展示如何获取类型以及如何格式化字符串。其余的应该很简单。

```
Dim obj As MyEnumA
Dim t As Type = obj.GetType()
Dim s As String = t.FullName
Dim t2 As Type = System.Type.GetType(s) 
```

然后执行此操作以获取值：

```
Dim Members() As String
Members = System.Enum.GetNames(t2) 
```

变量 s 看起来像这样“namespace.class + MyEnumA”，所以你需要做的就是以编程方式创建这个字符串并将它发送到一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T11:19:05.257

Ric 的回答对我来说不太奏效，因为我的 Enum 与我的代码不在同一个位置，所以这就是我最终管理它的方式（我使用 VB，但我将添加 C# 以供参考）：

### VB

```
Dim EnumName As String = "MyEnum"
Dim MyAssembly As System.Reflection.Assembly = System.Reflection.Assembly.GetAssembly(GetType(My.Assembly.Location))
Dim MyEnum As System.Type = MyAssembly.GetType("My.Assembly.Location+ClassName+" & EnumName)
Dim EnumNames As String() = MyEnum.GetEnumNames()
For intVal As Integer = 0 To EnumNames.Length - 1
    ' EnumNames(intVal) = Name of Enum Value
    ' intVal = Enum Value
Next 
```

### C＃

```
string EnumName = "MyEnum";
System.Reflection.Assembly MyAssembly = System.Reflection.Assembly.GetAssembly(typeof(My.Assembly.Location));
System.Type MyEnum = MyAssembly.GetType("My.Assembly.Location+ClassName+" + EnumName);
string[] EnumNames = MyEnum.GetEnumNames();
for (int intVal = 0; intVal <= EnumNames.Length - 1; intVal++) {
    // EnumNames(intVal) = Name of Enum Value
    // intVal = Enum Value
} 
```

希望它会节省某人的宝贵时间:)。

# java - 在Java中添加两个浮点值

> ID：13523207
> 
> 赞同：-3
> 
> 时间：2012-11-23T04:42:52.817
> 
> 标签：java, floating-point

实际上，我尝试在 Java 中添加两个浮点值，如下所示：

```
import java.text.DecimalFormat;
class ExactDecimalValue
{        
    final strictfp static public void main(String... arg)
    {    
       float f1=123.00000f;           
       float f2=124.00000f;           
       float f3=f1+f2;

       System.out.println(f1+f2);
       System.out.println("sum of two floats:"+f3);

       /*my expected output is:247.00000
         but comming output is:247.0   and 247*/   
    }     
} 
```

现在我可以做些什么来获得这种格式的值：247.00000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:52:10.360

这将起作用：

```
float f1=123.00000f;

float f2=124.00000f;

float f3=f1+f2;

System.out.println(f1+f2);
System.out.printf("%.5f", f3); 
```

每当我想格式化浮点数时，我总是使用 printf。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-04T19:44:12.180

您可以使用 DecimalFormat 类来设置精度

```
float f1=123.00000f;
float f2=124.00000f;
float f3=f1+f2;
DecimalFormat f = new DecimalFormat("0.00000");
System.out.println(f.format(f3)); 
```

输出将是 247.00000

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:49:52.537

并不是说实际的加法是错误的，只是打印出来的值是假设您不需要确切的值，用外行的话来说......有关浮点精度的更多信息，请参阅：[舍入误差](http://en.wikipedia.org/wiki/Round-off_error)。

请参阅有关指定浮点数的十进制输出的答案：[如何在 Java 中显示具有 2 个小数位的浮点数据的输出？](https://stackoverflow.com/questions/2538787/how-to-display-an-output-of-float-data-with-2-decimal-places-in-java)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-08-12T13:55:49.310

方法一：

```
Float f3 = Float.sum(f1, f2); 
```

方法二：

```
Float f3 = f1.floatValue()+f2.floatValue(); 
```

# mongodb - 如何在 MongoDB 中为复杂值线程安全更新记录？

> ID：13523210
> 
> 赞同：2
> 
> 时间：2012-11-23T04:43:26.370
> 
> 标签：mongodb

我有一个数据库如下：

```
score:0
timeScore:86400
totalScore:0
time:1234567777  // Any time stamp 
```

现在每次用户投票

```
increment($inc) score by +1 
```

然后我将 timeScore 更新为 eg `(86400 / nowTimestamp() - time + 1 )` 然后我将 totalScore 更新为`(timeScore + score)`

例如：对于第二次更新后的最终值：

```
score:1
timeScore:86400
totalScore:86401
time:1234567777 
```

问题是，在我的外部计算过程中，可能是另一个用户在分数上加了 +1 并计算了总数并在我更新数据之前写入了它的值，因此会出现数据损坏。

现在我该如何解决这个问题或如何使其线程安全？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T22:21:59.193

您应该能够使用 mongodb`findAndModify`函数，它允许您进行原子更新，这意味着当您的文档被更改时，值不能被另一个查询更新。[此处](http://www.mongodb.org/display/DOCS/Atomic+Operations)提供的文档。

您可能还希望在将数据推送到存储之前进行尽可能多的计算，因为这将消除读取然后写入的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-04T06:40:17.990

一种好方法是使用 OptimisticConcurrency 保存。使用可以实现线程安全的每个集合创建一个版本。

# ant - 创建构建文件以运行项目

> ID：13523212
> 
> 赞同：-1
> 
> 时间：2012-11-23T04:43:30.733
> 
> 标签：ant, build, batch-file

我得到了以下要求。

1.  使用 ANT 构建创建一个构建文件，该构建文件从源文件创建一个 .jar（源位于***D:\Root\Products\Application\Files***中）

2.  创建一个 bat 文件以运行保存在不同位置的 .jar（例如在 ***D:\Root\Products\Application\ReleaseBuild***中）

我应该从哪里开始？我是构建文件的新手，不知道如何开始。我对构建教程有点困惑。

请有人建议一种开始的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:07:50.910

1.  从将代码编译到临时目录的 ant-task 开始（ant-task: `javac`）
2.  将这些文件打包到 jar (ant-task `jar`) - 请参阅，第 1 步是必不可少的，因为`jar`它只捆绑文件，但不会为您编译源代码
3.  使用 ant-task 创建 bat 脚本`echo`

# .net - 在 FlowDocument 中显示多个 RTF 字符串

> ID：13523216
> 
> 赞同：1
> 
> 时间：2012-11-23T04:43:36.667
> 
> 标签：.net, wpf, rtf, flowdocument

我有多个 RTF 字符串，我想合并并显示以进行打印，我猜是使用流文档。我已经看到了许多使用一个 RTF 字符串（流）然后使用 TextRange 对象将其映射到流文档的示例，但这只会将一个 RTF 字符串映射到流文档，添加多个 RTF 的最佳方法是什么与其他 FlowDocument 类型的东西（例如嵌入图像）一起在文档中？

# javascript - IE8 中的 onbeforeunload 事件导致问题

> ID：13523224
> 
> 赞同：0
> 
> 时间：2012-11-23T04:44:44.917
> 
> 标签：javascript, jquery, jquery-events

我在我们的应用程序中使用 jQuery。我们有一些 Javascript 代码可以验证您是否修改了任何数据。如果用户输入一些值并单击其他链接或其他内容，则会弹出以下内容：

> “您确定要离开此页面吗？...按确定继续，或按取消留在当前页面。”

它在 IE7、IE9 和 Firefox 等浏览器中运行良好。但在 IE8 中，它会生成警告框，上面写着：

> “停止运行此脚本。此页面上的脚本导致您的网络浏览器运行缓慢如果继续运行，您的计算机可能会变得无响应”。

以下是导致问题的我的 Javascript。

```
$(document).ready(function()
    {
        // Flag to display warning.
        // If needToConfirm = true warning message will be displayed. 
        needToConfirm = false; 
        window.onbeforeunload = askConfirm;

        function askConfirm()
        {
            if (needToConfirm)
            {
                // Message to be displayed in Warning.
                return "Your data will be lost.";
            }       
        }

        // Add all form elements in argument.
        $("select,input,textarea").live('change',function ()
        {
            needToConfirm = true;
        });

        // Add all form elements in argument.
        $("select,input,textarea").live('keypress',function ()
        {
            needToConfirm = true;
        });

        // Use "class = noWarning" for save or cancel button.
        $(".noWarning").click(function () 
        {
            needToConfirm = false;
        });

    }); 
```

是`window.onbeforeunload = askConfirm;`代码问题吗？

> 编辑

发现以下行导致IE8出现问题

```
$("select,input,textarea").live('keypress',function ()
        {
            needToConfirm = true;
        }); 
```

是否有其他选择。

# javascript - 在浏览器关闭时显示警报，但在注销时关闭时不显示警报

> ID：13523226
> 
> 赞同：0
> 
> 时间：2012-11-23T04:45:01.890
> 
> 标签：javascript, jquery

在我的应用程序中，当用户注销时，浏览器已关闭。在浏览器关闭时，我会发出警报。现在我想要的是，如果我直接关闭浏览器窗口警报应该会出现，但是如果通过注销警报关闭窗口则不应该出现，因为我已经显示了另一个注销确认消息。

```
function closeEditorWarning(){
    for (var i=0;i<childWindow.length;i++) {
        if (childWindow[i] && !childWindow[i].closed) childWindow[i].close();
        if(i==0) {
            alert("This will close all open e-App applications");
        }
    }
    window.close();  
}
window.onbeforeunload = closeEditorWarning; 
```

这是我的注销代码

```
 $('#'+id).click(function(event){
        event.preventDefault();
        $('#centerContent').load('<%=request.getContextPath()%>/'+target);
    });
} else {
    $('#'+id).click(function(event){
        event.preventDefault();
        var r=confirm("logout");
        if (r==true)
        {
            flag=true;
            for (var i=0;i<childWindow.length;i++) {
                if (childWindow[i] && !childWindow[i].closed) childWindow[i].close();
            }
            window.close();
        } else { }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:02:57.790

设置具有用户登录状态并关闭检查的隐藏字段：

```
if($('#isUserLogIn').text()=='true')
{
  //show alert
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:58:44.223

使用旗帜。单击注销时设置标志。

在显示警报之前检查标志

# css - 我们可以将 Model.item.value 作为 Mvc3 中的 CSS 类传递吗？

> ID：13523231
> 
> 赞同：2
> 
> 时间：2012-11-23T04:45:22.973
> 
> 标签：css, asp.net-mvc-3, razor

我有一个疑问：我们可以传递`Model.item.value`给 MVC3 中的 CSS 类吗？

例如：

```
@foreach (var items in Model)
{
    @Html.TextBox(@items.ShortDesc, @items.SfldDefault, new { @class = "@items.ShortDesc"})
} 
```

我想将 my`@items.ShortDesc`作为 CSS 类打印，但它在这里将其作为字符串.. 知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:48:07.220

您只需要在没有引号和`@`符号的情况下编写它（不需要这些，因为您已经在代码块中）：

```
@Html.TextBox(items.ShortDesc, items.SfldDefault, new { @class ="abc "+ items.ShortDesc }) 
```

# sql - SQL 选择将行数据显示为 varchar 项的列

> ID：13523235
> 
> 赞同：0
> 
> 时间：2012-11-23T04:46:08.443
> 
> 标签：sql, select, row

这是我用来生成表的查询：

```
SELECT cu.idchanneluser AS Approver,
     mcr.idrule AS Rule,
     mrd.idseq AS Seq,
     mcr.idcust AS CustID,
     cu.iduser AS USERID
FROM mstchanneluser cu,
     mstcatruledetail mrd,
     mstcatrule mcr
WHERE idchannel='01'
     AND mrd.idlist=cu.iduser
     AND mrd.idrule=mcr.idrule
     AND mcr.nbrauth='2'
     AND mcr.isautoauth='N' 
```

这是结果的快照：

![在此处输入图像描述](../Images/4d2a24409e9fe2de226c4eb4c8f279af.png)

但我想要这样的结果：

```
 FirstAuthorizer SecondAuthorzier Rule    
   rohitcorp        ajitcorp         3090  
   CORPTEST         TESTCORP         8634
   ABHIMAKER        CORPTEST         11705 
```

我试过这个查询：

```
SELECT CASE WHEN idseq = '0' THEN idchanneluser ELSE NULL END AS Approver,
    case when idseq = '1' THEN idchanneluser  ELSE NULL END AS secondApprover,
    cu.idchanneluser AS Approver,
    mcr.idrule AS Rule,
    mrd.idseq AS Seq,
    mcr.idcust AS CustID,
    cu.iduser AS USERID
FROM mstchanneluser cu, 
    mstcatruledetail mrd, 
    mstcatrule mcr 
WHERE idchannel='01'
    AND mrd.idlist=cu.iduser
    AND mrd.idrule=mcr.idrule 
    AND mcr.nbrauth='2'
    AND mcr.isautoauth='N' 
```

它会返回我这个结果检查快照。

![在此处输入图像描述](../Images/158e9e5f4eaf5f7203efd34c842f5da8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T04:48:30.837

这是从您的第二个查询派生的，您只需要使用`MAX`它们并将它们分组`mcr.idrule`

```
SELECT MAX(CASE WHEN idseq = '0' THEN idchanneluser ELSE NULL END) AS Approver
    ,  MAX(CASE WHEN idseq = '1' THEN idchanneluser ELSE NULL END) AS secondApprover
    ,  mcr.idrule AS RULE
FROM   mstchanneluser cu
    ,  mstcatruledetail mrd
    ,  mstcatrule mcr
WHERE idchannel = '01'
    AND mrd.idlist = cu.iduser
    AND mrd.idrule = mcr.idrule
    AND mcr.nbrauth = '2'
    AND mcr.isautoauth = 'N'
GROUP BY mcr.idrule 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:46:54.560

oracle 中的另一种方法，具有分析功能超前滞后

```
select tab.y FirstAuthorizer,tab.x SecondAuthorzier,tab.rule from
(
select lead(appprover,0) over (partition by rule order by seq) x ,
lag(appprover,1) over (partition by rule order by seq) y,
rule
from tbl ) tab
where tab.y is not null; 
```

# javascript - 在 iPad 上，html 5 视频标签的 src 属性中的 http url 不起作用

> ID：13523239
> 
> 赞同：2
> 
> 时间：2012-11-23T04:46:35.500
> 
> 标签：javascript, css, html

我无法在***ipad***上的 html 5 视频标签的 src 属性中使用 http url 加载视频。使用静态和动态方式来做到这一点。但是它在网络浏览器上运行良好。这是我的代码：

```
Static:

     <!DOCTYPE html>
    <html>
    <body>

    <video width="320" height="240" controls="controls">
      <source src="http://xyz.mp4" type="video/mp4">
Your browser does not support the video tag.
    </video>

    </body>
    </html> 
```

动态的：

```
function Video(){
           var html = "";
html += '<video id="someVideo" width="712" height="500" controls="controls" autoplay="autoplay">';
html += '<source src="http://xyz.mp4"  type="video/mp4" />';
html += '</video>';
$("#page33video2").html(html);

$('#someVideo').attr('src', 'http://xyz.mp4');
$('#someVideo')[0].load();

} 
```

有没有办法在 html 5 视频标签的 src 属性中使用 http url 加载视频？

提前致谢。维卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:58:21.240

如果你想动态设置视频的 src，你可以这样做

```
<!DOCTYPE html> 
<html> 
<body> 
<video id="video1" style="display: none;">
</video>
<script>
function playVideo() {
document.getElementById("video1").style.display = "inline";
myVid=document.getElementById("video1");
myVid.src= "http://www.w3schools.com/tags/mov_bbb.mp4";
myVid.play();
}
</script> 
<p onclick="playVideo();">Click me to play</p>
It may take some time to load Video
</body> 
</html> 
```

:)

# java - 方法 - 调用方法

> ID：13523241
> 
> 赞同：1
> 
> 时间：2012-11-23T04:46:44.213
> 
> 标签：java, methods

```
import java.util.Scanner;
public class Rectangle
{
public static void main(String[] args)
{
    -Don't know how to call method here-
}

/**
 * returns the area of a rectangle
 * @param height the height of the rectangle
 * @param width the width of the rectangle
 */
public static int area (int length, int width)
{
    return length * width;
}

/**
 * returns the perimeter of a rectangle
 * @param height the height of the rectangle
 * @param width the width of the rectangle
 */
public static int perimeter (int length, int width)
{
    return length + width;
}

/**
 * returns the details of the rectangle
 * @param height the height of the rectangle
 * @param width the width of the rectangle
 */
public static void printRectangleDetails (int length, int width)
{
    System.out.println ("This is the length of the rectangle " + length);

    System.out.println ("This is the width of the rectangle " + width);

    System.out.println (("This is the perimeter of the rectangle " + (length + width)));

    System.out.println (("This is the area of the rectangle " + (length * width)));
}

/**
 * Read in an integer and return its value
 * @param the prompt to be shown to the user
 */
public static int readInteger(String prompt)
{
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter an integer");
    int input = scan.nextInt();
    return input;
} 
```

}

我正在尝试调用方法 readInteger 来提示用户插入矩形的高度和宽度。这是我对方法的第一次体验，因此将不胜感激，我也不确定 readInteger 方法是否正确。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:48:26.100

您调用一个方法，通常使用以下语法：

```
methodName(); 
```

例子：

要调用 area 方法，您说：

```
public static void main(String[] args)
 {
      area(2,3);
 } 
```

注意：在这种情况下，该对象是隐含的，因为您的 area 方法对于包含 main 方法的矩形类是公共的和静态的。

如果 area 位于不同的类中，您将通过首先实例化然后对对象进行方法调用来以不同的方式调用方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T05:09:10.407

在您的方法中，您可以通过调用您在类中创建的方法`main()`来读取矩形的长度和宽度：`readInteger()``Rectangle`

```
 int length = readInteger(" For Length ");
 int width = readInteger("For Width ");
 printRectangleDetails(length,width); 
```

首先，将此行添加到 readInteger() 方法：

```
 System.out.println (prompt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:07:48.707

试试这个

```
 public static void main(String[] args) {
    Scanner s= new Scanner(System.in) ;
    System.out.print("Enter length : " );
    int len=Integer.parseInt( s.nextLine()) ;
    System.out.print("\nEnter width : ");
    int wd=Integer.parseInt( s.nextLine()) ;
    printRectangleDetails(len,wd);     
 } 
```

# android - JellyBean Webview 将在使用键盘导航时自动聚焦带有突出显示的 html 元素并且无法禁用它

> ID：13523251
> 
> 赞同：4
> 
> 时间：2012-11-23T04:48:12.090
> 
> 标签：android, android-webview

我在使用 JellyBean 时遇到问题，因为每当我使用键盘导航时，它都会自动聚焦我的超链接和输入的 html 元素。它创建了一个我无法用 css 隐藏的蓝色高光。

```
* {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);  
} 
```

即使我确实将 z-index:-1 设置为每个 html 元素以禁用焦点，但是当我使用键盘导航时，JellyBean 仍然会自动对焦它们中的每一个。

这是我的html代码：

```
<html>
<head>
    <title></title>
</head>
<body>
    <a tabIndex="-1" href="http://www.yahoo.com">yahoo</a>
    <a tabIndex="-1" href="http://www.google.com">google</a>
    <a tabIndex="-1" href="http://www.msn.com">msn</a><br/>
    <input type="button" name="" tabIndex="-1" value="yahoo">
    <input type="button" name="" tabIndex="-1" value="google">
    <input type="button" name="" tabIndex="-1" value="msn">
</body>
</html> 
```

这是我的 webview 配置：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/mainLayout"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<WebView
    android:id="@+id/webView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:focusable="false" />

</RelativeLayout> 
```

这是我的活动：

```
package com.example.tony;
import android.annotation.TargetApi;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class WebActivity extends Activity {
    private WebView mainWebView;
    private WebSettings webSettings;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.web_view);
        mainWebView = (WebView) findViewById(R.id.webView);

        webSettings = mainWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);      
        webSettings.setPluginState(WebSettings.PluginState.ON);      
        mainWebView.setWebChromeClient(new WebChromeClient());
        mainWebView.setScrollBarStyle(WebView.SCROLLBAR_POSITION_DEFAULT);
        mainWebView.loadUrl("http://192.168.2.145/test/nav.html");
    }

    @TargetApi(16)
    public void setURL(){
          webSettings.setAllowUniversalAccessFromFileURLs(true);
    }
} 
```

使用 nexus 7 和其他一些软糖设备进行测试。是否有解决方案可以禁用对 html 元素级别的关注或禁用键盘导航自动对焦？

# python - Python - 保持 Tkinter 窗口打开？

> ID：13523252
> 
> 赞同：0
> 
> 时间：2012-11-23T04:48:13.120
> 
> 标签：python, tkinter

现在我正在使用 Tkinter 提示用户输入文件。

```
Tk().withdraw() # keep the root window from appearing
file_path = askopenfilename() # show dialog box and return file path

# check if extension is valid 
```

如果用户选择了错误的文件类型，我会用一个新窗口重新提示他们。

除非所选文件有效，否则有没有办法保持相同的 tkinter 窗口打开？

所以而不是这个：

```
# 1) prompt user to open file
# 2) close file browser window
# 3) check if extension is valid
# 4) if not, print error and re-prompt user with new browser window 
```

我想做这个：

```
# 1) prompt user to open file
# 2) check if extension is valid while keeping window open
# 3) if not, print error, re-prompting with same window 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:18:38.830

如果您希望用户打开特定的文件类型，请使用`filetypes`参数。它需要一个文件类型定义列表，您将其指定为描述和扩展名：

```
filepath = askopenfilename(filetypes = [
    ('Text Files', '.txt'),
    ('Python Scripts', '.py'),
    ('INI Files', '.ini')
]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:55:17.930

您可以将文件浏览器窗口设置为仅显示您希望用户选择的文件类型，但他们可以通过选择类型下拉框来轻松解决这个问题。但是，您可以在文件选择时（用户单击确定以选择文件并关闭文件浏览器窗口）检查文件扩展名是否是您想要的类型之一，如果不是简单的清除文件路径变量并调用文件再次浏览器打开功能。这样，他们就会被困在选择文件中，直到他们选择了正确的文件类型。然而，这确实提出了他们可能不知道他们为什么回到他们开始的地方的问题，因此您可能希望在重新打开文件浏览器窗口之前添加一个弹出窗口或其他内容，以使其更加用户友好。

# java - 'wsgen' 不是内部或外部命令、可运行程序或批处理文件

> ID：13523256
> 
> 赞同：3
> 
> 时间：2012-11-23T04:48:40.327
> 
> 标签：java, path, cmd, wsgen

好吧，在尝试使用 wsgen 创建 Web 服务时，我似乎确实遇到了这个错误。截图中的细节![未找到wsgen](../Images/6eec60413e72ec0f922a06574e8d1f3c.png)

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-04T09:18:07.530

请按照以下步骤操作

1.进入控制面板

2.然后进入系统

3.在那去“高级系统设置”

4.点击环境变量

5.在系统变量部分去路径和编辑

6.在最后放一个分号并放你的jdk bin路径。

就我而言，我使用的是 jdk 1.7。所以我在我的环境变量路径中放入了以下路径。

我的 jdk 路径：**“C:\Program Files\Java\jdk1.7.0_13\bin”**

*您可能需要重新启动电脑才能使其正常工作。*

有关更多说明和图片视图，请访问[此](http://helpdeskgeek.com/how-to/fix-not-recognized-as-an-internal-or-external-command/)链接。

**注意：**在上面的链接中没有提到 jdk 路径。

# android - 如何在 MonoDevelop 中编译 MonoDroid App 时修复“OutOfMemoryError: java heap space”

> ID：13523257
> 
> 赞同：12
> 
> 时间：2012-11-23T04:48:53.760
> 
> 标签：android, build, xamarin.android, monodevelop, xamarin

当我尝试**编译**（不执行）我的一个项目时，我最近收到以下错误：

```
Tool /usr/bin/java execution started with arguments: -jar /Applications/android-sdk-mac_x86/platform-tools/lib/dx.jar --no-strict --dex --output=obj/Debug/android/bin/classes.dex obj/Debug/android/bin/classes /Developer/MonoAndroid/usr/lib/mandroid/platforms/android-8/mono.android.jar FlurryAnalytics/Jars/FlurryAgent.jar Jars/android-support-v4.jar 

    UNEXPECTED TOP-LEVEL ERROR:
    java.lang.OutOfMemoryError: Java heap space
        at com.android.dx.rop.code.RegisterSpecSet.<init>(RegisterSpecSet.java:49)
        at com.android.dx.rop.code.RegisterSpecSet.mutableCopy(RegisterSpecSet.java:383)
        at com.android.dx.ssa.LocalVariableInfo.mutableCopyOfStarts(LocalVariableInfo.java:169)
        at com.android.dx.ssa.LocalVariableExtractor.processBlock(LocalVariableExtractor.java:104)
        at com.android.dx.ssa.LocalVariableExtractor.doit(LocalVariableExtractor.java:90)
        at com.android.dx.ssa.LocalVariableExtractor.extract(LocalVariableExtractor.java:56)
        at com.android.dx.ssa.SsaConverter.convertToSsaMethod(SsaConverter.java:50)
        at com.android.dx.ssa.Optimizer.optimize(Optimizer.java:99)
        at com.android.dx.ssa.Optimizer.optimize(Optimizer.java:73)
        at com.android.dx.dex.cf.CfTranslator.processMethods(CfTranslator.java:273)
        at com.android.dx.dex.cf.CfTranslator.translate0(CfTranslator.java:134)
        at com.android.dx.dex.cf.CfTranslator.translate(CfTranslator.java:87)
        at com.android.dx.command.dexer.Main.processClass(Main.java:487)
        at com.android.dx.command.dexer.Main.processFileBytes(Main.java:459)
        at com.android.dx.command.dexer.Main.access$400(Main.java:67)
        at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:398)
        at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
        at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
        at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
        at com.android.dx.command.dexer.Main.processOne(Main.java:422)
        at com.android.dx.command.dexer.Main.processAllFiles(Main.java:333)
        at com.android.dx.command.dexer.Main.run(Main.java:209)
        at com.android.dx.command.dexer.Main.main(Main.java:174)
        at com.android.dx.command.Main.main(Main.java:91) 
```

其他项目按预期构建。我想我需要增加这个 java 构建步骤的堆大小？但是怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-07-18T20:45:06.797

Xamarin Studio 中有一个选项可以增加 Java 堆大小。

项目选项 -> Android 构建 -> 高级 -> Java 堆大小。

![在此处输入图像描述](../Images/733bcbc73f483c886e763ba3f7a38a28.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T20:00:51.347

[这个建议](https://stackoverflow.com/questions/880855/increase-the-java-heap-size-permanently)成功了：

```
$ export _JAVA_OPTIONS="-Xmx1g"
$ /Applications/MonoDevelop.app/Contents/MacOS/MonoDevelop 
```

我的项目中有一些 jar 文件。Flurry、Maps 和 Newtonsoft... 显然这足以轰炸构建。

感谢出色的 Xamarin 支持团队的快速响应并指出了解决方案！他们正在努力减少外部 jar 所需的内存占用。

# ruby-on-rails - jruby on rails oracle throwing 错误

> ID：13523259
> 
> 赞同：-1
> 
> 时间：2012-11-23T04:48:59.577
> 
> 标签：ruby-on-rails, jrubyonrails

我是 jruby on rails 的新手。我已经使用 rails 创建了一个基本应用程序并生成了 war 文件并部署在 tomcat 容器中。当我启动应用程序时，我收到以下错误。我正在使用 oracle 并取消了 config/warble.rb 文件下的以下条目的注释：

```
config.gems += ["activerecord-oracle_enhanced-adapter", "jruby-openssl"]

Nov 22, 2012 8:36:46 PM org.apache.catalina.core.ApplicationContext log
SEVERE: ERROR: application error
org.jruby.rack.RackInitializationException: ERROR: ActiveRecord oracle_enhanced adapter could not load Oracle JDBC driver. Please install ojdbc6.jar library.
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activerecord-oracle_enhanced-adapter-1.4.1/lib/active_record/connection_adapters/oracle_enhanced_jdbc_connection.rb:35:in `(root)'
    from org/jruby/RubyKernel.java:1019:in `require'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activerecord-oracle_enhanced-adapter-1.4.1/lib/active_record/connection_adapters/oracle_enhanced_connection.rb:1:in `(root)'
    from org/jruby/RubyKernel.java:1019:in `require'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activerecord-oracle_enhanced-adapter-1.4.1/lib/active_record/connection_adapters/oracle_enhanced_connection.rb:116:in `(root)'
    from org/jruby/RubyKernel.java:1019:in `require'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activerecord-oracle_enhanced-adapter-1.4.1/lib/active_record/connection_adapters/oracle_enhanced_adapter.rb:1:in `(root)'
    from org/jruby/RubyBasicObject.java:1699:in `instance_eval'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activerecord-oracle_enhanced-adapter-1.4.1/lib/active_record/connection_adapters/oracle_enhanced_adapter.rb:36:in `(root)'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activerecord-oracle_enhanced-adapter-1.4.1/lib/activerecord-oracle_enhanced-adapter.rb:1:in `(root)'
    from org/jruby/RubyArray.java:1612:in `each'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activerecord-oracle_enhanced-adapter-1.4.1/lib/activerecord-oracle_enhanced-adapter.rb:12:in `OracleEnhancedRailtie'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
    from /tomcat/tomcat/webapps/phonebook2/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/lazy_l 
```

谢谢和问候， Pradeep

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:47:35.860

解决。在tomcat的webapps目录下WEB-INF的lib目录下添加ojdbc6.jar作为依赖。

# javascript - IE 以外的浏览器不支持 javascript 和 iframe

> ID：13523260
> 
> 赞同：0
> 
> 时间：2012-11-23T04:49:06.030
> 
> 标签：javascript, html, iframe, safari, cross-browser

我在 IE 浏览器中运行一个带有 iframe 和 javascript 的简单 html 文件，但它在 safari、firefox 等其他浏览器中无法正常工作。

在 Safari 中，仅显示 Iframe 框，但不显示其中的内容。

请澄清为什么 safari 不支持它？iframe 的替代品是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:05:02.503

您可以使用`<embed>`标签，其行为类似于 iframe

这是示例

```
<!doctype html >
<html >
<head>
<title>embed  Tag </title>
</head>
<body>
<p><b>Example of embed tag in HTML5.</b></p>
<embed src="http://www.w3schools.com" height="300" width="300" />
</body>
</html> 
```

虽然您也可以在所有浏览器上使用 iframe

这是示例

```
<!DOCTYPE html>
<html>
<body>

<iframe src="http://www.w3schools.com">
  <p>Your browser does not support iframes.</p>
</iframe>

</body>
</html> 
```

您是否尝试为 iframe 做任何不同的事情？

# javascript - 热代码推送 NodeJS

> ID：13523263
> 
> 赞同：6
> 
> 时间：2012-11-23T04:49:29.803
> 
> 标签：javascript, node.js, livereload

我一直在试图弄清楚 Node.js 上的这个“热代码推送”。基本上，我的主文件（在您键入时运行`node app.js`）包含一些设置、配置和初始化。在那个文件中，我有一个文件观察器，使用 chokidar。当我的文件被添加时，我只是`require`该文件。如果文件已更改或更新，我将删除缓存`delete require.cache[path]`，然后重新请求它。所有这些模块都不会导出任何东西，它只适用于单个全局`Storm`对象。

```
Storm.watch = function() {
    var chokidar, directories, self = this;
    chokidar = require('chokidar');
    directories = ['server/', 'app/server', 'app/server/config', 'public'];
    clientPath = new RegExp(_.regexpEscape(path.join('app', 'client')));
    watcher = chokidar.watch(directories, {
    ignored: function(_path) {
        if (_path.match(/\./)) {
            !_path.match(/\.(js|coffee|iced|styl)$/);
        } else {
            !_path.match(/(app|config|public)/);
        }
    },
    persistent: true
    });

    watcher.on('add', function(_path){
    self.fileCreated(path.resolve(Storm.root, _path));
    //Storm.logger.log(Storm.cliColor.green("File Added: ", _path));
    //_console.info("File Updated");
    console.log(Storm.css.compile('     {name}: {file}', "" +
        "name" +
        "{" +
        "color: white;" +
        "font-weight:bold;" +
        "}" +
        "hr {"  +
        "background: grey" +
        "}")({name: "File Added", file: _path.replace(Storm.root, ""), hr: "=================================================="}));
    });

    watcher.on('change', function(_path){
    _path = path.resolve(Storm.root, _path);
    if (fs.existsSync(_path)) {
        if (_path.match(/\.styl$/)) {
            self.clientFileUpdated(_path);
        } else {
            self.fileUpdated(_path);
        }
    } else {
        self.fileDeleted(_path);
    }
    //Storm.logger.log(Storm.cliColor.green("File Changed: ", _path));
    console.log(Storm.css.compile('     {name}: {file}', "" +
        "name" +
        "{" +
        "color: yellow;" +
        "font-weight:bold;" +
        "}" +
        "hr {"  +
        "background: grey" +
        "}")({name: "File Changed", file: _path.replace(Storm.root, ""), hr: "=================================================="}));
    });

    watcher.on('unlink', function(_path){
    self.fileDeleted(path.resolve(Storm.root, _path));
    //Storm.logger.log(Storm.cliColor.green("File Deleted: ", _path));
    console.log(Storm.css.compile('     {name}: {file}', "" +
        "name" +
        "{" +
        "color: red;" +
        "font-weight:bold;" +
        "}" +
        "hr {"  +
        "background: grey" +
        "}")({name: "File Deleted", file: _path.replace(Storm.root, ""), hr: "=================================================="}));
    });

    watcher.on('error', function(error){
    console.log(error);
    });

};

Storm.watch.prototype.fileCreated = function(_path) {

    if (_path.match('views')) {
    return;
    }

    try {
    require.resolve(_path);
    } catch (error) {
    require(_path);
    }

};

Storm.watch.prototype.fileDeleted = function(_path) {
    delete require.cache[require.resolve(_path)];
};

Storm.watch.prototype.fileUpdated = function(_path) {
    var self = this;
    pattern = function(string) {
    return new RegExp(_.regexpEscape(string));
    };

    if (_path.match(pattern(path.join('app', 'templates')))) {
    Storm.View.cache = {};
    } else if (_path.match(pattern(path.join('app', 'helpers')))) {
    self.reloadPath(path, function(){
        self.reloadPaths(path.join(Storm.root, 'app', 'controllers'));
    });
    } else if (_path.match(pattern(path.join('config', 'assets.coffee')))) {
    self.reloadPath(_path, function(error, config) {
        //Storm.config.assets = config || {};
    });
    } else if (_path.match(/app\/server\/(models|controllers)\/.+\.(?:coffee|js|iced)/)) {
    var isController, directory, klassName, klass;

    self.reloadPath(_path, function(error, config) {
        if (error) {
            throw new Error(error);
        }
    });

    Storm.serverRefresh();

    isController = RegExp.$1 == 'controllers';
    directory    = 'app/' + RegExp.$1;
    klassName = _path.split('/');
    klassName = klassName[klassName.length - 1];
    klassName = klassName.split('.');
    klassName.pop();
    klassName = klassName.join('.');
    klassName = _.camelize(klassName);

    if (!klass) {
        require(_path);
    } else {
        console.log(_path);
        self.reloadPath(_path)
    }

    } else if (_path.match(/config\/routes\.(?:coffee|js|iced)/)) {
    self.reloadPath(_path);
    } else {
    this.reloadPath(_path);
    }

};

Storm.watch.prototype.reloadPath = function(_path, cb) {

    _path = require.resolve(path.resolve(Storm.root, path.relative(Storm.root, _path)));
    delete require.cache[_path];
    delete require.cache[path.resolve(path.join(Storm.root, "server", "application", "server.js"))];
    //console.log(require.cache[path.resolve(path.join(Storm.root, "server", "application", "server.js"))]);
    require("./server.js");

    Storm.App.use(Storm.router);

    process.nextTick(function(){
    Storm.serverRefresh();
    var result = require(_path);
    if (cb) {
        cb(null, result);
    }
    });
};

Storm.watch.prototype.reloadPaths = function(directory, cb) {

}; 
```

一些代码不完整/未使用，因为我正在尝试很多不同的方法。

### 什么工作：

对于如下代码：

```
function run() {
   console.log(123);
} 
```

完美运行。但是任何异步代码都无法更新。

### 问题 = 异步代码

```
app.get('/', function(req, res){
   // code here..
}); 
```

如果我在 nodejs 进程运行时更新文件，则不会发生任何事情，尽管它通过文件观察程序并删除缓存，然后重新建立。另一个不起作用的例子是：

```
// middleware.js
function hello(req, res, next) {
  // code here...
}

// another file:
app.use(hello); 
```

因为 app.use 仍将使用该方法的旧版本。

### 问题：

我该如何解决这个问题？有什么我想念的吗？

请不要提出永远使用 3rd 方模块的建议。我正在尝试将功能合并到单个实例中。

## 编辑：

在研究了流星代码库（node.js 或浏览器中关于“热代码推送”的资源非常少。）并修改了我自己的实现之后，我成功地制定了一个可行的解决方案。[https://github.com/TheHydroImpulse/Refresh.js](https://github.com/TheHydroImpulse/Refresh.js)。这仍处于开发的早期阶段，但现在看起来很稳固。我也将实施一个浏览器解决方案，只是为了完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:19:01.190

删除`require`的缓存实际上并没有“卸载”您的旧代码，也不会撤消该代码所做的事情。

以下面的函数为例：

```
var callbacks=[];
registerCallback = function(cb) {
    callbacks.push(cb);
}; 
```

现在假设您有一个调用该全局函数的模块。

```
registerCallback(function() { console.log('foo'); }); 
```

在您的应用程序启动后，`callbacks`将有一个项目。现在我们将修改模块。

```
registerCallback(function() { console.log('bar'); }); 
```

您的“热补丁”代码运行，删除 `require.cache`d 版本并重新加载模块。

您必须意识到的是，现在`callbacks`有**两个**项目。首先，它具有对记录 foo 的函数的引用（在应用程序启动时添加）*和*对记录 bar 的函数的引用（刚刚添加）。

即使您删除了对模块的缓存引用`exports`，**您实际上也无法删除该模块。** 就 JavaScript 运行时而言，您只是删除了许多引用中的*一个*。您的应用程序的任何其他部分仍然可以挂在对旧模块中某些内容的引用。

这正是您的 HTTP 应用程序正在发生的事情。当应用程序首次启动时，您的模块会将匿名回调附加到路由。当您修改这些模块时，它们会将新的回调附加到相同的路由；旧的回调不会被删除。我猜你正在使用 Express，它按照添加的顺序调用路由处理程序。因此，新的回调永远不会有机会运行。

* * *

老实说，我不会使用这种方法在修改时重新加载您的应用程序。大多数人在假设环境干净的情况下编写应用程序初始化代码；您在肮脏的环境中运行初始化代码违反了该假设 - 即已经启动并运行的环境。

尝试清理环境以允许您的初始化代码运行几乎可以肯定比它的价值更麻烦。当您的基础文件发生更改时，我只需重新启动整个应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T15:19:15.603

Meteor 通过允许模块将自己“注册”为热代码推送过程的一部分来解决这个问题。

他们在他们的`reload`包中实现了这一点：

[https://github.com/meteor/meteor/blob/master/packages/reload/reload.js#L105-L109](https://github.com/meteor/meteor/blob/16cf8a26218ae4650eb36b25ee55c2b5f6a71a31/packages/reload/reload.js#L105-L109)

我`Meteor.reload`在 GitHub 上的一些插件中看到了该 API，但他们也在`session`包中使用它：

[https://github.com/meteor/meteor/blob/master/packages/session/session.js#L103-L115](https://github.com/meteor/meteor/blob/16cf8a26218ae4650eb36b25ee55c2b5f6a71a31/packages/session/session.js#L103-L115)

```
if (Meteor._reload) {
  Meteor._reload.onMigrate('session', function () {
    return [true, {keys: Session.keys}];
  });

  (function () {
    var migrationData = Meteor._reload.migrationData('session');
    if (migrationData && migrationData.keys) {
      Session.keys = migrationData.keys;
    }
  })();
} 
```

所以基本上，当页面/窗口加载时，meteor 会运行“迁移”，并且由包来定义数据/方法/等。进行热代码推送时会重新计算。

他们的[livedata 包](https://github.com/meteor/meteor/blob/master/packages/livedata/livedata_connection.js)（搜索`reload`）也使用它。

在刷新之间，他们使用[`window.sessionStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#sessionStorage).

# android - 为什么 setAlpha 在 min sdk 8 中有效，但在 min sdk 9 中无效？

> ID：13523265
> 
> 赞同：0
> 
> 时间：2012-11-23T04:49:41.277
> 
> 标签：android, android-2.2-froyo, android-sdk-2.3

我正在尝试将 Alpha 设置为我的 rowView，但我收到一条错误消息，说我需要最小 sdk 11。

```
View rowView = inflater.inflate(R.layout.main, parent, false); 
```

好吧，我知道解决此问题的方法之一是将最小 sdk 更改为 11，但我不想这样做，因为我需要最小 sdk 为 8/9。

有趣的是，我的朋友`rowView.setAlpha(-80)`在 min sdk 8，target 16 中尝试过，它运行良好，但它无法在我的 min sdk 9，target 16 中运行。

我尝试解决问题，`rowView.getBackground().setAlpha(-80)`但没有 alpha 效果。

有人能告诉我为什么它在 sdk 8 中工作，而不是 9 吗？可能出了什么问题？

*更新

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View rowView = inflater.inflate(R.layout.knowledge_main, parent, false);
TextView textView = (TextView) rowView.findViewById(R.id.label); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:51:58.877

充气时可能会出现一些问题，两个代码都可以正常工作

```
 View mView = getLayoutInflater().inflate(R.layout.activity_main, null);
    mView.setBackground(getResources().getDrawable(R.drawable.ic_launcher));
    setContentView(mView);
    mView.getBackground().setAlpha(-160);

    View mView2 = (View)((LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.activity_main, null);
    mView2.setBackground(getResources().getDrawable(R.drawable.ic_launcher));
    setContentView(mView2);
    mView2.getBackground().setAlpha(-160); 
```

# java - 列的算法，索引中的行？

> ID：13523271
> 
> 赞同：1
> 
> 时间：2012-11-23T04:50:07.033
> 
> 标签：java, c++, algorithm

假设我有一个从左到右、从上到下的索引 12（第 12 个元素）。

我有一个数组 [4] [4]。

给定一维索引 12，计算索引 [3][2] 的最快方法是什么？（一维索引从 1 开始）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:54:39.670

不知道这是否最快，但绝对简单：

假设数组[x][y]

```
ix = floor(index / y)
iy = index % y 
```

例子：

```
01
23
45

x = 3
y = 2

index = 3
ix = floor(3 / 2) = 1
iy = 3 % 2 = 1    

index = 5
ix = floor(5 / 2) = 2
iy = 5 % 2 = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:06:39.383

给定 a[x][y] 是数组

使用这个公式

```
[index of 1d array]= (rnum * colsize) + (colnum + 1) 
```

所以对于 a[3][2]`colsize=4`

```
= (3 * 4) + (2 + 1)
= 15 
```

# sql - 具有不同字符的 SQL Server 组连接

> ID：13523272
> 
> 赞同：4
> 
> 时间：2012-11-23T04:50:21.993
> 
> 标签：sql, sql-server, sql-server-group-concat

我查看了许多在 SQL Server 中模拟“组连接”功能的解决方案。不过，我想制作一个更具人类可读性的解决方案，但我不知道该怎么做。

我有一个看法：

```
ParentID | ChildName 
```

其中包含记录，例如：

```
1 | Max
1 | Jessie
2 | Steven
2 | Lucy
2 | Jake
3 | Mark 
```

我想“组合 Concat”这些以获得：

```
1 | Max and Jessie
2 | Steven, Lucy and Jake
3 | Mark 
```

因此，如果只有 1 个孩子，则只返回名称，如果有多个，则将最后 2 个用 ' 和 ' 连接，其他所有用 ', ' 连接。

我有点坚持如何在不求助于 CLR 的情况下做到这一点，我不想这样做。我对一个功能很满意 - 但速度是一个问题，我如何确定子编号以便我可以在 ' 和 '、'、' 或 '' 之间进行选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T06:32:38.243

> 制作更人性化的解决方案

对不起，这是我能满足您的要求的最好方法。

[SQL小提琴](http://sqlfiddle.com/#!3/aa5e9/4)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  ParentID int,
  ChildName varchar(10)
);

insert into YourTable values
(1, 'Max'),
(1, 'Jessie'),
(2, 'Steven'),
(2, 'Lucy'),
(2, 'Jake'),
(3, 'Mark'); 
```

**查询 1**：

```
with T as 
(
  select ParentID,
         ChildName,
         row_number() over(partition by ParentID order by ChildName) as rn,
         count(*) over(partition by ParentID) as cc
  from YourTable
)
select T1.ParentID,
       (
         select case
                  when T2.rn = 1 and T2.cc > 1 then ' and '
                  else ', ' 
                end + T2.ChildName
         from T as T2
         where T1.ParentID = T2.ParentID
         order by T2.rn desc
         for xml path(''), type
       ).value('substring(text()[1], 3)', 'varchar(max)') as ChildNames
from T as T1
group by T1.ParentID 
```

**[结果](http://sqlfiddle.com/#!3/aa5e9/4/0)**：

```
| PARENTID |            CHILDNAMES |
------------------------------------
|        1 |        Max and Jessie |
|        2 | Steven, Lucy and Jake |
|        3 |                  Mark | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:10:43.460

```
select ParentID,STUFF((SELECT ' and '+ChildName
    FROM Table1 where ParentID=a.ParentID
     FOR XML PATH('')),1,4,'')  as cnmae from Table1 a
group by ParentID 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/e565a/10)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T06:38:51.430

很好的逻辑问题。请检查下面的查询（有点冗长，但无法阻止自己发布我的小逻辑:)）。

```
CREATE TABLE #SampleTable ([ParentID] int, [ChildName] varchar(6));

INSERT INTO #SampleTable VALUES (1, 'Max')
INSERT INTO #SampleTable VALUES (1, 'Jessie')
INSERT INTO #SampleTable VALUES (2, 'Steven')
INSERT INTO #SampleTable VALUES (2, 'Lucy')
INSERT INTO #SampleTable VALUES (2, 'Jake')
INSERT INTO #SampleTable VALUES (3, 'Mark')

select * From #SampleTable

;WITH T(xParentID, xChildName, xChildNameResult, xC1, xC2)AS
(
    SELECT * FROM(
    SELECT 
        ParentID ,
        ChildName, 
        CAST(ChildName AS NVARCHAR(MAX)) AS ChildNameResult,
        ROW_NUMBER() OVER (PARTITION BY [ParentID] ORDER BY ChildName) C1,
        COUNT(*) OVER (PARTITION BY [ParentID]) C2
    FROM #SampleTable)x WHERE x.C1=1

    UNION ALL

    SELECT ParentID, ChildName,
    CAST(T.xChildNameResult+(CASE WHEN C1=1 THEN '' WHEN C1=C2 THEN ' and ' ELSE ', ' END)+ChildName AS NVARCHAR(MAX)), C1, C2 
    FROM
    (
        SELECT 
        ParentID , 
            ChildName, 
            ROW_NUMBER() OVER (PARTITION BY ParentID order by ChildName) C1,
            COUNT(*) OVER (PARTITION BY ParentID) C2
        FROM #SampleTable
    )y INNER JOIN T ON y.ParentID=T.xParentID and y.c1=T.xC1+1
)SELECT xParentID, xChildNameResult FROM T where xC1=xC2
OPTION (MAXRECURSION 0); 
```

# sql - 考虑到性能问题，在引用表中为多列显示另一个字段

> ID：13523274
> 
> 赞同：2
> 
> 时间：2012-11-23T04:50:32.573
> 
> 标签：sql, performance, postgresql, indexing, bigdata

我有一张`edge`这样的表：

```
-------------------------------
| id | arg1 | relation | arg2 |
-------------------------------
| 1  |   1  |     3    |   4  |
-------------------------------
| 2  |   2  |     6    |   5  |
------------------------------- 
```

其中 arg1、relation 和 arg2 引用另一个`object`表中对象的 id：

```
--------------------
| id | object_name |
--------------------
| 1  |   book      |
--------------------
| 2  |   pen       |
--------------------
| 3  |   on        |
--------------------
| 4  |   table     |
--------------------
| 5  |   bag       |
--------------------
| 6  |   in        |
-------------------- 
```

我想要做的是，考虑到性能问题（一个超过 5000 万个条目的非常大的表）显示`object_name`每个边缘条目，而不是`id`例如：

```
---------------------------
| arg1 | relation | arg2  |
---------------------------
| book |    on    | table |
---------------------------
|  pen |    in    | bag   |
--------------------------- 
```

执行此操作的最佳选择查询是什么？此外，我对优化查询的建议持开放态度 - 在表上添加更多索引等......

编辑：基于以下评论：

1）@Craig Ringer：两个表都`PostgreSQL version: 8.4.13`只有索引`id`。

2) @andrefsp:`edge`几乎是 x2 倍`object`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:13:22.340

如果您可以更改数据库的结构，您可以尝试对数据库的这一部分进行非规范化，并使用字段**id**、**arg1_name**、**relation_name**、**arg2_name制作表****边缘**。并保持表**对象不变，以便在插入或更新****边缘**表时为其命名。

 ******这不好。您的数据将是重复的（数据库的大小会更大），并且可能难以插入或更新表。

但它应该很快选择（没有加入）：

```
SELECT arg1_name, relation_name, arg2_name
FROM edge; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:23:09.017

它不会比这更便宜：

```
SELECT o1.object_name, r1.object_name, o2.object_name
FROM   edge e
JOIN   object o1 ON o1.id = e.arg1
JOIN   object  r ON  r.id = e.relation
JOIN   object o2 ON o2.id = e.arg2; 
```

而且您不需要更多索引。on`object.id`是此查询唯一需要的一个。

但我严重怀疑您是否想一次检索 5000 万行，并且没有特定的顺序。你仍然没有给出完整的图片。******

# iphone - 如何在 UIScrollView 中加载许多图像

> ID：13523276
> 
> 赞同：-4
> 
> 时间：2012-11-23T04:50:48.143
> 
> 标签：iphone, ios, uiscrollview, uiimageview

我在 uiscrollview 中使用了许多图像，我想在开始时加载前 3 或 4 个图像，然后我想在滚动时加载和释放其他图像，举一些例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:05:15.623

看到这个具有多种类型的最佳 CoverFlow .....

1.  [iCarousel](https://github.com/nicklockwood/iCarousel) //只需根据您的要求更改类型，在此示例中，您将获得每种类型的带有动画的图像的显示/输出
2.  [开放流](http://apparentlogic.com/openflow/)

而且，如果您想在滚动视图上设置图像，同时使用 imagePath 的方向，那么这是我创建使用它的简单方法.. 只需更改一些您想要的代码..

```
-(void) imageFromImagePath : (NSString *) path {

    UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];
    imageView = [[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:path]];
    UIImage *img = [UIImage imageWithContentsOfFile:path];

    if (img != nil) {
        [imageView setBackgroundColor:[UIColor clearColor]];
        fullFrame = imageView.frame;

        float expWidth, expHeight, orgWidth, orgHeight;

        orgWidth = imageView.frame.size.width;
        orgHeight = imageView.frame.size.height;

        if (orgWidth < orgHeight) {

            if (orientation == UIDeviceOrientationLandscapeLeft || orientation == UIDeviceOrientationLandscapeRight) {
                expWidth = 480;
                expHeight = (orgHeight * expWidth)/orgWidth;

                if (expHeight < 300) {
                    expHeight = 300;
                    expWidth = (orgWidth * expHeight)/orgHeight;
                }           
            }
            else {

                expWidth = 320;
                expHeight = (orgHeight * expWidth)/orgWidth;

                if (expHeight < 460) {
                    expHeight = 460;
                    expWidth = (orgWidth * expHeight)/orgHeight;
                }
            }   
        }
        else {      

            if (orientation == UIDeviceOrientationLandscapeLeft || orientation == UIDeviceOrientationLandscapeRight) {
                expHeight = 300;
                expWidth = (orgWidth * expHeight)/orgHeight;

                if (expWidth < 480) {
                    expWidth = 480;
                    expHeight = (orgHeight * expWidth)/orgWidth;
                }           
            }
            else {          
                expHeight = 460;
                expWidth = (orgWidth * expHeight)/orgHeight;

                if (expWidth < 320) {
                    expWidth = 320;
                    expHeight = (orgHeight * expWidth)/orgWidth;
                }
            }       
        }

        imageView.contentMode = UIViewContentModeScaleToFill;   
        imageView.image = img;
        [scroller addSubview:imageView];
        [imageView release];
        [scroller bringSubviewToFront:scrollingWheel];
        //[self addSubview:scroller];

        [imageView setNeedsLayout];
        [imageView setNeedsDisplay];

        imgWidth = expWidth;
        imgHeight = expHeight;
        [scrollingWheel stopAnimating];

        imageView.frame = CGRectMake(0,0,expWidth,expHeight);

        //scroller.frame = CGRectMake(0,0,expWidth,expHeight);
        scroller.contentSize = CGSizeMake(expWidth, expHeight); 
    }
    else {

    }

    //[self performSelector:@selector(hideScrollingWheel) withObject:nil afterDelay:1.0];
} 
```

# asp.net-mvc - Asp.net Mvc 比 asp.net 有什么优势？

> ID：13523279
> 
> 赞同：1
> 
> 时间：2012-11-23T04:51:14.153
> 
> 标签：asp.net-mvc

> **可能重复：**
> [使用 ASP.Net MVC 与 Web 表单的最大优势](https://stackoverflow.com/questions/102558/biggest-advantage-to-using-asp-net-mvc-vs-web-forms)

在 Model View Controler 中，我在一篇关于 asp.net mvc 的文章中读到，在 MVC 中测试很容易——怎么样？任何人都可以向我解释，或任何参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:14:53.080

这个门户网站上已经有很多关于您的问题的问答。他们之中有一些是：

1.  [ASP.Net MVC 与 ASP.Net 表单](https://stackoverflow.com/questions/1552984/asp-net-mvc-vs-asp-net-forms)
2.  [使用 ASP.Net MVC 与 Web 表单的最大优势](https://stackoverflow.com/questions/102558/biggest-advantage-to-using-asp-net-mvc-vs-web-forms)
3.  [https://stackoverflow.com/questions/6901554/asp-net-vs-asp-net-mvc](https://stackoverflow.com/questions/6901554/asp-net-vs-asp-net-mvc)
4.  [ASP.Net VS ASP.Net MVC](https://stackoverflow.com/questions/875835/asp-net-vs-asp-net-mvc)

你可以找到更多。下次在发布任何问题之前，只需检查一次是否已经讨论过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:19:35.110

ASP.Net MVC 相对于 ASP.Net Webforms 的关键可测试性优势是 MVC 模式本身的一个特性：[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)。平台将业务逻辑（模型）、程序逻辑（控制器）和UI（视图）推向分离，以便分别进行测试（即*单元*测试）。

还有迹象表明，Microsoft 的 MVC 版本在设计时就考虑到了可测试性。例如，像[Controller](http://msdn.microsoft.com/en-us/library/dd504937%28v=vs.98%29.aspx)和[HttpContext](http://msdn.microsoft.com/en-us/library/system.web.httpcontextbase.aspx)这样的 MVC 类实现了一个接口，这使得在单元测试中模拟它们变得更容易。

当然，使用 ASP.Net MVC 并不能保证一个可测试的应用程序（尽管它确实使它更容易）。同样，使用 Webforms 并不禁止（尽管在不强制执行关注点分离的情况下更容易得到无法测试的意大利面条代码）。与往常一样，使用测试驱动的方法比您使用的平台更重要。

# php - 我们如何为单个脚本启用 php short-open-tag

> ID：13523280
> 
> 赞同：3
> 
> 时间：2012-11-23T04:51:16.640
> 
> 标签：php, php-shorttags

是否可以为单个脚本启用 php short-open-tag ？

我经历过的解决方案提到`short_open_tag=On`在*php.ini中添加*

或者

`php_value short_open_tag 1`到*.htaccess*

我们不能像启用错误报告一样在 php 脚本下启用它们吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T04:54:46.917

**TL;DR** - 不，这是您仅有的两个选择。

~~如果您无法执行上述任何方法，则需要一个容器脚本来设置值，然后再包含带有短打开标签的脚本。~~

 ~~```
<?php

ini_set('short_open_tag', 'On');
include 'myscript.php'; 
```~~ 

~~`myscript.php`这将防止由于短打开标签而导致的解析错误。~~

[文档](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)对此不是很清楚，但显然这自 PHP 4 起就**停止工作了**，之后只能使用`.htaccess`或编辑更改它`php.ini`。这段摘录似乎暗示它可能从 5.3 开始工作：

> PHP 4.0.0 中的 PHP_INI_ALL。PHP < 5.3.0 中的 PHP_INI_PERDIR

但事实**并非如此，从**[Cannot turn off short_open_tag with ini_set](https://stackoverflow.com/questions/5633301/cannot-turn-off-short-open-tag-with-ini-set)的答案可以看出

我已经为此文档问题提交了[错误报告。](https://bugs.php.net/bug.php?id=63585)

**更新**

将[更新](http://svn.php.net/viewvc/?view=revision&revision=328462)文档以更明确地反映此行为：

> ...`PHP_INI_SYSTEM | PHP_INI_PERDIR`从 4.0.1 开始。

# python - 在 Python 中生成唯一数字而不使用列表、集合等

> ID：13523283
> 
> 赞同：3
> 
> 时间：2012-11-23T04:51:29.387
> 
> 标签：python, loops, numbers, unique

这是一个带回家的测试问题（如果 Gruhn 教授正在无情地搜索 stackoverflow，我会在 20 分钟前寄出这个问题）。第一门计算机科学课程，使用 Python 的介绍。使用“开始使用 Python 2nd Ed”一书。测试基本上是关于创建我们自己的模块库、读取和写入文件以及尝试/排除逻辑。

第一部分要求创建一个彩票号码模拟器。一个生成非唯一数字，另一个生成唯一的、非重复的数字。我在这里看到的每个答案都使用了列表，可悲的是下一章，我们被明确禁止使用它们。

我在本节的代码：

```
import random

def ballPickerOne():
    a = random.randint(1, 59)
    b = random.randint(1, 59)
    c = random.randint(1, 59)
    d = random.randint(1, 59)
    e = random.randint(1, 59)
    f = random.randint(1, 35)

    showNumbers(a,b,c,d,e,f)

def ballPickerTwo():
   a = random.randrange(1,59,2)
   b = random.randrange(1,59,3)
   c = random.randrange(1,59,5)
   d = random.randrange(1,59,7)
   e = random.randrange(1,59,11)
   f = random.randint(1,35)

   showNumbers(a,b,c,d,e,f)

def showNumbers(a,b,c,d,e,f):

   print("Your Numbers ...")
   print()
   print("Ball 1: ", a)
   print("Ball 2: ", b)
   print("Ball 3: ", c)
   print("Ball 4: ", d)
   print("Ball 5: ", e)
   print("Red Ball: ", f)
   print()
   print("Good Luck") 
```

我们需要使用 showNumbers 函数来显示结果，并以由此产生的格式显示。ballPickerTwo 是“唯一的”一个，我在尝试唯一性失败时使用了质数间隔。我玩弄了一个循环，但不知道如何显示使用 showNumbers 生成的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:59:36.420

这是一种非常乏味的方法，但它不使用列表。它将选择随机和唯一的值。

```
def ballPickerTwo():

    a = random.randint(1, 59)

    b = a        
    while b == a:
        b = random.randint(1, 59)

    c = b
    while c == b or c == a:
        c = random.randint(1, 59)

    d = c
    while d == c or d == b or d == a:
        d = random.randint(1, 59)

    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:36:08.133

如何使用整数作为位图来检查唯一性？

```
import random

def showNumbers(a,b,c,d,e,f):
   print("Your Numbers ...")
   print()
   print("Ball 1: ", a)
   print("Ball 2: ", b)
   print("Ball 3: ", c)
   print("Ball 4: ", d)
   print("Ball 5: ", e)
   print("Red Ball: ", f)
   print()
   print("Good Luck")

def ballPickerTwo():
    while True:
        a = random.randint(1, 59)
        b = random.randint(1, 59)
        c = random.randint(1, 59)
        d = random.randint(1, 59)
        e = random.randint(1, 59)
        f = random.randint(1, 35)
        m = 2**a + 2**b + 2**c + 2**d + 2**e + 2**f
        if bin(m).count("1") == 6:
            break
    showNumbers(a,b,c,d,e,f) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:55:56.547

只需返回您生成的值 - 在您的函数中使用 return。例如：

```
def ballPickerOne():
    a = random.randint(1, 59)
    b = random.randint(1, 59)
    c = random.randint(1, 59)
    d = random.randint(1, 59)
    e = random.randint(1, 59)
    f = random.randint(1, 35)
    return a,b,c,d,e,f

showNumbers(a,b,c,d,e,f) 
```

如果：

```
from random import sample, randint

def ballPickerOne():
    a,b,c,d,e = sample(range(1,59), 5) 
    f = randint(1,35)
    while f!=a and f!=b and f!=c and f!=d and f!=e:
        f = randint(1,35)
    return a,b,c,d,e,f 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T06:13:38.337

这类似于 HYRY 的答案，因为它使用数字中的位来记住已经选择了哪些数字。这是可行的，因为 Python 可以处理任意大的数字。

```
import random

def showNumbers(a, b, c, d, e, f):
   print("Your Numbers ...")
   print()
   print("Ball 1: ", a)
   print("Ball 2: ", b)
   print("Ball 3: ", c)
   print("Ball 4: ", d)
   print("Ball 5: ", e)
   print("Red Ball: ", f)
   print()
   print("Good Luck")

def pick(cur_val):
    while True:
        v = random.randint(1, 59)
        m = 2**v
        if (cur_val & m) == 0: # bit not set, v never picked before
            return (cur_val | m), v  # return updated cur_val and bit number now set in it

def ballPickerTwo():
    cur_val = 0
    cur_val, a = pick(cur_val)
    cur_val, b = pick(cur_val)
    cur_val, c = pick(cur_val)
    cur_val, d = pick(cur_val)
    cur_val, e = pick(cur_val)
    cur_val, f = pick(cur_val)

    showNumbers(a, b, c, d, e, f) 
```

# django - 如何在 Django-Registration 表单中添加占位符

> ID：13523286
> 
> 赞同：7
> 
> 时间：2012-11-23T04:52:04.300
> 
> 标签：django, django-forms, django-registration

我正在为我的项目使用 django-registration。在我的`registration_form.html`文件中：

```
{{form.username}}
{{form.email}}
//other fields 
```

我想为每个字段设置占位符。但这是一种内置应用程序。所以我需要找到从我的主应用程序编辑这些字段的方法。

我不想更改 django-registration 的来源。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-23T06:49:04.367

如果您可以覆盖内置表单，则可以按如下方式定义占位符：

```
class RegistrationForm(forms.ModelForm):
    class Meta:
        model = YourModelName
        widgets = {
            'username' : forms.TextInput(attrs = {'placeholder': 'Username'}),
            'email'    : forms.TextInput(attrs = {'placeholder': 'E-Mail'}),
        } 
```

或者，您可以使用 jQuery 通过使用`id`下面给出的相应字段向字段添加占位符：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" >
    $(document).ready(function(){
        $("#id_username").attr('placeholder', '{{form.username.label}}');
        $("#id_email").attr('placeholder', '{{form.email.label}}');
    });
</script> 
```

您可以使用[firebug](http://getfirebug.com/downloads/)来查找`id`该字段。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-06T00:47:21.133

我实际上会创建一个修改字段的模板标签过滤器。

```
@register.filter
def html_placeholder(field, args=None):
    if args == None:
        return field
    field.field.widget.attrs.update({ "placeholder": args })
    return field 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T20:36:42.527

另一种适用于 django.contrib.auth.AuthenticationForm 的方法（我认为也适用于您的情况）是在渲染视图时注入此信息。这样你就不需要将它嵌入到你的表单类中，也不需要强制 jquery。

```
def index(request):
    form = AuthenticationForm(request)
    form.fields['username'].widget.attrs.update({
            'placeholder': 'Name'
        })
    form.fields['password'].widget.attrs.update({
            'placeholder': 'Password'
        })

    context = RequestContext(request, {
        'form' : form,
    })
    return HttpResponse(template.render(context)) 
```

# php - php pear email 可与 gmail smtp 一起使用，但本地服务器不会发送电子邮件

> ID：13523289
> 
> 赞同：0
> 
> 时间：2012-11-23T04:52:16.270
> 
> 标签：php, email, pear

我刚刚升级到 ubuntu 12.04，安装了 pear、mail 和 mail_mime。我正在使用下面的示例代码。它曾经可以工作，但我不确定是否在 php.ini 中进行了一些更改。自从我上次设置以来已经有一段时间了。我用 gmail smtp 服务器测试过，一切正常。

```
<?
        include('Mail.php');
        include('Mail/mime.php');

        // Constructing the email
        $sender = "Leigh <leigh@no_spam.net>";                              // Your name and email address
        $recipient = "Leigh <leigh@no_spam.net>";                           // The Recipients name and email address
        $subject = "Test Email";                                            // Subject for the email
        $text = 'This is a text message.';                                  // Text version of the email
        $html = '<html><body><p>This is a html message</p></body></html>';  // HTML version of the email
        $crlf = "\n";
        $headers = array(
                        'From'          => $sender,
                        'Return-Path'   => $sender,
                        'Subject'       => $subject
                        );

        // Creating the Mime message
        $mime = new Mail_mime($crlf);

        // Setting the body of the email
        $mime->setTXTBody($text);
        $mime->setHTMLBody($html);

        $body = $mime->get();
        $headers = $mime->headers($headers);

        // Sending the email
        $mail =& Mail::factory('mail');
        $mail->send($recipient, $headers, $body);
?> 
```

有什么我想念的吗？我应该更改 php.ini 中的 sendmail_path 吗？或者其他的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:12:33.463

您可以从 apache check 的 error.log 文件中找到您的错误

```
sudo tail -f /var/log/apapche2/error.log 
```

在这里你可以找到你发送邮件的错误

```
sudo apt-get install php-pear

sudo pear install mail

sudo pear install Net_SMTP

sudo pear install Auth_SASL

sudo pear install mail_mime 
```

现在尝试发送邮件:)

# postgresql - 如果我们在现有数据库上恢复 postgresql 转储文件会发生什么？

> ID：13523291
> 
> 赞同：0
> 
> 时间：2012-11-23T04:52:36.520
> 
> 标签：postgresql

如果我们在运行的数据库上恢复较早的 pgdump 文件会发生什么？

我已经在现有数据库上恢复了一个较旧的 sql 文件，它对 DB 及其功能有害吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T04:56:41.823

一般来说，是的，它会搞砸数据库。过去删除的行将恢复。序列可能会被重置。删除的表可以重新创建。各种各样的事情。

如果没有更多细节，特别是在恢复转储时使用的命令和转储的性质，在这种特定情况下很难确定。

如果您通过以下方式恢复：

```
psql -1 -v ON_ERROR_STOP=1 -f the_dump.sql 
```

那么你可能没有任何损坏，或者可能只需要重新设置一些序列。

# java - Jar 中的 Java 类如何读取外部 XML 配置文件？

> ID：13523313
> 
> 赞同：0
> 
> 时间：2012-11-23T04:56:02.777
> 
> 标签：java, spring, jar, path

我有一个通用 jar，用于使用数据源 XML 配置“db2.xml”创建数据库连接池，它位于此 JAR 的同一路径下，例如：

```
Project/
       -- lib
              -- db2.xml
              -- common.jar 
```

按照读取 db2.xml 的代码：

```
 private BeanFactory() {
            try {
                beanFactory = new DefaultListableBeanFactory();
                xmlReader = new XmlBeanDefinitionReader((BeanDefinitionRegistry)
                   beanFactory);
                resource = new ClassPathResource("db2.xml");
                xmlReader.loadBeanDefinitions(resource);
            } catch (Exception e) {
                e.printStackTrace();
            }
        } 
```

总是发生错误：

```
org.springframework.beans.factory.BeanDefinitionStoreException: IOException 
parsing XML document from class path resource [db2.xml]; nested exception is 
java.io.FileNotFoundException: class path resource [db2.xml] cannot be opened 
because it does not exist 
```

所以肯定是找不到'db2.xml'造成的。是否设置了配置文件`resource = new ClassPathResource("/db2.xml")`或`resource = new ClassPathResource("lib/db2.xml")`; `resource = new ClassPathResource("../lib/db2.xml")`这一切都不起作用。如何为此设置相对路径。

```
resource = new ClassPathResource(CONFIGURATION_PATH); 
```

这是一个 Java 项目。当我将 db2.xml 放入公共 jar 时，我工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:16:00.970

试试这个

```
 String userDir = System.getProperty("user.dir");
    File file =  new File(userDir+"/lib/db2.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:36:40.597

db2.xml 应该在类路径中。告诉我们您是如何运行 Java 应用程序的。如果您使用 ide 之类的 eclipse，请将 lib 目录添加到类路径（构建路径）。如果您使用的是纯 java 命令，则使用以下命令在类路径中包含 lib 目录。

`java -cp {path to lib directory},{what ever jars you have comma seperated} mainClass`

此外，默认情况下，java 命令在类路径中不会有当前目录。

# c# - c# 或 vb.net 在任何情况下都会生成模块构造函数吗？

> ID：13523314
> 
> 赞同：1
> 
> 时间：2012-11-23T04:56:15.970
> 
> 标签：c#, .net, vb.net

正如标题所说，在任何情况下或使用特定代码模式时，c# 或 vb.net 是否会为程序集生成**模块构造函数？**

编辑：**要清楚，我不是在寻找添加/使用模块构造函数的方法。**我只想知道如果使用了某些特定的代码模式，编译器是否会生成/输出模块构造函数，也许是作为实现某些特定语言功能等的一种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:23:59.233

每

[http://einaregilsson.com/module-initializers-in-csharp/](http://einaregilsson.com/module-initializers-in-csharp/)

答案是不。” 他接着描述了一个他关心的用例，以及他如何通过使用 Mono 来解决这个限制。

# python - Python在数组中查找索引

> ID：13523317
> 
> 赞同：0
> 
> 时间：2012-11-23T04:56:45.627
> 
> 标签：python

我正在尝试查看公司列表中的公司是否在文件中的一行中。如果是，我利用该公司的索引来增加另一个数组中的变量。以下是我的python代码。我不断收到以下错误：AttributeError：“set”对象没有属性“index”。我无法弄清楚出了什么问题，并认为错误是被**包围的线。

```
companies={'white house black market', 'macy','nordstrom','filene','walmart'}
positives=[0 for x in xrange(len(companies))]
negatives=[0 for x in xrange(len(companies))]

for line in f:
    for company in companies:
        if company in line.lower():
            words=tokenize.word_tokenize(line)
            bag=bag_of_words(words)
            classif=classifier.classify(bag)
            if classif=='pos':
                **indice =companies.index(company)**
                positives[indice]+=1
            elif classif=='neg':
                **indice =companies.index(company)**
                negatives[indice]+=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:00:37.973

```
companies={'white house black market', 'macy','nordstrom','filene','walmart'} 
```

是一套。它有独特的条目。

```
companies=['white house black market', 'macy','nordstrom','filene','walmart'] 
```

是一个列表，可以有多个相同值的条目。它也可以被索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T05:01:15.323

```
companies={'white house black market', 'macy','nordstrom','filene','walmart'} 
```

上面的声明是一个`set`. 而且由于 a`set`没有**ordering**，因此您无法从中获取任何元素的索引。

```
>>> d = {2, 3, 4, 5}
>>> d
set([2, 3, 4, 5])  # It is a Set 
```

* * *

所以，要索引一个元素，它应该被声明为`List`： -

```
companies=['white house black market', 'macy','nordstrom','filene','walmart'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T05:00:05.690

company 是一个集合，集合没有顺序，所以不能使用 index()。您可以将其更改为列表：

```
companies=['white house black market', 'macy','nordstrom','filene','walmart'] 
```

# gwt - GWT 编辑器：保存时如何在实体上设置上次修改时间？

> ID：13523323
> 
> 赞同：0
> 
> 时间：2012-11-23T04:57:08.410
> 
> 标签：gwt, gwt-editors

假设在客户端我有一个实体代理要由 UI 编辑，当我单击保存按钮时，最后修改时间作为字段保存在实体代理中。

```
 //start
 MyEntityProxy proxy = getProxy();//fetched from server
 Request<Void> saveRequest = requestFact.myEntityProxyRequest().save(proxy);
 editorDriver.edit(proxy, saveRequest.getRequestContext());
 editorDriver.flush();

 //user modifies UI
 ....

 //save
 editorDriver.flush();
 saveRequest.fire(); 
```

问题是，在哪里插入 proxy.setLastModifiedTime(data) 调用？我总是得到

```
java.lang.IllegalStateException: The AutoBean has been frozen. 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:23:09.697

假设您在and`proxy`之间使用变量，您首先必须使用它。`flush()``fire()``edit()`

```
proxy = saveRequest.getRequestContext().edit(proxy); 
```

这是在内部自动完成的，`editorDriver.edit(…)`但它使返回值保持私有。

# c++ - 从堆中为数组分配地址

> ID：13523326
> 
> 赞同：1
> 
> 时间：2012-11-23T04:57:23.053
> 
> 标签：c++, objective-c, pointers, struct

我想将结构的状态保存为二进制文件并再次加载它们。我的结构如下所示：

```
typedef struct
{
  uint8_t pointerLength;
  uint8_t *pointer;
  uint8_t NumBla;
  uinT16 Bla[MAX_NUM_Bla];
   ...
}
BAR_STRUCT, *BAR;

typedef struct
{
  int numBar;
  BAR bars[MAX_NUM_BAR];
}
FOO_STRUCT, *FOO; 
```

保存没问题，但恢复状态。我在文件中的字节字符串在堆上的位置，并且一个指针指向该字符串的第一个地址。我这样做如下：

```
const void* dataPointer //points to adress in heap
unsigned char* bytePointer = (unsigned char*)dataPointer;

FOO foo = (FOO_STRUCT*)bytePointer;
bytePointer += sizeof(FOO_STRUCT);  

for (int i=0; i < MAX_NUM_BAR; i++) {
    foo->bars[i] = (BAR_STRUCT*)bytePointer;
} 
```

最后一个任务不起作用，我得到一个 EXC_BAD_ACCESS。
因为 bar 是一个指针数组，所以我需要更正每个元素指向的地址。因为它们不再有效。因此，我尝试将保存在 bytesteam 中的对象的地址分配给 foo->bars[i];
但我根本无法更改 foo->bars[i]。访问有效，但分配新地址无效。
我想知道为什么。

编辑：
我正在使用 OSX，以便将字节写入文件我使用 NSData：

```
bool saveCurrentState( FOO foo){
  NSMutableData *data = [NSMutableData data];
  [data appendBytes:templates length:sizeof(FOO_STRUCT)];
  for (int i=0; i < MAX_NUM_BAR; i++){
    [data appendBytes:&foo->bar[i] length:sizeof(INT_BAR_STRUCT)];
    if( foo->bar[i] != NULL )
      [data appendBytes:foo->bar[i]->pointer length:sizeof(uint8_t)*foo->bar[i]->length];
    ...
  }
} 
```

我无法真正更改结构，因为它们用于库中，而我也没有访问权限。我对为什么它没有按预期工作特别感兴趣。正如你所看到的，我复制了整个结构，包括指针本身，并将指针指向的结构添加到字节字符串中。希望这能提供更多的说明。

当读取字节流来设置结构时，我只需要用新地址更改数组的值，并且由于某种原因不想工作。

编辑：我还使用 NSData 保存/读取文件：

```
NSData* data = [NSData dataWithContentsOfFile:@"path/to/file"];
const void* dataPointer = [data bytes]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:04:43.580

看起来你所追求的是一个序列化库。尝试诸如[协议缓冲区](http://code.google.com/p/protobuf/)或[tpl](http://tpl.sourceforge.net/)之类的东西（选择取决于您的确切需求，请查看文档）。

这个[先前的问题](https://stackoverflow.com/questions/371371/serialize-data-structures-in-c)似乎在涵盖一些问题方面做得不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:58:46.177

除了像@Yaniv 建议的那样使用序列化之外，您可以做的是将所有内容存储在平面内存中，以避免嵌入指向单独内存位置的指针：

```
class Foo
{
private:
    // Prevent direct instantiation
    Foo();

    int numBar;

public:
    struct Bar
    {
        int pointerLength;
        int numBlas;
        uint16 blas[MAX_NUM_Bla];

        uint8* GetPointer()
        {
            return reinterpret_cast<uint8*>(this + 1);
        }
    };

    // Factory method
    static Foo* Create()
    {
        int totalSize = sizeof(Foo) + /* total size of all the Bars */;
        Foo* pFoo = reinterpret_cast<Foo*>(new char[totalSize]);

        ...
    }
}; 
```

请注意，不再有 Bar::pointer 成员，而是 Bar::GetPointer 方法。那是因为该指针指向的内容将直接在 Bar 成员的内存之后，因此一切都是平坦的。同样，Foo 中的 Bars 数组将紧跟在 Foo 成员的内存之后。

# java - Java 游戏中链表的迭代器

> ID：13523330
> 
> 赞同：0
> 
> 时间：2012-11-23T04:57:49.503
> 
> 标签：java, multithreading, thread-safety, linked-list

我在 android 中使用 OpenGL，他们有一个名为 draw 的回调方法，它在我无法控制的情况下被调用。（如果我没记错的话，设备可以处理的最快）我有一个“游戏对象”列表，其中包含一个 .draw 方法和一个 .update 方法。我有两个不同的线程来处理每个线程。所以，问题是，我可以在两个不同的线程中用两个不同的方法声明两个不同的迭代器吗？如果是这样，我`ListIterator<GameObject> l = objets.listIterator()`是否每次想要一个新的迭代器时都简单地声明并且它不会干扰其他迭代器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:00:36.580

是的，同一个列表可以有多个迭代器。他们不会互相干扰。

您不能做的是在迭代器仍处于活动状态时修改列表（我的意思是，您可以，但这会破坏迭代器，它们会因异常而失败）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:04:58.543

这将工作得很好，使用多个迭代器迭代单个实例不是问题。

只要您使用 a `SynchronizedList`，就没有理由不能修改列表。将`SynchronizedList`阻止对列表的并发修改并使其成为线程安全的。

如果您可以使用 Guava 库，我建议您使用它，并使用它们的`SynchronizedList`数据结构，以及它们的`Iterables.filter`和`Iterables.transform`方法以及`Predicates`对`Functions`列表进行排序和转换。

更多关于 Guava 库的信息：

[http://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)

[http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html)

为了清楚起见：

在迭代列表时，您必须在块中同步列表，如下所示：

```
synchronized(list) {
    Iterator i = list.iterator(); // Must be in synchronized block
        while (i.hasNext()){
            foo(i.next());
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:04:31.737

是的你可以。只需确保在迭代期间您没有修改列表。如果您打算这样做；请同步迭代。

# windows-8 - 如何将命中突出显示添加到 Windows 8 搜索结果应用页面？

> ID：13523331
> 
> 赞同：0
> 
> 时间：2012-11-23T04:57:50.623
> 
> 标签：windows-8, windows-runtime

在[搜索](http://msdn.microsoft.com/en-us/library/windows/apps/hh465233.aspx)MSDN 的指南和清单中，给出了以下建议：

**指明搜索结果与查询匹配的原因。**

例如，屏幕截图中 Contoso 应用的搜索结果页面突出显示每个结果中的用户查询（“项目”）。这称为命中突出显示。

![在此处输入图像描述](../Images/24bd74abc6766c1824c4942b0ec3b4ec.png)

我想知道如何在我的应用程序中实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:16:59.220

[winrt xaml 工具包](http://winrtxamltoolkit.codeplex.com/)中的突出显示行为应该可以完成这项工作。

# javascript - 使脚本在负载或类似情况下工作而不是在更改时工作

> ID：13523338
> 
> 赞同：0
> 
> 时间：2012-11-23T04:59:35.657
> 
> 标签：javascript, onchange, onload

我有一个简单的 js 脚本，我一直在使用它来根据从下拉列表中选择的值加载文本框。

问题：它只在更改时加载，如果加载时选择的值不是 0，我需要在加载页面时加载它。这个脚本让我很困惑，所以我无法确定我需要的确切位置更新。

剧本：

```
function addInput(){
var arr = [
"<p style='text-align:center;'>Reward 1: <input type='text' name='rew1' id='rew1' value='<?php echo $connt['reward_1'] ?>'></p>",
"<p style='text-align:center;'>Reward 2: <input type='text' name='rew2' id='rew2' value='<?php echo $connt['reward_2'] ?>'></p>",
"<p style='text-align:center;'>Reward 3: <input type='text' name='rew3' id='rew3' value='<?php echo $connt['reward_3'] ?>'></p>",
"<p style='text-align:center;'>Reward 4: <input type='text' name='rew4' id='rew4' value='<?php echo $connt['reward_4'] ?>'></p>",
"<p style='text-align:center;'>Reward 5: <input type='text' name='rew5' id='rew5' value='<?php echo $connt['reward_5'] ?>'></p>",
"<p style='text-align:center;'>Reward 6: <input type='text' name='rew6' id='rew6' value='<?php echo $connt['reward_6'] ?>'></p>",
"<p style='text-align:center;'>Reward 7: <input type='text' name='rew7' id='rew7' value='<?php echo $connt['reward_7'] ?>'></p>",
"<p style='text-align:center;'>Reward 8: <input type='text' name='rew8' id='rew8' value='<?php echo $connt['reward_8'] ?>'></p>",
"<p style='text-align:center;'>Reward 9: <input type='text' name='rew9' id='rew9' value='<?php echo $connt['reward_9'] ?>'></p>",
"<p style='text-align:center;'>Reward 10: <input type='text' name='rew10' id='rew10' value='<?php echo $connt['reward_10'] ?>'></p>",
];
var el = document.getElementById('select');
var div = document.getElementById('rewards');
div.style.display = "block";
while(div.hasChildNodes()) { div.removeChild(div.childNodes[0]); }

if(el.selectedIndex > 0) {
for(var i = 0; i<el.options[el.selectedIndex].value; i++) {
div.innerHTML = div.innerHTML + arr[i];
}
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:00:46.320

希望这可以帮助：

```
 window.onload = function(){
            addInput();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:03:21.520

在你的标签上

```
<body onload="return addInput()"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:08:10.303

获得真正的“加载”行为可能非常棘手。问题是，虽然在 load 属性上设置 body 标签在技术上是有效的，但它会在 body 完成加载后立即触发。窗口加载可能存在类似的问题。

许多更复杂的网页不会完成加载所有支持文件、脚本或基于 AJAX 的所需组件，因此从天真的正文 onload 事件触发的部分脚本可能会失败。

许多 JavaScript 框架提供了一种方法来管理这种情况，在所有资源都准备好之前不会触发。我推荐使用在你最喜欢的框架中实现的那个——而且我绝对推荐使用一个框架，因为没有一个好的框架支持跨浏览器是一场噩梦！

例如，在 Dojo 中（直到最近），你会这样做：

```
dojo.addOnLoad(/* function */) 
```

一旦所有页面资源都可用，就会触发。

# html - rails自定义html元素表单

> ID：13523342
> 
> 赞同：1
> 
> 时间：2012-11-23T04:59:54.197
> 
> 标签：html, ruby-on-rails, ruby, custom-component

我是 Rails 的新手，我在网上和书籍上搜索过，但是在使用 rails 时我找不到如何制作自定义表单。发生的事情是我习惯于编写自己的 HTML 标签，我对此很满意。我不喜欢使用像 JSF（来自 JAVA）这样为我编写 html 组件的库，我不希望 rails 为我编写它，除了简单的标签，如

```
text_field(:post, :title, :size => 20)
# => <input type="text" id="post_title" name="post[title]" size="20" value="#{@post.title}" /> 
```

所以..我该怎么做..例如：我想自己写

```
<input type="text" class="myclass" data="mydata" name="how-to-get-the-attribute-name-with-rails" value="how-to-get-value-with-rails" /> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:19:22.390

如果您想对正在创建的 html 进行更多控制，还可以使用`content_tag`

```
content_tag :input, "label_name", class: "myclass", data: "mydata", name: "how-to-get-the-attribute-name-with-rails", value: "how-to-get-value-with-rails" 
```

您可以为`:input`. 因此，如果您想要一个 div，请使用`:div`etc...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:50:33.023

正如您在上面所写，rails 中任何表单字段的名称都采用以下格式

```
name = 'post[name]' i.e. model_name[attribute_name] 
```

因此，您的参数哈希将包含`:post => {:name => value}`允许您使用**批量分配的内容。**但是如果你想从表单中获取一些额外的参数，你可以直接将它们包含在表单中，并根据需要给它们命名。它将在您的参数哈希中可用。

* * *

你可以很容易地使用`value = <%= @object.attribute_name. %>` 我不确定你是否想知道这个或其他东西来获得价值。如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:16:01.313

你可以简单地在 Rails 表单中编写 html，所以

```
<input type="text" class="myclass" data="mydata" name="how-to-get-the-attribute-name-with-rails" value="how-to-get-value-with-rails" /> 
```

是完全有效的，但请注意，您应该以正确的方式使用名称和 ID，以自动将它们绑定到您的后端控制器。

毕竟，`text_field(:post, :title, :size => 20)`它的作用是将参数转换为纯 HTML（我们在 Rails 中称它们为辅助方法）。

[在此处](http://guides.rubyonrails.org/form_helpers.html)阅读表单助手选项（使用助手将保持您的代码干净）。

# linux - 我无法在我的 oracle 企业版 linux 中安装 google chrome

> ID：13523345
> 
> 赞同：2
> 
> 时间：2012-11-23T05:00:33.567
> 
> 标签：linux, google-chrome, 64-bit, rpm, lsb

我创建了一个 google.repo 文件并将该文件存储在 yum.repos.d 中，google.repo 的内容是：

```
[google-chrome]
name=google-chrome – 64-bit
baseurl=http://dl.google.com/linux/chrome/rpm/stable/x86_64
enabled=1
gpgcheck=1
gpgkey=https://dl-ssl.google.com/linux/linux_signing_key.pub 
```

我以 root 用户身份在 shell 中执行了以下命令：

执行：

```
yum install google-chrome-stable 
```

输出 ：

```
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package google-chrome-stable.x86_64 0:23.0.1271.64-165188 set to be updated
--> Processing Dependency: lsb >= 4.0 for package: google-chrome-stable
--> Processing Dependency: libc.so.6(GLIBC_2.11)(64bit) for package: google-chrome-stable
--> Processing Dependency: libcurl.so.4()(64bit) for package: google-chrome-stable
--> Finished Dependency Resolution
google-chrome-stable-23.0.1271.64-165188.x86_64 from google-chrome has depsolving problems
  --> Missing Dependency: libcurl.so.4()(64bit) is needed by package google-chrome-stable-23.0.1271.64-165188.x86_64 (google-chrome)
google-chrome-stable-23.0.1271.64-165188.x86_64 from google-chrome has depsolving problems      
 --> Missing Dependency: lsb >= 4.0 is needed by package google-chrome-stable-23.0.1271.64-165188.x86_64 (google-chrome)
google-chrome-stable-23.0.1271.64-165188.x86_64 from google-chrome has depsolving problems
 --> Missing Dependency: libc.so.6(GLIBC_2.11)(64bit) is needed by package google-chrome-stable-23.0.1271.64-165188.x86_64 (google-chrome)
Error: Missing Dependency: libc.so.6(GLIBC_2.11)(64bit) is needed by package google-chrome-stable-23.0.1271.64-165188.x86_64 (google-chrome)
Error: Missing Dependency: libcurl.so.4()(64bit) is needed by package google-chrome-stable-23.0.1271.64-165188.x86_64 (google-chrome)
Error: Missing Dependency: lsb >= 4.0 is needed by package google-chrome-stable-23.0.1271.64-165188.x86_64 (google-chrome)
 You could try using --skip-broken to work around the problem
 You could try running: package-cleanup --problems
                    package-cleanup --dupes
                    rpm -Va --nofiles --nodigest
The program package-cleanup is found in the yum-utils package. 
```

我也找不到 lsb 包，我发现安装了以下包：redhat-lsb.x86_64 redhat-lsb.i386

请帮我在 oracle 企业版 linux 5 中安装 google chrome ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T20:33:45.077

好吧，似乎 OL 5 有旧版本的 GLIBC 并且 chrome 无法使用它。

[https://superuser.com/questions/393158/how-to-install-a-chrome-on-my-rhel-5-3-box](https://superuser.com/questions/393158/how-to-install-a-chrome-on-my-rhel-5-3-box)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-08T23:12:17.763

如果您不介意安装不需要最新 libstdc++.so 的早期版本的 Google Chrome，请阅读以下内容：

例如，对于 Oracle Linux 6.6（64 位），谷歌浏览器版本 35 或更高版本需要 libstdc++.so.6(GLIBCXX_3.4.15)。访问[http://orion.lcg.ufrj.br/RPMS/myrpms/google/](http://orion.lcg.ufrj.br/RPMS/myrpms/google/)并下载 google-chrome-stable-27.0.1453.110-202711.x86_64.rpm。运行以下命令

```
sudo yum install /path-to/google-chrome-stable-27.0.1453.110-202711.x86_64.rpm 
```

仅供参考 - 要检查您的系统具有哪些版本的 libstdc++，请执行以下操作

```
strings /usr/lib64/libstdc++.so.6 | grep GLIBCXX 
```

# android - 安卓闹钟界面

> ID：13523350
> 
> 赞同：4
> 
> 时间：2012-11-23T05:01:00.087
> 
> 标签：android, user-interface, settings, android-preferences, alarm

![在此处输入图像描述](../Images/53e8740f34bd985cfa91b2d996fb457c.png)

我试图弄清楚 UI 是如何为 Android 闹钟应用程序设计的。这似乎正在使用 Holo Dark Theme。

包括的屏幕截图是创建/编辑警报`Activity`屏幕。它看起来类似于[Android 设置](http://developer.android.com/guide/topics/ui/settings.html)。是这种情况吗？因为“打开警报”和“振动”行看起来像`ChexboxPreferences`。“铃声”行看起来像一个`RingtonePreference`. “时间”行呢？

正如@eric 在对以下答案之一的评论中提到的那样，我正在尝试重新创建与闹钟应用程序类似的界面。我不想发送从我的应用程序启动警报管理器的意图。

“标签”行呢？这很像一个`EditText`视图。您可以在xml 标记中包含`Views`和的组合吗？`Preferences``PreferenceScreen`

还有`ActionBar`一个垂直管道，我不确定它是如何创建的，但“完成”视图是一个`ImageButton`？

我不完全相信它是首选项的组合，因为警报应用程序可以有多个警报，而不仅仅是一个警报。如果有多个警报并且您不使用多个`SharedPreferences`文件，那么创建一个内容提供程序来存储与多个警报相关的信息自然是有意义的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T02:47:40.250

股票闹钟应用程序是[**开源**](https://github.com/android/platform_packages_apps_alarmclock)的，因此请自行检查。

偏好布局见[**这里**](https://github.com/android/platform_packages_apps_alarmclock/blob/eb142ac59aa8039c409b5fe4f50a130f16960d41/res/xml/alarm_prefs.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    android:title="@string/set_alarm">
    <CheckBoxPreference android:key="on" 
        android:title="@string/enable"/>
    <Preference android:key="time" 
        android:title="@string/time"/>
    <com.android.alarmclock.AlarmPreference
        android:key="alarm" 
        android:title="@string/alert"
        android:ringtoneType="alarm"
        android:showDefault="false"
        android:showSilent="false" />
    <CheckBoxPreference android:key="vibrate" 
        android:title="@string/alarm_vibrate"/>
    <com.android.alarmclock.RepeatPreference
        android:key="setRepeat" 
        android:title="@string/alarm_repeat" />
    <EditTextPreference android:key="label"
        android:title="@string/label"
        android:dialogTitle="@string/label" />
</PreferenceScreen> 
```

偏好活动见[**这里**](https://github.com/android/platform_packages_apps_alarmclock/blob/eb142ac59aa8039c409b5fe4f50a130f16960d41/src/com/android/alarmclock/SetAlarm.java)，请注意，我引用的链接不是来自头部修订。

一些亮点：

*   时间是平淡无奇的`android.preference.Preference`，靠山`TimePickerDialog`。
*   `Ringtone`是`android.preference.RingtonePreference`.
*   重复是`android.preference.ListPreferenc`e 的定制实现。
*   警报由静态类[**com.android.alarmclock.Alarms**](https://github.com/android/platform_packages_apps_alarmclock/blob/master/src/com/android/alarmclock/Alarms.java)管理，它使用 Content Providers 存储实际信息。
*   从 Android 4.0 开始默认使用 Holo 主题，在其他 Android 版本上，您可能会看到不同的主题。请注意，应用程序的实现也可能因不同的 android 版本或设备供应商而有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T06:16:05.243

时间偏好没有特定的类。只需创建一个简单的首选项，并在单击首选项时尝试打开 TimePickerDialog。更改时间时更改首选项的摘要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:13:28.717

你想把这行代码放在列表项点击（时间点击）上

```
startActivity(new Intent(android.provider.Settings.ACTION_DATE_SETTINGS)); 
```

# javascript - 使用 JavaScript/html；如何在打印区域之外打印画布？

> ID：13523353
> 
> 赞同：3
> 
> 时间：2012-11-23T05:01:31.830
> 
> 标签：javascript, css, html, canvas, printing

我对 javaScript 还是很陌生。我创建了一个画布功能，并且可以成功打印，但是如何满足大画布区域的需求。当我去画布的其他区域并按打印时，它将打印到一个点而忽略其余部分。我尝试创建一个 printCanvas，它使用与画布相同的参数设置自己，但它只打印画布的垂直部分而不是水平部分。问题是，我如何打印整个画布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:51:12.303

我认为您需要测试（每个浏览器）它对包装 HTML DOM 元素的反应。例如; 在 CANVAS 标记周围包裹一个 DIV 标记，以保留您需要的空间。这可能会触发浏览器的打印布局以不忽略自动调整大小的对象。话虽如此，请记住尽可能强制使用固定值以满足需求。这不符合网络渲染，但在您的情况下，这可能证明是有用的。

```
<div style="height: 1600px; width: 900px;">
    <canvas height="1600" width="900">Not supported</canvas>
</div> 
```

# jquery - 跨度内图像上的单击事件不起作用

> ID：13523361
> 
> 赞同：0
> 
> 时间：2012-11-23T05:02:22.487
> 
> 标签：jquery, html

我可以将图像放在跨度内并使用 jQuery 为跨度提供点击事件吗？在这里它在我的代码中不起作用有任何想法。

```
<span id="removeNewTime" class="removeTime">
    <img src="Images/close button.png" alt="close" />
</span> 
```

jQuery代码

```
<script>
    $(document).ready(function(){
        $(".removeTime").click(function(){
            alert("hello");
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:03:24.440

这是您可能需要[包含 jQuery](http://jquery.com/download/)的工作，这篇文章讲述了如何[在页面上添加 jQuery](https://stackoverflow.com/questions/5232968/how-do-you-add-jquery-in-a-html-page-as-a-web-resource-in-dynamics-crm-2011)。

**[现场演示](http://jsfiddle.net/PPxX2/)**

```
$(document).ready(function(){
    $(".removeTime").click(function(){
     alert("hello");
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:05:00.427

将跨度的 CSS 设置为`display:block;`或将跨度替换为`<div>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:19:01.503

有时我确实喜欢它的dosnt工作，

然后我试试这个（如果页面在之前动态变化）

```
$(document).ready(function(){
    $(".removeTime").live("click",function(){
     alert("hello");
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T05:07:54.940

确保在应用任何文档就绪函数之前包含 jquery 库：

**看到工作小提琴：**

[http://jsfiddle.net/87Laj/](http://jsfiddle.net/87Laj/)

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js' type='text/javascript'></script>

<script>
   $(document).ready(function(){
     $(".removeTime").click(function(){
      alert("hello");
    });
  });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T05:08:33.387

确保您已在文件的 head 部分中包含 jquery。由于代码工作正常。

为简单起见，请始终使用`<script src="http://code.jquery.com/jquery-latest.js"></script>`

这将确保您始终拥有最新的 jquery 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T05:10:01.167

可能是 jquery 文件中的问题，这是 jquery 代码工作所必需的。

检查工作的**[jsfiddle](http://jsfiddle.net/matmuchrapna/SEBDU/2/)**

js代码的小改进：

```
$(function() {
    $(".removeTime").on('click', function(){
         alert("hello");
    });
});​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T05:18:19.393

此代码正在运行 请注意代码中的一些要点

1) 不要忘记将 [http://code.jquery.com/jquery-1.8.3.min.js](http://code.jquery.com/jquery-1.8.3.min.js)等最新的 jquery 文件添加到您的代码中。

2) 从[http://jquery.com/download/下载](http://jquery.com/download/)

# azure - Azure 存储帐户创建需要很多时间

> ID：13523364
> 
> 赞同：3
> 
> 时间：2012-11-23T05:02:48.663
> 
> 标签：azure, azure-sql-database, azure-storage

我有一个 Windows Azure 帐户，有 6 个月的云服务和数据库计划。我已经创建了云服务和 sql azure 数据库，它们是在几分钟内创建的。我还创建了一个存储服务，它的状态是创建过去 16 小时。我为东南亚地区创建了所有这些实例。这是否正常，因为有一些问题。

我是 Azure 的新手，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:25:08.887

我可以告诉你这是不正常的。我的经验，创建存储帐户确实比创建云服务和 sql 数据库需要更长的时间。但应该在几秒到几分钟左右。你的 16 小时是不寻常的。

您创建的每个存储帐户都遇到过这个问题吗？还是只有这一个？我建议您创建另一个存储帐户，而不是等待这个完成。

希望这可以帮助。

# iphone - 如何在核心数据中手动插入数据

> ID：13523368
> 
> 赞同：0
> 
> 时间：2012-11-23T05:02:59.740
> 
> 标签：iphone, objective-c, ios5, core-data

我第一次使用核心数据。所以我知道如何在核心数据中手动插入数据。首先我有 .csv 文件，但我不知道如何从这个 .csv 文件将数据插入核心数据

```
My entity name is: "HatList"
attribute1: "Category id"
attribute2: "Hat id"
attribute3: "Hat name" 
```

我已经阅读了各种链接，例如链接 1[和](https://stackoverflow.com/questions/2629736/how-to-add-data-manually-in-core-data-entity)链接[2](https://stackoverflow.com/questions/1738676/iphone-core-data-inserting-new-objects)

除了这些我已经搜索了很多，但我没有得到正确的想法。

那么，谁能给我正确的代码或关于我的问题的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:10:17.523

将 .csv 放入 coredata 没有神奇的方法，您必须使用 NSScaner 解析它，例如：http://macresearch.org/cocoa-scientists-part-xxvi-parsing-csv-data[然后](http://macresearch.org/cocoa-scientists-part-xxvi-parsing-csv-data)插入它作为一个托管对象。

或者，您可以尝试使用谷歌搜索为您执行此操作的库，我确定必须有一个。

# port - 流浪端口转发在 w8 上不起作用

> ID：13523372
> 
> 赞同：1
> 
> 时间：2012-11-23T05:03:36.340
> 
> 标签：port, forwarding, vagrant

我整天都在尝试，似乎无法在我的 Vagrant VM 上进行端口转发，我正在运行一个使用 Thin 作为 Web 服务器的 Rails 应用程序，并且可以从 IP 192.168.99.99:5000 成功访问该应用程序.

我需要使用 fonts.com 中的字体，这需要我使用像“localhost”这样的主机名，但是当我在 vagrant 文件中使用端口转发并尝试启动应用程序时，Thin 会提示错误，例如无法使用该端口或不使用该端口有足够的权限。

这是我在 vagrant 文件中使用的行

```
config.vm.forward_port 8080, 5000 
```

我希望从

```
http://localhost:8080 
```

任何想法将不胜感激。我也在 Windows 8 上运行 vagrant。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-05T19:02:25.273

这是一个较老的问题，但如果有人遇到同样的问题，转发端口的新格式是：

```
config.vm.network "forwarded_port", guest: 80, host: 8080 
```

参考：[https ://docs.vagrantup.com/v2/networking/forwarded_ports.html](https://docs.vagrantup.com/v2/networking/forwarded_ports.html)

此外，在运行时`vagrant up`，请查看日志中是否提及正在转发的端口。一个成功的案例将类似于以下内容：

```
==> default: Forwarding ports...
    default: 4040 => 4040 (adapter 1)
    default: 7080 => 7080 (adapter 1)
    default: 7081 => 7081 (adapter 1)
    default: 8888 => 8888 (adapter 1)
    default: 22 => 2222 (adapter 1) 
```

# sql - 在两个以上的表上使用内连接删除查询

> ID：13523373
> 
> 赞同：2
> 
> 时间：2012-11-23T05:03:56.183
> 
> 标签：sql, db2

我想在两个以上的表上使用内部联接从表中删除记录。假设我有 A、B、C、D 表，A 的 pk 在所有其他提到的表中共享。然后如何编写删除查询以使用表 B 和 A 上的内部连接从表 D 中删除记录，因为条件是从这两个表中获取的。从 DB2 的角度来看，我需要这个查询。由于它们的限制，我没有使用 IN 子句或 EXISTS。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T07:45:12.403

根据您的描述，我将架构视为：

> A(pk_A, col1, col2, ...)
> 
> B(pk_B, fk_A, col1, col2, ..., 外键 fk_A 引用 A(pk_A))
> 
> C(pk_c, fk_A, col1, col2, ..., 外键 fk_A 引用 A(pk_A))
> 
> D(pk_d, fk_A, col1, col2, ..., 外键 fk_A 引用 A(pk_A))

正如您所说，如果使用 IN 子句，DB2 将只允许删除 1000 行。我不了解 DB2，但 Oracle 在 IN 子句中只允许 1000 个手动值。至少在Oracle 中对子查询结果没有这样的限制。EXISTS 不应该成为任何数据库的问题，包括 Oracle 和 DB2 只检查行的存在，无论是一百万行还是一百万行。

从表 D 中删除数据的三种情况：

1.  您想从表 D 中删除数据，其中 fk_A（自然）使用列 A.pk_A 引用表 A 中的记录：

    ```
    DELETE FROM d
    WHERE EXISTS (
           SELECT 1
             FROM a
            WHERE a.pk_A = d.fk_A
    ); 
    ```

2.  您想从表 D 中删除数据，其中 fk_A 引用表 A 中的记录，并且表 A 中的记录也由列 B.fk_A 引用。我们不想从 D 中删除 A 中但不在 B 中的数据。我们可以这样写：

    ```
    DELETE FROM d
    WHERE EXISTS (
           SELECT 1
             FROM a
       INNER JOIN b ON a.pk_A = b.fk_A
            WHERE a.pk_A = d.fk_A
    ); 
    ```

3.  第三种情况是当我们必须删除表 D 中引用表 A 中记录的数据时，并且 A 中的记录也被列 B.fk_A 和表 C.fk_A 引用。我们只想从表 D 中删除该数据，***这***在所有四个表 A、B、C 和 D 中都是通用的。我们可以这样写：

    ```
    DELETE FROM d
    WHERE EXISTS (
           SELECT 1
             FROM a
       INNER JOIN b ON a.pk_A = b.fk_A
       INNER JOIN c ON a.pk_A = c.fk_A
            WHERE a.pk_A = d.fk_A
    ); 
    ```

根据您的要求，您可以合并这些查询之一。

请注意，如果子查询检索多于一行，“=”运算符将返回错误。另外，我不知道 DB2 是否支持 ANY 或 ALL 关键字，因此我使用了一个简单但功能强大的 EXISTS 关键字，它比 IN、ANY 和 ALL 执行得更快。

此外，您可以在此处观察到 EXISTS 子句中的子查询使用“SELECT 1”，而不是“SELECT a.pk”或其他一些列。这是因为 EXISTS 在任何数据库中只查找行的存在，而不是列内的任何特定值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-28T11:08:15.323

基于[“使用 SQL 将使用 INNER JOIN 的表中的行删除到另一个表”](http://www.databasically.com/2011/08/31/using-sql-to-delete-rows-from-a-table-using-inner-join)

> 关键是您将要删除的表的名称指定为 SELECT。因此，JOIN 和 WHERE 进行选择和限制，而 DELETE 进行删除。不过，您不仅限于一张桌子。如果您具有多对多关系（例如，杂志和订阅者，通过订阅连接）并且您要删除订阅者，您还需要从连接模型中删除所有潜在记录。

```
DELETE subscribers
     FROM subscribers INNER JOIN subscriptions 
       ON subscribers.id = subscriptions.subscriber_id
     INNER JOIN magazines 
       ON subscriptions.magazine_id = magazines.id
     WHERE subscribers.name='Wes'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:09:55.667

```
delete from D 
where fk  = (select d.fk from D d,A a,B b where a.pk = b.fk and b.fk = d.fk ) 
```

这应该工作

# php - wordpress“function &get_post”中此类函数定义的含义

> ID：13523374
> 
> 赞同：5
> 
> 时间：2012-11-23T05:04:18.867
> 
> 标签：php, wordpress, function, ampersand

我最近正在研究**wordpress**，并试图挖掘查询机制是如何处理的。
我遇到了这样的函数定义，
`function &get_post(&$post, $output = OBJECT, $filter = 'raw')`
我以前没有见过类似的东西，并且不确定与号 ( **&** ) 是否必须对地址做一些事情。（传统上认为使用 & 号）。
我对此很天真，如果它很容易，就饶了我。
任何人都可以对此发表意见。这将有助于我前进。试图通过谷歌和文档找到它，但没有找到解决方案。
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T05:16:32.190

函数声明中的第一个`&`导致 PHP[返回一个引用](http://www.php.net/manual/en/language.references.return.php)。`&`on`$post`对传递给函数的实际变量进行更改。

我实际上不清楚为什么要使用其中任何一个（引用声明）。在我看来，这似乎是对 Wordpress 部分进行优化的错误尝试，或者它更有可能与 PHP 4 兼容。我认为您可以出于您的目的忽略与号。

# java - 添加javamail代码后tomcat server 7.0不启动

> ID：13523376
> 
> 赞同：1
> 
> 时间：2012-11-23T05:04:33.783
> 
> 标签：java, tomcat

我正在开发一个需要发送邮件的网络应用程序。我使用 java mail api 来做同样的事情。所以，我导入了 mail.jar 和 activation.jar 文件....但是在我包含发送邮件的代码之后，tomcat 服务器没有启动...它在控制台上打印以下内容。 ...

```
Nov 23, 2012 10:03:59 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/rto__agent_helper]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/rto__agent_helper]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: javax/mail/Address
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Unknown Source)
    at java.lang.Class.getDeclaredFields(Unknown Source)
    at org.apache.catalina.startup.WebAnnotationSet.getDeclaredFields(WebAnnotationSet.java:452)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:257)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:136)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:66)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:381)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: javax.mail.Address
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 21 more
Nov 23, 2012 10:03:59 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Nov 23, 2012 10:03:59 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
Nov 23, 2012 10:03:59 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 343 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-15T18:43:26.363

将库 java.mail.jar 直接添加到 lib 文件夹中的 apache 目录中，完成此操作后打开 eclipse 并启动您的项目。

干杯

# java - 使用 Netty 在 24 分钟内泄漏 9 kb 内存

> ID：13523386
> 
> 赞同：0
> 
> 时间：2012-11-23T05:05:13.770
> 
> 标签：java, memory-leaks, netty

9184 字节内存在以下代码中泄漏

**主类：**

```
import java.net.InetSocketAddress;
import java.util.concurrent.Executors;
import org.jboss.netty.bootstrap.ServerBootstrap;
import org.jboss.netty.channel.ChannelFactory;
import org.jboss.netty.channel.ChannelPipeline;
import org.jboss.netty.channel.ChannelPipelineFactory;
import org.jboss.netty.channel.Channels;
import org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory;
import org.jboss.netty.handler.timeout.IdleStateHandler;
import org.jboss.netty.util.HashedWheelTimer;
import org.jboss.netty.util.Timer;

    public class NettyMemoryLeakTest {

        public static void main(String[] args) {
            final Timer timer = new HashedWheelTimer();
            final IdleStateHandler idle = new IdleStateHandler(timer, 0, 0, 1);
            final ChannelFactory cf = new NioServerSocketChannelFactory(Executors.newCachedThreadPool(), Executors.newCachedThreadPool());
            final ServerBootstrap bootStrap = new ServerBootstrap(cf);
            final ServerHandler objServerHandler = new ServerHandler();
            bootStrap.setPipelineFactory(new ChannelPipelineFactory() {
                @Override
                public ChannelPipeline getPipeline() throws Exception {
                    ChannelPipeline pipeline = Channels.pipeline();
                    pipeline.addLast("IDLE", idle);
                    pipeline.addLast("Handler", objServerHandler);
                    return pipeline;

                }
            });

            bootStrap.bind(new InetSocketAddress(8080));

        }
    } 
```

**处理程序：**

```
import org.jboss.netty.channel.ChannelHandlerContext;
import org.jboss.netty.handler.timeout.IdleState;
import org.jboss.netty.handler.timeout.IdleStateAwareChannelHandler;
import org.jboss.netty.handler.timeout.IdleStateEvent;

public class ServerHandler extends IdleStateAwareChannelHandler {

    @Override
    public void channelIdle(ChannelHandlerContext ctx, IdleStateEvent e) {
        if (e.getState() == IdleState.ALL_IDLE) {

            System.gc();

        }
    }
} 
```

我正在使用 jdk 1.7，netty 3.5.8 Final 我正在通过 netbeans 分析器检查内存泄漏。它显示了内存的变化。使用的内存

48 分钟后泄漏为**2020kb** 请帮我找出问题

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:50:09.923

System.gc() 根本不保证会进行 GC。如果您真的认为这是内存泄漏，请以二进制形式进行堆转储并将其提供给检查。

# php - 无法让我的 PHP 文档连接到我的 xampp 服务器

> ID：13523391
> 
> 赞同：0
> 
> 时间：2012-11-23T05:05:46.700
> 
> 标签：php, mysql

我对php很陌生，如果这个问题太含糊，我很抱歉，但是如果您需要我提供任何其他信息，请告诉我。

无论如何，基本上我的问题是我有一些简单的 php 代码，如果它无法连接到我设置的 xampp 服务器，它应该调用 die()，但是，即使我为它打印的服务器或用户输入了无效信息成功的。我真的不知道该去哪里，所以如果有人有任何建议，那就太好了。

```
<?php

$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';

if ( !mysql_connect($dbhost, $dbuser, $dbpass) )
{
    die(mysql_error());
} 
else
    echo 'Succesful';

?> 
```

好的，由于某种原因，它只是不能与 root 用户一起使用，所以我创建了一个需要密码的新用户，并且显然按照它应该的方式连接。谢谢大家的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T08:36:24.457

您的代码是正确的 pistolpete333。对于您的 root 用户问题，即您无法与 root 用户连接，您可以检查以下文件以了解您的 phpmyadmin 配置

```
C:\wamp\apps\phpmyadmin3.5.1\config.inc.php. 
```

在上面的文件中，您可以检查您的主机，phpmyadmin 的用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:23:28.213

这是有效的，因为您已经为 mysql 指定了有效的用户名、主机和密码。如果你指定了错误的密码，你会得到 mysql 错误。尽管您没有选择任何数据库，但此代码可以工作并连接到 mysql 服务器。

试试这个代码

```
<?php
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$link = mysql_connect($dbhost, $dbuser, $dbpass);
if (!$link) {
    die('Not connected : ' . mysql_error());
}

// make foo the current db
$db_selected = mysql_select_db('foo', $link); //foo is your database name
if (!$db_selected) {
    die ('Can\'t use foo : ' . mysql_error());
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:26:58.040

我发现当尝试将 php 连接到 xampp 服务器时，通常只有几件事可能导致您遇到的问题。

```
1\. mySQL service is not running
2\. no specific database is selected to try to access
3\. user does not exist in phpmyadmin. 
```

当您选择一个用户来将 php 连接到 mySQL 时，您应该始终确保设置了密码，这通常是人们错过的事情。如果您在用户列表中创建另一个实例并需要密码，则可以使用 root，或者您可以为列表中已有的 root 用户添加密码，但最好的选择是创建一个只有访问权限的新自定义用户到你想用你的 php 访问的数据库，并确保它需要密码。（确保您使用的任何用户都可以连接到 localhost；默认情况下，root 可以，我认为大多数新创建的用户也可以）。

下面是我用于我设计的需要 php 来访问数据库的网站的 php。

```
<?php
// This configures the variables for database access
$dbhost = 'localhost';
$dbuser = '????';
$dbpass = '????';
$dbname = '????';

// This will connect to the server and then the correct database
$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to mysql');
mysql_select_db($dbname);
?> 
```

# combobox - 如何使用绑定获取组合框 selectedItem 值

> ID：13523392
> 
> 赞同：1
> 
> 时间：2012-11-23T05:05:51.723
> 
> 标签：combobox, silverlight-5.0, xaml-binding

我的组合框：

```
 <pmControls:pmComboBox Grid.Row="3" Grid.Column="1" Margin="3"  
  SelectedItem="{Binding Applicable_For,Mode=Two Way}" DisplayMemberPath="Applicable_For"
     SelectedValuePath="Applicable_For">

  <pmControls:pmComboBoxItem Content="Parcel" ></pmControls:pmComboBoxItem>
  <pmControls:pmComboBoxItem Content="Property"></pmControls:pmComboBoxItem>

  </pmControls:pmComboBox> 
```

已将 2 个静态项添加到组合框作为宗地和属性，并希望使用绑定获取这些值。

我已经对 SelectedItem 进行了绑定，并且我的绑定字段是 Applicable_For。

使用上面的代码在 Applicable_For 中将值设为 null。

编辑：我已经添加`Mode=Two Way`了我之前忘记的选定项目。

但它并没有像“PropMgmt.Controls.pmComboBoxItem”这样的命名空间获得价值

请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T06:41:35.217

您可以为其创建一个集合，而不是将静态项目添加到组合框。例如。创建类，如：

```
public class KeyValuePair
{
    string key;

    public string Key
    {
        get { return key; }
        set { key = value; }
    }
    string value;

    public string Value
    {
        get { return this.value; }
        set { this.value = value; }
    }      

} 
```

然后在您的视图模型中添加以下代码：

```
 ObservableCollection<KeyValuePair> applicable_For_KeyValues = new ObservableCollection<KeyValuePair>();

        KeyValuePair k1 = new KeyValuePair() { Key = "1", Value = "Parcel" };
        KeyValuePair k2 = new KeyValuePair() { Key = "2", Value = "Property" };

        applicable_For_KeyValues.Add(k1);
        applicable_For_KeyValues.Add(k2); 
```

然后在 xaml 中添加以下内容：

```
<pmControls:pmComboBox Grid.Row="3" Grid.Column="1" Margin="3" 
 ItemsSource="{Binding Applicable_For_KeyValues}" 
 SelectedValue="{Binding Applicable_For,Mode=TwoWay}" SelectedValuePath="Value">
                <pmControls:pmComboBox.ItemTemplate >
                    <DataTemplate>
                        <TextBlock Text="{Binding Value}"></TextBlock>
                    </DataTemplate>
                </pmControls:pmComboBox.ItemTemplate>        

            </pmControls:pmComboBox> 
```

希望这能解决您的问题。

# azure - 证书存储访问被拒绝

> ID：13523393
> 
> 赞同：3
> 
> 时间：2012-11-23T05:06:00.553
> 
> 标签：azure, azure-web-app-service

我收到 System.Security.Cryptography.CryptographicException 访问被拒绝。尝试创建媒体服务任务或作业时。该应用程序在一个 azure 网站实例上运行。一切都在本地工作。看起来该应用程序无法写入证书存储区。我已尝试将应用程序的信任级别提升到完全但没有任何效果。

```
 System.Security.Cryptography.CryptographicException: Access is denied.

   at System.Security.Cryptography.X509Certificates.X509Store.Open(OpenFlags flags)
   at Microsoft.WindowsAzure.MediaServices.Client.EncryptionUtils.SaveCertificateToStore(X509Certificate2 certToStore)
   at Microsoft.WindowsAzure.MediaServices.Client.BaseContentKeyCollection.GetCertificateForProtectionKeyId(DataServiceContext dataContext, String protectionKeyId)
   at Microsoft.WindowsAzure.MediaServices.Client.BaseContentKeyCollection.GetCertificateToEncryptContentKey(DataServiceContext dataContext, ContentKeyType contentKeyType)
   at Microsoft.WindowsAzure.MediaServices.Client.JobData.ProtectTaskConfiguration(TaskData taskData, X509Certificate2& certToUse)
   at Microsoft.WindowsAzure.MediaServices.Client.JobData.Submit()
   at MediaServices.Encoding.Encode_video_h264(IAsset asset)
   at Business.Background_tasks.Kickoff_encoding(IAsset asset, Guid id)
   at Routing.Controllers.BlobsController.UploadBlock(Int32 id)
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

**编辑** 我已将应用程序移至 VM 并仍然收到相同的异常

**编辑** 在这里找到的最终解决方案[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/67216e79-c259-4685-95d0-3a09bab5c0c5/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/67216e79-c259-4685-95d0-3a09bab5c0c5/)

在 IIS7 上运行时 - 您可以指定加载应用程序池的用户配置文件。这使您可以访问应用程序池帐户的每个用户商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:07:17.923

这是您对 Windows Azure 网站的期望。您与其他网站一起在共享环境中运行，出于安​​全原因，您不能做很多事情。

如果您想要完全控制托管您的 Web 应用程序的机器（例如完全访问证书存储、在注册表中进行更改……），您应该将您的应用程序部署到 Web 角色。

# android - 如何从存储在服务器上的 SQL 数据库中获取特定的记录值并更新 android 的 SQLite 数据库中的值？

> ID：13523395
> 
> 赞同：1
> 
> 时间：2012-11-23T05:06:14.777
> 
> 标签：android, sql, web-services

在我的应用程序中，我将数据库存储在 Web 服务器上，我想获取存储在 SQL 数据库中的特定记录值。获得该值后，想要更新存储在 android 的 SQLite 数据库中的记录中的这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T12:03:15.423

问题范围很广，不能几行回答，但可以给你想法。为了实现上述功能，没有任何这样的机制可以让安卓客户端（如平板电脑/手机）直接连接到网络服务器。为了实现这一点，您需要在服务器端编写 Web 服务，该服务将接收来自 android 客户端的请求，根据请求类型对其进行处理并返回结果处理后的数据。您可以在客户端使用此 Web 响应并执行操作，例如将其保存在 Sqlite 数据库中。同样，您只能通过 Web 服务将本地 sqlite 数据库与服务器同步。[您可以使用Retrofit](http://square.github.io/retrofit/)或[Volley](http://developer.android.com/training/volley/index.html)轻松使用 Restful Web 服务。

# android - 使用代码启用/禁用移动数据 (GPRS)

> ID：13523396
> 
> 赞同：6
> 
> 时间：2012-11-23T05:06:24.897
> 
> 标签：android, gprs

我有一个用于启用和禁用在 API 8 和 10 中运行良好的数据的解决方案，但该代码与 ICS 不兼容，我需要一个全局解决方案，以便相同的代码必须与 API 8 迄今为止兼容安卓操作系统版本。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-23T05:24:03.843

使用以下方法。它适用于所有安卓版本。

```
int bv = Build.VERSION.SDK_INT;

boolean turnOnDataConnection(boolean ON,Context context)
 {

     try{
      if(bv == Build.VERSION_CODES.FROYO)

         {
          Method dataConnSwitchmethod;
            Class<?> telephonyManagerClass;
            Object ITelephonyStub;
            Class<?> ITelephonyClass;

            TelephonyManager telephonyManager = (TelephonyManager) context
                    .getSystemService(Context.TELEPHONY_SERVICE);

            telephonyManagerClass = Class.forName(telephonyManager.getClass().getName());
            Method getITelephonyMethod = telephonyManagerClass.getDeclaredMethod("getITelephony");
            getITelephonyMethod.setAccessible(true);
            ITelephonyStub = getITelephonyMethod.invoke(telephonyManager);
            ITelephonyClass = Class.forName(ITelephonyStub.getClass().getName());

            if (ON) {
                dataConnSwitchmethod = ITelephonyClass
                        .getDeclaredMethod("enableDataConnectivity");
            } else {
                dataConnSwitchmethod = ITelephonyClass
                        .getDeclaredMethod("disableDataConnectivity");   
            }
            dataConnSwitchmethod.setAccessible(true);
            dataConnSwitchmethod.invoke(ITelephonyStub);

           }
         else
           {
             //log.i("App running on Ginger bread+");
             final ConnectivityManager conman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
             final Class<?> conmanClass = Class.forName(conman.getClass().getName());
             final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
             iConnectivityManagerField.setAccessible(true);
             final Object iConnectivityManager = iConnectivityManagerField.get(conman);
             final Class<?> iConnectivityManagerClass =  Class.forName(iConnectivityManager.getClass().getName());
             final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
             setMobileDataEnabledMethod.setAccessible(true);
             setMobileDataEnabledMethod.invoke(iConnectivityManager, ON);
           }

         return true;
     }catch(Exception e){
                        Log.e(TAG,"error turning on/off data");

                        return false;
                        }

 } 
```

所需权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.UPDATE_DEVICE_STATS"/>
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

**更新：**

从 Android L 开始，这仅适用于系统应用程序

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T05:20:26.293

此代码在 android 姜饼及更高版本中运行：

```
private void setMobileDataEnabled(Context context, boolean enabled) {
   final ConnectivityManager conman = (ConnectivityManager)  context.getSystemService(Context.CONNECTIVITY_SERVICE);
   final Class conmanClass = Class.forName(conman.getClass().getName());
   final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
   iConnectivityManagerField.setAccessible(true);
   final Object iConnectivityManager = iConnectivityManagerField.get(conman);
   final Class iConnectivityManagerClass =  Class.forName(iConnectivityManager.getClass().getName());
   final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
   setMobileDataEnabledMethod.setAccessible(true);

   setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
} 
```

注意：你必须在下面添加这个`ANDROIDMAINFEST.XML`

```
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T12:59:07.910

您还需要该权限：

```
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-28T04:15:52.737

```
private static boolean enableMobileData(Context context, boolean enable) {
    boolean bool = true;
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    try {
        Class[] arrayOfClass = new Class[1];
        arrayOfClass[0] = Boolean.TYPE;
        Method enableDataMethod = ConnectivityManager.class.getMethod("setMobileDataEnabled", arrayOfClass);
        DailySchedulerLog.v("Method enableDataMethod = %s", enableDataMethod.getName());
        Object[] arrayOfObject = new Object[1];
        arrayOfObject[0] = Boolean.valueOf(enable);
        enableDataMethod.invoke(cm, arrayOfObject);
        return bool;
    } catch (Exception localException) {
        //            while (true) {
        DailySchedulerLog.d("Exception !!!!!!!!! loops");
        return bool = false;
        //            }
    }
} 
```

这个snipcode适用于我的情况。请添加与更改网络相关的权限

# django - 如何在 django 中访问 mapreduce 输出表

> ID：13523398
> 
> 赞同：0
> 
> 时间：2012-11-23T05:06:31.317
> 
> 标签：django, mongodb, mongoengine

我已经实现了 map reduce 并在 mongodb 中创建了一个单独的文档。这是一个单独的脚本，每天运行。现在我想使用 mongoengine 在 django 应用程序中访问这个表。知道如何访问此文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:52:59.073

MapReduce 不会创建一个文档作为它的输出，它会创建一个新的集合。

该集合的名称由您在调用 MapReduce 命令时指定为“out”参数。

您现在应该可以引用 db. 在您的代码中（或者如果您使用的是 pyMongo，那么它将是 db["out"] 其中“out”是您为输出集合指定的名称。

有关更多“输出”参数信息，请参阅[文档](http://docs.mongodb.org/manual/reference/method/db.collection.mapReduce/)。

# css - 纯 CSS 两个 div 布局用第二列文本填充第一列

> ID：13523403
> 
> 赞同：2
> 
> 时间：2012-11-23T05:06:57.450
> 
> 标签：css, xhtml, alignment

鉴于此标记

**CSS**

```
#wrapper {
    width: 900px;
}
#column1 {
    width: 320px;
    float: left;
}
#column2 {
    width: 570px;
    float: left;
    padding-left: 10px;
}
#social {
    text-align: center
}
​ 
```

**HTML**

```
<div id="wrapper">
    <div id="column1">
        <div id="image">
            <a href="http://stackoverflow.com">
                <img width="320" src="http://appharbor.com/assets/images/stackoverflow-logo.png">
            </a>
        </div>
        <div id="social">
            Some Social Plugins/Buttons Whatever
        </div>
    </div>
    <div id="column2">
        <div>
            SOME REALLY LONG CONTENT WHICH IS USER-GENERATED (Can't be styled or this structure of divs and br be expected)
        </div>
        <br />
        <div>
             Lorem ipsum dolor sit amet, consectetur adipiscing elit. In ac ante ac dolor interdum tristique vitae sit amet erat. Quisque auctor sagittis augue, vitae eleifend nibh egestas quis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris condimentum varius orci, ac accumsan mauris viverra nec. Nunc ullamcorper dapibus velit, ac vehicula turpis placerat quis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
        </div>
        <br />
        <div>
           Vivamus quis sem lectus. Phasellus lobortis semper nulla, ut imperdiet neque aliquam at. In tincidunt, mauris quis condimentum tempor, tellus magna mollis magna, a laoreet purus metus id tellus. Proin sagittis, sapien a tristique consequat, tellus neque feugiat massa, vel vulputate ligula lectus nec enim. Aliquam erat volutpat. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae;
        </div>
        <br />
        <div>
            Suspendisse dapibus diam eu felis convallis sed iaculis lorem aliquam. Duis sit amet metus a lectus commodo sodales vel a lacus. Praesent auctor facilisis ligula vitae convallis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aliquam mi leo, ultrices vitae consequat at, luctus in arcu. In tincidunt pellentesque ornare. Sed laoreet porta ante, at euismod ipsum volutpat facilisis. Donec at augue iaculis ligula interdum consequat vitae quis turpis. Donec pulvinar velit nec arcu eleifend faucibus. Praesent placerat magna eget ipsum iaculis nec condimentum nibh egestas. Donec massa tellus, porttitor vitae posuere sed, dapibus quis sapien. Sed elit est, dapibus sit amet pulvinar et, volutpat non quam. Aenean eget est tellus. Mauris at tincidunt dui.
        </div>
        <br />
        <div>
            SOME REALLY LONG CONTENT WHICH IS USER-GENERATED (Can't be styled or this structure of divs and br be expected)
        </div>
    </div>
</div> 
```

还托管在：http: [//jsfiddle.net/bbQPE/1/](http://jsfiddle.net/bbQPE/1/)

是否可以用第二列中的文本填充第一列中的空间？

PS：没有固定宽度，column2 的浮点数似乎是答案，但似乎比纯 css 解决方案或 mi 错误更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:56:15.930

删除浮动表单 column2 `#column2 { width: 570px; padding-left: 10px;}`

# api - 获取最高分辨率的 Favicon

> ID：13523406
> 
> 赞同：3
> 
> 时间：2012-11-23T05:07:21.600
> 
> 标签：api, web-applications, graphics, favicon

我正在制作一个需要根据请求动态获取网站图标的网站。我找到了一些可以很好地完成此任务的 api，到目前为止我很喜欢[http://www.fvicon.com/](http://www.fvicon.com/)。

我网站的最终图像将是 64x64px，一些网站，如 Google 和 Wordpress，有这种大小的漂亮图像，可以通过这个 api 轻松检索。当然，大多数网站只有一个 16x16 的图标图像，并且将该图像缩放到 64x64 的质量损失非常糟糕。

例子：

（高分辨率）[http://a.fvicon.com/wordpress.com?format=png&width=64&height=64](http://a.fvicon.com/wordpress.com?format=png&width=64&height=64)

（低分辨率） [http://a.fvicon.com/yahoo.com?format=png&width=64&height=64](http://a.fvicon.com/yahoo.com?format=png&width=64&height=64)

牢记这一点，我计划以某种方式确定是否有高分辨率图像可用，如果有，网站将使用此图像。如果没有，我想使用一个预制的 64x64 图标，并在其上分层放置较小的图标。我遇到的问题是确定是否有可用的高分辨率图标。

另外，我很好奇这种情况是否有更好的方法。我宁愿不使用较小的图像（64x64 非常适合这个项目）。我愿意降到的最低分辨率是 48x48，但即便如此，放大 16x16 图标也会有显着的质量损失。

有任何想法吗？如果您需要更多信息，我很乐意提供。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T16:28:59.957

[这](http://blog.55minutes.com/2012/01/multi-resolution-favicons-and-safaris-reading-list/)是在不同分辨率下**使用**网站图标的方法的链接。也许它可以帮助您了解如何获得它们。您必须搜索网站的代码（不知道如何执行此操作）`/<link.*rel="icon".*>/`并在网络服务器的根目录中搜索 favicon.ico。（我希望正则表达式是正确的）

希望我能帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T05:02:33.817

PHP 有一个名为`getimagesize`. 如果您可以检索网站图标，那么您可以运行该函数并确定它是否为高分辨率并采取相应措施。

只是一个想法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-18T15:57:39.280

这晚了，但grabicon.com 的工作方式与fvicon 非常相似，但会返回您想要的图像大小而不会降低质量。它在较小的图像周围添加了一个匹配的边框，为您提供所需的图标大小，因此您网页上的图标都“匹配”。如果网站没有图标，grabicon 会为其创建一个独特的图标。

全面披露，我是grabicon 的创建者，但它是免费的，可以为您提供您所要求的:)

# c# - Automapper - 如何使用 automapper 将三个实体映射到一个？

> ID：13523408
> 
> 赞同：1
> 
> 时间：2012-11-23T05:07:36.020
> 
> 标签：c#, automapper, typeconverter

我有 3 个实体：`Obj1`, `Obj2`,`Obj3`

如何使用自动映射器将 3 个实体映射到一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T05:29:51.650

[这篇文章](http://consultingblogs.emc.com/owainwragg/archive/2010/12/22/automapper-mapping-from-multiple-objects.aspx "EMC 咨询博客")描述了如何使用以下帮助类将多个对象映射到一个新对象中：

```
public static class EntityMapper
{
    public static T Map<T>(params object[] sources) where T : class
    {
        if (!sources.Any())
        {
            return default(T);
        }

        var initialSource = sources[0];

        var mappingResult = Map<T>(initialSource);

        // Now map the remaining source objects
        if (sources.Count() > 1)
        {
            Map(mappingResult, sources.Skip(1).ToArray());
        }

        return mappingResult;
    }

    private static void Map(object destination, params object[] sources)
    {
        if (!sources.Any())
        {
            return;
        }

        var destinationType = destination.GetType();

        foreach (var source in sources)
        {
            var sourceType = source.GetType();

            Mapper.Map(source, destination, sourceType, destinationType);
        }
    }

    private static T Map<T>(object source) where T : class
    {
        var destinationType = typeof(T)
        var sourceType = source.GetType();

        var mappingResult = Mapper.Map(source, sourceType, destinationType);

        return mappingResult as T;
    }
} 
```

简单用法：

```
var personViewModel = EntityMapper.Map<PersonViewModel>(person, address, comment); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:39:18.263

假设需要将它们映射到`Obj0`. 基本上你需要一张一张地映射它们。

```
Mapper.Map(Obj1, Obj0);
Mapper.Map(Obj2, Obj0);
Mapper.Map(Obj3, Obj0); 
```

在更高级的场景中，您可以将类型组合成一些并在和`CompositeObj`之间创建映射。`Obj0``CompositeObj`

# php - PHPExcel_Style_NumberFormat - 01234（零截断）

> ID：13523411
> 
> 赞同：0
> 
> 时间：2012-11-23T05:07:44.207
> 
> 标签：php, excel, numbers, download, excel-2007

我想在Excel文件中写入一个值，例如`0123456`，当我打开excel文件时，我只能得到该值`123456`；默认情况下`0`会自动截断，即使我使用了以下代码：

```
$objExcelWriter->objPHPExcel->getActiveSheet()->getStyle('AM')->getNumberFormat()->setFormatCode(PHPExcel_Style_NumberFormat::FORMAT_TEXT); 
```

我想准确显示值`0123456`，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:54:22.180

```
$objExcelWriter->objPHPExcel->getActiveSheet()->getStyle('AM')
    ->getNumberFormat()->setFormatCode('0000000'); 
```

# iphone - 如何使用 cocos2d 在 googleplus iphone 上发布分数？

> ID：13523416
> 
> 赞同：0
> 
> 时间：2012-11-23T05:08:20.390
> 
> 标签：iphone, cocos2d-iphone

我在 iPhone 上使用 cocos2d 进行了游戏，我想在 Google Plus 上发布分数。我搜索了这个但我没有得到任何信息。你能给我一些关于 iPhone 中 Google Plus 集成的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:44:28.553

```
 There is a Google + API but it is provides read-only access.
link of Google + API:    
https://developers.google.com/+/api/#calls 
```

# javascript - jqgrid dataurl完成事件

> ID：13523419
> 
> 赞同：1
> 
> 时间：2012-11-23T05:08:51.763
> 
> 标签：javascript, jquery, jqgrid

我正在使用 jQuery 获取零件编号的供应商列表。然后，一旦出现编辑表单，我想加载一些关于供应商/零件号组合的额外数据。问题是获取供应商的 dataurl 方法（我在 beforeInitData 方法中调用）在 beforeShowForm 方法执行之前没有完成。因此，当表单首次加载时，我没有要查找的供应商。有没有办法在 dataUrl 方法完成后运行该函数以获取额外的数据？

我试过[JQGrid editoptions dataurl 不使用 ajax get？](https://stackoverflow.com/questions/10231099/jqgrid-editoptions-dataurl-not-using-ajax-get)并开始了，但我知道会有冲突，因为每个请求都会调用 ajaxSelectOptions 方法，有时我的请求将来自具有不同要求的不同地方。

这是我用于网格的代码：

```
jQuery("#receiptPartsTable").jqGrid('editGridRow',"new",
{
    height:400,
    width:800,
    reloadAfterSubmit:false,
    recreateForm: true,
    beforeInitData: function(form)
    {
        var selectedPart = rowData.part;
        var selectedPartQty = rowData.qty;
        //Getting list of suppliers
        $("#receiptPartsTable").jqGrid('setColProp', 'supplier', { editoptions:{dataUrl:'getSuppliersForPart.php?part=' + rowData.part} });
    },
    beforeShowForm: function(form)
    {
        var selectedPart = rowData.part;
        var selectedPartQty = rowData.qty;
        $('#part').val(selectedPart);
        $('#qty').val(selectedPartQty);

        //$('#supplier').val() is not set yet; 
        var supplier = $('#supplier').val(); 

        //This method is getting called before there is a supplier
        getPartDetails(rowData.part, supplier);

        //Set up onChange listener. After selecting a supplier, get the part details
        $('#supplier').change(function() {
            var supplier = $('#supplier').val();
            getPartDetails(selectedPart, supplier);
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:49:11.880

您没有发布您使用的 jqGrid 的定义。您执行上述代码的上下文也不是很清楚。您是否`rowData`从当前选定的行中获得了之前的信息？你在哪里定义的？

尽管如此，我认为您朝着正确的方向前进，并且您已经找到了解决问题的正确方法。`complete`回调的使用`ajaxSelectOptions`可能是您可以使用的唯一方法。你写了一些“冲突”，但没有发布更多细节。

我建议您检查回调`this`内部的属性。`complete`调用的jqGrid 设置`context`选项（参见[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.common.js#L350)） （与您已经找到[的答案](https://stackoverflow.com/a/10231660/315935)`$.ajax`完全一样）。所以你可以在回调中使用,和。如果编辑现有行，则为单元格中的值。通常它是要选择的选项的名称。具有可以使用的树重要属性：, , . 在表单编辑的情况下，值和相同。在内联编辑的情况下将有 rowid 和`this.elem``this.options``this.vl``complete``this.vl``this.options``this.options.dataUrl``this.options.id``this.options.name``this.options.id``this.options.name``this.options.id``_`添加前缀。它使您可以在`complete`回调中为您使用的不同选择执行不同的代码`dataUrl`。

再说一句。在大多数情况下，您可以从中删除 call of`setColProp`并`beforeInitData`使用[答案](https://stackoverflow.com/a/8150307/315935)中建议的方法和[另一种](https://stackoverflow.com/a/8067258/315935)方法：

```
ajaxSelectOptions: {
    data: {
        id: function () {
            return $("#receiptPartsTable").getGridParam('selrow');
        },
        part: function () {
            return rowData.part;
        }
    },
    complete: function (jqXHR, textStatus) {
        var columName = this.options.name, response = jqXHR.responseText;
        ...
    }
} 
```

您可以只`editoptions: {dataUrl: "getSuppliersForPart.php"}`使用 URL 将附加`part`和`id`参数（参见上面的代码）。`id`例如，您可以使用`getRowData`基于当前选定行的 rowid 从其他列获取内容，而不是。

# python - 从 Django 控制 Twisted 服务器

> ID：13523420
> 
> 赞同：1
> 
> 时间：2012-11-23T05:08:55.633
> 
> 标签：python, django, twisted, twisted.web

我正在尝试构建一个 Twisted/Django mashup，它可以让我通过 Django 的管理界面控制由[Twisted 服务器管理的各种客户端连接。](http://twistedmatrix.com)意思是，我希望能够登录到 Django 的管理员并查看当前正在使用哪些协议，每个连接特定的任何详细信息（例如，如果服务器通过 IRC 连接到 freenode，它应该列出当前连接到的所有通道），并允许我通过修改或创建数据库记录来断开或连接新客户端。

最好的方法是什么？有很多关于[将](http://dreid.org/2009/03/twisted-django-it-wont-burn-down-your.html/) [Django](http://evennia.blogspot.com/2012/08/combining-twisted-and-django.html)与[Twisted](https://github.com/clemesha/hotdot)结合起来的帖子，但我还没有找到任何现有技术来完成我所概述的内容。我见过的所有 Twisted 示例都使用硬编码的连接参数，这让我很难想象当数据库中的记录发出信号时我将如何动态运行 reactor.connectTCP(...) 或 lostConnection(...)。

我的策略是创建一个自定义 ClientFactory，它每 N 秒轮询一次 Django/托管数据库以获取任何命令，并根据需要修改/创建/删除连接，在完成时反映数据库中的新状态。

这看起来可行吗？有更好的方法吗？有谁知道任何实现类似功能的现有项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:20:10.177

轮询数据库是蹩脚的，但不幸的是，数据库很少有好的工具（当然也没有数据库可移植工具）来监控变化。所以你的方法可能没问题。

但是，如果您的应用程序在 Django 中，并且您不支持从其他（非 Django）客户端对数据库进行随机更改，并且您的 WSGI 容器是 Twisted，那么您可以通过`callFromThread(connectTCP, ...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:05:06.547

我一直在研究另一种结合 django 和 twisted 的方式。随意尝试一下：[https](https://github.com/kowalski/featdjango) ://github.com/kowalski/featdjango 。

它的工作方式与其他方式略有不同。它启动了一个扭曲的应用程序和 http 站点。对 django 的请求在一个特殊的线程池中处理。它的特别之处在于，这些线程可以在 Deferred 上等待，这使得将同步 django 应用程序代码与异步扭曲代码结合起来变得很容易。

我想出这样的结构的原因是我的应用程序需要从 django 视图中执行大量 http 请求。我可以一次将它们全部委托给扭曲运行并等待它们的“主应用程序线程”，而不是一一执行它们。与您的问题相似的是，我也有一个异步组件，它是一个单例，我从 django 视图访问它。

例如，这就是您启动扭曲组件以及稍后从视图中获取参考的方式。

```
import threading

from django.conf import settings

_initiate_lock = threading.Lock()

def get_component():
    global _initiate_lock
    if not hasattr(settings, 'YOUR_CLIENT')
        _initiate_lock.acquire()
        try:
            # other thread might have did our job while we
            # were waiting for the lock
            if not hasattr(settings, 'YOUR_CLIENT'):
                client = YourComponent(**whatever)
                threading.current_thread().wait_for_deferred(
                    client.initiate)
                settings.YOUR_CLIENT = client
        finally:
            _initiate_lock.release()
    return settings.YOUR_CLIENT 
```

上面的代码启动了我的客户端并调用了它的启动方法。此方法是异步的并返回一个 Deferred。我在那里做了所有必要的设置。django 线程将等待它完成，然后再处理下一行。

我就是这样做的，因为我只从请求处理程序中访问它。您可能希望在启动时启动您的组件，以调用 ListenTCP|SSL。比您的 django 请求处理程序只需访问客户端上的一些公共方法即可获取有关连接的数据。这些方法甚至可以返回 Deferred，在这种情况下，您应该使用 .wait_for_defer() 来调用它们。

# android - 将 Leaderboarad Heyzap 与示例应用程序集成

> ID：13523422
> 
> 赞同：3
> 
> 时间：2012-11-23T05:09:11.530
> 
> 标签：android, leaderboard

嗨，我第一次将 Heyzap 排行榜与我的应用程序集成。我在Heyzap的官方网站上浏览过[这个文档。](http://developers.heyzap.com/mobile/docs/android_sdk)但我觉得他们只指导了登记Heyzap。

我为排行榜 Heyzap 下载了 sdk，并在我的项目中将其作为库项目。但是我在该 sdk 中的下面提到的三个 java 文件中遇到了错误。

1）**HeyzapLib.java**：

错误-

*   错误1

> i.setFlags(Intent.FLAG_INCLUDE_STOPPED_PACKAGES);
> 
> 错误提示“FLAG_INCLUDE_STOPPED_PACKAGES 无法解析或不是字段”；

*   错误2

> 新的 LeaderboardDialog(context, context.getPackageName(), levelId).show();
> 
> 错误显示“构造函数 LeaderboardDialog(Context, String, String) 未定义”

*   错误3

> LeaderboardScoreLauncher.launchScoreDialog(context, score, displayScore, levelId, gameIcon, context.getPackageName(), true, showScoreDialog);
> 
> 错误显示“LeaderboardScoreLauncher 类型中的方法 launchScoreDialog(Context, String, String, String, Drawable, String, boolean) 不适用于参数（上下文、字符串、字符串、字符串、可绘制、字符串、布尔值、布尔值）”

2）**HeyzapMarmalade.java**：

错误：

> 导入 com.ideaworks3d 无法解决

3）**UnityHelper.java**：

错误：

> 导入 com.unity3d 无法解析

此外，在 SDK 随附的文档中，他们通过包名称找到游戏然后添加排行榜来指导在仪表板上制作排行榜。我已经按照指示完成了，但是如何将它与我的代码联系起来？

任何人都可以提出任何建议或建议如何进行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:37:22.213

我在 Heyzap SDK 工作，也许可以帮到你一点。

首先，获取最新的 Heyzap Leaderboard SDK 副本（除非您已经在使用 3.3.7），然后执行 project->clean。

要修复该`Intent.FLAG_INCLUDE_STOPPED_PACKAGES`错误，请将 Heyzap SDK android 项目上的 android 版本设置为 android 版本 4.0+。那面旗帜在那之前是不存在的。

对于 Marmalade 和 Unity 错误，`libs`您需要将 Heyzap SDK 文件夹中的 jar 文件添加到 Java 构建路径中（选择所有文件，右键单击，导航到 Build Path -> Add To Build Path）。或者，如果您不使用 Marmalade 或 Unity，我很确定您可以删除这些文件。

构造函数错误让我很难过。我希望你已经拿到了我们不小心推送的 SDK 的一个损坏的临时副本。确保您使用的是 3.3.7 并查看错误是否消失。

如果您有任何其他问题，请随时与我联系。

# objective-c - Objective C - 如何将度-分-秒转换为双精度

> ID：13523424
> 
> 赞同：3
> 
> 时间：2012-11-23T05:09:23.270
> 
> 标签：objective-c, ios, mapkit

*我的实际问题是 - 当地图上的坐标*值以度-分-秒形式（作为字符串）而不是 Double 可用时，如何获取 CLLocation 对象。

所以，我正在寻找一种将度-分-秒转换为双精度的方法，我可以用它来形成一个 CLLocation 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-16T15:52:03.760

在弄清楚这一点时，我想出了一个更清晰的答案

```
// split the string to deal with lat and lon separately
NSArray *parts = [dmsString componentsSeparatedByString:@","];
NSString *latStr = parts[0];
NSString *lonStr = parts[1];

// convert each string
double lat = [self degreesStringToDecimal:latStr];
double lon = [self degreesStringToDecimal:lonStr];

// init your location object
CLLocation *loc = [[CLLocation alloc] initWithLatitude:lat longitude:lon]; 
```

**魔法**

```
- (double)degreesStringToDecimal:(NSString*)string
{
    // split the string
    NSArray *splitDegs = [string componentsSeparatedByString:@"\u00B0"];  // unicode for degree symbol
    NSArray *splitMins = [splitDegs[1] componentsSeparatedByString:@"'"];
    NSArray *splitSecs = [splitMins[1] componentsSeparatedByString:@"\""];

    // get each segment of the dms string
    NSString *degreesString = splitDegs[0];
    NSString *minutesString = splitMins[0];
    NSString *secondsString = splitSecs[0];
    NSString *direction = splitSecs[1];

    // convert degrees
    double degrees = [degreesString doubleValue];

    // convert minutes
    double minutes = [minutesString doubleValue] / 60;  // 60 degrees in a minute

    // convert seconds
    double seconds = [secondsString doubleValue] / 3600; // 60 seconds in a minute, or 3600 in a degree

    // add them all together
    double decimal = degrees + minutes + seconds;

    // determine if this is negative. south and west would be negative values
    if ([direction.uppercaseString isEqualToString:@"W"] || [direction.uppercaseString isEqualToString:@"S"])
    {
        decimal = -decimal;
    }

    return decimal;
} 
```

请注意，我只使用威斯康星州的坐标（即北部和西部）对此进行了测试。我正在使用[这个工具](http://www.fcc.gov/encyclopedia/degrees-minutes-seconds-tofrom-decimal-degrees)来验证我的计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:09:23.270

假设您在字符串中有一个坐标值 -

**拆分字符串以在单独的字符串中获取度-分-秒值。**

*   `NSString *longlat= @"+39° 44' 39.28", -104° 50' 5.86" "`（找到一种方法来逃避`"`字符串中的）

    ```
    //separate lat and long
    NSArray *splitLonglat = [longlat componentsSeparatedByString:@","];

    //separate Degree-Minute-Seconds
    NSArray *arrayLat = [[splitLonglat objectAtIndex:0] componentsSeparatedByString:@" "];
    double latitude,longitude;
    if([arrayLat count]==3){
    //get the double value for latitude
    latitude= [self convertDMSToDD_deg:(NSString *)[arrayLat objectAtIndex:0]//degree
                                   min:(NSString *)[arrayLat objectAtIndex:1]//minute
                                   sec:(NSString *)[arrayLat objectAtIndex:2]//seconds
              ];
    }else{
             //some values could be in decimal form in the String already, instead of Degree-Minute-Second form and we might not need to convert them.
             NSLog(@"latitude in decimal for %@",locationModelObject.name);
             latitude=[[splitLonglat objectAtIndex:0]doubleValue];
    }
    NSArray *arrayLong= [[splitLonglat objectAtIndex:1] componentsSeparatedByString:@" "];
                if([arrayLong count]==4){
                    //get the double value for longitude
                    longitude= [self convertDMSToDD_deg:(NSString *)[arrayLong objectAtIndex:1]//degree
                                                    min:(NSString *)[arrayLong objectAtIndex:2]//minute
                                                    sec:(NSString *)[arrayLong objectAtIndex:3]//seconds
                                ];
                }else{
                    //some values could be in decimal form in the String already, instead of Degree-Minute-Second form and we might not need to convert them.
                    NSLog(@"longitude in decimal for %@",locationModelObject.name);
                    longitude=[[splitLonglat objectAtIndex:1]doubleValue];
                }
                //add latitude longitude to the model object
                locationModelObject.latitude=latitude;
                locationModelObject.longitude=longitude; 
    ```

**进行转换的方法**

```
-(double) convertDMSToDD_deg:(NSString*)degrees min:(NSString* )minutes sec:(NSString*)seconds {

int latsign=1;

double degree=[degrees doubleValue];
double minute=[minutes doubleValue];
double second=[seconds doubleValue];
if (degree<0){
    latsign = -1;
}
else{
    latsign=1;
}
double dd = (degree + (latsign* (minute/60.)) + (latsign* (second/3600.) ) ) ;
return dd;
} 
```

# c - Socket 编程 PF 数据包 Socket

> ID：13523428
> 
> 赞同：0
> 
> 时间：2012-11-23T05:09:52.577
> 
> 标签：c, linux, sockets, unix, hex

我正在编写代码以通过`SOCK_RAW`套接字与另一台计算机上的进程进行通信。

我知道另一台机器的IP地址。

我知道一次填充`sockaddr_ll.sll_addr`一个字节的值将解决问题，例如

```
socket_address.sll_addr[0]  = 0x00;     
socket_address.sll_addr[1]  = 0x04;     
socket_address.sll_addr[2]  = 0x75;
socket_address.sll_addr[3]  = 0xC8;
socket_address.sll_addr[4]  = 0x28;
socket_address.sll_addr[5]  = 0xE5; 
```

但是当我有 6 个字节的字符数组具有另一台机器的十六进制地址时，我不知道如何做同样的事情。

我可以使用 ':' 格式打印十六进制地址

```
printf("%.2x",*ptr++ & 0xff); 
```

其中`ptr`是字符数组的数组。

但是如何使用这些值来填充`sll_addr`字节呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:21:22.430

您可以使用该`sscanf()`函数来执行此操作，如下所示：

```
#include <stdio.h>
#include <linux/if_packet.h>

const char sMac[] = "01:02:03:04:05:ff";

int main()
{
  struct sockaddr_ll sa = {0};

  sscanf(sMac, "%hhx:%hhx:%hhx:%hhx:%hhx:%hhx",
    &sa.sll_addr[0],
    &sa.sll_addr[1],
    &sa.sll_addr[2],
    &sa.sll_addr[3],
    &sa.sll_addr[4],
    &sa.sll_addr[5]
  );

  return 0; 
} 
```

神奇的是传递给`sscanf()`.

它告诉扫描仪在哪个范围内可以找到什么。

*   `x`告诉它期待十六进制表示法
*   `hh`指定 8 位值。

# c# - 在 Windows 8 C# 中序列化大数据

> ID：13523434
> 
> 赞同：0
> 
> 时间：2012-11-23T05:10:16.260
> 
> 标签：c#, serialization, windows-8

我正在开发一个将从网络检索数据的应用程序。此数据需要存储在我本地文件夹的数据库中以备将来使用。目前我将数据保存在 App.xaml.cs 的 OnSuspending() 函数中。大约 8-10 秒后调用此事件。但是当我退出应用程序并在大约 5 秒内启动应用程序时，数据不会存储在数据库中。

所以我尝试在 VisibilityChanged 事件和 Activated 事件中保存它，因为它是大量数据，有时它不保存。尽管当我进入后台或在 8 秒前启动应用程序时，我也遇到了关于未调用 VisibilityChanged 事件的问题。

所以我的问题是什么时候存储大量数据合适？

# c# - 打开 ExpanderView 时下移其他项目

> ID：13523436
> 
> 赞同：0
> 
> 时间：2012-11-23T05:10:32.343
> 
> 标签：c#, windows-phone-7, silverlight-toolkit

我有四个工具包：ExpanderView 页面上的项目。我想要的是让目标下方的 ExpanderViews 向下移动，为我需要打开的那个留出空间。我该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:39:11.560

我记得，每个 exapnder 都有一个“IsExpanded”属性。只需将其设置为“True”以显示或设置为“False”以折叠并为其他内容提供更多空间。可以通过数据绑定和代码隐藏来实现。

```
private void SetExpanded(bool expand)
{
    foreach (object item in this.listBox.Items)
    {
        CustomPizza customPizza = item as CustomPizza;
        if (customPizza != null)
        {
            customPizza.IsExpanded = expand;
        }
    }
} 
```

# ajax - Ajax 传递图像变量

> ID：13523437
> 
> 赞同：0
> 
> 时间：2012-11-23T05:11:07.153
> 
> 标签：ajax, image

我曾经使用以下 Ajax 代码来传递变量。但是，它似乎不适用于图像。有什么建议么？

```
 <p>
    <input type="file" name="image" /><br />
    <input type="button" value="Submit" onclick="addImage()" />
    </p>
    <div id="content"> </div>
    <script>
    function addImage() {
        var image = $('input[name=image]').val();
        $.ajax({
            type: "POST",
            url: "/chat",
            data: {'image': image},
            cache: false
        });
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:15:54.043

正确地说，您需要以特殊方式将数据传递到页面。查看[Nettuts+ 的本教程](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)，我在遇到类似问题时使用了它。

唯一的区别是您只允许一次上传，而它允许多次上传。您可以通过关闭该`multiple`属性来解决此问题。

此外，它会在选择后自动上传图像，所以你可能想试试这个：

```
document.getElementById('yourbuttonsid').onclick = function () {
    var i = 0, len = this.files.length, img, reader, file;  
    document.getElementById("response").innerHTML = "Uploading . . ."  
    for ( ; i < len; i++ ) {  
        file = this.files[i];  
        if (!!file.type.match(/image.*/)) {  
        }  
    }  
} 
```

而不是这个：

```
if (input.addEventListener) {  
    input.addEventListener("change", function (evt) {  
        var i = 0, len = this.files.length, img, reader, file;  
        document.getElementById("response").innerHTML = "Uploading . . ."  
        for ( ; i < len; i++ ) {  
            file = this.files[i];  
            if (!!file.type.match(/image.*/)) {  
            }  
        }  
    }, false);  
} 
```

希望我有所帮助。如有必要，根据您的个人需要调整设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:25:54.947

JSON 对象仅用于传输字符串、基本对象、整数和其他一些东西。它们不适用于发送图像。但是，如果您仍然想尝试以自己的方式实现这一点，我可以想到两种方法来做到这一点。首先，只需发送图像名称（确切链接）或上传并提供路径。

或者其次，在浏览器中将其转换为 base64，发送，并在需要时让代码将其转换回来。

看起来像这样：

```
<form method="async" onsubmit="addImage(this.image)">
    <input type="file" name="image" /><br />
    <input type="submit" value="Submit" />
</form>
<div id="content"></div>
<script>
function addImage(img) {
    $.ajax({
        type: "POST",
        url: "/chat",
        data: {'image': toBase64(img)},
        cache: false
    });
}
function toBase64(img) {
    // Create an HTML5 Canvas
    var canvas = $( '<canvas></canvas>' )
                    .attr( 'width', img.width )
                    .attr( 'height', img.height );

    // Initialize with image
    var context = canvas.getContext("2d");
    context.drawImage( img, 0, 0 );

    // Convert and return
    return context.toDataURL("image/png");
}
</script> 
```

# matlab - 如何对MATLAB中的所有其他行求和

> ID：13523443
> 
> 赞同：4
> 
> 时间：2012-11-23T05:12:34.587
> 
> 标签：matlab, matrix, sum

我仍在学习 MATLAB 中的一些高级功能。

我有一个二维矩阵，我想对所有行求和，除了 i。

例如

```
1 1 1
2 2 2
4 4 4 
```

说 i = 2，我想得到这个：

```
5 5 5 
```

我可以通过对所有行求和，然后减去第 i 行来做到这一点，但我想知道是否有更快的方法使用 MATLAB 的索引/选择语法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T07:01:07.760

似乎对所有行求和，然后减去第 i 行，要快得多：

```
A=rand(500);
n = randi(500);
tic
for i=1:1e3
%sum(A([1:n-1 n+1:end], :));
sum(A)-A(n,:);
end
toc

     Elapsed time is 0.162987 seconds.

A=rand(500);
n = randi(500);
tic
for i=1:1e3
sum(A([1:n-1 n+1:end], :));
end
toc

     Elapsed time is 1.386113 seconds. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T08:11:42.213

增加以前作者的性能考虑。nate 的解决方案更快，因为它不使用第二种方法的复杂矩阵索引。复杂的矩阵/向量索引[在 MATLAB 中非常低效](https://stackoverflow.com/questions/13382155/is-indexing-vectors-in-matlab-inefficient)。我怀疑这与引用问题中描述的索引问题相同。

考虑以下简单测试，遵循之前的框架：

```
A=rand(500);
n = randi(500);
tic
for i=1:1e3
    B=sum(A(:, :));
end
toc
Elapsed time is 0.747704 seconds.

tic
for i=1:1e3
    B=sum(A(1:end, :));
end
toc
Elapsed time is 5.476109 seconds.   % What ???!!!

tic
id = [1:n-1 n+1:500];
for i=1:1e3
    B=sum(A(id, :));
end
toc
Elapsed time is 5.449064 seconds. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T05:30:14.470

好吧，你可以这样做：

```
>> A = [ 1 1 1
         2 2 2
         4 4 4];
>> n = 2;
>> sum(A([1:n-1 n+1:end], :))
ans = 
    5 5 5 
```

然而，正如 Nate 已经指出的那样，尽管它看起来不错，但它实际上比仅减去我建议不要使用它的单行要慢得多：)

# asp.net-mvc - 如何处理无效的 asp MVC 路由

> ID：13523447
> 
> 赞同：0
> 
> 时间：2012-11-23T05:13:21.303
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有许多仅在工作流上下文中才有意义的 MVC 视图。例如，用户在另一个页面上提交信息，然后被重定向到只显示“成功”的页面..

由于重定向是 GET，因此无法通过调整 URL 来阻止用户手动导航到页面。

在这种情况下我该怎么办？重定向到错误页面，显示空白页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:24:47.493

在我看来，成功信息视图不应该有路由，因为它们不打算从浏览器 url 提供。在我们的项目中，我们通常直接从发布操作返回成功视图。例如，

```
 [HttpPost]
    public ActionResult ChangePassword(ChangePasswordModel model)
    {
        if (ModelState.IsValid)
        {

            bool changePasswordSucceeded;
            try
            {
                MembershipUser currentUser = Membership.GetUser(User.Identity.Name, userIsOnline: true);
                changePasswordSucceeded = currentUser.ChangePassword(model.OldPassword, model.NewPassword);
            }
            catch (Exception)
            {
                changePasswordSucceeded = false;
            }

            if (changePasswordSucceeded)
            {
                var infoModel = new AnyInfoModel();
                return View("ChangePasswordSuccess", infoModel); // This is not redirected, but success shown in the current route url.
            }
            else
            {
                ModelState.AddModelError("", "The current password is incorrect or the new password is invalid.");
            }
        }
        return View(model);
    } 
```

但这也有一个缺点，如果用户不小心点击了浏览器的 F5 按钮，它会尝试重新发布表单。

# prototypejs - 如何在 JavaScript 中检查按钮是否被点击

> ID：13523448
> 
> 赞同：2
> 
> 时间：2012-11-23T05:13:25.977
> 
> 标签：prototypejs

如何在原型 JavaScript 中检查按钮是否被点击？

```
$('activateButton').observe('click', function(event) {
  alert(hi);
}); 
```

上面的代码不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:21:33.197

使用此按钮：

```
<button id="mybutton">Click Me</button> 
```

用这个：

```
$('mybutton').observe('click', function () {
  alert('Hi');
}); 
```

[在这里](http://jsfiddle.net/aSRvc/)测试和工作。

您可能希望将其封装在一个`document.observe('dom:loaded', function () { })`东西中，以防止它在您的页面加载之前执行。

另外，只是一个解释：

Prototype 中的单个美元符号通过其 id 选择一个元素。该`.observe`函数与 jQuery 的函数非常相似`.on`，因为它用于将事件处理程序绑定到元素。

此外，如果您需要它成为永久的“已单击按钮”，请尝试以下操作：

```
$('mybutton').observe('click', function () {
  var clicked = true;
  window.clicked = clicked;
}); 
```

然后，如果你想测试按钮是否被点击，那么你可以这样做：

```
if (clicked) {
  // Button clicked
} else {
  // Button not clicked
} 
```

如果您尝试制作一个不希望用户多次单击的表单，这可能会有所帮助。

如何在 jQuery 中做到这一点，仅供参考：

```
$('#mybutton').on('click', function () {
  alert('Hi');
}); 
```

请注意，上面提到的 jQuery 代码也可以缩短为：

```
$('#mybutton').click(function () {
  alert('Hi');
}); 
```

jQuery 在 Prototype 中更好，因为它将 Prototype`$`和`$$`函数的使用组合到一个函数中，`$`. 这不仅可以通过它们的 id 选择元素，还可以通过其他可能的 css 选择方法。

如何使用纯 JavaScript 做到这一点：

```
document.getElementById('mybutton').onclick = function () {
  alert('Hi');
} 
```

仅供参考，以备不时之需。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:16:19.643

```
$('body').delegate('.activateButton', 'click', function(e){
  alert('HI');
}); 
```

# python - 整数转二进制

> ID：13523468
> 
> 赞同：1
> 
> 时间：2012-11-23T05:16:44.527
> 
> 标签：python

> **可能重复：**
> [在不使用内置 bin 函数的情况下将整数转换为二进制](https://stackoverflow.com/questions/13522773/convert-an-integer-to-binary-without-using-the-built-in-bin-function)

此函数接收一个以 10 为底的数字作为参数，并应返回一个列表，该列表表示以二进制表示的相同值作为位列表，其中列表中的第一个元素是最高有效（最左边）位。

`convert_10_to_2(11)`应该返回`[1, 0, 1, 1]`

我不能使用二进制函数或外部函数，因此必须以更复杂的方式完成。

```
b = ''
while num > 0:
    b = str(num % 2) + b
    num >>= 1
return (b) 
```

好的，我的代码终于启动了，好的，我明白了`'1011'`，但是我需要`[1,0,1,1]`，我不能真正使用诸如`bin(x)`or之类的任何函数`binary_list`。这就是这个问题这么长时间的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:26:06.663

您可以初始化一个列表，然后使用 for 循环遍历字符串，并在每次迭代时将值附加到列表中，就像这样。

```
binary_string = convert_10_to_2(11)

binary_list = []

for character in binary_string:
    binary_list.append(int(character)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:31:59.900

bin(X), x 是函数返回二进制字符串的整数

更多[@python 内置函数](http://docs.python.org/2/library/functions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:49:24.993

这适用于 Python 2.x 和 3.x：

```
list(map(int, '{:b}'.format(11))) 
```

如果您愿意，请替换`11`为其他号码。`list`如果您不需要对 Python 3.x 的支持，请删除封闭调用。如果您确实认为有必要，请将其包含在函数中。

# android - 运行 ant clean 调试时

> ID：13523473
> 
> 赞同：1
> 
> 时间：2012-11-23T05:17:49.617
> 
> 标签：android, git, shell, mobile, touch

您好我正在尝试在 Salesforce 触摸平台中创建一个 android 本机应用程序。我正在尝试将 lib 从示例项目复制到我的应用程序。第一次我在我的 cmd 中输入了这个推荐

```
cd $TARGET_DIR
$ANDROID_SDK_DIR/tools/android update project -p . -t 1 
```

结果是 `Updated project.properties Updated local.properties Updated file C:\Anu\SalesforceTouch\build.xml Updated file C:\Anu\SalesforceTouch\proguard-project.txt It seems that there are sub-projects. If you want to update them please use the --subprojects parameter.`

之后我使用了这个命令

```
 ant clean debug 
```

这次我得到的结果为

```
 l
 [javac] symbol  : variable sf__auth_container
 [javac] location: class android.R.id
 [javac]     public int idAuthContainer() { return R.id.sf__auth_container; }
 [javac]                                               ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:46: cannot  find symbol
 [javac] symbol  : variable sf__menu_clear_cookies
 [javac] location: class android.R.id
 [javac]     public int idItemClearCookies() { return R.id.sf__menu_clear_cookies; }
 [javac]                                                  ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:47:  cannot  find symbol
  [javac] symbol  : variable sf__menu_pick_server
  [javac] location: class android.R.id
  [javac]     public int idItemPickServer() { return R.id.sf__menu_pick_server; }
  [javac]                                                ^
  [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:48: cannot  find symbol
 [javac] symbol  : variable sf__menu_reload
 [javac] location: class android.R.id
 [javac]     public int idItemReload() { return R.id.sf__menu_reload; }
 [javac]                                            ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:49: cannot  find symbol
 [javac] symbol  : variable sf__load_separator
 [javac] location: class android.R.id
 [javac]     public int idLoadSeparator() { return R.id.sf__load_separator; }
 [javac]                                               ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:50: cannot  find symbol
 [javac] symbol  : variable sf__load_spinner
 [javac] location: class android.R.id
 [javac]     public int idLoadSpinner() { return R.id.sf__load_spinner; }
 [javac]                                             ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:51: cannot  find symbol
 [javac] symbol  : variable sf__server_name
 [javac] location: class android.R.id
 [javac]     public int idServerName() { return R.id.sf__server_name; }
 [javac]                                            ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:52: cannot  find symbol
 [javac] symbol  : variable Text_HostName
  [javac] location: class android.R.style
 [javac]     public int styleTextHostName() { return R.style.Text_HostName; }
 [javac]                                                    ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:53: cannot  find symbol 
 [javac] symbol  : variable Text_HostUrl
 [javac] location: class android.R.style
 [javac]     public int styleTextHostUrl() { return R.style.Text_HostUrl; }
 [javac]                                                   ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:55: cannot  find symbol
 [javac] symbol  : variable sf__passcode
 [javac] location: class android.R.layout
 [javac]     public int layoutPasscode() {return R.layout.sf__passcode; }
 [javac]                                                 ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:56: cannot  find symbol
 [javac] symbol  : variable sf__passcode_title
 [javac] location: class android.R.id
 [javac]     public int idPasscodeTitle() {return R.id.sf__passcode_title; }
 [javac]                                              ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:57: cannot  find symbol
 [javac] symbol  : variable sf__passcode_error
 [javac] location: class android.R.id
 [javac]     public int idPasscodeError() {return R.id.sf__passcode_error; }
 [javac]                                              ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:58: cannot find symbol
 [javac] symbol  : variable sf__passcode_instructions
 [javac] location: class android.R.id
 [javac]     public int idPasscodeInstructions() {return  R.id.sf__passcode_instructions; }
 [javac]                                                     ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:59: cannot  find symbol
 [javac] symbol  : variable sf__passcode_text
 [javac] location: class android.R.id
 [javac]     public int idPasscodeText() {return R.id.sf__passcode_text; }
 [javac]                                             ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:60: cannot  find symbol
 [javac] symbol  : variable sf__passcode_create_title
 [javac] location: class android.R.string
 [javac]     public int stringPasscodeCreateTitle() {return  R.string.sf__passcode_create_title; }

 [javac]                                                            ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:61: cannot  find symbol
 [javac] symbol  : variable sf__passcode_enter_title
 [javac] location: class android.R.string
 [javac]     public int stringPasscodeEnterTitle() {return  R.string.sf__passcode_enter_title; }
 [javac]                                                           ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:62: cannot  find symbol
 [javac] symbol  : variable sf__passcode_confirm_title
 [javac] location: class android.R.string
 [javac]     public int stringPasscodeConfirmTitle() {return  R.string.sf__passcode_confirm_title;}
 [javac]                                                             ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:63: cannot  find symbol
 [javac] symbol  : variable sf__passcode_enter_instructions
 [javac] location: class android.R.string
 [javac]     public int stringPasscodeEnterInstructions() {return  R.string.sf__passcode_enter_instructions; }
 [javac]                                                                  ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:64: cannot  find symbol
 [javac] symbol  : variable sf__passcode_create_instructions
 [javac] location: class android.R.string
 [javac]     public int stringPasscodeCreateInstructions() {return  R.string.sf__passcode_create_instructions; }
 [javac]                                                                   ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:65: cannot  find symbol 
 [javac] symbol  : variable sf__passcode_confirm_instructions
 [javac] location: class android.R.string
 [javac]     public int stringPasscodeConfirmInstructions() {return  R.string.sf__passcode_confirm_instructions; }
 [javac]                                                                    ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:66: cannot  find symbol
 [javac] symbol  : variable sf__passcode_min_length
 [javac] location: class android.R.string
 [javac]     public int stringPasscodeMinLength() {return  R.string.sf__passcode_min_length; }
 [javac]                                                          ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:67:cannot  find symbol
 [javac] symbol  : variable sf__passcode_try_again
 [javac] location: class android.R.string
 [javac]     public int stringPasscodeTryAgain() {return  R.string.sf__passcode_try_again; }
 [javac]                                                         ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:68: cannot find symbol
 [javac] symbol  : variable sf__passcode_final
 [javac] location: class android.R.string
 [javac]     public int stringPasscodeFinal() {return R.string.sf__passcode_final; }
 [javac]                                                      ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:69: cannot  find symbol
 [javac] symbol  : variable sf__passcodes_dont_match
 [javac] location: class android.R.string
 [javac]     public int stringPasscodesDontMatch() {return  R.string.sf__passcodes_dont_match; }
 [javac]                                                           ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:71: cannot find symbol
 [javac] symbol  : variable sf__picker_custom_label
 [javac] location: class android.R.id
 [javac]     public int idPickerCustomLabel() {return R.id.sf__picker_custom_label; }
 [javac]                                                  ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:72: cannot find symbol
 [javac] symbol  : variable sf__picker_custom_url
 [javac] location: class android.R.id
 [javac]     public int idPickerCustomUrl() {return R.id.sf__picker_custom_url; }
 [javac]                                                ^
[javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:73: cannot  find symbol 
 [javac] symbol  : variable sf__server_url_default_custom_label
 [javac] location: class android.R.string
 [javac]     public int stringServerUrlDefaultCustomLabel() {return  R.string.sf__server_url_default_custom_label;}
 [javac]                                                                    ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:74: cannot  find symbol
 [javac] symbol  : variable sf__server_url_default_custom_url
 [javac] location: class android.R.string
 [javac]     public int stringServerUrlDefaultCustomUrl() {return  R.string.sf__server_url_default_ custom_url;}
 [javac]                                                                  ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:75: cannot  find symbol
 [javac] symbol  : variable sf__server_url_add_title
 [javac] location: class android.R.string
 [javac]     public int stringServerUrlAddTitle() {return  R.string.sf__server_url_add_title;}
 [javac]                                                          ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:76: cannot  find symbol
 [javac] symbol  : variable sf__server_url_edit_title
 [javac] location: class android.R.string
 [javac]     public int stringServerUrlEditTitle() {return  R.string.sf__server_url_edit_title;}
 [javac]                                                           ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:77: cannot  find symbol 
 [javac] symbol  : variable sf__custom_server_url
 [javac] location: class android.R.layout
 [javac]     public int layoutCustomServerUrl() {return  R.layout.sf__custom_server_url;  }
 [javac]                                                        ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:78: cannot  find symbol
 [javac] symbol  : variable sf__apply_button
 [javac] location: class android.R.id
 [javac]     public int idApplyButton() {return R.id.sf__apply_button;}
 [javac]                                            ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:79: cannot  find symbol
 [javac] symbol  : variable sf__cancel_button
 [javac] location: class android.R.id
 [javac]     public int idCancelButton() {return R.id.sf__cancel_button;}
 [javac]                                             ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:80: cannot  find symbol
 [javac] symbol  : variable sf__invalid_server_url
 [javac] location: class android.R.string
 [javac]     public int stringInvalidServerUrl() {return  R.string.sf__invalid_server_url;}
  [javac]                                                         ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:81: cannot  find symbol
 [javac] symbol  : variable sf__server_list_group
 [javac] location: class android.R.id
 [javac]     public int idServerListGroup() {return R.id.sf__server_list_group; }
 [javac]                                                ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:82: cannot  find symbol
 [javac] symbol  : variable sf__server_picker
 [javac] location: class android.R.layout
 [javac]     public int layoutServerPicker() {return R.layout.sf__server_picker; }
 [javac]                                                     ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:83: cannot  find symbol
 [javac] symbol  : variable sf__auth_login_production
 [javac] location: class android.R.string
 [javac]     public int stringAuthLoginProduction() {return  R.string.sf__auth_login_production;}
 [javac]                                                            ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:84: cannot  find symbol 
 [javac] symbol  : variable sf__auth_login_sandbox
 [javac] location: class android.R.string
 [javac]     public int stringAuthLoginSandbox() {return  R.string.sf__auth_login_sandbox;}
 [javac]                                                         ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:85: cannot  find symbol
 [javac] symbol  : variable sf__clear_custom_url
 [javac] location: class android.R.menu
 [javac]     public int menuClearCustomUrl() {return R.menu.sf__clear_custom_url; }
 [javac]                                                   ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:86: cannot  find symbol
 [javac] symbol  : variable sf__menu_clear_custom_url
 [javac] location: class android.R.id
 [javac]     public int idMenuClearCustomUrl() {return R.id.sf__menu_clear_custom_url;}
 [javac]                                                   ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:87: cannot  find symbol
 [javac] symbol  : variable sf__edit_icon
 [javac] location: class android.R.drawable
 [javac]     public int drawableEditIcon() {return R.drawable.sf__edit_icon; }
 [javac]                                                     ^
[javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\SalesforceRImpl.java:88: cannot  find symbol
 [javac] symbol  : variable sf__show_custom_url_edit
 [javac] location: class android.R.id
 [javac]     public int idShowCustomUrlEdit() {return R.id.sf__show_custom_url_edit;}
 [javac]                                                  ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\myappApp.java:39: method does  not override or implement a method from a supertype
 [javac]     @Override
 [javac]     ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\myappApp.java:46: cannot find  symbol
 [javac] symbol  : variable Encryptor
 [javac] location: class com.acme.mobileapp.myappApp
 [javac]             return Encryptor.hash(name + "x;lksalk1jsadihh23lia;lsdhasd2",   name + "112;k aslkxs0-12;skcxn1203ph");
 [javac]                    ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\myappApp.java:44: method does  not override or implement a method from a supertype
 [javac]     @Override
 [javac]     ^
 [javac] c:\Anu\SalesforceTouch\src\com\acme\mobileapp\myappApp.java:49: method does  not override or implement a method from a supertype
 [javac]     @Override
 [javac]     ^
 [javac] 78 errors 
```

BUILD FAILED C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:680: The following error occurred while executed this line: C:\Program Files (x86)\Android\android-sdk \tools\ant\build.xml:693：编译失败；有关详细信息，请参阅编译器错误输出。

有人知道可能是什么原因，请为我提供此问题的解决方案。

# c# - 咖喱函数数组不能正常工作

> ID：13523474
> 
> 赞同：1
> 
> 时间：2012-11-23T05:17:52.423
> 
> 标签：c#, lambda, closures, currying

我对 C# 比较陌生，所以如果这个问题的答案很明显，我很抱歉。

我正在编写的程序的一部分存储结构数组，结构的元素之一是柯里化函数。

以下是导致问题的代码部分（尽我所能）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CurryingProblem
{
    class Program
    {
        public struct Value
        {
            public Func<decimal> Output;
        }
        public static decimal AddOne(decimal value)
        {
            return value + 1;
        }

        static void Main(string[] args)
        {
            Dictionary<string, Decimal> ThingsToAdd = new Dictionary<string, decimal>();
            Dictionary<string, Value> ThingsToPrint = new Dictionary<string, Value>();

            ThingsToAdd.Add("One", 1.0m);
            ThingsToAdd.Add("Two", 2.0m);
            foreach (KeyValuePair<string, Decimal> thing in ThingsToAdd)
            {
                Value value = new Value();
                value.Output = () => AddOne(thing.Value);
                ThingsToPrint.Add(thing.Key, value);
            }
            Console.WriteLine(ThingsToPrint["One"].Output());
            Console.WriteLine(ThingsToPrint["Two"].Output());

            Console.ReadKey();
        }
    }
} 
```

该程序的预期输出是

```
2.0
3.0 
```

但实际输出是

```
3.0
3.0 
```

关于我哪里出错的任何方向都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:25:58.523

您的问题类似于**[access to modified closure](https://stackoverflow.com/questions/9186189/access-to-modified-closure-in-lambda-expression)**。Eric Lippert 的这篇[**文章**](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)很好地解释了这一点。您需要传递局部范围的变量，而不是传递循环 thing.Value。创建一个新变量并将 thing.Value 分配给它，以便传递本地副本。

```
 static void Main(string[] args)
    {
        Dictionary<string, Decimal> ThingsToAdd = new Dictionary<string, decimal>();
        Dictionary<string, Value> ThingsToPrint = new Dictionary<string, Value>();

        ThingsToAdd.Add("One", 1.0m);
        ThingsToAdd.Add("Two", 2.0m);
        foreach (KeyValuePair<string, Decimal> thing in ThingsToAdd)
        {
            Value value = new Value();
            Decimal d = thing.Value;
            value.Output = () => AddOne(d);
            ThingsToPrint.Add(thing.Key, value);
        }
        Console.WriteLine(ThingsToPrint["One"].Output());
        Console.WriteLine(ThingsToPrint["Two"].Output());

        Console.ReadKey();
    } 
```

# number-theory - 欧拉计划 #402

> ID：13523476
> 
> 赞同：1
> 
> 时间：2012-11-23T05:18:04.013
> 
> 标签：number-theory

我对 PE 在这里提出的大量问题感到惊讶。好吧，我不想要一个解决方案，但我想要一些关于[问题 402](http://projecteuler.net/problem=402)正确方向的提示。

我一直无法找到 S(N) 的封闭形式解决方案。据我所知，[这是一个相当大的循环](https://math.stackexchange.com/questions/243872/need-help-simplifying-an-equation)。

现在我知道了更多的事情，比如 Fib(N) mod 1e9 是周期性的。看看[Pisano 周期](http://en.wikipedia.org/wiki/Pisano_period)，S(N) 也有一个周期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:55:30.693

一旦你完全理解了 M(a, b, c)，就很容易弄清楚 S(n) 的行为。所以我的建议是，如果您正在寻找 S(n) 的封闭式表达式，请先为 M(a, b, c) 找到一个。

警告：我在 S(n) 天前想出了一个很好的函数。一旦我做到了，我对自己说，“太好了，我完成了最困难的部分。” 我错了。我在解决其余问题时遇到了很多麻烦。

# visual-studio - vs.net 2012 Build 中的团队资源管理器失败

> ID：13523478
> 
> 赞同：0
> 
> 时间：2012-11-23T05:18:26.490
> 
> 标签：visual-studio, tfsbuild

我有一个构建良好的 vs.net 2012 asp.net c# 解决方案。但是，当我尝试通过 TFS 2012 中的自动构建来构建这个时，它以这个错误结束：

![在此处输入图像描述](../Images/a768cdab75dd702e028c5876ebc38b59.png)

消息很清楚，构建控制器看不到 dll。问题是放置这些 dll 的路径/位置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:23:43.040

dll 的路径/位置无关紧要，只要

*   它们被添加到源代码控制中
*   他们所在的文件夹映射在构建定义工作区中
*   项目和dll之间的相对路径在构建服务器上没有不同

最简单的方法是将它们包含在解决方案文件夹的子文件夹中。

更好的方法是使用 NuGet 包并启用构建时恢复。

# linux - 删除旧安装后在 linux 中安装 apache2

> ID：13523483
> 
> 赞同：0
> 
> 时间：2012-11-23T05:19:17.223
> 
> 标签：linux, apache2.2

在搜索安装`apache web server`时`linux ubuntu lucid`，我发现有些文章使用名称`apache2`而其他使用`httpd`..`apt-get install apache2`是正确的安装方式吗？

我想删除我当前的所有 apache2 安装，并重新安装所有内容。我应该使用

```
sudo apt-get remove --purge apache2 
```

我目前有 apache `/etc/apache2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:45:47.507

apache2 是 Ubuntu 的 Apache httpd 版本 2 分支的名称（我认为目前使用的是 2.2）。Ubuntu 软件包信息的最佳来源可能是它自己的文档；请参阅[https://help.ubuntu.com/10.04/serverguide/httpd.html](https://help.ubuntu.com/10.04/serverguide/httpd.html)。但是，是的，这两个命令是正确的。

# python - 敏捷添加表单模板

> ID：13523486
> 
> 赞同：2
> 
> 时间：2012-11-23T05:19:31.833
> 
> 标签：python, plone, dexterity

我正在尝试在我的敏捷内容类型上创建一个自定义的添加表单。我已按照此链接的说明进行操作：http: [//plone.org/products/dexterity/documentation/manual/developer-manual/advanced/forms](http://plone.org/products/dexterity/documentation/manual/developer-manual/advanced/forms)

在我的内容类型中：

```
class BusinessTransactionFormAddForm(dexterity.AddForm):
    grok.name('ebpls.app.businesstransactionform') 
```

对于我的模板 businesstransactionformaddform.pt，我使用了此链接中的布局：[http ://dexterity-developer-manual.readthedocs.org:8000/en/latest/schema-driven-forms/customising-form-presentation/layout-模板.html](http://dexterity-developer-manual.readthedocs.org:8000/en/latest/schema-driven-forms/customising-form-presentation/layout-templates.html)

我之所以要自定义添加表单，是因为我想插入 jQuery 来计算来自 DataGrid 字段的值。插入javascript没有问题。唯一的问题是，在网页上，它创建了两个表单，分别位于上、下，即相同类型的字段被复制到另一个的底部。我使用的模板有问题吗？有谁知道添加视图的正确模板是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T19:15:44.657

Dexterity 假定添加表单的模板*仅*用于表单而不是整个页面，因此它采用表单模板并将其包装在另一个使用 main_template 的模板中。

由于您的自定义模板确实呈现整个页面，因此您应该使用 form.wrap 指令关闭包装：

```
from five import grok
from plone.directives import form
from plone.directives import dexterity

class BusinessTransactionFormAddForm(dexterity.AddForm):
    grok.name('ebpls.app.businesstransactionform')
    form.wrap(False) 
```

# android-webview - 我们可以在 webview 中加载基本的 javascript 函数吗？

> ID：13523490
> 
> 赞同：5
> 
> 时间：2012-11-23T05:20:01.297
> 
> 标签：android-webview

我在 webview 中实现了一个功能。我将 javascript 函数放在 html 头中，然后通过 web.loadUrl 加载它，但 webview 没有考虑该函数。可以这样加载吗？还是我走错了路？

```
 "<td><a href='' onclick=\"displaying('image url')\" id=/image"+my_image[i] +"/"+"

 class='popup-open'><img 

src='"+my_image[i]+"'"+

                "width='80' height='65'></a></td></tr><tr>";

the hmtl content

   String webData = "<!DOCTYPE html>" +

                "<head> "+

                "<script>"+"function displaying(url)

{document.getElementById('image').innerHTML =\"<img src=\"url\" width=\"100\" height=\"105\">\";}"+"</script>"
                +
                " </head><body>"+ html_content +"</tr></table></body></html>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:06:14.127

也许是你的 JavaScript 或一些语法狗屎。首先，试着弄清楚 WebKit 引擎的错误信息是什么。

要显示 webview 的 javascript 消息，请将 onConsoleMessage 放入 implementation。

```
 myWebView.setWebChromeClient(new WebChromeClient() {
            public boolean onConsoleMessage(ConsoleMessage cm) {
                Log.d(cm.message() + " -- From line "
                        + cm.lineNumber() + " of "
                        + cm.sourceId());
                return true;
            }
        }); 
```

确保您启用了以下功能

```
WebSettings webSettings = webView.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

# windows-runtime - 如何在 ui 线程上运行委托？

> ID：13523492
> 
> 赞同：0
> 
> 时间：2012-11-23T05:20:20.647
> 
> 标签：windows-runtime, windows-store-apps

我在一个工作线程中（我的意思是，线程池任务）......

我的 windows phone 我会做：

```
 Deployment.Current.Dispatcher.BeginInvoke(
      delegate () 
      {
        // Do something on ui thread...
      }
    ); 
```

如何在 Windows 应用商店应用程序中执行此操作？

我通过msdn搜索但空无一物......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:07:46.567

这是答案：

```
class ThreadUtility
{
  // Warning: "Because this call is not awaited, execution of the current method 
  // continues before the call is completed. Consider applying the 'await' 
  // operator to the result of the call."
  // But that's what we want here --- just to schedule it and carry on.
  #pragma warning disable 4014 
  public static void runOnUiThread(Windows.UI.Core.DispatchedHandler del)
  {
    CoreWindow window = CoreWindow.GetForCurrentThread();
    window.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, del);
  }
  #pragma warning restore 4014
}

... 

    ThreadUtility.runOnUiThread(
      delegate () 
      {
        if(handler != null)
        {
          // Do something on ui thread...
        }
      }
    ); 
```

# regex - 使用 logstash grok 过滤器提取文件路径的一部分的正则表达式

> ID：13523493
> 
> 赞同：5
> 
> 时间：2012-11-23T05:20:23.723
> 
> 标签：regex, logstash, logstash-grok

我是正则表达式的新手，但我认为这里的人们可能会给我有价值的输入。我正在使用logstash[`grok`](http://logstash.net/docs/1.0.17/filters/grok)过滤器，我只能在其中提供正则表达式。

我有一个这样的字符串

```
/app/webpf04/sns882A/snsdomain/logs/access.log 
```

我想使用正则表达式`sns882A`从字符串中获取部分，即第三个“/”之后的子字符串，我该怎么做？

我仅限于正则表达式，因为 grok 只接受正则表达式。是否可以为此使用正则表达式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-22T02:42:30.227

是的，您可以使用正则表达式通过 grok 获得您想要的：

```
/[^/]+/[^/]+/(?<field1>[^/]+)/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T05:27:56.477

对于您的正则表达式：

```
 /\w*\/\w*\/(\w*)\/ 
```

您还可以通过以下方式进行测试： [http ://www.regextester.com/](http://www.regextester.com/)

通过谷歌搜索正则表达式测试器，您可以拥有不同的 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:29:04.480

这就是我在 Perl 中的做法：

```
my ($name) = ($fullname =~ m{^(?:/.*?){2}/(.*?)/}); 
```

**编辑**：如果你的框架不支持 Perl-ish non-grouping groups `(?:xyz)`，这个正则表达式应该可以代替：

```
^/.*?/.*?/(.*?)/ 
```

如果您担心 的性能`.*?`，这也适用：

```
^/[^/]+/[^/]+/([^/]+)/ 
```

**还有一点需要注意：**上面的所有正则表达式都将匹配 string `/app/webpf04/sns882A/`。

但是匹配字符串与第一个匹配组完全不同，这`sns882A`在所有三种情况下都是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T05:35:00.023

如果您确实在使用 Perl，那么您应该[`File::Spec`](https://metacpan.org/module/File%3a%3aSpec)像这样使用模块

```
use strict;
use warnings;

use File::Spec;

my $path = '/app/webpf04/sns882A/snsdomain/logs/access.log';
my @path = File::Spec->splitdir($path);

print $path[3], "\n"; 
```

**输出**

```
sns882A 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-21T06:28:30.330

相同的答案，但修复了一个小错误。如果您在开始时未指定 ^，它将进行下一场比赛（尝试更长的路径添加更多 / 用于输入。）。要修复它，只需像这样在开头添加 ^ 。^ 表示输入行的开始。最后 group1 是你的答案。

```
^/[^/]+/[^/]+/([^/]+)/ 
```

如果您正在使用任何 URI 路径，请使用以下内容。（它将处理路径以及 URI）。

```
^.*?/[^/]+/[^/]+/([^/]+)/ 
```

# c - 如果 mmap 比传统文件访问更快，我们在哪里看到节省时间？

> ID：13523496
> 
> 赞同：4
> 
> 时间：2012-11-23T05:20:37.457
> 
> 标签：c, linux, linux-kernel, linux-device-driver

我了解 mmap 的用法。考虑对文件的简单读/写操作，涉及到，打开文件，分配缓冲区，读取[需要上下文切换，]，然后缓冲区中可供用户使用的数据，缓冲区的变化不会反映除非明确写入文件。

相反，如果我们使用 mmap，直接写入缓冲区只不过是写入文件。

问题：

1）文件在硬盘里，mmaped进进程，每次写入mmaped内存，**是不是直接写入文件？**. 在这种情况下，**它不需要任何上下文切换**，因为更改是直接在文件本身中完成的。**如果 mmap 比传统文件访问更快，我们在哪里看到节省时间？**

请解释。如果我也错了，请纠正我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T06:19:42.873

对文件的更新不会立即在磁盘中可见，但在调用之后`unmap`或之后可见`msync`。因此，更新期间没有系统调用，不涉及内核。但是，由于文件是按需要逐页延迟读取的，因此操作系统可能需要在您跨页边界时读入文件的某些部分。内存映射最明显的优点是它消除了内核空间到用户空间的数据副本。系统调用也不需要寻找文件中的特定位置。

# java - 如何使用 WSDL 创建 Java SOAP 客户端

> ID：13523507
> 
> 赞同：0
> 
> 时间：2012-11-23T05:22:26.050
> 
> 标签：java, soap, wsdl

> **可能重复：**
> [Java：简单 SOAP 客户端](https://stackoverflow.com/questions/3463216/java-simple-soap-client)

如何使用 WSDL 创建 java 客户端？以及如何运行或测试该客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:30:33.710

首先，您必须从 wsdl 生成客户端存根。1.您可以使用Eclipse生成客户端存根 2.或者使用axis.jar的WSDL2JAVA类 3.然后，配置代理的PortType并调用适当的操作例如：

```
 serviceProxy.setEndpoint(endPoint);
    Service_PortType service_PortType = serviceProxy.getService_PortType();
    ((Stub) service_PortType )._setProperty(Call.USERNAME_PROPERTY,"username");
    ((Stub) service_PortType )._setProperty(Call.PASSWORD_PROPERTY,"password");

    serviceProxy.setService_PortType(service_PortType );
    Response response = serviceProxy.operation(Request); 
```

# mysql - 等待从属 SQL 线程释放足够的中继日志空间会影响 MySQL 复制吗？

> ID：13523508
> 
> 赞同：2
> 
> 时间：2012-11-23T05:22:33.833
> 
> 标签：mysql

我想知道当从属状态显示时从主到从的复制是否受到影响/停止 - 等待从属 SQL 线程释放足够的中继日志空间。

提前致谢..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:48:21.007

在 SQL 线程处理完之前，IO 线程不能再写入任何中继日志，因此它可能是一个“阻塞”复制的长时间运行的查询。你应该看到它`SHOW PROCESSLIST`。

更多信息在[mysql](http://dev.mysql.com/doc/refman/5.5/en/slave-io-thread-states.html)

# php - 优化基于 PHP cURL 的链接检查器脚本 - 目前非常慢

> ID：13523515
> 
> 赞同：2
> 
> 时间：2012-11-23T05:23:54.007
> 
> 标签：php, redirect, curl, http-status-codes

我正在使用 PHP 脚本（使用 cURL）来检查是否：

*   我数据库中的链接是正确的（即返回 HTTP 状态 200）
*   链接实际上被重定向并重定向到适当/相似的页面（使用页面的内容）

结果将保存到日志文件中，并作为附件通过电子邮件发送给我。

这一切都很好并且可以正常工作，但是它很慢，而且有一半的时间会超时并提前中止。值得注意的是，我有大约 16,000 个链接要检查。

想知道如何最好地让这个运行更快，我做错了什么？

下面的代码：

```
function echoappend ($file,$tobewritten) {

        fwrite($file,$tobewritten);
        echo $tobewritten;
}

error_reporting(E_ALL);
ini_set('display_errors', '1');

$filename=date('YmdHis') . "linkcheck.htm";
echo $filename;
$file = fopen($filename,"w+");

try {
        $conn = new PDO('mysql:host=localhost;dbname=databasename',$un,$pw);
        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        echo '<b>connected to db</b><br /><br />';

        $sitearray = array("medical.posterous","ebm.posterous","behavenet","guidance.nice","www.rch","emedicine","www.chw","www.rxlist","www.cks.nhs.uk");

        foreach ($sitearray as $key => $value) {    
            $site=$value;

            echoappend ($file, "<h1>" . $site . "</h1>");

            $q="SELECT * FROM link WHERE url LIKE :site";
            $stmt = $conn->prepare($q);
            $stmt->execute(array(':site' => 'http://' . $site . '%'));
            $result = $stmt->fetchAll();

            $totallinks = 0;
            $workinglinks = 0;

            foreach($result as $row)
            {

                $ch = curl_init();
                $originalurl = $row['url'];

                curl_setopt($ch, CURLOPT_URL, $originalurl);
                curl_setopt($ch, CURLOPT_HEADER, 1);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
                curl_setopt($ch, CURLOPT_NOBODY, true);
                curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);

                $output = curl_exec($ch);
                if ($output === FALSE) {
                    echo "cURL Error: " . curl_error($ch);
                }

                $urlinfo = curl_getinfo($ch);

                if ($urlinfo['http_code'] == 200)
                {
                    echoappend($file, $row['name'] . ": <b>working!</b><br />");
                    $workinglinks++;
                }
                else if ($urlinfo['http_code'] == 301 || 302)
                {
                    $redirectch = curl_init();                  
                    curl_setopt($redirectch, CURLOPT_URL, $originalurl);
                    curl_setopt($redirectch, CURLOPT_HEADER, 1);
                    curl_setopt($redirectch, CURLOPT_RETURNTRANSFER, 1);
                    curl_setopt($redirectch, CURLOPT_NOBODY, false);
                    curl_setopt($redirectch, CURLOPT_FOLLOWLOCATION, true);

                    $redirectoutput = curl_exec($redirectch);

                    $doc = new DOMDocument();
                    @$doc->loadHTML($redirectoutput);
                    $nodes = $doc->getElementsByTagName('title');

                    $title = $nodes->item(0)->nodeValue;

                    echoappend ($file, $row['name'] . ": <b>redirect ... </b>" . $title . " ... ");

                    if (strpos(strtolower($title),strtolower($row['name']))===false) {
                        echoappend ($file, "FAIL<br />");
                    }
                    else {
                        $header = curl_getinfo($redirectch);
                        echoappend ($file, $header['url']);
                        echoappend ($file, "SUCCESS<br />");
                    }

                    curl_close($redirectch);
                }
                else
                {
                    echoappend ($file, $row['name'] . ": <b>FAIL code</b>" . $urlinfo['http_code'] . "<br />");
                }

                curl_close($ch);

                $totallinks++;
            }
            echoappend ($file, '<br />');

            echoappend ($file, $site . ": " . $workinglinks . "/" . $totallinks . " links working. <br /><br />");

        }

        $conn = null;
        echo '<br /><b>connection closed</b><br /><br />';

    } catch(PDOException $e) {
            echo 'ERROR: ' . $e->getMessage();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:49:14.163

简短的回答是使用 curl_multi_* 方法来并行化您的请求。

缓慢的原因是 Web 请求相对较慢。有时很慢。使用 curl_multi_* 函数可以同时运行多个请求。

需要注意的一件事是限制一次运行的请求数。换句话说，不要一次运行 16,000 个请求。也许从 16 岁开始，看看情况如何。

以下示例应该可以帮助您入门：

```
<?php

//
// Fetch a bunch of URLs in parallel. Returns an array of results indexed
// by URL.
//
function fetch_urls($urls, $curl_options = array()) {
  $curl_multi = curl_multi_init();
  $handles = array();

  $options = $curl_options + array(
    CURLOPT_HEADER         => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_NOBODY         => true,
    CURLOPT_FOLLOWLOCATION => true);

  foreach($urls as $url) {
    $handles[$url] = curl_init($url);
    curl_setopt_array($handles[$url], $options);
    curl_multi_add_handle($curl_multi, $handles[$url]);
  }

  $active = null;
  do {
    $status = curl_multi_exec($curl_multi, $active);
  } while ($status == CURLM_CALL_MULTI_PERFORM);

  while ($active && ($status == CURLM_OK)) {
    if (curl_multi_select($curl_multi) != -1) {
      do {
        $status = curl_multi_exec($curl_multi, $active);
      } while ($status == CURLM_CALL_MULTI_PERFORM);
    }
  }

  if ($status != CURLM_OK) {
    trigger_error("Curl multi read error $status\n", E_USER_WARNING);
  }

  $results = array();
  foreach($handles as $url => $handle) {
    $results[$url] = curl_getinfo($handle);
    curl_multi_remove_handle($curl_multi, $handle);
    curl_close($handle);    
  }
  curl_multi_close($curl_multi);

  return $results;
}

//
// The urls to test
//
$urls = array("http://google.com", "http://yahoo.com", "http://google.com/probably-bogus", "http://www.google.com.au");

//
// The number of URLs to test simultaneously
//
$request_limit = 2;

//
// Test URLs in batches
//
$redirected_urls = array();
for ($i = 0 ; $i < count($urls) ; $i += $request_limit) {
  $results = fetch_urls(array_slice($urls, $i, $request_limit));
  foreach($results as $url => $result) {
    if ($result['http_code'] == 200) {
      $status = "Worked!";
    } else {
      $status = "FAILED with {$result['http_code']}";
    }
    if ($result["redirect_count"] > 0) {
      array_push($redirected_urls, $url);
      echo "{$url}: ${status}\n";
    } else {
      echo "{$url}: redirected to {$result['url']} and {$status}\n";
    }
  }
}

//
// Handle redirected URLs
//
echo "Processing redirected URLs...\n";
for ($i = 0 ; $i < count($redirected_urls) ; $i += $request_limit) {
  $results = fetch_urls(array_slice($redirected_urls, $i, $request_limit), array(CURLOPT_FOLLOWLOCATION => false));
  foreach($results as $url => $result) {
    if ($result['http_code'] == 301) {
      echo "{$url} permanently redirected to {$result['url']}\n";
    } else if ($result['http_code'] == 302) {
      echo "{$url} termporarily redirected to {$result['url']}\n";
    } else {
      echo "{$url}: FAILED with {$result['http_code']}\n";
    }
  }
} 
```

上面的代码批量处理一个 URL 列表。它分两遍工作。在第一遍中，每个请求都配置为遵循重定向，并简单地报告每个 URL 最终导致请求成功还是失败。

第二遍处理在第一遍中检测到的所有重定向 URL，并报告重定向是永久重定向（意味着您可以使用新 URL 更新数据库）还是临时重定向（意味着您不应更新数据库）。

笔记：

在您的原始代码中，您有以下行，它不会按您期望的方式工作：

```
else if ($urlinfo['http_code'] == 301 || 302) 
```

该表达式将始终返回 TRUE。正确的表达是：

```
else if ($urlinfo['http_code'] == 301 || $urlinfo['http_code'] == 302) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:53:52.220

另外，放

```
set_time_limit(0); 
```

在脚本的顶部停止它在达到 30 秒时中止。

# c# - 如何将对象字段绑定到文本框？

> ID：13523521
> 
> 赞同：0
> 
> 时间：2012-11-23T05:24:35.130
> 
> 标签：c#, asp.net-mvc-3, knockout.js, knockout-mvc

模型：

```
public class DishesModel
{
    public Dish DishToAdd{get; set;}
    public List<Dish> AllDishes{get; set;}
    public List<Category> AllCategories{get; set;}
    public List<Dish> SelectedDishes{get; set;}

    public DishesModel()
    {
        DishToAdd = new Dish();
    }

    public void AddDish()
    {
        if(DishToAdd!=null && !AllDishes.Contains(DishToAdd))
        {
            AllDishes.Add(DishToAdd);
            DishToAdd = null;
        }
    }

    public void RemoveSelected()
    {
        AllDishes.RemoveAll(d=>SelectedDishes.Any(m=>m.Name==d.Name));
        SelectedDishes.Clear();
    }

    public void SortDishes()
    {
        AllDishes.Sort();
    }

}

public class Dish:BaseEntity<Int32>
{
    public virtual String Name{get; set;}
    public virtual Decimal Price{get; set;}
    public virtual String Description{get; set;}
    public virtual IList<Category> Categories{get; set;}
    public virtual IList<Complex> Complexs{ get; set;}
} 
```

剃刀：

```
 @{
    KnockoutContext<MyMenu.Models.DishesModel> ko = Html.CreateKnockoutContext();
}

@{
    ViewBag.Title = "title";
}

<h2>Work with dishes.</h2>
@using(ko.Html.Form("AddDish", "Dishes", null, new{id="formDishes"}))
{
    @ko.Html.ListBox(m => m.AllDishes, new {size = 15}, dish => dish.Name).SelectedOptions(m=>m.SelectedDishes)
    @ko.Html.Button("Remove", "Remove", "Dishes").Enable(m => m.SelectedDishes.Count > 0)
    @ko.Html.Button("Sort", "Sort", "Dishes").Enable(m => m.AllDishes.Count > 1)
         <span>Name</span>         @ko.Html.TextBox(m=>m.DishToAdd.Name).ValueUpdate(KnockoutValueUpdateKind.KeyPress)
         <span>Price</span>
         @ko.Html.TextBox(m =>m.DishToAdd.Price).ValueUpdate(KnockoutValueUpdateKind.KeyPress)
         <span>Description</span>
         @ko.Html.TextBox(m => m.DishToAdd.Description).ValueUpdate(KnockoutValueUpdateKind.KeyPress)
         <button type="submit" @ko.Bind.Enable(m => m.DishToAdd.Name.Length > 0)>Add</button>

}

<script type="text/javascript">
    $('#formDishes').ajaxForm();
</script>

@ko.Apply(Model) 
```

控制器：

```
public ActionResult AddDish(DishesModel model)
    {
        model.AddDish();
        return Json(model);
    } 
```

**未捕获的错误：无法解析绑定。消息：TypeError：对象不是函数；绑定值： value : DishToAdd().Name,valueUpdate : 'keypress' knockout-2.2.0.js:5**

如何绑定`DishToAdd.Name`到文本框？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:32:46.720

尝试使用字符串数据类型对对象进行类型转换

# c# - 在datagridview的单列中显示两个图像

> ID：13523522
> 
> 赞同：0
> 
> 时间：2012-11-23T05:24:40.717
> 
> 标签：c#, winforms, datagridview

我如何创建一个可以在 datagridview 的一列中显示 2 个图像的列？

我尝试创建 2 个 datagridviewimagecolumn （用于不同的图像）
，如果其中的单元格包含相同的图像路径。
图像将根据单元格上的路径进行匹配。
这必须合并在一列中（如下图所示）

例如。

在这里我将创建 2 个 datagridimagecolumn

```
DataGridViewImageColumn img1 - new DataGridViewImageColumn();
Image Simg1 = Image.FromFile (C:\Desktop\Green.jpg);
img1.Image = Simg1;
dgv.Columns.Add(img1); //it will display on the datagridview

DataGridViewImageColumn img2 - new DataGridViewImageColumn();
    Image Simg2 = Image.FromFile (C:\Desktop\Red.jpg);
    img2.Image = Simg1;
    dgv.Columns.Add(img2); 
```

如果从 sql server 生成的列看起来像这样

column1
---------
c:\Desktop\Green.jpg
c:\Desktop\Green.jpg
c:\Desktop\Red.jpg
c:\Desktop\Green.jpg

我将如何做这个。
绿色路径将显示绿色图像。
红色路径将包含红色图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:17:19.320

我不知道我是否很好地理解了您的问题，但我认为您可以解决创建一个将 2 个图像平铺的图像并将其打印在您的列中。

你可以[在这里](https://stackoverflow.com/questions/6383123/merge-two-images-to-create-a-single-image-in-c-net)或[这里](http://www.hanselman.com/blog/CompositingTwoImagesIntoOneFromTheASPNETServerSide.aspx)看到如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:24:18.513

您需要编写自己的合并单元类来实现 onpaint 事件。你可以在[这里](http://forums.codeguru.com/showthread.php?415930-DataGridView-Merging-Cells)看到一个例子。

# android - How to remove error : create method 'getApplicationContext()' and 'runOnUiThread(Runnable)' when extends Fragment

> ID：13523526
> 
> 赞同：2
> 
> 时间：2012-11-23T05:25:44.063
> 
> 标签：android, fragment, android-context

When I am using the `getApplicationContext()` that time eclipse give me error `create method 'getApplicationContext()'`. Please let me know How to remove this error. I am try also using **ClassName.this** that time error like `change method startListening(Context) to startListening(Main)`

Also when I use like : `measurement_index = AppSettings.getMeasureUnit(this);` then Error like :`change method getMeasureUnit(Context) to getMeasureUnit(Main)`

So please let me know how can solve error like:

1.  create method 'getApplicationContext()'

2.  change method getMeasureUnit(Context) to getMeasureUnit(Main)

Check my code.

**Main.class**

```
public class Main extends Fragment implements GPSCallback{

....... 

public static Fragment newInstance(int position) {
    Main f = new Main();
    Bundle args = new Bundle();

     ...

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.main, null);

    /*Intent in = new Intent(Main.this,MainDisplay.class);
              // ------------> Here give error like : Remove arguments match to Intent();
    startActivity(in);*/

    tv_display_Speed = (TextView) root.findViewById(R.id.speed_display);

     gpsManager = new GPSManager();

        gpsManager.startListening(getApplicationContext());
                   //------------>  Eclipse give me error create method 'getApplicationContext()'

        gpsManager.setGPSCallback(this);

        //(TextView)root.findViewById(R.id.speed_display);

        measurement_index = AppSettings.getMeasureUnit(this);
                   //------------> Here Give me error like : change method getMeasureUnit(Context) to  getMeasureUnit(Main) 

    btnstart = (Button) root.findViewById(R.id.button_start);
    btnstart.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });

    return root;
} 
```

**startListening** method:

```
public void startListening(final Context context)
{
     ....
} 
```

**getMeasureUnit** method:

```
public static int public static int getMeasureUnit(Context context){
    return getInt(context,AppSettings.UNIT_STRING);
} 
```

**EDIT :**

I have Added the `onStart()` method into above class that extends fragment. That time at `runOnUiThread(updateTask);` Eclipse give me error like : `create method runOnUiThread(Runnable)` .Please let me know how can I achieve this.

```
@Override
public void onStart() {
    super.onStart();
    timer = new Timer("DigitalClock");
    Calendar calendar = Calendar.getInstance();

    // Get the Current Time
    final Runnable updateTask = new Runnable() {
        public void run() {
            txt_display_clock.setText(getCurrentTimeString()); // shows the current
                                                        // time of the day

        }
    };

    // update the UI
    int msec = 999 - calendar.get(Calendar.MILLISECOND);
    timer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(updateTask); // <---------------- HERE
        }
    }, msec, 1000);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T05:27:31.633

In a Fragment, you can use `getActivity().getApplicationContext()` instead.

As for the AppSettings.getMeasureUnit error, if the getMeasureUnit method is expecting a context you can usually use `getActivity().getApplicationContext()`.

# string - 打印一个 Int（或 Int 到 String）

> ID：13523530
> 
> 赞同：6
> 
> 时间：2012-11-23T05:25:57.210
> 
> 标签：string, assembly, int, nasm

我正在寻找一种在汇编程序中打印整数的方法（我使用的编译器是 Linux 上的 NASM），但是，经过一些研究，我还没有找到真正可行的解决方案。我能够找到用于此目的的基本算法的描述，并在此基础上开发了以下代码：

```
global _start

section .bss
digit: resb 16
count: resb 16
i: resb 16

section .data

section .text

_start:
mov             dword[i], 108eh         ; i = 4238
mov             dword[count], 1
L01:
mov             eax, dword[i]
cdq
mov             ecx, 0Ah
div             ecx  
mov             dword[digit], edx

add             dword[digit], 30h       ; add 48 to digit to make it an ASCII char
call            write_digit

inc             dword[count]

mov             eax, dword[i]
cdq
mov             ecx, 0Ah
div             ecx  
mov             dword[i], eax 
cmp             dword[i], 0Ah  
jg              L01

add             dword[i], 48            ; add 48 to i to make it an ASCII char
mov             eax, 4                  ; system call #4 = sys_write
mov             ebx, 1                  ; file descriptor 1 = stdout
mov             ecx, i                  ; store *address* of i into ecx
mov             edx, 16                 ; byte size of 16
int             80h

jmp             exit

exit:
mov             eax, 01h                ; exit()
xor             ebx, ebx                ; errno
int             80h

write_digit:
mov             eax, 4                  ; system call #4 = sys_write
mov             ebx, 1                  ; file descriptor 1 = stdout
mov             ecx, digit              ; store *address* of digit into ecx
mov             edx, 16                 ; byte size of 16
int             80h
ret 
```

我想要实现的 C# 版本（为了清楚起见）：

```
static string int2string(int i)
{
    Stack<char> stack = new Stack<char>();
    string s = "";

    do
    {
        stack.Push((char)((i % 10) + 48));
        i = i / 10;
    } while (i > 10);

    stack.Push((char)(i + 48));

    foreach (char c in stack)
    {
        s += c;
    }

    return s;
} 
```

问题是它反向输出字符，所以对于`4238`，输出是`8324`。起初，我以为我可以使用 x86 堆栈来解决这个问题，将数字压入，然后将它们弹出并在最后打印出来，但是当我尝试实现该功能时，它失败了，我再也无法得到输出。

结果，我对如何在该算法中实现堆栈以实现我的目标（即打印整数）有点困惑。如果有可用的解决方案，我也会对更简单/更好的解决方案感兴趣（因为它是我的第一个汇编程序之一）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T05:49:24.690

一种方法是使用递归。在这种情况下，您将数字除以 10（得到商和余数），然后将商称为要显示的数字；然后显示余数对应的数字。

这方面的一个例子是：

```
;Input
; eax = number to display

    section .data
const10:    dd 10
    section .text

printNumber:
    push eax
    push edx
    xor edx,edx          ;edx:eax = number
    div dword [const10]  ;eax = quotient, edx = remainder
    test eax,eax         ;Is quotient zero?
    je .l1               ; yes, don't display it
    call printNumber     ;Display the quotient
.l1:
    lea eax,[edx+'0']
    call printCharacter  ;Display the remainder
    pop edx
    pop eax
    ret 
```

另一种方法是通过更改除数来避免递归。这方面的一个例子是：

```
;Input
; eax = number to display

    section .data
divisorTable:
    dd 1000000000
    dd 100000000
    dd 10000000
    dd 1000000
    dd 100000
    dd 10000
    dd 1000
    dd 100
    dd 10
    dd 1
    dd 0
    section .text

printNumber:
    push eax
    push ebx
    push edx
    mov ebx,divisorTable
.nextDigit:
    xor edx,edx          ;edx:eax = number
    div dword [ebx]      ;eax = quotient, edx = remainder
    add eax,'0'
    call printCharacter  ;Display the quotient
    mov eax,edx          ;eax = remainder
    add ebx,4            ;ebx = address of next divisor
    cmp dword [ebx],0    ;Have all divisors been done?
    jne .nextDigit
    pop edx
    pop ebx
    pop eax
    ret 
```

这个例子没有抑制前导零，但很容易添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:46:48.880

我认为也许实现堆栈并不是做到这一点的最佳方式（我真的认为你可以弄清楚如何做到这一点，说如何`pop`只是一个`mov`和一个递减`sp`, 所以你可以真正地在任何你喜欢的地方设置一个堆栈，只需为它分配内存并将你的一个寄存器设置为你的新“堆栈指针”）。我认为如果您实际上为 c 风格的空分隔字符串分配内存，然后使用您使用的相同算法创建一个将 int 转换为字符串的函数，然后将结果传递给另一个函数，我认为这段代码可以变得更清晰和更模块化能够打印这些字符串。它将避免您遭受的一些意大利面条代码综合症，并解决您的问题。如果你想让我演示，请问，但如果你写了上面的东西，我想你可以弄清楚如何通过更分裂的过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-31T07:17:54.337

```
; Input
; EAX = pointer to the int to convert
; EDI = address of the result
; Output:
; None
int_to_string:
    xor   ebx, ebx        ; clear the ebx, I will use as counter for stack pushes
.push_chars:
    xor edx, edx          ; clear edx
    mov ecx, 10           ; ecx is divisor, devide by 10
    div ecx               ; devide edx by ecx, result in eax remainder in edx
    add edx, 0x30         ; add 0x30 to edx convert int => ascii
    push edx              ; push result to stack
    inc ebx               ; increment my stack push counter
    test eax, eax         ; is eax 0?
    jnz .push_chars       ; if eax not 0 repeat

.pop_chars:
    pop eax               ; pop result from stack into eax
    stosb                 ; store contents of eax in at the address of num which is in EDI
    dec ebx               ; decrement my stack push counter
    cmp ebx, 0            ; check if stack push counter is 0
    jg .pop_chars         ; not 0 repeat
    mov eax, 0x0a
    stosb                 ; add line feed
    ret                   ; return to main 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T07:57:11.003

```
; eax = number to stringify/output
; edi = location of buffer

intToString:
    push  edx
    push  ecx
    push  edi
    push  ebp
    mov   ebp, esp
    mov   ecx, 10

 .pushDigits:
    xor   edx, edx        ; zero-extend eax
    div   ecx             ; divide by 10; now edx = next digit
    add   edx, 30h        ; decimal value + 30h => ascii digit
    push  edx             ; push the whole dword, cause that's how x86 rolls
    test  eax, eax        ; leading zeros suck
    jnz   .pushDigits

 .popDigits:
    pop   eax
    stosb                 ; don't write the whole dword, just the low byte
    cmp   esp, ebp        ; if esp==ebp, we've popped all the digits
    jne   .popDigits

    xor   eax, eax        ; add trailing nul
    stosb

    mov   eax, edi
    pop   ebp
    pop   edi
    pop   ecx
    pop   edx
    sub   eax, edi        ; return number of bytes written
    ret 
```

# c - 使用 MinGW-w64 出现错误

> ID：13523532
> 
> 赞同：6
> 
> 时间：2012-11-23T05:26:03.003
> 
> 标签：c, windows, mingw-w64

采取这个简单的程序

```
#include <stdio.h>
#include <string.h>
#include <errno.h>

int
main (void)
{
  printf ("ERROR %d %s\n", ETIMEDOUT, strerror (ETIMEDOUT));
  return 0;
} 
```

如果你用 Cygwin gcc 编译它运行良好

```
$ gcc a.c

$ ./a
ERROR 116 Connection timed out 
```

如果你用 MinGW-w64 gcc 编译它，它不会给出正确的错误信息

```
$ i686-w64-mingw32-gcc a.c

$ ./a
ERROR 138 Unknown error 
```

如何让 MinGW-w64 输入正确的错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:30:38.103

`ETIMEDOUT`似乎是对 ISO C 标准 errno.h 的[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/errno.h.html)扩展。Cygwin 对 POSIX 的支持比 MinGW 更好。`ETIMEDOUT`一个关于mingw32的错误报告于[2007](http://sourceforge.net/tracker/?func=detail&atid=102435&aid=1750842&group_id=2435)年打开和关闭。

一种选择是使用 GNU Portability Library ( [Gnulib](http://www.gnu.org/software/gnulib/) )。它提供了一个类似 POSIX 的[errno.h](http://www.gnu.org/software/gnulib/manual/html_node/errno_002eh.html)和[strerror()/strerror_override()](http://www.gnu.org/software/gnulib/MODULES.html#ansic_sup)。

# iphone - AVAssetWriterInputPixelBufferAdaptor appendPixelBuffer

> ID：13523535
> 
> 赞同：3
> 
> 时间：2012-11-23T05:26:29.150
> 
> 标签：iphone, ios

我使用下面的代码将图像写入视频

```
-(void) writeImagesToMovieAtPath:(NSString *) path withSize:(CGSize) size
{
    NSLog(@"Write Started");

    NSError *error = nil;

    AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:
                                  [NSURL fileURLWithPath:path] fileType:AVFileTypeMPEG4
                                                              error:&error];
    NSParameterAssert(videoWriter);

    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                                   [NSNumber numberWithInt:size.height], AVVideoHeightKey,
                                   nil];

    AVAssetWriterInput* videoWriterInput = [[AVAssetWriterInput
                                             assetWriterInputWithMediaType:AVMediaTypeVideo
                                             outputSettings:videoSettings] retain];

    AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor
                                                     assetWriterInputPixelBufferAdaptorWithAssetWriterInput:videoWriterInput
                                                     sourcePixelBufferAttributes:nil];

    NSParameterAssert(videoWriterInput);
    NSParameterAssert([videoWriter canAddInput:videoWriterInput]);
    videoWriterInput.expectsMediaDataInRealTime = YES;
    [videoWriter addInput:videoWriterInput];

    //Start a session:
    [videoWriter startWriting];
    [videoWriter startSessionAtSourceTime:kCMTimeZero];

    CVPixelBufferRef buffer = NULL;

    //convert uiimage to CGImage.

    int frameCount = 16;
    int kRecordingFPS = 30;
    UIImage * im = [UIImage imageNamed:@"IMG_0103.JPG"];

    NSArray * imageArray = [[NSArray alloc]initWithObjects:im,im,im,im,im,im,im,im,im,im,im,im,im,im,im,im, nil];

    for(UIImage * img in imageArray)
    {
        buffer = [self pixelBufferFromCGImage:[img CGImage] andSize:size];

        BOOL append_ok = NO;
        int j = 0;
        while (!append_ok && j < 30)
        {
            if (adaptor.assetWriterInput.readyForMoreMediaData)
            {
                printf("appending %d attemp %d\n", frameCount, j);

                CMTime frameTime = CMTimeMake(frameCount,(int32_t) kRecordingFPS);
                append_ok = [adaptor appendPixelBuffer:buffer withPresentationTime:frameTime];

                if(buffer)
                    CVBufferRelease(buffer);
                [NSThread sleepForTimeInterval:0.05];
            }
            else
            {
                printf("adaptor not ready %d, %d\n", frameCount, j);
                [NSThread sleepForTimeInterval:0.1];
            }
            j++;
        }
        if (!append_ok) {
            printf("error appending image %d times %d\n", frameCount, j);
        }
        frameCount++;
    }

    //Finish the session:
    [videoWriterInput markAsFinished];
    [videoWriter finishWriting];
    NSLog(@"Write Ended");
    [videoWriterInput release];
    [videoWriter release];
    [imageArray release];
} 
```

它第一次工作，但如果我运行代码 2,3 次或更多，它报告：

```
！appending 0 0-0 attemp 0
！appending 0 0-0 attemp 1
My App(11385,0xb0103000) malloc: *** error for object 0x9ab4270: double free
*** set a breakpoint in malloc_error_break to debug
！appending 0 0-0 attemp 2
My App(11385,0xb0103000) malloc: *** error for object 0x9ab4270: double free
*** set a breakpoint in malloc_error_break to debug
！appending 0 0-0 attemp 3 
```

有时它会导致崩溃

我试图找到原因但没有结果，

欢迎您的评论

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T05:44:51.847

而不是使用 [NSThread sleepForTimeInterval:0.1]; 使用 **while(!adaptor.assetWriterInput.readyForMoreMediaData) {}**

因为很多时候**readyForMoreMediaData**在 0.1 的时间间隔内从不设置为 YES。

也尝试释放**appendPixelBuffer:withPresentationTime:**方法占用的内存实际上这个方法阻止你成功运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-30T22:51:59.287

您需要使用 CFRelease() 释放缓冲区，如[创建规则中所述](https://developer.apple.com/library/ios/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-CJBEJBHH)

```
if ([assetWriterInput isReadyForMoreMediaData]) {
    CVPixelBufferRef pixelBuffer = [self newPixelBufferFromCGImage:image.CGImage];
    CMTime frameTime = CMTimeMake(frameCount,(int32_t) kRecordingFPS);
    if (![adaptor appendPixelBuffer:pixelBuffer withPresentationTime:frameTime]) {
        NSError *error = [videoWriter error];
        NSLog(@"failed to append sbuf: %@", error);
    }
    CFRelease(pixelBuffer);
} 
```

# android - 音频源在 Android 浏览器中无法正常工作两次

> ID：13523540
> 
> 赞同：1
> 
> 时间：2012-11-23T05:27:06.733
> 
> 标签：android, html, html5-audio

在我的项目中，我有两个音频，我在 HTML 中添加如下：

```
<audio  id="sample1">
    <source src="sample1.mp3" type='audio/mpeg; codecs="mp3"' preload="auto" />
    <source src="sample1.ogg"; codecs="vorbis"' preload="auto" />
</audio>
<audio  id="sample2">
    <source src="sample2.mp3" type='audio/mpeg; codecs="mp3"' preload="auto" />
    <source src="sample2.ogg" type='audio/ogg; codecs="vorbis"' preload="auto" />
</audio> 
```

我有两个按钮可以在这两者之间切换：

```
$(document).ready(function(){
var audio =null;
 $('#button1').click(function(){
     if(audio!=null){
           audio.pause();
     }
    audio =null; 
    audio=$('#sample1');
    audio.play();
});

$('#button2').click(function(){
     if(audio!=null){
           audio.pause();
     }
    audio =null; 
    audio=$('#sample2');
    audio.play();
});
} 
```

问题是，无论顺序如何，这些音频都是第一次工作，但是一旦播放音频并被要求重复，就听不到音频了。（例如：单击 2。音频有效。然后单击 1，音频有效，但下一次单击任何一个都听不到声音）。

这个问题似乎只存在于安卓浏览器中。它在 android 的 Chrome 浏览器以及 PC 的所有浏览器上都能完美运行。

# google-apps-script - 即时添加按钮

> ID：13523541
> 
> 赞同：1
> 
> 时间：2012-11-23T05:27:15.107
> 
> 标签：google-apps-script, google-sheets

我阅读了有关创建按钮的教程，它非常简单明了。

但是，我想动态创建按钮。我有一个状态栏。它有一个从隐藏工作表上的一系列单元格创建的下拉菜单。这是工作代码。

这是愿望清单。When “status X” is selected, I want the button to appear. 然后用户可以按下按钮来增加计数器（显示）。按下按钮时需要跟踪日期和时间（也显示 - 包括历史记录）。始终显示上一次按下按钮的日期和时间。

一旦计数器达到某个数字（比如 10），就会弹出一条警告消息，用户必须确认，然后状态会自动更改，按钮消失，整行（颜色更改）移动到另一个页面（或者可能是另一个电子表格完全）。

目前我有一个功能，可以在状态更改时简单地更改行颜色，并将行移动到另一个页面。我想按钮会以某种方式围绕该点创建。除了本教程所说的我认为并不适用的内容外，我真的不知道如何继续前进。有什么帮助吗？

请注意我发现在我的情况下使用“活动页面”是一个坏主意，因为我有几个页面可以执行此操作。因此，我对所有内容都使用“sourceSheet”和“targetSheet”。

谢谢

//happyFunTime 作为编辑触发器安装。

```
function happyFunTime() {
  var s = SpreadsheetApp.getActiveSheet();
  var r = s.getActiveCell();

    // set row color as soon as we know the status
    var i = r.getRow();

    var targetSheetName=setRowColor(i);

   // moveRow(targetSheetName);

  }

function setRowColor(i)
{

  var sName;
  var outCome = [];
  var color;
  var range = SpreadsheetApp.getActiveSheet().getDataRange();
  var statusColumnOffset = getStatusColumnOffset();
  var rowRange = range.offset(i-1, 0, 1);
  var status = rowRange.offset(0, statusColumnOffset).getValue();

outCome=checkStatus(status);

sName=outCome[0];
color=outCome[1];
rowRange.setBackgroundColor(color);    

return sName;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:19:51.230

您是否尝试过编写任何代码来以编程方式实现这一目标？如果你这样做了，把它贴在这里，因为它更容易更好地理解你的工作代码，并在它的基础上进行构建。还是您只是希望有人为您编写代码？您所描述的一切当然可以通过编程方式实现，我建议研究 onEdit 触发器，作为达到目的的一种手段。

# visual-studio-2010 - 如何在 Visual Studio 的项目文件夹中仅保留源文件

> ID：13523545
> 
> 赞同：2
> 
> 时间：2012-11-23T05:28:02.040
> 
> 标签：visual-studio-2010, visual-studio-2012

当我在 Visual Studio 中创建一个新项目时，经过一段时间的工作，项目的文件夹总是充满“垃圾”，例如`ipch`（预编译头）文件夹、`debug`文件夹、我从未制作的 sql 数据库文件......

简而言之，是否可以将源文件保存在项目的文件夹中，或者

*   关闭VS后自动删除所有其他垃圾文件，或
*   为那些垃圾选择一个不同的临时文件夹进入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T13:31:41.633

您可以使用构建后事件并使用标准 dos 命令删除文件，或者您可以运行 powershell 脚本，例如在构建后事件中。至于当你关闭视觉工作室时，我认为你不能这样做，你需要某种事件和第三方脚本或应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T00:16:50.107

您可以删除 ipch、Release、Debug、x64 目录以及 *.suo 和 *.sdf 文件。这将导致编译器在下次运行时重新创建这些文件，并且可能需要一些额外的时间来这样做。

另外，*.suo 文件会跟踪您打开的文件、其中的光标位置等。如果您删除它们，您将在 VS 中恢复到一个干净的状态，但您不会丢失任何源代码。

# mysql - 触发器和多列主键

> ID：13523548
> 
> 赞同：0
> 
> 时间：2012-11-23T05:28:27.483
> 
> 标签：mysql, triggers, primary-key

我有一张书桌和一张音乐桌。这两个表都有一个 Product_ID 作为它们的主键。我还有一个产品表，其中有一个 Product_ID 列和一个类型列（0 代表书籍，1 代表音乐），其中 Product_Id 和类型列是表的主键。在 phpMyAdmin 中，这 2 列带有下划线，并且表的 SHOW COLUMNS 显示 Type 和 Product_Id 标记为主键。

我遇到的问题是我的触发器。有 2 个触发器，在处理不同的表时有一些不同之处。例如，音乐触发器执行以下语句：

```
 INSERT INTO products 
 SET 
      Type=1, 
      Product_Id=NEW.Product_ID,
      Title=NEW.Album, 
      Price=0 
```

书籍触发器是相同的，除了 type=0 和 NEW.Album 被 NEW.Title 替换。但是，当我现在运行 INSERT 查询时，在插入和删除了一些数据之后，我得到了一个重复的主键错误。问题是 MySQL 数据库仅读取 Product_ID 列作为主键，因此当它尝试在那里插入重复项时，即使 Type 列中的值不同，它也会吐出此错误。我被难住了。

产品表

```
Product_Id  int(11) - PK
Title   int(11)
Price   double
Type    int(11) - PK
NewBool tinyint(1) 
```

音乐桌

```
Product_ID  int(11) - PK
Artist  varchar(32)
Album   varchar(32)
Genre   varchar(32)
Year    int(11)
Length  double
Rating  double
NumRatings  int(11)
Studio  varchar(64) 
```

书桌

```
Product_ID  int(11)  - PK
ISBN    bigint(20)
Title   text
Author  text
Year    int(11)
Genre   text
Pages   int(11)
Publisher   text
Edition int(11)
Rating  double
NumRatings  int(11) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:45:21.053

您似乎忘记了删除 Products 中的行的触发器。如果您曾经更新图书或音乐中的数据，您还需要一个触发器来对产品进行相应的更改。

现在这是您的问题 [http://sqlfiddle.com/#!2/be9c93/1](http://sqlfiddle.com/#!2/be9c93/1)

这是我修复它的方法 [http://sqlfiddle.com/#!2/2ff27/2](http://sqlfiddle.com/#!2/2ff27/2)

# c# - 尽管使用了 IMEX=1，但 OleDb 没有从 excel 文件中读取所有行

> ID：13523549
> 
> 赞同：5
> 
> 时间：2012-11-23T05:28:42.063
> 
> 标签：c#, .net, excel, oledb

我在我的 C# 中使用**Microsoft.ACE.OLEDB.12.0**驱动程序来读取和写入 excel 文件 (XLS)。我的读者的扩展属性看起来像：**Excel 8.0;HDR=NO;IMEX=1;** 对于作家来说，看起来像：**Excel 8.0;HDR=NO;IMEX=0;**

这是场景：我从一个 excel 文件中读取**input.xls**，然后创建一个新的**output.xls**文件并使用我的 writer 写入它。现在我在 MS Excel 中打开文件**output.xls**，并在其中添加更多行。

接下来，我将**output.xls**作为输入提供给我的程序，当我调试时，我看到它只读取最初使用 OleDb 编写的行。它不会读取我添加的任何新行，并且作者会吐出已读取的行。

这是 OleDb 的工作原理吗？即将数据库视为被它锁定，并且不重视外部插入。或者我如何创建和保存文件有问题吗？

```
private void Initialize(string fileName, FileType fileType)
    {
        string connectionString = GetConnectionString(fileName, fileType);

        string sheet;
        using (OleDbConnection connection = OpenConnection(connectionString))
        {
            DataTable sheets = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

        }

        tableName = "[ListingDetails]";

        conn = new OleDbConnection();
        conn.ConnectionString = connectionString;
        conn.Open();
        cmd1 = new OleDbCommand();
        cmd1.Connection = conn;
        cmd1.CommandText = string.Format(CultureInfo.InvariantCulture, @"CREATE TABLE {0} {1}", tableName, fieldstring);
        int x = cmd1.ExecuteNonQuery();

    }

public void InsertRow(string[] data)
    {
        StringBuilder fieldString = new StringBuilder();
        fieldString.Append("(");
        foreach (var h in headers)
        {
             fieldString.Append(" ["+h+"], ");
        }
        fieldString.Remove(fieldString.Length - 2, 2);
        fieldString.Append(")");
        StringBuilder dataString = new StringBuilder();
        dataString.Append("('");
        foreach (var d in data)
        {
            if(d!=null)
                dataString.Append(d.Replace("'", "''") + "', '");
            else
                dataString.Append("', '");
        }
        dataString.Remove(dataString.Length - 4, 4);
        dataString.Append("')");
        cmd1.CommandText = string.Format(CultureInfo.InvariantCulture, @"INSERT INTO {0} {1} values {2}", tableName, fieldString, dataString);
        int x = cmd1.ExecuteNonQuery();

    } 
```

为了关闭文件，我只是做一个`conn.Close();`

我以某种方式怀疑我在 Initialize() 方法中创建/使用工作表的方式。

PS 我看到了一个类似的问题，但问题似乎是数据和 IMEX 标志没有设置为 1。让我事先告诉你，这不是一个重复的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:00:05.157

我使用了下面的代码，这实际上是对您的代码的简化，但有一些小的改动。它每次都有效，我什至可以打开 Excel 并在执行代码时观察插入的行。然后我可以对文件进行编辑，然后在文件仍处于打开状态且*从未保存更改的情况下将*它们加载到数据网格中。

```
private void Initialize(string fileName, string tableName)
{
    string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName + ";Mode=ReadWrite;Extended Properties=\"Excel 8.0;HDR=NO\"";
    string fieldstring = "(ID int, Field1 char(255), Field2 char(255))";

    using (OleDbConnection conn = new OleDbConnection(connectionString))
    {
        conn.Open();

        using (OleDbCommand cmd = new OleDbCommand())
        {
            cmd.Connection = conn;
            cmd.CommandText = string.Format(CultureInfo.InvariantCulture, @"CREATE TABLE [{0}] {1}", tableName, fieldstring);
            cmd.ExecuteNonQuery();
        }

        conn.Close();
    }
}

public void InsertRow(string fileName, string tableName, string data)
{
    string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName + ";Mode=ReadWrite;Extended Properties=\"Excel 8.0;HDR=YES\"";
    string headers = "ID,Field1,Field2";

    using (OleDbConnection conn = new OleDbConnection(connectionString))
    {
        conn.Open();

        using (OleDbCommand cmd = new OleDbCommand())
        {
            cmd.Connection = conn;
            cmd.CommandText = string.Format(CultureInfo.InvariantCulture, @"INSERT INTO [{0}$] ({1}) values({2})", tableName, headers, data);
            txtQuery.Text = cmd.CommandText;
            cmd.ExecuteNonQuery();
        }

        conn.Close();
    }
} 
```

创建文件

```
Initialize("C:\\path\\to\\file\\Test File.xls", "ListingDetails"); 
```

插入测试行

```
for (int i = 0; i < 10; i++)
{
    InsertRow("C:\\path\\to\\file\\Test File.xls", "ListingDetails",
        "'" + i.ToString() + "','test" + (i + 2).ToString() + "','test" + (i + 5).ToString() + "'");
} 
```

我清理了围绕 OleDb 对象的创建和处置的代码。这可能会给您带来问题，我不确定，但这样至少您知道一切都已正确完成。

希望这可以帮助。

# java - 如何在 Spring MVC 中获取禁用复选框的值

> ID：13523550
> 
> 赞同：7
> 
> 时间：2012-11-23T05:28:50.027
> 
> 标签：java, jsp, spring-mvc

我正在开发 Spring MVC 应用程序，并且在禁用复选框时遇到问题。

**在 report.jsp 页面中：**

```
<form:checkbox type="checkbox" path="corporateColumn" id="corporateColumn" value="true" checked="checked" disabled="true" /> 
```

**在 ReportForm.java 中：**

```
boolean corporateColumn ;

public boolean isCorporateColumn() {
        return corporateColumn;
}

public void setCorporateColumn(boolean corporateColumn) {
        this.corporateColumn = corporateColumn;
} 
```

**在 ReportController.java 中；**

```
boolean corporateColumn = reportDTO.isCorporateColumn(); // this evaluates to false
//Which expected as true when corporateColumn checkbox is checked 
```

除非它被用作复选框字段的 disabled="true" (/disabled="${'true'}")，否则一切正常。

我之前在获取禁用文本字段的值并通过将字段设为只读来克服它时也遇到了类似的问题。所以我不确定在 Spring MVC 中是否无法在禁用时获取输入字段的值。

任何指导将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T05:32:43.557

很抱歉这么说，但那是不可能的。

使用开发者工具（比如在 Chrome 中）检查发布的数据，如果它被禁用或未选中，您可以确认浏览器不会发送您的复选框的数据。

为什么不简单地使用“只读”而不是“禁用”？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T06:02:33.493

禁用的字段数据不会传递到服务器。

# c# - C# 中的 JSON 入门

> ID：13523551
> 
> 赞同：0
> 
> 时间：2012-11-23T05:29:01.610
> 
> 标签：c#, .net, xml, json

我正在构建一个简单的 Twitter 应用程序。我最初想使用 XML，但在我做了一些搜索后发现 JSON 更好更快，所以我决定使用它。

然而，在搜索了几个小时后，我找不到一个使用 .net 库作为 JSON 的单一 hello world 教程。所有教程都指出将第三方库用于 JSON。由于我不能使用.net 之外的任何东西，有人会给我一些关于如何开始的花絮。

具体`System.Runtime.Serialization.Json`在.net4.0上使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:36:01.660

对于使用通用对象的任意 Json 的一种反序列化方法，请参阅我的答案：

[C# 反序列化动态 JSON](https://stackoverflow.com/questions/13504805/c-sharp-deserialize-dynamic-json/13504951#13504951)

对于序列化，我对 ToJson 的 ServiceStack.Text 实现很满意。

[https://github.com/ServiceStack/ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)

如果您在他们的网站上使用一些工具，您也可以找到预编译的二进制文件以进行下载。不要害怕 ServiceSTack 所做的所有其他事情（除非它可以帮助您——您只需要 ServiceStack.Text 命名空间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:43:54.903

我在 JSON 方面没有更多经验，但目前我正在处理 JSON 序列化和反序列化，而不使用任何第三方 JSON 库。请按照以下步骤操作：

1.  创建用于序列化任何对象的通用实用程序：使用 System; 使用 System.Collections.Generic；使用 System.Linq；使用 System.Web；使用 System.Web.Script.Serialization；

    ```
    namespace Test.Utility
    {
        public class CommonUtility
        {
            public static JavaScriptSerializer javaScriptSerializer = new    JavaScriptSerializer();

            public static string SerializeJson(object o)
            {
                return javaScriptSerializer.Serialize(o);
            }
        }
    } 
    ```

2.  然后在要序列化的地方添加 Test.Utility 引用：

    ```
    using Test.Utility; 
    ```

3.  然后为 JSON 序列化编写代码：

    ```
    var Info = new
    {
        TeamCode = TeamCodeTxt.Text,
        TeamName = TeamNameTxt.Text
    }; 
    ```

    字符串 jsonSerializedStr=CommonUtility.SerializeJson(Info);

4.  编写反序列化代码：

    ```
    class TestInfo
    {
        public TeamCode{set;get;}
        public TeamName{set;get;}
    }
    Info objInfo=new Info();
    objInfo=serializer.Deserialize<TestInfo>(Info); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:50:59.913

使用 System.Runtime.Serialization.Json

```
[DataContract]
[Serializable]
public class SuperObj
{
  [DataMember]
  public string Foo { get; set; }

  [DataMember]
  public string Bar { get; set; }

  [DataMember]
  public int Baz { get; set; }

  [DataMember]
  public DateTime Qux { get; set; }
} 
```

可以使用序列化为字符串

```
var serializer = new DataContractJsonSerializer(typeof(SuperObj));

using (var stream = new MemoryStream())
{
  serializer.WriteObject(stream, obj);
  var jsonString = Encoding.UTF8.GetString(stream.ToArray());
  Console.WriteLine(jsonString);
} 
```

该字符串可以反序列化回一个对象

```
var serializer = new DataContractJsonSerializer(typeof(SuperObj));

using (var stream = new MemoryStream(Encoding.UTF8.GetBytes(jsonString)))
{
  var obj2 = (SuperObj)serializer.ReadObject(stream);
  Console.WriteLine("SuperObj");
  Console.WriteLine(obj2.Foo);
  Console.WriteLine(obj2.Bar);
  Console.WriteLine(obj2.Baz);
  Console.WriteLine(obj2.Qux);
} 
```

就像其他人说的那样，第三方库往往更好（我使用过 ServiceStack.Text 和 Json.Net）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T06:01:38.503

转到此链接[MSDN JSON](http://msdn.microsoft.com/en-us/library/bb412170.aspx)

但与 Internet 上可用的其他库相比，此库不包含更多功能。另外，它们是开源的。因此，如果您改变主意，请
首先确定要使用的库，例如：

1\. JSON.NET
2\. JSON-Sharp
3\. Newtonsoft.JSON
和许多其他库（[JSON 库列表](http://www.json.org/)）
然后找到根据图书馆的教程。

我更喜欢 Newtonsoft，因为它有一些附加功能。
还要考虑查看每个库的规范，因为它们为某些数据类型（例如 dateTime）提供略有不同的实现（如果您不使用跨平台通信，例如 java 中的生产者和 C# 中的消费者，反之亦然）。

# android - 从命令行添加位图资源后出错？

> ID：13523553
> 
> 赞同：0
> 
> 时间：2012-11-23T05:29:03.153
> 
> 标签：android, command-line, android-resources

我正在通过 emacs/命令行为 Android 开发，我有一个简单的问题。我想添加一个位图资源并将其创建为`ImageView`. 创建目录`res/drawable-ldpi`并添加 .png 会导致错误：

`FATAL EXCEPTION: main`

`java.lang.RuntimeException: Unable to start activity`

`ComponentInfo{org.example.Application1.MainActivity}:`

`android.content.res.ResourcesNotFoundException: File res/drawable-ldpi/pic.png from xml`

`type layout resource ID #0x...`{ETC}

编译过程中没有错误。运行`ant debug`产生以下结果：

-剪辑-

`[echo]----------`

`[echo] Handling Resources...`

`[aapt] Found Deleted Target File`

`[aapt] Generating resource IDs...`

`[echo]----------`

-剪辑-

`-crunch:`

`[crunch] Crunching PNG Files in source dir: C:\DEV\Application1\res`

`[crunch] To destination dir: C:\DEV\Application1\bin\res`

`[crunch] Processing image to cache: C:\DEV\Application1\res\drawable-ldpi\pic.png => C:\DEV\Application1\bin\res\drawable-ldpi\pic.png`

`[crunch] (processed image to cache entry C:\DEV\Application1\bin\res\drawable-ldpi\pic.png (87% size of source)`

`[crunch] Crunched 1 PNG file to update cache`

-剪辑-

我发现的大多数 Android 帮助都涉及 Eclipse，我没有使用也不想使用它。还有什么我应该做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:33:50.633

原来`drawable`是要使用的目录，而不是`drawable-ldpi`.

如果有人可以解释原因，我可以将其标记为答案。

# php - 在php中将我的表单字符串与数据库中的条件匹配？

> ID：13523555
> 
> 赞同：0
> 
> 时间：2012-11-23T05:29:20.043
> 
> 标签：php, forms

这来自我的表单字段：

```
$subject="physics with maths"; 
```

这是在我的数据库中：

```
$keywordsindatabse="(physics && electronics) || (electronics & communication) || (electronics and communication)"; 
```

在提交表单时，我想将条件`$keywordsindatabse`与`$subject`. 有任何想法吗？

任何帮助将不胜感激。

代码：

```
<form id="myform" name="myform">
<select name="sselect"  id="itmn">

                        <option value="">Select</option>

            <option value='1'>1</option>
                        <option value='2'>2</option>
                        <option value='3'>3</option>
                        <option value='4'>4</option>
                        <option value='5'>5</option>
                        <option value='6'>6</option>
                        <option value='7'>7</option>            
          </select>
<input  type='text' name='gmajorsub' id=""" value="" onblur="chkdegree(document.getElementById('itmn').value,this.value);">
</form>

<script>
 function chkdegree(item_id,keyword)
 {

 $.ajax({
            type: "GET",
            url: "degree_match.php",
            dataType: 'html',
        data: {item_id : item_id,keyword : keyword},
            success: function(data){
                if(data=="0")
        {
         alert("Dear Applicant, You are not allowed to register.You Subject not matching our essential qualification requirements.");
                  document.getElementById("gmajorsub").value="";
                  document.getElementById("gmajorsub").focus();
                  return false;
        }
            }
    });
 }

</script> 
```

度匹配.php：

```
<?php
include("../../lib/dbc/dbConnection.php");
require('../../lib/dbc/commonFunc.php');
require('../../lib/dbc/dbHandler.class.php');
$dbObject = new dbHandler();
$dbObject->connect();
$query="select * from advt_110_post_details where recNo='".$_REQUEST['item_id']."'";
$result=mysql_query($query);
$num=mysql_fetch_array($result);
$keyword=strtolower($_REQUEST['keyword']);

$degree=$num['subject_keywords'];

$degree1=explode("|",$degree);

$max = array(null, 0); // category, occurences
/*foreach($degree1 as $k => $v) {
  $replaced = str_replace($v, '##########', $keyword);
  preg_match_all('/##########/i', $replaced, $matches);
  if(count($matches[0]) > $max[1]) {
    $max[0] = $k;
    $max[1] = count($matches[0]);
  }
}

if($max[1]>=count($degree1))
{
  echo"1";  
}
else{
    echo"0";
}
*/
/*foreach($degree1 as $k => $v) {

if ( strstr( $membership, "member" ) )
{

}

}
*/

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:33:19.773

注意：您的代码受 SQL 注入的影响。查看使用 PDO 准备语句或 mySQLi 准备语句。至少，将字符串输入包装到 mysql_real_escape_string 中的 hte 数据库中。

* * *

查看您的代码，您正在从数据库中获取项目，然后进行过滤。我假设 mySQL。

在数据库端这样做可能会更好。查看“[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)”。这仅适用于 MyISAM 表，因此如果需要，请更改它。然后在“subject_keywords”上的表中添加全文索引，您需要使用全文设置布尔搜索。布尔搜索的详细信息在[这里](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)。

（否则，Rishi 上面的回答介绍了您需要的循环 - 您的尝试中缺少这些循环。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T06:17:57.163

据我从您的帖子中了解到，以下代码可能会有所帮助..

```
$subject="physics with maths";
$keywordsindatabse="(physics && electronics) ||
(electronics & communication) ||
(electronics and communication)";
$pieces = explode(" ", $subject);
$piecesDB = explode("||", $keywordsindatabse);
$subsDBv=array();
foreach($piecesDB as $key=>$subsDB){
    $subsDBv[$key] = str_replace(array("(",")"),"",explode(" ", $subsDB));
    }
foreach($subsDBv as $subslvd){
foreach($subslvd as $subslv){
    $ao = next($subslvd);
foreach($pieces as $subs){
if((strpos($subslv,$subs) !== false) AND (strpos($ao,$subs) !== false)){
    echo "Match found..<br />"; 
    }
    else{       
        echo "Sorry, no match found..<br />";
        }
}
}
} 
```

# svg - 形状奇特的 SVG 投影

> ID：13523557
> 
> 赞同：2
> 
> 时间：2012-11-23T05:29:30.963
> 
> 标签：svg, svg-filters

这是来源：

```
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg">
 <g>
  <defs>
    <filter id="f1" x="0" y="0" width="200%" height="200%">
      <feOffset result="offOut" in="SourceGraphic" dx="0" dy="0" />
      <feColorMatrix result="matrixOut" in="offOut" type="matrix"
      values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0" />
      <feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="10" />
      <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
    </filter>
  </defs>
  <path fill="#E0E0E0" stroke="#FFFFFF" stroke-width="5" d="M 50 50 l 100 0 l -50 86.6 z" filter="url(#f1)"/>
 </g>
</svg> 
```

下面是 Firefox 呈现的样子：![](../Images/817884092bcad53ecf90cc2d190ba463.png)Chrome 类似。

为什么阴影不对称？我希望让它看起来好像照明来自图像的正上方，所以阴影应该是对称的。它最终应该看起来像下面的光栅图像：![](../Images/49d8d2396573c893459b1e03770745d1.png)

（很抱歉内饰的颜色不匹配，但我稍后会修复。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:27:18.723

这更像你想要的吗？

```
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg">
 <g>
  <defs>
    <filter id="f1" x="-1" y="-1" width="300%" height="300%">
      <feOffset result="offOut" in="SourceGraphic" dx="0" dy="10" />
      <feColorMatrix result="matrixOut" in="offOut" type="matrix"
      values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0" />
      <feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="10" />
      <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
    </filter>
  </defs>
  <path fill="#E0E0E0" stroke="#FFFFFF" stroke-width="5" d="M 50 50 l 100 0 l -50 86.6 z" filter="url(#f1)"/>
 </g>
</svg> 
```

编辑：说明：

我使滤镜效果区域更大（使用`width`/ `height`on `<filter>`），使其大于形状的边界框（其宽度的 300%）。当然，它必须重新定位（使用`x`/ `y`），以便形状位于效果区域的中心。`y`我还使用on 属性将阴影向下移动了一点`feOffset`。

旁注：正如 Erik Dahlström 在评论中提到的那样，在这种情况下使用`3`而不是`300%`for`width`和`height`是等效的，因为`filterUnits`它被隐式设置为`objectBoundingBox`. `-1`和`-100%`on`x`和也是如此`y`。我混合了两种符号。

# html - 线性渐变+背景大小在Firefox中不起作用

> ID：13523559
> 
> 赞同：1
> 
> 时间：2012-11-23T05:29:38.437
> 
> 标签：html, firefox, css, webkit, gradient

我使用背景大小为 400% 的线性渐变。这允许我通过更改背景位置在悬停和活动状态之间的渐变之间设置动画。它在 webkit 中工作得很好，但在 Firefox 中却不行。似乎 background-size 属性根本不被承认。

Firefox 基本上只是挤压元素中的整个渐变，就好像背景大小设置为 100%。

我有一个超级简单的页面来演示这个问题：

[http://firefoxgradient.s.cboo.st](http://firefoxgradient.s.cboo.st)

（切换黑白 firefox 和 webkit 以查看差异）

我为渐变和背景大小使用了所有正确的供应商前缀。

我在图像上修改了背景大小，它的行为符合预期。可能是梯度特定的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T07:59:34.863

问题是，在 Firefox`background-size`中有两个值，一个是宽度，一个是高度。如果你这样做：`background-size: 400%`firefox 将其翻译为`background-size: 400% auto`. auto 是高度的值。要解决它，只需写： `-moz-background-size: 400% 400%` 这对我有用。

# javascript - 如何检测选中了哪些复选框？

> ID：13523562
> 
> 赞同：0
> 
> 时间：2012-11-23T05:30:17.770
> 
> 标签：javascript, jquery, html, checkbox

我需要使用复选框，但没有提交按钮——它需要对用户已经在的页面产生影响，即包含复选框的同一页面。

本质上，我有大约 10 个复选框元素。用户选择一定数量的它们，然后单击一个按钮元素。当他们单击该元素时，我需要检测哪些复选框已被选中。用最少的代码做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:34:20.033

让所有复选框共享同一个类。

```
var allChecked = $(".checkBoxClass:checked"); 
```

这将返回类中选中复选框的列表`checkBoxClass`。现在您可以迭代每个元素并对其进行操作。

```
for(var i=0; i<allChecked.length; i++) {    
  console.log("Checkbox " + $(allChecked[i]).val().toString() + " is checked");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:32:16.973

尝试：

```
 <input type="checkbox" id="1" value="one"/>
    <input type="checkbox" id="2" value="two"/>
    <input type="checkbox" id="3" value="three"/>
    <input type="button" onclick="validate()" value="Check"/>   

    <script type="text/javascript">
        function validate(){
            var chkArr = document.querySelectorAll('input[type="checkbox"]');
            var notChecked='';
            for(var i=0;i<chkArr.length;i++){
                if(!chkArr[i].checked)
                    notChecked += chkArr[i].value
            }
            if(notChecked.length)
                alert(notChecked);
        }
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:38:29.463

这些中的任何一个都应该起作用：

```
$('input:checked');

$('input:checkbox:checked');

$('input:checkbox').filter(':checked'); 
```

# windows - 运行无障碍应用程序需要以下步骤

> ID：13523564
> 
> 赞同：13
> 
> 时间：2012-11-23T05:30:49.720
> 
> 标签：windows, microsoft-metro, elevated-privileges

我正在尝试为 Metro 应用程序自动化创建一个 UI 自动化客户端，但是当我将 uiAccess 设置为 true 时，它​​会给出消息（在构建时），

> 微软视觉工作室
> 
> 无法启动程序“C:\myprogram\myprogram.exe”。
> 
> 应用程序清单的 uiAccess 属性设置为“true”。运行辅助功能应用程序需要遵循帮助中描述的步骤。
> 
> 好的 | 帮助

当我点击帮助按钮时，它会打开浏览器页面：

[http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28VS.DEBUG.ERROR.LAUNCH_ELEVATION_REQUIREMENTS%29&rd=true](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28VS.DEBUG.ERROR.LAUNCH_ELEVATION_REQUIREMENTS%29&rd=true)

但该页面指的是有关 Visual Studio 2013 的常见问题（截至 2013 年 12 月 24 日）。

任何人都可以帮助并提供页面的以前内容或帮助如何通过从 Microsoft Visual Studio 启动一个在其清单中`uiAccess`设置为的应用程序来解决此问题吗？`true`

# android - 文字说明未在 Facebook 上共享

> ID：13523569
> 
> 赞同：2
> 
> 时间：2012-11-23T05:31:32.077
> 
> 标签：android, android-intent

我想分享带有标题的照片，但在 Facebook 上没有分享文字标题有没有办法使用发送意图在 Facebook 上分享带有照片的文字。

```
List<Intent> targetedShareIntents = new ArrayList<Intent>();
Intent share = new Intent(android.content.Intent.ACTION_SEND);
share.setType("image/jpeg");
List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(share, 0);
if (!resInfo.isEmpty()){
    for (ResolveInfo info : resInfo) {
        Intent targetedShare = new Intent(android.content.Intent.ACTION_SEND);
        targetedShare.setType("image/jpeg"); // put here your mime type
        if (info.activityInfo.packageName.toLowerCase().contains(nameApp) || info.activityInfo.name.toLowerCase().contains(nameApp)) {
            targetedShare.putExtra(Intent.EXTRA_SUBJECT, "Virtual Mirror Photo");
            targetedShare.putExtra(Intent.EXTRA_TEXT,"This photo is created by Virtual Mirror App.\n\nInfoshore Team");
            targetedShare.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(imagePath)) );
            targetedShare.setPackage(info.activityInfo.packageName);
            targetedShareIntents.add(targetedShare);
            isAppAvaiable = true;
        }
    }
    Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), "Select app to share");
    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));
    startActivity(chooserIntent); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T05:42:51.877

根据 Facebook 的平台政策，您不能使用 `Intent.EXTRA_TEXT`. 它通常被认为是一个错误，但根据此处提交的错误报告[以及](https://developers.facebook.com/bugs/332619626816423/)此处[，](https://developers.facebook.com/bugs/363863587019268) Facebook 明确提到情况并非如此（这不是错误）。

您可以详细了解他们的[平台政策](https://developers.facebook.com/policy/)，特别是**平台政策 IV.2**

*引自平台政策 IV.2：*

> 您不得预先填写与以下产品关联的任何字段，除非用户在工作流程的早期手动生成内容：流故事（Facebook.streamPublish 和 FB.Connect.streamPublish 的 user_message 参数，以及流的 message 参数。发布）、照片（标题）、视频（描述）、注释（标题和内容）、链接（评论）和 Jabber/XMPP。
> 
> 这些字段旨在让用户表达自己。预先填写这些字段会削弱用户语音的真实性。

底线是（不幸的是），你不能为你上传的照片添加标题`Intents`。您可以做到这一点的唯一方法是将 Facebook SDK 集成到您的应用程序中。要查看他们如何在他们的示例应用程序*Hackbook*中执行此操作的示例，请参阅 [此链接](https://github.com/imkevinxu/totoro/blob/master/facebook-android-sdk-3.0/samples/Hackbook/src/com/facebook/android/Hackbook.java) 并向下滚动到第**263**行，在那里他们处理上传带有标题的照片。

# iphone - NSTimer 在 UI 活动后加速

> ID：13523572
> 
> 赞同：1
> 
> 时间：2012-11-23T05:32:02.433
> 
> 标签：iphone, ios5, ios6, nsurlconnection, nstimer

我`NSURLConnection`每 11 秒使用`NSTimer`. 在主`NSTimer`运行循环上运行。该请求的超时时间为 10 秒。在`NSTimer`我增加应用程序上的 UI 活动之前效果很好（比如点击`UIButtons`、`UIAlertViews`频繁关闭）。

在此之后，`NSTimer`加速并像一个while循环一样运行，没有任何延迟。这会在应用程序中产生很多问题，因为我无法正确处理连接响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:14:18.710

问题是您在按钮操作中声明了一个 NSTimer ......现在每次按下这个按钮时，NSTimer 间隔都会编译到它的前一个间隔，结果是它被调用的频率是它的两倍......下次它是比以前的两倍频繁……等等。

最好的方法是在 .h 文件中定义 NSTimer ，然后每次在 .m 文件中有代码调用它时，首先检查它是否已经存在，如果存在则无效并释放它。

```
 if(myTimer){
        [myTimer invalidate];
        [myTimer release]; 
  }
  myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timeInterval) userInfo:nil repeats:YES]; 
```

# c++ - python 列表的 SWIG 类型映射加倍 *

> ID：13523574
> 
> 赞同：1
> 
> 时间：2012-11-23T05:32:14.103
> 
> 标签：c++, python, c, swig

如何在 swig 中使用 typemap 转换 python 列表。例如 ：

```
lst = [1.0,2.0,3.3] (Python list) 
```

传递给

```
void print_arg(double *lst){} (c/c++ function) 
```

我该如何为此编写 swig 接口文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:22:07.193

一种方法是使用 SWIG 和 carrays 和 cpointer

示例代码是：

SWIG 接口

```
%include "carrays.i"
%array_class(double, doubleArray); 
```

Python 模块

```
LEVEL = 3
thre = [1, 100, 10000]
a = example.doubleArray(LEVEL)
for i in xrange(LEVEL):
    a[i] = thre[i]

gd=example.GradedDouble(LEVEL,a) 
```

以上是我的工作示例...根据您的目的相应地更改代码...

# android - Android 如何更改弹出菜单项背景

> ID：13523580
> 
> 赞同：4
> 
> 时间：2012-11-23T05:32:42.540
> 
> 标签：android, styles, popupmenu

我正在使用弹出菜单。我想更改弹出菜单的背景，但没有找到方法。我不想要警报对话框类型的功能。

我有一个按钮，在点击监听器上我初始化了一个弹出菜单。

```
 Button btn = (Button) findViewById(R.id.btn);

        OnClickListener listener = new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                popup = new PopupMenu(getBaseContext(), v);
                popup.getMenuInflater().inflate(R.menu.popup, popup.getMenu());
                popup.setOnMenuItemClickListener(new OnMenuItemClickListener() {
                    public boolean onMenuItemClick(MenuItem arg0) {
                        // TODO Auto-generated method stub
                        return true;
                    }
                });
                popup.show();
            }
        };
        btn.setOnClickListener(listener); 
```

在菜单文件夹中，我有 popup.xml。我想改变弹出菜单项目的背景（不是按钮）。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-18T18:51:29.570

我用这段代码解决了这个问题：

```
Context wrapper = new ContextThemeWrapper(getContext(), R.style.PopupMenu);
PopupMenu popupMenu = new PopupMenu(wrapper, v); 
```

参考：blog.stylingandroid.com

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T07:04:38.447

可能您可以使用样式。

不确切知道，但如果您的主题发生变化，其中一个应该可以完成这项工作。将样式中的背景更改为您的自定义可绘制对象。

```
<style name="AppTheme">
    <item name="android:listPopupWindowStyle">@style/yourPopupWindowStyle</item>
    <item name="android:popupMenuStyle">@style/yourPopupWindowStyle</item> 
```

# javascript - 单击功能“此”不起作用

> ID：13523581
> 
> 赞同：0
> 
> 时间：2012-11-23T05:32:43.837
> 
> 标签：javascript, jquery, this

我在[http://www.red-team-design.com/cool-notification-messages-with-css3-jquery](http://www.red-team-design.com/cool-notification-messages-with-css3-jquery)找到了一个脚本，但我的代码有问题

我想让它1）点击隐藏，2）15秒后隐藏

HTML：

```
<div class="warning message">It is currently past 4pm. Any orders placed between now and midnight will not be placed until 4pm tomorrow.</div> 
```

Javascript：

```
var myMessages = ['info','warning','error','success']; // define the messages types
function hideAllMessages(){
    var messagesHeights = new Array(); // this array will store height for each
    for (i=0; i<myMessages.length; i++){
        messagesHeights[i] = $('.' + myMessages[i]).outerHeight(); // fill array
        $('.' + myMessages[i]).css('top', -messagesHeights[i]); //move element outside viewport
    }
}
function showMessage(type){
    hideAllMessages();
    $('.'+type).animate({top:"0"}, 500);
    setTimeout(function(){
        $('.'+type).animate({top: -$('.'+type).outerHeight()}, 500);
        hideAllMessages();
        },15000);
}
$(document).ready(function(){
    // Initially, hide them all
    hideAllMessages();
    // Show message
    for(var i=0;i<myMessages.length;i++) {showMessage(myMessages[i]);}         
    // When message is clicked, hide it
    $('.message').click(function(){              
          $(this).animate({top: -$(this).outerHeight()}, 500);
    });
}); 
```

这是由 php 执行的，我只是使用 php 将以下行插入到我的代码中：

```
<script type='text/javascript'>
    $(document).ready(function(){
        showMessage(warning)
    });
</script>​ 
```

现在由于某种原因，当我单击 div 时它不会隐藏，并且它不会在指定的 15 秒后隐藏。

我在[http://jsfiddle.net/dpdesignz/yTaRa/1/](http://jsfiddle.net/dpdesignz/yTaRa/1/)创建了一个 JSFiddle，如果有人介意看看可能出了什么问题？我感觉它与 PHP 回显执行的部分有关，所以有人知道另一种方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:40:06.960

您的代码中有一些错误。

第一的`warning is not defined`

其中指的是以下内容：

```
$(document).ready(function(){
    showMessage(warning) 
}); 
```

`warning`不是一个集合变量。也许你的意思是这样`'warning'`。

第二`showMessage is not defined`

```
showMessage('warning'); 
```

这是在`showMessage()`定义函数之前调用的。您可以通过将此呼叫移至另一个呼叫来解决此问题`$(document).ready()`

[http://jsfiddle.net/yTaRa/5/](http://jsfiddle.net/yTaRa/5/)

```
var myMessages = ['info','warning','error','success']; // define the messages types
function hideAllMessages(){
    var messagesHeights = new Array(); // this array will store height for each
    for (i=0; i<myMessages.length; i++){
        messagesHeights[i] = $('.' + myMessages[i]).outerHeight(); // fill array
        $('.' + myMessages[i]).css('top', -messagesHeights[i]); //move element outside viewport
    }
}
function showMessage(type){
    hideAllMessages();
    $('.'+type).animate({top:"0"}, 500);
    setTimeout(function(){
        $('.'+type).animate({top: -$('.'+type).outerHeight()}, 500);
        hideAllMessages();
        },15000);
}
$(document).ready(function(){
    // Initially, hide them all
    hideAllMessages();
    // Show message
    for(var i=0;i<myMessages.length;i++) {showMessage(myMessages[i]);}         
    // When message is clicked, hide it
    $('.message').click(function(){              
          $(this).animate({top: -$(this).outerHeight()}, 500);
    });
    showMessage('warning');
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:57:54.747

```
$(document).ready(function(){
    $('.info, .warning, .error, .success').hide();
    $('.info, .warning, .error, .success').slideDown(500);
    $('.info, .warning, .error, .success').delay(15000).slideUp(500);
    $('.info, .warning, .error, .success').on('click', function() {
        $(this).hide();
    });
}); 
```

让 jQuery 完成所有工作 =)

[http://jsfiddle.net/yTaRa/8/](http://jsfiddle.net/yTaRa/8/)

如果每个消息类型也将被归类为消息，我们可以进一步减少此代码......

```
$(document).ready(function(){
    $('.message').hide();
    $('.message').slideDown(500);
    $('.message').delay(15000).slideUp(500);
    $('.message').on('click', function() {
        $(this).hide();
    });
}); 
```

[http://jsfiddle.net/yTaRa/9/](http://jsfiddle.net/yTaRa/9/)

```
$(document).ready(function(){
    setTimeout(function() {                   //sets a 15 second timer on each message to collapse up over .5 seconds
        $('.message').slideUp(500);
    }, 15000);
    $('.message').hide();                     //hides all elements with the class message.
    $('.message').slideDown(500);             //animates messages to expand down over .5 seconds
    $('.message').on('click', function() {    //wires up click event to hide message on click
        $(this).slideUp(500);
    });
}); 
```

[http://jsfiddle.net/yTaRa/10/](http://jsfiddle.net/yTaRa/10/)

我必须使用 setTimeout 来调用 slideUp 的 15 秒，因为单击 slideUp 不会触发：

```
$('.message').delay(15000).slideUp(500); 
```

我认为这是因为一次只能在同一个元素上安排一个 slideUp() 调用。

# asp.net - ASP.Net MVC4 视图中的刷新问题

> ID：13523583
> 
> 赞同：1
> 
> 时间：2012-11-23T05:32:50.930
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我在 ASP.Net MVC4 中有如下代码。我正在使用 Razor 引擎。

```
@{
    string sDefaultEnvironId = string.Empty;

} 
<script language="javascript" type="text/javascript" >
    function changeHd() {
        $("#hdSelEnvironmentId").val("1");
    }
</script>
<input type="button" value="ChangeHD" onclick="changeHd();" />
@Html.Hidden("hdSelEnvironmentId", sDefaultEnvironId) 
```

`hdSelEnvironmentId`首次访问该视图时，隐藏字段的值为空。`1`然后它在我单击按钮后更改为`ChangeHD`。但是按下后`F5`，隐藏字段的值`hdSelEnvironmentId`仍然是`1`，我希望它以初始空值而不是`1`。谁能帮我弄清楚吗？我就是不明白。我正在使用 Firefox 和 Firebug，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:46:03.930

**编辑** [正如 Andreas 在此处发现的那样](https://stackoverflow.com/a/7377350/1001985)，您可以通过在输入中添加属性来删除此行为`autocomplete=off`：

```
@Html.Hidden("hdSelEnvironmentId", sDefaultEnvironId, new { autocomplete = "off" }) 
```

* * *

这种影响*不是*由于缓存造成的——它是 Firefox 的一个功能（错误？），当您刷新页面时，页面的输入似乎不会从服务器重新加载。

*   在 Chrome 或 IE 中尝试相同的操作，您会看到该值重置为空
*   清除 Firefox 中的缓存，您会注意到该值仍未重置。

所以，我不确定是否有解决方法，但这个问题似乎仅限于 Firefox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:28:28.650

而不是设置它

```
 @{
    string sDefaultEnvironId = string.Empty;

} 
```

只需在 JavaScript 中初始化它。

```
 $(document).ready(function(){
     $("#hdSelEnvironmentId").val() = "";
    });
    function changeHd() {
            $("#hdSelEnvironmentId").val() = "";   
            $("#hdSelEnvironmentId").val("1");
        } 
```

我认为这会有所帮助..即使在页面刷新时再次加载文档，该值也将设置为空，然后在按钮单击时设置为 1

# c++ - 将结构成员函数指针分配给类函数

> ID：13523584
> 
> 赞同：2
> 
> 时间：2012-11-23T05:32:57.657
> 
> 标签：c++, class, struct, function-pointers

我已经查看了所有类似的问题，但似乎没有出现这种特定情况。

我有一个插件系统，当插件想要插入一个钩子（这是一个类函数）时，它会接收要调用的函数的地址。

插入：

```
struct plugin {
...
    bool (*insert_hook)(hook_data*);
...
}; 
```

班级：

```
class manager {
...
    private:
        InsertHook(hook_data *hook);
...
}; 
```

管理器中的创建功能：

```
{
    ...
    typedef bool (manager::*InsertHookFunc)(hook_data*);
    InsertHookFunc    hook_func = &manager::InsertHook;

    // assigning this to the plugin ???
    // C2440, cannot convert from 'hook_func' to 'bool (__cdecl *)(hook_data *)'
    plugin->insert_hook = hook_func;
    ...
} 
```

管理器调用插件，如果插件需要插入任何钩子，它需要调用管理器。

这样做的正确方法是什么？我知道它可以正常工作（插件被传递给类创建函数的函数指针以请求插件对象），但**由于**它是类函数（使用非类函数，这个任务工作正常）。

我可以创建一个非类函数作为经理的朋友，但我确信这可以直接完成，我就是想不通......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:52:13.573

这些类型需要匹配：

```
typedef bool (manager::*InsertHookFunc)(hook_data*);
bool (*insert_hook)(hook_data*); 
```

直接的解决方法是在`manager::`里面插入另一个`plugin`：

```
bool (manager::*insert_hook)(hook_data*); 
```

最好的风格可能是像这样移动`typedef`外部`class manager`：

```
struct manager; // allow manager to be referenced without its definition
typedef bool (manager::*InsertHookFunc)(hook_data*);

struct plugin {
...
    InsertHookFunc insert_hook;
...
}; 
```

或者，如果插件已经看到 的定义`manager`，只需执行

```
 manager::InsertHookFunc insert_hook; 
```

`typedef`在处理复杂类型时绝对是您的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:37:25.280

您尝试使用的函数是**不同类的****非静态函数**（何时调用），这意味着调用它需要**类的实例**。

 ****因此，要使指向非静态成员函数的函数指针起作用，**您还需要将指针传递给实例**。

指针的定义将更改为与`InsertHookFunc` 您将其称为相同的`(ptr->*hook_func )(<insert arg here>)`

或者，如果您将 function( `InsertHook`)设为**免费朋友**或**静态成员**，它会照原样工作，您只需删除`&`作业中的 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:31:58.527

您不能让通用函数指针指向这样的非静态成员函数。这是因为所有非静态成员函数都有一个隐式的第一个参数`this`。是的，`this`您在函数中使用的指针实际上是函数的隐藏参数。

`bool`由于您的结构中使用了诸如此类的类型`plugin`，我猜您只想将 C++ 代码用作插件。在那种情况下，为什么不简单地将`plugin`结构作为插件可以继承的抽象基类呢？

```
struct plugin
{
    ...
    virtual bool insert_hook(hook_data*) = 0;
    ...
};

class manager : public plugin
{
public:
    ...
    bool insert_hook(hook_data*) { ... }
    ...
}; 
```****

# javascript - 如何使用javascript向下滚动页面

> ID：13523586
> 
> 赞同：0
> 
> 时间：2012-11-23T05:33:13.833
> 
> 标签：javascript

`hrefs`单击第一个跳过时，我有两个跳过的 div，`href`它应该自动向下滚动到下一个 div。

我试过这样

```
<div class="skip"><a href='javascript:move_down()' onclick="skipWindow(2);">skip</a></div>

 function move_down() {        
   window.scrollBy(0, 50);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:48:37.820

使用锚链接或 HTML5 术语中的片段有什么问题。不需要 JS（尽管如果动态需要，JS 可以插入正确的链接/片段）。

查看 [带有“name”或“id”的 HTML 锚？](https://stackoverflow.com/questions/484719/html-anchors-with-name-or-id)

# python - python生成器/迭代器的设计模式？（反向读取/总计数）

> ID：13523590
> 
> 赞同：0
> 
> 时间：2012-11-23T05:33:57.577
> 
> 标签：python, asynchronous, iterator, cursor, generator

我正在编写一个 python 接口，它基本上从一个 db 逐行构造，将流发送到 tcp 套接字，另一个线程检查 tcp 响应并确定是否有错误响应，跳过某些流并从早期的重试。

下面的伪代码，PK表示PrimaryKey。

基本上是这样的

```
def generate_msg(pk_start, pk_stop):
    for x in db.query(pk>pk_startand pk<pk_stop):
        yield pack_to_stream(x) 
```

那么 tcp 套接字发送线程就像：

```
for msg in generate_msg(first_id, last_id):
    socket.send(msg) 
```

问题是当 tcp socket`read`线程在响应中发现一些错误时，返回了 msg 的 pk，所以我需要从`pk`

所以这是我的问题：

1.  可以向前和向后移动的迭代器的设计模式是什么，尤其是。使用数据库行游标
2.  我可以在不阅读整个列表的情况下首先获得迭代器的总数吗？
3.  我的方案的一般建议是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:05:53.727

迭代器旨在通过一次处理一个项目来节省内存，并且可能产生无限数量的项目。然而，由于它们的设计，如果不消耗整个迭代器，您通常无法知道它们的长度，并且通常不期望您能够控制它们。

也就是说，没有什么能阻止您创建一个既可以用作迭代器又可以提供附加功能的自定义类。数据库游标是此类的典型示例；游标可以迭代以产生行，但您也可以向它询问行数（即序列的长度），并获取有关列的其他信息、获取多行或通过调用`.execute()`方法指向新结果集.

如果你想构建一个作为迭代器的自定义类，你需要给它一个[`__iter__()`方法](http://docs.python.org/2/reference/datamodel.html#object.__iter__)。你要么把这个方法变成一个生成器（通过使用`yield`语句），或者只是`return self`给你的类一个[`.next()`方法](http://docs.python.org/2/library/stdtypes.html#iterator.next)；后者预计会退回一件物品（不要使用`yield`），或者[`StopIteration`](http://docs.python.org/2/library/exceptions.html#exceptions.StopIteration)在无法退回更多物品时提出。

然后，您可以添加其他返回长度信息的方法，或者将查询重新设置为从给定的主键开始。

未经测试的python-ish代码：

```
class MessagesIterator(object):
    def __init__(self, pk_start, pk_stop):
        self.pk_start, self.pk_stop = pk_start, pk_stop
        self.cursor = db.query("pk>? and pk<?", (pk_start, pk_stop))

    def __iter__(self):
        return self

    def next(self):
        return next(self.cursor)  # raises StopIteration when done

    def length(self):
        return self.cursor.rowcount

    def move_to(self, pk_start):
        # Validate pk_start perhaps
        self.pk_start = pk_start
        self.cursor = db.query("pk>? and pk<?", (self.pk_start, self.pk_stop)) 
```

# java - 缺少返回错误

> ID：13523599
> 
> 赞同：0
> 
> 时间：2012-11-23T05:35:16.047
> 
> 标签：java, methods, return

```
/**
 * Read a positive integer and return its value
 * @param the prompt to be shown to the user
 */
public static int readPositiveInteger(String prompt)
{
    System.out.println (prompt);
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter an integer");
    boolean positive = false;

    if (scan.hasNextInt() && positive == false)
    {
        int input = scan.nextInt();
        if (input > 0)
        {
            positive = true;
            {
                return input;
            }
        }
        else
        {
            System.out.println ("Bad input enter an integer.");
            positive = false;
            scan.nextLine();
        }
    }

    else 
    {
        System.out.println ("Bad input enter an integer.");
        positive = false;
        scan.nextLine();
    }

} 
```

}

我正在尝试使用户无法插入 0 或负数。但是我不认为我的逻辑是正确的，因为我收到了一个丢失的返回错误。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:37:47.960

您的方法签名如下：

```
public static int readPositiveInteger(String prompt) 
```

但是，您永远不会返回整数。你有两个选择：

*   `return 0;`在方法的末尾添加类似的内容
*   更改`static int`为`static void`。

我认为第一个是更好的选择，因为您想返回读取的整数。如果没有读取，您可以告诉程序 a`0`在那里。

但是，最好的选择是修改您的`if`语句以使用`while`循环，并仅在用户输入某些内容时才返回某些内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T05:39:49.690

`if`应该`while`是：

```
while (scan.hasNextInt() && positive == false)
{
    int input = scan.nextInt();
    if (input > 0)
    {
        positive = true;
        {
            return input;
        }
    }
    else
    {
        System.out.println ("Bad input enter an integer.");
        positive = false;
        scan.nextLine();
    }
} 
```

真的，没有必要保持`positive`布尔值，因为它通过的那一刻

```
if (input > 0) 
```

它立即返回，无需对布尔值进行任何进一步检查。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T05:45:39.350

正如其他人在这里提到的，您的外部 if 语句应该是一个 while 循环：

```
while (scan.hasNextInt() && positive == false)
{
    ...
} 
```

此外，您只有一个用 if 语句编写的 return 语句。如果简单地将上述 if 语句转换为 while 循环没有帮助，`return 0`请在 while 循环之后尝试。

java 编译器（以及其他编译器）不理解代码的语义。它只能检查正确的语法。因此，在您的情况下，它可能会担心 return 命令可能永远无法到达。`return 0`函数末尾的A将解决该问题（尽管`return 0`永远不会达到）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-23T05:53:21.480

```
 public static int readPositiveInteger(String prompt)
     {
System.out.println (prompt);
Scanner scan = new Scanner(System.in);
System.out.println("Enter an integer");
boolean positive = false;
int input;
if (scan.hasNextInt() && positive == false)
{
    input = scan.nextInt();
    if (input > 0)
    {
        positive = true;
        {
            return input;
        }
    }
    else
    {
        System.out.println ("Bad input enter an integer.");
        positive = false;
        scan.nextLine();
    }
}

else 
{
    System.out.println ("Bad input enter an integer.");
    positive = false;
    scan.nextLine();
}
return input; 
```

}

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-23T05:37:41.050

你的方法的所有路径都应该返回一些东西，因为你将它定义为

```
public static int readPositiveInteger(String prompt) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-23T05:38:02.953

看起来您希望您的代码处于 while 循环或其他什么？就目前而言，它可以“从底部跑掉” - 就像错误所说的那样，没有回报（这是必需的）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-23T05:38:41.923

你需要一个while循环。在伪代码中：

```
While true (ie loop forever)
   Ask for input
   If input ok return it 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-23T05:48:59.707

您要做的就是`return input;`在方法的末尾添加

```
public static int readPositiveInteger(String prompt) {
        System.out.println(prompt);
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter an integer");
        boolean positive = false;

        if (scan.hasNextInt() && positive == false) {
            int input = scan.nextInt();
            if (input > 0) {
                positive = true;
                {
                    return input;
                }
            } else {
                System.out.println("Bad input enter an integer.");
                positive = false;
                scan.nextLine();
            }
        }

        else {
            System.out.println("Bad input enter an integer.");
            positive = false;
            scan.nextLine();
        }
        return 0;
    } 
```

此功能将为您完美运行

```
public static int readPositiveInteger(String prompt) {
        System.out.println(prompt);     
        System.out.println("Enter an integer");
        Scanner scan = new Scanner(System.in);
        boolean positive = false;
        int input = 0;

        while (input <= 0) {
            System.out.println("please enter a number greater then 0");
            input = scan.nextInt();
        }
        return input;
    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-11-23T05:41:20.343

您必须在 else 块中添加 return 语句，否则您的代码将无法编译

您的方法需要在 else 块中有一个 return 语句

```
 else
        {
            System.out.println ("Bad input enter an integer.");
            positive = false;
            scan.nextLine();
            return 0;//your missing return statement

        }
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-23T05:38:41.360

```
public static int readPositiveInteger() 
{
return int_type;
} 
```

返回类型为 int，因此您应该在函数中返回整数值。

# android - Android：在微调器中心对齐文本

> ID：13523607
> 
> 赞同：2
> 
> 时间：2012-11-23T05:36:06.243
> 
> 标签：android, alignment, spinner

也许你会看到一些我没有看到的东西。我不明白为什么它拒绝对齐。我在布局中有 2 个微调器，并试图将文本对齐到中心。在两个微调器中，文本都向左对齐。这是代码。

xml代码：

```
<LinearLayout
       android:layout_width="fill_parent"
       android:layout_height="36dp"
       android:background="@color/orange"
       android:gravity="bottom|center_vertical" >

       <Spinner
           android:id="@+id/sub_from_category"
           android:layout_width="wrap_content"
           android:layout_gravity="center"
           android:layout_weight="2"
           android:layout_height="35dp"
           android:background="@drawable/spinners" />

       <View
           android:layout_width="2dp"
           android:layout_height="wrap_content"
           android:layout_weight="0"
           android:layout_marginLeft="1dp"
           android:layout_marginRight="1dp"
           android:background="@android:color/darker_gray" />

       <Spinner
           android:id="@+id/sub_to_category"
           android:layout_width="wrap_content"
           android:layout_gravity="center"
           android:layout_weight="2"  
           android:layout_height="35dp"
           android:background="@drawable/spinners" />
   </LinearLayout> 
```

xml代码：

```
<TextView
    android:id="@+id/spinnerTarget"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:textColor="#454545"
    android:background="@color/orange"
    android:textSize="1/> 
```

和 Java 活动：

```
subFromCategory = (Spinner)findViewById(R.id.sub_from_category);
        subToCategory = (Spinner)findViewById(R.id.sub_to_category);

        ArrayAdapter<String> adapterF = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,Angle);
        adapterF.setDropDownViewResource(R.layout.sub_spinner);
        subFromCategory.setAdapter(adapterF);

        ArrayAdapter<String> adapterT = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,Angle);
        adapterT.setDropDownViewResource(R.layout.sub_spinner);
        subToCategory.setAdapter(adapterT); 
```

谢谢你，尼罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:49:44.643

永远记住这一点：

**`layout gravity`**-在其父视图中指定*对象**本身的“重力”的属性。***

***重力***- 一个属性，它指定对象内*子**视图的“重力”。***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T08:36:15.347

我有同样的问题，解决方案很“简单”。您必须有“空间”才能将其设置在中心。

错误的：

```
<Spinner
android:id="@+id/spinner"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
/> 
```

正确的：

```
<Spinner
android:id="@+id/spinner"
android:layout_width="100dp"
android:layout_height="wrap_content"
/> 
```

# android - 是否可以在 android NDK 中更改位图中的像素矩阵

> ID：13523609
> 
> 赞同：2
> 
> 时间：2012-11-23T05:36:32.473
> 
> 标签：android, android-ndk

我想在不创建新的位图实例的情况下替换位图的像素。是否可以在不创建新的位图实例的情况下更改提供给本机方法的位图的 void * 像素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:32:29.503

根据 Android NDK r8b 文档（“稳定 API”部分），您可以将位图传递给 NDK 层并从那里处理其像素：

> 'jnigraphics' 库：
> 
> 这是一个微型库，它公开了一个稳定的、基于 C 的接口，允许本地代码可靠地访问 Java 位图对象的像素缓冲区。
> 
> 要使用它，请在源代码中包含标头，并链接到 jnigraphics 库，如下所示：
> 
> LOCAL_LDLIBS += -ljnigraphics
> 
> 有关详细信息，请阅读以下位置的源标题：
> 
> ```
> build/platforms/android-8/arch-arm/usr/include/android/bitmap.h 
> ```
> 
> 简而言之，典型用法应如下所示：
> 
> ```
> 1/ Use AndroidBitmap_getInfo() to retrieve information about a
>    given bitmap handle from JNI (e.g. its width/height/pixel format)
> 
> 2/ Use AndroidBitmap_lockPixels() to lock the pixel buffer and
>    retrieve a pointer to it. This ensures the pixels will not move
>    until AndroidBitmap_unlockPixels() is called.
> 
> 3/ Modify the pixel buffer, according to its pixel format, width,
>    stride, etc.., in native code.
> 
> 4/ Call AndroidBitmap_unlockPixels() to unlock the buffer. 
> ```

# javascript - 如何比较节点js中的两个数组？

> ID：13523611
> 
> 赞同：12
> 
> 时间：2012-11-23T05:36:41.893
> 
> 标签：javascript, node.js

我有两个数组，如何一次比较两个数组。

```
 var arr1= ["a","b","c"];
   var arr2 = ["a","c","d"]

   if(arr1 == arr2){
      console.log(true);
    }else{
      console.log(false);
    } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-23T05:52:14.693

```
var arr1 = ["a","b","c"];
var arr2 = ["a","c","d"];

if (arr1.length == arr2.length
    && arr1.every(function(u, i) {
        return u === arr2[i];
    })
) {
   console.log(true);
} else {
   console.log(false);
} 
```

* * *

边缘情况的旁注：

`===``NaN`由于行为出乎意料，通常认为此类任务略有损坏：

```
var arr1 = ["a",NaN,"b"];
var arr2 = ["a",NaN,"b"];

if (arr1.length == arr2.length
    && arr1.every(function(u, i) {
        return u === arr2[i];
    })
) {
   console.log(true);
} else {
   console.log(false);
} 
```

上面的代码实际上记录了`false`因为`NaN !== NaN`. 另外，`===`无法`+0`区分`-0`。为了涵盖这两种情况，您可以使用称为“egal”或“is”的更强比较，可以像这样轻松实现：

```
function is(a, b) {
    return a === b && (a !== 0 || 1 / a === 1 / b) // false for +0 vs -0
        || a !== a && b !== b; // true for NaN vs NaN
}

var arr1 = ["a",NaN,"b"];
var arr2 = ["a",NaN,"b"];

if (arr1.length == arr2.length
    && arr1.every(function(u, i) {
        // Use "is" instead of "==="
        return is(u, arr2[i]);
    })
) {
   console.log(true);
} else {
   console.log(false);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-04T17:59:57.657

[ES6]

最佳答案是好的和足够的。

但是，当您只想比较它的值是否相同时，您必须先对其进行排序。这里不需要排序代码。

```
if(arr1.length == arr2.length && arr1.every((v) => arr2.indexOf(v) >= 0)) {
    console.log(true);
} else {
    console.log(false);
} 
```

而且..我认为使用“一些”而不是“每个”更好。

如果这些不一样，“一些”会让你提前退出。- 很少早，但早；）

```
if(arr1.length == arr2.length && !arr1.some((v) => arr2.indexOf(v) < 0)) {
    console.log(true);
} else {
    console.log(false);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-23T05:48:06.517

我会为此使用[下划线](http://underscorejs.org/#difference)。

```
var same = (_.difference(arr1, arr2).length == 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-16T11:33:32.673

这是另一个，没有 ES5 `every`：

```
function arrEq(arr1, arr2) {
  for (var i = 0; i < arr1.length; i++)
    if (arr1[i] != arr2[i])
      return false;
  return i == arr2.length;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-09T12:45:11.957

最佳答案很好，但我也会考虑使用 Array.prototype：

```
Array.prototype.equals = function (arr) {
    return this.length == arr.length && this.every((u, i) => u === arr[i]);
}

console.log([1,2,3].equals([1,2,3])); // true
console.log([1,2,3].equals([1,3,3])); // false
// BUT!
console.log(["a",NaN,"b"].equals(["a",NaN,"b"])); // false, because NaN !== NaN 
```

如果你希望它也适用于 NaN 并区分 +0 和 -0，最好使用这个：

```
Array.prototype.equals = function (arr) {
    function is(a, b) { // taken from the top answer
        return a === b && (a !== 0 || 1 / a === 1 / b) // false for +0 vs -0
            || a !== a && b !== b; // true for NaN vs NaN
    }
    return this.length == arr.length && this.every((u, i) => is(u, arr[i]));
}

console.log(["a",NaN,"b"].equals(["a",NaN,"b"])); // true 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-13T19:17:19.417

我想对“Taihwan Hah”的代码进行一些修改，但无法发表评论（系统告诉我）

所以这是我的修改：

```
function ArrayEquals(arr1,arr2){
    return arr1.length === arr2.length && !arr1.some((v) => arr2.indexOf(v) < 0) && !arr2.some((v) => arr1.indexOf(v) < 0);
} 
```

基本上，我必须检查 but 数组，因为我的数组不包含唯一数字。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-07T11:53:22.567

我想稍微改进一下来自 staackuser2 的答案：

```
var same = (arr1.length === arr2.length) && (_.difference(arr1, arr2).length === 0) 
```

或者

```
var same = (_.difference(arr1, arr2).length === 0) && (_.difference(arr2, arr1).length === 0) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-09T15:01:26.410

（虽然问题比 v9.0.0 早得多，但是）因为问题是关于节点的 - 从节点 v9.0.0 开始，您可以使用内置的“util”模块的[isDeepStrictEqual(arr1, arr2)](https://nodejs.org/api/util.html#util_util_isdeepstrictequal_val1_val2)来比较数组（或对象，或任何与此有关的东西）

```
const util = require('util');
let arr1 = [1,2,3];
let arr2 = [1,2,3];
let arr3 = [1,3,2];
console.log(util.isDeepStrictEqual(arr1, arr2)) // true
console.log(util.isDeepStrictEqual(arr1, arr3)) // false 
```

也适用于 NaN

# c# - 使用 ConstructorInfo 调用构造函数的反射

> ID：13523612
> 
> 赞同：7
> 
> 时间：2012-11-23T05:37:09.070
> 
> 标签：c#, .net, visual-studio-2010, reflection, .net-4.0

在像下面这样一个非常简单的类中，

```
class Program 
{

    public Program(int a, int b, int c)
    {
        Console.WriteLine(a);
        Console.WriteLine(b);
        Console.WriteLine(c);
    }
 } 
```

我使用反射来调用构造函数

像这样的东西......

```
 var constructorInfo = typeof(Program).GetConstructor(new[] { typeof(int), typeof(int),      typeof(int) });
        object[] lobject = new object[] { };
        int one = 1;
        int two = 2;
        int three = 3;
        lobject[0] = one;
        lobject[1] = two;
        lobject[2] = three;

        if (constructorInfo != null)
        {
            constructorInfo.Invoke(constructorInfo, lobject.ToArray);
        } 
```

但我收到一条错误消息，提示“对象与目标类型构造函数信息不匹配”。

非常感谢任何帮助/评论。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-23T05:42:19.123

`constructorInfo`只要调用构造函数，就不需要作为参数传递，而不是对象的实例方法。

```
var constructorInfo = typeof(Program).GetConstructor(
                          new[] { typeof(int), typeof(int), typeof(int) });
if (constructorInfo != null)
{
    object[] lobject = new object[] { 1, 2, 3 };
    constructorInfo.Invoke(lobject);
} 
```

* * *

对于`KeyValuePair<T,U>`：

```
public Program(KeyValuePair<int, string> p)
{
    Console.WriteLine(string.Format("{0}:\t{1}", p.Key, p.Value));
}

static void Main(string[] args)
{
    var constructorInfo = typeof(Program).GetConstructor(
                             new[] { typeof(KeyValuePair<int, string>) });
    if (constructorInfo != null)
    {
        constructorInfo.Invoke(
            new object[] { 
                new KeyValuePair<int, string>(1, "value for key 1") });
    }

    Console.ReadLine();
} 
```

# c - 函数的 OpenMP 优化

> ID：13523620
> 
> 赞同：1
> 
> 时间：2012-11-23T05:37:44.683
> 
> 标签：c, optimization, openmp

我们的任务是使用 openmp 来优化结构不佳的程序。我对编程很陌生，所以我希望任何人都可以了解如何优化这个功能（我需要优化的众多功能之一）：

```
void
entry_type3(F2D *sData, F2D *ones, F2D *quat, F2D **pos, F2D **vel)
{
    //Observation

   F2D *t;

   t = fSetArray(1, 3, 0);
    asubsref(t,2) = -9.8;

    F2D *accl = fDeepCopyRange(sData, 0, 1, 0, 3);
    F2D *gtemp = fMtimes( ones, t);
    F2D *gravity = quatRot(gtemp, quat);

    fFreeHandle(gtemp);
    fFreeHandle(t);

   t = fSetArray(3,3,0);
    asubsref(t,0) = 1;
    asubsref(t,4) = 1;
    asubsref(t,8) = 1;

    int n = ones->height;
    int i;
    for(i=0; i<(t->height*t->width); i++)
            asubsref(t,i) = asubsref(t,i)/STDDEV_ACCL;

   F2D *w = mcl( gravity, accl, t);

    generateSample(w, quat, *vel, *pos);
    fFreeHandle(t);

    //Motion model
  t = fMtimes(ones, accl);
    fFreeHandle(accl);
    accl = fMinus(t, gravity);
    fFreeHandle(w);
    fFreeHandle(gravity);
    fFreeHandle(t);

    F2D *is;
    #pragma omp parallel sections
    {
        #pragma omp section
        {
            F2D *is = quatConj(quat);
            F2D *s = quatRot(*vel, is);
            fFreeHandle(is);
            for(i=0; i<(s->height*s->width); i++)
            {
                 asubsref(s,i) = asubsref(s,i)*acclTimeInterval;
            }
            is = fPlus(*pos, s);
            fFreeHandle(*pos);
            *pos = fDeepCopy(is);
            fFreeHandle(is);
            fFreeHandle(s);
         }

        /** pos_ above stores: pos+quatRot(vel,quatConj(quat))*acclTimeInterval **/

        #pragma omp section
        {
            F2D *is = quatConj(quat);
            F2D *s = quatRot(accl, is);
            F2D* t = fDeepCopy(s);

            for(i=0; i<(s->height*s->width); i++)
            {
                asubsref(t,i) = 1/2*asubsref(s,i)*acclTimeInterval*acclTimeInterval;
            }

            /** t_ above stores: 1/2*quatRot(accl,quatCong(quat))*acclTimeInterval^2 **/

            fFreeHandle(s);
            fFreeHandle(is);

 s = randnWrapper(n,3);

            for(i=0; i<(s->height*s->width); i++)
            {
                asubsref(s,i) = asubsref(s,i) * M_STDDEV_POS;
            }

            /** s_ above stores: randn(n,3)*M_STDDEV_POS **/

       is = fPlus(*pos, t);
           fFreeHandle(*pos);
         *pos = fPlus(is, s);

            fFreeHandle(s);
            fFreeHandle(t);
            fFreeHandle(is);
    } 

}        
        //vel=vel+accl*acclTimeInterval+randn(n,3)*M_STDDEV_VEL;
#pragma omp parallel sections
{
#pragma omp section
{
 F2D *t = fDeepCopy(accl);
#pragma omp parallel for
    for(i=0; i<(accl->height*accl->width); i++)
    {
            asubsref(t,i) = asubsref(accl,i) * acclTimeInterval;
    }

    is = fPlus(*vel, t);
    fFreeHandle(accl);
    fFreeHandle(t);
}
#pragma omp section
{

 F2D *s = randnWrapper(n,3);
#pragma omp parallel for
    for(i=0; i<(s->height*s->width); i++)
    {
            asubsref(s,i) = asubsref(s,i) * M_STDDEV_VEL;
    }

    fFreeHandle(*vel);
    *vel = fPlus(is, s);
    fFreeHandle(is);
    fFreeHandle(s);
}
}
} 
```

我已经添加了一些 openmp 并行，但它仍然运行得很慢，所以我希望如果你经验丰富的退伍军人可以指出我应该关注哪些地方来提高性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:01:55.760

开头的这段代码： `for(i=0; i<(t->height*t->width); i++) asubsref(t,i) = asubsref(t,i)/STDDEV_ACCL;` 可以有效地并行化。每个的计算`i`都是完全独立的。

寻找这些独立的代码部分。而且，当然，您应该考虑要并行化什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:04:32.990

现在，它看起来像刚刚卡住了一些`pragma`s 陷入困境，不关心代码的并行性。现在，您并没有真正将工作分配给您的处理器，您实际上是在通过让每个内核做同样的事情来重复工作（并且可能会以这种方式产生一些严重的错误答案）。很高兴看到原版，看看你改变了什么。您实际上需要以编程方式拆分任务（即，如果您正在处理图像，则需要告诉处理器 1 处理奇数像素，处理器 2 处理偶数像素，OpenMP 不够聪明，无法解决这个问题）。很抱歉，如果这看起来没有那么有用，但是说这是一个任务，我认为你可能需要自己计算出一定数量 - 但重要的部分是 OpenMP 不能只需让代码并行，你需要告诉它怎么做。查看 omp_get_num_threads() 和 omp_get_thread_num()。

# android - 如何从android中的facebook fql查询获取json响应

> ID：13523624
> 
> 赞同：0
> 
> 时间：2012-11-23T05:38:08.260
> 
> 标签：android

我正在使用 fql 查询来获取 json 响应。我是这个 fql 执行过程的新手。我可以详细了解如何执行这个查询。我已经看到一些 Listener 类在获取响应时正在使用，

SELECT likes.user_likes FROM stream WHERE post_id ='XXXXXXXXXXXXX_XXXXXXXXX'

我是否需要任何东西来执行此操作并获得响应？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:01:12.873

```
private void doFQLQuery()
{
    //get the active facebook session
    Session session = Session.getActiveSession();
    //create the fql query
    String fqlQuery = "SELECT likes.user_likes FROM stream WHERE post_id ='XXXXXXXXXXXXX_XXXXXXXXX'";
    //create a bundle for the parameters(your query)    
    Bundle params = new Bundle();
    params.putString("q", fqlQuery);
    //setup the request
    Request request = new Request(session, "/fql", params, HttpMethod.GET, new Request.Callback()
    {         
        public void onCompleted(Response response) 
        {
            //when the request is completed output the results to the log
            Log.i(TAG, "Result: " + response.toString());
        }                  
    }); 
    //execute the request
    Request.executeBatchAsync(request);       
} 
```

您可以使用此代码执行 fql 查询并获取响应。无论您想对结果进行什么处理，都应该在 onCompleted 方法中完成。

# r - 使用 twitteR 包比较 Twitter Hashtag Volume

> ID：13523627
> 
> 赞同：0
> 
> 时间：2012-11-23T05:38:18.543
> 
> 标签：r, twitter, scrape

我想使用 R 中的 twitteR 包来比较从 2012 年 11 月 14 日到 2012 年 11 月 22 日（即 8 天的时间段）两个竞争主题标签的提及次数（计数）。例如，我想每小时比较两个主题标签：#A 与 #B。

我想知道是否有办法在 R 中使用 twitteR 包来做到这一点。使用 searchTwitter 功能的东西：

```
searchTwitter(searchString, n=25, lang=NULL, since=NULL, until=NULL,
              locale=NULL, geocode=NULL, sinceID=NULL, ...) 
```

我对抓取所有推文不感兴趣，只是在指定时间段内获取#A 与 #B 的每小时计数比较。我知道我必须了解速率限制，并且可能必须对推文进行一些巧妙的采样以避免速率限制。如果这是可行的任何想法，以及我将如何进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:39:45.567

我会每 2 分钟为每个标签提取 100 条推文。使用 #TweetsReturned / (TimePulled - TimeOfOldestTweet) 获得每单位时间的推文估计。您可以绘制这些图表以获得随时间变化的移动平均类型图表。如果您每 2 分钟发布推文，只需将它们相加即可估算每小时的推文。

# php - 当用户进入 /folder 时查看 /folder/index.php

> ID：13523628
> 
> 赞同：0
> 
> 时间：2012-11-23T05:38:23.003
> 
> 标签：php, redirect, web

我不确定 php 默认情况下是否已经这样做了，但是，我希望我的用户在访问`www.domain.com/folder/index.php`时看到该页面`www.domain.com/folder`，而是`www.domain.com/folder`在地址栏中看到它自己。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:53:02.153

该域正在打开其中的任何名称索引页面。它不显示`www.domain.com/folder/index.php`它只会显示的页面名称`www.domain.com/folder`。

# extjs - 在 yii 中如何生成登录功能

> ID：13523632
> 
> 赞同：0
> 
> 时间：2012-11-23T05:38:40.520
> 
> 标签：extjs, yii

在 yii 我正在创建登录功能。但在我的例子中，客户端设计是在 extjs 中，而服务器端设计是在 Yii 框架中。因此，在 yii 控制器中，我想以客户端输入用户名和密码的方式创建登录功能。在 extjs 中，这些数据将以 Json 格式被接受，然后被编码并发送到服务器。所以现在在服务器端我将收到用户名和密码。所以我的工作是使用从 extjs 收到的用户名和密码在 Yii 中创建登录功能。即在开始阶段我想创建登录功能假设硬编码的用户名和密码。所以你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:32:47.803

如果您使用 POST 方法 inf from 在登录表单中发送 JSON 加密数据，您可以使用类似于 actionLogin 方法的 $_POST['your_post_variable'] 在控制器中检索它（注意：确保您在表单操作中调用正确的方法）。

请分享登录表格。

问候，HBK

# android - 如何在代码中检查外部存储设备是否为只读

> ID：13523634
> 
> 赞同：1
> 
> 时间：2012-11-23T05:38:47.233
> 
> 标签：android, sd-card, readonly

在我的 android 应用程序中，我将一些文件写入 SD 卡。但是有一个条件，如果 SD 卡是只读的，那么我必须相应地更改屏幕设置。如果 SD 卡是只读的，如何在我的代码中检查它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:46:12.677

尝试使用[Environment.MEDIA_MOUNTED_READ_ONLY](http://developer.android.com/reference/android/os/Environment.html)作为：

```
String status = Environment.getExternalStorageState();
if (status.equalsIgnoreCase(Environment.MEDIA_MOUNTED)) {
    Toast.makeText(Activity.this, "SD MEDIA_MOUNTED", Toast.LENGTH_LONG).show();

} else if (status.equalsIgnoreCase(Environment.MEDIA_MOUNTED_READ_ONLY)) {
    Toast.makeText(Activity.this, "MEDIA_MOUNTED_READ_ONLY", 
          Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T07:24:38.053

还有更完整的答案...

```
String state = Environment.getExternalStorageState();
if (Environment.MEDIA_MOUNTED.equals(state)) {
    // We can read and write the media
    mExternalStorageAvailable = mExternalStorageWriteable = true;

}
else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    // We can only read the media
    mExternalStorageAvailable = true;
    mExternalStorageWriteable = false;
//    check_folder();
} else {
    // Something else is wrong. It may be one of many other states, but all we need
    //  to know is we can neither read nor write
    mExternalStorageAvailable = mExternalStorageWriteable = false;

} 
```

# objective-c - NSDictionary 到 NSArray 未转换（信号 SIGBRT）

> ID：13523635
> 
> 赞同：1
> 
> 时间：2012-11-23T05:38:58.320
> 
> 标签：objective-c, nsarray, nsdictionary

我有一个非常简单的 HTTP 查询，它运行并抓取另一个类中的一些 JSON 对象。我定义了一个名为 finalDataArray 的 NSDictionary 对象。我基本上是在尝试循环并将名称附加到表中，行数正在正确计算。finalDataArray.count

但是当我尝试这样做时，我在下面的第一行得到一个错误。

```
NSArray *contactArray = [finalDataArray allKeys];
NSLog(@"%@", contactArray); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:36:36.597

因为我是个新手，所以我没有意识到如果你有一个“多维” JSON 对象......它应该是 NSDictionary，但如果你有一个单一维度的对象......它应该是 NSArray 来解决我的问题。 ..

感谢所有的帮助。

# java - 通用集合 具有能力排序和按位置获取

> ID：13523639
> 
> 赞同：1
> 
> 时间：2012-11-23T05:39:23.317
> 
> 标签：java, android, generics, dictionary

我知道**ArrayList**提供在位置获取项目的能力`get(position)`，而**LinkedHashTable**提供排序，但它无法在位置获取项目。所以，问题：java中的任何通用集合是否具有以下特性：

*   排序

*   按位置获取

*   提供 Key/Value 泛型类型。

请给我列出功能的代码示例，如果需要通用存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T05:42:32.097

您在寻找[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)或[SortedMap](http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html)吗？

TreeMap 和 SortedMap 都提供：

1.  提供关键元素的自然排序。
2.  是键/值对
3.  获取基于 Key 的值。

顺便提一句：

**LinkedHashMap**只是维护一个插入顺序，它没有排序，它只是有一个订单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T05:56:06.913

我为之前过于复杂的事情道歉！

使用树形图。当你想

```
get(position) 
```

只需执行以下操作：

```
K key = treemap.getKeys().get(position)
V value = treemap.get(key); 
```

===========================

我以前的旧的过于复杂的错误答案：

您可以使用`ArrayList<Pair<K implements Comparable,V>>`您在`Pair<K,V>`K 上实现了 Comparable 的地方。然后你可以`Collections.sort(List<Pair<K,V>)`在 Arraylist 上使用。

然后您将维护 a`HashMap<K,V>`以便您可以按 K 检索元素。这意味着您必须记住更新两个数据结构。这意味着 O(N) 添加一个元素 :( 。此外，为了简化逻辑，您可以将 HashMap 和 ArrayList 包装在一个对象中。

```
public class Pair<K extends  Comparable<K>, V> implements Comparable {

    private final K first;

    private final V second;

    public Pair(K first, V second) {
        this.first = first;
        this.second = second;
    }

    public K getFirst() {
        return first;
    }

    public V getSecond() {
        return second;
    }

    public int compareTo(K other) ; // TODO
} 
```

# debugging - 在 Visual Studio（使用 PowerShell VSX）或 Powershell 脚本 IDE 中安装包期间调试 init.ps1 和 install.ps1

> ID：13523646
> 
> 赞同：2
> 
> 时间：2012-11-23T05:40:33.390
> 
> 标签：debugging, powershell, powergui

我的目标是在使用 Nuget powershell 控制台安装的 Visual Studio 2012 Nuget powershell 脚本和模块中进行调试。理想情况下，我想拦截在文件夹下运行这些 .ps1 脚本： \packages\MvcMembership \tools init.ps1 << 在解决方案级别仅运行一次 \net40 install.ps1 << 在安装期间为每个项目运行 uninstall.ps1

更多信息： [http ://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)

安装 Nuget 包时：例如 Install-Package MvcMembership 我相信第一件事是下载 .zip Nuget 包（例如 MvcMembership.nupkg）并将其解压缩到 \packages\ 文件夹中，然后有条件地执行 init.ps1（如果 MvcMembership 是已安装但未运行），然后为当前选定的项目运行 install.ps1。

那么如何拦截正在运行的 init.ps1 和 install.ps1，将其加载到 PowerGui Visual Studio 编辑器并在第一行（或 Powershell 脚本 IDE）中断？我是否需要在这些 .ps1 文件中添加一些内容，例如： Set-PSBreakpoint（这需要我提取 .nupkg 编辑 .ps1 脚本文件并再次重新压缩它们

谢谢拉德

# javascript - 选择使用哪个返回值

> ID：13523647
> 
> 赞同：1
> 
> 时间：2012-11-23T05:40:36.463
> 
> 标签：javascript

我正在看一些示例代码：

```
function iLoveCheese(){
    return { 
        'c': thenumber, 'd': anothernumber 
    }
} 
```

假设我想在程序中使用'thenumber'，我可以这样做：-

```
function lotsOfCheese(){
    var t = iLoveCheese();
    return t.thenumber;
} 
```

是正确的理解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:47:26.083

您的`lotsOfCheese`功能将无法正常工作。这是因为该`ILoveCheese`函数返回一个**对象**。您需要通过它的**keys**引用这个对象，而不是它的**values**。

```
function lotsOfCheese(){
  var t = iLoveCheese();
  return t.c; // "c" is the key of the object t
} 
```

这将返回一个值，`thenumber`

# ruby-on-rails - Rails 3.2：nested_attributes 和 has_one 关联，两种不同的形式

> ID：13523650
> 
> 赞同：1
> 
> 时间：2012-11-23T05:40:54.193
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, nested-attributes, form-for

我在 has_one 关联模型上使用accepts_nested_attributes_for。

我有两个模型，一个用户和一个配置文件。用户有一个配置文件：

```
class User < ActiveRecord::Base
  attr_accessible :name, :email,:profile_attributes
  has_one :profile
  accepts_nested_attributes_for :profile
end

class Profile < ActiveRecord::Base
  attr_accessible :avatar
  belongs_to :user
  mount_uploader :avatar, AvatarUploader
end 
```

我在编辑用户页面上有两个表单。一个更新主要用户属性（并且工作正常，下面未显示），然后是允许用户上传头像的一个：

```
<%= form_for @user, :html => {id: 'avatar_form' ,:multipart => true } do |f| %>
  <%= f.fields_for :profile do |builder| %>
  <%= builder.file_field :avatar %>
  <% end %>
  <%= f.submit %>
<% end %> 
```

此提交不起作用，我收到此错误消息：

**用户控制器中的 NoMethodError#update**

**nil:NilClass 的未定义方法“名称”**

我的 UsersController 更新代码是：

```
def update
  @user = current_user
  if @user.update_attributes(params[:user])
    redirect_to home_path
  else
    render 'edit'
  end
end 
```

参数是：

```
{"utf8"=>"✓",
"_method"=>"put",
"authenticity_token"=>"YTpGnj9uIpybDAgf4c6pxMydY15ga5GZ++FBMe/6dV4=",
"user"=>{"profile_attributes"=>{"avatar"=>#<ActionDispatch::Http::UploadedFile:0x2303e08 @original_filename="test.jpg",
@content_type="image/jpeg",
@headers="Content-Disposition: form-data; name=\"user[profile_attributes][avatar]\";  filename=\"test.jpg\"\r\nContent-Type: image/jpeg\r\n",
"id"=>"3"}},
"commit"=>"Upload",
"id"=>"1"} 
```

任何帮助，将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T08:14:11.450

@Andrey关于has_one关系，@user.profile.build不起作用，需要选择下面，@user.build_profile有人告诉我如下：“如果使用has_one定义关联，我们使用“build_association”函数。对于 has_many，它应该是“association.build”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T06:40:05.750

添加到您的用户控制器

```
def new
  @user = User.new
  @user.profile.build
  #or
  #@user.build_profile

end 
```

为了更好地了解正在发生的事情，请尝试将 gem "better_errors" 添加到您的 Gemfile

```
gem "better_errors" 
```

您将获得一种控制台，您可以在其中键入

```
@user 
```

作为输出，您将得到（nil 或 obj）。如果为零，您肯定会在新动作中伪造这条线

```
@user = User.new 
```

如果您将 divise 用于自动。支持，重写控制器，如这里 [覆盖设计注册控制器](https://stackoverflow.com/questions/3546289/override-devise-registrations-controller)

# python - Python中奇怪的多个返回值

> ID：13523652
> 
> 赞同：1
> 
> 时间：2012-11-23T05:41:08.917
> 
> 标签：python

刚接触 Python 5 天，通过 Code Academy 学习。我对任何其他语言一无所知（对 Ruby 知之甚少！）。

我对这段代码做错了什么？

* * *

> 问：写一个函数，`by_three`调用第二个函数，`cube`如果一个数能被 3 整除，`"False"`否则。然后，您应该返回从中获得的结果`cube`。至于`cube`，该函数应该返回从传递的数字的立方体`by_three`。（乘以一个数字与将其提高到三次方相同）。
> 
> 因此，例如，`by_three`应该取 9，确定它可以被 3 整除，然后将其传递给立方体，它返回 729（9**3 的结果）。但是，如果`by_three`得到 4，它应该返回`False`并保留它。
> 
> 最后，`by_three`在三个单独的线路上分别拨打 11、12 和 13。

回答：

```
def by_three(n):
    orig_num = n
    if (isinstance(orig_num, int) and orig_num%3 == 0 ):
        cube(orig_num)
    else:
        print "False"

def cube(orig_num):
    cube = orig_num**3
    print cube
    return

by_three(11)
by_three(12)
by_three(13) 
```

当我运行上面的代码时，这就是我得到的。为什么这些值会以这种方式出现？

```
False
1728
False
==> None
False
False
1728
Oops, try again. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:53:07.417

我不能说为什么你会看到奇怪的结果。当我将您的代码复制到解释器中时，我看到：

```
>>> def by_three(n):
...     orig_num = n
...     if (isinstance(orig_num, int) and orig_num%3 == 0 ):
...         cube(orig_num)
...     else:
...         print "False"
... 
>>> def cube(orig_num):
...     cube = orig_num**3
...     print cube
...     return
... 
>>> by_three(11)
False
>>> by_three(12)
1728
>>> by_three(13)
False 
```

不过，我认为这个问题比你做的要简单得多。很难说，因为这个问题写得不好，但这将是我的答案：

```
def by_three(n): return False if n % 3 else cube(n)

def cube(n): return n**3

by_three(11)
by_three(12)
by_three(13) 
```

这就是它在解释器中的样子：

```
>>> def by_three(n): return False if n % 3 else cube(n)
... 
>>> def cube(n): return n**3
... 
>>> by_three(11)
False
>>> by_three(12)
1728
>>> by_three(13)
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:54:17.777

首先，您需要更改`cube`函数以实际返回`cube`. 您甚至可以`cube`通过仅返回`cube`而不存储临时结果来简化您的方法：-

```
def cube(orig_num):
    return orig_num**3   # Just return the cube 
```

然后在你的`by_three`函数中，而不是打印“False”，你应该返回它。另外，返回`value`函数返回`cube`：-

```
def by_three(n):
    if (isinstance(n, int) and n % 3 == 0):
        return cube(n)  # Added return here
    else:
        return False  #Changed print to return. 
```

您还可以将此方法简化为仅`single`行返回语句。如果你在你的传递一个值，你应该使用`try-except`块而不是检查实例： -`isinstance``function`

```
def by_three(n):
    try:
        return cube(n) if n % 3 == 0 else False
    except TypeError, e:
        return False 
```

然后，当您调用该方法时，打印获得的结果：-

```
print by_three(11)
print by_three(12)
print by_three(13) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:57:40.573

在您的`cube`方法中，您实际上并没有*返回*任何东西。与返回块中最后一条语句的 Ruby 不同，您必须明确声明要返回的内容。也没有必要创建价值的防御性副本。此外，您不能重用 name `cube`，否则会破坏您的方法定义。

```
def cube(orig_num):
    return orig_num ** 3 
```

接下来，您必须在调用者方法中返回值。我将把它作为练习留给你——从这里弄清楚应该不会太棘手。

第三，如果数字是整数还是浮点数，您（有点）不必担心。虽然浮点数存在不精确性，但这些值不应完全被 3 整除。

# php - 无法清除 IE8/9 中的 cookie，但适用于 Firefox 和 Chrome

> ID：13523658
> 
> 赞同：1
> 
> 时间：2012-11-23T05:42:18.190
> 
> 标签：php, internet-explorer

我有以下代码来检查会话是否存在以及是否未创建。

```
 session_start(); 
     $loginExists='';
     $show=1;

     if(isset($_SESSION['username'])){
            $loginExists = '<div style="color:#006633; font-family: calibri, Times, serif;  font-size:1.3em; font-weight:bold; margin-left:4%; margin-top:2%;">You  are already logged in!</div>';
            $show = 0;  
        }

     elseif (!isset($_SESSION['username'])){
        if (isset($_COOKIE['username'])){   
            $_SESSION['username'] = $_COOKIE['username'];
            $loginExists = '<div style="color:#006633; font-family: calibri, Times, serif;  font-size:1.3em; font-weight:bold; margin-left:4%; margin-top:2%;">You  are already logged in!</div>';
            $show = 0;} 
```

cookie 的设置方式如下：

```
setcookie('username',$row['username'],time() + 10*24*3600,"/mysite/",""); 
```

我的问题是当我在 IE8/9 中清除 cookie 时，它​​无法清除 cookie。我仍然可以导航到我的添加表单。在 Firefox 或 Chrome 中不是问题。

我试图通过转到 Internet 选项 > 删除（浏览历史记录）> 检查 Cookie 来删除 cookie 并将其删除。

非常困惑的atm。

编辑：

添加表单（如何检查会话）：

```
if (!isset($_SESSION['username'])){
            if (isset($_COOKIE['username'])){   
                $_SESSION['username'] = $_COOKIE['username'];

            }
        else{   
                $_SESSION['addForm'] = 1;
                header("Location:loginForm.php");   
            } 
```

因此，您可以看到 cookie 是否通过浏览器被清除，它应该重定向到登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:50:14.043

（根据上面的评论发布完整的答案）

给 IE 的小贴士。关闭它。转到控制面板，找到互联网设置并从那里清除 cookie（和文件，如果需要）。然后重新打开IE。请注意，如果您将其保持打开状态并点击刷新，它仍会发送以前的 cookie - 将其关闭可以解决此问题。

问：这是 IE 的一个怪癖吗？

它似乎是 - 我认为 IE 在内部加载了一些缓存的文件和 cookie，并且清除这些文件不会将它们从内存中删除。因此，如果您遇到这种行为，请关闭以从内存中删除，然后清除文件并重新打开。

这也是 Fiddler（调试器）中的一个“陷阱”，如果您从 Fiddler 中点击“无条件重新发送”，它会重新发送先前的查询，包括 cookie，即使这些 cookie 随后被删除。老实说，这是我所期望的，所以我并不是说这是一个错误。请注意，您需要监视正在发送的内容，因为在调试应用程序时它可能并不总是您所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:44:49.577

设置会话后，您是否尝试从 PHP 设置 cookie 的到期时间？

# uikit - 如何设置 ipad 的表格宽度？

> ID：13523665
> 
> 赞同：1
> 
> 时间：2012-11-23T05:43:13.497
> 
> 标签：uikit, ios6

我之前有一个 iphone 的表格列表：

```
@interface ListViewController : UITableViewController{
@end 
```

而且我打算迁移到ipad target，但是宽度还是320，如何改变ListViewController的宽度？

# c++ - c++ 如何指向数组的成员

> ID：13523670
> 
> 赞同：1
> 
> 时间：2012-11-23T05:44:12.803
> 
> 标签：c++, arrays, pointers, variable-assignment

想知道如何将指针分配给数组成员：

```
struct foo {
    int INT;
}

int main() {
    foo bar[10];
    foo *baz;
    baz = bar[5];
} 
```

这不起作用，但我想知道会发生什么。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T05:45:11.173

你想做的`baz = &bar[5];`。`bar[5]`引用第 6 个`foo`对象实例本身，因此只需将地址（带`&`运算符）分配给指针，与任何其他情况相同；

或者，您也可以这样做，`baz = (bar + 5);`因为这里`bar`不使用数字是指向第一个元素的指针，+5 给出第 6 个元素。

# php - 文件不包含且需要

> ID：13523672
> 
> 赞同：-2
> 
> 时间：2012-11-23T05:44:28.040
> 
> 标签：php

我在我的 php 文档中包含一个文件，但在本地端和服务器端它不包括我使用 require 但它也无法正常工作并且屏幕上显示错误.. 我检查了路径 100 次它是正确的。错误是这样的：

`Warning: require(../library/config.php) [function.require]: failed to open stream: No such file or directory in /home/logics/public_html/clients/creativecellutions/farnelo/files/header.php on line 3`

`Warning: require(../library/config.php) [function.require]: failed to open stream: No such file or directory in /home/logics/public_html/clients/creativecellutions/farnelo/files/header.php on line 3`

`Fatal error: require() [function.require]: Failed opening required '../library/config.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/logics/public_html/clients/creativecellutions/farnelo/files/header.php on line 3`

请帮我解决这个问题。

这是我的代码：

```
<?php 
require ("../library/config.php");
require ("../library/functions.php");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:49:23.803

```
 require(../library/config.php) 
```

指向目录中的错误位置。获取 config.php 相对于该脚本正在调用的文件的位置的位置。那应该可以解决错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:57:26.813

您的代码将尝试包含位于

`/home/logics/public_html/clients/creativecellutions/farnelo/library/config.php`

你确定这是文件的当前位置吗？

如果是，那么唯一可能的问题是您没有使用 php 读取文件的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:00:32.233

我猜您没有直接运行`clients/creativecellutions/farnelo/files/header.php`并将其包含在其他文件`index.php`或其他文件中，这可能就是问题所在。尝试使用相对路径`require_once( dirname(__FILE__) . '/../library/config.php' );`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T06:37:48.823

尝试使用 getcwd() 函数。

那是

```
include(getcwd()."path to config.php"); 
```

# jquery - 为什么移动页面在加载时闪烁 - 使用 jquerymobile

> ID：13523674
> 
> 赞同：1
> 
> 时间：2012-11-23T05:44:33.513
> 
> 标签：jquery, jquery-mobile

我正在使用 jquerymobile 制作一个应用程序。我的页面加载时总是出现闪烁效果。例如，我在页面上有一个自定义字体，在自定义字体加载之前全部加载，再次，全部刷新，我正在取回所有元素。

为了实验，我做了隐藏身体的功能。

```
$(document).bind('pageinit', function() {
    $('body').hide();
}) 
```

但是在加载页面时，我仍然可以看到视频（在视频之后加载的某些时间内容），并且“正文”隐藏了这个。这意味着，我明白，甚至在我的函数调用（如上所述）之前，页面开始加载，所以延迟一秒钟后我的函数可以工作。看到页面很烦人。我正在使用 HTML5 移动样板。但是当我删除移动 jquery 时一切都很好。

如何解决这个问题？我这边有什么问题？

我的 js 链接顺序（在正文结束标记之前）：

```
 <script src="js/vendor/zepto.min.js"></script>
        <script src="js/helper.js"></script>
        <script src="js/jquery-1.8.2.min.js"></script>
        <script src="js/main.js"></script>
        <script src="js/jquery.mobile-1.2.0.min.js"></script> 
```

# javascript - 如何在android phonegap中将Json对象从js传递到java？

> ID：13523675
> 
> 赞同：2
> 
> 时间：2012-11-23T05:44:38.513
> 
> 标签：javascript, android, cordova, phonegap-plugins

我相信有一种方法可以使用 phonegap 插件将 json 对象从 JS 传递到 java。如果有人知道，请帮助我。提前谢谢朋友们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:49:50.857

像这样创建一个java类

```
public class MyJavaScriptInterface 
{

    Activity parentActivity;
    MyJavaScriptInterface(Activity activity){
             parentActivity = activity;
    }

    public void processData(String jsonString){
        /* your processing logic */

    } 
```

在你的活动中

```
MyWebView.addJavascriptInterface(new MyJavaScriptInterface(this), "MyHandler");

in your html page 

<a href="#" data-transition="slide" onClick="window.MyHandler.processData("+jsonString+")">

Change this with your page code (html Page) 
```

# jquery - 如何获取 jquery 加载功能的 URL 中提供的参数？

> ID：13523677
> 
> 赞同：2
> 
> 时间：2012-11-23T05:45:02.987
> 
> 标签：jquery, load

我正在使用 JQuery 加载功能将一个页面的内容加载到另一个页面中。我的主页 (index.html) 有一个 id 为“abcd”的 div 标签。我需要将另一个页面（page1.html）的内容加载到指定的 div 标记中。所以，我写了以下代码： -

```
$('#abcd').load('page1.html?title=xyz','',function(){}) 
```

请注意，我还传递了参数“title=xyz”以及要加载的页面的 URL。我需要获取此参数并在 page1.html 内容中使用它。如何在 page1.html 页面中获取这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:53:06.113

定义一个全局变量，例如

```
<script>
var title =t'xyz'

$('#abcd').load('page1.html?title='+title,'',function(){})

</script> 
```

您可以`title`在 page1.html 加载后访问变量

另一方面，如果您想更改 page1.html 的内容，可能无法使用 html 执行此操作，但仍然可以使用 js hacks 来完成

如果您在 page1.html 中提供您希望如何使用标题，我可以提供更多帮助

# iis - IIS 7 / 纯 ASP 文件上传问题

> ID：13523678
> 
> 赞同：3
> 
> 时间：2012-11-23T05:45:09.100
> 
> 标签：iis, iis-7, asp-classic, vb6, vbscript

```
I have the following assets-
1\. IIS Server 7.0
2\. VBScript 5.0
3\. Windows Server 2008
4\. ADO 6.0 
```

服务器的上传限制为 - 1037408412 字节。
服务器的请求超时持续时间为 - 3600 秒（约 1 小时）。

而且我无法将文件从浏览器上传到服务器。我可以使用文件系统对象来读取和写入文件，但我无法使用任何东西获取上传的文件。我什至不能使用 Request.ReadBinary 方法。当我打印 Request.TotalBytes 时，它显示 0。服务器显示的唯一错误消息是 -

> 处理 URL 时服务器发生错误。请联系系统管理员。如果您是系统管理员，请单击此处了解有关此错误的更多信息。

谁能解释我有什么问题？
谁能
告诉我通过纯 asp 上传文件的任何方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:08:02.987

我们在这里运行经典 ASP，老实说，我可以根据经验告诉您，尝试在经典 ASP 中执行此操作是一个巨大的痛苦。如果可能，请帮自己一个忙，即使您不想将所有代码迁移到 ASP.net，您至少应该将 ASP.net 用于需要上传的页面。

我们网站的很大一部分是用经典的 ASP 编写的，所以我不愿意有一个使用 ASP.net 的奇怪页面，但老实说，从我个人的经验来看，这是最好的解决方案。

如果您绝对打算使用经典的 ASP，那么基本上有两种方法可以做到这一点。您可以使用专门构建的 COM 对象，例如[AspUpload](http://www.aspupload.com/)或[SA-FileUp](http://fileup.softartisans.com/)（虽然我不确定 SA-FileUp 是否适用于 ASP 经典）。另一种方法是使用原生 ASP 代码，我可以从中找到一些示例；[FreeASPUpload](http://www.freeaspupload.net/)、[ASP Uploader](http://aspuploader.com/)或[Pure ASP File Upload](http://www.codeguru.com/csharp/.net/net_asp/article.php/c19297/Pure-ASP-File-Upload.htm)（后者是我几年前看到这个问题时偶然发现的。

所以总而言之，看起来有一些选项浮动，但无论出于何种原因，我记得几年前我们做同样的事情时，我最终对纯 ASP 解决方案不满意，硬着头皮写了一个 ASP。处理上传的网页。

# c# - 实体框架空对象

> ID：13523681
> 
> 赞同：7
> 
> 时间：2012-11-23T05:45:23.013
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个名为 OdeToFoodDb 的简单 DBcontext 类：

```
public class OdeToFoodDb: DbContext
{
    public DbSet<Restaurant> Restaurants { get; set; }
    public DbSet<Review> Reviews { get; set; }

    protected override void OnModelCreating(System.Data.Entity.DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Restaurant>()
            .HasMany(resturant => resturant.Reviews)
            .WithRequired(review => review.Resturant);
        base.OnModelCreating(modelBuilder);
    }
} 
```

和类定义：

```
public class Restaurant
{
    //public virtual int ID { get; set; }
    public virtual int RestaurantId { get; set; }
    public virtual string Name { get; set; }
    public virtual Address Address { get; set; }
    public virtual IList<Review> Reviews { get; set; }
}

public class Review : IValidatableObject
{
    public int ReviewId { get; set; }

    [DisplayName("Digning Date")]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    [DataType(DataType.Date)]
    public DateTime Created { get; set; }

    [Range(1, 10)]
    public int Rating { get; set; }

    [Required]
    [DataType(DataType.MultilineText)]
    public string Body { get; set; }
    public int RestaurantId { get; set; }
    public Restaurant Resturant { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        var fields = new[]{ "Created"};

        if(Created > DateTime.Now)
        {
            yield return new ValidationResult("Created date cannot be in the future.", fields);
        }

        if (Created < DateTime.Now.AddYears(-1))
        {
            yield return new ValidationResult("Created date cannot be to far in the past.", fields);
        }
    }
} 
```

我的问题是当我从 dbcontext 中选择这样的评论时：

```
 OdeToFoodDb _db = new OdeToFoodDb();
    public PartialViewResult LatestReview()
    {
        var review = _db.Reviews.FindTheLatest(1).Single();
        //************************************
        return PartialView("_Review", review);
    } 
```

我检查了review.Restaurant 是空的！而另一个属性有一个值。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T06:06:10.273

`Restaurant`通过`Include`方法显式加载导航属性：

```
var review = _db.Reviews.Include(r => r.Restaurant).FindTheLatest(1).Single(); 
```

或者您可以通过将其设为虚拟来启用该属性的延迟加载：

```
public virtual Restaurant Restaurant { get; set; } 
```

[您可以在此处](http://msdn.microsoft.com/en-us/data/jj574232)阅读有关加载相关实体的更多信息。

# php - 投资组合的php文件得到错误的回报？

> ID：13523684
> 
> 赞同：1
> 
> 时间：2012-11-23T05:45:41.287
> 
> 标签：php

我在 php 上不太好，我已经购买了启示主题，并得到了两个投资组合的错误代码（一列 Galleri 正在工作，但不是两三列）和 Galleri，似乎是同一个问题，不能从主题获得支持请参阅以下链接和附件

[http://anweb-design.se/marco/?page_id=74](http://anweb-design.se/marco/?page_id=74)

非常感谢一些帮助，谢谢

这是**theme-thumbnails-resize.php**

```
<?php

/*

 * Resize images dynamically using wp built in functions

 * Victor Teixeira

 *

 * php 5.2+

 *

 * Exemplo de uso:

 * 

 * <?php 

 * $thumb = get_post_thumbnail_id(); 

 * $image = vt_resize( $thumb, '', 140, 110, true );

 * ?>

 * <img src="<?php echo $image[url]; ?>" width="<?php echo $image[width]; ?>" height="<?php echo $image[height]; ?>" />

 *

 * @param int $attach_id

 * @param string $img_url

 * @param int $width

 * @param int $height

 * @param bool $crop

 * @return array

 */

function celta_resize( $attach_id = null, $img_url = null, $width, $height, $crop = false ) {

    // this is an attachment, so we have the ID

    if ( $attach_id ) {

        $image_src = wp_get_attachment_image_src( $attach_id, 'full' );

        $file_path = get_attached_file( $attach_id );

    // this is not an attachment, let's use the image url

    } else if ( $img_url ) {

        $file_path = parse_url( $img_url );

        $file_path = $_SERVER['DOCUMENT_ROOT'] . $file_path['path'];

        //$file_path = ltrim( $file_path['path'], '/' );

        //$file_path = rtrim( ABSPATH, '/' ).$file_path['path'];

        $orig_size = getimagesize( $file_path );

        $image_src[0] = $img_url;

        $image_src[1] = $orig_size[0];

        $image_src[2] = $orig_size[1];

    }

    $file_info = pathinfo( $file_path );

    $extension = '.'. $file_info['extension'];

    // the image path without the extension

    $no_ext_path = $file_info['dirname'].'/'.$file_info['filename'];

    $cropped_img_path = $no_ext_path.'-'.$width.'x'.$height.$extension;

    // checking if the file size is larger than the target size

    // if it is smaller or the same size, stop right here and return

    if ( $image_src[1] > $width || $image_src[2] > $height ) {

        // the file is larger, check if the resized version already exists (for $crop = true but will also work for $crop = false if the sizes match)

        if ( file_exists( $cropped_img_path ) ) {

            $cropped_img_url = str_replace( basename( $image_src[0] ), basename( $cropped_img_path ), $image_src[0] );

            $vt_image = array (

                'url' => $cropped_img_url,

                'width' => $width,

                'height' => $height

            );

            return $vt_image;

        }

        // $crop = false

        if ( $crop == false ) {

            // calculate the size proportionaly

            $proportional_size = wp_constrain_dimensions( $image_src[1], $image_src[2], $width, $height );

            $resized_img_path = $no_ext_path.'-'.$proportional_size[0].'x'.$proportional_size[1].$extension;            

            // checking if the file already exists

            if ( file_exists( $resized_img_path ) ) {

                $resized_img_url = str_replace( basename( $image_src[0] ), basename( $resized_img_path ), $image_src[0] );

                $vt_image = array (

                    'url' => $resized_img_url,

                    'width' => $proportional_size[0],

                    'height' => $proportional_size[1]

                );

                return $vt_image;

            }

        }

        // no cache files - let's finally resize it

        $new_img_path = image_resize( $file_path, $width, $height, $crop );

        $new_img_size = getimagesize( $new_img_path );

        $new_img = str_replace( basename( $image_src[0] ), basename( $new_img_path ), $image_src[0] );

        // resized output

        $vt_image = array (

            'url' => $new_img,

            'width' => $new_img_size[0],

            'height' => $new_img_size[1]

        );

        return $vt_image;

    }

    // default output - without resizing

    $vt_image = array (

        'url' => $image_src[0],

        'width' => $image_src[1],

        'height' => $image_src[2]

    );

    return $vt_image;

}

?> 
```

# httpconnection - 如何从 HttpComponents 中的现有 ConnectionPool 中获取 HttpRoute List - 4.2.2 API

> ID：13523685
> 
> 赞同：2
> 
> 时间：2012-11-23T05:45:45.077
> 
> 标签：httpconnection, apache-httpcomponents

我在我的 Web 应用程序中使用 HttpComponents 4.2.2 库进行 Http 通信。HttpClient 用作单例， PoolingClientConnectionManager 作为其连接管理器。客户端可以通过提供主机和端口将连接初始化为 PoolingClientConnectionManager 中的 HttpRoute。这个想法是，如果客户端需要，它可以将多个 HttpRoute(s) 添加到连接池并为这些路由初始化连接（受 MaxConnectionsPerRoute 和 TotalMaxConnections 设置的限制）。

现在我的问题是，当我收到在连接池中添加路由的请求时，我如何从连接池/httpclient api 中确定，如果连接池中已经存在为该路由初始化的连接？

一种解决方法是维护已经单独初始化的路由列表/映射以进行交叉检查或查找，但我正在寻找一个 httpcomponents api 支持来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:41:21.117

您是否尝试过 PoolingClientConnectionManager#getStats(HttpRoute)？

[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/PoolingClientConnectionManager.html#getStats%28org.apache.http.conn.routing.HttpRoute%29](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/PoolingClientConnectionManager.html#getStats%28org.apache.http.conn.routing.HttpRoute%29)

# ruby-on-rails - 我应该如何让 webrat 测试 textarea 的内容

> ID：13523696
> 
> 赞同：0
> 
> 时间：2012-11-23T05:46:26.697
> 
> 标签：ruby-on-rails, capybara, webrat

我正在尝试制定正确的语法，让 webrat 检查表单中文本区域的内容。

我可以检查文本区域的存在

```
response.should have_selector('textarea') 
```

但该`contains`方法似乎只检查响应中的可见文本。有检查文本区域内容的 capybara 方法，但我正在研究 Capybara 的大量现有规范，这些规范似乎都在 WebRat 中，当我尝试使用像 have_field 这样的 Capybara 方法时，我不断得到以下信息错误：

```
RSpec::Expectations::ExpectationNotMetError Exception: expected field "textarea" to return something 
```

我找到了执行以下操作的示例：

```
response.should have_selector('textarea', :content => 'blah') 
```

但奇怪的是，这会导致调试器继续运行，我还没有能够有效地测试它作为解决方案。

非常感谢有关正确方法的任何提示或建议

这是我在调试器中测试的堆栈跟踪

```
(rdb:1) p response.should have_selector('textarea#article_body_and_extended', :content =>  text)
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/interface.rb:70:in `printf'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/interface.rb:70:in `print'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:375:in `print'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/command.rb:165:in `print'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/command.rb:183:in `rescue in debug_eval'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/command.rb:173:in `debug_eval'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/commands/eval.rb:47:in `block in execute'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/commands/eval.rb:19:in `run_with_binding'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/commands/eval.rb:46:in `execute'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:275:in `one_cmd'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:261:in `block (2 levels) in process_commands'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:260:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:260:in `block in process_commands'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:253:in `catch'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:253:in `process_commands'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:173:in `at_line'
(eval):5:in `block in at_line'
<internal:prelude>:10:in `synchronize'
(eval):3:in `at_line'
/usr/local/lib/ruby/gems/1.9.1/gems/ruby-debug-base19-0.11.25/lib/ruby-debug-base.rb:55:in `at_line'
/home/ubuntu/Documents/hw5/typo/spec/controllers/admin/content_controller_spec.rb:509:in `block (4 levels) in <top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:113:in `instance_eval'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:113:in `block in run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:253:in `with_around_each_hooks'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:110:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:378:in `block in run_examples'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:374:in `map'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:374:in `run_examples'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:360:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:361:in `block in run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:361:in `map'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:361:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:361:in `block in run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:361:in `map'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:361:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:28:in `block (2 levels) in run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:28:in `map'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:28:in `block in run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/reporter.rb:34:in `report'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:25:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `block in autorun'F 
```

然后调试器继续，检查失败：

```
 text = @article.body + @article_for_merging.body + "\n&lt;<!--more-->&gt;\n" +@article.extended
    debugger
    response.should have_selector('textarea#article_body_and_extended', :content =>  text) 
```

即使当我在响应正文上执行正则表达式时，我也会得到匹配

```
(rdb:1) p text
"A content with several datasomething we will merge&lt;<!--more-->&gt;extended content for fun"
(rdb:1) p response.body =~ text
TypeError Exception: type mismatch: String given
(rdb:1) p response.body =~ /text/
218 
```

我真正想要的是一种将文本区域的实际内容拉出的方法......虽然我觉得我应该编写模型规范而不是控制器规范......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:03:14.757

所以我有点放弃了这个工作。我想我找到了正确的语法：

```
response.should have_selector('textarea', :name => "article[body_and_extended]",:content =>  text) 
```

我已将文本设置为预期内容。我花了一个小时检查我是否准确地拥有文本区域中的文本，但无法使其工作 - 可能是编码问题或其他问题。然而起作用的是：

```
 text = @article.body + @article_for_merging.body + "\n&lt;!--more--&gt;\n" +@article.extended+@article_for_merging.extended
    position = response.body =~ /#{Regexp.quote(text)}/
    position.should_not be_nil 
```

所以我很想继续前进，稍后再谈……

# qt - 如何在 QML 中为 ListView 项目设置备用颜色

> ID：13523701
> 
> 赞同：16
> 
> 时间：2012-11-23T05:47:04.657
> 
> 标签：qt, qml

是否可以为 QML 中的备用 ListView 项目分配 2 种颜色？我想将第一个列表项着色为黑色，然后将第二个列表项着色为蓝色，然后将第三个项目着色为黑色，然后将第四个项目着色为蓝色，依此类推......

如何在qml中实现这个东西？请分享你的想法。谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-23T07:23:04.583

您可以使用委托的**index**属性来确定此委托元素是偶数还是奇数，并使用它来更改委托的颜色。

```
ListView {
  anchors.fill: parent
  model: 3

  delegate:
    Rectangle {
        width: 20
        height: 30
        color: index % 2 == 0 ? "blue" : "black"
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T17:09:51.313

我在我的代码中尝试了类似以下的内容。因为我需要在代码的不同位置使用相同的样式。所以我只是创建了一个函数。

```
 ListView {
      anchors.fill: parent
      model: 3

      delegate:
        Item{
           function altColor(i) {
              var colors = [ "#E4DDE8", "#00000000" ];
              return colors[i];
           }
           Rectangle {
              width: 20
              height: 30
              color: altColor(index % 2)
           }
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T16:14:25.993

我建议你使用“model.index”——它完全一样，但是让你的代码更容易理解。顺便说一句，正因为如此

> var 颜色 = [ "#E4DDE8", "#00000000" ];

每次调用“altColor”时，都会创建新数组。非常低效。将数组声明移动到列表视图：

```
property var colors: ["#E4DDE8", "#00000000"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-09T14:51:33.600

尽管问题已经得到解答，但您仍然可以为 Listmodel 定义一个保持颜色的属性

```
ListModel {
    id: fruitModel

    ListElement {
        name: "Apple"
        cost: 2.45
        elementColor: "red"
    }
    ListElement {
        name: "Orange"
        cost: 2.45
        elementColor: "black"
    }
    ListElement {
        name: "Banana"
        cost: 2.45
        elementColor: "gray"
    }
} 
```

并将其显示在委托中：

```
Rectangle{
    anchors.fillIn:parent
    color: elementColor
} 
```

# java - 从哪里开始学习 Java EE 或用 Java 制作 Web 服务

> ID：13523702
> 
> 赞同：0
> 
> 时间：2012-11-23T05:47:12.470
> 
> 标签：java, web-services, jakarta-ee, jax-rpc

我曾经做过android和核心java编程。但现在我有了使用 Java EE、JAX-RPC 制作 Web 服务的项目。我正在寻找 2-3 天，但我找不到我应该从哪里开始学习这项技术。Java EE 被称为高级 Java，我对此一无所知。如何在 net beans 中对其进行编码。

请建议我一些链接、pdf 或视频教程，并告诉我从哪里可以学习这项技术并能够编写良好的 Web 服务，以及我还需要学习哪些技术来编写 Java 中的 Web 服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T05:54:57.503

所以现在您关心的是 Java EE 中的 Web 编程。我建议你从基本的 Java EE Web 技术开始学习，这些技术是
**Servlets**
**JSP**
**JSTL**
**Web Services**
然后学习不同的框架，其中最推荐的是

**JSF**最新是 2.0
**Spring**最新是 3.0
**EJB** 3.0
**Hibernate**用于 DB 交互和 ORM

*请记住*，您关心的只是 Web 编程，但我提到的技术并不是 Java EE 的启动。**Java EE**拥有非常广阔的领域，其中还包含套接字、RMI、JMS、设计模式等，
请关注[这本书](http://books.google.com.pk/books/about/J2Ee_The_Complete_Reference.html?id=9xk_Qq4rf_gC&redir_esc=y)，因为它是一本好书。[在这里您可以找到很多关于 Java EE 的书籍，](http://www.goodreads.com/shelf/show/j2ee)我也希望您查看[这些教程](http://docs.oracle.com/javaee/5/tutorial/doc/)和[这些](http://www.roseindia.net/programming-tutorial/J2EE-Tutorials)教程。
对于 JSF，我建议您使用这些教程[1](http://www.vogella.com/articles/JavaServerFaces/article.html)、[2](http://www.mkyong.com/tutorials/jsf-2-0-tutorials/)
对于 spring [1](http://www.dzone.com/tutorials/java/spring/spring-tutorial/spring-tutorial.html)，[2](http://www.tutorialspoint.com/spring/index.htm)和[EJB](http://www.roseindia.net/ejb/)和[hibernate](http://www.dzone.com/tutorials/java/hibernate/hibernate-tutorial/hibernate-tutorial.html)。
你可以在谷歌上找到所有这些非常好的书籍
**因为你是 StackOverFlow 的新手，所以我想告诉你，在提出问题之前请做一些努力。有时，你一直在问非常简单的问题，而这些问题的答案很容易获得在谷歌上。这就是为什么你得到社区如此反对的原因。
祝你好运**

# java - 在 talend 中创建文件/输出源

> ID：13523705
> 
> 赞同：0
> 
> 时间：2012-11-23T05:47:48.880
> 
> 标签：java, talend

我有一个像

```
 tJava --> tFileOutputXML 
```

我工作中的组成部分。当我的条件满足时，我需要关闭那个 xml 并且必须创建一个新的 xml 源。这在 talend 中可能吗？

我将尝试用一个例子来解释我的问题。在我的数据中，我有 10 条记录，其中 8 条记录是关于 user1 的，2 条记录是关于 user2 的。因此，现在必须在 user1.xml 中放置 8 条记录，在 user2.xml 中放置 2 条记录。在这里，数据中的记录数和用户数可能会随着时间的推移而增加。我需要创建具有关联用户数据的许多文件..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:17:05.303

如果您的源数据在文件中：

1.  使用 tAggregateRow 组件，获取不同的用户名。
2.  使用 tFlowToIterate 组件迭代每个用户名：
3.  使用 Iterate 链接连接到 tJava 组件。
4.  使用 tjava 组件将用户名分配给上下文变量。例如。如果聚合组件的输出行是 row1，则 context.username=row1.username。
5.  使用“OnComponentOk”将 tJava 连接到文件组件以读取文件中的数据。
6.  使用 tmap 或 tFilterRow 过滤记录以获取用户名的值，即 context.username
7.  将数据写入文件。将文件名指定为“\”+context.username。

如果您的源数据在表中：

1.  从表中选择不同的用户名。
2.  使用 tFlowToIterate 迭代每个用户名。（使用主链接将表格组件连接到该组件）
3.  使用 Iterate 链接连接到 tJava 组件。
4.  使用 tjava 组件将用户名分配给上下文变量。例如。如果表组件的输出行是 row1，则 context.username=row1.username。
5.  使用 'OnComponentOk' 将 tJava 连接到表组件，以根据 where 条件从表中选择数据：username='"+context variable+"'
6.  将数据写入文件。将文件名指定为“\”+context.username。

# lua - 为什么表构造函数被视为“表达式”？

> ID：13523707
> 
> 赞同：0
> 
> 时间：2012-11-23T05:47:53.263
> 
> 标签：lua

从表面上看，变量赋值和表构造函数似乎做了类似的事情。那么为什么表构造函数被认为是“表达式”而变量赋值被认为是“语句”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T06:03:50.933

[表构造函数](http://www.lua.org/pil/3.6.html)评估为表¹

表构造函数中的“赋值”（`=`符号）仅仅是用于初始化表中字段的语法——它们*不是*变量赋值。语法看起来与 相似`=`，但这只是表面上的相似：不要混淆这两种*不同*的语法结构。

考虑如果 Lua 使用与 JavaScript 相同的语法，那么它将是

```
t = {x: 2}   -- invalid syntax, for argument 
```

并且“清楚”`x: 2`不是变量赋值而是字段初始值*设定项。*当然，Lua 语法规定它写为`t = {x = 2}`，但区分的想法是成立的。有两种*不同*的构造，`{x = 2}`表构造器*不会*导致副作用或变量赋值。

* * *

¹如果不能分配表以供以后使用，那将没有多大意义！由于只有表达式可以出现在赋值的右侧，因此表构造函数必须是表达式，因此结果表（它们是值）可以分配给变量（或传递给函数等）。

另请注意，Lua[对（赋值）语句和表达式的分离](http://lua-users.org/wiki/StatementsInExpressions)比 C 之类的语言更强。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T06:04:10.857

如果表构造函数不是表达式，那么您不能*将*它们分配给任何东西。该语句`variable_name = {}`将表达式（在本例中为表构造函数）的结果分配给变量。

表是值，就像数字、字符串、函数、用户数据以及 Lua 中所有其他的值一样。表达式计算为值。因此，表的构造是一个计算值的表达式。

# javascript - 如何在保存按钮单击时为复选框更改事件编写函数

> ID：13523710
> 
> 赞同：2
> 
> 时间：2012-11-23T05:47:59.053
> 
> 标签：javascript, jquery

我在网格中有多个复选框。最初，一些复选框被选中，一些未被选中。然后我将更改复选框选择，我想将更改后的复选框值保存到数据库中。当我重新打开页面时，我将显示使用保存的值选中的复选框。

我写的代码是：

```
 $(".check").each(function(){ 

           if (element.checked == true) {

                alert('checked');

            }

       }); 
```

该代码适用于选中的复选框事件。但我还想保存已更改的值（我的意思是选中为取消选中（表示在数据库中删除））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:03:18.800

您可以为此目的使用 ajax。

希望这可以帮助：

```
var listOfChecked= new Array();
var listOfUnchecked= new Array();
$(".check").each(function(){ 
    if (this.checked) {
        listOfChecked.push($(this).attr('value'));
    }
    else{
        listOfUnchecked.push($(this).attr('value'));
    }
});
$.get('mine.aspx?checkedValues='+listOfChecked.join(",")+'&uncheckedValues='+listOfUnchecked.join(","), function(data) {
    //saved
}); 
```

# jquery - JQuery 只工作一次

> ID：13523711
> 
> 赞同：0
> 
> 时间：2012-11-23T05:48:02.110
> 
> 标签：jquery

`<h4>`我为强调点击标签编写了 jquery 函数。但它只能工作一次。那么我如何解决这个问题。这是我的代码。

```
 $(document).ready(function(){
        $('h4').click(function(){
            var a = $('h4').attr('style');
            if(a=='font-size: 1.5em'){
                $(this).css('font-size','2.5em');
            }
            else{
                $(this).css('font-size','1.5em');
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T05:56:12.460

如果你把一个简单`console.log(a)`的东西混在一起，你就会发现问题所在。当你这样做时：

```
$(this).css('font-size', '1.5em'); 
```

您最终将样式属性设置为`font-size: 1.5em;`，请注意分号。因此，一旦您切换回 1.5em，您的平等测试就会失败。我不会依赖`style`属性中的任何特定格式，可能会有与您预期不同的空格数（可能没有），可能会有您不希望出现的分号，...

您最好使用 CSS 类来执行此操作。HTML 看起来像这样：

```
​&lt;h4>Header</h4>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

和CSS是这样的：

```
​h4 {
    font-size: 1.5em;
}
h4.emphasized {
    font-size: 2.5em;
}​ 
```

最后，你的 JavaScript 会像这样简单：

```
$('h4').click(function() {
    $(this).toggleClass('emphasized');
}); 
```

演示：http: [//jsfiddle.net/ambiguous/2rpxa/](http://jsfiddle.net/ambiguous/2rpxa/)

​</p>

# android - 特定用户 Youtube 上传的视频

> ID：13523719
> 
> 赞同：0
> 
> 时间：2012-11-23T05:48:23.927
> 
> 标签：android, youtube-api

我想使用媒体播放器播放某些 youtube 频道的视频。我使用[以下 API](https://gdata.youtube.com/feeds/api/users/default/uploads)来获取提要。我得到了网址，但媒体播放器说“播放失败”。以下是尝试播放的网址

```
http://o-o---preferred---sn-h557snes---v24---lscache3.c.youtube.com/videoplayback?upn=AmmxhSpq470&sparams=cp,gcr,id,ip,ipbits,itag,ratebypass,source,upn,expire&fexp=917013,906437,916626,922401,920704,912806,927201,925706,922403,913546,913556,916805,920201,901451&ms=au&expire=1353668177&itag=18&ipbits=8&gcr=in&sver=3&ratebypass=yes&mt=1353646087&ip=121.241.181.70&mv=m&source=youtube&key=yt1&cp=U0hUSFZRVl9MUUNONF9OS1pCOmhtUTVMak5oTVNy&id=c429fa5466ee9447&newshard=yes 
```

解码格式有什么变化吗？请帮助我..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:24:32.403

您需要使用官方的 YouTube 播放器之一来播放 YouTube 内容。对于现在的 Android 应用程序，这意味着将[iframe 播放器](https://developers.google.com/youtube/iframe_api_reference)嵌入到应用程序的[WebView](http://developer.android.com/reference/android/webkit/WebView.html)中。

在未来的某个时候，我们将发布一个[原生 Android YouTube 播放器](https://developers.google.com/events/io/sessions/gooio2012/120/)视图，您可以将其嵌入到您的应用程序中，但我没有任何关于发布日期的信息要分享。

# c# - 将三个数组的索引合并到单个数组

> ID：13523722
> 
> 赞同：3
> 
> 时间：2012-11-23T05:48:28.560
> 
> 标签：c#

我有三个数组，每个数组都有不同的数据。我想将它们作为单个数组加入，其中每个数组中索引为 0 的元素必须与新创建的数组中的索引相同。

例如：

```
 arr1[0]="Trailor";
 arr1[1]="Total Recall";

 arr2[0]="Life of Pi";
 arr2[1]="BDRIP";

 arr3[0]="350MB";
 arr3[1]="4.37GB" 
```

只是我想要具有任何维度的新数组，但上述数组中的元素应该可以通过循环访问。

我想在如下表中打印元素：

```
 <table>
      <thead>
            <tr>
                 <td>Film Title</td>
                 <td>Type</td>
                 <td>Size</td>    
           </tr>
      <thead>
             <tr>
                 <td>Trailor</td>
                 <td>Life of Pi</td>
                 <td>350MB</td>    
           </tr>
           <tr>
                 <td>Total Recall</td>
                 <td>BDRIP</td>
                 <td>4.37GB</td>    
           </tr>

 <table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:02:21.217

`Concat`如果您只想将所有数组连接在一起，则可以使用：

```
arr1.Concat(arr2).Concat(arr3); 
```

如果你想要一个新的二维数组，那么只需创建并填充它：

```
var setOfArrays = new string[][] { arr1, arr2, arr3 }; 
```

* * *

**编辑**使用相同的方括号语法访问它们`setOfArrays[setIndex][itemIndex]`...

```
for (int i=0 ; i<setOfArrays.Length ; i++)
{
    for (int j=0 ; j<setOfArrays[i].Length ; j++)
    {
        Console.WriteLine(setOfArrays[i][j]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T06:17:38.867

如果您创建一个类（或结构）来存储数据会容易得多。如果您稍后阅读它会更容易理解：

```
class Record
{
    public String Title {get; set;}
    public String Type {get; set;}
    public String Size {get; set;}

    public Record(String title, String type, String size)
    {
        Title = title;
        Type = type;
        Size = size;
    }
} 
```

然后只需用您的数据填充这些对象的列表：

```
List<Record> records = new List<Record>();

for(int i=0; i<elementcount; i++)
    records[i] = new Record(arr1[i], arr2[i], arr3[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:20:16.353

为简单起见，我没有使用您的 HTML 示例，但此代码向您展示了一种可行的技术：

```
void Main()
{
    var one = new string[] { "one", "two" };
    var two = new string[] { "apple", "pear" };
    var three = new string[] { "cat", "dog" };

    GroupFormatDemo(one, two, three);

}
void GroupFormatDemo(params string[][] args) 
{
    foreach (var a in args) 
    {
        Console.WriteLine("First={0}, Second={1}", a[0], a[1]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T06:22:42.763

定义一个类类型来保存三个数组中每个数组的一个数据元素：

```
public class Data
{
    public string Item1 { get; set; }
    public string Item2 { get; set; }
    public string Item3 { get; set; }
} 
```

然后构造这些对象的数组，用原始数组中的值填充字段：

```
var list = new List<Data>();
for (int i = 0; i < arr1.Length; i++)
{
    list.Add(new Data() { Item1 = arr1[i], Item2 = arr2[i], Item3 = arr3[i] };
}

var dataArray = list.ToArray(); 
```

此循环假定 arr1、arr2 和 arr3 都具有完全相同的长度。

然后，您可以访问一个索引下的数据，引用感兴趣的特定字段：

```
Console.WriteLine(dataArray[x].Item1, dataArray[x].Item2, dataArray[x].Item3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T07:55:50.877

这是我对 LINQ 解决方案的问题的看法。这将产生一个数组，将同一索引上的元素连接在一起。

```
List<string[]> movies = new List<string[]>() {arr1, arr2, arr3};

var mergedArray = movies.Aggregate((sArrOne, sArrtwo) => 
                               sArrOne.Zip(sArrtwo, (one, two) => one += " "+two)
                        .ToArray()); 
```

`mergedArray[0]` --> Pi 350MB 的拖车寿命

# javascript - javascript 单词在彼此之上

> ID：13523725
> 
> 赞同：-2
> 
> 时间：2012-11-23T05:48:54.177
> 
> 标签：javascript, overlap, words, letters

我有一个写出列表的javascript代码。但是这些字是写在彼此之上的，因此很难阅读。无论我在列表中放什么，也无论我使用什么浏览器，这些词都写在彼此的顶部。它似乎只允许一个词。像“沙拉”，但我使用“沙拉蛋糕”，沙拉和蛋糕这两个词会重叠。由于我看不出问题出在哪里，因此事实证明这很难研究。帮助？

```
 $(document).ready(function doEverything(element){
$.getJSON("https://api.foursquare.com/v2/venues/search?ll=-27.58818,-48.523248&         
client_id=L2VWBKPOW45D5X3FJ3P4MJB5TGVJ4ST2J005RIVAFIWG44ND%20&   
client_secret=ZKDAOLHASCA31VUOGMBTAS3RFYUOMXL4IFFYPRURIDQA3QMA%20&v=20111107",
    function(data){

one=data.response.venues[0].name;
two= data.response.venues[1].name; 
three= data.response.venues[2].name; 
four= data.response.venues[4].name; 

    var list = [];

    list[0] = [one];
    list[1] = [two];
    list[2] = [three];
    list[3] = [four]; 
```

更新（手拍头）缺少的代码的样式：宽度为 10 像素。解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:33:33.260

您发布的代码（AJAX 调用和一些数据操作）与最终显示数据的方式无关。看你如何显示数据，而不是如何获取数据。由于我们被迫猜测，我将列出我能想到的原因：

*   这些词被分成单独的 DOM 元素并`position:absolute`通过 CSS 给出。删除`position: absolute`，通过 javascript 计算单词的正确位置（不容易），或者干脆不分成几个元素。
*   单词被分成单独的 DOM 元素并给出`width:0`（或任何太小的宽度）和`overflow: visible`（溢出的默认值）。处理方式相同 - 删除相应的`width`属性。
*   包含单词的元素有`width:0`,`line-height:0`和`overflow:visible`。这似乎不太可能，但并不意味着单独的元素。如果是这种情况，除了修复 CSS 的正确方法之外，您还可以通过用 ace`n`替换普通空格来解决此`b`问题。`sp`
*   元素有负数`word-spacing`。为什么会有人这样做？
*   CSS3 定义了`text-height`一些`ruby-`属性。由于它们是新的，我不希望它们在 IE8 中产生任何影响。

# php - 如何json_encode php数组但没有引号的键

> ID：13523729
> 
> 赞同：23
> 
> 时间：2012-11-23T05:49:06.977
> 
> 标签：php, javascript, arrays, flot, json

我正在尝试（使用[Flot](https://github.com/flot/flot)）绘制带有一些数据的饼图

```
var data = <?php echo json_encode($data)?> 
```

我从中得到的结果是：

```
var data = [
{"label":"Crear Usuario", "data":"2"},
{"label":"Impresoras", "data":"1"},
{"label":"Problema Correo", "data":"1"},
{"label":"Requisicion Equipo", "data":"1"},
{"label":"Sitio Web", "data":"1"}
] 
```

这里的问题是我需要`label`and`data`没有引号，我已经尝试过`json_encode($data, JSON_NUMERIC_CHECK);`但只从数字中删除引号。

以下格式是我需要的：

```
var data = [
    {label:"Crear Usuario",data:2}, ... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T16:51:11.473

首先，您必须在 php 中生成数组，因此数据的值是整数，而不是字符串：

我从您的 json_encode() 中模拟了您的数组，我猜它看起来像这样（或者应该是这样）：

```
$array =  array(
                array("label" => "Crear Usuario",   "data" => 2),
                array("label" => "Impresoras",      "data" => 1),
                array("label" => "Problema Correo", "data" => 1),
                array("label" => "Requisicion Equipo", "data" => 1),
                array("label" => "Sitio Web", "data" => 1)
            );

    $data = json_encode($array); 
```

*   **请注意，2 和 1 没有被引用，因此它们是整数，这一点很重要。**

然后，您在 Javascript 中错过了 JSON.parse() 以实际将该输出转换为 json 对象：

```
<script>
    var data = '<?php echo $data; ?>';
    var json = JSON.parse(data);
    console.log(json);
    console.log(json[0]);
</script> 
```

*   **请注意， var data = ... 是单引号，因此您将 php 的回声作为字符串捕获**

console.log() 为我输出：

```
[Object, Object, Object, Object, Object] // First console.log(): one object with the 5 Objects. 
Object {label: "Crear Usuario", data: 2} // secons console log (json[0]) with the first object 
```

看起来像你需要的，对吗？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T13:38:43.500

带引号和不带引号的键之间没有区别。问题在于对实际数据值的引用，因为 Flot 需要数字，而不是字符串。

json_encode 函数根据您提供的数据类型决定是否引用。在这种情况下，看起来您为创建 $data 执行的任何操作都在生成字符串值而不是整数。您需要重新检查这些操作，或者明确告诉 PHP 将它们解释为数字，使用 (int) 或 (float) 转换，或 intval/floatval 函数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T06:09:09.993

尝试这样的事情：

```
function buildBrokenJson( array $data ) {

   $result = '{';

   $separator = '';
   foreach( $data as $key=>$val ) {
      $result .= $separator . $key . ':';

      if( is_int( $val ) ) {
         $result .= $val;
      } elseif( is_string( $val ) ) {
         $result .= '"' . str_replace( '"', '\"', $val) . '"';
      } elseif( is_bool( $val ) ) {
         $result .= $val ? 'true' : 'false';
      } else {
         $result .= $val;
      }

      $separator = ', ';
   }

   $result .= '}';

   return $result;
} 
```

并且在运行时

```
$a = array("string"=>'Crear "Usuario', 'foo'=>':', "int"=>2, "bool"=>false);
var_dump( buildBrokenJson($a) ); 
```

它给：

```
string(54) "{string:"Crear \"Usuario", foo:":", int:2, bool:false}" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-27T15:04:35.007

我创建了一个类来用 php 格式化 json，键上没有引号，就是这样

```
class JsonFormatter
{
static $result = '';
static $separator = '';

public static function iterateArray($data) : string
{
    static::$result .= '[';
    static::$separator = '';
    foreach ($data as $key => $val) {
        if (is_int($val)) {

        } elseif (is_string($val)) {
            static::$result .= '"' . str_replace('"', '\"', $val) . '"';
        } elseif (is_bool($val)) {
            static::$result .= $val ? 'true' : 'false';
        } elseif (is_object($val)) {
            static::iterateObject($val);
            static::$result .= ', ';
        } elseif (is_array($val)) {
            static::iterateArray($val);
            static::$result .= ', ';
        } else {
            static::$result .= $val;
        }
        if (!is_int($val)) {
            static::$separator = ', ';
        }
    }

    static::$result .= ']';
    return static::$result;
}

public static function iterate($data)
{
    if (is_array($data)) {
        static::iterateArray($data);
    } elseif (is_object($data)) {
        static::iterateObject($data);
    }
    return static::$result;
}

public static function iterateObject($data)
{
    static::$result .= '{';
    static::$separator = '';
    foreach ($data as $key => $val) {

        static::$result .= static::$separator . $key . ':';

        if (is_int($val)) {
            static::$result .= $val;
        } elseif (is_string($val)) {
            static::$result .= '"' . str_replace('"', '\"', $val) . '"';
        } elseif (is_bool($val)) {
            static::$result .= $val ? 'true' : 'false';
        } elseif (is_object($val)) {
            static::iterate($val, true);
            static::$result .= ', ';
        } elseif (is_array($val)) {
            static::iterateArray($val, true);
            static::$result .= ', ';
        } else {
            static::$result .= $val;
        }
        static::$separator = ', ';
    }
    static::$result .= '}';
    return static::$result;
}

} 
```

你现在可以打电话

```
$jsonWithoutKeyQuotes  = JsonFormatter::iterate($data); 
```

感谢 Marcin Orlowski

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-11T00:03:24.670

TL;DR：缺少引号是 Chrome 显示它是 JSON 对象而不是字符串的方式。确保您有 Header('Content-Type: application/json; charset=UTF8'); 在 PHP 的 AJAX 响应中解决了真正的问题。

详细信息：想要解决此问题的一个常见原因是在调试返回的 AJAX 数据的处理时发现了这种差异。

就我而言，我使用 Chrome 的调试工具看到了不同之处。当连接到旧系统时，成功后，Chrome 根据调试器显示响应中的键周围没有引号。这允许在不使用 JSON.parse() 调用的情况下立即将对象视为对象。调试我的新 AJAX 目标时，响应中显示了引号，并且变量是字符串而不是对象。
当我在外部测试 AJAX 响应时，我终于意识到了真正的问题，发现遗留系统实际上确实在键周围有引号。这不是 Chrome 开发工具所显示的。唯一的区别是在遗留系统上有一个标头指定内容类型。我将此添加到新的（WordPress）系统中，调用现在与原始脚本完全兼容，并且成功函数可以将响应作为对象处理，而无需任何解析。现在我可以在旧系统和新系统之间切换，而无需更改目标 URL。

# ruby-on-rails - 创建新的嵌套模型

> ID：13523731
> 
> 赞同：0
> 
> 时间：2012-11-23T05:49:15.477
> 
> 标签：ruby-on-rails

我有一个嵌套模型

```
resources: customers do
  resources: readings
end 
```

我正在尝试创建一个新的客户阅读。我在读数控制器中的新动作是

```
#GET /customers/:customer_id/readings/new
def new
#1st you retrieve the customer
 customer = Customer.find(params[:customer_id])
#2nd you build a new one
 @reading = customer.readings.build
  respond_to do |format|
   format.html #new.html.erb  
  end
end 
```

我在读数文件夹中创建新读数的视图是

```
<div class = "page-header">
   <h1> New Readings </h1>
</div>

<%= render 'form_reading' %> 
```

我的 _form_reading 是

```
<%= simple_form_for [@reading.customer, @reading], :html => { :class => 'form-horizontal'    } do |f| %>
<%= render "shared/error_messages", :target => @reading %>
<%= f.input :customer_id %>
<%= f.input :date_of_reading, :as => :date %>
<%= render_readings_conditionally(f) %>
<div class="form-actions">
  <%= f.button :submit, :class => 'btn-primary' %>
  <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
              customer_reading_path, :class => 'btn' %> 
</div>
<% end %> 
```

但是，我很困扰，对 /customers/1/readings/new 的调用返回

没有路线匹配 {:action=>"show", :controller=>"readings"}

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:59:49.693

在你打电话给`customer_reading_path`你时，你没有传递 customer_id。你可以这样做

```
customer_readings_path(@reading.customer) 
```

请注意它的**读数**而不是**读数**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:54:09.930

客户阅读路径`(:customer_id => <Pass customer ID here>)`

# java - Java中的内存泄漏。如何清除列表？

> ID：13523732
> 
> 赞同：2
> 
> 时间：2012-11-23T05:49:19.300
> 
> 标签：java, memory-leaks, jvm

我在我的源代码中找到了一些有`list.add()`但没有的列表`list.remove()`。它会导致内存泄漏吗？我试过了`list.clear()`，`list=null`但似乎没有效果。应该怎么做才能清除这个列表？请解释...在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:58:43.530

`list.clear()`将清除列表中的所有引用。如果它们没有被任何其他对象使用，它将被`garbage collector`. 但`clear`单独不会`delete`对象。我认为问题是，其他一些对象正在使用这些数据，所以它仍然存在于内存中。

发布示例代码，让我们知道确切的问题是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:59:03.967

如果您想清除列表，您可以调用`List.removeAll`. 在对象被引用到某个地方之前，它们没有资格被垃圾收集，所以如果 a`List.removeAll`没有效果，则意味着列表中的对象仍然在其他地方引用，例如在另一个集合或类中。

你怎么知道`List.clear`/`List.removeAll`没有效果？手动删除添加到列表中的每个元素不是强制性的。列表可能超出范围，因此被丢弃。

```
{ 
    Foo a = new Foo(1.0);
    Foo b = new Foo(2.0);
    {
        List<Foo> foo = new ArrayList<Foo>();
        foo.add(a); foo.add(b);
    } // scope ends for foo, remove was not called but still
      // the list is discarded, and the reference it holds to a and b too
} 
```

因此，要清除列表，只需调用`List.removeAll`. 如果您希望对列表中的对象进行垃圾回收，则必须确保它们不再在任何地方被引用。

# c# - 在 C# 中使用 shutdown.exe 关闭另一个系统？

> ID：13523739
> 
> 赞同：7
> 
> 时间：2012-11-23T05:50:00.027
> 
> 标签：c#, asp.net, remoting, shutdown, system-shutdown

我使用以下代码关闭自己的系统。它工作正常。我需要 **关闭另一个系统，该系统连接在 LAN Connection**中。我无法用这段代码做到这一点。如何使用 shutdown.exe 关闭另一个系统？我的操作系统是windows7。

```
using System.Diagnostics;

        protected void Button1_Click(object sender, EventArgs e)
        {
            Process.Start("shutdown.exe", "-s -t 00");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:50:04.740

菜单开始->运行->输入cmd->回车

在 cmd 类型中

```
shutdown /? 
```

你可以看到帮助，根据帮助你需要的关键是

```
 /m \\computer Specify the target computer. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:53:17.043

只是为了完整性：

```
Process.Start("shutdown.exe", "-s -t 00 \\computer"); 
```

# java - Android - 访问 RadioButton 数组时出现 NullPointerException

> ID：13523741
> 
> 赞同：0
> 
> 时间：2012-11-23T05:50:01.793
> 
> 标签：java, android, nullpointerexception, radio-button

好的，所以我想我可能对如何解决这个问题有一些见解，但我不确定。我有一段代码首先声明一个 RadioButton[]，然后是一个将其设置为特定事物的方法，然后是另一个检查哪个 RadioButton 被选中的方法。

```
RadioButton[] rB = null;

String geUrl(RadioButton[] rBp) {
    for(int radind = 0; radind < rBp.length; radind++) {
        Log.d("APP", "rBp value is " + rBp.toString());
        Log.d("APP", "In for loop, index = " + radind + ", length = " + rBp.length);
        if (rBp[radind].isChecked()) {
            String url = rB[radind].getText().toString();
            Log.d("APP", "Detected url, " + url);
            return url;
        }
    }
    return "err";
}

public void refresh() {
    if (rB != null) {
        rG.removeAllViews();
    }
for(int index = 0; index < tempWikiDB.size() ; index++) {
    rB = new RadioButton[tempWikiDB.size()];
    rB[index]  = new RadioButton(this);
    rG.addView(rB[index]);
    rB[index].setText(tempWikiDB.toArray()[index].toString());
} 
```

}

为 geUrl 方法提供了足够的参数。但是，在运行时，我得到了 if (rBp[radind].isChecked()) 行的空指针异常。我认为这是因为 RadioButton[] rB = null; 不是我应该如何声明变量，但我不知道如何。

这是日志猫：

```
11-23 05:48:27.911: E/AndroidRuntime(1189): FATAL EXCEPTION: main
11-23 05:48:27.911: E/AndroidRuntime(1189): java.lang.NullPointerException
11-23 05:48:27.911: E/AndroidRuntime(1189):     at com.spng453.wikicenter.SearchWiki.geUrl(SearchWiki.java:37)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at com.spng453.wikicenter.SearchWiki$1.onClick(SearchWiki.java:74)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at android.view.View.performClick(View.java:4202)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at android.view.View$PerformClick.run(View.java:17340)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at android.os.Handler.handleCallback(Handler.java:725)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at android.os.Looper.loop(Looper.java:137)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at android.app.ActivityThread.main(ActivityThread.java:5039)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at java.lang.reflect.Method.invokeNative(Native Method)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at java.lang.reflect.Method.invoke(Method.java:511)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-23 05:48:27.911: E/AndroidRuntime(1189):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T05:52:00.373

在每次循环迭代`for`中初始化数组时，将此行从循环中取出`rB`

```
rB = new RadioButton[tempWikiDB.size()]; 
```

# ios - 调整该单元格中的自定义 UITableViewCell 高度和 UITextView 的高度（存在其他 UI 元素）

> ID：13523742
> 
> 赞同：2
> 
> 时间：2012-11-23T05:50:04.960
> 
> 标签：ios, dynamic, uitableview, height, uitextview

我有一个自定义表格单元格，其中包含 3 个标签、一个按钮和一个 UITextView。

UITextView 的文本仅在运行时知道，因为它是我从服务器中提取的数据。

我正在尝试根据我放入 UITextView 的文本将我的 UITextView 和我的自定义表格单元格调整为正确的高度。

UITextView 的文本在 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 方法中设置。

在这里，我尝试使用以下方法调整 UITextView (bodyTextView) 的大小。

```
CGSize stringSize = [cell.bodyTextView.text sizeWithFont:cell.bodyTextView.font constrainedToSize:CGSizeMake(cell.bodyTextView.bounds.size.width, 9999) lineBreakMode:NSLineBreakByWordWrapping];

[cell.bodyTextView setText:threadMessage.body];

CGRect bodyFrame = cell.bodyTextView.frame;

bodyFrame.size = cell.bodyTextView.contentSize;

[cell.bodyTextView setFrame:bodyFrame]; 
```

这或多或少似乎工作正常，因为我的 UIButton 没有向下移动到它应该移动的位置，即使它在我的 UITextView 底部有一个“Top Space To”约束。我原以为它会自动移动。但是，我可以通过编程将其移动到适当的位置，所以没什么大不了的。

下一段代码确实将 tableViewCell 调整为适当的高度以适合标签和 UITextView，但底部的按钮没有足够的空间。接下来我计算单元格的高度并使用以下命令返回它......

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath: (NSIndexPath *)indexPath
{
    CGSize stringSize = [threadMessage.body sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(280, 9999) lineBreakMode:NSLineBreakByWordWrapping];

    float oldHeight = 28;
    float newHeight = stringSize.height;

    return tableView.rowHeight - oldHeight + newHeight;
} 
```

正如你所看到的，我在 UITextView 高度和新高度之间做了一个高度差。我试图以编程方式获取 oldHeight，但我得到了成千上万的疯狂值。

最大的问题是，当视图首次显示时，行的大小或多或少是正确的。但是 UITextView 没有大小。如果我滚动以将其移出屏幕然后再滚动回来，则 UITextView 的大小正确。但是，如果我再次滚动它并返回屏幕，它会再次将自身调整为单行。

我觉得我有鸡或蛋的事情，无法解决这个问题。

我希望弄清楚的两个主要问题是：

1 ) 如何让 UITextView 从一开始就正确调整大小并保持这种状态，而不管屏幕是否滚动？

2 ) 如何让我的自定义 TableCellView 调整大小以包含按钮的高度？

我希望这一切都有意义，并且我已经提供了足够的细节。让我知道任何问题。

任何建议将不胜感激。谢谢！

问候，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:18:59.937

好的，我终于弄清楚了问题所在。以为我会发布我的解决方案，以防其他人遇到这个问题，因为今天这让我的大脑扭曲了好几个小时。

我认为这个问题可能与我使用 iOS 6 SDK 的项目有关。我下载了 iOS 5 Simulator 并尝试在上面运行我的应用程序。启动后立即出现错误。NSLayoutInconsitencyException （或类似的东西）。在进行了一些在线搜索后，我发现 iOS 5 与 iOS 6 的设置不兼容。

这个设置是“用户自动布局”，它在我的故事板文件中被选中。要找到它，请选择您的故事板文件，然后选择右侧的文件检查器 (Command-Option-1)。在 Interface Builder Document 部分下，您将看到“使用自动布局”复选框。取消选中此项，事情开始变得更好。每次在屏幕上下滚动单元格时，我的 UITextView 不再被调整为一行并恢复为全长。

但是我仍然有一个问题，即单元格的高度不正确。既然我已经解决了 Autolayout 问题，这变得非常简单（你不会相信我随处可见的所有已注释掉的试验和错误测试代码 :)）。

在 cellforRowAtIndexPath 函数中，您需要将 UITextView 的文本设置为您想要的任何内容，然后简单地获取它的 contentSize，然后调整 UITextView 的框架...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCellIdentifier"];

    [cell.bodyTextView setText:myText];

    CGRect bodyFrame = cell.bodyTextView.frame;
    bodyFrame.size = cell.bodyTextView.contentSize;
    [cell.bodyTextView setFrame:bodyFrame];

    ... Whatever else you need to do here ...
} 
```

然后在 heightForRowAtIndexPath 我发现再次获取一个单元格并设置文本我能够获得正确的大小差异，因此返回正确的大小。通过使用大小差异，它允许您在表格单元格中使用任何其他 UI 元素。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCellIdentifier"]; 

    float oldHeight = cell.bodyTextView.frame.size.height;

    cell.bodyTextView.text = threadMessage.body;

    CGRect bodyFrame = cell.bodyTextView.frame;
    bodyFrame.size = cell.bodyTextView.contentSize;

    float newHeight = cell.bodyTextView.contentSize.height;

    return tableView.rowHeight - oldHeight + newHeight;
} 
```

我希望这对将来的某人有所帮助。如果其中任何一个没有意义，请随时问我任何问题。感谢 Mohit 试图帮助我。非常感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T05:56:10.783

在旋转时自动调整自定义单元格时，我也遇到了同样的问题。战斗后我得到了授权cell.contentView的解决方案，因为我将我的视图作为子视图添加到cell.contentview中。

我使用了以下代码，我的代码工作正常:)

```
cell.contentView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T07:20:00.883

Etep，试试这个......首先你关闭单元格和按钮的调整大小/方向属性，然后你可以根据到达的文本制作适当的文本视图尺寸，以便你在哪里计算行高，而不是使用获取文本大小，你需要什么来获得文本视图的正确高度......并且休息很好。（在'cellForRowAtIndexPath'中，你应该使用可重复使用的单元格，或者说把你的代码在 if (cell==nil){})

# java - 从 JSF 2 Datatable 导出到电子表格

> ID：13523748
> 
> 赞同：3
> 
> 时间：2012-11-23T05:51:20.420
> 
> 标签：java, jsf, primefaces, apache-poi, export-to-excel

有人可以提供一些示例，其中 POI 用于将数据从具有排序功能的 jsf 2 数据表导出到电子表格？我也有一个疑问。我可以使用 primefaces 数据导出标签和 jsf 2 数据表吗？由于我是 JSF 的新手，任何答案都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:30:25.517

我们目前正在将 PrimeFaces DataExporter 与我们的数据表一起使用。生成的电子表格不是很漂亮，但第一次使用非常简单。此外，它还具有过滤和排序功能。

这是我们的 PrimeFaces 数据表的示例：

```
<p:dataTable id="volumeListTable" widgetVar="volumeListTableWidget" value="#{volumeController.volumes}" var="volume" 
                                    paginator="true" rows="#{parameters.rowsNumber}" rowsPerPageTemplate="5,10,25,50"
                                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                    rowKey="#{volume.key}" selection="#{volumeController.selectedVolumes}" selectionMode="multiple"
                                    filteredValue="#{volumeController.filteredList}" >

                            <p:ajax ... />

                            <p:column sortBy="#{volume.volumeID}" filterMatchMode="contains" filterBy="#{volume.volumeID}" > 
                                <f:facet name="header">
                                    <h:outputText value="#{bundle.VolumeID}" />
                                </f:facet>
                                <h:outputText value="#{volume.volumeID}" />
                            </p:column>

                            <p:column sortBy="#{volume.volumeStatus}" filterMatchMode="contains" filterBy="#{volume.volumeStatus}" >
                                <f:facet name="header">
                                    <h:outputText value="#{bundle.VolumeStatus}" />
                                </f:facet>
                                <h:outputText value="#{volume.volumeStatus}" />
                            </p:column>
</p:dataTable> 
```

这是 dataExporter 的 commandButton ：

```
<p:commandButton title="#{bundle.Excel}" icon="aofxdm-icon-xls" disabled="#{volumeController.volumesNumber == 0}" ajax="false" >
   <p:dataExporter type="xls" target=":volumeForm:volumeListTable" fileName="Volumes" />
</p:commandButton> 
```

您可以在[PrimeFaces Showcase](https://www.primefaces.org/showcase/ui/data/dataexporter/basic.xhtml)和[PrimeFaces 用户指南中找到您需要的所有信息](http://primefaces.googlecode.com/files/primefaces_users_guide_3_3.pdf)

另一种方法是在您的支持中创建您自己的方法，该方法将在您的数据表中使用的列表/filteredList 上创建您的电子表格，并使用 p:downloader 和来自 PrimeFaces 的 StreamedContent 下载创建的文件。

# iphone - 标签栏的一半不可见:((

> ID：13523749
> 
> 赞同：1
> 
> 时间：2012-11-23T05:51:27.940
> 
> 标签：iphone, xcode, uitabbarcontroller, uitabbar, tabbar

我正在`iphone`使用 iPhone sdk 4 制作应用程序，

我的应用程序以普通视图开始！

当用户按下一个按钮时，它会进入下一个视图，这个视图必须有一个`Tabbar`，

> 第一个视图 ==按钮==> 第二个视图（带标签栏）

这是我的`SecondviewController.m`

```
#import "SecondViewController.h"

@implementation SecondViewController

@synthesize lab,tabbar;

- (void)viewDidLoad {
    [super viewDidLoad];
    [self.view addSubview:tabbar.view]; 

}
- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
    [lab release];
    [tabbar release];
}

@end 
```

它有效，但我亲爱的标签栏的下半部分不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:00:40.827

那是因为您的导航栏或状态栏已实现，因为标签栏低于屏幕的原始高度，即 480 像素。在您的 nib 文件中单击视图，然后在模拟指标中尝试将顶部栏更改为无并查看。也许这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:51:31.250

嗨，尝试将您的标签栏添加到主窗口，它会显示为

```
[[[[UIApplication sharedApplication] windows] lastObject] addSubview: tabbar.view]; 
```

# java - 如何从 XSLT 中引发异常？

> ID：13523750
> 
> 赞同：29
> 
> 时间：2012-11-23T05:51:53.107
> 
> 标签：java, xml, xslt

如果一个标签不包含属性，我想抛出一个异常。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-23T07:38:16.517

使用[`xsl:message`with`terminate="yes"`](http://www.w3.org/TR/xslt#message)可以达到类似抛出异常的效果：

```
<xsl:if test="(your condition)">
   <xsl:message terminate="yes">ERROR: Missing attribute XYZ under
      <xsl:value-of select="local-name()"/> !</xsl:message>
</xsl:if> 
```

这会导致消息被发送到 STDERR 并终止处理。

顺便提一句。[这在Schematron](http://www.schematron.com/)验证中被大量使用。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-23T13:57:55.283

**除了使用的正确答案`<xsl:message terminate="yes"/>`：**

1.  在 XSLT 3.0 中可以使用新的指令`<xsl:try ...>`和`<xsl:catch ...>`：[http ://www.w3.org/TR/xslt-30/#try-catch](http://www.w3.org/TR/xslt-30/#try-catch)

2.  在 XSLT 2.0 中，还可以使用标准的 XPath 函数**[`error()`](http://www.w3.org/TR/xpath-functions/#func-error)**来终止处理。

**下面是一个使用`xsl:try`and`xsl:catch`**的例子：

```
<xsl:result-document href="out.xml">
  <xsl:variable name="result">
    <xsl:call-template name="construct-output"/>
  </xsl:variable>
  <xsl:try>
    <xsl:copy-of select="$result" validation="strict"/>
    <xsl:catch>
      <xsl:message>Warning: validation of result document failed:
          Error code: <xsl:value-of select="$err:code"/>
          Reason: <xsl:value-of select="$err:description"/>
      </xsl:message>
      <xsl:sequence select="$result"/>
    </xsl:catch>
  </xsl:try>
</xsl:result-document> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T06:17:46.477

XSLT 不是用来验证的！它用于转换..（XSLT 代表可扩展样式表语言转换）

如果您想验证层次结构（这是您的要求）并验证数据.. 那就选择 XSD！可扩展架构定义..

[这是学习XSD](http://www.w3schools.com/schema/default.asp)的链接参考

XML 必须通过主机代码（C#、Java 等）针对 XSD 进行验证。验证返回一组结果。成功或失败并出现验证错误（如果存在）..

# jquery - 单击按钮时剑道自动完成选择值

> ID：13523754
> 
> 赞同：2
> 
> 时间：2012-11-23T05:52:06.563
> 
> 标签：jquery, asp.net-mvc-3, kendo-ui, jquery-events

我如何在按钮单击（btnSelect）时获得剑道自动完成的选定值

```
$(document).ready(function () {
    $("#titles").kendoAutoComplete({ 
        minLength: 3, 
        dataTextField: "SDesc", 
        dataValueField: "RefID", 
        template: '${ data.SDesc } ' + '(' + '${ data.SDate }' + ')',

        dataSource: {
            type: "odata",
            serverFiltering: true,
            serverPaging: true,
            pageSize: 20,
            transport: {
                read: "http://localhost:54329/HH_WcfDataService.svc/Product"
            }
        }
    });   

    $('#btnSelect').click(function (e){
        var onSelect = function(e) {
            // access the selected item via e.item (jQuery object)
        };

        // attach select event handler via bind()
        $("#titles").data("kendoAutoComplete").bind("select", onSelect);

        // detach select event handler via unbind()
        $("#titles").data("kendoAutoComplete").unbind("select", onSelect);
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:53:46.573

使用 AutoComplete 的[value](http://docs.kendoui.com/api/web/autocomplete#value)方法来获取它的值。

```
 $('#btnSelect').click(function (e){
        var value = $("#titles").data("kendoAutoComplete").value();

        // Use the `value`
   }); 
```

# android - Android 文本和图像未正确加载到 webview

> ID：13523761
> 
> 赞同：1
> 
> 时间：2012-11-23T05:52:47.930
> 
> 标签：android, html, webview, android-webview

我在将文本和图像加载到网络视图时遇到问题。当我尝试从本地资产文件夹加载 html 文件（包含文本和图像）时，首先加载文本，然后将图像加载到文本上。供参考，请参见屏幕截图。我正在使用以下代码：

```
webView.loadUrl("file:///android_asset/Equest.html"); 
```

html文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>
body{ font-family:Droid Sans;}
h2{font-family:Bookman old style; font-size:23px; color:#1f0909; font-weight:bold;}
h3{font-family:Bookman old style; font-size:16px; color:#1f0909; font-weight:bold;}
p{padding:5px 5px 5px 0px; margin:0px; line-height:20px;}
p{font-family:Droid Sans; font-weight: normal; font-size:18px; color:#1f0909;}
font
ul{padding-left:20px;}
ul li { line-height:22px;  padding:0px; font-family:Droid Sans; font-weight: normal; font-size:18px; color:#1f0909;}
img{padding-right:10px; vertical-align:middle;}

p strong{font-size:12px;}
strong{ font-size:20px;color:#1f0909;}
ul li div ul li{margin:0px 0px 5px 0px;}
    p a{ word-wrap:break-word; }p a{ word-wrap:break-word; }

.img-box{padding:5px;width:auto;height:auto; }
.img-box img{height:auto; width:100%; padding:0px; float:left; margin:0px 0px 3px 0px; }
div.transbox
  {
  width:auto;
  height:auto;
  margin:5px 5px;
  background-color:transparent;
  color:transparent;
  opacity:0.1;
  word-wrap:break-word;
  filter:alpha(opacity=10);
  }
</style>
</head>
<body>
<!--<h2 > Product Information - Equitape </h2>-->
<div class="img-box"><img src = "file:///android_res/drawable/equitape.PNG" /></div>
<div class="transbox">Moxidectin oral gel.</div>
<p> </p>
<ul>
  <li> Praziquantel oral paste. </li>
  <li> Single dose, flexible, targeted tapeworm control - ideal for treating horses not requiring a roundworm treatment. </li>
  <li> Palatable treatment, presented in compact easy to use dial-a-dose syringe. </li>
  <li> Licensed for horses - should only be used in mares during pregnancy or lactation after assessment of the benefits and risks by your veterinary surgeon. </li>
</ul>
<p>EQUITAPE is a registered trademark of Bayer AG. EQUITAPE contains praziquantel. </p>
<p>Advice on the use of this or alternative treatments must be sought from the medicine prescriber. Further information from Pfizer Animal Health, Pfizer Ltd, Walton Oaks, Dorking Road, Walton-on-the-Hill, Tadworth, Surrey KT20 7NS </p><p>POM-VPS</p> 
<p>
    <FORM>

        <a href="http://www.noahcompendium.co.uk/Pfizer_Limited/Equitape_90_mg_g_Oral_Gel_for_Horses/-32769.html">
        <img src = "file:///android_res/drawable/button_datasheet.png"/></a>
        <!--  <INPUT TYPE="button" value="See Datasheet" onclick="goToPage('' );" /> -->

    </FORM> 

    <!--Link to datasheet <a href="http://www.noahcompendium.co.uk/Pfizer_Limited/Equitape_90_mg_g_Oral_Gel_for_Horses/-32769.html"> http://www.noahcompendium.co.uk/Pfizer_Limited/Equitape_90_mg_g_Oral_Gel_for_Horses/-32769.html </a> --></p>
    <br />
    <br />
</body>
</html> 
```

![网页视图加载数据](../Images/92606b070cbc73b4a57daf99c17a098e.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T06:06:18.530

使用下面的另一种方式从资产文件夹加载您的 html 文件，因此应用它。

```
WebView lWebView = (WebView)findViewById(R.id.webView);
  File lFile = new File(Environment.getExternalStorageDirectory() + "<FOLDER_PATH_TO_FILE>/<FILE_NAME>");
  lWebView.loadUrl("file:///" + lFile.getAbsolutePath()); 
```

# tomcat - 在 tomcat 5.5 mod_jk 连接器上以固定时间间隔发送重复请求

> ID：13523766
> 
> 赞同：2
> 
> 时间：2012-11-23T05:53:12.737
> 
> 标签：tomcat

在 tomcat 上配置 -

mod_jk 连接器 worker.properties -

```
worker.list=tomcat
worker.tomcat.type=ajp13
worker.tomcat.host=localhost
worker.tomcat.port=7615 
```

问题陈述 - 对于重负载数据，当浏览器向我的应用程序发送请求时，恰好 3 分钟后，我可以看到另一个重复请求被发送到我的应用程序。

我尝试了以下事情 - 1）对于小负载数据，我尝试将 thread.sleep 放置 5 分钟，结果是向我的应用程序发送了重复请求。

2）我还尝试使用reply_timeout、socket_timeout 配置worker.properties。但它继续发送重复请求。

3) 我还在 Tomcat 6 上部署了我的应用程序，但得到了相同的结果。

mod_jk 日志 -

```
[Mon Nov 12 11:09:04 2012] [23690:1908194448] [info] init_jk::mod_jk.c (3183): mod_jk/1.2.28 initialized
[Mon Nov 12 11:15:32 2012] [23692:1908194448] [info] ajp_send_request::jk_ajp_common.c (1496): (tomcat) all endpoints are disconnected, detected by connect check (1), cping (0), send (0)
[Mon Nov 12 11:15:54 2012] [23797:1908194448] [info] ajp_process_callback::jk_ajp_common.c (1788): Writing to client aborted or client network problems
[Mon Nov 12 11:15:54 2012] [23797:1908194448] [info] ajp_service::jk_ajp_common.c (2447): (tomcat) sending request to tomcat failed (unrecoverable), because of client write error (attempt=1)
[Mon Nov 12 11:15:54 2012] [23797:1908194448] [info] jk_handler::mod_jk.c (2608): Aborting connection for worker=tomcat
[Mon Nov 12 11:16:31 2012] [23694:1908194448] [info] ajp_send_request::jk_ajp_common.c (1496): (tomcat) all endpoints are disconnected, detected by connect check (1), cping (0), send (0) 
```

我在 access.log 中没有收到任何错误。

会不会是网络连接问题？如果是，那么解决这个问题的可能方法是什么？

谢谢。

# android - 连接 net.sourceforge.jtds.jdbc.Driver 出错

> ID：13523768
> 
> 赞同：1
> 
> 时间：2012-11-23T05:53:20.773
> 
> 标签：android, android-emulator, jtds

我正在尝试使用我从这里下载的 jtds.1.3.0 驱动程序从 android 应用程序连接到[SQL](http://sourceforge.net/projects/jtds/files/) - **Server**`jtds.jdbc`

当我将此 jar 文件添加到我的应用程序中并尝试从我的应用程序连接时，它给出了以下错误

```
Error in connection net.sourceforge.jtds.jdbc.Driver 
```

这是我尝试连接的示例代码

```
String driver = "net.sourceforge.jtds.jdbc.Driver";

Class.forName(driver).newInstance();//Here it's breaking and Giving The Exception

String connString = "jdbc:jtds:sqlserver://server_ip_address :1433/DBNAME;encrypt=fasle;user=xxxxxxxxx;password=xxxxxxxx;instance=SQLEXPRESS;";

String username = "xxxxxx";

String password = "xxxxxxxxxx";

conn = DriverManager.getConnection(connString,username,password);

Log.w("Connection","open"); 
```

请帮我解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T13:31:37.493

jtds 1.3.0 仍然存在 android 问题，请改用 1.2.7 或更低版本，这将修复您到达那里的 ClassNotFoundException（是的，这就是您遇到的异常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:51:41.357

The JTDS library does not use the `encrypt=true` configuration element. Instead use the `ssl=require` or `ssl=request` options

Example:

> jdbc:jtds:sqlserver://[SERVER]/[DATABASE];ssl=require;

# ios - AVCaptureSessionPresetiPhone 4S 和 5 的高分辨率

> ID：13523771
> 
> 赞同：4
> 
> 时间：2012-11-23T05:53:40.030
> 
> 标签：ios, iphone, objective-c, avcapturesession

我正在使用 AVCaptureSession 开发相机应用程序。我为 sessionPreset 设置了 AVCaptureSessionPresetHigh。现在我想知道所有具有此配置的设备的分辨率。我用 Apple 文档搜索。我知道 [了](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html)

但在这份文件中我找不到 iPhone4S 和 5 的分辨率。

提前致谢。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2014-03-08T08:11:14.487

iPhone 4S 和 iPhone 5 具有相同的捕获分辨率：后置摄像头的全高清和前置摄像头的高清。

# objective-c - prefpane 没有为单个用户提供安装选项

> ID：13523774
> 
> 赞同：0
> 
> 时间：2012-11-23T05:53:54.663
> 
> 标签：objective-c, macos, cocoa, nspreferencepane

我目前正在开发一个 mac os 首选项窗格，我发现它的行为与我在安装时所习惯的不同。当我双击它来安装它而不是接收为该用户或所有用户安装它的选项时，我只是被问到我是否要安装它并且这是为所有用户执行的。我注意到的另一件事是，当我再次双击它重新安装而不是得到标准提示来替换时，我收到一条错误消息，指出 prefpane 是随 Mac OS X 安装的，无法替换。似乎它可能以某种方式被错误地识别，或者我可能设置错误。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:49:48.810

所以我相信我已经解决了这个问题。以为我会在这里发布，以防将来有人遇到问题。这是因为我的 prefPane 包标识符是 com.apple.prefpane。这必须使 OS X 认为它是一个 OS 级别的 prefpane 并以不同的方式处理安装。无论如何，希望这可以为将来节省一些时间。

# ruby-on-rails - Ruby Daemon 与数据库交互时出现“日志写入失败。关闭流”

> ID：13523776
> 
> 赞同：1
> 
> 时间：2012-11-23T05:54:10.960
> 
> 标签：ruby-on-rails, ruby, activerecord, daemon

我创建了一个守护进程。它在真实服务器和开发 win7 笔记本电脑上输出

> 日志写入失败。闭流

关键是在win7上它可以工作：从数据库中获取标签记录，而不是放置结果。但根据 Debian 上的日志，它只能从数据库中获取主题标签记录。

代码：

```
require File.expand_path('../../config/environment',  __FILE__)
require 'rubygems'
tag = HashTag.first

TweetStream::Daemon.new('tracker').track('#'+tag.tag) do |status|
  unless status.media.blank?
    puts status.media.first.media_url
    tag.images.create(
        provider_id: 2,
        when_published: Time.now,
        url: status.media.first.media_url,
        author_id: status.from_user,
        post_id: status.id
    )
  end

end 
```

如果有人给我一个提示我做错了什么，那就太好了。

# npapi - NPAPI 插件在 Mac Safari 中的 CPU 使用率很高

> ID：13523779
> 
> 赞同：1
> 
> 时间：2012-11-23T05:54:24.633
> 
> 标签：npapi

我使用 NPAPI 进行视频流。

但是在 Mac Safari (Mt.Lion, v6.0.2) 中，加载时 CPU 使用率很高 (7~80%)。Chrome 或 FireFox 是常态。

我猜当调用 NPNFuncs.invalidaterect 函数时。

```
int16_t PLUGINAPI::handleEvent(void* event)
{
    NPCocoaEvent* cocoaEvent = (NPCocoaEvent*)event;
    ScriptablePluginObject* pObject = (ScriptablePluginObject*)m_pScriptableObject;

    if(cocoaEvent->type == NPCocoaEventDrawRect) {
        CGContextRef cgContext = cocoaEvent->data.draw.context;

        if(!cgContext)
            return true;

        //Add rect and translate the video
        CGContextAddRect(cgContext, CGRectMake (0, 0, m_Window->width, m_Window->height));
        CGContextTranslateCTM(cgContext, 0, m_Window->height);
        CGContextScaleCTM(cgContext, 1.0, -1.0);

        //Display the video here
        if(pObject && pObject->m_pNpapiPlugin) 
            pObject->m_pNpapiPlugin->WEBVIEWER_DisplayFrame(cgContext, m_Window->width, m_Window->height);

        //Fulsh cgcontextref
        CGContextFlush(cgContext);

        //Generate DrawRect event
        NPRect rect = {0, 0, m_Window->height, m_Window->width};
        NPNFuncs.invalidaterect(m_pNPInstance, &rect);
        NPNFuncs.forceredraw(m_pNPInstance);

    } else {

        if(pObject && pObject->m_pNpapiPlugin)
            pObject->m_pNpapiPlugin->WEBVIEWER_SendEvent(cocoaEvent);
    }

    return true;
} 
```

插件绘图还有其他方法吗？或者我想要解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:48:30.640

您是在告诉它尽快重绘！

```
NPNFuncs.invalidaterect(m_pNPInstance, &rect);
NPNFuncs.forceredraw(m_pNPInstance); 
```

当您调用它时，它将触发另一个绘图事件。Safari 的重绘速度可能比其他浏览器快，这可能就是您使用如此多 CPU 的原因。基本上你说的是“每次你画，马上再画！”。

而不是从你的绘图处理程序调用 invalidateRect 和 forceRedraw （你不应该这样做！）设置一个计时器。请记住，如果您每秒绘制超过 60 帧，您可能会浪费 CPU 周期，因为大多数显示器的刷新速度都那么快。对于大多数情况，我通常建议将 30fps 作为最大值，但那是在你和显卡之间。

# javascript - 在运行时加载 css

> ID：13523787
> 
> 赞同：0
> 
> 时间：2012-11-23T05:55:23.243
> 
> 标签：javascript, html, css

我正在创建一个基于 Web 的应用程序，它将在计算机和手持设备上运行。

我正在编写两个 css 文件，一个用于 pc，另一个用于手持设备。

在 onload 事件中，我调用了一个外部 javascript，我编写了代码来根据用户代理动态加载 css。

当我在 google chrome 开发人员选项上运行我的应用程序以审核页面时，它说要避免从 javascript 加载 css。请任何人告诉我这种方法在性能方面是否正确，或者是否有其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:32:20.683

正如其他人所建议的那样，您可以使用响应式布局、媒体查询、服务器端用户代理检测或它们的组合来在桌面和移动浏览器中提供良好的体验。

但是您也想知道您是否采用了错误的方法，以下是它可能不是最佳方法的一些原因：

1.  在下载并应用正确的样式表之前，内容将被取消样式。如果他们的连接速度很慢或不稳定，那么加载样式表很容易需要 10 秒，在此期间他们看到的是一团糟。
2.  仅仅知道用户代理可能还不够。他们的屏幕分辨率是多少？浏览器是否占据全屏？
3.  加载样式表是一个额外的请求。避免不必要的请求，尤其是在网络延迟对完成每个请求有很大贡献的移动网络上。
4.  Javascript 可能未启用 - 如果用户禁用了 Javascript 或他们的浏览器不支持它。你的网站会发生什么？

如果你的目标是现代浏览器，你应该尝试使用响应式布局和媒体查询。尽量避免用户代理字符串检测，但如果您需要将它们用于边缘情况，请将其作为原始请求的一部分在服务器端处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:02:40.820

您需要了解响应式网页设计。

**响应式网页设计**（通常缩写为 RWD）是一种网页设计方法，在这种方法中，网站经过精心设计，可在各种设备上提供最佳的查看体验——轻松阅读和导航，只需最少的调整大小、平移和滚动（从台式电脑显示器到手机）。参考：[http ://en.wikipedia.org/wiki/Responsive_web_design](http://en.wikipedia.org/wiki/Responsive_web_design)

响应式网页设计教程：[http ://webdesignerwall.com/tutorials/responsive-design-in-3-steps](http://webdesignerwall.com/tutorials/responsive-design-in-3-steps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:03:12.943

我从该警告中了解到的是，您不是使用 JavaScript 来加载 CSS 文件，而是使用标记来执行此操作。

实现此目的的一种方法是从 JS 向 body 元素添加一个类，并在 CSS 中使用该类来确定元素如何根据设备设置样式。另一种方法是对桌面和移动设备使用不同的 CSS 媒体查询。

大多数时候（如果不是总是），您可以避免从 JS 加载 CSS，并且您可以获得能够将所有内容缩小到一个文件中以进一步提高性能的优势。

作为一般提示，我总是尽可能多地使用 CSS，响应式设计在没有 JS 的情况下完全可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T06:04:58.110

您知道[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)吗？

# c++builder - 如何处理表单的组件

> ID：13523788
> 
> 赞同：1
> 
> 时间：2012-11-23T05:55:28.900
> 
> 标签：c++builder, c++builder-2010

我正在以`Show`事件的形式动态创建组件。我需要在 Close 事件上破坏所有组件，因为下次 OnShow 事件应该再次创建组件。这里组件的数量根据数据行的数量而变化。我在用着

```
this->DestroyComponents();  
this->Close(); 
```

但是当我下次调用它时，要么显示访问冲突，要么组件已经存在消息，因为它根本没有很好地处理组件。

如何正确处理表单及其组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:29:04.943

您需要跟踪您创建的组件，例如在 TList 或 TObjectList 中，然后在需要时循环`delete`访问每个组件。

# python - 传输大文件 Python

> ID：13523789
> 
> 赞同：0
> 
> 时间：2012-11-23T05:55:30.630
> 
> 标签：python, python-3.x

谁能给我一个关于如何通过互联网传输大文件的简要想法？

我尝试使用套接字，但它不起作用。我不确定接收套接字的大小应该是多少。我尝试了 1024 字节。我从一端发送数据并在另一端继续接收。

除了套接字之外，还有其他方法可以在 Python 中使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:08:47.693

我遇到了同样的问题，我通过将文件切碎然后单独发送部分来解决它（加载文件，发送文件[0：512]，然后发送文件[512：1024]等等。在发送文件之前我将文件的长度发送给接收者，以便它知道何时完成。

我知道这可能不是最好的方法，但我希望它会对你有所帮助。

# c - 如何获取 telnet 会话的远程端口号？

> ID：13523799
> 
> 赞同：0
> 
> 时间：2012-11-23T05:56:49.913
> 
> 标签：c, unix, freebsd, unix-socket

我正在尝试获取远程用户的 telnet 连接使用的 TCP 端口号。

在 ssh 连接的情况下，我可以从 SSH_CLIENT 环境变量中获取它，但是在 telnet 连接的情况下如何获取它。是否有任何 C/Unix API 来获取它。

我尝试了以下代码：

```
u_int32_t 
port_session_connected (void)
{
    struct sockaddr_storage from;
    char *ssh_client;
    char *remote_port;
    char *temp;
    static char remoteport[1024];
    int socklen;
    int rv = 0, err; 

    if ((ssh_client = getenv("SSH_CLIENT")) != NULL) {
        syslog("(%s): Have SSH_CLIENT: %s", __func__, ssh_client);
        if ((temp = strtok(ssh_client, " \t")) != NULL) {
            remote_port = strtok(NULL, " \t");
            syslog("(%s): Remote port: %s", __func__, remote_port);
            if (remote_port) rv = atoi(remote_port);
            return rv;
        }
    } /* For ssh sessions */

    socklen = sizeof(from);
    if (getpeername(STDIN_FILENO, (struct sockaddr *)&from, &socklen) == 0) { 
        struct sockaddr_in *sck;
        sck = (struct sockaddr_in *)&from;
        syslog("(%s): getpeername() success", __func__);
        syslog("(%s): Remote IP: %s\n", __func__, inet_ntoa(sck->sin_addr));
        syslog("(%s): Remote Port: %d\n", __func__,  (int)ntohs(sck->sin_port));
        syslog("(%s): Family: %d\n", __func__,  (int)(sck->sin_family));

        err = getnameinfo((struct sockaddr *)&from, socklen, NULL, 0, 
                          remoteport, sizeof(remoteport),NI_NUMERICSERV);
        syslog("(%s): getnameinfo() return: %d", __func__, err);
        if (err == 0) { 
            syslog(LOG_NOTICE, "(%s): getnameinfo() success", __func__);
            syslog(LOG_NOTICE, "(%s): Remote port: %s", __func__, remoteport);
            rv = atoi(remoteport);
            return rv;
        }
    } /* For telnet session*/

    return 0;
} 
```

功能适用于 ssh 连接。但是对于 telnet 连接，我无法获取会话中使用的远程端口号。

登录 Telnet 案例：

> （port_session_connected）：getpeername（）成功（port_session_connected）：远程IP：0.0.0.0（port_session_connected）：远程端口：0（port_session_connected）：家庭：1（port_session_connected）：getnameinfo（）返回：5
> 
> getnameinfo() 失败，err=5，即 EAI_FAMILY /* ai_family not supported */ Family is 1，即 AF_UNIX。

是的，getnameinfo() 仅适用于 AF_INET 和 AF_INET6。

是否有任何 API 或无论如何可以获取 telnet 远程端口。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:32:09.397

对等体的地址由`accept()`服务器端的调用返回。由于这是由 telnet 守护程序完成的，因此无法从您的代码中访问它（参见[Stevens, Vol.1 p.118](http://books.google.no/books?id=ptSC4LpwGA0C&pg=PA118&dq=telnet+inetd+accept&hl=en&sa=X&ei=epqvUOvgOIzSsgbgv4H4DA&ved=0CDUQ6AEwAQ#v=onepage&q=telnet%20inetd%20accept&f=false)）。

因此，一种可能的方法是编写某种代理，它接受传入的连接，记录对等地址信息，然后建立与真正的 telnet 守护程序的连接并将连接传递给它。

# matlab - 编译 Mex 和 Armadillo 的困难

> ID：13523802
> 
> 赞同：1
> 
> 时间：2012-11-23T05:57:04.133
> 
> 标签：matlab, mex, armadillo

我在编译一个示例 mex 和犰狳程序时遇到了困难，想知道是否有人可以帮助我。我正在使用 Mac OS，并且安装成功。

代码：

```
#include "mex.h"
#include "math.h"
#include<armadillo>

using namespace arma;

void matlab2arma(mat& A, const mxArray *mxdata){
// delete [] A.mem; // don't do this!
access::rw(A.mem)=mxGetPr(mxdata);
access::rw(A.n_rows)=mxGetM(mxdata); // transposed!
access::rw(A.n_cols)=mxGetN(mxdata);
access::rw(A.n_elem)=A.n_rows*A.n_cols;
};

void freeVar(mat& A, const double *ptr){
access::rw(A.mem)=ptr;
access::rw(A.n_rows)=1; // transposed!
access::rw(A.n_cols)=1;
access::rw(A.n_elem)=1;
};

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{
if (nrhs != 2)
mexErrMsgTxt("Incorrect number of input arguments");
if (nlhs != 1)
mexErrMsgTxt("Incorrect number of output arguments");

mat D1(1,1);
const double* D1mem=access::rw(D1.mem);
matlab2arma(D1,prhs[0]); // First create the matrix, then change it to point to the matlab data.

mat D2(1,1);
const double* D2mem=access::rw(D2.mem);
matlab2arma(D2,prhs[1]);

// check if the input corresponds to what you are expecting
if( D1.n_rows != D2.n_rows )
mexErrMsgTxt("Columns of D1 and D2 must be of equal length!");

if( D1.n_cols != D2.n_cols )
mexErrMsgTxt("Rows of D1 and D2 must be of equal length!");

plhs[0] = mxCreateDoubleMatrix(D1.n_rows, D1.n_cols, mxREAL);
mat output(1,1);
const double* outputmem=access::rw(output.mem);
matlab2arma(output,plhs[0]);

output=D1+D2;
// output.print();

freeVar(D1,D1mem); // Change back the pointers!!
freeVar(D2,D2mem);
freeVar(output,outputmem);
return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:43:34.277

使用以下编译命令，它确实可以在我的系统（Ubuntu 12.04、64 位、MatlabR2013a、g++）上运行：

```
mex mexTest.cpp -llapack -larmadillo -lblas 
```

其中 mexTest.cpp 包含您提供的代码片段。请注意，为了在 Matlab 下正确编译 Armadillo，需要正确设置库路径。这些可以在 mexopts.sh 中更新，或者通过重定向 $matlabroot/sys/os/XXXXX 中的符号链接来更新，其中 XXXXX 可能会根据您的系统（32/64 位和操作系统）而有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T20:00:02.533

如果您正确设置了犰狳，只需执行以下操作就足够了（代码对我来说也成功运行）：

```
mex your_code.cpp -larmadillo 
```

# c - 循环内的内存初始化：空闲时出现分段错误

> ID：13523810
> 
> 赞同：0
> 
> 时间：2012-11-23T05:58:08.797
> 
> 标签：c, memory-leaks, free

我为嵌入式系统编写了一段相当大的代码，其中一个函数用于在循环中计算和分配值给 calloc 结构。我在代码中遇到了一个错误，我花了一些时间来隔离和修复。如果需要，我想看看其他人是否可以在分享我的经验之前指出错误。

声明块：

```
int *arr;
int i, num;
printf("Enter number of elements: ");
scanf("%d", &num); //Assume num>=0
arr = calloc(num, sizeof(int));
if (arr == NULL)
    return;
i = num; 
```

以下哪个代码块/代码块将在调用 free() 时引发异常，为什么？

```
for (i; i > 0; i--) {
    arr[num - i] = i;
}
free(arr); 
```

或者

```
while (i--) {
    arr[num - i] = i;
}
free(arr); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T06:25:33.207

你的第二个循环

```
while (i--) 
{
  arr[num - i] = i;
  printf("i = %d, num - i = %d, arr = %d\t", i, num - i, arr[num - i]);
} 
```

由于 i 的 postdecrement 导致问题

你开始了，`i == 10`所以第一个任务是`arr[10 - 9] = 9`；当`i`到达`1`哪个是你得到的最后一个循环`arr[10 - 0] = 0`

并导致赋值写入数组范围 0..9 之外

如果您像这样编写while循环，它应该可以工作

```
do 
{
  arr[num - i] = i;
  printf("i = %d, num - i = %d, arr = %d\t", i, num - i, arr[num - i]);
}
while (--i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T06:24:20.517

`for`是正确的，但`while`循环有问题

试试这个简单的：

```
 for(i=0;i<num;i++)
       arr[i]=i;
    free(arr);

    i=0;
    while(i<num)
       {
       arr[i]=i;
       i++;
      }
    free(arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T07:08:00.090

另一个问题是，当用户为 输入负值时`num`，您的 while 循环可能会变为无限，因为`-1`或任何其他负值的计算结果为`True`。`i`如果超出您分配的内存的边界（下限或上限），也可能导致分段错误。

# ruby-on-rails - 在 Rails 中设置 omniauth-browserid (Mozilla Persona)

> ID：13523816
> 
> 赞同：1
> 
> 时间：2012-11-23T05:58:52.853
> 
> 标签：ruby-on-rails, ruby, omniauth, mozilla, browserid

使用**Rails 3.2.9**

添加到**Gemfile**：

```
gem 'omniauth-broswerid' 
```

跑了：

```
bundle 
```

浏览到我的应用程序，单击*使用 Browserid 登录*按钮。得到以下错误：

> 没有路由匹配 [GET] "/auth/browser_id/callback"

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:29:06.583

将此添加到您的路线文件

```
match '/auth/:provider/callback', to: 'sessions#create' 
```

# android - ListView 项目单击 Open Custom Dialog with another Custom Listview

> ID：13523823
> 
> 赞同：0
> 
> 时间：2012-11-23T06:00:05.040
> 
> 标签：android, listview, android-listview, android-dialog, customdialog

在这里，我创建了自定义对话框，其中包括具有单选模式的列表视图。当用户在列表视图中选择一个项目时，下次打开对话框时应该选择它，并且用户还必须能够选择另一个项目。但是我的问题是重新打开对话框时未选中对话框单选按钮。我已经参考了[http://blog.thisisfeifan.com/2011/10/2-lines-text-in-single-choice-listview.html](http://blog.thisisfeifan.com/2011/10/2-lines-text-in-single-choice-listview.html)

那么我的代码有什么问题？

我的自定义对话框 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/relativeLayout1"
      android:layout_width="250dp"
      android:layout_height="50dp"    
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:background="@drawable/list_selector">

     <LinearLayout android:layout_centerVertical="true"
         android:layout_width="250dp"
         android:layout_height="50dp"
         android:layout_alignParentLeft="true"
         android:orientation="vertical" android:gravity="center_vertical">

     <TextView android:layout_width="wrap_content"
         android:layout_height="wrap_content" android:id="@+id/tv_MainText"
         android:textAppearance="?android:attr/textAppearanceMedium"
         android:paddingLeft="12dp" />
     </LinearLayout>

     <RadioButton android:layout_height="wrap_content"
         android:id="@+id/rb_Choice" android:layout_width="wrap_content"  android:layout_centerVertical="true"
         android:layout_alignParentRight="true" android:gravity="center_vertical"
         android:focusable="false"  android:clickable="false"
         android:focusableInTouchMode="false"
         android:paddingRight="12dp">
      </RadioButton>

</RelativeLayout> 
```

自定义对话框列表视图文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="250dp"
   android:layout_height="210dp">

   <LinearLayout 
         android:id="@+id/layout_btn"
         android:layout_width="fill_parent"
         android:layout_height="3dp"
         android:gravity="center">          
        <ImageView
            android:src="@drawable/separator"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_above="@+id/dialoglist"
        />        
  </LinearLayout>
  <ListView
        android:id="@+id/dialoglist"
        android:layout_width="250dp"
        android:layout_height="215dp"
        android:divider="#242424"
        android:dividerHeight="2dp"
        android:listSelector="@drawable/list_selector" 
        android:paddingTop="5dp"
        />
  </RelativeLayout> 
```

在我的主要活动中，我有 listview 并在列表项上单击我打开了自定义对话框：

```
lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                if(position == 1)
                {
                    final Dialog dialog = new Dialog(context,R.style.CustomDialogTheme);
                    dialog.setContentView(R.layout.dialog_layout);

                    dialog.setTitle("Select Font Size");

                    final String[] sizeType = new String[] {"Normal" , "Medium" , "Large" , "Extra Large"};
                    final ArrayList<HashMap<String, Object>> m_data = new ArrayList<HashMap<String, Object>>();
                    final ArrayList<HashMap<String, Object>> m_data_new = new ArrayList<HashMap<String, Object>>();

                    final HashMap<String, Object> data_new = new HashMap<String, Object>();
                    for(int i = 0; i < sizeType.length;i++)
                    {
                        HashMap<String, Object> data = new HashMap<String, Object>();
                        data.put("item1",sizeType[i]);

                        m_data.add(data);

                    }

                        for (HashMap<String, Object> m :m_data) //make data of this view should not be null (hide )

                        {
                                m.put("checked", false);

                        }

                    final ListView lst = (ListView) dialog.findViewById(R.id.dialoglist);
                    //lst.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

                     final SimpleAdapter adapter = new SimpleAdapter(context, m_data, R.layout.dialoglist_item,new String[] {"item1","checked"},new int[] {R.id.tv_MainText,R.id.rb_Choice}); 
                     lst.setAdapter(adapter);

                     lst.setOnItemClickListener(new OnItemClickListener() {
                        public void onItemClick(AdapterView<?> arg0, View arg1,
                                int item, long arg3) {
                            RadioButton rb = (RadioButton) dialog.findViewById(R.id.rb_Choice);
                            if (!rb.isChecked()) //OFF->ON
                            {                       
                                for (HashMap<String, Object> m :m_data) //clean previous selected
                                    m.put("checked", false);

                                m_data.get(item).put("checked", true);              
                                adapter.notifyDataSetChanged();

                            }       

                            selectedSize = sizeType[item];
                            //dialog.dismiss();

                        }

                    });
                    dialog.show();
                } 
```

所以请解决我的问题。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:20:51.563

为了简单地保存一个值以保持应用程序会话，您可以使用`SharedPreferences`API：这是一个保存示例：

```
 SharedPreferences settings = getSharedPreferences("MYPREFS", 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putBoolean("isChecked", rb.isChecked());
    editor.commit(); 
```

你的单选按钮在哪里`rb`。并在下次检索并应用它，您可以使用：

```
 SharedPreferences settings = getSharedPreferences("MYPREFS", 0);
    rb.setChecked(settings.getBoolean("isChecked", false)); 
```

请注意，`false`这里只是一个默认值，以防带有该键的值尚不存在 sharedPrefs 文件。如果不存在，它将自动创建一个。

# asp.net - 向asp.net中的所有类型的电子邮件地址发送电子邮件

> ID：13523825
> 
> 赞同：0
> 
> 时间：2012-11-23T06:00:18.000
> 
> 标签：asp.net, asp.net-mvc, email

我想对`send email`我的用户，它工作正常。但由于某些原因，有些用户收不到我的邮件，我猜是因为他们`email's format`的字数超过 3 个音节`(a@b.c.r)` ，但其他可以收到我邮件的邮件格式是这样的：`a@b.c` 现在我应该如何更改代码，以便`send emails to every type of emails`.

这是代码：

```
 MailMessage msg = new MailMessage();
        msg.Priority = MailPriority.High;
        msg.Subject = "Account Information";
        //  msg.ReplyTo = new MailAddress(TextBox2.Text);
        msg.From = new MailAddress("waag@waag.ir");
        msg.To.Add(new MailAddress(email));
        SmtpClient mailsender = new SmtpClient();

        mailsender.Host = "SmtpClient.waag.ir";

        mailsender.Port = 587;
        mailsender.EnableSsl = true;
        mailsender.Credentials = new System.Net.NetworkCredential("waag@waag.ir", "classaspnet");
      //  mailsender loginInfo = new System.Net.NetworkCredential("waag@waag.ir", "classaspnet");

        SmtpClient smtp = new SmtpClient();
        msg.Body = bodyMsg.ToString(); 
```

这是网络配置文件代码：

```
 <mailSettings>
      <smtp from="waag@goldentest.ir">
        <network host="mail.waag.ir" port="25" userName="waag@waag.ir" password="*****"/>
      </smtp>
    </mailSettings>
  </system.net> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:30:22.660

您不必更改您的代码 - 提供的电子邮件地址是否有效。您无法创建将无效电子邮件地址转换为有效电子邮件地址的函数。

您的某些用户可能无法收到您的电子邮件的原因有很多。我只列举其中几个：

*   电子邮件地址不存在
*   电子邮件收件箱已满
*   您的电子邮件被标记为垃圾邮件
*   临时网络错误
*   电子邮件地址的格式无效

大多数情况下，您的 smtp 服务器可以将邮件投递到国外邮件服务器，因此您在发送邮件时不会出现异常。

几分钟、几小时甚至几天后，国外邮件服务器会向发件人的邮箱发送一封投递失败通知邮件，并注明具体的失败原因。

# php - 不使用url中的参数，php中访问其他页面的方法有哪些

> ID：13523826
> 
> 赞同：1
> 
> 时间：2012-11-23T06:00:23.087
> 
> 标签：php

如果不传递 URL 中的参数，我们如何将变量发送到其他页面并在 php.ini 中使用该页面中的功能。我们如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:11:13.230

有两种方法可以实现这一目标。1）使用cookie和2）使用会话。使用会话/cookie，您将拥有所有应用程序的变量。

这里有一些关于会话和 cookie 的教程。

**会议**

[http://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)

[http://php.about.com/od/advancedphp/ss/php_sessions_2.htm](http://php.about.com/od/advancedphp/ss/php_sessions_2.htm)

**曲奇饼**

[http://www.w3schools.com/php/php_cookies.asp](http://www.w3schools.com/php/php_cookies.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:13:41.073

有两种方法可以将数据发送到其他页面。1- 在表单操作上重定向页面并在 POST 变量上获取数据 2- 在会话中设置变量数据并从任何其他页面的会话中获取。

[http://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T06:26:54.883

会话和 Cookie 是最好的方法。您也可以使用 php.ini 中的类和函数。其他答案正确

# c# - 具有事件支持的 C# Socket Abstraction/Framemork

> ID：13523830
> 
> 赞同：2
> 
> 时间：2012-11-23T06:00:50.947
> 
> 标签：c#, sockets

我正在寻找隐藏套接字细节并提供更典型的.NET 接口的东西。我查看了 SuperSocket 和 WCF，但我正在寻找更轻量级的东西。

我想要的一件事是能够向所有连接到套接字（或连接并请求监听该事件）的客户端发送事件，例如

```
// client code...
socketServer.connect("192.168.1.15", 5008);
socketServer.PostMessage("hello");
socketServer.SomethingHappened += clientHandler; 
```

本机客户端也应该能够在没有 .NET 的情况下使用，但需要实现细节。有这样的东西吗？什么是支持这种类型活动的好策略？

# c# - C# 有效地检查剪贴板是否包含重复项

> ID：13523834
> 
> 赞同：0
> 
> 时间：2012-11-23T06:01:07.710
> 
> 标签：c#, windows-7

我有一个代码，可以一次将 30 个字符串从随机更新的数据源复制到剪贴板；有时在一秒钟内超过一百个新字符串，有时几分钟内没有更新。我想通过套接字将所有字符串发送到数据库。在不发送重复项的情况下通过套接字发送字符串的最有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:29:06.803

一种简单但有效的方法是在将字符串发送到数据库之前使用 LINQ 检查并删除重复项：

```
string[] original; //the array where all the string from your clipboard are in

string[] newStrings = original.Distinct().ToArray(); 
```

这样您就可以从`original`.

# android - 如何以编程方式找出android中的测试环境

> ID：13523835
> 
> 赞同：3
> 
> 时间：2012-11-23T06:01:14.933
> 
> 标签：android

我在我的应用程序中与多个内容提供商合作。所有这些内容提供者都与 SQliteOpenHelper 的单例实例（与应用程序上下文一起工作）进行通信。这在生产中效果很好。当涉及到测试（特别是内容提供者测试）时，拥有 SQLiteOpenHelper 的单例实例并不是一个好主意，因为它不会为每次测试运行创建干净的 slate 数据库

在内容提供程序代码中，我想确定我是否处于测试模式，这取决于我将决定在单例打开 hlper 或每个上下文打开帮助器之间切换

有什么好的方法可以做到这一点..android是否提供任何api来确定应用程序是否处于测试模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:05:17.670

不完全确定这是否是您想要的，但 Context 类中有一个方法 getApplicationContext() 。试试这个，看看它是否能解决你的问题。

# php - 警告：mysql_num_rows()：提供的参数不是没有 mysql_error() 的有效 MySQL 结果资源

> ID：13523836
> 
> 赞同：0
> 
> 时间：2012-11-23T06:01:16.547
> 
> 标签：php, mysql, mysql-num-rows

在过去的一个半小时里，我一直在查看这段代码，但我不知道出了什么问题。它不返回任何错误，并且`while`使用查询调用的循环工作正常，但`mysql_num_rows`不会工作。

在我阅读代码之前，我想让你知道我已经尝试在查询中消除所有额外的混乱，例如，`Order By`但它仍然会引发警告。

编码：

```
 <?php
    global $_SESSION,$os_DB,$ui,$count;
    //Loggedin
    if($_SESSION['login']!=1)
    {
        print "You must be logged in.";
        include($root . 'footer.php');
        exit;
    }
    //Check banned account
    elseif($ui['level']=="2"){
        print "Sorry but your account is banned.";
        include($root . 'footer.php');
        exit;
    }
    //Check email verified
    elseif($ui['email_check']=="0"){
        print "Sorry but your account has not been verified, to verify your account now please visit <a href='index.php?index=verify&email=".$ui['email']."'>THIS LINK</a>.";
        include($root . 'footer.php');
        exit;
    }
    date_default_timezone_set('America/New_York');
    $country= $ui['country'];
    $dates=mysql_query("SELECT * FROM `contest` WHERE `countries` LIKE '%$country%'");
    $timestamp = time();

    $getcontests = $os_DB->query("SELECT * FROM contest WHERE date_1 <= '$timestamp' AND date_2 >= '$timestamp' AND countries LIKE '%$country%'");
        $num = $os_DB->num($getcontests);

            if($num == 0){
            print"<td colspan='4'>There are currently no active contests</td>";
            }
            else
            {

    while ($dat = mysql_fetch_array($dates)) {
    $tname = preg_replace('/\s+/', '', $dat['name']);
///////////Problem Area vvvv////////////////////////
    $places="(SELECT * FROM `".$tname."_contest` WHERE `username` <> 'admin' AND `completed` >= '".$dat['min_offers']."' ORDER BY `completed` DESC LIMIT ".$dat['rewards'].")";
    $results=mysql_query($places) or die(mysql_error());

    if ($dat['rewards'] == 1){
    $reward = "".$dat['reward_1']."";
    }
    else if ($dat['rewards'] == 2){
    $reward = "".$dat['reward_1'].",".$dat['reward_2']."";
    }
    else if ($dat['rewards'] == 3){
    $reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3']."";
    }
    else if ($dat['rewards'] == 4){
    $reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4']."";
    }
    else if ($dat['rewards'] == 5){
    $reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5']."";
    }
    else if ($dat['rewards'] == 6){
    $reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6']."";
    }
    else if ($dat['rewards'] == 7){
    $reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6'].",".$dat['reward_7']."";
    }
    else if ($dat['rewards'] == 8){
    $reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6'].",".$dat['reward_7'].",".$dat['reward_8']."";
    }
    else if ($dat['rewards'] == 9){
    $reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6'].",".$dat['reward_7'].",".$dat['reward_8'].",".$dat['reward_9']."";
    }
    else if ($dat['rewards'] == 10){
    $reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6'].",".$dat['reward_7'].",".$dat['reward_8'].",".$dat['reward_9'].",".$dat['reward_10']."";
    }

    $rewardsa = explode(",", $reward);
    $i=0;
    $a=1;

    // Offers Contest

    if(time() <= $dat['date_2'] && time() >= $dat['date_1'] && $dat['type'] == offer) {
    print" <table width ='100%'><tr><th align='center'><font size='4'>{$dat['name']}</font></th><th align='right'><font size='1'>".date("m/d/Y h:i A", $dat['date_1'])."-".date("m/d/Y h:i A", $dat['date_2'])."</font></th></tr></table><br />".$dat['desc']."<br /><font size='1' color='white'>You must complete offers worth at least ".$dat['min_points']." points or $".$dat['min_cash']." to count towards contest!<br /><br />
    You must also complete at least ".$dat['min_offers']." offers in order to be eligible for winnings.</font><br /><br />";
    print" <table width ='100%'><tr><th align='left'>Place</th><th align='center'>User</th><th align='right'>Prize</th><th align='right'>Completed</th></tr>";

    if(mysql_num_rows($results == 0)){
    if($dat['r_type'] == points){
    print"  <tr><td align='left'>{$a}</td><td align='center'>......</td><td align='right'>{$rewardsa[$i]} points</td><td align='right'>--</td></tr>";
    }
    if($dat['r_type'] == cash){
    print"  <tr><td align='left'>{$a}</td><td align='center'>......</td><td align='right'>$".$rewardsa[$i]."</td><td align='right'>--</td></tr>";
    }
    $i++;
    $a++;
    }

    while ($place = mysql_fetch_array($results)) {
    if($dat['r_type'] == points){
    print"  <tr><td align='left'>{$a}</td><td align='center'>{$place['username']}</td><td align='right'>{$rewardsa[$i]} points</td><td align='right'>{$place['completed']}</td></tr>";
    }
    if($dat['r_type'] == cash){
    print"  <tr><td align='left'>{$a}</td><td align='center'>{$place['username']}</td><td align='right'>$".$rewardsa[$i]."</td><td align='right'>{$place['completed']}</td></tr>";
    }
    $i++;
    $a++;
    }
    }
    }
    }

    ?>  
    </table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T06:03:20.210

在您的代码中替换`mysql_num_rows($results == 0)`为`mysql_num_rows($results) == 0`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T06:05:36.623

你应该`mysql_num_rows($results) == 0`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T06:04:02.427

这

```
if(mysql_num_rows($results == 0)){ 
```

应该

```
if(mysql_num_rows($results) == 0){ 
```

# ios - 找到论文的角落

> ID：13523837
> 
> 赞同：11
> 
> 时间：2012-11-23T06:01:29.810
> 
> 标签：ios, iphone, objective-c, opencv, image-processing

我是 openCV 的新手，过去 3 到 4 天都在苦苦挣扎，我已经检测到纸张边界，现在我想在角落画 4 个圆圈。

我从这段代码中画出边界

```
const cv::Point* p = &squares[i][0];

int n = (int)squares[i].size();

polylines(image, &p,&n, 1, true, Scalar(255,255,0), 5, CV_AA); 
```

我是openCV的新手，所以我认为我有左上角点p-> x和p-> y，但是我如何得到其他角，我也对这个折线方法中的参数&n感到困惑，这个折线方法如何绘制完整的矩形？

当我使用边界矩形时，它并不完美，它在纸张侧面留下了很小的空间。

非常感谢任何帮助

代码是：

```
- (cv::Mat)finshWork:(cv::Mat &)image
{
// read in the apple (change path to the file)
Mat img0 =image;// imread("/home/philipp/img/apple.jpg", 1);

Mat img1;
cvtColor(img0, img1, CV_RGB2GRAY);

// apply your filter
Canny(img1, img1, 100, 200);

// find the contours
vector< vector<cv::Point> > contours;
findContours(img1, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE);

/////for SQUARE CODE
std::vector<std::vector<cv::Point> > squares;
std::vector<cv::Point> approx;
for( size_t i = 0; i < contours.size(); i++ )
{
    cv::approxPolyDP(cv::Mat(contours[i]), approx, arcLength(cv::Mat(contours[i]), true)*0.02, true);
    if( approx.size() == 4 && fabs(contourArea(cv::Mat(approx))) > 1000 && cv::isContourConvex(cv::Mat(approx))) {
        double maxCosine = 0;

        for( int j = 2; j < 5; j++ )
        {
            double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
            maxCosine = MAX(maxCosine, cosine);
        }

        if( maxCosine < 0.3 ) {
            squares.push_back(approx);
            cv::Point newPoint = approx[0]; 

            NSLog(@"x is %d and  y is %d",newPoint.x,newPoint.y);
        }
    }
}

const cv::Point* p = &squares[0][0];

int n = (int)squares[0].size();

NSLog(@"%d",n);

//THIS IS WORKING CODE              

    polylines(image, &p,&n, 1, true, Scalar(0,0,255), 10, CV_AA);
    //polylines(image, &p,&n, 1, true, Scalar(255,255,0), 5, CV_AA);
////////////
} 
```

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-23T16:28:57.567

参考[我的原始代码](https://stackoverflow.com/a/8863060/176769)，它只是检测图像上的正方形。

这意味着在应用程序的**main**方法中，您将编写类似于以下伪代码的内容来调用`find_squares()`：

```
Mat image = imread("test.jpg", 1);

// Detect all regions in the image that are similar to a rectangle
vector<vector<Point> > squares;
find_squares(image, squares);

// The largest of them probably represents the paper
vector<Point> largest_square;
find_largest_square(squares, largest_square);

// Print the x,y coordinates of the square
cout << "Point 1: " << largest_square[0] << endl;
cout << "Point 2: " << largest_square[1] << endl;
cout << "Point 3: " << largest_square[2] << endl;
cout << "Point 4: " << largest_square[3] << endl; 
```

诀窍依赖于`find_largest_square()`下面介绍：

```
void find_largest_square(const vector<vector<Point> >& squares, vector<Point>& biggest_square)
{
    if (!squares.size())
    {
            // no squares detected
            return;
    }

    int max_width = 0;
    int max_height = 0;
    int max_square_idx = 0;
    const int n_points = 4;

    for (size_t i = 0; i < squares.size(); i++)
    {
            // Convert a set of 4 unordered Points into a meaningful cv::Rect structure.
            Rect rectangle = boundingRect(Mat(squares[i]));

    //        cout << "find_largest_square: #" << i << " rectangle x:" << rectangle.x << " y:" << rectangle.y << " " << rectangle.width << "x" << rectangle.height << endl;

            // Store the index position of the biggest square found
            if ((rectangle.width >= max_width) && (rectangle.height >= max_height))
            {
                    max_width = rectangle.width;
                    max_height = rectangle.height;
                    max_square_idx = i;
            }
    }

    biggest_square = squares[max_square_idx];
} 
```

# xmppframework - 如何检查用户是否在 XMPPRoster 中？

> ID：13523839
> 
> 赞同：1
> 
> 时间：2012-11-23T06:01:35.193
> 
> 标签：xmppframework

我的 iOS 应用程序目前与 XMPPFramework 一起用于聊天。但我需要它是 abel 来检查我的联系人列表中是否存在给定 xmpp 用户名的用户。任何关于在哪里看的想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:36:07.413

您必须了解如何`XMPPRoster`在`XMPPFramework`.

如果我发送服务器请求好友列表，这个结构将被发送

```
<iq id="xxx" type="get">
   <query xmlns="jabber:iq:roster"></query>
</iq> 
```

“iq”表示您向服务器查询某些内容，“query”是您想要接收的内容。

```
XMPPRosterMemoryStorage *rosterStorate = [[XMPPRosterMemoryStorage alloc] init];
XMPPRoster * roster = [[XMPPRoster alloc] initWithRosterStorage:rosterStorate];
[roster addDelegate:self delegateQueue:dispatch_get_main_queue()];
[roster activate:[self xmppStream]];
[roster fetchRoster]; 
```

如果您查看该`fetchRoster`方法，您可以在源代码上方找到我写的查询。

你必须`- (void)xmppRosterDidPopulate:(XMPPRosterMemoryStorage *)sender`在 XMPPRosterMemoryStorageDelegate 中定义方法

祝你好运。

# performance - 视图内的 ViewNavigator

> ID：13523843
> 
> 赞同：0
> 
> 时间：2012-11-23T06:02:14.960
> 
> 标签：performance, apache-flex, memory, mobile, view

我正在玩我的 flex 手机，我可以看到我能够在一个视图中添加多个视图**导航**器。这意味着每个**视图**导航器都将拥有自己的导航器堆栈，并且能够在其级别执行推送和弹出操作。这是一个好的设计吗？这会影响性能吗？一旦我离开它，它会阻止我的视图（包含视图导航器）被破坏吗？代码看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" title="Home Page" >

    <s:ViewNavigator left="0" right="0" top="0" bottom="92%" firstView="headerView"/>
    <s:ViewNavigator left="0" right="75%" top="8%" bottom="0"  firstView="middleView"/>
    <s:ViewNavigator left="25%" right="0" top="8%" bottom="0" firstView="rightView"/>

</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:59:56.883

您可以尝试在您的应用程序（ViewNavigatorApplication 或其他）上使用它：

```
persistNavigatorState="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:09:33.593

这就是 Adob​​e 的[TabbedViewNavigator](http://help.adobe.com/en_US/flex/mobileapps/WS77c1dbb1bd80d383527e1a6412a8a5d909a-8000.html)所做的，所以它不会那么糟糕 ;-)

# objective-c - 应用程序在后台被杀死

> ID：13523844
> 
> 赞同：0
> 
> 时间：2012-11-23T06:02:16.623
> 
> 标签：objective-c, ios, location

我想使用背景 gps 背景，并设置应用程序寄存器以进行位置更新。我希望我的应用程序不会被系统杀死，但是当 10 分钟我的应用程序关闭时。

我的代码是：

```
 #import "AppDelegate.h"
    #import "ViewController.h"

    @implementation AppDelegate
    @synthesize locationManager;

    - (void)dealloc
    {
     [_window release];
      [_viewController release];
      [super dealloc];
     }

     - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {  
    NSArray *paths = NSSearchPathForDirectoriesInDomains(
                                                         NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDir = [paths objectAtIndex:0];
    NSString *logPath = [documentDir stringByAppendingPathComponent:@"decrypt.log"];
    freopen([logPath cStringUsingEncoding:NSASCIIStringEncoding], "w", stderr);

    timer_public = [NSTimer scheduledTimerWithTimeInterval:5*60
                                                    target:self
                                                  selector:@selector(locationManagerDidTimeout)
                                                  userInfo:nil
                                                   repeats:YES];

    self.locationManager = [[CLLocationManager alloc] init];
    [self.locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    //self.locationManager.distanceFilter  = kCLDistanceFilterNone;  //report all movement
    self.locationManager.distanceFilter  = 1;  //report all movement
    self.locationManager.delegate = self;
    [self.locationManager startUpdatingLocation];

    late=0;

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
   }

     -(void)showNotificationWithAlertBody:(NSString *)alertBody  object:(id)object  objectkey:(NSString *)objectkey{

    UILocalNotification *alarm = [[UILocalNotification alloc] init];
    if (alarm) {
        alarm.fireDate = [NSDate date];
        alarm.timeZone = [NSTimeZone defaultTimeZone];
        alarm.repeatInterval = 0;
        alarm.soundName = UILocalNotificationDefaultSoundName;
        alarm.alertBody =[NSString stringWithFormat:@" %f",[[UIDevice currentDevice]batteryLevel]];
        // alarm.alertAction

       //        NSDictionary *infoDic = [NSDictionary dictionaryWithObject:object forKey:objectkey];
       //        alarm.userInfo = infoDic;

        //        UIApplication *app = [UIApplication sharedApplication];
        //        [app scheduleLocalNotification:alarm];
        NSLog(@"alarm=%@",alarm);
        [[UIApplication sharedApplication] presentLocalNotificationNow:alarm];  
    }   
  }
    -(NSString *)returnTime_All:(NSDate *)date{

    NSDate *dateStr=[NSDate dateWithTimeIntervalSince1970:[date timeIntervalSince1970]];
    NSDateFormatter* formatter = [[[NSDateFormatter alloc] init]autorelease] ;
    [formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSString *strDate=[formatter stringFromDate:dateStr];
    return strDate;

   }

     -(void)locationManagerDidTimeout
     {

       NSLog(@"time=%@", [self returnTime_All:[NSDate date] ] );
      }

      //retrieve the coordinate
      - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
      {
          NSLog(@"++++++++++++++++");
            NSTimeInterval new=[[NSDate date] timeIntervalSince1970];

            NSTimeInterval cha=new-late;
            if( cha>=5*60){

           // if ([newLocation horizontalAccuracy] > 0.0f && [newLocation horizontalAccuracy] <= 100.0f)
          // {
                      late=[[NSDate date] timeIntervalSince1970]*1;
                    NSString *strLoc=[NSString stringWithFormat:@"latitude=%f  longitude=%f",newLocation.coordinate.latitude,newLocation.coordinate.longitude];
                    NSData *imgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"www.baidu.com"]];

                    NSString *str=[[NSString alloc]initWithData:imgData encoding:NSUTF8StringEncoding];
                    NSLog(@"str=%@",str);
                    [self showNotificationWithAlertBody:strLoc object:nil objectkey:nil];
           } 
      }

     - (void)backgroundHandler {

    NSLog(@"### -->backgroundinghandler");

    UIApplication* app = [UIApplication sharedApplication];

    __block UIBackgroundTaskIdentifier bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self.locationManager stopMonitoringSignificantLocationChanges];
         self.locationManager.delegate=self;
        [self.locationManager startUpdatingLocation];
        [NSThread sleepForTimeInterval:2];
        [self.locationManager stopUpdatingLocation];
      });
    }

     - (void)applicationDidEnterBackground:(UIApplication *)application
    {
    /*
     Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.
     If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
     */ 
     //    [ self.locationManager stopUpdatingLocation];
     //    [self.locationManager startMonitoringSignificantLocationChanges];

    late=[[NSDate date] timeIntervalSince1970];
    BOOL isInBackground = YES;
    if ([UIApplication sharedApplication].applicationState == UIApplicationStateBackground)
    {
        isInBackground = YES;        
        [self backgroundHandler];       
    } 
    }

       - (void)applicationWillEnterForeground:(UIApplication *)application
      {
         // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.

    if (self.locationManager==nil) {
        self.locationManager = [[CLLocationManager alloc] init];
       // self.locationManager.distanceFilter  = kCLDistanceFilterNone;  //report all movement
        [self.locationManager stopMonitoringSignificantLocationChanges];
        [self.locationManager setDesiredAccuracy:kCLLocationAccuracyHundredMeters];//精确度

    }
       [self.locationManager stopMonitoringSignificantLocationChanges];
       self.locationManager.delegate=self;
      [self.locationManager startUpdatingLocation];
     }

       - (void)applicationDidBecomeActive:(UIApplication *)application
      {
        // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
       }

     - (void)applicationWillTerminate:(UIApplication *)application
     {
        // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.

       NSLog(@"### -->applicationWillTerminate");
     }

    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:43:18.230

使用计时器（当应用程序进入后台时暂停）将是错误的方法。

Apple 强烈建议不要*自行终止*您的应用程序，因为用户可能会对您的应用程序崩溃产生错误的印象（然后在应用程序商店中留下有关您的应用程序的不良反馈或评论）。

如果你*真的*想这样做，我会这样做 - 在启动时或应用程序进入后台时 - 将应用程序的变量或属性设置为未来 10 分钟后的日期.

当您在后台模式下获得核心位置/GPS 更新时，如果当前日期/时间超出您之前保存的日期，则应用程序可以终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:18:05.960

您可以参考**Location Awareness Programming Guide**的 Background部分中的**Getting Location Events**。 [http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)

# css - 可选的子选择器，带有 CSS/Stylus/LESS：.aa > .bb? > .cc

> ID：13523848
> 
> 赞同：14
> 
> 时间：2012-11-23T06:02:24.023
> 
> 标签：css, css-selectors, less, stylus

考虑这个带有 CSS 类*aa*、*bb*和*cc*的 HTML ：

```
<div class='aa'>
<div class='bb'>
<div class='cc'>
</div>
</div>
</div> 
```

我可以`class=cc`像这样选择标签：`.aa > .bb > .cc`. 但是，在我的情况下，有时`.bb`标签不存在，即 HTML 看起来像这样：

```
<div class='aa'>
<div class='cc'>
</div>
</div> 
```

因此，要选择所有`.cc`接近 的`.aa`，我需要指定两个 CSS 路径：

```
.aa > .bb > .cc,
.aa > .cc { .... } 
```

这行得通，但是，没有更短的方法吗？与此类似的东西：

```
.aa > (.bb >)? .cc { ... }   /* ? means "optional" */ 
```

使用 CSS 或 Stylus 或 LESS 之类的东西？

动机：在现实世界中，“aa”和“bb”和“cc”的名字有点长，“aa”和“cc”前后的东西更多，不需要重复就好了那些东西。

请注意：在我的情况下，这不起作用：`.aa .cc`因为那会匹配页面上其他地方的太多`.cc`s 。`.cc`s 需要紧接在或`.aa`之下`.aa > .bb`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T15:03:06.327

对于 Stylus 和 Sass，您可以这样做（[Sass 的实时示例](http://codepen.io/kizu/pen/kEhfp)）：

```
.aa
  > .bb, &
    > .cc
      width: 10px 
```

我在 Sass 的单行中找不到这样做的方法，但对于 Less/Stylus/Scss 你也可以这样做（[Scss](http://codepen.io/kizu/pen/zIkpC)的实时示例，[对于 Less](http://codepen.io/kizu/pen/BuCem)）：

```
.aa { > .bb, & { > .cc {
  width: 10px
}}} 
```

这也不是那么漂亮，但总比没有好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:11:01.893

行不通`.aa > .cc, .aa > .bb > .cc {}`？还是我误解了你的问题？
这仅选择`.cc`那些是直接`.aa`子代和`.cc`那些是`.bb`子代（的子代`.aa`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T15:55:39.580

如果你想使用你的选项，顺便说一句很有趣，你可以使用最正确的形式：

```
>.aa (>.bb)? >.cc { ... } 
```

但正确的形式是：

```
.aa .cc { ... } 
```

进入手写笔：

```
.aa   
  .cc 
```

就这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-02T10:49:42.197

我使用 :has() 解决方案，在可用时给予选择器强化

```
//adds .specific-ancestor-class as more specific selector, when available as ancestor, otherwise select inner with less specificity
*:has(.specific-ancestor-class, *){
    .inner {
        //style...
    }
} 
```

# python - 使用're'从字符串中提取列表

> ID：13523854
> 
> 赞同：1
> 
> 时间：2012-11-23T06:03:07.440
> 
> 标签：python, regex, parsing

我有一个这种格式的字符串：`any_string = "[u'02', u'03', u'04', u'05']"`. 我想从中提取一个应该看起来像的列表`new_list = ['02', '03', '04', '05']`

我正在使用're'。我正在编写以下代码来完成这项工作，但没有运气

```
import re

new_list = re.findall(r'["w "]', any_string) 
```

我得到的结果是`[' ', ' ', ' ']`

基本上我想要一个这样的列表`new_list = ['02', '03', '04', '05']`，这样我就可以遍历各个项目，比如`02, 03, 04 , 05`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T06:08:44.447

如果你不被束缚`re`，那又如何`ast`？再多一封信:)

```
In [1]: import ast

In [2]: any_string = "[u'02', u'03', u'04', u'05']"

In [3]: my_list = ast.literal_eval(any_string)

In [4]: type(my_list)
Out[4]: <type 'list'>

In [5]: my_list
Out[5]: [u'02', u'03', u'04', u'05']

In [6]: for item in my_list:
   ...:     print item
   ...:
   ...:
02
03
04
05 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T06:07:21.950

我会问你从哪里得到这个字符串。它看起来像一个通过`str()`或的列表`repr()`。如果您需要将列表序列化为字符串，请使用 JSON 或[pickle](http://docs.python.org/2/library/pickle.html)。

# android - 如何获取每个权限的保护级别？

> ID：13523859
> 
> 赞同：5
> 
> 时间：2012-11-23T06:03:20.973
> 
> 标签：android, permissions

对于下面给出的代码，我试图列出所选应用程序中每个权限的保护级别。但我不知道如何完成它。

```
ArrayList<String> list_permission = new ArrayList<String>();
        String[] reqp = info.requestedPermissions;
        if (reqp != null) {
            for (i = 0; i < reqp.length; i++) {

                k = i + 1;

                String a = reqp[i];
                if (a.contains("android.permission.")) {
                    String aa[] = a.split("android.permission.");
                    list_permission.add(aa[1]);
                } else {
                    list_permission.add(a);
                }

            }

        } 
```

任何人都可以帮我解决这个问题...只想在权限前添加保护级别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T06:23:08.503

您可以使用[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html)类的[getPermissionInfo()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getPermissionInfo%28java.lang.String,%20int%29)方法来获取任何特定权限的[PermissionInfo](http://developer.android.com/reference/android/content/pm/PermissionInfo.html)对象。[PermissionInfo](http://developer.android.com/reference/android/content/pm/PermissionInfo.html)对象具有属性[Protection Lavel](http://developer.android.com/reference/android/content/pm/PermissionInfo.html#protectionLevel)，可用于检查任何权限的保护级别...您可以根据[PermissoinInfo](http://developer.android.com/reference/android/content/pm/PermissionInfo.html)类中定义的常量来检查它，例如 `PROTECTION_FLAG_SYSTEM`.

像下面的代码：

```
for (PermissionInfo permission : packageInfo.permissions) {
    // Dump permission info
    String protectionLevel;
    switch(permission.protectionLevel) {
    case PermissionInfo.PROTECTION_NORMAL : protectionLevel = "normal"; break;
    case PermissionInfo.PROTECTION_DANGEROUS : protectionLevel = "dangerous"; break;
    case PermissionInfo.PROTECTION_SIGNATURE : protectionLevel = "signature"; break;
    case PermissionInfo.PROTECTION_SIGNATURE_OR_SYSTEM : protectionLevel = "signatureOrSystem"; break;
    default : protectionLevel = "<unknown>"; break;
    }
    Log.i("PermissionCheck", permission.name + " " + protectionLevel);
  } 
```

**更新**：

要获得以下保护级别`requestedPermissions`：

```
String[] reqp = info.requestedPermissions;
String perm = reqp[i];
if (perm.contains("android.permission.")) {
    try {
        PermissionInfo pi = getPackageManager().getPermissionInfo(perm, PackageManager.GET_META_DATA);
        String protctionLevel = "unknown";

        switch(pi.protectionLevel) {
            case PermissionInfo.PROTECTION_NORMAL : protctionLevel = "normal"; break;
            case PermissionInfo.PROTECTION_DANGEROUS : protctionLevel = "dangerous"; break;
            case PermissionInfo.PROTECTION_SIGNATURE : protctionLevel = "signature"; break;
            case PermissionInfo.PROTECTION_SIGNATURE_OR_SYSTEM : protctionLevel = "signatureOrSystem"; break;
            case PermissionInfo.PROTECTION_FLAG_SYSTEM : protctionLevel = "system"; break;
            default : protctionLevel = "<unknown>"; break;
        }
        list_permission.add(perm + "        "+protctionLevel);
    } catch (NameNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} else {
    list_permission.add(perm);
} 
```

以下行仅适用于 API 级别 16 或更高级别：

```
 case PermissionInfo.PROTECTION_FLAG_SYSTEM : protctionLevel = "system"; break; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T06:24:09.500

// 获取核心android包的权限

```
PackageInfo packageInfo = getPackageManager().getPackageInfo("android", PackageManager.GET_PERMISSIONS);
if (packageInfo.permissions != null) {
  // For each defined permission
  for (PermissionInfo permission : packageInfo.permissions) {
    // Dump permission info
    String protectionLevel;
    switch(permission.protectionLevel) {
    case PermissionInfo.PROTECTION_NORMAL : protectionLevel = "normal"; break;
    case PermissionInfo.PROTECTION_DANGEROUS : protectionLevel = "dangerous"; break;
    case PermissionInfo.PROTECTION_SIGNATURE : protectionLevel = "signature"; break;
    case PermissionInfo.PROTECTION_SIGNATURE_OR_SYSTEM : protectionLevel = "signatureOrSystem"; break;
    default : protectionLevel = "<unknown>"; break;
    }
    Log.i("PermissionCheck", permission.name + " " + protectionLevel);
  }
} 
```

# zend-framework - 使用 Zend 更新 Google 日历

> ID：13523861
> 
> 赞同：0
> 
> 时间：2012-11-23T06:03:38.920
> 
> 标签：zend-framework, gdata

我想使用 Zend Gdata 更新 Google 日历中的事件。现在我已经使用 php 将事件添加到特定的日历中。在编辑时，我想将其更新为我允许的不同日历。因此必须从原始日历中删除该条目，并应将其添加到新日历中。如何使用 Zend 数据执行此操作，而不会在更新时触发删除事件的调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:52:57.060

这是 IBM 使用 zend 框架工作的一些很棒的东西。进行基本编辑，[https://www.ibm.com/developerworks/library/x-googleclndr/](https://www.ibm.com/developerworks/library/x-googleclndr/)

其他变量包括`$description`, 以及数组中的位置。

```
$event->where = array($gcal->newWhere($where)); 
```

# php - PHP 树和内存使用

> ID：13523866
> 
> 赞同：0
> 
> 时间：2012-11-23T06:03:56.483
> 
> 标签：php, arrays

我正在用 PHP 构建一个树形结构，我可以将其保留为数组，或者将其转换为对象树。我认为如果将其保留为数组，性能会更好，但我不确定。

在数组的情况下，拥有对象将具有对根元素的引用，仅此而已。根元素将包含子数组，而子数组又可能包含它们自己的子数组。

对于对象，我的映射器需要在加载时实例化它们，并且对于每个子对象，它们都是来自其父对象的引用。对于 300 个节点的树，这意味着 299 个引用，而使用数组时则为 1 个。

所以，在我看来，如果我使用数组而不是对象，性能会好得多。这个对吗？这很重要，因为在这种情况下牺牲对象的行为将是一个相当大的权衡。

# visual-studio - 如何在 Visual Studio 解决方案中跨多个项目共享 3rd 方 javascript 库，而不将它们复制到每个项目中？

> ID：13523869
> 
> 赞同：1
> 
> 时间：2012-11-23T06:04:31.337
> 
> 标签：visual-studio, visual-studio-2012, projects-and-solutions

我正在 Visual Studio 中构建一个使用 dojo 的 Web 项目，但我不确定如何链接第 3 方 dojo 文件，以便将它们复制到输出目录。

过去对于 jQuery 之类的东西，我将 jquery.js 文件放在单独的文件夹中，转到“添加现有项目”，将 jquery.js 添加为链接，并将 Visual Studio 设置为将其复制到输出目录（如果更新）。这很好用。

对于 dojo，有数百个（如果不是数千个）相关的外部文件。添加到 Visual Studio 中是不切实际的（[尽管我确实找到了一种批量](http://greenicicleblog.com/2010/12/01/link-whole-directories-into-visual-studio-projects/)添加的方法）。

这让我认为我正在错误地处理这个问题。我如何或应该在 C# 项目中包含类似 dojo 的内容，而不必引用每个文件？我应该使用构建后步骤将文件自动复制到输出目录中吗？

我的目标是能够构建多个都使用 dojo 的项目，但我不想签入多个 dojo 副本，或者必须引用项目中的每个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:07:19.603

使用 Visual Studio 的“添加为链接”功能。

[http://msdn.microsoft.com/en-us/library/vstudio/9f4t9t92(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/9f4t9t92(v=vs.100).aspx)

. . .

我也是 Dojo 用户。您将想要学习进行 Dojo 构建，将 Dojo 缩减为仅几个文件，并将它们托管在您的服务器上。在许多情况下，取而代之的是，使用 google 之类的 CDN 访问 Dojo 文件的第一次加载（之后，缓存负责处理）的效率略有下降也是有效的。

根据您的特定情况，最好将文件放在服务器上，然后在 HTML 模板中引用它们。例如，这就是我们在组织中执行所有内部 Dojo 应用程序的方式——三个开发人员对所有应用程序使用一组 Dojo 文件。

# iphone - 如何在Objective-C的PDF中添加欧元货币符号

> ID：13523871
> 
> 赞同：3
> 
> 时间：2012-11-23T06:04:42.320
> 
> 标签：iphone, objective-c, unicode, pdf-generation

我正在用 Objective-C 制作一个 PDF 文件，一切顺利。但是当我在 PDF 中添加一些货币符号时，它会显示出完全不同的东西。

**‚Ç†2,060,0 而不是 €2,060,0**

我使用以下代码在 PDF 中绘制文本：

```
NSString *reducedString = @"€4,854,525";
CGContextShowTextAtPoint (currentContext,xPos, yPos, [textToDraw UTF8String], [reducedString length]); 
```

任何人都知道如何使用相同的代码绘制欧元符号？我需要在文本编码中更改什么吗？

```
[reducedString drawAtPoint:CGPointMake(xPos  ,yPos) withFont:[UIFont systemFontOfSize:15]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T06:15:06.463

尝试使用欧元符号的 unicode

```
\u20AC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:44:34.063

正确的方法是需要使用 NSNumberFormatter。

```
NSInteger currency = 4345;
NSNumberFormatter *numberFormatter = [[[NSNumberFormatter alloc] init] autorelease];
[numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
NSString *result = [numberFormatter stringFromNumber:[NSNumber numberWithInteger:currency]]; 
```

结果将是带有货币符号的字符串，具体取决于语言环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:50:18.080

尝试这个

```
//for the document Header
NSString *textToDraw = @"Your text";
UIFont *font = [UIFont boldSystemFontOfSize:18.0];
CGSize stringSize = [textToDraw sizeWithFont:font constrainedToSize:CGSizeMake(pageSize.width - 2*kBorderInset, pageSize.height - 2*kBorderInset - 2*kMarginInset) lineBreakMode:UILineBreakModeWordWrap];
//for title
fYheight=fYheight+25;
CGRect renderingRect = CGRectMake(kBorderInset, fYheight, pageSize.width - 2*kBorderInset, stringSize.height);
[textToDraw drawInRect:renderingRect withFont:font lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentCenter]; 
```

将您的文本添加到 textToDraw 字符串。无需转换为常量字符。

# algorithm - 在贝尔曼福特算法中究竟是什么导致计数到无穷大

> ID：13523875
> 
> 赞同：15
> 
> 时间：2012-11-23T06:05:15.393
> 
> 标签：algorithm, networking, routing, bellman-ford

据我所知，当一个路由器提供另一个旧信息时，就会发生计数到无穷大，该旧信息继续通过网络传播到无穷大。从我读到的内容来看，这肯定会在删除链接时发生。

![在此处输入图像描述](../Images/178f3cfb25db78e38fa8596648baf665.png)

所以在这个例子中，Bellman-Ford 算法将为每个路由器收敛，它们彼此都有条目。R2 会知道它可以以 1 的成本到达 R3，R1 会知道它可以通过 R2 以 2 的成本到达 R3。

如果 R2 和 R3 之间的链路断开，则 R2 将知道它不能再通过该链路到达 R3，并将其从表中删除。在它可以发送任何更新之前，它可能会收到来自 R1 的更新，该更新将通告它可以以 2 的成本到达 R3。R2 可以以 1 的成本到达 R1，因此它将更新一条到R3 通过 R1 的成本为 3。R1 稍后将接收来自 R2 的更新，并将其成本更新为 4。然后它们将继续相互提供不良信息，直至无穷大。

我在几个地方看到的一件事是，除了链接脱机之外，可能还有其他原因导致无穷大，例如更改链接的成本。我开始考虑这个问题，据我所知，在我看来，增加链接的成本可能会导致问题。但是，我不认为降低成本可能会导致问题。

例如，在上面的示例中，当算法收敛时，R2 有一条到 R3 的路由，成本为 1，而 R1 有一条经过 R2 到 R3 的路由，成本为 2。如果 R2 和 R3 之间的成本增加到5\. 那么这将导致同样的问题，R2 可以从 R1 获得更新，通告成本 2，并通过 R1 将其成本更改为 3，然后 R1 将其通过 R2 的路由更改为成本 4，依此类推。但是，如果融合路由的成本降低，则不会引起变化。它是否正确？可能导致问题的链接之间的成本增加，而不是成本降低？还有其他可能的原因吗？让路由器下线和链接出去是一样的吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-23T06:17:21.623

看看这个例子：

![在此处输入图像描述](../Images/2a2649926ca070d60e0b2ed848c4bdc6.png)

路由表将是：

```
 R1   R2    R3
R1  0    1     2
R2  1    0     1
R3  2    1     0 
```

现在，假设 R2 和 R3 之间的连接丢失（您可能线路断开或它们之间的中间路由器掉线）。

在发送信息一次迭代后，您将获得以下路由表：

```
 R1   R2    R3
R1  0    1     2
R2  1    0     3
R3  2    3     0 
```

发生这种情况是因为 R2、R3 不再连接，因此 R2“认为”它可以通过 R1 将包重定向到 R3，R1 的路径为 2 - 因此它将获得权重为 3 的路径。

在一次额外的迭代之后，R1 “看到” R2 比以前更昂贵，因此它修改了它的路由表：

```
 R1   R2    R3
R1  0    1     4
R2  1    0     3
R3  4    3     0 
```

依此类推，直到它们收敛到正确的值 - 但这可能需要很长时间，特别是如果 (R1,R3) 很昂贵。
这被称为“计数到无穷大”（如果`w(R1,R3)=infinity`并且是唯一的路径 - 它将永远继续计数）。

* * *

请注意，当两个路由器之间的成本上升时，您将遇到同样的问题（假设`w(R2,R3)`在上面的示例中上升到 50）。同样的事情也会发生 -`R2`将尝试路由到`R3`via`R1`而不“意识到”它也依赖于它`(R2,R3)`，并且一旦找到正确的成本，您将获得相同的第一步并收敛。
但是，如果成本下降——这不会发生，因为新成本比当前成本更好——路由器`R2`将坚持使用相同的路由并降低成本，并且不会尝试通过路由`R1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-20T18:50:03.413

根据维基百科：

> RIP 使用带有毒性反转技术的水平分割来减少形成循环的机会，并使用最大跳数来解决“计数到无穷大”问题。这些措施避免了在某些（但不是全部）情况下形成路由环路。增加保持时间（在路由撤回后的几分钟内拒绝路由更新）几乎可以避免在所有情况下形成环路，但会导致收敛时间显着增加。
> 
> 最近，已经开发了许多无环距离矢量协议——著名的例子是 EIGRP、DSDV 和 Babel。它们在所有情况下都避免了环路形成，但会增加复杂性，并且由于 OSPF 等链路状态路由协议的成功，它们的部署速度已减慢。

[http://en.wikipedia.org/wiki/Distance-vector_routing_protocol#Workarounds_and_solutions](http://en.wikipedia.org/wiki/Distance-vector_routing_protocol#Workarounds_and_solutions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-09T02:52:34.127

这不承认问题的贝尔曼-福特算法部分，但这是一个简化的答案。开始。

注意原始海报的图像。有R1、R2、R3；分别代表路由器 1、2 和 3。

每条链路花费 1，每跳花费 1。跳两台路由器（例如：R1 到 R3）需要花费 2。

每个路由器都会跟踪成本并更新信息。然而，如果有一个缺失值（例如，路由器之间的链路缺失），跳数将被删除，并在路由表更新时由另一个路由器填充。

例子：

如果路由器 3 到路由器 2 的链路断开，路由器 2 将从它的表中删除该路由。路由器 1 仍然认为需要两跳才能到达路由器 3。这会被复制到路由器 2，现在两个路由器都认为需要两跳才能到达路由器 3。

路由器 1 做了一些简单的数学运算，“如果我需要一跳才能到达路由器 2，而路由器 2 需要两跳才能到达路由器 3，那么我应该需要三跳才能到达路由器 3。太棒了！” 路由器 2 执行类似的数学运算，并在其路由中添加一跳，依此类推。

这就是循环的工作方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-18T20:41:14.640

按住：

*   随着度量的增加，延迟传播信息

限制：

*   延迟收敛 回环避免
*   路由通告中的完整路径信息
*   循环的显式查询（例如 DUAL） 水平分割
*   永远不要通过下一跳来宣传目的地
    *   A 不向 B 宣传 C
*   Poison reverse：在通过下一跳广告目的地时发送负面信息
*   A 以 ∞ 的度量向 B 宣传 C
    *   限制：仅适用于大小为 2 的“循环”

# grails - 在 grails geb 中通过数字 id 进行选择

> ID：13523881
> 
> 赞同：1
> 
> 时间：2012-11-23T06:05:36.753
> 
> 标签：grails, selenium, geb, selenium-chromedriver

使用 selenium 的 chrome 驱动程序，我试图通过它的 id 从我的页面中选择一个元素，它是数字的（即 1000）。

这失败了，给出：

```
org.openqa.selenium.InvalidElementStateException: findElements execution failed;
 SYNTAX_ERR: DOM Exception 12 (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 13 milliseconds
Build info: version: '2.2.1', revision: '16551', time: '2012-04-11 21:42:35'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '3.2.0-33-generic', java.version: '1.7.0_09'
Driver info: driver.version: RemoteWebDriver 
```

但是，如果我将 id 更改为不完全由数字组成的字符串（即 m1000），则选择有效。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:22:06.663

似乎是因为`ID tokens must begin with a letter ([A-Za-z])`，请参阅[http://w3.org/TR/html401/types.html#type-name](http://w3.org/TR/html401/types.html#type-name)

# android - 您如何在适用于 Android 3.02 的新 Facebook SDK 中使用方法“openWithImportedAccessToken”

> ID：13523884
> 
> 赞同：0
> 
> 时间：2012-11-23T06:06:04.267
> 
> 标签：android, facebook, facebook-android-sdk

新的 Android 版 Facebook SDK (3.0) 已弃用许多旧方法，包括 setAccessToken 方法。这个（我认为）的替代品是方法 openWithImportedAccessToken

[https://developers.facebook.com/docs/reference/android/3.0/Session#openWithImportedAccessToken(String, Date, Date, AccessTokenSource, List, StatusCallback)](https://developers.facebook.com/docs/reference/android/3.0/Session#openWithImportedAccessToken%28String,%20Date,%20Date,%20AccessTokenSource,%20List,%20StatusCallback%29)。

有没有人有任何使用这个的例子？特别是如何获取访问令牌的过期时间和最后一次刷新时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:49:19.910

我们[这里](https://developers.facebook.com/docs/howtos/login/debugging-access-tokens/#step1)的文档告诉您如何检索/调试访问令牌以检索元数据，例如过期和发布时间。如果您事先没有这些字段，则可以使用此端点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:05:34.297

如果您没有特定参数的数据，您可以在此处填写合理的默认值，这些默认值会导致次优但不是太糟糕的行为。

请记住，您应该只在升级到 3.x Android SDK 后**第**一次运行时调用此 API，以便从之前存储令牌的任何位置导入令牌。之后，SDK 默认管理令牌缓存。因此，任何次优行为都应一次性本地化到此升级。

提供你知道的数据。对于您不知道的情况，通常可以指定：

*   有效期为从现在起 60 天
*   最后更新时间是现在
*   AccessTokenSource 是 FACEBOOK_APPLICATION
*   权限列表为空

请注意，如果您总是要求相同的权限并因此知道您的旧令牌具有哪些权限，请使用这些权限。

如果您可以为这些参数提供正确的值，那就更好了，但缺点通常并不可怕。以下是对这个 API 撒谎的缺点：

*   **指定过期时间晚于实际时间的缺点**：如果令牌过期，您仍然可以发出请求并让 Facebook 服务返回错误，而不是在客户端立即注意到它。
*   **指定上次更新时间的缺点是**：SDK 将尝试在第一个请求时刷新令牌，而不是等待 24 小时。
*   **将 AccessTokenSource 指定为 FACEBOOK_APPLICATION 的缺点**：如果令牌来自 WebView，SDK 将尝试刷新您的令牌，操作将失败。最终令牌会过期，后续登录会更正 AccessTokenSource 值。
*   **指定空权限的缺点**：当你要执行一个操作时，你应该检查你是否有权限做这个操作，如果没有，你应该调用 Session.reauthorize() 来请求权限。如果您使用空列表（或您实际拥有的权限较少）调用 openWithImportedAccessToken()，那么您会认为您没有权限，并会再次向用户询问权限。只要这是在用户执行需要此权限的操作的上下文中，这对用户来说应该不会太刺耳。

# vb.net - 如何在 Datagrid 中获取行单击事件？

> ID：13523891
> 
> 赞同：0
> 
> 时间：2012-11-23T06:06:59.243
> 
> 标签：vb.net

情况如下：-

```
I binded an Id to a column in a datagrid.
and now i want to pass that Id to row click event of this Datagrid.

1.What is the row click event of Datagrid?

2.How to pass this Id to the event? 
```

任何指导将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:10:11.030

使用此示例，您可以捕获行索引和列索引

```
Private Sub DataGridView1_CellMouseClick(sender As [Object], e As DataGridViewCellMouseEventArgs)

    Dim cellInformation As New System.Text.StringBuilder()
    cellInformation.AppendFormat("{0} = {1}", "ColumnIndex", e.ColumnIndex)
    cellInformation.AppendLine()
    cellInformation.AppendFormat("{0} = {1}", "RowIndex", e.RowIndex)
    cellInformation.AppendLine()
    MessageBox.Show(cellInformation.ToString(), "CellMouseClick Event")
End Sub 
```

# mysql - 如何连接这两个表？

> ID：13523894
> 
> 赞同：2
> 
> 时间：2012-11-23T06:07:35.107
> 
> 标签：mysql, select

我有：

```
TABLE: USERS
UID | NAME
1   | Bob
2   | John 
```

我有：

```
TABLE: HITS
HITID | UID
1     | 1
2     | 2
3     | 2
4     | 1
5     | 2
6     | 2 
```

我想：

```
UID | HITS
1   | 2
2   | 4 
```

看起来很简单，但我似乎做不到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T06:10:11.547

尝试这个：

```
SELECT UID, COUNT(UID) HITS FROM HITS 
GROUP BY UID; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T06:25:23.423

这可能会帮助你

```
DECLARE @USERS TABLE(UID INT, NAME VARCHAR(20))
INSERT INTO @USERS (UID,NAME) VALUES ('1','Bob'),('2','John')

DECLARE @HITS TABLE(HITID INT,UID INT)
INSERT INTO @HITS (HITID,UID) VALUES('1','1'),('2','2'),('3','2'),('4','1'),('5','2'),('6','2') 
```

如果要同时使用 USERS 表和 HITS 表，请使用 JOIN

```
SELECT U.UID,COUNT(H.HITID) AS HITS FROM @USERS AS U INNER JOIN @HITS AS H ON U.UID = H.UID GROUP BY U.UID 
```

或使用简单查询如果您只想使用 HITS 表

```
SELECT UID, COUNT(UID) HITS FROM @HITS GROUP BY UID 
```

我也在其中创建了临时表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T06:23:14.203

这可以解决问题

```
SELECT H.UID, COUNT(*) AS 'HITS'
FROM HITS H
GROUP BY H.UID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T06:12:57.790

```
SELECT b.UID, COUNT(b.UID) HITS FROM HITS a, USERS b
WHERE a.UID=b.UID
GROUP BY UID 
```

这应该工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T06:17:06.460

如果你想拥有用户的名字，那么你需要加入它

```
SELECT  a.Name, COUNT(*) totalCount
FROM    users a
        INNER JOIN HITS b
            ON a.UID = b.UID
GROUP BY a.UID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d94bd/1)

# lua - 从 sqlite 数据库返回 lua 中的数组

> ID：13523901
> 
> 赞同：0
> 
> 时间：2012-11-23T06:08:31.427
> 
> 标签：lua

如何从 lua 中的 sqlite 数据库返回数组？

我在这里有这个相同的代码：

```
function getMoveName()
    tempMoveName = {}
    for row in db:nrows("SELECT * FROM movetable") do
        tempMoveName = row.movename .. " " .. row.totalcubicfeet .. " " .. row.totalitem .. "\n"
    end
    return tempMoveName
end 
```

它将返回数据库的内容，然后用这行代码打印内容：

```
local displaymovenames = mydatabase.getMoveName()

print ( displaymovenames ) 
```

但是它只返回最后一个数据，而不是它的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:22:46.630

您所做的是对每一行，您只需将行数据存储**在变量 tempMoveName 中**，从而覆盖以前的值。

您需要将 rowData 添加**到表 tempMoveName 中**。

```
function getMoveName()
    tempMoveName = {}
    for row in db:nrows("SELECT * FROM movetable") do
        local rowData = row.movename .. " " .. row.totalcubicfeet.." "..row.totalitem.."\n"
        tempMoveName[#tempMoveName+1] = rowData
    end
    return tempMoveName
end 
```

**编辑**

要访问表格元素，您必须执行以下操作

```
for i=1,#tempMoveName do 
   print(tempMoveName[i]) 
end 
```

请注意，它`#tempMoveName`给出了表格的长度（即表格中的元素数）

PS 如果你打算在 Lua 中进行大量编码，我建议你掌握 Tables 的基础知识，因为表是 Lua 的主要数据类型。数组、列表、字典、类和几乎所有东西都是通过表实现的。这是一个[入门教程](http://lua-users.org/wiki/TablesTutorial)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:22:55.287

这与 SQL 或数据库无关；这是*基本*的Lua 东西。

这：

```
tempMoveName = {} 
```

创建一个表并将该表存储到名为 的（全局）变量`tempMoveName`中。

这：

```
tempMoveName = row.movename .. " " .. row.totalcubicfeet .. " " .. row.totalitem .. "\n" 
```

通过连接其他字符串创建一个大字符串（不要忘记`string.format`）并将其存储在名为 的（全局）变量`tempMoveName`中。

请注意我所说的：“将其存储*在变量中*”。不是“在*表中存储*的变量”。

这与这样做没有什么不同：

```
tempMoveName = 1
tempMoveName = "foo" 
```

这不会以某种方式将字符串与整数结合起来。`tempMoveName`举行`1`，然后将其替换为`"foo"`。

桌子并不特别；它们的*值*就像 Lua 中的其他任何东西一样。变量保存值。因此，如果您更改存储在变量中的值，则您更改了存储在那里的值。您没有影响值本身，只影响了它的存储位置。

如果你有一个存储在变量中的表，并且你想构建一个数组，你应该访问表中的元素*，*而不是变量本身。这是以通常的方式完成的：

```
tempMoveName[#tempMoveName + 1] = row.movename .. " " .. row.totalcubicfeet .. " " .. row.totalitem .. "\n" 
```

或者，您可以使用`table.insert`：

```
table.insert(tempMoveName, row.movename .. " " .. row.totalcubicfeet .. " " .. row.totalitem .. "\n") 
```

最后，如果`tempMoveName`是临时的（顾名思义），那么您应该将其声明为`local`变量。

# ios - 在应用捏合手势时更改 UILabel 的字体大小

> ID：13523902
> 
> 赞同：1
> 
> 时间：2012-11-23T06:08:41.593
> 
> 标签：ios, ios5, ios6

我正在创建一个`UILabel`可以捏合、旋转的应用程序。当我捏合时`UILabel`，它会变得像素化。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:00:21.737

假设`UILabel`是您的 viewController 的属性：

```
CGFloat pinchScale = pinchGesture.scale;
pinchScale = round(pinchScale * 1000) / 1000.0;

if (pinchScale < 1) {
        self.UILabel.font = [UIFont fontWithName:self.UILabel.font.fontName size:(self.UILabel.font.pointSize - pinchScale)];
}
else{
        self.UILabel.font = [UIFont fontWithName:self.UILabel.font.fontName size:(self.UILabel.font.pointSize + pinchScale)];
} 
```

另外，设置`adjustsFontSizeToFitWidth`为YES

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T06:37:26.477

您可以通过以下方式获得捏合手势的四舍五入比例

```
- (void)pinch:(UIPinchGestureRecognizer *)pinchGesture
   {
     CGFloat pinchScale = pinchGesture.scale;
     pinchScale = round(pinchScale * 1000) / 1000.0;

        YourLabel.font = [UIFont fontWithName:@"your font Name" size:Actual Font size+pinchScale];

   } 
```

试试这个可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:47:47.403

我得到这个工作，试试看。

```
pinchScale2 = pinchGesture.scale;
pinchScale2 = round(pinchScale2 * 1000) / 1000.0;

if (pinchScale2 < pinchScale1)
{
        self.UILabel.font = [UIFont fontWithName:self.UILabel.font.fontName size:(self.UILabel.font.pointSize - pinchScale2)];
}
else
{
        self.UILabel.font = [UIFont fontWithName:self.UILabel.font.fontName size:(self.UILabel.font.pointSize + pinchScale2)];
}
pinchScale1 = pinchScale2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T11:49:19.437

我得到这个工作，试试看。

```
CGFloat maxFontSize;
NSString* string = pTextLabel.text;

UIFont* pfont = [UIFont fontWithName:[pTextLabel font].fontName size:600];
[string sizeWithFont:pfont minFontSize:3 actualFontSize:&maxFontSize forWidth:pTextLabel.frame.size.width - 1 lineBreakMode: UILineBreakModeWordWrap];

UIFont* pStampFont = [UIFont fontWithName:[pTextLabel font].fontName size:maxFontSize];
[pTextLabel setFont:pStampFont]; 
```

# coffeescript - 使用脚本运行 Coffeescript Interactive (REPL)

> ID：13523907
> 
> 赞同：8
> 
> 时间：2012-11-23T06:09:13.080
> 
> 标签：coffeescript, interactive, read-eval-print-loop

在 python 中，我可以运行一个脚本并在该脚本的上下文中进入交互模式。这让我弄乱了全局变量以及不检查程序状态的内容。

```
$ python -i hello.py 
```

我可以用 Coffeescript 做到这一点吗？我尝试了以下方法：

```
$ coffee -i hello.coffee 
```

不加载 hello.coffee。相当于咖啡 -i

```
$ cat hello.coffee | coffee -i 
```

在 REPL 中逐行运行脚本，但在 EOF 之后结束 REPL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T04:11:35.553

我最近开始了一个项目，为 Node 和相关语言（如 CoffeeScript）创建高级交互式 shell。其中一项功能是在启动时在解释器的上下文中加载文件或字符串，这会考虑到加载的语言。

[http://danielgtaylor.github.com/nesh/](http://danielgtaylor.github.com/nesh/)

例子：

```
# Load a string
nesh -c -e 'hello = (name) -> "Hello, #{name}"'

# Load a file
nesh -c -e hello.coffee 
```

然后在解释器中您可以访问该`hello`功能。在 bash 中创建别名也是一个好主意：

```
alias cs='nesh -c' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T19:13:28.003

`cat foo.coffee - | coffee -i`

告诉 cat 首先输出您的代码，然后输出标准输入，这会给您我想要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:08:46.753

我也面临这个问题。@int3 提供的并没有解决这个问题，因为 CoffeeScript 是一种基于缩进的语言。stdin 将逐行传递代码，但 repl 不够聪明，无法实现这一点。既然您发布了这个问题，我建议您在[CoffeeScript上创建一个问题（功能请求）](https://github.com/jashkenas/coffee-script)

# php - .htaccess 直接访问预防技术也可以防止 ajax 请求

> ID：13523909
> 
> 赞同：0
> 
> 时间：2012-11-23T06:09:27.237
> 
> 标签：php, apache, .htaccess, jquery

我试图阻止直接访问我的包含文件，但这样做我也无法使用 ajax 调用访问文件。以下是我的 .htaccess 文件中的代码

```
<Files filename.php>
Order Deny,Allow
Deny from all
Allow from 127.0.0.1
</Files> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:21:37.837

Ajax 调用由用户的浏览器进行，因此来自用户的 IP 地址，而不是 127.0.0.1。

您可以混淆您的 JavaScript，但这不是 100% 的解决方案。 [http://www.daftlogic.com/projects-online-javascript-obfuscator.htm](http://www.daftlogic.com/projects-online-javascript-obfuscator.htm)

# sonarqube - 两个文件的声纳命令

> ID：13523910
> 
> 赞同：0
> 
> 时间：2012-11-23T06:09:28.313
> 
> 标签：sonarqube

有谁知道在声纳中运行多个文件的命令，我不想运行

```
mvn sonar:sonar 
```

我有一些我想一次运行的 3-4 个文件，可能用逗号分隔，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:11:59.903

安装[Jenkins](http://jenkins-ci.org/)并使用它来自动构建 3-4 个 Maven 项目。

还有一个适用于 Jenkins 的[Sonar 插件](https://wiki.jenkins-ci.org/display/JENKINS/Sonar+plugin)，它使运行 Sonar 变得更加简单

# c++ - 使用 stl 在 C++ 中标记字符串

> ID：13523911
> 
> 赞同：2
> 
> 时间：2012-11-23T06:09:36.977
> 
> 标签：c++, stl, inputstream

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我正在尝试从文件中读取数据，其中每行有 15 个字段，由逗号和空格分隔。数据不是单一类型的。目前我正在做的是逐行读取数据，并将每一行传递给 istringstream，并且在每次读取之间我执行以下操作：

```
ins.ignore(25,','); //ins is the istringstream 
```

然而，我不喜欢我的方法，想要一个更干净的方法。有什么更好的方法呢？另外我只想使用 stl 而没有外部库。基本上我想要的是使用逗号作为分隔符来标记每一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:37:45.893

只需使用自定义操纵器：

```
std::istream& comma(std::istream& in) {
    if ((in >> std::ws).get() != std::char_traits<char>::to_int_type(',')) {
        in.setstate(std::ios_base::failbit);
    }
    return in;
}
...
in >> v0 >> comma >> v1 >> comma ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:34:45.907

更清洁的方法（如果我理解正确的话）只是将逗号读入一个虚拟变量

```
char comma;
ins >> comma; 
```

这将跳过任何空格，然后读取逗号，然后您可以忽略它。

# ruby-on-rails - 在哪里放置 gem 中的方法

> ID：13523914
> 
> 赞同：0
> 
> 时间：2012-11-23T06:10:14.527
> 
> 标签：ruby-on-rails, view, methods, controller

我正在使用以下[行为作为消息](https://github.com/LTe/acts-as-messageable)的消息宝石。gem 指出，要将消息标记为已读，请执行以下操作：

@message.mark_as_read

下面是我的代码，我在其中迭代每条消息，然后尝试在视图中将消息标记为已读，但这不起作用。我收到一个错误“找不到 id=true 的商店”

通常我会在控制器或模型中设置一个方法来处理 gem 的方法，但我很困惑我应该如何做到这一点，因为 gem 是指数据库中的一个表并且不需要新的模型或控制器。这真让我抓狂！我应该把这些方法放在哪里（还有更多这样的方法）？

有任何想法吗？

```
 <% @messages.each do |m| %>
    <tr>
        <td>
        <%= link_to 'Mark Read', "#{m.mark_as_read}", :class => 'btn btn-mini' %>           
        </td>
    </tr>

    <% end %> 
```

**我的模特**

```
class User < ActiveRecord::Base 

  acts_as_messageable :table_name => "messages",                         # default 'messages'
                      :required   => [:topic, :body],                     # default [:topic, :body]
                      :class_name => "ActsAsMessageable::Message",       # default "ActsAsMessageable::Message",
                      :dependent  => :nullify                            # default :nullify
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:01:33.423

您不能像上面那样简单地添加一个调用方法的链接。

以下是您的代码发生的情况： <%= link_to 'Mark Read', "#{m.mark_as_read}" %>

m.mark_as_read 在模板被解析时被调用，所以当你的页面被渲染时，你所有的消息实际上已经被标记为已读。由于 m.mark_as_read 返回 true，因此您将获得`<a href='true'>Mark Read</a>`导致您在路由到该路径时指定的错误的 html。

您需要在此处创建一个操作（最好在 MessagesController 中），您可以在其中将消息标记为已读，然后将链接指向该地址，

# php - 向多个收件人发送邮件（继续）

> ID：13523915
> 
> 赞同：0
> 
> 时间：2012-11-23T06:10:16.883
> 
> 标签：php, html, sql, forms, email

当我更新订单状态以通知客户时，我只想使用 mail() 向收件人发送多封电子邮件。**（我使用我自己的电子邮件作为测试，从 1 到 10 的每个订单都是我的电子邮件。）** 所以我想收到不止一封给自己的电子邮件。但是当我这样做时，我只收到了一封电子邮件并且在里面在“收件人”部分发送电子邮件，它会显示我的电子邮件 10 次！（至 ahmadxxx@hotmail.com、ahmadxxx@hotmail.com、ahmadxxx@hotmail.com ...）

这是我的表格。

```
<form action="results-action" method="post" enctype="multipart/form-data">
<fieldset>

<table id ="table_id" class="display">

<thead>

<tr><td><h2>Pending Order</h2></td></tr>

<tr>
<th scope="col">Order ID</th>
<th scope="col">Order Number</th>

<th scope="col">Name</th>

<th scope="col">Address</th>

<th scope="col">Payment Method</th>

<th scope="col">Order Date</th>
<th scope="col">Product Name</th>
<th scope="col">Produt Quantity</th>
<th scope="col">Price</th>
<th scope="col">Order status</th>
</tr>
</thead>

<tbody>

<?php 
while ($row = mysqli_fetch_array($result)) {
?>

<tr>
<td><input type="text" value='<?=$row['virtuemart_order_id']?>' name="orderid" id="virtuemart_order_id"></td>

<td><?=$row['order_number']?></td>
<td><?=$row['first_name']?></td>
<td><?=$row['address_1']?></td>

<td><?=$row['payment_element']?></td>
<td><?=$row['created_on']?></td>

<td><?=$row['order_item_name']?></td>

<td><?=$row['product_quantity']?></td>

<td><?=$row['product_final_price'] ?></td>
<td><select name='change[<?=$row['virtuemart_order_id']?>]'>
<option value='C'> Confirmed</option>

<option value='X'> Cancelled</option></select></td>
</tr>

<?php
}
?>

</tbody>
</table>
</fieldset>

<fieldset>
<table>
<tr>
<td><input type="submit" value="Update status" name="update status"> </td>
</tr>
</table>
</fieldset>

</form> 
```

这是我的代码。

```
<?php

//filtering confirmed orders

function confirmed($v){return($v =='C');}

// pick the rows in your form table which have been set as confirmed, and use the keys

$id = implode(',', array_keys(array_filter($_POST['change'],'confirmed')));

// build SQL statement mail
$query3 = "SELECT * from ruj3d_virtuemart_order_userinfos where virtuemart_order_id IN (".$id.")";

// execute SQL statement
$result3 = mysqli_query($link, $query3) or die(mysqli_error($link));

while($row3 = mysqli_fetch_array($result3)){
$addresses[]=$row3['email'];

}

$to = implode(", ",$addresses);

$subject = "Order confirmed by Home and decor";

// message
$message = '

<html>
<body>
<table width="500" height="215" border="0">
<tr>
<th width="238" height="211" scope="col"><h1 align="left">Order # 1234</h1></p></th>
<th width="10" scope="col"></th>
<th width="243" scope="col"><p><img src="file:///D|/Programs/xampp/htdocs/images/sitelogo.PNG" width="224" height="68" align="right"></p></th>
</tr>
</table>

<table width="500" height="215" border="0">
<tr>
<th width="181" height="211" scope="col"><p align="left">Ship To:</p>
<p align="left">Customer name</p>
<p align="left">Blk 123</p>
<p align="left">Singapore, 123123</p></th>
<th width="80" scope="col"></th>
<th width="40" scope="col"></th>
<th width="181" scope="col"><p align="left"></p>
<p align="right">Bill To:</p>
<p align="right">Customer name</p>
<p align="right">Blk 123</p>
<p align="right">Singapore, 123123</p>
</th>
</tr>
</table>

<table width="500" height="94" border="0">
<tr>
<th height="43" scope="col"><div align="left">Order Date:</div></th>
<th scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col"><div align="right">Shipping Method:</div></th>
</tr>
<tr>
<th width="126" height="43" scope="col"><div align="left">1/11/13</div></th>
<th width="433" scope="col">&nbsp;</th>
<th width="103" scope="col">&nbsp;</th>
<th width="156" scope="col"><div align="right">BEAST!</div></th>
</tr>
</table>
<table width="500" height="88" border="1">
<tr>
<th width="48" scope="col">Item</th>
<th width="264" scope="col">Product Name</th>
<th width="68" scope="col">Quantity</th>
<th width="92" scope="col">Price</th>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</table>
<hr>
<table width="500" height="227" border="0">
<tr>
<th height="43" scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col">Subtotal:</th>
<th scope="col">&nbsp;</th>
</tr>
<tr>
<th height="43" scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col">Tax:</th>
<th scope="col">&nbsp;</th>
</tr>
<tr>
<th height="43" scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col">Shipping:</th>
<th scope="col">&nbsp;</th>
</tr>
<tr>
<th height="43" scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col">Discount:</th>
<th scope="col">&nbsp;</th>
</tr>
<tr>
<th width="40" height="43" scope="col">&nbsp;</th>
<th width="278" scope="col">&nbsp;</th>
<th width="68" scope="col">Grand Total:</th>
<th width="96" scope="col">&nbsp;</th>
</tr>
</table>
<p align="right">&nbsp;</p>
</body>
</html>

';

// To send HTML mail, the Content-type header must be set
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

mail($to, $subject, $message, $headers);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:14:07.780

您需要将编写和发送邮件的代码移到

```
while ($row3 = mysqli_fetch_array($result3)) {
...
} 
```

循环，而不是制作所有地址的数组。

# magento - Magento 当前商店类别列表具有单一深度或仅父级？

> ID：13523917
> 
> 赞同：2
> 
> 时间：2012-11-23T06:10:21.487
> 
> 标签：magento

我只想在当前的 magento 商店中检索父类别。我用谷歌搜索并获得了所有包含子类别的父类别的结果。但只需要父顶级类别单一深度。

```
if(strlen(trim($primary_category_temp)) < 1) 
{
   $_categories = Mage::helper('catalog/category')->getStoreCategories();
   if (count($_categories) > 0): 
        foreach($_categories as $_category): 
         $primary_category[] = $_category->getId(); 
        endforeach; 
   endif; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:57:28.593

```
$category = Mage::getModel('catalog/category')->getCollection()->addFieldToFilter('is_active',array('eq' => 1))->load(); 
```

从这里我得到整个类别集合

```
foreach($category as $cat)
{
  if($cat->getData('level')==2)
  { 
     echo 'my code';
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:12:54.950

试试下面的代码

```
$categories=Mage::getModel('catalog/category')
                ->getCollection()
                ->addAttributeToSelect('*')
                ->addAttributeToFilter('level',2)
                ->addIsActiveFilter(); 
```

这只会检索父顶级类别

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:38:55.923

可能你需要使用：

`Mage::app()->getStore($store)->getRootCategoryId()`

或者

`Mage::app()->getStore()->getRootCategoryId()`

默认商店

# python - mongo db中的快速更新

> ID：13523922
> 
> 赞同：0
> 
> 时间：2012-11-23T06:11:01.763
> 
> 标签：python, mongodb, pymongo

这是我的问题。我想在 mongodb 中创建一个集合，其中我有一个单词和它出现的次数。我在 python 中做它，它非常慢。这很可能是因为对于我拥有的每个单词，我检查它是否已经在数据库中（使用 *find_one*），如果是，获取它的频率，增加它并将其存储回来（使用*update*）当然，当单词不存在，我将其附加到列表并定期进行批量插入。

有没有更好的方法来做到这一点？单词的数量很大（可能有不同的语言）。首先使用 mongoDB 是正确的吗？我选择了 mongoDB，因为它很容易安装，而且我在 10 分钟内就学会了教程……

**编辑**- 也添加了代码。当我说大时，我的意思是一个大约 4 GB 大的文件，其中包含单词......

```
insertlist = []

def copy_to_db(word):
    global insertlist

    wordCollection = db['words']
    occurrence = wordCollection.find_one({'word' : word})
    if occurrence:
            n = occurrence['number']
            n = n + 1
            wordCollection.update({'word' : word}, {'$set' : {'number' : n}})
    else:
            insertlist.append({'word' : word, 'number' : 1})
            #wordCollection.insert({'word' : word, 'number' : 1})

    if len(insertlist) >= 5000:
            print("insert triggered ... ")
            wordCollection.insert(insertlist)
            insertlist = [] 
```

我称之为函数。对于每一个字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:32:29.190

听起来你可以使用[upserts](http://www.mongodb.org/display/DOCS/Updating#Updating-%7B%7Bupserts%7D%7D)。如果您使用 upsert，则不需要执行该获取/保存周期。

我不确定这是如何在 python 驱动程序中完成的，但在 JavaScript 中它看起来像：

```
db.words.update({"_id": "the_word" }, {"$inc": {"frequency": 1}}, true) 
```

MongoDB 自动为 _id 字段创建索引。如果您的单词没有使用 _id 字段，那么为您的键创建索引很可能会有很大帮助。

* * *

编辑：为您提供更多想法

由于有很多数据，您可以使用 _id 字段作为您的单词。这样您就不需要创建另一个索引，并且更新会稍微快一些，因为在插入新文档时只需要更新一个索引。这是在插入速度是瓶颈的情况下。

虽然在插入大量数据时利用批量插入通常是一个好主意，但我不确定它是否对这种情况有太大​​帮助。这取决于您的数据。如果唯一词的比例很高，那么批量插入可能会很方便。但是，如果一遍又一遍地使用相同的词（我猜大多数语言都是这种情况），那么批量插入可能不会有太大帮助。

此外，您的批量插入似乎有问题。想想你是否第一次遇到一个词。它被插入到您的插入列表中。现在，如果在未插入前一批的情况下再次遇到相同的单词，则该单词的数字属性将为 1，这是不正确的。

你确定数据库是瓶颈吗？您是否已经确定没有其他性能不佳的代码？但无论如何我想，无论如何插入 4GB 的数据都需要一段时间。

# eclipse - eclipse中创建JSF项目的问题

> ID：13523926
> 
> 赞同：1
> 
> 时间：2012-11-23T06:11:24.527
> 
> 标签：eclipse, jsf, jsf-2

我想创建一个 JSF 项目。我接受了本教程 [http://www.vogella.com/articles/JavaServerFaces/article.html的帮助](http://www.vogella.com/articles/JavaServerFaces/article.html)

我按照完全相同的步骤创建项目。但是当我在我的服务器中使用 url "http://localhost:8080/url/faces/NewFile.jsp" 创建项目后，它显示错误

> java.lang.IllegalStateException：应用程序在启动时未正确初始化，找不到工厂：javax.faces.application.ApplicationFactory

另外我想提一下，我添加了 jsf-api-1.2 和 jsf-impl-1.2。

我在用

*   浏览器——火狐
*   服务器 - Apache tomcat 6.0
*   JSF- 2.0
*   Eclipse-靛蓝 3.7.0

# python - 如何使用 DJango 在网络浏览器中显示 rsync --progress？

> ID：13523931
> 
> 赞同：5
> 
> 时间：2012-11-23T06:12:42.600
> 
> 标签：python, django, rsync

我正在编写一个 Python/Django 应用程序，它使用 rsync 协议将文件从服务器传输到本地机器。我们将处理大文件，因此进度条是强制性的。`--progress`命令中的参数`rsync`很好地做到了这一点。所有详细进度都显示在终端中。如何在网络浏览器中显示该进度？是否有任何钩子功能或类似的东西？或者我可以将进度存储在日志文件中，每隔一分钟左右调用一次并更新一次吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T06:50:27.310

基本原理是**在子进程中运行 rsync，公开一个 Web API 并通过 javascript 获取更新**

这是一个例子。

```
import subprocess
import re
import sys

print('Dry run:')
cmd = 'rsync -az --stats --dry-run ' + sys.argv[1] + ' ' + sys.argv[2]
proc = subprocess.Popen(cmd,
                        shell=True,
                        stdin=subprocess.PIPE,
                        stdout=subprocess.PIPE,)

remainder = proc.communicate()[0]
mn = re.findall(r'Number of files: (\d+)', remainder)
total_files = int(mn[0])
print('Number of files: ' + str(total_files))

print('Real rsync:')
cmd = 'rsync -avz  --progress ' + sys.argv[1] + ' ' + sys.argv[2]
proc = subprocess.Popen(cmd,
                        shell=True,
                        stdin=subprocess.PIPE,
                        stdout=subprocess.PIPE,)

while True:
             output = proc.stdout.readline()
if 'to-check' in output:
             m = re.findall(r'to-check=(\d+)/(\d+)', output)
             progress = (100 * (int(m[0][1]) - int(m[0][0]))) / total_files
             sys.stdout.write('\rDone: ' + str(progress) + '%')
             sys.stdout.flush()
             if int(m[0][0]) == 0:
                      break

print('\rFinished') 
```

但这只是向我们展示了标准输出 ( `stdout`) 的进展。

但是，我们可以修改此代码以将进度作为 JSON 输出返回，并且此输出可以通过`progress webservice/API`我们创建的 a 提供。

在客户端使用时，我们将编写 javascript (ajax) 以`progress webservice/API`不时联系我们，并使用该信息更新客户端的某些内容，例如文本消息、图像的宽度、某些 div 的颜色等

# html - 基于选择值的 CSS 背景颜色

> ID：13523932
> 
> 赞同：0
> 
> 时间：2012-11-23T06:12:56.067
> 
> 标签：html, css

希望这里有一个简单的问题。我有以下html代码：

```
<select id="dropdown">
  <option value="#00FFFF">Cyan</option>
  <option value="#FF00FF">Magenta</option>
</select>
<textarea style="background-color:[dropdown's selected value]">Sample Text</textarea> 
```

我想要的是 textarea 的背景颜色根据下拉列表的选择动态变化。有没有一种简单的方法来使用 CSS 引用下拉列表的值，或者 JavaScript 会是更好的路线吗？HTML5 和 CSS3 在这里绝对是公平的游戏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:26:17.397

这里：[演示](http://jsfiddle.net/yaSWM/31/)

```
<select id="dropdown">
  <option value="#00FFFF">Cyan</option>
  <option value="#FF00FF">Magenta</option>
</select>

<textarea>Sample Text</textarea>​ 
```

jquery 更容易

```
 $('#dropdown').change(function(){
       $('textarea ').css('background-color', $(this).val());
    });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:20:23.480

您不能仅使用 HTML 和 CSS 来做到这一点。需要一些 JavaScript。例子：

```
<select id="dropdown" onchange="setBg(this)">
  <option selected value="#FFFFFF">White</option>
  <option value="#00FFFF">Cyan</option>
  <option value="#FF00FF">Magenta</option>
</select>
<textarea id="ta">Sample Text</textarea>
<script>
function setBg(sel) { 
  document.getElementById('ta').style.background = 
     sel.options[sel.selectedIndex].value;
}
</script> 
```

# c# - C#：接口实现

> ID：13523934
> 
> 赞同：0
> 
> 时间：2012-11-23T06:13:00.603
> 
> 标签：c#, oop, design-patterns, inheritance

我在我正在经历的代码库中找到了以下实现

```
Interface IOrder
{
GetSubmittedOrder();
CreateOrder();
GetExistingOrder();
}

Class Order : IOrder
{
BuildSpecialOrder();
AddSpecialOrderParameters();
IOrder.GetSubmittedOrder();
IOrder.CreateOrder();
IOrder.GetExistingOrder();
} 
```

现在，当我们想从这个`Order`对象访问最后三个方法时，我们需要做以下声明

```
IOrder objOrder = new Order(); 
```

创建这样的实现的原因（优点）是什么？这种做法有特定的名称吗？

*注意：如果这更适合程序员，请告诉我。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:14:55.193

它称为[显式接口实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)。

它用于区分特定接口的实现，以防多个接口的实现具有冲突的方法名称。

```
interface IOrder
{
  GetSubmittedOrder();
  CreateOrder();
  GetExistingOrder();
}

interface ISpecificOrder
{
  GetSubmittedOrder();
  CreateOrder();
  GetExistingOrder();
}

Class Order : IOrder, ISpecificOrder
{
  BuildSpecialOrder();
  AddSpecialOrderParameters();

  IOrder.GetSubmittedOrder();
  IOrder.CreateOrder();
  IOrder.GetExistingOrder();

  ISpecificOrder.GetSubmittedOrder();
  ISpecificOrder.CreateOrder();
  ISpecificOrder.GetExistingOrder();

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T06:15:18.237

我会说这是对*[显式接口实现](http://msdn.microsoft.com/en-us/library/vstudio/ms173157.aspx)*的错误使用。这基本上意味着这些方法在公共类合同中不可见。这就是为什么您必须首先将对象转换为接口类型（您正在使用隐式转换）。你也可以这样做：

```
var order = (IOrder)order;
order.GetExistingOrder(); 
```

它通常在类方法与接口方法冲突或类实现具有相同方法（但目的不同）的两个接口时使用。

应谨慎使用，因为它可能表明您的班级责任过大（应分成较小的班级）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T06:25:52.383

考虑适配器模式[Wiki - 适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)
当与其他应用程序或应用程序的一部分（以及许多其他要求）通信时，您不想绑定类型，因为它将在运行时决定，您可以使用这种类型的对象声明。这将创建接口类型的对象，但将分配所需类型的内存（嵌套在 switch case 中或由其他函数返回）。

```
 IOrder objOrder = new Order(); 
```

另一个问题是关于接口的隐式和显式实现。两者都可以在不同的场景中使用。你可以从谷歌找到更多细节。

# javascript - 将参数发送到另一个页面

> ID：13523941
> 
> 赞同：1
> 
> 时间：2012-11-23T06:13:41.047
> 
> 标签：javascript, extjs, url-parameters

我在将参数从一页发送到另一页时遇到了一个神秘的问题。

在其中一个 ExtJs 方法中，我通过 POST 将参数发送到另一个页面：

```
autoLoad : {  
url : url_servlet+'form.jsp',  
params: str,
scripts: true  
} 
```

但我不知道如何在 JavaScript 中获取此参数。好吧，我说，并在 url 中发送参数：

```
 url : url_servlet+'form.jsp?ss=333' 
```

在另一个页面中：

```
 function param(Name){
            var Params = location.search.substring(1).split("&");
            var variable = "";
            for (var i = 0; i < Params.length; i++){
                if(Params[i].split("=")[0] == Name){
                    if (Params[i].split("=").length > 1)
                        variable = Params[i].split("=")[1];
                return variable;
                }
            }
            return "";
        } 

        var s =param('ss');
        alert(s); 
```

并看到空警报。

在萤火虫我尝试：

```
window.location.search 
```

并得到`" "`.

怎么了？我读了几个例子，每个人都看到这样的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:40:32.347

这里可能发生的是 ExtJS 将整个页面从远程位置加载到当前页面中。

发生这种情况时，由于加载而运行的代码将在当前页面中执行（可能根本没有`ss=xyz`参数）。

但是，您`form.jsp`应该有权访问查询字符串，并且可以将其注入到它返回给 ExtJS 的页面中。

另一种选择是在页面加载后以某种方式从 JavaScript 传递该数据，但我对 ExtJS 的了解还不够，无法告诉您如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:21:25.260

您无法从 javascript 获取 POST 参数。POST 参数发送到服务器，javascript 发送到客户端。

如果它是 GET，那么您可以使用[parseUri 库](http://stevenlevithan.com/demo/parseuri/js/)

```
var value = uri.queryKey['param']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:23:20.147

你能试试下面的功能吗？

```
 function param(Name){
            var Params = location.search.substring(1).split("&");
            var variable = "";
            for (var i = 0; i < Params.length; i++){
                if(Params[i].split("=")[0] == Name){
                    variable = Params[i].split("=")[1];
                    return variable;
                }
            }
            if(variable=="") return variable;

        } 
    var s =param('ss');
    alert(s); 
```

# backbone.js - Backbone-Relational：Fetch 返回通用 JS 对象

> ID：13523942
> 
> 赞同：0
> 
> 时间：2012-11-23T06:13:45.087
> 
> 标签：backbone.js, coffeescript, backbone-relational

在下面的代码中，我建立了 3 个 has-many/belongs-to 关系。

类别 > 子类别 > 项目

Category.js.coffee：

```
class App.Models.Category extends Backbone.RelationalModel
  relations: [{
        type: Backbone.HasMany
        key: 'subcategories'
        relatedModel: 'App.Models.Subcategory'
        collectionType: 'App.Collections.Subcategories'
        reverseRelation: {
            key: 'category',
            includeInJSON: 'id'
        }
    }]

App.Models.Category.setup() # Set up BB Relational 
```

子类别.js.coffee：

```
class App.Models.Subcategory extends Backbone.RelationalModel
  relations: [{
      type: Backbone.HasMany
      key: 'items'
      relatedModel: 'App.Models.Item'
      collectionType: 'App.Collections.Items'
      reverseRelation: {
          key: 'subcategory',
          includeInJSON: 'id'
      }
  }]

App.Models.Subcategory.setup() # Set up BB Relational 
```

Item.js.coffee

```
class App.Models.Item extends Backbone.RelationalModel
   initialize: ->
    ...
App.Models.Item.setup() # Set up BB Relational 
```

# 问题：

调用 item.get('subcategory') 按预期工作，返回一个 Backbone RelationalModel 对象。但是，由于某种原因，调用 category 会返回一个通用的 JS 对象。

item.get('子类别').get('类别')

返回：*对象{id：1，标题：“标题”}*

如果它是相关的，console.log @subcategory.relations 会显示消息“collectionKey=subcategory already exists on collection=true”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:07:14.167

解决了！

Backbone-Relational 通过使用 setup() 方法解决了咖啡脚本扩展语法的问题，如上所示。

我的问题是我的 Category.js.coffee 在我的 Item.js.coffee 之前被初始化，因此 setup() 调用的反向关系无法添加到模型中。

为了解决这个问题，我将所有 setup() 调用按关系依赖关系的顺序移到了我的主干初始化程序（一旦定义了所有对象）：

```
window.App =
  init: (options) -> 
    # Set up BB Relational
    GearSwap.Models.Item.setup()
    GearSwap.Models.Category.setup()
    GearSwap.Models.Subcategory.setup() 
```

# java - 方法——继续

> ID：13523948
> 
> 赞同：1
> 
> 时间：2012-11-23T06:14:33.420
> 
> 标签：java, loops, methods

```
import java.util.Scanner;
public class InteractiveRectangle
{
public static void main(String[] args)
{
    do 
    { 
        int length = readInteger ("For Length ");
        System.out.println();
        int width = readInteger ("For Width ");
        printRectangleDetails(length,width);// existing code goes here 
    } 
    while (keepGoing()); 

    System.out.println("Goodbye, friend"); 
}

/**
 * returns the details of the rectangle
 * @param height the height of the rectangle
 * @param width the width of the rectangle
 */
public static void printRectangleDetails (int length, int width)
{
    System.out.println ("This is the length of the rectangle " + length);

    System.out.println ("This is the width of the rectangle " + width);

    System.out.println (("This is the perimeter of the rectangle " + (length + width)));

    System.out.println (("This is the area of the rectangle " + (length * width)));
}

/**
 * Read in an integer and return its value
 * @param the prompt to be shown to the user
 */
public static int readInteger(String prompt)
{
    System.out.println (prompt);
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter an integer");

    while (!scan.hasNextInt()) // while non-integers are present
    {
        scan.next();
        System.out.println ("Bad input. Enter an integer.");
    }
    int input = scan.nextInt();
    return input;
}

/**
 * Read a positive integer and return its value
 * @param the prompt to be shown to the user
 */
public static int readPositiveInteger(String prompt)
{
    System.out.println (prompt);
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter an integer");
    boolean positive = false;

    while (scan.hasNextInt() && positive == false)
    {
        int input = scan.nextInt();
        if (input > 0)
        {
            positive = true;
            {
                return input;
            }
        }
        else
        {
            System.out.println ("Bad input enter an integer.");
            positive = false;
            scan.nextLine();

        }

    }
    return 0;
}

/**
 * Ask the user whether or not to spawn another rectangle
 * and returns the result as a boolean
 */
public static boolean keepGoing()    
{
    Scanner scan = new Scanner(System.in);
    boolean inputRead = false;
    boolean result = false;
    System.out.println ("Do you want to process another rectangle?"); 
    scan.next();
    String input = scan.next();

    if (input == "y")
    {
        inputRead = true;
        result = true;

    }
    else if (input == "n")
    {
        inputRead = true;
        result = false;

    }
    else
    {
        System.out.println("Bad input please try again!");
        scan.nextLine();
    }
    return result;

} 
```

}

我希望程序询问用户是否要生成另一个矩形，并继续运行直到用户用“n”回答这个问题。Atm 运行程序时，矩形只生成一次，所以我认为我的 keepGoing 方法有问题。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T06:15:41.183

`if (input == "y")`

总是将字符串与`equals()`

你需要

`if ("y".equals(input))`

或者

`if ("y".equalsIgnoreCase(input)) // will also allow Y`

相应地更改其他检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T06:18:38.697

是的，有几个问题： -

*   首先，您使用`==`运算符比较字符串，这始终是错误的。使用`equals`方法：-

    ```
    if (input.equals("y"))   // or,   if (input.equalsIgnoreCase("y")) 
    ```

*   其次，你不应该使用`scan.next()`方法，你正在使用的方式。您的第一个`scan.next`应分配给`input`，因为您的第二个`scan.next`包含换行符：-

    ```
    System.out.println ("Do you want to process another rectangle?"); 
    // scan.next();  // Should not be here.
    String input = scan.next();
    scan.next();     // Change the order 
    ```

    或者，只需使用`scan.nextLine()`： -

    ```
    System.out.println ("Do you want to process another rectangle?"); 
    String input = scan.nextLine(); 
    ```

*   第三，就您而言`else`，您可以`keepGoing`再次调用您的方法，而不是在那里读取输入：-

    ```
    else
    {
        System.out.println("Bad input please try again!");
        return keepGoing();
    } 
    ```

*   此外，在您的`if-else`, 而不是将布尔值设置为变量，您可以直接从那里返回。

因此，总而言之，您可以将您的更改`if-else if-else`为： -

```
if (input.equals("y")) {
    return true;
}
else if (input.equals("n")) {
    return false;
}
else
{
    System.out.println("Bad input please try again!");
    return keepGoing();
} 
```

然后，您不需要这些`boolean`变量： -`inputRead`和`result`. 只需删除它们。并`return`从`method`. 就像`unreachable code`现在一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T06:16:41.170

总是用 .equals() 比较字符串

```
 if (input == "y") 
```

替换为

```
 if (input.equals("y")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T06:17:26.257

您正在使用运算符检查两个字符串是否相等`==`。始终使用 equals 方法检查字符串是否相等。

```
if (input == "y") 
```

应该

```
if (input.equals("y")) 
```

以及在其他地方，

`==`运算符检查两个字符串引用是否指向同一个字符串对象。equals 方法确定两个 String 对象是否有意义地相等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T06:18:23.643

这段代码：

```
if (input.equals("y"))
{
    inputRead = true;
    result = true;

}
else if (input.equals("n"))
{
    inputRead = true;
    result = false;

} 
```

应该解决问题。请记住，Java 中的对象是通过引用而不是值进行比较的。

# javascript - 如何检查物体的深度？

> ID：13523951
> 
> 赞同：22
> 
> 时间：2012-11-23T06:14:54.040
> 
> 标签：javascript, object, recursion

我正在研究具有可变深度的权限系统；根据页面的复杂性，可能会有更多或更少的级别。我搜索了 StackOverflow 以查找之前是否有人问过这个问题，但找不到。

如果我有这个对象：

```
{foo:{bar:{baz : 'baa'}}} 
```

我需要它返回 3，它有 3 个级别。

有了这个对象：

```
{abc: 'xyz'} 
```

它必须是1。

这是我到目前为止所拥有的：

```
utils.depthOf = function(object, level){
    // Returns an int of the deepest level of an object
    level = level || 1;

    var key;
    for(key in object){
        if (!object.hasOwnProperty(key)) continue;

        if(typeof object[key] == 'object'){
            level++;
            level = utils.depthOf(object[key], level);
        }
    }

    return level;
} 
```

问题是它也计算了姐妹元素。它实际上并没有得到深度，它正在计算一个对象的所有成员。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-23T06:14:54.040

好吧，伙计，你去吧，一个完全满足你需要的功能！

```
utils.depthOf = function(object) {
    var level = 1;
    for(var key in object) {
        if (!object.hasOwnProperty(key)) continue;

        if(typeof object[key] == 'object'){
            var depth = utils.depthOf(object[key]) + 1;
            level = Math.max(depth, level);
        }
    }
    return level;
} 
```

比我们想象的要容易得多。问题是它是如何递增的，它不应该递归地添加，而是获取最底部并添加一个，然后在两个兄弟姐妹之间选择最大值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-05T14:46:25.327

这个老问题最近复活了，我没有看到任何像这个一样简单的答案（公平地说，这使用了编写问题时不可用的技术）：

```
const objectDepth = (o) =>
  Object (o) === o ? 1 + Math .max (-1, ... Object .values(o) .map (objectDepth)) : 0

console .log (objectDepth ({foo: {bar: {baz: 'baa'}}}))
console .log (objectDepth ({abc: 'xyz'}))
```

就像这里的大多数答案一样，当输入对象是循环的时，这将失败。解决该限制的答案需要更加复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-05T17:07:06.510

死而复生！将我的解决方案混合在一起-

```
function depth (t, mem = new Set)
{ if (mem.has(t))
    return Infinity
  else switch (mem.add(t), t?.constructor)
  { case Object:
    case Array:
      return 1 + Math.max
       ( -1
       , ...Object
           .values(t)
           .map(_ => depth(_, mem))
       )
    default:
      return 0
  }
}

console.log(depth({a: {b: {c: "z"}}}))   // 3
console.log(depth({a: "z"}))             // 1
console.log(depth({}))                   // 0
console.log(depth("z"))                  // 0
console.log(depth({a: [{b: "z"}]}))      // 3

const a = []
a[0] = a
console.log(depth(a))                    // Infinity
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-19T09:41:51.030

我们可以使用注册表：

```
function getHowManyLevel(obj) {
  let res = JSON.stringify(obj).replace(/[^{|^}]/g, '')
  while (/}{/g.test(res)) {
    res = res.replace(/}{/g, '')
  }
  return res.replace(/}/g, '').length
}
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-25T15:26:30.830

如果你想保持简短，这应该做到这一点：

```
function maxDepth(object) {
    if (typeof object !== "object" || object === null) {
        return 0;
    }

    let values = Object.values(object);

    return (values.length && Math.max(...values.map(value => maxDepth(value)))) + 1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-05T12:18:03.603

我使用了一种肮脏但有效的方式：

好处是其中没有正则表达式，因为正则表达式在处理时间上很昂贵

```
getObjectDepth = (object) => {
      // json to array of parenthesis array: ['{','{','}','}',]
      let string = JSON.stringify(object)
          .split('')
          .filter(char => ['{', '}'].includes(char) );

      let currentDepth = 0;
      let maxDepth = 0;
      string.forEach(char => {
          if (char === '{') currentDepth++;
          if (char === '}') currentDepth--;
          if (currentDepth > maxDepth) maxDepth = currentDepth;
      });

      return maxDepth
} 
```

它仅在对象在字符串值中没有括号时才有效。

# php - 如何通过mysql向google geochart动态添加值？

> ID：13523955
> 
> 赞同：0
> 
> 时间：2012-11-23T06:15:04.543
> 
> 标签：php, mysql, google-visualization

我必须通过 mysql 或数据库将动态数据添加到 google geochart，以便当我从后端更新值时，它会自动显示在我将使用 php 语言嵌入的 google geocharts 功能上。谁能帮我解决这个问题。我有一个参考链接：[https ://developers.google.com/chart/interactive/docs/gallery/geochart](https://developers.google.com/chart/interactive/docs/gallery/geochart)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:57:07.933

开始开发地图和 php 脚本后，您只需要创建一个包含数据库数据的 cicle。

我不会很具体，但类似：

```
function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
          ['Country', 'Popularity'],

          <?php while () { ?>
          ['<?php echo $row['country']; ?>', <?php echo $row['value']; ?>],
          <?php } ?>

          ]); 
```

# iphone - 我想跟踪通过 ios 访问网站的人的电话号码

> ID：13523957
> 
> 赞同：0
> 
> 时间：2012-11-23T06:15:08.407
> 
> 标签：iphone, ios

我想跟踪用户的电话号码，访问该网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:20:30.507

Mobile Safari 不返回电话号码。这将被视为侵犯隐私。

*除非他/她自愿*将他们的电话号码输入到某些文本字段中，该文本字段仅由 cookie 用于您的网站。

# android - 从异步任务执行时出现“错误代码 5：数据库已锁定”

> ID：13523958
> 
> 赞同：1
> 
> 时间：2012-11-23T06:15:11.640
> 
> 标签：android, sqlite, android-asynctask

我得到的异常日志为

```
 11-23 11:25:56.110: E/Database(543): Error inserting PartyCode=PM001 PaymentMode=0 Amount=12.2 ReceiptDate=1353522600000 SalesmanCode=SL1
11-23 11:25:56.110: E/Database(543): android.database.sqlite.SQLiteException: error code 5: database is locked
11-23 11:25:56.110: E/Database(543):    at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
11-23 11:25:56.110: E/Database(543):    at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:55)
11-23 11:25:56.110: E/Database(543):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1549)
11-23 11:25:56.110: E/Database(543):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
11-23 11:25:56.110: E/Database(543):    at com.virtuosoitech.dsr.dataaccess.ReceiptDataManager.insertNewReceipt(ReceiptDataManager.java:244)
11-23 11:25:56.110: E/Database(543):    at com.virtuosoitech.dsr.ui.GlobalSalesReportOpt.onDestroy(GlobalSalesReportOpt.java:1460)
11-23 11:25:56.110: E/Database(543):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3642)
11-23 11:25:56.110: E/Database(543):    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3673)
11-23 11:25:56.110: E/Database(543):    at android.app.ActivityThread.access$2900(ActivityThread.java:125)
11-23 11:25:56.110: E/Database(543):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)
11-23 11:25:56.110: E/Database(543):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 11:25:56.110: E/Database(543):    at android.os.Looper.loop(Looper.java:123)
11-23 11:25:56.110: E/Database(543):    at android.app.ActivityThread.main(ActivityThread.java:4627)
11-23 11:25:56.110: E/Database(543):    at java.lang.reflect.Method.invokeNative(Native Method)
11-23 11:25:56.110: E/Database(543):    at java.lang.reflect.Method.invoke(Method.java:521)
11-23 11:25:56.110: E/Database(543):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-23 11:25:56.110: E/Database(543):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-23 11:25:56.110: E/Database(543):    at dalvik.system.NativeStart.main(Native Method) 
```

同时取消异步任务的执行 **并** 尝试在数据库中插入新条目

```
 class HttpTask extends AsyncTask<String, Void, SalesDetails> {

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub

            spinningDialog = new ProgressDialog(GlobalSalesReportOpt.this);
            spinningDialog.setMessage("Please wait..");
            spinningDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            spinningDialog.setCancelable(true);
            spinningDialog.show();
        }

        @Override
        protected SalesDetails doInBackground(
                String... params) {
            // TODO Auto-generated method stub

            ArrayList<InvoiceBrand> invoice_data_brandList = (ArrayList<InvoiceBrand>) SalesDataManager
                    .getInstance().getOptimizedSalesData(
                            getApplicationContext(), group, party, item,
                            company, brand, family, datefrom, dateTo);

}

        @Override
        protected void onPostExecute(SalesDetails details) {
            // TODO Auto-generated method stub

            Log.e("GlobalSalesReport", "onCancelled()");
            uiStartTime = new Date().getTime();
            if (spinningDialog == null) {

                return;
            }

            spinningDialog.dismiss();
            spinningDialog = null;

} 
```

我的插入示例数据库类是

```
public long insertNewReceipt(Context context, Receipt receipt) {

    SQLiteOpenHelper helper = null;
    SQLiteDatabase db = null;
    long orderId = 0;

    try {

        helper = new DSRDBHelper(context);
        db = helper.getWritableDatabase();

        ContentValues receiptValues = new ContentValues();

        receiptValues.put("ReceiptDate", Util.getDate(receipt.getReceiptDate()).getTime());

        if (receipt.getPaymentMode() == Constants.CASH_TYPE){

            receiptValues.put("PaymentMode", Constants.CASH_TYPE);

        }
        else if (receipt.getPaymentMode() == Constants.CHEQUE_TYPE){

            receiptValues.put("PaymentMode", Constants.CHEQUE_TYPE);
            receiptValues.put("ChqueDate", receipt.getChequeDate());
            receiptValues.put("ChqueNo", receipt.getChequeNo());
            receiptValues.put("BankName", receipt.getBankName());

        }

        receiptValues.put("Amount", receipt.getAmount());
        receiptValues.put("PartyCode", receipt.getPartyCode());
        receiptValues.put("SalesmanCode", receipt.getSalesmanCode());

        orderId = db.insert("Receipt", null, receiptValues);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    } finally {
        if (helper != null) {
            helper.close();
        }
        if (db != null) {
            db.close();
        }
    }

    return orderId;
} 
```

所以请帮我解决这个问题..我尝试使用单例模式作为 DB 助手，但它不能帮助我......我的 DB 类是否违反了一般做法（我应该使用内容提供程序吗？？）.. 如果是为我提供有关..的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:25:50.253

将您的数据库连接放在一个单独的类中（单例类）

并在那里执行数据库操作 例如：

```
public class MyDaoImpl {

    private Context _context = null;
    private SQLiteDatabase _myDB = null;
    private static MyDaoImpl _myDaoImpl = null;

    public static synchronized AdminUserDaoImpl getInstance(Context context) {
        if (_myDaoImpl == null) {
            _myDaoImpl = new AdminUserDaoImpl(context);
        }
        return _myDaoImpl;
    }

    private AdminUserDaoImpl(Context context) {
        super();
        this._context = context;
    }

    /* write your db operation methods here*/

        /**
     * This method will check if the database is opened or not and close Database
     */
    public void closeDBConnection(){

        if(_myDB != null){
            if(_myDB.isOpen()){
                _myDB.close();
            }
        }
    }
} 
```

在您的 Async 或 Activity 类中

使用喜欢

```
MyDaoImpl myDaoImpl = MyDaoImpl.getInstance(getBaseContext());
myDaoImpl.doOperation1();
myDaoImpl.closeDBConnection(); 
```

# android - 如何将listview项目的用户名、电子邮件和地址发送到android中的下一个活动onItemClick

> ID：13523963
> 
> 赞同：1
> 
> 时间：2012-11-23T06:15:24.963
> 
> 标签：android, xml

我需要创建一个登录应用程序，我必须在成功登录身份验证和用户名列表视图的 onItemClick 时仅在列表视图中显示用户名，我必须在另一个活动的文本视图中显示用户详细信息，如姓名、电子邮件和地址。所有用户详细信息都应从 Xml 文件中解析。

基本上，我有三个活动，即 1\. Login.java 2\. Users.java 3\. UserDetails.java

但是，我已将用户名从（Users.java）列表视图发送到 userdetails（在 Textview 上）。现在，我需要向 (UserDetails) 活动发送电子邮件、地址。问题是电子邮件和地址不在（Users.java）列表视图中，我只显示用户名。

任何帮助将不胜感激。谢谢 ！

这是我的Users.java

```
public class Users extends Activity {

ListView myList ;
List<String> fillUsers;
List<String> fillemail;
List<String> fillphone;
List<String> fillplace;
List<String> titles;
List<String> link1;

//private List<Map<String, Object>> data;
private ListView listView = null;

private List<com.example.firstapp.Message> messages;

static final String KEY_FNAME = "fname";
static final String KEY_LNAME = "lname";
static final String KEY_EMAIL = "email";
static final String KEY_PHONE = "phone";
static final String KEY_PLACE = "place";
List headlines;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_users);

    new MyAsyncTask().execute();

 }

private class MyAsyncTask extends AsyncTask<Void, Void, Void>
{

    ProgressDialog mProgressDialog;

    @Override
    protected void onPostExecute(Void result) {
        mProgressDialog.dismiss();

       final ListView listView = (ListView) findViewById(R.id.listview);

     final ArrayAdapter<String>  listAdapter= new ArrayAdapter<String>(Users.this, android.R.layout.simple_list_item_1, fillUsers); 

        listView.setAdapter(listAdapter);

    try{
        listView.setOnItemClickListener(new OnItemClickListener() {

             public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                String selectedFromList =(String) (listView.getItemAtPosition(position));

                System.out.println("Testing 006: "+fillemail+fillphone+fillplace);

                 System.out.println("Testing 008: "+selectedFromList);

                 Intent in = new Intent(Users.this,UserDetails.class);

                 System.out.println("Testing 009: ");

                 Bundle myBundle = new Bundle(); //create a Bundle
                 myBundle.putString("username",selectedFromList);
                 myBundle.putInt("userid",1234);
                 System.out.println("Testing 010: ");

                 in.putExtras(myBundle); //PUT THE Bundle you created in the Intent
                 startActivityForResult(in, 0);
                 System.out.println("Testing 010: ");

                }
             });
        }catch(Exception ex){

           System.out.println("On item click : 0070"+ex.toString());
           System.out.println("On item click : 0080"+ex.getStackTrace().toString());
        }

    }

    @Override
    protected void onPreExecute() {

        mProgressDialog = ProgressDialog.show(Users.this, "", "Loading. Please wait...", true);
    }

    @Override
    protected Void doInBackground(Void... params) {

       // your network operation

        loadFeed();

      return (null);
    }

    public void loadFeed(){

        try{

            BaseFeedParser parser = new BaseFeedParser();
            messages = parser.parse();
              Log.e("check=","yes");
              List<String> titles = new ArrayList<String>(messages.size());
              HashMap<String, String> map = new HashMap<String, String>();

              int count=0;
              for (com.example.firstapp.Message msg : messages){
                    count++;
              }

               fillUsers = new ArrayList<String>(count);
               fillemail = new ArrayList<String>(count);
               fillphone = new ArrayList<String>(count);
               fillplace = new ArrayList<String>(count);

            for (com.example.firstapp.Message msg : messages){

                fillUsers.add(msg.getFname()+" "+msg.getLname());
                fillemail.add(msg.getEmail());
                fillphone.add(msg.getPhone());
                fillplace.add(msg.getPlace());

                System.out.println("OOOOOOOOOOOO "+fillemail.toString());

              }
                return;
            } catch (Throwable t){
            Log.e("AndroidNews",t.getMessage(),t);

            t.printStackTrace();
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:19:03.517

[您可以使用Intent](http://developer.android.com/reference/android/content/Intent.html)解析 XML 并将解析的信息传递给下一个 Activity 。

例如，

```
Intent mIntent = new Intent(currentActivity.this, SecondActivity.class);
mIntent.putExtra("UserName","Color");
startActivity(mIntent); 
```

根据您提供的信息，我认为这些信息绰绰有余。

## 更新：

根据代码，我建议您以下几点：

1.  为什么要创建不同的列表，在这里我会说在插入/删除数据时很难管理，假设我想删除一条记录，现在根据您的代码，您必须从每个列表中删除，对吗？是的。因此，您可以在列表中创建添加对象，而不是创建不同的列表，例如`ArrayList<Student>`

2.  现在，重点在于传递动态数据（您的话），如果您遵循第一点，那么您可以直接将整个对象传递给第二个活动或您想要的任何其他地方。仅供参考，您可以通过单击位置从 ArrayList 中获取单击对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T07:12:05.297

有两种方法可以做到这一点。

1) 创建一个带有静态变量的 pojo 类，并在您的下一个活动中使用它们。

```
public class MyClass{
 public static  String varaible1;
 public static  String varaible2;
 public static  int varaible3;
 public static  List myList;
} 
```

2）创建自己的应用程序类

```
public class MyApplication extends Application {

 private  String varaible1;
 private String varaible2;
 private int varaible3;
 private List myList;
 publid getter, setter methods
} 
```

在您的活动中使用

```
MyApplication  myApplication =(MyApplication)getApplication();

myApplication.getVaraible1(); 
```

在 AndroidManifest.xml 中

```
<application android:icon="@drawable/icon" android:label="@string/app_name"  
         android:name="MyApplication"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:23:02.337

把下面的代码放在 onItemClickListener..

```
Intent i = new Intent(YourActivity.this,NextActivity.class);
i.putExtra("name", "Name");
i.putExtra("email", "Email");
i.putExtra("address", "Address");
startActivity(i); 
```

# jquery - 如何在 Accordion 中自定义扩展内容的高度

> ID：13523966
> 
> 赞同：1
> 
> 时间：2012-11-23T06:15:43.323
> 
> 标签：jquery, html, jquery-ui-accordion

*   当单击标题以展开/折叠被分成逻辑部分
    的内容时，但这些部分定义了一些默认高度。假设我必须给出一个固定
    的高度，即 200 像素。我们如何自定义单击标题后展开的高度，即第 1 节和第 2 节

    ```
    <html>
       <head>
           <meta charset="utf-8" />
           <title>jQuery UI Accordion - Default functionality</title>
           <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-
           ui.css"           
           />
           <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
           <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
           <link rel="stylesheet" href="/resources/demos/style.css" />

         </head>

          <div id="accordion">
           <h3>Section 1</h3>
           <div>
               <p>
               Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
               ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
               amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
               odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
               </p>
           </div>
           <h3>Section 2</h3>
           <div>
               <p>
               Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
               purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
               velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In
               suscipit faucibus urna.
               </p>
           </div>

          </div>​
       </html>
         javascript:-
         $(function() {
               $( "#accordion" ).accordion();
           });​ 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:01:20.507

如果您关心内容高度，您可以查看“heightStyle”属性，或者如果您想使用自定义高度逻辑，可以使用“beforeActivate”事件。该事件在激活选项卡之前触发。所以在这种情况下，高度变化是可能的。

```
$(function() {
    $("#accordion").accordion({
        collapsible: true,
        active: false,
        beforeActivate: function(event, ui){
            $(ui.newPanel).css('height', '20');
        }
    });   
}); 
```

希望这可以帮助。

# java - 为 ZEST 图中的节点分配值

> ID：13523971
> 
> 赞同：0
> 
> 时间：2012-11-23T06:16:05.113
> 
> 标签：java, graph, zest

有没有办法使用 ZEST API 为 JAVA 构建的图中的特定节点分配值？

给定一个图形节点“p”，我认为 p.setData(value) 会起作用。我试过这个，但它并没有真正奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T15:20:47.267

由于 LayoutEntity 是一个接口，因此实际 API 中没有。您需要首先知道您正在使用哪种类型的节点 (LayoutEntity)，并确定实现 LayoutEntity 的类是否具有这样的字段。当您最初创建节点列表（LayoutEntity 对象）时，您可以创建一个 HashMap 来索引图形的 layoutEntities（又名节点）。这样，您可以在获得 X/Y 坐标之后再返回它们。

此代码将帮助您入门。

```
org.eclipse.zest.layouts/src/org/eclipse/zest/layouts/exampleUses/SimpleSwingExample.java

org.eclipse.zest.layouts/src/org/eclipse/zest/layouts/exampleUses/SimpleSWTExample.java 
```

# windows - “应用程序”与任何常规（本地？）应用程序有何不同？

> ID：13523978
> 
> 赞同：2
> 
> 时间：2012-11-23T06:16:56.273
> 
> 标签：windows

“应用程序”是否只是一个术语，指的是一系列以移动设备为中心的微型、轻量级应用程序——这种趋势始于 Apple i 代设备，后来进入 Android 和 Windows 8？

如果同一个程序既可以用作应用程序，也可以用作同一平台的应用程序，那么它对运行它的系统有什么影响？例如，适用于 Windows 的 Angry Birds 可用作：

*   [适用于 Windows 8/RT](http://apps.microsoft.com/webpdp/en-us/app/angry-birds-space/8ece2571-91e0-4f2f-b7e5-b0b7944ced2d)的[Angry Birds 应用程序和适用于 Windows 7 的 Angry Birds 应用程序（在 Pokki 上运行）](https://www.pokki.com/app/Angry%20Birds)
    对比
*   [愤怒的小鸟 PC](http://shop.angrybirds.com/us/angry-birds-pc-version.html)

从开发人员的角度来看，上述两个代码是否只是相同的代码以不同的方式编译以生成适合目标的二进制文件？

此外，既然 Mac(iOS/OSX) 和 Windows 8 等平台在移动计算机和台式机上都是通用的，那么区分应用程序和原生应用程序的界限是否变得模糊？

**更新：**
我并没有质疑[“应用程序”与“应用程序”的适当使用</a>中的词用法选择。这个问题更多地与应用程序在内存占用、资源利用率、执行依赖于客户端计算机上存在的运行时环境等方面与本机应用程序有何不同有关。](https://english.stackexchange.com/q/45762/28634)

[](https://english.stackexchange.com/q/45762/28634)

[**更新 2：**
微软鼓励](https://english.stackexchange.com/q/45762/28634)[Windows 开发人员为 Windows 8 构建应用程序](http://www.windowsstore.com/developers/windows)。除了必须遵守[Windows 应用商店应用指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh770552)之外，他们构建的内容与他们一直在构建的内容有何不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:46:17.350

应用程序只是应用程序的缩写。在某些平台上，缩写名称似乎卡住了......除了“此平台的应用程序”之外没有其他技术含义。

在 Windows 8 上，新样式程序的构建方式与“桌面”应用程序不同。（他们真的必须整理名字，地铁应用至少给你一个名字......）。这不仅仅是针对不同平台的相同程序重建，因为与系统交互的方法有点不同。有一个新的运行时库和一个更受限制的运行时环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T05:43:08.780

Windows 8 is different than Windows 7 and previous OSs because it has some additional features that developers can use to make their apps more alluring for the users, features like: 1\. charms - settings, search, share 2\. snap view 3\. concept of store apps 4\. new design language for store apps 5\. Live tiles etc.

Windows 8.1 is different than Windows 8 because it essentially provides an update to the W8 features, for example: 1\. roaming settings 2\. Hero search 3\. snap view - split the screen into any size 4\. concept of universal app development

Windows 10 is different than windows 8.1 in a more stronger sense so to speak because a lot has changed, such as: 1\. Concept of app targeting to single UAP 2\. new XAML controls 3\. cortana 4\. action center 5\. inking

Hope this helps.

# linux - 如何缩小进程的页面大小？

> ID：13523980
> 
> 赞同：1
> 
> 时间：2012-11-23T06:17:02.827
> 
> 标签：linux, mongodb, memory-management

mongodb 服务器将所有 db 文件映射到 RAM。随着数据库的规模越来越大，服务器将拥有一个高达 3G 字节的巨大页表。

服务器运行时有没有办法缩小它？

mongodb版本是2.0.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:23:11.087

Mongodb 将内存映射它创建的所有数据文件，以及日志文件（如果您正在使用日志）。没有办法防止这种情况发生。这意味着 MongoDB 进程的虚拟内存大小将**始终**大约是数据文件大小的两倍。

请注意，OS 内存管理系统将分页出未使用的 RAM 页面，因此进程的物理内存大小通常会远小于虚拟内存大小。

减小“mongod”进程的虚拟内存大小的唯一方法是减小 MongoDB 数据文件的大小。减小数据文件大小的唯一方法是使节点脱机并执行“修复”。

有关详细信息，请参见此处：- [http://www.mongodb.org/display/DOCS/Excessive+Disk+Space#ExcessiveDiskSpace-RecoveringDeletedSpace](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space#ExcessiveDiskSpace-RecoveringDeletedSpace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:51:02.700

基本上，您要求执行 MongoDB 手册建议不要执行的操作：http: [//docs.mongodb.org/manual/administration/ulimit/](http://docs.mongodb.org/manual/administration/ulimit/)在此特定场景中。然而，推荐并不意味着需要，它只是一个指导方针。

这正是 MongoDB 的运行方式，除非您想尝试和测试不同的场景以及它们的工作方式，否则您必须接受这种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:21:12.110

您可能希望减少进程的已用内存。您可以使用调用[setrlimit(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/setrlimit.2.html)系统调用的`ulimit`bash 内置函数（在启动服务器之前，可能在某些`/etc/rc.d/mongodb`脚本中）

# php - 如果选中复选框，如何存储数据

> ID：13523988
> 
> 赞同：0
> 
> 时间：2012-11-23T06:17:37.070
> 
> 标签：php

我正在使用 PHP 做这个。

我正在做一些基本的测验应用程序，它有一个后端。在我的后端，我正在设置一个测验让学生回答。我的一个界面是这样的。

![在此处输入图像描述](../Images/517f1e2dce507158271a459a8a795de8.png)

如果用户选中该框，则表示 1950 是答案。我将如何处理我的数据库中的那个，以确定 1950 年是问题的答案。

我的数据库是这样的。

```
tbl_choices
Id,Choice,isAnswer 
```

所以理想情况下，它会像这样存储。

```
tbl_choices
ID         CHOICE      isAnswer
001         1900          0
002         1800          0
003         1950          1
004         1850          0 
```

我的问题是，当用户选中复选框并且它旁边的 textinput 的值为`isAnswer`as时，我将如何在某种意义上对其进行编码`1`。

只是一个附加信息：当用户单击该`+`按钮时，它将添加一个新的文本输入，如果用户单击`-`按钮，它将删除一个文本输入，但我已经涵盖了所有内容。

选择是动态的，它会改变，上面我给你展示的只是一个例子。

*PS：对不起标题，我不知道这种问题的标题是什么:-)*

您的帮助将不胜感激和奖励！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T07:08:18.560

你可以试试这样的html：

```
<input type="checkbox" value="1900" name="answer1[]">
<input type="text" value="1900" name="answer2[]" />
<input type="checkbox" value="1800" name="answer1[]">
<input type="text" value="1800" name="answer2[]" />
<input type="checkbox" value="1950" name="answer1[]">
<input type="text" value="1950" name="answer2[]" />
<input type="checkbox" value="1850" name="answer1[]">
<input type="text" value="1850" name="answer2[]" /> 
```

然后使用php代码：

```
foreach($_POST['answer2'] as $v){

    if(in_array($v, $_POST['answer1'])) {
        $s = 1;
    }else
     $s = 0;
     $sql = "INSERT INTO table VALUES(null, $v, $s)";
} 
```

也可以单击并更新复选框和文本字段的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:31:00.087

一般来说，您可以在提交信息时将复选框用作数组，只需将复选框命名为数组

```
<input type="checkbox" value="1900" name="answer1[]">
<input type="checkbox" value="1800" name="answer1[]">
<input type="checkbox" value="1950" name="answer1[]">
<input type="checkbox" value="1850" name="answer1[]"> 
```

然后在服务器端你`$_POST["answer1"]`作为一个数组处理并循环通过可能的答案，像这样

```
if (is_array($_POST["answer1"]))
{
  foreach($_POST["answer1"] as $answer)
  {
    // insert into database here
  }

} 
```

重要：这只会显示用户实际选择的内容，如果未单击选项，则它将不是数组的一部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:30:13.830

我认为有多个表格是有意义的，一张用于带有选项的问题，然后一张用于带有字段 id、choice_id 的答案。否则，它会使生成问题变得更加困难，尤其是当许多学生回答同一个问题时？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-23T06:43:12.967

还有一件事，您可以在问题的答案中加起来，根据 + 和 - 按钮添加行和删除行。

代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#plus").click(function() {
           $('#mytable2 tbody>tr:last').clone(true).
              insertAfter('#mytable2 tbody>tr:last');
           $('#mytable2 tbody>tr:last #st').val('');
           $('#mytable2 tbody>tr:last #newst').val('');
           $('#mytable2 tbody>tr:last #plus').val('+');
           return false;
        });
     }); 
```

有关更多详细信息，您可以参考以下链接： [Add Row on Button click](https://stackoverflow.com/questions/9026422/add-row-on-button-click)

# excel - VBA：查找值，复制行，将行粘贴到其他位置，查找下一个值

> ID：13523997
> 
> 赞同：-2
> 
> 时间：2012-11-23T06:18:37.417
> 
> 标签：excel, vba

所以这就是我想在 VBA 中做的事情：在 E10 中找到值，复制它所在的行，将该行粘贴到其他地方（只要我能找到它就没有关系），然后找到具有该值的下一行E10 并做同样的事情等，直到我到达电子表格的末尾

一般来说，我对 VBA 和宏真的很陌生，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:06:41.947

一般来说，您会发现在这些部分中，不解释“您尝试过什么”就提出问题往往会令人不悦。

我建议你看看我今天早些时候回答的这个有点相似的问题：

[通过电子邮件搜索将 Excel 2003 中的数据行复制并粘贴到不同的工作表](https://stackoverflow.com/questions/13517213/copy-paste-row-of-data-in-excel-2003-to-different-sheet-by-email-search)

这与您的需求之间的主要区别是：

*   代替 InputBox，您将使用 E10 中的值来运行 .Find 方法；和
*   您需要创建一个循环。您仍然运行 .Find 方法，如我的示例中所示，但您在循环中执行此操作，直到您遍历工作表中 E10 中值的每个实例。（获取您找到的第一个范围的地址，并继续运行 .Find 方法，直到您返回该地址。）查找 VBA 帮助中的 While 语句和 For 语句以获取有关如何创建循环的示例。

要获取单个单元格的值，一种方法是创建对单元格范围的引用，然后查询 .Value 属性。例如，完全限定的参考可以是：

```
Thisworkbook.Worksheets("Sheet1").Range("E10").value 
```

还有其他语法会产生相同的结果，但您可以及时了解这些语法。使用宏记录器记录您的操作是了解属性和方法的好方法。问题是，在我讨厌的 Excel 2010 界面的另一部分，微软决定隐藏这个东西。要进入宏编辑器，请转到文件 -> 选项 -> 自定义功能区并打开开发人员选项卡。

尝试所有这些，如果您遇到特定问题，请再次发布详细信息。