# StackOverflow 问答 14372000-14372999

# imap - 使用 BODY 部件获取 IMAP 附件

> ID：14372002
> 
> 赞同：0
> 
> 时间：2013-01-17T03:58:46.947
> 
> 标签：imap, mime

我正在创建一个具有 API 功能的电子邮件客户端。其中一项功能是提供 API 调用来下载给定的附件。

要获取附件，给定文件名和唯一电子邮件 ID（使用 GMail X-MSG-ID 唯一标识符），我正在下载整个电子邮件，使用 FETCH 命令和 RFC822 命令。这自然是很沉重的。

我想要做的是只下载作为附件的 BODY 部分，例如 BODY[1]、BODY[2] 等。我知道获取 BODYSTRUCTURE 会给我一个格式为（“PART”， “等”）（“部分”，“等”）。我想知道的是这些部分如何映射到 BODY[0]、BODY[1] 等。

零件出现在 BODYSTRUCTURE 响应中的顺序是否直接映射到 BODY 索引？因此，如果调用 BODYSTRUCTURE 我得到 ("123","ETC")("456","ETC")("789","ETC")，我可以假设 BODY[0] 是“123”并且 BODY [1] 是“456”吗？或者是否有另一种方法可以将 BODYSTRUCTURE 响应中括号中的元素映射到 BODY[0]、BODY[1] 等？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:40:34.260

我已经通过反复试验解决了这个问题。

BODY indeces 会出现在 BODYSTRUCTURE 响应中。因此，使用上面的示例，如果在 BODYSTRUCTURE 响应中获得 ("123","ETC")("456","ETC")，那么当您调用 BODY[1] 时，您将获得“123”部分，当您调用 BODY[2] 时，您将获得“456”，依此类推。

# c++ - 堆上的整数向量和释放内存

> ID：14372003
> 
> 赞同：0
> 
> 时间：2013-01-17T03:59:05.747
> 
> 标签：c++, memory, vector, free

我正在像这样在堆上创建一个整数向量：

`std::vector<int> vec = *new std::vector<int>();`

然后我到了我的程序的结尾，我需要释放内存，但使用`vec.clear()`不会释放内存。

我该如何正确地做到这一点？

谢谢，一切顺利-米切尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T04:01:06.013

> 我该如何正确地做到这一点？

替换这个：

```
std::vector<int> vec = *new std::vector<int>(); 
```

有了这个：

```
std::vector<int> vec; 
```

问题解决了。

与您可能遇到的其他语言不同，`new`在大多数情况下最好避免使用。它动态分配对象，就像在其他语言中一样。但与其他语言不同，C++ 没有垃圾收集器，因此您需要手动销毁动态分配的对象。但是，您编写代码的方式使这成为不可能。

您正在使用 new 动态分配一个对象，它返回一个指向该对象的指针。然后，您将取消引用该指针（通过 *），并将对象复制到`vec`. `vec`被正确销毁，但从中复制它的动态分配的对象没有。而且由于您没有存储该指针，因此您无法访问该对象，也无法处置它。为了销毁该对象，您必须捕获指针，如下所示：

```
std::vector<int>* vec_pointer = new std::vector<int>(); 
```

然后，您可以在指针上调用 delete，这会破坏对象并释放内存：

```
delete vec_pointer; 
```

值得庆幸的是，动态分配不是必需的，因为它在其他语言中通常是必需的。声明一个对象会创建它，当它超出范围时它会被销毁。因此，我向您展示的简单代码行就足够了，不需要删除语句。

附带说明一下，如果您出于某种原因确定必须进行动态分配。使用智能指针（谷歌）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T04:03:28.420

您的程序正在泄漏内存。

`std::vector<int> vec`在堆栈上声明一个向量。您在堆上创建第二个（空）向量，并使用它来复制构造堆栈上的那个。由于它是空的，这实际上什么都不做。

但是，您丢失了指向在堆上创建的向量的指针（因为您从未存储它）。所以你不能删除它，那个内存也不能回收。然而，堆栈上的向量会自行清理干净。

你可能想要的只是：

```
std::vector<int> vec;    // Vector on stack, no manual memory management required 
```

如果你出于某种原因真的想使用堆（堆栈更快，并且vector对象本身是一个小的固定大小，无论你放入多少元素，所以你不必担心堆栈溢出） ， 你可以做：

```
// Declare pointer to vector, and initialize it with a new vector on the heap
std::vector<int>* vec = new std::vector<int>(); 
```

甚至（在 C++11 中）：

```
auto vec = new std::vector<int>(); 
```

然后，当你完成它时：

```
delete vec; 
```

# python - 使用持久 telnet 连接的 Pythonic 方式？

> ID：14372005
> 
> 赞同：0
> 
> 时间：2013-01-17T03:59:18.493
> 
> 标签：python, class, reference, telnet

我正在尝试编写一个 Python（3.3，如果它有所不同）类，它将通过 telnet 连接与调制解调器通信。基本上，不同的命令将根据用户输入发送到调制解调器，我想在程序执行期间保持 telnet 连接打开。可能值得注意的是，这是我第一次使用 Python，来自 C# 和 Java 背景，所以我仍在努力掌握它的窍门。

无论如何，我想我对 OO 概念了解得不多，所以我想问这个：有没有一种首选方法可以在同一个类的多个方法中重用持久 telnet 连接？另外，将代码放在当前是否`_login`可取`__init__`？我将给出一些代码示例：

## 选项A：传递`tn`给`_login`

```
class Communicator:
    tn = telnetlib.Telnet()

    def __init__(self, host, port, user, password):
        self._login(user, password)

    def _login(self, host, port, user, password, conn=tn):
        conn.open(host, port)
        conn.read_until("Username: ")
        conn.write(user.encode('ascii') + b"\r\n")
        conn.read_until("Password: ")
        conn.write(password.encode('ascii') + b"\r\n") 
```

## 选项B：`_login`有用`self.tn`

```
class Communicator:
    tn = telnetlib.Telnet()

    def __init__(self, host, port, user, password):
        self._login(user, password)

    def _login(self, host, port, user, password):
        self.tn.open(host, port)
        self.tn.read_until("Username: ")
        self.tn.write(user.encode('ascii') + b"\r\n")
        self.tn.read_until("Password: ")
        self.tn.write(password.encode('ascii') + b"\r\n") 
```

## 选项C：别的？

我总是乐于接受建议。就像我说的，这是我第一次玩 Python，我应该练习 Python 的做事方式。

# python - Python中变量的内存大小

> ID：14372006
> 
> 赞同：83
> 
> 时间：2013-01-17T03:59:22.603
> 
> 标签：python, variables, memory

我正在编写 Python 代码来进行一些大数计算，并且非常担心计算中使用的内存。

因此，我想计算每个变量的每一位。

例如，我有一个变量**x ，它是一个很大的数字，并且想要计算代表****x**的位数。

下面的代码显然没用：

```
x=2**1000
len(x) 
```

因此，我转而使用以下代码：

```
x=2**1000
len(repr(x)) 
```

变量**x**是（十进制）是：

> 10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376

但上面的代码返回**303**

上面的 long long 序列的长度是 302，所以我认为**303**应该只与字符串长度有关。

所以，这是我原来的问题：

我怎么知道变量**x**的内存大小？

还有一件事; 用 C/C++ 语言，如果我定义

```
int z=1; 
```

这意味着为**z**分配了 4 个字节 = 32 位，并且这些位排列为 00..001（31 个 0 和一个 1）。

在这里，我的变量**x**很大，不知道是否遵循同样的内存分配规则？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-01-17T04:02:54.723

用于[`sys.getsizeof`](http://docs.python.org/2/library/sys.html#sys.getsizeof)获取对象的大小，以字节为单位。

```
>>> from sys import getsizeof
>>> a = 42
>>> getsizeof(a)
12
>>> a = 2**1000
>>> getsizeof(a)
146
>>> 
```

请注意，对象的大小和布局纯粹是特定于实现的。例如，CPython 可能使用与 IronPython 完全不同的内部数据结构。因此，对象的大小可能因实现而异。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T05:03:57.550

关于 Python long 的内部结构，请检查 sys.int_info（或 Python 2.7 的 sys.long_info）。

```
>>> import sys
>>> sys.int_info
sys.int_info(bits_per_digit=30, sizeof_digit=4) 
```

Python 将 30 位存储到 4 个字节（大多数 64 位系统）或 15 位存储到 2 个字节（大多数 32 位系统）。将实际内存使用情况与计算值进行比较，我得到

```
>>> import math, sys
>>> a=0
>>> sys.getsizeof(a)
24
>>> a=2**100
>>> sys.getsizeof(a)
40
>>> a=2**1000
>>> sys.getsizeof(a)
160
>>> 24+4*math.ceil(100/30)
40
>>> 24+4*math.ceil(1000/30)
160 
```

因为没有存储位，所以 0 有 24 个字节的开销。较大值的内存要求与计算值相匹配。

如果您的数字太大以至于您担心 6.25% 的未使用位，您可能应该查看[gmpy2](http://code.google.com/p/gmpy/)库。内部表示使用所有可用位，并且对于较大的值（例如，大于 100 位），计算速度明显更快。

# ios - 切换到其他视图控制器时如何保持 NSArray 可用

> ID：14372008
> 
> 赞同：0
> 
> 时间：2013-01-17T03:59:42.760
> 
> 标签：ios, nsmutablearray

嗨，在 VC1 中，我有一个 NSMutableArray 显示结果。即使用户单击不同的选项卡（因此他们不必再次搜索），我也希望保持该数组处于活动状态，直到用户再次搜索。

我有一个强有力的指针，但是当我离开视图时它似乎卸载了。

没有太多要显示的代码（_resultsArray 是使用委托从以前的控制器设置的，因此它已经加载了结果）

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];
        _resultsTableView.dataSource=self;
        _resultsTableView.delegate=self;
        [self.navigationController.navigationBar setHidden:YES];
    }
//then standard tableview delegate methods... 
```

这段代码是为了弄清楚如何通过标签栏来共享信息。（在准备中）

目前在搜索 VC。现在我有我想给 resultsIndexVC 的结果。下面的代码尝试这样做。这是放在当前（搜索VC）为segue做准备的。

```
ResultsIndexViewController* vc = [[ResultsIndexViewController alloc] init];
        UITabBarController* tbc = [segue destinationViewController];
        vc = (ResultsIndexViewController *)[[tbc customizableViewControllers] objectAtIndex:1];
        vc.SearchDelegate=self;//crash here (normally works if using regular segue)
        vc.resultsArray = _temporaryResultsArray;
        vc.originalQuery=_queryArray; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T17:53:33.350

问题是我在推动一个 VC。相反，我使用了标签栏（切换标签时不会释放对象）

# asp.net - 当 .NET 4.5 Framework 仅安装在负载平衡器后面的一台服务器中时，ASP.NET EventValidation 失败

> ID：14372009
> 
> 赞同：7
> 
> 时间：2013-01-17T04:00:06.847
> 
> 标签：asp.net, cryptography, .net-4.5, web-farm, eventvalidation

我们在其中一台 Web 服务器中安装了 .net 4.5 Framework。我们的应用程序针对 .net 4.0 并在负载均衡器后面运行多个服务器。

安装后，我们收到一些 POST 请求的以下错误消息

error_name=System.ArgumentException error_message=回发或回调参数无效。使用配置或页面中的 <%@ Page EnableEventValidation="true" %> 启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。error_details=来源：System.Web

当从安装 .net 4.5 的服务器请求时，请求正文中的 __EVENTVALIDATION 值不同。MSDN 提到 .net 4.5 中的密码学更改使用 opt in 配置，因此默认情况下它应该是向后兼容的。

是否有配置更改，在不禁用事件验证的情况下，我需要做 _EVENTVALIDATION 在安装 .net 4.5 的机器上的行为与仅在 .net 4.0 上的行为相同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-15T13:13:40.903

我遇到了同样的问题，因为我们目前正在将我们的服务器场从 2003 (.NET 4.0) 迁移到 Windows 2012 (.NET 4.5)。查看 ClientScriptManager，事件验证代码发生了很大变化。

解决此问题的方法是添加 appSetting 以使用旧事件验证兼容性，如此[处所述](http://msdn.microsoft.com/en-us/library/hh975440.aspx)

```
<appSettings>
  <add key="aspnet:UseLegacyEventValidationCompatibility" value="true" />
</appSettings> 
```

现在，我的页面中为事件验证生成的值是由 .NET 4.0 还是 4.5 生成的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T18:29:26.850

有趣的问题，我会尝试将某些行为冻结到特定版本的框架（在 web.config 中）。

[请求验证模式](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestvalidationmode.aspx)

```
<httpRuntime requestValidationMode="4.0" /> 
```

[编译目标Framework](http://msdn.microsoft.com/en-us/library/system.web.configuration.compilationsection.targetframework%28v=vs.100%29.aspx)

```
<compilation targetFramework="4.0"> 
```

[控件渲染兼容性版本](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.controlrenderingcompatibilityversion.aspx)

```
<pages controlRenderingCompatibilityVersion="4.0"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T21:25:18.147

我会检查机器密钥配置并确保它在所有服务器上都相同。 MachineKey 在 ASP.NET和 [http://aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)[中的用途](https://stackoverflow.com/questions/550210/uses-for-machinekey-in-asp-net)

此外，您可以检查是否有任何客户端脚本

> “如果您编写的客户端脚本在运行时更改客户端中的控件，则可能必须使用 RegisterForEventValidation 方法以避免错误的事件验证错误。”

[http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableeventvalidation.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableeventvalidation.aspx)

# file - 我想要 GridFS 的好处，但主要存储 16MB 以下的文件

> ID：14372011
> 
> 赞同：6
> 
> 时间：2013-01-17T04:00:09.650
> 
> 标签：file, mongodb, storage, versioning, gridfs

我需要为大多数小于 16MB 的文件创建一个存储系统，但我想要 GridFS 的好处，例如版本控制、自定义元数据、轻松备份（使用 mongodump）等。我想说我的文件的 10% 可能会结束16MB，所以我不能依赖存储在单个文档中，并且我不想重新创建 API 以获得我正在寻找的好处。我也已经在使用 mongoDB 系统。

我应该使用 GridFS 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T12:02:01.203

如果没有更多细节，我建议您先阅读[此处](http://docs.mongodb.org/manual/faq/developers/#faq-developers-when-to-use-gridfs)提供的建议。

鉴于您的所有文档在作为 BinData 存储为 BSON 文档时都不适合最大文档大小，我建议使用 gridFS 系统来获得一致的编程和数据管理体验（对于开发人员和 IT）。根据文件的使用方式，当文件存储在 GridFS 中时，您可以通过分块读取和写入更有效地将文件内容流式传输到客户端。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T09:53:10.670

建议将小于 16 MB 的文件存储在单个文档中，使用 BinData 数据类型存储二进制数据。那么，在单个文档中存储大小低于 16MB 的文件并仅对大小超过 16MB 的文件使用 GridFS 有什么问题。

# qt - Qt 标准对话框示例：打开文件

> ID：14372012
> 
> 赞同：9
> 
> 时间：2013-01-17T04:00:10.787
> 
> 标签：qt, user-interface, openfiledialog, qt-designer, getopenfilename

我开始学习 Qt 以在我的一个项目中使用，我需要做的是创建一个允许用户打开文件的 GUI。我浏览了这些示例，发现其中一个正是我需要的；问题是它还有很多其他的东西，以至于我不知道我在看什么或我在寻找什么。

基本上，我的问题是：

如何制作您在图片下方看到的内容，单击按钮并选择相关文件后，它会在右侧的框中显示并存储文件路径？ ![在此处输入图像描述](../Images/2b83b3da02f5e86bc0594273fdcce685.png)

我已经想出了如何让按钮打开文件对话框，我唯一的问题是让它存储和显示文件路径。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T05:45:20.317

用这个解决了它：

```
void OpenXMLFile::on_File1Button_clicked()
{
    file1Name = QFileDialog::getOpenFileName(this,
         tr("Open XML File 1"), "/home", tr("XML Files (*.xml)"));
    ui->File1Path->setText(file1Name);

}

void OpenXMLFile::on_File2Button_clicked()
{
    file2Name = QFileDialog::getOpenFileName(this,
         tr("Open XML File 2"), "/home", tr("XML Files (*.xml)"));
    ui->File2Path->setText(file2Name);

} 
```

这是我的 GUI：

![在此处输入图像描述](../Images/5cb2fee5f3138487e7edf335c1dd3f93.png)

（如果有人想知道，按钮旁边的框是行编辑）

# iphone - 如何请求 iOS 安装的应用程序访问身份验证代码以进行谷歌身份验证

> ID：14372024
> 
> 赞同：1
> 
> 时间：2013-01-17T04:01:30.437
> 
> 标签：iphone, authorization, google-authentication

这是我在我的过程中所做的，我还需要什么，请告诉我。

1.  我在谷歌控制台注册了我的 iPhone 应用程序并获得了客户端 ID 和秘密 ID。
2.  在 info.plist 中添加 url 类型为 AB.MyGoogleAppLogin(Ab-bundle identifier, MyGoogleAppLogin - name of registered app)。
3.  我的应用程序不在网络或本地主机上，它在我的 mac 本地存在。

4.  在我的应用程序中使用 web 视图，并在 interface 中包含协议。

我如何获得我的授权码以及从哪里获得它？.

请帮帮我。谢谢

# codeblocks - 如何在这个程序中输入单词？

> ID：14372026
> 
> 赞同：1
> 
> 时间：2013-01-17T04:01:53.180
> 
> 标签：codeblocks

他让我在这个程序中输入任何单词，我可以看到一个转换为另一个，但我不知道在哪里插入我想要的单词。我下载了 CodeBlocks，因为它看起来像是 Google 认为最好的 C++ 运行程序，但是当我单击运行时，它只是说我需要两个字符串。猜那意味着单词。

谁能看看这个并告诉我如何插入 2 个单词？

该程序：

```
#include <iostream>
#include <string>
#include <vector>
#include <cstdlib>

using namespace std;

#define MIN(X,Y) ((X <= Y) ? X:Y)
#define MIN3(A,B,C) ((A <= MIN(B,C)) ? A : MIN(B,C))

class EDIST {
private:
  string _s1, _s2;
  int _edit_distance;

  enum backtrace_pointer { L, D, U };
  // L==left, D==diagonal, U==up.

  vector<vector<int> > dp_table;
  vector<vector<int> > backtrace;

public:
  EDIST(const char *a, const char *b) {
    _s1 = a;
    _s2 = b;
    _edit_distance = 0;
  }

  void run();

private:
  int edit_distance() const { return _edit_distance; }
  void dp_edit_distance();
  void print_dp_tables();
  void init_dp_tables();
  void print_solution();
};

void EDIST :: print_dp_tables()
{
  cout << "\nPrinting dynamic programming table\n";

  cout << "\t_";
  for ( int i=0; i < _s2.size(); i++ )
    cout << "\t" << _s2[i];
  cout << endl;

  for ( int i=0; i <= _s1.size(); i++ ) {
    if ( i ) cout << _s1[i-1];
    else cout << "_";

    for ( int j=0; j <= _s2.size(); j++ )
      cout << "\t" << dp_table[i][j];
    cout << endl;
  }

  cout << "\nPrinting backtrace table\n";

  cout << "\t_";
  for ( int i=0; i < _s2.size(); i++ )
    cout << "\t" << _s2[i];
  cout << endl;

  for ( int i=0; i <= _s1.size(); i++ ) {
    if ( i ) cout << _s1[i-1];
    else cout << "_";

    for ( int j=0; j <= _s2.size(); j++ ) {
      cout << "\t";
      if ( backtrace[i][j] == L ) cout << "L";
      else if ( backtrace[i][j] == D ) cout << "D";
      else cout << "U";
    }
    cout << endl;
  }
}

void EDIST :: init_dp_tables()
{
  for ( int i=0; i <= _s1.size(); i++ ) {
    vector <int> v;
    vector<int> b;

    for ( int j=0; j <= _s2.size(); j++ ) {
      int n=0, op=0;;

      if ( !i ) { n=j; op=L; }
      else if ( !j ) { n=i; op=U; }
      else { n=0; op=D; }

      v.push_back(n);
      b.push_back(op);
    }

    dp_table.push_back(v);
    backtrace.push_back(b);
  }

  for ( int i=0; i <= _s1.size(); i++ )
    dp_table[i][0] = i;

  for ( int j=0; j <= _s2.size(); j++ )
    dp_table[0][j] = j;
}

void EDIST :: dp_edit_distance()
{
  for ( int j=1; j <= _s2.size(); j++ ) {

    for ( int i=1; i <= _s1.size(); i++ ) {

      int a = dp_table[i-1][j]+1;
      int b = dp_table[i-1][j-1];
      int c = dp_table[i][j-1]+1;

      if ( _s1[i-1] != _s2[j-1] )
    b++;

      dp_table[i][j] = MIN3(a,b,c);

      if ( a == dp_table[i][j] ) backtrace[i][j] = U;
      else if ( b == dp_table[i][j] ) backtrace[i][j] = D;
      else backtrace[i][j] = L;
    }
  }
}

void EDIST :: print_solution()
{
  vector<string> string_sequence;
  string_sequence.push_back(_s2);

  int i = _s1.size();
  int j = _s2.size();

  while ( i || j ) {

    string s = string_sequence[string_sequence.size()-1];

    bool add_string=true;
    int new_i=i, new_j=j;

    if ( backtrace[i][j] == L ) {//LEFT :: insert
      new_j--;
      s.erase(j-1,1);
    }
    else if ( backtrace[i][j] == U ) {//UP : delete
      new_i--;
      string sub1 = (j >= 1 ? s.substr(0,j) : "");
      string sub2 = (j < s.size() ? s.substr(j) : "");
      s = sub1 + _s1[i-1] + sub2;
    }
    else {//DIAGONAL : replace OR no-operation
      new_i--;
      new_j--;
      if ( i && j && dp_table[i][j] != dp_table[new_i][new_j] )
    s.replace(j-1,1,_s1.substr(i-1,1));
      else
    add_string = false;
    }

    if ( add_string ) {
      string_sequence.push_back(s);
      _edit_distance++;
    }

    i = new_i;
    j = new_j;
  }

  cout << "\nEdit distance : " << edit_distance() << endl;

  if ( string_sequence.size() )
    cout << "\nPrinting mutations : \n";

  for ( int i=string_sequence.size()-1; i >= 0; i-- )
    cout << "\t" << string_sequence[i] << endl;

}

void EDIST :: run()
{
  cout << "\nFinding edit-distance between strings `";
  cout << _s1 << "' and `" << _s2 << "'" << endl;

  init_dp_tables();
  dp_edit_distance();
  print_dp_tables();
  print_solution();
}

int main(int argc, char *argv[])
{
  if ( argc != 3 ) {
    cerr << "Need 2 strings as input!\n" << endl;
    exit(1);
  }

  EDIST e(argv[1], argv[2]);
  e.run();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:04:20.663

当您下载该程序时，您可能会得到一个 .exe 文件，您需要使用两个命令行参数执行该程序，如下所示：

```
programname.exe word1 word2 
```

如果您的朋友没有给您可执行文件，您需要将源代码编译成可执行文件。CodeBlocks 提供此功能并自动运行编译结果。不幸的是，它没有将任何参数传递给结果，这就是程序告诉您它需要两个单词的原因。（CodeBlocks 正在执行`programname.exe`）

此问题的一种解决方案是配置代码块以提供参数。[正如danben指出的那样，](https://stackoverflow.com/a/14372051/203133)您可以使用“项目”菜单中的“设置程序参数”选项来配置它以提供参数。如果您将程序参数设置为，`word1 word2`那么 CodeBlocks 将执行`programname.exe word1 word2`您想要的。

如果你想在别处运行这个程序，你需要编译它。幸运的是，每当您在 CodeBlocks 中单击“运行”时，它实际上会在某处编译可执行文件，通常在项目文件夹下，`bin\debug`或者`bin\release`您会找到一个可执行文件。您可以使用上述文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T04:04:46.103

这是一个关于 CodeBlocks 而不是 C++ 的问题，但快速的 Google 搜索显示您需要选择“项目”菜单下的“设置程序参数”选项。

# php - 表中的数据在更新时变为空白

> ID：14372029
> 
> 赞同：0
> 
> 时间：2013-01-17T04:02:15.163
> 
> 标签：php, mysql, insert

当我尝试更新来自表的数据时，它会使表中的该行变为空白..

这是我的代码：

1）edit.php（我认为更新查询错误，但我不确定....）

```
<?php
require("config.php");
$id =$_REQUEST['id'];

$result = mysql_query("SELECT * FROM bookss WHERE id = '$id'");
$test = mysql_fetch_array($result);
if (!$result) 
        {
        die("Error: Data not found..");

        }

                $Title=$test['book_title'] ;
                $Author_name= $test['author_name'] ;                    
                $Mobile=$test['mobile'] ;
                $Email=$test['email'] ;
                $Publisher_name=$test['publisher_name'] ;
                $Copy_right_year =$test['copy_right_year'] ;

if(isset($_POST['btnSubmit']))
{   
    $book_save = $_POST['book_title'];
    $author_save = $_POST['author_name'];
    $mobile_save = $_POST['mobile'];
    $email_save = $_POST['email'];
    $publisher_save = $_POST['publisher_name'];
    $copy_right_save = $_POST['copy_right_year'];

    mysql_query("UPDATE bookss SET book_title ='$book_save',author_name ='$author_save',
         mobile ='$mobile_save',email ='$email_save',publisher_name ='$publisher_save',copy_right_year ='$copy_right_save' WHERE ID = '$id'")
                or die(mysql_error()); 
    echo "Saved!";

    header("Location: view.php");           
}
mysql_close($conn);
?>
<html">
<head>
<title>Untitled Document</title>
</head>

<body>
<form method="post">
<table>
    <tr>
        <td>Title:</td>
        <td><input type="text" name="title" value="<?php echo $Title ?>"/></td>
    </tr>
    <tr>
        <td>Author</td>
        <td><input type="text" name="author" value="<?php echo $Author_name ?>"/></td>
    </tr>
    <tr>
        <td>Mobile</td>
        <td><input type="text" name="name" value="<?php echo $Mobile ?>"/></td>
    </tr>
    <tr>
        <td>Email</td>
        <td><input type="text" name="name" value="<?php echo $Email ?>"/></td>
    </tr>
    <tr>
        <td>Publisher Name</td>
        <td><input type="text" name="name" value="<?php echo $Publisher_name ?>"/></td>
    </tr>

    <tr>
        <td>Copyright Year</td>
        <td><input type="text" name="copy" value="<?php echo $Copy_right_year ?>"/></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><input type="submit" name="btnSubmit" value="Update" /></td>
    </tr>
</table>

</body>
</html> 
```

2）DATABASE（我的数据库）

```
SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `idu3`
-- Table structure for table `bookss`
--

CREATE TABLE IF NOT EXISTS `bookss` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `book_title` varchar(255) NOT NULL,
  `author_name` varchar(255) NOT NULL,
  `mobile` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `publisher_name` varchar(255) NOT NULL,
  `copy_right_year` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=12 ;

--
-- Dumping data for table `bookss`
--

INSERT INTO `bookss` (`id`, `book_title`, `author_name`, `mobile`, `email`, `publisher_name`, `copy_right_year`) VALUES
(5, 'harshad heaven1', 'Harshad Patel', '8866672489', 'harshadheaven70@gmail.com', 'Friendz Company', '1990'),
(6, 'harshad heaven1', 'Harshad patel', '8866672489', 'harshadheaven70@gmail.com', 'Friendz Company', '1990'),
(7, '', '', '', '', '', ''),
(8, '', '', '', '', '', ''),
(9, '', '', '', '', '', ''),
(10, '', '', '', '', '', '');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

我是新手。总是欢迎提出建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:18:11.317

1.  您以错误的方式管理表单字段的名称。你已经给`name='name'`了手机、电子邮件和出版商名称字段。
2.  此外，您在表单中已将名称命名为“标题”，但您访问的是`$_POST['book_title']`. 作者和版权年份字段也是如此。使用与表单中给出的名称相同的名称，以通过 POST 数组访问。

纠正这些事情，然后它会起作用。

# java - Java Swing - 条件 SQL 查询

> ID：14372031
> 
> 赞同：0
> 
> 时间：2013-01-17T04:02:25.117
> 
> 标签：java, sql, swing

我有一个 sql select 语句，通过从 jComboBox 和 jDateChooser 获取用户输入信息，通过 jButton 在我的 jtable 上显示查询。

是否可以为按钮设置条件，例如

下面是 jButton 动作监听器的代码

```
 java.util.Date dateFromDateChooser = jDateChooser.getDate();
    String dateString = String.format("%1$tY-%1$tm-%1$td", dateFromDateChooser);  

    String attendant = (String) cbName.getSelectedItem();
    String fill = "SELECT id as 'No', recDate as 'Date', super as 'Supervisor', attendant as 'Attendant' from log"
            + "WHERE recDate = '"+dateString+"'"
            + "and attendant = '" + attendant + "'";

    try{

        ps = conn.prepareStatement(fill);
        rs = ps.executeQuery();    
        jTable1.setModel(DbUtils.resultSetToTableModel(rs));

    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    } 
```

上面的代码工作正常，但我希望允许用户使用两种类型的条件。例如通过选择“日期和 jComboBox”或仅选择“日期”来显示搜索结果

对于这种情况，我可以使用 if else 语句吗？

请指教...

![在此处输入图像描述](../Images/37165e1bb94bf907a0788a8fa04ea2de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:52:19.693

为您的 SQL 构建添加检查

```
String fill = "SELECT id as 'No', recDate as 'Date', super as 'Supervisor', attendant as 'Attendant' from log"
        + "WHERE recDate = '"+dateString+"'";

if(comboboxShouldBeIncluded) {
        fill+= " and attendant = '" + attendant + "'";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:01:10.393

如果未选择姓名，则无服务员查询

```
String attendant = (String) cbName.getSelectedItem();
    String qry;
    if( attendant != null && !attendant.isEmpty() ) {
     qry = "SELECT id as 'No', recDate as 'Date', super as 'Supervisor', attendant as 'Attendant' from log"
            + "WHERE recDate = '"+dateString+"'"
            + "and attendant = '" + attendant + "'";
    } else {
        qry = "SELECT id as 'No', recDate as 'Date', super as 'Supervisor', attendant as 'Attendant' from log"
            + "WHERE recDate = '"+dateString+"'";
    } 
```

# c++ - 在 C++ 中使用动态加载重新加载库

> ID：14372034
> 
> 赞同：5
> 
> 时间：2013-01-17T04:02:50.950
> 
> 标签：c++, dlopen, dynamic-loading

如果我在 C++ 中使用动态加载打开一个库，我以后可以重新加载同一个库的更新版本吗？我自己会对此进行测试，但在我开始将其作为我正在研究的潜在解决方案之前，我很好奇它的可行性。

以防万一，我在 Linux 上运行。能够使其在其他操作系统上运行会很好，但这不是必需的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:05:53.797

从技术上讲，你当然可以——没有什么能阻止你这样做。这就是`dlopen()/dlclose()`在用户空间中的工作方式。这也是内核加载和卸载动态模块等的方式。但是，实际上，编写不佳的共享对象或主机程序可能会在渲染进程（或内核，如果您正在谈论内核模块）时引入灾难性的副作用无法使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-07T21:44:56.607

正如已经回答的那样，这应该有效。关于`dlopen`/ `dlclose`clean 在 C++ 中的使用，你应该看看这个答案[C++ Dynamic Shared Library on Linux](https://stackoverflow.com/a/54582644/1180868)。

# java - 有没有办法在 Eclipse 中创建自定义警告？

> ID：14372036
> 
> 赞同：5
> 
> 时间：2013-01-17T04:03:01.463
> 
> 标签：java, eclipse

我知道显而易见的答案是“注意”，但是因为我经常在 Java 和 Javascript 之间切换，我不断地忘记 == 不适用于 Java 方面的字符串比较。`==`有什么方法可以让 Eclipse 警告我，当它看到我比较两个字符串而不是使用 equals() 方法时，我可能没有做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:33:40.963

有许多静态代码分析器可以做这类事情。其中很少有：

1.  [checkStyle](http://checkstyle.sourceforge.net/)
2.  [PMD](http://pmd.sourceforge.net/)
3.  [声纳](http://www.sonarsource.org/)
4.  [发现错误](http://findbugs.sourceforge.net/)

它们有许多内置规则，您也可以在 eclipse 中配置它们。因此，当您键入并保存时，这些工具也会显示警告，就像内置的 Eclipse 警告一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T04:45:58.340

我建议您查看 APT（如果您使用的是 jdk 1.5、1.6）或处理器（如果您使用 jdk 1.7）。您可以将您的自定义代码集成到您的 Eclipse 中，并非常容易地获得您想要的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T04:31:26.527

我建议只使用 FindBugs，它是我用过的最好的免费代码审查程序..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T04:04:55.010

使用[Eclipse JSHint 插件](http://github.eclipsesource.com/jshint-eclipse/)，如果您错误地使用`==`而不是`===`在 Javascript 中使用，它会发出警告。

# iphone - 拖回同一位置

> ID：14372040
> 
> 赞同：0
> 
> 时间：2013-01-17T04:03:44.870
> 
> 标签：iphone, ios

我在我的应用程序中使用拖动选项，因为我想将对象设置在相同的位置，即在拖动回相同的位置后，我尝试使用以下编码将它设置为其他位置，我应该在此进行哪些更改，

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
CGPoint touchPoint = [[touches anyObject] locationInView:self.view];
if (touchPoint.x > self.img1.frame.origin.x &&
    touchPoint.x < self.img1.frame.origin.x + self.img1.frame.size.width &&
    touchPoint.y > self.img1.frame.origin.y &&
    touchPoint.y < self.img1.frame.origin.y + self.img1.frame.size.height )
{
    self.img1.backgroundColor = self.img1.backgroundColor;

}
self.img1.frame = CGRectMake(self.homePosition.x, self.homePosition.y,
                                   self.img1.frame.size.width,
                                   self.img1.frame.size.height);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:32:07.500

在`.h`

CGPoint startPt;

在`.m`

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    startPt = [[touches anyObject] locationInView:self.view];

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
CGPoint touchPoint = [[touches anyObject] locationInView:self.view];
if (touchPoint.x > self.img1.frame.origin.x &&
    touchPoint.x < self.img1.frame.origin.x + self.img1.frame.size.width &&
    touchPoint.y > self.img1.frame.origin.y &&
    touchPoint.y < self.img1.frame.origin.y + self.img1.frame.size.height )
{
    self.img1.backgroundColor = self.img1.backgroundColor;

}
self.img1.frame = CGRectMake(startPt.x, startPt.y,
                                   self.img1.frame.size.width,
                                   self.img1.frame.size.height);
} 
```

# netty - 在内核 recv-q 中增加客户端数据包（用 netstat 确认）并且不读取数据包

> ID：14372041
> 
> 赞同：0
> 
> 时间：2013-01-17T04:03:51.073
> 
> 标签：netty, recv

我不知道是netty 3.2.7.Final bugs。问题是在客户端（使用 SecureChatClient）意外地增加了 recv-q 中从服务器端接收实时消息的数据包（使用 SecureChatServer）。我猜想在应用程序级别读取数据包时会出现死锁。

是netty 3.2.7的bug吗？或者你有没有增加recv-q 的想法？我在下面附上了 netstat 结果和 jstack 线程转储。

```
Netstat Result : 

tcp     0  0 client-side'IP:54190  server-side'IP-1:61617  ESTABLISHED
tcp     0  0 client-side'IP:53254  server-side'IP-2:61617  ESTABLISHED
tcp     0  0 client-side'IP:60469  server-side'IP-3:61617  ESTABLISHED
tcp     0  0 client-side'IP:35387  server-side'IP-4:61617  ESTABLISHED
tcp     0  0 client-side'IP:56935  server-side'IP-5:61617  ESTABLISHED
tcp     0  0 client-side'IP:50508  server-side'IP-6:61617  ESTABLISHED
tcp 708131 0 client-side'IP:48940  server-side'IP-7:61617  ESTABLISHED
tcp     0  0 client-side'IP:50279  server-side'IP-8:61617  ESTABLISHED

tcp     0  0 client-side'IP:53568  server-side'IP-1:61616  ESTABLISHED
tcp     0  0 client-side'IP:52674  server-side'IP-2:61616  ESTABLISHED
tcp     0  0 client-side'IP:60489  server-side'IP-3:61616  ESTABLISHED
tcp     0  0 client-side'IP:48712  server-side'IP-4:61616  ESTABLISHED
tcp     0  0 client-side'IP:55519  server-side'IP-5:61616  ESTABLISHED
tcp     0  0 client-side'IP:38608  server-side'IP-6:61616  ESTABLISHED
tcp     0  0 client-side'IP:57940  server-side'IP-7:61616  ESTABLISHED
tcp     0  0 client-side'IP:51759  server-side'IP-8:61616  ESTABLISHED

Jstack Dump : 

2013-01-11 14:36:20
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.4-b02 mixed mode):

"http-80-6" daemon prio=10 tid=0x00002aaab2dee800 nid=0x1888 in Object.wait() [0x00000000417bd000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0e0b630> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00000000c0e0b630> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662)

"http-443-13" daemon prio=10 tid=0x00002aaab599a800 nid=0x1887 in Object.wait() [0x00000000419bf000]
"http-443-12" daemon prio=10 tid=0x00002aaab43e5800 nid=0x1886 in Object.wait() [0x0000000042339000]
"http-443-11" daemon prio=10 tid=0x00002aaab43e4800 nid=0x1885 in Object.wait() [0x000000004253b000]
"http-443-10" daemon prio=10 tid=0x00002aaab43e4000 nid=0x1884 in Object.wait() [0x000000004273d000]
"http-443-9" daemon prio=10 tid=0x00002aaab43e3000 nid=0x1883 in Object.wait() [0x000000004293f000]
"http-443-8" daemon prio=10 tid=0x00002aaab43e2800 nid=0x1881 in Object.wait() [0x0000000042b41000]
"http-443-7" daemon prio=10 tid=0x00002aaab43e2000 nid=0x1880 in Object.wait() [0x0000000042d43000]
"http-443-6" daemon prio=10 tid=0x00002aaab5aa3800 nid=0x17b7 in Object.wait() [0x0000000042f45000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0e0c2c0> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00000000c0e0c2c0> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662)

"http-80-5" daemon prio=10 tid=0x00002aaab30a4800 nid=0x17b6 in Object.wait() [0x0000000043349000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0e0b780> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00000000c0e0b780> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662)

"http-80-4" daemon prio=10 tid=0x00002aaab3c4b800 nid=0x17b5 in Object.wait() [0x0000000043147000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0e0ba20> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00000000c0e0ba20> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662)

"http-80-3" daemon prio=10 tid=0x00002aaab3f26800 nid=0x17b4 in Object.wait() [0x000000004354b000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0e0bcc0> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00000000c0e0bcc0> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662)

"Attach Listener" daemon prio=10 tid=0x00002aaab30a4000 nid=0x111e waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"http-443-5" daemon prio=10 tid=0x00002aaab6017000 nid=0x4af5 in Object.wait() [0x000000004394f000]
"http-443-4" daemon prio=10 tid=0x00002aaab42e6000 nid=0x2f85 in Object.wait() [0x0000000043b51000]
"http-443-3" daemon prio=10 tid=0x00002aaab40a5800 nid=0x632a in Object.wait() [0x0000000043d53000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0dfce70> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00000000c0dfce70> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662)

"MultiThreadedHttpConnectionManager cleanup" daemon prio=10 tid=0x00002aaab435a000 nid=0x4139 in Object.wait() [0x000000004556b000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c031e9a0> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
    - locked <0x00000000c031e9a0> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$ReferenceQueueThread.run(MultiThreadedHttpConnectionManager.java:1122)

"TP-Monitor" daemon prio=10 tid=0x00002aaab4539800 nid=0x412a in Object.wait() [0x000000004546a000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c031ea40> (a org.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)
    at org.apache.tomcat.util.threads.ThreadPool$MonitorRunnable.run(ThreadPool.java:565)
    - locked <0x00000000c031ea40> (a org.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)
    at java.lang.Thread.run(Thread.java:662)

"TP-Processor4" daemon prio=10 tid=0x00002aaab4262000 nid=0x4129 runnable [0x0000000045369000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    - locked <0x00000000c031eb00> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at java.net.ServerSocket.accept(ServerSocket.java:430)
    at org.apache.jk.common.ChannelSocket.accept(ChannelSocket.java:311)
    at org.apache.jk.common.ChannelSocket.acceptConnections(ChannelSocket.java:668)
    at org.apache.jk.common.ChannelSocket$SocketAcceptor.runIt(ChannelSocket.java:879)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662)

"TP-Processor3" daemon prio=10 tid=0x00002aaab43ae000 nid=0x4128 in Object.wait() [0x0000000045268000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c031edc8> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:662)
    - locked <0x00000000c031edc8> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Thread.run(Thread.java:662)

"TP-Processor2" daemon prio=10 tid=0x00002aaab57a6800 nid=0x4127 in Object.wait() [0x0000000045167000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c031ee70> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:662)
    - locked <0x00000000c031ee70> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Thread.run(Thread.java:662)

"TP-Processor1" daemon prio=10 tid=0x00002aaab601a000 nid=0x4126 in Object.wait() [0x0000000045066000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c031ef18> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:662)
    - locked <0x00000000c031ef18> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Thread.run(Thread.java:662)

"http-443-2" daemon prio=10 tid=0x00002aaab42b7000 nid=0x4125 in Object.wait() [0x0000000044f65000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0167dd8> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00000000c0167dd8> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662)

"http-443-1" daemon prio=10 tid=0x00002aaab459a800 nid=0x4124 runnable [0x0000000044e64000]
   java.lang.Thread.State: RUNNABLE
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)
    - locked <0x00000000eede5038> (a java.lang.Object)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:787)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    - locked <0x00000000eede50a0> (a com.sun.net.ssl.internal.ssl.AppInputStream)
    at org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:735)
    at org.apache.coyote.http11.InternalInputBuffer.parseRequestLine(InternalInputBuffer.java:366)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:814)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662)

"http-443-Acceptor-0" daemon prio=10 tid=0x00002aaab5fcf000 nid=0x4123 runnable [0x0000000044d63000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    - locked <0x00000000c02b1bf0> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at com.sun.net.ssl.internal.ssl.SSLServerSocketImpl.accept(SSLServerSocketImpl.java:261)
    at org.apache.tomcat.util.net.jsse.JSSESocketFactory.acceptSocket(JSSESocketFactory.java:178)
    at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:352)
    at java.lang.Thread.run(Thread.java:662)

"http-80-2" daemon prio=10 tid=0x00002aaab3d22000 nid=0x4122 in Object.wait() [0x0000000044c62000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c031f6b8> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00000000c031f6b8> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662)

"http-80-1" daemon prio=10 tid=0x00002aaab3d21800 nid=0x4121 in Object.wait() [0x0000000044b61000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c031f918> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00000000c031f918> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662)

"http-80-Acceptor-0" daemon prio=10 tid=0x00002aaab450d000 nid=0x4120 runnable [0x0000000044a60000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    - locked <0x00000000c031fb50> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at java.net.ServerSocket.accept(ServerSocket.java:430)
    at org.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(DefaultServerSocketFactory.java:61)
    at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:352)
    at java.lang.Thread.run(Thread.java:662)

"ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon prio=10 tid=0x00002aaab45b5800 nid=0x411f waiting on condition [0x0000000041bc1000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1631)
    at java.lang.Thread.run(Thread.java:662)

"scheduler_QuartzSchedulerThread" prio=10 tid=0x00002aaab434a800 nid=0x411b waiting on condition [0x000000004495f000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:272)

"scheduler_Worker-9" prio=10 tid=0x00002aaab540b000 nid=0x411a in Object.wait() [0x000000004485e000]
"scheduler_Worker-8" prio=10 tid=0x00002aaab4a22000 nid=0x4119 in Object.wait() [0x000000004475d000]
"scheduler_Worker-7" prio=10 tid=0x00002aaab4e41000 nid=0x4118 in Object.wait() [0x000000004465c000]
"scheduler_Worker-6" prio=10 tid=0x00002aaab577e800 nid=0x4117 in Object.wait() [0x000000004455b000]
"scheduler_Worker-5" prio=10 tid=0x00002aaab5096000 nid=0x4116 in Object.wait() [0x000000004445a000]
"scheduler_Worker-4" prio=10 tid=0x00002aaab528d800 nid=0x4115 in Object.wait() [0x0000000044359000]
"scheduler_Worker-3" prio=10 tid=0x00002aaab5185800 nid=0x4114 in Object.wait() [0x0000000044258000]
"scheduler_Worker-2" prio=10 tid=0x00002aaab5185000 nid=0x4113 in Object.wait() [0x0000000044157000]
"scheduler_Worker-1" prio=10 tid=0x00002aaab4d8b800 nid=0x4112 in Object.wait() [0x0000000044056000]
"scheduler_Worker-0" prio=10 tid=0x00002aaab421f000 nid=0x4111 in Object.wait() [0x0000000043f55000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0536710> (a java.lang.Object)
    at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:428)
    - locked <0x00000000c0536710> (a java.lang.Object)
    at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:47)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:518)

"New I/O client worker #16-1" prio=10 tid=0x00002aaab80b3000 nid=0x4110 runnable [0x0000000043e54000]
"New I/O client worker #15-1" prio=10 tid=0x00002aaab2db1000 nid=0x410e runnable [0x0000000043c52000]
"New I/O client worker #14-1" prio=10 tid=0x00002aaab3767000 nid=0x410c runnable [0x0000000043a50000]
"New I/O client worker #13-1" prio=10 tid=0x00002aaab8346800 nid=0x410a runnable [0x000000004384e000]
"New I/O client worker #12-1" prio=10 tid=0x00002aaab2874000 nid=0x4108 runnable [0x000000004364c000]
"New I/O client worker #11-1" prio=10 tid=0x00002aaab2d08800 nid=0x4106 runnable [0x000000004344a000]
"New I/O client worker #10-1" prio=10 tid=0x00002aaab2d71000 nid=0x4104 runnable [0x0000000043248000]
"New I/O client worker #9-1" prio=10 tid=0x00002aaab3f2d800 nid=0x4102 runnable [0x0000000043046000]
"New I/O client worker #8-1" prio=10 tid=0x00002aaab3963000 nid=0x4100 runnable [0x0000000042e44000]
"New I/O client worker #7-1" prio=10 tid=0x00002aaab84ee800 nid=0x40fe runnable [0x0000000042c42000]
"New I/O client worker #6-1" prio=10 tid=0x00002aaab312f800 nid=0x40fc runnable [0x0000000042a40000]
"New I/O client worker #5-1" prio=10 tid=0x00002aaab8c08800 nid=0x40fa runnable [0x000000004283e000]
"New I/O client worker #4-1" prio=10 tid=0x00002aaab2902000 nid=0x40f8 runnable [0x000000004263c000]
"New I/O client worker #3-1" prio=10 tid=0x00002aaab82bd000 nid=0x40f6 runnable [0x000000004243a000]
"New I/O client worker #2-1" prio=10 tid=0x00002aaab30de800 nid=0x40f4 runnable [0x0000000041ac0000]
"New I/O client worker #1-1" prio=10 tid=0x00002aaab2d28800 nid=0x40f2 runnable [0x00000000418be000]
   java.lang.Thread.State: RUNNABLE
    at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
    at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:210)
    at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)
    at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
    - locked <0x00000000c0652130> (a sun.nio.ch.Util$2)
    - locked <0x00000000c0652120> (a java.util.Collections$UnmodifiableSet)
    - locked <0x00000000c053ebc0> (a sun.nio.ch.EPollSelectorImpl)
    at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
    at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:38)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:165)
    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:44)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)

"pool-2-thread-1" prio=10 tid=0x00002aaab355d000 nid=0x40f0 waiting on condition [0x00000000416bc000]
   java.lang.Thread.State: TIMED_WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000000c03bf0d8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:196)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
    at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)
    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:609)
    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:602)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
    at java.lang.Thread.run(Thread.java:662)

"pool-1-thread-1" prio=10 tid=0x00002aaab82ff800 nid=0x40ef waiting on condition [0x00000000415bb000]
   java.lang.Thread.State: TIMED_WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000000c034b600> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:196)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
    at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)
    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:609)
    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:602)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
    at java.lang.Thread.run(Thread.java:662)

"GC Daemon" daemon prio=10 tid=0x000000004118a000 nid=0x40eb in Object.wait() [0x0000000042238000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0018be8> (a sun.misc.GC$LatencyLock)
    at sun.misc.GC$Daemon.run(GC.java:100)
    - locked <0x00000000c0018be8> (a sun.misc.GC$LatencyLock)

"RMI TCP Accept-0" daemon prio=10 tid=0x00002aaab405e800 nid=0x40e9 runnable [0x00000000413b9000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    - locked <0x00000000c000a428> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at java.net.ServerSocket.accept(ServerSocket.java:430)
    at sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept(LocalRMIServerSocketFactory.java:34)
    at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)
    at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)
    at java.lang.Thread.run(Thread.java:662)

"RMI TCP Accept-9999" daemon prio=10 tid=0x00002aaab405b000 nid=0x40e8 runnable [0x00000000412b8000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    - locked <0x00000000c0018c80> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at java.net.ServerSocket.accept(ServerSocket.java:430)
    at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)
    at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)
    at java.lang.Thread.run(Thread.java:662)

"RMI TCP Accept-0" daemon prio=10 tid=0x00002aaab4001800 nid=0x40e7 runnable [0x0000000040dab000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    - locked <0x00000000c0027960> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at java.net.ServerSocket.accept(ServerSocket.java:430)
    at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)
    at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)
    at java.lang.Thread.run(Thread.java:662)

"Low Memory Detector" daemon prio=10 tid=0x0000000041016800 nid=0x40e4 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x0000000041014800 nid=0x40e3 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x000000004100e800 nid=0x40e2 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x000000004100c800 nid=0x40e1 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0x0000000040feb000 nid=0x40e0 in Object.wait() [0x0000000040b8e000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0027bf8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
    - locked <0x00000000c0027bf8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x0000000040fe9000 nid=0x40df in Object.wait() [0x0000000040a8d000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000c0018bd8> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
    - locked <0x00000000c0018bd8> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0x0000000040f84800 nid=0x40d9 runnable [0x000000004098c000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    - locked <0x00000000c01d29c0> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at java.net.ServerSocket.accept(ServerSocket.java:430)
    at org.apache.catalina.core.StandardServer.await(StandardServer.java:431)
    at org.apache.catalina.startup.Catalina.await(Catalina.java:676)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:628)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

"VM Thread" prio=10 tid=0x0000000040fe2000 nid=0x40de runnable 

"GC task thread#0 (ParallelGC)" prio=10 tid=0x0000000040f97800 nid=0x40da runnable 

"GC task thread#1 (ParallelGC)" prio=10 tid=0x0000000040f99000 nid=0x40db runnable 

"GC task thread#2 (ParallelGC)" prio=10 tid=0x0000000040f9b000 nid=0x40dc runnable 

"GC task thread#3 (ParallelGC)" prio=10 tid=0x0000000040f9d000 nid=0x40dd runnable 

"VM Periodic Task Thread" prio=10 tid=0x00002aaab4061000 nid=0x40ea waiting on condition 

JNI global references: 1865 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:07:15.120

感谢 Trustin 的回复。这不是网络错误，也不是构建我们的服务。Jstack 线程转储也不正确。很抱歉。

一旦从服务器端接收到消息，客户端就会将结果发送到第 3 方系统（HTTP）。由于默认超时设置，消息传递服务挂起。

# android - 当 pin 触摸然后如何在 android 中打开地图气球（注释）以获取更多信息

> ID：14372044
> 
> 赞同：0
> 
> 时间：2013-01-17T04:04:15.313
> 
> 标签：android, map, android-mapview

我制作了小型静态地图应用程序，在其中我使用三个针（标记）并设置静态经度和纬度。实际上，我想在地图视图中显示位置信息显示的气球注释。当我触摸标记（引脚）时，气球注释打开并显示当前位置的信息。我的代码如下：

```
 **Source Code: MainActivity.java
    ----------------------------------**
    package com.example.mapapp;

    import java.util.List;
    import com.google.android.maps.*;

    import com.google.android.maps.GeoPoint;
    import com.google.android.maps.MapActivity;
    import com.google.android.maps.MapController;
    import com.google.android.maps.MapView;
    import com.google.android.maps.Overlay;
    import com.google.android.maps.OverlayItem;

    import android.os.Bundle;
    import android.app.Activity;
    import android.content.Intent;
    import android.graphics.drawable.Drawable;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;

    public class MainActivity extends MapActivity {
     MapController mpc;
     //Button hotels,theaters,bank;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
         /*   hotels = (Button)findViewById(R.id.btnhotels);
            hotels.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent i = new Intent(MainActivity.this,Hotels.class);
                    startActivity(i);
                }
            });

            theaters = (Button)findViewById(R.id.btntheaters);
            theaters.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent i1 = new Intent(MainActivity.this,Theaters.class);
                    startActivity(i1);
                }
            });

            bank = (Button)findViewById(R.id.btnbank);
            bank.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent i2 = new Intent(MainActivity.this,Bank.class);
                    startActivity(i2);
                }
            });*/
            MapView mp = (MapView)findViewById(R.id.mapview);
            mp.setBuiltInZoomControls(true);
            mp.setSatellite(true);
            mp.setTraffic(true);
            mp.setStreetView(true);
            mpc = mp.getController();

            //for RL WebSolutions
            double rl_lat = Double.parseDouble("23.0355018");
            double rl_lon = Double.parseDouble("72.5630625");
            GeoPoint point = new GeoPoint((int)(rl_lat*1E6), (int)(rl_lon*1E6));
            mpc.animateTo(point);
            mpc.setZoom(15);
            mp.invalidate();

            List<Overlay> mapoverlays = mp.getOverlays();
            Drawable drawable = this.getResources().getDrawable(R.drawable.redpin);
            AddItemizedOverlay itemizedOverlay = new AddItemizedOverlay(drawable,this);
            OverlayItem overlayitem = new OverlayItem(point, "Rl Websolution", "Here is RL Websolutions");
            itemizedOverlay.addOverlay(overlayitem);
            mapoverlays.add(itemizedOverlay);

            //for State Bank of India
            double stb_lat = Double.parseDouble("23.066519");
            double stb_lon = Double.parseDouble("72.56956000000002");
            GeoPoint point1 = new GeoPoint((int)(stb_lat*1E6), (int)(stb_lon*1E6));
            mpc.animateTo(point1);
            mpc.setZoom(15);
            mp.invalidate();

            List<Overlay> mpoverlays = mp.getOverlays();
            Drawable d = this.getResources().getDrawable(R.drawable.poin1);
            AddItemizedOverlay itemizeOverlay = new AddItemizedOverlay(d,this);
            OverlayItem over = new OverlayItem(point1, "State Bank Of India", "Here is State Bank");
            itemizeOverlay.addOverlay(over);
            mpoverlays.add(itemizeOverlay);

            //for Navrangpura Bus Stop
            double bus_lat = Double.parseDouble("23.035626");
            double bus_lon = Double.parseDouble("72.5641536");
            GeoPoint point2 = new GeoPoint((int)(bus_lat*1E6), (int)(bus_lon*1E6));
            mpc.animateTo(point2);
            mpc.setZoom(15);
            mp.invalidate();

            List<Overlay> mboverlays = mp.getOverlays();
            Drawable d1 = this.getResources().getDrawable(R.drawable.bus);
            AddItemizedOverlay itemizOverlay = new AddItemizedOverlay(d1,this);
            OverlayItem over1 = new OverlayItem(point2, "Navrangpura Bus Stop", "Here is Bus Stop");
            itemizOverlay.addOverlay(over1);
            mboverlays.add(itemizOverlay);

        }
        protected boolean isRouteDisplayed() {
            return true;
        }

    }

    ****Here AddItemizedOverlay.java**
    -----------------------------------**
   package com.example.mapapp;

import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.util.Log;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {
    private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();
    private Context context;
    public AddItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
        // TODO Auto-generated constructor stub
    }
     public AddItemizedOverlay(Drawable defaultMarker, Context context) {
         this(defaultMarker);
         this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        // TODO Auto-generated method stub
        return mapOverlays.get(i);
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return mapOverlays.size();
    }
      @Override
      protected boolean onTap(int index) {
          OverlayItem item = mapOverlays.get(index);
          AlertDialog.Builder dialog = new AlertDialog.Builder(context);
          dialog.setTitle(item.getTitle());
          dialog.setMessage(item.getSnippet());
          dialog.show();
          return true;
      }
      public void addOverlay(OverlayItem overlay) {
          mapOverlays.add(overlay);
           this.populate();
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:46:32.100

我认为这是您正在寻找的完美示例： [http ://wptrafficanalyzer.in/blog/adding-marker-on-touched-location-of-google-maps-using-android-api-v2-with-supportmapfragment/](http://wptrafficanalyzer.in/blog/adding-marker-on-touched-location-of-google-maps-using-android-api-v2-with-supportmapfragment/)

# ios - 在 LLDB 中区分 iOS 模拟器和设备

> ID：14372056
> 
> 赞同：3
> 
> 时间：2013-01-17T04:05:19.493
> 
> 标签：ios, xcode, breakpoints, lldb

在 Xcode 中，您可以使用评估抛出异常的描述的条件设置断点，以确定是否在该断点处停止。这在使用 Core Data 时特别有用，因为 Core Data 在内部作为控制流机制抛出异常，并且您希望停止异常，而不是 Core Data。（注意：如果您想知道如何按所述过滤异常，请在 SO 问题[Ignore certain exceptions when using Xcode's All Exceptions breakpoint 中](https://stackoverflow.com/questions/14370632/ignore-certain-exceptions-when-using-xcodes-all-exceptions-breakpoint)回答）。

但是，这些过滤器通常依赖于寄存器的内容，因为异常的地址存储在那里。在模拟器中（在 Intel 架构上运行），寄存器是`$eax`，但在设备（ARM 架构）上是`$r0`.

是否可以制作一个区分两种架构的表达式，以便一个表达式使用正确的寄存器，而不管当前使用的架构如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:39:46.313

lldb 为在寄存器中传递值的架构提供了方便的寄存器名称——`arg0`例如，对于第一个参数。但是，标准 i386 ABI 不会在寄存器中传递参数，它们是在堆栈上传递的（鉴于可用的通用寄存器数量很少，这并不奇怪）。

`eax`（i386 ABI 中的 volatile/non-callee-saved reg）在进入时具有相关值的事实`objc_exception_throw`表明 Objective-C 运行时 ( `libobjc`) 在其内部例程之间进行了一些非标准函数调用，可能是效率。您不能使用像这样的非标准 ABI 从另一个模块调用例程。

如果您谈论的是两个在寄存器中传递参数的 ABI，例如 x86_64 和 arm，那么您可以使用 lldb 的`arg0`便捷变量。

如果您在命令行上使用 lldb，您可以编写一个 python 函数，根据体系结构获取`r0`或，并获取异常名称来决定断点是否应该继续。`eax`但我不认为 Xcode（今天）为您提供了一种将 python 命令置于断点上并控制进程是否恢复的方法。

# ant - 在 Jruby Rake 的 Ant 集成中，处理 ant 的 xml 命名空间支持的策略

> ID：14372058
> 
> 赞同：5
> 
> 时间：2013-01-17T04:05:25.463
> 
> 标签：ant, rake, jruby

我正在尝试从 rake 使用 JavaFX 的 ant 任务，但不知道如何处理 xml-namespacing：[http ://ant.apache.org/manual/Types/namespace.html](http://ant.apache.org/manual/Types/namespace.html)

做类似工作的 build.xml 文件看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="HelloWorldApp" default="default" basedir="."
         xmlns:fx="javafx:com.sun.javafx.tools.ant">
    <path id="fxant">
      <filelist>
        <file name="${java.home}\..\lib\ant-javafx.jar"/>
        <file name="${java.home}\lib\jfxrt.jar"/>
      </filelist>
    </path>
    <target name="default">
        <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"
                uri="javafx:com.sun.javafx.tools.ant"
                classpath="${java.home}\..\lib\ant-javafx.jar"/>
    </target>
<target name="package-bundle">
      <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"
                uri="javafx:com.sun.javafx.tools.ant"
                classpath="${java.home}\..\lib\ant-javafx.jar"/>
      <fx:deploy nativeBundles="all"
                   width="100" height="100"
                   outdir="build/" outfile="HelloWorldApp">
            <info title="Hello World App" vendor="Me"
                     description="Test built from Java executable jar"/>
            <fx:application mainClass="org.jruby.JarBootstrapMain"/>
            <fx:resources>
               <fx:fileset dir="dist">
                  <include name="HelloWorldApp.jar"/>
               </fx:fileset>
            </fx:resources>
      </fx:deploy>
</target>
</project> 
```

问题出现在诸如“fx:deploy”之类的任务中，当我开始将其转换为 Rakefile 时，我无法走得太远，因为我不知道如何告诉 ant 那个“fx”命名空间。我已经搜索了几天，但我发现的只是 headius 的一篇博客文章，上面写着“自我注意：弄清楚我们是否有类似的东西”（[http://headius.blogspot.com /2010/04/using-ivy-with-jruby-15s-ant.html](http://headius.blogspot.com/2010/04/using-ivy-with-jruby-15s-ant.html) )。在他的例子中，他似乎可以忽略它，但在这种情况下这不起作用。

JavaFX 打包任务提供了一些非常酷的东西，尤其是从 Java 8 开始，包括从任何可执行 jar 为每个平台创建本机安装程序的能力。我认为这可能非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:42:44.583

好的，所以我们缺少一些魔法，但一切都没有丢失，我有一个解决方法。要调用 XML 命名空间任务，您需要发送到完全限定的 xml uri。这有点难看，但没有它本来可以做的那么难看，因为只有顶级父级需要执行此 hack，并且子限定元素相对于它们的父级，因此它们也不需要发送。[我在这里](https://jira.codehaus.org/browse/JRUBY-7072)添加了一个增强问题：

```
require 'ant'

task :default do
  ant.echo message: "${java.home}"
  ant.taskdef(resource: "com/sun/javafx/tools/ant/antlib.xml",
              uri: "javafx:com.sun.javafx.tools.ant",
              classpath: "${java.home}/../lib/ant-javafx.jar")
end

task :package_bundle do
  ant do
    taskdef(resource: "com/sun/javafx/tools/ant/antlib.xml",
            uri: "javafx:com.sun.javafx.tools.ant",
            classpath: "${java.home}/../lib/ant-javafx.jar")
    __send__("javafx:com.sun.javafx.tools.ant:deploy", nativeBundles: "all", 
             width: "100", height: "100", outdir: "build/",
             outfile: "HelloWorldApp") do
      info(title: "Hello World App", vendor: "Me",
           description: "Test built from Java executable jar")
      application(mainClass: "org.jruby.JarBootstrapMain")
      resources do
        fileset(dir: "dist") do
          include name: "HelloWorldApp.jar"
        end
      end
    end
  end
end 
```

# django - Django Haystack - 未设置拼写建议上下文变量

> ID：14372062
> 
> 赞同：3
> 
> 时间：2013-01-17T04:06:08.227
> 
> 标签：django, django-haystack

我在 Haystack 中使用 Solr 正确配置了拼写建议的所有内容，但是，在使用 时`SearchView`，`suggestion`没有设置上下文变量。我意识到这是由于[https://github.com/toastdriven/django-haystack/commit/8bf366b6781b22810696b18723da5902ce01e5b7](https://github.com/toastdriven/django-haystack/commit/8bf366b6781b22810696b18723da5902ce01e5b7)：

```
if self.results and hasattr(self.results, 'query') and self.results.query.backend.include_spelling:
    context['suggestion'] = self.form.get_suggestion() 
```

这里似乎只有在有结果时才设置变量，这显然看起来不对。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:21:31.010

您可以覆盖 SearchView 的 create_response （回滚您提到的补丁）：

```
class MySearchView(SearchView):
    def create_response(self):
        (paginator, page) = self.build_page()

        context = {
            'query': self.query,
            'form': self.form,
            'page': page,
            'paginator': paginator,
            'suggestion': None,
        }

        if self.results.query.backend.include_spelling:
            context['suggestion'] = self.form.get_suggestion()

        context.update(self.extra_context())
        return render_to_response(self.template, context, context_instance=self.context_class(self.request)) 
```

# design-patterns - 富域模型和 ORM

> ID：14372065
> 
> 赞同：26
> 
> 时间：2013-01-17T04:06:40.093
> 
> 标签：design-patterns, architecture, domain-driven-design, anti-patterns

Martin Fowler 认为贫血域模型是一种反模式。

由于[Object Relational Impedence Missmatch](http://en.wikipedia.org/wiki/Object-Relational_impedance_mismatch) ，将持久性模型作为域模型滚动似乎也严重偏离了。为了持久性和规范化，我们倾向于将类分解为非常小的部分，在这些类之上使用方法是愚蠢的。加上持久性很少改变，但业务逻辑改变了一点。

所以我们需要一个建立在持久性模型上的 DomainModel（而不是一模一样）。然后，此领域模型将包含业务逻辑属性和方法。

但是现在这些领域模型仍然在服务背后，为了将它们暴露给外部世界，我们需要将它们转换为 DTO。

我们在这里做了很多映射。

1.  领域模型的持久性
2.  将域模型转换为 DTO 以在服务之间传递

它并没有就此结束，因为可能需要将 DTO 映射到 ViewModel 中。

所有这些以及重复验证逻辑的问题仍然没有消失，因为客户端需要实时验证。ViewModel 对验证一无所知，因此例如在 SPA 中，您不得不在客户端（通常在 javascript 中）再次重写验证逻辑。

此外，服务本质上是无状态的（面向消息或 RPC），所以我们正在做所有这些映射，在 Persistence 之间，到 OO，然后再回到 Procedural，有什么好处？在大多数 IT 预算中，您如何证明成本的实际价值？

我知道拥有完整的 DDD、聚合根、域模型等是多么“酷”，但你如何证明成本和对开发生产力的影响是合理的？

> 反模式（或反模式）是一种在社会或商业运营或软件工程中使用的模式，可能常用但在实践中无效和/或适得其反

如果是这样，那么 DDD 和富域模型是否比“精益”域模型更适合上面的反模式定义。对不起，我鄙视加载的词，“贫血”。

通过保持领域模型“精益”，您实际上允许共享它，而不会违反“抽象依赖原则”、“不要重复自己”以及将一个数据载体映射到另一个数据载体的耗时、乏味且容易出错的过程，以及任何相关的单元测试（除非您正在考虑进行不带单元测试的映射并希望获得最好的结果）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T08:38:47.110

tl;dr 域模型定义不明确，它可能在设计时考虑了以数据库为中心的方法。

DDD 的主要目的是在代码中对业务概念和流程进行建模。我真的怀疑您的业务概念和流程只是一堆属性。但如果它们真的是，那么领域模型可以与持久性模型相同，因此您不必进行任何映射。

持久性模型对**对象状态的存储**方式进行建模。如果您不在数据库领域，那么领域和持久性模型就不能有相同的目的。我在 DDD 中看到的最大错误之一是认为域模型仍然是数据驱动的。在 DDD 中，您没有具体的数据库。你有存储库。没有一对多、多对多等关系。没有表格，也没有行。只有对象试图尽可能准确地表示域。

简而言之，Domain 关心对业务行为建模，而 Persistence 关心存储对象状态。我在这里看到了两种不同的责任。

关于验证，您有两种类型：输入数据**格式**的验证，然后根据您在对象状态中更改的内容验证其他业务规则。

关于重复，我认为您指的是输入格式，但就像@EbenRoux 所说的那样，有一些机制可以帮助解决这个问题。在 asp.net mvc 中，大多数验证规则也包含 js 版本。

让我告诉你一个关于服务的小秘密。虽然它们的接口可以在域中定义，但它们的实现可以位于持久层中，从而允许它们直接使用存储。而且由于应用程序的其余部分以抽象形式（接口）使用服务，因此只有 DI 容器会知道肮脏的秘密。

DDD 不是要酷，而是要根据领域设计应用程序。我敢打赌，很少有人会开发一个应用程序，其唯一目的是成为数据库的 UI。大多数人旨在通过他们的软件提供服务，构建解决问题的虚拟产品。设计应用程序是为了解决您想要解决的问题，而不是您碰巧使用的技术工具，这是有道理的。

这听起来如何，你想要一栋砖房，但构造函数说：“对不起，我的锯子只适用于木头”。好吧，不要使用锯子，使用其他可以帮助切割砖块的工具。这些工具需要针对问题进行调整，反之亦然。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T16:42:02.340

您似乎混淆了很多概念，将富域模型方法归咎于它不直接负责的事情。

*   富域模型与分层架构正交，特别是拥有富域模型并不决定您拥有的层数、这些层之间应该交换哪些数据结构以及它们应该如何映射。

*   富域模型与验证是正交的，除了后端验证之外，没有说明需要客户端检查。

换句话说，使您的域模型与服务中的所有业务逻辑无关，不一定会让您免于编写大量样板 DTO 映射代码，也不会消除对客户端“双重检查”的需要（这是由方式普遍接受的最佳实践）。

这并不意味着您关于成熟的多层架构的成本和重量的观点是无效的。您可能会对 Mark Seemann 讨论类似问题的帖子感兴趣：http: [//blog.ploeh.dk/2012/02/09/IsLayeringWorthTheMapping.aspx](http://blog.ploeh.dk/2012/02/09/IsLayeringWorthTheMapping.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-17T04:58:32.760

首先，我不认为您可以真正轻松地摆脱在客户端*和*服务器上重复验证逻辑。但是，这不仅限于 DDD。有一些机制可以缓解疼痛，但总是需要一些努力。

另一部分是整个地图业务:)

您正在做的是有效地用于执行读取。您可能认为您需要阅读您的实体才能对其进行编辑。如果您在实体对象上执行基于实体（此处可能更多地用数据库术语表示实体 - 整个记录）的操作，而不是基于任务的操作，这是正确的。一个愚蠢的例子可能是客户打电话到呼叫中心**更改地址**。接线员调用**客户记录**并编辑地址。这是基于实体的，并且会导致典型的并发问题，因为可能会在同一记录上执行 2 个操作（但不太可能）。这是一种非常传统的 UX 设计方法：“编辑记录”。

将此与屏幕上的一个按钮进行对比，该按钮显示：“**更改地址**”。您只需更改记录上的地址，虽然这看起来是一回事，但实际上却大不相同。两次更改相同地址的操作的机会比更改相同记录的机会要小得多。如果需要，可以在这部分进行并发检查。

现在，如果一个人不阅读该领域会读什么。数据从何而来。这就是 CQRS（命令/查询职责分离）的用武之地。过去它与事件溯源混淆/结合，但这不是必需的。您可以为您的应用程序创建一个简单的查询端，专注于返回您需要的数据。在 C# 中，我使用 a `DataRow`if 它是单个实例，a`DataTable`用于多个实例，以及自定义 DTO 用于更复杂的任何事情。可能有一种方法甚至可以摆脱匿名类型（尚未对此进行调查）。

所以：

领域模型 = 操作 / 计算 / 写入 查询服务 = 读取

在某些情况下，您可以简单地加载实体/聚合，例如在 Web 应用程序中，因为它知道（或可能知道）您的域模型，但智能客户端会有点反模式。

理由相当棘手，但归结为维护。如果您的方法没有减轻您的维护负担，那么很可能某些东西没有正确应用并且需要一些重构。

DDD 不仅仅是关于技术实现，尽管它还有很长的路要走，朝着正确的 OO 建模方向发展。我猜其他想法无论如何都会输入到软件中，所以无论如何软件似乎都是焦点。我们都想看看橡胶与道路的交汇点。

像大多数事情一样，DDD 可能会做错:)

# ruby-on-rails-3 - 如何检查我的 Rails 应用程序可以访问哪些属性？

> ID：14372066
> 
> 赞同：0
> 
> 时间：2013-01-17T04:06:47.643
> 
> 标签：ruby-on-rails-3

我正在做一些元编程，在其中向模型添加可访问属性，并且想知道如何检查并查看这些属性是否可访问。

查看文档，但找不到参考。

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)

我知道我可以做类似的事情`object.instance_methods`，但那十几个并没有真正将其过滤到可访问的范围内。

是否有一些方法可以返回可访问的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T00:55:55.967

使用`accessible_attributes`和`protected_attributes`。

```
class User < ActiveRecord::Base
  attr_accessible :first_name, :last_name
end

User.accessible_attributes
# => #<ActiveModel::MassAssignmentSecurity::WhiteList: {"", "first_name", "last_name"}>

User.protected_attributes
# => #<ActiveModel::MassAssignmentSecurity::BlackList: {"id", "type"}> 
```

如果您打电话`attr_protected`而不是`attr_accessible`在您的班级，那么您的所有属性（黑名单中的属性除外）都可以访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:08:18.123

假设您有一个`User`具有以下属性的模型：`:id, :lastname, :firstname, :email` 并且您的模型类是：

```
class User < ActiveRecord::Base
  attr_accessible :lastname, :firstname
end 
```

您可以拥有这样的可访问列表：

```
User.attr_accessible[:default].to_a
=> [:lastname, :firstname] 
```

此外，您可以拥有不可访问属性的列表：

```
User.new.attributes.keys - User.attr_accessible[:default].to_
=> [:id, :email] 
```

我希望这有帮助

# ajax - 调用 servlet 时的 Ajax 状态 0

> ID：14372068
> 
> 赞同：2
> 
> 时间：2013-01-17T04:06:53.920
> 
> 标签：ajax, servlets, tomcat7

嗨，我正在尝试使用 Ajax 从 servlet 返回一个简单的字符串，但没有返回任何内容，因为状态始终为 0，而 readystate 为 4。

这是.js代码

```
function validate(choice) {  
    //var url = "http://localhost:8080/examples/validate.do?id=" + escape(choice);                  
    var url = "../../validate.do" 
    if(window.XMLHttpRequest) {  
        req = new XMLHttpRequest();  
    }else if(window.ActiveXObject) { 
        req = new ActiveXObject("MSXML2.XMLHTTP.3.0"); 
    }  

    alert("IM IN VALIDATE() with " + choice); 
    req.open("GET", url, true);  
    req.onreadystatechange = callback;  
    req.send(null);   
    return false;

}  

function callback() { 
    if(req.readyState == 4 ) { 
        if(req.status == 200){ 
            var check = req.responseText;  
            alert(check);  
        }
        else
            alert(req.status);
    }  
} 
```

和Java代码

```
package model;  

import java.io.IOException;  
import java.io.PrintWriter;  
import javax.servlet.ServletException;  
import javax.servlet.http.HttpServlet;  
import javax.servlet.http.HttpServletRequest;  
import javax.servlet.http.HttpServletResponse;

public class DoAjaxServlet extends HttpServlet {  

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)  
    throws ServletException, IOException {  
        response.setContentType("text/html;charset=UTF-8"); 
         PrintWriter out = response.getWriter();  
        try {  

            response.setContentType("text/html"); 
            response.setHeader("Access-Control-Allow-Origin", "*"); 
            response.setHeader("Cache-Control", "no-store");  
            response.setHeader("Pragma", "no-cache");  
            response.setDateHeader("Expires", 0);
            String resultStr = "JUST RETURNING THIS STRING";
            out.write(resultStr);
        } finally {   
            out.close();  
        }  
    }   

    @Override  
    protected void doGet(HttpServletRequest request, HttpServletResponse response)  
    throws ServletException, IOException {  
        processRequest(request, response);  
    }   

    @Override  
    protected void doPost(HttpServletRequest request, HttpServletResponse response)  
    throws ServletException, IOException {  
        processRequest(request, response);  
    }  

    @Override  
    public String getServletInfo() {  
        return "Short description";  
    }  

} 
```

我正在使用 Chrome 在 Tomcat 7 上运行它，并从 localhost:8080 访问 html 文件，而不是在本地运行，所以很多解决方案都无法正常工作。

即将

```
http://localhost:8080/examples/validate.do 
```

在 Chrome 中，它可以很好地打印字符串，所以我认为我没有写错 url。.js 文件位于类似

```
http://localhost:8080/examples/jsp/HTE/my.js 
```

我还尝试在 .js 中直接使用“http://localhost:8080/examples/validate.do”作为 url 并将 setHeader("Access-Control-Allow-Origin", "*") 添加到 Java 文件但没有任何变化.

在帖子中搜索后，我正在对这个问题提出一些想法......你能告诉我这可能会出错吗？

# c# - NAT 后面的 UDP P2P 连接

> ID：14372070
> 
> 赞同：1
> 
> 时间：2013-01-17T04:06:59.107
> 
> 标签：c#, udp, nat, udpclient

我想在 NAT 后面的 2 个客户端之间建立 P2P 连接。我研究了使其工作的方法，我想尝试“UDP打孔方法”。

所以...

我用 PHP 制作了一个服务器，它可以按需向客户端发送连接详细信息（如远程 IP、远程端口）。

作为示例的源代码在这里： http: [//pastebin.com/FdiKMSFq](http://pastebin.com/FdiKMSFq)

接下来，我在 C# 中创建了一个客户端，它永久连接到服务器并询问他有关另一个客户端的信息。客户端收到另一个客户端的远程 IP 和远程端口（用于连接服务器）并尝试连接。

完整的源代码在这里： http: [//pastebin.com/VUJyZivW](http://pastebin.com/VUJyZivW)

第一步（连接并询问详细信息）是可以的，但是当客户端（A）连接到另一个客户端（B）并发送一些数据（A->B）时，客户端 B 没有收到任何数据。

我将两个 IPEndPoints 都设置为使用端口 2000。但无论如何它都不起作用。

例子：

*   A: 192.168.1.11:2000，服务器获取 32.14.15.16:56666
*   B: 192.168.1.5:2000，服务器获取 32.99.15.16:56699
*   A 尝试连接 32.99.15.16:56699 并发送一些数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:40:15.413

查看您的示例，B 的 NAT 将丢弃发往其公共端点（地址和端口对）的数据包。这是因为 B 的 NAT 将此视为主动请求。

为了让 B 的 NAT 让来自 A 的数据包通过，它必须认为 B 之前已经与 A 通信，从而考虑请求的请求。NAT 保留一个内部表来跟踪这一点。

建立连接的方法是让 B 也将数据包发送到 A 的公共端点 (32.14.15.16:56666)。这样做会在 B 的 NAT 上“打孔”。在您的示例中，A 已经通过向 B 发送流量来“打孔”。

请记住，这仅在至少一个 NAT 始终将私有源端点转换为公共源端点（无论目标地址如何）时才有效。这是因为否则，您的服务器看到的公共端点可能与 P2P 对等点的 NAT 看到的不同，即使对等点使用相同的私有端点也是如此。

# c# - 使用行索引和列索引c#获取单元格值

> ID：14372071
> 
> 赞同：1
> 
> 时间：2013-01-17T04:07:05.023
> 
> 标签：c#, winforms, datagridview

我试图通过在 DataGridview 中选择一个单元格/行然后单击删除按钮来通过他的 ID 删除用户。我试图通过使用行索引和列索引来获取 ID。但是，即使我的 datagridview 包含行，我也无法删除用户，因为 'string id' 的值为 NULL。

```
private void buttonDeleteUser_Click(object sender, EventArgs e)
{
   int rowindex = dataGridView1.CurrentCell.RowIndex;
   int columnindex = 0;
   string id = dataGridView1[rowindex, columnindex].Value.ToString();
   controller_employee.delete_employee(Int32.Parse(id));
} 
```

为什么它为 NULL，我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:16:17.130

```
ID = dataGridView.SelectedCells[0].RowIndex; 
```

此处 SelectedCells[0] 指定列号。

并尝试选择整行而不是单个单元格

# google-app-engine - 如果不是高级客户，如何获取有关 appengine 中断的更多信息？

> ID：14372076
> 
> 赞同：2
> 
> 时间：2013-01-17T04:07:59.727
> 
> 标签：google-app-engine, python-2.7

我们的应用程序出现中断，显示在下面的仪表板上。没有 appengine 中断通知，推特上也没有任何内容，所以看起来它对我们来说是本地的。我们的日志中没有任何明显的内容（没有增加的失败请求，只是沉默）。它持续了大约 40 分钟，并被我们的客户注意到（我们每秒收到大约 1.5 个请求）。我们是付费客户，但不是高级客户（每月额外支付 500 美元），因此无法通过电子邮件向谷歌发送此问题。获得更多信息/解决问题的最佳方式是什么？

![停电](../Images/e101f695437d2443746197f74e19480b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:32:57.810

订阅应用引擎邮件列表。当 !@#$ 击中粉丝时，通常会有一连串的活动。

[https://groups.google.com/forum/?fromgroups#!forum/google-appengine](https://groups.google.com/forum/?fromgroups#!forum/google-appengine)

停机通知列表上通常也会发布一条消息，但它通常会在一堆人抱怨后出现。另一方面，要整理的绒毛要少得多。

[https://groups.google.com/forum/?fromgroups#!forum/google-appengine-downtime-notify](https://groups.google.com/forum/?fromgroups#!forum/google-appengine-downtime-notify)

在解决方案方面，您提交生产问题（在第一个邮件列表中搜索“生产问题模板”），然后等待。

# bash - 在下载完成之前完成 SFTP 和 mget 的 Shell 脚本

> ID：14372078
> 
> 赞同：2
> 
> 时间：2013-01-17T04:08:24.663
> 
> 标签：bash, shell, ftp, sftp, expect

这是我的脚本：

```
#!/usr/bin/expect
spawn /usr/bin/sftp user@place
expect "password:"
send "mysecret\n"
expect "sftp>"
send "mget dir/*.csv\n";
expect "sftp>"
send "quit\n" 
```

它开始下载，但几秒钟后，它发送退出命令并在下载完成之前退出程序。

我成功让它停止的唯一方法是输入一个“交互”命令，但因为我想将它作为一个 cron 作业运行，我不想只产生最终坐着的进程。

有没有办法做到这一点？

编辑：

有人会问我为什么没有密钥设置……这是供应商允许我使用的唯一方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:34:07.360

添加 line set timeout -1 似乎已经解决了这个问题

整个脚本应如下所示：

```
#!/usr/bin/expect
set timeout -1
spawn /usr/bin/sftp user@place
expect "password:"
send "mysecret\n"
expect "sftp>"
send "mget dir/*.csv\n";
expect "sftp>"
send "quit\n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:35:50.143

好吧，如果你可以使用 Perl：

```
use Net::SFTP::Foreign;

my $sftp = Net::SFTP::Foreign->new('user@place', password => 'mysecret');
$sftp->mget("dir/*.csv", '.',
             on_error => sub {
               warn "unable to copy '$_[1]{filename}':".$sftp->error."\n";
             }); 
```

您必须安装[Net::SFTP::Foreign](https://metacpan.org/module/Net%3a%3aSFTP%3a%3aForeign)和[IO::Pty](https://metacpan.org/module/IO%3a%3aPty)（也可作为多个 linux 发行版中的软件包提供）。

# c++ - DirectX 标头在哪里？

> ID：14372082
> 
> 赞同：0
> 
> 时间：2013-01-17T04:09:29.627
> 
> 标签：c++, directx, codeblocks

我安装了 SDK，但似乎找不到标头。他们在哪？我正在使用代码块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:41:36.410

如果您导航到安装 SDK 的位置，所有头文件都将位于“包含”目录中。

![在此处输入图像描述](../Images/ff66313aacdd9d4cd546e94acb6886ef.png)

# ios - 单击注释并更改颜色

> ID：14372089
> 
> 赞同：1
> 
> 时间：2013-01-17T04:10:27.960
> 
> 标签：ios, annotations, mapkit

我想在用户单击它时更改注释颜色。我的代码就是这样

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
{MKPinAnnotationView *annotationView = [[MKPinAnnotationView alloc]initWithAnnotation:view.annotation reuseIdentifier:@"annon1"];
[annotationView setPinColor:MKPinAnnotationColorGreen];
[annotationView setCanShowCallout:YES];
[innerMap selectAnnotation:annotationView.annotation animated:YES];
} 
```

但不适合我。任何人都可以帮助我？？

# php - 表单操作属性可以调用外部 javascript 文件中的 javascript 函数吗？

> ID：14372090
> 
> 赞同：0
> 
> 时间：2013-01-17T04:10:31.517
> 
> 标签：php, javascript, html, ajax, forms

我有这样写的表单标签：

```
<form id="form" action="mail.php" method="post"><!--form here--></form> 
```

目前这会带来一些问题，因此我将表单操作切换为 AJAX 解决方案，但是，我希望 AJAX 函数位于外部 JavaScript 文件中。我知道您可以将表单操作属性链接到文件，但我将如何告诉表单查看文件中的特定功能？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:15:00.643

只需使用包含脚本文件`<script src="file.js" type="text/javascript" />`并在文件中调用函数在任何你想要的地方......你不需要告诉程序在哪里寻找函数..所有脚本代码都包含在文件中，使用`<script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:13:42.467

您可以使用：

```
onsubmit="SubmitFormViaAjax();return false;" 
```

这样表单就不会提交它（返回 false），您可以使用包含的表单中的任何函数通过 ajax 将表单的数据直接提交给收件人。

只需确保在页面中包含 ajax 函数文件。

# android - Android - 发生崩溃但堆栈跟踪没有说明它发生的位置

> ID：14372094
> 
> 赞同：1
> 
> 时间：2013-01-17T04:11:28.563
> 
> 标签：android

我在某处有一个空指针异常，但我不确定在哪里。我只有这个错误：

```
java.lang.NullPointerException
        at android.widget.ArrayAdapter.getCount(ArrayAdapter.java:330)
        at android.widget.AdapterView.checkFocus(AdapterView.java:700)
        at android.widget.AdapterView$AdapterDataSetObserver.onInvalidated(AdapterView.java:823)
        at android.widget.AbsListView$AdapterDataSetObserver.onInvalidated(AbsListView.java:5738)
        at android.database.DataSetObservable.notifyInvalidated(DataSetObservable.java:47)
        at android.widget.BaseAdapter.notifyDataSetInvalidated(BaseAdapter.java:59)
        at android.widget.ArrayAdapter$ArrayFilter.publishResults(ArrayAdapter.java:513)
        at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:282)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4697)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
        at dalvik.system.NativeStart.main(Native Method) 
```

有人对如何调试有任何想法吗？我无法重现它。它有时会发生并显示在我的崩溃日志中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:19:20.933

这是 ArrayAdapter 的代码：[https](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java) ://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java 。

假设这是正确的版本，如果适配器的数据集（即后备列表或数组）为空，则会导致第 330 行的 NPE。

希望有帮助。

# java - 如何在 JDT/ASTVisitor() 中存储值？

> ID：14372095
> 
> 赞同：0
> 
> 时间：2013-01-17T04:11:31.333
> 
> 标签：java, abstract-syntax-tree, eclipse-jdt

我有一个代码可以检测源中方法的调用开始位置和长度，如下所示。

我需要将这些数据存储在 ASTVisitor() 之外，但是使用 final int，我得到了一个错误。

如何在 ASTVisitor() 中存储值？

```
public void setPositionFinder(String methodName) throws JavaModelException
{
    //findMethod(methodName);
    IType type = this.javaProject.findType(this.className);
    ICompilationUnit unit = type.getCompilationUnit();
    ASTParser parser = ASTParser.newParser(AST.JLS3);
    parser.setSource(unit);
    parser.setResolveBindings(true);
    CompilationUnit cunit = (CompilationUnit) parser.createAST(null);
    //ASTNode root = parser.createAST(null);

    final String name = this.newMethodName;
    final int startPosition = -1;
    final int length = -1;

    cunit.accept(new ASTVisitor() {
        public boolean visit(MethodInvocation methodInvocation)
        {
            String methodName = methodInvocation.getName().toString();
            System.out.println(methodName);
            if (methodName.equals(name))
            {
                // ERROR!
                startPosition = methodInvocation.getStartPosition();
                length = methodInvocation.getLength();
                System.out.printf("startPosition %d - Length %d", startPosition, length);       
            }
            return false;
        }
    });
} 
```

![在此处输入图像描述](../Images/6e8eb7a412bd3d5a403a3ff186a6f3b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:59:46.550

将*starPosition*和*length*变量声明为类的静态成员变量。然后，您可以从 ASTVisitor 内部类内部访问。将方法更改`setPositionFinder`为静态也可能是首选，以便可以以静态方式调用它。

# javascript - 如何区分用手指滚动和通过点击状态栏滚动？

> ID：14372100
> 
> 赞同：1
> 
> 时间：2013-01-17T04:12:55.573
> 
> 标签：javascript, ios, prototypejs, mobile-safari

我正在为 iOS 制作网页。当用户通过点击状态栏（快捷方式）滚动到页面顶部时，我想执行一个操作。当页面通过手指滑动滚动到顶部时，我不想执行此操作。

到目前为止，我有这段代码，在这两种情况下都会被错误地触发：

```
Event.observe(
    window,
    "scroll",
    function(event) {
        if (window.scrollY <= 0) {
            alert("You are at the top of the page, but I don't know how you got here");
        }
    }
); 
```

![在此处输入图像描述](../Images/cf8acdaa54af7c126012114fa6a838e0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:21:18.177

由于此代码是在点击事件之后触发的，因此您可以在该点击事件上设置一个标志，您可以稍后在此滚动事件捕获中检查该标志

```
Event.observe(
    window,
    "scroll",
    function(event) {
        if ( !flag )
        {
           if (window.scrollY <= 0) {
            alert("You are at the top of the page, but I don't know how you got here");
           }
        }
        flag = false;
    }
); 
```

当您点击该状态栏时会设置此标志

# ios - iOS：POST，其中 JSON 只是众多参数之一

> ID：14372102
> 
> 赞同：1
> 
> 时间：2013-01-17T04:13:02.527
> 
> 标签：ios, json, cocoa, post

通过将 JSON 的数据表示作为 HTTP 主体，我已成功地将 JSON 用作我的应用程序中的 POST Web 服务的参数：

```
 //Prep
    NSData *requestData = [NSJSONSerialization dataWithJSONObject:<my JSON> options:0 error:nil];
    NSString *apiString = <the webservice>;

    //POST
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:apiString]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:requestData];

    //Go
    NSURLResponse *response = nil;
    queryResultData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
```

效果很好。

问题是，这适用于期望单个 JSON 参数作为 http 正文的 web 服务。

**如何将 JSON 作为众多参数之一包含在内**，您可以使用 @"arg1=val1&arg2=val2" 的数据编码方式。

例如：图像你有一个期望像这样的网络服务

```
 http://mysite.com/api/v1/route/test?data={json:%22true%22}&other=abcdefg 
```

必须作为 POST 提交。

有趣的是，这有一个 JSON 字典作为许多参数中的一个，而不是在正文中。我不知道如何将这些论点添加到帖子中。

## 编辑

这是 php 中的相同概念。你如何在 Cocoa 中做到这一点？

```
$data = array('x' => 1, 'name => 'fred');

$json = json_encode($data);

curl_setopt($curl_handle, CURLOPT_POSTFIELDS, array('json_data' => $json));
 -- or --
curl_setopt($curl_handle, CURLOPT_POSTFIELDS, 'something=whatever&json_data='.$json); 
```

# list - 如何创建包含容器具有属性的列表的 POJO？

> ID：14372107
> 
> 赞同：3
> 
> 时间：2013-01-17T04:13:31.890
> 
> 标签：list, attributes, jaxb, pojo

如何创建包含容器具有属性的列表的 POJO？

通常在创建列表的 POJO 时，您可以通过以下方式进行操作：

表示以下 XML 结构：

```
<folder>
    <messages>
        <message>
            <subject>XXXX</subject>
            ...
        </message>
        <message>
            <subject>XXXX</subject>
            ...
        </message>
    </messages>
</folder> 
```

```
@XmlRootElement(name = "folder")
public class Folder {
    @XmlElement
    private List<Message> messages;
    ...
} 
```

```
@XmlRootElement(name = "message")
public class Message {
    @XmlElement
    private String subject;
    ...
} 
```

但是，当消息标签上有属性时，如何表示 POJO？IE

```
<folder>
    <messages total="45" start="3">
        <message>
            <subject>XXXX</subject>
            ...
        </message>
        <message>
            <subject>XXXX</subject>
            ...
        </message>
    </messages>
</folder> 
```

您是否专门为消息创建 POJO，然后将带有注释`@XmlValue`或类似内容的消息列表映射？

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:10:26.467

以下方法可用于任何 JAXB (JSR-222) 实现。

**留言**

仅使用标准 JAXB (JSR-222) API，您将需要向`Messages`模型中引入一个类。

```
import java.util.List;
import javax.xml.bind.annotation.*;

public class Messages {

    @XmlElement(name="message")
    private List<Message> messages;

    @XmlAttribute
    private int start;

    @XmlAttribute
    public int getTotal() {
        if(null == messages) {
            return 0;
        } else {
            return messages.size();
        }
    }

} 
```

**文件夹**

然后，您将需要修改您的`Folder`类以引用新`Messages`类。

```
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Folder {

    private Messages messages;
} 
```

**信息**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Message {

    private String subject;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:04:41.727

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员

如果您使用 MOXy 作为您的 JAXB 提供程序，那么您可以利用该`@XmlPath`扩展并执行以下操作。

**文件夹**

```
import java.util.List;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Folder {

    @XmlElementWrapper
    @XmlElement(name="message")
    private List<Message> messages;

    @XmlPath("messages/@start")
    private int start;

    @XmlPath("messages/@total")
    public int getTotal() {
        if(null == messages) {
            return 0;
        } else {
            return messages.size();
        }
    }
} 
```

**信息**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Message {

    private String subject;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Folder.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14372107/input.xml");
        Folder folder = (Folder) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(folder, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<folder>
   <messages start="1" total="2">
      <message>
         <subject>XXXX</subject>
      </message>
      <message>
         <subject>YYYY</subject>
      </message>
   </messages>
</folder> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)
*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)
*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# android - 线程游戏“事件循环”中的演员/消息传递

> ID：14372108
> 
> 赞同：2
> 
> 时间：2013-01-17T04:13:35.123
> 
> 标签：android, multithreading, scala, actor, game-loop

我正在构建一个 Android 应用程序（使用 Scala 2.9）并且正在使用渲染到 SurfaceView 的线程；这是一款游戏，所以它应该尽可能频繁地更新。我想这个问题类似于其他游戏“事件循环”，其中*输入来自不同的线程*。

这是当前依赖于同步的方法的粗略近似。它“工作得很好”，但我普遍担心必须使用显式同步和“捆绑”视图/输入线程。

查看“UI线程”：

```
def View.onTouchEvent(e) { // on UI thread
  Game.handleInput(e)
} 
```

游戏，“游戏线程”：

```
def Game.handleInput(e) = S synchronized { // on UI thread
  alterStateBasedOnInput
}
def Game.run () { // on Game thread 
  while (running) {
    S synchronized { 
      doGameStuff
    }
    View.post(someStateRelayedViaRunnable)
    yield
  }
} 
```

而不是显式使用同步，我想要这样的东西：

```
def View.onTouchEvent(e) { // on UI thread
   Game.sendMessage(e)
}
def Game.run () { // on Game thread 
  while (running) {
    processMessage
    doGameStuff
    View.sendMessage(someState) // hopefully same as Game.sendMessage
    yield
  }
} 
```

现在，使用 a 或类似工具手动实现这一点相对容易`ConcurrentLinkedQueue`，但我真的不想在这里重新发明轮子。此外，使用这样的演员/队列回发到 UI 也很好——现在我正在使用 Android 支持将（异步）Runnable 发布到 UI 线程。

我简要介绍了几种不同的actor实现（主要是标准的Scala和Scalaz）和一些不同的Java“消息传递”库，例如[Jetlang](http://code.google.com/p/jetlang/)，但大多数似乎都使用隐式线程或线程执行器服务。但是，就我而言，我希望在特定线程上的特定时间[运行参与者并]处理消息。对于 View.sendMessage，消息也应该在 UI 线程上处理，但时间并不那么重要，并且可以从上面提到的 Runnable 执行中捎带。

然后，我想我的问题是，鉴于上述情况：

*在这两个线程之间提供数据的“高效”和惯用方法是什么？*

（我也愿意接受我完全无法理解 Scala 演员和/或 Scalaz 演员和/或其他消息传递库的建议；Scalaz 似乎*可以*按照我的设想工作，但我很难理解.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:29:50.250

好吧，虽然我*仍然*想知道上述的通用/可重用方法，但实用性调用。这也可以通过在游戏线程上运行[Looper](https://stackoverflow.com/questions/5193913/handlers-messagequeue-looper-do-they-all-run-on-the-ui-thread)然后将游戏“事件循环的东西”放在 IdleHandler 中来完成，但我不喜欢这种反转..

这是我目前实现它的方式：

游戏/线程类：

```
var handler: Handler = _ // handler created on View thread

// Send Message to Looper that exists on View thread
// (Created implicitly for all UI threads.)
def publishEvent(event: OutputEvent) {
  handler.obtainMessage(0, event).sendToTarget
}

protected val queue = new ConcurrentLinkedQueue[InputEvent]

def queueEvent(event: InputEvent) { // on UI thread
  queue.add(event)
}

def processQueuedEvents() { // on game Thread
  @tailrec
  def processNextEvent {
    val event = queue.poll
    if (event ne null) {
      doStuffWithInputEvent(event)
      processNextEvent
    }
  }    
  processNextEvent
}

override def run() { // on game Thread
  while (running) {
    processQueuedEvents
    doOtherGameStuff ~ call_publishEvent ~ etc
  }
} 
```

查看类：

```
// Created on UI thread, passed to Game instance
// (The Looper will dispatch Messages to Handlers.)
val handler = new Handler {
  override def handleMessage(m: Message) {
    val event = m.obj
    doStuffWithOutputEvent(event)
  }
}

// on UI thread
override def onTouch(v: View, ev: MotionEvent): Boolean = {
   // safely queued, will be processed at the start of each game loop
   game.queueEvent(InputEvent(..))
} 
```

# android - 没有SIM卡可以开发Android RCS客户端吗

> ID：14372120
> 
> 赞同：2
> 
> 时间：2013-01-17T04:14:58.203
> 
> 标签：android

我正在使用[Orange Lab Library](http://code.google.com/p/android-rcs-ims-stack/)为 Android 设备创建一个 RCS 客户端，但根据代码片段，身份验证是根据 SIM 卡号完成的。他们是否有可能在没有 SIM 卡的情况下为 android 创建 RCS 客户端，或者是否有可能为此创建假 / sim 卡？

寻求帮助。

# grails - 迭代可能是字符串或字符串数 组的 Groovy 对象

> ID：14372122
> 
> 赞同：4
> 
> 时间：2013-01-17T04:15:13.293
> 
> 标签：grails, groovy

使用 Grails 的场景是，如果我有一个从 HTTP 请求传入的对象，并且我遍历该对象并获取所有可能的对象，如下所示：

```
if (params.colors) {
  for (String color in params.colors) {
    println color
  }
} 
```

如果传入 [Ljava.lang.String （即 params.colors = ["blue","green","yellow"]），那么您的输出与预期的一样：

```
blue
green
yellow 
```

但是如果 params.colors = "blue"，那么当然，groovy 会标记 "blue"，你会得到输出：

```
b
l
u
e 
```

我想我应该检查它是否已经是一个数组。除非我正在接近这个错误或者有一种时髦的方式来做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T04:40:26.340

`list`您可以使用对象上的方法将颜色参数作为列表访问`params`：

```
for (String color in params.list('colors')) {
  println color
} 
```

这样，无论您的操作是否被称为类似`/your_action?colors=red`或`/your_action?colors=red&colors=green`什至根本没有颜色参数（这就是我省略了的原因`if`），`params.list('colors')`都将始终返回一个列表:)

# python - Sublime Text 2的python进程中的PYTHONPATH

> ID：14372123
> 
> 赞同：1
> 
> 时间：2013-01-17T04:15:17.760
> 
> 标签：python, sublimetext2

我试图在运行“os.environ.get('pythonpath')”的 Sublime Text 2 的 python 进程（例如控制台或某些包）中获取 PYTHONPATH，但它是空的。似乎不是只从系统环境变量中导入 PYTHONPATH 。其他变量被导入。

如果编辑“Python.sublime-build”，则不会导入变量。

我可以在此过程中获得 PYTHONPATH 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:11:42.910

`env`在您的自定义 Python 构建系统中使用该选项（[在此处记录](https://sublime-text-unofficial-documentation.readthedocs.org/en/latest/reference/build_systems.html#options)）。基本上，你会想要这样的东西：

```
"env": {
        "PYTHONPATH":"/my/custom/modules"
       } 
```

确保您是否覆盖了在用户文件夹中执行的默认 Python 构建规则，以便您的自定义将在升级过程中持续存在。

# eclipse - 在 Eclipse 中安装 Tomcat v7.0.32

> ID：14372127
> 
> 赞同：3
> 
> 时间：2013-01-17T04:15:35.290
> 
> 标签：eclipse, tomcat

我正在使用 Eclipse Juno 和 Apache Tomcat 7.0.32，但我无法在 Eclipse 中添加我的 Tomcat。我已经安装了 JST 服务器适配器插件开发人员资源，但是当我尝试添加我的 Tomcat 时，没有出现 Apache Tomcat v7.0 的选项。但出现v6.0及更早版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:30:00.523

Make sure you have the latest version of WTP (Web Tools Platform) installed. It should bring Tomcat 7 straight away. It will even give you the option of downloading Tomcat directly from Eclipse (in your case you don't seem to need it, though)

# jquery - 使用 keyup 事件在表单验证中仅触发文本框的某些规则，并取消其余规则的事件

> ID：14372131
> 
> 赞同：2
> 
> 时间：2013-01-17T04:16:17.333
> 
> 标签：jquery, asp.net, validation, jquery-validate

我的应用程序中有一个表单，我正在使用 jQuery 表单验证插件进行验证。规则之一是远程类型，以验证用户名不存在。我已经能够覆盖 onkeyup 事件，因此规则不会针对我输入的每个字母发送到服务器。我完成它的方式如下：

```
var validator = $("#frmSite").validate({
  onkeyup: function(element) {
    var element_name = jQuery(element).attr('name');
    if (this.settings.rules[element_name] != undefined) {
      if (this.settings.rules[element_name].onkeyup !== false) {
        jQuery.validator.defaults.onkeyup.apply(this, arguments);
      }
    }
  },
  rules: {
    <%=txtUsername.UniqueID%>: {
      onkeyup: false,
      required: true,
      minlength: 6,              
      remote: function () {
        var params = {
          userName: userNameTextbox.val()
        };
        return {
          type: "POST",
          url: "services/security.asmx/UserNotExists",
          data: JSON.stringify(params),
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          dataFilter: function (data) {
            var msg = eval("(" + data + ")");
            if (msg.hasOwnProperty("d"))
              return JSON.stringify(msg.d);
            else
              return msg;
          },
          error: function (jqXHR, textStatus, errorThrown) {
            alert(jqXHR.responseText);
          }
        };
      }
    }
  }
}); 
```

我遇到的问题是，现在远程规则是在`onfocusout`事件上触发的，每当我点击页面中的其他内容（例如，注销按钮）时，规则就会触发。我已经添加了`onsubmit: false,`作为`validate`函数选项的一部分和一个处理提交按钮的单击事件的函数，但即使这样，规则也会继续在`onfocusout`. 为了控制这一点，我添加了一个类似于我为 设置的功能，`onkeyup`因此规则不会在任何一个上触发`onfocusout`，但是用户获得验证消息的唯一时刻是在单击提交按钮之后。但是，我希望能够尽快将错误通知用户（即，一旦他完成输入用户名）。有没有办法执行以下任何或所有操作：

1.  要为 onkeyup 添加延迟，以便在用户停止输入用户名几秒钟后触发规则？这应该只影响用户名文本框，因为我不希望延迟影响表单中的其他输入。

1a。如果以上是可能的，可以设置一种只影响`remote`规则的方式吗？因此，在正常键入期间会触发`required`和`maxlength`验证，但只有`remote`一个是在用户停止输入几秒钟后？

1.  使`onkeyup`事件仅针对`required`and`maxlength`规则触发，而不针对 the `remote`one？所以`remote`规则只有在用户点击提交时才会触发，而其他两个是正常触发的`keyup`

如果还有其他可能的出路，请提出建议。

谢谢。

# java - 安卓接入IO

> ID：14372135
> 
> 赞同：0
> 
> 时间：2013-01-17T04:16:52.480
> 
> 标签：java, android, io

构建一个从 SQlite 数据库获取小部件列表的应用程序，然后将它们发送到 DotNet Web 服务。

每个小部件在文件系统中可能有一组按名称关联的图片。BlahWidget1.jpg、BlahWidget2.jpg 是两张照片，用于记录 blahWidget。

需要将 BlahWidget 及其照片装箱到 XML 元素中，以便在 SOAP 请求中向下发送。

我正在考虑一个图片类，它可以保存文件名并在被问到时生成一个表示图片字节 [] 的 xml 字符串。

Widget 类将有一个 ArrayList 并会在被询问时构建其自身及其图片的 xml 字符串。

然而，对文件系统的唯一访问似乎是来自扩展活动的类。

例如`File filesDir = getFilesDir();`不能在我的图片类中使用。我做对了吗，或者我只是没有找到合适的库来导入来处理这种情况。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:35:59.473

您可以将目录传递给您的类，例如在构建时：

```
MyPicture pic = new MyPicture(getFilesDir()); 
```

# python - tkinter 脚本打印条目文本

> ID：14372136
> 
> 赞同：0
> 
> 时间：2013-01-17T04:16:53.683
> 
> 标签：python, tkinter

我刚刚开始学习将 tkinter 与 python 一起使用，这种尝试使用简单的脚本来打印输入框中输入的任何内容似乎是违反直觉的，但不起作用：

```
class App:
    def __init__(self, master):

        frame  = Frame(master)
        frame.pack()

        text_write = Entry(frame)
        text_write.pack()

        self.button = Button(frame, text="quit", fg="red", command=frame.quit)
        self.button.pack(side=LEFT)

        self.hi_there = Button(frame, text='hello', fg='black', command=self.say_hi(text_write.get()))
        self.hi_there.pack(side=RIGHT)

    def say_hi(self, text):
        print(text)

root = Tk()

app = App(root)

root.mainloop() 
```

这什么也不做，也不输出任何错误，但如果我把它改成这样：

```
class App:
    def __init__(self, master):

        frame  = Frame(master)
        frame.pack()

        self.text_write = Entry(frame)
        self.text_write.pack()

        self.button = Button(frame, text="quit", fg="red", command=frame.quit)
        self.button.pack(side=LEFT)

        self.hi_there = Button(frame, text='hello', fg='black', command=self.say_hi)
        self.hi_there.pack(side=RIGHT)

    def say_hi(self):
        print(self.text_write.get()) 
```

然后它调用函数并打印值。为什么需要在此处声明“自我”？为什么不能将 text_write 的值作为参数传递给 say_hi（如第一个示例所示）并显示？或者你和我只是做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:27:22.423

当你这样做时：

```
self.button = Button(..., command=func()) 
```

然后 python 将调用`func()`，其结果将分配给 command 属性。由于您的 func 不返回任何内容，因此命令将为无。这就是为什么当你按下按钮时，什么也没有发生。

你的第二个版本看起来不错。需要的原因`self`是没有它，`text_write`是一个仅对 init 函数可见的局部变量。通过使用`self`，它成为对象的属性，因此对象的所有方法都可以访问。

如果您想学习如何传递与第一次尝试类似的参数，请在此站点中搜索`lambda`and的用法`functools.partial`。此类问题已被多次询问和回答。

# iphone - 图片未从 ios 6 发布在 Instagram 上

> ID：14372137
> 
> 赞同：6
> 
> 时间：2013-01-17T04:17:00.137
> 
> 标签：iphone, ios, instagram

我正在使用`instagram-ios-sdk`. 我可以成功`login`访问 Instagram 并获得访问令牌，但是之后当我尝试使用`UIDocumentInteractionController`from发布图片时`UIImagePickerController`，该图片没有发布。发送图片的代码如下：

```
(void)_startUpload:(UIImage *) image {
    NSLog(@"Image Object = %@",NSStringFromCGSize(image.size));
    NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Test.igo"];
    [UIImageJPEGRepresentation(image, 1.0) writeToFile:jpgPath atomically:YES];
    NSLog(@"file url  %@",jpgPath);

    NSURL *igImageHookFile = [[NSURL alloc] init];
igImageHookFile = [NSURL fileURLWithPath:jpgPath];
NSLog(@"File Url = %@",igImageHookFile);

    documentInteractionController.UTI = @"com.instagram.photo";
    [UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];
    [self setupControllerWithURL:igImageHookFile usingDelegate:self];

    [documentInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];
}

(UIDocumentInteractionController *) setupControllerWithURL: (NSURL*) fileURL  usingDelegate: (id <UIDocumentInteractionControllerDelegate>) interactionDelegate {
    NSLog(@"%@",fileURL);
    UIDocumentInteractionController *interactionController =
        [UIDocumentInteractionController interactionControllerWithURL: fileURL];
    interactionController.delegate = interactionDelegate;

    return interactionController;
} 
```

我将图像转换为`.ig`格式，分辨率为（612 * 612）。但是图像仍然没有发布`Instagram`。我错过了什么吗？谁能帮我这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:19:50.183

首先，在您的代码中，您没有将返回值分配`setupControllerWithURL: usingDelegate:`给一个对象，因此该方法实际上并没有完成任何事情，只是创建了一个新的 UIDocumentInteractionController 实例并将其丢弃。

其次，从文档中：

```
"Note that the caller of this method needs to retain the returned object." 
```

据我所知，您没有保留文档控制器（或在 ARC 的情况下将其分配给强引用的属性）。

试试这个 - 在你的@interface中：

```
@property (nonatomic, strong) UIDocumentInteractionController *documentController; 
```

在您的@implementation 中：

```
self.documentController = [UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];
self.documentController.delegate = self;
self.documentController.UTI = @"com.instagram.photo";
[self.documentController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES]; 
```

此外，该行`NSURL *igImageHookFile = [[NSURL alloc] init];`是不必要的，因为在下一行中`igImageHookFile = [NSURL fileURLWithPath:jpgPath];`您将创建一个新实例并丢弃第一个实例。只需使用`NSURL *igImageHookFile = [NSURL fileURLWithPath:jpgPath];`

# linux - VLC libx264 构建错误 - “未定义对 'x264_encoder_open_128' 的引用”

> ID：14372138
> 
> 赞同：2
> 
> 时间：2013-01-17T04:17:02.230
> 
> 标签：linux, makefile, libav, libx264

## 主要问题

尝试重复此错误的步骤。

*   下载最新的 git (git://git.videolan.org/x264.git)。
*   运行`./configure`- 您可以使用任何选项，所有选项都存在错误。
*   运行`sudo make`- 它将编译所有代码，但是当需要链接代码时，它会遇到错误

    > /usr/local/lib/libavcodec.a(libx264.o)：在函数“X264_init”中： /.../libx264.c:
    > 418：未定义对“x264_encoder_open_128”的引用

然后这将退出并退出make。我已经删除了所有与 x264 相关的 apt 包。我已经在我的计算机上搜索了任何可能相关的库并删除了它们。这个问题仍然存在。有人可以解释发生了什么问题以及解决此问题的最简单方法吗？

## 附加信息

构建[avconv](http://libav.org/index.html)时也会出现此错误。它在链接时也会失败，并出现相同的错误。所以我可以假设该目录或源没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:14:03.290

那是与依赖于旧版本 libx264 的 libavcodec.a 链接的错误。如果您只需要 libx264，则可以在没有 lavf 支持的情况下编译它（./configure --disable-lavf）。如果您需要支持 lavf 的 x264，则需要重新编译没有 libx264 的 libavcodec.a。即你需要打破libavcodec 和libx264 之间的循环依赖。

# php - 选择依赖于父 ID 的列值而不需要 PHP 循环？

> ID：14372140
> 
> 赞同：1
> 
> 时间：2013-01-17T04:17:49.657
> 
> 标签：php, mysql

我目前有一张桌子，其中包括：

```
ID | pagetitle | parent
1  |  Page 1   |   0
2  |  Page 2   |   1
3  |  Page 3   |   2 
```

我正在尝试选择所有页面及其父页面标题。

目前我在 PHP 中循环遍历结果，获取那些有父母的页面的页面标题，它看起来很丑：

```
function showPageParent($pageid) {
    do {
        $result = mysql_query("SELECT parent FROM pages WHERE id=" . qt($pageid));
        while($row = mysql_fetch_array($result)) {
            $crumbs[] = $row['parent'];
            $pageid1 = $row['parent'];
        }
    } while($pageid1!=0);
    sort($crumbs);
    foreach($crumbs as $crumb) {
        $result = mysql_query("SELECT id,pagetitle FROM pages WHERE id=" . $crumb);
        while($row = mysql_fetch_array($result)) {
            $out .= $row['pagetitle'] . " > ";
        }
    }
    if(count($crumbs) < 2) {
        return showPageTitle($pageid);
    } else {
        return $out;
    }
} 
```

它可以工作，但它是非常旧的代码，我正在重写这个系统的很多内容，并且希望通过一次调用数据库来返回这样的东西来美化这个东西：

```
ID | pagetitle | parent-pagetitle 
```

这可以使用内部选择吗？

**编辑**

我想指出，我不是 PHP 的原作者，我知道它写得不好：p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:21:08.723

简而言之，您正在尝试管理非分层数据库中的分层数据。对此进行适当建模的更好方法之一是[嵌套集模型，](http://en.wikipedia.org/wiki/MPTT)[这里](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)对此进行了很好的解释。那篇文章还向您展示了为什么简单的相邻列表模型（您当前的模型）中的分层数据几乎无法使用。还要查看[物化路径](https://communities.bmc.com/communities/docs/DOC-9902)或[嵌套区间](http://www.sigmod.org/publications/sigmod-record/0506/p47-article-tropashko.pdf)树模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T04:44:37.957

```
select p.id
     , p.title
     , pp.id
     , pp.title parentitle
  from pages p
  left
 outer
  join pages pp
    on p.parent = pp.id 
```

如果需要，您可以为每个深度级别添加另一个连接。

# coffeescript - 咖啡脚本的 npm 默认位置有变化吗？

> ID：14372142
> 
> 赞同：1
> 
> 时间：2013-01-17T04:17:59.570
> 
> 标签：coffeescript

我发现我正在运行旧版本的咖啡脚本。

所以我决定重新安装它：

```
npm install -g coffee-script 
```

但它似乎没有更新咖啡。

我注意到 npm 在这里安装了咖啡：

```
usr/local/share/npm/bin/coffee -> 
    /usr/local/share/npm/lib/node_modules/coffee-script/bin/coffee 
```

但我路上的咖啡是

```
/usr/local/bin/coffee -> 
    ../lib/node_modules/coffee-script/bin/coffee 
```

AFAIK，我使用 npm 最初安装 coffeescript（几个月前）。但现在 npm 正在将其置于一条全新的道路上。

在 Mac OS X 上通过 npm 安装时，coffeescript 的默认位置是否有变化？

# ruby - 什么是 Java 的 TreeSet 的 Ruby 等价物 （自平衡二叉树）？

> ID：14372143
> 
> 赞同：3
> 
> 时间：2013-01-17T04:18:02.317
> 
> 标签：ruby, binary-tree, avl-tree

我想使用自平衡二叉树来玩一些算法，但我很难找到 Java 的 TreeSet（或 C# 的 SortedSet）的 Ruby 等价物。

我找到了类似的网络代码：

[https://github.com/nahi/avl_tree#readme](https://github.com/nahi/avl_tree#readme)

[https://github.com/MishaConway/binary_search_tree](https://github.com/MishaConway/binary_search_tree)

[http://blog.mikedll.com/2009/09/balanced-avl-binary-search-tree.html](http://blog.mikedll.com/2009/09/balanced-avl-binary-search-tree.html)

我宁愿依赖 Ruby 标准库中的东西。Ruby 的标准库中没有为此提供一些类吗？[除了RubyTree](http://rubytree.rubyforge.org/)之外，我似乎找不到太多东西，我不相信它是自平衡的。

（我会一直在谷歌上搜索直到找到它，或者这个论坛上的某个人指出我正确的方向:)）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T04:26:12.393

您可以使用集合中的 SortedSet，如下所示

```
require 'set'
 s = SortedSet.new([8,2,9,3])
 => #<SortedSet: {2, 3, 8, 9}> 
```

将参数数组作为参数传递

# xml - XML Schema over Editor 工具的优缺点是什么？

> ID：14372145
> 
> 赞同：1
> 
> 时间：2013-01-17T04:18:11.980
> 
> 标签：xml, xsd, schema

我们在项目中使用 DTD 和实体。它被一些第三方编辑器工具访问以进行处理，我分析 xml 模式作为编辑器工具的替代品，我收集了相同的优点和缺点。

专业人士可以分享我对此的宝贵意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:02:07.977

我正在使用 notepad++、eclipse 来编辑我的 xsd 文件，notepad++ 中的一些插件是 . eclipse 还支持可视化 xsd 编辑，这是我的目的。我认为最近的编辑已经足够成熟，可以顺利完成我们关于 DTD 的任务。

# asp.net-mvc-3 - 当 MVC3 应用程序保持空闲时，它重定向到主页

> ID：14372146
> 
> 赞同：1
> 
> 时间：2013-01-17T04:18:19.550
> 
> 标签：asp.net-mvc-3, razor

我已经用剃刀在 MVC3 中实现了应用程序，它在我的开发服务器上工作得非常好，在服务器上部署它（使用 IIS7 和 windows2008）后，如果站点保持空闲 10 到 15 分钟，然后单击它重定向到主页的任何链接. 我还在服务器上设置了会话超时。请让我知道如何解决此问题。这是会话问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:51:01.887

首先，在您的 web.config 中设置 machineKey - 请参阅[http://aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)以获取生成器。这可能会直接解决您的问题。

如果这不能解决问题，原因可能是多方面的。您的应用程序可能由于不活动而被 IIS 卸载，或者由于内存使用过多而被回收。这两个都会终止所有会话。如果您正在授权用户，另一种可能性是您的身份验证会话已过期。

如有必要，可以通过 IIS 延长此空闲时间。在 IIS 配置管理器中，找到您的应用程序所在的应用程序池，右键单击它并选择“高级设置”，然后更改“空闲超时（分钟）”。请注意，默认值为 20 分钟，比您所经历的要多。

通过查看任务管理器中的 w3p 进程来验证它没有因为内存使用过多而被回收。如果您看到您的实例变大然后消失，这可能是原因。

最后可能是如果您使用表单身份验证并且票证已过期，您的 web.config 文件可能会将人们引导至主页。

# wpf - 在 Datagrid 中添加系统图标

> ID：14372147
> 
> 赞同：1
> 
> 时间：2013-01-17T04:18:19.763
> 
> 标签：wpf, wpfdatagrid, imaging

我必须在 Datagrid 列中添加一个系统图标，数据网格不会使用从数据源生成的数据释放它。

系统图标无法绑定，应该在代码隐藏中添加。

# border - 滚动的窗口边框

> ID：14372148
> 
> 赞同：1
> 
> 时间：2013-01-17T04:18:20.217
> 
> 标签：border, gtkmm, scrolledwindow

在 Gtkmm 中，如何从滚动窗口中删除嵌入边框？我使用了一个包含图像小部件的滚动窗口。滚动窗口本身出现在 Hbox 中。嵌入边框出现在我要删除的窗口周围。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:25:38.907

`Gtk::ScrolledWindow`我相信您可以使用该方法摆脱它`set_shadow_type(Gtk::SHADOW_NONE)`

# backbone.js - Backbone.js 模型：覆盖自定义 API 的解析

> ID：14372151
> 
> 赞同：1
> 
> 时间：2013-01-17T04:18:49.727
> 
> 标签：backbone.js

在 Backbone.js 中，我正在使用将响应包装在 a`meta`和`data`hash 中的 API。例如：

```
# GET /api/posts/1
meta: {
  status: 200
},
data: {
  id: 1
  title: 'Hello World'
}

# GET /api/posts
meta: {
  status: 200
},
data: [
  {
    id: 1
    title: 'Hello World'
  },
  { 
    id: 2
    title: 'Hi everyone!'
  }
] 
```

我的 Backbone.js 集合/模型覆盖了以下解析函数：

```
# App.Models.Post
... 
parse: function (response) {
   this.meta = response.meta;
   return response.data;
}

# App.Collections.Posts
... 
parse: function (response) {
   this.meta = response.meta;
   return response.data;
} 
```

但是，当我在 collection 上获取时`posts = new App.Collections.Posts(); posts.fetch()`，帖子属性都是空的。即`posts.at(0).get('title') = undefined`。

现在，当模型解析更改为：

```
parse: function (response) {
   return response;
} 
```

但这意味着它`post.fetch()`被打破了。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T05:57:59.353

我认为问题在于您的模型在通过 model vs collection`parse`完成时传入的数据不一致。模型的参数来证实这一点。这是因为集合返回的值只是一个对象数据数组，要将它们转换为模型，集合只是委托给模型的方法。这可能会解决您的问题：`fetch``fetch``console.log``parse``parse``parse`

```
//App.Models.Post
parse: function (response) {
    if (response.data) {
        return response.data;
    }
    return response;
} 
```

供参考：[https ://github.com/documentcloud/backbone/pull/773](https://github.com/documentcloud/backbone/pull/773)

# python - 如何搜索嵌套字典/数组结构以在 python 中添加子字典？

> ID：14372159
> 
> 赞同：0
> 
> 时间：2013-01-17T04:20:44.850
> 
> 标签：python

如果我有以下 python dict“mydict”：

```
mydict = {
       "folder": "myfolder",
       "files": [
    { "folder": "subfolder",
    "files": []
    },
    { "folder": "anotherfolder",
    "files": [
    { "folder": "subsubfolder",
    "files": []
    },
    { "folder": "subotherfolder",
    "files": []
    }
    ]
    },
         ]
    } 
```

如果我有另一个字典“newdict”，我怎样才能做到这一点：

```
newdict = {
"folder":"newfolder"
"files":[]
} 
```

如何/是否可以编写一个带有两个参数的函数（“要添加到的当前字典”、“我想添加的字典”、“文件夹名到插入下”，这样在调用函数后：

```
desiredfunction(mydict, newdict, "subsubfolder") 
```

我希望该函数在我现有的“mydict”中搜索适当的“files”数组以附加“newdict”。

```
mydict = {
       "folder": "myfolder",
       "files": [
    { "folder": "subfolder",
    "files": []
    },
    { "folder": "anotherfolder",
    "files": [
    { "folder": "subsubfolder",
    "files": [
{
"folder":"newfolder"
"files":[]
}
]
    },
    { "folder": "subotherfolder",
    "files": []
    }
    ]
    },
         ]
    } 
```

做这个的最好方式是什么？我不知道如何/是否可以搜索现有的字典结构，在嵌套字典的多个级别中搜索以适当地插入新的字典，感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:29:38.820

如果您知道数据结构的形状（嵌套级别的数量、类型等），您可以编写一个包含适当数量的 for 循环的过程来遍历数据结构并找到键。

如果不知道数据结构的形状，可以递归遍历数据结构，直到它为空或找到合适的键。

**编辑**：哦，你想在旧字典中添加一个新字典。我以为您想将旧字典中的某些内容添加到新字典中。

前任。如果您想在字典中的键“z”下插入“某物”，并且您始终知道该字典的外观，

```
example = {0: {'a': 'dummy'}, 1: {'z': 'dummy'}}
for thing1 in example:
    for thing2 in thing1:
        if thing2 == 'z':
            example[thing1][thing2] = 'something' 
```

如果你不知道 dict 会是什么样子，或者你不想硬编码 for 循环，

```
example = {0: {'a': 'dummy'}, 1: {'b': {'z': 'dummy'}}}
replacement = 'something'
path = [1, 'b', 'z']

parent = example
while path:
    key = path.pop(0)
    if path:
        parent = parent[key]
    else:
        parent[key] = replacement

print example 
```

where`path`可以作为参数传递给遍历字典的递归过程的递归调用。

# ruby-on-rails - Rails 2 在控制器中渲染 ERb 模板？

> ID：14372161
> 
> 赞同：2
> 
> 时间：2013-01-17T04:21:11.497
> 
> 标签：ruby-on-rails, render, helper, actionview

控制器中的此代码

```
av = ActionView::Base.new(Rails::Configuration.new.view_path)
av.extend ApplicationHelper
content = av.render(:file => "show", :locals => { :user => @user }) 
```

和 show.html.erb 有`link_to`帮助，操作代码错误

```
undefined method `url_for' for nil:NilClass 
```

我 `av.extend ActionController::UrlWriter`在控制器中添加，仍然错误

```
undefined method `default_url_options' for ActionView::Base:Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:03:57.183

尝试：

```
content = render_to_string(:file => "show", :locals => { :user => @user }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T07:16:25.463

通常，在 Rails 中，当某些事情非常困难时，是因为您没有从理想的角度解决问题。除了建议不要这样做之外，我无法直接回答这个问题。理想情况下，视图逻辑应该在视图中，而不是控制器中。除了一些罕见的例外，比如在 flash 消息中使用 link_to 助手（[这很容易解决](https://stackoverflow.com/questions/2249431/ruby-on-rails-put-a-link-in-a-flashnotice)），这些问题应该分开。这似乎不是这些例外之一。相反，我会推荐以下技术之一（稍微多一点 Rails-y）：

**选项1：**

看起来您正在尝试为显示操作呈现视图。这可以通过使用`render :action => 'show'`( [docs](http://apidock.com/rails/ActionController/Base/render) ) 轻松完成。这不会运行该操作的代码，只需使用该视图。

**选项 2**

如果选项 1 在您的情况下不可行，您也可以考虑以下技术的一些变体。照常渲染默认视图。将视图的现有内容移动到部分中，并将新内容移动到它自己的部分中。然后在您的视图中，只需根据适当的条件（@user 的存在）切换部分以呈现，例如：`render :partial => @user ? 'new_content' : 'existing_content'`. 根据您的应用程序结构，这可能可以通过仅从您的显示视图和问题中引用的操作的视图呈现相同的部分来进一步简化。

[我认为将应用程序的各种元素隔离到它们的预期关注点中，不仅通过遵循最小惊讶原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)更容易开发和维护，而且通常也使应用程序更容易测试。很抱歉没有回答您的问题 - 无论如何希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T21:06:54.530

我想它被称为外部控制器，所以我在 Rails 3 中这样做：

```
av = ActionView::Base.new(Rails.configuration.paths["app/views"])
av.class_eval do
  include ApplicationHelper
  include Rails.application.routes.url_helpers
  default_url_options[:host] = 'yoursite.com'
  def protect_against_forgery?
    false
  end
end
@result = av.render(:file => "show", :locals => { :user => @user }) 
```

# django - NoReverseMatch 参数 django

> ID：14372162
> 
> 赞同：1
> 
> 时间：2013-01-17T04:21:14.367
> 
> 标签：django, django-urls

为什么这会返回 NoReverseMatch 错误？

看法：

```
def browse(request):
    thing_list = Thing.objects.all()
    if request.method == 'POST':
        form = BrowseForm(request.POST)
        if form.is_valid():
            make = Make.objects.all()
            return HttpResponseRedirect(reverse('browse_makes', args=[make]))
    else:
        form = BrowseForm()
    return render(request, 'browse.html', {'form':form, 'thing_list':thing_list})

def makes(request, make):
    ad_list = Thing.objects.filter(make=make)
    return render(request, 'browse-makes.html', {'thing_list':thing_list}) 
```

网址：

```
url(r'^browse/$', 'axlepost.views.browse.browse', name='browse'),
url(r'^browse/(?P<make>[\w-]+)/$', 'axlepost.views.browse.makes', name='browse_makes'), 
```

形式：

```
class BrowseForm(forms.Form):
     make = forms.ModelChoiceField(queryset=Make.objects.all()) 
```

模型：

```
class Make(models.Model):
    make = models.CharField(max_length=20)

class Thing(models.Model):
    make = models.ForeignKey(Make) 
```

返回`Reverse for 'browse_makes' with arguments '([<Make: Samsung>],)' and keyword arguments '{}' not found.` 感谢您对如何解决此错误的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:40:37.540

您正在处理`reverse()`QuerySet 而不是 1 值。它也是一个`.all()`查询，因此它很可能有多个对象，并且与表单结果无关。

```
make = Make.objects.all() # QuerySet = ([<Make: Samsung>], [<Make: Sony>], [<Make: Apple>], etc)
return HttpResponseRedirect(reverse('browse_makes', args=[make])) # Expects 1 value 
```

假设您想重定向到`Make`表单中的选定内容，那么您将需要以下内容：

```
if form.is_valid():
    # Get the valid form data
    cd = form.cleaned_data

    # Get the selected Make
    make = cd.get('make')

    # Redirect - note 'make.make'.  You want to pass the value not the object
    return HttpResponseRedirect(reverse('browse_makes', kwargs={'make': make.make})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:32:15.727

我认为有几个问题

*   您的网址与适当的视图不对应

更改此行

```
url(r'^browse/(?P<make>[\w-]+)/$', 'axlepost.views.browse.makes', name='browse_makes'), 
```

到

```
url(r'^browse/(?P<make>[\w-]+)/$', 'axlepost.views.browse', name='browse_makes'), 
```

*   更改视图定义以获取`make`参数

    def browse(request, make): ... #将局部变量“make”更改为其他变量

# java - 在 FreeMarker 上获取 URL 的 queryString

> ID：14372165
> 
> 赞同：10
> 
> 时间：2013-01-17T04:21:19.800
> 
> 标签：java, freemarker

在这里学习超光速。

我正在尝试在我的 FTL 页面上添加一个查询字符串，例如`http://localhost/search`，我想在 URL 上添加一个查询字符串，`http://localhost/search?bing`这样用户可以在没有查询字符串时使用默认设置进行切换。

但是，我没有从 URL 中获取 queryString 的运气。我也试图避免在这方面使用 JavaScript 解决方案。

这是我的代码：

```
<#if RequestParameters.bing?exists >
    <#assign useServer = "http://www.bing.com">
<#else>
    <#assign useServer = "http://www.google.com">
</#if>

<h1>${useServer}</h1> 
```

在 url中输入 queryString 仍然会返回`http://www.google.com`.`h1`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T04:38:48.267

对于查询字符串`?param1=abc&param2=123`，您可以检索如下参数：

`${RequestParameters.param1`} &`${RequestParameters.param2}`

也试试`<#if RequestParameters.bing??>`

参数是跟在 <protocol>://<host>:<port> 之后的东西**？**<参数1>&<参数2>&..

例如在[https://www.google.co.in/search?q=StackOverflow](https://www.google.co.in/search?q=StackOverflow) URL 参数名称是**q**并且值是 'StackOverflow'

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T05:08:22.560

我想出使用 request.getParameter("param")

```
<#if (request.getParameter("param")?has_content && request.getParameter("param")?lower_case?matches("true"))>
    <#assign useServer = "http://bing.com">
<#else>
    <#assign useServer = "http://google.com"> 
```

像魅力一样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-02T07:52:20.727

我试图用第一篇文章的代码检查请求参数：

```
<#if RequestParameters.bing??> 
```

但是什么也没发生。然后我检查`<#if RequestParameters.param1??>`然后我得到了结果。

我希望它可以帮助某人。

# ios - 我们如何为IOS中的所有视图实现一个通用的标签栏？

> ID：14372166
> 
> 赞同：0
> 
> 时间：2013-01-17T04:21:20.287
> 
> 标签：ios, objective-c

我是IOS的新手。在我的应用程序的主页中，有 3 个选项卡和 4 个按钮（使用导航控制器）。我在 appdelegate.m 中创建了一个 tabbarcontroller，如下所示：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

//Initializing the view controllers
UIViewController *disController1 = [[DisController1 alloc]initWithNibName:@"DisController1" bundle:nil];
UIViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
UIViewController *wishlistController = [[Wishlist alloc]initWithNibName:@"Wishlist" bundle:nil];
UIViewController *helpController = [[HelpController alloc]initWithNibName:@"HelpController" bundle:nil];
UIViewController *disController2 = [[DisController1 alloc]initWithNibName:@"DisController2" bundle:nil];

NSMutableArray *viewControllersArray = [[NSMutableArray alloc]init];
[viewControllersArray addObject:disController1];
[viewControllersArray addObject:viewController];
[viewControllersArray addObject:wishlistController];
[viewControllersArray addObject:helpController];
[viewControllersArray addObject:disController2];

//Initializing the tab bar controller
UIImage *img = [UIImage imageNamed:@"SES_tab bar"];

CGSize newSize = CGSizeMake(SCRN_WIDTH, TABHEIGHT);

Common *common = [[Common alloc]init];
UIImage *newImage = [common imageResize:img andResizeTo:newSize];
[common setTabBarColorandImage:newImage];

tabController = [[UITabBarController alloc]init];

tabController.viewControllers = [NSArray arrayWithObjects:disController1, viewController,wishlistController,helpController,disController2 ,nil];

tabController.selectedIndex = 1;
UITabBarItem *firstTab = [[tabController.tabBar items]objectAtIndex:0];
UITabBarItem *lastTab = [[tabController.tabBar items]objectAtIndex:4];
[firstTab setEnabled:NO];
[lastTab setEnabled:NO];

UINavigationController *navCtrl = [[UINavigationController alloc]initWithRootViewController:tabController];
//navCtrl.navigationBarHidden = NO;

//[navCtrl.navigationBar setBackgroundImage:img forBarMetrics:UIBarMetricsDefault];
[navCtrl.navigationBar setBarStyle:UIBarStyleBlackTranslucent ];
[navCtrl.navigationBar.topItem setTitle:@"Home"];
[self.window addSubview:tabController.view];

self.window.rootViewController = navCtrl;
[self.window makeKeyAndVisible];
return YES; 
```

TabBar 适用于我的主页。但我的问题是当我单击按钮时，Tab 栏不会出现在新视图中。我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:33:29.810

您应该为每个选项卡创建 UINavigationControllers。将当前数组中的每个视图控制器设置为每个导航控制器的根视图控制器。

编辑：

```
UIViewController *disController1 = [[DisController1 alloc]initWithNibName:@"DisController1" bundle:nil];
UIViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
UIViewController *wishlistController = [[Wishlist alloc]initWithNibName:@"Wishlist" bundle:nil];
UIViewController *helpController = [[HelpController alloc]initWithNibName:@"HelpController" bundle:nil];
UIViewController *disController2 = [[DisController1 alloc]initWithNibName:@"DisController2" bundle:nil];

UINavigationController *navController1 = [[UINavigationController alloc] initWithRootViewController:disController1];

//etc. for each of the view controllers that you have allocated. 

NSMutableArray *viewControllersArray = [[NSMutableArray alloc]init];
[viewControllersArray addObject:navController1];
[viewControllersArray addObject:navController2];
[viewControllersArray addObject:navController3];
[viewControllersArray addObject:navController4];
[viewControllersArray addObject:navController5]; 
```

# objective-c - 将文本字段保留在键盘上方

> ID：14372167
> 
> 赞同：3
> 
> 时间：2013-01-17T04:21:36.410
> 
> 标签：objective-c, cocoa-touch, ios6

我想弄清楚如何在IOS中保留关于键盘的文本字段。我在stackoverflow上尝试了不同的代码，但没有一个能完美运行。就像文本字段在键盘上方并且我单击该字段一样，它不会向上移动。如何始终在键盘上方显示文本字段？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:16:19.947

lakesh 的链接是一个很好的资源。

基本上有两种方法来处理这种情况。

*方法一：*

您可以将视图封装在 a 中`UIScrollView`，当键盘弹出时，您应该将整个视图向上滚动相同的距离，以考虑键盘占用的空间。

*方法二：*

将最终父级`UIView`放入当前`UIViewController`并更改其框架（最好使用动画），使其移出屏幕顶部并为键盘让路。

作为一般指南，**方法 1 是首选方法**。这是因为您仍然可以`UIScrollView`通过向上滚动来访问“更高”的 UI（例如，一个具有多个字段的表单）。在方法 2 中，如果不首先关闭键盘，用户就无法返回视图中的其他元素。当然，您可能在接受键盘输入时*不需要*查看视图的其余部分，但这取决于您。

# php - Zend中的headmeta ..？

> ID：14372169
> 
> 赞同：-1
> 
> 时间：2013-01-17T04:21:47.160
> 
> 标签：php, zend-framework

我是 zend 的初学者。我想知道这段代码是什么意思……？

```
$this->view->headMeta()->setName('robots',"INDEX,FOLLOW");
$this->view->headMeta()->setName('googlesite-verification',"_3vNeAL1YnjfuONQpwHEIxrB1t_f70Vv7PRiDAA2DxI");
$this->view->headMeta()->setName('msvalidate.01',"639F7E66580EC5D78CFC78B18DF13CEC");
$this->view->headMeta()->setName('y_key',"1db0ae435e4195a0"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:27:50.697

Zend_View_Helper_HeadMeta 是一个视图助手。

> HTML`<meta>`元素用于提供有关您的 HTML 文档的元信息——通常是关键字、文档字符集、缓存 pragma 等。元标记可以是“http-equiv”或“名称”类型，必须包含“内容” ' 属性，并且还可以具有 'lang' 或 'scheme' 修饰符属性。

API
[http://framework.zend.com/apidoc/1.6/Zend_View/Helper/Zend_View_Helper_HeadMeta.html](http://framework.zend.com/apidoc/1.6/Zend_View/Helper/Zend_View_Helper_HeadMeta.html)

用法[http://framework.zend.com/manual/1.6/en/zend.view.helpers.html#zend.view.helpers.initial.headmeta](http://framework.zend.com/manual/1.6/en/zend.view.helpers.html#zend.view.helpers.initial.headmeta)

# c - 交换矩阵行后出现双 free() 错误

> ID：14372170
> 
> 赞同：1
> 
> 时间：2013-01-17T04:21:55.973
> 
> 标签：c, memory, memory-management, memory-leaks, matrix

执行代码时出现双重释放或损坏错误。本质上，我只是在 C 中创建一个矩阵（任何 RxC 维度，这就是使用指针的原因），交换两行，打印结果，然后尝试释放内存。当我不交换行时，释放工作完美。当我这样做时，它会崩溃。我试图改变交换的方式无济于事。我认为这与交换超出范围的临时指针有关，但我不确定这是否是问题以及我将如何解决它。

MatElement 只是一个双精度。

```
typedef double MatElement; 
```

主要的：

```
int main(int argc, char *argv[]) {

    MatElement** matrix = matrixAlloc(3,3);

    int i;
    int j;

    for(i = 0; i < 3; i++) {
        for(j = 0; j < 3; j++) {
            matrix[i][j] = i+j;
        }
    }
    matrixPrint(matrix, "%5.1f", 3, 3);
    swapRows(matrix, 0, 2);
    matrixPrint(matrix, "%5.1f", 3, 3);

    matrixFree(matrix);
    return 0;
} 
```

矩阵的分配方式：

```
MatElement **matrixAlloc(int nr, int nc) {
    int i;
    MatElement *ptr;
    MatElement **A;

    A = malloc(nr * sizeof(MatElement *)); /* array of ptrs   */
    ptr = calloc(nr * nc, sizeof(MatElement)); /* matrix elements */
    for (i = 0; i < nr; i++) /* set row pointers properly */
        A[i] = ptr + nc * i;
    return A;
} 
```

他们被释放的方式：

```
void matrixFree(MatElement **A) {
    free(A[0]);
    free(A);
} 
```

他们的行被交换的方式：

```
void swapRows(MatElement** G, int pivotRow, int rowExamined) {
    MatElement* temp;

    temp = G[rowExamined];
    G[rowExamined] = G[pivotRow];
    G[pivotRow] = temp;
} 
```

有没有人知道什么会导致这个双重免费（）/无效的免费（）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:25:02.130

在某些时候，您将矩阵的第一行交换到另一个位置，因此`free(A[0])`in`matrixFree()`试图将指针释放到数组的中间，而不是返回的指针`calloc()`。您需要将原始指针保存在某处，以便您可以将它不受干扰地传递给`free()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:29:12.660

你的矩阵看起来像这样：

A 具有指向所有行的第一个元素的所有指针。所以最初，A[0] 指向第 0 行，A[1] 指向第 1 行，依此类推。

因此，当您尝试释放矩阵时，您知道 A[0] 指向第一行。但是那时您假设您的矩阵元素处于连续位置，并且 A[0] 将始终指向 calloc 返回的初始指针。但是当你交换一些行（特别是第 0 行与任何其他行）时，A[0] 不会指向 calloc 返回的指针。

可能的解决方案包括在 A 中再分配一个内存插槽，例如：

A = malloc( ((nr+1) * sizeof(MatElement *)); /* ptrs数组 */

然后将calloc返回的原始指针存储到A[nr]。

因此，A[nr] 也将指向 calloc 返回的指针。

# asp.net - 将事件传播到 ASP.NET 中的用户控件

> ID：14372171
> 
> 赞同：1
> 
> 时间：2013-01-17T04:22:08.243
> 
> 标签：asp.net, user-controls, event-handling

我有一个用户控件（导航）嵌套在另一个用户控件（标题）中，该控件是从控件类（标准）动态加载的。

用户控件、Navigation 和 Header 的 AutoEventWireup = false。

控件类 Standard 调用从配置项加载 Header 用户控件。

```
private void layoutAndRender(HtmlTextWriter output, string UserControlKey, NameValueCollection UserControlsConfiguration)
{
    if(UserControlsConfiguration[UserControlKey] != null && UserControlsConfiguration[UserControlKey].ToString() != "")
    {
        string suc = System.Web.HttpContext.Current.Request.ApplicationPath + UserControlsConfiguration[UserControlKey].ToString();
        UserControl ucToRender = (UserControl)this.Page.LoadControl(suc);
        ucToRender.RenderControl(output);
    }
} 
```

我的问题是我想在 Navigation 用户控件中初始化一个可以接受 Page.Request 和 Page.Response 的对象，但是在后面的 Navigation 代码中似乎没有触发事件。

我用来初始化我的对象的代码是：

```
this.browser = new Browser(this.Request, this.Response); 
```

我尝试在 Navigation 构造函数期间执行此操作，但此时未设置 this.Request 和 this.Response。

我尝试在`void Page_Load(object sender, System.EventArgs e)`方法中使用该语句，但这似乎没有触发，即使我`this.Load += new System.EventHandler(this.Page_Load);`在 Navigation 构造函数中有。

我还为 Page_Init 和 Page_PreRender 尝试了类似的语句，但这些语句似乎都没有触发。

是否加载了 LoadControl 的控件不会触发 Load 或 Init 事件，如果以我加载它们的方式加载，并且它可能包含的任何用户控件也是如此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:46:33.717

如果`AutoEventWireup`为要加载的控件设置`false`为，则应重写该`OnInit`方法以连接`Load`控件的事件处理程序。和属性应该在 内部`Request`可用。`Response``Page_Load`

例如：

```
public class Header : Control
{
    private void Page_Load(object sender, EventArgs e)
    {
    }

    override protected void OnInit(EventArgs e)
    {
        this.Load += new System.EventHandler(this.Page_Load);
    }   
} 
```

有关更多信息，请参阅 MSDN ：http `AutoEventWireup`: [//support.microsoft.com/kb/324151](http://support.microsoft.com/kb/324151)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:56:42.900

不幸的是，这是遗留代码，并不总是以正确的方式完成。

特别是，因为用户控件是手动加载和呈现的，它可能会跳过我想要利用的大部分事件模型。理想情况下，它应该对页面执行 AddControl()，而不是将控件呈现给 HtmlTextWriter。

我的解决方法是重写 RenderControl 方法，并`browser`在将 RenderControl 向上传递之前初始化属性。

# list - Erlang 相当于 Haskell 的 as 模式

> ID：14372174
> 
> 赞同：9
> 
> 时间：2013-01-17T04:22:32.127
> 
> 标签：list, haskell, erlang, as-pattern

如何在 Erlang 中编写与此 Haskell 片段等效的内容？

`name@(x:xs)`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T05:11:11.397

您可以使用类似`Name=[X|Xs]`. 一个示例用法是

```
headlist([H|T]=L) -> io:format("List (~p) with head ~p ~n",[L,H]). 
```

# vb.net - 防止树视图中节点文本的重复（VB.NET）

> ID：14372176
> 
> 赞同：0
> 
> 时间：2013-01-17T04:22:42.483
> 
> 标签：vb.net, treeview, duplicates

过程：在树视图控件中添加一个节点，节点文本 = textbox1.text

我想防止添加重复节点，也就是说，如果添加了带有文本“ABC”的节点，那么下一次，不应将带有文本“ABC”的节点添加到树视图控件中。

我尝试了以下方法，但无法达到预期的效果。方法一）

```
Dim list As New ArrayList
list.Add(TextBox1.Text) 
if list.Contains(Textbox1.Text) then
       MsgBox("Use different name")
else 
       .....code to add node with text
end if 
```

方法 B)

```
if Treeview1.Nodes.Count > 0 then 
   For i = 0 to Treeview1.Nodes.Count
      if Treeview1.Nodes(i).Text=Textbox1.Text then
         MsgBox("Use different name")
      end if
   next
else 
   ........code to add node with text
end if 
```

我无法理解在这个论坛上为 C# 建议的解决方案。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:12:25.343

```
If ListView1.Items.Count > 0 Then
                For I = 0 To ListView1.Items.Count - 1
                    For Each LVL As ListViewItem In ListView1.Items
                        If ListView1.Items.Item(I).Index = LVL.Index Then
                            Continue For
                        Else
                            If ListView1.Items.Item(I).Text = LVL.Text Then 
                                LVL.Remove()
                            End If
                        End If
                    Next
                Next
           End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:02:45.150

方法A应该可以正常工作。您的代码中可能还有另一个错误（在 else 部分？）。`list`如果它位于重复调用的函数中，则应将其声明为静态，否则每次都会将其重置为新的（清除）。

方法 B 有几个错误：（1）for 语句应该是`For i = 0 to Treeview1.Nodes.Count - 1`（可能使用“for each”），并且`else`添加节点的代码应该在`msgbox`语句之后。此外，方法 B 仅搜索树视图的根节点。您需要遍历树来检查所有节点。

# php - 如何为散列密码生成随机盐

> ID：14372183
> 
> 赞同：0
> 
> 时间：2013-01-17T04:23:03.700
> 
> 标签：php, hash, passwords, salt, saltedhash

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

我想生成一个随机盐，然后将其与密码一起存储在用户数据库中。所以我认为是这样的。

```
$salt = //random salt code
$hpassword = crypt($password,$salt) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:10:19.437

PHP 5.5 版将内置对 BCrypt、函数`password_hash()`和`password_verify()`. 对于 PHP 5.3.7 及更高版本，存在一个[兼容包](https://github.com/ircmaxell/password_compat/blob/master/lib/password.php)，您可以在其中找到如何使用该函数创建盐的良好实现`mcrypt_create_iv()`，请参见第 86 和 121 行。

因为这个兼容包，你也应该考虑直接使用这个函数，而不是自己写，在这里你可以找到一个[例子](https://stackoverflow.com/a/14274045/575765)。尤其是为 BCrypt 创建盐是一件棘手的事情，而且会犯很多错误。

PS盐应该尽可能随机（从操作系统的随机源读取），因为这是使其在确定性计算机上*唯一*且*不可预测的最佳方式。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:24:55.303

尝试散列现有字段（例如用户名）并将其用于盐。

在这里试试：[http ://en.wikipedia.org/wiki/PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)

# c++ - C99 和 C++ 的内联函数的兼容定义

> ID：14372185
> 
> 赞同：3
> 
> 时间：2013-01-17T04:23:10.717
> 
> 标签：c++, c, gcc, c++11, c99

我有一个 C++11 应用程序代码使用的 C99 代码实用程序库。一些内联函数以 C99 风格声明，并在翻译单元中显式生成代码，例如：

```
// buffer.h
inline bool has_remaining(void* obj) {
...
}

// buffer.c
extern inline bool has_remaining(void * obj); 
```

但是，当我尝试`has_remaining`在 C++ 应用程序中使用时，我在链接时收到有关多个定义的错误。`extern "C"` ~~尽管标头保护~~说明符，g++ 似乎正在实例化库中已经存在的内联代码。

有没有办法强制 g++ 使用这种类型的定义？

看起来如果我`#ifdef __cplusplus`使用该属性进行外部定义，`gnu_inline`就会发生正确的事情，但肯定有一种更便携的方法可以使现代 C 头文件与现代 C++ 兼容？

**-- 编辑：工作示例 --**

缓冲区.h：

```
#ifndef BUFF_H
#define BUFF_H

#include <stdbool.h>
#include <stddef.h>

#ifdef __cplusplus
extern "C" {
#endif

inline bool has_remaining(void const* const obj) {
    return (obj != NULL);
}

#ifdef __cplusplus
}
#endif

#endif /* BUFF_H */ 
```

缓冲区.c：

```
#include "buffer.h"

extern inline bool has_remaining(void const* const obj); 
```

应用程序.cpp：

```
#include <stdlib.h>
#include <stdio.h>

#include "buffer.h"

int main(int argc, char** argv) {
  char const* str = "okay";
  printf(str);

  has_remaining(str);

  return (0);
} 
```

编译：

```
$ gcc -std=gnu99 -o buffer.o -c buffer.c
$ g++ -std=gnu++11 -o app.o -c app.cpp
$ g++ -Wl,--subsystem,console -o app.exe app.o buffer.o

buffer.o:buffer.c:(.text+0x0): multiple definition of `has_remaining'
app.o:app.cpp:(.text$has_remaining[_has_remaining]+0x0): first defined here
collect2.exe: error: ld returned 1 exit status 
```

**--Edit 2--** 该`__gnu_inline__`属性确实解决了多个定义的问题。我仍然希望看到一种（更多）可移植方法或一些决定性的推理为什么不存在。

```
#if defined(__cplusplus) && defined(NOTBROKEN)
#define EXTERN_INLINE extern inline __attribute__((__gnu_inline__))
#else
#define EXTERN_INLINE inline
#endif

EXTERN_INLINE bool has_remaining(void const* const obj) {
  return (obj != NULL);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:50:09.477

C++11 标准状态 (3.2.3)，即：

> 每个程序都应包含该程序中 odr 使用的每个非内联函数或变量的准确定义；无需诊断。定义可以显式出现在程序中，可以在标准或用户定义库中找到，或者（在适当时）隐式定义（参见 12.1、12.4 和 12.8）。**内联函数应在使用它的每个翻译单元中定义。**

C++ 也知道 extern+inline，但将其理解为“**具有外部链接的内联函数**应在所有翻译单元中具有相同的地址”（7.1.2）

因此，您使用的 extern+inline 是纯 C99 功能，您必须有足够的内容来制作类似的东西：

```
#ifdef __cplusplus
#define C99_PROTOTYPE(x)
#else
#define C99_PROTOTYPE(x) x
#endif 
```

并在 buffer.c 中引用：

```
// buffer.c
C99_PROTOTYPE(extern inline bool has_remaining(void * obj);) 
```

C++11 标头中的内联函数没问题，并且在没有 C99 样式原型的情况下应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:01:45.033

使用`static`with`inline`应该可以解决“多个定义”问题。即使对于无法自行决定不应为“内联”函数生成符号的编译器也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:46:43.593

这被报告给 gcc： [http](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56066) ://gcc.gnu.org/bugzilla/show_bug.cgi?id=56066 讨论后从这里开始：http: [//gcc.gnu.org/ml/gcc-help/2013-01 /msg00152.html](http://gcc.gnu.org/ml/gcc-help/2013-01/msg00152.html)

在 linux 上，gcc 为内联函数发出弱符号，而为 extern 内联函数发出强符号。在链接时，弱者被丢弃以支持强者。显然，在 Windows 上，事情的处理方式不同。我对 Windows 没有任何经验，所以我不知道那里会发生什么。

# ruby-on-rails - 实现友好的 URL 和多个嵌套资源

> ID：14372186
> 
> 赞同：1
> 
> 时间：2013-01-17T04:23:24.963
> 
> 标签：ruby-on-rails

在 Rails 3 中，我希望创建一个如下所示的 URL 结构：

```
http://example.org/learn/cooking/cooking-101/can-anybody-cook 
```

并且对应于以下控制器：

```
http://example.org/learn/subject/module/lesson 
```

关联将如下所示：

```
Subject has many Modules
Module belongs to Subject 
```

和

```
Module has many Lessons
Lessons belongs to Module 
```

*Learn 只是一个集线器或仪表板，将列出所有主题。不会有与其他控制器的关联。*

我知道在[RailsGuides](http://guides.rubyonrails.org/routing.html#nested-resources)中，他们警告不要像这样制作多个嵌套资源：

```
resources :subjects do
  resources :modules do
    resources :lessons
  end
end 
```

这就是我所知道的一切。我有点卡住了。有人可以帮我路由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:42:32.820

在这种情况下，我认为您应该使用路由[命名空间](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)和[friendly_id](https://github.com/norman/friendly_id) gem 并指定自定义路径。像下面这样的东西应该会有所帮助：

```
namespace :learn do
  resources :subjects, path: '' do
    resources :modules, path: '' do
      resources :lessons
    end
  end
end 
```

有关安装的更多信息，`friendly_id`请阅读[rails quick-start](https://github.com/norman/friendly_id#rails-quickstart)。您应该在您的类 ( , , )中添加`slug`列和扩展`friendly_id`模块。另见[railscast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)。`Subject``Module``Lesson`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:38:25.543

我要解决的方法是为每个主题、模块和课程创建自定义显示路线，而不是嵌套资源，我认为在这种情况下没有必要。

所以我将每个资源设置如下：

```
resources :subjects, :except => [:show]
resources :modules, :except => [:show]
resources :lessons, :except => [:show] 
```

然后明确匹配显示路由：

```
match '/learn/:subject/:module/:lesson' => 'lessons#show', :as => 'show_lesson'
match '/learn/:subject/:module' => 'modules#show', :as => 'show_module'
match '/learn/:subject' => 'subjects#show', :as => 'show_subjects' 
```

这将使您在定义 show 路由时更加精细（这是您要为其自定义 url 的正常操作）。

现在根据您的要求，您可能仍希望嵌套资源，但希望这能给您一些想法。

顺便说一下，我用 show_ 命名我的 show_xxx 路由只是为了澄清它们是命名路由，并避免任何可能的冲突，以防我决定在资源上使用 show。

# css - 由于导航，网站将无法在 IE8 及以下版本中正常流动

> ID：14372189
> 
> 赞同：0
> 
> 时间：2013-01-17T04:23:58.110
> 
> 标签：css, internet-explorer-8

我会很感激任何可能的帮助，我已经反复浏览了这个网站，看看为什么这个导航不能正确定位。它影响网站的其余部分。我一直在尝试各种解决方案的所有论坛，但没有解决这个问题。我意识到css3不会显示，但我需要

它在 Chrome、FF、Safari、IE9 中是正确的，但在 IE8 中格式不正确。您可以在[cluttercoach.com上查看该页面](http://cluttercoach.com)

CSS

```
@charset "UTF-8";
/* CSS Document */

body {
    position: relative;
    font-family: 'Lato', sans-serif;
    background-color: #CCCCCC;
    margin: 25px 0 25px 0;
    color: #000;
    background: url(../images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    background-position: center top;

}

ul, ol, dl { 
    position: relative;
    padding: 0;
    margin: 0;
}
sup,
sub {
    position: relative;
    font-size: 0.65em;
    vertical-align: super;
    line-height: 0; 
}

a img { 
    position: relative;
    border: none;
    border-style: none;
}

h1, h2, h5, h6, h7, p {
    position: relative;
    margin: 0px;     
    padding: 5px 30px 10px 30px; 

}
h10 {
    position: relative;
    margin: 0px;     
    padding: 0px 30px 0px 45px;

}
h3 {
    position: relative;
    margin: 0px;     
    padding: 0 10px 0 0;
}
h4 {
    position: relative;
    margin: 10px;    

}
h5, h9 {
    position: relative;
    margin: 0px;     
}

h11 {
    position: relative;
    margin: 0px;
    padding: 5px 0 0 30px;
    letter-spacing: 0.15em;

}

a:link {
    color: #FFF;
    text-decoration: none; 
}
a:visited {
    color: #FFF;
    text-decoration: none;
}
a:hover, a:active, a:focus { 
    text-decoration: none;
}

a.black:link {
    color: #000;
    text-decoration: underline; 
}
a.black:visited {
    color: #000;
    text-decoration: none;
}
a.black:hover, a.black:active, a.black:focus { 
    text-decoration: none;
}

a.purple:link {
    color: #612D55;
    text-decoration: underline;
}
a.purple:visited {
    color: #612D55;
    text-decoration: underline;
}
a.purple:hover, a.purple:active, a.purple:focus { 
    color: #612D55;
    text-decoration: underline;
}

a img {border: none; }

.container {
    position: relative;
    z-index: -1;
    width: 1000px;
    margin: 0 auto;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;
    -webkit-box-shadow: #666 0px 2px 4px;
    -moz-box-shadow: #666 0px 2px 4px;
    box-shadow: #666 0px 2px 4px;
    background: #FFF;
    behavior: url(/PIE.htc);
}

.container_top {
    position: relative;
    width: 1000px;
} 

.header {
    position: relative;
    width: 1000px;
    height: 140px;
    padding: 10px 0 0 0;
    -webkit-border-radius: 20px 20px 0px 0px;
    -moz-border-radius: 20px 20px 0px 0px;
    border-radius: 20px 20px 0px 0px;
    background-image: url('../images/base_elements/cc_header.jpg');
    behavior: url(/PIE.htc);

}

.sidebar1 {
    position: relative;
    float: right;
    width: 275px;
    background-color: #FFFFFF;
    border: none;
}
.content {
    position: relative;
    width: 700px;
    float: left;
    background-color: #FFF;
}
.content_testimonials {
    position: relative;
    padding: 15px 0px;
    width: 950px;
    float: left;
    background-color: #FFF;
}

.content ul, .content ol { 
    position: relative;
    padding: 15px; 
}   
.menu,
.menu ul,
.menu li,
.menu a {
    margin: 0;
    padding: 0;
    border: none;
    outline: none;
}

/* Menu */
.menu { 
    height: 40px;
    width: 1000px;

    background: #612D55;

    -webkit-border-radius: 0px 0px 5px 5px;
    -moz-border-radius: 0px 0px 5px 5px;
    border-radius: 0px 0px 5px 5px;
}

.menu li {
    position: relative;
    list-style: none;
    float: left;
    display: block;
    height: 25x;
}

/* Links */

.menu li a {
    display: block;
    padding: 0 26px;
    margin: 6px 0;
    line-height: 28px;
    text-decoration: none;

    font-family: 'Lato', sans-serif;
    font-weight: bold;
    font-size: 15px;

    color: #FFF;
    text-shadow: 1px 1px 1px rgba(0,0,0,.6);

    -webkit-transition: color .2s ease-in-out;
    -moz-transition: color .2s ease-in-out;
    -o-transition: color .2s ease-in-out;
    -ms-transition: color .2s ease-in-out;
    transition: color .2s ease-in-out;
}

.menu li:first-child a { border-left: none; }
.menu li:last-child a{ border-right: none; }
.menu li:hover > a { color: #999; }

/* Sub Menu */

.menu ul {
    position: absolute;
    top: 40px;
    left: 0;

    opacity: 0;

    background: #d1d1d1; /* Old browsers */

background: -moz-linear-gradient(top,  #d1d1d1 0%, #adadad 100%); /* FF3.6+ */

background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#d1d1d1), color-stop(100%,#adadad)); /* Chrome,Safari4+ */

background: -webkit-linear-gradient(top,  #d1d1d1 0%,#adadad 100%); /* Chrome10+,Safari5.1+ */

background: -o-linear-gradient(top,  #d1d1d1 0%,#adadad 100%); /* Opera 11.10+ */

background: -ms-linear-gradient(top,  #d1d1d1 0%,#adadad 100%); /* IE10+ */

background: linear-gradient(to bottom,  #d1d1d1 0%,#adadad 100%); /* W3C */

filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d1d1d1', endColorstr='#adadad',GradientType=0 ); /* IE6-9 */

    -webkit-border-radius: 0 0 5px 5px;
    -moz-border-radius: 0 0 5px 5px;
    border-radius: 0 0 5px 5px;

    -webkit-transition: opacity .25s ease .1s;
    -moz-transition: opacity .25s ease .1s;
    -o-transition: opacity .25s ease .1s;
    -ms-transition: opacity .25s ease .1s;
    transition: opacity .25s ease .1s;
}

.menu li:hover > ul { opacity: 1; }

.menu ul li {
    height: 0;
    overflow: hidden;
    padding: 0;

    -webkit-transition: height .25s ease .1s;
    -moz-transition: height .25s ease .1s;
    -o-transition: height .25s ease .1s;
    -ms-transition: height .25s ease .1s;
    transition: height .25s ease .1s;
}

.menu li:hover > ul li {
    height: 36px;
    overflow: visible;
    padding: 0;
}

.menu ul li a {
    width: 185px;
    padding: 4px 0 4px 25px;
    margin: 0;

    border: none;

}

.menu ul li:last-child a { border: none; }

.menu ul ul{
    position: absolute;
    top: 0;
    left: 90%;

    opacity: 0;

    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;

    -webkit-transition: opacity .25s ease .1s;
    -moz-transition: opacity .25s ease .1s;
    -o-transition: opacity .25s ease .1s;
    -ms-transition: opacity .25s ease .1s;
    transition: opacity .25s ease .1s;
}
.menu ul ul li a {
    width: 250px;
    padding: 4px 0 4px 25px;
    margin: 0;

    border: none;

}

.menu ul ul:after { right: 100%; border: solid transparent; content: " "; height: 0; width: 0; position: absolute; pointer-events: none; } 

.menu ul ul:after { border-color: rgba(0, 0, 0, 0); border-right-color: #000; border-width: 8px; top: 20px; margin-top: -8px; }

ul.menu { z-index: 9999; position: relative; }

/* ~~ The footer ~~ */
.footer {
    position: relative;
    clear: both;
    border-top: 4px solid #FC0;
    -webkit-border-radius: 0px 0px 20px 20px;
    -moz-border-radius: 0px 0px 20px 20px;
    border-radius: 0px 0px 20px 20px;
    -webkit-box-shadow: #666 0px 2px 4px;
    -moz-box-shadow: #666 0px 2px 4px;
    box-shadow: #666 0px 2px 4px;
    background: #FFF;
    behavior: url(/PIE.htc);
}
.fltrt {  
    float: right;
    margin-left: 8px;
}
.fltlft { 
    float: left;
    margin-right: 8px;
}
.clearfloat { 
    clear:both;
    height:0;
    font-size: 1px;
    line-height: 0px;
}
#header_band {
    position: relative;
    height: 25px;
    width: 1000px;
    background-color: #FC0;
    font-family: Lato, sans-serif;
}

body,td,th {
    position: relative;
    font-family: Lato, sans-serif;
}
h1 {
    position: relative;
    font-size: 30px;
    color: #650065;
    font-weight: normal;
}
.pods {
    position: relative;
    width: 215px;
    padding-left: 15px;
    margin: 10px;
    padding: 10px auto;
    border: 2px solid #660066;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -webkit-box-shadow: #666 0px 2px 4px;
    -moz-box-shadow: #666 0px 2px 4px;
    box-shadow: #666 0px 2px 4px;
    background: #FFF;
    behavior: url(/PIE.htc);

}
#quotetext {
    position: relative;
    width: 215px;
    padding-left: 15px;
    margin: 10px;
    padding-top: 5px;
    padding-bottom: 5px;
    padding-right: 15px;

}
.jane_pod {
    position: relative;
    width: 215px;
    height: 175px;
    margin: 10px;
    padding: 5px 15px 5px 15px;
    border: 2px solid #660066;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -webkit-box-shadow: #666 0px 2px 4px;
    -moz-box-shadow: #666 0px 2px 4px;
    box-shadow: #666 0px 2px 4px;
    background: #FFF;
    background-image: url('../images/promotions-kits/call_jane.jpg');
    behavior: url(/PIE.htc);

.paragraph {
    position: relative;
    line-height: 1.25em;
    color: #333;
}
.listing {
    position: relative;
    color: #333;
    padding-top: -10px;
    margin-top: -10px;
}
#site_map {
    position: relative;
    font-size: 10px;
    font-weight: normal;
    color: #666;
    width: 975px;
    margin: 10px auto 0 auto;
    padding: 0 25px 0 25px;

}
h2 {
    font-size: 16px;
    color: #650065;
    font-weight: normal;
}

h3 {
    font-size: 18px;
    color: #650065;
    font-weight: bold;
}
h4 {
    font-size: 16px;
    color: #650065;
    font-weight: normal;
}
h5 {
    font-size: 20px;
    color: #FFF;
    font-weight: normal;
}
h6 {
    font-size: 24px;
    color: #FFF;
}
h7{
    font-size: 14px;
    color: #650065;
    font-weight: normal;
    line-height: 1.45em;
}
h8{
    font-size: 18px;
    color: #650065;
    letter-spacing: 0.15em;
}

h9 {
    font-size: 20px;
    color: #FFF;
}
h11 {
    font-size: 20px;
    color: #612D55;
}

#services {
    position: relative;
    background-color: #CCC;
    height: 110px;
    width: 560px;
    margin: 10px 0 0 100px;
    border: 1px solid #888;

}

#services_text {
    position: relative;
    height: 80px;
    width: 550px;
    float: right;
    padding: 10px 10px 5px 10px;

}

#tv_logos {
    position: relative;
    width: 175px;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-bottom-color: #CCC;
    padding: 0 20px 10px 20px;

}
#tv_logos_middle {
    position: relative;
    width: 175px;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-bottom-color: #CCC;
    padding: 10px 20px 10px 20px;
}

#tv_logos_bottom {
    align: center;
    position: relative;
    width: 175 px;
    padding: 10px 20px 10px 20px;
}
#started {
    position: relative;
    background-color: #660066;
    height: 25px;
    width: 125px;
    margin: 10px 0 0 100px;
    color: #FFF;
    padding: 5px 0 5px 10px;
    border: 2px solid #FFCC00;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -webkit-box-shadow: #666 0px 2px 4px;
    -moz-box-shadow: #666 0px 2px 4px;
    box-shadow: #666 0px 2px 4px;
    behavior: url(/PIE.htc);
}
#started_02 {
    position: relative;
    background-color: #660066;
    height: 25px;
    width: 125px;
    margin: 10px 0 0 30px;
    color: #FFF;
    padding: 5px 0 5px 10px;
    border: 2px solid #FFCC00;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -webkit-box-shadow: #666 0px 2px 4px;
    -moz-box-shadow: #666 0px 2px 4px;
    box-shadow: #666 0px 2px 4px;
    behavior: url(/PIE.htc);
}
#started_03 {
    position: relative;
    background-color: #660066;
    height: 25px;
    width: 125px;
    margin: 10px 0 0 100px;
    color: #FFF;
    padding: 5px 0 5px 10px;
    border: 2px solid #FFCC00;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -webkit-box-shadow: #666 0px 2px 4px;
    -moz-box-shadow: #666 0px 2px 4px;
    box-shadow: #666 0px 2px 4px;
    behavior: url(/PIE.htc);
}
#started_text {
    position: relative;
    background-color: #FFF;
    height: 25px;
    width: 625px;
    margin: 10px 0 0 85px;
    color: #888;    
}
#services_list {
    position: relative;
    background-color: #FFF;
    width: 585px;
    margin: 10px 0 0 30px;
    border: 1px solid #FFCC00;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -webkit-box-shadow: #666 0px 2px 4px;
    -moz-box-shadow: #666 0px 2px 4px;
    box-shadow: #666 0px 2px 4px;
    behavior: url(/PIE.htc);
}

#services_text_list {
    position: relative;
    width: 560px;
    padding: 5px 15px 0 15px;
}
#services_list_test {
    position: relative;
    background-color: #FFF;
    width: 850px;
    margin: 0 0 0 30px;
    padding: 0px;
    border: 1px solid #FFCC00;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -webkit-box-shadow: #666 0px 2px 4px;
    -moz-box-shadow: #666 0px 2px 4px;
    box-shadow: #666 0px 2px 4px;
    behavior: url(/PIE.htc);
}

#services_text_list_test {
    position: relative;
    width: 840px;
    padding: 5px;
} 
```

html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'></link>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<title>Cluttercoach</title>
<meta name="keywords" content="Chicagoland, Chicago, professional organizer, organizing, Jane Carroo, Clutter Coach, storage, life coach, memorabilia, inventory, time management, National Association of Professional Organizers, organization, downsize, disorganized, filing system, relocate, home staging">
<meta name="verify-v1" content="GjwxC8bQTgNcbTb2zk18Ok0B3bo0baxJqpWUqJbSNiM=" />
<meta name="ROBOTS" content="index,follow">
<meta name="REVISIT-AFTER" content="15 days">
<meta name="google-site-verification" content="-QkbNOxxz2Za-cfdX2RFGvdPbAW0H2n6L-cfOTpXyDs" />

<style type="text/css">
<script type="text/javascript" src="js/jquery.js">
</style>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1091736-1";
urchinTracker();
</script>
</head>

<body>
<div class="container"><!-- #BeginLibraryItem "/Library/header.lbi" -->  <div class="header">
  <form name="ccoptin" action="http://visitor.constantcontact.com/d.jsp" target="_blank" method="post">
              <div align="right">
                <input type="hidden" name="m" value="1101831114185">
                <input type="hidden" name="p" value="oi">
      </div>
              <div id="signup_input" class="bold_white">  
                <div align="right"><br />
<h5>Sign up for great organizing tips!<br />
                  <input type="text" name="ea" size="12" value=""><input type="submit" name="go" value="Go" class="submit" style="margin-right:10px;" />
                  <br />
                  Call Now!  847-776-8717
                </div>
              </div>
    </form>
  </div><!-- #EndLibraryItem --><!-- #BeginLibraryItem "/Library/tag_line.lbi" --><div id="header_band"><h11>PROFESSIONAL ORGANIZING SERVICES</h11></div><!-- #EndLibraryItem --><div id="nav"><!-- #BeginLibraryItem "/Library/navigation.lbi" --><ul class="menu">
        <li><a href="index.shtml">Home</a></li>
        <li><a href="about.shtml">About Us</a>
                <ul>
                <li><a href="my_story.shtml">My Story</a></li>
                <li><a href="affiliations.shtml">Affiliations</a></li>
                <li><a href="news.shtml">In the News</a></li>
                </ul>
        </li>
        <li><a href="services.shtml">Services</a>
                <ul>
                <li><a href="home.shtml">Home Organizing</a>
                        <ul>
                            <li><a href="closets.shtml">Closet Design & Organization</a></li>
                            <li><a href="memorabilia.shtml">Photos & Memorabilia</a></li>
                            <li><a href="http://www.simplesizing.com/index.html" target="_blank">Simplesizing</a></li>
                        </ul>
                </li>
                <li><a href="office.shtml">Office Organizing</a></li>
                <li><a href="relocation.shtml">Move Management</a>
                        <ul>
                        <li><a href="moving_packages.html">Moving Packages</a></li>
                        </ul>
                        </li>
                <li><a href="seniors.shtml">Senior Moves</a></li>
                <li><a href="business.shtml">Business Organizing</a></li>
                <li><a href="coaching.shtml">Coaching</a></li>
                <li><a href="education.shtml">Speaking</a></li>
                </ul>
                </li>
                <li><a href="photos.shtml">Photo Gallery</a>
                        <ul>
                        <li><a href="b4aft_home.shtml">Home Transformations</a></li>
                        <li><a href="b4aft_office.shtml">Office Transformations</a></li>
                        <li><a href="photos_earlyshow.shtml">CBS Early Show</a></li>
                        </ul>
                        </li>
                <li><a href="testimonials.shtml">Testimonials</a></li>
                <li><a href="resources.shtml">Resources</a>
                        <ul>
                        <li><a href="products.shtml">Organizing Products</a></li>
                        <li><a href="helpful_tips.html">Helpful Tips</a></li>
                        <li><a href="articles.shtml">How-to Articles</a></li>
                        <li><a href="recycling.shtml">Recycle Your Clutter</a></li>
                        <li><a href="donations.shtml">Donation Places</a></li>
                        </ul>
                        </li>
                <li><a href="http://www.cluttercoach.com/blog/">Blog</a></li>
                <li><a href="contact.shtml">Contact Us</a></li>
</ul><!-- #EndLibraryItem --></div>
  <div class="sidebar1"><!-- #BeginLibraryItem "/Library/social_media.lbi" -->

<h2 align="left"><img src="images/social_media/cc_social_media.png" alt="social media" style="border-style: none" width="250" height="100 usemap=" usemap="#MapMap"#Map"/>
      <map name="MapMap" id="MapMap">
        <area shape="rect" coords="172,9,245,95" href="http://www.angieslist.com/companylist/us/il/rolling-meadows/clutter-coach-company-reviews-2284946.htm" alt="Angie's List Super Service Award winner" title="Angie's List Super Service Award winner" />
        <area shape="rect" coords="138,49,164,74" href="http://pinterest.com/cluttercoach/" target="_blank" />
        <area shape="rect" coords="111,48,137,76" href="#https://plus.google.com/107131551359650759460" target="_blank" />
        <area shape="rect" coords="82,47,110,77" href="#http://www.youtube.com/user/ClutterCoachCo?feature=watch" target="_blank" />
        <area shape="rect" coords="55,48,79,75" href="http://www.linkedin.com/in/cluttercoach" target="_blank">
        <area shape="rect" coords="28,47,52,75" href="https://twitter.com/cluttercoach" target="_blank">
        <area shape="rect" coords="0,48,24,75" href="http://www.facebook.com/pages/Clutter-Coach/111735661075?ref=nf" target="_blank">
      </map></h2><!-- #EndLibraryItem --><!-- #BeginLibraryItem "/Library/call_jane.lbi" -->
    <div class="jane_pod"></div>
    <!-- #EndLibraryItem -->
<div class="pods">
  <div id="tv_logos">
        <div align="center"><img src="images/as_seen_on/nbc.png" width="150" height="62" alt="nbc" /></div>
      </div>
      <div id="tv_logos_middle">
        <div align="center"><img src="images/as_seen_on/cbs.png" width="150" height="34" alt="CBS" /></div>
      </div>
      <div id="tv_logos_middle">
        <div align="center"><img src="images/as_seen_on/hoarders.png" width="150" height="25" alt="Hoarders" /></div>
      </div>
      <div id="tv_logos_middle">
        <div align="center"><img src="images/as_seen_on/chicago_tribune.png" width="147" height="28" alt="Chicago Tribune" /></div>
      </div>
      <div id="tv_logos_middle">
        <div align="center"><img src="images/as_seen_on/daily_herlald.png" width="150" height="29" alt="Daily Herald" /></div>
      </div>
      <div id="tv_logos_bottom">
        <div align="center"><img src="images/as_seen_on/whitney.png" width="150" height="62" alt="nbc" /></div>
      </div>
 </div>
        <div class="pods">
          <h4>Jane and her team did a terrific job of triage: organizing, hand-holding and packing for our big downsizing move.  Although we were just moving within Chicago, things were so well wrapped and labeled I think we could have shipped the boxes to anywhere in Europe and found everything perfectly intact. With her assistance, we were able to feel comfortable with everything.<br />
            <br /><em>Claire<br />
 Chicago, Ill</em></h4>
        </div>

  </div>
  <div class="content"></div>... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:53:07.963

好吧，可能是我不对，但我想在 IE8 中问题是没有结束`</h5>`标签

检查查看源代码，然后查看第 38 行

```
<h5>Sign up for great organizing tips!<br /> 
```

这导致后面的所有元素都归于`<h5>`

按 F12 你会明白我的意思

# .net - sgen.exe 构建错误“无法加载一种或多种请求的类型”

> ID：14372195
> 
> 赞同：6
> 
> 时间：2013-01-17T04:25:05.270
> 
> 标签：.net, visual-studio-2012, sgen

我正在构建一个包含多个解决方案的解决方案。除了其中一个之外，所有这些都没有任何问题。有问题的发出以下消息：

> 错误 2 无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。J:\MyPlugins\MyPlugin1\SGEN MyPlugin1
> 
> 我在 Visual Studio 中打开详细输出，得到以下信息：C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools\sgen.exe /assembly：

我用 FusionLog 检查了输出，一切都正确加载。事实证明这是一个红鲱鱼。我决定在出现详细信息的情况下再次运行构建。我得到以下信息：

> Microsoft (R) Xml 序列化支持实用程序 [Microsoft (R) .NET Framework，版本 4.0.30319.17929] 版权所有 (C) Microsoft Corporation。版权所有。如果您需要更多帮助，请输入“sgen /?”。SGEN：错误：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。该命令以代码 1 退出。完成执行任务“SGen”——失败。
> 
> C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools\sgen.exe /assembly:":\MyPlugins\MyPlugin1.dll" /proxytypes /reference:"J:\MyPlugins\ MyPlugin1\packages\FluentValidation.3.4.6.0\lib\Net40\FluentValidation.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\mscorlib.dll" /reference :"J:\MyPlugins\MyPlugin1\Libraries\Core\bin\Release\Core.dll" /reference:"J:\MyPlugins\MyPlugin1\Libraries\Services\bin\Release\Services.dll" /reference:"J: \MyPlugins\MyPlugin1\Presentation\Web.Framework\bin\Release\Web.Framework.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Core .dll”/参考：“C：\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Data.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4\. 0\System.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.EnterpriseServices.dll" /reference:"C:\Program Files (x86) \Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Web.dll" /reference:"C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies\System.Web. Mvc.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Web.Services.dll" /reference:"C:\Program Files (x86) \参考程序集\Microsoft\Framework.NETFramework\v4.0\System.Xml.dll"

是什么导致了这个错误，我如何在不关闭 SGEN 的情况下修复它？仅供参考，我没有编写代码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-07T02:52:33.243

对我有用的一个很好的提示，取自这里：[http ://hashtagfail.com/post/5255977780/sgen-loaderexceptions-error](http://hashtagfail.com/post/5255977780/sgen-loaderexceptions-error)

> 发生这种情况的原因是，在 Release 版本中，Visual Studio 尝试生成包含解决方案中类型的序列化程序集，以提高 XmlSerializer 序列化性能，如果您选择序列化您的类型。**这可以通过转到项目属性的构建选项卡并将“生成序列化程序集”设置为“关闭”来禁用。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T12:19:33.597

我遇到了同样的问题，这在项目中是一个不好的参考。从 GAC 删除 DLL 后，它工作正常。您可以使用 Fusion Log 找到问题 DLL。更多信息[在这里](http://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T17:16:56.863

解决方案很简单，但很难找到。您必须删除 asp.net 预编译文件夹。由于插件是动态引用的，.NET 不能像更新其他组件那样更新它的 dll。

# c# - C# 在页面加载之前调用 JS

> ID：14372196
> 
> 赞同：0
> 
> 时间：2013-01-17T04:25:05.910
> 
> 标签：c#, javascript, webbrowser-control

是否可以在页面加载之前（或在页面上调用其他 javascript 代码之前）调用 JS 代码？例如：使用 webbrowser 控件，我导航到“http://google.com”，但是在执行 google 上的任何 js 代码之前，我想做一些类似“alert('one moment!');”的事情。

关于我如何做到这一点的任何想法？我猜我必须在它完全加载之前以某种方式修改 html，添加 js 函数，然后使用 invokescript 执行它，但不知道我会怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:28:36.607

我的第一个建议是在里面使用脚本`<head> tag`：

```
<body>
    <head>
    <script type="text/javascript">
        // ...
    </script> 
```

你可以使用 jQuery：

```
$(document).ready(function()
{
    // ...
}); 
```

或者：

```
window.onload = function()
{ 
    // ...
} 
```

无论如何，您必须特别努力不做这种事情。这是一种非常糟糕的做法，尤其是在涉及用户交互的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:28:59.410

您是否尝试实现加载屏幕？我通过在页面加载时强制回发，在回发中进行繁重的工作，然后在回发完成时隐藏加载屏幕来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T04:36:08.407

将以下代码放在页面顶部。这甚至会在整个文档加载之前被调用

```
<script type="text/javascript">
    // add javascript code
    alert('Page not even loaded but the javascript runs');
</script> 
```

这将做必要的事情。如果您希望脚本在 DOM 对象完成并且页面加载完成后运行，请在 document.ready 中执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-31T13:08:35.370

如果您使用 C#（Razor 渲染引擎），您可以在页面顶部使用以下代码

```
@if(true){
<script>
 // your script
</script>
} 
```

# java - jqGrid组合框：如何动态添加值

> ID：14372197
> 
> 赞同：0
> 
> 时间：2013-01-17T04:25:12.660
> 
> 标签：java, jquery, jsp, servlets, jqgrid

我正在使用 JSP 和 Servlet（IDE：Eclipse，数据库：Oracle10）开发一个 Web 应用程序。我正在使用 jqGrid 以表格格式显示记录。

我想`jqGrid`从 servlet 中获取组合框的值，到目前为止我已经完成了以下操作。

我正在访问 JSP 脚本中的 Servlet 传递的数组。

```
<%
    String[] stageIDs = (String[])request.getAttribute("combo");
%> 
```

以下是我的 colModel：

```
jQuery("#list10_d").jqGrid({
            height: "100%",
            url:'ProtocolJGridServChild?q=2&action=protAction',
            datatype: "xml",
colNames:['Sr. No.','PID',  'SID'],
colModel:[{name:'srNo',index:'srNo', width:35,sortable:true},
{name:'PID',index:'PID', width:100,sortable:false,editable:true,hidden:true},
{name:'SID',index:'SID', width:100, sortable:false, editable:true, edittype:"select",editoptions:{value:<%for(int i=0;i<stageIDs.length;i++)%><%="ID:"+ stageIDs[i]+";"%>}}
],
            rowNum:2,
            rowList:[2,4,6],
            pager: '#pager10_d',
            sortname: 'PID',
            viewrecords: true,
            sortorder: "asc",
            multiselect: true,
            editurl: "MyServletName",
            caption:"CRM_PROT_ACTIONS",
}).navGrid('#pager10_d',{edit:true,add:true,del:true}); 
```

`for loop line`但是我在将编辑选项分配给组合框时遇到了一个例外。请让我知道代码中是否有任何错误。

我的另一个问题是，有没有更好的方法从 servlet 为 jqGrid 中的组合框分配值（不使用 scriplet）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:46:25.040

您应该使用`dataUrl`而不是`value`在[editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editoptions)内部从服务器获取组合框的值。如果服务器返回 JSON 数据而不是 HTML 片段，您可以使用`buildSelect`将服务器响应从转换`dataUrl`为 jqGrid 需要的格式。确切的实现可能取决于您使用的 jqGrid 版本。您可以使用将`ajaxSelectOptions`相应的 Ajax 请求从默认的“html”更改为（请参阅[此处](https://stackoverflow.com/a/7098621/315935)）。请参阅[此处](https://stackoverflow.com/a/7877286/315935)的实施示例。`type``dataType``"json"``buildSelect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:06:31.133

使用动态数据将组合框添加到 jqgrid ..

我已经使用以下方式完成了它。

```
jQuery("#list10_d").jqGrid({
        height: "100%",
        url:'ProtocolJGridServChild?q=2&action=protAction',
        datatype: "xml",
colNames:['Sr. No.','PID',  'SID'],
colModel:[{name:'srNo',index:'srNo', width:35,sortable:true},
{name:'PID',index:'PID', width:100,sortable:false,editable:true,hidden:true},
{name:'SID',index:'SID', width:100,sortable:false,editable:true,edittype:"select",editoptions: {dataUrl: 'MyServletURL?action=comboSID'}},
],
        rowNum:2,
        rowList:[2,4,6],
        pager: '#pager10_d',
        sortname: 'PID',
        viewrecords: true,
        sortorder: "asc",
        multiselect: true,
        editurl: "MyServletName",
        caption:"CRM_PROT_ACTIONS",
}).navGrid('#pager10_d',{edit:true,add:true,del:true}); 
```

**小服务程序**

```
if(request.getParameter("action").equalsIgnoreCase("comboSID"))
{
        String s[][] = select.getData("select SID from TABLE_NAME_HERE where PID='"+ param +"'"); //returns 2D array
        StringBuffer strBuf = new StringBuffer();
        strBuf.append("<select>");
        for(int i=0;i<s.length;i++)
        {
            strBuf.append("<option>");
            strBuf.append(s[i][0]);
            strBuf.append("</option>");
        }
        strBuf.append("</select>");
        out.println(strBuf);
} 
```

# c# - DataGridView 单元格文本和单元格值

> ID：14372198
> 
> 赞同：5
> 
> 时间：2013-01-17T04:25:27.630
> 
> 标签：c#, text, datagridview, cell

我有一个只读 C# Winform DataGridView 的问题。

我有一个`DataSource`for a`DataTable`并将其分配给`DataGridView1.DataSource`. 我想按单元格值显示单元格文本而不更改`DataSource`.

**前任：**

```
cell value=1 => cell display text="one", 
cell value=2 => cell display text="two" 
```

我想要那个，如果我得到：

```
DataGridView1.Rows[rowIndex].Cells[columnIndex].Value 
```

那么它一定是`1`（或`2`，或`3`）不是“一”（或“二”，或“三”）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T05:56:36.643

您可以使用 CellFormatting 事件处理程序。

```
private void DataGridView1_CellFormatting(object sender,
    DataGridViewCellFormattingEventArgs e)
{
    DataGridView dgv = (DataGridView)sender;
    if (dgv.Columns[e.ColumnIndex].Name == "TargetColumnName" &&
        e.RowIndex >= 0 &&
        dgv["TargetColumnName", e.RowIndex].Value is int)
    {
        switch ((int)dgv["TargetColumnName", e.RowIndex].Value)
        {
            case 1:
                e.Value = "one";
                e.FormattingApplied = true;
                break;
            case 2:
                e.Value = "two";
                e.FormattingApplied = true;
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T04:49:43.680

我的解决方案是将值放在 DataGridViewCell.Tag 属性中。

像这样 ：

```
 DataGridView1.Rows[rowIndex].Cells[columnIndex].Tag = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T13:43:20.053

你可以为它创建类：

```
public class Item
{
    public int Id { get; }
    public string Name { get; }

    public Item(string name, int id)
    {
        Id = id;
        Name = name;
    }

    public override string ToString()
    {
        return Name;
    }
} 
```

然后

```
 DataGridView1.Rows[rowIndex].Cells[columnIndex]=new Item("One", 1); 
```

# ruby-on-rails-3 - 如何将每个 rspec 的描述打印到 Rails.logger？

> ID：14372205
> 
> 赞同：3
> 
> 时间：2013-01-17T04:26:14.833
> 
> 标签：ruby-on-rails-3, rspec

我想在调试期间在 Rails 日志中显示每个示例的描述。我不太清楚这是怎么做到的。我看过使用 RSpec.configure 做这样的事情：

```
RSpec.configure do |config|
  config.before(:each) do |example|
    Rails.logger.debug example.description
  end
end 
```

但这只会给出 NoMethodError ，因为此时它找不到描述。我认为它可能会像#around 那样工作，但我猜不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:51:04.483

您已经很接近了，以下将在运行时输出您的测试描述：

```
RSpec.configure do |config|
   config.before(:each) do
     Rails.logger.debug self.class.description         
   end
end 
```

来源：[http ://benmabey.com/2008/07/04/global-setup-in-rspec-or-how-to-add-logging-for-specs.html](http://benmabey.com/2008/07/04/global-setup-in-rspec-or-how-to-add-logging-for-specs.html)

# xamarin.ios - MonoTouch 调用 RabbitMQ .NET DLL 文件：抛出“无法加载类型”错误

> ID：14372207
> 
> 赞同：2
> 
> 时间：2013-01-17T04:26:29.420
> 
> 标签：xamarin.ios, rabbitmq

我是一名 MonoTouch 开发人员，我正在编写一个将 RabbitMQ 消息发送到服务器的项目，我有一个 .NET 项目（使用 VS 2010）来调用 RabbitMQ .NET 客户端 DLL 文件来发送 RabbitMQ 消息是正确的，但是当我引用这个时.NET客户端DLL文件（RabbitMQ.Client.dll）到MonoTouch iOS项目，并调用发送消息方法，它抛出这个错误消息：

无法从程序集“RabbitMQ.Client”加载类型“System.configuration.ConfigurationSettings”

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:49:53.883

您不能在 MonoTouch 中引用（二进制）桌面程序集，您必须使用 MonoTouch BCL 重建 dll。

只需创建一个新的 MonoTouch 类库解决方案，复制/链接到您的 RabbitMQ 源文件，然后您就可以使用此 dll/项目。

[这里](https://stackoverflow.com/questions/6779046/how-practically-to-reuse-an-existing-net-library-in-monotouch)有更多信息。

# sql - SQL 表规范化与非规范化

> ID：14372210
> 
> 赞同：4
> 
> 时间：2013-01-17T04:26:38.937
> 
> 标签：sql, sql-server, indexing, foreign-key-relationship

我正在使用**MS SQL Server 2012**。我有两张桌子，一张给医生，一张给手术中心。当前，每个表都包含描述他们（医生和手术中心）应如何接收报告（电子邮件、传真...）的列。两个表中保存此数据的列是相同的。我正在考虑从每个表中提取交付方法列并制作一个通用交付方法表，但我需要在每一行中都有医生和手术中心的外键。这很麻烦，因为交付方法和医生之间存在一对一的关系。手术中心表也存在同样的关系。

**问题：**

1.  有一个带有两个外键的表并且其中一个总是为空是一种好习惯吗？
2.  处理这种情况的最佳策略是什么。

我想从医生和手术中心表格中提取交付方式信息的原因是为了减小表格的整体大小。这也将更好地规范我的数据。我感谢任何和所有的帮助和指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:42:52.070

一个想法是有一个 DeliveryMethod 表。此表中的每条记录都有一个 ID（可能是代理 - 例如身份或序列）。然后，Doctor 表将具有 DeliveryMethodID 外键，同样 SurgeryCenter 表将具有 DeliveryMethodID 外键。

在典型的数据库设计中，您不想要两个相同的表。如果表大小成为问题，有多种方法可以解决这个问题，包括将其设置为`partitioned table`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:41:29.023

一种选择是有两个中间表，将表的 PK 链接`DeliveryMethod`到`Doctors`和`SurgeryCenter`表，例如，`DoctorDeliveryMethod`有两个列：`Doctor.id`和`DeliveryMethod.id`。

但是，这需要您连接三个表以获取每个表的方法。另一种是将 链接`DeliveryMethod.id`到表中的列`Doctor`，调用它`DeliveryMethodID`。无论哪种方式，您都必须进行簿记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T04:43:18.787

一种可能的替代设计是：

*   表“DeliveryMethods”：列 ID (PK)、Fax_number、Email_Address、Preferred、...
*   表“SurgeryCentres”：列 SC_ID (PK)、名称、...、DeliveryMethodID（FK 引用 DeliveryMethods）、...
*   表“医生”：列 MD_ID (PK)、名称、...、DeliveryMethodID（FK 引用 DeliveryMethods）、...

这避免了空值，但为您提供了标准化数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T05:57:53.043

您的关系是从交付方式到医生/中心，而不是从医生/中心到交付方式。

如果您颠倒这种关系，您不仅可以消除使用可能未设置列的表的需要，还可以在多个 drs 和中心之间共享交付方法。您说存在 1 对 1 关系，但如果没有业务规则阻止 dr 或 center 使用与任何其他 dr 或 cent 相同的交付方式，那么您所拥有的实际上是多对 1 关系（许多博士/中心可以采用相同的交付方法），即使在实践中它是独一无二的。

# expressionengine - 使用新支持的方法删除 index.php 会导致联系表单返回到奇怪的页面

> ID：14372212
> 
> 赞同：0
> 
> 时间：2013-01-17T04:26:46.310
> 
> 标签：expressionengine

我创建了一个 htaccess 表单，它只包含：

```
<IfModule mod_rewrite.c>
RewriteEngine On
# Removes index.php from ExpressionEngine URLs
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

->在最新的用户指南中显示为删除 index.php 的新支持方式。

一切都很好，我的联系表单工作正常 - 除了表单提交后，显示消息然后重定向它没有重定向回我指定的主页（当前是 testsite7）但它实际上重定向到“testsite7/_mp3 “我不知道为什么它会显示这个？那是我服务器上的一个文件夹，里面有音乐文件。

我的站点位于插件域上，EE 安装位于根目录之上。

有任何想法吗 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:51:04.553

有趣，不知道为什么它会重定向到那个特定的文件夹，我不明白为什么那个代码会导致它。可能值得尝试不同的 .htaccess 方法来缩小问题的范围。这是我们在所有大型网站上使用的一种，并且一直运行良好。也许试一试：

```
# turn on mod_rewrite
RewriteEngine On
RewriteBase /

# make sure index.php is always removed from url
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php(/[^\s\?]+)? [NC]
RewriteRule ^ %1 [L,R=301]

# make sure we don't have a trailing slash unless it's a directory
# RewriteCond %{REQUEST_FILENAME} !-d
# RewriteRule ^(.+)/$ /$1 [L,R=301]

# make sure requests are routed through index.php but not in url this helps certain addons.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^ index.php%{REQUEST_URI} [L,NC] 
```

# python - 正则表达式：搜索几个可能的组

> ID：14372214
> 
> 赞同：2
> 
> 时间：2013-01-17T04:27:38.013
> 
> 标签：python, regex, regex-group, information-extraction

请正则表达式专家帮忙！我有以下两个例子：

```
'(JEN) This is a sentence.'
'This is another sentence (412).' 
```

我试图通过以下方式提取这两个句子的不同可能元素（知道有三种可能的元素类型）：

```
['JEN', 'This is a sentence', None]
[None, 'This is another sentence', 412] 
```

有谁知道如何解决这个问题？

我尝试了以下正则表达式：

```
r'(\(([A-Z]{3})\))?\s*([\w- ]+)?\s*(\(([0-9]{3})\))?'
r'(?:\(([A-Z]{3})\)\s*)(?:([\w- ]+))(?:\(([0-9]{3})\))' # Passive Groups 
```

对于这两种情况，我都会收到无效正则表达式的错误。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:34:34.350

`sre_constants.error: bad character range`发生是因为`[\w- ]`被解释为一个范围。可以使用`[\w -]`，但通常`-`应该在字符类中转义：`[\w\- ]`.

此外，您的表达式不等效（除了分组）。我不确定这是否是故意的，但请注意非捕获版本`(regex)?`is `(?:regex)?`， not `(?:regex)`。为了表现得类似于第一个表达式，第二个应该是：

```
r'(?:\(([A-Z]{3})\))?\s*([\w\- ]+)?\s*(?:\(([0-9]{3})\))?' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:18:17.083

就个人而言，我想说只捕获组内的实际括号，您知道第 1 组和第 3 组的捕获结果将包含它们，因此您可以适应，并且正则表达式当然更明智。

此外，在这种情况下，“句子”可能更好地定义为“除了右括号之外的任何内容”。话虽如此，这适用于您的所有输入：

```
r'(\([A-Z]{3}\))?\s*([^(]+)(\(\d{3}\))?' 
```

# r - 使用 for 循环绘图

> ID：14372217
> 
> 赞同：0
> 
> 时间：2013-01-17T04:27:51.930
> 
> 标签：r, plot

我想使用这个 for 循环绘制一些图表。但是，我只能得到一个输出（foo0001）。

```
for (i in 1:5) {
 bitmap("foo%03d.jpg")
 plot(runif(20), ylim = c(0, 1))
 dev.off()
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:39:14.277

`bitmap`根据选择的格式字符串将每一页（绘图）写入连续文件。调用`bitmap`创建一个新的图形设备，重置页码。因此，通过每次调用绘制一个情节`bitmap`，您总是在写信给`foo0001.jpg`.

相反，`bitmap`只需调用一次：

```
bitmap("foo%03d.jpg")
for (i in 1:5) {
     plot(runif(20), ylim = c(0, 1))
}
dev.off() 
```

# android - ProgressDialog 不会随着 AsyncTask 停止

> ID：14372219
> 
> 赞同：2
> 
> 时间：2013-01-17T04:27:56.967
> 
> 标签：android, android-asynctask, progressdialog

我正在开发一个简单的应用程序，它将伪随机字符串发送到服务器数据库。在这里，我使用 AsyncTask 将字符串发送到服务器，并在前台使用 ProgressDialog。问题是进度对话框没有停止，我在服务器上没有任何字符串。可能是发送 srcetring 的代码有问题。我是 Android 新手，我从 Internet 上的可用资源中学习。这是我使用的代码。

```
public class MainActivity extends Activity {

    Button btn;
    TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView)findViewById(R.id.textView2);
        btn = (Button)findViewById(R.id.button1);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void getThis(View v) {
        String str = "35" +
            Build.BOARD.length()%10+ Build.BRAND.length()%10 + 
            Build.CPU_ABI.length()%10 + Build.DEVICE.length()%10 + 
            Build.DISPLAY.length()%10 + Build.HOST.length()%10 + 
            Build.ID.length()%10 + Build.MANUFACTURER.length()%10 + 
            Build.MODEL.length()%10 + Build.PRODUCT.length()%10 + 
            Build.TAGS.length()%10 + Build.TYPE.length()%10 + 
            Build.USER.length()%10 ; 
        tv.setText(str);
        UploadUniqueID uni=new UploadUniqueID(this,str);
        uni.execute(str);
    }

    class UploadUniqueID extends AsyncTask<String, Integer, String> {

        Context context;
        MainActivity ma;
        ProgressDialog dialog;
        String id;
        public UploadUniqueID(MainActivity activity,String str) {
            ma = activity;
            context = activity;
            dialog = new ProgressDialog(context);
            id = str;
        }

        protected void onPreExecute() {
            this.dialog.setMessage("Progress start");
            this.dialog.setCancelable(true); 
            this.dialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            // perform long running operation operation
            String id=params[0];
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://10.0.2.2/UniqueIdApp/myPHP.php");

            try {
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
                nameValuePairs.add(new BasicNameValuePair("android",id));     
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                httpclient.execute(httppost);          
            } catch (Exception e) {
                Log.i("HTTP Failed", e.toString());
            }            

            return null;
        }

        protected void onProgressUpdate(Integer...integers) {

        }

        protected void onPostExecute(String...strings) {
            tv.setText("Sent"); 
            if (dialog.isShowing()) {
                dialog.dismiss();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:34:55.687

我建议您在方法中初始化您的`ProgressDialog dialog`对象`protected void onCreate(Bundle savedInstanceState)`，并在方法中关闭进度条`onPostExecute(String...strings)`。可能这会帮助你欢呼:)。

**已编辑**

```
public class MainActivity extends Activity {
ProgressDialog dialog;
Button btn;
TextView tv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tv = (TextView)findViewById(R.id.textView2);
    btn = (Button)findViewById(R.id.button1);
    dialog = new ProgressDialog(MainActivity.this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void getThis(View v) {
    String str = "35" +
        Build.BOARD.length()%10+ Build.BRAND.length()%10 + 
        Build.CPU_ABI.length()%10 + Build.DEVICE.length()%10 + 
        Build.DISPLAY.length()%10 + Build.HOST.length()%10 + 
        Build.ID.length()%10 + Build.MANUFACTURER.length()%10 + 
        Build.MODEL.length()%10 + Build.PRODUCT.length()%10 + 
        Build.TAGS.length()%10 + Build.TYPE.length()%10 + 
        Build.USER.length()%10 ; 
    tv.setText(str);
    UploadUniqueID uni=new UploadUniqueID(this,str);
    uni.execute(str);
}

class UploadUniqueID extends AsyncTask<String, Integer, String> {

    Context context;
    MainActivity ma;
    ProgressDialog dialog;
    String id;
    /*public UploadUniqueID(MainActivity activity,String str) {
        ma = activity;
        context = activity;
        dialog = new ProgressDialog(context);
        id = str;
    }*/

    protected void onPreExecute() {
        dialog.setMessage("Progress start");
        dialog.setCancelable(true); 
        dialog.show();
    }

    @Override
    protected String doInBackground(String... params) {
        // perform long running operation operation
        String id=params[0];
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/UniqueIdApp/myPHP.php");

        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("android",id));     
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            httpclient.execute(httppost);          
        } catch (Exception e) {
            Log.i("HTTP Failed", e.toString());
        }            

        return null;
    }

    protected void onProgressUpdate(Integer...integers) {

    }

    protected void onPostExecute(String...strings) {
        tv.setText("Sent"); 
        try{
    if(dialog!=null && dialog.isShowing()){
        dialog.setMessage("DownLoading finished");
        dialog.dismiss();
    }
    }catch(Exception e){
        e.printStackTrace();
    }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:49:25.697

您还可以**`UploadUniqueID`**通过执行以下操作在 AsyncTask 类中创建和初始化对话框：

```
private final ProgressDialog dialog = new ProgressDialog(MainActivity.this); 
```

`onPostExecute(...)`并像您目前所做的那样在您的方法中将其关闭。此外，将`@Override`注释添加到您的`onPreExecute()`方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T04:49:37.630

试试下面的代码：

```
public class MainActivity extends Activity {
    Button btn;
    TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView) findViewById(R.id.textView1);
        btn = (Button) findViewById(R.id.button1);
    }

    public void getThis(View v) {
        String str = "35" + Build.BOARD.length() % 10 + Build.BRAND.length()
            % 10 + Build.CPU_ABI.length() % 10 + Build.DEVICE.length() % 10
            + Build.DISPLAY.length() % 10 + Build.HOST.length() % 10
            + Build.ID.length() % 10 + Build.MANUFACTURER.length() % 10
            + Build.MODEL.length() % 10 + Build.PRODUCT.length() % 10
            + Build.TAGS.length() % 10 + Build.TYPE.length() % 10
            + Build.USER.length() % 10;
        tv.setText(str);
        UploadUniqueID uni = new UploadUniqueID(this, str);
        uni.execute(str);
    }

    class UploadUniqueID extends AsyncTask<String, Integer, String> {
        Context context;
        MainActivity ma;
        ProgressDialog dialog;
        String id;

        public UploadUniqueID(MainActivity activity, String str) {
            ma = activity;
            context = activity;
            dialog = new ProgressDialog(activity);
            id = str;
        }

        protected void onPreExecute() {
            dialog.setMessage("Progress start");
            dialog.setCancelable(true);
            dialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            // perform long running operation operation
            String id = params[0];
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                "http://10.0.2.2/UniqueIdApp/myPHP.php");
            try {
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                    1);
                nameValuePairs.add(new BasicNameValuePair("android", id));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                httpclient.execute(httppost);
            } catch (Exception e) {
                Log.i("HTTP Failed", e.toString());
            }

            return null;
        }

        protected void onProgressUpdate(Integer... integers) { }

        protected void onPostExecute(String p_result) {
            super.onPostExecute(p_result);          
            tv.setText("Sent");
            if (dialog.isShowing()) {
                dialog.dismiss();
            }
        }
    }   
} 
```

# azure - Windows Azure 管理缓存使用统计

> ID：14372222
> 
> 赞同：1
> 
> 时间：2013-01-17T04:28:54.017
> 
> 标签：azure, azure-storage

在旧版本的 Windows Azure 管理中，有一种方法可以检查 azure 缓存的使用情况。在服务中，您可以看到当前使用情况以及上一月和本月的峰值使用情况。随着 Windows Azure 管理应用程序的更新，我看不到任何地方可以找到这些数据。它藏在我找不到的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:18:03.917

我认为 MS 没有将该功能移至新门户的原因之一是他们更喜欢角色内缓存而不是共享缓存。

> Windows Azure 角色上的缓存支持其他功能，例如高可用性、区域、通知和多个命名缓存。因为它是您的云服务的一部分，所以对角色的缓存也应该比共享缓存具有更高的性能（[链接](http://msdn.microsoft.com/en-us/library/windowsazure/hh697522.aspx#C_BKMK_FAQ9)）

但是，您总是可以返回到仍然可用的旧门户（Silverlight 版本）。为此，您可以转到左上角的菜单并从那里选择*上一个门户。*

![以前的门户](../Images/d67070032f93fc45ab471ceed196437f.png)

# emacs - 如何在 .emacs 中定位缓冲区位置

> ID：14372226
> 
> 赞同：22
> 
> 时间：2013-01-17T04:29:12.353
> 
> 标签：emacs

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-17T05:05:47.830

```
M-x goto-char 
```

Help:

`goto-char` is an interactive built-in function in `C source code'.

It is bound to `<menu-bar> <edit> <goto> <go-to-pos>.`

(goto-char POSITION)

Set point to POSITION, a number or marker. Beginning of buffer is position (point-min), end is (point-max).

The return value is POSITION.

# ruby-on-rails - 在 Rails 中创建 Web 服务

> ID：14372228
> 
> 赞同：4
> 
> 时间：2013-01-17T04:29:24.650
> 
> 标签：ruby-on-rails, web-services

嗨，我是`Ruby and Rails`平台新手。谁能告诉我在 Rails 中创建简单 Web 服务的过程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T04:38:12.583

你可以使用[这个](http://www.ibm.com/developerworks/opensource/library/os-ws-rubyrails/index.html)、[这个](https://stackoverflow.com/questions/2146669/rails-using-another-apps-soap-interface)、[这本书](http://shop.oreilly.com/product/9780596527969.do)和这个[页面](http://areyoufuckingcoding.me/2012/02/27/go-powered-webservices-with-rails/)

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-01-17T04:40:09.190

我推荐这本书[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

Ruby on Rails 教程 通过 Rails 学习 Web 开发 Michael Hartl

在 Rails 中创建一个简单的 Web 服务。

1.  轨道新项目名称
2.  cd 项目名称
3.  捆绑安装
4.  导轨

# c++ - c++ find_if 找不到谓词

> ID：14372232
> 
> 赞同：2
> 
> 时间：2013-01-17T04:29:49.710
> 
> 标签：c++, algorithm, vector

我收到错误：

```
no matching function for call to ‘findByPosition::findByPosition(std::vector<int>::size_type&, std::vector<int>::size_type&)’ 
```

当我投射`i`&时`k`，`int`我得到：

```
no matching function for call to ‘findByPosition::findByPosition(int, int)’ 
```

我不知道我的谓词有什么问题。我`()`根据需要重载了运算符：

```
struct findByPosition
{
    const Node needle;
    findByPosition(const Node& sought) : needle(sought) {}
    bool operator()(int i,int j) const
    {
        return ((needle.i == i) && (needle.j == j));

    }
};

SparseMatrix& SparseMatrix::operator*=(const SparseMatrix &other)
{
    SparseMatrix SparseMatrixResult(_numRow, other._numCol);
    vector<Node>::iterator rowMulti, colMulti;

    if(_numCol != other._numRow)
    {
        // error multiplying
    }

    for(std::vector<int>::size_type i = 0; i != (unsigned int)_numRow; i++) {

            for(std::vector<int>::size_type j = 0; j != (unsigned int)_numCol; j++) {

                for(std::vector<int>::size_type k = 0; k != (unsigned int)_numCol; k++)
                {
                    rowMulti = find_if(_matrix.begin(), _matrix.end(), findByPosition(i,k));
                }
            }
        }

    *this = SparseMatrixResult;
    return *this;
} 
```

`_matrix`是类型：

```
vector<Node> _matrix; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T04:31:18.163

当您调用时，`findByPosition(i,k)`您实际上是**在尝试调用构造函数**，而不是`operator()`

您需要**定义一个构造函数**，然后您可以在该行使用它来**生成一个对象**。`find_if`然后将在`theobject(i,j)` **内部**调用以调用`operator()`

您可以从错误中看到这一点

> 调用 'findByPosition::findByPosition(int, int)' 没有匹配的函数</p>

它试图找到**构造函数**。

要正确使用谓词，您需要实际翻转运算符和构造函数。构造函数应该采用`i,j`对仿函数的所有调用都是通用的，并且运算符应该引用 ，`const Node&`因为这是矩阵的元素类型，也是调用仿函数的数据类型。

```
struct findByPosition
{
    findByPosition(int _i, int _j) : i(_i), j(_j) {}
    bool operator()(const Node& needle) const
    {
        return ((needle.i == i) && (needle.j == j));

    }
private:
    int i,j;
}; 
```

这样，构造函数将构造一个带有`i`,`j`保存的对象，然后将其传递给您的`find_if`函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T04:39:21.790

`Lambda`如果您使用，是简单搜索的更好选择`C++11`

```
rowMulti = find_if(_matrix.begin(), _matrix.end(),
                  [=](const Node& n){return n.i==i && n.j == k; }); 
```

# javascript - html5 从画布中删除

> ID：14372234
> 
> 赞同：0
> 
> 时间：2013-01-17T04:30:20.063
> 
> 标签：javascript, jquery, html, canvas

这是我的第一个 html5 项目，了解它的要点，需要一些帮助。我使用 jquery UI 滑块向画布发送不透明度值，它工作得非常好......但是当滑块处于关闭位置且值为 0 时，我无法让图像完全关闭。这是我正在尝试做的事情：http: [//jsfiddle.net/N6wZZ/2/](http://jsfiddle.net/N6wZZ/2/)

这是我的 JS：

```
$("#slider").slider({
    animate: true,
    range: "min",
    value: 0,
    min: 0,
    max: 0.9,
    step: .01,
    create: function (event, ui) { 
        var opacityValue = '0.0';
        canvasFunction(opacityValue);
    },
    slide: function (event, ui) { 
         $('#hiddenField').attr('value', ui.value);
         $("#slider-result").html(ui.value);
         var opacityValue = $('#hiddenField').val();
         if (opacityValue == 0) {
            var opacityValue = 0;
            var workAroundVar = 300;
            var workAroundVarTwo = 0;
            canvasFunction(opacityValue, workAroundVar, workAroundVarTwo);
        } 
        else {
            var workAroundVar = 0;
            var workAroundVarTwo = 300;
            canvasFunction(opacityValue, workAroundVar, workAroundVarTwo);
        }
    }     
});
function canvasFunction(opacityValue, workAroundVar, workAroundVarTwo){
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    var img1 = loadImage('http://moosepic.com/test2.png', main);
    var img2 = loadImage('http://moosepic.com/test.png', main);

    var imagesLoaded = 0;

    function main() {
      imagesLoaded += 1;

      if (imagesLoaded == 2) {
        // composite now
        ctx.drawImage(img1, 0, 0, 300, 300);

          ctx.globalAlpha = opacityValue;
          ctx.drawImage(img2, workAroundVar, workAroundVar, workAroundVarTwo, workAroundVarTwo);

      }
    }

    function loadImage(src, onload) {
      var img = new Image();

      img.onload = onload;
      img.src = src;

      return img;
    }

} 
```

如您所见，我做了很多变通方法来关闭第二张图像或将其从画布中剔除。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:09:43.710

赛拉斯。我看过你的 jsFiddle。我分叉了它并对您的方法进行了一些更改/改进，我认为它可以实现您的目标：

[http://jsfiddle.net/3LJsX/7/](http://jsfiddle.net/3LJsX/7/)

这是我采用的方法（与您的方法非常接近，只是有一些细微差别）：

1.  加载我们的第一张图片
2.  在第一张图片的onLoad函数中加载我们的第二张图片
3.  在第二张图片的 onLoad 函数中创建我们的滑块
4.  滑块的 create 和 update 方法都调用`refreshVisuals`更新滑块 div 值和更新画布的函数

主要区别在于您的示例`draw`中调用的函数。`canvasFunction`在我的`draw`职能中，我确保：

1.  每次绘制时清除画布
2.  当我们用树绘制第一张图像时，确保 alpha 为 1
3.  绘制树图像
4.  将 alpha 更新为滑块的当前值
5.  画出我们的绑带图像

应该是这样！如果您有任何问题，请告诉我。

# r - 改变个体密度以匹配ggplot2中的图例

> ID：14372241
> 
> 赞同：3
> 
> 时间：2013-01-17T04:31:54.280
> 
> 标签：r, ggplot2, overlay, kernel-density

我正在覆盖几个密度图以在 ggplot2 中创建一个图形。假设我有一系列年份的每个 12 月的数据点（在本例中为 2004-2012 年），我想绘制每个 12 月 + 年的密度函数并将它们叠加。我想突出显示特定月份的一条密度线，方法是在所有其他密度线都是实心的地方用虚线表示。我在下面有一个可重现的示例：

```
#Create vector of data for December 
set.seed(12345)
dec_emas = as.matrix(rnorm(496, 122, 250))

#create indicators for Dec04 ... Dec11, then attach to data frame w/ estimates
declab = c('Dec04', 'Dec05', 'Dec06', 'Dec07', 'Dec08', 'Dec09', 'Dec10', 'Dec11')
declabs = rep(declab, 62)

rownames(dec_emas) = declabs
colnames(dec_emas) = 'EMA'

#add in factor ID for the 8 levels 
dec04 = as.numeric(rownames(dec_emas) == 'Dec04')
dec05 = as.numeric(rownames(dec_emas) == 'Dec05')
dec06 = as.numeric(rownames(dec_emas) == 'Dec06')
dec07 = as.numeric(rownames(dec_emas) == 'Dec07')
dec08 = as.numeric(rownames(dec_emas) == 'Dec08')
dec09 = as.numeric(rownames(dec_emas) == 'Dec09')
dec10 = as.numeric(rownames(dec_emas) == 'Dec10')
dec11 = as.numeric(rownames(dec_emas) == 'Dec11')

dec_ema = as.numeric(dec_emas)
dec_ema_df = data.frame(dec_ema, dec04,dec05,dec06,dec07,dec08,dec09,dec10,dec11)

dec_ema_df$new[dec_ema_df$dec04==1]<-4
dec_ema_df$new[dec_ema_df$dec05==1]<-5
dec_ema_df$new[dec_ema_df$dec06==1]<-6
dec_ema_df$new[dec_ema_df$dec07==1]<-7
dec_ema_df$new[dec_ema_df$dec08==1]<-8
dec_ema_df$new[dec_ema_df$dec09==1]<-9
dec_ema_df$new[dec_ema_df$dec10==1]<-10
dec_ema_df$new[dec_ema_df$dec11==1]<-11

#using GGPLOT2... 
library(ggplot2)
library('RColorBrewer')

#use different colours for each december 
cbbPalette <- brewer.pal(8, "Accent")

#Plot overlaid densities and highlight December 08 with a dashed line. 
dec.dens1 = ggplot(dec_ema_df, aes(x=dec_ema, group = new)) + 
  geom_density(aes(colour=factor(new), linetype = factor(new==8)), size = 1, alpha = .60, kernel='epanechnikov') + 
  xlab(NULL) + ylab(NULL) + 
  scale_linetype_manual(values = c('solid', 'dashed'),  guide = FALSE) +
  scale_colour_manual(values = cbbPalette,
                      labels= c('Dec `04','Dec `05','Dec `06','Dec `07','Dec `08','Dec `09','Dec `10','Dec `11'),
                      name= '')             

print(dec.dens1) 
```

目前，我能够制作这个。不幸的是，右边的图例显示的是 08 年 12 月的蓝色实线，而不是虚线。如何使图例对应于仅 08 年 12 月的虚线密度线（例如，所有其他图例键都是实线）？我曾尝试使用 legend.key 但这仅适用于轮廓和背景，而不适用于图例中的实际对象。![十二月密度](../Images/a4457fdade196d9fcd13376a8b6131f7.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T05:51:12.097

如果您将因子映射`new`到颜色和线型，并为两种比例指定相同的标签，那么 ggplot 会很高兴地自动组合颜色和线型图例：

```
dec.dens1 = ggplot(dec_ema_df, aes(x=dec_ema, group=new)) + 
            geom_density(aes(colour=factor(new), linetype=factor(new)), 
                         size=1, alpha=.60, kernel='epanechnikov') + 
            xlab(NULL) +
            ylab(NULL) + 
            scale_linetype_manual(values=c('solid', 'solid','solid','solid',
                                           'dashed','solid','solid','solid'),
                            labels=c('Dec `04','Dec `05','Dec `06','Dec `07',
                                     'Dec `08','Dec `09','Dec `10','Dec `11')) +
            scale_colour_manual(values = cbbPalette,
                            labels=c('Dec `04','Dec `05','Dec `06','Dec `07',
                                     'Dec `08','Dec `09','Dec `10','Dec `11')) 
```

![在此处输入图像描述](../Images/8157ef499f71194fe5f2adab6b17362f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:50:46.187

我认为这是一个更漂亮的版本，尽管黄色很难阅读。

```
dec.dens1 = ggplot(dec_ema_df, aes(x=dec_ema, group = new)) + 
  geom_density(aes(colour=factor(new), linetype = factor(new)), size = 1, alpha = .70,kernel='epanechnikov') + 
  xlab(NULL) + ylab(NULL) + 
  scale_linetype_manual(values=c('solid', 'solid','solid','solid','dashed','solid','solid','solid'),
                        labels=c('`05','`06','`07','`08','`09','`10','`11','`12')) +
                          scale_colour_manual(values = cbbPalette,labels=c('`05','`06','`07','`08','`09','`10','`11','`12'), name=NULL) +
                          scale_y_continuous(labels = percent) +
                          theme(axis.line = element_line(colour = "black"),
                                panel.grid.major = element_blank(),
                                panel.grid.minor = element_blank(),
                                panel.border = element_blank(),
                                panel.background = element_blank(),
                                legend.title=element_blank(),
                                legend.position = 'bottom', 
                                legend.text = element_text(color= 'black', size = 12, face = 'bold'),
                                legend.key = element_rect(fill = 'white', size = 0.5, linetype='solid'),
                                legend.key.size = unit(1.5, 'lines')) 

print(dec.dens1) 
```

![在此处输入图像描述](../Images/5d10e59006f7617035c920fc55cda29d.png)

# mysql - SQL 查询以指数速度变慢

> ID：14372242
> 
> 赞同：10
> 
> 时间：2013-01-17T04:31:56.213
> 
> 标签：mysql, sql, performance, entity-attribute-value

我有一个联系消息传递系统的查询，我执行的连接越多，该系统的速度就越慢。

表结构基本上是一个联系人表和一个联系人字段表。

该查询多次连接联系人字段表，并且对于我执行的每次连接，它需要两倍的时间。

这是查询。

```
SELECT  SQL_CALC_FOUND_ROWS
    `contact_data`.`id`,
    `contact_data`.`name`,
    `fields0`.`value` AS `fields0`,
    `fields1`.`value` AS `fields1`,
    `fields2`.`value` AS `fields2`,
    ...etc...
    CONTACT_DATA_TAGS(
        GROUP_CONCAT(DISTINCT `contact_data_tags`.`name`),
        GROUP_CONCAT(DISTINCT `contact_data_assignment`.`user`),
        GROUP_CONCAT(DISTINCT `contact_data_read`.`user`)
    ) AS `tags`,
    GROUP_CONCAT(DISTINCT `contact_data_assignment`.`user`) AS `assignments`,
    `contact_data`.`updated`,
    `contact_data`.`created`
FROM
    `contact_data`
LEFT JOIN contact_data_tags ON contact_data.`id` = contact_data_tags.`data`
LEFT JOIN contact_data_assignment ON contact_data.`id` = contact_data_assignment.`data`
LEFT JOIN contact_data_read ON contact_data.`id` = contact_data_read.`data`
LEFT JOIN contact_data_fields AS fields0 ON contact_data.`id` = fields0.`contact_data_id` AND fields0.`key` = :field1
LEFT JOIN contact_data_fields AS fields1 ON contact_data.`id` = fields1.`contact_data_id` AND fields1.`key` = :field2
LEFT JOIN contact_data_fields AS fields2 ON contact_data.`id` = fields2.`contact_data_id` AND fields2.`key` = :field3
...etc...
GROUP BY contact_data.`id`
ORDER BY `id` DESC 
```

这是表结构：

```
CREATE TABLE IF NOT EXISTS `contact_data` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(200) NOT NULL,
  `format` varchar(50) NOT NULL,
  `fields` longtext NOT NULL,
  `url` varchar(2000) NOT NULL,
  `referer` varchar(2000) DEFAULT NULL,
  `ip` varchar(40) NOT NULL,
  `agent` varchar(1000) DEFAULT NULL,
  `created` datetime NOT NULL,
  `updated` datetime NOT NULL,
  `updater` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `name` (`name`),
  KEY `url` (`url`(333)),
  KEY `ip` (`ip`),
  KEY `created` (`created`),
  KEY `updated` (`updated`),
  KEY `updater` (`updater`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `contact_data_assignment` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user` int(10) unsigned NOT NULL,
  `data` int(10) unsigned NOT NULL,
  `created` datetime NOT NULL,
  `updater` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_assignment` (`user`,`data`),
  KEY `user` (`user`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `contact_data_fields` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `contact_data_id` int(10) unsigned NOT NULL,
  `key` varchar(200) NOT NULL,
  `value` text NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `contact_data_id` (`contact_data_id`),
  KEY `key` (`key`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `contact_data_read` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user` int(10) unsigned NOT NULL,
  `data` int(10) unsigned NOT NULL,
  `type` enum('admin','email') NOT NULL,
  `created` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `user` (`user`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `contact_data_tags` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(200) NOT NULL,
  `data` int(10) unsigned NOT NULL,
  `created` datetime NOT NULL,
  `updater` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_tag` (`name`,`data`),
  KEY `name` (`name`),
  KEY `data` (`data`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

DELIMITER $$
CREATE FUNCTION `contact_data_tags`(`tags` TEXT, `assigned` BOOL, `read` BOOL) RETURNS text CHARSET latin1
BEGIN
    RETURN CONCAT(
        ',',
        IFNULL(`tags`, ''),
        ',',
        IF(`tags` IS NULL OR FIND_IN_SET('Closed', `tags`) = 0, 'Open', ''),
        ',',
        IF(`assigned` IS NULL, 'Unassigned', ''),
        ',',
        IF(`read` IS NULL, 'New', ''),
        ','
    );
END$$

DELIMITER ; 
```

有谁知道它为什么运行这么慢？我该怎么做才能让它更快？我是否需要调整查询（我宁愿不调整结构）？我可以设置任何配置选项来加快速度吗？

同样奇怪的是，与我的 Debain 生产服务器相比，它似乎在我的 Windows 开发机器上运行得更快（几乎是即时的，与 30 多秒相比）。

但 Windows 机器的功能远不如 Debain 服务器（8 核 Xeon，32GB RAM）。

在 Debian（我无法更新）上运行 MySQL 5.1.49，在 Windows 上运行 5.5.28。

**因此，阅读 EAV 在 RDBMS 中表现不佳（或至少在我的情况下），是否可以增加一个配置选项以使其运行得更快（即我可以向其投入更多 RAM）？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:18:37.253

加快查询速度的一种方法是`contact_data_fields` **仅链接一次**(on `contact_data.id = contact_data_fields.contact_data_id`) 并将*字段*列更改为`max`表达式 - 如下所示：

```
SELECT  SQL_CALC_FOUND_ROWS
    `contact_data`.`id`,
    `contact_data`.`name`,
    MAX(CASE WHEN fields.`key` = :field1 THEN fields.`value` END) AS `fields0`,
    MAX(CASE WHEN fields.`key` = :field2 THEN fields.`value` END) AS `fields1`,
    MAX(CASE WHEN fields.`key` = :field3 THEN fields.`value` END) AS `fields2`,
    ...etc...
    CONTACT_DATA_TAGS(
        GROUP_CONCAT(DISTINCT `contact_data_tags`.`name`),
        GROUP_CONCAT(DISTINCT `contact_data_assignment`.`user`),
        GROUP_CONCAT(DISTINCT `contact_data_read`.`user`)
    ) AS `tags`,
    GROUP_CONCAT(DISTINCT `contact_data_assignment`.`user`) AS `assignments`,
    `contact_data`.`updated`,
    `contact_data`.`created`
FROM
    `contact_data`
LEFT JOIN contact_data_tags ON contact_data.`id` = contact_data_tags.`data`
LEFT JOIN contact_data_assignment ON contact_data.`id` = contact_data_assignment.`data`
LEFT JOIN contact_data_read ON contact_data.`id` = contact_data_read.`data`
LEFT JOIN contact_data_fields AS fields
       ON contact_data.`id` = fields.`contact_data_id` 
...etc...
GROUP BY contact_data.`id`
ORDER BY `id` DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T13:06:38.800

不幸的是，您的查询有很多效率低下的地方。我认为您无法通过调整一些参数和添加更多 RAM 来解决问题：

*   首先，我们不知道您的桌子的大小，以及您为什么需要转储整个桌子`contact_data`。没有额外的条件和限制（通常很重要）。
*   我们也不知道，对于给定的，是否可以有多个具有相同 (contact_data_id, key) 的记录`contact_data.id`。我认为可以是 {0, 1} 记录，如果您有相应的唯一索引（最终需要作为索引以提高查询效率），这可以更加明确
*   SQL_CALC_FOUND_ROWS 是一个额外的杀手（如果你要使用 LIMIT），因为它使 MySQL 计算并扫描整个结果以计算行数（我只会用一个单独的查询来计算行数，获取裸 ID 并缓存它的结果. 如果表不经常更改，MySQL 自己的 Query Cache 可能就足够了）

只要在 上添加索引`(contact_data_id, key)`，我就会将分组和排序隔离到一个子查询中，然后在 LEFT JOIN 上`contact_data_fields`（没有任何排序）。`contact_data`您当前的查询对, ,的乘积中的每一行进行相同的 LEFT JOIN 比较`contact_data_tags`，然后再对它们进行分组（更不用说您的服务器在对所有内容进行分组之前存储了整个中间结果并丢弃了重复数据）。`contact_data_assignment``contact_data_read`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T00:57:06.553

我将在所有这些有趣的评论中添加我自己在实体-属性-值-模型查询和 MySQL 方面的经验。

首先不要忘记您在 MySQL 中对连接数的下限是[61 个连接](http://dev.mysql.com/doc/refman/5.5/en/joins-limits.html)。乍一看，这似乎是一个很大的数字。但是使用这个模型，它可以很容易地用一个不错的`SQLSTATE[HY000]: General error: 1116`.

我也经历了这些指数级的放缓。当我们第一次在 50 000 行表上进行 50 次连接的查询超过 20 秒时，我们发现在查询优化器中丢失了这些 15 秒上的 14.5 秒——似乎它试图猜测这 50 次连接的最佳连接顺序—— . 因此，只需在关键字`STRAIGHT_JOIN`之后添加关键字，`SELECT`我们就可以恢复正常时间。当然，这样做意味着您必须获得一个好的索引方案，并且您必须使用巧妙的连接顺序编写查询（具有最佳索引和最佳人口减少的表应该首先出现）。

```
SELECT STRAIGHT_JOIN (...) 
```

请注意，此关键字也可用于 JOIN 语法。

> STRAIGHT_JOIN 强制优化器按照它们在 FROM 子句中列出的顺序连接表。如果优化器以非最佳顺序连接表，您可以使用它来加快查询速度。

我会添加“或者如果需要 95% 的查询时间来猜测这个订单”:-)

还可以直接在查询上查看[此页面](http://dev.mysql.com/doc/refman/5.5/en/controlling-optimizer.html)以获取其他查询优化器设置。

**然后你有5.1 和 5.5**之间的差异......这些版本之间有很多差异，就像使用两个不同的数据库服务器一样。您确实应该考虑在生产中使用 5.5，以**提高速度**（也请检查[Percona](http://www.percona.com/)）以及用于事务和锁的改进，如果您只需要一个原因，那就是您将在生产中遇到开发中没有的错误。

这些包含大量连接的查询将根据定义**对服务器造成压力**。您需要在 my.cnf 文件中进行一些**微调来控制服务器行为。**例如，尽量避免创建**临时表**（检查查询的解释输出）。一个 2 秒的查询可以变成一个 120 秒的查询，因为您达到了一个限制并转到临时文件来管理您的 20 或 30 个连接、排序和分组依据。与内存工作相比，将数据放入磁盘确实非常慢。这尤其受以下两个设置控制：

```
tmp_table_size = 1024M
max_heap_table_size = 1024M 
```

在这里，我们说“如果需要少于 1Go 的 RAM，请保留内存工作以供请求”。当然，如果您这样做，请避免让 500 个并行脚本运行这些请求——如果您需要定期处理大量并行请求，请考虑避免使用这种数据方案。

这也引出了一个重要的观点。您正在达到一个请求复杂性的边界。SQL 服务器通常比您的应用程序更快地将数据聚合到一个结果中。但是当数据量很大时，你在查询中添加了很多索引（每个连接至少一个），并且使用 group_contact 排序、分组甚至聚合结果...... MySQL 肯定会使用临时文件而且会很慢。通过使用**几个短查询**（例如，一个没有 group by 的主查询，然后 10 或 200 个查询来获取 group_contact 字段的内容），您可以通过避免临时文件使用来更快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:05:14.527

基于 Mark Ba​​nnisters 查询，可能使用类似这样的方法将字段/值详细信息作为分隔列表返回：-

```
SELECT  SQL_CALC_FOUND_ROWS
    `contact_data`.`id`,
    `contact_data`.`name`,
    GROUP_CONCAT(CONCAT_WS(',', contact_data_fields.`key`, contact_data_fields.`value`)),
    CONTACT_DATA_TAGS(
        GROUP_CONCAT(DISTINCT `contact_data_tags`.`name`),
        GROUP_CONCAT(DISTINCT `contact_data_assignment`.`user`),
        GROUP_CONCAT(DISTINCT `contact_data_read`.`user`)
    ) AS `tags`,
    GROUP_CONCAT(DISTINCT `contact_data_assignment`.`user`) AS `assignments`,
    `contact_data`.`updated`,
    `contact_data`.`created`
FROM
    `contact_data`
LEFT JOIN contact_data_tags ON contact_data.`id` = contact_data_tags.`data`
LEFT JOIN contact_data_assignment ON contact_data.`id` = contact_data_assignment.`data`
LEFT JOIN contact_data_read ON contact_data.`id` = contact_data_read.`data`
LEFT JOIN contact_data_fields ON contact_data.`id` = contact_data_fields.`contact_data_id` 
WHERE contact_data_fields.`key` IN (:field1, :field2, :field3, etc)
GROUP BY contact_data.`id`
ORDER BY `id` DESC 
```

根据contact_data_tags、contact_data_assignment 和contact_data_read 表中的匹配行数（以及每个contact_data.id 的中间行数），从子选择中获取联系人键/值详细信息*可能*会更快。

```
SELECT  SQL_CALC_FOUND_ROWS
    `contact_data`.`id`,
    `contact_data`.`name`,
    Sub1.ContactKeyValue,
    CONTACT_DATA_TAGS(
        GROUP_CONCAT(DISTINCT `contact_data_tags`.`name`),
        GROUP_CONCAT(DISTINCT `contact_data_assignment`.`user`),
        GROUP_CONCAT(DISTINCT `contact_data_read`.`user`)
    ) AS `tags`,
    GROUP_CONCAT(DISTINCT `contact_data_assignment`.`user`) AS `assignments`,
    `contact_data`.`updated`,
    `contact_data`.`created`
FROM
    `contact_data`
LEFT JOIN contact_data_tags ON contact_data.id = contact_data_tags.`data`
LEFT JOIN contact_data_assignment ON contact_data.id = contact_data_assignment.`data`
LEFT JOIN contact_data_read ON contact_data.id = contact_data_read.`data`
LEFT JOIN (SELECT contact_data_id, GROUP_CONCAT(CONCAT_WS(',', contact_data_fields.`key`, contact_data_fields.`value`)) AS ContactKeyValue FROM contact_data_fields 
WHERE fields.`key` IN (:field1, :field2, :field3, etc) GROUP BY contact_data_id) Sub1 ON contact_data.id = Sub1.contact_data_id
GROUP BY contact_data.id
ORDER BY `id` DESC 
```

# sas - SAS 从变量类别中输出数据集

> ID：14372243
> 
> 赞同：0
> 
> 时间：2013-01-17T04:31:58.450
> 
> 标签：sas

我有一个包含多个变量的大型数据集。

使用其中两个变量 et1 和 bl1，我想创建包含每个变量类别的输出数据集。

Et1 有七个级别，它们被编码为数字（尽管我有一个应用于数字类别的格式。

Bl1 有四个级别，也被编码为数字（同样也有一种格式）。

我想创建 28 个输出数据集（et1 * 7 和 bl1 * 4 = 28），理想情况下使用格式名称作为数据集名称。

干杯，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:27:32.840

```
proc format;
value classa
   1='ADATA'
   2='BDATA'
;
value classb
  1='CDATA'
  2='DDATA'
;
run;

data in;
length class_a class_b $ 8;
do i=1 to 2;
   do j=1 to 2;
      class_a=trim(left(put(i,classa.)));
      class_b=trim(left(put(j,classb.)));
      someVar=ranuni(0);
      someOtherVar=ranuni(0);
      output;
   end;
end;
run;

options mprint symbolgen mlogic;

%macro separate(dsn=, classvar1=, classvar2=);

proc sql;
select distinct trim(left(&classvar1)) || '_' || trim(left(&classvar2))
into :dsnames separated by ' '
from &dsn;
quit;

data &dsnames.;
set &dsn;
%let idx=1;
%let thiscombo=%sysfunc(scan(&dsnames,&idx,%str( )));
%do %while(%length(&thiscombo) > 0);
IF ( &classvar1 = %sysfunc(quote(%sysfunc(scan(&thiscombo,1,%str(_))))) AND
     &classvar2 = %sysfunc(quote(%sysfunc(scan(&thiscombo,2,%str(_))))) )
    THEN OUTPUT &thiscombo;
    %let idx=%eval(&idx+1);
    %let thiscombo=%sysfunc(scan(&dsnames,&idx,%str( )));
%end;
run;

%mend;

%separate(dsn=in, classvar1=class_a, classvar2=class_b); 
```

# asp.net-mvc - 使用paypal付款后如何重定向页面

> ID：14372247
> 
> 赞同：2
> 
> 时间：2013-01-17T04:33:12.197
> 
> 标签：asp.net-mvc, c#-4.0, paypal, paypal-sandbox

在我的网页中，我已经完成了 paypal 的付款流程。我现在可以进行付款流程了。但现在我的问题是如何在验证成功后重定向到操作方法。任何帮助表示赞赏。

问候， 阿维纳什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T05:34:01.823

我认为在付款和确认后，您应该重定向到您想要使用您输入的数据的页面，或者您可以使用 ajax 转到操作方法。

如果您使用“立即购买”按钮或“快速结帐 API”，则可以在“Paypal 帐户”中为“立即购买”按钮定义返回 URL，并为“快速结帐 API”定义返回 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:36:00.633

您可以在您的贝宝帐户中设置自动返回 true，请参阅[链接](https://www.paypal.com/cgi-bin/webscr?cmd=p/mer/express_return_summary-outside)以获取更多说明

# python - 使用 Python 编辑 MP4 元数据

> ID：14372248
> 
> 赞同：7
> 
> 时间：2013-01-17T04:33:26.730
> 
> 标签：python

我需要在 Linux，特别是 Ubuntu 上为 python 代码中的文件提供属性（元数据）。

具体来说，我需要在 MP4 文件上设置作者、标题、专辑等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:04:43.380

您可以尝试使用[Mutagen](https://github.com/quodlibet/mutagen)或[Tagpy](http://pypi.python.org/pypi/tagpy)

两者看起来都非常简单，但我对它们没有任何经验。

# wpf - 当我尝试在 wpf 中绑定图像时出现此错误

> ID：14372261
> 
> 赞同：0
> 
> 时间：2013-01-17T04:35:00.597
> 
> 标签：wpf, xaml

> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“详细信息”（HashCode = 52423952）上找不到“图标”属性。绑定表达式：路径=图标；DataItem='详细信息' (HashCode=52423952); 目标元素是'图像'（名称=''）；目标属性是“源”（类型“ImageSource”）

这个错误是什么意思，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:39:26.613

我错过了 Detail 对象中的 Icon 属性。创建 Icon 属性就像魔术一样！

# xamarin.ios - 使用 UIImageView Interface Builder MonoTouch 自动调整 UILabel 高度

> ID：14372264
> 
> 赞同：1
> 
> 时间：2013-01-17T04:35:19.910
> 
> 标签：xamarin.ios, uiimageview, interface-builder, uilabel, autolayout

我来自 Android 背景，我会用它`height = wrap_content`来解决我的问题。我在此标签下方有一个`UILabel`和作为底部的边框。`UIImageView`但是，我不确定标签的文本长度以及标签变大时会出现问题。我试过设置

```
Label.Lines = 0;
Label.LineBreakMode = UILineBreakMode.WordWrap;
Label.SizeToFit(); 
```

`Label`如果它增长超过一条线，但它会覆盖它下面的图像，这会包裹起来。

所以我的问题是，如何使标签高度依赖于文本并在其下方显示所有内容？我看过很多 SO Q&A，他们在 Interface Builder 中发表评论`AutoLayout`，`Constraints`有人说您必须计算标签的高度并将其他所有内容都推到代码中？但是他们都不清楚实现这一点的步骤（尤其是在 MonoTouch 中）

另外，这个内容在一个`ScrollView`，所以我假设我必须计算我页面上的每个标签高度才能设置滚动视图的内容大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-06T02:40:27.953

你只需要给标签和图片添加一个底部约束，这样标签展开时，底部边距保持不变，图片视图被下推。

要添加约束，您需要选择要在情节提要中添加约束的视图，并在右侧选择添加新约束下的红线，如图所示。

[![约束图像](../Images/554a2d09eb415156490d2999d2c9c22a.png)](https://i.stack.imgur.com/7Klom.png)

如果在您的情况下，滚动视图仅包含标签和图像视图，您可以尝试为标签和图像添加左、右、上和下边距，滚动视图将自动调整内容大小。

但请确保滚动视图高度不大于屏幕高度。IE; 您需要将左侧、右侧、顶部和底部边距设置为零。

[![在此处输入图像描述](../Images/688b79a64a75348cf965e50f9bfc519b.png)](https://i.stack.imgur.com/Fz6Ap.png)

总结一下：

1.  打开故事板文件。
2.  为滚动视图添加左右上边距和下边距为 0。
3.  将左右上边距和下边距添加到合适的标签值。
4.  将左右上边距和下边距添加到适合图像视图的值。

# unicode - 将 Unicode 字符发送到 X 上的活动窗口

> ID：14372266
> 
> 赞同：4
> 
> 时间：2013-01-17T04:35:41.383
> 
> 标签：unicode, input, x11

我正在寻找一种将 Unicode 字符发送到活动窗口的方法。目前，我有一个我不满意的解决方案。这是（在Python中）：

```
Xlib.display.Display.change_keyboard_mapping(keycode, [{ordchar}])
// send the keycode with KeyPress and KeyRelease
sleep(0.05) 
```

在上面的代码中，`keycode`是 8 到 255 之间的任意数字，`ordchar`是要发送的 Unicode 代码点。

上面的代码有两个问题：

1.  程序必须修改键盘映射。这规避了只有 cca​​ 的限制。可发送 250 个键码。
2.  我必须在发送两个字符之间插入延迟，否则它们之间的键盘映射更改可能不会注册。0.05 的延迟消除了排放，但字符到达时有明显的滞后。

# list - 在 Sitecore XSLT 中使用单选按钮列表

> ID：14372271
> 
> 赞同：0
> 
> 时间：2013-01-17T04:36:18.233
> 
> 标签：list, xslt, radio-button, sitecore

我正在处理单选按钮列表，在页面中选择单选按钮（代表城市）时，我需要在 XSLT Sitecore 中显示城市中的机构列表。这里我从外部网络服务获取机构列表，所以我需要作为城市的唯一 ID（存储为单选按钮的值）传递给 Web 服务。下面是我用来做同样事情的代码。

```
 <xsl:variable  name="city" select="sc:GetCityUniqueID()"/>
    <xsl:variable name="ID" select="sc:item($city,.)" />
    <table cellpadding="0" cellspacing="0">
     <tr>

      <td valign="top">
      <!--In the SiteCore Content Tree we are maintaining Institutions as Child Nodes to Cities.So using for each I am populating radio buttons with those many institutions under a city.Here Please note that I am setting Value to the ID which I need to pass to the Helpwr Function sc:GetInstitutions below-->
       <xsl:variable name="cities" select="$content/child::item[@template='city institution details']"/>
       <xsl:if test="$cities " >

        <xsl:for-each select="$icities"  >
         <xsl:variable name="current" select="."></xsl:variable>
         <input type="radio" Groupname="citylist">
          <xsl:attribute name="id" >
           city<xsl:value-of select="position()"/>
          </xsl:attribute>
          <xsl:attribute name="name" >city</xsl:attribute>
          <xsl:attribute name="value" >
           <sc:text field="Institute ID" select="$current" />
          </xsl:attribute>
         </input>
         <span class="chooseCity">
          <sc:text field="Name" select="$current" />

         </span>
         <br/>
        </xsl:for-each>
       </xsl:if>
      </td>

     </tr>
    </table>
    <div class="institution_results">    
       Institutions are:
    </div>

<div class="paddAll">
<!--Here 123456 should be the selected radio buttons value above,which I am passing to external webservice call done in the helper to populate Institutions-->
    <xsl:value-of select="sc:GetInstitutions('123456’)" disable-output-escaping="yes"/>

    </div> 
```

我在这里面临的问题是如何将选定的单选按钮值传递给 XSL Helper 函数以获取机构列表并在下面的同一页面中显示结果。

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:51:43.287

在我看来，您正在尝试做一些在 XSLT 中难以完成的事情，并且可以通过在 dropdownlist-change-event 上使用带有回发事件的 SubLayout (ASCX) 而不是使用呈现 (XSLT) 来轻松完成你没有类似回发的东西。渲染主要用于显示简单的文本和列表，没有花哨的东西。如果您想坚持在 xslt 中执行此操作，您可以使用 jQuery AJAX 来完成此操作，但我建议更改此渲染为 SubLayout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:46:29.497

我对SiteCore不熟悉，但是[这个博客](http://sdn.sitecore.net/Articles/XSL/Accessing%20Field%20Values.aspx)建议通过函数访问字段值`sc:fld()`，[这个博客](http://sitecoreblog.alexshyba.com/2010/04/sitecore-rendering-parameters-friday.html)似乎有关于通过参数访问SiteCore字段的说明。您是否尝试过其中任何一种方法？

一旦你成功地将值输入到你的 XSLT 中（假设这里的参数或变量名称为“city”），我认为你应该能够像这样使用它，假设`sc:GetInstitutions()`函数确实存在：

```
<xsl:value-of select="sc:GetInstitutions($city)" disable-output-escaping="yes"/> 
```

# php - 如何从 php cli 脚本调用另一个交互式脚本？

> ID：14372273
> 
> 赞同：1
> 
> 时间：2013-01-17T04:36:57.213
> 
> 标签：php, shell, command-line-interface, interactive

例如一个最小的脚本：

```
#!/usr/bin/php 
<?php

# do some stuff and then drop into another interactive script:
system('something.sh'); 
```

“某事”可以是 bash、二进制等，并且是交互式的，例如 sql/telnet/等。在 bash 中，这是微不足道的。这甚至可能在php内部吗？

我尝试过 system()、exec()、passthru()、shell_exec()

proc_open() 看起来可行，但设置起来很麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:39:37.990

如果你想互动，`proc_open()`这**正是**你所需要的。

如果我没记错的话，这是获得子进程 STDIO 的唯一方法，如果您正在重定向输入/输出，您将需要它。

# android - 适用于多个屏幕的一种 android 布局

> ID：14372274
> 
> 赞同：0
> 
> 时间：2013-01-17T04:37:15.847
> 
> 标签：android, android-layout, screen-size

我只想为多个显示相同分辨率的屏幕设置一个 android 布局。例如，如果我将布局设置为 320dp，我希望它在 640dp 屏幕上显示相同的应用程序，但应用程序的大小就像在 320dp 屏幕上一样。该应用程序将以 320dp 大小的轮廓居中，并且背景基本上是黑色的。然后，该应用程序将在更大的屏幕上以类似方式工作，但它将位于屏幕的中心，占用与在 320dp 屏幕上相同的空间。这会以某种方式可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:26:52.260

尝试使用线性布局并将以下代码放入清单文件中

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:32:22.963

在清单中，您必须编写此代码。

```
enter code here

<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

对于布局，您必须为所有屏幕制作 ui。像 小 正常 大

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T07:09:08.753

简单的方法是使用组合`LinearLayout`，指定`Layout_weight`除最外层之外的每个子项`Linearlayout`，指定`wiegtSum`所有子项`LinearLayouts`，然后使用`Layout_height="xdp"`and`layout_width="0dp"`

这是其他一些方法[http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)

# objective-c - 为什么我们无法在 textedit 中打开 .xcodeproj 文件？

> ID：14372276
> 
> 赞同：0
> 
> 时间：2013-01-17T04:37:26.183
> 
> 标签：objective-c, xcode4.5

那个文件是什么？一个普通的文本文件对吗？我想知道里面是什么。

我知道更改 .xcodeproj 的名称会使其无法编译，我认为这很愚蠢。

我想修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:41:10.763

您可以`.xcodeproj`在 XCode 中重命名 from。打开项目导航器，单击根目录下的项目文件名，然后按 Enter 对其进行重命名。

# android - 如何从 mac 上的 debug.keystore 文件中获取 MD5

> ID：14372281
> 
> 赞同：-2
> 
> 时间：2013-01-17T04:38:41.027
> 
> 标签：android, xcode4, md5

我想检索我的 MD5 证书，但我是 mac 新手，我不知道证书存储在哪里，但我知道它在一个`.android`文件夹中。我的 android sdk 在文件夹中，有人可以帮我找回它吗？

> keytool -list -alias androiddebugkey -keystore ~/Desktop/release-1.keystore -keystore -storepass android -keypass xxxx！！

这是正确的吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:42:19.397

如果您使用 Mac 或 Linux 操作系统，我发现您可以在以下位置找到**debug.keystore**文件：`~/.android/`。

# iphone - 同时迭代和替换项目

> ID：14372286
> 
> 赞同：-1
> 
> 时间：2013-01-17T04:39:05.520
> 
> 标签：iphone, ios, objective-c, ipad

我有一个数组，当我遍历数组时，我也想替换该项目。这是不可能的，如果我这样做会导致崩溃吗？这是代码：

```
for (int i = 0; i < [highlightItemsArray count]; i++){
   //replace the from array with the new one
   NSMutableDictionary *tempDictionary = [NSMutableDictionary dictionaryWithDictionary:highlightItem];
   [tempDictionary setObject:[newHighlightItem objectForKey:@"from"] forKey:@"from"];
   [highlightItemsArray replaceObjectAtIndex:i withObject:tempDictionary];
   [indexes addIndex:i];
} 
```

只是想知道这在 Objective-C 中是否合法？如果不是，那么这样做的替代方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:05:40.030

你上面的代码看起来不错。

如果它崩溃，则不是由于更改了您的阵列。

但是，在旧式循环（while、for(;;)、dowhile ）中，您可以更改其中任何一个 1\. 初始化程序（但这仅执行一次） 2\. 计数器 3\. 条件。

但是在快速枚举的情况下，你不能做所有这些。

因此，如果您将上述代码与 for(... in ...) 合并，它将引发错误，说试图改变一个不可变对象。即使您定义了计数器和/或数组不可变，快速枚举也将它们视为不可变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:23:22.243

解决这个问题的快速而肮脏的方法是数组副本，即

```
NSMutableArray *higlightItemsCopy = [highlightItemsArray mutableCopy];
for (int i = 0; i < [highlightItemsArray count]; i++){
   //replace the from array with the new one
   NSMutableDictionary *tempDictionary = [NSMutableDictionary dictionaryWithDictionary:highlightItem];
   [tempDictionary setObject:[newHighlightItem objectForKey:@"from"] forKey:@"from"];
   higlightItemsCopy[i] = tempDictionary;
   [indexes addIndex:i];
}
highlightItemsArray = higlightItemsCopy; 
```

没有测试过，但是有类似的

# python - Python 单元测试在失败后继续

> ID：14372287
> 
> 赞同：1
> 
> 时间：2013-01-17T04:39:05.870
> 
> 标签：python, unit-testing, nose

[在unittest](http://docs.python.org/2/library/unittest.html)失败后继续测试的最佳方法是什么？

```
#!/usr/env/bin python2.7

import unittest
from fib import fib

class FibTests(unittest.TestCase):

    def test_0(self):
        self.assertEqual(fib(0), 0)
        self.assertEqual(fib(1), 1)
        self.assertEqual(fib(2), 1)
        self.assertEqual(fib(5), 5)
        self.assertEqual(fib(10), 55)

    def test_1(self):
        self.assertEqual(fib(0), 1)

    def test_2(self):
        self.assertEqual(fib(1), 0)
        self.assertEqual(fib(5), 0)

if __name__ == '__main__':
    suite = unittest.TestLoader().loadTestsFromTestCase(FibTests)
    result = unittest.TextTestRunner(verbosity=2).run(suite) 
```

查看 test_2，它只会告诉我有 1 个失败而不是 2 个。

此外，我如何在最后收集结果说明：

```
test_0 -- 0 failures
test_1 -- 1 failures
test_2 -- 2 failures 
```

**动机**：

我正在尝试创建一个测试游戏。人们提交测试，如果他们未能通过其他人的程序，他们就会获得积分；每个测试失败都是一分。提供此类功能的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:34:17.757

您必须将每个测试用例分成不同的方法。为了更轻松地创建新测试/节省输入时间，您可以根据输入自动生成测试用例，如下所示

```
#!/usr/env/bin python2.7

import unittest
from fib import fib

class FibTests(unittest.TestCase):
    pass

def test_gen(expected, actual):
    def test_method(self):
        return self.assertEqual(expected, actual)
    return test_method

if __name__ == '__main__':
    cases = ((fib(1), 1), (fib(2), 1), (fib(5), 5))
    for index, case in enumerate(cases):
        test_name = 'test_{0}'.format(index)
        test = test_gen(case[1], case[0])
        setattr(FibTests, test_name, test)
    suite = unittest.TestLoader().loadTestsFromTestCase(FibTests)
    result = unittest.TextTestRunner(verbosity=2).run(suite) 
```

# node.js - 如何使用 Express.js 正确处理 SIGINT？

> ID：14372288
> 
> 赞同：26
> 
> 时间：2013-01-17T04:39:06.860
> 
> 标签：node.js, express, sigint

[当我的Express.js](http://expressjs.com/)服务停止时，我需要做一些有用的事情`SIGINT`。使用 Express.js 版本 3.0.6，我知道这应该可以工作：

```
var express = require('express');

var app = express();
var server = app.listen(3000);

process.on('SIGINT', function() {
  console.log('Do something useful here.');
  server.close();
}); 
```

`SIGINT`但是，除非我发出( `Control`- `C`) 两次，否则该过程不会给我返回 Bash 提示：

```
$ node problem.js 
^CDo something useful here.
^CDo something useful here.

net.js:1046
    throw new Error('Not running');
          ^
Error: Not running
    at Server.close (net.js:1046:11)
    at process.<anonymous> (/path/to/problem.js:8:10)
    at process.EventEmitter.emit (events.js:93:17)
    at SignalWatcher.startup.processSignalHandlers.process.on.process.addListener.w.callback (node.js:486:45)
$ 
```

还有一个警告。如果我启动此 Express.js 服务*并且不发送任何请求*，则`SIGINT`正确终止。

显然，我在这里缺少一些基本的东西？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-17T04:47:10.423

通过捕获`SIGINT`处理程序，您可以防止*默认行为*，即退出进程。当您`Ctrl+C`第二次使用时，进程会因为`server.close`抛出未捕获的异常而终止。

`process.exit()`只需在处理程序的末尾添加 a即可`SIGINT`优雅地退出该过程。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-06-28T05:18:11.240

复活一个老歌，因为这个问题没有完全（或正确）回答，人们可能仍然会找到这个答案。

您问题的重要部分是：

**还有一个警告。如果我启动这个 Express.js 服务并且不发送任何请求，那么 SIGINT 会正确终止。显然，我在这里缺少一些基本的东西？**

您缺少的是默认情况下 express 保持连接打开（HTTP keep-alive）以供重用。所以，当有一个（最近的）请求时，事件循环中仍然有一些东西，这就是你的应用程序没有关闭的原因。

使用`process.exit()`会起作用，但就像发送另一个^C，并且可能隐藏仍然有其他东西打开（例如数据库连接）的事实。当事件循环中没有任何内容时，您的应用程序应该关闭。

因此，我修改了您的示例，在连接上设置了 5 秒保持活动状态，以便在合理的时间内正常关闭。

```
var express = require('express');

var serverPort = 3000;
var app = express();
var server = app.listen(serverPort);

// HTTP Keep-Alive to a short time to allow graceful shutdown
server.on('connection', function (socket) {
  socket.setTimeout(5 * 1000);
});

// Handle ^C
process.on('SIGINT', shutdown);

// Do graceful shutdown
function shutdown() {
  console.log('graceful shutdown express');
  server.close(function () {
    console.log('closed express');
  });
}

console.log('running server: http://localhost:' + serverPort);
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-26T14:19:40.910

我正在使用这段代码：

```
server.close(() => {
  process.exit(0)
}) 
```

# iphone - 当任何游戏使用opengl运行时我想要捕获屏幕

> ID：14372292
> 
> 赞同：0
> 
> 时间：2013-01-17T04:39:16.320
> 
> 标签：iphone, opengl-es

> **可能重复：**
> [为什么 glReadPixels() 在 iOS 6.0 中的此代码中失败？](https://stackoverflow.com/questions/12528365/why-is-glreadpixels-failing-in-this-code-in-ios-6-0)

我正在使用 OpenGL 开发游戏，需要在最佳拍摄时截屏并上传 Facebook，但是当我截屏时，它只有黑屏。我所做的 ？我还在链接中使用代码： [以编程方式获取 UIview+glview](https://stackoverflow.com/questions/6197137/take-screen-programmatically-of-uiviewglview) 和类似代码的屏幕，但没有成功。

我正在起诉代码：http: [//developer.apple.com/library/ios/#qa/qa1704/_index.html](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)

但是所有代码都会在模拟器中生成图像而不是在设备中（在设备中只有黑色或白色）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:17:04.223

试试这个，这将截取视图并保存到设备相册中。

```
-(IBAction)captureScreen:(id)sender
{
    UIGraphicsBeginImageContext(self.view.bounds.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *snapImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(snapImage, nil, nil, nil);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:41:07.750

如果您想截屏，也可以尝试使用该代码并检查：

```
 CGRect screenRect = [[UIScreen mainScreen] bounds];
    UIGraphicsBeginImageContextWithOptions(screenRect.size, NO, 0.0);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

# entity-framework - 使用 Entity Framework 5 与 Oracle 11g 对话，为每个会话执行 SQL Alter 命令

> ID：14372297
> 
> 赞同：4
> 
> 时间：2013-01-17T04:39:48.250
> 
> 标签：entity-framework, oracle11g, entity-framework-5, dbcontext

我需要在每个数据库会话开始时执行一些 SQL 命令。我通过 DbContext 使用 Entity Framework 5 与 Oracle 11g 数据库对话。

我想执行：

```
ALTER SESSION SET NLS_COMP=ANSI;
ALTER SESSION SET NLS_SORT=BINARY_CI; 
```

在会话创建开始时进行不区分大小写的搜索。
我该怎么做才能做到最好？

我已将命令放在 dbContext 的构造函数中，但只有简单的单元测试，它似乎确实有效。但不确定这是否是正确的做法

```
public partial class Entities : DbContext
{
    public Entities()
        : base("name=Entities")
    {
        this.Database.ExecuteSqlCommand("ALTER SESSION SET NLS_COMP=ANSI");
        this.Database.ExecuteSqlCommand("ALTER SESSION SET NLS_SORT=BINARY_CI");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-27T10:10:32.110

如果有人正在阅读此内容，则不，正确的方法是在连接打开时触发以下行：

```
public Entities()
    : base("name=Entities")
{        

    ctx.Database.Connection.StateChange += Connection_StateChange;
    ...
}

    private void Connection_StateChange(object sender, StateChangeEventArgs e)
    {
        if (e.OriginalState == ConnectionState.Open || e.CurrentState != ConnectionState.Open)
            return;

       this.Database.ExecuteSqlCommand("ALTER SESSION SET NLS_COMP=ANSI");

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-15T00:46:26.673

你可以使用 Database.Connection.StateChange 方法

```
 public AtomContext(string nameOrConnectionString)
        : base(nameOrConnectionString)
    {
        this.Database.Connection.StateChange += Connection_StateChange;
    }

    void Connection_StateChange(object sender, StateChangeEventArgs e)
    {
        if (e.OriginalState == ConnectionState.Open || e.CurrentState != ConnectionState.Open)
            return;

        IDbConnection connection = ((EntityConnection)((IObjectContextAdapter)this).ObjectContext.Connection).StoreConnection;
        using (IDbCommand command = connection.CreateCommand("ALTER SESSION SET NLS_LANGUAGE=TURKISH"))
            command.ExecuteNonQuery();

        using (IDbCommand command = connection.CreateCommand("ALTER SESSION SET NLS_COMP = LINGUISTIC"))
            command.ExecuteNonQuery();

        using (IDbCommand command = connection.CreateCommand("ALTER SESSION SET NLS_SORT=TURKISH_AI"))
            command.ExecuteNonQuery();
    } 
```

[entityframework](/questions/tagged/entityframework "显示标记为“实体框架”的问题") [ef6](/questions/tagged/ef6 "显示标记为“ef6”的问题") [oracle](/questions/tagged/oracle "显示标记为“oracle”的问题") [dbcontext](/questions/tagged/dbcontext "显示标记为“dbcontext”的问题")[会话](/questions/tagged/session "显示标记为“会话”的问题")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:16:03.137

另一个选项是“LOGON TRIGGER ON SCHEMA”。但是您是否强制 DBA 创建它是值得怀疑的。登录触发器被认为是“危险的”。

# c# - 如何在xml文件中插入值

> ID：14372298
> 
> 赞同：-3
> 
> 时间：2013-01-17T04:39:54.160
> 
> 标签：c#, asp.net, xml

我正在使用一个 xml 文件，其内容如下所示

```
<Invoices>
   <Invoice>
      <Type>[Type]</Type>
      <Contact></contact>
   </Invoice>
<Invoices> 
```

在我的课堂上，我想用对象中的数据填充 xml 内容，我想用 obj.type 替换 [type]`<Type>[Type]</Type>`我如何实现这一点。只是想要一个想法。

这是我的代码：

```
foreach (XmlNode pnode in xmlParentNode)
{
    pnode.InnerText = objInvoice.Invoice_type;
    xmlRequestNode = pnode.SelectNodes("Contact");
    // var app = xdoc.Root.Descendants("Appliance").SingleOrDefault(e => (string)e.Element("Name") == applianceName);
    foreach (XmlNode item in xmlRequestNode)
    {
        if (item.Name == "ContactNumber")
        {
            item.InnerText = objInvoice.ContactNumber.ToString();
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:56:21.723

这个怎么样：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xmlString);

foreach (XmlNode typeNode in doc.SelectNodes("/Invoices/Invoice/Type[. = '[Type]']"))
{
    typeNode.InnerText= obj.type;
}

string modifiedXml = doc.OuterXml; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T04:49:58.203

```
XmlDocument doc = new XmlDocument();
doc.Load(path);

foreach (XmlNode node in doc.GetElementsByTagName("Type[. = '[Type]']"))
    node.InnerText = "[Obj.Type]";

doc.Save(path); 
```

# c# - Facebook C# SDK 批量请求提要，带有用于照片数据的 object_id

> ID：14372301
> 
> 赞同：1
> 
> 时间：2013-01-17T04:40:17.137
> 
> 标签：c#, facebook, graph, batching

我正在使用 C# Facebook SDK 向 Facebook 查询 /home 提要，并且提要包含照片。提要中的“图片”链接是低分辨率的，所以我必须从提要中查找照片的“object_id”才能获得高分辨率版本。

这就是我想要完成的

1.  获取 /home 饲料
2.  从 /home 响应中的所有“object_id”中，获取“object_id”

    ```
     Common._fb.BatchTaskAsync(new[]{
            new FacebookBatchParameter(HttpMethod.Get, "/me", new Dictionary<string, object> { { "limit", 25 }, {"access_token", Common._fb.AccessToken} }),
            new FacebookBatchParameter("/me/home", new { limit = 25 }) { Data = new { name = "home-feed", omit_response_on_success = false } },
            new FacebookBatchParameter(HttpMethod.Get, "/{result=home-feed:$.data.*.object_id}", new { limit = 25 }),                
            new FacebookBatchParameter("/me/error")}); 
    ```

我遇到的问题是 object_id 调用失败，但出现以下异常：

{"error":{"message":"(#803) Some of the aliases you requested do not exist: 432468803491390,10151350857109036,388654974561669,197117360426100,443878372332478,445366662199631,457265447662406,475836539118390,474145425981640,363838440380681","type": "OAuthException","code":803}} 对象 {Facebook.JsonObject}

这是第一次调用的数据的样子：

```
"type": "photo", "status_type": "shared_story", "object_id": "379861798777414", 
```

在graph API中，object_id可以这样直接查询：/379861798777414

```
id": 
"379861798777414", 
  "from": 
{
    "category": 
"Automobiles and parts", 
    "name": 
"Legendary Speed Inc.", 
"id": 
"142234555873474"
  }, 
  "name": 
"FOR SALE:\nClick the link for Price and Info\nhttp://www.legendaryfind.com/cars/pin/38000/", 
  "picture": 
"https://photos-b.xx.fbcdn.net/hphotos-ash4/603137_379861798777414_485849814_s.jpg", 
  "source": 
"https://sphotos-b.xx.fbcdn.net/hphotos-ash4/603137_379861798777414_485849814_n.jpg", 
  "height": 
265, 
  "width": 
400, 
  "images": 
[ 
{
 "height": 1356, 
 "width": 2048, 
"source": "https://sphotos-b.xx.fbcdn.net/hphotos-ash4/s2048x2048/603137_379861798777414_485849814_n.jpg"
} 
```

我不知道为什么，但我无法像这样从批处理参数中调用 object_id。有点卡在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:44:21.130

在发现 FQL 之后，图调用已成为过去。FQL 的新代码在执行此操作时更快、更高效：

```
stream = "SELECT post_id, actor_id, created_time, message, attachment FROM stream WHERE filter_key IN ( SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed')", //WHERE source_id = me()
users = "SELECT uid, name from user WHERE uid IN (SELECT actor_id FROM #stream)",
photos = "SELECT images, caption, like_info FROM photo WHERE pid IN (SELECT attachment.fb_object_id FROM #stream)" 
```

# sql - Sql查询从3个表中获取结果

> ID：14372302
> 
> 赞同：0
> 
> 时间：2013-01-17T04:40:20.330
> 
> 标签：sql

我有以下表结构。需要从added_date 最近添加的所有表中选择记录。

我正在尝试`titlename, sourcename, description, addde_date`从`table1, table2, table3`最近添加的那些中获取`added_date`。

标题名称和来源名称存储在标题和来源表中。

我在这些表上尝试过联合，但`Table3`内容不同的列。

**表格1**

```
 id   titleid   sourceid     text_content        added_date   -------
    1      15         20         XYzgff       10-10-2012:5:30pm
    2      10         5         gghghggg      10-11-2012:5:30pm 
```

**表2**

```
 id   titleid   sourceid    description     added_date   -------
    1       6         8         fhjjjjjkk     11-04-2012:5:30pm 
    2      10         5         gghghggg      10-11-2012:5:30pm 
```

**表3**

```
 id       url         Title     Description       added_date       -------------
    1       ggggg        fhhh        llllll         31-04-2012:5:30pm
    2       kkkkkk       ttttt       kkkkkk         10-11-2012:5:30pm 
```

**标题**表：

```
 titleid      title_name
      5            lgsfsgsf
      6            lkklgyy
      10           tyyiugj
      15          lklklklkl 
```

**源**表：

```
 sourceid      source_name
       5            jlkjljlj
       8            ghhhhhhh
       20           hhhhhhhf
       6            llllllll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:46:22.907

你应该使用`UNION`. 试试这个（未经测试）：

```
SELECT t.title_name, s.source_name, t1.text_content, t1.added_date   
FROM Table1 t1
JOIN Title T 
   ON t1.TitleId = T.TitleId
JOIN Source S 
   ON t1.SourceId = S.SourceId
UNION
SELECT t.title_name, s.source_name, t2.description, t2.added_date   
FROM Table2 t2
JOIN Title T 
   ON t2.TitleId = T.TitleId
JOIN Source S 
   ON t2.SourceId = S.SourceId
UNION
SELECT t.title_name, s.source_name, t3.description, t3.added_date   
FROM Table3 t3
JOIN Title T 
   ON t3.TitleId = T.TitleId
JOIN Source S 
   ON t3.SourceId = S.SourceId 
```

好吧，我刚刚意识到您的 Table3 中没有 SourceId 或 TitleId。无法获得该信息，但您仍然可以：

```
SELECT DISTINCT Title_Name, Source_Name, Text_Content, Added_Date
FROM 
(
   SELECT t.title_name, s.source_name, t1.text_content, t1.added_date   
   FROM Table1 t1
   JOIN Title T 
     ON t1.TitleId = T.TitleId
   JOIN Source S 
     ON t1.SourceId = S.SourceId
   UNION
   SELECT t.title_name, s.source_name, t2.description, t2.added_date   
   FROM Table2 t2
   JOIN Title T 
     ON t2.TitleId = T.TitleId
   JOIN Source S 
     ON t2.SourceId = S.SourceId
   UNION
   SELECT t3.title, 'Unknown', t3.description, t3.added_date   
   FROM Table3 t3
) t
ORDER BY added_date 
```

# android - 使用 setText 导致 Source not found

> ID：14372304
> 
> 赞同：0
> 
> 时间：2013-01-17T04:40:35.040
> 
> 标签：android

我有一个程序可以将 USB 数据记录到我创建的文件中，并且运行良好。我正在尝试使用 setText 显示其中的一些数据，但是 setText 正确执行一次，然后在下次调用它时出现 Source not found 崩溃。

我在此运行中将 USB 数据保存到我的文件中：

```
 @Override
public void run() {
    ByteBuffer buffer = ByteBuffer.allocate(64);
    UsbRequest request = new UsbRequest();
    request.initialize(mConnection, mEndpointIntr);
    while (true) {
        request.queue(buffer, 64);
        if (mConnection.requestWait() == request) {
            znum.setText("help"); 
            savetofile("GOT data " + System.currentTimeMillis());
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
            }
        } else {
            Log.e(TAG, "requestWait failed, exiting");
            savetofile("10 requestWait failed, exiting");
            break;
        }
    }
} 
```

如果我删除上面的 setText 行，程序运行愉快，将我的数据保存到文件中。当我运行上面的代码时，程序崩溃了，我得到一个 Source not found 指示。

如果我在 savetofile 行上中断启动程序，则布局会更新为 tvZnum 设置以提供帮助。

然后我逐步执行代码并返回到 setText 行。

一切都很好，直到我第二次执行 setText，然后它崩溃了。

当它崩溃时，它似乎在 android.view.ViewRootImpl.checkThread() 第 4077 行。我试图在我的帖子中添加屏幕截图，但我还没有足够的声望点。

我声明：

```
 TextView znum; 
```

在 OnCreate 中有这个：

```
 znum = (TextView) findViewById(R.id.tvZnum); 
```

并且 tvZnum 在启动器和 R 中显示良好。

我知道答案一定很简单，但很简单我想不通。

有什么想法吗？

谢谢，戴尔

编辑：这是 logCat（对我来说是希腊语，我不知道如何在这里格式化）：

> I/dalvikvm（1529）：threadid=3：对信号 3 做出反应
> 
> I/dalvikvm（1529）：将堆栈跟踪写入“/data/anr/traces.txt”
> 
> I/System.out(1529): 等待调试器解决...
> 
> I/System.out(1529): 等待调试器解决...
> 
> I/Process (167)：发送信号。PID：1529 SIG：3
> 
> I/dalvikvm（1529）：threadid=3：对信号 3 做出反应
> 
> I/System.out(1529): 等待调试器解决...
> 
> I/dalvikvm（1529）：将堆栈跟踪写入“/data/anr/traces.txt”
> 
> I/System.out(1529): 等待调试器解决...
> 
> I/System.out(1529): 等待调试器解决...
> 
> I/Process (167)：发送信号。PID：1529 SIG：3
> 
> I/dalvikvm（1529）：threadid=3：对信号 3 做出反应
> 
> I/dalvikvm（1529）：将堆栈跟踪写入“/data/anr/traces.txt”
> 
> I/System.out(1529): 等待调试器解决...
> 
> I/System.out(1529): 等待调试器解决...
> 
> I/Process (167)：发送信号。PID：1529 SIG：3
> 
> I/dalvikvm（1529）：threadid=3：对信号 3 做出反应
> 
> I/dalvikvm（1529）：将堆栈跟踪写入“/data/anr/traces.txt”
> 
> I/System.out(1529): 等待调试器解决...
> 
> I/System.out(1529): 等待调试器解决...
> 
> I/System.out（1529）：调试器已解决（1359）
> 
> I/Process (167)：发送信号。PID：1529 SIG：3
> 
> I/dalvikvm（1529）：threadid=3：对信号 3 做出反应
> 
> I/dalvikvm（1529）：将堆栈跟踪写入“/data/anr/traces.txt”
> 
> D/dalvikvm（1529）：threadid=1：撤消后仍然挂起（sc=1 dc=1）
> 
> D/ProMeasure2DActivity（1529）：意图：意图{act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.android.missilelauncher/.MissileLauncherActivity}
> 
> D/ProMeasure2DActivity（1529）：setDevice UsbDevice[mName=/dev/bus/usb/001/002，mVendorId=1240，mProductId=63，mClass=0，mSubclass=0，mProtocol=0，mInterfaces=[Landroid.os。可打包；@40f9e3b0]
> 
> D/ProMeasure2DActivity（1529）：打开成功
> 
> D/UsbRequestJNI（1529）：初始化
> 
> D/ViewRootImpl（1529）：pckname = com.android.missilelauncher
> 
> I/Process (167)：发送信号。PID：1529 SIG：3
> 
> I/dalvikvm（1529）：threadid=3：对信号 3 做出反应
> 
> D/dalvikvm（1529）：threadid=11：撤消后仍然挂起（sc=1 dc=1）
> 
> I/dalvikvm（1529）：将堆栈跟踪写入“/data/anr/traces.txt”
> 
> I/ActivityManager（167）：显示 com.android.missilelauncher/.MissileLauncherActivity：+3s791ms
> 
> I/ActivityManager(167): 不再需要 com.android.email (pid 1266): hidden #16
> 
> D/Finsky (696): [1] 5.onFinished: 安装状态复制成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:41:11.223

根据我在阅读 Luksprog 的评论后所做的研究，以下是似乎可行的实际代码解决方案：

1.  删除 znum = (TextView) findViewById(R.id.tvZnum); 来自我的 OnCreate。
2.  替换 znum.setText("help"); 使用此代码：

    ```
     this.runOnUiThread(new Runnable() {
                public void run() {
                    ((TextView) findViewById(R.id.tvZnum)).setText("help");
                }
            }); 
    ```

    我相信这样做的结果是将 setText 操作添加到主 UI 线程中的队列中。

# regex - 如何使用 sed 或 grep 仅提取格式化的日期字段？

> ID：14372305
> 
> 赞同：0
> 
> 时间：2013-01-17T04:40:42.170
> 
> 标签：regex, bash, sed, awk, grep

我需要一个 grep 或 sed 语句，它只会从该语句中取出日期：

```
echo 'asdfdsfa asdfs 12-Dec-13 asdasd asdf 11-Jan-12 asdasd' 
```

所以答案应该是这样的：

```
12-Dec-13 11-Jan-12 
```

我已经走得够远了`12-Dec-13 asdasd asdf 11-Jan-12`，但我无法删除日期之间的内容。是否可以使用 sed 语句来保留第一个单词和最后一个单词，使用空格来显示哪个是最后一个单词？结果应该保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:54:00.290

### 使用 POSIX 字符类

一组 POSIX 字符类将匹配您想要的文本。例如：

```
\b[[:digit:]]{2}-[[:upper:]][[:lower:]]{2}-[[:digit:]]{2}\b 
```

### 样本输入/输出

以下管道将使用 GNU Grep 仅提取相关文本，然后连接日期：

```
$ echo 'asdfdsfa asdfs 12-Dec-13 asdasd asdf 11-Jan-12 asdasd' |
    grep -Eo '\b[[:digit:]]{2}-[[:upper:]][[:lower:]]{2}-[[:digit:]]{2}\b' |
    xargs
12-Dec-13 11-Jan-12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:38:18.313

```
 grep -o "[0-9]\{2\}-[^0-9]\{3\}-[^a-z]\{2\}" file | sed "N;s/\n/ /g" 
```

2013 年 12 月 12 日 2012 年 1 月 11 日

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T23:53:33.113

试试这个：

```
echo 'asdfdsfa asdfs 12-Dec-13 asdasd asdf 11-Jan-12 asdasd'  | sed 's: :\n:g' | grep ^[0-9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:22:35.473

```
perl -lne '@a=/([\d]+-[a-zA-Z]{3}-[\d]+)/g;print "@a"' 
```

测试：

```
> echo 'asdfdsfa 12-Dec-13 asdf 11-Jan-12 asdasd' | perl -lne '@a=/([\d]+-[a-zA-Z]{3}-[\d]+)/g;print "@a"'
12-Dec-13 11-Jan-12 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T04:48:00.307

使用以下

```
echo 'asdfdsfa asdfs 12-Dec-13 asdasd asdf 11-Jan-12 asdasd' | sed 's/ /\n/g' |grep '-' | tr -d '\n' |sed 's/$/ \n/g' 
```

输出是

12-Dec-1311-Jan-12

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T04:45:09.353

单程：

```
$ echo 'asdfdsfa asdfs 12-Dec-13 asdasd asdf 11-Jan-12 asdasd' | sed 's/.*\(..-...-..\).*\(..-...-..\).*/\1 \2/'
12-Dec-13 11-Jan-12 
```

要使搜索模式更具体地用于数字和字母：

```
$ echo 'asdfdsfa asdfs 12-Dec-13 asdasd asdf 11-Jan-12 asdasd' | sed 's/.*\([0-9][0-9]-[a-zA-Z]\{3\}-[0-9][0-9]\).*\([0-9][0-9]-[a-zA-Z]\{3\}-[0-9][0-9]\).*/\1 \2/'
12-Dec-13 11-Jan-12 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T07:13:28.747

我建议`date -d`。所以它甚至会验证日期。

```
$ cat string 
asdfdsfa asdfs 12-Dec-13 asdasd asdf 11-Jan-12 asdasd

$ for i in `cat string`; do date -d $i &>/dev/null && echo $i; done
12-Dec-13
11-Jan-12 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-17T05:27:00.717

用 awk 试试

`awk '{for(i=1; i<NF; ++i){if ($i ~ /[0-9]+[-\w]*/) print $i}}' temp.txt`

适用于任意数量的行和列

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-17T14:17:53.713

这可能对您有用（GNU sed）：

```
sed -r 'H;g;:a;s/\s*\n$//;t;s/\n(..-...-..)\b/\1 \n/;ta;s/\n([^0-9]+)/\n/;ta' file 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-15T11:01:52.010

我可以访问日志，其中日期格式愚蠢：[30/Jun/2013:08:00:45 +0200]

但我需要将其显示为：30/Jun/2013 08:00:45

问题是在我的 grep 语句中使用“OR”时，我在 2 个分隔行上收到了 2 个匹配表达式。

这是解决方案：

`grep -in myURL_of_interest *access.log | \ grep -Eo '(\b[[:digit:]]{2}/[[:upper:]][[:lower:]]{2}/[[:digit:]]{4}|[[:digit:]]{2}:[[:digit:]]{2}:[[:digit:]]{2}\b)' \ | paste - - -d" " > MyAccess.log`

我希望它有帮助:)

# java - 将数据从 API 加载到 HBase

> ID：14372310
> 
> 赞同：0
> 
> 时间：2013-01-17T04:41:11.117
> 
> 标签：java, hadoop, hbase, bigdata, sqoop

我正在使用一项 3rd 方服务，它聚合数据并公开 REST API 以访问它。

我现在正在尝试获取这些数据并将其加载到我们的本地 HBase 集群上。我创建了一个 java 应用程序，它从该 3rd 方服务中获取数据，对其进行处理并使用 HBase 客户端 API 将其加载到我们的集群上。对于这个应用程序，我必须手动运行它，并且不确定有多少 HBase 客户端 API 可以有效地加载批量数据。

我遇到了 Sqoop 和 Cascading-dbmigrate 从 RDBMS 进行批量传输。我的问题是：是否有任何类似的工具可以从 REST API 进行批量数据传输？另外，定期同步数据。

感谢 ArunDhaJ [http://arundhaj.com](http://arundhaj.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:10:31.593

REST API 不像 RDBMS 那样标准化，据我所知，没有工具可以神奇地从您的 API 加载到 HBase，您必须围绕它构建一些东西。对于这种对 HBase 的重载，一个好的做法是使用 HBase 批量加载，这将比简单地使用 HBase API 使用更少的 CPU 和网络资源。这可以通过几个步骤完成：

1.  使用`HFileOutputFormat`as使用 Map/Reduce 作业准备数据`OutputFormat`。这可确保您的作业输出被编写为[HFile](http://blog.cloudera.com/blog/2012/06/hbase-io-hfile-input-output/)，这是一种非常有效的加载到 HBase 的格式。你可以这样做：

    ```
    job.setOutputFormatClass(HFileOutputFormat.class);
    HFileOutputFormat.setOutputPath(job, path); 
    ```

2.  使用命令行工具加载数据，该工具`completebulkload`会处理所有事情，因此您甚至无需担心区域服务器。这可以像这样手动完成：

    ```
    hadoop jar hbase-VERSION.jar completebulkload [-c /path/to/hbase/config/hbase-site.xml] /user/todd/myoutput mytable 
    ```

    我相信如果您使用此步骤会自动运行，`HFileOutputFormat`因此您甚至可能不需要自己执行此步骤。

[有关此](http://hbase.apache.org/book/arch.bulk.load.html)过程的更多详细信息

将所有内容联系在一起所需要做的只是编写一个程序，该程序将从您的 API 获取数据并加载到 HDFS 中。

# php - Twitter 应用程序未将 localhost 和 127.0.0.1 作为 CallbackUrl

> ID：14372311
> 
> 赞同：9
> 
> 时间：2013-01-17T04:41:12.633
> 
> 标签：php, twitter, twitter-oauth

我正在我的本地主机环境中开发一个应用程序。我想在 PHP 中实现 Twitter OAuth 功能的地方。所以我只是去了 dev.twitter.com 并试图创建一个应用程序，但它不允许我`Callback URL`通过`localhost`或`127.0.0.1`.

**1）首先我尝试作为本地主机**

![回调 URL 作为 localhost](../Images/ca2be1b84e731283ce0e443e4ac7e106.png)

**2）然后我尝试作为 localhost/demoproject**

![回调 URL 作为带有项目名称的 localhost](../Images/a82d75d5fbffaca66285c0926aea463d.png)

**3）在我用项目名称尝试IP之后**

![回调 URL 作为 IPAddress 和项目名称](../Images/fdd599fa81c26ec74ed793a8ffe9fafc.png)

但它将其视为无效的回调/url 格式。

![错误](../Images/3a2baddb9cce4be559ae4468f4ba70cc.png)

有什么办法可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T17:51:42.163

对于 localhost，请在您的 dev.twitter.com 应用程序设置中使用以下 URL：

```
Website URL: http://127.0.0.1:8000/twitter/oauth
Callback URL: http://127.0.0.1:8000/twitter/oauth 
```

不用担心，这些只是占位符，只要您的代码在连接时发送正确的回调 URL，就应该可以正常工作...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T04:46:05.420

您可以提供仅用于开发 Twitter 应用程序的有效 URL。应该是本地测试`http://127.0.0.1/folder_name`。

如果两者都不起作用，希望本[主题](https://dev.twitter.com/discussions/5749)对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T16:49:46.257

[前 Twitter 员工的回答 - 见 @episod 的帖子](https://twittercommunity.com/t/why-cant-i-use-localhost-as-my-oauth-callback/708#post_5)

事实证明，无论如何添加本地主机地址并不是您应该为开发做的事情。在 OAuth 握手中，您的应用程序应提供一个回调 URL，该 URL 将覆盖配置页面上配置的 URL。

解决方案是简单地在那里添加任何 URL 作为占位符。

# html - 将元素并排放置

> ID：14372312
> 
> 赞同：0
> 
> 时间：2013-01-17T04:41:17.907
> 
> 标签：html, css

我有一个小问题。我正在尝试将一些图像并排放置，所以它看起来像一个投资组合。实现这一点的最佳方法是什么。先感谢您。你可以参考jsfiddle：

[http://jsfiddle.net/cntra/E7Ydz/](http://jsfiddle.net/cntra/E7Ydz/)

这个 [HTML] 如下：

```
<div id="portfolio" style="height: 3020px;">

 <div id="project" class="cms design html-css " data-col="1" data-row="0" style="right: 0px; opacity: 1; top: 0px;">
    <div id="workEntry1" class="workEntry">

       <div id="thumbAttachment">
                    <div id="inThumb">
                    <img src="http://www.enjoythis.co.uk/wp-content/files_mf/work_thumbnail275.jpg">
        </div>

         <div id="blackCross"> <a href="http://www.enjoythis.co.uk/jane-stockdale/"><img src="http://www.enjoythis.co.uk/wp-content/themes/enjoyThis/images/thumb_transparency.png"></a></div>

          </div>

        <!--<div id="attachmentShadowThumb"></div>-->

        <div id="workTitle">
                </div>
            <div id="workTags">

            </div>
      </div>
    </div>

          <div id="project" class="design illustration html-css " data-col="2" data-row="0" style="right: 0px; opacity: 1; top: 0px;">
    <div id="workEntry2" class="workEntry">

       <div id="thumbAttachment">
                    <div id="inThumb">
                    <img src="http://www.enjoythis.co.uk/wp-content/files_mf/work_thumbnail2.jpg">
        </div>

         <div id="blackCross"> <a href="http://www.enjoythis.co.uk/street-child-world-cup-i-am-somebody/"><img src="http://www.enjoythis.co.uk/wp-content/themes/enjoyThis/images/thumb_transparency.png"></a></div>

          </div>

        <!--<div id="attachmentShadowThumb"></div>-->

        <div id="workTitle">
      </div>
            <div id="workTags">                 

            </div>
      </div>
    </div>
          <div id="project" class="app database design " data-col="0" data-row="1" style="right: 0px; opacity: 1; top: 0px;">
    <div id="workEntry3" class="workEntry">

       <div id="thumbAttachment">
                    <div id="inThumb">
                    <img src="http://www.enjoythis.co.uk/wp-content/files_mf/pgtips_thumb37.jpg">
        </div>

         <div id="blackCross"> <a href="http://www.enjoythis.co.uk/pg-tips-vs-january/"><img src="http://www.enjoythis.co.uk/wp-content/themes/enjoyThis/images/thumb_transparency.png"></a></div>

          </div>

        <!--<div id="attachmentShadowThumb"></div>-->

        <div id="workTitle">
        </div>
            <div id="workTags">

            </div>
      </div>
    </div> 
```

和[css]：

```
#project{
    float:left;
    position:relative;
    padding: 0px 0px 0px 2px;
    height:250px;
    width:325px;
    display: inline;
}

.workEntry{ 
    width:310px;
    overflow:hidden;
}

#thumbAttachment{
    float:left;
    width: 310px;
    height:200px;
    overflow: hidden;
}

#inThumb{
    float:left;
}

#blackCross{
    float:left;
    width: 310px;
    height:200px;
    margin-top:-200px;
    khtml-opacity:0;
    -moz-opacity:0;
    -ms-filter:"alpha(opacity=0)";
    filter:alpha(opacity=0);
    opacity:0;

}

#blackCross:visited{

    khtml-opacity:0;
    -moz-opacity:0;
    -ms-filter:"alpha(opacity=0)";
    filter:alpha(opacity=0);
    opacity:0;
}

#blackCross:hover{
    khtml-opacity:1;
    -moz-opacity:1;
    -ms-filter:"alpha(opacity=100)";
    filter:alpha(opacity=100);
    opacity:100;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:44:55.253

```
.workEntry{ 
    width:310px;
    overflow:hidden;
    float:left;//make each element float left
}

#project{
    float:left;
    position:relative;
    padding: 0px; //no padding should be here
    height:250px;
    width:310px;//should be same size as .workEntry
    display: inline;
    overflow:hidden;//trick to ensure all elements fit in portfolio
} 
```

您也可以将其放在工作条目列表的末尾，以阻止以下元素脱节：

```
<div style="clear:both;"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T05:15:26.617

您将 div.project 的宽度设置为 325px，但图像只有 310px。

[http://jsfiddle.net/E7Ydz/2/](http://jsfiddle.net/E7Ydz/2/)

```
#project{
float:left;
position:relative;
padding: 0px 0px 0px 2px;
height:200px;
width:309px;
display: inline; 
```

}

# javascript - 如何将所有元素移动到另一个包装元素？

> ID：14372313
> 
> 赞同：0
> 
> 时间：2013-01-17T04:41:23.443
> 
> 标签：javascript, jquery, loops, each

我有两个列表（`#product`和`#cart`）。人们可以单击一个项目并将其一次移动到第二个列表中。但我希望允许人们将第一个列表中的所有项目添加到第二个列表中。反之亦然——从购物车中删除所有物品。

你能帮我吗？

这是我的html：

```
<h2>Product List</h2>
<a id="add-all">Add all items to cart</a>
<ul id="product">
    <li id="item1">item 1</li>
    <li id="item3">item 3</li>
    <li id="item5">item 5</li>
</ul>

<h2>Shopping Cart</h2>
<a id="remove-all">Remove all items</a>
<ul id="cart">
    <li id="item2">item 2<input type="hidden" name="cartItems" value="item2"></li>
    <li id="item4">item 4<input type="hidden" name="cartItems" value="item4"></li>
</ul> 
```

正如你在上面看到的，当一个项目被单独添加到购物车时，我`.append`是一个`input`具有相同 id 的标签。

粗略的 jQuery 看起来像这样：

```
$('#product').on('click','li', function() {
    var itemID = $(this).attr('id');
    var itemLabel = $(this).html();
    var newItemLabel = itemLabel + '<input type="hidden" name="cartItems" value="' + itemID + '">';
    $(this).remove();
    $('#cart').append('<li id="' + itemID + '">' + newItemLabel + '</li>');
}); 
```

这一次工作得很好。但是我一直试图遍历产品列表中的每个项目以添加全部（或全部删除）。

你能为我指出正确的方向吗？

特别是因为我需要为每个列表项添加一个输入元素。所以我不能只使用`html()`of`#product`和 append to`#cart`而不遍历每一个并附加一个输入。

**Tl;博士**

1.  `#add-all`click 应该将所有项目移入`#product`到`#cart`，附加`input`到每个
2.  `#remove-all`点击应该将所有项目移入`#cart`，`#product`删除所有`input`标签
3.  如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:53:25.467

这将适用于所有

```
$('#add-all').on('click', function () {
    $(this).siblings('ul').find('li').each(function (index, item) {
    $(item).append("<input type=\"hidden\" name=\"cartItems\" value=\"" + $(item).attr('id') + "\"/>");
    $('#cart').append($(item));
  });
}); 
```

您可以遵循类似的逻辑来删除所有内容。

检查这个小提琴：http: [//jsfiddle.net/hcXpY/](http://jsfiddle.net/hcXpY/)

检查此小提琴以删除所有代码：http: [//jsfiddle.net/hcXpY/2/](http://jsfiddle.net/hcXpY/2/)

```
$('#remove-all').on('click', function () {
  $(this).siblings('ul').find('li').each(function (index, item) {
    $(item).find('input').remove();
    $('#products').append($(item));
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:50:46.137

迭代有什么问题？

```
$('#product li').each( function() {
    var itemID = $(this).attr('id');
    var itemLabel = $(this).html();
    var newItemLabel = itemLabel + '<input type="hidden" name="cartItems" value="' + itemID + '">';
    $(this).remove();
    $('#cart').append('<li id="' + itemID + '">' + newItemLabel + '</li>');
    removeDuplicatesFromCart();
});

function removeDuplicatesFromCart()
{
 //now remove any duplicates if there are in the carts
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T04:54:44.550

你可以做这样简单的事情：

```
$("#add-all").click(function() {
    $("#products").children().appendTo("#cart");
});
$("#remove-all").click(function() {
    $("#cart").children().appendTo("#products");
}); 
```

然后，您可以添加添加/删除`<input>`标签的代码，或者只保留输入标签，并在不在购物车中时通过 CSS 将其隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T04:56:18.097

尝试为每个需要删除的产品 li 添加一个 remove 类。然后循环遍历 products 的所有子节点，如果 li 有一个 remove 类，则将其添加到购物车。

添加类

```
$('ul#products li').click( function() {
    $(this).addClass('remove');
}); 
```

循环播放

```
$('ul#products li').each( function() {
    if($(this).hasClass('remove')){
       $(this).appendTo('#cart');
    }
}); 
```

您需要一些东西来触发上述按钮吗？

# perl - Perl，确定 STDIN 来自哪里

> ID：14372320
> 
> 赞同：2
> 
> 时间：2013-01-17T04:42:20.730
> 
> 标签：perl, cron, stdin, stderr

我们有许多通过相当大的网络收集各种统计数据的 cron 作业。这些 cron 作业中的大多数都没有得到很好的监控。我想编写一个 perl 脚本，我们可以将这些作业的输出通过管道传输到，如下所示：

```
5 * * * * collectstats.pl 2>&1 1>/dev/null | scriptwatcher.pl 
```

这个想法是来自 collectstats.pl 的 stdout 被丢弃，stderr 通过管道传输到 scriptwatcher.pl。然后，第二个脚本可以在出现错误时采取适当的措施，很可能给我发电子邮件。通过快速测试，这是可行的，除了在 scriptwatcher 中我需要知道发送错误的脚本的名称。只需要一点点信息，我想做的一切都成为可能。

此外，是否可以同时将标准输出从 collectstats 传输到另一个脚本？即一个脚本的2个管道？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T05:22:29.007

把它转过来做：

```
5 * * * * scriptwatcher.pl collectstats.pl any extra args 
```

并让您的 scriptwatcher.pl 处理重定向并运行其参数中给出的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:31:53.320

使用该行：

```
5 * * * * collectstats.pl 2>&1 1>/dev/null | scriptwatcher.pl collectstats.pl 
```

也就是说，告诉脚本观察者它正在观察哪个脚本。

或者，正如[ysth](https://stackoverflow.com/users/17389/ysth)在他的[回答](https://stackoverflow.com/a/14372657/15168)中所建议的那样，已经`scriptwatcher`运行了它应该观看的脚本，比如`nohup`等`su`可以为您运行其他命令。这避免了您必须两次命名脚本。如果重复是个问题，请选择 ysth 的答案。

对于您的辅助问题：

> 是否可以同时将来自 collectstats 的标准输出通过管道传输到另一个脚本中？

查找[`pee`](https://stackoverflow.com/questions/4656927/is-it-possible-to-distribute-stdin-over-parallel-processes/4658717#4658717)与 tee 平行的命令，但使用进程（因此是`p`）而不是文件。（请注意：“小便命令”不是一个好的 Google 搜索词，但我指向的 URL 是一个 SO 答案，其中包含有关它的更多信息以及指向您可以找到代码的位置的直接链接等。）

# mysql - 在这个 SQL 命令中我需要转义哪些字符？

> ID：14372323
> 
> 赞同：0
> 
> 时间：2013-01-17T04:42:52.290
> 
> 标签：mysql, sql, phpmyadmin

我正在替换 MySQL 数据库中的一些 URL。我担心我需要在更新命令的第一个 url 中转义一些字符。

```
UPDATE wp_posts SET post_content = replace( post_content, 'http://www.website.com/soft/www/test/ck.php?oaparams…o__cb=658ac30cf5__oadest=http%3A%2F%2Fwww.site.com/page.html', 'http://www.newsite.com' ) ; 
```

这应该按原样工作，还是我需要逃避`_`'s 和`%`'s？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:57:39.357

看起来你的代码运行良好。如果它不起作用，请检查表中的数据并查看其存储方式。

这是[SQL 小提琴](http://www.sqlfiddle.com/#!2/d3edb/1)。

祝你好运。

# php - PHP 未设置行为

> ID：14372324
> 
> 赞同：1
> 
> 时间：2013-01-17T04:42:52.790
> 
> 标签：php

我遇到了一些**我**认为很微妙但很酷的 PHP 行为。但我不明白怎么...

```
$test=array('a'=>'c', 'b'=>'c');
unset($test['a']);
var_dump($test); 
```

这打印

```
array(1) { ["b"]=> string(1) "c" } 
```

我本来希望数组被清空。毕竟，**$test['a']**评估为 'c' 所以 unset 函数只看到 'c' 但知道它只是我想要删除的第一个 'c' 值？

我的猜测是interpeter非常聪明，并且在给它的参数内查看数组内部 - 但这纯粹是猜想......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:45:20.417

嗯，没有。`unset`不是函数，它是一种语言结构。因此，它不一定遵循相同的规则。

然而，在这种情况下，它实际上类似于传递引用。它获取对变量的引用，并销毁它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:46:36.197

您实际上正在做的是从数组中销毁（取消设置）键“a” `$test`。所以在该键被销毁后，数组中只存在“b”。

如果您想从数组中删除所有 'c' 的值，请使用[array_diff()](http://ca.php.net/manual/en/function.array-diff.php)。

# file - 带有 PyroCMS 的 Facebook 频道 URL 文件

> ID：14372325
> 
> 赞同：1
> 
> 时间：2013-01-17T04:42:53.007
> 
> 标签：file, .htaccess, pyrocms

我正在使用 PyroCMS 并尝试上传一些我不希望 CMS 知道的静态页面。

在我的服务器上，我有一个名为“static”的文件夹

mydomain.com/static

当我导航到它 PyroDisplays 404 页面。到目前为止还可以，因为我在 pages 模块中没有一个名为 static 的页面。

在我的 Facebook 脚本中，我需要将 channelURL 指向一个 PHP 文件到 mydomain.com/static/channel.php **channel.php**

```
 <?php
 $cache_expire = 60*60*24*365;
 header("Pragma: public");
 header("Cache-Control: max-age=".$cache_expire);
 header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
 ?>
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

**输出**

```
Warning: Cannot modify header information - headers already sent by (output started at /home2/inspire1/public_html/static/channel.php:1) in /home2/inspire1/public_html/static/channel.php on line 3

Warning: Cannot modify header information - headers already sent by (output started at /home2/inspire1/public_html/static/channel.php:1) in /home2/inspire1/public_html/static/channel.php on line 4

Warning: Cannot modify header information - headers already sent by (output started at /home2/inspire1/public_html/static/channel.php:1) in /home2/inspire1/public_html/static/channel.php on line 5 
```

所以我的问题是如何`channel.php`在 PyroCMS 旁边实现文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:31:05.697

这有两个部分。

如果 URL 中的文件是有效的文件或目录，PyroCMS（嗯，Apache）不会尝试向 index.php（我们的前端控制器）发送任何 URL。

所以当你点击`/static`它的时候就会使用它并`/static.php`进入你的文件。他们的规则。

第二个问题看起来您的 PHP 文件中在初始`<?php`标记之前有意外的空白。确保那里没有空格或空行。

# objective-c - RestKit 作为静态库/子项目的一部分

> ID：14372327
> 
> 赞同：1
> 
> 时间：2013-01-17T04:43:27.240
> 
> 标签：objective-c, xcode, static-libraries, restkit

我正在开发自己的静态库，它是 iOS 应用程序（我将其称为 MyApp）的子项目。这个库（我称之为 MySDK）提供了一组对象，这些对象是从 RESTful Web 服务返回的 JSON 结构的实现。我正在尝试使用 RestKit 来处理我的 Web 服务和 MySDK 中的对象之间的映射。

在将 RestKit 添加到 MySDK 之前，我将 MySDK 作为 MyApp 的子项目，并且一切都编译得很好。

然后，我关闭了 MyApp 并打开了 MySDK 项目。我按照此处的说明将 RestKit 添加到 MySDK 项目：[https](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-v0.20.x-as-a-Git-Submodule) ://github.com/RestKit/RestKit/wiki/Installing-RestKit-v0.20.x-as-a-Git-Submodule 。然后，在 MySDK 的一个 .h 文件中，我添加了以下行：

```
#import <RestKit/RestKit.h> 
```

我改变了这一行：

```
@interface MySDKObject : NSObject  { /*...*/ } 
```

至

```
@interface MySDKObject : NSObject<RKObjectLoaderDelegate>  { /*...*/ } 
```

一切都编译得很好。然后，我关闭了 MySDK 项目并重新打开了 MyApp 项目。项目导航器显示了项目之间的这种关系：

*   我的应用
    *   我的SDK
        *   休息套件

在代码编辑器中，我现在收到此错误：

```
#import <RestKit/RestKit.h> 'RestKit/RestKit.h' file not found 
```

奇怪的是，在问题导航器中，我的应用程序目标下会报告此错误消息。

# excel - excel宏间距字符串和格式

> ID：14372329
> 
> 赞同：0
> 
> 时间：2013-01-17T04:44:00.447
> 
> 标签：excel, vba

我在 excel 宏中有以下代码。我需要做的就是在我的字符串和格式中出现的日期字符串之间放置一个空格，但是，如果我删除字符串，我只会得到字符串部分，显然我只会得到日期。

```
filenamestring = "CMC_Rates " & Format(Now(), "yyyymmdd") 
```

有任何想法吗？

这里有更多代码

```
Dim filenamestring As String
Dim location As String
Dim passparam As String

location = Year(DateTime.Now) & "/" & Month(DateTime.Now)

filenamestring = "CMC_Rates " & Format(Now(), "yyyymmdd ") & Format(Range("EffTime").Value, "hhmm AMPM") & ".pdf"

passparam = location & "/" & filenamestring

Call Shell(Environ$("COMSPEC") & " /c \\atlanta2-0\MKTG\Rates\SaveFile.bat " & filenamestring, vbNormalFocus) 
```

SaveFile.bat 里面有这个

```
pscp -batch -pw password filename.xlsx admin@172.17.1.5:/Path/%1 
```

当它打开蝙蝠时，它说参数只是 CMC_Rates，但是如果我取出空间并将它们放在一起，它就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:48:43.593

问题出在这一行：（为了便于阅读而拆分）

```
Call Shell(Environ$("COMSPEC") _
  & " /c \\atlanta2-0\MKTG\Rates\SaveFile.bat " _
  & filenamestring, vbNormalFocus) 
```

当 Excel 调用您的批处理文件时，*COMSPEC*解释器将文件名视为多个参数，因为空格用作分隔符。为了表明文件名是一个参数，而不是多个参数，它需要用引号括起来**"**

这会将行更改为：

```
Call Shell(Environ$("COMSPEC") _
  & " /c \\atlanta2-0\MKTG\Rates\SaveFile.bat " _
  & chr(34) & filenamestring & chr(34), vbNormalFocus) 
```

# php - 为 wordpress 创建多个帐户

> ID：14372331
> 
> 赞同：0
> 
> 时间：2013-01-17T04:44:10.677
> 
> 标签：php, wordpress, passwords

我正在尝试使用定义的 ID 号创建用户数据库。但是，我无法将用户插入数据库的 wordpress 数据库加密密码，

我正在考虑两种方法，但我无法完成

*   在插入 wp_user 表之前生成密码。- 但是我不知道如何生成
*   找一些适合我的插件。-- 不知道哪一个适合插件池

我想问的两个问题 wordpress 密码是如何工作的？任何用于多用户插入的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:52:47.473

您可以在 PHP 文件中使用[PHP md5()](http://php.net/manual/en/function.md5.php)来加密密码，也可以在查询中使用[MySQL MD5()](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)。

如果您在 Wordpress 环境中工作，则可以使用[wp_insert_user()](http://codex.wordpress.org/Function_Reference/wp_insert_user)使用选定的 ID 创建用户。

# android - 我为“singleTask”活动创建了两个实例。是安卓的BUG吗？

> ID：14372332
> 
> 赞同：3
> 
> 时间：2013-01-17T04:44:11.767
> 
> 标签：android, android-activity

我创建了一个 android 问题：[这里](http://code.google.com/p/android/issues/detail?id=42603)

我知道你可能不相信，但这是真的。关键是 -FLAG_ACTIVITY_MULTIPLE_TASK 将创建多个具有相同 taskAffinity 的任务。

正如谷歌文档中所说，MULTIPLE_TASK 只能用作启动器。

以下是我创建此错误的方法：
1.准备 3 个活动，A1、A2、L.L - Launcher（可能是 singleInstance）、A2 - singleTask、A1 A2 具有相同的 taskAffinity

2.L 以 MULTIPLE_TASK 启动 A1。mHistory = L->[task1: A1(top)]

3.A1启动A2。mHistory = L->[task1: A1->A2(top)]

4.按HOME，开始L. mHistory = [task1: A1->A2]->HOME->L(top)

5.L 以 MULTIPLE_TASK 启动 A1。mHistory = [task1: A1->A2]->HOME->L->[task2: A1(top)]

6.A1启动A2。mHistory = [task1: A1->A2]->HOME->L->[task2: A1->A2(top)]

7.现在我们得到了两个 A2 实例 - 这是 singleTask Activity

这个BUG是因为这个flag - `FLAG_ACTIVITY_MULTIPLE_TASK`。它允许使用相同的 taskAffinity 创建多个任务。当我们尝试为 singleTask A2 查找现有任务时，它首先比较 taskAffinity，而不是`Activity.componentName()`.

错误代码在`com/android/server/am/ActivityStack.java`

```
line 2742 - `startActivityUncheckedLocked()`

line 520 which is in `findTaskLocked()` - first compare the taskAffinity 
```

# ruby-on-rails - Ajax 发布点击动作，无需使用 CanCan 和 Devise 进行身份验证

> ID：14372333
> 
> 赞同：2
> 
> 时间：2013-01-17T04:44:12.617
> 
> 标签：ruby-on-rails, ruby, jquery, devise, cancan

我正在使用 Cancan 来授权我的评论资源并设计进行身份验证。我有以下控制器，当我没有使用 devise 登录并尝试发布新评论时，用户将被重定向到登录页面（new_user_session_path），因为他们必须登录才能创建评论。但是，如果我在未登录的情况下发布新的评论使用`remote: true`，它会通过在 Chrome 控制台中渲染`create.js.erb`并使用 html 响应，并在解析时出现错误`@comments.any?`，这应该是 nil。但是，如果用户尚未登录但想提交评论，我想获得类似 :unauthorized 或 501 的状态代码，因此我可以使用 jQuery 捕获它并调出登录表单。我以为`gem cancan`提供的`load_and_authorize_resource`甚至会阻止我的请求执行该操作，但显然不是。我应该怎么做才能获得状态响应而不是采取行动？谢谢！

```
class CommentsController < ApplicationController
  load_and_authorize_resource
  #should I also add a devise authenticate_user! before filter here?

  def create
    @commentable = find_commentable
    @comment = current_user.comments.build(params[:comment].merge(:commentable => @commentable))
    if @comment.save
      respond_to do |format|
        format.html { redirect_to @commentable, :notice => "Successfully created comment."}
        format.js   {@comments = @commentable.comments}
      end
    else
      respond_to do |format|
        format.html { redirect_to @commentable, :notice => "Comment NOT created."}
        format.js   { render :status => :internal_server_error }
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:31:44.330

我会将您的控制器修改为：

```
class CommentsController < ApplicationControlle

  def create
    @commentable = find_commentable
    authorize! :create, @commentable
    @comment = current_user.comments.build(params[:comment].merge(:commentable => @commentable))
    if @comment.save
      respond_to do |format|
        format.html { redirect_to @commentable, :notice => "Successfully created comment."}
        format.js   {@comments = @commentable.comments}
      end
    end
  end
end 
```

如果您的用户已获得授权，则会出现您的成功消息。否则，当未经授权的用户尝试发表评论时，将出现 501 消息。

# css - IE7 浮动无法正常工作

> ID：14372342
> 
> 赞同：0
> 
> 时间：2013-01-17T04:46:03.607
> 
> 标签：css, internet-explorer-7

我正在创建一个您可以[在此处](http://trident-it.com/blog/)看到的博客它在除 ie7 之外的所有内容中都运行良好。您会注意到右侧的列将在 ie7 中下降到页面底部。我一直无法弄清楚为什么或我忽略了什么，因为我之前多次使用过这种技术，没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:25:57.383

除了 div 的宽度和较少的填充之外，将 float: left 设置为“InteriorContent”div。这个 div 没有浮动，我想这可能是原因..

# c++ - boost::scoped_ptr 的 NULL 检查

> ID：14372351
> 
> 赞同：3
> 
> 时间：2013-01-17T04:46:47.070
> 
> 标签：c++, boost

我是 boost 框架的新手，我不确定如何检查 scoped_ptr 中的对象是否为空。

```
boost::scoped_ptr<CFoo> cFoo(new CFoo);

if(NULL != cFoo)
{
    //todo
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T04:50:42.380

你可以做

```
if(cFoo.get() != 0 ) //what you are trying to do 
```

要不就

```
if(cFoo) // as K-Ballo explains. 
```

正如在[`boost::scoped_ptr`](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/scoped_ptr.htm#conversions)

> **转化**
> 
> `operator unspecified-bool-type () const; // never throws`
> 返回一个未指定的值，当在布尔上下文中使用时，**它等价于 get() != 0。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T04:47:28.420

应该足够了：

```
if( cFoo )
{ ... } 
```

`scoped_ptr`有一个到*bool的**安全*隐式转换，当它不为空时将评估为。*`true`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-19T07:42:11.660

当“ `new CFoo`”失败时，它会抛出异常，所以我认为你不需要检查 cFoo 是否为空。如果你`new(std::nothrow)`，`if (cFoo)`是需要的。*

# html - IOS App 与 Web 服务通信

> ID：14372352
> 
> 赞同：1
> 
> 时间：2013-01-17T04:46:56.157
> 
> 标签：html, ios, web-services

这是我想要完成的事情：

1.  在服务器端，我基本上有一个带有值的表，例如，

    一个 | 0
    乙 | 0
    ℃ | 1等

2.  在客户端，我有一个 IOS 应用程序，它从网页下载内容并将其显示在 TABLE 视图中。这些值也可以更改和提交。并且一旦提交，网页也必须更新为新值。

所以要做到这一点，

1.  我使用的最佳服务器端格式是什么，例如 JSON、xml、纯 HTML？
2.  在客户端，这是否有可能更改和提交新值？
3.  请建议任何教程或入门者继续使用此框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:53:03.930

1.  JSON 或 XML 都可以。如今，JSON 变得更加流行。有许多 JSON 解析库，但对于您的情况，内置支持将完全足够。

2.  是的当然。我建议制作真正的模型/域类并将服务器数据解析到模型中。然后，您可以在设备上操作模型。提交回服务器时，朝另一个方向前进并将模型编组回 JSON。

3.  我建议[在 iOS 中使用 Json，A Ray Wenderlich 教程](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)。. 还有很多其他的，可能也同样有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T04:54:09.127

您可以使用 JSON/xml 作为响应。您必须使用 PHP、Mysql 创建 Web 服务，该服务将托管在您的服务器中。因此，您将请求发送到托管在服务器中的 PHP 文件，以输入或更新 MySql 数据库中的任何数据。

[这是来自Raywenderlich](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)的一个很好的教程

# android - json数组和中文文本

> ID：14372354
> 
> 赞同：1
> 
> 时间：2013-01-17T04:47:09.113
> 
> 标签：android, json, text, text-formatting

我正在使用 json 数组并通过 .txt 文件解析文本我里面有中文字符，它似乎无法正确显示它们。

我的txt文件输出：

```
{
    "guides": [
        {
        "description": "Download magazines/下载杂志",
                "image": "http://58.185.41.178/magazine_android/guide/download.png"
        },  
    {
        "description": "Delete magazines/删除杂志",
                "image": "http://58.185.41.178/magazine_android/guide/trash.png"
        },
    {
        "description": "Preview magazines",
                "image": "http://58.185.41.178/magazine_android/guide/preview.png"
        },  
    {
        "description": "Update magazine issues/更新杂志",
                "image": "http://58.185.41.178/magazine_android/guide/refresh.png"
        },
    {
        "description": "Settings/设置",
                "image": "http://58.185.41.178/magazine_android/guide/settings.png"
        },  
    {       
        "description": "Read magazine/阅读杂志",
                "image": "http://58.185.41.178/magazine_android/guide/magazine.png"
        }           
    ]
} 
```

但输出总是奇怪的中文文本！例如[http://i49.tinypic.com/211tnco.jpg](http://i49.tinypic.com/211tnco.jpg)

这是我的 json

```
class LoadGuide extends AsyncTask<String, String, String> {

        /**
         * getting All videos from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_guide, "GET", params);

            // CHECKING OF JSON RESPONSE
            Log.d("All guide: ", json.toString());

            try {
                guide = json.getJSONArray(TAG_GUIDES);
                for (int i = 0; i < guide.length(); i++) {
                    JSONObject c = guide.getJSONObject(i);

                    //String title = c.getString(TAG_DESCRIPTION);
                    String image = c.getString(TAG_IMAGE);
                    String description = c.getString(TAG_DESCRIPTION);

                    guideList.add(image);
                    descriptionList.add(description);
                    System.out.println(guideList);
                    System.out.println(descriptionList);
                    }           

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

        /**
         *  Updating parsed JSON data into ListView
        * */ 

            adapter.notifyDataSetChanged();

        }

    } 
```

# networking - 让航位推算进入我的游戏的最简单方法是什么？

> ID：14372359
> 
> 赞同：0
> 
> 时间：2013-01-17T04:47:41.960
> 
> 标签：networking, udp, winsock, dead-reckoning

我有一个游戏，其中有许多精灵在屏幕上飞来飞去，用户用箭头键/WASD 控制其中一个。

我通过网络进行了设置，因此主机游戏是用户控制的游戏，客户端游戏没有用户输入，它只是模仿他在主机游戏中发生的一切。

我需要做的就是在客户端游戏中为用户控制的精灵实现航位推算。它可以向上、向下、向左和向右 4 个方向移动。

最简单的方法是什么/我该怎么做？

ps 我的主机游戏使用 WinSock 通过 UDP 套接字将数据发送到客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T11:22:04.043

搜索 EPIC 实体位置插值代码。它为Position DR提供了一个很好的解决方案。

对于 Orientation DR，我正在寻找解决方案……

# python - Flask：为什么我不能在没有响应的情况下存储 cookie？

> ID：14372362
> 
> 赞同：1
> 
> 时间：2013-01-17T04:47:51.103
> 
> 标签：python, cookies, flask, response

在 Flask 文档中，它提供了以下示例代码：

```
from flask import make_response

@app.route('/')
def index():
    resp = make_response(render_template(...))
    resp.set_cookie('username', 'the username')
    return resp 
```

为什么需要做一个响应对象？无法使用 javascript 随时设置 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:37:52.300

关键的见解是路由需要响应对象，因此当您使用 render_template(..) 或 redirect(url_for(..)) 时，它会返回包含您渲染视图的响应对象。立即设置 cookie 并不重要，通常无论如何您都必须在任何路由上返回响应，所以如果方便的话，不妨在那里做。

# python - 尝试获取会话时自定义管理表单上的 Django 错误

> ID：14372367
> 
> 赞同：0
> 
> 时间：2013-01-17T04:48:49.453
> 
> 标签：python, django, admin

每当我尝试在管理页面中访问我的表单时，我都会收到以下错误。

**TypeError at /admin/scoring/score/add/ super(type, obj): obj must be an instance or subtype of type**

在线

```
AdminForm = super(ScoreForm, self).get_form(request, obj, **kwargs) 
```

我试图在表单初始化期间访问会话，因此我可以在整个会话期间保留菜单小部件中选择的内容。我正在关注[这篇文章](https://stackoverflow.com/questions/2683689/django-access-request-object-from-admins-form-clean)。我找不到我做错了什么。

```
class ScoreForm(forms.ModelForm):
def __init__(self, *args, **kwargs):

    super(ScoreForm, self).__init__(*args, **kwargs)
    self.request = kwargs.pop('request', None)

    standard_events = Event.objects.filter(event_score_type='STD')
    event_widget = self.fields['event'].widget

    choices = []
    for element in standard_events:
        choices.append((element.id, element.name))
    event_widget.choices = choices

def clean_score(self):
    print self.request.session
    print(self.cleaned_data['event'])
    selected_event = Event.objects.get(name=self.cleaned_data['event'])
    if(selected_event.max_score > selected_event.min_score):
        if self.cleaned_data['score'] < 0:
            raise forms.ValidationError("Score Cannot Be Negative")
        elif self.cleaned_data['score'] > selected_event.max_score:
            raise forms.ValidationError("Score Cannot Be Greater Than Best Possible Score of " + str(selected_event.max_score))
        elif self.cleaned_data['score'] < selected_event.min_score:
            raise forms.ValidationError("Score Cannot Be Less Than Worst Possible Score of " + str(selected_event.min_score))
        else:
            return self.cleaned_data['score']
    elif selected_event.max_score < selected_event.min_score:
        if self.cleaned_data['score'] < 0:
            raise forms.ValidationError("Score Cannot Be Negative")
        elif self.cleaned_data['score'] < selected_event.max_score:
            raise forms.ValidationError("Score Cannot Be Less Than Best Possible Score of " + str(selected_event.max_score))
        elif self.cleaned_data['score'] > selected_event.min_score:
            raise forms.ValidationError("Score Cannot Be Greater Than Worst Possible Score of " + str(selected_event.min_score))
        else:
            return self.cleaned_data['score']
    class Meta:
        model = Score

class ScoreAdmin(admin.ModelAdmin):
    form = ScoreForm

    def get_form(self, request, obj=None, **kwargs):

        #Line Below Causes Error
        AdminForm = super(ScoreForm, self).get_form(request, obj, **kwargs)

        class ModelFormMetaClass(AdminForm):
            def __new__(cls, *args, **kwargs):
                kwargs['request'] = request
                return AdminForm(*args, **kwargs)

        return ModelFormMetaClass 
```

# ios - 从透明图像跟踪 UIBezierPath

> ID：14372371
> 
> 赞同：3
> 
> 时间：2013-01-17T04:49:22.040
> 
> 标签：ios, objective-c, uibezierpath, cgpath

我想知道是否有一种方法可以分析透明的 UIImage 轮廓并创建 UIBeizerPath 来创建阴影。

类似于 UITabBar 在标签栏图像的轮廓周围创建阴影的方式。

![在此处输入图像描述](../Images/ed16e797dc05bba894f50fcccd645ca0.png)

# html - 如何解决此警告 Type Attribute (cellpadding) 已过时。不鼓励在 HTML5 文档中使用它

> ID：14372380
> 
> 赞同：4
> 
> 时间：2013-01-17T04:49:54.600
> 
> 标签：html, junit, tapestry

我正在使用挂毯开发 Web 应用程序。我正在使用 junit 测试套件测试我的应用程序，并使用 ant build 生成战争文件和 html 报告。在我的 html 报告文件中，我有以下警告。

```
Multiple annotations found at this line:
    - Attribute (width) is obsolete. Its use is discouraged in HTML5 documents.
    - Attribute (cellpadding) is obsolete. Its use is discouraged in HTML5 
     documents.
    - Undefined attribute value (0). 
    - Attribute (language) is obsolete. Its use is discouraged in HTML5 documents. 
```

以下是我的测试和报告生成代码。

```
<target name="test" depends="compile" description="Running Test Suite">
        <mkdir dir="${target.data.dir}"/>
        <mkdir dir="${target.htmlreports.dir}"/>
        <junit fork="no" haltonfailure="no" showoutput="yes" printsummary="true" >
        <test name="${junit.class.name}" todir="${target.data.dir}"/>
        <formatter type="brief" usefile="false"/>
        <classpath refid="classpath.test"/>
        <sysproperty key="ant.home" value="${ant.home}"/>   
        <formatter type="xml"/>
        </junit>
        <junitreport todir="${target.htmlreports.dir}">
        <fileset dir="${target.data.dir}">
        <include name="TEST-*.xml"/>
        </fileset>
        <report format="frames" todir="${target.htmlreports.dir}"/>
        </junitreport>
    </target> 
```

这是我的 html 报告文件之一。

```
<html xmlns:lxslt="http://xml.apache.org/xslt" xmlns:stringutils="xalan://org.apache.tools.ant.util.StringUtils">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Unit Test Results: Summary</title>
<link rel="stylesheet" type="text/css" title="Style" href="stylesheet.css">
</head>
<body onload="open('allclasses-frame.html','classListFrame')">
<h1>Unit Test Results.</h1>
<table width="100%">
<tr>
<td align="left"></td><td align="right">Designed for use with <a href="http://www.junit.org/">JUnit</a> and <a href="http://ant.apache.org/">Ant</a>.</td>
</tr>
</table>
<hr size="1">
<h2>Summary</h2>
<table class="details" border="0" cellpadding="5" cellspacing="2" width="95%">
<tr valign="top">
<th>Tests</th><th>Failures</th><th>Errors</th><th>Success rate</th><th>Time</th>
</tr>
<tr valign="top" class="Pass">
<td><a title="Display all tests" href="all-tests.html">1</a></td><td><a title="Display all failures" href="alltests-fails.html">0</a></td><td><a title="Display all errors" href="alltests-errors.html">0</a></td><td>100.00%</td><td>0.070</td>
</tr>
</table>
<table border="0" width="95%">
<tr>
<td style="text-align: justify;">
        Note: <em>failures</em> are anticipated and checked for with assertions while <em>errors</em> are unanticipated.
        </td>
</tr>
</table>
<h2>Packages</h2>
<table class="details" border="0" cellpadding="5" cellspacing="2" width="95%">
<tr valign="top">
<th width="80%">Name</th><th>Tests</th><th>Errors</th><th>Failures</th><th nowrap>Time(s)</th><th nowrap>Time Stamp</th><th>Host</th>
</tr>
<tr valign="top" class="Pass">
<td><a href="./test/web/app/sampleApp/juint/package-summary.html">test.web.app.sampleApp.juint</a></td><td>1</td><td>0</td><td>0</td><td>0.070</td><td>2013-01-17T04:52:59</td><td>123456</td>
</tr>
</table>
</body>
</html> 
```

请任何人说我怎样才能删除这个警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T08:12:36.730

我面临同样的问题，我通过使用 HTML 4.01 文档类型而不是 HTML 5 文档类型得到了解决方案。这些警告只是因为 HTML5 验证器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T08:59:25.893

这些警告来自 HTML5 验证器，显然您使用的工具在后台运行这样的验证器并报告*一些*报告的*错误*，将它们显示为*警告*。通过直接在 HTML 文档上使用[http://validator.nu](http://validator.nu)，还有许多其他错误消息。

警告“未定义的属性值 (0)”。然而，这很神秘。HTML5 验证器这样说可能是一种奇怪的说法，关于`<table border="0">`：“错误：元素`border`上的属性值`table`必须是 1 或空字符串。要调节表格边框的粗细，请改用 CSS。”</p>

检查您使用的工具是否具有用于控制生成的 HTML 文档中使用的文档类型 (doctype) 的选项（报告的问题是 HTML5 草案的错误，但不是根据例如 XHTML 1.0），或生成的 HTML 代码的种类，或问题报告（例如，“无警告”）。但是，如果可能的话，仅仅禁用警告可能会掩盖真正的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-26T11:39:40.760

您可以像这样更改代码以删除这样的警告：

```
<table style="width: 100%;"></table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T05:40:31.880

问题在于 html 报告而不是挂毯代码。生成的 html 报告使用现在已过时的 html 4 属性，如 cellpadding、cellspacing 等。这些只是 junit 测试报告。我不会被他们的 html 警告所困扰。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-06T00:03:22.943

要详细说明 Kanhu 的回复，您可以在此处更改 Eclipse 中的默认 HTML doctype：

```
Project -> Properties -> Web Content 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-03T07:30:25.427

只需在标记前包含以下代码`<html>`：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-14T10:35:33.147

添加样式**text-align:center;** 到您的 html 元素

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-19T10:02:29.737

您可以使用

```
<table data-width="100%" class="config-header-font"> 
```

代替

```
<table width="100%" class="config-header-font"> 
```

这个对我有用。

注意：它将删除警告，但可能（不确定）更改您的属性对齐位置。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-09-12T14:03:24.957

HTML5 不支持的 cellpadding 属性。改用 CSS。

[https://www.w3schools.com/tags/att_table_cellpadding.asp](https://www.w3schools.com/tags/att_table_cellpadding.asp)

# grails - 如何从 Grails 过滤器访问数据？

> ID：14372384
> 
> 赞同：0
> 
> 时间：2013-01-17T04:50:03.680
> 
> 标签：grails, groovy

好的，我有一个看起来像这样的 Grails 过滤器：

```
after = { model ->
    modifyDataFromController(model)
} 
```

我想修改从控制器呈现的数据，如下所示：

```
def myAction = {
    def myJson = getJson() // this returns JSON  
    render(contentType:"application/json", text:myJson)
} 
```

那么，有没有办法让我通过模型对象访问 myJson ？如果没有，我应该如何从控制器访问数据？请非常具体，不要以为我知道你在说什么。:)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T07:27:36.457

而不是渲染空白模板，您可以只返回模型本身

跟随可以是你行动的最后一行。

`[data:myJson]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:09:58.323

过滤器中的`model`属性为空，因为

```
render(contentType:"application/json", text:myJson) 
```

直接写成`myJson`回复。我找不到在过滤器方法中访问响应内容的解决方案，如果有人有优雅的方法，请在此处发布解决方案。

目前我能想到的是将其修改`render`为如下所示：

```
render(template:'blankTemplate', model:[data:myJson]) 
```

其中`blankTemplate`指的是一个空白的gsp文件，即_blankTemplate.gsp。然后在过滤器中，您可以访问 json 数据并在之后呈现它：

```
after = { model ->
    modifyDataFromController(model.data)
    render(contentType:"application/json", text:model.data)
} 
```

# ios - iOS 关闭键盘但继续编辑

> ID：14372385
> 
> 赞同：2
> 
> 时间：2013-01-17T04:50:13.623
> 
> 标签：ios, objective-c, keyboard, addsubview, first-responder

我有一个正在编辑的 UITextView，我想添加一个自定义键盘......有什么方法可以关闭键盘，但让 textView 处于编辑模式，这样蓝色光标会一直闪烁？或者更好的是有没有办法在键盘上放置视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:13:24.110

你应该注册通知`UIKeyboardWillShowNotification`。它会在显示键盘之前点击注册的功能。

在这里，您可以遍历所有 Windows，并可以通过以下方式识别键盘：

```
for (UIWindow *keyboardWindow in [[UIApplication sharedApplication] windows]) 
{
    for (UIView *keyboard in [keyboardWindow subviews]) 
    {
        if([[keyboard description] hasPrefix:@"<UIKeyboard"] == YES
           ||[[keyboard description] hasPrefix:@"<UIPeripheralHost"]== YES) 

        {
                  //Set proper frame to hide key board here..
       } 
```

}

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-17T04:57:40.933

试试这个

`uitextfieldView.inputView = [[UIView new] autorelease];`

系统键盘视图不显示，它会在您编辑时保持光标。

或者您可以通过将其滑离屏幕来隐藏键盘

```
frame.origin.y = (keyboard.frame.origin.y - 264);
keyboard.frame = frame; 
```

# php - 在 PHP、AJAX 中使用 jQuery/JavaScript 隐藏父 ID

> ID：14372387
> 
> 赞同：1
> 
> 时间：2013-01-17T04:50:42.583
> 
> 标签：php, jquery, ajax

好的，我正在使用 Ajax 调用 PHP 进行文件上传。

```
else if (in_array($file_extn, $allowed)=== false){
            echo '<script type = "text/javascript">window.alert("The only file types allowed are .jpg, .gif, .png");</script>';
            echo '<script type = "text/javascript">$(document).ready(function(){$.parent("#loadimg").fadeOut();});</script>';
        } 
```

警报没有问题，但第二个回声不起作用。它不会淡出 ID。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:53:04.157

你需要一个选择器来告诉 jQuery 得到什么`parent()`。

```
$(document).ready(function() {
    $(".childElement").parent("#loadimg").fadeOut();
}); 
```

见：[http ://api.jquery.com/parent/](http://api.jquery.com/parent/)

注意第一段的第一行，“给定一个代表一组 DOM 元素的 jQuery 对象......”

如果你想淡出`#loadimg`，那么试试这个：

```
$(document).ready(function() {
    $("#loadimg").fadeOut();
}); 
```

如果你试图淡化以下的父级`#loadimg`：

```
$(document).ready(function() {
    $("#loadimg").parent().fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:57:42.863

它是什么的父母？您是要删除所有带有“直接”父级的元素`#loading`吗？然后我认为它适合使用：

```
$('*').parent('#loading').fadeOut(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:00:34.957

尝试这样的事情：

```
$(document).ready(function() {
     $('#loadimg').parent('div').fadeOut();
}); 
```

给父 div 一个 id 可能会更容易，然后你可以这样做：

```
$(document).ready( function() {
    $('#loadimg').fadeOut();
}); 
```

# ruby-on-rails - 在 Ruby on rails 中将数据从一个控制器提交到另一个控制器模型

> ID：14372389
> 
> 赞同：3
> 
> 时间：2013-01-17T04:51:00.317
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, redirect, routes

在这里我想提交数据

```
 class Employee::GeneralInformationsController < ApplicationController
to class EmployeeRegistersController < ApplicationController 
```

employee_register.rb 模型

在这里，我想从 Employee::GeneralInformationsController 中的 EmployeeRegister 模型中获取所有数据，我的 Employee::GeneralInformation 控制器是这样的

```
class Employee::GeneralInformationsController < ApplicationController
  def index
    @employee_general_informations = EmployeeRegister.all
  end

  def show
    @employee_general_information = EmployeeRegister.find(params[:id])
  end

  def new
    @employee_general_information = EmployeeRegister.new
  end

  def edit
    @employee_general_information = EmployeeRegister.find(params[:id])
  end

  def create
    @employee_general_information = EmployeeRegister.new(params[:employee_general_information])

    respond_to do |format|
      if @employee_general_information.save
        format.html { redirect_to @employee_general_information, notice: 'General information was successfully updated.' }
        format.json { render json: @employee_general_information, status: :created, location: @employee_general_information }
      else
        format.html { render action: "new" }
        format.json { render json: @employee_general_information.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
    @employee_general_information = EmployeeRegister.find(params[:id])

    respond_to do |format|
      if @employee_general_information.update_attributes(params[:employee_general_information])
        format.html { redirect_to @employee_general_information, notice: 'General information was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @employee_general_information.errors, status: :unprocessable_entity }
      end
    end
  end

  def destroy
    @employee_general_information = EmployeeRegister.find(params[:id])
    @employee_general_information.destroy

    respond_to do |format|
      format.html { redirect_to employee_general_informations_url }
      format.json { head :no_content }
    end
  end
end 
```

我的表格是这样的

```
<%= simple_form_for(@employee_general_information) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :first_name %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

问题是数据从 Employee::GeneralInformationsController 保存到 EmployeeRegisters 模型后，它重定向到员工注册显示页面。但它应该重定向到 Employee::GeneralInformations 显示页面。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:01:07.203

您正在重定向到@employee_general_information，这是一个 EmployeeRegister 模型....因此它将转到 EmployeeRegister#show...

如果要重定向到另一个控制器，请使用路由或哈希：

使用以下路线：

```
namespace :employee do
  resources :general_informations
end 
```

然后：

```
redirect_to employee_general_information_path 
```

或使用哈希：

```
redirect_to :controller => 'employee/general_informations', :action => 'show' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T17:17:11.737

当您要重定向到 rails 3 中的特定控制器时，您需要使用命名路由或数组来构建路由，请查看：

```
# Here is the routes that you need
namespace :employee do
  resources :employee_registers, :controller => 'employee/general_informations'
end 
```

因此，要解决您的问题，您需要更换所有问题

```
redirect_to @employee_general_information 
```

经过

```
redirect_to [:employee, @employee_general_information] 
```

这将重定向到`#show`行动`Employee::GeneralInformationsController`

还有一件事，在您的表单中，您需要指定控制器！如果您只使用`simple_form_for(@employee_general_information)`这种形式，则将数据发送到，`EmployeeRegistersController`因为 Rails 将对象的类映射到具有相同名称 ( `model EmployeeRegister`=> `EmployeeRegistersController`) 的控制器。

要解决此问题，您需要在表单中使用它

```
<%= simple_form_for([:employee, @employee_general_information]) do |f| %>
... 
```

最终结果应该是：

```
# Employee::GeneralInformationsController
def create
  @employee_general_information = EmployeeRegister.new(params[:employee_general_information])

  if @employee_general_information.save
    redirect_to [:employee, @employee_general_information],
                notice: 'General information was successfully updated.'
  else
    render action: "new"
  end
end 
```

形式应该是

```
<%= simple_form_for([:employee, @employee_general_information]) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :first_name %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

[在http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)了解更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T12:19:37.103

它是这样的：

`Employee::GeneralInformationsController`仔细看你——

```
def create
    @employee_general_information = EmployeeRegister.new(params[:employee_general_information])

    respond_to do |format|
      if @employee_general_information.save
        format.html { redirect_to @employee_general_information, notice: 'General information was successfully updated.' }
        format.json { render json: @employee_general_information, status: :created, location: @employee_general_information }
      else
        format.html { render action: "new" }
        format.json { render json: @employee_general_information.errors, status: :unprocessable_entity }
      end
    end
  end 
```

问题是：

在**save 之后的****create**方法中，您将重定向到 但此变量指向**EmployeeRegister**模型而不是您的，并且由于创建后在 rails 中调用的默认方法是指向对象的方法，因此您将被重定向到**EmployeeRegister 的 show**。**`@employee_general_information`**`Employee::GeneralInformationsController``show`****

 ******如果你问它是如何指向那**​​个 EmployeeRegister**的？

答案是：

再次查看在**Employee::GeneralInformationsController的****create**方法中定义的第一行。它的**`@employee_general_information = EmployeeRegister.new(params[:employee_general_information])`**

 **在上面的代码中，您正在为`EmployeeRegister`模型创建参数，然后将其保存到相应的表中。按照 Rails 约定，您保存数据的模型，通过重定向到它来调用相应控制器的**show**方法。因此结果。

**解决方案：**

要重定向到**Employee::GeneralInformationsController show 方法**，您必须明确定义控制器的 show 方法的根。

通过运行**rake routes检查路径**

然而它可能是这样的：

```
 redirect_to(employee_general_information_path(params[:employee_general_information])) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T08:31:36.967

在您的 respond_to 块中，尝试删除 format.html 中的 @employee_general_information，例如

```
def update
@employee_general_information = EmployeeRegister.find(params[:id])

respond_to do |format|
  if @employee_general_information.update_attributes(params[:employee_general_information])

    format.html ###goes to the default view for this action
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @employee_general_information.errors, status: :unprocessable_entity }
  end
 end
end 
```********

# android - 绘制 chartengine 循环

> ID：14372390
> 
> 赞同：0
> 
> 时间：2013-01-17T04:51:01.897
> 
> 标签：android, sqlite, loops, graph, achartengine

我已经在我的项目中实现了 achartengine，我让它显示来自 sqlite 数据库的信息。现在一切都很好，除了每次我从数据库中删除一行时，它都会在该行中截断并且只绘制前一行。我需要它来跳过已删除的行并继续读取所有行，直到最后一行。我现在一直在做这个，我不知道从这里做什么。感谢您的任何帮助和指点！

克里斯

在我的数据库活动中：

```
public String getValue1(long l) {
    String[] columns = new String[]{ EMP_DEPT };
    Cursor c = db.query(EMP_TABLE, columns, EMP_ID + "=" + l, null, null, null, null);
    if (c != null){
    c.moveToFirst();
    String value1 = c.getString(0);
    return value1;
    }
    return null;
    }

public String getValue2(long l) {
    String[] columns = new String[]{ EMP_DATE1 };
    Cursor c = db.query(EMP_TABLE, columns, EMP_ID + "=" + l, null, null, null, null);
    if (c != null){
    c.moveToFirst();
    String value2 = c.getString(0);
    return value2;
    }
    return null;
    } 
```

在我的图表活动中：

```
 TimeSeries myseries = new TimeSeries("Test");

    try{

        for (int i = 1; !c.isAfterLast(); i++)  {

         String value1 = db.getValue1(i);
         String value2 = db.getValue2(i);

         c.moveToNext();

         double x7 = Double.parseDouble(value1);
         double y7 = Double.parseDouble(value2);

         myseries.add(x7, y7);  

         }

    }catch(Exception e){System.out.println("nothing");} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:57:35.280

如果您想在不使用任何内置 jar 文件（如`achartengine`.

检查这个[`Bar Chart in Android With out any Built in jars`](http://rakhi577.wordpress.com/2012/10/11/bar-chart-in-android-with-out-any-built-in-jars/)

# google-maps-android-api-2 - java.lang.noclassdeffounderror: com.google.android.gms.R$styleable

> ID：14372391
> 
> 赞同：53
> 
> 时间：2013-01-17T04:51:20.167
> 
> 标签：google-maps-android-api-2

我正在使用谷歌地图创建一个 android 应用程序。这是代码：

MapFragActivity.java

```
 import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;
    import com.google.android.gms.maps.GoogleMap;
    import com.google.android.gms.maps.SupportMapFragment;

    public class MapFragActivity extends FragmentActivity {

    private GoogleMap map;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map_frag);

        map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
     }
    } 
```

AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.him.mapfrag_rnd"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="11"
            android:targetSdkVersion="15" />

        <permission
            android:name="com.him.mapfrag_rnd.permission.MAPS_RECEIVE"
            android:protectionLevel="signature" />

        <uses-permission android:name="com.him.mapfrag_rnd.permission.MAPS_RECEIVE" />
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

          <uses-feature
            android:glEsVersion="0x00020000"
            android:required="true" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MapFragActivity"
                android:label="@string/title_activity_map_frag" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <meta-data
                android:name="com.google.android.maps.v2.API_KEY"
                android:value="my_api_key" />

        </application>

    </manifest> 
```

activity_map_frag.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    <fragment
      android:id="@+id/map"
      android:name="com.google.android.gms.maps.SupportMapFragment"
      android:layout_width="match_parent"
      android:layout_height="match_parent" />

    </RelativeLayout> 
```

当我尝试此代码时出现错误，这是日志：

```
01-17 10:01:17.685: E/AndroidRuntime(8923): FATAL EXCEPTION: main
    01-17 10:01:17.685: E/AndroidRuntime(8923): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:279)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:272)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.app.Activity.setContentView(Activity.java:1835)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at com.him.mapfrag_rnd.MapFragActivity.onCreate(MapFragActivity.java:16)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.app.Activity.performCreate(Activity.java:4470)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.os.Handler.dispatchMessage(Handler.java:99)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.os.Looper.loop(Looper.java:137)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at android.app.ActivityThread.main(ActivityThread.java:4511)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at java.lang.reflect.Method.invokeNative(Native Method)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at java.lang.reflect.Method.invoke(Method.java:511)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:986)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:753)
    01-17 10:01:17.685: E/AndroidRuntime(8923):     at dalvik.system.NativeStart.main(Native Method) 
```

当我在 MapFragActivity.java 中进行一些更改时，会显示地图。以下是更改：

```
package com.him.mapfrag_rnd;

    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;

    import com.google.android.gms.maps.SupportMapFragment;

    public class MapFragActivity extends FragmentActivity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            //setContentView(R.layout.activity_map_frag);
          SupportMapFragment fragment = new SupportMapFragment();
          getSupportFragmentManager().beginTransaction().add(android.R.id.content, fragment).commit();
        }
    } 
```

我所做的更改被注释为 setContentView。我已遵循所有必需的步骤，但我仍然遇到错误。如果取消注释 setContentView() 那么我再次收到错误消息。

请帮忙！！！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-05T05:48:32.317

如果您使用 Intellij Idea，

1.  从项目面板中选择**您的项目**
2.  按 F4 打开项目结构窗口
3.  从左侧面板中选择模块，然后点击 + 按钮，然后选择“导入模块”并导航到“ **ANDROID-SDK** ”/extras/google/google_play_services/libproject/google-play-services_lib。通过这样做，这个项目将与您的项目一起添加到模块中
4.  选择您的项目，然后从右侧面板中选择“依赖项”（它是一个选项卡）。单击 + 按钮，然后单击“3 Module dependencies...”并选择“google-play-services_lib”。
5.  再次单击 + 按钮，然后单击“1 jars 或目录...”并导航到上述路径中的“/libs”文件夹并选择“google-play-services.jar”。
6.  单击确定并关闭项目结构窗口。

**注意**：确保您没有在“库”中添加“google-play-services_lib”项目作为库（模块下的左侧面板）。如果有，您可以转到“**库**并简单地删除它**。Google Play 库不应出现在库**中。

**注意 2**：如果您希望将其用于版本控制或类似的项目，您可以将整个 google-play-services_lib 目录复制到您自己的项目中。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-01T03:00:39.367

您需要做的是在您的项目中包含一个 Google Play 服务库。谷歌在这里有很好的说明：

*   [http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

此外，在尝试让 Google Maps v2 工作时，我发现有一个快速入门非常有用。

*   [https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-18T19:21:36.867

I think you have to import the whole Google Play Service library to your IDE, not only the .jar

try it ;-)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-03-03T23:06:13.330

我有同样的错误。我使用 Android Studio 和 Gradle，因此没有太多需要配置或改进的东西。我做了几乎所有的事情，但它们都不适合我。最后一个有效：用较小的替换整个包播放服务。就我而言：

替换（在 build.gradle 文件中）：

```
compile 'com.google.android.gms:play-services:8.4.0' 
```

经过：

```
// Google Cloud Messaging
compile 'com.google.android.gms:play-services-gcm:8.4.0'

// Google Location
compile 'com.google.android.gms:play-services-location:8.4.0' 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-04-07T14:52:37.843

我在 android studio 中也遇到了这个错误，我已经包含了带有 gradle alpha5 的 play services alpha 3，我做错的是我包含了 multidex。

在毕业

**multiDexEnabled 真**

并在 Application 类的 onCreate

**MultiDex.install(this);**

但我忘了*用 MultiDexApplication 扩展 Application 类*

因为 MultiDexApplication 尚未扩展，因此它不能包含 gms 和任何其他 dex 类，因此它在 gms 字符串开始时出错。

希望[这](http://developer.android.com/tools/building/multidex.html)会有所帮助

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-11T08:48:44.383

我通过首先检查播放服务库是否正确添加并将此数据添加到应用程序标签下的清单文件中来解决了这个问题`<meta-data android:name="com.google.android.gms.version" android:value="@integer/google_play_services_version" />`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-04-22T21:41:20.067

Check AndroidManifest.xml file of your google-play-services_lib project. Should be:

```
package="com.google.android.gms" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-30T10:15:33.760

1.  使用 Android SDK Manager 下载“google play services”

2.  将其导入您的工作区（路径：android-sdk root/extras/google/google_play_service/libproject/google-play-service_lib）

3.  项目属性 -> android -> 库添加 google-play-service_lib

4.  Build path -> Order and Export 检查Android私有库

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-20T07:49:10.570

I solved this error by checking "**Copy projects into workspace**" while importing the Google Play Services lib.
More info here: [http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-12T13:26:29.030

我已经关注了链接 [http://www.vogella.com/tutorials/AndroidGoogleMaps/article.html](http://www.vogella.com/tutorials/AndroidGoogleMaps/article.html)

并将 google-play-services_lib 库项目添加到我的应用程序中。到昨天为止，它工作得很好。但是今天我遇到了上面提到的例外。这是因为没有 google play 库或者我的项目无法访问库中的文件。我重建了我的项目，但没有成功。然后我重建了 google-play-services_lib 库项目，但没有希望。然后我在eclipse中尝试了“build all”选项，它工作正常。

![在此处输入图像描述](../Images/c0a0489c5e05b047d43fc67d4c311359.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-08T00:46:11.963

如果您使用拆分 Google Play 服务（请参见此处：[https](https://developers.google.com/android/guides/setup#split) ://developers.google.com/android/guides/setup#split ）

您必须将**基本**播放服务包含到您的 gradle 文件中：

```
compile 'com.google.android.gms:play-services-base:7.5.0' 
```

使用 slipt Play Services 可防止 65k 错误并使您的应用程序更小

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-12-24T12:21:45.353

这两个谷歌播放服务添加到 build.gradle 它对我有用.. compile 'com.google.android.gms:play-services-appindexing:8.1.0' compile 'com.google.android.gms:play-services :8.1.0'

# vb.net - 显示错误值的 Visual Basic 温度转换程序

> ID：14372396
> 
> 赞同：2
> 
> 时间：2013-01-17T04:52:30.353
> 
> 标签：vb.net

我已经好几年没有在 Visual Basic 中编程了，但是我有这个代码可以将温度从华氏温度转换为摄氏温度。问题是当您在其中一个文本框中输入数字时，您会得到重复的数字并且值不正确。我认为这与手柄有关，但我在这里很迷茫，有什么想法吗？

```
Public Class MainForm

    Private Sub FahrenheitTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles FahrenheitTextBox.TextChanged
        CelciusTextBox.Text = 5 / 9 * (Val(FahrenheitTextBox.Text) - 32)
    End Sub

    Private Sub CelciusTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CelciusTextBox.TextChanged
        FahrenheitTextBox.Text = (9 / 5 * (Val(CelciusTextBox.Text)) + 32)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:04:25.267

这本身不是一个答案，但我想提出一些在评论中不会很好显示的建议。如果您正在使用 TextChanged 事件，您应该防范不需要的事件，例如，在一个文本框中键入会触发 TextChanged，这会导致另一个文本框发生更改，触发 TextChanged，会导致您正在键入的文本框发生更改.

尝试这样的事情：

```
Public Class MainForm

    Private textChanging As Boolean = False

    Private Sub FahrenheitTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles FahrenheitTextBox.TextChanged
        If Not textChanging Then
            textChanging = True
            CelciusTextBox.Text = 5 / 9 * (Val(FahrenheitTextBox.Text) - 32)
            textChanging = False
        End If
    End Sub

    Private Sub CelciusTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CelciusTextBox.TextChanged
        If Not textChanging Then
            textChanging = True
            FahrenheitTextBox.Text = (9 / 5 * (Val(CelciusTextBox.Text)) + 32)
            textChanging = False
        End If
    End Sub

End Class 
```

此外，您应该使用`CStr`将数字转换为字符串，就像`Val`将字符串转换为数字一样：

```
Private Sub FahrenheitTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles FahrenheitTextBox.TextChanged
    If Not textChanging Then
        textChanging = True
        CelciusTextBox.Text = CStr(5 / 9 * (Val(FahrenheitTextBox.Text) - 32))
        textChanging = False
    End If
End Sub 
```

最后，我重新标记了您的问题 - 这是 VB.NET，而不是 VB6。谢谢！

# redis - ServiceStack.Redis 使用最佳实践

> ID：14372397
> 
> 赞同：2
> 
> 时间：2013-01-17T04:52:38.900
> 
> 标签：redis, servicestack

我们有一个每秒向 Redis 缓存发出大约 5000 个请求的系统。我们一直在寻找在这种情况下使用 ServicStack.Redis 客户端的最佳实践。

我们的大多数调用都是针对使用 Typed 客户端的 HashSet 的：

```
RedisClient redisInstance = new RedisClient();

var redisTypedClient = redisInstance.As < CustomObject > ();
var data = redisTypedClient.GetValueFromHash(redisTypedClient.GetHash("hset:SetId"), recordId); 
```

最初我们将“redisInstance”作为静态对象，它对少数请求运行良好，但一旦请求数量增加，它开始抛出以下异常：ServiceStack.Redis.RedisResponseException: Unexpected reply

我们将“redisInstance”更改为本地对象，它开始正常工作。

对于我们是否以正确的方式使用它，我们仍然有些困惑。所以我的问题是：我们使用正确吗？PooledRedisClientManager 比这更好吗？还有其他方法吗？

我们有大约 10 或 15 个不同类型的 redis 哈希集，我们非常频繁地为每个用户查询这些哈希集。

寻找一些好的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:56:00.957

你可以试试看经理

[https://github.com/ServiceStack/ServiceStack.Redis/blob/master/tests/ServiceStack.Redis.Tests/ServiceStack.Redis/IRedisClientsManager.cs](https://github.com/ServiceStack/ServiceStack.Redis/blob/master/tests/ServiceStack.Redis.Tests/ServiceStack.Redis/IRedisClientsManager.cs)

这个 repo 上的测试显示了 PooledRedisClientManager 的基本用法

[https://github.com/ServiceStack/ServiceStack.Redis/blob/master/tests/ServiceStack.Redis.Tests/Issues/PooledRedisClientManagerIssues.cs](https://github.com/ServiceStack/ServiceStack.Redis/blob/master/tests/ServiceStack.Redis.Tests/Issues/PooledRedisClientManagerIssues.cs)

```
using (redisClient = (RedisClient)pool.GetClient())
{
     redisClient.Set("test", DateTime.Now);
} 
```

# objective-c - 更改 customView 后 UIBarButtonItem 不再响应

> ID：14372398
> 
> 赞同：2
> 
> 时间：2013-01-17T04:52:40.460
> 
> 标签：objective-c, cocoa-touch

```
PO(NSStringFromSelector(self.editSettings.action));
[self.editSettings setCustomView:imageView]; //works if this is commented out but with bad image
PO(NSStringFromSelector(self.editSettings.action)); 
```

该代码产生

```
2013-01-17 11:47:41.184 BadgerNew[29570:c07] NSStringFromSelector(self.editSettings.action): Setting:
2013-01-17 11:47:41.185 BadgerNew[29570:c07] NSStringFromSelector(self.editSettings.action): Setting: 
```

所以选择器还是一样的。

然而，在 [self.editSettings setCustomView:imageView]; 无法再按下按钮。按下它没有任何效果。

我想也许 customView “吸收”了用户交互。

但是，我无法设置`imageView.userInteractionEnabled`. 没有这样的选择器。

我错过了什么？

这似乎不是问题。我添加了更多控制台打印。它显示 imageView userInteractionEnabled 默认为 false

```
UIImage * imageSetting= [UIImage imageNamed:@"setting-button"];
UIImageView * imageView = [[UIImageView alloc]initWithImage:imageSetting];
PO(NSStringFromSelector(self.editSettings.action));//Bar Button Item
self.editSettings.customView =imageView;
PO(NSStringFromSelector(self.editSettings.action));
PO(@(imageView.userInteractionEnabled));
PO(self.editSettings.customView);
PO(imageView);
imageView.userInteractionEnabled=false; 
```

然后我尝试了一个完全没有 Interface Builder (IB) 的解决方案并执行以下操作：

```
UIImage * imageSetting= [UIImage imageNamed:@"setting-button"];
UIImageView * imageView = [[UIImageView alloc]initWithImage:imageSetting];
self.editSettings = [[UIBarButtonItem alloc]initWithCustomView:imageView];
self.editSettings.action = @selector(Setting:);

self.navigationItem.leftBarButtonItem = self.editSettings; 
```

还是不行。

有人说 customView 需要是按钮而不是图像。嗯，我想知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:23:43.787

从文档：

initWithCustomView：

initWithCustomView：

> 使用指定的自定义视图初始化新项目。- (id)initWithCustomView:(UIView *)customView 参数
> 
> 自定义视图
> 
> ```
> A custom view representing the item. 
> ```
> 
> 返回值
> 
> 具有指定属性的新初始化项目。讨论
> 
> **此方法创建的条形按钮项不会调用** 其目标的操作方法来响应用户交互。相反，条形按钮项期望指定的自定义视图来处理任何用户交互并提供适当的响应。可用性

# r - 当列名是数字时如何使用聚合？

> ID：14372407
> 
> 赞同：1
> 
> 时间：2013-01-17T04:53:27.203
> 
> 标签：r

我在`aggregate`处理变量名称为“数字”的数据框时遇到问题。这是一个例子：

```
library(stringr)

# this works
df <- data.frame(x001=runif(10),x002=runif(10),category=rep(1:2,5))
aggregate(. ~ category, data=df, mean)

# this doesn't
names(df) <- str_replace(names(df),"x","")
aggregate(. ~ category, data=df, mean) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:11:44.300

我同意@orizo​​n 关于使用非标准名称的观点，但要回答您的问题，您需要勾选这些名称。

```
aggregate(cbind(`001`, `002`) ~ category, data=df, mean)

#   category     `001`     `002`
# 1        1 0.6600887 0.3927709
# 2        2 0.5115426 0.5189629 
```

### 编辑：

这会更好，更通用：

```
agg <- aggregate(. ~ category, data=setNames(df, make.names(names(df))), mean)
#   category      X001      X002
# 1        1 0.7426327 0.4081779
# 2        2 0.6666881 0.5903070 
```

如果你真的想在你的聚合中出现坏名声：

```
names(agg) <- gsub('^X', '', names(agg)) 
```

# c# - 在 Linq 中放置 If 和 Else

> ID：14372409
> 
> 赞同：0
> 
> 时间：2013-01-17T04:53:57.540
> 
> 标签：c#, linq, if-statement

> **可能重复：**
> [Linq If 语句](https://stackoverflow.com/questions/1443152/linq-if-statement)

我正在尝试使用 Linq 运行查询，但在 where 子句之前我想指定 If 条件但我没有得到正确的语法（可能是）或者它不可能？我进行了很多搜索，但他们在查询之前使用 if 和 else，但我希望在查询中使用 If。有没有可能像：

```
var q = (from mortgageapplication in context.MortgageApplications
         if(mortgageapplication.purpose of loan==7)
         {
              where mortgageapplication.MortgageActive == true && mortgageapplication.MortgageCoordinator==ID
         } 
```

我只是在尝试，但让我知道我们是否可以将 if 放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:10:32.093

这个查询在逻辑上是等价的：

```
var loanPurpose = 7;
var coordinatorId = ...;
var query =
    from app in context.MortgageApplications
    where app.PurposeOfLoan != loanPurpose
        || (app.MortgageActive && app.MortgageCoordinator == coordinatorId)
    select application; 
```

逻辑如下，您只想检查它是否处于活动状态并由给定的协调器。否则得到任何应用程序。

# c# - 在 Visual Studio 2012 上使用 Web 参考而不是服务参考

> ID：14372419
> 
> 赞同：2
> 
> 时间：2013-01-17T04:54:59.877
> 
> 标签：c#, wcf, web-services, asp.net-mvc-4, visual-studio-2012

嗨，我已经在我的 VS 2012 上创建了 WCF，并将它添加到我的新 Web 应用程序中。（.NET 4.5）

问题是我看不到我的 WCF 服务命名空间。

然后我尝试在兼容性下使用 Add Web Reference ，然后它就可以工作了。

Visual Studio 2012 上的服务参考的本质是什么，而您仍在使用 Web 参考？

我知道 .net 2.0 上使用的 Web 参考和服务参考适用于 .net 3.0 及更高版本。

有没有人可以提供处理这个问题的细节。还是我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:44:21.110

我已经找到了解决方案。

问题是 Visual Studio 2012 上的 Newtonsoft.Json dll。

我所做的是先删除参考上的 Newtonsoft.Json dll，然后再在我的项目上添加服务参考，然后再次添加 Newtonsoft.Json dll。

之后，您可以在项目中添加所需的服务引用。

# events - ZK如何停止选项卡的OnClick事件？

> ID：14372420
> 
> 赞同：2
> 
> 时间：2013-01-17T04:55:06.703
> 
> 标签：events, onclick, tags, zk

我正在创建动态`tabs`. 我已经创建了`1st`选项卡，然后创建了选项`2nd`卡等。当我在`3rd`选项卡上时，我希望用户不能选择其他选项卡，或者换句话说，用户将无法从一个选项卡移动到其他选项卡。

我`event.propagation();`用来停止事件，但它不起作用。有没有人有其他解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:17:59.043

试试这个：

祖尔

```
<zk>
    <div apply="test.TestComposer">
        <tabbox>
            <tabs id="tbs" />
            <tabpanels id="tps" />
        </tabbox>
        <button id="btn" label="add tab" />
    </div>
</zk> 
```

TestComposer.java

```
package test;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.zkoss.zk.ui.Component;
import org.zkoss.zk.ui.event.*;
import org.zkoss.zk.ui.select.SelectorComposer;
import org.zkoss.zk.ui.select.annotation.Listen;
import org.zkoss.zk.ui.select.annotation.Wire;
import org.zkoss.zk.ui.util.Clients;
import org.zkoss.zul.Button;
import org.zkoss.zul.Label;
import org.zkoss.zul.Tab;
import org.zkoss.zul.Tabpanel;
import org.zkoss.zul.Tabpanels;
import org.zkoss.zul.Tabs;

/**
 * Tested with ZK 6.0.2 and ZK Pivottable 2.0.0
 *
 */
@SuppressWarnings("rawtypes")
public class TestComposer extends SelectorComposer {
    @Wire
    Button btn;
    @Wire
    Tabs tbs;
    @Wire
    Tabpanels tps;
    List tabs = new ArrayList();
    int limit = 3;

    @Listen("onClick = #btn")
    public void onClick$btn () {
        if (tabs.size() < limit) {
            Tab tab = new Tab("Tab " + (tabs.size()+1));
            tab.setParent(tbs);
            tabs.add(tab);
            Tabpanel tp = new Tabpanel();
            new Label("Tabpanel " + tabs.size()).setParent(tp);
            tp.setParent(tps);

            if (tabs.size() == limit) {
                tab.setSelected(true);
                overrideBehavior();
            }
        }
    }
    public void overrideBehavior () {
        final Tab toSel = (Tab)tabs.get(tabs.size()-1);
        for (int i = 0; i < tabs.size() - 1; i++) {
            final Tab tab = (Tab)tabs.get(i);
            tab.addEventListener( // add an EventListener
                    "onClick", // listen to onClick event
                    new EventListener () { // create an EventListener instance to add
                        public void onEvent (Event event) { // the method will be called while onClick event triggered
                            Clients.evalJavaScript("zk.log('"+tab+"  clicked')");
                            toSel.setSelected(true); // make sure the third one is selected at server side
                        }
                    }
                );
                tab.setWidgetOverride("_sel", "function(notify, init) {return;}"); // prevent select at client side
        }
    }
} 
```

# android - 我是否必须通过 ContentResolver 关闭使用过的光标？

> ID：14372421
> 
> 赞同：3
> 
> 时间：2013-01-17T04:55:11.663
> 
> 标签：android, android-contentresolver, android-cursor

例如，给定以下代码：

```
Cursor myCursor = context.getContentResolver()
    .query(MediaStore.CONTENT_URI, null, null, null, null);` 
```

我必须关闭“myCursor”吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-03T05:36:45.993

游标应始终以某种方式关闭以避免内存泄漏。但是，如果您正在实现，`LoaderManager.LoaderCallbacks<Cursor>`则覆盖以下方法会为您关闭光标。

```
@Override
public void onLoaderReset(Loader<Cursor> arg0) {
    cursorAdapter.swapCursor(null);
} 
```

# javascript - 如何在 JS 的文本中包含 JS

> ID：14372425
> 
> 赞同：1
> 
> 时间：2013-01-17T04:55:52.357
> 
> 标签：javascript, html, ajax, button, interaction

我有一个函数 ajaxinclude() ，它包含页面的内容。当写成这样时，它可以完美地工作：

```
<div>
     <script type="text/javascript">
          ajaxinclude("info/content/About.php")
     </script>
</div> 
```

现在，我想要一个点击按钮。因此，

```
<button onclick="document.getElementById('aaa').innerHTML = '<script type='text/javascript'>ajaxinclude(\'info/content/About.php\');</script>">Hello</button> 
```

但这不起作用。

另一种方法是

```
<button onclick="document.getElementById('aaa').innerHTML = '<script type='text/javascript'>' + ajaxinclude('info/content/About.php') + '</script>">Hello</button> 
```

但这也不起作用。

这是我的 ajaxinclude() 函数：

```
var rootdomain = "http://" + window.location.hostname;

function ajaxinclude(url) {
    var page_request = false

    if (window.XMLHttpRequest)
    page_request = new XMLHttpRequest()
    else if (window.ActiveXObject){
        try {
            page_request = new ActiveXObject("Msxml2.XMLHTTP")
        } 
        catch (e){
            try{
                page_request = new ActiveXObject("Microsoft.XMLHTTP")
            }
            catch (e){}
        }
    }
    else
    return false
    page_request.open('GET', url, false)
    page_request.send(null)
    writecontent(page_request)
}

function writecontent(page_request){
    if (window.location.href.indexOf("http")==-1 || page_request.status==200)
    document.write(page_request.responseText)
} 
```

如何，如何在按钮单击时包含文本？

PS：我不想要 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:58:28.593

尝试

```
<button onclick="document.getElementById('aaa').innerHTML = ajaxinclude('info/content/About.php')">Hello</button> 
```

但是我必须警告，内联 JavaScript 是不好的做法，尤其是像这样！您可以重写您的`writecontent`函数以接受两个参数：页面请求和要写入的目标的 ID。

您的新`writecontent`功能将是：

```
function writecontent(page_request, write_target){
    if (window.location.href.indexOf("http")==-1 || page_request.status==200) {
        document.getElementById(write_target).innerHTML = page_request.responseText;
    }
} 
```

您需要在那里传递写入目标的 ID，并且由于您是从 调用`writecontent`的`ajaxinclude`，因此您也需要那里的参数：

```
function ajaxinclude(url, write_target) {
    // ...
    writecontent(page_request, write_target);
} 
```

在按钮中：

```
<button onclick="ajaxinclude('info/content/About.php', 'aaa')">Hello</button> 
```

## 可选择继续...

更好的做法是将`click`动作绑定到按钮而不是使用`onclick`. 使用 jQuery 会更容易，但由于您明确声明不想使用 jQuery，您也可以`addEventListener()`在 JavaScript 中使用：

```
document.getElementById('thisbutton').addEventListener('click', function(){ajaxinclude('info/content/About.php', 'aaa')}, false); 
```

这会将按钮更改为：

```
<button id='thisbutton'>Hello</button> 
```

[在 Mozilla 开发人员网络上阅读有关事件侦听器的更多信息](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:12:09.533

你的意图是什么。

通过您的代码单击按钮，ID为“aaa”的元素的innerHTML成为脚本函数

# pagination - 使用 kaminari 和 mongoid 计算模型所在的页面

> ID：14372430
> 
> 赞同：1
> 
> 时间：2013-01-17T04:56:18.497
> 
> 标签：pagination, mongoid, kaminari, mongoid3

我需要计算评论所在的页面，以便创建指向它的直接链接。我正在使用带有[monogid的](http://mongoid.org/en/mongoid/index.html)[kaminari](https://github.com/amatsuda/kaminari)分页。在[kaminari 的 wiki](https://github.com/amatsuda/kaminari/wiki/FAQ)上，他们有一个关于如何使用 activerecord 的解决方案，但我不确定将其转换为 mongoid 的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:00:42.070

如果您使用的是 Mongoid 3，则此方法可以完成工作：

```
class User
  include Mongoid::Document

  ...

  def page_num(options = {})
    field = options[:by] || :_id
    order = options[:order] || :asc
    per   = options[:per] || self.class.default_per_page

    operator = (order == :asc) ? field.to_sym.lte : field.to_sym.gte
    (self.class.where(operator => read_attribute(field)).order_by("#{field} #{order}").count.to_f / per).ceil
  end

  ...
end 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:31:49.713

这是我最终想出的精简版本。

```
def page_num
  number_before = self.class.where(recipe_id: recipe.id).gte(created_at: created_at).count.to_f
  number_on_page = self.class.default_per_page
  (number_before / number_on_page).ceil
end 
```

# php - CSV 下载不能在现场工作，但在 localhost

> ID：14372432
> 
> 赞同：0
> 
> 时间：2013-01-17T04:56:41.090
> 
> 标签：php, apache, drupal, csv

尽管它在本地主机上工作，但我在现场下载 CSV 时遇到问题。

我已经[在本地主机上完成了 csv 文件下载，但在现场没有](https://stackoverflow.com/questions/13977022/file-download-for-csv-works-in-local-host-but-not-when-live)

，但这种方法对我也没有奏效。我试过了。

这是我的代码，请看一下-

```
 //Final function, called from module file.
function event_signup_download_detail($nid)
{  
    module_load_include('inc', 'signup_event', 'event_signup_view');
    $csv_output = '';
    $csv_output .= "Role,Last name,First Name,Patrol,Position,Home phone,Cell Phone,Email,Payment Date,Unit Join Date,Payment Status\n";           
    $nid = 2001;

    // add the paid users to the csv 
    $csv_output .= getPaidScoutUsers($nid);

    // get unpaid users, add them to the csv
    $csv_output .= getUnpaidUsers($nid);

    header('Content-type: "application/vnd.ms-excel"');
    header('Content-Disposition: attachment;filename=\"Registration_information.csv\"');
    echo $csv_output;
    exit; 

} 
```

它只是在页面上输出结果。我需要在 CSV 文件中，这应该是下载的..

根据评论，我想在我的 .htaccess 中进行更改，但问题是，下载 csv 已经在具有相同代码行的其他页面上工作，所以它也必须在这里工作..

我不明白，这个打印是如何终止要开始的下载的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T07:46:39.640

添加此标头（'Content-type: "application/vnd.ms-excel"; charset=utf-8'); 而不是 header('Content-type: "application/vnd.ms-excel"');

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T05:17:22.547

您需要使用服务器配置强制下载。在 Apache 上，这可以在您的 .htaccess 文件中使用

```
 AddType application/octet-stream .csv 
```

# html - SVG 中的剪切路径在 Safari 中不起作用

> ID：14372435
> 
> 赞同：4
> 
> 时间：2013-01-17T04:57:03.383
> 
> 标签：html, svg, safari, clipping

我在 Illustrator 中创建了一个简单的多边形，然后在图像前面创建了一个剪切路径（蒙版）。我已将它导出为 SVG 文件，它可以在 Chrome 和 Safari 中完美呈现。

但是，当我使用 SVG 数据创建 HTML 文件时，它在 Chrome 中完美呈现，但在Safari 6.0.2中却*没有。*

不太确定我可能做错了什么；我创建了 SVG 示例（[个人网站](http://roberskine.com/playground/clipping.svg)）和 HTML（[jsfiddle 上](http://cl.ly/MEzJ)的示例）的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T17:38:58.493

您必须在 Safari 中遇到错误，而不是使用`use`来应用掩码，只需使用实际`polygon`元素：

```
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="700px" height="700px" viewBox="0 0 700 700" style="enable-background:new 0 0 700 700;" xml:space="preserve">
  <g>  

    <clipPath id="SVGID_2_">
      <polygon id="SVGID_1_" points="576.35,444.245 670.595,350 576.349,255.754 576.349,123.651 444.246,123.651 350,29.405 255.755,123.651 122.96,123.651 122.96,256.446 29.405,350.001 122.96,443.555 122.96,577.041 256.446,577.041 350,670.595 443.554,577.041 576.35,577.041"/>
    </clipPath>

    <g id="LwhyVN.tif" style="clip-path:url(#SVGID_2_);">
      <image style="overflow:visible;" width="1024" height="768" id="Layer_0_1_" xlink:href="http://fc05.deviantart.net/fs13/f/2007/071/9/e/Japanese_shiba_inu__shiba_dog__by_MogamiJ.jpg"  transform="matrix(0.8418 0 0 0.8418 27.5078 37.498)"></image>
    </g>

  </g>
</svg> 
```

这在 Safari 6 中对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-22T15:14:40.933

还要注意你的 html 中是否有基本标记，因为 safari 显然会将基本标记添加到 id 选择器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:40:38.730

Safari 不是 SVG 中的 clipPaths 的忠实拥护者。相反，当嵌入到老式`<Object>`元素中时，它可以完美地工作。不过，为了做到这一点，我需要使用 PHP 标头来定义正确`Content-type`的`application/xhtml+xml`. 没有它，所提供的只是`text/html`Safari（和旧版本的现代浏览器）将不会显示 SVG。

为了将 PHP 与 SVG 一起使用，我需要在我的网络服务器配置文件中添加两个附加项。在 Apache 中，我将类型添加`psvg`到我的 mime-type 文件中，以便相关行如下所示： `image/svg+xml svg svgz psvg`

接下来，我必须在 Apache 配置文件中添加一个额外的 SVG 处理程序，以便相关行看起来像：`AddType application/x-httpd-php .php .php4 .phtml .psvg`这样任何`.psvg`文件都呈现为 PHP。

所以我创建了一个名为 faces.psvg 的新文件，它看起来像这样：

```
<?php
    header("Content-type: image/svg+xml");
    print('<?xml version="1.0" encoding="iso-8859-1"?>');
?>
<svg version="1.1"> //your svg file data </svg> 
```

然后我创建了一个名为 index.php 的新 .php 文件，它看起来像这样：

```
<html>
<head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" />
</head>
<body>
     <object type="image/svg+xml" data="faces.psvg" width="1120" height="800"></object>
</body>
</html> 
```

瞧，到处都可以使用 svg 剪贴蒙版，甚至是 Mobile Safari。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T23:04:46.600

`clipPath`您应该将元素包装在`defs`元素中：

```
**<defs>**<clipPath></clipPath>**</defs>** 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-07T14:53:44.190

我设法解决了这个问题，使用了 a`:before`并将剪辑和颜色应用于它：

```
.field_captioned_carousel .teaser>.teasertextbg:before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    -webkit-clip-path: polygon(70px 0%,100% 0,100% 100%,0 100%,0 70px);
    clip-path: polygon(50px 0%,100% 0,100% 100%,0 100%,0 50px);
    background-color:#ff0000;
} 
```

# c# - 字典实例化

> ID：14372438
> 
> 赞同：0
> 
> 时间：2013-01-17T04:57:32.570
> 
> 标签：c#, dictionary, type-conversion, new-operator, instantiation

```
Dictionary<string,object> dict = new Dictionary <string,object>(); 
```

我可以`dict`用其他一些对象实例化“”吗？

例如：

```
dict = new Dictionary<string,bitmap>(); 
```

或者：

```
dict = new Dictionary<string, Image>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T08:09:06.010

不，因为`Dictionary<string, object>`和`Dictionary<string, Bitmap>`是两种不同的类型。

想象一下在以下场景中会发生什么：

```
Dictionary<string, Bitmap> bmpDict = new Dictionary<string, Bitmap>();
Dictionary<string, object> dict = bmpDict;
dict.Add("someKey", 42); 
```

编译器必须编译它，因为 中的值`dict`被键入为`object`，因此 并且`int`是一个有效的选择。`Bitmap`但是，这会与只接受值的实例化字典发生冲突：

```
Bitmap someBmp = bmpDict["someKey"]; 
```

`Bitmap`显然，根据声明和实例化的类型，值应该是 a `bmpDict`，但正如我们在上面看到的，不是 a 的东西是`Bitmap`通过`dict`变量添加的。如您所见，类型安全将被破坏。

因此，`Dictionary<string, object>`并`Dictionary<string, Bitmap>`不能相互分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:11:36.813

如果直接回答问题。
这是不可能的

```
Dictionary<string, object> dick; 
dick = new Dictionary<string, Image>(); 
```

因为**dick**被声明为可以保存任何类型的对象的字典类型，这与只能保存 Image 类型对象的值的字典相矛盾。

当然，您可以用任何类型的值 填充**dick 。**

**更新：**
我仍然怀疑[OR Mapper 的解释](https://stackoverflow.com/a/14374605/200449)以及如何正确解释它。

这样的逻辑解释不了太多。

1)

`Bitmap someBmp = bmpDict["someKey"];`

应该作为

`object someBmp = bmpDict["someKey"];`

2）
按照这种逻辑，不可能实例化为

```
object obj = new Image();
obj = new BitmapImage(); 
```

但这是可能的。

IMO，这里的要点是类型的字典

*   `Dictionary <string, Image>()`

只能包含相同（或兼容的子）类型的值，而字典类型

*   `Dictionary<string, object>`

的不同？

# c++ - 请帮助我在 C 或 C++ 中排序

> ID：14372447
> 
> 赞同：-5
> 
> 时间：2013-01-17T04:58:25.830
> 
> 标签：c++, c, arrays, sorting

我在 c 中有一个数组（2D）：

80|100|70|50|120

A|C|D|F|K

我需要将其分类为：

50|70|80|100|120

F|D|A|C|K

我正在使用 c 或 c++。请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:00:17.017

您还有[`qsort`](http://en.cppreference.com/w/cpp/algorithm/qsort),[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)以及使用示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:27:56.147

在 C++ 中：

```
std::vector<int> keys;
std::vector<char> values;
std::map<int, char> kvtable;

keys.push_back(80);
values.push_back('A');

keys.push_back(100);
values.push_back('C');

keys.push_back(70);
values.push_back('D');

keys.push_back(50);
values.push_back('F');

keys.push_back(120);
values.push_back('K');

int i;
for (i = 0; i < keys.size(); i++) {
    kvtable[keys[i]] = values[i];
}

std::sort(keys.begin(), keys.end());

for (i = 0; i < keys.size(); i++) {
    std::cout << keys[i] << " = " << kvtable[keys[i]] << "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:35:03.757

我认为您应该做的是创建一个实用的一维指针数组，指向数组的第一维，并提供自定义比较函数来对实用程序数组进行排序。然后您可以进行指针数学运算以创建数组的排序副本（并在必要时使用 memcpy 覆盖原始数组）

```
static int ARRAY_LEN = 5;

int[2][ARRAY_LEN] origArray;
int*[ARRAY_LEN] pointerArray;

for(int i = 0; i < ARRAY_LEN; i++){
    pointerArray[i] = &origArray[0][i];  //create the pointer array
}

qsort(pointerArray, ARRAY_LEN, sizeof(int*), compar); //sort the pointer array

/*We need to define the comparison function */
int compar ( const void * elem1, const void * elem2 ){
    return **(int**)elem1 - **(int**)elem2;
} 

int[2][ARRAY_LEN] sortedArray;

for(int i = 0; i < ARRAY_LEN; i++){
    int* curr = pointerArray[i];
    int firstDimValue = *curr; // get the first dimension of the ith element of the sorted array
    int secondDimValue = curr[ARRAY_LEN]; // get the 2nd dimension of the ith element of the sorted array - this works because of the way that 2D arrays are laid out in memory

    sortedArray[0][i] = firstDimValue;
    sortedArray[1][i] = secondDimValue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:56:20.043

1.  创建一个数组来保存这样的数字：

    整数数组[5] = {80,100,70,50,120};

2.创建一个函数来比较两个元素：

```
 bool compare(int a,int b)
{
   return a<b; //ASC
} 
```

3.使用库函数 sort() ：

```
sort(array,array+5,compare); 
```

4.现在数组已经被ASC正确排序了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T10:03:30.530

像这样的排序有很多类型：

```
void Swap(int &x,int &y)   //not sort, just for swap two elems
{
    int temp;
    temp=x;
    x=y;
    y=temp;
} 

void StraightInsertSort(int elem[],int n) 
{
    int i,j,temp;
    for(i=1;i<n;i++)
    {
        temp=elem[i];
        for(j=i-1;j>=0&&temp>elem[j];j--)
        {
            elem[j+1]=elem[j];
        }
        elem[j+1]=temp;
    }
}

void SimpleSelectSort(int elem[],int n) 
{
    for(int i=0;i<n-1;i++)
    {
        int lowIndex=i;
        for(int j=i+1;j<n;j++)
        {
            if(elem[j]>elem[lowIndex])
            lowIndex=j;
        }
    Swap(elem[i],elem[lowIndex]);
    }
}

void Bubblesort(int elem[],int n)
{
    for(int i=n-1;i>0;i--)
    {
        for(int j=0;j<i;j++)
        {
            if(elem[j]<elem[j+1])
            {
                Swap(elem[j],elem[j+1]); 
            }
        }
    }
} 
```

# c# - 在 Castle Windsor 中注册泛型类型

> ID：14372449
> 
> 赞同：4
> 
> 时间：2013-01-17T04:58:30.770
> 
> 标签：c#, generics, dependency-injection, castle-windsor

目前我有一个安装程序，代码如下：

```
container.Register(Component.For<EntityListResolver<Unit>>()
         .ImplementedBy<EntityListResolver<Unit>>());
container.Register(Component.For<EntityResolver<Unit>>()
         .ImplementedBy<EntityResolver<Unit>>()); 
```

我想更改此注册，以便它自动解析我发送的任何类型，而不是`Unit`

如何更改我的注册以实现此目的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:59:11.870

您可以使用开放泛型，例如：

```
container.Register(Component.For(typeof(EntityListResolver<>))()
         .ImplementedBy(typeof(EntityListResolver<>))()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:41:58.173

如果您在编译时知道您的类型，则可以在通用函数中进行注册：

```
void Register<T>()
{
    container.Register(Component.For<EntityListResolver<T>>()
             .ImplementedBy<EntityListResolver<T>>());
    container.Register(Component.For<EntityResolver<T>>()
             .ImplementedBy<EntityResolver<T>>());
} 
```

然后只需调用`Register<Unit>();`或您需要的任何类型。

# jquery - 如何使代码更简单，如果我需要点击 a eq(0) show b eq(0) hide others, a eq(1) show b eq(1) hide others..？

> ID：14372452
> 
> 赞同：1
> 
> 时间：2013-01-17T04:58:41.237
> 
> 标签：jquery

如何使下面的代码更简单，更少？

谢谢。

```
<div class="btn"><div>0</div><div>1</div><div>2</div></div>
<div class="content"><div>0</div><div>1</div><div>2</div></div>

$('.btn div:eq(0)').click(function(){
    $('.content div').hide();
    $('.content div:eq(0)').show();
});
$('.btn div:eq(1)').click(function(){
    $('.content div').hide();
    $('.content div:eq(1)').show();
});
$('.btn div:eq(2)').click(function(){
    $('.content div').hide();
    $('.content div:eq(2)').show();
});
$('.btn div:eq(3)').click(function(){
    $('.content div').hide();
    $('.content div:eq(3)').show();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:02:54.630

试试这个

```
$('.btn div').click(function(){
    $('.content div').hide();
    $('.content div:eq('+$(this).index()+')').show();
}); 
```

[jsfiddle](http://jsfiddle.net/f9hS9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T05:03:35.813

```
$(".btn div").click(function () {
   $(".content div").hide().eq($(".btn div").index(this)).show();
}); 
```

[http://jsfiddle.net/Xepmg/](http://jsfiddle.net/Xepmg/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T05:13:55.293

你可以这样做：

```
var numClicked = '';

$('.btn div').on('click', function() {
     numClicked = $('.btn div').index(this);
     $('.content div').hide();
     $('.content div').eq(numClicked).show();
}); 
```

虽然我不完全记得它是如何完成的，但还有一种更好的方法。

# java - 如何在 Java 中检查树形图是否为空

> ID：14372456
> 
> 赞同：1
> 
> 时间：2013-01-17T04:59:20.877
> 
> 标签：java

有什么方法可以检查树图是否为空？

如果树图为空，我的代码永远不会进入以下 for 循环。

```
for (Map.Entry<BigInteger, ArrayList<BigInteger>> entry : myMap.entrySet()) {
      if (entry.getKey() == FirstModulus) {
    ArrayList<BigInteger> list = new ArrayList<BigInteger>();
    list = myMap.get(FirstModulus);
    list.add(gcd);
 } 
      else {
    ArrayList<BigInteger> list = new ArrayList<BigInteger>();
    list.add(gcd);
    myMap.put(FirstModulus, list);
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-22T16:28:49.953

```
myMap.isEmpty() 
```

`TreeMap`扩展[AbstractMap](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractMap.html)并因此继承其所有定义的方法。您不会`isEmpty()`在`TreeMap`文档中看到，因为它是在其父类中定义的，并且不需要覆盖它，因为可以使用相同的方法来确定地图是否为空。

# winapi - 跟踪 Office 文件之间的复制/粘贴

> ID：14372457
> 
> 赞同：1
> 
> 时间：2013-01-17T04:59:33.693
> 
> 标签：winapi, ms-office, clipboard

我正在尝试监视不同 MS Office 文件之间的复制和粘贴操作（即，用户将幻灯片从一个 PowerPoint 演示文稿复制到另一个，或者用户将 Excel 图表复制到 Word 中）。理想情况下，我想记录以下信息：

1.  源文件
2.  目标文件
3.  被复制的对象/数据

我目前的想法：

实现一个剪贴板查看器，在`WM_DRAWCLIPBOARD`收到消息时识别剪贴板所有者窗口（和数据） - 但是我如何识别随后调用 getClipboardData 的窗口 - 以识别目标文件？

我也愿意接受其他建议。. .

# java - javascript - 获取弹出消息 - 此页面需要 AC_RunActiveContent.js

> ID：14372458
> 
> 赞同：0
> 
> 时间：2013-01-17T05:00:00.513
> 
> 标签：java, javascript, html, jsp

在我的应用程序中，我使用以下代码。当我尝试打开 html 文件时，我收到了弹出消息`"This page requires AC_RunActiveContent.js."`

我已导入文件 AC_RunActiveContent.js。进入我的包裹并引用相同的内容。谁能帮我解决这个问题？
代码是

```
<HTML>
<script language="javascript">AC_FL_RunContent = 0;</script>
<script language="javascript"> DetectFlashVer = 0; </script>
<script src="AC_RunActiveContent.js" language="javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
var requiredMajorVersion = 10;
var requiredMinorVersion = 0;
var requiredRevision = 45;
-->
</script>
<BODY bgcolor="#FFFFFF">

<script language="JavaScript" type="text/javascript">
<!--
if (AC_FL_RunContent == 0 || DetectFlashVer == 0) {
    alert("This page requires AC_RunActiveContent.js.");
} 
else {
    var hasRightVersion = DetectFlashVer(requiredMajorVersion, requiredMinorVersion, requiredRevision);
    if(hasRightVersion) { 
        AC_FL_RunContent(
            'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,45,2',
            'width', '400',
            'height', '250',
            'scale', 'noscale',
            'salign', 'TL',
            'bgcolor', '#777788',
            'wmode', 'opaque',
            'movie', 'charts',
            'src', 'charts',
            'FlashVars', 'library_path=charts_library&xml_source=sample.xml', 
            'id', 'my_chart',
            'name', 'my_chart',
            'menu', 'true',
            'allowFullScreen', 'true',
            'allowScriptAccess','sameDomain',
            'quality', 'high',
            'align', 'middle',
            'pluginspage', 'http://www.macromedia.com/go/getflashplayer',
            'play', 'true',
            'devicefont', 'false'
            ); 
    } else { 
        var alternateContent = 'This content requires the Adobe Flash Player. '
        + '<u><a href=http://www.macromedia.com/go/getflash/>Get Flash</a></u>.';
        document.write(alternateContent); 
    }
}
// -->
</script>
<noscript>
    <P>This content requires JavaScript.</P>
</noscript>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:24:40.660

您将变量值分配给 0：

```
AC_FL_RunContent = 0; <--
DetectFlashVer = 0;   <-- 
```

并检查它：

```
if (AC_FL_RunContent == 0 || DetectFlashVer == 0) {
    alert("This page requires AC_RunActiveContent.js.");
} 
else {
.... 
```

因此，请尝试删除前两个变量，并检查您的**AC_RunActiveContent.js**脚本是否已加载

# c++ - MinGW-Clang 的 libgcc_s_dw2-1.dll 丢失了吗？

> ID：14372469
> 
> 赞同：4
> 
> 时间：2013-01-17T05:01:14.853
> 
> 标签：c++, mingw, clang, mingw-w64

当我尝试运行[rubenvb 的 Clang 3.2](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/clang-3.2-release/)时，我得到：

> 该程序无法启动，因为`libgcc_s_dw2-1.dll`您的计算机中缺少该程序。
> 尝试重新安装程序以解决此问题。

我在任何地方都找不到 DLL...我缺少什么包/如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T06:35:51.360

你还需要下载一个 gcc 包，Clang 的构建不附带 C++ 库或任何东西。这意味着要与 gcc 包结合使用。从[这里](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/clang-3.1-release/)：

> 在这里，您将找到最新的 Clang 编译器版本。目前，它是用于 C 和 C++ 的 32 位功能编译器。**Clang 目前可以与 gcc-dw2-4.6* 包一起使用。**我还提供 64 位构建，但这些仅对 C 有用。将 C++ 编译为 64 位目标代码将导致链接器错误。您仍然可以使用 if 进行更好的诊断和静态分析。**要使用它，您应该将 Clang 包提取到与 gcc-dw2 包相同的目录中，以使 ddirectories 重叠。这确保 Clang 可以找到 C 和 C++ 标头。**要使用 clang，只需将“gcc”替换为“clang”、“g++”和“clang++”。Clang 目前模仿 GCC 作为前端，GCC 接受的所有选项，Clang 都接受。Clang 不支持的一些选项将被忽略。一些与 DLL 相关的问题仍然存在，向我或 LLVM bugtracker 报告这些（如果尚未这样做的话）将有助于识别并最终修复它们。

# mvvm - 在 MVVM 上使用 Josh Smith 的演示应用程序的窗口太多

> ID：14372470
> 
> 赞同：0
> 
> 时间：2013-01-17T05:01:31.737
> 
> 标签：mvvm

我正在尝试学习 MVVM。Josh 的演示应用程序看起来很一般，我可以通过替换与客户相关的类来创建一个新应用程序。为此，我使用 Josh 的大部分代码从头开始创建了一个新项目。有时我将他的代码粘贴到我的文件中，有时我只是复制了一个完整的文件。在进行过程中，我删除了对客户类的所有引用。

我一定错过了一些重要的事情，因为运行代码会产生两个窗口而不是一个。我看到 Josh 如何在 App.OnStartUp() 中创建一个窗口。该应用程序将创建一个没有此代码的窗口，这就是我有两个窗口的原因。我不明白为什么他的原始演示只有一个窗口。

在挠了一个小时后，我想我需要一个提示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:10:19.143

我一直在搜索，在 App.xaml 中找到了 StartupUri="MainWindow.xaml" 这一行。现在我只有一个窗口。

# android - 在 Listview 中获取更多 XML 布局

> ID：14372471
> 
> 赞同：0
> 
> 时间：2013-01-17T05:01:43.063
> 
> 标签：android, listview, android-listview, listadapter

我想在不同的行上用不同的 XML 模板填充一个列表视图。我失去了一个教程，现在我被卡住了。我得到所有行的相同模板。所以我所做的是，我创建了一个适配器和一个包装器：

列表视图适配器：

```
import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

public class ListViewAdapter extends ArrayAdapter<ListItem> {

    private Activity activity = null;

    private List<ListItem> items = null;

    private int templateId = 0;

    public static final int TPL_TITLE = 1;

    public static final int TPL_PAYMENT = 2;

    public static final int TPL_NOTE = 3;

    public int getTemplateId() {

        return templateId;

    }

    public Activity getActivity() {

        return activity;

    }

    public void setActivity(Activity activity) {

        this.activity = activity;

    }

    public List<ListItem> getItems() {

        return items;

    }

    public void setItems(List<ListItem> items) {

        this.items = items;

    }

    public ListViewAdapter(Activity activity, List<ListItem> items,

            int templateId) {

        super(activity, android.R.layout.simple_list_item_1, items);

        this.items = items;

       this.activity = activity;

        this.templateId = templateId;

    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;

        ListViewWrapper wrapper = null;

        if (row == null) {

            LayoutInflater inflater = activity.getLayoutInflater();

            row = inflater.inflate(R.layout.listviewtemplates, null);

            wrapper = new ListViewWrapper(row);

            row.setTag(wrapper);

        } else {

            wrapper = (ListViewWrapper) row.getTag();
        }

        wrapper.setTemplateId(templateId);

        wrapper.populateFrom(items.get(position));

        return (row);

    }

} 
```

列表视图包装器：

```
import android.view.View;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class ListViewWrapper {

    private TextView title = null; //txt

    private TextView description = null; //subtext

    private TextView amount = null;

    private TextView date = null; 

    private ImageView vink = null; 

    private ImageView label = null; //icon

    private TableRow listitem = null;

    private View row = null;

    private int templateId = 0;

    //Set the right template view to be visible

    private void setTemplate() {

        row.findViewById(R.id.templatetitle).setVisibility(View.GONE);

        row.findViewById(R.id.templatepayment).setVisibility(View.GONE);

        row.findViewById(R.id.templatenote).setVisibility(View.GONE);

        switch (templateId) {

        case ListViewAdapter.TPL_TITLE:

            row.findViewById(R.id.templatetitle).setVisibility(View.VISIBLE);

            break;

        case ListViewAdapter.TPL_PAYMENT:

            row.findViewById(R.id.templatepayment).setVisibility(View.VISIBLE);

            break;

        case ListViewAdapter.TPL_NOTE:

            row.findViewById(R.id.templatenote).setVisibility(View.VISIBLE);

            break;

        }

    }

    public ListViewWrapper(View row) {

        this.row = row;

    }

    //Fill the template with the right values

    public void populateFrom(ListItem r) {

        getText().setText(r.getTitle());

        if (templateId == ListViewAdapter.TPL_TITLE) {
             //Do Nothing... Title is enough

//            getIcon().setImageResource(

  //                  ImageUtilities.getDrawableById(r.getType()));

        }

        if (templateId == ListViewAdapter.TPL_PAYMENT) {
            //SUBTXT, AMOUNT, DATE

             getSubtext().setText(r.getDescription());
             getAmount().setText(r.getAmount());
             getDate().setText(r.getDate());
                     }

        if (templateId == ListViewAdapter.TPL_NOTE) {
               getLabel().setImageResource(r.getLabel());
               getBackground().setBackgroundResource(r.getBackground());
            if (r.getVinkOn()==1){getVink().setImageResource(R.drawable.vink_on);}else{getVink().setImageResource(R.drawable.vink_off);}
            }

        setTemplate();

    }

    public int getTemplateId() {

        return templateId;

    }

    public void setTemplateId(int templateId) {

        this.templateId = templateId;

        switch (templateId) {

        case ListViewAdapter.TPL_TITLE:

            break;

        case ListViewAdapter.TPL_PAYMENT:

            break;

        case ListViewAdapter.TPL_NOTE:

            break;

        }

    }

//SET MAIN TITLE ID
    TextView getText() {

        if (title == null) {

            switch (templateId) {

            case ListViewAdapter.TPL_TITLE:

                title = (TextView) row.findViewById(R.id.titletitle);

                break;

            case ListViewAdapter.TPL_PAYMENT:

             title = (TextView) row.findViewById(R.id.titlepayment);

                break;

            case ListViewAdapter.TPL_NOTE:

                title = (TextView) row.findViewById(R.id.notetxt);

                break;

            }

        }

        return (title);

    }

    //Alternative text (all except template 2)

    TextView getSubtext() {

        if (description == null) {

            switch (templateId) {

            case ListViewAdapter.TPL_PAYMENT:

                description = (TextView) row.findViewById(R.id.descriptionpayment);

                break;

            }

        }

        return (description);

    }

    TextView getAmount() {

        if (amount == null) {

            switch (templateId) {

            case ListViewAdapter.TPL_PAYMENT:

                amount = (TextView) row.findViewById(R.id.groupamount);

                break;

            }

        }

        return (amount);

    }

    TextView getDate() {

        if (date == null) {

            switch (templateId) {

            case ListViewAdapter.TPL_PAYMENT:

                date = (TextView) row.findViewById(R.id.date_payment);

                break;

        }

        }

        return (date);

    }

    ImageView getLabel() {

          if (label == null) {

              switch (templateId) {

          case ListViewAdapter.TPL_PAYMENT:

                  label = (ImageView) row.findViewById(R.id.labelpayment);

                  break;

          case ListViewAdapter.TPL_NOTE:

              label = (ImageView) row.findViewById(R.id.label_note);

              break;

      }
          }

        return (label);

    }

    ImageView getVink() {

      if (vink == null) {

            switch (templateId) {

        case ListViewAdapter.TPL_NOTE:

            vink = (ImageView) row.findViewById(R.id.vink);

            break;

    }
        }

      return (vink);

  }

    LinearLayout getBackground(){

      if (listitem == null) {

          switch (templateId) {

        case ListViewAdapter.TPL_PAYMENT:

              listitem = (TableRow) row.findViewById(R.id.templatepayment);

              break;

        case ListViewAdapter.TPL_NOTE:

            listitem = (TableRow) row.findViewById(R.id.templatenote);

            break;

        case ListViewAdapter.TPL_TITLE:

            listitem = (TableRow) row.findViewById(R.id.templatetitle);

            break;

  }
      }

    return (listitem);

    }

} 
```

并创建了一个 ListItem 类（我需要这样做，还是可以使用 Note.class 和 Payment.class？）

```
public class ListItem {

    private long id;
    private String title;
    private String description;
    private String amount;
    private String date;

    private int label;
    private int background;

    private int type;
    private int vinkon;

    public ListItem(long id, String title, String description, String amount, String date, int type, int vinkon){

        this.id=id;

        this.title = title;

        this.description = description;

        this.amount=amount;

        this.date=date;

        this.type = type;

        this.label=getLabel();

        this.background=getBackground();

        this.vinkon=vinkon;

    }

    public long getId() {
        return id;
      }

      public void setId(long id) {
        this.id = id;
      }

     public String getTitle() {
        return title;
      }

      public void setTitle(String title) {
        this.title = title;
      }

      public String getDescription() {
            return description;
          }

      public void setDescription(String description) {
            this.description = description;
          }

      public String getAmount() {
            return amount;
          }

      public void setAmount(String amount) {
            this.amount = amount;
          }
      public String getDate() {
            return date;
          } 

      public void setDate(String date) {
            this.date = date;
          }

      public int getType() {
                return type;
                      }

public void setType(int type) {
                this.type = type;
                      }

public int getVinkOn() {
    return vinkon;
          }

public void setVinkOn(int vinkon) {
    this.vinkon = vinkon;
          }

public int getLabel() {
    label=R.drawable.c_yellow;
    if (type==11){label=R.drawable.c_azul;}
    if (type==12){label=R.drawable.c_blue;}
    if (type==13){label=R.drawable.c_green;}
    if (type==14){label=R.drawable.c_orange;}
    if (type==15){label=R.drawable.c_purple;}
    if (type==16){label=R.drawable.c_red;}
    if (type==17){label=R.drawable.c_yellow;}
    return label;
          }

public void setLabel(int label) {
    this.label = label;
          }

public int getBackground() {
    background=R.drawable.c_yellow_bg;
    if (type==11){background=R.drawable.c_azul_bg;}
    if (type==12){background=R.drawable.c_blue_bg;}
    if (type==13){background=R.drawable.c_green_bg;}
    if (type==14){background=R.drawable.c_orange_bg;}
    if (type==15){background=R.drawable.c_purple_bg;}
    if (type==16){background=R.drawable.c_red_bg;}
    if (type==17){background=R.drawable.c_yellow_bg;}
    return background;
          }

public void setBackground(int background) {
    this.background = background;
          }

} 
```

在我的活动中，我有以下内容：

```
public void setList(){
         items = new ArrayList();

                title=getString(R.string.allpayments);
                items.add(new ListItem(id, title, description, amount, date, type, vinkon));    

            List<Payment> allpayments=paymentdatasource.getAllPayments();

                for (int i = 0;i<allpayments.size(); i++) {
                    Payment listpayment = allpayments.get(i);
                    id=listpayment.getId();

                 title=listpayment.getTitle();                     
                     description=listpayment.getDescription();
                     amount=listpayment.getGroupAmount();
                     date=listpayment.getDate();

                     items.add(new ListItem(id, title, description, amount, date, type, vinkon));

                }

        //Set adapter basing on template 1

        adapter = new ListViewAdapter(this, items, ListViewAdapter.TPL_PAYMENT);

        ListView mainMenu = (ListView) findViewById(R.id.listview);

        mainMenu.setAdapter(adapter);

        mainMenu.setTextFilterEnabled(true);

    } 
```

抱歉，我丢失了教程，现在我不知道如何将不同的行布局放入列表视图中，希望它可以理解并且有人可以帮助我更进一步。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:47:52.850

通过创建 BaseAdapter( [tutorial](http://www.vogella.com/articles/AndroidListView/article.html#listview_adapterown) ) 的子类来创建自定义列表适配器。在列表适配器的 getView() 方法中，根据您的选择扩展视图。我用过简单的开关，你可以用任何逻辑来选择你的布局。

```
 public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    TextView textView;
    View rv = null;
    if (convertView == null) { // if it's not recycled, initialize some
                                                Display display = getWindowManager().getDefaultDisplay();

            rv = convertView;

            if (rv == null) {

        // Inflate from XML
LayoutInflater li = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                switch(id)
                {
                case 1:                 rv = li.inflate(R.layout.listitemlayout1, null);
                    break;
                case 2:                 rv = li.inflate(R.layout.listitemlayout2, null);

                break;
                case 3:                 rv = li.inflate(R.layout.listitemlayout3, null);

                break;
                }

}

        } else {
            rv = convertView;
        }

        return rv;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:06:14.817

您应该使用对您有帮助的包含标签：

[http://www.coboltforge.com/2012/05/tech-stuff-layout/](http://www.coboltforge.com/2012/05/tech-stuff-layout/)

您可以使用它在不同的原始文件中使用不同的布局。

# android - 复选框列表查看问题

> ID：14372473
> 
> 赞同：0
> 
> 时间：2013-01-17T05:02:13.693
> 
> 标签：android, android-listview, listadapter

我有一个填充有复选框的列表视图。每个框上的文本都用`ListAdapter`. 当一切都加载完毕时，我需要默认选中一些复选框，而其中一些不被选中。我可以调用`setChecked`复选框，但它不起作用。我相信这是因为在`onCreate()`视图中还不可见。所以我把它移到了`onResume()`，`onCreate()`到目前为止它仍然不起作用。似乎它们还没有加载并出现在屏幕上。

```
private void markAllTags()//this will put a check mark on the ones that are already a tag of that question
{
    String tags[] = mUserDb.fetchTagById(mQid);//These are the tags that are already associated with this question
    for(int i = 0; i < this.getListAdapter().getCount(); i++)
    {
        View v = this.getListAdapter().getView(i, null, null);
        //Log.w("NME", "I = " + this.getListAdapter().getView(i, null, null).findViewById(R.id.checkBox1));
        if(v != null)
        {
            CheckBox cb = (CheckBox)v.findViewById(R.id.checkBox1);
            String cbTags = "" + cb.getText();
            for(int j = 0; j < tags.length; j++)
            {
                //Log.w("NME", "cbTag = " + cbTags + " tags[j] = " + tags[j]);
                if(cbTags.equals(tags[j]))
                {
                    cb.setChecked(true);
                }
            }
        }

    }
} 
```

这当前是从 onStart 调用的。

如果我使用`listview.getchildAt()`我会收到一个空值。

编辑：没有崩溃，所以 logcat 中没有真正出现。所以问题是，当满足最终的 if 语句时，它不会将其标记为已检查。

编辑2：所以我尝试了更多的东西。我将上面的功能链接到一个按钮，但它仍然不起作用。当我更改`View v`设置的行时。为此`View v = mListView.getChildAt(i);`，当我按下按钮时它起作用了。但是，当活动开始时它仍然不起作用。现在的问题是 v 为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:12:38.370

您可以通过在代码中添加 else 部分来避免此问题，如下所示

```
if(cbTags.equals(tags[j]))
{
cb.setChecked(true);
}else{
cb.setChecked(false);
} 
```

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:01:29.170

我找到了解决我的问题的方法，可能有更好的方法，如果有的话，我很想听听。我使用了我在一个答案中找到的东西 [当](https://stackoverflow.com/questions/3072173/how-to-call-a-method-after-a-delay)`markAllTags()`我在里面打电话时，`onStart()`我已经用这个包围了它。

```
 final Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
      public void run() {
          markAllTags();
      }
    }, 100); 
```

现在我的`markAllTags()`函数也是这样的：

```
private void markAllTags()//this will put a check mark on the ones that are already a tag of that question
{
    String tags[] = mUserDb.fetchTagById(mQid);//These are the tags that are already associated with this question
    for(int i = 0; i < this.getListAdapter().getCount(); i++)
    {
        View v = mListView.getChildAt(i);
        //View v = this.getListAdapter().getView(i, null, null);
        //Log.w("NME", "I = " + this.getListAdapter().getView(i, null, null).findViewById(R.id.checkBox1));
        Log.w("NME", "checking to see if V != null");
        if(v != null)
        {
            Log.w("NME", "V != null");
            CheckBox cb = (CheckBox)v.findViewById(R.id.checkBox1);
            String cbTags = "" + cb.getText();
            for(int j = 0; j < tags.length; j++)
            {
                //Log.w("NME", "cbTag = " + cbTags + " tags[j] = " + tags[j]);
                if(cbTags.equals(tags[j]))
                {
                    cb.setChecked(true);
                }
            }//end for
        }//end if null

    }//end for
}//end 
```

正如我在上次编辑中提到的那样，我更改了我设置的位置`View v`，而不是它应该大致相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:19:04.620

这不是您通常使用 ListView 的方式。通常，您只需在 onCreate 中设置适配器，以及初始值列表。然后在 Adapter.getView 中，您可以将复选框的值设置为视图应有的值。像这样调用 adapter.getView 是个坏主意——列表视图使用该函数来创建和初始化当前屏幕上的视图，这可能会导致问题。

# google-app-engine - 如何自定义谷歌图表

> ID：14372474
> 
> 赞同：1
> 
> 时间：2013-01-17T05:02:14.707
> 
> 标签：google-app-engine, google-visualization

我正在使用 Google Chart 创建新的图表。我想明智地获得结果排名。例如：

A:10 B:5 C:2 D:1

所以结果应该是这样的

D,C,B,A

有没有办法做到这一点。（我已经在值中添加了减号。但这不是正确的方法吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:03:42.743

对的，这是可能的。

[使用此处](https://code.google.com/apis/ajax/playground/?type=visualization#data_table_advanced_population)的基本代码作为基础：

```
var drawVisualizations = function() {
  // Create and populate a data table.
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Force');
  data.addColumn('number', 'Level');

  // Add 2 rows.
  // google.visualization.DataTable.addRows() can take a 2-dim array of values.
  data.addRows([['Fire', 1], ['Water', 5]]);

  // Add one more row.
  data.addRow(['sand', 4]);

  // Draw a table with this data table.
  var originalVisualization = new google.visualization.Table(document.getElementById('original_data_table'));
  originalVisualization.draw(data);

  // Clone the data table and modify it a little.
  var modifiedData = data.clone();

  // Modify existing cell.
  modifiedData.setCell(1, 1, 666);

  // Sort the data by the 2nd column (counting from 0).
  modifiedData.sort(1);

  // Insert rows in the middle of the data table.
  modifiedData.insertRows(2, [['new fire', 14], ['new water', 41]]);

  // Draw a table with this data table.
  var modifiedVisualization = new google.visualization.Table(document.getElementById('modified_data_table'));
  modifiedVisualization.draw(modifiedData);
} 
```

如您所见，在数据表上使用“sort()”将进行排序。有关排序命令的文档位于[此处](https://developers.google.com/chart/interactive/docs/reference#DataTable_sort)

# php - 使用 PS（postscript）文件将转义码打印到打印机

> ID：14372476
> 
> 赞同：2
> 
> 时间：2013-01-17T05:02:41.197
> 
> 标签：php, pdf, postscript

我正在处理可以接受作为普通文本打印的转义码（即打印机命令）的打印机。

例如，如果我创建一个纯文本文件并写入“~TR%10 10 20 20?” 然后打印它，打印机将其识别为命令，并且不会在纸上打印该位文本。

当我尝试通过 postscript 文件（使用[PS 模块](http://php.net/manual/en/book.ps.php)从 PHP 创建）执行此操作时，我无法让打印机识别与命令相同的文本。相反，它被打印在纸上。

是否有 PS 命令/格式可用于确保将这段文本按原样发送到打印机？

谢谢

**更新：**我也尝试使用 PDF 文件（使用 PHP + [TCPDF](http://www.tcpdf.org)），但也没有运气。

**更新 2：**添加示例代码

```
$ps = ps_new();

ps_open_file($ps, '/var/www/data/test.ps');

ps_set_info($ps, 'BoundingBox', '0 0 1011 638');
ps_set_info($ps, 'Orientation', 'Landscape');
ps_set_info($ps, "Creator", "PHP");
ps_set_info($ps, "Title", "Test");
ps_set_info($ps, "Keywords", "test");

ps_begin_page($ps, 1011, 638);
ps_set_parameter($ps, 'SearchPath', '/var/www/data/font');
$psfont = ps_findfont($ps, "ARIALN_0", "", 1); // Arial Narrow font
ps_setfont($ps, $psfont, 10.0);

ps_show_xy($ps, "ABC", 10, 10);
ps_show_xy($ps, "~TR%41 4 53 11?", 10, 50);

ps_end_page($ps);
ps_close($ps);
ps_delete($ps);

header('Content-type: application/postscript');
header('Content-Disposition: attachment; filename="test.ps"');

readfile('/var/www/data/test.ps'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:05:45.227

好吧，我对 PHP 一无所知，但你肯定不想使用`ps_show_x_y`. 这无疑映射到 postscript`show`操作员，他们的工作是在打印页面上显示文本。

~~从文档中，它看起来像是`ps_include_file`您想要的方法。~~只需将其直接写入文件，绕过所有 ps_module 内容。正如肯所说，如果您希望打印机识别它，它应该在任何其他后记代码之前。特别是，它需要在幻数“%！”之前。打印机用来检测 postscript 程序并进入适当模式的。

当然，这样做会使 ps 文件不可移植。gs，蒸馏器，其他打印机，他们都不会愿意接受这个作为附言文件。

正如乔治在评论中提到的那样，无论此控制代码可能做什么（您尚未披露），也可以通过 postscript 方面获得。要做的是找到打印机的 PPD 文件（Postscript 打印机定义）。此文件包含执行特定打印机任务的后记片段。它配备了繁重的 DSC 注释和看似奇怪的格式，使其能够被程序解析，但所有这些都应该可以很容易地找到你需要的片段，假设它实际上是可用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T08:00:48.723

我看不出这有什么办法。当您的打印机不解释 PostScript 时，它可能能够处理随机转义字符，但一旦您进入 PostScript 解释器，它肯定不能这样做。

这是因为它完全有可能在 PostScript 程序的主体中包含二进制数据（与您的转义字符匹配）。如果打印机输入处理程序改为处理该数据，则 PostScript 将无法工作。

所以你需要在 PostScript 解释器启动之前将转义码发送到打印机，或者在它完成之后，你不能在中间发送它。

# eclipse - 可以在eclipse中编辑Watch Expression值吗>

> ID：14372479
> 
> 赞同：1
> 
> 时间：2013-01-17T05:02:56.023
> 
> 标签：eclipse, debugging

我正在为 Android 开发一个应用程序，并且正在使用 Eclipse。当我们遇到断点时，是否可以手动编辑当前正在监视的变量的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:00:49.583

因为监视表达式不是语句，所以它们不会将值分配回您的变量。但是，您可以通过调用监视表达式中的方法来修改程序的状态，这些方法又会修改字段。

您可以通过在“表达式”视图中单击它们来手动编辑您的手表表达式，但这听起来不像您想要的。

# python - Python 中的 raw_input()

> ID：14372485
> 
> 赞同：2
> 
> 时间：2013-01-17T05:03:35.627
> 
> 标签：python, python-2.7

我阅读**Learn Python The Hard Way**的一个问题：

```
y = raw_input("Name? ") 
```

将结果放入变量 y。

然后在下面代码的第 9 行，**raw_input("?")**，结果到哪里去了？

```
from sys import argv

script, filename = argv

print "We're going to erase %r." % filename
print "If you don't want that, hit CTRL-C (^C)."
print "If you do want that, hit RETURN."

raw_input("?")

print "Opening the file..."
target = open(filename, 'w')

... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:08:07.983

简而言之，它不会被存储 - control-C ( `^C`) 让解释器停止执行它正在执行的操作并退出。如果您在问号处键入任何其他内容（当然按`Enter`），程序将运行。`raw_input`那里只是等待用户输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:09:38.497

不存储输入。这里`raw_input`用于确认的目的，所以输入的值是无关紧要的；该程序只关心等待直到按下`Enter`或。`Ctrl``c`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T05:10:54.833

在你的情况下`raw_input("?")`代表类似`Press any key to continue`

在非交互模式下 _ 没有特殊含义。

python解释器将“_”理解为对它计算的最后一个值的引用，输入存储在一个特殊的变量中`_`

```
In [83]: raw_input("Enter : ")
Enter : Hi There
Out[83]: 'Hi There'

In [84]: _
Out[84]: 'Hi There' 
```

# .net - 如何获取系统文件夹？

> ID：14372487
> 
> 赞同：0
> 
> 时间：2013-01-17T05:03:37.020
> 
> 标签：.net, system, directory

我正在计划一个程序，可以将 URL 字符串添加到 system/drivers/etc 目录中的“hosts”文件中，以防止用户访问他们不允许访问的网站。

我只是想知道如何以一种避免硬编码文件夹英文名称的方式引用特定的系统文件夹，如下面的那个。

C:\Windows\System32\驱动程序\等

我知道您可以使用它来获取第一位（最多 System32），但是我将如何创建对“等”文件夹的通用引用？例如，我不知道法语或西班牙语操作系统上是否存在“驱动程序”或“等”。

```
 Environment.GetFolderPath(Environment.SpecialFolder.System) 
```

这个问题还延伸到引用“etc”文件夹中的“hosts”文件（究竟如何确保这是跨语言兼容的？）。我真的很感谢你对这个难题的帮助，我想我只是没有看到明显的......

谢谢

将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:44:04.347

您不需要关心系统文件夹内的目录结构，它是固定的。只是带有和[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)的系统文件夹。`driver``etc`

# java - JVM 可以在不牺牲性能的情况下一次持有的锁数

> ID：14372489
> 
> 赞同：0
> 
> 时间：2013-01-17T05:03:54.740
> 
> 标签：java, multithreading, locking

假设您有一个工作队列，并且可能有数千个工作项。并假设不同工作项的更新不断进入系统。现在很明显，如果我们为同一个工作项获得多个更新，则需要锁定。

在这种情况下，我们很容易遇到这样一种情况，系统可能一次接收到 2000 个（或一些高数量）更新，因此 JVM 需要在不同对象上持有 2000 个锁。

它会大大降低 JVM 性能吗？是否有 JVM 可以一次持有的最大锁数以防止性能下降。

我知道您可以使用散列技术来阻止锁的数量增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:20:50.700

多核场景中的任何锁定都涉及原子内存操作，即一个核心看到另一个核心写入的数据（在写入之后）。这些数据必须由一个核心推送到内存（告诉所有其他核心的缓存，无论他们知道这个值是无效的，必须刷新）并在另一个核心读入。这种情况发生的速度在 CPU 架构及其实现之间有很大差异。一般来说，单插槽机器在这方面应该比多插槽机器更快。

* * *

因此，正如 SimonC 所说，您需要编写一个测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:04:21.993

每个锁只存储持有它的对象。问题的第一部分——JVM 可以持有多少锁——就像询问`12`它可以存储多少 s。数量受内存限制。*正如其他人所指出的，锁争用*对性能的影响最大。

使用类`java.util.concurrent`来构建和存储您的锁和工作队列，因为它们是为安全和性能而编写的。我强烈推荐[*Java Concurrency in Practice*](https://rads.stackoverflow.com/amzn/click/com/0321349601)一书。

# sql-server - 使用稀疏列减少日志文件中的重复数据

> ID：14372493
> 
> 赞同：1
> 
> 时间：2013-01-17T05:04:15.927
> 
> 标签：sql-server, views, data-warehouse, database-performance, sparse-columns

我正在构建一个应用程序，它将汽车性能指标记录到一个由每个会话 100 列 X 500,000 行组成的表中。一些列非常重复（以华氏度为单位的冷却剂温度）。其他列不断变化（火花提前、歧管压力、空燃比）。

列存储和页面压缩是不可能的，因为该项目是针对开源受众的。它需要支持 MS SQL Express Edition 或其他可以很好地扩展到大表大小的免费数据库平台。

我最初的解决方案是在某些列中允许为 null，这样可以通过不插入重复值来显着减少存储空间，这使我可以将日志分辨率提高到更高的帧速率。

然而，这在选择离散行时引入了一个障碍，因为某些列将 99% 为空。因此，有必要创建一个视图（或计算列？），它将选择包含该字段中的值的最后一行。我的方法是对每个稀疏列使用子查询。这似乎非常不雅。我应该考虑一种更有效的方法吗？

```
SELECT ISNULL(
           val1,
           (
               SELECT TOP 1 val1
               FROM   [values] subv
               WHERE  subv.id <= v.id
                      AND subv.val1 IS NOT NULL
               ORDER BY
                      subv.id DESC
           )
       ) AS val1,
       ISNULL(
           val2,
           (
               SELECT TOP 1 val2
               FROM   [values] subv
               WHERE  subv.id <= v.id
                      AND subv.val2 IS NOT NULL
               ORDER BY
                      subv.id DESC
           )
       ) AS val2,
       ISNULL(
           val3,
           (
               SELECT TOP 1 val3
               FROM   [values] subv
               WHERE  subv.id <= v.id
                      AND subv.val3 IS NOT NULL
               ORDER BY
                      subv.id DESC
           )
       ) AS val3
FROM   [values] v 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:57:24.693

也许最好创建一个只包含 3 列的新表，例如`MetricType, Metricvalue, MeasurementTime`. 仅当特定指标的值发生更改时才插入新的测量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T06:33:41.717

我想出了一个部分解决方案。

我的第一个想法是找到一种方法在调用之间的标量函数中保持值。事实证明这是不可能的，因为参数是复制输入/复制输出的。表值参数是例外，但这些是只读的，所以这没有好处。

相反，我选择使用 SQL-CLR。我在 C# 中编写了一个 .NET 类来保存调用之间的值，并将其映射到 SQL 标量函数。该代码未签名，因此要运行：

1.  数据库必须标记为受信任
2.  CLR 程序集必须标记为 UNSAFE 以允许静态字段
3.  另外值得注意的是，这不是一个多线程数据库应用程序，并且没有经过测试或预期可以这样工作
4.  还值得注意的是，这个解决方案的致命缺陷是它只适用于顺序的、有序的选择，所以我想这不是一个很好的解决方案。

这是 deploy.sql 代码（我的程序集名为 SqlClr）：

```
sp_configure 'show advanced options', 1
GO
RECONFIGURE
GO
sp_configure 'clr enabled', 1
GO
RECONFIGURE
GO

USE Test

ALTER DATABASE Test SET TRUSTWORTHY ON
GO

IF OBJECT_ID ('cached_value') is not null
BEGIN

    DROP FUNCTION cached_value
END
GO

IF EXISTS (SELECT * FROM sys.assemblies WHERE name = 'SqlClr') 
BEGIN
    DROP ASSEMBLY SqlClr
END
GO

CREATE ASSEMBLY SqlClr 
FROM 'C:\SqlClr\bin\Debug\SqlClr.dll'
WITH PERMISSION_SET = UNSAFE 
GO 

CREATE FUNCTION cached_value(@rowid bigint, @col int, @current_value bigint) 
RETURNS bigint
AS EXTERNAL NAME SqlClr.[SqlClr.StoredProcedures].[cached_value] 
```

这是 C#.NET 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.SqlServer.Server;
using System.Diagnostics;
using System.Data.SqlClient;

namespace SqlClr
{
    public class StoredProcedures
    {
        public static long last_rowid;
        public static Dictionary<int, long> values = new Dictionary<int, long>();

        [SqlFunction(DataAccess = DataAccessKind.Read, IsDeterministic = false)]
        public static Nullable<long> cached_value(long rowid, int col, Nullable<long> current_value)
        {
            if (rowid < last_rowid)
            {
                values.Clear();
            }

            last_rowid = rowid;

            if (current_value.HasValue)
            {
                values[col] = current_value.Value;
                return current_value.Value;
            }

            if (values.ContainsKey(col))
                return values[col];
            else
                return null;
        }
    }
} 
```

注意 .NET 函数应该用`IsDeterministic = false`

最后，这是一个使用 25 列函数的示例调用：

```
SELECT 
dbo.cached_value(id, 1, val1) AS val1,
dbo.cached_value(id, 2, val2) AS val2,
......
dbo.cached_value(id, 25, val25) AS val25
FROM LotsOfValues 
```

使用 64 位整数和空值随机填充 25 列 x 500,000 行，执行 a`select * from LotsOfValues`需要 7 秒才能完成。使用`dbo.cached_value(id, n, valn)`所有 25 列的调用，相同的查询需要 19 秒。我至少可以使用 50 列，其中 25 列将是稀疏的，但我认为这将扩展到我的上限 100。这对于应用程序来说是可以接受的性能损失，并且已经实现了节省空间的目标。

# javascript - Javascript三角问题

> ID：14372494
> 
> 赞同：1
> 
> 时间：2013-01-17T05:04:17.877
> 
> 标签：javascript, html, trigonometry

我正在尝试制作一组​​人类/细菌相互追逐的应用程序。但是，如果我试图让它们直接向目标移动，它们都会向左移动。（我说“目标”是因为一侧以另一侧的成员为目标。）我尝试使用三角函数，其中您具有初始 x,y 坐标，但我必须找到下一个 x,y 坐标以及要行驶的坡度和距离已知。这是我的相关代码：

```
/*Functions for calculating next x, y*/
function calculate_nextX(startx, length, slope)
{
    var x = 0;
    var degree = Math.atan(slope);
    x = (startx + (length * Math.sin(degree * 0.0174)));
    return x;
}
function calculate_nextY(starty, length, slope)
{
    var y = 0;
    var degree = Math.atan(slope);
    y = (starty + (length * Math.cos(degree * 0.0174)));
    return y;
}

/*Where the functions get used*/

function updateeverything()
{
    for(var i=0;i<=49;i++)
    {
        if(bacteriaGroup[i].dead == false)
        {
            if(humanGroup[bacteriaGroup[i].target].dead == true)
            {
                bacteriaGroup[i].target = settarget(true,i);
            }
            var left = parseInt(document.getElementById("bacteria"+i).style.left);
            var left1 = parseInt(document.getElementById("human"+bacteriaGroup[i].target).style.left);
            var top = parseInt(document.getElementById("bacteria"+i).style.top);
            var top1 = parseInt(document.getElementById("human"+bacteriaGroup[i].target).style.top);

            var finalleft = calculate_nextX(left,1,(top1-top)/(left1-left));
            var finaltop = calculate_nextY(top,1,(top1-top)/(left1-left));
            document.getElementById("bacteria"+i).style.left = finalleft;
            document.getElementById("bacteria"+i).style.top = finaltop;
        }
        if(humanGroup[i].dead == false)
        {
            if(bacteriaGroup[humanGroup[i].target].dead == true)
            {
                humanGroup[i].target = settarget(false,i);
            }
            var left = parseInt(document.getElementById("human"+i).style.left);
            var left1 = parseInt(document.getElementById("bacteria"+humanGroup[i].target).style.left);
            var top = parseInt(document.getElementById("human"+i).style.top);
            var top1 = parseInt(document.getElementById("bacteria"+humanGroup[i].target).style.top);
            var finalleft = calculate_nextX(left,1,(top1-top)/(left1-left));
            var finaltop = calculate_nextY(top,1,(top1-top)/(left1-left));
            document.getElementById("human"+i).style.left = finalleft;
            document.getElementById("human"+i).style.top = finaltop;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:32:44.710

表达方式

```
(top1-top)/(left1-left) 
```

无论目标是向上和向左还是向下和向右，都具有相同的值。这可能是您问题的根源。

我提议：

```
var distance_to_target = sqrt((top1-top)*(top1-top) + (left1-left)*(left1-left));
var fraction_of_distance = length / distance_to_target;
var dx = (left1 - left) * fraction_of_distance;
var dy = (top1 - top) * fraction_of_distance; 
```

另请注意，css 位置会四舍五入到最接近的整数，因此如果您移动少量，则需要对逻辑位置进行处理，然后在最后将它们四舍五入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:02:32.747

您`slope`不区分上下移动/左右移动 - 它只是 的比率`x/y`。要获得`degree`，您需要两者`x`和`y`value 并且需要使用该[`atan2`函数](http://en.wikipedia.org/wiki/Atan2)（在 JS 中，[`Math.atan2`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/atan2)）。

但是，我完全没有理由使用度数作为方向。[您可以使用简单的勾股定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)轻松（并且更快）计算下一个坐标。

# android - 无法从图书馆开始活动

> ID：14372497
> 
> 赞同：2
> 
> 时间：2013-01-17T05:04:32.240
> 
> 标签：android

我想从图书馆开始活动。我的小测试如下：

我将此代码放入主要活动中，这不是库：

```
public class MainActivity extends Activity {

    MyTest myTest;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        myTest = new MyTest(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void helpPressed(View view) {
        myTest.startNewActivity();
    }
    public void localHelpPressed(View view) {
        Intent helpIntent = new Intent(this, LocalHelp.class);
        startActivity(helpIntent);
    }
} 
```

并将此代码放入库中的“myTest”中：

```
public class MyTest {
    Context context;
    public MyTest(Context context) {
        this.context = context;
    }
    public void startNewActivity() {
        Intent helpIntent = new Intent(context, HelpActivity.class);
        context.startActivity(helpIntent);
    }
} 
```

我将“HelpActivity”添加到库中，并将 LocalHelp 添加到应用程序中。

该代码可以正常创建“LocalHelp”（通过调用 localHelpPressed 方法），但不能创建“HelpActivity”（通过调用 helpPressed 方法）。'HelpActivity' 给出了这个错误：

```
01-16 23:49:17.940: E/AndroidRuntime(4736): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {test.activity/com.example.test.activity.library.HelpActivity}; have you declared this activity in your AndroidManifest.xml?
01-16 23:49:17.940: E/AndroidRuntime(4736):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1556)
01-16 23:49:17.940: E/AndroidRuntime(4736):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1431)
01-16 23:49:17.940: E/AndroidRuntime(4736):     at android.app.Activity.startActivityForResult(Activity.java:3391) 
```

我正在尝试的甚至可能吗？- 让图书馆创建生活在图书馆内的活动？

现在（在我的实际应用程序中）我将帮助屏幕移动到项目中，并创建了一个回调，当需要帮助屏幕时调用该库。这可行，但听起来不对，而且每个包含库的项目都需要有这个回调方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:07:36.930

在您的清单文件中声明`help activity`

```
<application ... >
    <activity
        android:name="com.example.test.activity" >... 
```

# c++ - 运行时类型信息的 C++ 测试

> ID：14372498
> 
> 赞同：-1
> 
> 时间：2013-01-17T05:04:35.517
> 
> 标签：c++

是否可以只检查 RTTI 而无需捕获异常的开销？dynamic_cast 只是抛出一个异常，我只需要看看在一个高度使用的代码部分中是否有 RTTI，如果异常将是一个巨大的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:07:41.537

您需要检查您使用 dynamic_cast 创建的指针是否为 NULL。如果它等于 NULL，则强制转换不起作用。如果没有，则演员表起作用，并且不会抛出异常。

# c# - 来自查询字符串的多个位置的 IIS 6 URL 重写

> ID：14372499
> 
> 赞同：3
> 
> 时间：2013-01-17T05:05:14.470
> 
> 标签：c#, iis, url-rewriting

我有两个在 IIS 6 中运行的网站 url，指向同一个 web.config 文件。

（IIS 6 没有可用的 IIS 7 URL 重写）所以他们使用 3rdparty 工具进行 url 重写，

[http://our.umbraco.org/forum/developers/extending-umbraco/2600-Using-UrlRewriting-to-redirect-domain](http://our.umbraco.org/forum/developers/extending-umbraco/2600-Using-UrlRewriting-to-redirect-domain)

所以我想做的是

如果有人在浏览器中输入以下内容（网站 1）

y.xxx.com/something ->

他们需要被重定向到

[http://y.xxx.com/per/found/](http://y.xxx.com/per/found/)

但是如果他们键入第二个域（网站 2 仍然使用相同的 web.config 文件，相同的文件夹）

zzz.com

他们需要留在原地。

我尝试这样做但没有奏效

```
<add name="just-a-name-which-one"  
   redirect="Domain" 
   ignoreCase="true" rewriteUrlParameter="IncludeQueryStringForRewrite"
   virtualUrl="http://xxx.com/(.*)"   
redirectMode="Permanent" 
destinationUrl="http://xxx.com/something/" 
/> 
```

怎样才能实现这个功能？使用 IIS-6 ..

# java - 现代 OpenGL 版本？

> ID：14372502
> 
> 赞同：0
> 
> 时间：2013-01-17T05:05:29.823
> 
> 标签：java, eclipse, opengl, lwjgl

我已经学会了旧的 OpenGL（OpenGL 1.1）的东西，但很多人说它很慢。所以我一直想知道是否有人知道 OpenGL 的速度和兼容性（与旧计算机）版本以及在哪里学习它。我在考虑 OpenGL 3。任何人都知道哪个 OpenGL，如果可能的话，有基础的链接吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T02:28:30.717

关于兼容性：Nvidia 在 GeForce 8000 系列以上（2008 年推出）的每张卡上都支持 OpenGL 3.0。这主要是限制，因为这是当前驱动程序支持的最旧的卡。

对于比 3.0 更新的版本，兼容性下降。例如，我的 Nvidia NVS 4200M（使用 2 年的商务笔记本电脑）和我的 Intel i7 Sandy Bridge 集成显卡仅支持 3.0 版以下的 OpenGL。

从 OpenGL 3.0（设置前向兼容性标志）开始，api 非常类似于 OpenGL-ES（OpenGL 的移动版本），因此如果您在移动市场上做过任何事情（例如为 Android 或 iOS 开发），这将非常方便。

关于学习：我通过阅读官方 OpenGL wiki（非常好）从 OpenGL 2.0 升级了我的 OpenGL 知识：[http ://www.opengl.org/wiki/Main_Page](http://www.opengl.org/wiki/Main_Page)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T05:43:26.513

LWJGL [wiki](http://lwjgl.org/wiki/index.php?title=Main_Page)及其 OpenGL 3.2 示例（[使用 VBO/VAO 的基本四边形](http://lwjgl.org/wiki/index.php?title=The_Quad_with_DrawArrays)）有什么问题？（因为你提到了OpenGL 3）。有些代码可能看起来很奇怪；看起来他们想保留函数的起源：

```
public void loopCycle() {
    GL11.glClear(GL11.GL_COLOR_BUFFER_BIT);
    // Bind to the VAO that has all the information about the quad vertices
    GL30.glBindVertexArray(vaoId);
    GL20.glEnableVertexAttribArray(0); 
```

该站点还解释了使用 VBO 的原因，但在切换到更新的 OpenGL 版本时确实存在更多问题；[例如，他们在另一页](http://lwjgl.org/wiki/index.php?title=The_Quad_colored)讨论着色器。

# python - Python Awis API 给出未定义的错误

> ID：14372504
> 
> 赞同：2
> 
> 时间：2013-01-17T05:05:55.940
> 
> 标签：python, amazon-web-services, python-2.7

我已经安装了 [https://github.com/muhuk/python-awis](https://github.com/muhuk/python-awis)以便从 alexa 获取 url 信息。我已经通过`python setup.py install`从终端运行来安装它。

当我尝试运行脚本时，我收到此错误：

```
 Traceback (most recent call last):
  File "pst.py", line 4, in <module>
    api = AwisApi(ACCESS_ID,SECRET_ACCESS_KEY)
NameError: name 'AwisApi' is not defined 
```

我正在使用以下代码来运行脚本：

```
 api = AwisApi(ACCESS_ID, SECRET_ACCESS_KEY)
tree = api.url_info("www.domain.com", "Rank", "LinksInCount")
elem = tree.find("//{%s}StatusCode" % api.NS_PREFIXES["alexa"])
assert elem.text == "Success" 
```

我必须导入一些东西吗？我错过了一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-27T21:55:58.283

是的，您需要： `import awis`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-26T02:52:45.450

你可以试试

```
api = awis.AwisApi(ACCESS_ID, SECRET_ACCESS_KEY) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-26T09:55:11.283

```
import awis
api = awis.AwisApi(ACCESS_ID, SECRET_ACCESS_KEY)
tree = api.url_info("www.domain.com", "Rank", "LinksInCount")
elem = tree.find("//{%s}StatusCode" % api.NS_PREFIXES["alexa"])
assert elem.text == "Success" 
```

# python - python email - 简单示例运行没有错误，但电子邮件永远不会到达

> ID：14372506
> 
> 赞同：4
> 
> 时间：2013-01-17T05:06:14.663
> 
> 标签：python, email, smtp, smtpd

我复制并粘贴了这个示例并填写了我自己的电子邮件地址。

```
# Import smtplib for the actual sending function
import smtplib

# Import the email modules we'll need
from email.mime.text import MIMEText

# Open a plain text file for reading.  For this example, assume that
# the text file contains only ASCII characters.
fp = open('/Users/Jon/dev/iit/test-tools/logs/practice_tests.test_one.log', 'rb')
# Create a text/plain message
msg = MIMEText(fp.read())
fp.close()

me = 'Jon@MacBookPro.com'
you = 'jon.drowell@yahoo.com'

# me == the sender's email address
# you == the recipient's email address
msg['Subject'] = 'The contents of the log file'
msg['From'] = me
msg['To'] = you

# Send the message via our own SMTP server, but don't include the
# envelope header.
s = smtplib.SMTP('localhost', 1025)
s.sendmail(me, [you], msg.as_string())
s.quit() 
```

然后我打开另一个终端窗口并运行以下命令：

```
python -m smtpd -n -c DebuggingServer localhost:1025 
```

当我运行该文件以发送电子邮件时，它会正确完成，并且运行该`python -m smtpd -n -c DebuggingServer localhost:1025`命令的终端会打印一条看起来正确的漂亮日志消息：

```
---------- MESSAGE FOLLOWS ----------
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Subject: The contents of the log file
From: Jon@MacBookPro.com
To: jon.crowell@yahoo.com
X-Peer: 127.0.0.1

line one
line two
line three
------------ END MESSAGE ------------ 
```

但是当我检查我的雅虎电子邮件地址时，电子邮件永远不会到达。我等了大约5分钟，我认为这已经足够了。我做错什么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T05:09:52.773

来自[smtpd 文档](http://docs.python.org/2/library/smtpd.html)

> class smtpd.DebuggingServer(localaddr, remoteaddr) 创建一个新的调试服务器。参数根据 SMTPServer。**消息将被丢弃**，并打印在标准输出上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T23:31:47.690

调试邮件消息并查看幕后情况的好方法，只需设置 smtp 对象的调试级别：

```
debuglevel = True
mail = smtplib.SMTP(SMTP_SERVER, SMTP_PORT)
mail.set_debuglevel(debuglevel)
mail.starttls()
mail.login(SMTP_USERNAME, SMTP_PASSWORD)
mail.sendmail(EMAIL_FROM, EMAIL_TO, msg.as_string())
mail.quit() 
```

这使您可以在此过程中查看步骤/检查：

```
send: 'ehlo localhost.localdomain\r\n'
reply: '250-smtp.mail.yahoo.com\r\n'
reply: '250-PIPELINING\r\n'
reply: '250-SIZE 41697280\r\n'
reply: '250-8 BITMIME\r\n'
reply: '250-AUTH PLAIN LOGIN XYMCOOKIE\r\n'
reply: '250 STARTTLS\r\n'
reply: retcode (250); Msg: smtp.mail.yahoo.com
PIPELINING
SIZE 41697280
8 BITMIME
AUTH PLAIN LOGIN XYMCOOKIE
STARTTLS
send: 'STARTTLS\r\n'
reply: '220 2.0.0 Start TLS\r\n'
reply: retcode (220); Msg: 2.0.0 Start TLS
send: 'ehlo localhost.localdomain\r\n'
reply: '250-smtp.mail.yahoo.com\r\n'
reply: '250-PIPELINING\r\n'
reply: '250-SIZE 41697280\r\n'
reply: '250-8 BITMIME\r\n'
reply: '250 AUTH PLAIN LOGIN XYMCOOKIE\r\n'
reply: retcode (250); Msg: smtp.mail.yahoo.com
PIPELINING
SIZE 41697280
8 BITMIME
AUTH PLAIN LOGIN XYMCOOKIE
send: 'AUTH PLAIN AGZlZHVzcaddfjbkejkjkVAeWFob28uY29tAG1taHR0ODAxQA==\r\n'
reply: '235 2.0.0 OK\r\n'
reply: retcode (235); Msg: 2.0.0 OK
send: 'mail FROM:<example@yahoo.com> size=471\r\n'
reply: '250 OK , completed\r\n'
reply: retcode (250); Msg: OK , completed
send: 'rcpt TO:<example@gmail.com>\r\n'
reply: '250 OK , completed\r\n'
reply: retcode (250); Msg: OK , completed
send: 'data\r\n'
reply: '354 Start Mail. End with CRLF.CRLF\r\n'
reply: retcode (354); Msg: Start Mail. End with CRLF.CRLF
data: (354, 'Start Mail. End with CRLF.CRLF')
send: 'Content-Type: text/plain; charset="us-ascii"\r\nMIME-Version: 1.0\r\nContent-Transfer-Encoding: 7bit\r\nSubject: REMINDER:Company - Service at appointmentTime\r\nFrom: example@yahoo.com\r\nTo: example@gmail.com\r\n\r\n\r\nHello, [username]! Just wanted to send a friendly appointment\r\nreminder for your appointment:\r\n[Company]\r\nWhere: [companyAddress]\r\nTime: [appointmentTime]\r\n\r\nCompany URL: [companyUrl]\r\n\r\nChange appointment?? Add Service??\r\n\r\nchange notification preference (text msg/email)\r\n.\r\n'
reply: '250 OK , completed\r\n'
reply: retcode (250); Msg: OK , completed
data: (250, 'OK , completed')
send: 'quit\r\n'
reply: '221 Service Closing transmission\r\n'
reply: retcode (221); Msg: Service Closing transmission 
```

# iphone - ios如何通过一个视图控制器使用多个笔尖控制

> ID：14372509
> 
> 赞同：0
> 
> 时间：2013-01-17T05:06:15.377
> 
> 标签：iphone, ios, ipad, uiviewcontroller, nib

我正在构建一个支持 iOS 5.1.X 和 6.X 的通用应用程序。但我有一个问题要问你们。在 iOS 5.1.X 上不支持自动布局，我想一个解决方案有 3 个笔尖 1)ipad 2)iphone 视网膜而不是视网膜 3)iphone 5。我想使用 3 个笔尖的原因之一是加载它带有图形和动画，但我不确定这将是最好的解决方案。我想知道您对这种方法的意见或对不同解决方案的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:09:19.430

不要让 AutoLayout 强迫你进入这样的角落。您必须记住：XIB 中的布局从来都不是绝对的。`-viewDidLoad`您可以选择在,（或者，甚至更好， ）中编写布局代码，`-layoutSubviews`并且通过一些创造性的数学运算，您甚至可以将您的应用程序缩减为一个通用的 XIB，并在您的视图控制器中使用适当的布局代码。

如果实际上是通用的，那么您的应用程序永远不必为视图控制器拥有超过 2 个 XIB（并且 iPad 版本和类似 Pod 的设备版本不同，足以保证单独的布局或设计）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:13:11.577

您可以执行以下操作

**首先确定设备**是`iphone`或`ipad`

```
int iphone =0;

 if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
     iphone = 0;
}
else
{
     iphone = 1;
}

NSString* nibName;

if(iphone == 0)
{
     nibName = @"SettingsiPadView";
}
else
{
    nibName = @"SettingsiPadView";
}

Settings* setObj = [[Settings alloc]initWithNibName:nibName bundle:nil];
[self.navigationController pushViewController:setObj animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:44:54.903

加载三个笔尖不是问题。想象一下，您正在构建一个通用应用程序。现在，如果您尝试在 ipad 和 iphone 上使用相同的 nib 文件，那就大错特错了。你的用户界面都搞砸了。但是对于视网膜和非视网膜，您可以使用 1x 和 2x 图像，以便您可以使用相同的 nib 文件。但如果你真的想在这里使用 3 个 nib 文件，我会说使用 1x 和 2x 图像

# c - 如何将值附加到转换为指针的结构中的结构 sembuf？

> ID：14372511
> 
> 赞同：0
> 
> 时间：2013-01-17T05:06:44.667
> 
> 标签：c, pointers, struct, semaphore

我需要将一些数据传递给共享内存，它只接受指针。所以我需要信号量在这个结构中，但如果是，我不能给它添加值。我该如何解决？所以，这是结构：

```
typedef struct querem_usar {
 int conta_homem;
 int conta_mulher;
 int conta_crianca;

 struct sembuf lock[4];
 struct sembuf unlock[4];

} queremUsar; 
```

这就是我必须声明它的方式：

```
queremUsar *banheiro; 
```

但是如果我尝试设置一个值来锁定或解锁，像这样：

```
banheiro->lock[0].sem_num   = 0; 
banheiro->lock[0].sem_op   = -1;
banheiro->lock[0].sem_flg   = 0;
banheiro->unlock[0].sem_num = 0; 
banheiro->unlock[0].sem_op = 1; 
banheiro->unlock[0].sem_flg = 0; 
```

我得到分段错误。我已经尝试过使用 malloc，如下所示：

```
banheiro->lock = (struct sembuf*)malloc(sizeof(struct sembuf));
banheiro->unlock = (struct sembuf*)malloc(sizeof(struct sembuf)); 
```

但它给了我错误：

```
error: incompatible types when assigning to type ‘struct sembuf[4]’ from type 
‘struct sembuf *’ 
```

请帮我修好吗？整个代码在这里：[https](https://gist.github.com/4553796) ://gist.github.com/4553796 第 71 行不应该被评论，我这样做是为了测试代码。去试试吧，它是给大学的，所以一点都不复杂，应该是使用共享内存（shm，我不能使用线程）和 semop() 作为信号量的男女皆宜的浴室问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:22:49.237

您需要首先为您的 banheiro 分配内存。

在第 25 行，您声明了指针“queremUsar *banheiro;”。这指向内存中的一个随机区域。因此，如果幸运的话，您在分配必要的内存之前所做的任何访问都会导致 SEGFAULT。

而且您不需要为 banheiro->lock 和 banheiro->unlock 分配内存，因为您将其定义为“struct sembuf”数组，而不是指向它的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:12:40.943

使用这个结构定义

```
typedef struct querem_usar {
 int conta_homem;
 int conta_mulher;
 int conta_crianca;

 struct sembuf *lock[4];
 struct sembuf *unlock[4];

 } queremUsar; 
```

这将起作用

# macos - 将子视图添加到 NSView

> ID：14372513
> 
> 赞同：0
> 
> 时间：2013-01-17T05:07:10.260
> 
> 标签：macos, xcode4, nsview

我想动态地将子视图添加到 NSView 。我将 NSView 的坐标设置为：

```
NSView *tmpView = [[NSView alloc]initWithFrame:self.view.frame]; 
```

我想将动态数量的 imageViews 添加到 tmpView。我的 imageView 是：

```
NSImageView *tmpImageView = [[NSImageView alloc]initWithFrame:CGRectMake(xAxis, yAxis, 320, 180)]; 
```

这里，xAxis 和 yAxis 用于动态定位 imageView。

当我将图像视图添加到 NSView 时：

```
[tmpView addSubView:tmpImageView] 
```

它从左下角添加 imageView 但我希望它从左上角开始。请帮助我如何将子视图相应地添加到 NSView。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:13:13.850

最简单的方法是将视图子类化并覆盖`-isFlipped`为 return `YES`。请参阅[NSView 文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html)，其中说：

> -(BOOL)isFlipped
> 如果接收器使用翻转的绘图坐标，则返回 YES，如果使用原生坐标，则返回 NO。

# java - 单击按钮后显示无响应对话框

> ID：14372515
> 
> 赞同：1
> 
> 时间：2013-01-17T05:07:34.063
> 
> 标签：java, android

我的应用程序已经有一个登录程序，但如果我尝试使用 FB 登录，则尝试与 facebook graph api 集成，应用程序不接受。帮助我在这里粘贴 FB 按钮代码

```
case R.id.fbButton:
            authenticateOnFacebook();
            sendFacebookIdToServer(APP_ID, getApplicationContext());
            break; 
```

facebook 的身份验证方法，在此我也使用 getcredentials 方法。

```
public void authenticateOnFacebook()
     {
        try{
            String[] permissions={"user_birthday", "email"};
            facebook.authorize(this.activity, permissions, Facebook.FORCE_DIALOG_AUTH, new DialogListener() {

                @Override
                public void onFacebookError(FacebookError e) {
                }

                @Override
                public void onError(DialogError e) {
                }

                @Override
                public void onComplete(Bundle values) {
                    try{
                        String facebookId = getCredentials((String) values.get("access_token"));
                        sendFacebookIdToServer(facebookId, context);
                    } catch(Exception e){
                        e.printStackTrace();
                    }
                }

                @Override
                public void onCancel() {

                }
            });
        } catch(Exception e){
            e.printStackTrace();
        }
     }

     protected String getCredentials(String token) {
        JSONObject jObject=null;
        String facebookId = null; 

        Bundle params = new Bundle();
        params.putString(Facebook.TOKEN, token);

        try {
            jObject = new JSONObject(facebook.request("me", params));
        }catch(Exception e){
            e.printStackTrace();
        }

        if(jObject!=null)
        {
            try {  
                facebookId = jObject.getString("id");
            }catch(Exception e){
                e.printStackTrace();
            }
        }
        return facebookId;
    } 
```

为了向我的服务器发送请求以进行身份​​验证，我正在使用这种方法

```
public void sendFacebookIdToServer(String facebookId, Context context){
        String accessToken = null;
        DatabaseHelper helper = new DatabaseHelper(context);
        DatabaseUtility dao = new DatabaseUtility(helper);
        try {
            accessToken = dao.getAccessToken();
        } catch (Exception e1) {
            e1.printStackTrace();
        }
        Map<String , String> params = new HashMap<String,String>();
        params.put(Constants.FACEBOOK_ID, facebookId);
        params.put(Constants.ACCESS_TOKEN_PARAM, accessToken);
        Status status = null;
        try {
            status = Utils.addFacebookAccount(params, context);
        } catch (NullPointerException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        }

        if((status != null) && (status.getStatus().equalsIgnoreCase(Constants.SUCCESS))){
            navigateNowLisnScreenWithSuccess();
        }
     }

    private void navigateNowLisnScreenWithSuccess() {
        // TODO Auto-generated method stub
        Intent i = new Intent(context,TabView.class);
        startActivity(i);   
    } 
```

日志猫：

```
01-17 10:34:26.004: W/System.err(575): java.lang.IllegalArgumentException: Invalid context argument
01-17 10:34:26.004: W/System.err(575):  at android.webkit.CookieSyncManager.createInstance(CookieSyncManager.java:92)
01-17 10:34:26.004: W/System.err(575):  at com.facebook.android.Facebook.startDialogAuth(Facebook.java:308)
01-17 10:34:26.014: W/System.err(575):  at com.facebook.android.Facebook.authorize(Facebook.java:207)
01-17 10:34:26.014: W/System.err(575):  at com.lisnx.activity.LoginActivity.authenticateOnFacebook(LoginActivity.java:164)
01-17 10:34:26.014: W/System.err(575):  at com.lisnx.activity.LoginActivity.onClick(LoginActivity.java:262)
01-17 10:34:26.014: W/System.err(575):  at android.view.View.performClick(View.java:3480)
01-17 10:34:26.014: W/System.err(575):  at android.view.View$PerformClick.run(View.java:13983)
01-17 10:34:26.014: W/System.err(575):  at android.os.Handler.handleCallback(Handler.java:605)
01-17 10:34:26.014: W/System.err(575):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-17 10:34:26.014: W/System.err(575):  at android.os.Looper.loop(Looper.java:137)
01-17 10:34:26.014: W/System.err(575):  at android.app.ActivityThread.main(ActivityThread.java:4340)
01-17 10:34:26.014: W/System.err(575):  at java.lang.reflect.Method.invokeNative(Native Method)
01-17 10:34:26.024: W/System.err(575):  at java.lang.reflect.Method.invoke(Method.java:511)
01-17 10:34:26.024: W/System.err(575):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-17 10:34:26.024: W/System.err(575):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-17 10:34:26.024: W/System.err(575):  at dalvik.system.NativeStart.main(Native Method)
01-17 10:34:26.045: W/System.err(575): android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
01-17 10:34:26.045: W/System.err(575):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:434)
01-17 10:34:26.045: W/System.err(575):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
01-17 10:34:26.045: W/System.err(575):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
01-17 10:34:26.045: W/System.err(575):  at com.lisnx.dao.TokenDao.getAccessToken(TokenDao.java:59)
01-17 10:34:26.054: W/System.err(575):  at com.lisnx.dao.DatabaseUtility.getAccessToken(DatabaseUtility.java:111)
01-17 10:34:26.054: W/System.err(575):  at com.lisnx.activity.LoginActivity.sendFacebookIdToServer(LoginActivity.java:223)
01-17 10:34:26.054: W/System.err(575):  at com.lisnx.activity.LoginActivity.onClick(LoginActivity.java:263)
01-17 10:34:26.054: W/System.err(575):  at android.view.View.performClick(View.java:3480)
01-17 10:34:26.054: W/System.err(575):  at android.view.View$PerformClick.run(View.java:13983)
01-17 10:34:26.054: W/System.err(575):  at android.os.Handler.handleCallback(Handler.java:605)
01-17 10:34:26.054: W/System.err(575):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-17 10:34:26.054: W/System.err(575):  at android.os.Looper.loop(Looper.java:137)
01-17 10:34:26.054: W/System.err(575):  at android.app.ActivityThread.main(ActivityThread.java:4340)
01-17 10:34:26.054: W/System.err(575):  at java.lang.reflect.Method.invokeNative(Native Method)
01-17 10:34:26.064: W/System.err(575):  at java.lang.reflect.Method.invoke(Method.java:511)
01-17 10:34:26.064: W/System.err(575):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-17 10:34:26.064: W/System.err(575):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-17 10:34:26.064: W/System.err(575):  at dalvik.system.NativeStart.main(Native Method)
01-17 10:34:26.794: D/dalvikvm(575): GC_CONCURRENT freed 404K, 14% free 7244K/8327K, paused 5ms+4ms
01-17 10:34:27.254: D/StrictMode(77): StrictMode policy violation; ~duration=10 ms: android.os.StrictMode$StrictModeDiskReadViolation: policy=151 violation=2
01-17 10:34:27.254: D/StrictMode(77):   at android.os.StrictMode$AndroidBlockGuardPolicy.onReadFromDisk(StrictMode.java:1074)
01-17 10:34:27.254: D/StrictMode(77):   at libcore.io.BlockGuardOs.open(BlockGuardOs.java:94)
01-17 10:34:27.254: D/StrictMode(77):   at libcore.io.IoBridge.open(IoBridge.java:390)
01-17 10:34:27.254: D/StrictMode(77):   at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
01-17 10:34:27.254: D/StrictMode(77):   at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
01-17 10:34:27.254: D/StrictMode(77):   at com.android.internal.os.AtomicFile.startWrite(AtomicFile.java:59)
01-17 10:34:27.254: D/StrictMode(77):   at android.content.SyncStorageEngine.writeStatusLocked(SyncStorageEngine.java:1906)
01-17 10:34:27.254: D/StrictMode(77):   at android.content.SyncStorageEngine.handleMessage(SyncStorageEngine.java:336)
01-17 10:34:27.254: D/StrictMode(77):   at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 10:34:27.254: D/StrictMode(77):   at android.os.Looper.loop(Looper.java:137)
01-17 10:34:27.254: D/StrictMode(77):   at com.android.server.ServerThread.run(SystemServer.java:744)
01-17 10:34:27.254: D/StrictMode(77): StrictMode policy violation; ~duration=6 ms: android.os.StrictMode$StrictModeDiskWriteViolation: policy=151 violation=1
01-17 10:34:27.254: D/StrictMode(77):   at android.os.StrictMode$AndroidBlockGuardPolicy.onWriteToDisk(StrictMode.java:1048)
01-17 10:34:27.254: D/StrictMode(77):   at libcore.io.BlockGuardOs.write(BlockGuardOs.java:178)
01-17 10:34:27.254: D/StrictMode(77):   at libcore.io.IoBridge.write(IoBridge.java:447)
01-17 10:34:27.254: D/StrictMode(77):   at java.io.FileOutputStream.write(FileOutputStream.java:187)
01-17 10:34:27.254: D/StrictMode(77):   at java.io.OutputStream.write(OutputStream.java:82)
01-17 10:34:27.254: D/StrictMode(77):   at android.content.SyncStorageEngine.writeStatusLocked(SyncStorageEngine.java:1915)
01-17 10:34:27.254: D/StrictMode(77):   at android.content.SyncStorageEngine.handleMessage(SyncStorageEngine.java:336)
01-17 10:34:27.254: D/StrictMode(77):   at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 10:34:27.254: D/StrictMode(77):   at android.os.Looper.loop(Looper.java:137)
01-17 10:34:27.254: D/StrictMode(77):   at com.android.server.ServerThread.run(SystemServer.java:744)
01-17 10:34:27.264: D/StrictMode(77): StrictMode policy violation; ~duration=1 ms: android.os.StrictMode$StrictModeDiskWriteViolation: policy=151 violation=1
01-17 10:34:27.264: D/StrictMode(77):   at android.os.StrictMode$AndroidBlockGuardPolicy.onWriteToDisk(StrictMode.java:1048)
01-17 10:34:27.264: D/StrictMode(77):   at libcore.io.BlockGuardOs.fsync(BlockGuardOs.java:84)
01-17 10:34:27.264: D/StrictMode(77):   at java.io.FileDescriptor.sync(FileDescriptor.java:71)
01-17 10:34:27.264: D/StrictMode(77):   at android.os.FileUtils.sync(FileUtils.java:111)
01-17 10:34:27.264: D/StrictMode(77):   at com.android.internal.os.AtomicFile.finishWrite(AtomicFile.java:80)
01-17 10:34:27.264: D/StrictMode(77):   at android.content.SyncStorageEngine.writeStatusLocked(SyncStorageEngine.java:1918)
01-17 10:34:27.264: D/StrictMode(77):   at android.content.SyncStorageEngine.handleMessage(SyncStorageEngine.java:336)
01-17 10:34:27.264: D/StrictMode(77):   at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 10:34:27.264: D/StrictMode(77):   at android.os.Looper.loop(Looper.java:137)
01-17 10:34:27.264: D/StrictMode(77):   at com.android.server.ServerThread.run(SystemServer.java:744) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:16:52.837

您收到“android.database.CursorIndexOutOfBoundsException：请求的索引 0，大小为 0”，这可能会导致问题。

# javascript - 如何在 javascript/jquery 事件后更改 Django 中的服务器端数据？

> ID：14372519
> 
> 赞同：0
> 
> 时间：2013-01-17T05:07:46.577
> 
> 标签：javascript, jquery, python, django

我是 Django 新手，也是一个相当新的程序员。我正在 Django 上开发战舰应用程序。我的 html 页面上已经有 10X10 游戏板，并且使用 javascript/jquery 这些板的内容会根据用户交互而变化。但是，如何在用户生成的事件之后更改服务器端数据。例如，用户单击板的一个单元格，单元格内容发生变化。但我希望董事会的服务器端数据发生变化以反映单元格的新内容。如何做到这一点？是否可以在您的 javascript 文件中执行 Python 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:36:18.423

这就是[$.post](http://api.jquery.com/jQuery.post/)方法的用途。然后在服务器端，有一个用于接收数据的 url 的 post 处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:00:36.400

使用 jQuery，如 dspeyer 所述，您可以使用它[`$.post`](http://api.jquery.com/jQuery.post/)来发送消息。一般来说，战舰应用程序应该像这样工作：

`client`- > `server`（信息）

`server`- > `client`（响应）

`server`- > `opponent`（向对手发送信息）（这是您使用纯 ajax 解决方案可能遇到问题的地方 - 您需要长轮询/其他服务器推送方法）

也许还有一个长轮询/彗星连接，以便服务器可以将数据推送到客户端。有实现bayeux 协议的[jQuery Comet插件。](http://archive.plugins.jquery.com/project/Comet)

您可以在浏览器中执行 Python 代码，使用类似[Skulpt](http://www.skulpt.org/)的东西，但我怀疑它是您正在寻找的东西。我相信您想要的是响应客户端事件而执行的服务器端脚本，为此您的客户端需要将事件通知服务器（将数据发布到 url 等）并且您的服务器会然后就可以运行脚本了。

# c++ - 如何高效生成 RTTI

> ID：14372522
> 
> 赞同：1
> 
> 时间：2013-01-17T05:08:08.103
> 
> 标签：c++, entity, rtti, template-meta-programming, crtp

我正在尝试建立一个[实体系统](http://entity-systems.wikidot.com/start)。每个实体都有一组与之关联的组件，并且每个组件都是唯一的类型。所有组件都派生自一个基组件类。

我需要创建一个添加/删除/获取组件的类，它以某种方式（即使用模板）将组件类型作为变量。每次使用 eg 调用这些组件时检查组件类型`typeid`效率不高，因此我需要为每个派生组件类生成一个标识符。在此处的其他帖子中，我已经看到以多种方式完成此操作，包括使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)和使用每次定义派生类时都需要调用的模板函数。

我对这些方法（主要是个人的）的问题是，您至少必须添加某种评论，以通知可能有兴趣创建新 Component 类的人他应该使用上述方法之一，即要求在代码本身中不明确可见。

因此，我正在寻找一种方法，它可以以某种方式干净地处理保存[RTTI](http://en.wikipedia.org/wiki/Run-time_type_information)，而无需为想要潜在使用实体系统的人强制执行任何特殊规则。

举个例子，我最好的做法是在`addComponent`函数中进行类型检查。这是使用模板函数完成的，该函数计算唯一类并返回该类的 id，即

```
 extern int component_id_count;
int component_id_count = 0;
template <class T>
int getComponentID(void){
    static int id = component_id_count++;
    return id;
} 

```

然后它检查 id 是否大于最后遇到的 id。如果是，则遇到新的组件类型，需要注册。`addComponent`如果不被多次调用，这可能非常有效。但我仍然想知道是否有更有效的方法来实现我想要实现的目标。

# sql - 连接 SQL 结果

> ID：14372523
> 
> 赞同：0
> 
> 时间：2013-01-17T05:08:24.003
> 
> 标签：sql, ms-access, subquery, concatenation

我对 SQL 很陌生，我正在使用 MS Access 的 ListBox 组件，它需要一个查询来显示数据。以下是进行查询所涉及的表：

```
表：块
+----+--------+
| 身份证 | B_姓名 |
+----+--------+
| 1 | 块F |
| 2 | 块E |
  .
  .
  .

表：房间
+----+------+--------+--------+-----+---------+---- --+--------+
| 身份证 | B_ID | R_名称 | 地板 | 帕克斯 | 翼翼 | 比特币_R | 男 |
+----+------+--------+--------+-----+---------+---- --+--------+
| 1 | 1 | 房间 1 | 2 | 10 | 真的 | 真的 | 真的 |
| 2 | 1 | 房间 2 | 2 | 10 | 真的 | 真的 | 真的 |
| 3 | 2 | 房间 1 | 1 | 10 | 真的 | 错误 | 错误|
  .
  .
  .

```

其中 B_ID 是块的外键，显示块和房间之间的一对多关系，PAX 是最大空缺数量。

```
表：用户组
+----+------+--------+------------+
| 身份证 | R_ID | 集团 | 住户 |
+----+------+--------+------------+
| 1 | 1 | 平方 1 | 4 |
| 2 | 1 | 平方 2 | 5 |
  .
  .
  .

```

其中 R_ID 是房间的外键，显示房间和用户组之间的一对多关系

用户可以根据 Floor、E_Wing、BTC_R、MALE 和 B_ID 列中的条件过滤房间。

**我的问题是如何根据过滤条件和结果表显示所有房间，例如：**

*例如当过滤条件为 B_ID = 1*

```
表：查询结果
+--------+--------------+
| R_名称 | 复杂查询 |
+--------+--------------+
| 房间 1 | 0 / 10 |
| 房间 2 | 9 / 10 |
  .
  .
  .
复杂查询：“TOTAL OCCUPANTS / PAX”

```

到目前为止我取得的进展是单独的查询

```
选择总和（用户组。占用者）
来自用户组
WHERE UserGroups.R_ID = DESIRED_ID

选择房间.PAX
从房间
WHERE Rooms.ID = DESIRED_ID

```

1.  如何通过与过滤条件匹配的每个房间 ID 迭代查询
2.  如何将两个查询合并为一个查询
3.  我将如何将值作为“OCCUPANTS / PAX”连接到单个列中

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:17:58.363

如果我正确理解您的问题，您需要使用 LEFT JOIN、SUM 和 GROUP BY。这是一些未经测试的代码——我认为您需要在 Access 中的联接周围加上括号：

```
SELECT R.R_Name, SUM(UG.Occupants) / R.Pax as PercentageOfRoomOccupied
FROM Rooms R
LEFT JOIN UserGroups UG ON R.Id = UG.R_Id
WHERE R.B_ID = 1
GROUP BY R.R_Name, R.Pax 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:41:58.480

您还可以对您的 ComplexQuery 列使用连接：

CONCAT(ISNULL(SUM(UG.Occupants, 0), ' / ', R.Pax)) 作为 ComplexQuery

# cuda - 如果我在 GPU 内核中使用许多局部变量，这些变量会驻留在全局内存中吗？

> ID：14372524
> 
> 赞同：2
> 
> 时间：2013-01-17T05:08:25.393
> 
> 标签：cuda, gpu, nvidia

如果我在 GPU 内核中使用许多变量，这些变量会驻留在全局内存中吗？那么读写局部变量需要访问全局内存吗？

GPU内核中变量数量的典型限制是什么，以便变量驻留在寄存器中？

谢谢，山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:15:32.740

**快速回答：**是的。典型限制？如果您想达到 0.5 左右的占用率，则每个线程大约需要 32-64 个寄存器，具体取决于架构。

**更长一点的答案：** 请记住，寄存器的数量与“局部变量的数量”并不完全相同。这是因为，在给定时间，您通常不需要所有局部变量，编译器会尝试重用寄存器。您最终可能会将多个变量映射到同一个寄存器。

其次，即使您用完了寄存器空间，编译器也会尝试将这些值溢出到很少使用的全局内存中。通常在您的代码中很少有寄存器溢出并不是*那么*耗时。此外，这些寄存器溢出会导致完全对齐的全局内存访问模式。

如果您想知道每个内核正在使用多少寄存器和（溢出的）本地内存，请添加`--ptxas-options=-v`到您的编译参数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:45:50.120

在 CUDA 安装目录中有一个 CUDA GPU 占用计算器。

```
cuda-5.0/tools/CUA_Occupancy_Calculator.xls 
```

它可以显示硬件资源（线程/块、寄存器、共享内存）和 warp 占用率之间的关系，以及不同 GPU 计算能力的物理限制。

# spring - 如何使用 jprofiler 进行 JBOSS 6 EAP 分析？

> ID：14372525
> 
> 赞同：1
> 
> 时间：2013-01-17T05:08:29.263
> 
> 标签：spring, jboss, jboss7.x, profiler, jprofiler

我们正在尝试使用 jprofiler 对在 JBOSS 6 EAP 上运行的应用程序进行分析。但是，运行standalone_jprofiler.bat 时会出错，

```
    JProfiler> 协议版本 36
    JProfiler> 使用 JVMTI
    JProfiler> 检测到 JVMTI 版本 1.1。
    JProfiler> 32 位库
    JProfiler> 监听端口：8849。
    JProfiler> 检测本机方法。
    初始化虚拟机时出错
    无法为对象堆保留足够的空间
    JProfiler> 可以重新转换类。
    JProfiler> 可以重新转换任何类。
    JProfiler> 本机库已初始化
    无法创建Java虚拟机。

```

我们试图在standalone.conf.bat 文件中增加内存为

```
    设置“JAVA_OPTS=-Xms1303M -Xmx1303M -XX:MaxPermSize=256M”

```

以下语句由 jprofiler 附加在 bat 文件中，

```
    设置 JAVA_OPTS=-agentpath:E:\ProgramFiles\jprofiler7\bin\windows\jprofilerti.dll=port=8849 -Djboss.platform.mbeanserver -Djavax.management.builder.initial=org.jboss.system.server.jmx.MBeanServerBuilderImpl %JAVA_OPTS%

```

我不确定 jprofiler7 是否支持 JBOSS 6 EAP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:38:38.920

```
Could not create the Java virtual machine. 
```

表示堆大小太大。如果加载代理库，则 32 位空间是碎片化的，请参阅

[了解最大 JVM 堆大小 - 32 位与 64 位](https://stackoverflow.com/questions/2457514/understanding-max-jvm-heap-size-32bit-vs-64bit)

尝试将堆大小降低到 1G 或更低。

# sql-server - 实体框架代码首先使用远程数据库

> ID：14372527
> 
> 赞同：0
> 
> 时间：2013-01-17T05:08:44.297
> 
> 标签：sql-server, entity-framework, connection-string, code-first, dbcontext

我首先在我的项目中使用 Enity Framework 代码。当我连接到本地系统、创建数据库表并正确访问它时，它工作正常，但现在我试图在我的生产服务器上运行它，并且我正在使用 SQL 身份验证连接到 db。

当它在远程数据库上创建表时，它使用用户名来访问这些表，比如

```
databasename.username.dbo.tableName 
```

但在当地那些就像

```
databasename.dbo.tableName 
```

我应该怎么做才能通过实体框架访问表？

我还注意到它在常规表文件夹中而不是在系统表下创建了 MigrationHistory 表。

这是因为我试图通过我的本地系统而不是通过服务器创建数据库吗？

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:53:37.263

经过进一步研究，我发现了这个问题，基本上用户名是远程数据库的架构名称，在使用表注释并指定架构名称后，它解决了这个问题。

```
[Table("TableName", Schema= "SchemaName")] 
```

# android - 无限滚动列表视图

> ID：14372528
> 
> 赞同：1
> 
> 时间：2013-01-17T05:08:59.350
> 
> 标签：android, json

我是 android 新手，我正在使用 ListView 目前从 web 服务加载数据。ListView 显示 10 个项目，当我向下滚动时，它应该再加载 10 个项目，例如分页。我正在使用以下代码，但是当我向下滚动时它没有加载更多项目。谁能帮我？任何答案或建议将不胜感激。

```
public class MainActivity extends ListActivity {

ArrayList<HashMap<String, String>> songsList;
ListView list;
LazyAdapter adapter;
JSONArray posts;

// FLAG FOR CURRENT PAGE
int current_page = 1;

// BOOLEAN TO CHECK IF NEW FEEDS ARE LOADING
Boolean loadingMore = true;

Boolean stopLoadingData = false;

// All static variables
static final String URL = "website/json";

 static final String KEY_POSTS = "posts";
 static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
                JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                    JSONArray posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }

        // Getting adapter by passing json data ArrayList
        adapter=new LazyAdapter(this, songsList);    

        final ListView  list=(ListView)findViewById(android.R.id.list);

        list.setAdapter(adapter);

    // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String date = ((TextView) view.findViewById(R.id.date)).getText().toString();
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String content = ((TextView) view.findViewById(R.id.content)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),SampleDesp.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_DATE, date);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_CONTENT, content);

            startActivity(in);

        }
    });

// ONSCROLLLISTENER
list.setOnScrollListener(new OnScrollListener() {

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {

    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        int lastInScreen = firstVisibleItem + visibleItemCount;
        if ((lastInScreen == totalItemCount) && !(loadingMore)) {

            if (stopLoadingData == false) {
                // FETCH THE NEXT BATCH OF FEEDS
                new loadMorePhotos().execute();
            }

        }
    }
});
}

private class loadMorePhotos extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... arg0) {

        // SET LOADING MORE "TRUE"
        loadingMore = true;

        // INCREMENT CURRENT PAGE
        current_page += 1;

         ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

            // Creating JSON Parser instance
                    JSONParser jParser = new JSONParser();

                    // getting JSON string from URL
                    JSONObject json = jParser.getJSONFromUrl(URL);
                    try {
                        JSONArray posts = json.getJSONArray(KEY_POSTS);

            // looping through all song nodes <song>
                    for(int i = 0; i < posts.length(); i++){
                        JSONObject c = posts.getJSONObject(i);
                        // Storing each json item in variable
                        String id = c.getString(KEY_ID);
                        String title = c.getString(KEY_TITLE);
                        String date = c.getString(KEY_DATE);
                        String content = c.getString(KEY_CONTENT);
                        // to remove all <P> </p> and <br /> and replace with ""
                         content = content.replace("<br />", "");
                         content = content.replace("<p>", "");
                         content = content.replace("</p>", "");

                        //authornumber is agin  JSON Object
                        JSONObject author = c.getJSONObject(KEY_AUTHOR);
                        String name = author.getString(KEY_NAME);

                        String url = null;
                        String slug = null;
                        try {
                        JSONArray atta = c.getJSONArray("attachments");
                        for(int j = 0; j < atta.length(); j++){
                            JSONObject d = atta.getJSONObject(j);

                            slug = d.getString(KEY_SLUG);

                            JSONObject images = d.getJSONObject(KEY_IMAGES);

                            JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                            url = thumbnail.getString(KEY_URL);

                        }
                        } catch (Exception e) {
                            e.printStackTrace();

                        }

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(KEY_ID, id);
                map.put(KEY_TITLE, title);
                map.put(KEY_DATE, date);
                map.put(KEY_NAME, name);
                map.put(KEY_CONTENT, content);
                map.put(KEY_SLUG, slug);
                map.put(KEY_URL, url);

                // adding HashList to ArrayList
                songsList.add(map);

                    }   
                    }catch (JSONException e) {
                        e.printStackTrace();

                        }
                    return null;
    }
    @Override
    protected void onPostExecute(Void result) {

        // get listview current position - used to maintain scroll position
        int currentPosition = list.getFirstVisiblePosition();

        // APPEND NEW DATA TO THE ARRAYLIST AND SET THE ADAPTER TO THE
        // LISTVIEW

        list.setAdapter(adapter);

        // Setting new scroll position
      list.setSelection(currentPosition + 1);

        // SET LOADINGMORE "FALSE" AFTER ADDING NEW FEEDS TO THE EXISTING
        // LIST
        loadingMore = false;
    }

}

  } 
```

# php - PHP + SSH 如何修复：“错误：ssh2_connect()：启动 SSH 连接时出错(-4)：收到的 MAC 无效？”

> ID：14372529
> 
> 赞同：1
> 
> 时间：2013-01-17T05:09:03.187
> 
> 标签：php, ssh, libssh2

处理使用 ssh2_connect 从服务器下载文件构建的项目。项目正在运行的生产服务器可以工作，但是让 ssh2_connect 在我运行 OSX 10.8 的 Mac 上工作被证明是有问题的。

以下命令：

```
ssh2_connect("myhost", 22); 
```

产生以下错误：

```
Error: ssh2_connect(): Error starting up SSH connection(-4): Invalid MAC received 
```

我可以从命令行连接，所以我知道这不是系统范围的 SSH 问题。有谁知道如何调试或解决这个问题？在此先感谢您，愿您的孩子拥有丰富的大脑和社交技能:)

更新：下面发布的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:15:08.300

PHP 文档有一个提供第三个参数的示例。这篇文章的作者[http://phing.tigris.org/ds/viewMessage.do?dsForumId=1083&viewType=browseAll&dsMessageId=3022056#messagefocus](http://phing.tigris.org/ds/viewMessage.do?dsForumId=1083&viewType=browseAll&dsMessageId=3022056#messagefocus) (Derek Gallo) 有完全相同的问题，他能够指出我的正确方向。谢谢德里克。似乎某些分布需要额外的参数。最后，我将我的代码转换为使用 phpseclib，因为它是一个纯 PHP 解决方案，不需要任何特殊模块。

```
$methods = array(
  'kex' => 'diffie-hellman-group1-sha1',
  'client_to_server' => array(
    'crypt' => '3des-cbc',
    'comp' => 'none'),
  'server_to_client' => array(
    'crypt' => 'aes256-cbc,aes192-cbc,aes128-cbc',
    'comp' => 'none'));

ssh2_connect("myhost", 22, $methods); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:13:18.293

请参阅下面的链接，该链接解释了所有替代方案

[http://kvz.io/blog/2007/07/24/make-ssh-connections-with-php/](http://kvz.io/blog/2007/07/24/make-ssh-connections-with-php/)

# symfony - 如何在 Twig 中使用 sprintf 格式化数字？

> ID：14372530
> 
> 赞同：7
> 
> 时间：2013-01-17T05:09:12.593
> 
> 标签：symfony, twig

我需要格式化一个数字。在 PHP 中，我会使用`sprintf("%05d",$lineNumber)`.

在 Symfony 2 Twig 模板中，我应该使用什么代码？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-01T08:31:13.707

如果`i`之前是 4，那么在将其添加到 Twig 模板之后：

`"%02d"|format(i)`

...它将变为 04。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T05:14:45.813

Twig 提供了很多[过滤器](http://twig.sensiolabs.org/doc/filters/index.html)，看看[`format`](http://twig.sensiolabs.org/doc/filters/format.html)和[`number_format`](http://twig.sensiolabs.org/doc/filters/number_format.html)。

# c# - Asp.net 从 Ajax 调用 C# 方法

> ID：14372532
> 
> 赞同：0
> 
> 时间：2013-01-17T05:09:25.890
> 
> 标签：c#, javascript, asp.net, ajax

我有一个 JavaScript。我想从该脚本调用 c# 方法但无法调用。这是**我的脚本**

```
(function($){

//define the new for the plugin ans how to call it  
$.fn.contactable = function(options) {
    //set default options  
    var defaults = {
        url: 'Default.aspx/Send',
        name: 'Name',
        email: 'Email',
        message : 'Message',
        subject : 'A contactable message',
        submit : 'SEND',
        recievedMsg : 'Thank you for your message',
        notRecievedMsg : 'Sorry but your message could not be sent, try again later',
        disclaimer: 'Please feel free to get in touch, we value your feedback',
        hideOnSubmit: false

    };

    //call in the default otions
    var options = $.extend(defaults, options);
    //act upon the element that is passed into the design    
    return this.each(function() {
        //construct the form
        var this_id_prefix = '#'+this.id+' ';
        $(this).html('<div id="contactable_inner"></div><form id="contactForm" method="" action=""><div id="loading"></div><div id="callback"></div><div class="holder"><p><label for="name">'+options.name+'<span class="red"> * </span></label><br /><input id="name" class="contact" name="name"/></p><p><label for="email">'+options.email+' <span class="red"> * </span></label><br /><input id="email" class="contact" name="email" /></p><p><label for="message">'+options.message+' <span class="red"> * </span></label><br /><textarea id="message" name="message" class="message" rows="4" cols="30" ></textarea></p><p><input class="submit" type="submit" value="'+options.submit+'"/></p><p class="disclaimer">'+options.disclaimer+'</p></div></form>');
        //show / hide function
        $(this_id_prefix+'div#contactable_inner').toggle(function() {
            $(this_id_prefix+'#overlay').css({display: 'block'});
            $(this).animate({"marginLeft": "-=5px"}, "fast"); 
            $(this_id_prefix+'#contactForm').animate({"marginLeft": "-=0px"}, "fast");
            $(this).animate({"marginLeft": "+=387px"}, "slow"); 
            $(this_id_prefix+'#contactForm').animate({"marginLeft": "+=390px"}, "slow"); 
        }, 
        function() {
            $(this_id_prefix+'#contactForm').animate({"marginLeft": "-=390px"}, "slow");
            $(this).animate({"marginLeft": "-=387px"}, "slow").animate({"marginLeft": "+=5px"}, "fast"); 
            $(this_id_prefix+'#overlay').css({display: 'none'});
        });

        //validate the form 
        $(this_id_prefix+"#contactForm").validate({
            //set the rules for the fild names
            rules: {
                name: {
                    required: true,
                    minlength: 2
                },
                email: {
                    required: true,
                    email: true
                },
                message: {
                    required: true
                }
            },
            //set messages to appear inline
                messages: {
                    name: "",
                    email: "",
                    message: ""
                },          

            submitHandler: function() {
                $(this_id_prefix+'.holder').hide();
                $(this_id_prefix+'#loading').show();
$.ajax({
  type: 'POST',
  url: options.url,
  data: {subject:options.subject, name:$(this_id_prefix+'#name').val(),      email:$(this_id_prefix+'#email').val(), message:$(this_id_prefix+'#message').val()},
  success: function(data){
                    $(this_id_prefix+'#loading').css({display:'none'}); 
                    if( data == 'success') {
                        $(this_id_prefix+'#callback').show().append(options.recievedMsg);
                        if(options.hideOnSubmit == true) {
                            //hide the tab after successful submition if requested
                            $(this_id_prefix+'#contactForm').animate({dummy:1}, 2000).animate({"marginLeft": "-=450px"}, "slow");
                            $(this_id_prefix+'div#contactable_inner').animate({dummy:1}, 2000).animate({"marginLeft": "-=447px"}, "slow").animate({"marginLeft": "+=5px"}, "fast"); 
                            $(this_id_prefix+'#overlay').css({display: 'none'});    
                        }
                    } else {
                        $(this_id_prefix+'#callback').show().append(options.notRecievedMsg);
                        setTimeout(function(){
                            $(this_id_prefix+'.holder').show();
                            $(this_id_prefix+'#callback').hide().html('');
                        },2000);
                    }
                },
error:function(){
                    $(this_id_prefix+'#loading').css({display:'none'}); 
                    $(this_id_prefix+'#callback').show().append(options.notRecievedMsg);
                                    }
});     
            }
        });
      });
    };

 })(jQuery); 
```

我的**Default.aspx.cs**

```
 [WebMethod]
    public static void Send(string subject, string name, string email, string message)        
    { 
     ..... 
     ......
    } 
```

**我在Send**方法的开始处设置断点。但那时我没有得到调试器。如何从我的脚本中调用**Send方法？**剧本有变化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:29:01.527

要从 jQuery 访问 asp.net 方法，您必须将 ScriptManager 的 EnablePageMethods 属性设置为 true。它只是为页面代码隐藏中的所有适当方法生成内联 JavaScript 代理。

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="True"
      EnablePartialRendering="True" ScriptMode="Release">
</asp:ScriptManager> 
```

现在使用 jQuery 访问页面方法，例如

```
(function($) {
        $.ajax({
            type: "POST",
            url: "test.aspx/Send",
            data: "{subject: 'hi',name:'abc',email:'def',message:'msg'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                alert('success');
            }
        });
    }); 
```

你的方法应该像

```
[WebMethod]
public static void Send(string subject, string name, string email, string message)
{

} 
```

我让这个工作正常，请参考[http://screencast.com/t/4VR0Gz2hOZye](http://screencast.com/t/4VR0Gz2hOZye)

# iphone - 如何直接移动到在第三个标签 iPhone 中添加为子视图的视图

> ID：14372534
> 
> 赞同：0
> 
> 时间：2013-01-17T05:09:37.663
> 
> 标签：iphone, objective-c, uitabbarcontroller, tabbar

首先对标题感到抱歉。实际上我不知道如何为这种情况提供适当的标题。

我有一个登录视图。一旦身份验证成功，下一个视图是一个带有四个选项卡的选项卡栏视图。我创建如下：

```
UIViewController *firstTab = [[SAHomeView_iPad alloc]initWithNibName:@"SAHomeview_iPad" bundle:nil];
         firstTab.tabBarItem.image = [UIImage imageNamed:@"Home.png"];
         UIViewController *secondTab = [[SAMenuView_iPad alloc]initWithNibName:@"SAMenuView_iPad" bundle:nil];
         secondTab.tabBarItem.image = [UIImage imageNamed:@"Menu.png"];
         UIViewController *thirdTab = [[SAGraphView_iPad alloc]initWithNibName:@"SAGraphView_iPad" bundle:nil];
         thirdTab.tabBarItem.image = [UIImage imageNamed:@"Graph.png"];
         UIViewController *fourthTab = [[SAAboutView_iPad alloc]initWithNibName:@"SAAboutView_iPad" bundle:nil];
         fourthTab.tabBarItem.image = [UIImage imageNamed:@"info.png"];
         UITabBarController *tabBarController = [[UITabBarController alloc] init];
         tabBarController.viewControllers = [NSArray arrayWithObjects:firstTab, secondTab,thirdTab,fourthTab, nil];
         SAAppDelegate *delegate = [UIApplication sharedApplication].delegate;
         delegate.window.rootViewController = tabBarController; 
```

现在在第三个选项卡中，我添加了一个日历按钮，按下该按钮将提供一个日历视图。我将此日历视图添加为第三个选项卡中的子视图。

现在，一旦用户登录，主页选项卡中就会有一个日历按钮。一旦用户点击日历按钮，他应该移动到日历视图。这个日历视图实际上是作为子视图添加到第三个选项卡中的。

谁能帮我解决这个问题。提前谢谢了。![登录](../Images/f5add127b3d3a350e89025d7338d48dc.png)

![登录成功后查看](../Images/bd17bdf9b252b3dd9ef95adf9bfbea98.png) ![日历视图（在第三个选项卡中添加为子视图）](../Images/45cb27ce970e31efe5adeec6eefd9407.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:25:24.857

我建议您将日历视图从您的thirdTab 视图层次结构中取出，并将其分配给它自己的自定义viewController，以便它可以在您的应用程序中的任何其他viewController 中以相同的状态呈现。

然后，您可以使用模式故事板 segue 或在代码中使用以下方法调用日历：

```
[self presentViewController:calendarViewController animation:YES completion:NIL]; 
```

并解雇它：

```
[self.presentingViewController dismissModalViewControllerAnimated:YES]; 
```

当您呈现它时，您将失去您的选项卡控制器上下文，因为期望您将返回到呈现它的视图。当您关闭它时，您将使用选项卡栏上下文返回该呈现视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:29:10.547

朋友们，我终于这样做了。感谢您的所有帮助。希望这对您也有帮助。:)

```
- (IBAction)moveToCalendar:(id)sender {
    self.tabBarController.delegate = self;
    self.tabBarController.selectedIndex = 2;
    [(SAGraphView_iPad *)self.tabBarController.selectedViewController calendar:self];
} 
```

# ruby-on-rails-3 - 通过: :delete 定义代码

> ID：14372541
> 
> 赞同：1
> 
> 时间：2013-01-17T05:10:18.743
> 
> 标签：ruby-on-rails-3

`via: :delete`在 routes.rb中使用这个特定代码“”的目的是什么？

```
match '/signout', to: 'sessions#destroy', via: :delete 
```

我知道使用“ `match '/signout', to: 'sessions#destroy',`”的目的。请定义代码“ `via: :delete`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:38:50.460

:via 选项是将请求限制为一个或多个 HTTP 方法，查看[HTTP Verb Constraints](http://guides.rubyonrails.org/routing.html#http-verb-constraints)

# django - 不要在上传模块的帮助下通过 nginx 上传文件

> ID：14372542
> 
> 赞同：3
> 
> 时间：2013-01-17T05:10:26.123
> 
> 标签：django, upload, module, nginx

在我的项目中出现了问题。不要上传文件。这是我的代码

配置 nginx

```
server{

listen 9000;
server_name localhost;
root  /home/path/my/project;

location ~ ^/(static|media)/ {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
}

location /file-upload {
    internal;
    upload_pass /upload-file/;
    upload_store /home/payh/my/project/media/video;
    upload_max_file_size 250m;

    upload_set_form_field $upload_field_name.name "$upload_file_name";
    upload_set_form_field $upload_field_name.content_type "$upload_content_type";
    upload_set_form_field $upload_field_name.path "$upload_tmp_path";

    upload_pass_form_field "^csrfmiddlewaretoken$";

    upload_limit_rate 2m;
    track_uploads upload 1m;
}

location = /upload/progress {
    report_uploads upload;
}

location / {
    proxy_pass_header Server;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Scheme $scheme;
    proxy_connect_timeout 10;
    proxy_read_timeout 10;
    proxy_pass http://localhost:8000/;
}
error_page 500 502 503 504 /media/50x.html;
} 
```

单击按钮上传后，请求由 nginx_accel 进入函数。然后查看为 nginx 创建响应并发送。不允许 Nginx 返回 405。我不知道为什么。我的意见.py

```
@login_required
@csrf_protect
def upload(request):
    context = RequestContext(request)

    if request.method == 'POST':
        pathfile = request.POST.get('upfile.path')
        upfile   = open(pathfile, 'r')
        file = File(upfile)

        form = NewFileForm(request.POST, initial={'upfile':file})
        if form.is_valid():
            form.save()
            return HttpResponseRedirect(reverse(upload))
    else:
        form = NewFileForm()

    return render_to_response('upload.html', 
                          {'form':form},
                           context_instance=context)    
@login_required
@csrf_protect
def nginx_accel(request):
    if request.user.id == 1:
        file = request.FILES.get('upfile').name
        url = '/'.join(['/file-upload', file])
        response = HttpResponse()

        response['Content-Type']= ''
        response['X-Accel-Redirect'] = url

        return response 
```

浏览器中的 Nginx 返回“405 不允许”。谁能说出为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:42:22.427

尝试：删除字符串内部；
在 location /file-upload
如果请求具有 POST 以外的方法，则模块返回错误 405（不允许使用方法）。可以通过 error_page 指令在其他位置处理使用此类方法的请求。 [更多信息](http://www.grid.net.ru/nginx/upload.en.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:02:00.180

错误的原因是这个`file = request.FILES.get('upfile').name`。它将绕过并尝试在 POST 请求上提供静态文件，从而导致 405 错误。解决您的问题。

```
@login_required
@csrf_protect
def nginx_accel(request):
    if request.method == 'GET':
        if request.user.id == 1:
            file = request.GET.get('upfile').name
            url = '/'.join(['/file-upload', file])
            response = HttpResponse()

            response['Content-Type']= ''
            response['X-Accel-Redirect'] = url

            return response 
```

# jquery - 在每第三个 div Jquery 之后附加跨度标记

> ID：14372545
> 
> 赞同：3
> 
> 时间：2013-01-17T05:10:34.813
> 
> 标签：jquery, jquery-selectors

我正在寻找在每三个 div 标签之后放置一个跨度标签的解决方案。

**HTML**

```
<div class="grid_15">
   <div class="grid_5">
      <p>Sun</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Mon</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Tue</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Wed</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Thu</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Fri</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Sat</p>
      <div>
         <div class="suggest nudge-up">
            <div class="form-content-left">Morning</div>
            <div class="form-content-right">(7.00 - 8.00)</div>
            <span class="clear"></span><span class="clear"></span>
         </div>
      </div>
   </div>
</div> 
```

**需要**

```
<div class="grid_15">
   <div class="grid_5">
      <p>Sun</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Mon</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Tue</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   **<span class="clear"></span>**
   <div class="grid_5">
      <p>Wed</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Thu</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   <div class="grid_5">
      <p>Fri</p>
      <div>
         <div class="suggest nudge-up"><span class="form-content-left">All Hours</span><span class="clear"></span></div>
      </div>
   </div>
   **<span class="clear"></span>**
   <div class="grid_5">
      <p>Sat</p>
      <div>
         <div class="suggest nudge-up">
            <div class="form-content-left">Morning</div>
            <div class="form-content-right">(7.00 - 8.00)</div>
            <span class="clear"></span><span class="clear"></span>
         </div>
      </div>
   </div>
</div> 
```

如您所见，结果有，跨度标记（**`<span class="clear"></span>`**），每三个 div 完成后，我尝试：

**jQuery**

```
var a = $('html').find('div.grid_15 > div.grid_5');
for( var i = 0; i < a.length; i+=3 ) {
a.slice(i, i+3).append('<span class="clear"></span>');
} 
```

但没有得到预期的结果，
这里是链接：

[http://jsfiddle.net/pxaS4/](http://jsfiddle.net/pxaS4/)

请帮我解决。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T05:14:58.667

您可以使用`:nth-child(3n)`选择器：

```
$('div.grid_15 > div.grid_5:nth-child(3n)').after('<span class="clear">foo</span>'); 
```

**演示：http: [//jsfiddle.net/pxaS4/2/](http://jsfiddle.net/pxaS4/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:14:50.193

```
$('.grid_5').each(function(index){

if(((index+1)%3)==0)
{
$(this).after('<span class="clear"></span>');
}

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:16:24.803

```
$(".grid_5").each(function (i) {
 if ((i+1)%3==0) $(this).after('<span class="clear"></span>');  
}); 
```

# smartgwt - ListGrid 值不刷新

> ID：14372556
> 
> 赞同：0
> 
> 时间：2013-01-17T05:12:23.703
> 
> 标签：smartgwt

我有一个 UI，其中有一个主按钮。当我单击此按钮时，我会看到一个弹出窗口，其中包含两个 ListGrid、一个下拉菜单和一个保存按钮。

问题是当我从左边的 ListGrid 拖放一些东西到右边的，然后简单地关闭窗口而不保存值。如果我再次单击主按钮，则弹出窗口包含已存在于右侧列表网格中的拖放值。

当我从下拉列表中选择其他值时也是如此。在更改下拉值期间，我正在调用服务器并重置两个 ListGrids 中的值，但这不会刷新值。

我正在使用数据源设置值。我试过了`invlaidateCache()`，，，`AutoCacheAllData()``setCacheAllData()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:26:34.913

ListGrids 正在更改和保存。您可以在单击主按钮后保存 ListGrid 的状态，如果单击关闭按钮 - 还原所有更改。

也就是说，如果我理解正确的话。如果您可以定义一个您希望回答的问题，那将会很有帮助。

# c# - 在幻灯片放映扩展器 Asp.net C# 上显示数据库中的图像

> ID：14372558
> 
> 赞同：1
> 
> 时间：2013-01-17T05:12:40.723
> 
> 标签：c#, asp.net, ajax

我尝试了很多方法来在 AJAX 的图像滑块上显示图像，但它们都不起作用。请帮助解决错误。

```
<asp:ToolkitScriptManager
    ID="ToolkitScriptManager1" runat="server">
</asp:ToolkitScriptManager>
<asp:Image ID="Image2" runat="server" Height="200px" Width="315px" />
<asp:SlideShowExtender ID="Image1_SlideShowExtender" runat="server" 
 TargetControlID="Image2"  SlideShowServiceMethod="GetSlides" 
 SlideShowServicePath="WebService.asmx"  PreviousButtonID="Button1"  PlayButtonID="Button2"  
 NextButtonID="Button3"  PlayButtonText="Play"  StopButtonText="Stop"  AutoPlay="true"  Loop="true">

                                 </asp:SlideShowExtender> 
```

在 Webservice.asmx.cs 文件中

```
 //Uncomment the following line if using designed components 
    //InitializeComponent(); 

[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]

public AjaxControlToolkit.Slide[] GetSlides()  
{
    string[] imagenames = System.IO.Directory.GetFiles(Server.MapPath("~/Pic"));
    AjaxControlToolkit.Slide[] photos = new AjaxControlToolkit.Slide[imagenames.Length];
    for (int i = 0; i < imagenames.Length; i++)
    {
        string[] file = imagenames[i].Split('\\');
        photos[i] = new AjaxControlToolkit.Slide("Pic/" + file[file.Length - 1], file[file.Length - 1], "");
    }
    return photos;
}
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:07:37.323

[System.Web.Script.Services.ScriptService]

取消注释此行您的幻灯片扩展器将开始工作

# javascript - Backbone.Model => Uncaught TypeError: Object [Object object] has not method 'apply'

> ID：14372563
> 
> 赞同：1
> 
> 时间：2013-01-17T05:13:00.960
> 
> 标签：javascript, backbone.js, requirejs, marionette

我已经与这个问题斗争了几个小时。我似乎无法弄清楚为什么我的代码可以工作，而现在却不行！

我在 requirejs 上使用 Backbone 和 Marionette 构建了一个相当复杂的应用程序，而且我对所有这些库都是新手，所以有点令人困惑。

我收到错误

```
Uncaught TypeError: Object [object Object] has no method 'apply' 
```

而且我似乎无法弄清楚发生了什么或为什么我的应用程序现在无法运行，无论我似乎注释掉什么代码。

有什么帮助可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T05:13:00.960

我发现了问题。我一直在检查我的代码并“优化”（我想）一些冗余。

而不是这个：

```
define(["backbone"], function( Backbone ){
  var model = Backbone.Model.extend({
        myfunc : function(){ /*do stuff */}
  });

   return model;
}); 
```

我已经更改了一堆代码，如下所示：

```
define(["backbone"], function( Backbone ){
     return Backbone.Model.extend({
          myfunc : function(){ /*do stuff*/ }
     });
}); 
```

不是问题吧？大多。

我还使用了我在另一篇文章中读到的关于通过返回实例化模型从 require.js 模块获取单例功能的漂亮技巧！酷...主要是。

我有这个：

```
define(["backbone"], function( Backbone ){
    var singleton = Backbone.Model.extend({
         myfunc : function(){ /*do singleton stuff*/ }
    });

    // because require.js only runs this code once, this essentially creates a singleton!
    return new singleton();
}); 
```

效果很好！

然后我就怂了...

```
define(["backbone"], function( Backbone ){
    return new Backbone.Model.extend({
         myfunc : function(){ /*do singleton stuff... no more!*/ }
    })();
}); 
```

我开始得到我的`has no method 'apply'`错误。

我花了 2 天的大部分时间和很多挫折来追查问题，我终于从这篇文章中得到了答案：

[新 Backbone.Model() 与 Backbone.Model.extend()](https://stackoverflow.com/questions/9093209/new-backbone-model-vs-backbone-model-extend)

它很好地解释了如何实例化 Backbone.Model 但 Backbone.Model.extend 只是为您提供了一个构造函数，然后您可以使用它来实例化自定义 Backbone.Model 对象。

我希望这可以减轻我刚刚经历的痛苦。

# sql-server-2008 - 将数据库表从远程服务器复制到 sqlserver 中的本地系统

> ID：14372571
> 
> 赞同：1
> 
> 时间：2013-01-17T05:13:28.023
> 
> 标签：sql-server-2008

假设我们在远程数据库服务器上有一个表。我想将整个表复制到本地机器的 sqlserver 上。是否有任何 sql 查询来执行此操作？我是否必须在本地计算机上创建表架构，然后将表内容从远程服务器复制到本地计算机，或者有什么方法可以将表及其架构完全复制到本地计算机上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:24:46.543

您可以使用链接服务器，然后您可以使用 select * into。但是之后您需要在表上创建约束/索引。

或者您首先创建表并创建任何其他约束。您现在可能不想创建索引。这本身就是一个很大的话题，它通常取决于表的大小和数据的形式。但是，如果您要复制相同的数据。我建议您至少创建聚集索引（如果远程表具有聚集索引）并在填充表后创建 NC 索引。

然后你可以做以下

1.使用插入使用链接服务器。对聚集索引列使用 order by。2\. 如果您因任何原因无法使用链接服务器。使用 BCP 输出到远程服务器的文件 在 bcp'ing out 时使用 order by 然后批量插入或 BCP in 到本地系统并再次使用 order 子句。

如果在加载表之前没有在表上创建聚集索引，则不需要使用 order 子句。然后你可以创建你需要在表上的索引。

# php - Kohana 3.3 中的未知列错误

> ID：14372574
> 
> 赞同：0
> 
> 时间：2013-01-17T05:13:43.957
> 
> 标签：php, kohana

我将我的应用程序从 Koahana 3.0.1 升级到了 Kohana 3.3。它在 Koahana 3.0.1 中正常工作。但是，在 Kohana 3.3 中，出现未知列错误。以下是我在业务模型中使用的查询。

```
$biz = $this->where('business.id','IN',$arr)
       ->join('users','LEFT') 
   ->select(array('users.id','u'))
   ->on('users.business_id','=','business.id')  
   ->find_all(); 
```

表名是企业和用户。模型定义为

```
class Model_Business extends ORM 
```

错误说 -

Database_Exception [1054]：“where 子句”中的未知列“businesses.id”

我可以解决这个问题（通过如上更新）但是，现在我得到的新错误是 - “方法 find() 不能在加载的对象上调用”。

看起来我们不能在模型本身中使用 find_all() 。在我当前的项目中，我们从模型中返回所有查询的结果。这意味着，升级将需要更改几乎所有代码。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:10:18.307

从 Kohana 3.1 开始，ORM 字段总是返回别名。如果是 a `$_has_many`，它是复数，如果它是 a `$_has_one`or `$_belongs_to`，它是单数。如果要确保模型名称，请设置`$_object_name`为所需的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:17:44.440

你试过businesss.id吗？

# ios - 我的应用名称是否出现在“设置”->“iCloud”中？

> ID：14372590
> 
> 赞同：-1
> 
> 时间：2013-01-17T05:15:12.297
> 
> 标签：ios, icloud

我已将 iCloud 集成到我的应用程序中。设置应用程序的 iCloud 页面现在是否会显示我的应用程序名称，就像推送通知一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:12:24.997

如果您使用的是 iCloud*文档和数据*，那么它将在 Settings.app 的 iCloud 部分下显示您的应用名称（iCloud–>存储和备份–>管理存储）。

唯一确定的方法是测试它，看看它是否出现。

# css - 如何在流畅的布局上显示 X + (1/3) 图像？

> ID：14372592
> 
> 赞同：0
> 
> 时间：2013-01-17T05:15:23.667
> 
> 标签：css

示例：http: [//jsfiddle.net/AtbFR/2](http://jsfiddle.net/AtbFR/2)。

我有一个液体布局，两边各有两列。这是 100% 的边距，用于填充并允许列内的液体布局。

您可以调整浏览器的大小，以查看更多的图像，浏览器变得越宽。这是理想的，但我需要稍作改动。它始终显示可变“X”个图像。我需要它来显示 X+(1/3) 图像，所以如果它是一个非常大的窗口，它将显示 10 个全宽图像，并且只有最后一个图像的 1/3。

```
#list {
  width:80%;
  border:1px solid black;
  margin: 0 auto;
}
#list ul {
  height:40px;
   overflow:hidden;
}

#list ul li {
  display:inline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:28:28.523

尝试在 ul 上设置最小宽度并在 #list div 上设置溢出：隐藏。

[http://jsfiddle.net/AtbFR/3/](http://jsfiddle.net/AtbFR/3/)

```
#list {
  width:80%;
  border:1px solid black;
  margin: 0 auto;
  overflow:hidden;
}
#list ul {
  height:40px;
   overflow:hidden;
  min-width:80px;
} 
```

# php - 如果无法访问 Internet，则显示静态图像

> ID：14372593
> 
> 赞同：2
> 
> 时间：2013-01-17T05:15:25.967
> 
> 标签：php, web

我在一个大学网站上工作。我正在使用 Facebook 插件通过以下方式显示 Facebook 页面之类的内容：

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fpcclahore&amp;width=364&amp;height=220&amp;show_faces=true&amp;colorscheme=light&amp;stream=false&amp;border_color&amp;header=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:364px; height:220px;" allowTransparency="true"></iframe> 
```

问题是 Facebook 在大学服务器上被阻止，所以除了警告之外什么都没有出现。当互联网不可用（本地主机）或 Facebook 无法访问时，是否可以显示静态图像而不是 Facebook 插件？像这样：

```
if(Facebook accessible)
show Facebook pluging
else
<img src="images/fb.jpg" width="364" height="220"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:52:21.720

```
// check if local server is HTTPS if so check Facebook HTTPS
$remote = ('80' !== $_SERVER['SERVER_PORT'])
    ? array('host' => 'ssl://www.facebook.com', 'port' => 443)  // HTTPS Facebook
    : array('host' => 'www.facebook.com', 'port' => 80);        // HTTP Facebook

$fp = @ fsockopen($remote['host'], $remote['port'], $errno, $errstr, 5);

echo (!$fp) // check if failed
    ? '<img src="images/fb.jpg" width="364" height="220">' // output local image
    : '<iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fpcclahore&amp;width=364&amp;height=220&amp;show_faces=true&amp;colorscheme=light&amp;stream=false&amp;border_color&amp;header=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:364px; height:220px;" allowTransparency="true"></iframe>'; // output IFRAME 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:53:19.480

您必须为此使用客户端 JavaScript 而不是服务器端代码。`www.facebook.com`JavaScript 允许您检查图像是否可以成功加载，因此您可以尝试使用它通过尝试从（**[测试页面](http://jsfiddle.net/vbE7m/)**）加载图像来检查 Facebook 是否可以访问：

```
var testImg = new Image();

testImg.onload = function() {
  alert('facebook REACHABLE');
};

testImg.onerror = function() {
  alert('facebook UNREACHABLE');
};

testImg.src = '//www.facebook.com/images/fb_logo_small.png?' + new Date().getTime(); 
```

然后您可以相应地设置`src`iframe 的属性。

您也可以将`onerror`iframe 本身放在上面（而不是使用单独的测试图像）；但是，这将不起作用学院的内容过滤系统不会返回指示错误的 HTTP 状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:27:30.477

您可以先尝试 ping 该站点。如果结果是肯定的，则显示插件，否则显示静态图像。将域设置为 facebook.com

```
 function pingDomain($domain){
   $file      = fsockopen ($domain, 80, $errno, $errstr, 10);
   $status    = 0;

   if (!$file) $status = -1;  // show static image
   else {
   //show plugin
   }

 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-17T05:26:17.740

您可以通过 php.ini 的功能检查 facebook 是否可用 `fsockopen`。

IE，

```
 $check = fsockopen("www.facebook.com", 80, "error_no", "error_message", timeout in seconds);

    if (!$check) {

    //iframe

    } else {

   echo "<img src='images/fb.jpg' width='364' height='220'>"

    } 
```

我没有检查它是否有效。尝试一下。

# ruby-on-rails - Rails 迁移问题

> ID：14372598
> 
> 赞同：2
> 
> 时间：2013-01-17T05:16:16.747
> 
> 标签：ruby-on-rails, ruby

我正在尝试启动并运行应用程序，但是在运行时遇到了这个问题`rake db:migrate`：

```
AddDueDateToProjectTodos: migrating =======================================
-- add_column(:project_todos, :due_date, :string)
rake aborted!
An error has occurred, this and all later migrations canceled:

SQLite3::SQLException: no such table: project_todos: ALTER TABLE "project_todos" ADD "due_date" varchar(255) 
```

我认为这可能源于开发人员删除迁移，因为他说他以前做过。

无论如何要解决这个问题还是我需要重新创建迁移？如果是这种情况，最好的解决方法是什么？

**编辑**

这是 database.yml 文件

```
# development:
#   adapter: sqlite3
#   encoding: utf8
#   database: subscriptions_development
#   username: root
#   password:
# 
# # Warning: The database defined as 'test' will be erased and
# # re-generated from your development database when you run 'rake'.
# # Do not set this db to the same as development or production.
# test:
#   adapter: sqlite3
#   encoding: utf8
#   database: subscriptions_test
#   username: root
#   password:
# 
# production:
#   adapter: sqlite3
#   encoding: utf8
#   database: subscriptions_production
#   username: root
#   password: 

development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000 
```

这是架构

```
# encoding: UTF-8
# This file is auto-generated from the current state of the database. Instead
# of editing this file, please use the migrations feature of Active Record to
# incrementally modify your database, and then regenerate this schema definition.
#
# Note that this schema.rb definition is the authoritative source for your
# database schema. If you need to create the application database on another
# system, you should be using db:schema:load, not running all the migrations
# from scratch. The latter is a flawed and unsustainable approach (the more migrations
# you'll amass, the slower it'll run and the greater likelihood for issues).
#
# It's strongly recommended to check this file into your version control system.

ActiveRecord::Schema.define(:version => 20121218041922) do

  create_table "accounts", :force => true do |t|
    t.string   "name"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "full_domain"
    t.datetime "deleted_at"
  end

  add_index "accounts", ["full_domain"], :name => "index_accounts_on_full_domain"

  create_table "categories", :force => true do |t|
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
    t.string   "name"
    t.string   "tutorial_id"
  end

  create_table "categories_tutorials", :force => true do |t|
    t.integer "category_id"
    t.integer "tutorial_id"
  end

  create_table "clients", :force => true do |t|
    t.datetime "created_at",         :null => false
    t.datetime "updated_at",         :null => false
    t.string   "address"
    t.string   "city"
    t.string   "company"
    t.string   "email"
    t.string   "name"
    t.string   "phone"
    t.string   "state"
    t.string   "website"
    t.string   "zip"
    t.string   "photo"
    t.string   "photo_file_name"
    t.string   "photo_content_type"
    t.integer  "photo_file_size"
    t.datetime "photo_updated_at"
  end

  create_table "clients_projects", :force => true do |t|
    t.integer "project_id"
    t.integer "client_id"
  end

  create_table "contracts", :force => true do |t|
    t.string   "title"
    t.integer  "client_id"
    t.string   "body"
    t.integer  "status"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "custom_documents", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "title"
    t.string   "body"
    t.integer  "client_id"
    t.boolean  "status"
  end

  create_table "documents", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "invoices", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "project_comments", :force => true do |t|
    t.integer  "user_id"
    t.integer  "project_id"
    t.string   "comment"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "user_name"
  end

  create_table "project_files", :force => true do |t|
    t.datetime "created_at",        :null => false
    t.datetime "updated_at",        :null => false
    t.string   "title"
    t.integer  "project_id"
    t.string   "file_file_name"
    t.string   "file_content_type"
    t.integer  "file_file_size"
    t.datetime "file_updated_at"
  end

  create_table "project_todo_comments", :force => true do |t|
    t.string   "comment"
    t.integer  "user_id"
    t.integer  "project_todo_id"
    t.integer  "project_todo"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.integer  "project_id"
  end

  create_table "project_todos", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "due_date"
    t.string   "title"
    t.boolean  "status"
    t.integer  "project_id"
    t.datetime "due"
  end

  create_table "projectcommentations", :force => true do |t|
    t.integer  "project_id"
    t.integer  "user_id"
    t.string   "user_name"
    t.integer  "comment_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "projectmemberizations", :force => true do |t|
    t.integer  "project_id"
    t.integer  "user_id"
    t.date     "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

# Could not dump table "projects" because of following StandardError
#   Unknown type 'project' for column 'project_todo_due'

  create_table "projects_clients", :force => true do |t|
    t.integer "project_id"
    t.integer "client_id"
  end

  create_table "projects_users", :force => true do |t|
    t.integer "user_id"
    t.integer "project_id"
  end

  create_table "projecttodocomments_projecttodos", :force => true do |t|
    t.integer "project_todo_comment_id"
    t.integer "project_todo_id"
  end

  create_table "proposals", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "body"
    t.integer  "client_id"
    t.boolean  "status"
    t.string   "title"
  end

  create_table "saas_admins", :force => true do |t|
    t.string   "email",                                 :default => "", :null => false
    t.string   "encrypted_password",     :limit => 128, :default => "", :null => false
    t.string   "password_salt",                         :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",                         :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "saas_admins", ["email"], :name => "index_admins_on_email", :unique => true
  add_index "saas_admins", ["reset_password_token"], :name => "index_admins_on_reset_password_token", :unique => true

  create_table "subscription_affiliates", :force => true do |t|
    t.string   "name"
    t.decimal  "rate",       :precision => 6, :scale => 4, :default => 0.0
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "token"
  end

  add_index "subscription_affiliates", ["token"], :name => "index_subscription_affiliates_on_token"

  create_table "subscription_discounts", :force => true do |t|
    t.string   "name"
    t.string   "code"
    t.decimal  "amount",                 :precision => 6, :scale => 2, :default => 0.0
    t.boolean  "percent"
    t.date     "start_on"
    t.date     "end_on"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.boolean  "apply_to_setup",                                       :default => true
    t.boolean  "apply_to_recurring",                                   :default => true
    t.integer  "trial_period_extension",                               :default => 0
  end

  create_table "subscription_payments", :force => true do |t|
    t.integer  "subscriber_id"
    t.integer  "subscription_id"
    t.decimal  "amount",                    :precision => 10, :scale => 2, :default => 0.0
    t.string   "transaction_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.boolean  "setup"
    t.boolean  "misc"
    t.integer  "subscription_affiliate_id"
    t.decimal  "affiliate_amount",          :precision => 6,  :scale => 2, :default => 0.0
    t.string   "subscriber_type",                                          :default => "User"
  end

  add_index "subscription_payments", ["subscriber_id", "subscriber_type"], :name => "index_subscription_payments_on_subscriber"
  add_index "subscription_payments", ["subscription_id"], :name => "index_subscription_payments_on_subscription_id"

  create_table "subscription_plans", :force => true do |t|
    t.string   "name"
    t.decimal  "amount",         :precision => 10, :scale => 2
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "renewal_period",                                :default => 1
    t.decimal  "setup_amount",   :precision => 10, :scale => 2
    t.integer  "trial_period",                                  :default => 1
    t.integer  "user_limit"
    t.float    "unit_price"
    t.text     "description"
    t.boolean  "featured",                                      :default => false
    t.string   "trial_interval",                                :default => "months"
  end

  create_table "subscriptions", :force => true do |t|
    t.decimal  "amount",                    :precision => 10, :scale => 2
    t.datetime "next_renewal_at"
    t.string   "card_number"
    t.string   "card_expiration"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "state",                                                    :default => "trial"
    t.integer  "subscription_plan_id"
    t.integer  "subscriber_id"
    t.integer  "renewal_period",                                           :default => 1
    t.string   "billing_id"
    t.integer  "user_limit"
    t.integer  "subscription_discount_id"
    t.integer  "subscription_affiliate_id"
    t.string   "subscriber_type",                                          :default => "User"
  end

  add_index "subscriptions", ["subscriber_id", "subscriber_type"], :name => "index_subscriptions_on_subscriber_id_and_subscriber_type"

  create_table "tutorials", :force => true do |t|
    t.datetime "created_at",   :null => false
    t.datetime "updated_at",   :null => false
    t.string   "content"
    t.string   "title"
    t.integer  "user_id"
    t.integer  "category_ids"
  end

  create_table "users", :force => true do |t|
    t.string   "name"
    t.string   "email",                                   :null => false
    t.string   "encrypted_password",                      :null => false
    t.string   "password_salt",                           :null => false
    t.datetime "last_sign_in_at"
    t.datetime "current_sign_in_at"
    t.string   "last_sign_in_ip"
    t.string   "current_sign_in_ip"
    t.integer  "account_id"
    t.boolean  "admin",                :default => false
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "confirmation_token"
    t.datetime "confirmed_at"
    t.datetime "confirmation_sent_at"
    t.string   "reset_password_token"
    t.string   "remember_token"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",        :default => 0
    t.integer  "failed_attempts",      :default => 0
    t.string   "unlock_token"
    t.datetime "locked_at"
    t.string   "photo_file_name"
    t.string   "photo_content_type"
    t.integer  "photo_file_size"
    t.datetime "photo_updated_at"
    t.string   "rate"
    t.string   "description"
    t.string   "web"
    t.string   "twitter"
    t.string   "dribbble"
    t.string   "github"
  end

  add_index "users", ["account_id"], :name => "index_users_on_account_id"
  add_index "users", ["confirmation_token"], :name => "index_users_on_confirmation_token", :unique => true
  add_index "users", ["email"], :name => "index_users_on_email"
  add_index "users", ["reset_password_token"], :name => "index_users_on_reset_password_token", :unique => true
  add_index "users", ["unlock_token"], :name => "index_users_on_unlock_token", :unique => true

  create_table "users_projects", :force => true do |t|
    t.integer "user_id"
    t.integer "project_id"
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T05:33:37.927

加载 rake db:schema:load 更正了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T09:21:20.490

**实际问题是没有这样的表“project_todos”所以alter table 命令无法执行。**

第一步：打开终端执行以下命令

> **$rails 控制台**
> 
> 加载开发环境（Rails 4.1.0）
> 
> 2.1.1 :001 > **ActiveRecord::Migration.create_table(:project_todos)**这一步将创建表。
> 
> 2.1.1:002 > 退出

第 2 步：然后通过执行 **rake db:migrate进行迁移**

# ado.net - 使用实体数据模型和 Linq 将记录插入表时出错

> ID：14372602
> 
> 赞同：0
> 
> 时间：2013-01-17T05:16:45.467
> 
> 标签：ado.net, ado.net-entity-data-model

我正在研究实体数据模型，并且我创建了一种将记录插入到 sql server 2005 DB 表中的方法。在插入记录之前检查表中是否已经存在同名用户。这是一个类库，我在 Asp.net Web 应用程序中引用它。当我从 Web 应用程序调用此 Insert 方法时，我得到异常为“序列不包含元素”。

当我评论 checkUserExist 函数时，记录正在插入到数据库中。

这是我的源代码。

```
public class EntityClass
{
    public static string InsertRecord(string username, string domain, string host)
    {
        bool isExist = false;
        bool returnNull = false;
        try
        {

            SolVeEntities entity = new SolVeEntities();
            User ud = new User();

            //before inserting user into the table, verify whether User already exist
            isExist = CheckUserExist(username);

            if (!isExist)
            {
                ud.username = username;
                ud.domain = domain;
                ud.host = host;
                ud.datetime = DateTime.Now;

                entity.Users.AddObject(ud);
                entity.SaveChanges();
            }
            else { returnNull = true;

            }
        }
        catch (Exception ex)
        {

        }

        if (returnNull)
        return "user " + username + " already Exist";
        else
            return username + domain + host;
    }

    private static bool CheckUserExist(string uname)
    {
        bool isExist = false;
        SolVeEntities entity = new SolVeEntities();
        User u1 = entity.Users.First(u => u.username == uname);
        if (u1.username == uname)
        {
            isExist = true;
        }
        else
        { isExist = false; }

        return isExist;
    }
} 
```

任何建议/解决方案请...谢谢。我在用户 u1 = entity.Users.First(u => u.username == uname); 的 CheckUserExist 方法中遇到异常；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:20:26.017

`CheckUserExist`用以下方式重写：

```
private static bool CheckUserExist(string uname)
{
    using(SolVeEntities entity = new SolVeEntities())
    {
        return entity.Users.Any(u => u.username == uname);
    }
} 
```

# c++ - 如何使用 select 将数据从服务器发送到客户端

> ID：14372607
> 
> 赞同：2
> 
> 时间：2013-01-17T05:17:19.050
> 
> 标签：c++, sockets, network-programming, client-server

我在一些教程的帮助下想出了一个代码来连接客户端并使用 select 函数接受来自 slent 的消息。现在我想做的是在服务器需要时将数据发送到特定的客户端。如何做到这一点？？..提前致谢。

服务器代码

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/time.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>

#define PORT "9999"   // port we're listening on

// get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa)
{
if (sa->sa_family == AF_INET) 
{
    return &(((struct sockaddr_in*)sa)->sin_addr);
}

return &(((struct sockaddr_in6*)sa)->sin6_addr);
}

int main(void)
{
struct timeval tv;
tv.tv_sec = 2;
tv.tv_usec = 500000;

fd_set master;    // master file descriptor list
fd_set read_fds;  // temp file descriptor list for select()
fd_set write_fds;
int fdmax;        // maximum file descriptor number

int listener;     // listening socket descriptor
int newfd;        // newly accept()ed socket descriptor
struct sockaddr_storage remoteaddr; // client address
socklen_t addrlen;

char buf[256];    // buffer for client data
int nbytes;

char remoteIP[INET6_ADDRSTRLEN];

int yes=1;        // for setsockopt() SO_REUSEADDR, below
int i, j, rv;

struct addrinfo hints, *ai, *p;

FD_ZERO(&master);    // clear the master and temp sets
FD_ZERO(&read_fds);
FD_ZERO(&write_fds);

// get us a socket and bind it
memset(&hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_STREAM;
hints.ai_flags = AI_PASSIVE;
if ((rv = getaddrinfo(NULL, PORT, &hints, &ai)) != 0) 
{
    fprintf(stderr, "selectserver: %s\n", gai_strerror(rv));
    exit(1);
}

for(p = ai; p != NULL; p = p->ai_next) 
{
    listener = socket(p->ai_family, p->ai_socktype, p->ai_protocol);
    if (listener < 0) 
    { 
        continue;
    }

    // lose the pesky "address already in use" error message
    setsockopt(listener, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(int));

    if (bind(listener, p->ai_addr, p->ai_addrlen) < 0) 
    {
        close(listener);
        continue;
    }

    break;
}

// if we got here, it means we didn't get bound
if (p == NULL) 
{
    fprintf(stderr, "selectserver: failed to bind\n");
    exit(2);
}

freeaddrinfo(ai); // all done with this

// listen
if (listen(listener, 10) == -1) {
    perror("listen");
    exit(3);
}

// add the listener to the master set
FD_SET(listener, &master);

printf("Listener is %d \n" , listener);

// keep track of the biggest file descriptor
fdmax = listener; // so far, it's this one
//accept 3 clients

// main loop
for(;;) {
    read_fds = master; // copy it
    write_fds = master;
    if (select(fdmax+1, &read_fds, &write_fds, NULL, NULL) == -1) 
    {
        perror("select");
        exit(4);
    }

    //WRITE TO CONNECTIONS IF SOME SIGNAL OCCURED
    if(signal occured)
    {
        send data to some client;
    }

    // run through the existing connections looking for data to read
    // ADD NEW CONNECTIONS READ FROM CONNECTIONS
    for(i = 0; i <= fdmax; i++) 
    {

        if (FD_ISSET(i, &read_fds)) 
        { // we got one!!
            // handle new connections
            if (i == listener) 
            {                    

                addrlen = sizeof(remoteaddr);
                newfd = accept(listener, (struct sockaddr *)&remoteaddr, &addrlen);
                //write(listener+1 , "SERVER MESSAGE :: ACCEPTED" ,26);
                if (newfd == -1) 
                {
                    perror("accept");
                } 
                else 
                {
                    FD_SET(newfd, &master); // add to master set
                    if (newfd > fdmax) 
                    {    // keep track of the max
                        fdmax = newfd;
                    }
                    printf("selectserver: new connection from %s on socket %d\n", inet_ntop(remoteaddr.ss_family,
                            get_in_addr((struct sockaddr*)&remoteaddr), remoteIP, INET6_ADDRSTRLEN), newfd);
                } 
            } else 
            {
                // handle data from a client
                if ((nbytes = recv(i, buf, sizeof buf, 0)) <= 0) 
                {
                    // got error or connection closed by client
                    if (nbytes == 0) 
                    {
                        // connection closed
                        printf("selectserver: socket %d hung up\n", i);
                    } else 
                    {
                        perror("recv");
                    }
                    close(i); // bye!
                    FD_CLR(i, &master); // remove from master set
                } else 
                {
                    // we got some data from a client
                    printf("Buffer we got %s ",buf);

                }
            } // END handle data from client
        } // END got new incoming connection
        memset(&buf[0], 0, sizeof(buf));
    } // END looping through file descriptors
} // END for(;;)--and you thought it would never end!

return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:20:32.297

您不能使用“select()”向客户端发送数据；)。

您*可以*使用套接字“send()”发送数据，就像您已经使用“recv()”读取数据一样。

建议：

查看 Beej 的指南 - 一本关于您感兴趣的套接字编程的优秀入门：

*   [http://www.beej.us/guide/bgnet/output/html/multipage/index.html](http://www.beej.us/guide/bgnet/output/html/multipage/index.html)

例如：

```
char *msg = "Beej was here!";
int len, bytes_sent;
.
.
.
len = strlen(msg);
bytes_sent = send(sockfd, msg, len, 0) 
```

# jquery - jQuery 菜单 - 基于 URL 的活动状态

> ID：14372612
> 
> 赞同：2
> 
> 时间：2013-01-17T05:17:45.073
> 
> 标签：jquery, hyperlink, menu

我只是想将活动状态改造成静态 html 菜单。菜单结构如下： -

```
<div id="navbar">
ul id="MenuBar1" class="MenuBarHorizontal">
  <li><a href="index.htm">Home</a></li>
  <li><a href="about.htm">About Us</a></li>
  <li><a href="products.htm">Products</a>
    <ul>
       <li><a href="product-grp1">Product Groups 1</a>
         <ul>
            <li><a href="product1.htm">Product 1</a>
            <li><a href="product2.htm">Product 2</a>
            <li><a href="product3.htm">Product 3</a>
         </ul>
       </li>
    </ul>
  </li>
</ul>
</div> 
```

您可以看到这是一个 3 级菜单系统，实际上显示为一个超级菜单。

我想做的是，根据您所在页面的 URL，将活动状态添加到顶级菜单。此活动状态需要显示您是在第二级还是第三级页面上。我需要根据页面 url 而不是单击来执行此操作，因为该站点确实有很多直接从 Google 到特定页面的链接，因此我也需要显示这些链接的位置。

请注意，文件结构是扁平的，因此每个 url 都是[http://www.thesite.com/about.htm](http://www.thesite.com/about.htm)等。

我一直试图从以前的问题中解决这个问题，但无法让它发挥作用。我猜这是因为菜单的深度，但非常感谢任何人能给我的任何指导。

* * *

感谢你的帮助。这真的让我走上了正轨。最后我使用了以下内容： -

```
/* The following adds active to the next level up of the url */
$('#MenuBar1 li a').each(function() {
 if(filename == $(this).attr('href')) {
      $(this).addClass('active');
 }
});

/* The following line looks for the .active class, then the parent of it with the #navbar ul.... structure, then adds the active class to that one only */
$('.active').parents('#navbar ul.MenuBarHorizontal li').addClass('active-top');
$('#navbar ul.MenuBarHorizontal>li').addClass('menu-top'); 
```

这样做是使用 jQuery 将 .active 类添加到特定链接，然后将 .active-top 添加到父级（不幸的是，所有这些都是因为我无法弄清楚如何仅针对我想要的级别）。最后一行将 .menu-top 类添加到菜单的顶层。

这种结构让我可以只定位菜单的顶层，而无需将格式从 DOM 向下传递到其他子选择器。它可能不是最优雅的解决方案，但它确实有效。

再次感谢所有给我建议的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:22:01.490

您可以使用 JavaScript获取当前*路径*`window.location.pathname`。您可以使用以下方法检查 jQuery：

```
$("#navbar a[href=" + window.location.pathname + "]").addClass('active'); 
```

这会将类添加到与当前路径具有相同属性的`active`所有锚点中。您可能需要修剪前导斜线。`#navbar``href`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:37:58.137

你可以这样做：

```
var url = window.location.pathname;
var filename = url.substring(url.lastIndexOf('/')+1);

$('#MenuBar1 a').each(function() {
     if(filename == $(this).attr('href')) {
          $(this).addClass('active');
     }
}); 
```

如果您需要应用于 li 的类，请执行以下操作：

var url = window.location.pathname; var 文件名 = url.substring(url.lastIndexOf('/')+1);

```
$('#MenuBar1 a').each(function() {
     if(filename == $(this).attr('href')) {
          $(this).parent('li').addClass('active');
     }
}); 
```

上面的响应会不正确，因为它们会给出完整的路径名，所以如果你的 url 是这样的：

```
http://www.thesite.com/about.htm 
```

“window.location.pathname”将返回：

```
/about.htm 
```

因此，您需要执行类似的操作，以便按照您的方式保留标记并获得所需的结果，或者您可以在 href 前面添加斜杠。

```
var url = window.location.pathname;
var filename = url.substring(url.lastIndexOf('/')+1);

$("#navbar a[href=" + filename + "]").addClass('active'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:23:35.553

用于`window.location.href`获取浏览器的当前 URL 位置...并将`addClass()`类名添加到链接... inmycase 我正在添加`active`

尝试这个

```
 <script>
 $(function(){
    var currenthref=window.location.href;
    $("#navbar a[href=" + currenthref + "]").addClass('active');  //adds active class to the current url.

})
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:00:42.093

在这里查看小提琴：http: [//jsfiddle.net/EVmsY/](http://jsfiddle.net/EVmsY/)

```
$(function(){
  var url = 'http://www.thesite.com/product1.htm'; // window.location;
  var page = url.substr(url.lastIndexOf('/') + 1);

  if (page) {
    $('#MenuBar1 li a[href="' + page + '"]').addClass('active');
    $('.active').parents().children('li a').addClass('active');
  }
}); 
```

# python - 从列表理解和一般情况下有效地创建 numpy 数组

> ID：14372613
> 
> 赞同：44
> 
> 时间：2013-01-17T05:17:46.047
> 
> 标签：python, performance, numpy

在我目前的工作中，我经常使用 Numpy 和列表​​推导，为了获得最佳性能，我有以下问题：

如果我按如下方式创建 Numpy 数组，幕后实际上会发生什么？

```
a = numpy.array( [1,2,3,4] ) 
```

我的猜测是python首先创建一个包含值的普通列表，然后使用列表大小分配一个numpy数组，然后将值复制到这个新数组中。这是正确的，还是解释器足够聪明地意识到列表只是中介，而是直接复制值？

同样，如果我希望使用以下命令从列表理解创建一个 numpy 数组`numpy.fromiter()`：

```
a = numpy.fromiter( [ x for x in xrange(0,4) ], int ) 
```

这会导致在输入之前创建一个中间值列表`fromiter()`吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-17T05:31:27.457

我相信您正在寻找的答案是`generator expressions`与[numpy.fromiter](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromiter.html)一起使用。

```
numpy.fromiter((<some_func>(x) for x in <something>),<dtype>,<size of something>) 
```

生成器表达式是惰性的 - 当您遍历它们时，它们会评估表达式。

使用列表推导生成列表，然后将其输入 numpy，而生成器表达式将一次生成一个。

像大多数语言（如果不是全部）一样，Python 评估内部 -> 外部的事物，因此 using`[<something> for <something_else> in <something_different>]`将创建列表，然后对其进行迭代。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T05:33:21.050

您可以创建自己的列表并进行试验以了解情况......

```
>>> class my_list(list):
...     def __init__(self, arg):
...         print 'spam'
...         super(my_list, self).__init__(arg)
...   def __len__(self):
...       print 'eggs'
...       return super(my_list, self).__len__()
... 
>>> x = my_list([0,1,2,3])
spam
>>> len(x)
eggs
4
>>> import numpy as np
>>> np.array(x)
eggs
eggs
eggs
eggs
array([0, 1, 2, 3])
>>> np.fromiter(x, int)
array([0, 1, 2, 3])
>>> np.array(my_list([0,1,2,3]))
spam
eggs
eggs
eggs
eggs
array([0, 1, 2, 3]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-19T15:09:01.000

对于标题中的问题，现在有一个名为 numba 的包，它支持[numpy 数组理解](https://numba.pydata.org/numba-doc/dev/reference/pysupported.html#list-comprehension)，它直接构造 numpy 数组而无需中间 python 列表。与 不同`numpy.fromiter`的是，它还支持嵌套推导。但是，请记住，如果您不熟悉 numba，它会有一些限制和性能怪癖。

也就是说，它可以非常快速和高效，但是如果你可以使用 numpy 的向量操作来编写它，那么让它更简单可能会更好。

```
>>> from timeit import timeit
>>> # using list comprehension
>>> timeit("np.array([i*i for i in range(1000)])", "import numpy as np", number=1000)
2.544344299999999
>>> # using numpy operations
>>> timeit("np.arange(1000) ** 2", "import numpy as np", number=1000)
0.05207519999999022
>>> # using numpy.fromiter
>>> timeit("np.fromiter((i*i for i in range(1000)), dtype=int, count=1000)",
...        "import numpy as np",
...        number=1000)
1.087984500000175
>>> # using numba array comprehension
>>> timeit("squares(1000)",
... """
... import numpy as np
... import numba as nb
... 
... @nb.njit
... def squares(n):
...     return np.array([i*i for i in range(n)])
... 
... 'compile the function'
... squares(10)
... """,
... number=1000)
0.03716940000003888 
```

# selenium - 在页面对象模式中应该如何处理页面的公共部分？

> ID：14372614
> 
> 赞同：0
> 
> 时间：2013-01-17T05:17:54.877
> 
> 标签：selenium, selenium-webdriver

我正在为自动化 UI 测试在 java 中创建页面对象。我正在尝试遵循页面对象模式，我想知道网站的公​​共部分是如何落入范式的？例如，AUT 有许多用于运行报告的不同页面，用于选择报告、日期范围、过滤等的左侧窗格对于所有页面都是通用的。那么我应该为这个公共区域创建一个不同的页面对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:01:10.107

是的... PageObjects 的主要目的是表示应用程序的重复部分，因此在您的测试中，此类重复部分的套件信息保留在单个 PageObject 中。

> ***PageObject 不需要代表整个页面。它可能代表在站点或页面中多次出现的部分，例如站点导航。***
> 
> ***基本原则是在您的测试套件中只有一个地方知道特定（部分）页面的 HTML 结构。***

***参考***- [http://code.google.com/p/selenium/wiki/PageObjects](http://code.google.com/p/selenium/wiki/PageObjects)

# android - 在单个 Activity 中跨多个片段重用 Google Map v2

> ID：14372617
> 
> 赞同：8
> 
> 时间：2013-01-17T05:18:06.150
> 
> 标签：android, android-mapview, android-maps-v2

我的一项活动切换了包含谷歌地图的片段。

起初我尝试使用片段的子片段管理器（ChildFragmentManager）来添加`SupportMapFragment`. 它工作正常，但是为每个片段再次加载地图，这需要很多时间。

我未能`SupportMapFragment`从一个片段分离并将其附加到另一个片段，因为它以某种方式与`ViewGroup`它最初放置的位置相关联。

所以最后我决定使用`MapView`在活动中创建的普通对象并将其添加到活动片段的视图组中，并在放入另一个片段的视图组之前将其删除。

一切正常，除了`onSaveInstanceState`（MapView 需要手动传递调用所有活动生命周期方法，如`onResume`, `onPause`, `onDestroy`, `onSaveInstanceState`）。当我尝试调用`mapView.onSaveInstanceState`我的活动时，它会破坏应用程序。

我想知道是否有其他人成功地在多个片段中重用了 GoogleMap？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-02-23T08:46:38.603

我在列表项中使用地图片段 - 我只有一个片段被创建并添加到`View`一次且只有一次 - 我有一个`ExpandableListView`并且我将它添加到适配器的`getChildView`.

# directory - 比较同一文件的两个不同目录

> ID：14372618
> 
> 赞同：3
> 
> 时间：2013-01-17T05:18:07.943
> 
> 标签：directory, compare, beyondcompare, bc

是否有任何工具可以比较相同命名文件的 2 个目录（具有不同的子目录）？

例如。DirA 有子目录 DirA1，DirA1 有一个名为 file.cpp 的文件。

DirB 有 file.cpp。

Dira->DirA1->file.cpp 和 DirB->file.cpp。

所以，如果我将这两个目录与​​ BC 进行比较，BC 不会比较这两个文件。它会将它们标记为双方的孤儿。

我们可以编写任何 BC 脚本来比较这两个文件吗？

PS：我可以在两个文件夹中有 10-100 个文件进行比较。关键是如何使比较工具查找匹配的文件名，而不管目录级别如何。

我希望我的问题在这里有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:21:23.220

[Beyond Compare](http://www.scootersoftware.com/) 3 在**视图**菜单中有一个选项（**忽略文件夹结构**），它完全符合您的要求。它遍历每个文件的所有子文件夹，并在单个级别中显示它们，文件根据名称对齐。如果碰巧有多个同名文件，它将优先对齐具有相同目录结构的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T05:25:23.743

缺少编写脚本，这是实现这一目标的快速而肮脏的方法：

1.  创建两个临时目录 -`FlatA`和`FlatB`.
2.  将两个原始目录压缩`DirA`到`DirB`单独的 zip 文件中 -`ArchiveA.zip`和`ArchiveB.zip`
3.  将两个档案分别解压缩到`FlatA`和`FlatB`中，**不带路径**。
4.  使用 BeyondCompare 比较“扁平化”文件夹`FlatA`和`FlatB`

# android - Android编程中选择View还是Activity？

> ID：14372626
> 
> 赞同：0
> 
> 时间：2013-01-17T05:19:35.570
> 
> 标签：android, layout, view, android-activity

我正在创建一个类似 Powerpoint 的界面。

一个 Powerpoint 文档有几个演示页面。我想在左侧显示要编辑的页面和其他页面。

我应该将每个页面创建为活动还是视图？

如果您能消除我的困惑，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:25:14.447

将页面列表显示在左侧的活动片段中并将当前选择显示为右侧的活动片段是最简单的。每当用户选择要显示的不同页面时，您都可以使用不同的内容重新加载正确的 Fragment。您不需要为每个页面创建一个单独的 Activity Fragment ——这将是很多开销，没有充分的理由。根据“页面”的数据类型，右侧的 Fragment 可能包含单个自定义视图，或者可能需要复杂的视图层次结构。

有关教程介绍，请参阅[有关 Fragments 的指南主题。](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:22:04.790

每个页面都是一个活动。View 类是屏幕上的一个对象——一个编辑框、一个复选框、一个图像等，或者屏幕上的一组元素。Activity 是操作数据和视图对象以提供某些功能的代码，它是您的工作流程。如果您从 MVC 模式的角度考虑，视图就是 MVC 中的视图。活动是控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:30:33.277

我的建议是一起使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)和[Fragment](http://developer.android.com/reference/android/support/v4/app/Fragment.html)。

# cryptography - 当我们确实有公钥签名时，为什么我需要 HMAC？

> ID：14372628
> 
> 赞同：5
> 
> 时间：2013-01-17T05:19:45.570
> 
> 标签：cryptography, public-key-encryption, hmac

*序言：我对 HMAC 很陌生，所以如果问题有点愚蠢，请原谅我。*

据我了解，HMAC 用于确保消息未被篡改。所以基本上，它作为一个哈希码。但是，由于散列算法是已知的，攻击者可以很容易地为被篡改的消息版本计算出新的散列码。

这就是 HMAC 试图解决的问题：它们提供的散列不仅基于要散列的消息，还基于加密密钥。这样就不可能在不知道密钥的情况下计算消息的有效值。

到目前为止这是正确的吗？

我现在的问题是：如果我们可以使用公钥签名实现相同的目标，我们需要 HMAC 做什么？IIRC 签名的工作方式完全相同：计算哈希并对其进行签名以确保没有人篡改消息或哈希。

那么 HMAC 的意义何在？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T05:23:11.140

HMAC 的大小更小，计算和验证所需的 CPU 比任何已知的具有同等安全级别的公钥操作要少得多。

# php - Zend 中的命名空间？

> ID：14372630
> 
> 赞同：-2
> 
> 时间：2013-01-17T05:19:49.970
> 
> 标签：php, zend-framework

我是zend的初学者。我想了解命名空间。

*   这段代码是什么意思？

    $a=new Zend_Session_Namespace(Zend_Registry::get('session_variable'));

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:46:43.193

实际上，您可能需要先在 google 上搜索，然后再将有关`Zend_Session_Namespace`. 没有。谷歌上可用的文章。但是这里仍然是一些关于 Zend_Session_Namespace 的基本指导。

`Zend_Session`Zend 框架使用该组件提供高级会话处理。使用这个组件，您不再需要访问 PHP 的`$_SESSION`全局变量。

`Zend_Session`使用命名空间来存储您的会话数据。也就是说，当您要读取或写入会话数据时，您必须首先指定一个命名空间。这使您可以轻松存储不同的会话数据，而无需过多担心会话中存储的其他值。

例子：

```
<?php
    require_once('Zend/Session.php');
    $session = new Zend_Session_Namespace('identity');

    //You can used it like this:

    $username= $session->username;
    $userid= $userid;
?> 
```

[从 zend 框架的文档中](http://framework.zend.com/manual/1.12/en/zend.session.basic_usage.html)阅读Zend Session Namespace 以获取更多详细信息

`$a=new Zend_Session_Namespace(Zend_Registry::get('session_variable'));`

上面的代码意味着：您在某处使用 zend_registry 的 set 方法（可能在引导程序中）在 zend 注册表中设置会话，并且您正在使用`zend_registry's`get 方法访问它。

如果您是 Zend Framework 的新手，我建议您阅读以下教程。

[http://www.phpeveryday.com/articles/Zend-Framework-Basic-Tutorial-P840.html](http://www.phpeveryday.com/articles/Zend-Framework-Basic-Tutorial-P840.html)

[http://framework.zend.com/manual/1.12/en/reference.html](http://framework.zend.com/manual/1.12/en/reference.html)

希望它会帮助你。

# java - Android绘图保存到数据库

> ID：14372631
> 
> 赞同：0
> 
> 时间：2013-01-17T05:20:03.680
> 
> 标签：java, android, android-canvas, paint, android-framelayout

我的应用程序有签名板。我使用 DrawView 和 FrameLayout 来显示它。我如何将签名保存在数据库中。下面是我的代码。非常感谢任何建议或帮助。

**摘要.java**

```
FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
DrawView drawView = new DrawView(this);
drawView.requestFocus();
preview.addView(drawView); 
```

**绘图视图.java**

```
public class DrawView extends View {

    private static final float STROKE_WIDTH = 5f;

    /** Need to track this so the dirty region can accommodate the stroke. **/
    private static final float HALF_STROKE_WIDTH = STROKE_WIDTH / 2;

    private Paint paint = new Paint();
    private Path path = new Path();

    /** Optimizes painting by invalidating the smallest possible area. */
    private float lastTouchX;
    private float lastTouchY;
    private final RectF dirtyRect = new RectF();

    public DrawView(Context context) {
        super(context);

        paint.setAntiAlias(true);
        paint.setColor(Color.WHITE);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(STROKE_WIDTH);
    }

    /** Erases the signature. */
    public void clear() {
        path.reset();

        // Repaints the entire view.
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawPath(path, paint);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            path.moveTo(eventX, eventY);
            lastTouchX = eventX;
            lastTouchY = eventY;
            // There is no end point yet, so don't waste cycles invalidating.
            return true;

        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_UP:
            // Start tracking the dirty region.
            resetDirtyRect(eventX, eventY);

            // When the hardware tracks events faster than they are delivered,
            // the
            // event will contain a history of those skipped points.
            int historySize = event.getHistorySize();
            // Logger.debug("historySize : " + historySize);
            for (int i = 0; i < historySize; i++) {
                float historicalX = event.getHistoricalX(i);
                float historicalY = event.getHistoricalY(i);
                expandDirtyRect(historicalX, historicalY);
                path.lineTo(historicalX, historicalY);
            }

            // After replaying history, connect the line to the touch point.
            // Logger.debug("eventX " + eventX);
            // Logger.debug("eventY " + eventX);
            //
            // Logger.debug("lastTouchX " + lastTouchX);
            // Logger.debug("lastTouchY " + lastTouchY);
            //
            // if (eventX == lastTouchX && eventY == lastTouchY) {
            //
            // path.addCircle(eventX, eventY, 20, Path.Direction.CW);
            //
            // }

            path.lineTo(eventX, eventY);

            break;

        default:
            // Logger.debug("Ignored touch event: " + event.toString());
            return false;
        }

        // Include half the stroke width to avoid clipping.
        invalidate((int) (dirtyRect.left - HALF_STROKE_WIDTH),
                (int) (dirtyRect.top - HALF_STROKE_WIDTH),
                (int) (dirtyRect.right + HALF_STROKE_WIDTH),
                (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

        lastTouchX = eventX;
        lastTouchY = eventY;

        return true;
    }

    /**
     * Called when replaying history to ensure the dirty region includes all
     * points.
     */
    private void expandDirtyRect(float historicalX, float historicalY) {
        if (historicalX < dirtyRect.left) {
            dirtyRect.left = historicalX;
        } else if (historicalX > dirtyRect.right) {
            dirtyRect.right = historicalX;
        }
        if (historicalY < dirtyRect.top) {
            dirtyRect.top = historicalY;
        } else if (historicalY > dirtyRect.bottom) {
            dirtyRect.bottom = historicalY;
        }
    }

    /** Resets the dirty region when the motion event occurs. */
    private void resetDirtyRect(float eventX, float eventY) {

        // The lastTouchX and lastTouchY were set when the ACTION_DOWN
        // motion event occurred.
        dirtyRect.left = Math.min(lastTouchX, eventX);
        dirtyRect.right = Math.max(lastTouchX, eventX);
        dirtyRect.top = Math.min(lastTouchY, eventY);
        dirtyRect.bottom = Math.max(lastTouchY, eventY);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:46:41.507

您可以像这样获取签名图像数据：

```
// in Activity code, maybe on a button click or onSaveInstanceState
// get a reference to the view
View drawView = getMyDrawViewFromSomewhere();

// get signature as a bitmap
drawView.buildDrawingCache();
Bitmap signature = drawView.getDrawingCache();

// convert to byte[]
ByteArrayOutputStream stream = new ByteArrayOutputStream();
signature.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

然后将其保存到数据库中，如下所示：

```
// get your database
SQLiteDatabase db = getMySQLiteOpenHelperFromSomewhere().getWritableDatabase();
ContentValues values = new ContentValues();
// The column names here will depend on your schema, of course.
// This would work with:
// CREATE TABLE `signature_table` (`username` VARCHAR, `signature_image` BLOB);
values.put("username", getTheUserName());
values.put("signature_image", byteArray);
db.insert("signature_table", null, values); 
```

不要忘记清理：

```
signature.recycle();
drawView.destroyDrawingCache(); 
```

有关数据库的更多基础知识，如果您还没有设置：http: [//developer.android.com/training/basics/data-storage/databases.html](http://developer.android.com/training/basics/data-storage/databases.html)

# java - keyStore.load(null,null) 挂起

> ID：14372632
> 
> 赞同：3
> 
> 时间：2013-01-17T00:21:35.307
> 
> 标签：java, smartcard

我正在尝试`keystore`从`smartCard`. 我有一个有效`smartcard`的自签名证书。

```
KeyStore keyStore = KeyStore.getInstance("Windows-MY")
keyStore.load(null,null); 
```

它挂断了`KeyStore.loadKeysorCertificateChains(String,Collection<KeyEntry>)`，没有任何回应。我想知道问题可能是什么。

我应该将根证书添加到`CERT`密钥中还是我错过了其他东西？

# c - 哪个工具可以提取这种评论？

> ID：14372635
> 
> 赞同：3
> 
> 时间：2013-01-17T05:20:21.443
> 
> 标签：c, comments

您好我最近发现代码中有一些特殊的注释，但它不是 doxygen 风格的，谁能告诉我什么工具可以提取这种注释？

```
/*
 @doc INTERNAL
 @func  ULONG | SerialDispatchThread | Main serial event dispatch thread code.
 *  This is the reading and dispatching thread. It gets the
 *  event associated with the logical interrupt dwIntID and calls
 *  hardware specific routines to determine whether it's a receive event
 *  or a transmit event. If it's a transmit event, it calls the HW tx handler.
 *  If it's a receive event, it calls for the number of characters and calls
 *  atomic GetByte() to extract characters and put them into the drivers
 *  buffer represented by pSerialHead->pTargetBuffer, managing waiting
 *  for events and checking to see if those signals correspond to reading.
 *  It relies on NK masking the interrupts while it does it's thing, calling
 *  InterruptDone() to unmask them for each of the above cases.
 *
 *  Not exported to users.
 *
 @rdesc This thread technically returns a status, but in practice, doesn't return
 *   while the device is open.
 */ 
```

[我在这里](http://www.programmersheaven.com/download/780/download.aspx)找到了下载链接，如果有人需要这个:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T05:44:56.090

我相信它属于[AutoDuck](http://helpmaster.info/hlp-developmentaids-autoduck.htm)。

检查[该工具的手册](http://www.literateprogramming.com/autoduck.pdf)（我找不到更多信息......）

# mysql - 使用命令行客户端跨网络查询 MySQL 数据库？

> ID：14372637
> 
> 赞同：0
> 
> 时间：2013-01-17T05:20:32.043
> 
> 标签：mysql, jdbc, database-connection

我能够使用 JDBC 成功连接到我的网络上的数据库：

```
DriverManager.getConnection("jdbc:mysql://ip-address/dbname","uname","password"); 
```

如何通过 MySQL 命令行客户端连接和查询同一个数据库。

# d3.js - 如何重绘我的节点？D3.js

> ID：14372643
> 
> 赞同：0
> 
> 时间：2013-01-17T05:21:07.647
> 
> 标签：d3.js

我有图表。该图具有节点。节点上附加了 svg 圆圈：

```
node.append("circle")
            .attr("class", "node")
            .attr("cx", function (d) { return 0; })
            .attr("cy", function (d) { return 0; })
            .attr("r", function (d) { return getNodeSize(d); })
            .style("fill", function (d) { return getNodeColor(d); })
            .style("stroke", function (d) { return getNodeStrokeColor(d); })
            .style("stroke-width", function (d) { return getNodeStrokeWidth(d); }); 
```

有时我需要用不同的颜色重新粉刷它们：

```
.style("fill", function (d) { return getNodeColor(d); }) 
```

我怎么做？我不想重绘整个图表..

谢谢！

PS相关问题：如何仅选择某些节点并仅重绘它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:30:21.413

最好给“圆”一个综合的id，想操作的时候可以随时选择。
例如：

```
node.append("circle")
        .attr("id", "circle-1")
        .attr("class", "node")
        .attr("cx", function (d) { return 0; })
        .attr("cy", function (d) { return 0; })
        ... 
```

并通过以下代码选择它：

```
var circles = d3.select("#circle-1"); 
```

获得圆圈后，您可以更改它们的样式。

还有一种方法，如果你有父节点的id或者节点实例，你可以通过下面的代码选择它的后代圈：

```
var circles = d3.select("node-id").select("circle"); 
```

或者

```
var circles = node.select("circle"); 
```

# sed - 为目录中的所有文件转换 dos2unix 行尾

> ID：14372645
> 
> 赞同：26
> 
> 时间：2013-01-17T05:21:34.283
> 
> 标签：sed, awk

目前，我正在使用以下命令来更改 dos2unix 行尾，但这是针对 file-y 文件...

```
sed -i 's/\r//' filename 
```

有没有办法为目录中的所有文件运行此命令？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-10-09T22:39:18.287

递归运行整个目录的最简单方法`dos2unix`是让`find`命令根据您的条件为它找到的每个文件执行它。

例如，要查找当前目录及其所有子目录中的所有文件（不包括目录名称），`dos2unix`并对每个文件进行默认转换：

```
find . -type f -exec dos2unix -k -s -o {} ';' 
```

这将输出每个文件名，但不一定要更改每个文件名。这工作如下：

`find .`：在此目录中查找任何内容，包括其子目录，以及这些子目录中的任何内容（递归）
`-type f`：仅返回“常规文件”名称。从结果中排除文件夹名称。
`-exec`：对每个结果执行以下命令。超出此点的所有内容都应视为该命令的一部分，直到`;`找到该字符。
`dos2unix`：`dos2unix`将使用以下选项执行...
`-k`：保持输出文件的日期戳与输入文件相同
`-s`：跳过二进制文件（图像、档案等）。默认情况下包含此选项，但无论如何我都会使用它，以防某些系统上的默认设置不同（例如 OS X v. Debian v. CentOS v. Ubuntu v. ...）。
`-o`：将更改直接写入文件，而不是使用新格式的数据创建新文件。
`{}`：这告诉`find`插入它找到的文件名作为`dos2unix`调用的参数。
`';'`: 告诉`find`参数 for`dos2unix`已经结束。超出此点的任何内容将再次被视为 的参数`find`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-30T07:10:06.343

简单的：

```
sed -i 's/\r//' filename1 filename2 … filenameN 
```

或者，如果您正在谈论一个目录的内容

```
sed -i 's/\r//' * 
```

对我来说工作得很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T18:29:09.120

```
dos2unix *.txt 
```

可以很好地转换目录中的所有 *.txt 文件...不需要“查找”命令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T09:21:41.150

另外一个选项：`find your_dir type f -exec sed -i 's/\r//' {} \;`

你为什么不使用 dos2unix 命令？如果您只执行上面的 sed，则可能存在具有不正确 EOF 的文件（取决于其来源）（如果您运行 cat 并且随后的提示将连接到文件输出，则可以看到它）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T06:51:56.657

```
for i in `find . -type f \( -name "*.c" -o -name "*.h" \)`; do    sed -i 's/\r//' $i ; done 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-09T07:30:36.563

只需添加另一个参考...

在 Ubuntu 14.04 上，该`man dos2unix`页面提供了这个示例，专门用于递归转换：

`find . -name *.txt | xargs dos2unix`

从手册页引用，这将

> ...转换当前目录下目录树中的所有.txt文件...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-25T17:56:22.560

```
find $(pwd) -type f | xargs -I xxx sed -i 's/\r//g' xxx 
```

# iphone - 如何从 iPhone 上安装的 facebook 应用程序获取数据？

> ID：14372646
> 
> 赞同：0
> 
> 时间：2013-01-17T05:21:48.287
> 
> 标签：iphone, facebook, sharekit, fb-graph

我想在 iPhone 上从已安装的 Facebook 应用程序中获取用户信息等数据（我不需要在应用程序上再次登录屏幕，就像在 FBGraph 或 ShareKit 中那样）。我应该能够直接从已安装的 Facebook 应用程序（如果已安装）获取数据。我该怎么做？

它对我来说非常紧迫。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:25:53.980

由于隐私问题，您无法从已安装的应用程序中获取数据。对**Sandbox**进行谷歌搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:39:12.293

您可以使用以下代码行获取用户信息。[请在此处](http://developers.facebook.com/docs/reference/ios/3.1/class/FBRequest)查看文档。

```
if (FBSession.activeSession.isOpen) {
    FBRequest *me = [FBRequest requestForMe];
    [me startWithCompletionHandler: ^(FBRequestConnection *connection,
                                      NSDictionary<FBGraphUser> *my,
                                      NSError *error) {
        NSLog(@"Firstname - %@", my.first_name);
    }];
} 
```

# jquery - jQuery DataTables 隐藏列而不将其从 DOM 中删除

> ID：14372655
> 
> 赞同：24
> 
> 时间：2013-01-17T05:22:24.920
> 
> 标签：jquery, css, dom, datatables

我需要隐藏一列以防止出现在 jquery 数据表中。当我使用 bVisible 属性隐藏列时，它会从 DOM 中消失。

我想将列的表格单元格的显示属性设置为无，以便值不会出现在视图中，但它们仍应存在于 DOM 中，因为我隐藏的列唯一地标识了行，我需要知道唯一的行选择的 ID。如何实现这一点。

我正在使用服务器端分页使用 aaData 属性填充表。

看过这个问题，但这些选项将其从 DOM 中删除。 [jquery数据表隐藏列](https://stackoverflow.com/questions/5654633/jquery-datatables-hide-column)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-17T07:03:25.163

您应该`className`与[columnDefs](https://datatables.net/reference/option/columnDefs)或[columns](https://datatables.net/reference/option/columns)一起使用，

像这样在你的css中定义`hide_column`类

```
.hide_column {
    display : none;
} 
```

您有两种分配`.hide_column`该类的方法：

使用`columnDefs`（将自定义类分配给第一列）：

```
$('#example').DataTable( {
  columnDefs: [
    { targets: [ 0 ],
      className: "hide_column"
    }
  ]
} ); 
```

或者`columns`

```
$('#example').DataTable( {
  "columns": [
    { className: "hide_column" },
    null,
    null,
    null,
    null
  ]
} ); 
```

[从这里](https://datatables.net/reference/option/columns.className)获取的代码片段

* * *

*旧答案*

尝试添加

```
"sClass": "hide_column" 
```

那应该使该列隐藏...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-30T22:48:02.707

以丹尼尔的回答为基础：

CSS：

```
th.hide_me, td.hide_me {display: none;} 
```

在数据表初始化中：

```
"aoColumnDefs": [ { "sClass": "hide_me", "aTargets": [ 0 ] } ] // first column in visible columns array gets class "hide_me" 
```

记得将你的隐藏类添加到你的 thead 单元格中：

```
<thead>
    <th class="hide_me">First Column</th>
    <th>Second Column</th>
    <th>Third Column</th>
</thead> 
```

如果您正在使用服务器端处理并且想要从 ajax 源传入数据而不在数据表中可见，这也是一个有用的策略。您仍然可以在前端检索列的值，而无需显示它。有助于通过隐藏数据值等进行过滤。

例子：

```
// In datatables init file
<script>
    var filteredValues = [];
    $('td.your_filtering_class').each(function(){
        var someVariable = $(this).find('.hide_me').html();
        filteredValues.push(someVariable);
    }
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-31T13:24:23.140

如果要隐藏多个列：

```
$('#example').dataTable({
  "columnDefs": [{ 
    "targets": [0,1,3], //Comma separated values
    "visible": false,
    "searchable": false }
  ]
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-21T12:12:03.800

这是我对你的贡献。

不确定代码是否正确，但它的工作。

如果你像我一样有不止一个设置栏。

```
$('#example').dataTable( {
  "columnDefs": [ {
        "targets"  : 'no-sort',
        "orderable": false,
        "order": [],
    }],
    "columnDefs": [ {
        "targets"  : 'hide_column',
        "orderable": false,
        "order": [],
        "visible": false
    }]
} ); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-01-17T05:24:15.273

你可以使用方法`hide`。

```
$(element).hide(); 
```

要显示元素，请使用方法`show`：

```
$(element).show(); 
```

要获取所需的列，可以使用`n-th child`jquery 中的选择器。

# java - Java Web 开发说明

> ID：14372656
> 
> 赞同：0
> 
> 时间：2013-01-17T05:22:26.750
> 
> 标签：java, jakarta-ee

我是 Java Web 开发的新手。

目前我正在学习诸如 Servlet、Jsp 和 Java 框架（如 Spring 等）等技术。

我想知道，作为最终用户所说的没有小程序的 java 网站，该网站的用户是否需要在他/她的机器上安装 java？

因为似乎在 Servlet 和 Jsp 的情况下，所有执行都是在服务器端完成的，只有结果以 html 格式发送回用户。

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:38:23.410

正如您所怀疑的，Java 仅在服务器上运行。它是接受 HTTP 请求并对其进行处理，发出 HTTP 响应的语言。与大多数良好的编码实践一样，这意味着服务器程序返回的响应本质上是文本。这里的含义是您可以使用任何类型的编程语言或一组语言编写服务器，而浏览器不需要知道什么或为什么。

因此，浏览器与您在服务器上使用的语言*无关。*

Java Applet 是不同的；它们是由客户端下载并在本地 JVM 中运行的已编译 Java 代码。为此，客户端需要安装 Java。小程序可能非常小——甚至是不可见的——因此恶意网站可以在毫无戒心的浏览器上使用它们来做一些不靠谱的事情。出于这个原因，人们担心 Java 安全漏洞会允许 applet 做更多的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:24:18.460

你是对的。java正在服务器上执行。如果应用程序服务于小程序，用户只需要安装 java，正如您所说，这里不是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:24:49.163

无需在最终用户（客户端）安装 java。因为 HTML renderkit 返回 html 格式。

但是如果他或她需要开发，java 是需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:33:42.200

Http 是一种无状态和基于文本的协议。这意味着 Http 协议无法记住其先前的状态，并且无法保持任何执行状态。它是基于文本的协议，因此通过该协议交换信息或数据的媒介是文本。该协议的主要问题是它一次只能处理一个请求并以相同的方式向用户发送响应。但在当前，用户需求发生了巨大变化。所以 Http 不能一次处理这么多的请求，也不能发送多个响应。**所以这里 Java EE 和 Web 服务器开始生效**

Web 服务器提供了一个环境，Web 应用程序（servlet、jsp、Java EE）可以在其中运行、执行并向客户端发送响应。Web 服务器执行以下任务：

**1：**处理一个 Http-requests 并以同样的方式发送对该请求的响应。

**2：**由于Http协议只理解文本，所以Web服务器将请求解析为文本，然后对其进行处理，然后将响应再次转换为文本并将其发送到客户端服务器。

**3：**提供一个环境，让Web应用程序、请求-响应和其他服务可以完美、动态、安全地运行。

**4：**最后但并非最不重要的一点是，这些 Web 服务器是用纯 Java 设计和开发的，并以线程模型运行，因此您相信您的应用程序是安全的。

而applet的运行方式不同，客户端至少需要JRE来提供一个运行applet的环境。小程序不同于网络技术。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T05:33:47.477

你好，如果你想开发任何java项目，你需要安装jdk，jdk本身包含jre（java运行环境），，

您可以选择以下链接

[http://www.journaldev.com/546/difference-between-jdk-jre-and-jvm-in-java](http://www.journaldev.com/546/difference-between-jdk-jre-and-jvm-in-java)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T05:38:09.127

您不需要您的客户端系统安装 Java。

有关在 Web 浏览器中禁用 java 的消息是由于当前版本中的一些安全漏洞（甲骨文表示他们将在 10 月版本中修复）。但是您不必担心它，因为您的网站中没有小程序。如果您有applet之类的插件，客户端将需要安装java jre

# drools - Drool 无法正确排序数字

> ID：14372663
> 
> 赞同：3
> 
> 时间：2013-01-17T05:22:58.573
> 
> 标签：drools, rule-engine

我是 Drools 的新手，正在尝试让示例程序正常工作。这个示例在 drools 文档[http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html_single/index.html#d0e9542](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html_single/index.html#d0e9542)中给出。这个流口水规则预计会对整数进行排序。我只是更改了示例中给出的数字，但它们没有按预期排序。尝试使用 drools 版本 5.5.0、5.5.1 和 master 6.0.0，但得到相同的错误结果。

## 以下是主要代码：

```
    包 com.sample；

    公共类示例2 {
      公共静态 void main(String[] args) 抛出异常 {
        Number[] numbers = new Number[] { wrap(5), wrap(6), wrap(4), wrap(1), wrap(2) };
        new RuleRunner().runRules(new String[] { "Example3.drl" }, numbers);
      }

      私人静态整数换行（int i）{
        返回新整数（i）；
      }
    }

```

RuleRunner 类与示例中给出的相同，我认为我不应该在这里给出它，因为它会使问题变得混乱。它只是创建知识库、有状态会话，插入上面“数字”数组中给出的事实，然后在会话上调用 fireAllRules 方法。

## 规则文件（Example3.drl）是：

rule "Rule 04"
    dialect "mvel"
  when
    $number : Number()
    not Number(intValue < $number.intValue)
  then
    System.out.println("Number found with value: " + $number.intValue());
    收回（$数字）；
结尾

## 我得到的输出如下：

```
加载文件：Example3.drl
插入事实：5
插入事实：6
插入事实：4
插入事实：1
插入事实：2
找到值的数字：1
找到值的数字：4
找到值的数字：2
找到值的数字：5
找到值的数字：6

```

## 不是正确的预期升序排序。

我可能做错了什么？我无法想象 drools 规则引擎会在这个基本级别上被打破。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:03:30.307

这似乎是从 5.5.0 开始引入的错误，并且仍然存在。
此排序代码适用于 5.4.0。

## 解决方法：

而不是：
  “not Number(intValue < $number.intValue)”
如果你使用：
  “not Number(intValue() < $number.intValue)”
那么它可以工作。

## 

不告诉它是函数的非 getter 方法似乎会产生问题。

在评估阶段降低对产品的信心的令人衰弱的问题。

# php - 有什么方法可以强制用户使用 Facebook OAuth 对话框登录？

> ID：14372666
> 
> 赞同：1
> 
> 时间：2013-01-17T05:23:11.537
> 
> 标签：php, facebook

我正在使用`auth_type`OAuth 对话框中的参数来强制用户按照[此处的文档](http://developers.facebook.com/docs/howtos/login/server-side-re-auth/)重新登录。

如果用户没有登录 Facebook，他必须输入他的用户名和密码，这很好。

但是，如果用户登录 Facebook，它所做的只是显示与用户名的对话并要求他们重新输入密码。

这对我们来说不是很好，因为我们的应用程序具有连接到多个 Facebook 帐户的功能。为了在我们的伤口上撒盐（可以这么说：P），OAuth 对话框甚至没有“不是你吗？” 链接以允许他们切换用户。

我们的应用程序是用 PHP 构建的，并使用[服务器端登录流程](http://developers.facebook.com/docs/howtos/login/server-side-login/)。

**无论如何强制用户必须重新输入他的密码和电子邮件地址？**我正在寻找像 Twitter 的[force_login这样的东西。](https://dev.twitter.com/docs/api/1/get/oauth/authorize)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:10:14.563

如果您想强制用户每次登录，请使用 may a`FB.Login`而不是。`OAuth`

文档：[FB.Login](https://developers.facebook.com/docs/reference/javascript/FB.login/)

# java - Java中的多线程和同步

> ID：14372668
> 
> 赞同：0
> 
> 时间：2013-01-17T05:23:13.183
> 
> 标签：java, multithreading

我正在开发一个多线程程序，其中每个线程计算两个数字的 GCD，将数字和 GCD 存储到 a中，并在所有线程完成后`TreeMap`打印出。`TreeMap`我应该使用什么样的方法来确保只有一个线程同时存储数据，以及如何使用最后一个线程在`TreeMap`准备打印时打印？

```
for (int i = 0; i < myList.size(); ++i) {
    for (int j = i + 1; j < myList.size(); ++j) {
        modulus1 = myList.get(i);
        modulus2 = myList.get(j);
        pool.execute(new ThreadProcessRunnable(modulus1, modulus2, myMap));
    }
}

public void run() {
    ThreadProcess process = null;
    try {
        // Only one thread should execute the following code
        for (Map.Entry<BigInteger, ArrayList<BigInteger>> entry : myMap.entrySet()) {
            System.out.println("key ->" + entry.getKey() + ", value->" + entry.getValue());
        }
    } catch (Exception e) {
        System.err.println("Exception ERROR");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:29:21.807

您必须`syncronize(myMap) {...}`在需要保证单线程访问地图的地方使用块。

至于由最后一个线程打印结果，您可以使用布尔标志作为完整性信号并每次检查它。不要忘记让它`volatile`让每个线程看到它的值变化。

**UPD：** Brian Goetz “Java Concurrency In Practice”是强烈推荐的阅读材料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:25:19.640

```
 //Only one thread should executes the following code
synchronize{            
for (Map.Entry<BigInteger, ArrayList<BigInteger>> entry : myMap.entrySet()) {
                System.out.println("key ->" + entry.getKey() + ", value->" + entry.getValue());
            }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:54:45.187

您可以使用[Collections.synchronizedMap](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)使其成为线程安全的。并使用[thread.join](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)确保仅在所有线程都死机时才完成打印。

**编辑：**在主线程中进行打印。就在打印之前，调用`join`所有线程。

# android - TextView 在同一个 ButtonClick 上更改为 ImageView - 未完成

> ID：14372674
> 
> 赞同：1
> 
> 时间：2013-01-17T05:24:25.757
> 
> 标签：android, android-layout, android-intent, android-button

我有一个按钮。在 onClick() 中，它将同时显示 TextView 和 ImageView，具有相同的结果。但是我遇到了一个问题，图像没有完全加载。谁能告诉我为什么会这样？提前致谢！

按钮 onClick 的代码

```
 b.setOnClickListener(new OnClickListener() {

        @Override     
        public void onClick(View view) {

            switch(count){
            case 0 :
                    df = Typeface.createFromAsset(getAssets(),                 
                            "fonts/IDAutomationHC39M_FREE.otf"); 
                    ConvertToBitmap();
                 break;
            case 1:
                    df = Typeface.createFromAsset(getAssets(),                 
                            "fonts/code128.ttf");
                    ConvertToBitmap();
                    break;
            case 2: 
                    df = Typeface.createFromAsset(getAssets(),                 
                        "fonts/Molot.otf");
                    ConvertToBitmap();
                break;
            case 3:
                    df = Typeface.createFromAsset(getAssets(),                 
                        "fonts/Days.otf");
                    ConvertToBitmap();
                break;
            case 4:
                    df = Typeface.createFromAsset(getAssets(),                 
                        "fonts/Paranoid.otf");
                    ConvertToBitmap();
                break;

            }
        }

    }); 
```

TextView 和 ImageView 的代码

```
public void ConvertToBitmap(){
        if (et.getText().toString().equals("")) {

            //Clear textView
            tv.setText("");          
            et.setText("");
            tv.buildDrawingCache();
            iv.setImageBitmap(tv.getDrawingCache());

        }
        else { 
            TextView tv1 = (TextView) findViewById(R.id.textView1);
            tv1.setTypeface(df);

            String editTextValue = et.getText().toString();            
            tv.setText(editTextValue);

            tv.buildDrawingCache();
            bmap = tv.getDrawingCache();
            iv.setImageBitmap(bmap);

        }
    } 
```

**已编辑！** 布局.xml

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gameScreen"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="1"

android:orientation="vertical" xmlns:app="http://schemas.android.com/tools">

<com.example.textdrawn3.Text
    android:id="@+id/textDrawn"
    android:layout_width="match_parent"
    android:layout_height="46dp"
    android:layout_weight="3.11" />

    <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.75"
    android:text="TextView" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.75"
        android:orientation="horizontal"
        android:src="@drawable/ic_launcher" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:background="#0000cd"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btnText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text"
        android:textColor="#ffffff"
        android:textSize="25sp"
        android:typeface="serif" />

    <Button
        android:id="@+id/btnStop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Stop"
        android:textColor="#ffffff"
        android:textSize="25sp"
        android:typeface="serif" />

    <Button
        android:id="@+id/btnOK"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="OK"
        android:textColor="#ffffff"
        android:textSize="25sp"
        android:typeface="serif" />

    <Button
        android:id="@+id/btnImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Image"
        android:textColor="#ffffff"
        android:textSize="25sp"
        android:typeface="serif" />

    <Spinner
        android:id="@+id/fonts_spinner"
        android:layout_width="135dp"
        android:layout_height="wrap_content"
        android:textAlignment="center"
        app:context=".TextDrawn3" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:freezesText="false"
        android:hint="text"
        android:maxLength="10"
        android:maxLines="1"
        android:textAlignment="center"
        android:textColor="#e6e6fa"
        android:textSize="25sp"
        android:typeface="serif"
        android:visibility="visible" >

        <requestFocus />
    </EditText>

</LinearLayout> 
```

# jsf-2 - 图形图像未显示在 Datagrid PrimeFaces 中

> ID：14372678
> 
> 赞同：0
> 
> 时间：2013-01-17T05:24:53.077
> 
> 标签：jsf-2, primefaces

我在数据网格列中显示图像时遇到问题。当 Datagrid 加载它正确显示图像但每当我点击第二页或刷新第一页时，图像就消失了。我在控制台中注意到，单击第二页或刷新页面使参数值为空。这就是为什么图像没有显示。我正在使用会话范围。下面是我的代码：

```
 public StreamedContent getStreamedImageById() {
FacesContext context = FacesContext.getCurrentInstance();

if (context.getRenderResponse()) {
    // So, we're rendering the view. Return a stub StreamedContent so that it will generate right URL.

    System.out.println("check");
    return new DefaultStreamedContent();
}
else {
    // So, browser is requesting the image. Get ID value from actual request param.
    String firstName = context.getExternalContext().getRequestParameterMap().get("firstName");
    System.out.println("Name:"+firstName);
    System.out.println("Image::"+images.get(firstName));

    return images.get(firstName);

} 
```

在搜索方法中，我只取散列图中的所有图像。

```
 while(itr.hasNext()){

                com.sysvana.request.UserBean us=itr.next();

            images.put(us.getFirstName(), stringToStreamedContent(us.getJpegPhoto()));
            } 
```

这是我的 xhtml::

```
 <p:graphicImage value="#{userManagementActionBean.streamedImageById}" height="40" width="50" style="align:center"  >

                <f:param id="firstName" name="firstName" value="#{user.firstName}" />
              </p:graphicImage> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:12:43.050

这，

```
return images.get(firstName); 
```

是不正确的。您应该在此处**创建**流式内容，而不是返回之前在之前的 HTTP 请求中创建的内容。重点是您不应该在之前的 HTTP 请求中创建它，而应直接在`getStreamedImageById()`调用该方法的同一个 HTTP 请求中创建它。

如下修复它（假设`userBean.getJpegPhoto()`返回`byte[]`）

```
UserBean userBean = userService.findByFirstName(firstName);
return new DefaultStreamedContent(new ByteArrayInputStream(userBean.getJpegPhoto())); 
```

### 也可以看看：

*   [使用 p:graphicImage 和 StreamedContent 显示来自数据库的动态图像](https://stackoverflow.com/questions/8207325/display-image-from-database-with-pgraphicimage/12452144#12452144)
*   [如何在 ui:repeat 中将 <p:graphicImage> 与 DefaultStreamedContent 一起使用？](https://stackoverflow.com/questions/10944673/how-to-use-pgraphicimage-with-defaultstreamedcontent-in-an-uirepeat/10951201#10951201)

* * *

**与具体问题无关**，方法名称`stringToStreamedContent()`暗示了一个主要问题。图像绝对不能表示为`String`，而是表示为`byte[]`。将图像视为`String`时，由于字符编码问题导致信息丢失，您最终可能会出现损坏的图像。您应该从数据库中以`byte[]`或的形式获取图像`InputStream`。

# magento - 如何不在 Magento 中缓存欢迎消息

> ID：14372682
> 
> 赞同：0
> 
> 时间：2013-01-17T05:25:13.720
> 
> 标签：magento, module

我试图不让我的整页缓存模块缓存 Magento Cart 标头上的“欢迎消息”。我所尝试的一切都导致了彻底的失败。必须有办法。

我正在使用 Magento 持久购物车选项，我发现欢迎消息与此选项存在一些差异，模块开发人员可能没有考虑到这一点。真不知道。

这有点像“欢迎信息是它自己的模块，但在另一种方式它不是，它有点像标题页上的一行 php。

现在我的 fpc 模块在管理中有一个选项可以将模块排除在缓存之外，但是您必须为模块提供“名称”，例如 name="some_name"。欢迎信息与我能说的其他模块不同。这是标题中的php：

```
<p class="welcome-msg"><?php echo $this->getWelcome() ?> <?php echo $this->getAdditionalHtml() ?></p> 
```

括号中没有任何内容，所以我一直在尝试为这个欢迎信息命名。我不知道还能怎么做。

所以我在管理中创建了一个静态块，其中包含：

```
{{block type="core/template" name"header.welcome" as="welcome" template="page/html/welcome.phtml"}} 
```

然后我创建了一个名为 welcome.phtml 的 phtml 文件，其中包含以下内容：

```
<p class="welcome-msg"><?php echo $this->getWelcome() ?> <?php echo $this->getAdditionalHtml() ?></p> 
```

然后在标题中我添加了这个：

```
<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('welcome')->toHTML(); ?> 
```

这通常适用于任何事情。但这次不是。没有什么。因此，在块**page/html_header**下，我将其添加到 page.xml：

```
<block type="core/template" name="header.welcome" as="welcome"/> 
```

这是 mt 的最新尝试。有没有人对如何解决这个问题有任何想法？我喜欢动态的欢迎信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T07:56:15.633

欢迎消息只是标题块的一个功能。Lesti_Fpc 需要单独块中的欢迎消息。Magento 1.8 解决了这个问题，欢迎使用块的名称。在 Magento 1.7 中，核心有一个半解决方案......

这个问题在这里解决了：（来源） [https://gordonlesti.com/lestifpc-magento-1-7-and-the-welcome-message/](https://gordonlesti.com/lestifpc-magento-1-7-and-the-welcome-message/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T06:42:14.523

我想我已经在这个问题上取得了一些进展。但是我没有得到解决方案。我所做的是在 app/design/frontend/default/layout/page.xml 文件中创建了一个新块。
我已经添加了这个：

```
<block type="page/html_welcome" name="testwelcome" as="testwelcome"/> 
```

似乎有一个内置的核心功能称为“欢迎”。可以在 app/code/core/Mage/Page/Block/Html/Welcome.php 查看。这就是 page.xml 文件中的引用。

然后在 app/design/frontend/default/template/page.html 的 header.phtml 文件中，我调用了：

```
<?php echo $this->getChildHtml('testwelcome') ?> 
```

最后，我使用以下代码在 app/design/frontend/default/template 中创建了一个名为 testwelcome.phtml 的新模板文件：

```
<p class="welcome-msg"><?php echo $this->getWelcome() ?> <?php echo $this->getAdditionalHtml() ?></p> 
```

我可以显示欢迎消息，但我似乎无法让它呈现任何更改。

# google-app-engine - appspot.com 应用程序中的服务器错误

> ID：14372685
> 
> 赞同：2
> 
> 时间：2013-01-17T05:25:19.753
> 
> 标签：google-app-engine, deployment, python-2.7, google-calendar-api

在本地运行我的应用程序以`dev_appserver`从 Google 日历中查找事件列表，它工作正常。

当我通过 app-engine 部署（部署成功）并且当我运行文件时，它给了我以下错误

```
Error: Server Error
The server encountered an error and could not complete your request.

If the problem persists, please report your problem and mention this error message and the query that caused it. 
```

谷歌很多关于这个错误仍然无法找到相同的解决方案

我的`app.yaml`文件结构。

```
- url: /calendar
  script: webserverflow12.py 
```

当我运行这个`appspot.com/calendar`. 它给了我提到的错误。

知道要实时运行我的应用程序需要做哪些更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:58:15.000

我觉得您在部署到 appengine 服务器时没有更改您为 apppot.com 域注册的客户端 ID 和客户端密码。所以你得到这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:16:04.797

从您的 GAE 管理页面检查您的应用程序日志。希望你能在那里找到一些信息来帮助调试。

# c++ - C++ const char* 指针赋值

> ID：14372689
> 
> 赞同：1
> 
> 时间：2013-01-17T05:25:30.287
> 
> 标签：c++, boost

我一定在这里错过了一个明显的事实——有一段时间没有编写 C++ 编程了。为什么我不能在将 c 样式字符串分配给 const char* 变量后打印它？但是，如果我尝试直接打印而不分配它可以正常工作：

```
#include "boost/lexical_cast.hpp"

using namespace std;
using boost::lexical_cast;

int main (int argc, char** argv)
{
    int aa=500;
    cout << lexical_cast<string>(aa).c_str() << endl;   // prints the string "500" fine

    const char* bb = lexical_cast<string>(aa).c_str();
    cout << bb << endl;                                 // prints nothing

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T05:28:33.813

由返回的 C 字符串`c_str`仅在`std::string`从中获取它的存在时可用。一旦它`std::string`被破坏，C 字符串也消失了。（此时，尝试使用 C 字符串会产生未定义的行为。）

其他操作也可能使 C 字符串无效。一般来说，任何修改字符串的操作都会使返回的指针失效`c_str`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:28:36.010

`c_str`函数`string`在从`lexical_cast`. 由于您不保存它，因此该字符串在该表达式的末尾被销毁，因此访问指向`c_str`已销毁字符串的指针是未定义的行为。

# javascript - 暂时禁用javascript中的所有事件

> ID：14372690
> 
> 赞同：5
> 
> 时间：2013-01-17T05:25:30.537
> 
> 标签：javascript, jquery

你如何暂时禁用javascript中的所有事件？我们想让它们禁用，以便某些事件在我们单击某些内容后 700 毫秒后才会运行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T05:36:02.923

如果您尝试暂时禁用所有点击，那么在不更改页面或代码的任何其余部分的情况下，一种简单的方法是在整个页面上放置一个绝对定位的透明 div，拦截并停止所有点击的传播事件。然后，使用 setTimeout() 以您想要的任何时间间隔删除该透明 div。

将 blockDiv 放在您的页面 HTML 中，这样它就已经存在了。

在您的 HMTL 中：

```
<body>
    <div id="blockDiv"></div>
    ... other page HTML here
</body> 
```

然后，在页面中有这个 CSS：

```
#blockDiv {
    position: absolute;
    left: 0;
    right: 0;
    height: 100%;
    width: 100%;
    z-index: 999;
} 
```

而且，这个javacript：

```
$("#blockDiv").click(function(e) {
    // stop propagation and prevent default by returning false
    return false;
});

setTimeout(function() {
    $("#blockDiv").remove();
}, 700); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:27:54.050

使用 setTimeout

```
$('a').click(function( e ){

   e.preventDefault();

    setTimeout(function(){
        // DO SOMETHING AFTER 700ms
    },700);

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T05:28:47.597

`setTimeout`是你想要的。

> setTimeout() 方法在指定的毫秒数后调用函数或计算表达式。

它需要两个参数：
1）要调用的函数或代码，
2）执行代码/函数之前等待的毫秒数。

```
 setTimeout(function(){
    //do your stuff
 },700); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T06:06:03.153

看看这篇文章，这将展示如何懒惰地聆听快速触发的事件

```
$.fn.bindDelayEvent = function(eventName, delay, fnc){
        $this = $(this);

        var timer = undefined;
        var delayFnc = function(){
            clearTimeout(timer);
            var self = this;
            var args = arguments;
            timer = setTimeout(function(){
                fnc.apply(self, args);
            }, delay);
        }
        $this.bind(eventName, delayFnc);

    }

    $(window).bindDelayEvent("resize", 1000, function () {
        alert("click event fires after 1000ms")
    }); 
```

[如何懒惰地收听快速触发的事件，如窗口调整大小？](http://jqfaq.com/how-to-listen-lazily-to-rapidly-firing-events-like-window-resize/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-13T22:03:38.330

禁用页面上的所有事件非常容易。困难的部分是在需要时恢复它们。

```
document.body.innerHTML = document.body.innerHTML; 
```

这将通过用它的“原始”副本替换 DOM 来有效地删除绑定到 DOM 节点的所有事件。

大多数时候用户甚至不会注意到重绘。

至于在一段时间后恢复它们，您可以尝试在替换 innerHTML 之前保存一份 DOM：

```
oOldDom = document.cloneNode(1); 
```

并在以后恢复它。

# sharepoint-2007 - SharePoint 2007 获取修改的字段

> ID：14372694
> 
> 赞同：0
> 
> 时间：2013-01-17T05:26:11.690
> 
> 标签：sharepoint-2007

我想知道我们如何知道 SharePoint 列表中更新了哪些字段。我有一个附加到列表的 eventreciever，我可以知道使用 Eventreciever 对列表进行了哪些更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:53:36.427

我认为更改的属性列表不能直接作为集合或数组使用？

如果我错了，请纠正我？你想做什么 ？

# vba - 哪个是物品分类的最佳设计？

> ID：14372698
> 
> 赞同：0
> 
> 时间：2013-01-17T05:26:48.347
> 
> 标签：vba, ms-access, database-design, user-interface, relationship

我有四个级别来根据它们的属性对项目进行分类。某些项目可能不需要所有子类别级别，并且某些项目可能共享相同的子类别值。

例子：

```
Category1   Category2   Category3   Category4
---------   ---------   ---------   ---------
Jewelry     Ring        Wedding
Jewelry     Bracelet    Serpentine 
Jewelry     Necklace    Serpentine
Equipment   Tool        Power       Drill                
Equipment   Tool        Hand        Jigsaw
Accessory   Battery     AA
Accessory   Movie       DVD         Action
Accessory   Game        PS3         Combat 
```

我希望查找表包含与每个项目相关的值，以便当用户从第一个类别的下拉列表中选择一个值时，下一个子类别中的相应值将自动下拉（级联），依此类推。

我将为大多数常见项目预定义不可删除、不可更新的值，但是我无法提供所有可能的项目，我希望允许用户从第二级以下添加值。

对每个项目进行分类的目的是提供一个统一的方法来描述项目和查询以有效地返回所有需要的项目。

问题：

1.  如何确保用户添加的新值将正确链接到父值或子值？

2.  我应该允许用户添加新的类别和子类别，还是应该强制他们仅从预定义的值中进行选择，如果他们的项目不适合预定义的值之一，则选择“其他”值并输入自由格式的评论？

3.  我定义的当前方法是最佳方法还是您有更好的建议？

以下是我定义的当前表和关系：

![在此处输入图像描述](../Images/e9ff3d5a93b418aea369810b36cb76fa.png)

```
Columns        MS-Access     Informix   Comments
-------------- ------------  --------   ----------------------------------------
Primary keys   Autonumber    SERIAL  
Foreign keys   Long Integer  INTEGER 
English        Text          VARCHAR    Description in English language.
Spanish        Text          VARCHAR    Description in Spanish language.
NonDelete      Yes/No        CHAR(1)    Cant delete predefined value if TRUE.
NonUpdate      Yes/No        CHAR(1)    Cant update predefined value if TRUE.
Deleted        Yes/No        CHAR(1)    User-defined value cant be used anymore. 
StockKeptUnit  Yes/No        CHAR(1)    Non-serialized inventory item if TRUE. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:23:29.150

他们不是按照定义正确链接吗？毕竟，这就是 PK/FK 关系的重点。

大概创建一个新的 tlkpItemCat2 涉及选择一个有效的父 tlkpItemCat1，否则 INSERT 将失败。只要将 tlkpItemCat2.ItemCat1_SIID 定义为 NOT NULL，您就可以确定有效的关系。

这并不能保证最终用户没有声明领带是电动工具，但这是一个完全不同的问题。

* * *

现在，根据对这个确切问题（对象分类）的经验，我可以告诉你，虽然这个设计看起来非常优雅和有用，但从可用性的角度来看却很糟糕。您的用户必须*提前*知道层次结构才能快速找到项目的正确类别。一旦最终用户开始向您的层次结构添加级别，它就会变成一场反复的、死胡同的搜索，试图找到 Cat1/Cat2/Cat3 的正确组合来应用——这会导致任何事情都会做-just-to-get-past-this-screen 分类。

更好的方法是允许用户简单地输入“Jigsaw”，然后返回一个列表：

```
Did you mean:
 []   Equipment | Tool       | Power  | Jigsaw
 []   Equipment | Tool       | Hand   | Jigsaw
 []   Game      | Childrens  | Jigsaw
 []   Accessory | DVD-Movie  | Horror | Jigsaw
 []   ... or [something else]? 
```

是的，这需要更多的工作，但从 UI 和 UX 的角度来看，这是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:01:30.323

这应该允许无限的类别。您需要通过 UI 或 OnChange 事件强制执行非孤立事件。

![在此处输入图像描述](../Images/95dd550b07c3573f35f71158fdf438a6.png)

然后您的表格内容将如下所示：

![在此处输入图像描述](../Images/cc49b6777baf1ca2983772b82d556251.png)

![在此处输入图像描述](../Images/fb0d5e51bb4219c8ef19c44e2451109b.png)

![在此处输入图像描述](../Images/c76dd2400afd38b245c10f495d06b02a.png)

# android - dexdump 结果中的“vtable”

> ID：14372701
> 
> 赞同：0
> 
> 时间：2013-01-17T05:26:58.753
> 
> 标签：android, assembly, vtable

我正在对 dexdump 进行一些研究。现在，有一个问题让我很困惑。当您查看 dexdump 结果时，您会在代码中找到“vtable”，如下所示：

```
000854: fa20 a900 4300                         |0000: +invoke-super-quick {v3, v4}, [00a9] // vtable #00a9    
00085a: 1500 037f                              |0003: const/high16 v0, #int 2130903040 // #7f03    
00085e: f820 ef00 0300                         |0005: +invoke-virtual-quick {v3, v0}, [00ef] // vtable #00ef    
000864: 1500 057f                              |0008: const/high16 v0, #int 2131034112 // #7f05    
000868: f820 7200 0300                         |000a: +invoke-virtual-quick {v3, v0}, [0072] // vtable #0072    
00086e: 0c00                                   |000d: move-result-object v0 
```

有人知道“vtable”实际链接到什么吗？有这方面的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:29:43.233

vtable 可能代表“虚拟表”。它是一种实现虚函数的方式（如果你要说你正在使用java，因为这里有android，在java中所有函数都是虚拟的）——所有的虚函数都在一个函数指针数组中。所以 vtable #00a9 可能意味着偏移 00a9 到虚拟表中。

# html - 这个 HTML 包含片段是什么语言？

> ID：14372703
> 
> 赞同：0
> 
> 时间：2013-01-17T05:27:06.023
> 
> 标签：html, templates, tags

我继承了一些带有包含标签的 .html 文件，如下所示：

```
[% INCLUDE '/path/to/footer.html' %] 
```

我不认识这个括号和百分号标签。任何人都可以为我识别它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:47:14.563

您正在查看的文件几乎肯定使用[`Template::Toolkit`](http://search.cpan.org/~abw/Template-Toolkit/lib/Template/Toolkit.pod)语法。这个特定的语法位记录在[`Template::Manual::Directives`](http://search.cpan.org/~abw/Template-Toolkit/lib/Template/Manual/Directives.pod#INCLUDE).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:15:52.050

我四处寻找，发现我的网络服务器正在使用 mod-perl，并且这个[模板库](http://perl.apache.org/docs/tutorials/tmpl/comparison/comparison.html#HTML__Template)被用来处理有问题的 HTML 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:35:01.507

它基本上是 SAS 语法，请参考[Sas Syntax](http://support.sas.com/documentation/cdl/en/hostwin/63285/HTML/default/viewer.htm#win-cmd-include.htm)

# visual-studio-2012 - 由于 rc.exe，Visual Studio 无法构建

> ID：14372706
> 
> 赞同：148
> 
> 时间：2013-01-17T05:27:19.203
> 
> 标签：visual-studio-2012

我在网上搜索并找不到与我的问题相似的任何内容。

我创建了一个空的 C++ 项目并添加了一个带有返回的 main.cpp，但我无法构建它。这是我收到的消息：

```
1>------ Build started: Project: Project1, Configuration: Debug Win32 ------
1>LINK : fatal error LNK1158: cannot run 'rc.exe'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

VS2012中是否有可以指定在哪里找到这个可执行文件的地方？我已经安装了 Windows 7 SDK，并且我有这个可执行文件：

```
C:\Program Files\Microsoft SDKs\Windows\v7.0\Bin 
```

我来自 Code::Blocks 并毫无问题地使用 mingw-gcc，但最近我一直需要 VS 来进行托管实现，所以我希望有人有想法。

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2013-01-17T06:09:22.553

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2017-09-12T01:39:38.753

We hit this issue with our CMake/Visual Studio 2015 builds after also installing VS2017 on the machine. The correct solution in our case is to specify the Window Kit version (8.1) to the Visual Studio Command Prompt - otherwise you get the Windows 10 Kit by default which doesn't include rc.exe in the bin directory.

e.g. Start Menu->Visual Studio 2015->VS2015 x64 Native Tools Command Prompt

```
%comspec% /k "C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat" amd64 8.1 
```

Note the 8.1 option on the end

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-07-27T19:37:43.057

From what I have found, if you have a windows 7 OS, doing the following steps will fix the problem:

1) go to C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Bin

2) then copy RC.exe and RcDll from this file

3) go to C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin and paste the two files you have copied into it.

I had the same problem, and the above posted solution did not work. My solution was derived from it, and it worked for me, if the ones above do not work you can give this one a try.

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-10-11T04:20:54.827

This `rc.exe` error can occur if the Visual C++ compiler and the Windows 10 SDK versions don't correspond to the same Visual Studio year. In general, the solution is to make sure you have on your system, and are using in the compilation, VC++ and Windows SDK for the visual studio year you are using.

For instance, if you have Visual Studio 2017 or 2019, and you installed Build Tools 2015 without selecting to install its own 2015 Windows SDK (default installation does not install it!), and are trying to use it to compile, you may run into this problem.

In my case, I already had Visual Studio 2017\. When I tried to use Build Tools 2015 to compile a python library (or probably any program), this same 'rc.exe' error occurred. I read that the VS2015 14.0 C++ compiler can glitch if it tries to use the Windows 10 SDK from Visual Studio 2017.

I uninstalled Build Tools 2015, and reinstalled it, this time as a *custom* installation, selecting to install *both* visual C++ and Windows 10 SDK components. This fixed the issue.

UPDATE: I just looked at Build Tools 2015 again, and apparently there is no custom installation option anymore. If so, installing Visual Studio 2015 with C++ and Windows SDK components should also work. Edit: commenter has found the [customizable build tools installer](https://visualstudio.microsoft.com/vs/older-downloads/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-06-19T14:56:37.970

In my case, I had a mix and match error between projects created in VS2015 and VS2017\. In my .vcxproj file, there's this section called PropertyGroup Label="Globals">. I had a section for TargetPlatformVersion=10.0.15063.0\. When I removed the TargetPlatformVersion, that solved the problem.

Sorry I can't copy and paste the block here, but stackoverflows coding format did not allow that.

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-12-18T19:17:45.800

I'm on Windows 7 x64 and **Visual Studio 2017**. I get this error trying to compile a cython script. That's how I solved: I copied and pasted **rc.exe** and **rcdll.dll** from:

```
C:\Program Files (x86)\Windows Kits\8.1\bin\x86 
```

to

```
C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\x86_amd64 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-08-04T23:17:55.767

In my case, VS 2019 on Windows 10 x64, I followed mostly what it was said in the answers but pasted `rc.exe` and `rcdll.dll` from `C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x86` to `C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin`, which is where `link.exe` is.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-07-20T10:47:14.813

Here is my almost similar case:
I have VC2010 working project under Win7 32bit. I make clean install of VC2013 under Win8.1 64bit After successful converting of my project from VC2010 to VC2013, during 1st compilation the following error rise:
Finished generating code
LINK : fatal error LNK1158: cannot run 'rc.exe'

**Solution 1:**
Delete whole line “&lt;ExecutablePath Condition=”...”&gt;...</ExecutablePath>” in element “&lt;PropertyGroup>” in NameOfYourSolution.vcxproj file in notepad before to run VC2013
**Solution 2:**
Copy only two files: rc.exe and rcdll.dll from “c:\Program Files (x86)\Windows Kits\8.1\bin\x86\” to “c:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\” and compilation will be successful!!
Note:
a)It is not need to touch any PATH or other Windows or VC environment variables.
b)“Platform Toolset” (Project Property Pages –> Configuration Properties –> General) will be automatic set to “Visual Studio 2013 (v120)” (not change it to “Visual Studio 2010” to be able to continue to develop your project under VC2013 concepts)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-06-17T01:37:34.440

In my case the error was due to a bad setting in a vcxproj. The vcxproj was from a third party, so I'm not sure how it got in that state.

Specifically, for one of the platform/profile combos, the platform folder was missing from the Windows SDK bin folder:

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64'">
 <ExecutablePath>$(VCInstallDir)bin\x86_amd64;$(VCInstallDir)bin;$(WindowsSdkDir)bin\NETFX 4.0 Tools;$(WindowsSdkDir)bin\x86; 
```

is correct, where

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64'">
 <ExecutablePath>$(VCInstallDir)bin\x86_amd64;$(VCInstallDir)bin;$(WindowsSdkDir)bin\NETFX 4.0 Tools;$(WindowsSdkDir)bin; 
```

was incorrect. Might need to scroll to the end of the code boxes to see the difference.

Note also, that for some strange reason $(WindowsSdkDir)bin\x64; did NOT work for me. Tried to figure out why, when rc.exe definitely exists in that folder, but I gave up.

In my opinion, the solutions from previous posters that involve copying rc.exe all over the place are wrong, because your project will not work on anyone else's machine. If you fix up the paths in the project correctly, it should work on any machine with a correct installation of the Windows SDK.

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-04-13T02:06:23.353

I'm on Windows 10 x64 and Visual Studio 2017\. I copied and pasted rc.exe and rcdll.dll from:

```
C:\Program Files (x86)\Windows Kits\8.1\bin\x86 
```

to

```
C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\amd64 
```

it's works with: ( qt creator 5.7.1)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-09-02T03:22:34.303

This might be a little outdated. But if copying the rc.exe and exdll.dll did not work, there is a chance that the windows sdk is not installed properly even if the windows sdk folder exists. You can update the sdk for win 8 in the following page: [http://msdn.microsoft.com/en-US/windows/hardware/hh852363](http://msdn.microsoft.com/en-US/windows/hardware/hh852363) After re-installing the sdk, the problem would get solved. Also make sure that platform toolset is set properly.

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-03-28T05:36:11.970

I've encountered this issue recently. I have both VS 2015 and VS 2017 installed, Windows kits 8.1 and 10 installed.

Command prompt from VS 2017 works as expected, rc.exe is visible. In VS 2015 this is not true. Actually, vcvarsall.bat script from VS 2015 does add a path to Windows 10 kit to PATH variable, but it adds a slightly wrong path. It adds path to

```
"C:\Program Files (x86)\Windows Kits\10\bin\x86" 
```

while the actual path is

```
"C:\Program Files (x86)\Windows Kits\10\bin\10.0.17763.0\x86" 
```

It seems that updating Windows 10 kit (or installing VS 2017) led to this issue.

So the solution is simple: just create symbolic links in "C:\Program Files (x86)\Windows Kits\10\bin" folder pointing to the corresponding folders in the underlying folder, e.g. a symbolic link "x86" for folder "10.0.17763.0\x86", "x64" for "10.0.17763.0\x64" etc.

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-02-29T06:05:35.343

I'm on Windows 10 Pro x64, VS 19..

When trying to install mod_wsgi for apache in cmd.

```
C:\>python -m pip install mod_wsgi 
```

This is the error I was getting from my command prompt.

```
LINK : fatal error LNK1158: cannot run 'rc.exe'

error: command 'C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\x86_amd64\\link.exe' failed with exit status 1158 
```

I had to copy rc.exe & rcdll.dll from

> C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x86

and add it to

> C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\x86_amd64

result from cmd

```
C:\>python -m pip install mod_wsgi
Collecting mod_wsgi
Using cached mod_wsgi-4.7.1.tar.gz (498 kB)
Installing collected packages: mod-wsgi
Running setup.py install for mod-wsgi ... done
Successfully installed mod-wsgi-4.7.1 
```

Hope this helps someone.

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-10-30T13:53:32.770

I had the same problem on VS 2013 and was able to fix it by changing the `Platform Toolset`.

You can find it in project settings, general.

E.g. switching `Platform Toolset` to VS 2010 will cause VS to use the Windows\v7.0A SDK.

You can check which SDK path is used by adding this to your prebuild event:

```
echo using SDK $(WindowsSdkDir) 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-05-08T20:20:04.290

I'm using Windows 7 with VS 2013 (Update 3) and Intel Parallel Studio XE Composer Edition for Fortran Windows (Update 5). Out of the box I had the same issue.

Once I fixed the missing rc.exe problem I had another issue. The linker was missing kernel32.lib.

I corrected both issues by updating the Intel Composer Options (TOOLS->Options...->Intel Composer XE->Visual Fortran->Compilers).

For the Win32 tab I added:

**Executables:** C:\Program Files (x86)\Windows Kits\8.0\bin\x86; **(just before $(PATH))**

**Libraries:** C:\Program Files (x86)\Windows Kits\8.0\Lib\win8\um\x86; **(at the end)**

For the x64 tab I added:

**Executables:** C:\Program Files (x86)\Windows Kits\8.0\bin\x64; **(just before $(PATH))**

**Libraries:** C:\Program Files (x86)\Windows Kits\8.0\Lib\win8\um\x64; **(at the end)**

Update...

I was also missing some SDK header files (winver.h and winapifamily.h). I added the following to the same TOOLS->Options... area.

For both the win32 and x64 tabs

**Includes:** C:\Program Files (x86)\Windows Kits\8.0\Include\um;C:\Program Files (x86)\Windows Kits\8.0\Include\shared;

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-05-31T22:15:43.337

I just figured out one (out of the 3 in total) projects in my VS2010 (SDK7.1) solution (projects are linked in a sequential linear dependency chain), had a .rc file in the project files that was empty. Removing the empty .rc file (from the project, without deleting it) solved the "fatal error LNK1158: ... cvtres.exe" problem.

Update: The following copy fixed the problem:

```
xcopy "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cvtres.exe" "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64\" 
```

This will enable WinSDK7.1, via MSBuild, to be able to compile .rc files into the executables.

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-01-17T20:24:05.317

This is even easier than that with Visual Studio 2017\. Follow these instructions: [https://docs.microsoft.com/en-us/visualstudio/install/modify-visual-studio](https://docs.microsoft.com/en-us/visualstudio/install/modify-visual-studio) to modify using Microsoft Visual Studio Installer.

Once inside the Microsoft Visual Studio Installer, click modify under your installed Visual Studio package, make sure the Desktop development with C++ is checked, and the MFC and ATl support (x86 and x64), under summary.

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-09-27T16:49:16.813

This can be caused by a vcxproj that originated in previous versions of Visual Studio OR changing the Platform Toolset in Configuration Properties -> General.

If so, possible Solution:

1) Go to Configuration Properties -> VC++ Directories

2) Select drop down for Executable Directories

3) Select "Inherit from parent or Project Defaults"

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-09-30T12:25:02.210

Add to your environment variable window sdk 8.1 path

> C:\Program Files (x86)\Windows Kits\8.1\bin\x64

then open Visual studio x64 Native tools command prompt and enter

> vcvarsall.bat

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-11-15T09:38:12.930

If you really need to use the SDK Windows 10 with Visual Studio 2015, you have to download an older version on [sdk-archive](https://developer.microsoft.com/fr-fr/windows/downloads/sdk-archive). Newer version of the SDK changed the place of the rc executable and MSBuild of Visual Studio 2015 update 3 (latest version) can't locate it. At least the version 10.0.14393.795 of the SDK Windows is still compatible with Visual Studio 2015.

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-05-13T10:35:20.487

Maybe project file was touched by VS2017\. Then when you link the project in 2015 "LINK : fatal error LNK1158: cannot run 'rc.exe'" can brake the build.

In vcxproj try to:

1) replace:

`<WindowsTargetPlatformVersion>10.0.17763.0</WindowsTargetPlatformVersion>` with: `<WindowsTargetPlatformVersion>8.1</WindowsTargetPlatformVersion>`

2) remove: `<VCProjectVersion>15.0</VCProjectVersion>`

3) replace: `<PlatformToolset>v141</PlatformToolset>` with: `<PlatformToolset>v140</PlatformToolset>`

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-11-28T14:01:54.847

I got the OP's link error about `rc.exe` when trying to execute `pip install` inside a [`bash`](https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/bash?view=azure-devops) task within an Azure DevOps pipeline that I was using to build a Python package from source with C++ extensions. I was able to resolve it by adding the path to `rc.exe` inside the `bash` task just before calling `pip install`, like so:

```
PATH="/c/Program Files (x86)/Windows Kits/10/bin/10.0.18362.0/x64":$PATH 
```

That was inside an Azure [`job`](https://docs.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops&tabs=yaml) that was using `vmImage: 'windows-2019'` for its agent; i.e., Windows Server 2019 with Visual Studio 2019.

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-01-21T01:26:29.787

I was able to make it work for me also this way in windows

1.  Set your environment variable to point to the location of your rc.exe assuming you're using x86 version

> C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x86

You can easily set your environment variable using

> C:> setx path "%path%;C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x86"

2.  Restart your Qt Creator
3.  Clean and Rebuild

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2020-12-14T04:43:27.057

My answer to this quesiton.

Modify file `C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\Tools\vcvarsqueryregistry.bat` The content of `:GetWin10SdkDir` From

```
@REM ---------------------------------------------------------------------------
:GetWin10SdkDir

@call :GetWin10SdkDirHelper HKLM\SOFTWARE\Wow6432Node > nul 2>&1
@if errorlevel 1 call :GetWin10SdkDirHelper HKCU\SOFTWARE\Wow6432Node > nul 2>&1
@if errorlevel 1 call :GetWin10SdkDirHelper HKLM\SOFTWARE > nul 2>&1
@if errorlevel 1 call :GetWin10SdkDirHelper HKCU\SOFTWARE > nul 2>&1
@if errorlevel 1 exit /B 1
@exit /B 0 
```

to

```
@REM ---------------------------------------------------------------------------
:GetWin10SdkDir

@call :GetWin10SdkDirHelper HKLM\SOFTWARE\Wow6432Node > nul 2>&1
@if errorlevel 1 call :GetWin10SdkDirHelper HKCU\SOFTWARE\Wow6432Node > nul 2>&1
@if errorlevel 1 call :GetWin10SdkDirHelper HKLM\SOFTWARE > nul 2>&1
@if errorlevel 1 call :GetWin10SdkDirHelper HKCU\SOFTWARE > nul 2>&1
@if errorlevel 1 exit /B 1
@setlocal enableDelayedExpansion
set HostArch=x86
if "%PROCESSOR_ARCHITECTURE%"=="AMD64" ( set "HostArch=x64" )
if "%PROCESSOR_ARCHITECTURE%"=="EM64T" ( set "HostArch=x64" )
if "%PROCESSOR_ARCHITECTURE%"=="ARM64" ( set "HostArch=arm64" )
if "%PROCESSOR_ARCHITECTURE%"=="arm" ( set "HostArch=arm" )
@endlocal & set PATH=%WindowsSdkDir%bin\%WindowsSDKVersion%%HostArch%;%PATH%
@exit /B 0 
```

Modify this single place will enable the support for all Windows 10 sdk along with all build target of visual studio, including

*   VS2015 x64 ARM Cross Tools Command Prompt
*   VS2015 x64 Native Tools Command Prompt
*   VS2015 x64 x86 Cross Tools Command Prompt
*   VS2015 x86 ARM Cross Tools Command Prompt
*   VS2015 x86 Native Tools Command Prompt
*   VS2015 x86 x64 Cross Tools Command Prompt

They are all working.

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-03-25T08:56:14.607

In my case, I installed the Windows SDK 10586 via Visual Studio 2015 -> **Modify**, then the following paths are installed.

> C:\Program Files (x86)\Windows Kits\10\bin\arm64\rc.exe
> 
> C:\Program Files (x86)\Windows Kits\10\bin\x64\rc.exe
> 
> C:\Program Files (x86)\Windows Kits\10\bin\x86\rc.exe

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-06-09T08:40:22.927

For Visual Studio Community 2019, copying the files in the answers above (`rc.exe rcdll.dll`) to `C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.21.27702\bin\Hostx86\x86` did the trick for me.

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-08-04T15:45:38.150

"Error LNK1158 cannot run 'rc.exe" could be resulted from your project was opened by newer MS VS version. For instance, your project was created in VS 2015, then later was opened by 2017\. Then later your project is opened in 2015.

To resolve this issue, open yourProjectName.vcxproj, look for *WindowsTargetPlatformVersion*, and change to the correct VS version

For VS 2015, it should be 8.1 for VS 2017, it should be 10.0.17763.0

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-10-23T02:16:55.000

There are a lot of answers here, but I didn't see this one, which I believe is the right way to fix this Visual Studio bug. I recently had to install Visual Studio 2015 on a system that already had Visual Studio 2017 and 2019 along with multiple versions of the Windows SDK. When building either x86 or x64/debug or release, it could not find RC.EXE. The reason is that the Project's executable path (the `$(VS_ExecutablePath)`) value is incorrect. For x86 and x64, it's set to

```
C:\Program Files (x86)\Windows Kits\10\bin\x86
C:\Program Files (x86)\Windows Kits\10\bin\x64 
```

which appears to be correct if `10` is replaced by `8.1` but I want to use the Windows 10 SDK not the Windows 8.1 SDK.

The Windows 10 SDK executables are actually in these directories (i.e. these are the SDKs I have installed right now):

```
C:\Program Files (x86)\Windows Kits\10\bin\10.0.15063.0\arm64\rc.exe
C:\Program Files (x86)\Windows Kits\10\bin\10.0.15063.0\x64\rc.exe
C:\Program Files (x86)\Windows Kits\10\bin\10.0.15063.0\x86\rc.exe
C:\Program Files (x86)\Windows Kits\10\bin\10.0.17763.0\arm64\rc.exe
C:\Program Files (x86)\Windows Kits\10\bin\10.0.17763.0\x64\rc.exe
C:\Program Files (x86)\Windows Kits\10\bin\10.0.17763.0\x86\rc.exe
C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\arm64\rc.exe
C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x64\rc.exe
C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x86\rc.exe
C:\Program Files (x86)\Windows Kits\8.1\bin\x64\rc.exe
C:\Program Files (x86)\Windows Kits\8.1\bin\x86\rc.exe
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Bin\RC.Exe
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Bin\x64\RC.Exe 
```

In Windows 10 SDKs, the `TargetPlatformVersion` is part of the path, which allows the SDK executables/include/libs to be updated for each new `TargetPlatform` as it's released.

Choosing an `RC.EXE` and copying it to a directory in the path would work but each `TargetPlatformVersion` SDK directory has a different `RC.EXE`, so you might not know which one you are using -- especially if you have multiple developers and build machines. It's best to fix it in the projects.

To fix this,

*   Select all of the affected projects with Shift-Click
*   Right-click a selected project and select Properties,
*   Select VC++ Directories on the left
*   Select Executable Directories
*   Click the pull-down at the far right and select Edit.

Double-click the top blank line and for x86/win32 projects, add this to both Debug and Release configurations:

```
 $(WindowsSdkDir)bin\$(TargetPlatformVersion)\x86\ 
```

For x64 projects, add this to both Debug and Release configurations:

```
 $(WindowsSdkDir)bin\$(TargetPlatformVersion)\x64\ 
```

Leave "Inherit from parent or project defaults" checked. The "Evaluated Value" window may appear garbled but it seems to get fixed once you save and close the property pages.

I did not have to update "Library Directories" nor "Include Directories" but they might require similar changes.

This will make a number of entries in each Visual Studio project file that look like this:

```
 <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
    <ExecutablePath>$(WindowsSdkDir_10)bin\$(TargetPlatformVersion)\x86\;$(ExecutablePath)</ExecutablePath>
  </PropertyGroup> 
```

The right way to fix this is by editing the property sheet for `Microsoft.Cpp.Win32.user` or to define your own property sheet to add this value to the inherited values, but the Visual Studio 2015 property manager seems to be buggy (2017/2019 is much better) so I found it best to just put the value directly into the projects. This also means every other developer or build machine that uses these projects will be able to build, as long as the chosen Windows 10 SDK is installed.

# asp.net - 贝宝订阅下一个到期日付款解决方案？

> ID：14372707
> 
> 赞同：1
> 
> 时间：2013-01-17T05:27:22.293
> 
> 标签：asp.net, payment-gateway, paypal, paypal-ipn

我在我的商家帐户中创建了一个贝宝订阅。但我在下一个到期日有问题。是这样的……

我在 2013 年 1 月 14 日创建了贝宝订阅，并设置了一天的试用期。（这是每日订阅）

在我的贝宝帐户订阅详细信息页面中，它显示 2013 年 1 月 15 日为下一个到期日。这是正确的，因为我设置了一天的跟踪期。我等着看在 2013 年 1 月 15 日（到期日）获得每日订阅。

但是付款是在 2013 年 1 月 16 日付款的。现在我有问题了。

我想知道我是否在 2013 年 1 月 14 日设置了为期一天的订阅规则。**所以当我收到第一笔付款时。是 2013 年 1 月 15 日的开始还是 2013 年 1 月 15 日的结束**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:36:07.537

PayPal 会尝试在上一个计费周期或试用期结束后的第二天向订阅者收取定期付款。计费周期可以是每天、每周、每月或每年，具体取决于原始订阅的条款。

所以第一次付款发生在他们第一次订阅时，然后下一次付款发生在第一次订阅期结束后的第二天......

否则任何延迟都可能是处理时间（付款可能需要一段时间才能清除......）

我猜在您创建计划后，您通过订阅尝试了它......所以您在 14 日支付了 1 天的试用期，该试用期在 15 日结束......然后下一次付款发生在该计费周期后的第二天（ 16 日）在下一个周期收费时。

Information taken from the paypal pdf here [https://www.x.com/sites/default/files/pp_websitepaymentsstandard_integrationguide.pdf](https://www.x.com/sites/default/files/pp_websitepaymentsstandard_integrationguide.pdf) Which I don't blame you for not finding... I had to download 2 pdfs before that one that kept telling me the document had moved and sent me to the next one until I finally got the right one.

# c++ - 共享库可移植性

> ID：14372718
> 
> 赞同：0
> 
> 时间：2013-01-17T05:28:17.867
> 
> 标签：c++, linux, shared-libraries

所以我觉得我应该知道这一点，但我不知道......

对于 Linux 上的共享库 (.so)。我的理解是，只要 CPU 架构保持不变，那些应该可以在发行版之间移植，对吗？

例如，如果我有一个 x86_64 Fedora 并且我从它复制了一个 .so 文件到一个 x86_64 Ubuntu，那么 .so 应该可以正常工作吗？

现在我相信这是假设：

A) .so 对新机器上的其他 .sos 没有未实现的依赖关系。B) .so 不依赖于与新机器不同的版本 .so

但是假设我有我的 libisprime.so 共享对象，它有一个计算素数的函数。这个 .so 不依赖于其他任何东西。我在一个发行版上编译它。我不应该能够在任何具有**相同架构**的发行版上使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:35:25.087

它们只是 ELF 文件。因此，只要您所做的依赖假设是正确的，我看不出它们不能跨系统工作的任何原因。

不过，最好的判断方法是安装一些虚拟机并尝试一下！

# c++ - 如何在 C++ 中表示 IPv6？

> ID：14372721
> 
> 赞同：1
> 
> 时间：2013-01-17T05:28:35.587
> 
> 标签：c++, vector, format, int, ipv6

我想知道在 C++ 中存储 IPv6 的最有效方法是什么？

基本上我需要一种能够提供尽可能多的灵活性并与现有库兼容的格式。我的第一个想法是使用简单的`std::vector<int>`，因为这样可以让我轻松访问地址的每个部分。

这是一个好的解决方案吗？或者我以后可能会遇到麻烦？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T05:33:32.480

这应该没问题，但您可能想做一个 std::vector<uint8_t>。我个人会使用 c 中的 struct sockaddr_in6。

```
/* IPv6 address */
struct in6_addr
  {
    union
      {
    uint8_t u6_addr8[16];
    uint16_t u6_addr16[8];
    uint32_t u6_addr32[4];
      } in6_u;
#define s6_addr         in6_u.u6_addr8
#define s6_addr16       in6_u.u6_addr16
#define s6_addr32       in6_u.u6_addr32
  }; 
```

包括这个：

```
 #include <netinet/in.h> 
```

这样你就可以使用你的地址的静态 intilization 并完成它。在向量上重复 push_backs 会变得非常麻烦，并且更难阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:32:01.060

您的意思是存储 IPv6 地址？如果是这样， int 是不够的，每个都需要 128 位。

# scala - 名为“*”的方法导致编译错误

> ID：14372727
> 
> 赞同：1
> 
> 时间：2013-01-17T05:29:06.820
> 
> 标签：scala, operator-keyword, operator-precedence

我对这段代码有点困惑：

```
abstract class Abstract3 {   
    type TP
    protected def action(arg: TP): TP   
    def *[T <% TP](arg: T) = action(arg) 
}

class Concrete3(str: String) extends Abstract3 {   
    type TP = Concrete3 
    override protected def action(arg: TP) = new TP("") 
}

class Test3 {   
    implicit def str2Concrete(s: String)(implicit num: Int) = new Concrete3(s)   
    implicit val a = 1
    val foo = "AA" * "BB" * "CC" 
} 
```

Scala 编译器不编译它，并显示错误消息：

> test.scala:15: error: value * is not a member of String val foo = "AA" * "BB" * "CC" ^ 发现一个错误

但是如果我们将 ''*'' 更改为 '/' 或其他任何内容，它将成功编译：

```
abstract class Abstract3 {
  type TP
  protected def action(arg: TP): TP
  def /[T <% TP](arg: T) = action(arg)
}

class Concrete3(str: String) extends Abstract3 {
  type TP = Concrete3
  override protected def action(arg: TP) = new TP("")
}

class Test3 {
  implicit def str2Concrete(s: String)(implicit num: Int) = new Concrete3(s)
  implicit val a = 1 
  val foo = "AA" / "BB" / "CC"
} 
```

顺便说一句，如果我们删除 'implicit num: Int'，它也会编译得很好。

```
abstract class Abstract3 {
  type TP
  protected def action(arg: TP): TP
  def *[T <% TP](arg: T) = action(arg)
}

class Concrete3(str: String) extends Abstract3 {
  type TP = Concrete3
  override protected def action(arg: TP) = new TP("")
}

class Test3 {
  implicit def str2Concrete(s: String) = new Concrete3(s)
  val foo = "AA" * "BB" * "CC"
} 
```

* 是否具有比隐式参数更高的优先级，但 / 具有更低的优先级？或者还有其他原因 * 在这种情况下不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:52:36.750

我倾向于认为问题出在by `*`重载的事实（如）中，因此，当您将自己的添加到其中时，您会在转换中遇到歧义，从而使 Scala 丢弃它们。`String``Predef``"AA" * 5``*`

丢弃转换后，它会尝试在 上查找`*`，`String`但它不存在。

这个想法的问题是`"AA" * 2`即使使用导入仍然有效，并且您添加的转换在没有隐式参数的情况下有效。但我仍然认为答案是这样的。

# php - 跳过 fgetcsv 方法的第一行

> ID：14372730
> 
> 赞同：25
> 
> 时间：2013-01-17T05:29:24.887
> 
> 标签：php

我有一个 CSV 文件，我从 CSV 文件中读取数据，然后我想跳过 CSV 文件的第一行。其中将包含任何标题。我正在使用此代码。

```
while (($emapData = fgetcsv($file, 10000, ",")) !== FALSE)
{
    // Code to insert into database
} 
```

当我将数据插入数据库时​​，不应将标题保存到数据库中。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2014-07-21T06:02:03.360

在开始 while 循环之前，只需获取第一行并且什么都不做。这样就不需要测试它是否是第一行的逻辑。

```
fgetcsv($file, 10000, ",");
while (($emapData = fgetcsv($file, 10000, ",")) !== FALSE) {
  //....
} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-01-17T05:33:08.320

尝试：

```
$flag = true;
while (($emapData = fgetcsv($file, 10000, ",")) !== FALSE) {
   if($flag) { $flag = false; continue; }
   // rest of your code
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-01-31T10:45:11.017

有点晚了，但这是另一种方法（无需计算所有行）：使用[fgets](https://secure.php.net/manual/en/function.fgets.php)

```
$file = fopen($filename, 'r');  // create handler
fgets($file);  // read one line for nothing (skip header)
while (($line = fgetcsv($file, 10000, ",")) !== FALSE) {
    // do your thing
} 
```

人们可能会认为这更优雅

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-17T05:34:45.710

如果检查失败，您可以添加一个简单的检查并跳过查询：

```
$firstline = true;
while (($emapData = fgetcsv($file, 10000, ",")) !== FALSE)
{
    if (!$firstline) {
        // Code to insert into database
    }
    $firstline = false;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-02T07:11:22.470

试试这个简单的代码。

```
$file = fopen('example.csv', 'r');  // Here example is a CSV name
$row = 1;
while (($line = fgetcsv($file, 10000, ",")) !== FALSE) {
// $line is an array of the csv elements
if($row == 1){ $row++; continue; }   // continue is used for skip row 1
// print_r($line);
// rest of your code
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-29T20:48:09.337

无论当前指针位置如何，您都应该使用[fseek() 方法](https://www.php.net/manual/en/function.fseek.php)来获得所需的行。

在本例中，获取循环后的第一行：

```
$file = fopen($path, "r");    

while (($emapData = fgetcsv($file, 10000, ",")) !== FALSE) {
  // ...
}

fseek($file, 1, SEEK_CUR); 
```

您可以使用第三个参数将指针定位在文件中，如下所示：

SEEK_SET - 它将文件指针位置移动到文件的开头。

SEEK_CUR - 它将文件指针位置移动到给定位置。

SEEK_END – 将文件指针位置移动到文件末尾。

# web-services - SOAP 调试消息未打印

> ID：14372732
> 
> 赞同：0
> 
> 时间：2013-01-17T05:29:50.923
> 
> 标签：web-services, soap, jax-ws

我在客户端 VM 参数中设置了 -Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dump=true 。我正在使用 JAX-WS 客户端。但是尽管 SOAP 消息并没有在控制台中打印出来。任何原因？

这是我的客户代码。

```
package com.helloworld.client;

import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import com.helloworld.ws.HelloWorld;

public class HelloWorldClient{

    public static void main(String[] args) throws Exception {

    URL url = new URL("http://localhost:9999/ws/hello?wsdl");

        //1st argument service URI, refer to wsdl document above
    //2nd argument is service name, refer to wsdl document above
        QName qname = new QName("http://ws.helloworld.com/", "HelloWorldImplService");

        Service service = Service.create(url, qname);

        HelloWorld hello = service.getPort(HelloWorld.class);

        System.out.println(hello.getHelloWorldAsString("Test String"));

    }

} 
```

我的服务器是我使用 Endpoint.publish 发布的，并且在本地运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T05:59:08.687

这是正确的 VM 参数 -Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dump=true。您在使用任何 IDEA 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:58:28.620

在服务器上

```
com.sun.xml.ws.transport.http.HttpAdapter.dump=true 
```

您还可以[在此处](http://jax-ws.java.net/articles/handlers_introduction.html)和[此处](https://www.ibm.com/developerworks/mydeveloperworks/blogs/amsurana/entry/jax_ws_handlers_part_3_of_3?lang=en)`@HandlerChain(file = "....")`使用注释更多关于 Jax-WS 处理程序

# iphone - 再次单击时重新加载选项卡

> ID：14372735
> 
> 赞同：1
> 
> 时间：2013-01-17T05:29:58.603
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar, reload

我有一个`UITabBarController`带有 5 个标签`Tab 2`的`Tab3`我`Tab 2`想要.

方法`Tab 2(make changes)--> Tab 1 --> Tab 2(it should reload ,it should not display me the changes)`

如何重新加载该选项卡..

我正在使用下面的代码但不起作用..更改保持不变..

```
 [self.navigationController popToRootViewControllerAnimated:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:40:44.060

有一些方法可以做到这一点：

*   在控制器的 viewWillApear 中：编写您的重新加载代码。但它会导致每次视图出现时重新加载

*   实现 UITabBarControllerDelegate，在 shouldSelectViewController/didSelectViewController 方法中重新加载。

# winforms - WebKit.NET C# 自定义上下文菜单

> ID：14372736
> 
> 赞同：2
> 
> 时间：2013-01-17T05:30:00.377
> 
> 标签：winforms

我正在我的 Windows 应用程序中实现一个[Webkit 浏览器控件](http://webkitdotnet.sourceforge.net/)。

我需要使用一个自定义上下文菜单（右键单击），它只有复制/剪切/粘贴作为其选项，而不管右键单击什么元素。我需要一步一步来了解如何实现它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:57:40.240

为 自定义上下文菜单`WebKitBrowser`假设您获得对的引用，`WebViewClass`然后`IWebUIDelegate`通过调用该`setUIDelegate()`方法为其设置 a 。

```
void MyWebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    var webView = this.GetWebView() as WebKit.Interop.WebViewClass;
    webView.setUIDelegate(new MyWebUIDelegate(this));
} 
```

在`IWebUIDelegate`实现中，您可以拦截该`contextMenuItemsForElement`方法并触发浏览器上下文菜单的显示。

这是一个工作示例：

```
public partial class Form1 : Form
{
    MyWebBrowser webKitBrowser;

    public Form1()
    {
        InitializeComponent();
        webKitBrowser = new MyWebBrowser();
        webKitBrowser.Dock = DockStyle.Fill;
        this.Controls.Add(webKitBrowser);
        webKitBrowser.Navigate("http://www.google.com");
    }
}

class MyContextMenu : ContextMenu
{
    public MyContextMenu()
    {
        var cutMenuItem = new MenuItem("Cut");
        var copyMenuItem = new MenuItem("Copy");
        var pasteMenuItem = new MenuItem("Paste");

        cutMenuItem.Click += cutMenuItem_Click;

        MenuItems.Add(cutMenuItem);
        MenuItems.Add(copyMenuItem);
        MenuItems.Add(pasteMenuItem);
    }

    void cutMenuItem_Click(object sender, EventArgs e)
    {
        //TODO: implement functionality
        MessageBox.Show("Cut was selected");
    }
}

class MyWebBrowser : WebKitBrowser
{

    public event EventHandler ShowContextMenu = new EventHandler(OnFireShowContextMenu);

    public MyWebBrowser()
    {
        DocumentCompleted += MyWebBrowser_DocumentCompleted;
        var myContextMenu = new MyContextMenu();
        ContextMenu = myContextMenu;
    }

    void MyWebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        var webView = this.GetWebView() as WebKit.Interop.WebViewClass;
        webView.setUIDelegate(new MyWebUIDelegate(this));
    }

    public static void OnFireShowContextMenu(object sender, EventArgs e)
    {
        var webBrowser = (Control)sender;
        var webView = (WebKit.Interop.WebViewClass)((MyWebBrowser)sender).GetWebView();
        var originalPoint = webBrowser.PointToScreen(new Point(0, 0));
        var currentPoint = new Point(Cursor.Position.X - originalPoint.X, Cursor.Position.Y - originalPoint.Y);

        ((WebKitBrowser)sender).ContextMenu.Show((Control)sender, currentPoint);
    }

    public void FireShowContextMenu()
    {
        this.ShowContextMenu(this, null);
    }

}

class MyWebUIDelegate : IWebUIDelegate
{
    private MyWebBrowser owner;

    public MyWebUIDelegate(MyWebBrowser browser)
    {
        this.owner = browser;
    }

    //trigger the browser's FireShowContextMenu() method
    public int contextMenuItemsForElement(WebView sender, CFDictionaryPropertyBag element, int defaultItemsHMenu)
    {
        owner.FireShowContextMenu();
        return defaultItemsHMenu;
    }

    //return 1, true
    public int hasCustomMenuImplementation()
    {
        return 1;
    }

    //the rest of the IWebUIDelegate interface implementation
} 
```

为了更深入地了解，您可能想要研究一些其他自定义，例如[open-webkit-sharp](https://code.google.com/p/open-webkit-sharp/)。

# c++ - 3D 头部的透视投影和 Z 缓冲以形成人脸图像

> ID：14372739
> 
> 赞同：2
> 
> 时间：2013-01-17T05:30:30.623
> 
> 标签：c++, matlab, 3d, projection, perspectivecamera

**输入：** 53490 个 3D 点以及头部的每个点 (xyz) 和颜色 (rgb)

**输出：**从特定位置/方向观看的 2D 人脸图像

**平台：** Matlab C/C++

经过研究，我发现了要执行的**步骤**

*   透视投影[http://en.wikipedia.org/wiki/3D_projection](http://en.wikipedia.org/wiki/3D_projection)
*   Z 缓冲[http://en.wikipedia.org/wiki/Z-buffering](http://en.wikipedia.org/wiki/Z-buffering)
*   Phong 反射模型[http://en.wikipedia.org/wiki/Phong_reflection_model](http://en.wikipedia.org/wiki/Phong_reflection_model)

我在 Matlab 中实现了上述 3 个步骤。但执行需要 8 分钟。2D 渲染是我项目的一部分；我将在 5000 次后调用 2D 渲染部分。我希望执行时间低于 1 秒。

大部分 (99.9%) 时间用于 z 缓冲。实施是在 wiki 链接之后完成的。
谁能帮我减少在 Matlab 中的时间或建议其他平台？任何有助于理解上述步骤的教程/演示参考资料都会有所帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:47:57.717

我不建议您在 matlab 中执行此操作，因为您可能需要可视化很大的体积。试试 vtk，你可能需要一些编程。

这是 ImageJ 的一个简单项目（3D 项目）：http://imagejdocu.tudor.lu/doku.php? [id =gui:image:stacks](http://imagejdocu.tudor.lu/doku.php?id=gui:image:stacks)

# java - 从android发布应用程序的日志错误

> ID：14372741
> 
> 赞同：0
> 
> 时间：2013-01-17T05:30:39.063
> 
> 标签：java, android, logging

我目前正在开发一个应用程序，该应用程序每 X 分钟记录一次用户的 GPS 位置并将数据上传到服务器。对我来说，该应用程序可以运行好几天。我一直在对一些用户进行测试，他们说应用程序每隔几个小时就会崩溃一次，但我无法重现这一点。如何记录这些错误并将它们上传到我的服务器，以便我知道出了什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:33:22.527

如果您在 Play 商店，它应该将它们上传到您的开发者控制台。否则，请使用 ACRA 之类的第 3 方库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:42:47.043

您可以使用 ACRA（Android 应用程序崩溃报告）工具来获取客户端发生的错误。您可以参考以下链接以了解更多信息。

1)[链接 1](http://code.google.com/p/acra/)
2)[链接 2](http://guidogarcia.net/blog/2011/12/20/acra-reporting-crashes-in-your-android-application-the-easy-way/)
3)[链接 3](http://www.helloandroid.com/content/acra-application-crash-report-android)

# android - “android 列表目标”对 AOSP 构建不显示任何内容

> ID：14372742
> 
> 赞同：0
> 
> 时间：2013-01-17T05:30:39.113
> 
> 标签：android, build, android-source

[根据http://source.android.com/source/building.html](http://source.android.com/source/building.html)中列出的说明，可以构建完整的构建，并且可以启动模拟器。

Android 4.0.4 源代码已下载并构建。

`. build/envsetup.sh`

`lunch full-eng`

`make`

```
root@computer0OfGod:~/customEmulator# android list target
Available Android targets: 
```

但是运行`android list target`show nothing，所以无法创建 avd。

预期结果是应该至少列出一个目标。我怎样才能把目标带出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:37:50.123

我不确定，但我认为您需要先创建 avd：

```
$ ./android create avd -n [Your AVD's name] -t 1 
```

供参考：http: [//blog.sheikhaman.com/2010/10/android-os-source-code-modification_13.html](http://blog.sheikhaman.com/2010/10/android-os-source-code-modification_13.html)

我希望它会有所帮助！

# android - 编辑 AChart 引擎的源代码（饼图）

> ID：14372752
> 
> 赞同：1
> 
> 时间：2013-01-17T05:32:12.267
> 
> 标签：android, charts, achartengine, pie-chart

我正在尝试编辑非常好的 AChart 引擎的源代码，

1.  我需要减少我尝试使用 renderer.setMargins() 但不起作用的饼图上方的边距，而且我需要图表更大一点，这应该适用于所有屏幕尺寸。

2.  我已将饼图添加到 LinerLayout，并且我对该线性布局有一个滚动视图，但是当我向下滚动时，饼图会缩小。

3.  传说下方有一些边距如何删除？

请分享您对此的看法并帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:02:14.260

我之前告诉过你，你在一个问题中提出了几个问题。但是，无论如何我都会回答他们：

1.  使用您传递给`renderer.setScale()`方法的值。
2.  使用`renderer.setInScroll(true)`.
3.  使用`renderer.setFitLegend(true)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:44:20.243

对于第二种情况，使用`renderer.setZoomEnabled(false, false);`和`renderer.setPanEnabled(false, false);`

# javascript - 我想确保我之前的函数必须在 Nodejs 服务器端脚本中的以下代码之前完全执行

> ID：14372754
> 
> 赞同：0
> 
> 时间：2013-01-17T05:32:25.460
> 
> 标签：javascript, node.js, mongodb, callback

在开始查询之前，我想确保我的 mongodb 在函数 mongoConnect 中成功连接，因为在 NodeJS 中是非阻塞的，它会继续执行语句

，我只是想知道是否有类似“.then( function(){..})" 在服务器端或任何其他类似的东西，我知道有用于此目的的回调函数，但我不知道如何在这里使用它，我的意思是在我的情况下。

这是我的代码：

```
io.sockets.on('connection', function (socket) {

mongoConnect();
//Some Query to the Database

socket.on('login',function(user)
{
        controller.loginUser(user);
 });
});

function mongoConnect()
  {
      var mongoose = require('mongoose');
       mongoose.connect('mongodb://xxxxxx-xxx-xxx.mongolab.com:xxx/xxxx');
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:59:25.880

您可以使用 mongoose.once 等待“打开”事件，然后执行回调。

```
var mongoose = require('mongoose');
mongoose.connect('mongodb://localhost/test');

var db = mongoose.connection;
db.once('open', function callback () {
   // Stuff here
}); 
```

检查此站点以供参考： http: [//mongoosejs.com/docs/index.html](http://mongoosejs.com/docs/index.html)

# ios - MPmovieplayer 和流媒体 m3u8 文件？

> ID：14372757
> 
> 赞同：0
> 
> 时间：2013-01-17T05:32:38.830
> 
> 标签：ios, mpmovieplayercontroller, http-live-streaming, mpmovieplayer, m3u8

我正在使用 MPMoviePlayerController 流式播放视频。它的`m3u8`格式和播放没有问题。但是，假设它已经缓冲了 n 播放的总视频的 50%，现在如果我向后搜索，它会从该点开始缓冲。它不应该只是播放视频而不是从寻找的点缓冲，因为它已经缓冲了那部分..？？

仅在文件的情况下才会观察到此行为 `m3u8`，如果我播放`mp`4 个文件，则不会这样做。我的意思是，它不会再次缓冲。

那么，这是预期的行为还是我只是错过了一些东西..？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:58:34.203

`m3u8`是一个播放列表文件。它具有指向其他播放列表文件或`TS`（传输流）格式的视频文件的链接。这些`ts`文件通常是 10 秒的视频块。因此，它每 N(10) 秒获取一个新流。因此，当您搜索时，它会去获取具有该视频块的流。因此，您将再次看到缓冲。

# wpf - 如何以编程方式使用 EventTrigger 和 InvokeCommandAction？

> ID：14372759
> 
> 赞同：9
> 
> 时间：2013-01-17T05:32:55.677
> 
> 标签：wpf, mvvm

我有一个弹出窗口，`TextBox`用户应在其中输入票号，然后当用户按下回车键时，我希望将票号传递给将检索票的 ViewModel。

这是 xaml 的`TextBox`：

```
<TextBox x:Name="TicketNumber">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <i:InvokeCommandAction Command="{Binding OpenTicketCommand}" 
                                   CommandParameter="{Binding ElementName=TicketNumber,
                                                              Path=Text}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</TextBox> 
```

以上适用于任何按键，但我真的只希望它在按下回车键时发生。我该怎么做呢？

**编辑：**我假设它必须以编程方式完成（因此标题），但如果不是那也没关系。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-17T11:31:59.803

您可以`InputBindings - KeyBinding`用作替代方法。

像这样的东西：

```
<TextBox x:Name="TicketNumber">
    <TextBox.InputBindings>
        <KeyBinding Key="Enter"
                    Command="{Binding OpenTicketCommand}" 
                    CommandParameter="{Binding ElementName=TicketNumber,
                                               Path=Text}"/>
    </TextBox.InputBindings>
</TextBox> 
```

# python - 使用 SQLAlchemy 时如何关闭 MySQL 查询缓存？

> ID：14372760
> 
> 赞同：6
> 
> 时间：2013-01-17T05:32:58.173
> 
> 标签：python, mysql, sqlalchemy, pyramid

我正在通过 SQLAlchemy 库使用一个相当大的 MySQL 数据库，我很想关闭 MySQL 的查询缓存以在每个会话的基础上调试性能问题。当重复它们导致更快的执行时，很难调试慢查询。使用 CLI MySQL 客户端，我可以执行`SET SESSION query_cache_type = OFF;`以实现我正在寻找的结果，并且我想在每个 SQLAlchemy 会话上运行它（当我调试时）。

但我不知道如何配置 SQLAlchemy，使其`SET SESSION query_cache_type = OFF`在实例化新数据库会话时运行。

我查看了[引擎和连接文档](http://docs.sqlalchemy.org/en/latest/core/connections.html#sqlalchemy.engine.Connection.execution_options)，但似乎找不到任何东西。

有什么明显的我遗漏的东西，或者更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T05:59:18.017

定义引擎后立即使用[事件挂钩：](http://docs.sqlalchemy.org/ru/latest/core/events.html)

```
from sqlalchemy import event

def disable_query_cache(conn, record):
    conn.cursor().execute("SET SESSION query_cache_type = OFF")

# this is probably in your Pyramid setup code
engine = create_engine(...)

if DEBUGGING:
    event.listen(engine, 'connect', disable_query_cache) 
```

您可以通过将钩子添加到`Pool`类本身来全局执行此操作，但是（a）您可能希望 Pyramid 设置可用，以便您可以决定是否添加钩子，并且（b）全局状态不好:)

# php - 添加一个 if(); 在简单的 HTML dom 解析器函数中

> ID：14372761
> 
> 赞同：0
> 
> 时间：2013-01-17T05:33:03.653
> 
> 标签：php, if-statement, simple-html-dom

> **可能重复：**
> [不能在写上下文中使用方法返回值](https://stackoverflow.com/questions/1075534/cant-use-method-return-value-in-write-context)

[在 Simple HTML dom parser( http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/) ) 函数中添加 if 语句的方法是什么
看看我的脚本

```
include ('dom.php');
$check = file_get_html("http://www.google.com");
if(empty($check->find('div[id=domain]',0))){$same="NoData";} // line 3
else { $same = $check->find('div[id=domain]',0); } 
```

看看第3行！在这里，我想添加一个 if 语句来检查在我的目标页面上是否有任何具有“域”属性 id 的 div！因此，如果它为空，则意味着它没有具有“域”属性 id 的 div，因此它应该存储`NoData`在`$same`变量中。如果有一个具有“域”属性 id 的 div，那么它将获取该名称并将其存储在`$same`变量中。但`// line 3`显示一个丑陋的错误！
错误：`Fatal error: Can't use method return value in write context in C:\UwAmp\phpapps\uwamp\php\code.php on line 5`
有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:36:10.017

如果您想隐藏第一条错误消息（如果在获取时目标页面上没有数据，则会出现错误消息），那么隐藏错误消息可能是一种解决方案，
因此不需要该`if();`语句！
将此代码添加到 php 脚本中任何函数之前的第一行代码

```
error_reporting(0); 
```

# android - android- requestLocationUpdates() 在 ICS 中工作，但在 android 2.2 中不工作

> ID：14372767
> 
> 赞同：1
> 
> 时间：2013-01-17T05:33:30.137
> 
> 标签：android

在 android 2.2 中运行应用程序时，GPS 正在搜索位置，但不显示任何位置。此应用程序在 ICS 版本中运行良好。会是什么原因？

提前致谢。

这是完整的代码：-

```
package com.example.gps;

import android.app.Activity;
import android.location.Criteria;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.Location;
import android.os.Bundle;
import android.view.Window;
import android.widget.TextView;
import java.io.IOException;

public class GPSmap extends Activity implements LocationListener {

    public String mLatLongString = "";
    private String mBest;
    private TextView myLocationText;
    LocationManager mLocManager;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_LEFT_ICON);
        setContentView(R.layout.activity_gpsmap);
        myLocationText = (TextView) findViewById(R.id.myLocationText);
        getWindow().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON,
                R.drawable.ic_launcher);
        mLocManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        try {
            Criteria mCriteria = new Criteria();
            mCriteria.setAccuracy(Criteria.ACCURACY_FINE);
            mBest = mLocManager.getBestProvider(mCriteria, true);
            if (mLocManager.isProviderEnabled(mBest)) {
            }
        } catch (NullPointerException e) {
            myLocationText = (TextView) findViewById(R.id.myLocationText);
            myLocationText.setText("\n\nGPS Tracking: Disabled.");
        }
    }

    private void updateWithNewLocation(Location mLocation) {
        myLocationText = (TextView) findViewById(R.id.myLocationText);
        if (mLocation != null) {
            double mLatitude = mLocation.getLatitude();
            double mLongitude = mLocation.getLongitude();
            double mLatitudeFormatted = (double) Math.round(mLatitude * 100000) / 100000;
            double mLongitudeFormatted = (double) Math
                    .round(mLongitude * 100000) / 100000;
            mLatLongString = mLatitudeFormatted + ", " + mLongitudeFormatted;
            myLocationText.setText(mLatLongString);
        } else {
            mLatLongString = "\n\nNo Location Found.";
            myLocationText.setText(mLatLongString);
        }
    }

    /** Function to listen to location change */
    public void onLocationChanged(Location location) {
        updateWithNewLocation(location);
    }

    public void onProviderDisabled(String provider) {
        updateWithNewLocation(null);
    }

    public void onProviderEnabled(String provider) {}

    public void onStatusChanged(String provider, int status, Bundle extras) {}

    protected void onResume() {
        try {
            super.onResume();
            mLocManager.removeUpdates((android.location.LocationListener) this);
            mLocManager.requestLocationUpdates(mBest, 60000L, 0.0f, this);
        } catch (NullPointerException e) {
            myLocationText = (TextView) findViewById(R.id.myLocationText);
            myLocationText.setText("\n\nGPS Tracking: Disabled.");
        }
    }
} 
```

# regex - 如何在 sed 中显示第二个匹配的正则表达式

> ID：14372773
> 
> 赞同：2
> 
> 时间：2013-01-17T05:33:58.640
> 
> 标签：regex, sed

假设我有这个文本

```
233-CO 的代码是 45-DFG 和这个 45-GH 的主要原因
```

现在我有这个 `\s[0-9]+-\w+`匹配`233-CO`,`45-DFG`和`45-GH`.

我怎样才能只显示第三场比赛`45-GH`？

```
sed -re 's/\s[0-9]+-\w+/\3/g' file.txt 
```

`\3`第三个正则表达式匹配在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:58:25.303

是强制使用`sed`吗？您可以`grep`使用数组来做到这一点：

```
text="The code for 233-CO is the main reason for 45-DFG and this 45-GH"
matches=( $(echo "$text" | grep -o -m 3 '\s[0-9]\+-\w\+') ) # store first 3 matches in array
echo "${matches[0]} ${matches[2]}" # prompt first and third match 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:28:14.897

这可能对您有用（GNU sed）：

```
sed -r 's/\b[0-9]+-[A-Z]+\b/\n&\n/3;s/.*\n(.*)\n.*/\1/' file 
```

*   `s/\b[0-9]+-[A-Z]+\b/\n&\n/3``\n`在有问题的第三个 (n) 模式之前添加和附加（换行符）。
*   `s/.*\n(.*)\n.*/\1/`删除图案前后的文字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:59:45.143

`grep`用于匹配和打印`sed`事件：

```
$ egrep -o '\b[0-9]+-\w+' file | sed -n '1p'
233-CO

$ egrep -o '\b[0-9]+-\w+' file | sed -n '2p'
45-DFG

$ egrep -o '\b[0-9]+-\w+' file | sed -n '3p'
45-GH 
```

或者稍微`awk`传递一下使用变量打印的事件`o`：

```
$ awk -v o=1 '{for(i=0;i++<NF;)if($i~/[0-9]+-\w+/&&j++==o-1)print $i}' file
233-CO

$ awk -v o=2 '{for(i=0;i++<NF;)if($i~/[0-9]+-\w+/&&j++==o-1)print $i}' file
45-DFG

$ awk -v o=3 '{for(i=0;i++<NF;)if($i~/[0-9]+-\w+/&&j++==o-1)print $i}' file
45-GH 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:17:45.933

如果 awk 被接受，有一个 awk onliner，你给你想抓取的匹配的 No#，它给你匹配的 str。

```
awk -vn=$n '{l=$0;for(i=1;i<n;i++){match(l,/\s[0-9]+-\w+/,a);l=substr(l,RSTART+RLENGTH);}print a[0]}' file 
```

测试

```
kent$  echo $STR     #so we have 7 matches in str                                                                                                  
The code for 233-CO is the main reason for 45-DFG and this 45-GH,foo 004-AB, bar 005-CC baz 006-DDD and 007-AWK

kent$  n=6       #now I want the 6th match

#here you go:
kent$   awk -vn=$n '{l=$0;for(i=1;i<=n;i++){match(l,/\s[0-9]+-\w+/,a);l=substr(l,RSTART+RLENGTH);}print a[0]}' <<< $STR
 006-DDD 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T05:53:00.230

要查找模式的最后一次出现，您可以使用以下命令：

```
$ sed -re 's/.*\s([0-9]+-\w+).*/\1/g' file
45-GH 
```

# salesforce - Salesforce 返回“unsupported_grant_type”

> ID：14372774
> 
> 赞同：7
> 
> 时间：2013-01-17T05:34:00.083
> 
> 标签：salesforce, oauth-2.0

我们使用 Web Server Authentication Flow 实现了 OAuth 2.0。它在 10 月/ 11 月运行良好，但突然停止运行。每当我们尝试授权另一个客户端时，服务器都会返回 (400) Bad Request 和正文

```
{"error":"unsupported_grant_type","error_description":"grant type not supported"} 
```

grant_type 设置为 authorization_code 绝对有效。

OAuth 突然停止工作有什么原因吗？

* * *

这就是我们实现 OAuth 的方式：

第一个用户被定向到：[https ://login.salesforce.com/services/oauth2/authorize?response_type=code&client_id=blah.id&redirect_uri=https://domain.com/Web/Salesforce/Callback.aspx&scope=api%20refresh_token](https://login.salesforce.com/services/oauth2/authorize?response_type=code&client_id=blah.id&redirect_uri=https://domain.com/Web/Salesforce/Callback.aspx&scope=api%20refresh_token)

Salesforce 提示用户登录其帐户。

一旦用户通过 Salesforce 调用 Callback.aspx 的身份验证，Callback.aspx 通过向以下网址发出 POST 请求代表客户端请求刷新令牌：[https](https://login.salesforce.com/services/oauth2/token) ://login.salesforce.com/services/oauth2/token带有有效负载：

grant_type=authorization_code&code=blah.code&client_id=blah.Id&client_secret=11111111&redirect_uri=https://domain.com/Web/Salesforce/Callback.aspx

内容类型肯定是：application/x-www-form-urlencoded

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T00:15:20.930

经过大量摆弄提琴手后，发现 HTTP POST 有效负载中的 grant_type=authorization_code 之前有一个空格导致了问题。

有趣的是，自 7 月以来，代码库中一直存在空间，并且此问题在 1 月 14 日首次发现。Salesforce 可能修复了错误或进行了内部更改以在 grant_type=authorization_code 之前拒绝空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-31T06:25:10.943

确保您使用的是“https”而不是 http

如果您在通过终端 sfdx 命令授权组织时遇到此错误 -

```
error authenticating with auth code due to: grant type not supported 
```

为我工作“https”解决了我的授权类型不受支持的问题。

# ios - 将图像设置为iphone中的UITabbar？

> ID：14372782
> 
> 赞同：1
> 
> 时间：2013-01-17T05:34:57.997
> 
> 标签：ios, uitabbar

我是ios开发新手。我`UITabbar`以编程方式创建并将其委托设置为 self. 所有功能都很好。但我的标签栏包含三个标签栏项目。我为不同的标签栏项目提供了不同的图像。但它们都显示了另一个图像。

这是我的代码：

```
UITabbarItem item1 = [[UITabBarItem alloc] initWithTitle:@"item1" image:[UIImage imageNamed:@"imagename"] tag:1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:50:54.803

尝试这个 ：

```
UIImage *selectedImage0 = [UIImage imageNamed:@"tab-selected.png"];
UIImage *unselectedImage0 = [UIImage imageNamed:@"tab-unselected.png"];

[item1 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0]; 
```

# c# - 在 C# 中获取 Javascript Modified Dropdownlist 的选定值

> ID：14372783
> 
> 赞同：1
> 
> 时间：2013-01-17T05:34:59.093
> 
> 标签：c#, javascript, asp.net

我的项目中有一个**dropDownlist，我正在 javascript 中向其中添加项目**。现在我想**在 C# 中获取选定的索引**（在按钮单击事件上）。但我无法做到这一点，因为视图状态没有得到维护似乎是一个问题。我还有更多

```
EnableEventValidation="false" 
```

在我的页面中请告诉我如何实现此功能？现在我在隐藏字段中添加选定的值，然后在 C# 中访问该隐藏字段。它的工作，但我想要“清洁”。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:16:52.740

当 ASP.NET 执行表单 POST 时，需要将下拉选项传递到服务器并在那里重新创建以进行进一步处理。这是通过 ViewState 实现的。

我不知道这样做的任何其他方式，但是您可以做的是检索下拉列表的选定值，`Request.Form[ddlProducts.UniqueID]`如果您可以根据所选值找出项目索引，太好了！否则我认为隐藏字段是你唯一的选择

**这是一个完整的例子：**

```
<head runat="server">
    <title></title>
    <script type="text/javascript">
        window.onload = function () {
            var select = document.getElementById("ddlProducts");
            select.options[select.options.length] = new Option('Product 1', 'Value 1');
            select.options[select.options.length] = new Option('Product 2', 'Value 2');
            select.options[select.options.length] = new Option('Product 3', 'Value 3');
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:DropDownList ID="ddlProducts" runat="server">
        </asp:DropDownList>
        <asp:Button ID="btnOK" runat="server" Text="OK" OnClick="Process" />&nbsp;<span id="output"
            runat="server" />
    </div>
    </form>
</body>
</html>

protected void Process(object sender, EventArgs e)
{
    int selectedIndex = ddlProducts.SelectedIndex;
    output.InnerHtml = Request.Form[ddlProducts.UniqueID];
} 
```

# java - 如何使用 JmDNS 解析 Bonjour 域名

> ID：14372785
> 
> 赞同：8
> 
> 时间：2013-01-17T05:35:03.533
> 
> 标签：java, android, bonjour, hostname, jmdns

作为我正在开发的应用程序的一部分，我需要能够解析与 Bonjour[主机名](http://en.wikipedia.org/wiki/.local)对应的正确 IP 。

例如，给定我`jack.local`需要将其解析为`192.168.1.141`与 jack 关联的 IP 地址。

我一直在梳理 JmDNS API，我能找到的最多的是在类型和名称已知的情况下允许解析服务的方法。但是，我根本找不到任何可以解析主机名的东西。

所以我错过了什么吗？真的没有办法使用 JmDNS 解析主机名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T19:58:41.187

如果您需要使用 JmDNS 从 IP 地址中找出 LAN 中的远程主机名，您可以使用以下代码。如果您需要从主机名映射到 IP，那么您可以解析所有子网 IP 的主机名以构建缓存。如果您的本地名称解析支持本地 Bonjour 名称，您可以使用 InetAddress.getByName(hostname).getHostAddress()。

```
 final JmDNSImpl jmdns = new JmDNSImpl(null, null);
    final HostInfo hostInfo = HostInfo.newHostInfo(InetAddress.getByName("192.168.1.78"), jmdns, null);
    System.out.println("MDNS hostname (Bonjour): " + hostInfo.getName());
    System.out.println("DNS hostname: " + hostInfo.getInetAddress().getHostName());
    System.out.println("IP address: " + hostInfo.getInetAddress().getHostAddress());
    jmdns.close(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T13:02:57.740

使用 jmdns 您可以收听服务。订阅使用功能

```
jmdns = JmDNS.create();
jmdns.addServiceListener(String type, ServiceListener listener); 
```

一旦 jmdns 找到服务，`ServiceListener`就会得到通知。侦听器具有三个公共功能：

```
serviceResolved(ServiceEvent event)
serviceRemoved(ServiceEvent event)
serviceAdded(ServiceEvent event) 
```

与所有人一起获得`ServiceEvent`. 现在调用`event.getInfo().getHostAddresses()`以获取主机所有地址的数组。

如果你想解决你必须调用的服务

```
jmdns.requestServiceInfo(event.getType(), event.getName(), 1); 
```

在 serviceAdded 方法中。

看看：[快速教程](http://home.heeere.com/tech-androidjmdns.html)

# android - 中兴银河S3

> ID：14372789
> 
> 赞同：1
> 
> 时间：2013-01-17T05:35:18.387
> 
> 标签：android, qr-code, zxing, barcode-scanner

我正在构建的应用程序使用 zxing 库来扫描一维和二维条码。我目前正在 Galaxy S3 上测试我的应用程序，每次手动或通过 IntentIntegrator 库打开 zxing Barcode Scanner 应用程序时，Barcode Scanner 在成功解码图像后崩溃。我无法查看堆栈跟踪，因为错误发生在我的项目之外。

有没有人能够在他们的设备上重现此错误？还有人知道导致问题的原因或修复方法是什么吗？

如果这还不够信息，我可以尝试下载源代码，自己构建它，然后从堆栈跟踪中识别问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:01:01.637

好的，所以我下载了项目源，构建它，在我的设备上运行，发现了问题。该问题与 CaptureActivity 将信息放入系统剪贴板这一事实有关。

根据我在 Galaxy S3 上开发的经验，我遇到了三星实现剪贴板服务的多个问题，即获取剪贴板服务的请求返回 null。

无论如何，在 ZXing 的 CaptureActivity 中，您可以找到以下代码行：

```
if (copyToClipboard && !resultHandler.areContentsSecure()) {
  ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE);
  if (displayContents != null) {
    clipboard.setText(displayContents);
  }
} 
```

不幸的是，由于剪贴板变量为空，应用程序将因空指针异常而崩溃。我注释掉了这部分代码，应用程序似乎运行没有问题。我相信在这里简单地添加一个空检查应该可以防止 S3 出现问题，同时允许该功能保留在其他设备上。我还假设应用程序的其他部分不依赖于输入剪贴板的数据；但是，由于我不熟悉应用程序的所有源代码，我无法确定这一点。

我将继续尝试将 ZXing 集成到我自己的项目中，看看这个修复是否有效。

现在，如果只有某人（我假设是三星）会修复 S3 的剪贴板实现！

**更新：**

针对这个问题，我尝试了几种不同的解决方法，包括简单的空值检查和使用不推荐使用的方法（zxing 当前使用不推荐使用的剪贴板方法），但不幸的是，这些方法都不起作用。似乎不是 ClipboardManager 本身为空，而是它内部的一些成员变量为空。再一次，我猜测这是 S3 特有的，因为这是我遇到此问题的唯一手机。

不幸的是，这意味着我目前最好的选择是完全删除对剪贴板的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T00:01:52.800

查看我在[Barcode Scanner+](https://play.google.com/store/apps/details?id=com.srowen.bs.android)中的实现，我可以建议尝试更新的剪贴板 API 并尝试以下操作：

```
ClipboardManager manager = ...;
manager.setPrimaryClip(ClipData.newPlainText(null, "your text here")); 
```

这仅在您可以在以后的 Android 版本中使用更新的 API 时可用。

`NullPointerException`根据我之前的评论，如果副本不重要，您总是可以抓住并继续。为了更好地衡量，我将在源代码中的另一个位置执行此操作。

# python - 为什么我的 except 子句永远不会捕获 gevent 超时异常？

> ID：14372792
> 
> 赞同：1
> 
> 时间：2013-01-17T05:36:09.763
> 
> 标签：python, timeout, gevent

当我尝试远程登录到服务器时，代码永远不会到达`print 'never reach1'`or行。`print 'never reach2'`

```
import sys, signal
from gevent.server import StreamServer
from gevent.pool import Pool
from gevent import monkey
import gevent
from gevent import Timeout
import random

class SocketPool(object):

    def __init__(self):
        self.pool = Pool(1000)

    def listen(self, socket):
        while True:
            line = socket.recv(1024)
            print line

    def add_handler(self, socket, address):
        if self.pool.full():
            raise Exception("At maximum pool size")
        else:
            self.pool.spawn(self.listen, socket)
            gevent.spawn(self.wait).join()

    def wait(self):
        try:
            timeout = Timeout(1)
            timeout.start()
        except Timeout:
            print 'never reach1'
        except:
            print 'never reach2'

    def shutdown(self): self.pool.kill()

def signal_handler(signal, frame): sys.exit(0)

signal.signal(signal.SIGINT, signal_handler)
monkey.patch_all()
sockPool = SocketPool()
server = StreamServer(('127.0.0.1', 5000), sockPool.add_handler)
server.serve_forever() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:39:35.097

正如您从[文档](http://www.gevent.org/gevent.html#timeouts)中看到的：

```
timeout = Timeout(seconds, exception)
timeout.start()
try:
    ...  # exception will be raised here, after *seconds* passed since start() call
finally:
    timeout.cancel() 
```

因此，您的`try`块已完全执行，因此无法捕获异常。您应该放置一个`while`循环或计算之类的东西，至少需要 1 秒才能看到异常。

如果你想创建一个简单“休眠”而不使用 CPU 的方法，我建议使用 simple`time.sleep`而不是使用`Timeout`.

# javascript - javascript数组在另一个数组中重复

> ID：14372794
> 
> 赞同：1
> 
> 时间：2013-01-17T05:36:18.950
> 
> 标签：javascript, jquery, arrays, array-unique

假设我在 javascript 中有这个数组

```
ar = ['C241C12A-45FD-40FF-B26E-B879107E584D||20',
      'AB1BB99D-4396-415A-A5D8-1BEF3E0149CE||33',
      'ADE54113-53D1-4F26-A01C-48EBE37E3CE8||85',
      'DB500FD1-5988-4202-A4AA-727AC29AC67A||85',
      '8A8EAB5A-E0D2-4AA8-96A0-42686FF5EB0C||10',
      '50C29E8A-16C7-4FC2-A186-C3D65F23C627||200',
      '70C79BBB-14C7-4F34-346B-CSSSDFVFZZZ7||200'
    ]; 
```

有没有办法得到这样的数组

```
newarray1 = [
      'ADE54113-53D1-4F26-A01C-48EBE37E3CE8||85',
      'DB500FD1-5988-4202-A4AA-727AC29AC67A||85'
      ];
 newarray2 = [
      '50C29E8A-16C7-4FC2-A186-C3D65F23C627||200',
      '70C79BBB-14C7-4F34-346B-CSSSDFVFZZZ7||200'
      ]; 
```

管道符号之后的重复值，获取该值并基于该值形成一个新数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:46:35.680

```
var arraysByKey = {};
for (var i=0; i<ar.length; i++) {
    var key = ar[i].split("||")[1];
    if (key in arraysByKey)
        arraysByKey[key].push( ar[i] );
    else
        arraysByKey[key] = [ ar[i] ];
} 
```

结果 ( `arraysByKey`) 将如下所示：

```
{
    "10": [
        "8A8EAB5A-E0D2-4AA8-96A0-42686FF5EB0C||10"
    ],
    "20": [
        "C241C12A-45FD-40FF-B26E-B879107E584D||20"
    ],
    "33": [
        "AB1BB99D-4396-415A-A5D8-1BEF3E0149CE||33"
    ],
    "85": [
        "ADE54113-53D1-4F26-A01C-48EBE37E3CE8||85",
        "DB500FD1-5988-4202-A4AA-727AC29AC67A||85"
    ],
    "200": [
        "50C29E8A-16C7-4FC2-A186-C3D65F23C627||200",
        "70C79BBB-14C7-4F34-346B-CSSSDFVFZZZ7||200"
    ]
} 
```

如果您只想要存在“重复值”的数组，只需过滤结果：

```
for (var key in arraysByKey)
    if (arraysByKey[key].length < 2)
        delete arraysByKey[key]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:42:11.553

```
var keyArray = {};

for ( var counter = 0; counter < ar.length; counter++)
{
  var arValue = ar[ counter ];
  var intVal = ar.split("||")[1];

  if ( keyArray[ intVal ] == null || keyArray[ intVal ] == undefined )
  {
    keyArray[ intVal ] = new Array();
  }
  keyArray[ intVal ].push( arValue  );
}
filterDuplicates();

function filterDuplicates( keyArray )
{
  for ( key in keyArray )
  {

  keyArray[key] = keyArray[key].filter(function(elem, pos, self) {
    return self.indexOf(elem) == pos;
  }
  }
return keyArray();

) 
```

}

现在您在“keyArray”对象的每个索引值中都有一个数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T05:44:37.383

这不是最优雅的解决方案，但它会为您提供所需数组的对象。

```
dupecheck = {};
dupes = {};
$.each(ar, function () {
   var num = this.split('||')[1];

   if (typeof dupecheck[num] !== 'undefined') {
      if (typeof dupes[num] === 'undefined') {
         dupes[num] = [];
         dupes[num].push(dupecheck[num]);
      }
      dupes[num].push(this);
   }

   dupecheck[num] = this;
}); 
```

[http://jsfiddle.net/38wme/](http://jsfiddle.net/38wme/)

# php - PHP Simple HTML Dom - 标签属性

> ID：14372796
> 
> 赞同：1
> 
> 时间：2013-01-17T05:36:37.580
> 
> 标签：php, simple-html-dom

我正在尝试从内部抓取纯文本`<font size="3" color="blue">`......它没有拾取字体标签，虽然如果我做**“字体”它确实有效，3**但网站中有很多字体标签，我想要使搜索更具体。标签上可以有多个属性吗？

```
<?php

include('simple_html_dom.php');

$html = new simple_html_dom();   
$html = file_get_html('http://cwheel.domain.com/');

##### <font size="3" color="blue">Certified Genuine</font>
$element = $html->find("font[size=3][color=blue]", 0);  
echo $element-> plaintext . '<br>';
$html->clear();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:10:45.387

我不知道 Simple_html_dom。但是您尝试传递的查询似乎是一个 xpath 查询。在这种情况下，您需要将前缀属性与`@`. 此外，您需要为整个查询添加前缀，`//`以确保它搜索`font`任何深度级别的任何标签。最终查询应如下所示。

`//font[@size=3][@color=blue]`

使用 DOMDocument 和 DOMXPath[效果很好](http://3v4l.org/mJrfr)。

```
$doc = new DOMDocument();
$doc->loadHTML($html);
$xpath = new DOMXPath($doc);
$fonts = $xpath->query('font[@size="3" ][ @color="blue"]');
foreach($fonts as $font){
    echo $font->textContent. "\n";
} 
```

# php - ZF2 的“赞”按钮

> ID：14372797
> 
> 赞同：0
> 
> 时间：2013-01-17T05:36:54.847
> 
> 标签：php, zend-framework2

几周前，我开始使用 ZF2 进行一个新项目。我需要一些关于如何实现功能的指导。我想实现一个“Like”按钮（例如 FB like 按钮）这个按钮将附加到几乎所有组件，如上传的照片、视频等，老实说，我不太清楚应该如何实现ZF2。有人可以把我带到正确的轨道上。我不需要知道如何编码，只需要知道我应该走哪条路什么是最好的？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:06:45.040

好吧，由于 Facebook Button 只不过是一个带有`URL`附件的小 Javascript 片段，因此您所要做的就是构建一个`ViewHelper`获取当前`Route`或`URL`注入的。`ViewHelper`然后打印出 JS Snippet 并创建特定的like 按钮。

所需的 JavaScript 将使用`head*()`-viewHelpers 注入。

没有必要让它比这更复杂。此外，我认为没有比这更简单的解决方案了，因为按钮的位置和 displayStatus 在几乎每一页上都会有所不同。

# python - 在 Django 中保存图像 ModelForm 时出现查询错误

> ID：14372805
> 
> 赞同：0
> 
> 时间：2013-01-17T05:37:40.267
> 
> 标签：python, django, image, model

我正在尝试制作一个简单的图像上传表单，该表单一直有效，直到我尝试使用发布的数据保存名为 User_Image 的模型。我得到的错误是这样的： int() 参数必须是字符串或数字，而不是 'QueryDict' 并且我在标记为***** ******的行收到它。谢谢您的帮助。

模型.py：

```
class User_Image(models.Model):
    image = models.ImageField(upload_to="img") 
    user_profile = models.ForeignKey(UserProfile)
    title = models.CharField(max_length=10) 
```

表格.py：

```
class User_ImageForm(ModelForm):
    class Meta:
         model = User_Image 
```

视图.py：

```
def upload_image(request):
    if request.method == 'POST':
       HttpResponseRedirect("/accounts/profile")
       form = User_ImageForm(request.POST, request.FILES)
       if form.is_valid():
          im = User_Image(request.POST, request.FILES)
          ******im = im.save()
          HttpResponseRedirect("/accounts/profile")
       else:
          form = User_ImageForm()
       return render_to_response('uploadimage.html', {'form':form}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:01:48.847

为什么要直接将其保存到模型类中？尝试：

```
form = User_ImageForm(request.POST, request.FILES)
if form.is_valid():
    im = form.save()
    HttpResponseRedirect("/accounts/profile") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:13:12.407

您无需遵循以下原则。

```
im = User_Image(request.POST, request.FILES)
im = im.save() 
```

足以保存表格，

```
.....
if form.is_valid():
   form.save()
   HttpResponseRedirect("/accounts/profile")
..... 
```

# sql - 替换存储过程中的“IN”

> ID：14372813
> 
> 赞同：0
> 
> 时间：2013-01-17T05:38:44.837
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有巨大的存储过程。我只粘贴其中的一小部分。

我的查询：

```
--declare variable and Select Statement goes here
WHERE  ((v.[RoleID] IN (
         SELECT [dbo].[aspnet_UsersInRoles].roleid 
         FROM [dbo].[aspnet_UsersInRoles] 
         INNER JOIN [dbo].[aspnet_Users] 
           ON [dbo].[aspnet_Users].userid = [dbo].[aspnet_UsersInRoles].userid 
         WHERE 
           [dbo].[aspnet_Users].username = @UserName 
         UNION ALL 
         SELECT [RoleId] 
         FROM   dbo.aspnet_roles 
         WHERE loweredrolename = 'anonymous user') 
OR v.username = @UserName)) 
```

查询工作完美，但需要很长时间才能执行。条件里面有这么多`WHERE`条件`IN`。*我认为*里面的子查询`IN`需要时间。有没有办法优化这个查询并替换`IN`内部`WHERE`条件。或者建议我另一种方法来优化这种类型的查询。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:04:33.593

## 由于内部子查询的输出始终相同。您可以将其取出并将这些值插入到如下所示的临时表中，然后您可以查询临时表。所以每次它不会进入循环执行相同的

```
 `create table #temp(roleid int); `

  ` insert into #temp as (sSELECT [dbo].[aspnet_UsersInRoles].roleid 
     FROM [dbo].[aspnet_UsersInRoles] 
     INNER JOIN [dbo].[aspnet_Users] 
       ON [dbo].[aspnet_Users].userid = [dbo].[aspnet_UsersInRoles].userid 
     WHERE 
       [dbo].[aspnet_Users].username = @UserName 
     UNION ALL 
     SELECT [RoleId] 
     FROM   dbo.aspnet_roles 
     WHERE loweredrolename = 'anonymous user');`

    WHERE  ((v.[RoleID] IN ( select roleid from #temp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:44:44.877

您可以使用 IN 子句的结果创建一个临时表并加入它。这会将问题分解为两个更简单的任务。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-17T07:56:46.547

根据 Orangecrush 的建议

```
--declare variable and Select Statement goes here
WHERE  EXISTS (
         SELECT 1
         FROM [dbo].[aspnet_UsersInRoles] 
         INNER JOIN [dbo].[aspnet_Users] 
           ON [dbo].[aspnet_Users].userid = [dbo].[aspnet_UsersInRoles].userid 
         WHERE 
           [dbo].[aspnet_Users].username = @UserName 
             AND [dbo].[aspnet_UsersInRoles].roleid = v.[RoleID]
         UNION ALL 
         SELECT 1
         FROM   dbo.aspnet_roles 
         WHERE loweredrolename = 'anonymous user'
           AND dbo.aspnet_roles.roleid = v.[RoleID])
OR v.username = @UserName) 
```

# kernel - 在opencl中从主机传递到内核的结构

> ID：14372814
> 
> 赞同：1
> 
> 时间：2013-01-17T05:38:47.147
> 
> 标签：kernel, structure, opencl

我知道如何将结构从主机传递到代码，但问题是 push_back 函数（这是结构的内置函数）在 opencl 中不起作用。我的主机中有一个结构，例如

```
struct MyKey
{
   int x;
   float y;
   int scale;
   MyKey(int x, float y, int scale) : x(x), y(y), scale(scale){ }
} 
```

我在主机中为这个结构创建了一个对象，比如

```
std :: vector<MyKey> obj; 
```

我将它传递给我的内核，并将结构定义放在那里（在内核中），现在当我尝试调用 push_back 函数时，它会抛出错误。，

```
__kernel void test(ui32_t w, ui32_t h, constant struct MyKey* obj, i32_t thrd_size)
 {
         //toatl thread count is w*h
       i32_t i = get_global_id(0);
     if(i<thrd_size)
     {
          for (ui32_t i = 0; i < h; i++)
          {
               for (ui32_t j = 0; j < w; j++) 
                {
                    obj.push_back(MyKey(j,iw,h));
                }
          }
      }
  } 
```

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:34:34.027

AMD 有一个静态 C++ 内核语言扩展，它支持一些 C++ 特性，例如类。

您可以在此处找到有关它的更多信息：http: [//developer.amd.com/wordpress/media/2012/10/CPP_kernel_language.pdf](http://developer.amd.com/wordpress/media/2012/10/CPP_kernel_language.pdf)

来自文档：内核代码：

```
Class Test
{
    setX (int value);
    private:
    int x;
}
__kernel foo (__global Test* InClass, ...)
{
    If (get_global_id(0) == 0)
    InClass->setX(5);
} 
```

主机代码：

```
Class Test
{
    setX (int value);
    private:
    int x;
}
MyFunc ()
{
    tempClass = new(Test);
    ... // Some OpenCL startup code – create context, queue, etc.
    cl_mem classObj = clCreateBuffer(context, CL_USE_HOST_PTR,
    sizeof(Test),&tempClass, event);
    clEnqueueMapBuffer(...,classObj,...);
    tempClass.setX(10);
    clEnqueueUnmapBuffer(...,classObj,...); //class is passed to the Device
    clEnqueueNDRange(..., fooKernel, ...);
    clEnqueueMapBuffer(...,classObj,...); //class is passed back to the Host
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T08:00:14.513

OpenCL 的内核语言基于 C99，因此不可能有任何 C++ 特性。

此外，您的代码在概念层面上是错误的：即使您声明`obj`为`MyKey`结构向量，`obj`内核代码中的参数仍然只是指向`MyKey`结构的指针。

# ios - AFNetworking 在会话中存储登录用户

> ID：14372817
> 
> 赞同：1
> 
> 时间：2013-01-17T05:39:14.437
> 
> 标签：ios, session, cookies, afnetworking

使用 AFNetworking，我能够成功登录而没有任何问题并存储会话。一旦我停止在 xcode 中调试，模拟器仍然打开，但会进入 iphone 主屏幕。当我从 xcode 再次运行该应用程序时，登录会话消失了，用户为零，花了几个小时但不知道为什么。我的问题是停止调试与登录用户的会话有关吗？使用 setAuthorizationHeaderWithUsername 是否与任何事情有关。

```
 @property (retain, nonatomic) NSDictionary* user; 
```

登录：

```
 [[API sharedInstance] commandWithParams:params
                               onCompletion:^(NSDictionary *json) {
                                   //handle the response

                                   NSDictionary* res = [[json objectForKey:@"result"] objectAtIndex:0];

                                   if ([json objectForKey:@"error"]==nil && [[res objectForKey:@"IdUser"] intValue]>0) {
                                       //success
                                       [[API sharedInstance] setUser:res];
                                   }
       }]; 
```

接口：

```
+(API*)sharedInstance
{
   static API *sharedInstance = nil;
   static dispatch_once_t oncePredicate;
   dispatch_once(&oncePredicate, ^{
      sharedInstance = [[self alloc] initWithBaseURL:[NSURL URLWithString:kAPIHost]];
});

return sharedInstance;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:45:40.317

您需要将 cookie 序列化为文件或其他存储。

看到[这个答案](https://stackoverflow.com/a/13227567/333392)：

# ios - 无法从 iOS 中的文档目录播放电影

> ID：14372819
> 
> 赞同：0
> 
> 时间：2013-01-17T05:40:02.510
> 
> 标签：ios, ios6, mpmovieplayercontroller, nsdata, nsdocumentdirectory

我有这个函数可以将 NSData 写入文档字典 -

```
- (void)writeData
{
    NSString *str = @"http://labs.widespace.com/resources/banner/ikea/verkligheten/video.m4v";

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:str];
    NSLog(@"%@",path);
    NSLog(@"About to Write Data");
    NSData* data0 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:str]];
    [data0 writeToFile:path atomically:YES];
    NSLog(@"Writting  Data Completed");
} 
```

后来我阅读了这些数据并尝试使用 MPMoviePlayerController 播放视频，但不幸的是这不会播放 -

```
- (void)readData
{
    NSString *str = @"http://labs.widespace.com/resources/banner/ikea/verkligheten/video.m4v";
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:str];
    NSURL* url = [[NSURL alloc] initFileURLWithPath:path];    
    NSLog(@"url:%@",url);

    NSError *error = nil;
    BOOL isReacahble = [url checkResourceIsReachableAndReturnError:&error];
    NSLog(@"isReachable :%i,%@",isReacahble,error);

    BOOL fileExist =  [[NSFileManager defaultManager] fileExistsAtPath:path];

    if(fileExist)
    {
        NSLog(@"File Exist in path");
    }
    else
    {
        NSLog(@"NO File Exist");
    }

    MPMoviePlayerController *moviePlayer=[[MPMoviePlayerController alloc] initWithContentURL:url];
    [moviePlayer prepareToPlay];
    NSLog(@"movie player:%@",moviePlayer);
    [moviePlayer setControlStyle: MPMovieControlStyleFullscreen];
    [moviePlayer.view setFrame:CGRectMake(0, 0,320, 480)];
    [self.view addSubview:moviePlayer.view];
    moviePlayer.shouldAutoplay = YES;   
    [moviePlayer play];
} 
```

当我尝试播放时，它显示以下错误-

```
2013-01-17 11:21:07.067 VideoCheck[338:907] [MPAVController] Autoplay: Disabling autoplay for pause
2013-01-17 11:21:07.068 VideoCheck[338:907] [MPAVController] Autoplay: Disabling autoplay
2013-01-17 11:21:07.090 VideoCheck[338:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2013-01-17 11:21:07.091 VideoCheck[338:907] movie player:<MPMoviePlayerController: 0x21078250>
2013-01-17 11:21:07.093 VideoCheck[338:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2013-01-17 11:21:07.102 VideoCheck[338:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-17 11:21:07.113 VideoCheck[338:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 0
2013-01-17 11:21:07.114 VideoCheck[338:907] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
2013-01-17 11:21:07.115 VideoCheck[338:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-17 11:21:07.121 VideoCheck[338:907] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2013-01-17 11:21:07.149 VideoCheck[338:907] [MPAVController] Autoplay: Enabling autoplay 
```

有人可以运行代码并提供一些关于这里发生的事情的信息吗？请有人帮助我。我正在使用 iOS 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:12:32.763

在您的`wrieData`方法中，不要将`URL`名称作为文件提供，而是仅提供`video`. 像

```
NSString *path = [documentsDirectory stringByAppendingPathComponent:[str lastPathComponent]]; 
```

并在`readData`方法上做同样的事情。

# java - 如何在java中捕获屏幕的脏部分？

> ID：14372820
> 
> 赞同：1
> 
> 时间：2013-01-17T05:40:05.293
> 
> 标签：java, screen-capture, dirtyread, dirtyrectangle

我正在开发 RDP 应用程序。服务器必须发送屏幕的脏部分，客户端必须更新图像的那部分。我可以使用 Robot 类发送桌面的总屏幕为

```
BufferedImage bufferedImage = robot.createScreenCapture(new Rectangle(0,0,Toolkit.getDefaultToolkit().getScreenSize().width,Toolkit.getDefaultToolkit().getScreenSize().height)); 
```

如果我想将屏幕的脏部分发送给客户端，那么如何识别桌面屏幕的脏区域并捕获该屏幕。

请告诉我在java中识别屏幕脏区的过程。

# java - 在长长的文件列表中查找最近修改的 3 个文件

> ID：14372822
> 
> 赞同：5
> 
> 时间：2013-01-17T05:40:14.547
> 
> 标签：java, file, sorting, memory, memory-management

我有一个文件列表，我想对其进行排序并提取最后修改的前 3 个文件。

约束：由于下游应用程序的兼容性问题，我无法使用 Java 7

## 我目前的选择

### 解决方案 1

```
File[] files = directory.listFiles();    
Arrays.sort(files, new Comparator<File>(){
    public int compare(File f1, File f2)
    {
        return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified());
    } }); 
```

### 解决方案 2

```
public static void sortFilesDesc(File[] files) {
  Arrays.sort(files, new Comparator() {
    public int compare(Object o1, Object o2) {
      if ((File)o1).lastModified().compareTo((File)o2).lastModified()) {
        return -1;
      } else if (((File) o1).lastModified() < ((File) o2).lastModified()) {
        return +1;
      } else {
        return 0;
      }
    }
  });
} 
```

## 问题

上述两种解决方案需要更多时间来执行和内存。我的文件列表包含大约 300 个 tar 文件，每个文件大小为 200MB。所以它消耗更多的时间和内存。

有什么方法可以有效地处理这个问题吗？

每个比较操作都使用一个具有高内存的文件对象，有没有办法释放内存并有效地处理它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T06:11:27.860

你可以做得更快。

Arrays.sort(...) 使用“快速排序”，它需要**~ n * ln(n)**操作。

此示例仅对整个数组进行一次迭代，即**~ n**次操作。

```
public static void sortFilesDesc(File[] files) {        
    File firstMostRecent = null;
    File secondMostRecent = null;
    File thirdMostRecent = null;
    for (File file : files) {
        if ((firstMostRecent == null)
                || (firstMostRecent.lastModified() < file.lastModified())) {
            thirdMostRecent = secondMostRecent;
            secondMostRecent = firstMostRecent;             
            firstMostRecent = file;
        } else if ((secondMostRecent == null)
                || (secondMostRecent.lastModified() < file.lastModified())) {
            thirdMostRecent = secondMostRecent;
            secondMostRecent = file;
        } else if ((thirdMostRecent == null)
                || (thirdMostRecent.lastModified() < file.lastModified())) {
            thirdMostRecent = file;
        }
    }
} 
```

在少量文件上，您不会看到太大的差异，但即使对于数十个文件，差异也会很大，对于更大的数字 - 戏剧性。

检查算法的代码（请输入正确的文件结构）：

```
package com.hk.basicjava.clasload.tests2;

import java.io.File;
import java.util.Date;

class MyFile extends File {

    private long time = 0; 

    public MyFile(String name, long timeMills) {
        super(name);
        time = timeMills;
    }
    @Override
    public long lastModified() {
        return time;
    }
}

public class Files {

    /**
     * @param args
     */
    public static void main(String[] args) {

        File[] files = new File[5]; 
        files[0] = new MyFile("File1", new Date(2013,1,15, 7,0).getTime());
        files[1] = new MyFile("File2", new Date(2013,1,15, 7,40).getTime());
        files[2] = new MyFile("File3", new Date(2013,1,15, 5,0).getTime());
        files[3] = new MyFile("File4", new Date(2013,1,15, 10,0).getTime());
        files[4] = new MyFile("File5", new Date(2013,1,15, 4,0).getTime());
        sortFilesDesc(files);
    }

    public static void sortFilesDesc(File[] files) {        
        File firstMostRecent = null;
        File secondMostRecent = null;
        File thirdMostRecent = null;
        for (File file : files) {
            if ((firstMostRecent == null)
                    || (firstMostRecent.lastModified() < file.lastModified())) {
                thirdMostRecent = secondMostRecent;
                secondMostRecent = firstMostRecent;             
                firstMostRecent = file;
            } else if ((secondMostRecent == null)
                    || (secondMostRecent.lastModified() < file.lastModified())) {
                thirdMostRecent = secondMostRecent;
                secondMostRecent = file;
            } else if ((thirdMostRecent == null)
                    || (thirdMostRecent.lastModified() < file.lastModified())) {
                thirdMostRecent = file;
            }
        }
        System.out.println("firstMostRecent : " + firstMostRecent.getName());
        System.out.println("secondMostRecent : " + secondMostRecent.getName());
        System.out.println("thirdMostRecent : " + thirdMostRecent.getName());
    } 

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:47:47.603

你必须检查每个文件的 lastModified，你不能改变它。您不需要做的是对所有元素进行排序以获得前 3 名。如果您可以使用 Guava，则可以使用[Ordering.greatestOf](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Ordering.html#greatestOf%28java.lang.Iterable,%20int%29)（它使用了一个很好的算法）：

```
Ordering<File> ordering = Ordering.from( new Comparator(){
        public int compare(File f1, File f2)
        {
            return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified());
        });

List<File> max3 = ordering.greatestOf(Arrays.asList(directory.listFiles()), 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:51:35.913

您的问题是检索上次修改日期是一项相对昂贵的操作，因为它涉及操作系统逻辑。因此，如果您不介意获取最新的最新值，您可以将文件包装在可比较的类中。

```
public class LastModifiedFile implements Comparable<LastModifiedFile> {

    private final File file;
    private final Date lastModified;

    public LastModifiedFile(File file) {
        this.file = file;
        lastModified = file.lastModified();
    }

    public int compareTo(LastModifiedFile other) {
        return lastModified.compareTo(other.lastModified);
    }
} 
```

请注意，在排序期间更改上次修改日期将导致许多排序算法出现未定义的行为。如果最后修改日期发生更改，Java 7s Tim Sort 实现将抛出异常，因此比较会导致不同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T05:50:47.097

我支持解决方案 1，但有一些改进

```
Arrays.sort(files, new Comparator<File>() {
        public int compare(File f1, File f2) {
            long d1 = f1.lastModified();
            long d2 = f2.lastModified();
            return d1 > d2 ? 1 : d1 < d2 ? -1 : 0;
        }
    }); 
```

避免由于 Long.valueOf(long) 而创建不必要的对象。

`File`不保存/读取任何文件数据，而只保存文件路径，没有性能/内存问题。这里唯一耗时的操作是从文件系统中读取修改时间，这是无法避免的。

# actionscript-3 - AS3 - 删除 swf 时提供的 DisplayObject 必须是调用者错误的子对象

> ID：14372823
> 
> 赞同：1
> 
> 时间：2013-01-17T05:40:22.503
> 
> 标签：actionscript-3, flash

请帮助我收到此错误，并且无法使用之前所有类似主题的帖子中描述的任何其他方法来解决。

实际上，我在这里将 swf myMap 加载到另一个 swf 上。swf 加载工作正常，但是当尝试从阶段删除它时，我得到上述错误...

```
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
    at flash.display::DisplayObjectContainer/removeChild()
    at actions.classes::MapInteractionManager/unloadSWF()
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent() 
```

这是我的as3代码...

```
 var _swfLoader:Loader;
    var _swfContent:MovieClip;

    loadSWF("myMap.swf");  //loading the swf file here

    function loadSWF(path:String):void {
       var _req:URLRequest = new URLRequest();
       _req.url = path;

       _swfLoader = new Loader();
       setupListeners(_swfLoader.contentLoaderInfo);

       _swfLoader.load(_req);
    }

    function setupListeners(dispatcher:IEventDispatcher):void {
       dispatcher.addEventListener(Event.COMPLETE, addSWF);
       dispatcher.addEventListener(ProgressEvent.PROGRESS, preloadSWF);
    }

    function preloadSWF(event:ProgressEvent):void {
       var _perc:int = (event.bytesLoaded / event.bytesTotal) * 100;
       // swfPreloader.percentTF.text = _perc + "%";
    }

    function addSWF(event:Event):void {
       event.target.removeEventListener(Event.COMPLETE, addSWF);
       event.target.removeEventListener(ProgressEvent.PROGRESS, preloadSWF);

       _swfContent = event.target.content;
       _swfContent.addEventListener("close", unloadSWF);

       main.stage.addChild(_swfContent);
    }

    function unloadSWF(event:Event):void {
       _swfLoader.unloadAndStop();

    main.stage.removeChild(_swfContent);  //getting error when trying to remove swf
       _swfContent = null;
    }

    and close event is as,
    _swfContent.dispatchEvent(new Event("close")); 
```

请帮忙，我卡住了。

这里有一些更新，我将代码更新为，

```
function unloadSWF(event:Event):void
{
     if(main.stage.contains(_swfContent))
           main.stage.removeChild(_swfContent);
} 
```

现在错误消失了，因为它没有进入 if 循环！！！？？？

但我仍然可以在舞台上看到 swf:( 请帮助

解决了...感谢大家的帮助...

ToddBFisher 确实解决了它:)

只需将 _swfLoader 添加到舞台，加载它，然后将关闭侦听器附加到它，而不是使用 _swfContent。去掉中间人，它起作用了......希望这有帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:09:33.067

我记得`.unloadAndStop();`做了一堆清理类型的事情，你之前就打电话了。清理的一部分可能是将其从显示列表中删除。

`removeChild()`在调用之前尝试调用`unlodaAndStop()`

```
function unloadSWF(event:Event):void {
    stage.removeChild(_swfContent);  //getting error when trying to remove swf
    _swfLoader.unloadAndStop();
    _swfContent = null;
} 
```

**编辑**

尝试简单地`_swfLoader`将. 剪掉中间人，看看会发生什么。`close``_swfContent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:26:45.943

`main.stage.removeChild`已经设置 `_swfContent`为 null 因为`removeChild`被触发所以删除行 _`swfContent = null`可能会解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:08:08.117

该错误意味着孩子已经被删除（或从未添加）尝试注释掉

_swfLoader.unloadAndStop();

看看它是否有效。

# c# - 如何在 C# 中以编程方式知道 FTP 服务器的默认路径

> ID：14372828
> 
> 赞同：0
> 
> 时间：2013-01-17T05:41:09.790
> 
> 标签：c#, ftp

我能够使用 C# 代码 (TcpClient) 成功连接到 FTP 服务器。在我对 FTP 服务器执行任何操作之前，我想知道服务器上设置的默认路径是什么，即我的默认路径是**/home**。不同的服务器可能会有所不同。因此，在对 FTP 服务器执行任何操作之前，我想以编程方式了解 C# 中的默认路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:46:23.480

根据 ftp 协议，可以发送 PWD 命令。但是，此路径可能与主机文件系统无关。ftp 服务器可以将文件存放在一个专用路径中，并将其视为/。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:48:15.667

发送命令“密码”。它将为您提供该位置的完整路径。

# c# - Web 服务在服务器端不起作用

> ID：14372839
> 
> 赞同：0
> 
> 时间：2013-01-17T05:42:00.243
> 
> 标签：c#, asp.net, .net, web-services, asmx

我创建了一个名为的 bservice `test.asmx`，如下所示：

```
[WebService(Namespace = "http://insforia.com/Webservices/StockTickers/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[WebMethod(Description = "Using stock symbol gets delayed stock information from Yahoo.", EnableSession = false)]
public string[] GetQuote()
{
    string username = Session["username"].ToString();
    string company = "BSE-100.BO+COALINDIA.BO+TCS.BO+WIPRO.BO+SBIN.NS+MNM.BO+RCOM.BO+TATASTL.BO+GMRINFRA.BO+ICICIBANK.BO";
    string stockcodes = "sl1c6";

    string url = "http://in.finance.yahoo.com/d/quotes.csv?s=" + company + "&f=" + stockcodes;

    var webRequest = HttpWebRequest.Create(url);
    var webResponse = webRequest.GetResponse();

    using (StreamReader sr = new StreamReader(webResponse.GetResponseStream()))
    {
        buffer = sr.ReadToEnd();
    }

    var buffer = buffer.Replace("\"", "");
    buffer = buffer.Replace("\r\n", ",");
    var bufferList = buffer.Split(new char[] { ',' });

    return bufferList;
} 
```

我在我的 aspx 页面中调用这个 Web 服务，如下所示：

```
private string userid = "admin";

protected void Page_Load(object sender, EventArgs e)
{
     Session["username"] = userid;
     test oo = new test();
     bufferList = oo.GetQuote();
} 
```

问题是它在我的本地主机中完美运行，但是当我将它上传到服务器时，它给了我一个错误，它找不到`test`

要查看确切的错误，这是链接：

```
http://insforia.com/Webservices/StockTickers/stockmain.aspx 
```

我不明白该怎么办？为什么会这样。我知道这是一个非常愚蠢的问题，但我从昨天开始尝试这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:25:46.200

尽量不要使用会话。发送用户名的参数；

```
public string[] GetQuote(string UserName)
{
...
    return bufferList;
} 
```

# python - Python数学抽认卡程序

> ID：14372841
> 
> 赞同：4
> 
> 时间：2013-01-17T05:42:07.980
> 
> 标签：python

我是编程新手，我正在尝试自学 Python。我已经开始写一个小抽认卡脚本。我的想法是用户遇到问题并被提示提交答案。如果答案不正确，则提示用户再试一次，依此类推，直到输入正确答案。到目前为止它按计划工作，但我不知道如何在输入正确答案后重新开始。我想我还需要包括一些允许用户退出游戏的方法，如果你想提出一个我会很感激的建议，我也不知道该怎么做。:-)

PS - 如果我的代码很蹩脚，我愿意接受建议。但我主要是在寻找原始问题的答案。这是我第一次涉足编码领域，所以我相信随着时间的推移，我会在编写更优雅的代码方面做得更好。

谢谢！

```
def add():
   from random import randint
   a = randint(1, 5)
   b = randint(1, 5)
   c = a + b
   print a,  '+',  b
   print 'What\'s the sum?'
   d = input()
   while d != c:
     print 'Wrong, try again!'
     d = input()
   else:
     print "Correct!" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:48:09.853

首先，使用`raw_input`代替，`input`然后将其转换为整数。不过，要回答您的问题，请像这样询问用户输入：

```
play_again = raw_input('Play again? (y/n)')
if play_again.lower().startswith('y'):
    add()
return 
```

`input`是不安全的，因为它被评估为本机代码，因此熟练的个人可能能够侵入系统。`raw_input`将输入视为字符串，您可以调用`int()`结果。

然而，这只适用于 Python 2。对于 Python 3，`input`很好 - 它取代了 Python 2 `raw_input`。

此外，函数中存在递归——尽管没有人可能会持续到足以使堆栈溢出，尽管对于其他应用程序，迭代将是最好的方法。

将其转换为迭代循环是微不足道的（也是推荐的）。将除了导入之外的所有内容放在一个`while True`循环中。然后在循环结束时，添加以下代码：

```
play_again = raw_input('Play again? (y/n)')
if play_again.lower().startswith('y'):
    continue
break 
```

您当然可以检查`'n'`而不是`'y'`删除`continue`，用一个简单的`break`语句替换它。

请注意，您还可以将`if`语句替换为可读性较差的语句：

```
if raw_input('Play again? (y/n)').lower().startswith('y'):  # or 'n' 
```

并摆脱中间`play_again`变量。尽管我不会为了可压缩性而牺牲可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T18:19:48.617

在 Python 3 中（用于输入）：

我稍微修改了您的代码（添加了“（）”用于打印，并添加了 int 以便比较工作。没有检查您是否输入了非 int）

```
def add():
   from random import randint
   a = randint(1, 5)
   b = randint(1, 5)
   c = a + b
   print (a,  '+',  b)
   d = int(input('What\'s the sum?'))
   while d != c:
     print ('Wrong, try again!')
     print (a,  '+',  b,' ? ')
     d = int(input())
   else:
     print ("Correct!")

while True:
    add()
    if input('Continue (O/N) ? ') == 'N':
        break 
```

我还在您的循环中打印了添加内容，因为许多错误的答案可以清除最初的问题。

如前所述，初始循环执行您的函数，直到您键入“N”。如果用户想退出，您可以在添加循环中添加正确答案。

# apache - 如何为 SSL 页面配置 mod_pagespeed

> ID：14372847
> 
> 赞同：8
> 
> 时间：2013-01-17T05:42:38.650
> 
> 标签：apache, tomcat, mod-pagespeed

我们有一个网站，例如[http://www.acb.com](http://www.acb.com)，它指向一个硬件负载平衡器，假设负载平衡两个专用服务器。每个服务器都运行 apache 作为前端，并使用 mod_proxy 将请求转发到 tomcat。

我们网站的某些页面需要 SSL，例如[https://www.abc.com/login](https://www.abc.com/login)或[https://www.abc.com/checkout](https://www.abc.com/checkout)

SSL 在硬件负载平衡器处终止。

当我配置 mod_pagespeed 时，它会压缩、最小化和合并 css 文件，并使用绝对 url [http://www.abc.com/css/merged.pagespeedxxx.css](http://www.abc.com/css/merged.pagespeedxxx.css)而不是相对 url /css/merged.pagespeedxxx.css 重写它们。

它适用于非 ssl 页面，但是当我导航到诸如[https://www.abc.com/login](https://www.abc.com/login)之类的 ssl 页面时，所有 css 和 js 文件都被 chrome 等浏览器阻止，因为它们的绝对 url 没有使用 ssl。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T09:06:59.083

检查本[文档](https://developers.google.com/speed/docs/mod_pagespeed/domains)和[本](https://developers.google.com/speed/docs/mod_pagespeed/https_support)`https`文档中的字符串。

您应该在问题中向我们展示您当前的`ModPagespeedMapOriginDomain`&&`ModPagespeedDomain`设置。

根据我从这些方面的理解：

> origin_specified_in_html 可以指定 https 但 origin_to_fetch_from 只能指定 http，例如
> 
> `ModPagespeedMapOriginDomain http://localhost https://www.example.com`
> 
> 该指令允许服务器在不需要 SSL 证书来获取资源的情况下接受**www.example.com的 https 请求 -****事实上，这是 mod_pagespeed 可以服务 https 请求的唯一方式，因为目前它不能使用 https 来获取资源**。例如，给定上述映射，并假设 Apache 配置为支持 https，mod_pagespeed 将获取和优化使用 访问`https://www.example.com`的资源，从 获取资源`http://localhost`，这可以是相同的 Apache 进程或不同的服务器进程。

还有这些：

> mod_pagespeed 为通过 https 提供内容的网站提供有限的支持。有两种机制可以配置 mod_pagespeed 来服务 https 请求：
> 
> *   使用 ModPagespeedMapOriginDomain 将 https 域映射到 http 域。
> *   使用 ModPagespeedLoadFromFile 将本地可用目录映射到 https 域。

解决方案将是这样的（或带有 的`ModPagespeedLoadFromFile`）

```
ModPagespeedMapOriginDomain http://localhost https://www.example.com 
```

**但是**，对您来说真正的问题是**apache 不会直接接收 HTTPS 请求**，因为硬件负载均衡器会自行处理它。所以 mod-pagespeed 输出过滤器甚至不知道它是为 SSL 域请求的。而当它修改 HTML 内容时，可能应用域重写，它无法处理 https 的情况。

所以......一个**解决方案**（未经测试）将在 apache 服务器上使用另一个虚拟主机，如果你愿意，仍然是 HTTP，专用于 https 处理。所有与 https 相关的 url ( `/login`, `/checkout`,...) 都会被硬件负载均衡器重定向到这个特定的域名。比方说`http://secure.acb.com`。此名称仅在负载均衡器和前端 apache 之间使用（当然 apache 应该将对该 VH 的访问限制为仅对负载均衡器）。

然后在这些虚拟主机中`http://secure.acb.com`mod_pagespeed 将被配置为从外部将域重写为`https://www.example.com`. 就像是：

```
ModPagespeedMapOriginDomain http://secure.example.com https://www.example.com 
```

最后，最终用户请求是`https://www.example.com/login`，负载均衡器管理 HTTPS，与 apache 对话`http://secure.example.com`，页面结果仅包含对`https://www.example.com/*`资产的引用。现在，当使用 https 域请求请求这些资产时，您仍然会遇到提供这些资产的问题。因此，硬件负载均衡器应该允许 https 域中的所有这些资产 url 并将它们发送到`http://secure.abc.com`虚拟主机（或任何其他静态 VH）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T21:30:49.127

这听起来像您自己配置了重写的 URL `http://www.abc.com/css/merged.pagespeedxxx.css`- 因此：尝试使用协议相对 URL，例如删除`http:`并仅声明`//www.abc.com/css/merged.pagespeedxxx.css`- 这将使用与请求嵌入页面相同的协议。

URL 的标准化但相对未知的功能之一

# java - Zk 从选定的选项卡中删除事件监听器

> ID：14372849
> 
> 赞同：0
> 
> 时间：2013-01-17T05:42:49.710
> 
> 标签：java, zk

我有 2 个选项卡，一个是父选项卡，另一个是子选项卡。我创建了父选项卡并使用 onClose 事件动态地将侦听器放入它，然后创建子选项卡。实际上，我希望当用户单击 Tab 的关闭按钮时，他无法关闭并获取消息，因此我将 event.stopPropogation() 用于处理关闭事件。创建子选项卡后，应从父选项卡中删除事件侦听器。但侦听器不会从父选项卡中删除。因为我正在使用 removeEventlistener 但它也不起作用。

我第一次调用一个方法，在该方法中我将事件侦听器添加到父选项卡。

```
 mainTab.getSelectedTab().addEventListener(Events.ON_CLOSE,
                new EventListener<Event>() {
                    public void onEvent(Event event) throws Exception {

    event.stopPropogation();
        showWarning(message);
    return;

}
                }); 
```

然后在创建所有子选项卡后，我必须删除此侦听器。我正在使用...

```
mainTab.getSelectedTab().removeEventListener(Events.ON_CLOSE,
                    new EventListener<Event>() {
                        public void onEvent(Event event) throws Exception {

    }
                    }); 
```

此侦听器不在此选项卡上工作，但是当我打开新选项卡（主选项卡的兄弟）时，不会调用侦听器。

如何从当前选项卡中删除监听器？

谁能解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:30:19.503

感谢您的示例，这很有帮助。这里的问题在于`removeEventListener`函数的使用。函数的第二个参数，一个`EventListener`实例，实际上是将被删除的*确切*事件侦听器。您可以在 ZK 源代码中看到这一点；该`removeEventListener`函数[在第 2140 行](https://github.com/zkoss/zk/blob/master/zk/src/org/zkoss/zk/ui/AbstractComponent.java#L2140)`AbstractComponent`实现，它检查已知的函数参数。`EventListener``equals`

这是一个有效的修复：

```
public class Controller extends SelectorComposer<Window> {

 private static final EventListener<Event> EVENT_STOPPER = new EventListener<Event>() {
   public void onEvent(Event event) throws Exception {
        event.stopPropagation();
        System.out.println("Stopped propagation of " + event);
   }
 };

 @Wire
 private Tabbox mainTab;

 @Override
 public void doAfterCompose(Window comp) throws Exception {
   super.doAfterCompose(comp);
   addCloseEventStopper();
 }

 @Listen(Events.ON_CLICK + " = #addTabsButton")
 public void addTabsButtonClicked() {
   removeCloseEventStopper();
   addTabs();
 }

 private void addCloseEventStopper() {
   mainTab.getSelectedTab().addEventListener(Events.ON_CLOSE, EVENT_STOPPER);
 }

 private void removeCloseEventStopper() {
   mainTab.getSelectedTab().removeEventListener(Events.ON_CLOSE, EVENT_STOPPER);
 }

 private void addTabs() {
   Tabs tabs = mainTab.getTabs();
   tabs.appendChild(new Tab("Tab Two"));
   tabs.appendChild(new Tab("Tab Three"));
 }

} 
```

这里的关键是在和`EventListener`中使用了相同的实例。`addEventListener``removeEventListener`

注意这里我们使用了一个`private` `static` `final`内部类，这只是保持对`EventListener`. 根据您的用例，还有其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:51:21.457

Basically you can call tab.setClosable(false) to remove the 'x' (close button), if you want make a tab not closable with the 'x', you can stop the close action from client side with setWidgetOverride

a zul sample below, you can move setWidgetOverride to anywhere that you can receive instance of that tab

```
<zk>
    <tabbox>
        <tabs>
            <tab label="unclosable tab" closable="true">
                <attribute name="onCreate">
                    self.setWidgetOverride("_doCloseClick", "function(evt) { return; }");
                </attribute>
            </tab>
        </tabs>
    </tabbox>
</zk> 
```

# python - 输入python中的引号

> ID：14372852
> 
> 赞同：3
> 
> 时间：2013-01-17T05:43:19.460
> 
> 标签：python

使用 Python3 时，做一些简单的事情

```
x=input("Enter your name: ")

print (x) 
```

并试图运行它，用户将不得不输入他们的名字为“史蒂夫”，而不仅仅是史蒂夫。

有没有办法输入引号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T05:46:52.563

我认为你错了。在 Python 3 中，您*不需要*引号：

```
localhost-2:~ $ python3.3
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 01:25:11) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> x = input("Enter your name:")
Enter your name:Steve
>>> x
'Steve' 
```

你会在 Python 2 的旧时代，因为`input`基本上`eval`是你给它的：

```
>>> x = input("Enter your name:")
Enter your name:Steve
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 1, in <module>
NameError: name 'Steve' is not defined
>>> x = input("Enter your name:")
Enter your name:"Steve"
>>> x
'Steve' 
```

所以你会`raw_input`改用：

```
>>> x = raw_input("Enter your name:")
Enter your name:Steve
>>> x
'Steve' 
```

但在 Python 3 中，`input`以前`raw_input`是这样，因此不需要引号。

# php - 在选择框中显示 Mysql 表字段值

> ID：14372860
> 
> 赞同：9
> 
> 时间：2013-01-17T05:44:23.000
> 
> 标签：php, html, mysql

我想在选择框中显示 Mysql 表 Filed 值。我尝试了以下代码来显示。但它通常在回显函数中显示指定的字段值，而不是在选择框中。我不知道我错在哪里。

```
 $con = mysql_connect("localhost","root","root");
 $db = mysql_select_db("Time_sheet",$con);
 $get=mysql_query("SELECT Emp_id FROM Employee");
 while($row = mysql_fetch_assoc($get))
{
echo ($row['Emp_id']."<br/>");
}

<html>
<body>
<form>
 <select> 
<option value = "<?php echo($row['Emp_id'])?>" ><?php echo($row['Emp_id']) ?></option>
</select>
</form>
</body>
</html> 
```

此外，字段值必须按升序显示。如何达到..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T05:56:34.650

```
<?php
$con = mysql_connect("localhost","root","root");
 $db = mysql_select_db("Time_sheet",$con);
 $get=mysql_query("SELECT Emp_id FROM Employee ORDER BY Emp_id ASC");
$option = '';
 while($row = mysql_fetch_assoc($get))
{
  $option .= '<option value = "'.$row['Emp_id'].'">'.$row['Emp_id'].'</option>';
}
?>
<html>
<body>
<form>
 <select> 
<?php echo $option; ?>
</select>
</form>
</body>
</html> 
```

PS：在旁注中，请停止使用`mysql_*`函数。看看[**这个**](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)线程的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T05:55:30.827

你可以像这样轻松地做到这一点

```
$con = mysql_connect("localhost","root","root");
$db = mysql_select_db("Time_sheet",$con);
$get=mysql_query("SELECT Emp_id FROM Employee");

<html>
<body>
<form>
    <select> 
    <option value="0">Please Select</option>
        <?php
            while($row = mysql_fetch_assoc($get))
            {
            ?>
            <option value = "<?php echo($row['Emp_id'])?>" >
                <?php echo($row['Emp_id']) ?>
            </option>
            <?php
            }               
        ?>
    </select>
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:55:48.243

您必须使用 while 循环在选择框中显示选项。尝试这个 ...

```
 $con = mysql_connect("localhost","root","root");
 $db = mysql_select_db("Time_sheet",$con);
 $get=mysql_query("SELECT Emp_id FROM Employee order by Emp_id");

 <html>
 <body>
  <form>
    <select>
    <?php
     while($row = mysql_fetch_assoc($get))
     {
    ?>
      <option value="<?php echo $row['Emp_id']; ?>"><?php echo $row['Emp_id']; ?></option>
    <?php
     }
    ?>
    </select>
  </form>
 </body>
 </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:02:53.790

```
<?php
  $con = mysql_connect("localhost","root","root");
  $db = mysql_select_db("Time_sheet",$con);
  $get=mysql_query("SELECT Emp_id FROM Employee");
  ?>
 <html>
 <body>
    <form>
        <select> 
         <?php
             while($row = mysql_fetch_assoc($get)){?>
                <option value = "<?php echo($row['Emp_id'])?>" ></option>
                <?php } ?>
        </select>
    </form>
    </body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-24T09:55:40.477

```
<?php
 $con = mysql_connect("localhost","root","root");
 $db = mysql_select_db("Time_sheet",$con);
 $res=mysql_query("SELECT Emp_id FROM Employee");
?>

<html>
 <body>
  <form>
   <select>
    <?php
      while ($row = $res->fetch_assoc()) 
      {
        echo '<option value=" '.$row['id'].' "> '.$row['name'].' </option>';
      }
    ?>
    </select>
   <form>
  </body>
 </html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-22T22:08:55.550

有一些提示可以压缩此任务的代码块——太多了，无法在接受的答案下发表评论。

测试代码：

```
if (!$con = new mysqli("localhost", "root", "root", "Time_sheet")) {
    echo "Database Connection Error: " , $con->connect_error;  // don't show actual error in "production" stage
} elseif (!$result = $con->query("SELECT Emp_id FROM Employee ORDER BY Emp_id")) {
    echo "Syntax Error: " , $con->error;  // don't show actual error in "production" stage
} else {
    echo "<select>";
    foreach ($result as $row) {
        echo "<option>{$row['Emp_id']}</option>";
    }
    echo "</select>";
} 
```

*   该`if`行在一个步骤中声明`$con`并检查它是否存在错误的返回值。
*   永远不要向您的用户提供原始连接或查询错误。在开发过程中没关系，但您不希望陌生人访问您的服务器将提供的关键/信息性错误。这是安全的基本最佳实践。
*   该`elseif`行在一个步骤中声明`$result`并检查它是否存在错误的返回值。
*   该`else`块将处理由于成功的 SELECT 查询而生成的零行或多行数据。
*   mysqli 结果是“可遍历的”，这意味着您可以使用它进行迭代，`foreach()`并通过关联键直接访问行数据。 [PHP 手册参考](http://ca1.php.net/manual/en/class.mysqli-result.php) [另一个 StackOverflow 帖子](https://stackoverflow.com/a/25745738/2943403)
*   通过插值将数组元素写入文字字符串时，将元素包裹在花括号中是一种很好的做法（尽管并非总是必要的）。这通常会在 IDE 中触发有用的突出显示，并确保数组后面的字符不会意外地与变量名本身耦合。
*   如果值与开始和结束标记 ( )之间的文本不同，您只需要在标记内写入`value`属性。如果省略了冗余属性，表单提交和 javascript 实现都将相同。`<option>``<option>the text in here</option>``value`
*   如果您确实希望在选择字段而不是文本中提交不同的值，则语法如下所示：

    ```
    echo "<option value=\"{$row['Emp_id']}\">{$row['Emp_name']}</option>"; 
    ```

*   如果您想`selected`根据预先存在的变量（例如`$selected_id`）在其中一个选项上编写属性，它可以如下所示：

    ```
    echo "<option" , ($row['Emp_id'] == $selected_id ? " selected" : "") , ">{$row['Emp_name']}</option>"; 
    ```

*   如果你想结合前面的两个过程，它可以是这样的：

    ```
    echo "<option value=\"{$row['Emp_id']}\"" , ($row['Emp_id'] == $selected_id ? " selected" : "") , ">{$row['Emp_name']}</option>"; 
    ```

# jquery - 将通用列表转换为 Json for Datatables 网格

> ID：14372873
> 
> 赞同：1
> 
> 时间：2013-01-17T05:45:06.860
> 
> 标签：jquery, asp.net-mvc, json, datatable, datatables

我在我的 MVC 应用程序中使用 Datatables 网格来显示数据。我不知道如何将包含通用列表的 Var 转换为 JSON，而 JSON 又将成为 Datatables 的输入。

这是数据表的 JSON 格式：

```
return Json(new 
{
  aaData = new[] {
    new [] { "Trident", "Internet Explorer 4.0", "Win 95+", "4", "X" },
    new [] { "Gecko", "Firefox 1.5", "Win 98+ / OSX.2+", "1.8", "A" },
    new [] { "Webkit", "iPod Touch / iPhone", "iPod", "420.1", "A" },
  }
}, JsonRequestBehavior.AllowGet); 
```

但上面的一个是硬编码的，我在运行时得到通用列表，如何迭代和更改为上面的 JSON 格式。

这是我的代码。

```
public void GetReport()
        {
            var ReportData = _homeService.GetReportDatafromDB();

            if (ReportData .Count > 0)
            {
               //Dont no how to convert for JSON data format here
            }
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:00:32.123

使用 foreach 语法，它看起来像这样：

```
var aaData = new List<string[]>();
foreach(var l in ReportData){
    aaData.Add(new [] {l.Property1, l.Property2, l.Property3, l.Property4});
}

var thisIsYourResult = aaData.ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:06:46.097

这是如何获得所需格式的示例：

为了便于练习，让我们使用“模型”作为数据对象类：

```
public class Model{
    public string Property1{get;set;}
    public string Property2{get;set;}
    public string Property3{get;set;}
    public string Property4{get;set;}
} 
```

然后你只需要检查它并创建你想要的 json 结构：

```
var ReportData = new List<Model>{
new Model{Property1 = "Trident", Property2 = "Internet Explorer 4.0", Property3 = "Win 95+", Property4 = "4"},
new Model{Property1 = "Gecko", Property2 = "Firefox 1.5", Property3 = "Win 98+ / OSX.2+", Property4 = "1.8"}
};

var aaData = ReportData.Select(l => new [] {l.Property1, l.Property2, l.Property3, l.Property4} ).ToArray(); 
```

# c# - 如何在 C# 程序的面板中控制另一个应用程序？

> ID：14372876
> 
> 赞同：0
> 
> 时间：2013-01-17T05:45:24.547
> 
> 标签：c#, .net, windows, winforms, exe

我一直在阅读很多关于如何在 WinForm 项目中托管 exe 应用程序的内容。我已经阅读了这些文章并在面板中成功运行了 Windows Journal 应用程序。 [如何在我的 C# 程序的面板中运行另一个应用程序？](https://stackoverflow.com/questions/758494/how-can-i-run-another-application-within-a-panel-of-my-c-sharp-program) [http://www.codeproject.com/Articles/9123/Hosting-EXE-Applications-in-a-WinForm-project](http://www.codeproject.com/Articles/9123/Hosting-EXE-Applications-in-a-WinForm-project)

但是，我还打算让 Windows Journal 在单击按钮时打开一个现有的 .jnt 文件。并且当应用程序关闭时，自动保存文件。是否可以控制 Journal 应用程序从其父 winform 应用程序打开和保存文件？

谢谢

# asp.net - 使用 DbContext 更改跟踪信息

> ID：14372877
> 
> 赞同：0
> 
> 时间：2013-01-17T05:45:35.483
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework-5, dbcontext

在阅读有关[N-Tiered Applications](http://msdn.microsoft.com/en-us/magazine/ee321569.aspx#id0090007)的文章时，我发现了有关并发令牌和更改跟踪信息的信息：

> 另一个需要理解的重要概念是，虽然默认生成的实体支持序列化，但它们的更改跟踪信息存储在不支持序列化的 ObjectStateManager（ObjectContext 的一部分）中。

我的问题是三个方面：

1.  使用时有没有相同的情况`DbContext`？
2.  如果与数据库的唯一交互是在语句中的`Repository`类中`using`，那么当程序离开`using`语句时关闭数据库连接是否会消除任何用于更改跟踪的选项？
3.  这可以作为/与并发令牌一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:02:59.570

1.  是的。`DbContext`只是包装器，它通过属性（returns ）`ObjectContext`公开更改跟踪信息，并通过调用方法（returns ）公开特定实体的更改跟踪信息。`ChangeTracker``DbChangeTracker``Entry``DbEntityEntry<T>`
2.  是的。关闭上下文将删除所有更改跟踪信息。
3.  并发令牌和更改跟踪是两个完全不同的概念。更改跟踪告诉上下文当您调用时它必须对数据库执行哪些操作`SaveChanges`。它跟踪您在将实体加载到当前上下文实例后对实体所做的更改。并发令牌解决数据库中的乐观并发 => 它验证另一个进程/线程/用户/上下文实例没有更改您的上下文将在`SaveChanges`.

# r - 过滤函数的简单示例，特别是递归选项

> ID：14372880
> 
> 赞同：27
> 
> 时间：2013-01-17T05:45:40.363
> 
> 标签：r, filter, time-series

我正在为`filter`R 中的函数寻找一些简单的（即 - 没有数学符号，长形式的可重复代码）示例我想我对卷积方法有一定的了解，但我坚持推广递归选项。我已经阅读并与各种文档进行了斗争，但帮助对我来说有点不透明。

以下是我到目前为止发现的示例：

```
# Set some values for filter components
f1 <- 1; f2 <- 1; f3 <- 1; 
```

我们继续：

```
# basic convolution filter
filter(1:5,f1,method="convolution")
[1] 1 2 3 4 5

#equivalent to:
x[1] * f1 
x[2] * f1 
x[3] * f1 
x[4] * f1 
x[5] * f1 

# convolution with 2 coefficients in filter
filter(1:5,c(f1,f2),method="convolution")
[1]  3  5  7  9 NA

#equivalent to:
x[1] * f2 + x[2] * f1
x[2] * f2 + x[3] * f1
x[3] * f2 + x[4] * f1 
x[4] * f2 + x[5] * f1 
x[5] * f2 + x[6] * f1

# convolution with 3 coefficients in filter
filter(1:5,c(f1,f2,f3),method="convolution")
[1] NA  6  9 12 NA

#equivalent to:
 NA  * f3 + x[1] * f2 + x[2] * f1  #x[0] = doesn't exist/NA
x[1] * f3 + x[2] * f2 + x[3] * f1
x[2] * f3 + x[3] * f2 + x[4] * f1 
x[3] * f3 + x[4] * f2 + x[5] * f1 
x[4] * f3 + x[5] * f2 + x[6] * f1 
```

现在是我伤害我可怜的小脑干的时候。我设法在这篇文章中使用信息找出最基本的例子：[https ://stackoverflow.com/a/11552765/496803](https://stackoverflow.com/a/11552765/496803)

```
filter(1:5, f1, method="recursive")
[1]  1  3  6 10 15

#equivalent to:

x[1]
x[2] + f1*x[1]
x[3] + f1*x[2] + f1^2*x[1]
x[4] + f1*x[3] + f1^2*x[2] + f1^3*x[1]
x[5] + f1*x[4] + f1^2*x[3] + f1^3*x[2] + f1^4*x[1] 
```

`filter = c(f1,f2)`有人可以为带有and的递归版本的卷积示例提供与我上面类似的代码`filter = c(f1,f2,f3)`吗？

答案应该与函数的结果相匹配：

```
filter(1:5, c(f1,f2), method="recursive")
[1]  1  3  7 14 26

filter(1:5, c(f1,f2,f3), method="recursive")
[1]  1  3  7 15 30 
```

# 编辑

使用@agstudy 的简洁答案完成：

```
> filter(1:5, f1, method="recursive")
Time Series:
Start = 1 
End = 5 
Frequency = 1 
[1]  1  3  6 10 15
> y1 <- x[1]                                            
> y2 <- x[2] + f1*y1      
> y3 <- x[3] + f1*y2 
> y4 <- x[4] + f1*y3 
> y5 <- x[5] + f1*y4 
> c(y1,y2,y3,y4,y5)
[1]  1  3  6 10 15 
```

和...

```
> filter(1:5, c(f1,f2), method="recursive")
Time Series:
Start = 1 
End = 5 
Frequency = 1 
[1]  1  3  7 14 26
> y1 <- x[1]                                            
> y2 <- x[2] + f1*y1      
> y3 <- x[3] + f1*y2 + f2*y1
> y4 <- x[4] + f1*y3 + f2*y2
> y5 <- x[5] + f1*y4 + f2*y3
> c(y1,y2,y3,y4,y5)
[1]  1  3  7 14 26 
```

和...

```
> filter(1:5, c(f1,f2,f3), method="recursive")
Time Series:
Start = 1 
End = 5 
Frequency = 1 
[1]  1  3  7 15 30
> y1 <- x[1]                                            
> y2 <- x[2] + f1*y1      
> y3 <- x[3] + f1*y2 + f2*y1
> y4 <- x[4] + f1*y3 + f2*y2 + f3*y1
> y5 <- x[5] + f1*y4 + f2*y3 + f3*y2
> c(y1,y2,y3,y4,y5)
[1]  1  3  7 15 30 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-17T06:44:05.650

在递归的情况下，我认为没有必要用 xi 来展开表达式。“递归”的关键是用前一个 y 来表达右手表达式。

我更喜欢从过滤器尺寸的角度来思考。

过滤器尺寸=1

```
y1 <- x1                                            
y2 <- x2 + f1*y1      
y3 <- x3 + f1*y2 
y4 <- x4 + f1*y3 
y5 <- x5 + f1*y4 
```

过滤器大小 = 2

```
y1 <- x1                                            
y2 <- x2 + f1*y1      
y3 <- x3 + f1*y2 + f2*y1    # apply the filter for the past value and add current input
y4 <- x4 + f1*y3 + f2*y2
y5 <- x5 + f1*y4 + f2*y3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:58:44.510

这是我发现对可视化递归过滤的实际作用最有帮助的示例：

```
(x <- rep(1, 10))
# [1] 1 1 1 1 1 1 1 1 1 1

as.vector(filter(x, c(1), method="recursive"))  ## Equivalent to cumsum()
#  [1]  1  2  3  4  5  6  7  8  9 10
as.vector(filter(x, c(0,1), method="recursive"))
#  [1] 1 1 2 2 3 3 4 4 5 5
as.vector(filter(x, c(0,0,1), method="recursive"))
#  [1] 1 1 1 2 2 2 3 3 3 4
as.vector(filter(x, c(0,0,0,1), method="recursive"))
#  [1] 1 1 1 1 2 2 2 2 3 3
as.vector(filter(x, c(0,0,0,0,1), method="recursive"))
#  [1] 1 1 1 1 1 2 2 2 2 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T06:28:50.210

使用递归，您的“过滤器”序列是序列的先前总和或输出值的加性系数。`filter=c(1,1)`你的意思是“在我的序列 x 中取第 i 个分量，并将上一步的结果加到它的 1 倍和前一步的结果的 1 倍” 。这里有几个例子来说明

我认为滞后效应符号如下所示：

```
## only one filter, so autoregressive cumsum only looks "one sequence behind"
> filter(1:5, c(2), method='recursive')
Time Series:
Start = 1 
End = 5 
Frequency = 1 
[1]  1  4 11 26 57

1 = 1
2*1 + 2 = 4
2*(2*1 + 2) + 3 = 11
...

## filter with lag in it, looks two sequences back
> filter(1:5, c(0, 2), method='recursive')
Time Series:
Start = 1 
End = 5 
Frequency = 1 
[1]  1  2  5  8 15

1= 1
0*1 + 2 = 2
2*1 + 0*(0*1 + 2) + 3 = 5
2*(0*1 + 2) + 0 * (2*1 + 0*(0*1 + 2) + 3) + 4 = 8
2*(2*1 + 0*(0*1 + 2) + 3) + 0*(2*(0*1 + 2) + 0 * (2*1 + 0*(0*1 + 2) + 3) + 4) + 5 = 15 
```

你看到那里的累积模式了吗？换个说法。

```
1 = 1
0*1 + 2 = 2
2*1 + 0*2 + 3 = 5
2*2 + 0*5 + 4 = 8
2*5 + 0*8 + 5 = 15 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T23:36:41.017

我花了一个小时阅读这篇文章，下面是我的总结，与 Matlab 比较

**符号**：Matlab 中的命令 = R 中的命令

```
filter([1,1,1], 1, data) = filter(data, [1,1,1], method = "convolution") ; but the difference is that the first 2 elements are NA 

filter(1, [1,-1,-1,-1], data) = filter(data, [1,1,1], method = "recursive") 
```

如果你对 DSP 有所了解，那么递归用于 IIR，卷积用于 FIR

# c# - CodedUI 测试上的性能工具

> ID：14372887
> 
> 赞同：2
> 
> 时间：2013-01-17T05:46:39.600
> 
> 标签：c#, visual-studio-2010, selenium-webdriver, performance-testing

目前我注意到我的自动化测试（CodedUI）有时运行得有点慢。我想在它们运行 VS2010 时对它们运行性能分析工具。我曾尝试使用 Red Gate 的 ANTs Profiler，但对我应该将其附加到哪个进程（或其他？）感到困惑。

我最接近的方法是从命令行启动 Profiler 并调用 Mstest.exe 作为进程参数运行一些测试。这只会返回我 VS 方法的性能，而不是我自己的测试代码。

```
//e.g
Profile.exe /e:"Mstest /testcontainer:Tests\bin\debug\CodedUITests.dll /test:Login /unique" /csv:"C:\testing\results.csv" 
```

[我从这里](http://www.red-gate.com/supportcenter/content/ANTS_Performance_Profiler/help/7.4/APP_CommandLineWalkthrough)和[这里](http://www.matthewbussa.com/2010/10/how-to-run-coded-ui-tests-from-command.html)构建了这个命令。

**有谁知道用 cpu/内存分析器（本地或其他方式）启动一组测试然后读取结果的干净方法？**

*可用机器按优先顺序排列：Windows 7/XP/Server 2008 R2*
*可以从：VS2010 运行，或作为构建的一部分（TFS/实验室管理）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T06:00:52.680

在进一步阅读之后，我发现我需要**检测我的二进制文件**，以便分析器在运行时了解我的方法。我使用[VSInstr 执行](http://msdn.microsoft.com/en-us/library/ms182402.aspx)此操作，它将测试 dll 转换为检测的。然后，当我使用上面的命令行运行探查器时，探查器工作。

IE

*   跑：`VSinstr.exe Your.Tests.dll`
*   打开蚂蚁探查器。
*   选择 Mstest.exe 作为 .Net 可执行文件。
*   将测试项目 bin\Debug 文件夹设置为工作目录。
*   在争论的地方：
    `/testcontainer:C:\...\YOURTests\bin\debug\Your.Tests.dll /test:LoginTest`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T14:58:26.520

如果您非常确信您的测试不会以某种令人讨厌的方式爆炸，您还可以添加`/noisolation`到您传递给 mstest 的参数中。也就是说，你的命令会说，

`Profile.exe /e:"Mstest" /args:"/testcontainer:Tests\bin\debug\CodedUITests.dll /test:Login /unique /noisolation" /csv:"C:\testing\results.csv" /data:c:\testing\moodilymooh`

另一种想法是，您可以添加`/data`到 profile 命令以使其输出一个 app[0-9]+results 文件，您可以从 GUI 中使用该文件。

# php - 用php查询xpath

> ID：14372895
> 
> 赞同：0
> 
> 时间：2013-01-17T05:47:46.030
> 
> 标签：php, xpath

我编写了以下 php 代码来从此 xml 中提取节点信息：

```
<sioctBoardPost rdfabout="http//boards.ie/vbulletin/showpost.php?p=67075">
  <rdftype rdfresource="http//rdfs.org/sioc/ns#Post" />
  <dctitle>hib team</dctitle>
  <siochas_creator>
    <siocUser rdfabout="http//boards.ie/vbulletin/member.php?u=497#user">
      <rdfsseeAlso rdfresource="http//boards.ie/vbulletin/sioc.php?sioc_type=user&amp;sioc_id=497" />
    </siocUser>
  </siochas_creator>
  <dctermscreated>1998-04-25T213200Z</dctermscreated>
  <sioccontent>zero, those players that are trialing 300 -400 pingers? umm..mager lagg and even worse/</sioccontent>
</sioctBoardPost>

<?php
$xml = simplexml_load_file("boards.xml");
$products[0] = $xml->xpath("/sioctBoardPost/sioccontent");
$products[1] = $xml->xpath("/sioctBoardPost/dctermscreated");
$products[2] = $xml->xpath("/sioctBoardPost/@rdfabout");
print_r($products);
  ?> 
```

这给出了以下输出：

```
Array ( 
[0] => Array ( [0] => SimpleXMLElement Object ( [0] => zero, those players that are trialing for hib team, (hpb's) most of them are like 300 -400 pingers? umm..mager lagg and even worse when they play on uk server's i bet/ ) ) [1] => Array ( [0] => SimpleXMLElement Object ( [0] => 1998-04-25T213200Z ) ) [2] => Array ( [0] => SimpleXMLElement Object ( [@attributes] => Array ( [rdfabout] => http//boards.ie/vbulletin/showpost.php?p=67075 ) ) ) 
) 
```

但我只需要节点内容作为输出，即没有 Array([0] => Array 等。

输出应该是这样的：

```
zero, those players that are trialing for hib team, (hpb's) most of them are like 300 -400 pingers? umm..mager lagg and even worse when they play on uk server's i bet

1998-04-25T213200Z

http//boards.ie/vbulletin/showpost.php?p=67075 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:01:17.720

您可以使用`current()`仅获取每个 XPath 结果的第一个元素（这是一个数组），然后使用`(string)`强制转换来获取节点内容：

```
$products[0] = (string)current($xml->xpath("/sioctBoardPost/sioccontent"));
$products[1] = (string)current($xml->xpath("/sioctBoardPost/dctermscreated"));
$products[2] = (string)current($xml->xpath("/sioctBoardPost/@rdfabout"));
print_r($products); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:53:02.580

正如您所观察到的，该`xpath()`方法返回一个匹配节点的数组，因此您需要处理返回数组的元素。我相信这应该适用于这种情况：

```
$xml = simplexml_load_file("boards.xml");
$products[0] = $xml->xpath("/sioctBoardPost/sioccontent")[0];
$products[1] = $xml->xpath("/sioctBoardPost/dctermscreated")[0];
$products[2] = $xml->xpath("/sioctBoardPost/@rdfabout")[0];
print_r($products); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:06:50.370

这应该可以满足您的需求...

```
foreach ($products as $product) { // iterate through the $products array
    print $product[0]->nodeValue  // output the node value of the SimpleXMLElement Object
} 
```

# ruby-on-rails - 在 Rails 和 Node 之间共享会话数据？

> ID：14372903
> 
> 赞同：3
> 
> 时间：2013-01-17T05:48:33.903
> 
> 标签：ruby-on-rails, node.js

主要问题是：我可以在 Node 中读取 Rails 会话数据吗？

更多细节：

我有一个用 Ruby on Rails 编写的项目。它可以工作，但我想添加它并最终使用 NodeJS 替换它。两者都在同一台服务器上运行，只是在不同的端口上。

到目前为止，RoR 将提供所有 HTML 文件（并继续处理现有功能），然后我将通过 AJAX 连接到节点服务器。Node 暂时只会提供 JSON。

问题是，如何在两者之间使用会话变量？更具体地说，我可以在 Node 中访问 RoRs 会话变量吗？大多数情况下，我只需要知道哪个用户登录了。

如果重要的话，我正在运行 Rails 2.3.5、Ruby 1.8.7 和 Node 0.8.17。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:03:37.237

我自己没有尝试过完全相同的东西，但是，我们做了类似的事情，但使用的是 Sinatra 和 Java。

我不会评论您在应用程序设计方面的方法，但是，如果您不介意在 Rails 应用程序中使用 Memcached 会话存储，是的，这是可能的。[Heroku Doc](https://devcenter.heroku.com/articles/memcache)上解释了使用 Ruby 应用程序配置 Memcached

在 Node 应用程序中，您可以使用 Memcached Client（如[3rd-Eden）](https://github.com/3rd-Eden/node-memcached)并从 memcache 访问会话变量

您必须将 rails 生成的会话 ID 显式传递给 Node.js。

# iphone - 检测 IOS 设备类型

> ID：14372906
> 
> 赞同：11
> 
> 时间：2013-01-17T05:49:03.880
> 
> 标签：iphone, ios, objective-c, ipad

我从这里找到了解决方案： [使用 iPhone SDK 确定设备（iPhone、iPod Touch）](https://stackoverflow.com/questions/448162/determine-device-iphone-ipod-touch-with-iphone-sdk)

从链接中，它建议使用库[https://gist.github.com/1323251](https://gist.github.com/1323251)

但显然图书馆已经过时了。我在列表中找不到 iPhone 5 和新 iPad 等。

有谁知道我怎样才能找到完整和更新的列表？

非常感谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-17T05:50:46.947

您可以轻松检测到`iphone`，`iphone5`并`iPad`具有以下条件：-

```
 if([[UIDevice currentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPhone)
 {
     if ([[UIScreen mainScreen] bounds].size.height == 568.0f)
     {

     }
     else
     {
         //iphone 3.5 inch screen
     }
 }
 else
 {
        //[ipad]
 } 
```

我的回答：- [检测设备类型](https://stackoverflow.com/questions/13139430/objective-c-how-detect-iphone-iphone5-and-ipad/13139561#13139561)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-02T07:12:53.447

[这是https://gist.github.com/1323251](https://gist.github.com/1323251)的更新版本。当新设备发布时，我会保持更新。

[https://github.com/froztbytes/UIDeviceHardware](https://github.com/froztbytes/UIDeviceHardware)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-05-09T14:26:55.140

这工作得很好：

```
if([UIDevice currentDevice].userInterfaceIdiom==UIUserInterfaceIdiomPad) {
    NSLog(@"IPAD");
}else{
     NSLog(@"IPHONE");
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-08-17T08:06:51.687

只需添加到@Mohammad Kamran Usmani 答案即可。更具体的 iPhone 类型：

```
@import UIKit;

//Check which iPhone it is
double screenHeight = [[UIScreen mainScreen] bounds].size.height;
if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
{
    NSLog(@"All iPads");
} else if (UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone)
{
    if(screenHeight == 480) {
        NSLog(@"iPhone 4/4S");
        smallFonts = true;
    } else if (screenHeight == 568) {
        NSLog(@"iPhone 5/5S/SE");
        smallFonts = true;
    } else if (screenHeight == 667) {
        NSLog(@"iPhone 6/6S");
    } else if (screenHeight == 736) {
        NSLog(@"iPhone 6+, 6S+");
    } else {
        NSLog(@"Others");
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-17T05:51:50.550

使用以下代码：

```
#import <sys/utsname.h>

- (NSString *)machineName
{
    struct utsname systemInfo;
    uname(&systemInfo);
    NSString *temp = [NSString stringWithCString:systemInfo.machine
                                        encoding:NSUTF8StringEncoding];

    if ([temp rangeOfString:@"iPod"].location != NSNotFound)
    {
        return @"iPod";
    }

    if ([temp rangeOfString:@"iPad"].location != NSNotFound)
    {
        return @"iPad";
    }

    if ([temp rangeOfString:@"iPhone"].location != NSNotFound)
    {
        return @"iPhone";
    }

    return @"Unknown device";
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-17T05:54:29.783

您可以使用以下代码

```
if(screenSize.width==2048 && screenSize.height==1536)
{
   LetterParams.DeviceType=1;//IPadRetina
}
else if(screenSize.width==2048/2 && screenSize.height==1536/2)
{
   LetterParams.DeviceType=2;//IPad Non-Retina
}
else if(screenSize.width==1136 && screenSize.height==640)
{
   LetterParams.DeviceType=3;//IPhoneRetina
}
else
{
   LetterParams.DeviceType=4;//IPhone & Ipod
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-13T06:29:38.147

我和其他人一起在**GitHub 上**维护代码，所以请从那里获取最新的代码。我们不断在列表中添加新设备。

**目标-C**：[GitHub/DeviceUtil](https://github.com/InderKumarRathore/DeviceUtil)

**斯威夫特**：[GitHub/DeviceGuru](https://github.com/InderKumarRathore/DeviceGuru)

```
#include <sys/types.h>
#include <sys/sysctl.h>

- (NSString*)hardwareDescription {
    NSString *hardware = [self hardwareString];
    if ([hardware isEqualToString:@"iPhone1,1"]) return @"iPhone 2G";
    if ([hardware isEqualToString:@"iPhone1,2"]) return @"iPhone 3G";
    if ([hardware isEqualToString:@"iPhone3,1"]) return @"iPhone 4";
    if ([hardware isEqualToString:@"iPhone4,1"]) return @"iPhone 4S";
    if ([hardware isEqualToString:@"iPhone5,1"]) return @"iPhone 5";
    if ([hardware isEqualToString:@"iPod1,1"]) return @"iPodTouch 1G";
    if ([hardware isEqualToString:@"iPod2,1"]) return @"iPodTouch 2G";
    if ([hardware isEqualToString:@"iPad1,1"]) return @"iPad";
    if ([hardware isEqualToString:@"iPad2,6"]) return @"iPad Mini";
    if ([hardware isEqualToString:@"iPad4,1"]) return @"iPad Air WIFI";
    //there are lots of other strings too, checkout the github repo
    //link is given at the top of this answer

    if ([hardware isEqualToString:@"i386"]) return @"Simulator";
    if ([hardware isEqualToString:@"x86_64"]) return @"Simulator";

    return nil;
}

- (NSString*)hardwareString {
    size_t size = 100;
    char *hw_machine = malloc(size);
    int name[] = {CTL_HW,HW_MACHINE};
    sysctl(name, 2, hw_machine, &size, NULL, 0);
    NSString *hardware = [NSString stringWithUTF8String:hw_machine];
    free(hw_machine);
    return hardware;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-18T19:31:30.873

这是我提出的一种方法，主要针对屏幕测量功能的关键设备。这是确定您需要什么的快速方法。这将检测到 iPhone 5 和第 5 代 iPod touch。

```
typedef enum{
   iPadRetina,iPadNoRetina,iPhoneiPod35InchRetina,iPhoneiPod35InchNoRetina,iPhoneiPod4InchRetina}DeviceType;

-(void)yourCustomFunctionThatNeedsToKnowDeviceType
{
    NSLog(@"device type = %i",[self getDeviceType]);

    switch ([self getDeviceType])
    {
        case iPadRetina:
        {
            NSLog(@"This device is one of the following: iPad 3, iPad 4");
            break;
        }
        case iPadNoRetina:
        {
            NSLog(@"This device is one of the following: iPad 1, iPad 2, iPad mini");
            break;
        }
        case iPhoneiPod35InchRetina:
        {
            NSLog(@"This device is one of the following: iPhone 4/4S or iPod Touch 4th Generation");
            break;
        }
        case iPhoneiPod35InchNoRetina:
        {
            NSLog(@"This device is one of the following: iPhone 3G/3GS or iPod Touch 3rd Generation");
            break;
        }
        case iPhoneiPod4InchRetina:
        {
            NSLog(@"This device is one of the following: iPhone 5 or iPod Touch 5th Generation");
            break;
        }
    }
}

-(int)getDeviceType
{
    // Get the ratio of the device's screen (height/width)
    CGFloat screenRatio = [UIScreen mainScreen].bounds.size.height/[UIScreen mainScreen].bounds.size.width;

    // Initialize return value to negative value
    DeviceType type = -1;
    if(screenRatio > 1.5)
    {
        /*
            4.0-Inch Screen
            This implies that the device is either an iPhone 5 or a 5th generation iPod
            Retina display is implicit
         */
        type = iPhoneiPod4InchRetina;
    }
    else
    {
        /*
            Device must be iPad 1/2/3/4/mini or iPhone 4/4S or iPhone 3G/3GS
         */

        // Take a screenshot to determine if the device has retina display or not
        UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, 0.0);
        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *scaleCheckImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
        {
            /*
                Device must be iPad 1/2/3/4/mini
             */
            if(scaleCheckImage.scale == 1)
            {
                // iPad 1/2/mini (No Retina)
                type = iPadNoRetina;
            }
            else if(scaleCheckImage.scale == 2)
            {
                // iPad 3/4 (Retina)
                type = iPadRetina;
            }
        }
        else
        {
            /*
                Device must be iPhone 4/4S or iPhone 3G/3GS or iPod Touch 3rd Generation or iPod Touch 4th Generation
             */
            if(scaleCheckImage.scale == 1)
            {
                // iPhone 3G/3GS or iPod Touch 3rd Generation (No Retina)
                type = iPhoneiPod35InchNoRetina;
            }
            else if(scaleCheckImage.scale == 2)
            {
                // iPhone 4/4S or iPod Touch 4th Generation (Retina)
                type = iPhoneiPod35InchRetina;
            }
        }
    }
    return type;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-07T05:40:46.623

```
if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)  
{
    NSLog(@"All iPads");  
}  
else
{
    else if (UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone)
    {
        if( screenHeight > 480 && screenHeight < 667 )
        {
            NSLog(@"iPhone 5/5s/6");
        }
        else if ( screenHeight > 480 && screenHeight < 736 )
        {
            NSLog(@"Other iPhones Resizable");
        }
        else if ( screenHeight > 480 )
        {
            NSLog(@"iPhone 6 +");
        }
        else
        {
            NSLog(@"iPhone 4s and others");
        }
    } 
```

# iphone - 使用 UIWebview 处理网站界面

> ID：14372907
> 
> 赞同：0
> 
> 时间：2013-01-17T05:49:36.437
> 
> 标签：iphone, ios, ipad

我有一个网站，我想在 UIWebView 中显示它。但是该网站有一个界面选项`standard, basic`和`mobile`，但默认是标准的，我可以将此默认更改为移动设备，如果可以，我该怎么做。

请找到下面的图片以便更好地理解 ![在此处输入图像描述](../Images/246cd85cf1c0ba79acb519ca1a56181b.png)

请告诉我。如果我可以将 UIWebView 中的默认界面更改为移动界面。

# jquery - 使用 jQuery 代码在中途选择文本节点

> ID：14372909
> 
> 赞同：2
> 
> 时间：2013-01-17T05:49:44.293
> 
> 标签：jquery, text

好的，伙计们，我有这个代码

```
var text = $('.css .cont_code code');
 text.contents().text(function() {
   $(this).each(function() {
   var cssC = "background , background-color , width , height , float , margin , margin-left , margin-right , margin-top , margin-bottom , contents , border , !important"
  if (text === "cssC")
 { 
  $(this).wrap('<span class="stylesC" />');
  }
})
}) 
```

它抓取所有文本节点行，而不是我在`var cssC =`代码中提供的文本，任何帮助将不胜感激从未使用 jQuery 抓取 textNodes 并且对如何编写实际的 javascript 知之甚少，就像`getElementById`我不流利那样，也不 jQuery 真的老实说。

基本上我要做的是获取我放置在 var cssC 中的某些文本字段，然后如果发现将其包装在一个跨度中，则`span class="stylesC" />`结果应该如下所示

[http://jsfiddle.net/yzpCE/](http://jsfiddle.net/yzpCE/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:08:14.153

[http://jsfiddle.net/YxjnR/1/](http://jsfiddle.net/YxjnR/1/)

您不必在这里做太多的 jQuery 工作，但是`cssC`当您找到包含在跨度中的相同字符串的单词时，我会将单词拆分，然后在 html 字符串上进行替换。

```
html.replace(new RegExp(this, 'g'), '<span class="stylesC">' + this + '</span>'); 
```

# objective-c - 目标 C 中的同步失败

> ID：14372910
> 
> 赞同：-5
> 
> 时间：2013-01-17T05:49:45.810
> 
> 标签：objective-c, sup

当我使用 SUP 2.1.3 作为后端在目标 C 中运行我的程序时。我的例外是

```
** Terminating app due to uncaught exception 'SUPPersistenceException', reason: 'SUPPersistenceException from synchronize: -- SUPSynchronizeException: Sync failed: -857 (ERROR) %1:[-10244] The MobiLink server has encountered an error and the s' 
```

为什么会发生这种异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:01:07.137

您可以发布在连接期间执行的代码吗？

从我的角度来看，您在同步期间失去了连接

# c# - 跨页发布asp.net不返回值

> ID：14372911
> 
> 赞同：0
> 
> 时间：2013-01-17T05:49:48.787
> 
> 标签：c#, asp.net

我有一个网络表单

```
<asp:TextBox ID="txtname" runat="server" Text="Post on Next Page"/>
<asp:Button ID="btn1" runat="server" PostBackUrl="~/Page2.aspx" Text="Post on next page" /> 
```

现在`Page2.aspx`代码隐藏如下：

```
protected void Page_Load(object sender, EventArgs e)
{
   if(PreviousPage!=null && PreviousPage.IsCrossPagePostBack)
   {
       TextBox txt1 = (TextBox)PreviousPage.FindControl("txtname");
       label1.Text = "Value: " + txt1.Text;
   }
} 
```

我最终得到了`object reference not set to instance of an object`错误`txt1`

`label1`用于显示输出的标签在哪里。但是，不显示该值。

我错过了什么步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:29:05.097

试试这个

```
if (PreviousPage != null && PreviousPage.IsCrossPagePostBack)
            {
                //get the content place holder from master page of your previous page where your controls are placed
                //In this code the txtname textbox is placed inside ContentPlaceHolderID="MainContent"
                var cp =PreviousPage.Master.FindControl("MainContent") as ContentPlaceHolder;
                //find the textbox inside content place holder from previous page
                TextBox txt1 = cp.FindControl("txtname") as TextBox;
                label1.Text = "Value: " + txt1.Text;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:16:24.030

您确定 PostBackURL 在文本框上有效吗？通常，此属性附加到提交的内容，例如 Button 或 LinkBut​​ton，例如：

```
<form runat="server">
  Name:<asp:textbox id="TextBox1" runat=Server />
  <asp:button id="Button1" Text="Submit"
  PostBackUrl="demo_postbackurl.aspx" runat="Server" />
</form> 
```

编辑：啊哈！- 你确实使用了一个按钮。

你的代码对我来说看起来不错。

如果 TextBox 在另一个控件中 FindControl 可能找不到它 - 如果（例如）它在 Panel 中，您需要执行类似的操作

```
TextBox txt1 = (TextBox)PreviousPage.MyPanel.FindControl("txtname"); 
```

如果它不在另一个控制范围内，那么恐怕我不知道。

# c# - 弹出窗口中的gridview分页

> ID：14372912
> 
> 赞同：1
> 
> 时间：2013-01-17T05:49:54.557
> 
> 标签：c#, asp.net

我在 ASP.NET 和 c# 中工作。

我有gridview，我在单击按钮时绑定，也在弹出窗口中显示这个gridview。现在分页在我的gridview中不起作用，请帮我解决这个问题。

ASP:

```
 <asp:GridView ID="GV_Order" runat="server" AllowPaging="true" AutoGenerateColumns="false"   DataKeyNames="ProductCode" EmptyDataText="There are no data records to display."
        BackColor="#CCCCCC" BorderColor="#999999" BorderStyle="Solid" BorderWidth="3px" 
        CellPadding="4" CellSpacing="2"
        HeaderStyle-BackColor="Black" HeaderStyle-ForeColor="#FFD700" PageSize="5" OnPageIndexChanging="GV_Orderpageindexchanging" o> 
```

代码隐藏：

```
 protected void btn_click(object sender,eventargs e)
  {
    GV_Order.DataSource = dataset;
    GV_Order.DataBind();
  }

   protected void GV_Orderpageindexchanging(object sender, GridViewPageEventArgs e)
   {
    GV_Order.PageIndex = e.NewPageIndex;
    GV_Order.DataBind();
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:06:16.520

asp.net DataPager 控件没有用，为此使用[Jquery 数据表](http://www.datatables.net/)。它对所有表都非常有用。将 'datatable' 类添加到要使用的表中 'paging'、'searching'、'ordering'.. plugins ,

# compilation - 如何在方案中编译可执行文件？

> ID：14372916
> 
> 赞同：5
> 
> 时间：2013-01-17T05:50:29.130
> 
> 标签：compilation, scheme, executable, racket

我想为以下代码制作一个可执行文件。这是用 Dr.racket 编写的方案。这将如何完成？如果它可以是独立的，并且我可以在 iOS 和 Windows 上打开它，那将是最好的。非常感谢您的宝贵时间！

```
#lang racket

(require racket/gui/base)
(require compiler/embed)

; Make a frame by instantiating the frame% class
(define frame (new frame% [label "GUI"]
                   [width 200]
                   [height 200]))

; Make a static text message in the frame
(define msg (new message% [parent frame]
                          [label "This box is empty"]))

; Show the frame by calling its show method
(send frame show #t) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:49:21.057

正如@dyoo 所指出的，在 Racket 中，您可以从菜单创建可执行文件并（取决于所选/可用选项）打包所需的库；阅读[说明](http://docs.racket-lang.org/drracket/create-exe.html)。您还可以使用命令行[工具](http://docs.racket-lang.org/raco/exe.html)为其他平台创建可执行文件。

对于更通用和可移植的解决方案，请考虑先将代码编译为 C，然后再从 C 编译为本机可执行文件；查看[raco](http://download.racket-lang.org/docs/5.1/html/raco/index.html)工具（第 9.3 节），或查看旨在轻松编译为 C 的 Scheme 实现，例如[Chicken Scheme](http://www.call-cc.org/)或[Gambit Scheme](http://gambitscheme.org/wiki/index.php/Main_Page)。

让代码在 iOS 下运行可能会比较棘手，快速搜索会返回一个适用于 iOS 的[Gambit REPL](https://itunes.apple.com/us/app/gambit-repl/id434534076?mt=8)，试一试，但我认为不支持编译为本机 Objective-C 代码，尽管 Gambit[声称](https://en.wikipedia.org/wiki/Gambit_%28Scheme_implementation%29#C.2B.2B_and_Objective-C_integration)具有“完全集成对 C++ 和 Objective-C 编译器的支持”，你必须尝试一下。

最后，请注意特定于 Racket 的 GUI 代码（如问题中的那个）几乎肯定不能跨不同的 Scheme 实现/平台移植......

# google-drive-api - 是否可以为其他用户共享整个 Google 云端硬盘？

> ID：14372919
> 
> 赞同：4
> 
> 时间：2013-01-17T05:50:51.527
> 
> 标签：google-drive-api, file-sharing

我想将整个 Google 云端硬盘共享给其他人。是否可以？我知道可以共享文件或文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:03:38.033

您可以使用 Drive API 执行此操作，方法是遍历每个文件夹并共享它。使用[`drive.permissions.insert`](https://developers.google.com/drive/v2/reference/permissions/insert)API 的方法。

# objective-c - 如何在应用程序中访问语音备忘录

> ID：14372922
> 
> 赞同：2
> 
> 时间：2013-01-17T05:50:58.100
> 
> 标签：objective-c

我知道在您的应用程序中，您可以通过您制作的应用程序访问您的 ipod 音乐和相机。我想知道是否可以通过任何可能的方式从您的应用程序中使用语音备忘录应用程序。例如，使用他们必须将其用作应用程序的背景歌曲或声音的语音备忘录，这将使用户对想要的屏幕外观或声音方式进行更多自定义。谢谢，如果不可能，请告诉我。如果可能，请解释如何。谢谢！

# c# - 在 asp.net 中以编程方式创建 menuItem 时如何添加 menuItemClick 事件？

> ID：14372927
> 
> 赞同：1
> 
> 时间：2013-01-17T05:51:32.580
> 
> 标签：c#, asp.net, c#-4.0, asp.net-controls

在我的 asp.net Web 应用程序中，我基于登录用户角色以编程方式创建了一个菜单和 menuItem。代码如下...

```
 Menu menu = new Menu();
    menu.CssClass = "menu";
    menu.IncludeStyleBlock = false;
    menu.EnableViewState = false;
    menu.Orientation = Orientation.Horizontal;

    if (roleType.equals("teacher"))
    {
        MenuItem categoryItemCh1 = new MenuItem("Home");
        categoryItemCh1.NavigateUrl = "Teacher/TestsList.aspx";
        menu.Items.Add(categoryItemCh1);

        MenuItem categoryItemCh2 = new MenuItem("Account");
        categoryItemCh2.NavigateUrl = "Account/underconstruction.aspx";
        menu.Items.Add(categoryItemCh2);

        MenuItem categoryItemCh3 = new MenuItem("Reports");
        categoryItemCh3.NavigateUrl = "Account/underconstruction.aspx";
        menu.Items.Add(categoryItemCh3);

        MenuItem categoryItemCh4 = new MenuItem("Logout");
        menu.Items.Add(categoryItemCh4);
    } 
```

因此，当用户单击注销菜单项时，我必须触发 menuItem 单击事件来执行以下过程。

1.清除与用户关联的所有会话
2.重定向到登录页面。

但我不知道如何在 asp.net 中以编程方式添加 menuItem 点击事件。请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:57:46.937

使用[MenuItemClick](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.menuitemclick.aspx)事件。您不会向每个菜单项添加事件，而是向菜单本身添加事件

```
menu.OnMenuItemClick += Menu_MenuItemClick;

void Menu_MenuItemClick(Object sender, MenuEventArgs e)
{
// Display the text of the menu item selected by the user.
Message.Text = "You selected " + 
  e.Item.Text + ".";
} 
```

您可以使用 MenuEventArgs 来确定单击了哪个菜单项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:15:37.930

要将事件处理程序添加到菜单，您需要使用菜单的 EventHandlerList 上的 AddHandler 或 AddHandlers 方法。要获取 EventHandlerList，请参阅 Menu.Events 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T17:48:54.910

这是我解决问题的方法...

```
 protected void RadMenu2_ItemClick(object sender, RadMenuEventArgs e)
    {

        switch (RadMenu2.SelectedItem.Text)
        {
            case "Menu Text 1":
                Your code or method;
                break;
            case "Menu Text 2":
                Your code or method;
                break;
            case "etc...":
                Your code or method;
                break;        
        } 
```

# c# - 将文档保存在共享文件夹路径中

> ID：14372928
> 
> 赞同：1
> 
> 时间：2013-01-17T05:51:42.040
> 
> 标签：c#, wpf

嗨，我正在执行一项任务（在我的 wpf 项目中）将文档保存在共享文件夹中，因此该系统的任何用户都可以查看该文档。

我想知道如何在 Windows 7 以及 xp 或 vista Os 中获取共享文件夹路径 ie(c:\users\public\documents) 以保存该文档，

请为我提供一个解决方案

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:48:25.130

使用环境。

```
string path=  Environment.GetFolderPath(Environment.SpecialFolder.CommonDocuments); 
```

# xml - 无法将球衣资源类加载到 JBoss 7

> ID：14372934
> 
> 赞同：3
> 
> 时间：2013-01-17T05:52:16.953
> 
> 标签：xml, jersey, jboss7.x

*   泽西岛 - 1.16
*   JBoss - 7.1.2 最终版

有了上面，我无法加载资源类`JBoss`，它抱怨以下错误。

> 错误 [[/]] Servlet 抛出 load() 异常：javax.servlet.ServletException：资源配置类 biz.bsite.direct.spring.mobile.AddressbookResource，不是类 javax.ws.rs.core 的超类。 com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:678) 的 com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:741) 的应用程序。 sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203) 在 com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374) 在 com.sun.jersey。 spi.container.servlet.ServletContainer.init(ServletContainer.java:557)

我的资源类如下所示。

> @Path("addressbook") 公共类 AddressbookResource {

Web.xml 看起来像：

```
<servlet>
    <servlet-name>JerseyMobile</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>biz.bsite.direct.spring.mobile.AddressbookResource</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

有人可以帮我解决这个问题吗？尝试使用包扫描，但它也不适用于 JBoss 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T00:48:52.217

I believe the correct approach is to use app server agnostic JAX-RS deployment model as explained [here](http://jersey.java.net/nonav/documentation/latest/jax-rs.html#d4e188). All you need is, extend [javax.ws.rs.core.Application](http://jersey.java.net/nonav/apidocs/latest/jersey/javax/ws/rs/core/Application.html) in your JAX-RS web application. Here is an example.

```
package com.sun.jersey.samples.helloworld.resources;

import java.util.HashSet;
import java.util.Set;
import javax.ws.rs.core.Application;

public class MyApplication extends Application {
    @Override
    public Set<Class<?>> getClasses() {
        final Set<Class<?>> classes = new HashSet<Class<?>>();
        classes.add(HelloWorldResource.class);
        return classes;
    }
} 
```

Then, you need to put this in your web.xml.

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>com.sun.jersey.samples.helloworld.resources.MyApplication</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>javax.ws.rs.Application</param-name>
            <param-value>com.sun.jersey.samples.helloworld.resources.MyApplication</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <context-param>
        <param-name>resteasy.scan</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>resteasy.scan.providers</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>resteasy.scan.resources</param-name>
        <param-value>false</param-value>
    </context-param>
    <servlet-mapping>
        <servlet-name>com.sun.jersey.samples.helloworld.resources.MyApplication</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

In addition to deploying as an JAX-RS Application, you need to disable resteasy scanning your resources and providers.

I have put together a simple Jersey JBoss EAR sample in Github [here](https://github.com/aruld/jersey-jboss-ear).

# r - 数据处理问题

> ID：14372941
> 
> 赞同：-5
> 
> 时间：2013-01-17T05:52:58.460
> 
> 标签：r

我想创建两个名为`prey`和的新列`preyrow`。`prey`是下一个位置`y`值，但在相同的`x`值内。value 是同一值内`preyrow`的下一个位置值。`row``x`

原始表如下：

```
 x           y row
1  1  0.60697546   1
2  1 -0.68600911   2
3  1 -0.53499454   3
4  1  0.05591587   4
5  2  0.11937963   5
6  2 -0.39951846   6
7  2  0.97430697   7
8  3  0.42852135   8
9  3  0.27695563   9
10 4 -0.29530769  10 
```

我希望输出表看起来像：

```
 x           y row        prey prerow
1  1  0.60697546   1 -0.68600911      2
2  1 -0.68600911   2 -0.53499454      3
3  1 -0.53499454   3  0.05591587      4
4  1  0.05591587   4          NA     NA
5  2  0.11937963   5 -0.39951846      6
6  2 -0.39951846   6  0.97430697      7
7  2  0.97430697   7          NA     NA
8  3  0.42852135   8  0.27695563      9
9  3  0.27695563   9 -0.29530769     10
10 4 -0.29530769  10          NA     NA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:24:14.687

我认为这是您需要的（使用`data.table`）：

```
require(data.table)
df <- structure(list(x = c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 4L), 
      y = c(0.60697546, -0.68600911, -0.53499454, 0.05591587, 0.11937963, 
      -0.39951846, 0.97430697, 0.42852135, 0.27695563, -0.29530769), 
      row = 1:10), .Names = c("x", "y", "row"), class = "data.frame", 
      row.names = c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10"))
dt <- data.table(df, key="x")
dt.out <- dt[, .SD[2:(nrow(.SD)+1)], by=x]
setnames(dt.out, c("x", "prey", "preyrow"))
dt.out <- cbind(dt, subset(dt.out, select=-c(x)))

> dt.out

    x           y row        prey preyrow
 1: 1  0.60697546   1 -0.68600911       2
 2: 1 -0.68600911   2 -0.53499454       3
 3: 1 -0.53499454   3  0.05591587       4
 4: 1  0.05591587   4          NA      NA
 5: 2  0.11937963   5 -0.39951846       6
 6: 2 -0.39951846   6  0.97430697       7
 7: 2  0.97430697   7          NA      NA
 8: 3  0.42852135   8  0.27695563       9
 9: 3  0.27695563   9          NA      NA
10: 4 -0.29530769  10          NA      NA 
```

# java - 将 ListView 项目背景更改为渐变

> ID：14372943
> 
> 赞同：1
> 
> 时间：2013-01-17T05:52:59.693
> 
> 标签：java, android, listview, gradient

我可以使用显示正确输出的自定义适配器设置列表视图。现在我想将每个列表视图项目的背景更改为渐变。如何做到这一点？

**我的文件...**

activity_main.xml....主 xml 文件

MainActivity.java....主要活动

Item.java.... 项目选择器方法

ItemAdaptor.... 自定义适配器

list_item.xml .....项目（textView）样式

我创建了我的渐变代码，就像..

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
  android:shape="rectangle">
 <gradient 
 android:startColor="#FFFAFAFA" 
 android:centerColor="#FFFFFFFF" 
  android:endColor="#FFFAFAFA" 
  android:angle="90"/>
</shape> 
```

还有我怎么能改变分隔符颜色，以及整个列表视图的背景颜色..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:57:38.053

您是否`android:background="@drawable/customshape"`在 rowLayout.xml 中提到过，以便它知道要使用哪种形状？还可以`android:divider="#FFCC00"`在您的列表视图标签中使用来更改分隔符颜色。添加 `<solid android:color="#F0F0F0" />`到您的形状以更改背景颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:58:12.980

看看这个[教程](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

作者创建了具有渐变效果的列表视图，我认为这正是您所需要的。

# android - Android：当用户进入特定位置时获取通知

> ID：14372947
> 
> 赞同：19
> 
> 时间：2013-01-17T05:53:08.600
> 
> 标签：android, gps, location

我正在开发 android 应用程序，当用户输入特定位置时会发出通知
用户可以使用纬度经度指定位置（即谷歌地图）
我知道如何获取纬度和经度但我的问题是当用户输入特定位置时它会与先前指定的纬度和经度不完全匹配。 ![在此处输入图像描述](../Images/7f890295fa2b11c8fe82b369e972f939.png)

如图所示，假设用户在进入区域（约 20 米）时指定名为“My Place”的位置，则应用程序应向用户发送通知。
**我想知道如何比较用户指定的纬度和经度（我的位置）以及应用程序通过 GPS 获取的当前纬度和经度。** 以这样的方式进行比较，如果用户在我的地方附近 20 米的区域内，它将是真实的。（这 20 米是近似值。）我可以在 android 中设置精度，例如 20 米。
谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-06-08T05:53:03.753

解决此问题的最佳方法是使用 GeoFences 功能。请参阅[https://developer.android.com/training/location/geofencing.html](https://developer.android.com/training/location/geofencing.html)了解更多详情。

大纲： - 应用程序向底层操作系统注册 - 说 - 这是我希望你监控的地理围栏列表（特定位置 + 距离该位置的半径）。- 如果我的用户进入这个地理围栏 - 叫醒我并告诉我。- 在那个时间点 - 您可以继续执行任何步骤（调用服务器并询问您需要向用户显示哪些信息）或只是发送推送通知（在应用程序通知中）以完成必要的工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T05:56:40.690

查看 LocationManager.addProximityAlert 函数。它几乎完全符合您的要求。警告，它确实使用了大量的电池。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-06T14:24:45.417

您可以使用空间距离函数进行 gps 池化计算

Bluedotinnovation 的 point sdk (android & ios) 具有更高的准确性和更少的电池消耗，也类似于 Radar 的免费 sdk

雷达地理围栏比原生 iOS 或 Android 地理围栏更强大，跨平台支持无限地理围栏、多边形地理围栏、停止检测，精度低至 30 米。

他们也有 ReactNative 支持。

# vmware - VMWare：如何在来宾操作系统上跟踪正在运行的进程指令？

> ID：14372949
> 
> 赞同：1
> 
> 时间：2013-01-17T05:53:25.250
> 
> 标签：vmware, windbg

如果我们假设我们只有二进制文件，我们可以使用 windbg 进入程序集并查看发生了什么。由于 Windows 来宾以完全模拟模式运行，因此在来宾中进行跟踪应该很简单。

如果我们想跟踪虚拟化层（即hypervisor）发生了什么，那就有点困难了。这取决于我们在哪种机器上运行。如今，所有机器都是 64 位并启用了 VMX，这允许管理程序即时拦截客户指令，因为处理器虚拟化是在硬件中实现的。

由于这只是客户进入虚拟机管理程序的陷阱，因此几乎不可能知道客户何时进入虚拟机管理程序以及何时返回。但是，通过跟踪管理程序中的任何代码，我们可能不会取得太多成就。
在启用 VMX 的机器中，只有页表写入更改和 IOPL 更改将转到管理程序。其他一切都由客人自己处理。

对于所有实际应用调试windbg应该没问题。

> 我们可以使用 WinDbg 在来宾操作系统上跟踪正在运行的进程（.exe）及其指令吗？

请对此提供帮助...我真的很感谢您在这方面的时间..谢谢.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:36:44.373

我不完全确定你在问什么，但如果你问是否可以在虚拟机上运行 windbg，那么是的，它就像在物理机上一样工作。

如果您想附加到运行虚拟机本身的进程，但查看来宾操作系统内部的进程，那么答案是否定的。

# ruby-on-rails - 部分收集计数器别名

> ID：14372950
> 
> 赞同：2
> 
> 时间：2013-01-17T05:53:32.613
> 
> 标签：ruby-on-rails, partial-views, counter

Rails 可以使用计数器渲染部分集合：

```
= render partial: 'item', collection: @items 
```

在 _ 内部`item.html`，rails 为`items`. （[这里](http://api.rubyonrails.org/classes/ActionView/PartialRenderer.html)）

```
= item_counter 
```

如何为`item_counter`例如制作别名`partial_counter`？或者任何会使它变得更干燥的东西？写的实在是太低效了`item_counter, product_counter, category_counter, user_counter, ...`。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T11:14:26.880

```
= render partial: 'item', collection: @items, as: 'item' 
```

**更新：**仅别名计数器：不幸的是，没有任何其他 Rails 方法可以满足您的需求。您必须手动定义新的局部变量并在所有部分中分配计数器值：

```
<% counter = local_assigns.detect {|var, value| var.match(/_counter\z/)}.last %>

<%= counter %> 
```

# actionscript-2 - 减少与倒数计时器相关的分数

> ID：14372952
> 
> 赞同：0
> 
> 时间：2013-01-17T05:53:37.933
> 
> 标签：actionscript-2

我有一个用 actionscript 2 编写的测验。一切都很顺利，除了我不知道如何让分数在回答问题所需的每一秒内减少一分。

所以......每个问题的最高分数是 30 分，并且有一个 30 秒的计时器......所以测验更具挑战性，我希望它每回答一秒就减少 1 分。

这是我的代码...提前谢谢...

```
 Answer0Button.enabled=false; button0._visible=false;
Answer1Button.enabled=false; button1._visible=false;
Answer2Button.enabled=false; button2._visible=false;
Answer3Button.enabled=false; button3._visible=false;
Answer4Button.enabled=false; button4._visible=false;
Answer5Button.enabled=false; button5._visible=false;

function countdown() {
    counter--;
    countdown_txt.text = counter;
    if (counter == 0) {
        Answer0Button.enabled=false;
        Answer1Button.enabled=false;
        Answer2Button.enabled=false;
        Answer3Button.enabled=false;
        Answer4Button.enabled=false;
        Answer5Button.enabled=false;
        clearInterval(intID); 
        AnswerPopUp_mc.gotoAndPlay(1);
        AnswerPopUp_mc.AnswerPopUp.DisplayResult.htmlText = "" + TimeIsUp + "";
    }
}

// defining variables for data
var ChosenNumberOfQuestions = int(0); // Number of questions in quiz
var TotalNumberOfQuestions = int(0); // Total number of questions in XML file
var NumberOfQuestions = int(0); // min of two above
var QuestionCounter = int(0); // for dynamicaly showing questions
var CurrentQuestion = QuestionCounter + 1; // for dynamicaly showing questions
var Points = 0; // for each question
var TotalPoints = 0; // Max Points
var Score = 0; // display total score
var NumberOfCorrectAnswers = 0; // counter for questions answered correctly

var RandOrderQuestions = new Array();
var Questions = new Array();
var Images = new Array();
var CorrectAnswers = new Array();
var Answers = new Array();
var ExplanationsIfCorrect = new Array();
var ExplanationsIfNotCorrect = new Array();
var TimesForSolving = new Array();
var NumberOfPoints = new Array();

// roll over states for buttons
button0.onEnterFrame = function() { 
    if (mouse_over_button0) { 
        _root.button0.nextFrame(); 
    } else { 
        _root.button0.prevFrame(); 
    } 
}; 
button1.onEnterFrame = function() { 
    if (mouse_over_button1) { 
        _root.button1.nextFrame(); 
    } else { 
        _root.button1.prevFrame(); 
    } 
}; 
button2.onEnterFrame = function() { 
    if (mouse_over_button2) { 
        _root.button2.nextFrame(); 
    } else { 
        _root.button2.prevFrame(); 
    } 
}; 
button3.onEnterFrame = function() { 
    if (mouse_over_button3) { 
        _root.button3.nextFrame(); 
    } else { 
        _root.button3.prevFrame(); 
    } 
}; 
button4.onEnterFrame = function() { 
    if (mouse_over_button4) { 
        _root.button4.nextFrame(); 
    } else { 
        _root.button4.prevFrame(); 
    } 
}; 
button5.onEnterFrame = function() { 
    if (mouse_over_button5) { 
        _root.button5.nextFrame(); 
    } else { 
        _root.button5.prevFrame(); 
    } 
}; 

// Label Color
var changeColor2 = new Color(label_mc.coloredLabel);
changeColor2.setRGB(labelColor);
// Change Buttons Color
var changeColorA = new Color(button0.letterA_mc.letterA);
changeColorA.setRGB(labelColor);
var changeColorB = new Color(button1.letterB_mc.letterB);
changeColorB.setRGB(labelColor);
var changeColorC = new Color(button2.letterC_mc.letterC);
changeColorC.setRGB(labelColor);
var changeColorD = new Color(button3.letterD_mc.letterD);
changeColorD.setRGB(labelColor);
var changeColorE = new Color(button4.letterE_mc.letterE);
changeColorE.setRGB(labelColor);
var changeColorF = new Color(button5.letterF_mc.letterF);
changeColorF.setRGB(labelColor);
// Change Color of points, counter...
var changeColorCounter = new Color(countdown_txt);
changeColorCounter.setRGB(labelColor);
var changeSlashColor = new Color(slash);
changeSlashColor.setRGB(labelColor);
var changeCurrQColor = new Color(DisplayCurrQ);
changeCurrQColor.setRGB(labelColor);
var changeTotalQColor = new Color(DisplayTotalQ);
changeTotalQColor.setRGB(labelColor);
var changePointsColor = new Color(DisplayPoints);
changePointsColor.setRGB(labelColor);
var changeScoreColor = new Color(DisplayScore);
changeScoreColor.setRGB(labelColor);

// Background Color
new Color (BackGround.bg).setRGB(BackgroundColor); 
new Color (FadeIn.bg1.bg).setRGB(BackgroundColor); 

// loading data from XML
var xmlData = new XML();
xmlData.ignoreWhite = true;

xmlData.onLoad = function () {

    // Default Time for solving
    DefaultTimeInSeconds = this.firstChild.attributes.DefaultTimeInSeconds;
        trace ("DefaultTime: " + DefaultTimeInSeconds);
    // Default Points
    DefaultPoints = this.firstChild.attributes.DefaultPoints;
        trace ("DefaultPoints: " + DefaultPoints);
    // Default comment on answers
    DefaultIfCorrectAnswer = this.firstChild.attributes.DefaultIfCorrectAnswer;
    DefaultIfWrongAnswer = this.firstChild.attributes.DefaultIfWrongAnswer;

    // Default if time is up
    TimeIsUp = this.firstChild.attributes.TimeIsUp;

    // Random order of questions or not
    RandomQuestions = this.firstChild.attributes.RandomQuestions;
        trace ("RandomQuestions: " + RandomQuestions);

    // Number Of Questions 
    ChosenNumberOfQuestions = this.firstChild.attributes.NumberOfQuestions;
        trace ("ChosenNumberOfQuestions: " + ChosenNumberOfQuestions);

    // Counting  total number of Questions in XML file
    var nodes = this.firstChild.childNodes;
    for (var a=0; a<nodes.length; a++){
        TotalNumberOfQuestions = a+1;
    }  
    trace ("TotalNumberOfQuestions: " + TotalNumberOfQuestions);    

    // Finaly - number of questions in QUIZ - min of two above
    if (ChosenNumberOfQuestions < TotalNumberOfQuestions) { 
        NumberOfQuestions = ChosenNumberOfQuestions; 
    } else {
        NumberOfQuestions = TotalNumberOfQuestions;
    }

    // Random order Questions or not
    // first we populate array with question numbers
    for(i=0; i<TotalNumberOfQuestions; i++){
        RandOrderQuestions[i] = i;
        trace(RandOrderQuestions);
    }
    // if we want random questions we use random sorting of number of questions
    if (RandomQuestions == "TRUE") { 
        RandOrderQuestions.sort(function () {
            return random(2) ? true : false;
        });
        trace(RandOrderQuestions);
    } 
    ///////////////////////////
    // POPULATING FROM XML
    for (var i=0; i < NumberOfQuestions; i++ )
    {   
        // Chose the number of question from RandOrderQuestions array
        var numInXML = RandOrderQuestions[i];
        trace("Question number in XML: " + numInXML);

        // populating questions from XML
        Questions[i] = this.firstChild.childNodes[numInXML].childNodes[0].firstChild.nodeValue; 
        //trace(Questions);

        //populating Correct Answers from XML
        CorrectAnswers[i] = this.firstChild.childNodes[numInXML].childNodes[1].attributes.correctAnswer; 
        //trace(CorrectAnswers);

        // populating options for answers from XML
        var NewArray = new Array(); // temp array for answers for each question
        for (var j=0; j < this.firstChild.childNodes[numInXML].childNodes[1].childNodes.length; j++ )
            {
            trace(i + " "+ j);
            NewArray[j] = this.firstChild.childNodes[numInXML].childNodes[1].childNodes[j].firstChild.nodeValue;
            //trace(NewArray);
            NewArray.sort(function () {
            return random(2) ? true : false;
            });

            }
        Answers.push(NewArray); // push answers for this i question in main Answers array

        //populating additional options from XML
        ExplanationsIfCorrect[i] = this.firstChild.childNodes[numInXML].childNodes[2].attributes.explanationIfCorrect; 
        ExplanationsIfNotCorrect[i] = this.firstChild.childNodes[numInXML].childNodes[2].attributes.explanationIfNotCorrect; 
        TimesForSolving[i] = this.firstChild.childNodes[numInXML].childNodes[2].attributes.timeInSeconds; 
        NumberOfPoints[i] = this.firstChild.childNodes[numInXML].childNodes[2].attributes.points; 
        Images[i] = this.firstChild.childNodes[numInXML].childNodes[2].attributes.imageIfCorrect; 
        Images[i] = this.firstChild.childNodes[numInXML].childNodes[2].attributes.imageIfIncorrect;

    }
    trace("Questions: " + Questions); trace("Correct Answers: " + CorrectAnswers); 
    trace(NewArray);
    trace(ExplanationsIfCorrect); trace(ExplanationsIfNotCorrect); trace(TimesForSolving); trace(NumberOfPoints);  trace(Images);

    // show first question (QuestionCounter=0)
    QuestionNumber.text = "Question #" + 1;
    QuestionDisplay.htmlText = Questions[QuestionCounter];  
    // show answers for first question (QuestionCounter=0)
    if (0 < Answers[QuestionCounter].length){ Answer0Display.text = Answers[QuestionCounter][0]; Answer0Button.enabled=true; button0._visible=true;} else { button0._visible=false;}
    if (1 < Answers[QuestionCounter].length){ Answer1Display.text = Answers[QuestionCounter][1]; Answer1Button.enabled=true; button1._visible=true;} else { button1._visible=false;}
    if (2 < Answers[QuestionCounter].length){ Answer2Display.text = Answers[QuestionCounter][2]; Answer2Button.enabled=true; button2._visible=true;} else { button2._visible=false;}
    if (3 < Answers[QuestionCounter].length){ Answer3Display.text = Answers[QuestionCounter][3]; Answer3Button.enabled=true; button3._visible=true;} else { button3._visible=false;}
    if (4 < Answers[QuestionCounter].length){ Answer4Display.text = Answers[QuestionCounter][4]; Answer4Button.enabled=true; button4._visible=true;} else { button4._visible=false;}
    if (5 < Answers[QuestionCounter].length){ Answer5Display.text = Answers[QuestionCounter][5]; Answer5Button.enabled=true; button5._visible=true;} else { button5._visible=false;}
    // show image if defined
    if (Images[QuestionCounter]){ loadMovie(Images[QuestionCounter],"imgContainer"); } else {  }
    // determine the number of points
    if (NumberOfPoints[QuestionCounter]){ Points = NumberOfPoints[QuestionCounter] } else { Points = DefaultPoints }

    // start counter
    if (TimesForSolving[QuestionCounter]){ 
        countdown_time = TimesForSolving[QuestionCounter] 
    } else { 
        countdown_time = DefaultTimeInSeconds 
    } // now call the function
        counter = countdown_time;
        countdown_txt.text = countdown_time;
        clearInterval(intID); 
        intID = setInterval(countdown,1000);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:18:22.160

我看不到您在哪里添加分数，但我相信您可以设置 score = counter 因为您的计数器是剩余时间。

# openshift - 在 Openshift 上阻止 https

> ID：14372953
> 
> 赞同：0
> 
> 时间：2013-01-17T05:53:49.303
> 
> 标签：openshift

我想在 Openshift 上取消 https，我刚刚知道服务器返回了一个强制 https 的标头 Strict-Transport-Security，无论如何我可以在使用 Openshift 时强制使用 http，因为我遇到了一些 chrome 问题，它使用 https 时未从 http 源加载某些资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:28:57.863

该错误已在此处记录：[https](https://bugzilla.redhat.com/show_bug.cgi?id=908417) ://bugzilla.redhat.com/show_bug.cgi?id=908417 （需要登录）

这应该在 OpenShift 的下一次更新中以及在使用 Google Chrome 版本 26 或更高版本时修复。

# c# - 将单元格值传递到字符串 C#

> ID：14372954
> 
> 赞同：0
> 
> 时间：2013-01-17T05:54:05.403
> 
> 标签：c#, winforms, datagridview

如上。字符串 id 是 NULL 值，尽管 .Value 在我调试时不是 NULL。

```
string id = dataGridView1[columnindex, rowindex].Value.ToString(); 
```

试图通过更改为 id 将值传递给`.Value`，`.FormattedValue`但也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:31:31.893

然后尝试

```
string id = dataGridView1.Rows[rowIndex].Cells[columnIndex].EditedValueString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:47:05.743

```
string id = dataGridView1.Rows[rowIndex].Cells[columnIndex].Value.ToString 
```

# c# - 从 WCF 返回自定义格式的 SOAP 消息

> ID：14372957
> 
> 赞同：0
> 
> 时间：2013-01-17T05:54:16.370
> 
> 标签：c#, wcf

我有一个要求，其中 WCF 服务上的方法调用必须返回以下格式的 SOAP 消息：

```
<soap:Body>
<m:RequestProcessed xmlns:m=" ">
<m:Status>OK</m:Status>
<m:UID>subfolder name</m:UID>
</m: RequestProcessed >
</soap:Body> 
```

这可以用故障来完成吗，如果是这样，请给出一些关于在哪里看的指示。如果不是，那么替代方案是什么？

珍惜你的时间。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:42:01.303

一旦我有非常相似的问题：[控制 WCF 消息正文序列化](https://stackoverflow.com/questions/4452402/controlling-wcf-message-body-serialization) 可能答案也会对您有所帮助（请注意它需要 WCF 4）。

另一种方法是直接写入响应流，即使不需要使用抽象 Message 对象。此线程中描述了此方法：[WCF 4 REST - Acquiring the underlying response stream object for writing](https://stackoverflow.com/questions/9630083/wcf-4-rest-acquiring-the-underlying-response-stream-object-for-writing)

# hashtable - 哈希表查找时间

> ID：14372962
> 
> 赞同：10
> 
> 时间：2013-01-17T05:54:49.720
> 
> 标签：hashtable

当我们在哈希表中插入/查找键时，教科书说这是 O(1) 时间。然而，怎么可能有一个 O(1) 的查找时间呢？如果哈希表将键存储在向量中，它将花费 O(N)，如果在二叉树中，它将花费 O(logN)。我只是无法用 O(1) 访问时间来成像某些数据结构。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T05:59:12.667

哈希表对您的密钥进行哈希处理并将其放入数组中。

例如，hash(x) = 3，其中 x 是您的密钥。然后该表将其放入数组 [3]。从数组访问是 O(1)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-28T04:55:02.653

哈希表至少由数组和哈希函数组成。当一个对象被添加到表中时，会对该对象计算哈希函数，并将其存储在数组中所计算的相应值的索引处。例如，如果`hash(obj) = 2`那么`arr[2] = obj`。

哈希表上的平均插入/查找是`O(1)`.

但是，当对象计算相同的哈希值时，可能会发生冲突。

在一般情况下，数组的每个索引处都有“桶”来处理这些冲突。这意味着，所有三个对象都存储在哈希表索引处的某个其他数据结构（可能是链表或另一个数组）中。

因此，在哈希表上查找的最坏情况是`O(n)`因为存储在哈希表中的所有对象都可能发生冲突并存储在同一个桶中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-10T13:48:29.807

从技术上讲，哈希表查找，如果没有冲突，是 O(logn)。这是因为散列时间与标识符的大小（以字节为单位）成线性关系，并且添加到散列表中的新标识符可以是最小的，对于该标识符是唯一的，是 O(logn)。

然而，世界上所有计算机内存的日志只是一个很小的数字，这意味着我们对哈希表标识符大小有很好的上限。例如，可观测宇宙中粒子数的 log10 估计略高于 80；在 log2 中大约是 3.3 倍。对数增长非常缓慢。

因此，大多数对数项可以被视为常数项。只是传统上我们只将这个事实应用于哈希表，而不是搜索树，以便向学生教授递归关系。

# ruby-on-rails - Rails 4 中的动态 bang finder

> ID：14372963
> 
> 赞同：2
> 
> 时间：2013-01-17T05:54:59.913
> 
> 标签：ruby-on-rails, rails-activerecord, dynamic-finders, ruby-on-rails-4

Rails 4 正在摆脱动态查找器，所以

```
User.find_by_hash(hash) 
```

变成

```
User.where(hash: hash) # .first 
```

好吧，没什么大不了的。`User.find_by_hash!(hash)`但是，既然没有方法，那么处理动态 bang finder 的最佳方法是什么`where!()`？[Rails 4 Release Notes](http://edgeguides.rubyonrails.org/4_0_release_notes.html)很方便地避免了这种情况。

**更新**：它明确地说：“除了 find_by_... 和 find_by_...！的所有动态方法都已弃用。”

从那以后，要么页面发生了变化，要么我在阅读时失明了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:21:07.900

好吧，如果您需要一种在关系为空时找到所有但引发异常的方法，您可以自己为您的模型创建这样的新方法（或混合到 ActiveRecord::QueryMethods）。就像是：

```
def where!(*args)
  rel = where(*args) 
  raise RecordNotFound if rel.empty?
  rel
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:17:17.143

我认为新语法是

```
User.find_by!(hash: hash) 
```

至少 ryanb 是这样做的： [http ://railscasts.com/episodes/400-what-s-new-in-rails-4](http://railscasts.com/episodes/400-what-s-new-in-rails-4)

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T05:05:26.643

它明确地说：“除了 find_by_... 和 find_by_...！所有动态方法都已弃用。”

# java - 在android中以睡眠模式杀死一个线程

> ID：14372965
> 
> 赞同：1
> 
> 时间：2013-01-17T05:55:07.150
> 
> 标签：java, android

我有一个 android 应用程序，它有一个线程，每 1 分钟运行一次。所以我的问题是，当我单击一个按钮时，我必须重置应用程序，这意味着它将是一个全新的应用程序。所以现在当我点击那个按钮时，所有的数据库和共享首选项都会被清除。但是线程将重新开始。

现在我这样使用

```
if (killthread.isAlive()) {

           killthread.interrupt();                  

            }else {

              // Here what'll i do, I mean how to kill that thread, which in sleep mode.

} 
```

谢谢毗湿奴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:15:07.963

> 感谢您的回复，当我单击该按钮时，将进入其他部分，但1分钟后，线程将启动。那么如何在阶段停止呢？

这将与线程本身有关。我敢打赌，您已经对其进行了编码以忽略中断。

* * *

好的，这是您评论中的代码。

```
public void run() { 
    while (true) { 
        try { 
            Thread.sleep(60000); 
        } catch (InterruptedException e) { 
            // TODO Auto-generated catch block 
        }
    } 
} 
```

这样做是为了捕获并默默地忽略线程中断时发生的异常......然后继续前进。

如果你想让它在中断时停止，它应该是这个......或类似的东西。

```
public void run() { 
    while (true) { 
        try { 
            Thread.sleep(60000); 
        } catch (InterruptedException e) { 
            return; 
        }
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:01:20.727

如果线程不存在，则意味着

1）它已经死了/完成了。你不能/不需要做任何事情。

2）它是新创建的/尚未开始。那就是 Thread.start() 还没有被调用。在这种情况下 Thread.interrupt() 将无效。您唯一能做的就是一些自定义逻辑 - 通知将启动线程的代码不再需要它

# javascript - html获取innerHTML

> ID：14372966
> 
> 赞同：2
> 
> 时间：2013-01-17T05:55:15.960
> 
> 标签：javascript, html

当用户单击它时，我已将 onClick 事件添加到锚标记。我必须在不使用 id 属性的情况下获取内部 html。以下是我正在使用的代码。请帮助我实现这一目标。

```
function bttnpressed()
{
   alert('inside bttnpressed');
}
<a onclick="bttnpressed()">name1</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:57:08.130

您可以使用[**innerHTML**](http://www.w3schools.com/jsref/prop_html_innerhtml.asp)属性。您需要将事件源传递给`click`可以使用传递的事件`this`。

```
function bttnpressed(obj)
{
   alert('inside bttnpressed');
   alert(obj.innerHTML);
}
<a onclick="bttnpressed(this)">name1</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:04:38.997

这会做

```
function bttnpressed(Currnt)
{
    alert('inside bttnpressed ' + Currnt.innerHTML);
 }

<a onclick="bttnpressed(this)">name1</a> 
```

# sencha-touch-2 - 使用 sencha touch 调用函数时出错

> ID：14372967
> 
> 赞同：-1
> 
> 时间：2013-01-17T05:55:24.543
> 
> 标签：sencha-touch-2

> **可能重复：**
> [如何使用 sencha touch 获取表单值并在数据库中插入该值](https://stackoverflow.com/questions/14397130/how-to-get-the-form-values-and-insert-that-values-in-the-db-using-sencha-touch)

我是 sencha touch 的新手。我想创建一个表单并在数据库中提交该表单的详细信息。为此，我编写了以下代码。

```
Ext.define("Form.view.Main",{
extend: "Ext.form.Panel",

 requires:['Ext.Button',
            'Ext.Spacer',
            'Ext.field.Password'
 ],
config: {
  fullscreen: true,
   id:'form',
items: [
    {
        xtype:'fieldset',
       items:[

           {
               xtype: 'textfield',
               name : 'name',
               label: 'Name'
           },
           {
               xtype: 'emailfield',
               name : 'email',
               label: 'Email',
               placeHolder: 'Email address',
               useClearIcon: true
           },
           {
               xtype: 'passwordfield',
               name : 'password',
               label: 'Password',
               allowBlank:'false'
           }
       ]

},
     {
                centered:'true',
                xtype:'button',
                id:'submitBtn',
                text:'Submit',
                ui:'confirm',
                width:100,
               listeners: {
                    tap : function(thisTxt,eventObj){
                        var form = Ext.getCmp('form');
                        var values = thisTxt.getValues();
                        alert(values.name);
                        Ext.Ajax.request({
                            url:'http://localhost/sencha2011/form/insert.php',
                            params:values,

                            success : function(response){
                                var text = response.responseText;
                                Ext.Msg.alert('Success', text);
                            },
                            failure : function(response){
                                Ext.Msg.alert('Error','Error while submitting the form');
                                console.log(response.responseText);
                            }

                        });

                    }

                }
    }
]
}
}); 
```

当我尝试执行此应用程序时，成功执行（调试）。当我在浏览器中打开应用程序时，我在控制台窗口中出现错误为“未捕获的类型错误：无法调用未定义的方法'getValues'”，并且仅显示表单。当我单击提交按钮时，没有任何反应。任何人都可以帮助解决这个问题。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:43:42.330

首先，您将`id`表单放在错误的位置，它应该放在配置`items`之外

```
config: {
  fullscreen: true,
  id: 'form'
  items: [
  ...........
} 
```

其次，您的查询是错误的，更改此查询：

```
var form = Ext.getCmp(form); 
```

对此：

```
var form = Ext.getCmp('form'); 
```

最后，因为`getvalues`会返回一个包含表单中每个字段值的对象，所以如果你想访问，例如，你的`name`字段，只需这样做：

```
alert(values.name); 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:50:53.420

代替

```
var values = thisTxt.getValues(); 
```

尝试

```
var values = form.getValues(); 
```

或者

```
var values = this.parent.getValues(); 
```

因为[按钮](http://docs.sencha.com/touch/2-1/#!/api/Ext.Button-event-tap)`thisTxt`不是表单，[getValues()](http://docs.sencha.com/touch/2-1/#!/api/Ext.form.Panel-method-getValues)应该在表单面板上调用。

# android - 如何使用简单适配器在 android 的列表视图单选模式中使用单选按钮设置多个文本视图

> ID：14372969
> 
> 赞同：0
> 
> 时间：2013-01-17T05:55:29.100
> 
> 标签：android

我在单选模式的列表视图中遇到问题。我想在列表视图中用一个单选按钮显示三个文本视图。列表视图正常工作。问题是单选模式。我想一次只选择一个列表项，其余的东西取消选择模式。我搜索了最后三天仍然没有任何想法。请你帮助我好吗。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:23:57.680

我不确定您是否可以在不自定义 ArrayAdapter 的情况下显示 3 个文本视图和一个单选按钮

但如果您已成功构建列表，您可以执行以下操作

1-从子元素（radioButton 和 textviews）中移除焦点，您可以从 xml [android:focusable="false"] 和列表视图 [listview.setItemsCanFocus(false)] 中执行此操作

2-使radioButton不能从xml点击[android:clickable="false"]

3-创建一个变量来保存单击的项目（在自定义适配器中）并使用公共方法来更新此位置

4-为列表视图创建OnItemClickListener，更新适配器中的点击位置并调用adapter.notifydatasetchanged

5-确保在getView方法中取消选中radioButton并选中该位置的视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:15:30.933

您可以创建一个变量来保存选择的单选按钮。

在每个单选按钮 onclick 中，您可以设置变量值并将其余单选按钮设置为未选中。

提示：

在单选按钮 xml 中添加：android:onClick“方法名”

在方法中添加 View view 作为参数（例如：public void clickMethod(View view).....）

# silverlight - Slow scrolling over the controls whose mouseOver state is changed

> ID：14372970
> 
> 赞同：1
> 
> 时间：2013-01-17T05:55:30.630
> 
> 标签：silverlight, xaml

Say i have five button controls placed in scrollviewer, out of those i have changed the mouse over state from template of last two buttons, now the problem is when i scroll over those three unmodified buttons scrolling is done very smoothly, but when the scrolling comes to last two template edited buttons and as the cursor comes over them, scrolling done very badly and slow.. Suggest something to get out of it.. It may be because when the same time scrolling going on and also the mouse over state hits so its slow.. Template editing is done in Assets/resourceDictionary.xaml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:52:33.407

Try something - scrollViewer Scloll Started event, when you scroll, that event fire, then code at there something it lapse the mouseover events of controls and again back when scroll copleted

# android - 在 mac 上获取 MD5 证书

> ID：14372976
> 
> 赞同：0
> 
> 时间：2013-01-17T05:56:12.670
> 
> 标签：android, xcode, terminal, md5

有人可以告诉我为什么这个命令

keytool -list -alias androiddebugkey -keystore ~/Desktop/release-1.keystore -storepass android -keypass android

因错误而失败

keytool 错误：java.io.IOException：密钥库被篡改，或密码不正确。

我在哪里弄错了..请给我一个例子，我可以在 mac os 上获取 MD5 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:19:53.887

尝试将密码作为android本身。也许它会起作用。实际上这对我有用，我认为它是密钥库的默认密码。

# java - 数字图像处理中是否有任何标准算法将输入 RGB 图像划分为所需大小的子图像（示例 8x8）

> ID：14372984
> 
> 赞同：3
> 
> 时间：2013-01-17T05:56:58.663
> 
> 标签：java, matlab, image-processing

您好我是数字图像处理的初学者，我只想知道有什么标准算法吗？将输入的 RGB 图像划分为所需大小的子图像，然后将这些子图像组合成原始图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:25:46.230

MATLAB 为您提供了一个名为`blockproc`. 在您的情况下，使用输入图像`I`，您会说您定义的函数`I2 = blockproc(I, [8, 8], @fun);`在哪里。[http://www.mathworks.com/help/images/ref/blockproc.html](http://www.mathworks.com/help/images/ref/blockproc.html)显示了简单的示例。`fun`

请注意，这实际上仅适用于您希望将图像拆分`I`为给定大小的图块（例如 8 x 8），以定义的特定方式处理每个图块`fun`，然后`I2`从每个图块的结果重新组合图像的情况。

结果可以是单个数字或矩阵，两者都可以，但使用`blockproc`实际上仅限于分割成块，处理每个块，然后将结果重新组合成输出图像的情况。但是，这非常方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T06:08:56.540

```
% Demo to divide a color image up into blocks.
clc;    % Clear the command window.
close all;  % Close all figures (except those of imtool.)
workspace;  % Make sure the workspace panel is showing.
fontSize = 20;

% Read in a standard MATLAB color demo image.
folder = fullfile(matlabroot, '\toolbox\images\imdemos');
baseFileName = 'peppers.png';
% Get the full filename, with path prepended.
fullFileName = fullfile(folder, baseFileName);
if ~exist(fullFileName, 'file')
    % Didn't find it there.  Check the search path for it.
    fullFileName = baseFileName; % No path this time.
    if ~exist(fullFileName, 'file')
        % Still didn't find it.  Alert user.
        errorMessage = sprintf('Error: %s does not exist.', fullFileName);
        uiwait(warndlg(errorMessage));
        return;
    end
end
% Read the image from disk.
rgbImage = imread(fullFileName);

% Test code if you want to try it with a gray scale image.
% Uncomment line below if you want to see how it works with a gray scale image.
% rgbImage = rgb2gray(rgbImage);

% Display image full screen.
imshow(rgbImage);
% Enlarge figure to full screen.
set(gcf, 'units','normalized','outerposition',[0 0 1 1]);
drawnow;
% Get the dimensions of the image.  numberOfColorBands should be = 3.
[rows columns numberOfColorBands] = size(rgbImage)

%==========================================================================
% The first way to divide an image up into blocks is by using mat2cell().
blockSizeR = 150; % Rows in block.
blockSizeC = 100; % Columns in block.

% Figure out the size of each block in rows. 
% Most will be blockSizeR but there may be a remainder amount of less than that.
wholeBlockRows = floor(rows / blockSizeR);
blockVectorR = [blockSizeR * ones(1, wholeBlockRows), rem(rows, blockSizeR)];
% Figure out the size of each block in columns. 
wholeBlockCols = floor(columns / blockSizeC);
blockVectorC = [blockSizeC * ones(1, wholeBlockCols), rem(columns, blockSizeC)];

% Create the cell array, ca.  
% Each cell (except for the remainder cells at the end of the image)
% in the array contains a blockSizeR by blockSizeC by 3 color array.
% This line is where the image is actually divided up into blocks.
if numberOfColorBands > 1
    % It's a color image.
    ca = mat2cell(rgbImage, blockVectorR, blockVectorC, numberOfColorBands);
else
    ca = mat2cell(rgbImage, blockVectorR, blockVectorC);
end

% Now display all the blocks.
plotIndex = 1;
numPlotsR = size(ca, 1);
numPlotsC = size(ca, 2);
for r = 1 : numPlotsR
    for c = 1 : numPlotsC
        fprintf('plotindex = %d,   c=%d, r=%d\n', plotIndex, c, r);
        % Specify the location for display of the image.
        subplot(numPlotsR, numPlotsC, plotIndex);
        % Extract the numerical array out of the cell
        % just for tutorial purposes.
        rgbBlock = ca{r,c};
        imshow(rgbBlock); % Could call imshow(ca{r,c}) if you wanted to.
        [rowsB columnsB numberOfColorBandsB] = size(rgbBlock);
        % Make the caption the block number.
        caption = sprintf('Block #%d of %d\n%d rows by %d columns', ...
            plotIndex, numPlotsR*numPlotsC, rowsB, columnsB);
        title(caption);
        drawnow;
        % Increment the subplot to the next location.
        plotIndex = plotIndex + 1;
    end
end

% Display the original image in the upper left.
subplot(4, 6, 1);
imshow(rgbImage);
title('Original Image');

%==============================================================================
% Another way to split the image up into blocks is to use indexing.
% Read in a standard MATLAB gray scale demo image.
folder = fullfile(matlabroot, '\toolbox\images\imdemos');
baseFileName = 'cameraman.tif';
fullFileName = fullfile(folder, baseFileName);
% Get the full filename, with path prepended.
fullFileName = fullfile(folder, baseFileName);
if ~exist(fullFileName, 'file')
    % Didn't find it there.  Check the search path for it.
    fullFileName = baseFileName; % No path this time.
    if ~exist(fullFileName, 'file')
        % Still didn't find it.  Alert user.
        errorMessage = sprintf('Error: %s does not exist.', fullFileName);
        uiwait(warndlg(errorMessage));
        return;
    end
end
grayImage = imread(fullFileName);
% Get the dimensions of the image.  numberOfColorBands should be = 1.
[rows columns numberOfColorBands] = size(grayImage);
% Display the original gray scale image.
figure;
subplot(2, 2, 1);
imshow(grayImage, []);
title('Original Grayscale Image', 'FontSize', fontSize);
% Enlarge figure to full screen.
set(gcf, 'units','normalized','outerposition',[0 0 1 1]);

% Divide the image up into 4 blocks.
% Let's assume we know the block size and that all blocks will be the same size.
blockSizeR = 128; % Rows in block.
blockSizeC = 128; % Columns in block.
% Figure out the size of each block. 
wholeBlockRows = floor(rows / blockSizeR);
wholeBlockCols = floor(columns / blockSizeC);
% Preallocate a 3D image
image3d = zeros(wholeBlockRows, wholeBlockCols, 3);
% Now scan though, getting each block and putting it as a slice of a 3D array.
sliceNumber = 1;
for row = 1 : blockSizeR : rows
    for col = 1 : blockSizeR : columns
        % Let's be a little explicit here in our variables
        % to make it easier to see what's going on.
        row1 = row;
        row2 = row1 + blockSizeR - 1;
        col1 = col;
        col2 = col1 + blockSizeC - 1;
        % Extract out the block into a single subimage.
        oneBlock = grayImage(row1:row2, col1:col2);
        % Specify the location for display of the image.
        subplot(2, 2, sliceNumber);
        imshow(oneBlock);
        % Make the caption the block number.
        caption = sprintf('Block #%d of 4', sliceNumber);
        title(caption);
        drawnow;
        % Assign this slice to the image we just extracted.
        image3D(:, :, sliceNumber) = oneBlock;
        sliceNumber = sliceNumber + 1;
    end
end
% Now image3D is a 3D image where each slice, 
% or plane, is one quadrant of the original 2D image.

msgbox('Done with demo!  Check out the two figures.'); 
```

您还可以查看这篇文章[Algorithm to split a image into small images 减少空白数量并指定最大矩形数量](https://stackoverflow.com/questions/5991302/algorithm-to-split-an-image-into-smaller-images-reducing-the-amount-of-whitespac)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T08:04:42.133

你可以用它`reshape`来完成。例如，假设我们有一个 64x64 像素的 RGB 图像

```
im=rand(64,64,3); 
```

让我们将其划分为 8x8 矩阵

```
ims=reshape(im,8,8,3,[]);
size(ims)
ans =
 8     8     3    64 
```

并将`im=reshape(ims,64,64,[]);`它恢复到原来的大小。

所以这是一个将图像划分为 64 个子矩阵的粗略示例，每个子矩阵都保留其 RGB 分量。您需要的很可能不会使用这种通用的重塑，而是需要在当地社区应用一些功能。例如使用`medfilt2(im,[8 8])`image 或本地标准偏差的2-d 中值归档`stdfilt(im, [8 8])`，或者`blockproc`已经提到过的，等等......所以当你明白你想要什么时，请问一个更具体的问题.. .

# php - 无法在 Smarty 中检索 cookie 的值

> ID：14372985
> 
> 赞同：0
> 
> 时间：2013-01-17T05:57:03.903
> 
> 标签：php, jquery, cookies, smarty

我正在制作一个表单，我可以在其中获取用户的姓名和电子邮件以发表评论。我在 jquery ajax 和 PHP 文件中发送这些数据，我正在使用此代码设置 cookie。

```
 $strUserName    =   $_POST['strUserName'];
            $strEmail       =   $_POST['strEmail'];
        if ($_COOKIE["userNameCookie"] != $strUserName){
            setcookie("userNameCookie","",time()-3600);
        setcookie("userNameCookie", $strUserName,time()+60*60,"/domainName");}
        if ($_COOKIE["userEmailCookie"] != $strEmail){
            setcookie("userEmailCookie","",time()-3600);
        setcookie("userEmailCookie", $strEmail,time()+60*60,"/domainName");} 
```

在 Html 中，我得到了这样的 cookie 值

```
<input type="text" id="txtUserName" name="txtUserName"  value="{$smarty.cookies.userNameCookie}">
<input type="text" id="txtEmailQuest" name="txtEmailQuest" value="{$smarty.cookies.userEmailCookie}"> 
```

在浏览器中，cookie 值设置正确。但我不能在我的 HTML 中使用这个值。此外，我还需要在其他页面中使用相同的 cookie 值。如何在 html 中设置 cookie 值并从其他页面中的 cookie 中检索这些值。希望我的问题很清楚。

提前致谢！！！

# c# - 在现有 VM 上部署服务

> ID：14372988
> 
> 赞同：0
> 
> 时间：2013-01-17T05:57:15.510
> 
> 标签：c#, .net, azure, azure-web-roles, azure-clouddrive

我想在已经托管网站的现有 VM 中进行一些维护。所以我创建了一个 Web 角色并将其打包到 .cspkg 文件中。我没有办法在现有的虚拟机上部署它。可以说我没有可以创建的任何剩余的 Vm 新实例，而且我不想删除以前创建的 Vm 实例。我只想在现有的 VM 中添加它。
我实际上想从 blob 存储安装驱动器。所以我按照[这个](http://www.codeproject.com/Articles/81413/Windows-Azure-Drives-Part-1-Configure-and-Mounting)链接为它创建了网络角色。是否可以通过创建具有相同逻辑的小型 .exe 文件来在 c# 中挂载驱动器来做同样的事情。我可以在 VM 中随时执行并做我想做的事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:46:50.480

如果我正确理解了您的问题，那么您已经部署了一个 Web 角色，您希望使用新包进行更新。除其他方式外，这可以通过管理门户进行。选择您要更新的云服务，然后选择您的部署槽（生产或暂存），您将能够单击底部工具栏上的更新按钮，这将打开一个弹出窗口，允许您提供新的包和配置文件。

![更新对话框](../Images/f88ea6cc690df057bc32c144afbafc70.png)

更好的选择是将新版本部署到暂存槽，对其进行测试，然后使用 VIP Swap 在暂存和生产之间进行交换，使最新的包成为“实时”包。

# codeigniter - Codeigniter 中的简单删除

> ID：14372989
> 
> 赞同：1
> 
> 时间：2013-01-17T05:57:15.773
> 
> 标签：codeigniter

**在 codeigniter 中创建简单删除的任何人。帮我！**. 这是我的看法

```
<a href="<?php echo base_url(); ?>home/del/<?php echo $row->id; ?>">Delete</a> 
```

帮我在 codeigniter 创建一个简单的删除数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:57:38.647

你可以像这个
控制器那样做

```
Class Home Extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
        $this->load->model('mymodel');
    }

    function index()
    {
        //blah blah
    }

    function del()
    {
        $id =   $this->uri->segment(3);
        $this->mymodel->delete($id);
        redirect('home/index');
    }
} 
```

模型

```
Class Mymodel Extends CI_Model
{
    function __construct()
    {
        parent::__construct();
    }

    function delete($id)
    {
        $this->db->where('id',$id);
        $this->db->delete('tablename');
    }
} 
```

# svn - 是否可以在 TortoiseSVN/VisualSVN 中预先定义新的项目结构？

> ID：14372993
> 
> 赞同：1
> 
> 时间：2013-01-17T05:57:48.817
> 
> 标签：svn, tortoisesvn, visualsvn-server

TortoiseSVN/VisualSVN 是否可以预先定义项目结构，以便您只需单击“新项目”或类似内容？

例如，在 VisualSVN 中，您可以创建新项目并`trunk/branch/tag`自动获取文件夹。

但是，我想在 TortoiseSVN 中做同样的事情（所以用户可以在不需要 VisualSVn 访问的情况下做到这一点）

和/或

我想预先设置比这更多的文件夹，例如

```
trunk/docs
trunk/src
trunk/database
trunk/elephant 
```

ETC...

这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:21:25.630

由于 Subversion 至少使用二进制差分算法和数据压缩（可选地在完全不透明的数据库系统中）存储您的版本化历史，因此尝试手动调整即使不是很困难也是不明智的，并且无论如何强烈建议不要这样做。一旦数据被存储在你的存储库中，Subversion 通常不会提供删除该数据的简单方法。

对你来说，svn mkdir 将完成这项工作。 [参考](https://stackoverflow.com/questions/361801/how-to-change-structure-of-subversion-repository)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:24:25.687

使用最新的 VisualSVN 服务器和 TortoiseSVN，您会收到有关在创建存储库后创建默认布局的请求。不支持非标准树，但您始终可以为此任务编写 bat 文件

# python - 从 MATLAB 调用 Python 脚本

> ID：14372998
> 
> 赞同：0
> 
> 时间：2013-01-17T05:58:08.970
> 
> 标签：python, matlab

> **可能重复：**
> [从 MATLAB 调用 python 函数](https://stackoverflow.com/questions/1707780/call-python-function-from-matlab)

有没有办法从 MATLAB 调用 Python 脚本中的函数，如果有，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:50:32.277

你正在尝试做一些不平凡的事情。Matlab 没有任何 Python 脚本绑定，而且我也不知道有什么好的替代品。您可以在两条道路之间进行选择，也许一条可以帮助您一点（尽管两者都不是微不足道的，就像您的任务一样）：

## 转换为 Python

如今，Python 是大多数 Matlab 用例的有效替代品。有用于数学计算、科学例程的库、一个很棒的绘图库和一个很棒的社区，它们会尽力帮助您解决所有问题。而且，它是免费的。

如果您只有几个 Matlab 脚本正在运行，或者您刚刚开始使用 Matlab，我建议您考虑更换平台。要转换现有的 Matlab 脚本，您可以尝试[Open Matlab-Python-Converter](http://ompc.juricap.com/)。

## 使用 Python 创建 Web 服务并从 Matlab 访问它

从 Matlab 执行 Python 代码的最简洁的方法是使用 Python 设置一个 Web 服务并从 Matlab 调用这个 Web 服务。这听起来很复杂，但事实并非如此。对于小型项目，我推荐 XML-RPC。您可以查看[我的另](https://stackoverflow.com/questions/14352983/is-there-a-proper-way-to-use-python-code-from-php/14353762#14353762)一篇文章以查看小型 XML-RPC-server 的示例。如果您的方法存在，很容易适应您的需求，只需导入这些方法并将它们作为 Web 服务调用提供。

在 Matlab 方面，您必须坚持使用第三方工具来连接 XML-RPC 服务器，例如[Apache XML-RPC jars](https://wiki.nbic.nl/index.php/Matlab_XMLRPC)。

当您想要传入除原语以外的其他变量（例如数组）时，它可能会变得复杂。我没有经验这有多好。