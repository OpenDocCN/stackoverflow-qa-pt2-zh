# StackOverflow 问答 13396000-13396999

# c# - 避免错误：对象引用未设置为对象的实例

> ID：13396012
> 
> 赞同：0
> 
> 时间：2012-11-15T10:53:37.820
> 
> 标签：c#, hibernate, nhibernate

我有以下两个功能：

```
 private object[] GetFormatedDataArray(
            Dienstleistungsreservierung dlres,
            KostenstellenProvider kstProvider)
        {
            SAPKonto konto;
            try { konto = KontierungsProvider.Instance.GetSAPKonto(dlres); }
            catch { konto = new SAPKonto(); konto.KontoText = "UNBEKANNT"; }

            Kostenstelle kst = kstProvider.GetKostenstelle(dlres.Raumreservierung.Buchung);
            KostenstellenValidator.Validate(kst);

            return new object[] {

                dlres.Raumreservierung.VirtualRaum.Etage.Gebaeude.KonfStandort,
                dlres.Raumreservierung.VirtualRaum.Etage.Gebaeude.Partner.AnsprechPartnerName,  

       ......

} 
```

有一种可能性是：

```
dlres.Raumreservierung.VirtualRaum.Etage.Gebaeude.Partner 
```

是空的，因为我围绕创建.csv文件做了一个if子句，如果值为空或！=空，他应该创建文件。

使用该函数/该函数的返回值，我创建了一个 .csv 文件。

```
 {
       .....
        var file = GetCsvFile(dl, accDate);
                    // CSV werden auf Platte geschrieben!
                    var csvWriter = new CSVWriter(file);
                    csvWriter.WriteLine(GetHeader());

                    foreach (Dienstleistungsreservierung dlres in dlDic[dl])
                    {
                        if (dlres.Raumreservierung.VirtualRaum.Etage.Gebaeude.Partner == null || dlres.Raumreservierung.VirtualRaum.Etage.Gebaeude.Partner != null)
                        {
                            csvWriter.WriteLine(GetFormatedDataArray(dlres, kstProvider));
                        }
                    }
                    csvWriter.Flush();

    ....
    } 
```

但是错误仍然存​​在吗？有没有其他方法可以绕过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:56:07.530

```
if (dlres.Raumreservierung.VirtualRaum.Etage.Gebaeude.Partner == null || 
    dlres.Raumreservierung.VirtualRaum.Etage.Gebaeude.Partner != null) 
```

你的`if`陈述包含**矛盾**的检查。如果 的值有`dlres.Raumreservierung.VirtualRaum.Etage.Gebaeude.Partner`可能为空，那么您应该检查它是否不为空，然后继续。像下面这样的东西

```
if (dlres.Raumreservierung.VirtualRaum.Etage.Gebaeude.Partner != null) 
```

# mysql - 如何通过zerofill对mysql分组？

> ID：13396020
> 
> 赞同：0
> 
> 时间：2012-11-15T10:53:56.447
> 
> 标签：mysql, group-by, zerofill

```
SELECT count(w.c1) AS count
     , w.c1 AS color
FROM
  data w
GROUP BY
  w.c1
ORDER BY
  w.id DESC
LIMIT
  50000; 
```

我想知道，是否有任何类型的 mysql 查询按 zerofill 值分组，我将 c1 中的所有值作为 rgb 代码“ `0002500034`” `(r=000/g=250/b=034)`，查询后显示如下`000250034->250034`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:56:07.987

LPAD MySQL 功能怎么样？LPAD(str, len, padstr)

```
SELECT count(w.c1) AS count
 , LPAD(w.c1, 9, '0')  AS color
FROM
  data w
GROUP BY
  w.c1
ORDER BY
  w.id DESC
LIMIT
  50000; 
```

您还可以将列类型转换为 CHAR(9)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:07:25.007

```
选择计数（w.c1）作为计数
     , concat(w.c1) AS 颜色
从
  数据w
通过...分组
  w.c1
  按 w.c1 顺序排序
限制
  50000；
```

刚试过，效果很好，我也试试你的版本

编辑：我的查询：

```
+-----------------+------------+
| 变量名 | 价值 |
+-----------------+------------+
| Last_query_cost | 16.599000 |
+-----------------+------------+

```

与你的

```
+-----------------+----------+
| 变量名 | 价值 |
+-----------------+----------+
| Last_query_cost | 3.599000 |
+-----------------+----------+

```

# ruby-on-rails - 缩写 response_to

> ID：13396021
> 
> 赞同：1
> 
> 时间：2012-11-15T10:54:00.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前正在开发基于 Rails 3 构建的 Web 应用程序，该应用程序大量使用 Ajax/REST 作为客户端。因此，我经常发现自己编写这样的控制器操作：

```
def create
  if !params[:name] 
    respond_to do |format|
      format.html { render json: {}, status: :not_found }
      format.json { render json: {}, status: :not_found }
    end
    return
  end

  account = ...
  respond_to do |format|
    format.html { render json: account }
    format.json { render json: account }
  end
end 
```

几乎我所有的操作都是在成功案例或错误代码中返回一个 json 对象。但是，如果我希望动作更早地返回，我总是必须编写这个详细的 respond_to 块并返回。

相反，我想改用这样的东西，或者类似的替代方案：

```
def create
  if !params[:name] 
    throw :not_found
  end

  account = ...
  return account
end 
```

Rails 3+ 如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:18:37.293

看看[inherited_resources](https://github.com/josevalim/inherited_resources)。这将允许您将控制器重写为：

```
class SomeController < ApplicationController
  inherit_resources
  respond_to :html, :js, :json
end 
```

这就对了。您的所有创建/读取/更新/删除方法都将照常访问。您可以像我过去一样，从使用hereded_resources 的主资源控制器继承，然后您可以以更通用的方式调整响应。

```
class ResourcesController < ApplicationController
  inherit_resources
  respond_to :html, :js

  def create
    create! do |format|
      format.js do
        # generic code here for managing all create methods initiated via js
        # current model is avialbe via 'resource'
        # e.g 'resource.errors'
      end
    end
  end 
```

然后简单地从该控制器继承：

```
class SomeController < ResourcesController

end 
```

这种抽象对于大多数目的来说可能是多余的，但是当处理 30 或 40 个模型时，它非常方便，这些模型都需要类似的控制器。

Inherited_resources 为访问当前模型（称为资源）提供了许多帮助程序以促进动态引用，因此您可以例如返回相关表单或基于资源/模型名称的部分。

为了让您了解如何使用它，您可以通过在参数中使用控制器名称来返回当前控制器的表单。需要注意的是，格式错误的控制器名称不会到达此方法（因为它会返回 404），因此可以安全使用：

```
 format.js do
    render "#{params[:controller]}/form"
  end 
```

最重要的是，您可以通过在特定控制器中定义它们来自己覆盖任何方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:59:47.047

如果您总是返回 json，您可以省略该`respond_to`块并将其编写为：

```
def create
  if !params[:name] 
    render json: {}, status: :not_found
    return
  end

  account = ...
  render json: account
end 
```

# c - 包含 png 信息的假目录

> ID：13396024
> 
> 赞同：0
> 
> 时间：2012-11-15T10:54:09.387
> 
> 标签：c, unix, directory

众所周知，我们可以`/dev/video0`将目录作为接收网络摄像头输出的目录。

是否可以通过程序创建一个假`/dev/something`目录`C`并不断输出一些创建的 png 文件的内容以创建一个`fake webcam`示例？

然后，我将读取`live`其他应用程序的流。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:24:31.683

如果您只需要文件系统中某个应用程序可以读取某些特定数据的位置，请使用`mkfifo`它来创建它。

然后，您可以编写一个生产者，以任何比特率写入您需要的任何内容，并让消费者从中读取。如果您输出消费者的期望，您可能会得到类似于伪造数据的“实时流”的东西。

# javascript - 使用脚本对所有图像产生影响

> ID：13396026
> 
> 赞同：-2
> 
> 时间：2012-11-15T10:54:17.523
> 
> 标签：javascript, jquery, asp.net-mvc

我有一个从数据库中检索一些图像并显示它们的视图。现在我想给它们添加一些效果。我使用了一个 jquery 插件。请看我的代码：

![在此处输入图像描述](../Images/5804bf7339051da53a6ca677b74aa281.png)

但脚本效果仅对第一个出现的图像产生影响，并非全部。哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:58:40.413

使用 JQuery 选择器获取页面中的所有图像：

```
$('img').adipoli({
        'startEffect': 'overlay',
        'hoverEffect': 'sliceDown' 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:56:38.060

每个元素的 ID 必须是唯一的，请改用类或带有上下文的标记名称：

```
$('.myImgClass').adipoli({
            'startEffect': 'overlay',
            'hoverEffect': 'sliceDown'
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:57:21.193

ID 首先必须是唯一的，这就是为什么它只对具有该 id 的第一个元素生效，所以不要尝试这个

```
$('.adipoli-wrapper img').adipoli({
            'startEffect': 'overlay',
            'hoverEffect': 'sliceDown'
}); 
```

它将对 span 中具有类 adipoli-wrapper 的所有图像标签生效，或者为您的图像标签提供一个唯一的类并使用它

```
 $('.YourClassName').adipoli({
                'startEffect': 'overlay',
                'hoverEffect': 'sliceDown'
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:22:12.477

问题是您使用 id 作为选择器（`$('#kio')`，# 表示它是一个 id）并且 id 对页面来说是唯一的，因此只会返回一个。因此，您应该将 id 属性留在 img 标记之外。

解决方案是使用一个选择器，为您提供所需的所有元素，在这种情况下`$('.adipoli-wrapper img')`，第一部分可能选择所有带有 class`adipoli-wrapper`的元素，然后 img 部分将选择`img`在这些元素中找到的所有元素。

附带说明：`adipoli-wrapper>img`您的代码中的类名不是有效的类名，您可能的意思只是`adipoli-wrapper`，我在回答中假设的。

# sql - 从另一台机器上的 .bak 文件恢复数据库

> ID：13396027
> 
> 赞同：12
> 
> 时间：2012-11-15T10:54:16.303
> 
> 标签：sql, sql-server, database, database-restore

我没有做太多的 SQL 并且对此仍然很陌生，所以请原谅可能是一个基本问题。

我被要求研究创建一个 SQL 作业来备份我们的数据库，将 .baks 存储在另一台机器上，然后将它们恢复到第二台服务器。我一直在做一些研究并使用 SSMS，并通过设置共享并将备份作业运行到共享位置，将数据库备份到我的个人计算机上。我现在正在尝试通过恢复 .bak 文件来创建一个新数据库（在我备份的同一台服务器上）（但给数据库我正在尝试创建一个新名称等等）但我无法指定从共享中恢复它，就像我在备份它时所做的那样/我找不到如何指定其他网络位置，并且在我尝试查找文件时只是浏览服务器的 C 驱动器。

目前，我只是使用内置向导来尝试实现这一点（打开 SSMS -> 连接到服务器 -> 右键单击​​数据库 -> 还原数据库，然后选择从设备并浏览以查找文件）。

这不是最后的过程，只是我试图掌握它是如何工作的。正如我所说，我们的想法是最终有一个预定的工作将数据库从 server1 备份到 .bak 上，比如说，我的个人机器上，然后将其恢复到 server2 上的数据库（不同的网络，不同的城市），并且可能，使用一系列 SQL 命令，而不是每次都使用向导（有一些 DB 最终需要备份）。

对于这个可能相当冗长且令人费解的问题，我深表歉意——本质上，我需要知道的是我可以/如何从另一台机器上的 .bak 恢复 SSMS 中的数据库？非常感谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-15T11:01:08.963

您可以使用类似以下脚本的内容。它从文件系统恢复数据库，并用名称“MyDB”覆盖现有数据库，在此过程中将文件移动到您选择的新位置。

```
恢复数据库
    数据库
从磁盘 = '\\MyShare\MyBackup.bak'
和
    将“数据文件”移动到“D:\myNewDBLocation\DataFile.mdf”，
    将“日志文件”移动到“E:\\myNewDBLocation\LogFile.ldf”
， 代替

```

您可以找到 llogical 文件的名称（在上面，这些文件被调用`DataFile`并`LogFile`通过运行以下命令：

```
仅恢复文件列表
从磁盘 = '\\MyShare\MyBackup.bak'

```

有关各种选项和参数的附加信息：

[恢复 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms186858.aspx)

# c++ - 带有 HTML-reportgenerator 的 c++ XML 解析器的架构

> ID：13396029
> 
> 赞同：0
> 
> 时间：2012-11-15T10:54:22.343
> 
> 标签：c++, qt, oop, architecture

我想要一个解析 XML 文件的程序，用我需要的标签构建一个结构，最后使用 HTML 模板打印一个 HTML 报告，其中的关键字被 XML 文件中的数据替换。由于我还没有（还）真正进入 OO 编程，我希望获得一些关于如何构建这样的程序的提示和建议。我认为两节课就足够了。一个解析器类和一个数据类。第一个通过 XML 文件并将我想要存储的每个标签报告给一个数据对象，该数据对象以分层顺序存储所有标签。之后，我想调用一个打印函数，它将所有内容打印为 HTML 报告。

1.  我不确定如何将标签报告给数据对象
2.  我可以将标签存储在一个存储结构树的对象中，还是将每个标签存储在单独的对象中更好？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:07:30.447

您在问题中没有提到 Qt，但是当您将其添加为标签时：有 QtXML，它将提供一种解析和生成 XML 文档的方法，并且也适用于 HTML 输出。XML 通常通过 DOM 或 SAX 处理。使用 DOM，文档被解析为树形结构，您将在树上工作作为您的中心数据元素。使用 SAX，您可以在解析 XML 输入时使用为不同 XML 元素调用的回调函数。

互联网上有很多关于 DOM 和 SAX 的内容，维基百科是一个很好的起点。网上也有很多关于 QtXML 的文档。

使用 DOM 和/或 SAX 将为解决问题提供一个很好的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:51:12.063

我解决了我的问题并想分享我的架构。我制作了一个类解析器来解析元素并将标签报告给一个 HTMLHandler 类，该类具有像标题、内容和子内容这样的子类。它存储数据并且都有 write()- 方法来打印自己。

对我来说很好，而且很简单:)

# javascript - 谷歌地图 api 地理编码限制

> ID：13396030
> 
> 赞同：-2
> 
> 时间：2012-11-15T10:54:23.120
> 
> 标签：javascript, google-maps, google-maps-api-3

谷歌地图免费 API 每天提供 2500 次地理编码。

限制是否仅适用于调用 javascript 的 IP 或网站上的客户端？

由于请求是 JSONP，因此请求来自用户，所以如果限制基于 IP，那么我应该清楚，无论发出多少请求..

但是，我担心谷歌会做一些恶作剧..

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:10:24.303

您对 Google Maps API 的使用受限于每个站点域，而不是 API 密钥（因为 API 密钥完全是可选的）。即使您没有使用 API 密钥，您的使用也会受到站点的限制，当您向 Google 提出请求时会报告这一点。

我不确切知道 Google 的规则是什么，但我猜 2500 个限制是每个二级域（例如，`example.com`它的所有子域共享一个每天 2500 个请求的池）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:36:46.980

Google Maps API 根据您的 API 密钥限制您。您在加载 javascript 文件时提供 API 密钥

```
https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE" 
```

# .htaccess - 使用 .htaccess 阻止 Pdf 文件直接访问

> ID：13396033
> 
> 赞同：0
> 
> 时间：2012-11-15T10:54:27.767
> 
> 标签：.htaccess, blocking

这个问题已经问了好几次了，我已经尝试了所有可用的选项，但我仍然很难阻止使用绝对 URL 直接访问 pdf 文件。

我在 .htaccess 文件中使用以下代码，该文件位于 pdf 所在的同一文件夹中

```
Order Allow,Deny
  <FilesMatch "^[^.]+\.(gif|jpe?g|png|pdf|doc|docx|txt|rtf|ppt|pptx|xls|mp4|mov|mp3|mpg|mpeg)$">
   Deny from all
  </FilesMatch> 
```

当我访问 pdf 文件的目录时，它向我显示 403 禁止访问，但是当我输入 pdf 的绝对 url 时，它开始在浏览器中呈现 pdf。

目录网址[http://thetutlage.com/demo/pdfReader/files](http://thetutlage.com/demo/pdfReader/files)

Pdf 网址：- [http://thetutlage.com/demo/pdfReader/files/tracemonkey.pdf](http://thetutlage.com/demo/pdfReader/files/tracemonkey.pdf)

任何帮助都会很棒。如果文件具有 .pdf 扩展名，我也尝试使用重定向规则，但这似乎也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-15T09:49:47.563

工作正常：

```
Order Allow,Deny
Allow from all
<Files ~ "\.(gif|jpg|png|pdf)$">
Deny from all
</Files> 
```

# javascript - Lightview 3 - 关闭 lightview 并重定向到另一个页面

> ID：13396035
> 
> 赞同：0
> 
> 时间：2012-11-15T10:54:29.783
> 
> 标签：javascript

我将 Lightview 3 用于画廊类型效果。我正在尝试使用简单的文本链接来模拟“交叉”关闭图标的效果 -

IE。如果我单击它关闭并重定向到另一个页面的十字架，我如何在实际的文本链接上模拟它。

[http://projects.nickstakenburg.com/lightview](http://projects.nickstakenburg.com/lightview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:12:12.097

找到了..

```
<a href='javascript:window.parent.Lightview.hide();'>Close Me</a> 
```

# java - 在 JAVA 中生成 JSON

> ID：13396041
> 
> 赞同：1
> 
> 时间：2012-11-15T10:54:51.730
> 
> 标签：java, json, spring

我想在 Java 中生成 JSON 代码：

```
 {
    "rowsPerPage": 10,
    "page": 1,
    "total": 100,      
    "rows": [
            {
                "id": 1,
                "name": "name1"
            },
            {
                "id": 2,
                "name": "name2"
            },
            {
                "id": 3,
                "name": "name3"
            }
        ]
} 
```

我知道如何生成 rowsPerPage、page 和 total，但我不知道如何生成行？

```
 ModelMap modelMap = new ModelMap();
            modelMap.put("rowsPerPage", 10);
            modelMap.put("page", 1);
            modelMap.put("total", 100); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:10:20.253

本质上，你想要这样的东西：

```
ModelMap [] rowMap = new  ModelMap()[3];
for (int i=0;i<3;i++)
{
  ModelMap this_row=new ModelMap();
  this_row.put("id",i);
  this_row.put("name","name"+i);
  rowMap(i)=this_row;
}
modelMap.put("rows",rowMap); 
```

这可能需要调整以满足您的需求，但它至少应该向您展示如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:25:22.753

将每一行内容放在地图中

```
 for(Row row :rows){
     HashMap map = new HashMap();
     map.put("id",row.getId());
     map.put("name",row.getName());
     jsonObj.append("rows", map);
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:07:29.293

您应该使用像 Google 的 GSON 这样的 JSON 工具：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# winforms - 如何在 c sharp 中调用嵌套结构

> ID：13396042
> 
> 赞同：0
> 
> 时间：2012-11-15T10:54:54.023
> 
> 标签：winforms, c#-4.0

大家好，我正在尝试创建嵌套结构然后使用它，但我做不到

我所做的是

```
public struct number
        {
            int[] linenumber;

            public struct information
            {
                public linenumber name, surname, id, phone;

            }
        } 
```

我要做的是创建一个行号数组，堆栈中的每个数字都应该包含姓名姓氏ID和电话信息..

要使用它，我会写 number inf = new number(); 然后尝试 inf.linenumber[n].name // 其中 n 是我的计数器.. 但它不起作用，有什么想法我必须做的吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:28:55.590

你应该写这样的东西。

```
public struct number
    {
        public information[] linenumber;

        public struct information
        {
            public string name, surname, id, phone;

        }
    } 
```

# .net - 动态仪表板

> ID：13396043
> 
> 赞同：0
> 
> 时间：2012-11-15T10:54:57.247
> 
> 标签：.net, winforms, graphics

我正在寻找执行以下操作的 .NET Winforms 控件（或关于如何最好地自己编写代码的建议）：

*   显示客户场所的地图/布局（作为图像上传）。
*   用代表位于场所不同位置的传感器的图标覆盖此图像。这些图标将指示传感器的位置和状态（绿色、红色等）。
*   图标需要实时更改以反映传感器的当前状态。
*   允许用户平移和缩放整个控件，因为它将是一个大图像，并且没有足够的空间来将所有内容放入一个视图中。
*   允许用户将图标拖放到图像上和/或修改布局。

或者，如果有开箱即用的第三方应用程序，那么我们很乐意花钱而不是重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:19:27.370

我认为这个控件会让你完成一半，然后你必须自己编写传感器的位置。

[http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsPictureEdittopic](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsPictureEdittopic)

传感器的放置很可能您必须自己处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:10:34.693

免责声明：我是 VG.net 的首席开发人员。该工具专为您的应用类型而设计。例如： [http ://www.vgdotnet.com/process_control.shtml](http://www.vgdotnet.com/process_control.shtml "过程控制示例")

# cakephp - cakephp有很多表单数据

> ID：13396049
> 
> 赞同：3
> 
> 时间：2012-11-15T10:55:28.620
> 
> 标签：cakephp

我想为一个产品保存多个类别。

我有模型：

```
Category.php
public $hasAndBelongsToMany = array(
        'Product' => array(
            'className' => 'Product',
            'joinTable' => 'product_categories',
            'foreignKey' => 'category_id',
            'associationForeignKey' => 'product_id',
            'unique' => 'keepExisting',
        )
    );

Product.php
public $hasMany = array(
        'ProductCategory' => array(
            'className' => 'ProductCategory',
            'foreignKey' => 'product_id',
            'dependent' => false,

        ),

ProductCategory.php
public $belongsTo = array(
        'Product' => array(
            'className' => 'Product',
            'foreignKey' => 'product_id',

        ),
        'Category' => array(
            'className' => 'Category',
            'foreignKey' => 'category_id',
        )
    ); 
```

因此，在产品/添加视图中，我通过以下方式添加了一组类别复选框：

```
echo $this->Form->input('ProductCategory.category_id',array(
        'label' => __('Category',true),
        'type' => 'select',
        'multiple' => 'checkbox',
        'options' => $categories
    )); 
```

但这会产生一组输入，其名称为：`name="data[ProductCategory][category_id][]"`而不是`name="data[ProductCategory][0][category_id]"`递增的零。

如果它们的格式是模型和字段之间的键，那么我可以使用 saveAll()？因为它是我得到的格式，所以我必须操作 request->data 以将其转换为我希望能够保存的形式（）

我会以正确的方式解决这个问题吗？或者我的模型设置不正确？

另外，编辑 hasMany 数据会发生什么？例如，如果我取消选中一个选项并添加另一个选项怎么办？cake 在添加新记录之前会自动删除所有关联记录吗？

编辑。

本质上，我要问的是有没有更好或更快的方法来做到这一点，它现在有效：

```
if ($this->Product->save($this->request->data)) {
    $this->Product->ProductCategory->deleteAll(array('ProductCategory.product_id' => $this->Product->id));
    foreach ($this->request->data['ProductCategory']['category_id'] as $cat_id) {
        $this->Product->ProductCategory->create();
        $this->Product->ProductCategory->set(array(
            'product_id' => $this->Product->id,
            'category_id' => $cat_id
        ));
        $this->Product->ProductCategory->save();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:09:43.530

在您的表单中迭代您希望沿线显示的数量

```
for/while/do()
{       
    $counter++
    $this->Form->text('Product.'.$counter.'.price');
    $this->Form->text('Product.'.$counter.'.description');

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:35:48.120

我会使用`saveAll()`它，因为它旨在自动为您保存记录及其所有相关记录，假设您的 id 在数据中并且格式正确。

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)

# c# - 在 Linux 上的 Wine 下使用 C# System.Diagnostics.Process

> ID：13396052
> 
> 赞同：1
> 
> 时间：2012-11-15T10:55:41.187
> 
> 标签：c#, mono, wine

我正在尝试移植一个在 Visual Studio C# 下开发的 GUI 应用程序，以便在 Linux 上的 Wine 下运行。我遇到了 Process 类的问题。以下程序在使用 mcs 编译并使用 mono 运行时按预期工作：

```
using System.Diagnostics;
using System;

class TestProcess {
  static void Main() {
    Process process = new Process();
    process.StartInfo.UseShellExecute = false;
    process.StartInfo.FileName = "/usr/bin/find";
    process.StartInfo.RedirectStandardOutput = true;
    process.StartInfo.RedirectStandardError = true;
    process.StartInfo.Arguments = "/sys";

    process.ErrorDataReceived += new DataReceivedEventHandler(output);
    process.OutputDataReceived += new DataReceivedEventHandler(output);

    process.Start();
    process.BeginErrorReadLine();
    process.BeginOutputReadLine();
    process.WaitForExit();
  }

  static void output(object sender, DataReceivedEventArgs e) {
    Console.WriteLine(e.Data);
  }
} 
```

但是当我使用 wine 运行它时（我已经在 Wine 下安装了 Mono for Windows），它会失败并出现以下异常：

```
Unhandled Exception: System.InvalidOperationException: Standard error has not been redirected or process has not been started.
  at System.Diagnostics.Process.BeginErrorReadLine () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.Diagnostics.Process:BeginErrorReadLine ()
  at TestProcess.Main () [0x00000] in <filename unknown>:0 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:13:15.867

这是由于 Wine 的限制无法修复。

虽然在 Wine 下运行的 Windows 进程可以启动本机进程，但一旦启动，它们就不能等待本机进程或通过管道与其交互。

有很多方法可以解决这个问题，但它们都涉及到你的一些工作。例如，您可以：

*   使用您需要使用的程序的 Windows 版本（可能不是一个选项，我接受它）。
*   使用 .sh 脚本执行您想要的程序并使用文件重定向输入/输出。
*   编写一个 winelib 程序，作为本机 Linux 进程的代理，在 Wine 和 Linux 管道之间汇集信息。
*   使用 Windows ssh 客户端在 localhost 上运行 Linux 程序。

# android - 使用一些预填充数据创建 Android SQL 数据库

> ID：13396055
> 
> 赞同：0
> 
> 时间：2012-11-15T10:55:45.143
> 
> 标签：android, sql, database, populate

我在这里经历了很多例子，但看起来都很复杂，而且大部分都是针对大数据的。我是 Android 和 SQL 的新手。我想做的只是用一些数据预先填充我的 SQL 数据库。

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE restaurants (_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, address TEXT, type TEXT, notes TEXT, feed TEXT, lat REAL, lon REAL);");

    ContentValues cv=new ContentValues();
    cv.put("name", "Hi");
    cv.put("address", "There");
    cv.put("type", "delivery");
    cv.put("notes", "");
    cv.put("feed", "");
    cv.put("lat", "");
    cv.put("lon", "");
    getWritableDatabase().insert("restaurants", "name", cv);
} 
```

没有错误，但不幸的是也没有插入数据。这应该很简单，请帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:07:02.857

使用 db.insert("restaurants", "name", cv);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:00:20.120

您的方法很好，内部`SQLiteOpenHelper#onCreate()`是放置初始数据的正确位置，因为您可以在其中创建处于您喜欢的状态的数据库。

但是里面`onCreate`你`db.insert("restaurants", "name", cv)`直接使用。那时您还没有完成创建您尝试通过的可写数据库`getWritableDatabase()`。不确定这是否是问题，但可能是。

# javascript - 有没有办法在 Safari 6.0 Web Inspector 中漂亮地打印 JavaScript 文件？

> ID：13396057
> 
> 赞同：4
> 
> 时间：2012-11-15T10:55:56.893
> 
> 标签：javascript, macos, safari

有人知道如何在 Safari 6.0 Web Inspector 中漂亮地打印 JavaScript 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T21:28:43.717

[Apple 在 Safari Web Inspector 上的文档](https://developer.apple.com/library/safari/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/ResourcesandtheDOM/ResourcesandtheDOM.html)说，带有大括号的按钮会做你想做的事情（@AurA 在评论中提到了这一点）。

文档在**Resources and the DOM ▸ Resources and Storage ▸ JavaScript and CSS**下说明了这一点。

# java - Java的类似Qt的多值映射？

> ID：13396062
> 
> 赞同：3
> 
> 时间：2012-11-15T10:56:08.403
> 
> 标签：java, collections, map, multimap

是否有现有的 Java 开源`Map`实现，这将是一个普通的键值映射，但*也*支持每个键的多个值？我发现的多映射实现似乎将键与集合相关联，这并不能完全消除它，因为我需要一个替换现有代码的插件。

我感觉到有些人在说“你不能那样做”，所以这里有一个示例，说明它在广泛使用的框架 Qt 中的行为方式。[`QMap`这是class](http://doc.qt.digia.com/qt/qmap.html#value)文档的摘录：

> 如果地图不包含键为*key*的项目，则该函数返回一个默认构造的值。如果 map 中有多个 key 项，则返回最近插入的一项的值。

我的需求非常有限，所以目前我正在使用下面的 hack，这是足够的，因为没有删除，每个键的许多值都是例外，并且重复键有点损坏不是问题：

```
public static <V, V2 extends V> String mapMultiPut(
        Map<String, V> map, 
        String key, 
        V2 value) {
    int count = 0;
    String tmpKey = key;
    while (map.containsKey(tmpKey)) {
        ++count;
        tmpKey = key + '_' + count;
    }
    map.put(tmpKey, value);
    return tmpKey;
} 
```

但我想要一个更好的解决方案，如果存在的话......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:09:49.500

Guava 库有一个[`Multimap`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)允许每个键有多个值:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:03:24.790

您可以使用 ListMultimap 以及

```
Iterables.getLast(listMultiMap.get(key), defaultValue(key)) 
```

您在其中定义自己的 defaultValue 方法。

这假设您实际上不需要`Map`类中的接口。

如果你*真的*想要一个`Map`你可以试试这个

```
public abstract class QtMap<K, V> extends ForwardingMap<K, V>
{
    private final ListMultimap<K, V> listMultimap = ArrayListMultimap.create();

    final Map<K, V> delegate = Maps.<K, Collection<V>, V> transformEntries(listMultimap.asMap(), new EntryTransformer<K, Collection<V>, V>()
    {

        @Override
        public V transformEntry(K key, Collection<V> value)
        {
            return Iterables.getLast(value, defaultValue(key));
        }

    });

    @Override
    protected Map<K, V> delegate()
    {
        return delegate;
    }

    @Override
    public V put(K key, V value)
    {
        listMultimap.put(key, value);
        return null;
    }

    @Override
    public void putAll(Map<? extends K, ? extends V> map)
    {
        for (Map.Entry<? extends K, ? extends V> entry : map.entrySet())
        {
            put(entry.getKey(), entry.getValue());
        }
    }

    @Override
    public V get(Object key)
    {
        return listMultimap.containsKey(key) ? delegate.get(key) : defaultValue(key);
    }

    protected abstract V defaultValue(Object key);

} 
```

虽然只是粗略地测试过

# php - 使用 PHP 复制文件夹

> ID：13396063
> 
> 赞同：6
> 
> 时间：2012-11-15T10:56:13.083
> 
> 标签：php

我整个上午都在寻找这个。

是否有一个简单的 PHP 函数可以在我的服务器上复制一个文件夹，如果需要，可以临时更改权限？基本上是我使用 FTP 复制整个文件夹然后再次备份的 PHP 替代方案？

我已经尝试了我在网上找到的下面的功能，但我认为它没有做任何事情，我认为可能是由于权限。我已经尝试过`error_reporting(E_ALL);`并检查了 each 的返回值`copy()`，它们都返回 false。

```
copy_directory('/directory1','/directory2') 

function copy_directory($src,$dst) { 
    $dir = opendir($src); 
    @mkdir($dst); 
    while(false !== ( $file = readdir($dir)) ) { 
        if (( $file != '.' ) && ( $file != '..' )) { 
            if ( is_dir($src . '/' . $file) ) { 
                copy_directory($src . '/' . $file,$dst . '/' . $file); 
            } 
            else { 
                copy($src . '/' . $file,$dst . '/' . $file); 
            } 
        } 
    } 
    closedir($dir); 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T10:06:15.130

发布赏金后，我收到了对服务器支持票证的回复，证实了我认为权限是问题所在。

在服务器端进行简单的更改以授予 PHP 复制权限即可解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:23:54.323

以某种方式检查代码中的重复项怎么样？

```
<?php
if(!file_exists($dst)) {
    mkdir($dst);
}
else {
    $i = 1;
    $duplicate_folder = true;
    while ($duplicate_folder == true) {
        if(file_exist($dst) {
            $new_dst = $dst."_".$i;
            mkdir($new_dst);
            $i++;
        }
        else {
            $duplicate_folder = false;
        }
    }
}
?> 
```

# r - 参数 CI 线性混合模型：使用 lme4 或 lme4a 的剖面函数

ID：13396065

赞同：2

时间：2012-11-15T10:56:17.623

标签：r, statistics, mixed-models

# php - 为什么我的 PHP 查询在页面加载时执行了两次？

> ID：13396066
> 
> 赞同：4
> 
> 时间：2012-11-15T10:56:17.813
> 
> 标签：php, mysql, insert

我对 PHP 很陌生，当我打开此页面查看文档时，我似乎遇到了插入语句执行两次的问题。该文档显示没有错误。在数据库中，第二次插入是 1 秒后。它仅在 google chrome 和此页面上发生。IE没有问题，我没有firefox可以检查。

**view_document.php**

```
<?php
require_once($_SERVER['DOCUMENT_ROOT'] . '/../includes/core.php');
require_once($_SERVER['DOCUMENT_ROOT'] . '/../includes/connect.php');

$webusername = $_SESSION['webname'];

if (isset($_GET['document']))
{
    $ainumber = (int) $_GET['document'];

    if (!ctype_digit($_GET['document']) || !preg_match('~^[0-9]+$~', $_GET['document']) || !is_numeric($_GET['document']))
    {
        $_SESSION = array();
        session_destroy();
        header('Location: login.php');
    }
    else
    {
        $stmt = $connect->prepare("SELECT s_filename, s_reference FROM dmsmain WHERE s_ainumber = ?") or die(mysqli_error());

        $stmt->bind_param('s', $ainumber);
        $stmt->execute();
        $stmt->bind_result($filename, $reference);
        $stmt->fetch();
        $stmt->close();

        $file = $_SERVER['DOCUMENT_ROOT'] . '/../dms/files/' . $filename . '.pdf';

        if (file_exists($file))
        {
            header('Content-Type: application/pdf');
            header('Content-Disposition: inline; filename=' . basename($file));
            header('Content-Transfer-Encoding: binary');
            header('Content-Length: ' . filesize($file));
            header('Accept-Ranges: bytes');
            readfile($file);

            $stmt = $connect->prepare("INSERT INTO dmslog (s_reference, s_userid, s_lastactivity,    s_actiontype) VALUES (?, ?, ?, ?)") or die(mysqli_error());

            date_default_timezone_set('Africa/Johannesburg');
            $date = date('Y-m-d H:i:s');
            $actiontype = 'DL';

            $stmt->bind_param('ssss', $reference, $webusername, $date, $actiontype);
            $stmt->execute();
            $stmt->close();
        }
        else
        {
            $missing = "<b>File not found</b>";
        }
            exit(0); // Correct Place?
    }
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="../CSS/dms.css" rel="stylesheet" type="text/css" />
<link href="../favicon.ico" rel="icon" type="image/x-icon" />
<title>Denso Document Manager - View Document</title>
</head>
<body>
<div id="container">
<div id="header">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="28%"><img src="../images/Logo.gif"/></td>
<td width="43%"><h2 style="color:#666" align="left">Denso SA Document Management System</h2></td>
<td width="3%">&nbsp;</td>
<td width="25%" align="right"><?php echo "Welcome $webusername <input class=\"look\" type=\"button\" onclick=\"parent.location='logout.php'\" value=' Logout ' />" ?></td>
</tr>
</table>
<br />
<table bgcolor="#6699CC" height="30px" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="20%" align="center"><p style="color:#FFF"><b>Document Search</b></p></td>
<td width="20%" align="center"><p style="color:#FFF"><b>Add Document</b></p></td>
</tr>
</table>
</div>
<div id="content">
<?php echo $missing; ?>
<br />
<br />
</div>
<div id="footer">
<table width="100%" bgcolor="#6699CC">
<tr>
<td height="25px"></td>
</tr>
</table>
<table width="100%" bgcolor="#000000">
<tr>
<td height="25px"></td>
</tr>
</table>
</div>
</div>
</body>
</html> 
```

我假设的 HTTP 访问记录

```
[15/Nov/2012:10:14:32 +0200] "POST /dms/search.php HTTP/1.1" 200    5783 "http://www.denso.co.za/dms/search.php" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"
[15/Nov/2012:10:14:33 +0200] "GET /favicon.ico HTTP/1.1" 404 - "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"

[15/Nov/2012:10:14:34 +0200] "GET /dms/view_document.php?document=8 HTTP/1.1" 200 2965 "http://www.denso.co.za/dms/search.php" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"
[15/Nov/2012:10:14:35 +0200] "GET /favicon.ico HTTP/1.1" 404 - "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11" 
```

我检查了我的`<img src=''>`链接，我没有发现它们有问题。

记录表明有一个 favicon.ico 请求，所以我创建了一个空白 favicon 并将其放在我的 public_html 文件夹中，并将其链接到页面中，如下所示`<link href="../favicon.ico" rel="shortcut icon" type="image/x-icon" />`

不幸的是，这不起作用，因为该语句仍然执行两次。我不确定这是否是网站图标问题，因为我的上传页面使用插入查询并且它执行一次。

如果有人能告诉我哪里出错或指出正确的方向，我将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:36:50.123

这段代码：

```
if (file_exists($file))
{
    header('Content-Type: application/pdf');
    header('Content-Disposition: inline; filename=' . basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: ' . filesize($file));
    header('Accept-Ranges: bytes');
    readfile($file);

    //...
} 
```

绝对应该在它的末尾调用[exit() ，如下所示：](http://php.net/exit)

```
if (file_exists($file))
{
    header('Content-Type: application/pdf');
    header('Content-Disposition: inline; filename=' . basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: ' . filesize($file));
    header('Accept-Ranges: bytes');
    readfile($file);

    //...
    exit(0);
} 
```

否则你首先发送文件，然后在它之后输出 HTML，导致各种奇怪的行为。不知道是不是这个原因，试试看。

（此外，原则上，如果找不到文件，您需要使用代码 404 提供某些内容......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T15:51:40.357

这是一个非常古老的问题，但也有同样的问题。这是由应用程序/pdf 类型和它在浏览器中打开的事实（使用 chrome）引起的。如果您右键单击并将链接另存为，您的代码将只运行一次

如果您将类型更改为任何其他类型，则相同。这仅仅是由于在浏览器窗口中打开 pdf。没有解决方法的想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-25T11:17:05.237

详细说明以前的答案和评论......

Wordpress 导致 favicon.ico 的第二个页面加载。我从服务器日志中发现了这一点，并将 S_SERVER 变量附加到日志文件中。因此，为了 100% 结束它，我在我不想运行两次的代码之前添加了以下代码（在我的类中的函数内）

```
if (isset($_SERVER['REDIRECT_SCRIPT_URI']))
            {
                if ($_SERVER['REDIRECT_SCRIPT_URI']==="https://whaterver.yoursite.com/favicon.ico")
                    return;
            } 
```

...和多田。问题消失了。whaterver.yoursite.com 显然是您的网站网址。

# google-chrome - 在发送答案之前收到 ICE 候选人时的错误

> ID：13396071
> 
> 赞同：10
> 
> 时间：2012-11-15T10:56:40.473
> 
> 标签：google-chrome, webrtc

我正在 Chrome 23 上建立 WebRTC 连接。要附加本地流，您需要允许浏览器使用摄像头和麦克风。在呼叫方方面，我正在检查是否可以获得本地流，并且直到此刻我才发送报价。然后发送报价，浏览器立即开始发送 ICE 候选人。

然后，如果远程浏览器还没有获得本地媒体流，我会为收到`SYNTAX_ERR: DOM Exception 12`的`peerConnection.addIceCandidate(candidate)`每个 ICE 候选人继续。

我检查了[文档](http://dev.w3.org/2011/webrtc/editor/webrtc.html)，`addIceCandidate`但没有关于先决条件的信息。

我想我可以通过延迟它并等待远程客户端添加本地流的信号来延迟从提供者发送 ICE 候选人，但这是需要额外的通信并且看起来不正确。

我可以`webkitRTCPeerConnection`在发送答案并附加本地媒体流之前以某种方式添加远程 ICE 候选者吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T10:56:40.473

在我写完这个问题后，我想到了一个答案......在接收 ICE 候选人之前不需要附加本地流，但`remoteDescription`应该设置（应该在收到报价时完成）。在我的代码中，我等待设置`remoteDescription`和发送答案，直到浏览器获取本地流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-28T18:11:58.953

Episodex 的解决方案帮助了我。

首先 setRemoteDescription，然后创建自己的流，然后创建并发送答案。

```
 // On read message
  if (msg.sdp.type === 'offer') {

        this.peerConnection.setRemoteDescription(new RTCSessionDescription(msg.sdp))
          .then(() => navigator.mediaDevices.getUserMedia({audio: true, video: true}))
          .then(stream => this.peerConnection.addStream(stream));
          .then(() => this.peerConnection.createAnswer())
          .then(answer => this.peerConnection.setLocalDescription(answer))
          .then(() => this.sendMessage({sdp: this.peerConnection.localDescription}))

  } 
```

# c#-4.0 - 如何在 C#.net 中使用 EXCEL interop api 读取空单元格值？

> ID：13396073
> 
> 赞同：8
> 
> 时间：2012-11-15T10:56:45.593
> 
> 标签：c#-4.0, excel-2010, excel-interop

如果我尝试读取空的 EXCEL 单元格，则会收到 System.com_object 错误。我的代码是：

```
public static List<OrderPC> getFilters(string fileCheckout)
    {
        List<OrderPC> orderPCs = new List<OrderPC>();
        XLDoc sldoc = new XLDoc();

        string localPath = @"C:\Temp\PCs.xlsx";

        Microsoft.Office.Interop.Excel.Application oXL=null;
        Microsoft.Office.Interop.Excel.Workbook mWorkBook=null;
        Microsoft.Office.Interop.Excel.Worksheet mWSheet1=null;
        Microsoft.Office.Interop.Excel.Range xlRange=null;
        try
        {
            oXL = new Microsoft.Office.Interop.Excel.Application();

            mWorkBook = oXL.Workbooks.Open(localPath);

            mWSheet1 = mWorkBook.Sheets[1];

            xlRange = mWSheet1.UsedRange;

            foreach (Microsoft.Office.Interop.Excel.Hyperlink hl in xlRange.Hyperlinks)
            {

               int y = hl.Range.Column;

                int z = hl.Range.Row;

                string vFilter = mWSheet1.Cells[z, y + 1].Value2.Trim();

                if (vFilter.CompareTo("Weekly") == 0)
                {
                    String baseUri = "http://xxx.yyy.net?";
                    int followUpIndex = baseUri.Length;
                    OrderPC orderPc = new OrderPC();
                    orderPc.ProductClass = hl.TextToDisplay.Trim();
                    orderPc.HyperLink = hl.Address.Trim().Substring(followUpIndex);
                    orderPc.SpecType = mWSheet1.Cells[z, y - 1].Value2.Trim();
                     if (mWSheet1.Rows[z].Cells[y + 3] != null || mWSheet1.Rows[z].Cells[y + 3].Value2 != string.Empty)
                        {
                            orderPc.ManufactureDate = mWSheet1.Cells[z, y + 3].Value2.ToString(); //Here is the error**
                        }
                    //Console.WriteLine(orderPc.ProductClass+"----"+orderPc.HyperLink);

                    orderPCs.Add(orderPc);
                }
            }
        }
        catch (Exception ex)
        {
        }
        finally
        {
            GC.Collect();
            GC.WaitForPendingFinalizers();

            Marshal.FinalReleaseComObject(xlRange);
            Marshal.FinalReleaseComObject(mWSheet1);

            mWorkBook.Close(Type.Missing, Type.Missing, Type.Missing);
            Marshal.FinalReleaseComObject(mWorkBook);

            oXL.Quit();
            Marshal.FinalReleaseComObject(oXL);
        }
        return orderPCs;
    } 
```

这个 excel 文件有 10 列，我想我正在读取一个有效的单元格。错误是**”

`{Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot perform runtime binding on a null reference`
`at CallSite.Target(Closure , CallSite , Object )`
`at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)`

"** 自从它的 COM 以来，我没有任何线索。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T15:56:13.020

添加另一张支票

```
if (mWSheet1.Cells[z, y + 3].Value2 != null) 
```

或使用以下代码转换为字符串，因为如果 Value2 为 null 则不会失败

```
orderPc.ManufactureDate = Convert.ToString(mWSheet1.Cells[z, y + 3].Value2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-16T04:55:08.307

您正在检查您的单元格是否不为空，或者不是 string.empty。您的单元格很可能不是 null 或不是 string.emtpy。

您需要使用 && 而不是 ||，因为您只需要 true，如果您的单元格不是 null 并且不是 string.empty

# c# - 使用具有多个模板参数的 Action 启动任务

> ID：13396074
> 
> 赞同：4
> 
> 时间：2012-11-15T10:56:47.393
> 
> 标签：c#, multithreading, templates, task

我需要在 C# 中启动一个任务，所以我正在创建一个操作对象。

```
private Action<int, int, int> action = (int p1, int p2, int p3) =>
{
    // do some stuff with p1, p2 and p3.
}; 
```

但是，当我尝试从中创建任务时，我意识到`new Task`只能接受`Action`or`Action<object>`并且拒绝接受我`action`的多个模板化参数。

你有什么想法我可以创建这个任务对象并让我传递参数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T11:06:49.833

只需使用 lambda 转换为正确的委托类型：

```
Action<int, int, int> action = (int p1, int p2, int p3) =>
{
    // do some stuff with p1, p2 and p3.
};

//a closure can capture over any values you might want to pass in
Task.Run(() => action(1, 2, 3)); 
```

如果您考虑一下，则不能将其`Action<int, int, int>`交给，`Task.Run`因为您还必须提供参数。`Task.Run` **不知道你想传入什么。**

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-15T11:06:00.413

为您的参数创建一个类作为 DTO 怎么样？

```
 public class ParamDto
{
   public string Param1;
   .
   .
   .
} 
```

# php - php循环内的javascript自动完成

> ID：13396075
> 
> 赞同：0
> 
> 时间：2012-11-15T10:57:00.783
> 
> 标签：php, javascript, loops, input

我有一个 Web 表单，其中包含输入字段的 javascript / php 自动完成功能。

问题是这个输入字段位于重复 50 次的 PHP 循环内。我使用循环给每个输入一个唯一的名称和 ID。

javascript 被硬编码以填充输入字段“inputString”并在 div“建议”中显示可能的建议

通过循环，我给每个输入框一个唯一的名称“inputstring1”、“inputstring2”、“inputstring3”等。

我需要能够填充当前正在处理的输入字符串。

如何将变量“inputstringX”传递给 javascript，以便它填充正确的输入框？同样适用于 div“建议”，以便它显示在正确的输入框旁边？

javascript是：

```
<script type="text/javascript">
    function lookup(inputString) {
        if(inputString.length == 0) {
            // Hide the suggestion box.
            $('#suggestions').hide();
        } else {
            $.post("autocompleteperson.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }
            });
        }
    } // lookup

    function fill(thisValue) {
        $('#inputString').val(thisValue);
        setTimeout("$('#suggestions').hide();", 200);
    }
</script> 
```

和 php/html 是：

```
<table>
                <?
                    for ( $i = 1; $i <=50; $i++ ) { 
                        ?>
                            <tr>
                                <td> Job <? echo  $i; ?></td>
                                <td>
                                    <SELECT NAME=job<? echo $i; ?> id=job<? echo $i; ?> style="width:150px;border: 1px solid #2608c3;color:red"> 
                                    <OPTION VALUE=0 ></option>
                                    <option>
                                    <?=$optionjobs?> 
                                    </option>
                                    </SELECT>
                                </td>
                                <td> Person </td>
                                <td>
                                    <div>
                                        <input type="text" size="30" value="" id="inputString<? echo  $i; ?>" onkeyup="lookup(this.value);" onblur="fill();" />
                                    </div>
                                    <div class="suggestionsBox" id="suggestions<? echo  $i; ?>" style="display: none;">
                                        <img src="upArrow.png" style="position: relative; top: -12px; left: 30px;" alt="upArrow" />
                                        <div class="suggestionList" id="autoSuggestionsList">
                                            &nbsp;
                                        </div>
                                    </div>  
                                </td>
                            </tr>
                        <?
                            }
                        ?>
                </table> 
```

感谢您的想法和您的时间，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:03:47.630

不要使用`onkeyup`html 属性并使用 jQuery 函数来附加您的函数。因此，您可以使用它`this`来检索您的输入。

```
$(function() {
    var inputs = $('input[type="text"]'); // You may want to use a css class instead of that
    inputs.keyup(function() {
         // Here, this == the input. So you can't get the id by using $(this).attr('id').
    });
}); 
```

# php - PHP 的替代 var_dump 允许限制嵌套数组的深度

> ID：13396076
> 
> 赞同：9
> 
> 时间：2012-11-15T10:57:01.650
> 
> 标签：php, debugging, var-dump

我尝试在带有 phpsh 的命令行上使用 var_dump 以获得有关某些变量的调试信息。但是该变量包含一个非常嵌套的数据结构。因此，使用默认的 var_dump 会输出太多信息。

我想限制 var_dump 输出的深度级别。我发现 XDebug 的 var_dump 实现允许深度限制，如下所述：http: [//www.giorgiosironi.com/2009/07/how-to-stop-getting-megabytes-of-text.html](http://www.giorgiosironi.com/2009/07/how-to-stop-getting-megabytes-of-text.html)

不幸的是，我也无法完成这项工作。我还不知道这是什么原因。我正在寻找是否有任何替代的 var_dump 实现可以尝试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-09-06T06:12:16.390

json_encode 采用深度参数。做这个：

`echo '<pre>' . json_encode($your_array, JSON_PRETTY_PRINT, $depth) . '</pre>';`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T10:59:33.417

这是此问题的功能：

```
function slice_array_depth($array, $depth = 0) {
    foreach ($array as $key => $value) {
        if (is_array($value)) {
            if ($depth > 0) {
                $array[$key] = slice_array_depth($value, $depth - 1);
            } else {
                unset($array[$key]);
            }
        }
    }

    return $array;
} 
```

使用此函数将数组切片到您需要的深度，而不是简单地`var_dump()`切片`print_r()`数组:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:23:39.157

检查这个：

```
function print_array($array,$depth=1,$indentation=0){
    if (is_array($array)){
                    echo "Array(\n";
        foreach ($array as $key=>$value){
            if(is_array($value)){
                if($depth <= 0){
                    echo "max depth reached.";
                }
                else{
                    for($i=0;$i<$indentation;$i++){
                        echo "&nbsp;&nbsp;&nbsp;&nbsp;";
                    }
                    echo $key."=Array(";
                    print_array($value,$depth-1,$indentation+1);
                    for($i=0;$i<$indentation;$i++){
                        echo "&nbsp;&nbsp;&nbsp;&nbsp;";
                    }
                    echo ");";
                }
            }
            else{
                for($i=0;$i<$indentation;$i++){
                    echo "&nbsp;&nbsp;&nbsp;&nbsp;";
                }
                echo $key."=>".$value."\n";
            }
        }
                    echo ");\n";
    }
    else{
        echo "It is not an array\n";
    }
} 
```

# java - java.net.Socket 中的 Apache Mina 服务器和客户端

> ID：13396078
> 
> 赞同：0
> 
> 时间：2012-11-15T10:57:08.713
> 
> 标签：java, sockets, nio, apache-mina

我的应用程序将数据发送到 Apache Mina 服务器，该服务器使用以下配置进行侦听..

```
 IoAcceptor acceptor = new NioSocketAcceptor();
        acceptor.getFilterChain().addLast( "logger", new LoggingFilter() );
        //acceptor.getFilterChain().addLast( "logger1", new TempFilter());
        acceptor.getFilterChain().addLast( "codec", new ProtocolCodecFilter( new TextLineCodecFactory( Charset.forName( "UTF-8" ))));
        acceptor.setHandler( new TimeServerHandler() );
        acceptor.getSessionConfig().setReadBufferSize( 2048 );
        acceptor.getSessionConfig().setIdleTime( IdleStatus.BOTH_IDLE, 10 );
        acceptor.bind( new InetSocketAddress(PORT) ); 

```

这是我用 net.Socket 编写的客户端代码

```
 OutputStream oStrm = socket.getOutputStream();
byte[] byteSendBuffer = (requests[clientNo][j]).getBytes(Charset.forName("UTF-8"));

oStrm.write(byteSendBuffer);
oStrm.flush(); 

```

尽管收到了记录器显示消息，但`messageRecieved()`从未调用过服务器处理程序。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:27:56.137

试试这个：

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.nio.ByteBuffer;
import java.nio.CharBuffer;
import java.nio.channels.SocketChannel;
import java.nio.charset.Charset;
import java.nio.charset.CharsetEncoder;

public class JavaNetClient {

    public static void main(String[] args) throws IOException {

        Charset charset = Charset.forName("UTF-8");
        CharsetEncoder encoder = charset.newEncoder();

        SocketChannel socketChannel = SocketChannel.open(new InetSocketAddress(
                        "localhost", 1071));
        socketChannel.configureBlocking(false);
        CharBuffer charBuffer = CharBuffer.wrap("Hi\r\n");
        ByteBuffer buf = encoder.encode(charBuffer);
        socketChannel.write(buf);

        socketChannel.close();

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:50:53.720

您正在使用 TextLineCodecFactory 作为协议编解码器，它希望您的消息以行分隔符结尾。那是 unix 上的 "\n"，windows 上的 "\r\n" 可以`System.lineSeparator()`在 Java 上获得。

当然 TextLineCodecFactory 可用性取决于您的消息内容。如果您的消息在其内容中包含行分隔符，则不能使用 TextLineCodecFactory。在这种情况下，您可能希望实现自己的编解码器工厂，使用特殊字符作为分隔符、固定大小的消息或[类型-长度-值](http://en.wikipedia.org/wiki/Type-length-value)结构。

# c# - 查找我的解决方案中的哪个项目引用了 Framework 1.1

> ID：13396079
> 
> 赞同：1
> 
> 时间：2012-11-15T10:57:10.383
> 
> 标签：c#, vb.net, visual-studio-2010

我的解决方案包含很多项目 (33)，一些 vb，主要是 c#。现在在其中一个项目中引用了 1.1 框架。我的解决方案构建成功，但不会运行。它给了我错误：“无法加载文件或程序集'System.xml，Version = 1.0.5000'或其依赖项之一。系统找不到指定的文件”。

当我安装 1.1 框架时，它工作得很好。我想删除它，因此不再需要 1.1 来运行我的应用程序。

我如何才能在所有这些项目中找到这个参考？我知道我必须添加一次才能使外部库正常工作，但现在我坚持使用 1.1 框架......

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:07:03.170

在您的解决方案根目录中，从命令行运行它：

```
findstr /I /S "1.0.5000" *.csproj
findstr /I /S "1.0.5000" *.vbproj 
```

这将列出所有包含对任何 1.0.5000 版本程序集的引用的 C# 和 VB.NET 项目文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:07:47.290

几天前，我遇到了同样的问题，为了解决它，遵循了以下步骤：

在解决方案资源管理器中：

1.  展开项目
2.  展开参考
3.  选择导致问题的 DLL（在您的情况下是`System.XML`）
4.  右键单击并选择`Properties`
5.  将`Specific Version`属性设置为`False`

这也应该适用于您的情况！

# input - 输入流在对象内结束

> ID：13396083
> 
> 赞同：2
> 
> 时间：2012-11-15T10:57:18.910
> 
> 标签：input, stream, lisp, common-lisp

我想计算一个平面文件中的行数，所以我写了代码：

```
(defun ff-rows (dir file)
  (with-open-file (str (make-pathname :name file
                                      :directory dir)
                                      :direction :input)
    (let ((rownum 0))
      (do ((line (read-line str file nil 'eof)
                 (read-line str file nil 'eof)))
          ((eql line 'eof) rownum)
        (incf rownum ))))) 
```

但是我得到了错误：

```
*** - READ: input stream
       #<INPUT BUFFERED FILE-STREAM CHARACTER #P"/home/lambda/Documents/flatfile"
         @4>
      ends within an object 
```

请问这里有什么问题吗？我试着数行数；这个操作很好。

注意：这是我用来测试函数的平面文件的内容：

```
2 3 4 6 2 
1 2 3 1 2
2 3 4 1 6 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:19:24.797

据我所知，问题是您的 (read-line ... ) 调用中的“文件”。

基于[hyperspec](http://www.lispworks.com/documentation/HyperSpec/Body/f_rd_lin.htm)， read-line 的签名是：

```
read-line &optional input-stream eof-error-p eof-value recursive-p
=> line, missing-newline-p 
```

...这意味着“文件”被解释为 eof-error-p，nil 被解释为 eof-value，'eof 被解释为递归-p。不用说，问题接踵而至。如果您从 read-line 调用中删除“文件”（例如`(read-line str nil :eof)`），代码运行良好，无需在我的机器上进行进一步修改（AllegroCL 和 LispWorks。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T13:14:34.340

短一点。

```
(defun ff-rows (dir file)
  (with-open-file (stream (make-pathname :name file
                                         :directory dir)
                          :direction :input)
    (loop for line = (read-line stream nil nil)
          while line count line))) 
```

请注意，您需要获得`READ-LINE`正确的参数。首先是流。文件不是参数列表的一部分。

将路径名处理混合到一般的 Lisp 函数中通常也不是一个好主意。

```
(defun ff-rows (pathname)
  (with-open-file (stream pathname :direction :input)
    (loop for line = (read-line stream nil nil)
          while line count line))) 
```

在另一个函数或其他代码中进行路径名处理。将路径名组件传递给函数通常是错误的设计。传递完整的路径名。

使用 LispWorks 文件选择器：

```
CL-USER 2 > (ff-rows (capi:prompt-for-file "some file"))
27955 
```

更好的是所有基本 I/O 函数都在流上工作，而不是在路径名上工作。因此，您可以计算网络流、串行线或其他流中的行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:46:31.157

```
(defun ff-rows (dir file)
  (with-open-file
      (str (make-pathname :name file :directory dir)
           :direction :input)
    (let ((result 0))
      (handler-case
          (loop (progn (incf result) (read-line str)))
        (end-of-file () (1- result))
        (error () result))))) 
```

现在，当然，如果你比我更迂腐，你可以指定你想准确处理什么样的错误，但对于简单的例子，这将是可行的。

编辑：我认为@Moritz 更好地回答了这个问题，但这可能是如何利用抛出的错误`read-line`而不是试图避免它的一个例子。

# cordova - 创建跨设备位置跟踪应用程序的最简单方法（全部 1 个应用程序）

> ID：13396085
> 
> 赞同：0
> 
> 时间：2012-11-15T10:57:29.550
> 
> 标签：cordova, geolocation, location, cross-platform

老板要求我为我们的内部用户制作一个位置跟踪应用程序。情况是它们分散在不同的设备上，包括 iphone、android 和 windows phone。我已经超越了 ios 和 windows phone，但在谈到 android 的 java 世界时相对较新。

我的问题是，有没有办法一次性为所有设备创建应用程序。我可以将一个 html5 应用程序和 phonegap 组合在一起，但从我收集到的后台进程 API 非常有限，即使它是可行的也将是一场噩梦。如果它不必在应用程序进入后台时处理发布地理位置数据，我认为 phonegap 就可以了。

有人对如何解决这个问题有任何建议吗？该应用程序所需要做的就是将地理数据发布到 Web API，这样它就变得非常简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:48:01.103

Phonegap 可能是跨平台解决方案的最佳选择。地理位置 API 将允许您在所有目标平台上跟踪地理位置，并且您需要做的相对简单意味着您可以快速破解它。

据我了解，您需要在屏幕关闭时让应用程序在后台运行，以便继续收集地理位置数据。有用于 iOS 和 Android 的电源管理的[phonegap 插件](https://github.com/phonegap/phonegap-plugins)使您能够做到这一点，尽管不适用于 Windows Phone AFAIK，但如果您喜欢它，您可能可以毫不费力地实现插件接口。当你开始使用 Phonegap 插件来做原生的东西时，你必须放弃 Phonegap Build 的简单美感，并为每个平台走上 SDK 路线，但这并不是世界末日。

您还提到您需要将地理数据发布到 Web API。取决于你在世界的哪个地方，但就我而言，手机的覆盖范围并不完整，所以我会使用某种离线缓存数据，以防当时互联网连接不可用。一些持久的客户端存储，如草坪椅，可以很好地与[Phonegap](http://brian.io/lawnchair/)结合使用，并且比将其全部保存在内存中更安全。然后，您可以离线累积数据并在互联网连接可用时将其全部发送。

# merge - Stata mmerge update replace 给出错误的输出

> ID：13396086
> 
> 赞同：0
> 
> 时间：2012-11-15T10:57:29.823
> 
> 标签：merge, stata

我想测试如果我用不同的数据类型替换变量会发生什么：

```
clear
input id x0
1  1
2  13
3  .
end
list
save tabA, replace

clear
input id str5 x0
1  "1"
2  "23"
3  "33"
end
list
save tabB, replace

use tabA, clear
mmerge id using tabB, type(1:1) update replace
list 
```

结果是：

```
 +--------------------------------------------------+
   | id   x0                                   _merge |
   |--------------------------------------------------|
1\. |  1    1   in both, master agrees with using data |
2\. |  2   13   in both, master agrees with using data |
3\. |  3    .   in both, master agrees with using data |
   +--------------------------------------------------+ 
```

这对我来说似乎很奇怪。我预计崩溃或分歧。这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:14:26.403

`mmerge`是用户编写的（Jeroen Weesie，SSC，2002）。

如果您`merge`在最新的 Stata 中使用官方，您将得到您所期望的。

```
. merge 1:1 id using tabB, update replace
x0 is str5 in using data
r(106); 
```

我还没有往里看`mmerge`。我自己的猜测是，从作者的角度来看，您看到的是一个特征，即一个变量是数字的，一个变量是字符串的，只要它们的内容一致，就没有问题。但是为什么不`merge`直接使用呢？几年前有一个短暂的时期，当时`mmerge`有一些优势`merge`，但那已经过去了。顺便说一句，我同意希望我`merge`的 s 非常保守，而不是放纵变量类型。

# android - 异常 java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@4205eb18 不存在是什么意思

> ID：13396088
> 
> 赞同：22
> 
> 时间：2012-11-15T10:57:36.107
> 
> 标签：android, illegalargumentexception, android-windowmanager

我正在尝试登录应用程序，但在登录成功并且即将进入下一个屏幕后，它会重新启动。以下是我猜会导致这种情况的异常，因为没有其他异常。

```
11-14 15:09:54.841: W/WindowManager(643): Failed looking up window
11-14 15:09:54.841: W/WindowManager(643): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@4205eb18 does not exist
11-14 15:09:54.841: W/WindowManager(643):   at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7622)
11-14 15:09:54.841: W/WindowManager(643):   at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7613)
11-14 15:09:54.841: W/WindowManager(643):   at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1591)
11-14 15:09:54.841: W/WindowManager(643):   at android.os.BinderProxy.sendDeathNotice(Binder.java:417)
11-14 15:09:54.841: W/WindowManager(643):   at dalvik.system.NativeStart.run(Native Method)
11-14 15:09:54.841: I/WindowManager(643): WIN DEATH: null 
```

谁能告诉，这是什么意思，如果可能的话如何纠正它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-10T16:38:34.777

这可能是由于调用了目标设备上不可用的系统 API 造成的。我遇到了这个问题，然后尝试在 4.0.x 设备上调用 ActivityManager.MemoryInfo.totalMem。我没有收到任何编译错误，因为我的目标是 4.2.2，并且在 API16 (4.1) 中添加了 ActivityManager.MemoryInfo.totalMem

# c# - OpenXML 的 Cell.InnerText 正在返回无意义的结果

> ID：13396090
> 
> 赞同：0
> 
> 时间：2012-11-15T10:57:37.697
> 
> 标签：c#, openxml

我正在学习`OpenXML`并遇到一个我无法解释的奇怪问题，也许论坛上的某个人可以解释它并提供解决方案。

我一直在测试一些代码来收集单个 Excel 单元格中的信息，使用如下所示的一些代码：

```
Cell theCell = wsPart.Worksheet.Descendants<Cell>().
            Where(c => c.CellReference == "F4").FirstOrDefault();
            if (theCell != null)
            {
                cellvalue = theCell.InnerText;
                .... 
```

可以安全地假设我已经调用了我所有的`workbook`部分和`sheets`等。

当我调用这个例程并且我最近没有打开***Excel***时，我可以调用`Cell.InnerText`它并返回我期望的值。

***但是，如果我用Excel***打开电子表格，进行更改，然后关闭电子表格，调用`Cell.InnerText`会返回一些奇怪的东西，比如“29”或“33”之类的数字。

有谁知道为什么？或者也许有不同的选择来从 OpenXML 中的 Excel 获取单元格值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T05:25:22.370

我猜在您进行更改后，您在 Cell 中输入了 CellValues.SharedString (theCell.DataType)。SharedStringTable 的该类型返回索引。要阅读 SharedStringTable 使用该代码：

```
Dim stringTablePart As SharedStringTablePart = WorkbookPart.GetPartsOfType(Of SharedStringTablePart).FirstOrDefault()
If stringTablePart IsNot Nothing Then
    For Each item As SharedStringItem In stringTablePart.SharedStringTable.Elements(Of SharedStringItem)()
        Dim text as string = item.InnerText
    Next
End If 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:27:57.693

“或者，在 OpenXML 中从 Excel 获取单元格值可能有不同的选择？” 是的。单元格具有值标签：`<v>`。此标签包含整数。如果您的单元格包含整数，则此标记包含此值。但是，如果您的单元格包含字符串，则此标记包含来自 xl\sharedStrings.xml 部分的字符串索引，这里存储的是原始单元格值，因此该值包含与您的单元格值不同的值。我猜当您使用 Excel 重新保存电子表格时，它会重组您的文档，并且只要字符串在 xl\sharedStrings.xml 部分中更改了索引，就可以更改值。

# ios - UIView 上的图像绘制

> ID：13396092
> 
> 赞同：0
> 
> 时间：2012-11-15T10:57:51.720
> 
> 标签：ios

我正在尝试创建一个应用程序，我可以在一个视图上的特定点（为每个图像确定）绘制大量图片。我有一个坐标，我需要画一张图片，它的宽度和高度例如：

我有 20 亿张 jpeg 的图像。对于每个图像，我都有一个特定的原点和大小。在 1 秒内，我需要在特定点绘制 20-50 张图像。

我已经尝试通过以下方式解决该问题：

```
UIGraphicsBeginImageContextWithOptions(self.previewScreen.bounds.size, YES, 0);
[self.previewScreen.image drawAtPoint:CGPointMake(0, 0)];
[image drawAtPoint:CGPointMake(nRect.left, nRect.top)];
UIImage *imagew = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
[self.previewScreen setImage:imagew]; 
```

但在这个解决方案中，我在显示图像和 CPU 使用率方面有很大的延迟

WBR

马克西姆·塔塔尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:04:50.327

所以我想你的问题是，如何让它更快？

为什么要使用 ImageContext 绘制图像？您可以将`UIImageView`包含图像的 s 添加到主视图中，并根据需要定位它们。

# java - 将 UUID 用于廉价的 equals() 和 hashCode()

> ID：13396095
> 
> 赞同：7
> 
> 时间：2012-11-15T10:58:00.880
> 
> 标签：java, performance, equals, hashcode

我有一个不可变类 TokenList，它由一个 Token 对象列表组成，这些对象也是不可变的：

```
@Immutable
public final class TokenList {

    private final List<Token> tokens;

    public TokenList(List<Token> tokens) {
        this.tokens = Collections.unmodifiableList(new ArrayList(tokens));
    }

    public List<Token> getTokens() {
        return tokens;
    }
} 
```

我对这些 TokenLists 做了几个操作，它们将多个 TokenLists 作为输入并返回一个 TokenList 作为输出。可以有任意多个 TokenList 进入，每个 Token 可以有任意多个 Token。

这些操作很昂贵，并且很有可能多次执行相同的操作（即相同的输入），所以我想缓存输出。但是，性能至关重要，我担心在这些可能包含任意多个元素的对象上执行 hashCode() 和 equals() 的费用（因为它们是不可变的，所以可以缓存 hashCode，但 equals 仍然很昂贵）。

这让我想知道是否可以通过对 TokenList 进行以下更新来简单而廉价地使用 UUID 提供 equals() 和 hashCode()：

```
@Immutable
public final class TokenList {

    private final List<Token> tokens;
    private final UUID uuid;

    public TokenList(List<Token> tokens) {
        this.tokens = Collections.unmodifiableList(new ArrayList(tokens));
        this.uuid = UUID.randomUUID();
    }

    public List<Token> getTokens() {
        return tokens;
    }

    public UUID getUuid() {
        return uuid;
    }
} 
```

像这样作为缓存键的东西：

```
@Immutable
public final class TopicListCacheKey {

    private final UUID[] uuids;

    public TopicListCacheKey(TopicList... topicLists) {
        uuids = new UUID[topicLists.length];
        for (int i = 0; i < uuids.length; i++) {
            uuids[i] = topicLists[i].getUuid();
        }
    }

    @Override
    public int hashCode() {
        return Arrays.hashCode(uuids);
    }

    @Override
    public boolean equals(Object other) {
        if (other == this) return true;
        if (other instanceof TopicListCacheKey)
            return Arrays.equals(uuids, ((TopicListCacheKey) other).uuids);
        return false;
    }
} 
```

我认为有 2^128 个不同的 UUID，我可能随时在应用程序中最多有大约 1,000,000 个处于活动状态的 TokenList 对象。鉴于此，以及 UUID 在缓存键中组合使用的事实，似乎产生错误结果的可能性非常小。然而，我对继续它感到不安，因为它只是感觉“肮脏”。有什么理由我不应该使用这个系统吗？UUID.randomUUID() 使用的 SecureRandom 的性能成本是否会超过收益（特别是因为我希望多个线程同时执行此操作）？碰撞会比我想象的更有可能吗？基本上，这样做有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:28:46.360

您正在尝试的内容非常棘手，需要详细分析。因此，在决定任何方法之前，您需要检查以下问题。

> 这些操作很昂贵，并且很有可能多次执行相同的操作（即相同的输入）

1）当您在上面的行中说“相同的输入”时，您的确切意思是什么？这是否意味着完全相同的对象，即一个对象通过多个引用（相同的内存位置）引用，还是意味着内存方面的独立对象但在逻辑上具有相同的数据？

在这里，如果对象相同，即相同的内存位置，那么 == 比较就可以了。为此，您必须将对象引用作为缓存中的键。

但如果是第二种情况，即内存方面的独立对象但逻辑上相同，那么我认为 UUID 不会帮助你。因为您必须确保这样 2 个单独的对象将获得相同的 UUID。这并不容易，因为无论如何你必须通过整个 TokenList 数据来确保这一点

2）在缓存中使用哈希码，安全吗？我建议不要使用 hashcode 作为 key，因为即使 2 个对象不同，它们也可能具有相同的 hashcode。所以你的逻辑可能会大错特错。

因此，首先要弄清楚这些问题的答案，然后再考虑方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:23:55.553

`SecureRandom`不会给你任何提升，它只是比普通的“更多”随机`Random`。发生冲突的可能性大约是数字的平方除以可能的 UUID 总数，所以这个数字非常小。不过，我不会依赖数字始终是唯一的。您可以尝试这样做，但最好检查并确保该数字尚未包含在哈希码列表的其他位置。否则，你可能会让自己陷入一些非常奇怪的问题......

# yii - 默认日期选择器 maxdate 值根据 yii cjui datepicker 中的另一个 datepicker 选择值设置

> ID：13396096
> 
> 赞同：0
> 
> 时间：2012-11-15T10:58:03.410
> 
> 标签：yii, datepicker

我的表格中有两个`datepickers`；一个用于开始日期，另一个用于截止日期。我必须将最后期限值设置`datepicker` `maxdate`为用户选择的第一个日期选择器值。有什么办法可以做到这一点

# android - 使用 with 子句的 SQL 不起作用

> ID：13396097
> 
> 赞同：0
> 
> 时间：2012-11-15T10:58:03.903
> 
> 标签：android, database, sqlite

我的问题是为什么这个查询不起作用？

```
Cursor c = db.rawQuery("SELECT * FROM tbl_staff WHERE PMajor = '%" + spin.getSelectedItem().toString() + "%'", null); 
```

`Cursor c`：它是用于处理我的查询的游标 ：由, , :

`tbl_staff`组成的表是微调器，它具有我的数据库查询所需的值。`PName``PMajor``PCert`

`spin`

当我使用：

```
if (c.moveToNext())
else (log.d("error query","couldn't do the query!");) 
```

它进入`else`声明并且`moveToNext()`不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:02:49.810

代替`=`检查相等性的 using ，使用`LIKE`匹配模式的关键字。

```
Cursor c = db.rawQuery("SELECT * FROM tbl_staff WHERE PMajor LIKE '%" + spin.getSelectedItem().toString() + "%'", null); 
```

# javascript - 是否有任何 Javascript 库可以智能地截断字符串？

> ID：13396099
> 
> 赞同：2
> 
> 时间：2012-11-15T10:58:06.980
> 
> 标签：javascript

我需要截断侧面菜单中的字符串，以使它们适合没有换行符的 div。div 具有固定的宽度。我正在寻找一个图书馆来为我做这件事。如果字符串太长而无法放入 div，则应将其截断，如下所示：

`<div>This string is too long</div>`==>`<div>This string is...ong</div>`

如您所见，字符串不仅被省略号截断，而且最后三个字母也是可见的。这是为了增加可读性。截断不应该关心空格。

有谁知道包含此类功能的库？我们在整个项目中主要使用 jQuery。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:11:42.947

我不知道这样做的库本身，但是使用 HTML5 Canvas 和[Canvas text metrics](http://www.html5canvastutorials.com/tutorials/html5-canvas-text-metrics/)，您可以确定该字符串是否适合，如果不适合，您必须将其剪掉多少。

```
var canvas = document.createElement('canvas');
var context = canvas.getContext('2d');
context.font = '12pt Arial';
var metrics = context.measureText('measure me!');
var width=metrics.width; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:16:48.327

一旦我使用[jQuery.dotdotdot](http://dotdotdot.frebsite.nl/)。

将您的 html 视为

```
<div class="longtext">This string is too long</div> 
```

使用 dotdotdot 后只需使用此 javascript

```
$(document).ready(function() {
    $(".longtext").dotdotdot();
}); 
```

访问他们的网站以获取更多可配置选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T09:43:16.673

[这个 JSFiddle](http://jsfiddle.net/nqAe8/)展示了一个简单的解决方案：

```
/**
 * Uses canvas.measureText to compute and return the width of the given text of given font.
 * 
 * @param text The text to be rendered.
 * @param {String=} fontStyle The style of the font (e.g. "bold 12pt verdana").
 * @param {Element=} canvas An optional canvas element to improve performance. If not given, the function will create a new temporary canvas element.
 * 
 * @see http://stackoverflow.com/questions/118241/calculate-text-width-with-javascript/21015393#21015393
 */
function getTextWidth(text, fontStyle, canvas) {
    // if given, use cached canvas for better performance
    // else, create new canvas
    canvas = canvas || document.createElement("canvas");
    var context = canvas.getContext("2d");
    context.font = fontStyle;
    var metrics = context.measureText(text);
    return metrics.width;
}

/**
 * Returns text whose display width does not exceed the given maxWidth.
 * If the given text is too wide, it will be truncated so that text + ellipsis
 * is still less than maxWidth wide.
 * 
 * @param text The text to be truncated.
 * @param {String} fontStyle The font style that the string is to be rendered with.
 * @param maxWidth Max display width of string.
 * @param {String=} ellipsis Set to "..." by default.
 * @param {Element=} canvas Optional canvas object to improve performance.
 * 
 */
function truncateText(text, fontStyle, maxWidth, ellipsis, canvas) {
    var width;
    var len = text.length;
    ellipsis = ellipsis || "...";
    while ((width = getTextWidth(text, fontStyle, canvas)) > maxWidth) {
        --len;
        text = text.substring(0, len) + ellipsis;
    }
    return text;
} 
```

这个例子：

```
var maxWidth = 200;
var fontStyle = "bold 12pt arial";
var text = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";
var truncatedText = truncateText(text, fontStyle, maxWidth)
console.log(truncatedText); 
```

生成：“Lorem ipsum dolor sit a...”

# jquery - 将变量发送到 $.getScript

> ID：13396100
> 
> 赞同：3
> 
> 时间：2012-11-15T10:58:08.133
> 
> 标签：jquery, getscript

是否可以将变量发送到使用加载的脚本`$.getScript`？

目前我有：

```
$.getScript( "js/my_script.js", function() {
// do something here after script has loaded
}); 
```

但我想向加载的脚本发送一个变量。这可能吗，如果可以，怎么做？

例如

```
// this is a variable set outside of the script loaded via `$.getScript`
var my_variable = 1

// how do I get that variable sent to `my_script.js`
$.getScript( "my_script.js", function() {
// do something here after script has loaded
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T07:40:09.737

## jQuery.getScript()：

> 该脚本在**全局**上下文中执行，因此它可以引用其他变量并使用 jQuery 函数。

从文档看来，您的变量似乎*应该*可以在`$.getScript(function(){..})`调用中访问。因此，这可能是**scope**的问题。您的变量`my_variable`（可能）存在于 内部`$(document).ready(function(){...})`，因此仅限于该特定范围。

尝试通过将数据分配给窗口对象来 使用**全局变量：**

```
// Set it as a global variable by assigning it to the window object
window.my_variable = 'some value';

// Now use it inside of $.getScript()
$.getScript( "my_script.js", function() {
  // Access it by name
  alert(my_variable);
  // or as a property of window
  alert(window.my_variable);
  // both ways to access my_variable work and are valid.
} 
```

[资料来源：这里](http://api.jquery.com/jQuery.getScript/ "jQuery.getScript docs")的老问题和[这里](https://stackoverflow.com/questions/7440348/how-would-i-pass-data-to-an-external-script-loaded-with-getscript "如何传递给加载了 javascript 的外部脚本？")的 $.getScript 文档。 在我的个人服务器上验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-18T20:33:18.160

您可以将包含的文件放入函数中，然后运行

```
 $.getScript(url, function() {
       functionName(params);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-10T14:09:11.150

在这里要小心 - javascript 都是关于思考 4 维的（马蒂！）。$.getScript 是异步的，因此调用可能会在脚本加载之前立即返回。如果您有多个脚本要加载并且需要向每个脚本传递一些内容，那么您将不得不使用不同的变量。

# windows-ce - 如何获取当前在 wince 6.0 中使用的句柄计数

> ID：13396104
> 
> 赞同：4
> 
> 时间：2012-11-15T10:58:11.880
> 
> 标签：windows-ce

我需要获取当前在 wince 6.0 中分配的句柄数。这里有人知道如何获取吗？

# visual-studio-2010 - 如何搜索 VS2012 - 仅在某些文件类型中

> ID：13396105
> 
> 赞同：0
> 
> 时间：2012-11-15T10:58:13.373
> 
> 标签：visual-studio-2010

这对某人来说应该是一个不错的、简单的解决方法。

我想搜索“url”，但我只想搜索 *.cs 文件，因为我不希望搜索工具返回“url”的所有 HTML 实例

我确信我能够在以前版本的 Visual Studio 中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:00:51.697

是的，这确实是一个很好的简单修复......

然而：

Ctrl-F（查找）范围自动设置为“文档”。

当您按下 Ctrl-Shift-F 时，范围设置为整个解决方案。

现在 - Ctrl-Shift-F 调出我想要的“在文件中查找”。

# c# - Windows 8 商店应用程序 MediaElement 事件未触发

> ID：13396107
> 
> 赞同：1
> 
> 时间：2012-11-15T10:58:21.133
> 
> 标签：c#, audio, windows-8, app-store, media

我在 Visual Studio 2012 Ultimate 中开发了一个 Windows 8 应用程序，但我遇到了 MediaElement 问题，其中没有触发 MediaOpened 和 MediaEnded 事件。

下面是我的代码：

```
 public static async void PlaySound(string AudioFile, RoutedEventHandler PlayerEnded)
    {
        Uri audioUri = new Uri("ms-appx:///Assets/" + AudioFile);

        StorageFile audioStorage = await StorageFile.GetFileFromApplicationUriAsync(audioUri);

        if (audioStorage != null)
        {
            var stream = await audioStorage.OpenAsync(Windows.Storage.FileAccessMode.Read);

            MediaElement player = new MediaElement();

            player.AudioCategory = AudioCategory.GameEffects;

            player.AutoPlay = false;

            player.MediaEnded += PlayerEnded;

            player.MediaOpened += new RoutedEventHandler(delegate(Object sender, RoutedEventArgs e)
                {
                    player.Play();
                });

            player.SetSource(stream, audioStorage.ContentType);
        }
    } 
```

基本上这将传递一个按钮单击声音文件，播放完成后将调用 this.Frame.Navigate 方法切换到另一个页面。但它不起作用，因为没有任何事件被触发。

如果我设置 AutoPlay = true 那么它可以正常播放，但是事件仍然不会被触发。

任何人都可以看到有什么问题吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:20:31.200

I think your MediaElement needs to be in the visual tree to fire. See [http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/f5b9cdba-5521-467d-b838-8420afc68e7f/](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/f5b9cdba-5521-467d-b838-8420afc68e7f/)

# asp.net - asp.net 数据库会话没有被清除

> ID：13396112
> 
> 赞同：0
> 
> 时间：2012-11-15T10:58:41.813
> 
> 标签：asp.net, oracle, locking, connection

我正在使用 sqldatasource 在 asp.net 中连接 oracle 数据库，这是我的连接字符串

```
<add name="ConnectionString3" connectionString="Data Source=sml; User ID=sml; Password=sml; Unicode=True; Pooling=False;" providerName="System.Data.OracleClient"/> 
```

我打开连接并在选择某些内容后关闭连接。问题是当我浏览数据库会话时，那里存在两个锁定的会话。直到我关闭 asp.net server.can 任何人都可以指导我在 asp.net 中连接 oracle db 的正确方法是什么，然后在连接数据库后管理连接以清除。我的意思是我如何查询后可以从数据库注销。

**更新**

```
 Dim con = New OleDbConnection("Data Source=sml; User ID=sml; Password=sml; provider=OraOLEDB.Oracle; Pooling=false")
    Try
        con.Open()
        Dim cmd As New OleDbCommand("SELECT UPDTIME, YBAL_J, SCROLL_J, PENDING_PMT_J, YBAL_B, SCROLL_B, PENDING_PMT_B, CR_DT, OUT_BAL_J, OUT_BAL_B,SUGAR_J,CANE_CRUSH_J,RECOVERY_J,ETHANOL_J,SHEET_J,SUGAR_B,CANE_CRUSH_B,RECOVERY_B,ETHANOL_B FROM CMS20122013.V_DASH_LABELS@CMS", con)

        Dim da As New OleDbDataAdapter(cmd)
        Dim ds As New DataSet
        da.Fill(ds)

        Label1.Text = ds.Tables(0).Rows(0)(0).ToString
        Label5.Text = ds.Tables(0).Rows(0)(0).ToString
        Label2.Text = ds.Tables(0).Rows(0)(1).ToString
        Label3.Text = "Scroll Issued: " & ds.Tables(0).Rows(0)(2).ToString
        Label4.Text = "Payment Pending: " & ds.Tables(0).Rows(0)(3).ToString
        Label6.Text = ds.Tables(0).Rows(0)(4).ToString
        Label7.Text = "Scroll Issued: " & ds.Tables(0).Rows(0)(5).ToString
        Label8.Text = "Payment Pending: " & ds.Tables(0).Rows(0)(6).ToString
        Label14.Text = ds.Tables(0).Rows(0)(7).ToString
        GridView4.Columns(4).HeaderText = ds.Tables(0).Rows(0)(8).ToString
        GridView9.Columns(4).HeaderText = ds.Tables(0).Rows(0)(9).ToString
        GridView2.Columns(0).HeaderText = "Crushing [" & ds.Tables(0).Rows(0)(11).ToString & "]"
        GridView7.Columns(0).HeaderText = "Crushing [" & ds.Tables(0).Rows(0)(16).ToString & "]"
        con.Close()
        con.Dispose()
    Catch ex As Exception
        con.Close()
        con.Dispose()
    Finally
        con.Close()
        con.Dispose()
    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:04:02.040

您是否尝试过 C#“使用”语法？

```
using(var connection = new OracleConnection("some connection string"))
{
     connection.Open();

     //do stuff with connection
} 
```

更多细节在这里：http: [//msdn.microsoft.com/en-us/library/yh598w02 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.100).aspx)

# c# - 使用 SqlDataReader 检索 UniqueIdentifier

> ID：13396114
> 
> 赞同：0
> 
> 时间：2012-11-15T10:58:50.587
> 
> 标签：c#, sql, sql-server, guid, uniqueidentifier

我正在尝试使用 C# 在 SQL 中读取列类型“uniqueidentifier”

```
SqlCommand myCommand = new SqlCommand();

myCommand.CommandText = "SELECT templatename, subject, bodyhtml, sender, emailTemplateBodyFields.fieldid FROM emailTemplates left join emailtemplaterecipients on emailtemplates.emailtemplateid = emailtemplaterecipients.emailtemplateid left join emailTemplateBodyFields on emailtemplates.emailtemplateid = emailTemplateBodyFields.emailtemplateid WHERE emailtemplates.emailtemplateid = " + selectedEmailTemplateID;

myCommand.Connection = connection;
SqlDataReader myReader = myCommand.ExecuteReader();

while (myReader.Read())
{
    NewTemplateName = myReader.GetString(0);
    NewSubject  = myReader.GetString(1);
    NewBodyHTML = myReader.GetString(2);
    NewRecipients = myReader.GetString(3);
    myRecipientList.Add(NewRecipients);

    Guid tempGUID = myReader.GetGuid(4);
    NewBodyFields = Convert.ToString(tempGUID);
    myBodyList.Add(NewBodyFields); 
```

但是我得到一个空值异常，数据为空

```
Guid tempGUID = myReader.GetGuid(4); 
```

当我在 SQL Server 中运行该语句时，该列没有空值。

请告知如何从此列中检索信息。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:08:25.147

您正在使用`LEFT JOIN`to `emailTemplateBodyFields`。如果该表中不存在相应的记录，则可能导致结果集中出现空值，即使表`fieldid`中确实存在的记录从不为空。您可以检查[`IsDBNull`](http://msdn.microsoft.com/en-us/library/system.data.common.dbdatareader.isdbnull.aspx): 的结果，您将看到它为您获得异常的那些行返回 true。

要修复它，要么重新编写查询以确保没有得到空值，要么准备通过`IsDBNull`在调用之前检查来处理空值`GetGuid`。

对您的代码的两个侧面评论：

*   是否`selectedEmailTemplateID`来自用户输入？如果恶意用户决定设置为`"1; DROP TABLE emailTemplates"`怎么办？然后你的查询会做什么？使用参数。
*   确保释放您的资源。关键字使这`using`变得如此简单，以至于这里真的没有借口不这样做。

# jquery - 当滚动条到达浏览器顶部时淡入 ID

> ID：13396117
> 
> 赞同：-1
> 
> 时间：2012-11-15T10:59:00.947
> 
> 标签：jquery, onclick, scroll, fadein, fadeout

我所追求的只是一些适合我目前所拥有的代码。

当浏览器窗口的高度小于 900 像素时，我有一个箭头显示在顶部附近，单击该箭头时会淡出并将用户带到页面的不同部分。如果用户向上滚动到顶部，我希望箭头淡入，使其再次可见。到目前为止，这是我的代码：

```
if($(window).height()>900){
    $("#contact a.arrow").fadeOut();
}

if($(window).height()<900){
    $("#contact a.arrow").fadeIn(1000);
}

$("#contact a.arrow").click(function() { 
    $("#contact a.arrow").fadeOut(); 
});

$(window).resize(function() {
if($(window).height()>900){
    $("#contact a.arrow").fadeOut();
}

if($(window).height()<900){
      $("#contact a.arrow").fadeIn(1000);
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:02:41.793

我认为您正在寻找[`scroll`](http://api.jquery.com/scroll)事件和[`scrollTop`](http://api.jquery.com/scrollTop)功能，例如：

```
var fadingIn = false;
$(window).scroll(function() {
    if (!fadingIn && $(window).scrollTop() === 0) {
        fadingIn = true;
        $("#contact a.arrow").fadeIn(1000, function() {
            fadingIn = false;
        });
    }
}); 
```

如果不是，`=== 0`那么在用户开始看到箭头之前，您希望离顶部有多近。`< n``n`

# javascript - 在 IE (Internet Explorer) 中从非 HTML5 窗口打开 HTML5 窗口

> ID：13396118
> 
> 赞同：4
> 
> 时间：2012-11-15T10:59:01.410
> 
> 标签：javascript, html, internet-explorer

我们有一个瘦客户端业务应用程序，我们将在客户端使用 HTML5（首先仅用于特定任务，例如一些 SVG 拖放 UI 和 Canvas 图像生成）。

我知道，我不能在 Internet Explorer 中的非 HTML5 页面上的 iframe 中调用 HTML5 页面，因为它将显示为非 HTML5 页面，就像它的父页面一样。

我认为我可以通过 javascript 将其调用到一个新窗口。但这也行不通。在基础应用程序中有一个 open.window('HTML5.asp','_blank') 函数，其中 HTML5.asp 使用 SVG 和 Canvas。是的，当从 HTML5 环境中调用时，它已经过测试，可以正常工作。

有什么解决方案或解决方法可以让它工作吗？感谢你们！

**更新**

感谢您的帮助，我终于找到了错误。我试图为你创建一个简化的代码，但我无法重现这个错误，所以我再次检查了我们的算法，首先逐块，然后逐行。

我们有一个函数字典，在所有系统中应该是相同的，但它没有:) 而且我从那里使用了一个格式化函数，因此 HTML5 页面已经崩溃。

再次感谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:22:21.307

这是一个巧合：我只是偶然阅读了有关[Google Chrome Frame](http://www.google.com/chromeframe) IE 插件的信息，该插件显然允许您在 IE 中使用 Webkit 和 V8 JS 引擎。

在网页中，我们添加标签：

```
<meta http-equiv="X-UA-Compatible" content="chrome=1" /> 
```

（当然，Chrome Frame 需要安装。如果不是，也许重定向到安装程序可能是一个选项......）

正如我所说，我只是在看到你的问题前几分钟碰巧读到了这个，所以我不知道这对你是否有用（我也没有使用它的经验）。

祝你好运！

# sql - 如何使用 SQL 查询向现有值添加值

> ID：13396119
> 
> 赞同：12
> 
> 时间：2012-11-15T10:59:03.253
> 
> 标签：sql, sql-server-2008

我有一张名为`products`.

```
Products
    Quantity
    5 
```

我需要更新`Quantity`任何值；例如，将 3 添加到当前值，输出如下：

```
Quantity
8 
```

如何编写 SQL 查询来完成此操作？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-15T11:00:27.290

```
update products
set quantity = quantity + 3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T11:03:21.750

```
declare @table table(id int, quantity int)
insert into @table values(1, 5)

update @table
set quantity = quantity + 3
output inserted.quantity 
```

假设您实际上想要输出的值。不要忘记任何可能需要的 where 子句

# android - 无法在线性布局中添加自定义视图 - Android

> ID：13396124
> 
> 赞同：1
> 
> 时间：2012-11-15T10:59:22.480
> 
> 标签：android, android-linearlayout, custom-view

我`myCustomView`多次添加线性布局，它对于 customView 的第一个实例工作正常，但无法多次添加。

这是自定义视图类：

```
public class MultiTouchView extends View {

      private float x, y;
      Bitmap image;

      public MultiTouchView(Context context, Bitmap image) {
       super(context);
       this.image = image;

       // TODO Auto-generated constructor stub
      }

      public MultiTouchView(Context context, AttributeSet attrs) {
            super(context, attrs);
          }

          public MultiTouchView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
          }

      @Override
      protected void onDraw(Canvas canvas) {
       // TODO Auto-generated method stub       
        canvas.drawBitmap(image, x, y, null);
      }

      @Override
      protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
       // TODO Auto-generated method stub

          super.onMeasure(widthMeasureSpec, heightMeasureSpec);
          setMeasuredDimension(MeasureSpec.getSize(widthMeasureSpec),
             MeasureSpec.getSize(heightMeasureSpec));   
      }

      @Override
      public boolean onTouchEvent(MotionEvent event) {
       // TODO Auto-generated method stub

       int action = event.getAction();
       switch(action){
       case MotionEvent.ACTION_MOVE:
        x = event.getX();
        y = event.getY();

        break;
       case MotionEvent.ACTION_DOWN:

        x = event.getX();
        y = event.getY();

        break;
       case MotionEvent.ACTION_UP:
        break;

       }

       invalidate();
       return true;
      } 
     } 
```

这是我添加自定义视图的类：

```
public class AndroidTouch extends Activity {

    LinearLayout linear;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        linear = (LinearLayout)findViewById(R.id.linear);

          Bitmap backgroundCard = BitmapFactory.decodeResource(
                    getResources(), R.drawable.ic_launcher);

        MultiTouchView mt1 = new MultiTouchView(this, backgroundCard);
        linear.addView(mt1);

         Bitmap backgroundCard2 = BitmapFactory.decodeResource(
        getResources(), R.drawable.icon);
         MultiTouchView mt2 = new MultiTouchView(this, backgroundCard2);
         linear.addView(mt2);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:01:12.773

如果为 MultiTouchView 视图设置背景颜色，那么您会发现整个屏幕的颜色与添加的第二个视图的颜色相同。

我为子视图指定了布局参数，并且我能够让视图在屏幕上绘制。修改后的代码：

```
public class AndroidTouch extends Activity {

    LinearLayout linear;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_c);

        linear = (LinearLayout)findViewById(R.id.main);

        Bitmap backgroundCard = BitmapFactory.decodeResource(getResources(), R.drawable.image1);
        int w = backgroundCard.getWidth();
        int h = backgroundCard.getHeight();
        LayoutParams params = new LayoutParams(w, h);
        MultiTouchView mt1 = new MultiTouchView(getApplicationContext(), backgroundCard);
        //mt1.setBackgroundColor(Color.RED);//try uncommenting this wihtout layout params change
        linear.addView(mt1, params);

        Bitmap backgroundCard2 = BitmapFactory.decodeResource(getResources(), R.drawable.image2);
        params = new LayoutParams(backgroundCard2.getWidth(), backgroundCard2.getHeight());
        MultiTouchView mt2 = new MultiTouchView(getApplicationContext(), backgroundCard2);
        //mt1.setBackgroundColor(Color.BLUE);<-- Entire screen turns blue
        linear.addView(mt2, params);
    }
} 
```

![代码更改后的屏幕截图](../Images/b3b73bf39a7488058932535a0bc8b0ff.png) 但我相信在此之后您将面临另一个问题。从代码中可以明显看出您正在尝试在触摸位置绘制视图。我建议使用一个自定义视图并将多个图像添加到同一个视图。只有在这种情况下，您必须确定哪个视图需要以不同的坐标绘制，哪个视图保持不变。

希望这可以帮助

# html - 导航栏问题 - 形成步骤

> ID：13396127
> 
> 赞同：1
> 
> 时间：2012-11-15T10:59:27.127
> 
> 标签：html, css, navigation

我的导航栏有问题。加载页面时，有时它会变为看起来像它的步骤，但是当您刷新它时它会恢复正常。我似乎无法找出我做错了什么！请帮忙！！

网站是[http://www.pearsonfoods.com.au](http://www.pearsonfoods.com.au)

```
<div id="nav">
<a href="index.html" >
<div class="navBlock" style="color:red;"><p>Home</p>
</div>
</a>

<a href="about.html">
<div class="navBlock"><p>About us</p>
</div>
</a>

<a href="where.html">
<div class="navBlock"><p>Where we sell</p>
</div>
</a>

<a href="foods.html">
<div class="navBlock"><p>Our Foods</p>
</div>
</a>

<a href="contact.php">
<div class="navBlock"><p>Contact us</p>
</div>
</a>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:04:54.643

html

```
<ul class="nav">
   <li class="current"><a href="index.html">Home</a></li>
   <li> <a href="about.html">About Us</a></li>
   <li> <a href="where.html">Where we sell</a></li>
   <li> <a href="foods.html">Our Foods</a></li>
   <li> <a href="contact.html">Contact Us</a></li>
</ul>​ 
```

css

```
.nav {
    width: 900px;
    margin: 0 auto;
}
.nav li {
    background-color: rgba(0, 0, 0, 0.72);
    border-radius: 10px 10px 0px 0px;
    width: 180px;
    float:left;
}
.nav li a{
    color:#fff;
    text-decoration:none;
    text-align:center;
    line-height:50px;
    display:block;
}
.nav li a:hover,.nav li.current a{
    color:red;
} 
```

[链接到运行示例](http://jsfiddle.net/HjDj3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:05:15.110

您的标记格式不正确。`<a>`是“内联元素”并且`<div>`是“块元素”。块元素不能存在于内联元素中。

您的导航列表可以更好地构建为一个简单的无序列表：

```
<ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="index.html">About us</a></li>
    <li><a href="index.html">Where we sell</a></li>
</ul> 
```

看？干净多了:)

将每个样式`<li><a>`设置为块流元素`display: block;`（请注意，这不会影响元素的内联/块语义，它是严格意义上的视觉事物）并应用于`float: left;`元素`<li>`。

# ios - ios返回键只有一个文本字段被关闭

> ID：13396129
> 
> 赞同：0
> 
> 时间：2012-11-15T10:59:32.003
> 
> 标签：ios, xcode, text

我有两个字段，fldPassword 和 fldUsername。使用此代码（并且视图中的自委托确实加载了），我希望返回键在两个文本字段中都消失。但是，它只在第一次这样做。我究竟做错了什么？

```
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {
    if (fldPassword == self->fldPassword) {
        [fldPassword resignFirstResponder];
    } else if (fldUsername == self->fldUsername) {
        [self->fldUsername becomeFirstResponder];
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:13:23.383

```
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {
        [theTextField resignFirstResponder];
   return YES;
} 
```

在您的 .h 文件中添加委托方法：

```
@interface YourViewController : UIViewController<UITextFieldDelegate> 
```

那么它将适用于两个文本字段。

希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:01:21.647

你只解雇第一个，试试这个：

```
 - (BOOL)textFieldShouldReturn:(UITextField *)theTextField {
        if (fldPassword == self->fldPassword) {
            [fldPassword resignFirstResponder];
        }
        if (fldUsername == self->fldUsername) {
            [self->fldUsername resignFirstResponder];
        }

        return YES;
    } 
```

# javascript - 具有重叠透明边框的可排序图像，并且处理不起作用

> ID：13396132
> 
> 赞同：2
> 
> 时间：2012-11-15T10:59:40.780
> 
> 标签：javascript, jquery, html, css

我有一堆图像，它们周围有大面积的透明度（边距）。我试图在“可排序”中使用它们，但这使得拖动正确的图像很麻烦，因为它们都重叠并且它们的边距会导致拖动错误的图像。

不幸的是，无法裁剪透明区域。

所以我尝试在每个图像的中心创建一个细“手柄”栏，但手柄根本没有拖动图像。

```
$(".item").sortable({
    handle: ".handle"
}); 
```

[**这是一个 JSFiddle 链接**](http://jsfiddle.net/BkUvD/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:39:32.987

使用 sortable 功能时，您必须将其应用到“周围容器”，例如 a`<ul>`或 a `<div>`。

所以你需要做的就是让你的小提琴工作是用另一个div包围你的三个div，例如。`<div id="srt"> <div>... </div>`

在您的 jQuery 调用中，您需要像这样调整它：

```
$("#srt").sortable({
    handle: ".handle"
}); 
```

查看更正的小提琴：http: [//jsfiddle.net/BkUvD/16/](http://jsfiddle.net/BkUvD/16/)

# php - DUPLICATE KEY ERROR 不同值的相同错误消息

> ID：13396138
> 
> 赞同：2
> 
> 时间：2012-11-15T10:59:57.527
> 
> 标签：php, mongodb, symfony, doctrine-odm, doctrine-mongodb

当我想在失败后插入值时，我收到相同的消息错误（在不同值上具有相同 id 的重复键错误索引）。

在 MONGODB 中存在值 15 到 17 的键，会抛出异常。这是正常用例，但我收到相同的错误消息，并且在 17 之后没有插入数据，这不是正常用例。之前没有为 18,19,20 写入任何密钥，并且抛出了相同的异常

你有想法吗？

***错误信息：***

```
15E11000 duplicate key error index: api.inventory_user.$reference_id_1_member_id_1 dup key: { : "15", : "test@test.com" }15
16E11000 duplicate key error index: api.inventory_user.$reference_id_1_member_id_1 dup key: { : "15", : "test@test.com" }16
17E11000 duplicate key error index: api.inventory_user.$reference_id_1_member_id_1 dup key: { : "15", : "test@test.com" }17
18E11000 duplicate key error index: api.inventory_user.$reference_id_1_member_id_1 dup key: { : "15", : "test@test.com" }18
19E11000 duplicate key error index: api.inventory_user.$reference_id_1_member_id_1 dup key: { : "15", : "test@test.com" }19
20E11000 duplicate key error index: api.inventory_user.$reference_id_1_member_id_1 dup key: { : "15", : "test@test.com" }20 
```

*   教义-mongodb
*   学说-mongodb-odm
*   DoctrineMongoDBBundle

***我的代码：***

```
$i=14;
while($i<20){
$i++;
echo $i;
try{
    $inventoryUser = new InventoryUser();
    $inventoryUser->setMemberId('test@test.com');
    $inventoryUser->setReferenceId($i);
    $this->write($inventoryUser);
}catch (\Exception $e){
    echo $e->getMessage();
    echo $i;

}

}

private function write($inventory){
    try{
        $dm = $this->get('doctrine.odm.mongodb.apibase_document_manager');
        $dm->persist($inventory);
        $dm->getSchemaManager()->ensureIndexes();
        $dm->flush();

    }catch (\Exception $e){
        throw new \Exception($e->getMessage());
    }
}
namespace API\StoreBundle\Document;
use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
* @MongoDB\Document(db="api",collection="inventory_user")
* @MongoDB\UniqueIndex(keys={"reference_id"="asc", "member_id"="asc"})
*/
class InventoryUser
{

 /**
 * @MongoDB\Id
 */
private $id;

/**
 * @MongoDB\String
 */
private $reference_id;

 /**
 * @MongoDB\String
 */
private $member_id;

public function getReferenceId(){
    $this->reference_id;
}

public function getMemberId(){
    $this->member_id;
}

public function setReferenceId($reference_id){
    $this->reference_id=$reference_id;
}

public function setMemberId($member_id){
    $this->member_id=$member_id;
}
} 
```

# javascript - 从内部删除文本

> ID：13396141
> 
> 赞同：1
> 
> 时间：2012-11-15T11:00:04.810
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 删除文本](https://stackoverflow.com/questions/1571076/remove-text-with-jquery)

我想从 a 中删除文本`div`，但其中`div`包含其他节点。

如果我使用`$("#hwiTestimonial").text("");`它也会删除`<br/>`和`<div>`。我怎样才能只指定删除文本，没有任何节点？

```
<div id="hwiTestimonial">
    " Bla bla" 
    <br/>
    <div>....</div>
</div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T11:01:57.683

您可以[过滤](http://api.jquery.com/filter/)元素的[内容](http://api.jquery.com/contents/)以仅保留文本节点：

```
$("#hwiTestimonial").contents().filter(function () {
    return this.nodeType === 3; // Text nodes only
}).remove(); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/78UEJ/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:06:21.133

您可以使用其中任何一种

```
$("#hwiTestimonial")
  .contents()
  .filter(function() {
    return this.nodeType == Node.TEXT_NODE;
}).remove(); 
```

或者您也可以将其用于旧浏览器支持

```
$("#hwiTestimonial").contents().filter(function () {
    return this.nodeType === 3; // Text nodes only
}).remove(); 
```

# c# - ASP.NET MVC localhost:[port] 显示 directoryoverview 而不是 /Home/Index

> ID：13396144
> 
> 赞同：1
> 
> 时间：2012-11-15T11:00:14.957
> 
> 标签：c#, asp.net-mvc, visual-studio-2008

重新安装 VS08 后，一些设置似乎是错误的。所有的 ASP 项目都没有提到 Homecontroller。

![](../Images/97dd832c9e10e2571ee92fef0bfb9441.png)

而不是这个，除非我特别浏览 /Home 或其他控制器，否则我会看到项目的整个目录索引。

有谁知道，现在怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:06:13.827

您需要正确配置您的 web.config 我认为这个问题会涵盖您： [在 Asp.net 中设置默认页面](https://stackoverflow.com/questions/1913058/set-default-page-in-asp-net)

# java - 使用java输入输出

> ID：13396147
> 
> 赞同：0
> 
> 时间：2012-11-15T11:00:23.767
> 
> 标签：java, io, nio

如果我们用我的 java 应用程序打开一个文件并用另一个应用程序打开同一个文件并进行一些更改。我制作的java应用程序，应该立即知道这个文件被一些外部应用程序更改，并提示用户加载新的内容。
如何使用java来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:04:48.877

这个问题在这里之前被问过

[https://stackoverflow.com/questions/5379458/java-filewatcher](https://stackoverflow.com/questions/5379458/java-filewatcher)

阅读此[http://docs.oracle.com/javase/tutorial/essential/io/notification.html](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:03:36.273

您可以在此处理程序中进行检查：

```
frame.addWindowFocusListener(new WindowAdapter() {
    public void windowGainedFocus(WindowEvent e) {
        // TODO: read file again and compare with previous 
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:03:15.293

我认为你必须有线程来轮询文件信息。请参阅此问题[File changed listener in Java](https://stackoverflow.com/questions/494869/file-changed-listener-in-java)。

# c# - DataTable根据时间间隔大小添加行

> ID：13396151
> 
> 赞同：1
> 
> 时间：2012-11-15T11:00:33.407
> 
> 标签：c#, linq, datatable

我有一个数据表和间隔大小为 10

**输入表：**

```
 DateTime    ChNo   Data
--------------------------
6/10 10:10    1      0.1
6/10 10:20    1      0.1
6/10 11:05    2      0.1
6/10 11:06    2      0.1
6/10 11:07    2      0.1
6/10 11:08    2      0.1
6/10 11:09    2      0.1
6/10 11:10    2      0.1
6/10 11:11    2      0.1
6/10 11:12    2      0.1
6/10 11:13    2      0.1 
```

我需要根据间隔大小转换上表，如上所述，如果间隔大小为 10，我的目标表应该看起来像

```
DateTime    ChNo   Data
--------------------------
6/10 10:10    1      0.1
6/10 10:20    1      0.1
6/10 11:10    2      0.6 -----> sum of intervals from 11:05 to 11:10
6/10 11:13    2      0.3 -----> sum of intervals from 11:11 to 11:13 
```

使用 linqs 获得上述所需输出的最佳方法是什么

谢谢，穆拉利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:39:24.263

我还没有找到 Linq 解决方案，但我可以为您提供一个程序化解决方案。请注意，我使用完整的 DateTime 表示来执行此操作，因为解析而不是您没有年份的表示。检查代码：

```
 //DataTable initialisation
                dt = new DataTable();
                dt.Columns.Add("Column1");
                dt.Columns.Add("Column2");
                dt.Columns.Add("Column3");

                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 10:10"), 1, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 10:20"), 1, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 11:05"), 2, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 11:06"), 2, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 11:07"), 2, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 11:08"), 2, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 11:09"), 2, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 11:10"), 2, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 11:11"), 2, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 11:12"), 2, 0.1 });
                dt.Rows.Add(new object[] { DateTime.Parse("6/10/2012 11:13"), 2, 0.1 });

//Method that groups data
    void GroupByDate()
    {
                DateTime startDate = DateTime.Parse(dt.Rows[0].ItemArray[0].ToString());
                DateTime endDate = DateTime.Parse(dt.Rows[dt.Rows.Count - 1].ItemArray[0].ToString());
                StringBuilder sb = new StringBuilder();
                int rowIndex = 0;
                for (DateTime d = startDate.AddMinutes(-(startDate.Minute - 1) % 10); rowIndex < dt.Rows.Count && d < endDate.AddMinutes(10 - endDate.Minute % 10); d = d.AddMinutes(10))
                {
                    double sum = 0;
                    DateTime lastDateInSequence = new DateTime();
                    for (DateTime md = d;rowIndex < dt.Rows.Count && md < d.AddMinutes(10); md = md.AddMinutes(1))
                    {
                        DateTime inbetween = DateTime.Parse(dt.Rows[rowIndex].ItemArray[0].ToString());
                        if ( inbetween == md)
                        {
                            sum += double.Parse(dt.Rows[rowIndex].ItemArray[2].ToString());
                            lastDateInSequence = md;
                            rowIndex++;
                        }
                    }
                    if (sum > 0.0)
                    {
                        // you can add this results to the new DataTable like dt1.Rows.Add(lastDateInSequence.ToString("dd/MM hh:mm"), dt.Rows[rowIndex - 1].ItemArray[1], sum);
                        sb.Append(lastDateInSequence.ToString("dd/MM hh:mm") + " " + dt.Rows[rowIndex - 1].ItemArray[1].ToString() + " " + sum.ToString() + Environment.NewLine);
                    }
                }
                MessageBox.Show(sb.ToString());
    } 
```

# xslt - 我的 XSLT1 的性能优化

> ID：13396156
> 
> 赞同：0
> 
> 时间：2012-11-15T11:00:55.500
> 
> 标签：xslt, optimization, biztalk

如果有人能发现任何改进/建议，我希望稍微优化一下这个 XSLT？

我收到一个遵循这种格式的 XML 文件：

```
<TransfersToComplete>
    <TransfersForFees>
        <Transfer>
            <PlayerID>1234</PlayerID>
            <ClubJoiningID>4444</ClubJoiningID>
            <FeeInPounds>1200000</FeeInPounds>
        </Transfer>
        <Transfer>
            <PlayerID>3835</PlayerID>
            <ClubJoiningID>4444</ClubJoiningID>
            <FeeInPounds>5000000</FeeInPounds>
        </Transfer>
        <Transfer>
            <PlayerID>17118</PlayerID>
            <ClubJoiningID>5229</ClubJoiningID>
            <FeeInPounds>18000000</FeeInPounds>
        </Transfer>
    </TransfersForFees>
    <FreeAgencyTransfers>
        <FreeTransfer>
            <PlayerID>42323</PlayerID>
            <ClubJoiningID>332</ClubJoiningID>
        </FreeTransfer>
    </FreeAgencyTransfers>
</TransfersToComplete> 
```

我还有另一个 XML 文件，其中包含“活动”俱乐部的列表（即由球员而不是 AI 控制的俱乐部）

```
 <ActiveClubs>
<Club><ClubID>1234</ClubID></Club>
    <Club><ClubID>4482</ClubID></Club>
    </ActiveClubs> 
```

作为 Biztalk 解决方案的一部分，我已将它们加入到双输入映射中，因此输入文档看起来像这样：

```
<Root>
    <InputMessage0>
        <ActiveClubs>
            <Club>
                <ClubID>1234</ClubID>
            </Club>
            <Club>
                <ClubID>4482</ClubID>
            </Club>
        </ActiveClubs>
    </InputMessage0>
    <InputMessage1>
        <TransfersToComplete>
            <TransfersForFees>
                <Transfer>
                    <PlayerID>1234</PlayerID>
                    <ClubJoiningID>4444</ClubJoiningID>
                    <FeeInPounds>1200000</FeeInPounds>
                </Transfer>
                <Transfer>
                    <PlayerID>3835</PlayerID>
                    <ClubJoiningID>4444</ClubJoiningID>
                    <FeeInPounds>5000000</FeeInPounds>
                </Transfer>
                <Transfer>
                    <PlayerID>17118</PlayerID>
                    <ClubJoiningID>5229</ClubJoiningID>
                    <FeeInPounds>18000000</FeeInPounds>
                </Transfer>
            </TransfersForFees>
            <FreeAgencyTransfers>
                <FreeTransfer>
                    <PlayerID>42323</PlayerID>
                    <ClubJoiningID>332</ClubJoiningID>
                </FreeTransfer>
            </FreeAgencyTransfers>
        </TransfersToComplete>
    </InputMessage1>
</Root> 
```

我不希望游戏中的每个玩家都能看到每次转会的完整运作，所以我只限制在他们自己的俱乐部，我的 XSLT 如下：

```
 <xsl:for-each select="/*[1]/ActiveClubs/Club">
<xsl:variable name ="clubId" select="current()/ClubID/text()"/>
<...CallTemplate...>
</xsl:for-each> 
```

有没有办法可以优化每个，它有什么帮助？随着活跃俱乐部数量的增加，我看到我的 CPU 慢慢被占用，所以我认为这是部分原因？

编辑：

预期输出将是变量 ClubId 第一次是 1234，第二次是 4482

在我上面的例子（2个活跃的俱乐部）中，我看到很少/没有性能下降——当我达到 40 岁及以上时......

就显示 XSLT 的其余部分而言 - 这是它调用的模板：

```
<xsl:call-template name="DoPaidTransfers">
  <xsl:with-param name="var:ClubId" select="$clubId"/>
</xsl:call-template> 
```

这是：

```
 <xsl:template name="DoPaidTransfers">
<xsl:param name="var:ClubId"/>
<responseCode><xsl:value-of select="CSharpCodeCall:DoPaidTransfers($clubId)"/></responseCode>
</xsl:template> 
```

我的 C# 代码将它们写入数据库，返回成功代码，并通过环境传递到其他地方。正如我所说，它按预期工作，但是当增加活跃的俱乐部数量时，我发现性能会显着下降。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:15:26.247

你能张贴整个xslt吗？

我很确定性能问题不在您展示的 xslt 中。

我通过 VS 中的 ms xsl 处理器在 2000 个活动俱乐部的列表上运行了以下 xslt，同时通过`Thread.Sleep()`在 C# 脚本中引入 10 毫秒延迟来模拟您的数据库写入调用，结果是：

> 样式表加载时间：25.12 毫秒样式表执行时间：20125 毫秒

即如果您排除睡眠，则在 125 毫秒内 2000 个俱乐部。

所以问题肯定在其他地方，例如数据是如何`TransfersToComplete`进入地图的？

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:CSharpCodeCall="http://schemas.microsoft.com/BizTalk/2003/userCSharp"
                xmlns:msxsl="urn:schemas-microsoft-com:xslt"
                xmlns:var="YourNSForVariables"
                exclude-result-prefixes="var msxsl CSharpCodeCall"
                >
    <xsl:template match="/">
        <xsl:for-each select="//*[1]/ActiveClubs/Club">
            <xsl:variable name ="clubId" select="current()/ClubID/text()"/>
            <club>
                <clubid>
                    <xsl:value-of select="$clubId"/>
                </clubid>
                <xsl:call-template name="DoPaidTransfers">
                    <xsl:with-param name="var:ClubId" select="$clubId"/>
                </xsl:call-template>
            </club>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="DoPaidTransfers">
        <xsl:param name="var:ClubId"/>
        <responseCode>
            <xsl:value-of select="CSharpCodeCall:DoPaidTransfers($var:ClubId)"/>
        </responseCode>
    </xsl:template>

    <msxsl:script language="C#" implements-prefix="CSharpCodeCall">
        <![CDATA[
        // I've stubbed this as a 10ms delay
        public System.String DoPaidTransfers(System.String clubId)
        {
            System.Threading.Thread.Sleep(10);
            return "Transferred";
        }
        ]]>
    </msxsl:script>

</xsl:stylesheet> 
```

# android - 无需更改布局的 Android 屏幕方向检测

> ID：13396157
> 
> 赞同：1
> 
> 时间：2012-11-15T11:00:59.213
> 
> 标签：android, orientation

我想检测我的活动中的布局变化，同时将小部件保持在它们所在的位置。有没有办法做到这一点。我尝试了 setOrientation(LinearLayout.HORIZONTAL) ，但它似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:10:12.107

尝试 `android:configChanges="orientation"`在活动中添加清单文件，您可以通过使用在活动的 onResume 方法中获取方向

```
if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE){
//WHAT TO DO IN LANDSCAPE
} else {
//WHAT TO DO IN PORTRAIT
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:04:10.993

作为较低级别的解决方案，您可以使用其中一个[传感器](http://developer.android.com/reference/android/hardware/Sensor.html)来检测设备的方向/倾斜。如果您不想更改布局，则可以仅在清单中将活动限制为纵向或横向...

您可以使用[Elixir](https://play.google.com/store/apps/details?id=bt.android.elixir&hl=en)应用程序来查看特定传感器返回的值。

# android - 在 Android 样式中覆盖颜色

> ID：13396159
> 
> 赞同：2
> 
> 时间：2012-11-15T11:01:05.183
> 
> 标签：android, android-alertdialog, android-holo-everywhere

我知道使用[颜色生成器](http://android-holo-colors.com/)可以为大多数 UI 元素生成样式。同样使用[操作栏颜色生成器](http://jgilfelt.github.com/android-actionbarstylegenerator/)，我可以为大多数（如果不是全部）操作栏元素创建颜色。

但由于某种原因，警报对话框仍然逃脱了那些不错的工具。无论我尝试什么，我都无法更改 ICS（及更高版本）AlertDialog 标题的蓝色下划线颜色。

无论如何我可以覆盖颜色本身而不必指向单个元素？

像这样的东西（这不起作用），但同样的想法：

```
 <style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar">
        <item name="@android:color/holo_blue_bright" type="color">#F00</item>
        <item name="@android:color/holo_blue_dark" type="color">#F00</item>
        <item name="@android:color/holo_blue_light" type="color">#F00</item> 
```

# javascript - jQuery 网络摄像头。将拍摄的照片添加到上传表单字段

> ID：13396160
> 
> 赞同：1
> 
> 时间：2012-11-15T11:01:05.760
> 
> 标签：javascript, jquery-ui, jquery, base64

您好，我正在为我的项目使用[jQuery AS3 网络摄像头插件](https://github.com/sshilko/jQuery-AS3-Webcam)。但可以弄清楚如何获取拍摄的照片并将其添加到上传表单字段（如果可能的话）。当我单击捕获按钮时，它会在捕获窗口中显示图片，但实际上如何保存呢？

```
 $("#webcam").webcam({
                swffile: "js/sAS3Cam.swf?v=20120613",

                previewWidth: 400,
                previewHeight: 300,

                resolutionWidth: 400,
                resolutionHeight: 300,

                noCameraFound: function () {
                    this.debug('error', 'Kamera negalima');
                },

                swfApiFail: function(e) {
                    this.debug('error', 'Įskiepio klaida');
                },

                cameraDisabled: function () {
                    this.debug('error', 'Prašom suteikti leidimą prisijungti kamrai prie puslapio');
                },

                debug: function(type, string) {
                    if (type == 'error') {
                        alert(string);
                    }
                },

                cameraEnabled:  function () {
                    this.debug('notice', 'Camera enabled');
                    var cameraApi = this;
                    if (cameraApi.isCameraEnabled) {
                        return;
                    } else {
                        cameraApi.isCameraEnabled = true;
                    }

                    setTimeout(function() {
                        $(".capture").slideDown('fast');
                    }, 750);

                    $('.capture_btn').click(function() {
                        $(".capture").slideUp('fast');
                        $(".save_img").slideDown('fast');
                        var result = cameraApi.save();
                        if (result && result.length) {
                            var actualShotResolution = cameraApi.getResolution();
                          $('.reload_camera').click(function() {
                             cameraApi.isCameraEnabled = true;
                          }); 
                } else {
                    cameraApi.debug('error', 'Bloga kamera');
                }
            });
        }
    });
      <form action="processupload.php" style="display: none" method="post" enctype="multipart/form-data" id="UploadForm">
            <table width="500" border="0">
                <tr>
                    <td><input name="ImageFile" id="file" type="file" /></td>
                </tr>
                <tr>
                    <td style="display: none;"><input type="submit"  id="SubmitButton" value="Upload" /></td>
                </tr>
            </table>
        </form> 
```

# xml - 如何使用 Xlinq 读取复杂的 XML 文件

> ID：13396164
> 
> 赞同：0
> 
> 时间：2012-11-15T11:01:17.123
> 
> 标签：xml, linq-to-xml

嗨，我正在处理一些 XML 文件，我正在使用 Xlinq 遍历 XMl 文件。我在下面提到了 XML 文件的结构：

```
<abc_classes>
  <abc:class xsi:type="bbb" id="123">
    <status>66</status>
    <source_language country_code="US" language_code="en" />
    <preferred_name>
      <label country_code="EN" language_code="en">Horse</label>
    </preferred_name>
    <abc_position>14</abc_position>
  </abc:class>
  <abc:class xsi:type="bbb" id="345">
    <status>66</status>
    <source_language country_code="US" language_code="en" />
    <preferred_name>
      <label country_code="EN" language_code="en">Elephant</label>
    </preferred_name>
    <abc_position>15</abc_position>
  </abc:class> 
```

我的工作应该显示如下结果：Horse-14 Elephant-15

我需要使用 Xlinq 来做到这一点。任何将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:05:33.133

简单的[Google 搜索](http://www.codeproject.com/Articles/18751/XLINQ-Introduction-Part-3-Of-3)展示了许多关于遍历、加载等的细节。请不要懒惰阅读。

# php - JSON解码/编码丢失换行符/文件结构？

> ID：13396169
> 
> 赞同：2
> 
> 时间：2012-11-15T11:01:26.373
> 
> 标签：php, json

此 php 脚本将元素添加到 JSON 对象（数组）之一。

```
#!/usr/bin/php
<?php

$filename = 'composer.json';
$obj = json_decode(file_get_contents($filename, true));

if (null === $obj) {
   throw new Exception(json_last_error()); // this will just be an error code
}

$obj->require = (object) array_merge((array) $obj->require, array('friendsofsymfony/user-bundle' => "*"));

file_put_contents(
    $filename,
    json_encode($obj)
); 
```

问题是，它弄乱了文件格式。

在使用脚本之前，我正在编辑的文件如下所示：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

在我运行脚本之后；我明白了：

```
{"name":"symfony\/framework-standard-edition","description":"The \"Symfony Standard Edition\" distribution","autoload":{"psr-0":{"_empty_":"src\/"}},"require":{"php":">=5.3.3","symfony\/symfony":"2.1.*","doctrine\/orm":">=2.2.3,<2.4-dev","doctrine\/doctrine-bundle":"1.0.*","twig\/extensions":"1.0.*","symfony\/assetic-bundle":"2.1.*","symfony\/swiftmailer-bundle":"2.1.*","symfony\/monolog-bundle":"2.1.*","sensio\/distribution-bundle":"2.1.*","sensio\/framework-extra-bundle":"2.1.*","sensio\/generator-bundle":"2.1.*","jms\/security-extra-bundle":"1.2.*","jms\/di-extra-bundle":"1.1.*","friendsofsymfony\/user-bundle":"*"},"scripts":{"post-install-cmd":["Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap","Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache","Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets","Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"],"post-update-cmd":["Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap","Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache","Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets","Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"]},"minimum-stability":"dev","extra":{"symfony-app-dir":"app","symfony-web-dir":"web"}} 
```

所有换行符等都丢失了。

我的 PHP 版本是 5.3.10，这意味着我不能使用具有“PRETTY_PRINT”选项的 PHP 5.4 进行编码。

有没有办法使用 json_encode(); 将我的文件结构保留在 PHP 5.3.10 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:04:42.480

使用`print_r`：

```
$pretty_json = print_r(json_decode($arr, true), true); 
```

意识到你需要json文件，检查[这个函数](http://snipplr.com/view/60559/prettyjson/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:04:33.463

不幸的是没有。

由于数据是供机器使用的，所以这不应该是一个主要问题——如果您想直观地检查它，有许多工具可以根据上下文自动为您进行漂亮的打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:32:51.340

为什么格式很重要？当然，这意味着程序/进程可以使用，消除对人类可读性的需求？

我有一个方便的谷歌浏览器扩展来查看 json 提要：

[https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa](https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T13:40:18.517

使用了Denis Ermolin 提供的[函数，并添加了 str_replace()：](http://snipplr.com/view/60559/prettyjson/)

```
<?php

$filename = 'composer.json';
$obj = json_decode(file_get_contents($filename, true));

if (null === $obj) {
   throw new Exception(json_last_error()); // this will just be an error code
}

$obj->require = (object) array_merge((array) $obj->require, array('friendsofsymfony/user-bundle' => "*"));

file_put_contents($filename,pretty_json(json_encode($obj)));

function pretty_json($json) {
    $result      = '';
    $pos         = 0;
    $strLen      = strlen($json);
    $indentStr   = '  ';
    $newLine     = "\n";
    $prevChar    = '';
    $outOfQuotes = true;
    for ($i=0; $i<=$strLen; $i++) {
        // Grab the next character in the string.
        $char = substr($json, $i, 1);
        // Are we inside a quoted string?
        if ($char == '"' && $prevChar != '\\') {
            $outOfQuotes = !$outOfQuotes;
        // If this character is the end of an element, 
        // output a new line and indent the next line.
        } else if(($char == '}' || $char == ']') && $outOfQuotes) {
            $result .= $newLine;
            $pos --;
            for ($j=0; $j<$pos; $j++) {
                $result .= $indentStr;
            }
        }
        // Add the character to the result string.
        $result .= $char;
        // If the last character was the beginning of an element, 
        // output a new line and indent the next line.
        if (($char == ',' || $char == '{' || $char == '[') && $outOfQuotes) {
            $result .= $newLine;
            if ($char == '{' || $char == '[') {
                $pos ++;
            }
            for ($j = 0; $j < $pos; $j++) {
                $result .= $indentStr;
            }
        }
        $prevChar = $char;
    }
    $result = str_replace("\\/", "/", $result);
    return $result;
}
?> 
```

或者只是更新到 PHP 5.4 以使用`PRETTY_PRINT`...

# python - pyopengl 帧缓冲区

> ID：13396170
> 
> 赞同：2
> 
> 时间：2012-11-15T11:01:28.580
> 
> 标签：python, framebuffer, pyopengl

我正在尝试在 PyOpenGL 中使用帧缓冲区对象，并找到了一些教程来自学。我正在使用 Python 2.7.3 的 WinXP 机器上工作，我刚刚安装了 PyOpenGL 3.0.2 和 PyOpenGL-accelerate 3.0.2 的二进制发行版。但是，一开始我就遇到了一个问题，从某种意义上说，我收到了 fbo 函数似乎不存在的错误消息。这些是重现我的问题的步骤：

导入模块：

```
from OpenGL.GL import *
from OpenGL.GLU import *
from OpenGL.GL.framebufferobjects import * 
```

我现在应该可以使用帧缓冲区对象/函数了。

```
print glGenFramebuffers
print glBindFramebuffer 
```

节目

```
<OpenGL.extensions.glGenFramebuffers object at 0x03172260>
<OpenGL.extensions.glBindFramebuffer object at 0x03172120> 
```

但是，如果我尝试按照教程中的说明调用（创建一个实例）该对象，使用：

```
fbo = glGenFramebuffers(1)
glBindFramebuffer(GL_FRAMEBUFFER, fbo ) 
```

我得到错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "latebind.pyx", line 31, in OpenGL_accelerate.latebind.LateBind.__call__ (src\latebind.c:645)
  File "C:\Python27\lib\site-packages\OpenGL\extensions.py", line 189, in finalise
    self.__name__,
OpenGL.error.NullFunctionError: Attempt to call an undefined alternate function (glGenFramebuffers, glGenFramebuffersEXT), check for bool(glGenFramebuffers) before calling 
```

使用

```
bool(glGenFramebuffers) 
```

确实返回 False。

我究竟做错了什么？不应该使用 PyOpenGL(-accelerate) 的二进制文件安装所有必需的帧缓冲库吗？

提前感谢任何可以帮助我的人。

编辑：我刚刚发现[https://stackoverflow.com/questions/12953134/problems-with-frame-buffer-objects-fbos-in-pyopengl](https://stackoverflow.com/questions/12953134/problems-with-frame-buffer-objects-fbos-in-pyopengl)，有类似的问题，但没有解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:04:45.620

显然，如果您从文件中运行，上面的代码并不能很好地显示这种行为和功能。我在控制台中尝试了上述命令，然后

```
bool(glGenFramebuffers) 
```

返回 False

从文件运行时，它返回 True 并且一切正常。此外，您似乎不需要包括

```
from OpenGL.GL.framebufferobjects import * 
```

在较新版本的 PyOpenGL (>= 3.0.2) 中，您也可以在没有它的情况下访问 Framebuffer 对象

# java - 使用 Java 发送 HTTP Post Payload

> ID：13396171
> 
> 赞同：5
> 
> 时间：2012-11-15T11:01:28.590
> 
> 标签：java, httprequest, payload, grooveshark

我正在尝试连接到grooveshark API，这是http请求

```
POST URL
http://api.grooveshark.com/ws3.php?sig=f699614eba23b4b528cb830305a9fc77
POST payload
{"method":'addUserFavoriteSong",'parameters":{"songID":30547543},"header": 
{"wsKey":'key","sessionID":'df8fec35811a6b240808563d9f72fa2'}} 
```

我的问题是如何通过 Java 发送此请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:11:01.117

基本上，您可以使用标准 Java API 来完成。看看[`URL`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)，，[`URLConnection`](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html)也许[`HttpURLConnection`](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html)。它们在包装中[`java.net`](http://docs.oracle.com/javase/6/docs/api/java/net/package-summary.html)。

至于 API 特定的签名，请尝试`sStringToHMACMD5`在[此处找到。](https://stackoverflow.com/questions/8396297/android-how-to-create-hmac-md5-string)

**并记住更改您的 API 密钥，这非常重要，因为每个人都知道。**

```
String payload = "{\"method\": \"addUserFavoriteSong\", ....}";
String key = ""; // Your api key.
String sig = sStringToHMACMD5(payload, key);

URL url = new URL("http://api.grooveshark.com/ws3.php?sig=" + sig);
URLConnection connection = url.openConnection();
connection.setDoInput(true);
connection.setDoOutput(true);

connection.connect();

OutputStream os = connection.getOutputStream();
PrintWriter pw = new PrintWriter(new OutputStreamWriter(os));
pw.write(payload);
pw.close();

InputStream is = connection.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(is));
String line = null;
StringBuffer sb = new StringBuffer();
while ((line = reader.readLine()) != null) {
    sb.append(line);
}
is.close();
String response = sb.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:11:08.170

您可以查看[Commons HttpClient](http://hc.apache.org/httpclient-3.x/)包。

创建 's 相当简单`POST`，特别是您可以复制此处找到的代码： http: [//hc.apache.org/httpclient-3.x/methods/post.html](http://hc.apache.org/httpclient-3.x/methods/post.html)：

```
PostMethod post = new PostMethod( "http://api.grooveshark.com/ws3.php?sig=f699614eba23b4b528cb830305a9fc77" );
NameValuePair[] data = {
    new NameValuePair( "method", "addUserFavoriteSong..." ),
    ...
};
post.setRequestBody(data);
InputStream in = post.getResponseBodyAsStream();
... 
```

干杯，

# sql - SQL将下一行的值放入当前行

> ID：13396173
> 
> 赞同：1
> 
> 时间：2012-11-15T11:01:35.513
> 
> 标签：sql

我正在尝试获取下一行的“对齐”值并将其存储到名为 nextAlign 的字段中的当前行中。我尝试过使用分组，并且该表的唯一标识符也不一致，并且并不总是增量为 1。这是一些数据：

```
 type        field                        starttop startleft  length  decimals alignment
-------------------------------------------------------------------------------------------
Text      CUSTOMER DETAILS CONFIRMATION      13.00     38.00     30.00     0.00      Centre
Text      Please spare a few minutes to      15.00     2.00      30.00     0.00      Left          
Text      confirm your details as held       15.00     2.00      30.00     0.00      Wrap      
Text      on our system. You may fax the     15.00     2.00      30.00     0.00      Wrap      
Text      form to the number above.          15.00     2.00      30.00     0.00      Wrap      
Text      Any information you may supply     17.00     2.00      30.00     0.00      Left          
Text      will not be made available to      17.00     2.00      30.00     0.00      Wrap      
Text      third parties according to the     17.00     2.00      30.00     0.00      Wrap      
Text      Privacy Act.                       17.00     2.00      30.00     0.00      Wrap      
Text      Legal name:                        20.50     2.00      30.00     0.00      Left 
```

我想要的只是一个名为“nextAlign”的列，其中包含以下数据：

```
nextAlign

-Left
-Wrap
-Wrap 
-Wrap
-Left
-Wrap 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:07:00.743

你没有指定你的 DBMS，所以这是 ANSI SQL：

```
select type, 
       field, 
       align, 
       lead(align) over (order by starttop) as next_align,
       starttop,
       startleft
from the_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:07:45.720

使用 ROW_NUMBER() OVER(ORDER BY)

并以这种方式将其外部连接到相同的选择：select_1_rownumber = select_2_rownumber+1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:07:56.853

```
with temptable as 
( select rownum
         ,type 
         ,field 
         ,starttop 
         ,startleft 
         ,length 
         ,decimals 
         ,alignment 
    from YOURTABLE )
select   t.type 
         ,t.field 
         ,t.starttop 
         ,t.startleft 
         ,t.length 
         ,t.decimals 
         ,t.alignment
         ( select tt.alignment from temptable tt where tt.rownum = t.rownum+1 ) nextalign
    from temptable t 
```

可能对你有用。

# android - Android 从服务器下载多个图像（每个> 2mb）时出现内存不足异常

> ID：13396174
> 
> 赞同：-1
> 
> 时间：2012-11-15T11:01:45.853
> 
> 标签：android, bitmap, out-of-memory

这是我的代码，下载多个图像时出现 outofMemory 异常。我经历了一个重复的问题，但没有找到合适的答复。

```
try {
  HttpGet httpRequest = new HttpGet("http://staging.xyz.com/db/demo_img/abc.png");
  HttpClient httpclient = new DefaultHttpClient();
  HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
  HttpEntity entity = response.getEntity();
  BufferedHttpEntity bufferedHttpEntity = new BufferedHttpEntity(entity);
  InputStream is = bufferedHttpEntity.getContent();
  //Drawable d = Drawable.createFromStream(is, "");
  //or bitmap
  //photos = BitmapFactory.decodeStream(is);
  BitmapFactory.Options o = new BitmapFactory.Options();
  o.inJustDecodeBounds = true;
  BitmapFactory.decodeStream(is,null,o);
  //The new size we want to scale to
  final int REQUIRED_SIZE=70;
  //Find the correct scale value. It should be the power of 2.
  int scale=1;
  while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
   scale*=2;
  //Decode with inSampleSize
  BitmapFactory.Options o2 = new BitmapFactory.Options();
  o2.inSampleSize=scale;
  Bitmap photos= BitmapFactory.decodeStream(is, null, o2);

} catch (MalformedURLException e) {
  System.out.println("photo error1111");
  // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
  System.out.println("photo error1111");
  // TODO Auto-generated catch block
  e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:31:21.140

我注意到您没有回收位图。这可能是你问题的根源吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:32:37.613

```
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        photos.compress(Bitmap.CompressFormat.JPEG, 40, bytes); 
```

只需添加这个它会节省你的记忆

或者干脆试试这个：

```
BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize=2;                             CameraAndFolderActivity.myBitmap = BitmapFactory.decodeFile(info.aImagePath, options); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T12:07:40.300

使用垃圾收集器..

```
System.gc(); 
```

# python - 在进程之间共享数据而无需物理移动它

> ID：13396176
> 
> 赞同：4
> 
> 时间：2012-11-15T11:01:47.167
> 
> 标签：python, multiprocessing, shared-memory

我有一份工作，我可以完成很多单独的任务。对于每项任务，我都需要下载一些数据，对其进行处理，然后再次上传。

我正在使用多处理池进行处理。

我有几个我不确定的问题。

首先，数据大约可以达到 20MB，理想情况下，我希望将其传递给子工作进程，而无需将其物理移动到内存中，并将生成的数据也返回到父进程而不移动它。由于我不确定某些工具是如何在幕后工作的，所以我不知道我是否可以将数据作为参数传递给池`apply_async`（据我所知，它会序列化对象，然后在到达时再次创建它们子进程？），或者我应该使用多处理`Queue`还是`mmap`可能？或者是其他东西？

我查看了[ctypes 对象](http://docs.python.org/2/library/multiprocessing.html#shared-ctypes-objects)，但据我所知，只有在可以共享进程分叉时创建池时定义的对象？这对我没有好处，因为我会不断收到需要分享的新数据。

我不需要担心的一件事是对数据的任何并发访问，因此我不需要任何类型的锁定。这是因为只有在下载数据后才会开始处理，而上传也只会在生成输出数据后开始。

我遇到的另一个问题是，有时进来的任务可能会激增，因此我下载任务数据的速度比子进程处理它的速度要快。因此，我下载数据的速度比我完成任务和处理数据的速度要快，python 因内存不足而死亡。当内存几乎已满/作业管道中有太多数据时，在下载阶段暂停任务的好方法是什么？我正在考虑通过使用数据字节数来计算某种类型的“参考”计数，这样我就可以限制下载和上传之间的数据量，并且只有在数字低于某个阈值时才下载。虽然我会担心孩子有时可能会失败，但我永远无法将其拥有的数据排除在外。有没有实现这种事情的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:04:39.900

这是来自多处理[文档](http://docs.python.org/2/library/multiprocessing.html)的规范示例：

从多处理导入过程、值、数组

```
def f(n, a):
    n.value = 3.1415927
    for i in range(len(a)):
        a[i] = -a[i]

if __name__ == '__main__':
    num = Value('d', 0.0)
    arr = Array('i', range(10))

    p = Process(target=f, args=(num, arr))
    p.start()
    p.join()

    print num.value
    print arr[:] 
```

注意`num`和`arr`是共享对象。是你要找的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:20:45.027

（这是我之前回答的讨论结果）

你试过[POSH吗](http://poshmodule.sourceforge.net)

此示例显示可以将元素附加到可变列表，这可能是您想要的（从[文档](http://poshmodule.sourceforge.net/posh/html/node8.html)复制）：

```
import posh

l = posh.share(range(3))
if posh.fork():
    #parent process
    l.append(3)
    posh.waitall()
else:
    # child process
    l.append(4)
    posh.exit(0)
print l

-- Output --
[0, 1, 2, 3, 4]
  -- OR --
[0, 1, 2, 4, 3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:00:14.243

我把这个拼凑在一起，因为无论如何我都需要自己解决这个问题。在多处理或线程方面，我绝不是非常有成就的，但至少它可以工作。也许可以用更聪明的方式完成，我不知道如何使用非原始`Array`类型附带的锁。也许有人会在评论中提出改进建议。

```
from multiprocessing import Process, Event
from multiprocessing.sharedctypes import RawArray

def modify(s, task_event, result_event):
    for i in range(4):
        print "Worker: waiting for task"
        task_event.wait()
        task_event.clear()
        print "Worker: got task"
        s.value = s.value.upper()

        result_event.set()

if __name__ == '__main__':
    data_list = ("Data", "More data", "oh look, data!", "Captain Pickard")
    task_event = Event()
    result_event = Event()
    s = RawArray('c', "X" * max(map(len, data_list)))
    p = Process(target=modify, args=(s, task_event, result_event))
    p.start()
    for data in data_list:
        s.value = data
        task_event.set()
        print "Sent new task. Waiting for results."
        result_event.wait()
        result_event.clear()
        print "Got result: {0}".format(s.value)
    p.join() 
```

在本例中，`data_list`是预先定义的，但不是必须的。我需要从该列表中获取的唯一信息是最长字符串的长度。只要你有一些实际的长度上限，就没有问题。

这是程序的输出：

```
发送新任务。等待结果。
工人：等待任务
工人：接到任务
工人：等待任务
得到结果：数据
发送新任务。等待结果。
工人：接到任务
工人：等待任务
得到的结果：更多数据
发送新任务。等待结果。
工人：接到任务
工人：等待任务
得到的结果：哦，看，数据！
发送新任务。等待结果。
工人：接到任务
得到的结果：PICKARD 上尉

```

正如你所看到的，btel 确实提供了解决方案，但问题在于保持两个进程彼此同步，以便工作人员只有在任务准备好时才开始处理新任务，而主进程在完成之前不会读取结果。

# css - div内的渐进增强

> ID：13396180
> 
> 赞同：0
> 
> 时间：2012-11-15T11:02:13.767
> 
> 标签：css, html, progressive-enhancement

任何人都知道一种定位 div 的方法，该方法将根据 div 的大小隐藏/显示内容，类似于媒体标签的工作方式。

例子

```
<div class="wrapper">

  <div class="holder">
    <div class="nav visible-nav"></div>
    <div class="content"></div>
  </div>

  <div class="holder">
    <div class="nav visible-nav"></div>
    <div class="content"></div>
  </div>
</div>

.wrapper{width:100%;}
.holder{width:50%;float:left;}
.holder{width:50%;float:right;} 
```

使用媒体标签我可以像这样定位它：

```
 @media only screen and (max-width:1200px){ 
        .visible-nav{
            display:none;
        }
    } 
```

任何方式我可以定位 div 而不是整个屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:24:45.840

一个不优雅但可能的解决方案是使用您使用的相同代码，但计算`.holder`div 在什么屏幕宽度上将小到足以隐藏`.visible-nav`div：

例如，如果我想在`.holder`窄于 400px 时隐藏它们，因为`.holder`是 50%：

```
@media only screen and (max-width:800px){ 
    .visible-nav{
        display:none;
    }
} 
```

另一种不是纯 CSS 的方法是使用 JS 或 jQuery 来应用条件。

# java - 为什么动态编程和简单的解决方案需要相同的执行时间？

> ID：13396187
> 
> 赞同：0
> 
> 时间：2012-11-15T11:02:36.677
> 
> 标签：java, dynamic-programming

我正在尝试为杆切割问题实施简单的解决方案。下面是天真和动态编程解决方案的代码，

```
public static int rodCutNaive(int[] a, int n) {
    if (n == 1) {
        return a[0];
    }
    int q = 0;
    for (int i = 1; i <= n; i++) {
        int optimalCut = a[i - 1] + rodCutNaive(a, n - i);
        if (q < optimalCut) {
            q = optimalCut;
        }
    }
    return q;
}

public static int rodCutDPBottomUp(int[] a, int n) {
    if (n == 1) {
        return a[0];
    }
    int[] s = new int[a.length];
    s[0] = a[0];

    for (int i = 2; i <= n; i++) {
        s[i - 1] = a[i - 1];
        for (int j = 1; j <= i - 1; j++) {
            int optimalCut = a[j - 1] + s[i - j - 1];
            if (s[i - 1] < optimalCut) {
                s[i - 1] = optimalCut;
            }
        }
    }

    return s[n - 1];
} 
```

我用下面的方法测试了，

```
public void testRodCutEfficiency() {
    int[] a = { 1, 5, 8, 9, 10, 17, 17, 20, 22, 25, 26, 29, 34, 35, 39, 45,
            46, 47, 50, 51 };

    long t1 = System.nanoTime();
    for (int i = 0; i < 1000; i++)
        Rod.rodCutNaive(a, a.length);
    long t2 = System.nanoTime();
    for (int i = 0; i < 1000; i++)
        Rod.rodCutDPBottomUp(a, a.length);
    long t3 = System.nanoTime();

    System.out.println("Problem size = " + a.length);
    System.out.println("Naive = " + (t2 - t1));
    System.out.println("DP    = " + (t3 - t2));
} 
```

输出：

```
Problem size = 20
Naive = 7989627046
DP    = 7913165707 
```

可能是编译器对天真的版本进行了某种尾递归优化，还是 JVM 可能会记住以前调用方法的解决方案？

哦，对不起，伙计们。这是复制粘贴错误。我两次都调用了相同的方法。现在我改变了它，新的输出是，

```
Problem size = 20
Naive = 7764056945
DP    = 1324966 
```

我试图删除这个问题，但它已经有了答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:05:18.300

> 可能是编译器对天真的版本进行了某种尾递归优化，还是 JVM 可能会记住以前调用方法的解决方案？

编译器`javac`几乎不做任何优化，但是 JIT 会在迭代 10,000 次后优化代码，这会影响您的结果。

HotSpot JVM 不支持尾递归优化，它不记得以前的结果。

如果我反复运行测试，我会看到小的改进

```
Problem size = 20
Naive = 5792466746
DP    = 8779592 
```

到

```
Problem size = 20
Naive = 5701799026
DP    = 472377 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:20:51.733

您两次都调用 rodCutNaive。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:25:21.517

所以，是的，基本上，如果你改变第二个基准循环来对动态方法进行基准测试，你会得到这个显着的加速：

> 问题大小 = 20
> 
> 天真 = 3838585219
> 
> DP = 798526

# c# - WCF 服务方法参数，bool 指定

> ID：13396190
> 
> 赞同：6
> 
> 时间：2012-11-15T11:02:38.190
> 
> 标签：c#, wcf

> **可能重复：**
> [WCF 不会返回 int](https://stackoverflow.com/questions/12964759/wcf-will-not-return-an-int)

尝试使用我自己的 WCF 服务，如下所示：

```
[ServiceContract]
public interface IReturnService
{
    [OperationContract]
    bool GetTransactionList(int lRetailStoreID, int lWorkstationNmbr, int lTaNmbr);
} 
```

但是当我从客户端调用服务时，我得到了没有`GetTransactionList`带有 3 个参数的方法的错误，而是得到了这个标题：

```
myWCF.GetTransactionList(int lRetailStoreID, bool lRetailStoreIDSpecified, 
                         int lWorkstationNmbr, bool lWorkstationNmbrSpecified, 
                         int lTaNmbr, bool lTaNmbrSpecified, 
                         out bool GetTransactionListResult, 
                         out bool GetTransactionListResultSpecified) 
```

任何人都知道为什么会发生这种情况以及如何解决它？如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T11:11:28.440

将 XMLSerializerFormat 添加到服务的属性中：

```
[ServiceContract]
[XmlSerializerFormat]
public interface IReturnService{
... 
```

原因如下：http: [//nirajrules.wordpress.com/2009/08/26/wcf-serializers-xmlserializer-vs-datacontratserializer-vs-netdatacontractserializer/](http://nirajrules.wordpress.com/2009/08/26/wcf-serializers-xmlserializer-vs-datacontratserializer-vs-netdatacontractserializer/)

# permissions - 我可以使用 Shibboleth 将其他用户的不同属性呈现给不同的用户吗

> ID：13396193
> 
> 赞同：1
> 
> 时间：2012-11-15T11:02:43.500
> 
> 标签：permissions, attributes, saml, shibboleth

好的，所以这是一个措辞不好的问题。但是很难用一句话来解释。

我试图阅读 Shibboleth 文档，并且作为一个新手很快就超出了我的深度。如果专家可以花半分钟时间说“没有机会，那是行不通的”，我真的不想花几天时间来理解它。

我有很多用户组，可以说（现在）这些组是不同的公司。

我想做的只是让用户看到其他公司的一些字段。

例如，我是 A 公司的 Alice，我可以看到 B 公司的 Bob 有一个电子邮件地址 bob@b.com。他可以看到我是 alice@a.com

但是，B 公司的其他人都可以看到 Bob 有姓氏和电话号码等。A 公司的其他人都可以看到我的详细信息。

为了使这更复杂，假设 Bob 和我成为朋友并决定我们想要分享我们的信息，然后我们创建一个“临时”组“alice&bob”。因为我们都是该组的成员，所以我们都可以看到彼此的完整细节。（但 A 中的其他任何人都无法看到 Bob 的详细信息，除非他们也是朋友，反之亦然）

我可以通过查询所有属性和关系并仅显示相关的内容来对应用程序代码中的所有内容进行排序，但为了额外的安全性，我想限制源头信息的披露。

我想我需要使用属性过滤器，但不确定它们是否能够给我这种​​级别的控制。有了这种能够形成关系的灵活性，我是否需要即时构建过滤器文件，然后最终生成数千个过滤器，因为逻辑太长，Shibboleth 开始窒息。类似于“是组中的请求者”过滤规则： [https ://wiki.shibboleth.net/confluence/display/SHIB2/IdPFilterRequirementAttributeRequesterInEntityGroup](https://wiki.shibboleth.net/confluence/display/SHIB2/IdPFilterRequirementAttributeRequesterInEntityGroup)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:04:27.997

就此而言，这不是 Shibboleth 或大多数 SAML/SSO 提供商的工作。您所说的属性过滤用于过滤 IdP 和 SP 之间的那些属性......这基本上是说：让服务提供商或“应用程序”B 从 IdP A 中看到以下属性。

一旦您将属性传输到另一端的 SP，Shibboleth 不会（实际上也不能）为您提供一种机制来防止应用程序 B 的用户看到您提供给他们的任何数据......事实上，他们真的不应该能够看到 IdP 传输的任何数据，除非您通过应用程序以某种方式公开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:07:05.340

上面的答案很好，但我相信非 shibboleth 的用户会觉得很困惑。

快速的回答是**你真的不想这样做，这可能是可能的，但 100% 有更好的工具来做。**

好的，现在是完整版（抱歉在某些地方太明显了）。在 shibboleth 架构中，我们可以区分两个主要组件。

身份提供者**IdP** - 保存有关来自特定组织的用户的信息。

Service Provider **SP** - 一般是一些服务或受保护的资源，我们可以为其定义一些访问规则

在您的示例中，Alice 和 Bob 的凭证可以存储在不同的 IdP 中，因为他们是不同组织/公司的成员，或者（与整个模式不完全匹配）您可以为所有用户拥有一个 IdP，并且“公司”只是用户属性之一。IdP 不为您提供任何类型的 api，让您有机会访问任何用户的用户属性，除了正在被验证的用户。

另一方面，您拥有自己的 SP，其中包含一些超级机密资源，您可以为其定义策略。并且您想在其中定义用户信息的策略。

这就是问题所在，在 SP 方面，您无法访问整个用户数据库，这就是 Shibboleth 的工作方式。您当然可以将所有用户信息视为您的 SP 中的资源，但是如果您可以清楚地访问应用程序端的所有用户凭据，为什么还要使用 Shibboleth？

如果您将所有用户信息存储在您的服务端，我相信任何设计良好的关系数据库以及为您的服务提供某种身份验证都将比这项工作的 shibboleth 更好。

希望有帮助。

# c# - 在 MongoDB 中使用嵌套数组保存字典

> ID：13396194
> 
> 赞同：5
> 
> 时间：2012-11-15T11:02:47.227
> 
> 标签：c#, mongodb, serialization, json.net, mongodb-.net-driver

以下类应由 API 作为 Json 接收并使用 C# 驱动程序和 Web API 存储在 MongoDB 中。data 属性是非结构化的，但我可以将其限制为键值对，这些值中可能包含嵌套数组。

```
public class Something
{
    [BsonId, JsonIgnore]
    public ObjectId _id { get; set; }

    public IDictionary<string, object> data { get; set; }
} 
```

当从客户端发布 json 时，Json.NET 会正确反序列化。

将类保存到 MongoDB，我在具有 c# 特定类型的数据库中得到类似的东西：

```
{
    property1: 'one',
    property2: {
        _t: 'System.Collections.Generic.List`1[System.Object]'
        _v:
        [
            {}, {}, {}, ...
        ]
     }
} 
```

基于这些来源，我为 Json.NET 汇总了一个 CustomCreationConverter，它将一个 List 嵌套到 Dictionary 的值中：

[将 JsonDictionaryAttributes 应用于属性](http://json.codeplex.com/workitem/22558)

[Json.NET：反序列化嵌套字典](https://stackoverflow.com/questions/6416017/json-net-deserializing-nested-dictionaries)

[CustomCreationConverter 源代码](http://json.codeplex.com/SourceControl/changeset/view/69709#414328)

```
public class Something
{
    ...
    [JsonProperty(ItemConverterType = typeof(CustomConverter))]
    public IDictionary<string, object> data { get; set; }
} 
```

使用此覆盖：

```
public class CustomConverter : CustomCreationConverter<IList<object>>
{
    public override IList<object> Create(Type objectType)
    {
        return new List<object>();
    }

    public override bool CanConvert(Type objectType)
    {
        return true; // Just to keep it simple
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        if (reader.TokenType == JsonToken.StartArray)
            return base.ReadJson(reader, objectType, existingValue, serializer);

        return serializer.Deserialize(reader);
    }
} 
```

这实际上很好，但我仍然可以在 MongoDB 中使用 c# 特定类型进行构造。嵌套时如何在没有类型值属性的情况下将此数据导入 MongoDB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:17:41.817

所以我有这个使用`Dictionary<>`而不是`IDictionary<>`没有自定义转换器，但我也使用我自己的类型，而不仅仅是`object`. 我不清楚你所说的“有用的方式”是什么意思，但你可以注释你的成员`BsonDictionaryOptionsAttribute`并传入`DictionaryRepresentation.Document`或`DictionaryRepresentation.ArrayOfDocument`更改持久化到 MongoDB 的形状，如果这就是你的意思吗？

否则，关于它现在的结构方式，您所说的“有用方式”是什么意思？`"_t"`只要有不止一种类型，你总会得到鉴别器。我猜你看到这个是因为你正在使用`IDictionary<>`.

# eclipse-jdt - 如何激活 Content Assist - Java 提案

> ID：13396198
> 
> 赞同：2
> 
> 时间：2012-11-15T11:02:50.513
> 
> 标签：eclipse-jdt

我已经在 Ubuntu 12.10 中安装了 eclipse。工作几天后，我创建了我的第一个 CDT C++ 项目并在那里呆了一段时间。现在，当我回到我的 Java 项目时，我发现当我输入一个变量名并按“。”时。什么都没有出现。

但是，我可以通过选择“编辑”->“内容辅助”->“Java 提案”来恢复上下文菜单。问题是根本不方便。当单击“默认提案”时，会出现一个带有“无默认提案”的空上下文菜单。我还确认正在激活正确的方面“Java”。

如何恢复到原来的状态（Java提案菜单默认自带）？

Eclipse 平台版本为 3.7.0.I20120502-2000

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T11:17:31.507

我刚刚通过扫描所有首选项选项解决了这个问题。然而，它仍然无法解释为什么它消失了，因为我没有在那里改变任何东西。

在“首选项”对话框中选择“Java”->“编辑器”->“内容辅助”->“高级”，在我的情况下，顶部列表框有一些复选框没有选中，包括“Java提案”。该问题已通过选中该框并单击“确定”按钮得到解决。

在我将其标记为正确之前，我会将这个答案留在这里一段时间，以听取更好的建议。

# r - 如何绘制背景颜色根据条目变化的矩阵？

> ID：13396199
> 
> 赞同：1
> 
> 时间：2012-11-15T11:02:50.473
> 
> 标签：r, plot

我想询问有关在 R 中绘制这种图的任何一般想法，它可以比较例如在图的水平和垂直侧列出的不同方法的重叠？任何示例代码或其他东西

非常感谢![在此处输入图像描述](../Images/0e9a20d54a62d4f33be074bada6a69f3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:25:44.137

A ggplot2-example:

```
# data generation
df <- matrix(runif(25), nrow = 5)
# bring data to long format
require(reshape2)
dfm <- melt(df)
# plot
require(ggplot2)
ggplot(dfm, aes(x = Var1, y = Var2)) +
  geom_tile(aes(fill = value)) +
  geom_text(aes(label = round(value, 2))) 
```

![enter image description here](../Images/e605978b1056435b340503d310034120.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:53:38.107

该包中的 corrplot 包和`corrplot`函数将创建类似于您上面显示的图，这可能会执行您想要的操作或为您提供一个起点。

如果您想要更多控制，则可以使用该函数绘制颜色`image`，然后使用该`text`函数添加数字。您可以创建足够大的边距以将文本放置在边距中，请参阅`axis`函数以了解在边距中添加文本标签的常用方法。或者您可以在内部留出足够的空间（也许使用`rasterImage`而不是`image`）并`text`用来做标签。如果要添加线条和and函数来帮助确定线条的坐标，请查看 to 的参数`xpd`。`par``grconvertX``grconvertY`

# android - 收到短信时禁用键盘保护

> ID：13396207
> 
> 赞同：2
> 
> 时间：2012-11-15T11:03:27.203
> 
> 标签：android

我正在开发一个 SMS android 应用程序。我想添加的功能之一是在收到短信后，屏幕锁定将自动禁用，因此用户无需解锁即可阅读短信。

这可能吗？我尝试了几个例子，但这些都是有效的。例如[，当 SCREEN_ON 的接收器被触发时，如何禁用 Keyguard 并向用户显示活动？](https://stackoverflow.com/questions/4234156/how-to-disable-keyguard-and-display-an-activity-to-the-user-when-receiver-of-scr)

知道如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:15:04.330

你应该使用这样的东西：

```
KeyguardManager  myKGuard = (KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE);
myLock = myKGuard.newKeyguardLock("com.example.myapp.Main");
myLock.disableKeyguard(); 
```

另请注意，您还需要将 DISABLE_KEYGUARD 权限添加到清单中。

希望这可以帮助！

这在 API 13 中也被弃用了。

> 改用 FLAG_DISMISS_KEYGUARD 和/或 FLAG_SHOW_WHEN_LOCKED；这允许您在应用程序移入和移出前台时无缝隐藏键盘保护，并且不需要请求任何特殊权限。由 newKeyguardLock(String) 返回的句柄，允许您禁用/重新启用键盘保护。

这就是谷歌现在所说的！

# nfc - mifare 经典 4k 阅读到人类可读的形式

> ID：13396212
> 
> 赞同：1
> 
> 时间：2012-11-15T11:03:43.107
> 
> 标签：nfc, smartcard, rfid, mifare

我有 mifare classic 4k 和 ACR1281U 阅读器。我可以成功地进行身份验证/读取/加载。我已经搜索了如何读取 NFC 标签的网站，但我遗漏了一些；这是我的问题

1.  如何读取 MIfare 块中的数据并将其转换为人类可读的形式
2.  如何更改默认的身份验证密钥。

# 编辑

好的，我刚刚发现了一些奇怪的东西。我尝试使用密钥 A 对随机扇区尾随块进行身份验证

```
FF FF FF FF FF FF 
```

然后我试图阅读那个拖车块我发现了这个

```
00 00 00 00 00 00 FF 07 80 69 FF FF FF FF FF FF 90 00 
```

根据文档，我感到困惑的是，在扇区预告片中，密钥 A 首先出现，然后是访问位，然后是密钥 b，然后是响应状态

现在我得到的是

```
keyb? | access bits | key A | response status 
```

注意：我尝试使用 FFFFFFFFFFFF 的密钥 A 进行身份验证并成功通过身份验证。

谁能向我解释一下？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:40:58.493

要编写一个扇区，您需要使用 keyB 在该扇区上进行身份验证。然后您可以将密钥块覆盖为：

```
new Key A | access bits | Key B 
```

# mysql - 无法通过 xampp mysql 命令窗口创建数据库

> ID：13396219
> 
> 赞同：0
> 
> 时间：2012-11-15T11:04:14.673
> 
> 标签：mysql, xampp

当我尝试在 xampp mysql 命令窗口中创建新数据库（m）时，我收到一条错误消息

> “错误 1044 (42000)：用户 ''@'localhost' 拒绝访问数据库 'm'”。

然后我使用 phpmyadmin 创建了该数据库，但是当我在`show databases`那里键入命令时，它没有显示在 mysql 命令窗口中。谁能告诉我如何摆脱该错误消息并通过在 xampp 中使用 mysql 命令窗口成功创建新数据库？（我使用的是 windows xp 专业服务包-2）

-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:09:50.893

您是否以 root 身份登录？

浏览到包含文件夹的 mysql.exe 并尝试在 cmd 中键入：

```
mysql.exe -u root --password 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:11:49.010

尝试使用特定的用户名和密码启动您的 mysql 客户端（如果您已设置）

```
mysql.exe -uroot [-p] 
```

编辑：将此添加到您的 my.cnf [client] 部分以在没有任何参数的情况下登录

```
[client]
user=root 
```

[http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:37:38.133

***已解决：*** ******感谢大家的友好回复。我解决了那个问题。

**我通过使用 phpmyadmin 更改了 'mysql' 数据库中的 'user' 表，并将字段设置为 'Y' 而那些是 'N'，其中主机是 'localhost'（因此 localhost 无法创建或删除任何数据库）。现在可以通过 'xampp\mysql\bin\mysql.exe' 创建新数据库。**

***AND **** * 为 mysql 数据文件夹中的表获取 .frm（表定义）、.MYD（表数据）和 .MYI（表索引）文件，我设置**type=MyISAM**和**collat​​ion=utf8_general_ci**所以很容易复制数据库到另一台电脑或服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T17:09:24.317

我知道你已经解决了这个问题。我有同样的问题，但答案很简单。答案：如果你在浏览器中输入“localhost”，选择语言后，你可以选择“phpmyadmin”。然后就像你说的那样可以点击“Databases”选项卡，然后从数据库列表中选择“mysql”，最终你可以看到这个数据库的最后一个表是“user”表。如果你再点击前面的“browse”按钮表的名称是“用户”。现在您可以详细查看“用户”表。您可以在“主机”列下看到 3 个“本地主机”单元格，但其中只有一个在“用户”列中具有“root”值，即下一个.so如果你想通过命令提示符连接mysql， `c:\xampp\mysql\bin\mysql.exe -u root``c:\xampp\mysql\bin\mysql.exe``c:\xampp\mysql\bin\mysql.exe -u root -p`

# apache-flex - 在 flex 4.5 中替换 useThousandsSeparator

> ID：13396221
> 
> 赞同：0
> 
> 时间：2012-11-15T11:04:22.960
> 
> 标签：apache-flex, flex4.5, numberformatter

我一直在从 flex 4 迁移到 flex 4.5。

我使用 Numberformatter 以下列方法格式化数字：

```
var numberFormatter:NumberFormatter = new NumberFormatter();
numberFormatter.precision=1;
numberFormatter.useThousandsSeparator=true; 
```

这适用于`mx`组件。但如果我想使用`s`组件，这两个属性都不适用。

我了解到我可以使用`fractionalDigits`而不是`percision`.

我仍然没有找到替换属性的方法`useThousandsSeparator`。这实际上将“ `,`”添加为千位分隔符。

任何想法如何解决这个问题？

谢谢你

克菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:19:24.927

我认为千位分隔符已被 groupingSeparator 取代

# perl - 如何搜索文件然后将搜索关键字的行输出到新文件

> ID：13396231
> 
> 赞同：1
> 
> 时间：2012-11-15T11:05:11.350
> 
> 标签：perl

我正在尝试使用 perl 中的关键字搜索一个大文件，然后将关键字出现的所有行输出到一个新行中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:12:34.810

以下将打印包含`keyword`to的所有行`outputFile.txt`。输入文件**作为参数传递**给脚本。

**查找关键字.pl**

```
#!/usr/bin/perl
use strict;
use warnings;

open OUTPUT, ">outputFile.txt"; 
while (my $line = <>) {
     if($line =~ m/keyword/){
     print OUTPUT $line;
     }
} 
```

**输入**：

```
./findkeyword.pl inputfile1 inputfile2 ... 
```

* * *

**编辑：**正如@Kenosis 在评论中所说，

使用词法范围的 $fh 作为文件句柄可能会更好，例如`open(my $fh, ">", "outputFile.txt")`. **参考：[`open()`](http://perldoc.perl.org/functions/open.html)**

如果您将关键字存储在变量中，您可能需要先调用**[`quotemeta`](http://perldoc.perl.org/functions/quotemeta.html)**它，或者将其括在`\Q...\E`.

# web-services - 使用 ServiceStack JsonSerializer 的 DataTable JSON 序列化

> ID：13396232
> 
> 赞同：1
> 
> 时间：2012-11-15T11:05:15.020
> 
> 标签：web-services, servicestack, jsonserializer

有谁知道如何`VB.net datatable to JSON`使用**ServiceStack JsonSerializer**进行转换？

在**[ServiceStack Docs](http://www.servicestack.net/docs/text-serializers/json-csv-jsv-serializers)**网站上，您可以找到以下示例，但这是 C#，而且我无法理解它的工作方式。

```
string TypeSerializer.SerializeToString<T>(T value);
void TypeSerializer.SerializeToWriter<T>(T value, TextWriter writer);

T TypeSerializer.DeserializeFromString<T>(string value);
T TypeSerializer.DeserializeFromReader<T>(TextReader reader); 
```

示例数据表

```
Dim table As New DataTable
        table.Columns.Add("Dosage", GetType(Integer))
        table.Columns.Add("Drug", GetType(String))
        table.Columns.Add("Patient", GetType(String))
        table.Columns.Add("Date", GetType(DateTime))
        table.Rows.Add(25, "Indocin", "David", DateTime.Now)
        table.Rows.Add(50, "Enebrel", "Sam", DateTime.Now)
        table.Rows.Add(10, "Hydralazine", "Christoff", DateTime.Now)
        table.Rows.Add(21, "Combivent", "Janet", DateTime.Now)
        table.Rows.Add(100, "Dilantin", "Melanie", DateTime.Now) 
```

**任何建议都非常感谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:06:42.003

ServiceStacks JSON Serializer 不支持直接序列化 DataTables。您需要将它们转换为 POCO 并对其进行序列化。

# .net - 类中的 let 绑定中的显式类型参数

> ID：13396234
> 
> 赞同：8
> 
> 时间：2012-11-15T11:05:15.737
> 
> 标签：.net, generics, f#

当我尝试创建一些类时

```
type MyType () =
    let func<'T> () = () 
```

编译器说有一个错误：

> 显式类型参数只能用于模块或成员绑定

但是[MSDN](http://msdn.microsoft.com/en-us/library/dd233238.aspx)说：

> 模块级别、类型或计算表达式中的 let 绑定可以具有显式类型参数。表达式中的 let 绑定（例如函数定义中）不能有类型参数。

为什么文档和编译器会说不同的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T11:42:50.903

This appears to be a syntactic restriction on `let` bindings inside a class. However, you can still define a generic local function, you just have to specify the type parameters in type annotations:

```
type MyType () =
   let func (x : 'T) : 'T = x 
```

I do not think this is explicitly *syntactically* forbidden by the specification, because the specification says that a class definition has the following structure:

> type type-name patopt as-defnopt =
>       class-inherits-decl[opt]
>       class-function-or-value-defns[opt]
>       type-defn-elements

and *class-or-value-defn* is defined as:

> class-function-or-value-defn := attributes[opt] `static`[opt] `let` `rec`[opt] function-or-value-defns

where *function-or-value-defns* may be a function definition with explicit type parameters:

> function-defn :=
> `inline`[opt] `access`[opt] ident-or-op typar-defns[opt] argument-pats return-typeopt = expr

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-02T05:40:20.917

要添加到 Tomas 的答案，如果您需要类型参数但没有该类型的值，则可以使用带有幻像类型参数的类型。例如：

```
open System

type Foo() =
    member x.PrintType<'T> () = printfn "%s" typeof<'T>.Name

type TypeParameter<'a> = TP

let foo = Foo ()

let callFoo (typeParameter : TypeParameter<'a>) =
    foo.PrintType<'a> ()

callFoo (TP : TypeParameter<string>)
callFoo (TP : TypeParameter<DateTime>) 
```

# java - java - 如何在java中的jtextArea中附加50 mb数据（来自文本文件）？

> ID：13396238
> 
> 赞同：2
> 
> 时间：2012-11-15T11:05:17.673
> 
> 标签：java, swing, jtextarea

我有一个包含 50 mb 数据的大文件。我想读取并附加到 jTextArea() 中。但是我在附加数据时**出现**内存错误** 。我该怎么做？请任何人帮助我**

例子：

```
BufferedReader br;
        StringBuilder builder = new StringBuilder();
        try {
            br = new BufferedReader(new FileReader("D:\\myFile.txt"));
            String line;
            try {
                while ((line = br.readLine()) != null) {
                   // process the line.
                    builder.append(line);// here getting error
                }
                System.out.println(builder.toString());

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                br.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
JTextArea jt = new JtextArea();
jt.append(builder.toString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:11:17.653

您可以增加最大堆大小，也可以使用分页器设计模式。

分页通过仅加载那些实际可见的数据来工作。因此，如果您的文本区域可以显示两页文本，那么您一次只能加载显示的两页文本。如果用户向下滚动，您会丢弃已加载的页面并加载这两个新页面。这样一来，您在内存中将始终只有两页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:10:28.763

我怀疑是否会有用户阅读您将添加到`JTextArea`.

我建议你实现某种分页，一次只添加几 100 或 1000 行。

但是，如果您真的想添加所有文本`-Xmx`，请将应用程序的参数设置为更高的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:08:21.843

尝试设置 JVM 的最大大小

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:43:02.250

Ignoring that it is impractical in terms of usability (and JTextArea will probably not perform well with that much text), you can make some changes to your code to reduce the amount of memory needed (You probably still need to increase -Xmx).

Your first lever is to properly size the StringBuilder for the amount of data you want to put into it. Replacing the *new StringBuilder()* with *new StringBuilder(sizeOfFile)* will avoid allocating more memory than needed (this may make a difference of several MB, due to StringBuilders internal memory allocation policy method).

Now when you do *builder.toString()*, you should be aware that this will *double* the amount of memory required, since everything in the builder is *copied* to create the String. With the normal Swing API, there is no way around that, since you absolutely *need* a String.

But you can change that - look at how the JTextArea works internally: the JTextArea does not really store the text it works with - storing of the text is delegated to a model object, in this case of type javax.swing.Document. If you take a look at Document, you'll find that its an interface. Normally when you use a JTextArea, it creates its own, private document which is not really intended for such large amounts of data (javax.swing.PlainDocument). Now the PlainDocument in turn works with a javax.swing.Content (again an interface), normally implemented in javax.swing.StringContent. This you can replace with your own, new content class that works with a StringBuilder directly (that way there would be no need to duplicate data in memory).

So, you can implement your own Content class working with StringBuilder and construct your JTextArea this way:

```
Content c = new StringBuilderContent(builder);
Document d = new PlainDocument(c);
JTextArea jt = new JTextArea(d); 
```

Actually creating and implementing StringBuilderContent is left as an excercise to the reader. Actually, you could also implement Content to directly work with a file, that way you could handle files much larger than available heap, too.

# android - 试驾安卓

> ID：13396246
> 
> 赞同：1
> 
> 时间：2012-11-15T11:06:04.037
> 
> 标签：android, testing

有人有试驾安卓的经验吗？在互联网上进行了一些研究后，我找到了一些框架，但不知道我应该采用哪个。以下是我已经找到的框架列表：

*   安卓测试框架
*   机器人馆
*   机器人电动
*   MonkeyRunner

你推荐哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:17:48.077

我使用机器人。它对于测试 UI 组件非常强大。但是需要一点Java的理解。[不过，您可以通过google.groups/robotium-developers](https://groups.google.com/forum/?fromgroups#!forum/robotium-developers)与其他 android 自动化测试开发人员合作，这是一个很容易找到帮助的大型社区。几乎每个月都有新的更新。您可以将它与 Android 测试框架和 WebDriver 结合使用。越来越多的新人参与到这个开源项目的开发中。

# java - 如果第三方库类调用super.method，你如何覆盖method()？

> ID：13396248
> 
> 赞同：1
> 
> 时间：2012-11-15T11:06:07.337
> 
> 标签：java, overriding, super

我本来想调用 super.super.method() 但你不能在 java 中这样做。并且有几个问题和很多像 [这样](https://stackoverflow.com/questions/586363/why-is-super-super-method-not-allowed-in-java)的答案， 但在这种情况下没有一个会起作用。
这不是“糟糕的设计”或破坏封装的问题。我有一个真正的用例，我需要覆盖第三方类，因为它有一个错误，我正在寻找一个好的解决方案。

所以我正在寻求解决方案的情况是：
类 ContextGetter 和 SpecialContextGetter 在第三方类库中。SpecialContextGetter 中的 getContext 方法有一个错误（它将 i 设置为 8 而不是 7）。

我想修复它。所以我用 SpecialContextGetterCorrected 扩展了 SpecialContextGetter，在其中我重新实现了 getContext（从 SpecialContextGetter 复制它并进行了更改）并指示框架使用我的类 SpecialContextGetterCorrected，而不是 SpecialContextGetter。

问题是我的新方法仍然需要调用 ContextGetter.getContext 并且我不能告诉 Java 这样做。（我想调用 super.super.getContext）

如果不将我自己的 com.thirdparty.SpecialContextGetter 放在类路径前面，我该如何完成呢？

```
package com.thirdparty;
class ContextGetter {
    //has several state variables  
    public Context getContext(Set x) throws Exception { 
        /* uses the state vars and its virtual methods */
        /* may return a Context or throw an Exception */
    } 
    /* other methods, some overridden in SpecialContextGetter */
}
class SpecialContextGetter {
    //has several state variables  
    public Context getContext(Set x) throws Exception { 
        /* uses the state vars and its virtual methods */
        /* somewhere in it it contains this: */

        if (isSomeCondition()) {
            try {
                // *** in my copied code i want to call super.super.getContext(x) ***
                Context ctxt=super.getContext(x); 
                /* return a modified ctxt or perhaps even a subclass of Context */
            } catch( Exception e) {
                /* throws new exceptions as well as rethrows some exceptions
                   depending on e and other state variables */
            }
        else {
            /* some code */
            int i=8; // *** this is the bug. it should set i to 7  ***
            /* may return a Context or throw an Exception */
        }
    } 
    /* other methods, some overridden in SpecialContextGetter */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:25:04.023

我看到了几个选项，如果 3rd 方软件的可见性声明太严格，这两个选项都可能不可行。

*   不要只扩展`SpecialContextGetter`和覆盖罪魁祸首方法，而是复制/粘贴整个`SpecialContextGetter`类并在那里修复错误。这可能很难看，唯一的办法。
*   除了您想要修复您可以访问您想要的错误的错误之外的所有方法，而不是扩展`SpecialContextGetter`、扩展`ContextGetter`和委托给所有方法的实例（您将在这个新类的构造函数中收到该实例） 。如果你很幸运，你可能会这样做，但我感觉一些可见性声明或可变状态不会让你这样做。`SpecialContextGetter``super`

# android - 如何在模拟器上调试 DayDream 功能？

> ID：13396253
> 
> 赞同：4
> 
> 时间：2012-11-15T11:06:42.173
> 
> 标签：android

我正在尝试在模拟器中调试 DayDream，但我不知道该怎么做。

![白日梦配置屏幕](../Images/f0072c4fc6094321e8eeb759f9d01bbe.png)

Button Start Now 不适用于我的和内置的 DayDreams。

# eclipse - 如何在 Eclipse 中切换到我的 svn 存储库中的特定标签？

> ID：13396255
> 
> 赞同：2
> 
> 时间：2012-11-15T11:06:43.910
> 
> 标签：eclipse, svn

我在 Eclipse 的 svn 存储库中标记了我的工作项目的修订。如何返回并将该特定标签重新加载到我的工作区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:46:43.910

它应该以不同的方式完成，例如，如果您使用的是 Subversive，请尝试右键单击项目，*Team --> Switch ... ，然后使用**Browse*按钮​​选择所需的标签。确保您没有任何未提交的本地修改。

# css - CSS 身高之谜

> ID：13396262
> 
> 赞同：1
> 
> 时间：2012-11-15T11:06:59.240
> 
> 标签：css, layout

我试图复制路径中看到的布局：[https ://path.com/i/M2lzb](https://path.com/i/M2lzb)

正如您在布局 css 中看到的：

```
html, body { margin: 0; padding: 0; }
html { min-height: 100%;position: relative; }
body { } 
```

不知何故，他们设法在`body`没有固定`html`高度的情况下获得了 100% 最小高度的工作行为。我试图复制它，但它只有在我设置时才有效`html { height: 100% }`，当我这样做时，它会在布局需要滚动时打破背景（在小高度上它会被截断）。

我已经禁用了 javascript，它仍然可以在路径网站上运行，所以它看起来像是 100% css。

我试图在没有运气的情况下复制该行为（我确实复制/粘贴了所有路径的 css！）。

[http://jsfiddle.net/J9fgc/2/](http://jsfiddle.net/J9fgc/2/)

他们是如何达到这种效果的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:13:01.673

这在您链接的网站中起到了作用：

```
.background {
    background-position: 50% 50%;
    background-size: cover;
    height: 100%;
    left: 0;
    position: fixed;
    top: 0;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:24:51.093

给身体 100% 的高度就可以了。

```
body {height:100%;} 
```

就那么简单。

但我不确定您实际上在说什么，半透明的白色背景或海滩的背景图像。无论如何，如果这是您不想要的，请在评论中回复。

[http://jsfiddle.net/DeepakKamat/J9fgc/3/](http://jsfiddle.net/DeepakKamat/J9fgc/3/)

# ios - 多次调用 UITableViewCell 内的禁用/启用 UIButton

> ID：13396264
> 
> 赞同：2
> 
> 时间：2012-11-15T11:07:00.100
> 
> 标签：ios, uitableview, uibutton

这是一个相当简单的情况：

我有自定义 UITableViewCell 类，它有自己的属性、网点和东西。其中有两个 UIButtons -> **Like**和**Dislike**。您可以将它们视为喜欢或不喜欢评论按钮。

我已经像这样向它们添加了 IBActions（在 TableViewController 中，而不是 CustomCell 类中）：

```
 - (IBAction)likeComment:(UIButton *)sender {

 CustomTableCell *thisCell = (CustomTableCell *)[[[sender superview] superview] superview]; // to fetch that cell from view
    RSSItem *item = [commentsToDisplay objectAtIndex:indexPath.row];
   //code to set NSUserDefault value for the comment ID, so it can never be voted for again
   [self.tableView reloadData];

} 
```

在 CellForRowAtIndexPath 中，我检查是否选择了当前项目的用户默认设置，如果是，我禁用按钮（您可以喜欢或不喜欢，而不是两者，因此需要禁用所有按钮）：

```
if((/* get NSUserDefault for the ID*/) == YES){
    [cell.likeButton setEnabled:NO];
    [cell.dislikeButton setEnabled:NO];
} 
```

在这里，调用了适当的单元格 indexPath，获取的行的项目和项目的 ID 是正确的。

问题是随机按钮（在一些重复使用的单元格中），除了当前选择的一个之外，也被选中（禁用）。如果我尝试通过插座禁用它们，也会发生同样的事情。这当然是不可接受的。我已经尝试了各种组合，但显然我的想法是错误的。

有什么建议或链接吗？或者如何正确地将这些按钮与动作和位置连接起来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-19T05:54:51.683

**这是该问题的另一个完美解决方案......**

**在 tableView 的 CellForRowAtIndexpath 方法中，首先为您的按钮设置标签**

```
cell.Yourbutton.tag = [Indexpath row]; 
```

**// 调用你的 UIButton 事件**

```
[cell.youbutton addTarget:self action:@selector(likeEvent:) forControlEvents:UIControlEventTouchUpInside]; 
```

**//方法声明**

```
- (void)likeEvent:(UIButton *)sender 
{

UIButton *likeButton =  (UIButton *)sender;

if (likeButton.isSelected) {
    [likeButton  setImage:[UIImage imageNamed:@"like-default.png"] forState:UIControlStateNormal];
}else {
    [likeButton  setImage:[UIImage imageNamed:@"like-active.png"] forState:UIControlStateSelected];
}
[likeButton  setSelected:!likeButton.isSelected];
NSLog(@"like:%d",likeButton.isSelected);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:14:27.350

发生这种情况是因为表格单元格正在被重用。检查文档`UITableView`以获取有关此的更多信息。要解决此问题，请维护表中某个索引的按钮是否需要在其他地方启用或禁用的信息，然后在`tableView:cellForRowAtIndexPath:`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-20T00:53:50.587

我刚刚遇到了同样的问题，并找到了一个简单的解决方法。选择的答案不正确。您已经通过使用该 ID 的 NSDefault 来维护表的某个索引的按钮是否需要在其他地方启用或禁用的信息。

解决这个问题的方法是

```
cellForRowAtIndexPath: 
```

就在你的面前

```
if((/* get NSUserDefault for the ID*/) == YES){
[cell.likeButton setEnabled:NO];
[cell.dislikeButton setEnabled:NO]; 
```

}

始终启用按钮。将此代码放在 else 语句中也可以。

注意：这可行，但不是最佳解决方案。

# java - J2ME 数据库更新问题

> ID：13396267
> 
> 赞同：1
> 
> 时间：2012-11-15T11:07:02.490
> 
> 标签：java, mysql, java-me, javabeans, midlet

我正在尝试从我的移动应用程序更新 Mysql 数据库字段。

`hoursworked (int11), JobStatus (VarChar45)`. 能够更新工作时间但不能更新工作状态。更新操作后，数据库字段显示为空。

```
if (action.equals("updatejob")){
        try {
             // Create a new connection.
             //String url = "http://webi:8080/app_sandra/queryDB.jsp";
             String url = "http://localhost:8080/A1electrics/updateJob.jsp";
             HttpConnection conn = (HttpConnection)Connector.open(url);
             // Set request type (done before streams are created).
             conn.setRequestMethod(HttpConnection.POST);
             // Send header info - must have for post to work.
             conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
             // Make sure connection closes once server sends response.
             conn.setRequestProperty("Connection", "close");
             // Create output stream.
             OutputStream ostream = conn.openOutputStream();
             // getting input from mobile screen for Job ID to update, hours worked and for Job status
             byte [] data = ("jobIDtoUpdate=" + jobIDtoUpdate.getString()).getBytes();
             ostream.write(data);
             data = ("&hoursworked=" + hoursworked.getString()).getBytes(); ostream.write(data);

             data = ("&JobStatus=" + JobStatus.getString()).getBytes(); ostream.write(data);
             // Close stream - once closed HTTP POST is created and sent
             ostream.close();
             // Retrieve response ok-200, not found -404, internal error- 500
             if (conn.getResponseCode() == HttpConnection.HTTP_OK) 
             {updateResult.setText("Successfully updated your data");}

             else if(conn.getResponseCode() == HttpConnection.HTTP_NOT_FOUND) {
                 // Bad request.
                 updateResult.setText("404 - Not Found");
             }
             else if(conn.getResponseCode() == HttpConnection.HTTP_INTERNAL_ERROR) {
                 // Internal error.
                 updateResult.setText("500 - Internal Error");
             }
        }
        catch (Exception e)
        {
            // Do nothing.
        }

public class updateBean {

    private Connection Conn;
    private String jobIDtoUpdate;
    private String JobStatus;
    private String hoursworked;
    Connection conn;

    public void updateData() throws ClassNotFoundException, SQLException {

        DriverManager.registerDriver(new com.mysql.jdbc.Driver());
        //establish connection
        conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/a1electric?user=root&password=raam030");

        //store the information from the user
        String jabID = this.jobIDtoUpdate;
        String hrwork = this.hoursworked;
        String jobstatus = this.JobStatus;

        // int Empno = Integer.parseInt(ID);
        // create a prepared statement to add the user input to
        //PreparedStatement pstmt = conn.prepareStatement("UPDATE employee SET JobStatus='Completed', HoursWorked='6' WHERE JobID="+this.jobIDtoUpdate);
        PreparedStatement pstmt = conn.prepareStatement("UPDATE employee SET JobStatus=?, HoursWorked=? WHERE JobID=?");
        pstmt.setString(1, jobstatus);
        pstmt.setString(2, hrwork);
        pstmt.setString(3, jabID);
        pstmt.execute();
        conn.close();

        //end insert data
    } // end insertBean 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:18:36.840

你应该调用preparedStatement.executeUpdate();

看看你有什么

```
 ResultSet rs = ps.executeQuery() ;

    // Loop through the result set
    while( rs.next() ){
    // check your data
    } 
```

并且不要忘记关闭preparedStatement 和HttpConnection；

准备好的语句.close();

# iphone - 视图控制器因自动旋转而崩溃

> ID：13396269
> 
> 赞同：1
> 
> 时间：2012-11-15T11:07:04.387
> 
> 标签：iphone, uiviewcontroller, autoresize, nsscrollview

我有一个 UIScrollView 包含一些控制器：带有背景图像的 imageView 和其他，

![在此处输入图像描述](../Images/5cb94674de85dc20fad6536308012bf1.png)

当我旋转手机时，它不会自动调整控制器的大小

![在此处输入图像描述](../Images/585fe1b86e09e29a1a47c8f9eccefc3f.png)

我在[UIWebView 自动旋转损坏 web 视图内容（内部截图）中阅读了 2 个类似的问题](https://stackoverflow.com/questions/6731007/uiwebview-auto-rotation-corrupts-web-view-content-screenshots-inside) [缩放图像以适应 iPhone 旋转的屏幕](https://stackoverflow.com/questions/4219629/scale-image-to-fit-screen-on-iphone-rotation) ，我尝试将这些代码添加到 viewDidLoad

```
self.view.autoresizesSubviews = YES;
self.imageView.autoresizingMask = (UIViewAutoresizingFlexibleWidth |                                  UIViewAutoresizingFlexibleHeight);

self.scrollView.autoresizingMask =(UIViewAutoresizingFlexibleWidth
                              | UIViewAutoresizingFlexibleHeight); 
```

问题也解决不了。请帮助我解决这次崩溃，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:28:42.593

在这里，您的应用程序面临两个问题。

**1）方向问题**

**2）每当方向改变时的崩溃问题。**

**1）**我认为您的应用程序在 iOS6 上运行，这就是您现有的 Code For Orientation 无法正常运行的原因。所以这里是 Link qt，您可以在其中看到用于管理 iOS6 和 iOS5 中的方向的线程。

[第一个链接](https://stackoverflow.com/questions/13023936/orientation-issue-in-ios-6/13024015#13024015)

[相同的第二个链接。](https://stackoverflow.com/questions/12577879/shouldautorotatetointerfaceorientation-is-not-working-in-ios-6/12581799#12581799)

**2）**现在修复崩溃。您应该正确调试您的代码。您必须注意崩溃背后的原因。如果崩溃仅在您的设备方向发生变化时发生，那么您应该在方向更改时观察控制流。检查导致崩溃的代码行。

我希望它可以帮助你。

# ruby-on-rails - Rails - 无法使用点符号访问属性

> ID：13396270
> 
> 赞同：1
> 
> 时间：2012-11-15T11:07:08.820
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个带有名为 Task 的模型的 Rails 3.2.8 应用程序。在我的任务模型中，我有一个名为“complete_date”的日期时间属性。当我尝试在视图中查看我的 complete_date 时...

```
<%= @task.complete_date.strftime('%b %e, %Y') %> 
```

我收到一条错误消息，提示“nil:NilClass 的未定义方法 `strftime'”。但是，complete_date 字段不为空。以下查询..

```
mysql> select count(*) from tasks where complete_date is null; 
```

返回 0 行。我可以使用以下代码在同一视图中检索完整日期...

```
<% @task.attributes.each_pair do |name, value| %>
    <% if name == "complete_date" %>
      <%= value.strftime('%b %e, %Y') %>
    <% end %>
<% end %> 
```

这完美地工作，所以似乎问题仅在于使用点符号（@task.complete_date）访问属性。我已在我的任务模型中将“完成日期”列为 attr_accessible 和 attr_accessor。知道为什么在使用 @task.complete_date 引用 complete_date 字段时我总是得到 nil 吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:25:10.633

你应该删除`attr_accessor :complete_date`. 因为`attr_accessor`创建了两个方法（`#complete_date`& `#complete_date=`）并使用了实例变量`@complete_date`，即 nil，因为它没有填充记录属性的值。这两个方法覆盖了 ActiveRecord 属性访问器方法。

# cakephp - 在 CakePHP 中保存记录时使用“重复键更新”

> ID：13396272
> 
> 赞同：6
> 
> 时间：2012-11-15T11:07:21.577
> 
> 标签：cakephp, cakephp-2.1

我的模型有 2 个唯一索引。主键和字母数字 ID。

更新所述记录时我只有字母数字 id，所以我需要在保存功能中添加“重复键更新”语句，但我该怎么做呢？

而且我不想先查询主键，因为这会使导入过程变得异常漫长和缓慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-24T08:31:16.930

另一种选择是`Model->exists()`在您的模型中覆盖。这实际上和 Cake 做的一样，但扩展到了其他键，不仅是 primaryKey。

```
/**
 * Overrides Model->exists() method so we can check for uniqueness if primary key is not set
 *
 * If a record already exists, sets the primary key of that record to do an update
 *
 * @param int $id
 * @return bool True if the record exists, false otherwise
 */
public function exists($id = null)
{
    if (empty($id) && !$this->getID() && isset($this->data[$this->alias]) && is_array($this->data[$this->alias])) {
        // given $id and primary key are empty, try with data
        $exists = $this->find('first', array(
            'fields' => array($this->primaryKey),
            'conditions' => array(
                'key1'=>$this->data[$this->alias]['key1'],
                'key2'=>$this->data[$this->alias]['key2'],
            ),
            'recursive' => -1,
            'callbacks' => false,
        ));
        if ($exists) {
            $this->set($this->primaryKey, $exists[$this->alias][$this->primaryKey]);
            return true;
        }
    }
    return parent::exists($id);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:29:17.513

cakephp 中不支持“重复密钥更新”选项。

如果您真的不想进行查找，我建议将字母数字 id 更改为主键（只要它类似于 UUID 而不是 varchar）。如果这不是一个选项，我最好的建议是添加一个执行完整性检查的 beforeSave 方法。

这是一个可以帮助[Cakephp 检查记录是否存在的链接](https://stackoverflow.com/questions/11996823/cakephp-check-if-record-exists)

# sql - EF 中的模型和数据库

> ID：13396274
> 
> 赞同：2
> 
> 时间：2012-11-15T11:07:34.187
> 
> 标签：sql, sql-server, database, entity-framework, model

我有两个 SQL Server 数据库 (`dbInfo`和`dbData`)，我想向我的 .NET 应用程序 (WPF、ASP.NET MVC、...) 添加一个/两个 EF 模型。

**问：**添加 EF 模型时最好的方法是什么？添加两个模型，每个数据库一个？

*   添加两个 edmx 模型，每个数据库一个？
*   使用[SQL 同义词](http://rachel53461.wordpress.com/2011/05/22/tricking-ef-to-span-multiple-databases/)为两个数据库添加一个 edmx 模型？
*   其他版本...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:08:23.783

这在很大程度上取决于两个数据库之间的交互量。

不过，我强烈希望将它们保存在单独的模型中。一个模型容纳两个数据库会引入许多您希望避免的复杂性和依赖性：

*   必须定义同义词。
*   当“其他”数据库发生变化时，您可能必须修改主数据库中的同义词。
*   如果一个数据库发生变化，您必须更新到整个模型。
*   数据库（可能）不能有不同的版本（edmx 模型是版本敏感的）。
*   同义词是指向不同数据库中对象的路径。可以通过移动数据库之一或重命名目标对象来破坏路径。您只会在运行时注意到。
*   备份/恢复必须同步。

可能还有更多……

然而，可能有一个令人信服的要求可以推翻这些反对意见。如果您想在一个事务中修改两个数据库中的数据，使用同义词和一个上下文（以及一个数据库连接）会更容易。否则，您必须`TransactionScope`在代码中使用并在数据库服务器上启用 DTC。

# eclipse-rcp - ViewPart 激活被 jre7 和 SWT_AWT 破坏

> ID：13396281
> 
> 赞同：2
> 
> 时间：2012-11-15T11:07:55.120
> 
> 标签：eclipse-rcp, java-7, swt-awt

我在带有 jre6 的 RCP 应用程序中使用 SWT_AWT 桥，它工作得很好。设置代码取自[Eclipse 角文章](http://www.eclipse.org/articles/article.php?file=Article-Swing-SWT-Integration/index.html)：

```
Composite composite = new Composite(parent, SWT.EMBEDDED | SWT.NO_BACKGROUND);
Frame frame = SWT_AWT.new_Frame(composite);
JApplet applet = new JApplet();          
frame.add(applet);
return applet; 
```

现在，当我切换到 jre7 时，包含桥的视图部分不再通过鼠标事件激活。

这个问题至少出现在Win7上，我还没有在其他操作系统上尝试过。

有任何想法吗？

# ruby-on-rails-3 - 将范围与 Ruby on Rails 3 一起使用时，url 中的默认参数

> ID：13396282
> 
> 赞同：2
> 
> 时间：2012-11-15T11:07:54.797
> 
> 标签：ruby-on-rails-3

我知道这已经被问过了，但我仍然无法让它发挥作用。我正在尝试使用 获取`:locale`要显示的参数`default_url_options`，如下所示：

```
# SomethingController < ApplicationController
def default_url_options(options={})
  { :locale => I18n.locale }
end 
```

`I18n.locale`用 a 设置`before_filter`并具有正确的值（用 pry 调试）。路线：

```
# In routes
scope "(:locale)", :defaults => { :locale => I18n.default_locale } do
  get "something" => "something#index", :as => :something_index
end 
```

在我看来，我尝试过：

```
url_for :something_index 
```

和

```
something_index_url 
```

但它们都返回“/something”而不是“/en/something”。为了自动显示参数，我还需要做些什么吗？

[我在这里](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-url-params)读到了这个：

> 每个依赖于 url_for 的辅助方法（例如，命名路由的辅助方法，如 root_path 或 root_url，资源路由如 books_path 或 books_url 等）现在将自动在查询字符串中包含语言环境

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:44:49.477

您可以修改 get 匹配器：

```
scope :locale, :defaults => { :locale => I18n.default_locale } do
  get "/:locale/something" => "something#index", :as => :something_index
end 
```

如需更好的方法，请参阅此处：

[Rails 可选 /:locale 路由](https://stackoverflow.com/questions/6636140/rails-optional-locale-route)

# java - 从文本框中获取值并使用JavaScript通过AJAX将其显示在jsp页面的textarea中时无法显示％（百分比）符号

> ID：13396284
> 
> 赞同：1
> 
> 时间：2012-11-15T11:07:55.950
> 
> 标签：java, javascript, ajax, jsp, servlets

在我的jsp页面中，

```
<form id="indexForm" name="indexForm" action="LoginAction" method="post">
<table>
    <tr>
        <td id="fname" class="fontStyle">First Name :</td>
        <td id="fvalue"><input type="text" id="firstname"
            name="firstname" /></td>
        <td id="lname" class="fontStyle">Last Name :</td>
        <td id="lvalue"><input type="text" id="lastname" name="lastname" /></td>
    </tr>
        <tr>
        <td></td>
        <td>
        <center><!-- <input type="button" value="End Chat" onclick="getValues()" /> -->
        <a id="button" href="javascript:getValues();">Start chat</a></center>
        </td>
        <td>
        <center><!-- <input type="button" value="End Chat" /> --> <a
            id="button" href="javascript:logout();">Stop chat</a></center>
        </td>
        <td></td>
    </tr>

</table>

</form>

</div>
<div style="display: none;" id="div">
<div><textarea id="textarea" rows="10"></textarea></div>
<div>
<table>
    <tr>
        <td id="msg" class="fontStyle">message :</td>
        <td id="msgvalue"><input size="40" type="text" id="message" /></td>
        <td style="width: 5%;"></td>
        <td><!-- <input type="button" value="send" onclick="sendMessage()" /> -->
        <a id="button3" href="javascript:sendMessage();">Send</a></td>
    </tr>
</table>
</div>
</div> 
```

在我的 JavaScript 中，

```
var message ;
var textarea ;

function sendMessage(){

    message = document.getElementById("message").value;
            textarea = document.getElementById("textarea");

    try
    {
        xmlhttp.onreadystatechange=function()
        {
            //alert("Status : "+xmlhttp.status+"\nreadyState : "+xmlhttp.readyState);
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                var checkMsg = encodeURIComponent(xmlhttp.responseText.toString());
                if(checkMsg != "null" && checkMsg != null){
                    //document.getElementById("textarea").innerHTML +=  checkMsg;
                    if(textarea.value == "")
                        textarea.value = checkMsg;
                    else
                        textarea.value += "\n"+ checkMsg  ;
                }
            }
        };
        xmlhttp.open("POST","SendMessageAction?message="+encodeURIComponent(message)+"&sid"+Math.random(),true);
        xmlhttp.send();
    }
    catch(err)
    {
        alert(err.description);
    }
} 
```

在我的 servlet 中，

```
package com.tps.flexchat.action;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.genesyslab.platform.webmedia.protocol.FlexChatProtocol;
import com.tps.flexchat.Request.SendMessage;
import com.tps.flexchat.info.ApplicationInfo;
import com.tps.flexchat.info.CustomerInfo;

public class SendMessageAction extends HttpServlet {
    private static final long serialVersionUID = 1L;

    private String msg;
    private String seckey;
    private String uid;
    private String sessionId;
    private int counter;
    private FlexChatProtocol protocol = null; 
    private SendMessage message;

    public SendMessageAction() {
    super();
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        PrintWriter out = response.getWriter();
        msg = request.getParameter("message");
        seckey = request.getParameter("securekey");
        uid = request.getParameter("userId");
        sessionId = request.getParameter("sessionId");
        //counter =Integer.parseInt(request.getParameter("counter"));
        counter = 1;
        protocol = ApplicationInfo.flexProtocol;

        message = new SendMessage();
        message.send(msg, seckey, uid, sessionId, counter, protocol);

        CustomerInfo customer = ApplicationInfo.customerDetails.get(uid);

        out.print(customer.getMessage());

    }

} 
```

sessionId，userId，secureKey可以由genesys生成并且工作正常..只有msg有问题......

在java类中，

```
package com.tps.flexchat.Request;

import com.genesyslab.platform.commons.protocol.ChannelState;
import com.genesyslab.platform.commons.protocol.Message;
import com.genesyslab.platform.commons.protocol.ProtocolException;
import com.genesyslab.platform.webmedia.protocol.FlexChatProtocol;
import com.genesyslab.platform.webmedia.protocol.flexchat.EventInfo;
import com.genesyslab.platform.webmedia.protocol.flexchat.MessageText;
import com.genesyslab.platform.webmedia.protocol.flexchat.TreatAs;
import com.genesyslab.platform.webmedia.protocol.flexchat.UserType;
import com.genesyslab.platform.webmedia.protocol.flexchat.events.EventStatus;
import com.genesyslab.platform.webmedia.protocol.flexchat.requests.RequestRefresh;
import com.tps.flexchat.info.ApplicationInfo;
import com.tps.flexchat.info.CustomerInfo;

public class SendMessage {
    int i = 0;
    public void send(String msg,String seckey, String uid, String sessionId, int counter, FlexChatProtocol protocol){
            CustomerInfo customer = ApplicationInfo.customerDetails.get(uid);
            RequestRefresh refresh = RequestRefresh.create();
            refresh.setMessageText(MessageText.create(null, TreatAs.NORMAL, msg));
            refresh.setFromPosition(customer.getFromPosition()+1);
            refresh.setSecureKey(seckey);
            refresh.setUserId(uid);

            try {
                if(protocol.getState() == ChannelState.Opened){
                    Message resp = protocol.request(refresh);
                    if(resp != null){
                        EventStatus status = (EventStatus)resp;
                        if(status.messageId() == EventStatus.ID){
                            String userId = status.getUserId();

                            if(status.getFlexTranscript() != null && status.getFlexTranscript().getEventInfoList() != null){
                                EventInfo info = (EventInfo) status.getFlexTranscript().getEventInfoList().getLast();

                                    if(customer != null){
                                        customer.setFromPosition(status.getFlexTranscript().getLastPosition());
                                        customer.addMessage(info.getText());
                                    }

                            }

                        }
                    }
                    //System.out.println(msg+";"+seckey+";"+uid+";"+sessionId+";"+counter);
                }else{
                    protocol.open();
                }
            } catch (ProtocolException e) {
                e.printStackTrace();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
    }
} 
```

当我在文本字段中键入任何特殊字符并按下发送按钮时，它将调用`sendMessage()`JavaScript 并在文本区域中显示除 % 符号之外的值。

除`%`符号外，所有特殊字符都在工作。

如何显示`%`符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:41:41.653

首先不要使用`escape()`，`encodeURIComponent()`而是使用。有关详细信息，请参阅[此](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent)。

```
message = encodeURIComponent(document.getElementById("message").value); 
```

其次在`<textarea>`with`.value`而不是 中设置值`.innerText`。

```
textarea.value = textarea.value ? textarea.value + '\n' + checkMsg : checkMsg; 
```

第三，您需要`Content-type:application/x-www-form-urlencoded`在发出请求时在 requestHeader 中进行设置`POST`。并发送您的有效负载，`xhr.send(data)`而不是使用查询字符串传递它。

```
xmlhttp.open("POST", "SendMessageAction?sid="+Math.random(), true);
xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
xmlhttp.send("message=" + message); 
```

一切加起来，假设您的响应是简单的（未以 url 编码编码，*这是不必要的！*）

```
var messageEl = document.getElementById("message");
var textareaEl = document.getElementById("textarea");

function sendMessage(){

    var xhr = new XMLHttpRequest();
    xhr.onload = function(evt) {
        var checkMsg = xhr.responseText;
        if (textareaEl.value)
            textareaEl.value += '\n';
        textareaEl.value += checkMsg;
    };
    xhr.onerror = function(evt) {
        // handle the error.
    };
    xhr.open('POST', "SendMessageAction?sid="+Math.random(), true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.send("message=" + encodeURIComponent(messageEL.value));
} 
```

你的问题应该自己解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:55:20.827

我可以看到您已经在转义消息，但看起来您还需要 URL -encode 然后 -decode 消息。URL 中使用 + 符号来表示空格，因此任何实际的 + 符号都将被删除，除非您对它们进行编码（到 '%2B'）。

在 Javascript 端，您可以使用`encodeURIComponent()`and `decodeURIComponent()`，在 Java 端使用`URLDecoder`and `URLEncoder`。

在您的 Javascript 中添加类似...

```
var checkMsg = decodeURIComponent(xmlhttp.responseText.toString());
...

xmlhttp.open("POST","SendMessageAction?message=" + encodeURIComponent(message)  +"&sid"+Math.random(),true); 
```

...在发送/接收消息的 Java 代码中...

```
String inMessage = URLDecoder.decode(rawMessage, "UTF-8");
...
return URLEncoder.encoder(outMessage, "UTF-8"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:31:22.153

解决办法是，

在使用 AJAX 将值发送到 servlet 时，我使用了 encodeURIComponent() 和 decodeURIComponent() 而不是 escape() 。

我的脚本是这样的，

```
var checkMsg = decodeURIComponent(xmlhttp.responseText.toString());
...

xmlhttp.open("POST","SendMessageAction?message=" + encodeURIComponent(message) 
```

感谢所有支持我的人......

# android - WebView：为什么 GET 参数作为嵌套 url 没有转义？

> ID：13396286
> 
> 赞同：1
> 
> 时间：2012-11-15T11:08:04.683
> 
> 标签：android

我有 2 个应用程序：iOS 和 Android，

我有 WebView，在 WebView 中我呈现 Facebook 身份验证对话框，所以，当我按下登录按钮时 - 我看到，Android WebView 生成无效的 url：

安卓：

```
https://m.facebook.com/login.php?fbconnect=1&skip_api_login=1&m=m&next=https://m.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=329216907114105&redirect_uri=http%3A%2F%2Fapi.quickblox.com%2Fauth%2Ffacebook%2Fcallback&display=touch&response_type=code&state=54b3e28cb55047afc2832cee42c16a748272b472.users.xml&perms=email&fbconnect=1&from_login=1&client_id=329216907114105&refsrc=http://m.facebook.com/login.php&app_id=329216907114105&cancel=http://api.quickblox.com/auth/facebook/callback?error_reason=user_denied&error=access_denied&error_description=The+user+denied+your+request.&state=54b3e28cb55047afc2832cee42c16a748272b472.users.xml&landing_serial=1&refid=9 
```

IOS：

```
https://m.facebook.com/login.php?fbconnect=1&skip_api_login=1&m=m&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D329216907114105%26redirect_uri%3Dhttp%253A%252F%252Fapi.quickblox.com%252Fauth%252Ffacebook%252Fcallback%26display%3Dtouch%26response_type%3Dcode%26state%3Dbcd9407a04d875d9eb2c4e8c84364de06b2249d1.auth.xml%26perms%3Demail%26fbconnect%3D1%26from_login%3D1%26client_id%3D329216907114105&refsrc=http%3A%2F%2Fm.facebook.com%2Flogin.php&app_id=329216907114105&cancel=http%3A%2F%2Fapi.quickblox.com%2Fauth%2Ffacebook%2Fcallback%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.%26state%3Dbcd9407a04d875d9eb2c4e8c84364de06b2249d1.auth.xml&landing_serial=1&refid=9 
```

所以 Android 没有将嵌套参数作为 URL 转义 - 我得到“发生错误。请稍后再试。**”**

所以，我必须做的是，我希望 Android 生成正确的 url...

**upd：** 我在 WebView 回调 onPageStarted 中得到这个 url

# javascript - 从 Django 到 javascript 的`$getjson` 不起作用

> ID：13396291
> 
> 赞同：2
> 
> 时间：2012-11-15T11:08:25.530
> 
> 标签：javascript, jquery, ajax, django

在 javascript 文件中，我具有以下功能。该功能由 执行`a.onclick`。“确认”出现。

```
var delete_req = function()
    {
    var r=confirm("This requirement will be deleted!");
    if (r==true)
    {
        id = $("#reqName").attr("name");
        $.getJSON("/delete_req/",{
            id:id
        },
        function(res){
            var name = res['name'];
            alert("requirement:" + name + "had been deleted");
        });
    }
}; 
```

在网址中：

```
url(r'^delete_req/$', 'main.views.delete_req'), 
```

在视图中：

```
def delete_req(request):
if request.is_ajax() and request.method == "get":
    id = request.get['id']
if id:
    try:
        req = requirement.objects.get(id=id)
    except requirement.DoesNotExist:
        req = None
else:
    req = None
if req:
    resp = {'name': req.name}
    req.delete()
    return HttpResponse(urllib.urlquote.json.dumps(resp), mimetype="application/json" )
else:
    resp = {'name': None}
    return HttpResponse(urllib.urlquote.json.dumps(resp), mimetype="application/json" ) 
```

**我没有到达视图功能。**

**（当我把简单的打印语句放在那里时，它没有执行）。**

**我添加了 urllib.urlquote，但没有帮助。**

**你有别的想法吗？**

**感谢您的回复。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:55:37.460

用于`urllib.urlquote`转储的 json 字符串。

# drupal-6 - 是否可以在 drupal 6 中将两个 hook_preprocess 函数合并为一个

> ID：13396294
> 
> 赞同：1
> 
> 时间：2012-11-15T11:08:35.430
> 
> 标签：drupal-6, preprocessor, hook

`template.php`Drupal 6 中文件夹下的`sites/all/themes`文件包含两个`hook_preprocess`函数。是否可以将它们组合成一个`hook_preprocess`功能？一些合适的例子将不胜感激。

# javascript - Windows Phone 8 触控支持

> ID：13396297
> 
> 赞同：8
> 
> 时间：2012-11-15T11:08:56.383
> 
> 标签：javascript, browser, windows-phone-8, touch, dom-events

windows phone 8 是否完全支持默认浏览器中的触摸事件？

它是否开箱即用，以便网页可以检测到任意 touchmove 事件？

我遇到了一些浏览器的问题，这些浏览器劫持了 touchmove 事件以用作其界面作为滑动手势。windows phone 8浏览器会做这样的事情吗？

谁能指出有关 Windows Phone 8 触摸事件的任何文档？

**编辑：**

这里有一个页面可以让拥有 Wonders Phone 8 的人测试触摸功能：http: [//blogs.msdn.com/b/ie/archive/2011/10/19/handling-multi-touch-and-所有浏览器中的鼠标输入.aspx](http://blogs.msdn.com/b/ie/archive/2011/10/19/handling-multi-touch-and-mouse-input-in-all-browsers.aspx)

如果有人可以尝试一下并让我知道它是否有效，我将不胜感激。

但是，有一些评论......

> SnarkMaiden 2011 年 10 月 20 日上午 11:17 # 只是为了好奇；我有一台带笔和触摸的平板电脑——在 IE9 中，我可以用笔在现场绘图，但用手指只能滚动页面。这是预期的行为吗？泰德约翰逊 [MSFT] 2011 年 10 月 20 日上午 11:28 #
> 
> @SnarkMaiden：不幸的是，是的，这是 IE9 中的预期行为和 IE10 中的文档模式 9。IE9 无法覆盖默认的平移手势。IE10 的 10 模式有一个新的 CSS 属性，“-ms-content-zooming: none”，它可以禁用对目标元素的平移和缩放。顺便说一句，这个博客在 IE10 中以文档模式 9 运行。因此，即使是 IE10 触摸用户也看到了这种行为。

因此，即使在设备上可行，也可能无法从该页面工作。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-16T11:26:09.897

您应该在这里查看：[更新触摸和指针事件](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/15/adapting-your-webkit-optimized-site-for-internet-explorer-10.aspx#step4)（Windows Phone 开发人员官方博客文章）。

* * *

# 编辑：引用链接文档的相关部分

WebKit 和 Internet Explorer 10 处理触摸事件的方式不同。WebKit 支持独立于鼠标处理的触摸界面；IE10 将触控、鼠标和触控笔组合成一个界面（指针）。指针事件模型也已提交给 W3C，以便在指针事件工作组下进行标准化。尽管它们不同，但模型通常相似，因此通常可以通过最少的代码更改添加对指针事件的支持。

## 添加指针事件监听器

指针 API 使用标准的“向下、移动、向上”事件模型。因此，将现有事件处理程序的侦听器连接到指针事件很简单。

### 前

```
this.element.addEventListener("touchstart", eventHandlerName, false); 
this.element.addEventListener("touchmove", eventHandlerName, false);
this.element.addEventListener("touchend", eventHandlerName, false); 
```

### 后

```
if (window.navigator.msPointerEnabled) {
  this.element.addEventListener("MSPointerDown", eventHandlerName, false);
  this.element.addEventListener("MSPointerMove", eventHandlerName, false);
  this.element.addEventListener("MSPointerUp", eventHandlerName, false);
}
this.element.addEventListener("touchstart", eventHandlerName, false);
this.element.addEventListener("touchmove", eventHandlerName, false);
this.element.addEventListener("touchend", eventHandlerName, false); 
```

## 关闭默认触摸行为

Internet Explorer 10 中的指针事件模型要求您明确指出页面的哪些区域将具有自定义手势处理（使用您刚刚添加的代码），以及哪些区域将使用默认手势处理（平移页面）。您可以通过在应该使用 -ms-touch-action 属性选择退出默认手势处理的元素上添加标记来做到这一点。例如：

### 前

```
<div id="slider" style="overflow: hidden;"> 
```

### 后

```
<div id="slider" style="overflow: hidden; -ms-touch-action: none;"> 
```

除了没有，Windows Phone 8 上的 IE10 还支持 pan-x 和 pan-y 属性，它们指定浏览器应该处理水平或垂直手势，而自定义 JavaScript 处理程序应该处理其他一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:06:15.517

看起来这将类似于 Windows 的 IE 10，但有一些例外......

来自[MSDN，“Windows Phone 的 Web 开发”](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462082%28v=vs.105%29.aspx)：

> **Windows Phone OS 8.0 的 Internet Explorer**中不支持的功能： Internet Explorer 10 的桌面版本支持以下功能，但 Windows Phone OS 8.0 的 Internet Explorer 不支持以下功能。
> 
> ...
> 
> CSS Touch 视图——特别是概览、滚动和加速滚动。
> 
> 与手势事件相关的旋转和角度事件。

**更新：**更新中 的[链接](http://blogs.msdn.com/b/ie/archive/2011/10/19/handling-multi-touch-and-mouse-input-in-all-browsers.aspx)适用于手机的 IE 10。Touch 在 SVG 画布中使用多点触控进行绘制。（它不会在该区域滚动页面，但会在页面的其余部分滚动）。

# forms - 提交后出现验证错误，IE 表单值在输入中不可见

> ID：13396302
> 
> 赞同：1
> 
> 时间：2012-11-15T11:09:05.060
> 
> 标签：forms, internet-explorer, validation

我在 Internet Explorer 中重新填充表单时遇到了一个非常奇怪的问题——据我所知，只有这个浏览器受到影响。

基本上，我有一个带有一些服务器端验证的注册表单（我的网站是使用 CodeIgniter 构建的）。如果表单验证失败，则会向用户显示验证错误列表，并使用发布的数据重新填充表单，以便他们可以更正它。

问题是，在 IE 中，表单值在浏览器中不可见 - 但如果我查看页面源以及使用开发工具检查表单输入元素，它们就在那里？！

如果我再次提交表单，那么我的 CI 验证显示字段为空 - 因此隐藏（或不可见）值不会被 IE 第二次提交。

有什么想法让我很难过吗？

[编辑]这是简化的源代码：

[http://pastebin.com/T2WUQ8v2](http://pastebin.com/T2WUQ8v2)

事后看来这个问题很明显！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:21:20.270

您在页面顶部有一个 IE 条件语句，它将输入中的所有数据替换为`placeholder`属性的值，在本例中为空。

# php - WordPress single.php 下一页和上一页

> ID：13396306
> 
> 赞同：0
> 
> 时间：2012-11-15T11:09:13.667
> 
> 标签：php, wordpress

我在将下一个和上一个链接添加到单个帖子时遇到问题（我不想要下一个帖子，我需要下一组帖子）。

该网站的工作方式是，当前帖子显示在页面顶部，下面显示所有相关帖子的列表，并带有分页。显示相关帖子的查询是：

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1; 

$args = array(
    'category__in'   => $search_categories,
    'posts_per_page' => 4,
    'paged'          => $paged
);

$search_term = null;

if ( isset( $_GET['search_term'] ) ) {
    $args['s'] = esc_attr( $_GET['search_term'] );
}

$twp_query = new WP_Query( $args ); 
```

我知道查询是返回足够的帖子。

这是循环（剥离所有标记）

```
if ( $twp_query->have_posts() ) {

    while ( $twp_query->have_posts() ) {

        $twp_query->the_post();

        get_template_part( 'post', 'listitem' );

    }

    next_posts_link('Next', $twp_query->max_num_pages);
    previous_posts_link('Previous ', $twp_query->max_num_pages);

} else {

    _e( 'Apologies, but no results were found.', 'rep' );

} 
```

它显示返回的前 4 个项目，但不显示下一个和上一个帖子链接。

我会很感激任何帮助，因为这个让我很难过！

更新：

刚刚尝试将 'nopageing' => false 添加到 args 数组，没有运气。

另一个更新：

在 wp-includes/link-template.php 中查看了 WordPress 的 get_next_posts_link，从这段代码来看，这是不可能的。除非其他人知道不同？

```
if ( !is_single() && ( $nextpage <= $max_page ) ) {
    $attr = apply_filters( 'next_posts_link_attributes', '' );
    return '<a href="' . next_posts( $max_page, false ) . "\" $attr>" . preg_replace('/&([^#])(?![a-z]{1,8};)/i', '&#038;$1', $label) . '</a>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:19:15.673

然后我将自己回答这个问题，由于 WordPress 的核心，这是不可能的，任何返回 true 到 is_single 的页面都被阻止显示下一篇和上一篇文章链接，一个例子：

```
if ( !is_single() && ( $nextpage <= $max_page ) ) {
    $attr = apply_filters( 'next_posts_link_attributes', '' );
    return '<a href="' . next_posts( $max_page, false ) . "\" $attr>" . preg_replace('/&([^#])(?![a-z]{1,8};)/i', '&#038;$1', $label) . '</a>';
} 
```

# haskell - 查找直角三角形时如何使用 Haskells 惰性

> ID：13396307
> 
> 赞同：4
> 
> 时间：2012-11-15T11:09:21.340
> 
> 标签：haskell, lazy-evaluation

我正在学习[http://learnyouahaskell.com/starting-out](http://learnyouahaskell.com/starting-out)上的（优秀的）Haskell 教程，并尝试了直角三角形示例：

```
> let triangles = [(a,b,c) | c <- [1..10], b <- [1..10], a <- [1..10], a^2 + b^2 == c^2] 
```

运行这个我得到了，正如预期的那样：

```
> triangles 
[(4,3,5),(3,4,5),(8,6,10),(6,8,10)] 
```

现在，我想尝试使用无限列表：

```
> let triangles = [(a,b,c) | c <- [1..], b <- [1..], a <- [1..], a^2 + b^2 == c^2] 
```

但是当我尝试它时，例如：

```
> take 2 triangles 
```

...程序只是运行并没有输出。我究竟做错了什么？我认为 Haskells 的懒惰会导致它找到前两个三角形然后停止？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T11:19:04.647

好吧，懒惰不是这里的问题。这是您在列表中迭代变量的顺序。

基本上发生的事情是：

1.  c 绑定到 1
2.  b 绑定到 1
3.  a 必然为 1
4.  检查方程
5.  a 绑定到 2
6.  检查方程
7.  a 绑定到 3
8.  检查方程

它会永远持续下去。

所以生成器继续迭代和绑定值`a`，因为它不知道您需要停止并增加`b`或`c`进行更改。

所以你需要以更平衡的方式生成元组。

例如，您可以使用以下方法：

```
triplesN :: Int -> [(Int, Int, Int)]
triplesN n = [(i, j, n - i - j) | i <- [1..n - 2], 
                                  j <- [1..n - i - 1], i>=j, 
                                  let k = n - i - j,   j>=k]

isTriangle (a, b, c) = a^2 == b^2 + c^2

triangles = filter isTriangle $ concatMap triplesN [1..] 
```

`tripleN`使用 sum 生成所有有序三元组`n`。通过将此函数映射到所有自然数上，我们实际上得到了所有有序对的流。最后，我们只过滤那些三角形的三元组。

通过做：

```
take 10 triangles 
```

我们得到：

`[(5,4,3),(10,8,6),(13,12,5),(15,12,9),(17,15,8),(20,16,12),(25,24,7),(25,20,15),(26,24,10),(29,21,20)]`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T12:18:07.717

您可能有兴趣阅读sigfpe 博客上的文章[A Monad for Combinatorial Search 。](http://blog.sigfpe.com/2009/07/monad-for-combinatorial-search-with.html)

他定义了一个名为*Penalty List*或*PList*的新 monad ，类似于 list monad，但它也具有针对更复杂解决方案的惩罚的概念。当您组合 PLists 时，生成结果的顺序是顺序最小罚分 --> 最大罚分。

在您的示例中，与整数关联的惩罚可能等于整数的大小，与元组关联的惩罚是其元素惩罚的总和。所以元组`(3,4,5)`的罚分是 3+4+5 = 12，元组`(5,12,13)`的罚分是 5+12+13 = 30。

使用 list monad，产生的元组的顺序是

```
(1,1,1), (1,1,2), (1,1,3), (1,1,4), (1,1,5) ... 
```

并且您永远不会看到不是形式的元组`(1,1,x)`。使用 PList monad，产生的元组可能是

```
(1,1,1), (1,1,2), (1,2,1), (2,1,1), (1,1,3), (1,3,1), (3,1,1), (1,2,2) ... 
```

在“较大”元组之前生成所有“较小”元组。

对于您的特定问题，此解决方案过于矫枉过正，但在更复杂的问题中可能非常有用。

# iis-7 - 将 IIS 7 上子文件夹的 url 正则表达式与 web.config 匹配

> ID：13396309
> 
> 赞同：1
> 
> 时间：2012-11-15T11:09:40.373
> 
> 标签：iis-7, url-rewriting, web-config

我在我的 ISS 服务器上使用 get simple cms（实际上必须使用 ISS），并且有一个插件可以使用`web.config`.

web.config 来源：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="GetSimple Fancy URLs" stopProcessing="true">
                <match url="^([^/]+)/?$" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Rewrite" url="?id={R:1}" />
            </rule>
     </rules>
    </rewrite>
</system.webServer>
</configuration> 
```

但我的 CMS 在主文件夹`/`和子文件夹上`/en`，例如：

[http://domainname.com/](http://domainname.com/)（主 cms） [http://domainname.com/en/](http://domainname.com/en/)（子文件夹上的另一个 cms）

有了`web.config`上述，主 cms 工作成功，但子文件夹上的 cms 不工作（像以前一样给出 404）

我怎样才能实现该子文件夹规则`web.config file`？所以 2 cms 工作成功。

我试图将相同的 web.config 文件放在子文件夹 ( `/en`) 下，但它不起作用。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:14:43.153

首先，您的正则表达式只会匹配实际上位于您网站根目录中的 URL，例如`domain.com/page`或`domain.com/anotherpage`. 它不会匹配像`domain.com/subdir/page`. 但这可能正是你想要的，我不知道。

为了使其也能正常工作`/en`，请将规则更改为：

```
<rule name="GetSimple Fancy URLs" stopProcessing="true">
    <match url="^(en/)?([^/]+)/?$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="{R:1}?id={R:2}" />
</rule> 
```

如果您想要一个适用于任何两个字符语言代码的更通用的解决方案，请使用：

```
<rule name="GetSimple Fancy URLs" stopProcessing="true">
    <match url="^([a-z]{2}/)?([^/]+)/?$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="{R:1}?id={R:2}" />
</rule> 
```

这应该只是在`web.config`您的根目录中。

# node.js - 处理 Node.js 中的套接字挂起错误

> ID：13396314
> 
> 赞同：0
> 
> 时间：2012-11-15T11:09:59.047
> 
> 标签：node.js, express

嗨，当我尝试从我的 node.js 中点击一个 URL 时，我收到以下错误。

请求问题：

> 插座挂断

我的代码如下：

```
var express = require('express')
app = express.createServer();
var options = {
    host:'10.230.125.54',
    port:8080,
    path:'/'
};
var http = require('http');
app.get('/hitmideation', function(req, response) {
    var jsonresponse;
    response.contentType('application/json');
    console.log('listening');
    var req =http.request(options, function(res) {
        console.log('STATUS: ' + res.statusCode);
        console.log('HEADERS: ' + JSON.stringify(res.headers));
        res.setEncoding('utf8');
        res.on('data', function (chunk) {
            console.log('BODY: ' + chunk);
            jsonresponse = chunk;
            response.end('json from url:'+ JSON.stringify(jsonresponse));
        });
    });
    req.on('error', function(e) {
        console.log('problem with request: ' + e.message);
    });
    req.end();
});
console.log('I will be listening on: 1340' );
app.listen(1340); 
```

我该如何处理这个问题？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:30:50.547

`options`通过在浏览器中进行测试，确保您的网址正常工作。如果您确定 url 正在响应，请尝试以下代码片段来检索内容：

```
http.get("10.230.125.54:8080", function(res) {
    res.setEncoding('utf8');
    var content = '';
    res.on('data', function (chunk) {
        content += chunk;
    });
    res.on('end', function () {
        var obj = JSON.parse(content);
        // do whatever with the obj
    });
}).on('error', function(err) {
       // Handle the err here
    }); 
```

# c# - 获取 1000 条最新推文并将其写入日志文件

> ID：13396316
> 
> 赞同：1
> 
> 时间：2012-11-15T11:10:00.637
> 
> 标签：c#, twitter, linq-to-twitter

我一直在尝试获取最新的 1000 条推文。我已经阅读了 LinqToTwitter 上的所有文档。我试着写我自己的：

```
 void GetUserTimeLine(TwitterContext ctx)
     {
        List<String> tweetList = new List<String>();
        String[] breakWords;
        ulong maxID = 0000;
        ulong sinceID = 3396455589; //oldest tweetID
        for (int i = 0; i < 5; i++)
        {
            if (i == 0)
            {
                var statusTweets =
               from tweet in twitterCtx.Status
               where tweet.Type == StatusType.User &&
                     tweet.Count == 200 &&
                     tweet.SinceID == sinceID &&
                     tweet.ScreenName == "nyptweets"
               select tweet;

                tweetList.Add(statusTweets.ToList().ToString());
                breakWords = tweetList[tweetList.Count - 1].Split(' ');
                maxID = Convert.ToUInt64(breakWords[5].ToString());
            }
            else
            {
                var statusTweets =
               from tweet in twitterCtx.Status
               where tweet.Type == StatusType.User &&
                     tweet.Count == 200 &&
                     tweet.SinceID == sinceID &&
                     tweet.MaxID == maxID &&
                     tweet.ScreenName == "nyptweets"
               select tweet;
               tweetList.Add(statusTweets.ToList().ToString());
               breakWords = tweetList[tweetList.Count - 1].Split(' ');
               maxID = Convert.ToUInt64(breakWords[5].ToString());
            }

        }
       string dwnloadFilePath = @"C:\temp\Tweet.log";

        // CREATE AN EMPTY TEXT FILE
        FileStream fs1 = null;
        if (!File.Exists(dwnloadFilePath))
        {
            using (fs1 = File.Create(dwnloadFilePath)) ;
        }

        // WRITE DATA INTO TEXT FILE
        if (File.Exists(dwnloadFilePath))
        {
            using (StreamWriter sw = new StreamWriter(dwnloadFilePath))
            {
                File.WriteAllLines(dwnloadFilePath, tweetList);
             }
          }
       } 
```

有人可以帮我吗？问题是当我选择一条推文时它不是一个`string`因此当我将它添加到它时`List<string>`它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:21:54.647

只是为了它，你应该考虑像这样清理你的代码（长度的一半）：

```
public class Twitter
{
    private List<String> tweetList;
    private String[] breakWords;
    private ulong maxID = 0000;
    private ulong sinceID = 3396455589; //oldest tweetID

    private void progressTweet(int i)
    {
        var statusTweets =
               from tweet in twitterCtx.Status
               where tweet.Type == StatusType.User &&
                     tweet.Count == 200 &&
                     tweet.SinceID == sinceID &&
                     tweet.ScreenName == "nyptweets"
               select tweet;

        if (i == 0)
            tweetList.Add(statusTweets.ToList().ToString());
        else
            tweetList.Add(statusTweets.Where(x => x.MaxID == maxID).ToList().ToString());

        breakWords = tweetList[tweetList.Count - 1].Split(' ');
        maxID = Convert.ToUInt64(breakWords[5].ToString());
    }

    void GetUserTimeLine(TwitterContext ctx)
    {
        tweetList = new List<String>();

        for (int i = 0; i < 5; i++)
            progressTweet(i);

        File.WriteAllLines(@"C:\temp\Tweet.log", tweetList);
    }
} 
```

值得注意的是，除了对我来说看起来不太正确的之外，您不会使用`i`其他`if (i == 0) ... else ...`优化，除了另一个优化是不为每次迭代运行 LINQ，而是提前选择您想要的那些，以便您可以将实际推文传递给`progressTweet`.

至于保持这个实际答案，我不希望`.ToList().ToString()`是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:20:12.657

我不熟悉您正在使用的库，但是您会看到代码部分有`tweet.Type`,`tweet.Count`等......必须有一个名为“Description”或“Body”或“Content”的成员。Intellisense 应该能够为您提供帮助（按推文。应该展开您可以对对象执行的操作的列表）。知道了这一点，您现在可以构造要存储在列表中的字符串（通过迭代 中的所有对象`statusTweets`），可能类似于用户名和推文正文？

ToString 是一个运算符，当未定义时，它将简单地将对象类型输出为字符串，这不是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:36:32.767

如果您需要最新的 1000 行，为什么不尝试 Take(1000) 以 tweek 日期降序排序。

它是这样的

```
 var latestTweets= (from tweet in twitterCtx.Status
                   where tweet.Type == StatusType.User &&
                         tweet.Count == 200 &&
                         tweet.SinceID == sinceID &&
                         tweet.ScreenName == "nyptweets"
                       orderby <tweet.tweetdate> descending
                   select tweet).Take(1000);

foreach(var tweet in latestTweets){
 // Work on each tweet object.
} 
```

# charts - Dojo 工具提示始终显示

> ID：13396317
> 
> 赞同：0
> 
> 时间：2012-11-15T11:10:02.483
> 
> 标签：charts, dojo, tooltip

是否可以在图表中始终显示工具提示？我知道有可能让它出现在鼠标上使用

```
new Tooltip(chart,"default"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:07:45.673

问题`dijit/Tooltip`在于它是围绕[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)构建的，因此您一次不能显示多个工具提示。

查看[Dojo Bootstrap](http://dojobootstrap.com/) ( [GitHub](https://github.com/xsokev/Dojo-Bootstrap) )，即*Dojo 的 Twitter Bootstrap*及其[`Tooltip`](http://dojobootstrap.com/tooltip)或[`Popover`](http://dojobootstrap.com/popover)。它们是可靠的替代品。

# ruby-on-rails - 在 Salesforce 中发布到多个活动

> ID：13396318
> 
> 赞同：1
> 
> 时间：2012-11-15T11:10:03.683
> 
> 标签：ruby-on-rails, ruby, forms, post, salesforce

我创建了一个表单来向销售人员发送潜在客户，发布到某个活动。目前它发布到一个活动中，如下所示：

`post["Campaign_ID"] = "701D00000001234"`

我需要一次发布两个，但是我在那个字符串中输入的任何内容似乎都被完全忽略了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:31:51.010

在 Salesforce 的 Lead 对象上，只有一个字段称为`CampaignId`Campaigns 表的查找（如果您愿意，可以使用外键）。

如果您想将同一个人链接到 2 个广告系列，您可能必须创建 2 个潜在客户（我认为这是个坏主意）。您还可以探索多对多关系。有一个名为的对象`CampaignMember`，可让您将联系人或潜在客户链接到多个活动。

有关活动的 ERD 图，请参阅[http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_erd_majors.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_erd_majors.htm)。

# git - 集中式 GIT 工作流/部署 - 发布分支

> ID：13396319
> 
> 赞同：3
> 
> 时间：2012-11-15T11:10:05.270
> 
> 标签：git, shell, workflow, branch, release

继我之前关于特性分支的问题之后，您可以在此处找到[集中式 GIT 工作流/部署 - 存储库初始化和特性分支](https://stackoverflow.com/questions/13247085/centralized-git-workflow-deployment-repository-initialization-and-feature-bran)我有一些关于“发布分支”的问题。

首先，我将完成工作流程：

开发状态已为“下一个版本”做好准备，我们已决定这将成为 1.0 版

`git checkout -b release-1.0 develop`

`./bump-version.sh 1.0`

好的，我的第一个问题。我需要创建凹凸版本脚本还是可以从某个地方下载它？它具体做什么以及需要安装在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:40:40.010

我对你的问题有点困惑。您是否需要一个可以告诉您实际版本号的脚本？

`git describe master`例如，您可以尝试，它会从您创建的最新标签中为您提供一个特定的名称。查看Pro Git 书上的[准备发布部分。](http://git-scm.com/book/ch5-3.html#Generating-a-Build-Number)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:56:14.137

从您尝试遵循的上一个问题的外观来看：http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

您是否尝试过使用 git-flow？它旨在帮助解决这些问题。

[https://github.com/nvie/gitflow](https://github.com/nvie/gitflow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:04:39.477

“bump-version.sh 的作用”取决于您的构建过程。例如，如果你使用`maven`，它可能是`sed`你的 pom 来设置版本。如果使用`sbt`，则可以将版本设置保存在单独的`version.sbt`文件中，脚本可能会覆盖整个文件。

# java - 多种方法和无限循环发生的问题

> ID：13396321
> 
> 赞同：1
> 
> 时间：2012-11-15T11:10:10.237
> 
> 标签：java, infinite-loop

我正在编写一个程序，它需要除 main 之外的 5 个方法，每个方法都执行特定的操作，main 调用所有其他方法向用户输出有关错误输入的警告，第二种方法只是提取用户想要处理的变量数量的主要输入，第三种方法检查以确保用户的输入为非负数，并稍后检查所有用户输入以确保它也是非负数，第四种方法测试用户输入的数字，最后最后一种方法打印所有内容.. 到目前为止我没有做很好。我有程序要求用户输入，它工作正常，第二种方法应该检查并确保输入正确，我似乎无法工作，它要么循环说输入是正确的还是错误的。因为代码现在循环说输入不正确。

```
import java.util.Scanner;

public class tgore_perfect 
{
    private static int count;   
    public static void main ( String args [])
    {
        count = getNum ();
        boolean check = validateNum();
        while (check == false)
        {
            System.out.print ("Non-positive numbers are not allowed.\n");
            count = getNum();
        }
        if (check == true)
        {
            System.out.print("kk");
        }
    }

    public static int getNum () //gets amount of numbers to process
    {
    Scanner input = new Scanner ( System.in );
    int counter;

    System.out.println ("How many numbers would you like to test? ");
    counter = input.nextInt();
    return counter;
    }

    private static boolean validateNum() //checks user input
    { 
        if (count <= 0)
        {
            return false;
        }
        else
        {
            return true;
        }
    }
} 
```

通过一种主要方法来完成这个程序很容易通过这么多方法来完成，这让我很困惑。. .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:14:28.463

您的问题是您没有第二次检查该值。尝试这个：

```
//System.out.print(check);
while (validateNum() == false)
{
    System.out.print ("Non-positive numbers are not allowed.\n");
    count = getNum();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:15:41.447

```
boolean check = validateNum();
//System.out.print(check);
while (check == false)
{
    System.out.print ("Non-positive numbers are not allowed.\n");
    count = getNum();
    // reset check here 
} 
```

您不是`check`在循环内重置，所以如果控制进入循环内，它将是无限循环。

解决方案之一可能是：

```
while ( ! validateNum())
{
    System.out.print ("Non-positive numbers are not allowed.\n");
    count = getNum();
} 
```

# xaml - Windows 8 XAML 中未使用的自定义字体

> ID：13396325
> 
> 赞同：1
> 
> 时间：2012-11-15T11:10:23.743
> 
> 标签：xaml, windows-8

我正在尝试在 Windows 8 C#-XAML Metro App 中使用自定义字体，但 XAML 忽略了该字体。

我这样使用它：TextBlock FontFamily="/Assets/fonts/brlnsdb.ttf#Berlin Sans FB Demi"

我将字体添加到项目中（在文件夹：Assets/fonts/ 中），将其构建操作设置为“内容”，将“复制到输出目录”设置为“始终复制”。

我还尝试将路径更改为“ms-appx:/Assets/fonts/brlnsdb.ttf#Berlin Sans FB Demi。

拼写正确，文件名和实际字体名称也正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:43:56.213

删除“半粗体”。

```
 <TextBlock FontFamily="/Assets/fonts/BRLNSDB.TTF#Berlin Sans FB" 
           Text="Berlin Sans FB Demi Bold" ... 
```

![在此处输入图像描述](../Images/10043645f4322fb25c9d2e32d91ff7a7.png)

（后记）以上，我错了。

Windows 8 具有“Berlin Sans FB”字体。所以，你可以写如下。

```
<TextBlock FontFamily="Berlin Sans FB" ... 
```

但是，此 XAML 代码不使用“/Assets/fonts/BRLNSDB.TTF”中包含的字体。我猜想在xaml中不能指定与系统字体同名的字体。

# android - Android 布局 getTag 为空

> ID：13396328
> 
> 赞同：0
> 
> 时间：2012-11-15T11:10:50.057
> 
> 标签：android, layout

我注意到它 `android:tag` 是由 View 类派生的。
所有 `Button, TextView` 等等，都不是从 View 类继承的。

当我看风景时，

```
<TextView  
          android:layout_width="fill_parent" 
          android:layout_height="wrap_content" 
          android:text="Services Demo" 
          android:tag="stxt"
          android:hint="stxt hint"
          android:gravity="center" 
          android:textSize="20sp" 
          android:padding="20dp"
     />
     <Button android:layout_width="wrap_content" 
             android:layout_height="wrap_content" 
             android:id="@+id/buttonStart" 
             android:text="Start"
             android:hint="Start button"
             android:tag="sbut1"
     /> 
```

我检测到视图在结构中循环，或者在事件之后我将标签作为空字符串接收。

```
String Tag= (String) textview.getTag() 
```

由于标签 Tag 似乎旨在将信息从布局传递到应用程序级别，我开始怀疑。

谁能帮我找到预期的标签、提示、描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:18:51.230

您需要设置 id 然后调用。

```
TextView textview = (TextView)findViewById(R.id.text_id);

String Tag= (String) textview.getTag(); 
```

# c# - 产生 .wmv 文件零字节

> ID：13396329
> 
> 赞同：2
> 
> 时间：2012-11-15T11:10:53.647
> 
> 标签：c#, powerpoint

大家好，这是我在 C# 中的代码，我读取了一个 .ppptx 文件并将其转换为 .wmv，由于某种原因它会生成一个零大小的文件。当我将其保存为 gif 时，它可以正常工作，但我找不到原因。 .

```
using Microsoft.Office.Core;
using Microsoft.Office.Interop.PowerPoint;
using ppt = Microsoft.Office.Interop.PowerPoint;
using System.Runtime.InteropServices;
using System;

namespace PowerPoint
{
    class Program
    {
    static void Main(string[] args)
    {
        //{0} source path filename
        //{1} destination path
        var app = new ppt.Application();

       // ppt.Presentation file = app.Presentations.Open(args[0], MsoTriState.msoTrue, MsoTriState.msoTrue, MsoTriState.msoFalse);
        ppt.Presentation file = app.Presentations.Open(@"C:\Users\mkolozoff\Desktop\tutorial1.pptx", MsoTriState.msoTrue, MsoTriState.msoTrue, MsoTriState.msoFalse);

       // file.SaveCopyAs(args[1], PpSaveAsFileType.ppSaveAsWMV);
        file.SaveCopyAs(@"C:\Users\mkolozoff\Desktop\demo.wmv", PpSaveAsFileType.ppSaveAsWMV);

        file.Close();
        app.Quit();

        Marshal.ReleaseComObject(file);
        Marshal.ReleaseComObject(app);

        file = null;
        app = null;

        GC.Collect();
        GC.WaitForPendingFinalizers();

    }
}
} 
```

# javascript - jquery项目如何做代码覆盖测试

> ID：13396330
> 
> 赞同：1
> 
> 时间：2012-11-15T11:10:55.447
> 
> 标签：javascript, jquery, code-coverage

我知道 jQuery 使用[QUnit](http://qunitjs.com/)进行单元测试，但是用于 javascript 代码覆盖测试的工具是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:12:38.787

我可能找到了答案：

jscoverage

[http://siliconforks.com/jscoverage/instrumented-jquery/jscoverage.html?test/index.html](http://siliconforks.com/jscoverage/instrumented-jquery/jscoverage.html?test/index.html)

# vba - 从双面打印机上的不同纸盘打印 (Word 2003)

> ID：13396340
> 
> 赞同：1
> 
> 时间：2012-11-15T11:11:41.133
> 
> 标签：vba, printing, properties, ms-word, duplex

我正在制作一个宏，它从一个纸盘打印第 1 页，该纸盘从另一个纸盘打印有头纸和所有其他页面。

除了打印机的双面打印之外，这很好用，所以它从前向后倒置。

有没有办法让它不倒过来并可能将页面上的所有内容旋转 180 度？

或使用禁用双工`acPRDPSimplex`

这是代码：

```
Sub PrintHeaded()
findprinter
Dim VNumberofPages As Integer
ActiveDocument.Repaginate
VNumberofPages = ActiveDocument.BuiltInDocumentProperties(wdPropertyPages)
If VNumberofPages = 1 Then
    vprintrange = "1"
    ActiveDocument.PageSetup.FirstPageTray = LetterHeadTray
Else: vprintrange = "1,2"
   ActiveDocument.PageSetup.FirstPageTray = LetterHeadTray
End If
        Application.PrintOut FileName:="", Range:=wdPrintRangeOfPages, Item:= _
        wdPrintDocumentContent, Copies:=1, Pages:=vprintrange, PageType:= _
        wdPrintAllPages, ManualDuplexPrint:=False, Collate:=True, Background:= _
        True, PrintToFile:=False, PrintZoomColumn:=0, PrintZoomRow:=0, _
        PrintZoomPaperWidth:=0, PrintZoomPaperHeight:=0, OutputFileName:="", _
        Append:=False
If VNumberofPages > 2 Then
    vprintrange = "1 - " & VNumberofPages
    With ActiveDocument.PageSetup
        .FirstPageTray = LetterHeadTray
        .OtherPagesTray = PlainPaperTray
    End With
        Application.PrintOut FileName:="", Range:=wdPrintRangeOfPages, Item:= _
        wdPrintDocumentContent, Copies:=1, Pages:=vprintrange, PageType:= _
        wdPrintAllPages, ManualDuplexPrint:=False, Collate:=True, Background:= _
        True, PrintToFile:=False, PrintZoomColumn:=0, PrintZoomRow:=0, _
        PrintZoomPaperWidth:=0, PrintZoomPaperHeight:=0, OutputFileName:="", _
        Append:=False
End If 
```

结束子

# extjs - 如何从 Ext.data.Store 获取价值？

> ID：13396346
> 
> 赞同：8
> 
> 时间：2012-11-15T11:11:56.703
> 
> 标签：extjs

这是我的代码

```
var store = {
    user_store: new Ext.data.Store({
        autoLoad: false,
        proxy: new Ext.data.HttpProxy({
            url: 'a/b/c',
        }),
        remoteSort: true,
        baseParams: {

        },
        reader: new Ext.data.JsonReader({
            totalProperty: 'total',
            root: 'root',
            fields: ['roles']
        })
    })
};
store.user_store.load();​ 
```

这是我的 json

```
{"roles":"2"} 
```

我不想问。我如何获得角色的价值是“2”。

（PS：对不起，我的英文不太好。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T11:35:20.600

如果响应中只有一项，可以在 load 方法中添加回调函数：

```
var store = {
    user_store: new Ext.data.Store({
        autoLoad: false,
        proxy: new Ext.data.HttpProxy({
            url: 'a/b/c',
        }),
        remoteSort: true,
        baseParams: {

        },
        reader: new Ext.data.JsonReader({
            totalProperty: 'total',
            root: 'root',
            fields: ['roles']
        })
    })
};
store.user_store.load(function(){
    this.getAt(0).get('roles')
});​ 
```

如果响应包含多个项目，例如：`[{"roles":"2"},{"roles":"1"}]` 您可以迭代存储以检索所有值。

```
store.user_store.load(function(){
    this.each(function(record){
       var roles = record.get('roles');
       // Do stuff with value
    });
});​ 
```

# asp.net - WPF 应用到 Asp.net

> ID：13396348
> 
> 赞同：0
> 
> 时间：2012-11-15T11:12:04.290
> 
> 标签：asp.net, wpf

我得到了一个 Windows Presentation Foundation 应用程序，该应用程序使用 SQL Compact 数据库并在用户 PC 上作为独立运行它非常好......它扫描卡号。

商界人士向我寻求以下解决方案。1) 获取当前的 WPF 应用程序并使其在 Web 上运行

2) 但是如果一些客户没有互联网接入，那么有一个单一的解决方案可以满足互联网和非互联网连接客户的需求。我是一个oracle dba！所以在黑暗中，但我的建议是

1) 从头开始​​为所有连接互联网的客户使用 ASP.net Web 应用程序和 SQL Server 数据库。我们可以将卡号扫描到 ASP.net 应用程序吗？

2）对于那些没有连接的人，让他们保留独立的应用程序。但是有人建议我应该有一个单一的软件解决方案..grr！这意味着 ASP.net 解决方案也可以为非 Internet 客户在本地安装......我认为这不是一个好主意，因为安装就像一个迷你网络服务器、数据库和 asp.net 应用程序都在一个本地电脑。

因此，请就最好的软件解决方案提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:24:11.637

尝试研究 xbap 解决方案。假设您有 WPF 应用程序的源代码，那么制作在 Web 浏览器上运行的 xbap 应用程序应该很容易。

你可以从[这里](http://msdn.microsoft.com/en-us/library/aa970060.aspx)开始。

# wpf - 如何在一个集合上定义 2 个单独的过滤器？

> ID：13396353
> 
> 赞同：1
> 
> 时间：2012-11-15T11:12:14.970
> 
> 标签：wpf, data-binding, mvvm

我有一个出现在 2 个单独列表中的集合。一个列表应显示所有项目（未过滤），第二个列表应显示符合某个标准的项目（已过滤）。

2 个列表的 ItemsSource 属性绑定到 ViewModel 中的 2 个属性。

我试图为过滤后的列表设置一个 DefaultView，但它会影响两个列表。

```
ListCollectionView view = (ListCollectionView) CollectionViewSource.GetDefaultView(_manager.Modules);
view.Filter = delegate(object item)
{
    Model.BaseModule bm = item as Model.BaseModule;
    if (bm != null)
    {
        return bm is TemplatedUnitOfTest && ((TemplatedUnitOfTest)bm).TemplateGuid == _uot.Header.Id;
    }
    return false;
}; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:16:40.323

不要更改默认视图，而是显式创建两个单独的 实例`ListCollectionView`，过滤一个，并将每个列表绑定到相关视图。

*无论如何*，一个`ItemsControl`（或派生的）总是在显示之前将其`Items`集合包装在一个中- 如果您自己执行此步骤，那么您可以更好地控制显示的内容。`CollectionView`

# java - 对变量的设置作出反应

> ID：13396354
> 
> 赞同：1
> 
> 时间：2012-11-15T11:12:16.000
> 
> 标签：java, hibernate, javabeans

我有一个有六个属性和一个更改日期的类。

```
@Entity
@Table(name = "product")
public class Product {

   private Long id;

   private String title; // if changed, update lastChanged

   private String subtitle;

   private Text summary; // if changed, update lastChanged

   private Text description; // if changed, update lastChanged

   private Text otherText;

   private List<Text> reviews; // if changed, update lastChanged

   private Date lastChanged;

   // Getters and setters

} 
```

-

```
@Entity
@Table(name = "text")
public class Text {

   private Long id;

   private String content;

   private int typeCode;

   // Getters and setters

} 
```

（这显然是我们实际领域模型的大规模简化版本，但它说明了基本问题）

要求是：如果“title”、“summary”、“description”或“reviews”发生变化，请将“lastChanged”设置为当前日期。
背景：这些字段与外部 API 相关。我的客户想知道，自 X 日以来，哪些产品对其 API 相关字段进行了更改。

我试图通过实现 Hibernate Interceptors 和 Hibernate Event Listeners 来满足要求。他们都没有像我希望的那样工作。例如，当我更改“摘要”时，Hibernate 只会告诉我：“文本”表中的“内容”字段已更改。

这个信息不是很有用，因为我仍然不知道'summary'、'description'或'otherText'是否被改变了。因此我不知道是否需要更新“lastChanged”。

我的其他想法：

*   获取已更改的 Text 对象的 id 并尝试通过 SQL 查找与其连接的产品。这可能会起作用，但它是一个非常丑陋的解决方案，并且它会与我们的域模型变得非常复杂。

*   在变量设置器中实现更新逻辑。这样做有两个问题：Hibernate 在从数据库加载对象时调用 setter（这当然不会导致更新时间戳）并且它不能解决上述问题。如果“内容”的设置器被调用，那会怎样？我不知道，产品的哪个属性被改变了。

这个问题有什么优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:46:48.110

以通用方式解决更改通知问题并非易事，尤其是当您需要一种不会盲目发送通知的有状态机制时——例如，源自基础架构某些部分的更改不会触发通知。

您的问题的细节也可能使问题简化或复杂化。例如，同一个`Text`对象可以被一个对象的多个字段引用`Product`吗？同样，它是否可以在不同的`Product`对象之间共享？如果其中任何一个是可能的，那么当共享对象发生更改时，您必须确定正确的行动方案是什么——例如，您是否通知所有相关方？

构建通知基础设施的基本设计模式之一是[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。您可以使用这种方法让所有对象观察它们引用的所有`Product`对象的变化。`Text`

如果这种方法对于您的目的来说太复杂或太慢，您可能需要重新考虑您的架构。例如，使`Text`类不可变是否有意义？或者，如果每个`Text`对象仅被一个其他对象引用，是否可以添加一个额外的字段`Text`以指向其父对象以及合适的构造函数？

至于避免虚假通知，有几个潜在的解决方案：

*   限制对设置器的访问以保留它们以供任何持久性/序列化机制使用，并为系统的其余部分使用一组不同的方法。例如，您可以执行以下操作：

    公共类文本 { long privateId; ...私有 setPrivateId(long x) { privateId = x; }

    ```
    public setId(long x) {
       setPrivateId(x);

       this.triggerChangeNotifiers();
    }
    ... 
    ```

    }

*   让 Hibernate 直接填写字段，而不通过设置器 - 我相信有很多注释，但请记住，这种方法可能会使未来的重构更加困难。

# puppet - 服务器上的错误 400：必须使用包含参数的单个数组调用自定义函数

> ID：13396355
> 
> 赞同：0
> 
> 时间：2012-11-15T11:12:26.200
> 
> 标签：puppet

我已经为从这个 repo 克隆的 Puppet 安装了一个 jboss 模块：[https](https://github.com/example42/puppet-jboss) ://github.com/example42/puppet-jboss ，但是当我运行 puppet agent -t --trace 我收到这个错误“服务器上的错误 400 ：必须使用包含参数的单个数组调用自定义函数”

这是完整的跟踪[http://pastebin.com/YBJ289Tw](http://pastebin.com/YBJ289Tw)

Amazon Linux、Ruby 1.8.7、Puppet 3.0.1 知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:29:58.127

好的，PuppetForge 上的 Puppi 模块似乎不是最新的。我从 GitHub (https://github.com/example42/puppi) 更新到最新版本，重新启动 Puppet master，它工作得很好！

# java - JVM 堆内存使用 - 堆内存使用未超过最小堆大小

> ID：13396360
> 
> 赞同：1
> 
> 时间：2012-11-15T11:12:45.597
> 
> 标签：java, memory-management, heap-memory

我的应用程序堆内存使用量没有增加超过最小堆大小。例如：如果我将 Xms 设置为 1024 并将 Xmx 设置为 2048，则应用程序内存使用量不会超过我的 Xms 限制。

每当达到 Xms 但应用程序内存不会增加超过 Xms 时，就会发生完全垃圾收集，为什么？

使用 IBM JDK 1.6

# apache - java.io.NotSerializableException：org.apache.camel.component.file.GenericFile

> ID：13396364
> 
> 赞同：3
> 
> 时间：2012-11-15T11:12:56.143
> 
> 标签：apache, download

我正在尝试使用一个下载记录器，它应该记录两个端点之间的任何类型的文件传输，如下面在 camel-context.xml 中定义的那样

```
 <process ref="downloadLogger"/>
        <to uri="file:src/main/resources/META-INF?noop=true"/>

        <!-- Prepare the message for calling OFBiz service -->
        <setHeader headerName="Ofbiz.ServiceName">
            <constant>DownLoadLogger</constant>
        </setHeader>
        <setHeader headerName="Ofbiz.Param.note">
            <simple>${in.body}</simple>
        </setHeader>

        <!-- Call the OFBiz service -->
        <camel:process ref="ofbizDispatcher"/>
    </camel:route> 
```

但这会导致

```
java.io.NotSerializableException: org.apache.camel.component.file.GenericFile 
at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1196)[camel-core-2.9.0.jar:2.9.0]
at org.apache.camel.component.bean.BeanInvocation.invoke(BeanInvocation.java:87)[camel-core-2.9.0.jar:2.9.0]
at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:128)[camel-core-2.9.0.jar:2.9.0]
at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)[camel-core-2.9.0.jar:2.9.0]
at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:73)[camel-core-2.9.0.jar:2.9.0]
at org.apache.camel.component.rmi.RmiProducer.process(RmiProducer.java:45)[camel-rmi-2.9.0.jar:2.9.0] 
```

我正在使用 jdk 1.6 骆驼 2.9 罐子。请建议我是否在任何地方缺少任何配置。

提前致谢

帕德马拉雅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T12:08:58.987

在 'from uri' 和 'to uri' 之间使用以下语句

```
<convertBodyTo type="byte[]"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T09:41:30.043

将其转换为字符串后我得到了这个工作，转换为字节并不起作用！:(

```
 .convertBodyTo(String.class) 
```

# nsis - 如何调整 NSD_SetImageOLE 图像的大小

> ID：13396371
> 
> 赞同：0
> 
> 时间：2012-11-15T11:13:40.120
> 
> 标签：nsis

我正在使用`NSD_SetImageOLE`来自[http://nsis.sourceforge.net/NsDialogs_SetImageOLE](http://nsis.sourceforge.net/NsDialogs_SetImageOLE)的插件宏- 我想`NSD_SetStretchedImageOLE`以同样的方式添加另一个宏`nsDialog.nsh`。

但我不确定这是否可能，我发现`IPicture`可以通过获取“HBITMAP、BITMAP 和 BITMAPINFO”并调整其大小来调整 an 的大小（引自[http://www.mofeel.net/958 -microsoft-public-vc-mfc/12516.aspx](http://www.mofeel.net/958-microsoft-public-vc-mfc/12516.aspx)）。无论如何，我有点迷失了试图将这些方法转换为 NSIS 的`System::Call`风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-05T03:20:29.007

我已经用 ${NSD_SetStretchedImageOLE}更新了[http://nsis.sourceforge.net/mediawiki/images/6/65/NsDialogs_setImageOle.zip ，它封装了 Anders 的代码以实现可重用性。](http://nsis.sourceforge.net/mediawiki/images/6/65/NsDialogs_setImageOle.zip)我也将其更改为使用控件尺寸，而不是您必须自己指定尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:33:35.420

```
!ifndef IID_IPicture
    !define IID_IPicture {7BF80980-BF32-101A-8BBB-00AA00300CAB}
!endif
!define SRCCOPY 0xCC0020
!include nsDialogs.nsh

!define IMAGEPATH "$sysdir\migwiz\PostMigRes\Web\base_images\Documents.gif" ;"C:\Windows\Web\Wallpaper\Windows\img0.jpg"
!define NEWSIZEW 200
!define NEWSIZEH 100

Page Custom mypagestretchcreate_GDI ; GDI resize
Page Custom mypagestretchcreate_CTL ; Simple control resize

Function mypagestretchcreate_GDI
nsDialogs::Create 1018
Pop $0
System::Call 'oleaut32::OleLoadPicturePath(w "${IMAGEPATH}",i0r2,i0,i0,g"${IID_IPicture}",*i.r9)i.r1'
${If} $1 = 0
    System::Call 'user32::GetDC(i0)i.s'
    System::Call 'gdi32::CreateCompatibleDC(iss)i.r1'
    System::Call 'gdi32::CreateCompatibleBitmap(iss,i${NEWSIZEW},i${NEWSIZEH})i.r2'
    System::Call 'user32::ReleaseDC(i0,is)'
    System::Call $9->3(*i.r3)i.r4 ; IPicture->get_Handle
    ${If} $4 = 0
        System::Call 'gdi32::SetStretchBltMode(ir1,i4)'
        System::Call '*(&i40,&i1024)i.r4' ; BITMAP / BITMAPINFO
        System::Call 'gdi32::GetObject(ir3,i24,ir4)'
        System::Call 'gdi32::SelectObject(ir1,ir2)i.s'
        System::Call '*$4(i40,i.r6,i.r7,i0,i,i.s)' ; Grab size and bits-ptr AND init as BITMAPINFOHEADER
        System::Call 'gdi32::GetDIBits(ir1,ir3,i0,i0,i0,ir4,i0)' ; init BITMAPINFOHEADER
        System::Call 'gdi32::GetDIBits(ir1,ir3,i0,i0,i0,ir4,i0)' ; init BITMAPINFO
        System::Call 'gdi32::StretchDIBits(ir1,i0,i0,i${NEWSIZEW},i${NEWSIZEH},i0,i0,ir6,ir7,is,ir4,i0,i${SRCCOPY})'
        System::Call 'gdi32::SelectObject(ir1,is)'
        System::Free $4
    ${EndIf}
    System::Call 'gdi32::DeleteDC(ir1)'
    System::Call $9->2() ; IPicture->release()
${EndIf}
${NSD_CreateBitmap} 1u 1u ${NEWSIZEW} ${NEWSIZEH} ""
Pop $9
;Not required when the control size matches: ${NSD_AddStyle} $9 ${SS_CENTERIMAGE}
SendMessage $9 ${STM_SETIMAGE} ${IMAGE_BITMAP} $2
nsDialogs::Show
System::Call 'gdi32::DeleteObject(ir2)'
FunctionEnd

Function mypagestretchcreate_CTL
nsDialogs::Create 1018
Pop $2
${NSD_CreateBitmap} 0 1u 70% 50% ""
Pop $3
${NSD_AddStyle} $3 ${SS_REALSIZECONTROL}
File "/oname=$PLUGINSDIR\image.bmp" "${NSISDIR}\Contrib\Graphics\Header\win.bmp"
${NSD_SetImage} $3 "$PLUGINSDIR\image.bmp" $1
nsDialogs::Show
${NSD_FreeImage} $1
FunctionEnd 
```

# android - 如何在 Android 应用程序中添加 Facebook 分享按钮

> ID：13396372
> 
> 赞同：9
> 
> 时间：2012-11-15T11:13:55.430
> 
> 标签：android, facebook

我是 android 的初学者。我想在我的 android 应用程序中添加 FacebookShare 按钮。我在 2.2 中创建应用程序。请帮助我使用此代码

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("text/plain"); 
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,getResources().getStri‌​ng(R.string.title_activity_android_face_book_share));
emailIntent.putExtra(android‌​.content.Intent.EXTRA_TEXT,getResources().getString(R.string.title_activity_android_face_book_share));  
startActivity(emailIntent); 
```

我也使用以下链接[在 Android 中进行社交分享的最佳方式](https://stackoverflow.com/questions/4656641/best-way-for-social-sharing-in-android)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-15T11:50:17.267

```
 Intent shareIntent = new Intent(Intent.ACTION_SEND);
  shareIntent.setType("text/plain");
  shareIntent.putExtra(Intent.EXTRA_TEXT, "URLyouWantToShare");
  startActivity(Intent.createChooser(shareIntent, "Share...")); 
```

使用 ACTION_SEND Intent，添加您要分享的 URL。用户将获得一系列应用程序来接受分享意图，例如 facebook 等。

# ruby-on-rails-3 - 如何在 Rails 中传递引导变量

> ID：13396380
> 
> 赞同：2
> 
> 时间：2012-11-15T11:14:26.950
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我尝试将引导变量传递给 Rails 中的其他文件，但失败了。

我的`application.css.scss`样子是这样的：

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require_tree .
*/

/* Import own Vars */
@import 'myvars';

/* Import Twitter Bootstrap */
@import 'bootstrap';

/* Import own layout */
@import 'custom'; 
```

当我创建一个`$testVar: 100px;`in`_myvars.scss`并尝试在其中使用它时`custom.css.scss`它不起作用 - 页面无法加载并且我得到一个`Undefined variable: "$testVar".`-Error

它在直接定义变量时有效，`custom.css.scss`但我宁愿有一个包含所有变量的概述文件（就像我以前使用 TB 作为独立时一样）。我对 Rails 很陌生，所以请耐心等待 :)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:38:11.237

你必须删除`*= require_tree .`. 查看此[屏幕截图以](http://railscasts.com/episodes/268-sass-basics?view=asciicast)获取更多信息。

# sql - 在sql中获取月度报告

> ID：13396383
> 
> 赞同：0
> 
> 时间：2012-11-15T11:14:28.103
> 
> 标签：sql

我得到了我的数据库列日志，数据，类型如何从现在开始获取日志，并区分月份 f.ex：行

```
logs = 'error...'
data = 2012-11-05 11:24:08
type = 1 
```

....我想让他们在那个视图中

```
month     logs-count   type
January     100         1
January     100         2
February    160         1
February    120         2
 .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:22:06.740

试试这个，如果这些列在同一个表中

```
select monthname(data) as month,count(logs)as logs-count,type from table
 group by month 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:33:32.120

对于 mysql：

```
select monthname(data) as month, count(*) as logs-count, type
  from table
  group by month, type 
```

您需要按日期和类型分组才能每月获得多行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:28:35.467

试试这个：

```
select datename(month, data) as month count(logs)as logscount, type from table 
```

# sql-server - cte 上的 TSQL Maxrecursion

> ID：13396388
> 
> 赞同：0
> 
> 时间：2012-11-15T11:14:31.547
> 
> 标签：sql-server, tsql, stored-procedures, sql-server-2012, sql-server-2012-express

我收到此错误：

> 最大递归 100 在语句完成之前已经用完

当我运行此功能时：

```
 WITH allDays AS (

        SELECT @DateEarly AS date

        UNION ALL

        SELECT DATEADD(dd, 1, date) as date
        FROM allDays s  
        WHERE DATEADD(dd, 1, date) <= @DateLate

   )
    SELECT *
    from allDays 
    where dbo.isFestivo(date)>0 
```

我试图附加这个选项：

```
OPTION (MAXRECURSION 200); 
```

但我在“选项”字之前收到错误 156。你知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T11:25:03.260

您可能将选项放在错误的位置。它需要在 where 之后

```
WITH allDays AS (
    SELECT @DateEarly AS date
    UNION ALL
    SELECT DATEADD(dd, 1, date) as date
    FROM allDays s  
    WHERE DATEADD(dd, 1, date) <= @DateLate
)
SELECT *
from allDays 
where dbo.isFestivo(date)>0
option (maxrecursion 200); 
```

但是试试这个。会更快...

```
select DATEADD(d, number, @dateearly) as [date]
from master..spt_values 
where type='p'
and number<=datediff(d,@dateearly,@datelate)
and dbo.isFestivo(date)>0 
```

# android - 小路 。lineTo 仅绘制一半长度

> ID：13396389
> 
> 赞同：1
> 
> 时间：2012-11-15T11:14:31.287
> 
> 标签：android

有人可以帮我理解 path.lineTo(x,y) 是如何工作的吗？我正在尝试在手指绘画类型的应用程序中绘制一条简单的直线。这是我试过的一个例子：

```
 mPath.reset();
            mPath.moveTo(0, 0);
            mPath.lineTo(480, 800); 
```

但是这条线只从 0,0 到 240、400 - 当我在屏幕上移动手指时，总是只有一半的距离。（实际程序有 startX、startY 和 x,y 触摸坐标而不是 0,0 和 480,800）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:53:12.143

也许这段代码对你有用：

```
Paint p = new Paint(Paint.ANTI_ALIAS_FLAG);
Path mPath= new Path();
mPath.moveTo(0, 0);
mPath.lineTo(480, 800);
p.setColor(0xff800000);
canvas.drawPath(mPath,p); 
```

另外，(480, 800) 坐标，它还在你的屏幕内吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:56:03.650

这些`Path`命令完全按照您的预期工作，上面的命令应该在完全覆盖 480x800 屏幕的视图中从左上角到右下角画一条线。

检查以下内容：

*   视图覆盖所有屏幕
*   没有其他视图与它重叠
*   坐标相对于视图的左上角坐标。检查左上角的视图是否在屏幕的左上角

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T09:20:44.750

感谢 Goz 和其他帮助我解决此问题的人，结果表明 Paint 正在使用以下设置进行此操作：

> mPaint.setPathEffect(新 CornerPathEffect(1000))

当它被删除或设置为 null 时，lineTo 会一直运行。一开始只是没想到Paint会这样做，但是这种圆角效果可以缩短直线。

# javascript - HTML 和 Javascript 日历

> ID：13396391
> 
> 赞同：0
> 
> 时间：2012-11-15T11:14:48.987
> 
> 标签：javascript, html, hta

如何修复此日历？我真的很困惑制作后退按钮和制作日历表格参考，我必须每月更改“RsT”数字以等同于一个月的开始日？

**注意：**
- RsT：日历开始位置编号。
- mt：月数。
- dy：今天的
日期 - maxDate：月份的结束日期。
- newMth() 函数：构建日历。
- onBtnPress(i) 函数：按钮响应。
- aD：（第一个日期 - 1），实际上 = 0。
- CnT/CtX：用于计数。
- 它[]：元素 ID。
- mm[]：月份名称。

```
<HTML><HEAD>
<TITLE>Kalender Digital</TITLE>
<HTA:APPLICATION
APPLICATIONNAME="Calendar"
VERSION="1.0.2.1"
BORDER="THICK"
INNERBORDER="NO"
MAXIMIZEBUTTON="NO"
SCROLL="NO"
SINGLEINSTANCE="YES"
CONTEXTMENU="NO"
SELECTION="NO"/>
<STYLE TYPE='TEXT/CSS'>
TABLE{width:702px;height:350px;}
TD{font-family:arial;font-weight:bold;width:100px;height:50px;font-size:12pt;}
.header{font-family:arial;font-weight:bold;height:50px;font-size:26pt;color:orange;}
TD.dy{color:blue;}
TD.jm{color:green;}
TD.mg{color:red;}
BUTTON{width:100%;height:100%;cursor:pointer;}
</STYLE><META HTTP-EQUIV='MSThemeCompatible' CONTENT='YES'></HEAD>
<BODY TOPMARGIN='0' LEFTMARGIN='0'>
<TABLE BGCOLOR='#FFFFFF' BORDER='1' BORDERCOLOR='#000000' CELLSPACING='0px' CELLPADDING='0px' TABINDEX='0'>
<TR ALIGN='CENTER'><TD CLASS='header' COLSPAN='4' ID='dtl' STYLE='WIDTH:400px'></TD><TD COLSPAN='1'><BUTTON LANGUAGE='JavaScript' ONCLICK='onBtnPress(1)'>&lt;&lt;</BUTTON></TD><TD COLSPAN='1'><BUTTON>Today</BUTTON></TD><TD COLSPAN='1'><BUTTON LANGUAGE='JavaScript' ONCLICK='onBtnPress(0)'>&gt;&gt;</BUTTON></TD></TR>
<TR ALIGN='CENTER'><TD CLASS='dy'>Monday</TD><TD CLASS='dy'>Tuesday</TD><TD CLASS='dy'>Wednesday</TD><TD CLASS='dy'>Thursday</TD><TD CLASS='jm'>Friday</TD><TD CLASS='dy'>Saturday</TD><TD CLASS='mg'>Sunday</TD></TR>
<TR ALIGN='CENTER'><TD ID='aa' CLASS='dy'>-</TD><TD ID='ab' CLASS='dy'>-</TD><TD ID='ac' CLASS='dy'>-</TD><TD ID='ad' CLASS='dy'>-</TD><TD ID='ae' CLASS='jm'>-</TD><TD ID='af' CLASS='dy'>-</TD><TD ID='ag' CLASS='mg'>-</TD></TR>
<TR ALIGN='CENTER'><TD ID='ba' CLASS='dy'>-</TD><TD ID='bb' CLASS='dy'>-</TD><TD ID='bc' CLASS='dy'>-</TD><TD ID='bd' CLASS='dy'>-</TD><TD ID='be' CLASS='jm'>-</TD><TD ID='bf' CLASS='dy'>-</TD><TD ID='bg' CLASS='mg'>-</TD></TR>
<TR ALIGN='CENTER'><TD ID='ca' CLASS='dy'>-</TD><TD ID='cb' CLASS='dy'>-</TD><TD ID='cc' CLASS='dy'>-</TD><TD ID='cd' CLASS='dy'>-</TD><TD ID='ce' CLASS='jm'>-</TD><TD ID='cf' CLASS='dy'>-</TD><TD ID='cg' CLASS='mg'>-</TD></TR>
<TR ALIGN='CENTER'><TD ID='da' CLASS='dy'>-</TD><TD ID='db' CLASS='dy'>-</TD><TD ID='dc' CLASS='dy'>-</TD><TD ID='dd' CLASS='dy'>-</TD><TD ID='de' CLASS='jm'>-</TD><TD ID='df' CLASS='dy'>-</TD><TD ID='dg' CLASS='mg'>-</TD></TR>
<TR ALIGN='CENTER'><TD ID='ea' CLASS='dy'>-</TD><TD ID='eb' CLASS='dy'>-</TD><TD ID='ec' CLASS='dy'>-</TD><TD ID='ed' CLASS='dy'>-</TD><TD ID='ee' CLASS='jm'>-</TD><TD ID='ef' CLASS='dy'>-</TD><TD ID='eg' CLASS='mg'>-</TD></TR>
<TR ALIGN='CENTER'><TD ID='fa' CLASS='dy'>-</TD><TD ID='fb' CLASS='dy'>-</TD><TD ID='fc' CLASS='dy'>-</TD><TD ID='fd' CLASS='dy'>-</TD><TD ID='fe' CLASS='jm'>-</TD><TD ID='ff' CLASS='dy'>-</TD><TD ID='fg' CLASS='mg'>-</TD></TR>
</TABLE></BODY>
<SCRIPT LANGUAGE='JavaScript'>
dt = new Date()
it = ["aa", "ab", "ac", "ad", "ae", "af", "ag", "ba", "bb", "bc", "bd", "be", "bf", "bg", "ca", "cb", "cc", "cd", "ce", "cf", "cg", "da", "db", "dc", "dd", "de", "df", "dg", "ea", "eb", "ec", "ed", "ee", "ef", "eg", "fa", "fb", "fc", "fd", "fe", "ff", "fg"];
mm = ["January", "February", "March", "April", "May", "June", "July", "Agust", "September", "October", "November", "December"];
var mt = dt.getMonth();
var yr = dt.getFullYear();
dtl.innerHTML = mm[mt] + "&nbsp;&nbsp;" + yr
var RsT = 2;
var CnT = 0;
var aD = 0;
newMth();
function newMth () {
    var d2 = new Date(yr, (mt + 1), aD);
    maxDate = d2.getDate()
    while (CnT < maxDate) {
    aD = (aD + 1);
    RsT = (RsT+1)
    document.getElementById(it[RsT]).innerHTML = aD;
    CnT = (CnT + 1)};
}
function onBtnPress (i) {
    CnT = 0;
    aD = 0;
    CtX = 0;
    if (i == 0) {
    RsC = 28;
    while (document.getElementById(it[RsC]).innerHTML != "-" & RsC <= 41) {
        RsC = (RsC+1);
    }
    if (RsC < 35) {
        RsC = (RsC - 28)
    } else {
        RsC=(RsC-35)
    }
    RsT = (6 - (7 - RsC));
    if (mt <= 10) {
        mt = (mt + 1)
    } else {
        mt=0;yr=(yr+1);
    }
    } else if (i==1) {
        if (mt > 0) {
            mt = (mt - 1)
        } else {
            mt = 11;
            yr = (yr - 1);
        }
    }
    while (CtX < 41) {
        document.getElementById(it[CtX]).innerHTML = "-";
        CtX = (CtX + 1);
    }
    newMth();
    dtl.innerHTML = mm[mt] + "&nbsp;" + yr
}
</SCRIPT>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:27:15.277

本月的第一天是：

```
new Date('date_of_1st_day_of_some_month_in_some_year').getDay(); 
```

这将返回一个日期名称索引（星期日 == 0，星期一 == 1，...）。有了这些信息，应该很容易在月初循环遍历“空”天。

仅供参考，您可以通过添加`<!DOCTYPE html>`为文档的第一行来为您的 HTA 添加 HTML5 支持，然后`<meta http-equiv="x-ua-compatible" content="ie=9" />`在`title`. 所有样式表和指向它们的链接都应该在此之后`meta`。

# php - Twitter 引导模式弹出窗口显示大约一秒钟，然后消失

> ID：13396393
> 
> 赞同：0
> 
> 时间：2012-11-15T11:14:58.787
> 
> 标签：php, twitter-bootstrap, popup, modal-dialog

我在注册页面上使用 TB 2.0。我在注册页面底部添加了链接，以允许用户参考我们的条款等。

这是我正在使用的标记片段：

```
<div class="container">
    <!-- First 2 rows are modal elements -->
    <div class="row">
        <div class="span12">
            <div id="userAgreement" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="userAgreementLabel" aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 id="userAgreementLabel">User Agreement</h4>
                </div>
                <div class="modal-body">
                    <p><?php echo file_get_contents(url_for('@legal',true)); ?></p>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="span12">
            <div id="privacyPolicy" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="privacyPolicyLabel" aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 id="privacyPolicyLabel">Privacy Policy</h4>
                </div>
                <div class="modal-body">
                    <p><?php echo file_get_contents(url_for('@privacy', true)); ?></p>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                </div>
            </div>
        </div>
    </div>

    <h3 align="center">Sign up to Foobar</h3>
    <br />

    <div class="row">
        <div class="span5 offset1 gray-1px-rh-border">

            <form class="form-horizontal" action="#" method="post">
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Email</label>
                    <div class="controls">
                        <input type="text" id="inputEmail" placeholder="Email">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputUsername">Username</label>
                    <div class="controls">
                        <input type="text" id="inputUsername" placeholder="Username">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputPassword">Password</label>
                    <div class="controls">
                        <input type="password" id="inputPassword" placeholder="Password">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputConfirmPassword">Confirm Password</label>
                    <div class="controls">
                        <input type="password" id="inputConfirmPassword" placeholder="ConfirmPassword">
                    </div>
                </div>
                <div class="control-group">
                    <div class="controls">
                        <label class="checkbox">
                            <input type="checkbox" id="chk-agree">Agree Terms*
                        </label>
                        <button type="submit" class="btn btn-success" id="signup-button">Get Access</button>
                    </div>
                </div>
            </form>

        </div>

        <div class="span4">
            <div class="container shift-right">
            </div>
        </div>
    </div>

    <br />

    <div class="row">
        <div class="span10 offset1">
            <div class="sign-up-agreement">
                <small>*By signing up, you are indicating that you have read, understood and agree to our 
                   <a id="lpl1" href="#userAgreement"  data-toggle="modal">user agreement</a> and 
                   <a id="lpl2" href="#privacyPolicy" data-toggle="modal">privacy policy</a>.
                </small>
            </div>
        </div>    
    </div>

</div> 
```

弹出对话框暂时显示（大约一秒钟），在它消失之前，它似乎从下到上滚动（我不得不这样做几次，因为它发生得太快了）。对话框似乎从下向上滚动，我看到的最后一件事是带有标题的对话框标题，然后它消失了，页面仍然变暗 - 直到我点击屏幕。

**[[编辑]]**

在使用 Firebug 进行进一步调查后，我将问题缩小到与 javascript 有关。我注意到应用于元素的 #display# 样式属性（非常短暂）设置为`block`，然后很快（出于某种未知原因），#display# 属性设置为**none** - 然后导致对话框消失.

我在 firebug 控制台中手动将**display**属性设置为`block`，然后弹出对话框出现，并且表现正常。所以问题是这样的：**是什么导致显示属性在大约 1 秒后重置为“无”**？

**[[编辑2]]**

当我用`file_get_content()`两个弹出窗口的“hello world”和“hello 2”等简单文本替换函数调用时，它们按预期工作（即正确）。所以这肯定与`get_file_content()`函数中返回的 HTML 文本有关。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:24:04.480

有时这是由于多次包含 jQuery 造成的，请确保不是这种情况。

此外，您可以手动更改模态框的位置以确保它在屏幕上启动。您只需要更改边距。看看我的教程：[更改 twitter 引导位置](http://www.revillwebdesign.com/change-the-height-width-and-position-of-a-modal-in-twitter-bootstrap/)我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:47:52.810

最后，我通过将检索到的内容`file_get_contents()`放在**iframe**中解决了这个问题。不知道是否有更好的方法，但这是我发现唯一有效的方法。

# android - 在android中禁用浏览器的下载

> ID：13396397
> 
> 赞同：0
> 
> 时间：2012-11-15T11:15:06.730
> 
> 标签：android, android-browser, android-download-manager

我在我的 android 应用程序中使用 fennec（Morzilla 浏览器）。在此应用程序中，如果我选择禁用下载，它也必须禁用浏览器中的下载。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:59:32.720

您可以询问 Mozilla 团队是否提供 API 来控制这一点。我怀疑他们这样做。此外，还有很多很多其他适用于 Android 的浏览器，其中很少（如果有的话）会允许来自随机开发人员的随机应用单方面决定“禁用下载”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:04:01.773

我非常怀疑你能做到这一点。正如[CommonsWare](https://stackoverflow.com/users/115145/commonsware)所说，我怀疑 Mozilla 是否提供这样的 API。

另外，我真的不明白你是如何在你的应用程序中使用 Mozilla 的。启动 Intent 时，通常会提示用户从可以实现该特定请求的应用程序中进行选择，除非您将 Intent 指向应用程序的确切包。

也许有一种与设计相关的方法可以解决这个问题，可以为您节省大量时间和麻烦。

# wordpress - 在 wp 的自定义模板中显示带有分页的帖子

> ID：13396400
> 
> 赞同：-1
> 
> 时间：2012-11-15T11:15:40.563
> 
> 标签：wordpress

抱歉，如果我听起来有点天真。我是一个体面的 PHP 开发人员，最近一直在尝试学习 wordpress。谁能告诉我或指向一个教程，告诉我在带有分页的自定义模板上显示帖子的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:33:31.457

因为偶尔（或者大多数时候，我不确定）你可能会遇到永久链接冲突，因此如果你只是进行自定义`query_posts()`然后添加一个分页，并带有指向、、、的链接，`page-slug/page/2`我通常会设置分页作为参数。`page-slug/page/3``page-slug/page/n``$_GET`

这是一个示例代码：

```
<?php
/*  
    Template Name: Custom Loop Template
*/
get_header();

// Set up the paged variable
$paged = ( isset( $_GET['pg'] ) && intval( $_GET['pg'] ) > 0 )? intval( $_GET['pg'] ) : 1;
query_posts( array( 'post_type' => 'post', 'paged' => $paged, 'posts_per_page' => 1 ) );

?>
<?php if ( have_posts() ) : ?>
    <?php while( have_posts() ) : the_post(); ?>
        <div id="post-<?php echo $post->ID; ?>" <?php post_class(); ?>>
            <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
            <div class="post-excerpt">
                <?php the_excerpt(); ?>
            </div>
        </div>
    <?php endwhile; ?>
    <?php if ( $wp_query->max_num_pages > 1 ) : ?>
        <div class="pagination">
            <?php for ( $i = 1; $i <= $wp_query->max_num_pages; $i ++ ) { 
                $link = $i == 1 ? remove_query_arg( 'pg' ) : add_query_arg( 'pg', $i );
                echo '<a href="' . $link . '"' . ( $i == $paged ? ' class="active"' : '' ) . '>' . $i . '</a>';
            } ?>
        </div>
    <?php endif ?>
<?php else : ?>
    <div class="404 not-found">
        <h3>Not Found</h3>
        <div class="post-excerpt">
            <p>Sorry, but there are no more posts here... Please try going back to the <a href="<?php echo remove_query_arg( 'pg' ); ?>">main page</a></p>
        </div>
    </div>
<?php endif;

// Make sure the default query stays intact
wp_reset_query();

get_footer();
?> 
```

这将创建一个自定义页面模板，称为`Custom Loop Template`并将显示最新帖子，每页 1 个。它将在底部有一个基本分页，从 1 到该查询的最大页数。

当然，这只是一个非常基本的示例，但应该足以让您弄清楚其余部分。

# ruby-on-rails-3 - 登录表单不启动用户会话

> ID：13396402
> 
> 赞同：0
> 
> 时间：2012-11-15T11:15:48.147
> 
> 标签：ruby-on-rails-3, login, twitter-bootstrap, devise

我在我的 Rails 应用程序中使用 Devise 和 Bootstrap

在 Bootstrap 导航栏中，我有这个登录表单：

```
<form class="navbar-form pull-right">
    <% if current_user %>
        <b><%= link_to current_user.name, current_user %></b>
        <%= link_to "Sign out", destroy_user_session_path, :method => :delete %>
    <% else %>  
        <input class="span2" type="text" placeholder="Email">
        <input class="span2" type="password" placeholder="Password">
        <button type="submit" class="btn"><%= link_to "Sign in", new_user_session_path %></button>

        <button type="submit" class="btn"><%= link_to "Register", new_user_registration_path %></button>
    <% end %>
</form> 
```

如果我输入电子邮件/密码并点击“登录”，页面会刷新，但用户会话不会启动（用户尚未登录）。我在这个表格中做错了吗？

我可以使用设计页面登录，`/sign_in`但我也希望能够在我的导航栏中登录 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:55:01.093

您的表单没有发布到任何内容，那些 link_to 标签并没有真正做任何事情。链接与输入不同。

相反，您需要这样的表格：

```
<% if current_user %>
   <%= link_to "Sign out", destroy_user_session_path, :method => :delete %>
<% else %>  
   <%= form_for("user", :url => new_user_session_path, :html => { :class => "navbar-form pull-right"}) do |f|%>
     <%= f.text_field :email, :class=>"span2"%>
     <%= f.text_field :password, :class=>"span2"%>
     <%= f.submit "Sign in", :class => "btn"%>
   <% end %>
   <%= link_to "Register", new_user_registration_path, :class => "btn" %>
<% end %> 
```

您需要单独的表格进行注册，我建议您只需链接到另一个注册页面。

# eclipse - Eclipse git 和 ssh-agent

> ID：13396405
> 
> 赞同：7
> 
> 时间：2012-11-15T11:16:04.320
> 
> 标签：eclipse, git, egit, ssh-agent

我将 eclipse 与 git (egit) 一起使用。

我想使用我的 ssh-agent，这样我就可以从 Eclipse 推送。有人知道如何设置 egit 以使用 ssh-agent 吗？

背景：我无法将我的密钥上传到 Eclipse，因为我的密钥在密码棒上。我的 ssh-agent 可以在 opensc 的帮助下加载。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-18T15:48:25.607

在您的 Eclipse 启动脚本或`.profile`（或任何地方）`export GIT_SSH=/usr/bin/ssh`在启动 Eclipse 之前添加。然后 Eclipse 使用使用 ssh 代理的默认 ssh，即使您的密钥在智能卡上，您也可以在 Eclipse 中运行拉取和推送命令。

编辑： GIT_SSH 由 eclipse 的 egit 解释，但也由独立的 git 解释。将其`/usr/bin/ssh`设置为独立 git 的默认值，因此只有 egit 会改变它的行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T13:40:19.003

2016 年 6 月更新（4 年后）：[Gunnar Wagenknecht现在](https://stackoverflow.com/users/275347/gunnar-wagenknecht)[在评论](https://stackoverflow.com/questions/13396405/eclipse-git-and-ssh-agent/13398657#comment63461576_13398657)中提到：

> 现在可以在[Eclipse Neon](https://projects.eclipse.org/releases/neon)中使用 project [`eclipseguru/eclipse-jsch-agent-proxy`](https://github.com/eclipseguru/eclipse-jsch-agent-proxy)，一个 Eclipse ssh-agent 和 Pageant 支持。

[![https://raw.githubusercontent.com/eclipseguru/eclipse-jsch-agent-proxy/gh-pages/images/ssh-agent-preferences.png](../Images/49df820a8506cae418adfde6880646b6.png)](https://i.stack.imgur.com/iY1RK.png)

* * *

`GIT_SSH`旧 Eclipse 版本的一种解决方法是通过设置环境变量来使用本机 OS SSH 客户端而不是 Eclipse 内置客户端：

```
export GIT_SSH=/usr/bin/ssh 
```

（请参阅[EGit SSH 配置](http://wiki.eclipse.org/EGit/User_Guide#Eclipse_SSH_Configuration)和[EGit 常见问题解答，SSH 配置](http://wiki.eclipse.org/EGit/FAQ#SSH_config)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-07T19:40:02.193

没门！这么多年的日食，仍然无法使用 a`smartcards`和`ssh`/ `ssh-agent`？真的很失望回到日食..

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=179924](https://bugs.eclipse.org/bugs/show_bug.cgi?id=179924)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-19T03:57:17.693

结帐[cac-agent](https://github.com/MoebiusSolutions/cac-agent)。它包括`cac-ssl-relay`，它可以作为来自任何需要 CAC 访问的客户端应用程序（包括 git/eclipse）的通用隧道。

# objective-c - @synthesize 未显示 Xcode 4.5 中自动生成的属性

> ID：13396406
> 
> 赞同：1
> 
> 时间：2012-11-15T11:16:10.857
> 
> 标签：objective-c, xcode, cocoa-touch, synthesize

我有 Xcode 4.5。我观察到一个非常奇怪的行为。在以前版本的 Xcode 中，每当**我控制将出口从 nib 拖动到 .h 文件**时，它会自动**生成 getter 和 setter**，并且 `@synthesize`属性会清楚地显示在 .m 文件中。但是，如果我**在 Xcode 4.5 中做同样的事情**，`@synthesize` **属性就不会出现**。结果，当我尝试在 Xcode 4.3 或更低版本中运行使用 Xcode 4.5 创建的项目时，它会显示错误。当我手动编写 @synthesize 时，它​​工作得非常好。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:20:24.950

您不再需要`@synthesize`属性，这是在编译期间由编译器添加到您的代码中的。

这是 Apple 对编译器的最新改进中的一项新功能。

如果你愿意，你可以`@synthesize`，它只需要更长的时间并且有额外的代码行。默认情况下，名为`myProperty`, 的属性将自动具有名为 的 iVar `_myProperty`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:20:22.663

Xcode 4.5 包含更新版本的 clang，即编译器，它能够自动合成属性。所以你的观察是预期的行为。如果您想添加`@synthesize`指令，您必须手动执行此操作或使用旧版本的 Xcode。

# android - 应用程序从 web 服务加载图像。应用程序在 android 中等待很多

> ID：13396410
> 
> 赞同：0
> 
> 时间：2012-11-15T11:16:20.807
> 
> 标签：android, web-services, user-interface, android-asynctask

我正在开发一个 android 应用程序，它使用在 .ashx 请求处理程序中开发的 Web 服务。

*   应用程序等待很多并在第一次启动 aap 时显示黑屏。
*   有时它会给出错误 outofMemory VM 预算。

这是一些代码。

```
 public class Home extends Activity implements AdapterView.OnItemClickListener {
        /** Called when the activity is first created. */

        Context context = Home.this;
        HashMap<String, String> map = new HashMap<String, String>();
        ArrayList<String> BookTitle = new ArrayList<String>();
        ArrayList<String> BookCoverPhotos = new ArrayList<String>();

        URL bookImageURL = null;
        Bitmap bitMapImage = null;

        View homeTabLayout;
        View reviewLayout;
        ArrayList<String> ImageUrl = new ArrayList<String>();
        ImageButton btnBack;

        // XML Parsing
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        // All static variables
        static final String URL = "http://www.my_url_goes_here.com/rxxxxxxxandler.ashx";
        // XML node keys
        static final String KEY_ITEM = "Book"; // parent node
        static final String KEY_ID = "BookID";
        static final String KEY_BOOKTITLE = "BookTitle";
        static final String KEY_BOOKCODE = "BookCode";
        static final String KEY_BOOKIMAGE = "BookImage";

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.home_activity);
            // Get XML Data in a Array List

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL, "Imam Ali"); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);

            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                Node node = nl.item(i);
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                BookTitle.add(parser.getValue(e, KEY_BOOKTITLE));
                BookCoverPhotos.add("http://shiaislamicbooks.com/books_Snaps/"+parser.getValue(e, KEY_BOOKCODE)+"/1.jpg");
                Log.i("URLs", BookCoverPhotos.toString());
                // String
                // imgUrl="http://shiaislamicbooks.com/books_Snaps/"+parser.getValue(e,
                // KEY_BOOKCODE);
                map.put(KEY_BOOKTITLE, parser.getValue(e, KEY_BOOKTITLE));
                map.put(KEY_BOOKCODE, parser.getValue(e, KEY_BOOKCODE));
                map.put(KEY_BOOKIMAGE, parser.getValue(e, KEY_BOOKIMAGE));

                // adding HashList to ArrayList
                menuItems.add(map);

                Log.i("Array List", menuItems.toString());
            }

            homeTabLayout = findViewById(R.id.rel_HomeLayout);
            reviewLayout = findViewById(R.id.scroll_ReviewLayout);
            reviewLayout.setVisibility(View.GONE);

            btnBack = (ImageButton) findViewById(R.id.btnBack);
            btnBack.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    reviewLayout.setVisibility(View.GONE);
                    homeTabLayout.setVisibility(View.VISIBLE);

                }
            });

            final GridView gridView = (GridView) findViewById(R.id.gridview);
            gridView.setAdapter(new ImageAdapter(this));
            gridView.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                        long arg3) {

                }
            });

       }
        public class ImageAdapter extends BaseAdapter {
            private Context context;
            public ImageAdapter(Context c) {
                context = c;
            }

            // ---returns the number of images---
            public int getCount() {

                return BookCoverPhotos.size();
            }

            // ---returns the ID of an item---
            public Object getItem(int position) {
                return position;
            }

            public long getItemId(int position) {
                return position;
            }
            // ---returns an ImageView view---
            public View getView(int position, View convertView, ViewGroup parent) {
                // ImageView bmImage;
                ImageView img_BookCoverPhoto;
                img_BookCoverPhoto = new ImageView(context);
                LayoutInflater inflater = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                View row = inflater.inflate(R.layout.grid_style, parent, false);
                TextView txt_BooksTitle = (TextView) row
                        .findViewById(R.id.txt_BookTitle);
                txt_BooksTitle.setText(BookTitle.get(position) + "");
                img_BookCoverPhoto = (ImageView) row
                        .findViewById(R.id.imgBookCover);
                try {
                    bookImageURL = new URL(
                            BookCoverPhotos.get(position));
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                    Toast.makeText(context, "Network Error", Toast.LENGTH_LONG).show();
                    Log.i("URL", "ERROR");
                }

                try {
                    bitMapImage = BitmapFactory.decodeStream(bookImageURL
                            .openConnection().getInputStream());
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Toast.makeText(context, "Bitmap Error", Toast.LENGTH_LONG).show();
                    Log.i("BITMAP", "ERROR");
                }

                img_BookCoverPhoto.setImageBitmap(bitMapImage);

                return row;
            }
        }

    } 
```

还有一件事要告诉大家，我正在使用[本](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)教程中的 XML 解析。

*   我的应用程序中是否有任何多余的不需要的代码。
*   有什么方法可以加载第一个基本 UI，然后应用程序应该开始从 Web 服务器下载数据（即位图中的图像和文本数据）。
*   并建议我应该使用 AsyncTask，请提供一些有关 AsyncTask 的基本教程的链接。

请提供带有一些描述的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T11:27:08.363

Use `Asynctask` to perform network operations like fetching data from server. All the network hand shake can be done in `doInBackground()` of AsyncTask class. UI updations can be performed in `onPostExecute()`

[Example](https://stackoverflow.com/questions/9671546/asynctask-android-example)

[Study](http://developer.android.com/reference/android/os/AsyncTask.html)

# django - 博客中的语法突出显示，如 Sublime Text 2

> ID：13396411
> 
> 赞同：2
> 
> 时间：2012-11-15T11:16:24.543
> 
> 标签：django, sublimetext2, sublimetext

我有博客，我想在 sublimetext 编辑器上显示代码，我也想选择语言，它会根据语言改变颜色。

![在此处输入图像描述](../Images/c8232b2d5a84993018d09a028c5d641d.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:16:53.060

您可以使用[ExportHtml](https://github.com/facelessuser/ExportHtml) sublime 插件将语法突出显示的代码导出为 html 并将其粘贴到您的博客中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:23:51.590

也许看看： [http ://code.google.com/p/django-syntax-highlight/](http://code.google.com/p/django-syntax-highlight/)

根据您的问题，它不是“嵌入 SublimeText”，但似乎提供了一个库，该库提供了一些不错的语法突出显示功能。它使用[http://pygments.org/](http://pygments.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:13:34.737

Sublime Text 2 不是 Javascript 编辑器 - 您不能将其嵌入网页中。

**进行编辑 - 您可以嵌入的内容：**

王牌[http://ace.ajax.org/](http://ace.ajax.org/)

还有更多：[http ://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors](http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors)

**对于视图 - 语法高亮**

使用 Google 代码美化[http://code.google.com/p/google-code-prettify/](http://code.google.com/p/google-code-prettify/)

# icefaces - 如何下载 ICEfaces-1.7.0 Netbeans 插件？

> ID：13396412
> 
> 赞同：0
> 
> 时间：2012-11-15T11:16:26.140
> 
> 标签：icefaces, icefaces-3, icefaces-1.8, icefaces-2

请帮助我找到**ICEfaces-1.7.0** Netbeans 插件。在官方网站我可以在下载列表中看到它，但没有任何下载链接。

您可以在以下链接中看到它 [http://www.icesoft.org/java/downloads/detail-1-8.jsf](http://www.icesoft.org/java/downloads/detail-1-8.jsf)

IDE 工具集成版本 3.1.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:14:31.160

你可以看看下面的链接 [http://www.icesoft.org/JForum/posts/list/21402.page#75203](http://www.icesoft.org/JForum/posts/list/21402.page#75203)

# php - 通过 PHP 下载图像并压缩它们

> ID：13396414
> 
> 赞同：1
> 
> 时间：2012-11-15T11:16:31.530
> 
> 标签：php, javascript, zip

我有几个链接到图像的 URL，我希望能够用这些图像制作一个 .zip 文件。基本上，用户可以下载自己的图像。

图像不在我的服务器上，有没有办法以每个用户使用自己的带宽的方式压缩这些文件？

如果不是，这个问题的最佳解决方案是什么？（PHP 或 Javascript）

编辑：为什么要投 2 票？我不是要代码。我有 2 个问题：1) 我可以在不使用服务器带宽的情况下下载图像并压缩它们吗？2）如果不是，最好的解决方案是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T11:29:33.870

1.要下载图片，如果[http://example.com/image.php](http://example.com/image.php)将图片保存为 test.jpg

a) 如果您将 allow_url_fopen 设置为 true：

```
$url = 'http://example.com/image.php';
$img = '/tempfolder/test.jpg';
file_put_contents($img, file_get_contents($url)); 
```

b) 其他使用 cURL：

```
$ch = curl_init('http://example.com/image.php');
$fp = fopen('/tempfolder/test.jpg', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

2.要压缩所有文件，您可以使用[ziparchive](http://www.php.net/manual/en/class.ziparchive.php)创建 zip。

```
$files = array('test.jpg', 'test1.jpg');
$zipname = 'file.zip';
$zip = new ZipArchive;
$zip->open($zipname, ZipArchive::CREATE);
foreach ($files as $file) {
    $zip->addFile($file);
}
$zip->close(); 
```

3.要流式传输 zip 文件，请使用以下行，

```
$zipfilename = 'file.zip';
header('Content-Type: application/zip');
header('Content-disposition: attachment; filename=file.zip');
header('Content-Length: ' . filesize($zipfilename)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:28:55.120

JS 可以通过使用 ajax 下载图像（[这里](http://www.webdeveloper.com/forum/showthread.php?249163-Getting-binary-data.-Lost-of-128-chars)有一些关于使用 ajax 下载二进制数据的想法）和一些 JS ZIP 库（例如[http://stuartk.com/jszip/](http://stuartk.com/jszip/)）来打包数据 - 然后没有服务器带宽将会被使用。

另一种可能性是将图像下载到服务器（例如使用[cURL](http://www.php.net/manual/en/ref.curl.php)），压缩它们（例如使用[ZipArchive](http://www.php.net/manual/en/class.ziparchive.php)类）并发送到客户端 - 此解决方案使用服务器带宽。

# spring - JBoss 7.1 最终注册弹簧模块

> ID：13396416
> 
> 赞同：0
> 
> 时间：2012-11-15T11:16:34.590
> 
> 标签：spring, jboss, osgi, osgi-bundle

我想在我的 JBoss 7.1 服务器中将 org.springframework.context-3.0.2.RELEASE.jar 注册为模块，但启用它时出现此错误：http: [//pastie.org/5381730](http://pastie.org/5381730)

```
11:45:44,423 ERROR [org.jboss.osgi.framework.internal.FrameworkEventsPlugin] (MSC service thread 1-8) Framework ERROR: org.osgi.framework.BundleException: Cannot resolve bundle resModule: [org.springf
ramework.context:3.0.2.RELEASE]
        at org.jboss.osgi.framework.internal.ResolverPlugin.resolve(ResolverPlugin.java:157) [jbosgi-framework-core-1.1.8.Final.jar:1.1.8.Final]
        at org.jboss.osgi.framework.internal.AbstractBundleState.ensureResolved(AbstractBundleState.java:551) [jbosgi-framework-core-1.1.8.Final.jar:1.1.8.Final]
        at org.jboss.osgi.framework.internal.HostBundleState.startInternal(HostBundleState.java:211) [jbosgi-framework-core-1.1.8.Final.jar:1.1.8.Final]
        at org.jboss.osgi.framework.internal.AbstractBundleState.start(AbstractBundleState.java:494) [jbosgi-framework-core-1.1.8.Final.jar:1.1.8.Final]
        at org.jboss.as.osgi.deployment.BundleStartTracker$1.processService(BundleStartTracker.java:144) [jboss-as-osgi-service-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.osgi.deployment.BundleStartTracker$1.transition(BundleStartTracker.java:119) [jboss-as-osgi-service-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl.invokeListener(ServiceControllerImpl.java:1416) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl.access$2700(ServiceControllerImpl.java:49) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$ListenerTask.run(ServiceControllerImpl.java:1954) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_07]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_07]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]
Caused by: org.jboss.osgi.resolver.XResolverException: Unable to resolve Module[org.springframework.context:3.0.2.RELEASE]: missing requirement [Module[org.springframework.context:3.0.2.RELEASE]] pack
age; (&(package=org.springframework.beans)(version>=3.0.2)(!(version>=3.0.3)))
        at org.jboss.osgi.resolver.felix.FelixResolver.resolveInternal(FelixResolver.java:117) [jbosgi-resolver-felix-1.0.13.Final.jar:1.0.13.Final]
        at org.jboss.osgi.resolver.spi.AbstractResolver.resolve(AbstractResolver.java:149) [jbosgi-resolver-spi-1.0.13.Final.jar:1.0.13.Final]
        at org.jboss.osgi.framework.internal.ResolverPlugin.resolve(ResolverPlugin.java:155) [jbosgi-framework-core-1.1.8.Final.jar:1.1.8.Final]
        ... 11 more

11:45:44,443 ERROR [org.jboss.as.osgi] (MSC service thread 1-8) JBAS011900: Cannot start bundle: org.springframework.context:3.0.2.RELEASE: org.osgi.framework.BundleException: Cannot resolve bundle: o
rg.springframework.context:3.0.2.RELEASE
        at org.jboss.osgi.framework.internal.HostBundleState.startInternal(HostBundleState.java:212) [jbosgi-framework-core-1.1.8.Final.jar:1.1.8.Final]
        at org.jboss.osgi.framework.internal.AbstractBundleState.start(AbstractBundleState.java:494) [jbosgi-framework-core-1.1.8.Final.jar:1.1.8.Final]
        at org.jboss.as.osgi.deployment.BundleStartTracker$1.processService(BundleStartTracker.java:144) [jboss-as-osgi-service-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.osgi.deployment.BundleStartTracker$1.transition(BundleStartTracker.java:119) [jboss-as-osgi-service-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl.invokeListener(ServiceControllerImpl.java:1416) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl.access$2700(ServiceControllerImpl.java:49) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$ListenerTask.run(ServiceControllerImpl.java:1954) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_07]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_07]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]

11:45:44,443 ERROR [org.springframework.context] (Thread-67) FrameworkEvent ERROR: org.apache.felix.log.LogException: org.osgi.framework.BundleException: Cannot resolve bundle resModule: [org.springfr
amework.context:3.0.2.RELEASE]
        at org.jboss.osgi.framework.internal.ResolverPlugin.resolve(ResolverPlugin.java:157)
        at org.jboss.osgi.framework.internal.AbstractBundleState.ensureResolved(AbstractBundleState.java:551)
        at org.jboss.osgi.framework.internal.HostBundleState.startInternal(HostBundleState.java:211)
        at org.jboss.osgi.framework.internal.AbstractBundleState.start(AbstractBundleState.java:494)
        at org.jboss.as.osgi.deployment.BundleStartTracker$1.processService(BundleStartTracker.java:144)
        at org.jboss.as.osgi.deployment.BundleStartTracker$1.transition(BundleStartTracker.java:119)
        at org.jboss.msc.service.ServiceControllerImpl.invokeListener(ServiceControllerImpl.java:1416)
        at org.jboss.msc.service.ServiceControllerImpl.access$2700(ServiceControllerImpl.java:49)
        at org.jboss.msc.service.ServiceControllerImpl$ListenerTask.run(ServiceControllerImpl.java:1954)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_07]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_07]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]
Caused by: org.apache.felix.log.LogException: org.jboss.osgi.resolver.XResolverException: Unable to resolve Module[org.springframework.context:3.0.2.RELEASE]: missing requirement [Module[org.springfra
mework.context:3.0.2.RELEASE]] package; (&(package=org.springframework.beans)(version>=3.0.2)(!(version>=3.0.3)))
        at org.jboss.osgi.resolver.felix.FelixResolver.resolveInternal(FelixResolver.java:117)
        at org.jboss.osgi.resolver.spi.AbstractResolver.resolve(AbstractResolver.java:149)
        at org.jboss.osgi.framework.internal.ResolverPlugin.resolve(ResolverPlugin.java:155)
        ... 11 more

11:45:44,488 INFO  [org.jboss.as.server] (HttpManagementService-threads - 6) JBAS018559: Deployed "org.springframework.context-3.0.2.RELEASE.jar"
11:46:14,314 ERROR [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015892: Deployment unit processor org.jboss.as.jpa.processor.PersistenceProviderProcessor@66a91604 unexpectedly threw a
n exception during undeploy phase INSTALL of deployment "org.springframework.context-3.0.2.RELEASE.jar": java.lang.NullPointerException
        at org.jboss.as.jpa.processor.PersistenceProviderProcessor.allDeploymentModuleClassLoaders(PersistenceProviderProcessor.java:138)
        at org.jboss.as.jpa.processor.PersistenceProviderProcessor.undeploy(PersistenceProviderProcessor.java:122)
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.safeUndeploy(DeploymentUnitPhaseService.java:167) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.stop(DeploymentUnitPhaseService.java:161) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StopTask.stopService(ServiceControllerImpl.java:1911) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StopTask.run(ServiceControllerImpl.java:1874) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_07]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_07]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07] 
```

我不确定到底出了什么问题。但是我在 jboss 管理部署中导入了许多 .jar 文件，只有一些 spring 库无法启动，并且错误不清楚，与 osgi 有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:42:45.777

我不知道为什么，但是在我添加 com.springsource.org.apache.commons.logging-1.1.1.jar 作为注册模块后，其他 spring 库可以正常工作。

# .net - Razor 在视图中将枚举转换为 int

> ID：13396424
> 
> 赞同：31
> 
> 时间：2012-11-15T11:17:13.880
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, razor

我有一个剃刀的看法。我有一条线像吹

```
<option value='@{(Int16)PhoneType.Work}'>@PhoneType.Work</option> 
```

这是选择列表/下拉列表中的一个选项在此我有一个枚举 PhoneType。对于提交的文本 @PhoneType.Work 工作正常，但对于值字段 @{(Int16)PhoneType.Work 不起作用

我该怎么做才能在 value 字段中获取枚举的整数值

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-08-01T08:01:21.120

这种语法应该可以解决问题（注意 () 而不是 {}）：

```
<option value='@( (Int16) PhoneType.Work )'>@PhoneType.Work</option> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:43:02.270

Why not have another field on your viewModel that is an integer

```
public WorkId {get {return (int)Work; } 
```

and use this in your view

```
<option value='@PhoneType.WorkId'>@PhoneType.Work</option> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-17T21:12:01.967

我们可以使用 ChangeType 函数，如下所示。希望这对将来的某人有所帮助。

```
<option value=@Convert.ChangeType(PhoneType.Work, PhoneType.Work.GetTypeCode())>@PhoneType.Work</option> 
```

或者

```
<option value=@Convert.ChangeType(PhoneType.Work, typeof(int))>@PhoneType.Work</option> 
```

# java - 双屏应用

> ID：13396426
> 
> 赞同：5
> 
> 时间：2012-11-15T11:17:18.633
> 
> 标签：java, swing, multiple-monitors

我必须以双屏模式运行应用程序。如何在两个屏幕上作为独立窗口运行应用程序但共享相同的应用程序模型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T11:46:13.800

如果我没记错的话，这个例如可以帮助你。首先将您的框架放置在每个屏幕设备上。

```
frame1.setLocation(pointOnFirstScreen);
frame2.setLocation(pointOnSecondScreen); 
```

最大化：

```
frame.setExtendedState(Frame.MAXIMIZED_BOTH); 
```

工作示例：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Frame;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Point;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class GuiApp1 {
protected void twoscreen() {
    Point p1 = null;
    Point p2 = null;
    for (GraphicsDevice gd : GraphicsEnvironment.getLocalGraphicsEnvironment ().getScreenDevices()) {
        if (p1 == null) {
            p1 = gd.getDefaultConfiguration().getBounds().getLocation();
        } else if (p2 == null) {
            p2 = gd.getDefaultConfiguration().getBounds().getLocation();
        }
    }
    if (p2 == null) {
        p2 = p1;
    }
    createFrameAtLocation(p1);
    createFrameAtLocation(p2);
 }

 private void createFrameAtLocation(Point p) {
    final JFrame frame = new JFrame();
    frame.setTitle("Test frame on two screens");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel panel = new JPanel(new BorderLayout());
    final JTextArea textareaA = new JTextArea(24, 80);
    textareaA.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
    panel.add(textareaA, BorderLayout.CENTER);
    frame.setLocation(p);
    frame.add(panel);
    frame.pack();
    frame.setExtendedState(Frame.MAXIMIZED_BOTH);
    frame.setVisible(true);
 }

 public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        public void run() {
            new GuiApp1().twoscreen();
        }
    });
 }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:19:55.657

你需要看看[GraphicsDevice](http://download.oracle.com/javase/6/docs/api/java/awt/GraphicsDevice.html) API，你可以在那里找到一个很好的例子。

**来自甲骨文：**

> 在多屏幕环境中，GraphicsConfiguration 对象可用于在多个屏幕上呈现组件。以下代码示例演示了如何为 GraphicsEnvironment 中每个屏幕设备上的每个 GraphicsConfiguration 创建一个 JFrame 对象：

```
GraphicsEnvironment ge = GraphicsEnvironment.
   getLocalGraphicsEnvironment();
   GraphicsDevice[] gs = ge.getScreenDevices();
   for (int j = 0; j < gs.length; j++) { 
      GraphicsDevice gd = gs[j];
      GraphicsConfiguration[] gc =
        gd.getConfigurations();
      for (int i=0; i < gc.length; i++) {
         JFrame f = new
         JFrame(gs[j].getDefaultConfiguration());
         Canvas c = new Canvas(gc[i]); 
         Rectangle gcBounds = gc[i].getBounds();
         int xoffs = gcBounds.x;
         int yoffs = gcBounds.y;
           f.getContentPane().add(c);
           f.setLocation((i*50)+xoffs, (i*60)+yoffs);
         f.show();
      }
} 
```

# asp.net - 应及时请求使用 WCF 减慢 Web 应用程序

> ID：13396432
> 
> 赞同：1
> 
> 时间：2012-11-15T11:17:36.577
> 
> 标签：asp.net, wcf, wcf-data-services

我是 WCF 的新手，我有使用 WCF 服务作为数据访问层的 Web 应用程序。我正在使用 wcf 服务库并在 IIS7 上托管它。它适用于少数初始服务调用，但会挂起应用程序以供进一步请求。当我重置 IIS 时，它又可以正常工作一段时间了。下面是 web app 的 web.config 中的服务配置

```
 <system.serviceModel>
<bindings>
  <wsHttpBinding>
    <binding name="WSHttpBinding_IRoaster" closeTimeout="00:10:00"
      openTimeout="00:01:00" receiveTimeout="00:02:00" sendTimeout="00:03:00"
      bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="524288" maxReceivedMessageSize="199999488" messageEncoding="Text"
      textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
               <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
               <reliableSession ordered="true" inactivityTimeout="00:10:00"
        enabled="false" />
               <security mode="Message">
        <transport clientCredentialType="Windows" proxyCredentialType="None"
          realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
          algorithmSuite="Default" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<client>
  <endpoint address="http://asdf.com/RoasterService/RoasterService.Roaster.svc"
    binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IRoaster"
    contract="RoasterService.IRoaster" name="WSHttpBinding_IRoaster">
    <identity>
      <dns value="localhost" />
    </identity>
  </endpoint>
</client> 
```

如果我评论所有的 wcf 调用，那么对于虚拟值应用程序是否可以正常工作。请提出适当的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:32:44.343

您可能没有在请求结束时释放 WCF 客户端实例。查看[这篇文章，了解与 WCF 客户端合作时遇到的问题。](http://www.codeproject.com/Articles/74129/The-Proper-Use-and-Disposal-of-WCF-Channels-or-Com)

# iphone - 在 UITextField 中输入文本时如何删除默认声音？

> ID：13396433
> 
> 赞同：0
> 
> 时间：2012-11-15T11:17:39.843
> 
> 标签：iphone, ios

当我们输入文本时，`UITextField`我们在输入文本时会听到声音，如何删除/禁用该默认声音（使用代码）并添加其他自定义声音？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:38:05.460

您无法使用任何公共 API 更改默认键盘声音。

但是，您可以，但这是一个非常丑陋的解决方案，拦截 UITextField 的委托并在输入新字符时播放声音。不过我不推荐它。

# objective-c - 将 UIImages 拖到选定区域

> ID：13396434
> 
> 赞同：0
> 
> 时间：2012-11-15T11:17:51.403
> 
> 标签：objective-c, ios, xcode, uigesturerecognizer, uipangesturerecognizer

新手 obj-c 问题。

我的任务是为 iPad 进行视觉表现测试。在视图中，我有三个 UIImages（带有测试问题答案的图像）将拖到区域以寻求答案。如果选择了正确的图像，那么它需要留在这个区域，如果没有 - 它会回到起始位置。如果用户停止在区域内拖动而不是回答它也需要回到开始位置。我试图实现这一点：http: [//www.cocoacontrols.com/platforms/ios/controls/tkdragview](http://www.cocoacontrols.com/platforms/ios/controls/tkdragview)但这对我来说太难了，因为我是一个超级新手。

我通过 PanRecognizer 实现了简单的图像拖动，所以每三个图像拖动

```
 -(IBAction)controlPan:(UIPanGestureRecognizer *)recognizer {
CGPoint translation = [recognizer translationInView:self.view];
recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
} 
```

如果我以正确的方式思考，我需要设置 CGPoint 的起点和终点坐标，然后自定义 Pan Gestures 方法？如果不正确，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:55:08.243

您可以考虑这三种方法，也许这些对您来说更容易：

```
– touchesBegan:withEvent:
– touchesMoved:withEvent:
– touchesEnded:withEvent: 
```

详细的演示`– touchesBegan:withEvent:`是：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    UITouch *touched = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touched.view];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
    UITouch *touched = [[event allTouches] anyObject];
    // Here I suppose self.imageView contains the image user is dragging.
    CGPoint location = [touch locationInView:touched.view];
    // Here the check condition is the image user dragging is absolutely in the answer area.
    if (CGRectContainsRect(self.answerArea.frame, self.imageView.frame)) {
        // set transition to another UIViewController
    } else {
        self.imageView.center = location;    // Here I suppose you just move the image with user's finger.
    }
} 
```

这是此[UIResponder 类参考的 Apple 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIResponder_Class/Reference/Reference.html)

# powershell - 无法从 Powershell 脚本调用 pdflatex.exe 或 latex.exe

> ID：13396435
> 
> 赞同：2
> 
> 时间：2012-11-15T11:18:17.947
> 
> 标签：powershell, miktex

我正在尝试在 powershell 脚本中的文件上调用 pdflatex.exe，因此：

```
 Out-File -FilePath C:\path\to\file\foo.txt -InputObject $bar -Encoding 'ASCII'
    texdoc.exe letter
    pdflatex.exe C:\path\to\file\example.tex
    latex.exe C:\path\to\file\example.tex
    pdflatex.exe 'C:\path\to\file\example.tex'
    latex.exe 'C:\path\to\file\example.tex'
    pdflatex.exe C:/path/to/file/example.tex
    latex.exe C:/path/to/file/example.tex
    pdflatex.exe 'C:/path/to/file/example.tex'
    latex.exe 'C:/path/to/file/example.tex' 
```

第一行有效，所以没有权限问题。第二个调用有效，因此访问二进制文件没有问题。随后的调用都不起作用。目录中没有预先存在的 .ps、.dvi 或 .pdf 文件。

从 powershell 命令行调用可以使用相同的文件（example.tex）按预期工作，但不能从脚本调用。为什么？如何查看 pdflatex 或 latex 抛出的错误信息？MikTex 2.9、Windows 7、Powershell 2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:20:14.870

可能不是最合适的答案，但我通过使用“cd-ing”进入相关目录来解决这个问题

```
 Set-Location -Path C:\path\to\file\
    pdflatex example.tex 
```

# c# - c# System.Threading.Timer 等待处理

> ID：13396440
> 
> 赞同：7
> 
> 时间：2012-11-15T11:18:28.447
> 
> 标签：c#, multithreading, timer, dispose

我有一个使用定时器的类。该类实现`IDispose`. 我想在`Dispose`方法中等待，直到计时器不会再次触发。

我是这样实现的：

```
private void TimerElapsed(object state)
{
    // do not execute the callback if one callback is still executing
    if (Interlocked.Exchange(ref _timerIsExecuting, 1) == 1) 
        return;

    try
    {
        _callback();
    }
    finally
    {
        Interlocked.Exchange(ref _timerIsExecuting, 0);
    }
}

public void Dispose()
{
    if (Interlocked.Exchange(ref _isDisposing, 1) == 1)
        return;

    _timer.Dispose();

    // wait until the callback is not executing anymore, if it was
    while (_timerIsExecuting == 0) 
    { }

    _callback = null;
} 
```

这个实现正确吗？我认为这主要取决于 _`timerIsExecuting == 0`是否是原子操作的问题。还是我必须使用`WaitHandle`. 对我来说，这似乎会使代码变得不必要地复杂......

我不是多线程方面的专家，所以对任何建议都会很高兴。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T12:30:50.650

除非你有理由不使用[`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx) This has a [`Dispose`](http://msdn.microsoft.com/en-us/library/b97tkt95.aspx)method with a wait handle

你可以做类似的事情，

```
private readonly Timer Timer;
private readonly ManualResetEvent TimerDisposed;
public Constructor()
{
    Timer = ....;
    TimerDisposed = new ManualResetEvent(false);
}

public void Dispose()
{
    Timer.Dispose(TimerDisposed);
    TimerDisposed.WaitOne();
    TimerDisposed.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-19T17:26:50.207

通常可以使用该`Timer.Dispose(WaitHandle)`方法，但有一些陷阱：

## 陷阱

*   支持多次处理（见[这里](https://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx#Anchor_1)）

> 如果多次调用对象的 Dispose 方法，则对象必须忽略第一次调用之后的所有调用。如果多次调用其 Dispose 方法，则该对象不得引发异常。当资源已被释放时，除 Dispose 之外的实例方法可能会引发 ObjectDisposedException。

*   ## `Timer.Dispose(WaitHandle)`可以返回假。如果它已经被处理（我必须查看源代码），它会这样做。在那种情况下，它*不会*设置`WaitHandle`- 所以不要等待它！（注：应支持多次处理）

*   不处理`WaitHandle`超时。说真的 - 如果你对超时不感兴趣，你还在等什么？
*   [在 msdn](https://msdn.microsoft.com/en-us/library/b97tkt95(v=vs.110).aspx#Anchor_2)上提到的并发问题`ObjectDisposedException`可能在处置*期间（而不是之后）发生。*
*   `Timer.Dispose(WaitHandle)`不能与 -`Slim`等待句柄一起正常工作，或者不像人们所期望的那样。例如，以下内容不起作用*（*它永远阻塞）：

```
 using(var manualResetEventSlim = new ManualResetEventSlim)
 {
     timer.Dispose(manualResetEventSlim.WaitHandle);
     manualResetEventSlim.Wait();
 } 
```

## 解决方案

好吧，我想这个标题有点“粗体”，但下面是我处理这个问题的尝试——一个处理双重处理、超时和`ObjectDisposedException`. 虽然它并没有提供所有的方法`Timer`- 但可以随意添加它们。

```
internal class Timer
{
    private readonly TimeSpan _disposalTimeout;

    private readonly System.Threading.Timer _timer;

    private bool _disposeEnded;

    public Timer(TimeSpan disposalTimeout)
    {
        _disposalTimeout = disposalTimeout;
        _timer = new System.Threading.Timer(HandleTimerElapsed);
    }

    public event Signal Elapsed;

    public void TriggerOnceIn(TimeSpan time)
    {
        try
        {
            _timer.Change(time, Timeout.InfiniteTimeSpan);
        }
        catch (ObjectDisposedException)
        {
            // race condition with Dispose can cause trigger to be called when underlying
            // timer is being disposed - and a change will fail in this case.
            // see 
            // https://msdn.microsoft.com/en-us/library/b97tkt95(v=vs.110).aspx#Anchor_2
            if (_disposeEnded)
            {
                // we still want to throw the exception in case someone really tries
                // to change the timer after disposal has finished
                // of course there's a slight race condition here where we might not
                // throw even though disposal is already done.
                // since the offending code would most likely already be "failing"
                // unreliably i personally can live with increasing the
                // "unreliable failure" time-window slightly
                throw;
            }
        }
    }

    private void HandleTimerElapsed(object state)
    {
        Elapsed.SafeInvoke();
    }

    public void Dispose()
    {
        using (var waitHandle = new ManualResetEvent(false))
        {
            // returns false on second dispose
            if (_timer.Dispose(waitHandle))
            {
                if (!waitHandle.WaitOne(_disposalTimeout))
                {
                    throw new TimeoutException(
                        "Timeout waiting for timer to stop. (...)");
                }
                _disposeEnded = true;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T12:37:04.917

> 为什么需要手动处理 Timer？有没有其他解决办法。根据经验，您最好将这份工作留给 GAC。– LMB 56 分钟前
> 
> 我正在开发一个 ASP.NET 应用程序。计时器在 HttpApplication 的 Dispose 调用上被释放。原因：回调可以访问日志系统。所以我必须确保在处理日志系统之前处理计时器。– SACO 50 分钟前

看起来你有一个生产者/消费者模式，使用计时器作为生产者。

在这种情况下，我要做的是创建一个 ConcurrentQueue() 并使计时器将作业排入队列。然后，使用另一个安全线程来读取和执行作业。

这将防止一个作业与另一个作​​业重叠，这似乎是您的代码中的一个要求，并且还解决了计时器处置问题，因为您可以`yourQueue == null`在添加作业之前。

这是最好的设计。

另一个简单但不可靠的解决方案是在一个`try`块中运行回调。我不建议手动处理 Timer。

# python - Pyopencl：to_device 和 Buffer 的区别

> ID：13396443
> 
> 赞同：9
> 
> 时间：2012-11-15T11:18:42.307
> 
> 标签：python, numpy, opencl, pyopencl

让

```
import pyopencl as cl
import pyopencl.array as cl_array
import numpy
a = numpy.random.rand(50000).astype(numpy.float32)
mf = cl.mem_flags 
```

和有什么区别

```
a_gpu = cl.Buffer(self.ctx, mf.READ_ONLY | mf.COPY_HOST_PTR, hostbuf=a) 
```

和

```
a_gpu = cl_array.to_device(self.ctx, self.queue, a) 
```

?

和有什么区别

```
result =  numpy.empty_like(a)
cl.enqueue_copy(self.queue, result, result_gpu) 
```

和

```
result = result_gpu.get() 
```

?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-24T16:50:43.823

缓冲区是 CL 的版本`malloc`，而`pyopencl.array.Array`它类似于计算设备上的 numpy 数组。

因此，对于您的问题第一部分的第二个版本，您可以编写`a_gpu + 2`以获得一个新数组，该数组中的每个数字都添加了 2，而在 的情况下`Buffer`，PyOpenCL 只能看到一袋字节并且不能执行任何这样的操作。

您的问题的第二部分反过来也是一样的：如果您有一个 PyOpenCL 数组，`.get()`请将数据复制回来并将其转换为（基于主机的）numpy 数组。由于 numpy 数组是在 Python 中获取连续内存的更方便的方法之一，因此第二个变体`enqueue_copy`也以 numpy 数组结尾——但请注意，您可以将此数据复制到任何大小的数组中（只要它足够大）和任何类型 - 复制作为一个字节包执行，同时`.get()`确保您在主机上获得相同的大小和类型。

额外的事实：每个 PyOpenCL 数组下面当然有一个 Buffer。您可以从`.data`属性中获取它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T06:13:30.490

要回答第一个问题，`Buffer(hostbuf=...)`可以用任何实现[缓冲区接口](http://docs.python.org/2/c-api/buffer.html) （[参考](http://www.training.prace-ri.eu/uploads/tx_pracetmo/LinkSCEMM_pyOpenCL.pdf)）的东西来调用。 `pyopencl.array.to_device(...)`必须使用`ndarray`( [reference](http://documen.tician.de/pyopencl/array.html) ) 调用。 `ndarray`实现缓冲区接口并在任一位置工作。但是，只`hostbuf=...`希望与例如 a `bytearray`（也实现缓冲区接口）一起使用。我还没有证实这一点，但这似乎是文档所建议的。

关于第二个问题，我不确定`result_gpu`当你调用它时应该是什么类型`get()`（你的意思是`Buffer.get_host_array()`？）无论如何，在和`enqueue_copy()`的组合之间工作`Buffer`，可以有偏移量和区域，并且可以是异步的（用） ，并且我认为这些功能只能以这种方式使用（而将阻塞并返回整个缓冲区）。（[参考](http://documen.tician.de/pyopencl/runtime.html#transfers)）`Image``host``is_blocking=False``get()`

# c# - 默认 log4net 配置

> ID：13396444
> 
> 赞同：1
> 
> 时间：2012-11-15T11:18:47.207
> 
> 标签：c#, asp.net, web-config, log4net

我有以下代码：

```
 public Log4NetLogger()
        : base(LogLevel.Debug)
    {
        if(!LogManager.GetRepository().Configured)
        {
            lock(mLocker)
            {
                if(!LogManager.GetRepository().Configured)
                {
                    XmlConfigurator.Configure();
                }
            }
        }

        mLog4NetInstance = LogManager.GetLogger(typeof(Log4NetLogger));
    } 
```

使用以下 web.config：

```
 <log4net>
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="Logs\MaMLog_" />
      <appendToFile value="true" />
      <StaticLogFileAppName value="false" />
      <rollingStyle value="Date" />
      <datePattern value="yyyyMMMdd_dddd'.log'" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date{dd MMM yyyy HH:mm:ss,fff} [%thread] -() %message%newline" />
      </layout>
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
    </appender>
    <logger name="MyLog1">
      <level value="Debug" />
      <appender-ref ref="RollingLogFileAppender" />
    </logger>
    <logger name="MyLog2">
      <level value="Debug" />
      <appender-ref ref="RollingLogFileAppender" />
    </logger>
  </log4net> 
```

代码如何知道记录器名称？如果有的话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:45:32.633

由于您正在使用

```
mLog4NetInstance = LogManager.GetLogger(typeof(Log4NetLogger)); 
```

那么记录器名称将是它的值，`typeof(Log4NetLogger).FullName`通常是以下形式`YourNameSpace.Log4NetLogger`

此示例中不会记录任何内容，因为您没有具有该名称的记录器，并且您没有可以回退到的根部分，例如

```
<root>
    <level value="DEBUG" />
    <appender-ref ref="RollingLogFileAppender" />
</root> 
```

# php - 内容长度转换

> ID：13396445
> 
> 赞同：3
> 
> 时间：2012-11-15T11:18:50.803
> 
> 标签：php, macos, file, curl, size

我正在使用一个脚本检查文件大小，该脚本报告 BYTES 中的内容长度与我在 Mac 上看到的完全匹配，但是如果我将字节转换为 KB：

```
function formatBytes($bytes, $precision = 2) { 
    $units = array('B', 'KB', 'MB', 'GB', 'TB'); 

    $bytes = max($bytes, 0); 
    $pow = floor(($bytes ? log($bytes) : 0) / log(1024)); 
    $pow = min($pow, count($units) - 1); 

    $bytes /= (1 << (10 * $pow)); 

    return round($bytes, $precision) . ' ' . $units[$pow]; 
} 
```

... KB 的大小总是与我在 Mac 上看到的不同。

所以例子：

**Windows 8 电视广告调谐.m4r**

*   字节 (Mac)：4,27,840 字节
*   KB (Mac) : 428KB

*   字节（脚本）：427840

*   KB（脚本）：417.81 KB

我想知道是脚本还是其他原因导致了这种差异？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:59:52.443

看起来 Mac 使用的是 1000 约定，即 1kB 是 1000 字节。您的转换使用 1kB = 1024 字节。两者在技术上都是正确的，但是大多数程序员会使用 1kB = 1024。Mac 使用 1kB = 1000，而 Windows 使用 1kB = 1024。

硬盘制造商将使用 1000 约定，因此他们可以在做广告时使用更大的数字，这就是为什么我在我的机器上安装的 1 TB 硬盘在 Windows 中被列为只有 931 GB 的原因。

在检查代码中的文件大小时，我的建议是始终使用字节，因为这将避免这种差异并且更便于移植。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:40:05.577

也许您正在比较磁盘上的大小（在 Mac 上）和您的脚本大小转换。磁盘大小取决于您的硬盘分区块大小。

如果真实大小是 417.81 KB，而您的块大小是 200 KB（这不是一个真实示例），那么您在磁盘上的大小将是 600 KB。

磁盘上的大小不是文件的实际大小，而是文件在磁盘上占用的大小。

希望这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:32:42.630

似乎差异是由转换引起的。您执行 1 KB = 1024 B，而 Mac 似乎执行 1KB = 1000 B。

# php - 如果不在第二个表中，则 PHP/MYSQL 查询

> ID：13396447
> 
> 赞同：1
> 
> 时间：2012-11-15T11:19:00.473
> 
> 标签：php, mysql

我有两张桌子。我想绘制第一张桌子的样本，除非第一张桌子上的人也在第二张桌子上。在执行这个看似简单的查询时遇到了麻烦。

表用户

```
id|name 
```

表猫用户

```
id|userid|catid 
```

我努力了

```
SELECT u.*,c.userid FROM `users` u
LEFT JOIN `catuser` c
ON (u.id = c.userid AND c.userid <> '197')
WHERE u.id = '1' 
```

和变化无济于事。将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:21:21.247

怎么样。这个：

```
SELECT u.*,c.userid 
FROM `users` u
LEFT JOIN `catuser` c
ON u.id = c.userid 
WHERE u.id = '1'
AND c.userid <> '197'
AND c.userid is null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:27:52.180

```
SELECT * FROM users WHERE id NOT IN (SELECT DISTINCT userid FROM catuser) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:27:50.427

如果您只想查询具有一个或多个类别的用户，您可以使用`WHERE EXISTS`查询：

```
SELECT u.* FROM `users` u
WHERE EXISTS (SELECT * FROM catuser WHERE catuser.userid = u.id) 
```

另一种可能性是进行左连接，并检查连接是否成功检查 null：

```
SELECT u.*, c.* FROM `users` u
LEFT JOIN catuser c ON u.id = c.userid
WHERE c.id IS NOT NULL 
```

如果 catuser 中没有对应的行，则所有 catuser 字段将为空。通过检查是否`c.id`不为空，您只包含具有类别的行。

请注意，如果用户属于多个类别，则连接可能会多次返回用户。

# android - 在android中保存自定义大小的捕获图像？

> ID：13396448
> 
> 赞同：0
> 
> 时间：2012-11-15T11:19:01.517
> 
> 标签：android, android-intent, android-camera

我创建了一个示例应用程序。用于使用相机捕获图像。它工作正常。捕获后将图像保存在 sdcard 中。我的图像保存为 160x120 尺寸，我想增加这个尺寸。我如何使用自定义尺寸保存。我的代码是，

```
ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 35, byteStream);

File fStorageDirectory = new File(
Environment.getExternalStorageDirectory(), SDCARD_FOLDER_NAME);

System.out.println("path of----"+fStorageDirectory);

if (!fStorageDirectory.exists())
        fStorageDirectory.mkdirs();

OutputStream outStream = new FileOutputStream("/sdcard/"+ SDCARD_FOLDER_NAME + "/" + IMAGE_NAME); 
outStream.write(byteStream.toByteArray());
outStream.close(); 
```

请指导我这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:31:31.627

在 OnActivityResult 中试试这个

```
BitmapFactory.Options bounds = new BitmapFactory.Options();
bounds.inSampleSize = 4;
Bitmap myImage = BitmapFactory.decodeFile(SD_CARD_TEMP_DIR,bounds);
ByteArrayOutputStream bos = new ByteArrayOutputStream();
myImage.compress(CompressFormat.PNG, 100, bos);
bitmapdata = bos.toByteArray(); 
```

# arrays - 为什么 bash 数组会忽略换行符？

> ID：13396452
> 
> 赞同：4
> 
> 时间：2012-11-15T11:19:09.640
> 
> 标签：arrays, bash

> **可能重复：**
> [bash 中的 Printf 示例不创建换行符](https://stackoverflow.com/questions/2676507/printf-example-in-bash-does-not-create-a-newline)

我有一个示例脚本“array-test.sh”，它将三个函数聚合到一个数组中：

```
[user@host ~]$ cat array-test.sh 
#!/usr/bin/env bash

function1() {
   printf '%s\n\n\n' "cat" 
}

function2() {
   printf '%s\n\n\n' "dog" 
}

function3() {
   printf '%s\n\n\n' "mouse" 
}

for function in\
    function1\
    function2\
    function3; do
    array[$((index++))]=$($function)
done

echo "${array[@]}"
[user@host ~]$ ./array-test.sh 
cat dog mouse
[user@host ~]$ 
```

但是，缺少换行符。是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:47:11.980

另一种选择：`@`在字符串末尾添加一个字符（此处）。字符串中间的换行符将保留在`$( ... )`. 然后，通过参数扩展删除字符：

```
#!/bin/bash
function1() {
   printf '%s\n\n\n@' "cat" 
}

function2() {
   printf '%s\n\n\n@' "dog" 
}

function3() {
   printf '%s\n\n\n@' "mouse" 
}

for function in\
    function1\
    function2\
    function3; do
    array[index++]=$($function)
    array[index]=${array[index]%@}
done

echo "${array[@]}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:47:48.120

正如 ÁlvaroG.Vicario 所指出的，反引号（和`$()`）删除了尾随的换行符。没有逃避它，所以如果你必须，你将不得不解决它：

```
#!/usr/bin/env bash    

function1() {
   printf '%s' "cat"
}

function2() {
   printf '%s' "dog"
}

function3() {
   printf '%s' "mouse"
}

for function in\
    function1\
    function2\
    function3; do
    array[$((index++))]=$($function)
done

# manually add three newlines here
array=("${array[@]/%/$'\n'$'\n'$'\n'}")

echo "${array[@]}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:18:07.217

似乎 subshel​​l 扩展会削减换行符，但前提是它们出现在末尾。这是一个kludge：

```
function3() {
   printf '%s\n\n\n-' "mouse" 
}

foo=$(function3)
foo=${foo%-}
echo "$foo" 
```

# ubuntu - 如何在 Ubuntu 10.4 中安装 webkit？

> ID：13396456
> 
> 赞同：1
> 
> 时间：2012-11-15T11:19:28.810
> 
> 标签：ubuntu, ubuntu-10.04

我正在尝试在我的 Ubuntu 10.4 终端中安装执行以下命令来安装 webkit，但我的系统无法运行这些命令并说找不到命令消息

这是我的终端命令：

```
$ sudo apt-get install libwebkitgtk-1.0-0

$ sudo apt-get install libwebkitgtk-1.0-common 
```

请建议我如何在我的 ubuntu 系统中安装上述 webkit。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:56:19.837

尝试 ：

```
sudo apt-get -y install libwebkitgtk-1.0-0 libwebkitgtk-3.0-0 
```

如果这不起作用..那么我猜 webkit 在 Ubuntu 10.4 上不起作用。您至少需要 11.04 或更高版本。

# eclipse - Eclipse 代码格式化程序：不要在方法调用中换行

> ID：13396457
> 
> 赞同：3
> 
> 时间：2012-11-15T11:19:32.867
> 
> 标签：eclipse, code-formatting

我正在尝试使用 Eclipse Auto Formatter，但我找不到合适的选项来根据我的喜好进行格式化。

当我有这样的一行时：

```
MyLongNameClass myLongNameObject = otherObject.callAVeryLongMethodWithParameters(param1, param2, param3) 
```

Eclipse 自动格式化程序以这种方式包装它：

```
MyLongNameClass myLongNameObject = otherObject
    .callAVeryLongMethodWithParameters(param1, param2, param3) 
```

我宁愿得到这个结果：

```
MyLongNameClass myLongNameObject = 
    otherObject.callAVeryLongMethodWithParameters(
        param1, param2, param3) 
```

将对象和方法访问器保持在同一行，并避免以“.”开始新行。这可能吗？有这个选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-26T20:26:32.930

我不确定你是否真的可以做你想做的事，但这可能会让你接近：

在日食火星：

去`Window -> Preferences -> Java -> Code Style -> Formatter`

`New...`使用按钮根据内置插件之一创建您自己的配置文件。默认情况下，这将带您进入编辑窗口。如果您已经设置了要更改的格式化程序，请选择它并使用`Edit...`按钮。

在配置文件编辑窗口中执行以下操作：

*   选择换行选项卡
*   在左侧滚动框中，转到`Function Calls -> Qualified invocations`。
*   在`Settings for qualified invocations`区域中选择`Do not wrap`。
*   在左侧滚动框中，转到`Function Calls -> Arguments`
*   `Wrap first element, others where necessary`在参数设置中选择，然后选择`Indent by one`。

您可以通过调整预览窗口中的线宽来测试这些设置。

我知道这是一个迟到的提交，但我希望它可以帮助其他搜索相同功能的人。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-15T11:31:51.950

去`Windows -> Preferences -> Java -> Code style -> Formatter`

您可以使用自定义格式创建自己的配置文件，也可以修改现有的格式化程序。

```
Edit -> Line Wrapping 
```

探索换行并相应地更改它。

# regex - 正则表达式匹配电话号码

> ID：13396458
> 
> 赞同：0
> 
> 时间：2012-11-15T11:19:42.293
> 
> 标签：regex

我正在尝试创建一个正则表达式，它将匹配任何看起来像电话号码的东西。如果字符串中有多个数字，则将它们都匹配。电话号码定义为：

*   10+ 个字符
*   不以 结尾`N`，但可以以其他字母/单词结尾

所以我想匹配这些：

*   07158245215
*   01244356356
*   07158245215Y
*   01244356356Y
*   07158245215P
*   01244356356P
*   07158245215X
*   01244356356X
*   07158245215 工作
*   01244 356356 工作
*   工作 07158 245215 / 家庭 07158 245215 // 可能会很困难
*   工作01244356356

并禁止这些：

*   071582 45215N
*   01244356356N
*   01244356356 否

我玩弄了消极的前瞻/后视，但我无法得到任何可以理解的东西。这甚至是可能的还是我应该用像.NET这样的高级语言来做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:25:52.587

```
(?:\d\s*){10,}(?![\d\s]*N) 
```

将匹配较长字符串中的 10+ 位电话号码，只要该号码后面没有`N`. 它允许每个数字之间有任意数量的空格。

如果您的所有电话号码始终`0`以您的示例开头，您可以将其显式编码到正则表达式中：

```
\b0\s*(?:\d\s*){9,}(?![\d\s]*N) 
```

[在 RegExr 上查看](http://regexr.com?32qic)。

# c# - 按 Rows 将 DataTable 一分为二

> ID：13396459
> 
> 赞同：0
> 
> 时间：2012-11-15T11:19:44.317
> 
> 标签：c#, asp.net, datatable, datalist

我有一个 asp.net 数据表，我想将数据绑定到两个 asp.net 数据列表中，所以我想将两个数据表中的数据表**行**切片，即使 .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:21:27.050

使用[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)LINQ 扩展方法指定要使用的项目数。

如果需要，[`Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)可以跳过。

```
var half = myList.Take(myList.Count / 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:47:11.860

如果您按行切片，您可以简单地创建原始数据表的副本，找到合适的中间点，然后将行导入副本，同时从原始数据表中删除它们。

像下面这样的东西应该可以工作：

```
DataTable originalTable = new DataTable();
//Load the data into your original table or wherever you get your original table from

DataTable otherTable = originalTable.Copy(); //Copys the table structure only - no data

int rowCount = originalTable.Rows.Count;
int wayPoint = rowCount / 2; //NB integer division rounds down towards 0

for(int i = 0; i <= wayPoint; i++)
{
    otherTable.ImportRow(originalTable.Rows[i]); //Imports (copies) the row from the original table to the new one
    originalTable.Rows[i].Delete(); //Marks row for deletion
}

originalTable.AcceptChanges(); //Removes the rows we marked for deletion 
```

# c - ALSA：不支持非交错访问？

> ID：13396460
> 
> 赞同：3
> 
> 时间：2012-11-15T11:19:44.343
> 
> 标签：c, alsa

ALSA 的[snd_pcm_hw_params_set_access](http://www.alsa-project.org/alsa-doc/alsa-lib/group___p_c_m___h_w___params.html#ga4c8f1c632931923531ca68ee048a8de8 "snd_pcm_hw_params_set_access")函数在使用[SND_PCM_ACCESS_RW_NONINTERLEAVED 访问类型](http://www.alsa-project.org/alsa-doc/alsa-lib/group___p_c_m.html#ga661221ba5e8f1d6eaf4ab8e2da57cc1a "snd_pcm_access_t")调用时失败，报告存在无效参数。相同的代码适用于[SND_PCM_ACCESS_RW_INTERLEAVED 访问](http://www.alsa-project.org/alsa-doc/alsa-lib/group___p_c_m.html#ga661221ba5e8f1d6eaf4ab8e2da57cc1a "snd_pcm_access_t")。

我试图更改对 snd_pcm_hw_params_* 函数的调用顺序，但没有任何效果。

接下来，我认为我的硬件可能不支持非交错播放，但根据[这篇文章](http://mailman.alsa-project.org/pipermail/alsa-devel/2012-October/056321.html)，如果ALSA 子系统本身不支持非交错播放，那么它会在将非交错数据发送到硬件之前对其进行交错。因此，非交错访问应该始终可用。

那么为什么非交错访问似乎不受支持？

以下是适用于交错播放的代码，但对于非交错播放会产生此问题：

```
int err;
if ((err = snd_pcm_hw_params_malloc(&hw_params)) < 0) {
    fprintf(stderr, "ALSA: allocate hw_params error: %s\n", snd_strerror(err));
    throw 5;
}
if ((err = snd_pcm_hw_params_any(pb_dev, hw_params)) < 0) {
    fprintf(stderr, "ALSA: hw_params_any error: %s\n", snd_strerror(err));
    throw 5;
}
if ((err = snd_pcm_hw_params_set_access(pb_dev, hw_params, (pAudioCtx->sample_fmt < AV_SAMPLE_FMT_U8P) ? SND_PCM_ACCESS_RW_INTERLEAVED : SND_PCM_ACCESS_RW_NONINTERLEAVED)) < 0) {
    fprintf(stderr, "ALSA: set access type error: %s\n", snd_strerror(err));
    throw 5;
}
if ((err = snd_pcm_hw_params_set_channels(pb_dev, hw_params, pAudioCtx->channels)) < 0) {
    fprintf(stderr, "ALSA: set channel count error: %s\n", snd_strerror(err));
    throw 5;
}

snd_pcm_format_t sample_format;
switch (pAudioCtx->sample_fmt) {
    case AV_SAMPLE_FMT_U8: case AV_SAMPLE_FMT_U8P: sample_format = SND_PCM_FORMAT_U8; break;
    case AV_SAMPLE_FMT_S16: case AV_SAMPLE_FMT_S16P: sample_format = SND_PCM_FORMAT_S16; break;
    case AV_SAMPLE_FMT_S32: case AV_SAMPLE_FMT_S32P: sample_format = SND_PCM_FORMAT_S32; break;
    case AV_SAMPLE_FMT_FLT: case AV_SAMPLE_FMT_FLTP: sample_format = SND_PCM_FORMAT_FLOAT; break;
    case AV_SAMPLE_FMT_DBL: case AV_SAMPLE_FMT_DBLP: sample_format = SND_PCM_FORMAT_FLOAT64; break;
    default: fprintf(stderr, "sampleformat %d is not supported\n", pAudioCtx->sample_fmt);
        throw 5;
}

if ((err = snd_pcm_hw_params_set_format(pb_dev, hw_params, sample_format)) < 0) {
    fprintf(stderr, "ALSA: set sample format error: %s\n", snd_strerror(err));
    throw 5;
}
if ((err = snd_pcm_hw_params_set_rate_near(pb_dev, hw_params, (unsigned int*)&pAudioCtx->sample_rate, 0)) < 0) {
    fprintf(stderr, "ALSA: set sample rate error: %s\n", snd_strerror(err));
    throw 5;
}

if ((err = snd_pcm_hw_params(pb_dev, hw_params)) < 0) {
    fprintf(stderr, "ALSA: set parameters error: %s\n", snd_strerror(err));
    throw 5;
} 
```

执行此操作会产生以下输出：

```
ALSA: set access type error: Invalid argument 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:09:41.817

这些`hw_params_set_*`函数仅接受设备支持的那些值。

大多数默认设备（`plughw`、`default`等）支持自动转换，因此接受所有格式。 `hw`设备没有。

# apache - ServerName 可以匹配域中间的通配符吗？

> ID：13396461
> 
> 赞同：1
> 
> 时间：2012-11-15T11:19:46.110
> 
> 标签：apache, configuration, webserver

我正在尝试设置具有两条`VirtualHost`记录的服务器，如下所示：

```
<VirtualHost *:80>
    ServerName sub.domain.com
    DocumentRoot /path/to/dir/
    SetEnv FLAG false
</VirtualHost>

<VirtualHost *:80>
    ServerName sub.*.domain.com
    DocumentRoot /path/to/dir/
    SetEnv FLAG true
</VirtualHost> 
```

我希望域`sub.domain.com`通过第`VirtualHost`一个域和一个域，例如`sub.test.domain.com`通过第二个域。

目前，FLAG 环境变量始终设置为 false，表示`sub.test.domain.com`与第二个不匹配，因此恢复为第一个。

我唯一能看到的问题是第二个`ServerName`指令中的通配符位于域的中间。这是允许的还是其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T20:57:04.910

您似乎无法在 中使用通配符`ServerName`，请`ServerAlias`改用。

# mysql - 如何使用 BLToolkit 为 MySql 生成 T4 模型？

> ID：13396462
> 
> 赞同：0
> 
> 时间：2012-11-15T11:19:49.343
> 
> 标签：mysql, t4, bltoolkit

![在此处输入图像描述](../Images/404c63614566d37e8d69fd6e6e246666.png)

图像是项目文件夹和文件。

这就是我所做的：

1.创建一个控制台项目。2.在Nuget控制台输入“install-package BLToolkit” 3.在Nuget控制台输入“install-package MySql.Data” 4.将Templates文件夹复制到根目录。5.将一个新的.tt文件添加到root，并写入：

```
 <#@ template language="C#"  debug="true"#>
<#@ output extension=".generated.cs"   #>
<#@ include file="Templates\BLToolkit.ttinclude" #>
<#@ include file="Templates\MySql.ttinclude"    #>
<#
    ConnectionString = "Database=test;Data Source=127.0.0.1;User Id=root;Password=123;pooling=false;CharSet=utf8;port=3306";

    Namespace = "ConsoleDemo";
    DataContextName = "DataModel";

    GenerateModel();
#> 
```

但如果我构建项目或执行 .tt，则更错误： ![在此处输入图像描述](../Images/789ae381792f49a1e23ddca9323aaa5c.png) 它显示“找不到类或命名空间“GeneratedTextTransformation”。

我日复一日地尝试，在 mssql 上没问题，但在 mysql 上，太错误了。

任何机构都知道为什么？帮我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:37:42.560

我过去也面临过类似的问题，最终我使用[SSMA for MySQL](http://www.microsoft.com/en-us/download/details.aspx?id=28764)。

这个想法是生成一个相同的 SQL Server 数据库，并使用它来生成您的 DAL。需要更多的工作，但至少它有效:)

# javascript - 使用 nth-child 制作国际象棋图案

> ID：13396470
> 
> 赞同：4
> 
> 时间：2012-11-15T11:20:24.490
> 
> 标签：javascript, jquery, css, css-selectors

我正在努力实现一些相对简单的事情。

我需要选择页面上的每个第 3 和第 4 个元素，如何使用 css :nth-child() 来做到这一点？

也欢迎 JS 回答。

非常感谢。

***编辑

抱歉伙计们，我的问题写得不好。我在下面附上了我需要的示例。

这是我需要的结果， [http://jsfiddle.net/8FXL6/](http://jsfiddle.net/8FXL6/)

```
 <li></li>
        <li class="highlight"></li>
        <li class="highlight"></li>
        <li></li>
        <li></li>
        etc 
```

无需对类名进行硬编码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T11:22:47.110

```
*:nth-child(3),*:nth-child(4){
} 
```

从技术上讲，这会选择其容器中的第 3 或第 4 个子元素。如果要选择*每个*第 3 或第 4 个元素（3、4、6、8 等），请使用：

```
*:nth-child(3n),*:nth-child(4n){
} 
```

[演示](http://jsfiddle.net/AY3jq/)

从您的编辑中，您需要：

```
li:nth-child(4n-2),li:nth-child(4n-1){
} 
```

[演示](http://jsfiddle.net/8FXL6/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T11:22:43.233

您可以使用逗号来组合选择器，使用[**nth-child**](http://api.jquery.com/nth-child-selector/)来获取元素，

**[现场演示](http://jsfiddle.net/8FXL6/2/)**

```
elements = $('div .className :nth-child(3), div .className :nth-child(4)'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:29:42.730

只使用css怎么样？

每三个元素：

```
*:nth-child(3n+3) {color: red} 
```

每四个元素：

```
*:nth-child(4n+4) {color: blue} 
```

这是关于 jsfiddle 的演示：http: [//jsfiddle.net/dufsx/](http://jsfiddle.net/dufsx/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T04:09:35.230

这只能使用 CSS 解决

```
 *:nth-child(4n+2){background:blue;color: white;}
 *:nth-child(4n+3){background:blue;color: white;} 
```

[现场演示](http://jsfiddle.net/KZAzU/1/)

# html - 如果子表在 IE 中减小，则减小父表高度

> ID：13396473
> 
> 赞同：0
> 
> 时间：2012-11-15T11:20:31.550
> 
> 标签：html

```
<div style="height:100%">
 <table style="height:100%" id="parenttable">
 <tr>
   <td>
      <table id="childtable" style="height:100%">
      <tr>
        <td>
       </td>
      </tr>
      </table>
    </td>
  </tr> 
```

我正在对子表中的数据进行动态隐藏/显示。所以它的高度降低了。但这反过来并没有降低父表的高度。它只出现在 IE 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:36:39.133

为什么你没有使用 2 个单独的 div？通过指定css类和相关的javascript会更好。

# java - 如何使用名称查询删除表的所有行

> ID：13396475
> 
> 赞同：-3
> 
> 时间：2012-11-15T11:20:38.263
> 
> 标签：java, mysql, hibernate

我需要一个名称查询注释来使用休眠删除表的所有行怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:26:06.437

删除所有行

```
delete from table where condition 
```

从数据库中删除整个表

```
 drop table from db 
```

# java - 代码约定 - 捕捉异常而不是之前的 if 检查的好习惯还是坏习惯？

> ID：13396478
> 
> 赞同：2
> 
> 时间：2012-11-15T11:20:49.423
> 
> 标签：java, exception-handling, nullpointerexception, coding-style

我想将 an 设置`Integer`为特定值，即 0 或在另一个类中找到的属性。由于此类的实例存储在 a `Map`of `List`s 中，但此时此映射可能为 null，我想知道两种处理此问题的方法中哪一种更好。

```
Integer value = 0;
if (myMap != null && 
    myMap.get(keyForList) != null && 
    myMap.get(keyForList).get(0) != null) {
    value = myMap.get(keyForList).get(0).getAttribute();
} 
```

或者我认为更好、更有效的方式：

```
Integer value = 0;
try {
    value = myMap.get(keyForList).get(0).getAttribute();
} catch (NullPointerException e) {
    // without doing anything value is 0 as expected 
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T11:22:36.297

标准建议是不应将异常用于流控制。它们相对重量级，打破了标准的控制流程，因此难以遵循。它们应该用于*特殊*情况。

这并不是说您不能使用它们从条件中恢复，但是如果检查（比如说）`null`或零更容易/更明确，那么您应该优先这样做。

我会注意到（但是）Java 很冗长，并且没有简单的操作来处理代码中的默认值/空值，例如：

```
Integer result = a.getB().getC().getD(); 
```

因此，我的建议是：

1.  检查[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)，这意味着您可以在上述场景中不进行空检查
2.  像上面这样的代码表明真正缺乏 OO 功能。上面的代码应该让 object`a`本身得到 get `b`，而 object`b`会得到`c`，依此类推。以目前的形式，它违反[了得墨忒耳法则](http://www.ccs.neu.edu/home/lieber/LoD.html)并向您展示`a`,`b`等`c`是如何组成的。请记住，OO 是关于*让对象为您做事*，而不是让它们告诉您它们的组成部分并让您自己做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:28:12.433

如果代码中没有意外事件，请避免异常。我建议如下：

```
Integer value = 0;
if (myMap != null)
{ 
    if(myMap.get(keyForList) != null && !myMap.get(keyForList).isEmpty())
          value = myMap.get(keyForList).get(0).getAttribute();
    else
          System.out.println("There is no key " + keyForList + " in my map!");
}
else
    System.out.println("My map is null!"); 
```

这样您就可以确定 null 值在哪里（用于调试目的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:31:12.890

异常比 更昂贵`if`，因此通常最好在可能的情况下避免它们，特别是如果`try{}`块中只有一条语句。

*但是，当您可以在 try{} 中包装大量代码时，异常开始变得更有意义。我认为在您的示例代码中开始出现这种情况。即使您只有一个 if 语句，它也有复杂的条件。避免这种`try-catch`情况可能会更好。*

当预期输入通常有效时，异常可以很好地捕获错误，例如格式错误的输入。

通过捕获 NullPointerException 来检测输入（如方法参数）空指针并不是一个好主意。如果是调用者的责任，或者`if`之前有，或者只是让异常从你的方法中抛出而不进行干预（甚至可以用 if 和`throw NullPointerException`你自己来检测空指针，而不调用其他任何东西）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:50:10.187

例外情况是正常的执行流程失败，我们无法继续。使用 If-else 代码不会中断

# c# - 动态 Linq 条件选择

> ID：13396481
> 
> 赞同：1
> 
> 时间：2012-11-15T11:21:04.743
> 
> 标签：c#, linq, dynamic, dynamic-linq

```
var Data = from z in initialData
           select new
           {
              z.ID,
              z.Value = (z.Col1 != null)? z.Col1 : z.Col2
           }; 
```

如何将此查询转换为动态 linq 表达式？这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:44:34.857

试试这个 [http://msdn.microsoft.com/en-us/library/bb345303.aspx](http://msdn.microsoft.com/en-us/library/bb345303.aspx)

```
using (AdventureWorksEntities context =
    new AdventureWorksEntities())
{
    // Call the constructor with a query for products and the ObjectContext.
    ObjectQuery<Product> productQuery1 =
        new ObjectQuery<Product>("Products", context);

    foreach (Product result in productQuery1)
        Console.WriteLine("Product Name: {0}", result.Name);

    string queryString =
        @"SELECT VALUE product FROM AdventureWorksEntities.Products AS product";

    // Call the constructor with the specified query and the ObjectContext.
    ObjectQuery<Product> productQuery2 =
        new ObjectQuery<Product>(queryString, context);

    foreach (Product result in productQuery2)
        Console.WriteLine("Product Name: {0}", result.Name);

    // Call the constructor with the specified query, the ObjectContext,  // and the NoTracking merge option.
    ObjectQuery<Product> productQuery3 =
        new ObjectQuery<Product>(queryString,
            context, MergeOption.NoTracking);

    foreach (Product result in productQuery3)
        Console.WriteLine("Product Name: {0}", result.Name);
} 
```

你可以看看这个部分

```
string queryString =
    @"SELECT VALUE product FROM AdventureWorksEntities.Products AS product";

// Call the constructor with the specified query and the ObjectContext.
ObjectQuery<Product> productQuery2 =
    new ObjectQuery<Product>(queryString, context);

foreach (Product result in productQuery2)
    Console.WriteLine("Product Name: {0}", result.Name); 
```

如果它对您有用，请不要忘记将其标记为已回答。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T11:26:31.323

You are missing member names for your anonymous type. Included in my answer:

```
var Data = initialData.Select(x => new 
                           { 
                               ID = x.ID, 
                               Value = (x.Col1 == null)? x.Col1 : x.Col2
                           }); 
```

EDIT: Nevermind, misread the question.

# java - 包括 xs:restriction(s) 作为 moxy 生成的 java 类中的注释

> ID：13396482
> 
> 赞同：3
> 
> 时间：2012-11-15T11:21:08.223
> 
> 标签：java, annotations, jaxb, xsd, moxy

我有一些新`xsd schema`版本更新，我需要为其生成相应的 java 类。过去，我了解总是使用 EclipseLink 的 Moxy JAXB 实现生成的类，我可以看到，如果模式包含`<xs:restriction/>`诸如之类的模式`<xs:pattern value="[a-zA-Z]"/>`，那么将生成相应的 java 类`@Pattern(regexp="[a-zA-Z]", message= "...")`，其中包含注释。

当我在我的设置中使用 Moxy 生成这些 java 类时，这些类生成正常，但其中没有 @Pattern 注释。我对 JAXB 不太熟悉，我想知道我可能缺少什么来允许这些注释从模式派生并自动插入到 java 类本身中。

我不太确定这是否是因为我没有使用足够新的 Moxy 版本（当前使用 EclipseLink 的 2.1.2 版本），它允许自动创建这些注释，或者之前是否使用了另一个工具来插入这些注释进入课堂。

对此问题的任何帮助将不胜感激。

问候，下午。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:06:45.473

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**生成类**

EclipseLink JAXB (MOXy) 包括来自[**JAXB 参考实现**](http://jaxb.java.net/)的 XML Schema to Java Compiler (XJC) 。目前 XJC 工具没有在模型中生成[**Bean Validation (JSR-303)**](http://jcp.org/en/jsr/detail?id=303)注释的内置机制。

**XJC 扩展**

我自己没有尝试过以下扩展，但看起来它可以满足您的需求。由于 XJC 具有很强的可扩展性，因此可能还有其他可用的插件。

*   [http://code.google.com/p/krasa-jaxb-tools/](http://code.google.com/p/krasa-jaxb-tools/)

**当前版本的 EclipseLink**

> 我不太确定这是否是因为我没有使用足够新的 Moxy 版本（目前使用 2.1.2 版本的 EclipseLink）

当前版本是 EclipseLink 2.4.1，可以从下面的链接获得。它包含新的扩展，例如[**JSON 绑定**](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)。

*   [http://www.eclipse.org/eclipselink/downloads/](http://www.eclipse.org/eclipselink/downloads/)

# javascript - Three.js 将对象置于最前面

> ID：13396490
> 
> 赞同：0
> 
> 时间：2012-11-15T11:21:54.820
> 
> 标签：javascript, webgl, three.js

我在屏幕上显示三个对象，我可以选择（单击）这些对象（现在我只是在单击时更改对象的颜色）。我想要做的就是当用户左键单击该对象应该出现在相机前面的对象之一时（也想在一个漂亮的动画中出现在前面时旋转和缩放它）。当用户在屏幕上右键单击时，对象会回到它的位置（默认对象位置）。我在网上搜索了缩放对象、焦点对象等术语，但找不到关于我上面解释的场景的任何帮助。

请帮助我了解基本概念如何使用 THREE.js 实现这一目标。

问候 ZB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:53:51.003

您的问题是您无法缩放对象，您可以放大相机或将对象放在相机前面。第一种方法“放大相机”：

```
if ( intersects.length > 0 ) {
    // set camera in with some gap;
    camera.position.z = intersects[0].object.position.z - 100;
    camera.position.x = intersects[0].object.position.x;
    camera.position.y = intersects[0].object.position.Y;
} 
```

第二种方法“将物体带到相机前面”：

```
if ( intersects.length > 0 ) {
    // bring object;
    intersects[0].object.position.z = camera.position.z - 100;
    intersects[0].object.position.x = camera.position.x;
    intersects[0].object.position.y = camera.position.y;
} 
```

# xml - 关于xsl中表格内的表格列

> ID：13396495
> 
> 赞同：0
> 
> 时间：2012-11-15T11:22:08.220
> 
> 标签：xml, xslt

以下是我使用创建的报告，`xsl`并且`xml`此报告是在 Pdf 中创建的，请单击下面`url`查看报告布局

![在此处输入图像描述](../Images/e38c6f7039694cf5eafa483fa880cd88.png)

而xsl是..

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:set="http://exslt.org/sets" extension-element-prefixes="set" exclude-result-prefixes="fo">
  <xsl:output method="xml" version="1.0" omit-xml-declaration="no" indent="yes"/>
      <xsl:template match="/">
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
      <fo:layout-master-set>
        <fo:simple-page-master master-name="A4" page-width="21cm" page-height="29.7cm" margin-top="2cm" margin-bottom="1cm" margin-left="1cm" margin-right="1cm">
           <fo:region-body margin-bottom="2cm" margin-top="4cm"/>
          <fo:region-after extent="2cm"/>
          <fo:region-before extent="4cm"/>
        </fo:simple-page-master>
              </fo:layout-master-set>
      <fo:page-sequence master-reference="A4" initial-page-number="1">
        <fo:static-content flow-name="xsl-region-after">
            <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  >
               </fo:block>
          <fo:block font-size="9pt" text-align="end">
            <fo:table table-layout="fixed">
              <fo:table-column column-width="9.5cm"/>
              <fo:table-column column-width="9.5cm"/>
               <fo:table-body>
                <fo:table-row>
                        <fo:table-cell
                                        text-align="center">
                    <fo:block text-align="left">
                                            Run:
                                    <xsl:value-of select="substring(  DepartmentSalesReport/CurrentDate , 6, 2 )" />
                                        /
                                    <xsl:value-of select="substring(  DepartmentSalesReport/CurrentDate , 9, 2 )" />
                                        /
                                    <xsl:value-of select="substring(  DepartmentSalesReport/CurrentDate , 1, 4 )" />
                                        @
                                    <xsl:value-of select="DepartmentSalesReport/currentTime" />
                                        </fo:block>
                            </fo:table-cell>
                   <fo:table-cell text-align="right">
                    <!--fo:block space-before="8mm">
                      <xsl:text>Keep this report for 6 months</xsl:text>
                    </fo:block-->
                  </fo:table-cell>
                  <fo:table-cell >
                    <fo:block space-before="8mm">Page <fo:page-number/> of <fo:page-number-citation ref-id="terminator"/></fo:block>
                  </fo:table-cell>
                </fo:table-row>
              </fo:table-body>
            </fo:table>

          </fo:block>
        </fo:static-content>

        <fo:static-content flow-name="xsl-region-before">
          <fo:block text-align-last="center" space-after="1.5cm">
            <fo:table table-layout="fixed">
              <fo:table-column column-width="4cm"/>
              <fo:table-column column-width="10cm"/>
               <fo:table-column column-width="2cm"/>
               <fo:table-column column-width="2cm"/>
              <fo:table-body>
                <fo:table-row>
                  <fo:table-cell  font-size="9pt">
                    <fo:block>Store Number:
                      <xsl:value-of select="DepartmentSalesReport/store_code"/>
                    </fo:block>
                  </fo:table-cell>
                   <fo:table-cell text-align="center">
                             <fo:block  text-align-last="center" font-size="14pt" font-weight="bold" space-after="1mm">
                                <fo:inline text-decoration="underline">Department Sales Report</fo:inline>
                               </fo:block>
                  </fo:table-cell>
                  <fo:table-cell text-align="right"   font-size="9pt">
                     <fo:block > 
                        <xsl:value-of select="DepartmentSalesReport/tradingday"/>   
                     </fo:block>
                  </fo:table-cell>
                  <fo:table-cell text-align="right" font-size="9pt">
                    <xsl:variable name="date"><xsl:value-of select="DepartmentSalesReport/tradingdate"/></xsl:variable>
                    <fo:block> 
                        <xsl:value-of select="substring($date,5,2)"/>/<xsl:value-of select="substring($date,7,2)"/>/<xsl:value-of select="substring($date,1,4)"/>
                    </fo:block>
                  </fo:table-cell>
                </fo:table-row>
              </fo:table-body>
            </fo:table>
          <fo:table table-layout="fixed">
              <fo:table-column column-width="19cm"/>
          <fo:table-body>
                <fo:table-row>
                   <fo:table-cell text-align="center">
                                      <fo:block text-align-last="center" font-size="9pt" >
                                        Summary of Sales by department, only those
                                            departments with activity (Sales,
                                            refunds, voids) will appear on this
                                            report.Use this report to monitor sales in
                                            key departments and make merchandising
                                            decisions as needed.
                          </fo:block>
                  </fo:table-cell>
                </fo:table-row>
              </fo:table-body>
            </fo:table>
          </fo:block>
          <fo:block font-size="9pt" >
           <fo:table table-layout="fixed" >
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.8cm" 
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-body>
                            <fo:table-row>
                            <fo:table-cell number-columns-spanned="9"> <fo:block color="black"
                        space-before.optimum="-8pt">
                        <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  />

                    </fo:block></fo:table-cell>
                            </fo:table-row>
                            <fo:table-row font-weight="bold">
                                <fo:table-cell number-columns-spanned="2">
                            <fo:block text-align="left"><xsl:text>-------------------------Department-------------------</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-rows-spanned="2">
                            <fo:block text-align="right"><xsl:text>Net Sales</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-rows-spanned="2">
                            <fo:block text-align="right"><xsl:text>Qty</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-rows-spanned="2">
                            <fo:block text-align="right"><xsl:text>% of Sales</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-columns-spanned="2">
                            <fo:block text-align="right"><xsl:text>--------Void--------</xsl:text></fo:block>
                            </fo:table-cell>
                                <fo:table-cell number-columns-spanned="2">
                            <fo:block text-align="right"><xsl:text>-------Return-------</xsl:text></fo:block>
                            </fo:table-cell>        
                                </fo:table-row>
                                <fo:table-row font-weight="bold">
                                    <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:text>#</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:text>Description</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Qty</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Amount</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Qty</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Amount</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                </fo:table-row>
                    <fo:table-row >
                            <fo:table-cell number-columns-spanned="9" > <fo:block color="black"
                        space-before.optimum="-8pt">

                    </fo:block></fo:table-cell>
                            </fo:table-row>

                            </fo:table-body>
                            </fo:table>
          </fo:block>
          <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  />

     </fo:static-content>

        <fo:flow flow-name="xsl-region-body">
        <xsl:variable name="storeSales" select="sum(DepartmentSalesReport/DepartmentDesc/netSales)"/>
        <br/>
          <!--          <fo:block font-size="9pt" space-after="3mm" break-before="page">-->
            <xsl:for-each select="DepartmentSalesReport/DepartmentDesc">
                    <fo:block font-size="9pt" space-after="1mm">
                    <fo:table table-layout="fixed" >
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.8cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                    <fo:table-body>
                        <xsl:variable name="levelNo"><xsl:value-of select="levelNbr"/></xsl:variable>
                                <xsl:variable name="levelCheck"><xsl:value-of select="level"/></xsl:variable>
                                <xsl:if test="$levelCheck!=''">
                                    <xsl:if test="$levelNo='2'">
                                    <fo:table-row>  
                                    <fo:table-cell number-columns-spanned="9">
                                    <fo:block>
                                           <xsl:text>&#160;</xsl:text>
                                    </fo:block>
                                    </fo:table-cell>
                                    </fo:table-row>
                                </xsl:if>
                     <fo:table-row >
                                        <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:value-of select="level"/>
                                            </fo:block>
                                        </fo:table-cell>

                                        <xsl:choose>
                                        <xsl:when test="$levelNo!='2'">
                                        <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:value-of select="prgpName"/>
                                            </fo:block>
                                        </fo:table-cell>
                                            </xsl:when>
                                        <xsl:otherwise>
                                            <fo:table-cell>
                                                <fo:block text-align="left">
                                                    ***DEPT TOTAL*** </fo:block>
                                            </fo:table-cell>
                                        </xsl:otherwise>
                                            </xsl:choose>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(netSales,'0.00')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(prodCount,'0')"/>
                                            </fo:block>
                                        </fo:table-cell>

                                        <fo:table-cell>
                                            <xsl:variable name="salesPercentage"><xsl:value-of select="format-number((netSales div $storeSales)*100, '###,##0')"/></xsl:variable>
                                            <xsl:if test="$salesPercentage='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$salesPercentage!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$salesPercentage"/>
                                            </fo:block>
                                            </xsl:if>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(postVoidQuantity,'0')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(postVoidAmount,'0.00')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(returnQuantity,'0')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(returnAmount,'0.00')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                    </fo:table-row>
                        <xsl:if test="$levelNo='2'">
                                    <fo:table-row>  
                                    <fo:table-cell number-columns-spanned="9">
                                    <fo:block>
                                           <xsl:text>&#160;</xsl:text>
                                    </fo:block>
                                    </fo:table-cell>
                                    </fo:table-row>
                                </xsl:if>
                                    </xsl:if>
                    </fo:table-body>

                  </fo:table>
                </fo:block>
            </xsl:for-each>

            <fo:block border-bottom-style="solid" text-align="left"
                font-size="9pt" space-before="3mm" />
            <fo:block font-size="9pt" space-after="4mm">

                <fo:table>
                    <fo:table-column column-width="1.5cm" />
                    <fo:table-column column-width="4.5cm" />
                    <fo:table-column column-width="3.3cm" />

                    <fo:table-header>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block font-weight="bold"></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block text-align="left" space-after="4mm"
                                    space-before="3mm" font-weight="bold">
                                    <xsl:text>DEPARTMENT TOTALS</xsl:text>
                                </fo:block>
                            </fo:table-cell>

                        </fo:table-row>
                    </fo:table-header>

                    <fo:table-body>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold">
                                    <xsl:text>SS SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" text-align="right">
                                    <xsl:variable name="ssSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/ssSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$ssSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$ssSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$ssSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold">
                                    <xsl:text>CIGARETTE SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block text-align="right" font-weight="bold">
                                <xsl:variable name="cigeratteSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/cigeratteSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$cigeratteSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$cigeratteSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$cigeratteSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block space-after="1.5mm" font-weight="bold">
                                    <xsl:text>LIQUOR SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" text-align="right"
                                    space-after="4mm">
                                    <xsl:variable name="liquorSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/liquorSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$liquorSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$liquorSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$liquorSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" space-after="8mm">
                                    <xsl:text>TOTAL FRONT END SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" text-align="right"
                                    space-after="4mm">
                                    <xsl:variable name="totalSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/totalSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$totalSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$totalSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$totalSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>

                    </fo:table-body>

                </fo:table>

            </fo:block> 

              <fo:block space-before="5mm" text-align="center" font-size="9pt" font-weight="bold" id="terminator">
                 <xsl:text></xsl:text>
          </fo:block>

        </fo:flow>

      </fo:page-sequence>
    </fo:root>
  </xsl:template>

</xsl:stylesheet> 
```

xml是..

```
<?xml version="1.0" encoding="UTF-8"?>
<Report Name="DepartmentSalesReport" Title="Department Sales Report"
    Description="Department Sales Report" Version="1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <InitParam Name="tradingdate" Type="java.lang.String" />
      <InitParam Name="tradingday" Type="java.lang.String" />
      <ReportBand BandType="HeaderBand" Name="DepartmentSalesReportBand">
        <ReportElement Type="Header" DataSource="OutletSQL">
        <DataField Name="store_code" Type="Data" FieldName="ORGU_CODE" />
        </ReportElement>
        <ReportElement Type="Header" DataSource="InitParams">
        <DataField Name="tradingdate" Type="Data" FieldName="tradingdate" />
        </ReportElement>
        <ReportElement Type="Header" DataSource="InitParams">
        <DataField Name="tradingday" Type="Data" FieldName="tradingday" />
        </ReportElement>
    </ReportBand>
    <ReportBand BandType="DetailBand" Name="Terminal">
        <ReportElement Type="Detail" Name="DepartmentDesc" DataSource="DataSql">
            <DataField Name="level" Type="Data" FieldName="LEVEL"/>
            <DataField Name="levelNbr" Type="Data" FieldName="LEVELNBR"/>
            <DataField Name="prgpName" Type="Data" FieldName="PRGP_NAME"/>
            <DataField Name="prodCount" Type="Data" FieldName="PROD_COUNT"/>
            <DataField Name="netSales" Type="Data" FieldName="NET_SALES"/>
            <DataField Name="postVoidQuantity" Type="Data" FieldName="POST_VOID_QUANTITY"/>
            <DataField Name="postVoidAmount" Type="Data" FieldName="POST_VOID_AMOUNT"/>
            <DataField Name="returnQuantity" Type="Data" FieldName="RETURN_QUANTITY"/>
            <DataField Name="returnAmount" Type="Data" FieldName="RETURN_AMOUNT"/>  

        </ReportElement>
        <ReportElement Type="Detail" Name="DepartmentTotals" DataSource="TotalsDataSql" MaxResults="1">
            <DataField Name="ssSales" Type="Data" FieldName="LINE_NUM_50"/>
            <DataField Name="cigeratteSales" Type="Data" FieldName="LINE_NUM_30"/>
            <DataField Name="liquorSales" Type="Data" FieldName="LINE_NUM_60"/>
            <DataField Name="totalSales" Type="Data" FieldName="TOTAL_FRONT_END_SALES"/>
        </ReportElement>

        <ReportElement Type="Header" DataSource="DateSQL">
            <DataField Name="CurrentDate" Type="Data" FieldName="1" />
            <DataField Name="currentTime" Type="Data" FieldName="2" />
        </ReportElement>
    </ReportBand>
    <DataSource
        Type="walgreens.pos.maintenance.eod.CurrentDepartmentSalesReportDataSource"
        Name="DataSql"
        Statement="">
    </DataSource>
    <DataSource
        Type="walgreens.pos.maintenance.eod.DepartmentTotalsReportDataSource"
        Name="TotalsDataSql"
        Statement="">
    </DataSource>
    <DataSource
        Type="com.pcmsgroup.v21.star.framework.application.reports.SpringReadOnlySQLStatement"
        Name="OutletSQL"
        Statement="select ORGU_CODE,OUTL_TRADE_DATE from outlet,org_unit where outlet.OUTL_ID = org_unit.OUTL_ID">
    </DataSource>

    <DataSource
        Type="com.pcmsgroup.v21.star.framework.application.reports.SpringReadOnlySQLStatement"
        Name="DateSQL"
        Statement="SELECT current date,current time FROM sysibm.sysdummy1">
    </DataSource>

</Report> 
```

我只想知道在 xsl 中有以下几行..

```
 <fo:block border-bottom-style="solid" text-align="left"
                font-size="9pt" space-before="3mm" />
            <fo:block font-size="9pt" space-after="4mm">

                <fo:table>
                    <fo:table-column column-width="1.5cm" />
                    <fo:table-column column-width="4.5cm" />
                    <fo:table-column column-width="3.3cm" />

                    <fo:table-header>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block font-weight="bold"></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block text-align="left" space-after="4mm"
                                    space-before="3mm" font-weight="bold">
                                    <xsl:text>DEPARTMENT TOTALS</xsl:text>
                                </fo:block>
                            </fo:table-cell>

                        </fo:table-row>
                    </fo:table-header>

                    <fo:table-body>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold">
                                    <xsl:text>SS SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" text-align="right">
                                    <xsl:variable name="ssSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/ssSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$ssSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$ssSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$ssSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold">
                                    <xsl:text>CIGARETTE SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block text-align="right" font-weight="bold">
                                <xsl:variable name="cigeratteSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/cigeratteSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$cigeratteSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$cigeratteSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$cigeratteSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block space-after="1.5mm" font-weight="bold">
                                    <xsl:text>LIQUOR SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" text-align="right"
                                    space-after="4mm">
                                    <xsl:variable name="liquorSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/liquorSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$liquorSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$liquorSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$liquorSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" space-after="8mm">
                                    <xsl:text>TOTAL FRONT END SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" text-align="right"
                                    space-after="4mm">
                                    <xsl:variable name="totalSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/totalSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$totalSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$totalSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$totalSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>

                    </fo:table-body>

                </fo:table>

            </fo:block> 
```

现在我的疑问是为什么我们在 fo:table 中选择了三个 fo:table-column ，请指教..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:42:32.230

您的 xslt 和您在问*为什么我们在 fo:table 中选择了三个 fo:table-column*。

无论如何要在表格中得到正确的渲染，我认为已经选择了三列。您可以将它放在单列中，但它看起来不会很好，并且所有内容都将被包装到单列中。修改这个

`<fo:table border="1pt solid black">`然后`<fo:table-row border-top="1pt solid black">`你可以看到表格从哪里开始和在哪里结束。

# wpf - WPF - ControlTemplate 作为 Thumb 控件模板数据绑定

> ID：13396498
> 
> 赞同：2
> 
> 时间：2012-11-15T11:22:15.537
> 
> 标签：wpf, xaml, .net-4.0, thumbnails, controltemplate

我有一个实现 Thumb 类的自定义 MyThumb 用户控件。此用户控件是使用 ControlTemplate 模板化的，其中 ItemsSource 绑定到我的自定义类的 ObservableCollection 并具有三个属性。ObservableCollection 位于名为 ImportFileColumns 代码后面的公共属性中，它在 InitializeComponent() 之前填充。问题是，ObservableCollection 填充了正确的数据，但 ControlTemplate 永远不会绑定数据（应该使用 ColumnName 属性中的值填充 TextBlock 控件），所以我的假设是我在 XAML 中做错了什么。

这是 XAML：

```
 <ControlTemplate x:Key="columnsThumbTemplate">
            <Grid Width="175" >
                <ItemsControl Name="isTest" ItemsSource="{Binding ImportFileColumns}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Vertical" IsItemsHost="True" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Width="175">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150" />
                                    <ColumnDefinition Width="25" />
                                </Grid.ColumnDefinitions>
                                <Border BorderBrush="LightGray" BorderThickness="1,0,1,1" Background="White" Padding="10,5" Grid.Column="0">
                                    <StackPanel Orientation="Horizontal" >
                                        <TextBlock Text="{Binding Path=ColumnName}" Height="13" />
                                    </StackPanel>
                                </Border>
                                <my:MyConnector x:Name="myRightConnector"
                                            Template="{StaticResource tplRightConnector}" 
                                            Grid.Column="1"
                                            IsConnectorClicked="False" 
                                            PreviewMouseLeftButtonDown="myConnector_PreviewMouseLeftButtonDown"
                                            Canvas.Left="Auto"
                                            Canvas.Right="Auto" 
                                            DragDelta="onDragDelta"/>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Grid>
        </ControlTemplate>

        <my:MyThumb x:Name="myCustomColumnsThumb" 
                    Canvas.Left="272"
                    Canvas.Top="400"
                    Template="{StaticResource columnsThumbTemplate}" 
                    DragDelta="onDragDelta" 
                    PreviewMouseLeftButtonDown="connector_PreviewMouseLeftButtonDown" /> 
```

# image - 如何在 Flex 4.6 中内嵌图像

> ID：13396499
> 
> 赞同：0
> 
> 时间：2012-11-15T11:22:17.073
> 
> 标签：image, apache-flex, inline

我有一个 s 复选框列表，我想在每行 lebal 文本之后有一个小图像。不幸的是，默认的 Flex 字体在不同的操作系统和浏览器组合上看起来有点不同，所以我不能手动将它放在那里，但我需要以编程方式附加它。这是我的复选框的样子。我使用 Flex 4.6，怎么可能这样做？

```
<s:CheckBox x="10" y="60" label="label1" id="1CB" click="modify();"/>
<s:CheckBox x="10" y="75" label="label2" id="2CB" click="modify();"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:27:30.240

您可以很好地尝试一下，一旦设置了图像的宽度和高度，不同操作系统的分辨率就不会改变。同样，也可以通过 actionscript 添加图像。

```
<s:HGroup>
    <s:CheckBox x="10" y="60" label="label1" id="CB"/>
    <mx:Image source="@Embed('untitled.png')" width="50" height="50"/>  
</s:HGroup>

<s:HGroup>
    <s:CheckBox x="10" y="75" label="label2" id="CB2"/>
    <mx:Image source="@Embed('untitled.png')" width="50" height="50"/>
</s:HGroup> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:25:28.860

您可以为此使用嵌入字体，它们将在所有操作系统中显示相同。例如，在样式文件中写入：

```
@font-face
{
    fontFamily: HelveticaNeueLTStd;
    src: url("assets/font/HelveticaNeueLTStd-Lt.otf");
    embedAsCFF: true;
    advancedAntiAliasing: true;
}

global
{
    font-family: HelveticaNeueLTStd;
    fontSize: 16;
} 
```

# git - 使用 git-tfs 进行本地分支

> ID：13396500
> 
> 赞同：0
> 
> 时间：2012-11-15T11:22:20.197
> 
> 标签：git, tfs, git-tfs

我已经安装了 git-tfs，并做了一个`git-tfs clone http://.....`

但是，我想知道是否有办法使用 git-tfs 进行本地分支？
例如，相当于`git checkout -b myBranch`

我正在工作的团队似乎只使用了 tfs 服务器上的一个分支，所以如果可能的话，我想在本地分支？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:10:06.133

你在本地所做的一切都应该用 git（而不是 git-tfs）来完成，你可以做任何你想做的事情（创建分支、变基或合并，...）。

git-tfs 仅用于与 TFS 交互（获取变更集或提交变更集）。

但是（因为总是有一个“但是”；）），你永远不应该修改已经提交给 git-tfs 的提交！只需将提交添加到“主”分支并在 TFS 上提交...

如果有一天，您将使用 tfs 分支，您可以在这个 stackoverflow 问题中找到答案：[How do I use git-tfs and idiommatic git branching against a TFS repository？](https://stackoverflow.com/questions/5129959/how-do-i-use-git-tfs-and-idiomatic-git-branching-against-a-tfs-repository/13710811#13710811)

# postgresql - 如何访问plpgsql复合类型数组组件

> ID：13396507
> 
> 赞同：1
> 
> 时间：2012-11-15T11:22:54.523
> 
> 标签：postgresql, plpgsql

假设我在 Postgresql 中创建了一个复合类型：

```
CREATE TYPE custom_type AS
   (x integer
    y integer); 
```

我需要在函数中将它用作数组：

```
...
DECLARE
customVar custom_type[];
BEGIN
.... 
```

我的问题是：如何访问 custom_type 的特定组件？

例如，我想（重新）为 custom_type 数组中的第三个元素分配“x”......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:31:17.320

鉴于：

```
SELECT ARRAY[(1,2),(3,4)]::custom_type[]; 
```

使用数组下标，然后按名称引用字段。

```
regress=> SELECT (ARRAY[(1,2),(3,4)]::custom_type[])[1].x;
 x 
---
 1
(1 row) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T18:03:55.053

```
postgres=> 创建类型 pt 为 (x int, y int);
创建类型

postgres=> 创建或替换函数 fx()
返回 void 作为 $$
声明一个 pt[] = ARRAY[(10,20),(30,40)]; 声明 xx pt；
开始
  for i in array_lower(a, 1) .. array_upper(a,1)
  环形
    xx = a[i]; xx.x := xx.x + 1; a[i] := xx; 提高通知 '%', a[i].x;
  结束循环；
结尾;
$$ 语言 plpgsql;
创建函数
postgres=> 选择 fx();
通知：11
通知：31
 外汇
────

(1 行)

```

Significant limit for target of assign statement is possibility to refer only one level nested properties. This limit can be bypassed by auxiliary variables - it is not too friendly - and internal implementation is too simple, but it is fast and enough for typical stored procedure usage although it is not strong in comparison with generic programming languages.

# servlets - G-WAN URI servlet 剖析

> ID：13396510
> 
> 赞同：0
> 
> 时间：2012-11-15T11:23:11.183
> 
> 标签：servlets, uri, restful-url, g-wan

`gwan/csp/strangesubfolder/inc.c`可以通过访问`http://domainName.com/strangesubfolder/?inc`

我觉得这个`servlet`映射很奇怪，但这符合我的需要。我在 gwan 用户手册中找不到映射描述。

如果我错了，请纠正我并确认这是否是预期的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:22:04.207

是的，这是一个标准功能。

这 '？' 告诉 G-WAN 它是一个 servlet。如果没有'？它将在 WWW 文件夹中查找文件。

更新：

现在我明白你的困惑了。

自版本发布 3.3.27 以来，这已更改，因此用户可以轻松制作宁静的 URL

[G-WAN 时间线](http://gwan.ch/en_timeline.html)

阅读 2012 年 3 月 27 日的更新。

现在您需要放置“？” 在实际的 servlet 名称之前。通过这样做，G-WAN 可以有效地将 '/' 重写为 '&'，因此您无需编写任何代码就可以使用此类静态 URL。

```
//Old way
http://domain/?user/profile&user1
http://domain/?blog/archive&2012&march

//New way (more restful no '&')
http://domain/user/?profile/user1
http://domain/blog/?archive/2012/march 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:48:16.610

是的，正如理查德正确（并且及时，感谢理查德！）解释的那样，这是预期的行为。

该目录`/gwan/.../csp/script.c`用于存储必须运行的 servlet，同时`/gwan/.../www/script.c`用于存储旨在用作 HTTP 资源的文件。

对应的 URL 是`GET /?script.c`和`GET /script.c`。

`/csp`或文件夹中使用的任何子目录`/www`都会相应地反映在 HTTP 请求中：`GET /folder/?script.c`用于动态内容和`GET /folder/script.c`静态内容。

将`'?'`查询字符（可以被其他字符替换）从旧`GET /csp?/folder/script.c`形式移动到新`GET /folder/?script.c`形式的选择是出于以下需要：

*   区分`servlet`名称和`folder`名称（请求可能缺少定义的“默认”编程语言的 servlet 扩展，如果没有定义，则为 C）
*   允许任意数量的`sub-directories`HTTP 请求
*   允许任意数量的`query arguments`HTTP 查询
*   区分`folders`和`query arguments`在 HTTP 请求中
*   在上述所有情况下都可以`RESTFUL`提出请求。

我们花了一些时间才找到合适的功能组合，并且尽量减少冗长，但经验表明这很有效。

下面是一个同时具有子文件夹和查询参数的 RESTFUL 查询示例：

`GET /folder/?script/arg1/value1/arg2/value2/arg3/value3`

默认情况下，这是一个 C 脚本，除非另一种语言（可用于编写脚本的 15 种语言中）已被定义为“默认”语言。

Note that the 50+ script examples provided in the download archive illustrate this scheme which is also presented on the [developers](http://gwan.com/developers) page.

# php - 更改“---”标题时出现“致命错误：无法重新声明”联系表格 7 函数中的元素这是测试站点的 url - http://gil.beastserv.com/hava/ 我有这个函数，这里有一些帮助 function my_wpcf7_form_elements($html) { function ov3rfly_replace_include_blank($name, $text, &$html) { $matches = false; preg_match('/ <select< h1="">> ID：13396511
> 
> 赞同：1
> 
> 时间：2012-11-15T11:23:15.677
> 
> 标签：php, wordpress, preg-match, contact-form-7, add-filter

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:27:53.767

从[http://es2.php.net/manual/en/functions.user-defined.php](http://es2.php.net/manual/en/functions.user-defined.php)：

> PHP 中的所有函数和类都具有全局作用域——即使它们是在函数内部定义的，它们也可以在函数外部调用，反之亦然。
> 
> PHP 不支持函数重载，也不可能取消定义或重新定义先前声明的函数。

`ov3rfly_replace_include_blank`每次调用时都会声明函数`my_wpcf7_form_elements`，并且 PHP 不支持函数重载，因此会出现错误。由于所有 PHP 函数都具有全局范围，因此即使在外部定义它们，它们也可以在函数内部调用。尝试：

```
function ov3rfly_replace_include_blank($name, $text, &$html) {
        $matches = false;
        preg_match('/<select name="' . $name . '"[^>]*>(.*)<\/select>/iU', $html, $matches);
        if ($matches) {
            $select = str_replace('<option value="">---</option>', '<option value="">' . $text . '</option>', $matches[0]);
            $html = preg_replace('/<select name="' . $name . '"[^>]*>(.*)<\/select>/iU', $select, $html);
        }
    }

function my_wpcf7_form_elements($html) {
    ov3rfly_replace_include_blank('c_age', 'גיל', $html);
    ov3rfly_replace_include_blank('c_area', 'איזור', $html);
    ov3rfly_replace_include_blank('c_type', 'סוג ביטוח', $html);
    ov3rfly_replace_include_blank('c_area', 'איזור', $html);
    ov3rfly_replace_include_blank('c_cartype', 'סוג רכב', $html);
    ov3rfly_replace_include_blank('c_manifacture', 'יצרן', $html);
    ov3rfly_replace_include_blank('c_manifactureyear', 'שנת יצור', $html);
    ov3rfly_replace_include_blank('c_driversage', 'גיל הנהג', $html);
    ov3rfly_replace_include_blank('c_prevent', 'שלילות', $html);
    ov3rfly_replace_include_blank('c_claim', 'תביעות', $html);

    return $html;
}
add_filter('wpcf7_form_elements', 'my_wpcf7_form_elements'); 
```</select<>

# c# - 设置非模态对话框的所有者时无法关闭父窗体

> ID：13396512
> 
> 赞同：1
> 
> 时间：2012-11-15T11:23:18.253
> 
> 标签：c#, winforms

我有以下代码：

**表格1**

```
public partial class Form1 : Form
{
    Dialog dlg;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        dlg = new Dialog();
        dlg.Show(this);
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (dlg != null && !dlg.IsDisposed)
        {
            this.RemoveOwnedForm(dlg);
            dlg.Dispose();
        }
    }
} 
```

**对话**

```
public partial class Dialog : Form
{
    public Dialog()
    {
        InitializeComponent();
    }

    private void Dialog_FormClosing(object sender, FormClosingEventArgs e)
    {
        e.Cancel = true;
        Hide();
    }
} 
```

我需要在 form1 的“X”按钮上单击两次才能关闭它。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:42:54.057

I can't try it right now, but in the Dialog_FormClosing you could add this test

```
if(this.Owner != null)
{
    e.Cancel = true;
    Hide();
} 
```

From MSDN docs on [RemoveOwnedForm](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.removeownedform.aspx):

> The form assigned to the owner form remains owned until the RemoveOwnedForm method is called. In addition to removing the owned form from the list of owned form, this method also sets the owner form to null.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:06:19.347

解决方案：

```
private void Dialog_FormClosing(object sender, FormClosingEventArgs e)
{
    if (e.CloseReason != CloseReason.FormOwnerClosing)
    {
        e.Cancel = true;
        Hide();
    }
} 
```

此解决方案在 Form1_FormClosing 事件中不需要 dlg.Dispose() 和 this.RemoveOwnedForm(dlg)。

# javascript - 键盘事件目标元素

> ID：13396515
> 
> 赞同：1
> 
> 时间：2012-11-15T11:23:42.747
> 
> 标签：javascript

在处理键盘事件时，我意识到并非所有元素都可以获取事件目标。例如，当向没有**键盘焦点**的元素（“p”元素）添加处理程序时，如下所示，那么当我按下键盘时当然不会发生任何事情。

但是，如果我通过整个**文档**更改“p”元素以添加该键盘事件（假设通过将我的代码更改为**document.keydown = myFunction;**），那么代码运行良好。当我在某处读到时，这是因为键盘事件发生在文档中的某处，然后冒泡到文档元素。那么你能告诉我这个事件在文档中发生在哪里吗？这是代码：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>    
<p id = 'myId'>Some Text</p>

<script>

function myFunction(e)
{
var x=e.keyCode;
var keychar=String.fromCharCode(x);
alert("Key " + keychar + " was pressed down");
}
var myEl = document.getElementById('myId');
myEl.onkeydown = myFunction;

</script>
</body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:39:28.183

将 onkeydown 事件处理程序添加到文档元素的事实并不一定表明该事件正在冒泡到文档元素。

本质上，该指令告诉浏览器的是“当用户查看此页面时，使用此功能响应任何 keydown 事件”。

如果您在文档中有一个文本输入并在该输入中键入，您的处理程序仍然会以相同的方式做出反应，*然后*可以说事件从该元素冒泡通过任何包含元素一直到级别文件。但是如果没有这样一个元素——即一个旨在对键输入事件做出反应的元素——你的 keydown 事件将发生在文档的级别，而不是在下面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T11:29:52.830

我不确定您的确切问题是什么，但如果您想找出原始元素，请使用`e.target`.

```
function myFunction(e) {
  var x=e.keyCode;
  var keychar=String.fromCharCode(x);
  alert("Key " + keychar + " was pressed down");
  alert("Target: " + e.target);
}

document.onkeydown = myFunction; 
```

查看当前的小提琴，尝试在输入框中输入一些内容。您将看到输入的目标更改。[http://jsfiddle.net/BqWU7/](http://jsfiddle.net/BqWU7/)

# wpf - WPF / MVVM 中的自定义错误消息

> ID：13396517
> 
> 赞同：2
> 
> 时间：2012-11-15T11:23:45.277
> 
> 标签：wpf, mvvm

我阅读了大部分文章，我很高兴我可以使用属性（使用**IDataErrorInfo**）进行验证。那很棒。但是我浪费了几个小时，仍然没有很好的解决方案来显示自定义消息，**以防 IDataErrorInfo**因为投射失败而没有被触发。无论出现什么错误，它都没有任何意义，我想翻译它。 ![图片](../Images/ec65ef3e5a90f6c2d4e2f1bb0427c124.png)

我应该应用自定义转换器还是自定义验证规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:22:34.170

您可能想查看这篇博文：[http ://wpfglue.wordpress.com/2012/05/06/checking-property-types-automatically/](http://wpfglue.wordpress.com/2012/05/06/checking-property-types-automatically/)

它包含有关如何设置 ValidationRules 的示例，以便在类型转换错误发生之前捕获它们，并将其转换为有意义的本地化错误消息。IDataErrorInfo 在这里对您没有帮助，除非您真的想按照建议将所有属性包装成字符串，而我不想这样做。原因是绑定对象的属性设置成功后才查询IDataErrorInfo，如果类型不匹配就不会出现这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:39:00.277

我在我的视图模型中使用字符串属性，所以我可以使用 idataerrorinfo 处理每个输入。当然，在调用服务或将值放入我的模型时，我必须将我的字符串属性解析为正确的类型。

另一种方法是禁止在您的视图中输入。例如。只有数字文本框。

或使用 Behaviors(Blend Sdk)，例如：

```
<TextBox Text="{Binding MyDecimalProperty}">
        <i:Interaction.Behaviors>
            <Behaviors:TextBoxInputBehavior InputMode="DecimalInput"/>
        </i:Interaction.Behaviors>
 </TextBox> 
```

。CS

```
public class TextBoxInputBehavior : Behavior<TextBox>
{
    const NumberStyles validNumberStyles = NumberStyles.AllowDecimalPoint |
                                               NumberStyles.AllowThousands |
                                               NumberStyles.AllowLeadingSign;
    public TextBoxInputBehavior()
    {
        this.InputMode = TextBoxInputMode.None;
    }

    public TextBoxInputMode InputMode { get; set; }

    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.PreviewTextInput += AssociatedObjectPreviewTextInput;
        AssociatedObject.PreviewKeyDown += AssociatedObjectPreviewKeyDown;

        DataObject.AddPastingHandler(AssociatedObject, Pasting);

    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        AssociatedObject.PreviewTextInput -= AssociatedObjectPreviewTextInput;
        AssociatedObject.PreviewKeyDown -= AssociatedObjectPreviewKeyDown;

        DataObject.RemovePastingHandler(AssociatedObject, Pasting);
    }

    private void Pasting(object sender, DataObjectPastingEventArgs e)
    {
        if (e.DataObject.GetDataPresent(typeof(string)))
        {
            var pastedText = (string)e.DataObject.GetData(typeof(string));

            if (!this.IsValidInput(this.GetText(pastedText)))
            {
                System.Media.SystemSounds.Beep.Play();
                e.CancelCommand();
            }
        }
        else
        {
            System.Media.SystemSounds.Beep.Play();
            e.CancelCommand();
        }
    }

    private void AssociatedObjectPreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Space)
        {
            if (!this.IsValidInput(this.GetText(" ")))
            {
                System.Media.SystemSounds.Beep.Play();
                e.Handled = true;
            }
        }
    }

    private void AssociatedObjectPreviewTextInput(object sender, TextCompositionEventArgs e)
    {
        if (!this.IsValidInput(this.GetText(e.Text)))
        {
            System.Media.SystemSounds.Beep.Play();
            e.Handled = true;
        }
    }

    private string GetText(string input)
    {
        var txt = this.AssociatedObject;
        var realtext = txt.Text.Remove(txt.SelectionStart, txt.SelectionLength);
        var newtext = realtext.Insert(txt.CaretIndex, input);

        return newtext;
    }

    private bool IsValidInput(string input)
    {
        switch (InputMode)
        {
            case TextBoxInputMode.None:
                return true;
            case TextBoxInputMode.DigitInput:
                return CheckIsDigit(input);

            case TextBoxInputMode.DecimalInput:
                if (input.Contains("-"))
                    if (input.IndexOf("-") == 0 && input.LastIndexOf("-")==0)
                        return true;
                    else
                        return false;
                if (input.ToCharArray().Where(x => x == ',').Count() > 1)
                    return false;

                decimal d;
                return decimal.TryParse(input,validNumberStyles,CultureInfo.CurrentCulture, out d);
            default: throw new ArgumentException("Unknown TextBoxInputMode");

        }
        return true;
    }

    private bool CheckIsDigit(string wert)
    {
        return wert.ToCharArray().All(Char.IsDigit);
    }
}

public enum TextBoxInputMode
{
    None,
    DecimalInput,
    DigitInput
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:27:24.410

I don't know how you do Validation right now. But consider using the IDataErrorInfo Interface.

You can find an example here

[http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/](http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:56:58.873

如果你想自定义消息，唯一的办法就是实现你自己的`Validation rule`. [有关代码自定义验证](https://stackoverflow.com/questions/6153302/wpf-simple-validation-question-setting-custom-errorcontent)，请参阅此处的链接。

# android - 如何从我的应用程序登录 Dropbox

> ID：13396523
> 
> 赞同：2
> 
> 时间：2012-11-15T11:23:54.730
> 
> 标签：android, dropbox

我只想从我的应用程序登录 Dropbox。用户只需在我的编辑文本中输入用户名和密码，并且在用户按下我的应用程序的登录按钮后，用户名和密码应与保管箱匹配，并应返回用户令牌。请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:26:27.180

在以下位置查看 Dropbox API：

[https://www.dropbox.com/developers/start/setup#android](https://www.dropbox.com/developers/start/setup#android)

首先，您需要在[https://www.dropbox.com/developers/apps](https://www.dropbox.com/developers/apps)上创建一个应用程序。 然后，我建议您阅读上一个链接中的文档...但不是您的 edittexts 应该处理密码和用户名，他们将被转发到他们授权您的应用程序的地方 - 然后您将在`authenticationSuccessful()`回调中收到令牌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T07:27:23.090

做一件事。[只需从https://www.dropbox.com/developers/core/sdks/android](https://www.dropbox.com/developers/core/sdks/android)下载 Dropbox API 。在那里你可以找到一个示例程序 DBRoulette，然后你将这些类添加到你的程序中。它肯定有效。

# javascript - 骨干模型不允许我获取数据

> ID：13396527
> 
> 赞同：0
> 
> 时间：2012-11-15T11:24:29.543
> 
> 标签：javascript, backbone.js, backbone-views

我对 Backbone 很陌生，正在做一个简单的教程。我一直遇到一个我不明白的错误。这是我的代码。

```
(function($) {
    dataModel = new Backbone.Model.extend({
        data: [
        {text: "Google", href: "www.google.com"},
        {text: "Yahoo", href: "www.yahoo.com"},
        {text: "Youtube", href: "www.youtube.com"},
        ]
    });

var View = Backbone.View.extend({
    initialize: function(){
        this.template = $('#list-template').children();
    },
    el: $('#container'),
    events: {
        "click button": "render"
    },
    render: function(){
        var data = this.model.get('data');
        for(var i = 0, l = data.length; i < l; i++){
            var li = this.template.clone().find('a').attr('href', data[i].href).text(data[i].text).end();
            this.el.find('ul').append(li);
        }
    }
});

var view = new View({ model: dataModel });
})(jQuery); 
```

当我打电话时，`this.model.get('data')`我得到了错误`TypeError: Object function (){return a.apply(this,arguments)} has no method 'get'`。请告诉我我的错误。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:49:42.920

扩展模型时传递的所有属性和方法都是在其原型上设置的，而不是其属性，`dataModel`这里不是 Backbone 模型实例，而是 Backbone Model 子类。如果以这种方式访问​​ data 属性，您需要实例化模型并执行一个`modelInstance.data`而不是`modelInstance.get('data')`当数据被设置为模型属性时，如下例所示。

你想在这里做的是

```
var dataModel = new Backbone.Model({ // without the extend!
    data: [
    {text: "Google", href: "www.google.com"},
    {text: "Yahoo", href: "www.yahoo.com"},
    {text: "Youtube", href: "www.youtube.com"},
    ]
}); 
```

因为您想创建模型的实例而不是子类 Backbone.Model 类。`Extend`方法用于子类化核心 Backbone 类——视图、模型、集合和路由器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:50:55.413

您的“数据模型”只是模型的定义。您需要在将模型实例`new dataModel()`传递给视图时通过调用来创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:52:55.703

模型只定义一个数据元素的结构

```
Model
    defaults:
       text : null
       href : null 
```

你需要的是一个集合

```
Collection
    model : Model 
```

然后，您可以使用 .add 将数据设置为集合

```
Collection.add([
    {text: "Google", href: "www.google.com"},
    {text: "Yahoo", href: "www.yahoo.com"},
    {text: "Youtube", href: "www.youtube.com"},
]) 
```

要从集合中获取数据，请看这里 [http://underscorejs.org/#collections](http://underscorejs.org/#collections)

希望能帮助到你

# excel-2007 - Office2003兼容包装了吗？

> ID：13396530
> 
> 赞同：3
> 
> 时间：2012-11-15T11:24:33.167
> 
> 标签：excel-2007, excel-2003, file-extension, delphi-5, early-binding

在我的程序中，我必须加载一个 excel 文件。此文件可以具有以下扩展名：[.xls][.xlsx][.xlsm][.xlsb]。

Excel07+ 可以自然处理所有这些，但要在 Excel2003 中使用 [.xlsx][.xlsm][.xlsb]，您必须安装[http://www.microsoft.com/en-us/download/details。 aspx?id=3](http://www.microsoft.com/en-us/download/details.aspx?id=3)

这是我的代码来确定安装了哪个excel版本。问题：我不知道如何确定兼容包的安装（标记为 +++）

```
if (ExtractFileExt(sFileNameVorlage) = '.xlsx') or
   (ExtractFileExt(sFileNameVorlage) = '.xlsm') or
   (ExtractFileExt(sFileNameVorlage) = '.xlsb') then
   begin

     //determine version of excel (lower or equal 2003 )
     if StrToInt(Copy(oVersionscheck.version,1,2)) <= 11 then
     begin

       // equal 2003
       if StrToInt(Copy(oVersionscheck.version,1,2)) = 11 then
         if not +++compatibility pack installed?+++ then 
         begin    
           ShowMessage('Warning: Excel can´t open this file.');
           oVersionscheck.Quit;
           oVersionscheck := unassigned;
           Exit;
         end;
       end;
       oVersionscheck.Quit;
end; 
```

也许有人知道解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:56:40.557

我在[http://www.tech-archive.net/Archive/Word/microsoft.public.word.vba.general/2008-10/msg00682.html找到了以下答案](http://www.tech-archive.net/Archive/Word/microsoft.public.word.vba.general/2008-10/msg00682.html)

这是一个 VBA 函数，因此您可能需要将其翻译成您选择的编程语言。（在更现代的语言中，使用 Try/Catch 子句而不是“On Error Resume Next”）

```
Function Office2007CompatibilityInstalled()
'Checks whether in Office 2003 the compatibility pack for Office 2007/2010 is installed
    Dim WSHShell, RegKey, rKeyWord, Result
    Set WSHShell = CreateObject("WScript.Shell")
    RegKey = "HKEY_CLASSES_ROOT\Installer\Products\00002109020090400000000000F01FEC\"

    On Error Resume Next 'This is in an anticipation of what may happen in the next line
    'The next line will generate an error if the registry key does not exist.
    'This error will be ignored and execution will continue with the line following
    'it (because of "On Error Resume Next" statement). In this case the value of 
    'rKeyWord will remain uninitialised.
    rKeyWord = WSHShell.RegRead(RegKey & "ProductName")
    'In the line below we compare the value of rKeyWord to a fixed string which we
    'know to denote that Office2007 Compatibility Pack has been installed.
    'If the registry key did not exist then the value of rKeyWord will be uninitialised
    'and will be automatically converted to an empty string ("") for the purposes
    'of this comparison.
    If rKeyWord = "Compatibility Pack for the 2007 Office system" Then 
        Office2007CompatibilityInstalled = True
    End If
End Function 
```

# algorithm - 找出集合中出现频率最高的元素

> ID：13396532
> 
> 赞同：1
> 
> 时间：2012-11-15T11:24:40.733
> 
> 标签：algorithm

让您为您的网站构建一个分析程序，您每次访问时都会在其中记录页面的地址，因此您的 log.txt 可以是

```
x.com/a
x.com/b
x.com/a
x.com/c
x.com/a 
```

没有计数器，它只是一个日志文件，没有使用 sql，因为它有数千个元素，你的一千个左右的唯一域地址 (x.com/a x.com/b)，**最有效的方法是什么通过这个列表并吐出前 10 个网址。**

我最好的解决方案是通过日志文件，然后如果哈希表中不存在该域，则将其作为键添加，并增加它的值；然后在哈希上搜索最大的 10 个值。

我不相信这是最好的解决方案，不仅因为空间复杂性（如果唯一域从几千到几百万会发生什么），而且因为我需要对哈希表进行另一次搜索以找到最大的价值观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:27:32.363

Even for few thousands or few millions entries - your approach is just fine - it has a linear on average (`O(n)`) run time - so it is not that bad.

However, you can use a [map-reduce](http://en.wikipedia.org/wiki/MapReduce) approach if you want more scalability.

```
map(file):
   for each entry in file:
         emitIntermediate(getDomainName(entry),"1"))
reduce(domain,list):
   emit(domain,size(list)) 
```

The above will efficiently give you the list of `(domain,count)` tupples, and all you have to do is select the top 10.

Selecting the top 10 can be done using a map-reduce (distributed) sort for scalability - or using a min heap (iterate while maintaining the top 10 elements encountered in the heap). The second is explained with more details in [this thread](https://stackoverflow.com/q/10751953/572670)

* * *

About space complexity: If you are using a 64 bit system, you can use it as RAM, and let the OS do what it cans (by swapping elements to disk when needed), it is very unlikely that you will need more then the amount of [Virtual Memory](http://en.wikipedia.org/wiki/Virtual_memory) you have on a 64 bits machine. An alternative is to use a hash table (or a [B+ tree](http://en.wikipedia.org/wiki/B+_tree)) optimized for file systems and do the same algorithm on it.

* * *

However, if this is indeed the case - and the data does not fit RAM, and you cannot use map-reduce, I suspect **sorting and iterating** - though will be `O(nlogn)` will be more efficient (using external sort) - because the number of DISK ACCESSES will be minimized, and disk access is much slower then RAM access.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:48:40.940

不要重新发明轮子。Coreutils'`sort`并且`uniq`可以处理您的日志文件

```
sort log.txt | uniq -c | sort -n -r 
```

Coreutils 在 *nix 系统上可用，并已移植到 Windows。

如果您确实需要在自己的代码中汇总此处理，请查阅您的语言的可用库以获取其[multiset](http://en.wikipedia.org/wiki/Multiset)版本。例如，Python 是[Counter](http://docs.python.org/2/library/collections.html)类，它会很高兴地告诉你`most_common([n])`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:29:33.323

我建议每次检查文件都是错误的方法。更好的解决方案可能是解析文件并将数据推送到数据库中（ravendb 或其他 no-sql 应该是最简单的）。一旦到了那里，查询数据就变得微不足道了，即使是非常大量的数据。

# java - 安全访问 GitHub 时出现 UnknownHostKey 异常

> ID：13396534
> 
> 赞同：10
> 
> 时间：2012-11-15T11:24:58.840
> 
> 标签：java, ssl, github, jgit

我正在使用 jgit 安全地访问 GitHub 中的存储库。我执行以下操作来生成用于 GitHub 和我的客户端代码之间安全通信的密钥。

1.  生成密钥对：

    ```
    ssh-keygen -t rsa 
    ```

2.  使用 Account Settings -> SSH keys -> add SSH key 将公钥添加到 GitHub 帐户

3.  将步骤 1 中生成的私钥添加到本地主机：

    ```
    ssh-add id_rsa 
    ```

执行此操作后，当我尝试访问 GitHub 并进行克隆时，仍然收到以下错误：

```
org.eclipse.jgit.api.errors.TransportException: git@github.com:test/test_repo.git: UnknownHostKey: github.com. RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48
at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:137)
at org.eclipse.jgit.api.CloneCommand.fetch(CloneCommand.java:178)
at org.eclipse.jgit.api.CloneCommand.call(CloneCommand.java:125) 
```

这是我使用的代码：

```
 String localPath, remotePath;
    Repository localRepo;
    Git git;

    localPath = <path_to_local_repository>;
    remotePath = "git@github.com:test/test_repo.git";

    try {
        localRepo = new FileRepository(localPath + "/.git");
    } catch (IOException e) {
        e.printStackTrace();
    }
    git = new Git(localRepo);

    CloneCommand cloneCmd =  git.cloneRepository().
                setURI(remotePath).
                setDirectory(new File(localPath));
        try {
            cloneCmd.call();
        } catch (GitAPIException e) {
            log.error("git clone operation failed");
            e.printStackTrace();
        } 
```

请让我知道这里的问题以及我应该怎么做才能纠正它。

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-15T11:55:56.247

发生这种情况是因为您在 中没有 github 条目`~/.ssh/known_hosts`，并且`JSch`在这种情况下，在 jgit 中使用默认为拒绝会话。有关解决方案，请参阅此问题：[com.jcraft.jsch.JSchException: UnknownHostKey](https://stackoverflow.com/questions/2003419/com-jcraft-jsch-jschexception-unknownhostkey)

要设置 ssh 会话属性，需要为 jgit 创建会话工厂：

```
SshSessionFactory.setInstance(new JschConfigSessionFactory() {
  public void configure(Host hc, Session session) {
    session.setConfig("StrictHostKeyChecking", "no");
  }
}) 
```

或添加`StrictHostKeyChecking=no`到`~/.ssh/config`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-03T16:48:25.867

因为这个线程是第一个结果：

> com.jcraft.jsch.JSchException：UnknownHostKey：gitservername。RSA 密钥指纹"

如果问题仍然存在，唯一的答案是禁用**StrictHostKeyChecking**，出于安全目的，这是不可接受的。

如果问题仍然存在，您应该从另一个线程查看此答案：

[https://stackoverflow.com/a/44777270/13184312](https://stackoverflow.com/a/44777270/13184312)

解决持续存在的问题是：

```
ssh-keyscan -H -t rsa gitservername >> ~/.ssh/known_hosts 
```

# jquery - PHP 会话不会通过使用 IE9 和 Codeigniter 的 ajax 请求进行更新

> ID：13396535
> 
> 赞同：1
> 
> 时间：2012-11-15T11:25:01.993
> 
> 标签：jquery, codeigniter, internet-explorer-9

我有一个 CodeIgniter (CI) 应用程序，它在同一个应用程序中从 page1 到 page2 发出 jquery .ajax() 请求。

```
 $('.makecall').click(function() {
        mkcall = $(this).attr('href');
        $.ajax({
            type: "GET",
            url: mkcall,
            success: function(data) {
                currentcall = jQuery.parseJSON(data);
                $("#CurrentNumber").html("Current call: "+currentcall.number);
            }
        })
    return false;
    }) 
```

Page2 使用 CI 的会话类更新会话。

```
$svars = array('script_did' => $opt['number']['number']);
$this->session->set_userdata($svars); 
```

这在 Firefox/Chrome 中运行良好，但在 IE9 中不会添加会话值。javascript 执行良好，并且控制台中没有错误，因此它似乎确实是 IE9 或 CI 会话库的问题。

我怎样才能让 IE9 采取 valeus？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:45:49.853

您的 CI 会话名称是什么？根据[此讨论](http://codeigniter.com/forums/viewthread/189641/)，IE9 似乎不喜欢会话名称中的下划线，因此请确保删除下划线（如果存在）。

```
// Change this:
$config['sess_cookie_name'] = 'ci_session';
// to, IE does not like the underscore!
$config['sess_cookie_name'] = 'cisession'; 
```

# jpa - JPA-MSAccess DB 的 EntityManager 没有持久性提供程序

> ID：13396541
> 
> 赞同：2
> 
> 时间：2012-11-15T11:25:12.707
> 
> 标签：jpa, ms-access-2007

我试图使用 JPA 使用 JDBC:ODBC 连接连接到 MS 访问数据库。这是我的 Persistance.xml 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="DSRJPA">
    <provider>oracle.toplink.essentials.ejb.cmp3.EntityManagerFactoryProvider</provider>
    <class>com.entity.AccessEntity</class>
    <properties>
    <property name="toplink.jdbc.url" value="jdbc:odbc:MSAccessDB"/>
    <property name="toplink.jdbc.user" value="admin"/>
    <property name="toplink.jdbc.driver" value="sun.jdbc.odbc.JdbcOdbcDriver"/>
    <property name="toplink.jdbc.password" value="admin"/>
    <property name="toplink.jdbc.read-connections.min" value="1"/>   
    <property name="toplink.jdbc.write-connections.min" value="1"/> 
    </properties>
    </persistence-unit>
</persistence> 
```

但是当我运行代码时，我得到了这个错误：

```
Exception in thread "main" javax.persistence.PersistenceException: No Persistence provider for EntityManager named DSRJPA:  The following providers:
oracle.toplink.essentials.PersistenceProvider
oracle.toplink.essentials.ejb.cmp3.EntityManagerFactoryProvider
Returned null to createEntityManagerFactory.

    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:154)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
    at com.test.Access.main(Access.java:19) 
```

请告诉我这个错误。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:29:19.747

你在课堂上引用过你的持久化单元吗？

IE

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("DSRJPA"); 
```

# javascript - 如何使用车把模板动态加载不同的部分？

> ID：13396543
> 
> 赞同：18
> 
> 时间：2012-11-15T11:25:21.197
> 
> 标签：javascript, handlebars.js

我正在加载包含以下数据的模板：

```
"slides": [
    {
        "template": "video",
        "data": {
            "video": ""
        }
    },
    {
        "template": "image",
        "data": {
            "image": ""
        }
     }
] 
```

在我的模板中，我想循环播放这些幻灯片并根据配置的模板加载部分

```
{{#each slides}}
    {{> resources_templates_overlay_video }}
{{/each}} 
```

我怎样才能使这个部分加载动态（基于配置的模板）？

我正在使用[require-handlebars-plugin](https://github.com/SlexAxton/require-handlebars-plugin)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T17:53:53.690

据我所知，hbs 期望在编译时知道部分，这是在您传递数据之前。让我们解决这个问题。

首先，在渲染之前拉入你的动态部分，比如：

```
// I required the main template here for simplicity, but it can be anywhere
var templates = ['hbs!resources/templates/maintemplate'], l = data.slides.length;
for (var i=0; i<l; i++ )
    templates.push('hbs!resources/templates/overlay/'+data[i].template);

require(templates, function(template) {
    var html = template(data);
}); 
```

并定义一个将充当动态部分的助手

```
define(['Handlebars'], function (Handlebars) {

    function dynamictemplate(template, context, opts) {
        template = template.replace(/\//g, '_');
        var f = Handlebars.partials[template];
        if (!f) {
            return "Partial not loaded";
        }

        return new Handlebars.SafeString(f(context));
    }

    Handlebars.registerHelper('dynamictemplate', dynamictemplate);
    return dynamictemplate;
}); 
```

最后，修改你的主模板看起来像

```
{{#each slides}}
    {{dynamictemplate this.template this.data}}
{{/each}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-12T15:31:18.090

我发现上面的答案有点难以理解——它们泄漏了全局变量，有单字符变量，还有一些奇怪的命名。所以这是我自己的答案，供我（和你）参考：

**使用“hbs”的动态部分，express.js 默认车把实现**：

我用它来制作一个简单的博客`(article-name).md`，`/blog/(article-name)`创建一个动态部分：

```
// Create handlebars partials for each blog item
fs.readdirSync('blog').forEach(function(blogItem){
    var slug = blogItem.replace('.md','')
    var fileContents = fs.readFileSync('blog/'+blogItem, 'utf8')
    var html = marked(fileContents)
    var compiledTemplate = hbs.compile(html);
    hbs.registerPartial(slug, compiledTemplate);
})

// Create 'showBlogItem' helper that acts as a dynamic partial
hbs.registerHelper('showBlogItem', function(slug, context, opts) {
    var loadedPartial = hbs.handlebars.partials[slug];
    return new hbs.handlebars.SafeString(loadedPartial(context));
}); 
```

这是路线。如果部分不存在，则 404s，因为博客不存在。

```
router.get('/blog/:slug', function(req, res){
    var slug = req.param("slug")
    var loadedPartial = hbs.handlebars.partials[slug];
    if ( ! loadedPartial ) {
        return res.status(404).json({ error: 'Article not found' })
    }
    res.render('blog', {
        slug: slug
    });
}) 
```

`/views/blog.hbs`好像：

```
<div class="blog">
    {{ showBlogItem slug }}
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-11T22:04:36.073

当`Handlebars.partials[]`返回一个原始字符串时，这意味着部分未编译。

我不确定，但我最好的猜测是 Handlebars 在编译包含部分的模板时会在内部编译部分。因此，当您使用帮助程序包含部分内容时，Handlebars 无法识别它并且不会被编译。

您可以自己[编译](http://handlebarsjs.com/reference.html)部分。不要忘记注册已编译的部分，否则每次需要部分时都会编译，这会损害性能。像这样的东西应该工作。

```
var template = Handlebars.partials['templatename'],
    fnTemplate = null;

if (typeof template === 'function') {
  fnTemplate = template;
} else {
  // Compile the partial
  fnTemplate = Handlebars.compile(partial);
  // Register the compiled partial
  Handlebars.registerPartial('templatename', fnTemplate);  
}

return fnTemplate(context); 
```

# matlab - Numerical integration over non-uniform grid in matlab. Is there any function?

> ID：13396546
> 
> 赞同：7
> 
> 时间：2012-11-15T11:25:24.147
> 
> 标签：matlab, math

I've got function values in a vector `f` and also the vector containing values of the argument `x`. I need to find the define integral value of `f`. But the argument vector `x` is not uniform. Is there any function in Matlab that deals with integration over non-uniform grids?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T11:27:24.623

Taken from help :

> Z = trapz(X,Y) computes the integral of Y with respect to X using the trapezoidal method. X and Y must be vectors of the same length, or X must be a column vector and Y an array whose first non-singleton dimension is length(X). trapz operates along this dimension.

As you can see `x` does not have to be uniform.

For instance:

```
x = sort(rand(100,1)); %# Create random values of x in [0,1]
y = x;
trapz( x, y) 
```

Returns:

```
ans =

    0.4990 
```

Another example:

```
x = sort(rand(100,1)); %# Create random values of x in [0,1]
y = x.^2;
trapz( x, y) 
```

returns:

```
ans =

    0.3030 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:59:32.647

根据您的功能（以及`x`分布方式），您可以`spline`通过首先对数据进行插值来获得更高的准确性：

```
pp  = spline(x,y);
quadgk(@(t) ppval(pp,t), [range]) 
```

那是快速n肮脏的方式。还有一种更快、更直接的方法，但这种方法很丑陋，而且不太透明：

```
result = sum(sum(...
    bsxfun(@times, pp.coefs, 1./(4:-1:1)) .*...  % coefficients of primitive
    bsxfun(@power, diff(pp.breaks).', 4:-1:1)... % all 4 powers of shifted x-values
    )); 
```

作为一个为什么所有这些都可能有用的例子，我从[这里](http://www.mymathforum.com/viewtopic.php?f=22&t=18495)借用了这个例子。确切的答案应该是

```
>> pi/2/sqrt(2)*(17-40^(3/4))
ans =
     1.215778726893561e+00 
```

定义

```
>> x = [0 sort(3*rand(1,5)) 3];
>> y = (x.^3.*(3-x)).^(1/4)./(5-x); 
```

我们发现

```
>> trapz(x,y)
ans =
    1.142392438652055e+00

>> pp  = spline(x,y);
>> tic; quadgk(@(t) ppval(pp,t), 0, 3), toc
ans =
    1.213866446458034e+00
Elapsed time is 0.017472 seconds.

>> tic; result = sum(sum(...
    bsxfun(@times, pp.coefs, 1./(4:-1:1)) .*...  % coefficients of primitive
    bsxfun(@power, diff(pp.breaks).', 4:-1:1)... % all 4 powers of shifted x-values
    )), toc
result =
    1.213866467945575e+00
Elapsed time is 0.002887 seconds. 
```

所以`trapz`低估了价值超过`0.07`. 使用后两种方法，误差要小一个数量级。此外，该`spline`方法的可读性较差的版本要快一个数量级。

所以，有了这些知识：明智地选择:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:28:32.203

您可以对每对分段进行高斯求积`x`并将它们相加以获得完整的积分。

# javascript - jQuery：附加更多内容后获取溢出div的大小

> ID：13396548
> 
> 赞同：0
> 
> 时间：2012-11-15T11:25:26.547
> 
> 标签：javascript, jquery

分区：

```
<div id="hilo" style="width:48%;height:380px;overflow:auto;float:right;"> 
```

Javascript：

```
$('#re').click(function() {
    var error = 0;
    if($("#texto").val() == ""){
        $("#texto").css("border","solid 1px #990000");
        error = 1;
    }
    if(error == 1){
        return false;
    } else {
        var texto = $("#texto").val();
        var conv = $(this).attr("name");
        $.ajax({
            type: "POST",
            url: "ajaxHilo.php",
            cache: false,
            data: {
                'texto' : texto,
                'conv_id' : conv,
                'regresar' : 'ultimo'
            },
            success: function(data,status){
                $("#hilo").append(data);
                $("#texto").val("");
                var hei = $('#hilo').prop('scrollHeight');
                alert(hei);
                $("#hilo").animate({ scrollTop: hei}, 500);
                return false;
            },
            error: cualquierError
        });
    }
   }); 
```

id = re 的元素是一个按钮。

对于溢出的 div 的大小，我得到了最奇怪的结果，脚本将一个新的 div 插入到 div hilos 中，每次只有两行新内容，每行不超过 30 或 40 像素，但是，计数从 1473 开始，并且然后跳转到 2193 然后 2913 等等......

Firefox 滚动到底部，但 IE 给了我不同的数字（较小的数字）并且根本不滚动到底部......

我希望不要太混乱......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:38:45.300

我会在名为“hilo_content”的“hilo”中添加一个 div，将来自 ajax 响应的数据附加到它，然后使用 .outerHeight() 获取高度值。所以是这样的：

```
<div id="hilo" style="width:48%;height:380px;overflow:auto;float:right;">
    <div id="hilo_content"></div>
</div> 
```

并在成功回调中：

```
success: function(data,status){
    $("#hilo_content").append(data);
    $("#texto").val("");
    var hei = $('#hilo_content').outerHeight();
    alert(hei);
    $("#hilo_content").animate({ scrollTop: hei}, 500);
    return false;
} 
```

# regex - Understanding Regular Expression for the Below Template

> ID：13396551
> 
> 赞同：0
> 
> 时间：2012-11-15T11:25:42.300
> 
> 标签：regex, perl, svn, bugzilla, scmbug

I am installing scmbug to integrate bugzilla with svn on windows. After a whole day fight with scmbug. Seems like i made it to get off the ground.

I entered the commit comment as

* * *

bug 3

bug3

test test test

bla bla bla

* * *

But it give me error like the below

Scmbug error 3: No list of bug ids was found that matches the log_bugid_regex '^\s*bug\s*([\d|\s|,|#]*?):' and log_bugid_split_regex ',\s?#|\s?#|,|\s+' in the log message 'bug 3

grepping the syntax leads me to the conf file.

So expecting help to the understand the below regex and its valid input.

```
log_template => {
    # The log_bugid_regex is a regular expression that must
    # set the unnamed variable $1 to the bug number, or list
    # of bug numbers. It is checked for a match as: m/$regex/s

    log_bugid_regex => '^\s*bug\s*([\d|\s|,|#]*?):',

        # The log_bugid_split_regex is a regular expression
        # describing how a list of bug ids will be split in
        # individual bug numbers. It is split as: /$regex/

        log_bugid_split_regex => ',\s?#|\s?#|,|\s+',

    # The log_body_regex is a regular expression that must set
    # the unnamed variable $1 to the log comment. It is
    # checked for a match as: m/$regex/s

    log_body_regex => '^\s*bug.*?:\s*(.*)'

    }, 
```

Any Help would be appreciated.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:29:39.177

```
^\s*bug\s*([\d|\s|,|#]*?): 
```

正则表达式末尾有一个冒号；您的提交消息没有它。因此，它不匹配。

正则表达式旨在匹配以下条目：

```
bug #2,#666: Corrected the number of the beast 
```

`#`是可选的。

# objective-c - 运行数百万次循环迭代时出现“无法分配区域”malloc 错误

> ID：13396560
> 
> 赞同：4
> 
> 时间：2012-11-15T11:26:16.577
> 
> 标签：objective-c, malloc, nsdictionary, instruments

多亏了我在这里收到的很多帮助，我得到了一个算法来检查任何部分字谜的大约 15,000 个 8 字母单词的列表，对照大约 50,000 个总单词的列表（所以我想总共1.08 亿次迭代）。每次比较我都会调用一次这个方法（所以 7.5 亿次）。我收到以下错误，总是在第 119 次迭代到 1,350 的中间某个地方应该有：

```
AnagramFINAL(2960,0xac8c7a28) malloc: *** mmap(size=2097152) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug 
```

我已将内存问题缩小为大量分配的 CFStrings（不可变）。知道我能做些什么来解决这个问题吗？我正在使用 ARC 和`@autoreleasepool`，不知道我还能做什么，似乎有些东西没有在应该发布的时候发布。

AnagramDetector.h

```
#import <Foundation/Foundation.h>

@interface AnagramDetector : NSObject {

        NSDictionary *allEightLetterWords;
NSDictionary *allWords;

    NSFileManager *fileManager;
    NSArray *paths;
    NSString *documentsDirectory;
    NSString *filePath;
}

- (BOOL) does: (NSString *) longWord contain: (NSString *) shortWord;
- (NSDictionary *) setupAllWordList;
- (NSDictionary *) setupEightLetterWordList;
- (void) saveDictionary: (NSMutableDictionary *)currentArray;

@end 
```

AnagramDetector.m

```
@implementation AnagramDetector

- (id) init {
    self = [super init];
    if (self) {
        fileManager = [NSFileManager defaultManager];
        paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        documentsDirectory = [paths objectAtIndex:0];
    }
    return self;
}

- (BOOL) does: (NSString *) longWord contain: (NSString *) shortWord {
    @autoreleasepool {
          NSMutableString *longerWord = [longWord mutableCopy];
          for (int i = 0; i < [shortWord length]; i++) {
              NSString *letter = [shortWord substringWithRange: NSMakeRange(i, 1)];
              NSRange letterRange = [longerWord rangeOfString: letter];
              if (letterRange.location != NSNotFound) {
                  [longerWord deleteCharactersInRange: letterRange];
              } else {
                  return NO;
              }
          }
        return YES;
    }
}

- (NSDictionary *) setupAllWordList {

    @autoreleasepool {
        NSString *fileWithAllWords = [[NSBundle mainBundle] pathForResource:@"AllDefinedWords" ofType:@"plist"];
        allWords = [[NSDictionary alloc] initWithContentsOfFile: fileWithAllWords];
        NSLog(@"Total number of words: %d.", [allWords count]);
    }
    return allWords;
}

- (NSDictionary *) setupEightLetterWordList {

    @autoreleasepool {
        NSString *fileWithEightWords = [[NSBundle mainBundle] pathForResource:@"AllDefinedEights" ofType:@"plist"];
        allEightLetterWords = [[NSDictionary alloc] initWithContentsOfFile: fileWithEightWords];
        NSLog(@"Total number of words: %d.", [allEightLetterWords count]);
    }
    return allEightLetterWords;
}

- (void) saveDictionary: (NSMutableDictionary *)currentArray {

    @autoreleasepool {
        filePath = [documentsDirectory stringByAppendingPathComponent: @"A.plist"];
        [fileManager createFileAtPath:filePath contents: nil attributes: nil];
        [currentArray writeToFile: filePath atomically:YES];
        [currentArray removeAllObjects];
    }
}

@end 
```

启动时运行的代码（现在在 AppDelegate 中，因为没有 VC）：

```
@autoreleasepool {

    AnagramDetector *detector = [[AnagramDetector alloc] init];

    NSDictionary *allWords   = [[NSDictionary alloc] initWithDictionary:[detector setupAllWordList]];
    NSDictionary *eightWords = [[NSDictionary alloc] initWithDictionary:[detector setupEightLetterWordList]];

    int remaining = [eightWords count];

    for (NSString *currentEightWord in eightWords) {
        if (remaining % 10 == 0) NSLog(@"%d ::: REMAINING :::", remaining);
        for (NSString *currentAllWord in allWords) {
            if ([detector does: [eightWords objectForKey: currentEightWord] contain: [allWords objectForKey: currentAllWord]]) {
                // NSLog(@"%@ ::: CONTAINS ::: %@", [eightWords objectForKey: currentEightWord], [allWords objectForKey: currentAllWord]);
            }
        }
        remaining--;
    }
} 
```

![仪器](../Images/1172774d84d16b6810cafd5c06972462.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:47:38.277

问题似乎是很多自动释放的对象填满了等待释放的内存。所以一个解决方案是添加你自己的自动释放池范围来收集自动释放的对象并更快地释放它们。

我建议你做这样的事情：

```
for (NSString *currentEightLetterWord in [eightLetterWordsDictionary allKeys]) {
    @autoreleasepool { 
        for (NSString *currentWord in [allWordsDictionary allKeys]) {
        }
    }
} 
```

现在，内部所有自动释放的对象`@autoreleasepool { .. }`都将在外部循环的每次迭代中释放。

正如您所看到的，ARC 可能使您不必考虑大多数引用计数和内存管理问题，但是当使用直接或间接创建自动释放对象的方法时，对象仍然可以最终在 ARC 的自动释放池中。

我不真正推荐的另一种解决方案是尽量避免使用将使用自动释放的方法。然后`does:contain:`可以尴尬地重写为这样的东西：

```
- (BOOL) does: (NSString* ) longWord contain: (NSString *) shortWord {
    NSMutableString *haystack = [longWord mutableCopy];
    NSMutableString *needle = [shortWord mutableCopy];
    while([haystack length] > 0 && [needle length] > 0) {
        NSMutableCharacterSet *set = [[NSMutableCharacterSet alloc] init];
        [set addCharactersInRange:NSMakeRange([needle characterAtIndex:0], 1)];
        if ([haystack rangeOfCharacterFromSet:set].location == NSNotFound) return NO;
        haystack = [haystack mutableCopy];
        [haystack deleteCharactersInRange:NSMakeRange(0, [haystack rangeOfCharacterFromSet: set].location)];
        needle = [needle mutableCopy];
        [needle deleteCharactersInRange:NSMakeRange(0, 1)];
    }
    return YES;
} 
```

# javascript - 动态设置值后更改事件未触发

> ID：13396562
> 
> 赞同：4
> 
> 时间：2012-11-15T11:26:26.423
> 
> 标签：javascript, jquery

每当通过打开弹出窗口动态设置其值时，我想将更改事件绑定到 textarea（只读）。

我可以设置值，但更改事件没有被触发。

我使用下面的代码将更改事件绑定到 textarea ：

```
$('textarea[name="Cordinator"]').bind("change", onChangeCordinator);
function onChangeCordinator(){} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T11:30:08.580

你是如何设置值的？默认情况下，仅当浏览器用户更改值时才会触发更改事件。

如果您以编程方式设置值，则需要使用`.trigger('change')`

所以在你的 onclick 处理程序的某个地方你需要：

```
$('textarea[name="Cordinator"]').trigger('change'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:30:09.120

你的 js 有语法错误

将其更改为

```
$('textarea[name="Cordinator"]').bind("change", onChangeCordinator);}); 
```

这

```
$('textarea[name="Cordinator"]').bind("change", onChangeCordinator); 
```

**更新：**

好吧，您需要像这样在 textarea 上设置值后手动触发它

```
$('textarea[name="Cordinator"]').val('Set Your Value Here').trigger('change'); 
```

[演示](http://jsfiddle.net/XP35b/)

# ruby-on-rails - params and problems with if statements

> ID：13396564
> 
> 赞同：0
> 
> 时间：2012-11-15T11:26:49.417
> 
> 标签：ruby-on-rails

I want to create 3 links:

*   *Popularne* - `/`
*   *Nowe* - `/?order=1`
*   *Najlepsze* - `/?order=2`

Below code creates these links. Now, depends on `params[:order]` I want set this link to `class="active"`. I setup `<%= debug(params) if Rails.env.development? %>` and when I click for example *Nowe* it shows me order: '1' but looks like this if statement with `params[:order]` doesn't work, and it is not generating `class="active"`. It works only for *Popularne*. Any idea where is a problem? Looks like it's `params[:order]`.

```
 <ul class="navbar">
    <li><%= !params[:order] ? link_to("Popularne",{},:class=>"active"):link_to("Popularne")%></li>
    <li><%= params[:order] == 1 ? link_to("Nowe",:order=>1,:class=>"active"):link_to("Nowe",:order=>1)%></li>
    <li><%= params[:order] == 2 ? link_to("Najlepsze",:order=>2,:class=>"active"):link_to("Najlepsze",:order=>2)%></li>
  </ul> 
```

# c# - Monotouch IPA replaces another application signed on the same computer

> ID：13396566
> 
> 赞同：2
> 
> 时间：2012-11-15T11:27:04.257
> 
> 标签：c#, ipad, xamarin.ios, ipa

I have an application written on C#

The problems is following: there is some application on iPad, and this application written and signed on the computer I building and signing my application on.

So, there is a problem - when I'm trying to install my application, the previous installed application is replaced. What can I do to make these application be setted up simultaneously?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:21:32.963

您是否为第二个应用程序使用了不同的捆绑包 ID？

您通常应该使用以下约定：

`com.yourcompanyname.yourappname`

因此`yourappname`，每个应用程序都会有所不同，而不是安装在另一个应用程序之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:27:38.383

我的问题在于配置文件 - 我必须为我的应用程序创建一个

# content-management-system - TinyMCE bug with block elements

> ID：13396572
> 
> 赞同：3
> 
> 时间：2012-11-15T11:27:21.740
> 
> 标签：content-management-system, tinymce, website-admin-tool, website-admin

I have a problem with TinyMCE:

I need to get this code:

```
<blockquote>
    <h2>REVOLUTIONARY QUOTE RELATING MANIFESTO TO PROJECT GOES HERE</h2>
    <hr/>
    <p>Erik Heinsholt</p>
</blockquote> 
```

TinyMCE settings:

```
valid_elements: "a[href|target|title],ul,ol,li,br,strong/b,em/i,span[style<text-decoration: underline;|class],u,p,blockquote,hr,h2",
force_br_newlines: false,
force_p_newlines: true,
theme_advanced_buttons1: "undo,redo,|,bold,italic,underline,|,hr,code,preview, styleselect",
schema: "html5",
style_formats : [
    {title : "First Word", inline : "span", classes : "first_word"},
    {title : "Blockquote", block : "blockquote"},
    {title : "Quote Header", inline : "h2"}
] 
```

What I have: I write in admin textarea "REVOLUTIONARY QUOTE RELATING MANIFESTO TO PROJECT GOES HERE `<hr />` Erik Heisholt", then select "REVOLUTIONARY QUOTE RELATING MANIFESTO TO PROJECT GOES HERE", set a style "Quote Header" for it, then select all and set a style "Blockquote" for it. As a result I get this:

```
<blockquote><h2>REVOLUTIONARY QUOTE RELATING MANIFESTO TO PROJECT GOES HERE</h2></blockquote>
<blockquote><hr /></blockquote>
<blockquote><p>Erik Heinsholt</p></blockquote> 
```

What should I do to put all elements in one blockquote tag, not each element??

p.s.: the video describing this problem: [http://www.sendspace.com/file/nkz97d](http://www.sendspace.com/file/nkz97d)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:33:17.590

查看 tinymce 配置参数[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)和[valid_children](http://www.tinymce.com/wiki.php/Configuration%3avalid_children)。您可以定义`h2`- 和`hr`-tags 可能是其他 htmlnodes 的子节点。

# android - Android different screen support

> ID：13396575
> 
> 赞同：-3
> 
> 时间：2012-11-15T11:27:22.460
> 
> 标签：android

I want some help of different screen support. Also want to know the advantage of 9 Patch image over .png image use in the drawable folder.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:06:36.260

我推荐你使用这个目录结构：

```
drawable-mdpi // 320 x 480 - Galaxy Ace
drawable-hdpi // 480 x 800 - Desire, Nexus One
drawable-xhdpi // 720 x 1280 - Sony Xperia S, Galaxy S
drawable-large-nodpi // 800 x 1280 - Nexus 7
drawable-xlarge-nodpi // Galaxy Tab, Xoom 
```

注意：**nodpi**是防止资源扩展所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:32:23.300

一般来说，不能保证平板会配备`hdpi`密度屏幕（尤其是便宜的 7 英寸）。分辨率和密度是两个**分开**的野兽，甚至它们看起来像在一起。请阅读这篇文章[支持多屏幕](http://developer.android.com/guide/practices/screens_support.html)。我**强烈**推荐整个，但是，“使用配置限定符”部分将帮助您解决您的问题，因为您可以考虑将资源放在分辨率合格的资源文件夹中，而不是依赖于密度（取决于目标 API，因为这些出现在 HC 中）

# xml - Shopify XML API response - invalid element name: 3DSecureStatus

> ID：13396578
> 
> 赞同：3
> 
> 时间：2012-11-15T11:27:28.083
> 
> 标签：xml, shopify, opayo, 3d-secure

When querying Shopify transaction data (from the python api client) for transactions involving SagePay, we're receiving an error when the client attempts to parse the returned xml:

`Error(Error('Unable to parse xml data: not well-formed (invalid token): line 24, column 7',),)`

This appears to be being caused by the transaction/receipt element contents including an invalid xml tag name to indicate the 3D-secure status.

For instance:

```
<?xml version="1.0" encoding="UTF-8"?>
<transactions type="array">
  <transaction>
    <order-id type="integer">123456789</order-id>
    <amount type="decimal">123.45</amount>
    <status>success</status>
    <kind>sale</kind>
    <authorization>{-REDACTED-}</authorization>
    <created-at type="datetime">2012-01-01T01:01:01+00:00</created-at>
    <gateway>sage_pay_form</gateway>
    <id type="integer">123456789</id>
    <test type="boolean">false</test>
    <receipt>
      <VendorTxCode>123456789</VendorTxCode>
      <VPSTxId>{-REDACTED-}</VPSTxId>
      <Status>OK</Status>
      <StatusDetail>0000 : The Authorisation was Successful.</StatusDetail>
      <TxAuthNo>123456789</TxAuthNo>
      <AVSCV2>SECURITY CODE MATCH ONLY</AVSCV2>
      <AddressResult>NOTMATCHED</AddressResult>
      <PostCodeResult>NOTMATCHED</PostCodeResult>
      <CV2Result>MATCHED</CV2Result>
      <GiftAid>0</GiftAid>
      <3DSecureStatus>OK</3DSecureStatus>
      <CAVV>-REDACTED-</CAVV>
      <CardType>MC</CardType>
      <Last4Digits>1234</Last4Digits>
      <Amount>123.45</Amount>
    </receipt>
  </transaction>
</transactions> 
```

`As '3DSecureStatus' is not a valid xml element name, xml parsing fails.`

We're currently not in a position to use the `json api` as the python api client doesn't support it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:22:13.087

Shopify 将需要修复以不发送无效的 XML 元素名称。例如，元素名称可以带有下划线前缀。完成后我会在这里更新。

shopify python API 中缺少 JSON 支持，其实是由于 pyactiveresource 中缺少支持造成的。我已将[JSON 支持补丁](https://groups.google.com/forum/?fromgroups=#!topic/pyactiveresource/krLC7o_RGXw)上游发送到您可以使用的 activeresource。由于缺乏上游活动，它们似乎被忽略了。

更新： Shopify 已修复为不返回带有无效元素名称的 XML。相反，它将在元素名称中使用下划线作为无效起始字符的前缀。

# c# - Lock used in different methods

> ID：13396580
> 
> 赞同：0
> 
> 时间：2012-11-15T11:27:33.000
> 
> 标签：c#, locking

I have a question about locking and whether I'm doing it right.

In a class, I have a static lock-object which is used in several methods, assume access modifiers are set appropriately, I won't list them to keep it concise.

```
class Foo
{ 
   static readonly object MyLock = new object();

   void MethodOne()
   {
       lock(MyLock) { 
          // Dostuff
       }
   }

   void MethodTwo()
   {
       lock(MyLock) { 
          // Dostuff
       }
   }
} 
```

Now, the way I understand it, a lock guarantees only one thread at a time will be able to grab it and get into the DoStuff() part of one method.

But is it possible for the same thread to call MethodOne() and MethodTwo() at the same time? Meaning that he uses the lock he has gotten for both methods?

My intended functionality is that every method in this class can only be called by a single thread while no other method in this class is currently executing.

The underlying usage is a database class for which I only want a single entry and exit point. It uses SQL Compact, so if I attempt to read protected data I get all sorts of memory errors.

Let me just add that every once and a while a memory exception on the database occurs and I don't know where it's coming from. I thought it was because of one thread doing multiple things with the database before completing things, but this code seems to work like it should.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:30:48.977

> 但是同一个线程可以同时调用 MethodOne() 和 MethodTwo() 吗？

不，同一个线程不能同时调用这两个方法，无论是否`lock`使用。

```
lock(MyLock) 
```

可以这样理解：

`MyLock`对象有一个钥匙可以进入自己。首先访问它的线程（比如 t1）得到它。其他线程将不得不等到`t1`释放它。但是`t1`可以调用另一个方法并通过这一行，因为它已经获得了锁。

但是，同时调用这两种方法……单线程不可能。不在当前的编程世界中。

> 按照我的理解，锁保证一次只有一个线程能够抓住它并进入一种方法的 DoStuff() 部分。

您的理解是正确的，但请记住线程用于并行执行，但线程内的执行始终是顺序的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:30:20.973

> 但是同一个线程可以同时调用 MethodOne() 和 MethodTwo() 吗？

单个线程不可能同时调用*任何东西*。

在多线程应用程序中，这可能会发生 -**方法**可以同时调用，但`// Dostuff`部分只能按顺序访问。

> 我的预期功能是该类中的每个方法只能由单个线程调用，而该类中当前没有其他方法正在执行。

然后不要在你的应用程序中使用额外的线程——只使用主线程，不要使用额外的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:31:04.357

`Dostuff`运行`MethodOne`中的线程调用的唯一方法`MethodTwo`是调用. 如果这没有发生（即“相互锁定”组中的方法不会相互调用），那么您是安全的。`Dostuff``MethodOne``MethodTwo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:43:26.310

There are a few things that can be answered here.

> But is it possible for the same thread to call MethodOne() and MethodTwo() at the same time? Meaning that he uses the lock he has gotten for both methods?

No, a thread has a single program counter, its either in `MethodOne()` or in `MethodTwo()`. If however you have something as follows,

```
public void MethodThree()
{
    lock (MyLock)
    {
        MethodOne();
        MethodTwo();
    }
} 
```

That will also work, a thread can acquire the same lock multiple times. Just watch out for what you're doing as you can easily get into a deadlock as the code becomes more complex.

> My intended functionality is that every method in this class can only be called by a single thread while no other method in this class is currently executing.
> 
> The underlying usage is a database class for which I only want a single entry and exit point. It uses SQL Compact, so if I attempt to read protected data I get all sorts of memory errors.

I don't really understand why, but if you think you need to do this because you're using SqlCompact, you're wrong. You should be using [transactions](http://msdn.microsoft.com/en-us/library/csz1c3h7.aspx) which *are* supported on SqlCe.

E.g.

```
using (var connection = new SqlCeConnection())
using (var command = new SqlCeCommand())
using (var transaction = conn.BeginTransaction())
{
    command.Transaction = transaction;
    command.ExecuteNonQuery();
    transaction.Commit();
} 
```

# c# - WPF user control throws design-time exception

> ID：13396582
> 
> 赞同：8
> 
> 时间：2012-11-15T11:27:34.137
> 
> 标签：c#, wpf, design-time

I have a userControl which starts a timer. It looks like the XAML designer is trying to call that code, which links to some back-end database stuff. I keep getting an unhanded exception error in the design screen.

Any ideas how I can stop the designer trying to run the code?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T11:53:28.950

XAML 设计器将在设计器中加载时调用 UserControl 的构造函数。为了避免这种情况，您可以在 UserControl 构造函数中放置如下 if 条件

```
if(System.ComponentModel.DesignMode) return; 
```

您也可以通过这种方式检查

```
if (!System.ComponenyModel.DesignProperties.GetIsInDesignMode(this))
{ // write constructor code here  } 
```

# jquery - JQGrid - how to use inline editing?

> ID：13396583
> 
> 赞同：1
> 
> 时间：2012-11-15T11:27:34.480
> 
> 标签：jquery, asp.net-mvc, jqgrid

When a user selects a row on the JQGrid, he should be able to edit the editable fields and then press the Enter key which will post the row to the controller method which will update the database. I cannot find how to post the updated data to do this. I want to send the businessUnitId field and the editable fields as parameters to the controller mether to do this. This is my webpage;

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Maintenance
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <fieldset>
        <legend>Maintenance of Departments and Divisions</legend>
        <p>Add, edit or delete a department or division: <%: Html.DropDownList("BusinessUnitTypes")%></p>
        <p>To amend the department or division, select the row, make the change and then press the return key.</p>
        <table id="list" class="scroll"></table>
        <div id="pager" class="scroll" style="text-align:center;font-size: 11px;"></div>
    </fieldset>
    <!-- "BusinessUnitTypeId", (SelectList)ViewData["BusinessUnitTypes"] -->
<script type="text/javascript">
    $(document).ready(function () { reloadGrid(); });

    $('#BusinessUnitTypes').change(function () {
        $("#list").trigger("reloadGrid");
    });

    function reloadGrid() {
        var lastSelectedId;

        $('#list').jqGrid({
            url: '<%: Url.Action("GetBusinessUnits", "BusinessUnit")%>',
            postData: {
                businessUnitTypeId: function () { return $("#BusinessUnitTypes option:selected").val(); }
            },
            datatype: 'json',
            mtype: 'POST',
            colNames: ['ID', 'Name', 'Fax', 'Email', "Employees"],
            colModel: [
                { name: 'BusinessUnitId', index: 'BusinessUnitId', width: 25, editable: false },
                { name: 'BusinessUnitName', index: 'BusinessUnitName', width: 200, editable: true, edittype: 'text' },
                { name: 'Fax', index: 'Fax', width: 80, align: 'right', edittype: 'text', editable: true },
                { name: 'Email', index: 'Email', width: 200, editable: true, edittype: 'text' },
                { name: 'NumberOfEmployees', index: 'NumberOfEmployees', width: 70, editable: false}],
            rowNum: 20,
            rowList: [10, 20, 30],
            pager: $('#pager'),
            sortname: 'BusinessUnitName',
            viewrecords: true,
            sortorder: "asc",
            caption: "Edit",
            height: 575,
            onSelectRow: function (id) {
                if (id && id !== lastSelectedId) {
                    $('#list').restoreRow(lastSelectedId);
                    $('#list').editRow(id, true);
                    lastSelectedId = id;
                }
            },
            editurl: '<%: Url.Action("Save", "BusinessUnit")%>'
        });
    }

</script>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:09:38.180

如果用户通过按键保存数据，所有`editable`值和 rowid 将 * 自动 * 发送到指定的 URL 。`editurl``Enter`

在我看来，这是网格`BusinessUnitId`的原生独特之处。`id`您没有发布任何用于填充网格的测试数据。如果您将填充`id`与问题相同的值，`BusinessUnitId`则可以自动解决，因为 的值`BusinessUnitId`将作为 的`id`值`editurl`。或者，您可以将`key: true`属性添加到 in 的定义`BusinessUnitId`中`colModel`。

如果它不能解决您的问题，您可以`extraparam`在保存行期间使用发送其他数据。有关详细信息，请参阅[答案](https://stackoverflow.com/a/10396691/315935)。

我建议您另外添加`gridview: true`选项到网格并更改`pager: $('#pager')`为`pager: '#pager'`. 它将提高性能。

# camera - Three.js 第三人称相机

> ID：13396588
> 
> 赞同：1
> 
> 时间：2012-11-15T11:28:01.860
> 
> 标签：camera, rotation, three.js

我正在尝试在 three.js 中创建第三人称相机视图

我正在使用 THREE.FirstPersonControls(); 在我的相机上。然后将我的“玩家”对象的旋转和位置设置为与带有一些偏移的相机相同。

这似乎不起作用。

我更想知道的是我是否应该将我的 FirstPersonControls 添加到相机然后渲染它前面的“播放器”。或者将控件添加到播放器然后使相机始终指向播放器的背面？

编辑：

我尝试使用 camera.add(player); 将播放器对象设置为相机的子对象；

但移动相机并不会移动玩家。我认为添加子元素意味着它们会一起移动？

编辑2：

我采取了另一种方法，将相机和玩家都添加到一个组中，然后将我的第一人称控件添加到该组中……现在相机和玩家都被渲染了。但它完全抛弃了第一人称控制的工作方式。（例如向下看向左等）

谢谢你的帮助，

詹姆士

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:40:27.257

首先，控件的设计目的是控制*相机*，而不是对象。并且由于默认情况下，对象“向上”看 z 轴，而相机“向下”看 z 轴，因此当应用于相机以外的其他东西时，控件不太可能按预期工作。

其次，控件是示例的一部分，而不是库的一部分，因此它们不受官方支持。你可以随意攻击他们。

实现你想要的一种方法是让相机成为你的玩家的孩子。像这样的东西：

```
player.add( camera );
camera.position.set( 0, 50, 100 ); 
```

您可能需要在渲染循环中设置：

```
camera.lookAt( player.position ); 
```

然后你想用鼠标或键盘控制*播放器。*你最好的选择是编写你自己的控制器来做到这一点。网络上有很多例子。

# c++ - 编程范式；想知道是否需要重写/重构

> ID：13396589
> 
> 赞同：10
> 
> 时间：2012-11-15T11:28:03.453
> 
> 标签：c++, refactoring, paradigms

很长一段时间以来，我一直在研究一个应用程序。由于编程只是一种爱好，这个项目已经花费了太长时间，但这不是重点。我现在正处于每个“问题”都变得非常难以解决的地步。而且我正在考虑重构代码，但这会导致“完全”重写。

让我解释一下这个问题，以及我目前是如何解决的。基本上我有数据，我让事情发生在这些数据上（好吧，我描述了每个程序，不是吗？）。会发生什么：

> 数据 -> 要求查看器显示 -> 查看器根据实际数据显示数据 查看器返回用户输入 -> 数据 -> 要求“执行者”执行它 -> 新数据

![在此处输入图像描述](../Images/d21efff31963974c85b539aae04208a9.png)

现在这曾经工作得很好，我最初在想“嘿，我可能会通过 qt 或 windows 更改命令提示符 - 甚至可以使用外部 (C#) 并简单地调用这个程序”。

然而，随着程序的发展，它变得越来越令人厌烦。最重要的是，数据以不同的方式显示，具体取决于数据的内容以及 - 更重要的是 - 它所在的位置。所以我回到树并添加了某种方式来“跟踪”父行是什么”。然后一般查看器将搜索最具体的实际小部件。它使用具有 [location; widget] 值的列表，并找到最佳匹配位置。

问题在更新新“数据”时开始 - 我必须检查所有资产 - 查看器，保护程序等。更新检查机制给了我很多错误..诸如“嘿为什么它显示错误的小部件现在又来了？”。

现在我可以完全交换这个了。而不是调用通用查看器的树数据结构。我会使用面向对象的“内部”树功能。这些节点将是子节点（并且当需要新的查看器或保存机制时，会形成一个新的子节点）。

这将消除困难的检查机制，在那里我检查树中的位置。然而，它可能会打开另一罐蠕虫。我想对此发表一些评论？我是否应该将查看器完全分开 - 难以检查数据？或者新方法更好，但它将数据和执行组合到一个节点中。（因此，如果我想从 qt 更改为 cli/C#，这几乎是不可能的）

![在此处输入图像描述](../Images/6c61616fc46e8b84b25ae9729c684121.png)

我到底应该追求什么方法？还有什么我可以做的吗？为了使查看器保持独立，但又避免必须检查以查看应显示的小部件？

编辑，只是为了展示一些“代码”以及我的程序是如何工作的。不确定这是否有什么好处，正如我已经说过的那样，它已经变成了一堆方法论。

它旨在将几个“游戏制作者项目”合并在一起（因为 GM:studio 奇怪地缺少该功能）。Gamemaker 项目文件只是一组 xml 文件。（主 xml 文件仅包含指向其他 xml 文件的链接，以及每个资源（对象、精灵、声音、房间等）的 xml 文件）。然而，有一些“怪癖”使得无法使用诸如 boost 属性树或 qt 之类的东西进行阅读：1) 属性/子节点的顺序在文件的某些部分非常重要。2) 空白经常被忽略，但在其他方面，保留它非常重要。

话虽如此，节点也有很多点完全相同。就像背景可以有`<width>200</width>`，房间也可以有。然而，对于用户来说，他所谈论的宽度非常重要。

无论如何，因此“通用查看器”（AskGUIFn）具有以下类型定义来处理此问题：

```
 typedef int (AskGUIFn::*MemberFn)(const GMProject::pTree& tOut, const GMProject::pTree& tIn, int) const;
    typedef std::vector<std::pair<boost::regex, MemberFn> > DisplaySubMap_Ty;
    typedef std::map<RESOURCE_TYPES, std::pair<DisplaySubMap_Ty, MemberFn> > DisplayMap_Ty; 
```

其中“GMProject::pTree”是一个树节点，RESOURCE_TYPES 是一个常量，用于跟踪我目前的资源类型（精灵、对象等）。这里的“memberFn”只是加载小部件的东西。（虽然 AskGUIFn 当然不是唯一的通用查看器，但只有在其他“自动”-覆盖、跳过、重命名-处理程序失败时才打开这个查看器）。

现在展示如何初始化这些映射（命名空间“MW”中的所有内容都是一个 qt 小部件）：

```
AskGUIFn::DisplayMap_Ty AskGUIFn::DisplayFunctionMap_INIT() {
    DisplayMap_Ty t;
        DisplaySubMap_Ty tmp;

        tmp.push_back(std::pair<boost::regex, AskGUIFn::MemberFn> (boost::regex("^instances "), &AskGUIFn::ExecuteFn<MW::RoomInstanceDialog>));
        tmp.push_back(std::pair<boost::regex, AskGUIFn::MemberFn> (boost::regex("^code $"), &AskGUIFn::ExecuteFn<MW::RoomStringDialog>));
        tmp.push_back(std::pair<boost::regex, AskGUIFn::MemberFn> (boost::regex("^(isometric|persistent|showcolour|enableViews|clearViewBackground) $"), &AskGUIFn::ExecuteFn<MW::ResourceBoolDialog>));
        //etc etc etc
    t[RT_ROOM] = std::pair<DisplaySubMap_Ty, MemberFn> (tmp, &AskGUIFn::ExecuteFn<MW::RoomStdDialog>);

        tmp.clear();
        //repeat above
    t[RT_SPRITE] = std::pair<DisplaySubMap_Ty, MemberFn>(tmp, &AskGUIFn::ExecuteFn<MW::RoomStdDialog>);
    //for each resource type. 
```

然后，当树数据结构告诉一般查看器它希望显示时，查看器执行以下功能：

```
AskGUIFn::MemberFn AskGUIFn::FindFirstMatch() const {
    auto map_loc(DisplayFunctionMap.find(res_type));
    if (map_loc != DisplayFunctionMap.end()) {
        std::string stack(CallStackSerialize());
        for (auto iter(map_loc->second.first.begin()); iter != map_loc->second.first.end(); ++iter) {
            if (boost::regex_search(stack, iter->first)) {
                return iter->second;
            }
        }
        return map_loc->second.second;
    }

    return BackupScreen;
} 
```

**这就是问题开始变得坦率的地方。**该`CallStackSerialize()`函数依赖于调用堆栈。但是，call_stack 存储在“处理程序”中。我将它存储在那里是因为一切都从处理程序开始。我不确定我应该将这个“call_stack”存储在哪里。引入另一个跟踪正在发生的事情的对象？我尝试了将父节点与节点本身一起存储的路线。（防止需要调用堆栈）。然而，这并不像我希望的那样顺利：每个节点只是有一个包含其子节点的向量。所以使用指针指向父注释是不可能的......（PS：也许我应该在另一个问题中对此进行修改......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:37:16.703

将这种复杂的位置检查机制从查看器中重构/重写为专用类是有意义的，因此您可以在不影响程序其余部分的情况下改进您的解决方案。让我们称之为`NodeToWidgetMap`。

**架构**
似乎您正朝着[**模型-视图-控制器**](http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html)架构迈进，这是 IMO 的一件好事。您的树结构及其节点是模型，其中查看器和“小部件”是视图，而根据节点选择小部件的逻辑将是控制器的一部分。

主要问题仍然是何时以及如何为给定节点 N 选择小部件 w [N]以及如何存储此选择。

**NodeToWidgetMap：何时选择**
如果您可以假设 w [N]在其生命周期内即使节点被移动也不会改变，您可以在创建节点时正确选择它。否则，您将需要知道位置（或通过 XML 的路径），因此，在请求节点时要找到它的父节点。

**查找父节点**
我的解决方案是存储*指向*而不是节点实例本身的指针，可能使用`boost::shared_ptr`. 这有缺点，例如复制节点会迫使您实现自己的复制构造函数，该构造函数使用递归来创建子树的深层副本。（但移动不会影响子节点。）

存在替代方案，例如每当接触父节点各自的祖父向量时保持子节点为最新。或者您可以定义一个`Node::findParentOf(node)`函数，知道某些节点只能（或经常）作为某些节点的子节点找到。这很粗鲁，但对于小树来说效果相当好，只是不能很好地扩展。

**NodeToWidgetMap：如何选择**试着在一张纸上
写下如何选择 w [N的规则，也许只是部分地。]然后尝试将这些规则翻译成 C++。这在代码方面可能会稍长一些，但更容易理解和维护。

您当前的方法是使用正则表达式来匹配 XML 路径（堆栈）。

我的想法是创建一个查找图，其边缘由 XML 元素名称标记，其节点指示应使用哪个小部件。这样，您的 XML 路径（堆栈）描述了通过图表的路线。那么问题就变成了是否显式地建模一个图，或者是否可以使用一组函数调用来镜像这个图。

**NodeToWidgetMap：存储选择**
的位置 将唯一的数字 id 关联到每个节点，使用从节点 id 到 NodeToWidgetMap 内的小部件的映射记录小部件选择。

**重写与重构**
如果您重写，您可能会获得与现有框架（如 Qt）绑定的良好杠杆作用，以便专注于您的程序而不是重写轮子。将编写良好的程序从一个框架移植到另一个框架比围绕每个平台的特性进行抽象更容易。Qt 是一个很好的框架，用于获得经验和对 MVC 架构的良好理解。

完全重写让你有机会重新思考一切，但意味着你有从头开始的风险，并且在很长一段时间内都没有新版本。谁知道你是否有足够的时间来完成？如果您选择重构现有结构，您将逐步改进它，在每一步之后都有一个可用的版本。但是，停留在旧的思维方式中的风险很小，因为重写几乎迫使你重新思考一切。所以这两种方法都有其优点，如果你喜欢编程，我会重写。更多的编程，更多的快乐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:36:07.893

欢迎来到编程世界！
您描述的是应用程序的典型生命周期，从一个小的简单应用程序开始，然后它获得越来越多的功能，直到它不再可维护。你无法想象我在最后一个崩溃阶段看到了多少项目！
你需要重构吗？你当然知道！每时每刻！您需要重写所有内容吗？不太确定。
事实上，好的解决方案是按周期工作：你设计你需要编码的东西，你编码它，你需要更多功能，你设计这个新功能，你重构代码以便你可以集成新代码，等等。如果你不要这样做，那么您将达到重写然后重构成本更低的地步。获取这本书：重构 - Martin Fowler。如果你喜欢它，那么就得到这个：重构到模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T00:36:20.580

我建议购买一份 Robert Martins “C# 中的敏捷原则、模式和实践”的副本，他回顾了一些非常实用的案例研究，展示了如何克服此类维护问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T23:49:08.333

如前所述`Pedro NF`，Martin Fowler [“重构”](http://www.artima.com/intv/martin.html)是熟悉它的好地方。

# java - Hadoop：客户端可以使用配置类设置的所有设置的列表？

> ID：13396591
> 
> 赞同：0
> 
> 时间：2012-11-15T11:28:23.763
> 
> 标签：java, configuration, hadoop, documentation

在 Hadoop 客户端 API 中有一个重要的类[`Configuration`](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/conf/Configuration.html)，用于存储连接到集群、要发送的作业、HDFS 的属性。这些只是键值对，键和值都是`String`s。没有可以用来更改 map-reduce 作业设置的所有有意义的键的列表吗？那就是我需要可以用来设置属性的所有键的列表，这些键`Configuration`稍后将由客户端 API、namenode 或 jobtracker 解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:50:12.793

我建议您不要使用文字键名来处理配置中的键/值对。相反，不仅在 Configuration 类本身上使用静态辅助方法，而且在通过辅助方法读取和写入这些属性的其他类上使用静态辅助方法。这些其他类包括输入和输出格式类，

我推荐这个，因为在这些静态辅助方法中通常有额外的逻辑来控制或验证字符串与非字符串属性值之间的转换。

说明这个答案的另一种方式是查看配置类、输入格式类、输出格式类等上的静态方法的 javadoc。这为您提供了所需的完整 API。如果您坚持想知道有效的键名，那么请查看这些相同辅助方法的来源，因为这是使用和定义键名的地方。

# javascript - 使用触摸事件侦听器滚动手风琴

> ID：13396592
> 
> 赞同：1
> 
> 时间：2012-11-15T11:28:31.833
> 
> 标签：javascript, touch, dom-events

我正在创建一个链接列表，用户可以点击并显示子项目，就像手风琴一样。这是我的目标示例（来自 Metro iPhone 应用程序）。我的显然是用 HTML、JS 和 CSS 构建的。

![在此处输入图像描述](../Images/8aa3e52f3824634d23bad3ebf0ce85b7.png)

理想情况下，我不想使用一个`click`事件，因为[它在移动设备上触发之前有延迟，](https://developers.google.com/mobile/articles/fast_buttons)但是通过监听`touchstart`我有一个问题，如果用户将手指移到列表上以向上或向下滚动，那么它会立即触发一个 open或关闭手风琴上的活动。这不会发生在`click`. 我也有类似的问题`touchend`。

理想情况下，我更喜欢应用程序展示的行为，即能够用手指滚动列表，当触摸项目时，它会立即打开或关闭。

如果你想看看这个问题，我在这里有一个粗略的版本设置 - [http://goo。gl/2Z1fc](https://dl.dropbox.com/u/1709558/ipad-nav/nav.html)

# java - 用不同的字符替换一个字符，具体取决于它是哪个字符

> ID：13396593
> 
> 赞同：5
> 
> 时间：2012-11-15T11:28:34.890
> 
> 标签：java, regex, string, diacritics

我搜索了 SO（和 Google），但没有找到任何完全匹配我的问题的答案：

我想`String`用另一个字符替换所有瑞典字符和空格。我希望它按如下方式工作：

*   “å”和“ä”应替换为“a”
*   “ö”应替换为“o”
*   “Å”和“Ä”应替换为“A”
*   “Ö”应替换为“O”
*   “”应替换为“-”

这可以通过正则表达式（或任何其他方式）实现，如果可以，如何实现？

当然，下面的方法可以完成这项工作（我知道，可以通过在同一行替换例如“å”和“ä”来改进）：

```
private String changeSwedishCharactersAndWhitespace(String string) {
    String newString = string.replaceAll("å", "a");
    newString = string.replaceAll("ä", "a");
    newString = string.replaceAll("ö", "o");
    newString = string.replaceAll("Å", "A");
    newString = string.replaceAll("Ä", "A");
    newString = string.replaceAll("Ö", "O");
    newString = string.replaceAll(" ", "-");
    return newString;
} 
```

例如，我知道如何使用正则表达式将所有“å”、“ä”或“ö”替换为“”。问题是**如何使用正则表达式替换一个字符，具体取决于它是哪个字符**？肯定有比上述方法更好的使用正则表达式的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T11:35:53.377

对于带有变音符号的拉丁字符，用于检索基本字母代码 + 变音符号组合代码的 unicode 规范化（java 文本）可能会有所帮助。就像是：

```
import java.text.Normalizer;
newString = Normalizer.normalize(string,
        Normalizer.Form.NFKD).replaceAll("\\p{M}", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:35:02.270

您可以使用[StringUtils.replaceEach](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#replaceEach%28java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String%5b%5d%29)，如下所示：

```
private String changeSwedishCharactersAndWhitespace(String string) {
    String newString = StringUtils.replaceEach (string, 
      new String[] {"å", "ä", "ö", "Å", "Ä", "Ö", " "}, 
      new String[] {"a", "a", "o", "A", "A", "O", "-"});
    return newString;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T11:35:25.570

我认为没有一个通用的正则表达式可以一次替换这些字符。除此之外，您可以使用`HashMap`.

```
HashMap<String, String> map = new HashMap<String, String>()
                              {{put("ä", "a"); /*put others*/}};

for (Map.Entry<String, String> entry : map.entrySet())
    newString = string.replaceAll(entry.getKey(), entry.getValue()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:47:02.403

您可以使用 matcher.find 方法编写自己的映射器：

```
public static void main(String[] args) {
    String from = "äöÂ";
    String to   = "aoA";
    String testString = "Hellö Wärld";

    Pattern p = Pattern.compile(String.format("[%s]", from));
    Matcher m = p.matcher(testString);
    String result = testString;
    while (m.find()){
        char charFound = m.group(0).charAt(0);
        result = result.replace(charFound, to.charAt(from.indexOf(charFound)));
    }

    System.out.println(result);
} 
```

这将取代

```
Hellö Wärld 
```

和

```
Hello Warld 
```

# visual-studio - Visual Studio 2012：更改“启用浮动选项卡井”的设置

> ID：13396596
> 
> 赞同：27
> 
> 时间：2012-11-15T11:28:37.540
> 
> 标签：visual-studio, resharper

我在使用 VS2012 时遇到问题，并且代码在单独的窗口中打开。

看这个截图： ![在此处输入图像描述](../Images/adb87a1fefac7fa5d97a1893dccf29e9.png)

主窗口打开，另一个窗口打开（源代码管理资源管理器只是屏幕截图的一个示例，我在源代码文件中得到相同的行为）。我曾经在 Visual Studio 的任务栏上获得两个项目。现在只有一个。

有一个设置： ![在此处输入图像描述](../Images/b56a2602952dce654f39514e189bbbd6.png)

但我无法将其撤消。每次我取消选中此设置时，我都会在任务栏中看到另一个项目闪烁，但它会立即消失。然后我回到相同的设置，再次选中“浮动标签井始终保持在顶部”旁边的复选框！这很烦人。

我已将该设置跟踪到注册表设置`HKCU\Software\Microsoft\VisualStudio\11.0\DialogPage\Microsoft.VisualStudio.Platform.WindowManagement.Options.TabsAndWindowsOptionsPage\EnableIndependentTabWell`，并在 VS 未运行时尝试将其设置为 True（它为 False）。但是一旦 VS 启动，它就会再次切换到 False。

我已经安装了 2012 年的 Power Tools - 有一些自定义选项卡井的设置，但我现在已经删除了该扩展。我相信是扩展程序导致了这个问题，但是为什么卸载扩展程序后它仍然存在？我该如何解决？

**UPD：**当我在安全模式下（通过）运行 VS 时，`devenv /safemode`该设置保持不变。但是一旦我运行正常模式，它就会自动更改。

**UPD 2：** Resharper 7.1 是罪魁祸首。[此问题由此错误](http://youtrack.jetbrains.com/issue/RSRP-322167)引起。要启用浮动选项卡，请执行以下操作：这种情况需要关闭“始终位于顶部”选项，您可以通过将设置文件安装到 ReSharper 设置（ReSharper | Manage Options | Add Layer）来解决 ReSharper 行为。请注意，此可能会导致 ReSharper 功能在浮动窗口中出现错误行为。通过[Resharper 论坛](http://blogs.jetbrains.com/dotnet/2012/09/resharper-71-early-access-is-open/)

文件 AllowFloatingTabWells.DotSettings

```
<wpf:ResourceDictionary xml:space="preserve" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:s="clr-namespace:System;assembly=mscorlib" xmlns:ss="urn:shemas-jetbrains-com:settings-storage-xaml" xmlns:wpf="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
  <s:Boolean x:Key="/Default/Housekeeping/SuppressOwnerlessFloatingWindows/IsDisablingIndependentFloating/@EntryValue">False</s:Boolean>
</wpf:ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-15T11:50:33.190

你在使用 Resharper 吗？那么这可能解释了这个问题。只需在以下网站搜索浮动：http: [//blogs.jetbrains.com/dotnet/2012/09/resharper-71-early-access-is-open/](http://blogs.jetbrains.com/dotnet/2012/09/resharper-71-early-access-is-open/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-04T19:03:43.063

按照resharper[网站上博客文章的](http://blog.jetbrains.com/dotnet/2012/09/28/resharper-71-early-access-is-open/)说明，创建一个包含以下代码的 .DotSettings 文件：

```
<wpf:ResourceDictionary xml:space="preserve" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:s="clr-namespace:System;assembly=mscorlib" xmlns:ss="urn:shemas-jetbrains-com:settings-storage-xaml" xmlns:wpf="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
  <s:Boolean x:Key="/Default/Housekeeping/SuppressOwnerlessFloatingWindows/IsDisablingIndependentFloating/@EntryValue">False</s:Boolean>
</wpf:ResourceDictionary> 
```

在 Visual Studio 中，转到 Resharper -> 管理选项 -> 添加图层。找到这个文件并添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-10T21:17:46.007

窗口快捷方式

以下是控制活动窗口的键盘快捷键列表：

*   最小化窗口 `Alt`+`F2`
*   最大化/恢复窗口 `Alt`+`F3`
*   垂直最大化窗口`Alt`+`F5`
*   水平最大化窗口`Alt`+`F6`
*   **切换“始终处于领先地位” `Win`+`A`**
*   隐藏窗口 `Win`+`Q`
*   最小化到托盘`Win`+`F2`
*   从托盘取消隐藏/恢复`Win`+`F3`

# c++ - 将分配类的数组成员的内存吗？

> ID：13396597
> 
> 赞同：0
> 
> 时间：2012-11-15T11:28:38.950
> 
> 标签：c++, arrays, class, memory

*我想知道类的数组成员的内存是否在 C++ 中分配。*
在我的课堂上，我定义了这样的数组成员：

```
class A
{
  public:
    B* B_array[1000];
} 
```

并且，在构造函数中，我想使用它：

```
A::A()
{
  for(int i = 0; i < 1000; i++)
  {
     B_array[i] = new B;//can i use B_array[0...999]???
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:30:33.110

```
B* B_array[1000]; 
```

你所拥有的是一个`1000`指向 type 的指针数组`B`。

```
 for(int i = 0; i < 1000; i++)
  {
       B_array[i] = new B;//can i use B_array[0...999]???
  } 
```

为数组中的每个指针分配内存，在此语句之后，每个指针都指向堆上的内存。

所以是的，一旦执行此代码，您就可以使用它们中的每一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:33:51.160

是的你可以。当你进入构造函数体时，有1000个未初始化的指针等着你去初始化它们。

但是，您**应该**做的是使用`std::vector<B>`

```
class A
{
  public:
     std::vector<B> array;
}

A::A() : array(1000) {} 
```

并完成它。Vector 动态分配其元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:31:41.010

是的你可以。将始终为 1000 个指针分配内存。但是，除非您自己这样做（就像您在构造函数中一样），否则这些指针不会被初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:36:18.027

> > 我想知道在 C++ 中是否为类的数组成员分配内存

是的，为什么不。如果您怀疑以您正在做的方式分配数组，这是可能的。如果您的疑问是在仍在 A 的构造函数中时调用 B 的构造函数，那么也绝对没有问题。

但总的来说，我会在显示的代码中注意几件事，例如不硬编码值 1000、检查新的异常等。你明白了。

而且您还应该为显式释放 A 的析构函数中的内存资源而烦恼。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T11:37:53.017

是的，将分配用于 B 类实例的 1000 个指针的内存。`B_array[1000]`您已经定义了一个对象数组`B*`。它与 相同`int integerArray [1000]`。您只需将指针存储在数组中，而不是值。但是，您需要将它们初始化为指向堆上的实际对象。

# r - 在 R 中压缩数据帧

> ID：13396603
> 
> 赞同：1
> 
> 时间：2012-11-15T11:29:04.303
> 
> 标签：r

有什么方法可以在 R 中压缩数据框。我有一个外部文件，我想将它导入数据框。但是，由于数据很大，会导致内存错误。虽然我不确定压缩在 R 中是否有意义，因为它使用 RAM 内存来创建数据结构，但如果可以使用任何与压缩同义的东西，它真的会帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-12-14T15:59:21.003

也许现在回答这个问题为时已晚，但我想我最好分享一些最近在 R 中允许压缩数据帧的工作。目前，R 中有一个名为`fst`( [Lightning Fast Serialization of Data Frames for R)](http://www.fstpackage.org/) 的包，您可以在其中为您的数据框创建压缩`fst`对象。详细的解释可以在[fst-package 手册](https://cran.r-project.org/web/packages/fst/fst.pdf)`fst`中找到，但我将简要解释如何使用它以及一个对象占用多少空间。首先，让我们用一些数据创建一个数据框，然后检查这个数据框的大小，如下：

```
install.packages("pryr") # for object_size()
library(pryr)
N <- 1000 * 8
M <- 100
df <- data.frame(A = c(rep(strrep("A", M), N), rep(strrep("B", N), N)))
object_size(df)
# 73.3 kB 
```

现在，让我们将此数据框转换为`fst`对象，如下所示：

```
install.packages("fst") #install the package
library(fst) #load the package
path <- paste0(tempfile(), ".fst") #create a temporary '.fst' file
write_fst(df, path) #write the dataframe into the '.fst' file
ft <- fst(path) #load the data as an fst object
object_size(ft)
# 2.14 kB 
```

`.fst`创建文件的磁盘空间为`434 bytes`. 您可以将`ft`对象作为普通数据框处理（据我尝试）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:18:12.497

该`data.table`包存储类似于数据帧的数据，但增加了一些效率，这可能会充分压缩您的数据。

更通用的解决方案是将您的数据加载到数据库中，而不是直接加载到 R 中，然后只从数据库中提取您需要的部分，sqldf 和 RSQLite 包可能会有所帮助。曾经有一个名为 SQLiteDF 的包使这个过程变得透明（数据在数据库中，但是在 R 中有一个对象，看起来和行为都像一个数据框，但从数据库中提取数据）。可以通过 CRAN 获得该软件包的存档副本，但可能需要进行一些工作才能使其与最新版本的 R 一起使用（该软件包的最新版本是 2009 年）。

评论中提到的 CRAN 任务视图页面上还有其他工具（向下滚动到“大内存”部分），它们讨论了其他一些可能性以及如何分析在 RAM 中使用的大数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-06T07:09:47.263

如果你有一个比 ff 包更大的数据框，它可能会帮助你以更小的尺寸存储你的大数据。尝试查看 CRAN 上可用的 ff 包

# c# - Excel 到 DataTable 使用 EPPlus - Excel 锁定编辑

> ID：13396604
> 
> 赞同：36
> 
> 时间：2012-11-15T11:29:06.023
> 
> 标签：c#, excel, epplus

我正在使用以下代码使用 EPPlus 将 Excel 转换为数据表：

```
public DataTable ExcelToDataTable(string path)
{
    var pck = new OfficeOpenXml.ExcelPackage();
    pck.Load(File.OpenRead(path));
    var ws = pck.Workbook.Worksheets.First();
    DataTable tbl = new DataTable();
    bool hasHeader = true;
    foreach (var firstRowCell in ws.Cells[1, 1, 1, ws.Dimension.End.Column])
    {
        tbl.Columns.Add(hasHeader ? firstRowCell.Text : string.Format("Column {0}", firstRowCell.Start.Column));
    }
    var startRow = hasHeader ? 2 : 1;
    for (var rowNum = startRow; rowNum <= ws.Dimension.End.Row; rowNum++)
    {
        var wsRow = ws.Cells[rowNum, 1, rowNum, ws.Dimension.End.Column];
        var row = tbl.NewRow();
        foreach (var cell in wsRow)
        {
            row[cell.Start.Column - 1] = cell.Text;
        }
        tbl.Rows.Add(row);
    }
    pck.Dispose();
    return tbl;
} 
```

它会创建 Excel，但是，当我尝试打开它时，它会提示我它已被其他用户锁定以供编辑，并且我只能在只读模式下打开它。

我想使用：

```
pck.Dispose(); 
```

可以解决问题，但是我仍然遇到同样的错误。

此外，当我尝试删除文件时，我收到消息：无法完成操作，因为文件已在 WebDev.WebServer40.EXE 中打开。

任何想法如何解决这个问题？提前致谢。:)

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-11-15T11:39:27.597

我明白了，这就是[我最近在这里发布](https://stackoverflow.com/a/11239895/284240)的内容（现已更正）。由于使用后不处理the`ExcelPackage`和 the `FileStream`(from ) ，因此可以改进它。`File.OpenRead`

```
public static DataTable GetDataTableFromExcel(string path, bool hasHeader = true)
{
    using (var pck = new OfficeOpenXml.ExcelPackage())
    {
        using (var stream = File.OpenRead(path))
        {
            pck.Load(stream);
        }
        var ws = pck.Workbook.Worksheets.First();  
        DataTable tbl = new DataTable();
        foreach (var firstRowCell in ws.Cells[1, 1, 1, ws.Dimension.End.Column])
        {
            tbl.Columns.Add(hasHeader ? firstRowCell.Text : string.Format("Column {0}", firstRowCell.Start.Column));
        }
        var startRow = hasHeader ? 2 : 1;
        for (int rowNum = startRow; rowNum <= ws.Dimension.End.Row; rowNum++)
        {
            var wsRow = ws.Cells[rowNum, 1, rowNum, ws.Dimension.End.Column];
            DataRow row = tbl.Rows.Add();
            foreach (var cell in wsRow)
            {
                row[cell.Start.Column - 1] = cell.Text;
            }
        }
        return tbl;
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-20T04:41:58.877

Tim Schmelter 答案的扩展版本。

```
public static DataTable ToDataTable(this ExcelWorksheet ws, bool hasHeaderRow = true)
{
    var tbl = new DataTable();
    foreach (var firstRowCell in ws.Cells[1, 1, 1, ws.Dimension.End.Column])
        tbl.Columns.Add(hasHeaderRow ?
            firstRowCell.Text : string.Format("Column {0}", firstRowCell.Start.Column));
    var startRow = hasHeaderRow ? 2 : 1;
    for (var rowNum = startRow; rowNum <= ws.Dimension.End.Row; rowNum++)
    {
        var wsRow = ws.Cells[rowNum, 1, rowNum, ws.Dimension.End.Column];
        var row = tbl.NewRow();
        foreach (var cell in wsRow) row[cell.Start.Column - 1] = cell.Text;
        tbl.Rows.Add(row);
    }
    return tbl;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-02T14:01:00.800

我创建了一种使用 EPPlus 将 Excel 文件转换为 DataTable 的方法，并尝试维护类型安全。还会处理重复的列名，并且使用布尔值可以告诉方法工作表是否有带标题的行。我为一个复杂的导入过程创建了它，该过程在上传后有几个步骤，在提交到数据库之前需要用户输入。

```
private DataTable ExcelToDataTable(byte[] excelDocumentAsBytes, bool hasHeaderRow)
{
    DataTable dt = new DataTable();
    string errorMessages = "";

    //create a new Excel package in a memorystream
    using (MemoryStream stream = new MemoryStream(excelDocumentAsBytes))
    using (ExcelPackage excelPackage = new ExcelPackage(stream))
    {
        ExcelWorksheet worksheet = excelPackage.Workbook.Worksheets[1];

        //check if the worksheet is completely empty
        if (worksheet.Dimension == null)
        {
            return dt;
        }

        //add the columns to the datatable
        for (int j = worksheet.Dimension.Start.Column; j <= worksheet.Dimension.End.Column; j++)
        {
            string columnName = "Column " + j;
            var excelCell = worksheet.Cells[1, j].Value;

            if (excelCell != null)
            {
                var excelCellDataType = excelCell;

                //if there is a headerrow, set the next cell for the datatype and set the column name
                if (hasHeaderRow == true)
                {
                    excelCellDataType = worksheet.Cells[2, j].Value;

                    columnName = excelCell.ToString();

                    //check if the column name already exists in the datatable, if so make a unique name
                    if (dt.Columns.Contains(columnName) == true)
                    {
                        columnName = columnName + "_" + j;
                    }
                }

                //try to determine the datatype for the column (by looking at the next column if there is a header row)
                if (excelCellDataType is DateTime)
                {
                    dt.Columns.Add(columnName, typeof(DateTime));
                }
                else if (excelCellDataType is Boolean)
                {
                    dt.Columns.Add(columnName, typeof(Boolean));
                }
                else if (excelCellDataType is Double)
                {
                    //determine if the value is a decimal or int by looking for a decimal separator
                    //not the cleanest of solutions but it works since excel always gives a double
                    if (excelCellDataType.ToString().Contains(".") || excelCellDataType.ToString().Contains(","))
                    {
                        dt.Columns.Add(columnName, typeof(Decimal));
                    }
                    else
                    {
                        dt.Columns.Add(columnName, typeof(Int64));
                    }
                }
                else
                {
                    dt.Columns.Add(columnName, typeof(String));
                }
            }
            else
            {
                dt.Columns.Add(columnName, typeof(String));
            }
        }

        //start adding data the datatable here by looping all rows and columns
        for (int i = worksheet.Dimension.Start.Row + Convert.ToInt32(hasHeaderRow); i <= worksheet.Dimension.End.Row; i++)
        {
            //create a new datatable row
            DataRow row = dt.NewRow();

            //loop all columns
            for (int j = worksheet.Dimension.Start.Column; j <= worksheet.Dimension.End.Column; j++)
            {
                var excelCell = worksheet.Cells[i, j].Value;

                //add cell value to the datatable
                if (excelCell != null)
                {
                    try
                    {
                        row[j - 1] = excelCell;
                    }
                    catch
                    {
                        errorMessages += "Row " + (i - 1) + ", Column " + j + ". Invalid " + dt.Columns[j - 1].DataType.ToString().Replace("System.", "") + " value:  " + excelCell.ToString() + "<br>";
                    }
                }
            }

            //add the new row to the datatable
            dt.Rows.Add(row);
        }
    }

    //show error messages if needed
    Label1.Text = errorMessages;

    return dt;
} 
```

用于演示目的的网络表单按钮单击。

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (FileUpload1.HasFile)
    {
        DataTable dt = ExcelToDataTable(FileUpload1.FileBytes, CheckBox1.Checked);

        GridView1.DataSource = dt;
        GridView1.DataBind();
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-25T15:07:27.367

这是对上述通用版本的改进。使用的是，如果您有一个具有以下属性的类，“姓名”、“姓氏”、“电话”、“传真”，并且您有一个具有相同名称的第一行的 excel 表，它会将 excel 行加载到类对象并将其弹出到列表中

```
public static List<T> GetClassFromExcel<T>(string path, int fromRow, int fromColumn, int toRow = 0, int toColumn = 0)
{
if (toColumn != 0 && toColumn < fromColumn) throw new          Exception("toColumn can not be less than fromColumn");
if (toRow != 0 && toRow < fromRow) throw new Exception("toRow can not be less than fromRow");
List<T> retList = new List<T>();
using (var pck = new ExcelPackage())
{
            using (var stream = File.OpenRead(path))
            {
                pck.Load(stream);
            }
            //Retrieve first Worksheet
            var ws = pck.Workbook.Worksheets.First();
            //If the to column is empty or 0, then make the tocolumn to the count of the properties
            //Of the class object inserted
            toColumn = toColumn == 0 ? typeof(T).GetProperties().Count() : toColumn;

            //Read the first Row for the column names and place into a list so that
            //it can be used as reference to properties
            Dictionary<string, int> columnNames = new Dictionary<string, int>();
            // wsRow = ws.Row(0);
            var colPosition = 0;
            foreach (var cell in ws.Cells[1, 1, 1, toColumn == 0 ? ws.Dimension.Columns : toColumn])
            {
                columnNames.Add(cell.Value.ToString(), colPosition);
                colPosition++;
            }
            //create a instance of T
            T objT = Activator.CreateInstance<T>();
            //Retrieve the type of T
            Type myType = typeof(T);
            //Get all the properties associated with T
            PropertyInfo[] myProp = myType.GetProperties();

            //Loop through the rows of the excel sheet
            for (var rowNum = fromRow; rowNum <= (toRow == 0? ws.Dimension.End.Row : toRow); rowNum++)
            {
                var wsRow = ws.Cells[rowNum, fromColumn, rowNum, ws.Cells.Count()];

                foreach (var propertyInfo in myProp)
                {
                    if (columnNames.ContainsKey(propertyInfo.Name))
                    {
                        int position = 0;
                        columnNames.TryGetValue(propertyInfo.Name, out position);
                        //int position = columnNames.IndexOf(propertyInfo.Name);
                        //To prevent an exception cast the value to the type of the property.
                        propertyInfo.SetValue(objT, Convert.ChangeType(wsRow[rowNum, position + 1].Value, propertyInfo.PropertyType));
                    }
                }

                retList.Add(objT);
            }

        }
        return retList;
    } 
```

现在，如果需要，您可以将列表用作数据绑定源...我给您的礼物... :) Daniel C. Vrey

更新它以使 toColumn 工作并添加 toRow 并遵循 Andreas 的建议。为安德烈亚斯竖起大拇指

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-03-19T17:19:11.763

VDWWD 上面的答案非常适合保持类型安全，我在此基础上进行了一些改进。

*   方法直接从文件中读取。
*   通过使用所有行而不是一个值来检测列类型。如果在列中找到多个类型，则将列类型设置为字符串。
*   在字符串列表中返回的错误消息。

这是更新的版本：

```
 public static DataTable ExcelToDataTable(string path, ref List<string> errorList, bool hasHeaderRow = true  )
    {
        DataTable dt = new DataTable();
        errorList = new List<string>();

        //create a new Excel package           
        using (ExcelPackage excelPackage = new ExcelPackage())
        {
            using (var stream = File.OpenRead(path))
            {
                excelPackage.Load(stream);
            }

            ExcelWorksheet worksheet = excelPackage.Workbook.Worksheets[1];

            //check if the worksheet is completely empty
            if (worksheet.Dimension == null)
            {
                return dt;
            }

            //add the columns to the datatable
            for (int j = worksheet.Dimension.Start.Column; j <= worksheet.Dimension.End.Column; j++)
            {
                string columnName = "Column " + j;

                //Build hashset with all types in the row
                var columnTypes = new HashSet<Type>();                   
                for (int i = worksheet.Dimension.Start.Row + Convert.ToInt32(hasHeaderRow); i <= worksheet.Dimension.End.Row; i++)
                {
                    //Only add type if cell value not empty
                    if (worksheet.Cells[i, j].Value != null)
                    {
                        columnTypes.Add(worksheet.Cells[i, j].Value.GetType());
                    }
                }

                var excelCell = worksheet.Cells[1, j].Value;

                if (excelCell != null)
                {
                    Type excelCellDataType = null;

                    //if there is a headerrow, set the next cell for the datatype and set the column name
                    if (hasHeaderRow == true)
                    {

                        columnName = excelCell.ToString();

                        //check if the column name already exists in the datatable, if so make a unique name
                        if (dt.Columns.Contains(columnName) == true)
                        {
                            columnName = columnName + "_" + j;
                        }
                    }

                    //Select  input type for the column
                    if (columnTypes.Count == 1)
                    {
                        excelCellDataType = columnTypes.First();
                    }
                    else
                    {
                        excelCellDataType = typeof(string);
                    }

                    //try to determine the datatype for the column (by looking at the next column if there is a header row)
                    if (excelCellDataType == typeof(DateTime))
                    {
                        dt.Columns.Add(columnName, typeof(DateTime));
                    }
                    else if (excelCellDataType == typeof(Boolean))
                    {
                        dt.Columns.Add(columnName, typeof(Boolean));
                    }
                    else if (excelCellDataType == typeof(Double))
                    {
                        //determine if the value is a decimal or int by looking for a decimal separator
                        //not the cleanest of solutions but it works since excel always gives a double
                        if (excelCellDataType.ToString().Contains(".") || excelCellDataType.ToString().Contains(","))
                        {
                            dt.Columns.Add(columnName, typeof(Decimal));
                        }
                        else
                        {
                            dt.Columns.Add(columnName, typeof(Int64));
                        }
                    }
                    else
                    {
                        dt.Columns.Add(columnName, typeof(String));
                    }
                }
                else
                {
                    dt.Columns.Add(columnName, typeof(String));
                }
            }

            //start adding data the datatable here by looping all rows and columns
            for (int i = worksheet.Dimension.Start.Row + Convert.ToInt32(hasHeaderRow); i <= worksheet.Dimension.End.Row; i++)
            {
                //create a new datatable row
                DataRow row = dt.NewRow();

                //loop all columns
                for (int j = worksheet.Dimension.Start.Column; j <= worksheet.Dimension.End.Column; j++)
                {
                    var excelCell = worksheet.Cells[i, j].Value;

                    //add cell value to the datatable
                    if (excelCell != null)
                    {
                        try
                        {
                            row[j - 1] = excelCell;
                        }
                        catch
                        {
                            errorList.Add("Row " + (i - 1) + ", Column " + j + ". Invalid " + dt.Columns[j - 1].DataType.ToString().Replace("System.", "") + " value:  " + excelCell.ToString() );
                        }
                    }
                }

                //add the new row to the datatable
                dt.Rows.Add(row);
            }
        }

        return dt;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-17T07:36:33.217

```
public static List<T> getClassFromExcel<T>(string path, int fromRow, int fromColumn, int toColumn = 0) where T : class
        {
            using (var pck = new OfficeOpenXml.ExcelPackage())
            {
                List<T> retList = new List<T>();

                using (var stream = File.OpenRead(path))
                {
                    pck.Load(stream);
                }
                var ws = pck.Workbook.Worksheets.First();
                toColumn = toColumn == 0 ? typeof(T).GetProperties().Count() : toColumn;

                for (var rowNum = fromRow; rowNum <= ws.Dimension.End.Row; rowNum++)
                {
                    T objT = Activator.CreateInstance<T>();
                    Type myType = typeof(T);
                    PropertyInfo[] myProp = myType.GetProperties();

                    var wsRow = ws.Cells[rowNum, fromColumn, rowNum, toColumn];

                    for (int i = 0; i < myProp.Count(); i++)
                    {
                        myProp[i].SetValue(objT, wsRow[rowNum, fromColumn + i].Text);
                    }
                    retList.Add(objT);
                }
                return retList;
            }
        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-20T11:25:19.923

```
public static List<T> GetClassFromExcel<T>(string path, int fromRow, int fromColumn, int toRow = 0, int toColumn = 0) where T: class, new()
{
        if (toColumn != 0 && toColumn < fromColumn) throw new Exception("toColumn can not be less than fromColumn");
        if (toRow != 0 && toRow < fromRow) throw new Exception("toRow can not be less than fromRow");
        List<T> retList = new List<T>();
        using (var pck = new ExcelPackage())
        {
            using (var stream = File.OpenRead(path))
            {
                pck.Load(stream);
            }
            //Retrieve first Worksheet
            var ws = pck.Workbook.Worksheets.First();

            toColumn = toColumn == 0 ? typeof(T).GetProperties().Count() : toColumn; //If the to column is empty or 0, then make the tocolumn to the count of the properties Of the class object inserted

            //Read the first Row for the column names and place into a list so that
            //it can be used as reference to properties
            Dictionary<string, int> columnNames = new Dictionary<string, int>();
            // wsRow = ws.Row(0);
            var colPosition = 0;
            foreach (var cell in ws.Cells[1, 1, 1, toColumn == 0 ? ws.Dimension.Columns : toColumn])
            {
                columnNames.Add(cell.Value.ToString(), colPosition);
                colPosition++;
            }

            //Retrieve the type of T
            Type myType = typeof(T);

            //Get all the properties associated with T
            PropertyInfo[] myProp = myType.GetProperties();

            //Loop through the rows of the excel sheet
            for (var rowNum = fromRow + 1; rowNum <= (toRow == 0 ? ws.Dimension.End.Row : toRow); rowNum++) // fromRow + 1 to read from next row after columnheader
            {

                //create a instance of T
                //T objT = Activator.CreateInstance<T>();
                T objT = new T();

                // var wsRow = ws.Cells[rowNum, fromColumn, rowNum, ws.Cells.Count()]; //ws.Cells.Count() causing out of range error hence using ws.Dimension.Columns to get last column index 
                var wsRow = ws.Cells[rowNum, fromColumn, rowNum, ws.Dimension.Columns];
                foreach (var propertyInfo in myProp)
                {
                    var attribute = propertyInfo.GetCustomAttributes(typeof(DisplayNameAttribute), true).Cast<DisplayNameAttribute>().SingleOrDefault();
                    string displayName = attribute != null && !string.IsNullOrEmpty(attribute.DisplayName) ? attribute.DisplayName : propertyInfo.Name; // If DisplayName annotation not used then get property name itself                       
                    if (columnNames.ContainsKey(displayName))
                    {
                        int position = 0;                           
                        columnNames.TryGetValue(displayName, out position);
                        ////int position = columnNames.IndexOf(propertyInfo.Name);
                        ////To prevent an exception cast the value to the type of the property.
                        propertyInfo.SetValue(objT, Convert.ChangeType(wsRow[rowNum, position + 1].Value, propertyInfo.PropertyType));
                    }
                }                   
                retList.Add(objT);
            }

        }
        return retList;
    }
//IMPLEMENTATION DONE BY PLACING Code IT IN SEPARATE Helpers.CS file  and 
//Consuming it in this manner
List<CustomerExcelModel> records = 
Helpers.GetClassFromExcel<CustomerExcelModel>(filelocation, 1, 1); 
```

非常感谢提交代码的用户和 Andreas 的建议这里是完成以下更改，我是泛型新手，所以请原谅并纠正我的任何错误请在下面找到修改后的代码它可能对某人有所帮助

*   添加了Display Annotation 实体模型以与Excel 列名进行映射，以便也可以处理带有空格的列名。
*   有问题“T objT”，因为它在 for 循环之外，因此导致相同的值重复插入到 List 通过
    实例化循环内部修复它，即使用“new T()”
*   通过使用“ws.Dimension.Columns”获取列计数而不是 ws.Cells.Count() 来修复列超出范围错误，因为它会导致超出范围列错误
*   用于循环遍历行数据向它添加了 +1，因为 RowNum=1 正在读取标题名称，所以对“rowNum = fromRow + 1”进行了微小的更改

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-23T10:52:16.940

在这里，我分享如何阅读excel。您可以修改它以将每个日期存储在数据表中。

```
public void readXLS(string FilePath)
{
    FileInfo existingFile = new FileInfo(FilePath);
    using (ExcelPackage package = new ExcelPackage(existingFile))
    {
        //get the first worksheet in the workbook
        ExcelWorksheet worksheet = package.Workbook.Worksheets[1];
        int colCount = worksheet.Dimension.End.Column;  //get Column Count
        int rowCount = worksheet.Dimension.End.Row;     //get row count
        for (int row = 1; row <= rowCount; row++)
        {
            for (int col = 1; col <= colCount; col++)
            {
                //You can update code here to add each cell value to DataTable.
                Console.WriteLine(" Row:" + row + " column:" + col + " Value:" + worksheet.Cells[row, col].Value.ToString().Trim());
            }
        }
    }
} 
```

[参考： http](http://sforsuresh.in/read-data-excel-sheet-insert-database-table-c/) ://sforsuresh.in/read-data-excel-sheet-insert-database-table-c/

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-21T10:32:14.057

如果您想从 excel 中读取每个工作表的数据，以及工作表包含特定列的日期格式数据，请使用以下代码。

```
public static DataSet ReadExcelFileToDataSet2(string filePath, bool isFirstRowHeader=true)

    {
        DataSet result = new DataSet();

        Excel.ExcelPackage xlsPackage = new Excel.ExcelPackage(new FileInfo(filePath));  //using Excel = OfficeOpenXml;    <--EPPLUS
        Excel.ExcelWorkbook workBook = xlsPackage.Workbook;

        try
        {
            for (int count = 1; count <= workBook.Worksheets.Count; count++)
            {
                Excel.ExcelWorksheet wsworkSheet = workBook.Worksheets[count];

                if (wsworkSheet.Name.ToLower() == "sheetName")
                {
                    wsworkSheet.Column(4).Style.Numberformat.Format = "MM-dd-yyyy";  // set column value to read as Date Type or numberformat
                }

                DataTable tbl = new DataTable();
                // wsworkSheet.Dimension - (It will return cell dimesion like A1:N7 , means returning the worksheet dimesions.)
                // wsworkSheet.Dimension.End.Address - (It will return right bottom cell like N7)
                // wsworkSheet.Dimension.End.Columns - (It will return count from A1 to N7  like here 14)
                foreach (var firstRowCell in wsworkSheet.Cells[1, 1, 1, wsworkSheet.Dimension.End.Column])  //.Cells[Row start, Column Start, Row end, Column End]
                {
                   var colName = "";
                   colName = firstRowCell.Text;
                   tbl.Columns.Add(isFirstRowHeader ? colName : string.Format("Column {0}", firstRowCell.Start.Column));  //Geth the Column index (index starting with 1) from the left top.
                }
                var startRow = isFirstRowHeader ? 2 : 1;
                for (int rowNum = startRow; rowNum <= wsworkSheet.Dimension.End.Row; rowNum++)
                {
                    var wsRow = wsworkSheet.Cells[rowNum, 1, rowNum, wsworkSheet.Dimension.End.Column]; //  wsworkSheet.Cells[Row start, Column Start, Row end, Column End]
                    DataRow row = tbl.Rows.Add();
                    foreach (var cell in wsRow)
                    {
                        row[cell.Start.Column - 1] = cell.Text;
                    }
                }

                tbl.TableName = wsworkSheet.Name;

                result.Tables.Add(tbl);
            }

        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        return result;
    } 
```

# jquery - 将自动调整宽度表显示为弹出窗口

> ID：13396606
> 
> 赞同：0
> 
> 时间：2012-11-15T11:29:13.063
> 
> 标签：jquery, html, css, django, jquery-ui

我有一个表单，表单中有一个按钮，当我单击它时，它将显示一个由循环表组成的弹出窗口。这意味着表格没有固定宽度但有固定高度。基本上我的问题是如何实现这个结果，以便弹出窗口会根据表格的内容自动调整大小，而无需用户进行调整。我已经尝试检查[完美弹出窗口](http://www.howtocreate.co.uk/perfectPopups.html)

> 调整弹出窗口的大小以适应未知宽度的非图像内容

但我无法让它在我的页面中工作。我对此有点慢。

这是一张我想要的照片。 ![图1](../Images/fe74a094acf40d009e95cdebdd08e34b.png)

供参考。每次有新数据时，该表都会显示在下方。我怎样才能使它不会在下面显示。如果这是解决方案，只要在有新数据时不会跳到下方，水平滚动也可以。基本上这就是表格的样子。 ![在此处输入图像描述](../Images/ded2859bf41c4f03fedc8dce5ba49627.png)

html

```
<input type="button" value="Condition" onClick="window.open('{% url Condition_view dept_id patient_NO %}', '', 'width=500, height=200, menubar=0, resizable=0, scrollbars=yes, status=0, titlebar=0, toolbar=0')"> 
```

请帮忙。我的情况的最佳解决方案是什么？只要可以在 django 中使用，我对所有解决方案都持开放态度。在这种情况下，我是新手。非常感谢任何帮助。谢谢你。

已编辑的问题

我来自 {% url Condition_view dept_id patient_NO %} 页面的 html 表

```
<body>

{% if conditioner%}
<div id ="patient_table" style="clear:both">
<form action="." method="post" onsubmit=""> 
{% csrf_token %}
<table border="1" id="thetable">
<thead>
  <tr>
  <th>Person_ID {{ patient_CPR }}</th>
  <th>Smoker</th>
  <th>Weight</th>
  <th>Height</th>
      </tr>
    </thead>
    <tbody>
{% for condition in conditioner %}
{% with "#CCE6FF" as bgcolor%} 
<tr>
   <td style="height: 30">{{ condition.NEW_DATE }}</td>
   <td>
   <select class="SMOKER" name="condition">
   <option value="{{condition.smoker.0.0}}"
   {% if condition.SMOKER == condition.smoker.0.0 %}selected="selected"{% endif %}>Never</option>
       <option value="{{condition.smoker.1.0}}" 
       {% if condition.SMOKER == condition.smoker.1.0 %}selected="selected"{% endif %}>Ex-smoker</option>
       </select>
   </td>
   <td><input type="text" name="condition" id="condition{{ forloop.counter }}" value="{{ condition.WEIGHT }}" /></td>
   <td><input type="text" name="condition" id="condition{{ forloop.counter }}" value="{{ condition.HEIGHT }}" /></td>
    </tbody>
 </table>
 <input type="submit" value="Save" />
 </form>
 </div>

 {% else %}
 <p>No patient.</p>
 {% endif %}

 </body> 
```

希望有了这些信息，有人可以帮助我解决我的问题。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:46:54.450

更改您`onClick`的调用函数，以便您可以设置函数内的宽度

HTML

```
<input onClick="openTableWindow('{% url Condition_view dept_id patient_NO %}')"> 
```

JS

```
function openTableWindow(url) {
    var windowWidth = /* get width of table*/
    var windowProperties = 'width=' + windowWidth + ', height=200, ......  toolbar=0';
    window.open(url, '', windowProperties);
} 
```

# azure - 如何在 Windows Azure 上部署 Wordpress 多站点，我的方式

> ID：13396610
> 
> 赞同：1
> 
> 时间：2012-11-15T11:29:26.927
> 
> 标签：azure, dns, wordpress

我正在查看 Windows Azure 的定价计算器。它告诉我，我的 20 个 Wordpress 网站的费用为：每月 132,77 欧元。（共享网站）所以没什么大不了的。

当我在互联网上使用 Wordpress Multisite 和 Azure 研究解决方案时，我遇到了这个页面：[http ://azurephp.interoperabilitybridges.com/articles/how-to-deploy-wordpress-multisite-to-windows-azure-using-the -wordpress-脚手架](http://azurephp.interoperabilitybridges.com/articles/how-to-deploy-wordpress-multisite-to-windows-azure-using-the-wordpress-scaffold)

来自 Stackoverflow 这个：[如何在 Windows Azure 上安装多站点 Wordpress](https://stackoverflow.com/questions/6656670/how-to-install-a-multi-site-wordpress-on-windows-azure)

两个网站都没有给我想要的解决方案，我解释说：

第一个 URL 的问题是，它使用托管服务、存储帐户和 SQL Azure 数据库。没什么大不了的，因为后者存在已知问题。此外，对于网站，我可以选择保留并在保留实例上托管 100 个网站。但是这个我没有经验，所以我希望如果你有经验并加入讨论。

我给出的最后一个 URL 使用带有子文件夹的 Wordpress Multisite。我想要的是在每个网站上使用 Wordpress Multisite，每个网站都有他自己的域，以及自己的插件和主题文件夹。

回顾一下，我有两个问题，但彼此分开： - 我可以使用 Windows Azure 在其上部署 Wordpress Multisite 并拥有多个域名 - 我可以使用 Wordpress Multisite 让每个网站都有自己的目录，其中包含插件和主题**和**有指向他们的域名

我不要求一个完整的解决方案，只是对正确方向的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:53:39.517

以下是使用 Windows Azure“网站”功能的最新指南：

[http://www.windowsazure.com/en-us/develop/php/tutorials/convert-wordpress-site-to-multisite/](http://www.windowsazure.com/en-us/develop/php/tutorials/convert-wordpress-site-to-multisite/)

使用域映射器插件，它看起来应该能够为每个网络站点提供使用自定义域名的能力，前提是您按照说明在 DNS 中设置正确的 A 记录并在 Azure 管理门户中配置它们。

# ipad - 如何在 iOS 6 中使用 Google+ api 登录？

> ID：13396618
> 
> 赞同：0
> 
> 时间：2012-11-15T11:29:59.290
> 
> 标签：ipad, ios4, ios6, ios-simulator

请给我一个指向任何通过 Google+ api 登录的教程的链接。我被卡住了。我已经尝试过[https://developers.google.com/+/mobile/ios/](https://developers.google.com/+/mobile/ios/)但在更改客户端 ID 后，它不断显示错误模拟器上的invelid_scope。我需要将它集成到iOS 6中。如果你有任何线索。请尽快给我反馈。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:40:09.100

你需要一个兼容 iOS 6 的 api。

# jquery - 将 PikaChoose 图像设置为超链接

> ID：13396622
> 
> 赞同：1
> 
> 时间：2012-11-15T11:30:13.860
> 
> 标签：jquery, asp.net, url, slider

我需要将 PikaChoose 图像（舞台上的图像）设置为可点击 - 就像通常的横幅一样。我一直在寻找这个答案，我一直想知道这是否可能 - 我也无法在官方网站上找到答案。

我的代码是：

```
<ul id="pikame" class="jcarousel-skin-pika">
  <asp:Repeater runat="server" ID="PromocjeRepeater">
    <ItemTemplate>
       <li><a href="<%#Eval ("Url") %>"><img src="./timthumb.php?src=images/Promocje/<%#Eval ("Banner") %>.jpg&h=<%=wys %>&w=920" /></a></li>
    </ItemTemplate>
  </asp:Repeater>
</ul> 
```

它是用 C# ASP 编写的，链接的 href 在 <%#Eval ("Url") %>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:23:59.457

我不得不使用不同的库，但似乎此功能已在最新版本的 PikaChoose 中得到修复（或者至少在更新 jQuery 文件时它有效）。

# asp.net - 使用 BLL、DAL 在 gridview 中显示外键值

> ID：13396625
> 
> 赞同：0
> 
> 时间：2012-11-15T11:30:18.477
> 
> 标签：asp.net, .net, gridview

我有 3 个表：Car_Model、Car_Brand 和 Car_Type

Car_Model 有另外 2 个表的 2 个外键。我想在 gridview 中显示 car_model 的所有内容，而不是其他 2 个表的外键，它们的值。

目前我的 DAL 中有以下功能：

```
Private dc As New ModelDataContext

    Public Function selectAll() As List(Of Model)

        Dim result = From p In dc.Models
                     Join a In dc.Brands
                     On p.car_brand Equals a.Car_Brand_Id
                     Join t In dc.Types
                     On p.Car_type Equals t.Car_Type_id
                     Select p

        Return result.ToList
    End Function 
```

我的 BLL 中有以下内容：

```
Public Function selectAll() As List(Of Model)

    Return DALm.selectAll

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:51:16.560

通常关系可以这样映射：

```
Class Model
    Public Property Brand As Car_Brand
    Public Property Type As Car_Type
    ...
End Class 
```

但是如果你想自己获取它们，你可以创建一个看起来像这样的中间类：

```
Class Car_ViewModel
    Public Property Car As Model
    Public Property Brand As Car_Brand
    Public Property Type As Car_Type
End Class 
```

然后在您的查询中：

```
Public Function selectAll() As List(Of Car_ViewModel)

    Dim result = From p In dc.Models
                 Join a In dc.Brands
                 On p.car_brand Equals a.Car_Brand_Id
                 Join t In dc.Types
                 On p.Car_type Equals t.Car_Type_id
                 Select New Car_ViewModel With { .Car = p, .Brand = a, .Type = t }

    Return result.ToList
End Function 
```

# database - 创建数据库postgresql时出错

> ID：13396627
> 
> 赞同：0
> 
> 时间：2012-11-15T11:30:21.903
> 
> 标签：database, postgresql

有什么方法可以检查数据库在 PostgreSQL 中是否已经存在？

我是 PostgreSQL 的新成员。并且还需要通过 jdbc 驱动程序从我的 java 应用程序中检查它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:32:47.863

在 PostgreSQL中没有`IF NOT EXISTS`选项。`CREATE DATABASE`见[`CREATE DATABASE`](http://www.postgresql.org/docs/current/static/sql-createdatabase.html)。

您可以检查`pg_database`数据库是否存在，如果不存在则仅尝试创建它。

由于弗兰克在评论中指出的限制，您需要通过[dblink执行此操作：](http://www.postgresql.org/docs/current/static/dblink.html)

```
regress=> SELECT create_database_if_not_exists('test');
ERROR:  CREATE DATABASE cannot be executed from a function or multi-command string
CONTEXT:  SQL statement "CREATE DATABASE test"
PL/pgSQL function create_database_if_not_exists(text) line 6 at EXECUTE statement 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:44:47.510

我找到了解决此问题的替代解决方案。通过使用以下查询：

```
 ResultSet res = st.executeQuery("select count(*) from pg_catalog.pg_database where datname = 'sample'") ;
       res.next();
       int count = res.getInt("count");
       System.out.println("Count : " + count);
       if(count == 0) {
         st.executeUpdate("CREATE DATABASE sample");
       } 
```

它的工作正常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-07T00:29:51.923

前提是你没有很多用 postgreSQL 制作的数据库
这是一个简单的方法来查看你有哪些数据库和没有哪些数据库

可以使用 pgadmin 并展开数据库列并查看你有哪些数据库和没有。

[![在此处输入图像描述](../Images/c730b2ae9d683a3069d80c270bd68bb5.png)](https://i.stack.imgur.com/hKCb8.png)

如黄色框所示，我在pgadmin中创建的数据库，可以试试这个

# c# - 从通用存储库返回查询的行

> ID：13396629
> 
> 赞同：0
> 
> 时间：2012-11-15T11:30:27.253
> 
> 标签：c#, .net, entity-framework

我已经在我的项目中实现（或“借用”了网络！）一个通用存储库，现在我坚持如何通过这个存储库访问某些记录。

样本数据：

```
ID  | Policy ID     |   History ID  | Policy name
1   |   1           |    0          | Test
2   |   1           |    1          | Test
3   |   2           |    0          | Test1
4   |   2           |    1          | Test1 
```

我需要的是具有最大历史 ID 的记录，因此策略 ID 1 和 2 将出现历史 ID 2（ID 的 2 和 4）。

我的通用存储库代码如下：

```
public virtual IEnumerable<TEntity> Get(
            Expression<Func<TEntity, bool>> filter = null,
            Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
            params Expression<Func<TEntity, object>>[] includeProperties)
        {
            IQueryable<TEntity> query = dbSet;

            if (filter != null)
            {
                query = query.Where(filter);
            }

            foreach (var includeProperty in includeProperties)
            {
                query = query.Include(includeProperty);
            }

            if (orderBy != null)
            {
                return orderBy(query).ToList();
            }
            else
            {
                return query.ToList();
            }
        } 
```

现在，我知道我应该在这个函数上使用 filter 参数，但是在我的场景中，它甚至可能吗？我想我必须使用分组方法。

我的调用代码是（如果有帮助的话）：

```
var policies = _policy.Get(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:28:57.170

我认为您需要先了解泛型类型，然后才能执行任何特定的 linq 操作，例如分组。例如，如果您不知道类型，则无法指定要分组的任何属性。

# ios - XCode：为什么 didFinishLaunchingWithOptions 中的 launchOptions 总是为零？

> ID：13396630
> 
> 赞同：14
> 
> 时间：2012-11-15T11:30:32.213
> 
> 标签：ios, xcode, notifications, push-notification, startup

我希望我的应用程序在通过单击通知启动应用程序时执行特定操作。当应用程序已经在后台运行时，我想执行这些特定的事情，但是当应用程序通过单击通知从 SCRATCH （未运行到后台）启动时，我也想执行这些特定的操作。

通过单击通知从后台启动应用程序时，我通过以下方式收到通知：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

=> 没问题！

通过单击通知从头开始启动应用程序时，我想通过以下方式获取通知：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

     UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];

} 
```

但launchOptions 始终为零！当应用程序通过单击应用程序图标（正常）从头开始启动时，以及当应用程序通过单击通知从头开始启动时（不正常），它为零。

有人知道如何解决这个问题吗？

谢谢 ！！！

编辑 1

这是我的通知的创建方式（乔问题）：

```
 NSDictionary *userInfo = [NSDictionary dictionaryWithObjects:
[NSArray arrayWithObjects:notifText,latitudeString,longitudeString,nil]
forKeys:[NSArray arrayWithObjects:@"notifText",@"latitude",@"longitude", nil]];

    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    localNotif.fireDate = itemDate;
    localNotif.timeZone = [NSTimeZone defaultTimeZone];
    localNotif.alertBody =msg;
    localNotif.alertAction = @"Ok";
    localNotif.soundName = UILocalNotificationDefaultSoundName;
    localNotif.applicationIconBadgeNumber = 1;
    localNotif.userInfo = userInfo;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
    [localNotif release]; 
```

**编辑2（回答我的问题！:)）**

这是我用来调试我的应用程序的过程，但是......这个过程是错误的！

1.  我使用“编辑方案”菜单中的“等待 MyApp.app 启动”选项设置调试器
2.  我第一次使用 XCode 启动了我的应用程序（从头开始启动）XCode 显示“等待我的 MyApp 启动”=> 我点击了我的应用程序图标以启动应用程序
3.  应用程序启动 => 我点击了主页按钮 => 显示通知
4.  我点击了 XCode 中的停止按钮以关闭应用程序我用 XCode 重新启动它 => XCode 再次显示“等待我的 MyApp 启动”消息 => 我点击状态栏中的通知以启动应用程序
5.  => launchOptions 为零！

launchOptions 等于 nil 是因为使用 XCode 重新启动应用程序（在这种情况下使用“等待我的 MyApp 启动”选项）会删除通知，即使它仍然显示在状态栏中...

为了能够通过单击通知从头开始重新启动应用程序后调试检查 launchOptions 的内容，似乎唯一的方法是在 UIAlert 中显示此内容，如 Tammo Freese 的回答中所述。因此，在这种特定情况下使用以下命令进行调试：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"options" message:[launchOptions[UIApplicationLaunchOptionsLocalNotificationKey] description] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
    return YES;
} 
```

感谢你的帮助 ！！！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-25T17:16:02.687

我在您共享的代码中找不到错误。通常这应该在模拟器和设备上都有效。这是一个对我有用的示例：首先生成一个新的 Single View iPhone 应用程序（ARC 和 Storyboards 上）。然后更改以下两个方法`AppDelegate`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"options" message:[launchOptions[UIApplicationLaunchOptionsLocalNotificationKey] description] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
    return YES;
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    localNotif.fireDate = [NSDate dateWithTimeInterval:10.0 sinceDate:[NSDate date]];
    localNotif.timeZone = [NSTimeZone defaultTimeZone];
    localNotif.alertBody = @"Just some text";
    localNotif.alertAction = @"OK";
    localNotif.soundName = UILocalNotificationDefaultSoundName;
    localNotif.applicationIconBadgeNumber = 1;
    localNotif.userInfo = @{@"test": @YES};

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
} 
```

然后启动这个应用程序，按主页按钮，然后停止应用程序。如果您在按下主页按钮 10 秒后点击本地通知，您应该会看到类似这样的内容，这表明本地通知已传递到`-application:didFinishLaunchingWithOptions:`：

![iPhone 模拟器的屏幕截图显示了一个显示本地通知的警报视图](../Images/b10a668189e9df48567205ab63ece80f.png)

我的建议是：首先让我在上面发布的示例工作以确保您的设置没有出错，然后检查您在代码中所做的不同之处。

**编辑**

这适用于问题的编辑 2：本地通知在等待应用程序启动时似乎也适用于我（在模拟器中，而不是在设备上）。试试这个：

1.  安装上述示例应用程序并在禁用“等待 MyApp.app 启动”的情况下启动它。
2.  单击主页按钮，然后通过 Xcode 或任务栏停止应用程序。
3.  启用“等待 MyApp.app 启动”。
4.  如果您现在点击通知中心的通知，它会显示在警报视图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T08:43:28.313

不知道这是否是您要寻找的，但是您是否缺少“返回是；”？因为我用它来从通知执行到新视图的转换，它工作正常

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UINavigationController *navigation = (UINavigationController *) self.window.rootViewController;

    [navigation.visibleViewController performSegueWithIdentifier:@"Ident" sender:nil];

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-14T17:43:54.047

我的结论和建议是否可以帮助任何人，请参阅下文

每次您有新版本来测试您的应用程序时，您都必须使用最新应用程序生成的通知来测试通知点击操作。如果您继续使用旧版本生成的旧通知测试点击操作，那么它将表现出意外（意味着它能够以某种方式启动应用程序，但不会在 didFinishLaunchingWithOptions 中返回任何有效信息：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:21:30.387

请原谅我，当谈到 Apple 的推送通知服务时，我还是新手，但我阅读了他们的文档，我的猜测是在创建本地通知时可能存在导致问题的问题。

我会仔细检查您是如何使用 Apple 的示例创建本地通知的，如清单 2-1 所示[，](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)只是为了排除这种可能性。由于用于创建本地通知的某些代码未在此线程中显示给我们，因此很难评估本地通知的实例化是否确实正确。它最终可能很简单，例如开火日期有问题或通知中的其他内容设置不正确。

# iis - IIS 中的 URL 重写得到 404

> ID：13396636
> 
> 赞同：0
> 
> 时间：2012-11-15T11:31:01.970
> 
> 标签：iis

```
<rule name="List_of_mfrs" enabled="true">
    <match url="/Manufacturers_(\w)" ignoreCase="false" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
    <action type="Rewrite" url="/list_of_mfrs/mfrs.cfm?ot={R:1}" />
</rule> 
```

当我输入：`http://MyLocalHost/list_of_mfrs/mfrs.cfm?ot=R`它得到 404 错误。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:45:46.990

我知道为什么会这样：因为`/`和`@type``@url`

这是正确的文字：

```
<rule name="List_of_mfrs" enabled="true">
    <match url="Manufacturers_(\w)" ignoreCase="false" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
    <action type="Rewrite" url="list_of_mfrs/mfrs.cfm?ot={R:1}" />
</rule> 
```

# objective-c - 需要有关使用 NSURLConnection 下载数据的帮助

> ID：13396639
> 
> 赞同：1
> 
> 时间：2012-11-15T11:31:08.067
> 
> 标签：objective-c, ios, nsurlconnection, nsurlconnectiondelegate

我的应用程序是一个消息应用程序，它也可以发送图像文件。我只是在网络服务器上作为图像上传，而在另一端只是发送它的 url，我正在尝试使用 NSURLConnection 下载一个带有 UIProgressView 作为下载指示器的图像，这是我的代码：

**该方法在uitableview中的下载按钮被点击时调用，它会移除下载按钮，添加uiprogressview并开始下载**

```
-(void)downloadImage:(UIButton *)link
{
    UITableViewCell *cell = (UITableViewCell*)[link superview];

    NSIndexPath *pathToCell = [tView indexPathForCell:cell];

    NSMutableDictionary *checkItHasFile = [messages objectAtIndex:pathToCell.row];

    NSString *str = [checkItHasFile objectForKey:@"hasFile"];

    if([str isEqualToString:@"1"])
    {
        progress = [[UIProgressView alloc]initWithProgressViewStyle:UIProgressViewStyleBar];
        progress.frame = CGRectMake(10, 50, 160, 30);
        progress.progress = 0.0;

        //progress.center = CGPointMake(23,21);

        [cell addSubview:progress];
    }

    UIButton *view = [[UIButton alloc]init];
    NSArray *subviews = [cell subviews];

    for (view in subviews)
    {
        if([view isKindOfClass:[UIButton class]])
        {
            [view removeFromSuperview];
        }
    }

    //

    NSString *linkToPass = [NSString stringWithFormat:@"THE URL"];

    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:linkToPass]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:60.0];

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if (theConnection)
    {
        nsmd = [[NSMutableData alloc]init];
    }
    else
    {
        NSLog(@"Connection to server failed!");
    }
... 
```

**这个方法是一个 NSURLConnection 委托来指示响应，在这个我计算响应大小**

```
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
        [self.resourceData setLength:0];
        self.filesize = [NSNumber numberWithLongLong:[response expectedContentLength]];
} 
```

**此方法是一个 NSURLConnection 委托，用于指示接收到的数据，我正在通过一些计算来更新进度条**

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    resourceData = [[NSMutableData alloc]init];
    [self.resourceData appendData:data]; 
    NSNumber *resourceLength = [NSNumber numberWithUnsignedInteger:[self.resourceData length]];

    [self.progress setProgress:[resourceLength floatValue] / [self.filesize floatValue] animated:YES];
} 
```

我想知道下载何时完成，所以我也可以删除进度视图，因为委托方法是 connectionDidFinishLoading：NSURLConnection 的连接。

问题是它立即触发，所以当进度视图动画下载进度时，此方法也会执行，如果我在这里删除进度视图，进度视图将立即消失，而不指示完整的下载进度。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:22:54.880

定义一个移除进度条的方法，然后在你的`- (void)connectionDidFinishLoading:(NSURLConnection *)connection`实现中，如果资源长度小于你决定的一定数量，延迟调用remove方法：

```
[self performSelector:@selector(removeProgressBar) withObject:nil afterDelay:2]; 
```

否则立即调用相同的方法。

# python - 在 iPython qtconsole 中读取 sys.stdin 的正确方法是什么

> ID：13396653
> 
> 赞同：3
> 
> 时间：2012-11-15T11:31:47.160
> 
> 标签：python, cross-platform, ipython

我正在尝试编写一个库，它可以在标准 Python、iPython 和 qtConsole 中跨平台工作。

除了我的键盘交互外，一切正常。

我想要“按任意键”或“按 Y/N/Esc”之类的东西

在 Windows 中，这很容易使用 msvcrt 和 kbhit。（虽然我没有在 Windows 中尝试过 qtconsole）在 Linux 中，这可以在 Python 和 iPython 下使用 stdin 和 termios 工作。

问题是 qtconsole 似乎使用非阻塞标准输入并且不支持 termios。

你会认为这是一件好事，只需刷新标准输入，然后检查它是否有字符。问题是这似乎不起作用。它永远不会返回一个字符。就好像 ipython 本身正在妨碍终端输入标准输入。

在 qtconsole 中读取 sys.stdin 的正确方法是什么？

（顺便说一句，qtconsole 没有标签，这个问题是关于 qtconsole，而不仅仅是 iPython）

# linux - httpd.conf 代码无法正常工作——建议？

> ID：13396655
> 
> 赞同：1
> 
> 时间：2012-11-15T11:31:50.493
> 
> 标签：linux, .htaccess, apache2, httpd.conf

与我之前的问题相关：[.htaccess 先检查 cookie，然后检查有效用户](https://stackoverflow.com/questions/13218206/htaccess-check-for-cookie-first-then-valid-user)

大家好，我真的很感谢这里的专家的帮助。我的 httpd.conf 应该要求用户使用 mod_auth_mysql 或 cookie 登录 - 但现在它只检查用户登录。上一个问题的代码现在位于我的 httpd.conf 中。

**什么工作：**

目前，用户的所有 /var/www/downloads 和子目录 (/var/www/downloads/~username~) 都需要使用 mod_auth_mysql 的用户名和密码。这行得通。

**什么不起作用：**

问题是：我的设置应该需要**使用**mod_auth_mysql 登录（有效）**或**cookie（无效）。如果 cookie 存在，那么当用户访问 /var/www/downloads/ 时，它应该会自动显示目录的内容。但它没有，它仍然要求输入用户名/密码。

我正在使用 SetEnvIf，但它可能与“全部满足”一起使用不正确。我可能在 httpd.conf 和 /sites-enabled/000-default 之间存在冲突。我对这里的大多数东西都没有经验，所以任何帮助都将不胜感激！

**HTTPD.conf：**

```
RewriteEngine on
RewriteLogLevel 9
RewriteLog /var/www/logs/rewrite.log

#Block IPs
<Directory /var/www>
    RewriteEngine On

    #only use my server for apache
    RewriteCond %{HTTP_HOST} !^2.2.2.2$ [NC]
    RewriteRule ^(.*)$ http://www.google.co.uk/$1 [L,R=301]

    RewriteCond %{REMOTE_ADDR} 0.0.0.0 [NC,OR]
    RewriteCond %{REMOTE_ADDR} 1.1.1.1 [NC]
    RewriteRule ^(.*)$ http://www.google.com [R]
</Directory>

# DOWNLOADS TOP DIRECTORY
<Directory /var/www/downloads>
    #Options Indexes
    #AllowOverride All
    #Order deny,allow
    #Deny from all
    #Allow from All

    AuthName "Please don't hack the server, thanks"
    AuthBasicAuthoritative Off
    AuthUserFile /dev/null
    AuthMySQL On
    AuthType Basic
    Auth_MYSQL on
    Auth_MySQL_Host localhost
    Auth_MySQL_User user
    Auth_MySQL_Password password
    AuthMySQL_DB db
    AuthMySQL_Password_Table users
    Auth_MySQL_Username_Field username
    Auth_MySQL_Password_Field password
    Auth_MySQL_Empty_Passwords Off
    Auth_MySQL_Encryption_Types Plaintext
    Auth_MySQL_Authoritative On
    require user luke

</Directory>

# EXAMPLE USERS DIRECTORY
# MIKE
<Directory /var/www/downloads/mike>
    SetEnvIf Cookie (.*)cookiename(.*) norequire_auth=yes
    Order Deny,Allow
    deny from all
    Satisfy Any

    #MYSQL AUTH
    AuthName "Please login"
    AuthBasicAuthoritative Off
    AuthUserFile /dev/null
    AuthMySQL On
    AuthType Basic
    Auth_MYSQL on
    Auth_MySQL_Host localhost
    Auth_MySQL_User user
    Auth_MySQL_Password password
    AuthMySQL_DB db
    AuthMySQL_Password_Table users
    Auth_MySQL_Username_Field username
    Auth_MySQL_Password_Field password
    Auth_MySQL_Empty_Passwords Off
    Auth_MySQL_Encryption_Types Plaintext
    Auth_MySQL_Authoritative On
    require user mike

    #COOKIE AUTH
    Allow from env=norequire_auth
</Directory> 
```

如果有帮助，**sites-enabled/000-default:**可能会导致冲突？[http://jsfiddle.net/Xcece/](http://jsfiddle.net/Xcece/)

我没有使用 .htaccess 文件。我已经改变了大量的指令并且已经迷失了。

我一生都无法弄清楚为什么它不起作用-我不太了解可能存在的冲突，因此在正确的方向上进行解释，这样我将来就可以避免这种情况会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:41:52.027

最后！经过一周的搜索...

问题在于设置cookie。将文件放在不同的目录中意味着 httpd.conf 没有正确读取 cookie -**这实际上是正确的**。

我必须将 cookie 的第四个参数设置为“/downloads/mike”，从而允许 httpd.conf 文件正确读取它。

```
session_start();
setcookie("cookiename","cookiename",time() + 3600, '/downloads/mike'); 
```

请记住在销毁 cookie`time()-x`时使用第四个参数来销毁它`/downloads/mike`。

# php - htaccess RewriteRule 自动删除队列斜线

> ID：13396656
> 
> 赞同：0
> 
> 时间：2012-11-15T11:31:51.743
> 
> 标签：php, .htaccess, url

我有这个在`.htaccess`文件中，

```
RewriteRule ^(.+)$ index.php?url=$1 
```

然后如果在浏览器中写入这个url `site.com/asd////bla`，然后在`index.php`打印`$_GET['url']`中，结果是：`asd/bla`。

问题：其他斜线在哪里？为什么不打印它们？

# php - PHP：使用 preg_match 提取 Google 中的索引页面数（不是 Google API）

> ID：13396658
> 
> 赞同：1
> 
> 时间：2012-11-15T11:31:56.337
> 
> 标签：php, preg-match

我正在使用 cURL 来获取 Google 中某个搜索的结果数。

我使用**preg_match**来提取这样的数据：

```
preg_match('/About (.*?) results/sim',$google_url_contents, $regs) 
```

像这样：

```
preg_match('/Results .*? of about (.*?) from/sim', $google_url_contents, $regs) 
```

但是，对于少于 10 个结果，我在数字前没有*文本字符串*，所以我不知道如何解析它。

Google 呈现的 HTML 输出如下所示：

```
<div id="resultStats">6 results<nobr>  (0.11 seconds)&nbsp;</nobr></div> 
```

在此示例中，我如何将**6**提取为*整数*？

**注意**：我暂时不想使用**Google Search API**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:15:33.120

您可以使用`preg_match('/resultStats\D*([\d,]+)/', $line, $matches)`

```
function get_number_of_results($line) {
    if (preg_match('/resultStats\D*([\d,]+)/', $line, $matches)) {
        echo "$matches[1]\n";   # for debug only
        $value = (int) str_replace(',', '', $matches[1]);
        return $value;
    }  
    return -1;  
}

$line = '<div id="resultStats">6 results<nobr>  (0.11 seconds)&nbsp;</nobr></div>';
var_dump(get_number_of_results($line));

$line = '<div id="resultStats">About 6,100,000 results<nobr>  (0.11 seconds)&nbsp;</nobr></div>';
var_dump(get_number_of_results($line)); 
```

输出：

```
6
int(6)
6,100,000
int(6100000) 
```

`\D`表示非数字字符 。`\D*`是 0 个或多个非数字字符。 `[\d,]`是数字或逗号的字符类，`[\d,]+`表示其中的 1 个或多个。

# r - 获取 ggplot2 图中使用的颜色列表？

> ID：13396662
> 
> 赞同：6
> 
> 时间：2012-11-15T11:32:20.663
> 
> 标签：r, ggplot2

> **可能重复：**
> [如何从 ggplot 对象中提取填充颜色？](https://stackoverflow.com/questions/11774262/how-to-extract-the-fill-colours-from-a-ggplot-object)

在任意 ggplot 图中，说

```
p <- ggplot(data=PlantGrowth, aes(x=group, y=weight, fill=group)) + geom_boxplot() 
```

有没有办法提取所用颜色的代码（即我们用命令修改的名为“values”的变量

```
p + scale_fill_manual(values=c("#999999", "#E69F00", "#56B4E9")) 
```

) ?

我想获得用于仅修改一种颜色的颜色。

谢谢，

弗朗索瓦

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T11:43:06.933

对于离散比例（默认设置`scale_colour_hue`），使用`hue_pal`包`scales`中的函数。例如，具有三个因子水平：

```
R> library(scales)
R> scales::hue_pal()(3)
[1] "#F8766D" "#00BA38" "#619CFF" 
```

# ruby - 从ruby中的数组中删除元素

> ID：13396664
> 
> 赞同：0
> 
> 时间：2012-11-15T11:32:23.800
> 
> 标签：ruby

我有一个数组，我想删除一些元素。我试过这个但它不起作用：

```
@restaurants.each_with_index do |restaurant, i|

if (restaurant.stars > 3)  @restaurants.slice!(i)     end

end 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:40:28.283

```
@restaurants.reject!{|restaurant| restaurant.stars > 3} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:33:58.477

你可以使用`Array#delete_at(index)`：见[ruby​​doc](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete_at)

但对您来说最好的方法是使用`reject!`( [ruby​​doc](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject-21) ) 或`delete_if`( [ruby​​doc](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete_if) )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:42:20.547

```
@restaurants.reject! {|restaurant| restaurant.stars > 3} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:34:34.183

如果餐厅是一个数组，您可以使用 pop，例如

```
a = [ "a", "b", "c", "d" ]
a.pop     #=> "d"
a.pop(2)  #=> ["b", "c"]
a         #=> ["a"] 
```

# php - 从其他网站访问数据以了解客户登录后是否已付款或未付款状态

> ID：13396665
> 
> 赞同：2
> 
> 时间：2012-11-15T11:32:24.003
> 
> 标签：php, javascript

我们一直在开发一个网络应用程序，我们使用了这个网站的登录系统[http://www.cura2apptrade.herobo.com/index.php/](http://www.cura2apptrade.herobo.com/index.php/)，这是我上传到一家免费网络托管公司的网站。我们刚刚将其登录系统嵌入到我们目前正在开发的另一个网站上。上面显示的站点是客户注册的地方，我们正在工作的另一个站点是客户登录的地方。它工作正常，但只有我们可以访问的电子邮件和密码。

我们想要的是访问客户登录网站的状态，如果他/她有支付/未支付状态，如果客户已经支付订阅，则访问已支付状态，否则未支付。但是我们还没有找到正确的方法来从一个单独的站点获取这些信息。我们一直在尝试应用 API，但没有做对。我已经阅读了一些使用 JSONP 的内容，但我不知道如何正确使用它。谁能帮助我们解决这个问题？

```
<script type="text/javascript">

    $(function()
    {

        $.ajax({
          url: 'http://www.cura2apptrade.herobo.com/bb-admin.php/invoice?status=unpaid?jsonp=?',
          dataType: "jsonp",
          jsonp: "callback",
          success: function(data)
          {
            $('#main').html(data);
          }
        });

    }); 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:29:45.477

您可能想尝试[使用 oAuth](http://oauth.net/2/)来处理客户端/服务器交互。这绝对比像您正在做的那样将密码发送到主站点要安全得多。

我不太了解付费/未付费信息是位于客户端还是服务器端。如果它是客户端，我想您应该能够通过 URL 中的 get 变量或类似的东西发送它，并在服务器端验证它（以及 oAuth 身份验证）。

# sql - 通过分组一个行值将行转换为列

> ID：13396666
> 
> 赞同：3
> 
> 时间：2012-11-15T11:32:25.343
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我的桌子就像

```
CompanyName | DirectorName
ADS         | Rai
ADS         | Rao
ADS         | Raj
ADS         | Rio
SAS         | Josh
SAS         | John 
```

但我想要这样的结果：

```
CompanyName | Director1 | Director2 | Director3 | Director4 
ADS         |Rai        |Rao        |Raj        |Rio  
SAS         |Josh       |John       |           | 
```

每个公司的董事姓名数量各不相同。因此，请建议如何根据要求动态形成数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:46:57.943

试试这个：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

SELECT @cols = STUFF((SELECT distinct ',' +  
                     QUOTENAME('Director' + CAST(ROW_NUMBER() 
                                        OVER(PARTITION BY c.companyname 
                                             ORDER BY c.companyname) 
                                      AS VARCHAR(10)))
               FROM CompaniesDirectors c
               FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)')  ,1,1,'');

SET @query = 'SELECT companyname,  ' + @cols + ' from 
             (
                SELECT 
                  c.CompanyName, 
                  c.DirectorName,  
                  ''Director'' + CAST(ROW_NUMBER() 
                                      OVER(PARTITION BY c.companyname 
                                      ORDER BY c.companyname) 
                                    AS VARCHAR(10)) director_num
                FROM CompaniesDirectors c
             ) x
             PIVOT 
             (
                MAX(directorname)
                FOR director_num IN (' + @cols + ')
             ) p ';

EXECUTE(@query); 
```

这应该给你类似的东西：

```
companyname    Director1    Director2    Director3    Director4
    AB            Foo          Bar           rr          tt
    ADS           Rai          Rao           Raj         Rio 
```

## [SQL 小提琴演示¹](http://www.sqlfiddle.com/#!3/4e695/3)

^(1：^(感谢@bluefeet))

# c++ - 转换矢量 * char 到 int

> ID：13396670
> 
> 赞同：1
> 
> 时间：2012-11-15T11:32:39.767
> 
> 标签：c++, integer, char

我在下面的代码中需要帮助，希望你能帮助我完成。我想要的只是将 INT 类型传递给 setX() 和 setY()。但是，我无法将向量 char* 转换为 int。有替代方案吗？

```
template<class T>
vector<string> Delimiter(T inputString){
    int count=0;
    char str[inputString.length()];
    strcpy(str,inputString.c_str());
    char * pch;

    vector<string> returnContainer;

    printf ("Splitting string \"%s\" into tokens:\n",str);
    pch = strtok (str,",[]");
    while (pch != NULL)
    {
        returnContainer.push_back(pch);
        pch = strtok (NULL, " ,[]");
        count++;
    }
    for(int i=0; i<returnContainer.size(); i++){
    cout << "return:" << returnContainer[i] << endl;
    }
    return returnContainer;
} 
```

//主要的（）

```
fileDataAfterFiltered = Delimiter(fileData[i]); // Delimiter (vector<string> type)

point2DObj[point2DCount].setX(fileDataAfterFiltered[1]); // error
point2DObj[point2DCount].setY(fileDataAfterFiltered[2]); // error 
```

//Assn3.cpp:107:59: error: no matching function for call to 'Point2D::setX(std::basic_string&)'</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:39:40.430

有很多方法可以将字符串转换为 int。boost::lexical_cast 是一种可以神奇地进行您想要的转换的方法。否则，您可以使用 atoi （如果您不关心错误）或 strtol （如果您这样做）。

```
point2DObj[point2DCount].setX(atoi(fileDataAfterFiltered[1].c_str()));
point2DObj[point2DCount].setX(boost::lexical_cast<int>(fileDataAfterFiltered[1])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:40:01.570

`Delimiter()`返回 a`vector<string>`并且您将这些字符串之一提供给`setX()`and `setY()`，但两者都需要一个整数参数。您必须将字符串转换为 int

```
int x = atoi(fileDataAfterFiltered[1].c_str());
point2DObj[point2DCount].setX(x);
int y = atoi(fileDataAfterFiltered[2].c_str());
point2DObj[point2DCount].setY(y); 
```

**但是**：在 C++ 中，数组和向量元素从 0*而不是*1 开始，所以你可能想分别用`fileDataAfterFiltered[0]`and替换它`fileDataAfterFiltered[1]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:40:20.177

如果您使用的是 C++11 编译器，则函数`std::stoi()`可以解决问题：

```
point2DObj[point2DCount].setX(std::stoi(fileDataAfterFiltered[1])); 
```

否则，您可以使用旧的`atoi()`：

```
point2DObj[point2DCount].setX(atoi(fileDataAfterFiltered[1].c_str())); 
```

除此之外，您的代码还有许多其他问题，但我希望您能自己解决它们。

# wordpress - WordPress 查询 10 个最新帖子的帖子，每个类别只有 2 个

> ID：13396674
> 
> 赞同：3
> 
> 时间：2012-11-15T11:32:49.750
> 
> 标签：wordpress

我想获得最新的 x 个帖子，但单个类别中只有 2 个。是否可以通过查询帖子。无论如何我都可以使用帖子循环来做到这一点，但想知道它是否可以通过查询帖子方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:37:17.787

查看[函数参考](http://codex.wordpress.org/Function_Reference)并编写自己的函数以获得所需的内容。它应该可以让您从特定类别中查询帖子并将它们合并到一个数组中。然后调用模板中的函数。

另请检查以下[帖子](https://stackoverflow.com/questions/5667812/where-to-put-my-custom-functions-in-wordpress)。

**UPDATE** 目前无法查询 on 语句中的不同类型。最好是组织你的帖子。看看[分类法](http://codex.wordpress.org/Taxonomies)

# php - magic_quotes_gpc 会救我吗？

> ID：13396675
> 
> 赞同：0
> 
> 时间：2012-11-15T11:32:52.863
> 
> 标签：php, escaping, magic-quotes-gpc

有一个（丑陋的）项目我被要求通过执行特定任务来帮助完成。问题是，我无法控制站点中的其他文件，更不用说服务器配置了。我将要使用的一些数据来自这样的查询：

```
'SELECT * FROM table where value like "'.$unsafe.'"'; 
```

**$unsafe**是来自 $_POST 或 $_GET 的未转义值。我检查了服务器，是 PHP5.1.6 并且打开了 magic_quotes_gpc，因此数据正在自动转义。这个查询是否可以破解？冒号之间的 $unsafe 给我的印象是它不能被破坏，但也许我错过了一些东西。我知道 magic_quotes_gpc 已被弃用，因为它不安全，所以我担心它，不是因为应用程序安全性在任何地方都失败了，而是因为我自己的知识。

**编辑：**我知道 *magic_quotes_gpc* 的安全隐患，我从不在我自己的项目中使用它。**我**总是使用参数化查询来避免注入，但这次我被要求在朋友/客户项目中添加一段非常具体的代码，所以我无法更改已经完成的内容。我想知道是否有一个特定的值可以用来创建注射，这样我就可以向我的朋友说明为什么他应该改变它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:41:52.300

if the DB is mysql use [mysqli_real_escape_string()](http://php.net/manual/es/mysqli.real-escape-string.php) instead, if the PHP version is very old you can use the mysql_real_escape_string (not recommended at the moment).

even if the variable is between colons it can be injected, you just need to close the colons inside the value of the variable and then inject whatever you want afterwards.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:11:39.383

关于您的编辑：您问*“我想知道是否有一个特定的值可以用来创建注射，这样我就可以向我的朋友说明为什么他应该更改它。”*

根据[手册页`mysqli_real_escape_string()`](http://php.net/manual/en/mysqli.real-escape-string.php)，它转义的字符如下：

```
NUL (ASCII 0), \n, \r, \, ', ", and Control-Z. 
```

旧`mysql_real_escape_string()`函数也会转义相同的字符。

这为您提供了一个起点，即哪些字符可用于在 MySQL 中进行注入攻击。魔术引号仅转义引号字符和斜杠字符，这显然会留下几个可以利用的漏洞。

在一个简单的世界中，上述信息足以让我们通过对剩余的未转义字符进行字符串替换来修复转义。

然而，这两个`real_escape`函数还需要一个活动的数据库连接才能工作，这导致我们进一步复杂化：字符集。

如果数据库具有与 PHP 不同的字符集，尤其是可变长度字符集（如 UTF-8 或 UTF-16），则可能会发生进一步的攻击。

知道（或可以猜到）PHP 和 DB 正在使用的字符集的攻击者可以发送精心制作的注入攻击字符串，其中包含 PHP 认为不需要转义的字符，但仍会导致成功入侵 MySQL。这就是为什么`real_escape`函数需要访问数据库才能知道如何进行转义。

更多资源：

*   [PHP & Sql 注入 - UTF8 POC](https://stackoverflow.com/questions/5139127/php-sql-injection-utf8-poc)
*   [绕过 mysql_real_escape_string() 的 SQL 注入](https://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string/12118602#12118602)

我希望能给你一些建议。

# c# - LINQ - 在一个结果中获得所有问题的所有答案

> ID：13396677
> 
> 赞同：1
> 
> 时间：2012-11-15T11:32:58.730
> 
> 标签：c#, linq, entity-framework, ef-code-first

我正在尝试从 LINQ 查询中检索它：

```
 Question 1 - Answer 1
            - Answer 2 (Selected)
            - Answer 3

 Question 2 - Answer 1
            - Answer 2
            - Answer 3 (Selected)
 etc.. 
```

我的表如下所示：

```
Question (with attached multilang support which I'll leave out for now)
QuestionAnswer
Answer (also with multilang)
Response (where the user's response is kept (aka which answer he took -> a specif QuestionAnswer row)
Questionnaire (where all the questionanswers for a single questionnaire are kept) 
```

我尝试了以下方法，但是我得到一个异常，说 .ToList() 在我运行它时不能被翻译成存储过程（所以在执行时，而不是在编译时）（注意这是翻译的）：

```
(from culture in DbContext.Culture    
from questionanswer in DbContext.QuestionAnswer
join questionnaire in DbContext.Questionnaire on questionanswer .QuestionnaireID equals questionnaire.QuestionnaireID 

where culture.TwoLetterISO.Equals(cultureCode) &&
    questionnaire.QuestionnaireID == id

select new QuestionnaireSectionInformation()
{   
    // Additional data is retrieved here, but thats not important for this question
     Questions = 
        ((from question in DbContext.Question
           join qmultilang in DbContext.QuestionMultiLang on question.ID equals qMultiLang.Id
           join response in DbContext.Response on questionanswer.ID equals response.questionanswerId into possibleReponse

           where question.ID == questionanswer.QuestionID &&
               qMultiLang.CultureId == culture.ID
           select new Topic()
           {
               Question = qMultiLang.Vraag,
               Opmerking = possibleResponse.Any() ? possibleResponse.FirstOrDefault().Commentaar : null,
               Answers= 
                ((from answer in DbContext.Answer
                  join aMultiLang in DbContext.AnswerMultiLang on answer.ID equals aMultiLang.Id
                  where aMultiLang.CultureId == culture.ID
                  select new Answer()
                  {
                     Answer= aMultiLang.Answer,
                     Selected = possibleAnswer.Any()
                  }).ToList())
           }).ToList())
}).ToList(); 
```

我正在尝试学习更多 LINQ，这就是为什么我不把它分开（通过检索数据并从中提取问题和答案）。

所以问题是：我收到一个异常，说 .ToList() 在我运行时无法转换为存储过程。如果我不能在它们上调用 .ToList() ，如何获取问题的所有子元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:07:36.477

不要在内部查询上调用 ToList 。请注意，您可以在查询结束时调用 ToList，因为该部分不需要转换为 T-SQL。

您可能正在使用 AsQueryable() 并且仅在最后一步使用 ToList()

所以：

AsQueryable 只是创建一个查询，获取列表所需的指令。您可以稍后对查询进行进一步更改，例如添加新的 Where 子句，这些子句会一直发送到数据库级别。

AsList 返回一个包含内存中所有项目的实际列表。如果您向其中添加新的 Where cluse，您将无法获得数据库提供的快速过滤。相反，您获取列表中的所有信息，然后过滤掉应用程序中不需要的信息，它已经作为最终实体呈现，因此不允许进一步修改

# grails - Grails 与索引属性的一对多关系

> ID：13396678
> 
> 赞同：1
> 
> 时间：2012-11-15T11:33:00.453
> 
> 标签：grails, groovy, grails-orm

在我的 Grails 应用程序中，我有两个具有一对多关系的域类，例如

```
class Parent    
    static hasMany = [children: Child]
}

class Child {
    Integer index
    static belongsTo = [parent: Parent]
} 
```

我想`index`记录创建孩子的相对顺序，这样父母的第一个孩子的索引为 1，下一个孩子的索引为 2，依此类推。索引不必是连续的，因为孩子可以被删除，但它们应该始终反映创建的相对顺序。

我考虑做类似下面的事情来设置`index`属性

```
class Child {
    Integer index
    static belongsTo = [parent: Parent]

    def beforeValidate() {

        def maxIndex = Child.createCriteria().get {
            projections {
                max('index')
            }
            eq('parent', parent)
        }        

        this.index = maxIndex + 1 ?: 1
    }
} 
```

但当然这不起作用，因为它会将相同的索引分配给两个瞬态`Child`实例。维护此`index`属性的最简单方法是什么？

FWIW，我不太担心阻止任何其他代码设置`index`，但如果有某种方法可以做到这一点，那将是一个奖励。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:51:41.423

I thought you could do:

```
class Parent    
  List children
  static hasMany = [children: Child]
} 
```

And then the children are kept in a List, so implicitly have an index and order. I guess you actually want the elements to have an index field though rather than this implied ordering?

### Edit

This works (it seems) but will hit the database every time you query the index

```
class Child {
  def grailsApplication

  static belongsTo = [ parent: Parent ]

  Integer getIndex() {
    grailsApplication.mainContext.sessionFactory.currentSession.with { sess ->
      createSQLQuery( 'SELECT c.children_idx FROM child c where c.id = :id' )
        .setBigInteger( "id", this.id )
        .list()
        .head() + 1
    }
  }
  String toString() {
    "Child @$index"
  }
} 
```

And makes me feel a little queasy ;-)

### Edit 2

Of course, another alternative is:

```
 Integer getIndex() {
    parent.children.indexOf( this ) + 1
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:14:26.753

您应该能够使用为 Grails 中的任何域类自动创建的 id 属性。默认情况下，对于保存到数据库的每个子项，此值都会递增。所以...

```
parent.children.sort {a,b -> a.id <=> b.id} 
```

将按照保存到数据库的顺序返回父级的子级。

如果您绝对需要一个名为“index”的属性，我相信您可以执行以下操作：

```
Integer index

static mapping = {
    id name: 'index'
} 
```

但是请注意，该索引可能是许多数据库中的保留字，因此您将无法拥有名为 index 的列，这将失败。考虑为您的财产取一个不同的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:07:14.327

使用具有自动增量的 id...一旦创建了一个孩子，它将永远不会使用另一个等于但更大的 id...如果您只需要知道创建顺序，您可以使用 id 或添加：

```
class Child{
    Date dateCreated;
    static belongsTo = [parent: Parent]
} 
```

它将自动设置创建日期，您可以使用它来了解订单:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-01T12:38:45.937

您可以使用 indexColumn grails 映射功能

[https://docs.grails.org/latest/ref/Database%20Mapping/indexColumn.html](https://docs.grails.org/latest/ref/Database%20Mapping/indexColumn.html)

```
Class Parent(){

  static hasMany = [children: Child]
  List children // Generates column `book_idx` in table for Book.

  static mapping = {
      children indexColumn: [name: "index", type: Integer]
  }
} 
```

# jquery - 用点隐藏文本并在鼠标悬停时显示

> ID：13396687
> 
> 赞同：0
> 
> 时间：2012-11-15T11:33:31.730
> 
> 标签：jquery, asp.net, c#-4.0

我在页面加载时显示应用程序名称。如果应用程序名称太大，我想用点部分显示它，并希望在鼠标悬停时显示完整的应用程序名称。我正在尝试这样做，但没有得到确切的解决方案。任何人都可以在这方面帮助我。我正在使用带有 jquery 的 asp.net 4.0。

谢谢阿斯玛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:41:42.140

Use like following

```
<span title="long name">long...</span> 
```

Use the `title` to display the full name. On mouse over it display's

If u want to style the tooltip use the following plugin.

[http://twitter.github.com/bootstrap/javascript.html#tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:42:17.427

you can generate html like this

```
<li class="someclass" data-short="app..." data-full="application">app...</li> 
```

assuming you use li tag and so jq code will be

```
$(function () {
    $(".someclass").mouseover(function() {
        $(this).html($(this).data('full'));
    });
    $(".someclass").mouseout(function() {
        $(this).html($(this).data('short'));
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:09:22.623

```
<!-- make sure you have the jquery library loaded !-->

<div class="application_name">My Long Application Name</div>
<div class="application_name">My Long Application Name</div>
<div class="application_name">My Long Application Name</div>

<script type="text/javascript">

    // on page load

    var max_characters = 10;

    $(document).ready(function(){

        // iterate all application names

        $('.application_name').each(function(){

            // establish if they contain more than your desired number of characters

            if($(this).html().length > max_characters){

                // attach nesting divs to the DOM to work with later

                var html = '';

                html += '<div class="long_application_name" style="display:none;">';
                html += $(this).html();
                html += '</div>';
                html += '<div class="short_application_name">'
                html += $(this).html().substring(0, max_characters) + '...';
                html += '</div>';

                $(this).html(html);

            }

            $(this).mouseover(function(){

                // show hide the appropriate nested divs

                $(this).find('.long_application_name').show();
                $(this).find('.short_application_name').hide();

            })

            $(this).mouseout(function(){

                // show hide the appropriate nested divs

                $(this).find('.long_application_name').hide();
                $(this).find('.short_application_name').show();

            })
        })
    });

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:45:25.457

尝试使用字符串类的子字符串函数和该控件的标题属性

# wpf - 错误模块名称：PresentationFramework.ni.dll

> ID：13396688
> 
> 赞同：3
> 
> 时间：2012-11-15T11:33:49.920
> 
> 标签：wpf, windows, exception

我写的一个应用程序崩溃了，在事件查看器中我发现了以下内容：

> 错误模块名称：PresentationFramework.ni.dll，版本：4.0.30319.233，时间戳：0x4d930fa2 异常代码：0xc00000fd

几个问题：

1.  PresentationFramework.ni.dll 是什么？
2.  我怎么知道这个异常是由我的应用程序中的错误或不相关的东西引起的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:10:52.293

PresentationFramework.ni.dll 是 PresentationFramework 程序集的下一代版本，它是 WPF 的关键程序集。

异常代码 0xc00000fd 表示 StackoverflowException。一个非常臭名昭著的例外，该网站被命名为它会立即终止您的应用程序而无需查看。它总是由编程错误引起的。您需要调试您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:08:29.667

该程序集是 .NET Framework 的一部分。您需要知道异常堆栈跟踪。您可能会尝试捕获故障转储并进行分析。

# php - Opencart Dashboard 显示上个月的统计数据

> ID：13396693
> 
> 赞同：0
> 
> 时间：2012-11-15T11:34:21.193
> 
> 标签：php, opencart

我怎么能添加选项来显示上个月的统计数据。

PHP

```
public function chart() {
    $this->load->language('common/home');

    $data = array();

    $data['order'] = array();
    $data['customer'] = array();
    $data['xaxis'] = array();

    $data['order']['label'] = $this->language->get('text_order');
    $data['customer']['label'] = $this->language->get('text_customer');

    if (isset($this->request->get['range'])) {
        $range = $this->request->get['range'];
    } else {
        $range = 'month';
    }

    switch ($range) {
        case 'day':
            for ($i = 0; $i < 24; $i++) {
                $query = $this->db->query("SELECT COUNT(*) AS total FROM `" . DB_PREFIX . "order` WHERE order_status_id > '0' AND (DATE(date_added) = DATE(NOW()) AND HOUR(date_added) = '" . (int)$i . "') GROUP BY HOUR(date_added) ORDER BY date_added ASC");

                if ($query->num_rows) {
                    $data['order']['data'][]  = array($i, (int)$query->row['total']);
                } else {
                    $data['order']['data'][]  = array($i, 0);
                }

                $query = $this->db->query("SELECT COUNT(*) AS total FROM " . DB_PREFIX . "customer WHERE DATE(date_added) = DATE(NOW()) AND HOUR(date_added) = '" . (int)$i . "' GROUP BY HOUR(date_added) ORDER BY date_added ASC");

                if ($query->num_rows) {
                    $data['customer']['data'][] = array($i, (int)$query->row['total']);
                } else {
                    $data['customer']['data'][] = array($i, 0);
                }

                $data['xaxis'][] = array($i, date('H', mktime($i, 0, 0, date('n'), date('j'), date('Y'))));
            }                   
            break;
        case 'week':
            $date_start = strtotime('-' . date('w') . ' days'); 

            for ($i = 0; $i < 7; $i++) {
                $date = date('Y-m-d', $date_start + ($i * 86400));

                $query = $this->db->query("SELECT COUNT(*) AS total FROM `" . DB_PREFIX . "order` WHERE order_status_id > '0' AND DATE(date_added) = '" . $this->db->escape($date) . "' GROUP BY DATE(date_added)");

                if ($query->num_rows) {
                    $data['order']['data'][] = array($i, (int)$query->row['total']);
                } else {
                    $data['order']['data'][] = array($i, 0);
                }

                $query = $this->db->query("SELECT COUNT(*) AS total FROM `" . DB_PREFIX . "customer` WHERE DATE(date_added) = '" . $this->db->escape($date) . "' GROUP BY DATE(date_added)");

                if ($query->num_rows) {
                    $data['customer']['data'][] = array($i, (int)$query->row['total']);
                } else {
                    $data['customer']['data'][] = array($i, 0);
                }

                $data['xaxis'][] = array($i, date('D', strtotime($date)));
            }

            break;
        default:
        case 'month':
            for ($i = 1; $i <= date('t'); $i++) {
                $date = date('Y') . '-' . date('m') . '-' . $i;

                $query = $this->db->query("SELECT COUNT(*) AS total FROM `" . DB_PREFIX . "order` WHERE order_status_id > '0' AND (DATE(date_added) = '" . $this->db->escape($date) . "') GROUP BY DAY(date_added)");

                if ($query->num_rows) {
                    $data['order']['data'][] = array($i, (int)$query->row['total']);
                } else {
                    $data['order']['data'][] = array($i, 0);
                }   

                $query = $this->db->query("SELECT COUNT(*) AS total FROM " . DB_PREFIX . "customer WHERE DATE(date_added) = '" . $this->db->escape($date) . "' GROUP BY DAY(date_added)");

                if ($query->num_rows) {
                    $data['customer']['data'][] = array($i, (int)$query->row['total']);
                } else {
                    $data['customer']['data'][] = array($i, 0);
                }   

                $data['xaxis'][] = array($i, date('j', strtotime($date)));
            }
            break;
        case 'year':
            for ($i = 1; $i <= 12; $i++) {
                $query = $this->db->query("SELECT COUNT(*) AS total FROM `" . DB_PREFIX . "order` WHERE order_status_id > '0' AND YEAR(date_added) = '" . date('Y') . "' AND MONTH(date_added) = '" . $i . "' GROUP BY MONTH(date_added)");

                if ($query->num_rows) {
                    $data['order']['data'][] = array($i, (int)$query->row['total']);
                } else {
                    $data['order']['data'][] = array($i, 0);
                }

                $query = $this->db->query("SELECT COUNT(*) AS total FROM " . DB_PREFIX . "customer WHERE YEAR(date_added) = '" . date('Y') . "' AND MONTH(date_added) = '" . $i . "' GROUP BY MONTH(date_added)");

                if ($query->num_rows) { 
                    $data['customer']['data'][] = array($i, (int)$query->row['total']);
                } else {
                    $data['customer']['data'][] = array($i, 0);
                }

                $data['xaxis'][] = array($i, date('M', mktime(0, 0, 0, $i, 1, date('Y'))));
            }           
            break;  
    } 

    $this->response->setOutput(json_encode($data));
} 
```

HTML

```
<select name="range">
    <option value="day">Today</option>
    <option value="week">This Week</option>
    <option value="month">This Month</option>
    <option value="year">This Year</option>
</select> 
```

来自@Andy 的 Qvmod 回答：

```
<file name="admin/controller/common/home.php">
    <operation>
           <search position="before"><![CDATA[case 'year':]]></search>
           <add><![CDATA[

        case 'month_previous':
            for ($i = 1; $i <= date('t', strtotime(date('Y-m', strtotime('-1 month')).'-01')); $i++) {
                $date = date('Y-m', strtotime('-1 month')).'-'.$i;

                $query = $this->db->query("SELECT COUNT(*) AS total FROM `" . DB_PREFIX . "order` WHERE order_status_id > '0' AND (DATE(date_added) = '" . $this->db->escape($date) . "') GROUP BY DAY(date_added)");

                if ($query->num_rows) {
                    $data['order']['data'][] = array($i, (int)$query->row['total']);
                } else {
                    $data['order']['data'][] = array($i, 0);
                }   

                $query = $this->db->query("SELECT COUNT(*) AS total FROM " . DB_PREFIX . "customer WHERE DATE(date_added) = '" . $this->db->escape($date) . "' GROUP BY DAY(date_added)");

                if ($query->num_rows) {
                    $data['customer']['data'][] = array($i, (int)$query->row['total']);
                } else {
                    $data['customer']['data'][] = array($i, 0);
                }   

                $data['xaxis'][] = array($i, date('j', strtotime($date)));
            }
        break;

        ]]></add>
       </operation>
</file>
<file name="admin/view/template/common/home.tpl">
    <operation>
        <search position="after"><![CDATA[<option value="month"><?php echo $text_month; ?></option>]]></search>
        <add><![CDATA[          
            <option value="month_previous">Last Month</option>
        ]]></add>
    </operation>
</file> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:56:03.677

创建一个新的 HTML 选项

```
 <option value="last_month">Last Month</option> 
```

然后为您的 last_month 选项添加一个新的开关盒。您可以通过将月份案例从案例“月份”行复制到中断来做到这一点；。

在 for 循环中将 date('t') 更改为：

```
 date('t', strtotime(date('Y-m', strtotime('-1 month')).'-01')) 
```

这将允许您获取上个月的天数，然后您应该更改的最后一位将是 $date var。以与上述类似的方式：

```
 $date = date('Y-m', strtotime('-1 month')).'-'.$i; 
```

这应该允许您查看上个月的所有统计信息。

# asp.net-mvc-3 - c# asp.net MVC缓存

> ID：13396694
> 
> 赞同：0
> 
> 时间：2012-11-15T11:34:22.400
> 
> 标签：asp.net-mvc-3, caching, httpruntime.cache

我正在使用 HttpRuntime.Cache 来存储我的站点缓存。问题是每当我想上传新的更新编译版本时，网站的缓存都会被删除。我很想知道克服这个问题的方法。提前感谢所有亲爱的助手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:36:41.363

缓存存在于内存中——一旦您上传了站点的新版本，IIS 就会回收应用程序池，这意味着内存被清除，缓存也随之被清除。

你无法改变它的工作方式。

您可以将缓存保存到磁盘（或数据库或其他东西）并读取它，但您最好让事情保持原样。

另一种方法是使用单独的缓存服务器——比如完全独立于 IIS 的[memcached 。](http://memcached.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:51:29.020

To use a shared (or distributed) cache would solve your issue. Such caches are also used in webfarm environment where several web servers need access to data in a shared cache.

Have a look at [AppFabric](http://msdn.microsoft.com/en-us/library/ff383731.aspx) which is Microsofts distributed cache implementaion (it's free)

There are many other caching products availbale like [NCache](http://www.alachisoft.com/ncache/), [MemCached](http://memcached.org/), [GemFire](http://www.vmware.com/products/application-platform/vfabric-gemfire) or Oracle Coherence to name just a few.

# cakephp - Cakephp 2 从视图中调用模型函数

> ID：13396705
> 
> 赞同：3
> 
> 时间：2012-11-15T11:35:02.727
> 
> 标签：cakephp, cakephp-2.1

是否可以直接从 Cakephp 2 中的视图调用模型函数？我知道我可以从控制器调用它并将值设置为视图，但如果我可以在视图中调用它会更好......

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T11:36:44.233

不，它违背了框架和核心 MVC 原则的全部要点。

只是不要这样做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-08T08:21:55.477

可以在控制器中使用相同的视图：

```
 App::import('Model', 'Department');
    $this->Department = new Department();
    $users = $this->Department->getUserOfDepartment($id); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T07:03:15.320

只是为了扩展@DavidYell 的答案。直接从视图调用模型确实违反了“整个框架和核心 MVC 原则”，但如果您需要视图中的动态数据，只需通过 AJAX 调用控制器来获取数据。“模式”如下：

1.  初始化对控制器的 AJAX 请求（让我们说`fetchData()`方法。）
2.  在该方法中处理请求：
    *   证实
    *   将布局设置为“ajax”（您必须创建它）
3.  通过 Controller 的调用从 Model 中获取您需要的数据：

    $this->UsedModel->find();

4.  通过呈现（例如）JSON 响应将您刚刚获取的数据返回到视图

现在数据将在视图中可用，并且您会一直遵循“良好做法”。实际上在视图中暴露任何模型是非常非常糟糕的。请不要这样做，或者切换到.NET ..：D

# ruby-on-rails - 关联模型和更新属性

> ID：13396706
> 
> 赞同：0
> 
> 时间：2012-11-15T11:35:05.090
> 
> 标签：ruby-on-rails, associations, has-many-through

我有 2 个具有直通关系的模型：

```
PortfolioItem
has_many :portfolio_item_images
has_many :images, :through => :portfolio_item_images

PortfolioItemImage
belongs_to :image
belongs_to :portfolio_item 
```

我想将投资组合项目图像与投资组合项目相关联，并设置投资组合项目图像的位置。

现在我正在这样做：

```
i13 = PortfolioItem.create({:name => 'Portfolio Item 1'})
i13_img01 = Image.find_by_image_name('Portfolio_Item_Image.jpg')
i13.images << i13_img01
i13_portimg01 = i13.portfolio_item_images.find_by_image_id(i13_img01.id)
i13_portimg01.update_attributes(:position => 1) 
```

这是相当复杂的，因为我正在设置关系，然后从我的图像 id 中找到直通记录，然后在投资组合项目图像上设置位置。

我有一种感觉，使用 ActiveRecord 有一种更清洁的 Ruby/Rails 方式。但我在谷歌上没有找到任何东西。每次我用 Google 关联时，通常都会弹出 Rails 指南，但我在其中找不到信息。

另外，我对 Image 模型没有太多控制权。

感谢您的时间！

更新：图像也是以前创建的。所以我不能通过 PortfolioItem 创建它然后添加属性。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:20:51.030

我认为这应该符合您的需要：

```
i13 = PortfolioItem.create({:name => 'Portfolio Item 1'})
i13.portfolie_item_images.create(image: Image.find_by_image_name('Portfolio_Item_Image.jpg'),
                                 position: 1) 
```

# android - 如何在 Google Play 中的新闻和杂志类别中显示我的杂志应用

> ID：13396707
> 
> 赞同：-4
> 
> 时间：2012-11-15T11:35:07.710
> 
> 标签：android, google-play

我开发了一个 Android 杂志应用程序并成功发布。如何使我的应用程序对新闻和杂志类别的用户可见。目前它仅在应用程序中可见，但 Google Play 有一个单独的选项卡“新闻和杂志类别”，仅用于搜索新闻和杂志。

您可以在下面的链接中查看选项卡。

[https://play.google.com/about/](https://play.google.com/about/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:41:34.200

From what I know, you can publish apps under the News and Magazines category under Apps category. This would be [here](https://play.google.com/store/apps/category/NEWS_AND_MAGAZINES). The content directly under Magazines tab is published by various Media houses, and is accessed via the Google Play Magazines App.

# spring-security - 使用 spring-security 和 ldap 进行集成测试

> ID：13396708
> 
> 赞同：5
> 
> 时间：2012-11-15T11:35:11.393
> 
> 标签：spring-security, integration-testing, spring-ldap

[单元测试中的 Spring 嵌入式 ldap 服务器](https://stackoverflow.com/questions/544550/spring-embedded-ldap-server-in-unit-tests)是类似的，但是没有给出适合我的答案。

我可以毫无问题地使用 spring 和 spring-security 的嵌入式 ldap 服务器运行我的集成测试。但是，我还没有找到清除嵌入式 ldap 服务器并再次加载 ldif 以提供通用测试环境的方法。

spring-ldap 的 LdapTestUtils 提供了一个 cleanAndSetup() 方法。但是，这不适用于 apache-ds 的建议版本 (1.5.5)，因为 LdifFileLoader 现在需要*CoreSession*而不是 LdapTestUtils 提供的*DirContext*。这会导致

```
java.lang.NoSuchMethodError:
org.apache.directory.server.protocol.shared.store.LdifFileLoader.<init>(Ljavax/naming/directory/DirContext;Ljava/lang/String;) 
```

我只想要一种清除嵌入式 ldap 服务器并再次用 ldif 文件填充它的方法（就像在启动时所做的那样）。有人对此有任何想法吗？

版本：spring 3.1、spring-ldap 1.3、spring-security 3.1、apache-ds 1.5.5

**解决方案（感谢 Luke Taylor）：**

```
@Inject
private ApplicationContext applicationContext;

@Before
public void reloadLdapDirectory() throws NamingException, IOException{
    ApacheDSContainer apacheDSContainer = (ApacheDSContainer) applicationContext.getBean(BeanIds.EMBEDDED_APACHE_DS);
    LdapTestUtils.clearSubContexts(contextSource, DistinguishedName.EMPTY_PATH);

    ClassPathResource classPathResource = new ClassPathResource("ldap.ldif");

    File tempFile = File.createTempFile("spring_ldap_test", ".ldif");
    try {
        InputStream inputStream = classPathResource.getInputStream();
        IOUtils.copy(inputStream, new FileOutputStream(tempFile));
        LdifFileLoader fileLoader = new LdifFileLoader(apacheDSContainer.getService().getAdminSession(), tempFile.getAbsolutePath());
        fileLoader.execute();
    }
    finally {
        try {
            tempFile.delete();
        }
        catch (Exception e) {
            // Ignore this
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T18:16:26.273

为什么不看看 Spring Security 的[LDAP 集成测试](https://github.com/SpringSource/spring-security/tree/master/ldap/src/integration-test/java/org/springframework/security/ldap)并将其用作指南？

目前，这些只是[使用 LDAP 模板](https://github.com/SpringSource/spring-security/blob/master/ldap/src/integration-test/java/org/springframework/security/ldap/userdetails/LdapUserDetailsManagerTests.java#L89)来清除每个测试在必要时创建的数据（为了速度），但是还有一个注释掉的[Junit`@After`方法](https://github.com/SpringSource/spring-security/blob/master/ldap/src/integration-test/java/org/springframework/security/ldap/ApacheDSServerIntegrationTests.java)可以重新加载 LDIF 文件。`CoreSession`是通过调用`getAdminSession()`服务器实例 (a ) 获得的`DefaultDirectoryService`。

如果您确实必须使用 XML 应用程序上下文运行测试，请使用该`<ldap-server />`元素，您可以使用：

```
getBeanByName(BeanIds.EMBEDDED_APACHE_DS).getService() 
```

访问`DefaultDirectoryService`实例。

# sql - SQL FOREACH 循环语法

> ID：13396715
> 
> 赞同：0
> 
> 时间：2012-11-15T11:35:39.443
> 
> 标签：sql, foreach

好吧，从我的搜索中可以看出，大多数回答与此相关的问题的人都反对`foreach`sql 中的循环。但我实际上需要做一个`foreach`循环。我的问题是，我一生都记不起这样做的语法，就像我说的那样，似乎没有人想放弃它的布局，所以现在我在这里寻求任何帮助。

也许它对于 foreach 循环不是必需的，但它是我能看到的最好的方法。

我需要`SELECT COUNT(*)`在包含 20120 个信号的表上做一个声明，该表在 1 个月的时间段内包含大约 800 个单位。所以我不能确定来自每个单元的任何特定数量的信号。现在这就是为什么我需要进行计数。我需要为每个单元获取准确的信号量，并且一次只做一个单元号不是一种选择。因此，我需要处理每个 unitID 并计算该单元在特定时间段内传递的信号量。

所以基本上我需要一种方法来遍历所有的 unitID 并获取每个单独的 unitID 的计数，而无需提供要查找的 unitID。

任何帮助将不胜感激。如果您想不出`foreach`循环以外的其他方法，请执行此操作，并且您具有`foreach`循环的语法。请随便发一下？？这个比较急

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:38:44.877

我怀疑你需要一个循环。您所描述的是一个基于面包和黄油集的 GROUP BY 场景。

```
select unitID, count(*) countSignals
from   signal_table
group by unitID
order by unitID 
```

# mysqldump - 如何将 MySQL 数据库从一台计算机复制到另一台计算机？

> ID：13396716
> 
> 赞同：0
> 
> 时间：2012-11-15T11:35:42.007
> 
> 标签：mysqldump

有谁知道将数据库从一台计算机复制到文件，然后将其导入另一台计算机的简单方法？

我听说过“mysqldump”，但我不知道如何使用它以及在哪里编写命令。我的数据库名称是“lbry”，用户名是“root”。

请帮我找到解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:39:47.437

这个最好和最简单的方法是使用数据库工具（SQLyog）

[http://www.webyog.com/product/downloads](http://www.webyog.com/product/downloads)

使用此工具，您可以连接 2 个数据库服务器，只需将服务器 a 上的一个数据库复制到服务器 b。

欲了解更多信息

[http://faq.webyog.com/content/12/32/en/mysql-5-objects-are-greyed-out-in-copy-db-to-other-host-dialogue.html](http://faq.webyog.com/content/12/32/en/mysql-5-objects-are-greyed-out-in-copy-db-to-other-host-dialogue.html)![在此处输入图像描述](../Images/73ab8e410af63f895f595764c23788f2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:40:00.133

尝试这样的事情：

```
mysqldump -u root -p lbry > dump-lbry.sql 
```

然后导入它：

```
mysql -u root -p < dump-lbry.sql 
```

# barcode - 宏 PDF417 条码规格

> ID：13396719
> 
> 赞同：1
> 
> 时间：2012-11-15T11:35:47.520
> 
> 标签：barcode, specifications

我有需要在 PDF417 条码中编码的数据。由于它们太大（> 6kB），我需要将它们分成多个条形码，称为MacroPDF417。

我被一个库（tec-it tbarcode SDK）困住了，我必须处理它。我的问题是它不能很好地支持宏 PDF417。

因此，我正在寻找一种方法来逐个生成每个宏 pdf417，但我需要知道标题应该是什么样子。我知道有关于数据分成多少个条形码以及读取的条形码是多少的信息，但我找不到合适的规范。我想所有这些都在数据开头的标题中。

有人知道如何从常规 PDF417 条码生成 MacroPDF417 条码吗？

**编辑**：我设法让我的图书馆工作。实际上，它们自动分割条形码的功能不再可用。您只需要为您的每个 PDF417 BC 提供一个公共 id、一个位置，以及是否设置它是否是宏 PDF417 的最后一个 BC。

`b1.Pdf417.MacroPdf417Settings.FileId = "MacroPDF417Identifier";` `b1.Pdf417.MacroPdf417Settings.IsLastSegment = false;` `b1.Pdf417.MacroPdf417Settings.SegmentIndex = i;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:26:09.150

标题或宏控制块实际上位于数据块的末尾，并以宏标记码字 928 开头。它由两个强制字段和零个或多个可选字段组成。段索引（0 - 99998 之间的零填充数字）、文件标识符（以 900 个为基数的可变长度字段）和可选数据（0 或多个可选字段）。

此信息可在 ISO 15438 规范中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:56:27.180

我实际上是在键入 PDF417 宏时编写代码......研究那个确切的组件。我不熟悉 tec-it 产品，但不知道它是否只是“容易”知道你想要什么，除非它们特别允许钩子在数据码字填充、宏组件的编码期间正确嵌入它，然后纠错数据。遵循规范祝你好运。

# javascript - 如果 href=url 改变/添加类到父元素

> ID：13396721
> 
> 赞同：1
> 
> 时间：2012-11-15T11:35:49.457
> 
> 标签：javascript, jquery, addclass, window.location

我正在构建一个小菜单，如果当前正在查看子菜单项，我需要 jQuery 的帮助来添加或替换菜单项的类。

```
<div id="menu">    
    <ul>
        <li><a href="home.html">Home</a></li>
        <li><a href="page.html">Page</a>
            <ul>
                <li><a href="sub-page-1.html">Page 1</a></li>
                <li><a href="sub-page-2.html">Page 2</a></li>
                <li><a href="sub-page-3.html">Page 3</a></li>
            </ul>
          </li>
    </ul>
</div> 
```

因此，基本上，如果当前查看了子菜单项（`ul li ul li`），我必须向其父菜单项（`ul li`）添加一个类。

我在网站上发现了一个类似的问题，但不包括子菜单部分，我对 jQuery 一无所知。

```
jQuery.noConflict();
jQuery(document).ready(function() {
   jQuery('ul#menuHov a[href$="' + window.location.pathname + '"]').addClass("menuHov"); 
}); 
```

非常感谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:39:13.957

尝试这个 ：

```
jQuery.noConflict();
jQuery(document).ready(function() {
   jQuery('li a[href$="' + window.location.pathname + '"]').parent('li').addClass("menuHov"); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:23:16.810

```
jQuery(document).ready(function() {
   jQuery('li a[href$="' + window.location.pathname + '"]').parent().parent().parent().addClass("yourclassname"); 
}); 
```

也可以定义#menu ul li ul li a

```
jQuery(document).ready(function() {
   jQuery('#menu ul li ul li a[href$="' + window.location.pathname + '"]').parent().parent().parent().addClass("yourclassname"); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:38:35.330

```
document).ready(function() {
   $('li a').addClass("menuHov");
 var lastVisited =  document.referrer;//it can return last url
   $('li ul li a').find('href='+lastVisited).addClass("className");  
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T12:15:58.313

如果您只想将类添加到具有子菜单项的父项（页面加载时），您可以简单地执行以下操作：

```
$('ul li ul').parent().addClass('children-viewed'); 
```

如果要在子菜单项**悬停**时添加类，可以执行以下操作：

```
$('ul li ul li').hover(function(){
    $(this).parent().parent().addClass('viewed');
},function(){
    $(this).parent().parent().removeClass('viewed');
}); 
```

如果要**在显示子菜单项时**添加类（例如，当悬停其父项时），您可以执行以下操作：

```
$('ul li').hover(function(){
    $(this).addClass('viewed');
    // show sub-menu items
},function(){
    $(this).removeClass('viewed');
    // hide sub-menu items
}); 
```

如果“当前查看”是指其他意思，请解释您的意思。

PS：对不起我的英语不好。

**编辑：**

现在我明白了 ：） 。然后你可以这样做：

```
$('ul li ul li').each(function(){
    var rx = new RegExp($(this).children('a').attr('href')+"$");
    if(rx.test(window.location.pathname)){
        $(this).parent().parent().addClass("menuHov");
    }
}); 
```

或者，如果您不喜欢循环：

```
var curr_url = window.location.pathname;
var currently_viewed = curr_url.substr(curr_url.lastIndexOf("/")+1);
$('ul li ul li a[href$="'+currently_viewed+'"]').parent().parent().parent().addClass("menuHov"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T11:59:22.987

你可以使用`jQuery` `.is()`函数。尝试类似的东西

```
$('ul li ul li').is('.open') 
```

并通过使用将`.open`类标识符添加到`ul li ul li`悬停时`addClass('.open')`

更多信息[在这里](http://api.jquery.com/is/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T13:07:23.290

如果你有例子`$_GET['page']=="food"`

您将使用类似这样的内容检查 url

```
function getUrlVars() {
   var vars = {};
   var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, 
   function(m,key,value) {
   vars[key] = value;
   });
   return vars;
} 
```

然后你可以在菜单项上有一个 ID

```
<li id="food">Food</li> 
```

然后如何获取页面。

```
var page = getUrlVars()["page"];

if (page){
    var currPage = $("#"+page);
    currPage.css({"background":"#eeeeee","color":"#000000"});

}else{
    console.log("No page defined!");
} 
```

# aptana - 如何在 aptana 中关闭 AltGr+p 快捷方式？

> ID：13396723
> 
> 赞同：0
> 
> 时间：2012-11-15T11:35:58.643
> 
> 标签：aptana

当我在 Aptana 中按`AltGr`+`p`时，会显示一条黄色框内的消息： Tooltip will automatically hide in 10 seconds. 点击聚焦。键入 escape 以在聚焦时关闭。我想`AltGr`用于其他目的。如何在 Aptana 中关闭`AltGr`+ ？`p`在窗口 > 首选项 > 键中是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:14:55.163

看起来执行的命令是：

**命令 -> 捆绑开发 -> 显示范围和匹配主题规则**

对应于：

`CTRL`+ `ALT`+`P`

我建议按照**修改内置捆绑包的**说明进行操作：

[https://wiki.appcelerator.org/display/tis/Modifying+your+shortcut+keys](https://wiki.appcelerator.org/display/tis/Modifying+your+shortcut+keys)

并更改显然也绑定到+的`CTRL`+ `ALT`+绑定`P``ALTGR``P`

# iphone - 在 iPhone 中显示 window.alert 后，键盘没有出现在 UIWebView 中

> ID：13396724
> 
> 赞同：0
> 
> 时间：2012-11-15T11:36:06.170
> 
> 标签：iphone, .net, objective-c, ios, uiwebview

在我的，键盘在网页`UIWebView`中显示后没有出现在文本框中。`window.alert`实际情况是，

*   **第 1 步：**打开我的应用程序并查看我们的网页`UIWebView`。
*   **第 2 步：**当我按下网页上的按钮时显示警报。
*   **第 3 步：**我没有响应警报并按下屏幕锁定按钮。
*   **第 4 步：**释放屏幕锁定并按 中的“确定”按钮`window.alert`。
*   **第 5 步：**按“确定”按钮后重新加载页面。之后我按下文本框，屏幕上没有出现键盘。

我无法得到确切的解决方案。我可以知道是什么问题以及如何解决这个问题吗？

注意：没有显示`window.alert`，它的工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:14:01.450

我唯一能想到的就是试试这个：

```
[window makeKeyAndVisible]; 
```

[此处](https://stackoverflow.com/questions/9954003/keyboard-does-not-appear-in-the-uiwebview-on-the-uinavigationcontroller)引用了一个类似的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:41:09.113

检查您的 AppDelegate 的 window.windowLevel - 要正常处理与 Web 控件的交互，应将其设置为 UIWindowLevelNormal。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T19:25:19.763

是否调用了键盘委托方法（例如 textFieldShouldBeginEditing）？您是否尝试过手动调用 becomeFirstResponder 以查看它是否响应？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T13:02:17.027

两种可能性：

*   您可以尝试在页面加载时调用，`[self.webView endEditing:YES];`因为它会强制第一响应者 + 键盘完全关闭

*   否则，如果您对拥有更好的警报也很感兴趣（没有页面名称作为警报标题），您可以使用 shouldStartLoadWithRequest 拦截自定义请求，并基于此显示本机 UIAlertView（如果您需要示例代码，请告诉我）

# .htaccess - Htaccess rewriterule $1 给出 index.php 而不是参数

> ID：13396726
> 
> 赞同：2
> 
> 时间：2012-11-15T11:36:15.163
> 
> 标签：.htaccess, mod-rewrite

我正在尝试获取最后一个重写以获取 php 中的“lang”。但是，当我打开参数时，它会返回“index.php”。以下代码有什么问题？

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)/(.*) index.php?lang=$1&url=$2 [NC]
RewriteRule ^([^/]+)/home/([^/]+)/?$ index.php?lang=$1&voorpagina=$2 [NC] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:52:38.457

尝试`[L]`像这样添加标志：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/home/([^/]+)/?$ index.php?lang=$1&voorpagina=$2 [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/(.*) index.php?lang=$1&url=$2 [NC,L] 
```

# php - 在 PHP 5.2 上使用带有命名空间的 class_exists

> ID：13396729
> 
> 赞同：0
> 
> 时间：2012-11-15T11:36:19.367
> 
> 标签：php, composer-php

我没有安装 PHP 5.2 进行测试。

我想用来`if (class_exists('Composer\Autoload\ClassLoader'))`测试是否安装了[composer](http://getcomposer.org/)，但是我的代码需要与 PHP 5.2 兼容。

PHP 5.2 会卡在反斜杠字符上吗？还是只会返回 false 并继续执行脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:40:16.003

命名空间在 PHP 5.2 中不存在——它们是作为 PHP 5.3 中的新特性添加的。

所以你的问题的直接答案是肯定的，PHP 5.2 会卡在反斜杠上，因为就它而言，它不是有效的语法。

您引用的代码行本身在语法上并不是无效的，因为正如您所指出的，它只是一个字符串。不过，将它传递给`class_exists()`可能会或可能不会破坏的东西——我也没有 PHP 5.2 的副本可供确认。如果我猜的话，我希望它会发出某种警告或通知，而不是完全炸毁。

但是作曲家本身不适用于 5.2，因此如果用户使用的是 5.2，那么根据定义，他们不能安装 Composer。因此，我建议您可以通过首先直接检查 PHP 版本，调用[`phpversion()`](http://php.net/manual/en/function.phpversion.php)and来避免整个问题[`version_compare()`](http://www.php.net/manual/en/function.version-compare.php)。这将使您避免对`class_exists()`通话产生任何不愉快。

# c# - 为什么 HttpContext.Current.Profile 为 NULL？它如何获得价值？

> ID：13396730
> 
> 赞同：3
> 
> 时间：2012-11-15T11:36:19.970
> 
> 标签：c#, asp.net, sharepoint, asp.net-membership

我继承了实现自定义`profile`提供程序的 MOSS 代码。设置似乎没问题（提供程序和 web.config）。

用户可以登录，但是，登录后，`HttpContext.Current.Profile`对象为空。为什么它是空的？应该如何/何时获得价值？

`HttpContext.Current.User.Identity.Name`登录后有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:00:47.417

迈克冯说：

> 通过配置文件提供程序，您必须从 SQL 服务器配置文件表中加载配置文件信息。
> 
> 在 WebProfile 类的 GetProfile 函数中传递 UserName 参数。这个类是由一个工具生成的。

[http://social.msdn.microsoft.com/Forums/da-DK/netfxbcl/thread/af78e6c0-03f5-4f2d-ad07-dd2a57304377](http://social.msdn.microsoft.com/Forums/da-DK/netfxbcl/thread/af78e6c0-03f5-4f2d-ad07-dd2a57304377)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T12:22:28.377

尝试 ProfileBase.Create(username, isAuthenticated)

```
公共静态 System.Web.Profile.ProfileBase 创建（字符串用户名，布尔 isAuthenticated）
    System.Web.Profile.ProfileBase 的成员

概括：
由 ASP.NET 用于为指定的用户名创建配置文件的实例。接受一个参数，指示用户是经过身份验证的还是匿名的。

参数：
用户名：要为其创建配置文件的用户名。
isAuthenticated: true 表示用户已通过身份验证；false 表示用户是匿名的。

回报：
一个 System.Web.Profile.ProfileBase 对象，表示指定用户的配置文件。

```

# css - 如何在每一侧为所有 div 提供相同数量的空间

> ID：13396736
> 
> 赞同：6
> 
> 时间：2012-11-15T11:36:44.577
> 
> 标签：css, margin, equals, fluid-layout

你好我有一个关于布局的问题。

我有一个网站，可以在其中填写 div 信息。这些 div 需要彼此相邻，并且它们之间以及容器 div 的两侧之间的空间量相同。我正在为手机制作它，所以我不知道屏幕的宽度，它应该在所有不同的屏幕分辨率上看起来都很好。

目前我有这个：小提琴：[小提琴](http://jsfiddle.net/hgwd92/vgqNX/)

HTML：

```
<div id="container">
<div id="lineout">
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
<div id="foto"><img src="img/logo_null_image.jpg" /></div>
</div> 
```

​</p>

CSS：

```
#container {
    text-align: center;
    display: inline-block;
    margin:0 auto;
}
#foto{
    width: 150px;
    height: 150px;
    display: inline-block;  
}

#lineout {
    text-align:justify; 
} 
```

然后它在它们之间有相等的空间，但在容器的两侧之间没有。

我不知道会有多少个 div，我只知道它们是 150 像素 x 150 像素。它们与容器之间应该有相同的边距，显示器的大小无关紧要。如果屏幕较小，则相邻的 div 应该更少，但它们之间的空间应该增加或减少。所以它们和容器 div 之间的边距是一样的。

这是我想要的图像:) [s7.postimage.org/h342d0qhn/layout2.png](http://s7.postimage.org/h342d0qhn/layout2.png)

重新提出我的问题：

```
<div class="content">
<div class="elements-grid">
<div class="element"></div>
<div class="element"></div>
<div class="element"></div>
<div class="element"></div>
</div>
</div> 
```

我需要“元素” div 之间的灵活/折叠边距。间隙应取决于浏览器宽度并在折叠之前具有“最大宽度”和“最小宽度”（以下元素切换到下一行）。“元素网格”需要在“内容”中居中。

我真的很感谢你的帮助，因为我已经尝试了我所知道的一切。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:41:28.403

[http://jsfiddle.net/vgqNX/17/](http://jsfiddle.net/vgqNX/17/)

1.  使用 ID 时，不能多次使用。使用一个类来定位多个元素。
2.  元素之间的空白`.foto`会导致页面上出现多余的空白。删除空格进行修复。
3.  我不得不放一些东西（在这种情况下是一个不间断的空间）来给 div 一些内容，因为它对我来说看起来不正确。

容器有一个左/下 10px 的内边距，而每个`.foto`元素都有一个上/右 10px 的边距。这使得它们都是通用的，这意味着您可以调整浏览器的大小以使所有块对齐并在所有块周围具有相同的边框，就像在每个块周围一样。

希望有帮助？

编辑：http: [//jsfiddle.net/vgqNX/20/](http://jsfiddle.net/vgqNX/20/)

希望以上内容更符合您的需求？

注意：您最好按照`Urg Mu`. 当您调整大小时，您会注意到闪烁，但只有当您拖动窗口以使其更大/更小时才会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:44:56.313

如果你想这样做，你需要一点 javascript 的帮助。

这个想法是获取窗口的宽度，而不是将其分布在元素之间。

你可以在这里找到我的小提琴：http: [//jsfiddle.net/P84qd/](http://jsfiddle.net/P84qd/)

在 html 文件中，我只是通过类名更改了您的 id（在 html 文件中，您永远不应该有两次相同的 id） 在 css 文件中，我只是将正方形定义为`float:left`.

最后是javascript：

```
function resize(){
    var sizeOfImg = 150;
    var windowWith = document.body.offsetWidth;
    var widthRest = windowWith%sizeOfImg;
    var marginVal = widthRest/(Math.floor(windowWith/sizeOfImg)+1);
    var lineout = document.getElementById('lineout');
    lineout.style.paddingLeft = marginVal+'px';
    lineout.style.paddingTop = marginVal+'px';
    var fotos = document.getElementsByTagName('div');
    for(var i=0, length = fotos.length;i<length; i++){
        if(fotos[i].className === 'foto'){
            fotos[i].style.marginRight = marginVal+'px'; 
            fotos[i].style.marginBottom = marginVal+'px';        
        }       
    }
}
resize();
window.onresize = function(e){resize();}; 
```

它可能不是很优化，但这是一个想法；您首先获得文档的宽度，然后在放置所有正方形后计算其余空间（因此是模数）。为了计算您的最终边距大小，您需要将其余部分除以每行的正方形数加一（因为您希望左右边框也在您的样式中）。然后，只需在需要的地方添加一些填充/边距，就完成了。

为了在调整窗口大小时使其工作，您需要调用`window.onresize`

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:42:07.110

尝试添加边距以设置照片之间的距离。避免使用 display:inline，因为它专门用于 TEXT。但是“你可以随心所欲地使用它。” 说——西马农。在内部容器上添加填充物。然后使用浮点数。

```
#foto{
    width: 150px;
    height: 150px;
    margin: 10px 10px 0px 0px;
    float:left;
    background: #FC0;    
}

#lineout {
    padding: 50px 0px 50px 50px;
} 
```

关闭Div容器后会有问题。设置下一个元素的浮动。以下是如何解决它。

HTML：

```
<div id="container">
    <div id="lineout">
        <div id="foto"><img src="img/logo_null_image.jpg" /></div>
    </div>
    <div id="endContainer"></div>
</div> 
```

CSS：

```
#endContainer {
    clear:both;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T06:04:11.730

更新 div id foto css

```
 #foto{ width: 130px; height: 130px; margin:0 20px 20px 0; display: block; float:left; 
```

背景：#FC0；}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-20T18:00:42.557

## 仅 CSS 解决方案

可以使用媒体查询来实现您的布局。

## [演示](http://jsfiddle.net/webtiki/KrA6M/)

这种技术对每个元素使用一个换行来计算每个正方形之间的空间。
**块之间以及块与窗口之间的空间是相等的。**

我编写的代码需要调整/优化，并且我没有为超过 751px 的屏幕编写查询。在我继续之前，我宁愿知道你是否对它感兴趣。

如果你愿意，我也可以提供一些关于它的额外细节/解释，因为它非常复杂。

您可能也对这个答案感兴趣：[响应式方柱](https://stackoverflow.com/a/20457076/1811992)

以下是相关代码：

HTML：

```
<div id="container">
    <div class="wrap">
        <div class="foto">1</div>
    </div>
    <div class="wrap">
        <div class="foto">2</div>
    </div>
    ... and so on ...
</div> 
```

CSS：

```
.wrap {
    float:left;
    position:relative;
}
.foto {
    width: 150px;
    height: 150px;
    background: gold;
    position:absolute;
}

#warning{display:none;}
@media screen and (min-width: 631px) {
    .wrap {
        width:20%;
        padding-bottom:25%;
    }
    .wrap:nth-child(4n+2), .wrap:nth-child(4n+3){

    }
    .wrap .foto {
        top:-75px;
        margin-top:100%;
        right:-30px;
    }
    .wrap:nth-child(4n+2){
        margin:0 5% 0 7.5%;
    }
    .wrap:nth-child(4n+3){
     margin-right:7.5%;
    }
    .wrap:nth-child(4n+2) .foto{
        left:50%;
        margin-left:-75px;
    }
    .wrap:nth-child(4n+3) .foto{
        right:50%;
        margin-right:-75px;
    }
    .wrap:nth-child(4n) .foto{
        left:-30px;
    }   
    #container{
        margin-top:-45px;
    }
}

@media screen and (min-width: 481px) and (max-width: 631px) {
    .wrap {
        width:25%;
        padding-bottom:33.3%;
    }
    .wrap:nth-child(3n+2){
        margin:0 12.5%;        
    }
    .wrap .foto {
        top:-75px;
        margin-top:100%;
        right:-37px;
    }
     .wrap:nth-child(3n+2) .foto{
        left:50%;
        margin-left:-75px;
    }
     .wrap:nth-child(3n) .foto{
        left:-37px;
    }
    #container{
        margin-top:-37px;
    }
}

@media screen and (min-width: 331px) and (max-width: 480px) {
    .wrap {
        width:33.3%;
        padding-bottom:50%;
        clear:left;
    }
    .wrap:nth-child(even) {
        float:right;
        clear:right;
    }
    .wrap .foto {
        top:-75px;
        margin-top:100%;
        right:-50px;
    }
    .wrap:nth-child(even) .foto {
        left:-50px;
    }
    .wrap:nth-child(4n+3) .foto, .wrap:nth-child(4n+4) .foto {
        bottom:-75px;
        margin-bottom:100%;
    }
    #container{
        margin-top:-25px;
    }
}

@media screen and (max-width: 330px) {
    .wrap {
        width:50%;
        padding-bottom:100%;
        clear:left;
    }
    .wrap:nth-child(odd) .foto {
        right:-75px;
        bottom:0;
        bottom:-75px;
        margin-bottom:100%;
    }
    .wrap:nth-child(even) .foto {
        top:0px;
        right:-75px;
        top:-75px;
        margin-top:100%;
    }
} 
```

# php - 需要 apache_note() 函数和 nginx / usertrack for nginx

> ID：13396740
> 
> 赞同：3
> 
> 时间：2012-11-15T11:37:10.077
> 
> 标签：php, apache, nginx

我有 nginx 服务器，但需要运行**apache_note()**功能。
是否有提供此功能的任何模块或 nginx 补丁？还需要用于 nginx 或类似替代方案的**usertrack**扩展（在 apache 中很容易获得）。如果 nginx 没有可用的 usertrack，请建议一些模拟相同功能的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-10T08:34:06.263

我看到对此有一个公认的答案，只是添加它，因为我猜包括我自己在内的很多人都是从谷歌搜索 apache_note 和 Nginx 来到这里的。

使用 apache_note 的一个主要原因是在访问日志中存储一些内容。例如，当您不使用基本身份验证时的用户名。

使用 PHP 和 Nginx 实现此目的的一种简单方法是将其作为标头发送并记录。

PHP：`header('username: johndoe');`

在 nginx.conf 中的 log_format 中添加以下内容：`$sent_http_username`

所有标头都以 $sent_http_HEADERNAME 的形式提供给日志

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:53:59.757

> 还需要用于 nginx 或类似替代方案的 usertrack 扩展（在 apache 中很容易获得）。

[http://nginx.org/en/docs/http/ngx_http_userid_module.html](http://nginx.org/en/docs/http/ngx_http_userid_module.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-04T16:42:57.447

我在寻找 apache_note() 的 NGINX 替代品时也发现了这一点。关于它的信息不多，我发现提到的唯一解决方案是只使用响应标头。仅此一项不适用于您不想发回给用户的数据，这就是我正在处理的情况。

我找到的解决方案是使用[HttpHeadersMoreModule](https://github.com/openresty/headers-more-nginx-module)在将标题传递给用户之前清除它们。这也会清除“$sent_http_”变量，但保留“$upstream_http_”可用于您的日志。

# ios - UISearchDisplayController 的具体用途是什么？

> ID：13396741
> 
> 赞同：1
> 
> 时间：2012-11-15T11:37:17.267
> 
> 标签：ios, uisearchbar, uisearchdisplaycontroller

任何人都可以简单地解释一下需要`UISearchDisplayController`吗？我实际上是`UISearchBar`在课堂上单独实现的，并使用表格视图来显示结果。它工作正常。

我做了一个空洞的看法。如果没有找到搜索词的结果，它将显示。此外，对于搜索栏中的每次按下，我都会重新加载表格视图，以便结果相对于键入的单词不断变化。

我使用这些方法来做到这一点。

```
- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
- (void) searchBarCancelButtonClicked:(UISearchBar *)searchBar
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar 
```

这是我的疑问：

*   除此之外，为什么要实施`UISearchDisplayController`？它有什么用？
*   我应该每次都重新加载表格视图以进行更改`UISearchBar`吗？我希望，重新加载 tableview 每次都会调用 tableview 委托方法。还有其他聪明的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:16:47.310

UISerachDisplayController 的使用是为您提供一个很好的用户界面集成，用于将搜索添加到现有的表视图控制器。UISearchDisplayController 做了漂亮的过渡动画并添加了灰色覆盖。尽管您仍然必须提供搜索栏和搜索结果表数据源和委托，但控制器还提供了第二个表视图。

# activerecord - Rails 3自动将数据插入连接表

> ID：13396743
> 
> 赞同：0
> 
> 时间：2012-11-15T11:37:26.410
> 
> 标签：activerecord, ruby-on-rails-3.2, padrino

我原以为如果在模型文件中正确设置了表关系，ActiveRecord 会负责更新数据并将数据插入到联结表中。

不是这样吗？

例如，我有一个看起来像这样的 dvd.rb 模型：

```
 has_and_belongs_to_many :dvd_producer 
```

连接表被相应地命名`dvd_producers_dvds`（我知道，愚蠢的名字，但这是 ActiveRecord 所期望的）。

基本上，当我通过以下方式将新生产者插入`dvd_producers`表中时：

```
DvdProducer.create(producer: producer) 
```

我希望 ActiveRecord 会自动将等效数据（producer_id、dvd_id）插入到联结表中。

也许我需要使用该`new_producer.save`方法而不是`create`？

或者这只是一个白日梦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:38:57.777

完整的答案是，如果您需要将数据插入联结表但不创建其他对象之一，则可以使用现有对象。

因此，要将数据插入到您已经拥有的对象的联结表中：

```
dvd = Dvd.find(:id)
producer  = Producer.where(producer: 'some guy').first_or_create
dvd.producer << producer 
```

当然，如果您如上面 Krustal 所指出的那样吃掉物体，这也有效。

用于`<<`将数据**添加**到联结表并`=`与对象一起用作数组来**替换**数据：

```
dvd.producer = [producer] 
```

这样做的好处是它适用于多对一关系（在另一个表中您有一个 ID 作为外键，如 dvd.sound_id）以及稍作更改，使用 a`=`而不是`<<`：

```
dvd = Dvd.find(:id)
sound = Sound.where(sound: 'Dolby').first_or_create
dvd.sound = sound 
```

此外，我现在沉迷于`first_or_create`我从未知道存在的东西。这是一种绝妙的方法，可以让您不必先搜索记录并在它不存在时创建它。我不敢相信我不知道这件事。使用它，它很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T09:14:26.520

您是否曾经将 dvd 附加到 dvd_producer？我什至没有看到你制作 DVD 之类的东西。

```
producer = DvdProducer.create(producer: producer)
producer.dvds << Dvd.create(title: title) 
```

应该得到你想要的。

# sql - 从查询中删除重复条目

> ID：13396745
> 
> 赞同：0
> 
> 时间：2012-11-15T11:37:41.933
> 
> 标签：sql, sql-server

我想删除**所有**相同的条形码，所以我只剩下唯一的条形码。我怎样才能做到这一点？

我的查询属性是这些：

```
SELECT 
    Barcode, DeliveryAdrID
FROM 
    dbo.Sending 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:47:52.530

如果您只想要 Barcode 一次，并且需要一些 DeliveryAdrID 值

```
 SELECT Barcode, MIN(DeliveryAdrID) OneOfDeliveryAdrID
    FROM dbo.Sending
GROUP BY Barcode; 
```

这允许结果集如下：

```
Barcode  | OneOfDeliveryAdrID
ABCDEF     123
XYZ        123
PPP        123
ABC123     456
BARCODE    789 
```

即每个条码只会出现一次（DISTINCT），但多个条码可能会以相同的DeliveryAdrID 结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:47:02.710

这就是我一直在寻找的。

```
SELECT Barcode, MIN(DeliveryAdrID)as DeliveryAdrID
    FROM dbo.Sending
GROUP BY Barcode
Having count(Barcode)=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:52:13.980

您的表格中是否有 Id 归档？

所以，你可以试试：

```
select Barcode, DeliveryAdrID
from dbo.Sending s
where Id >= all
(
 select Id
 from dbo.Sending
 where Barcode=s.Barcode
) 
```

希望我能理解你试图做什么......

# c# - 我需要在客户端机器上安装 SQL Server 吗？

> ID：13396747
> 
> 赞同：2
> 
> 时间：2012-11-15T11:37:45.840
> 
> 标签：c#, .net, sql-server

我正在为客户创建一个控制台应用程序，使用包含 SQL Server 2008 的 VS2010。

我想在客户端的机器上部署该应用程序以进行检查。我想知道我需要在客户的机器上安装数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:38:44.113

SQL Server 数据库必须安装**在**客户端计算机可以连接到的位置：

*   可能在他的机器上（例如，如果这只是一个试验）
*   可能在他的网络中的服务器上（如果他的组织中的多个用户想要使用数据）
*   可能在云端（想想：SQL Azure）

无论您选择什么 - 但如果您的应用程序使用 SQL Server 存储其数据，则**必须有**一个 SQL Server**供客户端机器使用。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:33:38.057

如果您使用基于文件的数据库，则无需将其安装在任何地方供客户端使用。但是，基于文件的数据库可能没有那么可扩展，并且可能具有其他缺点。

[这里](https://stackoverflow.com/questions/10564073/what-is-the-difference-between-a-file-based-database-and-a-server-based-database)很好地解释了基于文件的数据库和基于服务器的数据库之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:22:08.620

您只能在 SERVER 机器上安装 Sql 服务器。在连接字符串中，您指定服务器机器的路径。您不需要在每台客户端计算机上安装 Sql。

# c++ - 匿名命名空间中的对象是隐式静态的吗？

> ID：13396748
> 
> 赞同：24
> 
> 时间：2012-11-15T11:37:46.927
> 
> 标签：c++, c++11

从 C++11 标准的角度来看，对象状态/属性之间是否存在技术差异：

```
namespace
{
   int foo;
   const int bar = 42;
} 
```

和

```
namespace
{
   static int foo;
   static const bar = 42;
} 
```

?

* * *

从这里的问题和答案中，我相信匿名命名空间中的对象是隐式静态的，但是有人告诉我，它只是内部的链接，编译器不会将对象当作标记为静态的对象，并暗示它将如何实现对象建造。所以我需要一些关于它真正含义的细节，如果在匿名命名空间中使用和不使用静态之间存在差异。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-15T11:43:01.747

C++11、3.5/4：

> 未命名的命名空间或在未命名的命名空间中直接或间接声明的命名空间具有内部链接。所有其他命名空间都有外部链接。具有命名空间范围但上面没有给出内部链接的名称，如果它是一个变量......

所以在 C++11 中，你的两个`foo`对象都有内部链接。在 C++03 中，第一个具有外部链接。

无论联动，它都有静态存储时长。

I don't think there's any such thing in the standard as "take the object as if it was marked static", so I can't answer to that. If you find some text in the standard that refers to whether the object is "marked static" and doesn't refer specifically to either linkage or storage duration, then cite it and I can give you an opinion :-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:40:42.447

有一个很大的区别：与`static`，名字有内部联系；没有它，它具有外部链接（但在您不能在另一个翻译单元中引用的命名空间中）。区别并不总是很重要，但在某些情况下确实会发挥作用：例如，如果您有一个带有`int*`参数的模板，则不能在`&foo`if `foo`is declared上实例化它`static`。

## 编辑：

正如 Steve Jessop 所指出的，这仅在 C++03 中是正确的。C++11 确实在这里做出了改变。虽然不知道为什么；我发现 C++03 规范更加连贯——某些东西所在的命名空间不应该影响链接。

# java - 以编程方式填写另一个应用程序的活动字段？

> ID：13396749
> 
> 赞同：-4
> 
> 时间：2012-11-15T11:37:48.020
> 
> 标签：java, android

我如何以编程方式填写另一个应用程序活动中的字段？有可能的？什么是正确的方法？添加：我的应用程序是根授权的。我知道什么是包现在在前台。我有开放活动的名称和活动中的字段名称。我也有我需要在这个领域推动的价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:42:30.313

应用间通信的方式基本上是通过Android世界中的Intents。这假定接收器指定它期望数据到达的格式。

活动中的字段是该应用程序私有的，不应该对其他应用程序可用。如果可能的话，这将是平台中的一个巨大安全漏洞。

您可以创建自定义键盘或其他输入法 (IME)，[在此处](http://developer.android.com/guide/topics/text/creating-input-method.html)指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:44:08.357

InterProcess Communication ( `IPC`) 只能通过`AIDL`接口完成。

你应该从[那里开始](http://developer.android.com/guide/components/aidl.html)

# testing - Testlink 1.9.4 Buzzilla 接口 xmlrpc

> ID：13396750
> 
> 赞同：0
> 
> 时间：2012-11-15T11:37:50.457
> 
> 标签：testing, xml-rpc, bugzilla

我正在尝试通过 xmlrpc 接口集成 Testlink 1.9.4 和 Bugzilla。我去了 Testlink GUI 中的问题跟踪管理并配置了参数：

```
<issuetracker>
<username>USERNAME</username>
<password>PASSWORD</password>
<uribase>http://myBugzillaURL/</uribase>
</issuetracker> 
```

我运行测试，但是当我尝试添加错误时，Testlink 没有添加任何内容。它调用 URL`myIP/testlink/lib/execute/bugAdd.php`并返回以下内容：

如果存在错误 ID：

```
object(stdClass)#152 (6) { ["IDHTMLString"]=> string(14) "5883 : " ["statusCode"]=> int(0) ["statusVerbose"]=> string(11) "UNCONFIRMED" ["statusHTMLString"]=> string(14) "[UNCONFIRMED] " ["summaryHTMLString"]=> string(18) "this is my summary" ["summary"]=> string(18) "this is my summary" } 
```

如果错误 ID 不存在：

```
object(stdClass)#152 (6) { ["IDHTMLString"]=> string(17) "1000000 : " ["statusCode"]=> int(0) ["statusVerbose"]=> NULL ["statusHTMLString"]=> string(3) "[] " ["summaryHTMLString"]=> NULL ["summary"]=> NULL } 
```

我不明白为什么它不起作用。Testlink 连接到 Bugzilla，但它没有将错误信息添加到我运行的测试用例中。有人能正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:06:22.030

Testelink 1.9.4 有一个错误导致 Bugzilla 失败。需要从文件中删除2行代码`lib/issuetrackerintegration/bugzillaxmlrpcInterface.class.php`

在这里查看[http://gitorious.org/testlink-ga/testlink-code/commit/084429d478fa12cd2939c4c13287c4b7ba71bb51](http://gitorious.org/testlink-ga/testlink-code/commit/084429d478fa12cd2939c4c13287c4b7ba71bb51)

取自[http://mantis.testlink.org/view.php?id=5346](http://mantis.testlink.org/view.php?id=5346)

> 发现问题在 checkid* 方法中有一个 DIE() 看看提交并相应地更改您的代码

谢谢fmat！

# django - 带有搜索选项的 django manytomany 字段

> ID：13396753
> 
> 赞同：0
> 
> 时间：2012-11-15T11:37:57.800
> 
> 标签：django, django-grappelli

我正在尝试在管理面板的 manytomany 字段中使用自定义搜索选项。它不按我的方式工作。搜索后，我想将所选项目显示为搜索字段下方的列表，目前它在搜索字段中显示逗号分隔值。这是我的代码

```
class MyModel(models.Model):
my_data= models.ManyToManyField(Topic, blank=True, null=True, related_name='mymodel_data') 
```

管理员.py

```
class MyModelCustom(admin.ModelAdmin):
model = MyModel
# define the raw_id_fields
raw_id_fields = ('my_data',)
# define the related_lookup_fields
related_lookup_fields = {
    'my_data': ['my_data']
}
admin.site.register(MyModel, MyModelCustom) 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:25:57.313

您的 ModelAdmin 中的 related_lookup_fields 是错误的。它需要是：

```
related_lookup_fields = {
    'm2m' : ['my_data']
} 
```

# sql - 从多个临时表中获取数据

> ID：13396755
> 
> 赞同：0
> 
> 时间：2012-11-15T11:38:00.877
> 
> 标签：sql, join, temp

我已将不同的值插入到不同的临时表中。例如，销售员明智地销售了特定产品。产品方面，我已插入临时表。

但是，在使用连接从临时表中获取数据时，我正在参考第一个临时表。如果第二个推销员没有在第一个临时表上使用，则无法获得准确的结果

帮我解决这个问题！！！！

问候

哈里克里希南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:08:46.943

将您的内部联接更改为第一个临时表，成为外部联接。

# php - 是否可以通过编程方式从命令行访问 MongoDB 的配置文件？

> ID：13396758
> 
> 赞同：2
> 
> 时间：2012-11-15T11:38:05.237
> 
> 标签：php, bash, shell, mongodb

我想创建一个监视脚本，向我发送有关慢查询的警报。

所以我想以编程方式获取配置文件数据。我想我可以通过连接到 MongoDB 从 PHP 做到这一点（虽然不确定）。

但如果我可以直接从 bash 脚本访问探查器会更好。那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T23:35:47.113

除了直接运行js文件或者连接驱动外，还可以通过curl/wget直接从bash中查询mongodb。您只需要使用 --rest 启动服务器

```
mongod --rest 
```

如果您的服务器侦听 27017，则添加 1000 以获取 http 端口（在本例中为 28017）。您获得的页面是管理页面。您可以在这里进行基本查询，例如：

```
$ curl -i http://localhost:28017/<dbName>/<collectionName>/ 
```

IE

```
$ curl http://localhost:28001/test/foo/?filter_str=Hello   
{
  "offset" : 0,
  "rows": [
    { "_id" : { "$oid" : "50ab8a10df015a6dd00a44a7" }, "str" : "Hello" } ,
    { "_id" : { "$oid" : "50ab8a14df015a6dd00a44a8" }, "str" : "Hello", "x" : 1 }
  ],

  "total_rows" : 2 ,
  "query" : { "str" : "Hello" } ,
  "millis" : 0
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:29:03.203

Mongo 控制台提供了一种脚本模式，您可以将其嵌入到 bash 脚本中。有关详细信息和用法，请参阅以下页面： [编写 MongoDB Shell 脚本](http://www.mongodb.org/display/DOCS/Scripting+the+shell)

如果您想使用 PHP 并直接连接，PHP 在 MongoDB 支持的驱动程序列表中，它会为您提供比脚本 mongo 更好的界面。有关更多信息，请参阅以下内容： [MongoDB 驱动程序](http://www.mongodb.org/display/DOCS/Drivers)

# unit-testing - Rspec2：期望调用许多参数中的一些参数

> ID：13396759
> 
> 赞同：1
> 
> 时间：2012-11-15T11:38:13.213
> 
> 标签：unit-testing, activerecord, rspec, rspec2

我需要测试一段代码是否执行了两个 sql 语句，我这样做是说

```
 ActiveRecord::Base.connection.should_receive(:execute).with("s1")
  ActiveRecord::Base.connection.should_receive(:execute).with("s2") 
```

但是，该代码还执行了许多我不关心的其他语句，这会使测试出错。我如何告诉 Rspec 确保它在已执行语句的列表中`s1`？`s2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:25:56.757

将您的 RSpec 版本更新到 2.12，您将可以访问该`and_call_original`方法（请参阅[文档](http://rubydoc.info/gems/rspec-mocks/frames#Delegating_to_the_Original_Implementation)和[用例](https://www.relishapp.com/rspec/rspec-mocks/v/2-12/docs/message-expectations/calling-the-original-method)）。使用该方法，您可以存根的`execute`方法`ActiveRecord::Base.connection`并使其调用原始方法，然后只需添加您想要的期望：

```
ActiveRecord::Base.connection.stub(:execute).and_call_original
ActiveRecord::Base.connection.should_receive(:execute).with(:s1)
ActiveRecord::Base.connection.should_receive(:execute).with(:s2) 
```

如果出于某种原因您不使用（或不想使用）最新版本的 RSpec，您可以通过以下方式实现相同的功能：

```
execute = ActiveRecord::Base.connection.method(:execute)
ActiveRecord::Base.connection.should_receive(:execute).with(:s1)
ActiveRecord::Base.connection.should_receive(:execute).with(:s2)
ActiveRecord::Base.connection.stub(:execute) { |*args| execute.call(*args) } 
```

参考：

*   [rspec 2：检测对方法的调用，但仍然让它执行其功能](https://stackoverflow.com/questions/7206453/rspec-2-detect-call-to-method-but-still-have-it-perform-its-function)
*   [使用 RSpec 期望方法调用和代理到原始方法](https://stackoverflow.com/questions/5320292/expect-method-call-and-proxy-to-original-method-with-rspec)

# symfony - 如何删除可以处于“OneToMany”关系中的实体

> ID：13396761
> 
> 赞同：2
> 
> 时间：2012-11-15T11:38:17.513
> 
> 标签：symfony, doctrine, one-to-many

我有两个实体： a`Person`和 an `Address`。

*   一个`Person`可以有一个`Address`
*   an`Address`可以自给自足地生活`Person`。

我已经创建了这样的关系：

**地址**

```
/**
 * @ORM\OneToMany(targetEntity="Person", mappedBy="address", cascade={"detach"})
 */
protected $persons; 
```

**人**

```
/**
 * @ORM\ManyToOne(targetEntity="Address", inversedBy="persons", cascade={"detach"})
 * @ORM\JoinColumn(name="address_id", referencedColumnName="id")
 */
protected $address; 
```

当我现在尝试删除与它`Address`相关的一个`Person`时，它当然会导致“**违反完整性约束**”。我怎么能告诉教义简单地*将*`Address`. `Person`如果尝试`cascade={"detach"}`在两者上使用但没有任何反应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:01:32.773

人：

```
/**
* @ORM\ManyToOne(targetEntity="Address", inversedBy="persons")
* @ORM\JoinColumn(name="address_id", referencedColumnName="id", onDelete="SET NULL")
*/
protected $address; 
```

地址：

```
/**
* @ORM\OneToMany(targetEntity="Person", mappedBy="address", cascade={"all"})
*/
protected $persons; 
```

这个设置非常适合我。当您删除地址时，person 将在 address_id 中获得 NULL。如果您执行以下操作，Cascade all in Address 也将保存新人：

```
$address->setPersons(
    array( $person1, $person2 )
) ; 
```

$person 将在哪里：

```
$person1 = new Person() ;
$person1->setName(....) ; 
```

如果这不起作用，请从控制器或单元测试中发送代码。它应该只是最基本的代码；如果您使用地址，您只需保留地址实体。个人实体也是如此。你不需要坚持两者，教义会解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:16:21.493

您可以像这样删除它：

```
$id = ...; #some id
$personRepository = $this->getDoctrine()->getRepository('AcmeDemoBundle:Person'); #entity repository
$em = $this->getDoctine()->getEntityManager();

$person = $personRepository->find($id);
$address = $person->getAddress();
$person->setAddress(NULL); 
$em->remove($address);
$em->flush(); 
```

关于以下几点的附注 `$person->setAddress(NULL)`：

*   如果您有`CASCADE`外键约束，则必须调用它。否则你也会**丢失** `Person`记录。
*   如果您将约束更改`SET NULL`为线`$person->setAddress(NULL)`，则不需要，因为它会自动设置该`NULL`值。

希望这可以帮助....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:39:47.007

[jperovic](https://stackoverflow.com/users/662615/jperovic)解决方案正在工作 - 我没有测试它，但对我来说听起来不错。
我可以向您建议的是，为了减少代码量和可能的错误，请遵循以下一条：

1.  基于 ORM -[阅读更多](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations)
2.  基于 RDBMS -`ON DELETE SET NULL`直接使用到你的表上的外键，即

    ```
    CONSTRAINT fk_18ffff524ebd63f2 FOREIGN KEY (canale_id)
      REFERENCES canale (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE CASCADE 
    ```

（来自PostgreSQL）

# php - Zend 框架/表单：自定义元素未在错误时显示

> ID：13396762
> 
> 赞同：0
> 
> 时间：2012-11-15T11:38:24.100
> 
> 标签：php, forms, zend-framework, error-handling

我添加了一个自定义元素类型来将原始 html 呈现为表单。此外，我进行自定义错误处理（以突出显示错误项目并将错误消息添加为工具提示）。

一切正常。如果自定义错误处理方法捕获验证错误，则根本不会显示我的自定义（原始 html）元素。

如果表单验证失败，有人知道为什么我的原始 html 项目会从标记中删除吗？

形式：

```
class Sample_Form_Process extends Zend_Form
{

    [...]

    public function init()
    {

    [...]

        $this->addElement('rawText', 'spacer', array(
            'value' => '<br class="cl"/><div class="border-bottom"></div>',
        ));

    [...]

    }

    [...]

    public function highlightErrorElements()
    {
        foreach($this->getElements() as $element) {
            if($element->hasErrors()) {
                $element->setAttrib('class', 'error tooltip');
                $element->setAttrib('title', $element->getMessages());
            }
        }
    }
} 
```

进程控制器类：

```
class Sample_ProcessController extends Zend_Controller_Action
{

    [...]

    public function addAction()
    {

        [...]

        if ($this->getRequest()->isPost()) {

            if ($form->isValid($request->getPost())) {

            [...]

            } else {
                $form->highlightErrorElements();
            }
        }
    }

    [...]

} 
```

用于呈现自定义表单元素的 RawText 类：

```
class Zend_Form_Element_RawText extends Zend_Form_Element
{
    public function render(Zend_View_Interface $view = null)
    {
        return $this->getValue();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:35:46.470

您需要将该`isValid()`方法添加到您的自定义表单元素中，以始终返回`true`以便它通过验证。

```
public function isValid($value)
{
    return true;
} 
```

# php - Prestashop 多存储和多语言 URL 重写

> ID：13396763
> 
> 赞同：0
> 
> 时间：2012-11-15T11:38:28.480
> 
> 标签：php, .htaccess, mod-rewrite, prestashop

设置具有多商店功能和多语言支持的 Prestashop。这意味着 Prestashop 默认会将我的 URL 定义为：

```
domain.com/store/lang => domain.com/uk/ja   (UK store with Japanese language) 
```

但是，我真的很感激我的 URL 在一个级别上同时具有商店和语言：

```
domain.com/store-lang => domain.com/uk-ja 
```

我发现这可能通过 .htaccess 或 dispatch.php 文件实现。但是似乎无法使其正常工作。而且我也很感激一个解决方案，它不是太hacky并且在很多地方都被编码。

我希望有人以前可能已经尝试过，或者可能想出任何可能的解决方案:)

# 没有正确答案

我们还没有想出任何解决这个问题的办法。我将使用 /store/language 实现应用程序，并希望它不会影响用户或 SEO。我选择接受下面的答案，即使它实际上不起作用。然而，这是唯一的答案，而且真的很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:58:54.397

你需要制定一个重写规则

看看[http://www.presto-changeo.com/en/content/6-prestashopseotips](http://www.presto-changeo.com/en/content/6-prestashopseotips)（和[http://www.webshopstarter.com/shoppingcarts/prestashop-seo-friendly-urls/](http://www.webshopstarter.com/shoppingcarts/prestashop-seo-friendly-urls/)）

并添加：

```
RewriteRule ^(\w+)-(.*) $1/$2 [QSA,L,R=301] 
```

# c - 仅使用按位运算在 C 中实现更大的等号

> ID：13396770
> 
> 赞同：1
> 
> 时间：2012-11-15T11:38:43.410
> 
> 标签：c, comparison, bit-manipulation, bitwise-operators

我知道许多基本操作，如加法或除法，也可以在 C 中仅使用位运算符来实现。如何对大于或等于号 (>=) 执行相同操作？

```
if (x >= 0) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:35:06.147

我能想到的最简单的解决方案：

```
#include <limits.h>

if ((x & INT_MAX) == x)    // if (x >= 0)
    ... 
```

如果您不喜欢，`==`则使用 XOR 进行 equals 测试：

```
#include <limits.h>

if ((x & INT_MAX) ^ x)    // if (x < 0)
    ...
else                      // else x >= 0
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T05:00:30.633

如果你只想要`if (x >= 0)`那么这就足够了

```
if (~x & INT_MIN) 
```

如果您的意思是两个数字之间的“大于或等于”，那么差异会更大

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T11:50:35.190

如果您只能使用按位运算符，甚至禁用比较运算符，那是不可能的（实际上，几乎没有什么可能）。隐式比较总是存在的，即使是在生成的汇编代码`if(x some bitwise stuff)`中实际解释为等价的操作也是如此。`if(x some bitwise stuff) != 0)`

# hadoop - PigLatin 中的 STRSPLIT 和 REGEX_EXTRACT_ALL

> ID：13396778
> 
> 赞同：2
> 
> 时间：2012-11-15T11:39:10.937
> 
> 标签：hadoop, apache-pig

我有以下文件：

```
File
----
12-3    John    121
 5-1    Sam     122 
```

该文件以制表符 ( `\t`) 分隔。我正在加载该行，`line:chararray`因为我希望数据不被拆分到各个字段中。

现在，我想将详细信息（12-3 和 5-1）提取并存储为单独的数据。

我正在尝试使用`STRSPLIT`and `REGEX_EXTRACT_ALL`，但数据似乎不匹配。

```
splitdata = FOREACH filedata {
    regex = REGEX_EXTRACT_ALL(line, '^([0-9]*)\\-([0-9]*)');
    split = STRSPLIT(line, '\\t', 1);
    GENERATE regex, split;
}; 
```

这就是我希望我的最终数据的样子：

```
(12, 3, 12-3    John    121)
( 5, 1,  5-1    Sam     122) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:32:41.740

关于什么：

```
A = LOAD .... AS (line:chararray);
B = FOREACH A GENERATE FLATTEN(REGEX_EXTRACT_ALL(line, '^(.*)\t(.*)\t(.*)$')) 
      AS (id:chararray, name:chararray, nameid:chararray);
C = FOREACH B GENERATE FLATTEN(REGEX_EXTRACT_ALL(id, '^([0-9]*)\\-([0-9]*)')), 
      id, name, nameid;
STORE C INTO ... 
```

如果在加载时将行拆分为沿 \t 的字段，则可以跳过`B = ...`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T13:59:24.990

谢谢洛兰德。

既然您对如何使用 有一点想法`REGEX_EXTRACT_ALL`，这就是我最终使用它的方式。

```
FOREACH A GENERATE FLATTEN(REGEX_EXTRACT_ALL(line, '^([0-9]*)\\-([0-9]*).*')) 
  AS (FIELD1:chararray, FIELD2:chararray), line; 
```

很有趣的是，Matcher.matches() 失败了`'^([0-9]*)\\-([0-9]*)'`while 为`'^([0-9]*)\\-([0-9]*).*'`.

# python - 创建随机字符串时 Python 2.73 中的属性错误

> ID：13396781
> 
> 赞同：0
> 
> 时间：2012-11-15T11:39:17.840
> 
> 标签：python

我正在使用以下函数（我认为这很简单）来生成一个随机字符串：

```
import sys
import string
import random

    def random(size=16):
        lst = [random.choice(string.ascii_letters + string.digits) for n in xrange(size)]
        str = "".join(lst)
        return str 
```

但是，我不断收到以下错误：

```
AttributeError: 'function' object has no attribute 'choice' 
```

有人可以告诉我我的代码有什么问题吗？谷歌似乎没有帮助，而且我对 Python 太陌生，无法自己有效地解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:40:26.683

`import random`您正在用您的函数定义覆盖。

Python 命名空间中的“随机”名称现在指的是您的功能，而不是`random`您想要的模块。

将函数名称更改为类似`random_str`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:40:34.077

`random`当它也是模块的名称时，您正在使用函数的名称。将您的函数重命名为其他名称，它将起作用。

# parsing - 方案 - LALR 解析器生成 - 来自字符串的输入

> ID：13396782
> 
> 赞同：4
> 
> 时间：2012-11-15T11:39:21.447
> 
> 标签：parsing, scheme, lalr, guile

我们正在尝试生成（以诡计）从字符串而不是标准输入读取字符的解析器和词法分析器。

我们开始修改 [http://code.google.com/p/lalr-scm/source/browse/trunk/calc.scm?r=52代码中包含的计算器示例](http://code.google.com/p/lalr-scm/source/browse/trunk/calc.scm?r=52)

问题似乎在以下行：

```
(let* ((location (make-source-location "*stdin*" 
(port-line (current-input-port)) 
(port-column (current-input-port)) -1 -1)) 
```

我们尝试定义一个新的输入端口：

```
(let* ((location (make-source-location "*stdin*" 
(port-line (open-input-string program)) 
(port-column (open-input-string program)) -1 -1)) 
```

并且变量*程序*是这样定义的：

```
(define program
"int x = 2;
 int y = 0;
 y= x*(2+3);"
 ) 
```

但它不起作用，它仍然等待标准输入字符。

该文档缺少详细信息，因此我们无法弄清楚如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:29:37.350

您非常非常接近解决方案！嗯，有点。但这是一个开始。查看原始代码，在您修改它的地方：

```
(let* ((location (make-source-location "*stdin*" (port-line (current-input-port)) (port-column (current-input-port)) -1 -1))
       (c (read-char)))
  ...) 
```

在这里，您将所有内容更改`(current-input-port)`为您的字符串端口（顺便说一句，不要`open-input-string`多次调用，因为您每次都创建一个新的字符串端口，每个都有独立的光标），但它并不是唯一实际使用`(current-input-port)`.

你看到了吗？它实际上在`(read-char)`通话中！该函数实际上接受一个端口参数，默认为`(current-input-port)`.

事实上，如果您在上面搜索并搜索 and 的实例`(read-char)`，`(peek-char)`您会注意到使用 of`(current-input-port)`几乎融入了整个`make-lexer`函数。所以你需要改变它。

我建议您为该`make-lexer`函数指定一个输入端口：

```
(define* (make-lexer errorp #:optional (input (current-input-port)))
  ... 
```

然后更改和的*所有*实例以使用输入端口。也不要忘记改变你的电话：`(read-char)``(peek-char)``make-source-location`

```
(let* ((location (make-source-location "*stdin*" (port-line input) (port-column input) -1 -1))
       (c (read-char input)))
  ...) 
```

现在，您可以使用`(make-lexer errorp (open-input-string program))`它并且它应该可以工作。（我没有测试过。）

# c++ - 向量序列化/反序列化中的 C++ 分段错误

> ID：13396784
> 
> 赞同：3
> 
> 时间：2012-11-15T11:39:25.587
> 
> 标签：c++, segmentation-fault

请帮我调试下面的代码。我正在做的只是序列`vector<string>`化成二进制文件并从中检索它。这是示例主要代码，

```
 /*  Portion Commented */
vector<string> list;

list.push_back("AAAAAA");
list.push_back("BBBBBB");
list.push_back("CCCCCC");
list.push_back("DDDDDD");

// Write out a list to a disk file
ofstream os ("/home/test/data.dat", ios::binary);

int size1 = list.size();
os.write((const char*)&size1, sizeof(int));
os.write((const char*)&list[0], size1 * sizeof(string));
os.close();
/* Portion Commented */

// Read it back in
VertexList list2;

ifstream is("/home/test/data.dat", ios::binary);
int size2;
is.read((char*)&size2, sizeof(int));

list2.resize(size2);
cout<<"Size is :"<<size2<<endl;
is.read((char*)&list2[0], size2 * sizeof(string));
for (int i=0; i < size2; i++)
{
        cout<<"At i = "<<i<<", "<<list2[i]<<endl;   //Line 40 in my program
} 
```

我有 4 个元素被推入向量列表。然后我序列化向量并将其写入二进制文件并从中检索它。它工作正常。

后来，当我在上面的代码中注释“部分注释”并尝试直接从已经创建的二进制文件“data.data”中检索向量时，它显示了分段错误事件，尽管它在 for 循环之前将大小正确打印为 4 . `valgrind --leak-check=yes ./a.out`这是我用这个 ( )创建的 valgrind 输出，

```
==14058== Invalid read of size 8  
==14058==    at 0x4EBE263: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <char, std::char_traits<char>, std::allocator<char> >(std::basic_ostream<char, std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (in /usr/lib/libstdc++.so.6.0.14)  
==14058==    by 0x40107F: main (test2.cpp:40)  
==14058==  Address 0x2156010 is not stack'd, malloc'd or (recently) free'd 
```

第 40 行是`cout`最后一个 for 循环中的语句。有人可以帮我调试吗？还告诉我上面的代码是否可移植？

谢谢， 普拉布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:49:08.450

的实现`std::string`包括指向堆上实际字符串内容的指针。所以，`sizeof(string)`只是指针加上一些字节。如果要写字符串，必须自己写内容

```
for (auto i = list.begin(); i != list.end(); ++i) {
    os.write(i->c_str(), i->size() + 1);
} 
```

当你读回它时，你必须寻找终止的 NUL 字节。或者，您可以保存字符串的长度，就像您对列表所做的那样

```
for (auto i = list.begin(); i != list.end(); ++i) {
    int len = i->size() + 1;
    os.write((const char*)&len, sizeof(len));
    os.write(i->c_str(), i->size() + 1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:49:00.633

```
os.write((const char*)&list[0], size1 * sizeof(string)); 
```

你在这里做什么？铸造`std::string`成`const char*`? 那没有意义。

如果你使用 C++ 风格的强制转换，编译器会告诉你为什么它没有意义。这就是为什么 C++ 程序员应该避免使用 C 风格的强制转换！

您可能想要做的是：

```
os.write(list[0].c_str(), list[0].size() + 1); 
```

你应该在一个循环中这样做：

```
for(auto const & s : list) //s is inferred to be std::string
{
  os.write(s.c_str(), s.size() + 1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:03:36.007

在 C/C++ 中，您不应该保存结构或类以进行序列化，除非您知道实现并且其中没有指针。
更好的方法是使用 boost 序列化。他们已经尽一切努力支持序列化/反序列化 STL 对象。

```
#include <boost/archive/binary_oarchive.hpp>
#include <boost/archive/binary_iarchive.hpp>
#include <boost/serialization/string.hpp>
#include <boost/serialization/vector.hpp>
#include <iostream>
#include <vector>
#include <fstream>
#include <string>
using namespace std;
int main(int ac, char **av)
{
    vector<string> list1;

    list1.push_back("AAAAAA");
    list1.push_back("BBBBBB");
    list1.push_back("CCCCCC");
    list1.push_back("DDDDDD");

    // Write out a list to a disk file
    ofstream os ("data.dat", ios::binary);

    boost::archive::binary_oarchive oa(os);
    oa << list1;
    os.close();

    vector<string> list2;

    ifstream is("data.dat", ios::binary);
    boost::archive::binary_iarchive ia(is);
    ia >> list2;
    int size2 = list2.size();
    for (int i=0; i < size2; i++)
    {
       cout<<"At i = "<<i<<", "<<list2[i]<<endl;   //Line 40 in my program
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:52:15.347

`sizeof( std::string )`给你`string`对象的大小。实际的字符串数据本身是动态的，并由`string`类中的指针保存。

您可能想要使用[google 协议缓冲区](http://code.google.com/p/protobuf/)或[提升序列化](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)来序列化/反序列化对象。

# ios - iOS 自定义键盘可拉伸图像停止拉伸

> ID：13396786
> 
> 赞同：4
> 
> 时间：2012-11-15T11:39:27.013
> 
> 标签：ios, uibutton, uiimage, uikeyboard

我为 UITextField 制作了一个自定义键盘，由 18 个 UIButtons 组成。它是一个 UIView，它被设置为文本字段的 inputView。

按钮是在`initWithFrame:`UIView 的方法中使用代码创建的

```
UIImage* buttonImage =[[UIImage imageNamed:@"keyboard-button-background.png"] stretchableImageWithLeftCapWidth:1.0 topCapHeight:79.0];
UIImage* buttonPressedImage =[[UIImage imageNamed:@"keyboard-button-pressed-background.png"] stretchableImageWithLeftCapWidth:1.0 topCapHeight:79.0];

UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setTitle:title forState:UIControlStateNormal];
[button setBackgroundImage:buttonImage forState:UIControlStateNormal];
[button setBackgroundImage:buttonPressedImage forState:UIControlStateHighlighted];

button.frame = CGRectMake(xPosition, yPosition, buttonWidth, buttonHeight); 
```

按下按钮后，该按钮将设置为`enabled = NO`。至少启用一个按钮时，背景会完美拉伸。如果所有按钮都被禁用，并且 UITextfield`resignsFirstResponder`然后 UITextField 再次成为 First Responder，则按钮会出现，但背景图像似乎不再拉伸（至少不是垂直方向，水平方向似乎很好）。

我不确定从哪里开始寻找解决方案。我的猜测是自定义键盘绘制子视图的方式，但我不确定。

这可以通过设置背景图像或类似的东西来解决`layoutSubviews`吗`drawRect:`？水平拉伸效果很好的事实让我想知道 UIButton 的框架是否在绘制时不正确。

**编辑** 最左边的单元格只是标签，右边带有数字的单元格是 UITextfields 并具有自定义键盘

键盘的外观： ![键盘的外观](../Images/d46287a0d5472932e538de56fe1ac8ea.png)

一旦在单元格 3 上辞职了第一响应者，然后给了 1 个第一响应者（所有键被禁用），然后给了 4 个第一响应者，键盘的实际外观如何： ![一旦在单元格 3 上辞职了第一响应者，然后给了 1 个第一响应者（所有键都被禁用），然后给了 4 个第一响应者，键盘的实际外观如何](../Images/3d9ea608d053e81d0bcd419e32293c2b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:41:41.223

为了处理不同的 iOS API，我为 UIImage 做了一个类别。

```
@implementation UIImage (SPResizableImage)

- (UIImage *)spResizableImageWithCapInsets:(UIEdgeInsets)edge
{
    UIImage * resizableImage = nil;

    if ([self respondsToSelector:@selector(resizableImageWithCapInsets:)]) // iOS 5
    {
        resizableImage = [self resizableImageWithCapInsets:edge];
    }
    else
    {
        resizableImage = [self stretchableImageWithLeftCapWidth:edge.left
                                                   topCapHeight:edge.top];
    }

    return resizableImage;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:45:42.760

您使用的背景图像的大小是多少？

无论如何`stretchableImageWithLeftCapWidth:topCapHeight:`，自 iOS 5 以来已弃用。尝试`resizableImageWithCapInsets:`改用。

# asp.net-mvc - MVC 将 ActionResult 保存到字节数组

> ID：13396789
> 
> 赞同：3
> 
> 时间：2012-11-15T11:39:28.997
> 
> 标签：asp.net-mvc

我正在寻找一种将 MVC ActionResult 保存到字节数组（文件）的好方法。原因是我正在使用 Rotativa 将 HTML 视图转换为 PDF。这很好用，并在浏览器中用 PDF 返回我的用户。现在我想从服务器发送一封电子邮件，包括相同的 PDF 作为附件。为了发送电子邮件，我使用 ActionMailer.Net nuget 包。可以选择将字节数组作为附件。

所以我需要将一个字节数组与我的 PDF 文件一起传递给发送邮件方法。但是返回 PDF 的操作将 ActionResult 作为返回类型，而不是 FileStreamResult（不幸的是）。我不完全知道为什么会做出这个选择，但就是这样。

Rotativa 包使用 Wkhtmltopdf 来转换 HTML。我想我可以自己实现，但这似乎毫无意义，因为我已经有一个方法可以返回我需要的东西；我只需要一种方法将该结果转换为字节数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-18T17:15:42.513

您可以继承“ViewAsPdf”并创建一个方法来调用“ViewAsPdf”的一些受保护方法：

```
public class ViewAsPdf2 : ViewAsPdf
{
    public ViewAsPdf2(string viewName, object model) : base(viewName, model) { }
    public byte[] GetByte(ControllerContext context)
    {
        base.PrepareResponse(context.HttpContext.Response);
        base.ExecuteResult(context);
        return base.CallTheDriver(context);
    }
} 
```

在你的行动中：

```
var pdf = new ViewAsPdf2("MyView", model);
var pdfByteArray = pdf.GetByte(ControllerContext);
SendEmail(pdfByteArray);
return null; 
```

因此，您可以使用`byte[]`来做您想做的事情，返回的将是 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:49:20.343

您可以向应该返回 PDF 并将结果保存为字节数组的控制器操作发送 HTTP 请求。这[`WebClient.DownloadData`](http://msdn.microsoft.com/en-us/library/xz398a3f.aspx)方法似乎合适。

如果要保留上下文（会话、已验证用户），则需要设置 Cookie 标头：

```
client.Headers[HttpRequestHeader.Cookie] = Request.Headers["Cookie"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T01:39:48.533

我有同样的问题，这是我的解决方案：

您基本上需要向您自己的 URL 发出 HTTP 请求并将输出保存为二进制文件。简单，没有重载，辅助类和臃肿的东西。

你需要这个方法：

```
 // Returns the results of fetching the requested HTML page.
    public static void SaveHttpResponseAsFile(string RequestUrl, string FilePath)
    {
        try
        {
            HttpWebRequest httpRequest = (HttpWebRequest)WebRequest.Create(RequestUrl);
            httpRequest.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)";
            httpRequest.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip,deflate");
            HttpWebResponse response = null;
            try
            {
                response = (HttpWebResponse)httpRequest.GetResponse();
            }
            catch (System.Net.WebException ex)
            {
                if (ex.Status == WebExceptionStatus.ProtocolError)
                    response = (HttpWebResponse)ex.Response;
            }

            using (Stream responseStream = response.GetResponseStream())
            {
                Stream FinalStream = responseStream;
                if (response.ContentEncoding.ToLower().Contains("gzip"))
                    FinalStream = new GZipStream(FinalStream, CompressionMode.Decompress);
                else if (response.ContentEncoding.ToLower().Contains("deflate"))
                    FinalStream = new DeflateStream(FinalStream, CompressionMode.Decompress);

                using (var fileStream = System.IO.File.Create(FilePath))
                {
                    FinalStream.CopyTo(fileStream);
                }

                response.Close();
                FinalStream.Close();
            }
        }
        catch
        { }
    } 
```

然后在您的控制器内部，您可以这样称呼它：

```
SaveHttpResponseAsFile("http://localhost:52515/Management/ViewPDFInvoice/" + ID.ToString(), "C:\\temp\\test.pdf"); 
```

还有哇！该文件在您的文件系统中，您可以双击并打开 PDF，或通过电子邮件将其发送给您的用户，或任何您需要的...

# jquery - JQuery如何遍历到 从里面，有 介于两者之间

> ID：13396790
> 
> 赞同：0
> 
> 时间：2012-11-15T11:39:28.183
> 
> 标签：jquery, forms, html, input, traversal

好的伙计们，所以我有以下结构，10次，这意味着10个表格。 `$('button')`如您所知，将处理任何按钮的事件。

```
<div>
  <form ...>
    <div><button type='button'>Submit</button></div>
    <div><input /></div>
    <div><input /></div>
    <div><input /></div>
    <div><input /></div>
  </form>
</div> 
```

`<form>`仅使用 JQuery 及其遍历方法，`$(this)`当我单击按钮时如何获取？

我之前混合使用了 parent()、prev() 等，但无法得到它。例如，`$(this).closest('form').nodeName`在警报弹出窗口中给出“未定义”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:43:41.010

use

```
 $(':button').closest('form') 
```

UPDATE

```
$(':button').click(function(){
    alert($(this).closest('form').attr('class'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:55:49.797

这肯定会起作用：

```
 $('button').click(function(){
     alert($(this).closest('form').attr('id'));
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:44:22.443

你有没有尝试过

```
$('button').parents('form:first').get(0).nodeName; 
```

像这样

```
$('button').click(function(){
    alert($(this).parents('form:first').get(0).nodeName);
});​ 
```

[演示](http://jsfiddle.net/Gmyjt/1/)

**更新：**

你可以`submit`像这样简单

```
$('button').click(function(){
     $(this).parents('form:first').get(0).submit();
});​ 
```

# jenkins - Jenkins：查看哪些作业共享锁

> ID：13396793
> 
> 赞同：0
> 
> 时间：2012-11-15T11:39:43.583
> 
> 标签：jenkins

如何在 jenkins Web 用户界面中找到哪些作业共享一个公共锁？

（我的意思是无法访问`config.xml`文件系统上的詹金斯）

*更新：*例如作业“编译”、“测试”和“部署”共享一个锁，以避免其中一个在另一个运行时开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:46:01.497

最简单的“锁”是从属的队列，
假设您将其设置为一次运行一项作业。

查看从站，您可以看到附加到它的作业列表。

此外，如果“编译”触发“测试”触发“部署”，
那么您可以设置它，以便在下游作业仍在运行时不会启动新作业。

# c# - ASP.NET - Page.Form.Action/this.Form.Action 不重定向支付网关

> ID：13396794
> 
> 赞同：0
> 
> 时间：2012-11-15T11:39:44.127
> 
> 标签：c#, asp.net

```
this.Form.Action = "https://www.ccavenue.com/shopzone/cc_details.jsp"; 
```

这不是直接重定向到支付网关。如果我在按钮单击事件中添加此代码，它工作正常。我想要自动重定向。你能建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:33:23.923

在您的按钮处理程序代码中，您应该编写 `Response.Redirect ("http://...");`

您现在正在做的是设置一个 URL，当用户下次单击该按钮时，该 URL 将被击中。

# php - PHP + Oracle - 如何执行 SQL 注入？

> ID：13396795
> 
> 赞同：0
> 
> 时间：2012-11-15T11:39:44.673
> 
> 标签：php, oracle, sql-injection

就在最近，我们的客户让渗透测试公司对他们的网站进行了测试，并在报告中指出，在某些领域可能会以某种形式执行 SQL 注入。他们只说明数据库服务器版本和他们找到的一些表。

我试图在该字段上执行 SQL 注入，但我无法获得相关结果。我猜该字段上的 SQL 注入问题是：

*   字段由 AJAX 验证模糊
*   字段具有 JS 验证，输入只能是数字（任何其他字符都被剥离）
*   该字段的 AJAX 验证使用 SQL 询问数据库是否可以找到该值，如果是则返回 1，否则返回 false（简单`SELECT 1 FROM table WHERE column = '{$value}'`）
*   然后验证方法返回 true 或错误消息，并以 JSON 格式返回到表单

由于这一切，我不知道如何执行会返回一些数据的 SQL 注入...我知道我可以执行插入、更新、删除查询，所以确实存在 SQL 注入，**但是如何从 select 中检索一些数据**使用该字段及其验证方法**查询？？？**

**大家好！** 我不是在问“是否有任何 SQL 注入？” 或“SQL 注入是一件坏事吗？” -**我知道有 SQL 注入，我知道它非常糟糕**，但我的问题是我如何执行 SQL 注入，以便在您知道上述条件的情况下**检索任何数据......**

楼下那些评论都没用。。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:50:36.490

It's clear that:

1.  You aren't using the prepared statements feature that the OCI8 PHP extension provides (otherwise, you'd have `column = :value` instead of `column = '{$value}'`)

2.  Your validation is client-side, thus can be easily overridden.

So you **do** have a SQL injection vulnerability. Now, that doesn't mean that we can necessarily steal your passwords or credit card numbers. The minimum effect is that parameters provided by user can make you app crash and that's bad enough.

About the precise potential of this injection, it's hard to say without even knowing what the app does. Usual possibilities include:

*   Retrieve rows you're not supposed to see
*   Inject data manipulation statements

**Update:**

Without seeing what your PHP code does:

```
$value = "' UNION ALL SELECT credit_card FROM billing_info -- "; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:20:57.273

一旦发现漏洞，可能需要时间来设计一种方法来完全控制您的数据库，特别是如果攻击方必须欺骗/重写客户端代码以与您易受攻击的服务器端验证兼容。这也可能不是安全任务的一部分：它的实际目标是**发现**漏洞，而不是**利用**它们。

因此，在这里花费资源是毫无意义的，主要是你有一个漏洞，你必须纠正它。即使安全团队无法利用它，它也不能证明任何事情：**一个更有经验和/或更积极的不法分子团队当然可以利用它**。特别是，有一些工具可以在发现 SQL 注入漏洞后自动执行利用该漏洞的过程。

不要花太多时间试图理解客户端更改的微妙之处：最重要的部分是强大的服务器端验证。

也使用准备好的语句，问题解决了。

# objective-c - NSXMLParser 多线程问题

> ID：13396796
> 
> 赞同：1
> 
> 时间：2012-11-15T11:39:46.780
> 
> 标签：objective-c, multithreading, thread-safety, nsxmlparser

我正在开发一个带有 UISplitViewController 的 iPad 应用程序。

如果单击主视图中的单元格，则详细视图会运行`NSXMLParsers`以加载所需的数据。为了保持 UI 可用，这是在一个额外的线程中完成的。应用程序使用不同`detailViewControllers`的，使用不同的解析类实现`NSXMLParserDelegate`。

`NSXMLParser`我的问题是'方法似乎`[parser parse]`只能运行一次，因为如果我尝试同时在多个线程中运行它，我会收到 *EXC_BAD_ACCESS* 错误。

现在，如果用户在 masterView 中选择了一行，然后选择了另一行，而第一个 detailView 仍在加载和解析数据，两个线程尝试使用 parse 方法，这会引发上述错误。

所以我想知道如何实现，这个方法只运行一次，尽管它用于不同的线程和不同的实例/类。

# c# - 报告查看器从表单中传递图像可能吗？

> ID：13396798
> 
> 赞同：5
> 
> 时间：2012-11-15T11:39:58.253
> 
> 标签：c#, image, report, qr-code

使用 Visual Studio Ultimate 2012。

我目前正在构建要在报告查看器中打印的报告。到目前为止，我有一堆文本框，它们通过参数从我的表单文本框中获取其值。

到目前为止一切正常。

然后我遇到了一个大问题。如何将表单上的图像中的图像传递到报表上的图像？1 个图像预存在于数据库中，我相信我可以将图像作为参数调用（不确定）。更大的问题是另一个图像。

另一个图像使用生成 QR 图像的外部 API。此图像在运行时显示在我的表单上的图片框中。我没有将图像保存在我不希望的任何地方。但我明白我是否需要。有什么办法可以将表单上的图像框中的 QR 图像传递到我的报告图像框？

更新这里的错误代码：

```
Microsoft.Reporting.WinForms.ReportParameter rpIMG1 = new Microsoft.Reporting.WinForms.ReportParameter("paramQRimg", base64String);
Microsoft.Reporting.WinForms.ReportParameter rpIMG2 = new Microsoft.Reporting.WinForms.ReportParameter("paramQRMi", "image/png");

reportViewer1.LocalReport.SetParameters(new Microsoft.Reporting.WinForms.ReportParameter[] { rp1, rp2, rp3, rp4, rp5, rp6, rp7, rp8, rp9, rp10, rpIMG1, rpIMG2 }); 
```

设置参数部分发生错误，它说的是：

```
An error occurred during local report processing. 
```

不知道为什么它不喜欢这个

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T11:56:04.070

```
 public string ImageToBase64(Image image, 
  System.Drawing.Imaging.ImageFormat format)
{
  using (MemoryStream ms = new MemoryStream())
  {
    // Convert Image to byte[]
    image.Save(ms, format);
    byte[] imageBytes = ms.ToArray();

    // Convert byte[] to Base64 String
    string base64String = Convert.ToBase64String(imageBytes);
    return base64String;
  }
} 
```

将您的图像转换为 base64 字符串，然后将其作为参数传递给您的报告，然后将报告图像设置为此参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-11T07:50:28.643

```
 private void header()
    {
        try
        {
            string name = "";
            string address = "";
            string phone = "";
            string mobile = "";
            string establish = "";

            db.sql.Close();
            db.sql.Open();
            SqlCommand cmd = new SqlCommand("select * from print_head", db.sql);
            SqlDataReader read = cmd.ExecuteReader();
            while (read.Read())
            {
                name = read[1].ToString();
                address = read[2].ToString();
                phone = read[3].ToString();
                mobile = read[4].ToString();
                establish = read[5].ToString();
                MemoryStream ms = new MemoryStream((byte[])read[6]);
                logo = Image.FromStream(ms);
                try
                {

                        // Convert Image to byte[]

                        byte[] imageBytes = ms.ToArray();

                        // Convert byte[] to Base64 String
                        base64String = Convert.ToBase64String(imageBytes);

                }
                catch(Exception ex)
                {
                    MessageBox.Show(ex.ToString());
                }
            }
            ReportParameterCollection r = new ReportParameterCollection();
            r.Add(new ReportParameter("name", name.ToString()));
            r.Add(new ReportParameter("address", address.ToString()));
            r.Add(new ReportParameter("phone", phone.ToString()));
            r.Add(new ReportParameter("mobile", mobile.ToString()));
            r.Add(new ReportParameter("establish", establish.ToString()));
            r.Add(new ReportParameter("logo", base64String.ToString()));

            this.reportViewer1.LocalReport.SetParameters(r);
            db.sql.Close();
        }
        catch
        {

        }
    } 
```

# c++ - 计算轮廓的 x,y 轴长度

> ID：13396801
> 
> 赞同：1
> 
> 时间：2012-11-15T11:40:01.613
> 
> 标签：c++, c, image-processing, opencv

大家好。

我仍在使用[相同的旧程序](https://stackoverflow.com/questions/12971093/better-algorithm-for-edge-filter-in-video-programming)，到目前为止，我设法根据轮廓矩的计算找到了最大轮廓的面积和坐标。

```
double m_00 = cvGetSpatialMoment( &moments, 0, 0 ); //The area
double m_10 = cvGetSpatialMoment( &moments, 1, 0 );
double m_01 = cvGetSpatialMoment( &moments, 0, 1 );
float gravityX = (m_10 / m_00);     //center of x-axis              
float gravityY = (m_01 / m_00);     //center of y-axis 
```

...我得到的是：

![截图](../Images/0da8d5e55882b86e023464e70dbc8cbe.png)

...效果很好。但现在我想获取轮廓/对象的 x 轴和 y 轴的长度，如下所示：

![我需要的](../Images/e8ea3b456115d7da726fd94bad334dbf.png)

问题是**有什么函数可以计算轮廓的x轴和y轴长度吗？**如果是这样，任何人都可以给我一些线索如何做到这一点？

提前致谢。干杯。

P/S：我上面链接[的程序](https://stackoverflow.com/questions/12971093/better-algorithm-for-edge-filter-in-video-programming)是旧的，所以它有一些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:19:30.500

在我花了将近一天的时间在谷歌上搜索答案后，我终于找到了另一种获取对象宽度和高度的方法，即使用 [cvBoundingRect](http://opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html)函数。基本上它会在轮廓周围形成一个直立的边界矩形，所以我只需要检索框的宽度和高度就可以得到我想要的。

编码：

```
 Rect rect= cvBoundingRect(contour,0);
    double pt1, pt2;
    pt1 =rect.width;      //width
    pt2 =rect.height;     //heigth 
```

顺便说一句，感谢您的所有帮助。干杯。

# jquery - jQuery 动画不透明度在 Safari 中不起作用

> ID：13396814
> 
> 赞同：2
> 
> 时间：2012-11-15T11:40:37.870
> 
> 标签：jquery, safari, jquery-animate, opacity

jQuery animate opacity 不想和 Safari 搭配得很好；出于某种原因，当我直接在 CSS 中设置不透明度时，没关系；但是当我尝试使用 jQuery animate 时它不起作用。任何想法/已知问题？

**我正在直接编辑 SVG 标签，可以在其他浏览器上使用，但似乎是 safari 的问题**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:56:35.340

在动画之前在 jQuery 中设置不透明度。

$("#offerd_desc li").css('opacity', '0');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:00:45.600

从此

`$("#offerd_desc li").css('opacity', '0');`

将不透明度 INSTANT 设置为 0，您将使用动画（）；

```
$("#offerd_desc li").mouseover({
    $(this).stop().animate({opacity:0.5},500);
});

$("#offerd_desc li").mouseout({
    $(this).stop().animate({opacity:0.5},500);
}); 
```

在你做动画之前使用 stop() ，否则当你快速悬停它会导致闪烁。我强烈建议使用 200 - 500 毫秒等速度，因为否则动画需要很长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:00:31.193

这对我有用：[Fiddle HERE](http://jsfiddle.net/2WuKK/)

```
$('div').hover(function(){
$(this).animate({opacity:0.5},1000);
});​ 
```

# c# - 将xml提取为两个字符串之间的字符串

> ID：13396818
> 
> 赞同：0
> 
> 时间：2012-11-15T11:40:52.447
> 
> 标签：c#, .net, regex

如何提取 someXml ？

```
frame 0
    push 'this'
    getVariable
    push 'g_data_1343488'
    push ' 

    someXml'

    setMember
end // of frame 0 
```

我正在尝试使用 RegEx，但我没有成功：

```
foreach (var match in Regex.Matches(file, @"(?<=push ').*(?=')")) 
```

这个问题：我不想让例如'g_data_1343488'或'this'被抓住。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:16:41.493

这是一种可能性。它是一个尝试将单引号之间的内容识别为 XML 的正则表达式。这不是一个完美的正则表达式。是否可以使用，这真的取决于您的要求。正则表达式必须越准确，阅读起来就越困难。事实上，这个表达式不会匹配所有的 XML，也会匹配一些无效的 XML。

例如，此正则表达式将匹配名称以数字开头的标签。它还将 XML 结束标记与属性匹配。您可以根据需要对其进行调整。

这里是：

```
push\s+'\s*<(\w+)(?:\s+\w+=(?:"[^"]*"|'[^']*'))*>(?:[^<]+|(?!</\1>)</?\w+(?:\s+\w+=(?:"[^"]*"|'[^']*'))*\s*/?>)*</\1>\s*' 
```

这是表达式的细分。push 语句的开头：

```
push\s+'\s* 
```

检测根 XML 标记并捕获其名称。允许使用单引号和双引号分隔的属性。：

```
<(\w+)(?:\s+\w+=(?:"[^"]*"|'[^']*'))*> 
```

循环遍历根标签内的所有内部标签和文本元素。允许使用单引号和双引号分隔的属性。

```
(?:[^<]+|(?!</\1>)</?\w+(?:\s+\w+=(?:"[^"]*"|'[^']*'))*\s*/?>)* 
```

捕获结束根标签。

```
</\1>\s*' 
```

您也可以尝试简单地捕获推送命令并通过此解决方案中的函数运行它们的值： [How to check for valid xml in string input before calling .LoadXml()](https://stackoverflow.com/questions/86292/c-sharp-how-to-check-for-valid-xml-in-string-input-before-calling-loadxml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:50:54.090

```
var allMatches = Regex.Matches(text, @"(frame.*push ')(.*?)(?='.*end)", RegexOptions.Singleline);

foreach (Match matches in allMatches)
{
    String somexml = matches.Groups[2].Value;
} 
```

# windows - 用于查找正确父文件夹的 Windows 批处理脚本

> ID：13396820
> 
> 赞同：4
> 
> 时间：2012-11-15T11:40:55.127
> 
> 标签：windows, command-line, batch-file

我有一个我无法弄清楚的简单问题：我想找到一个包含某个文件的父文件夹，并生成该父文件夹的绝对路径 - 这需要在批处理脚本中完成 - 没有 powershell，没有perl，没有蟒蛇...

例如，假设这是我的目录树：

```
 root_parent_path
    dir0
    dir1
      file1
      dir2
        dir21
        dir22
      dir3
        dir31
        dir32 
```

在上面的例子中，`root_parent_path`是 form `c:\folder1\folder2\`。

结果应存储在环境变量中，例如 RESULT_PATH。

因此，如果我拨打以下任何电话：

```
script.batch file1 root_parent_path\dir1\dir2
script.batch file1 root_parent_path\dir1\dir2\dir21
script.batch file1 root_parent_path\dir1\dir3\dir31 
```

变量 RESULT_PATH 应该设置为`root_parent_path\dir1`，因为那是包含它的父级`file1`。（我不在乎是否有多个父文件夹或没有父文件夹 - 我会确保只有一个。）

非常感谢您的帮助，为此浪费了很多时间...

注意：如果还解释了代码，我将不胜感激！如果两个答案提供了可行的解决方案，我会选择一个解释更好的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:07:48.413

打扰一下。你的问题有几点我不清楚。

*   如果`root_parent_path`是放置在磁盘根文件夹内的文件夹，如您在目录树中指出的那样，那么它*必须*在其名称前包含一个反斜杠：`\root_parent_path`，对吗？*如果这是真的*，那么结果`root_parent_path\dir1`不是相对路径，而是从磁盘的根文件夹开始的绝对路径：，对吗？请注意，下面的批处理文件假定这一点并在第二个参数之前插入反斜杠。*`\root_parent_path\dir1`*

**   据我了解，您希望第二个参数给出的路径中的第一个文件夹包含第一个参数中给出的文件。这个批处理文件这样做：* 

 ***编辑：**此批处理文件已被修改为在第二个参数中接受完全限定的路径

```
@echo off
setlocal EnableDelayedExpansion
rem Get drive from second parameter, given or implied
for %%a in (%2) do set drive=%%~Da
rem Extract each partial path from second parameter and search first parameter into it
set return_path=
set param2=%2
rem Delete drive from second parameter, if any
set param2=%param2:*:=%
for %%a in (%param2:\= %) do (
   set return_path=!return_path!\%%a
   if exist %drive%!return_path!\%1 goto continue
)
set return_path=PATH NOT FOUND
:continue
echo %drive%%return_path% 
```

请记住，此结果是绝对路径。上面示例中的相对路径结果将是这些值：

```
script.batch file1 root_parent_path\dir1\dir2           ->      ..
script.batch file1 root_parent_path\dir1\dir2\dir21     ->      ..\..
script.batch file1 root_parent_path\dir1\dir3\dir31     ->      ..\.. 
```

请注意，路径中的每个文件夹不能包含空格。如果需要，这可能是固定的。

测试程序并报告结果...

安东尼奥

**PD** - 在您的*原始*问题中，您说您想要一个*相对路径*作为输出，并以*相对路径*作为输入的示例。我注意到您的回答不是*相对*的，而是*绝对的，没有驱动器*，并且我的程序假设了这种情况。如果您在评论中回答您希望将*绝对*路径作为输入和输出，我会立即这样做，但您不再回答......

您必须注意，*相对*路径管理和*绝对*路径管理是完全不同的，而且如果磁盘驱动器是*给定*的或*暗示*的。如果您的第一个问题将包含第二个参数，因为它实际上是: `c:\folder1\folder2\`，那么这一点不会有问题。

**编辑**：在第二个参数中接受空格的新版本。

```
@echo off
setlocal EnableDelayedExpansion
rem Get drive from second parameter, given or implied
for %%a in (%2) do set drive=%%~Da
rem Get second parameter removing enclosing quotes, if any
set param2=%~2
rem Delete drive from second parameter (from beggining of path until first colon)
set param2=%param2:*:=%
rem Change possible spaces in the path by another character (I used dollar sign)
rem to avoid separate names with spaces at that point
set param2=%param2: =$%
rem ... of course, dollars must be returned back to spaces later
rem Extract each partial path from second parameter and search first parameter into it
set return_path=
for %%a in (%param2:\= %) do (
   set return_path=!return_path!\%%a
   rem Get back spaces converted into dollars
   set return_path=!return_path:$= !
   rem Enclose file name in quotes (required if path contain spaces)
   if exist "%drive%!return_path!\%1" goto continue
)
set return_path=PATH NOT FOUND
:continue
echo %drive%%return_path% 
```

在这种情况下，如果路径包含空格，请使用引号将路径括起来：

`script.bat file1 "c:\first dir\second dir\dir1\dir2"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:54:17.587

获取父级的绝对路径是微不足道的。

```
@echo off
setlocal
set result_path=%~dp1 
```

获取父级的相对路径有点棘手。没有内置方法可以批量操作相对路径。这是我能想到的最简单的解决方案。

```
@echo off
setlocal
for %%F in (":.:%~1\..") do set "result_path=%%~fF"
set "result_path=%result_path:*:.:=%" 
```

请注意，上面的代码不验证结果的存在。它只是从第一个参数中提供的路径中删除最后一个文件夹名称。

**编辑**

好的，我想我明白你的要求了。给定一个相对路径： ，在路径的每个步骤中`"rel_path_root\child1\child2\child3"`查找。`"file1"`

所以需要测试是否存在以下情况：

*   `"rel_path_root\file1"`
*   `"rel_path_root\child1\file1"`
*   `"rel_path_root\child1\child2\file1"`
*   `"rel_path_root\child1\child2\child3\file1"`

下面的简单脚本应该可以解决问题。

```
@echo off
setlocal enableDelayedExpansion

:: Get parameters
set "file=%~1"
set "myPath=%~2"

:: Break myPath into component folders by splitting at \
:: For example: "root dir\dir 1\dir 2" --> "root dir" "dir 1" "dir 2"
set "myPath= "!myPath:\=" "!" "

:: Eliminate empty folders that result from consecutive or trailing \
set "myPath=!myPath:"" =!"

:: Loop through the folders, building the path back up again.
:: At each iteration, check if file exists and break if found.
set "testPath="
set "resultPath="
for %%F in (!myPath!) do (
  if defined testPath (set "testPath=!testPath!\%%~F") else set "testPath=%%~F"
  if exist "!testPath!\!file!" (
    set "resultPath=!testPath!"
    goto :break
  )
)
:break

:: print the result
set resultPath 
```

这不适用于 UNC 路径`\\server\folder1\folder2`，也不适用于仅包含驱动器号的相对路径`C:`。但除此之外，它应该适用于任何绝对或相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:54:35.827

像这样的东西？

```
@echo off
set file=%1
set dir=%2
:LOOP
if exist %dir%\%file% (
setx RESULT_PATH %CD%
) else (
cd..
goto :LOOP
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T17:26:50.920

这也可能是一个解决方案：

```
@echo off
rem save current dir
pushd "%cd%"
rem go to specified folder
cd "%2"
:loop
IF EXIST "%1" (
  rem found existing file
  call :relative_path return_path "%cd%"
  goto :end_loop
)
rem trying to go to upper dir. if it succedes, cd_prec != cd
set cd_prec=%cd%
cd ..
IF NOT "%cd%" == "%cd_prec%" goto :loop 
set return_path=NOT FOUND
goto :end_loop

rem function to extract \folder1\folder2\etc from c:\folder1\folder2\etc
:relative_path <resultVar> <pathVar>
set "%~1=%~p2"
exit /b
)

:end_loop
popd

echo %return_path% 
```

您指定的路径可以是绝对路径或相对路径，它返回找到文件的绝对路径和（如果需要）相对于指定目录的路径，它支持带空格的文件和名称。我只是使用基本命令，但我认为这就是你要找的。

```
C:\Users\user\code\cmd>mkdir c:\folder1\folder2\dir1
C:\Users\user\code\cmd>copy nul c:\folder1\folder2\dir1\file1
C:\Users\user\code\cmd>mkdir c:\folder1\folder2\dir1\dir2\dir21
C:\Users\user\code\cmd>mkdir c:\folder1\folder2\dir1\dir2\dir31

C:\Users\user\code\cmd>script.cmd file1 c:\folder1\folder2\dir1\dir2\
\folder1\folder2\dir1

C:\Users\user\code\cmd>script.cmd file1 c:\folder1\folder2\dir1\dir2\dir21
\folder1\folder2\dir1

C:\Users\user\code\cmd>script.cmd file1 c:\folder1\folder2\dir1\dir2\dir31
\folder1\folder2\dir1

C:\Users\user\code\cmd>cd c:\folder1\folder2\dir1\dir2\dir21
C:\folder1\folder2\dir1\dir2\dir21>script.cmd file1 .
\folder1\folder2\dir1

etc... 
```

它们都返回相同的相对路径，没有磁盘标签，我不确定，但我认为这就是你要找的。我在此编辑之前的帖子将返回绝对路径（如`c:\folder1\folder2`）和从 开始的相对路径（`..\..\.`）`root_parent_path`。*

# javascript - What does a comma mean in my regex pattern

> ID：13396824
> 
> 赞同：2
> 
> 时间：2012-11-15T11:41:17.547
> 
> 标签：javascript, regex

It's surely a simple question for somebody.
I found this pattern for jquery:

```
/^([0-9]{0,12})$/,/^[0-9]{1,12}[\,]{1}(|[0-9]{0,4})$/ 
```

The

```
/^([0-9]{0,12})$/ 
```

and

```
/^[0-9]{1,12}[\,]{1}(|[0-9]{0,4})$/ 
```

I don't understand the pattern.
My only question is and I find nothing via google: What does the comma make?
Is he checking two patterns or does this comma do something special?

* * *

Here is the link [http://freedns.remdex.info/JQuery-simple-input-validation-plugin-74a.html](http://freedns.remdex.info/JQuery-simple-input-validation-plugin-74a.html)

So when he accepts arrays it means that he checks whether if one it is true?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:04:33.987

既然您说明了您的[实际来源](http://freedns.remdex.info/JQuery-simple-input-validation-plugin-74a.html)，我们可以得出结论，整行是：

```
$("#only_int_float").rval([/^([0-9]{0,6})$/,/^[0-9]{1,6}[\.|,]{1}(|[0-9]{0,2})$/]); 
```

您可能会注意到，有`[`和`]`括号，这意味着这是一个数组。所以基本上，它与以下内容相同：

```
var regexes = new Array(
    /^([0-9]{0,6})$/, 
    /^[0-9]{1,6}[\.|,]{1}(|[0-9]{0,2})$/
);
$("#only_int_float").rval(regexes); 
```

在同一源中，您可以找到代码：

```
$.each(
    regularExpression,
    function( intIndex, objValue ){ 
        var re = new RegExp(objValue);                                        
        if((re.exec(instance.value) || instance.value == '') && allOk == false)
        {
            allOk = true;                                   
        } 
    }
); 
```

这意味着“对于变量中的每个正则表达式`regularExpression`，运行以下函数（它检查正则表达式是否匹配）。

`allOk`如果只有一个匹配项，显然会设置为 true，因此您可以将此数组用作`OR`语句（如果 regex #1 不匹配，请检查 regex2 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:54:15.353

如果这是针对 PHP

**preg_replace 接受数组作为参数**

这个

```
$str = preg_replace('/[\\r\\n!.,\'“”;’?-\s+]/', ' ', $str);
$str=preg_replace('/\s+\S{1,2}(?!\S)|(?<!\S)\S{1,2}\s+/', '', $str); 
```

等于

```
str = preg_replace(array('/^([0-9]{0,12})$/','/^[0-9]{1,12}[\,]{1}(|[0-9]{0,4})$/'), array(' ', ''), $str); 
```

# ruby-on-rails - 每次遍历集合时，如何向 div 添加不同的类？

> ID：13396826
> 
> 赞同：1
> 
> 时间：2012-11-15T11:41:24.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这就是我希望最终产品的样子：

```
 <div class="side-img top"><%= image_tag product.image_url(:banner_thumb).to_s %></div>
  <div class="side-img mid"><%= image_tag product.image_url(:banner_thumb).to_s %></div>
  <div class="side-img bottom"><%= image_tag product.image_url(:banner_thumb).to_s %></div> 
```

注意每个 div 上的第 2 类对每个`product`.

那么我如何循环浏览这个集合并动态应用这 3 个类中的每一个，以便获得上述结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T11:57:52.743

使用[循环](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle)..

```
<% sections = %w(top middle bottom) %>
<div class="side-img <%= cycle(*sections) %>"></div> 
```

..或者，简单地说：

```
<div class="side-img <%= cycle("top", "middle", "bottom") %>"></div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:50:43.460

假设您的收藏名为`@products`：

```
<% sections = %w[top middle bottom] %>
<% @products.each_with_index do |product, i| %>
  <div class="side <%= sections[i] %>"><%= image_tag product.image_url(:banner_thumb).to_s %></div>
<% end %> 
```

上的文档[`each_with_index`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_index)。

# c# - excel file data into datatable

> ID：13396828
> 
> 赞同：0
> 
> 时间：2012-11-15T11:41:42.017
> 
> 标签：c#, excel, ole

i am using the code below to select all of the data from a excel file and was wondering if it would be possible for me to start from row three and read in the rest of the data within the file..

```
excelConnectionString ="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + excelFileName + ";Extended Properties=Excel 12.0";
            // Create Connection to Excel Workbook
            using (OleDbConnection excelConnection =
                new OleDbConnection(excelConnectionString))
                {                    
                    excelConnection.Open();
                    System.Data.DataTable dt = excelConnection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
                    string[] excelSheet = new String[dt.Rows.Count];
                    int sheet = 0;
                    foreach (DataRow row in dt.Rows)
                    {
                        excelSheet[sheet] = row["Table_Name"].ToString();
                        sheet++;

                    }
                    excelDataTable.Clear();
                    for (int i = 0; i < excelSheet.Length; i++)
                    {
                        OleDbCommand command = new OleDbCommand
                             ("Select  * FROM [" + excelSheet[i] + "]", excelConnection);

                        excelAdapter.SelectCommand = command;
                        excelAdapter.Fill(excelDataTable);
                    }
                    excelConnection.Close();
                }

            return excelDataTable; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:02:44.887

德里克是对的，我同意他的看法。如果还想保留原有的excel文件数据，只在数据表中显示一部分，则需要先将excel总数据导出到数据表中，然后删除数据表中不需要的行。如果您不需要这些行，您可以先删除原始excel文件中不需要的行，然后将excel导出到数据表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:50:55.857

You could use something like this to ammend your file before reading in with Oledbconnection :-

```
private string customiseTemplate(string filename)
    {
        try
        {
            //Create Instance of Excel Appllication
            Microsoft.Office.Interop.Excel.Application app = new Microsoft.Office.Interop.Excel.Application();

            //Create a WorkBook Object.
            Workbooks wbks = app.Workbooks;

            //Populate Workbook from Excel File.
            _Workbook _wbk = wbks.Add(filename);

            //Create Sheet Object.
            Sheets shs = _wbk.Sheets;

            //Determine which sheet to work with. In this instance there should only ever be one. 
            _Worksheet _wsh = (_Worksheet)shs.get_Item(1);

            //Delete Unwanted Rows 1 to 3.

            Microsoft.Office.Interop.Excel.Range
            range1 = (Range)_wsh.get_Range("A1:A3", Missing.Value);

            range1.EntireRow.Delete(Missing.Value);

            // Release Range
            System.Runtime.InteropServices.Marshal.ReleaseComObject(range1);

            //Save WorkBook.

            app.AlertBeforeOverwriting = false;

            string newFile = filename.Insert(3, "Ammended_");

            _wbk.SaveAs(newFile, Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookNormal, System.Reflection.Missing.Value, System.Reflection.Missing.Value, Missing.Value,
            Missing.Value, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange,
            Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);

            // CLose Excel App.
            app.Quit();

            // Release unnecessary excel processes
            System.Runtime.InteropServices.Marshal.ReleaseComObject(app);
            app = null;

            return newFile;

        }
        catch(Exception x)
        {
            MessageBox.Show(x.Message);
        }

        return null;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:15:31.600

```
var w = sqlData.AsEnumerable().Where(data => data.Field<String>("slideNo") == "5")
                .Select(data=> data.Field<String>("QuestionStartText")); 
```

这是编码的答案...

# asp.net - ASP.NET Web 服务返回 html 而不是执行函数

> ID：13396832
> 
> 赞同：0
> 
> 时间：2012-11-15T11:41:54.887
> 
> 标签：asp.net, web-services, asmx

我们的一个客户在使用我们编写的 ASP.NET Web 服务时遇到了一个非常奇怪的错误。它已经正常工作了 2 周，但最近在调用它时出现以下异常：

[客户端发现响应内容类型为'text/html; charset=utf-8'，但应为 'text/xml'。

然而，对于这些类型的错误，返回的 HTML 通常具有某种错误类型的指示，但在这种情况下，HTML 是 Web 服务起始页本身，即具有浏览到时显示的所有方法的页面通过浏览器访问 Web 服务。

我发现的最常见的解决方案建议调试 Web 服务，但由于它安装在我们客户的环境中，这是不可能的。也没有任何信息或指示错误是什么。

什么可能导致 Web 服务返回摘要页面而不是错误页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:39:01.997

事实证明，客户已将其站点更改为使用 https，将 Web 服务的请求 URL 更改为 https 就成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:55:32.543

尝试按如下方式进行更改：转到 IIS Web 服务应用程序中的基本设置，然后将应用程序池设置为 DefaultAppPool。还检查附加的图像以供参考以更改 IIS Web 应用程序设置。

![在此处输入图像描述](../Images/2de00ec67b7d4b92d514b65aee765b54.png)

# javascript - Getting file size / type in IE with javascript

> ID：13396836
> 
> 赞同：2
> 
> 时间：2012-11-15T11:42:21.630
> 
> 标签：javascript, internet-explorer

I got a javascript code that works in FF, chrome and other browser except IE

Here it is

```
 var inputfile = document.getElementById('inputfilename');
    var filetype = inputfile.files[0].type;
    var filesize = inputfile.files[0].size;
    var filename = inputfile.files[0].name; 
```

Now the variable filetype, filesize and filename is undefined in IE
So how to get those three property in IE ?
Any help will be appreciated.

fiddle : [http://jsfiddle.net/vY9y8/](http://jsfiddle.net/vY9y8/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:44:34.300

选项 1：等待 IE 10（应该[支持最前沿的 File API 规范）](http://caniuse.com/#search=file%20api)

选项 2：使用可以访问此类信息的另一种技术。可能的 Flash 或签名的 Java 小程序。

# php - Searching Data with Amazon CloudSearch using unique document ID of an individual hit

> ID：13396842
> 
> 赞同：2
> 
> 时间：2012-11-15T11:43:00.513
> 
> 标签：php, json, amazon-cloudsearch

is it possible to Search Data with Amazon CloudSearch using unique document ID of an individual hit

example:result getting in Json Formate

```
stdClass Object
(
[rank] => -text_relevance
[match-expr] => (label company_name:'Greenline')
[hits] => stdClass Object        
   (
        [found] => 6
        [start] => 0
        [hit] => Array
            (
                [0] => stdClass Object                       
                (
                        [id] => ras_csv_693
                        [data] => stdClass Object

                      (
                                [all_us_sic_codes] => Array
                                    (
                                        [0] => 55719901
                                    )

                                [company_name] => Array
                                    (
                                        [0] => Greenline Equipment
                                    )

                                [contact_first_name] => Array
                                    (
                                        [0] => John
                                    )

                                [total_employees] => Array
                                    (
                                        [0] => 30
                                    )

                            )

                    )
  ) 
```

Submitting Search Requests in Amazon CloudSearch like this "http://search-movies-rr2f34ofg56xneuemujamut52i.us-east-1.cloudsearch. amazonaws.com/2011-02-01/search?bq=company_name:'Greenline'&return-fields=all_us_sic_codes,company_name,contact_first_name,total_employees" i got above example result in json format.

i want to make use of "[id] => ras_csv_693" in example,so by using this "id", searched again like this "2011-02-01/search?q=id:ras_csv_693" but i didnt get any result.. please help me to get result...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-25T20:05:19.117

尽管您在 2011-02-01 版本中询问了如何执行此操作，但 2013-01-01 版本中的语法有很大不同，值得展示。

要在 CloudSearch API 的 2013-01-01 版本中按 ID 搜索文档，您可以使用结构化查询`_id:'THE_ID'`作为查询。对于您的示例，您将要求：

[.../2013-01-01/search?q.parser=structured&q=_id:'ras_csv_693'](http://search-movies-rr2f34ofg56xneuemujamut52i.us-east-1.cloudsearch.amazonaws.com/2013-01-01/search?q.parser=structured&q=_id:%27ras_csv_693%27)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T02:49:10.747

您可以使用以下文档 ID 搜索：**?bq=docid:'ras_csv_693'**

例子：

```
http://search-movies-rr2f34ofg56xneuemujamut52i.us-east-1.cloudsearch.amazonaws.com/2011-02-01/search?bq=docid:'ras_csv_693'&return-fields=all_us_sic_codes,company_name,contact_first_name,total_employees 
```

请注意，必须对 URL 进行编码才能工作，这里我不编码只是为了便于理解。

# html - Padding next to divs, like cellspacing of table

> ID：13396846
> 
> 赞同：0
> 
> 时间：2012-11-15T11:43:03.883
> 
> 标签：html, css

I want to do the following:

[http://s8.postimage.org/k82svi22r/example.gif](http://s8.postimage.org/k82svi22r/example.gif)

with only divs, css. Its ok to float left the cells, but Im stuck with spacings. I tried to use borders, but then divs next to each other became 2 lines. Or the color of title overleaps the border... I hope theres an easy way to do this!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T11:44:13.897

有一个简单的方法，一张桌子。日历是表格数据的表格，因此可以使用一个！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:51:28.013

Try this (this is a draft)

```
 <html>
  <head>
    <style>
      #root{
        width:102px;
        overflow: auto;
        border-top : 1px solid black;
        border-right: 1px solid black;
      }
      .cell {
        width:50px;
        height: 50px;
        float:left;
        border-left: 1px solid black;
        border-bottom:1px solid black;
      }
    </style>
  </head>
  <body>
    <div id="root">
      <div class="cell"></div>
      <div class="cell"></div>
      <div class="cell"></div>
      <div class="cell"></div>
    </div>
  </body>
</html> 
```

# markdown - 基于 Sphinx 的文档的 Markdown 输出

> ID：13396856
> 
> 赞同：33
> 
> 时间：2012-11-15T11:43:41.903
> 
> 标签：markdown, python-sphinx, restructuredtext

我发现自己有一个用例，除了从基于[*Sphinx*](http://sphinx-doc.org)的文档源生成 HTML 和 PDF 之外，我还想生成[*reStructuredText*](http://en.wikipedia.org/wiki/ReStructuredText)源文件的[*Markdown*](http://en.wikipedia.org/wiki/Markdown)版本。[](http://en.wikipedia.org/wiki/ReStructuredText)

 *我的初步研究没有在*Sphinx*中找到任何对此的核心或扩展支持。除了手动使用[*pandoc*](http://johnmacfarlane.net/pandoc/)或为任务创建新的*Sphinx*扩展之外，是否有更简单/更集成的解决方案？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-20T16:53:17.167

除了 Pandoc 之外，我没有找到任何可以获取 reStructuredText 文件并将它们转换为 Markdown 的东西，所以我为[Docutils](http://docutils.sourceforge.net/)编写了一个自定义编写器（reStructuredText 的参考实现以及 Sphinx 的构建基础）。代码[可在 GitHub 上找到](https://github.com/cgwrench/rst2md)。

请注意，它只是一个初始实现：它可以无错误地处理任何 reStructuredText 文档（针对 Docutils 源存储库中的*standard.txt*测试文档进行测试），但不支持许多 reStructuredText 构造（例如替换、原始指令等），并且所以不包含在 Markdown 输出中。我希望添加对链接、代码块、图像和表格的支持：对此的任何帮助都非常受欢迎 - 继续前进并分叉代码。

似乎要向 Sphinx 添加另一种编写器/输出格式，您需要使用[扩展名](http://sphinx-doc.org/extensions.html#extensions)[添加“构建器”](http://sphinx-doc.org/builders.html#builders)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-11-06T06:12:55.893

*18 月 18 日更新*：***sphinx-markdown-builder***现在可用 - 感谢@Jam Risser：

**安装**

```
pip3 install sphinx-markdown-builder 
```

**依赖项**

蟒蛇 3

**用法**

在配置中加载扩展。

配置文件

```
extensions = [
    'sphinx_markdown_builder'
] 
```

如果使用*recommonmark*，请确保明确忽略构建文件，因为它们会与系统冲突。

配置文件

```
exclude_patterns = [
    'build/*'
] 
```

使用 Makefile 构建 markdown 文件

```
make markdown 
```

使用 sphinx-build 命令构建 markdown 文件

```
cd docs
sphinx-build -M markdown ./ build 
```

**参考**

*   [https://github.com/codejamninja/sphinx-markdown-builder/](https://github.com/codejamninja/sphinx-markdown-builder/)
*   [https://pypi.org/project/sphinx-markdown-builder/](https://pypi.org/project/sphinx-markdown-builder/)

附言。过时的原始答案（因为`sphinx-markdown-builder`现在可用）：在 Sphinx 项目站点上创建了直接 Markdown 输出支持的功能请求： [https](https://github.com/sphinx-doc/sphinx/issues/4219) ://github.com/sphinx-doc/sphinx/issues/4219 感谢所有支持该 github 请求的人 - 这使得区别！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T23:43:18.237

如果您想使用 pandoc，为什么不简单地更改第一次运行 sphinx-quickstart.py 时生成的 Makefile Sphinx 以将 reStructuredText 转换为 Markdown？
这是最简单的解决方案，尽管如果您将 Chris 的解决方案合并到 Makefile 中，它应该也可以工作。*

# powershell - PowerShell 3 脚本会在 Windows 7 上运行吗？

> ID：13396857
> 
> 赞同：3
> 
> 时间：2012-11-15T11:43:42.637
> 
> 标签：powershell, powershell-3.0

包含 PowerShell 3 cmdlet 的 PowerShell 3 脚本能否在 Windows 7 Professional 或 Enterprise 的 vanilla 安装上运行？如果不是，需要的最低先决条件是什么？

（对不起，Powershell新手）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:13:26.310

安装的 Windows 7 使用 Powershell 2.0 版。

对于 Powershell v. 3.0，您需要 Windows 7 sp1 和 .net framework 4 上的[Windows Management Framework 3.0](http://www.microsoft.com/en-us/download/details.aspx?id=34595)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T13:37:14.310

正如 Christian 在[他的回答](https://stackoverflow.com/a/13397332/67392)中指出的那样：Windows Vista、7、Server 2008 R2 和 Server 2008 安装了 PowerShell V3。

但请注意：

*   要升级 ISE（集成脚本环境），必须在应用 V3 安装*之前*启用该功能（这会影响默认为无 ISE 的服务器）。

*   如果脚本依赖于 Windows 8 或 2012 操作系统或其组件（例如 Hyper-V）引入的 cmdlet，则这些不是 PowerShell V3 的一部分，也不会作为 V3 升级的一部分添加。

# java - 我在哪里可以找到 xuggler 简单教程？

> ID：13396862
> 
> 赞同：10
> 
> 时间：2012-11-15T11:44:10.810
> 
> 标签：java, xuggler

我正在为我所在国家的网页制作一个简单的消息传递应用程序。我尝试学习 JMF，但在我看来它太旧了，我只是不想使用它。我搜索了 stackoverflow，似乎 xuggler 是一种更好的媒体管理方式。有人可以给我一个免费电子书的链接或开始的东西吗？

谢谢你

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T11:56:42.573

1.  [第一的](http://www.javacodegeeks.com/2011/02/xuggler-tutorial-transcoding-media.html)
2.  [第二](http://www.javacodegeeks.com/2011/02/xuggler-tutorial-frames-capture-video.html)
3.  [第三（俄语）](http://programador.ru/video-audio-xuggle/)

# jquery - 在 Apache 上加载 XML 内容

> ID：13396864
> 
> 赞同：1
> 
> 时间：2012-11-15T11:44:14.653
> 
> 标签：jquery, ajax, apache, cgi

我正在尝试使用 Ajax 从后端（perl）加载页面内容。然后尝试使用简单的 CGIHTTPServer 时，页面将根据需要加载，尤其是 Div 的。

但是当我移到 Apache Server 的同一页面时，内容没有加载。我也没有收到任何错误..:(

如何调试此错误....？

```
<script type="text/javascript">
$(onload)
function onload() {
$.ajax({
             type: 'POST',
                 url: '/cgi-bin/onload.pl',
             async: false,
success: function(data) {
$('[key]',data).each(function(){
$('[name=chk_'+$(this).attr('key')+']').attr('checked',true)
})
}
})
}
</script>

<body>
<form>
<input name='chk_0' type='checkbox' />0<br />
<input name='chk_1' type='checkbox' />1<br />
<input name='chk_2' type='checkbox' />2<br />
<input name='chk_3' type='checkbox' />3<br />
<input name='chk_4' type='checkbox' />4<br />
<input name='chk_5' type='checkbox' />5<br />
<input name='chk_6' type='checkbox' />6<br />
<input name='chk_7' type='checkbox' />7<br />
<input name='chk_8' type='checkbox' />8<br />
<input name='chk_9' type='checkbox' />9<br />
<input name='chk_10' type='checkbox' />10<br />
<input name='chk_11' type='checkbox' />11<br />
<input name='chk_12' type='checkbox' />12<br />
<input name='chk_13' type='checkbox' />13<br />
<input name='chk_14' type='checkbox' />14<br />
<input name='chk_15' type='checkbox' />15<br />
</form>
</body> 
```

# file - 如何将目录中的所有文件名保存到 bash 中的文本文件中？

> ID：13396871
> 
> 赞同：3
> 
> 时间：2012-11-15T11:44:39.107
> 
> 标签：file, bash, shell, unix, ls

我有一个包含数百万个文件的目录。我刚刚了解到数百万人是孤儿，我需要取消他们的联系。我想从单个文本文件（理想情况下为 csv）中的所有文件数组开始。你能帮我吗？

我打算做一个`ls`并将终端输出保存到一个文件中，但我认为有一种更优雅的方式。

我怎样才能使`ls > log.csv`最终看起来像

`file1.txt,file2.txt, ... fileN.txt`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T11:52:53.750

尝试这样做：

```
printf '%s\n' *.txt | paste -sd "," - > log.csv 
```

或者

```
printf '%s,' *.txt > log.csv 
```

或者

```
printf '"%s",' *.txt > log.csv 
```

如果文件名中有空格等特殊字符。

# java - 以编程方式将新类添加到项目中

> ID：13396872
> 
> 赞同：0
> 
> 时间：2012-11-15T11:44:46.967
> 
> 标签：java, eclipse, file, class, import

我从我的 Java 项目中的光盘读取文件。我在 D:/ 上找到了我的 hohoho.java 文件，它是文件格式，然后我想用我的主类 (Up.java) 将它作为一个类添加到现有包中。它应该看起来像这样 - 包 -> Up.java，Hohoho.java。

当然，它应该以编程方式完成。我将使用这个 .java 文件和它在我的 Up.java 中的功能。

你知道有什么简单的方法可以做到这一点吗？

```
import org.apache.commons.io.FileUtils;
import java.io.File;
import java.lang.reflect.Array;
import java.util.Collection;
import java.util.Iterator;

public class Up{

public static void main(String[] args) {

    File root = new File("..\\.");
    File myfile = null;

    try {

        String[] extensions = {"java"};
        boolean recursive = true;

        Collection files = FileUtils.listFiles(root, extensions, recursive);

        for (Iterator iterator = files.iterator(); iterator.hasNext();) {
            File file = (File) iterator.next();
            String path = file.getAbsolutePath();
            System.out.println("File = " + path);

            String[] tokens = path.split("\\\\");

            for (String t : tokens)
              if (t.equals("Hohoho.java")){
                  myfile = file;
              }
            }

        System.out.println("Client class: " + myfile.getAbsolutePath());

    } catch (Exception e) {
        e.printStackTrace();
    }     

   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:49:03.683

使用[Java Compiler API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)将源代码编译成字节码。

之后使用[ClassLoader](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html)将编译后的类加载到 jvm 中，您就可以执行该类的方法。

如果你确定，那个编译的类实现了特定的接口——你可以**将它转换为目标接口**并直接调用方法，否则——你需要**使用[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:23:54.327

如果您只需要加载 .class 文件，根据您的评论，您应该能够使用类似以下的内容（假设您的设置中没有安全问题）：

```
 String path = "/path/to/your/classfiles/root/"; //not including the package structure
    ClassLoader loader = new URLClassLoader(new URL[]{new URL("file://" + path)}, Up.class.getClassLoader());

    Class clazz = loader.loadClass("foo.Hohoho"); //assuming a package "foo" for that class
    Object loadable = clazz.newInstance();
    Field field = loadable.getClass().getField("someField");  //or whatever - (this assumes you have someField on foo.Hohoho)

    System.out.println(field.get(loadable)); 
```

（我在上面删除了所有异常处理）。正如@stemm 指出的那样，仅使用纯反射就会很痛苦。

此外，还以最简单的方式从 VM 中调用 java 编译器的快速测试如下。因此，如果您确实需要从源代码获取，则可以构建以下内容：

```
 String sourcePath = "/path/to/your/javafiles/root/"; 
    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    int success = compiler.run(null, null, null,  sourcePath + "foo/Loadable.java");//can't get "-sourcepath","path" to go, for some reason.

    System.out.println("success = " + success); //should be 0; Sys err should have details, otherwise 
```

# java - 需要 Java 缓存解决方案

> ID：13396875
> 
> 赞同：4
> 
> 时间：2012-11-15T11:44:54.143
> 
> 标签：java, hibernate, caching, ehcache

我正在寻找 Java Web 应用程序的缓存解决方案。我们有一个 Oracle 数据库实例和 2-3 个远程到我们的数据库的实例。我们希望将数据本地缓存到我们的应用程序，因为我们不能接受数据库响应时间。我们的数据集是平均大小（每个表几千行），并且是从我们的应用程序手动修改的（所以不经常）（没有直接的数据库访问）。

所以我们一直在考虑的是一种解决方案，它允许我们在本地拥有所需的所有数据。我们希望减少从 db 检索并重写到缓存的数据量。

例如，当一个实体被修改时，我们不想使该表上的所有缓存查询无效，我们宁愿能够修改本地缓存的查询结果集，以便查询仍然可以从缓存数据在本地运行。缓存必须复制它们的更改\从数据库中检索由其他应用程序实例修改的数据。

我们一直将 EhCache 视为 Hibernate 2 级缓存，但它会在任何表修改时使给定表的所有缓存查询无效。我快速浏览了 Hibernate 服务，但还不知道这是否允许我们覆盖休眠 2 级缓存默认行为以满足我们的需求。

还有其他我们可以使用的解决方案吗？

**编辑**我们希望能够非常快速地访问数据。实际上，我们正在寻找的是可存储的缓存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:15:55.930

你检查过 JBoss 缓存吗？您可以为您的查询单独定义驱逐策略，并且它也很容易在集群节点之间同步。如果您需要，您可以阅读我根据我的经验编写的文章，如果它对您有帮助；

[http://dinukaroshan.blogspot.com/2009/10/jboss-caching-integration.html](http://dinukaroshan.blogspot.com/2009/10/jboss-caching-integration.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:31:14.493

如果您使用 EhCache 并且集群中有多个应用程序，则必须使用一种机制（JMS、JGroups...）进行数据缓存复制。

您必须注意的一件事是，如果您有另一个未在 Java 中运行的应用程序，则不会通知该应用程序：JGroups 仅在 Java 中可用，您的非 Java 应用程序将无法使缓存的实体无效。EhCache/Jgroups 支持允许您在一个配置文件中设置复制（不需要额外的代码！）

您似乎正在寻找 EhCache 的“通过复制更新”功能。让我列出一个 EhCache 的配置可能性：

**通过复制与失效更新**

**通过复制更新**：数据发送到所有节点
优点：避免完全重新加载缓存
缺点：如果缓存数据的 TTL 低，节点之间的数据可能不一致且无用

**通过失效更新**：向所有节点发送失效通知。如果数据已经被缓存，节点删除缓存的数据再次查询数据库。
优点：数据一致性和网络流量更轻
缺点：大量数据库查询，可能会同时导致大量数据需求

* * *

**异步与同步**

**异步**
优点：快速回复和数据传输
缺点：UDP ...

**同步**
优点：数据完整性
缺点：性能...

* * *

我希望它可以帮助您做出正确的决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:17:24.040

缓存查询结果的失效不是缓存可以控制的，而是 Hibernate 如何处理他的 QueryCache... 如果没有更改该代码，我不知道您将如何做到这一点。此外，坦率地说，我认为没有更好的“适合所有人”的解决方案。

因此，如果您想要*非常*专业的查询结果缓存，我想您必须自己实现。

此外，如果您需要更高的一致性保证，您可能会想要使用集群缓存，而不是复制缓存......

# visual-studio-2010 - CUDA Visual Studio 2010 Express 构建错误

> ID：13396878
> 
> 赞同：4
> 
> 时间：2012-11-15T11:45:18.713
> 
> 标签：visual-studio-2010, cuda, windows-7-x64, gpu

我正在尝试在 64 位 Windows 7 上使用 Visual Studio 2010 Express 在 Windows 上进行 CUDA 编程。我花了一些时间来设置环境，我刚刚编写了我的第一个程序 helloWorld.cu :)

目前我正在使用以下程序：

```
#include <stdio.h>

__global__ void add(int a, int b, int *c){
    *c = a + b; 
}

int main(void){
    int c;
    int *dev_c;
    HANDLE_ERROR( cudaMalloc( (void**)&dev_c, sizeof(int) ) );

    add<<<1,1>>>(2, 7, dev_c);

    HANDLE_ERROR( cudaMemcpy( &c, dev_c, sizeof(int), cudaMemcpyDeviceToHost ) );

    printf("2 + 7 = %d\n", c);
    cudaFree( dev_c );

    return 0;
} 
```

以下是使用 Windows7.1SDK 平台工具集构建的输出：

```
1>  C:\Users\User\documents\visual studio 2010\Projects\CudaTest2\CudaTest2>"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version  -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64"  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  -G   --keep-dir "x64\Debug" -maxrregcount=0  --machine 64 --compile  -g    -Xcompiler "/EHsc /W1 /nologo /O2 /Zi  /MD  " -o "x64\Debug\hello.cu.obj" "C:\Users\User\documents\visual studio 2010\Projects\CudaTest2\CudaTest2\hello.cu" 
1>nvcc : fatal error : '-ccbin': expected a number
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 5.0.targets(592,9): error MSB3721: The command ""C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version  -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64"  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  -G   --keep-dir "x64\Debug" -maxrregcount=0  --machine 64 --compile  -g    -Xcompiler "/EHsc /W1 /nologo /O2 /Zi  /MD  " -o "x64\Debug\hello.cu.obj" "C:\Users\User\documents\visual studio 2010\Projects\CudaTest2\CudaTest2\hello.cu"" exited with code -1. 
```

但是，使用 v100 平台工具集时出现此错误：

```
C:\Users\User\documents\visual studio 2010\Projects\CudaTest2\CudaTest2>"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version 2010 -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64"  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  -G   --keep-dir "x64\Debug" -maxrregcount=0  --machine 64 --compile  -g    -Xcompiler "/EHsc /W1 /nologo /O2 /Zi  /MD  " -o "x64\Debug\hello.cu.obj" "C:\Users\User\documents\visual studio 2010\Projects\CudaTest2\CudaTest2\hello.cu" 
1>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\math.h(455): error : dllexport/dllimport requires external linkage
1>C:/Users/User/documents/visual studio 2010/Projects/CudaTest2/CudaTest2/hello.cu(12): error : identifier "HANDLE_ERROR" is undefined
1>c:\program files\nvidia gpu computing toolkit\cuda\v5.0\include\math_functions.h(2900): error : function "hypotf" was referenced but not defined
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 5.0.targets(592,9): error MSB3721: The command ""C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version 2010 -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64"  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  -G   --keep-dir "x64\Debug" -maxrregcount=0  --machine 64 --compile  -g    -Xcompiler "/EHsc /W1 /nologo /O2 /Zi  /MD  " -o "x64\Debug\hello.cu.obj" "C:\Users\User\documents\visual studio 2010\Projects\CudaTest2\CudaTest2\hello.cu"" exited with code 2.
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

谁能指出我正确的方向？我已经阅读了几乎所有有关相关问题的帖子，安装和卸载了几次工具，但仍然无法获得正确的构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:13:01.273

以下对我有用。编辑文件 *C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 5.0.prop*s。搜索 PlatformToolset 并为 Windows7.1SDK 添加一个条目。将值设置为 2010。

```
<CudaClVersion Condition="'$(PlatformToolset)' == 'Windows7.1SDK'">2010</CudaClVersion> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T16:29:50.703

答案是双重的。您在使用 v100 平台时遇到的 HANDLE_ERROR 构建错误与在“Cuda By Example”一书的附加标题中定义的 HANDLE_ERROR 函数有关 - 我认识这个例子，所以我假设这是您正在尝试编译的代码. 你没有包含这个文件，因为它没有列在书的代码列表中......作者的一个小疏忽，恕我直言。

您可以从书籍页面下载代码示例和所需的附加标题“book.h”：[https ://developer.nvidia.com/content/cuda-example-introduction-general-purpose-gpu-programming-0](https://developer.nvidia.com/content/cuda-example-introduction-general-purpose-gpu-programming-0)

作为参考，这是 book.h 中的 HANDLE_ERROR 代码：

```
static void HandleError( cudaError_t err,
                     const char *file,
                     int line ) {
if (err != cudaSuccess) {
    printf( "%s in %s at line %d\n", cudaGetErrorString( err ),
            file, line );
    exit( EXIT_FAILURE );
  }
}
#define HANDLE_ERROR( err ) (HandleError( err, __FILE__, __LINE__ )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T19:53:35.030

这是因为 Visual Studio 没有访问**Temp**文件夹的权限。

导航到**C:\Users\userName\AppData\Local\Temp** 并将当前用户（在本例中为 userName）的访问安全规则更改为**完全控制**

# javascript - 如何阻止 iframe 闪烁？

> ID：13396885
> 
> 赞同：0
> 
> 时间：2012-11-15T11:45:39.977
> 
> 标签：javascript, html, iframe

我有一个 html 页面，其中有一个**div**。在 div 里面有一个**iframe**，

```
<div id="div1">
<iframe id="biframe" src="" allowtransparency="true" application="yes" >
</iframe>
</div> 
```

在 javascript 函数中，我正在动态更改 iframe 的 src。

```
 window.frames['biframe'].document.location.href="105.htm";
 $('div1').style.display="block"; 
```

上面两行将在按钮单击中调用，将显示 div 并加载 iframe。

**问题：**单击按钮时，iframe 在正确显示之前会闪烁。闪光发生的时间很短，但是当我要在每个按钮单击中显示不同的源时非常烦人。现在我有 5 个按钮。

**尝试过的解决方案：**我尝试了一些论坛中给出的以下解决方案，

```
<iframe src="..." style="visibility:hidden;" onload="this.style.visibility='visible';"></iframe> 
```

...但没有工作。

请提出一个好的解决方案来结束这个问题。

注意：这个页面不能使用 JQuery/任何 JS 库（我不允许）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-02T14:13:00.257

感谢 Paul Irish 和他的 Surefire DOM 元素插入，以及 Ryan Seddon 和他关于插入作用域样式元素的文章，我们有这个：

```
// Prevent variables from being global      
(function () {

      /*
          1\. Inject CSS which makes iframe invisible
      */

    var div = document.createElement('div'),
        ref = document.getElementsByTagName('base')[0] || 
              document.getElementsByTagName('script')[0];

    div.innerHTML = '&shy;<style> iframe { visibility: hidden; } </style>';

    ref.parentNode.insertBefore(div, ref);

    /*
        2\. When window loads, remove that CSS, 
           making iframe visible again
    */

    window.onload = function() {
        div.parentNode.removeChild(div);
    }

})(); 
```

只需在任何页面（在 中`<head>`）包含白色闪光问题，它就会得到解决。请注意，我们在这里使用的是 window.onload，所以如果您的页面也在某处使用它，请将它们组合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:10:19.170

最初在**正文**部分，我将 iframe 的可见性设置为隐藏（不必要）。稍后在按钮单击功能中，我保持隐藏可见性，并动态更改 src 属性。

我创建了另一个函数来使 iframe 可见并在 iframe 的 onload 事件中调用该函数。

它奏效了！！

示例代码如下，

```
<div id="Bframe">
<iframe id="biframe" style="visibility:hidden;" src="" allowtransparency="true" application="yes" onload="showiframe()">
</iframe>
</div> 
```

...在按钮单击事件中调用以下行，

```
$('biframe').style.visibility="hidden";
window.frames['biframe'].document.location.href="105.htm";
$('Bframe').style.display="block"; 
```

...稍后将调用以下函数，

```
function showiframe()
{
    $('biframe').style.visibility="visible";
} 
```

**怎么了？**

当我单击按钮时，我的 iframe 将被隐藏。我将分配**src**属性。加载 iframe 后将调用我的 iframe 加载事件，这将显示 iframe。这意味着 iframe 将在其加载期间隐藏，避免白闪。

# c# - 为什么 LINQ 不是纯函数式的？

> ID：13396886
> 
> 赞同：6
> 
> 时间：2012-11-15T11:45:43.070
> 
> 标签：c#, .net, linq, lambda, functional-programming

那么，为什么 LINQ 不被认为是纯粹的函数式呢？

是因为会产生副作用吗？还是因为它存在于命令式环境中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T13:21:54.607

LINQ 不是纯函数式编程模型，因为它允许副作用，因此不是[引用透明的](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)，这是[“纯函数式”](http://en.wikipedia.org/wiki/Functional_programming#Pure_functions)的常见定义。

# php - 用PHP解析大量IP地址

> ID：13396889
> 
> 赞同：2
> 
> 时间：2012-11-15T11:45:52.160
> 
> 标签：php, pcntl, gethostbyaddr

我需要解析大量的 IP 地址。我正在使用[`gethostbyaddr()`](http://php.net/gethostbyaddr)它。

我最近刚读到有关使用的信息[`pcntl_fork()`](http://php.net/pcntl_fork)，如果你分叉，你不必等待超时。

由于`gethostbyaddr`在超时之前解析主机需要很长时间（我认为是 30 秒），因此`pcntl_fork`对于大量 IP 地址使用是否实用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:26:58.857

您需要一个用于 PHP 的高性能、异步 DNS 库。幸运的是，[Net_DNS2](http://pear.php.net/package/Net_DNS2)正是如此。

# android - Android soap webservice Asynctask 应用程序强制停止错误

> ID：13396890
> 
> 赞同：0
> 
> 时间：2012-11-15T11:45:58.940
> 
> 标签：android, web-services

我已经在 android 中使用肥皂编写了一个用于 web 服务的程序。但我不知道异步任务。能不能改正一下程序流程。我需要发送一个整数值并通过网络服务获取转换后的值

```
 package com.example.webservice;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import com.example.webservice.R.string;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class WebService extends Activity {
       private final String NAMESPACE = "http://tempuri.org/";
       private final String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?wsdl";
       private final String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
       private final String METHOD_NAME = "CelsiusToFahrenheit";
    String celsius="";
       Button b;
    TextView tv;
    EditText et;
    String res;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_web_service);
        et=(EditText)findViewById(R.id.editText1);
        tv=(TextView)findViewById(R.id.Result);
        b=(Button)findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            //String result=getFarenheit(et.getText().toString());
            //tv.setText(result+"°F");
            new service().execute();
            }
        });
    }
    private class service extends AsyncTask<Void, Void, String>{

        @Override
        protected String doInBackground(Void... arg0) {

            SoapObject request= new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo celsuiusPI= new PropertyInfo();
            celsuiusPI.setName("Celsius");
            celsuiusPI.setValue(celsius);
            celsuiusPI.setType(string.class);
            request.addProperty(celsuiusPI);
            SoapSerializationEnvelope envelope=new SoapSerializationEnvelope (SoapEnvelope.VER11);
            envelope.dotNet=true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport=new HttpTransportSE(URL);
            try{
                androidHttpTransport.call(SOAP_ACTION, envelope);
                SoapPrimitive response=(SoapPrimitive)envelope.getResponse();
                Log.i("WebService output", response.toString());
                res= response.toString();

            }
            catch(Exception e){
                e.printStackTrace();
            }

            return res;

        }
         protected void onPostExecute(String h){
             String result=h;
                tv.setText(result+"°F");

    }

}
} 
```

痕迹

```
11-15 18:38:08.045: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:08.065: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:08.065: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:08.515: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:08.515: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:08.546: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:08.546: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:09.130: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:09.130: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:09.167: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:09.167: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:09.685: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:09.685: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:09.736: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:09.736: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:10.235: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:10.235: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:10.255: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:10.255: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:10.801: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:10.801: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:10.825: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0
11-15 18:38:10.825: W/Trace(823): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:15:12.457

试试这个

```
try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        request.addProperty("XMLMarks", pXmlString);
        envelope.dotNet = true;
        envelope.implicitTypes = true;
        envelope.enc = SoapSerializationEnvelope.ENC2003;
        envelope.xsd = SoapEnvelope.XSD;
        envelope.xsi = SoapEnvelope.XSI;
        envelope.setOutputSoapObject(request);
        envelope.setAddAdornments(false);

        HttpTransportSE ht = new HttpTransportSE(URL);
        ht.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
        ht.debug = true;
        ht.call(SOAP_ACTION, envelope);

        final SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
        // final SoapObject response = (SoapObject)envelope.getResponse();
        Toast.makeText(this,response.toString(),Toast.LENGTH_LONG).show();
        String str = response.toString();
        strcheck = str;
    } 
```

# objective-c - 从 CFDataRef 获取 sockaddr_in

> ID：13396892
> 
> 赞同：1
> 
> 时间：2012-11-15T11:46:06.920
> 
> 标签：objective-c, network-programming

我有一个包含客户端地址（struct sockaddr_in）的 CFDataRef（我什至不确定，为什么我不再使用 CFData 和 Socket..），我需要获取 IP 和端口。不幸的是，没有直接的方法来获得它们。

因此，我尝试了以下方法：

```
CFDataRef clientAddress = ...; //defined somewhere else, contains a sockaddr_in
struct sockaddr_in clientAddress2;
clientAddress2 = *(struct sockaddr_in*)CFDataGetBytePtr(clientAddress); 
```

（不要把名字当回事，它们只是为了这个例子的目的）。不幸的是，CFDataGetBytePtr 的执行似乎崩溃了，因为在运行我的应用程序时出现“EXC_BAD_ACCESS (code=2,address=0x0)”错误。

从包含 sockaddr_in 的 CFDataRef 获取 IP 和端口的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-25T10:34:30.463

您可以将**CFDataRef**转换为**NSData**，而不是将**BYTES**分配给结构**sockaddr**。

如果地址可能是 IP6 或 IP4，请检查 INET FAMILY，然后将**BYTES**分配给正确的结构（**sockaddr_in**用于 IP4 或**sockaddr_in6**用于 IP6）

例如，假设**地址**是**CFDataRef 地址类型的值**

```
 NSString *addressString;
    int port=0;
    struct sockaddr *addressGeneric;
    struct sockaddr_in addressClient;

    NSData *myData = (__bridge NSData *)address;
    addressGeneric = (struct sockaddr *) [myData bytes];

    switch( addressGeneric->sa_family ) {
        case AF_INET: {
          struct sockaddr_in *ip4;
          char dest[INET_ADDRSTRLEN];
          ip4 = (struct sockaddr_in *) [myData bytes];
          port = ntohs(ip4->sin_port);
          addressString = [NSString stringWithFormat: @"IP4: %s Port: %d", inet_ntop(AF_INET, &ip4->sin_addr, dest, sizeof dest),port];
         }
         break;

        case AF_INET6: {
            struct sockaddr_in6 *ip6;
            char dest[INET6_ADDRSTRLEN];
            ip6 = (struct sockaddr_in6 *) [myData bytes];
            port = ntohs(ip6->sin6_port);
            addressString = [NSString stringWithFormat: @"IP6: %s Port: %d",  inet_ntop(AF_INET6, &ip6->sin6_addr, dest, sizeof dest),port];
         }
         break;
       default:
         addressString=@"Error on get family type.";
         break;
     }

     NSLog(@"Client Address: %@",addressString); 
```

这是输出

2013-08-25 12:22:35.308 FGWakeService[9283:303]**客户端地址：IP4：192.168.69.38 端口：58614**

# java - EclipseLink MOXy 是否适用于异常巨大的 XML 文件？

> ID：13396893
> 
> 赞同：1
> 
> 时间：2012-11-15T11:46:07.403
> 
> 标签：java, xml, jaxb, eclipselink, moxy

我在 EclipseLink MOXy 上度过了一段愉快的时光，找出了在 Spring 中将 XML 解析为 POJO 的最佳方法。我现在得到了一些要解析的 XML，文件的大小达到了令人难以置信的 750MiB。

EclipseLink MOXy 是在底层使用流技术，还是会尝试将整个文档保存在内存中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:50:54.373

**Note:** I'm the [**EclipseLink JAXB (MOXy)**](https://www.eclipse.org/eclipselink/#moxy) lead and a member of the [**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222) expert group.

Whenever possible [**EclipseLink JAXB (MOXy)**](https://www.eclipse.org/eclipselink/#moxy) leverages a StAX `XMLStreamReader` to process the XML input. This means the document is never held in memory.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T12:15:31.683

我无法评论 MOXy 与任何其他 JAXB 实现，但根据您的 XML 文件的结构和它们包含的数据类型，您可能需要考虑将整个 XML 文件解组为对象的明显方法以外的其他方法前面，然后操纵它们。例如，如果非常大的文件由许多小段组成

```
<root>
  <record>
    <id>1</id>
    <name>Ian</name>
  </record>
  <record>
    <id>2</id>
    <name>Deejay</name>
  </record>
  <!-- 100,000 more <record> elements -->
</root> 
```

您可以使用类似的东西单独处理每个段

```
XMLInputFactory xif = XMLInputFactory.newFactory();
XMLStreamReader xsr = xif.createXMLStreamReader(inputStream);
JAXBContext ctx = JAXBContext.newInstance("com.example");
Unmarshaller um = ctx.createUnmarshaller();
xsr.nextTag(); // move to the <root> tag
xsr.nextTag(); // move to the first <record>

// read one <record> at a time
JAXBElement<Record> rec = um.unmarshal(xsr, Record.class);
// leaves the xsr pointing to the token after the </record> tag
// so you can do something with this Record, then discard it and
// parse the next... 
```

# php - 一页有两个网址？

> ID：13396900
> 
> 赞同：0
> 
> 时间：2012-11-15T11:46:35.200
> 
> 标签：php, .htaccess

在 2 个网址上使用一页的最佳/标准方式是什么？

在菜单中，我们有主页、关于、我们提供的服务、联系方式。

在服务部分，它分为 4 个子部分。

所以你登陆的页面`services.php`，也是一样的`services1.php`

有没有办法使用**.htaccess**或**php**来复制页面，所以如果您访问`http://www.mysite.com/services.php`或`http://www.mysite.com/services1.php`最终进入同一页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:50:38.687

一种快速而简单的方法是保持`services.php`原样并将其包含在`services1.php`：

```
<?php
    include("services.php");
?> 
```

或者，您可以`mod_rewrite`像这样使用 Apache（在您的 Apache 配置中或`.htaccess`）：

```
RewriteEngine  on
RewriteRule    ^/services1\.php$  /services.php [PT] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:51:42.530

如果您正在谈论避免重复代码，为什么不简单地将一个页面包含在另一页面的文件中呢？所以 services.php 将是您维护代码的地方，而在 services1.php 中您只有一行包含：

```
<?php include('services.php'); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:00:04.580

只需在根目录中使用带有这些行的 htaccess ：

```
RewriteEngine on
RewriteBase /
RewriteRule ^services1\.php$ services.php [QSA,L] 
```

# image - 将透明 PDF 文件 (PDF/X-4) 转换为图像或 PDF/X-1

> ID：13396902
> 
> 赞同：1
> 
> 时间：2012-11-15T11:46:46.230
> 
> 标签：image, pdf, ghostscript, cmyk

目前我们正在使用 Ghostscript 将 CMYK-PDF 转换为 RGB-Jpeg。工作（或多或少）完美无瑕。但是在过去的几周里，越来越多的具有透明度的 PDF 文件将无法使用我们的 ghostscript 正确呈现。

那么有没有人知道如何将这些 PDF 文件呈现为图像（格式无关紧要）或降低透明度，以便 PDF 文件符合 PDF/X-1 标准。然后可以通过我们的 ghostscript 渲染这些文件。

解决方案应该独立于系统，并且可以通过 API 或 CLI 访问。

有问题的 PDF 文件是包含透明度的 PDF/X-4 标准 PDF。

Ghostscript 是 9.06 版

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:03:59.707

想法#1：请报告错误！如果我们不了解它们，我们就无法修复它们......

[您可以在http://bugs.ghostscript.com](http://bugs.ghostscript.com)报告错误

# xcode - Xcode Guard Malloc 和设备调试：找不到“libgmalloc.dylib”图像

> ID：13396907
> 
> 赞同：59
> 
> 时间：2012-11-15T11:47:00.090
> 
> 标签：xcode, malloc

我在 Xcode 中启用了内存检查（编辑方案 -> 选项）。当我在设备调试上执行时，我现在得到以下信息：`dyld: could not load inserted library '/usr/lib/libgmalloc.dylib' because image not found`. 该措施是主动采取的，希望能在周期的早期发现错误。

内存检查在设备上无效吗？它似乎是有效的，因为它已根据[http://lists.apple.com/archives/xcode-users/2012/Mar/msg00271.html](http://lists.apple.com/archives/xcode-users/2012/Mar/msg00271.html)得到承认和调查。此外，Xcode 在编译和链接期间没有任何抱怨。如果它对设备无效，为什么 Xcode 插入库？有什么解决办法吗？[谷歌搜索返回了一些点击](https://www.google.com/#q=dyld:+could+not+load+inserted+library+libgmalloc.dylib)，但我没有看到任何具体的解决方案。

在设备上调试时如何启用 Xcode Guard Malloc？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2014-09-30T06:24:26.540

您不能在设备上使用 GuardMalloc。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-11-30T02:30:32.333

为了解决这个问题，我创建了两个新的 Xcode 方案。一个名为“XXX 设备”，不包括 malloc 守卫；第二个是“XXX Simulator”，确实包括 malloc 守卫。

添加用于设备/模拟器目的的方案是有问题的（http://www.cocoabuilder.com/archive/xcode/303307-why-does-xcode-create-nonsensical-destinations-in-every-scheme.html）。显然，Dave Duncan 没有遇到 Xcode 无法正确执行某些操作的问题（或者他没有使用诸如 malloc 守卫之类的工具）。

这是库比蒂诺软件垃圾的恶臭。对 Apple 及其糟糕的 QA 部门（如果存在）+1，这让另一个 bug 自由飞翔。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-06-06T15:05:35.613

正如其他人回答的那样，您**不能**在设备上使用`Enable Guard Malloc`，但可以在模拟器上使用。

从 Xcode 7.3.1 开始，所有其他 3 个内存管理选项**都**可以在设备上使用`Enable Malloc Scribble`：`Enable Malloc Guard Edges`和`Enable Zombie Objects`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-24T05:50:16.637

重新启动设备修复了它。iOS 没有更新。特别糟糕 ！

# php - 抛出 InvalidArgumentException 而不是 Exception 有什么好处？

> ID：13396909
> 
> 赞同：1
> 
> 时间：2012-11-15T11:46:59.850
> 
> 标签：php, exception

我想知道使用 InvalidArgumentException 而不是 Exception 有什么好处？是为了提高代码的可读性还是有其他原因？

```
public function setShortName($shortName){
    $shortName = (string) $shortName;
    if (strlen( $shortName ) == 2) {
        $this->_shortName = (string) $shortName;
    } else {
        throw new InvalidArgumentException( "Ülke kısa ismi 2 karakterden oluşmak zorundadır", 115003 );
    }
} 
```

或者

```
public function setShortName($shortName){
    $shortName = (string) $shortName;
    if (strlen( $shortName ) == 2) {
        $this->_shortName = (string) $shortName;
    } else {
        throw new Exception( "Ülke kısa ismi 2 karakterden oluşmak zorundadır", 115003 );
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T11:59:21.310

这是为了更好的可读性/调试和处理正确的代码块，例如在 try-catch 块中......

```
try {
  // some code with potential exception throwing block
} catch(InvalidArgumentException $ex) {
  // handling InvalidArgumentException
} catch(AnotherException $ex) {
  // handling AnotherException
} catch(Exception $ex) {
  // handling Exception
} finally {
  // always-processed code
} 
```

请注意，异常具有基于树的结构，因此处理取决于它们的顺序！（从最低到根）

![在此处输入图像描述](../Images/e15e1b383fab705df2e46a823aa65306.png)

更多信息：[http ://docs.oracle.com/javase/7/docs/api/java/lang/package-tree.html](http://docs.oracle.com/javase/7/docs/api/java/lang/package-tree.html)

# android - 比较列表 项目到字符串

> ID：13396911
> 
> 赞同：2
> 
> 时间：2012-11-15T11:47:01.720
> 
> 标签：android, list, compare

我正在使用以下代码获取数据库值：

```
public List<String> getPlayerNames() {
        List<String> playerNames = new ArrayList<String>();
        c = myDataBase.rawQuery("SELECT * FROM PLAYERS",null);
        while (c.moveToNext()) {

            String q = c.getString(1);
            playerNames.add(q);

        }
        c.close();
        myDataBase.close();
        return playerNames;

    } 
```

我现在想使用以下方法将此列表中的项目与字符串值进行比较：

```
private boolean checkIfExists(String newPlayer) {
        // TODO Auto-generated method stub

        List<String> playerNames = myDbHelper.getPlayerNames();
        //here a loop?! 

        return false;
    } 
```

但我真的不知道如何将这些列表项与字符串值进行比较。我尝试使用 for 循环，但又一次，列表不支持 .length() 方法来遍历所有元素？天呐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:49:59.457

```
for(String playerName : playerNames){
  if(playerName.equals(newPlayer)){
    return true;
  }
}
return false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:50:57.940

```
for (String playerName : playerNames) {
   if (playerName.equals(newPlayer)) {
       // do something
   }
} 
```

you might want `equalsIgnoreCase()` rather than `equals()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T11:51:54.900

是的，会有一个像下面这样的循环

```
for(String str : players)
{
    if (str.equalsIgnoreCase(newPlayer))
    { 
      return true; 
    } 
}
return false; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T12:09:54.427

到目前为止很好的答案。这是完整性的“另一种方式”解决方案之一。

您可以考虑使用 Set。

```
public Set<String> getPlayerNames() {
    TreeSet<String> playerNames = new TreeSet<String>(String.CASE_INSENSITIVE_ORDER); 
```

然后使用

```
if (playerNames.contains(newPlayer)){} 
```

然后，即使在运行时也可以轻松控制集合的大小写敏感度，如果它有意义的话。

[编辑]

也就是说，您的问题可能是“设计一个让我创建、删除和修改播放器的应用程序的正确方法是什么，其详细信息存储在 SQLite 数据库中？”。你没有问那个问题，但我还是会回答这个问题，因为这个问题应该在这个问题之前提出。

花一些时间在谷歌上搜索“软件设计模式”，尤其是 MVC（模型视图控制器）。MVC 是许多 Android 应用程序中使用的标准模式。模型是您想要使用的真实世界数据（玩家）。View(s) 是您的应用程序、ListViews、TextViews 等的接口。控制器（Java 适配器）是将两者绑定在一起并控制如何将数据传递到您的 UI 以及如何对数据进行更改。

此刻，你有一个大约 3 英寸高的小家伙站在你的左肩上说：“给我看看你有什么。我想尽快看到这个在我的手机上运行。完成它并稍后找出错误”。他也很吵闹，难以忽视。

如果你仔细观察，你会看到另一个小家伙在你的右肩上说“先把设计做好。然后开始构建应用程序。我不介意等一会儿，因为最终结果会更好”。这个人说话的声音要小得多，而且通常不是很自信。

你的工作是向左边的人放火，让他逃跑，然后把 Ben 和 Jerrys 的网络钓鱼冰淇淋喂给右边的人，让他在附近闲逛，给你更多好的建议。

所以让我们听一会儿右边的家伙：

“好吧，马蒂亚斯，有很多方法可以解决这个问题，但在你学习的过程中，让我们坚持使用通用方法。这将使谷歌很容易找到你需要将它们拼接在一起的各个组件。

您已经有了一个包含 Players 表的数据库，其中包含有关 Players 的数据。让我们在代码中创建一个代表玩家的类。

```
public class Player{
      public int id;
      public String name;
      public Boolean likesPhishFood;
} 
```

现在，当我们启动我们的应用程序时，我们可以将表中的数据加载到我们的应用程序中，以便开始使用它。使用适配器怎么样？然后我们可以使用 Cursor 来查询我们的数据库，我们可以使用它来创建一个适配器，也许是 SimpleCursorAdapter，然后最终将我们的适配器绑定到 ListView。稍后，您可以添加 onClickListener 和 onLongClickListener 以在用户单击列表中的 Player 时执行某些操作。

所有这一切的好处是，毫无疑问，您的代码最终将导致在更短的时间内生成您的应用程序；会更容易阅读；将有更少的错误，也许最重要的是，将更容易改变。

我几乎可以保证，在某个时间点，通常是大约一半，你会想要添加一些关于玩家的数据。也许他们玩过的次数，或者他们有蓝眼睛。使用 MVC 设计，与在代码中寻找 ArrayList 和为适应新数据而需要更改的循环相比，此类更改更容易进行，并且更不容易产生新的错误。

当然，在你的应用程序准备好之前你需要更多的时间，但你将在此过程中学到的东西将多次收回投资——在这个应用程序和你将来使用的其他应用程序中。”

听右边那个人的。他讲道理。

[http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html](http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html)

祝你好运。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T11:51:45.147

To avoid problems with case sensitive strings

```
for(String playerName : playerNames){
  if(playerName.equalsIgnoreCase(newPlayer)){
    return true;
  }
} 
```

# asp.net - 如何从 asp.net 页面中删除脚本管理器

> ID：13396915
> 
> 赞同：0
> 
> 时间：2012-11-15T11:47:15.493
> 
> 标签：asp.net

我在基本页面中有一个脚本管理器。我想删除某些页面中的脚本管理器。

我尝试了下面的代码

```
 ScriptManager scr = System.Web.UI.ScriptManager.GetCurrent(this.Page);
 this.Page.Controls.Remove(scr); 
```

但它并没有删除脚本管理器。
有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:09:44.413

从 web.config 中删除控件。它被称为`System.Web.Extensions`

查找此行并注释掉或删除：

```
<add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" /> 
```

# jquery - jquery mobile：未显示动态列表

> ID：13396916
> 
> 赞同：0
> 
> 时间：2012-11-15T11:47:22.380
> 
> 标签：jquery, jquery-mobile, html-lists, dynamic-html

这是我的脚本：[http ://clouderize.it/demo/](http://clouderize.it/demo/)

首先我问它必须创建多少个项目：最少 6 个。

在我询问项目名称并提交后，将相关`li`元素添加到`ul`元素中。

问题是 html 代码已正确添加到页面，但它没有出现在页面上。

我的 jsfiddle：http: [//jsfiddle.net/michelejs/PeS2D/559/](http://jsfiddle.net/michelejs/PeS2D/559/)

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:54:59.243

只需要刷新列表视图：

```
 $("#sortable").listview();
  $("#sortable").listview("refresh"); 
```

尝试插入两行，以创建列表视图，然后刷新它并显示元素。

**编辑** 问题出在div的显示属性上：

```
 $('.thirdStep').css('display', 'block'); 
```

代替：

```
 $('.thirdStep').page();
    $('.thirdStep').show(); 
```

# facebook-ads-api - 如何在 ads-api 中定位兴趣

> ID：13396917
> 
> 赞同：1
> 
> 时间：2012-11-15T11:47:38.367
> 
> 标签：facebook-ads-api, targeting, adgroup

我有兴趣创建一个针对出现在您的个人资料主页中的“事物”的广告。一些收藏页面在有组织的类别中，但有些不是 - 并且还有“喜欢”区域。

例如，可以出现在您的个人资料页面上的三个此类对象是：

*   facebook.com/FightClub（电影类别的一部分，收藏夹）
*   facebook.com/pages/Avenue-Q/14821403017（不是原始粉丝页面；在“其他”下，收藏夹）
*   www.facebook.com/misunderstanding.of.things（喜欢）

我已阅读[https://developers.facebook.com/docs/reference/ads-api/targeting-specs/](https://developers.facebook.com/docs/reference/ads-api/targeting-specs/)上的规范，但不确定在我的定位请求中处理这三个对象的正确方法是什么。

我有所需的页面名称（和内部 facebook-id，可以在页面代码本身中发现）并且想要构建正确的定位请求（在*广告组* 请求中）。

根据规范，我知道：

*   连接似乎是对象 ID 的目标——但为此我需要成为粉丝页面/应用程序/事件的所有者，所以这不相关。

*   喜欢和兴趣（关键字）应该是相关的，但这是对象名称的目标。该名称包括具有相同名称的其他对象的重复项（例如：facebook.com/pages/Fight-Club/71836058853 facebook.com/pages/Fight-Club/109398569079581 facebook.com/FightClub；有些具有确切名称，尽管当然不同的网址），我不想定位。

*   我假设类似页面也可以使用它们的 id 或完整 URL 定位，但没有看到这样的选项。

针对特定兴趣和喜好的正确定位方法是什么？（我还考虑检查电源编辑器源代码和捕获嗅探处理此类请求，但我认为技术响应会更好）

谢谢，

斯鲁尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:49:32.697

> 连接似乎是对象 ID 的目标——但为此我需要成为粉丝页面/应用程序/事件的所有者，所以这不相关。

您需要“所有者”做什么？

您只需要页面的 Facebook ID。您提到的所有三个示例都有其中一个，您可以在不打扰页面所有者或对这些页面拥有任何特殊权限的情况下获取它们。

# ruby - Ruby获取当前文件的父目录

> ID：13396920
> 
> 赞同：3
> 
> 时间：2012-11-15T11:47:48.240
> 
> 标签：ruby, spreadsheet, relative-path

我有一个简单的脚本，应该读取 excel 并打印两个单元格：

```
require 'rubygems'
gem 'ruby-ole','1.2.11.4'
require 'spreadsheet'

class Filter
    # Gets zipcode range
    def get_zipcode_range
        wb = Spreadsheet.open "../data/zipcode_range.xls"
        sheet = wb.worksheet 0
        [sheet.cell(0, 0), sheet.cell(0, 1)]
    end
end

f = Filter.new
puts f.get_zipcode_range 
```

文件结构如下：

```
FilterExcel
  data
    zipcode_range.xls
  lib
    filter.rb 
```

当我打开命令提示符并转到 FilterExcel\lib 并运行时：

```
ruby filter.rb 
```

它给出了预期的输出：

> 3911AW
> 
> 3911ZZ

但是当我从项目根文件夹 FilterExcel 运行脚本时，它会引发错误：

> C:\Documents and Settings\Erik\FilterExcel>ruby lib\filter.rb C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.7.4/lib/spreadsheet.rb:68:in '初始化'：没有这样的文件或目录 - 来自 C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.7.4/lib/spreadsheet 的 ../data/zipcode_range.xls (Errno::ENOENT) .rb:68:in 'open' 来自 C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.7.4/lib/spreadsheet.rb:68:in 'open' 来自 lib/filter。 rb:56:in 'get_zipcode_range' 来自 lib/filter.rb:63:in ''

PS如果重要的话，我使用Windows XP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:29:12.917

您应该使用`File.expand_path` [文档](http://ruby-doc.org/core-2.0/File.html#method-c-expand_path)：

```
wb = Spreadsheet.open File.expand_path("../data/zipcode_range.xls", __FILE__) 
```

假设您发布的文件与`data/`. 如果`data/`在当前 Ruby 文件的父目录中，则向上两次：

```
wb = Spreadsheet.open File.expand_path("../../data/zipcode_range.xls", __FILE__) 
```

使用这种方式时，第一个`../`总是中和。如果不确定，请对生成的文件路径进行调试输出：`__FILE__``File.expand_path`

```
puts File.expand_path("../data/zipcode_range.xls", __FILE__) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:17:07.057

你应该改变你的代码

```
wb = Spreadsheet.open "../data/zipcode_range.xls" 
```

到

```
wb = Spreadsheet.open "#{File.dirname(__FILE__)}/../data/zipcode_range.xls" 
```

# c# - C# XNA 中的 .TotalSeconds

> ID：13396922
> 
> 赞同：-1
> 
> 时间：2012-11-15T11:47:53.817
> 
> 标签：c#, visual-studio-2010, xna

在我最近提出的问题之后（已回答；非常感谢您的帮助！）我进步了一点，但又遇到了另一堵砖墙。我对 C# 还很陌生，似乎无法解决我收到的错误消息：“'NullReferenceException 未处理'对象引用未设置为对象的实例”。我正在尝试创建某种计时器，每 2 秒从 1 缓慢计数到 50。我正在使用的代码如下。如果我提供的内容还不够，请告诉我，我会进行编辑。

```
namespace RealTimeStrategyGame
{
    class ResourceCounter
    {
    Vector2 position;
    Texture2D sprite;
    Rectangle boundingbox;
    bool over, clicked;
    SpriteFont font;
    GameTime gameTime;
    int pSourceCount = 1;
    int limit = 50;
    float countDuration = 2f; //every  2s.
    float currentTime = 0f;

    public ResourceCounter(Vector2 pos, GameTime gameTime)
    {
        position = pos;
        over = false;
        clicked = false;
        gameTime = new GameTime();

        currentTime += (float)gameTime.ElapsedGameTime.TotalSeconds; //Time passed since last Update() 

        if (currentTime >= countDuration)
        {
            pSourceCount++;
            //any actions to perform
        }
        if (pSourceCount >= limit)
        {
            pSourceCount = 0;//Reset the counter;

        }

    }

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:57:10.480

您不会将 GameTime gameTime 作为参数传递给函数。因此，您无法访问 gameTime，因为它未初始化

```
public ResourceCounter(Vector2 pos, GameTime gameTime)
{
    // stuff

     currentTime += (float)gameTime.ElapsedGameTime.TotalSeconds; //Time passed since last Update()

    // other stuff
} 
```

编辑：

如果将它传递给构造函数，则创建一个临时变量并使用它，例如

```
private GameTime gameTime; 
```

然后在构造函数中

```
this.gameTime = gameTime; 
```

然后它会被初始化

# google-chrome-extension - 具有完整扩展 API 的打包应用程序？

> ID：13396924
> 
> 赞同：2
> 
> 时间：2012-11-15T11:48:01.857
> 
> 标签：google-chrome-extension, google-chrome-app

我需要创建一个应用程序，它需要访问一些内部 Chrome 数据，例如历史记录、书签、应用程序、热门网站等。我不想使用扩展程序，因为我想显示一个独立的窗口具有复杂的用户界面。

似乎此数据仅适用于旧版打包应用程序。有什么方法可以为非传统打包应用程序启用对完整扩展 API 的访问？

PS 在撰写本文时，我正在使用 Chrome 23。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:11:45.263

不，新风格的 Chrome 应用程序旨在尽可能地与 Chrome 隔离。通过将“type”设置为“popup”，您可以在 Chrome 扩展程序中[创建一个](https://developer.chrome.com/extensions/windows.html#method-create)不直接位于浏览器内部的窗口。

# c# - c#应用程序登录到joomla

> ID：13396925
> 
> 赞同：2
> 
> 时间：2012-11-15T11:48:04.890
> 
> 标签：c#, login, joomla

我需要连接到站点的管理面板（Joomla 2.5）。[我的问题与这个主题](https://stackoverflow.com/questions/6976426/login-to-joomla-from-a-c-sharp-application/13394632#13394632)非常相似，但我还没有找到解决方案，所以正在寻求您的帮助。

这是我的示例代码：

```
WebClient Client = new WebClient();
System.Collections.Specialized.NameValueCollection Collection = 
new System.Collections.Specialized.NameValueCollection();
Collection.Add("username", "--my username--");
Collection.Add("passwd", "--my password--");
Collection.Add("option", "com_login");
Collection.Add("lang", "");
Collection.Add("task", "login");
//I find the token
byte[] res = Client.UploadValues("http://mysite/administrator/index.php", "POST",     Collection);
string source =  Encoding.UTF8.GetString(res, 0, res.Length);
Regex regex = new Regex("([a-zA-z0-9]{32})")
Match match = regex.Match(source);
if (match.Success)
  string token = match.Value;
//add token value to collection (example value 3e2aedd3de46f8a55ec15a6eb58e1c19)
Collection.Add(token, "1");
//run authorization
byte[] res = Client.UploadValues("http://mysite/administrator/index.php", "POST",  Collection);
string source =  Encoding.UTF8.GetString(res, 0, res.Length);
//in the row, the other token (example 06f1740ef6d6e87ae004500edddd7d7d) 
```

但它不起作用。“源”中的令牌值不等于“令牌”值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:14:35.320

当您尝试模仿网站行为时，WebClient 并不是最好的方法。请改用 HttpWebRequest 和 HttpWebResponse。并将请求的 Connection 属性设置为“Keep-alive”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:26:41.800

Jérémie Bertrand 感谢您的提示。我找到了这个[线程](https://stackoverflow.com/questions/930807/c-sharp-login-to-website-via-program)

用WebResponse没看懂，用的class

```
public class CookieAwareWebClient : WebClient
{
private CookieContainer cookie = new CookieContainer();

protected override WebRequest GetWebRequest(Uri address)
{
    WebRequest request = base.GetWebRequest(address);
    if (request is HttpWebRequest)
    {
        (request as HttpWebRequest).CookieContainer = cookie;
    }
    return request;
}
} 
```

我写的代码如下

```
CookieAwareWebClient Client = new CookieAwareWebClient();
//...on the same 
```

有用 ：）！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T16:41:47.230

对于大家来说，针对当前 joomla 2.5 版本的完整解决方案：

如上所述，您需要 WebClient-Class 的此扩展：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;

namespace joomla.Util
{
    public class CookieAwareWebClient : WebClient
    {
        private CookieContainer cookie = new CookieContainer();

        protected override WebRequest GetWebRequest(Uri address)
        {
            WebRequest request = base.GetWebRequest(address);
            if (request is HttpWebRequest)
                (request as HttpWebRequest).CookieContainer = cookie;

            return request;
        }
    }
} 
```

此外，您需要此 joomla 登录：

```
public class JoomlaUserManagement
{
    private const string _USERCOM = "com_users";
    private const string _LOGINVIEW = "login";
    private const string _LOGINTASK = "user.login";
    private const string _REGEXTOKEN = "([a-zA-Z0-9]{32})";
    private const string _REGEXRETURN = "([a-zA-Z0-9]{27}=)";
    private const string _REGEXRETURNLOGOUT = "([a-zA-Z0-9]{52})";

    /// <summary>
    /// Gets the user name which is used to do the joomla login
    /// </summary>
    public String UserName { get; private set; }

    /// <summary>
    /// Gets the root uri to the joomla site.
    /// </summary>
    public Uri SiteRootUri { get; set; }

    /// <summary>
    /// Gets the last error occured when logging in
    /// </summary>
    public String LastError { get; private set; }

    private String _password { get; set; }

    private CookieAwareWebClient client;

    /// <summary>
    /// Initializes an instance for handling login or logoff
    /// </summary>
    /// <param name="userName">The username which is used to do the joomla login</param>
    /// <param name="password">The username which is used to do the joomla login</param>
    /// <param name="siteRoot">The root uri to the joomla site</param>
    public JoomlaUserManagement(String userName, String password, Uri siteRoot)
    {
        UserName = userName;
        _password = password;
        SiteRootUri = siteRoot;
        client = new CookieAwareWebClient();
    }

    /// <summary>
    /// Performs a joomla login.
    /// </summary>
    /// <returns>Returns true if succeeded. False if failed. If false, error will be written to <see cref="LastError"/></returns>
    public Boolean Login()
    {            
        NameValueCollection collection = new NameValueCollection();

        collection.Add("username", UserName);
        collection.Add("password", _password);
        collection.Add("option", _USERCOM);
        collection.Add("lang", "");
        collection.Add("view", _LOGINVIEW);

        // Request tokens.
        String token = null;
        String returnToken = null;

        byte[] result = client.UploadValues(SiteRootUri, "POST", collection);
        string resultingSource = Encoding.UTF8.GetString(result, 0, result.Length);

        Regex regex = new Regex(_REGEXTOKEN);
        Match match = regex.Match(resultingSource);            
        if (match.Success)            
            token = match.Value;

        regex = new Regex(_REGEXRETURN);
        match = regex.Match(resultingSource);
        if (match.Success)
            returnToken = match.Value;

        // Perform login
        if (returnToken != null && token != null)
        {
            collection.Add(token, "1");
            collection.Add("return", returnToken);
            collection.Add("task", "user.login");

            result = client.UploadValues(SiteRootUri, "POST", collection);
            resultingSource = Encoding.UTF8.GetString(result, 0, result.Length);

            // Invalid token?
            if (resultingSource.Length > 16)
                return true;
            else
            {
                LastError = "Unable to login.";
                return false;
            }
        }
        else
        {
            // We don't have all tokens
            LastError = "Unable to retrieve tokens.";
            return false;
        }
    }

    public Boolean Logout()
    {            
        NameValueCollection collection = new NameValueCollection();

        collection.Add("username", UserName);
        collection.Add("password", _password);
        collection.Add("option", _USERCOM);
        collection.Add("lang", "");
        collection.Add("view", _LOGINVIEW);

        // Request tokens.
        String token = null;
        String returnToken = null;

        byte[] result = client.UploadValues(SiteRootUri, "POST", collection);
        string resultingSource = Encoding.UTF8.GetString(result, 0, result.Length);

        Regex regex = new Regex(_REGEXTOKEN);
        Match match = regex.Match(resultingSource);
        if (match.Success)
            token = match.Value;

        regex = new Regex(_REGEXRETURNLOGOUT);
        match = regex.Match(resultingSource);
        if (match.Success)
            returnToken = match.Value;

        // Perform login
        if (returnToken != null && token != null)
        {
            collection.Add(token, "1");
            collection.Add("return", returnToken);
            collection.Add("task", "user.logout");

            result = client.UploadValues(SiteRootUri, "POST", collection);
            resultingSource = Encoding.UTF8.GetString(result, 0, result.Length);

            // Invalid token?
            if (resultingSource.Length > 16)
                return true;
            else
            {
                LastError = "Unable to logout.";
                return false;
            }
        }
        else
        {
            // We don't have all tokens
            LastError = "Unable to retrieve tokens.";
            return false;
        }
    }
} 
```

然后，您可以登录或注销：

```
JoomlaUserManagement userMan = new JoomlaUserManagement("john.doe", "password", new Uri("http://www.customer.ltd"));
Boolean loginResult = userMan.Login();
Boolean logoutResult = userMan.Logout(); 
```

# iphone - nsdate 转换的问题

> ID：13396927
> 
> 赞同：0
> 
> 时间：2012-11-15T11:48:13.867
> 
> 标签：iphone, objective-c, ios, nsdate

我正在尝试将 nsstring 转换为 nsdate 并且我得到了一个奇怪的行为。

我尝试转换这些日期：

2012-11-14 13:35:05

2012-11-14 13:33:53

2012-10-22 12:56:27

2012-10-22 12:56:23

和更多...

使用此代码：

```
NSString *createdString = [conversationFromServer objectForKey:@"created"];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
[formatter setTimeZone:gmt];
NSDate *created = [formatter dateFromString:createdString]; 
```

如您所见，日期具有相同的模式，但我无法转换第一个日期和第二个日期。如果我记录结果，字符串中的所有结果都是正确的，但在 nsdate 中，第一个和第二个是 nil。

有什么解决办法吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:54:20.550

使用大写的 HH：

```
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

# php - php html表格查询

> ID：13396928
> 
> 赞同：0
> 
> 时间：2012-11-15T11:48:12.690
> 
> 标签：php, html, loops, for-loop, html-table

我已经有一段时间了，只是想不通。我有一个 html 表，必须找到 $total/Sale Cost (last) 行中的值的总和。任何人都可以帮助我或指出我正确的方向。

下面的代码：

```
<?php

print ("<table border=1><tr><th>Sale Number</th><th>Item</th><th>Item Cost</th><th>Units Sold</th><th>Sale Cost</th></tr>");

    for($x=0; $x<=20; $x=$x+1) {

        /*
        $sofa_total = 0;
        $table_total = 0;
        $chair_total = 0;
        $box_total = 0;
        $tablecloth_total = 0;
        */

        $amount = rand(1,10);
        $res = rand(1, 5);
        $object = 0;
        $total = $amount * $cost;

                if ($res == 1) {
                            $cost = 235.00;
                            $item = "sofa";
                            }
                        elseif ($res == 2) {
                            $cost = 125.00;
                            $item = "table";
                                }
                        elseif ($res == 3) {
                            $cost = 25.99;
                            $item = "chair";
                                }
                        elseif ($res == 4) {
                            $cost = 15.25;
                            $item = "box";
                                }
                        elseif ($res == 5) {
                            $cost = 23.50;
                            $item = "tablecloth";
                                }

        print ("<tr>");
             print ("<td>" . $table[$x][0] = $x+1 . "</td>");
             print ("<td>" . $table[$x][1] = $item . "</td>");
             print ("<td>" . $table[$x][2] = $cost . "</td>");
             print ("<td>" . $table[$x][3] = $amount . "</td>");
             print ("<td>" . $table[$x][4] = $total  . "</td>");
             }
        print ("</tr>");

                if ($object==0) {

                    $sofa_total = $sofa_total + $amount;

                    } elseif ($object==1) {

                    $table_total = $table_total + $amount;

                    } elseif ($object==2) {

                    $chair_total = $chair_total + $amount;

                    } elseif ($object==3) {

                    $box_total = $box_total + $amount;

                    } elseif ($object==4) {

                    $tablecloth_total = $tablecloth_total + $amount;

                    }

print ("</table>"); 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:59:52.160

让我猜猜……桌子上全是`1`s？

当您打印`<td>`s 时，您应该传入一个值，而不是 espression。对表达式进行评估，在您的情况下，返回 1 因为它们是成功的（它们是分配）。

除了采用这种方法，您可以保留计数器并在每个周期将它们相加，在另一个语句中打印当前值，最后在最后一个周期回显（打印）计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:57:35.597

通过将当前实例的值添加到前一个实例的值来循环……

```
for( your loop){
    $sampleCost = $sampleCost + $currentCost;
}
echo $sampleCost; /*another way of displaying item*/ 
```

这个想法是不断增加价值。确保您考虑数据，尤其是带小数的数据。

```
$currentCost; /* value from the query*/ 
```

# javascript - JavaScript如何通过引用的var将新函数分配给原始变量

> ID：13396932
> 
> 赞同：1
> 
> 时间：2012-11-15T11:48:39.627
> 
> 标签：javascript, function, reference

我正在尝试通过另一个引用变量将新函数分配给 javascript 中的变量。我有以下代码：

```
grp0 =
{
    "grp0_0":
    {
        "grp0_0_0": function()
        {
            console.log('test', 0, 0, 0);
        },

        "grp0_0_1": function()
        {
            console.log('test', 0, 0, 0);
        }
    },

    "grp0_1":
    {
        "grp0_1_0": function()
        {
            console.log('test', 0, 1, 0);
        },

        "grp0_1_1":
        {
            "grp0_1_1_0": function()
            {
                console.log('test', 0, 1, 1, 0);
            },

            "grp0_1_1_1": function()
            {
                console.log('test', 0, 1, 1, 1);
            }
        }
    },

    "grp0_2": function()
    {
        console.log('test', 0, 2);
    }
}

function replaceFunc(group, names)
{
    if (typeof group === 'function')
    {
        console.log('replace function:', names);
        group = function()
        {
            console.log('something else');
        }
    }
    else
    {
        $.each(group, function(name, value)
        {
            replaceFunc(value, names.concat(name));
        });
    }
}

grp0.grp0_1.grp0_1_0();

replaceFunc(grp0, []);

grp0.grp0_1.grp0_1_0(); 
```

正如预期的那样，这输出：

```
test 0 1 0
replace function: ["grp0_0", "grp0_0_0"]
replace function: ["grp0_0", "grp0_0_1"]
replace function: ["grp0_1", "grp0_1_0"]
replace function: ["grp0_1", "grp0_1_1", "grp0_1_1_0"]
replace function: ["grp0_1", "grp0_1_1", "grp0_1_1_1"]
replace function: ["grp0_2"]
test 0 1 0 
```

但我希望最后一行是：

```
something else 
```

如何更改原始功能？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:29:36.680

Javascript 函数参数总是**按值**传递，而不是按引用传递。这意味着虽然您*可以*更改参数的值，但更改不会反映在调用方。

```
function test(a) {
  a = 'd';
}

var b = 'c';
test(b);
console.log(b);
// 'c';  <<= the value has NOT been changed 
```

将对象作为参数传递给函数时，它实际上是对所传递对象的引用。但是，引用本身仍会被复制。这意味着虽然您无法替换对象本身，但您*可以*更改其属性。

因此，如果您想更改函数内部的值，则必须传递一个对象；调用函数可以看到对该对象属性的任何更改。

```
function test(p) {
  p.a = 'd';
}

var o = {a: 'c'};
test(o);
console.log(o.a);
// 'd'; <<= the property's value HAS been changed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:19:17.687

根据 Yoshi 的评论：

> 你不能。如果您真的想这样做，您必须将父对象传递给 replaceFunc，然后处理该对象。例如更改属性。

我将代码更改为：

```
function replaceFunc(group, name)
{
    if (typeof group[name] === 'undefined') return;

    if (typeof group[name] === 'function')
    {
        group[name] = function()
        {
            console.log('something else');
        }
    }
    else
    {
        $.each(group[name], function(n, v)
        {
            replaceFunc(group[name], n);
        });
    }
}

grp0.grp0_1.grp0_1_0();

var parent = { groups: grp0 };
replaceFunc(parent, 'groups');

grp0.grp0_1.grp0_1_0(); 
```

这导致：

```
test 0 1 0
something else 
```

非常感谢你

# javascript - 对照 querySelector 检查元素？（使用本机方法，而不是 JQuery）

> ID：13396936
> 
> 赞同：8
> 
> 时间：2012-11-15T11:48:58.190
> 
> 标签：javascript, native-methods

我有一个元素。我想检查它是否满足特定查询，例如（'.someclass'），其样式与querySelector 相同。

这并不像听起来那么容易。[Element.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)和[Element.querySelector](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelector)仅适用于相关元素的**后代**。不是元素本身。

```
var p = document.querySelector('p') 
```

注意：上面的行仅用于说明目的。在现实生活中，我实际上是通过其他方式找到了该元素。

```
p.querySelector('p') 
```

退货`null`。因为 querySelector 只对后代进行操作。

我可以做：

```
p.parentNode.querySelector('.someclass') 
```

但这会返回元素父元素的第一个子元素，它可能是不同的元素。例如，如果 'p' 是父级的第二个子级，则此代码将失败。

**如何检查元素本身是否满足查询？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T12:07:43.933

您可以使用该[`matches()`](http://dev.w3.org/2006/webapi/selectors-api2/#matches)方法。

可以在[http://caniuse.com/matchesselector找到支持](http://caniuse.com/matchesselector)

* * *

但是由于它仍然是一个草案，所有浏览器都使用前缀来实现它

*   `element.msMatchesSelector( selector )`（IE）
*   `element.mozMatchesSelector( selector )`(Mozilla)
*   `element.webkitMatchesSelector( selector )`（网络套件）
*   `element.oMatchesSelector( selector )`（歌剧）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T12:48:15.420

`MatchesSelector`另外：在主要浏览器中使用的助手

```
function matches() {
  var el = document.querySelector('body');
  return ( el.mozMatchesSelector || el.msMatchesSelector ||
           el.oMatchesSelector   || el.webkitMatchesSelector || 
           {name:'getAttribute'} ).name;
}
//=> usage
var someP = document.querySelector('p');
   ,rightClass = someP[matches()]('.someclass'); 
```

不过，`/someclass/.test(someP.className)`这里会更短；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:54:29.037

通常，给定 element `e`，检查它是否与您将使用的选择器匹配：

```
var check = false;
var c = e.parentNode.querySelectorAll('selector');
for(var i = 0; i < c.length; i++){
    if (c[i]==e){
        check = true;
    }
} 
```

一个更简洁但有点 hacky 的解决方案是：

```
var c = e.parentNode.querySelectorAll('selector');
var check = Array.prototype.indexOf.call(c,e) != -1; 
```

注意：`check`指示元素是否与选择器匹配。

这是一个演示：http: [//jsfiddle.net/2vX3z/](http://jsfiddle.net/2vX3z/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T12:01:42.637

并非在所有浏览器中，但这可能会有所帮助：[http ://caniuse.com/matchesselector](http://caniuse.com/matchesselector)

示例用法（来自[MDN](https://developer.mozilla.org/en-US/docs/DOM/Element.mozMatchesSelector)页面）；

```
<div id="foo">This is the element!</div>
  <script type="text/javascript">
    var el = document.getElementById("foo");
    if (el.mozMatchesSelector("div")) {//or webkitMatchesSelector("div") in webkit browser or msMatchesSelector("div") in IE9/10
      alert("Match!");
    }
  </script> 
```

假设唯一的另一种方法是运行`querySelector`并循环测试所有项目，如果它与您已经拥有的项目相同。

# regex - 多行正则表达式搜索

> ID：13396940
> 
> 赞同：3
> 
> 时间：2012-11-15T11:49:08.410
> 
> 标签：regex, perl, grep, textwrangler

在 SO 和 Google 上进行了大量搜索后，我求助于发布一个新问题。我正在使用 TextWrangler 尝试编写一个正则表达式，这将为我提供多行模式的最短匹配项。

基本上，

```
ہے\tVM 
```

是我正在寻找的字符串（一个由制表符分隔的阿拉伯语单词与其词性标签）。困难的是我想搜索包含该字符串的所有单个句子。这是我到目前为止所拥有的：

```
/(<Sentence id='\d+'>(?:[^<]|<(?!\/Sentence>))*ہے\tVM(?:[^<]|<(?!\/Sentence>))*<\/Sentence>)/ 
```

我正在查看的文件是用 CML 编码的，所以我的部分问题是你们中是否有人知道 MAC 的 CML 解析器？

另一个明显的选择是编写一个 Perl 脚本——在这里，我再次感谢任何指向一个简单解决方案的建议。

* * *

我当前的脚本是：

```
use open ':encoding(utf8)';
use Encode;
binmode(STDOUT, ":utf8");
binmode(STDIN, ":utf8");

my $word = Encode::decode_utf8("ہے");

my @files = glob("*.posn");

foreach my $file (@files) {
    open FILE, "<$file" or die "Error opening file $file ($!)";
    my $file = do {local $/; <FILE>};
    close FILE or die $!;
    if ($file =~ /(<Sentence id='\d+'>(?:[^<]|<(?!\/Sentence>))*$word\tVM(?:[^<]|<(?!\/Sentence>))*<\/Sentence>)/g) {
            print STDOUT "$1\n\n\n\n";
            push(@matches, "$1\n\n");
            }
}

open(OUTPUT, ">matches.txt");
print OUTPUT "@matches";
close(OUTPUT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:08:33.637

您可能会在输入中出现更多字符串，因此请搜索所有字符串...

我相信你的代码应该是这样的>>

```
use open ':encoding(utf8)';
use Encode;

binmode(STDOUT, ":utf8");
binmode(STDIN,  ":utf8");

my $word = Encode::decode_utf8("ہے");
my @files = glob("*.posn");
my @matches = ();

foreach my $file (@files) {
  open FILE, "<$file" or die "Error opening file $file ($!)";
  my $file = do {local $/; <FILE>};
  close FILE or die $!;
  my @occurrences = $file =~ /<Sentence id='\d+'>(?:[^<]|<(?!\/Sentence>))*$word\tVM(?:[^<]|<(?!\/Sentence>))*<\/Sentence>/g;
  print STDOUT "$_\n\n\n\n" for (@occurrences);
  push (@matches, "$_\n\n") for (@occurrences);
}

open (OUTPUT, ">matches.txt");
print OUTPUT  "@matches";
close(OUTPUT); 
```

* * *

[在此处](http://www.regular-expressions.info/)了解有关正则表达式的更多信息。

# tsql - 结合 min() 和 have()

> ID：13396941
> 
> 赞同：1
> 
> 时间：2012-11-15T11:49:11.163
> 
> 标签：tsql

是否有可能在聚合内联中使用`having()`链接`min()`？

```
select distinct
  "timestamp"
  , MinActiveValue = min( "value" ) over ( partition by "timestamp" ) having ( "active" = 1 )
from
  "data" 
```

在下面的链接示例中，使用第一个查询效果很好。实际上，我不想对 min-condition 使用 where 子句，因为我会破坏同一查询中使用的数据过滤。（例如，有一些由同一查询计算的分组总和）

[SQL小提琴链接](http://sqlfiddle.com/#!3/53c12/8/0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:57:24.287

你不需要`HAVING`这个。就像`GROUP BY "timestamp"`这样`WHERE "active" = 1`：

```
SELECT
  "timestamp"
  , MinActiveValue = MIN( "value" )
FROM  "data"
WHERE "active" = 1
GROUP BY "timestamp"; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/53c12/16)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:57:34.560

也许是这样：

```
WITH CTE AS
(
   SELECT DISTINCT
      timestamp
    , active
    , value
    , RN = ROW_NUMBER() OVER ( PARTITION BY timestamp ORDER BY active DESC,value ASC )
  FROM
    data
)
SELECT timestamp, value AS MinActiveValue
FROM CTE
WHERE RN = 1 AND active = 1 
```

在这里，您可以在 CTE 本身中应用您的过滤器。

[**演示**](http://sqlfiddle.com/#!3/53c12/18/0)

# php - 填充数据库迭代目录和深层目录结构

> ID：13396944
> 
> 赞同：-1
> 
> 时间：2012-11-15T11:49:25.287
> 
> 标签：php, database, algorithm, file, import

我有一个用于图像库的导入脚本，用于根据“图像”目录填充数据库。在我终于弄清楚如何正确使用 RecursiveIteratorIterator 之后，填充工作正常。不幸的是，它没有考虑子专辑。

```
<?php
$dir = "/home/photofoli/domains/dev.photofolio.local/public_html/photo";            
$ir = new RecursiveDirectoryIterator($dir, FilesystemIterator::SKIP_DOTS);

$album_id = 0;
$image_id = 0;

foreach(new RecursiveIteratorIterator($ir, RecursiveIteratorIterator::SELF_FIRST) as $iterator) { 

    $realpath = $iterator->getRealPath();

    if ($iterator->isDir()) { 
        // Counting
        $numberofpictures = 1;
        $lastalbumid = $album_id;               
        $album_id++;

        // SQL
        $albumname = $iterator->getFileName();
        $addslashes = addslashes($albumname);
        $albumslug = str_replace(' ','-',$addslashes); $albumslug = strtolower($albumslug);             
        $sql = "INSERT INTO `photofoli_db`.`albums` (`name`, `id`, `path`, `album_id`, `image_count`, `slug`) VALUES ('$addslashes', $album_id, '$addslashes', '1', $numberofpictures, '$albumslug');";
        $this->Album->query($sql);
    }   
    else {
        // Counting
        $numberofpictures++;
        $image_id++;

        // SQL
        $imagename = $iterator->getFileName();
        $imagepath = $albumname.'/'.$iterator->getFileName();
        $addslashes = addslashes($imagepath);
        $sql = "INSERT INTO `photofoli_db`.`images` (`path`, `album_id`, `description`, `id`) VALUES ('$addslashes', $album_id, '$imagename', $image_id);";
        $this->Image->query($sql);
    }
}
?> 
```

如何调整脚本以允许子专辑？我正在考虑保存 $lastAlbumID 甚至计算完整路径中“/”的数量，但有些事情告诉我，我应该寻求一些帮助来重新考虑为此目的的脚本设计。

路径示例：

```
/images/album1/test.jpg
/images/album1/test5.jpg
/images/album2/test.jpg
/images/album1/subalbum/test.jpg (this is a problem, because it's in a sub-sub directory) 
```

*免责声明：我使用脚本重新填充数据库的原因是因为上传 300 个文件以重新运行脚本比手动添加 300 个新图像更快。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:02:52.840

我会这样做

```
$ritit = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator($dir, FilesystemIterator::SKIP_DOTS)
);
$map = array();
foreach ($ritit as $splFileInfo) {
    $dir = dirname($splFileInfo->getRealPath());
    $map[ $dir ][] = $splFileInfo->getFileName();
}

print_r($map); 
```

它生成一个映射，其中 dir 是键，值是作为该 dir 的直接子级的文件名。

循环遍历结果数组，计数并插入数据库应该是小菜一碟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:02:00.197

您可以将这段代码包含在一个接受目录路径的函数中：每当您找到子目录时，您都可以递归地调用此函数。

# python - Pygments 样式未在 Jekyll 博客中应用

> ID：13396951
> 
> 赞同：1
> 
> 时间：2012-11-15T11:50:00.927
> 
> 标签：python, html, css, markdown, pygments

[http://joshhornby.co.uk/2012/11/14/test-test-test.html](http://joshhornby.co.uk/2012/11/14/test-test-test.html)

正如您从链接中看到的那样，底部的代码只是黄色的。未应用任何样式。我已经通过终端安装了 pygments，样式表都在那里并且可以正常工作。我正在使用 jekyll，因此会创建降价文件，然后将其转换为 .html 页面。

我也将它作为 pygments: true 在 .yml 文件中

编辑：奇怪，我不得不将 .yml 文件中的降价更改为降价：maruku。而且它似乎比以前更有效，但是无论我添加什么样式，代码上总是有一个黄色突出显示，并且代码从来没有像我想的那样设置样式！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:07:35.970

奇怪的是，我不得不将 .yml 文件中的降价更改为降价：maruku。现在都在工作。

# java - 从 RESTlet API 检索图像

> ID：13396952
> 
> 赞同：3
> 
> 时间：2012-11-15T11:50:03.803
> 
> 标签：java, restlet-2.0

我正在使用 RESTlet 2.0 在 JAVA 中创建一个 REST API。我想创建一个 API 调用，它将以类似于 Facebook 在其 Graph API 中所做的方式从数据库中返回图像。

基本上，我会做一个**GET**到例如

```
 http://localhost:8080/myAPI/{session_id}/img/p?id=1 
```

然后，这将从数据库中检索 blob 数据，然后以用户可以这样显示的方式返回图像：

```
 <img src="http://localhost:8080/myAPI/{session_id}/img/p?id=1"> 
```

我知道我可能需要将标头中的内容类型设置为 Image/PNG（当然假设图像是 PNG），但我正在努力正确返回数据以使其正常工作。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T10:56:53.477

不确定 2.0，但是在 2.2 中你可以使用这样的东西：

```
@Get
public Representation getImage() {

    ...
    byte[] data = ...

    ObjectRepresentation<byte[]> or=new ObjectRepresentation<byte[]>(data, MediaType.IMAGE_PNG) {
        @Override
        public void write(OutputStream os) throws IOException {
            super.write(os);
            os.write(this.getObject());
        }
    };

    return or; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T19:43:16.897

使用 2.2 有一个 ByteArrayRepresentation 类型。

```
@Get("image/jpeg")
public void getIcon() {
    byte[ ] your_images_bytes = ...
    ByteArrayRepresentation bar 
        = new ByteArrayRepresentation(your_images_bytes, MediaType.IMAGE_JPEG) ;
    getResponse().setEntity(bar);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:58:32.147

在我的应用程序中，我`byte array`从我的 REST 方法返回一个。`content-type`正如`image/png`你所提到的。

# android-camera - DCIM 文件夹是否存在于所有 android 设备中

> ID：13396956
> 
> 赞同：2
> 
> 时间：2012-11-15T11:50:14.070
> 
> 标签：android-camera

我在 android 中制作了一个应用程序，其中从默认相机拍摄图像并从 DCIM/Camera 文件夹中检索它以在图像视图中显示它。我的问题是 - 所有设备中都存在 DCIM/Camera 文件夹吗？因为如果任何设备没有将捕获的图像存储在 DCIM/Camera 文件夹中，图像将不会显示在图像视图中。请回答我的问题。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:23:25.490

最简洁的答案是不。您不能相信系统会将捕获的图像放入`DCIM/Camera`.

# jsf - Cannot see JSF editing tools in RAD 8.5

> ID：13396960
> 
> 赞同：2
> 
> 时间：2012-11-15T11:50:27.987
> 
> 标签：jsf, ibm-rad

I installed IBM Rational Application Developer (RAD) 8.5 and I'm trying to create a JSF application, but things are not working as documented. When I create a new Web Project, I do not see "Java Server Faces" template in the list of project templates. The only templates I see are "Dojo Toolkit", "Rest services" and "Simple". Instead, I created a Dynamic web project, and selected "Java Server Faces v2.0 project" from the list of configuration. The project was indeed created with JSF settings in web.xml and faces-config.xml, but when I create a JSP page, I cannot see the JSF editing tools. There is no JSF palette in the palettes pane. I verified that the Java Server Faces facet is selected in the Project Facets. Anything else I need to do to get the JSF project template and the JSF palette?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:46:50.900

我发现 RAD 8.5 中默认没有安装 JSF 工具。我修改了安装（使用 IBM Installation Manager 中的 Modify）并添加了 JSF 工具功能，现在可以使用 JSF 编辑工具。

# javascript - Popup iframe not moving when resizing the page

> ID：13396962
> 
> 赞同：0
> 
> 时间：2012-11-15T11:50:34.037
> 
> 标签：javascript, css, iframe

I have an iframe element that, when I click on a picture, it will open below it.

My problem is that, when I open the popup (iframe) and resize the page, the iframe is not keeping the position below the picture.

```
iframeLoginControl.style.position = 'absolute';
iframeLoginControl.style.left = parseInt(imgBtnPos.left) - 12 + "px";
iframeLoginControl.style.top = parseInt(imgBtnPos.top) + parseInt(imgButtonObj.height) - 1 + "px"; 
```

I think my problem is with `imgBtnPos.left` that not gets refreshed when I resize the page.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:01:19.113

您应该使用更多代码来详细说明这一点。首先，您必须重新计算窗口元素的“onresize”事件中的位置。如果您已经这样做了，请检查代码中的“imgBtnPos”变量：它是什么？它是对您的 DOM 元素的引用吗？如果是这样，您忘记在 '.left' 和 '.top' 之前放置 '.style' 关键字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:01:29.940

这里的问题是您将绝对定位在页面的*自然*流`iframe`之外。您的坐标在您设置它的那一刻被引用到相对父级的左上角。

 *您必须将`iframe`相对位置定位到`image`- 这样它就会随着页面的流动而移动。

您还没有提供将 iframe 附加到文档的方式，但是如果您将其附加到内联，并且您没有绝对定位它，它应该可以正常工作。*

# uiview - How to control Alpha of UIView with UISlider ? New Post

> ID：13396963
> 
> 赞同：1
> 
> 时间：2012-11-15T11:50:33.703
> 
> 标签：uiview, uiimageview, uislider, alpha

First sorry for the last post ,this one i' ll make it short :

I would like to control the alpha of a view or subview , using a UISlider ; i tried hard , but i fail ..

Here' s my exemple ( not working ) ;

Simple ViewController , with a view in it ( cassetteView ) and a UISlider ( alphaSlider )

```
@interface ViewController : UIViewController

@property (strong, nonatomic) IBOutlet UIView *cassetteview;

@property (strong, nonatomic) IBOutlet UISlider *alphaSlider;

-(void) sliderValueChanged: (id)sender;

@implementation ViewController

@synthesize cassetteview;

@synthesize alphaSlider;

- (IBAction)alphaslider:(id)sender {

  //here may be the miss of code ..?  }

- (void)sliderValueChanged:(UISlider *)sender {

    self.cassetteview.alpha = sender.value;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

}

@interface cassetteView : UIView

@property (nonatomic, assign) CGFloat alpha;

@implementation cassetteView

@synthesize alpha; 
```

Hope this post is clear and that you guys could help me figure out how to do it ..Thanks a lot for your time.

Lucas ( Belgium )

( my goal at the end is to control the alpha of multiple UIImageViews in a ViewController , using multiple UIISliders .. do you think i m dreaming ..? )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T23:41:47.793

将 UISlider minimumValue 设置为 0.0，将 maximumValue 设置为 1.0。

# syntax - 关联数组的键分配失败，带有 - 符号，没有双引号

> ID：13396977
> 
> 赞同：1
> 
> 时间：2012-11-15T11:51:16.753
> 
> 标签：syntax, autohotkey

```
for k, v in {font-weight : "bold"}
    msgbox %k% : %v%    ; : bold

for k, v in {"font-weight" : "bold"}
    msgbox %k% : %v%    ; font-weight : bold 
```

这是一个错误还是作为键传递的字符串在使用 - 符号时被视为表达式？手册说双引号是可选的。

* * *

这是无效的，导致错误。所以现在它是有道理的。

```
font-value := "bold"
msgbox % font-value 
```

结果：

> 行文本：font-value := "bold" 错误：此行不包含可识别的操作。

* * *

附加说明：

```
for k, v in {font*weight : "bold"}
    msgbox %k% : %v%    ; : bold

for k, v in {10*2 : "10*2"}
    msgbox %k% : %v%    ; 20 : 10*2 

for k, v in { 0xeeeee : "0xeeeee"}
    msgbox %k% : %v%    ; 978670: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:13:47.963

[与此处](https://stackoverflow.com/q/13397614/1074592)的答案类似，减号是保留的。使用任何其他运算符时，该快捷方式也不起作用。它不是错误的原因是它允许在命名对象的键时使用数学、字符串操作、函数等。它可能是也可能不是设计缺陷，但它可以按照开发人员的预期工作。

从 [AutoHotkey_L 文档](http://l.autohotkey.net/docs/Objects.htm#Usage_Associative_Arrays)：

> **对于仅由单词字符组成的键，**引号是可选的。任何表达式都可以用作键，但要将变量用作键，则必须将其括在括号中。例如，`{(KeyVar): Value}`和`{GetKey(): Value}` 都是有效的。

*（重点补充）*

单词字符通常表示字母、数字和下划线。

# c# - 事务在 c# 中不回滚

> ID：13396980
> 
> 赞同：5
> 
> 时间：2012-11-15T11:51:23.880
> 
> 标签：c#, sql-server, transactions, rollback

```
private void btnConfigure_Click(object sender, EventArgs e)
{
    try
    {
        dbConfigure dc = new dbConfigure();
        SqlTransaction tr = conn.BeginTransaction();
        cmd.Transaction = tr;
        if (dc.configuration(cmd, ps.tableNames))
            tr.Commit();
        else
        {
            tr.Rollback();
            mesg.show("Transaction is Rolled back");
        }
    }
    catch (Exception ex)
    {
        mesg.show(ex.Message);
    }
} 
```

如果我在`configuration`方法的任何地方遇到问题，那么它会返回 false，我可以看到该消息`Transaction is Rolled Back`。但实际上事务并没有完全回滚，并且尽管回滚，但该函数对数据库结构所做的一些更改仍然存在，这是非常不希望的。我的问题是**事务回滚发生故障的可能性是什么？**

除了共享（以上）方法外，我的项目中没有其他任何交易

**小细节**

我正在调用`configuration`我班级的一个非常冗长/复杂的函数`dbConfigure`。它对数据库结构进行了一些必要的更改。例如它

1.  丢弃外键
2.  删除主键
3.  删除自动增量字段

    它在删除之前保存这些键并以所需的顺序/位置重新创建

`conn`是一个`SqlConnection`已经打开的，除此之外我没有使用任何连接

`cmd``conn.CreateCommand()`除了这个，我在任何地方都没有使用任何命令吗

在整个过程中我从不关闭连接，但是 SqlDataReader 在`configuration`完成工作时会关闭功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T12:14:37.430

> 对数据库结构的更改不是事务性的，因此您不能回滚创建新表，例如

BS。大多数 DDL 是事务性的，可以回滚。只有涉及与非事务性组件（如文件系统，例如将新文件添加到数据库）交互的更改不能回滚。如果在活动事务中调用任何非事务性 DDL，也会非常明确地引发异常。

添加和修改表是非常明确的事务性的，可以通过一个示例轻松说明：

```
begin transaction;
create table foo (a int);
select * from sys.tables where object_id = object_id('foo');
rollback;
select * from sys.tables where object_id = object_id('foo'); 
```

因此问题在于 OP 缺少代码，未发布的部分。

作为一般评论，应尽可能使用 System.Transactions （考虑到[默认构造函数已损坏](http://blogs.msdn.com/b/dbrowne/archive/2010/05/21/using-new-transactionscope-considered-harmful.aspx)）。如果使用 SqlConnection.BeginTransaction 最好还是依赖 IDisposable：

```
using (SqlTransaction trn = conn.BeginTransaction())
{
   ...
   trn.Commit ();
} 
```

System.Transactions 应该受到青睐，因为它们不依赖于代码规则，事务范围内的任何代码 SqlClient 都将自动注册。

顺便说一句，配置函数在错误时引发，而不是返回 false。

关于潜在的真正问题：如何处理无法在单个事务中注册的冗长、复杂的迁移（例如，它可能会生成太多日志）。答案是唯一可行的选择是在迁移开始时进行数据库备份，如果迁移失败，则从该备份中恢复。为每个迁移操作提供手动、*经过测试和可靠*的补偿操作以撤消迁移的替代方法非常困难、容易出错，并且最终是不必要的，因为从备份恢复非常简单且可证明是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:56:59.517

这可以通过使用 TransactionScope 来完成，而不是在您的代码中创建 SqlTransaction。像这样的东西：

```
using (TransactionScope transaction = new TransactionScope())
{
    ...perform your database action here

    scope.Complete()
} 
```

# sql - if conditions in where clause

> ID：13396985
> 
> 赞同：1
> 
> 时间：2012-11-15T11:51:31.313
> 
> 标签：sql, conditional-statements

I want to retrieve the columns from the table., depending on the conditions., what I can use.

For example, I' ve fields namely, add order comments, cancel order comments, postpone order comments, action(add, cancel, postpone) and amount received(Y/N)

Now I've to fetch columns add order comments, cancel order comments, postpone order comments depending on action and amount received.,

```
if(action='add' and amount received='Y')
then
i've to fetch add order comments column
elseif(action='postpone' and amount received='Y')
then
i've to fetch postpone order comments column
else (action='cancel')
then i've to fetch cancel order comments 
```

how to get this done in sql or plsql., I want this conditions in select statement

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:55:24.067

请注意，通过“sql 或 plsql”，我假设“sql”指的是 MS SQL Server 使用的 T-SQL。如果没有，请在您的语言中使用相应的等价物。

您需要使用[CASE (T-SQL)](http://msdn.microsoft.com/en-us/library/ms181765.aspx)语句（[相当于 PL-SQL](http://www.techonthenet.com/oracle/functions/case.php)）

例如，在 T-SQL 中：

```
SELECT OrderId AS OrderId
       CASE 
           WHEN Action = 'add' AND amountRcd = 'Y' THEN addOrderComment
           WHEN Action = 'postpont' AND amountRcd = 'Y' THEN postponeOrderComment
           WHEN Action = 'cancel' THEN cancelOrderComment 
           ELSE 'Unrecognised action'
       END AS Comment
FROM tblOrders 
```

另请注意，在您给出的规则中，如果该`amountRcd`字段不是`Y`，那么您将获得“无法识别的操作”作为评论。我认为您可能需要澄清您的规则以防止这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:55:57.003

尝试这个

```
select order comment case when action ='add' 
     and amount received ='y'
  else select postpone order comments when action ='postpone'
    and amount received='y'
  else select cancel when action ='cancel' end 
  from table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:03:39.777

如果我正确理解了您的问题，那么实现此目的的另一种方法是执行三个单独的查询，然后将它们合并在一起。

```
select orderID as OrderID, addOrderComments as Comment
from tblOrders
where Action = 'add' AND amountRcd = 'Y'
union 
select orderID as OrderID, postponeOrderComment as Comment
from tblOrders
where Action = 'postpone' AND amountRcd = 'Y'
union
select orderID as OrderID, cancelOrderComment as Comment
from tblOrders
where Action = 'cancel' 
```

# java - Quartz scheduling

> ID：13396986
> 
> 赞同：1
> 
> 时间：2012-11-15T11:51:35.033
> 
> 标签：java, quartz-scheduler, scheduler

I have to schedule a task on every 4 months, starting from november 1st, using quartz scheduler. I was using `cronExpression` for the same. But `cronExpression` will reset every year. So my task will execute in November, January, may etc. But I want it to be executed on November, march, july etc. Also, the same kind of problem exists while scheduling every 2 and more days in a month,it will reset in the next month. That is the next month the job will run on the 1st day. How to solve this issue? Example code is given below.

Cron format 0 0 12 1 */4 ? * Start time Thursday, November 15, 2012 11:44 AM

1.  Tuesday, January 1, 2013 12:00 PM
2.  Wednesday, May 1, 2013 12:00 PM
3.  Sunday, September 1, 2013 12:00 PM
4.  Wednesday, January 1, 2014 12:00 PM
5.  Thursday, May 1, 2014 12:00 PM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:01:24.823

只需将您的 cron 表达式更改为：

```
0 0 12 1 3,7,11 ? * 
```

应该是这样的。:-)

# cucumber - Is it possible to mark a cucumber test as pending in real time?

> ID：13396987
> 
> 赞同：0
> 
> 时间：2012-11-15T11:51:34.737
> 
> 标签：cucumber

We've got a lot of test cases that require specific data to be in the environment but the environment is not properly populated a lot of times.

Right now we're failing those tests but I was thinking about running them and marking them as 'pending' instead if the data is not there, so then it's easy to just run those in isolation.

Is this somehow possible? How could I stop the execution of the cucumber test so that it's reported as pending (or any other status different to 'failed' or 'passed' could do if that exists).

Cheers!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:40:04.193

您可以只调用`pending`一个步骤定义来停止该场景的执行并将其标记为待处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:54:51.020

我不太清楚你所说的“实时”是什么意思，但总的来说是的。创建一个新的[自定义输出格式化程序](https://github.com/cucumber/cucumber/wiki/Custom-Formatters)，用于创建待处理测试的列表并重新运行它们。默认情况下可用的重新运行输出格式化程序几乎已经完成了您想要的操作。参见例如[这里](http://blog.crowdint.com/2011/08/22/auto-retry-failed-cucumber-tests.html)。它允许您重新运行失败的测试。

如果您查看重新运行格式化程序的[源代码](https://github.com/cucumber/cucumber/blob/master/lib/cucumber/formatter/rerun.rb)，它具有以下内容：

```
def step_name(keyword, step_match, status, source_indent, background, file_colon_line)
        @rerun = true if [:failed, :pending, :undefined].index(status)
end 
```

只需创建您自己的自定义格式化程序，该格式化程序仅将带有 :pending 状态的测试标记为重新运行。您总是可以在测试中将某些内容标记为待处理，请参阅例如问题[How do you mark a Cucumber Scenario as Pending](https://stackoverflow.com/questions/3064078/how-do-you-mark-a-cucumber-scenario-as-pending)

# docx - Modify docx with script

> ID：13396988
> 
> 赞同：0
> 
> 时间：2012-11-15T11:51:39.177
> 
> 标签：docx, pandoc

Best way to modify generated docx document with scripting language?

I thought about Python/Ruby or maybe something from MS --- hmmm VB.Script? PowerShell?

I don't want to do that in MS's tech. If its really super easy with Microsoft's technologies, then ok, I could try, but if not, Python/Ruby would be better.

Pandoc gives me some errors during conversion docx->*, and the other way around (simple.md -> *.docx), the output is unreadable in MS Word 2013 (file corrupted or something like that).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T05:13:53.430

这里有一个用于本地创建和操作 docx 文件的 python[库](https://github.com/mikemaccana/python-docx)。

就我个人而言，我会选择另一种非保护性格式，例如 rst 或 latex，然后使用 pandoc 转换为其他需要的格式。请记住，.docx 格式**仅**适用于 MS-Word，并且仅适用于最新版本。我已经使用 pandoc 从 .rst 文件成功转换为 docx、html 和 pdf。

您可能还想查看 docutils 以了解生成文档的纯 Python 方式。

# php - Add thumbnail to search results ONLY if the thumbnail is available?

> ID：13396989
> 
> 赞同：1
> 
> 时间：2012-11-15T11:51:40.610
> 
> 标签：php, wordpress, search, thumbnails

I currently have the `<?php the_post_thumbnail('post-thumbnail', array( 'class' => "search-thumb attachment-post-thumbnail")); ?>` inside of a div that holds the Search Result Title, and Excerpt. What I'm trying to achieve is `ONLY` adding the thumbnail if the post has it available.

My reason for this is because adding a thumbnail will make the div's height larger. Let's say the div with the thumbnail is 150px in height. I'd like to eliminate the height and have the div fit ONLY the text if the search result has no thumbnail.

**HTML within search.php//**

```
<?php get_header(); ?>

<div id="container" class="clearfix">
<div id="content-wrap">

<h1 class="heading1">Search Results</h1>
<div class="br"></div>

<div class="clear"></div>
<h2><?php echo 'Items Found ' . $wp_query->found_posts; ?></h2>
<div class="clear"></div>

<?php if(have_posts()): ?> <?php while(have_posts()) : the_post(); ?>

    <div class="s-res">
    <h3><a href="<?php the_permalink() ?>" rel="bookmark"><?php the_title(); ?></a></h3>
    <div class="search-thumb">
            <?php the_post_thumbnail('post-thumbnail', array( 'class'   => "search-thumb attachment-post-thumbnail")); ?>
        </div>
    <?php echo str_replace('[...]', '', get_the_excerpt()); ?>
    </div>

    <?php endwhile; ?>
    <?php else : ?>
    <i><?php _e('Sorry, but nothing matched your search criteria.<br> Please try again with different keywords.'); ?></i>
    <?php endif; ?>

</div>
</div>

<?php get_footer(); ?> 
```

**CSS to show height ect//**

```
.s-res {
    height: 150px;
    margin-bottom: 10px;
}

img.search-thumb {
    float: left;
    background: url(images/diag_lines.png) repeat;
    height: 100px;
    padding: 10px;
} 
```

**SCREENSHOT//**

[![screenshot](../Images/4a57d5904a563ca987e26292a4ba4b4c.png)](https://i.stack.imgur.com/kltqg.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:48:27.160

只需将缩略图 div 包装在`if ( has_post_thumbnail() ) {...`条件块中即可。当您使用该函数时，您的代码应如下所示：

```
<?php get_header(); ?>

<div id="container" class="clearfix">
<div id="content-wrap">

<h1 class="heading1">Search Results</h1>
<div class="br"></div>

<div class="clear"></div>
<h2><?php echo 'Items Found ' . $wp_query->found_posts; ?></h2>
<div class="clear"></div>

<?php if(have_posts()): ?> <?php while(have_posts()) : the_post(); ?>

    <div class="s-res">
    <h3><a href="<?php the_permalink() ?>" rel="bookmark"><?php the_title(); ?></a></h3>
    <?php if ( has_post_thumbnail() ): ?>
        <div class="search-thumb">
            <?php the_post_thumbnail('post-thumbnail', array( 'class'   => "search-thumb attachment-post-thumbnail")); ?>
        </div>
    <?php endif ?>
    <?php echo str_replace('[...]', '', get_the_excerpt()); ?>
    </div>

    <?php endwhile; ?>
    <?php else : ?>
    <i><?php _e('Sorry, but nothing matched your search criteria.<br> Please try again with different keywords.'); ?></i>
    <?php endif; ?>

</div>
</div>

<?php get_footer(); ?> 
```

我建议您在提出问题之前先进行快速的[Google](http://bit.ly/T3ak73)搜索；）这个功能很容易找到，此外 WordPress 有一个很好的代码文档，所以您很有可能找到答案你的大部分问题都在那里。

# java - GWTP：关闭演示者后从未调用过 onUnbind()

> ID：13396992
> 
> 赞同：0
> 
> 时间：2012-11-15T11:51:42.770
> 
> 标签：java, gwt, binding, event-handling, gwtp

我有一个 GWTP MyPresenter，它在 onBind() 处注册了一个处理程序，它运行良好。问题是当我使用浏览器上的返回箭头离开演示者时。永远不会调用 onUnbind() （我尝试使用覆盖该方法的断点，但从未执行过）。这样这个处理程序就永远不会取消注册。怎么了？谢谢。

```
public class MyPresenter extends
    PresenterWidget<ViewDiagramPresenter.MyView> {
    [...]

    @Override
    protected void onBind() {
        super.onBind();
        registerHandler(getEventBus().addHandler(myEvent.getType(), myHandler));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:50:29.457

我记得`onUnBind()`在隐藏时不会调用`Presenter`它，这会触发该`onHide()`方法。具体来说，我认为`onUnBind()`应该手动调用 - 你可以例如。如果您覆盖它，请链接它`onHide()`。

希望有帮助。

干杯，

# ios - ZXing 多条条码扫描

> ID：13396995
> 
> 赞同：0
> 
> 时间：2012-11-15T11:51:53.783
> 
> 标签：ios, zxing, barcode-scanner

我找到了这个库[https://github.com/TheLevelUp/ZXingObjC](https://github.com/TheLevelUp/ZXingObjC)，它是 ZXing 到 Objective-C 的一个端口，支持多个条码扫描。我需要一个应用程序，所以我试图让它工作，但是当我传递带有多个条形码的图像时它没有检测到任何东西这是我正在使用的代码

```
CGImageRef imageToDecode = self.imgn.image.CGImage;  // Given a CGImage in which we are looking for barcodes

    ZXLuminanceSource* source = [[[ZXCGImageLuminanceSource alloc] initWithCGImage:imageToDecode] autorelease];
    ZXBinaryBitmap* bitmap = [ZXBinaryBitmap binaryBitmapWithBinarizer:[ZXHybridBinarizer binarizerWithSource:source]];

    NSError* error = nil;

    ZXDecodeHints* hints = [ZXDecodeHints hints];

    ZXMultiFormatReader* reader = [ZXMultiFormatReader reader];
    ZXGenericMultipleBarcodeReader* multi = [[ZXGenericMultipleBarcodeReader alloc] initWithDelegate:reader];
   NSArray * result = [multi decodeMultiple:bitmap hints:hints error:&error]; 
```

这将返回一个 nil 数组，并且错误包含“未找到条形码”错误。当我只使用带有一个条形码的 MultiFormatReader 时，它可以，但是当我添加一张带有多个相同条形码的图片时，MultiFormatReader 可以很好地识别它没有检测到任何东西 谁能给我一个线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-09T08:20:23.843

花了 4 个月的时间才得到审查，但对此的修复已经在 master 上。

+信息：[https ://github.com/TheLevelUp/ZXingObjC/pull/235](https://github.com/TheLevelUp/ZXingObjC/pull/235)

# .net - 为什么 .net 4.5 未显示在注册表中

> ID：13396997
> 
> 赞同：0
> 
> 时间：2012-11-15T11:51:58.213
> 
> 标签：.net, registry, .net-4.5

为什么 .net 版本（如果已安装）没有像其他版本一样显示在注册表中？

`HKLM / Software / Microsoft`安装了 .net 4.5 但没有 4.5 版的注册表

![.net 4.5 不在注册表中](../Images/5d1079bfc1393b456e109c3853df4c00.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:54:53.910

[.NET 4.5 是 4.0 的就地替代品](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)。

这就是你所看到的。

这意味着对于大多数意图和目的而言，4.5*就是*4.0。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T11:55:13.703

您将在 MSDN 上找到一些关于此的注释：http: [//msdn.microsoft.com/en-us/library/hh925568.aspx](http://msdn.microsoft.com/en-us/library/hh925568.aspx)

# asp.net-mvc - MVC 路由 - 混合 Api 和视图类型控制器

> ID：13396998
> 
> 赞同：0
> 
> 时间：2012-11-15T11:52:02.147
> 
> 标签：asp.net-mvc, routes, asp.net-web-api

我有一个 WebAPI 项目，它还使用 MCV.Explorer 库提供了一个文档页面，我无法理解如何向该控制器添加路由。

Api 控制器使用此路由按预期工作：

```
routes.MapHttpRoute(
  name: "DefaultApi",
  routeTemplate: "{controller}/{id}",
  defaults: new { id = RouteParameter.Optional }
); 
```

我在 API 应用程序的“Docs”目录中有一个 docs 控制器，如下所示：

```
[System.Web.Http.AllowAnonymous]
public class DocsController : Controller
{
  [System.Web.Mvc.HttpGet]
  public ActionResult Index()
  {
    var apiExplorer = GlobalConfiguration.Configuration.Services.GetApiExplorer();
    return View(apiExplorer);
  }
} 
```

我正在尝试通过以下方式路由到它：

```
routes.MapRoute(
  name: "Docs",
  url: "Docs/",
  defaults: new { controller = "Docs", action = "Index" }
); 
```

该站点只是错误地抱怨没有启用目录浏览。我猜由于控制器类不在 Controllers 目录中而发生了一些事情，但我不确定这方面。

我在 Home ApiController 上也有一个简单的方法（索引），目前返回几个链接。您将如何设置路由来处理 ApiController 的 home\index 路由？

```
[System.Web.Http.AllowAnonymous]
public class HomeController : ApiController
{
  [HttpGet]
  public Link[] Index()
  {
    return new Link[] 
    { 
      new SelfLink(Request.RequestUri.AbsoluteUri, "mood-api-root"),
      new Link("auth", @"Account/Login/", "authenticate")
    };
  }
} 
```

任何指针都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:36:27.810

我最终选择了使用 NuGet 包切换到使用 AttributeRouting 的路线（没有双关语）：

```
Install-Package AttributeRouting.Webapi 
```

切换到这个，我没有回头。非常好的路由解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:11:53.087

我不明白为什么您的`/Docs`路线无法正常工作，但很可能是没有正确注册。查看[此 Web API 示例网站文档](http://phillysnug.apphb.com/help)的[配置代码](https://github.com/SixtoSaez/PhillySNUG)。该网站将 ASP.NET MVC 和 Web API 功能集成到一个项目中。它使用 ASP.NET MVC 区域，但即使您不使用区域，路由代码也应该相似。