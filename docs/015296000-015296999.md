# StackOverflow 问答 15296000-15296999

# html - 是否可以检测用户的 Flash Player 是否支持 wmode？

> ID：15296000
> 
> 赞同：0
> 
> 时间：2013-03-08T14:15:53.373
> 
> 标签：html, flash, swfobject, wmode

我目前在使用 SWF 作为背景的网站时遇到问题。但是，已经确定当在一台特定的 Android 设备上查看网站时，SWF 的分层被忽略，并被强制置于顶部。

经过一番研究，我发现这很可能与 Adob​​e 官方网站上的以下注释有关：

> 注意：仅某些浏览器/Flash Player 版本组合支持 WMODE 参数。如果不支持 WMODE 参数，则 SWF 文件始终显示在顶部。有关详细信息，请参阅在 SWF 文件中创建透明背景

来源：[http ://helpx.adobe.com/x-productkb/multi/swf-file-ignores-stacking-order.html](http://helpx.adobe.com/x-productkb/multi/swf-file-ignores-stacking-order.html)

所以我想知道是否可以检测到用户的 Flash Player 是否支持 WMODE 参数，如果不支持，我可以隐藏 SWF 以不显示？

# python - Mongodb 使用烧瓶 mongokit 扩展创建索引

> ID：15296004
> 
> 赞同：0
> 
> 时间：2013-03-08T14:16:08.697
> 
> 标签：python, indexing, flask, pymongo, mongokit

我正在尝试使用 flask-mongokit 连接创建索引：

```
db = MongoKit(app)
db.mydatabase.users.create_index("email", unique=True) 
```

但它向我抛出了这个错误：

```
...
host=ctx.app.config.get('MONGODB_HOST'),
AttributeError: 'NoneType' object has no attribute 'app' 
```

如果我直接使用 Pymongo：

```
conn = MongoClient()
conn.mydatabase.users.create_index("email", unique=True) 
```

一切正常！

问题是我不想管理 pymongo 的连接，而是使用由 mongokit 扩展创建的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:50:44.047

我找到了解决方案，似乎**mongokit 从 7.x 版本开始不支持创建索引**，他们真的应该从官方文档中删除索引创建。

[https://github.com/namlook/mongokit/issues/98](https://github.com/namlook/mongokit/issues/98)

# audio - SDL_AudioSpec中的format参数是什么意思？

> ID：15296010
> 
> 赞同：1
> 
> 时间：2013-03-08T14:16:37.083
> 
> 标签：audio, sdl

要使用 SDL 播放音频，您必须提供一个 SDL_AudioSpec 结构来打开您的音频设备，这里有一个名为“格式”的参数。这是什么？它与音频设备或音频文件有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:03:29.753

正如[文档](http://www.libsdl.org/docs/html/sdlaudiospec.html)（您应该阅读）所说，格式指定音频数据格式。

例如

```
AUDIO_U16MSB -> Unsigned 16-bit big-endian samples 
```

或者

```
AUDIO_U8 -> Unsigned 8-bit samples 
```

格式描述了存储什么类型的数据，char、unsigned char、short 等...，以便程序能够正确解析。

您可以在调用时设置您喜欢的格式[`SDL_OpenAudio()`](http://www.libsdl.org/docs/html/sdlopenaudio.html)。如果首选格式不可用，则将设置更改为硬件设置

引用文档：

*SDL_OpenAudio 从传递给函数的所需 SDL_AudioSpec 结构中读取这些字段，并尝试找到与您所需匹配的音频配置。如上所述，如果获得的参数为 NULL，则 SDL 会在播放时将所需的音频设置转换为硬件设置。*

# php - PHP代码和2同时调用同一个查询

> ID：15296013
> 
> 赞同：1
> 
> 时间：2013-03-08T14:16:45.057
> 
> 标签：php, while-loop

我需要帮助。我的数据库中有一些信息，我想使用 Google 图表脚本在 2 个图表中显示。

这两个脚本都有效，但当我在同一页面中使用这两个脚本时无效。我敢打赌这是两个相等的问题，因为我需要显示相同的信息。如果我在第二个循环开始工作时删除第一个，但如果没有，第一个就可以工作。

该应用程序运行良好，因为如果我手动对值进行硬编码并且没有 while 运行良好。

**这是代码：**

```
<!-- First Chart start here: -->

<script type="text/javascript">
    google.load("visualization", "1", {
        packages: ["corechart"]
    });
    google.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Formato', 'Cantidad'], <? php

            //da problema si hay 2 while
            while ($DatRDV = mysql_fetch_array($nrollos)) {
                echo "['".$DatRDV['Formato'].
                "',".$DatRDV['nRollos'].
                "],";
            } ?> ]);

        var options = {
            title: 'Formato de Rollos'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    }
</script>

<!-- Second chart start here: -->

<script type="text/javascript">
    function drawVisualization() {
        // Create and populate the data table.
        var JSONObject = {
            cols: [{
                id: 'format',
                label: 'Formato',
                type: 'string'
            }, {
                id: 'cantidad',
                label: 'Cantidades',
                type: 'number'
            }],
            rows: [

            <? php
            while ($DatRDV = mysql_fetch_array($nrollos)) {
                echo "{c:[{v: '".$DatRDV['Formato'].
                "'}, {v: ".$DatRDV['nRollos'].
                "}]},";
            } ?> ]
        };

        var data = new google.visualization.DataTable(JSONObject, 0.5);

        // Create and draw the visualization.
        visualization = new google.visualization.Table(document.getElementById('table'));
        visualization.draw(data, {
            'allowHtml': true
        });
    }

    google.setOnLoadCallback(drawVisualization);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:28:23.837

尝试;

```
mysql_data_seek($nrollos,0); 
```

在第二个循环之前

# c# - UIElement 移动期间的奇怪行为。为什么？

> ID：15296026
> 
> 赞同：2
> 
> 时间：2013-03-08T14:17:32.943
> 
> 标签：c#, .net, wpf, uielement, wpf-positioning

我在理解（和修复）我遇到的错误时遇到了一些麻烦。

我的 UI 如下图所示：

![](../Images/21e753d9ed3a6586d8bee17e48c46680.png)

所有这些浅蓝色区域都是画布，它们是可移动的。这就是我的问题所在。左上角的可以毫无问题地移动。另外两个，当我拖动它们时，消失了。我无法解释为什么。

这是移动元素的代码：

```
// this is all inside the MouseMove event handler function

// If there is no dragged element
if (this.DraggedElement == null || !this.IsDragInProgress)
    return;

/*
 * Calculating the new position for the dragged element
 */

// Mouse current position
Point cursor = e.GetPosition(this);

double xMove = 0;
double yMove = 0;

// Movement detected
if (cursor != MouseClickLocation)
{
    // Moving on the x-axis and y-axis
    xMove = cursor.X - MouseClickLocation.X;
    yMove = cursor.Y - MouseClickLocation.Y;

    // Actually moving the element
    if (this.ConstrainToBounds(this.DraggedElement, mainWindow))
    {
        TranslateTransform translate = new TranslateTransform(xMove, yMove);

        this.DraggedElement.RenderTransform = translate;
    }
} 
```

ConstrainToBounds() 方法的代码应该不允许我将任何 Canvas 移动到窗口边框之外（它非常适用于左上角的 Canvas，但不适用于其他 Canvas），如下所示：

```
private Boolean ConstrainToBounds(Canvas element, UIElement container)
{
    try
    {
        Boolean respects = true;

        // Values used to reset the element position to a proper location
        double xReset = 0;
        double yReset = 0;

        // Left x-axis constraint
        if (element.TranslatePoint(new Point(), container).X <= new Point(0, 0).X)
        {
            respects = false;

            // Get elements' current position and adjust
            xReset = element.TranslatePoint(new Point(), container).X + 1;
            yReset = element.TranslatePoint(new Point(), container).Y;

            TranslateTransform translate = new TranslateTransform(xReset, yReset);

            element.RenderTransform = translate;
        }

        // Right x-axis constraint
        if (element.TranslatePoint(new Point(), container).X + element.RenderSize.Width >= container.RenderSize.Width)
        {
            respects = false;

            // Get elements' current position and adjust
            xReset = element.TranslatePoint(new Point(), container).X - 1;
            yReset = element.TranslatePoint(new Point(), container).Y;

            TranslateTransform translate = new TranslateTransform(xReset, yReset);

            element.RenderTransform = translate;
        }

        // Top y-axis constraint
        if (element.TranslatePoint(new Point(), container).Y <= new Point(0, 0).Y)
        {
            respects = false;

            // Get elements' current position and adjust
            xReset = element.TranslatePoint(new Point(), container).X;
            yReset = element.TranslatePoint(new Point(), container).Y + 1;

            TranslateTransform translate = new TranslateTransform(xReset, yReset);

            element.RenderTransform = translate;
        }

        // Bottom y-axis constraint
        if (element.TranslatePoint(new Point(), container).Y + element.RenderSize.Height >= container.RenderSize.Height)
        {
            respects = false;

            // Get elements' current position and adjust
            xReset = element.TranslatePoint(new Point(), container).X;
            yReset = element.TranslatePoint(new Point(), container).Y - 1;

            TranslateTransform translate = new TranslateTransform(xReset, yReset);

            element.RenderTransform = translate;
        }

        return respects;
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

Edit_1：从 MainWindow.xaml 添加代码：

```
<Window 
Name="mainWindow"
x:Class="WPF_TestApp.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="480" Width="555">

<Grid Name="mainGrid">
    <Canvas Grid.Row="0" 
            Grid.Column="0" 
            Background="AliceBlue" 
            Name="LeftTop"
            MouseDown="onMouseDown"
            MouseMove="onMouseMove" 
            MouseUp="onMouseUp" >

        <Ellipse Fill="Blue"
       Width="100"
       Height="100"/>
    </Canvas>

    <Canvas Grid.Row="0" 
            Grid.Column="2" 
            Background="AliceBlue" 
            Name="RightTop"
            MouseDown="onMouseDown"
            MouseMove="onMouseMove"
            MouseUp="onMouseUp">
        <Ellipse Fill="Blue"
       Width="100"
       Height="100"/>
    </Canvas>

    <Label Grid.Row="2" 
            Grid.Column="0"  
            Name="LeftBottom">
    </Label>

    <Canvas Grid.Row="2" 
            Grid.Column="3" 
            Background="AliceBlue" 
            Name="RightBottom"
            MouseDown="onMouseDown"
            MouseMove="onMouseMove"
            MouseUp="onMouseUp">
        <Ellipse Fill="Blue"
       Width="100"
       Height="100"/>
    </Canvas>

    <Grid.RowDefinitions>
        <RowDefinition Height="200" />
        <RowDefinition Height="50" />
        <RowDefinition Height="200" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="250" />
        <ColumnDefinition Width="50" />
        <ColumnDefinition Width="250" />
    </Grid.ColumnDefinitions>
</Grid>
</Window> 
```

Edit_2：所以，我发现当我移动右上角的画布时，它实际上移动到了视图之外（在位置 600,0）。目前试图了解为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:50:27.623

而不是使用渲染转换，可能更容易更新 Canvas 的`Margin`属性：

```
if (cursor != MouseClickLocation)
{
    // Moving on the x-axis and y-axis
    xMove = cursor.X - MouseClickLocation.X;
    yMove = cursor.Y - MouseClickLocation.Y;

    // Actually moving the element
    this.DraggedElement.Margin = this.CalculateNewPosition(this.DraggedElement, mainWindow, xMove, yMove);
} 
```

哪里`CalculateNewPosition`可能看起来像这样（警告，未经测试）：

```
private Thickness CalculateNewPosition(Canvas element, UIElement container, double translationX, double translationY)
{
    Thickness currentPosition = element.Margin;
    Thickness newPosition = new Thickness(currentPosition.Left + translationX, currentPosition.Top + translationY, 0, 0);

    int containerWidth = container.ActualWidth;
    int containerHeight = container.ActualHeight;
    int elementWidth = element.ActualWidth;
    int elementHeight = element.ActualHeight;

    if (newPosition.Left < 0)
        newPosition.Left = 0;
    else if (newPosition.Left + elementWidth > containerWidth)
        newPosition.Left = containerWidth - elementWidth;

    if (newPosition.Top < 0)
        newPosition.Top = 0;
    else if (newPosition.Top + elementHeight > containerHeight)
        newPosition.Top = containerHeight - elementHeight;

    return newPosition;
} 
```

我不确定*为什么*您的代码不适用于其他圈子。可能与边界检查有关，例如：

```
if (element.TranslatePoint(new Point(), container).X <= new Point(0, 0).X)
if (element.TranslatePoint(new Point(), container).X + element.RenderSize.Width >= container.RenderSize.Width) 
```

假设`new Point(0,0)`和`TranslatePoint`正在返回*相*对于每个包含网格单元的点。我不确定这个假设是否正确；一个（或两个）比较对于应用程序或类似的东西可能是绝对的。仅通过粗略检查您的代码很难准确确定；您将需要运行调试器并检查您的值并查看它们与您期望的不同之处。

# twitter - 是否有任何已知的 API 或与 Twitter Vine 的连接？

> ID：15296028
> 
> 赞同：17
> 
> 时间：2013-03-08T14:17:34.183
> 
> 标签：twitter, vine

通过它自己的 api 还是通过 twitter api？

有几个应用程序：http: [//www.vineroulette.com/](http://www.vineroulette.com/)和[http://vinepeek.com/](http://vinepeek.com/)有没有人知道他们如何获得葡萄藤饲料？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-09T13:06:32.333

好吧，根据 twitter 支持中的一些请求，暂时不是：[https ://dev.twitter.com/discussions/14721](https://dev.twitter.com/discussions/14721)

我现在唯一能找到的是推文中使用的卡片。例如：http: [//vine.co/v/bwBYItOUKrw/card](http://vine.co/v/bwBYItOUKrw/card)

## 我自己的搜索

我花了一些时间来看看 Vine 在 iOS 上使用 Charles 的请求类型。

首先，我检查了 Tweetbot 以了解它如何为其提要检索 Vine 预览图像。一个简单`GET`的 Vine 视频检索标头元数据并获得预览：

```
<meta property="twitter:image" content="https://vines.s3.amazonaws.com/thumbs/8800194F-D323-40F2-8AD2-7C19EA2505A3-3974-000000D33D0303AB_1.0.6.mp4.jpg?versionId=PZAXllJkKvo4FGk47Mb4JfM7yADdF5eC"> 
```

这是：

![](../Images/fcfcb9f52f419f4077478adef3cc9ea3.png)

在同一个元中，您可以检索视频流：

```
<meta property="twitter:player:stream" content="https://vines.s3.amazonaws.com/videos/8800194F-D323-40F2-8AD2-7C19EA2505A3-3974-000000D33D0303AB_1.0.6.mp4?versionId=gqt.N2z3cdss2nzFam5zam4QR9sje_vC"> 
```

然后我打开了 Vine 应用程序。它向`https://api.vineapp.com/`. 由于所有内容都已发送`https`，因此我只能看到加密的请求/响应。

## 更有趣的事

使用 api url，我在 Google 上搜索并找到了有趣的东西！一个人通过充当中间人来查看真实的请求 URL，从而[更好地挖掘 Vine请求。](http://www.gironda.org/2013/02/25/digging-in-the-vineyard-part-1.html)有3篇文章。最后，这家伙使用自己的客户端成功地在 Vine 上发布了一段视频。

之后，我查看了 Github，发现了一个使用 Python[*的非官方*Vine API 。](https://github.com/starlock/vino/wiki/API-Reference)人们似乎使用前人的工作来确定 API 完整 url。

这里是这个非官方 API[的 PHP 内置接口。](https://github.com/FaridW/Vine)

我认为你有足够的东西来开始你自己的 VineRoulette :)

# javascript - JavaScript 如果数字 < 10 添加一个“0”

> ID：15296031
> 
> 赞同：1
> 
> 时间：2013-03-08T14:17:46.897
> 
> 标签：javascript

我用 JavaScript 做了一个简单的倒计时，在这里你可以看到一个例子：http: [//jsfiddle.net/PCwx8/](http://jsfiddle.net/PCwx8/)

它只是算到今天的午夜。我的问题是我只是希望 JavaScript 在小于 10 的数字前面加上一个“0”。我有一个想法：

```
if (i<10)
{
    i="0" + i;
 }
return i; 
```

但我不知道它是一个整数还是一个数字？感谢您的帮助，我通常与JavaScript无关，所以请理解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:25:53.323

您可以编写和使用这样的函数：

```
function addZeroIfNeeded(val){
    return val < 10 ? "0" + val : val;   
} 
```

检查[http://jsfiddle.net/VafZ7/](http://jsfiddle.net/VafZ7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:23:19.063

使用`("0" + seconds).slice(-2)`.

见[演示](http://jsfiddle.net/PCwx8/2/)。

```
document.getElementById("seconds").innerHTML= ("0" + seconds).slice(-2);
document.getElementById("hours").innerHTML= ("0" + hours).slice(-2);
document.getElementById("days").innerHTML= ("0" + days).slice(-2);
document.getElementById("minutes").innerHTML= ("0" + minutes).slice(-2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:28:27.833

给你：http: [//jsfiddle.net/PCwx8/3/](http://jsfiddle.net/PCwx8/3/)

```
var seconds = 60-aseconds;
if(parseInt(seconds,10) <10){
    seconds = "0"+seconds;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:23:51.873

JS 几乎肯定会将 解析`"0"`为整数并将 0 添加到`i`. 有点麻烦但工作如下：

```
var i = 0;
if (i < 10) {
    i = "0" + ("" + i);
}
return i; 
```

诀窍是，确保这`i`将成为一个字符串。类似于使整数成为字符串`numericalStringvar * 1`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T14:29:05.047

不确定问题是什么，但是您可以用类似的方法进行概括：

```
function lead(str, num) {
    return (str + num).slice(-str.length);
}

function leadzero(num) {
    return lead("00", num);
}

console.log(leadzero(2)) // 02
console.log(leadzero(10)) // 10 
```

当然，如果你在一个支持[ECMAScript5 的 bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)的环境中，`leadzero`可以这样完成：

```
var leadzero = lead.bind(null, "00"); 
```

# c - printf C 中十六进制值的最后一个字节

> ID：15296032
> 
> 赞同：2
> 
> 时间：2013-03-08T14:17:51.067
> 
> 标签：c

我有一个简单的问题。代码真的很短，所以我把它贴在这里

```
#include <stdio.h>
int main(int argc, const char * argv[])
{

    long int p;

    printf("FYI: address of first local varaible of main() on the function stack:%p\n",&p);
    printf("Enter start address <hex notation> of dump:");
    scanf("%lx",&p);

    char * q;
    q = (char*)p;

    printf("%x\n",*q);

    return 0;
} 
```

最后一个 printf 的结果，例如是 ffffffc8。如果我只想保留最后两个怎么办：c8\. 我怎样才能做到这一点？我试过了： `printf("%2x",*q);` 但 `printf("%x",*q % 256);` 都不管用。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T14:20:28.257

要打印十六进制的最低有效字节，`*q`您可以使用：

```
printf("%02x", *q & 0xFF); 
```

这当然假设`q`可以取消引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:21:19.710

首先转换为无符号：

```
unsigned char q = *(unsigned char *)(p);
printf("%02X", q); 
```

（否则，如果您`char`是有符号的，则可变参数默认提升将值转换为`int`，结果可能为负。）

# javascript - for in javascript 无法正常工作

> ID：15296033
> 
> 赞同：-1
> 
> 时间：2013-03-08T14:17:52.607
> 
> 标签：javascript, html, canvas

不知道怎么回事 这个函数应该为数组中的每个名字放一个新玩家

```
function newplayer() {
var y = data.playerY;   
var x = data.playerX;

var player ="";
var players={name1:"Jao",name2:"lucas",name3:"pedro",name4:"jorge"}; 

for(var p in players)
{
    player = players[p];
    var xpos = (x-y)*tileH + mapX;
    var ypos = (x+y)*tileH/2+ mapY;

    ctx.drawImage(charImg[0],xpos,ypos-(charImg[0].height/2));  
    //ctx.fillText(player.name, xpos + 10, ypos - (charImg[0].height/2) - 5);
}

} 
```

编辑：设法改变代码 var player = player [p], for player = player [p];

obrigado vocês que me ajudarão inclusive Igor

对不起我的英语我来自巴西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:52:05.623

您似乎希望将播放器作为一组播放器访问。但是您使用的对象不是集合。

```
function newplayer() {
     var y = data.playerY;   
     var x = data.playerX;

     var players=[
            { name: "Jao" },
            { name: "lucas"},
            { name: "pedro"},
            { name:"jorge" }]; 

     for(var player in players)
     {
         var xpos = (x-y)*tileH + mapX;
         var ypos = (x+y)*tileH/2+ mapY;

         ctx.drawImage(charImg[0],xpos,ypos-(charImg[0].height/2));  
         ctx.fillText(player.name, xpos + 10, ypos - (charImg[0].height/2) - 5);
     }

} 
```

如果您不会在播放器上添加其他信息，那么您可以简单地将其设为字符串数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:24:36.630

我猜问题出在你注释掉的那一行？这个：

```
//ctx.fillText(player.name, xpos + 10, ypos - (charImg[0].height/2) - 5); 
```

因为否则你甚至不需要循环，因为你没有使用`player`or `p`。如果这是真的，那么问题`player.name`将是不确定的。考虑到您的对象和循环方式，`player`将保留玩家名称。所以：

```
ctx.fillText(player, xpos + 10, ypos - (charImg[0].height/2) - 5); 
```

# javascript - 如何制作动画标题以显示在手机和平 板电脑中？

> ID：15296035
> 
> 赞同：1
> 
> 时间：2013-03-08T14:17:56.097
> 
> 标签：javascript, android, jquery, html, ios

我在手机和平​​板电脑上的视图有问题，我希望横幅在手机上显示动画，我知道 flash 肯定不能解决这个问题，所以有什么替代方案可以让这成为可能，而且可能很长所以我认为GIF也行不通。

有任何想法吗？

提前谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:27:20.887

您可以使用普通的 UIImageView 动画方法、cocos2d 或 HTML5 为横幅制作动画。您也可以使用 CoreAnimation。如果您想了解如何为其设置动画，请在问题中添加一些细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:31:40.850

另一个适用于移动设备和桌面的绝佳选择是 WOW 滑块，它是一个 jquery 插件，您可以非常简单地添加到页面中：

[http://wowslider.com/](http://wowslider.com/)

如果您对如何实施幻灯片有具体问题，请回复以获取更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:22:56.513

使用`ImageView`并将 gif 文件拆分为几个部分，然后对其应用动画或[参考此](https://stackoverflow.com/questions/3660209/android-display-animated-gif)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:23:28.050

通过使用 jQuery 框架，您应该能够在 google 上找到各种可以帮助您制作标题动画的插件，即使在移动设备上也是如此。如果您学习了[jQuery API](http://api.jquery.com/)，您还可以在桌面和移动设备平台上为大多数 HTML 元素块制作动画。

# silverlight - Silverlight 图像不会在网络中显示

> ID：15296036
> 
> 赞同：0
> 
> 时间：2013-03-08T14:17:56.843
> 
> 标签：silverlight, silverlight-5.0

这是一个小问题，我有一个运行良好的 Silverlight 5 (VB) 应用程序，当我从我的 PC 运行它时，它会显示所有 3 个 png 图像。当应用程序被放到网络上时，它不会显示 png 图像。我为 png 文件选择的构建是资源？我检查了 XAP.zip 以查看 png 文件是否存在。我做了一些研究，发现我可能需要一些编码来使我能够在网络上启动并运行它们，不幸的是我所看到的一切都是在 C 中。我找到了这两段代码：

```
<Imagex:Name="myIamge"Source="../computer.JPG"></Image>

myIamge.Source = new BitmapImage(new Uri("../Image/computer.JPG", UriKind.Relative)); 
```

这两段代码是我需要的吗？

我需要他们两个一起吗？

有谁知道第二段代码从c到vb的转换

有没有人可以告诉我如何在silverlight VB中做到这一点

问候将

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:09:13.670

*   这两段代码是我需要的吗？

可能很难说，因为您没有向我们解释您将“computer.JPG”放在哪里

*   我需要他们两个一起吗？

不，如果您只显示此图像一次，之后再也不更改它，则不需要后面的代码。只需使用您的 xaml 声明。

因此，您所做的似乎非常正确：您的图像应声明为资源，并使用路径指定图像的位置，与使用图像的 XAML 文件进行比较。

因此，例如，如果声明位于 MainPage.xaml（到项目的根目录）中，并且您的图像位于 Image 文件夹中，则此声明是正确的。

```
<Image x:Name="myImage" Source="Image/computer.jpg"/> 
```

如果尽管如此，您看不到您的图像，我会建议您检查部署 xap 文件的网站，可能有一个错误解释了为什么图像无法显示（MIME 类型，.net 版本？...）

# c#-4.0 - GetByteCount(string) 是加法的吗？

> ID：15296039
> 
> 赞同：1
> 
> 时间：2013-03-08T14:18:00.423
> 
> 标签：c#-4.0, character-encoding

具体来说，如果

```
Encoding.UTF8.GetByteCount(stringA) + Encoding.UTF8.GetByteCount(stringB) = Encoding.UTF8.GetByteCount(stringA + stringB). 
```

总是正确的。（一些快速测试表明如此，但我不确定它是否在所有情况下都是如此）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:29:26.507

是的。存储`stringA + stringB`所需的字节数与 所需的字节数`stringA`加上 所需的字节数相同`stringB`。这是因为字符串在 .NET 中不是以 null 结尾的。

如果它们是空终止的，那么存储`stringA + stringB`所需的字节数将比所需的字节少一个字节`stringA`+ 所需的字节`stringB`，因为每个字符串都有一个空终止符，所以在第一种情况下你结合首先是字符串，删除第一个字符串的空终止符，而在第二个示例中，您也添加了两个空字节。

# c - XCode 说某事对于 C 程序来说可能是不安全的？它到底是什么意思？

> ID：15296048
> 
> 赞同：2
> 
> 时间：2013-03-08T14:18:28.060
> 
> 标签：c, xcode

假设我们在 C 中工作。

如果我继续这样做：

```
char *word;
word = "Hello friends";
printf(word); 
```

然后 XCode 告诉我，因为我没有使用字符串文字，所以我可能有一些可能不安全的东西。这是否意味着有机会破解我的程序？如果是这样，那怎么会发生？

或者，如果我这样做：

```
char *word;
word = "Hello friends";
printf("%s", word); 
```

然后 XCode 没有引发任何标志，我很好。究竟有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:26:40.580

第一个参数`printf`不是您要打印的字符串。这是一个格式字符串。它可以包含格式化指令，一旦与其他参数组合，就会产生打印的字符串。

您的第一个示例是[不受控制的格式字符串漏洞](http://en.wikipedia.org/wiki/Uncontrolled_format_string)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:22:08.507

问题是，在第一种情况下，如果`word`包含格式规范（`%d`、`%f`、`%s`等），那么`printf()`将假定这些值在堆栈上，但实际上它们不在，这可能导致崩溃。

如果您不关心格式，请使用`puts()`or代替。`fputs()`

# iphone - 通过在IOS上拖动在两点之间画一条直线

> ID：15296049
> 
> 赞同：1
> 
> 时间：2013-03-08T14:18:29.370
> 
> 标签：iphone, ios, drawrect

我的 UIVIew 中有两个方形图像。一旦我将手指从一个图像拖动到另一个图像，我想在它们之间画一条直线。

我已经处理`touchesMoved`了检查我的*touchLocation 何时*到达任一图像的框架的方法。*所以我已经处理了何时*开始绘制以及*在哪两点之间*的逻辑部分。

 *我只是不知道如何使用`(void)drawRect:(CGRect)rect`. 一方面，我在 drawRect 中添加了一个 NSlog，并编写了代码在两行之间画一条线，即使这没有发生。

我也检查了这个[问题](https://stackoverflow.com/questions/11050037/how-to-draw-automatic-line-between-two-tap-points-in-a-view-in-iphone)，但我想继续在多个点之间拖动和画线。

```
 - (void)drawRect:(CGRect)rect
{
    NSLog(@"Draw Rect Entered");
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    CGContextSetStrokeColorWithColor(context, [[UIColor blackColor]CGColor]);
    CGContextSetLineWidth(context, 1.0);
    CGContextMoveToPoint(context, 0, 0);
    CGContextAddLineToPoint(context, 20, 20);
    CGContextStrokePath(context);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:46:15.743

我遇到的两个问题可能会导致此问题：
1）确保您正在调用`setNeedsDisplay`主线程
2）如果您正在使用多个视图，请确保您正在调用`setNeedsDisplay`正确的视图。
使用一个视图很容易而忘记调用`setNeedsDisplay`父视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:34:16.037

为了使视图更新，您需要调用`-setNeedsDisplay`或`-setNeedsDisplayInRect:`在需要重绘的视图上。一旦确定需要画线，就应该在触摸处理程序中执行此操作。这将触发`-drawRect:`视图上的方法-您不`-drawRect`直接调用。有关更多信息，请阅读[`UIView`文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)。我不知道您是否希望您的线在创建后永久存在-如果有可能将其删除，我将添加一个`if`语句`-drawRect:`来由布尔值控制，以确定是否绘制线。然后，您可以在必要时轻松将其关闭。

根据您在下面的评论，我将创建一个 ivar 数组，在其中存储当前跟踪线的点，然后在它们中循环`-drawRect:`，使用核心图形函数一次绘制一条线。这样，每次重绘都会绘制新段和所有以前的段。由于`CGPoint`不是 obj-c 对象，您要么必须创建一个包装类，要么使用 obj-C++ 和`std::vector`. 您还可以使用固定大小的 C-Array，（您提到您正好有 10 个点）- 在这种情况下，您必须将未使用的坐标预设为定义为无效的任意值（例如 -500、-500）并添加如果遇到这些值，则不绘制线段的逻辑。

次要点-我不会对线坐标进行硬编码-相反，您可以从图像的`frame`属性中得出它们。这样，您的代码将更具可读性，并且在您更改图像或调整它们大小时不会中断。*

# objective-c - clang 的哪些编译选项会在 Objective C 和 Objective C++ 之间更改它们的默认值？

> ID：15296057
> 
> 赞同：4
> 
> 时间：2013-03-08T14:18:57.753
> 
> 标签：objective-c, exception, clang, objective-c++, compiler-options

我正在阅读[有关引用计数的 clang 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#exceptions)，其中说“在 Objective-C 中，ARC 默认情况下不是异常安全的”。它继续说：

> 可以使用选项编译程序`-fobjc-arc-exceptions`以启用这些选项，或者使用选项`-fno-objc-arc-exceptions`显式禁用它们，最后一个这样的参数“获胜”。在 Objective-C++ 中，`-fobjc-arc-exceptions`默认启用。

我很感兴趣。是否有任何其他编译器选项在 Objective-C 和 Objective-C++ 之间默认更改？

`*.mm`补充问题：在 Objective-C++ 模式（文件）而不是仅在 Objective-C 模式（ ）中用 clang 编译纯 Objective-C 代码有什么区别`*.m`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:53:41.043

最好的方法是记录clang将从所有这些c语言中输出的内容

这是我从 obj-c++ 编译中得到的一些东西

```
clang++ -fobjc-arc main.mm -v

/.../
-fblocks 
-fobjc-runtime=macosx-10.7.0 
-fobjc-dispatch-method=mixed 
-fobjc-default-synthesize-properties 
-fobjc-arc 
-fobjc-arc-cxxlib=libstdc++ 
-fobjc-arc-exceptions 
-fobjc-exceptions 
-fcxx-exceptions 
-fexceptions 
-fdiagnostics-show-option 
-fcolor-diagnostics 
   /.../ 
```

如您所见，这些输出可能会因您编译它的位置而异。但其中一些是常数。

您应该尝试不同的 c 系列文件，以确定它们各自的默认选项。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:51:24.007

回答您问题的第二部分：如果您在 Objective-C 模式而不是 Objective-C++ 模式下编译文件，您会从静态分析器 [ [1](http://clang-analyzer.llvm.org/dev_cxx.html) ] 获得更好的支持。我相信编译器通常也会生成更准确的警告（不使用静态分析器），但我无法找到/记住该信息的来源。

# datatable - 包含某些组件的工具提示，例如数据表或进度条，而不是文本

> ID：15296064
> 
> 赞同：0
> 
> 时间：2013-03-08T14:19:24.427
> 
> 标签：datatable, tooltip, wicket, popover

有什么方法可以使用工具提示，而不是文本，而是在其中放入一些组件，例如数据表、标签、面板或类似的？

像[这样](http://wicket.visural.net/examples/tooltips)的东西，但使用组件而不是文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:53:26.377

您可以将[jQuery UI Tooltip](http://jqueryui.com/tooltip/#custom-content)与自定义内容一起使用。

您可以将您想要的标记放在输出 html 的工具提示中，将其隐藏在 CSS 中并在 jquery ui 工具提示中引用它。

# ios - iOS TabbarViewController 隐藏标签栏

> ID：15296065
> 
> 赞同：24
> 
> 时间：2013-03-08T14:19:27.003
> 
> 标签：ios, uitabbarcontroller, tabbar

我有一个实现UITabbarViewController的视图控制器，我想隐藏标签栏并自己覆盖它，

```
self.tabBar.hidden = YES; 
```

标签栏消失了，但视图底部有一个空白区域（蓝色区域）。我不想要空白区域，我该如何解决？谢谢你。

编辑：蓝色区域是：

```
self.view.backgroundColor = [UIColor blueColor]; 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-08T15:07:21.090

我们在我们的应用程序中做了完全相同的事情。要隐藏默认的 TabBar，只需覆盖`hidesBottomBarWhenPushed`父视图控制器（或应用程序中的每个视图控制器）中的方法

```
#pragma mark - Overriden UIViewController methods
- (BOOL)hidesBottomBarWhenPushed {
    return YES;
} 
```

编辑：这个值也可以从情节提要中设置：

![在此处输入图像描述](../Images/5817d6c1dff8e8d8ecf43496accfc215.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-24T22:33:36.063

My`UITabBarController`位于容器视图中。检查“在推送时隐藏底部栏”对我不起作用。相反，我创建了标签栏控制器的子类并以编程方式隐藏了标签栏。

```
class FooTabBar: UITabBarController {
  override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()
    self.tabBar.isHidden = true
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:27:59.007

我认为没有一种简单的方法可以解决此问题，因为`UITabbarViewController`可能是您的超级视图和所有“内部”视图的 height = `screenHeight - tabBarHeight - navBarHeight`。

也许您可以尝试手动调整内部视图控制器的大小，但我认为您可能在 Apple 的 AppStore 提交过程中遇到问题，因为我认为这违反了一般的 iOS 用户体验。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-28T10:20:41.197

这就是您`UIViewController`在 Swift 中执行覆盖 () 的方式：

```
override var hidesBottomBarWhenPushed: Bool {
    get { return true }
    set { super.hidesBottomBarWhenPushed = newValue }
} 
```

# c - 如何处理来自 clang 编译器的警告？

> ID：15296067
> 
> 赞同：4
> 
> 时间：2013-03-08T14:19:33.437
> 
> 标签：c, clang, c99

我希望我的程序可以用 clang 编译而没有警告。该函数在编译时似乎可以工作，但为什么呢？我该如何处理警告？

```
$ clang cpu-disk-info.c
cpu-disk-info.c:108:17: warning: implicit declaration of function 'read' is
      invalid in C99 [-Wimplicit-function-declaration]
    while ((n = read(0, buf, betterSIZE)) > 0)
                ^
cpu-disk-info.c:109:5: warning: implicit declaration of function 'write' is
      invalid in C99 [-Wimplicit-function-declaration]
    write(1, buf, n);
    ^ 
```

代码

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define SIZE 1024
#define betterSIZE 4*SIZE /* read a better size at a time */

int main(int argc, char **argv)
{

    /* copy(); */

    /* make the names known */

    void info(char file_name[]);
    void buffered(char file_name[]);
    void better_buffered(char file_name[]);

   /* test */

    clock_t toc;
    clock_t tic = clock();
    info("coreutils_8.13.orig.tar.gz"); 
    info("coreutils_8.13.orig.tar.gz"); 
    info("coreutils_8.13.orig.tar.gz"); 
    info("coreutils_8.13.orig.tar.gz"); 
    info("coreutils_8.13.orig.tar.gz"); 
    toc = clock();
    printf("Unbuffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);
    tic = clock();    
    buffered("coreutils_8.13.orig.tar.gz"); 
    buffered("coreutils_8.13.orig.tar.gz"); 
    buffered("coreutils_8.13.orig.tar.gz"); 
    buffered("coreutils_8.13.orig.tar.gz");
    buffered("coreutils_8.13.orig.tar.gz"); 
    toc = clock();
    printf("Buffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);
    tic = clock();    
    better_buffered("coreutils_8.13.orig.tar.gz"); 
    better_buffered("coreutils_8.13.orig.tar.gz"); 
    better_buffered("coreutils_8.13.orig.tar.gz"); 
    better_buffered("coreutils_8.13.orig.tar.gz");
    better_buffered("coreutils_8.13.orig.tar.gz"); 
    toc = clock();
    printf("Better buffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);
    return 0;
}

void info(char file_name[])
{
    int ch;
    FILE *fp;
    fp = fopen(file_name,"r");
    // read mode
    if (fp == NULL)
    {
        perror(file_name);
        exit(EXIT_FAILURE);
    }
    while ((ch = fgetc(fp)) != EOF)
    {
        //putchar(ch);
    }
    fclose(fp);
}

void buffered(char file_name[])
{
    char buf[SIZE];
    FILE *fp;
    size_t nread;
    fp = fopen(file_name, "r");
    if (fp) {
        while ((nread = fread(buf, 1, sizeof buf, fp)) > 0)
    {
            //fwrite(buf, 1, nread, stdout);
    }
        if (ferror(fp)) {
            /* to do: deal with error */
        }
        fclose(fp);
    }
}

void better_buffered(char file_name[])
{
    char buf[betterSIZE];
    FILE *fp;
    size_t nread;
    fp = fopen(file_name, "r");
    if (fp) {
        while ((nread = fread(buf, 1, sizeof buf, fp)) > 0)
    {
            //fwrite(buf, 1, nread, stdout);
    }
        if (ferror(fp)) {
            /* to do: deal with error */
        }
        fclose(fp);
    }
}

int copy() /* input2output ie anything to anything */
{
    char buf[betterSIZE];
    int n;
    while ((n = read(0, buf, betterSIZE)) > 0)
    write(1, buf, n);
    return 0;
} 
```

我正在使用 ubuntu（并且希望代码也可以在 solaris 和 bsd 上运行）。

测试

```
$ ./benchm 
Unbuffered: 0.670000 seconds
Buffered: 0.040000 seconds
Better buffered: 0.020000 seconds 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-08T14:22:12.453

对于`read`和`write`，你必须

```
#include <unistd.h> 
```

他们没有在`stdio.h`.

# c# - 如何找出ModelState的哪个键有错误

> ID：15296069
> 
> 赞同：17
> 
> 时间：2013-03-08T14:19:35.583
> 
> 标签：c#, asp.net-mvc, modelstate

当 ModelState.IsValid 为 false 时，如何确定 ModelState 中的哪些键包含错误？通常我只会将鼠标悬停在 ModelState.Values 列表中，逐项检查错误计数 > 0。但现在我正在处理一个包含一些复杂对象列表的视图，总共 252 个 ModelState 项（每个对象的每个项每个列表在 ModelState.Keys 上都有一个条目）。

那么，有没有更简单的方法来指出错误来源呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-08T14:21:23.233

您可以检查`ViewData.ModelState.Values`集合并查看错误是什么。

```
[Httpost]
public ActionResult Create(User model)
{
   if(ModelState.IsValid)
   {
     //Save and redirect
   }
   else
   {
     foreach (var modelStateVal in ViewData.ModelState.Values)
     {
       foreach (var error in modelStateVal.Errors)
       {               
          var errorMessage = error.ErrorMessage;
          var exception = error.Exception;
          // You may log the errors if you want
       }
     }
   }         
   return View(model);
 }
} 
```

如果您真的想要键（属性名称），您可以遍历`ModelState.Keys`

```
foreach (var modelStateKey in ViewData.ModelState.Keys)
{
    var modelStateVal = ViewData.ModelState[modelStateKey];
    foreach (var error in modelStateVal.Errors)
    {
        var key = modelStateKey; 
        var errorMessage = error.ErrorMessage;
        var exception = error.Exception;
        // You may log the errors if you want
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T15:23:16.013

```
ModelState.Values.SelectMany(v => v.Errors); 
```

被认为更清洁。

# shell - 在文本中组织汉字每行一个单词

> ID：15296074
> 
> 赞同：0
> 
> 时间：2013-03-08T14:19:43.363
> 
> 标签：shell, command-line

我试图组织一个这样的汉字文本文件：

```
跌价

跌倒

跌停板

跌價

跌宕

跌幅

跌盪

跌眼鏡 
```

我需要将它们安排为每行一个单词。但我不知道如何获得单词边界。我的意思是操作英语，我们可以通过空格找到它，所以正则表达式类似于 \s[A-za-z]，对于汉字我不知道该怎么做。有人能告诉我如何将它们组织成每行一个单词的格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:30:45.510

你可以使用`.`

```
awk '$0{gsub(/./,"&\n");printf $0}' input 
```

测试

```
kent$  echo "跌价

跌倒

跌停板

跌價

跌宕

跌幅

跌盪

跌眼鏡"|awk '$0{gsub(/./,"&\n");printf $0}'             
跌
价
跌
倒
跌
停
板
跌
價
跌
宕
跌
幅
跌
盪
跌
眼
鏡 
```

# python - 更新了继承的 django 模型字段属性？

> ID：15296079
> 
> 赞同：2
> 
> 时间：2013-03-08T14:20:16.377
> 
> 标签：python, django, django-models

假设我从 django 用户类继承：

```
# import AbstractUser class ....
class MyUser(AbstractUser):

    gender = models.Charfield(....
    ....
    # I want to make the email field blank=False and unique=True
    # however, to my knowledge, python doesn't allow you to 
    # override inherited fields 
```

那么如何使电子邮件字段为空白=假和唯一=真。注意：我也在使用 South，所以 South 友好的代码会很好。（注意：我使用的是 Django 1.5，所以希望有一个解决方案，这样我就不必从 AbstractBaseUser 创建自己的用户模型）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:33:19.393

```
class MyUser(AbstractUser):

    gender = models.Charfield(....

    def __init__(self, *args, **kwargs):
       super(self, MyUser).__init__(*args, **kwargs)
       email = models.EmailField(blank=False, unique=True)
       email.contribute_to_class('email', self) 
```

# database - 为什么在实体框架5中成功修改了分离的实体？

> ID：15296085
> 
> 赞同：0
> 
> 时间：2013-03-08T14:20:24.233
> 
> 标签：database, entity-framework, c#-4.0, entity-framework-5, database-first

我的代码是。

```
class Program
        {

            static NorthwindEntities context = new NorthwindEntities();

            static void Main(string[] args)
            {
       Order updateorder = new Order() { OrderID = 10256, ShipCountry = "444", ShipCity = "tehran" };            
                update(updateorder);
            }

            static public void update(Order updateorder)
            {

                context.Entry<Order>(updateorder ).State = EntityState.Modified;

                context.SaveChanges();

            }
        } 
```

请帮助我，我很困惑为什么在数据库中修改了分离的实体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:26:05.340

调用`context.Entry<Order>(updateorder)`将对象附加到 EF。

# mongodb - 断言 10320 BSONElement：查询配置文件集合时的错误类型 113，db.system.profile.find()

> ID：15296088
> 
> 赞同：2
> 
> 时间：2013-03-08T14:20:39.250
> 
> 标签：mongodb

我在 ec2 中运行 Mongo 2.2.1，我启用了分析，并且我每 180 秒向石墨发送一个缓慢的操作摘要。脚本时不时地报告一个错误（BSONElement: bad type 113），如果我登录到 Mongo shell 并运行 db.system.profile.find() 我会得到更详细的报告：

```
Mon Feb 18 09:12:48 Assertion: 10320:BSONElement: bad type 113
0x6073f1 0x5d1aa9 0x4b0d98 0x5c17a6 0x6b3f35 0x6b6a2c 0x69be0a 0x6aa13f 0x668e46 0x668ec2 0x66a2ce 0x5cbcc4 0x4a4a14 0x4a67e6 0x7f1519bb776d 0x49f669 
 mongo(_ZN5mongo15printStackTraceERSo+0x21) [0x6073f1]
 mongo(_ZN5mongo11msgassertedEiPKc+0x99) [0x5d1aa9]
 mongo(_ZNK5mongo11BSONElement4sizeEv+0x1d8) [0x4b0d98]
 mongo(_ZN5mongo16resolveBSONFieldEP9JSContextP8JSObjectljPS3_+0x146) [0x5c17a6]
 mongo(js_LookupPropertyWithFlags+0x3f5) [0x6b3f35]
 mongo(js_GetProperty+0x7c) [0x6b6a2c]
 mongo(js_Interpret+0x10ea) [0x69be0a]
 mongo(js_Execute+0x36f) [0x6aa13f]
 mongo(JS_EvaluateUCScriptForPrincipals+0x66) [0x668e46]
 mongo(JS_EvaluateUCScript+0x22) [0x668ec2]
 mongo(JS_EvaluateScript+0x6e) [0x66a2ce]
 mongo(_ZN5mongo7SMScope4execERKNS_10StringDataERKSsbbbi+0x144) [0x5cbcc4]
 mongo(_Z5_mainiPPc+0x26c4) [0x4a4a14]
 mongo(main+0x26) [0x4a67e6]
 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f1519bb776d]
 mongo(__gxx_personality_v0+0x2a1) [0x49f669]
Error: BSONElement: bad type 113 
```

在日志中，我可以看到脚本何时运行并报告错误：

```
Mon Feb 18 09:26:21 [conn577444] Assertion: 10320:BSONElement: bad type 113
0xaf8c41 0xabedb9 0x570aab 0x7fc84c 0x7fe2ca 0x8057a7 0x806268 0x651171 0x82c71e 0x82c7d4 0x8318f6 0x8345f3 0x7b0b0d 0x7b20e2 0x56fe42 0xae6ed1 0x7f0eb2526e9a 0x7f0eb183c4bd 
 /opt/mongodb/bin/mongod(_ZN5mongo15printStackTraceERSo+0x21) [0xaf8c41]
 /opt/mongodb/bin/mongod(_ZN5mongo11msgassertedEiPKc+0x99) [0xabedb9]
 /opt/mongodb/bin/mongod(_ZNK5mongo11BSONElement4sizeEv+0x1cb) [0x570aab]
 /opt/mongodb/bin/mongod(_ZNK5mongo7Matcher13matchesDottedEPKcRKNS_11BSONElementERKNS_7BSONObjEiRKNS_14ElementMatcherEbPNS_12MatchDetailsE+0x153c) [0x7fc84c]
 /opt/mongodb/bin/mongod(_ZNK5mongo7Matcher7matchesERKNS_7BSONObjEPNS_12MatchDetailsE+0xfa) [0x7fe2ca]
 /opt/mongodb/bin/mongod(_ZNK5mongo19CoveredIndexMatcher7matchesERKNS_7BSONObjERKNS_7DiskLocEPNS_12MatchDetailsEb+0xc7) [0x8057a7]
 /opt/mongodb/bin/mongod(_ZNK5mongo19CoveredIndexMatcher14matchesCurrentEPNS_6CursorEPNS_12MatchDetailsE+0xa8) [0x806268]
 /opt/mongodb/bin/mongod(_ZN5mongo6Cursor14currentMatchesEPNS_12MatchDetailsE+0x41) [0x651171]
 /opt/mongodb/bin/mongod(_ZN5mongo20QueryResponseBuilder14currentMatchesERNS_12MatchDetailsE+0x1e) [0x82c71e]
 /opt/mongodb/bin/mongod(_ZN5mongo20QueryResponseBuilder8addMatchEv+0x44) [0x82c7d4]
 /opt/mongodb/bin/mongod(_ZN5mongo23queryWithQueryOptimizerEiRKSsRKNS_7BSONObjERNS_5CurOpES4_S4_RKN5boost10shared_ptrINS_11ParsedQueryEEES4_RKNS_17ShardChunkVersionERNS7_10scoped_ptrINS_25PageFaultRetryableSectionEEERNSG_INS_19NoPageFaultsAllowedEEERNS_7MessageE+0x376) [0x8318f6]
 /opt/mongodb/bin/mongod(_ZN5mongo8runQueryERNS_7MessageERNS_12QueryMessageERNS_5CurOpES1_+0x1a93) [0x8345f3]
 /opt/mongodb/bin/mongod() [0x7b0b0d]
 /opt/mongodb/bin/mongod(_ZN5mongo16assembleResponseERNS_7MessageERNS_10DbResponseERKNS_11HostAndPortE+0x3a2) [0x7b20e2]
 /opt/mongodb/bin/mongod(_ZN5mongo16MyMessageHandler7processERNS_7MessageEPNS_21AbstractMessagingPortEPNS_9LastErrorE+0x82) [0x56fe42]
 /opt/mongodb/bin/mongod(_ZN5mongo3pms9threadRunEPNS_13MessagingPortE+0x411) [0xae6ed1]
 /lib/x86_64-linux-gnu/libpthread.so.0(+0x7e9a) [0x7f0eb2526e9a]
 /lib/x86_64-linux-gnu/libc.so.6(clone+0x6d) [0x7f0eb183c4bd]
Mon Feb 18 09:26:21 [conn577444] assertion 10320 BSONElement: bad type 113 ns:mydb.system.profile query:{ ts: { $gte: new Date(1361179280953), $lte: new Date(1361179580953) } }
Mon Feb 18 09:26:21 [conn577444] problem detected during query over mydb.system.profile : { $err: "BSONElement: bad type 113", code: 10320 } 
```

该脚本将查询自上次运行以来运行缓慢的配置文件集合（ ts: { $gte: new Date(1361179280953), $lte: new Date(1361179580953) }）

我对 MongoDB 相当陌生，任何帮助表示赞赏。

谢谢，

西蒙娜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T22:41:08.527

这通常意味着您有数据损坏，可能是由不干净的关机引起的。如果您没有太多数据，您可以对数据库进行[修复](http://docs.mongodb.org/manual/reference/configuration-options/#repair)- 或者，如果您在某处有备份，最好从备份中恢复您的数据。

（始终建议您使用[复制](http://docs.mongodb.org/manual/replication/)运行，部分原因是如果您遇到损坏，您可以备份数据。）

# python - 在python中打印出带有缩进的列表和字典

> ID：15296090
> 
> 赞同：0
> 
> 时间：2013-03-08T14:20:40.090
> 
> 标签：python

有没有办法以人类可读的格式（多行，缩进）打印列表或字典（或其中包含字典的列表），而不是仅仅在一个长行上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:23:25.167

查看 pprint（漂亮的打印机）：[http ://docs.python.org/2/library/pprint.html](http://docs.python.org/2/library/pprint.html)

# sql - 如何在 postgresql 中调试“除以零”错误

> ID：15296095
> 
> 赞同：1
> 
> 时间：2013-03-08T14:20:59.703
> 
> 标签：sql, debugging, postgresql

我在单个 SELECT 中使用了许多不同的视图和 plpgsql 函数/聚合。当我在某些数据集上运行此 SELECT 时，出现`division by zero`错误。不幸的是，我没有得到任何被零除的细节。

有没有好方法来查明问题发生的确切位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:34:19.403

在 psql 中运行相同的代码将产生更多有用的信息，例如：

```
ERROR:  division by zero
CONTEXT:  PL/pgSQL function "mean_estimator_sfunc" line 10 during statement block local variable initialization 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:49:10.037

发布您的功能。这是 Oracle 文档中有关如何避免异常的一些很好的示例。仅使用 SQL 也可以做到这一点：

[http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/errors.htm](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/errors.htm)

```
DECLARE
  stock_price NUMBER := 9.73;
  net_earnings NUMBER := 0;
  pe_ratio NUMBER;
BEGIN
 pe_ratio :=
  CASE net_earnings
     WHEN 0 THEN NULL
     ELSE stock_price / net_earnings
  end;
END;
/ 
```

# vb.net - 取消在 OpenFileDialog 对话框中引发错误

> ID：15296097
> 
> 赞同：1
> 
> 时间：2013-03-08T14:21:02.550
> 
> 标签：vb.net, openfiledialog

我正在尝试实现一个 OpenFileDialog 框，它工作正常，除非我选择单击取消然后程序抛出一个错误，说找不到该文件，这让我感到困惑，因为我没有选择一个文件。

以下是代码。如何实现取消按钮？

```
OpenFileDialog1.InitialDirectory = "C:\"
OpenFileDialog1.FileName = "Select a Batch file..."
OpenFileDialog1.Filter = "Batch files (*.bat) | *.bat"
OpenFileDialog1.ShowDialog()

If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.Cancel Then
    OpenFileDialog1.Dispose()
End If

Dim R As New IO.StreamReader(OpenFileDialog1.FileName)
TextBox4.Text = R.ReadToEnd
R.Close()

Button4.Enabled = True
Button6.Enabled = True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:00:57.077

您注释掉了取消对话框的（不充分的）处理。放回去：

```
Dim openFileDialog1 As New OpenFileDialog()
openFileDialog1.Filter = "Batch files (*.bat)|*.bat|All files|*.*"
Dim result = openFileDialog1.ShowDialog()

If result = DialogResult.Cancel Then
    Return ' Just leave the method
End If

' … rest of method 
```

您还应该考虑正确的变量名称。`OpenFileDialog1`,`TextBox3`并且*永远不是*`Button2`合适的名称。好的标识符极大地增加了代码的可读性。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T15:07:03.607

Dialog 将在这两种情况下*自行处理*- 如果用户取消他的预期操作，您根本不做任何事情。这应该这样做：

```
OpenFileDialog1.InitialDirectory = "C:\"
OpenFileDialog1.FileName = "Select a Batch file..."
OpenFileDialog1.Filter = "Batch files (*.bat) | *.bat"
OpenFileDialog1.ShowDialog()

If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then

   Dim R As New IO.StreamReader(OpenFileDialog1.FileName)
   TextBox4.Text = R.ReadToEnd
   R.Close()

   Button4.Enabled = True
   Button6.Enabled = True   

End If 
```

当然，您将不得不添加一些额外的错误处理，但这是另一回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:51:00.067

```
 Dim result = OpenFileDialog1.ShowDialog()

    If result = True Then
        Dim R As New IO.StreamReader(OpenFileDialog1.FileName)
        TextBox4.Text = R.ReadToEnd
       R.Close()

    Button4.Enabled = True
    Button6.Enabled = True
    else
        ' handle the error, e.g. msgbox (no vaild file chosen"
     End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-19T05:31:40.527

这对我的项目有用。

```
 Dim bResult As DialogResult = sfdReportFile.ShowDialog()

    If bResult = DialogResult.OK Then
        tbFilePathName.Text = sfdReportFile.FileName.ToString
    End If 
```

您需要将结果定义为 DialogResult 以检查它是否正常并将文件路径发送到您需要的任何地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-07T04:10:23.820

在我的项目中，我使用了`SaveFileDialog`. 如果用户关闭了对话窗口，则没有文件名，并且发生错误。使用下面的代码，除非有要使用的文件名，否则我的进程将不会运行。

```
If SaveFileDialog1.FileName = Nothing Then

Else
     Code to run here when a file name is selected.
End If 
```

可以为`OpenFileDialog`. 只需添加一个`if then`以检查文件名是否已保存，如果没有，请不要运行代码。*

# php - 如何在不覆盖现有旧 PHP 版本的情况下安装 PHP 5.4？

> ID：15296103
> 
> 赞同：3
> 
> 时间：2013-03-08T09:38:19.477
> 
> 标签：php, portability, installation

如何在不升级/影响现有 PHP 的情况下创建 PHP 5.4 的可移植版本，因为该服务器上运行着实时网站。

这就像运行 2 个 PHP 实例？

换句话说，我如何构建 PHP 以使其在运行时不会替换旧的`make install`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:40:22.033

**根据澄清的问题更新**

首先，您要构建新的 PHP 版本，以便它安装到不同的位置，而不会覆盖现有版本。为此，请按照 PHP 构建说明进行以下更改：

执行时`./configure`，添加以下参数：`--prefix=/opt/php54`

这会将您的新 PHP 版本放在`/opt/php54/...`默认位置，而不是放在任何位置。

* * *

**原始答案**

单个 Apache Web 服务器一次只能使用一个 mod_php 版本。如果您想使用多个版本，最简单的方法可能是使用 CGI 设置第二个 PHP 版本并使用 Scott 答案的修改版本。

**在主 Apache 配置文件中设置 CGI：**

```
ScriptAlias /php54-cgi /usr/lib/cgi-bin/php54-cgi
Action application/x-httpd-php54 /php54-cgi 
```

**接下来，您需要设置一个绑定到端口 8080 的虚拟主机并*告诉它使用此版本的 PHP*：**

```
<VirtualHost [IP]:8080>
  DocumentRoot [DOCUMENT_ROOT]
  DirectoryIndex index.php
  ServerName [HOSTNAME]:8080
  <Directory [DOCUMENT_ROOT]>
    AllowOverride All
    Allow from All
  </Directory>

  <FilesMatch "\.php">
    SetHandler application/x-httpd-php52
  </FilesMatch>
</VirtualHost> 
```

（注意：这不是我的想法，没有检查语法是否正确，因此可能需要一些调整。）

通过此配置，虚拟主机中的 PHP 脚本将使用指定的 PHP 版本执行。

* * *

另一种方法，可能更难，但从长远来看也更灵活，是运行两个完全独立的 Apache 实例（或一个 Apache 和一个其他服务器，如 nginx），每个实例都有自己的 PHP 版本。

Apache 有[一些关于这样做的文档](http://wiki.apache.org/httpd/RunningMultipleApacheInstances)，但它并不完整。

困难的部分是 Ubuntu 试图帮助设置您的 Apache 配置，但它对事物的位置做出假设，因此您在管理这两者时会遇到问题。使用不同的服务器，例如一个 Apache 和一个 nginx，或者一个 Apache 和一个 Lighttpd，会容易得多，因为它们的配置文件不会相互冲突。只需将一个设置为 80 端口，另一个设置为 8080 端口并同时启动它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:35:22.147

你看过像[Webtatic](http://www.webtatic.com/packages/php54/)这样的东西吗？它可能会为您完成这项工作。

# c# - 如何使用 Type.InvokeMember 调用显式实现的接口方法？

> ID：15296108
> 
> 赞同：7
> 
> 时间：2013-03-08T14:21:21.980
> 
> 标签：c#, reflection

我想通过反射调用显式实现的接口方法 (BusinessObject2.InterfaceMethod)，但是当我使用以下代码尝试此操作时，我得到 Type.InvokeMember 调用的 System.MissingMethodException。非接口方法工作正常。有没有办法做到这一点？谢谢。

```
using System;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Text;

namespace Example
{
    public class BusinessObject1
    {
        public int ProcessInput(string input)
        {
            Type type = Assembly.GetExecutingAssembly().GetType("Example.BusinessObject2");
            object instance = Activator.CreateInstance(type);
            instance = (IMyInterface)(instance);
            if (instance == null)
            {
                throw new InvalidOperationException("Activator.CreateInstance returned null. ");
            }

            object[] methodData = null;

            if (!string.IsNullOrEmpty(input))
            {
                methodData = new object[1];
                methodData[0] = input;
            }

            int response =
                (int)(
                    type.InvokeMember(
                        "InterfaceMethod",
                        BindingFlags.InvokeMethod | BindingFlags.Instance,
                        null,
                        instance,
                        methodData));

            return response;
        }
    }

    public interface IMyInterface
    {
        int InterfaceMethod(string input);
    }

    public class BusinessObject2 : IMyInterface
    {
        int IMyInterface.InterfaceMethod(string input)
        {
            return 0;
        }
    }
} 
```

异常详细信息：“找不到方法'Example.BusinessObject2.InterfaceMethod'。”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T14:28:15.590

这是由于`BusinessObject2`显式实现`IMyInterface`. 您需要使用该`IMyInterface`类型来访问并随后调用该方法：

```
int response = (int)(typeof(IMyInterface).InvokeMember(
                    "InterfaceMethod",
                    BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public,
                    null,
                    instance,
                    methodData)); 
```

# c# - WPF 数据绑定的基础知识

> ID：15296111
> 
> 赞同：-3
> 
> 时间：2013-03-08T14:21:25.297
> 
> 标签：c#, .net, wpf, data-binding

我刚刚开始使用 WPF，首先，我想知道如何以编程方式将我自己的自定义类的实例添加到列表框中，并且列表框将每个元素显示为它在 UI 中的名称，而不是“MyNamespace.CustomClass”。

我已经阅读了有关 DataContexts 和 DataBinding 和 DataTemplates 的模糊内容，但我想知道我能做的绝对最低限度，最好使用尽可能少的 XAML - 我觉得它相当令人困惑。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:42:55.043

我知道你想避免绑定，但无论如何我都会把它扔掉。尽量不要太害怕 XAML，刚开始有点疯狂，但是一旦你习惯了所有的 {binding}，它实际上很明显，一个简单的例子将列表框绑定到后面的代码中的集合就可以了像这样。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">
    <ListBox ItemsSource="{Binding Items}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Window> 
```

Window 中的 DataContext 属性告诉它默认绑定的位置（在本例中是窗口），数据模板告诉列表框如何显示集合中找到的每个项目。

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    public class MyClass
    {
        public string Name { get; set; }
    }

    public partial class MainWindow : Window
    {
        public ObservableCollection<MyClass> Items
        {
            get { return (ObservableCollection<MyClass>)GetValue(ItemsProperty); }
            set { SetValue(ItemsProperty, value); }
        }
        public static readonly DependencyProperty ItemsProperty =
            DependencyProperty.Register("Items", typeof(ObservableCollection<MyClass>), typeof(MainWindow), new PropertyMetadata(null));

        public MainWindow()
        {
            InitializeComponent();

            Items = new ObservableCollection<MyClass>();
            Items.Add(new MyClass() { Name = "Item1" });
            Items.Add(new MyClass() { Name = "Item2" });
            Items.Add(new MyClass() { Name = "Item3" });
            Items.Add(new MyClass() { Name = "Item4" });
            Items.Add(new MyClass() { Name = "Item5" });
        }
    }
} 
```

当粘贴到 Visual Studio 中时，上面的代码应该会显示这一点。 ![在此处输入图像描述](../Images/35901fddbcabe37850e1524ddabdde0e.png)

# spring - 如何获取登录用户 SpringSecurity + AngularJS 的用户信息

> ID：15296113
> 
> 赞同：3
> 
> 时间：2013-03-08T14:21:26.177
> 
> 标签：spring, spring-mvc, spring-security, angularjs

目前我正在使用以下内容将用户登录到我的应用程序中。但是我想使用角度函数来实际执行登录。为此，我想创建一个休息 Web 服务来进行身份验证，但是我在 SO 上看到的所有示例都使用了我认为已弃用的用户。我还希望该服务返回有关用户的信息。

我要问的是如何将 MyUserDetailsS​​ervice 更改为用作登录的宁静服务，或者如何创建可用于登录的服务，该服务将在登录后返回用户对象。

```
<form class="navbar-form" action="/j_spring_security_check" method="post">
   <input class="span2" name="j_username"  type="text" placeholder="Email">
   <input class="span2" name="j_password" type="password" placeholder="Password">
   <input type="submit" class="btn btn-primary" value="Log in"/>
</form> 
```

这是我的身份验证管理器

```
<authentication-manager>
    <authentication-provider user-service-ref="MyUserDetailsService">
        <password-encoder ref="passwordEncoder"/>
    </authentication-provider>
</authentication-manager> 
```

这是我目前用于登录的用户详细信息服务。

```
@Service("MyUserDetailsService")
public class MyUserDetailsService implements UserDetailsService {
    private static final Logger logger = LoggerFactory.getLogger(MyUserDetailsService.class);

    private UserManager userManager;

    @Autowired
    public MyUserDetailsService(UserManager userManager) {
        this.userManager = userManager;
    }
    @Override
    @Transactional
    public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException, DataAccessException {
        if ((email == null) || email.trim().isEmpty()) {
            throw new UsernameNotFoundException("Email is null or empty");
        }
        logger.debug("Checking users with email: " + email);

        Users users = userManager.findByEmail(email);

        if (users == null) {
            String errorMsg = "User with email: " + email + " could not be found";
            logger.debug(errorMsg);
            throw new UsernameNotFoundException(errorMsg);
        }

        Collection<GrantedAuthority> grantedAuthorities = toGrantedAuthorities(users.getRoleNames());
        String password = users.getPassword();
        boolean enabled = users.isEnabled();
        boolean userNonExpired = true;
        boolean credentialsNonExpired = true;
        boolean userNonLocked = true;

        return new User(email, password, enabled, userNonExpired, userNonLocked, credentialsNonExpired, grantedAuthorities);
    }

    public static Collection<GrantedAuthority> toGrantedAuthorities(List<String> roles) {
        List<GrantedAuthority> result = newArrayList();

        for (String role : roles) {
            result.add(new SimpleGrantedAuthority(role));
        }

        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:51:28.330

Spring Security有一些[JSTL 标签，](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html)您可以在视图上使用这些标签来做一些事情。如果 JSTL 不是一个选项，无论出于何种原因，您都可以执行以下操作：

```
${pageContext.request.userPrincipal.principal.yourCustomProperty} 
```

此外，您可以在 Controller 中获取 Principal 并将其设置在 Model 上。

# jquery - 从数据库 .NET MVC 中删除现有用户

> ID：15296121
> 
> 赞同：0
> 
> 时间：2013-03-08T14:21:50.863
> 
> 标签：jquery, asp.net-mvc, database

我正在使用 NET MVC 处理这个小项目，我能够将新用户添加到我的数据库中，并且它很好地显示在我的 UI 中，不知何故我无法从 UI 中删除。我没有收到任何错误，所以请帮忙。预先感谢。

```
public JsonResult DeleteUser(string username)
{
    try
    {
        MyData.DB.Base.User.Delete(username);
        return new JsonResult() { Data = new { completed = true, username } };
    }
    catch
    {
        return new JsonResult() { Data = new { completed = false, username } };
    }
} 
```

这是我的 javascipt 代码：

```
User.UserRemoveFromUsers = function (username) {
    $.ajax({
        url: '/User/DeleteUser', 
        type: "POST",
        data: "username=" + username,
        success: function (data) {
            if (data.completed == true) {
                $('div.user[data=' + data.username + ']').remove();
            }
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:25:24.290

代替`data: "username=" + username,`

至 ：`data: { username : username },`

```
User.UserRemoveFromUsers = function (username) {
    $.ajax({
        url: '/User/DeleteUser', 
        type: "POST",
        data: { username : username },
        success: function (data) {
            if (data.completed == true) {
                $('div.user[data=' + data.username + ']').remove();
            }
        }
    });
}; 
```

# mysql - SQLAlchemy 必要的表属性

> ID：15296125
> 
> 赞同：8
> 
> 时间：2013-03-08T14:21:57.903
> 
> 标签：mysql, reflection, sqlalchemy, create-table

在为预先存在的数据库编写 SQLAlchemy 模型时，我必须提供多少有关表的信息？考虑这个表，它是 MySQL 数据库的一部分：

```
CREATE TABLE entities (
    id INTEGER NOT NULL AUTO_INCREMENT,
    dn VARCHAR(100) NOT NULL UNIQUE,
    PRIMARY KEY (id)
) Engine=InnoDB, COLLATE utf8_unicode_ci; 
```

根据我的测试，这足以使用它：

```
class Entity(Base):
    __tablename__ = 'entities'
    id          = Column('id', Integer, primary_key=True)
    dn          = Column('dn', String(100)) 
```

但当然它缺少 UNIQUE、AUTO_INCREMENT、Engine 和 COLLATE 信息。SQLAlchemy 是否关心这些？

当然我可以使用反射，但出于一致性原因我宁愿不使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T20:25:45.710

下面应该在语义上产生相同的结果，尽管不会产生相同的查询：

```
class Entity(Base):
    __tablename__ = 'entities'
    __table_args__ = {'mysql_engine':'InnoDB'}
    id          = Column('id', Integer, primary_key=True)
    dn          = Column('dn', String(100, collation='utf8_unicode_ci'), unique=True) 
```

我只是不确定如何为整个表指定排序规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-05T20:07:43.903

```
class Users(db.Model):
    __tablename__='users'
    __table_args__ = {'mysql_engine':'InnoDB', 'mysql_charset':'utf8','mysql_collate':'utf8_czech_ci'}
    id=db.Column('iduser', db.Integer, primary_key=True)
    name=db.Column('column_name', db.String(193))

    def __init__(self, name):
        self.name=name

    def __repr__(self):
        return self.name 
```

# python - ImportError：没有名为 books.models 的模块

> ID：15296126
> 
> 赞同：3
> 
> 时间：2013-03-08T14:22:03.237
> 
> 标签：python, django

我通过虔诚地阅读[这本书来学习 Django。](http://www.djangobook.com/en/2.0/index.html)我在第 5 章：模型，一切正常（在 InteractiveConsole 中），直到我达到[Basic Data Access](http://www.djangobook.com/en/2.0/chapter05.html#basic-data-access)。

```
epqrs@epqrs:~/webapps/djcode/mysite$ pwd
/home/epqrs/webapps/djcode/mysite
epqrs@epqrs:~/webapps/djcode/mysite$ python ../manage.py shell
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from books.models import Publisher
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: No module named books.models
>>> import sys
>>> sys.path
['/home/epqrs/webapps/djcode', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL', '/usr/lib/python2.7/dist-packages/gst-0.10', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client', '/usr/lib/python2.7/dist-packages/ubuntuone-client', '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel', '/usr/lib/python2.7/dist-packages/ubuntuone-couch', '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol']
>>> 
```

我不明白为什么我得到**ImportError: No module named books.models**。
*books*目录位于当前目录*mysite* (/home/epqrs/webapps/djcode/mysite/books) 下。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-29T18:48:25.687

我不得不将其更改为：

```
from books.models import Publisher, Author, Book 
```

所以基本上，我不得不把这`mysite`部分拿出来。此外，将已安装的应用程序从更改`'mysite.books'`为`'books'`

我希望它有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:45:37.883

我必须做

```
from mysite.books.models import Publisher 
```

让它工作。

# android - 搜索视图和键盘

> ID：15296129
> 
> 赞同：6
> 
> 时间：2013-03-08T14:22:10.010
> 
> 标签：android, keyboard, searchview

我有一个在 ListView 正上方有一个 SearchView 的活动。该活动通过用户在 SearchView 中键入文本来工作，然后用于过滤 ListView 的内容。

在 4" 手机 (Nexus 4) 上，当应用程序处于“纵向”方向并且用户开始在搜索视图中输入文本时，屏幕的下半部分占据了键盘，文本直接在 SearchView 小部件中输入。

但是，当手机处于“横向”方向时，整个屏幕被键盘和一个“文本字段”占据，而屏幕的其余部分都丢失了。键盘上的“搜索”按钮和“放大镜”按钮似乎没有任何动作。

查看屏幕截图![在此处输入图像描述](../Images/c956d4a009bcc52a18d3178683a74046.png)

问题

横向时是否可以直接在 SearchView 小部件中输入文本？

如果没有，我该如何让键盘上的按钮做一些事情？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-27T07:18:32.940

您需要为 SearchView 小部件设置 imeOptions，例如在 SearchableInfo xml 中：

```
android:imeOptions="actionSearch|flagNoExtractUi|flagNoFullscreen" 
```

如果您不使用 xml 来配置搜索视图，则可以通过 setImeOptions 实现类似的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-11T13:06:55.433

将 imeOptions 设置为 android.support.v7.widget.SearchView 不起作用：您需要在其中的 EditText 处进行设置：

爪哇：

```
EditText searchInput = searchview.findViewById(android.support.v7.appcompat.R.id.search_src_text)
searchInput.setImeOptions(EditorInfo.IME_ACTION_SEARCH) 
```

科特林：

```
val searchInput = searchview.findViewById<EditText>(android.support.v7.appcompat.R.id.search_src_text)
searchInput.imeOptions = EditorInfo.IME_ACTION_SEARCH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T00:52:04.937

您可以在 onCreateOptionsMenu(Menu menu) 方法中从 Java 代码中执行此操作：

```
searchView.setImeOptions(searchView.getImeOptions() | EditorInfo.IME_ACTION_SEARCH | EditorInfo.IME_FLAG_NO_EXTRACT_UI | EditorInfo.IME_FLAG_NO_FULLSCREEN); 
```

# php - 为 move_uploaded_file 实施正确的权限

> ID：15296133
> 
> 赞同：0
> 
> 时间：2013-03-08T14:22:14.157
> 
> 标签：php, iis, upload, permissions

我正在运行一个 php / IIS 8 网站。

我已按照此处的说明进行操作：

[http://www.uploadify.com/documentation/uploadify/implementing-uploadify/](http://www.uploadify.com/documentation/uploadify/implementing-uploadify/)

我的用户能够将文件上传到我的服务器上。

但是，当我调用函数 move_uploaded_file 时：

```
 $imagename = $_FILES['Filedata']['name'];
      $source = $_FILES['Filedata']['tmp_name'];
      $target = "../ResLife/uploadimages/".$imagename;
      move_uploaded_file($source, $target); 
```

什么都没发生。它不会移动文件。

我究竟做错了什么？如何设置适当的权限以便执行此功能？

# python - 如何在不转换为 Python 中的日期时间的情况下将字符串从 2012 年 11 月 14 日切换到 2012 年 11 月 14 日？

> ID：15296137
> 
> 赞同：0
> 
> 时间：2013-03-08T14:22:24.810
> 
> 标签：python, string, datetime, logging, converter

也许是一个奇怪的问题，但我们开始：

我必须解析几个日志文件，我正在以随机顺序读取这些文件。为了对它们进行排序，我需要按提取的日志时间进行排序。

日志条目将如下所示：

```
l = 2001:470:1f14:169:5000:eae0:589d:c211 - SOFT12 [14/Nov/2012:09:32:46 +0100] "POST /request HTTP/1.1" 200 984 "-" "-" 181446 
```

我可以像这样提取日期：

```
l.split('+', 1)[0].split('-', 1)[1].split(' ')[2].split('[')[1] 
```

这给了我：

```
14/Nov/2012:09:32:46 
```

当我查看价值一年的日志文件时，每天有超过 200 万条记录，我不想将任何内容转换为日期时间对象，以便我可以切换格式和排序。所以我正在寻找一个纯字符串操作，它可以将字符串的日期部分`14/Nov/2012`转换为可排序的`2012-11-14`，最好是包含在我方便的拆分语句中...

**问题：**
如何修改字符串日期而不将其转换为日期时间对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:41:32.817

此代码将起作用：

```
# Converts something like "14/Nov/2012:09:32:46"
# to "2012-11-14:09:32:46"
_MONTHS = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]
def convert(s):
  p = s.split(':', 1)
  t = p[0].split('/')
  return "%s-%02d-%02d:" % (t[2], _MONTHS.index(t[1]) + 1, int(t[0])) + p[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:52:15.060

与其使用列表并使用其`.index()`方法，不如使用 dict 可能有用，因为列表将涉及线性搜索。即使列表很短，dict 中的散列操作也可能更快。至少值得一试。

因此，采用[Nayuki Minase 的解决方案](https://stackoverflow.com/a/15296529/296974)：

```
# Converts something like "14/Nov/2012:09:32:46"
# to "2012-11-14:09:32:46"
_MONTHS = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
_MONTHS = dict((m, n + 1) for n, m in enumerate(_MONTHS)) # {"Jan": 1, "Feb: 2, ...} 
def convert(s):
  p = s.split(':', 1)
  t = p[0].split('/')
  return "%s-%02d-%02d:" % (t[2], _MONTHS[t[1]], int(t[0])) + p[1] 
```

甚至（为了节省时间）

```
 return "%s-%02d-%s:" % (t[2], _MONTHS[t[1]], t[0]) + p[1] 
```

如果您可以确定这一天已经具有正确的格式（前导 0）。

# python - 蟒蛇猜数字

> ID：15296139
> 
> 赞同：0
> 
> 时间：2013-03-08T14:22:29.980
> 
> 标签：python

我不明白这一点，它说正确单词的末尾有语法错误。

```
x=int(raw_input("Number: ")) <--/error/
y=385
if x == y:
    print("correct")
if x < y:
    print("too low")
if x > y:
    print("too high") 
```

新错误：

```
Traceback (most recent call last):
  File "prog.py", line 1, in <module>
    x=int(raw_input("Number: "))
NameError: name 'raw_input' is not defined 
```

虽然输入是 458。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:32:12.637

制表符与空格问题？最有可能是缩进。使用`python -tt`文件顶部进行检查。否则，您可以在命令行中运行它。将它放在文件中对我来说更方便，那时不必担心。例如，我在每个文件中都使用它：

```
#!/usr/bin/python -tt 
```

否则，这是一个版本问题，然后您只需使用括号'并使用 print 作为函数。`print("example")`. 但是`raw_input`有效，所以试试你的缩进。

* * *

编辑：我看到你的编辑并且`raw_input`不起作用，很可能你正在使用更新版本的 Python，Python3，所以`print`现在是一个函数，你不能使用`raw_input`. 所以正如我所说，尝试`print("example")`改变使用`raw_input`

`raw_input()` was renamed to `input()` in Python3 and `print` was made into a function

# ios - 更改导航栏文本颜色

> ID：15296142
> 
> 赞同：0
> 
> 时间：2013-03-08T14:22:33.487
> 
> 标签：ios, uinavigationitem, xamarin.ios

所以我有一个导航栏，但我想将文本颜色更改为黑色。我想我必须向导航栏添加一个新标签并自定义该标签。我试过这个：

```
navbar.TopItem.TitleView.Add BarLabel = new UILabel();
BarLabel.TextColor = UIColor.Black; 
```

但这没有用。或者是这样的：

```
[self.myBarButton setTitleTextAttributes:[NSDictionary dictionaryWithObject:[UIColor blackColor] forKey:UITextAttributeTextColor] forState:UIControlStateNormal]; 
```

但这在 C# 中会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:42:53.747

谷歌搜索给了我这个： http: [//www.developersalley.com/blog/post/2012/03/04/How-To-Change-The-Font-Of-MonoTouchUIKitUINavigationBar.aspx](http://www.developersalley.com/blog/post/2012/03/04/How-To-Change-The-Font-Of-MonoTouchUIKitUINavigationBar.aspx)

改变颜色非常相似

# php - 无法运行 php 脚本来加载图像

> ID：15296145
> 
> 赞同：0
> 
> 时间：2013-03-08T14:22:43.693
> 
> 标签：php, image, kloxo

我使用 php 文件在干净的页面中显示图片。我将 url 添加到所有图片中`site.xx/image.php?pic=/xx/xx.jpg`。它运行良好并显示图像，但是当我使用 kloxo 将我的网站移动到 vps 时，它停止工作并且图片不会加载到 php.ini 文件中。

例子：

文件.php

```
 <?php

$notitle = ""; // Text to Display in No title present
$noimage = "No Image Supplied";    // Error message if no image url

if (file_exists('adbrite.html')) {
    $temfile = fopen('adbrite.html', 'r');
    $template = fread($temfile, filesize('adbrite.html'));
    if ($title) {
        $template = eregi_replace("<PICTURETITLE>", $title, $template);
    } else {
        $template = eregi_replace("<PICTURETITLE>", $notitle, $template);
    }
    if ($desc) {
        $template = eregi_replace("<PICTUREDESCRIPTION>", $desc, $template);
    }
    if ($pic) {
        $template = eregi_replace("<PICTURE>", "src=\"$pic\">", $template);
    } else {
        $template = eregi_replace("<PICTURE>", $noimage, $template);
    }
    if ($return) {
        $template = eregi_replace("<PICTURELINK>", "<a href=\"$return\">RETURN TO DICKISM</a>", $template);
    } else {
        $template = eregi_replace("<PICTURELINK>", "<a href=\"/\">RETURN TO DICKISM</a>", $template);
    }
    echo $template;
} 
```

# php - php。Excel 显示不正确。

> ID：15296146
> 
> 赞同：0
> 
> 时间：2013-03-08T14:22:47.793
> 
> 标签：php, excel

我有这个简单的代码

```
<?php
//header info for browser
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=file.xls");
header("Cache-Control: cache, must-revalidate");
header("Pragma: public");
header("Expires: 0");
echo pack("CCC",0xef,0xbb,0xbf);//utf-8
/* * *****Start of Formatting for Excel****** */

$data = "text1 \t text2 \t";

print($data);
?> 
```

这将创建一个 excel 文件。我的问题是 \t 制表符不起作用。一切都在excel文件的第一列。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:32:32.130

我使用 "\r\n" escs 的时间不长：

```
$data = "text1 \\t text2 \\t";
echo '<pre>'; 
var_dump($data); 
echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:20:56.403

如果有人有同样的问题，我找到了解决方案

```
 <?php
  //header info for browser
  header("Content-type: application/octet-stream");
  header("Content-Disposition: attachment; filename=file.xls");
  header("Cache-Control: cache, must-revalidate");
  header("Pragma: public");
  header("Expires: 0");

  $data = "text1 \t text2 \t";
  $data = mb_convert_encoding($data, 'UTF-16LE', 'UTF-8');
  $data = "\xFF\xFE" . $data;

  echo $data;
?> 
```

# javascript - 在控制器中的 promise 对象上调用 $filter 的正确方法？

> ID：15296149
> 
> 赞同：0
> 
> 时间：2013-03-08T14:23:01.550
> 
> 标签：javascript, angularjs, angularjs-service

我有这个用于分页的分叉代码[plunker](http://plnkr.co/edit/iDojNLVptDG7beZqslnI?p=preview)，它工作正常，但是在我进行一些调整以使其从 Json 文件中获取数据后，它停止工作。
要查看代码工作注释行：[13、14、15]，然后取消注释行：[16 -> 37]。
该错误是关于 $filter 函数的问题，它在从 Json 文件中获取数据时返回 undefined 所以我认为因为该对象是一个承诺，现在破坏了 $filter 函数，我不确定。
错误发生在这 2 个函数中（使用 Json 调用）：

```
$scope.search = function () {
  $scope.filteredItems = $filter('filter')($scope.items, function (item) {
    for(var attr in item) {
      if (searchMatch(item[attr], $scope.query)){
        return true;
      }
    }
    return false;
  });
  // take care of the sorting order
  if ($scope.sortingOrder !== '') {
    $scope.filteredItems = $filter('orderBy')($scope.filteredItems, $scope.sortingOrder, $scope.reverse);
  }
  $scope.currentPage = 0;
  // now group by pages
  $scope.groupToPages();
};
// calculate page in place
$scope.groupToPages = function () {
  $scope.pagedItems = [];
  for (var i = 0; i < $scope.filteredItems.length; i++) {
    if (i % $scope.itemsPerPage === 0) {
      $scope.pagedItems[Math.floor(i / $scope.itemsPerPage)] = [ $scope.filteredItems[i] ];
    } else {
      $scope.pagedItems[Math.floor(i / $scope.itemsPerPage)].push($scope.filteredItems[i]);
    }
  }
}; 
```

错误信息：

> TypeError：无法
>           在           新的 controllers.MainCtrl（controllers
>           .
> js:99:10)

任何帮助提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:11:13.213

问题是过滤器在 $http 的承诺返回完成之前被调用，所以 items 对象是未定义的。
这个[谷歌组帖子中提到的解决方案（在控制器中调用 $filter 的正确方法？）](https://groups.google.com/d/msg/angular/fT9NZxNemtk/5aBeqTqh8ZAJ)。
我需要这样做：

```
Items.then(function(data) {
    $scope.items = data;
    //call $scope.search here, instead of calling it on line 100
    $scope.search();
}); 
```

所以[plunker](http://plnkr.co/edit/iDojNLVptDG7beZqslnI?p=preview)现在可以工作了。感谢 google AngularJS 小组中的 Florian Orben。

# java - 日期格式解析java

> ID：15296150
> 
> 赞同：0
> 
> 时间：2013-03-08T14:23:06.043
> 
> 标签：java

我想以 yyyy-mm-dd 格式存储今天的日期。在存储之前，我已经获取了今天的日期，对其进行了格式化并再次将格式化的字符串解析为日期。它以不同于我想要的格式提供输出日期。我如何获取日期，将其格式化为“yyyy-mm-dd”并再次将其转换为日期并希望以“yyyy-mm-dd”格式输出。请找到以下代码并告诉我我错在哪里

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
java.util.Date date = new java.util.Date();
java.util.Date date1;
String datestring=dateFormat.format(date);

try {           
    date1=dateFormat.parse(datestring);
    System.out.print(date1);
} catch (ParseException ex) {
     Logger.getLogger(accordcclass.class.getName()).log(Level.SEVERE, null, ex);
} 
```

我得到的上述代码的输出是 Thu Mar 07 00:00:00 GMT 2013。但我希望输出为 2013-01-07

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-08T14:38:17.567

我有同样的问题，这就是我所做的：

```
DateFormat inputDateFormat = new SimpleDateFormat("dd-MMM-yyyy HH:mm");
DateFormat outputDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm");
System.out.println(outputDateFormat.format(inputDateFormat.parse("09-SEP-2013 10:00"))); 
```

这样我就可以以原始格式解析日期并以数据库兼容格式输出。

正如有人之前提到的那样，有可能使用 PreparedStatement，但我不想这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T14:24:45.767

不要使用`Date`对象来打印，直接使用你的`datestring`变量。使用`Date`将`toString`使用`Locale`.

编辑：添加，如果你想`Date`用一种格式存储你的变量，它不会那样工作。A`Date`没有格式，它只代表时间。如何在 GUI、控制台或其他任何地方显示它是您需要指定格式的地方，如果您希望它与当前`Locale`格式不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:27:48.053

您正在使用 DateFormat 来格式化和重新解析。

你不需要重新解析。只需使用 DateFormat 进行格式化。

```
 DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
  java.util.Date date = new java.util.Date();
  String datestring=dateFormat.format(date);
  System.out.println( datestring ); 
```

# android - 使用 LiveCode 的自动对焦场

> ID：15296151
> 
> 赞同：2
> 
> 时间：2013-03-08T14:23:08.060
> 
> 标签：android, focus, livecode

使用原生 Android 控件，您将如何自动关注原生 android 控件。带有“焦点”操作的 MobileControlDo 仅适用于 iOS。在Android中还有另一种方法可以实现这一点吗？每次用户启动操作时，我都需要关注特定的文本字段。

我被迫使用原生 Android 文本框控件，因为我将扫描仪连接到我的平板电脑（通过 USB），并且内置的 Livecode 控件无法识别从扫描仪发送的 CRLF（其他 Android 应用程序可以）。我还尝试使用 KeyReturn、Rawkey 和 KeyDown 处理程序捕获它，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:10:34.787

只要字段处于焦点状态，LiveCode 字段（不是原生 Android 控件）就应该识别 returnInField 消息。点击该字段以设置光标，然后激活扫描仪。请注意，该消息称为“returnInField”，而不是“keyReturn”。

如果这可行，您应该能够编写“专注于字段”的脚本来编写焦点脚本。

我使用了带有 LiveCode 字段的扫描仪并且它们可以工作，但我实际上并没有在 Android 上尝试过。但是，如果它看到您的扫描仪，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:55:50.393

使用 View.requestFocus() 确保项目是可聚焦的（即 View.setFocusable()），即 `textbox.setFocusable(true); textbox.requestFocus();` ？

还有 View.setFocusableInTouchMode() 但这不应该是必要的，因为您正在以编程方式聚焦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T23:59:11.087

不幸的是，我认为目前没有解决您的问题的方法

CRLF 问题可能有解决方案。你能详细说明一下问题吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-28T22:18:49.923

尝试使用[mobileControlDo](https://livecode.fandom.com/wiki/MobileControlDo)命令

```
mobileControlDo tFieldControlName, "focus" 
```

# ravendb - 如何为链接文档创建 RavenDB 索引

> ID：15296156
> 
> 赞同：0
> 
> 时间：2013-03-08T14:23:24.973
> 
> 标签：ravendb

我有以下设计：债务人由代理人管理。每个都存储为独立的文档，并具有基于 id 的相互引用。代理人与其债务人之间的每次通信都被记录为第三份独立文件，其中包含对债务人的基于 ID 的引用。因此很容易创建一个索引 CommunicationsByDebtor，如下所示：

```
from c in docs.Communications
select new { c.DebtorId } 
```

但是，如何为索引 CommunicationsByAgent 定义地图？我试过这个，但它不编译：

```
from c in docs.Communications
from d in docs.Debtors
where d.Id == c.Communication_Debtor
select new { d.AgentId } 
```

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:04:37.687

```
from c in docs.Communications
let d = LoadDocument<Debtor>(c.Communication_Debtor)
select new { d.AgentId } 
```

参考：[索引相关文档](http://ravendb.net/docs/client-api/querying/static-indexes/indexing-related-documents)

# ssl - 我是否需要安装 SSL 来实施 DKIM

> ID：15296158
> 
> 赞同：3
> 
> 时间：2013-03-08T14:23:26.397
> 
> 标签：ssl, openssl, phpmailer, dkim

我正在使用 open-dkim 和 phpmailer 签署我的外发邮件，我安装了我的密钥，并显示为有效，并且邮件脚本正在运行，但我收到一个阻碍进程的 openSSL 错误：

```
Warning: openssl_sign() [function.openssl-sign]: supplied key param cannot be coerced into a private key in /usr/share/php/class.phpmailer.php on line 2221 
```

我对openssl一无所知，但我的第一个想法是这个域没有安装SSL，所以也许这是DKIM所必需的？？如果是这样，是否像往常一样安装新的 SSL 一样简单，还是我必须以某种方式将公钥/私钥与 SSL 相关联？

谢谢

如果需要完整的脚本：

```
<?

require_once("class.phpmailer.php");
$mailer = new PHPMailer();

$mailer->IsSMTP();
$mailer->Host = 'mail.domain.com';
$mailer->SMTPAuth = true;

$mailer->Username = 'info@domain.com';
$mailer->Password = 'pass';
$mailer->FromName = 'info@domain.com';
$mailer->From = 'info@domain.com';
$mailer->AddAddress('test@gmail.com','first last');
$mailer->Subject = 'Testing DKIM';

$mailer->DKIM_domain = 'domain.com';
$mailer->DKIM_private = 'private.txt';
$mailer->DKIM_selector = 'default'; //this effects what you put in your DNS record
$mailer->DKIM_passphrase = '';

$mailer->Body = 'this is just an email test';

if(!$mailer->Send())
{
echo "Message was not sent";
echo "Mailer Error: " . $mailer->ErrorInfo;
exit;
} else {
echo "Message Sent!";   
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:35:14.013

答案分为两部分：

1) 不，您显然不需要安装传统的 SSL 来使用 DKIM

2) 我的错误是由于从添加了额外字符的 RTF 文档中复制了我的私钥。我把它复制到了dreamweaver中，去掉了多余的字符，我现在收到了来自我的服务器的签名电子邮件

# python - 在python中将字符串中的所有字符转换为ascii hex

> ID：15296159
> 
> 赞同：7
> 
> 时间：2013-03-08T14:23:26.430
> 
> 标签：python, ascii

只是寻找可以将所有字符从普通字符串（所有英文字母）转换为 python 中的 ascii hex 的 python 代码。我不确定我是否以错误的方式问这个问题，因为我一直在寻找这个，但似乎找不到这个。

我一定只是忽略了答案，但我希望得到一些帮助。

澄清一下，从 'Hell' 到 '\x48\x65\x6c\x6c'

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T14:25:14.213

我想`''.join(r'\x{02:x}'.format(ord(c)) for c in mystring)`会做的伎俩...

```
>>> mystring = "Hello World"
>>> print ''.join(r'\x{02:x}'.format(ord(c)) for c in mystring)
\x48\x65\x6c\x6c\x6f\x20\x57\x6f\x72\x6c\x64 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-10-11T10:55:22.627

根据 Jon Clements 的回答，尝试 python3.7 上的代码。我有这样的错误：

```
>>> s = '1234'    
>>> hexlify(s)    
Traceback (most recent call last):    
  File "<pyshell#13>", line 1, in <module>    
    hexlify(s)    
TypeError: a bytes-like object is required, not 'str' 
```

通过以下代码解决：

```
>>> str = '1234'.encode()    
>>> hexlify(str).decode()   
'31323334' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-08T14:27:39.290

就像是：

```
>>> s = '123456'
>>> from binascii import hexlify
>>> hexlify(s)
'313233343536' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T14:25:33.627

尝试：

```
" ".join([hex(ord(x)) for x in myString]) 
```

# maven - Jenkins插件开发不适用于maven 2

> ID：15296161
> 
> 赞同：1
> 
> 时间：2013-03-08T14:23:39.080
> 
> 标签：maven, jenkins, jenkins-plugins

我正在尝试让 Jenkins 的 HelloWolrdBuilder 示例正常工作。[遵循本教程](https://wiki.jenkins-ci.org/display/JENKINS/Plugin+tutorial)步骤时一切顺利，但是当我运行 Jenkins 测试示例插件时，插件没有构建步骤，也没有全局配置。然而，在插件管理器中，插件似乎已安装。我注意到在使用 maven 2.2.1 时会发生这种情况，但是当我切换到[这里](https://stackoverflow.com/questions/13020673/unable-to-test-jenkins-plugin)提到的 maven 3.0.5 时它工作正常；但是用 maven 3 开发我的插件不是一个选择。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:41:08.620

在尝试了很多不起作用的事情之后，我发现了这个与 Jenkins 的社区教程非常相似的[另一个教程，但具体说明了这一点：](http://blog.codecentric.de/en/2012/08/tutorial-create-a-jenkins-plugin-to-integrate-jenkins-and-nexus-repository/)

```
If you are having problems with the latest Plugin version, you can also specify the version of the plugin that you want to use.
$ mvn -cpu org.jenkins-ci.tools:maven-hpi-plugin:1.84:create 
```

这种解决方法起到了作用，现在一切正常。

编辑：在深入挖掘之后，我在 IRC 频道中询问，我被告知事实上 maven 3 现在需要使用最新版本的 hpi-plugin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-07T18:05:39.550

为了让 maven 知道该做什么，您需要将以下 xml 添加到您的主 maven 目录（**$HOME/.m2/settings.xml**）

```
 <settings>
  <pluginGroups>
    <pluginGroup>org.jenkins-ci.tools</pluginGroup>
  </pluginGroups>
  <profiles>
    <profile>
      <id>jenkins</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <repositories>
        <repository>
          <id>repo.jenkins-ci.org</id>
          <url>http://repo.jenkins-ci.org/public/</url>
        </repository>
      </repositories>
      <pluginRepositories>
        <pluginRepository>
          <id>repo.jenkins-ci.org</id>
          <url>http://repo.jenkins-ci.org/public/</url>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
</settings> 
```

我从以下位置获得此信息： [Link to Jenkins-Plug-in Tutorial](https://blog.codecentric.de/en/2012/08/tutorial-create-a-jenkins-plugin-to-integrate-jenkins-and-nexus-repository/)

# c# - Nhibernate QueryOver 嵌套属性

> ID：15296162
> 
> 赞同：0
> 
> 时间：2013-03-08T14:23:44.797
> 
> 标签：c#, nhibernate, queryover

有没有一种简单的方法可以将 QueryOver 与嵌套属性一起使用？

例如，我尝试这样的事情；

```
// SPLAT!
session.QueryOver<SuperHero>().Where(Expression.Eq("HomeBase.Name", "Bat Cave"); 
```

它不起作用，因为它“无法解析 SuperHero 的属性 'homebase.name'。这是有道理的，但显然有一些方法可以使这项工作，因为如果我使用旧的“查询”方法，我可以让它工作得很好，即

```
// The results I (technically) want.
sess.Query<SuperHero>().Where(x => x.HomeBase.Name == "The Bat Cave"); 
```

那么我错过了什么？我猜测有一些方法可以组合表达式等，以使下一个属性与 QueryOver 一起使用，但它们是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:13:50.010

你不能像那样做一个嵌套的属性访问——你必须加入相关的表：

```
session.QueryOver<SuperHero>()
    .JoinQueryOver(sh => sh.HomeBase)
        .Where(hb => hb.Name == "Bat Cave"); 
```

此外，您不需要在限制中使用字符串——毕竟这是使用 QueryOver 的一大优势。

# database - Web 逻辑数据源中的 SQL 查询执行问题 - ORA-01438

> ID：15296163
> 
> 赞同：0
> 
> 时间：2013-03-08T14:23:48.633
> 
> 标签：database, oracle, weblogic

我有一个简单的插入 SQL 脚本，它在直接在数据库上运行时执行。但是，当我对从 Web 逻辑数据源获得的数据库连接执行相同的查询时，它会抛出以下异常。

ORA-01438: 该列允许的值大于指定的精度

有任何想法吗？

这是我的表的 DDL 和 sql 查询。

DDL：

```
CREATE TABLE "TABLE_NAME" 
   ("N_PROP_ID" NUMBER(10,0) NOT NULL ENABLE, 
    "C_TYPE" VARCHAR2(1 BYTE) NOT NULL ENABLE,
    "N_PRO_IDENTIFIER" NUMBER(10,0) NOT NULL ENABLE,
    "BL_CONCAT_AVAILABLE" NUMBER(1,0),
    "BL_IS_SELECTABLE" NUMBER(1,0), 
    "C_LABEL" VARCHAR2(30 BYTE), 
    "C_INSTANCE1" VARCHAR2(32 BYTE), 
    "C_INSTANCE2" VARCHAR2(32 BYTE), 
    "N_VERSION" NUMBER(2,0), 
    "C_INSTANCE3" VARCHAR2(32 BYTE), 
    "VERSION1" NUMBER(2,0), 
    "VERSION2" NUMBER(2,0), 
    "C_DF_IDENTIFIER" VARCHAR2(20 BYTE), 
    "B_MSL" RAW(1), 
    "PORT" NUMBER(4,0), 
     CONSTRAINT "PK_PROPERTIES" PRIMARY KEY ("N_PROP_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL KEEP FLASH_CACHE 
  DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDX_REP_RCA"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL KEEP FLASH_CACHE 
  DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "DATA_REP_RCA" 
  CACHE ;

   COMMENT ON TABLE "TABLE_NAME"  IS 'Table which describes all security properties.';

  CREATE INDEX "FK_PROPERTIES_TO_PROFILE" ON "TABLE_NAME" ("N_PRO_IDENTIFIER")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL KEEP FLASH_CACHE 
  DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDX_REP_RCA" ;
  CREATE UNIQUE INDEX "PK_PROPERTIES" ON "TABLE_NAME" ("N_PROP_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL KEEP FLASH_CACHE 
  DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDX_REP_RCA" ; 
```

SQL查询：

```
insert into TABLE_NAME (N_PRO_IDENTIFIER, C_LABEL, C_INSTANCE3, 
    VERSION1, VERSION2, 
    C_INSTANCE2, C_INSTANCE1, 
    PORT, B_MSL, C_TYPE, N_PROP_ID) 
values 
    (50690, 'UICC applet instance', 'A000000018210008', 
     1, 0,
     'A00000001803090000000000B00000', 'A00000001803090000000000B00000', 
     101, null, 'I', 27548); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:37:41.347

请使用如下查询：

```
insert into TABLE_NAME (N_PRO_IDENTIFIER, C_LABEL, C_INSTANCE3, 
    VERSION1, VERSION2, 
    C_INSTANCE2, C_INSTANCE1, 
    PORT, B_MSL, C_TYPE, N_PROP_ID) 
values 
    (50690, 'UICC applet instance', 'A000000018210008', 
     '1.0', '0.0',
     'A00000001803090000000000B00000', 'A00000001803090000000000B00000', 
     101, null, 'I', 27548); 
```

并检查查询现在是否有效。

同样在表定义中，不要使用 DATA TYPE 作为 NUMBER(X,0)，而是使用 NUMBER(X)。

请检查并告诉

# c++ - Valgrind 输出带有地址和问号？

> ID：15296169
> 
> 赞同：2
> 
> 时间：2013-03-08T14:24:03.157
> 
> 标签：c++, memory-management, memory-leaks, valgrind, ode

我刚刚从 valgrind 收到一个我不太明白的输出：

```
==20290== Invalid read of size 1
==20290==    at 0x8C1D678: ???
==20290==    by 0x5D74C47: ???
==20290==  Address 0xee818c7d is not stack'd, malloc'd or (recently) free'd
==20290== 
==20290== 
==20290== Process terminating with default action of signal 11 (SIGSEGV)
==20290==  Access not within mapped region at address 0xEE818C7D
==20290==    at 0x8C1D678: ???
==20290==    by 0x5D74C47: ???
==20290==  If you believe this happened as a result of a stack
==20290==  overflow in your program's main thread (unlikely but
==20290==  possible), you can try to increase the size of the
==20290==  main thread stack using the --main-stacksize= flag.
==20290==  The main thread stack size used in this run was 8388608.
==20290== 
```

特别是，我对这些问号感到困惑。通常你在这个地方得到的是 valgrind 检测到的错误的位置。我以前使用过 valgrind，所有输出都如[手册](http://valgrind.org/docs/manual/mc-manual.html#mc-manual.errormsgs)中所述。我使用了这个 valgrind 命令：

```
valgrind --tool=memcheck --leak-check=full --leak-resolution=high --num-callers=20 --track-origins=yes 
```

程序本身会出现分段错误。虽然这次valgrind没有告诉我内存泄漏的任何位置，但从调试中我已经确定了发生分段错误的位置。不幸的是，它位于英特尔 ODE 求解器库 (dodesol) 的 ODE 求解器函数中，我无法访问它。我已经多次仔细检查了我传递给这个函数的所有参数，它们似乎没问题（至少与我之前的手册和示例中的参数相对应）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:40:01.677

这`???`几乎可以肯定意味着 Valgrind 无法在相关地址附近的任何地方找到符号。我怀疑您正在执行没有代码的代码。这可能是覆盖堆栈上的返回地址的结果，例如，可能是缓冲区溢出的结果（但其他指针错误可能会触发它） Valgrind 非常擅长动态分配内存的问题，但它有更多局部变量的困难工作，因为它并不总是可以确定堆栈数组的结束位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:06:33.697

得到此结果的一种情况是，如果您在剥离的二进制/库上运行 Valgrind，并且它在本地符号（例如静态函数）中发现错误。

使用仍然包含所有本地符号信息的二进制/库的未剥离版本将在 Valgrind 输出中给出源文件和行号。

# box-api - 上传期间访问令牌过期

> ID：15296171
> 
> 赞同：0
> 
> 时间：2013-03-08T14:24:07.710
> 
> 标签：box-api

我遇到了一个问题，我认为访问令牌在上传过程中到期。例如，如果我当前有一个有效的（刚刚刷新的）访问令牌，那么运行：

```
curl -vS --limit-rate 30K 'https://api.box.com/2.0/files/content' -H 'Authorization: Bearer VALID_ACCESS_TOKEN' -F filename=@/tmp/example.zip -F folder_id=12345 
```

上传需要一个多小时，我最终得到了这个：

```
< HTTP/1.1 401 Unauthorized
...
< WWW-Authenticate: Bearer realm="Service", error="invalid_token", error_description="The access token provided is invalid."
...
* HTTP error before end of send, stop sending 
```

我测试的文件很大，但仍在 250MB 的上传限制之内。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:26:55.500

这是设计使然。

目前唯一的解决方法是强制（客户端）从您获取最后一个访问令牌开始，您的上传时间不会超过 1 小时。

诚然，这不能很好地适应您的用例。我们计划最终支持分块上传，这将有助于解决该问题。

# php - 黑名单单词的字符串中的 PHP Preg_Match

> ID：15296173
> 
> 赞同：0
> 
> 时间：2013-03-08T14:24:20.143
> 
> 标签：php

我想让代码在 preg_match 搜索中查找通配符。例如，现在它只找到单词 Dumps.. 如果单词是 dumpster，我希望它能够触发..

提前致谢！

```
$aSpam= array
( 'Cvv'=> ''
, 'Dumps'=> 'i'
, 'acc Paypal'=> 'i'
);

foreach( $aSpam as $sWord=> $sOption )
if( preg_match( '#\\b'. preg_quote( $sWord, '#' ). '\\b#'. $sOption, $message_parser-> message ) ) {
    $error[]= 'Spam detected';
    break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:25:38.237

从表达式中删除最后一个`\\b`，它表示一个[单词边界](http://www.regular-expressions.info/wordboundaries.html)。

# html - 网站元素的位置

> ID：15296178
> 
> 赞同：0
> 
> 时间：2013-03-08T14:24:29.697
> 
> 标签：html, css

我在为 IE、Chrome 和 Opera 呈现我的网站时遇到问题。在 Firefox 中，定位效果很好：

![火狐视图](../Images/b822fbb9bb17b058cd22a3765cf917b4.png)

而在其他浏览器中它看起来像废话： ![其它浏览器](../Images/83920a1a30c4586bf2fb6ddce1f28095.png)

我尝试了几种定位和填充选项，但没有运气。当我用 jQuery 替换下拉菜单以图形方式增强它时，问题就出现了。原来的下拉菜单仍然存在，但带有 css 选项“显示：无”。我会很感激你的提示！

这是CSS：

这是蓝色的大盒子

```
.searchHomeForm a, .searchHomeForm a:hover {
    color:#000000;
} 
```

围绕三个元素的隐形框

```
div.searchHomeForm , .searchform {
    height: 37px;
    margin-left: auto;
    margin-right: auto;
} 
```

白色搜索栏

```
.search_bar {
    position: inherit;
    height: 25px;
    letter-spacing: 0.02em;
    line-height: 25px;
    padding: 9px 0 0px 9px;
    width: 390px;
    border: 1px solid #95B6D6;
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.11) inset;
    border-radius: 0.25em 0 0 0.25em;
} 
```

jQuery Dropdown 替换

```
#searchformReplacement {
    background: #EBEBEB;
    padding: 0px 1px 5px 0;
    margin-bottom: 3px;
    border-top: 1px solid #95B6D6;
    border-bottom: 1px solid #95B6D6;
    width: 109px;
    position: inherit;
} 
```

查找按钮

```
.find_button {
    background: url("../images/lupevufindsearchsubmit1.png") no-repeat scroll #bBbBbB;
    -moz-border-radius: 0.25em;
    border-radius: 0 0.25em 0.25em 0;
    position: inherit;
    height: 36px;
    line-height: 36px;
    margin: 0px 0 3px -1px;
    padding: 4px 10px 4px 10px;
    width: 60px;
    border-top: 1px solid #95B6D6;
    border-right: 1px solid #95B6D6;
    border-bottom: 1px solid #95B6D6;
    border-left: none;
    box-shadow: 2px 2px 5px rgba(76, 133, 187, 0.50) inset;
    transition: all 0.2s ease-in-out 0s;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:28:03.777

也许`float: left;`在彼此相邻的三个元素上使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:30:18.020

尝试`position: inherit`从 中删除`.search_bar {}`，`#searchformReplacement {}`并 为每个`.find_button {}`添加`display:inline-block`

或为每个添加`display:inline`和`float:left`。如果您使用，您可能需要清除浮动`float:left`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:38:56.307

我给你做了一个小例子来获得所需的位置，我正在使用 inline-block 适当性（我喜欢它）：

**html**

```
<div id="container">
    <input type="text" class="inline-block" />
    <div class="inline-block">
        Your custom select
    </div>
    <button type="submit" class="inline-block">Search</button>
</div> 
```

**CSS**

```
.inline-block {
    display:inline-block;
    *display:inline; /*IE hack*/
    *zoom:1; /*IE hack*/
}

#container {
    background:lightBlue;
    width:300px;
    margin:0 auto;
    text-align:center;
} 
```

看工作[小提琴](http://jsfiddle.net/soyuka/T5pVg/1/)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T15:38:13.953

是的，正如 madhushankarox 指出的那样，清理你的花车很重要。但是您并不总是需要使用浮点数，尤其是在您的情况下。另外，如果您需要将表单放入流式布局页面，这里还有一个额外的好处。它应该在大多数宽或薄的屏幕上均匀分布。

**CSS**

```
/*the blue rounded box*/
#bluebox {
padding:3% 5%;
margin:0 25%;
background:#d0dcea;
border:solid 1px #b7c2d2;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
border-radius: 10px;
}

.fieldset-search {
text-align:center;
}

/*The white search bar*/
.input-search {
padding:5px;
margin:0;
width:50%;
vertical-align: baseline;
border: solid 1px #b7c2d2;
background: #fff;
outline: 0;
}

/*the jQuery Dropdown replacement*/
.list-search {
padding:4px;
margin:0 0 0 -5px;
}

/*the find button*/
.submit-search {
padding:4px 10px;
margin:0 0 0 -5px;
} 
```

**HTML**

```
<div id="bluebox">
  <div class="fieldset-search">
  <input type="text" name="search" class="input-search">
  <select name="list" class="list-search"><option></option></select> 
  <button type="search" class="submit-search">Go</button>
  </div>
</div> 
```

# image - BitmapData 的 Scan0 或 Stride 可以随时间变化吗？

> ID：15296182
> 
> 赞同：1
> 
> 时间：2013-03-08T14:24:38.003
> 
> 标签：image, performance, image-processing, bitmapdata, reliability

我正在使用一个`BitmapData`对象来`Bitmap.LockBits`快速读取和写入像素数据。该功能被封装在一个类中。我可以将引用存储到对象的and`Scan0`还是应该在每次需要访问像素时读取它？根据我的使用情况，同一个类对象可以活动**几个小时**，在这段时间内/会改变吗？或者我可以在类中存储对它们的引用以减少属性访问？`Stride``BitmapData`**`Scan0``Stride`**

 ****每次访问**（有点慢）

```
public BitmapData Data;

byte* pixByte = (byte*)BmpData.Scan0 + (Y * BmpData.Stride) + (X * 3); // access pixel of 24bpp image 
```

**存储参考**（这可能吗？）

```
public BitmapData Data;
public IntPtr Scan0;
public int Stride;

byte* pixByte = (byte*)Scan0 + (Y * Stride) + (X * 3); // access pixel of 24bpp image 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:21:52.500

不，位图的像素数据存储在非托管内存中。这就是 BitmapData.Scan0 的类型是 IntPtr 的原因。非托管指针永远不会改变它们的值，对于非托管堆管理器来说，没有类似的压缩垃圾收集器。

但是，这仅在位图被锁定时才有效。快速调用 Bitmap.UnlockBits() 通常很重要。锁定有效时，位图对象不可用。当位图被锁定时，尝试执行诸如绘制位图之类的操作将失败并出现异常。因此，存储 Scan0 指针以供以后使用几乎总是错误的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:33:39.810

`BitmapData`对( 因此)的引用`Scan0`仅在您`Bitmap.Lockbits`打开时有效，一旦您调用`UnlockBits`指针不再有效。

您无法有效地缓存该值，但是如果您知道位图的颜色深度和大小不会改变，您可以预先计算一个查找表，该表将删除使用 Stride 访问像素位置的大量计算（宽度一行）和一个像素的大小（24bpp 颜色深度为 3 个字节），因为这些基本上是静态的。**

# json - 来自 POST 方法 android 的 JSON 文件

> ID：15296185
> 
> 赞同：0
> 
> 时间：2013-03-08T14:24:40.747
> 
> 标签：json

我们的 webclient 有一个 post 方法。当我尝试使用它的链接访问这个方法时，我得到了这个 json 文件：

```
{"user":   
{"userID":0,"username":null,"password":null,"email":null,"telephone":null,"firstName":null,
"lastName":null,"dateOfBirth":null,"street":null,"number":null,"zipcode":null,"city":null,                                            
"showPosition":false,"notificationEmail":false,"profielFoto":null,"deelnames":null,
"kosten":null,"trips":null,"enabled":true,"authorities":  
[{"authority":"ROLE_USER"}],"accountNonLocked":true,"accountNonExpired":true,"credentialsNonExpired":true}} 
```

但是我需要将此 JSON 文件转换为：

```
{"userID":0,"username":null,"password":null,"email":null,"telephone":null,"firstName":null,
"lastName":null,"dateOfBirth":null,"street":null,"number":null,"zipcode":null,"city":null,                                            
"showPosition":false,"notificationEmail":false,"profielFoto":null,"deelnames":null,
"kosten":null,"trips":null,"enabled":true,"authorities":  
[{"authority":"ROLE_USER"}],"accountNonLocked":true,"accountNonExpired":true,"credentialsNonExpired":true} 
```

所以没有第一行。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:30:03.503

```
JSONObject jo = new JSONObject(yourJsonString);
JSONObject user = jo.get("user"); 
```

如果您需要将其作为字符串，

```
user.toString(); 
```

使用[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)更好地了解您的 JSON 对象。

# java - 泛型类型或方法的最左边界是什么意思，为什么选择此策略用于类型擦除？

> ID：15296193
> 
> 赞同：9
> 
> 时间：2013-03-08T14:24:52.207
> 
> 标签：java, generics

来自[Angelika Langer 的通用常见问题解答](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ100)：

**删除类型参数。**

> 当编译器找到泛型类型或方法的定义时，它会删除所有出现的类型参数并将它们替换为最左边的边界，如果没有指定边界，则使用 Object 类型。

编辑：据我所知，在这种情况下，*最左边的界限*是字面意思，即界限列表中最左边的意思。我想了解为什么选择此政策？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T14:31:28.807

在这种情况下，“最左边”不是技术术语。它的字面意思是“最左边”。它只是意味着当类型参数有几个边界（限制）时：

```
T extends Callable<Long> & Runnable 
```

编译器将所有出现的类型参数替换`T`为最左边的边界（在本例中为`Callable<Long>`）：

这意味着，就像在 Angelika 的例子中一样，这个：

```
private T task1, task2; 
```

替换为：

```
private Callable task1, task2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:42:22.557

没有理由。他们只需要选择一个。整件事糟透了。这就像问你想拯救哪一个孩子一样。你想拯救所有人，呵呵。但他们不让你。

# linux - Perl：检查特定文本的标准输出并执行操作

> ID：15296195
> 
> 赞同：0
> 
> 时间：2013-03-08T14:24:57.660
> 
> 标签：linux, perl, dns, ping

我正在尝试编写一个工具来检查现有 PTR 记录的 IP 地址，然后如果没有 PTR 记录，则执行 ping 以查看它是否响应。

然后如果没有响应，它应该打印一条消息说

这就是我到目前为止所拥有的。

```
#!/usr/bin/perl
$ping = "100%";
use warnings;
while (defined($line = <>)) {
    chomp($line);
    print `nslookup $line`;
    if ("NXDOMAIN") {
        print `ping -c 1 -w 2.0 $line`;
        if ($ping) {
            print "IP Address '$line' is available.\n"
        }
    }
} 
```

我似乎无法开始工作的是 if 语句，如果文本 NXDOMAIN 在输出中，它会执行 ping。然后，如果 ping 的文本包含 $ping，它会打印以下行。

```
print "IP Address '$line' is available.\n" 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:26:18.563

你应该使用 perl 的内置库来做你需要的事情。以下是如何使用 perl 实现 ping 的示例：

```
use Net::Ping;

my @list = ("10.0.0.1", "10.0.0.2", "10.0.0.3");

foreach my $addr (@list) {
    my $p = Net::Ping->new();
    print "IP Address '$addr' is not responsive.\n" if !$p->ping ($addr);
    $p->close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:34:51.753

`$ping`不是undef。所以`if`条件总是返回真！

如果您`$ping`从那个特定`IP`的 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:34:58.207

您需要存储命令返回的值：

```
# THIS CODE IS UNTESTED, but should get the idea across.
my $nslookupOut = `nslookup $line`;
print $nslookupOut;
if ( $nslookupOut =~ /NXDOMAIN/ ) {
    my $pingOut = `ping -c 1 -w 2.0 $line`;
    print $pingOut;
    if ( $pingOut =~ /$ping/ ) {
        ...
    }
} 
```

# javascript - JSON 语法错误：'unexpected number' 或 'JSON.parse: expected ',' or '}' after property value in object'

> ID：15296196
> 
> 赞同：32
> 
> 时间：2013-03-08T14:24:58.180
> 
> 标签：javascript, jquery, json, syntax-error

我使用 $.ajax() 从 POST 请求中收到此响应：

```
{"command": 6,"log_size":50,"log":[
    {"type": 30,"tag": "*NETEVENT*","sensors": "0D","ti": 1047161877,"to": 0},
    {"type": 30,"tag": " __START__","sensors": "00","ti": 0000011410,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0A","ti": 0000011411,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0B","ti": 0000011411,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0D","ti": 0000011412,"to": 0},
    {"type": 30,"tag": " __START__","sensors": "00","ti": 1047215799,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0A","ti": 1047215799,"to": 0},
    {"type": 30,"tag": " __START__","sensors": "00","ti": 1047218051,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0D","ti": 0000002598,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0B","ti": 1047068795,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0D","ti": 1047068796,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0A","ti": 1047071223,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0B","ti": 1047071224,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0D","ti": 1047071225,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0A","ti": 0000000010,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0D","ti": 0000000012,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0C","ti": 1047130533,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0A","ti": 0000000026,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0A","ti": 0000000180,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0B","ti": 0000000206,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "09","ti": 0000000212,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "08","ti": 0000000383,"to": 0},
    {"type": 30,"tag": " __START__","sensors": "00","ti": 0000001562,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0A","ti": 0000001563,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0B","ti": 0000001564,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0D","ti": 1047161632,"to": 0},
    {"type": 30,"tag": " __START__","sensors": "00","ti": 1047161875,"to": 0},
    {"type": 30,"tag": "*NETEVENT*","sensors": "0B","ti": 1047161876,"to": 0}
],
"response":"ok"} 
```

对于*IE*工作正常，在*Chrome*中出现`"Syntax error: unexpected number"`，在*Firefox*中消息是`"SyntaxError: JSON.parse: expected ',' or '}' after property value in object"`

在各种在线 JSON 解析器和验证器中，响应的格式似乎没问题，但在 Firefox 和 chrome 中不起作用。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-08T14:28:41.540

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-01-08T07:28:27.287

去掉json中数字前面的0

# .net - 在 .NET 中生成存根或模拟方法

> ID：15296197
> 
> 赞同：2
> 
> 时间：2013-03-08T14:25:09.723
> 
> 标签：.net, unit-testing, testing, stub

我正在编写一个执行如下逻辑的单元测试：

```
SomeObject obj1 = new SomeObject();
obj1.SomeMethod(args); 
```

内部`SomeMethod`：

```
public void SomeMethod(*Some Args*){     
    AnotherObject obj2 = new AnotherObject();
    Obj2.OtherMethod();
} 
```

在我的测试中，我不关心 Obj2.OtherMethod() 的真正作用，我希望测试忽略它。所以我认为生成一个存根会为我修复它，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:30:53.560

这是一种方法。如果您有一个由 AnotherObject 实现的接口（例如，IAnother，它至少具有 AnotherMethod 作为方法），您的正常执行路径会将 AnotherObject 的实例传递给 SomeMethod。

然后为了测试，您可以传递一个实现 IAnother 接口的模拟对象 - 通过使用模拟框架或自己编写一个。

所以你会有：

```
Public void SomeMethod(IAnother anotherObject)
{     
  anotherObbject.OtherMethod();
} 
```

和

```
Public class MyMock : IAnother... 
```

用于检测 -

```
IAnother another = new MyMock();
..SomeMethod(myMock) 
```

但在真正的代码中

```
IAnother = new AnotherObject()... 
```

你明白了。

# visual-studio-2010 - 无法加载 Visual Studio 2010 项目

> ID：15296200
> 
> 赞同：1
> 
> 时间：2013-03-08T14:25:20.523
> 
> 标签：visual-studio-2010, load, project

从 2008 年到 2010 年，我已经成功地转换了带有两个项目（类库、Web 应用程序）的 Visual Studio 解决方案。我可以在没有项目的情况下在一个环境（Windows 8）中打开带有项目的解决方案。

在另一个装有 Visual Studio 2010 的系统 (Windows Server 2008 R2) 上，项目未加载。重新加载失败；文件很快就会显示出来，然后再次标记为不可用。

我不知道为什么会这样。它可能是视觉工作室缺少的补丁吗？现在，我有以下安装：

![在此处输入图像描述](../Images/fce3d54819f9b4208ddfffd75959d6a8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:32:03.407

Visual Studio Shell 无法加载这些类型的项目。

# jquery - 一组行中的悬停高亮效果

> ID：15296211
> 
> 赞同：5
> 
> 时间：2013-03-08T14:25:38.633
> 
> 标签：jquery, css

我有一个很大的表，按如下所示的`data`属性分组：

```
<table>
    <tr data-group="666"><td></td></tr>
    <tr data-group="666"><td></td></tr>

    <tr data-group="2"><td></td></tr>
    <tr data-group="2"><td></td></tr>

    <tr data-group="XXXX"><td></td></tr>
    <tr data-group="XXXX"><td></td></tr>
</table> 
```

我事先不知道可能组的值（可能超过 50 个组）。它们是动态生成的。

现在我正在使用 jQuery 来创建悬停高亮效果，但速度有点慢。我想知道是否有任何方法可以使用 CSS 来实现。

这就是我现在正在使用的：

```
$('tr').live('hover', function() {
        $('tr[data-group="'+$(this).data('group')+ '"]').toggleClass('hover');
}); 
```

工作演示：http: [//jsfiddle.net/MW69S/](http://jsfiddle.net/MW69S/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T14:39:36.783

[为您分叉了一个工作演示](http://jsfiddle.net/barney/c7GYr/)。`tbody`您可以使用多个元素来实现这一点（只要行总是分组） 。

```
<table>
    <tbody data-group="666">
        <tr><td>aaaa</td></tr>
        <tr><td>bbbbb</td></tr>
    </tbody>
    <tbody data-group="2">
        <tr><td>aaaa</td></tr>
        <tr><td>bbbb</td></tr>
    </tbody>
    <tbody data-group="XXXX">
        <tr><td>aaaa</td></tr>
        <tr><td>bbbb</td></tr>
    </tbody>
</table> 
```

然后，您可以使用更改后的 CSS 规则：

```
tbody:hover{
    background:#ff00ff;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:35:22.373

不幸的是，没有办法通过 CSS 基于使用该属性选择器将鼠标悬停在一行上来突出显示其他行。您需要使用某种 javascript 才能做到这一点。

但是，我建议通过将调用更改为以下内容来提高现有 jQuery 的性能：

```
$('tr[data-group]').on('hover', function() {
  var t = $(this);
  t.siblings('[data-group='+t.attr('data-group')+']').toggleClass('hover');
}); 
```

这应该会加快整个过程，因为您正在增加选择器的特异性，从而减少 jQuery 的挖掘工作，以便找到您正在寻找的元素。

# wordpress - 将所有页面从一个域重定向到另一个域

> ID：15296216
> 
> 赞同：2
> 
> 时间：2013-03-08T14:25:56.740
> 
> 标签：wordpress, .htaccess, http-status-code-301, url-redirection

我见过几个关于从一个域到另一个域的 301 重定向的问题。这个问题指的是一种特殊情况。

我有一个指向 /public_html/sitehosting 的网站 domain1.com

出于几个原因，我现在不会讨论，我们决定将站点移动到一个新域 domain2.com，该域也映射到 /public_html/sitehosting

如何创建 301 重定向，以便将所有 domain1.com URL 重定向到 domain2.com 上完全相同的 URL？

我们希望此重定向以保留 Google PR 汁...domain1.com 有一个相当不错的页面排名。当 domain1.com 在大约 6 个月后到期时，我们不打算对其进行续订。

PS 我正在使用带有“seo”永久链接的 WordPress。

PPS 我知道因为两个域都映射到同一个文件夹，所以任何 domain1.com URL 都会导致相同的内容。但是PR汁会这样转移到domain2.com吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:35:20.520

将此代码放在**常规 wordpress 代码之前的**`.htaccess`目录`DOCUMENT_ROOT`中：

 **```
RewriteCond %{HTTP_HOST} ^(www\.)?domain1\.com$ [NC]
RewriteRule ^ http://domain2.com%{REQUEST_URI} [R=301,L] 
```**

# php - 处理 HTML WYSIWYG 编辑器

> ID：15296220
> 
> 赞同：2
> 
> 时间：2013-03-08T14:26:06.290
> 
> 标签：php, html, wysiwyg

我使用 contentEditable="true" 构建了一个简单、轻量级的 WYSIWYG HTML 编辑器，通过 javascript 插入 HTML 标签。

一切都很好，除了我不知道提交、验证和将输入插入数据库的最佳方式。我担心有人可能会插入自己的标签并弄乱输出。

到目前为止，我最好的想法是在将输入插入 batabase 之前使用 PHP 将所有有效标签转换为 BBCode，然后清除所有其他标签。这是传统的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:32:50.403

您可能希望通过[HTML Purifier](http://htmlpurifier.org/)之类的工具来运行它，以确保去除任何恶意代码。

我不确定 HTML Purifier 是否已经这样做了，但您还想在存储数据之前使用`htmlentities`或`htmlspecialchars`删除任何与数据库攻击相关的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:30:20.577

是的。另一种方法是在您的所见即所得编辑器中转换您的标签。无论哪种方式都无法帮助您解决“从不信任用户输入数据”，因此无论如何您都必须验证该代码。您必须假设它可能已损坏。

# mysql - MySQL如何从数据库中删除多个文件

> ID：15296221
> 
> 赞同：-1
> 
> 时间：2013-03-08T14:26:07.590
> 
> 标签：mysql, sql

我想同时从数据库中删除许多表，我怎样才能实现这样的目标？有什么特别的查询或方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:28:50.877

从[手册](http://dev.mysql.com/doc/refman/5.0/en/delete.html)：

> 您可以在一个语句中指定多个表，以`DELETE`根据`WHERE`子句中的特定条件从一个或多个表中删除行。
> 
> 多表语法：

```
DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    tbl_name[.*] [, tbl_name[.*]] ...
    FROM table_references
    [WHERE where_condition] 
```

> 对于多表语法，`DELETE`从每个 tbl_name 中删除满足条件的行。
> 
> 对于第一个多表语法，仅删除 FROM 子句之前列出的表中的匹配行。对于第二种多表语法，仅删除 FROM 子句（在 USING 子句之前）中列出的表中的匹配行。效果是您可以同时从许多表中删除行，并拥有仅用于搜索的附加表：

```
DELETE t1, t2 FROM t1 INNER JOIN t2 INNER JOIN t3
WHERE t1.id=t2.id AND t2.id=t3.id; 
```

> 或者：

```
DELETE FROM t1, t2 USING t1 INNER JOIN t2 INNER JOIN t3
WHERE t1.id=t2.id AND t2.id=t3.id; 
```

# c++ - C++ 使用 wstring 分割 unicode 分隔的字符串

> ID：15296224
> 
> 赞同：1
> 
> 时间：2013-03-08T14:26:19.617
> 
> 标签：c++, unicode, wchar-t, wstring

我正在尝试完成主题任务，但我的代码没有拆分。这是主要功能：

```
#define SQL_TEXT Latin_Text
#include <iostream>
#define SQL_TEXT Latin_Text
#include <sqltypes_td.h>
#include "Split.h"
#include <string>
#include <stdio.h>
#include <vector>
#include <cstring>

using namespace std;
int main ()
{
    VARCHAR_LATIN *result = new VARCHAR_LATIN[512];
    wchar_t *s1 = (wchar_t *)"Myýnameýisýzeeshan";
    **splitstringwc s(s1);
vector<wstring> flds = s.splitwc((wchar_t)'ý');**
    wstring rs = flds[1];
    wcout<<rs<<endl;
for (int k = 0; k < flds.size(); k++)
        cout << k << " => " << flds[k].data() << endl;

    cout<<result;
    return 0;
} 
```

splitstringwc 类的代码如下：

```
public:
splitstringwc(wchar_t *s) : wstring(s) { };
vector<wstring>& splitwc(wchar_t delim, int rep=0);
};

vector<wstring>& splitstringwc::splitwc(wchar_t delim, int rep) {
if (!flds1.empty()) flds1.clear();  // empty vector if necessary
wstring ws = data();
wcout<<ws<<endl;
//wcout<<delim<<endl;

//wstring ws;
//int j = StringToWString(ws, work);
wstring buf = (wchar_t *)"";
int i = 0;
while (i < ws.size()) {
    if (ws.at(i) != delim)
        buf += ws.at(i);
    else if (rep == 1) {
        flds1.push_back(buf);
        buf = (wchar_t *)"";
    } else if (buf.size() > 0) {
        flds1.push_back(buf);
        buf = (wchar_t *)"";
    }
    i++;
}
if (!buf.empty())
    flds1.push_back(buf);
return flds1; 
```

}

代码不会拆分输入字符串，当我尝试调试时，我在以下位置遇到分段错误：wstring ws = data();

请帮忙...............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:04:51.900

使用 strtok 而不是我自己的拆分函数，是根据 unicode 分隔符拆分字符串。

代码如下：

```
str = "Myýnameýisýzeeshan";
char *pch;
pch = strtok(str, "ý");
while (pch != NULL)
{
    printf("%s\n", pch);
    pch = strtok(NULL, "ý");
} 
```

请注意，str 由由 UNICODE 分隔符分隔的 ANSI 字符串组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:28:39.373

在处理宽字符串时，您不能使用普通的字符串和字符文字。他们也必须是宽字符，比如

```
const wchar_t *s1 = L"Myýnameýisýzeeshan"; 
```

注意`L`文字前面的，这使字符串成为宽字符串。

同样用于字符文字：

```
s.splitwc(L'ý') 
```

# grails - 嵌套内联域类编辑

> ID：15296228
> 
> 赞同：0
> 
> 时间：2013-03-08T14:26:29.337
> 
> 标签：grails, groovy, grails-orm

我有一个名为的域类`UserForm`，其中包含一个名为 List 的对象`securityVerifications`

```
class UserForm {
    List securityVerifications = new ArrayList()
    static hasMany = [
        securityVerifications : SecurityVerification
    ]
} 
```

然而，域类`SecurityVerification`也有一个名为的 List 对象`questions`

我要做的是为用户构建一个表单来编辑这些 List 对象。

我可以毫无问题地获得`SecurityVerification`要保存的实例，但我无法获得`Question`要保存的实例。

我`UserController`现在只是通过添加逻辑来生成`log.debug`任何验证或错误以进行`User`保存。

而且我的观点相当复杂，但基本上输入字段具有以下作为`i`索引`SecurityVerification`和索引`j``Question`

```
name="securityVerifications[${i}].questions[${j}].<field>" 
```

如何获取嵌套列表对象以保存在单个视图和控制器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:23:29.013

解决了我的问题。基本上域类`Question`具有外键关系属性。

```
class Question {
    SomeClass someClass
} 
```

将输入字段和选项传递回的方法`UserFormController`无法将`String`id 与类相关联。抛出类型错误。

通过解决这个问题，我使用了原始数据类型`Long`

```
class Question {
    Long someClassId
} 
```

当谈到 Show 或 post-save 编辑时，我只是做了：

```
SomeClass.get(question.someclassID) 
```

# windows-runtime - 是否可以在 Windows Phone 的 Windows 运行时中创建未密封的基 ref 类？

> ID：15296230
> 
> 赞同：3
> 
> 时间：2013-03-08T14:26:38.057
> 
> 标签：windows-runtime, windows-phone-8, c++-cx

是否可以在 Windows 运行时的 Windows Phone 8 变体中创建其他公共 ref 类可以使用的基类？

对于 Windows 应用商店应用程序[，MSDN 记录了执行此操作的方法](http://msdn.microsoft.com/en-gb/library/windows/apps/hh699870.aspx)（见下文）。

然而，这依赖于`Windows::UI::Xaml::DependencyObject`作为允许的未密封基类。

由于 Windows Phone 8 没有 C++/XAML 编程能力，因此该类不可用。不允许创建在公共 ref 类中可见的顶级对象，因为这会发出编译器警告。

是否有另一个合适的基类可以在 Windows Phone 8 中使用来代替`Windows::UI::Xaml::DependencyObject`？

```
namespace InheritanceTest2 
{
    namespace WFM = Windows::Foundation::Metadata;

    // Base class. No public constructor.
    [WFM::WebHostHidden]
    public ref class Base : Windows::UI::Xaml::DependencyObject 
       // DependencyObject NOT AVAILABLE ON WP8!
    {
    internal:
        Base(){}
    protected:
        virtual void DoSomething (){}
        property Windows::UI::Xaml::DependencyProperty^ WidthProperty;
};

// Class intended for use by client code across ABI.
// Declared as sealed with public constructor.
public ref class MyPublicClass sealed : Base
{
public:
    MyPublicClass(){}
    //...
}; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:35:10.393

[http://channel9.msdn.com/Events/Build/2012/3-049](http://channel9.msdn.com/Events/Build/2012/3-049)

> WinRT 并不真正支持类继承的概念。Windows 8 中的 XAML 控件有一个特殊情况，但我们不支持 Windows Phone 8 上的 C++ XAML。
> 
> 彼得·托尔 (MSFT)

# c# - 在 MVC 操作中仅绑定模型的子集

> ID：15296234
> 
> 赞同：1
> 
> 时间：2013-03-08T14:26:44.757
> 
> 标签：c#, asp.net-mvc-4

我想在一个页面上有多个表单，每个表单都显示在一个花哨的选项卡上。我想我会创建一个容器模型来保存工作实际发生的模型。然后，我将为控制器中的每个表单（/选项卡）创建处理程序，接受特定模型作为我要使用的参数。

考虑以下模型：

```
public class FormCollection
{
    public FormsContainer()
    {
        Form1 = new Form1();
        Form2 = new Form2();
    }
    public Form1 Form1 { get; set; }
    public Form2 Form2 { get; set; }
}

public class Form1
{
    public string PropNameCollision { get; set; }

    public DateTime? Form1Date { get; set; }
}

public class Form2
{
    public string PropNameCollision { get; set; }

    public DateTime? Form2Date { get; set; }
} 
```

在`FormController`控制器中：

```
public ActionResult Form1Handler(Form1 model)
{
    return Content("Doing Form1");
}
public ActionResult Form2Handler(Form2 model)
{
    return Content("Doing Form2");
} 
```

还有一个观点：

```
@model MvcApp.Models.FormCollection
<section id="tab1">
@using (Html.BeingForm("Form1Handler", "Form"))
{
    @Html.TextboxFor(m => m.Form1.PropNameCollision)
    @Html.TextboxFor(m => m.Form1.Form1Date)
    <input type="submit"/>
}
</section>
<section id="tab2">
@using (Html.BeingForm("Form2Handler", "Form"))
{
    @Html.TextboxFor(m => m.Form2.PropNameCollision)
    @Html.TextboxFor(m => m.Form2.Form2Date)
    <input type="submit"/>
}
</section> 
```

当我提交任一表单时，默认模型绑定器无法匹配模型和到达上下文的内容，因为例如绑定`Form1`的`PropNameCollision`它会期望一个值，`PropNameCollision`而是`Form1.PropNameCollision`到达，因为这是由助手生成的原始 HTML 标记：

```
<input type="text" id="Form1_PropNameCollision" name="Form1.PropNameCollision" ... /> 
```

**问题**：是否有一种聪明的方法来创建一个在上下文中查找特定类型并绑定+返回的绑定器？我在重写默认绑定器时做了一些涂鸦`BindModel`，设法将基元与反射绑定，但路径似乎并不理想（考虑到复杂类型、可空值等）。

**编辑**：我想避免接受`FormCollection`模型，因为我想束手无策，这意味着我不想意外使用我不应该使用的数据。假设其他人需要使用代码，或者我在 6 个月后回到它，我忘记了需要分离子类的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:34:19.547

将您的表单放在部分视图中，然后像这样将它们绑定到您的属性

```
@Html.Partial("PartialViewForm1", model.Form1)
@Html.Partial("PartialViewForm2", model.Form2) 
```

然后你的主视图可以被强类型化到 FormsContainer 并且你的部分视图可以被强类型化到 Form1 和 Form2。

尽管在您的情况下，我只有一个名为 form 的类，因为两个类的属性相同，并且仅具有 2 个此类属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:44:32.247

如果我正确理解了您的情况，那么您可能想尝试一个自定义模型绑定器，如[该问题](https://stackoverflow.com/questions/10555448/mvc3-razor-editortemplate-with-abstract-classes)的接受答案中所述。总结一下：

*   从基类继承不同的模型
*   给基类一个方法，该方法返回一个字符串，标识特定实例属于哪个类
*   为基类设置一个自定义模型绑定器，该绑定器在类的传入实例上调用识别方法，并使用结果来确定它实际上是哪个派生类，并返回它的一个实例，并带有适当绑定的值。
*   （如有必要）为各种派生类提供 EditorTemplates 并用于`@Html.EditorFor`显示与各种类实例相关的表单部分。

根据您的控制器逻辑，您可能仍需要将它们作为基类实例接收，并执行一些逻辑来确定将它们转换为什么（不是很漂亮，但它有效）或为基类提供相关方法，以便派生类可以提供自己的实现并利用一点多态性（一种更优雅的方法，但有时更棘手）。

# maven - 如何包含来自另一个 Maven 项目的配置数据？

> ID：15296235
> 
> 赞同：0
> 
> 时间：2013-03-08T14:26:45.857
> 
> 标签：maven

我有一个基于 Maven 的多存储库项目，其中一些项目具有多个模块。在本地运行码头时使用了一些`jetty-maven-plugin`配置，这些配置参考了项目本地`src/etc/jetty-plus.xml`文件中的数据库连接详细信息。它们在运行集成测试和开发人员在本地运行应用程序时使用。

我正在尝试将数据库创建和升级脚本分开，并希望将码头文件分离到一个单独的 Maven 项目中，并让其他项目声明对这个新项目中模块的依赖关系。

我正在考虑只为这些文件创建一个单独的模块，并声明某种依赖关系，maven jetty 插件可以访问。我的主要问题是如何配置当前具有此配置的码头插件-我希望能够从依赖项中获取此文件-但此文件是开发人员特定的，不是存储库代码的一部分。

```
<webAppConfig>
    <contextPath>/someService</contextPath>
    <jettyEnvXml>src/etc/jetty-plus.xml</jettyEnvXml>
</webAppConfig> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:50:23.183

也许maven依赖插件就是你需要的。它有一个[解包](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html)目标，允许将其他工件的一部分（例如您的配置数据）复制到您的项目中。看一下页面的[例子](http://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-artifacts.html)。

# ruby - 在哪里存储带有 ORM 的列描述（尤其是 Sequel）？

> ID：15296250
> 
> 赞同：3
> 
> 时间：2013-03-08T14:27:38.457
> 
> 标签：ruby, activerecord, orm, documentation, sequel

当我使用像 Sequel 这样的 ORM 时，模型的列由连接的数据库定义。如何获取表格列的文档？

**示例**（续集，但我认为AR的原理是一样的）：

我用这个迁移创建了一个表：

```
Sequel.migration do
  up do
    create_table(:person) do
      primary_key :id
      String :name, :null=>false
    end
  end
  down do
    drop_table(:person)
  end
end 
```

没有办法向数据库添加列描述（或者有没有办法？请不要使用特定于数据库的解决方案）。

对应的模型定义为

```
class Person < Sequel::Model
end 
```

当我使用 rdoc 生成文档时，Person 的文档是“空的”，我没有得到列的描述。

我可以为这里的列添加一个 getter 方法：

```
class Person < Sequel::Model
  #Name of the person
  attr_reader :name
end 
```

我得到了 rdoc 的描述，但有两个问题：

*   `Person#name`始终为零，与数据库的连接丢失
*   如果它会起作用，那就违反了 DRY 原则。

我可以添加所有列的列表：

```
#Columns:
# * name: Name of the person
# ...
class Person < Sequel::Model
end 
```

但又一次：

*   这打破了 DRY 原则。
*   我想查看所有可用的列，例如 getter 方法。

我创建了[annotate-gem](http://rubygems.org/gems/annotate)。但是这个 gem 删除了以前的评论，它只添加了技术信息。我无法添加评论。

其他一些模型框架，如 datamapper、mongomaper 和 mongoid 直接定义了模型中的属性。（[来源](http://rails-bestpractices.com/posts/68-annotate-your-models)）但我不想改变我的 ORM。

所以我的问题是：存储列描述的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:22:27.257

到目前为止没有答案 - 也许没有最佳实践。

与此同时，我有一个想法，修改了[annotate-gem](http://rubygems.org/gems/annotate)的想法。

附加的脚本会创建一个包含模型文档的新 ruby​​ 文件。这个 ruby​​ 文件可能不会添加到您的应用程序中（它会破坏模型），但您可以将它添加到您的 rdoc 调用中。

在以下脚本的末尾添加以下代码：

```
require 'your_application' #Get your model definitions

#Define ModelDocumentation with comments for the different fields
doc = ModelDoc.new(
  #reference with table.field
  'tables.field1' => 'field one of table tables',
  #reference with model.field
  'Table#field2' => "field two of table, referenced by model Table",
)
doc.save('my_doc.rb') 
```

现在脚本：

```
#encoding: utf-8
=begin rdoc
Generate documentation file for Model, 
enriched with data from docdata
=end

=begin rdoc
Get all subclasses from a class.

Code from http://stackoverflow.com/a/436724/676874
=end
class Class
  def subclasses
    ObjectSpace.each_object(Class).select { |klass| klass < self }
  end
end  

=begin rdoc
Class to generate a Model-documentation

==Usage:

Write a script like this:

  require 'my_application' 
  require 'model_doc' #this script

  doc = ModelDoc.new(
    #reference with table.field
    'tables.field1' => 'field one of table tables',
    #reference with model.field
    'Table#field2' => "field two of table, referenced by model Table",
  )
  doc.save('my_doc.rb')

my_doc.rb can be included to your library. 
Don't load it to your application!
Only add it to your documentation with rdoc.
=end
class ModelDoc
=begin rdoc
Class to generate a Model-documentation.

Comments are a hash with.

Keys may be:
* Modelname#field
* tablename.field
=end
  def initialize( comments = {} )
    @comments = comments
  end

  def save(filename)
    docfile = File.new(filename, 'w')

    puts "(Re-)Generate #{docfile.path}"
    docfile << <<doc
=begin
This file is generated by #{__FILE__},
based on data from #{Sequel::Model.db.inspect}

Don't use this code in your implementation!
This code will overwrite your real model.

This is only for usage with rdoc.

=end
doc
    Sequel::Model.subclasses.each{|model|
      docfile << "\n\n#\n"
      docfile << "#Model for table '#{model.table_name}'\n"
      docfile << "#\n"
      docfile << "class #{model} < Sequel::Model\n"
      model.columns.each{|column|
        comment = @comments[[model, column].join('#')]
        comment = @comments[[model.table_name, column].join('.')] unless comment

        docfile << "  #\n  #table field #{field_description(model.table_name, column, model.db_schema[column]).join("\n  #* ")}\n"
        if comment
          docfile << comment.gsub(/^/, "  #")
          docfile << "\n"
        end
        #~ docfile << "  #\n#accessor generated by Model\n"
        docfile << "  attr_reader #{column.inspect}\n"
      }
      docfile << "end\n\n"
    }

    docfile.close
  end

  def field_description(table_name, column, db_schema)
    [
      "#{table_name}.#{column} (#{db_schema[:type]}/#{db_schema[:db_type]})",
      db_schema[:primary_key] ? "This is a key field" : nil,
      "Default is #{db_schema[:default] || 'undefined'}",
      #fixme: ruby_default
      "Null-values are #{'not ' unless db_schema[:allow_null]}allowed",
    ].compact
  end
end #ModelDoc 
```

该脚本仅适用于 Sequel，但我认为它可以适用于 AR。

# xaml - 尝试在 xaml 中重用对象的路径

> ID：15296253
> 
> 赞同：1
> 
> 时间：2013-03-08T14:27:45.553
> 
> 标签：xaml, path

我想绑定到不同对象的 xaml 文件中有几个项目。我展示了一个带有两个按钮的示例：

```
<Button Content="Edit Operators" 
Command="{Binding ElementName=treeRevisions,
Path=SelectedItem.WorkOrderRev.Operators.EditCommand}" CommandParameter="" />
<Button Content="Edit MyData" 
Command="{Binding ElementName=treeRevisions,
Path=SelectedItem.WorkOrderRev.MyData.EditCommand}" CommandParameter="" /> 
```

如您所见，两个按钮的文本**“Binding ElementName=treeRevisions, Path=SelectedItem.WorkOrderRev”**是相同的。它有效，我可以像这样使用它，但我也有很多其他控件。有什么方法可以缩短它并附加**“.Operators.EditCommand”**等吗？我到处寻找解决方案，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:39:24.450

有几种方法可以做到这一点。我会给你一个非常棘手的。警告这对于 wpf pro 来说是一个疯狂的答案，但它确实有效。哈哈哈……

```
 public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new { D = "Hello" };
        }

        public static bool GetDoMyBinding(DependencyObject obj)
        {
            return (bool)obj.GetValue(DoMyBindingProperty);
        }

        public static void SetDoMyBinding(DependencyObject obj, bool value)
        {
            obj.SetValue(DoMyBindingProperty, value);
        }

        // Using a DependencyProperty as the backing store for DoMyBinding.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty DoMyBindingProperty =
            DependencyProperty.RegisterAttached("DoMyBinding", typeof(bool),  typeof(MainWindow), new PropertyMetadata(false, new PropertyChangedCallback(OnDoMyBindingChanged)));

        private static void OnDoMyBindingChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            Binding binding = new Binding("D");
            binding.Mode = BindingMode.OneWay;
            if (d is Button)
            {
                Button b = d as Button;
                b.SetBinding(Button.ContentProperty, binding);
            }
            if (d is TextBlock)
            {
                TextBlock tb = d as TextBlock;
                tb.SetBinding(TextBlock.TextProperty, binding);
            }
        } 
```

您的 XAML 将如下所示：

```
 <Window x:Class="BindingTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:local="clr-namespace:BindingTest">
    <StackPanel>
        <Button local:MainWindow.DoMyBinding="True"/>
        <Button  local:MainWindow.DoMyBinding="True"/>
        <TextBlock  local:MainWindow.DoMyBinding="True" />
    </StackPanel>
    </Window> 
```

结果将是这样的：

![在此处输入图像描述](../Images/24d79bb323f836fcc99a66dd191f8d22.png)

已编辑：相反，您可以放置​​自定义字符串，例如“.Operators.EditCommand”，但您需要更改逻辑。

玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:22:29.147

我测试了一些不同的解决方案，发现了一个非常简单的解决方案。我在周围的 Grid 上设置 DataContext，如下所示：

```
 <Grid DataContext="{Binding ElementName=treeRevisions, Path=SelectedItem.WorkOrderRev.PrintData}"> 
```

然后我可以使用这样的缩写：

```
 <TextBox Height="23" HorizontalAlignment="Left" Margin="103,63,0,0" Name="txtDescription" VerticalAlignment="Top" Width="120" 
     IsEnabled="{Binding Path=UnLocked, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}"
     IsReadOnly="{Binding Path=Locked, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}"
     Text="{Binding Path=TableData.Rows[0][description], UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
     /> 
```

其中 Locked、UnLocked 和 TableData 是 SelectedItem.WorkOrderRev.PrintData 的属性。

# svn - 如何在存储库中制作标签或点

> ID：15296260
> 
> 赞同：0
> 
> 时间：2013-03-08T14:28:02.703
> 
> 标签：svn

我一直在寻找在注册表中创建一个命名的“修订版”，它可以作为一个分支的开始，或者一个我们可以回到我们之间一切正常工作的点。

使用 SVN

我无法找出我们如何实现这一目标

知道我们如何在 Assembla 中实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:30:28.883

这称为[标签](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.tags.html)。有很多关于如何使用标签的指南，它们基本上是特定版本的名称。

# c# - 数独的锯齿状或多维数组

> ID：15296262
> 
> 赞同：0
> 
> 时间：2013-03-08T14:28:04.760
> 
> 标签：c#, multidimensional-array, jagged-arrays

我想用 c# 做一个数独。我应该使用锯齿状数组还是多维数组。为什么？

我知道锯齿状数组对于简单的数组逻辑（例如数独）更快、更有效。但也许还有其他论点？

提前致谢。

**编辑：**我需要对数独执行一些求解方法。就像回溯算法一样。我发现多维数组有更好的语法。

*我想我的问题是：*使用、实现和修改哪个最简单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T14:30:37.827

不要仅仅为了过早的优化而使事情变得复杂。使用一个简单的多维数组，然后如果稍后您发现它会导致性能问题，请重构您的代码以考虑到这一点。

*提示：您可能遇到的任何性能问题都不会来自多维或锯齿数组的选择。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T14:30:18.253

选择最能代表特定数据的数据结构。

您是否使用数组来表示具有固定尺寸的事物网格（例如，数独解决方案）？然后使用多维数组。

你想存储在数组中的东西的数量是否可以改变（例如，数独开始模式或用户为数独单元输入的潜在值）？那么也许一个锯齿状的数组会更好。

您的程序中还可以有多种类型的数组，例如用于存储解决方案的多维数组和用于存储其他数据的锯齿状数组。或完全不同的数据结构。

底线是，对于数据量相对较少的数独，性能不会成为您最大的问题。您最好尽可能清晰地构建程序并在以后担心性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:10:43.143

我个人发现像这样的锯齿状数组更容易阅读，但这取决于个人喜好。归根结底，数独不会出现性能问题，因此请使用您认为更清晰的任何一个。

# android - android：在XML中将按钮对齐到最右边

> ID：15296265
> 
> 赞同：0
> 
> 时间：2013-03-08T14:28:10.827
> 
> 标签：android, alignment

我想将一个按钮对齐到屏幕的最右侧，但我无法做到这一点。我无法在这里使用**alignParentRight**字段。这是代码：

```
<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <Button
            android:id="@+id/arrow_left"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/arrow_left"/>
    <TextView
        android:id="@+id/day_of_the_week"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
    <Button
            android:id="@+id/arrow_right"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:
            android:background="@drawable/arrow_right"/>
</LinearLayout> 
```

我该怎么办？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:29:49.147

使用 a`RelativeLayout`而不是 a`LinearLayout`作为基本布局。然后你就可以实现你想要的。

**（即）** -`android:layout_alignParentRight="true"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:33:38.873

假设您想继续使用您的 linearLayout，您是否尝试过添加

```
 android:gravity="right" 
```

到你的按钮？

如在

```
<LinearLayout 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal">
<Button
        android:id="@+id/arrow_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/arrow_left"/>
<TextView
    android:id="@+id/day_of_the_week"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
<Button
        android:id="@+id/arrow_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:background="@drawable/arrow_right"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:30:32.123

使用`Relative layout`它会像这样解决

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:42:48.910

```
use relative layout    
<RelativeLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
       >
        <Button
                android:id="@+id/arrow_left"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:background="@drawable/arrow_left"/>
        <TextView
            android:id="@+id/day_of_the_week"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            />
        <Button
                android:id="@+id/arrow_right"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:background="@drawable/arrow_right"/>
    </RelativeLayout> 
```

# r - R：矩阵误差

> ID：15296266
> 
> 赞同：0
> 
> 时间：2013-03-08T14:28:12.553
> 
> 标签：r, matrix

在 R 中，我正在模拟维纳过程之后的变量。

```
mcsim <- function(drift, dt, spot, spotdate, nap, maturity, sim)
{
  for(n in 1:sim)
  {
    for(i in 1:maturity)
    {
      dz = rnorm(1, mean=0, sd=1);
      ivol = findnap(spot[i,n], spotdate[i], nap)
      ret = (drift-(ivol^2)/2)*dt+ivol*sqrt(dt)*dz;
      spot[i+1,n] = spot[i,n]*exp(ret);

      #display counter
      cat(n/sim, "% of 100% \r");
      #flush.console()
    }
  }
  return(spot);
} 
```

`ivol`是一个实数，例如 0.23 `ret`也是一个实数

错误似乎在行中：`spot[i+1,n] = spot[i,n]*exp(ret);`

```
>Error in FR : le nombre d'objets à remplacer n'est pas multiple de la taille du remplacement

>Error in EN : the number of objects that must be replaced is not a multiple of the size of the replacement. (sorry for the rough translation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:39:31.387

（在尝试了不同的错误操作之后）
这是我认为正在发生的事情：

```
m <- matrix(1:4, ncol=2)

#      [,1] [,2]
# [1,]    1    3
# [2,]    2    4

m[2,2] <- m[2,1] * 4
# works fine
> m
#      [,1] [,2]
# [1,]    1    3
# [2,]    2    8

# will result in your error
m[2,2] <- m[1,2] * (1:2)

# Error in m[2, 2] <- m[1, 2] * (1:2) : 
#   number of items to replace is not a multiple of replacement length 
```

基本上，您正在尝试用*多个**元素*替换矩阵的元素。我推测这是正在发生的事情（您返回一个超过 1 个元素的向量）。*`exp(.)`*

# java - 使用 Netbeans 的 Swing Outline 跨列/合并单元格？

> ID：15296267
> 
> 赞同：0
> 
> 时间：2013-03-08T14:28:15.713
> 
> 标签：java, swing, jtreetable

如何使用 Netbeans 的 Swing Outline 让一个单元格跨越多个列？这不在文档中，我什至不确定从哪里开始。

请注意，我正在[尝试对](https://stackoverflow.com/questions/15231662/column-span-with-most-recent-jxtreetable)JXTreeTable 做同样的事情，但到目前为止没有成功

# php - 如何使用锚标签调用php函数？

> ID：15296270
> 
> 赞同：-1
> 
> 时间：2013-03-08T14:28:17.650
> 
> 标签：php, html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:31:14.547

你可以这样做：

```
 <a href="frndpf.php?action=dinesh">dinesh</a>
 <a href="frndpf.php?action=prashant">prashant</a> 
```

frndpf.php

```
<?php
if (isset($_GET['action']) && $_GET['action'] == 'dinesh') {
    ...
}
if (isset($_GET['action']) && $_GET['action'] == 'prashant') {
    ...
}
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T14:30:21.050

> 是否可以在锚标记中调用 PHP 函数

不是直接的。

您可以指定一个 URL。该 URL 可以由 PHP 处理。处理该 URL 的 PHP 程序的默认操作可以是调用函数（或检查查询字符串以确定调用哪个函数）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T14:32:03.703

您可以执行以下操作：

```
<a href="frndpf.php?param=dinesh">dinesh</a>
<a href="frndpf.php?param=prashant">prashant</a> 
```

比你可以`$_REQUEST['param']`在你的脚本中使用来检查它的值。

但是，php 是一种服务器端语言，您不能在客户端调用 php 函数。您可以向服务器请求一个 php 文件，它会根据传递的参数对其进行详细说明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T14:31:41.983

如果将值附加到链接；

```
<a href="frndpf.php?action=dinesh">dinesh</a>
<a href="frndpf.php?action=prashant">prashant</a> 
```

当页面重新加载时，您可以将 $_GET["action"] 的值传递给您的函数

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T14:33:10.437

PHP 是一种服务器端语言，在将任何代码发送到浏览器之前都会对其进行解析，因此您不能在代码中内联调用 PHP 函数。但是你可以从你的链接中调用一个新的 php 页面，如下所示：

```
<a href="frndpf.php?parameter=dinesh">dinesh</a>
<a href="frndpf.php?parameter=prashant">prashant</a> 
```

然后使用 GET 变量访问 frndpf.php 中的这些参数，如下所示：

```
if(isset($_GET['parameter'])){
  echo $_GET['parameter'];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T14:31:10.790

您需要将参数传递给另一个页面，然后调用该函数，例如

```
<a href="frndpf.php?name=dinesh">dinesh</a> 
```

然后用于`$_GET['name'];`获取该值，并调用该函数。

# java - 在我的代码中实现电子邮件服务

> ID：15296272
> 
> 赞同：1
> 
> 时间：2013-03-08T14:28:27.127
> 
> 标签：java, jsp, email, jakarta-mail

我一直在尝试实现以下 servlet 代码来实现电子邮件功能，但我不断收到此代码错误。请看一下...

```
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Properties;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.util.Properties;
import javax.mail.*;
import javax.mail.internet.*;
import javax.servlet.RequestDispatcher;

public class email extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String to="amanmaheshwari25@gmail.com"; //emailID at which the mail is send

    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    Session session=null;

    try{
      Properties props = new Properties();
      props.put("mail.smtp.host", "smtp.gmail.com");
      props.put("mail.smtp.socketFactory.port", "465");
      props.put("mail.smtp.socketFactory.class",
                    "javax.net.ssl.SSLSocketFactory");
      props.put("mail.smtp.auth", "true");
      props.put("mail.smtp.port", "465");

       session = Session.getDefaultInstance(props,
       new javax.mail.Authenticator() {
       protected PasswordAuthentication getPasswordAuthentication() {
       return new PasswordAuthentication("cconatus.2011@gmail.com","password");//change accordingly
       }
      });}
        catch(Exception e)
        {out.println("error234");}
      try {
      MimeMessage message = new MimeMessage(session);
       message.setFrom(new InternetAddress("ccnatus.2011@gmail.com"));//change accordingly
       message.addRecipient(Message.RecipientType.TO,new InternetAddress(to));
       message.setSubject("Pls find the message inside");
       String dd = "hey";
       message.setText(dd);

       //send message
       Transport.send(message);
       out.println("success");
           } 
      catch(Exception e)
            {out.println("error");}
      finally {            
                out.close();
            }
        } 
```

我得到的输出是：错误，即来自最后一个catch块的错误请尽快给出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:29:42.637

以下是对我有用的属性：

> mail.transport.protocol = smtp
> 
> mail.smtp.host = smtp.gmail.com
> 
> mail.smtp.auth = true
> 
> mail.smtp.starttls.enable = true
> 
> 邮件.smtp.port = 587

# java - 时间不保存在数据库中

> ID：15296274
> 
> 赞同：0
> 
> 时间：2013-03-08T14:28:30.547
> 
> 标签：java, android, sqlite

好的，这是我的场景。在我的游戏完成后，会向用户提供他完成游戏的时间，然后我的 dialog.theme 活动会立即弹出以输入用户名。该名称存储在 sqlite 数据库中。现在我的问题....时间不是。时间存储在 double 类型的变量中。当我将该值发送到我的 RezultatVreme.class 时它工作正常（然后我在弹出活动中使用它，在该活动中我向用户展示时间......它发生在我的输入名称弹出之前）。现在，我使用相同的值并将其发送到我的 ImePopup.class，并在用户输入他的姓名时使用该类来传递时间值并将其输入我的数据库中。但它不起作用。我的名字输入得很好，但时间总是 0。我尝试了 double、integer 和 long，但结果相同。这是我的游戏课，其中的一部分，

```
long tEnd = System.currentTimeMillis();
            long tDelta = tEnd - tStart;
            elapsedSeconds = tDelta / 1000.0;

            Intent i = new Intent(getApplicationContext(), RezultatVreme.class);
            i.putExtra("novoVreme", elapsedSeconds);
            startActivity(i);
            Intent ip = new Intent(getApplicationContext(), ImePopup.class);
            ip.putExtra("score", elapsedSeconds);
            startActivity(ip); 
```

这是我的弹出类：

```
public class ImePopup extends Activity implements OnClickListener{

    EditText ime;
    Button ok, odustani;
    double score;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.imepopup);

        ok = (Button) findViewById(R.id.btOK);
        odustani = (Button) findViewById(R.id.btOdustani);
        ime = (EditText) findViewById(R.id.etIme);

        ok.setOnClickListener(this);
        odustani.setOnClickListener(this);
    }

    public void onClick(View arg0) {
        switch (arg0.getId()){
        case R.id.btOK:
            boolean didItWork = true;
            try{
            String name = ime.getText().toString();

            OffDBHelper entry = new OffDBHelper(ImePopup.this);
            entry.open();
            entry.createEntry(name, score);
            entry.close();
            break;
            }catch(Exception e){
                didItWork = false;
                String error = e.toString();
                Dialog d = new Dialog(this);
                d.setTitle("Greska!");
                TextView tv = new TextView(this);
                tv.setText("Greska u upisu");
                d.setContentView(tv);
                d.show();
            }finally{
                if(didItWork){
                    Dialog d = new Dialog(this);
                    d.setTitle("Uspesno!");
                    TextView tv = new TextView(this);
                    tv.setText("Upisali ste se!");
                    d.setContentView(tv);
                    d.show();
                }
            }
        case R.id.btOdustani:

            break;
}
    }
} 
```

还有我的 OffDBHelper 类：

```
public class OffDBHelper {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_SCORE = "score";

    private static final String DATABASE_NAME = "highscores";
    private static final String DATABASE_TABLE = "highscorestable";
    public static final int DATABASE_VERSION = 1;

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                    KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                    KEY_NAME + " TEXT NOT NULL, " +
                    KEY_SCORE + " DOUBLE NOT NULL);"
                    );
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);       
        }

    }

    public OffDBHelper(Context c){
        ourContext = c;
    }

    public OffDBHelper open() throws Exception{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }
    public void close(){
        ourHelper.close();
    }

    public long createEntry(String name, double score) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, name);
        cv.put(KEY_SCORE, score);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);
    }

    public String getData() {
        String[] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_SCORE};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iScore = c.getColumnIndex(KEY_SCORE);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iScore) + "\n";
        }

        return result;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:34:34.967

你像这样在 ImePopup 中调用 DBHelper

```
OffDBHelper entry = new OffDBHelper(ImePopup.this);
entry.open();
entry.createEntry(name, score);
entry.close(); 
```

但是您永远不会将数据写入变量`score`，因此它的初始值始终为 0。

你需要从`Intent`第一个中提取你的“分数”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:47:47.317

```
double score;
double scoreR;

Bundle extras = getIntent().getExtras(); 
        if(extras !=null) {
           scoreR = extras.getDouble("score", 0);
        }

OffDBHelper entry = new OffDBHelper(ImePopup.this);
            entry.open();
            entry.createEntry(name, scoreR);
            entry.close(); 
```

# angularjs - 了解指令定义的嵌入选项？

> ID：15296284
> 
> 赞同：195
> 
> 时间：2013-03-08T14:28:50.840
> 
> 标签：angularjs, angularjs-directive

我认为这是我用 angularjs 的指令最难理解的概念之一。

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)的文档说：

> **transclude** - 编译元素的内容并使其可用于指令。通常与 ngTransclude 一起使用。嵌入的优点是链接函数接收一个预先绑定到正确范围的嵌入函数。在典型的设置中，小部件创建了一个隔离范围，但嵌入不是子范围，而是隔离范围的兄弟。这使得小部件可以拥有私有状态，并且嵌入可以绑定到父（预隔离）范围。
> 
> *   true - 嵌入指令的内容。
> *   'element' - 包含整个元素，包括以较低优先级定义的任何指令。

它说`transclude`通常与`ngTransclude`. 但是[ngTransclude](http://docs.angularjs.org/api/ng.directive:ngTransclude)文档中的示例根本不使用`ngTransclude`指令。

我想要一些很好的例子来帮助我理解这一点。为什么我们需要它？它解决了什么问题？如何使用它？

* * *

## 回答 #1

> 赞同：523
> 
> 时间：2013-03-08T16:24:29.137

考虑一个元素中名为*myDirective*的指令，并且该元素包含一些其他内容，假设：

```
<div my-directive>
    <button>some button</button>
    <a href="#">and a link</a>
</div> 
```

如果*myDirective*使用模板，您会看到 的内容`<div my-directive>`将被您的指令模板替换。所以有：

```
app.directive('myDirective', function(){
    return{
        template: '<div class="something"> This is my directive content</div>'
    }
}); 
```

将导致此渲染：

```
<div class="something"> This is my directive content</div> 
```

请注意，您的原始元素的内容`<div my-directive>` **将丢失**（或者更好地说，被替换）。所以，跟这些小伙伴说再见吧：

```
<button>some button</button>
<a href="#">and a link</a> 
```

那么，如果你想将你的`<button>...`and保存`<a href>...`在 DOM 中呢？你需要一种叫做嵌入的东西。这个概念很简单：**将内容从一个地方包含到另一个地方**。所以现在你的指令看起来像这样：

```
app.directive('myDirective', function(){
    return{
        transclude: true,
        template: '<div class="something"> This is my directive content</div> <ng-transclude></ng-transclude>'
    }
}); 
```

这将呈现：

```
<div class="something"> This is my directive content
    <button>some button</button>
    <a href="#">and a link</a>
</div>. 
```

总之，当您在使用指令时想要保留元素的内容时，基本上可以使用 transclude。

我的代码示例在[这里](http://jsfiddle.net/7LRDS/1/)。你也可以从观看[中](https://egghead.io/lessons/angularjs-transclusion-basics)受益。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2014-02-05T07:28:07.677

我认为在新版本的 AngularJS 中提及上述行为的变化很重要。我花了一个小时尝试使用 Angular 1.2.10 实现上述结果。

**带有 ng-transclude 的元素的内容不会被附加，而是被完全替换。**

所以在上面的例子中，你可以用“transclude”实现：

```
<div class="something">
    <button>some button</button>
    <a href="#">and a link</a>
</div> 
```

并不是

```
<div class="something"> This is my directive content
    <button>some button</button>
    <a href="#">and a link</a>
</div> 
```

谢谢。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-01-07T09:53:36.897

TechExplorer 说的是真的，但是您可以通过在模板中包含一个带有 ng-transclude 属性的简单容器标签（如 div 或 span）来同时拥有这两种内容。这意味着模板中的以下代码应包含所有内容

```
<div class="something"> This is my directive content <div class="something" ng-transclude></div></div> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-20T15:30:49.057

来自维基：

> “在计算机科学中，嵌入是通过引用将电子文档的部分或全部包含到一个或多个其他文档中。”

我想为嵌入添加另一个用途，那就是它改变了父子指令的编译和链接函数的执行顺序。当您想在父 DOM 之前编译子 DOM 时，这可能很有用，因为父 DOM 可能取决于子 DOM。这篇文章更深入，并且很好地阐明了它！

[http://www.jvandemo.com/the-nitty-gritty-of-compile-and-link-functions-inside-angularjs-directives-part-2-transclusion/](http://www.jvandemo.com/the-nitty-gritty-of-compile-and-link-functions-inside-angularjs-directives-part-2-transclusion/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-06T05:23:25.977

更新的[AngularJS 1.6.6 文档](https://docs.angularjs.org/guide/directive)现在有更好的解释。

**Transclude 用于创建包装其他元素的指令**

有时希望能够传入整个模板而不是字符串或对象。假设我们要创建一个“对话框”组件。对话框应该能够包装任意内容。

为此，我们需要使用**transclude**选项。请参阅下面的示例。

* * *

脚本.js

```
angular.module('docsTransclusionExample', [])
.controller('Controller', ['$scope', function($scope) {
  $scope.name = 'Tobias';
}])
.directive('myDialog', function() {
  return {
    restrict: 'E',
    transclude: true,
    scope: {},
    templateUrl: 'my-dialog.html',
    link: function(scope) {
      scope.name = 'Jeff';
    }
  };
}); 
```

索引.html

```
<div ng-controller="Controller">
  <my-dialog>Check out the contents, {{name}}!</my-dialog>
</div> 
```

我的-dialog.html

```
<div class="alert" ng-transclude></div> 
```

编译输出

```
<div ng-controller="Controller" class="ng-scope">
  <my-dialog class="ng-isolate-scope"><div class="alert" ng-transclude="">Check out the contents, Tobias!</div></my-dialog>
</div> 
```

* * *

**Transclude 使带有此选项的指令的内容可以访问指令外部而不是内部的范围。**

这在前面的示例中进行了说明。请注意，我们在 script.js 中添加了一个将 name 重新定义为 Jeff 的链接函数。通常，我们希望 {{name}} 是 Jeff。但是，我们在此示例中看到 {{name}} 绑定仍然是 Tobias。

**最佳实践**：仅`transclude: true`在您要创建包装任意内容的指令时使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-27T10:19:21.047

transclude:true 表示将指令中定义的所有元素添加到指令的模板元素中。

如果 transclude:false 则这些元素不包含在指令的最终 html 中，仅呈现指令模板。

transclude:element 表示不使用您的指令模板，仅在您的指令中定义的元素呈现为 html。

当您定义指令时，它应该限制为 E 并且当您在页面上添加它时

```
<my-directive><elements><my-directive>
<elements> is like <p>gratitude</p>
what i am talking about. 
```

# ios - 在ios中设置调用多个标签

> ID：15296288
> 
> 赞同：1
> 
> 时间：2013-03-08T14:29:06.940
> 
> 标签：ios, objective-c

我有一个电话号码变量，`agency.phone`并且我有一个标签，该号码在视图上显示`agencyPhone`

我希望能够单击标签来拨打号码，我找到了这段代码，但不确定如何在我的情况下实现它：

```
NSString *phoneNumber = [@"tel://" stringByAppendingString:mymobileNO.titleLabel.text];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]]; 
```

感谢您帮助新手！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T14:36:06.760

在 IB 中创建标签，然后将此代码添加到您的 .m 文件中

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        UITapGestureRecognizer* phone1LblGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(phone1LblTapped)];
        // if labelView is not set userInteractionEnabled, you must do so
        [agencyPhone setUserInteractionEnabled:YES];
        [agencyPhone addGestureRecognizer:phone1LblGesture];
    }

    - (void)phone1LblTapped
    {
        UIDevice *device = [UIDevice currentDevice];
        if ([[device model] isEqualToString:@"iPhone"] ) {
            NSString *phoneNumber = [@"tel://" stringByAppendingString:agencyPhone.text];
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]];
        } else {
            UIAlertView *Notpermitted=[[UIAlertView alloc] initWithTitle:@"Alert" message:@"Your device doesn't support this feature." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [Notpermitted show];
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T14:32:12.203

您应该将标签切换为按钮并添加您粘贴的代码以在按下按钮时执行。

例如：

```
- (void)callPhoneNumber:(id)sender {
  NSString *phoneNumber = [@"tel://" stringByAppendingString:mymobileNoButton.titleLabel.text];
  [[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:35:49.613

你需要`UITapGestureRecognizer`用来制作`UILabel`可点击的

```
UITapGestureRecognizer* gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(yourClickMethod:)];
[titleLabel setUserInteractionEnabled:YES];
[titleLabel addGestureRecognizer:gesture];

-(voidyourClickMethod{
NSString *phoneNumber = [@"tel://" stringByAppendingString:mymobileNO.titleLabel.text];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]];
} 
```

`userInteractionEnabled = YES`确保您设置的属性`UILabel`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T14:36:25.033

你可以处理点击 UILabel 使用`touchesBegan`

```
-(void)touchesBegan:(NSSet *) touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint point = [touch locationInView:self.view];
    CGRect labelRect = yourLabel.frame;
    if( CGRectContainsPoint (labelRect, point))
    {
       //label was clicked
       //Add phone number handling code here
    }  

} 
```

# oracle - 我怎样才能等到我所有的调度程序作业都完成？

> ID：15296289
> 
> 赞同：2
> 
> 时间：2013-03-08T14:29:08.957
> 
> 标签：oracle, plsql, oracle11g

我是我的包裹，我正在排队多个这样的工作：

```
dbms_scheduler.create_job
  ( job_name     => p_job_name
  , job_type     => 'PLSQL_BLOCK'
  , job_action   => p_sql_code
  , start_date   => SYSDATE
  , enabled      => TRUE
  , comments     => 'Running batch jobs in parallel'); 
```

一旦我为希望开始的许多并行作业完成了此操作，我需要阻止，直到所有作业都完成。

目前我不得不睡觉并轮询表格`ALL_SCHEDULER_JOB_RUN_DETAILS`并`ALL_SCHEDULER_JOBS`检查工作的状态。这似乎是一个非常丑陋的解决方案。这是我使用的 SQL：

```
PROCEDURE run_jobs
  ( p_jobs    StringTableType
  , p_sql     VARCHAR2(4000) )
IS

  l_jobs         StringTableType;
  l_status       sys_type.STRING;
  l_additional_info  sys_type.text;
  l_done         BOOLEAN;
  i              PLS_INTEGER;

BEGIN

  l_jobs := p_jobs;

  -- Submit jobs
  FOR i IN 1..l_jobs.COUNT LOOP

  dbms_scheduler.create_job
    ( job_name     => l_jobs(i)
    , job_type     => 'PLSQL_BLOCK'
    , job_action   => p_sql
    , start_date   => SYSDATE
    , enabled      => TRUE
    , comments     => 'Running batch jobs in parallel');

  END LOOP;

  -- now wait untile all jobs are finished
  l_done := FALSE;

  WHILE NOT l_done LOOP

    DBMS_LOCK.sleep(5);

    l_done := TRUE;

    i := l_jobs.FIRST;
    WHILE i IS NOT NULL LOOP

      WITH jobs_log
           AS (SELECT job_name, state status, '' additional_info
                 FROM all_scheduler_jobs
               UNION
               SELECT job_name, status, additional_info
                 FROM all_scheduler_job_run_details
               )
      SELECT status, additional_info
        INTO l_status, l_additional_info
        FROM jobs_log
       WHERE job_name = p_jobs (i);

      --Analyze job status
      CASE
        WHEN l_status = 'RUNNING' THEN
          l_done := FALSE;

        WHEN l_status = 'SUCCEEDED' THEN
          l_jobs.DELETE(i);

        WHEN l_status = 'FAILED' THEN
          l_jobs.DELETE(i);

        ELSE
          l_done := FALSE;

      END CASE;

      i := l_jobs.NEXT(i);

    END LOOP;

  END LOOP;

END run_jobs; 
```

在所有作业完成之前，如何阻止我的代码？如果有更好的方法，谁能给我一个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T15:05:22.607

当有人发布来自另一个 StackOverflow 答案的链接时，这可以使用来自`DBMS_SCHEDULER`.

[等待提交的作业在 Oracle PL/SQL 中完成？](https://stackoverflow.com/questions/4599630/waiting-for-a-submitted-job-to-finish-in-oracle-pl-sql/4600487#4600487)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:10:51.870

不幸的是，Oracle 中的会话间通信不如 OS 中的进程间通信方便。但是你可以

```
lock table ... in exclusive mode 
```

在工作中并通过以下方式执行工作终止等待

```
select ... for update 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T01:23:49.113

如果你没有很多工作，你可以使用 DBMS_LOCK 包来创建你自己的锁对象。使用一些知名名称为每个作业创建一个。让作业获取锁，主作业等待所有要释放的锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-25T09:45:31.697

```
DECLARE
  cnt NUMBER:=1;
BEGIN
  WHILE cnt>=1
  LOOP
    SELECT count(1) INTO cnt FROM dba_scheduler_running_jobs srj
    WHERE srj.job_name IN ('TEST_JOB1','TEST_JOB2');
    IF cnt>0 THEN
      dbms_lock.sleep (5);
    END IF;
  END LOOP;
  dbms_output.put_line('ASASA');  
END; 
```

# asp.net - 如何在 Asp.net MVC 4 应用程序中使用 SimpleMemberShip Provider

> ID：15296291
> 
> 赞同：11
> 
> 时间：2013-03-08T14:29:18.307
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, simplemembership

虽然我已经通过这篇文章 [http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties /](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)

但我不知道在 asp.net mvc4 应用程序中使用简单的会员提供程序是否正确。

此外，我想知道 DefaultMembership 提供者和 SimpleMembership 提供者有什么区别

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T14:47:58.270

请查看以下文章：

[SimpleMembership、Membership Providers、Universal Providers 和新的 ASP.NET 4.5 Web 窗体和 ASP.NET MVC 4 模板](http://weblogs.asp.net/jongalloway/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates)。

特别是，它在所谓的受人尊敬的 ASP.NET 门户网站上，您正在寻找的标题是“SimpleMembership：ASP.NET 会员资格的未来”。

这篇文章包含您入门所需的所有链接，并为您的问题提供所有答案。

希望这可以帮助。

# python - django-registration 应用程序和 Django 1.5 自定义用户模型

> ID：15296295
> 
> 赞同：11
> 
> 时间：2013-03-08T14:29:27.120
> 
> 标签：python, django, django-registration

我使用 django-registration 应用程序和 Django 1.5。如何创建（django 中的新功能）自定义用户模型并在注册期间保存此数据（请注意，我使用的是 django-registration）：

```
class CustomProfile(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=255)
    bank = models.CharField(max_length=255)
    address = models.CharField(max_length=255) 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T15:51:34.320

django-registration 的主分支目前与 django 1.5 不兼容。

检查[此拉取请求](https://bitbucket.org/ubernostrum/django-registration/pull-request/36/fixes-for-15-use-templateview-and-the-new/diff)。

你有三个选择：

*   修补 django-registration 的代码。您可以从拉取请求中获取所需的更改。
*   使用已经打过补丁的非官方分叉。[以这个](https://bitbucket.org/LinnTroll/django-registration-1.5)为例。
*   等待主分支的更新...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-02T05:42:39.457

此[链接](http://johnparsons.net/index.php/2013/06/28/creating-profiles-with-django-registration/#comment-456) 很好地解释了该过程并与 django-registration 1.0 一起使用

除了上面的代码之外，这里还有一些额外的指针。

要更新名字，请在 models.py 中进行更改

```
def user_registered_callback(sender, user, request, **kwargs):
profile = ExUserProfile(user = user)
profile.is_human = bool(request.POST["is_human"])
user.first_name = request.POST["firstname"]
user.save()
profile.save()

user_registered.connect(user_registered_callback) 
```

并在 forms.py 文件中

```
class ExRegistrationForm(RegistrationForm):
    is_human = forms.BooleanField(label = "Are you human?:")
    firstname = forms.CharField(max_length=30)
    lastname = forms.CharField(max_length=30) 
```

最后看到表格上的变化创建一个合适的模板。通过在您的应用程序中创建一个名为 admin.py 的文件并编写以下代码，可以在管理员中看到该配置文件

```
from django.contrib import admin
from django.contrib.auth.models import User
from django.contrib.auth.admin import UserAdmin
from prof.models import ExUserProfile

admin.site.unregister(User)

class UserProfileInline(admin.StackedInline):
    model = ExUserProfile

class UserProfileAdmin(UserAdmin):
    inlines = [ UserProfileInline, ]

admin.site.register(User, UserProfileAdmin) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T22:13:45.680

Django-registration 1.0 最近发布了。它被完全重写为使用基于类的视图和 Django 1.0 自定义用户模型支持。查看[文档](https://django-registration.readthedocs.org/)。

# google-apps-script - 无法在只读模式下为其他用户触发脚本？

> ID：15296296
> 
> 赞同：0
> 
> 时间：2013-03-08T14:29:27.280
> 
> 标签：google-apps-script

我有一个电子表格，我想以只读模式发布给其他用户。由于它包含相当多的数据，我编写了一个扩展菜单并提供快速链接的脚本。

像这样的东西：

```
function onMyOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [ {name: "Quicklink 1",     functionName: "selectRow1"},
                      {name: "Quicklink 2",     functionName: "selectRow345"},
                     ];
  ss.addMenu("Quicklinks", menuEntries);
};

function selectRow1() {
  var sheet = SpreadsheetApp.getActiveSheet();
  sheet.setActiveCell("A1");
} 
```

我为“打开”添加了一个触发器，它对我来说就像预期的那样工作。

现在，我是否正确理解没有办法让我的电子表格的其他用户/查看者可以使用此脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:40:55.813

“当电子表格以只读模式打开时，它们无法执行。” [了解触发器](https://developers.google.com/apps-script/understanding_triggers)

# c++ - wxWidgets 应用程序在尝试启动新对话框时冻结

> ID：15296297
> 
> 赞同：0
> 
> 时间：2013-03-08T14:29:27.527
> 
> 标签：c++, wxwidgets

我正在开发一个 wxWidgets 应用程序，并且我正在尝试创建一个回调，它将显示在我的自定义事件类中给出的对话框作为指向动态创建的对话框对象的指针。这样做的原因是我想要一个回调，它将启动任何不知道对话框确切类的对话框/窗口。

为此，我需要从主线程（例如回调函数）显示对话框，否则程序会遇到错误（在某些情况下它仍然运行，但通知用户它不是启动新窗口的正确方式）。

因此，我创建了新对话框，将其分配给我的自定义事件并将事件排队到主窗口。

```
wxDialog *dialog = new TelemetryDialog(MainWindow::mInstance);
DialogEvent *event = new DialogEvent(EVENT_DIALOG_SHOW, dialog);
MainWindow::mInstance->m_eventHandler->QueueEvent(*event); 
```

然后在回调函数中：

```
wxDialog *dialog = event.getDialog();
if (dialog != NULL)
{
    dialog->Show(true);
} 
```

发生的事情是对话框出现空并且程序冻结。但是如果我使用这样的回调函数：

```
wxDialog *dialog = new TelemetryDialog(this);
dialog->Show(); 
```

没关系。我一直在考虑克隆对话框对象，但这是不可能的（基类的复制构造函数是私有的）。

有没有人尝试过这样的事情？这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:50:08.980

我怀疑在工作线程中调用对话框构造函数是不行的！

不管具体问题是什么，我建议在主线程中做所有的 GUI 东西会更安全。像这样：

在您的自定义事件中，传递一个枚举整数。然后，在您的回调函数中，使用 switch 语句来构造并显示所需的对话框。

```
switch ( event.getDialogType() ) {
case TelemetryDialogType:
  dialog = new TelemetryDialog(MainWindow::mInstance);
  break;
...
}

dialog->Show(true); 
```

# jakarta-ee - 未从单例 EJB 接收到 CDI 事件

> ID：15296298
> 
> 赞同：2
> 
> 时间：2013-03-08T14:29:29.410
> 
> 标签：jakarta-ee, ejb, cdi

我在 CDI Events 上有点挣扎。我有一个几乎像这样实现为 CDI Singleton 的类：

```
import import javax.inject.Singleton;

@Singleton
public class MyClass{

    @Inject
Event<StatusUpdateEvent> events;

    public MyClass(){};

    public void myMethod(){
        events.fire(new StatusUpdateEvent());
    }
} 
```

然后我将我的消费者类实现为 EJB Singleton

```
import javax.ejb.Singleton;

@Singleton
public class MyObserver(){

    public MyObserver(){};

    public onStatusUpdateEvent(@Observes StatusUpdateEvent event){

        ...do something...

    }
} 
```

问题是当`myMethod`被调用时，没有从 myObserver 接收到任何事件。 `MyClass`包含在我的 EAR 项目的库 jar 中（jar 有 beans.xml），并且`MyObserver`是同一 EAR 的 EJB。

我究竟做错了什么？非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T22:09:06.717

CDI 注入不能跨类加载器边界工作。由于您的项目是 EAR，因此 ejb-jar 很可能位于单独的类加载器上。例如，如果您的项目结构是：

```
--EAR
  |--EAR/lib
  |--|--EAR/lib/CDIBeans.jar
  |--EJBArchive.jar 
```

那么任何 bean`CDIBean.jar`都将无法注入到您的`EJBArchive.jar`.

# python - 如何从 django 模板中的列表 fo 字典中解析数据？

> ID：15296299
> 
> 赞同：0
> 
> 时间：2013-03-08T14:29:31.140
> 
> 标签：python, dictionary

这是我的模板，数据是我想要访问每个字典的键和值的字典列表

```
<ul>
{% for item in data %}
{% for key in item.keys %}
    {% if key == 'Server Name' %}
        <li{% if forloop.last %} class='last'{% endif %}>{{ item[key] }}</li>
    {% endif %}
    {% if key == 'Server Price' %}
        <li{% if forloop.last %} class='last'{% endif %}>{{ item[key] }}</li>
    {% endif %}
{% endfor %}
</ul> 
```

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:30:08.120

只需使用`items`：

```
<ul>
{% for item in data %}
{% for key, value in item.items %}
    {% if key == 'Server Name' %}
        <li{% if forloop.last %} class='last'{% endif %}>{{ value }}</li>
    {% endif %}
    {% if key == 'Server Price' %}
        <li{% if forloop.last %} class='last'{% endif %}>{{ value }}</li>
    {% endif %}
{% endfor %}
</ul> 
```

PS：你确定你不是这个意思`forloop.parentloop.last`？

PPS：你有没有办法重新设计你的字典，让键中没有空格？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:35:18.263

这对你有用吗？

该模板允许您像在任何其他 Python 代码中一样循环遍历字典。这是非常有益的！

```
<ul>
{% for key, value in data.items %}
    {% if key == 'Server Name' %}
        <li{% if forloop.last %} class='last'{% endif %}>{{ value }}</li>
    {% endif %}
    {% if key == 'Server Price' %}
        <li{% if forloop.last %} class='last'{% endif %}>{{ value }}</li>
    {% endif %}
{% endfor %}
</ul> 
```

还是我错过了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:35:35.973

您可以像在 python 代码中的 for 循环中那样迭代键值对：

```
<ul>
{% for item in data %}
{% for key, value in item.items %}
    {% if key == 'Server Name' %}
        <li{% if forloop.last %} class='last'{% endif %}>{{ value }}</li>
    {% endif %}
    {% if key == 'Server Price' %}
        <li{% if forloop.last %} class='last'{% endif %}>{{ value }}</li>
    {% endif %}
{% endfor %}
</ul> 
```

# clojure - walk vs map 处理序列

> ID：15296300
> 
> 赞同：13
> 
> 时间：2013-03-08T14:29:39.263
> 
> 标签：clojure

据我了解，walk 和 map 都将函数应用于 seq。（walk 还允许应用`outer`函数后处理）。但是，使用一个而不是另一个的惯用案例是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T16:14:06.493

的语义`map`基本上是：将函数应用于集合中的每个项目并按顺序懒惰地返回结果：

```
(map inc #{0 1 2}) ;outputs (when realized) (1 2 3) 
```

请注意，输入是一个集合，但输出是一个序列。

walk 的语义基本上是：创建一个相同类型的集合，其中每个项目已被`inner`该项目的函数值替换，返回应用`outer`到新集合的结果：

```
(walk inc identity #{0 1 2}) ;outputs #{1 2 3} 
```

如果您查看 walk API ( [http://richhickey.github.com/clojure/clojure.walk-api.html](http://richhickey.github.com/clojure/clojure.walk-api.html) ) 中其他函数的源代码，您可以看到如何使 walk 递归（或只需使用那些其他功能）。

至于成语，我不确定。但是更复杂，因此在不需要提供的语义的情况下，`walk`您可能应该坚持使用。`map``walk`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-15T22:03:40.270

**将函数应用于 seq 是 map 的工作。当您必须遍历并递归地遍历整个结构时，请使用 walk。**

s 的一些示例`walk`可以在[ClojureDocs](http://clojuredocs.org/clojure_core/clojure.walk)中找到，也可以在 REPL 中找到，例如`(user/clojuredocs clojure.walk/postwalk)`。许多示例都是教学性的，可以而且应该在实践中使用`map`or `for`（有时`reduce`）来完成。

a 的典型用例`walk`是当您有一个希望递归处理的嵌套结构时。这可能有用的一些示例是`clojure.walk`名称空间本身，例如查看`(source clojure.walk/keywordize-keys)`. [注意，如果您想迭代或随意处理它，请使用 zippers（或`tree-seq`对于一些更简单的迭代情况）。]

想到的另一个例子是解释解析树：

```
(require '[clojure.walk :as w])

(def t [+ [* [- 6 2] [/ 9 3]] [* 2 [+ 7 8]]])

(w/postwalk #(if (and (coll? %) (fn? (first %))) (apply (first %) (next %)) %) t)
;=> 42 
```

或许有用，例如，替换`fn?`为`allowed-fn?`等来评估[edn](/questions/tagged/edn "显示标记为“edn”的问题")表达式，而不是调用功能太强大的 eval 编译器：

```
(eval t) ;=> [#<core$_PLUS_ ... ] 
```

糟糕，表单是列表，而不是向量：

```
(def s (w/postwalk #(if (coll? %) (apply list %) %) t))
s ;=> (#<core$_PLUS_ ... )
(eval s) ;=> 42 
```

啊，请注意这里的另一种用法`walk`- 递归地将结构从嵌套向量更改为嵌套列表。

一个反复思考的例子：

```
(require '[clojure.walk :as w])

(def s1 (range 8))
s1 ;=> (0 1 2 3 4 5 6 7)
(map inc s1)
;=> (1 2 3 4 5 6 7 8)
(w/postwalk #(if (number? %) (inc %) %) s1)
;=> (1 2 3 4 5 6 7 8)

(def s2 (partition 2 s1))
s2 ;=> ((0 1) (2 3) (4 5) (6 7))
(map (partial map inc) s2)
;=> ((1 2) (3 4) (5 6) (7 8))
(w/postwalk #(if (number? %) (inc %) %) s2)
;=> ((1 2) (3 4) (5 6) (7 8))

(def s3 (partition 2 s2))
s3 ;=> ((0 1) (2 3) (4 5) (6 7))
(map (partial map (partial map inc)) s3)
;=> (((1 2) (3 4)) ((5 6) (7 8)))
(w/postwalk #(if (number? %) (inc %) %) s3)
;=> (((1 2) (3 4)) ((5 6) (7 8)))

(def s4 (partition 2 s3))
s4 ;=> ((((0 1) (2 3)) ((4 5) (6 7))))
(map (partial map (partial map (partial map inc))) s4)
;=> ((((1 2) (3 4)) ((5 6) (7 8))))
(w/postwalk #(if (number? %) (inc %) %) s4)
;=> ((((1 2) (3 4)) ((5 6) (7 8)))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-15T03:41:54.953

对于`map`，我认为惯用的用例非常明确：当您需要按顺序转换所有内容时，请使用它。

对于`clojure.walk/walk`，我认为惯用的用例是：当您需要按顺序转换所有内容然后执行`apply fn`操作时。

```
(clojure.walk/walk second #(apply +  %)  [["a" 1] ["b" 2] ["c" 3]])
;; => 6

(clojure.walk/walk first #(apply concat %)  [["ab" 1] ["b" 2] ["c" 3]])
;; => (\a \b \b \c)

(mapcat first [["ab" 1] ["b" 2] ["c" 3]])
;; => (\a \b \b \c) 
```

`clojure.walk/walk`注意和之间的相似性`mapcat`，我个人认为 walk 是 mapcat 的一般形式。

# php - phpMailer：SMTP 无法验证

> ID：15296301
> 
> 赞同：0
> 
> 时间：2013-03-08T14:29:39.720
> 
> 标签：php, phpmailer

我网站上的 PHP Mailer 突然停止工作。几个月来它一直正常工作，没有任何改变，现在它`SMTP Error: Could not authenticate.`不仅向一个邮件服务器抛出错误消息，而且向我尝试使用的所有邮件服务器抛出错误消息。当我尝试使用桌面邮件客户端连接到这些邮件帐户时，它工作正常，所以它与站点/主机有关。

可能是什么问题呢？我联系了托管支持，但他们说我的邮件帐户的用户名/密码可能有误，当我说我可以通过桌面邮件客户端连接时，他们说我的脚本肯定出错了，当我什么也没说已经改变了几个月他们只是说他们不知道如何帮助我。可能是什么问题，我该如何测试？我确定这是托管服务器的错，但我无法证明这一点，因为我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:39:32.880

尝试将所有文​​件放入一些免费托管网站，例如[http://www.freehosting.com](http://www.freehosting.com)，然后尝试运行该页面。如果它在那里工作正常，那么您的托管服务器有问题。由于托管服务器的问题，大多数情况下都会出现此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:32:12.953

问题是线路

```
$mail->IsSMTP(); 
```

它工作了几个月，但今天他们改变了一些东西，并且评论这条线解决了这个问题。

# powershell - 如何自动识别进程是否停止工作（powershell？）

> ID：15296303
> 
> 赞同：0
> 
> 时间：2013-03-08T14:29:41.527
> 
> 标签：powershell, powershell-2.0

我知道如何使用 Powershell 检查进程或应用程序是否正在远程服务器上运行，但是我无法自动检查进程是否已停止工作。在这种情况下，进程看起来没问题，但应用程序没有响应。

是否可以检查我们内部开发团队制作的应用程序的这个“功能”？;）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:30:43.703

对远程机器使用 Get-Process 是可行的。有一个可用的布尔属性，称为“响应”，应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:43:51.460

或者

```
Get-WMIObject -Computername $computername -Class Win32_Process 
```

# android - Android TextView 显示内存参考

> ID：15296304
> 
> 赞同：-3
> 
> 时间：2013-03-08T14:29:44.243
> 
> 标签：android, android-layout, textview

我的 android 应用程序中有一个文本视图，它似乎显示某种内存引用，而不是我设置它显示的字符串资源。它看起来与您尝试使用 java 中的默认 toString 打印数组时发生的情况相同。任何试图发现问题的帮助都会有很大的帮助。我将在下面发布代码片段：

XML 布局

```
<TextView
    android:id="@+id/summary_name_heading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="40dp"
    android:layout_marginTop="20dp"
    android:background="@color/secondary"
    android:textColor="@color/text"
    android:textSize="22sp" /> 
```

字符串资源

```
 <string name="summary_name_heading_text">Song : </string> 
```

代码

```
TextView nameHeading = (TextView)findViewById(R.id.summary_name_heading);
nameHeading.setText(R.string.summary_name_heading_text); 
```

这是它在屏幕上显示的内容：

android.widget.TextView@417e0528

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:32:26.573

您必须将`TextView`要显示的字符串传递给 setText 方法。如果您传递 a 的实例，则将调用`TextView`的`toString()`' 方法。`TextView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:33:41.230

不确定您在活动中在做什么，但这就是您从`TextView`.

```
TextView tv = (TextView) findViewById(R.id.summary_name_heading);
String myText = tv.getText(); 
```

`myText`现在有你想要的文字。

**更新：-**

`String`在您的活动中设置。

```
String mystring = getResources().getString(R.string.summary_name_heading_string);
tv.setText(mystring); 
```

但是，正如**AC**建议的那样，尝试清理您的项目并更改字符串名称和`Id`您的`TextView`.

# jquery - 本地主机运行 jquery 两次？

> ID：15296307
> 
> 赞同：-6
> 
> 时间：2013-03-08T14:29:55.253
> 
> 标签：jquery, ruby-on-rails

几个月来我一直在开发 Rails 应用程序。今天，当我在 localhost 上运行应用程序时，jquery 似乎在每个页面上执行了两次。

我在 iMac 上运行。

一些症状是：

1.  DataTables 告诉我“无法控制初始化 DataTables”
2.  完整日历在页面上显示 2 个日历而不是 1 个
3.  引导下拉菜单不起作用

真的让我很困惑！！！

谢谢您的帮助！

更新1

当我 Cap Deploy 到 Rails 虚拟服务器时，相同的应用程序运行良好。所以，在我看来，这与我的 iMac 环境有关。

我不确定要显示什么代码。因为 jquery/javascript 代码似乎在上面的所有数字示例中触发了两次。

这是日历的视图代码（日历现在在页面上显示两次）：

```
<h2><%= current_user.employee.employee_full_name %> - Labor Month</h2>
<%= content_tag "div", id: "calendar", data: {employeeid: current_user.employee.id} do %>
<% end %> 
```

还有咖啡脚本：

```
$(document).ready ->

$('#calendar').fullCalendar
  ignoreTimezone: true,
  editable: true,
  defaultView: 'month',
  height: 500,
  slotMinutes: 30,
  selectable: true,
  selectHelper: true,

select: (start, end, allDay) ->
  title = $("#title")
  description = $("#description")
  hours = $("#hours")
  workorder = $("#workorder_id")
  actcode = $("#actcode_id")
  $("#dialog-form").dialog
    autoOpen: true
    height: 500
    width: 400
    modal: true
    buttons:
     "Create Labor": ->
       $.create "/events/",
         event:
           workorder_id: workorder.val(),
           actcode_id: actcode.val(),
           title: title.val(),
           description: description.val(),
           hours: hours.val()
           starts_at: "" + start,
           ends_at: "" + end,
           all_day: allDay,
           employee_id: $('#calendar').data('employeeid')
       $('#calendar').fullCalendar('refetchEvents')
       $(this).dialog "close"

      Cancel: ->
        $(this).dialog "close"

eventSources: [{
  url: '/events',
}],

timeFormat: 'h:mm t{ - h:mm t} ',
dragOpacity: "0.5"

eventDrop: (event, dayDelta, minuteDelta, allDay, revertFunc) ->
  updateEvent(event);

eventResize: (event, dayDelta, minuteDelta, revertFunc) ->
  updateEvent(event);

updateEvent = (the_event) ->
  $.update "/events/" + the_event.id,
    event:
      title: the_event.title,
      starts_at: "" + the_event.start,
      ends_at: "" + the_event.end,
      description: the_event.description 
```

更新3

```
Some gems I'm using related to javascript:
gem 'twitter-bootstrap-rails'
gem 'jquery-rails'
gem 'fullcalendar-rails'
gem 'jquery-rest-rails'
gem 'gmaps4rails'
gem 'bootstrap-editable-rails'
gem 'jquery-datatables-rails'
gem 'jqtree-rails' 
```

更新4

我应该看看 Chrome 检查元素吗？

更新5

@abhi 和 Ogz 向导说要删除公共资产或尝试将其放入 development.rb = config.assets.debug = false 。当我将该行添加到 development.rb 时，错误消失了。

现在我不确定接下来我应该做什么。我希望能够调试资产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:51:15.230

您最近是否切换到 turbolinks？有一个宝石可以解决这些问题。(jquery.turbolinks)

> 如果您发现在使用 jQuery Turbolinks 后某些事件被多次触发，您可能已经在 $(function()) 块中绑定了文档事件。例如，下面的这个例子可能很常见，应该避免：

```
/* BAD: don't bind 'document' events while inside $()! */
$(function() {
 $(document).on('click', 'button', function() { ... })
}); 
```

[https://github.com/kossnocorp/jquery.turbolinks#troubleshooting](https://github.com/kossnocorp/jquery.turbolinks#troubleshooting)

但是您应该考虑通过提供更多详细信息和一些代码来改进您的问题。

# android - httpauthhandler 继续设置最大尝试次数

> ID：15296314
> 
> 赞同：1
> 
> 时间：2013-03-08T14:30:17.380
> 
> 标签：android, http-authentication

如果我调用它，我遇到了 httpAuthHandler 的问题

```
httpAutHandler.proceed(field_username.getText().toString(), field_password.getText().toString()); 
```

它工作正常，但是当我向 SAP 提交错误密码时，我的帐户被阻止/禁用，因为 handler.proceed 尝试错误密码超过三遍！

我的问题是：**我可以将最大尝试设置为 httpAuthHandler.proceed(String uname, String passwd);** ?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T07:14:00.290

创造

```
private int count = 0 
```

然后在新的 WebViewClient() 中，您需要执行以下操作：

```
@Override
public void onReceivedHttpAuthRequest(WebView view, HttpAuthHandler handler, String host, String realm) {
  count++;
  if (count >= 3) {
    Toast.makeText(getBaseContext(), "Login Failed. Please Try Again.", Toast.LENGTH_LONG).show();

  } else {
    handler.proceed("here your username", "here your password");
  }
} 
```

# mysql - 在计算列上排序时的 MySQL 性能

> ID：15296321
> 
> 赞同：3
> 
> 时间：2013-03-08T14:30:30.500
> 
> 标签：mysql, performance

给定的是一个包含 300'000 条测试记录的表。

我需要做这样的选择：

```
SELECT (SQRT(POWER(ABS(posts.latitude-$lat),2)+POWER(ABS(posts.longitude-$lng),2))) AS distance
FROM table
ORDER BY distance
LIMIT 0,50 
```

每个请求的 $lat 和 $lng 都会发生变化。我怎么可能加快这样的查询？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:14:27.033

实际上，您无法优化该查询。

您正在使用计算值对结果进行排序，因此您不能使用索引。如果您使用`explain`，您可以看到您的查询是如何执行的，并且`using temporary`将出现在`extra`列中，这意味着您查询的所有数据都存储在执行排序的临时表中。

如果您只想要查询中的前 50 个匹配项也没关系，它首先要获取所有数据，将其转储到临时表中，对该表中的结果进行排序，然后将前 50 个匹配项返回给您。

如您所想，这是一个耗时且耗费内存的操作。

因此，最好的选择是在表中放置一个索引，以尽可能快地获取所需的所有行，然后对其进行处理`php`以获取所需的数据。

顺便说一下，看看[MySQL 优化指南](http://dev.mysql.com/doc/refman/5.1/en/optimization.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T14:38:20.493

使 $userParam 的列成为索引，这样查询将执行得更快。或者您可以创建一个索引视图： http: [//www.codeproject.com/Articles/199058/SQL-Server-Indexed-Views-Speed-Up-Your-Select-Quer](http://www.codeproject.com/Articles/199058/SQL-Server-Indexed-Views-Speed-Up-Your-Select-Quer)

希望这可以帮助

# xslt - XSLT 1.0 文档方法不返回节点集

> ID：15296332
> 
> 赞同：1
> 
> 时间：2013-03-08T14:30:53.570
> 
> 标签：xslt, xml-parsing

我正在尝试使用 XSLT 1.0 中的文档功能，但没有运气。

我正在转换以下 XML

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<items>
  <item>
    <item_number>ZZZ1112</item_number>
    <addl_descr_1><![CDATA[Fudge It Kit Item 1 TEST]]></addl_descr_1>
    <is_txbl>Y</is_txbl>
    <stk_unit>EACH</stk_unit>
    <item_vend_no>5338</item_vend_no>
    <weight>1.0000</weight>
    <prof_alpha_1><![CDATA[MPEX]]></prof_alpha_1>
    <prof_alpha_2><![CDATA[Nikon]]></prof_alpha_2>
    <prof_alpha_3><![CDATA[77mm]]></prof_alpha_3>
    <prof_alpha_4><![CDATA[Telephoto]]></prof_alpha_4>
    <prof_alpha_5><![CDATA[501-1000]]></prof_alpha_5>
  </item>
</items> 
```

使用以下 xslt

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
  <xsl:output method="xml" indent="yes"/>

  <xsl:variable name="manufacturer-top" select="msxsl:node-set(document('manufacturer.xml'))" />

  <xsl:template match="/items">
    <items>
      <xsl:for-each select="item">
        <item>
          <xsl:variable name="man" select="prof_alpha_1" />
          <manufacturer>
            <xsl:value-of select="$man"/>
          </manufacturer>
          <id>
            <xsl:value-of select="$manufacturer-top/select[@id='manufacturer'][option = $man]/@value"/>
          </id>
        </item>
      </xsl:for-each>
    </items>
  </xsl:template>

</xsl:stylesheet> 
```

并使用以下“查找” xml 文档

```
<?xml version="1.0" encoding="utf-8" ?>
<select id="manufacturer">
  <option value=""></option>
  <option value="476">Abdi Roble</option>
  <option value="477">ActionRunner</option>
  <option value="395">Acufine</option>
  <option value="2">Adobe</option>
  <option value="515">Agfa</option>
  <option value="390">Aja</option>
  <option value="475">AJA Video Systems</option>
  <option value="514">Albinar</option>
  <option value="513">Allary</option>
  <option value="113">Amherst Media</option>
  <option value="386">Ansman</option>
  <option value="391">AquaTech</option>
  <option value="112">Arca Swiss</option>
  <option value="474">Arch and Pillar</option>
  <option value="512">Argus</option>
  <option value="111">Aristo</option>
  <option value="110">Arkay</option>
  <option value="473">Arri</option>
  <option value="406">Audio-Tecnica </option>
  <option value="358">Aurora</option>
  <option value="109">Aurora</option>
  <option value="108">Avenger</option>
  <option value="107">Azden</option>
  <option value="106">B+W</option>
  <option value="399">b-grip</option>
  <option value="393">Ban Dust</option>
  <option value="105">Beach Tek</option>
  <option value="104">Beattie</option>
  <option value="103">Belkin</option>
  <option value="102">Benchor</option>
  <option value="101">Benro</option>
  <option value="396">Berg </option>
  <option value="100">Bergger</option>
  <option value="99">Bescor</option>
  <option value="98">Besler</option>
  <option value="97">Bestwell</option>
  <option value="96">Bibble</option>
  <option value="95">Black Rapid</option>
  <option value="526">Blackmagic Design</option>
  <option value="94">Blue Crane</option>
  <option value="93">Bongo</option>
  <option value="398">BOOTH Photographic Limited</option>
  <option value="397">Bostick &amp; Sullivan</option>
  <option value="92">Bowens</option>
  <option value="91">Bower</option>
  <option value="405">Bron Imaging Group</option>
  <option value="472">Broncolor</option>
  <option value="404">C&amp;R Enterprises</option>
  <option value="471">Cables To Go</option>
  <option value="403">Cables Umlimited</option>
  <option value="90">Cactus</option>
  <option value="89">Calumet</option>
  <option value="402">CAM Engineering</option>
  <option value="88">Cameron</option>
  <option value="87">Canham</option>
  <option value="86">Canon</option>
  <option value="362">Capture One</option>
  <option value="401">Casio</option>
  <option value="369">CBL</option>
  <option value="400">CENGAGE Learning </option>
  <option value="413">Cescolite</option>
  <option value="85">Chimera</option>
  <option value="412">Cinevate</option>
  <option value="84">Clear File</option>
  <option value="83">Cokin</option>
  <option value="82">Colorbyte</option>
  <option value="81">Colorspace</option>
  <option value="80">Colorvision</option>
  <option value="470">Contour</option>
  <option value="79">Copal</option>
  <option value="78">Corel</option>
  <option value="77">Crane</option>
  <option value="76">Creative Light</option>
  <option value="75">CTA</option>
  <option value="74">Custom Bracket</option>
  <option value="481">D &amp; P Media</option>
  <option value="72">Da-lite</option>
  <option value="73">Dahle</option>
  <option value="519">darkroom software</option>
  <option value="520">Datacolor</option>
  <option value="522">Datacolor</option>
  <option value="71">Davis &amp; Sanford</option>
  <option value="70">Dayton</option>
  <option value="115">Deardorff</option>
  <option value="114">Dedolight</option>
  <option value="155">Delkin</option>
  <option value="383">Delta</option>
  <option value="511">Denny</option>
  <option value="411">Dexter</option>
  <option value="154">Diana</option>
  <option value="410">Digital Concepts</option>
  <option value="409">DigiView</option>
  <option value="480">DIY Photography</option>
  <option value="479">DNP</option>
  <option value="153">Domke</option>
  <option value="382">Domke</option>
  <option value="408">Doran</option>
  <option value="152">Dot Line</option>
  <option value="374">Drew Gardner</option>
  <option value="151">Drobo</option>
  <option value="407">drop it MODERN</option>
  <option value="150">Dyna-lite</option>
  <option value="425">E-Filming</option>
  <option value="149">Ebony</option>
  <option value="381">Ebony</option>
  <option value="148">Edwal</option>
  <option value="147">Eiko</option>
  <option value="146">Eizo</option>
  <option value="145">Elinchrom</option>
  <option value="364">eMotion</option>
  <option value="379">Energizer</option>
  <option value="424">Epoque USA</option>
  <option value="144">Epson</option>
  <option value="143">Ethol</option>
  <option value="142">Expodisc</option>
  <option value="141">Eye-Fi</option>
  <option value="140">Ezy Grip</option>
  <option value="420">F-Stop Academy</option>
  <option value="378">Fastenal</option>
  <option value="509">Fiberbilt</option>
  <option value="423">Fiberbuilt</option>
  <option value="139">Fidelity</option>
  <option value="138">Flextight</option>
  <option value="422">Flip</option>
  <option value="137">Focal Press</option>
  <option value="136">Fomex</option>
  <option value="135">Fotodiox</option>
  <option value="377">Fotoman</option>
  <option value="134">Fotomann</option>
  <option value="421">Frame USA</option>
  <option value="478">Fred Lustig</option>
  <option value="488">Fred Marsh</option>
  <option value="487">Frio</option>
  <option value="133">Fuji</option>
  <option value="486">Gagne</option>
  <option value="419">GamiLight Concepts</option>
  <option value="132">Ganz</option>
  <option value="131">Garmin</option>
  <option value="130">Gary Fong</option>
  <option value="129">Gator</option>
  <option value="418">GenAmerica</option>
  <option value="128">Genus</option>
  <option value="127">Gepe</option>
  <option value="375">Gigapan</option>
  <option value="126">Giotto</option>
  <option value="485">GiSTEQ</option>
  <option value="417">Gisteq Corp.</option>
  <option value="125">Gitzo</option>
  <option value="508">Goerz</option>
  <option value="416">Goetschmann</option>
  <option value="521">GoPro</option>
  <option value="507">Gossen</option>
  <option value="124">Gralab</option>
  <option value="123">Graphic</option>
  <option value="376">Graphic Authority</option>
  <option value="122">Graphic Authority</option>
  <option value="415">Graslon</option>
  <option value="373">Gravity Works</option>
  <option value="121">Gretag</option>
  <option value="120">Hahnemuhle</option>
  <option value="384">Hama</option>
  <option value="119">Hanson</option>
  <option value="118">Harman</option>
  <option value="117">Harrison</option>
  <option value="116">Hasselblad</option>
  <option value="173">Heliopan</option>
  <option value="172">Hewlett Packard</option>
  <option value="170">Hi-Touch</option>
  <option value="171">Hildozine</option>
  <option value="372">HoldSLR</option>
  <option value="169">Honeywell</option>
  <option value="168">Honi</option>
  <option value="167">Hoodman</option>
  <option value="166">Horseman</option>
  <option value="484">Hosa</option>
  <option value="165">Hoya</option>
  <option value="164">Huey</option>
  <option value="163">Ikan</option>
  <option value="414">Ikeda Anba</option>
  <option value="162">Ilex</option>
  <option value="161">Ilford</option>
  <option value="160">Image Resourcs</option>
  <option value="159">Imedion</option>
  <option value="370">Impact</option>
  <option value="432">Impossible Project</option>
  <option value="158">Induro</option>
  <option value="157">InkPress</option>
  <option value="483">Innovatronix</option>
  <option value="156">Interfit</option>
  <option value="286">Itoya</option>
  <option value="285">JDI</option>
  <option value="284">Jill-E</option>
  <option value="283">Jobo</option>
  <option value="282">Joby</option>
  <option value="431">JuicedLink</option>
  <option value="281">Justrite</option>
  <option value="280">JVC</option>
  <option value="523">K-Tek</option>
  <option value="368">K-Tek</option>
  <option value="430">K.B. Canham Cameras</option>
  <option value="279">Kacey</option>
  <option value="278">Kaiser</option>
  <option value="277">Kalt</option>
  <option value="276">Kata</option>
  <option value="482">Kelly Moore</option>
  <option value="275">Kenko</option>
  <option value="367">Kiesel</option>
  <option value="274">Kingston</option>
  <option value="273">Kodak</option>
  <option value="272">Kostiner</option>
  <option value="525">Kupo</option>
  <option value="271">Lacie</option>
  <option value="270">Larson</option>
  <option value="269">Lastolite</option>
  <option value="268">Leaf</option>
  <option value="267">Lee</option>
  <option value="266">Leedal</option>
  <option value="429">Legacy Kentmere</option>
  <option value="265">Leica</option>
  <option value="264">Lenmar</option>
  <option value="263">Lensbaby</option>
  <option value="428">LensCoat</option>
  <option value="262">Lexar</option>
  <option value="261">Lexican</option>
  <option value="260">Light Impressions</option>
  <option value="427">Lindahl</option>
  <option value="259">Linhof</option>
  <option value="258">Litepanel</option>
  <option value="257">Litepanels</option>
  <option value="256">Logan</option>
  <option value="255">Lowel</option>
  <option value="254">Lowepro</option>
  <option value="253">Lumedyne</option>
  <option value="252">Lumiquest</option>
  <option value="251">Lumopro</option>
  <option value="250">Mack</option>
  <option value="493">Magazine</option>
  <option value="249">Magic Lantern</option>
  <option value="248">Mamiya</option>
  <option value="247">Manfrotto</option>
  <option value="510">Manufacturing</option>
  <option value="426">Marathon</option>
  <option value="246">Marflex</option>
  <option value="245">Marshall</option>
  <option value="392">Marumi</option>
  <option value="244">Matthews</option>
  <option value="365">Meade</option>
  <option value="440">MemoryKick</option>
  <option value="243">Metz</option>
  <option value="242">Micro-sight</option>
  <option value="345">MicroGaffer</option>
  <option value="241">Microsync</option>
  <option value="240">Microtek</option>
  <option value="239">Minolta</option>
  <option value="238">Minox</option>
  <option value="366">Monster</option>
  <option value="237">Morrison</option>
  <option value="439">Motif</option>
  <option value="380">MPEX</option>
  <option value="438">Museo</option>
  <option value="236">NEC</option>
  <option value="437">Nexto</option>
  <option value="235">NIK</option>
  <option value="234">Nikon</option>
  <option value="387">Nisha</option>
  <option value="233">Nisha</option>
  <option value="232">Nissin</option>
  <option value="436">Nite Ize</option>
  <option value="231">Norman</option>
  <option value="506">Nova</option>
  <option value="230">Novoflex</option>
  <option value="435">nuCourse</option>
  <option value="229">Olympus</option>
  <option value="228">Omega</option>
  <option value="227">onOne</option>
  <option value="226">Optech</option>
  <option value="225">Opus</option>
  <option value="224">Orbis</option>
  <option value="223">Orient</option>
  <option value="434">Pana-Scan</option>
  <option value="394">Pana-Vue</option>
  <option value="222">Panasonic</option>
  <option value="433">Pandigital</option>
  <option value="465">Pantone</option>
  <option value="221">Paramount</option>
  <option value="220">Paterson</option>
  <option value="363">Peach Pit</option>
  <option value="219">Peak</option>
  <option value="359">Pearstone</option>
  <option value="464">Pearstone</option>
  <option value="218">Pec</option>
  <option value="463">Peerless</option>
  <option value="217">Pelican</option>
  <option value="216">Pentax</option>
  <option value="215">Phase One</option>
  <option value="214">Phoenix</option>
  <option value="462">Photo Master</option>
  <option value="360">Photo Vision</option>
  <option value="213">Photoflex</option>
  <option value="212">Photogenic</option>
  <option value="461">Photogizzmo</option>
  <option value="211">Photographic Solutions</option>
  <option value="361">Photographic Solutions</option>
  <option value="460">PhotoshopCAFE</option>
  <option value="459">Phottix</option>
  <option value="210">Pocket Wizard</option>
  <option value="458">Polaris</option>
  <option value="209">Polaroid</option>
  <option value="208">Pony</option>
  <option value="207">Powerex</option>
  <option value="505">Praktica</option>
  <option value="206">Premier</option>
  <option value="205">Premier Art</option>
  <option value="204">Print File</option>
  <option value="203">Profoto</option>
  <option value="504">Promaster</option>
  <option value="457">ProMold</option>
  <option value="456">Proof File</option>
  <option value="455">Provista</option>
  <option value="503">QP Card</option>
  <option value="502">Quantaray</option>
  <option value="202">Quantum</option>
  <option value="201">Radiopopper</option>
  <option value="200">Ray Flash</option>
  <option value="199">Raynox</option>
  <option value="198">RedRock</option>
  <option value="197">RedWing</option>
  <option value="196">Reflexite</option>
  <option value="454">RepairTech</option>
  <option value="195">Ricoh</option>
  <option value="194">Ries</option>
  <option value="193">Riteway</option>
  <option value="192">RoadWire</option>
  <option value="191">Rockland</option>
  <option value="190">Rode</option>
  <option value="189">Rodenstock</option>
  <option value="516">Rogue</option>
  <option value="188">Rollei</option>
  <option value="187">Rosco</option>
  <option value="186">RotaTrim</option>
  <option value="357">RPS</option>
  <option value="453">Ruige</option>
  <option value="185">Rycote</option>
  <option value="452">Sable</option>
  <option value="356">Safari</option>
  <option value="184">Saflin</option>
  <option value="183">Samigon</option>
  <option value="182">Samson</option>
  <option value="329">Samson</option>
  <option value="181">Sandisk</option>
  <option value="501">Sanford</option>
  <option value="180">Sanyo</option>
  <option value="179">Saunders</option>
  <option value="178">Savage</option>
  <option value="500">Sawyer's</option>
  <option value="177">Schneider</option>
  <option value="451">Sea &amp; Sea</option>
  <option value="176">Seal</option>
  <option value="385">Seculine</option>
  <option value="175">Seculine</option>
  <option value="174">Seinheiser</option>
  <option value="328">Sekonic</option>
  <option value="354">Sharp</option>
  <option value="327">Shen Hao</option>
  <option value="355">Shortcut</option>
  <option value="353">Shure</option>
  <option value="352">Shutterbug</option>
  <option value="326">Sigma</option>
  <option value="325">Sima</option>
  <option value="324">Sinar</option>
  <option value="323">Singhray</option>
  <option value="322">Skyla</option>
  <option value="321">Smith Victor</option>
  <option value="499">Soligor</option>
  <option value="351">Sonnett</option>
  <option value="320">Sony</option>
  <option value="498">Spectra Cine</option>
  <option value="319">Speedlight</option>
  <option value="318">Speedotron</option>
  <option value="497">Spiratone</option>
  <option value="317">Sprint</option>
  <option value="489">Spudz</option>
  <option value="316">Startech</option>
  <option value="388">Steadepod</option>
  <option value="315">Sto-fen</option>
  <option value="314">Stroboframe</option>
  <option value="313">Studio Titan</option>
  <option value="312">SunBounce</option>
  <option value="311">Sunpak</option>
  <option value="310">Superior</option>
  <option value="350">Switronics</option>
  <option value="450">Sylvestri</option>
  <option value="349">Synergy</option>
  <option value="309">Tachihara</option>
  <option value="308">Tamrac</option>
  <option value="348">Tamrac</option>
  <option value="307">Tamron</option>
  <option value="306">TAP</option>
  <option value="449">Technika</option>
  <option value="496">Tele-Astranar</option>
  <option value="305">Tenba</option>
  <option value="304">Testrite</option>
  <option value="303">Think Tank</option>
  <option value="302">Thomas</option>
  <option value="301">Tiffen</option>
  <option value="300">Tiltall</option>
  <option value="299">Tim Kelly</option>
  <option value="298">Tokina</option>
  <option value="297">Toyo</option>
  <option value="448">Trade Secret</option>
  <option value="296">Transcend</option>
  <option value="295">Trek-Tech</option>
  <option value="347">Trektek</option>
  <option value="294">Tripp Lite</option>
  <option value="447">Tundra</option>
  <option value="495">Ultranar</option>
  <option value="492">V-Pan</option>
  <option value="346">Vanguard</option>
  <option value="446">Varavon</option>
  <option value="445">Varta</option>
  <option value="344">Veho</option>
  <option value="343">Versaflex</option>
  <option value="444">Versatile Studios</option>
  <option value="443">Versatools</option>
  <option value="341">Vertus</option>
  <option value="494">View Camera</option>
  <option value="442">Virtual Backgrounds</option>
  <option value="293">Visible Dust</option>
  <option value="342">Visual Echoes</option>
  <option value="441">Vivitar</option>
  <option value="469">Voigtlander</option>
  <option value="340">Vue-All</option>
  <option value="339">Wacom</option>
  <option value="292">Wacom</option>
  <option value="468">Walker Studio</option>
  <option value="338">Walkstool</option>
  <option value="337">Wein</option>
  <option value="291">Westcott</option>
  <option value="336">Westcott</option>
  <option value="335">Wimberley</option>
  <option value="467">Wisner</option>
  <option value="334">Wista</option>
  <option value="491">WOWee ONE</option>
  <option value="290">X-Acto</option>
  <option value="466">X-Keys</option>
  <option value="524">X-Rite</option>
  <option value="289">Yankee</option>
  <option value="490">Yashica</option>
  <option value="333">Zacuto</option>
  <option value="331">Zeikos</option>
  <option value="288">Zeiss</option>
  <option value="332">Zeiss</option>
  <option value="287">Zigview</option>
  <option value="330">Zone VI</option>
</select> 
```

我要完成的要点是从 prof_alpha_1 值转换 MPEX 值并从查找 xml 中获取 380 值，但不幸的是我的结果是

```
<?xml version="1.0" encoding="utf-8"?>
<items>
  <item>
    <manufacturer>MPEX</manufacturer>
    <id></id>
  </item>
</items> 
```

每次我尝试调试变量制造商顶部时，该值始终是查找 xml 的值，而不是我可以使用 XPath 的节点集。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:52:12.517

`document()``select="document(...`返回一个节点集，因此不应该是`select="msxsl:node-set(document`node-set() 采用结果树片段并返回一个节点集，因此这里不需要，

但你真正的错误是

```
select="$manufacturer-top/select[@id='manufacturer'][option = $man]/@value"/> 
```

这是选择你想要的`value`属性`select`

```
 select="$manufacturer-top/select[@id='manufacturer']/option[. = $man]/@value"/> 
```

尽管只要你有`xxx/foo[.=$bar]`，你可能会通过使用密钥来获得很大的加速。

将此添加到样式表

```
<xsl:key name="op" match="option" use="."/> 
```

然后替换

```
<xsl_value-of select="$manufacturer-top/select[@id='manufacturer']/option[. = $man]/@value"/> 
```

经过

```
<xsl:for-each select="$manufacturer-top">
  <xsl:value-of select="key('op',$man)/@value"/>
</xsl:for-each> 
```

除非您的 xslt 优化器很聪明，否则第一个优化器会在每个 tine 对整个列表进行线性搜索，第二个将读取列表一次并制作一个快速散列查找表。

# xcode - 在 iOS 5.0 和 iOS 5.1 中让 popover 看起来一样

> ID：15296349
> 
> 赞同：3
> 
> 时间：2013-03-08T14:31:37.290
> 
> 标签：xcode, ipad, ios5, uipopovercontroller

在 xcode 4.6 中启动 iPad Master-Detail 应用程序时，在纵向上，有一个可关闭的菜单（在横向上它总是打开）。这个菜单（是弹出框的正确名称吗？）在 iOS 5.0 和 iOS 5.1 中看起来完全不同，见下图：

![在此处输入图像描述](../Images/3d6d69f1ea657e103a8e6c4d61148fcf.png)

有没有办法让 5.0 中的弹出框看起来与 5.1（及更高版本）中的一样？例如。它占据屏幕的整个高度，没有额外的边框/箭头等。所需的行为以绿色突出显示，iOS5.0 以红色突出显示。

编辑：我尝试使用自定义 popoverBackgroundViewClass 并（用于定位）手动显示弹出框：

```
self.masterPopoverController.popoverBackgroundViewClass = [EBPopoverBackgroundView class];
[self.masterPopoverController setPopoverContentSize:CGSizeMake(320, 1004)];
[self.masterPopoverController presentPopoverFromRect:CGRectMake(-20, -40, 1, 1) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionRight animated:YES]; 
```

但它只起作用了一点：

![popoverBackgroundViewClass 解决方案](../Images/c3f33244bd60b155e09c061b2b250502.png)

弹出框的左侧和底部有一些我无法删除的斑点（我尝试过超大的弹出框，但底部空间并没有消失。我尝试将它更向左移动，但是左边的空间没有消失）。此外，导航栏太薄了（大约薄了 10 像素），我也无法改变它（尽管最后一点我没有那么努力）。最后但并非最不重要的是，弹出框右侧有一条 1px 的黑线（即使我将 insets 设置为 0）。

我已经实现了这样的背景类：

```
@interface EBPopoverBackgroundView : UIPopoverBackgroundView
@end 
```

和.m

```
@implementation EBPopoverBackgroundView {

}

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        NSLog(@"Init with frame %@", NSStringFromCGRect(frame));
    }

    return self;
}

- (CGFloat)arrowOffset {
    return 0.0;
}

- (void)setArrowOffset:(CGFloat)arrowOffset {
    // pass
}

- (UIPopoverArrowDirection)arrowDirection {
    return UIPopoverArrowDirectionRight;
}

- (void)setArrowDirection:(UIPopoverArrowDirection)arrowDirection {
    // pass
}

+ (CGFloat)arrowHeight {
    return 1.0;
}

+ (CGFloat)arrowBase {
    return 1.0;
}

+ (UIEdgeInsets)contentViewInsets {
    return UIEdgeInsetsMake(0, 0, 0, 0);
}

- (void)drawRect:(CGRect)rect {
    NSLog(@"DrawRect %@", NSStringFromCGRect(rect));
    [super drawRect:rect];
}

+ (BOOL)wantsDefaultContentAppearance {
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:48:14.400

就我的研究而言，除了从头开始将弹出框作为一个全新的组件实现之外，没有其他方法可以做到这一点。

# coldfusion - Solr：更改 MaxFieldLength 的默认值

> ID：15296356
> 
> 赞同：1
> 
> 时间：2013-03-08T14:32:03.847
> 
> 标签：coldfusion, solr, coldfusion-9, default-value

有没有办法更改文件`<mainIndex><maxFieldLength>`中的默认值`solarconfig.xml`，以便在创建 Solr 集合时所有集合都将使用新值？

对于大多数应用程序来说，默认值 10000 是可以的，但我使用的大多数 PDF 都超过 100 页。客户担心搜索结果不会返回包含给定关键字的每个 PDF。如果我错了，请纠正我，但我很确定这`maxFieldLength`会将索引限制为 PDF 的一小部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:06:32.180

请注意，这`<maxFieldLength>`是限制标记的数量，而不是索引的字符。有关此问题的讨论，请参阅 - [http://lucene.472066.n3.nabble.com/maxFieldLength-td490843.html](http://lucene.472066.n3.nabble.com/maxFieldLength-td490843.html)。

**更新：** 我之前不正确，为了更改所有集合的此值，您需要向 solr.xml 文件添加一个属性，如[Solr.xml](http://wiki.apache.org/solr/Solr.xml%20%28pre%205.x%29)所示。然后可以`<maxFieldLength>`在每个核心/集合的 solrconfig.xml 文件设置中引用该属性。

但是，由于我不熟悉 CF 的工作原理，因此我不确定如何将其合并到 ColdFusion 实现中。它可能需要保持手动过程。

# objective-c - 可拖动的 NSWindow 闪烁

> ID：15296357
> 
> 赞同：1
> 
> 时间：2013-03-08T14:32:05.153
> 
> 标签：objective-c, xcode, cocoa, nsview, nswindow

我创建了一个可拖动的 NSWindow，可以通过它的内容进行拖动。它没有标题栏（无边框）。

拖动工作正常，但每隔一段时间就会出现闪烁。似乎窗口正在快速转到某个错误位置，然后返回到鼠标所在的位置（仍然按住鼠标）。它在我的 macbook 上似乎也比在我的 imac 上更好。

谁能弄清楚我做错了什么？

在初始化中，我调用了这两种方法：

```
[self setMovableByWindowBackground:YES];
[self setMovable:YES]; 
```

这些是使用的变量：

```
NSPoint currentLocation;
NSPoint newOrigin;
int offsetX,offsetY; 
```

这是有关拖动的代码：

```
- (void)mouseMoved:(NSEvent *)theEvent{
}

- (void)mouseDown:(NSEvent *)theEvent{

    currentLocation = [self convertBaseToScreen:[self mouseLocationOutsideOfEventStream]];

    offsetX = currentLocation.x - [self frame].origin.x;
    offsetY = currentLocation.y - [self frame].origin.y;
}

- (void)mouseDragged:(NSEvent *)theEvent{
    currentLocation = [self convertBaseToScreen:[self mouseLocationOutsideOfEventStream]];

    newOrigin.x = currentLocation.x - offsetX;
    newOrigin.y = currentLocation.y - offsetY;

    [self setFrameOrigin:newOrigin];

} 
```

**编辑：好的，如上所述，这是一个透明的无边框 NSPanel。是的，我似乎不需要上面的代码。**

但是，我确实需要拖动窗口的位置，并且我需要它不断。

如果我像这样得到框架原点：

```
self.frame.origin 
```

这报告了一个不正确的数字。可可更新这个内部值似乎需要一些时间。

其次，面板是非激活的。在第一次加载（聚焦）并调用 mouseDragged 时移动它时效果很好。但不是当我与另一个应用程序交互然后返回时。只有 mouseDown 和 mouseUp 被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:42:18.513

`-setMovableByWindowBackground:`如果被调用，则不需要您的鼠标跟踪代码；你基本上只是在复制这项工作。从它的声音来看，我会说您的`-init`方法没有被调用，很可能是因为您正在从 .xib 加载（而是调用`-initWithCoder:`）。

如果窗口仅由 xib 加载创建，则将上述所有代码替换为：

```
- (void)awakeFromNib
{
    [self setMovableByWindowBackground:YES];
} 
```

至于为什么您会看到闪烁，我最好的猜测是这是因为鼠标输入与屏幕刷新不同步，因此以编程方式使窗口跟随鼠标比仅随着每次鼠标移动而更新要复杂一些。但是如果你让 NSWindow 为你处理它，你就完全不用担心这个了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:11:24.700

你得到一个 NSWindowDidMove 通知**但不是 live**。

如果您需要实时更新，默认情况下这是不可能的 AFAIK。*与调整大小期间*相同，框架不会更新。

请参阅[鼠标移动窗口时如何接收通知？](https://stackoverflow.com/questions/10495037/how-to-receive-notifications-when-moving-window-by-mouse)有关如何做到这一点的一些链接

# jsf-2 - 从 af:param 获得的空值 ah:selectOneMenu in JSF

> ID：15296361
> 
> 赞同：0
> 
> 时间：2013-03-08T14:32:13.220
> 
> 标签：jsf-2

我试图通过 ah:selectOneMenu 中的 af:param 传递一个值，如下面的代码所示：

```
<h:selectOneMenu value="#{jbpmAPIUtil.procNdNameSelectedValue}">
                                            <f:selectItem itemLabel="" itemValue="" />
                                            <f:selectItems value="#{jbpmAPIUtil.procnodes}" var="pn"
                                                itemLabel="#{pn.getName()}" itemValue="#{pn.getId()}" />
                                            <f:ajax event="click" listener="#{jbpmAPIUtil.OnONeMenuProcNdSelChgeHndler}" />
                                            <f:param value="${msntoc.getWorkitemid()}" name="msntocwiid"/>                                          
                                        </h:selectOneMenu> 
```

我什至将 f:param 的值更改为 String 但在尝试在处理程序中获取该值时总是得到 null ：

```
public static void OnONeMenuProcNdSelChgeHndler(AjaxBehaviorEvent vce){

        String msntocwiid = FacesContext.getCurrentInstance().getExternalContext()
                .getRequestParameterMap()
                .get("msntocwiid");

        System.out.println("procNdNameSelectedValue : "+procNdNameSelectedValue+" msntocwiid :"+msntocwiid);

    } 
```

selectOneMenu 不支持 f:param 吗？还有另一种方法来传递值吗？

感谢帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:25:33.543

仅在组件（例如，等）`<f:param>`中支持添加请求参数的子项。它在组件中不受支持。`UICommand``<h:commandLink>``<h:commandButton>``UIInput`

在*您的特定情况下*，无论如何您有 2 个选项来实现具体的功能要求：

1.  而是将其作为侦听器方法参数传递。

    ```
    <h:selectOneMenu ...>
        ...
        <f:ajax ... listener="#{jbpmAPIUtil.OnONeMenuProcNdSelChgeHndler(msntoc.workitemid)}" />
    </h:selectOneMenu> 
    ```

    和

    ```
    public void OnONeMenuProcNdSelChgeHndler(String msntocwiid) {
        // ...
    } 
    ```

    * * *

2.  `AjaxBehaviorEvent`或者，如果您出于某种不清楚的原因确实需要帮助，请以编程方式对其进行评估。

    ```
    public void OnONeMenuProcNdSelChgeHndler(AjaxBehaviorEvent event) {
        FacesContext context = FacesContext.getCurrentInstance();
        String msntocwiid = context.getApplication().evaluateExpressionGet(context, "#{msntoc.workitemid}", String.class);
        // ...
    } 
    ```

    * * *

顺便说一句，您的命名约定很糟糕。我强烈建议您阅读有关该主题的[官方资源](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)，以使您自己、您未来的维护者和我们更加高兴。

# apache-flex - Flex 移动方向：强制纵向模式，然后允许自动方向

> ID：15296365
> 
> 赞同：0
> 
> 时间：2013-03-08T14:32:26.787
> 
> 标签：apache-flex, mobile, device-orientation, orientation-changes

我正在创建一个 flex 移动项目，我想在单击按钮时强制应用程序为纵向，当我单击其他按钮时再次允许更改方向。

这是我单击第一个按钮时的代码，我想强制纵向模式：

```
protected function click(event:MouseEvent):void{
   if(stage.orientation != StageOrientation.DEFAULT){
            stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGE, orientationChanged);
            stage.setOrientation(StageOrientation.DEFAULT);
   }else{
            doSomething();
   }

}

private function orientationChanged(event:StageOrientationEvent):void{
            doSomething();
            stage.removeEventListener(StageOrientationEvent.ORIENTATION_CHANGE, orientationChanged);
}

private function doSomething():void{
            stage.autoOrients = false;
} 
```

它工作正常，如果需要，它会改变方向。

现在，当我想再次允许改变方向时，我只放了：

```
stage.autoOrients = true; 
```

如果当我单击第一个按钮时应用程序是纵向的并且不需要更改任何内容，它就可以正常工作。但是，如果它是横向的并且必须更改为纵向，那么当我再次允许更改方向时，它就无法正常工作。

你知道我是否必须允许或改变一些事情吗？或者，有没有更好的方法来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:45:59.487

这是一个小技巧，但我已经解决了。

首先，如果必须改变方向，我会保存旧的方向。当我再次单击允许更改方向的按钮时，首先我放置旧的方向，然后我允许自动定位。

这是新代码的一部分：

```
private var oldOrientation:String = null;

protected function click(event:MouseEvent):void{
   if(stage.orientation != StageOrientation.DEFAULT){
            oldOrientation = stage.orientation; 
            stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGE, orientationChanged);
            stage.setOrientation(StageOrientation.DEFAULT);
   }else{
            doSomething();
   }

}

private function orientationChanged(event:StageOrientationEvent):void{
            // do something if you are changing to portrait mode (the first change) and other thing if you are changing to old orientation
} 
```

允许自动定向的按钮：

```
if(oldOrientation != null){

        stage.setOrientation(oldOrientation);
        oldOrientation = null;              
} 
```

# master-pages - SharePoint 2013 母版页库

> ID：15296366
> 
> 赞同：2
> 
> 时间：2013-03-08T14:32:27.153
> 
> 标签：master-pages, sharepoint-2013

我在理解新的母版页库模型时遇到了一些麻烦。每个网站都有自己的母版页库（看起来），因此不像我习惯的那样从 ~15\TEMPLATE\LAYOUTS 中提取。根据我的喜好修复母版页并创建子网站后，它不会继承更新的母版页。

我的母版页编辑的目的是添加回 2010 样式导航，以便用户可以访问父站点。

我正在使用 SharePoint 2013 Foundation 的版本（不是预览版）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:54:50.100

在 VS2012 中创建您的品牌解决方案。添加新的 Web 事件接收器并在代码中设置新的母版页。您可以将其作为沙盒或场解决方案来执行。

# java - 解析XML不匹配标签Android时出错

> ID：15296368
> 
> 赞同：0
> 
> 时间：2013-03-08T14:32:28.033
> 
> 标签：java, android, android-layout

我是 Android 开发的新手。我在创建 mail.xml 时遇到此错误。下面是代码，我试图在这个网站上寻找解决方案，仍然给出“错误解析 XML 不匹配标签 Android”。如果您能帮助检查代码中的错误，我将不胜感激。

```
android:layout_width="match_parent"
android:weightSum="100"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
 <ScrollView android:layout_weight="30" android:layout_width="fill_parent" android:layout_height="fill_parent">

<TextView
    android:text="TextView"
    android:id="@+id/textView1"
    android:layout_width="wrap_content"

     />

<EditText
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:id="@+id/editText1"
    android:ems="10" >

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText4"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText5"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

<TextView
    android:id="@+id/textView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText6"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

     </ScrollView>
     </LinearLayout>

    <LinearLayout

                  android:layout_width="match_parent"
                  android:layout_weight="40"
                  android:layout_height="fill_parent"
                  android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="fill_content"
    android:text="Button" />
     </LinearLayout>

<LinearLayout android:layout_width="match_parent"
              android:layout_weight="30"
              android:layout_height="fill_parent"
              android:orientation="vertical" >

<AnalogClock
    android:id="@+id/analogClock1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:53:01.987

您的 EditText 标记未关闭。改变这个

```
<EditText
android:layout_height="wrap_content"
android:layout_width="match_parent"
android:id="@+id/editText1"
android:ems="10" > 
```

对此

```
<EditText
android:layout_height="wrap_content"
android:layout_width="match_parent"
android:id="@+id/editText1"
android:ems="10" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:42:38.197

我发现像这样添加结束标签：`</TextView>`让我不会像你得到的那样出现随机错误。我`</TextView>`觉得它看起来更完整，我可以更清晰地看到我的代码。无论哪种方式都有效。

# jasper-reports - 列出使用项目的页面的表格

> ID：15296371
> 
> 赞同：0
> 
> 时间：2013-03-08T14:32:45.453
> 
> 标签：jasper-reports

我将**JasperReports 3.7.6**与**JavaBeans**一起使用。

我有一个具有树层次结构的报告

我需要在报告末尾添加一个汇总表，列出树中所有元素的名称以及使用这些元素的页面。

我的问题是我不知道*如何获取* **每个元素的页码**。

我在论坛上环顾四周，我猜我必须定义一个变量或类似的东西，但我对 Jasper 没有太多经验，也不知道从哪里开始。

我想要实现的是这样的：

```
Name of person | pages used on  
John Smith     | 2,4,6  
Jane Doe       | 1,3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:08:44.847

我找到了解决我的问题的方法。它可能不是最好的，但它确实有效。我添加了一个参数，它是我创建的 Java 类。它包含一个列表和一个方法，用于接收我需要的字段的 id 和来自 jasper 的页码参数。我用它来建立我的清单。然后在 Jasper 报告中，我有一个标签，仅用于调用我的 bean 中的方法。然后我所要做的就是将索引表放在汇总带中并告诉它从我构建的列表中获取值。在 jasper 中：

```
<textFieldExpression class="java.lang.String"><![CDATA[$P{indexData}.addByIndex($F{numberInList},$F{indexLabel},$V{PAGE_NUMBER} + "")]]></textFieldExpression> 
```

在 Java 中

```
public class ReportIndexDataAction {

private List<ReportIndexData> reportIndexDataList;

public ReportIndexDataAction() {
    reportIndexDataList = new ArrayList<ReportIndexData>();
}

public List<ReportIndexData> getReportIndexDataList() {
    return reportIndexDataList;
}

public void setReportIndexDataList(List<ReportIndexData> reportIndexDataList) {
    this.reportIndexDataList = reportIndexDataList;
}

public String addByIndex(int index, String name, String page) {
    boolean found = false;
    for (Iterator iterator = reportIndexDataList.iterator(); iterator.hasNext();) {
        ReportIndexData type = (ReportIndexData) iterator.next();
        if(type.getIndex() == index) {
            if(!type.getUsages().contains(","+ page + ",")) {
                type.setUsages((type.getUsages().isEmpty() ? "," + page +"," : type.getUsages() + page + ","));
            }
            found = true;
            break;
        }
    }
    if(!found) {
        ReportIndexData data = new ReportIndexData();
        data.setIndex(index);
        data.setName(name);
        data.setUsages(","+ page + ",");
        reportIndexDataList.add(data);
    }
    return "";
} 
```

和

```
public class ReportIndexData {

private int index;
private String name;
private String usages;

public int getIndex() {
    return index;
}
public void setIndex(int index) {
    this.index = index;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getUsages() {
    return usages;
}
public void setUsages(String usages) {
    this.usages = usages;
} 
```

}

# apache - 使用 htaccess 排除除 index.php 以外的所有文件

> ID：15296373
> 
> 赞同：0
> 
> 时间：2013-03-08T14:32:54.507
> 
> 标签：apache, .htaccess

我正在尝试使用 .htaccess 排除除 /index.php 文件和没有 index.php 文件的 url 之外的所有文件。我正在使用以下内容：

```
#.htaccess

#Look for php before html
DirectoryIndex index.php index.html

<Files *>
AuthType Basic
AuthName "Sorry, Restricted Files"
AuthUserFile  /home/Documents/SystemFiles/apache/passwords
Require user myuser
</Files>

<Files "index.php"> 
Order Deny,Allow 
Allow from All 
Satisfy any 
</Files> 
```

现在，除了 /index.php 之外，所有内容都受密码保护。但是，我想做的是让 www.site.com/ 和 www.site.com/index.php 都不受密码保护。就目前而言，www.site.com/ 受密码保护，而 www.site.com/index.php 则不受密码保护。

谢谢

## 更新！！！！

我发现这解决了我的问题：

[请求 / 而不是 /index.php 时获得“需要身份验证”](https://stackoverflow.com/questions/8731109/getting-authentication-required-when-requesting-instead-of-index-php?rq=1)

# c++ - 分段故障

> ID：15296376
> 
> 赞同：0
> 
> 时间：2013-03-08T14:33:10.340
> 
> 标签：c++, stl, segmentation-fault

试图跟踪，但没有找到以下代码在 VC++ 中给出“访问冲突”以及在 gcc 中给出分段错误的原因。

```
#include <vector>
#include <iostream>
using namespace std;

typedef struct node
{
    std::string data;
    vector <struct node*> child;
}NODE, *PNODE;

int main()
{
    PNODE head;
    head = (PNODE) malloc(sizeof(NODE));

    head->data.assign("hi");

    printf("data %s", head->data.c_str());
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T14:34:52.603

为什么你认为它应该起作用？您使用`malloc`, 而不是`new`, 因此不会调用构造函数，并且您所做的一切都会访问未初始化的内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T14:35:16.177

使用`new`而不是`malloc`在堆上创建 C++ 对象。

以下：

```
head = (PNODE) malloc(sizeof(NODE)); 
```

应该读

```
head = new NODE; 
```

原因`malloc()`在这里不起作用是它不调用对象构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:45:12.770

我同意以前的答案。

我应该补充一点，最好避免`using namespace`（见[这里](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)）

在 C++ 中，避免使用类似 C 的结构声明：

```
typedef struct node
   {
       std::string data;
       vector  child;
   }NODE, *PNODE; 
```

应该：

```
struct Node
{
    std::string data;
    std::vector<Node> child;
} 
```

然后：

```
Node head; 
```

或者：

```
Node* head = new Node; 
```

如果您使用的是 c++，请使用`std::cout`代替`printf`

也有 c++ 强制转换运算符：`dynamic_cast`、、、（见[这里](http://www.cplusplus.com/doc/tutorial/typecasting/)）`static_cast``const_cast``reinterpret_cast`

# c++ - xcode 4.6 iostream 文件未找到错误？

> ID：15296378
> 
> 赞同：1
> 
> 时间：2013-03-08T14:33:15.920
> 
> 标签：c++, iphone, iostream

我面临一个关于在头文件中找不到 iostream 文件的问题。我刚刚在我的项目中添加了一个 c++ 文件，一个头文件也默认包含一些宏定义，并将 iostream 文件包含为

```
#ifndef __ObjectiveCPlus__File__
#define __ObjectiveCPlus__File__
#include <iostream>
#endif 
```

但在这一行，我在包含行出现错误

![在此处输入图像描述](../Images/f874e47336e3ff5f09fd91920889dff1.png)

我用谷歌搜索了很多，并找到了各种类型的答案。但是没有人能够纠正我的错误。请帮忙谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:46:32.997

你不需要`<iostream>`在你的头文件中，把它放在你的 .cpp 文件中。您没有在头文件中引用 iostream 库中的任何内容，使用此库更多的是实现细节。

## 为什么？

我相信 UIAppDelegate 导入 UIViewController.h，其中包括 MathUtils.h。因为 UIAppDelegate 的实现在一个 .m 文件中，它是为 Objective-C 编译的，并且这个包含链（全部基于头文件）包含 C++ 的东西。因此，Objective-C 部分无法找到`<iostream>`，因为纯 Obj-C 中不存在该库。

将其放入您的 .cpp 文件中会将其限制为一个编译单元，即 MathUtils 单元。将它放在头文件中会将它包含在所有编译单元中，这些编译单元依赖于使用它的任何东西，可能不是 Objective C++。

## 替代解决方案

您可以将整个项目作为 Objective C++（在这种情况下，通过将 UIAppDelegate.m 更改为 UIAppDelegate.mm），这意味着 C++ 可以在整个过程中使用。我不喜欢这种方法，它可能会掩盖不良的编码习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T22:54:45.297

我从另一个帖子中得到了解决方案：

> 使用 .mm 扩展名而不是 .m 重命名您的实现文件将解决该问题。

# c - C中的移位和屏蔽

> ID：15296381
> 
> 赞同：0
> 
> 时间：2013-03-08T14:33:23.533
> 
> 标签：c, bit-shift, bitmask, variable-length

我有这个问题。我有一个可以动态改变其长度的有效载荷。如果我不削减这个有效载荷，我也会得到对我来说是垃圾的信息。所以我想以我的有效载荷长度为基础削减有效载荷。

我有这部分代码：

```
uint64_t data_tmp = HTONLL((uint64_t) zp->data);
uint8_t len = zp->length;
uint64_t mask = 0xFFFF >> (64 - len);
data_tmp = data_tmp & mask;
printf("DATA_TMP = %llu\n", data_tmp); 
```

zp->data 在写入 t->payload 字段后。所以这是我的有效载荷。这是一个 64 位字段。

我想暂时拿走这个有效载荷。计算我的有效载荷长度，即 uint8 类型的 zp->length 字段。在我创建一个 64 字节移位的掩码之后 - payload_length 以我可以将其应用于临时有效负载并获得一个仅包含我想要的数据和全零的字段的方式。

我怎样才能做到这一点？

例如。如果 payload_length 为 01 且有效负载 00+.................（垃圾）我想在 64 字节上获得像 00000000 这样的有效负载。

如果我的有效载荷长度为 13 且有效载荷为 1284732089322309.... 我只想获得 13 个字节。

抱歉，如果很难说...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:46:44.353

不确定我是否正确理解了您的问题，但您使用逻辑 AND 而不是二进制 AND。

表达式“变量 && 变量”的计算结果为 1 或 0

表达式 "variable & variable" 计算为二进制 AND，使用适当的掩码，它将按照您的预期裁剪数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:53:07.667

你需要这个：

```
uint64_t mask = (1uLL << (len * 4)) - 1;
data_tmp = data_tmp & mask; 
```

这将为您提供*最低* `len`的 4 位数字。如果您需要最高，则可以`data_tmp`在应用蒙版之前旋转：

```
data_tmp >>= (64 - len * 4) 
```

# background - 在 :hover 元素上设置背景的高度和宽度

> ID：15296385
> 
> 赞同：0
> 
> 时间：2013-03-08T14:33:29.883
> 
> 标签：background, resize, hover, css

我目前有这个代码

```
#navlogo {
    background: url(img/logo.png);
    background-size: 100px;
    display: block;
    height: 98px;
    width: 98px;
    border-radius: 49px;
} 
```

我想添加这段代码

```
#navlogo:hover {
    background:url(img/logoblog.png);
    display: block;
    height: 98px;  /* this doesn't work */
    width: 98px;   /* this doesn't work */
} 
```

原始图像按比例缩小为 150x150，出于某种原因看起来比使用 98x98 更好，尤其是在 iPhone 上。但是，我似乎无法为 :hover 元素设置背景大小......它保持原来的大小。我知道可以这样做，`background-size: 98px 98px;`但这也不兼容 IE8 及更低版本，而且 CSS3PIE 也不涵盖背景大小。无论如何要这样做还是我必须调整悬停图片的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:41:14.950

尝试将背景大小从定义的 100 像素更改为包含。如果您在悬停时更改 div 大小，那么在这种情况下背景大小将随之改变。

*例如：*

```
#navlogo {
background: url(img/logo.png);
background-size: **contain**;
display: block;
height: 100px;
width: 100px;
border-radius: 49px;
}

#navlogo:hover {
background:url(img/logoblog.png);
display: block;
height: 98px;               /*this doesn't work*/
width: 98px;                /*this doesn't work*/
} 
```

我假设这就是您在此示例中的目标，因为您在悬停样式中指定“不起作用”的属性正在重置正常状态样式中存在的相同值。鉴于它们的定义完全相同，什么都不会改变。

**编辑**

如果 logoblog 图像确实更大，将 background-size 属性设置为 'contain' 也应该可以解决这个问题。

# vim - Vim 中的换行

> ID：15296393
> 
> 赞同：8
> 
> 时间：2013-03-08T14:33:56.417
> 
> 标签：vim, editor, vi

任何人都知道 vim 中轻松交换两行代码的任何技巧吗？我知道交换相邻的行是微不足道的，但是假设我想将第 23 行与第 52 行交换。这可以实现吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-08T14:37:50.180

是的！

```
:23m52|51m22 
```

然后按`Enter`

编写一个函数来完成它也很容易。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T16:00:45.297

我的[LineJuggler 插件](http://www.vim.org/scripts/script.php?script_id=4140)具有正常和可视模式映射`]E`，并且`[E`（和其他，类似于流行的*未损坏*插件）将当前行/选择与`[count]`下面/上面的行交换。

我认为`:[range]Swap {range}`命令也会有所帮助；我正在努力。

**编辑**：这里是：[LineJugglerCommands 插件](http://www.vim.org/scripts/script.php?script_id=4465)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T14:38:38.560

如果您在粘贴时有视觉选择，它会在粘贴后将选择放入默认缓冲区。所以你会做`23Gdd51GVp23GP`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T14:42:04.103

用户`move`命令移动行。例如，交换第 23 行和第 52 行：

```
:23m52 | 52m23 
```

键入`:help move`以获取帮助用法`move`，它可能会移动一系列行:-)

# iphone - iPhone - 绘制一个带有自定义边框的透明（清除）矩形

> ID：15296394
> 
> 赞同：0
> 
> 时间：2013-03-08T14:34:00.050
> 
> 标签：iphone, border, drawrect, rectangles, cgcontextref

我正在尝试绘制一个矩形，它应该有宽度为 5.0 的黑色边框，我得到了如下所示的矩形，

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextStrokePath(context);
CGContextSetRGBFillColor(context, 0.0, 1.0, 0.0, 0.5);
CGContextFillRect(context, rect); 
```

![在此处输入图像描述](../Images/c8ac58980cc137dd7121277c89a764c4.png)

我可以让它清晰/透明（白色）背景，而不是现在显示的绿色背景，`[UIColor whiteColor].CGColor`但它也应该有黑色边框。

如何将自定义边框设置为矩形？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:41:15.347

根据需要设置描边颜色和宽度，例如：

```
CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
CGContextSetLineWidth(context, 5.0f);
CGContextStrokeRect(context, rect); 
```

如果您还要填充矩形，请在填充*后*执行此操作，以免填充覆盖笔画。

# php - PHP 中的 Oracle 连接错误。致命错误：调用未定义函数 oci_connect()

> ID：15296395
> 
> 赞同：1
> 
> 时间：2013-03-08T14:34:02.627
> 
> 标签：php, web, oracle11g, database-connection

我正在做这个项目，我需要连接到 Oracle 数据库。我正在使用最新版本的 WAMP 2.2，并且还激活了 PHP 扩展中与 Oracle 相关的所有扩展。我使用以下代码连接到 Oracle 数据库。

```
<?php 

$dbHost = "192.168.0.205";
$dbHostPort="1523";
$dbServiceName = "orcl";
$usr = "system";
$pswd = "admin";
$dbConnStr = "(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)
        (HOST=".$dbHost.")(PORT=".$dbHostPort."))
        (CONNECT_DATA=(SERVICE_NAME=".$dbServiceName.")))";

if(!$dbConn = oci_connect($usr,$pswd,'192.168.0.205:1158/em')){
$err = oci_error();
trigger_error('Could not establish a connection: ' . $err['message'], E_USER_ERROR);
}
else
{
echo "COnnected";
}

$strSQL = "SELECT SYSDATE FROM DUAL";

$stmt = oci_parse($dbConn,$strSQL);
if ( ! oci_execute($stmt) ){
$err = oci_error($stmt);
trigger_error('Query failed: ' . $err['message'], E_USER_ERROR);
};

while(oci_fetch($stmt)){
$rslt = oci_result($stmt, 1); print "<h3>query returned: ".$rslt."</h3>";
}
?> 
```

请提出错误。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:38:35.420

OCI8 PHP 扩展在您的 PHP 安装中不可用。有关安装说明，请参阅[OCI8 PHP 扩展的手册](http://www.php.net/manual/en/book.oci8.php)。

# expectj - ExpectJ：如何脱离“互动”模式？

> ID：15296399
> 
> 赞同：0
> 
> 时间：2013-03-08T14:34:21.900
> 
> 标签：expectj

调用 Spawn.interact() 后如何离开？

TIA

狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:09:32.493

你不能这样做。但是，您仍然可以使用相同的会话。

# excel - “1004”：“排序引用无效。”

> ID：15296400
> 
> 赞同：12
> 
> 时间：2013-03-08T14:34:22.790
> 
> 标签：excel, vba

我正在尝试对单独的工作表中的范围进行排序。但是，我不断收到此消息：

```
 '1004': "The sort reference is not valid. Make sure it's within the data you want to sort, and the first Sort By box isn't the same or blank. 
```

我检查了范围，它们都存在并且正在工作。

代码如下：

```
Dim EmpBRange As String

EmpBRange = Sheets("EmployeeData").Cells(Cells.Rows.Count, "B").End(xlUp).Row

Worksheets("EmployeeData").Range("K3:K" & EmpBRange).Sort Key1:=Range("K3:K" & EmpBRange), Order1:=xlAscending, Header:=xlGuess, _
       OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
       DataOption1:=xlSortNormal 
```

提前致谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-08T15:18:09.707

我怀疑您需要完全限定`Key1`范围，因为您正在从不同的工作表中调用代码：

```
Worksheets("EmployeeData").Range("K3:K" & EmpBRange).Sort Key1:=Worksheets("EmployeeData").Range("K3:K" & EmpBRange) 
```

这通常是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-17T21:13:37.060

我一直在尝试使用该`Sort`方法，但来自 Powershell。而我只得到了`The sort reference is not valid`一部分而没有 `Make sure it's within the data you want to sort, and the first Sort By box isn't the same or blank`一部分。我就是这样来到这里的。

我的问题是由于忽略了`Sort`电话的论点。如果您仔细查看文档，您会看到`Type`在键和顺序参数的中间隐藏了一个参数：

> 表达式 .Sort(Key1, Order1, Key2, Type, Order2, Key3, Order3, Header, OrderCustom, MatchCase, Orientation, SortMethod, DataOption1, DataOption2, DataOption3)

我已经通过`$null`了那个，我的方法调用开始工作了。下一个奇怪的事情是，由于某种原因`Key2 / Order2`被忽视了。我正在使用所有 3 个键对数据进行排序。解决方法是在方法调用中交换参数`Key2 / Order2`。`Key3 / Order3`奇怪的是，它奏效了。

# aes - 使用 Verilog 的 AES 加密

> ID：15296406
> 
> 赞同：2
> 
> 时间：2013-03-08T14:34:41.723
> 
> 标签：aes, verilog, fpga

所以我在这个学期自己学习了所有关于 FPGA 的知识。为了测试我的技能，我选择了一个项目来使用古老的 AES 的 FPGA 实现来加密和解密文件。现在使用 Verilog 实现 AES 已经完成了无数次，为了我的参考，我使用了[http://opencores.org/project,systemcaes上的代码](http://opencores.org/project,systemcaes). 我想做的是使用 Verilog 文件处理函数读取一个小文件，将其用作 FPGA 上加密块的输入，然后将加密文件保存回计算机上。我知道这可以在测试台上完成（虽然我没有尝试过，但我相信它可以完成）。但是当我在 FPGA 板上实现代码时，我该怎么做呢？有没有办法选择要加密/解密的文件并将其传递到板上？甚至可能吗？对不起，如果我遇到一个菜鸟，这是我第一次进入 FPGA 世界。提前谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:33:16.013

您需要了解 FPGA 只会对您要构建的硬件进行描述。它不像编程语言。

因此，如果您想将数据加载到 FPGA 上的存储器中，您需要一种将数据从 PC 移动到 FPGA 的方法。最简单的方法是在 FPGA 上实现 UART，这样您就可以与 PC 上的串行端口进行通信。然后，您将 PC 上某个终端程序中的数据加载到 FPGA 中。

然后您可以使用串行端口将数据读回您的 PC。

这当然要求您已经实现了从 FPGA 中的存储器读取和写入内容所需的硬件。

也可能是您可以通过 FPGA 流式传输数据。但后来我想我会使用两个串行端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:58:17.877

Verilog RTL 没有文件系统的概念，您需要 FPGA“驱动程序”将文件分解并逐字节发送或将其加载到内存中供 FPGA 上的程序读取。

我对 FPGA 没有经验，我的理解是您综合设计并将其流式传输到 FPGA。我认为您可能仍然与可以将数据流式传输到该设备的设备保持连接。同样，我认为您可以通过 USB 控制 Arduino。

您打算如何将数据从 FPGA 中取回？您的工具是否允许您访问以发送和加载数据？

# mysql - utf8_general_ci 排序规则错误。尝试了一切

> ID：15296408
> 
> 赞同：1
> 
> 时间：2013-03-08T14:34:44.023
> 
> 标签：mysql, encoding, utf-8

常见问题。异常难以找到解决方案。

phpmyadmin 服务器连接排序规则设置为 utf8_general_ci 数据库排序规则设置为 utf8_general_ci 表排序规则设置为 utf8_general_ci

我的 .php 页面有： 在任何查询之前：

```
mysql_query("SET NAMES UTF8"); 
```

并且页面使用编码 utf-8 保存。标题：

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" /> 
```

没有数据库的文本正确显示了所有内容，但是通过数据库我得到了我们大多数人得到的 - ?�?�??</p>

几乎尝试了谷歌提供的所有东西。有什么建议么？

# ruby-on-rails - rails管道css文件

> ID：15296410
> 
> 赞同：-2
> 
> 时间：2013-03-08T14:34:51.347
> 
> 标签：ruby-on-rails, asset-pipeline, stylesheet

我正在使用`rails 3.2.12`并创建一个 css 文件`assets/stylesheets/equipment.css`来与一个名为`equipment_controller.rb`. 此样式表不起作用。我需要做什么才能将其包含在管道中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:43:46.910

该文件需要加载到您的`application.css`.

在您的`application.css`文件中，您将需要手动加载文件（通过添加`require equipment`到文件顶部的清单中），或者如果您有`require_tree`一行，它也将被包含在内。

有关详细信息，请参阅[http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:45:14.373

确保您`*= require_tree .`的`application.css`. 它将负责包含当前目录中的所有样式表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:58:32.963

我清除了内容并将扩展名从 .css 更改为 .css.scss。现在它可以工作了。

# javascript - Require.js 版本单个文件

> ID：15296431
> 
> 赞同：2
> 
> 时间：2013-03-08T14:35:24.587
> 
> 标签：javascript, requirejs

我们有一个复杂的旧系统，我们希望可能过渡到使用 Require.js
我有一个问题是是否可以设置文件的特定版本。
我不是在同一页面中谈论“多个版本”。
我在想的是这样的：

*   模块1
*   模块2
    *   模块1
*   模块3
    *   模块1
*   模块4
    *   模块2
    *   模块3

我想要一种对 Module1 进行版本化的方法，以便我可以在一个地方更改版本号。
我知道我可以使用： `require.config({ urlArgs: "bust=v3" })`但是我可以在 Module1 的文件顶部执行此操作并让它仅引用该模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:43:06.637

尝试`paths`在 RequireJS 配置中设置对象。这会将模块的名称映射到 RequireJS 应该下载的 URL。

[http://requirejs.org/docs/api.html#config-paths](http://requirejs.org/docs/api.html#config-paths)

```
paths: {
    'Module1': 'path/to/Module1_v1'
} 
```

# java - 如何在迭代时系统地清空可迭代对象？

> ID：15296435
> 
> 赞同：2
> 
> 时间：2013-03-08T14:35:31.263
> 
> 标签：java, iterable

我有一个方法，它采用未知类型 T 的任何可迭代对象类型，并循环遍历它，从中取出项目并将其放入另一个数据结构中。我需要从旧的可迭代对象中删除每个项目，以便我可以按排序顺序将项目重新添加到其中。

我在循环后尝试`.clear()`在对象上使用，但不能保证有一个明确的方法。那么我如何在浏览项目时删除项目，或者创建一个具有相同类型但没有值的新对象，以便我可以重新添加所有内容，只知道该对象是`Iterable`？

```
public class PriorityQueue<K extends Comparable<? super K>,V> {

  public static <K> void PriorityQueueSort(Iterable<? extends K> list,
        PriorityQueue<? super K, ?> queue) {

      for (K item : list) {
          queue.insert(item, null);
      }

      list.clear();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:37:48.217

不要使用 for-each 循环，而是使用显式`Iterator`对象和[`Iterator.remove()`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)：

```
 Iterator<K> iter = list.iterator();
    while (iter.hasNext()) {
        K item = iter.next();
        queue.insert(item, null);
        iter.remove();
    } 
```

请记住，并非每个`Iterator`实现都支持对象删除（例如，只读集合不支持）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:38:54.950

您必须使用[迭代器](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)来遍历您的列表。迭代器支持 remove 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:49:08.807

所有集合都是 Iterables，但反之则不然。因此，您甚至不能期望从生成迭代器项的数据源中删除某些内容总是有意义的。就像在这个非常复杂的 hello world 示例中一样：

```
Iterable<Character> myIterable = new Iterable<Character>() {

    @Override
    public Iterator<Character> iterator() {
        Iterator<Character> it = new Iterator<Character>() {

            private String hello = "Hello World";
            private int counter = 0;

            @Override
            public boolean hasNext() {
                return counter < hello.length();
            }

            @Override
            public Character next() {
                return hello.charAt(counter++);
            }

            @Override
            public void remove() {
                throw new UnsupportedOperationException();
            }

        };
        return it;
    }
};

for (Character c : myIterable) {
    System.out.print(c);
} 
```

没有支持 Iterable 的集合。它只是一个“迭代器提供者”，甚至只有一个字符串（我们不能从字符串中删除字符，字符串是不可变的）。

所以不，您不能“清除任何可迭代”，并且并非每个迭代器都支持删除项目。

# vba - 用于向表中添加某些空字段的查询中的 SQL 语法

> ID：15296443
> 
> 赞同：1
> 
> 时间：2013-03-08T14:36:04.427
> 
> 标签：vba, ms-access

我正在尝试创建一个查询，该查询将添加到现有表（tblExceptions）中：

*   字段事件标题、事件日期、姓氏、名字和电子邮件 - 这些字段必须添加到 tblExceptions
*   该记录的所有其他为空的字段。

但是应该注意的是，只有在源表 (tblData) 中的字段缺失时才能添加记录。

我在设计视图中为 MS Access 中的查询创建了一个相当大的查询，如果它包含丢失的数据，则添加该记录的所有内容，但不愿意更改插入以防它不添加空字段。

有任何想法吗？我在想 INSERT INTO 可能需要包含一个 IF 语句 - MS 访问是否允许这样做？

谢谢

***编辑***

已添加示例表数据和结构以及应添加的内容

```
tblData

Event Title | Event Date | Last Name | First Name  | Email               | Age |
__________________________________________________________________________________

            | 02/02/2013 | Collins   | James       | collins@hotmail.com | 24  |

POP ACT     | 01/29/2012 | Romas     | Ian         | pizza@gmail.com     |     | 
```

所以从上面我们可以看到第一条记录缺少事件标题，第二条记录缺少年龄。所以应该输出到 tblExceptions 将是：

```
tblExceptions

 Event Title | Event Date | Last Name | First Name  | Email               | Age
__________________________________________________________________________________

             | 02/02/2013 | Collins   | James       | collins@hotmail.com | 24

 POP ACT     | 01/29/2012 | Romas     | Ian         | pizza@gmail.com     | 
```

我想得越多，看起来越复杂，因为字段 Age 对于第一条记录是空白的，但对于下一条记录则不是，所以它必须在表中

希望这能澄清一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:10:55.880

您可以使用查询来显示`tblData`其中任何字段为 Null 的所有行。

```
SELECT
    d.[Event Title],
    d.[Event Date],
    d.[Last Name],
    d.[First Name],
    d.Email,
    d.Age
FROM tblData AS d
WHERE
       d.[Event Title] Is Null
    OR d.[Event Date] Is Null
    OR d.[Last Name] Is Null
    OR d.[First Name] Is Null
    OR d.Email Is Null
    OR d.Age Is Null; 
```

理想情况下，您可以避免将这些行的副本存储在另一个表中 ( `tblExceptions`)。

但是，如果您有令人信服的理由来存储这些行的副本，则可以将其转换为`INSERT`语句（“追加查询”）。

# nosql - Couchbase startkey 作为文字值

> ID：15296446
> 
> 赞同：3
> 
> 时间：2013-03-08T14:36:10.857
> 
> 标签：nosql, couchbase

我正在使用 couchbase 来保存对象。

文档的键如下所示

```
"xxxx_someRandomValue" 
```

例如，我可以拥有这个键

```
aaaa_1
aaaa_2
aaab_1
aaab_2 
```

我正在制作一个视图，它应该返回我所有以文字“aaaa”开头的键的文档。

但是，如果我指定 startKey="aaaa"，它也会为我找到“aaab”，因为它在 unicode 值中比较它。

我可以强制视图只返回以文字“aaaa_”开头的键的文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:31:42.933

找到了解决方案：

要作为前缀，这应该可以

```
startkey="aaaa"&endkey="aaaa\u02ad" 
```

[文件](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-querying-selection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:06:29.767

除了 startkey 之外，您是否尝试过使用 endkey 值，例如

```
&startkey="aaaa"&endkey="aaaa\uefff" 
```

您可以在此处找到有关排序的更多信息：

[http://blog.couchbase.com/understanding-letter-ordering-view-queries](http://blog.couchbase.com/understanding-letter-ordering-view-queries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:25:28.253

试试这个

```
startkey=aaaa&endkey=aaab 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-15T14:55:58.027

API`startKey(final String KEY)`返回所有键（文档名称）大于或等于 KEY 的 unicode 值的 json。

API`endKey(final String KEY)`返回所有键（文档名称）小于 KEY 的 unicode 值的 json。

因此，在您的情况下， startkey="aaaa"&endkey="aaab" （如 avsej 所建议）应该会给您想要的结果。

所以常识说API endKey 是关于比较密钥的结尾，但它是错误的。

# java - 是否可以使用 Log4j 创建单独的日志输出文件以进行自定义输出

> ID：15296449
> 
> 赞同：3
> 
> 时间：2013-03-08T14:36:25.970
> 
> 标签：java, log4j

我想将性能相关数据输出到单独的日志文件。（不是 Server.log）。

例如，在我的课堂上，我想要两个记录器。

```
static Logger logger = Logger.getLogger(MyApp.class.getName());
static Logger logger_performance = Logger.getLogger(MyApp.class.getName()); 
```

第一个吐出到通常的**server.log**中。第二个应该将数据吐出到**performance_data.log**中。据我了解，只有一个文件可以配置记录器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:43:05.670

只需配置第二个记录器：

```
<logger name="your.class.logger" additivity="false">
    <level value="INFO" />
    <appender-ref ref="classlogger" />
</logger>

<logger name="performancelogger" additivity="false">
    <level value="INFO" />
    <appender-ref ref="performancelogger" />
</logger>

static Logger logger = Logger.getLogger(MyApp.class.getName());
static Logger logger_performance = Logger.getLogger("performancelogger"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:42:21.057

您可以在 log4j 中配置多个 Appender。例如，`FileAppender`将日志输出附加到文件。

有关详细信息，请参阅[文档](https://logging.apache.org/log4j/2.x/manual/appenders.html#FileAppender)。

# lambda - 查询 2 参数 Lambda

> ID：15296450
> 
> 赞同：0
> 
> 时间：2013-03-08T14:36:39.097
> 
> 标签：lambda

在下面的代码中，我错过了编译器如何知道 k 映射到 musos，以及为什么 v 是自动递增的：

```
string[] musos = { "David Gilmour", "Rick Wright", "Roger Waters", "Nick Mason" };
int[] keys = new int[] { 1, 4, 3, 2 };

var sorted = musos.Select((k, v) => new { Value = k, Key = keys[v] })
    .OrderBy(k => k.Key)
    .Select(v => v.Value.Split().Last())

foreach (var item in sorted)
{
    Console.WriteLine(item);
} 
```

代码完美运行，返回：

> 吉尔摩·梅森·沃特斯·赖特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:46:08.963

好吧，我们去[msdn](http://msdn.microsoft.com/en-us/library/bb534869.aspx)

```
public static IEnumerable<TResult> Select<TSource, TResult>(
    this IEnumerable<TSource> source,
    Func<TSource, int, TResult> selector
) 
```

> 通过合并元素的索引将序列的每个元素投影到新形式中。

所以在你选择时，你得到了元素 (k) 和它的索引 (v)。

所以

*   带 0(v) 的 David Gilmour(k)（musos 数组中 David Gilmour 的索引）
*   Rick Wright(k) 和 1(v)（Rick Wright 在 musos 数组中的索引）
*   等等

而且您的代码有效，因为 keys 数组至少与 musos 数组一样长，所以

```
keys[0] = 1 //  0 = v
keys[1] = 4 // 1 = v
keys[2] = 3 // 2 = v
keys[3] = 2 // 3 = v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:40:36.903

因为在这种情况下，Select 接受一个 Func 委托，它将 IEnumerable 的每个元素作为键传递给该委托，以及该元素在可枚举中的位置。在您的情况下，元素是来自 musos 数组的字符串。

以下代码：

```
string[] musos = { "David Gilmour", "Rick Wright", "Roger Waters", "Nick Mason" };
int[] keys = new int[] { 1, 4, 3, 2 };

musos.Select((k, v) => new { Value = k, Key = keys[v] }) 
```

可以解释为：

```
musos.Select((Func<string, int, ANONYMOUS_TYPE>)delegate(string k, int v){
                   return new ANONYMOUS_TYPE() { Value = k, Key = keys[v] };
             }); 
```

上面，`ANONYMOUS_TYPE`类型只是编译器自动生成的匿名类型的占位符，用于表示和保存 lambda 表达式返回的对象，这些对象具有两个公共属性：`Value`类型`string`和`Key`类型`int`。这种类型可能如下所示：

```
class ANONYMOUS_TYPE
{
    public ANONYMOUS_TYPE()
    {
    }

    public string Value { get; set; }

    public int Key { get; set; }
} 
```

您现在可以想象在这种情况下 Select 的实现：

```
IEnumerable<ANONYMOUS_TYPE> Select<string, ANONYMOUS_TYPE>(IEnumerable<string> musos, Func<string, int, ANONYMOUS_TYPE> selector)
{
    int pos = 0; 
    var results = new List<ANONYMOUS_TYPE>();
    foreach(string k in musos)
    {
        results.add(selector(k, pos));
        pos++;
    }
    return (IEnumerable<ANONYMOUS_TYPE>)results;
} 
```

# jquery - 排序货币数据表

> ID：15296451
> 
> 赞同：1
> 
> 时间：2013-03-08T14:36:42.760
> 
> 标签：jquery, datatables

我正在尝试使用数据表插件对列进行排序。

该列包含：

```
10 €
20 €
200 €
1000 €
200 €
200.20 €
10.30 € 
```

问题没有正确排序并将其作为字符串。我正在使用此代码但不起作用：

```
jQuery.extend( jQuery.fn.dataTableExt.oSort, {
    "formatted-num-pre": function ( a ) {
        a = (a==="-") ? 0 : a.replace( /[^\d\-\.]/g, "" );
        return parseFloat( a );
    },

    "formatted-num-asc": function ( a, b ) {
        return a - b;
    },

    "formatted-num-desc": function ( a, b ) {
        return b - a;
    }
} ); 
```

问候和感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T14:44:35.863

您还需要在调用中将该列链接到您的插件类型`dataTable`（在声明它之后）。例如，如果它是您的第三列（因此是两个`null`s），请执行以下操作：

```
$(document).ready(function() {
    $('#table-id').dataTable({
        "aoColumns": [
            null,
            null,
            { "sType": "formatted-num" }
        ]
    });
} ); 
```

或者，您可以使用[类型检测插件](http://datatables.net/plug-ins/type-detection)自动计算出每列的类型

# android - 销售安卓应用

> ID：15296453
> 
> 赞同：2
> 
> 时间：2013-03-08T14:36:46.753
> 
> 标签：android, google-play, merchant-account

[我对 Google Play支持的分发应用程序位置的](https://support.google.com/googleplay/android-developer/answer/138294)两件事感到困惑

和[支持的商家位置](https://support.google.com/googleplay/android-developer/answer/150324.)

我住在巴基斯坦。我的问题是我可以在 android play store 上销售应用程序吗？我读过关于开发者可以销售应用程序的国家/地区。但是在允许的国家商家页面中，我的国家没有列出。那么这意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:38:51.833

如果您所在的国家/地区未在“支持分发应用程序的位置”页面中列出，则意味着您无法销售，除非您在这些特定国家/地区拥有帐户

# netbeans-7 - 如何在更多计算机上使用 Netbeans 中的全局库设置？

> ID：15296455
> 
> 赞同：2
> 
> 时间：2013-03-08T14:36:50.423
> 
> 标签：netbeans-7

在 Netbeans 中，我正在开发两个 Java 项目，通常我在两台独立的计算机上工作（我的工作在 Dropbox 中同步 - 项目和使用的 Java 库）。我想在这两台计算机中共享来自 Netbeans 的全局库设置。我不想使用基于项目的库设置，因为某些库通常用于另一个项目，我不想在库管理器中复制它们。

有什么方法可以将全局库设置文件放在不同的位置（在我的情况下在 Dropbox 文件夹中）并将其与更多的 Netbeans IDE 安装一起使用？

# php - iCalendar 回复问题

> ID：15296459
> 
> 赞同：0
> 
> 时间：2013-03-08T14:37:13.960
> 
> 标签：php, icalendar, swiftmailer

我写了一个发送会议请求的小程序。我正在使用 SwiftMailer 发送电子邮件。

当电子邮件到达目的地时，当收件人单击接受/拒绝时，它不会发回通知。我相信标题信息是正确的，电子邮件的内容也是正确的：

```
 <?PHP 
                $message = "<html>\n";
                $message .= "<body>\n";
                $message .= '<p>Dear '.$emailto_name.',</p>';
                $message .= '<p><br>'.$meeting_description.'<br></p>';
                $message .= '<p>Thanks,<br>CATS</p>';
                $message .= "</body>\n";
                $message .= "</html>\n";

                $cal[] = "BEGIN:VCALENDAR";
                $cal[] = "PRODID:-//Microsoft Corporation//Outlook 11.0 MIMEDIR//EN";
                $cal[] = "VERSION:2.0";
                $cal[] = "METHOD:REQUEST";
                $cal[] = "BEGIN:VTIMEZONE";
                $cal[] = "TZID:" . $tz_name . "";
                $cal[] = "BEGIN:STANDARD";
                $cal[] = "DTSTART:".date('Ymd')."T".date('His')."";
                $cal[] = "TZOFFSETFROM:" . $tzOffsetFrom . "";
                $cal[] = "TZOFFSETTO:". $tzOffsetTo . "";
                $cal[] = "RRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=1SU;BYMONTH=11";
                $cal[] = "END:STANDARD";
                $cal[] = "BEGIN:DAYLIGHT";
                $cal[] = "DTSTART:". date('Ymd') . "T" . date('His') . "";
                $cal[] = "TZOFFSETFROM:". $tzOffsetTo . "";
                $cal[] = "TZOFFSETTO:" . $tzOffsetFrom . "";
                $cal[] = "RRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=2SU;BYMONTH=3";
                $cal[] = "END:DAYLIGHT";
                $cal[] = "END:VTIMEZONE";
                $cal[] = "BEGIN:VEVENT";
                $cal[] = "DTSTART;TZID=".$meeting_start;
                $cal[] = "DTEND;TZID=".$meeting_end;
                $cal[] = "ORGANIZER:MAILTO:".$from_address;
                $cal[] = "ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=NEEDS-ACTION;RSVP=TRUE;X-NUM-GUESTS=0:MAILTO:".$from_address;
                $cal[] = "LOCATION:".$meeting_location;
                $cal[] = "TRANSP:OPAQUE";
                $cal[] = "SEQUENCE:0";
                $cal[] = "UID:".$cal_uid;
                $cal[] = "DTSTAMP:".$todaystamp;
                $cal[] = "DESCRIPTION:".$meeting_description;
                $cal[] = "SUMMARY:".$subject;
                $cal[] = "PRIORITY:5";
                $cal[] = "CLASS:PUBLIC";
                $cal[] = "END:VEVENT";
                $cal[] = "END:VCALENDAR";

                $cal_str = implode("\r\n",  $cal);

                $the_message = Swift_Message::newInstance()
                        ->setSubject('Interview Schedule')
                        ->setFrom($emailfrom)
                        ->setSender($emailfrom)
                        ->setTo($emailto)
                        ->setBody($message, 'text/html')
                        ->addPart($cal_str, 'text/calendar');

                $headers = $the_message->getHeaders();

                $headers->AddTextHeader('Content-class', 'urn:content-classes:calendarmessage');
                $headers->AddTextHeader('Disposition-Notification-To', '"' .  $_SESSION['CATS']->getEmail() . '" <' . $_SESSION['CATS']->getEmail() . '>' );

                $result = $mailer->send($the_message);
                if ($result === 1)
                        echo "\tEmail was sent successfully.</p>";
                else
                        echo "\tCould not send the message ($result).</p>";
?> 
```

谁能告诉我没有发送接受/拒绝通知是我做错了什么。

谢谢一堆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:36:46.803

无需尝试，您的文件看起来还可以，但有一个参数：参加者的属性值应该是参加者的电子邮件地址`$to_address`，而不是`$from_address`.

# windbg - WinDbg：打印到另一个窗口

> ID：15296462
> 
> 赞同：1
> 
> 时间：2013-03-08T14:37:21.047
> 
> 标签：windbg

我的 WinDbg 命令窗口总是被无用的 AFW 痕迹污染......因此我想在另一个窗口中打印我自己的东西。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:47:33.187

没办法，我不知道。您可以使用 .ofilter 过滤输出，这可能就足够了。

# javascript - jQuery Datepicker - 根据所选选项刷新可选择的日期

> ID：15296463
> 
> 赞同：18
> 
> 时间：2013-03-08T14:37:29.067
> 
> 标签：javascript, jquery, datepicker

我有一个选择框，用户可以在其中选择 3 个不同的商店。商店 2 和 3 不应该选择周末，而商店 1 应该只能选择周一至周六。

以下 javascript 仅适用于第一个选择。如果您之后立即选择另一家商店，它将坚持使用旧选项。

我试过使用`$( "#datepicker" ).datepicker("refresh");`（看看[如何刷新日期选择器？](https://stackoverflow.com/questions/2129480/how-to-refresh-datepicker-function-datepickermultimonth)）但没有任何成功。我开始认为问题出在其他地方。

**Javascript：**

```
$(function() {

  var setting, currentShop = 0;

  /* Select box */

  $('select#shop').change(function() {
    (currentShop = $(this).val() == 1) ? loadDatePicker(setting = 'noSunday') : loadDatePicker(setting = 'noWeekends');
  });

  /* Datepicker */

  function noSunday(date){ 
    var day = date.getDay(); 
    return [(day > 0), '']; 
  }

  function loadDatePicker(setting) {
    if(setting == 'noWeekends') {
      $( "#datepicker" ).datepicker({ beforeShowDay: $.datepicker.noWeekends, minDate: +2, maxDate: "+1M" }); 
    }
    if(setting == 'noSunday') {
      $( "#datepicker" ).datepicker({ beforeShowDay: noSunday, minDate: +2, maxDate: "+1M" }); 
    }
    $( "#datepicker" ).datepicker("refresh");
  }
}); 
```

**HTML：**

```
 <select id="shop" name="shop">
    <option value="0" selected="selected">Choose a shop</option>
    <option value="1">1 (closed sundays)</option>
    <option value="2">2 (closed weekends)</option>
    <option value="3">3 (closed weekends)</option>
  </select>
  <label for="datepicker">Datepicker</label><input type="text" name="date" id="datepicker" value="" readonly="readonly" /> 
```

jsfiddle：http: [//jsbin.com/ajavek/1/edit](http://jsbin.com/ajavek/1/edit)

如何使用 datepicker 正确刷新/应用设置？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-08T15:01:53.187

看到这个：**[演示](http://jsbin.com/ajavek/5)**

```
 function loadDatePicker(setting) {
    $("#datepicker").datepicker("destroy");
    if(setting == 'noWeekends') {
      $( "#datepicker" ).datepicker({ beforeShowDay: $.datepicker.noWeekends, minDate: +2, maxDate: "+1M" }); 
    }
    else if(setting == 'noSunday') {
      $( "#datepicker" ).datepicker({ beforeShowDay: noSunday, minDate: +2, maxDate: "+1M" }); 
    }
    $( "#datepicker" ).datepicker("refresh");
  } 
```

您需要在`$("#datepicker").datepicker("destroy");`每次更改设置之前放置...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-14T06:42:39.530

```
$("#datepicker").datepicker("destroy"); 
```

上述用于清除`datepicker`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T05:59:40.253

$("#datepicker").datepicker("destroy");

# git - git checkouts 的真正含义是什么？

> ID：15296473
> 
> 赞同：117
> 
> 时间：2013-03-08T14:38:08.363
> 
> 标签：git, git-checkout

`checkout`git中的s是什么？

我知道一旦你`checkout`对一个特定的分支做了，`HEAD`指向那个分支的点。但它的真正含义是什么？这是否意味着我可以在那个分支上工作？如果是，那么，如果不检查分支，我就无法处理它？

还有，什么`remote checkout`意思？它有什么用处？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-08T15:39:34.660

如您所述，`HEAD`是一个标签，指出您在提交树中的位置。当您从一个提交转移到另一个提交时，它会与您一​​起移动。 `git checkout <commit>`是在提交树中移动的基本机制，将您的焦点 ( `HEAD`) 移动到指定的提交。

提交可以通过多种方式中的任何一种来指定，提交哈希、分支名称、标签名称、相关语法（`HEAD^`、`HEAD~1`等）等等。将结帐视为更改分支通常很有用，并且从这个角度来看，有一些选项可以工作，但它们都引用了提交。

签出一个提交除了移动之外还有一些副作用`HEAD`。

*   工作目录更新为签出提交的状态。
*   如果指定了分支名称，则 checkout 会激活该分支。活动分支将与添加的任何新提交一起移动。
    *   使用该`-b`选项，将根据当前提交创建一个新分支，然后将其激活。
    *   使用该`--track`选项，可以使签出的分支知道远程分支
    *   使用该`--orphan`选项创建一个新分支（如 with `-b`），但不会基于任何现有提交。

还有更多选项，您可以在[git checkout 手册页](http://git-scm.com/docs/git-checkout)中了解这些选项，所有这些选项都围绕着从一个提交移动到另一个提交——只是移动除了移动之外的影响有所不同`HEAD`。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-08-13T12:36:54.030

让我解释一些使用文件、文件夹和分支结帐的用例，以便有助于理解。

假设我们有一个名为的文件夹`dev`，并且`index.html`所有内容都被跟踪并且工作目录是干净的。

如果我不小心更改了文件名`index.html`并且我想撤消它，我将简单地使用`git checkout index.html`它将从存储库当前选择的分支恢复该文件状态。

现在，如果我对文件夹进行了一些更改`dev`并想要恢复它。我可以使用`git checkout dev`，但是如果已经命名了分支`dev`而不是签出该文件夹，它将拉下该分支怎么办。为了避免这种情况，我宁愿这样做`git checkout -- dev`。

`dev`现在这里裸双破折号代表当前分支，并从当前选定的分支向 git 询问文件夹。

同样，如果我这样做`git checkout alpha dev`，它将从 alpha 分支拉下 dev 文件夹。

这个答案是针对您的第一个问题“git checkout 真的意味着”。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-08T14:55:00.533

“签出”意味着您从存储库中获取任何给定的提交，并在工作目录中重新创建相关文件和目录树的状态。

当您签出*不是*分支头的提交时（例如`git checkout HEAD~2`），您处于所谓的*分离*头上。您可以在此处创建提交，但是一旦切换到不同的分支，这些提交将无法通过分支名称恢复，甚至可能在一段时间后被垃圾收集器删除。

# python - SQLAlchemy 反射：如何将数据更新到反射表中？

> ID：15296478
> 
> 赞同：1
> 
> 时间：2013-03-08T14:38:25.670
> 
> 标签：python, sqlalchemy

使用 SQLAlchemy 反射，如何将数据插入/更新到表中？

我刚刚了解了如何使用 SQLAlchemy Reflection 查询特定表，[详见此处](https://stackoverflow.com/questions/15223722/sqlalchemy-reflection-how-do-i-query-data-from-specific-columns)。完成了数据操作，现在我想保存到数据库中，但我不知道如何保存。这是我到目前为止所尝试的。

```
class Member(Base):
    __table__ = Table('member', Metadata, autoload=True)
    def set_password(self, member_id, password):
        data = None
        for data in session.add( self.__table__.c.member_id, self.__table__.c.parking_slot_id):            
            self.__table__.c.id = member_id
            self.__table__.c.password = password
            session.flush() 
```

那失败了：

```
Traceback (most recent call last):
  File "/home/workspace/testmod/src/tester.py", line 44, in <module>
    m.set_password(m, 1, "password")
  File "/home/workspace/testmod/src/tester.py", line 36, in set_password
    for data in session.add(self.__table__.c.id, self.__table__.c.password):            
  File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/orm/session.py", line 1363, in add
    if _warn and self._warn_on_events:
  File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/sql/expression.py", line 1932, in __bool__
    raise TypeError("Boolean value of this clause is not defined")
TypeError: Boolean value of this clause is not defined 
```

那么，我们如何更新/插入反射表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:49:57.627

您使用 session.add() 的方式完全错误-它没有返回值，并且接受映射对象（例如 Member 实例：）`m = Member()`作为参数，而不是 Column 对象。您发送的第二个参数是未公开使用的内部参数，这就是您收到错误的原因。

我强烈建议您仔细阅读本[教程](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html)，以了解如何使用 Session 和 add() 方法。

您要查找的具体用法不一定清楚，但您提供的调用签名`set_password()`表明您希望将具有给定 member_id 的行更改为某个密码。这意味着它是一个查找方法，它将在类级别：

```
class Member(Base):
    __table__ = Table('member', Metadata, autoload=True)

    @classmethod
    def set_password(cls, member_id, password):
        member = session.query(Member).filter_by(member_id=member_id).one()
        member.password = password
        session.flush()

# usage:

Member.set_password(56, "somepassword") 
```

如果您真的只想为那个值发出 UPDATE 并且不再需要刚刚加载的 Member 对象，则可以使用直接 update() 更有效地完成它：

```
class Member(Base):
    __table__ = Table('member', Metadata, autoload=True)

    @classmethod
    def set_password(cls, member_id, password):
        session.query(Member).filter_by(member_id=member_id).\
                    update({'password':password}, synchronize_session=False) 
```

# java - Rome RSS 不解析附件

> ID：15296483
> 
> 赞同：0
> 
> 时间：2013-03-08T14:38:44.470
> 
> 标签：java, xml, rss, rome

我尝试使用带有附件的 Rome 创建一个 rss Feed（用于播客）。所以我创建了一个条目

```
SyndEntry entry = new SyndEntryImpl(); 
```

在我设置条目的基本信息（如标题和链接）后，我想为媒体文件设置一个附件。

```
SyndEnclosure enclosure = new SyndEnclosureImpl();
enclosure.setType("audio/mpeg");
enclosure.setUrl(enclosureURL);
enclosure.setLength(123456);
List<SyndEnclosure> enList = new ArrayList<SyndEnclosure>();
enList.add(enclosure);
entry.setEnclosures(enList); 
```

但是当我输出RSS文件时

```
File cacheFile = new File(filename);
SyndFeedOutput output = new SyndFeedOutput();
FileWriter writer;
try {
    writer = new FileWriter(cacheFile);
    output.output(feed, writer);
} 
```

附件不会出现在 RSS 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:51:14.937

我发现了我的错误。我的 SyndFeed 是一个 RSS 1.0 提要，它显然不支持附件。使用 RSS 2.0，它运行良好。

# sharepoint - 如何在 Access 2013 + SharePoint 中丢弃本地更改并使用新副本

> ID：15296485
> 
> 赞同：-1
> 
> 时间：2013-03-08T14:38:47.810
> 
> 标签：sharepoint, ms-access

我在 SharePoint 2010 中使用 Access 数据库服务，并且该数据库已在 SharePoint 2010 (Office 365) 上发布。

我对表单进行了一些更改，但我不想同步它并丢弃所有本地更改并使用新副本。我从 SharePoint 访问服务站点下载了数据库，但它仍然显示以前的更改。似乎它保存了之前在本地计算机中所做的所有更改。

您能否告诉我如何使用数据库的新副本或放弃所有更改并从 SharePoint 上已有的最新副本开始（上次同步）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:50:24.130

如果下载的副本显示之前的更改，则表示之前的更改已同步。因此，除非您像所有开发人员一样在进行更改之前保存备份，否则恐怕您不走运。

请记住，您可以取消附加或保存本地未发布的副本。我建议你每天都这样做，或者至少在一天开始时这样做，所以如果你搞砸了，那么就像所有开发人员一样，你可以从你的备份中导入甚至剪切+粘贴代码。

要保存本地“未附加”或所谓的未发布数据库，您只需转到文件-> 保存并发布，然后选择“另存为本地数据库”。

但是，现在如果您看到从 SharePoint 下载的内容发生了变化，那么这就是保存并同步到 SharePoint 的内容。因此，通过下载新副本，您会看到新副本中的更改，那么从逻辑上讲，这表明更改已在某个时间点同步到服务器。

此外，如果这是/是第一次发布，则在与 Accdb 文件所在的目录相同的目录中创建未发布的 AT FIRST 发布。它将被命名

```
YouFileName_backup.accDB 
```

# websocket - Opera 中的 Websocket 功能

> ID：15296491
> 
> 赞同：1
> 
> 时间：2013-03-08T14:39:04.420
> 
> 标签：websocket, opera

我正在尝试了解 Opera 浏览器支持的 websocket 功能。我从网上得到了一些示例代码。

是否可以使用 websockets 从 Opera 12.x 浏览器的某个端口（比如 9999）连接到一个简单的 c echo 服务器（不使用 web 服务器）？我试过了，但没有用。我在浏览器中遇到断开连接错误，错误为：未定义。在 Linux 回显服务器端，它正在获取连接请求，接受它，但无法读取任何数据。

我正在本地加载测试页面，而不是从任何 Web 服务器。

如果简单的回显服务器还不够，是否可以增强简单的回显服务器以返回 HTTP 响应并使其工作。基本上我正在尝试使用浏览器中的 websockets 接口连接到服务器而不使用任何 Web 服务器。

谢谢，拉吉

[websocket 客户端（从http://www.websocket.org/echo.html](http://www.websocket.org/echo.html)复制）

```
<!DOCTYPE html> 

 <meta charset="utf-8" /> 

 <script language="javascript" type="text/javascript"> 

  var wsUri = "ws://192.168.100.2:9999/"; 
 var output; 

  function init() 
 { 
 output = document.getElementById("output"); 
 testWebSocket(); 
 } 

  function testWebSocket() 
 { 
 websocket = new WebSocket(wsUri); 
 websocket.onopen = function(evt) { onOpen(evt) }; 
 websocket.onclose = function(evt) { onClose(evt) }; 
 websocket.onmessage = function(evt) { onMessage(evt) }; 
 websocket.onerror = function(evt) { onError(evt) }; 
 } 

  function onOpen(evt) 
 { 
 writeToScreen("CONNECTED"); 
 doSend("WebSocket rocks"); 
 } 

  function onClose(evt) 
 { 
 writeToScreen("DISCONNECTED"); 
 } 

  function onMessage(evt) 
 { 
 writeToScreen('<span style="color: blue;">RESPONSE: ' + evt.data+'</span>'); 
 websocket.close(); 
 } 

  function onError(evt) 
 { 
 writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data); 
 } 

  function doSend(message) 
 { 
 writeToScreen("SENT: " + message); 
 websocket.send(message); 
 } 

  function writeToScreen(message) 
 { 
 var pre = document.createElement("p"); 
 pre.style.wordWrap = "break-word"; 
 pre.innerHTML = message; 
 output.appendChild(pre); 
 } 

  window.addEventListener("load", init, false); 

 </script> 

 <div id="output"></div> 

 </html> 
```

[Echo 服务器（从http://www.cs.utah.edu/~swalton/listings/sockets/programs/part2/chap6/simple-server.c](http://www.cs.utah.edu/~swalton/listings/sockets/programs/part2/chap6/simple-server.c)复制）。

```
.

#define MY_PORT     9999
#define MAXBUF      1024

int main(int Count, char *Strings[])
{   int sockfd;
    struct sockaddr_in self;
    char buffer[MAXBUF];

    /*---Create streaming socket---*/
    if ( (sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0 )
    {
        perror("Socket");
        exit(errno);
    }

    /*---Initialize address/port structure---*/
    bzero(&self, sizeof(self));
    self.sin_family = AF_INET;
    self.sin_port = htons(MY_PORT);
    self.sin_addr.s_addr = INADDR_ANY;

    /*---Assign a port number to the socket---*/
    if ( bind(sockfd, (struct sockaddr*)&self, sizeof(self)) != 0 )
    {
        perror("socket--bind");
        exit(errno);
    }

    /*---Make it a "listening socket"---*/
    if ( listen(sockfd, 20) != 0 )
    {
        perror("socket--listen");
        exit(errno);
    }

    /*---Forever... ---*/
    while (1)
    {   int clientfd;
        struct sockaddr_in client_addr;
        int addrlen=sizeof(client_addr);

        /*---accept a connection (creating a data pipe)---*/
        clientfd = accept(sockfd, (struct sockaddr*)&client_addr, &addrlen);
        printf("%s:%d connected\n", inet_ntoa(client_addr.sin_addr), ntohs(client_addr.sin_port));
        printf("Received %d\n", recv(clientfd, buffer, MAXBUF, 0));
        printf("Date %s\n\n", buffer);

        /*---Echo back anything sent---*/
        send(clientfd, buffer, recv(clientfd, buffer, MAXBUF, 0), 0);

        /*---Close data connection---*/
        close(clientfd);
    }
.
.
. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T02:14:27.693

WebSocket 协议不是原始 TCP 套接字连接。您的服务器还必须支持 WebSocket 协议。

[在http://www.websocket.org/echo.html](http://www.websocket.org/echo.html)有一个在线 WebSockets 回显服务

如果您真的想从 WebSockets 连接到原始套接字服务器，您可以使用[websockify](https://github.com/kanaka/websockify)在两者之间架起桥梁。**免责声明**：我制作了 websockify。

# drupal-6 - 如何在 Drupal 6 中使用 hook_form_Form_ID_alter() 对自定义表单上的“#type”=>“select”字段运行自定义验证

> ID：15296492
> 
> 赞同：0
> 
> 时间：2013-03-08T14:39:11.397
> 
> 标签：drupal-6, validation, hook-form-alter

作为一个新手并使用 hook_form_Form_ID_alter() 更改站点范围的表单和字段是一项巨大的成就，但现在我开始遇到涉及验证我添加的一些自定义字段的问题。以下是我的*custom_form.module*文件中的代码。

```
<?php

/**
 * Implementation of hook_form_Form_ID_alter(). 
 * @see http://api.drupal.org/api/function/hook_form_Form_ID_alter
 * Targets only request catalog form and adds a few custom fields to the default Drupal contact form and removes some fields.
 */

function states_list() {
  return array(
  '- Select -',
'AL' => 'Alabama',

 //rest of states....,

  );
}

function request_catalog_form_local_contact_page_alter(&$form, $form_state) {
    $form['parts_catalog'] = array(
        '#title' => t('Retail Parts Catalog'),
        '#type' => 'checkbox',
    );
    $form['sprayer_catalog'] = array(
        '#title' => t('Sprayer Parts Catalog'),
        '#type' => 'checkbox',
    );
    $form['address'] = array(
        '#title' => t('Address'),
        '#type' => 'textfield',
        '#required' => true,
    );
    $form['city'] = array(
        '#title' => t('City'),
        '#type' => 'textfield',
        '#size' => 30,
        '#required' => true,
    );
    $form['state'] = array(
        '#title' => t('State'),
        '#type' => 'select',
        '#options' => states_list(),
        '#required' => true,
    );
    $form['country'] = array(
        '#title' => t('Country'),
        '#type' => 'select',
        '#options' => array(
            'US' => t('United States'),
            'Canada' => t('Canada'),
        ),
        '#required' => true,
    );
    $form['zip'] = array(
        '#title' => t('Zip'),
        '#type' => 'textfield',
        '#size' => 6,
        '#maxlength' => 6,
        '#required' => true,
    );
    $form['phone'] = array(
        '#title' => t('Phone (xxx-xxx-xxxx)'),
        '#type' => 'textfield',
        '#size' => 12,
        '#maxlength' => 12,
        '#required' => true,
    );
    //Removes the textfield Message and the dropdown Subject choice.
    $form['message']['#access']=false;
    $form['subject']['#access']=false;

    //Remove the Send Email submit button text by setting it to nothing and changing it.
    $form['submit']['#title'] = '';
    $form['submit']['#value'] = 'Submit Your Request';

    // reorder the elements in the form to include the elements being inserted
    $order = array('parts_catalog', 'sprayer_catalog', 'name', 'address', 'city', 'state', 'country', 'zip', 'phone', 'mail', 'copy', 'submit');
    foreach($order as $key => $field) {
        $form[$field]['#weight'] = $key;
    }
}

// The custom email message sent using the data gathered in the form
function request_catalog_mail_alter(&$message) {
    if ($message['id'] == 'contact_page_mail') {
        $message['body'][1] = $message['params']['name'].' '.'has requested the following catalogs:';
        $message['body'][2] = 'Parts Catalog: ' . $message['params']['parts_catalog']. '     ' . 'Sprayer Parts Catalog: ' .$message['params']['sprayer_catalog'];
        $message['body'][4] = 'Send to:  ' . $message['params']['address'].', '. $message['params']['city'].', ' . $message['params']['state'].' '  . $message['params']['zip']. ' ' . $message['params']['country'];
    }
} 
```

**此时我最感兴趣的是如何在美国州下拉字段中显示“-选择-”，但不要让用户选择它作为选项。**此时，他们可以将 -Select- 留在该必填字段中，并且 Drupal 允许提交表单。通过电子邮件为该特定字段发送的数据 = 0。我想强制用户实际选择一个状态。

我已经尝试了以下所有方法。

*   [http://www.chromaticsites.com/blog/drupal-tutorial-form-overrides-and-element-specific-validations/](http://www.chromaticsites.com/blog/drupal-tutorial-form-overrides-and-element-specific-validations/)
*   [Drupal 表单验证对我不起作用](https://stackoverflow.com/questions/2376581/drupal-form-validation-not-working-for-me)
*   [http://befused.com/drupal/additional-validation-function](http://befused.com/drupal/additional-validation-function)

我已经尝试了这些的多种代码试错变体，但没有任何效果像广告宣传的那样......

非常感谢您的澄清问题或建议。请记住在您的解释中要具体和简单，并请定义术语 - 目前对我来说，大多数 php 就像阅读莎士比亚。
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:46:12.353

我在这个问题上睡了一觉，然后重试了我之前尝试过的链接之一。[Drupal 表单验证对我不起作用](https://stackoverflow.com/questions/2376581/drupal-form-validation-not-working-for-me)

我能够让它令我满意：我在设置 $order 值后立即在函数 request_catalog_form_local_contact_page_alter(&$form, $form_state) 中使用了它。

```
 // reorder the elements in the form to include the elements being inserted
    $order = array('parts_catalog', 'sprayer_catalog', 'name', 'address', 'city', 'state', 'country', 'zip', 'phone', 'mail', 'copy', 'submit');
    foreach($order as $key => $field) {
        $form[$field]['#weight'] = $key;
    }
    $form['#validate'][] = 'request_catalog_local_contact_page_validate';

        function request_catalog_local_contact_page_validate(&$form, &$form_state) {
          if ($form_state['values']['state'] == '0') {
            form_set_error('state', t('Please Select a State'));
          };
           if ($form_state['values']['parts_catalog'] == '0' and $form_state['values']['sprayer_catalog'] =='0') {
            form_set_error('parts_catalog' and 'sprayer_catalog', t('Please Select a Catalog'));
          };
        }

// The custom email message sent using the data gathered in the form
        function request_catalog_mail_alter(&$message) {
            if ($message['id'] == 'contact_page_mail') {
                $message['body'][1] = $message['params']['name'].' '.'has requested the following catalogs:';
                $message['body'][2] = 'Parts Catalog: ' . $message['params']['parts_catalog']. '     ' . 'Sprayer Parts Catalog: ' .$message['params']['sprayer_catalog'];
                $message['body'][4] = 'Send to:  ' . $message['params']['address'].', '. $message['params']['city'].', ' . $message['params']['state'].' '  . $message['params']['zip']. ' ' . $message['params']['country'];
            }
        }

} 
```

适用于我现在需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T07:27:00.870

还有另一种方法可以避免这种情况。

只需将 NULL 值作为 ket 分配给第一个选项。

前任：

```
 function states_list() {
   return array(
     '' =>'- Select -',
     'AL' => 'Alabama',
   //rest of states....,
   );
 } 
```

这会做。

# arrays - 如何从 lua 数组中提取值？

> ID：15296495
> 
> 赞同：3
> 
> 时间：2013-03-08T14:39:35.107
> 
> 标签：arrays, lua, lua-table

我正在调试别人的应用程序，我遇到了一个数据结构，当转储到文件时，它看起来像这样：

```
 ["value"] = {}
 ["value"]["0.ouname"] = {}
 ["value"]["0.ouname"]["label"] = "Test value"
 ["value"]["0.ouname"]["seq"] = 90
 ["value"]["0.ouname"]["type"] = "text"
 ["value"]["0.ouname"]["value"] = ""
 ["value"]["1.ouname"] = {}
 ["value"]["localityName"]["value"] = "California" 
```

我需要能够从中提取序列号“90”，但我不知道如何。我可以通过执行以下操作来获得“加利福尼亚”的价值：

```
print(myvar.value.localityName.value) 
```

但是，我似乎无法获得序列号

到目前为止，我已经尝试了以下方法：

```
print(myvar.value.0.ouname.seq)
print(myvar.value.["0.ouname"].seq)
print(myvar.value."0.ouname".seq) 
```

但是我没有成功！

如果您有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:56:01.990

在 Lua 中，`a.b`是`a["b"]`. 当然，您只能在可能的情况下使用它，并且生成的表达式不会有其他含义（如您的示例中所示）。

因此，您必须使用

```
print(myvar.value["0.ouname"].seq) 
```

您也可以删除所有点并仅使用`[]`，例如：

```
print(myvar["value"]["0.ouname"]["seq"]) 
```

Which is exactly the same format that has been written to file.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:44:09.970

```
print(myvar.value['0.ouname'].seq) 
```

# matlab - matlab单元格数组，计算不同元素的数量

> ID：15296497
> 
> 赞同：2
> 
> 时间：2013-03-08T14:39:38.047
> 
> 标签：matlab, cell-array

我有 2 个单元格数组，如下所示：

```
A = {'S' 'M' 'N' 'E'};
B = {'E' 'M' 'Q' 'S'}; 
```

在这种情况下，不同元素的数量为 3。

在数字数组中，我可以`length(find(A ~= B));`轻松地一步计算不同元素的数量。

字符元胞数组有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:43:30.110

尝试

```
cell2mat(A)==cell2mat(B) 
```

首先，其余的应该是直截了当的。如果单元阵列的维度不同，这种简单的方法将失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T18:34:47.913

如果您的元胞数组是字符串元胞数组，您可以使用 STRCMP：

```
sum(~strcmp(A,B)) 
```

当然要确保`A`和`B`有相同的长度。

* * *

顺便说一下，对于数值数组，使用`sum(A~=B)`. 一般`find`比较慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T10:15:14.633

*编辑：我想我误解了你的问题，你可能的意思是在数组的相应位置找到不同的元素。我仍然保留我的旧答案*

### 计算同一位置的不同元素

yuk 的做法`strcmp`是正确的。但是，它仅在两个数组大小相同时才有效。广义的解决方案是：

```
N = min(numel(A), numel(B));
sum(~strcmp(A(1:N), B(1:N))) + numel(A) + numel(B) - 2 * N 
```

如果数组的长度不同，则较大数组中的“额外”元素将在此处计为不同。

### 计算任何位置的不同元素

最通用的方法是使用`ismember`，它不关心字符串的长度或它们在数组中的位置。`A`要计算和中不同的元素总数`B`，只需执行以下操作：

```
sum(ismember(A, B)) + sum(ismember(B, A)) 
```

[`setdiff`](http://www.mathworks.com/help/matlab/ref/setdiff.html)使用（而不是）也可以获得相同的效果`ismember`：

```
numel(setdiff(A, B)) + numel(setdiff(B, A)) 
```

这两种方式对任何两个数组都有效，不一定大小相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T03:29:48.783

如果您给出的示例中给出了 A 和 B，您也可以尝试 unique([AB]) 。它 A 和 B 的尺寸不同，你可以试试这个。

独特的（重塑（cell2mat（A，1，[]）），重塑（cell2mat（B，1，[]）））

# google-chrome - Nexus 7 和 HTML5 音频循环

> ID：15296498
> 
> 赞同：6
> 
> 时间：2013-03-08T14:39:38.760
> 
> 标签：google-chrome, html5-audio, nexus-7

我在使用 Chrome 的 Nexus 7 上循环播放音频标签时遇到问题。

```
<audio controls="" autoplay="" loop="">
    <source src="path/to/file.ogg" type="audio/ogg">
    <source src="path/to/file.mp3" type="audio/mpeg">
</audio> 
```

循环在 Firefox 中有效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T11:05:45.150

这个问题似乎只发生在 Linux 机器上——我使用的是 Debian Wheezy。我不知道为什么，但我已经切换到 mp3 文件并且循环现在正在工作。

# wcf - 默认情况下，是否为网络中任何计算机的方法调用打开 WCF 服务？

> ID：15296503
> 
> 赞同：0
> 
> 时间：2013-03-08T14:39:46.673
> 
> 标签：wcf, web-services, security, service, wcf-security

我有一个 Silverlight Web 应用程序，我正在使用 wcf 服务将数据加载到客户端。我应该保护 WCF 服务吗？网络上的任何人都可以调用该服务的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:43:42.777

是的，如果他们知道 url，他们就可以查看和访问服务。

如果他们能看到，他们只需要做一个“添加服务引用”，他们就可以看到所有可用的方法。

由于silverlight 使用基本的httpbinding，它可以通过防火墙工作（它们通常允许http 流量）。

如果它包含敏感信息，您应该保护它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:47:09.777

默认情况下，您将通过默默无闻获得安全性，因此如果您不广播 WCF 服务的存在，则不太可能找到或调用它。此外，如果没有配置适当的客户端代理，将很难使用它。如果您没有设置 MEX 端点，那么您仍然非常安全。

尽管如此，你还没有真正授权这些电话。理论上可以找到您的 WCF 服务并创建一个代理来调用它。因此，如果您想要安全，我建议您查看 WCF 授权。设置起来相当容易，您可以使用各种选项，例如用户名-密码、Windows 帐户或 X.509 证书。每个都有其优点和缺点。

这篇文章很详细，还有其他的。[http://msdn.microsoft.com/en-us/magazine/cc948343.aspx](http://msdn.microsoft.com/en-us/magazine/cc948343.aspx)

# sql-server-2008 - 单表上的tsql多重更新

> ID：15296505
> 
> 赞同：2
> 
> 时间：2013-03-08T14:40:00.970
> 
> 标签：sql-server-2008, tsql

有没有办法根据多个 where 子句更新表。在一个单一的声明？

```
update A
set Final = '21'
from StudentTable A
where Student_ID= 4 and bitcm= 0 and receipt= 17

update B
set Final = '22'
from StudentTable B
where Student_ID=4 and bitcm= 0 and receipt =12

update C
set Final ='11'
from StudentTable C
where Student_ID=4 and bitcmp=1 and receipt=17

update D
set Final ='12'
from StudentTable D
where Student_ID=4 and bitcmp=1 and receipt=12 
```

有没有办法将所有这些语句组合成一个语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:42:40.337

就在这里：

```
UPDATE  A
SET     Final = CASE WHEN bitchcm = 0 AND receipt = 17 THEN '21'
                     WHEN bitchcm = 0 AND receipt = 12 THEN '22'
                     WHEN bitchcm = 1 AND receipt = 17 THEN '11'
                     WHEN bitchcm = 1 AND receipt = 12 THEN '12'
                END
FROM    StudentTable A
WHERE   Student_ID = 4 AND   -- the purpose of the three conditions
        bitcm IN (0,1) AND   -- is to speed up the query. It will not
        receipt IN (12,17)   -- scan the whole records on the table 
```

如果 column`FINAL`是，`INT`那么您不需要用单引号将值括起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:43:55.447

如果这些是 4 的唯一四行`Student_ID`，那么以下工作：

```
update A
set Final = CASE
    WHEN bitcm=0 and receipt=17 THEN '21'
    WHEN bitcm= 0 and receipt =12 THEN '22'
    WHEN bitcmp=1 and receipt=17 THEN '11'
    WHEN bitcmp=1 and receipt=12 THEN '12'
    END
from StudentTable A
where Student_ID= 4 
```

（我假设`bitcm`并且`bitcmp`应该是同一列，但我不确定使用哪个拼写）

更通用的方法是创建一个表（可能是表变量或参数），其中包含所有必需的键列和新的最终值。然后你会写：

```
UPDATE A
SET Final = B.Final
FROM StudentTable A
INNER JOIN @AboveMentionedTableVariableOrParameter B
ON
    A.Student_ID = B.Student_ID and
    A.bitcm = b.bitcm and
    A.receipt = b.receipt --And add any other necessary conditions here. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:44:15.357

您可以使用 CASE 语句

```
UPDATE StudentTable
SET Final = 
 CASE WHEN Student_ID= 4 and bitcm= 0 and receipt= 17 THEN 21
  WHEN Student_ID=4 and bitcm= 0 and receipt =12 THEN 22
  WHEN Student_ID=4 and bitcmp=1 and receipt=17 THEN 11
  WHEN Student_ID=4 and bitcmp=1 and receipt=12 THEN 12
 END
WHERE Student_ID = 4
AND bitcm IN (0,1)
AND receipt IN (12,17) 
```

# python - 计算重叠的位置

> ID：15296507
> 
> 赞同：2
> 
> 时间：2013-03-08T14:40:05.580
> 
> 标签：python, algorithm

如果你有两对值，开始和结束——你如何计算它们的重叠在哪里？

即，如果开始和结束值对是

> [10, 20], [15, 20]

在这种情况下`compute_overlap((15,20),(10,20))`应该返回`(15,20)`，因为那是重叠的地方。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T14:43:46.897

如果你的区间是`a, b`and `c, d`，即

```
(a, b), (c, d) = [10, 20], [15, 20] 
```

那么重叠区间是

```
x, y = max(a, c), min(b, d)
if x > y:  # no overlap
    x, y = None, None 
```

并且重叠量是`y - x`或`y - x + 1`，具体取决于您的间隔是封闭的还是[半封闭的](http://mathworld.wolfram.com/Half-ClosedInterval.html)（假设这里是整数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:48:42.633

用于`zip`将起点和终点组合在一起。然后用`max`求最大起点，`min`求最小终点：

```
>>> def compute_overlap(pairs):
...     starts, ends = zip(*pairs)
...     return max(starts), min(ends)
... 
>>> compute_overlap(([10, 20], [15,20]))
(15, 20) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:43:33.550

假设您有一个可迭代的并且您想要计算相邻项目的重叠......

您需要“成对”产生元素。通常，这很简单：

```
seq = [[10, 20], [15, 20]]
for lower,upper in zip(seq,seq[1:]):
    if upper[0] > lower[1]:
        print lower[1],upper[0] 
    else:
        print None, None 
```

不幸的是，切片仅适用于序列，而不适用于任意迭代。不过不难概括：

```
def funny_zip(seq):
    iseq = iter(seq)
    current = next(iseq):
    for item in iseq:
        yield current,item
        current = item 
```

现在你可以使用：

```
for lower,upper in funny_zip(seq):
    ... 
```

# php - simplexml_load_file 并未能加载外部实体

> ID：15296509
> 
> 赞同：0
> 
> 时间：2013-03-08T14:40:20.207
> 
> 标签：php

我正在尝试使用 $url 参数调用 simplexml_load_file 作为另一个 .php 文件，然后该文件将进行一些计算，然后，它将“回显”包含 xml 代码的字符串。

它看起来像这样：

```
$urlrequest= $_SERVER['DOCUMENT_ROOT']."/generateXML.php?id=5&output=xml";
$xml = simplexml_load_file($urlrequest); 
```

其中 generateXML.php 将类似于：

```
<?php

//do some random code

$aux= '<?xml version="1.0" encoding="UTF-8" ?>'; 
$aux.= "<item>";
$aux.= "<name>John</name>";
$aux.= "<location>somewhere</location>";
$aux.= "</item>";

echo $aux;
?> 
```

问题是，如果 generateXML.php 位于远程 ip 它会正常工作，但是当文件位于同一服务器中时，我会收到“无法加载外部实体”错误。

我发现问题可能来自url中的参数。例如：

**$var1=file('dosomething.php');** 工作正常

**但是 $var1=file('dosomething.php?id=1');** 返回“无法打开流”错误

我需要能够将这些参数添加到 url，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:57:13.560

看起来问题不大，`allow-url-fopen`因为您说它在远程服务器上运行良好。
你调用什么 URL 来访问你的本地服务器？也许尽量避免使用类似的名称`http://localhost/something.php`并仅使用 IP 地址，例如`http://127.0.0.1/something.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:52:01.283

如果参数是 URL，PHP 将发出一个套接字请求，因此请检查您的 PHP.ini 设置，例如 [http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url -fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

但是通过将脚本直接包含在参数中来加载生成 XML 的脚本可能更优雅、更快捷，否则你基本上只会用一个无用的附加请求来给你的网络服务器施加压力

# google-custom-search - 如何获取 Google CSE RESTFull API 结果的下一页和对每日请求限制的困惑？

> ID：15296512
> 
> 赞同：0
> 
> 时间：2013-03-08T14:40:35.947
> 
> 标签：google-custom-search

我正在使用 Google CSE Restlful API。我得到结果的代码是

```
 Google.Apis.Customsearch.v1.CseResource.ListRequest listRequest = svc.Cse.List(query);
        listRequest.Cx = cx;
        Google.Apis.Customsearch.v1.Data.Search search = listRequest.Fetch();
 foreach (Google.Apis.Customsearch.v1.Data.Result result in search.Items)
        {
          //do something with items
        } 
```

它返回我 10 个结果中的 100 个。要查看下 10 条记录的结果，我必须

```
 listRequest.Start = 11;
 search = listRequest.Fetch(); 
```

现在我的“search.Items”有 11-20 的结果。现在我有两个问题：

1-获取下一页结果的正确方法（接下来的 10 条记录）？

2- 这样做是否意味着我每天在 100 个允许的请求中消耗了 2 个请求？

如果这是正确的，那么实际上用户每天只能从 Google CSE API 获得总共 1000 个结果。

所以这意味着如果我必须查看我的第一个查询的所有 100 个结果，我将不得不提出 10 个请求。

谢谢，瓦西姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:20:10.077

是的，这是正确的方法：将 start 参数设置为下一个索引将从您的查询中请求下一个分页结果。

你在第二个问题上也是对的，每个请求（分页或非分页）都被计算在每天允许的最大值 100 之间，因此每天最多有 1000 个结果。

# javascript - Javascript 变量初始化

> ID：15296515
> 
> 赞同：2
> 
> 时间：2013-03-08T14:40:43.233
> 
> 标签：javascript

JavaScript中有一件事我无法理解。

当我们像这样声明一个变量时：

```
var var_Name 
```

它称为*局部变量*。

当我们像这样声明一个变量时：

```
var_Name 
```

它称为*全局变量*。

浏览器何时重置其值？一旦页面刷新？

我的意思是，当页面加载时，我声明了一个变量，到那时，我增加了它的值。什么时候该值将设置回它的原始初始化？当我刷新页面？或者如果它是*局部变量*，它会在停止使用后立即刷新，如果它是*全局变量*，它只会在页面刷新时刷新？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:43:53.517

可以从页面加载的任何文件中的任何函数访问全局变量。并且当页面重新加载时，该变量未设置，直到再次运行某些代码并为其赋值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:44:42.060

全局声明：

```
var_Name = 1;
// is equal to
var var_Name = 1;
// and is also equal to
window.var_Name = 1; 
```

该变量的存在时间与窗口对象一样长。因此，在您离开/重新加载当前页面之前，它将一直可用。

只要函数运行，函数内部的局部变量就会存在：

```
function y(){
 var x = 1;
 console.log(typeof x !== 'undefined');
}
y();
console.log(typeof x === 'undefined'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T14:44:43.967

Javascript 引擎不会在页面加载时维护任何变量值。因此，在页面生命周期中声明和定义的任何全局变量都将在页面重新加载时丢失。

声明的变量`var`仅限于定义它们的范围。对于浏览器来说，只有函数作用域和全局作用域。因此，一旦函数返回，函数中声明的局部变量将不复存在，除非它被闭包捕获（这是一个值得在 Internet 上搜索的大型主题）。

没有程序的明确操作，变量绝不会“刷新”到它们最初分配的值。它们要么在范围内，要么在范围外，当在范围内时，它们具有最后分配给它们的任何值。

值得注意的是，在函数之外执行以下操作：

```
var foo = 1; 
```

仍然会创建一个全局变量，因为如果你不在函数的范围内，你就在全局范围内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:45:52.003

全局变量在所有文档上可见。局部变量仅在您定义它的块中可见。变量在其他文档上不可见。

当您刷新页面时，所有变量都是新设置的，这意味着您在保存之前不会获得任何变量的值（例如在 cookie 中或通过 ajax）。

# .htaccess - 在 mod_rewrite 中从 HTTPS 中排除特定页面

> ID：15296525
> 
> 赞同：0
> 
> 时间：2013-03-08T14:41:26.470
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我正在尝试设置一个 codeigniter 应用程序以在除一个页面之外的所有页面上强制使用 HTTPS。**但是，如果用户不在**相关页面上，我无法让规则仅重定向。

应排除的页面具有以下 URL：

*   [http://mydomain.com/kpi/reports/67](http://mydomain.com/kpi/reports/67)
*   [http://mydomain.com/kpi/reports/67/overview/2013-02-01/2013-02-28](http://mydomain.com/kpi/reports/67/overview/2013-02-01/2013-02-28)
*   [http://mydomain.com/index.php?/kpi/reports/67](http://mydomain.com/index.php?/kpi/reports/67)
*   [http://mydomain.com/index.php?/kpi/reports/67/overview/2013-02-01/2013-02-28](http://mydomain.com/index.php?/kpi/reports/67/overview/2013-02-01/2013-02-28)

数字**67**和日期都可以在上面的 URL 中更改，因此下面的正则表达式的用户。

我已经测试了正则表达式，它们似乎与 URL 匹配得很好。但是，htaccess 似乎只是将其重定向到 https:// 无论如何。

我的 .htaccess 文件如下...

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Disallow access to system dir
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Disallow access to application dir
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Force https when not on overview report
    RewriteCond %{HTTPS} off
    RewriteCond %{REQUEST_URI} !^/index\.php\?/kpi/reports/?([0-9]+)$
    RewriteCond %{REQUEST_URI} !^/index\.php\?/kpi/reports/?([0-9]+)/overview/?([0-9]+)-?([0-9]+)-?([0-9]+)/?([0-9]+)-?([0-9]+)-?([0-9]+)$
    RewriteCond %{REQUEST_URI} !^/kpi/reports/?([0-9]+)$
    RewriteCond %{REQUEST_URI} !^/kpi/reports/?([0-9]+)/overview/?([0-9]+)-?([0-9]+)-?([0-9]+)/?([0-9]+)-?([0-9]+)-?([0-9]+)$
    RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=302,L]

    #If not a valid file, redirect request through index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:30:00.060

也许这会做你需要的：

```
#Force https when not on overview report
RewriteCond %{HTTPS} off
RewriteCond %{QUERY_STRING} !kpi/reports/[0-9]+/?$                     [NC]  
RewriteCond %{QUERY_STRING} !kpi/reports/[0-9]+/overview/[^/]+/[^/]+/? [NC]
RewriteCond %{REQUEST_URI}  !kpi/reports/[0-9]+/?$                     [NC]
RewriteCond %{REQUEST_URI}  !kpi/reports/[0-9]+/overview/[^/]+/[^/]+/? [NC]
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI}           [R=302,L]

#If not a valid file, redirect request through index.php 
```

替换注释之间的所有行。

# c# - 使用 SimpleMembership 和使用外键的实体播种实体框架

> ID：15296526
> 
> 赞同：0
> 
> 时间：2013-03-08T14:41:30.190
> 
> 标签：c#, entity-framework, asp.net-web-api

我正在尝试使用 SimpleMemberships 和实体在我的 ContextInitializer 类中播种实体框架数据库。我的实体有一个用户表的外键，如下所示，所以我首先填充了我的用户，然后是我的实体（事件），如下面的 ContextInitializer 类所示。

```
protected override void Seed(CustomContext context)
{
    WebSecurity.InitializeDatabaseConnection("MyContext", "Users", "UserId", "UserName", autoCreateTables: true);

    seedUsers(context);
    seedEvents(context);
    /* snip */
}

private void seedUsers(CustomContext context)
{
    var roles = (SimpleRoleProvider) Roles.Provider;
    var membership = (SimpleMembershipProvider) Membership.Provider;

    if (!roles.RoleExists("Admin"))
    {
        roles.CreateRole("Admin");
    }

    if (membership.GetUser("test", false) == null)
    {
        membership.CreateUserAndAccount("test", "test");
    }

    if (!roles.GetRolesForUser("test").Contains("Admin"))
    {
        roles.AddUsersToRoles(new[] {"test"}, new[] {"Admin"});
    }
}

private void seedEvents(InviteeContext context)
    {
        var membership = (SimpleMembershipProvider) Membership.Provider;

        events = new List<Event>()
        {
            new Event() { name = "Test 1", owner_id = membership.GetUserId("test")},
            new Event() { name = "Test 2", owner_id = membership.GetUserId("test")}
        };

        events.ForEach(p => context.Events.Add(p));
        context.SaveChanges();
    }
} 
```

* * *

当我创建如上所示的事件时，我最终得到了正确的结果`events[0].owner_id == 1`，并且我可以在数据库中看到它正在运行，但是当我去保存它时，我最终会遇到外键违规。检查上下文中设置的用户（如下所示），我可以看到它是空的`context.Users.Count() == 0`。所以我怀疑要么

*   添加的用户略有不同
*   添加用户后我需要刷新我的上下文（不知道该怎么做）
*   我还需要将用户创建为 User 类并将其添加到我的上下文中

提前感谢您的帮助，

我的实体是：

用户：

```
[Table("User")]
public class User
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
} 
```

事件：

```
public class Event
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }

    public int owner_id { get; set; }
    [ForeignKey("owner_id")]
    public virtual User owner { get; set; }
    /* Snip */
} 
```

我的上下文如下所示：

```
public class CustomContext : DbContext
{
    public CustomContext()
        : base("name=MyContext")
    {

    }
    public DbSet<Event> Events { get; set; }
    public DbSet<User> Users { get; set; }
    /* Snip */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:30:34.563

忽略这个问题，问题是 WebSecurity.InitializeDatabaseConnection 或 User 类中的错字。

网络安全在数据库“MyContext”中设置了一个名为 Users 的表，而我的班级创建了一个名为 User 的表

```
WebSecurity.InitializeDatabaseConnection("MyContext", "Users", "UserId", "UserName", autoCreateTables: true); 
```

* * *

```
[Table("User")]
public class User
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; } 
```

}

# xml - 使用 osmosis 将 POSTGIS Table 转换为 .OSM

> ID：15296532
> 
> 赞同：4
> 
> 时间：2013-03-08T14:41:50.587
> 
> 标签：xml, openstreetmap, postgis, osmosis

我正在使用 osmosis 0.42 和 PostGIS 2.0.1，我正在尝试将一些 postGIS 表导出到 .OSM xml 文件。

我正在使用 --read-pgsql 命令从 postgis 读取（而不是 --read-apidb 因为它在连接到 DB 时会引发错误）..

不幸的是运行：

```
osmosis --read-pgsql host="x" database="x" user="x" password="x" --write-xml file="myfile.osm" 
```

产生以下错误：

```
Task 2-write-xml does not support data provided by default pipe stored at level 1 in the default pipe stack 
```

有任何想法吗？

非常感谢！

费德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-06T14:49:57.340

问题是`--read-pgsql`产生一个*数据集*，但`--write-xml`需要一个*实体流*。

**`--dataset-dump`在这两个步骤之间使用**将数据集转换为实体流：

```
osmosis --read-pgsql host="x" database="x" user="x" password="x" --dataset-dump --write-xml file="myfile.osm" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T11:52:30.327

问题是您的数据库不是 Osmosis 可以理解的格式。Osmosis 只支持几个模式，因此您需要编写一个自定义导出器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T15:25:46.847

尽管我在 postgis 中的数据具有“快照”模式，但我还没有找到解决方案。

我在[http://marcusjenkins.com/maps/plumbing-with-openstreetmap-osmosis/上找到了解决方案](http://marcusjenkins.com/maps/plumbing-with-openstreetmap-osmosis/)

解决办法是： osmosis --read-pgsql host="localhost" database="foo" user="foo" password="foo" outPipe.0=pg --dd inPipe.0=pg outPipe.0=dd -- write-pbf inPipe.0=dd 文件=wherever_munged.osm.pbf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-15T23:37:34.507

要获得有限的区域：

```
osmosis --read-pgsql database=egypt-osm user=gisuser password='test0199' outPipe.0=pg --dataset-bounding-box inPipe.0=pg top=30.1332509 left=31.1400604 bottom=29.9400604 right=31.3220215 outPipe.0=dd --write-xml inPipe.0=dd file=- | bzip2 > cairo.osm.bz2 
```

得到一切：

```
osmosis --read-pgsql database=egypt-osm user=gisuser password='test0199' outPipe.0=pg --dd inPipe.0=pg outPipe.0=dd --write-xml inPipe.0=dd file=- | bzip2 > everything.osm.bz2 
```

如果遇到“java.util.HashMap 无法转换为 org.openstreetmap.osmosis.hstore.PGHStore”之类的错误，请记住使用最新的 osmosis

# ruby-on-rails - Rails 关联：单向关联

> ID：15296539
> 
> 赞同：1
> 
> 时间：2013-03-08T14:42:12.860
> 
> 标签：ruby-on-rails, ruby, associations

我正在学习 Rails 和 ActiveRecord 的东西，但我有点卡在这个小问题上。

假设您是一个产品（库存），并且每个产品都有颜色，通常正确的方法是建立关联。请看下面的代码：

```
class Stock < ActiveRecord::Base
 attr_accessible :size, :colour_id
end

class Colours < ActiveRecord::Base
 belongs_to :stock
end 
```

其实我想做的是

```
p @stock_item.colour.name
# But I get this error
SQLite3::SQLException: no such column: colours.stock_id: SELECT  "colours".* FROM "colours"  WHERE "colours"."stock_id" = 1 LIMIT 1 
```

事实上，查询应该是：

```
SELECT  "colours".* FROM "colours"  WHERE "colours"."id" = "stock"."colour_id" 
```

由于颜色在现实中都是唯一的 Stock 项目的属性。如何以这种方式设置关联，以便可以执行以下操作：

```
p @stock_item.colour.name
> Red 
```

谢谢。

乌梅尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T14:43:35.480

你需要添加一个 belongs_to 关联到 stock 而不是 color 因为 stock 有 colour_id

```
class Stock < ActiveRecord::Base
  belongs_to :colour
end 
```

你很可能想要一个关于颜色的 has_many 关联

```
class Colour < ActiveRecord::Base
  has_many :stocks
end 
```

# javascript - Javascript 图形计数器。我该怎么办？

> ID：15296540
> 
> 赞同：0
> 
> 时间：2013-03-08T14:42:14.540
> 
> 标签：javascript, jquery

看看这个网站：[http ://www.zombiepandemic.com/](http://www.zombiepandemic.com/)

我非常喜欢 js 计数器。我尝试了一段时间从该网站了解他们是如何意识到这一点的，但我无法解决我的疑问。

即 jQuery 移动单个数字条纹以容纳最终数字，但是......之后怎么可能（例如）：

> 1099

整个 js 正确移动最后 2 在底部和第 2 一步顶部以获得：

> 1100

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:56:48.767

沿着这些路线的东西应该这样做：

```
var count = 1098;
function increment(){
    count++
    return count.toString(10).split('');
}

> increment()
["1", "0", "9", "9"]
> increment()
["1", "1", "0", "0"] 
```

# performance - 缓慢的数据帧填充

> ID：15296541
> 
> 赞同：0
> 
> 时间：2013-03-08T14:42:19.630
> 
> 标签：performance, r, dataframe, apply

我有`length(Date_List)`多少天我有关于`length(ISIN_Table$ID)`项目的信息。对于每一天（j 中的循环），我创建一个零数据框，可以容纳所有项目（`length(ISIN_Table$ID)`）和一些列（4）。

每个项目将是每个矩阵中的一行，但根据日期会有不同的填充。

```
#create list that will hold matrices
df.list<-vector("list", length(Dates_List))
for (j in 1:(length(Dates_List))){
  df.list[[j]] <- data.frame(matrix(0, nrow = length(ISIN_Table$ID),ncol=4))
}

#Loop over number of days
for (j in 1:(length(Dates_List))){
  date<-Dates_List[j]
  #create empty dataframe 
  df.list[[j]] <- data.frame(matrix(0, nrow=length(ISIN_Table$ID), ncol=4))

  #loop over every item
  for (i in 1:(length(ISIN_Table$ID))){
    #check whether item is known at date
    if (nrow(data.raw[data.raw$ID==i & data.raw$Date==date,]) < 1){
      ID<-i
      df.list[[j]][i,1]<-date
      df.list[[j]][i,2]<-ID     #fill up the row
    }
    else{
      #fill up the row
      df.list[[j]][i,]<-c(
        as.character(data.raw[data.raw$ID==i & data.raw$Date==date,"Date"]),
        (data.raw[data.raw$ID==i & data.raw$Date==date,"ID"]),
        (data.raw[data.raw$ID==i & data.raw$Date==date,"Bid.Price"]),
        (data.raw[data.raw$ID==i & data.raw$Date==date,"Ask.Price"]))
    }
  }
} 
```

该代码为我提供了我想要的确切输出，但是速度非常慢。我将不胜感激有关如何提高速度的任何评论，当前版本不可行。

# 更新：

```
# create dummy data:

Dates_List<-c("2007-01-02", "2007-01-03")
ISIN_Table<-data.frame(c(1,2,3))
colnames(ISIN_Table)<-"ID"
ID<-rep(1:2, len=2, each=1)
Date<-c("2007-01-02","2007-01-02","2007-01-03", "2007-01-03")
Bid.Price<-rep(100,4)
Ask.Price<-rep(100,4)
data.raw<-data.frame(ID, Date, Bid.Price, Ask.Price) 
```

要求 df.list[[1]] 返回：

```
 X1 X2  X3  X4
1 2007-01-02  1 100 100
2 2007-01-02  2 100 100
3 2007-01-02  3   0   0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:48:41.647

**更新** 根据@Arun的建议，您可以在拆分之前添加缺失的行并完全避免使用mapply

```
Dates_List <- c("2007-01-02", "2007-01-03")
ISIN_Table <- data.frame(c(1, 2, 3))
colnames(ISIN_Table) <- "ID"
ID <- rep(1:2, len = 2, each = 1)
Date <- c("2007-01-02", "2007-01-02", "2007-01-03", "2007-01-03")
Bid.Price <- rep(100, 4)
Ask.Price <- rep(100, 4)
data.raw <- data.frame(ID, Date, Bid.Price, Ask.Price)

temp <- expand.grid(Dates_List, ISIN_Table$ID)
names(temp) <- c("Date", "ID")

data.raw <- merge(temp, data.raw, all.x = TRUE)
data.raw[is.na(data.raw)] <- 0
data.raw
##         Date ID Bid.Price Ask.Price
## 1 2007-01-02  1       100       100
## 2 2007-01-02  2       100       100
## 3 2007-01-02  3         0         0
## 4 2007-01-03  1       100       100
## 5 2007-01-03  2       100       100
## 6 2007-01-03  3         0         0

splitdata <- split(data.raw, data.raw$Date)

splitdata
## $`2007-01-02`
##         Date ID Bid.Price Ask.Price
## 1 2007-01-02  1       100       100
## 2 2007-01-02  2       100       100
## 3 2007-01-02  3         0         0
## 
## $`2007-01-03`
##         Date ID Bid.Price Ask.Price
## 4 2007-01-03  1       100       100
## 5 2007-01-03  2       100       100
## 6 2007-01-03  3         0         0 
```

**旧答案**

您可以使用`split`按日期拆分数据，然后巧妙地使用`mapply`和`merge`获取行，即使是在给定日期没有任何数据的 ID。

```
Dates_List <- c("2007-01-02", "2007-01-03")
ISIN_Table <- data.frame(c(1, 2, 3))
colnames(ISIN_Table) <- "ID"
ID <- rep(1:2, len = 2, each = 1)
Date <- c("2007-01-02", "2007-01-02", "2007-01-03", "2007-01-03")
Bid.Price <- rep(100, 4)
Ask.Price <- rep(100, 4)
data.raw <- data.frame(ID, Date, Bid.Price, Ask.Price)

splitdata <- split(data.raw, data.raw$Date)

mapply(FUN = function(x, date) merge(x, 
                          data.frame(ID = ISIN_Table$ID, 
                                     Date = rep(date, length(ISIN_Table$ID))), 
                                 all.y = TRUE), 
       splitdata, t(names(splitdata)), SIMPLIFY = FALSE)

## $`2007-01-02`
##   ID       Date Bid.Price Ask.Price
## 1  1 2007-01-02       100       100
## 2  2 2007-01-02       100       100
## 3  3 2007-01-02        NA        NA
## 
## $`2007-01-03`
##   ID       Date Bid.Price Ask.Price
## 1  1 2007-01-03       100       100
## 2  2 2007-01-03       100       100
## 3  3 2007-01-03        NA        NA 
```

# php - PHP表单帖子被调用两次

> ID：15296544
> 
> 赞同：2
> 
> 时间：2013-03-08T14:42:32.537
> 
> 标签：php, html, forms, post

我有一个表单可以发布到它声明的同一页面。问题是它在提交时似乎被调用了两次。这是代码：

```
function user_data_form() {

    add_ajax_validation();

    // Form verication start
    if (isset($_POST["action"])) {
        switch($_POST["action"]) {
            case "validate_form":
                ajax_validate();
                break;
            case "update_user_data":
                $wp_user_object = wp_get_current_user();
                $id = $wp_user_object->ID;
                if ( 0 == $wp_user_object->ID ) {
                    redirect(get_permalink(get_page_by_title( 'Sign in' )), array(
                        "message" => 8
                    ));
                } else {
                    $form_data = array(
                        "verified" => false,
                        "email" => $_POST["email"],
                        "first_name" => $_POST["first_name"],
                        "last_name" => $_POST["last_name"],
                        "password" => $_POST["password"],
                        "old_password" => $_POST["old_password"],
                        "verify_password" => $_POST["verify_password"]
                    );
                    $form_data["verification"] = array(
                        "old_password" => wp_check_password($form_data["old_password"], $wp_user_object->user_pass, $id),
                        "email" => validate("email", $form_data["email"]),
                        "password" => validate("old_password", $form_data["old_password"]),
                        "verify_password" => validate("verify_password", $form_data["old_password"], $form_data["verify_password"])
                    );
                    if ($form_data["verification"]["old_password"]) {
                        if ($form_data["email"] != $wp_user_object->user_email && $form_data["verification"]["email"]) {
                            invalidate_email($id, $form_data["email"]);
                            $message = message('success', 'Account information updated, an email has been dispatched to <strong>'.$form_data["email"].'</strong> with details on how to confirm your new email address');
                            $form_data["email"] = $wp_user_object->user_email;
                        }
                        if ($form_data["first_name"] != $wp_user_object->get("first_name")) {
                            update_user_meta($id, 'first_name', $form_data["first_name"]);
                        }
                        if ($form_data["last_name"] != $wp_user_object->get("last_name")) {
                            update_user_meta($id, 'last_name', $form_data["last_name"]);
                        }
                        if ($form_data["verification"]["password"]["result"] && $form_data["verification"]["verify_password"]["result"]) {
                            wp_set_password($form_data["password"], $id);
                        }
                        if (!message) {
                            $message = message('success', 'Account information updated');
                        }
                    } else {
                        $message = message('error', '<b>Error:</b> Incorrect password');
                    }
                }
                break;
        }
    }
    // Form verication end

    // Create form
    if (!$form_data["verified"]) {
        global $current_user;
        get_currentuserinfo();
        $new_email = get_metadata("user", $current_user->user_ID, "new_email", true);
        $email_expires = get_metadata("user", $current_user->user_ID, "email_expires", true);
        $form = 'You can view and update your account settings using the following form:
                <form action="#" method="post" class="user-data">
                '.$message.'
                <input type="hidden" name="action" value="update_user_data" />
                <div class="fields">
                    <div class="field">
                        <label for="email">Email:</label>
                        <input type="text" name="email" id="email" class="text" data-validation-method="email" class="text" data-validation-ignore="'.encode($current_user->user_email).'" value="'.(($form_data["email"]) ? $form_data["email"] : $current_user->user_email).'" placeholder="youremail@somesite.com" data-validation-response="'.(($form_data["email"] == $current_user->user_email) ? NULL : encode($form_data["verification"]["email"])).'" />
                        '.(($new_email) ? '<span class="fail">An email has been sent to the above address to change email to <strong>'.$new_email.'</strong></span>' : NULL).'
                        <span class="info">You will recieve a validation email to your new email address. If you don\'t confirm within 24 hours your email address will revert to the last validated one.</span>
                    </div>
                    <div class="field">
                        <label for="first_name">First name: <sup>1</sup></label>
                        <input type="text" name="first_name" id="first_name" class="text" value="'.$current_user->user_firstname.'"/>
                        <label for="last_name">Last name: <sup>1</sup></label>
                        <input type="text" name="last_name" id="last_name" class="text" value="'.$current_user->user_lastname.'"/>
                        <span class="info"><sup>1</sup> Required to issue certificates.</span>
                        <div class="fieldgroup">
                            <span class="info">
                                <strong>Note:</strong> Only fill in these fields if you wish to change your password.
                            </span>
                            <div class="field">
                                <label for="password">New password:</label>
                                <input type="password" name="password" id="password" data-validation-method="password" class="text" value="'.$form_data["password"].'" data-validation-response="'.((strlen($form_data["password"]) > 0) ? encode($form_data["verification"]["password"]) : NULL ).'" />
                            </div>
                            <div class="field">
                                <label for="verify_password">Retype your new password:</label>
                                <input type="password" name="verify_password" id="verify_password" class="text" data-validation-method="verify_password" data-validation-requires="password" value="'.$form_data["verify_password"].'" data-validation-response="'.((strlen($form_data["verify_password"]) > 0) ? encode($form_data["verification"]["verify_password"]) : NULL ).'" />
                            </div>
                        </div>
                        <div class="field">
                            <label for="password">Current password:</label>
                            <input type="password" name="old_password" id="old_password" class="text" value=""/>
                            <span class="info">Your current password is required to make changes to your account information. Have you <a href="'.get_permalink( get_page_by_title( 'Reset your password' ) ).'">forgotten your password?</a></span>
                        </div>
                    </div>
                    <input type="submit" id="submitbtn" class="button omega" name="submit" value="Update my account information" />
                </div>
            </form>';
    } else {
        redirect(get_permalink(get_page_by_title( 'My account' )), array(
            "message" => 2
        ));
    }
    return $form;
} 
```

问题是它`invalidate_email()`被调用了两次。`$_POST["action"] == "update_user_data"`虽然它应该只在提交表单之后触发。我不知道第二个电话是从哪里来的。

这是我的`invalidate_email()`功能：

```
function invalidate_email($user_id, $new_email) {
    $key = createKey($new_email);
    $activation_url = get_permalink(get_page_by_title( 'Activate' ))."?key=".$key."&id=".$user_id."&type=email";
    update_user_meta($user_id, 'new_email', $new_email);
    update_user_meta($user_id, 'email_activation_key', $key);
    $expires = get_metadata("user", $user_id, "email_expires", true);
    if (!$expires) {
        $expires = time() + 86400000; //86400000 milliseconds = 24 Hours
        update_user_meta($user_id, 'email_expires', $expires);
    }

    $message = "A request to update your email for your account on First steps has been made, please confirm your email address by clicking the following link: <p />";
    $message .= "<a href='".$activation_url."'>".$activation_url."</a> <p />";
    $message .= "If you did not request the change your account may be comprimised and we recommend you change your password from the 'my account' page. <p />";
    $message .= "If you do not confirm your new email address within 24 hours the request will expire and you will have to request a new one.";

    email($new_email, "First steps - Confirm your new email address", "Confirm email address change", $message);
} 
```

和`email()`：

```
function email($to, $subject, $heading, $message, $attachments = NULL) {
    $headers = array('From: First steps <info@rcnhca.org.uk>', 'Content-type: text/html');
    $body = '<table width="100%" style="background:#ECECEC;" cellpadding="0" cellspacing="0">  
                <tr width="100%" style="background: #3393b5;">
                    <td align="center">
                        <table width="500" cellpadding="0" cellspacing="0">
                            <tr>
                                <td align="center" style="height:45px; vertical-align:middle;">
                                    <a href="'.get_bloginfo("url").'"><img alt="First steps for health care assistants" src="'.get_stylesheet_directory_uri().'/library/images/logo.png" width="347" height="32" style="vertical-align:middle;display:block;" /></a>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td align="center" style="padding: 10px 0px;">
                        <table width="500" style="padding: 10px;background:#FFFFFF;border:1px solid #BCBCBC;margin:0px 10px;" cellpadding="0" cellspacing="0">
                            <tr>
                                <td style="color:#000000;font-size:14px;line-height:1.5em;text-align:left;"><font face="verdana">
                                    <h2 style="margin-top: 0.1em; font-size: 18px; padding-bottom: 0.5em; color: #333333; border-bottom: 1px solid #CCCCCC; margin-bottom: 0.7em;">'.$heading.'</h2>
                                    '.$message.'
                                </font></td>
                            </tr>
                        </table>
                        <table width="500">
                            <tr>
                                <td style="font-size:12px;line-height:1.5em;text-align:left;"><font face="verdana">We are committed to keeping your email private, we do not share your address with third-parties.</font></td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table> ';
    wp_mail($to, $subject, $body, $headers, $attachments);
} 
```

我很肯定它不是 Ajax 调用（所以忽略`add_ajax_validation()`），因为即使我删除了 Ajax 验证（这就是这个函数的作用），它也会发生。我还检查了是否存在`HTTP_X_REQUESTED_WITH`应该存在的，因为我的所有 Ajax 都是由 jQuery 执行的，该标头应该存在。

**编辑：**回应@Oli

我执行了一个`debug_backtrace()`以查看调用该函数的内容，这是我的回溯：

```
$trace= debug_backtrace();
$funcs = array();
foreach ($trace as $func) {
    array_push($funcs, $func['function']);
}
$funcs = implode('\n', $funcs); 
```

输出 1：

```
invalidate_email
user_data_form
call_user_func
do_shortcode_tag
preg_replace_callback
do_shortcode
pre_process_shortcode
call_user_func_array
apply_filters
wp_trim_excerpt
call_user_func_array
apply_filters
get_the_excerpt
require_once 
load_template
locate_template
get_header
include
require_once
require 
```

输出 2：

```
invalidate_email
user_data_form
call_user_func
do_shortcode_tag
preg_replace_callback
do_shortcode
pre_process_shortcode
call_user_func_array
apply_filters
the_content
include
require_once
require 
```

`call_user_func()`由于以下函数调用，所有这些都由 WordPress CMS 完成：`add_shortcode('user_data_form', 'user_data_form', 134);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:47:47.223

~~调查`var_dump(func_get_args())`并检测您收到的参数是什么`invalidate_email`。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:51:52.597

~~我以前用 mail() 注意到了这一点。当您在 headers 部分中有一个“To”并且在 mail() 的第一个参数中有一个“to”变量时，它会被发送两次。您可能想要删除标题的部分并尝试。~~

应该仔细阅读这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:21:16.707

我觉得自己像个 nincompoop，但我才意识到这是自己造成的。我有这段代码试图避免 WordPress 的自动格式化功能`wpautop`。它似乎解雇了他们两次。

```
function pre_process_shortcode($content) {
    global $shortcode_tags;
    // Backup current registered shortcodes and clear them all out
    $orig_shortcode_tags = $shortcode_tags;
    $shortcode_tags = array();
        add_shortcode('registration_form', 'registration_form', 134);
        add_shortcode('login_form', 'login_form', 134);
        add_shortcode('user_data_form', 'user_data_form', 134);
        add_shortcode('activation_code', 'activation_code', 134);
        add_shortcode('logout_code', 'logout_code', 134);
        add_shortcode('reset_password_form', 'reset_password_form', 134);
    // Do the shortcode (only the one above is registered)
    $content = do_shortcode($content);
    // Put the original shortcodes back
    $shortcode_tags = $orig_shortcode_tags;
    return $content;
}

add_filter('the_content', 'pre_process_shortcode', 13); 
```

我将其更改为：

```
 add_shortcode('registration_form', 'registration_form', 134);
    add_shortcode('login_form', 'login_form', 134);
    add_shortcode('user_data_form', 'user_data_form', 134);
    add_shortcode('activation_code', 'activation_code', 134);
    add_shortcode('logout_code', 'logout_code', 134);
    add_shortcode('reset_password_form', 'reset_password_form', 134); 
```

这当然会产生其他问题，但至少它解决了这个问题，我会找到另一种方法来做我以前想做的事情。对任何花时间尝试解决此问题的人表示歉意，因为您永远不会从我提供的信息中解决这个问题。

# c# - CoreWindowDialog 显示全屏而不是窄横幅

> ID：15296552
> 
> 赞同：1
> 
> 时间：2013-03-08T14:42:53.810
> 
> 标签：c#, windows-8, windows-store-apps, winrt-xaml

我正在尝试显示 CoreWindowDialog 以在我的用户删除记录时提示他们。

这是我的代码：

```
CoreWindowDialog dialog = new CoreWindowDialog("Are you sure you wish to delete this record?");
dialog.Commands.Add(new UICommand { Label = "Yes", Id = 0 });
dialog.Commands.Add(new UICommand { Label = "No", Id = 0 });

IUICommand command = await dialog.ShowAsync(); 
```

当我调用 ShowAsync 方法时，对话框会显示，但它会全屏显示，顶部是我的标题，底部是 Yes/No 按钮。

如何将其显示为像 MessageDialog 这样的横幅？（即屏幕的全宽，但高度调整为其内容的大小，即 2 个按钮和一个文本块）

似乎没有任何属性可以调整高度。

提前致谢。

我正在使用 XAML、.Net4.5，并且正在为 Windows RT 设备编写 Windows 商店应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:51:56.683

我也在经历同样的事情。第一次看起来不错，第二次是全屏。

无论如何，如果您想使用 MessageDialog 实现相同的目标，请使用以下代码：

```
MessageDialog dialog = new MessageDialog(string.Empty, "Are you sure you wish to delete this record?");
dialog.Commands.Add(new UICommand { Label = "Yes", Id = 0 });
dialog.Commands.Add(new UICommand { Label = "No", Id = 0 });

IUICommand command = await dialog.ShowAsync(); 
```

第一个参数是空字符串，因为您不需要任何消息内容，只需要标题。

# php - 使用 Imagick 在 JPG 上叠加 PNG

> ID：15296554
> 
> 赞同：8
> 
> 时间：2013-03-08T14:42:58.960
> 
> 标签：php, imagemagick, imagick

在过去的几个小时里，我试图在 JPG 背景之上获得一个具有透明背景的 PNG 徽标。我已经尝试了几种方法和几个全局变量，但我似乎无法得到我想要的结果。

**“第一次尝试”：**

```
$overlay = new Imagick('overlay.png');
$image = new Imagick('background.jpg');

$image->compositeImage($overlay, Imagick::COMPOSITE_DEFAULT, 10, 10);
$image->writeImage('background.jpg'); //replace original background

$overlay->destroy();
$image->destroy(); 
```

![在此处输入图像描述](../Images/93ef75f9fc88dcabbf5a70fd67fbd1b0.png)

如您所见，捷豹标志全黑。

* * *

**“第二次尝试”**

```
$overlay = new Imagick('overlay.png');
$image = new Imagick('background.jpg');

$image->setImageColorspace($overlay->getImageColorspace() ); 
$image->compositeImage($overlay, Imagick::COMPOSITE_DEFAULT, 10, 10);
$image->writeImage('background.jpg'); //replace original background

$overlay->destroy();
$image->destroy(); 
```

![在此处输入图像描述](../Images/5679108c3e1b788e6e5693599450b8fe.png)

这个捷豹标志看起来应该是这样，但现在背景全乱了。

* * *

我尝试过使用[Imagick::setImageMatte](http://www.php.net/manual/en/imagick.setimagematte.php)并尝试将[叠加层添加到白色背景](https://stackoverflow.com/questions/6610739/php-imagick-convert-png-to-jpg#answer-6617001)（认为我确实需要透明背景），但它仍然无法正确显示图像。我已经尝试了上述 2 个片段的许多其他变体，但它们似乎都使 PNG 完全或部分变黑。

我错过了什么或做错了什么？任何人都可以在正确的方向上轻推我吗？请注意，这需要在 PHP 中完成。

非常感谢你！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T15:32:48.583

我是个大白痴！原来我忘记将图像从 CMYK 转换为 RGB。对于以后可能遇到这种情况的人，请向我的无能学习！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-22T14:54:52.200

我试图在另一个 png 的顶部覆盖一个具有透明度的 png。我使用[了 PHP 文档](http://php.net/manual/en/imagick.compositeimage.php)中的这一行。

```
$src1->compositeImage($src2, Imagick::COMPOSITE_MATHEMATICS, 0, 0); 
```

但我遇到了同样的问题。覆盖层仅以黑色显示。将其更改为此似乎可以修复颜色。

```
$src1->compositeImage($src2, Imagick::COMPOSITE_DEFAULT, 0, 0); 
```

# ruby-on-rails - Rails PostgreSQL - 更改套接字名称/位置

> ID：15296558
> 
> 赞同：2
> 
> 时间：2013-03-08T14:43:08.430
> 
> 标签：ruby-on-rails, ruby, rails-postgresql, pg

我更改了 PostgreSQL 服务器的端口，因此它创建的套接字不再命名为“.s.PGSQL.5432”。

有没有办法更新/强制 Rails/pg gem 来更改它寻找的套接字名称？我已经尝试按照建议卸载/重新安装 pg gem，但它仍然尝试查找名为 .s.PGSQL.5432 的套接字，而不是它应该根据 database.yml 注释查找的 .s.PGSQL.50000， 'socket' 配置行不适用于 PostgreSQL。

*   我显然可以创建一个符号链接，但我希望有一种更优雅的方式来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T08:16:17.607

更改 database.yml 中的端口

如您所知，PostgreSQL 支持两种连接：tcp/ip 和 unix 域套接字。两者都可以使用主机和端口，但以不同的方式使用它们。

使用 TCP/IP 时，主机和端口对于运行 TCP/IP 的网络具有标准含义。

当使用 Unix 域套接字时，host 提供目录，port 提供套接字名称的数字部分。路径应该是绝对的。这同样适用于任何基于 libpq 的连接（包括通过 pg gem），所以考虑一下：

```
 psql -h /tmp -p 5000 
```

这给出了以下错误消息：

```
$ psql -h /tmp -p 5000 
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5000"? 
```

相似地：

```
$ psql -h /foo -p 50000 
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/foo/.s.PGSQL.50000"? 
```

# gwt - 使包含 AbsolutePanel 的 ScrollPanel 占据其父级的全部高度

> ID：15296559
> 
> 赞同：0
> 
> 时间：2013-03-08T14:43:10.413
> 
> 标签：gwt

我正在尝试在 ScrollPanel 中使用 AbsolutePanel。我希望 ScrollPanel 占据尽可能多的页面高度，以尽可能多地暴露 AbsolutePanel。

我试过这个。但是没有出现 ScrollPanel 和内容

```
 <g:center height="100%">
            <g:DecoratorPanel>
                <g:ScrollPanel width='800px'>
                    <g:AbsolutePanel width='770px' height='1000px' ui:field='absolutePanel'/>
                </g:ScrollPanel>
            </g:DecoratorPanel>
        </g:center> 
```

如果我输入一个 ScrollPanel 绝对高度（height='800px'），它会出现在页面上，并且可以工作 - 但是，我不确定用户在浏览器上的高度，所以我不想硬编码 800px

```
 <g:center height="100%">
            <g:DecoratorPanel>
                <g:ScrollPanel width='800px' height='800px'>
                    <g:AbsolutePanel width='770px' height='1000px' ui:field='absolutePanel'/>
                </g:ScrollPanel>
            </g:DecoratorPanel>
        </g:center> 
```

反正有一个 100% 的父高度，ScrollPanel，里面有一个绝对面板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:46:57.900

所以，你想设置的高度（100%）`scroll panel`。

```
I'm not really sure what the height the user has on the browser. 
```

上述问题的答案是

窗户。[获取客户端高度](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/Window.html#getClientHeight%28%29)（）；

```
Gets the height of the browser window's client area excluding the scroll bar. 
```

上面的方法返回一个 int 然后你可以调用`panel.setHeight(returned+"px")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:59:46.773

它根本不合逻辑。绝对 - 意味着固定。你为什么要绝对改变它的高度/宽度。如果您希望面板大小发生变化，请使用 FlowPanel 或任何其他内容面板。

此外，如果您正在考虑响应式设计，您应该参考 gwt 文档，以便将[LayoutPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels)与 RootLayoutPanel 一起使用。

阅读GWT 布局面板概念背后的[设计思想](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#Design)，这与早期的 .

另外，了解[**调整大小**](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#Resize)的概念

检查并观察 GWT 展示。即使使用网格数据，也可以更改浏览器大小和[**应用程序调整大小。**](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwDataGrid)

[您可以从GWT](https://google-web-toolkit.googlecode.com/files/gwt-2.5.0.zip)下载源代码并提取示例/展示项目。注意 - 由于 GWT 试图演示的其他功能，代码过于复杂。

# gcc - 是什么调用了这个模式匹配规则？

> ID：15296571
> 
> 赞同：2
> 
> 时间：2013-03-08T14:43:36.357
> 
> 标签：gcc, makefile, pattern-matching

我有这个似乎可以工作的 Makefile，但我不确定如何：

```
EXECUTABLE=hello
CC=gcc
OBJS = a.o

all: $(EXECUTABLE)

%.o : %.c
    $(CC) -o $@ -c $<

$(EXECUTABLE): $(OBJS)
    $(CC) -o $@ $< 
```

我知道前 3 行是本地定义，当我输入“Make”时，它将构建`all`目标。现在从这里我有点迷路了......我猜：

1.  Make看到`$(EXECUTABLE)`标签并跳转到那个构建命令
2.  它看到`$(OBJS)`标签并且由于`a.o`本地目录中不存在它跳转到模式匹配规则
3.  Make 查找`a.c`并运行规则以生成`a.o`
4.  现在Make返回`$(EXECUTABLE)`命令并运行.o文件的组合以制作“hello”程序

问题：

1.  我对该流程的理解是否正确？
2.  此文件中“标签”的位置是否相关？
3.  是否有一些我遗漏的 GNU 文档证实了我对它是如何工作的怀疑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:15:19.493

你的流程基本上是正确的。如果您没有在命令行上显式传递一个目标，Make 将构建文件中列出的第一个目标。在大多数 makefile 中，人们会将`all`第一个目标作为第一个目标，因此就像在您的示例中一样，您只需键入`make`它就会自动构建`all`目标。make 内部所做的是构建一个您在 Makefile 中定义的依赖项列表。`all`取决于`$(EXECUTABLE)`哪个 取决于`$(OBJS)`。为了满足`all`目标的创建，它必须从该依赖项列表的底部开始并向上工作。如果您想在这里查看，制作手册实际上非常好：[http](http://www.gnu.org/software/make/manual/) ://www.gnu.org/software/make/manual/尤其是您的具体问题：[http://www.gnu.org/software/make/manual/make.html#How-Make-Works](http://www.gnu.org/software/make/manual/make.html#How-Make-Works)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:23:25.857

我找到了一种工具，至少可以帮助回答我的问题的一部分，所以我将其发布以供我自己和其他人参考：

可以通过`$(warning <some string>)`调用“调试”Makefile。

所以在我的例子中，我这样使用它：

```
all: $(warning All before exe call) $(EXECUTABLE)
    $(warning All warning after call)

%.o : %.c
    $(warning before pattern)
    $(CC) -o $@ -c $<
    $(warning after pattern)

$(EXECUTABLE): $(warning before obj) $(OBJS)
    $(warning after obj)
    $(CC) -o $@ $< 
```

得到的输出显示了我的流程：

```
mike@mike-VirtualBox:~/C$ make
Makefile:6: All before exe call    // started at all
Makefile:14: before obj            // Jumped to EXECUTABLE label
Makefile:10: before pattern        // Jumped to pattern matching
Makefile:10: after pattern
gcc -o a.o -c a.c
Makefile:15: after obj             // back to EXECUTABLE label
Makefile:15: after build           // back to build command
gcc -o hello a.o
Makefile:7: All warning after call 
```

使用它我发现我可以这样做：

```
$(EXECUTABLE): $(warning before obj) $(OBJS) 
```

但不是：

```
$(EXECUTABLE): 
    $(warning before obj) 
    $(OBJS) 
```

这是有道理的，因为空白在 Makefile 中很重要

# iphone - iphone重启后iOS应用需要登录

> ID：15296574
> 
> 赞同：0
> 
> 时间：2013-03-08T14:43:45.150
> 
> 标签：iphone, ios, restart

可能这将是一个过于启动的问题。

我们开发了一个 iPhone 应用程序并将其上传到 Appstore。我们有自己的登录机制，facabook 登录和 twitter 登录。我们的用户报告了一个问题，即当应用程序启动并重新启动（关闭）iphone 设备时，应用程序也会被注销。用户需要重新登录。我们已经检查了 Facebook 应用程序。当设备重新启动（关闭）时，它会保持登录状态。我们也想这样做。你能建议这样做的机制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:55:31.197

将用户名和密码存储在钥匙串中。当应用程序启动时，然后从钥匙串中获取用户名和密码并执行登录方法。

约翰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:02:37.990

您可以使用 NSUserDefaults、CoreData 或 FileSystem 存储您的 accessToken (facebook)。我不会建议您将登录名/密码保存在您的应用程序中。如果您需要这样做，最好保存数据用户（姓名，地址，手机......）而不是访问权限，如登录名/密码。它更安全。当然，您可以使用 KeyChain，但每个人都在想用应用程序做什么。

NSUserDefaults

> [将字符串保存到 NSUserDefaults？](https://stackoverflow.com/questions/3074483/save-string-to-the-nsuserdefaults)

文件系统 - 苹果指南

> [http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUIde/FileSystemOverview/FileSystemOverview.html](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

核心数据

> [保存和加载数据 - CoreData](https://stackoverflow.com/questions/4177398/save-and-load-data-coredata)

# ms-access - 有没有办法更改 Access 表单中的默认 Access 徽标图像？

> ID：15296576
> 
> 赞同：2
> 
> 时间：2013-03-08T14:43:46.027
> 
> 标签：ms-access, ms-access-2007

当我创建表单时，Access 会自动创建一个“auto_logo”占位符。我手动将其属性更改为我要使用的徽标。

我想如果我可以更改默认图片，新的表单会出现我想要使用的徽标。

这可能吗？

谢谢。阿曼多。

# android - 在 onCreate() 之外更新 EditText

> ID：15296582
> 
> 赞同：0
> 
> 时间：2013-03-08T14:44:04.987
> 
> 标签：android, android-edittext

我正在制作一个应用程序，它通过套接字接收文本，我希望它从不属于 onCreate() 的方法更新 editText。我有这个方法：

```
public void addToEditText(String message)
{
     editText.append(message);
} 
```

但是，当我调用此方法时，editText 仍然为空。我究竟做错了什么？

这是我的新方法的样子，但它仍然不起作用：

```
private void addToEditText(final String message)
    {
        new Handler().post(new Runnable(){
            public void run(){
                chatWindow.append(message);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:09:16.283

你也可以试试这个：

```
private void addToEditText(final String message)
{
    chatWindow.post(new Runnable(){
        public void run(){
            chatWindow.append(message);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:53:40.230

您可以在 UI 线程的上下文中的任何位置更新 EditText。如果您想在 UI 线程之外更新 Edittext，`Handler`请在您的 Activity 中创建一个并使用`Handler.post()`方法

# jquery - jQuery - 单击以隐藏我已经单击以显示的元素

> ID：15296585
> 
> 赞同：0
> 
> 时间：2013-03-08T14:44:12.983
> 
> 标签：jquery, hide, toggle, visibility

因此，我找到了一个脚本，可以在单击我选择的另一个元素时很好地显示隐藏的 div。但是，我希望这更像是一个切换。谁能帮我吗？我已经尝试尽我所能调整脚本，但 jQuery 不是我的强项。

```
<script type="text/javascript">
    (function($){
    document.documentElement.className += " js"; // Add js class to the HTML element
    $(function(){
      var $containers = $("#repaircontent").hide();

      jQuery(document).ready(function(){
       /* Show the HTML page only after the js and css are completely loaded */
       delayShow();
      });

      function delayShow() {
        var secs = 1000;
            setTimeout('jQuery("#repaircontent").css("visibility","visible");', secs);
      }

      $('#repairtab').each(function(i,el){
        var idx = i;
        $(this).click(function(e){
          var $target = $containers.filter(':eq(' + idx + ')');
          $target.not(':visible').fadeIn();
          e.preventDefault();

        })
      })
    })
    })(jQuery);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:46:17.650

你试过jquery的切换吗？[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:57:26.327

只需用切换替换淡入...

```
 $('#repairtab').each(function(i,el){
    var idx = i;
    $(this).click(function(e){
      var $target = $containers.filter(':eq(' + idx + ')');
      $target.toggle();
      e.preventDefault();

    })
  })
})
})(jQuery); 
```

# javascript - 不使用 jQuery 更改元素文本？

> ID：15296589
> 
> 赞同：2
> 
> 时间：2013-03-08T14:44:18.650
> 
> 标签：javascript

我试图在不使用 jQuery 的情况下更改 div 的内容。我想按 id 或 class 选择 div。

我设法让附加工作：

```
function appendHtml(targetC, htmldata) {
    var theDiv = document.getElementById(targetC);
    var newNode = document.createElement('div');
    newNode.innerHTML = htmldata;
    theDiv.appendChild(newNode) 
} 
```

但无法弄清楚如何更改一个文本..

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:55:03.540

看到[这个](http://jsfiddle.net/sv4CP/)小提琴的基本样本

```
<html>
<head>
<script>
    function bold(targetC) {
        var theDiv = document.getElementById(targetC);
        theDiv.innerHTML = '<b>' + theDiv.innerHTML + '</b>';
    }
</script>
</head>

<body onload='bold("message")'>
   <div>Hello, World!</div>
   <div id="message">What a nice day!</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:49:00.597

编辑：

```
<div id="foo">old text</div> 
```

JS代码：

```
function appendHtml(targetC, htmldata) {
    var theDiv = document.getElementById(targetC);
    theDiv.innerHTML = htmldata;
}

appendHtml('foo', 'new text'); 
```

这是一个小提琴：http: [//jsfiddle.net/7QjcB/](http://jsfiddle.net/7QjcB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:52:10.223

只需使用更改 div 的 html`innerHTML`

```
var anyDiv = document.getElementById(targetID);

html = "content";
anydiv.innerHTML(html); 
```

作为您提供的功能的变体：

```
function changeHtml(targetC, htmldata) {
    var theDiv = document.getElementById(targetC);
    theDIV.innerHTML = htmldata; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T15:21:21.333

这是一个可能会回答您的问题的[小提琴。](http://jsfiddle.net/wS3SF/)我所做的只是先获取元素，然后将其传入。

```
function appendHtml(targetC, htmldata) {
var newNode = document.createElement('div');
newNode.innerHTML = htmldata;
targetC.appendChild(newNode);
}

var getDiv = document.getElementById("testing"); 
```

# javascript - 格式化 HTML 输入文本产品密钥

> ID：15296590
> 
> 赞同：1
> 
> 时间：2013-03-08T14:44:26.140
> 
> 标签：javascript, html, input, format

我在一个为 Windows 7/8 创建无人参与的 XML 文件的网站上工作。

我做了一个“产品密钥”文本输入，用户可以在其中输入他们的产品密钥，它将把它添加到 XML 中，这样他们就不会在安装过程中收到提示。

这是我到目前为止所拥有的：

```
<td>Product Key:</td>
<td><input id="ProductKey1" size="5" maxlength="5" type="text">-<input id="ProductKey2" maxlength="5" size="5" type="text">-<input id="ProductKey3" maxlength="5" size="5" type="text">-<input id="ProductKey4" maxlength="5" size="5" type="text">-<input id="ProductKey5" maxlength="5" size="5" type="text"></td> 
```

我基本上添加了 5 个文本输入，最大长度为 5 个字符，每个字段用“-”分隔。

我想做的是为产品密钥设置一个更长的字段，并让它在每 5 个字符后插入“-”。用javascript实现这个最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:51:34.040

您可以模拟破折号，将其放在输入字段上并添加 onkeyup 控件以添加空格，或 jquery.maskedinput：[http ://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:05:59.830

有很多方法可以实现这一目标。但我要做的是每 5 个字符“substr”字符串。我会这样做：

```
function split_product_key(t) {
    // How many characters in string
    var length = t.length;
    // How many "5 chars length strings" is there in your string
    var loop = Math.ceil(length/5);
    // Create the output.
    var output = '';
    for (var i =1; i<=loop; i++) {
        // Getting the 5 chars substr
        output += t.substr((i*5),5) + '-';
    }
    // Removing the last "-"
    output = output.substr(0, output.length-1);
    return output;
} 
```

然后，您所要做的就是获取用户输入的产品密钥并将其传递给“split_product_key”，如下所示： var splitted_product_key = split_product_key(original_product_key); 如果您想实时更新值，只需在输入上添加更改并使输入值 split_product_key(current_input_value) 我希望这很清楚，希望对您有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-29T19:18:23.920

```
function split_product_key(t) {
    t = t.toUpperCase();
    var key = t.replace(/([\w]{4})([\w]{4})([\w]{4})([\w]{4})/, function(match, p1, p2, p3, p4, offset, string){
        return [p1, p2, p3, p4].join('-');
    });
    return key;
} 
```

这个使用正则表达式使 16 位字符串看起来像“NLEB-8KPR-RZR1-QWJF”，编辑正则表达式部分以更改模式。另外，这是一篇旧帖子，但我搜索了一个简单的解决方案，就是这样。

# eclipse-rcp - Eclipse RCP：在状态行中设置图像

> ID：15296592
> 
> 赞同：1
> 
> 时间：2013-03-08T14:44:27.097
> 
> 标签：eclipse-rcp

我正在开发一个 RCP 应用程序，我想设置状态行。我发现我可以扩展 ActionBarAdvisor 类并通过覆盖方法 fillStatusLine() 方法我可以设置状态。

```
private StatusLineContributionItem statusItem;

@Override
protected void fillStatusLine(IStatusLineManager statusLine) {
    statusItem = new StatusLineContributionItem("LoggedInStatus");
    statusItem.setText("Logged in");
    statusLine.add(statusItem);
} 
```

现在，我希望将图像与它一起设置。是否可以将图像添加到状态行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:28:54.990

您需要在 StatusLineContributionItem 中覆盖 fill(Composite parent) 方法。您可以在那里添加自定义组件（图像、按钮等）到状态行。例如：[http ://book.javanb.com/eclipse-rich-client-platform-designing-coding-and-packaging-java-applications-oct-2005/ch17lev1sec7.html](http://book.javanb.com/eclipse-rich-client-platform-designing-coding-and-packaging-java-applications-oct-2005/ch17lev1sec7.html)

```
org.eclipsercp.hyperbola/StatusLineContribution
public void fill(Composite parent) {
  Label separator = new Label(parent, SWT.SEPARATOR);
  label = new CLabel(parent, SWT.SHADOW_NONE);

  GC gc = new GC(parent);
  gc.setFont(parent.getFont());
  FontMetrics fm = gc.getFontMetrics();
  Point extent = gc.textExtent(text);
  if (widthHint > 0)
    widthHint = fm.getAverageCharWidth() * widthHint;
  else
    widthHint = extent.x;
  heightHint = fm.getHeight();
  gc.dispose();

  StatusLineLayoutData statusLineLayoutData = new StatusLineLayoutData();
  statusLineLayoutData.widthHint = widthHint;
  statusLineLayoutData.heightHint = heightHint;
  label.setLayoutData(statusLineLayoutData);
  label.setText(text);
  label.setImage(image);
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T06:16:14.917

您应该使用以下类：org.eclipse.ui.texteditor.StatusLineContributionItem.class 这包含方法 setImage(Image image)。

它位于 Eclipse 安装的 plugins/org.eclipse.ui.workbench.texteditor_(version).jar 中。

这是类扩展：org.eclipse.jface.action.StatusLineContributionItem.class。

请注意，有 2 个类名为：StatusLineContributionItem.class，另一个位于：plugins/org.eclipse.jface_(version).jar，名为：org.eclipse.jface.action.StatusLineContributionItem.class。

然而，这个不包含 setImage(Image image) 方法。

然后您可以致电：

```
StatusLineManager statusLine = new StatusLineManager();

StatusLineContributionItem i = new StatusLineContributionItem("myid");
i.setText("myText");
i.setImage(SWTResourceManager.getImage(MyClass.class, "config.gif");
...
statusLine.add(i);
...
return statusLine; 
```

如果您想要完全自定义，您可以使用上面的解决方案覆盖填充（复合复合）方法。

参考： [http ://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2Ftexteditor%2FStatusLineContributionItem.html](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2Ftexteditor%2FStatusLineContributionItem.html)

# php - 如何在 CodeIgniter 中将 anchor() 函数扩展为 anchor_admin()？

> ID：15296593
> 
> 赞同：0
> 
> 时间：2013-03-08T14:44:28.433
> 
> 标签：php, codeigniter, codeigniter-2, codeigniter-url, codeigniter-routing

我想基于CodeIgniter 中的**anchor()函数创建自己的名为****anchor_admin()**的函数。

 **我当时在想：

我在**config.php**文件中定义了管理路径，例如：

```
$config['base_url'] = '';
$config['base_url_admin']   = 'my-custom-admin-folder'; 
```

进而

我需要以某种方式创建一个扩展 anchor() 函数的新 anchor_admin() 函数。

所以不要输入：

```
<?php echo anchor('my-custom-admin-folder/gallery', 'Gallery', 'class="admin-link"'); ?> 
```

我只会输入：

```
<?php echo anchor_admin('gallery', 'Gallery', 'class="admin-link"'); ?> 
```

但输出总是：

```
<a href="http:/localhost/my-custom-admin-folder/gallery" class="admin-link">Gallery</a> 
```

基本上我只需要在核心anchor()函数生成的url末尾添加配置变量$this->config->item('base_url_admin')。

怎么做？

我需要创建哪些文件以及放在哪里？

我想创建一个助手不是要走的路。

我应该创建一个库，还是可以将它作为一个函数放在我已经创建的应用程序核心文件夹中的 MY_Controller 文件中，并且我正在使用它来加载一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:24:01.250

在 CodeIgniter 中，您可以“扩展”助手（在这种情况下，“扩展”是一个包罗万象的术语，因为它们实际上不是类）。这允许您添加自己的辅助函数，这些函数将与标准函数一起加载（在您的情况下，是 URL 助手）。

此处的 CodeIgniter 文档对此进行了解释 - [http://ellislab.com/codeigniter/user-guide/general/helpers.html](http://ellislab.com/codeigniter/user-guide/general/helpers.html)

在您的情况下，您需要执行以下操作：

1-创建`MY_url_helper.php`文件`application/helpers/`

2-创建您的`anchor_admin()`功能如下：

```
function anchor_admin($uri = '', $title = '', $attributes = '') {

    // Get the admin folder from your config
    $CI =& get_instance();
    $admin_folder = $CI->config->item('base_url_admin');

    $title = (string) $title;

    if ( ! is_array($uri)) {

        // Add the admin folder on to the start of the uri string
        $site_url = site_url($admin_folder.'/'.$uri);

    } else {

        // Add the admin folder on to the start of the uri array

        array_unshift($uri, $admin_folder);

        $site_url = site_url($uri);

    }

    if ($title == '') {

    $title = $site_url;

    }

    if ($attributes != '') {

    $attributes = _parse_attributes($attributes);

    }

    return '<a href="'.$site_url.'"'.$attributes.'>'.$title.'</a>';

} 
```

3- 使用帮助器并按照您通常的方式运行：

```
$this->load->helper('url');

echo anchor_admin('controller/method/param', 'This is an Admin link', array('id' => 'admin_link')); 
```

希望有帮助！**

# javascript - qtip 持久的“提示”

> ID：15296596
> 
> 赞同：0
> 
> 时间：2013-03-08T14:44:35.350
> 
> 标签：javascript, jquery, qtip

我试图使工具提示在特定时间内“持久”，直到或除非用户单击其他地方或将鼠标移到与工具提示关联的另一个锚点上。

基本上出现的工具提示将是“可滚动的”，因此用户需要能够滚动它......

```
$(this).qtip({  content: {
              text: 'wait.....',
              url: '<?php echo site_url('welcome/get_event_tooltip');?>',
              data: { id: tripID},
              method: 'post'

         },style: { 
      width: 300,
      height:135,
      padding: 5,
      //background: '#A2D959',
      color: 'black',
      overflow:'auto',
      textAlign: 'center',
      border: {
         width: 7,
         radius: 5
       //  color: '#A2D959'
      },
      tip: true,
      solo: true,
    show: { ready: true, delay: 0 },
  hide: {
        fixed: true,
        when: {
            event: 'unfocus'
        }
    },
      name: 'green' // Inherit the rest of the attributes from the preset dark style
   }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:08:35.100

要使提示随您的页面滚动，您可以设置：

```
position: {
    adjust: { 
        scroll: true
    }, 
```

当提示失去焦点时，您已经在关闭提示，因此唯一需要完成的另一件事就是定时关闭提示。我的想法是，`show`如果您可以设置一个计时器来触发 qtip 的关闭。

```
 events: {

            }, //render
            show: function () {
            //setup timer to close qtip...... 
```

# javascript - 如何将 InfoVis Sunburst Label 拆分为多行

> ID：15296599
> 
> 赞同：1
> 
> 时间：2013-03-08T14:44:42.703
> 
> 标签：javascript, html5-canvas, sunburst-diagram

我创建了一个测试文件：

[http://www.ivangasparetto.com/jit-test/donut.html](http://www.ivangasparetto.com/jit-test/donut.html)：

![在此处输入图像描述](../Images/9b20e6e7181e317c57c7388bef5b553c.png)

我希望标签进入多行。

我尝试使用来自 [https://groups.google.com/forum/?fromgroups=#!topic/javascript-information-visualization-toolkit/IMOYhzlJmr4](https://groups.google.com/forum/?fromgroups=#!topic/javascript-information-visualization-toolkit/IMOYhzlJmr4)的建议， 但标签放置不正确并且缺少旋转。

# ide - LiveCode IDE 实用程序需要不间断地完成任务

> ID：15296601
> 
> 赞同：1
> 
> 时间：2013-03-08T14:44:45.060
> 
> 标签：ide, livecode

LiveCode IDE 中运行的实用程序插件需要每隔一段时间完成一次数据库更新任务。重要的是任务不会被用户打断——用户可能正在另一个堆栈上工作。有没有办法禁用标准 ctrl + 句点并避免任务在其周期中途停止？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:51:09.897

您可以为此使用全局“allowInterrupts”属性：

```
  将 allowInterrupts 设置为 false
  ...您不想被打断的任务...
  将 allowInterrupts 设置为 true

```

当此属性为 false 时，Ctrl-Period 将不起作用。

# android - '无法对非静态方法进行静态引用'错误android

> ID：15296605
> 
> 赞同：-8
> 
> 时间：2013-03-08T14:44:55.570
> 
> 标签：android, webview, android-webview

下面我编写了出现错误的函数，即 -

> “无法从 WebView 类型对非静态方法 setWebViewClient(WebViewClient) 进行静态引用”。

我得到它的线`****`在它的开头。如何纠正这个错误？

```
public class Webview extends Activity {

WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_webview);

    //webviewclient
    WebViewClient yourWebClient = new WebViewClient()
       {
           // Override page so it's load on my view only
           @Override
           public boolean shouldOverrideUrlLoading(WebView  view, String  url)
           {
               view.loadUrl(url);
               return true;
           }
       };

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);
****    WebView.setWebViewClient(yourWebClient);
    webView.loadUrl("http://www.google.com");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:45:53.650

改变：

```
WebView.setWebViewClient(yourWebClient); 
```

到：

```
webView.setWebViewClient(yourWebClient); 
```

通过将 中的“W”大写`webView`，您指的是 class `android.webkit.WebView`。这使得 Java 寻找`setWebViewClient()`在该类中调用的静态方法，但它没有找到，因此引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:47:18.443

那是因为您指的是 WebView 类。不是你的对象 webView。注意小写的“w”

# android - 带有外部 USB NFC 设备的 android

> ID：15296607
> 
> 赞同：2
> 
> 时间：2013-03-08T14:45:02.717
> 
> 标签：android, nfc, nfc-p2p

我必须制作一个应用程序，我必须使用外部 USB NFC 设备来读取和写入数据到 NFC 标签以及该阅读器和 android nfc 手机之间的 p2p。

我有一个 NFC 设备 ACR1222L。[我还从http://android.acs.com.hk/](http://android.acs.com.hk/)下载了 android 库， 该库带有一个演示项目。

现在我的问题是当我在模拟器中运行演示项目并将我的电脑与设备连接时，项目运行并显示第一个屏幕。但是当我在设备上贴上任何标签时，什么也没有发生。

我需要做些什么来使演示项目正常工作吗？我也没有找到任何关于如何使外部 nfc 设备与 android 一起工作的好的文档。有谁知道任何好的来源或教程？

# android - 为什么我的 NETWORK_PROVIDER 突然停止调用 onLocationChanged？

> ID：15296611
> 
> 赞同：-1
> 
> 时间：2013-03-08T14:45:16.277
> 
> 标签：android, networking, gps, locationmanager, google-maps-android-api-2

我`NETWORK_PROVIDER`的 GPS 应用程序突然停止工作。这与我的互联网连接无关，因为我手机上的所有其他应用程序都可以使用互联网。我试过了`GPS_PROVIDER`，它工作得非常好，最重要的是，在调用`onLocationChanged`它之后，它能够从互联网上检索位置，所以这进一步恢复了互联网的工作。

我的手机：

*   三星盖乐世 S2
*   安卓版本 4.0.3

我尝试无济于事的事情：

*   清理项目
*   在不同地点进行户外测试。同样，GPS 工作，但网络提供商没有。
*   重启手机/关闭手机
*   在手机上卸载应用程序然后重新安装
*   打开和关闭互联网

我再说一遍，一切正常，然后突然无缘无故停止工作。在此过渡期间，我根本没有更改我的代码。

不过，这是我的代码的一部分，它在 pastebin [http://pastebin.com/itrXgWr7](http://pastebin.com/itrXgWr7)中：

这首先被调用，它能够进入`if(networkEnabled)`，然后在 LogCat 中打印出来`"Getting updates from network provider"`。

```
networkEnabled = providerHandler.isNetworkEnabled();
GPSEnabled = providerHandler.isGPSEnabled();

if(!GPSEnabled && !networkEnabled)
{
    Toast.makeText(this, "Error: This application requires a GPS or network connection",
            Toast.LENGTH_SHORT).show();
}
else
{
    if(GPSEnabled)
    {
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    }
    else if(networkEnabled)
    {
        System.out.println("Getting updates from network provider");
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
    }
} 
```

这是位置监听器。onLocationChanged 永远不会用`NETWORK_PROVIDER`. 我再重复一遍，它曾经叫它，但现在不再叫它了。相反，当我关闭 GPS 时，会立即调用 onProviderDisabled，给我一个 toast 消息`"Disabled provider network"`。这是在打开 Wifi 和移动互联网的情况下：

```
 //Get Latitude and Longitude of current location and use that to get the surrounding markers. 
@Override
public void onLocationChanged(Location location)
{
    //Get coordinates
    double lat = (location.getLatitude());
    double lng = (location.getLongitude());
    Log.d("MainActivity", "got location: " + lat + ": " + lng);
    //get nearest locations
    new GetLocations().execute(SharedVariables.root + SharedVariables.locationsController + SharedVariables.getNearestMethod + lat + "/" + lng); 

    // Zoom in, animating the camera after the markers have been placed
    map.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(lat, lng), 10));
    System.out.println("lat = " + lat + ", lng = " + lng);

     //Stop listening for updates. We only want to do this once. 
     locManager.removeUpdates(this);
}

public void onProviderDisabled(String provider)
{
  Toast.makeText(MainActivity.this, "Disabled provider " + provider,
        Toast.LENGTH_SHORT).show();
}

public void onProviderEnabled(String provider)
{
      Toast.makeText(MainActivity.this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();
}

public void onStatusChanged(String provider, int status,
                              Bundle extras)
{
  // required for interface, not used
} 
```

如您所见，我在我的 XML 文件中拥有所有必要的权限：

```
<uses-permission android:name="com.example.neatspots.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

这是我的 LogCat：

```
03-08 14:27:58.663: D/dalvikvm(4176): GC_CONCURRENT freed 223K, 3% free 9072K/9351K, paused 2ms+2ms
03-08 14:27:58.823: D/dalvikvm(4176): GC_CONCURRENT freed 272K, 4% free 9239K/9607K, paused 2ms+2ms
03-08 14:27:58.948: D/dalvikvm(4176): GC_CONCURRENT freed 263K, 4% free 9545K/9863K, paused 2ms+3ms
03-08 14:27:59.018: D/dalvikvm(4176): GC_FOR_ALLOC freed 76K, 3% free 9742K/9991K, paused 29ms
03-08 14:27:59.048: I/System.out(4176): GPS: false
03-08 14:27:59.048: I/System.out(4176): Network: true
03-08 14:27:59.048: I/System.out(4176): Getting updates from network provider
03-08 14:27:59.063: D/SensorManager(4176): ====>>>>>Num Sensor: 1
03-08 14:27:59.063: D/SensorManager(4176): ====>>>>>Num Sensor: 2
03-08 14:27:59.068: D/SensorManager(4176): ====>>>>>Num Sensor: 3
03-08 14:27:59.068: D/SensorManager(4176): ====>>>>>Num Sensor: 4
03-08 14:27:59.068: D/SensorManager(4176): ====>>>>>Num Sensor: 5
03-08 14:27:59.068: D/SensorManager(4176): ====>>>>>Num Sensor: 6
03-08 14:27:59.068: D/SensorManager(4176): ====>>>>>Num Sensor: 7
03-08 14:27:59.068: D/SensorManager(4176): ====>>>>>Num Sensor: 8
03-08 14:27:59.068: D/SensorManager(4176): ====>>>>>Num Sensor: 9
03-08 14:27:59.068: D/SensorManager(4176): ====>>>>>Num Sensor: 10
03-08 14:27:59.068: D/SensorManager(4176): ====>>>>>Num Sensor: 0
03-08 14:27:59.068: D/SensorManager(4176): registerListener :: handle = 0  name= K3DH Acceleration Sensor delay= 20000 Listener= maps.h.a@414cb1e0
03-08 14:27:59.068: E/SensorManager(4176): thread start
03-08 14:27:59.068: E/SensorManager(4176): =======>>> Sensor Thread Running <<<========
03-08 14:27:59.208: D/libEGL(4176): loaded /system/lib/egl/libEGL_mali.so
03-08 14:27:59.213: D/libEGL(4176): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-08 14:27:59.218: D/libEGL(4176): loaded /system/lib/egl/libGLESv2_mali.so
03-08 14:27:59.228: D/(4176): Device driver API match
03-08 14:27:59.228: D/(4176): Device driver API version: 10
03-08 14:27:59.228: D/(4176): User space API version: 10 
03-08 14:27:59.233: D/(4176): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Mon Mar  5 09:47:55 KST 2012 
03-08 14:27:59.303: D/dalvikvm(4176): GC_FOR_ALLOC freed 143K, 3% free 10004K/10247K, paused 14ms
03-08 14:27:59.368: D/dalvikvm(4176): GC_CONCURRENT freed 194K, 4% free 10276K/10631K, paused 1ms+2ms
03-08 14:27:59.418: D/dalvikvm(4176): GC_FOR_ALLOC freed 598K, 8% free 10022K/10823K, paused 23ms
03-08 14:27:59.523: D/dalvikvm(4176): GC_CONCURRENT freed 365K, 7% free 10162K/10823K, paused 2ms+3ms
03-08 14:27:59.643: D/dalvikvm(4176): GC_CONCURRENT freed 579K, 7% free 10094K/10823K, paused 2ms+3ms
03-08 14:27:59.783: D/dalvikvm(4176): GC_CONCURRENT freed 241K, 5% free 10338K/10823K, paused 2ms+2ms
03-08 14:27:59.938: D/dalvikvm(4176): GC_FOR_ALLOC freed 92K, 4% free 10464K/10823K, paused 26ms
03-08 14:27:59.943: I/dalvikvm-heap(4176): Grow heap (frag case) to 11.271MB for 1048592-byte allocation
03-08 14:27:59.973: D/dalvikvm(4176): GC_FOR_ALLOC freed 46K, 4% free 11442K/11911K, paused 18ms
03-08 14:28:00.023: D/dalvikvm(4176): GC_CONCURRENT freed 1K, 4% free 11443K/11911K, paused 2ms+2ms
03-08 14:28:00.108: D/dalvikvm(4176): GC_FOR_ALLOC freed 1090K, 13% free 10647K/12103K, paused 21ms
03-08 14:28:00.108: I/dalvikvm-heap(4176): Grow heap (frag case) to 11.449MB for 1048592-byte allocation
03-08 14:28:00.133: D/dalvikvm(4176): GC_FOR_ALLOC freed <1K, 4% free 11670K/12103K, paused 14ms
03-08 14:28:00.193: D/dalvikvm(4176): GC_CONCURRENT freed 21K, 4% free 11677K/12103K, paused 1ms+2ms
03-08 14:28:00.293: D/dalvikvm(4176): GC_FOR_ALLOC freed 1288K, 13% free 10649K/12167K, paused 16ms
03-08 14:28:00.293: I/dalvikvm-heap(4176): Grow heap (frag case) to 11.452MB for 1048592-byte allocation
03-08 14:28:00.308: D/dalvikvm(4176): GC_FOR_ALLOC freed 174K, 6% free 11499K/12167K, paused 16ms
03-08 14:28:00.358: D/dalvikvm(4176): GC_CONCURRENT freed 1K, 5% free 11603K/12167K, paused 1ms+2ms
03-08 14:28:00.458: D/dalvikvm(4176): GC_FOR_ALLOC freed 1084K, 14% free 10570K/12167K, paused 40ms
03-08 14:28:00.458: I/dalvikvm-heap(4176): Grow heap (frag case) to 11.374MB for 1048592-byte allocation
03-08 14:28:00.498: D/dalvikvm(4176): GC_FOR_ALLOC freed 82K, 6% free 11511K/12167K, paused 31ms
03-08 14:28:00.548: D/dalvikvm(4176): GC_CONCURRENT freed 19K, 6% free 11514K/12167K, paused 2ms+3ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:47:45.253

进入设置->“位置访问”确保启用“Wi-Fi 和移动网络位置”设置。

# android - Android：管理警报管理器

> ID：15296612
> 
> 赞同：0
> 
> 时间：2013-03-08T14:45:18.413
> 
> 标签：android, service, android-activity, alarmmanager

我正在尝试构建一个集成了提醒管理器的 Android 应用程序。我创建了一个类，其中有一个包含所有提醒的列表（这些提醒取自本地数据库中的表）。当应用程序第一次启动时，我希望上述类调用一个从数据库中获取提醒的方法，填充提醒列表（按时间排序）。在此之后，我正在考虑调用警报管理器来设置第一个提醒。当闹钟响起时，我会出现一个通知，并在 AlarmManager 中设置下一个提醒，依此类推。

问题是：

1.  如果我的应用程序没有运行，并且警报响起，会发生什么？
2.  我可以在我的应用程序中执行一个代码来恢复包含明显被破坏的提醒列表的类吗？
3.  任何人都可以建议我不同的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:36:57.503

警报是 Android 操作系统提供的服务，而不是 Activity。因此，当您的应用程序关闭时，安排的警报不会浪费。

一个简单的例子和​​教程页面的链接在[警报管理器没有激活广播接收器？](https://stackoverflow.com/questions/15267483/alarm-manager-is-not-activating-broadcast-receiver/15267969#15267969). 本质上，您的应用程序中有一个类，它扩展了 BroadcastReceiver 并覆盖了 onRecieve 方法。

该类中的该方法将由 AlarmManager 调用。然后它可以做很多事情，甚至调用一个可以提醒用户警报并在后台进行重新安排的活动。

# c# - 使用 HTMLAgilityPack 解析 javascript HTML

> ID：15296613
> 
> 赞同：1
> 
> 时间：2013-03-08T14:45:22.360
> 
> 标签：c#, html, parsing, html-agility-pack

我尝试使用 HTML Agility Pack 解析以下 HTML。

这是一段 HTML 代码：

```
<body id="station_page" class="">
...
<div>....</div>
<script type="text/javascript"> 
if (Blablabla == undefined) { var Blablabla = {}; }
Blablabla .Data1= "I want this data";
Blablabla .BlablablaData = 
{  "Data2":"I want this data",
"Blablabla":"",
"Blablabla":0   }
{   "Blablabla":123,
"Data3":"I want this data",
"Blablabla":123}
    Blablabla .Data4= I want this data;
</script>... 
```

我正在尝试获取这 4 个数据变量（Data1、Data2、Data3、Data4）。首先，我试图找到javascript：

```
doc.DocumentNode.SelectSingleNode("//script[@type='text/javascript']").InnerHtml 
```

如何检查它是否真的是正确的 javascript？找到相关的 javascript 后，如何获取这 4 个数据变量（Data1、Data2、Data3、Data4）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:59:40.263

您无法使用 HTML Agility Pack 解析 javascript，它仅支持 HTML 解析。您可以使用这样的 XPATH 获取所需的脚本：

```
doc.DocumentNode.SelectSingleNode("//script[contains(text(), 'Blablabla')]").InnerHtml 
```

但是您需要使用另一种方法（正则表达式、js 语法等）解析 javascript

# c# - 使用 vstemplate 更改命名空间？

> ID：15296618
> 
> 赞同：1
> 
> 时间：2013-03-08T14:45:47.023
> 
> 标签：c#, visual-studio-2010, visual-studio-templates

我正在 VS 2010 中创建一个自定义项目模板，我想为所有这些项目添加前缀（它是解决方案中子项目的模板）。

因此，如果我创建“NewProject”，我希望它具有命名空间“MasterSolution.NewProject”。

我可以手动更改 .cs 文件中的命名空间，所以如果我有 Class1.cs 那么它会说

```
 using MasterSolution.NewProject 
```

但智能感知只选择“NewProject”，而不是“MasterSolution”。

.vstemplate 中是否有可以更改命名空间的条目？

谢谢

# javascript - 如何显示今天的营业时间

> ID：15296619
> 
> 赞同：2
> 
> 时间：2013-03-08T14:45:48.773
> 
> 标签：javascript

我想在我们的新图书馆网站上有一个方框，说明图书馆在特定日期的开放时间。这样，无论何时他们访问该站点，他们都会知道当天图书馆何时开放。我还将有一个链接可以转到包含有关时间等更广泛详细信息的页面。

我对javascript很陌生，但我假设这就是处理方式。即使我可以指出正确的方向，那将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T14:50:45.633

[ [`Date.getDay()`^(MDN docs])](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)函数将返回一个从 0 到 6 的整数，指定星期几（其中 0 是星期日）。然后您可以创建一个包含小时数的数组并获取对应于当天的元素。

```
var dayOfWeek = (new Date).getDay();
var hours = ["Closed",          // Sunday
             "7 AM to 5 PM",    // Monday
             "8 AM to 5 PM",    // Tuesday
             "9 AM to 3 PM",    // Wednesday
             "8 AM to 5 PM",    // Thursday
             "9 AM to 2 PM",    // Friday
             "10 AM to 2 PM"];  // Saturday
var todaysHours = hours[dayOfWeek]; 
```

[你可以在jsFiddle](http://jsfiddle.net/cZQTH/)上看到这个演示。

# sharepoint - 在两个单独的服务器上部署 SharePoint 2013

> ID：15296622
> 
> 赞同：0
> 
> 时间：2013-03-08T14:45:52.790
> 
> 标签：sharepoint

我发现一些技术文章提到我需要为 SharePoint 生产环境配备三个独立的服务器；- 第一个用于数据库， - 第二个服务器用于应用程序， - 第三个用于前端。

但就我而言，我计划只有两台服务器，一台用于数据库，另一台用于应用程序和前端，拥有两台服务器是否仍然有效。请记住，我的部署被认为有点小，大约 60内部用户和大约 100 个外部用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:02:43.723

你可以这样设置。不同之处在于您在每个框中启动了多少个 SharePoint Service 应用程序。

在拥有三台机器的环境中，您会看到一个盒子专用于 Web 前端，另一个盒子运行所需的 SharePoint 应用程序，例如搜索、Excel Services、PerformancePoint 等。由于这些应用程序是内存和处理器密集型的，因此最好将它们保存在单独的机器上。

您的性能可能会因您盒子中的硬件规模以及您需要启动多少服务应用程序而异。

某些服务应用程序可能会导致大量负载，需要进行微调，例如 Excel Services 和 PerformancePoint。我建议你调查每一个您计划开始确定是否会给您的机器施加过多的负载

# sql - 将 DISTINCT 和 UPPER 关键字混合在一起

> ID：15296629
> 
> 赞同：3
> 
> 时间：2013-03-08T14:46:11.850
> 
> 标签：sql, oracle, select, distinct, uppercase

我在 Oracle 10 上有这个查询：

```
SELECT DISTINCT NOME
FROM ICT.UTENTE
WHERE UPPER(nome) LIKE UPPER('MA%'); 
```

这有效，让我得到类似的东西：

```
MARIA LUISA
Mariano
MARIO 
```

我真正想要的是将每一行都设为大写，但我想不出一种将关键字混合在一起`DISTINCT`的方法。`UPPER`我试图用以下任何一个替换第一个查询行：

```
SELECT DISTINCT UPPER(nome)   -- not a SELECTed expression
SELECT UPPER (DISTINCT nome)  -- missing expression
SELECT DISTINCT UPPER nome    -- upper: invalid identifier
SELECT UPPER DISTINCT nome    -- FROM keyword not found where expected 
```

但我总是遇到麻烦！子查询是唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T14:16:57.197

这应该有效。

```
SELECT DISTINCT UPPER(nome) 
```

确实有效。如果您收到此错误...

```
ORA-01791: not a SELECTed expression 
```

...那么您还没有发布整个查询。具体来说，您没有向我们展示 ORDER BY 子句。对于 DISTINCT，ORDER BY 子句中的属性必须与投影匹配。所以要么你需要...

```
ORDER BY upper(nome) 
```

...或者您可以作弊并按位置排序...

```
ORDER BY 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:00:41.830

如果您的 DBMS 真的不支持 DISTINCT 和 UPPER 的混合（这会很奇怪），您可以尝试使用 GROUP BY 而不是 DISTINCT，如下所示：

```
SELECT UPPER(NOME)
FROM ICT.UTENTE
WHERE UPPER(nome) LIKE UPPER('MA%')
GROUP BY UPPER(NOME); 
```

如果您的 DBMS 的 LIKE 实现区分大小写，则可能还有一个不区分大小写的运算符变体，称为“ILIKE”，它可以在 WHERE 子句中用 UPPER 代替 LIKE：

```
SELECT UPPER(NOME)
FROM ICT.UTENTE
WHERE nome ILIKE 'MA%'
GROUP BY UPPER(NOME); 
```

这取决于您使用的 DBMS...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T14:38:23.103

试试这个

```
SELECT DISTINCT Upper(NOME) as NOME
FROM ICT.UTENTE 
```

或者

```
SELECT  Upper(NOME) as NOME
FROM ICT.UTENTE group by NOME 
```

# android - 在 ActionProvider 中使用 Loader

> ID：15296632
> 
> 赞同：1
> 
> 时间：2013-03-08T14:46:20.507
> 
> 标签：android, action, android-actionbar, loader

上下文：我想要一个操作按钮，允许用户从列表中选择一些东西。我正在考虑为此使用 ActionProvider。我的数据是从 REST 服务中检索的，并在本地缓存在数据库中。

问题：ActionProvider 似乎不支持加载器。（或者我错了吗？）如果我只是使用查询加载数据，它不会更新一次/如果新的 REST 结果进来。事实上，第一次 - 它会是空的。

问题：0）有没有办法在 ActionProvider 中做我想做的事？1）我应该在普通的旧活动上使用这种方法吗？

PS。有人可以添加“actionprovider”作为标签吗？:-)

10X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:22:53.063

如何创建一个没有 UI 的片段，而是使用`setHasOptionsMenu(true)`和`onCreateOptionsMenu()`实现。

片段可以通过加载器加载数据，并在准备好使选项菜单无效时，用所需的列表填充它。

您可以将此类片段附加到您的活动中，它将处理其生命周期，同时将此功能放在单独的类中。

# html - Cocoa WebView 和 HTML5 拖放

> ID：15296633
> 
> 赞同：1
> 
> 时间：2013-03-08T14:46:27.257
> 
> 标签：html, cocoa, webview, drag-and-drop, gmail

我的同胞社区——我在这里需要一些帮助。我确信这很简单，但我只是错过了标记。所以请帮忙。

**场景：**
在 Mac OS X 10.7 或更高版本上，我有一个 webview 作为浏览器。在该网络视图中，我导航到 Gmail。在 Gmail 中，我撰写邮件，然后将一个或多个文件拖放到撰写框中。

**实际结果：**
粘贴板具有 NSURL 对象，webview 只需获取绝对字符串值并将其粘贴到组合的消息正文中。对于像搜索栏这样的其他编辑区域，这种行为是可以接受的。

**期望的结果：**
希望在鼠标悬停时拖动触发 HTML5，并且拖放将触发适当的 javascript 来上传文件。此行为与 FireFox、Safari 和 OmniWeb 的执行方式一致。

我如何获得相同的一致行为/我需要实现什么？

**到目前为止我已经尝试过：**

*   使用 WebView Editing Delegate 我尝试替换 DOMRange 中的标记
*   我将 WebView 子类化以覆盖 performDragging: 并修改 DraggingSource 粘贴板
*   使用 WebView 首选项私有方法打开 LocalStorage

**注意：**该应用程序将被沙盒化，目前未进行代码签名。

那么我错过了什么或者更好的是我从哪里开始和结束呢？

**PS**我已经尝试了很多东西，我不想用我迄今为止尝试过的无用代码片段来混淆这个问题。但是，如果解决了，我会将我的结果发布给所有其他人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:43:41.000

男孩，我觉得很傻。解决方案很简单，但并不明显。

答案是它是 webview 的**用户代理**字符串。

这是有用信息的链接。 [http://www.useragentstring.com/](http://www.useragentstring.com/)

我建议您将您的用户代理字符串进行分析并确保它符合要求。

举个例子：
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/xxx.xx (KHTML, like Gecko) MyApp/xxx **Safari** /xxx.xx

**注意：** “xxx.xx”是应用程序套件版本（我不会对此进行详细说明）。

**修复程序是末尾的标识符 ' *Safari* '** 其他工作，例如***Firefox***

快乐编码！真的希望这可以帮助某人。

# java - system.in.read 未命中执行

> ID：15296637
> 
> 赞同：0
> 
> 时间：2013-03-08T14:46:38.343
> 
> 标签：java, switch-statement

为什么在第一个循环之后，开关会在停止等待我的输入之前执行两次？标准输入中是否有任何字符？我该如何解决这个问题？

```
while(true)
{
int choice = System.in.read();
switch(choice)
{
   case '1':
       break;
   default:
       break;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:52:07.073

[InputStream#read](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28%29)只读取一个`byte`并且不会消耗换行符（将是 2 个字符，`LF`在`CR`Windows 平台上），将其传递给下一个`read`. `read`现在这*不会*阻止收到输入，并且流程将流向您的`default`案例。

您可以改用 a`BufferedReader`并阅读整行：

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
...
int choice = Integer.parseInt(br.readLine()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:53:38.167

通过花时间阅读[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html)，您会注意到此方法接收单个字节的数据。如果您在输入数据后按 Enter 键，则会向`System.in`流中添加另一个字节，这意味着 Switch 语句有更多数据可供使用。您应该使用[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)来读取这样的流。

**例子**

```
 Scanner s = new Scanner(System.in);
  // Create a scanner object that reads the System.in stream.
  int choice = s.nextInt();
  // Accept the next int from the scanner.
  switch(choice)
  {
    // Insert selection logic here.
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T15:02:37.227

如果您再次在某处打印选择，可能会得到 10 和 13。

*   '10' 是 LF（换行控制字符）。
*   '13' 是 CR（回车控制字符）。

这就是开关执行两次的原因。

And the better way of taking input already have been shown by Reimeus, Chris Cooney.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:48:59.090

这是一个`Infinite Loop`. 它只会继续接受输入。

您应该使用 a`Scanner`来获取您的输入，而不是`System.in.read()`，如下所示：-

```
Scanner s = new Scanner(System.in);
while(true)
    {
        int choice = s.nextInt();
        if(choice == 1){
            break;
         }
    }
s.close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T14:54:20.727

在这种情况下，您可以使用**Break to Labeled Statement 。**更多信息[http://www.javaspecialists.eu/archive/Issue110.html](http://www.javaspecialists.eu/archive/Issue110.html)

**这是工作代码：**

```
import java.io.IOException;

public class Switch {

    public static void main(String[] args) throws IOException {
        exitWhile: {
            while (true) {
                System.out.println("type>");
                int choice = System.in.read();

                switch (choice) {
                case '1':
                    break;
                default:
                    System.out.println("Default");
                    break exitWhile;
                }
            }
        }

    }
} 
```

# javascript - Firefox 无法正确显示和隐藏我的表格。仅在按钮按下时显示标题而不是行

> ID：15296638
> 
> 赞同：0
> 
> 时间：2013-03-08T14:46:40.083
> 
> 标签：javascript, html, firefox, html-table

Firefox 无法正确显示和隐藏我的表格。仅在按钮按下时显示标题而不是行。

基本上我想要的是当用户单击按钮时，显示具有 id“HideMe”的列标题和相同 id 的行。这在 Chrome 中完美运行，但在 Firefox 中却不行

```
<html>

<head>
    <title>Show and Hide Javascript won't work in Firefox</title>
    <style>
        #HideMe {
            display:none;
        }
    </style>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script>
        jQuery(document).ready(function ($) {
            $('.ShowPassword').click(function () {
                $(HideMe).show();
            });
        });
    </script>
</head>

<body>
    <table>
        <tr>
            <th>ID Number</th>
            <th>First Name</th>
            <th>Middle Name</th>
            <th id="HideMe">Password</th>
        </tr>
        <tr>
            <td>2121</td>
            <td>Mike</td>
            <td>Daniel</td>
            <td id="HideMe">Password</td>
        </tr>
        <button class="ShowPassword">Show Password</button>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:48:43.250

这绝不是对的

```
$(HideMe).show(); 
```

您可能想要执行以下操作：

```
$('#HideMe').show(); 
```

小提琴：http : [//jsfiddle.net/JS7tK/5/](http://jsfiddle.net/JS7tK/5/)

一开始我没有注意到，但正如班迪在他的评论中指出的那样，他的评论 ID 应该是独一无二的。所以尝试做类似的事情：

```
<html>
    <head>
        <title>Show and Hide Javascript won't work in Firefox</title>
        <style>
            .HideMe {
                display:none;
            }
        </style>
        <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script>
            jQuery(document).ready(function ($) {
                $('.ShowPassword').click(function () {
                    $('.HideMe').show();
                });
            });
        </script>
    </head>

    <body>
        <table>
            <tr>
                <th>ID Number</th>
                <th>First Name</th>
                <th>Middle Name</th>
                <th class="HideMe">Password</th>
            </tr>
            <tr>
                <td>2121</td>
                <td>Mike</td>
                <td>Daniel</td>
                <td class="HideMe">Password</td>
            </tr>
            <button class="ShowPassword">Show Password</button>
    </body>
<html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:54:08.747

我不做 jQuery，但作为一项规则，毫无疑问，最好在 & 中放置一个跨度来隐藏它，而不是试图隐藏单元格，因为这样做会使表格失衡，所以某些浏览器不允许这样做也就不足为奇了它。

# jquery - 如何在 jQuery Validate 插件中使“必需”和“格式”成为条件？

> ID：15296639
> 
> 赞同：1
> 
> 时间：2013-03-08T14:46:40.443
> 
> 标签：jquery, jquery-validate

我有一个有多个输入的表单。其中两个是“国家”和“邮政编码”。现在我希望“邮政编码”是必需的并且采用正确的邮政编码格式，除非国家不是“NL”。然后邮政编码不是必需的，可以有任何格式。我试过这个。但不知何故，当国家/地区设置为其他国家/地区时，不再需要输入（好的），但仍检查邮政编码的格式并返回错误消息。 *（代码被缩短以便更好地阅读）*

```
function setupValidator() {
    $.validator.addMethod("postcodeFormat",
        function (value, element) {
            console.log(element, value)
            return this.optional(element) || /[1-9][0-9]{3} ?[a-zA-Z]{2}/.test(value);
        },
        "vul een geldig postcode in"
    );

    $("#donatieform").validate({
        rules :{
           postcode :{required:function(){return $("#country").val() === 'NL';}, postcodeFormat:function(element){return $("#country").val() === 'NL';} },
        },

        focusInvalid  :false
    });
} 
```

有谁知道为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:29:39.067

你让它变得比它需要的复杂一点。我只是稍微修改了您的自定义方法以检查国家/地区并删除了构成它的部分`optional`。然后我简化了你如何`postcodeFormat`在`.validate()`.

我还使用了规则`depends`上的选项，`required`仅在填写“国家/地区”时才需要“邮政编码”。

**工作演示：http: [//jsfiddle.net/ptUft/2](http://jsfiddle.net/ptUft/2)**

```
$(document).ready(function () {

    $.validator.addMethod("postcodeFormat", function (value, element) {
        if ($('#country').val() == 'NL') {
            return  (/[1-9][0-9]{3} ?[a-zA-Z]{2}/).test(value);
        } else {
            return true;
        }
    }, "vul een geldig postcode in");

    $("#donatieform").validate({
        rules: {
            postcode: {
                required: {
                    depends: function (element) {
                        return $('#country').is(':filled')
                    }
                },
                postcodeFormat: true
            }
        },
        focusInvalid: false
    });

}); 
```

* * *

**编辑**：

在与 OP 交换意见后，我相信我已经对其进行了编辑，以便它现在可以按照他的意愿工作。

但是，他的 OP 中的代码一直是一样的：

[http://jsfiddle.net/mDdCn/](http://jsfiddle.net/mDdCn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:51:33.883

您可以删除 jQuery 中的验证类，例如

```
 if($('#CountryId').val() !="")
    $(selector).rules('add', 'your rule name');
   else
    $(selector).rules('remove', 'your rule name)' 
```

# javascript - 将新数据添加到 d3 流图时的转换

> ID：15296640
> 
> 赞同：6
> 
> 时间：2013-03-08T14:46:42.497
> 
> 标签：javascript, svg, d3.js, transition, stream-graph

我使用 d3 绘制了一个非常类似于官方示例[http://bl.ocks.org/mbostock/4060954](http://bl.ocks.org/mbostock/4060954)的流图：

![在此处输入图像描述](../Images/a8557318c239d27da00fc15dbf195f1d.png)

唯一的区别是我如何用新数据更新它。我不仅想要垂直（y 值）过渡，还想要在右侧添加新数据点。整个图形应该在水平方向上被*压缩。*

达到预期的结果是没有问题的，唯一的问题是两种状态之间的转换看起来不像预期的那样。

您可以在 JSfiddle 上找到一个奇怪的过渡效果的最小示例：http: [//jsfiddle.net/jaYJ9/4/](http://jsfiddle.net/jaYJ9/4/)

按下更新按钮查看效果

```
test_data0 = [{"0": 0.0, "1": 0.0, "-1": 0.0}, {"0": 0.0, "1": 0.6, "-1": 0.0}, {"0": 0.0, "1": 0.3, "-1": 0.0}, {"0": 0.0, "1": 0.0, "-1": 0.6}, {"0": 0.3, "1": 0.0, "-1": 0.0}, {"0": 0.0, "1": 0.3, "-1": 0.3}, {"0": 0.3, "1": 0.0, "-1": 0.0}, {"0": 0.3, "1": 0.0, "-1": 0.0}, {"0": 0.0, "1": 0.0, "-1": 0.0}]
test_data1 = [{"0": 0.0, "1": 0.0, "-1": 0.0}, {"0": 0.0, "1": 0.6, "-1": 0.0}, {"0": 0.0, "1": 0.3, "-1": 0.0}, {"0": 0.0, "1": 0.0, "-1": 0.6}, {"0": 0.3, "1": 0.0, "-1": 0.0}, {"0": 0.0, "1": 0.3, "-1": 0.3}, {"0": 0.3, "1": 0.0, "-1": 0.0}, {"0": 0.3, "1": 0.0, "-1": 0.0}, {"0": 0.0, "1": 0.0, "-1": 0.0}, {"0": 0.0, "1": 0.0, "-1": 0.0}]

$('#update').click(function(){
    streamed_history(test_data1)
});
var width = 300,
    height = 200,
    colors = {'0': '#6ff500', '1': '#ffad0a', '-1': '#f90035'},
    feedbacks = [-1, 0, 1],
    stack = d3.layout.stack();
var svg = d3.select("#timeline").append("svg")
    .attr("width", width)
    .attr("height", height);
var y = d3.scale.linear()
    .domain([0, 1])
    .range([height, 0]);

streamed_history(test_data0)

function streamed_history(data) {
    data_array = feedbacks.map(function (f) {
        return data.map(function(element, i) { return {x: i, y: element[f]}; })
    }),
    layers = stack(data_array)
    layers = feedbacks.map(function (f, i) {
        return {layer: layers[i], feedback: f, color: colors[f]}
    })

    var x = d3.scale.linear()
        .domain([0, data.length - 1])
        .range([0, width]);

    var area = d3.svg.area().interpolate("basis")
        .x(function(d) { return x(d.x); })
        .y0(function(d) { return y(d.y0); })
        .y1(function(d) { return y(d.y0 + d.y); });

    //enter
    svg.selectAll("path")
        .data(layers)
      .enter().append("path")
        .attr("d", function (d) {return area(d.layer);})
        .style("fill", function(d) { return d.color; });

    //update
    d3.selectAll("path")
      .data(layers)
    .transition()
      .duration(2000)
      .attr("d", function (d) {return area(d.layer);});
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T20:14:10.250

这个问题围绕着这样一个事实，即对于 SVG 动画，您只能将点推到路径的末端。

首先，修复（仅当图形始终垂直密集并且具有一致的图形最高排序时才有效）：

```
...
var area = d3.svg.area().interpolate("basis")
    ...
    .y0(function(d) { return y(null); }) // The null here is super important!
    ...
...
// Add this function
function fixPath (path) {
    var Lidx = path.indexOf('L');
    var Cidx =  path.slice(Lidx).indexOf('C');
    var PCidx = path.slice(0,Lidx).lastIndexOf('C');

    var lp = path.substr(PCidx, Lidx-PCidx);
    var ss = path.substr(Lidx, Cidx);

    return (path.slice(0,Lidx) + lp + ss + path.slice(Lidx));
}
...
svg.selectAll("path")
    .data(layers.reverse()) // Gotta reverse the order!
    .attr("d", function (d) { return fixPath(area(d.layer)); }) // Have to double up the bottom right corner to avoid artifacts
    ...
...
d3.selectAll("path")
    .data(layers)
    .attr("d", function (d) { return fixPath(area(d.layer)); }) // When updating too!
    ... 
```

这里的工作示例：http: [//jsfiddle.net/f5JSR/2/](http://jsfiddle.net/f5JSR/2/)

现在，解释...

图表中的每个色带都是一条闭合路径，d3.js 会构造它们，这样这些色带就不会相互重叠。问题是，这意味着这些路径中的每一个都从左下角开始，然后一直循环回到自身。当你在这些路径上添加一个新点时，你是在最后添加它，它会逆时针推动路径的其余部分（创建奇怪的动画效果）。

我最初尝试使用 SVG 剪辑和`fill-rule: evenodd`属性来解决这个问题，但似乎要使用剪辑，您必须创建复合路径，并且添加新点会将它们推送到此复合路径的末尾（例如，您不能推送指向复合路径的第一条路径），所以问题仍然存在。

相反，这个解决方案摒弃了 d3.js 的聪明之处，而是让你的所有色带扩展到图表的底部（这就是`y(null);`线条所做的）。然后它对路径进行排序，以便首先绘制最高的路径。如果一个图形的高度低于另一个图形的高度，这种方法就会失效。

最后，当点被推到右下角时，可能会出现一些奇怪的伪影。`fixPath`为了解决这个问题，我使用该函数将右下角的点数加倍。

无论如何，此解决方案适用于您的示例案例。我希望这有帮助。

# c# - 从 C# 解密 AES，从 Java 加密

> ID：15296650
> 
> 赞同：0
> 
> 时间：2013-03-08T14:47:13.477
> 
> 标签：c#, java, aes, encryption

我们使用下面的代码在 Java 中加密

```
public encrypt(String text) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidKeySpecException {
    SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
    KeySpec spec = new PBEKeySpec(passPhrase.toCharArray(), SALT, ITERATION_COUNT, KEY_LENGTH); //256 bit
    SecretKey tmp = factory.generateSecret(spec);
    SecretKey secret = new SecretKeySpec(tmp.getEncoded(), "AES");
    this.ecipher = Cipher.getInstance("AES");
    this.ecipher.init(Cipher.ENCRYPT_MODE, secret);
    byte[] bytes = encrypt.getBytes("UTF-8");
    byte[] encrypted = this.ecipher.doFinal(bytes);
    return Base64.encodeBase64String(encrypted);
} 
```

我们的供应商正在使用 C# 来解密数据 他的代码

```
string Decrypt(string textToDecrypt, string key)
{
    RijndaelManaged rijndaelCipher = new RijndaelManaged();
    rijndaelCipher.Mode = CipherMode.ECB;
    rijndaelCipher.KeySize = 0x80;
    rijndaelCipher.BlockSize = 0x80;
    byte[] encryptedData = Convert.FromBase64String(textToDecrypt);
    byte[] pwdBytes = Encoding.UTF8.GetBytes(key);
    byte[] keyBytes = new byte[0x10];
    int len = pwdBytes.Length;
    if (len > keyBytes.Length) {
        len = keyBytes.Length;
    }
    Array.Copy(pwdBytes, keyBytes, len);
    rijndaelCipher.Key = keyBytes;
    byte[] plainText = rijndaelCipher.CreateDecryptor().TransformFinalBlock(encryptedData, 0, encryptedData.Length);
    return Encoding.UTF8.GetString(plainText); 
} 
```

但他无法解密数据。他得到了一些垃圾数据。知道如何使用 C# 进行 Java 加密部分的解密。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:19:01.670

首先，不要对您的 java 代码有任何安全性暗示。[ECB](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)模式不是一个好的选择。

其次，C# 代码的问题在于它使用密码的原始字节而不是`PBKDF2WithHmacSHA1`java 代码使用的密钥。C# 中生成密钥的类是[Rfc2898DeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)

# serial-port - linux串口——多线程程序

> ID：15296654
> 
> 赞同：0
> 
> 时间：2013-03-08T14:47:20.200
> 
> 标签：serial-port, embedded-linux, tty

我正在研究一个智能卡读卡器项目，我将不得不从智能卡读卡器读取/写入数据。此外，我将不得不从 PC 应用程序读取/写入数据。

我的微控制器上有两个串行端口，一个连接到智能卡读卡器，另一个连接到 PC。

智能卡读卡器 <-----> 微控制器 <-----> PC

我已经移植了 linux 并为此使用了 /ttys0 和 /ttys1 驱动程序。

1> 我的问题是，如果应用程序必须发现某些数据可以从端口读取，而不是我必须始终使用 read() 系统调用检查它吗？
2> ttys0 驱动程序是否有内部缓冲区来存储接收到的数据？或者如果应用程序不立即读取数据，数据会丢失？
3> 在这里为每个端口的 rx/tx 使用单独的线程，这是正确的方法吗？

请指导我，我是嵌入式 linux 的新手。

//约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:51:14.613

是的，linux tty 上有相当多的缓冲。

你有几个选择如何与他们互动。

*   您可以使它们成为非阻塞的，并经常轮询以查看是否可以从中读取数据（但这可能会导致 CPU 周期无用地旋转，从而减慢其他任务的速度）

*   您可以使用 select() 屈服于调度程序，直到您的一台设备有数据可供您操作

*   您可以使用阻塞 I/O，但是由于您有多个端口，可能还需要多个线程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:02:58.753

TTY 编程类似于 Linux 中的套接字编程。所以基本上你可以将套接字设置为异步并在数据可用时接收信号。关于缓冲，是的，​​它使用两个翻转缓冲区进行缓冲。您可以查看 Linux 设备驱动程序第 3 版中关于内核中 TTY 实现的第 18 章。

# php - 如何将 POST 数据发送到外部框架中的外部页面？

> ID：15296655
> 
> 赞同：0
> 
> 时间：2013-03-08T14:47:22.550
> 
> 标签：php, html, forms, post, frame

我在做我在标题中解释的事情时遇到了问题。我想知道是否有人可以帮助我。

所以我再详细解释一下：

我有一个网页，其中包含一个将 POST 数据发送到外部 URL 的表单（不是 mysite.com 而是 hissite.com，我希望你明白了）我使用 HTML 框架在我自己的网站内创建了一个页面（例如 mysite .com/hissite) 以隐藏其他网站的实际 URL。问题是我无法将表单输入传递给 hissite.com，而是通过我网站内的框架。

我基本上想要以下内容： 1\. 用户登录我的网站。2\. 我的登录表单将登录信息传递到其他网站。3\. 用户已登录，但被重定向到另一个网站，他被重定向到我的网站内包含另一个网站的框架。

我不知道如何更好地解释它，但我希望有人能理解我并帮助我完成我的项目。

我不得不提一下，我网页上的表单与其他网站上的表单具有相同的结构（字段、字段名称等）。所以我相信通过框架传递输入会非常容易。嗯，...我意识到这并不容易。

这是表格：

```
<form action="/home/signin" method="post" name="loginForm" class="large-form" id="loginForm" >
  <fieldset>
    <label for="username">Username</label>
    <input type="text" name="username" tabindex="1" id="username" value="" />
</fieldset>
<fieldset>
  <label for="password">Password</label>
  <input type="password" name="password" tabindex="2" id="password" value="" />
  <input type="hidden" name="themeName" value=""/>
</fieldset>
<br/>
<div id="login-button">
  <input type="submit" value="Log In" tabindex="3" />
</div> 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:07:50.300

如果不使用您的方法代理第三方网站，这是不可能的。

你可以：

**正常使用框架**

这将涉及将`target`表单上的属性设置为框架名称和`action`第三方 URL。

只要第三方站点未对其登录表单实施任何针对[CSRF 攻击的保护，这将起作用。](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29)

这种方法不会为您提供用于登录的凭据（尽管您可以使用 JavaScript 嗅探它们）。

**代理整个站点**

这将涉及与上述相同的内容，只是您将 设置为`action`您网站上的 URL。然后，您必须使用服务器端代码向第三方站点发出 HTTP 请求（在您的服务器上维护每个用户的 cookie jar）。对于每个请求，您必须解析每个响应并更改 HTML、CSS、JavaScript 等中的任何 URL，以便它们继续工作（因为相对 URI 会失败）。

* * *

无论哪种方式 - 要求用户在您的第三方网站上输入他们的凭据是一个高度可疑的请求。像这样的凭证应该是保密的，而不是共享的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T15:03:59.703

在这种情况下，您需要使用 ajax 调用，将您想要的信息发送到其他页面，然后您可以根据需要继续处理数据，只需将表单提交调用为 javaScript，如下所示：

```
$.ajax({
        url: siteUrl,
        type: "post",
        async:true,
        dataType: 'json',
        success: function(data){
your function
        },
        error: function(e){
your error function
        }
    }); 
```

# php - 将 PHP 5.3 更新到 5.4 后 Mongo 驱动程序无法正常工作

> ID：15296656
> 
> 赞同：0
> 
> 时间：2013-03-08T14:47:27.983
> 
> 标签：php, apache, mongodb, centos, centos6

我已经安装了 PHP-MCRYPT 包，所以它自动将我的 PHP 从 5.3 更新到 5.4，现在 Mongo 驱动程序没有加载。有时会出现此错误：

```
PHP startup mongo: Unable to initialize module 
```

我应该更新 mongo 驱动程序吗？如何？我在 Godaddy 运行 VPS CentOS 6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:55:03.730

您可能需要[从 PECL 重新安装 PHP mongo 驱动程序](http://pecl.php.net/package/mongo)。试试看，让我知道你是怎么过的。

# html - 在下访问另一个文件夹中的css文件

> ID：15296657
> 
> 赞同：-1
> 
> 时间：2013-03-08T14:47:29.200
> 
> 标签：html, css

我有 2 个文件夹，1 个名为我的 index.html 的模板。另一个名为 static 我的 main.css 文件所在的位置。我使用以下代码从 index.html 访问我的 css 文件，但出现 404 错误。我在 python 中使用谷歌应用引擎。

```
<link rel="stylesheet" href="../static/main.css" type="text/css"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:51:20.250

如果这些文件夹位于应用程序根目录，您可以尝试使用如下所示的 url。

```
<link rel="stylesheet" href="/static/main.css" type="text/css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:52:44.157

尝试给出完整路径，例如 C:\xampp\htdocs\yourFolder\static\main.css

# ios - 将 ios 框架（如 Google Maps API）添加到 subversion 将不允许工作结帐

> ID：15296658
> 
> 赞同：0
> 
> 时间：2013-03-08T14:47:30.947
> 
> 标签：ios, xcode, svn, frameworks, google-maps-sdk-ios

我将新的 Google Maps API 框架添加到项目中并将其签入 subversion。该框架具有通常的 Apple 结构，其中包括指向实际静态库和包含的别名文件。显然，现在 XCode 允许使用标准框架结构，因此您不必再将标头或库引用放入，只需添加框架就足够了。

但是，将它们存储在 subversion 中似乎不起作用，因为当您检出它们时，别名文件似乎会中断。

任何人都知道如何使这项工作？显然，我可以在框架中添加对包含目录和静态库的手动引用，即老式方式。由于人们现在将 SDK 作为适当的框架（Google，Crashlytics）提供，因此以某种方式工作会很好。

更新：框架内的符号链接应该存储在标记为 svn:special 的 SVN 中。然而，我从检查这个框架中得到的是一个到库的符号链接，但实际上是用于标题和资源的文件夹。这当然不再匹配 SVN 存储库。我想知道我的 svn 客户端（版本）是否搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:12:13.367

我通过将真正的 GoogleMaps 文件以及真正的 Headers 和 Resources 文件夹从 GoogleMaps.framework/Versions/A/ 复制到 GoogleMaps.framework 文件夹中来避免将符号链接放入 SVN，覆盖符号链接（然后我删除了 Versions 文件夹） .

这可能不是“正确”的方法，但到目前为止它似乎工作正常:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:58:46.687

更新 SVN 全局忽略：

打开终端并执行：

```
vi ~/.subversion/config 
```

然后搜索 global-ignores，并取消注释同一行（删除第一个字符中的 #）。然后在同一行删除 .a

![在此处输入图像描述](../Images/0901be1b3134f365a6787f70c9811f33.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:02:57.187

有人的客户搞砸了签到。版本 OSX 似乎可以正确执行此操作，但是一旦签入错误，就会开始发生奇怪的事情。解决方案是将其从存储库中删除并使用命令行或像版本一样正常工作的客户端将其签入。

# c++ - uint8_t iostream 行为

> ID：15296661
> 
> 赞同：16
> 
> 时间：2013-03-08T14:47:37.323
> 
> 标签：c++, c++11, iostream

摘要：我期待代码：cout << uint8_t(0); 打印“0”，但它不打印任何内容。

长版：当我尝试将 uint8_t 对象流式传输到 cout 时，我使用 gcc 得到奇怪的字符。这是预期的行为吗？难道 uint8_t 是某些基于字符的类型的别名？请参阅代码示例中的编译器/系统说明。

```
// compile and run with:
// g++ test-uint8.cpp -std=c++11 && ./a.out
//                    -std=c++0x (for older gcc versions)
/**
 * prints out the following with compiler:
 *     gcc (GCC) 4.7.2 20120921 (Red Hat 4.7.2-2)
 * on the system:
 *     Linux 3.7.9-101.fc17.x86_64
 * Note that the first print statement uses an unset uint8_t
 * and therefore the behaviour is undefined. (Included here for
 * completeness)

> g++ test-uint8.cpp -std=c++11 && ./a.out
>>>�&lt;<<    >>>194<<<
>>><<<    >>>0<<<
>>><<<    >>>0<<<
>>><<<    >>>0<<<
>>><<<    >>>1<<<
>>><<<    >>>2<<<

 *
 **/

#include <cstdint>
#include <iostream>

void print(const uint8_t& n)
{
    std::cout << ">>>" << n                 << "<<<    "
              << ">>>" << (unsigned int)(n) << "<<<\n";
}

int main()
{
    uint8_t a;
    uint8_t b(0);
    uint8_t c = 0;
    uint8_t d{0};
    uint8_t e = 1;
    uint8_t f = 2;
    for (auto i : {a,b,c,d,e,f})
    {
        print(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T14:49:52.800

`uint8_t`是 的别名`unsigned char`，并且 iostream 对打印出字符而不是格式化数字的字符有特殊的重载。

转换为整数会阻止这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T14:54:04.497

> 难道 uint8_t 是某些基于字符的类型的别名？

绝对地。如果存在这种类型，则它必须是内置 8 位无符号整数类型的 typedef。由于只有两种可能的 8 位无符号整数类型，`char`对于将其视为无符号和 的编译器`unsigned char`，它必须是其中之一。除了`char`大于 8 位的系统，在这种情况下它不会存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T19:33:23.460

正如其他人指出的那样，`uint8_t`以`unsigned char`. 我有时会使用整数类型的位字段*作为*整数流式传输，以避免强制转换或重载`operator<<`，但前提是它不会浪费空间，如下面的 Pos 结构：

```
#include <iostream>

struct WasteAbyte {
    unsigned short has_byte_range:8;
};

struct Pos {
    unsigned short x:8;
    unsigned short y:8;
};

int main() {
    WasteAbyte W = {255};

    ++W.has_byte_range;

    std::cout << W.has_byte_range << std::endl;

    std::cout << sizeof(WasteAbyte) << std::endl;
    std::cout << sizeof(Pos) << std::endl;

    return 0;
} 
```

输出：

```
0
2
2 
```

# android - 电话间隙问题

> ID：15296662
> 
> 赞同：-1
> 
> 时间：2013-03-08T14:47:42.107
> 
> 标签：android, cordova, runtime-error

我有问题。当您在设备上启动应用程序时。

[![图片](../Images/452f16774e5d14dd209b94d826559617.png)](https://i.stack.imgur.com/OLRGh.png)

当我按下“返回”按钮时。

[![结果](../Images/efdb86433a453be0b11d7678d296887c.png)](https://i.stack.imgur.com/DocyG.png)

安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.firstgap"
    android:versionCode="1"
    android:versionName="1.0" >

    <supports-screens android:largeScreens="true" 
                    android:normalScreens="true" 
                    android:smallScreens="true" 
                    android:resizeable="true" 
                    android:anyDensity="true" />

            <uses-permission android:name="android.permission.CAMERA" /> 
            <uses-permission android:name="android.permission.VIBRATE" /> 
            <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
            <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
            <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
             <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
             <uses-permission android:name="android.permission.INTERNET" /> 
             <uses-permission android:name="android.permission.RECEIVE_SMS" /> 
             <uses-permission android:name="android.permission.RECORD_AUDIO" /> 
             <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
             <uses-permission android:name="android.permission.READ_CONTACTS" /> 
             <uses-permission android:name="android.permission.WRITE_CONTACTS" /> 
             <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
             <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
             <uses-permission android:name="android.permission.GET_ACCOUNTS" /> 
            <uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:debuggable="true"
        android:hardwareAccelerated="true" >
        <activity
            android:name="org.apache.cordova.DroidGap"
            android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden"  >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

主要活动：

```
package com.example.firstgap;

import android.os.Bundle;
import org.apache.cordova.DroidGap;

public class MainActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

有什么问题？请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:57:12.317

您的清单中有错误的启动器活动尝试将其更改为：

```
<activity
    android:name="com.example.firstgap.MainActivity"
    android:label="@string/app_name"
    android:configChanges="orientation|keyboardHidden"  >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
<activity> 
```

你必须实例化你`com.example.firstgap.MainActivity`的 insthead `org.apache.cordova.DroidGap`。

# html - CSS：使中间div占据窗口高度（最小高度）的整个可用空间

> ID：15296666
> 
> 赞同：2
> 
> 时间：2013-03-08T14:47:48.060
> 
> 标签：html, css

谁能帮我定位我的内容块？如果有很多内容看起来不错，但当窗口高于内容块时就不行了。实际上，我需要图片上的“内容”块占用所有可用空间（高度），这就是页脚粘在底部的原因。

![在此处输入图像描述](../Images/d51019dc444981c9d3fba0745e34fbfc.png)

我有下一个 HTML 标记：

```
<div>
    <header></header>
    <nav class="breadcrumbing"></nav>
    <section class="left_nav"></section>
    <section class="content"></section>
    <footer></footer>
</div> 
```

使用这个 CSS：

```
html,body{width:100%;margin:0;padding:0;}
body{background-color:#629302}
body>div{width:400px;height:100%;margin:0 auto;background-color:#FFF;}
body>div>header{height:50px;background-color:#9dc155}
body>div>nav.breadcrumbing{display:block;height:10px;margin:0;padding:0;}
body>div>section.left_nav{width:172px;margin:8px 20px;float:left;background-color:#cdef88}
body>div>section.content{width:168px;float:left;}
body>div>footer{padding:19px 19px 22px;background-color: #e58b04;clear:left;} 
```

我已经尝试过[Is it possible to get a div's height to be 100% of a available area？](https://stackoverflow.com/questions/4514322/is-it-possible-to-get-a-divs-height-to-be-100-of-an-available-area?rq=1)和一些相同的问题，但没有运气。另外，我的实时 HTML 有背景图像，所以我不能只用 position:absolute 将页脚放在底部。

在那里我发布了我的 HTML 以进行预览：[jsfiddle](http://jsfiddle.net/taran2l/jhztM/)。

**UPD：**缩放实时预览： ![在此处输入图像描述](../Images/50976e7a3b801dab2cee236c5497b17b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:59:26.670

这是一个[更新的小提琴](http://jsfiddle.net/jhztM/2/)

关键在于将主体设置为绝对定位到视口。从那里开始，如果您想让它像往常一样滚动，那么您可以将页脚的位置更改为固定，并将内容 div 的 CSS 更改为：

```
body>div>div{width:400px;height:100%;margin:0 auto;background-color:#FFF;
position:absolute; top: 0; bottom: 0; overflow-y:auto;} 
```

我已将您的内容 div 包装在另一个 div 中，以允许自动边距使您的页面居中，然后将页脚的框大小定义为边框框，以考虑您添加到其中的填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:55:31.257

您必须将`html`and`body` `height`属性设置为 100%；然后可以将`footer`高度设置为 100%；这将告诉主要容器元素 100% 的*真正含义*，它会起作用。

`[**Your updated fiddle**](http://jsfiddle.net/jhztM/1/)`

基本上，这些是您必须添加的规则：

```
html, body {
    height: 100%;
}

footer {
    height: 100%;
} 
```

## 更新

好的，我可能误解了您的要求，这是一个更简洁的示例：

`[**Working example**](http://jsbin.com/agocof/2)`

基本上，你在这个例子中另外做的是让你的包装元素`display:table`带有一个`height: 100%`，然后你将你的`footer`显示设置为`table-row`。

**重要说明：**此解决方案使用[`display-table`仅与 IE8+ 兼容的](http://caniuse.com/css-table)解决方案。如果支持IE7是您的问题，那么您有两种解决方案，我可以想到这些解决方案：

1.  您可以使用固定宽度的页脚，将其推到内容下方，然后使用负数`margin`和`padding`.

2.  或者，您可以通过使用一些 javascript 将页脚放置在适当的位置，从而回退到对旧浏览器的支持。

这是代码的细分：

### HTML

```
<div class="wrapper">
    <header></header>
    <section class="main-content">
      {child elements of your main-content area}
    </section>
    <footer></footer>
</div> 
```

### CSS

```
html, body { 

  height: 100%;
  margin: 0;

}

.wrapper { 

  display: table;
  margin:  0 auto;
  height:  100%;

}

.main-content { 

  display: table-row;
  height: 100%;

}

footer { 

  display: table-row;

} 
```

# javascript - Javascript在没有缩略图的情况下放大悬停

> ID：15296668
> 
> 赞同：0
> 
> 时间：2013-03-08T14:47:51.177
> 
> 标签：javascript, jquery, zooming

我正在寻找一个类似的javascript缩放库[但是](http://www.starplugins.com/cloudzoom) ，大多数人都要求您拥有未缩放图像的缩略图图像，这对我来说有点烦人，因为我每页只查看2-3张图像，一切都是预装。

有谁知道一个类似的库，它可以让我用我的图像的 css 缩小版本来做到这一点，而不是在后端生成缩略图？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:51:11.767

是的 CSS3 转换：

```
img.thumb {
     -webkit-transform:scale(0.5,0.5);
     -ms-transform:scale(0.5,0.5);
     -moz-transform:scale(0.5,0.5);
     -o-transform:scale(0.5,0.5);
     transform:scale(0.5,0.5);
} 
```

# oracle - 如何在一个 sqlscript for Oracle 中运行多个语句

> ID：15296682
> 
> 赞同：0
> 
> 时间：2013-03-08T14:49:00.030
> 
> 标签：oracle

我试图在一个 sql 文件中运行一些语句，但它不起作用。

```
declare 
  new_sequence INTEGER;
begin 
  select LAST_NUMBER + 1 
    into new_sequence 
    from user_sequences 
   where SEQUENCE_NAME = 'MLTS_SEQUENCE';

  execute immediate 'Create sequence Table_SEQ start with '
      || new_sequence ||' increment by 1';
end; 
```

如果我在 Eclipse 数据库插件中使用“作为一个语句执行”选项运行这个块，它就可以工作。

我如何标记 sqlscript 以将这些块中的每一个作为一个语句运行，以便稍后使用 sqlplus 或与 eclipse 不同的东西执行脚本？

我在前面和/最后尝试了 GO，但这也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:16:21.217

只要它在自己的行上并且左对齐，在 sql*plus 中应该没问题：

```
SQL> create sequence MLTS_SEQUENCE start with 1 cache 20;

Sequence created.

SQL> select MLTS_SEQUENCE.nextval from dual;

   NEXTVAL
----------
         1

SQL> declare
  2    new_sequence INTEGER;
  3  begin
  4    select LAST_NUMBER + 1
  5      into new_sequence
  6      from user_sequences
  7     where SEQUENCE_NAME = 'MLTS_SEQUENCE';
  8
  9    execute immediate 'Create sequence Table_SEQ start with '
 10        || new_sequence ||' increment by 1';
 11  end;
 12  /

PL/SQL procedure successfully completed.

SQL> select Table_SEQ.nextval from dual;

   NEXTVAL
----------
        22 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:20:25.510

sqlplus 的正确格式如下：

```
declare
  ...
begin
  ...
end;
/ 
```

# java - 编码检测方法不起作用

> ID：15296684
> 
> 赞同：3
> 
> 时间：2013-03-08T14:49:02.050
> 
> 标签：java, character-encoding, decoding

我需要检查文件的编码类型。如果它是可读的，则返回 true。
根据这个[SO answer](https://stackoverflow.com/a/14913167/120163)，我在 Java 代码中转换了这个逻辑。但它不起作用。确切地说，这部分代码：

```
if ((buffer[0] & 0xF8) == 0xF0) {
        if (((buffer[1] & 0xC0) == 0x80)
            && ((buffer[2] == 0x80) && ((buffer[3] == 0x80))))
            return true;
    } else if ((buffer[0] & 0xF0) == 0xE0) {
        if (((buffer[1] & 0xC0) == 0x80) && ((buffer[2] & 0xC0) == 0x80))
            return true;
    } else if ((buffer[0] & 0xE0) == 0xC0) {
        if (((buffer[1] & 0xC0) == 0x80))
            return true;
    } return false; 
```

这没有正确检查，此时正在检查 100% UTF-8 代码！=> 结果`return false`。

**所有代码：**

```
class EncodindsCheck implements Checker {
    private static final int UTF8_HEADER_SIZE = 8;

    @Override
    public boolean check(File currentFile) {
        return isUTF8(currentFile);
    }

    public static boolean isUTF8(File file) {
        // validate input
        if (null == file) {
            throw new IllegalArgumentException("input file can't be null");
        }
        if (file.isDirectory()) {
            throw new IllegalArgumentException(
                    "input file refers to a directory");
        }

        // read input file
        byte[] buffer;
        try {
            buffer = readUTFHeaderBytes(file);
        } catch (IOException e) {
            throw new IllegalArgumentException(
                    "Can't read input file, error = " + e.getLocalizedMessage());
        }

        if ((buffer[0] & 0xF8) == 0xF0) {
            if (((buffer[1] & 0xC0) == 0x80)
                && ((buffer[2] == 0x80) && ((buffer[3] == 0x80))))
                return true;
        } else if ((buffer[0] & 0xF0) == 0xE0) {
            if (((buffer[1] & 0xC0) == 0x80) && ((buffer[2] & 0xC0) == 0x80))
                return true;
        } else if ((buffer[0] & 0xE0) == 0xC0) {
            if (((buffer[1] & 0xC0) == 0x80))
                return true;
        }

        return false;
    }

    private static byte[] readUTFHeaderBytes(File input) throws IOException {
        byte[] buffer = new byte[UTF8_HEADER_SIZE];
        // read data
        FileInputStream fis = new FileInputStream(input);
        fis.read(buffer);
        fis.close();
        return buffer;
    }
} 
```

**问题：**

*   为什么这个检查不起作用？
*   如何以这种方式解决此检查检测（作为 UTF-8 字符序列）？
*   如何检查其他字符集（**UTF-16 等**）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:31:34.263

UTF-8 中的代码点可以是 1、2、3 或 4 个字节长。

如果所有代码点都在 U+0000 到 U+007F 范围内，则`isUTF8`返回 false。在这种情况下，该文件将适用于大量编码（UTF-8、ASCII、ANSI 编码等）

您的 UTF-8 检查相信第一个代码点高于 U+007F 是幸运的。

我建议你看[一个更全面的编码检测 API](http://illegalargumentexception.blogspot.co.uk/2009/05/java-rough-guide-to-character-encoding.html#javaencoding_autodetect)，至少作为一个例子。

* * *

*注意`fis.read(buffer);`不保证填充数组；类型协定要求您检查读取的字节数的返回值。*

# php - 迭代mongodb，php中的所有文档->_ids

> ID：15296687
> 
> 赞同：0
> 
> 时间：2013-03-08T14:49:11.800
> 
> 标签：php, mongodb

我目前正在这样做：

```
 $t_category = 781;
  $res = $collection->findOne(array("_id" => intval($t_category))); 
```

这样我只得到一个类别（只是尝试）。如何在 php->mongo 中获取所有类别（文档->_ids）？一种我可以遍历集合中所有文档的方法。我已经尝试了没有参数的查找。没运气。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:59:35.777

不带参数调用`find`将返回集合中的所有项目。

```
$results = $collection->find(); 
```

# unc - C# 中的 Application.Executablepath 具有混合分隔符

> ID：15296688
> 
> 赞同：1
> 
> 时间：2013-03-08T14:49:13.067
> 
> 标签：unc, path-separator, executable-path

我在两台不同的机器上使用别人的代码（许可）。在一台机器上，Application.ExecutablePath 返回程序员必须预期的结果，而在另一台机器上则没有。两者都是 Windows 7 机器。

在我的机器上，Application.ExecutablePath 返回如下内容：

```
"C:\\Dir1\\Dir2\\Dir3/bin/Debug/APP.EXE" 
```

在另一台机器上，它返回

```
"C:\\Dir1\\Dir2\\Dir3\\bin/Debug/APP.EXE" 
```

程序员显然期望第二个返回字符串，因为代码是这样做的：

```
 string path = Application.ExecutablePath;
  short found = (short)path.LastIndexOf(@"\");

  if (found > -1)
  {
    path = path.Substring(0, found);
  }
  try
  {
    foreach (string File in Directory.GetFiles(path + @"\Res\Patterns\", "*.xml"))
    {
      found = (short)File.LastIndexOf(@"\");
      if (found > -1)
        //... use files found 
```

并且文件目录在两台机器上都存在于 Dir3 下，所以它在另一台机器上找到，但在我的机器上没有。我找不到任何关于 Windows 何时何地决定返回正斜杠（如 URL 路径）与使用“\”的 UNC 路径的信息。为什么这段代码在不同的机器上会有不同的工作方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-10T19:10:27.040

我猜您简化为的路径`C:\\Dir1\\Dir2\\Dir3/bin/debug`实际上在 Dir3 名称中有一个哈希 (#)。

这显然是一个怪癖`Application.ExecutablePath`。您可以`Assembly.GetEntryAssembly().Location`改用它，它会返回一致的结果。

# javascript - 在 Silverlight 中禁用 F5

> ID：15296692
> 
> 赞同：1
> 
> 时间：2013-03-08T14:49:35.853
> 
> 标签：javascript, silverlight

我的一些用户在键入时不小心按了 F5，导致他们丢失了所有键入的内容。我不需要阻止点击刷新按钮。

我尝试使用以下 javascript，但它仅在用户不关注 Silverlight 应用程序时有效（即当用户单击 SL 应用程序之外的某个位置时它有效，但当用户关注时不会触发 onkeydown 事件SL）。

```
document.onkeydown=function(e) {
    var event = window.event || e;
    if (event.keyCode == 116) {
        event.keyCode = 0;
        alert("test");
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:00:03.767

处理这种情况的最佳方法可能是使用[onbeforeunload 事件](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)并要求用户确认。通过这种方式，您可以从合法的选项卡中根除意外刷新或关闭的选项卡，而无需处理所有可能的快捷方式。

```
window.onbeforeunload = function(e) {
    return 'Are you sure you want to leave without saving your changes?';
}; 
```

您甚至可以仅在有一些未保存的更改时才显示确认对话框。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-08T14:52:02.737

我会说，像这样的东西？

```
document.onkeydown = function() 
{
    switch (event.keyCode) 
    {
        case 116 : //F5 button
            event.returnValue = false;
            event.keyCode = 0;
            return false;
        case 82 : //R button
            if (event.ctrlKey) 
            {
                event.returnValue = false;
                event.keyCode = 0;
                return false;
            }
    }
} 
```

注意： ctrl + r 也是刷新的快捷方式

# jqgrid - jqGrid 自动完成内联编辑

> ID：15296693
> 
> 赞同：0
> 
> 时间：2013-03-08T14:49:40.523
> 
> 标签：jqgrid, autocomplete, inline-editing

我有一个使用 jqGrid 的网格，在这个网格中，我可以使用内联编辑来编辑行。我正在尝试在可编辑的行中进行自动完成。这可能吗？如果是，我如何识别这些行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:40:48.720

您可以`classes: autoCompleteFieldClassName`在列的 colModel 中设置，然后使用它在编辑时添加自动完成字段。

示例：在 colModel 中，您可以通过选项将类分配给列单元格 `classes: autoCompleteFieldClassName`

然后，此类将允许您在内联编辑事件上设置一个 jQuery 选择器，这将允许您选择附加到此单元格列的输入元素。一旦你有了这个元素，你可以附加一个 jQuery 自动完成

```
$(inputElement).autocomplete({ source: '/Controller/GetAutocompleteInformation',
    minLength: 2, autosearch: true,
    select: function (event, ui) {
        $(elem).val(ui.item.value); 
```

# c# - 表达式树和 AND 条件

> ID：15296696
> 
> 赞同：7
> 
> 时间：2013-03-08T14:49:56.690
> 
> 标签：c#, filter, conditional-statements, expression-trees

我正在尝试构建一个过滤器表达式来过滤数据库中的数据。

我编写了以下扩展来根据所选过滤器参数动态构建表达式：

```
public static Expression<Func<T, bool>> And<T>(
        this Expression<Func<T, bool>> leftExpression, 
        Expression<Func<T, bool>> rightExpression)
{
    var invocationExpression = Expression.Invoke(rightExpression, leftExpression.Parameters.Cast<Expression>());
    var andExpression = Expression.Lambda<Func<T, bool>>(
        Expression.AndAlso(leftExpression.Body, invocationExpression), 
        leftExpression.Parameters);

    return andExpression;
} 
```

我以这种方式使用它：

```
Expression<Func<MyObject, bool>> expression = x => true;

if(MyFilter.SomeParam) {
    expression = expression.And(x=>x.MyProperty == MyFilter.SomeParam);
} 
```

它适用于 NHibernate，但是当我将此代码与 Entity Framework 5 一起使用时，它会失败并显示以下异常消息：

> LINQ to Entities 不支持 LINQ 表达式节点类型“Invoke”。

`IEnumerable.Where(Func<T1, T2> filterClause)`有一种解决方法是从数据库中获取整个集合，然后通过`Expression<Func<T1, T2>>`.

有什么简单的方法可以让这段代码与实体框架一起工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T15:10:57.750

[从Domain Oriented N-Layered .NET 4.0 Sample App](http://microsoftnlayerapp.codeplex.com/)尝试这个实现（还有[规范模式](http://en.wikipedia.org/wiki/Specification_pattern)的实现）：

```
public static class ExpressionBuilder
{
    public static Expression<T> Compose<T>(this Expression<T> first, Expression<T> second, Func<Expression, Expression, Expression> merge)
    {
        var map = first.Parameters.Select((f, i) => new { f, s = second.Parameters[i] }).ToDictionary(p => p.s, p => p.f);
        var secondBody = ParameterRebinder.ReplaceParameters(map, second.Body);
        return Expression.Lambda<T>(merge(first.Body, secondBody), first.Parameters);
    }

    public static Expression<Func<T, bool>> And<T>(this Expression<Func<T, bool>> first, Expression<Func<T, bool>> second)
    {
        return first.Compose(second, Expression.And);
    }

    public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> first, Expression<Func<T, bool>> second)
    {
        return first.Compose(second, Expression.Or);
    }

}

public class ParameterRebinder : ExpressionVisitor
{
    private readonly Dictionary<ParameterExpression, ParameterExpression> map;

    public ParameterRebinder(Dictionary<ParameterExpression, ParameterExpression> map)
    {
        this.map = map ?? new Dictionary<ParameterExpression, ParameterExpression>();
    }

    public static Expression ReplaceParameters(Dictionary<ParameterExpression, ParameterExpression> map, Expression exp)
    {
        return new ParameterRebinder(map).Visit(exp);
    }

    protected override Expression VisitParameter(ParameterExpression p)
    {
        ParameterExpression replacement;
        if (map.TryGetValue(p, out replacement))
        {
            p = replacement;
        }

        return base.VisitParameter(p);
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:58:33.583

请在下面的博客文章中找到解决方案：

[一个通用的 PredicateBuilder](http://petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/)

这篇博文的作者提供了另一种“Add”方法的实现来结合2个表达式。

```
/// <summary>
/// Enables the efficient, dynamic composition of query predicates.
/// </summary>
public static class PredicateBuilder
{
    /// <summary>
    /// Creates a predicate that evaluates to true.
    /// </summary>
    public static Expression<Func<T, bool>> True<T>() { return param => true; }

    /// <summary>
    /// Creates a predicate that evaluates to false.
    /// </summary>
    public static Expression<Func<T, bool>> False<T>() { return param => false; }

    /// <summary>
    /// Creates a predicate expression from the specified lambda expression.
    /// </summary>
    public static Expression<Func<T, bool>> Create<T>(Expression<Func<T, bool>> predicate) { return predicate; }

    /// <summary>
    /// Combines the first predicate with the second using the logical "and".
    /// </summary>
    public static Expression<Func<T, bool>> And<T>(this Expression<Func<T, bool>> first, Expression<Func<T, bool>> second)
    {
        return first.Compose(second, Expression.AndAlso);
    }

    /// <summary>
    /// Combines the first predicate with the second using the logical "or".
    /// </summary>
    public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> first, Expression<Func<T, bool>> second)
    {
        return first.Compose(second, Expression.OrElse);
    }

    /// <summary>
    /// Negates the predicate.
    /// </summary>
    public static Expression<Func<T, bool>> Not<T>(this Expression<Func<T, bool>> expression)
    {
        var negated = Expression.Not(expression.Body);
        return Expression.Lambda<Func<T, bool>>(negated, expression.Parameters);
    }

    /// <summary>
    /// Combines the first expression with the second using the specified merge function.
    /// </summary>
    static Expression<T> Compose<T>(this Expression<T> first, Expression<T> second, Func<Expression, Expression, Expression> merge)
    {
        // zip parameters (map from parameters of second to parameters of first)
        var map = first.Parameters
            .Select((f, i) => new { f, s = second.Parameters[i] })
            .ToDictionary(p => p.s, p => p.f);

        // replace parameters in the second lambda expression with the parameters in the first
        var secondBody = ParameterRebinder.ReplaceParameters(map, second.Body);

        // create a merged lambda expression with parameters from the first expression
        return Expression.Lambda<T>(merge(first.Body, secondBody), first.Parameters);
    }

    class ParameterRebinder : ExpressionVisitor
    {
        readonly Dictionary<ParameterExpression, ParameterExpression> map;

        ParameterRebinder(Dictionary<ParameterExpression, ParameterExpression> map)
        {
            this.map = map ?? new Dictionary<ParameterExpression, ParameterExpression>();
        }

        public static Expression ReplaceParameters(Dictionary<ParameterExpression, ParameterExpression> map, Expression exp)
        {
            return new ParameterRebinder(map).Visit(exp);
        }

        protected override Expression VisitParameter(ParameterExpression p)
        {
            ParameterExpression replacement;

            if (map.TryGetValue(p, out replacement))
            {
                p = replacement;
            }

            return base.VisitParameter(p);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:57:18.840

如果你总是想“和”你的谓词，你不需要弄乱表达式树，只需为每个谓词添加额外的 where 子句。请参阅[http://www.thinqlinq.com/Default/Dynamically-extending-LINQ-queryies-without-building-expression-trees.aspx](http://www.thinqlinq.com/Default/Dynamically-extending-LINQ-queryies-without-building-expression-trees.aspx)。

# java - Java 使用 Joda Time 安排活动，例如 Timer

> ID：15296700
> 
> 赞同：3
> 
> 时间：2013-03-08T14:50:10.733
> 
> 标签：java, timer, scheduled-tasks, jodatime

我正在寻找一种每次都进行预定活动的方法。例如，在 hh:00:00 我希望 java 执行命令

```
System.out.println("It's " + hh + " o'clock"); 
```

我以前用 Java 类 Timer 和 Calendar 做过类似的事情，现在我遇到了 Joda Time 库，我想知道 Joda Time 中是否有类似于 Timer 类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T07:12:09.683

这些问题似乎将任务的调度与表示基础日期时间的目的混淆了。如前所述，Quartz 将是调度部分的合适解决方案。

为了尽我所能回答您的问题，从 JodaTime 的角度来看，我可以看到 API 文档中没有 Timer 实现。我倾向于将 JodaTime 视为底层机器时间线的人类表示，即系统时间以可读格式显示的内容。

对于您希望在打印中执行的操作，您可以执行以下操作：

`System.out.println("It's " + new DateTime().hourOfDay() + " o'clock");;`

如果您在 JodaTime 中寻找更多关于时钟/计时器的信息，我能找到的最接近的可能对您有帮助的是有一个`DateTimeUtils.getMillis()`使用底层系统实现的东西，请注意您可以将其更改为您选择的不同计时器/时钟.

```
 /**
     * System millis provider.
     */
    static class SystemMillisProvider implements MillisProvider {
        /**
         * Gets the current time.
         * @return the current time in millis
         */
        public long getMillis() {
            return System.currentTimeMillis();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T08:05:38.330

# ScheduledExecutorService

请参阅 Java 5 及更高版本中内置的 Executor 类。具体来说[`ScheduledExecutorService`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html)。请参阅[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)。

在 StackOverflow 上搜索许多问题和答案，了解更多信息。

# ruby-on-rails - 在这台机器上可用的 gem 中找不到 gem 'jquery-rails (~> 1.1.6) ruby '

> ID：15296704
> 
> 赞同：0
> 
> 时间：2013-03-08T14:50:31.807
> 
> 标签：ruby-on-rails, gemfile, social-stream

我正在尝试用设计来实现社交流。当我执行这个 rails 时，会生成 social_stream:install。我收到错误 Bundler could not find compatible versions for gem "devise": In Gemfile: social_stream (>= 0) ruby​​ depends on devise (~> 1.1.3) ruby

```
devise (2.2.3) 
```

在我捆绑更新之后，错误是这样的

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/cis/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb 
checking for Ruby version >= 1.8.5... yes
checking for gcc... yes
checking for Magick-config... no
Can't install RMagick 2.13.2\. Can't find Magick-config in /home/cis/.rvm/gems/ruby-1.9.3-p125/bin:/home/cis/.rvm/gems/ruby-1.9.3-p125@global/bin:/home/cis/.rvm/rubies/ruby-1.9.3-p125/bin:/home/cis/.rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/cis/.rvm/bin

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/cis/.rvm/rubies/ruby-1.9.3-p125/bin/ruby

Gem files will remain installed in /home/cis/.rvm/gems/ruby-1.9.3-p125/gems/rmagick-2.13.2 for inspection.
Results logged to /home/cis/.rvm/gems/ruby-1.9.3-p125/gems/rmagick-2.13.2/ext/RMagick/gem_make.out

An error occurred while installing rmagick (2.13.2), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.2'` succeeds before bundling. 
```

在解决了我得到的依赖项之后

```
/home/cis/.rvm/gems/ruby-1.9.3-p125/gems/devise-1.1.9/lib/devise.rb:193:in `mailer=': undefined method `ref' for ActiveSupport::Dependencies:Module (NoMethodError)
    from /home/cis/.rvm/gems/ruby-1.9.3-p125/gems/devise-1.1.9/lib/devise.rb:195:in `<module:Devise>'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125/gems/devise-1.1.9/lib/devise.rb:4:in `<top (required)>'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in `require'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in `each'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in `block in require'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in `each'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in `require'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.3.0/lib/bundler.rb:132:in `require'
    from /home/cis/test_app/config/application.rb:7:in `<top (required)>'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.12/lib/rails/commands.rb:24:in `require'
    from /home/cis/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.12/lib/rails/commands.rb:24:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main> 
```

我尝试使用 social_stream 解决 Jquery rails 的依赖关系，但它也没有解决请帮我解决这个错误链

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:04:16.950

Social Stream 目前与 Devise 的最新版本不兼容。欢迎使用补丁。请参阅[https://github.com/ging/social_stream/issues/335上的问题](https://github.com/ging/social_stream/issues/335)

# android - 允许用户在 Android 应用中使用 Facebook、Twitter、Gmail 帐户登录

> ID：15296709
> 
> 赞同：0
> 
> 时间：2013-03-08T14:50:43.773
> 
> 标签：android, android-facebook, android-twitter, android-authenticator

我希望我的应用能够使用 Facebook、Twitter 或 Gmail 登录。我的应用程序不会发布在他们各自的帐户上，只是为我的应用程序授权或创建用户的一种方式。

是否有任何简单的库可以在没有 SDK 或复杂配置的情况下实现这一目标。

任何建议或示例都会非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T15:39:34.883

看看[这个](https://code.google.com/p/socialauth-android/)图书馆。它允许您使用一个简单的库来实现众多社交网站。

> 该 API 支持通过不同的各种社交网络进行用户身份验证和共享更新，并隐藏了生成签名和令牌、进行安全握手的所有复杂性，并提供了一种简单的机制来构建酷炫的社交应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T06:12:13.107

尝试[socialAuth](https://code.google.com/p/socialauth-android/)。它适用于安卓。它也是一个开源的。

# allocation - 在 codechef 问题中，我可以在堆上分配多少数据？

> ID：15296711
> 
> 赞同：-1
> 
> 时间：2013-03-08T14:50:46.443
> 
> 标签：allocation

我可以在 codechef 的解决方案中分配的最大数据量是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:18:59.200

Codechef 使用 SPOJ 服务器。新问题使用 Cube 集群，如此处所述 - [http://www.spoj.com/clusters/](http://www.spoj.com/clusters/)内存限制为 1536 MB。这意味着您在堆上有大量可用内存（占总内存的很大一部分），无需担心任何合理的解决方案。

# regex - 正则表达式之谜

> ID：15296712
> 
> 赞同：4
> 
> 时间：2013-03-08T14:50:57.457
> 
> 标签：regex, perl, vim

我正在调查一个正则表达式之谜。我很累，所以我可能会遗漏一些明显的东西——但我看不出有任何原因。

在下面的示例中，我使用 perl - 但我第一次在 VIM 中看到它，所以我猜测它与多个正则表达式引擎有关。

假设我们有这个文件：

```
$ cat data
1 =2   3 =4
5 =6  7 =8 
```

然后我们可以删除'='前面的空格......

```
$ cat data | perl -ne 's,(.)\s+=(.),\1=\2,g; print;'
1=2   3=4
5=6  7=8 
```

请注意，在每一行中，*匹配的所有实例都被替换*；我们使用了 /g 搜索修饰符，它不会在第一次替换时停止，而是继续替换直到行尾。

例如，'=2' 之前的空格和 '=4' 之前的空格都被删除了；*在同一行*。

为什么不使用更简单的结构，例如 's, =,=,g'？好吧，我们正在为更困难的场景做准备......其中赋值的右侧是带引号的字符串，可以是单引号或双引号：

```
$ cat data2
1 ="2"   3 ='4 ='
5 ='6'  7 ="8" 
```

为了做同样的工作（删除等号前的空格），我们必须小心，因为字符串可能包含等号 - 所以我们标记我们看到的第一个引号，并通过反向引用查找它：

```
$ cat data2 | perl -ne 's,(.)\s+=(.)([^\2]*)\2,\1=\2\3\2,g; print;'
1="2"   3='4 ='
5='6'  7="8" 
```

我们使用反向引用 \2 来搜索与我们第一次看到的引用不同的任何引用（[^\2]*）。然后我们搜索原始报价本身 (\2)。如果找到，我们使用反向引用来引用替换目标中的匹配部分。

现在看看这个：

```
$ cat data3 
posAndWidth ="40:5 ="   height        ="1"
posAndWidth ="-1:8 ='"  textAlignment ="Right" 
```

我们在这里想要的是删除每行中*所有*'=' 实例之前存在的*最后一个空格字符。*和以前一样，我们不能使用简单的 's, =",=",g'，因为字符串本身可能包含等号。

 *所以我们遵循与上面相同的模式，并使用反向引用：

```
$ cat data3 | perl -ne "s,(\w+)(\s*) =(['\"])([^\3]*)\3,\1\2=\3\4\3,g; print;"
posAndWidth="40:5 ="   height        ="1"
posAndWidth="-1:8 ='"  textAlignment ="Right" 
```

它有效......但仅在第一场比赛中！'textAlignment' 后面的空格没有被删除，它上面的空格也没有被删除（'height' 那个）。

基本上，似乎 /g 不再起作用了：在没有 /g 的情况下运行相同的替换命令会产生完全相同的输出：

```
$ cat data3 | perl -ne "s,(\w+)(\s*) =(['\"])([^\3]*)\3,\1\2=\3\4\3,; print;"
posAndWidth="40:5 ="   height        ="1"
posAndWidth="-1:8 ='"  textAlignment ="Right" 
```

似乎在这个正则表达式中， /g 被忽略了。任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:18:26.563

在替换中插入一些调试字符可以解决这个问题：

```
use strict;
use warnings;

while (<DATA>) {
    s,(\w+)(\s*) =(['"])([^\3]*)\3,$1$2=$3<$4>$3,g;
    print;                       #  here -^ -^
}

__DATA__
posAndWidth ="40:5 ="   height        ="1"
posAndWidth ="-1:8 ='"  textAlignment ="Right" 
```

**输出：**

```
posAndWidth="<40:5 ="   height        ="1>"
posAndWidth="<-1:8 ='"  textAlignment ="Right>"
#            ^--------- match ---------------^ 
```

请注意，匹配同时通过两个引号。看起来它`[^\3]*`不会做你认为它做的事情。

正则表达式不是这里最好的工具。使用可以处理带引号的字符串的解析器，例如`Text::ParseWords`：

```
use strict;
use warnings;
use Data::Dumper;
use Text::ParseWords;

while (<DATA>) {
    chomp;
    my @a = quotewords('\s+', 1, $_);
    print Dumper \@a;
    print "@a\n";
}

__DATA__
posAndWidth ="40:5 ="   height        ="1"
posAndWidth ="-1:8 ='"  textAlignment ="Right" 
```

**输出：**

```
$VAR1 = [
          'posAndWidth',
          '="40:5 ="',
          'height',
          '="1"'
        ];
posAndWidth ="40:5 =" height ="1"
$VAR1 = [
          'posAndWidth',
          '="-1:8 =\'"',
          'textAlignment',
          '="Right"'
        ];
posAndWidth ="-1:8 ='" textAlignment ="Right" 
```

我包含了 Dumper 输出，因此您可以看到字符串是如何拆分的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T23:04:44.667

我将详细说明我对 TLP 答案的评论：

ttsiodras 你问了两个问题：

1-为什么你的正则表达式没有产生预期的结果？为什么`g`标志不起作用？

答案是因为您的正则表达式包含`[^\3]`未正确处理的这部分：`\3`不被识别为反向引用。我寻找它，但找不到在字符类中进行反向引用的方法。

2-如何删除等号前面的空格，而留下引号之后和引号之间的部分？

这将是一种方法（请参阅[此参考](https://stackoverflow.com/questions/64904/parsings-strings-extracting-words-and-phrases-javascript)）：

```
$ cat data3 | perl -pe "s,(([\"']).*?\2)| (=),\1\3,g"
posAndWidth="40:5 ="   height       ="1"
posAndWidth="-1:8 ='"  textAlignment="Right" 
```

正则表达式的第一部分捕获引号（单引号或双引号）之间的任何内容并被匹配替换，第二部分对应于等号，前面有您要查找的空格。 **请注意**，此解决方案只是`[^\3]`通过使用非贪婪运算符来解决关于带有反向引用的补码字符类运算符的“有趣”部分`*?`

* * *

最后，如果你想追求[消极的前瞻解决方案](https://stackoverflow.com/questions/8055727/negating-a-backreference-in-regular-expressions)：

```
$ cat data3 | perl -pe 's,(\w+)(\s*) =(["'"'"'])((?:(?!\3).)*)\3,\1\2=\3\4\3,g'
posAndWidth="40:5 ="   height       ="1"
posAndWidth="-1:8 ='"  textAlignment="Right" 
```

方括号之间的引号部分仍然表示`"[\"']"`，但我必须在整个 perl 命令周围使用单引号，否则负前瞻`(?!...)`语法会在 bash 中返回错误。

**编辑**用负前瞻更正了正则表达式：再次注意非贪婪运算符`*?`和`g`标志。

**编辑**考虑到 ttsiodras 的评论：删除了非贪婪运算符。

**编辑**考虑了 TLP 的评论*

# three.js - 三.js如何导入动态组件？

> ID：15296714
> 
> 赞同：0
> 
> 时间：2013-03-08T14:51:08.803
> 
> 标签：three.js

示例此模型是一个动态组件：

[http://sketchup.google.com/3dwarehouse/details?mid=c1e4befdfbfd283135b07d6213c348&prevstart=0](http://sketchup.google.com/3dwarehouse/details?mid=c1e4befdfbfd283135b07d6213c348&prevstart=0)

如何将其导入 Three.js？我在想是否可以导入模型并使用输入字段和一些 javascript 创建动态组件对话框？所以它会像在谷歌草图中一样是交互式的。我知道将 OBJ 文件导入 JSON，然后用 three.js 加载它们，但是动态组件会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:09:39.503

动态组件是 Sketchup 特定的格式，无法将它们原样导入到 Three.js，同时保持动态选项。从 SketchUp 导出时，应该导出动态组件，因为它们可以在 SketchUp 中看到，但作为哑几何，动态性质会丢失。

如果需要交互式模型，您必须在 Three.js 中滚动您自己的动态组件，可能通过使用骨骼动画、变形目标或只是移动几何图形/Object3D 组。或者您可以查看three.js/src/extras/geometries 中的各种类是如何实现的。据我所知，没有简单的方法。

# python - Python 正则表达式从 url 中提取 vimeo id

> ID：15296719
> 
> 赞同：7
> 
> 时间：2013-03-08T14:51:16.513
> 
> 标签：python, regex, url, vimeo

```
embed_url = 'http://www.vimeo.com/52422837'
response = re.search(r'^(http://)?(www\.)?(vimeo\.com/)?([\/\d+])', embed_url)
return response.group(4) 
```

回应是：

```
5 
```

我希望

```
52422837 
```

有人有想法吗？我对正则表达式真的很不好：S

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T14:57:10.623

不要重新发明轮子！

```
>>> import urlparse
>>> urlparse.urlparse('http://www.vimeo.com/52422837')
ParseResult(scheme='http', netloc='www.vimeo.com', path='/52422837', params='',
query='', fragment='')

>>> urlparse.urlparse('http://www.vimeo.com/52422837').path.lstrip("/")
'52422837' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T14:53:14.007

使用`\d+`（无括号）匹配文字斜杠 + 数字：

```
response = re.search(r'^(http://)?(www\.)?(vimeo\.com/)?(\d+)', embed_url) 
```

结果：

```
>>> re.search(r'^(http://)?(www\.)?(vimeo\.com/)?(\d+)', embed_url).group(4)
'52422837' 
```

`[...]`您正在使用不需要的字符组 ( )。该模式与或数字中`[\/\d+]`的一个完全匹配。`/``+`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:56:37.583

要在最后一个斜杠之后获取所有内容（假设有一个），应该使用以下简单的正则表达式：

```
[^/]*$ 
```

（贪婪地抓住所有不是斜线的东西。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:54:17.413

您是否尝试过使用美元 ($) 符号来完成您的正则表达式？

# c# - UseDefaultCredentials 与 Exchange Web 服务

> ID：15296720
> 
> 赞同：3
> 
> 时间：2013-03-08T14:51:17.137
> 
> 标签：c#, exchange-server, exchangewebservices

我是一个相当新的程序员。我在工作中的任务之一是使用我们的自定义工具来创建草稿电子邮件并将它们放入运行该工具的用户的草稿电子邮件文件夹中。我们目前使用 Exchange Server 2010（但正在迁移到 Exchange Online）。

[此链接](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.iewshttpwebrequest.usedefaultcredentials%28v=exchg.80%29.aspx)讨论了 UseDefaultCredentials 但我似乎无法弄清楚如何实现它。我创建了一个名为 service 的 ExchangeService 对象，并使用它作为凭据与我们的 Exchange 服务器进行交互：

service.Credentials = new WebCredentials("我的登录名", "我的密码");

我希望能够从代码中消除它，并让它使用正在使用该工具的登录用户的凭据。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T21:07:06.677

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010);
service.Credentials = new WebCredentials(CredentialCache.DefaultNetworkCredentials); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:27:20.007

如果您使用默认凭据，则可以消除您发布的代码。只需将“UseDefaultCredentials”设置为 True，不要手动设置 Credentials。在这种情况下，将使用运行您的工具的用户的凭据。我自己使用它，它对我有用。

问候，J

# html - 如何获得 svg 文本元素的严格界限？

> ID：15296723
> 
> 赞同：4
> 
> 时间：2013-03-08T14:51:28.230
> 
> 标签：html, svg

我需要 SVG 文本元素的“严格”边界。当我使用 时`getBBox`，我得到的高度似乎包括字体的全部可能字形高度，而不考虑文本中的特定字符。我得到的宽度因浏览器而异，但通常比字符实际占用的长度多几个单位。有没有办法得到一个只包含我文本中的字符的框？

例如，我希望下面创建的矩形紧紧地包裹文本“.....”但是，在返回的边界框中有很多“剩余”垂直空间`getBBox`。谢谢你的帮助。这是我在 StackOverflow 上的第一篇文章，因此我也欢迎对格式/问题演示文稿提出批评。

```
<svg width="400" height="400">
        <text>.....</text>
        <rect style="fill:none;stroke:rgb(0,100,100);stroke-width:1"/>
</svg>

<script type="text/javascript">
    var layout = function() {
        var numB = $("text").get(0).getBBox();
        $("rect").attr("x", 0);
        $("rect").attr("y", 0);
        $("rect").attr("width", numB.width);
        $("rect").attr("height", numB.height);
        $("text").attr("y", numB.height);
    }

    document.onreadystatechange = function () {
        if (document.readyState == "complete") {
            layout();
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:03:51.323

你的问题是现场的，但答案并不容易。

如果您使用的是 SVG 字体，则可以访问字体文件中的指标。它将具有下降器、上升器、基线、xheight 的指标。所以你可以检查你的字符串是否有任何下降（jgqp 等）、大写字母等。它仍然很棘手并且不完全准确。

您可以尝试的第二件事是在画布中呈现相同的文本并检查尺寸。我不知道具体怎么做，应该不会太复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T02:18:50.550

对于遇到此问题的任何其他人，我可能最终会从这个工具中获得我想要的东西：[Font.js](https://github.com/Pomax/lib-font)。我已经能够在 Verdana 中获得单个字符和字符串的像素完美边界。

# mysql - 将带有连接的 mysql 选择查询转换为带有连接的更新查询

> ID：15296730
> 
> 赞同：1
> 
> 时间：2013-03-08T14:51:42.293
> 
> 标签：mysql, sql, sql-update

我有一个这样的选择查询：

```
SELECT n.nid, n.title, n2.nid, n2.title, n2.type
FROM node n
    JOIN og_ancestry o ON n.nid = o.group_nid
    JOIN node n2 ON n2.nid = o.nid 
    JOIN og_access_post a ON o.nid = a.nid
    JOIN content_type_group c ON n.vid = c.vid 
WHERE n.type = 'group'
    AND a.og_public = 1
    AND c.field_tyyppi_value != 'type1' 
```

我不知道如何将其转换为更新查询。我试过这样：

```
UPDATE og_access_post a
    SET a.og_public = 0
FROM node n
    JOIN og_ancestry o ON n.nid = o.group_nid
    JOIN node n2 ON n2.nid = o.nid 
    JOIN og_access_post a ON o.nid = a.nid
    JOIN content_type_group c ON n.vid = c.vid 
WHERE n.type = 'group'
    AND a.og_public = 1
    AND c.field_tyyppi_value != 'type1' 
```

但我收到一个错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'FROM n.nid, n.title, n2.nid 附近使用的正确语法

我找到了一些解决方案，但我需要修改表和连接的顺序。选择查询中的逻辑是正确的，所以对我来说，为了进行更新我必须重新考虑查询的逻辑是没有意义的。

如何在不从根本上改变查询结构的情况下转换我的查询以进行更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:56:41.427

`UPDATE` *with join* in`MYSQL`不使用`FROM`子句，

```
update  og_access_post a 
        JOIN og_ancestry o ON o.nid = a.nid
        JOIN node n ON n.nid = o.group_nid
        JOIN node n2 ON n2.nid = o.nid
        JOIN content_type_group c ON n.vid = c.vid 
SET     a.og_public = 0 
WHERE   n.type = 'group' AND 
        a.og_public = 1 AND 
        c.field_tyyppi_value != 'type1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:57:48.753

```
UPDATE og_access_post a
JOIN og_ancestry o 
    ON o.nid = a.nid
JOIN node n2 
    ON n2.nid = o.nid 
JOIN content_type_group c 
    ON n.vid = c.vid 
SET a.og_public = 0
WHERE n.type = 'group' 
    AND a.og_public = 1 
    AND c.field_tyyppi_value != 'type1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:57:58.247

你需要做类似的事情

```
 update tableA set someColumn = 
        (SELECT someColumn 
            FROM tableA a
            where id=x
         ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T15:05:23.460

一种方法是：

```
UPDATE og_access_post a SET og_public = 0 
WHERE a.{PRIMARY_KEY} IN (SELECT a.{PRIMARY_KEY} FROM 
    node n JOIN og_ancestry o ON n.nid = o.group_nid
    JOIN node n2 ON n2.nid = o.nid 
    JOIN og_access_post a ON o.nid = a.nid
    JOIN content_type_group c ON n.vid = c.vid 
    WHERE n.type = 'group' AND 
    a.og_public = 1 AND c.field_tyyppi_value != 'type1') 
```

我使用了 a.{PRIMARY_KEY} 因为我不知道你的主键是什么。

# ruby - 包括鞋子包中的鞋子

> ID：15296737
> 
> 赞同：35
> 
> 时间：2013-03-08T14:51:54.740
> 
> 标签：ruby, windows, pack, shoes

我在 Windows 的鞋子应用程序中包含鞋子时遇到了问题。当我不要求在应用程序中包含鞋子时，打包工具可以完美运行：`.exe`如果在没有鞋子的计算机上启动，我会下载鞋子，然后按预期运行。

但是，当我要求它包含鞋子时，包装器似乎从一开始就卡在了某些东西上。至少，在[某些其他情况下](https://stackoverflow.com/questions/2365362/ruby-shoes-packager-including-shoes-in-the-app)，打包程序确实会生成可执行文件，即使它不包含 Shoes。在这里，它只是冻结。

我什至尝试了[这里](https://stackoverflow.com/questions/3252412/can-shoes-rb-create-self-contained-applications)提出的解决方案，但我无法管理建筑鞋。克隆`rubyinstaller`存储库并下载必要的元素后，该`rake`命令会过早中止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-20T08:43:15.997

**安装程序**可能已损坏或可能包含一些丢失的文件。因此，最好下载另一个并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T18:57:32.073

可能是安装程序本身有问题。尝试其他打包软件。对于 Windows 来说最棒的是[这里](http://nsis.sourceforge.net/Main_Page)的 NSIS 。它有一个简单的脚本，可以帮助您使您的安装程序更具适应性。

您可以搜索该产品的旧版本。

# powershell - 远程转换成 CSV 格式的 Hyper-V 服务器列表？

> ID：15296744
> 
> 赞同：0
> 
> 时间：2013-03-08T14:52:03.150
> 
> 标签：powershell, virtual-machine, hyper-v

我认为这很容易，但想确保它是可能的。

有没有一种简单的方法可以获取机器上所有 Hyper-V 服务器/VM 的列表，并将其导出到 CSV 文件？（Excel电子表格）。

Get-VM 返回相当多的信息，但有什么方法可以拆分吗？也许将它们存储到一个数组中？

这是我第一次使用 powershell，所以我主要想确保这是一项容易完成的任务。

问题是.....这台机器是 Windows 2008 Server R2，我相信它不支持 Hyper-V 模块（我认为只有 Win 8 支持）......所以我一直在远程处理它...... .so我可以使用Powershell远程进入它并运行这个脚本吗？

我尝试使用 Invoke-Command 从命令行执行 Get-VM，但它抱怨 File-Path ....但我只是想从命令行执行 Get-VM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:32:02.640

在我看来，您需要先采取一些较小的步骤。在这种情况下，我会避免使用 PowerShell 远程处理。如果您在 PowerShell 会话中安装并加载了模块，您应该能够指向远程主机来运行 Get-VM，而无需做任何疯狂的事情。

至于过滤 CSV 的输出，您应该使用 Select（选择对象的某些属性并忽略其他属性）和 Where-Object（根据对象的属性过滤显示的对象。

```
Get-VM -ComputerName HyperVHost.constoso.local | Where-Object {$_.OS -match "2008"} | Select Name, Host | ExportTo-CSV C:\csv.csv 
```

上面的例子是虚构的，但它是我在将输入放入 CSV 之前用来过滤输入的语法。同样，听起来您需要对如何使用管道有更基本的了解，了解使用对象时必须使用哪些选项等。

# java - 使用 JNI Java 类的 DLL

> ID：15296752
> 
> 赞同：1
> 
> 时间：2013-03-08T14:52:22.963
> 
> 标签：java, c++, dll, java-native-interface

我正在编写一个 C++ dll（Visual Studio 中的文件扩展名是 .cpp，但代码是 C），它使用 JNI 加载和调用一些 Java 类的实例方法。因此，我的项目由 C++ 源文件和头文件以及一些 Java 类文件（通过 JNI 使用的 Java 对象的类文件）组成。我想创建一个 dll 库，其中还包括“在单个包中”的 Java 类文件。是否可以将 C 和 Java 文件都放入 dll 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:49:00.473

这是完全可能的，尽管不一定是直观的。我没有测试过这个，但我想如果你知道你在做什么，它会很容易工作。

首先，您将需要一种方法将类文件的二进制文件打包到您拥有的本机二进制文件中，然后当然能够在任何时间点无缝读取该块。如何实现这一点取决于您自己，没有真正*的“正确方法”*可以做到。

话虽如此，如果您可以获得 .class 文件数据所在内存的句柄（在加载 DLL 之后）并将其作为`byte[]`or传递给 Java `[ByteBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)`，那么您将希望使用任何一个`[ClassLoader](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html)`'s`[defineClass](http://tinyurl.com/defineClassSO)`重载以及一个电话`[findLoadedClass](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#findLoadedClass%28java.lang.String%29)`，然后终于`[loadClass](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#loadClass%28java.lang.String%29)`。

这将允许您从几乎任何数据源加载类。正如我之前提到的，如何存储/检索类的本机数据取决于您。

# javascript - highcharts 中单独着色的数据范围

> ID：15296753
> 
> 赞同：0
> 
> 时间：2013-03-08T14:52:22.947
> 
> 标签：javascript, highcharts

我的 highchart 中有一个 columnrange 系列，我希望能够为系列中的每个范围设置特定的颜色。只要我只使用一种颜色，就可以正常工作：

```
data: [[1, 5, 10], [2, 10, 20]] 
```

这里每个列表中的第一个值是 X，接下来的两个是 Y 范围的开始和结束。为了为每个范围使用单独的颜色，我认为我需要使用“对象表示法”而不是数组表示法，所以我尝试了这个：

```
data: [{ 
    x: 1,
    y: [5,10],
    fillColor: "red"
},{
    x: 2,
    y: [10,20],
    fillColor: "blue"
}] 
```

然而，这不起作用（得到无效值）。我看不到 API 文档涵盖了这种情况：http: [//api.highcharts.com/highcharts#series.data](http://api.highcharts.com/highcharts#series.data)

有谁知道我如何使用对象表示法获得范围（两个 Y 值），或者是否有另一种方法可以对范围进行不同的着色？PS：我的 Y 值实际上是日期范围，但我只是为上面的示例简化了它。

编辑：这是一个 jsfiddle，展示了我试图实现的目标：http: [//jsfiddle.net/Q2JMF/1/](http://jsfiddle.net/Q2JMF/1/)。如果您将类型更改为“列”，并将 y 值更改为单个整数，您会发现它工作正常。但是使用 columnrange 我无法让它工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T12:16:26.607

正确的选项是`low`and `high`，请参阅：http: [//jsfiddle.net/Q2JMF/2/](http://jsfiddle.net/Q2JMF/2/)

```
data: [{ 
  x: 1,
  low: 7,
  high: 8,
  color: "red"
}, {
  x: 2,
  low: 6,
  high: 7,
  color: "blue"
}] 
```

# php - PHP - 如何确定英文字母中字符的数字顺序值？

> ID：15296759
> 
> 赞同：0
> 
> 时间：2013-03-08T14:52:49.800
> 
> 标签：php, converter, typeconverter

在不使用循环的情况下，是否有一种方法（函数）可以将例如字母“c”转换为其字母表中的数字序列（3）？

我正在尝试获取一个文字字符串 -`$var = "c"`并将一个函数应用于它返回`3`.

是否有任何内置的 PHP 函数可以做到这一点？我在网上找不到任何东西，如有必要，宁愿避免编写该函数。

有人知道这样的转换功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:57:47.890

[是的。](http://www.php.net/manual/en/function.ord.php)

```
$alphabet_position = ord(strtoupper($character)) - ord('A'); 
```

# api - 是否可以通过 LinkedIn API 接收工作申请？

> ID：15296761
> 
> 赞同：3
> 
> 时间：2013-03-08T14:52:54.730
> 
> 标签：api, linkedin

我看到了有关如何发布工作、申请工作和搜索工作的 LinkedIn 文档。但我很好奇是否可以在 LinkedIn 上正常发布工作，然后在人们申请时**收到API 通知。**换句话说，我想与应用程序集成，而不是与职位发布。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:18:13.817

是的，这是可能的，您希望将收到的工作申请与您自己的申请人跟踪系统集成。查看[处理工作应用程序开发人员文档](http://developer.linkedin.com/apply-processing-applications)以获取更多详细信息。

# ssis - 如何使用 SSIS 表达式将格式为 yyyyMMdd 的字符串转换为日期？

> ID：15296769
> 
> 赞同：16
> 
> 时间：2013-03-08T14:53:13.623
> 
> 标签：ssis

我在 csv 中有一个日期*`20130131`*，我试图将其转换为*`2013-13-01`*在 SSIS 中使用派生列。我用过这个表达式，但它似乎不起作用。

> (DT_DBTIMESTAMP)(SUBSTRING(DATE_DECISION_TO_REFER,1,2) + "-" + SUBSTRING(DATE_DECISION_TO_REFER,3,2) + "-" + SUBSTRING(DATE_DECISION_TO_REFER,5,2))

如何重写此表达式以生成具有数据类型值的正确输出`DT_DBTIMESTAMP`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-10-19T05:57:19.140

[Fast Parse](https://msdn.microsoft.com/en-us/library/ms139833.aspx)是一个更优雅的解决方案

1.  添加**数据转换**数据流组件。
2.  右键单击，显示高级编辑器...
3.  转到输入和输出属性
4.  展开数据转换输出并单击日期列
5.  **在自定义属性中将 FastParse**设置为 True
6.  确保数据类型设置为**数据库日期 [DT_DBDATE]**
7.  再次运行 ssis 包，yyyymmdd 日期应该从**nvarchar**顺利流向**日期**

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-08T15:10:14.187

根据*凯尔黑尔*的建议，以下是我的回答

```
 SUBSTRING([DATE_DECISION_TO_REFER],1,4) + "-" +
 SUBSTRING([DATE_DECISION_TO_REFER],5,2) + "-" + SUBSTRING([DATE_DECISION_TO_REFER],7,2) 
```

为了教育你，让你永远不会再遇到这个问题，这就是表达的工作原理

```
 Get 4 characters from DATE_DECISION_TO_REFER starting at position 1, add a dash,
 get 2 characters from DATE_DECISION_TO_REFER starting at position 5,
 add a dash then add 2 characters from DATE_DECISION_TO_REFER starting at position 7. 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-08T15:01:32.537

### 表达：

您应该使用表达式将日期格式化为*`yyyy-MM-dd`*如下所示。此表达式将输入值格式化`20130131`，`2013-01-31`然后转换为适当的数据类型。该表达式使用名为 的传入列`Column0`。

> (DT_DBTIMESTAMP)(SUBSTRING(Column0,1,4) + "-" + SUBSTRING(Column0,5,2) + "-" + SUBSTRING(Column0,7,2))

### 问题：

您的表达式正在获取 value *`20130131`*，然后错误地将其转换为 value *`20-13-01`*。这是日期的无效格式，因此表达式无法将其类型转换为`DT_DBTIMESTAMP`数据类型。

# c# - 不实现 IEnumerable

> ID：15296774
> 
> 赞同：0
> 
> 时间：2013-03-08T14:53:28.367
> 
> 标签：c#, entity-framework

这是我的消息类：

```
public class SMessage
{

    public int AccountId { get; set; }

    public int MessageId { get; set; }

    public string str{ get; set; }
    public string Subject { get; set; }
    public int sendByAccountId { get; set; }
    [ForeignKey("sendByAccountId")]
    public virtual AccountModels account { get; set; }

} 
```

这是我的 dto 课程：

```
public class MessageInformation
{
    public string Subject { get; set; }
    public string str { get; set; }    
} 
```

这是我在存储库中的方法：

```
public List<MessageInformation> GetAllMessagesForUser(int accountId)
{
    MessageInformation messages
    using (SishanContext Context = new SishanContext())
    {
         messages = (from m in Context.SMessages.ToList()
                    where m.AccountId == accountId
                    select new MessageInformation
                    {
                       m.Subject,
                       m.str
                    }).ToList();
    }
    return messages;
} 
```

但是，我有一个错误：

> 无法使用集合初始化程序初始化类型“sishan.Models.MessageInformation”，因为它没有实现“System.Collections.IEnumerable”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:56:05.663

您应该在初始化程序中命名属性，如下所示：

```
...
select new MessageInformation {
    Subject = m.Subject,
    str = m.str
} 
```

或者，您可以提供一个有两个参数的构造函数，并调用它：

```
public class MessageInformation {
    public string Subject { get; set; }
    public string str { get; set; }
    public MessageInformation(string subj, string str) {
        Subject = subj;
        this.str = str;
    }
}
...
select new MessageInformation(m.Subject, m.str) 
```

# c# - 我如何使用 C# 4.0 Regex 获取字符串的一部分

> ID：15296776
> 
> 赞同：0
> 
> 时间：2013-03-08T14:53:37.093
> 
> 标签：c#, asp.net, .net, regex, c#-4.0

```
<a href="http://www.try.com"><strong>Try link word</strong></a> 
```

你好。我怎样才能把这个字符串的一部分

**[http://www.try.com](http://www.try.com)**和**尝试链接词**

使用 c# 4.0 正则表达式？

我尝试了这个，但没有奏效；

```
var expression = @"<a href=""(.*?)""><strong>(.*?)</strong>";
                        Match m = Regex.Match(text, expression);
                        while (m.Success)
                        {
                            Response.Write("Match: " + m.Groups[0] + " <br> Area code: " + m.Groups[1] +"<br><hr><br>");
                            m = m.NextMatch();
                        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:06:03.340

我尝试了您的代码并得到了这个：

`Match: <a href="http://www.try.com"><strong>Try link word</strong> <br> Area code: http://www.try.com<br><hr><br>`

（psst，下次你有一些“不起作用”的代码时，把你在你的问题中得到的，以及你期望的）。

改变：

`Response.Write("Match: " + m.Groups[0] + " <br> Area code: " + m.Groups[1] +"<br><hr><br>");`

到

`Response.Write("Match: " + m.Groups[1] + " <br> Area code: " + m.Groups[2] +"<br><hr><br>");`

给我这个：

`Match: http://www.try.com <br> Area code: Try link word<br><hr><br>`

那是你想要的吗？

# image - Image percentWidth 100 高度保持原始图像高度（边距）

> ID：15296777
> 
> 赞同：0
> 
> 时间：2013-03-08T14:53:37.367
> 
> 标签：image, actionscript-3, apache-flex, flex4.5

下面的代码发生的情况是，图像宽度按预期缩放到 100%，高度也按预期缩放，保持纵横比正确。问题是底部有一个边距，这似乎是图像原始 contentHeight 的高度。我怎样才能摆脱它？

我正在使用百分比，以便在设备方向更改时进行缩放。

```
backdrop.source = "http://cf2.imgobject.com/t/p/" + "w342" + data.backdrop;
backdrop.scaleMode = "letterbox";
backdrop.horizontalAlign = "left";
backdrop.verticalAlign = "top";
backdrop.smooth = true;
backdrop.percentWidth = 100; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:34:07.073

您的问题的答案是不要使用该`letterbox`设置。这将保留纵横比并制作黑色区域，因此名称为信箱:)

尝试设置`scaleMode`为`zoom`。正如[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Image.html#scaleMode)所述，缩放将导致一个轴被剪裁。这应该缩放图像，保持纵横比，但剪裁图像的一些边缘以避免出现黑色区域​​。

此问题的其他解决方案是：

*   在 Flash 之外修改原始图像
*   使用遮罩来获得`zoom`设置将提供的类似结果。在这种方法中，您可以使图像更大，但随后将方形蒙版应用于图像。蒙版只显示正方形部分……剪掉蒙版之外的部分。
*   （在大多数情况下不受欢迎）使用（并指定宽度/高度）的`scaleMode`设置，`strectch`以便填充区域，这不会保留纵横比

PS：如果图像的纵横比不是正方形，则无法避免黑色区域。即使使用 HTML/CSS。这只是数学/几何。同样的事情发生在 HTML 中——图像要么被拉伸，要么被剪裁，或者不会填充两个维度。

**[编辑]**

PPS：另一种想法，如果您知道图像的原始纵横比，则计算一个最接近所需宽度的新宽度，但自然会保留宽高纵横比。

例如，宽高比为 4:3。您想要的宽度是 500 像素。使用交叉产品你会得到这个：

```
4      500
-   =   -
3       x 
```

使用叉积可以得到等式：

```
4x = 3*500 
```

现在解决`x`：

```
x = 3*500/4 = 375 
```

因此，如果原始宽高比为 4:3，则可以设置宽 500 高 375 来缩放图像并且没有任何黑色区域。您甚至可以编写动态计算纵横比的代码，并应用此逻辑来很好地缩放某些东西。关键是在缩放图像时必须注意纵横比以避免“黑色”区域。

# php - 从 CodeIgniter 中的视图加载关系数据

> ID：15296779
> 
> 赞同：1
> 
> 时间：2013-03-08T14:53:39.530
> 
> 标签：php, codeigniter, orm, lazy-loading

我正在使用 CodeIgniter

我有两张桌子 -

**公司** int id , varchar 名称

**员工**int id, varchar name , int company_id

我有一个简单的控制器，叫做员工控制器

```
<?php 

class Employees extends CI_Controller {

    public function index()
           {

----
----
$data['employees'] = $selected_employees;
$this->load->view('employees/index',$data);
}

} 
```

该控制器将一个Employees 数组传递给视图。所以在我看来，我可以自由使用 employees[4].name , employees[3].id 等

现在如果我想显示员工的公司名称，似乎唯一的方法是控制器应该将另一个带有公司名称的数组传递给视图。有没有更好的方法来实现这一点 - 这样控制器就不必明确地发送数据？

例如 - 比如说我想访问 employees[4].company.name 我被 Rails 宠坏了。我曾经认为这些是理所当然的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T15:47:31.553

解决此问题的最佳方法是在 SQL 查询中使用连接语句。SQL 查询通常如下所示：

```
SELECT * FROM Employee JOIN Company ON Employee.company_id = Company.id 
```

然而，CodeIgniter 的活动记录类将帮助我们简化这一点（参见[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)）。在您的模型中，您可以像这样编写查询：

```
$this->db->select('*');
$this->db->from('Employee');
$this->db->join('Company', 'Employee.company_id = Company.id');
$query = $this->db->get(); 
```

您可以调整它以选择您想要的确切数据，就像任何 SQL 查询一样：

```
$this->db->select('Employee.id, Employee.name, Employee.company_id, Company.name AS company_name'); 
```

您还可以添加左、右、外、内、左外或右外作为`$this->db->join()`函数的第三个参数，以允许左连接、右连接等。

I would recommend using the Active Record class when possible in your CodeIgniter applications. It will help keep your queries clean, organized, and readable.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T15:33:43.327

加入您的模型

```
public function get_ selected_employees(){
    $this->db->select('Employee.*, Company.name as company_name');
    $this->db->from('Employee');
    $this->db->join('Company', 'Employee.company_id = Company.id');
    return $this->db->get()->result();
} 
```

要获得公司名称，只需执行 employees[4].company_name

# python - Tkinter python代码中的无限循环

> ID：15296781
> 
> 赞同：0
> 
> 时间：2013-03-08T14:53:42.627
> 
> 标签：python, tkinter

我正在尝试运行一个简单的 Tkinter 程序，当您单击一个按钮时它会打开一个程序。代码如下所示。我使用命令调用程序，然后调用 fortran 程序。但是，当我单击按钮时，它会打开程序，但我正在调用的程序菜单进入无限循环......违规代码似乎在 button1Click 模块中。

任何帮助是极大的赞赏。

谢谢

```
from Tkinter import * 
import os, sys 
from win32com.client import Dispatch 
xlApp=Dispatch('Excel.Application') 
_PSSBINPATH=r"C:\Program Files\PTI\PSSE32\PSSBIN" 
os.environ['PATH']=_PSSBINPATH+';'+os.environ['PATH'] 
sys.path.insert(0,_PSSBINPATH) 
import redirect; redirect.psse2py() 
import psspy 

class MyApp: 
    def __init__(self, parent): 
        self.myParent = parent  ### (7) remember my parent, the root 
        self.myContainer1 = Frame(parent) 
        self.myContainer1.pack() 

        self.button1 = Button(self.myContainer1) 
        self.button1.configure(text="OK", background= "green") 
        self.button1.pack(side=LEFT) 
        self.button1.bind("<Button-1>", self.button1Click) ### (1) 

        self.button2 = Button(self.myContainer1) 
        self.button2.configure(text="Cancel", background="red") 
        self.button2.pack(side=RIGHT) 
        self.button2.bind("<Button-1>", self.button2Click) ### (2) 

    def button1Click(self,event):    ### (3) 
        psspy.runiplanfile(r"C:\MNTACT\Contingency Program\work\contingency-31-4.irf") 
        if self.button1["background"] == "green": ### (4) 
            self.button1["background"] = "yellow" 
        else: 
            self.button1["background"] = "green" 

    def button2Click(self, event):  ### (5) 
        self.myParent.destroy()     ### (6) 

root = Tk() 
myapp = MyApp(root) 
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:53:53.637

是什么让您认为发生了无限循环？我在 button1Click 中看不到循环，除非循环位于`runiplanfile`. 您是否使用“无限循环”来简单地表示 GUI 已停止响应？

Tkinter 是单线程的，只能通过事件循环处理事件。如果一个事件需要很长时间来处理，GUI 将挂起，直到该事件的处理完成。如果您正在执行一个外部进程并等待它完成，那么您的 GUI 将似乎被冻结，直到该进程完成。

# c# - 转换类 其中 T : IMySampleInterface 到类

> ID：15296784
> 
> 赞同：4
> 
> 时间：2013-03-08T14:53:51.720
> 
> 标签：c#

是否可以转换`Class<T> Where T : IMySampleInterface`为`Class<IMySampleInterface>`

例子：

```
public abstract class AbstractCommunication: ICommunication
{
    private ICommunicationCallback<ICommunication> callback = null;
    public void registerCommunicationCallback<T>(ICommunicationCallback<T> callback) where T : ICommunication
    {
        this.callback =  (ICommunicationCallback<ICommunication>)callback; //<--DOESNT WORK
    }
} 
```

在我的示例中，发生以下异常：`System.InvalidCastException`

编辑：

```
public interface ICommunicationCallback<T> where T : ICommunication
{
    void onCommunicationCallback(T sender, String data);
} 
```

为什么我要使用这种方式：如果我有一个基类应该实现例如两个回调，那么我可以简单地使用以下内容：

```
public class TestClass : ICommunicationCallback<TestClass1>, ICommunicationCallback<TestClass2> 
```

测试类1：

```
public class TestClass1: AbstractCommunication
{

} 
```

测试类2：

```
public class TestClass2: AbstractCommunication
{

} 
```

编辑：“如果 T 始终是 ICommunication，那么为什么要保持其通用性？—— Davin Tryon 20 分钟前”我此时锁定

好的，没有泛型，我得到了相同的错误，但不同`System.InvalidCastException`：（这就是我首先使用泛型的原因——我现在记得了）

```
 public class DocumentTest : ICommunicationCallback<GetDocumentData>
    {
     public void callAsync()
{
     CommunicationFactory comFactory = new CommunicationFactory(communicationServiceClient);
                GetDocumentData getDocumentData = (GetDocumentData)comFactory.createCommunicationObject(CommunicationFactory.ENTITY_TYPE.GET_DOCUMENT_DATA,(ICommunicationCallback<ICommunication> ) this);

}

}

public interface ICommunicationCallback<ICommunication> 
{
    void onCommunicationCallback(ICommunication sender, String data);
} 
```

我认为在我的情况下使用泛型是唯一的解决方案 - 请参阅：“此功能仅适用于泛型接口和委托。如果您实现变体泛型接口，实现类仍然是不变的。类和结构不支持 C# 4.0 中的变化。所以以下内容无法编译： // List 实现了协变接口 // IEnumerable。但类是不变的。List list = new List(); // 此处出现编译器错误。" （[http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:12:58.187

```
interface ICommunication
{
}

interface ICommunicationCallback<T>
{
}

class AbstractCommunicationCallback<T> : ICommunicationCallback<T>
{

}

abstract  class AbstractCommunication : ICommunication
{
    private ICommunicationCallback<ICommunication> callback = null;
    public void registerCommunicationCallback<T>(ICommunicationCallback<T> callback) where T : ICommunication
    {
        this.callback = (ICommunicationCallback<ICommunication>)callback; //<--DOESNT WORK
    }
}

class Communication : AbstractCommunication { 
} 
```

和测试方法

```
public void Test()
    {
          AbstractCommunication comm = new Communication();
         AbstractCommunicationCallback<ICommunication> callback = new AbstractCommunicationCallback<ICommunication>();
        comm.registerCommunicationCallback(callback);
    } 
```

在 .net 框架 4 与 2010 上正常工作

编辑：一些有趣的信息[http://msdn.microsoft.com/en-us/library/ee207183.aspx](http://msdn.microsoft.com/en-us/library/ee207183.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:33:05.847

我解决了我的问题。但我没有使用泛型——我使用 ICommunication 接口。

```
public interface ICommunicationCallback
{
    void onCommunicationCallback(ICommunication sender, CommunicationResultObject result);
} 
```

在我看来，这个解决方案并不是那么优雅，但它确实有效。

# imagemagick - 将边框图像调整为覆盖在另一个图像上

> ID：15296785
> 
> 赞同：1
> 
> 时间：2013-03-08T14:53:54.863
> 
> 标签：imagemagick, graphicsmagick

使用 Imagemagick。

目标是用透明边框图像 B 覆盖图像 A。

“主”图像 A 具有以下尺寸：

```
identify examples/1.jpg 
examples/1.jpg JPEG 1936x1296 1936x1296+0+0 8-bit DirectClass 1.231MB 0.000u 0:00.000 
```

透明边框图片B：

```
identify examples/images/rahmen/basic/frame.png 
examples/images/rahmen/basic/frame.png PNG 3508x2480 3508x2480+0+0 8-bit DirectClass 60.8KB 0.000u 0:00.000 
```

可以看到边框图片比主图大

我们用

```
composite -resize 1936x1296 \
examples/images/rahmen/basic/frame.png \
images/1.jpg \
output.jpg 
```

用于生成叠加层。

生成的图像具有边框，但边框图像不会填满图像边框，而是显示在原始图像内部。

[http://s16.postimage.org/t3vfpv7lx/image.jpg](http://s16.postimage.org/t3vfpv7lx/image.jpg)

那么如何使用 imagemagick 将边框图像调整/缩小到主图像的确切尺寸？

# actionscript-3 - AS3 生成不同的敌人和子弹命中测试问题

> ID：15296786
> 
> 赞同：1
> 
> 时间：2013-03-08T14:53:59.427
> 
> 标签：actionscript-3, flash, instance, creation, hittest

我正在创建一个带有 4 种不同类型的敌人和 3 种不同类型的子弹的 2d 横向滚动射击游戏。我正在使用工厂类来创建敌人，并在 for 循环中使用 for 循环来进行命中测试。当我出于某种原因运行我的代码时，当一个敌人被击中时，我的其他一些敌人死亡。有人可以帮我找到并解决我的问题。

这是 Enemy 类之一。除了 var 值不同之外，其他 3 个是相同的。

```
package char {

import flash.display.MovieClip;
import flash.events.Event;
import flash.display.Stage;

public class Enemy1 extends MovieClip {

    private var _type:String;
    private var _health:Number;
    private var _vx:Number;
    private var _vy:Number;
    private var _stage:Stage;

    private static var _instance:Enemy1;

    public function Enemy1() {
        init();
    }

    private function init():void {
        //Vars
        _vx = -5;
        _vy = Math.random()*5;
        _health = 1;
        _stage = Main.getStage();
        _instance = this;

        //Listeners
        addEventListener(Event.ADDED_TO_STAGE, onAdded);
        addEventListener(Event.ENTER_FRAME, enemyLoop);
        addEventListener(Event.REMOVED_FROM_STAGE, onRemoved);
    }

    //When Added
    private function onAdded(event:Event):void{
        //Set position
        this.x = _stage.stageWidth;
        this.y = Math.random() * _stage.stageHeight;
        //trace("Enemy created");

        dispatchEvent(new Event("enemyCreated", true));
    }

    //Loop
    private function enemyLoop(event:Event):void {
        //Move
        x += _vx;
        y += _vy;

        //Boundaries
        if ( this.y <= 0 + this.height/2){
            this.y = this.height/2;
            _vy *= -1;
        }
        if ( this.y >= _stage.stageHeight - this.width/2){
            this.y = _stage.stageHeight - this.width/2;
            _vy *= -1;
        }

        //Health cheack
        if ( _health <= 0){
            if (this.parent) {
                this.parent.removeChild(this);
                Main.setScore(10);
            }
        }
        //Leaves screen
        if (this.x <= -this.width){
            if (this.parent) {
                this.parent.removeChild(this);
            }
        }
    }

    public function isHit(type:String):void{
        //trace(this + " is hit by " + type);
        if(type == "power"){
            _health -= 1;
            trace(_health);
        }
        else if(type == "quick"){
            _health -= 1;
            trace(_health);
        }
        else if(type == "strong"){
            _health -= 1;
            trace(_health);
        }
    }

    public function getHealth():Number{
        return _health;
    }

    public function getEnemy1():Enemy1{
        return _instance;
    }

    //When Removed
    private function onRemoved(event:Event):void {
        removeEventListener(Event.ADDED_TO_STAGE, onAdded);
        removeEventListener(Event.ENTER_FRAME, enemyLoop);
        removeEventListener(Event.REMOVED_FROM_STAGE, onRemoved);
        //trace("enemy removed");
    }
}

} 
```

这是我检查所有 hitTests 的主要课程

```
package screen {

import flash.display.MovieClip;
import flash.events.Event;
import com.greensock.TweenLite;
import com.greensock.easing.*;
import char.Player;
import char.EnemyFactory;

public class Level1 extends MovieClip {
    //Consts
    private const ENEMY_CHANCE:Number = 0.025;

    //Vars
    private var _player:Player;
    private var _enemyBudget:Number = 20;
    private static var _bullets:Array = [];
    private static var _enemies:Array = [];

    public function Level1() {
        init();
    }

    private function init():void {
        //Vars
        this.alpha = 0;
        _enemyBudget = 20;

        //Event listeners
        addEventListener(Event.ENTER_FRAME, levelLoop);
        addEventListener(Event.ADDED_TO_STAGE, onAdded);
        addEventListener(Event.REMOVED_FROM_STAGE, onRemoved);

        //Add This
        Main.getInstance().addChild(this);
    }

    private function onAdded(event:Event):void {
        TweenLite.to(this, 0.5, {alpha:1});
        _player = new Player();
        trace("Level 1 reaady");
    }

    private function levelLoop(event:Event):void{
        //Health bar
        _healthBar.scaleX = Main.getPlayerHealth() / 100;

        //enemy creation
        if(_enemyBudget <= 20 && _enemyBudget > 10){
            if (ENEMY_CHANCE > Math.random()){
                var randomEnemy:Number = Math.random()* 1.2;
                //trace(randomEnemy);
                if(randomEnemy <= 0.5){
                    //trace("Enemy 1");
                    var enemy1:MovieClip = char.EnemyFactory.makeEnemy("weak");
                    Main.getInstance().addChild(enemy1);
                    _enemyBudget -= 1;
                }
                else if(randomEnemy > 0.5 && randomEnemy <= 0.8){
                    //trace("Enemy 2");
                    var enemy2:MovieClip = char.EnemyFactory.makeEnemy("quick");
                    Main.getInstance().addChild(enemy2);
                    _enemyBudget -= 3;
                }
                else if(randomEnemy > 0.8 && randomEnemy <= 1){
                    //trace("Enemy 3");
                    var enemy3:MovieClip = char.EnemyFactory.makeEnemy("strong");
                    Main.getInstance().addChild(enemy3);
                    _enemyBudget -= 3;
                }
                else if(randomEnemy > 1 && randomEnemy <= 1.2){
                    //trace("Enemy 4");
                    var enemy4:MovieClip = char.EnemyFactory.makeEnemy("power");
                    Main.getInstance().addChild(enemy4);
                    _enemyBudget -= 4;
                }
            }
        }

        else if(_enemyBudget <= 10 && _enemyBudget > 0){
            if (ENEMY_CHANCE > Math.random()){
                var randomEnemy:Number = Math.random();
                if(randomEnemy <= 0.5){
                    //trace("Enemy 1");
                    var enemy1:MovieClip = char.EnemyFactory.makeEnemy("weak");
                    Main.getInstance().addChild(enemy1);
                    _enemyBudget -= 1;
                }
                else if(randomEnemy > 0.5 && randomEnemy <= 0.8){
                    //trace("Enemy 2");
                    var enemy2:MovieClip = char.EnemyFactory.makeEnemy("quick");
                    Main.getInstance().addChild(enemy2);
                    _enemyBudget -= 3;
                }
                else if(randomEnemy > 0.8 && randomEnemy <= 1){
                    //trace("Enemy 3");
                    var enemy3:MovieClip = char.EnemyFactory.makeEnemy("strong");
                    Main.getInstance().addChild(enemy3);
                    _enemyBudget -= 3;
                }
            }
        }

        else if(_enemyBudget <= 0){
            if(_enemies == []){
                trace("Game End");
            }
        }

        if( Main.getPlayerHealth() <= 0){
            trace("Player Dead. End Game");
        }

        for (var i:int = 0; i < _enemies.length; i++){
            for(var j:int = 0; j < _bullets.length; j++){
                if(_bullets[j] != null && _enemies[i] != null){
                    //Check if bullet hits enemy
                    if(_bullets[j].hitTestObject(_enemies[i])){
                        //removes bullet
                        if (_bullets[j].parent) {
                            _bullets[j].parent.removeChild(_bullets[j]);
                        }

                        //Tells enemy he's hit
                        if(_enemies[i] != null){ 
                            _enemies[i].isHit(_bullets[j].getType());
                        }

                        //Checks enemy health
                        if(_enemies[i].getHealth() <= 0){
                            if(_enemies[i] == null){
                                _enemies.splice(i, 1);
                                i--;
                            }
                        }   

                        //Removes bullet from array
                        if(_bullets[j] == null){
                            _bullets.splice(j, 1);
                            j--;
                         }
                    }

                    //Check if player hit
                    if(_enemies[i] != null && _player != null){
                        if(_enemies[i].hitTestObject(_player)){
                            if (_enemies[i].parent) {
                                _enemies[i].parent.removeChild(_enemies[i]);
                                Main.setPlayerHealth(-10);
                            }
                        }

                        if(_enemies[i] == null){
                            _enemies.splice(i, 1);
                            i--;
                        }
                    }
                }
            }
        }
    }

    private function onRemoved(event:Event):void{
        removeEventListener(Event.ENTER_FRAME, levelLoop);
        removeEventListener(Event.ADDED_TO_STAGE, onAdded);
        removeEventListener(Event.REMOVED_FROM_STAGE, onRemoved);
    }

    //Get instance
    public static function addBullet(bullet:MovieClip):void {
        _bullets.push(MovieClip(bullet));
    }

    public static function addEnemy(enemy:MovieClip):void{
        _enemies.push(MovieClip(enemy));
        //trace(enemy + " was added to enemy array.");
    }
}

} 
```

这是 Bullet 类中返回它的类型的函数。

```
public function getType():String{
        return TYPE;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:47:09.823

很难肯定地说，这很容易通过在调试器中单步执行代码来确认。

但是在我看来可疑的是你正在迭代敌人/子弹的数组，并且在这样做的过程中，你从数组中删除元素并减少计数器变量。通常，当您需要迭代某事物并可能从您正在迭代的事物中删除元素时，您应该以向后的方式进行迭代。这样在循环中间改变数组的长度和内容是无害的。

```
for (var i:int = enemeies.length -1; i >= 0; i--)
{
    // do your stuff and remove elements from the
    // enemies array at will ... just splice the current
    // element at index i out here, don't decrement i as
    // you've done in your code above it will get decremented
    // by the for loop
} 
```

# perl - TCP 客户端使用 Perl fork() + system() 挂起

> ID：15296788
> 
> 赞同：1
> 
> 时间：2013-03-08T14:54:05.760
> 
> 标签：perl, sockets

我有一个通过 Net::Server 模块运行 TCP 侦听器的 perl 脚本。当远程连接到 perl 服务器时，远程发送一个要播放的 mp3 音乐文件的文件名。当我 fork() 然后调用 system('mpg123 $filename') 时，客户端挂起。如何使 mpg123 进程成为后台，以便孩子可以关闭连接？

```
my $pid = fork();

      if (defined $pid && $pid == 0)
      {
         # child process  -- never gets to print statement until $cmd is done
         system ($cmd);
         print STDERR "child launched\n";
         exit (0);
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:20:15.403

Perl`system`在命令完成之前不会返回。你可以重新安排孩子

```
if (defined $pid && $pid == 0)
{
    # child process
    warn "child launched\n";
    exec $cmd or die "$0: exec $cmd: $!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:42:22.557

最终使用 Proc::Daemon

```
#!/usr/bin/perl -w

use strict;
use Proc::Daemon;

my $dm = Proc::Daemon->new( work_dir=>'/tmp/');
my $pid = $dm->Init( { exec_command => '/usr/bin/find / >/tmp/find.txt', } );

while (1)
{
   print "child status :".$dm->Status($pid)."\n";
   sleep 2;
   if ($dm->Status($pid) eq 0)
   {
      print "child terminated :".$dm->Status($pid)."\n";
      last;
   }

} 
```

# c# - 将 for 循环转换为 linq 查询

> ID：15296792
> 
> 赞同：1
> 
> 时间：2013-03-08T14:54:19.750
> 
> 标签：c#, .net, linq

我喜欢认为自己在 LINQ 方面做得很好，但我时不时地尝试完成一些我无法开始工作的事情。我想将 a 转换`SPListItemCollection`为字典，这样我就可以使用该键来查找一个值，而无需每次都进行 LINQ 查询：

```
var formsConfigItems = new Dictionary<string, string>();
foreach (SPListItem item in list.GetItems(query))
    formsConfigItems.Add(item.Title, (item["Value"] == null ? string.Empty : item["Value"].ToString())); 
```

这行得通，但我希望使用 LINQ 以更简洁的方式做到这一点。（没什么大不了的，但我喜欢尽可能在 for 循环上使用 LINQ，尽管它在幕后是一样的。

我试图做这样的事情：

```
var formsConfigItems = (from SPListItem i in list.GetItems(query)
                        select new { i.Title, i["Value"].ToString() }).ToDictionary<string, string>(k=>k.Key, k=>k.Value); 
```

但这似乎不起作用。如果我尝试在 上使用 lambda 表达式`list.GetItems(query)`，则无法选择使用或任何 LINQ 命令（这很奇怪，`.Where`因为它是`SPListCollection`

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T14:57:42.213

尝试：

```
var formsConfigItems = list.GetItems(query)
                           .Cast<SPListItem>()
                           .ToDictionary(item => item.Title, 
                                         item => Convert.ToString(item["Value"])); 
```

回答您的疑问：

> 如果我尝试在 list.GetItems(query) 上使用 lambda 表达式，我无法选择使用 .Where 或任何 linq 命令（这很奇怪，因为它是一个 SPListCollection）

那是因为它是一个实现但没有[`SPListCollection`](http://msdn.microsoft.com/en-sg/library/microsoft.sharepoint.splistitemcollection.aspx)实现的“老派”集合，所以 C#/LINQ（无论如何在编译时）无法分辨它包含什么*类型的项目。*该调用有助于解决此问题 - 它将 a转换为，允许类型代数在 compile-time 解决。您的循环没有这个问题，因为您明确指定了循环变量的类型 - 编译器代表您为序列中的每个项目插入一个强制转换。`IEnumerable``IEnumerable<T>`*`Cast<SPListItem>()``IEnumerable``IEnumerable<T>``for`*

 *> 我试图做这样的事情（查询表达式）。但这似乎不起作用。

那是因为您没有正确构造匿名类型实例（无法为任意表达式推断属性名称）并且您的 lambda 表达式也不完全正确（您使用的属性名称与匿名类型的属性名称不匹配）。试试这个：

```
var formsConfigItems = (from SPListItem i in list.GetItems(query)
                        select new 
                        { 
                            i.Title, 
                            Value = Convert.ToString(i["Value"])
                        }).ToDictionary(a => a.Title, a => a.Value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T15:08:06.347

Ani 有更好的解决方案 IMO，但您还缺少另一件事：您的 LINQ 语句正在创建匿名项目的集合，但您没有为该匿名类中的属性命名。

这个`k=>k.Key`表达式不起作用，因为它不知道是什么`Key`——你只是定义了`Title`（因为你没有给它一个名字，它从对象中借用了一个）。`Value`无法自动计算出来，因此会引发编译器错误。

为此，您需要专门声明名称：

```
new { Key = i.Title, Value = i["Value"].ToString() } 
```*

# android - Eclipse Android Native 调试失败

> ID：15296794
> 
> 赞同：1
> 
> 时间：2013-03-08T14:54:21.887
> 
> 标签：android, c++, eclipse, adt, ndk-gdb

我在获取本机调试支持以在 Windows for Android 下为我的 Eclipse 项目工作时遇到问题。不幸的是，经过超过 1 天的研究，谷歌并没有提供帮助。

我几乎是 eclipse 的初学者，所以解决方案可能很简单，因为我猜我也会做一些非标准的事情。

我的 android 项目已经在我的设备上运行良好（Acer Iconia A500 Android 3.2.1、HTC Incredible S Android 4.0.4 等）。

我使用 ADT 插件向导创建了项目，然后使用 ADT 添加的项目上下文菜单条目添加了本机支持。

然后我添加了我已经拥有的 java 文件（以前我使用 CMake 和 Android 独立工具链进行编译，尽管我从未尝试过这种方式进行远程调试）。我为那个“com.xy”创建了一个新包，我把它们放到了那里（我不想透露真正的包名，因为该项目将成为商业产品的一部分）。

然后我通过将它们拖到 jni 文件夹中来添加我的源。源代码不在 jni 文件夹内，而是链接到项目下方的位置“../../”（它是跨平台应用程序的一部分，因此我可以在不同的工具链中重用源文件）。

我还通过以下方式调整 Android.mk 来链接产品随附的 4 个静态库：

```
LOCAL_PATH := $(call my-dir)
MY_PATH := $(LOCAL_PATH)
LOCAL_PATH := $(MY_SDK)/lib/Android/armeabi-v7aD

include $(CLEAR_VARS)
LOCAL_MODULE    := A
LOCAL_SRC_FILES := libA.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE    := B
LOCAL_SRC_FILES := libB.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE    := C
LOCAL_SRC_FILES := libC.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE    := D
LOCAL_SRC_FILES := libD.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)

LOCAL_C_INCLUDES += $(my_SDK)/include/
LOCAL_PATH := $(MY_PATH)/../../..
LOCAL_CFLAGS  += -Wno-format -DANDROID -fno-rtti -fno-exceptions #And many other flags If they are important I will post them later, too
LOCAL_CPPFLAGS += -fno-rtti -fno-exceptions
LOCAL_MODULE    := MY_PROJECT
LOCAL_SRC_FILES := Android/Main.cpp # Some other sources..
LOCAL_LDLIBS    := -lstdc++ -lEGL -lGLESv2 -llog -Wl,--allow-multiple-definition -Wl,--no-undefined 
LOCAL_STATIC_LIBRARIES := A B C D

include $(BUILD_SHARED_LIBRARY) 
```

我也有一个Application.mk：

```
APP_ABI := armeabi-v7a
APP_PLATFORM := android-9
APP_STL := stlport_static
APP_CFLAGS += -fno-rtti -fno-exceptions 
```

然后我在 Debug Configurations 下添加了一个新的“Android Native Application”，启动默认 Activity 并使用

调试器“${NdkGdb}”

命令文件“${NdkProject}\libs\${NdkCompatAbi}\gdb.setup”

共享库（自动添加）${NdkProject}/obj/local/$NdkCompatAbi}/

其余的也会自动添加，我认为应该以这种方式工作。

我认为奇怪的一件事是我得到了控制台输出

[2013-03-08 10:50:36 - 无法启动 cygpath。Cygwin 在路径上吗？] java.io.IOException: 无法运行程序 "cygpath": CreateProcess error=2, 系统找不到指定的文件

但是我可以通过这种方式很好地构建项目，后来我没有收到任何尝试附加 gdb 的警告（我使用的是 Msys，我也安装了 cygwin，所以我不知道为什么 Eclipse 在这里抱怨）。

当我启动应用程序时，它会在设备上启动，然后我得到以下控制台输出（[Android Native Application] gdb）：

```
(no debugging symbols found)
Error while mapping shared library sections:
/system/bin/linker: No such file or directory.
Error while mapping shared library sections:
libstdc++.so: No such file or directory.

... And alot more of that type

(no debugging symbols found)
warning: Unable to find dynamic linker breakpoint function.
GDB will be unable to debug shared library initializers
and track explicitly loaded dynamic code.
warning: shared library handler failed to enable breakpoint
No line 219 in file "jni/../../../MySourceFile.cpp". 
```

我肯定用 NDK_DEBUG=1 构建，我的静态 .a 库是用 -g AndroidManifest.xml 构建的，有一个条目 android:debuggable="true"。

当我在 Eclipse 项目目录（使用 Msys）中运行“sh /ndk-gdb --verbose”时，我得到以下输出：

Android NDK 安装路径：/c/SDK/android-ndk-r7 使用默认 adb 命令：/c/SDK/android-sdks/platform-tools/adb.exe 找到 ADB 版本：Android Debug Bridge version 1.0.31 Using final ADB命令：'/c/SDK/android-sdks/platform-tools/adb.exe' 使用自动检测的项目路径：. 找到包名称：com.xy ABI 应用程序目标：armeabi-v7a 设备 API 级别：13 设备 CPU ABI：armeabi-v7a armeabi 兼容设备 ABI：armeabi-v7a 找到可调试标志：true 错误：目标上安装了不可调试的应用程序设备。请重新安装可调试版本！

我真的很想为这个项目提供原生调试支持。所以我真的很感激任何帮助。

**我必须**使用cygwin是真的吗？在尝试附加调试器时，我没有收到任何合理的错误消息。

# android - 枚举在 TouchEvent 中的行为很奇怪

> ID：15296795
> 
> 赞同：0
> 
> 时间：2013-03-08T14:54:26.930
> 
> 标签：android, enums, touch, libgdx

我在 InputProcessor 的 touchDown 方法中的枚举遇到了一些问题。当我尝试使用它时，它会生成所有可能的枚举......

```
public class Memoration implements ApplicationListener, InputProcessor {

public static enum Screen {GAME, MENU}
Screen screen;

@Override
public void create() {
   screen = Screen.MENU;
   Gdx.app.log("onCreate", "works");
   Gdx.input.setInputProcessor(this);
}

@Override
public void dispose() {
}

@Override
public void render() {
   // bla bla bla
}

@Override
public boolean touchDown(int screenX, int screenY, int pointer, int button) {
    Gdx.app.log("touch", "down");
    if(screen == null) 
       Gdx.app.log("screen", "null");
    if(screen == Screen.MENU) 
        Gdx.app.log("screen", "menu");
    if(screen == Screen.GAME) 
        Gdx.app.log("screen", "game");
    return false;
}
} 
```

日志显示“onCreate: workds”、“touch: down”、“screen: null”、“screen: menu”和“screen: game”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:27:33.393

您的课程称为*Memoration*并实现*InputProcessor*。但是，在您的*create()*回调中，您正在创建另一个*Memoration*实例并将其设置为输入处理器，因此获取回调的是该实例。而且，因为没有为该实例调用*create() ，所以**screen*永远不会初始化。

试试这个...

```
@Override
public void create() {
   screen = Screen.MENU;
   Gdx.app.log("onCreate", "works");
   Gdx.input.setInputProcessor(this);
} 
```

# uiview - 如何从 UIView 中执行 performSegueWithIdentfier

> ID：15296796
> 
> 赞同：2
> 
> 时间：2013-03-08T14:54:29.420
> 
> 标签：uiview, uibutton, segue, ibaction

好的，所以我有一个 UIButton 嵌入到 UIImageView 中，它构成了 UIView 的一部分。

按钮的选择器调用应该运行的方法：

> [self performSegueWithIdentifier:@"SegueToMoreInfo"];

但是我得到了错误：“myclassname”的界面上没有可见声明选择器“performSegueWithIdentifier”。

基本上我真的需要从 UIView 中执行一个 segue。如果不可能，我将如何从 UIViewController 调用？

编辑：更多信息：

```
//adding button
UIButton *attractionButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[attractionButton addTarget:self
           action:@selector(buttonClicked:)
           forControlEvents:UIControlEventTouchUpInside];
[attractionButton setTitle:@"Attraction Info" forState:UIControlStateNormal];
attractionButton.frame = CGRectMake(80.0, 80, 160.0, 40.0);
[_image1 addSubview:attractionButton]; 
```

我的方法：

```
 (IBAction)buttonClicked:(id)sender
{
    [self performSegueWithIdentifier:@"SegueToMoreInfo" sender:sender];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:15:25.863

```
[self performSegueWithIdentifier:@"aseguename" sender:self]; 
```

是一个 UIViewController 方法。这就是您收到此错误的原因。除了通过协议之外，视图也不应该与 ViewController 对话。

话虽如此，您正在以错误的方式进行此操作。按钮和其他 UIView 对象的 IBActions 应该在 ViewController 中。因此，我会将 IBAction 移动到您的视图控制器并从那里将其连接到按钮。然后将您的代码插入该 IBAction。

发布代码后更新：发布的所有代码都应该在您的视图控制器中。我只想改变：

```
[_image1 addSubview:attractionButton]; 
```

至

```
[self.view addSubview:attractionButton]; 
```

或者如果您真的希望该按钮成为您的图像的子视图，那么您可以保留您的代码，只需确保为该图像创建一个 IBOutlet 属性，从界面构建器中的图像到您的视图控制器并将其命名为 _image1。

希望这可以帮助

# facebook - facebook 应用程序画布不加载目标 URL

> ID：15296801
> 
> 赞同：0
> 
> 时间：2013-03-08T14:54:58.283
> 
> 标签：facebook, facebook-graph-api, facebook-apps

我已经创建了我的第一个应用程序，并且我将我的应用程序托管在一个免费的虚拟主机上，当我转到我的网址 www.instakilo.net23.net 时，它可以完美加载，但是当我转到我的应用程序时，它说

```
This webpage is not available
Google Chrome could not load the webpage because www.instakilo.net23.net took too long to respond. The website may be down, or you may be experiencing issues with your Internet connection.
Error 118 (net::ERR_CONNECTION_TIMED_OUT): The operation timed out. 
```

有什么问题？以及如何解决？

这是我的画布网址

```
http://www.instakilo.net23.net/index.php? 
```

同样是带有 https 而不是 http 的安全画布 url

# c++ - 理解代码

> ID：15296806
> 
> 赞同：1
> 
> 时间：2013-03-08T14:55:14.003
> 
> 标签：c++, reference

有人可以解释一下这个代码有一个类`StringStream`。我不明白的是`StringStream& write(char*)`。如果在 cpp 文件中有

```
StringStream& StringStream::write(char* text)
{
   //what values can i return??
   //can i return address of character text is currently pointing to?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:55:52.537

您将返回`*this`- 即对当前对象的引用。（嗯，你可以返回任何 non-local `StringStream`，但我想目的是我所说的）

这种技术通常用于方法链接 - 即执行以下操作：

```
StringStream ss;
ss.write("Hello ").write("world!"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:57:48.070

这是一种最有可能修改`StringStream`实例并返回对 a 的引用的方法`StringStream`。所以你应该返回对实例本身的引用

```
StringStream& StringStream::write(char* text)
{
  // do stuff
  return *this;
} 
```

这允许您执行链接：

```
StringStream s;
s.write("foo").write("bar"); 
```

也就是说，我希望该`write`方法采用`const char*`：

```
StringStream& write(const char* text); 
```

因为该方法可能不会修改传递给它的数据，并且是为了能够正确传递字符串文字（例如示例中的 and ）所必需`"foo"`的`"bar"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:00:42.873

您可以简单地返回对 stringStream 类的引用。当您编写同一个类的成员函数时，您可以简单地返回指向 this 的指针。有关 StringStream 类的更多信息：[单击此处](http://www.cplusplus.com/reference/sstream/stringstream/)

# regex - RegEx 获取 shell 脚本中输出字符串的模式

> ID：15296811
> 
> 赞同：0
> 
> 时间：2013-03-08T14:55:27.147
> 
> 标签：regex, grep

我运行命令`grep`以获取某些输出并将其存储到变量中。grep 命令的输出是：

```
5.3.1-6.2011171513.ASMOS6 
```

但我只需要解析出`5.3.1-6`该版本并将其存储在一个变量中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:58:14.520

那这个呢？

```
TEXT=5.3.1-6.2011171513.ASMOS6
RES=$(echo $TEXT | cut -d. -f-3) 
```

我们`cut`系上绳子`.`，然后得到前 3 件。

用**awk**

```
RES=$(echo $TEXT | awk -F. 'OFS=FS {print $1,$2,$3}') 
```

`OFS=FS`这意味着我们得到了用 . 定义的分隔符来打印`-F`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:01:57.863

当您标记 linux 时，我假设您有一个支持该`-o`选项的现代 grep。

你可以做

```
var=$(grep -o 'regex' file) 
```

仅将正则表达式捕获到变量中。

不幸的是，我不明白您遇到的问题`5.3.1-6`，您必须编辑您的问题以**向我们展示您当前使用的正则表达式**。

IHTH

# ruby-on-rails-3 - 扩展 YAML 别名锚点

> ID：15296819
> 
> 赞同：4
> 
> 时间：2013-03-08T14:55:57.507
> 
> 标签：ruby-on-rails-3, yaml, rails-i18n, string-interpolation

我正在尝试构建动态 YAML 来返回字符串，我想知道是否可以用 YAML 做这样的事情？

```
en:
  occupation: "Studying #{department} at %{university} %{*speciality}"
  speciality: &speciality "specialising in %{subject}" 
```

### 预期产出

```
I18n.t(:occupation, :department => "Computer Science", 
                    :university => "Staffordshire University", 
                    :subject    => "Ruby")
#=> "Studying Computer Science at Staffordshire University specialising in Ruby"

I18n.t(:occupation, :department => "Computer Science", 
                    :university => "Staffordshire University", 
                    :subject    => nil)
#=> "Studying Computer Science at Staffordshire University" 
```

目前我认为这可能的唯一方法是

```
subject = "Ruby"
I18n.t(:occupation, :department => "Computer Science", 
                    :university => "Staffordshire University", 
                    :subject    => (
                      I18n.t(:speciality, :subject => subject) if subject
                    ))
#=> "Studying Computer Science at Staffordshire University specialising in Ruby" 
```

# ruby-on-rails - 使用设计防止用户在数据库上设置为“假”（停用）登录

> ID：15296824
> 
> 赞同：0
> 
> 时间：2013-03-08T14:56:11.023
> 
> 标签：ruby-on-rails, devise, authorization

我的 Rails 应用程序使用 Devise 进行授权，有时尝试登录的用户在数据库上被禁用，并将标志设置为“false”。

有没有办法设计使用这个标志来防止停用的用户登录系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:08:23.187

您可以像这样将检查`deactivated`字段添加到`active_for_authentication?`方法中：

```
def active_for_authentication? 
  super && !deactivated? 
end 
```

# asp.net-mvc - 有没有更有效的方法来查询数据并作为视图模型列表传递给视图？

> ID：15296826
> 
> 赞同：1
> 
> 时间：2013-03-08T14:56:15.727
> 
> 标签：asp.net-mvc, list, viewmodel

我有一个**项目**模型映射到数据库，如下所示：

```
public class Item
{
    public int ItemId { get; set; }
    public DateTime Created { get; set; }
    public string Title { get; set; }
} 
```

为了显示这些项目的列表，我创建了一个**ItemSummaryViewModel**，如下所示：

```
public class ItemSummaryViewModel 
{
    public int ItemId { get; set; }
    public string Title { get; set; }   

    public ItemSummaryViewModel(Item item)
    {
        this.ItemId = item.ItemId;
        this.Title = item.JobTitle + " " + item.Created.ToString("ddd d MMM HH:mm");
    }
} 
```

我还创建了一个类来获取 **List<Item>** 并返回**List<ItemSummaryViewModels>**，如下所示：

```
public class ItemSummaryViewModelList : List<ItemSummaryViewModel>
{
    public ItemSummaryViewModelList(List<Item> items)
    {
        foreach (Item i in items)
        {
            ItemSummaryViewModel itemSummary = new ItemSummaryViewModel(i);
            this.Add(itemSummary);
        }
    }
} 
```

最后，我们使用控制器将列表传递给视图，如下所示：

```
 public ActionResult Index()
    {
        //IEnumerable<ItemSummaryViewModel> itemsummaries = new IEnumerable<ItemSummaryViewModel>();

        List<Item> ListOfItems = db.Items.ToList();

        ItemSummaryViewModelList ListOfItemViewModels = new ItemSummaryViewModelList(ListOfItems);

        return View(ListOfItemViewModels);
    } 
```

我的问题是：

1.  有没有更有效或“最佳实践”的方式来做到这一点？

2.  要将 DB 模型 ( **Item** ) 列表转换为可显示视图模型 ( **ItemSummaryViewModels** ) 列表，我们目前遍历列表中的每个项目并单独转换它们。有没有更有效的方法来做到这一点？

本质上，我们正在查询数据库并将数据分配给 ViewModel 以显示为列表。我情不自禁地觉得我在“四处走动”，并且可能有一种更有效或“最佳实践”的方式来做到这一点。

有没有更好的办法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:10:23.693

尝试使用 LINQ 选择：

```
List<ItemSummaryViewModel> results = items.Select(
            x =>
            new ItemSummaryViewModel
                {
                    ItemId = x.ItemId,
                    Title = x.Title + " " + x.Created.ToString("ddd d MMM HH:mm")
                }).ToList(); 
```

将该列表放入您的视图模型中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:04:41.293

关于效率，我不会担心，直到您发现最简单的实施解决方案在实践中过于缓慢。先让它工作，然后只在实际需要时进行优化。显然，在您给出的示例中，有机会仅查询和转换视图所需的 Items 子集（可能是全部，但也许您正在分页？）

在结构上，我认为学术和专业上正确的答案是让一组对象代表您的数据库实体，第二组代表“域”或业务对象，第三组代表所有 MVC 模型。但是，根据具体情况，这可以简化：

1.  如果业务对象和数据库实体之间存在非常紧密的映射，并且数据库不太可能发生重大变化，那么您可以为两者使用一个类。

2.  如果您有一组非常简单的视图，可以非常干净地映射到您的业务对象，那么也许您可以使用业务对象作为您的模型。除非您的视图只是将原始业务对象添加到网页上，否则我认为您的模型通常需要比您当前的示例更复杂。

对于这种特定情况，我同意@CorrugatedAir 并说您可以只使用普通 List 而不是创建自己的 List 类，如果想要更简单，您也可以使用 List 并跳过创建 ItemSummaryViewModel 类。

但是请尝试在整个应用程序中保持一致 - 因此，如果您发现数据库实体不能用作业务对象的情况，那么最好在所有实例中都有一个单独的集合，并在它们之间设置映射器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:01:03.920

*要回答问题的“最佳实践”部分*：

更有效的方法（架构上）将是使用[工作单元和存储库模式](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。通过这种方式，您可以将视图与数据源分离，使其更可重用、更可测试、更易读，因此与其他“更多”一起更易于维护。

这篇文章非常图形化，让您真正了解为什么需要从控制器中分离数据库访问。

*为了回答如何以不那么冗长的方式对其进行转换的技术部分*，

我会使用一种叫做[AutoMapper](http://automapper.codeplex.com/)的东西。使用它，您的复杂转换而不是您呈现的循环将如下所示：

```
public ActionResult Index()
{
  var dbList = db.Items.ToList();
  var vmList = Mapper.Map<List<Item>, List<ItemSummaryViewModel>>(dbList);
  return View(vmList);
} 
```

您还必须将此初始化放在 App_Start 配置（如果 MVC 4）或 Global.asax.cs 文件中的某个位置：

```
Mapper.CreateMap<ListOfItems , ItemSummaryViewModelList>();
Mapper.AssertConfigurationIsValid(); 
```

您可以阅读更多关于为什么使用 AutoMapper 以及如何使用[AutoMapper：入门](http://automapper.codeplex.com/wikipage?title=Getting%20Started&referringTitle=Documentation)

希望这可以帮助！

# jquery - 在 Div / iframe 内缩放文本大小

> ID：15296831
> 
> 赞同：2
> 
> 时间：2013-03-08T14:56:20.413
> 
> 标签：jquery, html, css

我正在整理一个网站，其中一页是一本书。

我有一个内容 div，它以页纸为背景。在这里面我有一个 iframe 来拉出不同的文本页面。我已将 div 的宽度和高度设置为 %，但是我遇到了文本大小问题。由于书籍的性质，内容必须非常静态，但同时必须缩放以匹配屏幕尺寸。

我尝试过使用 jQuery，但无法成功。将不胜感激有关如何使用 jQuery 缩放文本的任何提示，或者是否有人对如何显示一本书有一个全面的更好的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:59:14.450

我知道这不是一个 jQuery 解决方案，但是您是否考虑过使用 CSS 媒体查询？

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

```
.somediv { font-size: 100%; }

@media all and (max-width: 500px) {
    .somediv { font-size: 80%; }
}

@media all and (max-width: 800px) and (min-width: 501px) {
    .somediv { font-size: 90%; }
} 
```

这将根据当前宽度更改字体大小，并且对于较小的分辨率会降低字体大小。低于 500 像素？80%。在 800 到 501 像素之间？90%。否则标准 100%。

不确定这是否适用于`iframe`s 但值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:00:15.500

正如 Brbcoding 所评论的，您应该看看[fittext](http://fittextjs.com/)库。我以前用过它，它很棒，试一试;)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:50:59.000

我在响应式 Web 布局中调整文本大小的这个 jQuery 函数，不知道它是否是你要找的。

```
$(document).ready(function(){
function scale_text(body, scaleFactor, maxScale, minScale) {
    var scaleSource = body.width();

    var fontSize = scaleSource * scaleFactor; //Multiply the width of the body by the scaling factor:
    if (fontSize > maxScale) fontSize = maxScale;
    if (fontSize < minScale) fontSize = minScale; //Enforce the minimum and maximums

    body.css('font-size', fontSize + '%');
    }

function window_resize() {
    scale_text($('#intromsg'), 1, 500, 150); // example re sizing element
     scale_text($('#introsub'), 5, 150, 100); // example re sizing element

    }

$(window).resize(function () {
    window_resize();
});

//Fire it when the page first loads:
window_resize(); 
```

});

# r - 使用多个响应和权重运行 lm

> ID：15296833
> 
> 赞同：1
> 
> 时间：2013-03-08T09:58:57.597
> 
> 标签：r, regression, linear-regression, lm, mlm

我必须将具有相同模型矩阵的线性模型拟合到多个响应中。这可以通过将响应指定为矩阵而不是向量在 R 中轻松完成。以这种方式计算非常快。

现在我还想为模型添加与响应准确性相对应的权重。因此，对于每个响应向量，我还需要不同的权重向量。但是，`lm`只允许将权重作为向量而不是矩阵输入。所以我不能批量输入权重，必须分别`lm`为每个响应运行。这样计算会变得慢得多。

有没有办法以批处理模式运行这些类型的模型，而无需`lm`重复调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-20T12:31:05.280

> 现在我还想为模型添加与响应准确性相对应的权重。因此，对于每个响应向量，我还需要不同的权重向量。但是，`lm`允许仅将权重作为向量而不是矩阵输入。所以我不能批量输入权重，必须分别`lm`为每个响应运行。这样计算会变得慢得多。

如[拟合具有多个 LHS 的线性模型中所述](https://stackoverflow.com/q/39262534/4891738)，“mlm”的效率需要所有 LHS 响应的共享模型矩阵。然而，加权回归没有给出模型矩阵的重用，因为对于一组不同的权重，响应`y`和模型矩阵都`X`需要重新调整。阅读[R: lm() 结果在使用`weights`参数和使用手动重新加权数据](https://stackoverflow.com/q/39315867/4891738)以查看加权回归如何工作时有所不同。

> 有没有办法以批处理模式运行这些类型的模型，而无需`lm`重复调用？

这取决于你想要什么。如果你需要一个完整的，那么你必须每次`lmObject`都打电话。`lm`如果你只想要系数，你可以使用`.lm.fit`. 上面的第二个链接演示了 的用法`lm.fit`，而 的用法`.lm.fit`几乎相同。一个简单的模板可能如下：

```
## weighted mlm, by specifying matrix directly
## `xmat`: non-weighted model matrix, manually created from `model.matrix`
## `ymat`: non-weighted response matrix
## `wmat`: matrix of weights

## all matrices must have the same number of rows (not checked)
## `ymat` and `wmat` must have the same number of columns (not checked)
## no `NA` values in any where is allowed (not checked)
## all elements of `wmat` must be strictly positive (not checked)

wmlm <- function (xmat, ymat, wmat) {
  N <- ncol(ymat)
  wmlmList <- vector("list", length = N)
  for (j in 1:N) {
    rw <- sqrt(wmat[, j])
    wmlmList[[j]] <- .lm.fit(rw * xmat, rw * ymat[, j])
    }
  return(wmlmList)
  } 
```

考虑一个简单的使用示例：

```
## a toy dataset of 200 data with 3 numerical variables and 1 factor variable
dat <- data.frame(x1 = rnorm(200), x2 = rnorm(200), x3 = rnorm(200), f = gl(5, 40, labels = letters[1:5]))

## consider a model `~ x1 + poly(x3, 3) + x2 * f`
## we construct the non-weighted model matrix
xmat <- model.matrix (~ x1 + poly(x3, 3) + x2 * f, dat)

## now let's assume we have 100 model responses as well as 100 sets of weights
ymat <- matrix(rnorm(200 * 100), 200)
wmat <- matrix(runif(200 * 100), 200)

## Let's call `wmlm`:
fit <- wmlm (xmat, ymat, wmat) 
```

`.lm.fit`返回关键信息以进行进一步的模型推理，并且完整的`lmObject`将继承这些条目中的大部分。

```
## take the first fitted model as an example
str(fit[[1]])
 #$ qr          : num [1:200, 1:14] -10.4116 0.061 0.0828 0.0757 0.0698 ...
 # ..- attr(*, "assign")= int [1:14] 0 1 2 2 2 3 4 4 4 4 ...
 # ..- attr(*, "contrasts")=List of 1
 # .. ..$ f: chr "contr.treatment"
 # ..- attr(*, "dimnames")=List of 2
 # .. ..$ : chr [1:200] "1" "2" "3" "4" ...
 # .. ..$ : chr [1:14] "(Intercept)" "x1" "poly(x3, 3)1" "poly(x3, 3)2" ...
 #$ coefficients: num [1:14] 0.1184 -0.0506 0.3032 0.1643 0.4269 ...
 #$ residuals   : num [1:200] -0.7311 -0.0795 -0.2495 0.4097 0.0495 ...
 #$ effects     : num [1:200] -0.351 -0.36 0.145 0.182 0.291 ...
 #$ rank        : int 14
 #$ pivot       : int [1:14] 1 2 3 4 5 6 7 8 9 10 ...
 #$ qraux       : num [1:14] 1.06 1.13 1.07 1.05 1.01 ...
 #$ tol         : num 1e-07
 #$ pivoted     : logi FALSE 
```

的结果不支持, , ,等`.lm.fit`通用函数。但是线性模型的推断很容易，因此可以直接计算自己（前提是您知道背后的理论）：`summary``anova``predict``plot`

1.  回归系数的 t 统计表（来自`$qr`）；
2.  F 统计量和 ANOVA 表（来自`$effects`）；
3.  残差标准误差、R 平方和调整后的 R 平方（来自`$residulas`和`$rank`）。

* * *

最后，我提供一个基准：

```
library(microbenchmark)
microbenchmark(wmlm = {wmlm (xmat, ymat, wmat);},
               lm = {for (i in 1:ncol(ymat))
                       lm(ymat[, i] ~ x1 + poly(x3, 3) + x2 * f, dat, weights = wmat[, i]);} )

#Unit: milliseconds
# expr       min        lq      mean    median       uq      max neval cld
# wmlm  20.84512  23.02756  27.29539  24.49314  25.9027  79.8894   100  a 
#   lm 400.53000 405.10622 430.09787 414.42152 442.2640 535.9144   100   b 
```

因此可以看到 17.25 倍的提升（基于中位时间）。

# javascript - 使用模板无法按预期工作的淘汰嵌套 foreach

> ID：15296835
> 
> 赞同：0
> 
> 时间：2013-03-08T14:56:37.720
> 
> 标签：javascript, jquery, knockout.js, jquery-templates

我尝试做 jsFiddle，但它抱怨模板脚本，但下面是一个完整的示例，您可以将其放入 .html 文件并在本地查看。

```
<html>
<head>
<title>Test</title>

<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
<script type="text/javascript">

var InnerModel = function() {
    this.name = ko.observable("");
}

var OuterModel = function() {
    this.name = ko.observable("");
    this.innerItems = ko.observableArray();
}

var ViewModel = function() {
    this.name = ko.observable("");
    this.outerItems = ko.observableArray();
}

$(document).ready(function() {

    var model = new ViewModel();
    ko.applyBindings(model)

    model.name("ModelName");
    outerItem = new OuterModel();
    outerItem.name("Outer 1 Name");
    model.outerItems.push(outerItem);
    innerItem = new InnerModel();
    innerItem.name("Inner 1 Name");
    outerItem.innerItems.push(innerItem);
});
</script>

</head>
<body>
<script type="text/html" id="inner-template">    
    <li><span data-bind="text: inner.name"> </span></li>
</script>

<h3>Model Name: <span data-bind="text: name"></span></h3>

<div data-bind="foreach: outerItems" >
    <h4><b>Outer:</b> <span data-bind="text: name"></span></h4> 
    <ul databind="template: { name: 'inner-template', foreach: innerItems, as: 'inner' }" ></ul>
</div>

</body>
</html> 
```

我期望的输出是：

```
Model Name: ModelName
Outer: Outer 1 Name
- Inner 1 Name 
```

但是`- Inner 1 Name`输出中缺少该部分。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:31:23.120

*databind="template[...]"*，应该是*data-bind* ;)

# .htaccess - 如果用户尝试转到旧 URL，则 htaccess 重定向

> ID：15296839
> 
> 赞同：1
> 
> 时间：2013-03-08T14:56:47.520
> 
> 标签：.htaccess, redirect

我有一个非常紧迫的问题。我管理的一个网站正在尝试更改其品牌，该网站已被转移，但使用我糟糕的主机设置该网站的唯一方法是将新网址添加为旧网址的别名。

如果他们试图转到旧 URL 上的任何页面，我需要添加一个规则来将用户重定向到其他地方（谷歌或其他地方）。

我一直在寻找这样的东西几个小时，但找不到任何例子，当改编作品时，我真的需要在周末之前把它整理好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:34:32.477

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# if request comes for the old URL then redirect it to your home page
RewriteRule ^old-url/?$ / [R=301,L,NC] 
```

# c# - C# 通过套接字传输文件

> ID：15296845
> 
> 赞同：0
> 
> 时间：2013-03-08T14:57:02.870
> 
> 标签：c#, sockets, zip, mime-types

我必须制作一个客户端-服务器文件同步应用程序...我想知道不是为每种文件类型都有一个单独的 mime 类型和代码，是否可以只压缩文件类型，传输到服务器并解压缩它？

它会起作用还是我必须识别每个文件的 mime 类型并为每个 mime 类型进行代码处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:00:28.617

套接字以字节为单位处理，因此只要客户端和服务器知道协议，发送文件的格式就无关紧要。您可以创建自己的协议。例如，它可能采用 {messagelength}、{mimetype}、{fileasbytearray} 的格式。这样，您的客户端就知道如何解析最终消息（即前 4 个字节可能是长度（假设为 int），然后是您的 mimetype，然后是文件的实际字节数组）。

如果您一直使用相同的格式，例如 zip 文件，则不需要 mime 类型。请记住，如果您计划在未来进行扩展，最好将您的协议设计为易于扩展。

# parsing - 如何使用“grep”命令清理 CSV 文件

> ID：15296846
> 
> 赞同：0
> 
> 时间：2013-03-08T14:57:06.907
> 
> 标签：parsing, csv, grep

假设我们有以下记录`{(XXX1),(XXX2)},whatever`我想要的是，提取信息，基于以下规则，最好使用'grep'：**如果{}包含小于或等于两个UNIQUE元素，即（）内的元素，则保留（两者），否则删除整行**。作为进一步的步骤，我想提取 () 中的值，最后将剩余的行写成以下形式：`XXX1,XXX2,whatever`

**更新：**

对于以下输入：

```
{(XXX1),(XXX2)},whatever,unique=2
{(XXX1),(XXX1),(XXX1),(XXX2)},whatever,unique=2
{(XXX1)},whatever,unique=1
{},whatever,unique=0
{(XXX1),(XXX2),(XXX3),(XXX4)},whatever 
```

我应该得到以下输出：

```
XXX1,XXX2,whatever,unique=2
XXX1,whatever,unique=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:30:23.360

awk 可以做到这一点，检查这个单行：

```
awk -F'[}{]' '{split($2,a,",");delete(b);for(x in a)b[a[x]]}length(b)<=2' file 
```

让我们做一个小测试：

```
kent$  cat file
ok,{(XXX1),(XXX2)},whatever,unique=2
ok,{(XXX1),(XXX1),(XXX1),(XXX2)},whatever,unique=2
ok,{(XXX1)},whatever,unique=1
ok,{},whatever,unique=0
nok,{(XXX1),(XXX2),(XXX3),(XXX4)},whatever

kent$  awk -F'[}{]' '{split($2,a,",");delete(b);for(x in a)b[a[x]]}length(b)<=2' file
ok,{(XXX1),(XXX2)},whatever,unique=2
ok,{(XXX1),(XXX1),(XXX1),(XXX2)},whatever,unique=2
ok,{(XXX1)},whatever,unique=1
ok,{},whatever,unique=0 
```

你可以看到，这`nok`条线被删除了

**编辑**

```
 awk -F'[}{]' '{gsub(/[()]/,"");split($2,a,",");delete(b);for(x in a)b[a[x]];l=length(b)}l<=2&&l>0{s="";for(x in b)s=s""x",";sub(/,$/,"",s);y[s]=s $3}END{for(x in y)print y[x]}' file 
```

测试

```
kent$  cat file
{(XXX1),(XXX2)},whatever,unique=2
{(XXX1),(XXX1),(XXX1),(XXX2)},whatever,unique=2
{(XXX1)},whatever,unique=1
{},whatever,unique=0
{(XXX1),(XXX2),(XXX3),(XXX4)},whatever

kent$  awk -F'[}{]' '{gsub(/[()]/,"");split($2,a,",");delete(b);for(x in a)b[a[x]];l=length(b)}l<=2&&l>0{s="";for(x in b)s=s""x",";sub(/,$/,"",s);y[s]=s $3}END{for(x in y)print y[x]}' file
XXX1,XXX2,whatever,unique=2
XXX1,whatever,unique=1 
```

# python - 配置 django UserManager 为超级用户输入出生日期？

> ID：15296863
> 
> 赞同：0
> 
> 时间：2013-03-08T14:57:35.893
> 
> 标签：python, django, django-users

通过创建我的自定义用户模型来搞乱 django 1.5。在我的模型中，我有一个必填字段 dob = DateTimeField()。我几乎将 UserManager 和 AbstractUser 保持不变。但是，当我尝试 python manage.py createsuperuser 时，我没有输入 dob，我得到了错误：

IntegrityError：“dob”列中的空值违反非空约束

如何编辑 UserManager 以允许我在终端中输入出生日期，并将输入配置为在数据库中存储为 DateTimeField？

编辑我的答案：

```
class UserManager(BaseUserManager):

    def create_user(self, username, email=None, password=None, dob=None, **extra_fields):
        """
        Creates and saves a User with the given username, email and password.
        """
        now = timezone.now()
        if not username:
            raise ValueError('The given username must be set')
        if not email:
            raise ValueError('Email must be given')
        email = UserManager.normalize_email(email)
        user = self.model(username=username, email=email,
                          is_staff=False, is_active=True, is_superuser=False,
                          last_login=now, date_joined=now, dob=dob, **extra_fields)

        user.set_password(password)
        user.save(using=self._db)
        return user

    def create_superuser(self, username, email, password, dob, **extra_fields):
        u = self.create_user(username, email, password, dob, **extra_fields)
        u.is_staff = True
        u.is_active = True
        u.is_superuser = True
        u.save(using=self._db)
        return u

# ... in the user model:
...
    REQUIRED_FIELDS = ['email', 'dob']
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:09:50.687

您需要`REQUIRED_FIELDS`在继承自的模型中进行覆盖`AbstractUser`。浏览`contrib/auth/models.py`一下可以注意到`AbstractBaseUser`has`REQUIRED_FIELDS = []`和`AbstractUser`has `REQUIRED_FIELDS = ['email']`。我的猜测是你应该有类似的东西：

```
class MyCoolUserModel(AbstractUser):
    REQUIRED_FIELDS = ['email', 'dob']
    ... 
```

**编辑**：不再猜测。有用。

一般来说，您可以`createsuperuser`通过查看`contrib/auth/management/commands/createsuperuser.py`. 任何非身份验证命令都可以位于`core/management/commands/`. 几乎任何`manage.py`问题都可以通过查看命令的来源来解决。

# ios - 播放前的 AVAudioPlayer

> ID：15296866
> 
> 赞同：0
> 
> 时间：2013-03-08T14:57:45.667
> 
> 标签：ios, avfoundation, avaudioplayer

我有一个带有 MP3 文件的 AVAudioPlayer。但在演奏之前，你会听到一个障碍。这是我的代码：

```
NSString *geluid = [NSString stringWithFormat:@"RG_%@", nummer];

    NSString *path = [[NSBundle mainBundle] pathForResource:geluid ofType:@"mp3"];
    AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

    theAudio.delegate=self;
    [theAudio prepareToPlay];
    [theAudio play];

    NSURL *url = [NSURL fileURLWithPath:path];
    avplayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
    [avplayer prepareToPlay];
    [avplayer play]; 
```

例如：您听到“Ssstop here”，而不是“Stop here”。请帮我修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:11:25.717

此代码是否同时运行两个 AVAudioPlayer 实例？你为什么同时使用 avplayer 和 theAudio ？从外观上看，您似乎应该摆脱其中一个...

# java-me - 有没有办法在画布而不是表单中实现项目？

> ID：15296880
> 
> 赞同：0
> 
> 时间：2013-03-08T14:58:27.070
> 
> 标签：java-me, midp, lcdui

我正在尝试制作一个游戏应用程序并创建一个字符串菜单，用户只需单击其设备上的箭头键即可轻松选择该菜单。

我已经知道如何通过使用 KeyPressed() 识别用户的操作来长期做到这一点。但我只是想知道 Canvas 是否存在这样的 Item 类和子类的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:06:14.070

不适用于标准 JavaME 类，但您可以使用大量的 GUI 库。例如，相当流行的 LWUIT。 [http://lwuit.java.net/](http://lwuit.java.net/)

# c++ - 防止移动 unique_ptr C++11

> ID：15296881
> 
> 赞同：3
> 
> 时间：2013-03-08T14:58:30.610
> 
> 标签：c++, c++11, move-semantics, unique-ptr

有什么方法可以防止用户明确地获得唯一指针的所有权

```
 std::move 
```

?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T00:22:55.260

做了`const`

`unique_ptr`移动构造函数采用非常*量*右值引用，因此不能用`const`对象调用。

```
const unique_ptr<int> owner(new int);
// ...
unique_ptr<int> thief = std::move(owner);  // ERROR 
```

这允许`unique_ptr`像使用`boost::scoped_ptr`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T21:03:01.457

通过返回 a `std::unique_ptr`，您已经放弃了对该对象的控制。新主人要么销毁它，要么把它交给其他人。

如果您不打算让用户释放该对象，则返回一个引用。

*你有`boost::scoped_ptr`/ `const std::unique_ptr`（见乔纳森的回答），它在技术上回答了你的问题——调用者释放，但不能放弃资源——但我看不到一个令人信服的例子，*说明你为什么*需要这个而不是那个`std::unique_ptr`或参考*

# python - PyQt 程序无缘无故开始崩溃

> ID：15296884
> 
> 赞同：0
> 
> 时间：2013-03-08T14:58:38.323
> 
> 标签：python, pyqt, pyqt4

几个月前，我在 PyQt for Windows 中开发了一个程序，我用 py2exe 变成了一个可执行文件，但它突然开始崩溃，没有明显的原因。

崩溃是指程序在没有任何解释的情况下关闭。我无法按需重现问题，因为它永远不会在同一个操作中崩溃。

有人知道我可以在哪里寻找解释吗？如何调试这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:43:49.370

最好的办法是在 gdb 之类的调试器中运行您的程序并获取堆栈跟踪。不过，有时这并不会带来明显的解决方案。

下面是一组需要注意的事项，以找出导致 pyqt 崩溃的原因： [在 PyQt 中避免崩溃/挂起的良好做法是什么？](https://stackoverflow.com/questions/11945183/what-are-good-practices-for-avoiding-crashes-hangs-in-pyqt)

# regex - 正则表达式与记事本++

> ID：15296885
> 
> 赞同：1
> 
> 时间：2013-03-08T14:58:40.660
> 
> 标签：regex, notepad++

```
100\. 
101\. 
102\. 
```

伙计们，这是我的文字，我想这样改变：

```
<tag>100.</tag>   
<tag>101.</tag>   
<tag>102.</tag> 
```

我的正则表达式是：

```
[0-9][0-9][0-9]\. 
```

用。。。来代替：

```
<tag>\1</tag> 
```

但它不起作用:(我看不到数字和点号。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T15:01:16.780

你需要一些（捕获）括号；

回复： `(\d{3}\.)` 更换`<tag>\1</tag>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:01:11.237

您缺少`\.`括号中的。试试这个`$regex = ":[\d\.]+:"`。

# html - 在 div 顶部修剪一个小的空三角形

> ID：15296889
> 
> 赞同：4
> 
> 时间：2013-03-08T14:58:54.570
> 
> 标签：html, css

我正在尝试制作一个没有任何图像、纯 CSS 和 HTML 的下拉菜单，如下所示： ![在此处输入图像描述](../Images/14fc98a42e34745dcf4b05b909426508.png)

我不能做的是在顶部做这个小三角形装饰

是否有可能在 CSS 中，如果是，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T15:04:45.540

现场示例：http: [//jsbin.com/owafod/1/](http://jsbin.com/owafod/1/)

我使用[CSS 三角形生成器](http://apps.eky.hk/css-triangle-generator/)来创建三角形。

```
#Nav { 
  width: 300px;
  height: 200px;
  background: #333;
}

#Triangle {
    width: 0px;
    height: 0px;
    border-style: solid;
    border-width: 10px 10px 0 10px;
    border-color: #ffffff transparent transparent transparent;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T15:05:12.527

这是一个带边框的解决方案：

结果 ：

![在此处输入图像描述](../Images/1cf7fc0b958936c7b357fe5a67a31baa.png)

HTML：

```
 <div id=a></div><div id=b></div>  
  <div id=c></div> 
```

CSS：

```
#a {
  border-right: 5px solid white;
  border-bottom: 5px solid black;
  width: 100px;
  display: inline-block;
  margin:0;
}
#b {
  border-left: 5px solid white;
  border-bottom: 5px solid black;
  width: 100px;
  display: inline-block;
  margin:0;
}
#c {
   background: black; height:20px;width:210px
} 
```

**[测试](http://jsbin.com/awemet/1/edit)**

* * *

这是一张可能足以解释它是如何制作的以及如何轻松使用这种边框技巧的图片：

![在此处输入图像描述](../Images/dbb79140f19bcd1dc47684f406c2a207.png)

（[制作它的代码](http://jsbin.com/awemet/2/edit)）

# arrays - 如何通过scanf将输入限制为数组的定义大小？

> ID：15296891
> 
> 赞同：0
> 
> 时间：2013-03-08T14:58:59.347
> 
> 标签：arrays, string, overflow, scanf

如何限制数组接受的字符输入`size-1`数`scanf`？就像 char a[10] 一样，只需要 9 个字符。有没有可能。并在哪个头文件中`snprintf`定义？它是编译器特定的吗？让我知道它的头文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T18:13:39.170

> 如何使用 scanf 限制数组 size-1 接受的字符输入数？就像 char a[10] 一样，只需要 9 个字符。有没有可能。

可以指定最大字段宽度，但这可能不是您想要的。我将从`%s`格式指令派生出我的示例。只需将宽度（十进制数字）放在`%`和之间`s`，例如`"%9s"`指示 scanf 读取和复制不超过 9 个字符。请记住，`%s`指示`scanf`读取输入的*单词*，不一定是*line*。一旦遇到空白字符，它就会停止将输入复制到您的数组中。

```
char a[10];

/* TODO: Handle scanf errors */
assert(scanf("%9s", a) == 1); 
```

> snprintf 定义在哪个头文件中？

`<stdio.h>`.

> 它是编译器特定的吗？

有两种类型的 C99 编程实现。独立实现不需要`<stdio.h>`，因此从技术上讲`snprintf`，这些环境中不需要存在。但是，您很可能正在使用托管实现。托管实现需要`snprintf`在`<stdio.h>`.

# git - 你如何阻止用户提交到 git 中的子模块？

> ID：15296896
> 
> 赞同：4
> 
> 时间：2013-03-08T14:59:15.647
> 
> 标签：git, git-submodules

假设您有一个父项目和子模块。

有一个用户对父项目具有读/写权限，但对子模块只有读权限。

**你如何阻止用户对子模块进行更改并提交它，然后提交并推送对父项目中这个新提交的更新引用？**

用户将无法将他们的更改推送到子模块，因为他们没有权限。当另一个用户现在拉下父项目时，他们将引用尚未推送到服务器的子模块提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:04:26.653

有两种解决方案：

1.  告诉您的用户`--recurse-submodules=check`在推送时使用新选项
2.  或[在此答案中](https://stackoverflow.com/a/11295958/11343)设置检查新子模块检查的[服务器端挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Server-Side-Hooks)

# r - 在 R 中，根据匹配的行值将数据从一个数据帧提取到另一个数据帧

> ID：15296897
> 
> 赞同：-3
> 
> 时间：2013-03-08T14:59:17.450
> 
> 标签：r, merge, dataframe

以下是我想要做的简化版本（概念相同，数据不同）

我有两个不同长度的数据框。

DF1 有两列（名称和州缩写）和 1,000 行

DF2 有两列（州缩写和州名）和 50 行

在 DF1 中，我想添加一个名为 State Name 的列

我想让 R 查看 DF1 中的 State Abbreviation，然后在 DF2 中找到相应的 State Name（使用 DF2 中的 State Abbreviation 列）

请注意，DF1 中的新列可以称为任何名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:03:16.163

你可以用[`?merge`](http://stat.ethz.ch/R-manual/R-patched/library/base/html/merge.html)这个：

```
> df1 <- data.frame(name=c('n1','n2','n3','n4'), state.abbr=c('s1','s2','s2','s1'))
> df2 <- data.frame(state.abbr=c('s1','s2'), state.name=c('state 1', 'state 2'))
> merge(df1, df2)
  state.abbr name state.name
1         s1   n1    state 1
2         s1   n4    state 1
3         s2   n2    state 2
4         s2   n3    state 2 
```

# java - 反思 Java

> ID：15296899
> 
> 赞同：5
> 
> 时间：2013-03-08T14:59:23.373
> 
> 标签：java, reflection

我只是搞砸了一个机会，未能回答 2 个问题。我仍然不知道答案，所以寻找他们：

[1] 您有一个带有私有变量且没有 getter/setter 方法的 Java 类。你如何修改这些变量？

我的回答：你不能这样做，不能从外部访问私有变量。采访者：正确答案是“使用反射”。

[2] 您使用哪些反射方法来完成上述操作？我的回答：我不确定。采访者：再见。

根据我的经验，我会（1）检查类是否存在（2）创建实例（3）检查方法是否存在（4）调用方法（5）继续类的实例。当然，我会捕获 ClassNotFound 和 MethodInvocation 之类的异常。但是有修改私有变量的技巧吗？人们会这样做吗？TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:01:34.870

鉴于这种：

> 您有一个带有私有变量且没有 getter/setter 方法的 Java 类。你如何修改这些变量？

我的回答是您不需要特定的 setter/getter，您只需在其他非特定方法中修改它们。在许多情况下，可以将 Setter/getter 视为公开实现。

为了使字段可访问，您必须调用[Field.setAccessible()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Field.html)。

这是我不知道的那种话题，并且必须在我使用它时/何时查找（我不记得*我*上次使用它是什么时候）。对于一个面试官来说，如此挂断这件事似乎有点不寻常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:05:32.843

好吧，即使一个类没有 getter 和 setts，也不意味着该类中没有其他方法可以修改其状态。毕竟，如果他们在课堂上是因为课堂需要他们执行任何类型的任务。因此，其他方法可能会修改类的状态作为其职责的一部分。

例如，如果您的类是银行账户类，可能没有直接设置账户余额的方法，但可能有一些方法可以接受诸如取款或存款之类的交易，最终会在内部修改该类的状态。

所以从一开始这确实是一个糟糕的问题，因为没有足够的上下文，答案很困难。反射可能是一种选择，但如果您使用的是安全管理器，则可能会阻止反射修改私有字段，因此这也可能是一个错误的答案。

所以，你看，这个问题还不够好，没有上下文就没有意义。根据您获得的详细信息，也许该问题的答案应该是另一个问题，例如：

为什么要修改类的私有字段？毕竟他们是私人的，这是有原因的。所以，基本上如果你发现你需要改变它们，你需要做的就是坐下来重新考虑你的设计并确定你的类是否没有正确的公共接口。

该答案可能会导致面试官为您提供更多背景信息，然后您可以提供适当的答案。例如，现在面试官可能会说这个类是第三方框架的一部分，而你没有它的源代码，所以不可能提供 getter/setter 方法，但你不得不读/写一些此框架的给定对象的私有状态作为解决某些问题的解决方法。

现在，您将拥有更多上下文，您可以提出另一个问题，例如：您是否在此应用程序上使用安全管理器？如果他/她说不，那么您可以说，在这种情况下，反思是一种选择......

# delphi - 在使用 Firemonkey 截取的屏幕截图中包含鼠标光标

> ID：15296900
> 
> 赞同：3
> 
> 时间：2013-03-08T14:59:25.483
> 
> 标签：delphi, screenshot, firemonkey, delphi-xe3, firemonkey-fm2

[我通过How to take a screenshot with FireMonkey (multi-platforms)](https://stackoverflow.com/questions/10303256/how-to-take-a-screenshot-with-firemonkey-multi-platforms)中接受的答案中的代码将屏幕截图（整个屏幕，不仅是我的表单）写入 TImage ，效果很好。但是我想在图像中包含鼠标光标，所以我正在寻找一种解决方案，在第二步中将光标绘制在 TImage 上。

在 Windows VCL 项目中，位于[http://www.swissdelphicenter.ch/torry/showcode.php?id=1124](http://www.swissdelphicenter.ch/torry/showcode.php?id=1124)的代码运行良好并将光标绘制在 TImage 上。但我不能让它在 Windows Firemonkey HD 项目中工作，因为这条线

```
 Canvas.Draw(CurPoxY, CurPoxY, MyCursor); 
```

因为在 Firemonkey 下没有 Draw 方法。我也试过“DrawIcon()”，但它总是返回 False。我试图让这段代码在 Windows 上的 Firemonkey 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:09:50.693

我终于让这个工作了。诀窍是：

DrawIcon() 函数（来自 WinAPI.Windows）不适用于 TImage 现在在 Firemonkey 下具有的 FMX.Types.TBitmap 类型的位图。所以我必须创建一个 Vcl.Graphics.TBitmap 类型的临时位图，我可以在其上绘制光标图标。然后，我创建一个临时 MemoryStream 并使用我的临时 Bitmap 的 SaveToStream 方法将其写入该 MemoryStream，我可以从中将其加载到我的表单上的 TImage (Image1.Bitmap.LoadFromStream(TmpMemoryStream))。

# android - 使用 adjustPan 作为软输入模式时是否可以始终显示操作栏？

> ID：15296902
> 
> 赞同：17
> 
> 时间：2013-03-08T14:59:27.427
> 
> 标签：android, android-layout, android-actionbar, android-softkeyboard, android-windowmanager

在我的应用程序中，我有一个带有页脚的*ListView*，其中包含一个带有*EditText*的自定义视图。顶部是一个操作栏。Activity 当前使用`SOFT_INPUT_ADJUST_RESIZE`( `adjustResize`) 作为软输入模式，并且在滚动时不会关闭键盘。

为了显示更多列表，我想在滚动时移除键盘并获得更平滑的滚动行为，我想更改以便使用`SOFT_INPUT_ADJUST_PAN`( `adjustPan`)。但是，如果我更改为`adjustPan`，则整个视图（包括操作栏）都会向上推。我希望推送列表视图，但操作栏始终位于顶部。那有可能吗？如果没有，是否可以使用`adjustResize`并获得平滑的调整大小动画？

到目前为止，我已经尝试过：

*   请求`Window.FEATURE_ACTION_BAR_OVERLAY`，但这并没有帮助，尽管文档听起来很有希望。
*   根据软键盘是否可见来移动操作栏容器，最终看起来像一个非常不稳定的黑客，所以我放弃了它。
*   到目前为止`adjustResize`，由于滚动时发生的绘图行为，我已经排除了，同时最小化键盘和调整列表视图的大小。有没有办法制作平滑的动画调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T08:46:49.530

**调整盘**

将以下代码放在 manifest.xml 文件中的活动声明行中

```
android:windowSoftInputMode="adjustPan" 
```

喜欢

```
<activity
        android:name="activity"
        android:windowSoftInputMode="adjustPan" >
</activity> 
```

**用于在滚动时删除键盘**

当你得到结果时执行下面的代码

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

通过这种方式，您可以从屏幕上删除键盘。

# css - CSS 浮动属性仅适用于额外的样式标签

> ID：15296904
> 
> 赞同：0
> 
> 时间：2013-03-08T14:59:28.910
> 
> 标签：css, css-float

我想我只是不了解 HTML css。当我使用此代码时：

```
<!DOCTYPE html>
<html>
<head>
<title>STC </title>
<link href="bootstrap.css" rel="stylesheet">
<script src="bootstrap.js"></script>

<style type="text/css">
...
.loginHeader{
    float: right;
    padding: 5px;
}
.navLinks{
    float: left;
    padding: 5px;
}
</style>
</head>
<body>
<div class="topBar">
<div class="navLinks">
<a href=""> Home</a> | <a href=""> About</a> | <a href=""> Suggestions</a> | <a href=""> Terms & Conditions</a>
</div>
<div class="loginheader">
        croberts | <a href="/myContracts/">My Contracts</a> | <a href='?logout'>Logout </a>

</div>
</div>
...
</body>
</html> 
```

我的浮动权利不能按我想要的方式工作。但是，如果在我的文件的最开始，在 doctype 声明之前，我添加`<style></style>`了那么它就可以完美地工作。那么为什么这样的东西会对那种特定的风格产生影响呢？其他一切看起来都应该是这样，这只是浮动正确的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T15:08:43.773

在你的css中看到' `.loginheader{}`H'你有'H'，在HTML中你有'h'

更正>> [http://jsfiddle.net/4eDAm/](http://jsfiddle.net/4eDAm/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T15:09:11.073

在您的 DOCTYPE 之前添加内容时，一切看起来都会像您期望的那样的原因是您将文档放入 Quirks 模式。

# actionscript-3 - AS3 - 当所有 4 个按钮以随机顺序单击时如何制作 4 个按钮并转到另一帧

> ID：15296907
> 
> 赞同：0
> 
> 时间：2013-03-08T14:59:36.930
> 
> 标签：actionscript-3, button

您好，我在一帧上有 4 个按钮，当我按随机顺序单击所有 4 个按钮时，我不知道如何转到另一帧。条件为一 - 所有 4 个按钮必须至少单击一次。

我的按钮：第 1 帧中的 Button1 Button2 Button3 Button4 - 点击时 - 转到第 2 帧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:52:23.233

这是完成此操作的一种非常常见的方法。

```
private var _buttonsRemaining:int;
private function setup():void{
  button1.addEventListener(MouseEvent.CLICK,onButtonClicked);
  button2.addEventListener(MouseEvent.CLICK,onButtonClicked);
  button3.addEventListener(MouseEvent.CLICK,onButtonClicked);
  button4.addEventListener(MouseEvent.CLICK,onButtonClicked);
  _buttonsRemaining = 4;
}
private function onButtonClicked(e:MouseEvent):void{
  (e.target as EventDispatcher).removeEventListener(MouseEvent.CLICK,onButtonClicked);
  _buttonsRemaining --;
  if(_buttonsRemaining <= 0){
    allClicked();
  }
}
private function allClicked():void{
  trace("all buttons clicked.");
} 
```

与上面不同，我喜欢将 'allClicked' 声明为事件友好的方法。通过这种方式，您可以分派一个事件（可能是 Event.COMPLETE）来触发该方法。

```
private function allClicked(e:Event=null):void{
  //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:27:46.487

我不确定我是否正确理解您的问题。我假设您的意思是“框架”视图控制器的视图，并且您希望在第一个视图中的所有 4 个按钮至少被按下一次后立即显示另一个视图控制器的另一个视图。
我假设您已经有了第一个视图控制器及其视图，以及故事板中定义的 4 个按钮。然后，您可以将新的视图控制器从库中拖到情节提要中。您必须在应用程序中定义一个新的子类`UIViewController`，并将情节提要中新视图控制器的类设置为这个新子类。
接下来，您必须检查是否已按下所有按钮。因此，您可以`@property bool buttonXpressed`为每个按钮 X 定义一个，并将此属性设置`YES`为`IBAction`按下此按钮的方法。在每一个中`IBActions`，您可以检查是否所有 4 个属性都设置为`YES`，如果是，您可以通过调用`presentViewController:animated:completion:`以第二个视图控制器作为参数的方法来呈现第二个视图控制器的视图。

# mobile - 如何有条件地加载内容（移动优先）

> ID：15296908
> 
> 赞同：3
> 
> 时间：2013-03-08T14:59:38.203
> 
> 标签：mobile, responsive-design, conditional

我即将创建我的第一个“移动优先”网站，并且不确定随着视口增加有条件地加载内容的最佳方式。

例如，假设我希望仅为桌面浏览器而不是移动设备加载 twitter 提要，我该怎么做？

选项 1) 显示：无 - 这很糟糕，因为移动设备仍会加载内容

选项 2）在标记中有内容，但是用 javascript 删除.element - 我相信这个内容仍然首先加载，然后在之后被删除？如果是这样，那就不好了。

选项 3) 使用 javascript，如果视口足够宽，则加载内容 - 从我读过的内容来看，这似乎是推荐的方法，但是在 javascript 中使用标记是个好主意吗？我正在考虑可访问性、语义和 seo。

还有其他更好的解决方案吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:14:29.220

您可能想查看[Modernizr](http://modernizr.com)。它易于安装，您可以使用它检查访问者浏览器中的 HTML5 支持以及窗口宽度，例如：

```
if (Modernizr.mq('(min-width: 400px)')) {
 /* do this for tablets and desktops */
}else{
 /* do this for handhelds */
} 
```

祝你好运！

更新

> 谢谢，但在那种情况下，直接用javascript做那不是更好 - if (document.documentElement.clientWidth > 640)

你是对的，对于决定是否加载 twitter 提要的特定实例，使用我的建议可能没有太大的优势，而不是你的选项 3。不过，考虑到响应式设计、移动网站和现在的 HTML5，您将遇到的下一个问题是如何针对不同的观点自定义 CSS，或者如何测试访问者的浏览器是否支持某个 HTML5 功能。

您当然可以采用自己动手的方法并为每种情况编写自定义 javascript，或者您可以使用 Modernizr 来测试访问者浏览器是否支持媒体查询，以及它是否不加载[respond.js](https://github.com/scottjehl/Respond)，或者使用 Modernizr 来测试如果访问者的浏览器支持地理定位或 html5 表单或某些视频格式...，并且它没有有条件地加载[跨浏览器 polyfill](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)。

通常有多种方法可以实现相同的目标，我坚信不重新发明轮子；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:48:28.283

谁说？`Display:none;`是为任何特定视口显示和隐藏元素的最佳实践之一。还有一件事亚当，标记是每个设备的可下载性最低的东西，如果你用 Jquery 或 Javascript 隐藏元素，它们必须处理一些其他的东西。因为有时小型设备要么不支持加载它们，要么需要额外的时间，这就是它们可见的原因。

但它有 SEO 目的的陷阱。对于 SEO 优化以及隐藏元素，您可以使用 CSS 执行这些操作之一。

第一的，

```
@media screen and (max-width:480px) {
    div { 
position: absolute;
left: -9999em;
width: 0;
height: 0;
overflow: hidden;
       }
} 
```

但效果较差，因为谷歌网站管理员会处理所有此类黑客行为。而且您可能会被列入 Google 索引的黑名单。因此，您应该使用这些现代方法之一来隐藏元素。

第二，

```
 div { 
  position: absolute !important;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  padding: 0 !important;
  border: 0 !important;
  height: 1px !important; 
  width: 1px !important; 
  overflow: hidden;
           } 
```

或者，第三，

```
div { 
    color:transparent;
    text-indent:100%;
    overflow:hidden;
    white-space:no-wrap;
    font:0/0 a;
    text-shadow:none;
           } 
```

# ios - 这个 iOS 应用程序最有效的工作流程是什么？

> ID：15296915
> 
> 赞同：6
> 
> 时间：2013-03-08T15:00:12.080
> 
> 标签：ios, workflow, logic

我有一个需要互联网才能将网络服务同步到本地核心数据数据库的应用程序。然后使用本地数据库获取来填充标签栏控制器中 MapView 和 TableView 的不同对象。我在看这两种情况：

![应用流逻辑](../Images/f30268570656812badbcceece7cad909.png)

“A”的主要优点是我不必用数据库预加载应用程序，尽管它的数据库很小（大约 100 条记录）。问题是它变得令人费解。如果没有互联网连接，在 MapView 中，用户会看到地图，但刷新按钮被禁用。所以这不是问题。但是用户仍然可以转到 tableview，他会看到一个空表。

“B”的主要优点是使用预加载的数据库，应用程序将始终有一个数据源准备好进行绘图和列出。我真的不知道如何用数据库预加载应用程序。

我有点想走第一条路线，“A”。我的主要问题是，因为现在我禁用了 MapView 上的 refreshButton，因此它仅在从网络获取数据后才起作用...... sortedArray 在启动时为空。因此，如果用户访问 TableVC，它将是空的。就目前而言，用户必须先点击刷新按钮，然后才能进入 tableview。

处理这种情况最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:17:26.827

如果这 100 条记录足够静态，您可以使用应用程序发送一组默认记录，那将是最佳解决方案。用户，无论有没有互联网，都会得到一个填充的表格视图。

将您的记录作为 plist 发送到您的应用程序包中。首次启动时，打开 plist 并将每个条目作为新对象添加到核心数据中。这种类型的“播种”发生得非常快。只需为 plist 创建一个集合（数组、字典），然后枚举，将其映射到 managedObject 的属性。

在 WWDC 2012 视频 iCloud 和 Core Data 中有代码向您展示了如何执行此操作（只需忽略 iCloud 部分）。

然后，如果在播种后有连接，您可以同步数据，这将更新/替换/等预填充的数据。

# php - 无效的查询或字符类型

> ID：15296920
> 
> 赞同：1
> 
> 时间：2013-03-08T15:00:26.827
> 
> 标签：php, mysql, syntax

寻求查询方面的帮助

我目前正在尝试这样做：

```
 $query_set_character_to_trademark = "
    UPDATE product_description SET name = REPLACE(name, 'â"¢', '™')"; 
```

使用 php 脚本

在 mysql 命令行上使用它可以完美地工作：

```
 UPDATE product_description SET name = REPLACE(name, 'â"¢', '™') 
```

我的问题是我的脚本中的查询显示字符的语法错误。我的问题是这些字符被导入并存在于我的数据库中，我需要每天在名称列中更改它们。

帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:01:20.083

转义字符串中的双引号。像这样：

```
$query_set_character_to_trademark = "
    UPDATE product_description SET name = REPLACE(name, 'â\"¢', '™')"; 
```

如果你不这样做，php 会混淆字符串在哪里结束。

# git-svn - git-svn 不会变基或 dcommit

> ID：15296921
> 
> 赞同：4
> 
> 时间：2013-03-08T15:00:27.297
> 
> 标签：git-svn

我不知道这到底是怎么回事，但我的 git-svn 现在是 fubar。

```
ERROR from SVN:
Transaction is out of date: File '/proj/some/file.java' is out of date
No changes between 61f2c8cfa5881aab335edc2c0807f288c420f624 and refs/remotes/svn/git-svn
Resetting to the latest refs/remotes/svn/git-svn
ERROR: Not all changes have been committed into SVN, however the committed
ones (if any) seem to be successfully integrated into the working tree.
Please see the above messages for details. 
```

之前有一个关于 SO 的[类似问题](https://stackoverflow.com/q/2922059/2815)，但是这两种解决方案都不适合我 - 没有合并冲突，并且移开 .git/svn 并运行`git svn fetch`并没有将错误从`git svn dcommit`. 运行 fetch 确实有一个有趣的声明：

```
 M   proj/some/file.java
... [merge list] ...
Last fetched revision of refs/remotes/svn/git-svn was r8104, but we are about to fetch: r8102! 
```

不确定那是什么意思。

**编辑：** 当我查看 SourceTree 中的树时，我可以看到 SVN 在主分支“前面”，并且 r8102 之后的提交在两棵树中都“重复”了。将主机恢复到 r8102 之前并尝试再次向前移动并没有解决问题。

**编辑 2：** 树看起来像这样：

```
 +-------D---E---F---G remote/svn/git-svn
                /
           A---B---C---D---E master 
```

在我尝试`git rebase remotes/svn/git-svn master`@Ben 的建议之前，我应该期待什么？有很多提交（此处为 B 和 C）并没有出现在远程，但在主服务器中，我注意到重复项似乎与我在不同隧道方法之间的切换有关。我需要在这里保护 svn，这更多是为了我的个人利益（以及将来避免问题）。

从我的 .subversion/config ：

```
[tunnels]
wlan = /usr/bin/ssh -F /dev/null -l petri -t -A wifi-gateway /usr/bin/ssh -F /dev/null -l svnremote -A
wan = /usr/bin/ssh -F /dev/null -l petri -t -A extern-gateway /usr/bin/ssh -F /dev/null -l svnremote -A 
```

这会导致不同的 svn 提交评论，例如

```
git-svn-id: svn+wan://dev/svn/v9/trunk@8102 b9636cbc-3124-4d49-8704-a9669b6dc9bf 
```

我想知道这里是否没有一些不好的参考ID问题......

# jquery - ajax 自动将信息发送到 python cgi

> ID：15296925
> 
> 赞同：0
> 
> 时间：2013-03-08T15:00:30.387
> 
> 标签：jquery, python, ajax, cgi

首先，我的服务器除了python不接受任何额外的框架，所以我必须坚持下去。我在互联网上找到了一个简单的例子。我的ajax知识很少，我需要一些帮助。首先，我应该使用python的cgi模块和“w”的getvalue来将这个示例perl代码转换为python吗？其次，我应该在html部分中修改哪里以在时间间隔内重新加载ajax部分，而不是使用按钮提交它？

html:

```
<html>
<head>
<title>Simple Ajax Example</title>
<script language="Javascript">
function xmlhttpPost(strURL) {
var xmlHttpReq = false;
var self = this;
// Mozilla/Safari
if (window.XMLHttpRequest) {
    self.xmlHttpReq = new XMLHttpRequest();
}
// IE
else if (window.ActiveXObject) {
    self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
}
self.xmlHttpReq.open('POST', strURL, true);
self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
self.xmlHttpReq.onreadystatechange = function() {
    if (self.xmlHttpReq.readyState == 4) {
        updatepage(self.xmlHttpReq.responseText);
    }
}
self.xmlHttpReq.send(getquerystring());
}

function getquerystring() {
var form     = document.forms['f1'];
var word = form.word.value;
qstr = 'w=' + escape(word);  // NOTE: no '?' before querystring
return qstr;
}

function updatepage(str){
document.getElementById("result").innerHTML = str;
}
</script>
</head>
<body>
<form name="f1">
<p>word: <input name="word" type="text">  
<input value="Go" type="button" onclick='JavaScript:xmlhttpPost("/cgi-bin/simple-ajax-    example.cgi")'></p>
<div id="result"></div>
</form>
</body>
</html> 
```

Cgi部分：

```
#!/usr/bin/perl -w
use CGI;

$query = new CGI;

$secretword = $query->param('w');
$remotehost = $query->remote_host();

print $query->header;
print "<p>The secret word is <b>$secretword</b> and your IP is <b>$remotehost</b>.</p>" 
```

我对前面 perl 代码（cgi）的 Python 解释：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import cgi

myform = cgi.FieldStorage()
recieved = myform.getvalue('word')

print '<p> Hi mate, %s' % recieved 
```

至少你的回答帮助我解决了区间问题；但是，我仍然需要弄清楚 python 部分：我应该在我的 python 代码中使用 getvalue('w') 还是 getvalue('word') 从表单中获取值，因为运行代码时不断出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:27:47.487

我只回答第二部分。

**肮脏的方式：**

就在您的`</script>`结束标签之前：

```
var inv = setInterval(function () {
    xmlhttpPost("/cgi-bin/simple-ajax-example.cgi");
}, 5000);

//if you ever want to stop
//call stopPolling()
function stopPolling() {
    clearInterval(inv);
} 
```

这很脏，因为它可能导致内存泄漏情况，因为 XMLHttpRequest 对象实例化在循环内 - 如果您的服务器响应比您的间隔计时器慢，您最终可能会创建大量内存占用对象。

**更清洁的方式**

*   使用像 jQuery 这样的库
*   如果使用库不可行，首先为 Ajax 对象实例化编写一个函数，并正确缓存一个变量，以免最终导致内存泄漏，并确保重用相同的对象。
*   以合理的间隔时间进行轮询，同时考虑服务器的平均响应时间和意外延迟。

希望这可以帮助。

# opencv - 在 OpenCV 中编写向量

> ID：15296929
> 
> 赞同：2
> 
> 时间：2013-03-08T15:00:49.353
> 
> 标签：opencv, vector

如何在 OpenCV 中编写向量？使用 HoughlinesP，线条是类型`Vector<Vec4i>`并保存值 [x1,y1,x2,y2]。如何制作自己的矢量？我试过了

```
vector<Vec4i> line; 
```

`line[0] = [1,2,3,4];`

并且它不适用于错误'expected an identifier。请指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:33:14.487

```
vector<Vec4i> line;

line.push_back(Vec4i(1,2,3,4));
line.push_back(Vec4i(5,6,7,8)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:29:53.377

见dis： http: [//opencv.willowgarage.com/documentation/cpp/basic_structures.html#vec](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#vec)。

```
typedef Vec<uchar, 2> Vec2b;
typedef Vec<uchar, 3> Vec3b;
typedef Vec<uchar, 4> Vec4b;

typedef Vec<short, 2> Vec2s;
typedef Vec<short, 3> Vec3s;
typedef Vec<short, 4> Vec4s;

typedef Vec<int, 2> Vec2i;
typedef Vec<int, 3> Vec3i;
typedef Vec<int, 4> Vec4i;

typedef Vec<float, 2> Vec2f;
typedef Vec<float, 3> Vec3f;
typedef Vec<float, 4> Vec4f;

typedef Vec<float, 6> Vec6f;

typedef Vec<double, 2> Vec2d;
typedef Vec<double, 3> Vec3d;
typedef Vec<double, 4> Vec4d;
typedef Vec<double, 6> Vec6d; 
```

现在你知道了 ！

# r - 用 igraph 在 R 中绘制相对较大的网络

> ID：15296930
> 
> 赞同：3
> 
> 时间：2013-03-08T15:00:51.547
> 
> 标签：r, igraph

我有两个问题，第一个比第二个更复杂。

1.  我在下面有一张我的网络图，但是该图相当密集，如何将节点分散得更多，以便我可以清楚地看到边缘。我尝试了一个圆形情节，但我仍然得到了一个相当集中的情节。

2.  如何重命名节点？当前绘图在节点名称前放置了一个“X”，如何删除“X”？

在我的矩阵中，交互节点标记为`1`，非交互节点标记为`0`

![在此处输入图像描述](../Images/bbe932d2b6d1be3fd0b91d07967992a2.png)

代码：

```
library(igraph)

df <- as.matrix(read.table("sig_pairs_matrix_for_r.txt"))

g=graph.adjacency(df,mode="undirected",weighted=NULL,diag=FALSE) 
plot.igraph(g,vertex.label=V(g)$name) 
```

矩阵：

```
 4   6   7   8  12  13  15  17  22  23  25  26  27  29  30  31  34  35  36  43  44  47  48  52  53  56  57  59  63  66  67  70  96  99 122 166 168 172 174 176 180 181 191 192 193 220 222 224 225 226 236 249 253 256 258 266 267 277 296
  4  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
  6  0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0   1   1   1   0   1   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
  7  0   0   0   0   0   0   0   1   1   0   1   1   1   1   1   0   1   1   1   0   0   0   0   0   1   0   1   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
  8  0   0   0   0   1   1   0   1   1   0   1   1   1   1   1   0   1   1   1   1   0   0   0   0   1   0   1   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 12  0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 13  0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 15  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 17  0   0   1   1   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0
 22  0   0   1   1   0   0   0   1   0   0   0   0   1   1   0   0   1   1   1   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 23  0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 25  0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 26  0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 27  0   1   1   1   0   0   0   0   1   1   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 29  0   1   1   1   0   0   0   0   1   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   1   0   0   0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 30  0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   1   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 31  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 34  0   0   1   1   0   0   0   0   1   0   1   1   1   1   1   0   0   0   0   1   0   0   0   0   1   0   1   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 35  0   0   1   1   0   0   0   0   1   0   1   1   1   1   1   1   0   0   0   1   0   0   0   0   1   0   1   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 36  0   0   1   1   0   0   0   0   1   0   1   1   1   1   1   1   0   0   0   1   0   0   0   0   1   0   1   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 43  0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   1   1   1   1   0   0   0   0   0   1   0   0   0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 44  0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 47  0   1   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 48  0   1   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   1   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 52  0   1   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   1   0   0   1   1   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 53  0   0   1   1   0   0   0   0   0   0   0   0   0   1   0   0   1   1   1   1   0   0   0   0   0   0   1   1   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 56  0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 57  0   0   1   1   0   0   0   0   1   0   0   0   1   0   0   0   1   1   1   0   0   0   0   1   1   0   0   0   1   1   1   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 59  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 63  0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   1   1   0   1   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 66  0   0   1   1   0   0   0   0   0   0   0   0   0   1   0   0   1   1   1   1   0   0   0   1   1   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 67  0   0   1   1   0   0   0   0   0   0   0   0   0   1   0   0   1   1   1   1   0   0   0   1   1   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 70  1   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 96  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 99  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
122  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
166  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   1   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
168  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   1   0   1   1   1   1   0   0   0   0   1   0   0   0   0   0   0   0   0   0
172  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   0   0   1   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
174  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
176  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   1   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
180  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
181  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   1   0   0   1   1   1   0   0   0   0   1   0   0   0   0   0   0   0   0   0
191  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   1   0   1   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0
192  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   1   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
193  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
220  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   0   0   0   0   0   0   0   0   0   0
222  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
224  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0
225  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   1   1   0   1   0   0   0   0
226  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1   1   0   0   0   0   0   0   0   0   0   1   0   1   1   0   1   0
236  0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
249  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   1   0   1   0   0   0   0
253  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   0   1   0   0   1   1   0   1   0
256  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0
258  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   0   1   1   0   0   1   0   1   0
266  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   1   0   1   0   0   1   0
267  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0
277  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   1   0   1   1   0   0   0
296  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:20:00.763

对于第一个问题，检查`?igraph::layout`. 有一些说明如何更改节点的对齐方式。

对于您的第二个问题，我猜该图从矩阵的行名或列名中获取节点的名称，但`read.table`默认情况下会附加带有前缀 X 的名称，以便使名称以数字有效的变量名称开头（请参阅 参考资料`make.names`）。所以你的矩阵的行名实际上是 X1、X2 等。你可以通过像这样读取你的矩阵来规避这个：

```
df <- as.matrix(read.table("sig_pairs_matrix_for_r.txt",check.names=FALSE)) 
```

或者您可以在制作图表之前重命名矩阵的行和列，即

```
#newnames is a vector containing the new names, such as c("a","b",...)
rownames(df)<-colnames(df)<-newnames 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T17:52:25.917

对于您问题的第二部分，我将为行名和列名创建一个单独的文件。导入后，您可以设置列名和行名。

```
temp = read.csv("adj_matrix.csv", sep=",",head=FALSE)
adjmatrix <- as.matrix(temp)

temprow = read.csv("rownames.csv", sep=",",head=FALSE)
rowns <-as.matrix(temprow)

tempcol = read.csv("colnames.csv", sep=",",head=FALSE)
cols <-as.matrix(tempcol)

rownames(adjmatrix)<- rows
colnames(adjmatrix)<- cols

g1 <- graph.adjacency(adjmatrix, mode=c("directed"), weighted=NULL, diag=TRUE)
plot.igraph(g1) 
```

# share - Facebook 状态更新不显示缩略图

> ID：15296934
> 
> 赞同：1
> 
> 时间：2013-03-08T15:01:02.740
> 
> 标签：share, facebook-opengraph

尽管 Facebook 调试器显示了正确的缩略图： http: [//www.apparelyzed.com/forums/topic/26287-burned/](http://www.apparelyzed.com/forums/topic/26287-burned/)

当这个 url 被输入到配置文件更新中时，它只获取文本，而不是元图像。

谢谢

西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:28:58.770

在上面给定的页面源中有一个这个链接标签和一个图像。这张图的目的是什么。尝试删除此链接并查看。

```
<link rel="image_src" ref='http://www.apparelyzed.com/forums/public/style_images/master/meta_image.png' /> 
```

并检查您的图像尺寸是否至少为 50x50，最好有 200x200

og:image 属性具有一些可选的结构化属性：

```
 1\. og:image:url - Identical to og:image.
 2\. og:image:secure_url - An alternate url to use if the webpage
    requires HTTPS.
 3\. og:image:type - A MIME type for this image.
 4\. og:image:width - The number of pixels wide. 
```

# java - 参数最大长度的 Jax RPC Web 服务定义

> ID：15296935
> 
> 赞同：2
> 
> 时间：2013-03-08T15:01:03.550
> 
> 标签：java, web-services, jax-rpc

我需要定义一个带有最大长度参数的 Jax-RPC Web 服务。

```
 @SOAPBinding(style = Style.RPC)
    public interface MessageService {

            public String sendMessage(@WebParam(partName = "id") String id,
        @WebParam(partName = "name") String name,
        @WebParam(partName = "mesg") String mesg); 
```

其中*id*必须是 8 个字符。如何在 Jax-RPC 注释或配置中定义此约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:45:53.480

你能再描述一下你想做什么吗？为什么在您收到/发送 id 之后验证长度是不够的？

也许您可以尝试使用您的类型的对象而不是字符串，并对其进行验证？此外，您可以尝试使用绑定文件 - 您可以生成数据类型转换器，并尝试以下操作：

```
 <jaxb:bindings version="2.1"
xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <jaxb:globalBindings generateElementProperty="false" >
               <jaxb:javaType
                    name="java.util.Calendar"
                    xmlType="xs:dateTime"
                    parseMethod="javax.xml.bind.DatatypeConverter.parseDateTime"
                    printMethod="javax.xml.bind.DatatypeConverter.printDateTime" />
        </jaxb:globalBindings>
</jaxb:bindings> 
```

# c# - 计算在共享文件夹上运行的 .exe 的所有实例

> ID：15296936
> 
> 赞同：3
> 
> 时间：2013-03-08T15:01:03.763
> 
> 标签：c#, executable, tracking, shared-directory

我的 ac# 应用程序位于共享文件夹中，其中有 3 或 4 个人都运行相同的 .exe 文件。我需要能够计算正在运行的进程的所有实例。

到目前为止，我已经尝试过互斥锁并且：

```
Process.GetProcessesByName(Process.GetCurrentProcess().ProcessName).Length; 
```

如果我试图计算我在我的机器上运行的 .exe 文件的实例数，那么这些就可以工作，但这将在多台机器上运行，所有这些机器都指向同一个共享可执行文件。

我不想创建一个根据用户是否打开或关闭它而递增和递减的文件，因为那将是不可靠的。

- - - - 编辑 - - - - - - -

有人知道Excel是怎么做的吗？如果第二个人打开文件它说它正在使用中并告诉你谁在使用它谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:03:19.110

除了实施某种形式的许可服务或者您对正在运行的机器拥有特权之外，别无他法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:08:39.763

除非您在它们之间设置某种通信，否则一台计算机上的进程无法检测到另一台计算机上运行的进程。

您可以按照您的建议设置一个共享文件，但是是的，它是不可靠的。

您可以在某台中央计算机上运行服务，并且每个实例都必须向服务器报告，但当然会有类似的可靠性问题。（如果一个实例在没有通知服务器的情况下死亡，服务器不会意识到它仍在运行。）

当每个实例运行时，它可以侦听一个端口，将其 IP 和端口号记录在一个中央文件中，当您需要计数时，您尝试连接到每个端口以确认该实例仍在运行。

有很多方法可以做到，但工作取决于你。当它们都在同一台机器上时，操作系统不会提供任何帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T15:23:09.423

你可以知道谁有一个共享开放：

打开计算机管理（右键单击我的计算机并选择管理）然后从左侧的树视图中选择：

系统工具>共享文件夹>会话

这列出了谁正在通过共享访问文件。

有一个关于以编程方式执行此操作的答案：

[https://stackoverflow.com/a/2418657/359135](https://stackoverflow.com/a/2418657/359135)

如果您真的想更进一步并且您拥有管理员权限，您可以使用此信息来询问连接机器上正在运行的进程：

```
tasklist.exe /S SYSTEM /U USERNAME /P PASSWORD 
```

[http://www.watchingthenet.com/how-to-view-and-kill-processes-on-remote-windows-computers.html](http://www.watchingthenet.com/how-to-view-and-kill-processes-on-remote-windows-computers.html)

我不建议你做任何这些......更多地强调需要什么。我会在某个地方运行一个服务器，该服务器会收到来自您的应用程序的打开、关闭和 ping 通知。

ping 通知可让您识别已崩溃、失去连接或出于任何其他原因未向服务器应用程序发送关闭通知的实例。

我已经看到这只是通过在每分钟左右写入的开放会话数据库中创建一个表来完成的。我不知道这对数百万用户如何工作，但我已经看到它对数十个用户（最多大约一百个）运行良好。

编辑：

更多关于 ping..

如果您有服务器端代码，您可以主动查找丢失的 ping，但是我很想在阅读打开的会话时只使用数据库表并在您的选择中添加 where 子句：

```
Select
    *
FROM
    Session
WHERE
    LastPing > DATEADD(second,-60,Now()) 
```

我会在插入时检查旧记录，这样你就不会得到很多旧行。

编辑：为了清楚起见，如果您使用了此答案开头列出的疯狂技术，您将无法知道有人已将文件复制到本地计算机并运行它。如果您让程序坚持它与特定数据库或服务器有连接，那么您将拥有更多控制权。

# jenkins - Jenkins - 主节点可以访问从属节点上的源代码吗？

> ID：15296940
> 
> 赞同：1
> 
> 时间：2013-03-08T15:01:11.077
> 
> 标签：jenkins, jenkins-plugins, cobertura, gcov

我已经使用 gcov、gcovr 和 Cobertura Jenkins 插件在一个 c++ 项目上进行了成功的测试，生成代码覆盖率数据。在这个简单的项目中，构建是在主节点上完成的。在 jenkins 中，我可以深入研究覆盖率报告以查看行级别的覆盖率。

现在我们正在尝试将项目扩展为一个真实的用例。在这个分布式设置中，我们有一个主节点在多个从属节点上运行作业。覆盖率报告和以前一样工作，除了源代码显示不可用。

显然这是因为报告是由主节点显示的，但源仅在从节点上检出。

有没有办法克服这个问题？我是否需要从从属服务器复制源代码，或者我可以让主服务器进行自己的 SVN 签出以拥有并行源代码树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:29:07.907

我过去完成此操作的方法是使用 Copy to Slave 插件，该插件可以将文件从从站复制回主站。但是我用它来复制单元测试结果，这些结果是相当小的 XML 文件。如果您的源代码树非常大，则可能需要一段时间。

[https://wiki.jenkins-ci.org/display/JENKINS/Copy+To+Slave+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Copy+To+Slave+Plugin)

# python - 不同维度的 Numpy 数组广播

> ID：15296944
> 
> 赞同：7
> 
> 时间：2013-03-08T15:01:16.913
> 
> 标签：python, numpy

我对 numpy 的广播规则有点困惑。假设您想要执行更高维度数组的轴方向标量积以将数组维度减少一（基本上是沿一个轴执行加权求和）：

```
from numpy import *

A = ones((3,3,2))
v = array([1,2])

B = zeros((3,3))

# V01: this works
B[0,0] = v.dot(A[0,0])

# V02: this works
B[:,:] = v[0]*A[:,:,0] + v[1]*A[:,:,1] 

# V03: this doesn't
B[:,:] = v.dot(A[:,:]) 
```

为什么 V03 不起作用？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:40:43.980

`np.dot(a, b)`在[a 的最后一个轴和 b 的倒数第二个轴上](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html)运行。因此，对于您问题中的特定情况，您可以随时选择：

```
>>> a.dot(v)
array([[ 3.,  3.,  3.],
       [ 3.,  3.,  3.],
       [ 3.,  3.,  3.]]) 
```

如果要保持`v.dot(a)`顺序，则需要使轴就位，这可以通过以下方式轻松实现[`np.rollaxis`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.rollaxis.html)：

```
>>> v.dot(np.rollaxis(a, 2, 1))
array([[ 3.,  3.,  3.],
       [ 3.,  3.,  3.],
       [ 3.,  3.,  3.]]) 
```

我不太喜欢，除非是为了明显的矩阵或向量乘法，因为在使用可选参数`np.dot`时对输出dtype非常严格。`out`Joe Kington 已经提到过它，但如果你要做这类事情，请习惯`np.einsum`：一旦你掌握了语法，它就会将你花在重塑事物上的时间减少到最低限度：

```
>>> a = np.ones((3, 3, 2))
>>> np.einsum('i, jki', v, a)
array([[ 3.,  3.,  3.],
       [ 3.,  3.,  3.],
       [ 3.,  3.,  3.]]) 
```

并不是说它在这种情况下太相关，但它也快得离谱：

```
In [4]: %timeit a.dot(v)
100000 loops, best of 3: 2.43 us per loop

In [5]: %timeit v.dot(np.rollaxis(a, 2, 1))
100000 loops, best of 3: 4.49 us per loop

In [7]: %timeit np.tensordot(v, a, axes=(0, 2))
100000 loops, best of 3: 14.9 us per loop

In [8]: %timeit np.einsum('i, jki', v, a)
100000 loops, best of 3: 2.91 us per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T17:59:04.900

[`tensordot`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.tensordot.html)在这种特殊情况下，您也可以使用,。

```
import numpy as np

A = np.ones((3,3,2))
v = np.array([1,2])

print np.tensordot(v, A, axes=(0, 2)) 
```

这产生：

```
array([[ 3.,  3.,  3.],
       [ 3.,  3.,  3.],
       [ 3.,  3.,  3.]]) 
```

`axes=(0,2)`表示`tensordot`应该对 中的第一个轴和`v`中的第三个轴求和`A`。（还可以查看[`einsum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html)，它更灵活，但如果您不习惯这种符号，则更难理解。）

如果`tensordot`考虑速度，则比`apply_along_axes`用于小型阵列要快得多。

```
In [14]: A = np.ones((3,3,2))

In [15]: v = np.array([1,2])

In [16]: %timeit np.tensordot(v, A, axes=(0, 2))
10000 loops, best of 3: 21.6 us per loop

In [17]: %timeit np.apply_along_axis(v.dot, 2, A)
1000 loops, best of 3: 258 us per loop 
```

（由于持续的开销，对于大型阵列，差异不太明显，但`tensordot`始终更快。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T15:07:53.617

你可以用[`numpy.apply_along_axis()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.apply_along_axis.html)这个：

```
In [35]: np.apply_along_axis(v.dot, 2, A)
Out[35]: 
array([[ 3.,  3.,  3.],
       [ 3.,  3.,  3.],
       [ 3.,  3.,  3.]]) 
```

我认为`V03`不起作用的原因是它没有什么不同：

```
B[:,:] = v.dot(A) 
```

即它试图计算沿最外轴的点积`A`。

# python - 将 unicode 字符串写入 Excel 2007

> ID：15296948
> 
> 赞同：7
> 
> 时间：2013-03-08T15:01:26.527
> 
> 标签：python, excel, unicode, pyodbc, openpyxl

我正在使用`pyodbc`. 此外，我正在尝试`.xlsx`使用`openpyxl`.

这是我的代码（Python 2.7）：

```
import pyodbc
from openpyxl import Workbook

cnxn = pyodbc.connect(host = 'xxx',database='yyy',user='zzz',password='ppp')
cursor = cnxn.cursor()

sql = "SELECT TOP 10   [customer clientcode] AS Customer, \
                [customer dchl] AS DChl, \
                [customer name] AS Name, \
                ...
                [name3] AS [name 3] \
        FROM   mydb \
        WHERE [customer dchl] = '03' \
        ORDER BY [customer id] ASC"

#load data
cursor.execute(sql)

#get colnames from openpyxl
columns = [column[0] for column in cursor.description]    

#using optimized_write cause it will be about 120k rows of data
wb = Workbook(optimized_write = True, encoding='utf-8')

ws = wb.create_sheet()
ws.title = '03'

#append column names to header
ws.append(columns)

#append rows to 
for row in cursor:
    ws.append(row)

wb.save(filename = 'test.xlsx')

cnxn.close() 
```

这*有效*，至少直到我遇到一个客户，例如，名称：`"mún"`。我的代码没有失败，一切都写入 Excel，一切都很好。直到我真正打开 Excel 文件——这会导致错误提示文件已损坏，需要修复。修复文件后，所有数据都会丢失。

我知道该代码适用于具有常规名称（仅 ASCII）的客户，只要有重音字符或 Excel 文件损坏的任何内容。

我试图打印一行（具有困难的客户名称）。这是结果：

`row`是一个元组，这是一个索引：`'Mee\xf9s Tilburg'`所以要么写入`\xf9 (ú)`字符会导致错误，要么 MS Excel 无法处理它。我尝试了各种将行编码为 un​​icode（`unicode(row,'utf-8')`或`u''.join(row)`）等的方法，但没有任何效果。要么我尝试一些愚蠢的方法导致错误，要么 Excel 文件仍然错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:40:31.383

最后我找到了两个解决方案：

第一个是将光标给定的行转换为列表，并解码列表中的元素：

```
for row in cursor:
    l = list(row)
    l[5] = l[5].decode('ISO-8859-1')
    (do this for all neccesary cols)
    ws.append(l) 
```

I figured this would have been hell, cause there were 6 columns needing conversion to unicode, and there were 120k rows, though everything went quite fast actually! In the end it became apparent that I could/should just cast the data in the sql statement to unicode ( cast(x as nvarchar) AS y) which made the replacements unnecessary. I did not think of this at first cause i thought that it was actually supplying the data in unicode. My bad.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-11T10:13:39.753

You can use `encode()` to convert unicode to string:

```
l=[u'asd',u'qw',u'fdf',u'sad',u'sadasd']
l[4]=l[4].encode('utf8') 
```

# angularjs - 如何使用 Angular 输出动态表单字段？

> ID：15296949
> 
> 赞同：11
> 
> 时间：2013-03-08T15:01:29.060
> 
> 标签：angularjs

我想根据动态字段配置呈现一个表单：

```
$scope.fields = [
    { title: 'Label 1', type: 'text', value: 'value1'},
    { title: 'Label 2', type: 'textarea', value: 'value2'}
]; 
```

这应该输出行为如下：

```
<div>
    <label>{{field.title}}<br />
        <input type="text" ng-model="field.value"/>
    </label>
</div>
<div>
    <label>{{field.title}}<br />
        <textarea ng-model="field.value" rows="5" cols="50"></textarea>
    </label>
</div> 
```

简单的实现是使用`if`语句来呈现每个字段类型的模板。但是，由于 Angular 不支持`if`语句，我被引导到指令的方向。我的问题是了解数据绑定的工作原理。[指令](http://docs.angularjs.org/guide/directive)的文档有点密集和理论化。

我已经模拟了我在这里尝试做的一个简单的例子：http: [//jsfiddle.net/gunnarlium/aj8G3/4/](http://jsfiddle.net/gunnarlium/aj8G3/4/)

问题是表单字段没有绑定到模型，所以 submit() 中的 $scope.fields 没有更新。我怀疑我的指令函数的内容是完全错误的...... :)

展望未来，我还需要支持其他字段类型，如单选按钮、复选框、选择等。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-08T15:53:56.483

无论您尝试创建什么指令，您遇到的第一个问题是在带有表单元素的表单中使用 ng-repeat。ng-repeat 如何创建新范围可能很棘手。

[该指令创建新范围。](http://docs.angularjs.org/api/ng.directive%3angRepeat)

我还建议您在部分模板中使用[ngSwitch而不是使用 element.html。](http://docs.angularjs.org/api/ng.directive%3angSwitch)

```
<div class="form-row" data-ng-switch on="field.type">
    <div data-ng-switch-when="text">
        {{ field.title }}: <input type="text" data-ng-model="field.value" />
    </div>
    <div data-ng-switch-when="textarea">
        {{ field.title }}: <textarea data-ng-model="field.value"></textarea>
    </div>
</div> 
```

由于 ng-repeat，这仍然会给您留下修改子范围内的表单元素的问题，为此我建议在每个元素上使用 ngChange 方法来设置项目更改时的值。这是我认为 AngularJS 目前不能很好处理的少数项目之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-13T05:57:29.727

您可能会为此考虑[使用 Metawidget](http://metawidget.org)。它使用 JSON 模式，但在其他方面非常接近您的用例。完整样本：

```
<html ng-app="myApp">
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js" type="text/javascript"></script>
        <script src="http://metawidget.org/js/3.5/metawidget-core.min.js" type="text/javascript"></script>
        <script src="http://metawidget.org/js/3.5/metawidget-angular.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            angular.module( 'myApp', [ 'metawidget' ] )
                .controller( 'myController', function( $scope ) {

                    $scope.metawidgetConfig = {
                        inspector: function() {
                            return {
                                properties: {
                                    label1: {
                                        type: 'string'
                                    },
                                    label2: {
                                        type: 'string',
                                        large: true
                                    }
                                }
                            }
                        }
                    }

                    $scope.saveTo = {
                        label1: 'value1',
                        label2: 'value2'
                    }

                    $scope.save = function() {
                        console.log( $scope.saveTo );
                    }
                } );
        </script>
    </head>
    <body ng-controller="myController">
        <metawidget ng-model="saveTo" config="metawidgetConfig">
        </metawidget>
        <button ng-click="save()">Save</button>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T13:31:05.580

当`type`元素不在 DOM 中时可以更改属性，那么为什么不使用一个小指令将其从 DOM 中删除，更改其类型，然后添加回同一个位置呢？

这`$watch`是可选的，因为目标可以动态更改一次，而不是不断更改。

```
var app = angular.module('app', []);

app.controller('MainCtrl', function($scope) {
  $scope.rangeType = 'range';
  $scope.newType = 'date'
});

app.directive('dynamicInput', function(){
    return {
      restrict: "A",
      link: linkFunction
    };

    function linkFunction($scope, $element, $attrs){

      if($attrs.watch){
        $scope.$watch(function(){ return $attrs.dynamicInput; }, function(newValue){
          changeType(newValue);
        })
      }
      else
        changeType($attrs.dynamicInput);

      function changeType(type){
        var prev = $element[0].previousSibling;
        var parent = $element.parent();
        $element.remove().attr('type', type);
        if(prev)
          angular.element(prev).after($element);
        else
          parent.append($element);
      }
    }
});
```

```
span {
font-size: .7em;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<div ng-app="app" ng-controller="MainCtrl">
    <h2>Watching Type Change</h2>
    Enter Type: <input ng-model="newType" /><br/>
    Using Type (with siblings): <span>Before</span><input dynamic-input="{{newType}}" watch="true" /><span>After</span><Br>
    Using Type (without siblings): <div><input dynamic-input="{{newType}}" watch="true" /></div>

    <br/><br/><br/>
    <h2>Without Watch</h3>
    Checkbox: <input dynamic-input="checkbox" /><br />
    Password: <input dynamic-input="{{ 'password' }}" value="password"/><br />
    Radio: <input dynamic-input="radio"  /><br/>
    Range: <input dynamic-input="{{ rangeType }}" />
</div>
```

在最新的 Chrome 和 IE11 中测试。

# vlc - VLC/VLM输出字符串复制模块

> ID：15296951
> 
> 赞同：0
> 
> 时间：2013-03-08T15:01:30.393
> 
> 标签：vlc

我需要使用 VLM 作为“视频点播”媒体类型在视频剪辑中流式传输基本流的子集。通常我会进行转码，所以我的输出流是这样的

```
#duplicate{dst="transcode{<options>}, select="es=x,es=y,..."} 
```

在没有转码的情况下，我想使用“重复”模块，但使用空（或 passthrought）“dst”链。是否仍然可以使用“重复”或者我必须使用“es”模块来选择基本流？

在那种情况下，我对“es”模块有一些问题......有人可以帮助我吗？

谢谢你的建议，原谅我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T10:36:34.477

```
duplicate{dst=std{access=udp{ttl=10},mux=ts,dst=239.192.15.15:1234},dst=rtp{ttl=10,mux=ts,dst=10.0.0.4,port=5004}} 
```

有关如何解决 dst 的示例。您必须将其发送到某个地方吗？

关于 ES，我认为你在正确的轨道上

```
es=: duplicate only the elementary stream with the selected id. 
```

[VLC 重复帮助](http://www.videolan.org/doc/streaming-howto/en/ch03.html#id347397)

# php - XML 解析 - 缺少节点

> ID：15296952
> 
> 赞同：3
> 
> 时间：2013-03-08T15:01:30.883
> 
> 标签：php, xml, parsing, dom

我遇到的问题是我的 xml 文件的某些节点被正确解析和显示，而其他节点没有被检测到（至少我不知道这里出了什么问题）

[我将提供一个指向它的链接，](http://inexus.us/compare.xml)而不是发布 xml 文件。这是一个小的 XML 片段，供您查看 xml 结构：

```
<offers version="1"><group name="games">
    <o id="1" url="http://inexus.us/world-of-warcraft-eu/pre-paid-game-time-card-60-days" price="21.53" avail="1">
        <name>World of Warcraft EU Pre-Paid Game Time Card 60 Days</name>
        <currency>
            EUR
        </currency>
    </o> 
```

现在，我正在使用此代码来解析/读取 xml 文件。

```
$xmlDOM = new DOMDocument();
$xmlDOM->load("http://inexus.us/compare.xml");
$document = $xmlDOM->documentElement;
foreach ($document->childNodes as $node) {
    if ($node->hasChildNodes()) {
        foreach($node->childNodes as $temp) {
            echo $temp->nodeName."=".$temp->nodeValue."<br />";

        }
    }
} 
```

使用该代码，我得到了`name`每个 elemet`o` 但是我还需要获取存储在`o`元素内的信息......（即`id`, `url`, `price`）但我不太明白如何访问它们。

输出还返回几个`#text=`块。（我猜这是因为 xml 中的空格而发生的？）

一小段输出：

```
#text=
#text=
o= World of Warcraft EU Pre-Paid Game Time Card 60 Days EUR
#text=
o= World of Warcraft EU Battle Chest cd-key EUR
#text=
o= World of Warcraft EU Cataclysm cd-key EUR
#text= 
```

任何帮助/提示表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:23:21.950

`#text`必须处理空格。你可以使用`preserveWhiteSpace = false`（见下文），但你必须记住在你之前使用它`load()`。

至于属性，您可以使用`hasAttributes()`来检查节点是否具有属性，然后使用 遍历节点的属性`attributes`。

在下面的示例中，我采用了快捷方式并抓取了所有`o`标签：

```
<?php
$xmlDOM = new DOMDocument();
$xmlDOM->preserveWhiteSpace = false;
$xmlDOM->load("http://inexus.us/compare.xml");
$offers = $xmlDOM->getElementsByTagName('o');
foreach ($offers as $offer) {
    if($offer->hasAttributes()){
        foreach($offer->attributes as $attr){
            $name = $attr->nodeName;
            $value = $attr->nodeValue;
            echo $name.' = '.$value.'<br>';
        }
    }
    if ($offer->hasChildNodes()) {

        foreach($offer->childNodes as $o) {
            echo $o->nodeName."=".$o->nodeValue."<br />";

        }
    }
    echo '<hr>';
}?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:16:38.237

检查[文档](http://php.net/manual/en/class.domnode.php)以获取您可以在`DOMNode`. 对于您的问题：

1.  检查 的[`attributes`](http://www.php.net/manual/en/class.domnode.php#domnode.props.attributes)属性`$temp`以访问其所有属性。它是 a [`DOMNamedNodeMap`](http://www.php.net/manual/en/class.domnamednodemap.php)，因此您可以（例如）访问它们，例如：

    ```
    foreach ($temp->attributes as $name => $attrNode) {
        echo $name."=".$attrNode."<br />";
    } 
    ```

2.  您可以通过在将其包含在结果中之前对其进行测试来消除不需要的`Text`节点。[`nodeType`](http://www.php.net/manual/en/class.domnode.php#domnode.props.nodetype)[`XML_ELEMENT_NODE`](http://www.php.net/manual/en/dom.constants.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T16:37:06.637

[*对于这样的 XML 文档，在SimpleXML*](http://php.net/SimpleXML)中处理它通常更容易。通常，您要查找的内容称为*attributes*。除了 作为元素子*元素的**文本*值之外，*元素*还具有*属性*。

 ***在*SimpleXML*中，访问相当直接：访问*元素的**属性*是使用数组表示法和字符串键：

 *```
$game['id']; # id attribute of $game (here the <o> element) 
```

要访问一个孩子（通常只有一个孩子，比如`<name>`），您可以通过它的 child-element-name 访问它：

```
$game->name; # (first) name child element of $game 
```

如果您在字符串上下文中使用它（例如，作为字符串参数；`echo`或强制转换`(string) $game->name`），它不会返回元素，而是返回内部文本值。

这是一些示例代码（也使用简单的[`xpath`](http://php.net/simplexmlelement.xpath)）：

```
$url = 'http://inexus.us/compare.xml';
$xml = simplexml_load_file($url);

foreach($xml->xpath('/*/group/o') as $index => $game)
{
    printf("[%04d] %' -48s  %' 5s %s\n       <%s>\n",
        $game['id'],            # id attribute
        trim($game->name),      # name child text value
        $game['price'],         # price attribute
        trim($game->currency),  # currency child text value
        $game['url']            # url attribute
    );
} 
```

这是输出：

```
[0001] World of Warcraft EU Pre-Paid Game Time Card 60 Days  21.43 EUR
       <http://inexus.us/world-of-warcraft-eu/pre-paid-game-time-card-60-days>
[0003] World of Warcraft EU Battle Chest cd-key          10.31 EUR
       <http://inexus.us/world-of-warcraft-eu/battle-chest-cd-key>
[0668] World of Warcraft EU Cataclysm cd-key              6.18 EUR
       <http://inexus.us/world-of-warcraft-eu/cataclysm-cd-key>
[0954] World of Warcraft EU Mists of Pandaria cd-key     18.80 EUR
       <http://inexus.us/world-of-warcraft-eu/mists-of-pandaria-cd-key>
[0988] World of Warcraft EU Battle Chest + Cataclysm cd-key  15.48 EUR
       <http://inexus.us/world-of-warcraft-eu/battle-chest-cataclysm-cd-key>
[0018] Eve Online Pre-Paid Card 60 Days Special Edition  28.40 EUR
       <http://inexus.us/eve-online/pre-paid-card-60-days-special-edition>
[0766] Eve Online +30 Days cd-key                        11.60 EUR
       <http://inexus.us/eve-online/30-days-cd-key>
[1057] Eve Online Pre-Paid Card 60 Days                  25.82 EUR
       <http://inexus.us/eve-online/pre-paid-card-60-days>
[0029] Sony Online Pre-Paid 30 days EU                   14.19 EUR
       <http://inexus.us/sony-online/pre-paid-30-days-eu>
... 
```

[演示](http://codepad.viper-7.com/OHVKmo)****

# android - Eclipse Android App 使用 JSoup，总是在 Catch 内结束

> ID：15296953
> 
> 赞同：0
> 
> 时间：2013-03-08T15:01:31.850
> 
> 标签：android, eclipse, jsoup

我有一些使用 JSoup 并在 JAVA 中成功连接到网站的代码。

我正在尝试在 Android 上复制完全相同的东西（作为学习体验）。

我正在使用 Eclipse。

在我的 activity_main.xml 中，我有 3 个按钮和一个文本字段。

我的 JAVA 代码中没有任何错误，并确认它在 JAVA 中仍然有效（在 Netbeans 中运行）

我在 libs 文件夹中有我的 JSoup jar 〜这是一个需要一段时间才能找到的问题。

我放了一些editText.setText(“Here”); 看看代码在哪里。

我的文档下方有一条消息 = JSoup.connect(“<a href="http://www.Google.com" rel="nofollow">http://www.Google.com”).get() ;

我从来没有收到那个消息。

同样，我在 catch 例程中也有同样的信息——我总是进入 catch 例程，这意味着我有问题。

我已经尝试了这两种方法 - 使用 android 模拟器和通过 USB 电缆连接我的手机。我得到了相同的结果——“应用程序”运行良好，但显示在 catch{} 中找到的消息。

我不知所措，因为确切的代码在 Netbeans / 常规 JAVA 中运行良好。

这是我的代码：

```
package com.example.duckriver;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.jsoup.helper.Validate;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState)  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

int counter;
Button Button1;
Button SummaryStats;
TextView display;
TextView editText;

String dataread = null;
String high = "High:";
String low = "Low:";
String filename = null;
int index = 0;
int startindex = 0;
int lastindex = 0;
int length = 0;
char[] CharArray = new char[1000];

@Override
public boolean onCreateOptionsMenu(Menu menu)  
{
        // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);

    counter = 0;
    Button1 = (Button) findViewById(R.id.button1);
    SummaryStats = (Button) findViewById(R.id.buttonSummaryStats);
    display = (TextView) findViewById(R.id.tvMainDisplay);

    editText = (TextView) findViewById(R.id.editText);

    Button1.setOnClickListener(new View.OnClickListener()  {

        @Override
        public void onClick(View arg0) 
{
            // TODO Auto-generated method stub

            //counter++;

            Document doc;
            try{
                doc=Jsoup.connect("http://www.Google.com").get();
                editText.setText("Here");

        //get Title
                //String title = doc.title();
                //System.out.println("Title: "+title);

                //dataread = doc.body().text(); // "An example link"

                Element link = null;

            }//end try
            catch(Exception ex){
                ex.printStackTrace();
                editText.setText("Error");
                //((TextView)findViewById(R.id.tv)).setText("Error");
        }// end catch

        }
    });

    SummaryStats.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            counter = counter*counter;

        }
    });

    return true;
}

} 
```

我很茫然。帮助？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:55:25.710

您需要下载带有异步任务的文档，否则 Android 会抛出异常。尝试这个：

```
@Override
public boolean onCreateOptionsMenu(Menu menu)  
{
        // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);

    counter = 0;
    Button1 = (Button) findViewById(R.id.button1);
    SummaryStats = (Button) findViewById(R.id.buttonSummaryStats);
    display = (TextView) findViewById(R.id.tvMainDisplay);

    editText = (TextView) findViewById(R.id.editText);

    Button1.setOnClickListener(new View.OnClickListener()  {

        @Override
        public void onClick(View arg0) {
           downloadDocTask task = new downloadDocTask();
           task.execute("www.google.com");
         }
    });

    SummaryStats.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            counter = counter*counter;

        }
    });

    return true;
}

    private class downloadDocTask extends AsyncTask<String, Void, Document>{
        String urldisplay;
        @Override
        protected Document doInBackground(String... urls) {
            urldisplay = urls[0];
            Document doc = null;
            try {
                doc = Jsoup.connect(urldisplay).timeout(10*1000).get();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return doc;
            }

        @Override
        protected void onPostExecute(Document result) {
            if(result != null){
                Log.i(TAG, "downloadDocTask.onPostExcecute Document Download complete");
                buildHtml(result);
            }
            else{
                Log.i(TAG, "downloadDocTask.onPostExcecute Document == null");
            }
        }

    }

public void buildHtml(Document doc){
   // Parse document here
   String title = doc.title();
} 
```

# loops - 拼写单词 backwords

> ID：15296956
> 
> 赞同：0
> 
> 时间：2013-03-08T15:01:33.210
> 
> 标签：loops, for-loop, reverse, words, spelling

对于以下所有单词，如果将第一个字母移动到单词的末尾，然后将结果向后拼写，您将得到原始单词：banana Dresser语法土豆复活不均匀评估

我把第一部分写下来，将第一个字母移到最后，但我无法反向拼写这个词。我必须为此使用`for`循环，但我不知道如何使用它，所以它会向后拼写单词的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:09:06.893

为什么要将第一个字母移到末尾？

```
string word = "hello";
string neword = string.Empty;
Array a = word.ToCharArray();
foreach (char c in a)
{
    neword = neword + c;
} 
```

我是用 C# 写的，但对于任何东西来说都是一样的。

实际上，如果您编写的语言有点聪明，您可能可以这样做：

```
string word = "hello";
string neword = string.Empty;
foreach (char c in word)
{
    neword = neword + c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:12:52.403

通常for循环不关心你修改索引的方式，所以你应该能够使用类似的东西

```
string firstAtLast = "otatop";
string reverse = "";

for(int i=string.length-1; i => 0; i--)
{
    reverse += firstAtLast.At(i)
} 
```

i 和字符串操作方法的详细信息当然取决于您的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:15:09.610

这应该可以解决问题（C#）

```
public void ReverseWord()
  {
    var word = "banana dresser grammar potato revive uneven assess";
    var length = word.Length;
    string reverse = "";
    for (int i = 0; i < length; i++)
    {
        reverse = word.Substring(0, 1) + reverse;
        word = word.Remove(0, 1);
    }
} 
```

我得到的结果是：ssessa nevenu eviver otatop rammarg resserd ananab

# ruby-on-rails - NET::FTP ruby on rails vit 父目录？

> ID：15296957
> 
> 赞同：4
> 
> 时间：2013-03-08T15:01:33.513
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, net-ftp

```
a=Net::FTP.open('path', 'username','password')
a.chdir('any name of directory') 
```

但是如何访问父目录`a.pwd()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T05:02:37.997

`a.chdir('..')`如果主机平台支持它（几乎所有平台都应该），则用于更改到父目录，或者用于以`a.sendcmd('CDUP')`与平台无关的方式更改到父目录。

# php - 使用 Grocery Crud 进行多次上传

> ID：15296963
> 
> 赞同：1
> 
> 时间：2013-03-08T15:01:51.983
> 
> 标签：php, gd2, grocery-crud

我正在与杂货店一起在后端进行一些操作，我需要上传 5 张图片（其中 3 张具有相同的宽度和高度，另外 2 张具有不同的尺寸）但是，当我尝试使用 上传时`set_field_upload`，所有的文件以一种大小上传。我期望不同的尺寸。我也尝试过使用`GD2`（`Codeigniter`版本），但我不知道`grocery_crud`我是否可以做到这一点。

```
public function marcas(){

        $this       ->  load                ->  view('header');
        $this       ->  load                ->  view('leftbar');
        $this       ->  grocery_crud        ->  set_theme('datatables');        
        $this       ->  grocery_crud        ->  set_table('marcas');
        $this       ->  grocery_crud        ->  set_subject('Marcas');
        $this       ->  grocery_crud        ->  columns('nombre','descripcion','texto','logo');
        $this       ->  grocery_crud        ->  set_relation('id_tipo_marca','tipo_marcas','nombre');
        $this       ->  grocery_crud        ->  display_as('id','ID');
        $this       ->  grocery_crud        ->  display_as('id_tipo_marca','Tipo Marca');
        $this       ->  grocery_crud        ->  display_as('nombre','Nombre');
        $this       ->  grocery_crud        ->  display_as('descripcion','Descripcion');
        $this       ->  grocery_crud        ->  display_as('texto','Texto');
        $this       ->  grocery_crud        ->  display_as('link','Link');
        $this       ->  grocery_crud        ->  display_as('logo','Logo');
        $this       ->  grocery_crud        ->  set_field_upload('logo','../img');
        $this       ->  grocery_crud        ->  callback_after_upload(array($this, 'example_callback_after_upload_logo'));
        $this       ->  grocery_crud        ->  display_as('imagen','Imagen Grande');
        $this       ->  grocery_crud        ->  display_as('imagen2','Imagen Pequeña 1');
        $this       ->  grocery_crud        ->  display_as('imagen3','Imagen Pequeña 2');
        $this       ->  grocery_crud        ->  display_as('imagen4','Imagen Pequeña 3');
        $this       ->  grocery_crud        ->  set_field_upload('imagen','../img/grande');
        $this       ->  grocery_crud        ->  callback_after_upload(array($this, 'example_callback_after_upload_grande'));
        $this       ->  grocery_crud        ->  set_field_upload('imagen2','../img/thumb');
        $this       ->  grocery_crud        ->  set_field_upload('imagen3','../img/thumb');
        $this       ->  grocery_crud        ->  set_field_upload('imagen4','../img/thumb');
        $this       ->  grocery_crud        ->  callback_after_upload(array($this, 'example_callback_after_upload_thumb'));
        $output     =   $this               ->  grocery_crud            ->  render();
        $this       ->  _example_output($output);
        $this       ->  load                ->  view('footer');       
}

function example_callback_after_upload_grande($uploader_response,$field_info,$files_to_upload){
    $this -> load -> library ('image_moo');
    $file_uploaded = $field_info->upload_path.'/'.$uploader_response[0]->name;
    $this -> image_moo -> load($file_uploaded) ->resize_crop(317,140)->save($file_uploaded, true);
    return true;
var_dump($uploader_response);die;

function     example_callback_after_upload_logo($uploader_response,$field_info,$files_to_upload){
    $this -> load -> library ('image_moo');
    $file_uploaded = $field_info->upload_path.'/'.$uploader_response[0]->name;
    $this -> image_moo -> load($file_uploaded) ->resize(125,83)-    >save($file_uploaded, true);
    return true;
var_dump($uploader_response);die;
}

function example_callback_after_upload_thumb($uploader_response,$field_info,$files_to_upload){
    $this -> load -> library ('image_moo');
    $file_uploaded = $field_info->upload_path.'/'.$uploader_response[0]->name;
    $this -> image_moo -> load($file_uploaded) ->resize_crop(317,140)->save($file_uploaded, true);
    return true;
var_dump($uploader_response);die;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:39:12.403

这是我的解决方案。

```
 public function marcas(){
        ...
        $this->grocery_crud->callback_after_upload(array($this, 'reImage_callback_after_upload'));
        ...
    }

public function reImage_callback_after_upload($uploader_response, $field_info, $files_to_upload) {
    $this -> load -> library('image_moo');
    switch ($field_info->field_name) {  
        case 'logo':
            $file_uploaded = $field_info -> upload_path . '/' . $uploader_response[0] -> name;
            $this -> image_moo -> load($file_uploaded) -> resize_crop(20, 20) -> save($file_uploaded, true);
            return true;
            break;  
        case 'imagen':
            $file_uploaded = $field_info -> upload_path . '/' . $uploader_response[0] -> name;
            $this -> image_moo -> load($file_uploaded) -> resize_crop(30, 30) -> save($file_uploaded, true);
            return true;
            break;  
        case 'imagen2':
            $file_uploaded = $field_info -> upload_path . '/' . $uploader_response[0] -> name;
            $this -> image_moo -> load($file_uploaded) -> resize_crop(40, 40) -> save($file_uploaded, true);
            return true;
            break;  
        case 'imagen3':
            $file_uploaded = $field_info -> upload_path . '/' . $uploader_response[0] -> name;
            $this -> image_moo -> load($file_uploaded) -> resize_crop(50, 50) -> save($file_uploaded, true);
            return true;
            break;      
        case 'imagen4':
            $file_uploaded = $field_info -> upload_path . '/' . $uploader_response[0] -> name;
            $this -> image_moo -> load($file_uploaded) -> resize_crop(60, 60) -> save($file_uploaded, true);
            return true;
        break;  
        default:
            return false;
            break;
    }
} 
```

# mysql - 将 IF NOT EXISTS 插入现有 SQL

> ID：15296971
> 
> 赞同：0
> 
> 时间：2013-03-08T15:02:13.107
> 
> 标签：mysql

我正在尝试恢复从 SQL 文件中丢失的一些数据。我想知道是否可以在所有数据或某些部分周围插入一个 IF NOT EXIST ？例如，我有超过 500 行：

```
INSERT INTO `TOWNY_RESIDENTS` (`name`, `town`, `lastOnline`, `registered`, `isNPC`, `title`, `surname`, `protectionStatus`, `friends`, `townBlocks`, `town-ranks`, `nation-ranks`) 
VALUES
('003497', '', 1345023973086, 1344596322606, 0, '', '', 'residentBuild,residentDestroy,residentSwitch,residentItemUse', '', '', NULL, NULL),
('007belg', '', 1359561715886, 1359561236484, 0, '', '', 'residentBuild,residentDestroy,residentSwitch,residentItemUse', '', '', '', ''),
('00Landmine', '', 1360592736927, 1360592672899, 0, '', '', 'residentBuild,residentDestroy,residentSwitch,residentItemUse', '', '', '', '') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:08:25.213

您是否尝试过忽略？

```
INSERT IGNORE INTO `TOWNY_RESIDENTS`
(`name`, `town`, `lastOnline`, `registered`, `isNPC`, `title`, `surname`, `protectionStatus`, `friends`, `townBlocks`, `town-ranks`, `nation-ranks`)
VALUES ('003497', '', 1345023973086, 1344596322606, 0, '', '', 'residentBuild,residentDestroy,residentSwitch,residentItemUse', '', '', NULL, NULL) 
```

# javascript - 是否可以在画布的同一路径上使用两种不同的笔触样式？

> ID：15296974
> 
> 赞同：1
> 
> 时间：2013-03-08T15:02:20.960
> 
> 标签：javascript, html, canvas

是否可以在画布中创建一条线条以不同方式描边的路径？例如，您可以在里面画一个绿色的盒子，有 4 种不同颜色的边缘。我已经包含了一些代码，但这不起作用，因为它绘制了两次路径（第一次是未完成的路径，第二次是整个路径）。

JavaScript

```
window.onload = function()
{
    canvas = document.getElementById("canvas1");
    if (canvas.getContext)
    {
        ctx = canvas.getContext("2d");
        ctx.beginPath();                
        ctx.save();                
        ctx.moveTo(0, 0);
        ctx.strokeStyle = "rgb(255, 0, 0)";            
        ctx.lineTo(100, 100);
        ctx.stroke();
        ctx.strokeStyle = "rgb(0, 0, 255)";
        ctx.lineTo(200, 100);
        ctx.stroke();                
        ctx.restore();
    }                
} 
```

HTML

```
<canvas id = "canvas1" width = "400" height = "400">
    Your browser does not support the HTML5 canvas tag.
</canvas> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:19:11.120

我认为你必须使用两条路径。

```
 ctx = canvas.getContext("2d");
    ctx.beginPath();                              
    ctx.moveTo(0, 0);          
    ctx.lineTo(100, 100);
    ctx.strokeStyle = "rgb(255, 0, 0)";
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(100, 100);
    ctx.lineTo(200, 100);
    ctx.strokeStyle = "rgb(0, 0, 255)";
    ctx.stroke(); 
```

# javascript - 切换变量javascript的值

> ID：15296975
> 
> 赞同：0
> 
> 时间：2013-03-08T15:02:21.133
> 
> 标签：javascript

我有两个变量`M`&`N`并且在我的循环中有特定条件我想`N`在自身和`M`. 于是我想到了下面的代码

```
MxN = M * N;

N = MxN/N; 
```

但是`M`和的值`N`可能是 2 000 000 000。因此我对此表示怀疑。是在如此巨大的值之间切换的好变体还是可能更好（更快）

```
counter = 2;
N = counter % 2 == 0 ? M : N; 
counter++; 
```

**编辑** 对不起我没有提到我不想影响M的价值
谢谢大家）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:16:00.767

有很多方法。

1 [http://jsfiddle.net/8NvVf/](http://jsfiddle.net/8NvVf/)

```
m -= n
n += m
m = n - m 
```

2 [http://jsfiddle.net/eQGwL/](http://jsfiddle.net/eQGwL/)（仅适用于 FireFox 和 Rhino）

```
[n, m] = [m, n] 
```

3 [http://jsfiddle.net/4MQXe/](http://jsfiddle.net/4MQXe/)

```
m = (n += m -= n) - m 
```

## 编辑

如果您不想更改值，则`m`需要一个临时值。

[http://jsfiddle.net/Yjkn3/](http://jsfiddle.net/Yjkn3/)

```
var n = 5
var m = 8
var t = n

for (var i = 0; i < 10; ++i) {
    if(n != m) n = m
    else n = t
    console.log(n + ' ' + m)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:06:10.400

这两种方法都存在整数溢出问题（前一种方法也存在精度错误）。为什么不限制计数器的范围并采用第二种方法？

```
state = 0;
switch (state) {
case 0:
    // ...
    break;
case 1:
    // ...
    break;
// ...
}

state = state < maxState ? state + 1 : 0; 
```

由您来优化它，但请牢记可读性和可维护性。另一种方法`switch`是使用数组。

对于两个变量，在尝试交换变量时请不要乱用`xor`hack，只要写你想要的：

```
var temp = N;
N = M;
M = N; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:06:14.947

交换两个值的经典技巧是使用 XOR：

```
x = x xor y
y = x xor y
x = x xor y 
```

# javascript - ClientScript.RegisterClientScriptBlock - 无法设置属性“className”的值：对象为空或未定义

> ID：15296976
> 
> 赞同：0
> 
> 时间：2013-03-08T15:02:23.327
> 
> 标签：javascript, jquery, asp.net, webforms, registerclientscriptblock

我的 C# 代码中有一个 IF/ELSE 条件（使用 webforms），我想使用 ClientScript.RegisterClientScriptBlock 来更改锚标记类

```
email = Business.Core.Profiles.Email.SetEmailAlertProfile(base.companyId, type);

// Email obj == null means no alert data for advertiser with this ID.
if (email == null)
    {
        EmailAction = "add";
        lblEmailText.Text = "Add to Email Alerts";
        //Change Anchor class to show remove image
        //ClientScript.RegisterClientScriptBlock(typeof(string), "ChangeAnchorClass", "<script>$('.jsPopUp btnAddEList active').addClass('jsPopUp btnRemoveEList active');</script>");
    }
else
    {
        EmailAction = "delete";
        lblEmailText.Text = "Remove from Emails";
        //Change Anchor class to show remove image
        ClientScript.RegisterClientScriptBlock(typeof(string), "ChangeAnchorClass", "<script>document.getElementById('hrefEmail').className = 'MyClass';</script>");

    } 
```

我的 ELSE 条件给了我以下错误：

```
Microsoft JScript runtime error: Unable to set value of the property 'className': object is null or undefined 
```

我在其他地方的项目中使用了客户端脚本，但它在这里不起作用。

附加信息：

此代码位于页面加载时调用的方法中。不知道这是否有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:27:06.143

我改变了这个：

```
else
    {
        EmailAction = "delete";
        lblEmailText.Text = "Remove from Emails";
        //Change Anchor class to show remove image
        ClientScript.RegisterClientScriptBlock(typeof(string), "ChangeAnchorClass", "<script>document.getElementById('hrefEmail').className = 'MyClass';</script>");

    } 
```

对此：

```
else
    {
        EmailAction = "delete";
        lblEmailText.Text = "Remove from Emails";
        //Change Anchor class to show remove image
        ClientScript.RegisterStartupScript(typeof(string), "ChangeAnchorClass", "<script>document.getElementById('hrefEmail').className = 'MyClass';</script>");

    } 
```

# imagemagick - 如何从 TIFF 中去除水印以改进 OCR

> ID：15296977
> 
> 赞同：1
> 
> 时间：2013-03-08T15:02:27.693
> 
> 标签：imagemagick, watermark, gimp

我有一堆未压缩的双色调 TIF 文档图像。中间都有水印。当我通过 OCR 运行它们时，无法识别与水印重叠的文本。我正在尝试查看是否可以应用某种类型的清理来删除这些水印，以便能够识别丢失的文本。

同样，图像是黑白的，但是当您查看水印时，它会显示为灰色，因为它具有黑白像素图案，这使得水印中的字母不如常规文本“密集”。同时，水印字母很大，比普通文字大很多。

一个有点相似的图像的例子是[这个](http://blogs.zoho.com/image/13000000306068/zoho-writer-watermark-3.png)（除了这个是彩色的，我的水印字符更厚更大；我的水印也短了很多：只有 3 到 4 个字母长）

似乎可能有某种清理过滤器，类似于从图像中删除大的黑色边框，除了边框通常比水印“更密集”，因此它们看起来“更黑”。

我有 3 种工具可供使用：GIMP、ImageMagick 和 IrfanView。您能否推荐这些工具的任何子集的任何特定功能可能对我有帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:14:06.327

玩对比等并没有帮助，但我找到了一种不同的方式。如上所述，常规文本比水印文本更“密集”，这意味着常规黑色像素比水印黑色像素具有更多周围的黑色像素。所以我设计了一个简单的基于窗口的过滤和阈值算法。

这是我在 Matlab 中使用 5X5 窗口的方法：

```
im=imread('imageWithWmark.tif');
imInv = ~im;
nr=size(imInv,1);
nc=size(imInv,2);

d = 2;  % for 5X5 window
counts = zeros(nr,nc);
for rr = d+1 : nr-d-1
for cc = d+1 : nc-d-1
    counts(rr,cc) = nnz(imInv(rr-d:rr+d,cc-d:cc+d));
end
end

thresh=10;  % 10 out of 25 -- the larger the thresh the thinner the resulting letters are
imThresh = (counts>=thresh) & imInv;
imwrite(~imThresh,sprintf('Thresh_%d.tif',thresh),'Compression','none','Resolution',300); 
```

当然，窗口的大小、阈值和其他参数取决于页面上常规文本的参数（字母更大/更小、更粗/更细等），但即使是这个初始版本也能很好地工作

# checkbox - WiX - 将复选框值从 Burn UI 传递到 MSI

> ID：15296980
> 
> 赞同：2
> 
> 时间：2013-03-08T15:02:29.697
> 
> 标签：checkbox, wix, burn

我在 Burn 中有自定义 UI，带有“安装桌面图标”复选框。在我的 MSI（也是用 WiX 创建的）中，我用 Burn 替换了同样的东西。问题是 Burn 似乎将复选框值设置为`0`or `1`(via `MsiProperty`) 而我的 MSI 期望`NULL`or `NOT NULL`。如果您尝试通过 Burn 中的复选框值发送，MSI 将始终将其评估为 NOT NULL。我发现我可以编辑我的 WiX 项目并进行更改：

```
<Condition>DESKTOP_ICONS</Condition> 
```

到：

```
<Condition>DESKTOP_ICONS = 1</Condition> 
```

这将解决问题。但是有没有办法让 Burn 根据复选框的值将 NULL 或 NOT NULL 传递给 MSI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:50:11.527

Burn 会将“true”和“checked”视为“1”，将“0”视为 false。但是，您可以在 MSI 中创建一个自定义操作，将数字属性转换为“NULL”。它看起来像：

```
<SetProperty Id="NULL" Value="1" After="AppSearch">DESKTOP_ICONS = 1</SetProperty> 
```

现在如果属性设置为“1” `Property`，将定义命名的“NULL”（这是一个非常有趣的属性名称，恕我直言） 。`DESKTOP_ICONS`

# python - 在 Django 中合并 QuerySetValues 对象

> ID：15296982
> 
> 赞同：0
> 
> 时间：2013-03-08T15:02:34.747
> 
> 标签：python, django, python-2.7

我使用 Django 1.4 和 Py 2.7，我需要合并一些 QuerySetValues 并对字段“total”求和。

我的模型是：

```
class CategoryAnswers(models.Model):
    category = models.ForeignKey(Category, verbose_name="Category")
    answer = models.DecimalField("Resposta", default=0, decimal_places=2, max_digits=4)
    brand = models.ForeignKey(Brand, verbose_name="Brand")

    class Meta:
        db_table = 'category_answers'
        verbose_name = "CategoryAnswers"
        verbose_name_plural = "CategoryAnswers"

    def __unicode__(self):
        return self.category.name 

class Answers(models.Model):
    category_answers = models.ManyToManyField(CategoryAnswers, verbose_name="CategoryAnswers")    
    user = models.ForeignKey(User, verbose_name="User")
    campaign = models.ForeignKey(Campaign,verbose_name="Campaign")

    class Meta:
        db_table = 'answers'
        verbose_name = "Answers"
        verbose_name_plural = "Answers"

    def __unicode__(self):
        return 'Answers' 
```

当我搜索使用以下代码对字段进行分组所需的所有记录时：

```
for answer in answers:
        print answer.category_answers.all().values('brand','category').annotate(total=Sum('answer')) 
```

返回这个：

```
[{'category': 7L, 'brand': 8L, 'total': Decimal('5.00')}, {'category': 3L, 'brand': 5L, 'total': Decimal('5.00')}, {'category': 4L, 'brand': 8L, 'total': Decimal('4.00')}, {'category': 2L, 'brand': 1L, 'total': Decimal('4.00')}, {'category': 4L, 'brand': 5L, 'total': Decimal('3.00')}]

[{'category': 7L, 'brand': 8L, 'total': Decimal('5.00')}, {'category': 3L, 'brand': 5L, 'total': Decimal('8.00')}, {'category': 4L, 'brand': 8L, 'total': Decimal('7.00')}, {'category': 2L, 'brand': 1L, 'total': Decimal('5.00')}, {'category': 4L, 'brand': 5L, 'total': Decimal('4.00')}]

[{'category': 7L, 'brand': 8L, 'total': Decimal('5.00')}, {'category': 3L, 'brand': 5L, 'total': Decimal('6.00')}, {'category': 4L, 'brand': 8L, 'total': Decimal('6.00')}, {'category': 2L, 'brand': 1L, 'total': Decimal('7.00')}, {'category': 4L, 'brand': 5L, 'total': Decimal('7.00')}] 
```

我需要按类别和品牌分组，并对每个字段求和。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:15:41.997

```
categories=CategoryAnswers.objects.values_list('category', 'brand').distinct()

for cat in categories:
    print CategoryAnswers.objects.filter(
        category=cat.category, brand=cat.brand).annotate(total=Sum('answer')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:32:24.357

```
categories=CategoryAnswers.objects.values('category', 'brand').distinct()
for cat in categories:
    print CategoryAnswers.objects.filter(category=cat["category"], brand=cat["brand"]).values('category', 'brand').annotate(total=Sum('answer')) 
```

# sql - INESRT INTO 来自三个 SELECT 语句的表

> ID：15296985
> 
> 赞同：-1
> 
> 时间：2013-03-08T15:02:41.703
> 
> 标签：sql, insert

第一个选择填充 countOfActivePlans：

```
SELECT COUNT(DISTINCT a.txtprogram) AS countOfActivePlans, c.txtLevel1
FROM tblOfferings a, tblClaims b, tblRetailers c
WHERE a.ysnActive=1 
      AND c.intRetailer=b.intRetailer 
      AND c.intRetailer=a.intRetailer
GROUP BY c.txtLevel1
ORDER BY c.txtLevel1 
```

第二个选择填充plansWithActivity：

```
SELECT COUNT(DISTINCT a.txtProgram) AS plansWithActivity,   c.txtLevel1
FROM tblClaims a, tblOfferings b, tblRetailers 
WHERE a.intOffering=b.intOffering 
      AND c.intRetailer=a.intRetailer 
      AND c.intRetailer=b.intRetailer
GROUP BY c.txtlevel1
ORDER BY c.txtLevel1 
```

第三个填充 Approved、Denied 和 sumOfcurPaid：

```
SELECT COUNT(a.dblTransaction) AS invoicesSubmitted, SUM(curPaid) AS sumOfcurPaid, b.txtLevel1, 
       CASE WHEN a.intTransCode=0 THEN 'Denied' 
            WHEN a.intTransCode=1 THEN 'Approved' 
            ELSE 'Reissued' 
       END AS txtLabel
FROM tblClaims a, tblRetailers b, tbLTransCode c
WHERE a.intRetailer=b.intRetailer 
      AND a.intTransCode=c.intTransCode
GROUP BY b.txtLevel1, 
       CASE WHEN a.intTransCode=0 THEN 'Denied' 
            WHEN a.intTransCode=1 THEN 'Approved' 
            ELSE 'Reissued' 
       END
ORDER BY b.txtLevel1 asc 
```

下表如下。

我怎样才能使这个`INSERT`填充表格？

```
Area countOfActivePlans plansWithActivity   approved    denied  sumOfCurPaid
-----------------------------------------------------------------------------
CE   237                230                 89898       11438   1238152.858
NE   189                178                 54159       5667    1665176.757
SE   177                165                 58675       5873    1406241.758
SW   118                111                 32450       6934    1329101.503
WE   152                145                 40266       3473    529956.6875 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:28:54.177

```
INSERT INTO
  MyTable (Area,countOfActivePlans,plansWithActivity,approved,denied,sumOfCurPaid)
SELECT
  f1.Area, f2.countOfActivePlans, f3.plansWithActivity, f4.Approved, f4.Denied, f4.sumOfcurPaid,
FROM
  (SELECT [THAT GETS THE AREA])           AS f1
CROSS JOIN
  (SELECT COUNT(DISTINCT a.txtprogram) AS countOfActivePlans, c.txtLevel1
    FROM tblOfferings a, tblClaims b, tblRetailers c
    WHERE a.ysnActive=1 
      AND c.intRetailer=b.intRetailer 
      AND c.intRetailer=a.intRetailer
    GROUP BY c.txtLevel1
    ORDER BY c.txtLevel1 )           AS f2
CROSS JOIN
  (SELECT COUNT(DISTINCT a.txtProgram) AS plansWithActivity,   c.txtLevel1
    FROM tblClaims a, tblOfferings b, tblRetailers c
    WHERE a.intOffering=b.intOffering 
      AND c.intRetailer=a.intRetailer 
      AND c.intRetailer=b.intRetailer
    GROUP BY c.txtlevel1
    ORDER BY c.txtLevel1) AS f3
CROSS JOIN
  (SELECT COUNT(a.dblTransaction) AS invoicesSubmitted, SUM(curPaid) AS sumOfcurPaid, b.txtLevel1, 
   CASE WHEN a.intTransCode=0 THEN 'Denied' 
        WHEN a.intTransCode=1 THEN 'Approved' 
        ELSE 'Reissued' 
   END AS txtLabel
   FROM tblClaims a, tblRetailers b, tbLTransCode c
   WHERE a.intRetailer=b.intRetailer 
    AND a.intTransCode=c.intTransCode
   GROUP BY b.txtLevel1, 
   CASE WHEN a.intTransCode=0 THEN 'Denied' 
        WHEN a.intTransCode=1 THEN 'Approved' 
        ELSE 'Reissued' 
   END
   ORDER BY b.txtLevel1 asc)           AS f4 
```

我认为这没问题，但我在下面包含了基本思想，以防我上面的代码有误。

```
INSERT INTO
  MyTable (Col1,Col2,Col3,Col4,Col5,Col6)
SELECT
  f1.col1, f2.col2, f3.col3, f4.col4, f4.col5, f4.col6
FROM
  (SELECT Col1 FROM QUERYWITHAREA)    AS f1
CROSS JOIN
  (SELECT Col2 FROM QUERY1)           AS f2
CROSS JOIN
  (SELECT Col3 FROM QUERY2)           AS f3
CROSS JOIN
  (SELECT Col4,Col5,Col6 FROM QUERY3) AS f4 
```

希望这会有所帮助，抱歉，如果第一个示例不完美，它可以帮助您。老实说，我很想将您问题中的每个查询放入一个函数中，并以上述样式调用每个函数。

# ruby - 为什么 Heroku 堆栈跟踪表明 Ruby 1.9.1 正在使用中？

> ID：15296990
> 
> 赞同：0
> 
> 时间：2013-03-08T15:02:56.273
> 
> 标签：ruby, heroku

最近在 cedar 上的 Heroku 应用程序上看到了这个堆栈跟踪

```
/usr/local/lib/ruby/1.9.1/uri/common.rb:156:in `split'
/usr/local/lib/ruby/1.9.1/uri/common.rb:174:in `parse'
/usr/local/lib/ruby/1.9.1/uri/common.rb:628:in `parse' 
```

**为什么它使用 Ruby 1.9.1？**

我的 Gemfile 没有指定 Ruby 版本。Heroku 的文档建议我们应该得到 Cedar 默认的 1.9.2

[https://devcenter.heroku.com/articles/ruby-versions](https://devcenter.heroku.com/articles/ruby-versions)

**编辑：**

ruby -v 似乎报告了正确的版本

```
$ heroku run "ruby -v"
Running `ruby -v` attached to terminal... up, run.2594
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-linux] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T15:27:50.047

它实际上并没有使用 Ruby [1.9.1——正如 Marc-André Lafortune 的](https://stackoverflow.com/users/8279/marc-andre-lafortune)[回答](https://stackoverflow.com/a/8565831/126042)所解释的那样，它与 C 接口有关，自 Ruby 1.9.1 以来就没有改变。

> 在 Ruby 1.9.0 中，C 接口从 Ruby 1.8 系列更改。
> 
> 必须重新编译编译为本机代码的 Gem。
> 
> 该界面在 Ruby 1.9.1 中再次更改，并在 Ruby 1.9.2 和 3 中保持不变。这解释了您在路径中看到的 1.9.1。
> 
> 这个想法是您可以在系统上安装不同版本的 Ruby，并且 gem 将在具有相同 C api 的组内共享。因此 Ruby 1.8.6 和 1.8.7 可以共享它们的 gem，Ruby 1.9.1、.2 和 .3 也可以。
> 
> 不过，这不一定是最好的主意。在任何情况下，大多数人都使用 rvm 来访问不同版本的 Ruby，并且 rvm 将每个版本的 gems 分开，而与 C api 版本无关。

# java - Apache Mina 恒流

> ID：15296992
> 
> 赞同：1
> 
> 时间：2013-03-08T15:03:01.223
> 
> 标签：java, streaming, mp3, mina

我正在尝试使用 Apache Mina 库编写 MP3 流媒体服务器。由于每个客户端都会有一个恒定的数据流，以下代码是否是向每个连接的cients发送数据的正确方法？

我对其进行了测试并且它有效，但我只是想确保我做得正确。

```
Map<Long,IoSession> managedSessions = acceptor.getManagedSessions();
            if(managedSessions != null) {
                for(IoSession session : managedSessions.values()) {
                    session.write(new byte[]{1,2,3,4,5,3,4,23,4,23,4});
                }
            } 
```

谢谢！

# c# - .NET 中的错误通信和恢复方法

> ID：15296993
> 
> 赞同：1
> 
> 时间：2013-03-08T15:03:01.530
> 
> 标签：c#, .net, oop, design-patterns

我正在尝试在不使用异常的情况下在我的 C# 代码中进行错误通信和恢复。举个例子，假设有一个 Func A，它可以被 Func B 或 Func C 或其他函数调用。Func A 的设计必须牢记重用。（此应用程序有一个不断发展的库，其中新功能将在一段时间内不断添加）

如果 Func A 不能做它应该做的事情，它会返回一个 int，其中任何非零值都表示失败。我也想交流失败的原因。调用者函数可以通过多种方式使用此信息：

1.  它可以向用户显示错误消息，
2.  它可能会显示与其上下文更相关的自己的错误消息
3.  它本身可能会返回一个 int 值，指示进一步的祖先调用函数失败。
4.  它可能会尝试使用一些智能算法从错误中恢复。

假设地，其他函数所依赖的任何函数都可能需要将多个信息传递给其调用函数以采取适当的行动，包括状态代码、错误消息和其他指示数据状态的变量。将所有内容作为分隔字符串返回可能不允许调用函数在不解析字符串的情况下检索信息（这会导致其自身的问题，不推荐）。

唯一的另一种方法是返回一个包含所有必需信息的成员变量的对象。这可能会导致过多的“状态”对象，因为每个函数都需要有它的状态对象。

我想了解如何以最优雅的方式设计此要求。请注意，在编码时，Func A 可能不知道调用者函数是否具有从错误中恢复的智能，因此我不想抛出异常。另外，我想看看在不使用异常的情况下，这样的设计是否可行（同时又很优雅）。

如果唯一的方法是使用每个函数的数据对象进行通信，那么它就是编写专业库的方式。可以有一个通用的数据对象吗？请注意，将来可能会添加新功能，这些功能可能具有不同的状态变量，或有关其错误的支持信息。

另请注意，由于函数的返回值是一个“状态”对象，它应该返回的实际数据可能需要作为 ref 或 out 参数传递。

这有设计模式吗？

在发布此问题之前，我已阅读以下文章：

[http://blogs.msdn.com/b/ricom/archive/2003/12/19/44697.aspx](http://blogs.msdn.com/b/ricom/archive/2003/12/19/44697.aspx)

[当不抛出异常时，try/catch 块会损害性能吗？](https://stackoverflow.com/questions/1308432/do-try-catch-blocks-hurt-performance-when-exceptions-are-not-thrown)

[无异常的错误处理](https://stackoverflow.com/questions/1272342/error-handling-without-exceptions?rq=1)

我还阅读了许多其他文章，这些文章建议不要将异常用于代码流控制和可恢复的错误。此外，抛出异常有其自身的成本。此外，如果调用者函数想要从每个被调用函数抛出的异常中恢复，则必须用 try catch 块包围每个函数调用，因为通用 try catch 块不允许从下一行“继续”的错误线。

**编辑：**

几个具体问题：我需要编写一个应用程序，它将同步 2 个不同的数据库：一个是专有数据库，另一个是 SQL Server 数据库。我想将可重用的函数封装在一个单独的层中。

功能是这样的：专有应用程序可以有许多数据库。需要将来自这些数据库中的每一个的一些信息推送到单个通用 SQL Server 数据库。专有应用程序的数据库只有在应用程序的 GUI 打开时才能读取，并且只能通过 XML 读取。

算法是这样的：

1.  读取专有应用程序中的打开数据库列表
2.  对于每个数据库，启动同步进程。
3.  检查当前登录的用户是否在此数据库中具有同步权限。（注意：每个数据库都可以使用不同的用户 ID 打开）。
4.  从此数据库中读取数据。
5.  将数据传输到 SQL Server
6.  进入下一个数据库。

在开发这个应用程序时，我将编写几个可重用的函数，如 ReadUserPermission、ReadListOfDatabases 等。

在这种情况下，如果 ReadUserPermission 发现该权限不存在，调用者应该记录这个并继续下一个打开的数据库。如果 ReadListOfDatabases 无法与专有应用程序建立连接，调用者应自动启动应用程序等。

那么哪些错误条件应该传达异常，哪些使用返回码呢？

请注意，可重用函数可能会在其他项目中使用，其中调用者可能具有不同的错误恢复要求或功能，因此必须牢记这一点。

**编辑：**

对于所有提倡异常的人，我问他们：如果 Func A 调用 Func B,C,D,E,F,G 并且 Func B 在某些错误条件下抛出异常，但 Func A 可以从这个错误中恢复并愿意继续执行的其余部分，即调用 Func B、C、D、...，异常处理如何允许“优雅地”执行此操作？唯一的解决方案是将对 B、C、D、... 中的每一个的调用包装在一个 try catch 块中，以便执行剩余的语句。

另请阅读以下两条评论：

[https://stackoverflow.com/a/1279137/1113579](https://stackoverflow.com/a/1279137/1113579)

[https://stackoverflow.com/a/1272547/1113579](https://stackoverflow.com/a/1272547/1113579)

**注意**我不反对使用异常，如果可以*优雅*地实现错误恢复和剩余代码执行而不影响性能。此外，轻微的性能影响不是问题，但我更喜欢设计应该是可扩展的和优雅的。

**编辑：**

好的，基于“Zdeslav Vojkovic”评论，我现在正在考虑使用异常。

如果我要使用异常，你能给出一些不使用异常但使用返回码的用例吗？**注意：**我说的是返回*码*，而不是函数应该返回的数据。有没有使用返回码来指示成功/失败的用例，或者没有用例？这将帮助我更好地理解。

我从“Zdeslav Vojkovic”中了解到的一个异常用例是当被调用函数想要强制通知调用函数某些条件并中断调用者执行时。在没有异常的情况下，调用者可能会或可能不会选择检查返回码。但是在异常的情况下，调用者函数必须处理异常，*如果它想继续执行*。

**编辑：**

我有另一个有趣的想法。任何想要支持调用者函数从错误中恢复的思想的被调用者函数都可以引发事件，并在事件处理后检查事件数据，然后决定是否抛出异常。根本不会使用错误代码。异常将用于未恢复的错误。基本上，当被调用函数无法执行其合同规定的操作时，它会以任何可用事件处理程序的形式请求“帮助”。如果它不能履行合同，它仍然会抛出一个异常。优点是减少了引发异常的额外开销，并且仅当被调用函数或其任何调用函数无法从错误中恢复时才引发异常。

假设如果调用者函数不想处理错误，而是调用者的调用者函数想要处理错误，自定义事件分派器将确保事件处理程序以事件注册的相反顺序被调用，即最近注册的事件handler 应该在其他注册的事件处理程序之前被调用，如果这个事件处理程序能够解决错误，那么后续的事件处理程序根本不会被调用。另一方面，如果最近的事件处理程序不能解决错误，事件链将传播到下一个处理程序。

请对此方法提供反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:23:21.197

“是不是专业图书馆的写法？”

不，专业库是通过使用异常处理错误来编写的 - 我不确定是否有使用您建议的方法的模式，但我认为它是一种反模式（在 .NET 中）。毕竟，.NET 本身是一个专业的框架，它[使用异常](http://msdn.microsoft.com/en-us/library/vstudio/ms229014%28v=vs.100%29.aspx)。此外，.NET 开发人员习惯于异常。你认为你的库真的有那么特别，可以迫使用户学习完全不同的错误处理方式吗？

您刚刚所做的是重新发明 COM 错误处理。如果那是您想要做的，那么请检查[此](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679692%28v=vs.85%29.aspx)并[`ISupportErrorInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms715816%28v=vs.85%29.aspx)接口以获取一些想法。

你为什么要这样做？我敢打赌，这是一种性能“优化”。

担心与异常处理有关的性能问题几乎总是过早的优化。您将创建一个笨拙的 API，其中每个返回值都必须通过 ref/out 参数处理，这将伤害您的 lib 的每个用户，只是为了解决可能根本不存在的问题。

> “Func A 可能不知道调用者函数是否具有从错误中恢复的智能，所以我不想抛出异常”

所以你想确保调用者默默地允许 FuncA 搞乱系统不变量，调用者只是愉快地继续？由于这个原因，它只会使调试看似不可能的错误变得更加困难，该错误稍后会在另一个函数中发生。

在某些情况下，避免异常是有意义的，但应该有充分的理由。例外是个好主意。

编辑：我看到您补充说您“还阅读了许多其他文章，建议不要使用异常来控制代码流”。没错，.NET 中的异常不是用于代码流，而是用于错误处理。

你问：

> 如果 Func A 调用 Func B,C,D,E,F 并且它必须用 try catch 封装每个调用，因为它可以从错误中恢复或者它仍然希望执行剩余的函数调用，那么这么多 try catch 语句就不会尴尬了

不超过替代。您犯了一个错误，您可以以相同的方式简单地处理从函数返回的所有错误，但通常不能。

考虑是否需要单独处理每个函数 - 最坏的情况和代码通常不是这样编写的：

```
Result x, y;
try {
   x = Function1();
}
catch(SomeException e) {
   // handle error   
}
try {
   y = Function2();
}
catch(SomeOtherException e) {
   // handle error   
} 
```

反对：

```
int error;
Result x, y;
error = Function1(out x);
if(error != SOME_KNOWN_ISSUE) {
   // handle error    
}
error = Function2(out y);
if(error != SOME_KNOWN_ISSUE) {
   // handle error
} 
```

差别不大。请不要告诉我你不会检查错误代码。但是，如果您决定忽略所有错误（一个可怕的想法），那么异常会更简单：

```
try {
    var x = Function1();
    var y = Function2();    
    var z = Function3();
}
catch Exception() { you still can see the message here and possibly rethrow } 
```

对比

```
Result1 r1;
Function1(out r1);
Result2 r2;
Function2(out r2);
Result3 r3;
Function3(out r3);
// and here you still don't know whether there was an error 
```

> 您能否详细说明“我需要关于时间限制的可预测性”是什么意思？

在某些系统级软件或实时的东西中，您无法承受与异常处理相关的堆栈展开，因为您无法保证持续时间，这可能会违反您的时序要求。但在 .NET 中从来没有这种情况，因为垃圾收集在这方面要糟糕得多。

> 此外，当您说“在 .NET 中，我总是使用异常处理错误”时，您能否解释一下您如何或将什么定义为错误条件？可恢复的情况是错误条件还是不是错误条件？——</p>

@shambulator 已经在评论中给出了一个很好的例子。在`FileStream`，丢失的文件是不可恢复的，它会抛出。在它的客户端中，`FileStream`它可能是可恢复的，也可能是不可恢复的，具体取决于上下文。有些客户端会忽略它，有些会退出应用程序，有些会将其包装在另一个异常中并让上游的人来决定。

> 什么时候不使用异常？

在那些我也不会返回错误代码的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:31:14.057

将一个公共`FunctionResult`对象用作`out`您不想抛出异常的所有方法的参数怎么样？

```
public class FuncResultInfo
    {
        public bool ExecutionSuccess { get; set; }
        public string ErrorCode { get; set; }
        public ErrorEnum Error { get; set; }
        public string CustomErrorMessage { get; set; }

        public FuncResultInfo()
        {
            this.ExecutionSuccess = true;
        }

        public enum ErrorEnum
        {
            ErrorFoo,
            ErrorBar,
        }
    }

    public static class Factory
    {
        public static int GetNewestItemId(out FuncResultInfo funcResInfo)
        {
            var i = 0;
            funcResInfo = new FuncResultInfo();

            if (true) // whatever you are doing to decide if the function fails
            {
                funcResInfo.Error = FuncResultInfo.ErrorEnum.ErrorFoo;
                funcResInfo.ErrorCode = "234";
                funcResInfo.CustomErrorMessage = "Er mah gawds, it done blewed up!";
            }
            else
            {
                i = 5; // whatever.
            }

            return i;
        }
    } 
```

确保所有可能无异常失败的函数都具有该`out`参数`FuncResultInfo`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-04T06:28:59.537

我在 ms-access 中广泛使用了 FunctionResult 方法，它的效果非常好。我认为它比错误处理好得多。首先，每个错误消息都是特定于应用程序的，而不是通常偏离目标的默认错误消息。如果错误向上传播函数的调用列表，则可以将错误消息以菊花链形式链接在一起。这个最终的错误消息看起来像一个调用堆栈，但更清晰，例如[无法从驱动器 F 读取照片：，无法读取文件，驱动器未准备好]。Wacko，我刚刚发现一些驱动器可以安装但尚未准备好。我无法对该错误进行单元测试，因为我不知道可能会发生这样的错误（意味着 SD 卡读卡器为空）。然而，即使事先不知道这个错误，我也可以编写一个优雅地处理它的应用程序。

我的方法是调用类中的方法，该方法被编写为返回布尔值的函数。返回值在函数的最后一行设置为 True，因此如果函数在最后一行之前退出，默认情况下是不成功的。我编码，调用函数看起来像 if getphotos(folderID) then...do something .. Else 报告错误。类模块内部是一个模块级错误变量 (Str meM)，它是通过 getter 读取的，因此该类有一个 .em 属性来保存错误消息。我还有一个注释变量，有时用作错误消息，例如，如果文件夹为空，则查找照片的代码有效但未返回任何照片。这不会是一个错误，但它是我可能想要与调用程序通信的东西。如果有错误，用户将收到一条错误消息，调用过程将退出。相反，如果有一个 cmt，例如“没有照片”，那么我可能会尝试阅读照片元数据。Zdeslav Vojkovic 如何处理带有例外的微妙之处？

我正在转向 C#，因此找到了这个线程。我喜欢知道为什么函数调用失败的确定性（我一直与数据库和文件系统交互，所以我很难用单元测试来覆盖我的项目）。我同意 Zdeslav Vojkovic 关于使用标准的异常，但不会在我自己的代码中这样做。我正在寻找一种简洁的设计模式，它允许我验证被调用函数中的参数，并在参数不正确时通知调用者。

# dependency-injection - ZF2 模块配置 service_manager 添加构造函数参数

> ID：15296994
> 
> 赞同：0
> 
> 时间：2013-03-08T15:03:09.653
> 
> 标签：dependency-injection, zend-framework2, php

我一直在搜索和尝试一段时间，但我找不到我做错了什么......我现在已经阅读了很多文档并尝试了很多不同的方法。

我希望你们中的一个可以帮助我..

我的想法：我有一个名为 Application 的模块。在这个模块中有一个`\Application\Controller\IndexController`用于显示我的应用程序的主页。IndexController 需要一个带有 的对象`\Zend\http\Client`，所以我应该在返回的配置中使用 factory 键，`\Application\Module->getServiceConfig()`并添加一个带有所需参数的构造函数`\Zend\Http\Client $client`。

不幸的是，这不起作用..

我的代码：

```
<?php
// module/Application/Module.php

namespace Application;

use Zend\Mvc\ModuleRouteListener;
use Zend\Mvc\MvcEvent;

class Module
{
    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }

    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'IndexController' => function($serviceManager) {
                    $httpClient = \Zend\Http\Client;

                    return new IndexController($httpClient);
                },
            ),
        );
    }

    public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    }
}

<?php
// module/Application/config/module.config.php

return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route' => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action' => 'index',
                    ),
                ),
            )
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'translator' => array(
        'locale' => 'en_US',
        'translation_file_patterns' => array(
            array(
                'type' => 'gettext',
                'base_dir' => __DIR__ . '/../language',
                'pattern' => '%s.mo',
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController'
        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions' => true,
        'doctype' => 'HTML5',
        'not_found_template' => 'error/404',
        'exception_template' => 'error/index',
        'template_map' => array(
            'layout/layout' => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/index/index.phtml',
            'error/404' => __DIR__ . '/../view/error/404.phtml',
            'error/index' => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
);

<?php
// module/Application/src/Application/Controller/IndexController.php

namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class IndexController extends AbstractActionController
{
    protected $httpClient;

    public function __construct(\Zend\Http\Client $client)
    {
        $this->httpClient = $client;
    }

    public function getHttpClient()
    {
        return $this->httpClient;
    }

    public function indexAction()
    {                
        $httpClient = $this->getHttpClient();

        return new ViewModel();
    }
} 
```

错误：

> 可捕获的致命错误：传递给 Application\Controller\IndexController::__construct() 的参数 1 必须是 Zend\Http\Client 的实例，没有给出，在 /var/www/library/Zend/ServiceManager/AbstractPluginManager.php 中调用170 并在第 13 行的 /var/www/module/Application/src/Application/Controller/IndexController.php 中定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:34:35.447

您需要`getControllerConfig`在 Module.php 中实现该方法来执行您所要求的操作，控制器有自己的管理器，从 getServiceConfig 中删除您拥有的内容，并改用以下内容

```
public function getControllerConfig()
{
    return array(
        'factories' => array(
            'Application\Controller\Index' => function($serviceManager) {
                $httpClient = new \Zend\Http\Client;
                return new \Application\Controller\IndexController($httpClient);
            },
        ),
    );
} 
```

您还需要从 module.config.php 中的控制器可调用文件中删除该行，因为它会与您的工厂冲突

```
'controllers' => array(
    'invokables' => array(
        // this line's no longer needed
        //'Application\Controller\Index'      => 'Application\Controller\IndexController',
    ),
), 
```